# StackOverflow 问答 13554000-13554999

# html - 有没有我可以用来包围的元素 具有以外的元素 或者 ?

> ID：13554010
> 
> 赞同：1
> 
> 时间：2012-11-25T18:22:30.950
> 
> 标签：html

我有以下内容：

```
<ul id="status-infos">
   <li>x</li>
   <li>y</li> 
</ul> 
```

是否有任何法律元素可以用来包含这些`<li>`元素。例如：

```
<ul id="status-infos">
  <xxx id="xxx">
   <li>x</li>
   <li>y</li> 
  </xxx>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T18:34:28.180

在 HTML 5 中，该`<menu>`项目也可以是`li`元素的父级。（*但您不能将`menu`用作`ul`/的子级`ol`。您只能使用它**来代替**它们*）

规格是[http://www.w3.org/TR/html-markup/li.html](http://www.w3.org/TR/html-markup/li.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T18:37:51.013

你可以使用另一个`ul`：

```
<ul id="status-infos">
  <li>
      <ul id="xxx">
          <li>x</li>
          <li>y</li> 
      </ul>
  </li>
</ul> 
```

我怀疑你的问题真的是：

> 有没有办法可以 CSS 挂钩列表中的连续列表项块

好吧，你可以给他们所有的类名，或者去寻找更有创意的解决方案，比如`nth-child`范围。假设您想对第 4 和第 7 个之间的所有列表项应用一些 CSS。你会使用：

```
li:nth-child(n+4):nth-child(-n+7){
    color:red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:17:03.227

根据 HTML 规范，`li`元素也可以显示为`menu`和元素的子`dir`元素。但这没什么用，因为这些元素本来是 的表示变体，`ul`甚至没有变成那个（它们通常以与 相同的方式呈现`ul`）。HTML5 草案中的新含义`menu`是另一回事，但在这里也不相关。

我建议您问一个不同的问题，以指定您希望实现的目标，而不是针对未指定问题的假设解决方案（无法工作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:17:07.223

如果您唯一的愿望是为 的样式挂钩（为什么？）添加一个额外的包装器`<li>`，那么正确的做法是`<ul>`用容器包装 ：

```
 <div id="xxx_container">
      <ul id="xxx">
          <li>x</li>
          <li>y</li> 
      </ul>
  </div> 
```

# java - 如何用其他字符替换小写字母？

> ID：13554017
> 
> 赞同：1
> 
> 时间：2012-11-25T18:23:01.623
> 
> 标签：java, string

有没有一种更简单的方法可以用另一个字符（如点）替换小写字母，我目前正在使用此代码

```
 s = s.replace("a", ".");s = s.replace("b", ".");s = s.replace("c", ".");s = s.replace("d", ".");s = s.replace("e", ".");s = s.replace("f", ".");s = s.replace("g", ".");s = s.replace("h", ".");s = s.replace("i", ".");s = s.replace("j", ".");s = s.replace("k", ".");s = s.replace("l", ".");s = s.replace("m", ".");s = s.replace("n", ".");s = s.replace("o", ".");s = s.replace("p", ".");s = s.replace("q", ".");s = s.replace("r", ".");s = s.replace("s", ".");s = s.replace("t", ".");s = s.replace("u", ".");s = s.replace("v", ".");s = s.replace("w", ".");s = s.replace("x", ".");s = s.replace("y", ".");s = s.replace("z", "."); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T18:24:27.267

您可以使用[`String#replaceAll()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)方法以更简单的方式执行此操作，该方法将正则表达式作为第一个参数：-

```
s = s.replaceAll("[a-z]", "."); 
```

`[a-z]`是一个字符类，`range`它匹配从`a`to 的每个字符`z`。因此，所有小写字母都替换为`.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T18:30:14.763

在 String 方法的 4 种变体中`replace()`，您可以下注`replaceAll()`

**例如：**

```
public class Replace {

    public static void main(String[] args){

        String s = "HELLO THIs Is a BIG gAme";

        System.out.println(s.replaceAll("[a-z]","." ));
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:26:13.473

使用正则表达式进行替换。

```
 s.replaceAll("[a-z]","."); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T18:38:40.447

旧样式替换：

```
public class Replace{   
public static void main(String[] args) {
    String s= "HEllo WOrlD";
    char replacement='.';

    char[] c =s.toCharArray();

    for(int i =0;i<s.length();i++) {
        for(int j=97;j<=122;j++) {
            if(s.charAt(i)==j)
                c[i]=replacement;
        }
    }

    System.out.println(s);      
    System.out.println(String.valueOf(c));  
}
} 
```

# node.js - JSONP request working cross-domain, but can't figure out origin

> ID：13554022
> 
> 赞同：0
> 
> 时间：2012-11-25T18:23:26.803
> 
> 标签：node.js, express, cross-domain, jsonp, cors

I'm trying out a JSONP call. I have a NodeJs app in server 1, under domain domain1.com looking like this:

```
server.get('/api/testjsonp', function(req, res) {

  var clientId = req.param('clientId');

  res.header('Content-Type', 'application/json');
  res.header('Charset', 'utf-8') 
  res.send(req.query.callback + '({"something": "rather", "more": "fun",
          "sourceDomain": "' + req.headers.origin + '"' + ',"clientId":"' + clientId + 
          '"});');  

}); 
```

In another server (server 2) and under a different domain (domain2.com), I have created a test html page with a call like this:

```
 var data = { clientId : 1234567890 };

            $.ajax({
                    dataType: 'jsonp',
                    data: data,
                    jsonp: 'callback',
                    url: 'https://domain1.com/api/testjsonp?callback=1',                        
                    success: function(data) {
                        alert('success');
                    },
        error: function(err){
                        alert('ERROR');
                        console.log(err);
                    }
                }); 
```

I have 2 problems here:

1) Why is this working? Isn't it a cross-domain call and therefore I'd need to implement the ALLOW-ORIGIN headers stuff? I'm following this example:

[http://css.dzone.com/articles/ajax-requests-other-domains](http://css.dzone.com/articles/ajax-requests-other-domains)

[http://benbuckman.net/tech/12/04/cracking-cross-domainallow-origin-nut](http://benbuckman.net/tech/12/04/cracking-cross-domainallow-origin-nut)

2) In the server, I can't figure out which domain is making the call, req.headers.origin is always undefined. I'd like to be able to know which domain is calling, to prevent unwanted calls. Alternative I could check for the calling IP, any idea how?

Many thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:32:11.073

> 为什么这行得通？这不是一个跨域调用，因此我需要实现 ALLOW-ORIGIN 标头的东西吗？我

就浏览器而言，您不是直接从不同来源读取数据。您正在从另一个来源加载一个 JavaScript 程序（它恰好捆绑了一些数据）。

> 在服务器中，我不知道是哪个域进行了调用，req.headers.origin 始终未定义。我希望能够知道正在调用哪个域，以防止不必要的调用。

引用页面的 URL 存储在 Referer 标头中，而不是 Origin 标头中。但是，它是可选的，在许多情况下不会发送。

如果您想限制对某些站点的数据访问，则不能使用 JSON-P。请改用纯 JSON 和 CORS。

> 替代方案我可以检查呼叫IP，知道怎么做吗？

这将为您提供客户端的地址，而不是将客户端定向到您的服务器。

# google-maps - 什么是在 v3 javascript 中替换 google maps api v2 javascript 的 getLocation() 函数？

> ID：13554033
> 
> 赞同：3
> 
> 时间：2012-11-25T18:24:38.857
> 
> 标签：google-maps, google-maps-api-3

我有使用 getLocation() 函数的 v2 javascript 的谷歌地图应用程序。现在我想将我的应用程序从 v2 转换为 v3。但是我还没有看到 v3 中提供了相同任务的任何功能。谁能说是否有任何可用的功能，如果是，请命名该功能，如果没有，那么如果有人可以让我知道如何在 v3 中完成任务。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T18:32:45.513

在 v3 中，我们使用 geocoder.geocode() 而不是 GClientGeocoder.getLocation()。

检查此页面。 [https://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

# powershell - powershell 显示调用 espression 的输出

> ID：13554047
> 
> 赞同：0
> 
> 时间：2012-11-25T18:26:24.770
> 
> 标签：powershell, invoke, output

我有一个 powershell windows 窗体，它有一个按钮，该按钮使用调用表达式调用批处理文件，然后调用另一个 powershell 脚本。该脚本运行良好，但我在 powershell 命令窗口中看不到第二个脚本的输出。

单击时调用第二个 powershell 脚本的按钮：

```
$run = New-Object System.Windows.Forms.Button
$run.Location = New-Object System.Drawing.Size(133,430)
$run.Size = New-Object System.Drawing.Size(75,23)
$run.Text = "Run"
$run.Add_Click({ Invoke-Expression \\$pc\c$\users\$user\desktop\a\test.bat;

 })
 [System.Windows.Forms.MessageBox]::Show("Changes Saved. Now click RUN.") }) 
```

用于调用第二个 powershell 脚本的批处理文件：c:\Windows\System32\WindowsPowerShell\v1.0\powershell -ExecutionPolicy RemoteSigned - File "C:\Users\kam\Desktop\a\Powershell.ps1"

第二个脚本本身只是将文件复制到远程主机，并使用 write-host 命令显示输出。如果我自己运行这个脚本，它会显示输出，但是当我使用调用表达式运行它时，它会显示一个空白的 powershell 命令窗口。

任何帮助，将不胜感激。 ![第二个脚本运行时显示的图像](../Images/c936f4ace1ef6143725b3419f5386e96.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:40:21.907

已修复，因为我是调用bat文件来调用powershell，我只是直接调用powershell脚本并显示输出。

```
$run = New-Object System.Windows.Forms.Button
$run.Location = New-Object System.Drawing.Size(133,430)
$run.Size = New-Object System.Drawing.Size(75,23)
$run.Text = "Run"
$run.Add_Click({ Invoke-Expression \\$pc\c$\users\$user\desktop\a\powershell.ps1;

 })
 [System.Windows.Forms.MessageBox]::Show("Changes Saved. Now click RUN.") }) 
```

# xml - 在 Haskell 中为箭头函数提供参数

> ID：13554051
> 
> 赞同：3
> 
> 时间：2012-11-25T18:26:38.607
> 
> 标签：xml, haskell, xml-parsing, monads, arrows

我有一个包含一些数据的 XML 文件。该文件包含对列和数据本身的描述。我可以读取列名，但无法读取数据，因为我不明白如何将此行名赋予将返回数据的函数。

XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Document>
<Header>
<Project code="SOME PROJECT" label="PROJECT LABEL"></Project>
<Datatable name="LOG" label="Visits"></Datatable>
<Columns>
    <column name="study" label="Study" ordinal="1" type="TEXT"></column>
    <column name="site" label="Site" ordinal="2" type="INTEGER"></column>
    <column name="number" label="Subject" ordinal="3" type="INTEGER"></column>
    <column name="visit" label="Visit number" ordinal="4" type="CHARACTER VARYING(20)">     
 </column>
 <column name="vdate" label="Visit date (dd/mm/yyyy)." ordinal="5" type="CHARACTER   VARYING(10)"></column>
</Columns>
</Header>

<table xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

   <row>
   <study>Some study</study>
   <site>1</site>
   <number>1</number>
   <visit>1</visit>
   <vdate>28/12/2010</vdate>
   </row>

   <row>
   <study>Some study</study>
   <site>1</site>
   <number>1</number>
   <visit>2</visit>
   <vdate>03/03/2011</vdate>
   </row>

   <row>
   <study>Some study</study>
   <site>1</site>
   <number>1</number>
   <visit>3</visit>
   <vdate>09/06/2011</vdate>
   </row>

   </table>
   </Document> 
```

示例代码：

```
{-# LANGUAGE Arrows #-}

import Text.XML.HXT.Core
import Data.Tree.NTree.TypeDefs

parseXML :: String -> IOStateArrow s b XmlTree
parseXML file = readDocument [ withValidate yes
                             , withRemoveWS yes
                             ] file

atTag :: ArrowXml a => String -> a (NTree XNode) XmlTree
atTag tag = deep (isElem >>> hasName tag)

text :: ArrowXml cat => cat (NTree XNode) String
text = getChildren >>> getText

getRowsData :: ArrowXml cat => cat (NTree XNode) [String]
getRowsData = atTag "table" >>>
    proc l ->  do
        row <- atTag "row" -< l

        study <- text <<< atTag "study" -< row
        site <- text <<< atTag "site" -< row
        returnA -< [study,site]

readTable :: ArrowXml t => t (NTree XNode) [[String]]
readTable =
    proc l -> do
        rows <- listA getRowsData -< l

        returnA -< rows

main :: IO ()
main = do
    res <- runX ( parseXML "log.xml" >>> readTable )
    print res 
```

对我来说问题出在`getRowsData`. 在示例代码中，我隐含地给出了列名，但我希望它从列表中读取，应用于箭头函数并返回行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:36:19.157

```
import Control.Arrow 
```

## 组合箭头列表

我相信您正在寻找的是一种在同一输入上组合多个箭头以列出其输出的方法：

```
list :: Arrow a => [a b c] -> a b [c]
list [] = returnA >>^ const []
list (a:as) = (a &&& list as) >>^ uncurry (:) 
```

`(a &&& list as)`返回一对头部和尾部，然后我们后应用`>>^`纯函数`uncurry (:) :: (x,[x]) -> [x]`重新组合它们。

让我们测试一下。这里有一些玩 IO 箭头的东西。monad 是一个箭头，但你必须将它包装到它的 Kleisli 类别中。`runKleisli`再次打开它，这样你就可以运行它了，但是我输入的时间太长了，所以我使用了一个中缀版本`>$>`来给它输入：

```
ask :: Kleisli IO String String
ask = Kleisli $ \xs -> putStrLn xs >> getLine

(>$>) = runKleisli 
```

所以现在交互更容易了：

```
*Main> ask >$> "Hello?"
Hello?
Hello!
"Hello!" 
```

并且`list`工作正常：

```
*Main> list [ask,ask] >$> "say something!"
say something!
OK
say something!
What do you want me to say?
["OK","What do you want me to say?"] 
```

## 从 [String] 到返回 [String] 的箭头

但是你想把一个字符串列表变成一个产生字符串列表的箭头。

```
appList :: Arrow a => (s -> a b c) -> [s] -> a b [c]
appList f xs = list (map f xs) 
```

我们可以在 ask 测试中使用一个变体来测试它：

```
askRespond xs = Kleisli $ \thx -> do
                       putStrLn xs 
                       ans <- getLine
                       putStrLn thx
                       return ans 
```

所以我们可以看到`appList`正在按照您想要的方式工作，通过从每个字符串中制作一个箭头，然后运行每个箭头，再次将答案组合成一个字符串：

```
*Main> appList askRespond ["What's your name?","What's your favourite colour?","Would you like some cheese?"]  >$> "Thanks."
What's your name?
Andrew
Thanks.
What's your favourite colour?
Green
Thanks.
Would you like some cheese?
Yes - could I have gruyere?
Thanks.
["Andrew","Green","Yes - could I have gruyere?"] 
```

## 抓取多个标签内容

现在让我们将其应用于您的问题。

首先让我们用一个速记来制作一个字符串中的箭头：

```
textAtTag xs = text <<< atTag xs 
```

然后让我们使用`appList`：

```
getRowsData = atTag "table" 
          >>> atTag "row"
          >>> appList textAtTag ["study","site"] 
```

我还没有测试过最后一个 - 请检查！

# linux - 为什么 Debian 在 Debian 上的 MongoDB 比在 Windows 上慢..？

> ID：13554055
> 
> 赞同：1
> 
> 时间：2012-11-25T18:26:50.317
> 
> 标签：linux, performance, mongodb, io, mongodb-java

我创建了一个小型 Java 应用程序（使用 Spring Data）来测试 MongoDB 的地理空间查询性能。

```
public class MongoThread {

public static void main(String[] args) throws Exception {

    if(args.length != 1) {
        System.out.println("Usage: MongoThread <nb_thread>");
        System.exit(0);
    }

    int nbThread = Integer.parseInt(args[0]);

    ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringMongoConfigStandalone.class);
    MongoOperations db = (MongoOperations) ctx.getBean("mongoTemplate");

    for (int x=0; x<nbThread; x++) {
        double lat = Math.random() * 60;
        double lng = Math.random() * 60;
        double radius = 3000 + 50 * Math.random();
        MyThread t = new MyThread("Thread #" + x, db, lat, lng, radius);
        t.start();
    }

    //create1MEntries(db);
}

private static void create1MEntries(MongoOperations db) {
    if (!db.getCollectionNames().contains("Item")) {
        db.createCollection("Item");
    }
    db.indexOps(Item.class).ensureIndex(new GeospatialIndex("loc"));
    for(int i=0; i<1000000; i++) {
        Item item = new Item();
        item.setName("item" + i);
        item.setLoc(new double[]{Math.random() * 180, Math.random() * 180});
        db.save(item, "Item");
    }
}
}

class MyThread extends Thread {

String name;
MongoOperations db;
double lat, lng, radius;

public MonThread (String name, MongoOperations db, double lat, double lng, double radius) {
    this.name = name;
    this.db = db;
    this.lat = lat;
    this.lng = lng;
    this.radius = radius;
}

public void run() {
    long t1 = Calendar.getInstance().getTimeInMillis();
    List<Item> items = db.find(new Query(Criteria.where("loc")
            .near(new Point(lat,lng)).maxDistance(radius/111.12)).limit(100), Item.class, "Item");
    System.out.println(name + " - " + items.size() + " results found around " + radius + " of (" + lat + "," + lng + ")");
    long t2 = Calendar.getInstance().getTimeInMillis();
    System.out.println(name + " - " + (t2-t1) + "ms");
}
}

public class Item {
    @Id
    private String id;
    private String name;
    private double[] loc;
} 
```

在多次运行测试以在内存中加载数据后，我得到以下结果：

*   在我的开发计算机上（Win7 64 位，i7 860 @2.8 Ghz，RAM 8GB 1066Mhz）：对于 100 个线程，我在大约 500 毫秒（450 毫秒到 550 毫秒之间）内得到所有响应

*   在我的服务器上（由 OVH 托管：Debian 6.0 64 位，i3 2130 2x2(HT) 3.4GHz，RAM 16GB 1333Mhz）：对于 100 个线程，我在大约 1700 毫秒（1600 毫秒和 1900 毫秒之间）得到所有响应

我不是硬件，也不是 Linux 专家，但我希望这台服务器比我的 Windows 计算机做得更好（或者至少一样好）。我在几个论坛上读到 MongoDB 在 Linux 上确实更快，重要的硬件特性是（按此顺序）：RAM、CPU（但 Mongo 不使用多核）和硬盘驱动器。

我增加了最大打开文件数（使用 ulimit -n 99999），因为我读到它可以减慢 MongoDB，但它对结果没有影响。

你知道瓶颈来自哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:23:59.833

我不认为这是 linux vs windows 的问题。我的意思是，与 Windows 机器上的 i7 相比，i3 处理器相当低端。

如果您真的想比较两个操作系统之间的性能，我建议让您的设置在相同的硬件上运行..

# c++ - 为多图使用对象变量 equal_range()

> ID：13554059
> 
> 赞同：0
> 
> 时间：2012-11-25T18:27:30.903
> 
> 标签：c++, multimap

我正在使用一个对象作为多图的键。该对象是我创建的自定义日期类。我只是想知道是否可以将在对象中找到的变量用于 equal_range()？

这是在我的自定义日期对象中检查月份变量。

就是这样（伪代码）。

```
int january = 1;
foundValues = myMultimap.equal_range(january);

for (it=foundValues.first; it!=foundValues.second; ++it)
{
  cout << " " << (*it).second;
  cout << endl;
} 
```

这是否会遍历每个键对象并检查该对象内的变量是否等于“一月”，然后返回与键配对的值？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:37:35.297

关联容器的搜索成员仅对键起作用。它们的存在是因为它们利用了容器的内部结构，这保证了及时找到值（或它们的缺失） （容器中元素的数量在`O(log(n))`哪里）。`n`

如果要查找与条件匹配的序列中的所有元素，则可能要`std::copy_if()`与合适的谓词一起使用。

# css - CSS属性——先设置全局边框，再指定border-bottom？

> ID：13554061
> 
> 赞同：2
> 
> 时间：2012-11-25T18:27:44.207
> 
> 标签：css, border, semantics

`border`除了底部之外，在容器的所有侧面实现 a 的最佳 CSS 实践是什么？

该`border`属性不能为每一侧指定不同的值。

**选项 1：**覆盖规则

```
border: 1px solid red;
border-bottom: none; 
```

*   似乎需要额外的计算——与 CSS 重置类似的缺点（至少在哲学上）。

**选项 2：**设置特定规则

```
border-top: 1px solid red;
border-left: 1px solid red;
border-right: 1px solid red; 
```

*   可能更正确（就 CSS“语义”而言）
*   但是，如果您想更改边界细节，则需要进行多次更改（更难管理）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:33:13.583

实际上这完全取决于你，什么对你更方便，它也取决于一些状态，比如如果我希望`color`所有边框都相同，我会选择第一个，但如果我认为我需要改变每一边的颜色在不久的将来我会选择第二个边界，但现在，我会坚持第一个选项

原因：

*   需要说明的 CSS 更少
*   `border-bottom`具体来说，它表明我想要`none`
*   `property: value`正如你所说，如果我需要任何更改，我不需要更改每一个

如果您说正确的语义，则正确的语义非常具体地定义为

```
border-color: /*Whatever*/;
border-width: /*Whatever*/;
border-style: /*Whatever*/; 
```

现在确定您不想变得如此具体

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:42:21.097

如果您只想指定一次值，则可以为所有指定颜色和宽度，然后为边指定样式：

```
border-color: red;
border-width: 1px;
border-style: solid solid none solid; 
```

# php - 尝试将 JSON 数据传递给 Highcharts 但没有成功

> ID：13554074
> 
> 赞同：0
> 
> 时间：2012-11-25T18:30:03.873
> 
> 标签：php, mysql, json, highcharts

我正在尝试将由 php 文件创建的 json 数据解析为另一个脚本并将其值显示到高图。

我创建 json 数据的 data.php 是这样的：

```
<?php
header("Content-type: application/json");

$dbhost = "localhost";
$dbuser = "db";
$dbpass = "xxxxx";
$dbname = "db";
$db = mysql_connect($dbhost, $dbuser, $dbpass); 
mysql_select_db($dbname,$db);
$query = "SELECT * FROM monitor_total";

$result = mysql_query($query,$db);

while($row = mysql_fetch_array($result)) {
  $date = $row["date"];
  $count = $row["count"];
  $array[] = array("date" =>$date,"count"=>$count);
}
echo json_encode($array);
?> 
```

data.php 输出为：

```
[{"date":"2012-11-23","count":"582311"},{"date":"2012-11-24","count":"582322"},{"date":"2012-11-22","count":"582121"},{"date":"2012-11-21","count":"581321"},{"date":"2012-11-19","count":"572821"},{"date":"2012-11-20","count":"581321"},{"date":"2012-11-18","count":"582421"},{"date":"2012-11-17","count":"579321"},{"date":"2012-11-16","count":"581321"},{"date":"2012-11-25","count":"558178"}] 
```

里面`<script>`：

```
var monitor_graph; // globally available
    monitor_graph = new Highcharts.Chart({
     chart: {
        renderTo: 'graph',
        type: 'spline',
        events: {
            load: requestData
        }
     },
     title: {
        text: 'Registered and total players by date'
     },
     xAxis: {
       categories: []
     },
     yAxis: {
        title: {
           text: 'Players'
        }
     },
     series: [{
        name: 'Total Players',
        data: []
     }]
  });
function requestData() {
$.ajax({
        url: 'data.php',
    success: function(data) {
       $.each(data, function(i,item){

              monitor_graph.series[0].setData(??????????);

       });
     setTimeout(requestData, 1000);
    },
});
} 
```

我如何创建一个名为“item.date”在 x 轴和“item.count”在 y 轴的总玩家系列？？？

请帮我！

更新：我在每个里面添加这个：

```
monitor_graph.xAxis[0].setCategories([item.date]);
monitor_graph.series[0].setData([parseFloat(item.count)]); 
```

我现在完全按照我的需要得到 1 分，但出现以下错误：

```
Unexpected value NaN parsing y attribute. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:48:15.903

你需要将你的成功回调修改为这样的

```
var categories=[];
var seriesData=[];
$.each(data,function(){
    categories.push(this.date);
    seriesData.push(parseInt(this.count));
});
chart.xAxis[0].setCategories(categories);
chart.series[0].setData(seriesData); 
```

该**[`Series.setData()`](http://api.highcharts.com/highcharts#Series.setData%28%29)**方法需要一个整数/浮点数组而不是字符串，并且应该使用整个数据集而不是每个点来调用。你在里面做这个`$.each`应该在这个循环之外做。类别也是如此

**[演示@jsFiddle](http://jsfiddle.net/jugal/vSXku/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:37:37.107

您收到的数据是带有对象的数组的形式。您需要遍历数组，这已经在您的 $.each 函数中进行了。这将使您能够以 i 变量的形式访问每个对象。此变量可以通过点符号访问您需要的属性。在您的情况下，这将是 i.date 和 i.count。

据我所知，setData 方法接受一个数组作为您可以设置的值，所以替换您的 ???? 具有以下内容：

```
monitor_graph.series[0].setData([i.date, i.count]); 
```

希望有帮助。

# c - 在OpenGL中围绕自身旋转对象

> ID：13554075
> 
> 赞同：0
> 
> 时间：2012-11-25T18:30:12.190
> 
> 标签：c, opengl

我无法围绕自身旋转房间。它的中心在 (5,5,0) 所以我想如果我用 glTranslatef(5,5,5) 翻译房间和房间里的物体然后 glRotatef(rotateroom,0,0,1) 然后绘制项目并使用 glTranslate(-5,-5,0) 它会将房间和其中的所有东西旋转大约 5,5,0 但它似乎仍在旋转 (0,0,0) 我不太确定是什么我做错了。我在这里先向您的帮助表示感谢。

```
void drawside(){
    int i,j;
    /*for (j = 0; j <= 8; j++) {
       glBegin(GL_LINE_STRIP);
       for (i = 0; i <= 30; i++)
          glEvalCoord2f((GLfloat)i/30.0, (GLfloat)j/8.0);
       glEnd();
       glBegin(GL_LINE_STRIP);
       for (i = 0; i <= 30; i++)
          glEvalCoord2f((GLfloat)j/8.0, (GLfloat)i/30.0);
       glEnd();
    }*/
    glEvalMesh2(GL_FILL, 0, 20, 0, 20);
}
void drawRoom(){
    //floor
    glBegin(GL_POLYGON);
    glColor3f(1,1,1);
    glNormal3f(0,0,0);
    glVertex3f(0,0,0);
    glNormal3f(0,10,0);
    glVertex3f(0,10,0);
    glNormal3f(10,10,0);
    glVertex3f(10,10,0);
    glNormal3f(10,0,0);
    glVertex3f(10,0,0);
    glEnd(
    );
    //wall
    glBegin(GL_POLYGON);
    glColor3f(0,0,1);
    glNormal3f(0,10,0);
    glVertex3f(0,10,0);
    glNormal3f(0,10,10);
    glVertex3f(0,10,10);
    glNormal3f(10,10,10);
    glVertex3f(10,10,10);
    glNormal3f(10,10,0);
    glVertex3f(10,10,0);
    glEnd();
    //wall2
    glBegin(GL_POLYGON);
    glColor3f(0,1,0);
    glNormal3f(10,10,0);
    glVertex3f(10,10,0);
    glNormal3f(10,10,0);
    glVertex3f(10,10,10);
    glNormal3f(10,0,10);
    glVertex3f(10,0,10);
    glNormal3f(10,0,0);
    glVertex3f(10,0,0);
    glEnd();
}
void drawObjects(){
    glColor3f(1,0,1);
    glTranslatef(2,2,0);
    if(conefill == 1)
        glShadeModel(GL_FLAT);
    else
        glShadeModel(GL_SMOOTH);
    glutSolidCone(cone,5,10,2);
    glTranslatef(5,5,0);
    glColor3f(1,0,0);
    if(spherefill == 1)
        glShadeModel(GL_FLAT);
    else 
        glShadeModel(GL_SMOOTH);
    glutSolidSphere(sphere,20,20);

}

void display(){
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gluLookAt(viewx,viewy, viewz,viewx +lx, 5, viewz + ly,0.0f, 0.0f,  1.0f);
    //gluLookAt(viewx,viewy,viewz,headup,headright,5,0,0,1);
    glClear(GL_COLOR_BUFFER_BIT);
    GLfloat light_position[] = {-1.0,5.0,5.0,0.0};
    //GLfloat light_direction[] = {-5,-5,-5};
    //GLfloat amb[] = {0,0,0,1};
    glLightfv(GL_LIGHT0, GL_POSITION, light_position);
    //glLightfv(GL_LIGHT0, GL_SPOT_DIRECTION,light_direction);
    //glLightfv(GL_LIGHT0, GL_AMBIENT,amb);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glPushMatrix();
    glTranslatef(5,5,0);
    glRotatef(rotateroom,0,0,1);
    glPushMatrix(); 
    drawRoom();
    glPopMatrix();
    glColor3f(0.0, 0.0, 1.0);
    glPushMatrix();
    glTranslatef(6,3,1);
    glPushMatrix ();
    drawside();
    glPopMatrix();
    glPushMatrix();
    //glTranslatef(5,0,0);
    glRotatef(90,1,0,0);
    //glTranslatef(-5,0,0);
    glTranslatef(0,.5,.5);
    drawside();
    glPopMatrix();
    glPushMatrix();
    //glTranslatef(5,0,0);
    glRotatef(180,1,0,0);
    //glTranslatef(-5,0,0);
    glTranslatef(0,1,0);
    drawside();
    glPopMatrix();
    glPushMatrix();
    glRotatef(90,0,0,1);
    glTranslatef(-.5,.5,0);
    drawside();
    glPopMatrix();
    glPushMatrix();
    glRotatef(270,0,0,1);
    glTranslatef(.5,.5,0);
    drawside();
    glPopMatrix();
    glPopMatrix();
    drawObjects();
    glTranslatef(-5,-5,0);
    glPopMatrix();
    glutSwapBuffers();
    glFlush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:13:11.237

您只需要反转指令的顺序：

```
glRotatef(rotateroom,0,0,1);
glTranslatef(5,5,0); 
```

每当你变换一个点时，你必须颠倒你想要应用的变换序列。这与变换矩阵相乘的方式有关。

# database - 1比1和0比1

> ID：13554082
> 
> 赞同：0
> 
> 时间：2012-11-25T18:31:07.647
> 
> 标签：database, relational-database, entity-relationship

对于以下情况，您将如何为关系数据模型建模？

```
leader is chosen to lead group
a group is led by one and only one leader
a leader leads 0 to 1 group 
```

这是我的解决方案

```
Group [GroupID(PK)]
Leader[LeaderID(PK)]
Leads [GroupID(PK), LeaderID(FK)] 
```

但这实际上允许许多领导领导一个小组。

谢谢你。任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:33:52.527

好吧，您可以只`leaderOf`在表中拥有一个（唯一的）字段`Leader`。如果是`NULL`，则领导者不领导任何组，如果是数字，则该数字是被领导组的 ID。

如果您在某处有一个`users`or`players`表，最好将该`leaderOf`字段放在该表中并完全删除`Leader`and`Leads`表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:35:56.260

只需让团队了解其领导者，领导者了解其团队即可。

```
Group [ GroupID(PK), LeaderID(FK) not null ]
Leader[ LeaderID(PK), GroupID(FK) ] 
```

# hlsl - DirectX9 中顶点着色器代码中的矩阵映射错误

> ID：13554085
> 
> 赞同：1
> 
> 时间：2012-11-25T18:31:13.450
> 
> 标签：hlsl, directx-9

在我的 DirectX9 示例中，当我执行以下操作时一切正常，并且我在屏幕上获得了所需的旋转三角形，

![没有着色器](../Images/07ae8f89d80e2000244b8632554b8b62.png)

```
g_pd3dDevice->SetTransform( D3DTS_PROJECTION, &matProj );
g_pd3dDevice->SetTransform( D3DTS_VIEW, &matView );
g_pd3dDevice->SetTransform( D3DTS_WORLD, &matWorld ); 
```

但是当我尝试使用着色器做同样的事情时，没有任何东西被渲染

```
D3DXMATRIXA16 matWorldViewProj = matWorld * matView * matProj;
constantTable->SetMatrix(g_pd3dDevice, "g_mWorldViewProjection", &matWorldViewProj);
//Vertex Shader snippet
Output.Position = mul(In.Position,g_mWorldViewProjection); 
```

当我在顶点着色器中进行以下更改时

```
Output.Position =  In.Position; 
```

我得到了屏幕上呈现的静态三角形。

![在此处输入图像描述](../Images/eacf1fa1ee8db0cba2c5ba2d00660c1a.png)

我的代码/技术中可能出现的错误是什么？

（配置文件：vs_3_0 使用 D3DXCompileShaderFromFile ）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:44:55.507

在编译像素着色器时，您会覆盖您的变量`constantTable`。所以矩阵只设置在像素着色器中而不是顶点着色器中。如果您不需要将信息传递给像素着色器，则可以声明一个附加变量`constantTablePix`或将参数设置为。`NULL`

矩阵的正确顺序是。（我从来没有得到正确的订单，但它现在可以工作了:)）

```
D3DXMATRIXA16 matWorldViewProj = matWorld * matView * matProj; 
```

# bash - 从命令行在bash中覆盖变量

> ID：13554098
> 
> 赞同：0
> 
> 时间：2012-11-25T18:32:54.280
> 
> 标签：bash, terminal, getopts

我有以下 bash 脚本。它计算 ax^2 + bx + c。如您所见，要求 a、b 和 c 并将 x 作为命令行参数。

```
echo "Enter a value for a: "
read a
echo "Enter a value for b: "
read b
echo "Enter a value for c: "
read c

echo Result is `expr $a \* $1 \* $1 + $b \* $1 + $c`.

exit 
```

我现在想要它做的是（不对上面的代码进行任何修改）在命令行中从文件中获取（覆盖）a、b 和 c 的值（一个接一个地列出的值，全部在一行中）并跳过在执行脚本时要求他们。

我虽然 getopts 将是用于此目的的功能，但我无法弄清楚如何使用它。或者是别的什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:19:19.183

您可以创建所需的文件：

```
1
2
3 
```

调用它`params.txt`，然后你做：

```
$ ./myScript 2 < params 
Enter a value for a: 
Enter a value for b: 
Enter a value for c: 
Result is 11. 
```

并且可以正常工作。

# meteor - Meteor.js：查找所有文档并以相反的自然顺序返回

> ID：13554101
> 
> 赞同：8
> 
> 时间：2012-11-25T18:33:18.860
> 
> 标签：meteor, mongodb-query

我正在尝试返回集合中的所有文档，以便在我的模板中将其与 {{#each}} 一起使用。我的代码如下所示：

`return Answers.find({}, {sort: {$natural:-1}})`

但是文档以自然顺序返回（而不是反向）。有谁知道为什么？我从 MongoDB 文档中得到了 $natural 选择器，所以我看不出有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:01:20.350

不知道为什么它不以相反的顺序返回。

但是您可以在模板辅助方法中创建一个数组，并使用`array.sort()`or`array.reverse()`函数返回一个数组的反转。

例如：假设您的`Answers`收藏看起来像这样：

```
Answers({ansNo: 1, ansBody: "body1"},
        {ansNo: 2, ansBody: "body2"},
        {ansNo: 3, ansBody: "body3"}); 
```

并且要返回的数组是：

```
var AnswersArr = new Array(); 
```

然后在您的模板助手中：->

```
var tempCollection = Answers.find({});
tempCollection.forEach(function(data){
    var obj = {ansNo: data.asnNo, ansBody: data.ansBody};
    AnswersArr.push(abj);
});

AnswersArr.sort(function(a, b){return b.ansNo - a.ansNo;});  //sort in reverse order

return AnswersArr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T23:49:12.027

**Sort**不是参数，而是在结果**Cursor**对象上的**find()之后调用的单独函数。**这是 MongoDB 文档所引用的方法，可与 MongoJS 等驱动程序一起使用：

 **```
return Answers.find().sort({$natural: -1}); 
```

似乎 Meteor 没有将**sort()**函数添加到他们的**Cursor**实现中，因此另一种解决方案是按基于日期（以及因此插入顺序）生成的**_id字段进行排序：**

```
return Answers.find({}, {sort: {'_id': -1}}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-13T23:23:38.700

作为一种解决方法，您可以这样做：

```
return Answers.find().fetch().reverse(); 
```

我知道通过 sort 参数来做会更好，但我认为现在不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T02:28:49.190

我认为您**可能会**在这里混淆“自然秩序”的定义。一方面，字母/字符串（A、B、C ...）和数字（1、2、3 ...）有自然的排序顺序。

但在 mongo 的情况下，“自然”是指数据写入磁盘的顺序。'{$natural:1}' 返回'文档按照它们在磁盘上存在的顺序......'，所以'{$natural:-1}' 反转（[http://docs.mongodb.org/manual/reference /操作员/元/自然/](http://docs.mongodb.org/manual/reference/operator/meta/natural/)）。

因此，如果没有写入数据的代码以及对数据如何写入磁盘的一些了解，我们就无法检验您的假设，即它不能正常工作。**

# c - c中的strtok（） - 分段错误

> ID：13554102
> 
> 赞同：1
> 
> 时间：2012-11-25T18:33:42.250
> 
> 标签：c, segmentation-fault, strtok

每次我尝试使用 strtok() 时都会遇到分段错误。不知道为什么-我是 C 的新手。

这是我的代码：

```
#include "shellutils.h"
#include <stdio.h>
#include <unistd.h>

int main(int argc, char **argv)
{
    char input[150];

    while(1) {
        prompt();
        fgets(input, 150, stdin);

        char *fst_tkn = strtok(input, " ");

        printf("%s", fst_tkn);

        if(feof(stdin) != 0 || input == NULL) {
            printf("Auf Bald!\n");
            exit(3);
        }
    }
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T08:57:04.317

关于代码：

```
char *fst_tkn = strtok(input, " ");
printf("%s", fst_tkn); 
```

如果您的`input`变量为空，或仅包含空格，`fst_tkn`则将设置为`NULL`. 然后，当您尝试将其打印为字符串时，所有赌注都已关闭。

您可以通过调整您给出的值在以下代码中看到`input`：

```
#include <stdio.h>
#include <string.h>
int main (void) {
    char input[] = "";
    char *fst_tkn = strtok (input, " ");
    printf ("fst_tkn is %s\n", (fst_tkn == NULL) ? "<<null>>" : fst_tkn);
    return 0;
} 
```

# c# - 一对一的方法还是其他方法？

> ID：13554104
> 
> 赞同：0
> 
> 时间：2012-11-25T18:33:55.987
> 
> 标签：c#, oop

假设我想跟踪一些人对象和他们的职业历史记录。我应该遵循这种方法吗？

```
public class Person
{
  public int Id {get; set;}
  public string Name {get; set;}
  public Career Career {get; set;}

  public Person()
  {...}
}

public class Career 
{
   public Person Person {get; set;}
   public IList<Company> Companies {get; set;}
   ... 
} 
```

由于这是一对一的方法，一个人可以有一个职业我的问题是：我是否需要双向链接，或者更好的是如何链接这两个对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:42:48.410

您在这里创建了一个循环依赖项，也许您应该从类中删除该`Career`属性。`Person`或者反过来；从. `Person`_`Career`

```
public class Person
{
    public int Id {get; set;}
    public string Name {get; set;}

    public Person()
    {...}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:42:52.473

数据的持久化位置（如果有的话）对您如何表示数据起着重要作用。从您的问题来看，尚不清楚您是否会将这些信息存储在数据库、xml 文件或其他介质中。

如果您将其存储在数据库中，那么职业将没有完整的人员对象，而是将作为外键的 PersonID。

在纯 OOP 方法中，Career 对象中不会包含 person 对象。一个人有事业，事业没有人。

有很多方法可以表示数据，但这完全取决于您计划如何使用和存储它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:01:18.503

它主要取决于两件事：您的应用程序中的聚合域是什么以及您将如何保持它？

如果您正在对基于职业作为中心概念的应用程序进行建模，则`Person`无需了解职业。这可以采取以下形式：

```
public class Person
{
  public string Name { get; set; }
  ...
}

public class Career
{
   public Person Person { get; set; }
   public IList<Company> Companies { get; set; }
   ...
} 
```

但另一方面，没有人的职业似乎有点奇怪。`Career`如果您专注于人和他们的职业，那么这门课可能是*多余*的：

```
public class Person
{
  public string Name { get; set; }
  public IList<Company> Career { get; set; }
} 
```

**持久性**

当然，持久性方法会影响您的模型。我在您上面的评论中看到您打算存储在数据库中。但不清楚是哪种数据库。例如，如果您使用[RavenDB](http://ravendb.net)等文档数据库，则可以直接存储上述两种模型变体。

但是，如果您使用关系数据库，可能还使用实体框架或其他 ORM，您可能需要包含一些数据库 ID 和外键属性，具体取决于 ORM 的魔力。

# android - 如何使用删除按钮删除 Expendable ListView 中的项目

> ID：13554108
> 
> 赞同：0
> 
> 时间：2012-11-25T18:34:31.223
> 
> 标签：android, android-layout, listview, android-2.2-froyo

我无法使用 ListView 每一行中的删除按钮删除项目。我不知道如何获取 Listview 项的按钮单击的当前位置。你能帮我解决这个问题吗？我想要做的是，当我单击删除按钮时，特定行将被删除。

以下是主要活动代码和xml代码

**我的可扩展列表视图的 XML 代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:slide="http://schemas.android.com/apk/res/com.example.test_expendable"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
tools:context=".Create_Team_Form" >

<RelativeLayout
    android:id="@+id/item"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/text"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Hello World"
        android:textSize="20dip" />

    <Button
        android:id="@+id/expandable_toggle_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/Team_More" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/expandable"
    android:layout_width="fill_parent"
    android:layout_height="40dip"
    android:background="#000000"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btn_Del"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:onClick="Team_Delete"
        android:text="@string/Team_Del"
        android:textSize="12dip" />

    <Button
        android:id="@+id/btn_Details"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.5"
        android:onClick="Team_Details"
        android:text="@string/Team_Detail"
        android:textSize="12dip" />

   </LinearLayout>

 </LinearLayout> 
```

**我有 ListView 的主要活动 Xml 代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableLayout
        android:id="@+id/Team_Create_MainTable"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/btn_Create"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:onClick="Create_Team"
                android:text="@string/Team_Create_New" />

            <Button
                android:id="@+id/btn_ADD"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/Team_Create_Add" />

            <Button
                android:id="@+id/btn_Edit"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/Team_Create_Edit" />

            <Button
                android:id="@+id/btn_Back"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/Team_Create_Back" />

        </TableRow>

        <com.example.fyp_api_8_team.SlideExpandableListView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="465dp" >

        </com.example.fyp_api_8_team.SlideExpandableListView>

    </TableLayout>

</LinearLayout> 
```

**我的主要活动代码**

```
import java.util.ArrayList;
import java.util.Arrays;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class Create_Team_Form extends Activity {

    TextView txt;
    private String[] lv_arr = {};
    ArrayList<String> teamNames = new ArrayList<String>();
    ListView list;
    ListAdapter adapter;

    static String[] COUNTRIES;
    //ListView lv1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_create__team__form);

        list = (ListView) this.findViewById(R.id.list);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_create__team__form, menu);
        return true;
    }

    public void Create_Team(View v) {
        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("CreateTeam");
        alert.setMessage("Enter Team Name");

        // Set an EditText view to get user input
        final EditText input = new EditText(this);
        alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                // OK
                String ans = input.getText().toString();
                if (ans == null || ans.length() == 0 || ans.equals("")) {

                } else {
                    String value = ans;
                    Add_TeamName_List(value);

                    Set_List();
                }

            }
        });

        alert.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        // Canceled.
                    }
                });

        alert.show();

    }

    public void Add_TeamName_List(String Name) {
        teamNames.add(Name);

        Put_data_Array();

    }

    public void Set_List() {
         adapter = new ArrayAdapter<String>(this,
                R.layout.expandable_list_item, R.id.text, lv_arr);
        list.setAdapter(new SlideExpandableListAdapter(adapter,
                R.id.expandable_toggle_button, R.id.expandable));

        /*
        lv1.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_expandable_list_item_1, lv_arr));
                */
    }

    public void Put_data_Array() {
        lv_arr = new String[teamNames.size()];

        for (int i = 0; i < teamNames.size(); i++) {
            lv_arr[i] = teamNames.get(i);
        }
        Arrays.sort(lv_arr);

        put_Data_again_Arraylist();

    }

    public void put_Data_again_Arraylist()
    {

            teamNames.clear();  
        for (int i = 0; i < lv_arr.length; i++) {

            teamNames.add(lv_arr[i]);
        }

    }

    public void Team_Delete(View v)
    {

        list.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
               teamNames.remove(position);
                ((BaseAdapter) adapter).notifyDataSetChanged();
            }
        });
    }

    public void Team_Details(View v)
    {

    } 
```

下面我附上了我的用户界面截图

![在此处输入图像描述](../Images/afb862b0ca1e76dd721f58eed7978894.png)

当我单击更多按钮时，我的删除和详细信息按钮将显示给用户如果用户按下删除按钮，则应删除该行项目。

![在此处输入图像描述](../Images/d15352b015f89526cd7e7d0d661136f7.png)

等待回复我正在尝试解决这个问题很长一段时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:56:37.470

**-**始终使用`ArrayList`而不是`String[]`保存将由`ArrayAdapter`as使用的值`Collection`比`Arrays`

**-**您可以在单击删除按钮时简单地**删除**条目`ArrayList`，然后执行该`notifyDataSetChanged()`方法。

**例如：**

```
ArrayList<String> s = new ArrayList<String>();

s.setList();   // A custom method to fill the list

// assign your ArrayList to the ArrayAdpater here

// set ArrayAdpater to ListView

arrayadapter.notifyDataSetChanged();  // arrayadapter is of the ArrayAdapter which is 
                                      // set with your ArrayList 
```

# clojure - 无法从命名空间中获取随机（文档）

> ID：13554110
> 
> 赞同：3
> 
> 时间：2012-11-25T18:34:57.587
> 
> 标签：clojure

我想为某些命名空间显示随机（文档）页面。

我可以通过以下方式获得的随机函数名称：

```
user=> (rand-nth (keys (ns-publics 'clojure.core)))
unchecked-char 
```

当我尝试将其传递给（doc）时，我得到了这个：

```
user=> (doc (rand-nth (keys (ns-publics 'clojure.core))))
ClassCastException clojure.lang.PersistentList cannot be cast to clojure.lang.Symbol clojure.core/ns-resolve (core.clj:3883) 
```

我是 Clojure 的新手，我不知道如何处理这个......我试图将它转换为正则表达式并使用 (find-doc) 但也许有更好的方法来做到这一点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:42:50.723

**解释**

这里的问题是这`doc`是一个宏，而不是一个函数。[`source`](http://clojuredocs.org/clojure_core/clojure.repl/source)您可以使用repl 中的宏来验证这一点。

```
(source doc)

; (defmacro doc
;   "Prints documentation for a var or special form given its name"
;   {:added "1.0"}
;   [name]
;   (if-let [special-name ('{& fn catch try finally try} name)]
;     (#'print-doc (#'special-doc special-name))
;     (cond
;       (special-doc-map name) `(#'print-doc (#'special-doc '~name))
;       (resolve name) `(#'print-doc (meta (var ~name)))
;       (find-ns name) `(#'print-doc (namespace-doc (find-ns '~name)))))) 
```

如果您是 Clojure（和 lisps）的新手，您可能还没有遇到过宏。作为一个毁灭性的简短解释，函数在*评估*代码上运行，宏在*未*评估代码上运行- 即源代码本身。

这意味着当您键入

```
(doc (rand-nth (keys (ns-publics 'clojure.core)))) 
```

`doc`尝试对实际的代码行进行操作`(rand-nth (keys (ns-publics 'clojure.core)))`- 而不是评估结果（返回的符号）。代码只不过是 Clojure 中的列表，这就是错误告诉您无法将列表转换为符号的原因。

**解决方案**

所以，你真正想做的是*评估*代码，然后调用`doc`结果。我们可以通过编写另一个宏来做到这一点，它首先评估你给它的代码，然后将它传递给`doc`.

```
(defmacro eval-doc
 [form]
  (let [resulting-symbol (eval form)]
   `(doc ~resulting-symbol))) 
```

您可以传递`eval-doc`任意形式，它会在将它们传递给`doc`. 现在我们可以走了。

```
(eval-doc (rand-nth (keys (ns-publics 'clojure.core)))) 
```

**编辑：**

虽然上述方法在 repl 中运行良好，但如果您使用提前编译，您会发现它每次都会产生相同的结果。这是因为`resulting-symbol`in`let`语句是在编译阶段产生的。提前编译一次意味着这个值被烘焙到 .jar 中。我们真正想做的是将评估推`doc`到运行时。所以，让我们重写`eval-doc`为一个函数。

```
(defn eval-doc
  [sym]
  (eval `(doc ~sym))) 
```

就那么简单。

# c# - C# - 单个图像的多线程处理（网络摄像头帧）

> ID：13554112
> 
> 赞同：1
> 
> 时间：2012-11-25T18:35:29.373
> 
> 标签：c#, multithreading, image, image-processing, unsafe

我制作了一个程序，它能够捕获网络摄像头帧并在运行不同的每像素算法后显示它们 - 例如使图像灰度。目前我正在使用 FastBitmap 类（找不到链接 atm），它使用指针来设置和获取位图中的像素。

但是，我想让我的程序多线程，以便多个线程处理同一个图像。为此，我通过它的 BitmapData 将图像分成几个部分（每个线程一个部分），并让不同的线程在它们给定的部分 BitmapData 上工作。最后，“管理器”等待所有线程完成（加入）并提交结果图像。这是理论，但实际上这对我不起作用。

当我运行这个程序时，我得到了一些奇怪的错误，告诉我我必须在重用 LHC 之前释放它，我正在访问非法内存、外部异常等......每次都是另一个，我不明白为什么，但我认为BitmapData 部分是主要问题，但我不想使用较慢的 Mashal 副本！

所以我的问题如下：

*   是否可以在 C# 中使用不安全的指针方法对多线程图像处理进行分段？
*   如果是 - 如何？

至于图像处理库：我不需要滤镜或一些默认的图像处理算法，但我需要自己的“每像素”算法——我什至考虑在我的程序中添加一个像素着色器。xD

由于我的程序基于网络摄像头帧的转换，因此我需要尽可能快的算法。我已经阅读了所有可以找到的论坛帖子和教程等，但仍然不知道如何使用不安全的代码正确执行此操作，直到我创建了这个帐户以最终在这里提出这个问题。

强盗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T23:50:37.127

当然有可能:)

看看： [https ://github.com/dajuric/accord-net-extensions](https://github.com/dajuric/accord-net-extensions)

这个库包含你想要的：并行处理器，用于对图像执行并行操作（例如颜色转换），是的，对图像进行操作的那些函数是不安全的（使用指针）：

NuGet 包准备就绪。

# android - 使用短信触发警报

> ID：13554115
> 
> 赞同：-1
> 
> 时间：2012-11-25T18:35:47.157
> 
> 标签：android, sms, alarmmanager

“构造函数意图（EAlarmReceiver，Class）未定义”是什么意思？这是使用短信触发警报的正确方法，而且，即使在静音模式下，我如何仍然启动警报？提前致谢

```
public class EAlarmReceiver extends BroadcastReceiver {

public static String sender;
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle bundle = intent.getExtras(); 
    Object[] pdusObj = (Object[]) bundle.get("pdus"); 
    SmsMessage[] messages = new SmsMessage[pdusObj.length]; 
    for (int i = 0; i<pdusObj.length; i++) 
    { 
            messages[i] = SmsMessage.createFromPdu ((byte[]) 
            pdusObj[i]); 
            sender = messages[i].getOriginatingAddress();
    } 

    for (SmsMessage msg : messages) {
        if (msg.getMessageBody().contains("alert")) {

            Calendar cal = Calendar.getInstance();
            cal.add(Calendar.SECOND, 1);

            Intent i = new Intent(EAlarmReceiver.this, ReceiverInterface.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(context,
                12345, i, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager am = 
                (AlarmManager)context.getSystemService(Activity.ALARM_SERVICE);
            am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                    pendingIntent);
        }//end if
    }//end for

}// end onreceive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:44:17.580

使用`context`而不是`EAlarmReceiver.this`.

[http://developer.android.com/reference/android/content/Intent.html#Intent(android.content.Context](http://developer.android.com/reference/android/content/Intent.html#Intent(android.content.Context) , java.lang.Class)

# bundle - 发布 JRE 8 早期访问版本

> ID：13554116
> 
> 赞同：1
> 
> 时间：2012-11-25T18:35:54.450
> 
> 标签：bundle, java, java-8

我使用 jdk8 编译我的 java 程序以使用一些最新功能。

JRE 8 可以在最终发布之前发货吗？看起来 JRE 8 不能独立使用。所以我可以在 JDK8 最终发布之前发布它吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-19T04:27:49.163

JRE8 和 JDK8 目前处于 Early Adopter 版本 (EA)。它的许可条款如下：[http ://www.oracle.com/technetwork/licenses/ea-license-152003.html](http://www.oracle.com/technetwork/licenses/ea-license-152003.html)

> 我们授予您一项可撤销、非排他性、不可转让、免版税和有限的权利，以 (a) 仅出于内部非生产和非商业目的使用本程序和任何补充程序的二进制部分的一 (1) 份副本评估和测试程序，包括为您的每个应用程序开发不超过一个原型；

现在，当然，我不是律师，也不是法律建议，但是正如上面所说，您不能将 jre8 软件（因为这将包括 jre8 的二进制部分）运送到您的生产或商业非评估或测试多个您的应用程序的非原型。

此外，您将受到上述地址中的出口管制的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T18:10:34.263

GA 于 3 月 18 日发布： [http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

# c++ - 链接整个文件夹

> ID：13554120
> 
> 赞同：0
> 
> 时间：2012-11-25T18:36:08.300
> 
> 标签：c++, cmake

如何将整个文件夹链接到库中？

我必须遵循结构

```
src/main.cpp
src/alg/alg1.cpp
src/alg/alg1.hpp
src/alg/alg2.cpp
src/alg/ ...
src/utils/something.cpp
src/utils/... 
```

我可以用

```
add_library(ALG1 alg/alg1.cpp)
add_library(ALG2 .... )
......
add_library(UTIL1 utils/something.cpp)

add_executable(PROG main.cpp)

target_link_libraries(PROG ALG1 ALG2 ... UTIL1 UTIL2 ...) 
```

无论如何告诉它打包整个文件夹并链接它？还有一些可能在他们之间有依赖关系

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:03:08.067

以下是否适合您的需求？

```
add_library(ALG alg/alg1.cpp alg/alg1.hpp alg/alg2.cpp #... list all files)

add_library(UTIL utils/something.cpp #... list all files)

add_executable(PROG main.cpp)

target_link_libraries(PROG ALG UTIL) 
```

请注意，不建议使用诸如`file(GLOB ...)`收集源文件之类的命令，因为如果将文件添加到目录中，则构建系统将不会重新生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:44:00.843

采用

```
file(GLOB UTIL_SOURCES utils/*.cpp) 
```

要获取目录中的所有源文件，只需执行

```
add_library(UTIL, ${UTIL_SOURCES}) 
```

# webrtc - webRTC如何实现远程音频和视频流的同步？

> ID：13554124
> 
> 赞同：3
> 
> 时间：2012-11-25T18:36:38.063
> 
> 标签：webrtc, stun

webRTC 根据[https://apprtc.appspot.com/实现 PeerConnection](https://apprtc.appspot.com/)

webRTC如何实现远程音频和视频流的同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:46:28.630

使用 RTCP SR/RR 报告和每个 SRTP 数据包中的时间戳完成的正常 RTP a/v 同步。

查看任何 VoIP 应用程序。

# python - 如何从第二个脚本访问类变量

> ID：13554126
> 
> 赞同：1
> 
> 时间：2012-11-25T18:36:47.357
> 
> 标签：python, python-3.x

有没有办法在循环运行时检查不断变化的值`TEST.Loop`和更改 值（ ）？`TEST.Delay``def Work():`

我可以创建 的实例`TEST`，并将其更改为 的其他实例`TEST`，但我找不到查看`Work`循环内的任何值和变量更改的方法。

```
#!/usr/bin/env python3

from time import sleep 

class TEST:
    Test = 0
    Loop = 0
    Delay =.1

    def inc_delay(self):
        TEST.Delay += 1
        print ( 'inc called' , TEST.Delay )

    def dec_delay(self):
        TEST.Delay -+ 1

    def Work():
        while TEST.Loop < 10000:
            TEST.Loop += 1
            sleep( TEST.Delay )
            print ( TEST.Loop , TEST.Delay )

if __name__ == '__main__':
    TEST.Work() 
```

第二个脚本类似于：

```
import class_filename
a = class_filename.TEST
a.Delay = whatever 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:30:44.373

这很容易。当您在该类中时想从某个类中访问某物时，您只需命名它，除非您在一个函数中。那么当您想在您使用的类中访问某物时，您会假装您在该类之外当您在同一个文件中但在类之外时，请使用以下语法：

```
ClassNameThisIsNotAKeyWord.AtributeCanBeAFunction 
```

在您将使用的 spret 文件中

```
moudule_name.ClassNameThisIsNotAKeyWord.AtributeCanBeAFunction 
```

:)

# c# - 如何修复事件延迟

> ID：13554128
> 
> 赞同：1
> 
> 时间：2012-11-25T18:37:02.350
> 
> 标签：c#, event-handling, hover

我正在为一个学校项目制作一个餐桌预订系统，并且我正在使用一个 PictureBoxes 列表来表示这些桌子。这些 PictureBoxes 我已经链接了一个悬停事件，当我悬停时，BackColor 属性发生了变化。

```
List<PictureBox> pb = new List<PictureBox> { pictureBox1, pictureBox2, pictureBox3};

foreach (PictureBox p in pb)
{
    p.BorderStyle = BorderStyle.Fixed3D;
    p.BackColor = Color.White;
    p.MouseHover += new EventHandler(mouseOn);
}

private void mouseOn(object sender, EventArgs e)
{
    ((PictureBox)sender).BackColor = Color.Green;
} 
```

一切都很好，除了当我将鼠标悬停在事件触发前需要 1 秒钟，有什么方法可以立即触发事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T18:40:51.510

如果要立即触发事件，请改用`MouseEnter`事件。根据设计，您的鼠标应保持静止一段时间`MouseHover`以触发事件。

*顺便说一句* ，事件`SystemInformation.MouseHoverTime`的延迟。`MouseHover`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:41:43.053

> 一切都很好，除了当我将鼠标悬停时，触发事件需要 1 秒

就是这样[`Control.MouseHover`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousehover.aspx)定义的：

> 当鼠标指针停留在控件上时发生。

“休息”部分是一秒钟的延迟。我不知道有什么方法可以调整鼠标在鼠标悬停之前必须停留在控件上的时间长度。

如果您不想要任何延迟 - 即您想要一个在鼠标进入控件区域后立即引发的事件 - 您应该使用它[`Control.MouseEnter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseenter.aspx)。

从两个事件的文档中：

> 鼠标事件按以下顺序发生：
> 
> *   鼠标回车
>     
>     
> *   鼠标移动
>     
>     
> *   MouseHover / MouseDown / MouseWheel
>     
>     
> *   鼠标向上
>     
>     
> *   鼠标离开

# list - Dart 中的 List.shuffle()？

> ID：13554129
> 
> 赞同：52
> 
> 时间：2012-11-25T18:37:09.090
> 
> 标签：list, sorting, random, set, dart

我正在寻找网络上的每一个地方（飞镖网站、stackoverflow、论坛等），但我找不到我的答案。

所以这是我的问题：我需要编写一个函数，打印随机排序的列表，巫婆作为参数提供。:**飞镖**也是。

我尝试使用地图，使用集合，使用列表......我尝试使用断言的方法，使用排序，我在 dart 库上使用数学查看随机方法......没有什么可以做我想做的事。

有人可以帮我弄这个吗？

这里有一些草稿：

```
var element03 = query('#exercice03');
  var uneliste03 = {'01':'Jean', '02':'Maximilien', '03':'Brigitte', '04':'Sonia', '05':'Jean-Pierre', '06':'Sandra'};
  var alluneliste03 = new Map.from(uneliste03);
  assert(uneliste03 != alluneliste03);
  print(alluneliste03);

  var ingredients = new Set();
  ingredients.addAll(['Jean', 'Maximilien', 'Brigitte', 'Sonia', 'Jean-Pierre', 'Sandra']);
  var alluneliste03 = new Map.from(ingredients);
  assert(ingredients != alluneliste03);
  //assert(ingredients.length == 4);

  print(ingredients);

  var fruits = <String>['bananas', 'apples', 'oranges'];
  fruits.sort();
  print(fruits); 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2014-05-28T08:04:14.137

List 类中有一个[shuffle](https://api.dartlang.org/apidocs/channels/stable/dartdoc-viewer/dart-collection.ListBase#id_shuffle)方法。这些方法将列表打乱。您可以不带参数调用它或提供随机数生成器实例：

```
var list = ['a', 'b', 'c', 'd'];

list.shuffle();

print('$list'); 
```

* * *

该[`collection`](https://pub.dev/packages/collection)软件包带有一个[`shuffle`](https://pub.dev/documentation/collection/latest/collection/shuffle.html)功能/扩展，它还支持指定要随机播放的子范围：

```
void shuffle (
  List list,
  [int start = 0,
  int end]
) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-25T22:28:39.317

这是一个基本`shuffle`功能。请注意，由此产生的洗牌在密码学上并不强。它使用 Dart 的`Random`类，该类产生不适合加密使用的伪随机数据。

```
import 'dart:math';

List shuffle(List items) {
  var random = new Random();

  // Go through all elements.
  for (var i = items.length - 1; i > 0; i--) {

    // Pick a pseudorandom number according to the list length
    var n = random.nextInt(i + 1);

    var temp = items[i];
    items[i] = items[n];
    items[n] = temp;
  }

  return items;
}

main() {
  var items = ['foo', 'bar', 'baz', 'qux'];

  print(shuffle(items));
} 
```

# c++ - 为什么它首先调用 bool_function ？

> ID：13554136
> 
> 赞同：0
> 
> 时间：2012-11-25T18:37:49.650
> 
> 标签：c++

我对下面的代码很好奇，有人可以解释为什么它首先调用 bool func ？“str”不是更适合 arg 类型的字符串吗？

```
 void a(bool input)
    {
        cout<<"I amd first"<<endl;
        cout<<input<<endl;
    }

    void a(const string &input)
    {
        cout<<"I amd second"<<endl;
        cout<<input<<endl;
    }

    int main( )
    {
        a("str");  //  call  void a(bool input)

        a(string("str"));   //call  void a(const string &input)

        return 0; 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:40:37.147

`"str"`是 类型`const char[4]`，它立即衰减到，并且在非显式构造函数到自定义类型*之前*考虑`const char *`从任何指针类型到 的转换。`bool`

 *所以，我会说答案是“因为标准是这样说的”。

相关段落应为 13.3.3.2 ¶2：

> 比较隐式转换序列的基本形式时（定义见 13.3.3.1）
> 
> *   标准转换序列 (13.3.3.1.1) 是比用户定义的转换序列或省略号转换序列更好的转换序列 [...]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:41:32.967

I'd guess it is because when you call a("str"), you're trying to call a function with parameters const char *. It will convert any type of pointer to bool before any other implicit conversion (::std::string etc).*

# c++ - 比较两个不同数组中的字符值

> ID：13554138
> 
> 赞同：1
> 
> 时间：2012-11-25T18:38:10.337
> 
> 标签：c++, visual-c++

我必须比较两个数组，每个数组都有 444 个字符，如果它们完全相同，则输出它们是相同的。如果不是，那么程序将继续运行，直到完成所有数组的相互比较。

到目前为止，这是我的代码。我已经对其进行了多次更改，但我要么让程序不向 outFile 输出任何内容（说没有一个是相同的，我认为这是错误的，因为我想一个会是相同的，或者教授不会要求我们这样做）或者它说每个基因链都是相同的：

```
#include iostream
#include string
#include fstream
using namespace std;

ifstream inFile;
ofstream outFile;

bool SameGene(char gene1[], char gene2[], int size)

{
    for(int i=0, j=0;i<444 && j<444;i++,j++)
        if(gene1[i] != gene2[j])
            return false;

    return true;
}

int main()
{

    inFile.open("dna.txt");
    outFile.open("DNAanalysis.txt.");

    char gene1A[444], gene2A[444];

    char gene1B[444], gene2B[444];

    char gene1C[444], gene2C[444];

    char gene1D[444], gene2D[444];

    inFile.read(gene1A, 444);
    inFile.read(gene2A, 444);
    inFile.read(gene1B, 444);
    inFile.read(gene2B, 444);
    inFile.read(gene1C, 444);
    inFile.read(gene2C, 444);
    inFile.read(gene1D, 444);
    inFile.read(gene2D, 444);

    if(SameGene(gene1A, gene1B, 444) || SameGene(gene2A, gene2B, 444))
        outFile << "Person A and Person B are related." << endl;
    if(SameGene(gene1A, gene1C, 444) || SameGene(gene2A, gene2C, 444))
        outFile << "Person A and Person C are related." << endl;
    if(SameGene(gene1A, gene1D, 444) || SameGene(gene2A, gene2D, 444))
        outFile << "Person A and Person D are related." << endl;
    if(SameGene(gene1B, gene1C, 444) || SameGene(gene2B, gene2C, 444))
        outFile << "Person B and Person C are related." << endl;
    if(SameGene(gene1B, gene1D, 444) || SameGene(gene2B, gene2D, 444))
        outFile << "Person B and Person D are related." << endl;
    if(SameGene(gene1C, gene1D, 444) || SameGene(gene2C, gene2D, 444))
        outFile << "Person C and Person D are related." << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:42:08.917

您可以使用[`std::equal`](http://en.cppreference.com/w/cpp/algorithm/equal)比较两个数组：

```
#include <algorithm>

bool same = std::equal(gene1, gene1+444, gene2); 
```

在这里你必须确保`gene2`至少与`gene1`.

如果你的问题出在其他地方，那么你应该在问题的标题中明确这一点，并专注于真正的问题。

# jquery - Uncaught SyntaxError: Unexpected token ILLEGAL - 仅在我的文件中

> ID：13554140
> 
> 赞同：0
> 
> 时间：2012-11-25T18:38:37.840
> 
> 标签：jquery

我收到此错误：

Uncaught SyntaxError: Unexpected token ILLEGAL

任何人都可以帮助为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:39:43.767

您在 script.js 的末尾有一个不可见的坏字符，可能是因为您从 jsfiddle 复制了一些代码。

使用您喜欢的编辑器将其删除：转到 script.js 文件的末尾并使用退格键：您将看到光标一次在同一空间删除，因为您删除的字符是 U+200B，零宽度空间。

这个问题是由于他们的脚本编辑器的一个错误，可能是[这个](https://github.com/jsfiddle/jsfiddle-docs-alpha/issues/163)。

# linux - 需要帮助处理共享 ARM9 GPIO 中断 (linux) 上的多个共享 I2C MAX3107 芯片

> ID：13554144
> 
> 赞同：3
> 
> 时间：2012-11-25T18:39:23.407
> 
> 标签：linux, handler, shared, interrupt, i2c

我们小组正在使用嵌入式处理器（Phytec LPC3180、ARM9）。我们设计了一个电路板，它在 LPC3180 的一个 I2C 总线上包含四个 MAX3107 UART 芯片。以防万一，我们正在运行内核 2.6.10，这是该处理器可用的最新版本（对该产品的支持不是很好；我们必须开发或修复 Phytec 提供的许多驱动程序，并且 Phytec似乎对升级该产品的 linux 代码（尤其是内核版本）没有兴趣。这太糟糕了，因为 LPC3180 是一个不错的设备，尤其是在不需要以太网且实际上不需要以太网的低功耗嵌入式产品的情况下'不想要以太网（由于以太网控制器芯片的相关功耗）。

当 I2C 总线上的四个设备（MAX3107 UART 芯片）之一接收到一个字符时，它会产生一个中断。所有四个 MAX3107 芯片的中断线是共享的（开漏下拉），并且该线连接到配置为电平中断的 3180 的 GPIO 引脚。当 3017 中的一个产生中断时，将运行一个处理程序，该处理程序执行以下处理（大致）：

```
spin_lock_irqsave();
disable_irq_nosync(irqno);
irq_enabled = 0;
irq_received = 1;
spin_unlock_irqrestore()
set_queued_work();  // Queue up work for all four devices for every interrupt
                    // because at this point we don't know which of the four
                    // 3107's generated the interrupt
return IRQ_HANDLED; 
```

请注意，这是我觉得有些麻烦的地方，即在离开上述代码之前没有重新启用中断。相反，驱动程序的编写使得中断由下半部分工作队列任务重新启用（使用“enable_irq（LPC_IRQ_LINE）函数调用”。由于工作队列任务不在中断上下文中运行，我相信它们可能会休眠，我认为对于中断处理程序来说是个坏主意。

上述方法的基本原理如下： 1\. 如果四个 MAX3107 uart 芯片中的一个接收到一个字符并产生一个中断（例如），中断处理程序需要确定四个 I2C 设备中的哪个实际引起了中断。然而，显然，由于 I2C 读取可以休眠，因此无法从上半部中断处理程序的上下文中读取 I2C 设备，这被认为不适合中断处理程序上半部。2.解决上述问题（即哪个设备导致中断）的方法是让中断禁用并退出上半部分处理程序，之后非中断上下文代码可以查询I2C总线上的四个设备中的每一个找出哪个接收到了字符（并因此产生了中断）。3\. 一旦下半部分处理程序确定哪个设备产生了中断，下半部分代码就会禁用该芯片上的中断，这样它就不会重新触发到 LPC3180 的中断线。这样做之后，它会读取串行数据并退出。

这里的主要问题似乎是没有办法从中断处理程序上半部分中查询四个 MAX3107 uart 芯片。如果上半部分在返回之前简单地重新启用中断，这将导致同一芯片再次产生中断，我认为导致上半部分禁用中断，安排下半部分工作队列并禁用中断只是发现自己回到了同一个地方，因为在下半部分代码到达导致中断的芯片之前，另一个中断已经发生，等等，......

任何与此驱动程序打交道的建议将不胜感激。我真的不喜欢允许在驱动程序的上半部分禁用中断但在存在上半部分驱动代码之前不重新启用中断的想法。这似乎并不安全。

谢谢，

吉姆

PS：在我的阅读中，我发现线程中断是处理上述要求的一种手段（至少这是我对[http://lwn.net/Articles/302043/](http://lwn.net/Articles/302043/)等网站文章的解释）。我不确定 Phytec 提供的 2.6.10 内核是否包含线程中断函数。我打算在接下来的几天内对此进行调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:29:05.337

如果您的代码编写正确，那么设备是否在处理先前的中断完成之前发出中断并不重要，并且您不希望在上半部分执行阻塞操作是正确的，但是阻塞操作在上半部分是可以接受的下半部分，事实上这也是它们存在的部分原因！

在这种情况下，我会建议一种方法，即上半部分只调度下半部分，然后下半部分循环遍历所有 4 个设备并处理任何待处理的请求。可能有多个设备需要处理，也可能没有。

**更新：** 确实，您可能会通过负载测试使系统过载，并且可能需要优化软件以处理重负载。此外，我没有自己的 3180 和四个 3107（或类似的）来测试它，所以我在理论上说，但我不清楚为什么你需要完全禁用中断。

一般而言，当硬件设备断言中断时，它不会断言另一个中断，直到当前中断被清除。所以你有 4 台设备共享一个 int 行：

1.  您的上半部分触发并向工作队列添加一些内容（即触发下半部分）
2.  您的下半部分扫描该 int 行上的所有设备（即所有四个 3107）
3.  如果其中一个导致中断，您将读取完全处理数据所需的所有数据（可能将其放入队列中以进行更高级别的处理？）
4.  您“清除”当前设备上的中断。

当您清除中断时，允许设备触发另一个中断，但之前不允许。

**有关此特定设备的更多详细信息：**

似乎这个设备（MAX3107）有一个 128 个字的缓冲区，默认情况下，你在每个字之后都会被打断。但似乎您应该能够通过设置 FIFO 级别寄存器来更好地利用缓冲区。然后，只有在 rx 字数之后，您才会被中断（或者如果您将 tx FIFO 填充到超过阈值，在这种情况下您应该放慢传输速度（即在软件中缓冲更多））。

似乎这个想法基本上是定期从设备中提取数据（可能每 100 毫秒或 10 毫秒或任何似乎对您有用的东西），然后只让中断充当您已超过阈值的警告，这可能会安排周期性功能立即执行，或增加调用它的速率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T21:14:41.930

启用和禁用中断是因为我们使用基于级别的中断，而不是基于边缘的中断。其后果在驱动程序代码标头中明确解释，Jim，您拥有它。

需要基于级别的中断来避免丢失一个字符的边缘中断，该字符在一个 UART 到达另一个 UART 后立即到达：服务第一个有效地消除了第二个，这样第二个字符就会丢失。事实上，这正是该驱动程序的初始边沿中断版本中发生的情况，一旦 >1 UART 被执行。

当前方案是否存在观察到的失败？

问候， 司机作者（其他人）

# sql - 访问查询中的多表不等于

> ID：13554145
> 
> 赞同：3
> 
> 时间：2012-11-25T18:39:25.213
> 
> 标签：sql, ms-access, subquery, correlated-subquery, multi-table

我有两张桌子。车辆和所有权。我正在尝试进行查询，该查询将为我提供不在 OWNERSHIP 表中的所有 VEHICLES**的**列表。我基本上需要一份关于我的可用车辆库存的报告。我试过这个查询：

```
SELECT VEHICLE.*
FROM VEHICLE, OWNERSHIP
WHERE (VEHICLE.VEH_ID <> OWNERSHIP.VEH_ID); 
```

我越来越：![在此处输入图像描述](../Images/c8f81eed239ace5bcadd02a5aa41c67a.png)

当我做平等时，我会得到所有权中列出的所有车辆，这样就可以了。但是 NOT Equal 没有。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:42:20.220

尝试

```
SELECT VEHICLE.*
FROM VEHICLE
WHERE NOT EXISTS
(SELECT NULL FROM OWNERSHIP WHERE VEHICLE.VEH_ID= OWNERSHIP.VEH_ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:14:54.667

如果您的表包含许多行，则该`NOT EXISTS`方法可能会很慢。另一种更快的方法是使用`LEFT JOIN`with`WHERE`子句仅返回右侧连接字段为 Null 的行。

```
SELECT VEHICLE.*
FROM
    VEHICLE AS v
    LEFT JOIN OWNERSHIP AS o
    ON v.VEH_ID = o.VEH_ID 
WHERE o.VEH_ID Is Null; 
```

您可以使用 Access 的“*查找不匹配的查询向导*”来创建类似的查询。

如果两张桌子都很小，您可能不会注意到差异。但是应该很容易检查差异是否明显。如果您的表格随着时间的推移大幅增长，这种方法将为您提供更好的服务。

# jquery - Ajax 响应结束 Jqmobi

> ID：13554147
> 
> 赞同：0
> 
> 时间：2012-11-25T18:39:33.253
> 
> 标签：jquery, ajax, json, mobile, jqmobi

我正在将 jqMobi 框架用于 Web 应用程序。在我的应用程序中，我连接到服务器，发送用户名和密码并收到如下字符串：

```
[{"utoken":"e43aa84cc304a1ed3722832616294516b118a5c2","username":"myusername","sharecode":"testmus","created":"2012-07-17 13:51:32"}] 
```

我得到了回应，但随后它停止了。

我的代码是：

```
function Connectserver() {
    var form = $("#loginForm");    
    //disable the button so we can't resubmit while we wait
    $("#submitButton",form).attr("disabled","disabled");
    var u = $("#username", form).val();
    var p = $("#password", form).val();
    alert('knappen bliver klikket') ; //This fires
        if(u != '' && p!= '') {

        alert('data sendes') ; //This fires
        $.post("http://m.myhost.com/service/login.php", {username:u,password:p}, function(data) {

        alert('renspons retur') ;//This are not fired

            if(data[0].username == u) {
                //store
                alert('renspons retur') // Not fired
                var utoken = data[0].utoken;
                localStorage.setItem("utoken", utoken);
                } 
            else 
                {
                alert("Dine loginoplysninger er ikke korrekte", function() {});
                }
         $("#submitButton").removeAttr("disabled");
        },"json");
    } else {
        alert("Du skal indtaste brugernavn og password", function() {});
        $("#submitButton").removeAttr("disabled");
    }
    return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:54:54.280

尝试验证服务器响应，它可能会超时。使用 CURL 或 HttpWatch 之类的工具。

您也可以尝试在帖子周围放置一个 try/catch。如果错误出现在 jqMobi 中，那么您可能会遇到问题。如果服务器没有返回，那么您只会挂在帖子上，错误可能是服务器端的。

# ruby-on-rails - 使用回形针将pdf转换为jpg使用ghostscript

> ID：13554148
> 
> 赞同：2
> 
> 时间：2012-11-25T18:39:34.620
> 
> 标签：ruby-on-rails, pdf, paperclip, jpeg, ruby-on-rails-2

我正在尝试使用以下脚本为 pdf 文件生成 jpg，但没有成功。

[https://gist.github.com/3059321](https://gist.github.com/3059321)

我希望有人可以为我提供一些帮助以使其正常工作。我花了相当多的时间与它作斗争。

我有一个较旧的开发环境：

```
shajizaidi@Spock:~/Softdev/e-mangue/script$ rails -v
Rails 2.3.8
shajizaidi@Spock:~/Softdev/e-mangue/script$ ruby -v
ruby 1.8.7 (2011-12-28 patchlevel 357) [i686-linux] 
```

和相关的宝石：

```
aasm (3.0.1)
actionmailer (2.3.8, 2.2.2)
actionpack (2.3.8, 2.2.2)
activemodel (3.1.3)
activerecord (2.3.8, 2.2.2)
activeresource (2.3.8, 2.2.2)
activesupport (3.1.3, 2.3.8, 2.2.2)
arel (2.2.1)
git (1.2.5)
hpricot (0.8.5)
httpclient (2.2.4)
mysql (2.8.1)
passenger (3.0.11)
rack (1.4.0, 1.1.3)
rails (2.3.8, 2.2.2)
rake (0.9.2)
ruby-blockcache (0.2)
rubygems-update (1.5.3)
rubyist-aasm (2.1.1)
soap4r (1.5.8) 
```

我的模型的摘录如下：

```
class Issue < ActiveRecord::Base
include AASM

   belongs_to :publication
   has_many :readings
   has_many :readers, :through => :readings, :class_name => "User"

   has_many :issue_metadatas, :dependent => :destroy
   has_many :table_of_contents_entries, :dependent => :destroy

   has_many :issue_ratings

   has_one :issue_status, :dependent => :destroy

   has_attached_file :pdf,
                    :url  => "/assets/:id/",
                    :path => ":rails_root/assets/docs/:id/:style/:basename.:extension",
                     :styles => {
                                 :icon => ["60X80#", :jpg], 
                                 :thumb => ["360x480#", :jpg]
                                 :large => ["X800", :jpg]
                                 },
                     :processors => [:ghostscript, :thumbnail],
                     :convert_options => {:all => ' colorspace RGB  flatten  density 300  quality 100'},
                     :path => ":page_path/:class/:id/:resource_token/:style/:filename"

   validates_presence_of     :issue_number
   validates_presence_of     :title
   validates_presence_of     :date 
```

当我尝试上传 pdf 时，出现以下错误：

```
 RuntimeError (cannot generate tempfile `'):
  /home/shajizaidi/.rvm/rubies/ruby-1.8.7-p357/lib/ruby/1.8/tempfile.rb:52:in `initialize'
  lib/paperclip_processors/ghostscript.rb:17:in `new'
  lib/paperclip_processors/ghostscript.rb:17:in `make'
  app/controllers/issues_controller.rb:79:in `new'
  app/controllers/issues_controller.rb:79:in `create' 
```

在`ghostscript.rb`

要测试我是否通过不使用数组来更改临时文件的生成方式，例如：

```
dst = Tempfile.new(“#@basename}) 
```

代替：

```
dst = Tempfile.new([@basename, @format ? ".#{@format}" : '']) 
```

我没有得到错误；但是当然临时文件的文件名没有正确生成。

我已经尝试对此进行了很多研究，但似乎无法找到解决方案。

# c - 在 C 中实现 ls -al 命令

> ID：13554150
> 
> 赞同：18
> 
> 时间：2012-11-25T18:39:49.847
> 
> 标签：c, linux, file, ls, stat

作为我的一门课作业的一部分，我必须用 C 语言编写一个程序来复制 ls -al 命令的结果。我已经阅读了必要的材料，但我仍然没有得到正确的输出。到目前为止，这是我的代码，它只应该打印出文件大小和文件名，但其打印的文件大小不正确。

代码：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>

int main(int argc, char* argv[])
{
    DIR *mydir;
    struct dirent *myfile;
    struct stat mystat;

    mydir = opendir(argv[1]);
    while((myfile = readdir(mydir)) != NULL)
    {
        stat(myfile->d_name, &mystat);    
        printf("%d",mystat.st_size);
        printf(" %s\n", myfile->d_name);
    }
    closedir(mydir);
} 
```

这些是我执行代码后的结果：

```
[root@localhost ~]# ./a.out Downloads
4096 ..
4096 hw22.c
4096 ankur.txt
4096 .
4096 destination.txt 
```

以下是正确的尺寸：

```
[root@localhost ~]# ls -al Downloads
total 20
drwxr-xr-x.  2 root root 4096 Nov 26 01:35 .
dr-xr-x---. 24 root root 4096 Nov 26 01:29 ..
-rw-r--r--.  1 root root   27 Nov 21 06:32 ankur.txt
-rw-r--r--.  1 root root   38 Nov 21 06:50 destination.txt
-rw-r--r--.  1 root root 1139 Nov 25 23:38 hw22.c 
```

谁能指出我的错误。

谢谢，

安库尔

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-25T18:49:27.800

`myfile->d_name`是文件名而不是路径，所以你需要先将文件名附加到目录`"Downloads/file.txt"`，如果它不是工作目录：

```
char buf[512];    
while((myfile = readdir(mydir)) != NULL)
{
    sprintf(buf, "%s/%s", argv[1], myfile->d_name);
    stat(buf, &mystat);
.... 
```

至于为什么打印`4096`链接的大小`.`以及`..`从最后一次调用到`stat()`.

注意：你应该分配一个足够大的缓冲区来保存目录名、文件名、`NULL`字节和分隔符，像这样

```
strlen(argv[1]) + NAME_MAX + 2; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-13T00:37:30.597

这是我为任何感兴趣的人工作的最终代码。它打印正确的文件大小。归功于 asker 和 mux 的回答，只需将代码放在一起。我得到这个工作的输入是“./main”。.

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <dirent.h>

int main(int argc, char* argv[])
{
    DIR *mydir;
    struct dirent *myfile;
    struct stat mystat;

    char buf[512];
    mydir = opendir(argv[1]);
    while((myfile = readdir(mydir)) != NULL)
    {
        sprintf(buf, "%s/%s", argv[1], myfile->d_name);
        stat(buf, &mystat);
        printf("%zu",mystat.st_size);
        printf(" %s\n", myfile->d_name);
    }
    closedir(mydir);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:51:47.280

我相信你会观察到，如果你`./a.out .`会得到你期望的行为。

您有一个稍微微妙的错误，如果您检查对`stat(2)`.

根本错误：（代码中的）`dirent`返回的 s将与. 您的代码将首先成功，因此将包含有效数据，然后所有后续调用都将失败，返回您不检查的，因此不会被修改，您将打印旧值，即的。`readdir(2)``myfile``d_name``mydir``stat` `..``mystat``..``stat(2)``-1``mystat``st_size``..`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T18:49:10.547

麻烦的是，当你`stat("ankur.txt", &mystat)`工作的时候，你不是在处理文件`"Downloads/ankur.txt"`。最有可能的`stat()`是，失败了；或者，它正在报告不同的文件。

因此，您需要查看您的系统是否支持[`fstatat()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fstatat.html)（POSIX 2008 中的新功能）或安排在文件名前加上目录名。

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2013-11-13T07:06:42.123

或者也许只是 system("ls -al") 也可以！

# ios - 是否可以让事件监听器充当闹钟？

> ID：13554158
> 
> 赞同：-2
> 
> 时间：2012-11-25T18:40:48.447
> 
> 标签：ios

我希望我的事件监听器充当闹钟。用户选择一个日期和时间，事件监听器在那个时候做。使用故事板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:44:17.390

您可能需要[UILocalNotification](http://developer.apple.com/library/ios/#documentation/iphone/Reference/UILocalNotification_Class/Reference/Reference.html)，因为您的应用程序可能随时退出或进入后台。

# php - MySQL在多个列中搜索匹配

> ID：13554160
> 
> 赞同：2
> 
> 时间：2012-11-25T18:40:55.003
> 
> 标签：php, mysql, full-text-search

我有一个搜索，通过多个表中的几个列搜索匹配项。问题是我正在使用“OR”，但如果用户搜索多个列，这将不起作用。

这是我的查询：

```
 SELECT clients.clientName,
       projects.Client_ID,
       projects.projectNumber,
       projects.projectName,
       projects.projectManager,
       projects.expectedDate,
       projects.address,
       projects.CreationDate,
       projects.custom1,
       projects.custom2,
       projects.custom3,
       projects.custom4,
       projects.custom5,
       projects.custom6,
       projects.custom7,
       projects.custom8,
       projects.custom9,
       projects.Status_ID,
       statuses.status
FROM projects
JOIN clients ON projects.Client_ID = clients.Client_ID
JOIN statuses ON  projects.Status_ID = statuses.Status_ID
WHERE clientName LIKE '%$keyword%'
  OR projectNumber LIKE '%$keyword%'
  OR projectName LIKE '%$keyword%'
  OR address LIKE '%$keyword%'
  OR area LIKE '%$keyword%'
  OR status LIKE '%$keyword%'
  OR custom1 LIKE '%$keyword%'
  OR custom2 LIKE '%$keyword%'
  OR custom3 LIKE '%$keyword%'
  OR custom4 LIKE '%$keyword%'
  OR custom5 LIKE '%$keyword%'
  OR custom6 LIKE '%$keyword%'
  OR custom7 LIKE '%$keyword%'
  OR custom8 LIKE '%$keyword%'
  OR custom9 LIKE '%$keyword%'; 
```

如果用户搜索：状态和客户端 --my 查询将不会返回任何结果。

另外，我担心这个查询的速度有很多数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:48:30.637

没错，您使用的查询类型将强制进行表扫描，并且无法对其进行索引。即使您只搜索单个列，这仍然是正确的`LIKE '%$keyword%'`

进行全文搜索的唯一有效方法是使用特殊的全文索引技术。MySQL 已内置此功能，但目前仅适用于 MyISAM 表（MySQL 5.6 的 InnoDB 将支持全文索引）。

您应该阅读我的演示文稿：[全文搜索Throwdown](http://www.slideshare.net/billkarwin/practical-full-text-search-with-my-sql#)，以比较不同的解决方案。从我所做的测试中可以清楚地看出，使用`LIKE`运行速度比使用任何类型的文本索引*慢数百或数千倍。*慢多少很大程度上取决于你的桌子的大小。

* * *

来自@Dagon 的重新评论：

我最初是在 2008 年做这个演示的，但我在 2012 年 4 月更新了它并重新运行了我的所有测试。与我 2008 年的演示的差异是微不足道的。

任何索引解决方案仍然比您使用的昂贵的表扫描好几个数量级`LIKE`。表越大，索引的好处就越大。这个原则不会改变。

# java - Android NFC 优惠券应用程序意外终止

> ID：13554162
> 
> 赞同：0
> 
> 时间：2012-11-25T18:40:58.273
> 
> 标签：java, android, api, sharedpreferences, nfc

多亏了对 NFC 的回复和一些特定的事情，我已经理解并设法编译了一个代码，用户可以在其中读取标签，如果标签包含与我的代码相似的字符串，一张优惠券将被添加（图像更改）并且整数增加 1。该整数将由 SharedPreferences 保存，用于确定用户收集了多少优惠券并在 Resume 上显示。

但是，编译后，当我尝试运行它时，我的应用程序会立即停止。有人可以帮我检查一下我可能出了什么问题吗？我知道它有点长，但我真的不知道出了什么问题。

```
@TargetApi(10)    
//I have to use this line of code because I'm targetted to code at API 8 but some NFC functionalities that I use requires API 10.

public class CouponManager extends Activity {

        private static final String TAG = "NFCReadTag";
        private NfcAdapter mNfcAdapter;
        private IntentFilter[] mNdefExchangeFilters;
        private PendingIntent mNfcPendingIntent;
        public static final String PREF_FILE_NAME = "PrefFile";

        private int[] images = new int[10];

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.coupon_layout);

            //List of images
            images[0]=R.drawable.cp0;
            images[1]=R.drawable.cp1;
            images[2]=R.drawable.cp2;
            images[3]=R.drawable.cp3;
            images[4]=R.drawable.cp4;
            images[5]=R.drawable.cp5;
            images[6]=R.drawable.cp6;
            images[7]=R.drawable.cp7;
            images[8]=R.drawable.cp8;
            images[9]=R.drawable.cp9;
            images[10]=R.drawable.cp10;

            //Restore preferences 
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            //Image to use depending on coupon collected
            final ImageView img = new ImageView(this);

            if(storedPreference!=10)
            {
                img.setImageResource(images[storedPreference]);
            }
            else
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setCancelable(false);
                builder.setTitle("Redeem Your Coupon?");
                builder.setInverseBackgroundForced(true);
                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which)
                    {
                        dialog.dismiss();
                        SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                        SharedPreferences.Editor editor = preferences.edit();
                        editor.putInt("storedInt", 0); // value to store
                        editor.commit();    
                        img.setImageResource(images[0]);
                    }
                });
                builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        img.setImageResource(images[10]);
                    }
                });
            }

            //Check and send Intent from NFC tag discovered
            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

            mNfcPendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
                    getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
                    | Intent.FLAG_ACTIVITY_CLEAR_TOP), 0);

            IntentFilter coupontag = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
            coupontag.addDataScheme("http");
            coupontag.addDataAuthority("www.ichatime.com", null);
            coupontag.addDataPath(".*", PatternMatcher.PATTERN_SIMPLE_GLOB);

            mNdefExchangeFilters = new IntentFilter[] { coupontag };

        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
        }

        @Override
        protected void onResume() {
            super.onResume();
            if(mNfcAdapter != null) {
                mNfcAdapter.enableForegroundDispatch(this, mNfcPendingIntent,
                    mNdefExchangeFilters, null);
            } else {
                Toast.makeText(getApplicationContext(), "Sorry, No NFC Adapter found.", Toast.LENGTH_SHORT).show();
            }

        }

        @Override
        protected void onPause() {
            super.onPause();
            if(mNfcAdapter != null) mNfcAdapter.disableForegroundDispatch(this);
        }

        @Override
        protected void onStop() {
            super.onStop();

            // We need an Editor object to make preference changes.
              // All objects are from android.context.Context
                SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                int storedPreference = preferences.getInt("storedInt", 0);

                SharedPreferences.Editor editor = preferences.edit();
                editor.putInt("storedInt", storedPreference); // value to store
                editor.commit();    
        }

        @Override
        protected void onNewIntent(Intent intent) {
            super.onNewIntent(intent);      
            SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
            int storedPreference = preferences.getInt("storedInt", 0);

            if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(intent.getAction())) {
                NdefMessage[] messages = null;
                Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
                if (rawMsgs != null) {
                    messages = new NdefMessage[rawMsgs.length];
                    for (int i = 0; i < rawMsgs.length; i++) {
                        messages[i] = (NdefMessage) rawMsgs[i];
                    }
                }
                if(messages[0] != null) {
                    String result="";
                    byte[] payload = messages[0].getRecords()[0].getPayload();
                    // this assumes that we get back am SOH followed by host/code
                    for (int b = 1; b<payload.length; b++) { // skip SOH
                        result += (char) payload[b];
                    }
                    if (result == "ichatime.com")
                        {
                        final ImageView img = new ImageView(this);
                        Toast.makeText(getApplicationContext(), "Coupon collected!", Toast.LENGTH_SHORT).show();

                        if (storedPreference!=10)
                        {
                            storedPreference++;
                            SharedPreferences.Editor editor = preferences.edit();
                            editor.putInt("storedInt", storedPreference);
                            img.setImageResource(images[storedPreference]);
                        }
                            if (storedPreference==10)
                            {
                                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                builder.setCancelable(false);
                                builder.setTitle("Redeem Your Coupon?");
                                builder.setInverseBackgroundForced(true);
                                builder.setPositiveButton("Yes", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int which)
                                    {
                                        dialog.dismiss();
                                        SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
                                        SharedPreferences.Editor editor = preferences.edit();
                                        editor.putInt("storedInt", 0); // value to store
                                        editor.commit();    
                                        img.setImageResource(images[0]);
                                    }
                                });
                                builder.setNegativeButton("No", new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int which) {
                                        dialog.dismiss();
                                        img.setImageResource(images[10]);
                                    }
                                });
                            }
                        else
                        {
                            SharedPreferences.Editor editor = preferences.edit();
                            editor.putInt("storedInt", 10);
                            img.setImageResource(images[10]);
                        }}
                    else 
                    {
                        Toast.makeText(getApplicationContext(), "Wrong tag detected!", Toast.LENGTH_SHORT).show();
                    }
                    //Debugging Mode to see what is contained in the tags.
            //          Toast.makeText(getApplicationContext(), "Tag Contains " + result, Toast.LENGTH_SHORT).show();
                }
            }
        }

} 
```

Logcat 错误：

```
>11-26 01:16:11.869: D/AndroidRuntime(550): Shutting down VM
>
11-26 01:16:11.869: W/dalvikvm(550): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
>
11-26 01:16:11.929: I/dalvikvm(550): threadid=3: reacting to signal 3
>
11-26 01:16:11.979: E/AndroidRuntime(550): FATAL EXCEPTION: main
>
**11-26 01:16:11.979: E/AndroidRuntime(550): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ponpon/com.example.ponpon.MainActivity}: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ponpon/com.example.ponpon.CouponManager}: java.lang.ArrayIndexOutOfBoundsException: length=10; index=10**
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.os.Handler.dispatchMessage(Handler.java:99)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.os.Looper.loop(Looper.java:137)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.main(ActivityThread.java:4424)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at java.lang.reflect.Method.invokeNative(Native Method)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at java.lang.reflect.Method.invoke(Method.java:511)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at dalvik.system.NativeStart.main(Native Method)
>
11-26 01:16:11.979: E/AndroidRuntime(550): Caused by: java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ponpon/com.example.ponpon.CouponManager}: java.lang.ArrayIndexOutOfBoundsException: length=10; index=10
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.startActivityNow(ActivityThread.java:1797)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:135)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:347)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:682)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.widget.TabHost.setCurrentTab(TabHost.java:346)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.widget.TabHost.addTab(TabHost.java:236)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at com.example.ponpon.MainActivity.onCreate(MainActivity.java:37)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.Activity.performCreate(Activity.java:4465)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  ... 11 more
>
11-26 01:16:11.979: E/AndroidRuntime(550): Caused by: java.lang.ArrayIndexOutOfBoundsException: length=10; index=10
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at com.example.ponpon.CouponManager.onCreate(CouponManager.java:53)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.Activity.performCreate(Activity.java:4465)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
>
11-26 01:16:11.979: E/AndroidRuntime(550):  ... 21 more 
```

我的阵列做错了什么？感谢各位大侠的解惑！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T01:31:01.430

我似乎通过将数组计数加 1 解决了这个问题。我不明白的是，我想在数组中保留 11 个项目，所以不是

private int[] images = new int[10] 够吗？

因为据我了解，int[0] 保留第一个值，因此 int[10] 将保留第十一个值？谢谢你们！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T20:28:15.387

您的 logcat 正在您的 onCreate 方法上打印 ArrayOutOfBounds 异常。

问题是您要声明一个 10 项大小的数组，然后尝试在其上放置 11 项。

您必须声明一个新的 int[11] 数组。

# java - Java Bubblesort 仅交换第一个数组项

> ID：13554164
> 
> 赞同：1
> 
> 时间：2012-11-25T18:41:20.737
> 
> 标签：java, arrays, for-loop, sorting, bubble-sort

我的冒泡排序代码只交换第一个数组项。所有其他项目都保留为 0。我认为我的嵌套循环是错误的，或者我还无法正确诊断它。所以这是我的代码。

```
 public void swap(int i, int j) {

    int temp;

    temp = i;
    i = j;
    j = temp;
}

public void sortArray(int [] sourceArray, int [] targetArray, int allArraySize){

    for(int i = 0; i < allArraySize; i++) {
        targetArray[i] = sourceArray[i];
        for (i = 0; i < allArraySize; i++) {
            for(int j = i+1; j < allArraySize;j++) {
                if(targetArray[i] > targetArray[j]) {
                    swap(i, j);
                }
            }

        }

    }
} 
```

非常感谢您的反馈。我（显然）是编程新手。我已将代码更改为此。

```
public void sortArray(int [] sourceArray, int [] targetArray, int allArraySize){
    int temp;

    for(int i = 0; i < allArraySize; i++) {
        targetArray[i] = sourceArray[i];
        for (i = 0; i < allArraySize; i++) {
            for(int j = i+1; j < allArraySize;j++) {
                if(targetArray[i] > targetArray[j]) {
                    temp = targetArray[i];
                    targetArray[i] = targetArray[j];
                    targetArray[j] = temp;
                }
            }

        }

    }
} 
```

结果仍然只是交换 1 项，但现在是最后 1 项。如果有人仍然能够提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T18:43:17.383

原因在[这篇文章](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)中有详细解释。总之，java按值传递参数，您的`swap`方法只交换局部变量，但对方法中的变量没有影响`sortArray`。

一个简单的解决方法是将 的代码`swap`直接包含在您的`if`. 注意：我尚未检查您的其余代码。例如，您可能打算交换数组中的元素而不是索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T18:45:24.557

您使用的是 i 计数器的两倍：

```
for(int i = 0; i < allArraySize; i++) {
    targetArray[i] = sourceArray[i];
        for (i = 0; i < allArraySize; i++) {
        ... 
```

可能内部循环正在覆盖外部循环中使用的 i 计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T19:40:57.907

（请注意，这是我在 Stackoverflow 上的第一篇文章。我用过多种语言进行编程，但没有一种是真正的 OO。我在空闲时间攻击 Java 已经有一个月左右的时间了。）

与 msg 1 中的原始代码一样，我觉得有必要通过单独的过程进行交换，因为作为“分而治之”的一部分，在 Pascal、VBasic 等中这样做非常有效（并且受到鼓励） “编程实践。所以我也很困惑，为什么我的相同*交换*例程在 Java 中不起作用......直到我**重新**阅读参数传递。我终于明白了，需要传递**数组本身**才能更改其内容。

```
public static void swap(int [] a, int i, int j) {
    int c  = a[i];
      a[i] = a[j];
      a[j] = c;
  } 
```

以上对我有用，尽管我一直在努力吸收 Java，但我真的很自豪我终于弄明白了。但是，天啊.... 很平常的事情令人困惑，是吧？

另一方面，我想我**通过参考**学习了什么以及如何应对它。

而且我想我无意中**封装**了*交换*方法的工作原理，从而遵循了 OO 原则。所以……双倍好？

但这让我不禁要问：“分而治之”排序到这种程度只是一个愚蠢的想法吗？毕竟，将 3 行交换程序与排序程序的其余部分内联是常识，但我的*交换*方法只是愚蠢的，或者，如果不是“最好的”，那么至少是“好的”Java 实践？

# objective-c - 在 CollectionView 页脚中访问 UITextField

> ID：13554165
> 
> 赞同：1
> 
> 时间：2012-11-25T18:41:21.910
> 
> 标签：objective-c, xcode, uicollectionview

我有一个带有自定义页脚的 UICollectionView 我写道：

```
- (UICollectionReusableView*)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath 
```

{ FooterViewController*页脚 = (FooterViewController* )[collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionFooter withReuseIdentifier:@"CollectionViewFooter" forIndexPath:indexPath];

```
return footer; 
```

}

页脚内部有一个 UITextField 。如何从 CollectionViewViewController 访问它的值？

# 3d - 马里奥银河加载？

> ID：13554169
> 
> 赞同：4
> 
> 时间：2012-11-25T18:41:36.133
> 
> 标签：3d, loading, game-engine, wii

超级马里奥银河几乎没有加载时间，我很久以前就听说这是因为当马里奥在一个关卡内的行星之间飞行时，此时游戏正在加载接下来的几个行星。它不会在开始时加载所有内容。

作为参考，这是一个在行星之间飞行的例子： [http ://www.youtube.com/watch?feature=player_detailpage&v=Lkk9uM6xQDU#t=123s](http://www.youtube.com/watch?feature=player_detailpage&v=Lkk9uM6xQDU#t=123s)

我想在我为学位的最后一年编写的游戏中使用类似的技术。但是我确实想写一下它，所以有人知道这种技术可能被称为什么以及使用它的任何其他应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:46:51.677

就在发布此内容后，我通过大量其他示例找到了我正在寻找的内容:) [http://tvtropes.org/pmwiki/pmwiki.php/Main/DynamicLoading](http://tvtropes.org/pmwiki/pmwiki.php/Main/DynamicLoading)

# android - 操作栏选项卡的对齐文本？

> ID：13554171
> 
> 赞同：0
> 
> 时间：2012-11-25T18:41:44.280
> 
> 标签：android, layout, tabs, android-actionbar

我尝试自定义操作栏选项卡。看图片：

![在此处输入图像描述](../Images/cb8bfe99c7348cc8cdd29887490059b4.png)

我的代码：

```
 <style name="ActionBarTabBar" parent="@android:style/Widget.Holo.Light.ActionBar.TabBar">
        <item name="android:showDividers">end</item>
        <item name="android:divider">@drawable/actionbar_tab_divider</item>
        <item name="android:dividerPadding">0dp</item>
        <item name="android:background">@drawable/actionbar_tab_bg</item>
        <item name="android:paddingLeft">50dp</item>
        <item name="android:paddingRight">0dp</item>
    </style>

    <style name="ActionBarTab" parent="@android:style/Widget.Holo.ActionBar.TabView">
        <item name="android:showDividers">none</item>
        <item name="android:measureWithLargestChild">true</item>
        <item name="android:gravity">center</item>
    </style>

    <style name="CustomTheme" parent="@android:style/Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/ActionBar</item>
        <item name="android:listSelector">@style/ListView</item>
        <item name="android:actionBarTabBarStyle">@style/ActionBarTab</item>
        <item name="android:actionBarTabStyle">@style/ActionBarTabBar</item>
    </style> 
```

我想将标签的文本对齐到中心。当我尝试将 showDividers 设置为 value`middle`时，分隔线不可见。它通过值`beggining`或可见`end`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:12:05.057

经过更多尝试，我得到了想要的结果。

这是我的代码，可以正常工作。

```
<style name="ActionBarTabBar" parent="@android:style/Widget.Holo.Light.ActionBar.TabBar">
    <item name="android:background">@drawable/actionbar_tab_bg</item>
    <item name="android:paddingLeft">30dp</item>
    <item name="android:paddingRight">30dp</item>
</style>

<style name="ActionBarTab" parent="@android:style/Widget.Holo.Light.ActionBar.TabView">
    <item name="android:showDividers">middle</item>
    <item name="android:divider">@drawable/actionbar_tab_divider</item>
    <item name="android:dividerPadding">0dp</item>
    <item name="android:measureWithLargestChild">true</item>
    <item name="android:gravity">center</item>
</style>

<style name="CustomTheme" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarTabBarStyle">@style/ActionBarTab</item>
    <item name="android:actionBarTabStyle">@style/ActionBarTabBar</item>
</style> 
```

需要为 Widget.Holo.Light.ActionBar.TabView 指定样式，并为此项目设置分隔线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T19:51:52.460

删除不需要覆盖的样式，以便像您描述的那样设置标签的样式：

```
<style name="ActionBarTabBar" parent="@android:style/Widget.Holo.Light.ActionBar.TabBar">
        <item name="android:divider">@drawable/actionbar_tab_divider</item>
        <item name="android:background">@drawable/actionbar_tab_bg</item>        
</style> 
```

# c++ - C++ 向量作为成员变量

> ID：13554173
> 
> 赞同：0
> 
> 时间：2012-11-25T18:42:08.233
> 
> 标签：c++, vector

我正在尝试使用向量作为成员变量。

```
GameOfLife.h
class GameOfLifeManager {
    std::vector<Cell::Cell> cells;
    ...

GameOfLife.cpp

...
cells.push_back(Cell::Cell(x,y,false));
... 
```

和 Cells.h 看起来像这样

```
#ifndef CELL_H_
#define CELL_H_

namespace Cell {

class Cell {

    bool alive;

    int posX;
    int posY;

    Cell* left;
    Cell* right;
    Cell* top;
    Cell* bottom;

    Cell* topLeft;
    Cell* topRight;
    Cell* bottomRight;
    Cell* bottomLeft;

public:

    Cell(int x, int y, bool alive);

    int CountNeighbours();
    void Kill();
    void Resurrect();

};

} /* namespace Zell */
#endif /* CELL_H_ */ 
```

如果我尝试调用`cells.push_back(Cell::Cell(x,y,false))`eclipse 告诉我“从这里需要”，我也无法解密错误消息。任何想法出了什么问题？

* * *

```
Description Resource    Path    Location    Type ‘::fwprintf’ has not been declared GameOfLife      line 149, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::fwscanf’ has not been declared GameOfLife      line 150, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::getwc’ has not been declared   GameOfLife      line 151, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::getwchar’ has not been declared    GameOfLife      line 152, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::fgetws’ has not been declared  GameOfLife      line 145, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::fputwc’ has not been declared  GameOfLife      line 146, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::fputws’ has not been declared  GameOfLife      line 147, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::fwide’ has not been declared   GameOfLife      line 148, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::mbstate_t’ has not been declared   GameOfLife      line 66, external location: /usr/include/c++/4.7/cwchar C/C++ Problem ‘::wint_t’ has not been declared  GameOfLife      line 141, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::btowc’ has not been declared   GameOfLife      line 143, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::fgetwc’ has not been declared  GameOfLife      line 144, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘void GameOfLifeManager::operator delete [](void*)’ may not be declared within a namespace    GameOfLife      line 100, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘void* GameOfLifeManager::operator new(GameOfLifeManager::std::size_t, const GameOfLifeManager::std::nothrow_t&)’ may not be declared within a namespace  GameOfLife      line 102, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘void* GameOfLifeManager::operator new [](GameOfLifeManager::std::size_t, const GameOfLifeManager::std::nothrow_t&)’ may not be declared within a namespace   GameOfLife      line 104, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘void GameOfLifeManager::operator delete(void*, const GameOfLifeManager::std::nothrow_t&)’ may not be declared within a namespace GameOfLife      line 106, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘void GameOfLifeManager::operator delete [](void*, const GameOfLifeManager::std::nothrow_t&)’ may not be declared within a namespace  GameOfLife      line 108, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘void* GameOfLifeManager::operator new(GameOfLifeManager::std::size_t, void*)’ may not be declared within a namespace GameOfLife      line 111, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘void* GameOfLifeManager::operator new [](GameOfLifeManager::std::size_t, void*)’ may not be declared within a namespace  GameOfLife      line 113, external location: /usr/include/c++/4.7/new   C/C++ Problem   required from here  GameOfLifeManager.cpp   /GameOfLife/src line 27 C/C++ Problem ‘void GameOfLifeManager::operator delete(void*, void*)’ may not be declared within a namespace    GameOfLife      line 117, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘::wcstoull’ has not been declared    GameOfLife      line 260, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::__gnu_cxx’ has not been declared   GameOfLife      line 266, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::__gnu_cxx’ has not been declared   GameOfLife      line 267, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::__gnu_cxx’ has not been declared   GameOfLife      line 268, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘mbstate_t’ in namespace ‘GameOfLifeManager::std’ does not name a type    GameOfLife      line 65, external location: /usr/include/c++/4.7/bits/char_traits.h C/C++ Problem ‘void* GameOfLifeManager::operator new(GameOfLifeManager::std::size_t)’ may not be declared within a namespace    GameOfLife      line 94, external location: /usr/include/c++/4.7/new    C/C++ Problem ‘void* GameOfLifeManager::operator new [](GameOfLifeManager::std::size_t)’ may not be declared within a namespace GameOfLife      line 96, external location: /usr/include/c++/4.7/new    C/C++ Problem ‘void GameOfLifeManager::operator delete(void*)’ may not be declared within a namespace   GameOfLife      line 98, external location: /usr/include/c++/4.7/new    C/C++ Problem ‘::wcschr’ has not been declared  GameOfLife      line 206, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wscanf’ has not been declared  GameOfLife      line 205, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsrchr’ has not been declared GameOfLife      line 208, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcspbrk’ has not been declared GameOfLife      line 207, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wmemchr’ has not been declared GameOfLife      line 210, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsstr’ has not been declared  GameOfLife      line 209, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstoll’ has not been declared GameOfLife      line 259, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstold’ has not been declared GameOfLife      line 250, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsxfrm’ has not been declared GameOfLife      line 198, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstoul’ has not been declared GameOfLife      line 197, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wmemcmp’ has not been declared GameOfLife      line 200, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wctob’ has not been declared   GameOfLife      line 199, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wmemmove’ has not been declared    GameOfLife      line 202, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wmemcpy’ has not been declared GameOfLife      line 201, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wprintf’ has not been declared GameOfLife      line 204, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wmemset’ has not been declared GameOfLife      line 203, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsrtombs’ has not been declared   GameOfLife      line 189, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsspn’ has not been declared  GameOfLife      line 190, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsncmp’ has not been declared GameOfLife      line 187, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsncpy’ has not been declared GameOfLife      line 188, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstok’ has not been declared  GameOfLife      line 195, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstol’ has not been declared  GameOfLife      line 196, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstod’ has not been declared  GameOfLife      line 191, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcstof’ has not been declared  GameOfLife      line 193, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcscoll’ has not been declared GameOfLife      line 181, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcscpy’ has not been declared  GameOfLife      line 182, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcscat’ has not been declared  GameOfLife      line 179, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcscmp’ has not been declared  GameOfLife      line 180, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcslen’ has not been declared  GameOfLife      line 185, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsncat’ has not been declared GameOfLife      line 186, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcscspn’ has not been declared GameOfLife      line 183, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcsftime’ has not been declared    GameOfLife      line 184, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::vswprintf’ has not been declared   GameOfLife      line 169, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::vfwscanf’ has not been declared    GameOfLife      line 166, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::vfwprintf’ has not been declared   GameOfLife      line 164, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::ungetwc’ has not been declared GameOfLife      line 163, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::wcrtomb’ has not been declared GameOfLife      line 178, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::vwscanf’ has not been declared GameOfLife      line 176, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::vwprintf’ has not been declared    GameOfLife      line 174, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::vswscanf’ has not been declared    GameOfLife      line 172, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::mbsrtowcs’ has not been declared   GameOfLife      line 156, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::mbsinit’ has not been declared GameOfLife      line 155, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::mbrtowc’ has not been declared GameOfLife      line 154, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::mbrlen’ has not been declared  GameOfLife      line 153, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::swscanf’ has not been declared GameOfLife      line 162, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::swprintf’ has not been declared    GameOfLife      line 160, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::putwchar’ has not been declared    GameOfLife      line 158, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘::putwc’ has not been declared   GameOfLife      line 157, external location: /usr/include/c++/4.7/cwchar    C/C++ Problem ‘void GameOfLifeManager::operator delete [](void*, void*)’ may not be declared within a namespace GameOfLife      line 118, external location: /usr/include/c++/4.7/new   C/C++ Problem ‘::lconv’ has not been declared   GameOfLife      line 55, external location: /usr/include/c++/4.7/clocale    C/C++ Problem ‘::setlocale’ has not been declared   GameOfLife      line 56, external location: /usr/include/c++/4.7/clocale    C/C++ Problem ‘::localeconv’ has not been declared  GameOfLife      line 57, external location: /usr/include/c++/4.7/clocale    C/C++ Problem ‘::isalnum’ has not been declared GameOfLife      line 66, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isalpha’ has not been declared GameOfLife      line 67, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::iscntrl’ has not been declared GameOfLife      line 68, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isdigit’ has not been declared GameOfLife      line 69, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isgraph’ has not been declared GameOfLife      line 70, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::islower’ has not been declared GameOfLife      line 71, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isprint’ has not been declared GameOfLife      line 72, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::ispunct’ has not been declared GameOfLife      line 73, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isspace’ has not been declared GameOfLife      line 74, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isupper’ has not been declared GameOfLife      line 75, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::isxdigit’ has not been declared    GameOfLife      line 76, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::tolower’ has not been declared GameOfLife      line 77, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::wctrans_t’ has not been declared   GameOfLife      line 84, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::toupper’ has not been declared GameOfLife      line 78, external location: /usr/include/c++/4.7/cctype C/C++ Problem ‘::wint_t’ has not been declared  GameOfLife      line 86, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::wctype_t’ has not been declared    GameOfLife      line 85, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswalpha’ has not been declared    GameOfLife      line 89, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswalnum’ has not been declared    GameOfLife      line 88, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswcntrl’ has not been declared    GameOfLife      line 93, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswblank’ has not been declared    GameOfLife      line 91, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswdigit’ has not been declared    GameOfLife      line 95, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswctype’ has not been declared    GameOfLife      line 94, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswlower’ has not been declared    GameOfLife      line 97, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswgraph’ has not been declared    GameOfLife      line 96, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswpunct’ has not been declared    GameOfLife      line 99, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswprint’ has not been declared    GameOfLife      line 98, external location: /usr/include/c++/4.7/cwctype    C/C++ Problem ‘::iswupper’ has not been declared    GameOfLife      line 101, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::iswspace’ has not been declared    GameOfLife      line 100, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::towlower’ has not been declared    GameOfLife      line 104, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::towupper’ has not been declared    GameOfLife      line 105, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::iswxdigit’ has not been declared   GameOfLife      line 102, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::towctrans’ has not been declared   GameOfLife      line 103, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::wctrans’ has not been declared GameOfLife      line 106, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem ‘::wctype’ has not been declared  GameOfLife      line 107, external location: /usr/include/c++/4.7/cwctype   C/C++ Problem no matching function for call to ‘operator new(sizetype, void*)’  GameOfLife      line 120, external location: /usr/include/c++/4.7/ext/new_allocator.h   C/C++ Problem   required from ‘static void GameOfLifeManager::__gnu_cxx::__alloc_traits<_Alloc>::construct(_Alloc&, GameOfLifeManager::__gnu_cxx::__alloc_traits<_Alloc>::pointer, const
_Tp&) [with _Tp = GameOfLifeManager::Cell::Cell; _Alloc = GameOfLifeManager::std::allocator<GameOfLifeManager::Cell::Cell>; GameOfLifeManager::__gnu_cxx::__alloc_traits<_Alloc>::pointer = GameOfLifeManager::Cell::Cell*]’    GameOfLife      line 202, external location: /usr/include/c++/4.7/ext/alloc_traits.h    C/C++ Problem   required from ‘void GameOfLifeManager::std::vector<_Tp,
_Alloc>::push_back(const value_type&) [with _Tp = GameOfLifeManager::Cell::Cell; _Alloc = GameOfLifeManager::std::allocator<GameOfLifeManager::Cell::Cell>; GameOfLifeManager::std::vector<_Tp, _Alloc>::value_type = GameOfLifeManager::Cell::Cell]’   GameOfLife      line 885, external location: /usr/include/c++/4.7/bits/stl_vector.h C/C++ Problem   required from ‘static _ForwardIterator GameOfLifeManager::std::__uninitialized_copy<_TrivialValueTypes>::__uninit_copy(_InputIterator, _InputIterator, _ForwardIterator) [with _InputIterator = GameOfLifeManager::Cell::Cell*; _ForwardIterator = GameOfLifeManager::Cell::Cell*; bool _TrivialValueTypes = false]’    GameOfLife      line 77, external location: /usr/include/c++/4.7/bits/stl_uninitialized.h   C/C++ Problem   required from ‘void GameOfLifeManager::std::vector<_Tp,
_Alloc>::_M_insert_aux(GameOfLifeManager::std::vector<_Tp, _Alloc>::iterator, const _Tp&) [with _Tp = GameOfLifeManager::Cell::Cell; _Alloc = GameOfLifeManager::std::allocator<GameOfLifeManager::Cell::Cell>; GameOfLifeManager::std::vector<_Tp, _Alloc>::iterator = GameOfLifeManager::__gnu_cxx::__normal_iterator<GameOfLifeManager::Cell::Cell*, GameOfLifeManager::std::vector<GameOfLifeManager::Cell::Cell> >; typename GameOfLifeManager::std::_Vector_base<_Tp, _Alloc>::pointer = GameOfLifeManager::Cell::Cell*]’ GameOfLife      line 360, external location: /usr/include/c++/4.7/bits/vector.tcc   C/C++ Problem   required from ‘_ForwardIterator GameOfLifeManager::std::__uninitialized_move_if_noexcept_a(_InputIterator,
_InputIterator, _ForwardIterator, _Allocator&) [with _InputIterator = GameOfLifeManager::Cell::Cell*; _ForwardIterator = GameOfLifeManager::Cell::Cell*; _Allocator = GameOfLifeManager::std::allocator<GameOfLifeManager::Cell::Cell>]’    GameOfLife      line 283, external location: /usr/include/c++/4.7/bits/stl_uninitialized.h  C/C++ Problem   required from ‘_ForwardIterator GameOfLifeManager::std::__uninitialized_copy_a(_InputIterator,
_InputIterator, _ForwardIterator, GameOfLifeManager::std::allocator<_Tp>&) [with _InputIterator = GameOfLifeManager::Cell::Cell*; _ForwardIterator = GameOfLifeManager::Cell::Cell*; _Tp = GameOfLifeManager::Cell::Cell]’  GameOfLife      line 260, external location: /usr/include/c++/4.7/bits/stl_uninitialized.h  C/C++ Problem  required from ‘_ForwardIterator GameOfLifeManager::std::uninitialized_copy(_InputIterator,
_InputIterator, _ForwardIterator) [with _InputIterator = GameOfLifeManager::Cell::Cell*; _ForwardIterator = GameOfLifeManager::Cell::Cell*]’    GameOfLife      line 119, external location: /usr/include/c++/4.7/bits/stl_uninitialized.h  C/C++ Problem no matching function for call to ‘operator new(sizetype, void*)’  GameOfLife      line 85, external location: /usr/include/c++/4.7/bits/stl_construct.h   C/C++ Problem   required from ‘void GameOfLifeManager::std::vector<_Tp,
_Alloc>::push_back(const value_type&) [with _Tp = GameOfLifeManager::Cell::Cell; _Alloc = GameOfLifeManager::std::allocator<GameOfLifeManager::Cell::Cell>; GameOfLifeManager::std::vector<_Tp, _Alloc>::value_type = GameOfLifeManager::Cell::Cell]’   GameOfLife      line 893, external location: /usr/include/c++/4.7/bits/stl_vector.h C/C++ Problem make:
*** [src/GameOfLifeManager.o] Error 1   GameOfLife          C/C++ Problem 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:51:27.987

看起来您`#include`在命名空间中有语句。

不在您显示的代码中……可能在您的源文件中。

# c# - 在编辑模式下如何在 Listview 中找到 Ajaxfileupload 控件

> ID：13554179
> 
> 赞同：1
> 
> 时间：2012-11-25T18:42:37.117
> 
> 标签：c#, asp.net

我试图找到 ajaxcontroltoolkit:ajaxfileupload ，它以 EditItemTemplate 模式放置在 ListView 内。我需要说我已经尝试在我的 ListView 中在这两个没有结果的事件中找到这个控件：ItemEditing 和 ItemDataBound。我应该忘记在 ListView 或 GridView 中使用 ajaxfileupload 吗？或者有没有解决这个问题的方法？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:50:51.263

试试这个`TemplateControl`属性：

```
ListView1.TemplateControl.FindControl("contrlID"); 
```

# vim - Vim 折叠排序

> ID：13554191
> 
> 赞同：16
> 
> 时间：2012-11-25T18:43:41.230
> 
> 标签：vim

我有一个看起来像这样的文件：

```
dog{{{
blah blah blah
}}}
cat{{{
blah blah
}}}
aardvark{{{
blah blah blah blah
}}} 
```

在我的 vimrc 中，我有`set foldmethod=marker`, 以便文件的内容全部折叠在花括号处。我的问题是，如何根据折叠标题对文件进行排序？我希望该`aarvaark`部分首先出现，然后是`cat`，然后是`dog`。

一些折叠部分内还有其他折叠。我不想对那些较低的折叠级别进行排序。该文件应仅按 1 级折叠排序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:24:43.647

关闭所有折叠（`zM`或`:set foldlevel=0`）后，您可以使用删除`dd`和粘贴`p`来手动移动折叠的块。这适用于少量文本。

对于大文本，您必须自己编写排序函数，因为 Vim 不提供此类功能。可以使用以下算法：

1.  使用文本中不存在的分隔符将所有折叠行连接在一起（例如`<Nul>`）。
2.  执行`:sort`命令。
3.  取消加入特殊分隔符上的范围。

对于错误处理和极端情况，这实际上是相当多的实施工作。我在这里做了一个尝试：[https ://gist.github.com/4145501](https://gist.github.com/4145501)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:50:56.363

一种方法如下：

1.  搜索并替换行尾，使一级折叠都在一行上（即用一个不会出现在文件其他地方的唯一字符串替换行尾）。

2.  像往常一样用于`:sort`对文件中的行进行排序。

3.  从步骤 1 反转搜索和替换以重新引入行尾。

这都可以记录为 Vim 宏。

如果没有嵌套折叠，或者如果有一种简单的方法可以将顶级折叠与嵌套折叠区分开来（例如，如果一级 {{{ 和 }}} 行向左齐平并且其他有领先空间）。如果不是这种情况，它可能仍然是可能的，但要困难得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:56:13.777

我会使用 Vim 宏的强大功能。

假设您的文件中除了记录之外没有任何其他人员，第一条记录从第一行开始。并且您没有第 1 级的起点和终点在同一行。并且您的所有 {} 都匹配得很好。

转到第一个条目并录制一个宏以注册一个（`qa`-开始录制`q`-停止）

```
/{^MV%k:s/\n/EEEEEE/^Mj^ 
```

复制我的或更好地自己记录：（^M - 代表文字输入）

*   /{^M 查找下一个 {
*   V%k 选择线虎钳直到第 1 级结束，但不使用 }}} 结束行
*   :s/\n/EEEEEE/^M 将符号“行尾”更改为所选内容中的某个唯一字符串
*   j^ 往下走一行，然后到行的开头，以防之前的记录有前导空格。

从第二行开始运行宏（假设在录制宏时已经处理了第一行。）在正常模式下 100000@a - 使用大于记录数的任何数字。如果第一条记录在文件的第一行中，则宏将在处理完所有行时自行停止。作为副作用，它将在视觉上选择第一行 - 取消选择它。

对文件进行排序

```
:sort 
```

恢复行尾：:%s/EEEEEE/^M/g

注意 ^M 应该是文字输入。要键入它，请使用 Ctrl-V Enter

它适用于嵌套级别，因为 % 跳转到匹配的结束 }。这就是为什么让所有的 {} 匹配好很重要的原因。

当无法上去时，宏将停止，`k`这就是为什么你必须在第一行有第一条记录。宏将忽略空行或任何不是记录之间的记录。

上述方法应该适用于您的文件。如果您想要更通用的折叠方法，请在宏中使用以下命令而不是 /{ 和 %

首先打开所有折叠

zj - 转到下一个打开折叠的开头

]z - 转到当前折叠的末尾。

宏的其余部分是相同的。这种方法更通用，但我发现它不太可靠，因为它依赖于所有折叠打开、折叠启用等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-25T15:26:54.867

有一个[vim-sort-folds](https://github.com/obreitwi/vim-sort-folds)插件看起来是专门为此而设计的。

# sql - SQL - 执行此过程有什么问题

> ID：13554193
> 
> 赞同：1
> 
> 时间：2012-11-25T18:43:57.610
> 
> 标签：sql, oracle

```
CREATE OR REPLACE procedure verify_employee
(emp_license IN trkdriver.L#%TYPE) 
IS
result VARCHAR2(10);

BEGIN
select e# INTO result
from trkdriver where l#='emp_license';
END;
/ 
```

以上是我的程序

```
SQL> desc trkdriver;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 E#                                        NOT NULL NUMBER(12)
 L#                                        NOT NULL NUMBER(8)
 STATUS                                    NOT NULL VARCHAR2(10) 
```

我尝试过了

```
SQL> execute verify_employee('10001');
BEGIN verify_employee('10001'); END;

*
ERROR at line 1:
ORA-01722: invalid number
ORA-06512: at "USER1.VERIFY_EMPLOYEE", line 7
ORA-06512: at line 1 
```

我做错了什么，我只想尝试一个简单的程序，该程序将根据我输入的员工许可证 ID 进行选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:48:48.183

您必须删除`''`如下：

```
CREATE OR REPLACE procedure verify_employee
(emp_license IN trkdriver.L#%TYPE) 
IS
result VARCHAR2(10);

BEGIN
select e# INTO result
from trkdriver where l#=emp_license;
END;
/ 
```

结束运行它：

```
execute verify_employee(10001); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:47:12.180

`l#`是数字，您将其与字符串进行比较： `... where l#='emp_license';`

# c# - 使用 String.Format 时转义模板条目周围的大括号

> ID：13554195
> 
> 赞同：0
> 
> 时间：2012-11-25T18:44:05.380
> 
> 标签：c#, .net, string.format

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T18:46:20.510

为此，您每侧需要 3 个大括号 - 2 个用于大括号，1 个用于替换。

```
string result = String.Format("products/item/{{{0}}}", itemIdPattern); 
```

# android - 想检查我的横幅是否被点击 - admob

> ID：13554199
> 
> 赞同：0
> 
> 时间：2012-11-25T18:44:23.040
> 
> 标签：android

我使用 AdMob 添加了横幅，

我想检查它是否被点击。

这是我的代码：

```
public class CalcActivity extends Activity {
private AdView adView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_calc);
    adView = new AdView(this, AdSize.BANNER, "a150b2362fba949");
    LinearLayout layout = (LinearLayout)findViewById(R.id.calcL);
    layout.addView(adView);
    adView.loadAd(new AdRequest());
} 
```

我试过 adView.SetAdListener 方法，但它似乎没有“OnClick”方法。

任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T11:28:33.223

> 删除活动文件中与广告相关的所有代码，并将此代码发布到相应的 xml 文件中

```
 <com.google.ads.AdView android:id="@+id/adView"
                       android:layout_width="wrap_content"
                       android:layout_height="wrap_content"
                       ads:adUnitId="a150b2362fba949"
                       android:layout_above="@+id/tv1a"
                       ads:adSize="BANNER"
                       ads:loadAdOnCreate="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T23:13:41.640

您是否尝试在广告上方放置一个视图并放置一个 onClickListener 而不停止事件传播。

编辑 ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
//Your layout here
<FrameLayout android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <com.google.ads.AdView android:id="@+id/adView"
                        android:layout_gravity="bottom"         
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId="a150240343d3227"
                         ads:adSize="SMART_BANNER"
                         ads:loadAdOnCreate="true"/>
<View android:layout_width="match_parent" android:id="@+id/myidview"
    android:layout_height="match_parent"/>
</FrameLayout>
</LinearLayout> 
```

不确定它的工作我没有测试你明白我现在的意思吗？将点击监听器放到 myidview 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-09-16T11:56:24.130

对于那些仍然不知道如何操作的人：

它使用 AdListener

```
adView.setAdListener(new AdListener() {
            public void onDismissScreen(Ad arg0) {
               Toast.makeText(BannerAdListener.this, "Back to app", Toast.LENGTH_SHORT).show();
            }

            public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {
               Toast.makeText(BannerAdListener.this, "Error loading", Toast.LENGTH_SHORT).show();

            }

            public void onLeaveApplication(Ad arg0) {
               Toast.makeText(BannerAdListener.this, "Left app", Toast.LENGTH_SHORT).show();

            }

            public void onPresentScreen(Ad arg0) {
               Toast.makeText(BannerAdListener.this, "Sumthin sumthin", Toast.LENGTH_SHORT).show();

            }

            public void onReceiveAd(Ad arg0) {
               Toast.makeText(BannerAdListener.this, "Ad Received", Toast.LENGTH_SHORT).show();

            }
            }); 
```

# objective-c - 如何找到 UICollectionViewCell 相对于应用程序窗口的坐标

> ID：13554203
> 
> 赞同：10
> 
> 时间：2012-11-25T18:44:46.870
> 
> 标签：objective-c, ios, xcode, uicollectionview, uicollectionviewcell

是否可以将`UICollectionViewCell's`坐标从相对于`UICollectionView`转换为相对于`superview`？到目前为止，`UICollectionViewCell's`当触摸到`superview`. 这是我到目前为止所尝试的：

```
- (void)collectionView:(UICollectionView *)collectionView  
        didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell = 
     [collectionView dequeueReusableCellWithReuseIdentifier:@"CollectionViewCell" 
                                               forIndexPath:indexPath];

    CGRect frame = CGRectMake(0.0, 
                              0.0,  
                              cell.frame.size.width, 
                              cell.frame.size.height);
    frame.origin = [cell convertPoint:cell.frame.origin 
                               toView:self.view];
} 
```

我想创建一个新框架，该框架源自视图上单元格的位置，而不是`UICollectionView`. 任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-06-02T19:37:56.933

这个答案很晚，但希望它会帮助某人。丹，你的想法是对的，但比你拥有的更容易。只需更换

```
CGRect frame = CGRectMake(0.0, 0.0, cell.frame.size.width, cell.frame.size.height);
frame.origin = [cell convertPoint:cell.frame.origin toView:self.view]; 
```

和

```
CGRect frame = [collectionView convertRect:cell.frame toView:self.view]; 
```

问题是您调用的是单元格上的转换方法，而不是 collectionView。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T02:20:04.507

如果我理解正确，我认为问题在于您首先必须更正滚动视图`contentOffset`，这很容易做到，因为`UICollectionView`它是`UIScrollView`.

```
CGRect frame = CGRectMake(0.0,
                          0.0,
                          cell.frame.size.width,
                          cell.frame.size.height);
CGPoint correctedOffset = 
 CGPointMake(cell.frame.origin.x - collectionView.contentOffset.x,
             cell.frame.origin.y - collectionView.contentOffset.y);
frame.origin = [cell convertPoint:correctedOffset toView:self.view]; 
```

我在我的一个`UICollectionView`演示应用程序中对此进行了测试，它似乎有效。试试看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-07T22:11:24.723

以防万一有人在寻找这个，这里是如何在 Swift 中完成的：

```
let cellFrameInSuperview = collectionView.convertRect(collectionView.cellForItemAtIndexPath(indexPath)!.frame, toView: view) 
```

# javascript - Javascript 正则表达式匹配字符串中以“#”开头的任何单词

> ID：13554208
> 
> 赞同：10
> 
> 时间：2012-11-25T18:45:14.547
> 
> 标签：javascript, regex

我对正则表达式很陌生。我正在尝试匹配不包含换行符的字符串中以“#”开头的任何单词（内容已在换行符处拆分）。

示例（不工作）：

```
var string = "#iPhone should be able to compl#te and #delete items"
var matches = string.match(/(?=[\s*#])\w+/g)
// Want matches to contain [ 'iPhone', 'delete' ] 
```

我正在尝试匹配“#”的任何实例，并在它之后抓住它，只要它后面至少有一个字母、数字或符号。空格或换行符应该结束匹配。'#' 应该以字符串开头或以空格开头。

这个 PHP 解决方案看起来不错，但它使用了一种我不知道 JS 正则表达式是否具有的向后看类型的功能： [regexp 保留/匹配任何以某个字符开头的单词](https://stackoverflow.com/questions/11171305/regexp-keep-match-any-word-that-starts-with-a-certain-character)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-25T18:51:14.023

```
var re = /(?:^|\W)#(\w+)(?!\w)/g, match, matches = [];
while (match = re.exec(s)) {
  matches.push(match[1]);
} 
```

检查**[这个演示](http://jsfiddle.net/BUC7L/)**。

```
let s = "#hallo, this is a test #john #doe",
  re = /(?:^|\W)#(\w+)(?!\w)/g,
  match, matches = [];

while (match = re.exec(s)) {
  matches.push(match[1]);
}

console.log(matches);
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T18:50:27.900

试试这个：

```
var matches = string.match(/#\w+/g); 
```

```
let string = "#iPhone should be able to compl#te and #delete items",
  matches = string.match(/#\w+/g);

console.log(matches);
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T18:49:32.223

您实际上也需要匹配哈希。现在，您正在寻找紧跟在几个非单词字符之一的*位置之后的单词字符。*这失败了，原因很明显。试试这个：

```
string.match(/(?=[\s*#])[\s*#]\w+/g) 
```

当然，前瞻现在是多余的，所以你不妨删除它：

```
string.match(/(^|\s)#(\w+)/g).map(function(v){return v.trim().substring(1);}) 
```

这将返回所需的：`[ 'iPhone', 'delete' ]`

这是一个演示：http: [//jsfiddle.net/w3cCU/1/](http://jsfiddle.net/w3cCU/1/)

# android - 如何制作课程应用程序？

> ID：13554210
> 
> 赞同：-4
> 
> 时间：2012-11-25T18:45:32.217
> 
> 标签：android, webview

我正在尝试使用这种[风格制作应用程序](https://play.google.com/store/apps/details?id=com.quizmine.cppandroid&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5xdWl6bWluZS5jcHBhbmRyb2lkIl0.)

这是一个关于某些主题的课程应用程序。我想知道如何存储所有格式的课程页面（是否可以使用`HTML`页面来维护顺序？）以及在哪里保存这些页面，包括图像和视频？

任何人都知道我可以从哪里开始？谢谢 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:51:08.897

您可以将课程页面存储为 xml、json、html 并将此信息保存在 SD 卡或应用程序的资源中。如果您计划大量图像和视频，最好使用 SD 卡并从网络下载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:55:23.600

是的，您可以使用 HTML 创建您的页面，然后让您的应用程序成为显示您的页面的单个 WebView 对象。您将 HTML 页面和相关资源放在`res/assets`文件夹中

# python - Django 循环模型依赖

> ID：13554211
> 
> 赞同：7
> 
> 时间：2012-11-25T18:45:48.610
> 
> 标签：python, database, django, database-design, django-models

我在我的 Django 模型中有一个循环依赖关系，这样模型 A 有一个对 B 的外键引用，而 B 有一个对 A 的多对多引用。我已经查阅了其他 SO 帖子并改用了字符串模型名称的实际课程，但无济于事。这是我的两个课程的缩写版本：

**用户模型**

```
import listings.models

class User(models.Model):
    ...
    favorites = models.ManyToManyField('listings.models.Listing') 
```

**上市模式**

```
import users.models

class Listing(models.Model):
    ...
    owner = models.ForeignKey('users.models.User') 
```

每次我尝试运行**syncdb**时，它都会输出以下错误：

> 错误：一个或多个模型未验证：users.user:'favorites' 与模型 listings.models.Listing 具有 m2m 关系，该模型尚未安装或是抽象的。Listings.listing：“所有者”与模型 users.models.User 有关系，该模型尚未安装或抽象。

如何在不牺牲既定关系的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T18:49:56.343

*   `'listings.models.Listing'`应该`'listings.Listing'`
*   `'users.models.User'`应该是`'users.User'`（或者`'auth.User'`如果你要使用`django.contrib.auth.models.User`）

更多信息请参考[官方文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#foreignkey)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T18:57:28.987

您可以删除您的导入，因为您不依赖它们的代码。您只使用带有模型名称的字符串 - 它不是依赖项。你也应该`models`从你的字符串中删除 - 因为你可以将你的模型称为`app_name.model_name`

# flash - Flash 游戏自动化

> ID：13554223
> 
> 赞同：1
> 
> 时间：2012-11-25T18:47:12.913
> 
> 标签：flash, bots

我想知道是否有任何方法可以为 Flash 应用程序制作“机器人”。我使用 autoit 和 autohotkey 从屏幕上挑选像素并做一些事情，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:19:07.183

我不知道你是想在 flash 中自动点击还是在 ide 中创建，但如果最后一个是 csse：你可以使用*jsfl*在 Flash IDE 中自动执行任务。您可以简单地创建类似 javascript 的文件，将它们保存为 .jsfl 并运行它们。这些也称为*命令*。

[http://help.adobe.com/en_US/flash/cs/extend/flash_cs5_extending.pdf](http://help.adobe.com/en_US/flash/cs/extend/flash_cs5_extending.pdf)

围绕这个有一个非常好的库构建，称为 XJSFL。
[http://www.xjsfl.com/](http://www.xjsfl.com/)

* * *

**更新**：

您可以使用宏记录器来记录鼠标点击/键盘键，这个看起来不错（没有测试）
[http://www.jitbit.com/macro-recorder/](http://www.jitbit.com/macro-recorder/)

# javascript - d3js 图形代码以不同顺序显示不同数据的 y 轴

> ID：13554227
> 
> 赞同：0
> 
> 时间：2012-11-25T18:47:28.593
> 
> 标签：javascript, canvas, graph, svg, d3.js

这是我的 d3js 代码

```
function ShowGraph(data) {
d3.selectAll('.axis').remove();
var vis = d3.select("#visualisation"),
    WIDTH = 500,
    HEIGHT = 500,
    MARGINS = {
        top: 20,
        right: 20,
        bottom: 20,
        left: 30
    },
    xRange = d3.scale.linear().range([MARGINS.left, WIDTH - MARGINS.right]).domain([d3.min(data, function (d) {
        return d.year;
    }),
    d3.max(data, function (d) {
        return d.year;
    })]),
    yRange = d3.scale.linear().range([HEIGHT - MARGINS.top, MARGINS.bottom]).domain([d3.min(data, function (d) {
        return d.count;
    }),
    d3.max(data, function (d) {
        return d.count;
    })]),
    xAxis = d3.svg.axis() // generate an axis
    .scale(xRange) // set the range of the axis
    .tickSize(5) // height of the ticks
    .tickSubdivide(true), // display ticks between text labels
    yAxis = d3.svg.axis() // generate an axis
    .scale(yRange) // set the range of the axis
    .tickSize(5) // width of the ticks
    .orient("left") // have the text labels on the left hand side
    .tickSubdivide(true); // display ticks between text labels
var transition = vis.transition().duration(1000).ease("exp-in-out");

transition.select(".x.axis").call(xAxis);
transition.select(".y.axis").call(yAxis);

vis.append("svg:g") // add a container for the axis
.attr("class", "x axis") // add some classes so we can style it
.attr("transform", "translate(0," + (HEIGHT - MARGINS.bottom) + ")") // move it into position
.call(xAxis); // finally, add the axis to the visualisation

vis.append("svg:g")
    .attr("class", "y axis")
    .attr("transform", "translate(" + (MARGINS.left) + ",0)")
    .call(yAxis);

var circles = vis.selectAll("circle").data(data)
circles.enter()
    .append("svg:circle")
    .attr("cx", function (d) {
    return xRange(d.year);
})
    .attr("cy", function (d) {
    return yRange(d.count);
})
    .style("fill", "red")

circles.transition().duration(1000)
    .attr("cx", function (d) {
    return xRange(d.year);
})
    .attr("cy", function (d) {
    return yRange(d.count);
})
    .attr("r", 10)

circles.exit()
    .transition().duration(1000)
    .attr("r", 10)
    .remove();

} 
```

当使用的数据是

```
 [{"count": "202", "year": "1590"},
 {"count": "215", "year": "1592"},
 {"count": "179", "year": "1593"},
 {"count": "199", "year": "1594"},
 {"count": "134", "year": "1595"},
 {"count": "176", "year": "1596"},
 {"count": "172", "year": "1597"},
 {"count": "161", "year": "1598"},
 {"count": "199", "year": "1599"},
 {"count": "181", "year": "1600"},
 {"count": "157", "year": "1602"},
 {"count": "179", "year": "1603"},
 {"count": "150", "year": "1606"},
 {"count": "187", "year": "1607"},
 {"count": "133", "year": "1608"},
 {"count": "190", "year": "1609"},
 {"count": "175", "year": "1610"},
 {"count": "91", "year": "1611"},
 {"count": "150", "year": "1612"}
] 
```

图表的y轴如下图（从上到下按升序排列） ![在此处输入图像描述](../Images/0583abc80ef47749fdd2457a7efa74d8.png)

当使用的数据是

```
 [{"count": "841", "year": "1590"},
 {"count": "848", "year": "1592"},
 {"count": "579", "year": "1593"},
 {"count": "753", "year": "1594"},
 {"count": "612", "year": "1595"},
 {"count": "740", "year": "1596"},
 {"count": "762", "year": "1597"},
 {"count": "894", "year": "1598"},
 {"count": "937", "year": "1599"},
 {"count": "995", "year": "1600"},
 {"count": "715", "year": "1602"},
 {"count": "786", "year": "1603"},
 {"count": "680", "year": "1606"},
 {"count": "942", "year": "1607"},
 {"count": "525", "year": "1608"},
 {"count": "779", "year": "1609"},
 {"count": "717", "year": "1610"},
 {"count": "421", "year": "1611"},
 {"count": "738", "year": "1612"}
] 
```

图表的y轴如下图所示（从下到上按升序排列） ![在此处输入图像描述](../Images/9f8bd51461c8610a3470f0b6f82f41c6.png)

谁能指出我可能是什么原因以及如何纠正这种行为。 ***更新***

另一个测试数据样本

```
[{"count": "357", "year": "1608"},
            {"count": "375", "year": "1611"},
            {"count": "506", "year": "1606"},
            {"count": "535", "year": "1610"},
            {"count": "551", "year": "1612"},
            {"count": "660", "year": "1597"},
            {"count": "679", "year": "1594"},
            {"count": "689", "year": "1598"},
            {"count": "873", "year": "1595"},
            {"count": "891", "year": "1592"},
            {"count": "990", "year": "1607"},
            {"count": "1031", "year": "1593"},
            {"count": "1038", "year": "1602"},
            {"count": "1064", "year": "1609"},
            {"count": "1264", "year": "1600"},
            {"count": "1357", "year": "1596"},
            {"count": "1616", "year": "1590"},
            {"count": "2299", "year": "1599"},
            {"count": "2559", "year": "1603"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T01:23:16.963

如果您在渲染第一组数据时注意到，**y 轴**看起来不太正确。根据数据，最小值和最大值是`count`，但**y 轴**具有最大值。`91``215`**`130`**

 **这是因为在构建比例和计算最小值和最大值时，这些值将作为字符串进行比较。

要修复它，您需要修改数据数组以在需要时具有数值

```
[{ "count": 202, "year": 1590},
 { "count": 215, "year": 1592} /*....*/] 
```

或者在构建比例时将它们解析为整数`parseInt`- 并且不要忘记将基数传递给`parseInt`.

如果选择后者，只需将您的比例修改为：

```
 /*....*/},
        xRange = d3.scale
                   .linear()
                   .domain([
                      d3.min(data, function(d){ return parseInt(d.year, 10);}),
                      d3.max(data, function(d){ return parseInt(d.year, 10);})
                    ])
                   .range([MARGINS.left, WIDTH - MARGINS.right]),
        yRange = d3.scale
                   .linear()
                   .domain([
                      d3.min(data, function(d){ return parseInt(d.count, 10);}),
                      d3.max(data, function(d){ return parseInt(d.count, 10);})
                    ])
                   .range([HEIGHT - MARGINS.top, MARGINS.bottom]), 
```

这是 JSFiddle：http: [//jsfiddle.net/jaimem/RPGPL/2/](http://jsfiddle.net/jaimem/RPGPL/2/)**

# javascript - 使用 javascript 访问不同页面上的表单元素

> ID：13554230
> 
> 赞同：1
> 
> 时间：2012-11-25T18:47:56.767
> 
> 标签：javascript, forms, action

如果操作转到不同的页面，是否可以使用 javascript 获取表单元素值？以下是说明我正在尝试做的代码片段：

索引.html：

```
<form name="testMe" action="show_music.jsp" method="get">
<p>I am interested in these types of music:</p>
<select id="music" name="music" multiple>
            <option value="classical">Classical</option>
            <option value="christian">Christian</option>
            <option value="alternative">Alternative</option>
            <option value="rock">Rock</option>
            <option value="latin">Latin</option>
            <option value="pop">Pop</option>
            <option value="disco">Disco</option>
            </select> 
```

show_music.jsp

```
<p>Here are the music styles you like: </p>
<script type="text/javascript">
    var e = document.getElementById("music");
    var value = e.options[e.selectedIndex].text;
    alert("Var is: " + value);
</script> 
```

我一直在尝试不同的组合来尝试获取该选择列表的值，但没有运气。甚至可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T18:56:38.937

您无法从元素中获取值，因为它不再存在，但是当表单将数据发送到新页面时，您可以从查询字符串中获取它：

```
var value = querystring("music")[0];
alert("Var is: " + value);

function querystring(key) {
   var re=new RegExp('(?:\\?|&)'+key+'=(.*?)(?=&|$)','gi');
   var r=[], m;
   while ((m=re.exec(document.location.search)) != null) r.push(m[1]);
   return r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:00:34.830

由于您的表单是通过 GET 方法提交的，也许您可​​以尝试以下操作：

```
var params = [];
var split = location.search.replace('?', '').split('&')
for (var i=0; i++; i<split.length) {
    params.push(split[i].split("="));
} 
```

这将为您提供一个列表，其中每个列表项都是另一个列表，其中第一项作为键，第二项作为值。例如， http: [//google.com/?abc=def&xyz=123](http://google.com/?abc=def&xyz=123)

会给出类似的东西：

```
[
    ["abc", "def"],
    ["xyz", "123"],
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:03:44.417

在这种情况下，最好使用服务器端来收集值，因此如果可能，请使用 POST 而不是 GET，使用 JSP（并且您可以轻松地将值传递给 Javascript）：

```
alert('Var is: <%=request.getParameter("music")%>'); 
```

或者，如果您不能/不想使用 POST，请使用一些建议的查询字符串解析

# python - 强制将python模块安装在某个目录中

> ID：13554241
> 
> 赞同：1
> 
> 时间：2012-11-25T18:49:08.437
> 
> 标签：python, module, installation

有什么办法可以强制将python模块安装在以下目录中？`/usr/lib/python2.7`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:20:55.843

这是一种无法回答的问题，但是您可以使用 virtualenv 吗？

[http://www.virtualenv.org/en/latest/](http://www.virtualenv.org/en/latest/)

它使处理多个版本的 Python 和库管理变得非常容易。一旦你习惯了它就很容易使用。

你可以创建一个 Python 2.7 virtualenv 并且 pip/easy_install 会自动安装模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:37:16.417

安装模块：

> sudo pip-2.7 安装guess_language

验证导入和功能：

`> Python2.7`
`>>> import guess_language`
`>>> print guess_language.guessLanguage(u"שלום לכם")`

> 他

# c - 如何使用指针表达式访问 C 中的二维数组的元素？

> ID：13554244
> 
> 赞同：39
> 
> 时间：2012-11-25T18:49:18.783
> 
> 标签：c, pointers, multidimensional-array

我知道对于一维数组 `x=a[i]`相当于`x=*(a+i)`，但是如何使用指针访问二维数组的元素？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-25T18:54:43.647

**总结：**如果你有一个定义为的多维数组`int [][]`，则`x = y[a][b]`等价于`x = *((int *)y + a * NUMBER_OF_COLUMNS + b);`

* * *

**无聊的细节：**

上面的`(int *)`演员`y`值得一些解释，因为它的必要性一开始可能并不直观。要理解为什么它必须在那里，请考虑以下几点：

1.  C/C++ 中的类型化指针算法在通过标量进行加/减/递增/递减时，总是根据类型的大小（以字节为单位**）调整类型化指针值（这是一个地址）。**

2.  多维数组声明的基本*类型（不是元素类型；**变量*类型）是比最终维度少一维的数组类型。

其中后者（＃2）确实需要一个例子来巩固。在下文中，变量`ar1`和`ar2`是等效的声明。

```
int ar1[5][5]; // an array of 5 rows of 5 ints.

typedef int Int5Array[5];  // type is an array of 5 ints
Int5Array ar2[5];          // an array of 5 Int5Arrays. 
```

现在是指针算术部分。就像一个类型化的结构指针可以按结构的大小（以字节为单位）前进一样，数组的整个维度也可以跳过。如果您想到我在上面声明的 ar2 的多维数组，这将更容易理解：

```
int (*arptr)[5] = ar1; // first row, address of ar1[0][0].
++arptr;               // second row, address of ar[1][0]. 
```

所有这一切都随着一个裸指针而消失：

```
int *ptr = ar1; // first row, address of ar1[0][0].
++ptr;          // first row, address of ar1[0][1]. 
```

因此，在对二维数组进行指针运算时，以下方法在获取`[2][2]`多维数组的元素时不起作用：

```
#define NUMBER_OF_COLUMNS   5
int y[5][NUMBER_OF_COLUMNS];
int x = *(y + 2 * NUMBER_OF_COLUMNS + 2); // WRONG 
```

当你记得那`y`是一个数组数组（声明式的）时，原因就很明显了。`(2*5 + 2)`添加定标器的指针算法`y`将添加 12*行*，从而计算和地址等价于`&(y[12])`，这显然是不对的，实际上，要么在编译时抛出一个胖警告，要么完全编译失败。`(int*)y`表达式的强制转换和结果类型基于裸指针 int可以避免这种情况：

```
#define NUMBER_OF_COLUMNS   5
int y[5][NUMBER_OF_COLUMNS];
int x = *((int *)y + 2 * NUMBER_OF_COLUMNS + 2); // Right! 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-11-25T19:29:23.100

# 桌子

在 C 中，二维数组是一系列连续的线（不像在 Pascal 中）。
当我们创建一个 4 行 5 列的整数表时： ![一个 5*4 整数表。](../Images/d72e073e43c80e035192c32a9c7330e9.png)

# 到达元素

我们可以通过以下方式达到元素：

```
int element = table[row-1][column-1]; 
```

但是我们也可以使用以下代码来做到这一点：

```
int element = *(*(table+row-1)+column-1); 
```

在这些示例中`row`，`column`从 1 开始计数，这就是 -1 的原因。
在下面的代码中，您可以测试这两种技术是否正确。在这种情况下，我们从 0 开始计算行和列。

### 例子

```
#include <stdio.h>
#include <stdlib.h>
#define HEIGHT 4
#define WIDTH 5

int main()
{
    int table[HEIGHT][WIDTH] = {1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20};
    int row = 2;
    int column = 2;
    int a = *(*(table+row)+column);
    printf("%d\n",a);//13
    printf("%d\n",table[row][column]);//13
    return 0;
} 
```

# 解释

这是一个双指针算术，因此`table`指向第一行并`*table`指向第一个元素，如果您取消引用它，`**table`则将返回第一个元素的值。`*table`在下面的示例中，您可以看到它`table`指向相同的内存地址。

```
printf("%d\n",table);//2293476
printf("%d\n",*table);//2293476
printf("%d\n",**table);//1 
```

在内存中，表格的所有行都相互跟随。因为`table`如果我们在表中需要的元素所在的位置添加行号，则指向第一行，我们将得到一个指向该行的指针。在这种情况下`*(table+row)`，将包含给定行的第一个元素的地址。现在我们只需要像 一样添加列号`*(table+row)+column`，我们就可以得到给定行和列中元素的地址。如果我们取消引用这个，我们会得到这个元素的确切值。
因此，如果我们从零开始计算行和列，我们可以从表中获取元素，如下所示：

```
int element = *(*(table+row)+column); 
```

# 在记忆中

![内存中的表。](../Images/5e58e0d7a2231054ff6a493260969f60.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-11-25T19:01:20.923

二维数组被视为一维数组的数组。也就是说，二维数组中的每一行都是一维数组。因此给定一个二维数组`A`，

```
int A[m][n]. 
```

一般来说，

```
A[i][j] = *(A[i]+j) 
```

还

```
A[i] = *(A+i) 
```

所以，

```
A[i][j] = *(A[i]+j) = * ( *(A+i)+j). 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-16T08:19:52.390

前面的答案已经解释的很好了，我只是根据我的理解列出指针表达式，并将它们与**arr[i][j]**格式进行比较。

```
二维数组的指针表达式：
    数组名本身是指向第一个子数组的指针，

    arr：
        将是指向第一个子数组的指针，而不是第一个子数组的第一个元素
        数组，根据数组和指针的关系，也表示
        数组本身，

    arr+1：
        将是指向第二个子数组的指针，而不是第一个子数组的第二个元素
        大批，

    *(arr+1) :
        将指向第二个子数组的第一个元素，
        根据数组和指针的关系，它也代表第二个
        子数组，同arr[1]，

    *(arr+1)+2：
        将指向第二个子数组的第三个元素，

    *(*(arr+1)+2)：
        将获得第二个子数组的第三个元素的值，
        与arr[1][2]相同，

```

与二维数组类似，**多维**数组也有类似的表达。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-15T21:38:18.807

一种使用指针访问的实用方法。

```
typedef struct
{
    int  Array[13][2];
} t2DArray;

t2DArray TwoDArray =
{
   { {12,5},{4,8},{3,6},{7,9},{3,2},{3,3},{3,4},{3,5},{3,6},{3,7},{4,0},{5,0},{5,1} }
};

t2DArray *GetArray;

int main()
{
    GetArray = &TwoDArray;
    printf("\n %d\n %d\n %d\n %d\n %d\n %d\n",
    GetArray->Array[0][0], 
    GetArray->Array[0][1], 
    GetArray->Array[1][0], 
    GetArray->Array[1][1], 
    GetArray->Array[2][0], 
    GetArray->Array[2][1]);

    getchar();
    return 0;
} 
```

## 出去

12 5 4 8 3 6

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-20T16:56:53.187

```
#include <iostream>
using namespace std;

int main()
{
   //FOR 1-D ARRAY THROUGH ARRAY
   int brr[5]= {1,2,3,4,5};

   for(int i=0; i<5; i++)
   {
      cout<<"address ["<<i<<"] = "  <<&brr[i]<<" and value = "<<brr[i]<<endl;        
   }

   //FOR 1-D ARRAY THROUGH POINTER
   cout<<endl;  //  endl TO MAKE OUT PUT LOOK CLEAR AND COOL :)
   int (*q)=brr;

   for(int i=0; i<5; i++)
   {
      cout<<"address ["<<i<<"] = "  <<&brr[i]<<" and value = "<<*(q+i)<<endl; //(p[i][j])
   }

   cout<<endl;

   //FOR 2-D ARRAY THROUGH ARRAY        
   int arr[2][3] = {1,2,3,4,5,6};

   for(int i=0; i<2; i++)
   {
      for(int j=0; j<3; j++)
      {
         cout<<"address ["<<i<<"]["<<j<<"] = "  <<&arr[i][j]<<" and value = "<<arr[i][j]<<endl;
      }
   }

   //FOR 2-D ARRAY THROUGH POINTER        
   int (*p)[3]=arr; //  j value we give
   cout<<endl;

   for(int i=0; i<2; i++)
   {
      for(int j=0; j<3; j++)
      {
         cout<<"address ["<<i<<"]["<<j<<"] = "  <<(*(p+i)+j)<<" and value = "<<(*(*(p+i)+j))<<endl; //(p[i][j])
      }
   }
   return 0;
}

==============OUT PUT======================

//FOR 1-D ARRAY THROUGH ARRAY

address [0] = 0x28fed4 and value = 1
address [1] = 0x28fed8 and value = 2
address [2] = 0x28fedc and value = 3
address [3] = 0x28fee0 and value = 4
address [4] = 0x28fee4 and value = 5

//FOR 1-D ARRAY THROUGH POINTER

address [0] = 0x28fed4 and value = 1
address [1] = 0x28fed8 and value = 2
address [2] = 0x28fedc and value = 3
address [3] = 0x28fee0 and value = 4
address [4] = 0x28fee4 and value = 5

//FOR 2-D ARRAY THROUGH ARRAY

address [0][0] = 0x28fee8 and value = 1
address [0][1] = 0x28feec and value = 2
address [0][2] = 0x28fef0 and value = 3
address [1][0] = 0x28fef4 and value = 4
address [1][1] = 0x28fef8 and value = 5
address [1][2] = 0x28fefc and value = 6

//FOR 2-D ARRAY THROUGH POINTER

address [0][0] = 0x28fee8 and value = 1
address [0][1] = 0x28feec and value = 2
address [0][2] = 0x28fef0 and value = 3
address [1][0] = 0x28fef4 and value = 4
address [1][1] = 0x28fef8 and value = 5
address [1][2] = 0x28fefc and value = 6 
```

# workflow - 如何将候选用户列表传递给 alfresco 中的 activiti 工作流任务？

> ID：13554245
> 
> 赞同：8
> 
> 时间：2012-11-25T18:49:25.573
> 
> 标签：workflow, alfresco, activiti

我希望能够将用户列表作为任务的候选人传递。用户是从数据列表中检索的，不能作为组使用。Activiti:candidateUsers 似乎是正确的方法。

假设已经在变量 ipw_reviwers 中获取并设置了用户。

```
<serviceTask id="alfrescoScripttask1" name="Alfresco Script Task" activiti:class="org.alfresco.repo.workflow.activiti.script.AlfrescoScriptDelegate">
  <extensionElements>
    <activiti:field name="script">
      <activiti:string>logger.log("IPW - setup task");
      execution.setVariable('ipw_reviwers', "tom, dick, harry");</activiti:string>
    </activiti:field>
  </extensionElements>
</serviceTask> 
```

以下使用变量 ipw_reviewers

```
<userTask id="adhocTask" name="Adhoc Task" activiti:candidateUsers="${ipw_reviewers}" activiti:formKey="wf:activitiReviewTask">
  <extensionElements>
    <activiti:taskListener event="create" class="org.alfresco.repo.workflow.activiti.tasklistener.ScriptTaskListener">
      <activiti:field name="script">
        <activiti:string>logger.log("IPW - create task");
        if (typeof bpm_workflowDueDate != 'undefined') task.setVariableLocal('bpm_dueDate', bpm_workflowDueDate);
                  if (typeof bpm_workflowPriority != 'undefined') task.priority = bpm_workflowPriority;</activiti:string>
      </activiti:field>
    </activiti:taskListener>
  </extensionElements>
</userTask> 
```

没有人能够看到或声称该任务。如果列表中只有一个用户，则该用户可以申领该任务。

如果 activiti:candidateUsers 被声明为

```
activiti:candidateUsers="tom, dick, harry" 
```

然后所有三个用户都可以认领该任务。

可以将用户列表传递给变量中的 activiti:candidateUsers 还是应该使用不同的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T13:07:53.493

[从http://activiti.org](http://activiti.org)确认问题存在于 activiti 5.10之后，然后从 git repo 中搜索了 activiti 的来源，我搜索了 activiti 论坛。我遇到了**当您想要拥有多个候选用户时，您必须**在此论坛上使用 Collection<String> 变量[http://forums.activiti.org/en/viewtopic.php?f=6&t=3635&p=14187&hilit=候选用户#p14187](http://forums.activiti.org/en/viewtopic.php?f=6&t=3635&p=14187&hilit=candidateuser#p14187)。

我不知道如何从javascript中执行.setVariable a Collection<String> （任何答案？）但使用groovy

```
List<String> users = [ 'tom', 'dick', 'harry'] as String[];
execution.setVariable('ipw_reviewers', users); 
```

允许这个任务

```
<userTask id="mytask" name="My Task" activiti:candidateUsers="${ipw_reviewers}">
</userTask> 
```

根据需要工作。

目前在 Alfresco 中，我使用了 javascript 从数据列表中查找用户列表，并将它们放在一个任务中以逗号分隔的字符串中，然后在 groovy 中执行一个脚本任务，将字符串转换为 List< String> 准备在以下任务中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:43:37.273

如果您查看 Alfresco 中的默认工作流程，例如 review-pooled.bpmn20.xml，那么您会发现它正在使用该`potentialOwner`元素。

工作流程的一个片段：

```
<potentialOwner>
    <resourceAssignmentExpression>
    <formalExpression>${bpm_groupAssignee.properties.authorityName}</formalExpression>
    </resourceAssignmentExpression>
</potentialOwner> 
```

所以它使用 bpm_groupAssignee 方面来启动它。

```
<!--  Submit review to multiple people (as included in a group) -->
      <type name="wf:submitGroupReviewTask">
         <parent></parent>
         <mandatory-aspects>
            <aspect>bpm:groupAssignee</aspect>
         </mandatory-aspects>
      </type> 
```

在您的情况下，您可以根据需要轻松修改`<formalExpression>`标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-20T06:14:04.460

在 Nashorn (JDK8) java 脚本引擎中，为了定义列表并将其设置为变量，脚本任务的以下脚本起作用：

```
var ArrayList = Java.type('java.util.ArrayList');
var list = new ArrayList();
list.add('a');
list.add('b');
list.add('c');
execution.setVariable('list', list); 
```

# javascript - 未捕获的类型错误：对象# has no method 'exec' at file:///android_asset/www/index.html using PhoenGap 2.2.0 Executed \bin\create C:\Temp\Test com.test Test Had following output Microsoft 问问题 问问题 2012-11-25T18:49:49.460 12838 次 This question shows research effort; it is useful and clear 10 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. using PhoenGap 2.2.0 Executed \bin\create C:\Temp\Test com.test Test Had following output Microsoft (R) Windows Script Host Version 5.8 Copyright (C) Microsoft Corporation. All rights reserved. Creating new android project... Building jar and js files... Copying template files... Copying js, jar & config.xml files... Copying cordova command tools... Updating AndroidManifest.xml and Main Activity... Imported Project On eclipse (4.2.0) did File > New > Project > Android > Android Project from Existing Code Selected the folder C:\Temp\Test Checked "Copy project into workspace" Making changes Checked res\xml\config.xml and the line <plugin name="Notification" value="org.apache.cordova.Notification">is present Checked that index.html has the cordova-2.2.0.js included Case#1 Opened index.html and modified from  to  I get following error 11-25 10:29:58.399: E/Web Console(14604): Uncaught TypeError: Cannot call method 'alert' of undefined at file:///android_asset/www/index.html:40 Case#2 Opened index.html and modified from  to  I get following error 11-25 10:25:06.575: E/Web Console(14149): Uncaught TypeError: Object # has no method 'exec' at file:///android_asset/www/index.html:42 } I'm sure that I missed something...just that I'm not able to conclude what is it. Please help me out. This will call showAlert immediately, instead of delaying to when the event fires: document.addEventListener("deviceready", showAlert('You are the winner!'), false) Instead do this document.addEventListener("deviceready", function() { showAlert('You are the winner!') }, false) javascriptandroidcordovaphonegap-plugins 4 1 回答 1 This answer is useful 11 这将showAlert立即调用，而不是延迟到事件触发时： document.addEventListener("deviceready", showAlert('You are the winner!'), false) 而是这样做 document.addEventListener("deviceready", function() { showAlert('You are the winner!') }, false) 于 2012-11-25T22:43:52.553 回答 Related 1 jsoup - 请帮我修复断管错误 2 ruby-on-rails-3 - Rails 3 嵌套部分、集合、局部变量（Rails 教程第 2 版：第 10 章，练习 5） 1 javascript - 如何使用 WebGL drawElements 偏移量？ 1 java - 如何将数据从不同的类添加到 jtable？ 1 mysql - Rails 和预先存在的 MySQL 数据库：有没有一种简单的方法可以将数据库结构集成到 Active Record 中？ 3 java - 为什么 NetBeans 总是想在我的 Maven 项目上运行“启动构建”？ 2 java - 在 JButton 子项中实现 ActionListener 4 javascript - 使用jQuery将对象插入到innerHTML之前的其他对象中 2 c# - 在 XNA 和 C# 中使用摩擦 3 android - 三星 Galaxy Note 模拟器 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13554251
> 
> 赞同：10
> 
> 时间：
> 
> 标签：javascript, android, cordova, phonegap-plugins

*   using PhoenGap 2.2.0
*   Executed \bin\create C:\Temp\Test com.test Test
*   Had following output

> Microsoft (R) Windows Script Host Version 5.8 Copyright (C) Microsoft Corporation. All rights reserved.

```
Creating new android project...
Building jar and js files...
Copying template files...
Copying js, jar & config.xml files...
Copying cordova command tools...
Updating AndroidManifest.xml and Main Activity... 
```

*   Imported Project
*   *   On eclipse (4.2.0) did
*   *   File > New > Project > Android > Android Project from Existing Code
*   *   Selected the folder C:\Temp\Test
*   *   Checked "Copy project into workspace"
*   Making changes
*   *   Checked res\xml\config.xml and the line `<plugin name="Notification" value="org.apache.cordova.Notification"/>` is present
*   *   Checked that index.html has the cordova-2.2.0.js included
*   *   Case#1 Opened index.html and modified from

`<script type="text/javascript"> app.initialize(); </script>`

to

```
<script type="text/javascript">
function showAlert(msg){
navigator.notification.alert(msg);
}
document.addEventListener("deviceready", showAlert('You are the winner!'), false);
app.initialize();
</script> 
```

I get following error `11-25 10:29:58.399: E/Web Console(14604): Uncaught TypeError: Cannot call method 'alert' of undefined at file:///android_asset/www/index.html:40`

*   *   Case#2 Opened index.html and modified from

`<script type="text/javascript"> app.initialize(); </script>`

to

```
<script type="text/javascript">
function successAlert(){}
function errorAlert(){}
function showAlert(msg){
cordova.exec(successAlert, errorAlert, "Notification","alert", [msg]);
}
document.addEventListener("deviceready", showAlert('You are the winner!'), false);
app.initialize();
</script> 
```

I get following error `11-25 10:25:06.575: E/Web Console(14149): Uncaught TypeError: Object #<Object> has no method 'exec' at file:///android_asset/www/index.html:42` }

I'm sure that I missed something...just that I'm not able to conclude what is it. Please help me out.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T22:43:52.553

这将`showAlert`立即调用，而不是延迟到事件触发时：

```
document.addEventListener("deviceready", showAlert('You are the winner!'), false) 
```

而是这样做

```
document.addEventListener("deviceready", function() {
    showAlert('You are the winner!')
}, false) 
```</plugin>

# raytracing - 光线追踪器中的光线生成计算

> ID：13554252
> 
> 赞同：1
> 
> 时间：2012-11-25T18:49:50.493
> 
> 标签：raytracing

我正在实现一个基本的光线追踪器，所以我正在阅读理论和其他实现。这是我目前所指的代码

```
 template<typename T>
void render(const std::vector<Sphere<T> *> &spheres)
{
    int width = 800, height = 800;//define width and height of the screen
    Vector3d<T> *image = new Vector3d<T>[width * height], *pixel = image;
    T invWidth = 1 / T(width), invHeight = 1 / T(height);
    T fov = 90, aspectratio = width / T(height);//defining field of view angle and aspect ratio
    T fovDist = tan(M_PI * 0.5 * fov / T(180));//Calculates half screen width / perpendicular distance to the camer
a position
    // For each ray crossing a pixel on the view screen.
    for (int y = 0; y < height; ++y) //For each scan line
    {
        for (int x = 0; x < width; ++x, ++pixel) //for each pixel on a scan line
        {
            //Calculate the x position using centre of the pixel. 
           /*By simple trig (width/2)/perpendicular distance to camera = tan (fov/2)
             =>width = distance * tan (fov/2)

           */
            T xx = (2 * ((x + 0.5) * invWidth) - 1) * fovDist * aspectratio;
            T yy = (1 - 2 * ((y + 0.5) * invHeight)) * fovDist;//Calculate the y position
            Vector3d<T> raydir(xx, yy, -1);
            raydir.normalize();
            *pixel = trace(Vector3d<T>(0), raydir, spheres, 0);
        }
    } 
```

我正在对我理解的内容发表评论，但我被困在 xx 和 yy 的计算上。

我知道通过简单的三角函数宽度 = 2 *（从相机到视图平面的垂直距离）* tan（fov / 2）。但我无法弄清楚 T xx 和 T yy 的表达式。

请有人帮忙澄清一下。

问候，莫伊拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:30:04.073

好的，所以如果我理解这一点，您的框架与 XY 平面平行，并且位于 Z=-1，您的相机/眼睛位于原点。现在您正试图找到每个像素中心的 X 和 Y 位置。是对的吗？

所以`x + 0.5`将你偏移到当前像素的中心，这很好。除以整个像素的总数，就可以得出整个帧的百分比：好。乘以 2，然后减去 1，您在 -1 到 1 的范围内，分别对应于从中心到左侧的 100% 和从中心到右侧的 100%（或反之亦然） - 反之亦然）。现在乘以宽度的一半 (fovDist)，因此它会将您置于左侧二分之一宽度和右侧二分之一宽度之间的某个位置。所以这一切都很好。最后，你乘以纵横比，因为 fovDist 实际上是高度的一半，而不是 necc。宽度的一半。所以如果你的纵横比是 2:1，它应该比它的高更宽，所以你想要水平地分散你的像素，所以你也很好。

你已经以同样的方式设置了 yy，除了倒置，因为扫描线通常是相反的。所以看起来也不错。

那么它有效吗？你只是想理解它吗？或者它不能正常工作？如果它不能正常工作，你会看到什么样的行为？

如果它不能正常工作，我唯一能想到的就是所有不同的数字类型。例如，您的`invWidth`和`invHeight`变量都将整数 1 除以某物。我不记得 C++ 是如何处理这个问题的，但有可能你在这里被整数除法截断为 0。同样，您的 xx 和 yy 表达式中有很多整数。不确定编译器是否能正常工作，但如果它不能正常工作，我会从那里开始。

# sql - 大表中各行之间的时间差

> ID：13554258
> 
> 赞同：0
> 
> 时间：2012-11-25T18:50:42.510
> 
> 标签：sql, postgresql, bigdata

我有一个巨大的用户事务的 sql 表（超过 10 亿）。
我想添加一个二进制列，它表示当前 user_id 行是否比前一个行短 40 分钟。

例如：

```
user_id | date                
--------+--------------------
1       | 2011-01-01 12:15:00
1       | 2011-01-01 12:00:00
8       | 2011-01-01 15:00:00
8       | 2011-01-01 14:00:00 
```

查询的结果是：

```
user_id | date                | new
--------+---------------------+----
1       | 2011-01-01 12:15:00 | 0
1       | 2011-01-01 12:00:00 | 1
8       | 2011-01-01 15:00:00 | 1
8       | 2011-01-01 14:00:00 | 1 
```

我想避免将整个表连接到自身，并且可能使用边表或分析函数（过度分区）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:46:19.223

```
select user_id,
       date,
       case
          when date - lag(date) over (partition by user_id order by date) > interval '40' minute then 1
          else 0
       end as diff_flag
from the_table
order by user_id, date 
```

它假定这`date`是一个时间戳列，尽管它的名称。

这是我能看到的唯一方式。(user_id, date) 上的索引可能会加快速度 - 特别是在 9.2 上，这可能符合仅索引扫描的条件。但这**将**扫描整个表（或者可能只有 9.2 上的索引）

顺便说一句：用保留字 ( ) 命名列不是一个好主意`date`。此外`date`，从文档的角度来看，这是一个非常糟糕的名称。

# android - 如何在操作栏中创建微调器操作项

> ID：13554263
> 
> 赞同：0
> 
> 时间：2012-11-25T18:51:09.003
> 
> 标签：android, android-layout

任何人都知道如何使用屏幕截图中的单选按钮创建子菜单？ ![在此处输入图像描述](../Images/baaf0a4398cacaf87a4119f9270e3a6b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:11:04.417

如果你想要一个带有可检查单选按钮的子菜单，你应该使用类似的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <group android:checkableBehavior="single">
        <item android:id="@+id/red"
              android:title="@string/red" />
        <item android:id="@+id/blue"
              android:title="@string/blue" />
    </group>
</menu> 
```

然后在代码中：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.red:
            return true;
        case R.id.blue:
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# jquery - Twitter Bootstrap Modal：使宽度和高度与用户的最大分辨率大小相同

> ID：13554270
> 
> 赞同：2
> 
> 时间：2012-11-25T18:51:52.560
> 
> 标签：jquery, css, twitter-bootstrap

如果单击“启动演示模式”按钮：

[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

我希望该模式与用户的分辨率具有相同的宽度和高度。换句话说，用户显示器支持的最大尺寸。我还希望模态框位于文档的左上角。

我可以像这样手动设置宽度和高度属性：

```
.modal {
  top: 0 !important;
  left: 0 !important;
  width: 1335px;
  height: 900px;
} 
```

但这些都是针对我的决议的。如何设置它以适用于每个用户的唯一分辨率？

另外 top: 0 和 left: 0 规则似乎不起作用。模态显示在顶部被切断，也不是一直到左边。

## 编辑

愚蠢的我，引导 css 在模态类上有一些默认的负边距。这有效：

```
.modal {
  top: 0;
  left: 0;
  width: 100%;
  margin: 0;
} 
```

将使用 jquery 设置高度以获取视口高度并将其设置为内联样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:48:20.420

在纯 CSS 中

```
.modal {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 100%;
  left: 0;
  margin: 0;
  width: 100%;
  height: 100%;
}
.modal-body {
  max-height: 100%;
}
.modal.fade.in {
  top: 0;
} 
```

对我有用（在 Chrome、FF 和 Opera 中测试）打开效果仍然是 ..

# javafx-2 - 被 JavaFX ListChangeListener.Change 弄糊涂了

> ID：13554274
> 
> 赞同：0
> 
> 时间：2012-11-25T18:52:56.140
> 
> 标签：javafx-2

我对 JavaFX 中 ListChangeListener.Change 中的术语感到困惑。我有一个可观察的列表并`set(index,newValue)`在列表中调用。

在由此产生的变化中，我观察到以下变化属性：

```
wasRemoved() == true
wasReplaced() == false
wasUpdated() == false 
```

值得庆幸的是，getAddedSublist() 包含新值，但我希望 wasReplaced 或 wasUpdated 为真。

这两个领域会发生什么变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T23:44:01.750

我自己的愚蠢错误。我从 Javadocs 复制了示例并添加了几个 else if 块，例如

```
if(change.wasAdded()) {
  //doAdd
} else if (change.wasRemoved()) {
  //doRemove
} else if (change.wasReplaced()) {
  //doReplace
} 
```

doReplace() 从未被调用，因为它是一个 else if 而不是 if。感谢@ftkg 的建议让我来到这里。

# sql - SQL 很棘手的程序

> ID：13554275
> 
> 赞同：1
> 
> 时间：2012-11-25T18:53:04.037
> 
> 标签：sql, database, oracle, procedure

我现在对这个测验有点着迷，似乎我找不到出路……嘿嘿。

让我们看看 - 我们有两个表：

*   **演员**( `id, salary, bonus`)
*   **信息**( `id, name, surname`)

问题是，要创建一个程序，以便显示`salary, bonus, name, surname`演员以及他的最终薪水 = ( `bonus + salary`) 。

首先，我尝试了这个：（只是为了显示`salary, bonus, name, surname`而不是总薪水，但它失败了很多次）。

```
create or replace procedure show_things AS
BEGIN 
   Select a.id, a.salary, a.bonus 
   From actor a
   where  a.id in 
               (select i_id, i.name, i.surname 
                from info i 
                where i_id = a_id);
END; 
```

我的意思是，是否可以使用程序来展示事物？我真的无法理解这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:58:15.320

这是一个简单的连接：

```
SELECT
     a.id,
     a.salary,
     a.bonus,
     i.name,
     i.surname,
     a.salary + a.bonus AS final_paycheck
FROM 
     actor a INNER JOIN info i
ON 
     a.id= i.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:17:23.280

您的程序不会按原样编译。您将（至少）需要定义一些局部变量，并使用`INTO`子句选择它们。

`dbms_output.put_line()`然后，假设您已`SERVEROUTPUT`打开，您可以使用 输出您的过程的结果。

此外，您不能使用`IN`列数 (1) 与其引用的子查询 (3) 中的列数不同的运算符。`JOIN`您应该像其他人建议的那样使用简单的。

请参阅[PL/SQL 文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/overview.htm#BABHFEHA "PL/SQL 文档")中的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:29:12.697

我真的不知道您使用的是哪个版本的 SQL，但本质上，您将希望连接两个表并从中查询，如下所示：

```
SELECT
     actor.salary,
     actor.bonus,
     info.name,
     info.surname,
     actor.salary + actor.bonus AS total_pay
FROM actor INNER JOIN info; 
```

完毕 ：-）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-06T06:48:01.650

您可以使用管道功能来实现这一点。

```
--    drop type t_actor_tab;
--    drop type t_actor_obj;
--    drop function get_actor_ptf;
--    drop table ACTOR;
--    drop table info;

CREATE TABLE ACTOR(ID NUMBER, SAL NUMBER, BONUS NUMBER);
INSERT INTO ACTOR(ID, SAL, BONUS) VALUES(1, 1200, 120);
INSERT INTO ACTOR(ID, SAL, BONUS) VALUES(2, 1300, 240);
INSERT INTO ACTOR(ID, SAL, BONUS) VALUES(3, 1500, 120);

CREATE TABLE INFO(ID NUMBER, NAME VARCHAR2(30), SURNAME VARCHAR2(30));
INSERT INTO INFO(ID, NAME, SURNAME) VALUES(1, 'ABC', 'abc');
INSERT INTO INFO(ID, NAME, SURNAME) VALUES(2, 'xyz', 'xyz');
INSERT INTO INFO(ID, NAME, SURNAME) VALUES(3, 'MNO', 'mno');

CREATE TYPE t_actor_obj AS OBJECT (
      id           NUMBER
     ,sal       NUMBER
     ,bonus        NUMBER
     ,final_paycheck NUMBER
    );  

CREATE TYPE t_actor_tab IS TABLE OF t_actor_obj;

CREATE OR REPLACE FUNCTION get_actor_ptf 
    RETURN t_actor_tab PIPELINED AS

    CURSOR get_details_cur
    IS 
     SELECT a.id
           ,a.sal
           ,a.bonus
           ,(a.sal+a.bonus) final_paycheck
    From actor a
    where  EXISTS(SELECT 1 FROM info i WHERE i.id = a.id);

   v_details_row  get_details_cur%ROWTYPE;
    BEGIN
      OPEN get_details_cur;
      LOOP
        FETCH get_details_cur INTO v_details_row;
        EXIT WHEN get_details_cur%NOTFOUND;
           PIPE ROW(t_actor_obj (v_details_row.id,v_details_row.sal,v_details_row.bonus,v_details_row.final_paycheck));   
      END LOOP;
      CLOSE get_details_cur;

      RETURN;
    END;
    /

 SELECT * FROM   TABLE(get_actor_ptf);

        ID        SAL      BONUS FINAL_PAYCHECK
 ---------- ---------- ---------- --------------
     1       1200        120           1320 
     2       1300        240           1540 
     3       1500        120           1620 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-06T05:34:56.367

```
CREATE TABLE ACTOR(ID BIGINT, SAL BIGINT, BONUS BIGINT);
INSERT INTO ACTOR(ID, SAL, BONUS) VALUES(1, 1200, 120), (2, 1300, 240),(3, 1500, 120);

CREATE TABLE INFO(ID BIGINT, NAME VARCHAR(30), SURNAME VARCHAR(30));
INSERT INTO INFO(ID, NAME, SURNAME) VALUES(1, 'ABC', 'abc'), (2, 'xyz', 'xyz'), (3, 'MNO', 'mno')

SELECT * FROM ACTOR
SELECT * FROM INFO

CREATE OR REPLACE PROCEDURE SP1()
LANGUAGE SQL
DYNAMIC RESULT SETS 1
BEGIN

DECLARE DISPLAY CURSOR WITH RETURN FOR
SELECT X.ID, Y.NAME, Y.SURNAME, X.SAL, X.BONUS, X.SAL + X. BONUS AS TOTAL FROM ACTOR X JOIN INFO Y ON X.ID = Y. ID ;
OPEN DISPLAY;

END@ 
```

**调用 SP1()**

# pascal - read() 可变长度字符串

> ID：13554276
> 
> 赞同：0
> 
> 时间：2012-11-25T18:53:08.333
> 
> 标签：pascal, freepascal

我有两个值的行（来自控制台的输入），看起来像这样：

```
David 89000
Peter 99500
Jim 23999
END 1 
```

当您不知道字符串长度时，有没有办法将字符串和数字保存到变量中，而不是循环读取字符？

```
 str:=''; salary:=0; i:=1;
  while str<> 'END' do
  begin
    str:='';  salary:=0;
    read(ch);
    while ch <> ' ' do
      begin
        str:=str+ch;
        read(ch);
      end;
    read(salary);

    array[i].name:=str;
    array[i].salary:=salary;
    i:=i+1;
    readln;
  end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:05:30.883

您可以通过一次调用来完成`ReadLn`，然后自己解析输入：

```
var
  TextIn: string;
  Person: string;
  Salary: Integer;
begin
  while true do
  begin
    ReadLn(TextIn);  // Requires user to hit Enter
    if Copy(TextIn, 1, 3) <> 'END' then
    begin
      Person := Copy(TextIn, 1, Pos(' ', TextIn) - 1);
      Salary := StrToInt(Copy(TextIn, Pos(' ', TextIn) + 1, 255);
    end
    else
      Exit;
  end;
end; 
```

我没有包括任何错误检查（应该在那里），因为您的原始代码也没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:22:42.673

不适用于标准 I/O 功能。当然，您可以将该代码放在单独的过程中，或与 tstringlist 分开。

# c# - SQL 组合

> ID：13554279
> 
> 赞同：0
> 
> 时间：2012-11-25T18:53:19.480
> 
> 标签：c#, sql

我有一个表，其中包含相同 ID 的多个数据。我需要对这些数据进行组合。

例如这个表包含

```
ID    Visit DAte       Visit number    Rational 
-----------------------------------------------
1     14/05/2011           1           new
1     15/06/2012           2           Emergency 
1     17/07/2012           3           Check-Up 
```

最多 20 次访问

我想要的结果是这样的

```
ID    Visit DAte       Visit number    Rational 
-------------------------------------------------
1     14/05/2011           1           new
1     15/06/2012           2           Emergency 
1     17/07/2012           3           Check-Up

1     14/05/2011           1           new
1     15/06/2012           2           Emergency 
1     19/07/2012           4           follwo-up

1     14/05/2011           1           new
1     15/06/2012           2           Emergency 
1     18/12/2012           5           Check-Up

etc.... 
```

最后一个将是

```
1     14/01/2011           18          Referral 
1     15/02/2012           19          Check-up
1     18/10/2012           20          Emergency 
```

我可以通过查询来做到这一点吗？

//-- 我定义了一个类并从该类中定义了一个列表

```
public struct ACVsize5
{
    public int ID;
    public DateTime date;
    public int RaId;
    public int HpId;
    public int DgId;
    public int VisitNum;
}

List<ACVsize5> patient = new List<ACVsize5>(); 
```

我使用了这个查询，但是这个选择了两个值，但我需要得到 3 个或更多

```
var query = patient.SelectMany((value, index) => patient.Skip(index + 1),
                          (first,second) => new { first, second }); 
```

// - 编辑

我必须检查一名患者的组合以将其与其他 4 名患者相匹配

我想出了生成第一个组合，如果它匹配我继续生成其余的但是这个操作需要很长时间我如何提高下面代码的性能？

```
for (int j = 0; j < 10000; j++)
        {

            int id1 = getid(names[j].ToString(), 10000);

            for (int t = 0; t < 10000; t++)
            {
                generate_firstACV5A(id1, nvisit(id1), names[j].ToString());

                int id2 = getid(names[t].ToString(), 10000);
                if (id1 == id2) { }
                else
                {
                    generate_firstACV5B(id2, nvisit(id2), names[t].ToString());

if (comparefirst()==true)
                    {

if (count == 0)
                        {
                            safecount++;
                            if (safecount == 4) break;
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:46:17.523

这是一些将生成 3 个集合的示例代码。我不知道如果你让它处理查询，但如果你在本地将它作为对象，ORM 将如何处理它。

```
var queried = ... // example:  Enumerable.Range(1, 20).Select(n => new { FK = n });

var sets =
    from a in queried
    from b in queried
    from c in queried
    where a.FK < b.FK && b.FK < c.FK
    select new { a, b, c }; 
```

使用您的代码：

```
List<ACVsize5> patient = ... // filled by you but I assume a single unique ID

var sets =
    from a in patient
    from b in patient
    from c in patient
    where a.VisitNum < b.VisitNum && b.VisitNum < c.VisitNum
    select new {a, b, c} 
```

# python - Python 和终端 - 带有特殊字符的字符串

> ID：13554283
> 
> 赞同：0
> 
> 时间：2012-11-25T18:54:03.493
> 
> 标签：python

我知道 Python 的东西，如果我使用交互式解释器并且我编写`'\\ '`它会打印`'\\ '`，但如果我编写`print '\\ '`它会打印`'\ '`。

我想要做的是（在一个名为 的脚本中`p.py`）：

```
import os
os.system('echo ' + 'string with spaces'.replace(' ', '\ ')) 
```

显然它不会让我这样做。我的意思是，Python 设法添加了两个反斜杠而不是一个，但我认为它只在交互模式下这样做，但是终端在传递特殊字符`\`时会忽略它们。

因此，作为 provious 代码的输出，我得到：

```
local:$ string with spaces 
```

并不是

```
local:$ string\ with\ spaces 
```

我已经尝试过硬编码字符串和 Python 中的所有其他内容，但我想问题出在 shell 字符串上。

我怎么能解决这个问题？

它可以帮助找到替代解决方案，我正在尝试使用`mv`命令从 python 移动文件，并且该文件的名称中有空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T18:56:48.047

```
os.system('echo ' + 'string with spaces'.replace(' ', '\ ')) 
```

在该行中，最后一个字符串`'\ '`将尝试转义一个空格，即使这不是转义序列。如果您希望它成为带有前一个退格的空格，您可以转义退格 ( `'\\ '`)，或者您可以使用将忽略所有转义序列 ( `r'\ '`) 的原始字符串。

# kohana - Kohana ORM - 重复的实例/数据库条目

> ID：13554286
> 
> 赞同：0
> 
> 时间：2012-11-25T18:54:28.280
> 
> 标签：kohana, kohana-3, kohana-orm, kohana-db

我想“复制”一个 ORM 对象，然后将其保存到数据库中（使用新的主键），但我无法取消设置复制对象的主键。

```
 $orm1 = new Model1($id);
    if($orm1->loaded()) {
     $orm2 = $orm1;
     $orm2->id = null; //something like this?
     unset($orm2->_primary_key); //or like this?
     $orm2->save(); //I would like to create a new entry in the db but it doesn't work
    } 
```

我希望我足够清楚......基本上，我怎样才能在数据库中“再次保存”一个模型......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T10:42:55.487

You need to copy ORM data from one model to another:

```
// save current data
$data = $orm1->as_array();
$orm2 = new Model1();
$orm2->values($data);
$orm2->save(); 
```

This example uses separate ORM objects. You can load values back to `$orm1`, but don't forget to call `$orm1->clear()` before `$orm1->values($data)`. This resets the model to its unloaded state.

Note that `as_array` will also return `belongs_to` relationships.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T03:56:42.263

你可能想试试这个：

```
// Reset primary key
$this->_primary_key_value = NULL; 
```

不要忘记对象克隆：[对象克隆](http://php.net/manual/en/language.oop5.cloning.php)

# android - OrmLite 数据库操作应该发生在主线程中吗？

> ID：13554289
> 
> 赞同：5
> 
> 时间：2012-11-25T18:54:39.113
> 
> 标签：android, orm, ormlite

从[这里](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase%28%29)的 Android 文档中提到，当您调用时，`getWritableDatabase()`或者`getReadableDatabase()`您应该始终在后台线程上进行操作。

我将 OrmLite 用于我的应用程序，当我调用它时，我`getHelper()`会从 UI/主线程调用它。

我也`StrictMode`为我的应用程序启用了，我不记得在 logcat 中看到警告。

使用它的首选方式是什么？诸如`insert`或`update`在我的`Dao`对象中的任何 SQL 操作呢？它们应该发生在后台线程中吗？

# jenkins - Jenkins SCM 轮询 - 每两周一次（每两周一次）

> ID：13554293
> 
> 赞同：3
> 
> 时间：2012-11-25T18:55:06.240
> 
> 标签：jenkins

目前我正在轮询 SCM

`H H(0-8) * * 5`

我的意思是：周五午夜到早上 8 点之间进行投票。

我想要的是每隔一个星期五进行一次投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-02-12T14:27:22.450

接受的答案在 Jenkins 中不起作用：

> 无效输入：“0 0-8 * * 5/2”：第 1:12 行：意外令牌：/

所以看看[这个答案](https://stackoverflow.com/a/33788028/3890673)（如果有帮助，请投票）：

`H H 8-14,22-28 * 5`

“如果那个星期五恰好在一个月的第 8-14 天或第 22-28 天之间，则在每个星期五（=第 5 天，请参阅[此处](https://stackoverflow.com/a/18919183/3890673)）的某个小时和某分钟（请参阅[此处](https://stackoverflow.com/a/47302727/3890673)了解 的含义）运行。” 在我当地的 Jenkins 中看起来不错，在 1 月 31 日跳过跑步：`H`

> 最后运行时间为 UTC 时间 2020 年 1 月 24 日星期五上午 12:39:59；下次运行时间为 2020 年 2 月 14 日星期五 12:39:59 AM UTC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:35:52.210

我没有在 Jenkins 中尝试过，但我相信正常的 cron 语法是：`0 0-8 * * 5/2`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-29T22:45:32.823

以下语句可帮助您每两周在周五上午 08:00 运行一次。

```
00 08 */2 * 5 
```

# php - 放置在哪里以及如何访问 MySQL 和 PHP 的 db_connect 信息

> ID：13554297
> 
> 赞同：0
> 
> 时间：2012-11-25T18:55:39.647
> 
> 标签：php, mysql, security, connection

我正在做一个需要让用户登录到 MySQL 数据库的项目。我正在制作一个身份验证系统（auth/user 表及其姓名、电子邮件、散列密码等、php 会话），它比我意识到的要多，但我正在通过它。不过，我对与数据库的初始连接有点困惑。我已阅读以将其保留在站点[的文档根目录之外](https://stackoverflow.com/questions/2348789/where-is-the-most-secure-place-to-put-mysql-connection-details-for-php)，我可以这样做，但不确定如何引用它。这是我的想法：

站点的文档根目录：

**/var/www/public/example.com/public/** {index.html,css,img,etc}

我可以在这里安全地放置 db_connect 信息吗：

**/var/www/public/example.com/private/securephpfunctions.php** _

然后我会在我的所有 php 文件中有一行：

```
<?php
// include in all files that need to do stuff
require_once('examplecom_fns.php'); 
?> 
```

里面 examplecom_fns.php 是：

```
<?php
// include in all files
require_once('/var/www/public/example.com/private/securephpfunctions.php');
require_once('forms_fns.php');
require_once('outputs_fns.php');
?> 
```

在此之后，我假设我可以调用我的数据库连接函数将新用户信息插入数据库，用于未登录的用户搜索公共条目等。这是正确的吗？有没有更好或更安全的方法来做我正在尝试的事情？我离基地很远吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:54:25.590

您可以使用以下内容引用您的文档根目录：

```
$_ENV['document_root']; 
```

然后，通过添加相对路径，您可以获得您的私有路径：

```
realpath($_ENV['document_root'] . '../private'); 
```

然后添加您的私有配置文件的名称：

```
realpath($_ENV['document_root'] . '../private/securephpfunctions.php'); 
```

# windows-phone-7 - WP7 & WP8 兼容性

> ID：13554300
> 
> 赞同：0
> 
> 时间：2012-11-25T18:55:47.220
> 
> 标签：windows-phone-7, windows-phone-8

对于 WP7 和新 WP8 之间的兼容性问题，我找不到直接的答案。

例如：如果一些流行的应用程序，如facebook、twitter 将更新到WP8 怎么办？他们还会在 WP7 (7.8) 上工作吗？或者最新的 WP7 兼容版本将保留在市场中供 WP7 用户使用，而新的 WP8 将仅适用于 WP8 用户？

我之所以这么问，是因为很多朋友有兴趣以优惠的价格购买 Lumia 800，但他们担心未来的应用数量有限。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:29:12.243

```
The latest WP7-compatible version will stay in Marketplace for WP7 users 
```

确切地。即使 WP8 版本已经发布，开发者也可以继续更新应用程序的 WP7 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:18:13.267

如果一个应用程序是为 Windows Phone 8 编译的，它将不能在 Windows Phone 7.x 上运行。

# java - 如何在 Java 中声明一个无限大小/动态的字节数组？

> ID：13554302
> 
> 赞同：12
> 
> 时间：2012-11-25T18:55:56.790
> 
> 标签：java, bytearray

我正在声明一个大小未知的字节数组，因为它不断更新，那么我如何声明无限大小/可变大小的字节数组？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T18:58:14.300

您不能声明一个无限大小的数组，因为这需要无限的内存。此外，所有分配调用都处理数字，而不是无限量。

您可以分配一个按需调整大小的字节缓冲区。我相信最简单的选择是[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html).

[`ByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)有一个 API 可以更轻松地操作缓冲区，但您必须自己构建调整大小功能。最简单的方法是分配一个新的、更大的数组，复制旧的内容，然后用新的缓冲区交换旧的。

其他答案已经提到使用`List<Byte>`某种。值得注意的是，如果你创建了一堆`new Byte()`对象，你会显着增加内存消耗。 `Byte.valueOf`回避了这个问题，但您必须确保在整个代码中始终使用它。如果您打算在许多地方使用此列表，我可能会考虑编写一个简单的`List`装饰器来实习所有元素。例如：

```
public class InterningList extends AbstractList<Byte>
{
    ...
    @Override
    public boolean add(Byte b) {
        return super.add(Byte.valueOf(b));
    }
    ...
} 
```

这不是一个完整的（甚至是经过测试的）示例，只是一个开始......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-25T18:57:30.630

Java 中的数组不是动态的。您可以改用列表。

```
List<Byte> list = new ArrayList<Byte>(); 
```

由于自动装箱功能，您可以自由地将字节对象或原始字节添加到此列表中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-27T10:58:56.150

要定义不同长度的字节数组，只需使用 apache`commons.io.IOUtils`库而不是像分配手动长度一样

```
byte[] b=new byte[50]; 
```

您可以将输入流传递给`IOUtils`函数，该函数将对此输入流执行读取函数，因此字节数组将根据需要具有精确的字节长度。前任。

```
byte[] b = IOUtils.toByteArray(inpustream); 
```

混乱..

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-26T17:26:36.573

[ByteArrayOutputStream](http://docs.oracle.com/javase/8/docs/api/java/io/ByteArrayOutputStream.html)将允许写入动态字节数组。但是，无法使用移除、替换和插入等方法。必须提取字节数组，然后直接对其进行操作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-25T18:58:01.747

最好的选择是使用 ArrayList。当你填充它时它会调整大小。

`List<Byte> array = new ArrayList<Byte>();`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-25T19:03:06.103

显而易见的解决方案是使用 ArrayList。

但如果您需要性能或内存受限，这是一个糟糕的解决方案，因为它实际上存储的不是字节而是字节（即对象）。

对于任何实际应用程序，答案很简单：您必须自己管理字节数组，通过使用使其在必要时增长的方法。如果需要，您可以将其嵌入到特定的类中：

```
public class AlmostInfiniteByteArray {

    private byte[] array;
    private int size;

    public AlmostInfiniteByteArray(int cap) {
        array = new byte[cap];
            size = 0;
    }

    public int get(int pos) {
        if (pos>=size) throw new ArrayIndexOutOfBoundsException();
        return array[pos];
    }

    public void set(int pos, byte val) {
        if (pos>=size) {
            if (pos>=array.length) {
                byte[] newarray = new byte[(pos+1)*5/4];
                System.arraycopy(array, 0, newarray, 0, size);
                array = newarray;
            }
            size = pos+1;
        }
        array[pos] = val;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-25T19:36:27.517

我会稍微调整其他人的答案。

创建一个 LargeByteArray 类来管理您的数组。无论您需要什么，它都会有 get 和 set 方法等。

在幕后，该类将使用 long 来保存当前长度并使用 ArrayList 来存储数组的内容。

我会选择在 ArrayList 中存储 byte[8192] 或 byte[16384] 数组。这将在浪费的大小方面进行合理的权衡，并减少调整大小的需要。

您甚至可以使数组“稀疏”，即仅在该框中存储非零值时才分配 list.get(index/8192) 条目。

在某些情况下，这样的结构可以为您提供更多的存储空间。

您可以使用的另一种策略是在写入后压缩 byte[] 框并在读取前解压缩（使用 LRU 缓存进行读取），这可以允许存储两倍或更多可用内存...尽管这取决于压缩策略。

之后，您可以查看将一些框分页到磁盘...

这与我可以得到的无限数组一样接近；-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-11T22:15:05.827

正如 Prashant 已经说过的，您可以从一块使用 IOUtils。

这是可以解决任务的一小部分（您将需要 IOUtils.toByteArray）：

```
public class IOUtils {

private static final int DEFAULT_BUFFER_SIZE = 1024 * 4;

public static byte[] toByteArray(InputStream input) throws IOException {
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    copy(input, output);
    return output.toByteArray();
}

public static int copy(InputStream input, OutputStream output)
        throws IOException {
    long count = copyLarge(input, output);
    if (count > Integer.MAX_VALUE) {
        return -1;
    }
    return (int) count;
}

public static long copyLarge(InputStream input, OutputStream output)
        throws IOException {
    byte[] buffer = new byte[DEFAULT_BUFFER_SIZE];
    long count = 0;
    int n = 0;
    while (-1 != (n = input.read(buffer))) {
        output.write(buffer, 0, n);
        count += n;
    }

    return count;

}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-25T18:58:55.630

使用[List](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)的任何子类型的[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)

List 的不同实现可以让你在列表上做不同的事情（例如不同的遍历策略，不同的性能等）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-25T19:01:25.660

ArrayList 的初始容量为 10。您可以通过 ArrayList(5000) 更改它。ArrayList 将在需要时将其大小加倍（它将创建新数组并将旧数组复制到新数组）。

# graph - 二部图可以包含没有边的节点吗？

> ID：13554304
> 
> 赞同：1
> 
> 时间：2012-11-25T18:56:02.307
> 
> 标签：graph

例如，让我们在左列中取两组节点 n1、n2 和右列中的 n3、n4

现在 (n1,n3) 和 (n1,n4) 之间有边。节点 n2 没有边。这样的图是二分图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T19:26:05.830

正如@Jan Dvorak 在上面的评论中所建议的那样，答案是“是”

# python - Python：可变宽度的滑动窗口

> ID：13554306
> 
> 赞同：1
> 
> 时间：2012-11-25T18:56:17.183
> 
> 标签：python, sliding-window

我正在用 Python 编写一个程序，该程序正在处理实验期间生成的一些数据，它需要估计数据的斜率。我已经编写了一段代码，可以很好地做到这一点，但是速度非常慢（而且我不是很有耐心）。让我解释一下这段代码是如何工作的：

1）它抓取一小块大小为 dx 的数据（从 3 个数据点开始）

2) 评估差值（即 |y(x+dx)-y(x-dx)| ）是否大于某个最小值（40x std.dev. of noise）

3）如果差异足够大，它将使用OLS回归计算斜率。如果差值太小，会增加 dx 并用这个新的 dx 重做循环

4) 这对所有数据点都继续

[进一步查看更新的代码]

对于大约 100k 次测量的数据大小，这大约需要 40 分钟，而程序的其余部分（它执行的处理比这更多）大约需要 10 秒。我敢肯定有一种更有效的方法来进行这些操作，你们能帮帮我吗？

谢谢

编辑：

好的，所以我通过仅使用二进制搜索解决了问题，将允许的步骤数限制为 200。我感谢大家的输入，我选择了对我帮助最大的答案。

最终更新代码：

```
def slope(self, data, time):
    (wave1, wave2) = wt.dwt(data, "db3")
    std = 2*np.std(wave2)
    e = std/0.05
    de = 5*std
    N = len(data)
    slopes = np.ones(shape=(N,))
    data2 = np.concatenate((-data[::-1]+2*data[0], data, -data[::-1]+2*data[N-1]))
    time2 = np.concatenate((-time[::-1]+2*time[0], time, -time[::-1]+2*time[N-1]))
    for n in xrange(N+1, 2*N):     
        left = N+1
        right = 2*N
        for i in xrange(200):
            mid = int(0.5*(left+right))
            diff = np.abs(data2[n-mid+N]-data2[n+mid-N])
            if diff >= e:
                if diff < e + de:  
                    break
                right = mid - 1
                continue
            left = mid + 1
        leftlim = n - mid + N
        rightlim = n + mid - N
        y = data2[leftlim:rightlim:int(0.05*(rightlim-leftlim)+1)]
        x = time2[leftlim:rightlim:int(0.05*(rightlim-leftlim)+1)]
        xavg = np.average(x)
        yavg = np.average(y)
        xlen = len(x)
        slopes[n-N] = (np.dot(x,y)-xavg*yavg*xlen)/(np.dot(x,x)-xavg*xavg*xlen)
    return np.array(slopes) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:50:15.970

如何优化这将取决于您的数据的某些属性，但这里有一些想法：

1.  您是否尝试过分析代码？使用其中一个[Python 分析器](http://docs.python.org/2/library/profile.html)可以为您提供一些有用的信息，了解什么是最耗时的。通常，您刚刚编写的一段代码会有一个最大的瓶颈，而且并不总是很明显它是哪一段；分析可以让您找出并首先解决主要瓶颈。

2.  你知道什么是典型值`i`吗？如果你有一些想法，你可以从`i`大于 0 开始（正如@vhallac 指出的那样），或者通过增加`i`更大的数量来加快速度——如果你经常看到 的值很大`i`，一次增加`i`2 或 3；如果`i`s 的分布有一条长尾，则尝试每次加倍；等等

3.  进行最小二乘回归时是否需要所有数据？如果该函数调用是瓶颈，您可以通过仅使用该范围内的一些数据来加速它。例如，假设在某个特定点，您需要`i`200 岁才能看到数据中足够大（高于噪声）的变化。但是您可能不需要全部 400 个点来获得对斜率的良好估计——仅使用 10 或 20 个点，在`start:end`范围内均匀分布，可能就足够了，并且可能会大大加快代码速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:01:12.007

我使用 Python 进行类似的分析，并提出一些建议。我没有查看您的代码的详细信息，只是针对您的问题陈述：

> 1）它抓取一小块大小为 dx 的数据（从 3 个数据点开始）
> 
> 2) 评估差值（即 |y(x+dx)-y(x-dx)| ）是否大于某个最小值（40x std.dev. of noise）
> 
> 3）如果差异足够大，它将使用OLS回归计算斜率。如果差值太小，会增加 dx 并用这个新的 dx 重做循环
> 
> 4) 这对所有数据点都继续

我认为执行缓慢的更明显的原因是代码的循环性质，也许你可以使用 Numpy 的向量化（基于数组的操作）性质。

对于第1步，可以直接执行`data[3:] - data[-3:] 并在单个数组操作中获取所有差异，而不是取点对；

对于第 2 步，您可以使用基于数组的测试的结果，`numpy.argwhere(data > threshold)`而不是测试某个循环中的每个元素；

第 3 步在我看来在概念上是错误的。你说如果差异太小，它会增加`dx`。但是，如果差异很小，则生成的斜率会很小，因为它实际上很小。然后，获得一个小的值是正确的结果，而人为地增加`dx`以获得“更好”的结果可能不是您想要的。好吧，它实际上可能是您想要的，但您应该考虑这一点。我建议您计算`dx`整个数据的固定斜率，然后使用生成的斜率数组来选择您感兴趣的区域（例如，使用`data_slope[numpy.argwhere(data_slope > minimum_slope)]`.

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:34:38.387

您的评论表明您需要找到一种更好的方法来估计 i [k+1]给定的 i [k]。不知道 in 的值`data`会屈服于朴素的算法：

在 的每次迭代中`n`，保留`i`先前的值，并查看该`abs(data[start]-data[end])`值是否小于`e`。如果是，请保留`i`其先前的值，并像现在一样通过将其增加 1 来找到新的值。如果它大于或等于，则进行二进制搜索`i`以找到适当的值。您可以向前进行二进制搜索，但是在不知道的情况下找到一个好的候选上限`data`可能会很困难。该算法的性能不会比您当前的估计方法差。

如果您知道这`data`是一种平滑（没有突然的跳跃，因此所有`i`值都是平滑图）并且单调递增，您可以通过将二进制搜索的值减 1 来替换二进制搜索。

# twitter - Cocos2d 2.0 升级后 Twitter 不再工作

> ID：13554307
> 
> 赞同：2
> 
> 时间：2012-11-25T18:56:34.120
> 
> 标签：twitter, uiviewcontroller, cocos2d-iphone

我有一个项目使用 Twitter API 来推特用户的高分。该项目是使用 Cocos2d v1.1 编写的，一切正常。我最近使用 Cocos2d v2.0 开始了一个新项目，并尝试使用我其他项目中的相同代码来合并相同的 Twitter 功能，但按下 Tweet 按钮时不会出现视图控制器。下面是我正在使用的代码...

```
if ([TWTweetComposeViewController canSendTweet]) // Check if twitter is setup and reachable
    {
        CCLOG(@"Can Tweet");
        TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

        // set initial text
        NSString *theTweet = @"The message..."];
        [tweetViewController setInitialText:theTweet];

        // setup completion handler
        tweetViewController.completionHandler = ^(TWTweetComposeViewControllerResult result) {
            if(result == TWTweetComposeViewControllerResultDone) {
                // the user finished composing a tweet

            } else if(result == TWTweetComposeViewControllerResultCancelled) {
                 // the user cancelled composing a tweet
            }
            [viewController dismissViewControllerAnimated:YES completion:nil];
        };

        // present view controller
        [[[CCDirector sharedDirector] openGLView] addSubview:viewController.view];
        [viewController presentViewController:tweetViewController animated:YES completion:nil];

    }
else
{
    // Twitter account not configured, inform the user
    NSLog(@"You can't send a tweet right now, make sure your device has an internet connection and you have at least one Twitter account setup");
} 
```

我发现“openGLView”现在已贬值，我已将其替换为“view”。这仍然不起作用。该方法正在射击。我已经包含了一个 CCLOG，它返回字符串“Can Tweet”并出现在输出窗口中。有没有人对如何使它工作有任何建议。如果我需要提供更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T10:20:04.307

Use this code in cocos2d 2.0

```
AppController * app = (((AppController*) [UIApplication sharedApplication].delegate));

        TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

        [tweetViewController setInitialText:string];

        [tweetViewController setCompletionHandler:^(TWTweetComposeViewControllerResult result) {

            dispatch_async(dispatch_get_main_queue(), ^{

                {
                    if (result == TWTweetComposeViewControllerResultDone)
                    {
                        //successful
                        [[NSNotificationCenter defaultCenter] postNotificationName:@"PPTweetSuccessful" object:nil];

                    }
                    else if(result == TWTweetComposeViewControllerResultCancelled)
                    {
                        //Cancelled
                    }
                }

                [app.navController dismissModalViewControllerAnimated:YES];

                [tweetViewController release];
            });

        }];

        [app.navController presentModalViewController:tweetViewController animated:YES]; 
```

# python - 获取变量名

> ID：13554313
> 
> 赞同：0
> 
> 时间：2012-11-25T18:56:50.037
> 
> 标签：python, variables

我想知道是否可以获取调用函数的变量的名称，以及如何获取。例如 ：

```
myVar = something
myVar2 = something
myVar.function()
myVar2.function() 
```

并且代码应该返回

```
myVar calls function()
myVar2 calls function() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:01:32.607

似乎`something`已经是自定义类的对象（如果这是内置类，您可以对其进行子类化）。只需添加一个实例属性`name`，在创建时分配并稍后使用：

```
In [1]: class MyClass:
   ...:     def __init__(self, name):
   ...:         self.name = name
   ...:     def function(self):
   ...:         print 'function called on', self.name
   ...: 

In [2]: myVar = MyClass('Joe')

In [3]: myVar2 = MyClass('Ben')

In [4]: myVar.function()
function called on Joe

In [5]: myVar2.function()
function called on Ben 
```

PS我知道这不是你要问的，但我认为**这**比实际尝试使用变量名要好。上面评论中提到的问题有一个很好的[答案来](https://stackoverflow.com/a/3683258/1258041)解释原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:15:46.897

您可以进行一些堆栈操作来实现这一点，但我当然不建议这样做。希望你永远不要在实际代码中使用它：

```
>>> class C:
        def function(self):
            text = inspect.stack()[1][4][0].strip().split('.')
            return '{0} calls {1}'.format(*text)

>>> myVar = C()
>>> myVar.function()
'myVar calls function()' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:08:42.740

可能没有名字：

```
def another:
    return something 

another().function() 
```

Lev 的答案有一个很好的属性，它不依赖于任何内部 python 实现细节。列夫的技术是我经常使用的技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T19:03:46.367

你可以做：

```
def myfuncname():
    pass
myvar=myfuncname
print globals()['myvar'].__name__ 
```

它将打印分配给变量的函数的名称。

# parent-child - 查询 elasitcsearch 父子文档

> ID：13554314
> 
> 赞同：0
> 
> 时间：2012-11-25T18:56:53.413
> 
> 标签：parent-child, elasticsearch

我们在弹性搜索 (ES) 上使用两种类型的文档：项目和插槽，其中项目是插槽文档的父级。我们使用以下命令定义索引：

```
curl -XPOST 'localhost:9200/items' -d @itemsdef.json 
```

其中`itemsdef.json`有以下定义

```
{
"mappings" : {
    "item" : {
        "properties" : {
            "id" : {"type" : "long" },
            "name" : {
                "type" : "string",
                "_analyzer" : "textIndexAnalyzer"   
            },
            "location" : {"type" : "geo_point" },
        }
    }
},
"settings" : {
    "analysis" : {
        "analyzer" : {

                "activityIndexAnalyzer" : {
                    "alias" : ["activityQueryAnalyzer"],
                    "type" : "custom",
                    "tokenizer" : "whitespace",
                    "filter" : ["trim", "lowercase", "asciifolding", "spanish_stop", "spanish_synonym"]
                },
                "textIndexAnalyzer" : {
                    "type" : "custom",
                    "tokenizer" : "whitespace",
                    "filter" : ["word_delimiter_impl", "trim", "lowercase", "asciifolding", "spanish_stop", "spanish_synonym"]
                },
                "textQueryAnalyzer" : {
                    "type" : "custom",
                    "tokenizer" : "whitespace",
                    "filter" : ["trim", "lowercase", "asciifolding", "spanish_stop"]
                }       
        },
        "filter" : {        
                "spanish_stop" : {
                    "type" : "stop",
                    "ignore_case" : true,
                    "enable_position_increments" : true,
                    "stopwords_path" : "analysis/spanish-stopwords.txt"
                },
                "spanish_synonym" : {
                    "type" : "synonym",
                    "synonyms_path" : "analysis/spanish-synonyms.txt"
                },
                "word_delimiter_impl" : {
                    "type" : "word_delimiter",
                    "generate_word_parts" : true,
                    "generate_number_parts" : true,
                    "catenate_words" : true,
                    "catenate_numbers" : true,
                    "split_on_case_change" : false                  
                }               
        }
    }
}
} 
```

然后我们使用以下命令添加子文档定义：

```
curl -XPOST 'localhost:9200/items/slot/_mapping' -d @slotsdef.json 
```

其中`slotsdef.json`有以下定义：

```
{
"slot" : {
    "_parent" : {"type" : "item"},
    "_routing" : {
        "required" : true,
        "path" : "parent_id"
    },
    "properties": {
        "id" : { "type" : "long" },
        "parent_id" : { "type" : "long" },
        "activity" : {
            "type" : "string",
            "_analyzer" : "activityIndexAnalyzer"
        },
        "day" : { "type" : "integer" },
        "start" : { "type" : "integer" },
        "end" :  { "type" : "integer" }
    }
}   
} 
```

最后，我们使用以下命令执行批量索引：

```
curl -XPOST 'localhost:9200/items/_bulk' --data-binary @testbulk.json 
```

其中 testbulk.json 包含以下数据：

```
{"index":{"_type": "item", "_id":35}}
{"location":[40.4,-3.6],"id":35,"name":"A Name"}
{"index":{"_type":"slot","_id":126,"_parent":35}}
{"id":126,"start":1330,"day":1,"end":1730,"activity":"An Activity","parent_id":35} 
```

我正在尝试进行以下查询：搜索在指定日期和特定开始和结束范围内到某个位置的特定距离内有子项（插槽）的所有项目。

具有更多满足条件的插槽的项目应得分更高。

我尝试从现有样本开始，但文档非常稀缺，而且很难向前推进。

线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:30:12.917

我不认为有一种方法可以编写一个有效的查询来做这样的事情而不将位置移动到插槽。你可以做这样的事情，但对于某些数据来说效率很低：

```
{
    "query": {
        "top_children" : {
            "type": "blog_tag",
            "query" : {
                "constant_score" : {
                    "query" : {
                        ... your query for children goes here ...
                    }
                }            
            },
            "score" : "sum",
            "factor" : 5,
            "incremental_factor" : 2
        }
    },
    "filter": {
        "geo_distance" : {
            "distance" : "200km",
                "location" : {
                    "lat" : 40,
                    "lon" : -70
                }
            }
        }
    }
} 
```

基本上，这个查询所做的就是这样，它需要您的范围查询或过滤子项以及您需要的任何其他条件，并将其包装到 constant_score 查询中，以确保所有子项的得分均为 1.0。查询收集所有这些`top_children`孩子并将他们的分数累积给父母。然后过滤过滤掉距离太远的父母。

# c - 使用 grep 和 execl 会启动无限循环吗？

> ID：13554316
> 
> 赞同：0
> 
> 时间：2012-11-25T18:57:03.693
> 
> 标签：c, ubuntu, os.execl

我正在做一个小的 c 程序来测试一些 Unix 命令。我为用户提供他可以测试的选项，然后允许他输入他的选项。如果用户输入数字 2 作为他的选择，则应运行以下代码，该代码正在测试文件上的 grep 命令。但是当我输入“模式”时代码有问题，它开始一个无限循环，任何帮助？！我在 Unix 编程方面没有太多经验。当我输入数字 2 作为我的选择时出现问题，这意味着它是在 case no.2

```
 #include <unistd.h>
  #include <sys/types.h>
  #include <errno.h>
  #include <stdio.h>
  #include <sys/wait.h>
  #include <stdlib.h>

    int main(){
    char pattern[50];
    int userInput;
    pid_t childPID; 
        char filename[50];   
    FILE *file;      

    printf("Enter a File name:");    
    scanf("%s",filename);    

        file = fopen(filename, "r");

do{
    printf("Enter what u want to do with the file:\n");
    printf("1.Compress the file.\n");
    printf("2.Search for a pattern at the file\n");
    printf("3.Read the file (display the file content at the terminal)\n");
    printf("4.Eject the program\n");

        scanf("%d",&userInput);
switch(userInput){
    case 1: 
        if(childPID == 0){
            execl("/bin/gzip","gzip",filename,NULL);

            exit(1);
            }       
        break;
    case 2: childPID = fork();
        if(childPID ==0){
            printf("Enter the pattern you want to search about:");
            scanf("%s",pattern);

            execl("/bin/grep","grep",pattern,filename,NULL);
        }   
        break;

    }

}while(userInput != 4);
return 0;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:48:46.507

`execlp()`or系列函数用新的`exec()`进程映像替换当前进程映像，因此当`execlp()`退出时，子进程终止，但`fork()`向父进程返回一些非零值。

重点是做之后`fork()`有两个独立的进程

```
1st : main process called parent 
2nd : child process 
```

而且您无法控制它们的执行顺序，这是未指定的。所以`wait(NULL)`在子代码完成后放入你的父代码。

这样父母就会等到孩子终止。否则两个独立的进程都将以这种方式运行。有时您会发现只有父母在跑步`(that's infinite loop)`，但有时您会看到孩子也在跑步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:28:20.080

我看到这可能进入无限循环的唯一原因是`execl()`失败时。打印 errno 后`execl()`看看出了什么问题。

```
...
    execl("/bin/grep","grep",pattern,filename,NULL);
    printf("errno=%d\n", errno);
}

break; 
```

# xcode - 如何防止 OSX Lion 退出应用程序并进入睡眠状态？

> ID：13554317
> 
> 赞同：1
> 
> 时间：2012-11-25T18:57:07.470
> 
> 标签：xcode, macos, osx-lion

我在 Core 2 Duo 21 英寸 iMac 2008 版本上使用 Lion 10.7.5，并且我已经从终端运行了这两个：

```
defaults write -g NSDisableAutomaticTermination -bool yes
defaults write -g NSDisableAutomaticTermination -int 1 
```

我还在节能器偏好设置中将计算机睡眠和显示器睡眠设置为“从不”，并且“尽可能让硬盘进入睡眠”框也未选中。我还从 App Store 下载了 Caffeine 并尝试过。然而，在闲置一个小时左右后，Lion 退出所有应用程序、注销并进入睡眠状态。这通常令人沮丧，但在尝试更新 Xcode 时却非常烦人，因为 Lion 只会终止更新过程并进入睡眠状态。由于时间限制，我不能坐下来握住 Lion 的手，让它保持清醒 5 个小时。

任何帮助表示赞赏，我挖了一点，但找不到任何已经回答的相关问题。Apple Q&A1340 不是我要找的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:24:23.803

*   用于`pmset -g`查看当前实际应用的电源管理规则。
*   用于`pmset -g sched`查看是否有人没有帮助您安排您的计算机在特定时间关闭。
*   使用`pmset -g activity`和`pmset -g history`查看最近的电源管理活动。
*   如果仍然没有告诉你原因是什么，你可以尝试`pmset -g everything |more`寻找线索。
*   您可能还想查看 /var/log/system.log 以查看在它进入睡眠之前是否记录了任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:02:12.037

1) 从 App Store 下载[咖啡因](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=https://itunes.apple.com/us/app/caffeine/id411246225?mt=12&ei=E2uyUOrUJOPmiwKZ_4GYAg&usg=AFQjCNG3ASSwgMLZm2ucpqyoIZbTUIaKJA)- 它应该可以处理您正在寻找的内容。

2）这不是[编程问题](https://stackoverflow.com/faq#questions)。

# javascript - Express.js 关闭响应

> ID：13554319
> 
> 赞同：24
> 
> 时间：2012-11-25T18:57:10.617
> 
> 标签：javascript, node.js, express, keep-alive

有没有办法关闭回复？我可以使用`res.end()`，但它实际上并没有关闭套接字。

我想要实现的目标：我正在编写一个与网络接口的 Java 程序，并且我正在为此编写一个 NodeJS 服务器。Java代码：

```
String line;
while((line = in.readLine()) != null) {
    System.out.println("RES: "+line);
} 
```

但这只是一直悬而未决。没有结束连接，仍在等待来自套接字的输入。

节点：

```
exports.getAll = function (req, res) {
    res.set("Content-Type", "text/plain");
    res.set(200);
    res.send(..data..);
    res.end();
} 
```

但是`res.end()`不会关闭连接。如前所述，Java 一直认为接下来会有一些事情，所以它陷入了`while`循环。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-25T19:26:30.170

通过设置 HTTP 标头来关闭连接而不是默认的 keep-alive 策略来解决。

```
res.set("Connection", "close"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-06-18T05:35:33.140

万一真的想关闭连接的人发现了这个，你可以使用[res.socket](https://nodejs.org/api/http.html#http_response_socket)或[res.connection](https://nodejs.org/api/http.html#http_response_connection)来获取带有[destroy](https://nodejs.org/api/net.html#net_socket_destroy_exception)方法的[net.Socket对象：](https://nodejs.org/api/net.html#net_class_net_socket)

```
res.connection.destroy(); 
```

# c++ - 重载 'operator+' 必须是一元或二元运算符错误

> ID：13554320
> 
> 赞同：19
> 
> 时间：2012-11-25T18:57:14.207
> 
> 标签：c++, c++11, operator-overloading

[按照这个答案中给出](https://stackoverflow.com/questions/3989127/what-do-i-often-see-references-in-operator-overloading-definitions/3989509#3989509)的建议，我`+`在我的简单类中重载了运算符，`Point`如下所示（+= 重载工作正常）。

```
Point operator+ (Point p1, const Point& p2)
{
    return std::move(p1 += p2);
} 
```

但我得到一个错误说

> 重载的 'operator+' 必须是一元或二元运算符（有 3 个参数）

怎么了？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-25T18:58:34.110

听起来您已将运算符声明为成员函数。成员函数采用隐式第一个参数，这意味着您的运算符现在采用三个参数。您可以通过使其成为非成员函数来解决此问题。

在任何情况下，*最好将其声明为 non-member*，以确保操作的 LHS 和 RHS 之间的对称性。

至于[`std::move`](http://en.cppreference.com/w/cpp/utility/move)，它在`<utility>`标题中。虽然我看不到在这里使用它的原因。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-25T18:59:40.070

您想要执行以下任一操作：

```
// Member function, performs (*this + right)
Point operator+ (Point & right) 
```

或者

```
// Free function, performs (left + right)
Point operator+ (const Point &left, const Point& right) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T18:59:45.470

您使运算符成为成员函数，这意味着当您包含隐式第一个参数时，它实际上具有三个`this`参数。

任何一个：

*   使用`*this`而不是`p1`去掉第一个参数，或者
*   让操作符重载一个自由函数（而不是一个成员）——这是首选。

# c# - C# Linq 比 PHP 慢？解谜 #236A

> ID：13554323
> 
> 赞同：2
> 
> 时间：2012-11-25T18:57:16.797
> 
> 标签：c#, php, linq

我正在一个站点上解决奥林匹克 IT 谜题进行培训。

我提供了两种解决方案：

```
 - C# 
```

> [http://ideone.com/exF1HJ](http://ideone.com/exF1HJ)

```
 - PHP 
```

> [http://ideone.com/WbaPHY](http://ideone.com/WbaPHY)

网上判断的时候我一头雾水，那个PHP版本的速度更快！！！为什么？

C#：109 毫秒 3000 KB

PHP：45 毫秒 0 KB

怎么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:05:59.440

鉴于给定的程序，程序的重要部分的执行时间 - 查找唯一字符 - 绝对*不会*花费 109 毫秒。听起来无论涉及什么“在线判断”都是测量总执行时间，包括进程启动、.NET 的 JITting 等。

这有点像问哪辆车从车库里出来的速度更快，并认为它代表了汽车的速度。

现在完全有可能 PHP 的`array_unique`函数真的*非常*快，可能比 LINQ 更快……但基本上你无法从基准测试结果中获得任何有用的信息。您应该寻找执行时间为几秒钟而不是几毫秒的基准，并且*不*包括启动/预热时间，除非这是您特别感兴趣的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T19:05:58.397

您的 C# 版本创建了三个您似乎不需要的数组。您可以将其替换为：

```
string input = Console.ReadLine();
int charCount = input.Distinct().Count();
if(charCount % 2 == 0) ... 
```

以下可能更快：

```
int charCount = new HashSet<char>(input).Count; 
```

# .net - 订阅/发布服务器的推送与轮询

> ID：13554327
> 
> 赞同：0
> 
> 时间：2012-11-25T18:57:35.377
> 
> 标签：.net, wcf

我试图得到明确的答案，哪个更好？投票还是推送？

就我而言，有些客户订阅了数据源。数据源是具有特定事件 ID 的一系列事件。每个用户都订阅了指定的事件。当新事件发布时，每个订阅用户都应该得到这个更新。还有其他客户端/服务器交互，但我主要担心这部分。

目前有一些要求

1.  总共会有 10-25 个事件 ID。
2.  每个用户都应该在 2-4 秒后得到更新
3.  每天大约 1-4 次更新非常罕见，或者可能没有。
4.  我们应该最大化连接到服务器的最大用户数。考虑的用户数约为 5000。
5.  用户只能订阅那些他被授权的事件。

我正在考虑使用 WCF（http 或 nettcp 绑定）。

我从来没有自己开发过客户端/服务器通信——所以任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:06:32.920

根据您的描述，您似乎应该使用**Push**。

对于每天 1-4 个事件每隔几秒轮询一次是没有意义的。

一个简单的设置可以是使用 nttcp 绑定的双工服务

# ruby - 试图从一个网站解析字符串，该网站在末尾给出一个值的设备状态

> ID：13554328
> 
> 赞同：-4
> 
> 时间：2012-11-25T18:57:42.720
> 
> 标签：ruby

我正在使用 ruby​​ 并尝试从我从 URI.PARSE 收到的字符串中获取值。

下面是我从 URI.PARSE 得到的并且在我的字符串中。您可以在底部的结果中看到它。Q8:0; 我只需要在这种情况下为 Q8 且值为 0 的设备。设备始终是字符串，但有时值是字符串，有时是整数。我希望能够评估此结果以根据值执行事件。

```
html code>Q8:0;html code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:02:34.910

```
_, device, value, _ = "html code>Q8:0;html code".split(/[>:;]/) 
```

# postgresql - 找出一组行的哈希值

> ID：13554333
> 
> 赞同：2
> 
> 时间：2012-11-25T18:57:53.800
> 
> 标签：postgresql

我的 PostgresSQL 数据库中有一个表`person`，其中包含不同用户的数据。

我需要编写一个测试用例，确保某些例程确实修改了用户1的数据，并且不修改用户2的数据。

为此，我需要

a) 计算用户 1 和用户 2 的所有行的哈希码，

b) 然后执行被测操作，

c) 再次计算哈希码并

d) 比较来自步骤 a) 和 c) 的哈希码。

我找到了[一种](https://stackoverflow.com/questions/3878499/finding-the-hash-value-of-a-row-in-postgresql)计算单行哈希码的方法：

```
SELECT md5(CAST((f.*)AS text))
FROM person f; 
```

为了实现我的目标（找出用户 2 的行是否已更改），我需要执行如下查询：

```
SELECT user_id, SOME_AGGREGATE_FUNCTION(md5(CAST((f.*)AS text)))
FROM person f
GROUP BY user_id; 
```

我可以使用什么聚合函数来计算一组行的哈希码？

注意：我只想知道用户 2 的任何行是否已更改。我不想知道，到底发生了什么变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:22:28.957

最简单的方法 - 只需将所有字符串形式`md5`与`string_agg`. 但要正确使用此聚合，您必须指定`ORDER BY`.

或`md5(string_agg(md5(CAST((f.*)AS text)),''))`与一些一起使用`ORDER BY`- 如果任何领域发生`f.*`变化，它会发生变化，并且比较便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-20T07:16:44.310

一种更简单的方法

```
SELECT user_id, md5(textin(record_out(A))) AS hash
FROM person A 
```

# jquery - 在 Jquery 中访问动态添加的元素

> ID：13554336
> 
> 赞同：0
> 
> 时间：2012-11-25T18:58:13.563
> 
> 标签：jquery, html

> **可能重复：**
> [动态添加的类不能被调用](https://stackoverflow.com/questions/12482336/dynamically-added-class-cant-be-called)
> [jquery不选择jquery添加的元素](https://stackoverflow.com/questions/13090887/jquery-does-not-select-jquery-added-element)

我正在尝试通过类名访问动态添加的元素，但不能。

示例 HTML：

```
<div class="foo">static foo (click to trigger alert)</div>
<br />
<br />
<a id="add">add dynamic foo</a>
<br />
<div id="items"></div> 
```

示例 Jquery：

```
$(function(){

    var c = 1;

    $('#add').click(function() {

        $('#items').append('<div style="background:red" id="item' + c + '">\n\
                                Hello World ' + c + '\n\
                            </div>\n\
                            <div class="foo">dynamic foo ' + c + 'clicking me should alert?</a>');

        c++;

    });

    $('.foo').click(function() {
        alert('tst');
    });

}); 
```

**演示：http:** [//jsfiddle.net/D3gGH/](http://jsfiddle.net/D3gGH/)

正如您在演示中看到的那样，单击动态添加`<div class="foo">`应该会触发警报，但不会。如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:04:30.423

`on`改为使用`click`

```
$(function(){

    var c = 1;

    $('#add').click(function() {

        $('#items').append('<div style="background:red" id="item' + c + '">\n\
                                Hello World ' + c + '\n\
                            </div>\n\
                            <div class="foo">dynamic foo ' + c + 'clicking me should alert?</a>');

        c++;

    });

    $(document).on('click','.foo', function(e) {
        alert('tst');
    });

});​ 
```

[工作演示](http://jsfiddle.net/D3gGH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:13:06.193

在处理动态创建的元素时使用**事件委托，并尽量***避免在大型文档上的委托事件中过度使用 document 或 document.body* - 请参阅[参考资料](http://api.jquery.com/on/)。

```
$('#items').on("click", ".foo", function() {
    alert('tst');
}); 
```

# javascript - node.js 变量范围

> ID：13554346
> 
> 赞同：1
> 
> 时间：2012-11-25T18:59:48.497
> 
> 标签：javascript, node.js

我有以下导出的对象：

```
module.exports = {
    value: 0,

    startTimer: function() {
        setInterval(function() {
            value++;
        }, 1000);
    }
} 
```

如何`value`从该 setInterval 函数访问？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:14:23.733

您可以指定值的完整路径：

```
module.exports = {
    value: 0,

    startTimer: function() {
        setInterval(function() {
            module.exports.value++;
        }, 1000);
    }
} 
```

或者，如果将调用的函数绑定`setTimeout`到`this`，则可以使用`this`：

```
module.exports = {
    value: 0,

    startTimer: function() {
        setInterval(function() {
            this.value++;
        }.bind(this), 1000);
    }
} 
```

这类似于这样的代码，您会不时看到：

```
module.exports = {
    value: 0,

    startTimer: function() {
        var self = this;
        setInterval(function() {
            self.value++;
        }, 1000);
    }
} 
```

# javascript - 为什么 HTML5 验证器会发现错误？

> ID：13554349
> 
> 赞同：-2
> 
> 时间：2012-11-25T19:00:17.167
> 
> 标签：javascript, html

不明白！真的 ...

```
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>The Storage Age</title>
    <meta name="description" content="The Storage Age">
    <meta name="author" content="The Storage Age">
    <link rel="shortcut icon" type="image/x-icon" href="./img/favicon.ico">
    <link rel="stylesheet" href="./css/main.css" type="text/css" media="screen">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-34969704-2']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
            })();
    </script>
</head>
<body>
    <header>
    </header>
        <div id="h">
            <article>
                <h1>&#9679;&#9679;&#9679; The Storage Age &#9679;&#9679;&#9679;</h1>
                <a href="http://validator.w3.org/check?uri=http%3A%2F%2Fwww.thestorageage.com&amp;doctype=HTML5"><img src="./img/tsa_icon.png" alt="... See you in 2015 AD ..."></a>
                <h2>Electronic archives rock solid</h2>
            </article>
            </div>
    <footer>
    </footer>
    </body> 
```

验证器告诉“第 21 行，第 11 列：元素脚本的文本内容不是所需的格式：预期的空格、制表符、换行符或斜杠，但找到了 v”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:08:44.093

脚本标签要么使用内联代码，要么使用`src`代码，而不是同时使用两者。

代替

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-34969704-2']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
            })();
    </script> 
```

和

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-34969704-2']);
        _gaq.push(['_trackPageview']);
        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
            })(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:08:43.763

`<script>`标记可以是外部的( `src=""`) 或内部的（标记内的代码）。
不能同时两者兼而有之。

# c - 关于 char** 参数的 const char** 参数警告

> ID：13554354
> 
> 赞同：3
> 
> 时间：2012-11-25T19:00:27.623
> 
> 标签：c, char, constants

在编译调用以下函数的过程中：

```
char* process_array_of_strings(const char** strings); 
```

`char**`当 a作为参数传递时， GCC 会抱怨：

```
note: expected ‘const char **’ but argument is of type ‘char **’ 
```

虽然该函数不会更改字符（因此是 const），但它确实复制了指针数组以修改字符指针本身，因此这里绝对不希望使用常量指针。

编译成功，程序似乎可以工作。那么程序员应该如何处理这个警告呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T19:02:52.960

使用强制转换使转换显式，编译器会很高兴：

```
process_array_of_strings((const char**) foo); 
```

在这些情况下，您必须明确表示您知道自己在做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T19:24:32.400

这就是为什么在 C++`char **`中不会自动转换为`const char **`，以及 C 编译器在允许时发出警告的原因。

```
/* This function returns a pointer to a string through its output parameter: */
void get_some_string(const char ** p) {
    /* I can do this because p is const char **, so the string won't be modified. */
    *p = "unchangeable string in program core";
}

void f() {
    char * str;
    /* First, I'll call this function to obtain a pointer to a string: */
    get_some_string(&str);
    /* Now, modify the string: */
    for (char * p = str; *p; p++)
        *p = toupper(*p);
    /* We have just overwritten a constant string in program core (or crashed). */
} 
```

根据您对做什么的描述`process_array_of_strings()`，它也可以采用，`const char * const *`因为它既不修改指针也不修改字符（但在其他地方复制了指针）。在这种情况下，上述情况是不可能的，并且编译器理论上*可以*允许您在没有警告的情况下自动转换`char **`为`const char * const *`，但这不是语言的定义方式。

所以答案显然是你需要一个演员（显式）。我写了这个扩展，以便您可以完全理解为什么会出现警告，这在您决定静音时很重要。

# php - 学说2与三个实体的关系

> ID：13554356
> 
> 赞同：-1
> 
> 时间：2012-11-25T19:00:37.453
> 
> 标签：php, doctrine, doctrine-orm

我遇到了以下问题，在网上搜索了数小时后，我没有找到任何解决方案。我想在实体项目、用户和角色之间建立“三实体关系”。一个项目有很多用户，一个用户可以是很多项目的成员。但是在项目 <--> 用户之间的每个关系中，用户可以具有不同的角色。我如何用 Doctrine2 解决这个问题？提前谢谢了！

**编辑** 一个小代码示例会非常好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:27:26.377

您应该在 Project 和 User 之间建立 N:M 关联。然后，此关联的每个实例都具有角色属性（作为固定列表的整数，或作为与角色实体的关联）。遗憾的是，Doctrine 没有明确支持关联的属性，因此在这些情况下，您应该使用连接器实体：与 Project 和 User 的 ManyToOne 连接中的实体。然后，该实体可以保存角色值/关联，但您必须通过这些对象管理（断开）连接。

# php - 使用 Javascript 作为 php 变量返回

> ID：13554357
> 
> 赞同：1
> 
> 时间：2012-11-25T19:00:41.743
> 
> 标签：php, javascript

我不确定这是否可能，因为 javascript 是客户端而 php 是服务器端，但我拥有的是一系列 javascript 函数，它们可以实时汇总表单中的订单。为了澄清这一点，当用户在表单中选择项目时，它会给出一个总数。在提交表单时，php 将订单提交到数据库。我需要实现的是一种将订单的总数（由javascript创建）提交到数据库（通过php obv）的方法。创建总数的 javascript 函数是：

```
function calculateTotal(){
     var Price = getDropPrice() + getverifyPrice() + getmiscPrice();
     var divobj = document.getElementById('totalPrice');
     divobj.style.display='block';
     divobj.innerHTML = "$"+Price;
} 
```

生成它的 html 非常简单：

```
<div id="totalPrice"></div> 
```

如果您需要我发布另一个`functions(getDropPrice, getverifyPrice, getmiscPrice)`让我知道，但基本上 drop 是一个下拉，verify 和 misc 是单选按钮，我只是将它们的总数加在一起以获得上述函数中的订单总数。我在 SO 和 google 上的搜索只向我展示了如何将 php 变量导入 javascript，而不是相反，所以我当然希望可以做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:02:56.010

将您的总数放在隐藏的输入字段中。然后，您的 PHP 脚本将能够在提交表单后读取并执行您想要的任何操作。

```
<input type="hidden" name="hiddenInput" /> 
```

然后你像往常一样得到它`$_POST['hiddenInput']`；如果您有更多数据要以这种方式发回，您可以添加更多输入，或者坚持一个但将所有数据打包成 JSON 并以这种方式发送。收到后，您`json_decode()`在该字段上进行操作，并且无论发送了多少数据，都将其全部恢复。

但是，我**不**建议依赖用户方提供的数据，而是发回选择了哪些产品并再次计算总数，否则您可能会发现自己每天以 1 美元的价格出售昂贵的商品 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:02:49.497

你需要的是来自 jQuery 的 $.ajax。这将发送 POST 请求而不重新加载页面。

假设您的按钮称为 myButton 然后对于 onClick() 事件您将调用该函数

```
$.ajax({
  type: "POST",
  url: "some.php",
  data: { name: "John", location: "Boston" }
}).success(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

在您的 some.php 中，您只需使用 $_POST['name'] 和 $_POST['location'] 来检索信息。

假设您有一个输入字段。您也可以通过 jQuery 从此类字段中检索信息。然后，您可以通过 ajax 将输入字段中的信息发送到您的 php 脚本

```
$('#yourInputField').val(); 
```

其中 yourInputField 是输入字段的 ID。有了这个，您可以将此信息传递给脚本。如果表单中有多个元素，则可能需要查看函数 serialize()。原则上做同样的事情，只是将所有信息压缩成一个 JSON 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:03:58.630

这就是为什么作者制作了`"input"`类型为 的元素`"hidden"`。使用其中一个并将`"value"`元素的属性设置为您想要的总量，然后将表单发布到数据库，您可以像访问表单上的其他值一样简单地访问隐藏值。

HTML：

```
<input type="hidden" id="TotalPrice_Input" /> 
```

Javascript：

```
document.getElementById("TotalPrice_Input").value = Price; 
```

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T19:13:13.577

将 Javascript 与 PHP 混合使用：

```
<?php
$mixit = '<script type="text/javascript">';
$mixit .= 'function calculateTotal() {';
$mixit .= 'var Price = getDropPrice() + getverifyPrice() + getmiscPrice();';
$mixit .= 'var divobj = document.getElementById("totalPrice");';
$mixit .= 'divobj.style.display="block";';
$mixit .= 'divobj.innerHTML = '.$Price.';}';
$mixit .= '</script>';

echo $mixit;

?> 
```

# php - Cake PHP 登录元素

> ID：13554359
> 
> 赞同：0
> 
> 时间：2012-11-25T19:00:50.640
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我的问题如下：

我想使用登录元素而不是登录视图。所以我可以在我的default.ctp 中使用登录...我希望用户能够从每个页面登录。它应该是一种下拉菜单。

我如何告诉我的控制器使用元素并获取元素数据而不是视图？

我的 LoginsController 登录功能：

```
function login()
{
    $this->set('headline','Melden Sie sich an...');

    if($this->request->is('post'))
    {
        if($this->Auth->login())
        {
            //$this->redirect($this->Auth->redirect);
            $this->redirect(array('action' => 'index'));
            $this->Session->setFlash('Ihr Login war erfolgreich!');
        }
        else
        {
          //  $this->Session->setFlash('Ihre Email/Passwort ist falsch!' . ' ' . $this->request->data['Login']['email'] . ' ' . $this->request->data['Login']['password']);
            $this->Session->setFlash('Ihre Email/Passwort ist falsch!');
        }
    }
    $this->render('logins/login');
} 
```

我的观点/元素：

```
<aside id="left">

<div class="whitebox einloggen">
    <div class="rahmen">
        <h2>Login</h2>
        <div class="inside">

  <?php              echo $this->Html->para(null,'Sind Sie bereits als Nutzer registriert?');

    echo $this->Form->create('Login', array('action' => 'login'));

    echo $this->Form->input('email', array ('label' => false, 'type'=>'text','class'=>'text', 'value'=>'E-Mail','id'=>'LoginEmail', 'onfocus'=>"resetinput(this);", 'onBlur'=>"fillinput(this);"));
    echo $this->Form->input('password', array ('label' => false, 'type'=>'text','class'=>'text', 'value'=>'Passwort','id'=>'LoginPassword', 'onfocus'=>"resetinputpw(this);", 'onBlur'=>"fillinput(this);"));
    echo $this->Form->end(array('label'=>'Einloggen','class' => 'button long','type' => 'submit','name'=>'submit'));

    echo $this->Html->para('forgetpw', $this->Html->link('Passwort vergessen?', array('controller' => 'login', 'action' => 'forgotpwd'), array('label' => false, 'class' => 'forgetpw', 'title'=>'Passwort vergessen')));

    echo $this->Html->link('', array('controller' => 'login', 'action' => 'fblogin'), array('class' => 'facebook-button', 'title'=>'Mit Facebook einloggen'));
    ?>

        </div>
    </div>
</div> 
```

我这样调用 default.ctp 中的元素：

```
<?php    echo $this->element('/logins/login'); ?> 
```

它总是抱怨缺少登录视图...

如果这不是一个好习惯，请教我；-)

对不起我的英语不好，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:11:38.280

您是否尝试过禁用控制器中的视图？

如果该元素包含在 default.ctp 中，则添加

```
$this->autoRender = false; 
```

代替

```
$this->render('logins/login'); 
```

在您的登录控制器中将停止登录控制器尝试专门呈现视图。

您需要将元素放在 Elements 目录中（在“视图”下），然后将 default.ctp 中的代码更新为

```
<?php echo $this->element('login'); ?> 
```

此外，使用 cakephp 设置链接和表单的方式可能会在元素方面对您有所帮助。

有关表单的完整指导，请在此处尝试：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/form.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)

对于如何做链接蛋糕的方式，试试：[http ://book.cakephp.org/2.0/en/core-libraries/helpers/html.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html)

# php - grab specific array elements in php

> ID：13554371
> 
> 赞同：0
> 
> 时间：2012-11-25T19:01:38.030
> 
> 标签：php, arrays, explode

I want to grab specific array elements from CURl output. So, I am trying to make a script. Here is:

```
<?php
$url = "example.com";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
$buffer = curl_exec($ch);
$explode=explode("name",$buffer);
$a=($explode[89],$explode[18],$explode[58],$explode[36],$explode[49],$explode[58],$explode[68],$explode[78],$explode[88],$explode[98],$explode[108],$explode[118],$explode[158],$explode[138],$explode[148],$explode[158],$explode[168],$explode[178],$explode[188],$explode[198],$explode[508],$explode[518],$explode[558],$explode[538],$explode[548]);
$p=explode(",",$a);
foreach($p as $b){
     $c=explode("name-finish",$b);
     echo ($c[0]);
}   
?> 
```

But it is showing

> Parse error: syntax error, unexpected ',' on line 23

( this is line of $a )

What is my error here ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:06:08.660

Try with:

```
$a=array($explode[89],$explode[18],$explode[58],$explode[36],$explode[49],$explode[58],$explode[68],$explode[78],$explode[88],$explode[98],$explode[108],$explode[118],$explode[158],$explode[138],$explode[148],$explode[158],$explode[168],$explode[178],$explode[188],$explode[198],$explode[508],$explode[518],$explode[558],$explode[538],$explode[548]); 
```

and then remove the line: `$p=explode(",",$a);`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:04:30.533

drop the $a=.. and $p.. lines and replace with this:

```
$explode=explode("name",$buffer);
$a[]=$explode[89];
$a[]=$explode[58]; 
```

....

then

```
foreach($a as $b){... 
```

OR

```
foreach (array($explode[89],$explode[58] ...) as $b){... 
```

better if you are not going to use the array again

# php - 查询字符串问题中的自定义 Oauth 服务器和 & 符号

> ID：13554374
> 
> 赞同：5
> 
> 时间：2012-11-25T19:02:09.030
> 
> 标签：php, laravel, oauth2-playground

我一直在尝试将 oauth2 游乐场与 Laravel`oauth2-server`捆绑包一起使用，但遇到了一个问题。授权发生后，我习惯`header('location:`将我带回谷歌。我放入重定向的字符串是

```
https://developers.google.com/oauthplayground/?state=1&code=d84024740acc22646b9636421406c88abeab9c8e 
```

但是，当我找到它时，它`&`已被替换`&amp;`为导致操场无法进入第 2 步。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:14:54.540

您是否尝试过使用 Laravel 的`Redirect`类，而不是标题？它应该更好地处理编码：

```
Redirect::to('https://developers.google.com/oauthplayground/?state=1&code=d84024740acc22646b9636421406c88abeab9c8e'); 
```

# mongodb - 使用 GORM MongoDB 插件实现接口的持久类

> ID：13554376
> 
> 赞同：0
> 
> 时间：2012-11-25T19:02:16.680
> 
> 标签：mongodb, grails, interface, persistence, grails-orm

我在坚持上课时遇到问题。我有一个名为 Scraper 的类，它使用一个名为 Paginator 的接口。Paginator 接口有几种实现，它们将在运行时实例化。所以结构看起来像这样：

```
class Scraper {

    //some code

    Paginator paginator

    //more code

    def Scraper(Paginator paginator){
        this.paginator = paginator
    }
} 
```

然后是 paginator 接口的具体实现，比如说 paginatorA 和 paginatorB。所以现在我正在尝试执行以下操作：

```
PaginatorA p = new PaginatorA()
Scraper s = new Scaper(p)

s.save(flush:true) 
```

...它得到的是：

```
Error Error executing script TestApp:
org.springframework.beans.factory.BeanCreationException: Error creating bean with name     'mongoDatastore': Cannot resolve reference to bean 'mongoMappingContext' while setting bean property 'mappingContext';
nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoMappingContext': FactoryBean threw exception on object creation; nested exception is java.lang.NullPointerException (Use --stacktrace to see the full trace) 
```

谁能告诉我该怎么做？我猜它与 Mapper 有关，因为它不知道要使用哪个具体的 Paginator 或如何持久化它？如果是这种情况，那么我该如何告诉框架该做什么？我花了几个小时试图想出一个解决方案，但我真的很沮丧，所以任何帮助都会非常感激。

哦，顺便说一句，我也尝试针对具体实现（PaginatorA）进行实现......这非常好，因为我假设它与分页器接口有关。

感谢您的任何回复...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:13:54.457

这个错误很糟糕，你可能应该为此提出一个 JIRA 问题，但从根本上我可以看到代码有 2 个问题：

1.  你的持久类必须有一个公共的无参数构造函数，就像任何 JavaBean 一样，通过添加一个接受你的接口的构造函数，你不再提供一个

2.  您的 Scraper 类需要将“Paginator”标记为瞬态，以告诉持久性引擎不要尝试保留“paginator”属性。由于这是一个自定义接口，它不会知道如何持久化它。

# powershell - 如何让 PowerShell 执行 MpCmdRun.exe

> ID：13554380
> 
> 赞同：1
> 
> 时间：2012-11-25T19:02:51.307
> 
> 标签：powershell, powershell-3.0

PowerShell 像 cmd 一样运行 IpConfig 和 WhoAmI 等程序。但是，我很难运行 MpCmdRun.exe

> 清除主机
> 集位置“C:\Program Files\Windows Defender”
> Get-ChildItem
> mpcmdrun.exe

结果

> 错误：
> 
> mpcmdrun.exe：术语“mpcmdrun.exe”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:15:18.210

你在做`mpcmdrun.exe`。您必须这样做`.\mpcmdrun.exe`，因为与 cmd 不同，Powershell 中的当前文件夹`.`不在 PATH 中。

PS：

我想知道您是否阅读了当您按照您所说的那样做时 Powershell 会吐出的整个消息：

> 建议[3,General]：没有找到命令MpCmdRun.exe，但在当前位置确实存在。默认情况下，Windows PowerShell 不会从当前位置加载命令。如果您信任此命令，请键入“.\MpCmdRun.exe”。有关更多详细信息，请参阅“获取关于_Command_Precedence 的帮助”。

PP:

其他命令运行是因为它们在 PATH 中。

# javascript - 语言选择的特殊 URL？

> ID：13554387
> 
> 赞同：0
> 
> 时间：2012-11-25T19:03:40.163
> 
> 标签：javascript, jquery, select, cookies

只是一个简单的问题，我想知道为什么有些网站在选择语言后在其 URL 中有类似“?lang=EN”的内容？是因为他们的 html 文件或包含它的文件夹被命名为“？lang=EN”，还是其他一些这样做的代码？我想为我的网站设置这样的 URL（有 2 种语言）。目前我有这样的文件夹结构：

语言选择：D:/media/index.html

CN 站点：D:/media/en/index.html

中国站：D:/media/cn/index.html

网站文件：D:/media/site

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:14:50.237

您在地址栏中看到的 url，后面的任何内容都`"?"`称为“QueryString”，并且通过服务器端的库（基于网站所在的开发平台），您可以访问这些值。例如 的值`"lang"`可以等于`"EN"`或`"CN"`等。

顺便说一句，您可以使用一些 http 处理程序来重写请求的 url 并通过物理上不存在的 url 获取参数。就像你提到的那样，“http://yoursite.com/ **en** /default.whatever”。我自己更喜欢这种方式，但根据您的要求，您应该使用一些服务器端库来访问查询字符串值并选择您想要发送给客户端的内容的语言。

同样作为我曾经使用过的一种解决方案，您还可以使用一些翻译服务（如 translate.google.com）客户端库，并在客户端使用 jquery 甚至 javascript 调用它，并在页面加载时翻译所有文本。尽管它的运行速度非常快，但您会看到一些问题。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:07:02.610

这是因为他们通常有一个内容管理系统，其中内容不一定存储在文件中，而是存储在数据库中。这`lang=en`是他们检索的 URL 中的 GET 变量，例如 PHP，以显示正确的内容。`EN`但是，在您的情况下，如果用户单击或`CN`到适当的位置（在您的情况下），您可以将用户重定向到适当的位置，`/en/index.html`并且`/cn/index.html`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:10:33.280

PHP 用于从 URL 中的变量中获取值。它`$_GET`从该`LANG`变量中获取值，然后从存储了不同语言的所有单词的文件或从数据库中选择所有值

您不需要复制每个文件然后翻译它。

在您的情况下搜索 php 动态页面教程。我找到了[**这个**](http://www.youtube.com/watch?v=YqPp8EzjCMY)。

PS PHP 是执行此操作的多种方法之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T19:11:08.087

首先，文件扩展名 ( .html ) 之后的任何内容都是服务器端功能。

这 ？是 PHP 的一个函数，它将变量添加到从另一个页面定向到的超级全局 GET 数组（形式为：?variable=value&variable2=value2），从那时起，可以对数据进行许多操作。

使用 ?lang=EN 的站点可能被编程为在需要的位置和语言的单个页面上打印出所需的文本块。尽管可以使用此方法重定向到特定语言的目录。

希望这可以帮助 ：）

# mongodb - Mongodb查询从多个键中选择记录

> ID：13554391
> 
> 赞同：2
> 
> 时间：2012-11-25T19:03:58.720
> 
> 标签：mongodb, select

让数据库中的记录为

```
{"_id":"1","unit":"a1", "vehicle1" : "car"}
{"_id":"2","unit":"a2", "vehicle1" : "truck", "vehicle2" : "bike"}
{"_id":"3","unit":"b1", "vehicle1" : "car"}
{"_id":"4","unit":"zz", "vehicle1" : "truck", "vehicle2" : "car", "vehicle3" : "car" } 
```

是否有一个命令可以找到具有以下参数的条目或所有条目：

```
db.accidents.find( { vehicle*: "bike" } ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T19:07:24.423

而是有一个车辆阵列。

这是您可以插入的示例 JSON

```
{"_id":"2", "unit":"a2", "vehicle": ["truck", "bike"]} 
```

您可以查询的方式是：

```
db.accidents.find({"vehicle":"bike"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:35:51.360

假设您不想更改数据，这是我能想到的唯一方法。

```
db.accidents.find( { $or: [
  {"vehicle1": "bike"}, 
  {"vehicle2": "bike"}, 
  {"vehicle2": "bike"}
]} ) 
```

显然要求您知道有多少种车辆* 变体。Sushant 提出的数组会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T13:14:53.753

如果车辆号码对您很重要。

```
{"_id": "2", 
 "unit": "a2",
 "vehicle": [{no: 1, name: "truck"}, {no:2, name: "bike"}]
} 
```

之后，您可以单独查询每个字段，也可以使用高级查询操作。

# amazon-ec2 - 如何使用 iam-role 启动 ec2-instance？

> ID：13554392
> 
> 赞同：6
> 
> 时间：2012-11-25T19:04:03.747
> 
> 标签：amazon-ec2, amazon-web-services

我可以在管理控制台中使用 iam-role 启动 ec2-instance。但我不知道如何从 aws-ruby-sdk 使用 iam-role 启动 ec2-instance

```
iam-role "    test"'s Policy is here
    "Effect": "Allow",
    "Action": "*",
    "Resource": "*" 
```

结果如下：

```
/var/lib/gems/1.8/gems/aws-sdk-1.7.1/lib/aws/core/client.rb:318:in `return_or_raise': 
You are not authorized to perform iam:PassRole with arn:aws:iam::xxxxxxxxxxx:role/test 
(AWS::EC2::Errors::UnauthorizedOperation) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T13:49:40.430

The credentials you are using from your Ruby script do not have permission to launch an instance using the 'test' IAM Role. You need to modify the policy for this user, and grant it the IAM:PassRole permission, e.g.:

```
{
  "Statement": [{
      "Effect":"Allow",
      "Action":"ec2:RunInstances",
      "Resource":"*"
    },
    {
      "Effect":"Allow",
      "Action":"iam:PassRole",
      "Resource":"arn:aws:iam::xxxxxxxxxxx:role/test"
    }]
} 
```

This is a security feature - it is possible to misconfigure IAM to allow privilege escalations, so AWS uses a "secure by default" policy.

You could also use this policy to allow your users to launch instances using any IAM role - but you should consider the security implications before doing this:

```
 {
      "Effect":"Allow",
      "Action":"iam:PassRole",
      "Resource":"*"
    }] 
```

Ref: [http://docs.amazonwebservices.com/IAM/latest/UserGuide/role-usecase-ec2app.html](http://docs.amazonwebservices.com/IAM/latest/UserGuide/role-usecase-ec2app.html)

# c++ - 装配印刷浮子

> ID：13554394
> 
> 赞同：0
> 
> 时间：2012-11-25T19:04:30.047
> 
> 标签：c++, c, assembly, x86

我在装配中的以下操作时遇到了一些麻烦。我正在组装 IA32。假设 -4(%ebp)=x 和 -8(%ebp)=y 我已经从用户那里得到它们。这是代码：

```
format1:    .string "Multiply : %u * %u = %llu\n"
format2:    .string "Divide : %u / %u = %u\n"

# operation multiply
movl    -4(%ebp),   %eax
mull    -8(%ebp)
pushl   %edx
pushl   %eax
pushl   -8(%ebp)
pushl   -4(%ebp)
pushl   $format1
call    printf

# operation divide
movl    -4(%ebp),    %eax   
divl    -8(%ebp)
pushl    %eax
pushl   -8(%ebp)
pushl   -4(%ebp)
pushl   $format2
    call    printf 
```

乘法结果在 %llu 中的原因是因为我希望能够将 2 个长数字相乘并打印结果，即使它达到 64 个字节。而且在 %edx 中，mull 命令保存了 64 字节结果的“其他 32 字节”，所以我需要将它推送到堆栈以及 printf。例如我想要这个输出：

```
 Multiply : 4000000000 * 2 = 16000000000 
```

另外，我希望 3 与 4 的除法运算返回 X.YZ 结果。（尾数中不超过 2 个数字，并且不四舍五入）例如

```
Divide : 3 / 4 = 0.75 
```

对于 19 和 1000：

```
Divide : 19 / 1000 = 0.01 
```

对于 8 和 2：

```
Divide : 8 / 2 = 4.00 
```

我真的很努力地得到结果，但没有成功。多谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:02:20.030

是的，您当然可以使用`scanf`，只需传递正确的参数即可。如您所知，对于浮点结果，您需要使用一些浮点除法和浮点格式进行打印。

请注意，根据调用约定，您应该保留`ebx`寄存器的值。此外，您应该保持堆栈平衡，最好对齐。

一个可能的解决方案：

```
.comm x,4,4
.comm y,4,4

.section    .rodata

format1:    .string "Div : %d / %d = %g\n"
format2:    .string "Mod : %d %% %d = %d\n"
format3:    .string "%d %d"

.text
.globl  main
.type   main, @function
main:
    subl $32, %esp # allocate space, preserve alignment

    movl $format3, (%esp)
    movl $x, 4(%esp)
    movl $y, 8(%esp)
    call scanf

# operation divide
    fildl x
    fidivl y
    fstpl 12(%esp) # x / y

    movl $format1, (%esp)
    movl x, %eax
    movl %eax, 4(%esp)
    movl y, %eax
    movl %eax, 8(%esp)
    call printf

# operation modulo
    movl x, %eax
    cltd
    idivl y
    movl $format2, (%esp)
    movl x, %eax
    movl %eax, 4(%esp)
    movl y, %eax
    movl %eax, 8(%esp)
    movl %edx, 12(%esp)
    call printf

    addl $32, %esp
    xor %eax, %eax
    ret 
```

请参阅[运行中的代码](http://ideone.com/JbnTm5)。

# windows-runtime - 按下按钮时更好的逻辑循环方式？

> ID：13554398
> 
> 赞同：0
> 
> 时间：2012-11-25T19:05:10.477
> 
> 标签：windows-runtime, winrt-xaml, winrt-async

所以我在 WinRT UserControl 上有一个按钮，我想在按住按钮时增加或减少一个整数值 (CurrentValue)。

我最终得到了下面的这个实现，它可以工作但看起来不太好或者可以吗？

我搜索了一个要使用的事件，但我在使用 click 并将 button.clickmode 设置为按下时卡住了。

我使用 bool _increasePushed 来跟踪是否已经推入，所以我没有得到多个事件触发器。

```
 private bool _increasePushed;
    private const int PushDelay = 200;

    private async void ButtonIncreaseClick(object sender, RoutedEventArgs e)
    {
        var button = sender as Button;
        if (button == null) return;

        if (_increasePushed)
        {
            return;
        }

        _increasePushed = true;

        while (button.IsPressed)
        {
            CurrentValue++;
            await Task.Delay(PushDelay);
        }

        _increasePushed = false;
    } 
```

用户控件上的 XAML

```
 <Button x:Name="buttonIncrease" Content="Bla bla"
            Click="ButtonIncreaseClick" ClickMode="Press" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:17:00.630

更好的方法是使用一个[RepeatButton](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.controls.primitives.repeatbutton)，它完全符合你想要复制的功能。它有一个 Delay 属性来等待第一次重复单击，以及一个 Interval 属性来控制引发 Click 事件的频率。

# php - 警告：preg_match()：第 18 行的未知修饰符 '('

> ID：13554402
> 
> 赞同：-1
> 
> 时间：2012-11-25T19:05:35.710
> 
> 标签：php, regex

我在这个问题的标题中得到了错误。帮助我找出我的联系表中的问题：

```
<?php

//Prefedined Variables
$to = "example@example.com";
$subject = "1";

if($_POST) {
    // Collect POST data from form
    $name = stripslashes($_POST['name']);
    $email = stripslashes($_POST['email']);
    $comment = stripslashes($_POST['comment']);

    // Define email variables
    $message = date('d/m/Y')."\n" . $name . " (" . $email . ") sent the following comment:\n" . $comment;
    $headers = 'From: '.$email.'\r\n\'Reply-To: ' . $email . '\r\n\'X-Mailer: PHP/' . phpversion();

    //Validate
    $header_injections = preg_match("(\r|\n)(to:|from:|cc:|bcc:)", $comment); 

    if( ! empty($name) && ! empty($email) && ! empty($comment) && ! $header_injections ) {
        if( mail($to, $subject, $message, $headers) ) {
            return true;
        }
        else {
            return false;
        }
    }
    else {
        return false;
    }
}
?> 
```

似乎问题就在这里，但我不明白出了什么问题！

```
$header_injections = preg_match("(\r|\n)(to:|from:|cc:|bcc:)", $comment); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:07:56.087

尝试：

```
$header_injections = preg_match("#(\r|\n)(to:|from:|cc:|bcc:)#", $comment); 
```

您必须在正则表达式的开头和结尾提供一个有效的符号，在这个例子中是 just `#`，但您可以使用`/`或任何您想要的。

看看这篇文章：[RegEx delimiters](http://www.php.net/manual/en/regexp.reference.delimiters.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:14:15.213

尝试使用这个：

```
$header_injections = preg_match('/(\r|\n)(to:|from:|cc:|bcc:)/', $comment); 
```

同样在您的 IF 条件下，您应该`$header_injections`这样检查：

```
if( ! empty($name) && ! empty($email) && ! empty($comment) && FALSE !== $header_injections ) { 
```

因为 preg_match 可以返回可以转换为布尔值并跳过验证的值。

# ios - OpenGL ES GLKBaseEffect 与改变顶点位置

> ID：13554404
> 
> 赞同：0
> 
> 时间：2012-11-25T19:05:47.817
> 
> 标签：ios, opengl-es-2.0

我是 OpenGL 的新手，如果我想移动对象，我找不到有关选择哪种方式的信息。

我只使用顶点数组（无着色器）创建了一个简单的三角形并将其显示在屏幕上。接下来我想移动我的三角形（向右/向左）。在我看来，有两种方法：

1.  使用 GLKBaseEffect 并使用 GLKMatrix4MakeTranslation 和 GLKBaseEffect.transform.projectionMatrix 属性
2.  更改顶点数组中的坐标

哪种方式更正确？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:11:11.917

翻译。您永远不想更改数组中的坐标。

# exception-handling - MIPS 异常和中断是如何工作的？

> ID：13554406
> 
> 赞同：4
> 
> 时间：2012-11-25T19:05:52.887
> 
> 标签：exception-handling, mips, cpu-architecture, interrupt-handling, mips32

我正在研究类似 CPU 的 MIPS32，我想知道 MIPS32 异常和中断处理是如何工作的。MIPS32 特权资源架构指南没有提供太多信息。我想知道几件事是：

1.  如果异常或中断处理程序中有异常或中断会发生什么？

2.  MIPS32 在原因寄存器中有 5 个硬件中断和 2 个软件中断。是软件中断异常还是仅在异常代码值中显示的异常？

3.  有不同的中断和异常向量吗？

4.  如果管道中有 2 个异常在它为异常清除之前发生了，会发生什么？例如，有一个溢出异常，然后是另一个异常，以及一个中断。发生什么了？

任何有用资源的链接将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T02:10:21.690

1.  异常处理程序在保存 EPC、SR 等之前不应重新启用异常。
2.  软件中断是例外。
3.  一些 MIPS CPU 已经构建了不同的中断和异常向量，但事实证明这并不是很有用。
4.  MIPS 有精确的异常：即异常出现在指令序列中，只有流水线中的第一个异常在架构上是可见的。

[请参阅 MIPS Run Linux](https://rads.stackoverflow.com/amzn/click/com/0120884216)是 MIPS 异常和 MIPS PRA 的最佳和最易读的参考。

# android - 禁用gridview滚动

> ID：13554409
> 
> 赞同：0
> 
> 时间：2012-11-25T19:06:04.590
> 
> 标签：android, gridview, scroll

我有可扩展列表视图的布局。并且，每个子项都有gridview。但gridview 有自己的滚动和expandablelistview 也有。所以我必须为所有gridview设置固定长度，但是gridviews的数量是动态的。

[我从这里](https://stackoverflow.com/questions/3682445/how-do-i-calculate-the-required-height-of-a-gridview-that-is-inside-of-a-scrollv)找到了单个 gridview 的解决方案。

```
private OnGlobalLayoutListener mOnGlobalLayoutGridListener = new OnGlobalLayoutListener() {

    @SuppressWarnings("deprecation")
    @Override
    public void onGlobalLayout() {

        Debug.e("", "onGlobalLayout is called");

        if (gridView != null && gridView.getChildCount() > 0) {

            gridView.getViewTreeObserver().removeGlobalOnLayoutListener(
                    this);

            // gridView.get

            View lastChild = gridView
                    .getChildAt(gridView.getChildCount() - 1);

            int rows = gridView.getAdapter().getCount() / numColumns;
            int extra = gridView.getAdapter().getCount() % numColumns;

            if (extra > 0) {
                rows++;
            }

            int height = (int) (lastChild.getMeasuredHeight() * rows);

            gridView.setLayoutParams(new LinearLayout.LayoutParams(
                    LayoutParams.MATCH_PARENT, height));
        }

    }
}; 
```

`OnGlobalLayoutListener`不引用特定的 Gridview。所以我不能将此侦听器用于所有网格视图，因为所有网格视图都有不同数量的项目。

看这里

![在此处输入图像描述](../Images/80a00358242db233cc1d86efd8cad86a.png)

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T09:15:00.320

您可以像这样使用自定义 GridView ，然后您不必为所有 gridview 设置固定长度：

公共类 GridlistView 扩展 GridView{

```
public GridlistView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public void  onMeasure(int widthMeasureSpec,int heightMeasureSpec) {
    int expendSpec=MeasureSpec.makeMeasureSpec(Integer.MAX_VALUE>>2, MeasureSpec.AT_MOST);
    super.onMeasure(widthMeasureSpec, expendSpec);
} 
```

}

在您的 xml 中使用 Gridlistview；

# java - Java 正则表达式不正确匹配

> ID：13554413
> 
> 赞同：3
> 
> 时间：2012-11-25T19:06:44.153
> 
> 标签：java, regex, string

我需要检查一个字符串本身是否有任何等号。我当前的正则表达式似乎在 Java 中不起作用，即使[RegexPal](http://regexpal.com/)匹配它。

我目前的代码是：

```
String str = "test=tests";
System.out.println(str + " - " + str.matches("[^=]=[^=]")); 
```

在以下测试用例中，第一个应该匹配，第二个不应该：

```
test=tests // matches t=t
test==tests // doesn't match 
```

Regex Pal 做得对，但是，Java 出于某种原因对两个测试用例都返回 false。我在某个地方出错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T19:11:11.377

Java 的[`String.matches`函数](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches%28java.lang.String%29)匹配整个字符串，而不仅仅是一部分。这意味着，它大致相当于 regex `^[^=]=[^=]$`，因此两者都返回 false。要构建与您等效的正则表达式，您应该使用：

```
str.matches("(?s).*[^=]=[^=].*") 
```

（`(?s)`确保`.`匹配所有内容。）

或者，您可以构建一个[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)并使用[Matcher](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html)以获得更大的灵活性。这就是 String.matches 使用的。

```
final Pattern p = Pattern.compile("[^=]=[^=]");
final Matcher m = p.matcher(str);
return m.find(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:07:58.350

您必须添加`*`或添加`+`到您的正则表达式：

```
str.matches("[^=]+=[^=]+") 
```

这是必需的，因为`string.matches()`默认情况下是锚定的。这等效于`^[^=]+=[^=]+$`并且意味着它必须匹配整个字符串，而不仅仅是它的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:08:38.537

您只是`single`在 前后匹配字符`=`。现在，由于`String#matches`尝试将`complete`字符串与给定的 匹配`Pattern`，因此您需要确保覆盖其中的完整字符串。显然，您的字符串确实包含`many characters`before 和 after `=`。

因此，要指定这一点，您需要在`quantifier`此处使用 a ：-

*   `+`匹配`one or more`字符
*   `*`匹配`zero or more`字符

因此，您需要将您的正则表达式更改为： -

```
System.out.println(str + " - " + str.matches("[^=]+=[^=]+")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T19:15:07.100

问题是 String.matches()**不搜索匹配的 subsequence**，而是尝试将完整的字符串与您的模式匹配。

为了您的目的，您需要 Matcher.find()：[http](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find) ://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find( )

# html - 如何使用 jquery 显示带有 modal.open 的 html 文件？

> ID：13554415
> 
> 赞同：1
> 
> 时间：2012-11-25T19:06:52.830
> 
> 标签：html, jquery-ui, jquery, jquery-selectors

目前我使用一个很好的工作代码来打开一个带有 Jquery 的模式：

```
 $(document).ready(function(){          
            $("span.ico-detail").click(function(){
                modal.open({content: "View detail of " + $(this).parent().parent().attr("id")});
                e.preventDefault();
            });
        }); 
```

现在的问题是：如何使用**modal.open**打开一个名为“view.html”的 HTML 文件，其中包含“*查看详细信息*”字符串？

我应该用什么更改**内容：“xxx”**，以便我可以打开 HTML 文件（view.html）并将其与其他文本连接起来？

之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:17:02.263

如果`view.html`存储在服务器上并且其内容是静态的，那么您可以选择使用 ajax 预加载文件的内容。

```
$(function () {
    window.myAppNs = {
        viewContent: null;
    };

    $.ajax({
        url: 'view.html',
        dataType: 'html',
        type: 'GET'
    }).done(function (resp) {
        myAppNs.viewContent = resp;
    });

    $("span.ico-detail").click(function(){
        modal.open({content: myAppNs.viewContent + $(this).parent().parent().attr("id")});
        e.preventDefault();
    });
}); 
```

我正在创建一个全局变量`myAppNs`。这将保存所有与应用程序相关的变量。这个想法不是用不必要的变量污染全局命名空间。有更好、更安全的方法来创建命名空间。如果你对此感兴趣，你可以用谷歌搜索。

ajax 调用预加载 的内容`view.html`并将其存储在`myAppNs.viewContent`. 点击处理程序从变量中读取该内容。

在返回 ajax 响应之前，用户可能会单击该元素。如果这是一个问题，您可以随时将命名空间创建和 ajax 调用移出，`document.ready`并`head`在引用`jquery`. 这应该让浏览器有足够的时间在 dom 准备好之前获取内容，但是响应延迟的可能性仍然很小。如果您需要确保只有在获取数据后用户才能单击，则将单击处理程序绑定在`done`ajax 调用的回调中。

# c# - 模型（复杂类型）不会提交操作

> ID：13554417
> 
> 赞同：0
> 
> 时间：2012-11-25T19:07:15.187
> 
> 标签：c#, razor, asp.net-mvc-4, complextype

我在发布具有“复杂类型”模型的表单时遇到了一些问题：

我有一个模型：

```
public class CircleEditViewModel
    {
        [Key]
        public int CircleId { get; set; }

        [Required]
        [MaxLength(100)]
        public string Name { get; set; }

        public bool IsSystem { get; set; }
        public class UserInCircle
        {
            public UserInCircle(User user)
            {
                this.UserId = user.UserId;
                FullName = user.FullName;

            }
            public int UserId { get; set; }
            public byte[] Picture { get; set; }
            public string FullName { get; set; }
            public bool isInCircle { get; set; }
        }
          public List<UserInCircle> Users { get; set; }
    } 
```

我的第一个问题是，在发布事件中，我的用户为 null .. 所以我在这里关注了一些帖子（例如[MVC- 复杂类型上的模型绑定](https://stackoverflow.com/questions/13248609/mvc-model-binding-on-a-complex-type)）使用**for**而不是**foreach**，但既然我这样做了，我的表格将不再发布：

看法：

```
 @model Wims.Website.ViewModels.CircleEditViewModel
        <script type="text/javascript">
            $(document).ready(function () {

                $.validator.unobtrusive.parse('form');
            });

        </script>
@using (Ajax.BeginForm(Html.ViewContext.RouteData.Values["Action"].ToString(), null, new AjaxOptions { HttpMethod = "POST", OnSuccess = "SaveDone(data)" }, new { id = "editform" }))
{
    @Html.ValidationSummary(true)

            <fieldset>
                <legend>Circle</legend>
                @Html.Label(DateTime.Now.ToString());
            <div class="editor-label">
                @Html.LabelFor(model => model.Name)
            </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Name)
                    @Html.ValidationMessageFor(model => model.Name)
                </div>
            </fieldset>

            if (Model.Users != null)
            {
                for (int i = 0; i < Model.Users.Count; i++)
                {            
                    <div class="userDetail">
                        <div>
                            <div>
                                @Html.DisplayFor(model => Model.Users[i].isInCircle);
                            </div>
                            <div class="iconDiv">
                                @Html.Image("~/Content/Images/defaultUser.jpg", Model.Users[i].FullName, null);
                            </div>
                            <div>     
                                 @Html.TextBoxFor(model => Model.Users[i].FullName)
                                 @Html.HiddenFor(model => Model.Users[i].UserId)

                            </div>
                        </div>

                    </div>
                    <div style="clear: both"></div>
                }
            }
         @Html.GenerateSecureDataControls(model => model.CircleId)
            <input type="submit" value="Save" />
        } 
```

我的视图通过 ajax 呈现为部分加载（不确定它在这里有什么不同）。知道为什么它不会发布吗？如果我将所有 '[]' 像 'Users[0].FullName' 删除到 Users0.FullName 我会发布，但当然它不会被绑定。

谢谢你的帮助

以备不时之需进行编辑：操作：

```
[HttpPost]
    public ActionResult Edit(CircleEditViewModel circleData, FormCollection collection)
    {
        if (ModelState.IsValid)
        {
            using (var logic = new CircleLogic())
            {
                Circle circle = logic.GetCircleById(circleData.CircleId, WebMatrix.WebData.WebSecurity.CurrentUserId);
                if (circle == null)
                {
                    return HttpNotFound();
                }
                else
                {

                    circle.Name = circleData.Name;
                    logic.UpdateCircle(circle, GetSelectedUser(collection));

                }
                return PartialView("_CircleAndUsers", GetData(logic, circle.CircleId));
            }
        }

        return this.Json(new { success = false, viewdata = RenderRazorViewToString("_CircleAndUsers", circleData) });

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:20:20.717

巴勃罗·罗密欧是对的，我添加了一个默认的 ctor 并且它起作用了。

# javascript - 提交后如何刷新表单？

> ID：13554419
> 
> 赞同：0
> 
> 时间：2012-11-25T19:07:21.873
> 
> 标签：javascript, jquery, ajax

我有这样的形式

```
<form id="abc">
<div>
<select >
<option id= "1"> ha1 </option>
<option id= "1"> ha2 </option>
<option id= "1"> ha3 </option>
<option id= "1"> ha4 </option>
</select>
<input type="submit">
</div>
</form> 
```

对于表单提交，我使用过

```
 $(document).ready(function() {

        $('#abc').submit(function(){

            $.post('filter.php', $(this).serialize(), function(data){

          $('#abc').reset();  //(this).reset();  

            });             

            return false;

        });

    }); 
```

这里重置不起作用。重置的任何问题我都没有。表单提交后，我想用 db 值刷新表单（以显示刚刚选择的值）。

提交后如何刷新页面或 div 刷新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:12:47.223

```
$(document).ready(function() {
    $('#abc').submit(function(){
        $.post('filter.php', $(this).serialize(), function(data){
        window.location.href=window.location.href;  
        });             
        return false;
    });

}); 
```

通过将 href 设置为实际页面来重新加载页面:)

或者你也可以使用这个：

```
parent.document.getElementById("abc").reload(); 
```

顺便说一句：我没有看到您的服务器端代码，您必须渲染选定的值，当然，我假设您正在返回它们，我的回答不涵盖服务器端场景。我的代码仅适用于您在将所选值保存到数据库后从服务器返回的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:19:57.217

正如 doniyor 在回答中所说，您可以使用 window.location.href 刷新页面，但这不会使用您刚刚写入数据库的值填充您的表单。

您有两个选项可用于使用数据库填充表单，在您的情况下可能需要实现这两个选项（取决于您）。

第一个是在您第一次加载 html 时填充表单。这可以通过对数据库进行查询并获取值来在服务器端完成，然后根据值设置正确的单选按钮，如下所示：

```
<input type="radio" selected="selected" /> 
```

另一个选项是将复选框设置为与 jquerys .prop() 方法异步。这要求您的标签具有唯一的 ID（无论如何它们都应该具有）。例子：

```
$("#yourIDHere").prop('checked',true); 
```

在后一种情况下，您可以让发布的脚本输出正确的 ID 以供使用。这取决于您的判断，并且取决于您的情况，但希望这个答案能够为您指明正确的方向。

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:14:19.160

如果您拥有服务器端代码，则可以在响应中返回值，然后在回调中使用这些值填充字段。

假设这是您的响应 JSON：

```
{
    data: [{
             "username": "john doe"
    }]
}

$('#abc').submit(function(){
    $.post('filter.php', $(this).serialize(), function(data){

        $('#abc').reset();  //(this).reset();  

        $('input#username').val(data.username);
    });             

    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T19:22:03.550

尝试使用这个，

```
$('#abc').submit(function(){
    $.post('filter.php', $(this).serialize(), function(data){

        $('#abc').find('input:text, input:password, input:file, select, textarea').val('');
        $('#abc').find('input:radio, input:checkbox')
        .removeAttr('checked').removeAttr('selected');

    });             

  return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T13:58:18.787

使用纯 JavaScript 重置表单字段。

`document.getElementById("formid").reset();`

# wpf - 绑定到 xml 数据的 wpf datagrid 无法自动生成列？

> ID：13554430
> 
> 赞同：0
> 
> 时间：2012-11-25T19:08:58.170
> 
> 标签：wpf, xml, data-binding, datagrid

我想知道为什么我不能让我的 wpf 数据网格自动生成列。属性 AutogerenateColumns 设置为 true。也许这与我没有将 itemssource 绑定到类而是绑定到 XElement 的事实有关。如果可能有限制？我找不到有关此的任何信息。谢谢

这是xml：

```
 <DataGrid
        x:Name="grid"
        Grid.Row="3"
        Grid.Column="2"
        HorizontalAlignment="Left"
        ItemsSource="{Binding Path=Elements[person]}"
        DataContext="{Binding Path=ResourceFileGroupMerged}"
        AutoGenerateColumns="True">
    </DataGrid> 
```

在视图模型中：

```
 public MainWindowViewModel()
    {
               ResourceFileGroupMerged = XElement.Load(@"c:\test.xml");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T23:30:48.380

我认为您必须手动添加列，因为 DataGrid 会使用 XmlElement 的属性（例如 NodeType、OwnerDocument 等）作为自动生成的列。您应该在绑定中使用`XPath`而不是：`Path`

```
 <DataGrid ItemsSource="{Binding XPath=Elements/person}" AutoGenerateColumns="False" DataContext="{Binding Path=ResourceFileGroupMerged}" >
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding XPath=@prop1}" />
                <DataGridTextColumn Binding="{Binding XPath=@prop2}" />
            </DataGrid.Columns>
        </DataGrid> 
```

XmlElement的属性在哪里`@prop1`和是。`@prop2``person`

# c# - C# 发送文件时使用大量内存，System.OutOfMemoryException

> ID：13554433
> 
> 赞同：-1
> 
> 时间：2012-11-25T19:09:10.157
> 
> 标签：c#, exception, memory, tcp, stream

我正在开发一个使用`TCP`. 该程序发送多个文件，因此在用户退出程序之前不会关闭流。

我面临的问题是，当我发送一个 700mb 的文件时，我的服务器程序私有内存增长到 700,000 K 并严重削弱了我的计算机性能。当尝试发送另一个 700mb 文件时，服务器会抛出一个`System.OutOfMemoryException`.

有人可以告诉我我做错了什么，或者没有做什么？

服务器端代码：

```
 using (   FileStream fs = new FileStream("dracula.avi", FileMode.Open, FileAccess.Read))                            
  {                                                        
   byte[] data = new byte[fs.Length];
   int remaining = data.Length;
   int offset = 0;

   strWriter.WriteLine("Content-Length: " + data.Length);
   strWriter.Flush();

   Thread.Sleep(1000);
   while (remaining > 0)
        {
            Thread.Sleep(10);
            int read = fs.Read(data, offset, remaining);
            remaining -= read;
            offset += read;

        }

   fs.Flush();
   fs.Close();
 }   

  strm.Write(data, 0, data.Length);
  strm.Flush();
  GC.Collect(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:13:11.827

您当前正在将整个文件读入内存，即使您只想将其复制到另一个流。不要那样做。一次只迭代一个块：读取一个块，写入一个块，读取一个块，写入一个块等。如果您使用的是 .NET 4，则可以[`Stream.CopyTo`](http://msdn.microsoft.com/en-us/library/system.io.stream.copyto.aspx)用于此目的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T19:13:22.097

您正在缓冲您的读取，但不是您的写入。该程序正在按照您的要求执行 - 分配一个巨大的块或内存并在发送单个字节之前将其全部填充。

更好的方法是从文件中读取一个小块（为了参数，4096 字节），然后将该块写入输出流。通过这样做，每个连接将只使用 4096 字节，这更具可扩展性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:08:37.853

当您的系统内存不足或在 32 位进程中您的地址空间不足 (2000MB) 时，通常会发生 OOM 情况。

你说它可以成功复制一个但不能复制两个？这两个是同时的还是连续的？你的线程模型是什么？另外，这个例子是一个片段，你似乎有一个 StreamWriter 和一个 Stream 用于写入，这些对象会消失吗？

小心 GC.Collect。Microsoft 不推荐显式调用，因为如果您没有正确使用它，它可能会导致对象的存活时间超过所需时间。这是因为当您执行 GC.Collect 时，您将对象提升到更高的一代。根据我的经验，最好确保您正在释放对象并让框架决定 GC.Collect 的内容/时间。

我会熟悉 WinDBG+SOS，这使您可以查看堆上的对象。

尝试这个：

1.  启动 WinDBG 并附加到您的进程
2.  如果使用 4.0，请输入“.loadby sos clr”，否则输入“.loadby sos mscorwks”
3.  按 F5 继续
4.  复制一个文件，等待它完成
5.  按 CTRL+BREAK
6.  输入“！dumpheap -stat”，查看结果，寻找应该消失的对象
7.  For-Each 应该消失的对象，获取 MT 值
8.  键入“！dumpheap -mt {0}”，将 {0} 替换为上述步骤中的值
9.  这是一个实例列表，抓取其中一个对象地址
10.  键入“！gcroot {0}”将 {0} 替换为对象地址

这应该告诉您什么是对象的根，然后您需要找出如何取消根，例如不需要的空对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T19:28:49.357

最好在读取数据块后立即发送它们。我没有测试代码，但它应该类似于；

```
 var bufferLenght = 1024;
   byte[] buffer;

   while (remaining > 0)
   {
            buffer = new byte[1024];
            int len = fs.Read(buffer, offset, bufferLenght);
            remaining -= len;
            offset += len;    
            strm.Write(buffer, 0, len);
   } 
```

# iphone - UITableView 像 Facebook 的滑入式菜单一样滚动

> ID：13554438
> 
> 赞同：0
> 
> 时间：2012-11-25T19:10:06.943
> 
> 标签：iphone, objective-c, uitableview

也许您已经看过 Facebook 的 iPhone 应用程序及其滑入式菜单。

当您向上滚动时，您可以看到每个组的标题都停在顶部，直到下一个标题取而代之。反之亦然：通过向下滚动，当组的内容完全出现时，标题会粘在组上并开始滚动，为即将出现的标题留出位置。

如果有人知道它是如何完成的，请帮助。我不知道这个效果是怎么称呼的，我在谷歌上搜索但没有结果。

非常感谢任何帮助（tut、链接、代码）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:19:34.820

这种效果（如果我理解正确的话）内置于`UITableView`功能中 - 您正在寻找的方法是：

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
```

（可以在[此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDataSource/tableView%3atitleForHeaderInSection%3a)找到此方法的文档）。

通过提供`UITableView`一个部分标题，您将启用您在电话等应用程序中看到的*效果类型（在联系人部分中）。*

* * *

要获得*看起来*像 Facebook 的标题，您可以使用

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section 
```

（可以在[此处](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView%3aviewForHeaderInSection%3a)找到此方法的文档）。

此函数允许您将自定义视图传递给 UITableView 以用作节标题。

# php - 来自数组（php）的文本框值（jquery）验证的codeigniter

> ID：13554446
> 
> 赞同：0
> 
> 时间：2012-11-25T19:11:07.293
> 
> 标签：php, jquery, codeigniter

我想验证我的 3 个输入是否与数组中的值相同。

```
<?php 
$aylength = 0;
$resultacyear = array();
foreach($academicyear->result() as $ay)
{
    $item = array(
            'tahunakademik' => $ay->Tahun_Akademik,
            'idsemester' => $ay->ID_Semester,
            'idlevelyear' => $ay->ID_Level_Year
            );
    $resultacyear[]= $item;
    $aylength++;
}

?> 
```

```
<script type="text/javascript">

    $('#btn_save').click(function() {
        <?php $inc = 0; ?>
        for(i=0;i<parseInt(<?php echo $aylength?>);i++)
        {
            if($('#txt_tahunAkademik').val()=="<?php echo $resultacyear[$inc]['tahunakademik'] ?>" && $('#cb_semester').val()=="<?php echo $resultacyear[$inc]['idsemester'] ?>" && $('#cmb_YearLevel').val()=="<?php echo $resultacyear[$inc]['idlevelyear'] ?>")
            {
                alert ("Data already exists!!");
                return false;
                break;
            }
            else
            {
                <?php $inc++; ?>
                return false;
            }
        }
    });
    </script> 
```

当我尝试时，它没有验证甚至检查该值。
我的验证有问题吗？

# android - 将 GPS 坐标保存到文件/DB/xml？

> ID：13554450
> 
> 赞同：0
> 
> 时间：2012-11-25T19:11:14.950
> 
> 标签：android

我正在尝试我的第一个 android 应用程序，它应该使用 gps 坐标跟踪我的路线。该应用程序还有五个文本框，每个文本框大约有 30 个字符，用户可以输入。坐标应该保存 30/60 秒，这够了吗？或者是否可以在 10 秒内保存它，保存它的正确方法是什么？考虑从 url 读取 xml，但我认为将来可能会有更多数据。将它作为 XML 或本地普通文件存储在 sd 上的好方法是什么，我可以从 client-pc 解析以检索坐标？

谢谢你的时间。最好的祝福

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:07:23.843

仅当距离前一个位置足够远时，您才应该保存一个位置。这样，您将获得更少的数据而不会丢失任何信息（换句话说 - 每 10 秒保存一次相同的位置无济于事）。

在我的运动追踪器应用程序中，我将数据保存在数据库表中（纬度、经度、时间戳......基本上所有你在`Location`对象中得到的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:46:14.400

XML 可以工作，但随着文件中数据量的增加，性能会急剧下降。一年前我有一个类似的项目，我使用了一个 SQLite 数据库。

您要使用的时间段取决于您的需要，每 10 秒获取一次位置可能很多，您可能希望根据速度或区域（城市或高速公路）调整时间段。您还可以依靠 3g（网络而不是 GPS）在密集区域（城市）获得准确、更快和更便宜（就电池而言）的位置修复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:35:02.123

考虑主机的速度，以及重建路径时所需的精度。如果您正在步行，每 30 秒采样一次可能没问题，但如果您在车里，您可能希望更快地采样。另外，我建议使用 XML，并且建议查找 GPX 格式，这也可以为您提供可移植性，因为其他程序会理解它并允许导入/导出。

# javascript-events - 在谷歌地图api v3中关闭信息窗口后居中标记

> ID：13554451
> 
> 赞同：2
> 
> 时间：2012-11-25T19:11:20.637
> 
> 标签：javascript-events

我正在寻找一种在关闭信息窗口后重新居中地图标记的方法。这就是我所拥有的，但它不起作用。

```
google.maps.event.addListener(infoWindow, 'closeclick', function() {        
map.panTo(marker.getPosition());        
}); 
```

我让它工作。这是代码：

```
google.maps.event.addListener(infowindow, 'closeclick', function() {  
map.panTo(marker.getPosition());            
}); 
```

# sql - SQL - 检查另一个表上的数据是否也存在

> ID：13554454
> 
> 赞同：0
> 
> 时间：2012-11-25T19:11:30.747
> 
> 标签：sql, oracle

我正在尝试检查表 trkdriver 和 trkmechanic 中是否存在 L#；

我创建了一个接收 L# 的程序，但问题是我如何检查 trkdriver 和 trkmechanic 中是否存在 L#。

```
execute v_emp(10001); 
```

PLSQL 代码：

```
CREATE OR REPLACE procedure v_emp
(emp_license IN trkdriver.L#%TYPE) 
IS
result VARCHAR2(10);

BEGIN
select e# INTO result
from trkdriver where l#=emp_license;

DBMS_OUTPUT.PUT_LINE('RESULT' || result);
END;
/ 
```

SQL> 从 trkdriver 中选择 E#；

```
 E#
----------
         1
         3
         5
         7
         9
        11
        13 
```

选择了 7 行。

**我在下面尝试检查它是否存在于两个表上：**

```
SQL> select E# from trkdriver where EXISTS (select * from trkmechanic where trkd
river.L# = trkmechanic.L#); 
```

它给了我 0 行返回..

```
SQL> desc trkdriver;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 E#                                        NOT NULL NUMBER(12)
 L#                                        NOT NULL NUMBER(8)
 STATUS                                    NOT NULL VARCHAR2(10)

SQL> desc trkmechanic;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 E#                                        NOT NULL NUMBER(12)
 L#                                        NOT NULL NUMBER(8)
 STATUS                                    NOT NULL VARCHAR2(10)
 EXPERIENCE                                NOT NULL VARCHAR2(10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:50:26.297

```
BEGIN
  EXISTS 
    (SELECT A.L# 
       from trkdriver AS A 
          INNER JOIN
          trkmechanic AS B
          ON A.L#=B.L#
          WHERE A.L# = emp_license
    )
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:24:36.263

试试这个查询：

```
select td.e# INTO result
from trkdriver td
join trkmechanic tm on tm.L#= td.L#
where rd.l#=emp_license; 
```

# python - 使用 Celery 获取“调用 Python 对象时超出最大递归深度”

> ID：13554462
> 
> 赞同：1
> 
> 时间：2012-11-25T19:13:08.477
> 
> 标签：python, celery

我是初学者。我在 Celery 中运行一个任务并收到这个奇怪的错误

> 调用 Python 对象时超出最大递归深度

[您可以在此 pastebin](http://pastebin.com/Wu1vgsW0)中检查完整错误

我不太明白，因为我没有改变任何东西，昨天它工作正常。我在 python 解释器中运行了没有芹菜的任务，它运行良好。您可以在[此处检查功能。](http://pastebin.com/0rXn36Zw)最后，值得一提的是，这个任务被另一个任务创建了 12 次。

您是否看到任何可能导致此类错误的内容？

编辑：

这就是我称之为函数/任务的任务

```
@celery.task(ignore_result=True)
def get_classicdata(leagueid):
    print "getting team data for %s"%leagueid
    returned_data = {}
    for team in r.smembers('league:%s'%leagueid):
        data = scrapteam.delay(team,r.get('currentgw'))
        returned_data[team] = data.get() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:55:55.500

一切看起来都很好。回溯暗示某处返回的对象无法腌制，但您返回的“团队”数据结构是一个字典，其中包含基本类型的非递归数据结构，因此不会导致问题。为了更好的远程调试，请在“返回团队”前加上打印语句，以便显示团队的内容。您也可以尝试让它返回一个 {} 并查看这是否会改变事情。

然后还在 get_classicdata 中添加一个调试打印语句，显示 data.get() 的内容，以及返回之前的内容，以验证该函数是否完成。

# javascript - PhoneGap 应用程序的持久数据

> ID：13554467
> 
> 赞同：11
> 
> 时间：2012-11-25T19:13:23.577
> 
> 标签：javascript, cordova, local-storage

*EDIT#2 - 到目前为止（2 天后）的回复是个人意见和偏好，而不是对离线 phoneGap 应用程序必须在所有相关设备上轻松存储简单数据的各种选项的分析。因此，我没有接受任何答案，但我正在关注这个问题。*

对于正在构建的 PhoneGap Web 应用程序，我应该为哪种格式的持久数据进行调查，我有点困惑。我一直在研究这个，但考虑到我的平庸要求，事情还不清楚。

该应用程序是一个教育应用程序，包含大约 100 道左右的多项选择题和一些记忆游戏。

下载后的应用程序可以保持离线状态。

它适用于所有支持 phonegap 的设备。

我想要读取和写入的唯一数据是用户的表现、错误的总次数、每张卡等以及游戏的任何高分。

这些都是非常基本的信息，可以保存在非常简单的 js 对象中。

我希望它是一个相当简单的解决方案，并且非常易于维护/重复。

我最好的选择是什么？phonegap 文件 api？json/草坪椅？本地存储？饼干？有没有办法“更新”应用程序并将其作为对象保留在 javascript 中？网盘？鳞片？存储 API？

其中一些似乎有些矫枉过正。

编辑设备是否存在差异，我应该进行一些设备检测并使用不同的技术？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T19:59:19.873

我个人喜欢localStorage。它很简单，适用于大多数情况。

如果您只是记录上面提到的数据，localStorage 将是完美的。我只是通过使用 say 将它们变成一个字符串来序列化您的数据对象`JSON.stringify()`，然后在将其拉回使用时`JSON.parse()`将其转换回可用的 JS 对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T04:17:23.957

试试我的库[http://dev.yathit.com/ydn-db/getting-started.html](http://dev.yathit.com/ydn-db/getting-started.html)由 IndexedDB（出色的性能，通过索引扫描查询）、WebSQL（良好的性能，SQL 查询）或 localStorage（一般性能，无查询，按键获取，2.5 MB 限制）。

```
db = new ydn.db.Storage('test-store');

db.put('store1', {test: 'Hello World!'}, 123);

req = db.get('store1', 123);
req.done(function(record) {
  console.log(record);
}); 
```

高性能，同时仍然很容易。

不喜欢库依赖​​，在[https://bitbucket.org/ytkyaw/ydn-db获取原始源代码](https://bitbucket.org/ytkyaw/ydn-db)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-27T04:32:36.813

看起来这些是不错的，虽然我还没有尝试过。

*   [本地饲料](https://github.com/mozilla/localForage)
*   [PouchDB](http://pouchdb.com/)

如果您使用的是使用 AngularJS 的[ionic 框架](http://ionicframework.com/)，我喜欢[ngStorage](https://github.com/gsklee/ngStorage)。这个我试过了，太棒了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-25T20:41:08.243

我使用 localStorage 来保存我的持久数据，但它在某种程度上并不可靠。我看到一些数据丢失，但我不知道为什么。但是我的持久数据使用并不那么重要，所以我不介意这些不一致。

但你的案子似乎更重要。我会使用[File API将我的持久数据存储在](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#File)[Documents 文件夹](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T18:13:39.367

Phonegap 支持 SQL Lite [http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage)

抱歉，我没有更多信息。我对这个话题很感兴趣，碰巧遇到了它。

# jquery - 如何根据元素的存在与否执行 Javascript 函数？

> ID：13554468
> 
> 赞同：0
> 
> 时间：2012-11-25T19:13:22.933
> 
> 标签：jquery

我有以下内容：

```
<li id="abc">x</li> 
```

如何使用 JQuery 检查该元素是否存在，如果存在则执行以下函数？

```
contentControls(ContentButtonAction.Init); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:15:13.560

```
if ($('#abc').length) {
    contentControls(ContentButtonAction.Init);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T19:15:22.207

您可以使用以下内容：

```
if( $('#abc').length ) {
    contentControls(ContentButtonAction.Init);  
} 
```

# html - 垂直居中 div 内的 div

> ID：13554469
> 
> 赞同：0
> 
> 时间：2012-11-25T19:13:41.047
> 
> 标签：html, css

假设我在容器 div 中有 2 个 div，如下所示：

```
<div id="wrapper">
    <div id="title">A</div>
    <div id="text">Some text... Some text... Some text... Some text... Some text... Some text... Some text... Some text... Some text... Some text... Some text... </div>
</div> 
```

正如您从标题中看到的那样，我正在尝试对齐 div`title`并`text`在父 div 内垂直并彼此相邻`wrapper`。到目前为止，我的 CSS 是这样的：

```
#wrapper
{       
    vertical-align:middle;
    display:table-cell;
}

#title
{
    background: url('path_to_purple_background') no-repeat;
    width:45px;
    height:45px;
    color:white;    
}

#text {
    width: 700px;
}

#title, #text {
    display: inline-block;
    vertical-align: middle;
}​ 
```

但是到目前为止，我得到的是字母`A`不在我的 div 内居中`title`（而是位于 div 的左上角）。有人知道我该如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:36:10.527

只是一个想法，但有一个`text-align:center`属性可以添加`#title`，`line-height:HEIGHT OF #TITLE;`也可以添加。这会将 对齐`A`到圆的中心，并设置 的 line-height`A`以匹配圆形容器的高度，从而将其垂直对齐到中间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:25:56.460

[这样](http://jsfiddle.net/SYfPL/)的事情怎么样？我将`display`属性设置`#test, #title`为`table-cell`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:50:23.450

的使用`vertical-align`经常出错。

来自[W3C](http://www.w3.org/wiki/CSS/Properties/vertical-align)：

> vertical-align 属性影响由行内元素生成的框的行框内的垂直定位。

因此，如果您在段落中有内嵌图像，您可以使用它在文本规则内垂直对齐它。

在您的情况下，如果您只需要垂直对齐一条规则，则可以使用旧`line-height`技巧：

```
#title {
  height: 45px;
  width: 45px;
  line-height: 45px;
} 
```

# java - String.endsWith() 不工作

> ID：13554476
> 
> 赞同：1
> 
> 时间：2012-11-25T19:14:20.473
> 
> 标签：java, string, ends-with

我有以下字符串

```
http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP.PDF 
```

我想要它，所以如果用户忘记输入 http:// 或 .PDF，程序会自动更正它。因此，我尝试了这段代码

```
if (!str.startsWith("http://")) { // correct forgetting to add 'http://'
        str = "http://" + str;
    }
    System.out.println(str);
    if (!str.endsWith("\\Q.PDF\\E")) {
        str = str + "\\Q.pdf\\E";
    } 
```

但是，即使我输入了正确的字符串，`http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP.PDF` 输出也是这样。

```
http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP.PDF\Q.pdf\E 
```

为什么？为什么要添加**另一个**“.PDF”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T19:15:59.723

因为最后`http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP.PDF`没有a `\Q.PDF\E`。在字符串文字中，`\\`给你一个反斜杠。所以`"\\Q.PDF\\E"`是`\Q.PDF\E` - 一个反斜杠，后跟一个`Q`，然后是一个点，然后是`PDF`，然后是另一个反斜杠，然后是`E`。

如果您想查看字符串是否以 结尾`.PDF`，只需使用

```
if (!str.endsWith(".PDF")) 
```

当然，这是区分大小写的。如果您希望它不区分大小写，可能：

```
if (!str.toLowerCase().endsWith(".pdf")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T19:25:37.113

海。我认为这就是你想要的：

```
 String str = "http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP";
    //String str = "http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP.PDF";
    if (!str.startsWith("http://")) { // correct forgetting to add 'http://'
        str = "http://" + str;
    }
    System.out.println(str);
    if (!str.endsWith(".PDF")) {
        str = str + ".PDF";
    }
    System.out.println(str);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:17:04.540

**-**这仅仅是因为你的字符串`http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4695-W-SP.PDF` **不**以结尾`\Q.PDF\E`

**-**如果您担心匹配 .PDF，请执行此操作...

```
if (s.endsWith(".PDF")){

  // add it at the end....

} 
```

**-**`StringBuilder`在这里使用而不是`String`可变**的**更合适。

# encryption - 仿射密码的特征是 ax + b 但逆是 a^-1(yb)，怎么会？

> ID：13554479
> 
> 赞同：0
> 
> 时间：2012-11-25T19:14:31.140
> 
> 标签：encryption

我正在研究仿射密码。[维基百科](http://en.wikipedia.org/wiki/Affine_cipher)中的条目说它要加密，你计算：

![仿射加密](../Images/8569b506facb6ad31f58310aa32fee12.png)

并解密你计算：

![在此处输入图像描述](../Images/ef8de940bab8e75da57d6e7cdb93cf0f.png)

我在想你会 [a^-1(y) - b] mod m 来解密。

为什么不是这样？（什么规则，如果有的话，我不清楚吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T02:53:36.463

它是 a^-1(y - b)。这只是让你失望的符号。请注意，他们以 x 作为变量来定义 D(x)。它与 D(y) = a^-1(y - b) 相同

# ruby - 切换到新浏览器窗口时无法控制

> ID：13554481
> 
> 赞同：0
> 
> 时间：2012-11-25T19:14:46.273
> 
> 标签：ruby, selenium-webdriver

在我的自动化中，我必须单击一个按钮，该按钮会打开一个带有搜索结果的新浏览器实例，然后从该窗口中，我必须选择一个要上传的视频。我使用以下命令切换到窗口：

```
driver.switch_to_window( "File Upload" ) 
```

为了上传视频，我必须从该窗口中选择视频，但我不能，因为无法访问该窗口。selenium webdriver 有什么办法可以用 Ruby 或其他一些插件或工具来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:36:32.500

文件上传窗口通常是系统窗口，不能使用 selenium/webdriver 与之交互。在 Java 中，sendkeys 用于键入正在上传的文件的链接。您可以尝试使用等效函数（用于在任何文本字段等函数中键入数据的函数）直接提供指向视频文件的链接。

希望能帮助到你..

# c++ - C++ 中的部分模板函数规范有效，但为什么呢？

> ID：13554496
> 
> 赞同：15
> 
> 时间：2012-11-25T19:16:40.503
> 
> 标签：c++, templates, template-argument-deduction, function-templates

我试图找出模板函数的部分规范是否是 C++ 标准的一部分，或者这是否是特定于编译器的东西。

通过部分规范，我的意思是仅指定编译器无法推断的类型。因此，如果我有一个模板函数“f”，它采用 3 种类型，其中一种用于参数并且可以推导出来，我可能会使用表单调用“f”`f<type, type>(parameter)`

这是一个例子：

```
#include <iostream>
#include <tuple>
#include <string>

template<class A, class B, class C>
std::tuple<A, B> test(C c)
{
    // do something based on c, return tuple with types A and B
    return std::make_tuple(A(), B());
}

int main(void)
{
    // I expected I would have to use this form.  Specify all parameters.
    std::tuple<int, int> value3 = test<int, int, int>(5);

    // Here, I only specified the return value types, did not specify the parameter type, yet it compiles.
    auto value1 = test<int, int>("c-string");

    // Similar example here.  Return types specified, parameter type deduced.  Compiles fine.
    auto value2 = test<std::string, int>(42);

    return 0;
} 
```

我已经用 g++ 4.5.3、g++ 4.6.3、VS2010 和 VS2012 对此进行了测试。由于它似乎得到了编译器的广泛支持，我敢打赌它是标准的一部分，但有人能证实吗？有没有人有任何资源链接或指针可以解释为什么这样做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-25T19:41:53.033

C++03 标准第 14.8.1.2 段说明

“可以从显式模板参数列表中省略可以推导出的尾随模板参数 (14.8.2)。”

# linux - 为什么 vim 的 d 运算符行为不端？

> ID：13554503
> 
> 赞同：3
> 
> 时间：2012-11-25T19:17:04.430
> 
> 标签：linux, vim

几天前，我决定使用 Vim 文本编辑器... 玩弄 vimtutor 我发现**d**运算符非常罕见；Vim 会话：

## 情况1

**之前：**快速红色 F `o`x 跳过懒惰的棕色狗
**之后：**    快速红色 F跳过懒惰的棕色狗

结果：符合预期。

## 案例2

*将光标放在单词的最后一个字符上。*

**之前：**快速红佛`x`跳过懒惰的棕色狗
**之后：**    快速红佛跳过懒惰的棕色狗

结果：**de**删除了“x Jumps”子字符串。

## 案例3

*将光标放在最后一个单词的最后一个字符上。*

**之前：**快速的红狐跳过懒惰的布朗做`g`
**之后：**    快速的红狐跳过懒惰的布朗做

结果：符合预期。

* * *

请注意：

*   在这两种情况下，我都使用该`de`命令。
*   **after：**反映应用`de`命令后的变化。
*   突出显示的部分代表编辑器中的光标位置。

问题：

1.  这是一个错误吗？
2.  难道我做错了什么？
3.  怎么了？

Vim 版本：7.3.50 版；由 Gentoo-7.3.50 修改

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T19:20:37.033

当您已经在单词的末尾时，`de`将删除到下一个单词的末尾。
`d`是*操作员*命令。它接受*运动*命令（`e`或其他）。
当你`e`在词尾按下时，你可以看到行为是一致的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T19:23:41.900

按下时`e`，vim 会将您带到*单词的末尾*。如果光标在`x`in fox 上，则表示您*已经在那里*，因此`e`转到单词的*下一个*结尾。

因此，`de`也将删除`jumps`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:20:51.083

请记住，de 是 2 个命令`d`删除。`e`是单词的结尾。

在一个单词的末尾发出`e`会跳转到下一个单词的末尾。所以 de 从当前位置删除到下一个单词的结尾。您可能想尝试`dw`或`daw`

另见`:help e`和`:help d`

# bash - 程序化保管箱共享

> ID：13554506
> 
> 赞同：2
> 
> 时间：2012-11-25T19:17:21.347
> 
> 标签：bash, node.js, curl, dropbox, dropbox-api

是否有任何选项通过 dropbox api（即 REST 版本）以编程方式执行共享选项，或者是否有人发明或发现了一种使用 unix 或 nodejs 命令行工具的独特方法？卷曲等

我基本上想通过脚本/命令行邀请人们到保管箱文件夹，并通过脚本/命令行接受邀请。

现在，要接受邀请，您必须单击 2 个链接，一个在电子邮件中，然后一个在您的 Dropbox Web 界面中。

为了邀请，必须登录保管箱，单击要共享的文件夹，然后输入电子邮件并单击按钮。

我想在简单的 ol 终端中完成这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:38:23.083

Dropbox API 目前不提供任何管理共享文件夹的调用（例如，创建、接受等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-30T21:16:46.747

我刚刚发布了这个小宝石来使用 Web 界面执行此操作：[https ://github.com/Jesus/dropbox-invite](https://github.com/Jesus/dropbox-invite)

正确的方法是通过 API 来实现，但由于没有官方实现，我不得不构建一个解决方法。

# java - 静态变量初始化的顺序，Java

> ID：13554507
> 
> 赞同：12
> 
> 时间：2012-11-25T19:17:33.627
> 
> 标签：java, static

> **可能重复：**
> [Java静态类初始化](https://stackoverflow.com/questions/3499214/java-static-class-initialization)
> [按什么顺序执行类中的静态块和静态变量？](https://stackoverflow.com/questions/12448465/in-what-order-are-static-blocks-and-static-variables-in-a-class-executed)

当我运行这段代码时，答案是 1，我认为它会是 2。初始化的顺序和每一步中 k 的值是什么？

```
public class Test {

    static {k = 2;}
    static int k = 1;

    public static void main(String[] args) {
        System.out.println(k);
    }
} 
```

编辑 1：作为“k 设置为默认值”的后续行动，那么为什么下一个代码无法编译？出现错误“在定义之前无法引用字段”。

```
public class Test {

    static {System.out.println(k);}
    static int k=1;

    public static void main(String[] args) {
        System.out.println(k);
    }
} 
```

编辑2：对于一些我不知道的原因，它^在代替“k”而不是“Test.k”时起作用。

感谢所有的答案。这就足够了：D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-25T19:28:53.180

它们按照您编写它们的顺序执行。如果代码是：

```
public class Test {

    static int k = 1;
    static {k = 2;}

    public static void main(String[] args) {
        System.out.println(k);
    }

} 
```

然后输出变为 2。

初始化的顺序是：[..类变量初始化器和类的静态初始化器......，按照文本顺序，就好像它们是一个单独的块一样。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)

并且值（对于您的代码）是：k = 0（默认值），然后将其设置为 2，然后将其设置回 1。

您可以通过运行以下代码来检查它是否实际设置为 2：

```
private static class Test {

    static {
        System.out.println(Test.k);
        k = 2;
        System.out.println(Test.k);
        }
    static int k = 1;

    public static void main(String[] args) {
        System.out.println(k);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T21:22:39.113

**简短的回答**

当类初始化开始时，`k`初始值为 0。

然后执行静态块（因为它在声明中的赋值之前），`k`并将被赋值为 2。

然后声明中的初始化器被执行，并被`k`赋值为 1。

**长解释**

让我们使用[这个例子](http://ideone.com/O7rPiD)，因为你的例子有点简单：

```
class TestInitOrder {
  static {
    System.out.println(TestInitOrder.stat1);
    System.out.println(TestInitOrder.stat2);
    System.out.println(TestInitOrder.str);
    System.out.println(TestInitOrder.str2);

    str = "something";

    System.out.println(TestInitOrder.str);
    System.out.println(TestInitOrder.str2);
    System.out.println(TestInitOrder.lazy);
    System.out.println(TestInitOrder.second);
  }

  private static final int stat1 = 10;
  static final String str2 = "sdfff";
  static String str = "crap";
  private static int stat2 = 19;
  static final Second second = new Second();
  static final int lazy;

  static {
    lazy = 20;
  }

  static {
    System.out.println(TestInitOrder.str2);
    System.out.println(TestInitOrder.stat2);
    System.out.println(TestInitOrder.str);
    System.out.println(TestInitOrder.lazy);
    System.out.println(TestInitOrder.second);
  }

  public static void main(String args[]) {
  }

}

class Second {
  public Second() {
    System.out.println(TestInitOrder.second);
  }
} 
```

根据[Java Language Specification](http://docs.oracle.com/javase/specs/)，从[第 4.12.5 节开始](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.5)：

> 程序中的每个变量在使用它的值之前都必须有一个值：
> 
> *   每个类变量、实例变量或数组组件在创建时都使用默认值进行初始化

（规范中的以下几行指定了所有类型的默认值，基本上是某种形式的 0，例如`0`、`0.0d`、`null`、`false`等）

所以在类被初始化之前（由于[这些原因之一](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)），变量将保持一个初始值。

根据[详细的初始化过程](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)（这里只引用有趣的步骤，并强调我的）：

> 6\. [...] 然后，初始化其值为***编译*****时常量表达式的接口的****`final`类变量**和**字段**（第 8.3.2.1 节、第 9.3.1 节、第 13.4.9 节、第 15.28 节）。
> 
>  ***[...]
> 
> 9\. 接下来，按照文本顺序执行类的类变量初始化程序和静态初始化程序，或者接口的字段初始化程序，就好像它们是一个单独的块一样。***

 ***让我们看一下第 6 步，使用 4 个`final`类变量：`stat1`、`str2`、`second`、`lazy`。

由于`10`是常量表达式， 也是`"sdfff"`，并且由于执行顺序，不可能*观察*`str2`和的初始值`stat1`。为了进行观察，您最早可以在步骤 9 中进行。

案例`second`证明当右手边不是编译时常量表达式时，所以它的初始值是可见的。

的情况`lazy`不同，因为分配是在静态块中完成的，因此发生在第 9 步 - 因此可以观察其初始值。（好吧，编译器会仔细检查`lazy`只分配了一次）。

* * *

在使用编译时常量表达式初始化最终类变量之后，执行静态块和其余的初始化程序。

从示例中可以看出，静态块和初始化是根据文本顺序进行的 - 使用`str`变量进行演示 - 首先打印为`null`, 然后`something`, 然后`crap`。***

# css - 如何使用百分比定义高度？

> ID：13554508
> 
> 赞同：1
> 
> 时间：2012-11-25T19:17:48.827
> 
> 标签：css, fluid-layout

我正在尝试创建一个需要流体调整大小的网站。当我使用 %. 当我使用 px 或 em 时效果很好。

我正在尝试定位名为 flexslider 2 的 jquery 展示的滑块。它是一个链接到两个图像的 div 元素。可以在底部找到原始 html 的示例。[http://flexslider.woothemes.com/](http://flexslider.woothemes.com/)

```
<div style="padding:5px;">
    <div class="flexslider">
         <ul class="slides">
             <li><img src="images/ussc1.jpg" alt="01" /></li>
             <li><img src="images/ussc2.jpg" alt="02" /></li>
         </ul>
     </div>
</div> 
```

这是CSS。

```
.flexslider { 
    max-width:940px; 
    width: 40%;
    margin: 0 auto;
    top: 20%; 
    position:absolute; 
} 
```

我究竟做错了什么？请帮忙！我提前道歉，我对网页设计很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:49:15.133

检查“职位”的拼写，应该是：

```
.flexslider{
    position:absolute;
} 
```

如果位置未正确指定，“顶部”和“底部”样式将无法使用百分比！

# java - 添加元素时出现 Java XML DOM 错误

> ID：13554509
> 
> 赞同：0
> 
> 时间：2012-11-25T19:17:52.477
> 
> 标签：java, xml, dom, hierarchy

我正在尝试复制此 XML：

```
<?xml version="1.0"?>
<AccessRequest xml:lang="en-US">
  <AccessLicenseNumber>YourLicenseNumber</AccessLicenseNumber>
  <UserId>YourUserID</UserId>
  <Password>YourPassword</Password>
</AccessRequest>
<?xml version="1.0"?>
<AddressValidationRequest xml:lang="en-US">
  <Request>
    <TransactionReference>
      <CustomerContext>Your Test Case Summary Description</CustomerContext>
      <XpciVersion>1.0</XpciVersion>
    </TransactionReference>
    <RequestAction>XAV</RequestAction>
    <RequestOption>3</RequestOption>
  </Request>

  <AddressKeyFormat>
    <AddressLine>AIRWAY ROAD SUITE 7</AddressLine>  
    <PoliticalDivision2>SAN DIEGO</PoliticalDivision2>
    <PoliticalDivision1>CA</PoliticalDivision1>
    <PostcodePrimaryLow>92154</PostcodePrimaryLow>
    <CountryCode>US</CountryCode>
  </AddressKeyFormat>
</AddressValidationRequest> 
```

我正在使用一个类来构建请求：

```
 public UpsRequestBuilder()
    {
        try
        {
            DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

            doc = docBuilder.newDocument();
        }
        catch(Exception e)
        {
            System.out.println(e.getMessage());
        }
    }

    public void accessRequestBuilder(String accessKey, String username, String password)
    {
        Element accessRequest = doc.createElement("AccessRequest");
        doc.appendChild(accessRequest);

        Element license = doc.createElement("AccessLicenseNumber");
        accessRequest.appendChild(license);
        license.setTextContent(accessKey);

        Element userId = doc.createElement("UserId");
        accessRequest.appendChild(userId);
        userId.setTextContent(username);

        Element pass = doc.createElement("Password");
        accessRequest.appendChild(pass);
        pass.setTextContent(password);

        System.out.println("completed Requestbuilder");
    }

    public void addAddress(Address address)
    {
        Element addressKeyFormat = doc.createElement("AddressKeyFormat");
        doc.appendChild(addressKeyFormat);

        Element addressLine = doc.createElement("AddressLine");
        addressKeyFormat.appendChild(addressLine);
        addressLine.setTextContent(address.getState() + ' ' + address.getStreet2());

        Element city = doc.createElement("PoliticalDivision2");
        addressKeyFormat.appendChild(city);
        city.setTextContent(address.getCity());

        Element state = doc.createElement("PoliticalDivision1");
        addressKeyFormat.appendChild(state);
        state.setTextContent(address.getState());

        Element zip = doc.createElement("PostcodePrimaryLow");
        addressKeyFormat.appendChild(zip);
        zip.setTextContent(address.getZip());

        Element country = doc.createElement("CountryCode");
        addressKeyFormat.appendChild(country);
        country.setTextContent(address.getCountry()); 
        System.out.println("completed addAddress");
    }

    public void validateAddressRequest(String customerContextString, String action)
    {

        Element addressValidation = doc.createElement("AddressValidationRequest");
        doc.appendChild(addressValidation);
        Element transactionReference = doc.createElement("TransactionReference");
        addressValidation.appendChild(transactionReference);

        Element customerContext = doc.createElement("CustomerContext");
        Element version = doc.createElement("XpciVersion");
        transactionReference.appendChild(customerContext);
        customerContext.setTextContent(customerContextString); //TODO figure out a way to optionally pass context text
        transactionReference.appendChild(version);
        version.setTextContent("1.0");//change this if the api version changes

        Element requestAction = doc.createElement("RequestAction");
        addressValidation.appendChild(requestAction);
        requestAction.setTextContent(action);
        System.out.println("completed validateAddressRequest");
    } 
```

这是使用它的函数：

```
public void validateAddress(Address address)
    {
        UpsRequestBuilder request = new UpsRequestBuilder();
        request.accessRequestBuilder(accessKey, username, password);
        request.validateAddressRequest("", "3");
        request.addAddress(address);

        System.out.println(request.toString());

    } 
```

当我尝试从中打印出 XML 时，我收到错误**“HIERARCHY_REQUEST_ERR：尝试插入不允许的节点”。**当我尝试将 addressValidation 元素添加到文档（doc）时，它发生在 validateAddressRequest 函数中。这是确切的行：

```
doc.appendChild(addressValidation); 
```

将此元素添加到文档有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:20:23.727

> 将此元素添加到文档有什么问题？

您正在尝试将其添加到文档的顶层。你不能这样做，因为文档已经有一个根元素。任何 XML 文档都只能有一个根元素。

您在问题顶部显示的 XML 不是单个 XML 文档 - 它是两个。

# python - 当将'A'传递给函数时，循环没有捕捉到我希望停止而不是经历所有可能性

> ID：13554512
> 
> 赞同：0
> 
> 时间：2012-11-25T19:18:06.147
> 
> 标签：python, python-3.x

```
import itertools   

def bruteForce3 (PasswordIn):  
    Password =''  
    while(Password != PasswordIn):

        bruteForceLen1(PasswordIn)
        bruteForceLen2(PasswordIn)
        bruteForceLen3(PasswordIn)
        bruteForceLen4(PasswordIn)
        bruteForceLen5(PasswordIn)
        bruteForceLen6(PasswordIn)
        bruteForceLen7(PasswordIn)
        bruteForceLen8(PasswordIn)
        bruteForceLen9(PasswordIn)
        bruteForceLen10(PasswordIn)

    print('DONE ',Password, " = ",PasswordIn)

def bruteForceLen1(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',1)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen2(PasswordIn):        
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',2)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen3(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',3)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen4(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',4)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen5(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',5)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen6(PasswordIn):
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',6)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen7(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',7)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen8(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',8)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen9(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',9)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password)

def bruteForceLen10(PasswordIn):  
    gen = itertools.combinations_with_replacement('ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890',10)
    for Password in gen:
        Password = ''.join(Password)
        print(PasswordIn, Password) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:20:14.710

`Password``''`在函数中设置为`bruteForce3`并且永远不会在该范围内再次设置。函数中的`Password`变量是这些`xLenN`函数的局部变量，对`Password != PasswordIn`决定`while`循环是否继续的测试 ( ) 没有影响。但是，`while`循环设置为在一次迭代中遍历所有组合。当名称设置为某个值`while`时，循环不会神奇地中断。`Password`当每次迭代完成时（或`continue`从 d 开始），根据测试中断 while 循环的决定就完成了。

# date - 日期字段类型在 sqlite3 中显示文本关联

> ID：13554513
> 
> 赞同：3
> 
> 时间：2012-11-25T19:18:10.693
> 
> 标签：date, sqlite

参加这个 sqlite3 交互式会话：

```
sqlite> create table d(t date);
sqlite> insert into d values('1913-12-23');
sqlite> select t,typeof(t) from d;
1913-12-23|text
sqlite> 
```

为什么日期字段显示为类型文本？如果是数字，存储空间会更小，查询会更快吗？

[根据第 2.2 节中的表格， Sqlite3 数据类型文档](http://www.sqlite.org/datatype3.html)显示日期列的亲和性是数字。我猜想存储为数值而不是文本的日期字段会占用更少的空间，所以这将是理想的。我很可能还没有很好地掌握 sqlite，所以我的担忧可能是无效的。

为了方便复制/粘贴：

```
create table d(t date);
insert into d values('1913-12-23');
select t,typeof(t) from d; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:55:32.690

`typeof('1913-12-23')`返回的原因`text`是它`'1913-12-23'`是一个字符串，并且作为字符串存储在表中。只有当转换是无损的时，类型关联才会发挥作用；例如，该值`'123456'`将转换为数字。

SQLite 没有本机日期数据类型。为了让[内置日期函数](http://www.sqlite.org/lang_datefunc.html)处理日期，您必须将它们存储为`yyyy-mm-dd`字符串或数字（儒略日数字或自 Unix 纪元以来的秒数）。

整数占用的存储空间比字符串少，因此如果数据库的瓶颈是 I/O，则查询会更快，这很可能。

# c++ - 使用 Poco DirectoryWatcher

> ID：13554516
> 
> 赞同：0
> 
> 时间：2012-11-25T19:18:22.737
> 
> 标签：c++, poco-libraries

我想使用类 Poco::DirectoryWatcher 来接收有关出现在目录中的新文件的通知。我创建 DirectoryWatcher 对象

```
DirectoryWatcher dw (string ("dir")); 
```

然后我在向 event 添加 delagate 时遇到问题`itemAdded`。我想使用对象的 onAdd 方法`listener`，它实例化类`Controller`

```
class Controller {
  public:
  void onAdd (const void*, DirectoryWatcher::DirectoryEvent&) {
      cout << "Event" << endl;
  }
};

.....

Controller listener;
dw.itemAdde += delegate (&listener, &Controller::onAdd); 
```

在这里我收到编译错误。我做错了什么，我该怎么做？

包括所有必需的标题。

Poco 库 1.45、Xubuntu 12.04、gcc 4.6。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:56:57.093

试试这个，模板需要 const 事件 arg：

```
void onAdd (const void*, const DirectoryWatcher::DirectoryEvent&) {
    cout << "Event" << endl;
} 
```

# c# - ImageUpload 的问题（AjaxControlToolKit 和 AsyncFileUpload）

> ID：13554518
> 
> 赞同：1
> 
> 时间：2012-11-25T19:18:29.963
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, image-uploading, asyncfileupload

我的 imageuplad 使用 AjaxControlToolKit 时遇到问题。我可以上传文件并在不回发的情况下显示它们，但如果用户改变主意并上传另一张图片，它仍然会显示第一张图片。我们将不胜感激。

这是我的代码： 前面：

```
<%@ Register TagPrefix="asp" Namespace="AjaxControlToolkit" Assembly="AjaxControlToolkit" %>

    <script type="text/javascript">
        function uploadComplete(sender, args) {
            var pathForUploadedImage = $('#uploadedHiddenField').val();                               
            $get("uploadImageImg").src = $('#uploadedHiddenField').val();
            $(".uploadImage").fadeIn(100);

        }
</script>

<asp:Image id="uploadImageImg" class="uploadImage" alt="" runat="server" ClientIDMode="Static" />
<div id="uploadedImageDiv"></div>
<asp:Image ID="loader" runat="server" ImageUrl="~/library/images/loading.gif" Style="display: None" />
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" />
<asp:AsyncFileUpload ID="AsyncFileUpload1" runat="server" OnClientUploadComplete="uploadComplete" OnUploadedComplete="AsyncFileUpload1_UploadedComplete" CompleteBackColor="white" />
<asp:HiddenField ID="uploadedHiddenField" ClientIDMode="Static"  runat="server"/> 
```

然后回来：

```
 protected void AsyncFileUpload1_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
    {

        try
        {

            Styling.SetupStyles();
            string virualFolder = "";
            if (string.IsNullOrEmpty(UploadDirectory))
            {
                virualFolder = "/" + Styling.GetStyleValue("customNewsImagesFolder", "") + "/";
            }
            else
            {
                virualFolder = "/" + Styling.GetStyleValue(UploadDirectory, "") + "/";
            }

            string fileExtension = Path.GetExtension(e.FileName);

            int fileSize = Convert.ToInt32(e.FileSize);

            string physicalFolder = Server.MapPath(virualFolder);

            string randomFileName = System.IO.Path.GetRandomFileName().Replace(".", "");

            bool isUnique = true;
            DirectoryInfo dir = new DirectoryInfo(MapPath(virualFolder));
            FileInfo[] files = dir.GetFiles();
            foreach (FileInfo myFile in files)
            {
                if (myFile.Name == randomFileName)
                {
                    isUnique = false;
                }
            }

            IsAllowedFileExtension(fileExtension);

            bool error = false;

            if (!isUnique)
            {
                error = true;
                ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(), "tmp", "<script type='text/javascript'>alert('En fil med detta namn finns redan, var vänlig och döp om din fil');</script>", false);
            }
            else if (!IsAllowedMaxFileSize(fileSize))
            {
                error = true;
                ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(), "tmp", "<script type='text/javascript'>alert('Filen är för stor, vänligen försök igen med en fil som är mindre än 2 MB');</script>", false);
            }
            else if (!IsAllowedFileExtension(fileExtension))
            {
                error = true;
                ScriptManager.RegisterClientScriptBlock(this.Page, this.GetType(), "tmp", "<script type='text/javascript'>alert('Felaktigt filformat, vänligen försök igen med en fil av följande typ: .jpg .jpeg .png .gif');</script>", false);
            }

            if (!error)
            {
                AsyncFileUpload1.SaveAs(physicalFolder + randomFileName + fileExtension);
                string thePath = (virualFolder + randomFileName + fileExtension).Replace("\\", "/");

                ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "filePath", "top.$get(\"" + uploadedHiddenField.ClientID + "\").value = '" + thePath + "';", true);                

            }
        }
        catch (Exception ex)
        {
            erLog.LogException(ex, System.Reflection.MethodBase.GetCurrentMethod().Name);
        }
    }

    private bool IsAllowedFileExtension(string fileExtension)
    {
        bool valid = false;
        if (fileExtension.ToLower() == ".jpg" || fileExtension.ToLower() == ".jpeg" || fileExtension.ToLower() == ".gif" || fileExtension.ToLower() == ".png")
            valid = true;
        return valid;
    }

    private bool IsAllowedMaxFileSize(int fileSize)
    {
        bool valid = false;
        if (fileSize < 2100000)
            valid = true;
        return valid;
    } 
```

我认为问题与我使用“ScriptManager.RegisterClientScriptBlock”行显示图像有关，但如果脚本已经在 DOM 中，它似乎没有注册脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:03:28.183

您没有指定 AsyncFileUpload1_UploadedComplete 事件处理程序是否在控件或页面内。如果它在控制范围内而不是解决您的问题，您可以尝试使用页面实例注册客户端脚本。其他选项是在每个部分回发时生成唯一的脚本 ID。

选项 1（向页面实例注册客户端脚本）：

```
ScriptManager.RegisterClientScriptBlock(this, this.Page, "filePath", "top.$get(\"" + uploadedHiddenField.ClientID + "\").value = '" + thePath + "';", true); 
```

选项 2（在每个部分回发时生成唯一的脚本 ID）：

```
ScriptManager.RegisterClientScriptBlock(this, this.GetType(), Guid.NewGuid().ToString(), "top.$get(\"" + uploadedHiddenField.ClientID + "\").value = '" + thePath + "';", true); 
```

# xcode - dyld 未加载原因：找不到图像 libopencv_core.2.4.dylib

> ID：13554520
> 
> 赞同：10
> 
> 时间：2012-11-25T19:18:52.800
> 
> 标签：xcode, opencv, dylib

我对 Objective C 和 Xcode 还是很陌生，但我刚刚完成了一个使用 openCV 的小应用程序`libopencv_core.2.4.2.dylib`。

当我在**另一台机器**上打开最终构建的应用程序时，OS X 向我抛出了这个错误：

```
Dyld Error Message:   Library not loaded: */libopencv_core.2.4.dylib  
Referenced from: /Users/USER/Desktop/my
app.app/Contents/MacOS/my app   
Reason: image not found 
```

为什么我的应用在这里寻找 2.4 而不是 2.4.2？

我已经检查过的内容：

我添加了一个新的构建阶段 -> 以便将`libopencv_core.2.4.2.dylib`其复制到应用程序包中（通过 Xcode 中的“复制捆绑资源”） -`libopencv_core.2.4.2.dylib`现在位于我的`app.app/Resources`

我错过了什么？我是否设置了更多的库搜索路径或类似路径？

我还做了什么：

```
install_name_tool -id "@executable_path/../Frameworks/libopencv_core.2.4.2.dylib" libopencv_core.2.4.2.dylib 
```

将 dylib 复制到 Frameworks 目录也不起作用：

```
Library not loaded: @executable_path/../Frameworks/libopencv_core.2.4.2.dylib 
```

不知道现在该做什么 - dylib在我的应用*程序*的 Frameworks 目录中......

在二进制文件上使用`otool -L`给了我：

```
/System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa (compatibility version 1.0.0, current version 19.0.0)
    @loader_path/../Frameworks/libopencv_core.2.4.2.dylib (compatibility version 2.4.0, current version 2.4.2)
    @loader_path/../Frameworks/libopencv_highgui.2.4.2.dylib (compatibility version 2.4.0, current version 2.4.2)
    @loader_path/../Frameworks/libopencv_imgproc.2.4.2.dylib (compatibility version 2.4.0, current version 2.4.2)
    /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation (compatibility version 300.0.0, current version 945.11.0)
    /usr/lib/libobjc.A.dylib (compatibility version 1.0.0, current version 228.0.0)
    /usr/lib/libstdc++.6.dylib (compatibility version 7.0.0, current version 56.0.0)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 169.3.0)
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation (compatibility version 150.0.0, current version 744.1.0)
    /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData (compatibility version 1.0.0, current version 407.7.0)
    /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit (compatibility version 45.0.0, current version 1187.33.0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T10:51:35.593

I had the same problem. i keep all .dylib in system root directory **usr/lib** it working fine. At the run time .o file not get .dylib file path then it gives an error.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T17:41:29.750

我找到了一个更好的解决方案：在 Xcode 中重新编译 openCV 并`@executable_path/../Frameworks`在构建设置中为您编译的每个 .dylib 设置 - 现在`.dylibs`它们自己总是“知道它们在哪里”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T16:28:55.443

由于其他答案不够清楚；

假设您的 dylib 文件位于`/usr/local/opt/opencv3/lib`

```
sudo ln -s /usr/local/opt/opencv3/lib/*.dylib /usr/local/lib 
```

将解决这个问题。请注意，`/usr/lib`在 MacOS 中受系统保护，因此您应该使用`/usr/local/lib`.

# java - 线程不起作用

> ID：13554523
> 
> 赞同：0
> 
> 时间：2012-11-25T19:19:17.733
> 
> 标签：java, multithreading, swing

我有一个对象的“void extends thread”。

我制作了 2 个按钮：A 用于线程对象 a，B 线程用于对象 b。问题是当我只按 A 或 B 时线程工作得很好，但是当我按下 A 后按 B 时它不起作用。而我解决不了。请告诉我如何解决它。代码喜欢这样。

```
buttonA.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent arg0){
        thread(object a).run();
}
buttonB.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent arg0){
        thread(object b).run();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T19:24:33.190

啊，你`run()`不是`start()`在线程上调用的。这将不允许线程在后台线程上调用其代码，而是在 Swing 事件线程上调用它。而是调用`start()`. 如果这没有帮助，那么请提出一个更好的问题。

# bing-maps - BING MAPS Windows 应用商店图钉 MapView

> ID：13554528
> 
> 赞同：1
> 
> 时间：2012-11-25T19:19:46.437
> 
> 标签：bing-maps, windows-store-apps

我的 Windows 应用商店应用中有一个地图，它添加了多个图钉。

有没有办法让地图控件“MapVew/ZoomLevel”自动调整为始终缩放到所有图钉都可见的水平？

提前致谢。

/埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:41:13.213

应该很容易做到：

1.  [从图钉坐标列表中获取 LocationRect](http://msdn.microsoft.com/en-us/library/hh846491.aspx)
2.  [在地图上调用 SetView 并将 LocationRect 传递给它](http://msdn.microsoft.com/en-us/library/hh846504.aspx)
3.  每次更改可见图钉的集合时，重做第 1 步和第 2 步。

# javascript - Javascript 保存表单搜索

> ID：13554529
> 
> 赞同：0
> 
> 时间：2012-11-25T19:19:46.530
> 
> 标签：javascript, jquery, forms

如何**在 session/localmachine 中保存数据（搜索）**，我的意思是，保存更少的数据库，所有表单字段以供将来每次提交表单时使用？

(...)

```
$('#button_submit').click(function() {
    var start_date = $('#start_date').val();
    var end_date = $('#end_date').val();
    var type = $('#type').val();
    var tempArr = new Array();
    var json = window.sessionStorage['search'];
    if(json)
        tempArr = JSON.parse(json);
    tempArr.push(JSON.parse('{"start_date" : "'+start_date+'" , "end_date" : "'+end_date+'" , "type" : "'+type+'"}'));
    window.sessionStorage['search'] = JSON.stringify(tempArr);
    drawChart(start_date, end_date, type)
}); 
```

(...)

这段代码不能解决我的问题。

我需要保存`start_date`，每次提交表单时的值，`end_date`并`type`为旧搜索创建一些按钮/链接，以便能够看到旧结果。

关键是*抓住*这些值并将它们*粘贴*在这个**drawChart(start_date, end_date, type)**中。这是将产生我的结果的功能。

用我的代码我得到了`[{"start_date":"2012-02-05","end_date":"2012-12-26","type":"pie"}]`这是 tempArray [0]。但我需要的是抓住这个`start_date`和分离的价值，`end_date`而`type`不是像 atm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:28:02.680

你可以使用[persistjs](http://pablotron.org/?cid=1557)。如果您想自己编写它，只需使用带有 cookie 的 localStorage（而不是 SessionStorage）作为后备（基本上对于 <= IE7）来保存旧搜索。可以在这里找到一个很好的解释（包括后备代码）：

[https://developer.mozilla.org/en-US/docs/DOM/Storage](https://developer.mozilla.org/en-US/docs/DOM/Storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:33:39.850

对于这个问题，使用合适的对象localSorage，虽然不是所有的浏览器都支持。支持的浏览器：[http ://www.w3schools.com/html/html5_webstorage.asp](http://www.w3schools.com/html/html5_webstorage.asp)

例子

```
localStorage.setItem('resultSearch', JSON.stringify({a: "1234"}));
.....
// submit, and reload page
var b = JSON.parse(localStorage.getItem('resultSearch')); 
```

# ms-access - 查找第 n 次出现

> ID：13554535
> 
> 赞同：1
> 
> 时间：2012-11-25T19:20:23.847
> 
> 标签：ms-access

我有一个查询，它生成一个类似于下面的表，但是与它关联的每个图像都复制了唯一的活页夹。我试图找出一种方法，让每个附加列返回同一行中关联图像的第 n 次出现，而不是为每个匹配创建一个新行。

**当前回报：**

```
Binder ID   Image Name
 1943C6     FILE00000047.pdf
 1943C7     FILE00000389.pdf
 1943C7     FILE00000303.pdf
 1943C7     FILE00000048.pdf
 1943D5     FILE00000049.pdf 
```

**首选：**

```
Binder ID   Image Name          Image Name          Image Name
 1943C6     FILE00000047.pdf        
 1943C7     FILE00000389.pdf    FILE00000303.pdf    FILE00000048.pdf
 1943D5     FILE00000049.pdf 
```

是否可以使用 Microsoft Access 2010 获得首选结果？谢谢

# objective-c - 如何在有条件的屏幕之间移动（如果...）

> ID：13554544
> 
> 赞同：1
> 
> 时间：2012-11-25T19:21:13.033
> 
> 标签：objective-c, ios

假设我有一个注册类，并通过（UIButton）“Go”按钮检查用户输入的所有字段，所有字段都是 UITextField。我为 Register 类中的“Go”按钮做了一个动作，通过推送移动到下一个 ViewController，也在动作函数中我检查用户输入（例如错误的电子邮件 x@xxx），如果用户输入了错误输入我不想移动到新屏幕。所以，长话短说，我的问题是我如何创造条件在屏幕之间移动。“如果用户输入了正确的输入，那么请移动......否则留下来”我不想制作另一个按钮来检查表单的正确性，然后，首先用户将按下检查按钮然后第二个按钮发送形式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:35:14.487

```
-(BOOL) validateField:(UITextField *)field{

// perform your validation and return YES or NO

return YES;
} 
```

在您的按钮操作中

```
BOOL validated = NO;

if ([self validateField:textfield1]){

validated = YES;.

}else{
return; // or your error message
}
if ([self validateField:textfield2]){

validated = YES;
}else{

return;// or your error message

} 
```

等等..

```
if (validated){
[self pushViewController:yourcontroller]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:35:49.137

最简单的方法是使用`BOOL`. 例如，您可以将此 BOOL 设置`false`为方法内`viewDidLoad`。如果您对输入数据所做的所有检查都正确传递，则将其设置`BOOL`为`true`. 现在您可以使用此值来推送下一个视图控制器或不推送它。例如

```
if (theBOOL) {
    // push the next view controller
} else {
    // display a message on the current view controller to recheck the input data
} 
```

# asp.net - 在 WiX 安装程序中的应用程序池上设置禁用重叠回收

> ID：13554546
> 
> 赞同：4
> 
> 时间：2012-11-25T19:21:27.123
> 
> 标签：asp.net, iis-7, wix

我目前有一个 WiX 安装程序，用于将 Web 应用程序部署到 IIS 中。

该应用程序利用 Lucene.Net 及其近乎实时的搜索功能。

不幸的是，这样做的副作用是 Lucene 索引在应用程序运行期间保持打开/锁定。这意味着如果“禁用重叠回收”设置为 false，那么当应用程序池回收时（例如在升级期间），我们会遇到 lucene 索引仍被前一个实例锁定的问题。

解决方法是在应用程序池的高级设置中将“禁用重叠回收”更改为 True，但我无法弄清楚如何使用 wix 执行此操作。

无论如何我可以通过WiX自动设置这个值吗？

仅供参考 - 这是我的安装程序项目中 WebAppPool 部分当前的样子：

```
<iis:WebAppPool Id="AppPool" Name="Some App" ManagedRuntimeVersion="v4.0"
    IdleTimeout="0" RecycleMinutes="0" ManagedPipelineMode="integrated"
    Identity="networkService" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T21:06:59.477

有时，您会遇到 WiX 或 InstallShield 提供的自定义操作未公开的 IIS 元数据库属性。在这些情况下，通常最容易使用[Quiet Execute Custom Action调用](http://wix.sourceforge.net/manual-wix3/qtexec.htm)[AppCmd.exe](http://www.iis.net/learn/get-started/getting-started-with-iis/getting-started-with-appcmdexe)。

基本上充分利用 IIS 扩展，然后在安装结束时调整应用程序池。

# c# - 使用 Microsoft Office 内置资源进行插件本地化

> ID：13554548
> 
> 赞同：1
> 
> 时间：2012-11-25T19:21:35.687
> 
> 标签：c#, localization, vsto, powerpoint, office-interop

可以使用 MS Offices 内置的本地化资源吗？

我找到的所有教程/指南都解释了如何创建自己的本地化资源，但是对于非常常见的 3 个字符串（更改、确定和取消）来说，这似乎需要做很多工作。

# html - 为什么 .class:last-of-type 不能按我的预期工作？

> ID：13554552
> 
> 赞同：80
> 
> 时间：2012-11-25T19:22:08.050
> 
> 标签：html, css, css-selectors

为什么这不起作用？[http://jsfiddle.net/84C5W/1/](http://jsfiddle.net/84C5W/1/)

```
p{
    display: none;
}
p.visible:last-of-type {
    display: block;
}
```

```
<div>
  <p class="visible">This should be hidden</p>
  <p class="visible">This should be displayed</p>
  <p class="">This should be hidden</p>
</div>
```

事实上，我的`<p>`元素都不可见。如果我在选择器中删除对的引用`.visible`，这确实会显示`<p>`div 中的最后一个，但这不是我想要的。

当然，我只能一直保留一个`.visible`，但这是用于显示.js 的演示文稿，我无法控制 JavaScript。

如何使用类选择 div 中的最后一个元素`.visible`？我不想为此使用 JavaScript。

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-11-25T19:37:49.603

您的问题是您正在阅读`:last-of-type`并认为它可以用作`:last-of-class`选择器，而实际上它*仅表示元素*。不幸的是，类的最后一个实例没有选择器。

来自[W3C](https://www.w3.org/TR/selectors-3/#last-of-type-pseudo)：

> `:last-of-type`伪类表示一个元素，它是其类型的最后一个兄弟元素。

你有`p.visible:last-of-type`作为你的选择器，它执行以下操作：

1.  查看 HTML 中每个包含元素中的每个元素列表（例如 1 个或多个元素；没有兄弟姐妹的子元素仍然可以`:last-of-type`应用于它）
2.  查找该列表中的最后一个元素
3.  检查它是否是一个`<p>`元素
4.  检查它是否有类`.visible`。

简而言之，您的选择器只会将其样式应用于`<p>` *也具有*该类`.visible`的 a。在您的标记中，只有前两个`<p>`元素具有该类；第三个没有。

这是一个不同风格的演示来说明：

```
p:last-of-type {
  /* this will be applied in the third paragraph because the pseudo-selector checks for nodes only */
  color: green;
}
p.visible:last-of-type {
  /* this does not get applied, because you are using the pseudo-selector with a specific class in addition to the node type. */
  color: red;
}
```

```
<p class="visible">First paragraph.</p>
<p class="visible">Second paragraph.</p>
<p>Third paragraph.</p>
```

根据您的最终目标，

> 如何使用 .visible 类选择 div 中的最后一个元素？我不想为此使用 JavaScript。

最简单和最有效的方法是反转您尝试应用样式的方式；而不是试图隐藏三个 div 中的两个，其中一个要隐藏的 div 有一个类，另一个要隐藏的 div 没有类，并且要显示的 div 与要隐藏的一个 div 共享相同的类它*也*有一个类（看到？这很令人困惑），请执行以下操作：

*   仅将类添加到较小的元素（或元素组）。
*   将元素的默认样式设置为您不希望类实现的样式。
*   将类上的样式设置为您想要实现的样式。

```
p {
    display: none;
}
.visible {
    display: block;
}
```

```
<div>
    <p>This should be hidden</p>
    <p class="visible">This should be displayed</p>
    <p>This should be hidden</p>
</div>
```

正如您从这个演示中看到的那样，您的 HTML 和 CSS 不仅更简单，而且还具有仅使用类选择器而不是`*-of-type`伪选择器的好处，这将使页面加载更快（见下文） .

**为什么没有*跟随*或*父选择器*？** 通过在页面上动态更改一个类名，这可能会降低许多网页的速度。

Dave Hyatt 在 2008 年致力于 WebKit 实现时，[提到了避免这些实现的一些原因](http://www.shauninman.com/archive/2008/05/05/css_qualified_selectors#comment_3942)：

> 使用父选择器，很容易意外地导致文档范围内的 grovel。人们可以并且将会滥用这个选择器。支持它就是给人们很多绳子来吊死自己。
> 
> 关于 CSS3 选择器的可悲事实是，如果您关心页面性能，则根本不应该使用它们。用类和 id 装饰您的标记并仅在这些上进行匹配，同时避免使用兄弟、后代和子选择器，实际上会使页面在所有浏览器中的性能显着提高。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-25T19:32:48.040

问题是`:last-of-type`只匹配元素选择器。在您的示例中，您尝试匹配`class`选择器。这就是为什么它不起作用。

一个例子：[http ://dabblet.com/gist/4144885](http://dabblet.com/gist/4144885)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-16T04:26:10.037

定位倒数第二个标签。

```
.visible:nth-last-of-type(2) {} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-05-31T10:12:21.250

为了将来参考，这将在 CSS 级别 4 中介绍：[https ://www.w3.org/TR/selectors4/#the-nth-last-match-pseudo](https://www.w3.org/TR/selectors4/#the-nth-last-match-pseudo)

在撰写本文时，浏览器支持不存在：http: [//css4-selectors.com/selector/css4/structural-pseudo-class/](http://css4-selectors.com/selector/css4/structural-pseudo-class/)

准备好后，这应该是解决方案：

```
p {
  display : none;
}
p.visible:nth-last-match(0) {
  display : block;
}
```

```
<div>
  <p class="visible">This should be hidden</p>
  <p class="visible">This should be displayed</p>
  <p class="">This should be hidden</p>
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-10T07:59:38.197

这就是我解决非类问题的方法——不幸的是，这是一个 Javascript 解决方案：

```
function lastOfType(className){
            var allElemsOfType = document.getElementsByClassName(className);
            if (!allElemsOfType || !allElemsOfType.length) return null;
            else return allElemsOfType[allElemsOfType.length - 1];
    }

lastOfType('visible').style.display = 'block'
```

```
.visible {
  display: none;
}

p {
  display: none;
}
```

```
<p class='visible'>1</p>
<p class='visible'>2</p>
<p>3</p>
```

# xml - R 的 XML 包：抓取受密码保护的站点

> ID：13554553
> 
> 赞同：2
> 
> 时间：2012-11-25T19:22:15.843
> 
> 标签：xml, r, web-scraping

我想将数据从受密码保护的站点自动下载到 R 中。示例包括用于个人下载的 https 站点（银行和信用卡对帐单）以及专业工作（VPN 和订阅站点）。所有活动都是完全合法的（例如受密码保护），我怀疑其他用户已经或将遇到类似的需求。

我是用于网络抓取的 XLM 包的常规用户，但我对文档的阅读几乎没有说明需要密码的 URL 导航。任何帮助表示赞赏。

# android - Android项目中是否可以引用jre系统库？

> ID：13554554
> 
> 赞同：-1
> 
> 时间：2012-11-25T19:22:18.637
> 
> 标签：android, awt, java

我使用 awt 类开发了我的 java 代码。当我将此代码复制到我的 Android 项目时，我遇到了错误。所以我在构建路径中添加了 JRE 系统库。现在能用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:23:48.397

不，Android UI 不是基于 AWT 构建的。（有一些 AWT 类可用，但基本上没有很多字体。）您应该只使用[Android 开发人员文档](http://developer.android.com/reference/packages.html)中列出的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:25:08.517

将其移至 Android 平台时不会。

Android 是一种使用 Java 语法/关键字但实现不同 API 的语言。只要他们可以保留并复制它（参见更常见的类，如`java.lang.String`），但有时他们不能

如果 Android 模拟器中缺少该类，则设备中也会缺少该类，并且很可能不是您将无法移植它。

# entity-framework-5 - 外键验证错误

> ID：13554559
> 
> 赞同：1
> 
> 时间：2012-11-25T19:22:41.487
> 
> 标签：entity-framework-5

当我有这个简单的模型时：

```
public class User
{
    // Primary key
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid UserId { get; set; }

    [Required]
    public Int32 FailedPasswordAttemptCount { get; set; }

    [Required]
    public Language Language { get; set; }
} 
public class Language
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid LanguageId { get; set; }

    [MaxLength(30)]
    public String LocaleName { get; set; }
} 
```

我做这个代码：

```
var user = context.Users.Single(u => u.UserId == userId);
user.FailedPasswordAttemptCount++;
context.SaveChanges(); 
```

它会抛出一个`DbEntityValidationException`异常`The Language field is required.`。

从技术上讲，这是正确的，因为该属性被标记为必需，并且`Language`从数据库中获取该属性时为空（没有延迟或急切加载）。

但是我该如何改变这种行为呢？

*   我不想完全禁用验证
*   我不想懒惰/急切地加载该字段
*   我不想从模型中删除必需标签

还有哪些其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:51:56.287

您可以通过将原始 FK 字段（可能`LanguageId`）添加到您的`User`类来防止这种情况。这在实体框架中并不少见。在更多情况下，获取或设置原始属性可以节省工作或不必要的（延迟）加载。

# haskell - Snap 框架：如何在处理程序中运行 IO

> ID：13554560
> 
> 赞同：3
> 
> 时间：2012-11-25T19:22:49.617
> 
> 标签：haskell, monads, haskell-snap-framework

这可能是一个简单的问题，我在 SO 上看到过类似的问题，但我仍然卡住了。

我正在尝试进行 HTTP 调用以提取另一个博客的内容并将其显示在我的页面上。这更像是一种学习练习。

这是我的处理程序

```
blog :: App1Handler ()
blog = do
  contents <- Requester.getUrl "http://someblog.com/"
  heistLocal (bindString "contents" contents) . render $ "blog" 
```

Requester.getUrl 具有签名 getUrl :: String -> IO T.Text

我回来的错误是

> src/Main.hs:50:15:
> 无法匹配预期类型`Handler App1 App1 t0' with actual type`IO T.Text'
> 在“getUrl”调用的返回类型中
> 在“do”块的结构中：
> 内容 <- getUrl "http:/ /someblog.com/"
> 在表达式中：
> do { contents <- getUrl "http://someblog.com/";
> heistLocal (bindString "contents" 内容) 。渲染$“博客”}

据我所知，我被困在 IO monad 中，它需要类型 Handler App1 App1 t0。我已经尝试在某些地方粘贴 liftIO ，但我对此感到很困惑。

谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:08:18.390

您只需要执行返回`liftIO`的操作，如下所示：`IO``getUrl`

```
contents <- liftIO $ Requester.getUrl "http://someblog.com/" 
```

这里的推理很简单。你有一个 type 的 do-block `App1Handler ()`，这意味着这个 do-block 中任何语句的右侧`<-`都必须有 type `App1Handler a`。

但是，`getUrl`返回`IO Text`，所以你需要一个函数来转换 `IO a`，`App1Handler a`这正是`liftIO`它所做的。

```
liftIO :: MonadIO m => IO a -> m a 
```

# javascript - 在标记和固定点之间画线 - Google Maps API v3

> ID：13554565
> 
> 赞同：1
> 
> 时间：2012-11-25T19:23:59.193
> 
> 标签：javascript, google-maps-api-3

如何在标记和固定点之间画线 - Google Maps API v3

我使用该代码在 2 个固定点之间画了一条线，并 **使用 google api v3放置了一个标记**

如何替换**标记位置** *而不是*2 个固定点之一？

```
<!DOCTYPE html>
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCwID2UsBJvwVKEMx_U53brmIC8EOLsBFo&sensor=false">
</script>

<script>

function initialize()
{

var x=new google.maps.LatLng(52.395715,4.888916);

var mapProp = {
  center:x,
  zoom:4,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);

 google.maps.event.addListener(map, "mousemove", function(pt) { 
      document.getElementById("latlgn").innerHTML = pt.latLng; 
    });

      var marker = new google.maps.Marker({
  draggable: true,
  position: x,
  map: map,
  title: "Your location"
  });

  google.maps.event.addListener(marker, 'dragend', function (event) {
    document.getElementById("latbox").value = this.getPosition().lat();
    document.getElementById("lngbox").value = this.getPosition().lng();
});

var lat = "80";
var lng = "80"; 
var stavanger=new google.maps.LatLng(lat,lng);
var london=new google.maps.LatLng(51.508742,-0.120850);

var myTrip=[stavanger,london];
var flightPath=new google.maps.Polyline({
  path:myTrip,
  strokeColor:"#0000FF",
  strokeOpacity:0.9,
  strokeWeight:2
  });

flightPath.setMap(map);

google.maps.event.addDomListener(window, 'load', initialize);
}

</script>
</head>
 <div id="latlong">
    <p>Latitude: <input size="20" type="text" id="latbox" name="lat" ></p>
    <p>Longitude: <input size="20" type="text" id="lngbox" name="lng" ></p>
  </div>
<body onLoad="initialize()">

<div id="googleMap" style="width:500px;height:380px;"></div>
<div id="latlgn"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:03:09.243

将 - 变量设置 `myTrip`为

```
[stavanger,marker.getPosition()] 
```

这将首先在 stavanger 和标记位置之间画一条线。

要在标记移动时保持线条更新，请在 marker.dragend 的回调中使用 PolyLine(flightPath) 的 setPath 方法

```
 google.maps.event.addListener(marker, 'dragend', function (event) {
    document.getElementById("latbox").value = this.getPosition().lat();
    document.getElementById("lngbox").value = this.getPosition().lng();
    flightPath.setPath([flightPath.getPath().getAt(0),
                        new google.maps.LatLng(this.getPosition().lat(),
                                               this.getPosition().lng())]);
}); 
```

* * *

根据要求，将行尾设置为中心的修改：

```
var myTrip=[stavanger,map.getCenter()];

google.maps.event.addListener(map, 'center_changed', function (event) {
    flightPath.setPath([flightPath.getPath().getAt(0),this.getCenter()])
}); 
```

# ruby-on-rails - 为什么我的 Rails 应用程序默认将 config/database.yml 包含在 .gitignore 文件中？

> ID：13554566
> 
> 赞同：3
> 
> 时间：2012-11-25T19:24:00.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, version-control

为什么 config/database.yml 默认会包含在 .gitignore 文件中？这个小东西花了我一两个小时。

我偶然遇到这个麻烦的方式：

*   我以为我对 git 如何处理重置和恢复感到困惑。
*   我一直在尝试影响 config/database.yml 的代码更改
*   我不喜欢结果，所以我放弃了更改。
*   这很奇怪，因为我似乎无法签出未经编辑的 config/database.yml 版本
*   然后我花了太多时间试图弄清楚我是否误解了 git 的重置和合并命令。
*   结果 config/database.yml 默认包含在 .gitignore 文件中。

不知道为什么。花了我一个小时左右的时间摆弄重置和合并选项，结果发现我什至没有跟踪文件。在我写这篇文章时，我意识到我并不完全确定 .gitignore 何时被编写/修改为包含 config/database.yml

有什么理由应该在那里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:34:07.553

该文件通常不会包含用于在版本控制系统中跟踪的有趣内容。

但是，它**通常**包含用于连接数据库服务器的密码，不应公开。

它还经常包含需要在不同工作副本、数据库服务器的不同用户或数据库名称、SQLite 文件的不同路径之间有所不同的信息。这些差异将导致无法在版本控制系统中跟踪此文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-25T19:24:00.727

如果您看到 'git reset' 和 'git revert' 似乎没有任何效果的文件，您可能会发现该文件列在项目根目录的 .gitignore 文件中。

# google-chrome - 隐形 SoundCloud iframe

> ID：13554568
> 
> 赞同：2
> 
> 时间：2012-11-25T19:24:07.803
> 
> 标签：google-chrome, iframe, xmlhttprequest, flash, soundcloud

在包含多个 SoundCloud iframe 的页面上，这些 iframe 的随机子集在 Chrome 和 Firefox 中均不可见，并且它们不包含正常的 SoundCloud 内容，而是包含以下 HTML。受影响的 iframe 通常会随着每次页面加载而变化，同一页面上的 youtube iframe 不受影响。有谁知道原因和/或解决方法？

更新：进一步检查，这*是*标准的 SoundCloud 内容，除了 div id="widget" 是空的，并且在单个 iframe 上手动重新加载 iframe 会强制它可见。这可能是第一次加载 iframe 的情况，然后使用 XHR 获取 div 内容，并且在浏览器在拥挤的网络上处理大量负载的页面上，一些 XHR 静默超时？如果是这样 SoundCloud，你能增加你的 XHR 超时吗？

更新 2：我在同一 LAN 上的 2 台不同机器上对此进行了更多测试，看起来这可能是当前版本的标准 Flash 插件（winXP 上的 11.5.502.110——通过自动更新安装9，大约是什么时候开始的，以及 Ubuntu 12.04 上的 11.2.202——今天安装，11 月 27 日）。以下信息应使其可重现。我在两台机器上的 Firefox 中都得到 100% 一致的故障，并且我可以通过启用标准插件与 Chrome 自己的 PepperFlash 插件在 Chrome（两台机器上）中打开和关闭故障。PepperFlash 100% 没有失败，但当前版本的 PepperFlash 播放器无法使用，因为[音频](http://productforums.google.com/forum/#!topic/chrome/LdKbj-prkfc)非常不稳定。

```
<html lang="en">
    <head>
        <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no">
        <title>SoundCloud Widget</title>
        <base target="_blank">
        <link rel="stylesheet" href="/player/assets/widget-22748325.css">
        <script src="/player/assets/widget-ab572693.js"></script>
        <script>
            require(["lib/support", "lib/flash-widget"], function(support, flashWidget) {if (support.newWidget) { require(["application"], function(A) {A.start("207ad5d2")}) } else { $(flashWidget.start); }});
        </script>
    </head>
    <body class=" hasGoogleVoiceExt">
        <div id="widget" style="height: 100%;"></div>
        <div id="sm2-container" class="high_performance swf_error" style="z-index: 10000;"><embed name="sm2movie" id="sm2movie" src="/player/assets/swf-8bc33658/soundmanager2_flash9.swf" quality="high" allowscriptaccess="always" bgcolor="#ffffff" pluginspage="www.macromedia.com/go/getflashplayer" title="JS/Flash audio component (SoundManager 2)" type="application/x-shockwave-flash" wmode="transparent" haspriority="true"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:00:42.710

在给 Adob​​e 几个月的时间让他们一起行动之后，我再次看了一下这个问题，现在这个问题在 XP 上的 Chrome 和 Firefox 中消失了，版本为 11.5.502.149 的 Flash 播放器。我还没有检查过 Ubuntu，但大概他们也将更改推到了那里。

# c++ - SD.h 与 Arduino/C++ 环境中的其他库不兼容

> ID：13554570
> 
> 赞同：0
> 
> 时间：2012-11-25T19:24:27.510
> 
> 标签：c++, arduino

我在使用以下硬件元素时遇到了一些非常奇怪的问题：

*   [阿杜诺](http://arduino.cc/en/Main/ArduinoBoardUno)
*   [Wi-Fi](http://en.wikipedia.org/wiki/Wi-Fi) [屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)
*   GPS接收器
*   加速度计
*   晴雨表

我想根据需要将传感器读数卸载到 SD 卡上，但在我编写 SD 函数之前，仅仅包含`SD.h`库就使我的代码毫无用处。

我的代码如下：

```
#include <SoftwareSerial.h>
#include <TinyGPS.h>
#include <SD.h>

/* This sample code demonstrates the normal use of a TinyGPS object.
   It requires the use of SoftwareSerial, and assumes that you have a
   4800-baud serial GPS device hooked up on pins 3(rx) and 4(tx).
*/

//For baraometer
#include <Wire.h>

#define BMP085_ADDRESS 0x77  // I2C address of BMP085

const unsigned char OSS = 2;  // Oversampling Setting

// Calibration values
int ac1;
int ac2;
int ac3;
unsigned int ac4;
unsigned int ac5;
unsigned int ac6;
int b1;
int b2;
int mb;
int mc;
int md;

// b5 is calculated in bmp085GetTemperature(...), this variable is also used in bmp085GetPressure(...)
// So ...Temperature(...) must be called before ...Pressure(...).
long b5;
//End of baraometer

//ACcelerometer
// These constants describe the pins. They won't change:
const int xpin = A1;                  // x-axis of the accelerometer
const int ypin = A2;                  // y-axis
const int zpin = A3;                  // z-axis (only on 3-axis models)
//end of accel

TinyGPS gps;
SoftwareSerial nss(3, 4);

static void gpsdump(TinyGPS &gps);
static bool feedgps();
static void print_float(float val, float invalid, int len, int prec);
static void print_int(unsigned long val, unsigned long invalid, int len);
static void print_date(TinyGPS &gps);
static void print_str(const char *str, int len);

void setup()
{
  //Make sure the analog-to-digital converter takes its reference voltage from
  // the AREF pin
  analogReference(EXTERNAL);

  pinMode(xpin, INPUT);
  pinMode(ypin, INPUT);
  pinMode(zpin, INPUT);

  //Barometer
  Wire.begin();
  bmp085Calibration();

  //GPS
  Serial.begin(115200);
  nss.begin(57600);

  Serial.print("Testing TinyGPS library v. "); Serial.println(TinyGPS::library_version());
  Serial.println("by Mikal Hart");
  Serial.println();
  Serial.print("Sizeof(gpsobject) = "); Serial.println(sizeof(TinyGPS));
  Serial.println();
  Serial.println("Sats HDOP Latitude Longitude Fix  Date       Time       Date Alt     Course Speed Card  Distance Course Card  Chars Sentences Checksum");
  Serial.println("          (deg)    (deg)     Age                        Age  (m)     --- from GPS ----  ---- to London  ----  RX    RX        Fail");
  Serial.println("--------------------------------------------------------------------------------------------------------------------------------------");
}

void loop()
{
  //Accelerometer
  Serial.print( analogRead(xpin));
  Serial.print("\t");

  //Add a small delay between pin readings.  I read that you should
  //do this but haven't tested the importance
    delay(1);

  Serial.print( analogRead(ypin));
  Serial.print("\t");
  //add a small delay between pin readings.  I read that you should
  //do this but haven't tested the importance
    delay(1);

  Serial.print( analogRead(zpin));
  Serial.print("\n");  // delay before next reading:

  bool newdata = false;
  unsigned long start = millis();

  // Every second we print an update
  while (millis() - start < 1000)
  {
    if (feedgps())
      newdata = true;
  }

  //barometer
  float temperature = bmp085GetTemperature(bmp085ReadUT()); //MUST be called first
  float pressure = bmp085GetPressure(bmp085ReadUP());
  float atm = pressure / 101325; // "standard atmosphere"
  float altitude = calcAltitude(pressure); //Uncompensated caculation - in Meters

  Serial.print("Temperature: ");
  Serial.print(temperature, 2); //display 2 decimal places
  Serial.println(" C");

  Serial.print("Pressure: ");
  Serial.print(pressure, 0); //whole number only.
  Serial.println(" Pa");

  Serial.print("Standard Atmosphere: ");
  Serial.println(atm, 4); //display 4 decimal places

  Serial.print("Altitude: ");
  Serial.print(altitude, 2); //display 2 decimal places
  Serial.println(" M");

  Serial.println();//line break
  //end of barometer

  gpsdump(gps);
}

static void gpsdump(TinyGPS &gps)
{
  float flat, flon;
  unsigned long age, date, time, chars = 0;
  unsigned short sentences = 0, failed = 0;
  static const float LONDON_LAT = 51.508131, LONDON_LON = -0.128002;

  print_int(gps.satellites(), TinyGPS::GPS_INVALID_SATELLITES, 5);
  print_int(gps.hdop(), TinyGPS::GPS_INVALID_HDOP, 5);
  gps.f_get_position(&flat, &flon, &age);
  print_float(flat, TinyGPS::GPS_INVALID_F_ANGLE, 9, 5);
  print_float(flon, TinyGPS::GPS_INVALID_F_ANGLE, 10, 5);
  print_int(age, TinyGPS::GPS_INVALID_AGE, 5);

  print_date(gps);

  print_float(gps.f_altitude(), TinyGPS::GPS_INVALID_F_ALTITUDE, 8, 2);
  print_float(gps.f_course(), TinyGPS::GPS_INVALID_F_ANGLE, 7, 2);
  print_float(gps.f_speed_kmph(), TinyGPS::GPS_INVALID_F_SPEED, 6, 2);
  print_str(gps.f_course() == TinyGPS::GPS_INVALID_F_ANGLE ? "*** " : TinyGPS::cardinal(gps.f_course()), 6);
  print_int(flat == TinyGPS::GPS_INVALID_F_ANGLE ? 0UL : (unsigned long)TinyGPS::distance_between(flat, flon, LONDON_LAT, LONDON_LON) / 1000, 0xFFFFFFFF, 9);
  print_float(flat == TinyGPS::GPS_INVALID_F_ANGLE ? 0.0 : TinyGPS::course_to(flat, flon, 51.508131, -0.128002), TinyGPS::GPS_INVALID_F_ANGLE, 7, 2);
  print_str(flat == TinyGPS::GPS_INVALID_F_ANGLE ? "*** " : TinyGPS::cardinal(TinyGPS::course_to(flat, flon, LONDON_LAT, LONDON_LON)), 6);

  gps.stats(&chars, &sentences, &failed);
  print_int(chars, 0xFFFFFFFF, 6);
  print_int(sentences, 0xFFFFFFFF, 10);
  print_int(failed, 0xFFFFFFFF, 9);
  Serial.println();
}

static void print_int(unsigned long val, unsigned long invalid, int len)
{
  char sz[32];
  if (val == invalid)
    strcpy(sz, "*******");
  else
    sprintf(sz, "%ld", val);
  sz[len] = 0;
  for (int i=strlen(sz); i<len; ++i)
    sz[i] = ' ';
  if (len > 0)
    sz[len-1] = ' ';
  Serial.print(sz);
  feedgps();
}

static void print_float(float val, float invalid, int len, int prec)
{
  char sz[32];
  if (val == invalid)
  {
    strcpy(sz, "*******");
    sz[len] = 0;
        if (len > 0)
          sz[len-1] = ' ';
    for (int i=7; i<len; ++i)
        sz[i] = ' ';
    Serial.print(sz);
  }
  else
  {
    Serial.print(val, prec);
    int vi = abs((int)val);
    int flen = prec + (val < 0.0 ? 2 : 1);
    flen += vi >= 1000 ? 4 : vi >= 100 ? 3 : vi >= 10 ? 2 : 1;
    for (int i=flen; i<len; ++i)
      Serial.print(" ");
  }
  feedgps();
}

static void print_date(TinyGPS &gps)
{
  int year;
  byte month, day, hour, minute, second, hundredths;
  unsigned long age;
  gps.crack_datetime(&year, &month, &day, &hour, &minute, &second, &hundredths, &age);
  if (age == TinyGPS::GPS_INVALID_AGE)
    Serial.print("*******    *******    ");
  else
  {
    char sz[32];
    sprintf(sz, "%02d/%02d/%02d %02d:%02d:%02d   ",
        month, day, year, hour, minute, second);
    Serial.print(sz);
  }
  print_int(age, TinyGPS::GPS_INVALID_AGE, 5);
  feedgps();
}

static void print_str(const char *str, int len)
{
  int slen = strlen(str);
  for (int i=0; i<len; ++i)
    Serial.print(i<slen ? str[i] : ' ');
  feedgps();
}

static bool feedgps()
{
  while (nss.available())
  {
    if (gps.encode(nss.read()))
      return true;
  }
  return false;
}

// Stores all of the bmp085's calibration values into global variables
// Calibration values are required to calculate temp and pressure
// This function should be called at the beginning of the program
void bmp085Calibration()
{
  Serial.write("\n\nCalibrating ... ");
  ac1 = bmp085ReadInt(0xAA);
  ac2 = bmp085ReadInt(0xAC);
  ac3 = bmp085ReadInt(0xAE);
  ac4 = bmp085ReadInt(0xB0);
  ac5 = bmp085ReadInt(0xB2);
  ac6 = bmp085ReadInt(0xB4);
  b1 = bmp085ReadInt(0xB6);
  b2 = bmp085ReadInt(0xB8);
  mb = bmp085ReadInt(0xBA);
  mc = bmp085ReadInt(0xBC);
  md = bmp085ReadInt(0xBE);
  Serial.write("Calibrated\n\n");
}

// Calculate temperature in deg C
float bmp085GetTemperature(unsigned int ut){
  long x1, x2;

  x1 = (((long)ut - (long)ac6)*(long)ac5) >> 15;
  x2 = ((long)mc << 11)/(x1 + md);
  b5 = x1 + x2;

  float temp = ((b5 + 8)>>4);
  temp = temp /10;

  return temp;
}

// Calculate pressure given up
// calibration values must be known
// b5 is also required so bmp085GetTemperature(...) must be called first.
// Value returned will be pressure in units of Pa.
long bmp085GetPressure(unsigned long up){
  long x1, x2, x3, b3, b6, p;
  unsigned long b4, b7;

  b6 = b5 - 4000;
  // Calculate B3
  x1 = (b2 * (b6 * b6)>>12)>>11;
  x2 = (ac2 * b6)>>11;
  x3 = x1 + x2;
  b3 = (((((long)ac1)*4 + x3)<<OSS) + 2)>>2;

  // Calculate B4
  x1 = (ac3 * b6)>>13;
  x2 = (b1 * ((b6 * b6)>>12))>>16;
  x3 = ((x1 + x2) + 2)>>2;
  b4 = (ac4 * (unsigned long)(x3 + 32768))>>15;

  b7 = ((unsigned long)(up - b3) * (50000>>OSS));
  if (b7 < 0x80000000)
    p = (b7<<1)/b4;
  else
    p = (b7/b4)<<1;

  x1 = (p>>8) * (p>>8);
  x1 = (x1 * 3038)>>16;
  x2 = (-7357 * p)>>16;
  p += (x1 + x2 + 3791)>>4;

  long temp = p;
  return temp;
}

// Read 1 byte from the BMP085 at 'address'
char bmp085Read(byte address)
{
  Wire.beginTransmission(BMP085_ADDRESS);
  Wire.write(address);
  Wire.endTransmission();
  Wire.requestFrom(BMP085_ADDRESS, 1);
  while(!Wire.available()) {};
  return Wire.read();
}

// Read 2 bytes from the BMP085
// First byte will be from 'address'
// Second byte will be from 'address'+1
int bmp085ReadInt(byte address)
{
  unsigned char msb, lsb;

  Wire.beginTransmission(BMP085_ADDRESS);
  Wire.write(address);
  Wire.endTransmission();

  Wire.requestFrom(BMP085_ADDRESS, 2);
  while(Wire.available()<2)
    ;
  msb = Wire.read();
  lsb = Wire.read();

  return (int) msb<<8 | lsb;
}

// Read the uncompensated temperature value
unsigned int bmp085ReadUT(){
  unsigned int ut;

  // Write 0x2E into Register 0xF4
  // This requests a temperature reading
  Wire.beginTransmission(BMP085_ADDRESS);
  Wire.write((byte)0xF4);
  Wire.write((byte)0x2E);
  Wire.endTransmission();

  // Wait at least 4.5 ms
  delay(5);

  // Read two bytes from registers 0xF6 and 0xF7
  ut = bmp085ReadInt(0xF6);
  return ut;
}

// Read the uncompensated pressure value
unsigned long bmp085ReadUP(){
  unsigned char msb, lsb, xlsb;
  unsigned long up = 0;

  // Write 0x34+(OSS<<6) into register 0xF4
  // Request a pressure reading w/ oversampling setting
  Wire.beginTransmission(BMP085_ADDRESS);
  Wire.write(0xF4);
  Wire.write(0x34 + (OSS<<6));
  Wire.endTransmission();

  // Wait for conversion, delay time dependent on OSS
  delay(2 + (3<<OSS));

  // Read register 0xF6 (MSB), 0xF7 (LSB), and 0xF8 (XLSB)
  msb = bmp085Read(0xF6);
  lsb = bmp085Read(0xF7);
  xlsb = bmp085Read(0xF8);

  up = (((unsigned long) msb << 16) | ((unsigned long) lsb << 8) | (unsigned long) xlsb) >> (8-OSS);

  return up;
}

void writeRegister(int deviceAddress, byte address, byte val) {
  Wire.beginTransmission(deviceAddress); // Start transmission to device
  Wire.write(address);       // Send register address
  Wire.write(val);           // Send value to write
  Wire.endTransmission();    // End transmission
}

int readRegister(int deviceAddress, byte address){
  int v;
  Wire.beginTransmission(deviceAddress);
  Wire.write(address); // Register to read
  Wire.endTransmission();

  Wire.requestFrom(deviceAddress, 1); // Read a byte

  while(!Wire.available()) {
    // waiting
  }

  v = Wire.read();
  return v;
}

float calcAltitude(float pressure){

  float A = pressure/101325;
  float B = 1/5.25588;
  float C = pow(A,B);
  C = 1 - C;
  C = C /0.0000225577;

  return C;
} 
```

当然，现在，它只是多个示例草图的集合，但它们有效。我每秒从加速度计、GPS 单元和气压计获得一次采样读数。但是，一旦我简单地将线条添加`#include <SD.h>`到草图中，它就无法正确运行。串行监视器不显示任何内容。我有上述草图的类似版本（省略，因为它们更长），但我得到相同的结果：要么是混乱的文本，要么在串行监视器上什么都没有。如果我注释掉包含 SD.h 库的行，一切正常......

库是否存在已知问题`SD.h`或冲突？是的，我没有为我的传感器连接使用 SD 访问所需的引脚（数字引脚 #4）....

更新：

我至少发现它与 SoftSerial (SoftSerial.h) 库和 SoftSerial 对象（我称之为 nss）的使用有关。如果我不调用 nss.begin，我可以加载所有库并让一切正常工作。有没有理由会发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T07:58:23.123

原来我的记忆力不足。让 Serial 像这样无响应是一种常见的症状。这个[链接](http://arduino.cc/playground/Code/AvailableMemory)最终是我用来追踪和总结我的记忆问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:47:19.710

首先要检查`Arduino`网站，在`SD`文档（[此处](http://arduino.cc/en/Reference/SD)）上提到，在和上发生的`microcontroller`和`SD card`使用`SPI`（[此处](http://arduino.cc/en/Reference/SPI)的文档）之间的通信。如果这是您的显示器问题的根源，我不会感到惊讶。`digital pins` `11``12``13``Serial`

阅读 中的一些评论`Sd2Card.h`，让您的设置正常工作可能会很棘手：

```
/**
 * Define MEGA_SOFT_SPI non-zero to use software SPI on Mega Arduinos.
 * Pins used are SS 10, MOSI 11, MISO 12, and SCK 13.
 *
 * MEGA_SOFT_SPI allows an unmodified Adafruit GPS Shield to be used
 * on Mega Arduinos.  Software SPI works well with GPS Shield V1.1
 * but many SD cards will fail with GPS Shield V1.0.
 */ 
```

即使您设置`MEGA_SOFT_SPI`了非 0 值，您也可能仍然无法通过`(defined(__AVR_ATmega1280__)||defined(__AVR_ATmega2560__))`检查。

我建议您尝试相同的草图，而无需`TinyGPS`尝试查明问题。

另外，看看[这个草图](http://arduino.cc/forum/index.php?action=printpage;topic=120653.0)，它似乎在做一些类似于你正在做的事情，也许你可以根据这里所做的来修复你的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T10:51:09.180

将引脚 4 用于 CS 并在 Sd2card.h 中更改库 SD 中的 MOSI、MISO 和 SCK 引脚，希望您能解决这个问题

# c# - 在Web浏览器c#中延迟刷新

> ID：13554573
> 
> 赞同：0
> 
> 时间：2012-11-25T19:24:35.467
> 
> 标签：c#, browser, refresh

如何延迟刷新 webBrowser 中的页面？我使用`Sleep`但这冻结了我的应用程序

```
 for (int i = 0; i < iteruj; i++) 
    {                
        webBrowser1.Refresh();
        Thread.Sleep(1000);
    } 
```

我怎样才能做到这一点？

如何检查页面是否已完全加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:46:18.630

如果您需要每 10 秒刷新一次，可以使用 Timer。

```
var timer = new Timer(state => webBrowser.Refresh(), null, 0, 10000); 
```

当你想停止刷新使用

```
timer.Dispose(); 
```

# iphone - 故事板场景游戏结束屏幕

> ID：13554577
> 
> 赞同：0
> 
> 时间：2012-11-25T19:24:48.640
> 
> 标签：iphone, objective-c, ios

我是编程和 Obj-c 的新手，正在寻找一些关于我遇到的问题的清晰度。我正在使用故事板来展示我游戏的每一页，在主游戏场景中，我有代码可以在某个时间实例化 Game Over 屏幕，但我担心我调用新场景的方式不是获得我所追求的正确方法。

目前，主场景继续在 Game Over 屏幕下运行，相反我希望它停止游戏场景中的所有内容，只有得分值被传输到 Game Over 页面。

我当前加载游戏结束屏幕的代码：

```
-(void)goGameOver
{
//Send to Game Over screen
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"gameOverPage"];
vc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentViewController:vc animated:NO completion:NULL];
} 
```

我希望我的目标很明确，如果没有，请告诉我，我会尝试重新措辞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:24:40.620

视图控制器的工作方式是它们将继续处于活动状态，直到它们被“弹出”或“解雇”。由于您在游戏页面上呈现模式视图，因此游戏页面仍在内存中，并且可以继续执行您想要的操作。

一种非常常见的设计模式是“底层”页面——创建和呈现模式视图控制器的页面应该通过称为协议/委托的机制将其关闭。它可以做到这一点的唯一方法是它仍然处于活动状态并且因为它仍然处于活动状态 - 其他代码也可以运行。

我不确定在您的游戏中出现“游戏结束”视图后会发生什么？可以开始新游戏吗？如果可以，它们从哪里开始？无论如何，导航总是会因应用程序而异。

我的一个想法是返回基本导航点并从该控制器呈现您的起始页面和游戏结束页面，当您的游戏结束时，让活动视图控制器“弹出”回它可以呈现的根控制器游戏概览。这样，如果你想“重新开始”，一个简单的“pop”或“dismiss”就会让你回到你希望游戏从头开始的地方。

要真正做到这一点，您需要一个 UINavigationController。由于您提到您使用的是故事板和转场，因此排列附加到 UINavigation 控制器的视图控制器是很常见的。

如果是这种情况，您可以使用标志或对象来确定游戏已经开始，并使用相同的标志来确定游戏结束。

因此，例如，在导航堆栈中的第一个视图控制器上，您可能有一些如下逻辑：

```
-(void)viewWillAppear:(BOOL)animated {

     if(self.gameStarted == NO){
         self.gameStarted = YES;
         [self performSegueWithIdentifier:@"startGame"];
}
else {
        self.gameStarted = NO;
        [self performSegueWithIdentifier:@"endGame"];
} 
```

现在，当您确定游戏结束时，在该视图控制器中并且它应该在导航堆栈中，您需要像这样“弹出”回第一个控制器：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

我希望这个想法在某种程度上有所帮助。有时让您的导航以您希望的方式工作可能具有挑战性。

# ruby-on-rails - 如何在 Rails 中存储嵌套的 json 数据？

> ID：13554581
> 
> 赞同：2
> 
> 时间：2012-11-25T19:25:21.333
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, json

我有 3 个模型：

```
class Depot < ActiveRecord::Base
    has_many :car_amounts
    has_many :cars, :through => :car_amounts
end

class CarAmount < ActiveRecord::Base
  belongs_to :depot
  belongs_to :car
end

class Car < ActiveRecord::Base
  has_many :car_amounts
  has_many :depots, :through => :car_amounts
end 
```

存储包含仓库、数量和汽车数据的 json 参数的最佳方式是什么。像这样的东西：

```
{
"Depots": {
    "title": "Dealer1"
},
"Amounts": [
    {
        "amount": "1"
        "car": [
            {
                "Type": "supercar1"
            }
         ]
    }, 
    {
        "amount": "5"
        "car": [
            {
                "Type": "supercar2"
            }
         ]
    }, 

   ]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:29:21.250

我有点不清楚你的问题是什么，但我想你可能正在寻找`accepts_nested_attributes_for`. 可以在此处找到文档[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。从文档中：

> 嵌套属性允许您通过父项将属性保存在关联记录上。

例如，您可以`accepts_nested_attributes_for :cars`在`Depots`模型中添加。虽然它不适用于您上面显示的 JSON，但它适用于一般想法。

如果这不是您的问题，请发表评论，我会澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:24:42.207

如果这些数据需要在您的数据库中，那么我将“播种”数据并将其导入您的数据库。您可以创建一个文件 db/seed.rb 并假设我想将学生导入我的数据库。我已经创建/迁移了一个学生模型。在我的 seed.rb 中，我会做类似的事情......

```
students = ActiveSupport::JSON.decode(File.read('db/students.json'))

students.each do |a|
     Student.find_or_create_by_id_number(:id_number => a['id_number'], :username => a['username'], :first_name => a['first_name'], :last_name => a['last_name'])
end 
```

...而我的 students.json 看起来像...

```
 [
{"id_number": "00xx280","username": "jesxxne","first_name": "Jessie","last_name": "Lane","email": "jesxxane@xx.edu","phone_number": "602-321-6693","is_active": true ,"last_four": "1944" },
{"id_number": "11xx2","username": "jamxxacqua","first_name": "James","last_name": "Bevixxua","email": "jamesbxxacqua@xx.edu","phone_number": "828-400-5393","is_active": true ,"last_four": "5422" }
 ] 
```

现在您可以运行 rake db:seed 来导入这些数据。祝你好运！

# java - 是否可以静态反映java方法？

> ID：13554583
> 
> 赞同：9
> 
> 时间：2012-11-25T19:25:29.867
> 
> 标签：java, reflection

有没有办法静态引用 Java 中的反射方法。这是一些示例代码，可让您了解我正在尝试的内容：

```
public void myFunc(int x) { ... }

public void other() {
    Method m1 = getClass().getMethod("myFunc");  // dynamic
    Method m2 = this.myFunc;                     // static
    Method m3 = MyClass.myFunc;                  // static (alternate)
} 
```

我认识到上面的语法不起作用，但我想知道是否有某种与此类似的语法实际上起作用。我想要一种使用反射的方法，而不必担心通过字符串引用方法的内在危险。

有没有办法做到这一点，还是只是一个白日梦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:00:31.480

[方法参考](https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html)说明

> 这种比较两个 Person 实例的出生日期的方法已经存在于`Person.compareByAge`. 您可以在 lambda 表达式的主体中调用此方法：
> 
> ```
> Arrays.sort(rosterAsArray,
>     (a, b) -> Person.compareByAge(a, b)
> ); 
> ```
> 
> 因为这个 lambda 表达式调用了一个现有的方法，所以您可以使用 > 方法引用而不是 lambda 表达式：
> 
> ```
> Arrays.sort(rosterAsArray, Person::compareByAge); 
> ```

并继续解释各种方法引用：

> 有四种方法引用：

```
Reference to a static method      ContainingClass::staticMethodName

Reference to an instance method
of a particular object            containingObject::instanceMethodName

Reference to an instance method   ContainingType::methodName
of an arbitrary object of a
particular type

Reference to a constructor        ClassName::new 
```

* * *

历史记录（在 Java 8 完成之前编写）

我认为 Java 闭包提案有这样的内容。 [斯蒂芬科尔伯恩](http://blog.joda.org/2007/03/first-class-methods-java-style-closures_3629.html)说：

> Stefan 和我很高兴地宣布发布第一类方法 v0.4：Java 风格的闭包提案。
> 
> # 变化
> 
> 从 v0.3 开始，我们尝试整合在各个论坛上收到的一些反馈。主要变化如下：
> 
> 1) 构造函数和字段文字。现在可以使用 FCM 语法创建类型安全`java.lang.reflect.Constructor`、编译时更改的实例：`Field`
> 
> ```
> // method literal:
> Method m = Integer#valueOf(int);
> 
> // constructor literal:
> Constructor<Integer> c = Integer#(int);
> 
> // field literal:
> Field f = Integer#MAX_VALUE; 
> ```

但我认为这种语法在任何出货的 JVM 中都不可用。闭包本身绝对不在 Java 7 中。您可能会在 Java 8 中看到它。

[Java 闭包站点](http://www.javac.info/)有一个指向[“方法引用”](http://tronicek.blogspot.com/2008/03/method-references-version-2008-03-17.html)的指针，虽然看起来它们并没有对语法进行太多更改，但它有点更新。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-25T20:02:17.543

[JSR-335](http://www.jcp.org/en/jsr/detail?id=335)是您正在寻找的。希望它将在 JDK 8 中可用。

# python - Python 上的 24 小时制转换为 12 小时制 (ProblemSetQuestion)

> ID：13554589
> 
> 赞同：6
> 
> 时间：2012-11-25T19:26:16.067
> 
> 标签：python, python-3.x

我是 Python 的初学者程序员，我不知道如何继续以下问题。那里有很多**类似**的问题，但是与 Python 代码无关。

我试图比较字符串，但我不确定如何进行比较。我很确定我需要取前两个数字（小时），如果它大于 12，则除以 12 ......但这会带来问题。

**问题：**

> 时间转换（24 小时到 12 小时）
> 
> 编写一个函数，允许用户将 24 小时时间格式转换为 12 小时格式（附加 'am','pm'）。示例：从“1400”到“下午 2:00”。作为参数传入的所有字符串的长度均为 4，并且仅包含数字。

**示例（测试/调用）：**

```
>>> convertTime('0000') 
'12:00am' 
>>> convertTime('1337') 
'1:37pm' 
>>> convertTime('0429') 
'4:29am' 
>>> convertTime('2359') 
'11:59pm' 
>>> convertTime('1111') 
'11:11am' 
```

任何输入或不同的方法都会很棒！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T19:34:33.923

你可以使用 datetime 模块，但是你也必须处理日期（你可以在那里插入你想要的任何东西）。可能更容易简单地解析它。

* * *

**更新：**正如@JonClements 在对原始问题的评论中指出的那样，它可以用一个衬里来完成：

```
from datetime import datetime

def convertTime(s):
    print datetime.strptime(s, '%H%M').strftime('%I:%M%p').lower() 
```

* * *

您可以通过以下方式将输入字符串拆分为小时和分钟部分：

```
hours = input[0:2]
minutes = input[2:4] 
```

然后解析这些值以获得一个整数：

```
hours = int(hours)
minutes = int(minutes) 
```

或者，以更 Pythonic 的方式进行操作：

```
hours, minutes = int(input[0:2]), int(input[2:4]) 
```

然后你必须决定时间是在早上（`hours`0 点到 11 点之间）还是下午（`hours`12 点到 23 点之间）。还要记住处理特殊情况`hours==0`：

```
if hours > 12:
    afternoon = True
    hours -= 12
else:
    afternoon = False
    if hours == 0:
        # Special case
        hours = 12 
```

现在你得到了你需要的一切，剩下的就是格式化和打印结果：

```
print '{hours}:{minutes:02d}{postfix}'.format(
    hours=hours,
    minutes=minutes,
    postfix='pm' if afternoon else 'am'
) 
```

将其包装在一个函数中，采用一些快捷方式，您将得到以下结果：

```
def convertTime(input):
    h, m = int(input[0:2]), int(input[2:4])

    postfix = 'am'

    if h > 12:
        postfix = 'pm'
        h -= 12

    print '{}:{:02d}{}'.format(h or 12, m, postfix)

convertTime('0000') 
convertTime('1337') 
convertTime('0429') 
convertTime('2359') 
convertTime('1111') 
```

结果是：

```
12:00am
1:37pm
4:29am
11:59pm
11:11am 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T19:33:33.650

一些提示 int("2300") 返回一个整数 2300 2300 是 PM。时间 >= 1200 是 PM 0000 和 1200 之间的时间是 AM。

您可以创建一个接受字符串的函数，将其计算为整数，然后检查它是否大于或小于上述条件并返回打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-23T04:05:02.503

```
import datetime

hour = datetime.datetime.now().strftime("%H")
minute = datetime.datetime.now().strftime("%M")
if int(hour) > 12:
    hour = int(hour) - 12
    amPm = 'PM'
else:
    amPm = 'AM'
if int(hour) == 12:
    amPm = 'PM'
if int(hour) == 0:
    hour = 12
    amPm = 'AM'
strTime = str(hour) + ":" + minute + " " + amPm
print(strTime) 
```

从日期时间获取小时和分钟。将小时转换为 int。检查 int(hour) > 12。如果是，则从 AM 更改为 PM。使用 int(hour) - 12 分配小时。检查小时是否为 0 以表示 12 AM 异常。检查小时是否为 12 点，因为 12 点例外。将小时转换回字符串。打印时间。

# c++ - C ++ - 用另一个替换数组的int元素

> ID：13554591
> 
> 赞同：3
> 
> 时间：2012-11-25T19:26:36.077
> 
> 标签：c++, arrays, scope

我一直在阅读 C++ Primer 的第四版，现在正在进行指针练习。该练习要求编写一个程序来遍历数组并将元素替换为 0。到目前为止，我有这个：

```
#include <iostream>

using namespace std;

using std::cout;
using std::endl;

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    for (int i = 0; i != 5; i++)
        arr[i] = 0;
        cout << arr[i] << endl;
} 
```

但我收到一个错误：

> `name lookup of 'i' changed for ISO 'for' scoping`

如何更改元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:32:10.537

你的循环应该是这样的：

```
for (int i = 0; i != 5; i++) {
  arr[i] = 0;
  cout << arr[i] << endl;
} 
```

我也建议你放在 `return 0;`最后`}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:32:09.900

```
for (int i = 0; i != 5; i++)
    arr[i] = 0;
    cout << arr[i] << endl; 
```

你忘了`{`和`}`。这意味着行开始`cout`不是当前循环的一部分，因此`i`超出了范围。

这个错误有点误导，因为它关注的是很多很多年前这*曾经是有效的。*

但与其他一些语言不同，块范围是由缩进定义的`{`，`}`而不是由缩进定义的。因此，写：

```
for (int i = 0; i != 5; i++) {
    arr[i] = 0;
    cout << arr[i] << endl;
} 
```

取得巨大成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:33:40.817

好吧，它应该是这样的：记住 5 个元素仅来自数组索引`0 to 4`！

```
#include <iostream>

using namespace std;

using std::cout;
using std::endl;

int main() {
    int arr[5] = {1, 2, 3, 4, 5};
    for (int i = 0; i < 5; i++){
        arr[i] = 0;
        cout << arr[i] << endl;
    }
} 
```

更改`!=`to并为循环`<`添加大括号。`for`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-09-25T20:46:08.267

您的 for 循环缺少它的主体。你需要花括号

```
arr[i] = 0;
cout << arr[i] << endl; 
```

所以编译器知道代码是 for 循环的主体。

# java - Java中的Kevin Bacon路径给出了堆栈溢出？

> ID：13554592
> 
> 赞同：2
> 
> 时间：2012-11-25T19:26:36.800
> 
> 标签：java, stack-overflow, shortest-path

我对 Java 很陌生，我的代码中有一个问题，我想找到从*演员到电影到演员到电影到 Kevin Bacon*的最短路径。这存储在一个`list`which would go`"Actor A, Movie A, Actor B, Movie B, Kevin Bacon"`中。我认为最好的方法就是这样做`recursively`。但是，我得到一个`StackOverflowError`.

我将*演员*和*电影*存储在`HashMap<String, HashSet<String>>`. *演员*和*电影*都是`keys`- 如果*演员*被调用，那么它返回一个*演员*已经看过的电影，如果`HashSet`电影*被*调用*，*它返回一个它拥有的*演员*。该方法查找与给定*演员共同出演的所有**演员*。**`HashSet`*`findCostars`***

 ***这是我的代码。任何帮助将不胜感激！

```
public List<String> findBaconPath (String actor) throws IllegalArgumentException {
    ArrayList<String> actors = new ArrayList<String>();
    actors.add(actor);
    ArrayList<String> path = helper(actors, actor);
    return path;
}

public ArrayList<String> helper(ArrayList<String> curr, String actor) {
    ArrayList<String> list = new ArrayList<String>();
    HashSet<String> movies = myMovies.get(actor);
    ArrayList<String> coStars = (ArrayList<String>) findCostars(actor);
    Iterator<String> it = movies.iterator();
    while (it.hasNext()) {
        String next = it.next();
        HashSet<String> movAct = myMovies.get(next);
        if (movAct.contains("Bacon, Kevin")) {
            list.add("Bacon, Kevin");
            list.add(next);
            list.add(actor);
            return list;
        } else {
            Iterator<String> itAct = coStars.iterator();
            while(itAct.hasNext()) {
                curr.add(next);
                String nextActorValue = itAct.next();
                curr.add(nextActorValue);
                helper(curr, nextActorValue);
            }
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:38:07.417

您会遇到堆栈溢出，因为您的搜索是深度优先的，并且您没有排除您已经访问过的图形节点。

由于您可能想要最短路径，请尝试实施[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:31:34.160

您永远不会检查您是否两次处理同一部电影。

第一次调用将开始处理`movies`，第一次迭代可能会为第一个演员和相同的电影调用相同的方法。然后第二次调用将再次开始迭代`movies`......***

# iphone - iPhone - removeObjectIdenticalTo 行为

> ID：13554594
> 
> 赞同：0
> 
> 时间：2012-11-25T19:26:45.827
> 
> 标签：iphone, ios, xcode, parsing, nsmutablearray

我正在尝试这段代码：

```
NSString* str1 = @"Toto";
NSMutableArray* arr = [NSMutableArray array];

[arr addObject:[NSNull null]];
[arr addObject:@"toto"];
[arr addObject:[NSNull null]];
[arr addObject:@"Toto"];
[arr addObject:[NSNull null]];
[arr addObject:str1];

NSLog(@"Tableau à %d elements : %@", [arr count], arr);

[arr removeObjectIdenticalTo:str1];

NSLog(@"Tableau à %d elements : %@", [arr count], arr); 
```

为什么在这里做与or `removeObjectIdenticalTo:str1`相同的事情，因为它应该基于对象地址？`removeObject:str1``removeObjectIdenticalTo:@"Toto"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:30:21.883

发生这种情况是因为编译器正在根据您处理字符串文字的事实进行一些优化。编译器可能会将字符串 @"Toto" 的所有实例组合到单个内存地址的单个对象中。这是可以做到的，因为它们是不可变的。

这就是为什么有些人会误以为使用`==`运算符比较两个字符串是可以的。它实际上可以在适当的条件下工作，但绝不能依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:15:49.767

当您在数组中插入值时，数组将为所有值分配地址，当您将值与数组的值进行比较时，它会检查所有值。它是根据值而不是地址进行比较。所以 Toto 的所有价值都在移除。

# html - 如何在 GO、Google App Engine 中解析 HTML 模板

> ID：13554598
> 
> 赞同：4
> 
> 时间：2012-11-25T19:26:52.270
> 
> 标签：html, google-app-engine, parsing, templates, go

我正在尝试使用 Google App Engine 在 GO 中创建一个页面，该页面可以通过 HTML 解析显示数组的内容。

```
 package hello

import (
    "fmt"
    "html/template"
    "net/http"
)

func init() {
    http.HandleFunc("/", root)
}

const TemplateHTML = `
<html>
  <body>
   <table width="700"  border="1" align="center">
  <tr>
    <td>
    {{range}} {{.name}} {{end}} {{range}} {{.Count}} {{end}}
</td>
  </tr>
</table>

  </body>
</html>
`

func root(w http.ResponseWriter, r *http.Request) {
    type variables struct {
        Name    string
        Count   int
    }
    var data = []variables{
        {"John", 25},
        {"George", 35},
        {"NoName", 27},
    }

    //name := variables{"Somebody", 25}
    tmpl, err := template.New("i").Parse(TemplateHTML)

    if err != nil {
         fmt.Fprint(w, err)
    }
    err = tmpl.Execute(w, data)
    if err != nil {
         fmt.Fprint(w, err)
    }

} 
```

但我只得到一个*Internal Server Error*。

当我使用时`err = tmpl.Execute(w, name)`（您可以在代码的注释中找到“名称”），没关系。

你知道可能是什么问题吗？我是golang的新手。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T21:12:16.287

其他人会以更简洁/准确的答案做出回应，但是您可以使上述示例正常工作的一种简单方法是将您的`data`声明更改为：

```
var data = []variables{
    variables{"John", 25},
    variables{"George", 35},
    variables{"NoName", 27},
} 
```

`data`在这里，您正在制作type 切片的每个元素`variables`，这将匹配`variables`定义中的类型。我相信这是您当前版本的主要问题 - 没有提供正确的数据类型`data`。然后，您只需要调整您的模板，使您的字符串如下所示：

```
const TemplateHTML = `
<html>
  <body>
   <table width="700"  border="1" align="center">
    {{range .}}
    <tr>
      <td>{{.Name}}</td><td>{{.Count}}</td>
    </tr>
    {{end}}
  </tr>
</table>

  </body>
</html>
` 
```

这里的关键更改是：将`.Name`其设为大写，使其与属性名称匹配并包装`tr`在`{{range .}}`块中，以便为每个条目创建一个新行（我假设这就是您要查找的内容 - 如果不是，请确保`range`包含任何动态内容你要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T04:08:48.037

如果`template.Parse`返回错误，则不能使用它返回的其他值。如果模板执行失败，您将尝试调用`tmpl.Execute`nil `tmpl`，这会导致恐慌。

# browser - 网站的ip地址是浏览器还是操作系统解析的？

> ID：13554602
> 
> 赞同：1
> 
> 时间：2012-11-25T19:27:01.180
> 
> 标签：browser, dns

当您输入 www.google.com 等地址时，发送到的 http 请求是 173.194.75.147 port:80。

两个问题

1>是浏览器还是操作系统联系DNS服务解析173.194.75.147？

2> 浏览器是否知道默认目标端口为 80？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:29:58.013

浏览器让操作系统进行名称查找。例如，在 Windows 7 中，`C:\Windows\System32\drivers\etc\hosts`首先查询文件，然后是 DNS 服务器。在 Linux 中，首先查询 FreeBSD 等，`/etc/hosts`然后是`/etc/resolv.conf`.

当您的 URL 以 http 协议为目标时，destination-port=80 是默认值，当协议是 https 等时，destination-port=443 是默认值。根据标准，这是由您的浏览器“决定”的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T19:35:05.537

查询由操作系统运行的 inet 服务运行。可以将主机设置为首先被查询，然后是 DNS 服务器，但并非总是如此。在 UNIX 服务器上，/etc/nsswitch.conf 文件定义了解析顺序。

默认情况下，浏览器设置为在端口 80 上查询。您可以通过在完整 URL 后放置一个“：”和另一个数字来修改此行为以修改行为。

`nslookup`您可以使用该命令进行自己的 DNS 解析。

要在“较低”级别查看类似行为，请在命令行上稍微使用 cURL。您会看到不使用浏览器就可以解析 URL。您还将看到 HTTP 请求默认使用的端口 80。

# c++ - 编译器没有发现歧义

> ID：13554606
> 
> 赞同：3
> 
> 时间：2012-11-25T19:27:37.047
> 
> 标签：c++, ambiguity

我不得不花一些时间来查找和修复我设法在以下代码中隔离的错误：

```
#include <iostream>

struct A
{
    std::string S;
    A(const std::string s) { S = s; }
};

void f1(A a) { std::cout << "f1:a.S = " << a.S << "\n"; }
void f1(const std::string s) { std::cout << "f1:s = " << s << "\n"; }

void f2(A a) { std::cout << "f2:a.S = " << a.S << "\n"; }

int main()
{
    f1(A("test"));
    f1(std::string("test"));

    f2(A("test"));
    f2(std::string("test"));

    return 0;
} 
```

该错误是由`f1`-function 创建的被忽略的（由我和编译器（？））歧义引起的：`f2`清楚地表明 both`f1(A)`和`f1(std::string)`apply to `A`，但是编译时编译器不会拾取歧义，并且在执行时输出是：

```
f1:a.S = test
f1:s = test
f2:a.S = test
f2:a.S = test 
```

这种行为正确吗？编译器问题？还是只是普通的旧 PIBCAK？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T19:33:45.783

您描述的行为是预期的：没有歧义。当两个重载匹配得一样好并且都是“最佳重载”时，就会出现重载解决歧义。

当您`f1`使用 type 的参数调用时`A`，第一个`f1`是完全匹配；第二个`f1`根本不匹配。因此，`f1`显然在重载解决方案中获胜。

当您`f1`使用类型的参数调用时`std::string`，第一个`f1`通过 ; 的转换构造函数匹配`A`。第二个`f1`是完全匹配。第二个`f1`是更好的匹配：它是完全匹配，不需要转换。这两个重载的匹配并不相同，因此没有歧义。第二个`f1`在重载解决期间获胜。

# scala - SBT 中带有 readLine 的 Scala 2.10 期货

> ID：13554607
> 
> 赞同：1
> 
> 时间：2012-11-25T19:27:41.150
> 
> 标签：scala, future

我真的很喜欢 Scala 2.10 中的新`Future`API，我正在尝试将它用于一个简单的脚本。该程序的要点如下：

1.  对某个 URL 的 HTTP 请求
2.  根据响应需要用户输入
3.  进一步处理

这个想法是将所有内容实现为期货链（平面图等），但这是我的问题：

我目前正在 SBT 中进行测试，所以当主线程完成时，SBT 会回到它的 REPL。同时，我的`Future`计算仍在等待我的用户输入。一旦我开始尝试输入，似乎`readLine`第 2 步中的调用正在与 SBT 尝试执行的任何输入作斗争。

例如，如果我的预期输入是`abcdefghijklmnop`，我的程序会收到它的一个随机子集，比如`adghip`，然后当它完成时，SBT 会告诉我这`bcefjklmno`不是命令。

我怎么也能...

1.  延迟主线程在 Futures 的守护线程之前完成
2.  **或**替换`readLine`为不会与 SBT 冲突的其他呼叫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:48:09.547

使用`scala.concurrent.Await`（[JavaDoc](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/concurrent/Await%24.html)）。也许您正在寻找以下草图？

```
import scala.concurrent.Future
import scala.concurrent.ExecutionContext._
import scala.concurrent.duration.Duration
import scala.concurrent.duration._
import scala.concurrent.Await
import java.util.concurrent.Executors.newScheduledThreadPool

object Test {
  implicit val executor = fromExecutorService(newScheduledThreadPool(10))
  val timeout = 30 seconds

  def main(args: Array[String]) {
    val f =
      // Make HTTP request, which yields a string (say); simulated here as follows
      Future[String] {
        Thread.sleep(1000)
        "Response"
      }.
        // Read input
        map {
          response =>
            println("Please state your problem: ")
            val ln = readLine() // Note: this is blocking.
            (response, ln)
        }.
        // Futher processing
        map {
          case (response, input) =>
            println("Response: " + response + ", input: " + input)
        }
    Await.ready(f, timeout)
  }
} 
```

# javascript - 通过原型方法设置对象的属性

> ID：13554612
> 
> 赞同：2
> 
> 时间：2012-11-25T19:28:40.700
> 
> 标签：javascript, prototype, underscore.js

我正在创建一个小库来与 MongoLab HTTP API 交互，但我遇到了一些问题。我正在使用 CommonJS 模块。

我有一个 Model 对象，用作其他模型的原型：

```
module.exports = {
    //[...]

    //this will be overriden by the other models
    fields: ['id'],

    setFields: function(values) {
        _.each(this.fields, function(field) {
            this[field] = values[field]
        })
    }
} 
```

例如，我有一个用户模型：

```
var Model = require('models/Model')

function User (properties) {

    this.fields = [
        'id',
        'name',
        'surname',
        'email',
        'password'
    ]

    this.setFields(properties)

    //[...]
} 
```

在那里，`setFields()`调用正常工作，遍历用户模型中给出的五个字段中的每一个；虽然，它不会设置用户属性。如果我`console.log(this.name)`在定义末尾添加 a `setFields()`，它将给我`undefined`. 我解决该问题的唯一方法是将`this`对象作为`setFields`方法的参数传递，并使用参数而不是`this`.

这对我来说似乎是一个范围问题，但我对 JavaScript OO 还是很陌生，所以......我的逻辑有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:33:36.063

您需要提供一个`context`参数来`_.each`设置`this`您在回调函数中期望的上下文：

```
setFields: function(values) {
    _.each(this.fields, function(field) {
        this[field] = values[field];
    }, this);  // context parameter that establishes this in your callback
} 
```

# java - 在 scala 文件中包含 java 源代码

> ID：13554617
> 
> 赞同：1
> 
> 时间：2012-11-25T19:29:07.033
> 
> 标签：java, scala, compilation

> **可能重复：**
> [编译包含 java 和 scala 代码的文件](https://stackoverflow.com/questions/13443863/compile-file-containing-java-and-scala-code)

我知道 Scala 可以轻松使用 Java 类。但是，是否可以在 scala 文件中包含 Java 源代码并以任何方式使用 scalac 进行编译？

或者，是否可以在源代码中包含 javac 编译的字节码作为字节数组，并从中导入（哎呀，是的）？

这是家庭作业，所以，不，我不能有单独的文件，它**必须**用 编译`scalac file.scala`，没有额外的参数。澄清一下，这是我老师的硬性要求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:51:59.520

如果你想在 Scala 代码中编写一个字面量字节数组，很容易从它转到一个普通的 Java 类，只需调用[`Classloader.defineClass`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte%5B%5D,%20int,%20int%29). 这意味着您需要创建自己的子类`ClassLoader`来公开此方法的重载之一。这在 Scala 中都是可行的，没有太多麻烦。

如果你仔细准备，你甚至可以通过让你的 class-from-bytearray 实现你在 Scala 中定义的接口来获得类型安全。我不知道这方面的确切细节，但我记得 Java 类可以继承/实现 Scala 中定义的某些东西。如果做不到这一点，您当然可以进行反思。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T21:02:05.880

我只是写了一个简单的例子

说你有一个像这样的java类

```
public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("hello world");
    }
} 
```

然后你写一些scala代码把它变成一个字节数组

```
import java.io.{FileInputStream, FileOutputStream}
import collection.mutable.ArrayBuffer

val in = new FileInputStream("HelloWorld.class")
val out = new FileOutputStream("HelloWorldBytes.scala")

Console.withOut(out) {
  var data = in.read()
  print("val helloWorldBytes = Array[Byte](")
  print(if(data < 128) data else data - 256)
  data = in.read()
  while(data >= 0) {
    print(", ")
    print(if(data < 128) data else data - 256)
    data = in.read()
  }
  println(")")
}

in.close()
out.close() 
```

然后你可以像这样使用它

```
val helloWorldBytes = Array[Byte](...)

object Loader extends ClassLoader {
  override
  def findClass(name: String): Class[_] =
    if(name == "HelloWorld") defineClass(name, helloWorldBytes, 0, helloWorldBytes.size)
    else super.findClass(name)
}

val helloWorld = Loader.loadClass("HelloWorld")
helloWorld.getDeclaredMethod("main", classOf[Array[String]]).invoke(null,null) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T19:34:21.543

您*可以*使用[BCEL](http://commons.apache.org/bcel/manual.html)并在 Scala 中指定一个 Javac 派生的[指令列表](http://commons.apache.org/bcel/apidocs/org/apache/bcel/generic/InstructionList.html)，但我真的无法想象这在任何方面是如何实用的。做你想做的最简单的方法是使用（比如说）Maven scala 插件将 Java 和 Scala 文件一起编译。

# javascript - 将 url 中的一些值从子窗口传递给父窗口

> ID：13554618
> 
> 赞同：0
> 
> 时间：2012-11-25T19:29:08.327
> 
> 标签：javascript, jquery, html

我有一个主窗口，我将使用 window.open 打开一个子窗口。现在我想将一些值作为参数从子窗口传递给父窗口的 URL 并刷新父窗口。我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:35:32.007

你想要这样的东西吗：

```
window.open("http://www.yousite.com","mywindow","menubar=1,resizable=1,width=350,height=250"); 
```

这些是您可以使用的参数：

status - 窗口底部的状态栏。
工具栏 - 标准浏览器工具栏，带有后退和前进等按钮。
location - 您输入 URL 的位置输入字段。
menubar - 窗口目录的菜单栏
- 标准浏览器目录按钮，例如 What's New 和 What's Cool
resizable - 允许/禁止用户调整窗口大小。
滚动条 - 如果文档大于窗口
高度，则启用滚动条 - 指定窗口的高度（以像素为单位）。（例如：height='350'）
width - 以像素为单位指定窗口的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:40:47.730

```
function openpopup(url)
{        window.open(url,'pop_window','toolbar=no,menubar=no,location=no,scrollbars=yes,height=300,
width=450,left=200,top=200');

}

 //call from code behind 

  Page.ClientScript.RegisterStartupScript(this.GetType(), "aa", "<script language="'javascript'">openpopup('page1.aspx?variable="+variabledata+"');</script>"); 
```

# c - 使用递归在 C 中的格上自我避免随机游走 - 内存分配

> ID：13554621
> 
> 赞同：0
> 
> 时间：2012-11-25T19:29:17.723
> 
> 标签：c, recursion, random-walk

我想通过使用递归函数来计算（对于一个项目）自我避免的随机游走。我已经设法用两个数组来做到这一点，`StepX`并`StepY`分别跟踪路径的 x 和 y。递归函数类似于：

```
go(int x, int y, int n,int* StepX,int* StepY) 
```

这可以总结为“对于第 n 步去 (x,y) 记住你已经在 StepX 和 StepY”。

该项目已完成，我很高兴，但我想知道如何使用（也）格子使其工作，1 和 0 描述已访问/尚未访问的位置，以提高其速度。

我认为将功能扩展为

```
go(int x, int y, int n,int* StepX,int* StepY, int* lattice) 
```

将是我正在寻找的，因为我认为每次`go`调用该函数时，它都会创建一个新的晶格副本并使用它。但显然情况并非如此，因为在探索了一个方向之后（并且在达到允许的最大递归级别之后），进入较低级别的递归，格仍然是相同的，访问位置（的更深层次）标记，而我希望递归的每个级别都在不同的格子副本上工作。

这是一个错误的期望吗？这只是一个错误的实现吗？有什么建议可以减少这种方法所需的内存大小吗？

我的代码（其实我大部分都没写）可以在这里找到：[https ://gist.github.com/4144833](https://gist.github.com/4144833)

请耐心等待，我不是经验丰富的程序员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:47:09.590

不，您误解了 C 中参数的规则。为递归调用复制的是指向格的指针，而不是格数组本身。你必须自己做。

最简单的方法是在调用开始时分配一个新数组（with ），然后在递归调用结束时`malloc`复制数据。`memcpy``free`

# .net - Keyboard.Modifiers 是反映“真实”的当前状态还是根据键盘事件反映的状态？

> ID：13554624
> 
> 赞同：0
> 
> 时间：2012-11-25T19:29:38.987
> 
> 标签：.net, keyboard

[`Keyboard.Modifiers`](http://msdn.microsoft.com/en-us/library/system.windows.input.keyboard.modifiers.aspx)是反映键盘的“真实”当前状态还是基于窗口消息队列中的键盘消息？

MSDN 说：

> 获取当前按下的一组 ModifierKey。

这是否意味着*身体上的*压力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:36:24.847

是的，这意味着*物理*按下的键。

# php - 使用 php GD 进行单像素操作

> ID：13554634
> 
> 赞同：1
> 
> 时间：2012-11-25T19:31:14.830
> 
> 标签：php, image-processing, php-gd

首先，我指的是上一个问题[Change image per pixel and save to db](https://stackoverflow.com/questions/13146323/change-image-per-pixel-and-save-to-db)

我发现 html5 画布不适合，因为很难对源图像保密。这就是为什么我要尝试使用 PHP GD 库来实现我的目标。我从来没有使用过这个库，所以我遇到了一些困难。我想我需要以下功能

*   imagecreatetruecolor 用于在浏览器中创建图像
*   imagecolorallocate 用于从源图像返回 rgb
*   imagesetpixel 用于绘制随机像素

    ```
    $x = 200; //width of image
    $y = 200; //height of image

    $gd = imagecreatetruecolor ($x, $y);
     $color = imagecolorallocate($gd, $r, $g, $b) //not sure how to retrieve the rgb from the source image

    Then I need a function for drawing random pixels with imagesetpixel.
    imagesetpixel($gd, $posx,$posy, $color); // not sure how to retrieve the x and y position of each pixel. 
    ```

我不是 PHP 的明星，这就是为什么我的搜索停留在这些 GD 函数上的原因。希望你能给我一个启动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:16:26.330

随机函数的“特征”之一是它是伪随机的，即，在给定相同种子的情况下，它总是会输出相同的序列。

因此，您可以为每个“图像”存储：

```
sourcefile   - the name of the source image
seed         - integer, maybe the start time of this sequence
position     - number of pixels that need to be shown, or maybe % completion 
```

所以说你想输出`$sourcefile`带有种子`$seed`和`$position`可见像素百分比的图像。你甚至不需要使用 alpha：

```
// Load image
$src = imageCreateFromPNG($sourcefile); // Assume image is PNG

// Create work image
$new = imageCreateTrueColor(ImageSX($src), ImageSY($src)); // new image of same size

mt_srand($seed); // Seed the Mersenne Twister generator

// Number of pixels to set: $position = 0: NONE, $position = 100: ALL
$pixels = round($position*imageSX($src)*imageSY($src)/100);

// Now we have a problem: if we do $pixels attempts, mt_rand might sometimes
// return the same pixel again. So we end up setting less than $pixels pixels.

// So we do this the expensive way, saving an array of yet-to-be-used pixels.
$max     = ImageSX($src)*ImageSY($src);
$pixelid = array();
for ($i = 0; $i < $max; $i++)
    $pixelid[] = $i;

$W  = ImageSX($src);

while($pixels--)
{
    // Extract one pixel
    $chosen = $pixelid[$idx = mt_rand(0, $pixels)];

    array_splice ($pixelid, $idx, 1); // Remove extracted pixel from array

    $x = $chosen % $W;
    $y = ($chosen - $x)/ $W;

    $rgb = imagecolorat($src, $x, $y);
    $pix = imagecolorsforindex($src, $rgb);
    $rgb = imageColorAllocate($new, $pix['red'], $pix['green'], $pix['blue']);
    imageSetPixel($new, $x, $y, $rgb);
}

ImageDestroy($src);

// $new has now exactly $pixels set to the same pixels of $src,
// the rest are undefined (you can fill $new with white beforehand...)
Header("Content-Type: image/png");
ImagePNG($new); 
```

# 变化

无需拼接数组，您可以涂抹“使用过的”像素，即使这不会给出均匀分布：

```
$cnt = count($pixelid);

while($pixels--)
{
    // Extract one pixel
    $idx = mt_rand(0, $cnt);
    // If the extracted pixel is null, find next pixel that is unextracted
    // and if there are none, restart from the beginning of the array.
    while (-1 == ($chosen = $pixelid[$idx]))
        if ($cnt == ++$idx)
            $idx = 0;
    $chosen = $pixelid[$idx];
    $pixelid[$idx] = -1; 
```

或者你可以……重试。但是当图像几乎完成时，这可能会很昂贵。

```
$cnt = count($pixelid);
while($pixels--)
{
    // Extract one pixel
    for ($idx = mt_rand(0, $cnt); $pixelid[$idx] != -1; $idx = mt_rand(0, $cnt))
        ;
    $chosen = $pixelid[$idx];
    $pixelid[$idx] = -1; 
```

如果您不关心图像总是以不同的方式重建，您可以使用`array_shuffle()`代替`mt_rand()`，并且在每次迭代中我从 中提取第 i 个像素`$pixelid`。

最后一个选项是重新实现`array_shuffle()`使用`mt_rand`手册页中的详细说明（参见 tim at leethost dot com 的示例）：

```
function array_new_shuffle(&$items, $seed)
{
    mt_srand($seed);
    for ($i = count($items) - 1; $i > 0; $i--)
    {
        $j = @mt_rand(0, $i);
        list($items[$i], $items[$j]) = array($items[$j], $items[$i]);
    }
} 
```

所以你会`array_new_shuffle()`反对`$pixelid`using `$seed`，然后按顺序从洗牌数组中提取元素：

```
for ($idx = 0; $idx < $pixels; $idx++)
{
    $chosen = $pixelid[$idx];
    ... 
```

# 大图像

对于大图像，处理数组的成本太高，而且内存不足。因此，为了避免`mt_rand()`重复命中相同的像素（当图像完成 99% 时这可能会出现问题，因此随机命中仍然可行的 1% 像素之一的概率当然是 1%），这个 hack 使用另一个图像作为索引。

这将“数组”限制为 2^24 个条目，即边长为 2^12 或 4096 像素的图像。

内存节省是巨大的：每个图像像素现在需要 16 个字节，而不是大约 176 个字节（这在我的 Linux 64 位机器上）。这意味着一张 1024x1024 像素的图像只需要大约 17M 的 RAM。

在我的系统上，这个脚本每秒处理大约 180k 像素（1024x1024 图像在 7.4 秒内被 100% 处理，其中大约需要 2 个用于图像加载和设置）。

```
$seed = 0;
$position = 2;
$sourcefile = '/home/lserni/Lena19721024-filtered.png';

mt_srand($seed); // Seed the Mersenne Twister generator

// Load image
    $src = ImageCreateTrueColor(512,512);
// $src = imageCreateFromPNG($sourcefile); // Assume image is PNG
$W  = ImageSX($src);
$H  = ImageSY($src);

// Total number of pixels
$size   = $W*$H;

if (($W > 4095) || ($H > 4095))
   die("Image too big");

// Create work image
$new = imageCreateTrueColor($W, $H); // new image of same size

/*
if ($position > 50)
{
    $position = 100-$position;
    $tmp = $src;
    $src = $new;
    $new = $tmp;
}
*/

// Number of pixels to set: $position = 0: NONE, $position = 100: ALL
$pixels = round($position*$size/100.0);

// Create a temporary buffer image of the same size
$fix = imageCreateTrueColor($W, $H);
for ($i = 0; $i < $size; $i++)
{
    $b = $i & 0xFF;
    $g = ($i >> 8) & 0xFF;
    $r = ($i >> 16) & 0xFF;
    imageSetPixel($fix, $i % $W, floor($i / $W), imageColorAllocate($fix, $r, $g, $b));
}

while($pixels--)
{
    // Recover one of the available pixel indexes
    $idx = mt_rand(0, $size--);

    // Recover index from image
    $y   = floor($idx / $W);
    $x   = $idx % $W;
    $idx = imageColorAt($fix, $x, $y);
    $lst = imageColorAt($fix, $size % $W, floor($size / $W));
    $b   = $lst & 0xff; $lst >>= 8;
    $g   = $lst & 0xff; $lst >>= 8;
    $r   = $lst & 0xff;
    imageSetPixel($fix, $x, $y, imageColorAllocate($fix, $r, $g, $b));

    // Whew. Now recover true x and y from new $idx
    $y   = floor($idx / $W);
    $x   = $idx % $W;

    $rgb = imagecolorat($src, $x, $y);
    $pix = imagecolorsforindex($src, $rgb);
    $rgb = imageColorAllocate($new, $pix['red'], $pix['green'], $pix['blue']);
    imageSetPixel($new, $x, $y, $rgb);
}
ImageDestroy($src);

// $new has now exactly $pixels set to the same pixels of $src,
// the rest are undefined (you can fill $new with white beforehand...)
// die("Memory: " . memory_get_peak_usage());
Header("Content-Type: image/png");
ImagePNG($new); 
```

# 优化

您会注意到上述代码中有一个注释部分。如果碰巧`$position`超过 50%，比如 70%，那么创建一个空图像并将 70% 的像素从好图像复制到空图像是没有意义的。将 30% 的空像素从空图像复制到好图像，“涂黑”它更有意义。这可以通过简单地交换`$new`和`$src`调整来完成`$position`。我还没有真正彻底测试过这段代码。这就是我留下评论的原因。但欢迎您试一试。

# 执行

使用 PRNG 的优点是**您不需要保存任何图像**`seed`，而只需`position`- 通常总共 8 个字节。

如果 A 收到位置 1，并要求接收最多 5 个位置（即 5% 的图像可见），并且您保存种子和这个值 5，并将其用于 B，那么 B 将看到相同的 5 % 那个人 A 得到了。

除原始图像外，所有图像均未保存或加载。

如果您可以在 $_GET 参数中传递种子和位置，您可以在浏览器中显示不同阶段的图像（例如`image.php?seed=12345678&position=5`，将显示设置为 5% 像素的图像。您还可以指定像素数而不是百分比，当然）。

*只要像素是随机*选择的，这就是有效的：如果人 A 可以**选择**他或她想要的确切像素，那么**这种方法是无效**的，您需要保存各个像素位置，这可以通过多种方式完成：使用以二进制格式保存一对 (x,y) 的平面文件，或保存整个图像。后一种方法更容易理解，并且在每一步都需要存储一个完整的图像，所以如果这是一个游戏并且你想“重播”它，你可能需要巨大的磁盘空间。第一种方法可能合理地要求每个像素六个字节，即相当于一个具有相同高度且宽度是原始图像的两倍的图像，或者每个像素只有四个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:37:04.927

用您的随机颜色值替换 RANDOM_COLOR

这将替换所有像素，

```
for($i=0;$i < $x;$i++) {
    for($e = 0;$e < $y;$e++) {
        imagesetpixel($gd, $i,$e, $RANDOM_COLOR);
    }
} 
```

如果您只想设置几个随机像素，请确保将它们设置在 0 和宽度 -1、0 和高度 -1 的范围内

例如

```
$i = rand(0,$width-1);
$e = rand(0,$height - 1);
imagesetpixel($gd, $i,$e, $RANDOM_COLOR); 
```

你可以循环使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:41:19.423

在食人魔的帮助下，我得到了部分工作。

我所做的是操纵顶层，并在操纵后将其与函数 imagecopy 与源图像合并。输出是 jpg 图像。

顶层的操作是用这段代码完成的

```
for ($y = 0; $y < imagesy($img); $y++) {
for ($x = 0; $x < imagesx($img); $x++) {
$img = imagecreatefrompng("thecover.png");
    imagealphablending($img, false); // Turn off blending
    $white_color_transparent = imagecolorallocatealpha($img, 255, 255, 255, 127);

            $rgb = imagecolorat($img, $x, $y);
            $pixel_color = imagecolorsforindex($img, $rgb);
            if ($pixel_color['red'] == 255 && $pixel_color['green'] == 255 && $pixel_color['blue'] == 255){
                for ($i = 0; $i < 200; $i++) {
                    imagesetpixel($img, rand(0,300), rand(0,300), $white_color_transparent);
                    }
            }
}
} 
```

顶层的颜色是白色，RGB (0,0,0)。该脚本检查该颜色并在此时将 200 个随机像素设置为透明。

它将很多像素设置为透明，但不是给定的 200。

可以帮助我的人。

# javascript - d3.js 中树和条形图之间的交互性

> ID：13554641
> 
> 赞同：1
> 
> 时间：2012-11-25T19:31:52.867
> 
> 标签：javascript, d3.js, tree, bar-chart

使用 D3.js，我需要创建一个树形可视化，单击任何节点都会显示一个带有基础数据的条形图。

为了清楚起见，这里是一个具体的例子：假设我有一个示例数据集，其列如下：

国家、州、城市、销售额、旅行次数、客户人数

现在树需要从国家节点开始并扩展到城市。

而且，通过单击任何节点，应该会出现一个条形图，显示销售额、旅行次数和客户数量。单击国家，它应该显示国家级别的数据，然后单击特定的州节点，图表应该显示向下钻取的数据。

非常欢迎对此提供任何帮助。我主要关心的是树和条形图之间的*链接（交互）。*

# c++ - 为什么 boost::variant 的 std::vector 会导致解析问题？

> ID：13554646
> 
> 赞同：3
> 
> 时间：2012-11-25T19:32:18.943
> 
> 标签：c++, boost-spirit, boost-spirit-qi, boost-variant

扩展这个较早[的帖子](https://stackoverflow.com/questions/6571837/why-does-boostspiritqiparse-not-set-this-boostvariants-value)，我想我会尝试捕获 a`std::vector<boost::variant<double,std::string>>`而不是 just `boost::variant<double,std::string>`，而是首先从相同的旧输入开始。

这是给定输入 'foo' 和 42.7 的输出：

```
/tmp$ g++ -g -std=c++11 sandbox.cpp -o sandbox && ./sandbox 
<m_rule>
  <try>foo</try>
  <success></success>
  <attributes>[[f, o, o]]</attributes>
</m_rule>
<m_rule>
  <try>42.7</try>
  <success></success>
  <attributes>[42.7]</attributes>
</m_rule>
std::string='foo'
double='42.7'
/tmp$ g++ -g -std=c++11 -DDO_VECTOR sandbox.cpp -o sandbox && ./sandbox 
<m_rule>
  <try>foo</try>
  <success></success>
  <attributes>[[102, 111, 111]]</attributes>
</m_rule>
<m_rule>
  <try>42.7</try>
  <success></success>
  <attributes>[[42.7]]</attributes>
</m_rule>
double='111'
double='42.7'
/tmp$ 
```

出于某种我不明白的原因，解析器似乎正在为 'foo' 生成 ASCII 值并引起一些混乱。

打开 DO_VECTOR 时是否需要更改解析器？

我应该使用不同的容器吗？

**代码**

```
#define BOOST_SPIRIT_DEBUG

#include <boost/spirit/include/qi.hpp>
#include <boost/variant.hpp>

// #define DO_VECTOR

namespace {
namespace                              qi = boost::spirit::qi;
typedef   std::string::const_iterator  Iterator;

#ifdef DO_VECTOR
typedef std::vector<boost::variant<double, std::string>>  MY_TYPE;
#else
typedef boost::variant<double, std::string>               MY_TYPE;
#endif

class my_visitor
    : public boost::static_visitor<>
{
    public:
    my_visitor( std::string& result ) : m_str( result ) { }
    void operator()( double& operand )
    {
        std::ostringstream oss;
        oss << "double='" << operand << "'";
        m_str = oss.str();
    }
    void operator()( std::string& operand )
    {
        m_str = "std::string='";
        m_str.append( operand );
        m_str.append( "'" );
    }
    std::string& m_str;
};

// -----------------------------------------------------------------------------

struct variant_grammar : 
    qi::grammar<Iterator, MY_TYPE()>
{
    qi::rule<Iterator, MY_TYPE()> m_rule;

    variant_grammar() : variant_grammar::base_type(m_rule)
    {
        m_rule %= (qi::double_ | +qi::char_);

        BOOST_SPIRIT_DEBUG_NODE( m_rule );
    }
};

}

// -----------------------------------------------------------------------------

int main()
{
    const std::string    a( "foo" ), b( "42.7" );
    variant_grammar      varGrammar;

    MY_TYPE varA, varB;
    auto begA = a.begin(), endA = a.end();
    auto begB = b.begin(), endB = b.end();
    qi::parse( begA, endA, varGrammar, varA );
    qi::parse( begB, endB, varGrammar, varB );

    if ( begA!=endA )
        std::cerr << "A FAILED TO COMPLETELY PARSE" << std::endl;
    if ( begB!=endB )
        std::cerr << "B FAILED TO COMPLETELY PARSE" << std::endl;

    std::string resultA, resultB;
    my_visitor visitor1( resultA );
    my_visitor visitor2( resultB );

#ifdef DO_VECTOR
    std::for_each( varA.begin(), varA.end(), boost::apply_visitor( visitor1 ));
    std::for_each( varB.begin(), varB.end(), boost::apply_visitor( visitor2 ));
#else
    boost::apply_visitor( visitor1, varA );
    boost::apply_visitor( visitor2, varB );
#endif

    std::cout << resultA << std::endl;
    std::cout << resultB << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:46:56.383

我想这会解决它：

```
struct variant_grammar : qi::grammar<Iterator, MY_TYPE()> {
    qi::rule<Iterator, MY_TYPE()> m_rule;
    qi::rule<Iterator, std::string()> m_string;

    variant_grammar() : variant_grammar::base_type(m_rule) {
        m_rule %= qi::double_ | m_string;
        m_string %= +qi::char_;

        BOOST_SPIRIT_DEBUG_NODE( m_rule );
        BOOST_SPIRIT_DEBUG_NODE( m_string );
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T20:39:53.840

另一种解决方案是使用[`qi::as_string[]`](http://www.boost.org/libs/spirit/doc/html/spirit/qi/reference/directive/as.html).

```
struct variant_grammar : 
    qi::grammar<Iterator, MY_TYPE()>
{
    qi::rule<Iterator, MY_TYPE()> m_rule;

    variant_grammar() : variant_grammar::base_type(m_rule)
    {
        m_rule %= (qi::double_ | qi::as_string[+qi::char_]);

        BOOST_SPIRIT_DEBUG_NODE( m_rule );
    }
}; 
```

让我们暂时忘记双倍。你的规则有一个`std::vector<std::string>`简化的属性`vector<vector<char>>`，你`+qi::char_`有一个属性`vector<char>`。你想要的 "foo" 是 a `vector1<vector3<char>>`，你得到的是 a `vector3<vector1<char>>`。上面的链接对此进行了解释：当您遇到这种情况时，`+qi::char`调用`traits::push_back_container`它解析的每个字符。您可以使用辅助规则（如 sharth 的回答）来消除歧义，也可以使用原子解析指令之一（在本例中为 qi::as_string[]）。

***编辑：***

这是解决您的新问题的代码：

```
#define BOOST_SPIRIT_DEBUG

#include <boost/spirit/include/qi.hpp>
#include <boost/variant.hpp>

// #define DO_VECTOR

namespace {
namespace                              qi = boost::spirit::qi;
typedef   std::string::const_iterator  Iterator;

#ifdef DO_VECTOR
typedef std::vector<boost::variant<double, std::string>>  MY_TYPE;
#else
typedef boost::variant<double, std::string>               MY_TYPE;
#endif

class my_visitor
    : public boost::static_visitor<>
{
    public:
    my_visitor( std::string& result ) : m_str( result ) { }
    void operator()( double& operand )
    {
        std::ostringstream oss;
        oss << "double='" << operand << "'";
        m_str += oss.str();
    }
    void operator()( std::string& operand )
    {
        m_str += "std::string='";
        m_str.append( operand );
        m_str.append( "'" );
    }
    std::string& m_str;
};

// -----------------------------------------------------------------------------

struct variant_grammar : 
    qi::grammar<Iterator, MY_TYPE(), qi::space_type> //added a skipper to the grammar
{
    qi::rule<Iterator, MY_TYPE(), qi::space_type> m_rule; //and to the rule. It's specially important that the starting rule and your grammar have the exact same template parameters

    variant_grammar() : variant_grammar::base_type(m_rule)
    {
        m_rule %= +(qi::double_ | qi::as_string[+(qi::char_-qi::digit)]);//Limited the string parser and added a `+` in order to parse more than one element

        BOOST_SPIRIT_DEBUG_NODE( m_rule );
    }
};

}

// -----------------------------------------------------------------------------

int main()
{
    const std::string    a( "foo 4.9 bar" ), b( "42.7" );
    variant_grammar      varGrammar;

    MY_TYPE varA, varB;
    auto begA = a.begin(), endA = a.end();
    auto begB = b.begin(), endB = b.end();
    qi::phrase_parse( begA, endA, varGrammar, qi::space, varA ); //when you have a skipper in your rule/grammar you need to use phrase_parse
    qi::phrase_parse( begB, endB, varGrammar, qi::space, varB );

    if ( begA!=endA )
        std::cerr << "A FAILED TO COMPLETELY PARSE" << std::endl;
    if ( begB!=endB )
        std::cerr << "B FAILED TO COMPLETELY PARSE" << std::endl;

    std::string resultA, resultB;
    my_visitor visitor1( resultA );
    my_visitor visitor2( resultB );

#ifdef DO_VECTOR
    std::for_each( varA.begin(), varA.end(), boost::apply_visitor( visitor1 ));
    std::for_each( varB.begin(), varB.end(), boost::apply_visitor( visitor2 ));
#else
    boost::apply_visitor( visitor1, varA );
    boost::apply_visitor( visitor2, varB );
#endif

    std::cout << resultA << std::endl;
    std::cout << resultB << std::endl;

    return 0;
} 
```

几个小的变化：在语法中添加了一个skipper，因此使用了phrase_parse而不是parse。限制字符串解析器。将打印机更改为附加到您的字符串而不是覆盖它。

# jsf - 在后端渲染 JSF 页面并将输出保存到文件

> ID：13554649
> 
> 赞同：2
> 
> 时间：2012-11-25T19:32:33.877
> 
> 标签：jsf, seam

我正在使用 JSF 1.2 和 Seam 2.2.2

如果我可以在代码中渲染页面并将输出保存到文件而不是将其发送给客户端，那么我会感到困惑。

//三连

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:50:50.420

最简单的方法是自己发送一个 HTTP 请求（在 localhost 上执行时应该特别便宜）。

```
InputStream input = new URL("http://localhost:8080/context/page.jsf").openStream();
// ... 
```

如果您想在与当前客户端相同的会话中请求它并且您的服务器接受 URL 重写，请改用以下 URL。

```
InputStream input = new URL("http://localhost:8080/context/page.jsf;jsessionid=" + session.getId()).openStream();
// ... 
```

或者，如果您的服务器不接受 URL 重写，而只接受 cookie，那么请改用以下方法。

```
URLConnection connection = new URL("http://localhost:8080/context/page.jsf").openConnection();
connection.setRequestProperty("Cookie", "JSESSIONID=" + session.getId());
InputStream input = connection.getInputStream();
// ... 
```

# oracle - 在 Oracle 中处理客户特定的对象

> ID：13554653
> 
> 赞同：2
> 
> 时间：2012-11-25T19:33:04.037
> 
> 标签：oracle, object, database-schema, handle

我们的软件解决方案拥有的客户越多，我们方案中的单个 oracle 对象（表、包、函数等）就越多。现在我们通过给它们提供诸如“X_CUSTOMER1_TABLENAME”之类的识别名称来将它们分开，例如（我知道...... :-()

在保持我们的参考干净以及将我们的参考与客户数据库部署/同步时，这不是很实用：一个客户将在部署时收到其他客户的对象。

这个问题有一个通用的解决方案吗？我们正在考虑为每个客户制定一个单独的计划。这样，我们将拥有具有基本功能的标准、未触及的方案和具有个性化内容的客户方案。

更具体一点：我们有大约 100 个基本表格，可以充分利用软件的内容/功能。每个客户可能有 1 -5 个带有“自定义”数据的附加表格，这些表格与单个包、功能等中的标准对象一起使用。大多数时候只有这个客户将拥有这 1-5 个表格（例如公司特定的内容这对任何其他公司都没有意义）。

我将不胜感激任何提示或最佳做法。这是一个老式的关系数据库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:30:10.210

我是一名 Oracle DBA，在 Oracle 方面拥有超过 20 年的经验，这让我成为“老派”。我的建议是为每个客户提供自己的架构。使事情更易于管理；- 按模式跟踪活动（用于计费目的） - oracle 为您提供 I/O、CPU 和按模式的空间消耗的统计信息 - 跟踪空间使用情况（如果您将他们的模式放在自己的表空间中） - 您可以轻松地将用户从一个数据库中移动到另一个（为了增长）-当客户离开时，您备份他们的架构并将其删除-您可以更好地管理您的备份，更频繁地备份活动帐户和不那么频繁地备份活动帐户。可能还有其他充分的理由，但这份简短的清单可能就足够了。您的应用程序公用表进入自己的架构，但仅将只读表放在此架构中；任何被客户修改的表，进入他们的架构。您可以创建一个主表 list_of_customers，用于计费和安全。但只有 App Bus Admin 才能访问那个。

# c++ - openGL 聚光灯问题

> ID：13554654
> 
> 赞同：2
> 
> 时间：2012-11-25T19:33:09.187
> 
> 标签：c++, opengl, graphics

好的，所以我正在尝试模仿手电筒的行为。目前我只是想让聚光灯出现在一个球体上。现在下面的代码可以工作了，但它只有在`GL_SPOT_CUTOFF`设置为 180 时才有效，这会产生均匀的光分布——而不是我想要的。如果我尝试将其设置为任何其他值，那么它就会停止工作。这是代码

```
GLfloat mat_specular[] = { 1.0, 1.0, 1.0, 1.0 };
GLfloat light_pos [4] = {5, 2, -10, 1.0};

glLightfv (GL_LIGHT0, GL_SPECULAR, mat_specular);
glLightfv (GL_LIGHT0, GL_POSITION, light_pos);

glLightf (GL_LIGHT0, GL_SPOT_CUTOFF, 20.0f);
glLightf (GL_LIGHT0, GL_SPOT_EXPONENT, 100.0);

GLfloat spotDir [] = {0.0, 0.0, 0.0};
glLightfv (GL_LIGHT0, GL_SPOT_DIRECTION, spotDir);

glutSolidSphere (2, 20, 20);

glFlush ();
glutSwapBuffers (); 
```

我启用了照明并完成了所有初始化工作。所有的表面法线都是从 glutSolidSphere 计算出来的，所以不知道还有什么可能失败......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:48:04.463

问题是你的`spotDir`. 它是一个向量，而不是世界坐标中的一个点。尝试将其更改为：

```
GLfloat spotDir[] = { -5, -2, 10 }; 
```

我很懒，所以我不会规范化这个向量；D

这会将您的聚光灯指向球体中心。

希望能帮助到你！

# objective-c - 在缓冲区中添加 2 个正弦波会产生噪音

> ID：13554661
> 
> 赞同：0
> 
> 时间：2012-11-25T19:33:57.167
> 
> 标签：objective-c, ios, audio, signal-processing

当我将 10 kHz 的正弦波添加到另一个 12 kHz 的正弦波并从 iPhone 扬声器一起输出时，我可以听到其他不应该存在的较低频率。

为了做到这一点，我创建了一个正弦波并用样本填充缓冲区，然后将另一个正弦波的样本添加到缓冲区中。

这些单独的正弦波中的每一个都可以单独正常工作，但是当它们组合在一起时，我可以听到以前没有的失真。

这是我的回调代码：

```
for (int i = 0; i <inNumberFrames; i++)
{

    buffer[i] = buffer[i]+ sin(theta12_8) * myInstance->amplitude;
    theta12_8 += 2.0 * M_PI * 12800  / (myInstance->sampleRate); 
    if (theta12_8 > 2.0 * M_PI)
    {
        theta12_8 -= 2.0 * M_PI;
    }
}

for (int i = 0; i <inNumberFrames; i++)
{

    buffer[i] = buffer[i]+ sin(theta10) * myInstance->amplitude;
    theta10 += 2.0 * M_PI * 10000  / (myInstance->sampleRate);;
    if (theta10 > 2.0 * M_PI)
    {
        theta10 -= 2.0 * M_PI;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:26:42.790

如果您将正弦波设置为幅度 1，那没关系。如果将 2 个正弦波加在一起，那么新的最大幅度可以是 2，这是错误的数字，会产生失真和谐波。

我已经将它们每个的振幅设置为 0.5，因此最大值为 1，它解决了问题。

# python - 捕获错误并继续循环的pythonic方法是什么？

> ID：13554666
> 
> 赞同：1
> 
> 时间：2012-11-25T19:34:36.327
> 
> 标签：python, error-handling, scraperwiki

我有两个可以正常工作的函数，但是当我将它们嵌套在一起运行时似乎崩溃了。

```
def scrape_all_pages(alphabet):
    pages = get_all_urls(alphabet)
    for page in pages:
        scrape_table(page) 
```

我正在尝试系统地抓取一些搜索结果。因此`get_all_pages()`，为字母表中的每个字母创建一个 URL 列表。有时有数千页，但效果很好。然后，对于每一页，`scrape_table`只抓取我感兴趣的表格。这也很好。我可以运行整个程序并且运行良好，但我在 Scraperwiki 工作，如果我将其设置为运行并离开，它总是会给我一个“列表索引超出范围”错误。这绝对是 scraperwiki 中的一个问题，但我想通过添加一些`try/except`子句并在遇到错误时记录错误来找到解决问题的方法。就像是：

```
def scrape_all_pages(alphabet):
    try:
        pages = get_all_urls(alphabet)
    except:
        ## LOG THE ERROR IF THAT FAILS.
    try:
        for page in pages:
            scrape_table(page)
    except:
        ## LOG THE ERROR IF THAT FAILS 
```

不过，我无法弄清楚如何一般地记录错误。此外，上面的代码看起来很笨拙，根据我的经验，当某些东西看起来很笨拙时，Python 有更好的方法。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:44:21.820

您可以指定要捕获的特定类型的异常和保存异常实例的变量：

```
def scrape_all_pages(alphabet):
    try:
        pages = get_all_urls(alphabet)
        for page in pages:
            scrape_table(page)
    except OutOfRangeError as error:
        # Will only catch OutOfRangeError
        print error
    except Exception as error:
        # Will only catch any other exception
        print error 
```

捕获 Exception 类型将捕获所有错误，因为它们应该都是从 Exception 继承的。

这是我所知道的捕获错误的唯一方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:16:07.683

将日志信息包装在上下文管理器周围，就像这样，尽管您可以轻松更改详细信息以满足您的要求：

```
import traceback

# This is a context manager
class LogError(object):
    def __init__(self, logfile, message):
        self.logfile = logfile
        self.message = message
    def __enter__(self):
        return self
    def __exit__(self, type, value, tb):
        if type is None or not issubclass(type, Exception):
            # Allow KeyboardInterrupt and other non-standard exception to pass through
            return

        self.logfile.write("%s: %r\n" % (self.message, value))
        traceback.print_exception(type, value, tb, file=self.logfile)
        return True # "swallow" the traceback

# This is a helper class to maintain an open file object and
# a way to provide extra information to the context manager.
class ExceptionLogger(object):
    def __init__(self, filename):
        self.logfile = open(filename, "wa")
    def __call__(self, message):
        # override function() call so that I can specify a message
        return LogError(self.logfile, message) 
```

关键部分是 __exit__ 可以返回 'True'，在这种情况下异常被忽略，程序继续执行。代码还需要小心一点，因为可能会引发 KeyboardInterrupt (control-C)、SystemExit 或其他非标准异常，并且您确实希望程序在哪里停止。

您可以像这样在代码中使用上述内容：

```
elog = ExceptionLogger("/dev/tty")

with elog("Can I divide by 0?"):
    1/0

for i in range(-4, 4):
    with elog("Divisor is %d" % (i,)):
        print "5/%d = %d" % (i, 5/i) 
```

该片段给了我输出：

```
Can I divide by 0?: ZeroDivisionError('integer division or modulo by zero',)
Traceback (most recent call last):
  File "exception_logger.py", line 24, in <module>
    1/0
ZeroDivisionError: integer division or modulo by zero
5/-4 = -2
5/-3 = -2
5/-2 = -3
5/-1 = -5
Divisor is 0: ZeroDivisionError('integer division or modulo by zero',)
Traceback (most recent call last):
  File "exception_logger.py", line 28, in <module>
    print "5/%d = %d" % (i, 5/i)
ZeroDivisionError: integer division or modulo by zero
5/1 = 5
5/2 = 2
5/3 = 1 
```

我认为也很容易看出如何修改代码以处理仅记录 IndexError 异常，甚至传递基本异常类型以进行捕获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:45:56.650

也许记录每次迭代的错误，以便一次迭代中的错误不会破坏您的循环：

```
for page in pages:
    try:
        scrape_table(page)
    except:
        #open error log file for append:
        f=open("errors.txt","a")
        #write error to file:
        f.write("Error occured\n") # some message specific to this iteration (page) should be added here...
        #close error log file:
        f.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T19:46:54.290

这是一个好方法，但是。您不应该只使用`except`子句，您必须指定要捕获的异常的类型。您也可以捕获错误并继续循环。

```
def scrape_all_pages(alphabet):
    try:
        pages = get_all_urls(alphabet)
    except IndexError: #IndexError is an example
        ## LOG THE ERROR IF THAT FAILS.

    for page in pages:
        try:
            scrape_table(page)
        except IndexError: # IndexError is an example
            ## LOG THE ERROR IF THAT FAILS and continue this loop 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T11:51:17.287

最好这样写：

```
 try:
        pages = get_all_urls(alphabet)
    except IndexError:
        ## LOG THE ERROR IF THAT FAILS.
    for page in pages:
        try:
            scrape_table(page)
        except IndexError:
            continue ## this will bring you to the next item in for
        ## LOG THE ERROR IF THAT FAILS 
```

# c++ - OSX 上 boost::program_options 和 C++11 的链接器错误

> ID：13554671
> 
> 赞同：3
> 
> 时间：2012-11-25T19:35:25.627
> 
> 标签：c++, macos, boost, clang, xcode4.5

我因此建立了提升：

```
~/Downloads/boost_1_52_0
$ sudo ./b2 --build-dir=build --layout=system -j4 toolset=clang variant=release link=shared runtime-link=shared threading=multi cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" --without-mpi --without-python install 
```

然后尝试编译第一个示例程序

```
~/Downloads/boost_1_52_0
$ cd libs/program_options/example                                                                                                                             [18:35:25]

~/Downloads/boost_1_52_0/libs/program_options/example
$ c++ -v -std=c++11 -stdlib=libc++ -lboost_program_options -o first first.cpp                                                                                 [18:38:32]
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.7.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name first.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 134.9 -v -resource-dir /usr/bin/../lib/clang/4.1 -fmodule-cache-path /var/folders/sq/nfthwlb93k5bl9qyrjbvfylm0000gn/T/clang-module-cache -stdlib=libc++ -std=c++11 -fdeprecated-macro -fdebug-compilation-dir /Users/lexi/Downloads/boost_1_52_0/libs/program_options/example -ferror-limit 19 -fmessage-length 169 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/sq/nfthwlb93k5bl9qyrjbvfylm0000gn/T/first-oIjAae.o -x c++ first.cpp
clang -cc1 version 4.1 based upon LLVM 3.1svn default target x86_64-apple-darwin11.4.2
ignoring nonexistent directory "/usr/include/c++/v1"
#include "..." search starts here:
#include <...> search starts here:
 /usr/bin/../lib/c++/v1
 /usr/local/include
 /usr/bin/../lib/clang/4.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.7.0 -o first -lcrt1.10.6.o -lboost_program_options /var/folders/sq/nfthwlb93k5bl9qyrjbvfylm0000gn/T/first-oIjAae.o -lc++ -lSystem /usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
  "boost::program_options::validation_error::validation_error(boost::program_options::validation_error::kind_t, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&)", referenced from:
      std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const& boost::program_options::validators::get_single_string<char>(std::__1::vector<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> >, std::__1::allocator<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > > > const&, bool) in first-oIjAae.o
  "boost::program_options::validation_error::what() const", referenced from:
      vtable for boost::exception_detail::error_info_injector<boost::program_options::invalid_option_value> in first-oIjAae.o
      vtable for boost::program_options::invalid_option_value in first-oIjAae.o
      vtable for boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::program_options::invalid_option_value> > in first-oIjAae.o
      vtable for boost::exception_detail::error_info_injector<boost::program_options::validation_error> in first-oIjAae.o
      vtable for boost::exception_detail::clone_impl<boost::exception_detail::error_info_injector<boost::program_options::validation_error> > in first-oIjAae.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我究竟做错了什么？我能找到的唯一类似错误是[OSX 上 Boost 和 C++ 的链接器错误，](https://stackoverflow.com/q/11979123/823542)但他使用的是 CMake、gcc 和 c++03，他的“我重新编译了 Boost 并且它有效”的解决方案并不是特别有用。

这也绝对不是代码的错，因为 bjam 可以构建示例，但我不了解足够的编译器功能，无法查看输出并说“哦，这就是你的做法！”

```
~/Downloads/boost_1_52_0/libs/program_options/example
$ ../../../b2 -ad+2 toolset=clang cxxflags="-std=c++11 -stdlib=libc++" linkflags="-stdlib=libc++" first
clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/example/clang-darwin-4.2.1/debug/link-static/first.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/example/clang-darwin-4.2.1/debug/link-static/first.o" "first.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/cmdline.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/cmdline.o" "../../../libs/program_options/src/cmdline.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/config_file.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/config_file.o" "../../../libs/program_options/src/config_file.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/options_description.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/options_description.o" "../../../libs/program_options/src/options_description.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/parsers.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/parsers.o" "../../../libs/program_options/src/parsers.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/variables_map.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/variables_map.o" "../../../libs/program_options/src/variables_map.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/value_semantic.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/value_semantic.o" "../../../libs/program_options/src/value_semantic.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/positional_options.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/positional_options.o" "../../../libs/program_options/src/positional_options.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/utf8_codecvt_facet.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/utf8_codecvt_facet.o" "../../../libs/program_options/src/utf8_codecvt_facet.cpp"

In file included from ../../../libs/program_options/src/utf8_codecvt_facet.cpp:15:
In file included from ../../../boost/detail/utf8_codecvt_facet.ipp:13:
../../../boost/detail/utf8_codecvt_facet.hpp:171:17: warning: 'boost::program_options::detail::utf8_codecvt_facet::do_length' hides overloaded virtual function [-Woverloaded-virtual]
    virtual int do_length(
                ^
/usr/bin/../lib/c++/v1/__locale:920:17: note: hidden overloaded virtual function 'std::__1::codecvt<wchar_t, char, __mbstate_t>::do_length' declared here
    virtual int do_length(state_type&, const extern_type* __frm, const extern_type* __end, size_t __mx) const;
                ^
1 warning generated.
clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/convert.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/convert.o" "../../../libs/program_options/src/convert.cpp"

In file included from ../../../libs/program_options/src/convert.cpp:19:
In file included from ../../../boost/program_options/detail/utf8_codecvt_facet.hpp:19:
../../../boost/detail/utf8_codecvt_facet.hpp:171:17: warning: 'boost::program_options::detail::utf8_codecvt_facet::do_length' hides overloaded virtual function [-Woverloaded-virtual]
    virtual int do_length(
                ^
/usr/bin/../lib/c++/v1/__locale:920:17: note: hidden overloaded virtual function 'std::__1::codecvt<wchar_t, char, __mbstate_t>::do_length' declared here
    virtual int do_length(state_type&, const extern_type* __frm, const extern_type* __end, size_t __mx) const;
                ^
1 warning generated.
clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/winmain.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/winmain.o" "../../../libs/program_options/src/winmain.cpp"

clang-darwin.compile.c++ ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/split.o

    "clang++" -x c++ -O0 -g -std=c++11 -stdlib=libc++ -O0 -fno-inline -Wall -g -DBOOST_ALL_NO_LIB=1 -I"../../.." -c -o "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/split.o" "../../../libs/program_options/src/split.cpp"

RmTemps ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/libboost_program_options.a(clean)

    rm -f "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/libboost_program_options.a" 

clang-darwin.archive ../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/libboost_program_options.a

  "ar"  rc "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/libboost_program_options.a" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/cmdline.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/config_file.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/options_description.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/parsers.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/variables_map.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/value_semantic.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/positional_options.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/utf8_codecvt_facet.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/convert.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/winmain.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/split.o"
  "ranlib" -cs "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/libboost_program_options.a"

clang-darwin.link ../../../bin.v2/libs/program_options/example/clang-darwin-4.2.1/debug/link-static/first

    "clang++" -stdlib=libc++ -stdlib=libc++  -o "../../../bin.v2/libs/program_options/example/clang-darwin-4.2.1/debug/link-static/first" "../../../bin.v2/libs/program_options/example/clang-darwin-4.2.1/debug/link-static/first.o" "../../../bin.v2/libs/program_options/build/clang-darwin-4.2.1/debug/link-static/libboost_program_options.a"    -g

~/Downloads/boost_1_52_0/libs/program_options/example
$ ../../../bin.v2/libs/program_options/example/clang-darwin-4.2.1/debug/link-static/first
Compression level was not set. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:50:55.407

首先你需要[libc++abi](http://libcxxabi.llvm.org/)。

其次，您必须添加`-nodefaultlibs -lc++ -lc++abi -lm -lc -lgcc_s -lgcc`或`-lc++abi`到您的链接器命令。对于一个文件，它应该如下所示：

```
`clang++ -stdlib=libc++ helloworld.cpp -nodefaultlibs -lc++ -lc++abi -lm -lc -lgcc_s -lgcc` 
```

或这个：

```
`clang++ -stdlib=libc++ helloworld.cpp -lc++abi` 
```

更多信息在[libc++的官方页面](http://libcxx.llvm.org/)

# sharepoint - 使用 Visual Studio 书籍的 SharePoint 2010 工作流

> ID：13554674
> 
> 赞同：1
> 
> 时间：2012-11-25T19:35:34.587
> 
> 标签：sharepoint, sharepoint-2010

我最近开始了一个项目，该项目需要我在 SharePoint 2010 中创建一个非常复杂的工作流。我已经阅读了一些博客，但它们大多涵盖了创建工作流的基础知识。

有没有关于在 Visual Studio 中创建 SharePoint 2010 工作流的好书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:58:48.360

使用 Visual Studio 的工作流并不多，大部分材料都涵盖了设计器，我不得不通过许多论坛和博客来了解如何创建它们。但是，一旦您了解了基本逻辑，剩下的就是 SharePoint 的常用编程内容。

开始可能会推荐这本书：

[https://www.google.co.uk/#hl=en&sugexp=les%3B&gs_nf=3&pq=stackoverflow%20link%20to%20amazon&cp=51&gs_id=154&xhr=t&q=SharePoint%202010%20Development%20with%20Visual%20Studio%202010&pf =p&tbo=d&sclient=psy-ab&oq=SharePoint+2010+开发+with+Visual+Studio+2010&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=1bf8971734a1165e&bpcl=38897761&biw=1366&bih=638](https://www.google.co.uk/#hl=en&sugexp=les%3B&gs_nf=3&pq=stackoverflow%20link%20to%20amazon&cp=51&gs_id=154&xhr=t&q=SharePoint%202010%20Development%20with%20Visual%20Studio%202010&pf=p&tbo=d&sclient=psy-ab&oq=SharePoint+2010+Development+with+Visual+Studio+2010&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=1bf8971734a1165e&bpcl=38897761&biw=1366&bih=638)

# c++ - C++/GLUT：生成多个小行星/子弹

> ID：13554679
> 
> 赞同：0
> 
> 时间：2012-11-25T19:35:53.490
> 
> 标签：c++, object, glut

我无法为我的 GLUT 小行星游戏显示和动画多个小行星。我可以生成 1 ok，但是当我尝试添加更多输出时，输出不正确，createasteroid 不断被调用，并且出于某种原因在屏幕的不同部分闪烁小行星几毫秒。我相信这可能是因为显示功能结束时对象被破坏但我无法找到解决方法这是我到目前为止的代码：

小行星.h

```
class asteroid
{
public:
asteroid(void); //constructer
~asteroid(void); //deconstructer

void createAsteroid();
float generateAsteroidLocation(float a, float b);
void animateAsteroid();
}; 
```

小行星.cpp

```
#include "asteroid.h"
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#define _USE_MATH_DEFINES
#include <math.h>
#include <ctime>
#include <GL/glut.h>

float asteroidX,asteroidY, V;
int numOfAsteroids=0;

asteroid::asteroid(void){

}

asteroid::~asteroid(void){

}

void asteroid::createAsteroid(){
// Translate to an area outside of the screen and then give a random velocity in     the direction of the player
asteroidX = generateAsteroidLocation(0, 30);
asteroidY = generateAsteroidLocation(0, 30);
V = generateAsteroidLocation(0.000030, 0.000050);

printf("Asteroid Y Location %f \n", asteroidY);
printf("Asteroid X Location %f \n", asteroidX);
printf("Asteroid Velocity %f \n", V);
printf("Asteroid Created! \n");

glPushMatrix();
glTranslatef(asteroidX, asteroidY, 0.0);
glColor3f(1.0, 1.0, 1.0);
glBegin(GL_LINE_STRIP);
glVertex2f(1.0, 1.0);
glVertex2f(1.8, 0.0);
glVertex2f(1.4, -0.8);
glVertex2f(1.0, -1.7);
glVertex2f(-1.5, -1.0);
glVertex2f(-1.0, 0.0);
glVertex2f(0.0, 1.4);
glVertex2f(1.0, 1.0);
glEnd();
glPopMatrix();

}

float asteroid::generateAsteroidLocation(float a, float b){
float random = ((float) rand()) / (float) RAND_MAX;
float range = b - a; 
return (random*range) + a;
}

void asteroid::animateAsteroid(){
float dt = 3500;
float Dx = 25 - asteroidX;
float Dy = 25 - asteroidY;
float Cx = asteroidX + Dx / sqrt(Dx*Dx+Dy*Dy) * V * dt;
float Cy = asteroidY + Dy / sqrt(Dx*Dx+Dy*Dy) * V * dt;
asteroidX = Cx;
asteroidY = Cy;
} 
```

main.cpp（导致问题的函数）

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#define _USE_MATH_DEFINES
#include <math.h>
#include <ctime>
#include "asteroid.h"
#include <GL/glut.h>

asteroid a1;
asteroid a2;

void display(void)
{
glClear(GL_COLOR_BUFFER_BIT);
// check to see if the player is ready, if not, show the splashscreen
if(ready == false){
    splashScreen();
    showText();
}
else{

    createSpaceship();
    // PROBLEM HERE
    a1.createAsteroid();
    a2.createAsteroid();

}
// Setup the scene
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glOrtho(0, 50, 0, 50, 0, 50);
// call the needed functions
glutSwapBuffers();

}

void idle(void)
{
glutPostWindowRedisplay(glutGetWindow());
// PROBLEM HERE
a1.animateAsteroid();
a2.animateAsteroid();

} 
```

对此的任何帮助都会很棒。我对采取什么方法感到困惑。如果需要，我可以提供更多信息或粘贴箱。谢谢！-担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:41:22.067

你只是想把你的`createAsteroid`函数分成两部分，一个是创建`Asteroid`，设置它的初始值，另一个是渲染。

您似乎有一个`ready`知道加载何时完成的功能，您应该在那里创建和初始化您的小行星。在显示中，您应该调用仅执行此部分的函数：

```
glPushMatrix();
glTranslatef(asteroidX, asteroidY, 0.0);
glColor3f(1.0, 1.0, 1.0);
glBegin(GL_LINE_STRIP);
glVertex2f(1.0, 1.0);
glVertex2f(1.8, 0.0);
glVertex2f(1.4, -0.8);
glVertex2f(1.0, -1.7);
glVertex2f(-1.5, -1.0);
glVertex2f(-1.0, 0.0);
glVertex2f(0.0, 1.4);
glVertex2f(1.0, 1.0);
glEnd();
glPopMatrix(); 
```

此外，您似乎也在重新创建玩家的宇宙飞船`display`，它应该只在初始化阶段创建，就像小行星一样！

**Edit:** If I'm not clear, when creating a game object you usually want at least 4 main methods: **Create/Init**, **Update** (where you would animate your object, do gameplay code like testing for bullet hits, etc...), **Render** and **Clean up / Destroy**. Sticking to that should really help you getting your game going!

# objective-c - 在 OSX 10.8 SDK/objective-c 中拖动一个按钮

> ID：13554681
> 
> 赞同：4
> 
> 时间：2012-11-25T19:35:57.013
> 
> 标签：objective-c, cocoa, drag-and-drop, nsbutton

*我今天*开始使用objective-c来为OSX（山狮）开发一个应用程序。我有一堆按钮，我想将它们拖到其他对象中，例如文本字段。我按照苹果开发网站上的教程进行操作，但我无法让拖动部分工作（例如，放置部分工作，我可以将文件从查找器拖动到文本文件中并显示其路径）。

我首先创建了一个 NSButton 子类： `@interface mp3OCDDraggableButton : NSButton`

并实现了如下所述的方法： [https ://developer.apple.com/library/mac/#samplecode/CocoaDragAndDrop/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/CocoaDragAndDrop/Introduction/Intro.html)

但是东西不动！

我在 mouseDown: 中放置了一些日志消息，我可以在其中看到，但如果我将其替换为 mouseDragged: 则不会： - 这能告诉我什么吗？

任何人都可以发布一个具有此功能的简单示例吗？我找不到任何有用的东西：\

提前谢谢了！

这是我到目前为止的可拖动按钮的代码。和教程里的差不多。

```
//myDraggableButton.h

@interface myDraggableButton : NSButton <NSDraggingSource, NSPasteboardItemDataProvider>
@end 
```

和

```
//myDraggableButton.m

#import "myDraggableButton.h"

@implementation myDraggableButton

- (void)mouseDown:(NSEvent *)theEvent:(NSEvent*)event
{

    NSLog(@"mouseDown");

    NSPasteboardItem *pbItem = [NSPasteboardItem new];
    [pbItem setDataProvider:self forTypes:[NSArray arrayWithObjects:NSPasteboardTypeString, nil]];
    NSDraggingItem *dragItem = [[NSDraggingItem alloc] initWithPasteboardWriter:pbItem];
    NSRect draggingRect = self.bounds;
    [dragItem setDraggingFrame:draggingRect contents:[self image]];
    NSDraggingSession *draggingSession = [self beginDraggingSessionWithItems:[NSArray arrayWithObject:dragItem] event:event source:self];
    draggingSession.animatesToStartingPositionsOnCancelOrFail = YES;
    draggingSession.draggingFormation = NSDraggingFormationNone;
}

- (NSDragOperation)draggingSession:(NSDraggingSession *)session sourceOperationMaskForDraggingContext:(NSDraggingContext)context
{
    switch (context) {
        case NSDraggingContextOutsideApplication:
            return NSDragOperationCopy;
        case NSDraggingContextWithinApplication:
        default:
            return NSDragOperationCopy;
            break;
    }
}

- (BOOL)acceptsFirstMouse:(NSEvent *)event
{
    return YES;
}

- (void)pasteboard:(NSPasteboard *)sender item:(NSPasteboardItem *)item provideDataForType:(NSString *)type
{
    if ( [type compare: NSPasteboardTypeTIFF] == NSOrderedSame ) {
        [sender setData:[[self image] TIFFRepresentation] forType:NSPasteboardTypeTIFF];
    } else if ( [type compare: NSPasteboardTypePDF] == NSOrderedSame ) {
        [sender setData:[self dataWithPDFInsideRect:[self bounds]] forType:NSPasteboardTypePDF];
    }

}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-08T18:28:16.170

我为死灵法致歉，但我在尝试自己实现这个问题时偶然发现了这个问题，并想分享答案，因为它可能对其他人有用。

这个解决方案使用类别`NSActionCell`，`NSControl`因为我需要能够拖动多种控件类型，而不仅仅是按钮。您可以根据您的需求/课程进行调整。

我已经注释掉了与隐藏/取消隐藏控件时不希望的淡入淡出动画的变通方法黑客相关的代码。我摆弄了隐式动画等，但想不出更好的方法。hack 确实工作得很好，但我把窗口实现代码留了下来。

```
@implementation NSControl (DragControl)

- (NSDraggingSession*)beginDraggingSessionWithDraggingCell:(NSActionCell <NSDraggingSource> *)cell event:(NSEvent*) theEvent
{
    NSImage* image = [self imageForCell:cell];
    NSDraggingItem* di = [[NSDraggingItem alloc] initWithPasteboardWriter:image];
    NSRect dragFrame = [self frameForCell:cell];
    dragFrame.size = image.size;
    [di setDraggingFrame:dragFrame contents:image];

    NSArray* items = [NSArray arrayWithObject:di];

    [self setHidden:YES];
    return [self beginDraggingSessionWithItems:items event:theEvent source:cell];
}

- (NSRect)frameForCell:(NSCell*)cell
{
    // override in multi-cell cubclasses!
    return self.bounds;
}

- (NSImage*)imageForCell:(NSCell*)cell
{
    return [self imageForCell:cell highlighted:[cell isHighlighted]];
}

- (NSImage*)imageForCell:(NSCell*)cell highlighted:(BOOL) highlight
{
    // override in multicell cubclasses to just get an image of the dragged cell.
    // for any single cell control we can just make sure that cell is the controls cell

    if (cell == self.cell || cell == nil) { // nil signifies entire control
                                            // basically a bitmap of the control
                                            // NOTE: the cell is irrelevant when dealing with a single cell control
        BOOL isHighlighted = [cell isHighlighted];
        [cell setHighlighted:highlight];

        NSRect cellFrame = [self frameForCell:cell];

        // We COULD just draw the cell, to an NSImage, but button cells draw their content
        // in a special way that would complicate that implementation (ex text alignment).
        // subclasses that have multiple cells may wish to override this to only draw the cell
        NSBitmapImageRep* rep = [self bitmapImageRepForCachingDisplayInRect:cellFrame];
        NSImage* image = [[NSImage alloc] initWithSize:rep.size];

        [self cacheDisplayInRect:cellFrame toBitmapImageRep:rep];
        [image addRepresentation:rep];
        // reset the original cell state
        [cell setHighlighted:isHighlighted];
        return image;
    }
    // cell doesnt belong to this control!
    return nil;
}

#pragma mark NSDraggingDestination
// message forwarding doesnt work for NSDraggingDestination methods
// because NSView implements empty methods for the protocol
/*
- (NSDragOperation)draggingEntered:(id < NSDraggingInfo >)sender
{
    return [self.cell draggingEntered:sender];
}

- (void)draggingExited:(id < NSDraggingInfo >)sender
{
    [self.cell draggingExited:sender];
}

- (BOOL)prepareForDragOperation:(id < NSDraggingInfo >)sender
{
    return [self.cell prepareForDragOperation:sender];
}

- (BOOL)performDragOperation:(id < NSDraggingInfo >)sender
{
    return [self.cell performDragOperation:sender];
}

- (void)concludeDragOperation:(id < NSDraggingInfo >)sender
{
    return [self.cell concludeDragOperation:sender];
}
*/
- (void)draggingEnded:(id < NSDraggingInfo >)sender
{
    // implement whatever you want to do here.
    [self setHidden:NO];
}

@end

static NSPoint _dragImageOffset;
@implementation NSActionCell (DragCell)

- (void)setControlView:(NSView *)view
{
    // this is a bit of a hack, but the easiest way to make the control dragging work.
    // force the control to accept image drags.
    // the control will forward us the drag destination events via our DragControl category

    [view registerForDraggedTypes:[NSImage imagePasteboardTypes]];
    [super setControlView:view];
}

- (BOOL)trackMouse:(NSEvent *)theEvent inRect:(NSRect)cellFrame ofView:(NSView *)controlView untilMouseUp:(BOOL)untilMouseUp
{
    BOOL result = NO;
    NSPoint currentPoint = theEvent.locationInWindow;
    BOOL done = NO;
    BOOL trackContinously = [self startTrackingAt:currentPoint inView:controlView];

    BOOL mouseIsUp = NO;
    NSEvent *event = nil;
    while (!done)
    {
        NSPoint lastPoint = currentPoint;

        event = [NSApp nextEventMatchingMask:(NSLeftMouseUpMask|NSLeftMouseDraggedMask)
                                   untilDate:[NSDate distantFuture]
                                      inMode:NSEventTrackingRunLoopMode
                                     dequeue:YES];

        if (event)
        {
            currentPoint = event.locationInWindow;

            // Send continueTracking.../stopTracking...
            if (trackContinously)
            {
                if (![self continueTracking:lastPoint
                                         at:currentPoint
                                     inView:controlView])
                {
                    done = YES;
                    [self stopTracking:lastPoint
                                    at:currentPoint
                                inView:controlView
                             mouseIsUp:mouseIsUp];
                }
                if (self.isContinuous)
                {
                    [NSApp sendAction:self.action
                                   to:self.target
                                 from:controlView];
                }
            }

            mouseIsUp = (event.type == NSLeftMouseUp);
            done = done || mouseIsUp;

            if (untilMouseUp)
            {
                result = mouseIsUp;
            } else {
                // Check if the mouse left our cell rect
                result = NSPointInRect([controlView
                                        convertPoint:currentPoint
                                        fromView:nil], cellFrame);
                if (!result)
                    done = YES;
            }

            if (done && result && ![self isContinuous])
                [NSApp sendAction:self.action
                               to:self.target
                             from:controlView];
            else {
                done = YES;
                result = YES;

                // this initiates the control drag event using NSDragging protocols
                NSControl* cv = (NSControl*)self.controlView;
                NSDraggingSession* session = [cv beginDraggingSessionWithDraggingCell:self
                                                                                event:theEvent];
                // _dragImageOffset = [cv convertPoint:[theEvent locationInWindow] fromView:nil];
                // Note that you will get an ugly flash effect when the image returns if this is set to yes
                // you can work around it by setting NO and faking the release by animating an NSWindowSubclass with the image as the content
                // create the window in the drag ended method for NSDragOperationNone
                // there is [probably a better and easier way around this behavior by playing with view animation properties.
                session.animatesToStartingPositionsOnCancelOrFail = YES;
            }

        }
    }
    return result;
}

#pragma mark - NSDraggingSource Methods
- (NSDragOperation)draggingSession:(NSDraggingSession *)session sourceOperationMaskForDraggingContext:(NSDraggingContext)context
{
    switch(context) {
        case NSDraggingContextOutsideApplication:
            return NSDragOperationNone;
            break;

        case NSDraggingContextWithinApplication:
        default:
            return NSDragOperationPrivate;
            break;
    }
}
/*
- (void)draggingSession:(NSDraggingSession *)session willBeginAtPoint:(NSPoint)screenPoint
{
    DragAnimationWindow* dw = [DragAnimationWindow sharedAnimationWindow];
    NSControl* cv = (NSControl*)self.controlView;

    NSImage* image = [[NSImage alloc] initWithPasteboard:session.draggingPasteboard];
    [dw setupDragAnimationWith:cv usingDragImage:image];
    [image release];
    NSRect frame = [cv frameForCell:self];
    frame = [cv convertRect:frame toView:nil];
    [dw setFrame:[cv.window convertRectToScreen:frame] display:NO];
}
*/
- (void)draggingSession:(NSDraggingSession *)session endedAtPoint:(NSPoint)screenPoint operation:(NSDragOperation)operation
{
    /*
    if (operation == NSDragOperationNone) {
        DragAnimationWindow* dw = [DragAnimationWindow sharedAnimationWindow];
        NSRect frame = dw.frame;

        NSPoint start = screenPoint;
        start.y += _dragImageOffset.y;
        start.x -= _dragImageOffset.x;

        [dw setFrameTopLeftPoint:start];
        [dw animateToFrame:frame];
    }*/
    // now tell the control view the drag ended so it can do any cleanup it needs
    // this is somewhat hackish
    [self.controlView draggingEnded:nil];
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-02T06:54:10.500

问题可能是您正在调用但您在传递该类型`-setDataProvider:forTypes:`时什么都不做？`NSPasteboardTypeString``-pasteboard:item:provideDataForType:`

# python - 从 asyncmongo 向客户端传递原始响应

> ID：13554685
> 
> 赞同：0
> 
> 时间：2012-11-25T19:36:23.083
> 
> 标签：python, mongodb, tornado

我正在研究通过查询 mongodb 来过滤项目的 javascript API。无需服务器端处理。我只是查询 mongodb 并将其响应发送到浏览器以 javascript 处理它。是否可以不解析 mongodb 响应并将其作为字符串通过龙卷风传递给客户端（浏览器）以避免无用的 json 序列化/反序列化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T22:47:53.473

原始的 MongoDB 响应是[BSON（二进制 JSON）](http://bsonspec.org/)，它仍然需要对 JSON 进行一些按摩。[您可以在规范页面](http://bsonspec.org/#/specification)上查看 BSON 类型和编码数据的示例。

我不确定是否有可用的纯 JavaScript BSON 解析器 .. 但总的来说，使用 C 等低级语言进行序列化比使用 Python 和 JavaScript 等解释语言快得多。PyMongo 驱动程序包含 BSON 的 C 扩展，建议使用它来提高性能。

尝试通过基于浏览器的 JavaScript 进行从 BSON 转换为 JSON 时可能节省的任何服务器端工作都将更加昂贵。

相关阅读：

*   [PyMongo 和性能](http://wicknicks.wordpress.com/2012/07/23/pymongo-and-performance/)- 博客文章比较了使用和不使用 BSON C 扩展的 PyMongo 序列化（TL；DR：纯 Python 中的 145 秒与使用 C 扩展的 8 秒）

*   [BSON 规范](http://bsonspec.org/)

# java - 为什么它在错误的地方画线？

> ID：13554688
> 
> 赞同：2
> 
> 时间：2012-11-25T19:36:32.553
> 
> 标签：java, swing, keylistener, java-2d, mouselistener

我对此有疑问......当我画一条线时，角色跟随我画的线，但计算机在其他地方画了一条线： ![在此处输入图像描述](../Images/89fd3fa377c7e42f0b8a7516acce6335.png)

那么有人知道发生了什么吗？
`My code:`

```
@SuppressWarnings({"serial","rawtypes","unchecked"})
public class someGame extends JFrame implements MouseListener, KeyListener{

ArrayList lines = new ArrayList();
Point2D.Double start;
final Color BROWN = new Color(156,93,82);
Slider thread;
Rectangle cow = null;
boolean drawGuy = false;
public someGame(){
    super("Some Game");
    setSize(700,700);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    addMouseListener(this);
    addKeyListener(this);
}

public void paint(Graphics g){
    super.paint(g);
    g.setColor(Color.black);
    for(int i = 0; i < lines.size(); i++){
        Line2D.Double temp = (Line2D.Double) lines.get(i);
        int x1 = Integer.parseInt(""+Math.round(temp.getX1()));
        int x2 = Integer.parseInt(""+Math.round(temp.getX2()));
        int y1 = Integer.parseInt(""+Math.round(temp.getY1()));
        int y2 = Integer.parseInt(""+Math.round(temp.getY2()));

        g.drawLine(x1,x2,y1,y2);
    }

    if(drawGuy){
        try{
            URL url = this.getClass().getResource("resources/img/world/char.png");
            Image image = Toolkit.getDefaultToolkit().getImage(url);
            g.drawImage(image, cow.x, cow.y, this);
        } catch(Exception exc){}
    }
}

public void mouseClicked(MouseEvent e){}
public void mouseEntered(MouseEvent e){}
public void mouseExited(MouseEvent e){}
public void mousePressed(MouseEvent e){
    start = new Point2D.Double(e.getX(),e.getY());
}
public void mouseReleased(MouseEvent e){
    Point2D.Double end = new Point2D.Double(e.getX(),e.getY());
    lines.add(new Line2D.Double(start,end));
    repaint();
}
public void keyPressed(KeyEvent e){}
public void keyReleased(KeyEvent e){}
public void keyTyped(KeyEvent e){
    if(e.getKeyChar()=='p'||e.getKeyChar()=='P'){
        thread = new Slider();
        thread.start();
        thread.action(true);
    }
    if(e.getKeyChar()=='q'||e.getKeyChar()=='Q'){
        thread.action(false);
        drawGuy = false;
        thread = null;
    }
}
private class Slider extends Thread{
    double velocity, gravity;
    boolean go = false;
    public void run(){
        if(go){
            initGuy();
            velocity = 0;
            gravity = 1;
        }
        while(go){
            try{
                Line2D.Double lineTaken = null;
                boolean onLine = false;
                int firstOnLine = -1;
                for(int i = lines.size()-1; i>=0; i--){
                    Line2D.Double temp = (Line2D.Double) lines.get(i);
                    if(temp.intersects(cow.x,cow.y,50,50)){
                        lineTaken = temp;
                        onLine = true;
                        if(firstOnLine!=i){
                            firstOnLine = i;
                            gravity = 0;
                        }
                        break;
                    }
                }
                if(onLine){
                    double grav = (lineTaken.y2-lineTaken.y1)/50;
                    double vlct = (lineTaken.x2-lineTaken.x1)/100;
                    if(velocity<5)velocity+=vlct;
                    if(gravity<2.5)gravity+=grav;
                }
                else{
                    gravity+=.2;
                }
                cow.x+=velocity;
                cow.y+=gravity;

                Thread.sleep(75);
                repaint();
            }catch(Exception e){break;}
        }
    }
    public void action(boolean b){
        go = b;
    }
    public void initGuy(){
        Line2D.Double firstLine = (Line2D.Double) lines.get(0);
        int x = Integer.parseInt(""+Math.round(firstLine.x1));
        int y = Integer.parseInt(""+Math.round(firstLine.y1));
        cow = new Rectangle(x+30,y-20,30,30);
        drawGuy = true;
    }
} 
```

对不起大代码，但我不知道出了什么问题......非常感谢任何回答的人:)
......是的，主要方法是`someGame g = new someGame();`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:22:23.543

1）你不应该没有`paint(..)`充分的理由使用。而是扩展`JPanel`类并覆盖`paintComponent(...)`。

`JFrame`2）除非添加功能，否则不要扩展类

3) 不要忘记所有 Swing 组件的创建和操作都应该在 EDT 上完成 -[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

4）Java命名约定是CamelCase，类名的每个新词都应该以大写开头，即`SomeGame`

5）不要使用`setSize`而不是覆盖组件`getPreferredSize`并返回所需的大小，而不是`pack()`在`JFrame`设置可见之前调用。

6）使用[`Keybindings`](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)代替`KeyListener`

7）使用[`MouseAdapter`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseAdapter.html)代替`MouseListener`

8）不要扩展`Thread`类[，而是实现`Runnable`](http://www.go4expert.com/forums/showthread.php?t=4202)和创建`start()`方法以在可运行类中启动线程（我没有在下面的代码中实现）

9）除了在paint方法中绘制对象的必要性之外，执行长时间运行的任务（如加载图像或执行任何其他工作）不是一个好主意，您应该在类初始化时或至少在组件绘制方法之外加载图片等。（我没有在下面的代码中实现这个）

10）关于线条绘制不正确的最大问题是：

```
g.drawLine(x1,x2,y1,y2); 
```

它应该是[`drawLine(int x1,int y1,int x2,int y2)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics.html#drawLine%28int,%20int,%20int,%20int%29)：

```
g.drawLine(x1,y1,x2,y2); 
```

下面是代码（现在没时间解释希望你能看懂）：

正如@MadProgrammer 在下面的评论中所建议的那样，我添加了一些额外的东西，例如投射到抗锯齿`Graphics2D`和使用`RenderHints`抗锯齿。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Rectangle;
import java.awt.RenderingHints;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.Line2D;
import java.awt.geom.Point2D;
import java.net.URL;
import java.util.ArrayList;
import javax.swing.AbstractAction;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class SomeGame {

    public SomeGame() {
        JFrame frame = new JFrame("Some Game");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        DrawPanel dp = new DrawPanel();
        frame.add(dp);

        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new SomeGame();
            }
        });

    }
}

class DrawPanel extends JPanel {

    ArrayList lines = new ArrayList();
    Point2D.Double start;
    final Color BROWN = new Color(156, 93, 82);
    Slider thread;
    Rectangle cow = null;
    boolean drawGuy = false;

    public DrawPanel() {
        addMouseListener(new MouseAdapter() {
            @Override
            public void mouseReleased(MouseEvent me) {
                super.mouseReleased(me);
                Point2D.Double end = new Point2D.Double(me.getX(), me.getY());
                lines.add(new Line2D.Double(start, end));
                repaint();
            }

            @Override
            public void mousePressed(MouseEvent me) {
                super.mousePressed(me);
                start = new Point2D.Double(me.getX(), me.getY());
            }
        });
        setKeyBindings();
    }

    private void setKeyBindings() {
        getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_P, 0), "P");
        getActionMap().put("P", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                thread = new Slider(DrawPanel.this);
                thread.action(true);
                thread.start();
            }
        });
        getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke(KeyEvent.VK_Q, 0), "q");
        getActionMap().put("Q", new AbstractAction() {
            @Override
            public void actionPerformed(ActionEvent ae) {
                thread.action(false);
                drawGuy = false;
                thread = null;
            }
        });
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(700, 700);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        //lets go 2D :)
        Graphics2D g2d = (Graphics2D) g;

        //turn on anti aliasing
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);

        g2d.setColor(Color.black);

        for (int i = 0; i < lines.size(); i++) {
            Line2D.Double temp = (Line2D.Double) lines.get(i);
            int x1 = Integer.parseInt("" + Math.round(temp.getX1()));
            int x2 = Integer.parseInt("" + Math.round(temp.getX2()));
            int y1 = Integer.parseInt("" + Math.round(temp.getY1()));
            int y2 = Integer.parseInt("" + Math.round(temp.getY2()));

            g2d.drawLine(x1, y1, x2, y2);
        }

        if (drawGuy) {
            try {
                URL url = this.getClass().getResource("resources/img/world/char.png");
                Image image = Toolkit.getDefaultToolkit().getImage(url);
                g.drawImage(image, cow.x, cow.y, this);
            } catch (Exception exc) {
            }
        }
    }

    private class Slider extends Thread {

        double velocity, gravity;
        boolean go = false;
        private final DrawPanel dp;

        private Slider(DrawPanel dp) {
            this.dp = dp;
        }

        public void run() {
            if (go) {
                initGuy();
                velocity = 0;
                gravity = 1;
            }
            while (go) {
                try {
                    Line2D.Double lineTaken = null;
                    boolean onLine = false;
                    int firstOnLine = -1;
                    for (int i = lines.size() - 1; i >= 0; i--) {
                        Line2D.Double temp = (Line2D.Double) lines.get(i);
                        if (temp.intersects(cow.x, cow.y, 50, 50)) {
                            lineTaken = temp;
                            onLine = true;
                            if (firstOnLine != i) {
                                firstOnLine = i;
                                gravity = 0;
                            }
                            break;
                        }
                    }
                    if (onLine) {
                        double grav = (lineTaken.y2 - lineTaken.y1) / 50;
                        double vlct = (lineTaken.x2 - lineTaken.x1) / 100;
                        if (velocity < 5) {
                            velocity += vlct;
                        }
                        if (gravity < 2.5) {
                            gravity += grav;
                        }
                    } else {
                        gravity += .2;
                    }
                    cow.x += velocity;
                    cow.y += gravity;

                    Thread.sleep(75);
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            dp.repaint();
                        }
                    });
                } catch (Exception e) {
                    break;
                }
            }
        }

        public void action(boolean b) {
            go = b;
        }

        public void initGuy() {
            Line2D.Double firstLine = (Line2D.Double) lines.get(0);
            int x = Integer.parseInt("" + Math.round(firstLine.x1));
            int y = Integer.parseInt("" + Math.round(firstLine.y1));
            cow = new Rectangle(x + 30, y - 20, 30, 30);
            drawGuy = true;
        }
    }
} 
```

# python - 在整个服务器请求中设置和获取线程或全局值

> ID：13554689
> 
> 赞同：0
> 
> 时间：2012-11-25T19:36:47.090
> 
> 标签：python, django, http, request, web.py

是否可以设置一个线程或类似的东西来在每个服务器请求中存储一个值？

我了解来自线程或全局变量的值仅在每个服务器请求期间获取/设置，而且这些值不能脱离上下文更改，因为一切都在“映射”类中完成。

尽管我只是对此感到好奇，因为在每个请求上设置一个值并对其进行操作会很棒，但我不知道它可能是存储在内存中的变量，以便以后可以引用它。

我这样说是因为会话、cookie 和与 Web 应用程序相关的所有内容只能通过每个 GET/POST 请求进行操作。到目前为止，这就是我所拥有的：

```
import web
import threading

threadlocal = threading.local()

def set_value():
    setattr(threadlocal, 'mythread', 'threadvalue')

def get_value():
    return getattr(threadlocal, 'mythread', None)

urls = (
    "/set_thread_value", "set_thread_value",
    "/get_thread_value", "get_thread_value"
)

app = web.application(urls, globals())

t_globals = {
    'template_thread': get_value()
}    
render = web.template.render('templates', globals=t_globals)

class set_thread_value:
    def GET(self):

        set_value()

        return get_value()

class get_thread_value:
    def GET(self):

        return get_value() 
```

正如您在调用“set_thread_value”时所看到的那样，您设置了线程值并将其显示在屏幕上，但是当您调用“get_thread_value”时，您将获得 None 。

您可能还注意到我想将线程传递给模板，以便可以显示更新后的值。

编辑：我不想使用 mysql、mongodb 或任何其他存储系统来设置线程中的值。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:32:47.420

您应该使用[memcache](http://memcached.org/)（或[redis](http://redis.io/)）之类的东西来存储您需要跨请求保留在内存中的内容和值。这是关于全局变量的相关问题：

[Python Django 全局变量](https://stackoverflow.com/questions/2680902/python-django-global-variables)

# c - Errno：11，资源暂时不可用

> ID：13554691
> 
> 赞同：18
> 
> 时间：2012-11-25T19:37:00.790
> 
> 标签：c, sockets, udp

我正在使用 c 套接字来实现可靠的 UDP 协议。我正在使用以下代码在等待确认的套接字上设置超时。我不知道为什么我得到 errno 11，资源暂时不可用。

```
 //set timer for recv_socket
        struct timeval tv;
        tv.tv_usec = TIMEOUT_MS;

        if(setsockopt(rcv_sock, SOL_SOCKET, SO_RCVTIMEO,&tv,sizeof(tv)) < 0){
            printf("Error setting the socket timeout.\n");
        }

        int recv_msg_len;
        if(recv_msg_len = recvfrom(rcv_sock, ackBuffer,sizeof(ackBuffer), 0,
               (struct sockaddr *) &servAddr2, &fromSize) < 0){
            //timeout reached
            printf("Error Reporting: %d : %s\n", errno, strerror(errno));
            num_timeouts++;
        } 
```

我也尝试了评论中提到的 select 方法。我在循环中有以下代码，但 recvfrom 永远不会超时。

```
 fd_set set;
        FD_ZERO(&set);      /* empties the set */
        FD_CLR(rcv_sock,&set);    /* removes FD from the set */
        FD_SET(rcv_sock,&set);    /* adds FD to the set */

        if(select(rcv_sock + 1, &set, NULL, NULL, &tv) < 0){
            printf("\nError Reporting: %d : %s\n\n", errno, strerror(errno));
            return -1;
        }

        if(!FD_ISSET(rcv_sock,&set)){   /* true if FD is in the set */
            printf("socket is not set properly.\n");
        } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-26T11:05:29.503

当调用`recvfrom()`阻塞套接字并设置了超时时，如果调用超时（即：在指定为超时的时间段内没有收到数据），`setsockopt()`通常会出现错误。`EAGAIN (11)``recvfrom()`

逐字逐句`man recvfrom`：

> **返回值**
> 
> ...
> 
> **错误**
> 
> ... .
> 
> EAGAIN 或 EWOULDBLOCK 套接字被标记为非阻塞并且接收操作将阻塞，*或者已设置接收超时并且在接收数据之前超时已过期*。...

要解决这个问题：只需`recvfrom ()`再次调用...... ;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T19:03:04.723

对我来说，问题是由于 ipV6 数据包到达绑定到特定端口的 UDP 套接字。这些触发了 select() 但是当我尝试使用 recvfrom() 读取它们时，调用返回“资源暂时不可用”。我的应用程序不需要 IPV6，所以我只是通过 sysctl.conf 禁用了它。问题现在消失了！

# android - com.jayway.maven.plugins.android.generation2：生命周期配置未涵盖插件执行？

> ID：13554694
> 
> 赞同：20
> 
> 时间：2012-11-25T19:37:04.930
> 
> 标签：android, eclipse, maven, android-maven-plugin

我难住了。我们最近将我们的 Android 项目转换为 Maven 项目。我的伙伴正在使用 IntelliJ，而我正在使用 Eclipse。他说这与他的设置相得益彰。

我对 Maven 非常陌生，并且遵循了教程并阅读了我能找到的所有内容以尝试解决这个问题。

我的 pom.xml 文件中有以下错误：

```
Multiple annotations found at this line:
- Plugin execution not covered by lifecycle configuration: com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.2:proguard (execution: default-proguard, 
 phase: process-classes)
- Plugin execution not covered by lifecycle configuration: com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.2:generate-sources (execution: default-
 generate-sources, phase: generate-sources) 
```

这是我的 pom.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.groupmd.clientandroid</groupId>
<artifactId>clientandroid</artifactId>
<version>1.0.0-SNAPSHOT</version>
<packaging>apk</packaging>
<name>GroupMD</name>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
        <version>r7</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.2.2</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>com.actionbarsherlock</groupId>
        <artifactId>actionbarsherlock</artifactId>
        <version>4.2.0</version>
        <type>apklib</type>
    </dependency>
</dependencies>
<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.2</version>
                <extensions>true</extensions>
            </plugin>
        </plugins>
    </pluginManagement>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <configuration>
                <sdk>
                    <!-- platform or api level (api level 4 = platform 1.6)-->
                    <platform>14</platform>
                </sdk>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-05-07T19:21:49.657

发生这种情况是因为 Eclipse (m2e) 的 Maven 插件默认知道在常规插件执行（编译、测试、流程资源等）上做什么，但它不知道这些 Android 的“做什么”插件执行。

有时，例如在配置 maven-war-plugin、maven-ear-plugin 等时，您可以通过从 Eclipse Marketplace 下载所谓的“m2e-connectors”来增强 m2e 提供的基本功能。在那之后，m2e 知道在某些“非标准”插件执行时该做什么，并停止显示这些错误。

在这种特殊情况下（Android 插件），您很幸运，并且需要安装连接器来解决问题。

选项1：（更简单）

> 转到 Eclipse Marketplace 并查找“Android Configurator for M2E”并安装它。

如果由于某种原因，您无法使用/访问 Marketplace（例如，如果您使用 Spring Tool Suite -STS-），您仍然可以安装连接器：

选项2：

> 帮助 --> 安装新软件... --> 使用并粘贴以下内容（原样，不省略任何内容）

```
Maven Integration for Android Development Tools Dependency Sites - http://rgladwell.github.com/m2e-android/updates/ 
```

并按 ENTER。它将弹出一个确认对话框，再次按 ENTER，您应该能够看到该更新站点上可用的软件。只需勾选所有这些（“NDK 插件”是唯一可选的），就是这样，在完全重建后，您的问题应该消失了。

希望这可以帮助。

# symfony - symfony2 失败并出现错误“此值不应为空”

> ID：13554695
> 
> 赞同：2
> 
> 时间：2012-11-25T19:37:07.110
> 
> 标签：symfony, assert

我正在使用 symfony2 表单，现在我收到消息“此值不应为空。”.. 现在“此值”.. 这个值是多少？以及如何解决？

通过转储错误： ($form->getErrors()) 我得到

```
array (size=3)
  0 => 
    object(Symfony\Component\Form\FormError)[2418]
      protected 'messageTemplate' => string 'This value should not be null.' (length=30)
      protected 'messageParameters' => 
        array (size=0)
          empty
      protected 'messagePluralization' => null
  1 => 
    object(Symfony\Component\Form\FormError)[2420]
      protected 'messageTemplate' => string 'This value should not be null.' (length=30)
      protected 'messageParameters' => 
        array (size=0)
          empty
      protected 'messagePluralization' => null
  2 => 
    object(Symfony\Component\Form\FormError)[2421]
      protected 'messageTemplate' => string 'This value should not be null.' (length=30)
      protected 'messageParameters' => 
        array (size=0)
          empty
      protected 'messagePluralization' => null 
```

在切换了一些断言之后，一个 formError 消失了。那是什么：

```
 /**
  * @ORM\Column(type="integer")
  * @Assert\NotNull()
  */
 protected $price;

var_dump( $reservation->getPrice(), is_null( $reservation->getPrice() ) ); 
```

结果：

```
float 733

boolean false 
```

但是在断言中这是一个错误..

实体失败：

```
/**
 * @ORM\Column(type="integer")
 * @Assert\NotNull()
 */
protected $price;

/**
* @ORM\ManyToOne(targetEntity="Caravan", inversedBy="caravan")
* @ORM\JoinColumn(name="caravan_id", referencedColumnName="id")
* @Assert\NotNull()
*/
protected $caravan;

/**
 * @ORM\Column(type="datetime")
 * @Assert\NotNull()
 */
protected $created; 
```

这些是我在 isValid 检查之前在控制器中设置的 3 个属性。如果我这样做：

```
$form->getData(); 
```

它有正确的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:55:49.947

问题是：

不管用：

```
$form->bind( $request );

$reservation->setCreated( new \DateTime() );

if( $form->isValid() ){

} 
```

将工作：

```
$reservation->setCreated( new \DateTime() );

$form->bind( $request );

if( $form->isValid() ){

} 
```

当表单绑定时，他将检查他是否有效。所以在那之后他不会再检查它了。

所以一点建议，在isValid检查前的最后一刻绑定它=）

# c#-4.0 - 如何以编程方式修改代码

> ID：13554697
> 
> 赞同：2
> 
> 时间：2012-11-25T19:37:41.713
> 
> 标签：c#-4.0, code-analysis, error-logging

我需要的是一个工具（如果可能的话，一个库），它允许我在解决方案中解析 C# 源代码并检测每个单个对象（在解决方案的类中声明）和每个单个静态类以供将来操作。

我需要它，因为我会以编程方式插入一些方法调用（用于记录目的），但为了做到这一点（并且自动），我需要知道每个对象的结构（因为我还将包括对象状态的描述......）

目前我已经考虑过这个解决方案： [http ://csparser.codeplex.com/](http://csparser.codeplex.com/)

但我不确定这是否最适合我的目的（似乎已被放弃）。我希望这里有人知道更好的解决方案（如果可能，免费）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:39:25.347

我会查看 Microsoft 的[Rosyln CTP](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)：

> 传统上，编译器是黑盒子——源代码在一端，目标文件或程序集从另一端出来。Roslyn 项目通过将 Visual Basic 和 C# 编译器作为 API 开放来更改该模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:13:22.270

我们的 DMS Software Reengineering Toolkit 可以使用语言准确的解析器对源代码执行任意“程序化”操作。在内部，它像编译器一样运行（解析、树构建、分析），但人们可以控制它的工作，并对 AST 进行更改，以及从这些更改的树中重新生成有效的源文本。

它具有可用的 C# 和 VB.dot 前端。

它是商业的。

# ios - 无法获取 NSData

> ID：13554699
> 
> 赞同：0
> 
> 时间：2012-11-25T19:37:54.427
> 
> 标签：ios

我有这个 url，一个音频文件 [http://www.metrixzolutions.com/audio/1353301873.caf](http://www.metrixzolutions.com/audio/1353301873.caf) 我在浏览器上查看 url，它是一个音频数据文件。

但是，当我这样做时

```
 NSString* Path;
Path=@"http://www.metrixzolutions.com/audio/1353301873.caf";
NSURL *url = [NSURL fileURLWithPath:Path];
NSData *downloadData = [NSData dataWithContentsOfURL:url]; 
```

downloadData 是 nil，并且说它不是 NSdata，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:40:43.970

因为此 URL 不代表文件系统路径。尝试使用`NSURL *url = [NSURL URLWithString:Path];`，应该没问题。

下次请努力仔细阅读相应的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:45:50.330

如果你想从网络上获取数据，你可以实现 NSURLRequest 和 NSURLConnection。

```
NSString *path = @"http://www.metrixzolutions.com/audio/1353301873.caf";
NSURL *url = [NSURL URLWithString:path];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

[NSURLConnection sendAsynchronousRequest:request
                 queue:[NSOperationQueue mainQueue]
                 completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    NSLog(@"%@", data); //<-- this is your data

}]; 
```

# oracle - 使用参数在 Oracle 存储过程中如何或可以使用以下 sql？

> ID：13554703
> 
> 赞同：2
> 
> 时间：2012-11-25T19:38:25.580
> 
> 标签：oracle

我对 Oracle SQL 编程非常陌生。可以在使用参数的 Oracle 存储过程中使用以下 sql（请参阅我想在哪里使用参数）？如果是这样，怎么做？

```
Select Tuo.* 
 From OFFVISITS Tuo
 inner join (                   
 select mr1.pat_id, count(mr1.contact_date) 
 from OFFVISITS mr1
 inner join (                                 
   select pat_id,count(contact_date) 
   from OFFVISITS
   Where Death_Date Is Null
   A nd Rpt_Grp = <parameter 1>    
    AND MONTHS_BETWEEN(SYSDATE,CONTACT_DATE) <= <parameter 2>   
   group by pat_id
   having count(contact_date) >= <parameter 3>) mr2 on mr2.pat_id = mr1.pat_id    
Where Mr1.Death_Date Is Null
And Mr1.Rpt_Grp = <parameter 4> 
AND MONTHS_BETWEEN(SYSDATE,mr1.CONTACT_DATE) <= <parameter 5> 
and mr1.ref_bill_code in (select DIAGNOSIS_CODE from DIAG_CODES)
group by mr1.pat_id
Having Count(Mr1.Contact_Date) >= 1) Mr On Mr.Pat_Id = Tuo.Pat_Id  
AND TUO.RPT_GRP = <parameter 6>  
order by tuo.pat_id'; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:41:27.957

是的你可以。尝试这个

```
CREATE OR REPLACE PROCEDURE MyFirst_PROC
(
    PARAMETER_1_  IN   VARCHAR2,
    PARAMETER_4_  IN   INT,
    PARAMETER_5_  IN   DATE
)
IS
BEGIN

   ...
   Where Mr1.Death_Date Is Null
   And Mr1.Rpt_Grp = PARAMETER_4_   
   AND MONTHS_BETWEEN(SYSDATE,mr1.CONTACT_DATE) <= PARAMETER_5_ 

END; 
```

我已将剩余的参数留给您填写和更正参数类型，因为我不得不猜测您的列（例如 Mr1.Rpt_Grp）是什么类型

# webserver - 最快的静态文件服务服务器

> ID：13554706
> 
> 赞同：0
> 
> 时间：2012-11-25T19:38:44.387
> 
> 标签：webserver

我试图找出最适合用于提供静态文件的服务器端技术？

CDN 的服务使用什么？

而且我很感兴趣，如果您从不同的服务器（硬件）提供静态文件而不是从提供数据的同一服务器提供服务，它是否会增加任何性能（用于数据服务）？就像完全分离客户端和服务器文件一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:05:06.073

许多技术都用于快速制作 CDN；

*   将您的文档根目录挂载为 ramdisk。
*   缓存对大多数常见查询的完整响应，而不是重建 http。
*   调整交换性（或根本没有交换）
*   防火墙负载均衡
*   DNS 负载均衡
*   地理位置负载均衡
*   关闭日志记录/主机名解析/各种查找。
*   许多核心，大管道。

# javascript - Internet 连接错误消息 - 带有 Javascript 的 Windows 8 应用程序

> ID：13554707
> 
> 赞同：0
> 
> 时间：2012-11-25T19:38:46.793
> 
> 标签：javascript, windows-8, winjs, messagedialog

我正在尝试为我的应用程序添加一个基本检测脚本，以允许它在调用`WinJS.xhr`失败时显示错误消息。

我让每个 WinHS.xhr 调用以下函数 onerror （使用 的第二个参数`.done()`）并且该部分运行良好。

```
function connectionError() {
    var msg = new Windows.UI.Popups.MessageDialog("There was a connection error while trying to access online content. Please check your internet connection.");

    // Add commands and set their CommandIds
    msg.commands.append(new Windows.UI.Popups.UICommand("Retry", null, 1));

    // Set the command that will be invoked by default
    msg.defaultCommandIndex = 1;

    // Show the message dialog
    msg.showAsync();
} 
```

当我显示对话框时出现问题。由于某些奇怪的原因，我在尝试显示对话框时收到“拒绝访问”错误消息。我检查了该消息的含义，如果我理解正确的话，它似乎是某处未兑现的承诺，尽管我看不出有任何方法可以将其应用于我的情况。

感谢您提供有关此错误的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T01:10:44.553

您在这里面临的问题是您不能将多个消息对话框堆叠在一起——例如，您一次只能显示一个。我使用以下代码在我的应用程序中解决了这个问题：

```
 (function () {
        var alertsToShow = [];
        var dialogVisible = false;

        function showPendingAlerts() {
            if (dialogVisible || !alertsToShow.length) {
                return;
            }

            dialogVisible = true;
            (new Windows.UI.Popups.MessageDialog(alertsToShow.shift())).showAsync().done(function () {
                dialogVisible = false;
                showPendingAlerts();
            })
        }
        window.alert = function (message) {
            if (window.console && window.console.log) {
                window.console.log(message);
            }

            alertsToShow.push(message);
            showPendingAlerts();
        }
    })(); 
```

这会将它们排队并连续显示它们。显然，这不适用于您的情况，但这应该是一个很好的起点。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T08:36:59.793

这里重要的是要有一个全局变量来确定对话框是否可见。Dominic 的代码非常适合一个接一个地显示来自数组的消息，但是如果您只想显示一条消息而不会使用您的示例出现错误，则应如下所示：

```
var dialogVisible = false;

function connectionError() {
    var msg = new Windows.UI.Popups.MessageDialog("There was a connection error while trying to access online content. Please check your internet connection.");

    if (dialogVisible) {
        return;
    }

    dialogVisible = true;

    // Add commands and set their CommandIds
    msg.commands.append(new Windows.UI.Popups.UICommand("Retry", null, 1));

    // Set the command that will be invoked by default
    msg.defaultCommandIndex = 1;

    // Show the message dialog
    msg.showAsync().done(function (button) {

        dialogVisible = false;

        //do whatever you want after dialog is closed
        //you can use 'button' properties to determine which button is pressed if you have more than one
    });
} 
```

# vba - Excel 2010 中的动态打印范围

> ID：13554708
> 
> 赞同：3
> 
> 时间：2012-11-25T19:39:09.643
> 
> 标签：vba, excel-2010

我正在尝试设置动态打印范围以打印工作簿中的工作表，该工作簿是从同一工作簿中的另一张工作表填充的。我似乎遇到了麻烦。我在名称管理器中设置了一个名为横向的命名范围，如下所示：

> =OFFSET('横向打印幻灯片'!$A$27, 0, 0, COUNTA('横向打印幻灯片'!$A:$A), COUNTA('横向打印幻灯片'!$1:$1))

我一直在尝试编写 VBA 代码（我对 VBA 一无所知）我有这个......

```
Sub Printarea()
    ActiveSheet.PageSetup.Printarea = "lateral"
End Sub 
```

我收到错误“运行时错误'1004'”

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:38:03.090

最后两个参数指定范围“横向”的高度和宽度。他们计算非空单元格的数量。像尼尔一样，我发现您的代码没有问题，前提是：

*   您在 Slide Sheet Print Lateral 工作表上（否则对 Activesheet 的引用会出错，因为您试图将活动工作表的打印范围设置为不同工作表上的范围）；和
*   幻灯片打印侧页的 A 列和第 1 行中有一些东西。但是，如果没有，您将为零范围指定高度和/或宽度。这是一个无效的范围引用，然后您将收到 1004 错误。

您可以安全地避免这种情况的唯一方法是在分配范围之前在 VBA 代码中获取 CountA 值；如果其中一个为零，则警告用户并中止。

我还建议您不要在此类过程中使用方法或属性名称；你通常可以侥幸逃脱，但有时它会导致问题。为了安全起见，调用类似 SetMyPrintRange 的过程。

编辑：经过反思，我不会费心检查计数；只是尝试获取对范围的引用，如果不能，然后告诉用户该怎么做。尝试这个：

```
Sub SetMyPrintArea()

    Dim l As Long
    Dim wks As Excel.Worksheet
    Dim rng As Excel.Range

    'Check that the worksheet exists.
    On Error Resume Next
    Set wks = ThisWorkbook.Worksheets("Slide Sheet Print Lateral")
    On Error GoTo ErrorHandler

    'If it doesn't, throw an error which will send it to the error handler.
    If wks Is Nothing Then
        Err.Raise vbObjectError + 20000, , _
         "The worksheet Slide Sheet Print Lateral is not in this workbook."
    End If

    'Try to get the reference to the range. If we can't, there's something wrong.
    On Error Resume Next
    Set rng = wks.Range("lateral")
    On Error GoTo ErrorHandler

    If rng Is Nothing Then
        Err.Raise vbObjectError + 20000, , _
         "Cannot find the range named 'lateral'. Please ensure that there is " _
         & "content in row 1 and column A of the Slide Sheet Lateral sheet."
    End If

    wks.PageSetup.Printarea = "lateral"

ExitPoint:

'Just cleaning up the object references
'to leave the place tidy...
On Error Resume Next
Set rng = Nothing
Set wks = Nothing
On Error GoTo 0

Exit Sub

ErrorHandler:

'Display the message and go to the exit point.
MsgBox "Error " & Err.Number & vbCrLf & Err.Description

Resume ExitPoint

End Sub 
```

# lambda - 在 Prolog 查询中隐藏变量

> ID：13554709
> 
> 赞同：6
> 
> 时间：2012-11-25T19:39:15.520
> 
> 标签：lambda, prolog

我正在处理涉及机场数据库的序言任务（它有机场城市，以及包括机场税和持续时间的航班链接），第一个问题涉及查询。我们应该编写一个 Prolog 查询来回答一个问题，我已经知道如何回答这个问题，问题是 Prolog 输出的信息比我想要的多。我写的查询是：

```
flight(X,_,Y,_,N), N > 180\. 
```

基本上它所做的只是列出所有城市（X 是始发航班，Y 是目的地航班，N 是持续时间）。我想要 X 和 Y 但我不想 N我不知道如何解决这个问题。我真的不想要一个明确的答案，也许只是一个提示或什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T22:09:50.087

在可能的情况下，我更喜欢使用表达式来压缩 IO

```
?- forall((flight(X,_,Y,_,N), N > 180),
           writeln((x=X,y=Y))). 
```

例如，使用不同的生成器

```
?- forall((member(X,"12"),member(Y,"ab")),writeln((x=X,y=Y))).
x=49,y=97
x=49,y=98
x=50,y=97
x=50,y=98
true. 
```

当然，正确缩进表格[格式](http://www.swi-prolog.org/pldoc/doc_for?object=format/2)/2 会做得更好......

**编辑** 也许我误解了这个问题，假设你已经考虑过

```
query(X,Y) :-
  flight(X,_,Y,_,N), N > 180. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T22:51:06.717

Jekejeke Prolog 为这个问题提供了独特的解决方案。它允许 (^)/2 运算符出现在顶级查询中。因此，如果您有：

```
?- [user].
flight(a,1,b,2,100).
flight(c,3,d,4,200).
^D 
```

您通常会得到以下答案，而 N 可能会惹恼您：

```
?- flight(X,_,Y,_,N), N > 180.
X = c,
Y = d,
N = 200 
```

您现在可以按如下方式隐藏 N：

```
?- N^(flight(X,_,Y,_,N), N>180).
X = c,
Y = d 
```

为此目的使用 (^)/2 源于在 bagof/3 和 setof/3 谓词中已经找到的 (^)/2 的作用。

再见

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T22:26:30.473

使用[`library(lambda)`](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)您可以声明那些应该保持可见的变量。

```
?- {X,Y}+\ ( flight(X,_,Y,_,N), N > 180 ).
X = c,
Y = d. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T21:37:51.847

对于这样的一次性查询，我经常使用简单的打印语句，例如：

```
flight(X,_,Y,_,N), N > 180, print(('X' = X, 'Y' = Y)), nl, fail. 
```

这样做的缺点是：

1.  输出可能很难看，除非您对它进行格式化。在这里，我正在构建一个`,/2`术语（带有`=/2`子术语），它应该类似于普通目标解决方案的 Prolog 输出。

2.  更糟糕的是，目标实际上失败了（以防止它成功打印所有许多虚假绑定，例如 for `N`），因此很难在更大的东西中使用。

但这是我所知道的打印一组在命令行中输入的目标的解决方案的最快方法，同时隐藏所有工作变量。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-25T21:17:58.090

以下是否提供了可接受的解决方案？`findall`找到满足给定目标的给定术语的所有统一. 因此，您可以根据需要格式化您的答案。

```
findall([X, Y], (flight(X, _, Y, _, N), N > 180), Solutions). 
```

# wcf - 无法在 Azure 上使用 wsHttpBinding 添加对服务的引用

> ID：13554713
> 
> 赞同：2
> 
> 时间：2012-11-25T19:39:28.930
> 
> 标签：wcf, azure

我刚刚向 Azure 发布了一个使用 wsHttpBinding 的 WCF 服务。在开发环境中，我已经添加了服务引用就好了，但是在部署到 Azure 之后，服务引用没有生成代理类。我必须切换到 Web Reference 才能使代码生成正常工作。为什么？

这是我的配置文件：

```
 <?xml version="1.0"?>
<configuration>
  <system.diagnostics>
<trace>
  <listeners>
    <add type="Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener, Microsoft.WindowsAzure.Diagnostics, Version=1.7.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
      name="AzureDiagnostics">
      <filter type="" />
    </add>
  </listeners>
</trace>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="MyService.DataSync">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:57059"/>
            <add baseAddress="http://xxxxxxxxxxx.cloudapp.net"/>
          </baseAddresses>
        </host>
        <endpoint address=""
          binding="wsHttpBinding" bindingConfiguration="" name="SvcEndpoint"
          contract="MyLibrary.IDataSync" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
  </system.webServer>
  <connectionStrings>
    <add name="db" connectionString="...."/>
  </connectionStrings>
</configuration> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:15:08.197

将此行为配置添加到您的端点

```
<behavior name="web"
   <webHttp />
</behavior> 
```

# javascript - 如何通过单击链接更改 rss 提要 url

> ID：13554714
> 
> 赞同：0
> 
> 时间：2012-11-25T19:39:44.127
> 
> 标签：javascript, jquery, hyperlink, rss

我是一个 javascript 新手，正在制作一个新闻应用程序，并且正在使用一个名为 zrss feed 的 jquery 插件。该插件具有通过从列表框中选择新闻源来更改 rss 提要 URL 的功能。

```
<script type="text/javascript">
    $(document).ready(function() {

setRSSFeed('#menu');    

$('#menu').change(function() {
    setRSSFeed(this)
});

function setRSSFeed(obj) {
    var feedurl = $('option:selected', obj).val();

    if (feedurl) {
        $('#test').rssfeed(feedurl);
    }
}
     });
</script>
<select id="menu">    
<optionvalue="http://feeds.reuters.com/reuters/oddlyEnoughNews">News</option>
<option value="http://feeds.bbc.co.uk/iplayer/highlights/tv/list">BBC </option>
<option value="http://rss.cnn.com/rss/edition.rss">CNN News</option>
</select> 
```

我的问题是，我不想通过从列表框中选择新来源来更改提要网址，而是希望通过单击链接来更改它们。谢谢！！

这是问题的一个工作示例[http://www.zazar.net/developers/jquery/zrssfeed/example_menu.html](http://www.zazar.net/developers/jquery/zrssfeed/example_menu.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:18:23.267

```
<div id="menu">
    <a href="http://feeds.reuters.com/reuters/oddlyEnoughNews">Reuters Oddly Enough News</a>
    <a href="http://feeds.bbc.co.uk/iplayer/highlights/tv/list">BBC iPlayer TV Listing</a>
    <a href="http://rss.cnn.com/rss/edition.rss">CNN News</a>
</div>
​ 
```

和

```
$('#menu a').on('click', function(e){
    e.preventDefault();
    feedurl($(this).attr('href'));
}).first().trigger('click'); 
```

编辑：根据请求更改为链接并从此处删除 feedurl()，以防 OP 将其复制到脚本中，覆盖真正的 feedurl()。

[工作演示](http://jsfiddle.net/popnoodles/HcQuc/4/)

# java - 按字符类型限制控制台输入

> ID：13554715
> 
> 赞同：0
> 
> 时间：2012-11-25T19:39:51.953
> 
> 标签：java, console-application

我目前有一个简单的函数（发布在下面），它向用户提出问题并期望得到一个整数答案。

有没有办法让java限制可以输入控制台的字符，即只允许输入数字。

我知道在其他编程语言中有一些简单的方法可以做到这一点，但是我应该如何在 java 中做到这一点并将其实现到我的函数中？

```
 static int questionAskInt(String question)
{
    Scanner scan = new Scanner (System.in);
    System.out.print (question+"\n");
    System.out.print ("Answer: ");
    return scan.nextInt();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:42:31.373

使用`Scanner.hasNextInt`和 while 循环，您可以限制用户提供输入，直到它传递一个`integer`值。

```
while (!scan.hasNextInt()) {
    System.out.println("Please enter an integer answer");
    scan.next();
} 
return scan.nextInt(); 
```

或者，您也可以提供一定数量的机会（这样它就不会进入`infinite loop`，通过使用计数变量：-

```
int count = 3;

while (count > 0 && !scan.hasNextInt()) {
    System.out.println("Please enter an integer answer");
    System.out.println("You have " + (count - 1) + "more chances left.");
    count--;
    scan.next();
}

if (count > 0) {
    return scan.nextInt();
}

return -1; 
```

# java - Android手机与PC通信：手机找不到PC

> ID：13554716
> 
> 赞同：1
> 
> 时间：2012-11-25T19:39:57.623
> 
> 标签：java, android, tcp

我有一个简单的 Java 服务器在我的笔记本电脑上运行，它打开一个`ServerSocket`. 一个简单的 android 客户端尝试连接到该服务器（使用我的笔记本电脑的 IP 地址和我在 中指定的端口`ServerSocket`），并向其发送一个字符串。客户端挂起：

`client = new Socket(IP_ADDRESS, DEST_PORT);`

我正在使用连接到笔记本电脑的三星 Galaxy S3。请注意，我尝试在`AsyncTask`.

我一直在努力解决这个问题，感觉我错过了一些简单的东西。

所以问题是：如何让我的 android 手机识别/查看 PC？提前致谢！

这是我的 Java 服务器代码：

// 导入等

```
public class Main
{
    private static final int PORT = 4444;

    private static ServerSocket serverSocket;
    private static Socket clientSocket;
    private static InputStreamReader inputStreamReader;
    private static BufferedReader bufferedReader;
    private static String message;

    public static void main(String[] args)
    {
        try
        {
            serverSocket = new ServerSocket(PORT, 0, InetAddress.getLocalHost());

            System.out.println("IP:  " + serverSocket.getInetAddress() + "  Port:  " +  serverSocket.getLocalPort());

        } catch (IOException e)
        {
            System.out.println("Could not listen on port: 4444");
        }

        System.out.println("Server started. Listening to the port 4444");

        while (true)
        {
            try
            {
                clientSocket = serverSocket.accept(); // accept the client connection
                inputStreamReader = new InputStreamReader(clientSocket.getInputStream());
                bufferedReader = new BufferedReader(inputStreamReader); // get the client message
                message = bufferedReader.readLine();

                System.out.println(message);
                inputStreamReader.close();
                clientSocket.close();

            } catch (IOException ex)
            {
                System.out.println("Problem in message reading");
            }
        }
    }
} 
```

这是我的android客户端代码：

// 导入等

```
public class SimpleClientActivity extends Activity
{
    private EditText textField;
    private Button button;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        textField = (EditText) findViewById(R.id.editText1); // reference to the text field
        button = (Button) findViewById(R.id.button1); // reference to the send button

        // Button press event listener
        button.setOnClickListener(new View.OnClickListener()
        {

            public void onClick(View v)
            {
                new ConnectToServerTask().execute(textField);
            }
        });
    }
} 
```

这是我的 AsyncTask 代码：

// 导入等

```
public class ConnectToServerTask extends AsyncTask<View, Integer, Socket>
{
    private static final String IP_ADDRESS = "192.168.56.1";  // Toshiba laptop
    private static final int DEST_PORT = 4444;

    private EditText mTextField;

    /**
     * Store provided views (used later in onPostExecute(...)).
     * 
     * Create socket to communicate with server (blocking call).
     */
    protected Socket doInBackground(View... params)
    {
        // Store provided views.
        if (params.length != 1)
            throw new IllegalArgumentException();

        mTextField = (EditText) params[0];

        // Create socket.
        Socket client = null;

        try
        {
            client = new Socket(IP_ADDRESS, DEST_PORT); // connect to server
        } catch (UnknownHostException e)
        {
            e.printStackTrace();
        } catch (IOException e)
        {
            e.printStackTrace();
        }

        return client;
    }

    /**
     * Write to server.
     */
    protected void onPostExecute(Socket client)
    {
        try
        {
            PrintWriter printwriter;
            String messsage;

            messsage = mTextField.getText().toString(); // get the text message on the text field
            mTextField.setText(""); // Reset the text field to blank

            printwriter = new PrintWriter(client.getOutputStream(), true);
            printwriter.write(messsage); // write the message to output stream

            printwriter.flush();
            printwriter.close();

            client.close();
        } 
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:31:34.347

Thanks to @zapl, check the IP address of the PC. Had 192.168.56.1 when the correct address was 192.168.1.56.

# java - Google API 读取拉取队列 Java

> ID：13554717
> 
> 赞同：1
> 
> 时间：2012-11-25T19:40:04.470
> 
> 标签：java, google-app-engine, pull-queue

我正在尝试读取 Java 中的拉取队列（Google API）

这是代码：

```
static HttpTransport newTransport() {
        HttpTransport result = new NetHttpTransport();
        GoogleUtils.useMethodOverride(result);
        GoogleHeaders headers = new GoogleHeaders();
        headers.setApplicationName("Google-TaskQueueSample/1.0");
        result.defaultHeaders = headers;
        return result;
    } 
```

还有我的进口：

```
import com.google.api.client.googleapis.GoogleHeaders;
import com.google.api.client.googleapis.GoogleUtils;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.http.javanet.NetHttpTransport; 
```

我的代码中有 2 个错误：方法

> 使用方法覆盖

和

> 默认标题

不存在，我从这里的文档中获取了这段代码：[https ://developers.google.com/appengine/docs/java/taskqueue/overview-pull](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull)

# xml-parsing - 如何加载 XML 文件并使用 Haxe 解析它

> ID：13554725
> 
> 赞同：3
> 
> 时间：2012-11-25T19:41:10.380
> 
> 标签：xml-parsing, haxe, nme

我正在尝试创建一个桌面应用程序，它将加载 iTunes 播放列表 xml 文件并使用 Haxe 和框架 haxenme 解析它。

我认为我遇到的问题可能是文件名中的空格没有被正确转义，但我对此不是 100% 确定的。

这是我到目前为止的代码。

```
package com.mattwallace.appname.actions;

    import nme.Assets;
    import haxe.xml.Fast;

    class GetPlayListAction 
    {
        public function new():Void
        {
            super();
        }

        public function execute():Void
        {

            var xml:Xml = Xml.parse(getXMLDesktopString());
            trace(xml);
        }

        private function getXMLDesktopString():String
        {

            var xmlString:String = sys.io.File.getContent(
                nme.filesystem.File.userDirectory.url + 
                "/Music/iTunes/iTunes Music Library.xml");
            return xmlString;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:03:24.973

好吧，好像我一发帖就总能找到答案。问题是“File.userDirectory.url”我需要使用“File.userDirectory.nativePath”

这是为我解决问题的更新代码。

```
class GetPlayListAction
{
    public function new():Void
    {
    }

    public function execute():Void
    {

        var xml:Xml = Xml.parse(getXMLDesktopString());
        trace(xml);
    }

    private function getXMLDesktopString():String
    {
        var nativeUserDir:String = nme.filesystem.File.userDirectory.nativePath;
        var filePath:String = "/Music/iTunes/iTunes Music Library.xml";
        var fullPath = nativeUserDir + filePath;

        var xmlString:String = sys.io.File.getContent(fullPath);
        return xmlString;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T13:24:34.160

```
import haxe.Http;
import haxe.xml.Fast;

class XmlParsRead {

    function new() {

        //asynchronous call 
        var resource_url = new haxe.Http("http://localhost:96/SCO1.2/imsmanifest.xml");

        // onData event method will catch the response data if request is success 
         resource_url.onData = function(resource_url) { 

              var xml = Xml.parse(resource_url);
              // to see the xml file
              //trace(xml);
              // enter into xml file 1st element 
              var xmlReadFirstElement = new Fast(xml.firstElement());
              // see the element name 
              trace(xmlReadFirstElement.name);
              // I want to go resources tag "'node' is predefine attribute it reprasent node(tag<some>) in xml file "
              var resesNode = xmlReadFirstElement.node.resources;
              // name is predefined attribute to see the tag name
              trace(resesNode.name);
              // I want to go resource(it is sub of resources tag )
              var res = resesNode.node.resource;
              // to see the resource tag name
              trace(res.name);
              // I've to read href attribute in <resource>tag i.e -<resource identifier="SCO_RES" adlcp:scormtype="sco" href="some.htm" type="webcontent"> ..</resource>
              var res_href = res.att.href;
              trace(res_href);
              // next read the list of sub tags( <file>) resource tag using loop
              // RES(res) is point the resource tag and NODES(nodes) is predefine attributes we can use to iterate list of sub tags or sub nodes 
              for (subtaghref in res.nodes.file) {
                  //<file href="some.htm"/>
                  trace(subtaghref.att.href);
              }
         }
        // making the asynchronous request 
         resource_url.request(false);
    }

    public static function main() {

        new XmlParsRead();
    }
} 
```

# tcl - 为什么在 git 调用的 tcl 脚本中不能调用 mkdir？

> ID：13554726
> 
> 赞同：2
> 
> 时间：2012-11-25T19:41:14.313
> 
> 标签：tcl, git

我想`git`使用`tcl`. 编程语言的选择是考虑到易于学习（如我所想）和可用性（`git`附带`tcl`）。

我想使用`tcl`脚本创建文件夹。通常我`mkdir <name>`在脚本中调用并且它工作正常，但如果它`git`命令它说：`invalid command name "mkdir"`.

我是否遗漏了一些要添加到脚本中以使系统命令可供我使用的参考？

奇怪的是，它`exec sh`正在工作。但我不想`mkdir`换成`sh`……或者这是我的唯一方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:23:43.017

尝试使用[`file mkdir dir ?dir ...?`](http://www.tcl.tk/man/tcl8.5/TclCmd/file.htm#M22).

# types - 请求 `kniga' 中的成员 `title'，它是非类类型 `main()::BookList[((unsigned int)((int)k))]'

> ID：13554732
> 
> 赞同：1
> 
> 时间：2012-11-25T19:41:58.820
> 
> 标签：types, for-loop, request, member

```
#include<iostream>
#include<string.h>
using namespace std;

int main ()
{
int i,k=6;       
struct BookList
{
       string title;
       string author;
       string publisher;
       int year;
};   BookList kniga[k]; 
```

//------------------------------------

```
for(i=0;i<5;i++)
cout<<"Vavedete dannite za kniga "<<i<<endl;
cout<<"Zaglavie ";
getline(cin,kniga.title[i]);
cout<<"---------------------"<<endl;
cout<<"Avtor ";
getline(cin,kniga.author[i]);
cout<<"---------------------"<<endl;
cout<<"Izdatelstvo ";
getline(cin,kniga.publisher[i]);
cout<<"---------------------"<<endl;
cout<<"Godina ";
getline(cin,kniga.year[i]);
cout<<"---------------------"<<endl; 
```

//------------------------------------

```
for(i=0;i<5;i++)
cout<<"Spisak s vavedeni knigi "<<endl;
cout<<"------------------------"<<endl;
cout<<"Kniga "<<i<<endl;
cout<<"Zaglave "<<kniga.title[i]<<endl;
cout<<"Avtor "<<kniga.author[i]<<endl;
cout<<"Izdatelstvo "<<kniga.publisher[i]<<endl;
cout<<"Godina "<<kniga.year[i]<<endl;
cout<<"-------------------------"<<endl; 
```

//-------------------------------------- system("pause"); 返回0；首先很抱歉这个问题我知道它被问了很多次，但我需要你的帮助我做错了什么，找不到什么

# windows-phone-7 - 在 Windows phone 中进行搜索查询并将结果填充到列表框中

> ID：13554735
> 
> 赞同：1
> 
> 时间：2012-11-25T19:42:18.897
> 
> 标签：windows-phone-7, xml-parsing, html-parsing, html-agility-pack

我是 Windows Phone 编程的新手，我试图对例如 [http://www.flipkart.com/search/a/computers?query=ipad+3进行搜索查询](http://www.flipkart.com/search/a/computers?query=ipad+3)

我在 webclient 的帮助下使用 downloadStringAsync 函数来做到这一点。现在要从我的所有搜索中检索结果，我发现它必须是一个 XML 文档，但如何知道它的后代、子代、属性等，我无法弄清楚。

我尝试使用的方法是错误的，还是有其他方法可以在 Windows phone 中进行这种搜索查询？

一个例子将不胜感激。

我必须将数据填充回列表框。

嘿，我终于尝试了 htmlAgilityPack 似乎它一直工作到现在，但是我在搜索时得到了一个空引用。请帮忙解决这个问题。

```
 private void getPage()
    {
        var wc = new WebClient();
        wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
        wc.DownloadStringAsync(new Uri("http://www.flipkart.com/search-tablets?query=ipad+3"));

    }

    void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        HtmlAgilityPack.HtmlDocument html = new HtmlAgilityPack.HtmlDocument();
        html.OptionFixNestedTags = true;
        html.LoadHtml(e.Result);
        var doc = html.DocumentNode.Descendants("div").FirstOrDefault(x => x.Id == "line price-cont");
        String abc = doc.InnerText;

    }

 The html version do contain this kind of tag here is the copied part i want to fetch from the page

   <div>
        <div class="line price-cont ">
            <div class='fk-price line'><span class="price final-price">Rs. 32900</span></div>

        </div> 
```

我尝试搜索 span 标签也仍然返回 null。任何形式的帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:09:11.820

听起来您正在使用正确的方法。要解析 XML，我建议使用 Linq-to-XML。你会发现很多关于这个主题的教程，包括[这个专门针对 Windows Phone](http://eugene17.com/2012/01/07/linq-to-xml-on-windows-phone-7/)的教程。

试一试，如果你遇到困难，作为 Stack Overflow 中更具体的问题，包括你的代码。

# java - 带两个键的Java Map - 解决方案的速度比较

> ID：13554740
> 
> 赞同：4
> 
> 时间：2012-11-25T19:42:49.770
> 
> 标签：java, performance, map

在我的程序中，我想使用带有两个键（整数）的 Map。我的第一个想法是以某种方式将整数连接成一个字符串，例如：

```
String key = k1.toString()+"-"+k2.toString(); 
```

这个解决方案对我来说看起来不太好：1）丑陋；2）慢（将数字作为文本处理）。

我在 stackoverflow 上发现了其他方法。它们基于将整数封装在一个类中——一个目的类（MyKey），或更通用的一个（Pair）。

我尝试进行一些速度测试，我的虚拟解决方案似乎是最快的。第一次拍摄后，我尝试将转换整数字符串封装在一个新类（MyString）中，并针对该解决方案运行测试。

地图定义是：

```
Map<Pair<Integer,Integer>,String> map1 = new HashMap<>();
Map<MyKey,String> map2 = new HashMap<>();
Map<String,String> map3 = new HashMap<>();
Map<MyString,String> map4 = new HashMap<>(); 
```

测试结果是（运行多次，似乎稳定）：

```
 map: put+get=total
  1: 52+154=206
  2: 29+77=106
  3: 23+49=72
  3: 17+55=72 
```

带字符串的解决方案更快。字符串键的直接连接在搜索时更快，在输入时更慢。

我的问题是：

1) 为什么使用 String 的解决方案更快？（一次调用 hashCode()？）

2) 有什么理由不应该使用 String 的解决方案吗？

* * *

附加信息：

地图中的记录数约为 6000 条。

测试还试图获取许多不存在的键的值。它会改变测试结果吗？

在我的程序中，我生成 boolean[N] 的排列，其中 M 值为真。一次，我得到某个 N,M 的结果；我想保存它们以备不时之需。

这是我的示例中使用的类的完整代码：

```
 class Pair<L,R> {

    private final L left;
    private final R right;

    public Pair(L left, R right) {
      this.left = left;
      this.right = right;
    }

    public L getLeft() { return left; }
    public R getRight() { return right; }

    @Override
    public int hashCode() { return left.hashCode() ^ right.hashCode(); }

    @Override
    public boolean equals(Object o) {
      if (o == null) return false;
      if (!(o instanceof Pair)) return false;
      Pair pairo = (Pair) o;
      return this.left.equals(pairo.getLeft()) &&
             this.right.equals(pairo.getRight());
    }
  }

  class MyKey {
      public Integer k1;
      public Integer k2;

      public MyKey(Integer k1, Integer k2) {
          this.k1 = k1;
          this.k2 = k2;
      }

      @Override
      public int hashCode() {
          return k1.hashCode() + 17 * k2.hashCode();
      }

      @Override
      public boolean equals(Object o) {
          if (o == this) {
              return true;
          }
          if (o == null || !(o instanceof MyKey)) {
              return false;
          }
          MyKey cp = MyKey.class.cast(o);
          return k1.equals(cp.k1) && k2.equals(cp.k2);
      }
  }

  class MyString  {
      private String value;

      public MyString(Integer k1, Integer k2) {
          value=k1+"-"+k2;
      }

      @Override
      public int hashCode() {
          return value.hashCode();
      }

      @Override
      public boolean equals(Object o) {
          return o.equals(value);
      }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:16:29.263

这应该是性能最高的双整数键：

```
class MyKey {
  public final int k1, k2;
  MyKey(int k1, int k2) { this.k1 = k1; this.k2 = k2; }
  public int hashCode() { return k1 ^ k2; }
  public boolean equals(Object o) { 
    MyKey that;
    return o instanceof MyKey && (that = (MyKey)o).k1 == k1 && that.k2 == k2;
  } 
```

至于您的测试结果，您应该非常小心地进行微基准测试。你确定你做了所有的咒语，比如热身、GC-ing、仔细编写 JIT 无法编译出来的代码等吗？如果没有，我强烈推荐 Google Caliper，而不是重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T21:00:34.647

您遇到的最大问题是构建字符串，或者创建对象只是为了执行查找。

解决此问题的一种方法是使用 Map 或 Map 值。由于您的密钥是原语，因此您最好使用 trove 库。[TObjectIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TObjectIntHashMap.html)和[TIntIntHashMap](http://trove4j.sourceforge.net/javadocs/gnu/trove/map/hash/TIntIntHashMap.html)

例如

```
TObjectIntHashMap<TIntIntHashMap> map = ...
int val = map.get(k1).get(k2); 
```

使用这种方法，不需要任何对象来创建键或值。

如果要配对密钥，可以使用以下命令

```
TLongIntHashMap map = ...
int val = map.get(((long) k1 << 32) | k2); 
```

例如

```
long key = ((long) k1 << 32) | k2;
map.adjustOrPut(key, 1, 1); // a counter for this key. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:18:44.410

> 2) 有什么理由不应该使用 String 的解决方案吗？

如果您询问给定的方法：

```
String key = k1.toString()+"-"+k2.toString(); 
```

问题是：

```
k1 = "a-b"
k2 = "c" 
```

和

```
k1 = "a"
k2 = "b-c" 
```

（和类似的）

有相同的键。

如果您询问使用课程：

有一个处理这个的类更干净。因为那时你的班级关心的是实现，而不是调用者。这意味着，您不必考虑是使用“-”还是“。” 或“#”或任何现在正确的东西，如果你想改变它，你可以在课堂上改变它。不在源代码周围散布的不同位置。

哈希码实现的正确方法取决于您的数据。Eclipse 建议一个通用的方法：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((k1 == null) ? 0 : k1.hashCode());
    result = prime * result + ((k2 == null) ? 0 : k2.hashCode());
    return result;
} 
```

这对我来说看起来不错。

问题 1 稍微复杂一些。它在很大程度上取决于输入数据。

一般建议：不要关心性能，只要你不必关心它。这意味着，只有当解决方案太慢时，才开始对其进行分析并改进最重要的部分。除此之外，可读性和可维护性始终是首要目标。

# jquery - jquery移动输入文本字段帮助文本或弹出

> ID：13554745
> 
> 赞同：0
> 
> 时间：2012-11-25T19:43:12.750
> 
> 标签：jquery, jquery-mobile, jqueryform

Jquery Mobile 中的表单输入元素是否支持“帮助文本”或弹出链接？

这一定是一个常见问题，我想知道是否已经有开箱即用的支持。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:16:26.480

目前没有，考虑到，JQM 是为移动平台构建的，经典的弹出窗口和帮助文本不能在手机上使用（没有鼠标悬停或此类事件）。

只有类似的功能是对话框：

```
<a href="dialog.html" data-role="button" data-inline="true" data-rel="dialog" data-transition="pop">Open dialog</a> 
```

这个例子取自[这里](http://brooky.cc/2011/04/23/jquery-mobile-cheat-sheet/)。不幸的是，它可以用作标准帮助文本/弹出窗口。

另一方面，JQM 与 jQuery UI 插件兼容，因此您可以随时使用其中的一些插件，看看[这里](http://www.1stwebdesigner.com/css/stylish-jquery-tooltip-plugins-webdesign/)。

如果您正在构建移动应用程序，请使用带有[点击](http://jquerymobile.com/test/docs/api/events.html)事件的两个选项，在经典桌面 Web 应用程序的情况下，您仍然可以使用鼠标事件，在这种情况下使用第二个选项并为自己选择一个弹出插件。

# c - 确定两个整数之间的字典距离

> ID：13554747
> 
> 赞同：2
> 
> 时间：2012-11-25T19:43:38.073
> 
> 标签：c, algorithm, math

假设我们有字典上的整数`3,5,6,9,10,12 or 0011,0101,0110,1001,1010,1100`，每个整数都设置了两个位。

`3`我想要的是找到说和`5`使用尽可能少的操作之间的距离（它们之间有多少词典排列，而不进行实际排列） 。

距离表如下

```
3->5  = 1 or 0011->0101 = 0001
3->6  = 2 or 0011->0110 = 0010
3->9  = 3 or 0011->1001 = 0011
3->10 = 4 or 0011->1010 = 0100
3->12 = 5 or 0011->1100 = 0101 
```

所以函数 f(3,5) 将返回 1；

该函数将始终采用相同的汉明权重（相同数量的设置位）的参数。

不应使用数组。

任何想法都会很棒。

编辑

忘了提一下，对于任何设置的位大小（汉明权重），我将始终使用第一个字典排列（`base`）作为第一个参数。

例如

```
hamming weight 1 base = 1
hamming weight 2 base = 3
hamming weight 3 base = 7
... 
```

编辑 2

该解决方案应该适用于任何汉明重量，抱歉我不够具体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T21:07:18.480

有一个数字
x = 2 ^(k [1]) +2 ^(k [2]) +...+2 ^(k [m])
其中 k [1] <k [2] <...<k [m]
可以声称数字 x 在所有数字的字典顺序序列中的位置相同的汉明权重是
lex_order(x) = C(k [1] ,1)+C(k [2] ,2)+...+C(k [m] ,m)
其中 C(n,m) = n!/m! /（纳米）！或 0 如果 m>n

例子：

3 = 2 ⁰ + 2 ¹
lex_order(3) = C(0,1)+C(1,2) = 0+0 = 0

5 = 2 ⁰ + 2 ²
lex_order(5) = C(0,1)+C(2,2) = 0+1 = 1

6 = 2 ¹ + 2 ²
lex_order(6) = C(1,1)+C(2,2) = 1+1 = 2

9 = 2 ⁰ + 2 ³
lex_order(9) = C(0,1)+C(3,2) = 0+3 = 3

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T20:00:28.843

如果`a`和`b`是两个设置位的位置，零是最不重要的位置，并且`a`总是大于`b`，那么您可以计算：

```
n = a*(a-1)/2 + b 
```

并且两个值之间的距离是两个值之间的差`n`。

例子：

```
3->12:
  3:  a1=1, b1=0, n1=0
  12: a2=3, b2=2, n2=5
  answer: n2-n1 = 5 
```

要将其扩展到其他汉明权重，您可以使用以下公式：

```
n = sum{i=1..m}(factorial(position[i])/(factorial(i)*factorial(position[i]-i))) 
```

其中`m`是汉明权重，position[i] 是第`i`' 个设置位的位置，从最低有效位开始计数，最低有效设置位的位置为`position[1]`.

# java - 如何更改 Eclipse 设置（对于 Java）以在方法/类声明后将括号放在行上？

> ID：13554754
> 
> 赞同：5
> 
> 时间：2012-11-25T19:44:56.870
> 
> 标签：java, eclipse, coding-style

> **可能重复：**
> [Eclipse 和花括号](https://stackoverflow.com/questions/1236531/eclipse-and-curly-braces)

所以基本上是这样的：

```
public void foo 
{
    doStuff();
} 
```

而不是默认值，即：

```
public void foo {
    doStuff();
} 
```

只是个人喜好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-25T19:49:39.800

转到 windows -> 首选项 -> java -> 代码样式 -> 格式化程序

按编辑并转到大括号选项卡

为每个选择您想要的大括号样式。

*   请注意，如果您没有任何非内置活动配置文件，则必须创建一个

希望帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T20:07:40.347

下次当您忘记它在哪里时，只需在窗口>首选项中键入“格式化程序”。它会快速而流畅地过滤掉它。

# ruby - Espresso 框架 - 一致的跨控制器渲染？

> ID：13554755
> 
> 赞同：2
> 
> 时间：2012-11-25T19:44:59.923
> 
> 标签：ruby

我有一个基本的 CMS，我在其中大量使用了跨控制器渲染。

```
class Index < E
  map '/'

  # some actions

  def ad
    @steroids = render_p('anabolic-steroids/ads/left-banner')
    # some logic
  end
end 
```

`Steroids`班级：

```
class Steroids < E
  map 'anabolic-steroids'

  # actions
end 
```

查看文件夹：

```
view/
  |
  - anabolic-steroids/
      |
      - ads/
          |
          - left-banner.erb
  # other templates 
```

一切正常，但现在客户希望`anabolic-steroids`将 URL 重命名为`steroids`

为了完成这项工作，我重新映射了`Steroids`课程：

```
map :steroids 
```

并将`view/anabolic-steroids/`文件夹重命名为`view/steroids/`.

`Steroids`控制器适用于新 URL 。

但是现在所有其他渲染类固醇广告的控制器都坏了:(

我必须找到所有使用它的地方并重命名

```
render_p('anabolic-steroids/ads/left-banner') 
```

到

```
render_p('steroids/ads/left-banner') 
```

奇怪的！

我还有其他很多地方我正在使用这样的跨控制器渲染。

当这种无辜的重命名请求来自客户时，有什么方法可以避免无用的重构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:05:22.150

对一个微不足道的问题进行了相当长的描述:)（开玩笑，抱歉，不过是个好问题）

解决方案很简单，真的很简单——**永远不要在可以使用其他东西的地方使用字符串......**

似乎您在文档中错过了这一点- **“要呈现内部控制器的模板，请将控制器作为第一个参数传递，将模板作为第二个参数传递。”**

在此处查看[官方文档](http://e.github.com/ViewAPI.html#rendering-templates)

因此，为了解决任何重命名问题，请使用这样的跨控制器渲染：

```
render_p(Steroids, 'ads/left-banner') 
```

现在你不应该担心“无辜的重命名请求”:)

# ruby-on-rails - 如何用 ActiveRecord 建模？

> ID：13554756
> 
> 赞同：1
> 
> 时间：2012-11-25T19:45:09.380
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个表`Users`，其中有一列名为`'r_status'`type `string`。它基本上是该用户的关系状态。

我还有另一个表请求，它需要具有一组首选属性，例如 ['Single'、'Married'、'Divorced']。稍后我将需要根据首选属性数组中的内容查询用户。

我想知道我建模这个的最佳方法是什么？我知道我可以在“文本”类型字段中存储一个串行数组，但这不会让我直接查询，而是我首先必须查询请求，然后反序列化数组，然后再次查询..

有没有更好的办法？

我考虑过创建一个名为“RelationshipStatus”的新表，但该表只会在列上，即字符串“status”。为了能够直接查询而只创建一个只有 1 列的表是否值得？

谢谢

# java - 当存储在超类类型变量中时，为什么要保留子类的私有变量？

> ID：13554757
> 
> 赞同：0
> 
> 时间：2012-11-25T19:45:10.753
> 
> 标签：java, inheritance, subclass, superclass

我一定错过了一些基本的继承，因为它对我来说没有意义。

鉴于这两个类：

```
class Person
{
   private String name;
}

class Student extends Person
{
   private String degree;
} 
```

为什么可以创建一个新`Student`对象，将其存储在`Person`类型变量中，并且仍然能够保留该变量`String degree`并可以访问它？

```
Person p = new Student("John", "Master's"); 
```

我认为可以使用上述初始化，因为`p`除了 之外没有任何变量`name`，因为`Person`变量不能包含`degree`变量，所以它是合法的 - 但是当你这样做时`degree`，`p`.

这就是我认为的原因是相反的事实是非法的
（`Student s = new Person("John");`） - 因为那样`s`不会`degree`初始化它的另一个变量（）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T19:48:32.917

具有对超类型的引用类型的变量可以保存对子类型实例的引用。将子类型实例分配给变量不会*以*任何方式改变实例；它只是扩大了参考的类型。所有实例数据仍然存在，并且可以通过向下转换来检索。那是，

```
Student s = new Student("John", "Master's");
Person p = s; // no cast needed for a widening conversion 
```

与以下内容完全相同：

```
Person p = new Student("John", "Master's");
Student s = (Student) p; // cast required for a narrowing conversion 
```

**编辑**也许这将有助于澄清事情。假设有第二个子类`Person`：

```
class Teacher extends Person
{
    private String department;
} 
```

现在你可以这样做：

```
Person p = new Teacher("Fred", "Physics");
Teacher t = (Teacher) p; 
```

但是，如果您后来尝试这样做：

```
p = new Teacher("Fred", "Physics");
Student s = (Student) p; // Error! 
```

你会得到 a[`ClassCastException`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html)因为在程序中，`p`现在是对`Teacher`不是 a 的对象（的实例）的引用`Student`。

这是一个类比。用英语，你可能会说，“我有一只宠物”。这并没有说明动物的类型。（例如，您无法知道宠物是否吠叫。）另一方面，如果您说“我有一只宠物狗”，那么询问它是否对陌生人吠叫是有意义的。关键点是：*称你的宠物为动物并不会改变它是（或不是）狗的事实*。Java 引用的情况完全相同——使用更通用的（例如，基类）引用类型来存储对象引用不会改变对象本身的性质。你失去了对物体细节的*了解*，但那些细节仍然存在。

重复我在评论中提出的观点：您永远不会将对象分配给 Java 中的变量；您只分配对对象的*引用。*或者，换句话说，你的变量都不是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T17:56:01.080

变量不*包含*对象。变量持有*引用*，它*标识*对象。如果一个人有一个汽车识别号码列表（美国的 VIN），这个列表本身可能包含许多不同类型的汽车的号码；从列表的角度来看，每个数字都可以识别车辆，但一个数字可能会识别 FordFocus、另一个 Toyota Prius、另一个 ChevroletSebringConvertible 等。如果将 ChevroletSebringConvertible 的数字写在列表上，则该列表将没有认为它是敞篷车，因此如果没有首先确定由第五个 VIN 识别的汽车具有敞篷车顶，就不能说“举起列表中第五辆汽车的顶篷”。当汽车被确定为敞篷车时，顶篷就不会出现。顶部及其状态（升高或降低）将继续存在，无论谁知道它们。

# iis - 从 IIS 上的服务堆栈提供 swf 文件时出现 403 错误

> ID：13554759
> 
> 赞同：4
> 
> 时间：2012-11-25T19:45:14.207
> 
> 标签：iis, flash, servicestack, http-status-code-403

我正在尝试从使用服务堆栈的 Web 应用程序提供 swf 文件。请求 swf 文件时，我收到 403 响应（见下文）。从这个应用程序提供任何其他静态文件（html、css、js、xap、jpg、png 等），我没有遇到这个问题

在 Visual Studio 中进行调试以及将站点部署到 IIS 时会发生相同的行为。

有没有其他人遇到过类似的问题？

这是来自服务器的响应：

```
Forbidden

Request.HttpMethod: GET
Request.PathInfo: 
Request.QueryString: 
Request.RawUrl: /swf/plupload/plupload.flash.swf
App.IsIntegratedPipeline: False
App.WebHostPhysicalPath: C:\Users\me\Documents\GitHub\Project\src\Project.Host.Web
App.WebHostRootFileNames: [project.host.web.csproj,project.host.web.csproj.user,apphost.cs,customusersession.cs,default.html,global.asax,global.asax.cs,packages.config,plupload.flash.swf,web.config,web.debug.config,web.release.config,app_data,bin,css,img,js,logs,obj,properties,swf,xap]
App.DefaultRootFileName: default.html 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:10:27.483

ServiceStack 包含一个白名单，因此默认情况下仅提供具有众所周知的扩展名的文件。您可以通过将**.swf**添加到 AppHost.Configure() 中来将其添加到白名单中：

```
SetConfig(new EndpointHostConfig {
    AllowFileExtensions = { {"swf"} },
}); 
```

# html - 用css居中div

> ID：13554760
> 
> 赞同：0
> 
> 时间：2012-11-25T19:45:16.023
> 
> 标签：html, css, alignment

这是我的 css 文件中的片段

```
#centered{
    position: relative;
    text-align: center;
    width: 50%;
    margin-left: auto;
    margin-right: auto;
    }
#table{
    text-align: center;
    font-size: 1.5em;
    font-weight: 900;
    background-color: #5E9DC8;
} 
```

这是我尝试使用的 html 部分：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>

<head>
    <title>Bicycle Store Database</title>
    <link rel="stylesheet" type="text/css" href="web.css" />
</head>
<body>

    <h1>ACME BICYCLE SHOP</h1>
    <h2>GET IN GEAR!</h2>

    <div id="centered">
    <table id="table" border="0" cellpadding="10"> 
        <tr>
            <td><a href="search_inv.php" class="navTest">Go Shopping!</a><br/><br/>
            <a href="search_service.html" class="navTest">Check a Service Ticket</a></td>
        </tr>
    </table>
    </div>

    <p><br/><a href="index.html">HOME</a></p>
</body>
</html> 
```

这是结果：

![div 不居中](../Images/197af2ea7b8b4136b032f30d588f3768.png)

我读过的所有内容都表明我已经正确地做到了这一点，但它在我所有的浏览器中都偏离了中心。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:48:23.977

你为什么要使用表呢？有什么具体原因吗？你不能像这样简单地做吗？

```
<div class="center">
  <a href="#">Go Shopping</a>
  <br>
  <a href="#"></a>
</div>

.center {
   margin: auto;
   /* Other styles goes here, width height background etc */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:53:05.273

您正在居中`#centered`，但不是其中的表格。添加`margin:0 auto;`到`#table`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T19:50:27.870

div 在页面中居中。

表格在 div 中左对齐。

添加`table { margin-left: auto; margin-right: auto; }`以使表格在 div 中居中。

# android - Android 4.2 定位服务问题

> ID：13554763
> 
> 赞同：3
> 
> 时间：2012-11-25T19:45:55.867
> 
> 标签：android, geolocation, android-4.2-jelly-bean

当我在 Android 4.2 OS 手机上运行我的应用程序时，我似乎无法获得从 getLAstKnownLocation 返回的任何值（始终为 null） 奇怪的是 Mapview 工作正常，它显示了我当前的位置！

任何想法如何解决这个问题？

这是我的代码

在 onCreate 中：

```
mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
Criteria criteria = new Criteria();
provider = mlocManager.getBestProvider(criteria, false);
mlocManager.requestLocationUpdates(provider, 0, 0, geoHandler); 
```

然后是听众：

```
public class GeoUpdateHandler implements LocationListener {
    public void onLocationChanged(Location location) {
        // called when the listener is notified with a location update from the GPS
        int lat = (int) (location.getLatitude() * 1E6);
        int lng = (int) (location.getLongitude() * 1E6);
        new GeoPoint(lat, lng);

        Log.d(this.getClass().getSimpleName(), "onLocationChanged " + lat);
        //          mlocManager.removeUpdates(this);
    }

    public void onProviderDisabled(String provider) {
        // called when the GPS provider is turned off (user turning off the GPS on the phone)
        Log.d(TAG, "DISABLED");
    }

    public void onProviderEnabled(String provider) {
        // called when the GPS provider is turned on (user turning on the GPS on the phone)
        Log.d(TAG, "ENABLED");
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // called when the status of the GPS provider changes
        Log.d(TAG, "CHANGED");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:08:12.300

当提供程序被禁用时，getLastKnownLocation 将返回 null。或者当没有 LastKnownLocation 时。

在线上：`provider = mlocManager.getBestProvider(criteria, false);`

您的提供者要求 BestProvider 包括禁用的提供者。尝试在语句末尾使用 true ，看看是否有效。

[http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String)](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)

# batch-file - xcopy 包含文件夹

> ID：13554764
> 
> 赞同：3
> 
> 时间：2012-11-25T19:45:56.320
> 
> 标签：batch-file

这应该是一个简单的问题，但我一直无法找到答案。我想将文件夹（不仅仅是内容）复制到桌面。我尝试过的所有内容都只包含文件夹的内容。我已经尝试了下面的内容，但内容仍然只是复制。

```
xcopy C:\Users\user\Folder C:\Users\user\Desktop /E 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T21:10:18.733

```
xcopy C:\Users\user\Folder C:\Users\user\Desktop\Folder /E /I 
```

那这个呢？

# css - 在 Windows 8 javascript 应用程序中添加字体 (@font-face)

> ID：13554771
> 
> 赞同：2
> 
> 时间：2012-11-25T19:46:19.373
> 
> 标签：css, windows-8

在 Windows 8 java 脚本应用程序上工作，我添加了新字体，如下所示：

```
 @font-face{
  font-family: "myalpha";
  src: url("/fonts/myAlpha.ttf") format('truetype');
  } 
```

这产生了一个错误：

```
@font-face failed OpenType embedding permission check. Permission must be Installable. 
```

这是什么意思？不支持 truetype 字体吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:51:20.953

您需要将 True Type 字体的嵌入级别更改为`installable embedding allowed`. 您可以使用此[工具](http://carnage-melon.tom7.org/embed/)，但请确保字体许可证允许嵌入。

# ios - 核心数据和累积的轻量级迁移

> ID：13554772
> 
> 赞同：0
> 
> 时间：2012-11-25T19:46:43.993
> 
> 标签：ios, core-data, core-data-migration

我已经使用轻量级迁移成功地为我的应用程序即将发布的 1.1 版本对我的核心数据模型进行了版本控制。我对这种方法的可维护性有疑问。

如果我再次在我的应用程序的 v1.2 中对模型进行版本化，并且用户从 v1.0 更新到 1.2，这两个迁移是否会依次成功应用？也就是说，如果我保留模型的版本，迁移是否会累积？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:08:09.630

如果两个迁移都是轻量级的，那么就不需要依次应用这两个迁移。由于[轻量级迁移可能发生在](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html)：

*   简单添加新属性
*   移除一个属性
*   非可选属性变为可选
*   可选属性变为非可选属性，并定义默认值
*   重命名实体或属性

在最后一种情况下，您提供商店中使用的名称（“规范名称”）。这是默认情况下的属性名称，因此它最终是在数据模型的第一个版本中调用的任何属性。然后，只要不使用规范名称，您就可以任意更改属性名称。

所以最终的结果是，Core Data 无法计算出如何从版本 1 迁移到版本 2 以及从版本 2 迁移到版本 3，但不能直接从版本 1 迁移到版本 3 的事件序列。

相反，如果您通过映射模型指定手动映射，那么您要么必须编写代码以累积应用所有手动映射，要么随着数据模型的发展提供 O(n^2) 映射。

# iphone - iOS6 中的旋转

> ID：13554776
> 
> 赞同：0
> 
> 时间：2012-11-25T19:47:16.523
> 
> 标签：iphone, xcode, ios6, autorotate

关于 iOS6 中更改的轮换，有很多问题和答案。但是我真的没有解决一个问题。使用 Xcode 4.5.2。如果我没有在 info.plist 中或通过“支持的界面方向”按钮设置任何内容，则应用程序将根据设备旋转在纵向和横向之间旋转。现在我的意思是由如何握住设备引起的旋转，而不是打开 ViewController 时的默认方向。

我知道如何防止横向模式

```
- (BOOL)shouldAutorotate
{

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait);
} 
```

但它没有任何效果。是的，如果我从 NavBar 添加一个 FlipsideController，它就会生效。在 FlipsideView 中，上面的代码阻止了旋转。

在其他 ViewController 中，无论我编写什么代码，它都没有任何效果。

以 Apple 提供的样本 UICatalog 为例。任何人都可以给我一个提示，如何控制整个表格的旋转以及使用代码而不是通过 Buttons 或 info.plist 来控制单独的 ViewController 的旋转，这只能为所有内容提供结果，这对所有视图都不是很实用。

# ruby - 如何在 ruby 中的字符串中包含条件

> ID：13554780
> 
> 赞同：10
> 
> 时间：2012-11-25T19:47:43.153
> 
> 标签：ruby, string

我想在字符串中放置一个变量，但也对变量有一个条件

就像是：

```
x = "best"

"This is the #{if !y.nil? y else x} question" 
```

我可以在字符串之外做`y||x`。我在字符串中做什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-25T19:49:36.773

```
"This is the #{y.nil? ? x : y} question" 
```

或者

```
"This is the #{y ? y : x} question" 
```

或者

```
"This is the #{y || x} question" 
```

你可以`y||x`像在它外面一样使用内部插值

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T19:50:14.410

你绝对可以在一个字符串中做同样的事情

```
y = nil
x = "best"

s = "This is the #{y || x} question"
s # => "This is the best question" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T19:51:34.773

使用三元运算符：

`"This is the #{!y.nil? ? y : x} question"`

# android - Android 布局未显示

> ID：13554781
> 
> 赞同：1
> 
> 时间：2012-11-25T19:48:03.293
> 
> 标签：android, layout, oncreate

当我的测验应用程序第一次启动时，它需要将问题添加到数据库和其他一些东西，这需要几秒钟。我想在发生这种情况时显示一个不确定的进度条。添加问题后，该类调用 finish() 并转到主屏幕。问题是除非未调用完成，否则不会绘制布局。我假设在调用 oncreate 和 onstart 之前它不会绘制 XML 布局。那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:49:59.690

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，在其中显示进度对话框并在准备您的数据库中`onPreExecute`关闭。`onPostExecute``doInBackground`

除非您使用 DialogFragment 来显示对话框，否则您必须处理设备旋转。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:02:24.070

填充数据库时未显示 UI 的原因可能是您在 UI-Thread（应用程序的主线程）中执行此操作。由于线程忙于填充您的数据库，因此没有时间显示 UI、动画进度指示器或对用户操作做出反应。

因此，您应该始终在单独的线程中运行耗时的任务。请参阅 android 开发者博客中有关**无痛线程**的优秀条目以获取更多信息并正确执行此操作：

*   [http://android-developers.blogspot.co.at/2009/05/painless-threading.html](http://android-developers.blogspot.co.at/2009/05/painless-threading.html)

# c# - 使用 SYSTEMTIME 在 24 模式下更改日期和时间

> ID：13554783
> 
> 赞同：2
> 
> 时间：2012-11-25T19:48:16.817
> 
> 标签：c#, windows, sysdatetime

我使用 SYSTEMTIME 结构来更改我的系统日期时间，如下所示：

```
 [DllImport("kernel32.dll")]
 public extern static uint SetSystemTime(ref SYSTEMTIME lpSystemTime);

 private void button1_Click(object sender, EventArgs e)
 {
     SYSTEMTIME st = new SYSTEMTIME();
     st.wYear = 2009;
     st.wMonth = 1;
     st.wDay = 1;
     st.wHour = 23;
     st.wMinute = 1;
     st.wSecond = 1;
     SetSystemTime(ref st);
 } 
```

日期已更改，但时间不受影响 我想在 24 模式下更改我的系统日期和时间。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:56:06.163

我无法重现这个。使用下面一个非常简单的控制台应用程序，我可以*让它*什么都不做（正常运行，没有提升的权限）*，或者*我可以同时更改日期和时间（以管理员身份运行它）。它从未改变只是日期。但是，这是在启用了 UAC 的 Windows 7 上。也许您正在运行不同的版本，或者使用不同的访问控制？我强烈怀疑这是一个访问控制问题。

```
using System;
using System.Runtime.InteropServices;

[StructLayout(LayoutKind.Sequential)]
struct SYSTEMTIME
{
    [MarshalAs(UnmanagedType.U2)] public short Year;
    [MarshalAs(UnmanagedType.U2)] public short Month;
    [MarshalAs(UnmanagedType.U2)] public short DayOfWeek;
    [MarshalAs(UnmanagedType.U2)] public short Day;
    [MarshalAs(UnmanagedType.U2)] public short Hour;
    [MarshalAs(UnmanagedType.U2)] public short Minute;
    [MarshalAs(UnmanagedType.U2)] public short Second;
    [MarshalAs(UnmanagedType.U2)] public short Milliseconds;
}

class Test
{
    [DllImport("kernel32.dll")]
    public extern static uint SetSystemTime(ref SYSTEMTIME lpSystemTime);

    static void Main()
    {
        SYSTEMTIME st = new SYSTEMTIME();
        st.Year = 2009;
        st.Month = 1;
        st.Day = 1;
        st.Hour = 23;
        st.Minute = 1;
        st.Second = 1;
        SetSystemTime(ref st);
   } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:55:56.383

[SYSTEMTIME](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)应如下所示：

```
typedef struct _SYSTEMTIME {
  WORD wYear;
  WORD wMonth;
  WORD wDayOfWeek;
  WORD wDay;
  WORD wHour;
  WORD wMinute;
  WORD wSecond;
  WORD wMilliseconds;
} SYSTEMTIME, *PSYSTEMTIME; 
```

[SetSystemTime()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724942%28v=vs.85%29.aspx)应该在成功时返回 true。

时间设置为 24 小时制。

**w年：1601-30827**

**w月：1-12**

**wDayOfWeek：0-6**

**wDay: 1-31**

**小时：0-23**

**w分钟：0-59**

**w秒：0-59**

**w毫秒：0-999**

# vb6 - 如何实现线程视图？

> ID：13554784
> 
> 赞同：2
> 
> 时间：2012-11-25T19:48:18.733
> 
> 标签：vb6

我需要在旧的 VB6 应用程序中实现各种线程视图。它应该类似于：

![在此处输入图像描述](../Images/91c2c307c0edb4cdd5a2f10cdf88cb3c.png)

所以，它有点像 TreeView，但右侧（每一行）都有可以按下的按钮。视图不需要折叠 - 它始终处于展开模式。用户应该能够响应每个节点（通过最右侧的评论按钮）。当然，用户应该能够滚动浏览条目。

我可以通过哪些方式实现这一点？我对 3rd 方控制持开放态度，无论是否付费。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:07:24.780

VSFlexGrid 有一个大纲模式。您可以通过 RowOutlineLevel 属性设置每行的缩进。它在其单元格/列中支持自动换行、图像等，因此您应该能够非常接近您想要的。它还支持所有者绘制，可让您完全自定义单元格绘制（例如，获得那些圆角）。

我敢肯定还有其他控件...

# c# - 如何在 TreeView 中替换 TreeNode？

> ID：13554789
> 
> 赞同：3
> 
> 时间：2012-11-25T19:48:52.170
> 
> 标签：c#, .net, winforms

我是这样做的：

```
myTreeView.Nodes[foo] = newTreeNode.Clone(); // this doesn't work 
```

我想知道，如何正确地做到这一点？

编辑：我正在考虑删除旧的并插入新的树节点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:07:11.687

尝试这个：

```
TreeNode node = myTreeView.Nodes[foo];
int index = myTreeView.Nodes.IndexOf(node);
myTreeView.Nodes.RemoveAt(index);
myTreeView.Nodes.Insert(index, newTreeNode); 
```

# coldfusion - IIS7.5 / WIN7 上的 CF10 开发人员 - CFM 文件运行正常 - 但看不到 .GIF

> ID：13554790
> 
> 赞同：2
> 
> 时间：2012-11-25T19:48:58.410
> 
> 标签：coldfusion, iis-7.5, coldfusion-10

任何人都可以帮助解决这个奇怪的问题。

我刚刚在使用 IIS7.5 的 Win7 上安装了 CF10 开发人员。

安装很顺利，可以浏览 .cfm 文件没有问题，连接到数据源也没有问题.. 但是：即使我可以浏览我所有的本地 cf 站点，这些站点都不会显示外部 .CSS 文件的图像或样式。

因此，我从数据库中获取了站点、内容以及 cfm 文件的所有功能都可以解析，但没有样式和图像。

如果我直接浏览（在浏览器中粘贴文件路径）到其中一个图像，我会收到 404 错误 - 找不到文件 - 即使 .gif 文件确实存在于目录中。

因此，基本上，我可以运行 CFM 文件，并浏览以冷融合构建的本地站点，但浏览器/IIS 不会“找到”任何图像或外部引用的 css 文件。

任何人都可以帮忙吗？如果有人可以提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:09:56.473

听起来这些 mimetype 存在问题，请参阅以下内容以获取有关将静态内容角色安装到 IIS 并启用这些 mimetype 的信息。

[IIS 7 中没有 Mime 类型选项](https://stackoverflow.com/questions/6374419/no-mime-types-option-in-iis-7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T12:50:13.523

请务必在 IIS 7 中启用静态内容。

最近两次出现这个问题。

看这里：

[http://weblogs.asp.net/anasghanem/archive/2008/05/23/don-t-forget-to-check-quot-static-content-service-quot-in-iis7-installation.aspx](http://weblogs.asp.net/anasghanem/archive/2008/05/23/don-t-forget-to-check-quot-static-content-service-quot-in-iis7-installation.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T21:01:28.817

尝试重新启动 IIS 服务器。关闭所有浏览器并重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T19:21:31.910

您需要确定是 CF 问题还是 IIS 问题。尝试以下操作：

*   检查这是否是图像未提供与图像路径损坏的问题。可能有 CFML 代码正在创建指向无效位置的链接。
*   如果这些位置是有效的，那么这将是 IIS 而不是服务器图像文件的问题。
*   还要检查 JPEG 和 PNG 文件是否存在类似问题。如果出现 JPEG 和 PNG，则表明存在 IIS 问题。
*   还可以尝试创建一个包含图像的简单 HTML 页面。如果上面有图像，则表明存在 CF 问题

# jquery - 单击按钮后，使文本区域内的文本成为变量

> ID：13554794
> 
> 赞同：-1
> 
> 时间：2012-11-25T19:49:24.163
> 
> 标签：jquery, html

我想使用 jQuery 或 javascript 将 textarea 内的所有文本或输入作为按钮单击时的变量返回。

.select() 函数似乎没有这样做，并且在记录时会吐出很多 css 属性

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:55:54.247

你是这个意思吗？`$('#id_of_or_input').val()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:02:35.343

就是这个：

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $("#le_button").click(function() {
                var input_value = $("#le_input").val(); //get the value
                alert(input_value); //do what ever you want, it is on a variable
            });
    });
    </script>
</head>
<body>

<textarea id="le_input">lorem ipsum</textarea>
<button id="le_button">click me!</button>

</body>
</html> 
```

# git - 使用 post_update 挂钩时无法在裸存储库中设置 GIT_WORK_TREE 变量

> ID：13554801
> 
> 赞同：1
> 
> 时间：2012-11-25T19:49:58.967
> 
> 标签：git

我正在尝试使用[http://danielmiessler.com/study/git/#website](http://danielmiessler.com/study/git/#website)设置 git来管理我的网站。我在win7中使用git gui

我已经到了说明的最后一步：git push website

推送到网站后，我能够确认裸目录 ~/website.git 中的对象目录已更新。

我的钩子叫做'post_update'它有以下内容

```
#!/bin/sh
echo
echo "**** Pushing data to Live Server.">>~/hi.txt
echo
export > ~.file1.txt
GIT_WORK_TREE=/home/***/public_html/b1a
export >> ~.file1.txt
git checkout -f 
```

当我转到 /public_html/b1a 时，它是一个空目录。请注意，我已将 hooks 目录和 b1a 更改为 777。

我可以确认 post_update 挂钩正在触发，因为我将环境变量打印到 file1.txt（如上所示）。在我看到的文件中：

```
GIT_DIR="." 
```

但没有看到 GIT_WORK_TREE。没有能力设置这个我被卡住了。

我将不胜感激任何帮助，

提前致谢，

账单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:59:54.720

编辑：好的，所以现在我看到了你的问题。

这是您需要的脚本：

```
#!/bin/sh
echo
echo "**** Pushing data to Live Server.">>~/hi.txt
echo
GIT_WORK_TREE=/home/***/public_html/b1a git checkout -f 
```

我真的不知道为什么也不知道这是如何工作的，但确实如此。

我也不知道你为什么将`export`输出重定向到这些文件 - 你真的需要吗？

`HEAD`该脚本只是将存储库的当前目录检出到`GIT_WORK_TREE`目录中。就是这样。如果您还需要什么，请发表评论。

* * *

我认为您没有导出`GIT_WORK_TREE`变量。

尝试更改这些行，以便真正导出该变量，而不仅仅是设置它：

```
#!/bin/sh
echo
echo "**** Pushing data to Live Server.">>~/hi.txt
echo
export GIT_WORK_TREE=/home/***/public_html/b1a
export > ~/.file1.txt
git checkout -f 
```

第一个`export`设置`GIT_WORK_TREE`值并将其标记为导出，第二个将所有当前导出的变量输出到文件。

我在 Linux 上运行它，但我希望它在 git-bash 上是一样的......

# xml - 使用来自 qbxml xsd 模式的 JAXB xjc 生成的类时出错

> ID：13554805
> 
> 赞同：1
> 
> 时间：2012-11-25T19:50:14.400
> 
> 标签：xml, jaxb, xsd, qbxml

我正在尝试从以下位置的验证器 xsd 文件中生成可以使用的类：

`C:\Program Files\Intuit\IDN\Common\tools\validator`

我跑：

`xjc qbxmltypes.xsd qbxml.xsd qbxmlso.xsd qbxmlops.xsd`

并且该工具按预期生成“生成”目录和类文件。但是，这些类似乎无法正常工作。我将这些类添加到我的项目中，重新打包它们，一切都编译得很好。当我创建一个新的 JAXBContext 对象时：

`JAXBContext jaxbContext = JAXBContext.newInstance(ObjectFactory.class);`

以正常方式，这编译得很好，但我在 System.err 中得到运行时错误（很多，重复同一行），内容如下：

`No XmlSchema annotation found for [packagenamehere]`

我在包路径中搜索 XmlSchema 的用法，但没有找到。JAXB 在运行时显然需要这个。

我使用了错误的 .xsd 文件吗？我应该将 XmlSchema 注释添加到 ObjectFactory.java 类吗？我在这里做错了什么？我想我只是在用 xjc 构建错误的类。我应该编译哪些 .xsd 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:59:10.583

XJC 实用程序将根据目标命名空间将类生成到包名中。如果默认情况下没有，它将把它们放在一个名为 generate 的包中。您可以提供包名称作为参数。

```
xjc -p com.example.foo schema.xsd 
```

我建议将您的每个模式生成到一个单独的包中。当`JAXBContext`从 XML 模式生成的类创建一个从类时，我总是建议在包名上这样做。当有多个包名时，只需用`.`字符将它们分开即可。

```
JAXBContect jc = JAXBContext.newInstance("com.example.foo:com.example.bar"); 
```

# jquery - jQuery 不会工作？动画功能

> ID：13554807
> 
> 赞同：-3
> 
> 时间：2012-11-25T19:50:17.610
> 
> 标签：jquery, function, jquery-animate

**你好堆栈溢出**

我正在浏览 jQuery 的一些教程，因为我想开始 2d 聊天。

我有一个代码应该使一些图像的不透明度为 50%，当鼠标悬停图像时为 100%，但它不起作用？图像为 50%，但不会更改为 100%。

**我的代码：**

```
$(function(){

    $('#container img').animate({
        "opacity" : .50
    });

    $('#container img').hover(function() {
        $(this).animate({  "opactiy": 1  });
        console.log("Den er nu 100% klar");
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:54:40.637

您的悬停语句中有错字：

```
 $(this).animate({  "opactiy": 1  }); 
```

应该：

```
 $(this).animate({  "opacity": 1  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T19:54:52.610

只需更改`opactiy`为`opacity`您的第二个`.animate()`：

```
$(function(){

    $('#container img').animate({
        "opacity" : .50
    });

    $('#container img').hover(function() {
        $(this).animate({  "opacity": 1  }); // <-- Right here
        console.log("Den er nu 100% klar");
    });

});​ 
```

[**jsFiddle**](http://jsfiddle.net/x7f2W/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:00:27.340

```
$(function(){

    $('#container img').animate({
        opacity : '1'
    });

    $('#container img').hover(function() {
        $(this).animate({  opacity:'0.5'  });

    },function(){
            $(this).animate({ opacity:'1'  });

    });

});​ 
```

[JSFIDDLE](http://jsfiddle.net/AeCWv/)

# python - 如何优化pygame中的平铺渲染？

> ID：13554817
> 
> 赞同：1
> 
> 时间：2012-11-25T19:50:59.410
> 
> 标签：python, optimization, pygame, tiles-game

我正在制作基于图块的游戏，并且需要每帧渲染地图。现在，每个瓦片是 32X32，可见地图是 28X28 瓦片。表现是可怕的。我最近让它只渲染可见的瓷砖，但这仍然没有提高 FPS。现在我正在寻找一种加快渲染速度的方法。我将缓慢归因于我的渲染方式；每个图块都单独传送到屏幕上。这样做会更有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:00:23.893

在 pygame (afaik) 中，更新屏幕总是一个瓶颈。由于我看不到您的代码，我不知道您是如何更新屏幕的。只对改变的精灵进行 blitting 是一个开始，但您只需要在屏幕上更新那些改变的部分。`display.flip()`基本上这是使用或`update_rects()`仅使用更改的矩形之间的区别。我知道，当您滚动地图时，这根本没有帮助。看看这个问题：[为什么这个 Python 上的小（155 行）吃豆人游戏运行这么慢？](https://stackoverflow.com/questions/10379102/why-is-this-small-155-lines-long-pacman-game-on-python-running-so-slow), 它有一个相似的主题。

当我有一个由瓷砖和一些精灵编译的地图时，我尝试过一件事，我尝试始终为包含当前显示部分和周围大约 200 个像素的区域提供地图的预编译图像，这样我就可以进行 blit准备好的“地面”（仍然只在更新的部分中），而不需要对其中包含的所有瓷砖进行涂抹。当然，这是你必须投入的一些想法，特别是如果你有多个图层和地图的一部分可以在你的活动精灵之上。思考和解决这个问题很有趣，但我不能告诉你，你会从中获得多少。

一种完全不同的可能解决方案：我从 pygame 开始一次（因为在那之前我在 C++ 中做过 SDL）。最近我被引导到另一个 python 游戏库：[pyglet](http://www.pyglet.org/)。这不会像 pygame 那样受到更新整个屏幕的问题的影响（我认为这是因为使用了 OpenGL 加速；它仍然适用于我根本没有加速的 eee-Netbook）。如果您不以任何方式绑定到 pygame，那么看看 pyglet 可能会很有趣。

# jquery - jquery 滑块在 html 页面中不能按要求工作

> ID：13554818
> 
> 赞同：1
> 
> 时间：2012-11-25T19:51:00.270
> 
> 标签：jquery, html, css

我正在编写一个网站，使用幻灯片方法为下一页设置下一个和上一个按钮，我可以在下一个按钮的单击事件上执行下一张幻灯片，但是当我尝试对上一个按钮执行操作时，它会产生问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Telas</title>
<!---------------------------------------Script---------------------------------------->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
    <script type="Text/javascript">
        $(document).ready("#BtnNext").click(function () {
            if ($('#MainContainer').css("marginLeft") == "-4275px")
             {
                $('#MainContainer').css("margin-left", "+1425px");
            }
            $('#MainContainer').animate({ marginLeft: "-=1425px" });
        });
    </script>
    <script type="text/javascript">
        $(document).ready("#BtnPrev").click(function () 
        {
            $('#MainContainer').animate({ marginLeft: "+=1425px" });
        });
    </script>
    <script type="text/javascript">
    </script>
    <link href="Styles.css" rel="stylesheet" type="text/css" />
</head>
    <body>
        <div id="Layout">
            <div id="Header"></div>
            <div id="ButtonBar">
                    <input id="BtnNext" type="button"  />
                    <input id="BtnPrev" type="button"  />
                </div>
            <div id="MainContainer">
            </div>
            <div id="Footer"></div>
        </div>
    </body>
</html> 
```

# c++ - Qt connect() SLOT 和“this”指针

> ID：13554819
> 
> 赞同：1
> 
> 时间：2012-11-25T19:51:01.063
> 
> 标签：c++, qt, class, signals, slot

以下代码有效：

```
connect(ui.pushButton, SIGNAL(clicked()), this, SLOT(myMemberFunction())); 
```

* * *

另一个没有：

```
connect(ui.pushButton, SIGNAL(clicked()), this, SLOT(this->myMemberFunction())); 
```

* * *

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T20:02:29.823

SLOT() 宏编写了一个可以调用的函数（作为函数指针）来传递插槽，它使用参数作为名称，它本身不是函数调用。

# perl - Perl dbi sqlite 'select * ..' 只返回第一个元素

> ID：13554826
> 
> 赞同：3
> 
> 时间：2012-11-25T19:52:00.273
> 
> 标签：perl, sqlite, select, dbi

perl dbi sqlite 有问题。

我已经建立了一个数据库（并用 sqlite 命令行检查了它）。现在我想在这个数据库中搜索，它不起作用。

所以我试着做一个'SELECT *'这只打印数据库中**的第一个元素**，而不是这个表中的所有内容。

我认为导致 select * 失败的错误与阻止我使用“like %..%”的东西是一样的。

这是相关代码，如果代码正确并且数据库表看起来不错，还有什么可能导致问题？

```
 my $dbh = DBI->connect("dbi:SQLite:dbname=$dbfile","","") || die "Cannot connect: $DBI::errstr";

my $sth = $dbh->prepare('SELECT * FROM words');
$sth->execute;
my @result = $sth->fetchrow_array();

foreach( @result) {
    print $_;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T19:59:31.517

**fetchrow_array** () 只取一行。

尝试

```
while ( my @row = $sth->fetchrow_array ) {
  print "@row\n";
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-25T20:03:57.410

据[`the documentation`](https://metacpan.org/module/DBI#Statement-Handle-Methods)，`fetchrow_array`

> 获取下一行数据并将其作为包含字段值的列表返回。

如果您想要*所有*数据，您可以重复调用`fetchrow_array`（或`fetchrow_arrayref`）直到到达表的末尾，或者您可以使用`fetchall_arrayref`：

> fetchall_arrayref 方法可用于从准备和执行的语句句柄中获取要返回的所有数据。它返回对包含每行一个引用的数组的引用

代码看起来像这样

```
use strict;
use warnings;

use DBI;

my $dbfile = 'words.db';

my $dbh = DBI->connect("dbi:SQLite:dbname=$dbfile", '', '') or die "Cannot connect: $DBI::errstr";

my $sth = $dbh->prepare('SELECT * FROM words');
$sth->execute;
my $result = $sth->fetchall_arrayref;

foreach my $row ( @$result ) {
  print "@$row\n";
} 
```

# javascript - 如何 toUpperCase() string+var

> ID：13554827
> 
> 赞同：1
> 
> 时间：2012-11-25T19:52:08.543
> 
> 标签：javascript

如果不先用整个字符串创建一个 var，怎么可能做到这一点？

```
{'HDL_'+_parent.page+'_NUMBER'}.toUpperCase(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:52:39.900

采用

```
('HDL_'+_parent.page+'_NUMBER').toUpperCase(); 
```

# c++ - 基类和子类函数继承混淆（C++）

> ID：13554828
> 
> 赞同：0
> 
> 时间：2012-11-25T19:52:11.440
> 
> 标签：c++

我对基类和子类函数继承感到非常困惑。我有这些课程：

```
#include <point.h>

class Polygon{
public:
    Polygon();
    virtual ~Polygon();
    void addPoint(Point *p);
    std::string getType();
    Point* getPoint(int index);
    int getNumOfPoints();
    int getColor();
    virtual int area()=0;

private:
  std::vector<Point*> _points;

  int color;
  std::string type = "Polygon";

};

class Rectangle : public Polygon{
public:
    Rectangle();
    virtual ~Rectangle();
    virtual int area();

private:
    std::vector<Point*> _points;

    int color;
    std::string type = "Rectangle";
}; 
```

现在，我主要这样做：

```
Rectangle rect();
rect.getType(); 
```

这给了我“多边形”，而我想要“矩形”我很确定我对继承感到困惑。所以，根据我的理解，基类函数是被继承的，但是为什么当我运行它与对象基类的成员而不是实际对象（矩形）相关的函数时呢？

如果有人愿意帮忙，我会很高兴！非常感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T19:56:30.880

发生的事情`Rectangle::type`是完全无关的`Polygon::type`。它是一个单独的数据成员，恰好具有相同的名称。

达到预期效果的一种方法是`getType()`在每个派生类中创建虚拟并覆盖它：

```
class Polygon {
public:
    virtual std::string getType() = 0;
    ...
}

class Rectangle: public Polygon {
public:
    virtual std::string getType();
    ...
}

std::string Rectangle::getType() {
    return "Rectangle";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:01:16.500

`type`您有两个在 的实例中命名的成员`Rectangle`。由于私有成员`Polygon`只能由该类的成员函数访问，因此在`Rectangle`. 它甚至不是正确的阴影，因为在 中`Rectangle`，`type`成员`Polygon`将无法访问。所以`Polygon::getType`返回`type`定义的 in`Polygon`而不是不相关的 in 定义的`Rectangle`。

您有几种方法可以解决您的问题：

*   在每个构造函数中定义`type`为受保护成员`Polygon`并分配给它。
*   掉落`type`；声明`getType`为虚拟并在每个类中覆盖它，返回一个常量字符串。
*   将 RTTI 用于它的好处：找出对象的实际类。
*   设计你的程序，这样你就不需要告诉对象的确切类型。这通常是最好的。每次你需要为不同的子类提供不同的行为时`Polygon`，编写一个实现特定行为的虚成员函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:03:52.377

您只需要在一个地方使用类型字符串 - 您的基类。因为您希望它可以在您的派生类中访问，但不能被您的用户访问，所以使其受到保护。在每个构造函数中，将其设置为适当的值：

```
Polygon::Polygon():
        type("polygon")
{}

Rectangle::Rectangle()
    Polygon()
{
    type = "rectangle";
} 
```

# vb.net - VB.NET：如何终止已经在当前项目之外运行的进程

> ID：13554830
> 
> 赞同：0
> 
> 时间：2012-11-25T19:52:29.510
> 
> 标签：vb.net, process, visual-studio-2012, auto-update, kill-process

你好再次，我需要一些帮助。我正在开发一个自动更新组件来更新我在 vb.net 中的其他应用程序之一。问题是如果有更新可用，更新应用程序必须能够“杀死”正在更新的应用程序。请注意，更新应用程序和程序应用程序是 2 个独立的项目，并且没有任何联系。我想知道是否有办法从更新应用程序中终止该程序应用程序的进程。我看过几个例子，但它们在代码中启动和停止进程。我希望能够按名称搜索进程，然后将其杀死（不开始，因为它已经在运行）。任何帮助表示赞赏！（注意：那些重定向到另一个链接的人不会得到最佳答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:15:09.940

我以前做过类似的事情。如果我正确理解您的要求，那么您需要使用 System.Diagnostic 命名空间中的 GetProcess。这里有更多关于它的信息：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.kill.aspx)。

# php - AJAX、SEO和PHP文件夹麻烦

> ID：13554833
> 
> 赞同：0
> 
> 时间：2012-11-25T19:52:46.710
> 
> 标签：php, ajax, seo, directory

我正在创建一个读取特定文件的 AJAX 脚本，该文件的名称由 GET var 标识。脚本的开头`index.php`是：

```
var expFile = '<?php echo $_GET['text_name']; ?>';
$(document).ready(function () {

$.ajax({
    url: expFile+'.xml',
    type: 'get',
    dataType: 'xml',
    success: function (data, textStatus) {

    // Parses the content, which is escaped into a "text" tag in the xml, and puts it
    //into an html div with a "content" class"

        var content = decodeURIComponent($(data).find('text').text());
        $('.content').html(content);
    }
});
}); 
```

一切顺利。文件被读取并且东西显示正确。与 index.php 文件位于同一文件夹中的 XML 文件是直接从 AJAX 读取的。

现在我正在使用 mod_rewrite 来使 URL 对 SEO 友好。当我输入脏 URL ( `http://www.mysite.com/index.php?text_name=name-of-the-file-to-read`) 时，就可以了。

**但是当我输入重写的 url**（即`http://www.mysite.com/lyrics/name-of-the-file-to-read`）时，内容不会显示。

我知道 AJAX 是客户端，而 mod_rewrite 是服务器端，但我不知道如何从“url”参数`$.ajax` 或绝对链接（如`url: 'http://...'`（但它违反了同源政策）。

请帮帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T19:55:44.903

URL`.xml`由函数本身附加 - 在这一行：

```
url: expFile+'.xml', 
```

当您尝试使用 SEO 友好的 URL 时，它仍然存在吗？如果是这样，我会删除附加的并重`.xml`试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:14:10.410

*弗朗切斯科的回答，最初提出的问题：*

解决了。

问题出在脚本标签上。我不得不把一个`../`到jquery href

```
<script type="text/javascript" src="../libraries/jquery.min.js"></script> 
```

然后我添加`../`到 URL 中，一切正常。

# vim - VimL：使通过键调用的函数接收来自 Vim 命令行的输入

> ID：13554834
> 
> 赞同：1
> 
> 时间：2012-11-25T19:52:51.727
> 
> 标签：vim, vim-plugin

因此，由于标题，这可能不是一个明确的问题。但这是实际的解释：

我有这个自定义函数，我希望这个函数能够从命令行调用，这已经完成（`:FunctionName arg`），但现在我需要让这个函数对某个映射做出反应。

所以当用户按下`<leader>cs`它时会提示用户输入 arg 部分，映射 this 对我来说仍然有点不清楚，但也不清楚如何实现这个功能。这就是 Surround 脚本所做的事情，它允许您输入旧字符和新字符以替换它。

对于我正在制作的第一个脚本，我需要这个 BTW，它允许您以类似于 Sublime Text 的方式更改文件的语法。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:09:13.233

最简单的方法是从映射中删除结论`<CR>`，以便它进入命令行模式并使用您的自定义命令填充命令行：

```
:nnoremap <Leader>cs :FunctionName<Space> 
```

然后您可以输入`arg`并使用 触发命令`Enter`。

* * *

`input()`或者，您可以通过（以及带有 ; 的单个字符来查询用户输入`getchar()`，很明显，不是吗？！），如下所示：

```
function! FunctionNameWithQuery()
    let arg = input('arg: ')
    execute 'FunctionName' arg
endfunction
nnoremap <Leader>cs :call FunctionNameWithQuery()<CR> 
```

# iphone - 未声明的标识符目标 C

> ID：13554839
> 
> 赞同：2
> 
> 时间：2012-11-25T19:53:08.980
> 
> 标签：iphone, objective-c, ios, xcode, ios4

我似乎无法绕过这个错误；使用未声明的标识符“ageBy”。我不明白为什么会得到它，因为我的代码中有 import Person.h。感谢您的时间和任何帮助。

人.h

```
@interface Person : NSObject
{
 int _age;
 int _years;
 NSString *_name;
 NSString *_job;

} 

-(void)setAge:(int)age;
-(int)age;

-(void)setName:(NSString *)name;
-(NSString *)name;

-(void)setJob:(NSString *)job;
-(NSString *)job;

-(NSString *)summaryString;

-(void)ageBy:(int)years;

@end 
```

人.m

```
#import "Person.h"
@implementation Person

-(void)setAge:(int)age{
  _age = age;
}
-(int)age{
  return _age;
}
-(void)setName:(NSString *)name{
  _name = name;
}
-(NSString *)name{
  return _name; }

-(void)setJob:(NSString *)job{
  _job = job;
}
-(NSString *)job{
  return _job;
}

-(NSString *)summaryString{
  return [NSString stringWithFormat:@"The Person %@ is %d years old and is a  %@",_name,_age,_job];

-(void)ageBy:(int)years{
  _years = years;
  _age = years + _age;

 }

 } 
 @end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:56:09.913

你`ageBy:`是在里面定义的`summaryString`。您可能想在之前移动大括号`@end`，使其位于`-(void)ageBy:(int)years`. 所以：

```
-(NSString *)summaryString{
  return [NSString stringWithFormat:@"The Person %@ is %d years old and is a  %@",_name,_age,_job];
 } 

-(void)ageBy:(int)years{
  _years = years;
  _age = years + _age;

 } 
```

同样作为样式说明，如果`summaryString`仅用于调试，则最好将其声明为[`description`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/description). 后者是获取 Objective-C 对象的实现依赖和字符串描述的标准形式，其净效应是集合对象`NSArray`知道调用`description`其所有子对象以创建正确的输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-25T20:30:57.567

如前所述，问题是由`ageBy:`嵌入在`summaryString`方法中的方法引起的。

我想演示如何使用现代 Objective-C 编写这个类：

```
// Person.h
@interface Person : NSObject

@property (nonatomic, assign) int age;
@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) NSString *job;

- (void)ageBy:(int)years;

@end

// Person.m
@implementation Person

- (NSString *)description {
    return [NSString stringWithFormat:@"The Person %@ is %d years old and is a %@", self.name, self.age, self.job];
}

- (void)ageBy:(int)years {
    self.age = self.age + years;
}

@end 
```

# php - Wordpress 类别循环，如何隐藏没有帖子的猫？

> ID：13554843
> 
> 赞同：0
> 
> 时间：2012-11-25T19:53:35.213
> 
> 标签：php, wordpress

[我在这个网站上](http://wesbos.com/wordpress-list-posts-by-category/)找到了这段代码

但即使该类别下没有帖子，它也会打印猫名 (the )。如果猫中没有帖子，我将如何修改此代码以不打印标题？

```
 <?php           
        // get all the categories from the database
        $cats = get_categories(); 

            // loop through the categries
            foreach ($cats as $cat) {
                // setup the cateogory ID
                $cat_id= $cat->term_id;
                // Make a header for the cateogry
                echo "<h2>".$cat->name."</h2>";
                // create a custom wordpress query
                query_posts("cat=$cat_id&tag=torrington&post_per_page=100");
                // start the wordpress loop!
                if (have_posts()) : while (have_posts()) : the_post(); ?>

                    <?php // create our link now that the post is setup ?>
                    <a href="<?php the_permalink();?>"><?php the_title(); ?></a>
                    <?php echo '<hr/>'; ?>

                <?php endwhile; endif; // done our wordpress loop. Will start again for each category ?>
            <?php } // done the foreach statement ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:04:35.430

制作这一行：

```
echo "<h2>".$cat->name."</h2>"; 
```

只有在`have_posts()`为真时才执行。

```
<?php           

// get all the categories from the database
$cats = get_categories(); 

// loop through the categries
foreach ($cats as $cat) {

    // setup the cateogory ID
    $cat_id= $cat->term_id;

    // create a custom wordpress query
    query_posts("cat=$cat_id&tag=torrington&post_per_page=100");

    // start the wordpress loop!
    if (have_posts()):

        // Make a header for the cateogry
        echo "<h2>".$cat->name."</h2>";

        while (have_posts()):

            the_post();

            // create our link now that the post is setup
            ?>
            <a href="<?php the_permalink();?>"><?php the_title(); ?></a>
            <?php echo '<hr/>';

        endwhile;

    endif; // done our wordpress loop. Will start again for each category

} // done the foreach statement 
```

# elasticsearch - ElasticSearch 别名可以指向的索引数量是否有限制？

> ID：13554845
> 
> 赞同：1
> 
> 时间：2012-11-25T19:53:38.303
> 
> 标签：elasticsearch

我有这个别名，我想指向 60 个索引。在 21 个索引处，我开始收到 Execution Rejected 异常。

这是因为别名 API 中有 20 个索引限制吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T02:13:10.770

假设每个索引有 5 个分片，针对 21 个索引的请求可能会生成大约 105 个分片请求，其中 32 个请求被发送到池中的线程，73 个请求进入队列。此时，队列中只剩下大约 27 个元素。因此，如果另一个针对 6 个或更多索引（30 个分片）的请求到达，一些分片请求将被拒绝执行拒绝异常。我把这里的情况过分简化了，实际使用的线程数取决于许多因素，包括分片的位置、搜索设置等。但是，我希望你能在这里看到主要思想：如果你想搜索一个大量分片，您需要确保线程池中有足够的容量来处理峰值负载。

# java - 调用 getElementById 时获取 NULL

> ID：13554847
> 
> 赞同：0
> 
> 时间：2012-11-25T19:53:53.017
> 
> 标签：java, jsoup

我有如下所示的 HTML（部分）。我想使用以下方法查找元素：

```
org.jsoup.nodes.Element elem = doc.getElementById("date-2011-04-23"); 
```

但我总是得到一个`NULL`. 谁能帮我？作为检查，我还使用 VB.NET 对此进行了编码，并且可以访问该元素。

```
<td class="" id="date-2011-04-23" data-week="3" data-wkday="6">...</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:01:10.360

您没有在 HTML 中找到该内容的原因是，时间表是由执行 Javascript 的浏览器从 JSON 文件加载的，然后将其添加到浏览器 DOM。Jsoup 不执行 Javascript，因此它只能查看源 HTML 中的内容。

如果您使用像 Charles 这样的调试代理（或 Chrome / Firefox 中的调试网络窗格），您可以看到浏览器为呈现页面而发出的所有请求。在此示例中，计划数据来自[http://mlb.mlb.com/gen/schedule/phi/2011_4.json](http://mlb.mlb.com/gen/schedule/phi/2011_4.json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:51:08.877

假设您的标签如下所示：

```
<td class="" id="date-2011-04-23" data-week="3" data-wkday="6">...</td> 
```

您可以为此使用[JSoup Selector API](http://jsoup.org/cookbook/extracting-data/selector-syntax)：

```
for( Element element : doc.select("#date-2011-04-23") )
{
    // Do something here
} 
```

如果您只需要第一个元素：

```
Element element = doc.select("#date-2011-04-23").first(); 
```

# playframework - Play Framework 2.1-RC1 错误值消息不是 Option[play.api.data.FormError] 的成员

> ID：13554848
> 
> 赞同：1
> 
> 时间：2012-11-25T19:53:57.710
> 
> 标签：playframework, playframework-2.1

我尝试将 Play 2.0 应用程序升级到 2.1-RC1，但现在无法编译。我收到以下错误消息：

```
value message is not a member of Option[play.api.data.FormError] 
```

抛出上述消息的行是

```
<p class="error">@form.globalError.message</p> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:55:39.137

问题是在 2.1`form.globalError`中是一个`Option`，所以你需要`get`在访问`FormError`.

就像是：

```
@form.globalError.get.message 
```

请注意，如果`Option`is可能会失败`None`。更好地使用模式匹配或`getOrElse`安全。

# android - 应用程序不向服务器发送 GCM 注册 ID

> ID：13554856
> 
> 赞同：0
> 
> 时间：2012-11-25T19:54:52.297
> 
> 标签：android, notifications, google-cloud-messaging

我使用示例代码来学习，但没有将 RegId 发送到服务器。调用是正确的，因为服务器接受它，没有错误，并在数据库中添加一行但 regid 字符串为空。我研究了几个小时的代码，但不知道出了什么问题。

主要活动

```
 GCMRegistrar.checkDevice(this);
    GCMRegistrar.checkManifest(this);
    final String regId = GCMRegistrar.getRegistrationId(this);
    if (!regId.equals("")) {
      sendIdToServer(regId);
    } else {
      GCMRegistrar.register(this, Constants.SENDER_ID);
    }

    ...

    private void sendIdToServer(String regId) {
    String status = getString(R.string.gcm_registration, regId);
    mStatus.setText(status);
    (new SendRegistrationIdTask(regId)).execute();
    }

    ...

    private final class SendRegistrationIdTask extends
      AsyncTask<String, Void, HttpResponse> {
    private String mRegId;

    public SendRegistrationIdTask(String regId) {
      mRegId = regId;
    }

    @Override
    protected HttpResponse doInBackground(String... regIds) {
      String url = Constants.SERVER_URL;
      HttpPost httppost = new HttpPost(url);

      try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("regid", mRegId));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpClient httpclient = new DefaultHttpClient();
        return httpclient.execute(httppost);
      } catch (ClientProtocolException e) {
        Log.e(Constants.TAG, e.getMessage(), e);
      } catch (IOException e) {
        Log.e(Constants.TAG, e.getMessage(), e);
      }

      return null;
    }

    @Override
    protected void onPostExecute(HttpResponse response) {
      if (response == null) {
        Log.e(Constants.TAG, "HttpResponse is null");
        return;
      }

      StatusLine httpStatus = response.getStatusLine();
      if (httpStatus.getStatusCode() != 200) {
        Log.e(Constants.TAG, "Status: " + httpStatus.getStatusCode());
        mStatus.setText(httpStatus.getReasonPhrase());
        return;
      }

      String status = getString(R.string.server_registration, mRegId);
      mStatus.setText(status);
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:28:28.500

如果您可以确认（调试） mRegId 在此行中有值：

```
nameValuePairs.add(new BasicNameValuePair("regid", mRegId)); 
```

然后将下一行更改为：

```
 httpost.setEntity(new UrlEncodedFormEntity(nameValuePairs, HTTP.UTF_8)); 
```

设置显式编码。

# wcf - NHibernate 和 WCF 设施一起工作。Rhino Common Nhrepository 已过时？

> ID：13554857
> 
> 赞同：1
> 
> 时间：2012-11-25T19:55:06.060
> 
> 标签：wcf, nhibernate, wcffacility, rhino-commons

我一直在寻找一个很好的 WCF 和 NHibernate 设施一起工作的例子（每个 Web 请求一个会话等），但我找到的所有教程都是 2009 年或更早的。当可能有更好的方法来实现这一点时，我担心我可能会浪费时间尝试实现所有这些。

我注意到的另一件事是 Rhino.Commons.NHRepository 在三年前很流行，但我找不到比这更近的与这个程序集相关的任何东西。这有什么原因吗？

任何人都可以向我指出如何使用设施实现 WCF 和 NHibernate 的好例子？

NH存储库？RIP？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:28:32.360

它似乎已经死了。我建议您使用一种流行的 IoC 容器来管理会话和会话工厂的生命周期。几乎所有现代容器都与 WCF 集成，包括每个请求的生命周期。

# c# - 更改结构中的值？

> ID：13554858
> 
> 赞同：0
> 
> 时间：2012-11-25T19:55:08.537
> 
> 标签：c#, struct, xna

我正在我的 XNA C# Windows 游戏中保存游戏数据，但遇到了一个问题（由于我缺乏知识）。

我在公共类 Game1 之外创建了一个结构，如下所示

```
public struct SaveGameData
    {
        public string PlayerName;
        public int Score;
    } 
```

然后在main方法里面（公共类Game1）

```
SaveGameData saveGameData = new SaveGameData()
        {
            PlayerName = "Jimmy",
            Score = 100,
        }; 
```

我无法在代码中的其他地方访问 PlayerName，所以我想我可以将 PlayerName = 设置为另一个变量，例如“字符串名称”。但我收到以下错误消息

> 字段初始值设定项不能引用非静态字段、方法或属性

有没有办法动态改变这些值？还是我走错了路？

**编辑**

好的，抱歉提供的信息不足。

我声明了两个变量

```
public String name;
public int score; //small s 
```

然后我试图设置*PlayerName = name*和*Score = score*但我收到了上述错误。

通过接受 Wimmel 的建议，我将字段更改为静态，这样就消除了错误。

但是，在我的 Update 方法中，当我更新 score 值时...... Score 的值也没有更新。在我输出到的 .txt 文件中，Score 值是“score”的初始值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T19:59:22.423

您正在尝试访问`SaveGameData`这只是类型。您必须更改`saveGameData`字段或使字段为静态。

# regex - 匹配可能包含 1-2 位数字的单词

> ID：13554859
> 
> 赞同：1
> 
> 时间：2012-11-25T19:55:26.143
> 
> 标签：regex

我使用以下正则表达式匹配长度为 4 且包含 1 个数字和 3 个大写字母的单词：

```
\b(?=[A-Z]*\d[A-Z]*\b)[A-Z\d]{4}\b 
```

我想知道的是我需要如何修改表达式以过滤掉长度为 10、包含 0-2 个数字的单词。

```
\b(?=[A-Z]*\d[A-Z]*\b)[A-Z\d]{10}\b 
```

这适用于 1 个数字的出现，但我如何将它扩展到过滤 0 和 2 个数字呢？

示例：[http ://regexr.com?32u40](http://regexr.com?32u40)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T20:09:23.063

将长度检查放入前瞻中：

```
\b(?=[A-Z\d]{10}\b)(?:[A-Z]*\d){0,2}[A-Z]*\b 
```

**解释：**

```
\b           # Start at a word boundary
(?=          # Assert that...
 [A-Z\d]{10} # 10 A-Z/digits follow
 \b          # until the next word boundary.
)            # (End of lookahead)
(?:          # Match...
 [A-Z]*      # Any number of ASCII uppercase letters
 \d          # and exactly one digit
){0,2}       # repeat 0, 1 or 2 times.
[A-Z]*       # Match any number of letters
\b           # until the next word boundary. 
```

# ios - 合并或跳过核心数据模型的版本

> ID：13554862
> 
> 赞同：0
> 
> 时间：2012-11-25T19:55:42.033
> 
> 标签：ios, cocoa-touch, cocoa, core-data, core-data-migration

在开发新功能期间，我对核心数据模型进行了几次版本化，始终使用轻量级迁移。我正在开发我的应用程序的 v1.5，现在我的核心数据模型有 1.5.0、1.5.1、1.5.1 等版本。只有最终版本会被部署的产品使用——换句话说，如果我能够更好地预测我最终会得到的模型，我的 v1.5.0 会看起来像 v1.5.99。

有没有办法整合中间版本，让迁移一步到位？如果我不这样做，迁移会运行多次，是否会对性能产生影响？

我正在考虑恢复我的 v1.4 版本并手动重新创建最终模型版本作为唯一的新版本，但我不期待重新添加已在同一分支中更新的所有其他代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T06:45:36.780

如果 (1) 您没有与 1.5.0、1.5.1 等版本一起存储的任何数据，并且 (2) 从 1.4 迁移到 1.5.99 可以自动发生，那么您只需从你的数据模型。

# json - Spring MVC 3.1.2 + Jackson 2：延迟初始化集合时出现 LazyInitializationException - 没有会话或会话关闭

> ID：13554864
> 
> 赞同：3
> 
> 时间：2012-11-25T19:55:44.887
> 
> 标签：json, spring, hibernate, hql, jackson

我对使用 Spring MVC 3.1.2 和 Jackson 2 的错误感到抓狂。

我有以下模型类：

```
@Entity
@Table(name = "USER")
@JsonIgnoreProperties(ignoreUnknown=true)
public class User implements Serializable
{
    @Id
    @SequenceGenerator(name = "USER_ID", sequenceName = "USER_ID_SEQ", allocationSize = 1)
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "USER_ID")
    private Long id;

    @Column(length = 50, nullable = false)
    private String firstName;

    @Column(length = 50, nullable = false)
    private String lastName;

    @ManyToMany
    @JoinTable(name = "FRIENDS",
        joinColumns = @JoinColumn(name = "personId"),
        inverseJoinColumns = @JoinColumn(name = "friendId")
    )
    @JsonManagedReference
    private List<User> friends;

    @ManyToMany
    @JoinTable(name="FRIENDS",
        joinColumns=@JoinColumn(name="friendId"),
        inverseJoinColumns=@JoinColumn(name="personId")
    )
    @JsonIgnore
    private List<User> friendOf;

    // Other attributes and methods... 
} 
```

当我得到一个 User 实例时，它被 Jackson 正确序列化。但是当我尝试获取包含朋友的 User 实例时，会引发以下异常：

> **org.hibernate.LazyInitializationException：未能延迟初始化角色集合：com.frooid.model.User.friends，没有会话或会话已关闭**

我正在使用单个 HQL 获取此实例：

```
select u from User u left join fetch u.friends f where u.id = :id 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T20:23:18.327

ToMany 关联默认是延迟加载的。这意味着您的用户的朋友只会在调用`friends`列表的方法时从数据库中加载。

这种延迟加载只能在用于加载用户的会话打开时发生。因此，如果您在未加载好友列表的情况下从事务方法返回用户，则会话将关闭，并且尝试加载好友列表将导致您遇到异常。

因此，如果客户端需要加载好友列表，则可以使用 HQL 获取好友，或者在服务方法内部，通过调用列表上的方法或调用`Hibernate.initialize(user.getFriends())`.

编辑：因为你在你的 HQL 中有一个 fetch，它应该可以工作。另一个问题是双向关联被映射了两次：一次在`friends`场上，一次在`friendOf`场上。`mappedBy`必须使用以下属性将其中一个关联标记为另一个关联：

```
@ManyToMany(mappedBy = "friends")
@JsonIgnore
private List<User> friendOf; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-25T20:20:45.753

尝试使用`OpenSessionInViewFilter`while 这用于访问视图中的惰性初始化字段，它可能会保持会话打开，让 Jackson 能够访问集合。

将`OpenSessionInViewFilter`Hibernate Session 绑定到线程以完成请求的整个处理。用于“在视图中打开会话”模式，即允许在 Web 视图中延迟加载，尽管原始事务已经完成。

**在 Web.xml 中**

```
<filter>
    <filter-name>OpenSessionInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>OpenSessionInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

[API 文档](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/orm/hibernate3/support/OpenSessionInViewFilter.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T10:08:33.437

我有类似的问题。`@JsonView({NewClass1.class,NewClass2.class})`方法是创建一个新类（视图）并在定义属性的实体中的每个属性中添加此类。您可以选择要加载的变量作为响应的一部分，并将类包含在`@JsonView`. 就这么简单！

# r - 如何在data.table中按多列分组？

> ID：13554873
> 
> 赞同：3
> 
> 时间：2012-11-25T19:56:19.930
> 
> 标签：r, data.table, aggregation, dimension

我正在尝试在 data.table 中进行一些聚合，但我面临一个无法找到解决方案的挑战。挑战真的很简单，我想总结一下data.table中的一些值，不止一个维度。

我没有问题让以下代码工作：

```
Export4R[,sum(units),by=Type] 
```

这给出了以下几点：

```
Type    Value
foobar  45
barfoo  25 
```

但现在我想进一步分解一下，并希望得到这样的表格：

```
Type    Month    Value
foobar  Mar      12
foobar  Apr      7
.... 
```

我试图用一行代码来做到这一点，但不幸的是这似乎不起作用：

```
Export4R[,sum(units),by=Type,Month] 
```

这很可能是一个非常简单的问题，但我很难找到答案。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:57:53.980

```
Export4R[,sum(units),by="Type,Month"] 
```

或者

```
Export4R[,sum(units),by=list(Type,Month)] 
```

* * *

后一种语法允许列名和命名的表达式；例如，

```
Export4R[,sum(units),by=list(Grp1=substring(Type,1,2), Grp2=Month)] 
```

顺便说一句，您可以在多行上格式化长查询：

```
Export4R[,list(
    s = sum(units)
    ,m = mean(units)
),by=list(
    Grp1=substring(Type,1,2)
    ,Grp2=Month
)] 
```

像这样将逗号放在开头的原因是您可以轻松地添加和注释列，而不会弄乱最后一项的右括号；例如，

```
Export4R[,list(
    s = sum(units)
    # ,m = mean(units)
),by=list(
    Grp1=substring(Type,1,2)
    # ,Grp2=Month
)] 
```

这个想法来自 SQL。

# css - 屏幕中间的 HTML 列

> ID：13554874
> 
> 赞同：0
> 
> 时间：2012-11-25T19:56:20.737
> 
> 标签：css, html, multiple-columns

这可能是一个基本的 html + css 问题，但我有点想解决它：S

你看，我需要一个“3 列”布局。我想要一个中心列（比如说 10em 宽度）和另外两列，每边一个（假设每个 2em 宽度）。我想要三个在屏幕中间...

我怎样才能通过分别声明它们来做到这一点？我的意思是，做这样的事情：

```
<div class="left"><!-- 2em width --></div>
<div class="central"><!-- 10em width --></div>
<div class="right"><!-- 2em width --></div> 
```

有没有办法做到这一点而不在另一个容器中进化它们？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:03:21.910

当我在寻找类似的解决方案时，这对我帮助很大：http: [//matthewjamestaylor.com/blog/perfect-3-column.htm](http://matthewjamestaylor.com/blog/perfect-3-column.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T20:00:56.947

你觉得给他们一个百分比宽度怎么样？

```
.left {
    margin-left: 15%;
    width: 10%;
}
.central {
    width: 50%;
}
.right {
    width: 10%;
    margin-right: 15%;
}
div { float: left; height: 100%; }
body { height: 1000px;} 
```

因为 15+10+50+10+15 = 100。

我什至添加了一个 JsFiddle：http: [//jsfiddle.net/VjbFz/](http://jsfiddle.net/VjbFz/)

我仍然认为将它们包装在容器中是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T22:15:36.950

尝试这个：

**HTML：**

```
<body>
    <div id="container">
        <div class="left"><!-- 2em width --></div>
        <div class="central"><!-- 10em width --></div>
        <div class="right"><!-- 2em width --></div>
        <div class="cleaner"></div>
    </div>
</body> 
```

**CSS：**

```
body {
    text-align: center;    
}

.cleaner { clear: both; }

#container {
    margin: 0 auto;
    width: 14em;
    text-align: left;
}   

.left { width: 2em; float: left; }
.central { width: 10em; float: left; }
.right { width: 2em; float: left; }​ 
```

.cleaner 在这里只是因为浮动。

我还在 JsFiddle 上添加了它：http: [//jsfiddle.net/jmzWr/](http://jsfiddle.net/jmzWr/)

我希望它会有所帮助:)

# java - 包含方法忽略等于覆盖

> ID：13554877
> 
> 赞同：3
> 
> 时间：2012-11-25T19:56:36.210
> 
> 标签：java, set, overriding, equals

具有扩展他的`Node`抽象类。`Cell`

在`Cell`我实施`public boolean equals(Node cmpCell)`. 我`created Set<Node> closeList = new HashSet<Node>();`和当我执行时`closeList.contains((Cell) node)`我调试了它并检测到它完全忽略了`Cell equals`我实现的。我做错了什么？

**编辑 ：**

`Cell`我改成

```
@Override
public boolean equals(Object cmpCell) 
```

并且仍然`closeList.contains((Cell) node)`没有使用上面的 override 。

**第二次编辑：**

`Cell`班上有2名成员-

```
int colIndex ;
int rowIndex ; 
```

覆盖只是将它们与第二类的`equals`两个成员进行比较，我认为我使用它会更好，`HashMap<K, V>`但我仍然很高兴知道`hashCode`在这种情况下应该是什么样子？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-25T19:57:29.133

```
public boolean equals(Node cmpCell) 
```

这不是有效的覆盖。`equals`类方法的语法`Object`是：-

```
public boolean equals(Object) 
```

是的，正如@JonSkeet 在评论中指出的那样，每当你重写`equals`方法时，还要记住重写`hashCode`方法以遵循`equals`and的合同`hashCode`。因为如果您不这样做，那么即使您的`equals`方法显示将您的实例评估为相等，类中的默认`hashCode`实现`Object`也会为它们生成`different hashCodes`，因此它们将不相等。

此外，请确保在计算`hashcode`时仅考虑那些用于在`equals`方法中比较实例的属性。否则，您将再次得到不正确的结果。

除此之外，如果您使用像*Eclipse*这样的任何 IDE ，它会为您生成一个非常好的覆盖和兼容`equals`的`hashCode`方法。你应该更好地使用它们。您需要`right-click`在课堂上，转到`source`并选择`Generate equals and hashCode method`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-25T19:57:29.673

您可能没有覆盖[hashCode](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#hashCode%28%29)方法。

首先使用哈希码找到哈希集中的对象。您必须始终覆盖这两个`equals`and`hashCode`方法，或者一个都不覆盖。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T20:03:50.733

那么有三个潜在的问题：

1.  您覆盖了错误的签名。应该`public boolean equals(Object)`

2.  如果你覆盖 equals 你必须实现 hashCode

3.  您的 equals 方法是否对称（x.equals(y) 意味着 y.equals(x)）并且它是否与多态性一起正确发挥作用，即您可以有一个 Node.equals(Cell) 但反过来是错误的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T21:21:01.263

如前所述，`hashCode`必须`equals`相应地实施。

但是这里提出的问题是“*为什么不调用自定义的 equals()？* ”。所以，答案是，Java 不支持*[多分派](http://en.wikipedia.org/wiki/Multiple_dispatch)*。

## 简单的例子

如果声明`Object myCell = new Cell()`，则`myCell2.equals(myCell)`只能确定 myCell 的声明类型，即`Object`.

## 你的情况

被调用方法的签名是：`HashSet.contains(Object o)`，具有与上述相同的结果。

你可以做这样的事情，虽然它不是一个很好的解决方案：

```
public class Cell {
    @Override
    public boolean equals(Object o) {
        if(o instanceof Cell) {
            // your code
        }

        super.equals(o);
    }
} 
```

# sql - SQL - 使用游标和实现语句

> ID：13554878
> 
> 赞同：0
> 
> 时间：2012-11-25T19:56:37.007
> 
> 标签：sql, oracle

```
CREATE OR REPLACE procedure verify_employee IS
Emp_name trkemployee.name#%TYPE,
Emp_ID trkemployee.E#%TYPE,

CURSOR c1;
IS
select e.e#, e.name from trkemployee e where e# IN (select e# from trkdriver intersect select e# from trkmechanic);
IN 
(select e# from trkdriver intersect select e# from trkmechanic);
BEGIN
OPEN c1();

LOOP

END LOOP;
close c1;
END;
/ 
```

以上是我的 PL/SQL 代码。我想要实现的是列出所有同时担任司机和机械师的员工。

我在终端单独执行sql语句，输出如下..

```
SQL> select e.e#, e.name from trkemployee e where e# IN (select e# from trkdriver intersect select e# from trkmechanic);

        E# NAME
---------- --------------------------------------------------
        14 Andrew R. Smith 
```

但我想在 PL/SQL 中执行并执行 DMBS_OUTPUT.PUT(result);

我知道要检查多条记录，我需要使用游标。假设将来会有超过 1 行返回，我应该如何更改我的 pl/sql 以及当我加载程序时，终端说编译错误。

下面是我的3张桌子..

```
SQL> desc trkdriver;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 E#                                        NOT NULL NUMBER(12)
 L#                                        NOT NULL NUMBER(8)
 STATUS                                    NOT NULL VARCHAR2(10)

SQL> desc trkmechanic;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 E#                                        NOT NULL NUMBER(12)
 L#                                        NOT NULL NUMBER(8)
 STATUS                                    NOT NULL VARCHAR2(10)
 EXPERIENCE                                NOT NULL VARCHAR2(10)

SQL> desc trkemployee;
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 E#                                        NOT NULL NUMBER(12)
 NAME                                      NOT NULL VARCHAR2(50)
 DOB                                                DATE
 ADDRESS                                   NOT NULL VARCHAR2(300)
 HIREDATE                                  NOT NULL DATE 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:35:03.437

`IN (select ....`您的代码中有两次完整的部分。我认为这就是编译错误的原因。

我也认为 2 `in`s 会更快，因为 Oracle 可能会更好地使用索引：

```
select 
  e.e#, 
  e.name 
from 
  trkemployee e 
where 
  e# IN (select e# from trkdriver)
  and e# in (select e# from trkmechanic); 
```

提示：如果使用这样的游标，您需要添加大量异常处理以防止游标在出现错误时保持打开状态。循环使`for`遍历游标更容易和更安全：

```
for r in C loop
  DBMS_OUTPUT.PUT_LINE(r.e#);
end loop; 
```

此外，我可以想象这`e#`是一个可能在 PL/SQL 中引起问题的字段名称。我不确定，但是如果您遇到编译错误，可能就是这种情况。我宁愿选择一个更常见的名字，比如“EmployeeNr”。

[编辑]

您的代码有几个错误。首先，有一个不应该存在的`;`之后。`cursor C1`此外，循环中没有代码，这在 PL/SQL 中是不允许的。如果您需要对其进行测试，但您还没有编写代码，您可以键入`null;`for '一段什么都不做的代码。喜欢：

```
loop
  null;
end loop; 
```

你的整个代码可能看起来像这样。这个实际上可以编译，应该让你用你可能需要的其他东西来完成它。

```
CREATE OR REPLACE PROCEDURE verify_employee IS

  CURSOR C1 IS
    SELECT
      E.E#,
      E.name
    FROM
      trkemployee E
    WHERE
      E# IN (SELECT E# FROM trkdriver)
      AND E# IN (SELECT E# FROM trkmechanic);

BEGIN
  -- R becomes an alias for each row. You can access the fields
  -- of the rows inside the loop
  FOR R IN C1 LOOP
    -- Output each Emplyee number.
    DBMS_OUTPUT.PUT_LINE(R.E# || ', ' || r.name);
  END LOOP;
END; 
```

# c# - db.SaveChanges() 因事务异常而爆炸

> ID：13554880
> 
> 赞同：1
> 
> 时间：2012-11-25T19:56:41.423
> 
> 标签：c#, asp.net, sql, linq

以下方法导致 FIRST`db.SaveChanges()`抛出异常：（不允许新事务，因为会话中还有其他线程在运行。）

```
protected void btnInsertDependencies_Click(object sender, EventArgs e)
{
    using (icmsEntities db = new icmsEntities())
    {
        var divisions = db.Divisions;
        foreach (var division in divisions)
        {
            var dlc_sectors = db.Sectors.Where(s => s.Website.division_id == division.division_id).DistinctBy(s => s.name).ToList();
            foreach (var sector in dlc_sectors)
            {
                dlc_Sector dlc_sector = new dlc_Sector
                {
                    name = sector.name,
                    division_id = sector.Website.division_id
                };

                db.dlc_Sectors.AddObject(dlc_sector);

                var dlc_products = db.Products.Where(p => p.Sectors
                    .Any(s => s.Website.division_id == dlc_sector.division_id && s.name == dlc_sector.name))
                    .DistinctBy(p => p.name).ToList();

                foreach (var product in dlc_products.ToList())
                {
                    var dlc_product = db.dlc_Products.SingleOrDefault(p => p.name == product.name);
                    if (dlc_product == null)
                    {
                        dlc_product = new dlc_Product { name = product.name };
                        db.dlc_Products.AddObject(dlc_product);
                    }
                    dlc_product.dlc_Sectors.Add(dlc_sector);
                    db.SaveChanges();
                }
            }
        }
        db.SaveChanges();
    }
} 
```

首先`db.SaveChanges()`是确保不会再次插入具有相同名称的新产品。

我该如何解决这个问题？提前致谢。

## 为我工作：

```
 var Local = db.ObjectStateManager.GetObjectStateEntries(System.Data.EntityState.Added)
                        .Where(es => es.Entity is dlc_Product).Select(es => es.Entity as dlc_Product);
                    var dlc_product = db.dlc_Products.SingleOrDefault(p => p.name == product.name)
                        ?? Local.SingleOrDefault(p => p.name == product.name); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:35:16.077

不知道为什么会发生这种情况，但是如果您还检查了以下集合，`SaveChanges()`则不需要第一个：`Local``db.dlc_Products`

```
foreach (var product in dlc_products.ToList())
{
   var dlc_product = db.dlc_Products.SingleOrDefault(p => p.name == product.name)
       ?? db.dlc_Products.Local.SingleOrDefault(p => p.name == product.name);
    ...
} 
```

新对象被添加到`Local`集合中。

请注意，这`db.dlc_Products.Join(db.dlc_Products.Local)`看起来更高效，但它不会编译，并且相反它会`db.dlc_Products`为每个调用查询整体。

# php - 为什么这种使用数组引用调用 PHP 函数的较短方式会导致不同的结果？

> ID：13554881
> 
> 赞同：2
> 
> 时间：2012-11-25T19:56:57.490
> 
> 标签：php, pass-by-reference

如果一个函数`my_func`定义为：

```
function my_func(&$arr) {
    array_push($arr, 0);
    array_push($arr, 1);
    array_push($arr, 2);
    array_push($arr, 3);
    array_push($arr, 4);
} 
```

如果我`my_func`按如下方式调用，则结果如预期：

```
$test_array = array();
my_func($test_array);
print_r($test_array); 
```

结果是：

```
大批
(
    [0] => 0
    [1] => 1
    [2] => 2
    [3] => 3
    [4] => 4
)

```

`my_func`我在想我可以通过如下调用来缩短这段代码：

```
my_func($test_array = array());
print_r($test_array); 
```

但是，结果发生了变化：

```
大批
(
)

```

为什么这个较短的代码片段会导致不同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T19:59:46.563

您不是通过引用传递*变量，而是通过**表达式*的值。

如果您要启用所有错误，您将看到以下消息：

```
Strict Standards: Only variables should be passed by reference in 
```

赋值的值是本身被赋值的值。正是该值（数组的副本）被传递给`my_func`.

关于此事的[**PHP 文档**](http://php.net/manual/en/language.references.pass.php)更强烈地说明了这一点：

> 不应通过引用传递其他表达式，因为**结果是 undefined**。

**结论**：只将变量（`$x`, `$x[0]`, `$x->a`）、新对象或从函数返回的引用*传递*给期望引用的函数。

# r - 使用 ggplot 绘制列表对象

> ID：13554882
> 
> 赞同：8
> 
> 时间：2012-11-25T19:57:13.887
> 
> 标签：r, ggplot2

我正在运行一些模拟，想在漂亮的 ggplot 中绘制结果，但似乎 ggplot 无法处理列表对象。有谁知道如何将结果粘贴到 ggplot 图表中？

```
 N <- 8619170         
   nn <- c(1000, 1200, 3000)
   p <- .27     
   nsim <- 100

    phat <- list()
    for (i in 1:length(nn)) {
    n <- nn[i]
    x <- rhyper(nsim, N * p, N * (1 - p), n)
    phat[[i]] <- x / n
    } 
```

# 丑陋的解决方案：

```
 names(phat) <- paste("n=", nn)
    stripchart(phat, method="stack")
    abline(v=p, lty=2, col="red") 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T20:35:56.417

ggplot2 需要一个 data.frame 作为源数据。所以你需要：

1.  使用 reshape2（或 plyr 或许多其他工具）转换数据
2.  使用 qplot 或 ggplot 绘图

    例如

    ```
     ## transform data
     require(reshape2)
     h <- do.call(cbind, phat)
     h.melt <- melt(h)

     ## rename variables so they look nicer on plots
     names(h.melt) <- c("test","N","value")     

     ## stripchart (not shown)
     qplot(data = h.melt, x = value,y = N,color=N)+geom_point()

     ## histogram (not shown)    
     ggplot(h.melt,aes(x=value,fill=N))+geom_histogram()+facet_grid(N~.)

     ## dotplot with rug (not shown)
     ggplot(h.melt,aes(x=value,fill=N))+geom_dotplot()+facet_grid(N~.)+geom_rug()  

     ##density plot with rug (shown below)
     ggplot(h.melt,aes(x=value,fill=N))+geom_density()+facet_grid(N~.)+geom_rug() 
    ```

    ![在此处输入图像描述](../Images/50d8c363f27badd1f0aa5ff9b883c7e0.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-25T22:03:12.390

按照你的线索，我能做的最好的事情是：

```
qplot(data = h.melt, x = value,y = Var2)+ geom_point(shape=1, size=5) 
```

但它仍然不能反映概率；这些点应堆叠为一种直方图以反映概率。

另一种方法是使用密度函数，但如果我有许多样本类别要绘制出来，它可能会造成混乱。

```
ggplot(h.melt, aes(x=value, fill=Var2)) + geom_density(alpha=.5, position="identity") 
```

# css - 我的媒体查询在我的 Android 设备上不起作用

> ID：13554884
> 
> 赞同：4
> 
> 时间：2012-11-25T19:57:21.413
> 
> 标签：css, mobile, media-queries

当我重新调整大小时，我的媒体查询在 pc 浏览器中工作正常，但是当我使用我的 android 设备通过 localhost 访问我的网站时，我的媒体查询不起作用？问题可能是什么？我的设备具有 480 x 800 像素的分辨率。

这是我的媒体查询：

```
@media (max-width: 480px) {
#main{width:90%;position:relative;}
div.itemRelated ul li {float: left;width: 20%;}
div.itemRelated ul li a img{width:90%;}
div.itemRelated ul li a{text-align:center;}
.maincontent{width:90%;font-size:.7em;}
#base{width:100%;}
h2, h2 a:link, h2 a:visited{font-size:.7em;}
#container_header{width:96%;}
#container_slideshow{display:none;}
#container_main{width:90%;margin: 0 auto;}
.wrapper960{margin:0 auto;}/*ova treba da se cepne*/
#sidecol_b, #sidecol_a{display:none;}
#content_remainder{width:96%;clear:both;top:0;}
#container_bottom_modules{display:none;}
#container_spacer3{display:none;}
#jazik{float:left;}
.sigProContainer sigProClassic sigProClassic{margin-left:10%;}
#hornav{padding-left:5px;}
#hornav ul li a{font-size:1em;padding: 0 5px;width:8%}
#container_header{width:100%;}
#socialmedia{display:none;}
#search {clear:both;top: 20%;left: 15%;}
.content{width:66%;}
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-25T20:00:49.350

Android 设备的宽度通常不是实际的屏幕尺寸。如果你想拥有屏幕的宽度，你需要一个视口元标记。

```
 <meta id="viewport" name="viewport" content ="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

在您的 HTML 中使用此元标记

**更新：**

上面的代码还禁用了缩放（缩放），这对用户来说不是很好。因此，您可以在不禁用缩放的情况下做到这一点：

```
<meta id="viewport" name="viewport" content ="width=device-width" /> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-25T20:00:56.480

如果您专门针对 android 设备或任何设备，请`480x800`尝试此操作

```
@media only screen and (min-device-width: 480px) {
  /* Style goes here */
} 
```

一篇不错的[**文章**](http://webdesignerwall.com/tutorials/css3-media-queries)，如果你喜欢阅读

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-25T20:11:26.330

我遇到了围绕众多 Android 设备屏幕宽度和屏幕密度的类似问题。

最后我确定了这个媒体查询：

```
@media only screen and (max-width: 765px) {
    /* Style goes here */
} 
```

但[这里](http://nmsdvid.com/snippets/)有一个方便的网站，提供更多设备和方向特定的媒体查询

# spotify - CocoaLibSpotify 无法在 XCode 4.6 / iOS 6.1 中编译

> ID：13554891
> 
> 赞同：2
> 
> 时间：2012-11-25T19:57:58.910
> 
> 标签：spotify, cocoalibspotify-2.0

CocoaLibSpotify 在 XCode 6.5 Preview 2 / iOS 6.1 SDK 中编译失败，出现以下错误：

> /LibSpotify/spotify-cocoalibspotify-a6c2579/iOS Library/../common/SPImage.m:55:65: 错误：强属性“会话”也可能不会被声明 __unsafe_unretained @property (nonatomic, readwrite) __unsafe_unretained SPSession *session; ^ 1 个错误生成。

有安全的解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T11:03:20.737

对此很抱歉——我刚刚将一个修复推送到`dev`GitHub 上的 CocoaLibSpotify 存储库的分支。

解决方法`assign`是删除`session`.`SPImage.h`

# visual-studio-2010 - 密码似乎不能保护 pfx 文件

> ID：13554892
> 
> 赞同：0
> 
> 时间：2012-11-25T19:58:14.200
> 
> 标签：visual-studio-2010, visual-studio, security, deployment, assembly-signing

我使用 Visual Studio (2010) 的自动“新”选项创建了一个用于签署程序集的新 pfx 文件。然后我将它复制到另一个项目 - 它不会提示我输入密码。我检查了，程序集*已*签名。

因此，似乎任何拥有该文件的人都可以使用它签署程序集。或者有没有办法保护它？

# sql - 每个组的 MAX 的 SQL

> ID：13554897
> 
> 赞同：0
> 
> 时间：2012-11-25T19:59:06.353
> 
> 标签：sql, ms-access, group-by, max, correlated-subquery

我有 4 张桌子。我试图为每个汽车品牌获得最大价值。有10个品牌。我试图找出每个品牌最贵的车。

我做的第一件事是将所有我想从中获取信息的表格分组。我已经加入了 BRAND、MODEL、CLASS 和 VEH 表。但是，我不确定如何获得每个组的最大值。

```
SELECT B.BRAND_NAME, M.MODEL_NAME, C.CLASS_NAME, V.VEH_YEAR,  V.VEH_PRICE

FROM ((VEHICLE V INNER JOIN CLASS C ON V.CLASS_ID = C.CLASS_ID)
INNER JOIN MODEL M ON M.MODEL_ID = V.MODEL_ID)
INNER JOIN BRAND B ON B.BRAND_ID = M.BRAND_ID 
```

![在此处输入图像描述](../Images/106a841157c4e55a98e47cad20383bc1.png)

我试过：

```
SELECT B.BRAND_NAME, M.MODEL_NAME, C.CLASS_NAME, V.VEH_YEAR,  V.VEH_PRICE
FROM (
SELECT B.BRAND_NAME, MAX(V.VEH_PRICE)
FROM ((VEHICLE V INNER JOIN CLASS C ON V.CLASS_ID = C.CLASS_ID)
INNER JOIN MODEL M ON M.MODEL_ID = V.MODEL_ID)
INNER JOIN BRAND B ON B.BRAND_ID = M.BRAND_ID
GROUP BY B.BRAND_NAME
); 
```

我越来越：![在此处输入图像描述](../Images/6a86e3507edd43396ee9343a8e2c20c4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:27:00.910

如果您只想要每个品牌的最高车辆价格，您的加入会很好。它只需要一个`GROUP BY`和`MAX()`函数（注意你不需要这个`Class`表）：

```
SELECT B.BRAND_NAME, 
       MAX(V.VEH_PRICE) AS MAX_VEH_PRICE

FROM ( VEHICLE V
  INNER JOIN MODEL M ON M.MODEL_ID = V.MODEL_ID )
  INNER JOIN BRAND B ON B.BRAND_ID = M.BRAND_ID

GROUP BY B.BRAND_ID, B.BRAND_NAME ; 
```

要获取具有最高价格的车辆的所有车辆数据，您需要在子查询（派生表）中编写上一个查询，然后再次连接：

```
SELECT B.BRAND_NAME, M.MODEL_NAME, C.CLASS_NAME, V.VEH_YEAR,  V.VEH_PRICE

FROM  
    ( ((VEHICLE V INNER JOIN CLASS C ON V.CLASS_ID = C.CLASS_ID)
      INNER JOIN MODEL M ON M.MODEL_ID = V.MODEL_ID)
      INNER JOIN BRAND B ON B.BRAND_ID = M.BRAND_ID
    )

  INNER JOIN

    ( SELECT M.BRAND_ID, 
             MAX(V.VEH_PRICE) AS VEH_PRICE  
      FROM (VEHICLE V
        INNER JOIN MODEL M ON M.MODEL_ID = V.MODEL_ID)
      GROUP BY M.BRAND_ID 
    ) AS derived

    ON  b.BRAND_ID = derived.BRAND_ID
    AND v.VEH_PRICE = derived.VEH_PRICE ; 
```

# raspberry-pi - 在 Raspberry PI 上开发 Acorn RISC OS

> ID：13554901
> 
> 赞同：4
> 
> 时间：2012-11-25T19:59:22.907
> 
> 标签：raspberry-pi, charm

任何人都可以建议或推荐用于在 Raspberry PI 上的 Acorn RISC OS 上编写图形应用程序的开发工具或文档吗？Raspberry PI 计算机新支持此操作系统，我希望能够为该操作系统编写图形应用程序。然而，鉴于 RISC OS 的悠久历史、操作系统的（多个）不兼容版本以及 PI 上的 RISC OS 资源相对较少，很难确定 PI 版本的工作工具。

捆绑在官方 RISC OS SD 卡映像上的一组开发工具是[Charm](http://riscos-charm.yolasite.com/)高级编程语言。

还有一个可用的[Lua](http://www.wra1th.plus.com/lua/risclua.html)脚本语言实现，带有与 WIMP GUI 环境集成的扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:56:30.150

[RISC OS 程序员参考手册](http://www.riscosopen.org/wiki/documentation/show/Programmer%27s%20Reference%20Manuals)提供了可用 SWI (API) 的详细信息。

如果您对使用内置的 BBC BASIC 和/或 ARM 汇编程序感到满意，请打开您选择的文本编辑器（我以前喜欢[Zap](http://www.tankstage.co.uk/Software/)），然后只需 Google 搜索**BBC BASIC wimp**并选择一个教程，例如 [WIMP 编程初学者指南](http://www.apdl.co.uk/riscworld/volume9/issue6/wimpprog/index.htm)或[Wimp 编程RISC 操作系统](http://acorn.revivalteam.de/Emu/Wimp%20Tutorial.htm)

如果你想玩 BBC Basic 或 ARM 汇编器以外的东西，RISC OS 会公开[出售](http://www.riscosopen.org/content/sales)带有各种编译器和一组 DDE（桌面开发环境）工具的 U 盘，我认为这些工具与 PI 兼容。不幸的是，少数基于 GUI 的高级开发工具，例如 Helix Basic，无法在 PI 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T12:09:08.187

[Bruce Smith揭示的 Raspberry Pi RISC OS 系统编程](http://www.amazon.co.uk/Raspberry-RISC-System-Programming-Revealed/dp/099239161X/ref=sr_1_1?ie=UTF8&qid=1386590545&sr=8-1&keywords=RISC%20OS)看起来不错，涵盖了 BBC BASIC、ARM 汇编和一些 C。它包括一些 WIMP 开发。

此外，请查看 Raspberry Pi RISC OS 版本上的 Documents 文件夹。应该有一个与编程有关的子文件夹，其中包含对 BBC BASIC 的介绍和上面@arober11 的回答中提到的开发人员对 WIMP 编程的指南。我认为还包括几个示例程序。

# c++ - C++ 中没有 CImage 的 HBITMAP 到 JPEG/PNG

> ID：13554905
> 
> 赞同：2
> 
> 时间：2012-11-25T19:59:48.357
> 
> 标签：c++, png, jpeg, hbitmap

我有一个要保存到 JPEG/PNG 流或字节数组中的 HBITMAP。问题是我使用 mingw 作为我的编译器，所以我不能使用 CImage.. 这会让我的生活更轻松。

我可以毫无问题地从位图中获取像素，但我不知道如何以 JPEG/PNG 格式访问它们。

我从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:30:26.833

如果您可以访问 DirectX 库，则可以使用 IStream 将图像转换为 JPEG [http://msdn.microsoft.com/en-us/library/windows/desktop/aa380034(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380034(v=vs.85).aspx)

或者如果你有 GDI+ 这样的东西可能会工作

```
Gdiplus::Bitmap bmp(hbmpImage,(HPALETTE)0);
CLSID pngClsid;
GetEncoderClsid(L"image/png", &pngClsid);
bmp.Save(L"D:\image.png",&pngClsid,NULL); 
```

GetEncoderLCLsid 如下所示：

```
int GetEncoderClsid(const WCHAR* format, CLSID* pClsid)
{
   UINT  num = 0;          // number of image encoders
   UINT  size = 0;         // size of the image encoder array in bytes

   ImageCodecInfo* pImageCodecInfo = NULL;

   GetImageEncodersSize(&num, &size);
   if(size == 0)
      return -1;  // Failure

   pImageCodecInfo = (ImageCodecInfo*)(malloc(size));
   if(pImageCodecInfo == NULL)
      return -1;  // Failure

   GetImageEncoders(num, size, pImageCodecInfo);

   for(UINT j = 0; j < num; ++j)
   {
      if( wcscmp(pImageCodecInfo[j].MimeType, format) == 0 )
      {
         *pClsid = pImageCodecInfo[j].Clsid;
         free(pImageCodecInfo);
         return j;  // Success
      }    
   }

   free(pImageCodecInfo);
   return -1;  // Failure
} 
```

不要忘记初始化 GDI+

```
 GdiplusStartupInput gdiplusStartupInput;
   ULONG_PTR gdiplusToken;
   GdiplusStartup(&gdiplusToken, &gdiplusStartupInput, NULL); 
```

如果您无法访问其中任何一个，您可以使用 libjpeg，但您需要从 GnuWin32 站点放置所有依赖包。此页面中的代码应该运行得更快，只需忘记提升

[libjpeg 在没有消息的情况下死亡](https://stackoverflow.com/questions/10470251/libjpeg-dying-without-message)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-19T18:32:22.460

另一种选择是使用[WIC API](https://msdn.microsoft.com/en-us/library/windows/desktop/ee719655(v=vs.85).aspx)（Windows 成像组件），它可以直接访问图像编码器和解码器。我相信 GDI+ 可能会在幕后使用它。

# django - Django 教程：模板和视图

> ID：13554909
> 
> 赞同：0
> 
> 时间：2012-11-25T20:00:21.840
> 
> 标签：django, django-templates, django-views

我正在完成官方的 Django 教程，我被困在第 3 部分。由于第 2 部分的最后部分也使用了模板，我将描述我所做的：

第 2 部分告诉我“将模板 admin/base_site.html 从 Django 本身的源代码 (django/contrib/admin/templates) 的默认 Django 管理模板目录中复制到您正在使用的任何目录的管理子目录中TEMPLATE_DIRS。”

所以我创建了一个新目录“admin”，它具有以下相对路径（请注意，Django 使用目录名称“mysite”，我使用“django_test”：/django_test/polls/templates/admin。我复制了 base_site.html 文件进入这个目录。

当我在本地浏览器中呈现文件时，它说：`{% extends "admin/base.html" %} {% load i18n %} {% block title %}{{ title }} | {% trans 'Django site admin' %}{% endblock %} {% block branding %}{% trans 'Django administration' %}{% endblock %} {% block nav-global %}{% endblock %}`

第 3 部分让我在新的子目录 polls/index.html 中创建一个 index.html 文件。但是当我在我的网络浏览器（使用本地主机服务器）中加载这个文件时，我只看到了 html 代码而不是项目符号列表（见下文）。

请注意，我还在我的 settings.py 文件中编辑了 TEMPLATE_DIRS 以告诉 Django 它可以在 /Users/myname/Sites/django_test/django_test/templates 下找到 index.html

下面我将粘贴我的本地服务器呈现的代码（而不是我想要的项目符号列表）。你知道为什么要呈现这段代码，而不是项目符号列表吗？

```
<html>
<head><title>Test</title></head>

<body>
{% if latest_poll_list %}
    <ul>
    {% for poll in latest_poll_list %}
        <li><a href="/polls/{{ poll.id }}/">{{ poll.question }}</a></li>
    {% endfor %}
    </ul>
{% else %}
    <p>No polls are available.</p>
{% endif %}

</body>
</html> 
```

我不知道我在组织文件方面是否犯了错误。可能有人知道我做错了什么？

![文件](../Images/b66efcd575ad67e9de3c55a502c1893e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:46:32.420

正如您在评论中所说，您将文件路径放入浏览器中。然后，您自然会看到模板的文本，因为您完全绕过 Django 并让浏览器从磁盘加载未渲染的模板。

正如本教程所述，您需要让 Django 通过其正常的 URL 机制提供模板并呈现它。在该部分的前面部分，您`localhost:8000/admin/`访问了管理站点 - 这并没有因为您替换了模板而改变。返回该地址，您将看到更新和渲染的模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:13:27.253

一旦你掌握了它的窍门，django 管理站点就很容易了。

采取的步骤是：

-在你的 urls.py 中取消注释 django 管理站点

- 通过将 admin 文件夹（在 django 包内）复制到 settings.py 中 STATIC_ROOT 中指定的文件夹中或在 PYTHONPATH 上提供目录，使 css 可用于管理站点

换句话说，您不需要为管理站点创建模板。但是，您需要创建模板来访问您在项目中创建的视图

# c++ - u'\U0001ABCD' 有实现定义的值还是格式错误？

> ID：13554914
> 
> 赞同：3
> 
> 时间：2012-11-25T20:00:34.427
> 
> 标签：c++, character-encoding, c++11, standards, literals

`char16_t`该标准似乎对包含无法表示的字符的文字有两种不同的响应`char16_t`。首先，如果代码点值不能用 16 位表示（即它不在基本多语言平面 (BMP) 中），则程序格式错误（第 2.14.3/2 节）：

> `char16_t`包含单个*c-char*的文字的值等于其 ISO 10646 代码点值，前提是该代码点可以用单个 16 位代码单元表示。（也就是说，只要它是一个基本的多语言平面代码点。）如果该值不能在 16 位内表示，则程序格式错误。

由于`\U0001ABCD`是单个*c-char* ¹但不在 BMP 中，因此包含它的程序格式错误。

好的，但稍后在同一章中，它说如果值超出实现定义的范围，`char16_t`则文字具有实现定义的值（第 2.14.3/4 节）：

> 如果字符文字的值超出为 [...] 定义的实现定义的范围`char16_t`（对于以 '<code>u' 为前缀的文字）[...] ，则它的值是实现定义的

由于实现定义的范围`char16_t`必须至少为 16 位（以便能够存储整个 BMP），我们已经知道该程序对于超出该范围的值是非良构的。为什么标准会费心给它一个实现定义的值？

¹产生规则是*c-char* -> *universal-character-name* -> `\U` *hex-quad* *hex-quad*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:09:11.087

根据 2.14.3/2，该程序格式错误，这意味着必须诊断错误。无需进一步分析，因为完成编译或生成可执行文件不需要实现。文字可能被认为仍然具有价值，但这并不重要。

（尽管允许实现编译和执行格式错误的程序。所以我想在这种情况下，字符文字仍然被指定为具有值的事实很重要。）

# styles - 如何从 GAS 中的对象中删除样式属性

> ID：13554917
> 
> 赞同：0
> 
> 时间：2012-11-25T20:00:50.980
> 
> 标签：styles, google-apps-script

有什么方法可以从一些 html 元素中删除样式属性？

例如，我创建了文本框，并在 onSubmit() 中检查了它的值。如果它的值错误，我将其背景颜色更改为红色。如果我在用户提交正确的值后将其值更改为白色，它看起来与未更改的文本框不同。

我尝试了函数`setStyleAttribute("backgroundColor", "")`，但它抛出了一个错误，`setStyleAttribute("backgroundColor", "none")`但它没有改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T22:23:48.570

您可以尝试“透明”或“继承”

[http://www.w3schools.com/jsref/prop_style_backgroundcolor.asp](http://www.w3schools.com/jsref/prop_style_backgroundcolor.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T22:27:01.820

您是否尝试过`.setStyleAttribute('background','transparent')`它应该导致与初始状态相同的状态......嗯，我认为;-)

* * *

**编辑：（**根据您的评论）

当您创建没有任何样式的小部件时，并不意味着它没有样式，而仅表示您使用的是“默认”样式。所以我想将一个值设置为默认值可能是正确的做法。

在背景颜色的示例中，默认值为“透明”，应用于文本框的结果是您所期望的，不是吗？

# php - 一次将两个表中的信息读取到两个表格中

> ID：13554920
> 
> 赞同：0
> 
> 时间：2012-11-25T20:00:56.490
> 
> 标签：php, mysql, sql, database, database-design

对于我的第一次编程尝试，我正在使用 php 和 MySQL 制作一个简单的 webapp，用于输入客户信息并存储有关订单的信息。

到目前为止，我已经制作了一个表格来输入客户信息，一个页面来编辑该信息，另一个页面来显示不同的客户，这一切都很好。

但是，在尝试实施下一阶段时，我遇到了麻烦。

我有一个包含 3 列的 editcustomers 页面。

*   第 1 列显示了一个包含客户信息的表单，允许对其进行编辑。
*   第 2 列允许订购产品并显示订购了多少产品
*   第 3 列显示到目前为止支付的总额和欠款总额。

我目前拥有的页面代码：

```
<html>
<?php
$id = $_GET['id'];
require_once('connect.php');
$sth = $dbh->query("SELECT * FROM customers where id = '$id'");
$sth->setFetchMode(PDO::FETCH_ASSOC);
?>

<div id="main">
    <div id="left">
    <form name="myForm" action ="process.php" method ="post" >
    <?php while($row = $sth->fetch()){ ?>
    <p><input type = "hidden" name ="id" value="<?php echo $row["id"] ?>"/>
    <p><input type = "text" name ="firstName" size ="30" value=" <?php echo $row["firstName"]?>"/>
    <p><input type = "text" name ="lastName" size ="30" value="<?php echo $row["lastName"]?>"/>
    <p></p>
    <input type="submit" value="Update" />
    <?php }?>
    </div>

    <div id="mid">
    <p>Amount owed<br />
    <input type = "text" name ="moneyOwed" size ="30" /></p>
    <input type="submit" value="Pay" /> 
    <p>Number of aaaa<br />
    <input type = "text" name ="numAaa" size ="30" /></p>
    <p>Number of bbbb<br />
    <input type = "text" name ="numBbb" size ="30" /></p>
    <p>
    <input type="submit" value="Update" />
    </div>

    <div id="right">
    <b>Total Balance</b>
    <p> Money owed: </p>
        <p> aaa total: </p>
    <p> bbb total: </p>
    <p> Total: </p>
    <input type = "text" name ="pay" size ="20" /></p>
    <input type="submit" value="Make Payment" />
    </div>
<?php
$dbh =null;
?>
</body>
</html> 
```

我有以下数据库结构：

*   客户表、名字、姓氏等基本信息以及 id 字段。
*   一个产品表，列出了不同的产品，只有 1 行包含每个产品的成本。
*   采购表，id 字段，numProductA、numProductB 等字段，显示订购的每个产品的数量

我遇到的问题是，在我的editcustomerspage 中，我有一个数据库查询来从customers 表中读取信息以填充我第一列中表单中的字段，如果选择了函数，还有一个单独的查询来更新它。

更新第二个表单应该没问题，因为我可以使用隐藏字段来区分表单，但是我不确定如何从客户表和购买表中读取信息，以便我可以在第二个表单中填充字段。

部分问题在于，如果给定客户尚未下订单，则购买表可能为空。

我正在考虑摆脱购买表，并将字段添加到用户表上，这将解决我的问题，尽管我认为这通常被认为是不好的做法？

产品将在应用程序中固定，不会更改。即便如此，将列名成本和名称以及每个产品作为记录仍然会更好吗？

我可以采取哪些方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:11:21.650

由于 numProductA、numProductB 列，即使您当前正在做的事情也被认为是不好的做法。当您有 1000 种产品并且用户从所有这些产品中订购不同数量的产品时会发生什么。仅当产品列表是固定的（即编码到应用程序中）并且需要大量编码时才有效。

您可能希望创建一个包含以下字段的 purchase_item 表：id、purchase_id、product_id、num_product。它就像标准账单上的一行：purchase_id 标识该行属于哪个账单；product_id 将显示该行的产品，num_product 将显示该行的数量（乘数）。

通过这种方式，您无需在将新产品添加到数据库时更改代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:21:01.930

如果没有详细描述您遇到的问题，很难说如何解决这些问题。应该可以使用所描述的设计来实现您想要的。但是，您似乎误解了关系数据库，这就是为什么您的数据库架构令人大跌眼镜的原因。

数据库表不是电子表格。虽然一个表可以有数百万行，但列数通常被限制为小得多。即使限制不是问题，关系数据库的设计方式也不能很好地跨大量列存储统一数据。例如，您的数据库将无法回答“什么是最畅销的产品”、“100 多个客户购买了哪些产品”等问题。

经验法则是每个表都应包含固定数量的列。如果您发现当您开始销售新产品时必须添加列，那么您做错了。

以下是您可能应该在您的应用程序中执行的操作：

*   `products`应该是一个表格，每个可用产品都有一行，包含每个产品的唯一值`id`、价格和其他信息，例如名称、制造商等。
*   `purchases`应该为客户订购产品的每个（客户，产品）组合包含一行。该行应包含客户 ID、产品 ID 和订购数量。

然后，您可以使用 SQL 轻松构建一个查询，生成特定客户订购的产品集。使用连接，可以使用产品名称和价格来增强此信息。

# android - udp android上的字符串

> ID：13554924
> 
> 赞同：0
> 
> 时间：2012-11-25T20:02:04.373
> 
> 标签：android, string, android-asynctask, udp, client

我可以在通过此代码编写的 c# UDP 服务器上接收数据，但我在 editText 框中键入的不是字符串……我在服务器上收到 android.widget.EditText@xxxxxx。一些帮助将不胜感激。

```
package com.winmote.pro;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketException;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

    private EditText editText1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button button1 = (Button) findViewById(R.id.button1);
        editText1 = (EditText) findViewById(R.id.editText1);
        button1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String cmd= editText1.toString();
                new nwcomm().execute(cmd);

            }
        });
    }

    private class nwcomm extends AsyncTask<String,Void,Void>{

        @Override
        protected Void doInBackground(String... text) {
            // TODO Auto-generated method stub

         String msg=text[0].toString();
                InetAddress to = null;
                try {
                    to = InetAddress.getByName("192.168.0.105");
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                int port=55505;
                DatagramSocket soc = null;
                try {
                    soc = new DatagramSocket();
                } catch (SocketException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                byte[] data = msg.getBytes();
                DatagramPacket pac = new DatagramPacket(data, data.length, to, port);
                try {
                    soc.send(pac);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:03:27.207

您需要询问 EditText 的*内容*，而不是变量的字符串表示形式...更改此行：

```
String cmd= editText1.toString(); 
```

到：

```
String cmd = editText1.getText().toString(); 
```

# logic - 8位加法器设计？链接两个 4 位加法器？

> ID：13554932
> 
> 赞同：0
> 
> 时间：2012-11-25T20:03:06.690
> 
> 标签：logic, 8-bit, gate

我创建了一个 4 位加法器设计，但我需要一个 8 位。我可以创建两个 4bit 并通过 AND 门将输出链接在一起吗？

我的 4 位加法器： [https ://www.dropbox.com/s/ao60s6dgtrnhal3/4bit%20adder.PNG](https://www.dropbox.com/s/ao60s6dgtrnhal3/4bit%20adder.PNG)

# java - 根据用户触摸绘制多条路径

> ID：13554938
> 
> 赞同：0
> 
> 时间：2012-11-25T20:03:49.480
> 
> 标签：java, android, layout, draw, touch-event

因此，我正在尝试跟随用户手指触摸的“绘画”路径。我首先提到了[这个教程](http://marakana.com/tutorials/android/2d-graphics-example.html)，它工作但有一个明显的问题，它不会连接触摸点。所以，我发现[这个问题](https://stackoverflow.com/questions/8287949/android-how-to-draw-a-smooth-line-following-your-finger)直接提到了相同的教程和问题。我在处理三次样条的部分使用了 johncarl 的解决方案，发现它非常有用。但是，我注意到，当您将手指从屏幕上移开（ACTION_UP）然后再将其放回原位（ACTION_DOWN）时，它会将最后一个点连接到这个新点并稍微改变路径。

现在，我的问题是，一旦用户移开手指并将其放回屏幕上，您将如何开始新路径？我的意思是新点不会连接到最后一个点。

我已经尝试了一些东西，我最新的尝试是这样的：

```
 else if (event.getAction() == MotionEvent.ACTION_UP){
        for (int i = 0; i <= points.size() - 1; i++){
            points.remove(i);
        }
    } 
```

上面的代码是 onTouch() 方法中 if 语句的附加代码。不过，这似乎并没有多大作用。如果您能提供任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:32:39.717

经过一段时间的反复试验，我发现了如何开始一条“新”路径。事实上，我可以使用相同的路径。我放在问题中的代码只会删除 arraylist 中的所有值（我认为这是开始新路径的第一步）。虽然，出于某种原因，它甚至没有这样做。然而，我发现确实有效，只是使用 clear() 方法，如下所示：

```
points.clear(); 
```

虽然，正如我发现的那样，这并不能解决我的问题。它只删除先前绘制的路径。我需要做的是使用 moveTo() 方法，该方法将允许路径中断，创建看起来好像有多个路径。因此，每次我将手指从屏幕上移开 (ACTION_UP) 时，我都会将“points”数组列表的大小作为一个值添加到另一个数组列表中：

```
startValues.add(points.size()); 
```

这将为我提供调用 moveTo() 方法的索引值。现在，在 onDraw() 方法中，我添加了以下代码（查看我要求查看我正在使用的所有代码的问题中的链接）：

```
 boolean first = true;
    for(int i = 0; i < points.size(); i++){
        Point point = points.get(i);

        for (int index = 0; index <= startValues.size() - 1; index++){
            if (i == startValues.get(index)){
                lineChange = true;
                endNumber = (startValues.get(index) - 1);
                break;
            }
        }

        if(first || lineChange){
            first = false;
            lineChange = false;
            path.moveTo(point.x, point.y);
        }else{
            Point prev = points.get(i - 1);
            path.cubicTo(prev.x + prev.dx, prev.y + prev.dy, point.x - point.dx, point.y - point.dy, point.x, point.y);
        }

    }

    canvas.drawPath(path, paint); 
```

这样，在第一个点之前的路径中以及从我从屏幕上抬起手指的每个点上都会有中断，直到我再次将其放回原位。这解决了我在问这个问题时遇到的最初问题，但它导致了其他一些问题。例如，当我的手指更换到屏幕上时，一条线的起点和终点会发生变化。如果我自己找不到解决方案，我会在另一个问题中问这个问题。我希望这对面临类似问题的人有用！

# ios - 在 coredata 中存储 NSdate 时出错

> ID：13554944
> 
> 赞同：0
> 
> 时间：2012-11-25T20:04:21.873
> 
> 标签：ios, core-data, nsdate

我想将当前日期存储到核心数据中。该实体称为 Emotions，具有多个属性 (float) 和一个名为 timeStamp(Date) 的属性。浮动属性没有任何问题。但是当我尝试像这样存储日期时：

```
emotionAppDelegate * appDelegate = [[UIApplication sharedApplication] delegate];
NSManagedObjectContext *emotion =
[appDelegate managedObjectContext];
NSManagedObject *newEmotions;
newEmotions = [NSEntityDescription
              insertNewObjectForEntityForName:@"Emotions"
              inManagedObjectContext:emotion];
[newEmotions setValue:[NSData data] forKey:@"timeStamp"]; 
```

我收到一个错误：

```
2012-11-25 21:03:09.130 silder[4634:c07] Unresolved error Error Domain=NSCocoaErrorDomain Code=134100 "The operation couldn’t be completed. (Cocoa error 134100.)" UserInfo=0x8174b20 {metadata={
NSPersistenceFrameworkVersion = 419;
NSStoreModelVersionHashes =     {
    Emotions = <c8b9e393 5624a477 dee1958e 19dd1209 acb67cd9 56daefea dbf8bfc9 daa8e34d>;
};
NSStoreModelVersionHashesVersion = 3;
NSStoreModelVersionIdentifiers =     (
    ""
);
NSStoreType = SQLite;
NSStoreUUID = "5CE10BB2-A77A-4E8B-AAE6-5973000DFADA";
"_NSAutoVacuumLevel" = 2; 
```

}, reason=开店的模型和开店的模型不兼容}, { metadata = { NSPersistenceFrameworkVersion = 419; NSStoreModelVersionHashes = { 情绪 = ; }; NSStoreModelVersionHashesVersion = 3; NSStoreModelVersionIdentifiers = ( "" ); NSStoreType = SQLite；NSStoreUUID = "5CE10BB2-A77A-4E8B-AAE6-5973000DFADA"; "_NSAutoVacuumLevel" = 2; }; reason = "开店的型号和开店的型号不兼容"; }

谁能帮我？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:06:17.170

您以某种方式更改了数据库模型，尝试重置您的模拟器并再次运行应用程序

# ios - UITapGestureRecognizer 在 iPad 上横向失败

> ID：13554947
> 
> 赞同：1
> 
> 时间：2012-11-25T20:04:46.840
> 
> 标签：ios, ipad, ios6, landscape, uitapgesturerecognizer

我正在开发一个具有`UITapGestureRecognizer`. 我注意到当我在 iPad 上尝试时，无法识别水龙头。在我使用 1x/2x 按钮缩放应用程序后，水龙头开始工作。我究竟做错了什么？

我已将其缩小到一个非常小的样本。我从 XCode“单一视图应用程序”开始，以下是`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    info = [[UILabel alloc] initWithFrame:CGRectMake(100, 100, 200, 20)];
    [self.view addSubview:info];

    tapper = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [self.view addGestureRecognizer:tapper];
} 
```

到目前为止，这是我所知道的：

*   适用于 iPhone 大小的屏幕。
*   在 iPad 上*纵向*工作。
*   *在 iPad 上横向*失败，直到视图以 1x/2x 缩放，然后它开始工作（并在缩放回原始缩放级别后继续工作）。
*   与 iPad 模拟器表现出相同的行为。

完整的代码位于[GitHub 存储库](https://github.com/ghewgill/TapTest)中，因此您可以查看整个内容或尝试一下。XCode 4.5.1、iPad 视网膜、iOS 6.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:05:20.607

我发现如果我删除应用程序 plist 中“支持的界面方向”下的所有条目，这个问题就会消失。或者，如果您在目标设置的摘要屏幕上选中“状态栏”设置的“应用程序启动期间隐藏”选项，这也可以修复它：

![在应用程序启动期间隐藏](../Images/0ed368d66484b7c4921efeea20b644ce.png)

没有合乎逻辑的理由我可以看到这些选项中的任何一个都*应该*修复这个错误，但它们都可以。

显然，如果您确实使用“支持的界面方向”选项，在 iOS 6 中，您仍然可以通过[`supportedInterfaceOrientations`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)（[`shouldAutorotateToInterfaceOrientation:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation:)在 iOS 5 中）以编程方式控制允许的方向。

# android - 活动在应用程序中加载缓慢

> ID：13554951
> 
> 赞同：0
> 
> 时间：2012-11-25T20:05:32.637
> 
> 标签：android, android-layout, android-intent

我创建了一个应用程序，它提供了关于各种主题和内容的大量信息。我的应用程序有很多图像，所有图像都在 200 到 290KB (jpg) 之间。我有一个带有 Imagebuttons 的滑动抽屉（大约 41 个 ImageButons）。使用这些 ImageButtons 选择类别（例如从主菜单到信息 Activity）时，加载大约需要 2 秒。但是，选择imageButton时，它几乎立即显示图像。有没有办法加快从主菜单到信息活动的加载过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:08:38.840

> 大约 41 个 ImageButton

你**真的**需要**41 个图像按钮**吗？它不能更智能吗（例如具有与背景相同的可绘制对象的常规按钮，因此它看起来像图像按钮，并且不需要也不需要打开、解码和使用 41 个图像？也使用 PNG 代替 JPEG 可以改善这一点。但在一般，重新考虑你的用户界面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T20:46:07.403

一个问题：你的滑动抽屉是做什么用的？一次可以看到多少个按钮？如果您一次只显示几个并通过“从右到左”滑动浏览所有其他内容，那么您真的应该使用`ViewPager`（我认为是在 api-level 13 中引入的，并且可以通过上述每个 api-level 的支持库获得4）。

它的作用：它只加载可见的 ImageButtons（很像 a`ListView`所做的），因此不需要具有 41 个 ImageButtons 的布局。您只需设计一个`Fragment`动态获取不同图像按钮的方法。查看文档以获取更多信息：[链接](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T20:24:17.200

您必须异步加载图像：界面会立即加载，但图像处理任务是并行完成的，并且您的图像将逐步显示。

基本上，您必须使用`AsyncTask`. 开发人员门户提供了一个很棒的教程，其中包含可下载和可用的代码示例。 [http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

# android - 替换sql数据库但保留旧记录

> ID：13554959
> 
> 赞同：0
> 
> 时间：2012-11-25T20:06:25.843
> 
> 标签：android, sql, upgrade

经过大量工作，我设法构建了我的第一个应用程序，但我坚持一个问题。对于我的应用程序，我使用的是 sql 数据库。假设我想将 30 条记录添加到某个表中。怎么可能当我在android市场上放一个新版本并带有一个新的sql表以供将来使用，但要保留以前数据库的记录？

它是否与以下内容有关：

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    } 
```

编辑

我的数据库助手代码：

```
 public class DataBaseHelper extends SQLiteOpenHelper {

    private static String DB_PATH = "/data/data/com.test.com/databases/";
    private static String DB_NAME = "quizDb";
    private SQLiteDatabase myDataBase;
    private final Context myContext;
    private Cursor c;
    static int numberOfLevels = 10;
    private final static int DB_VERSION = 2; // = until level 10

    /**
     * Constructor Takes and keeps a reference of the passed context in order to
     * access to the application assets and resources.
     * 
     * @param context
     */
    public DataBaseHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.myContext = context;

    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void createDataBase() throws IOException {

        boolean dbExist = checkDataBase();
        if (!dbExist) {
            // By calling this method and empty database will be created into
            // the default system path
            // of your application so we are gonna be able to overwrite that
            // database with our database.
            this.getReadableDatabase();

            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {
        File dbFile = new File(DB_PATH + DB_NAME);
        return dbFile.exists();
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException {
        // Open the database
        String myPath = DB_PATH + DB_NAME;

        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    }

    @Override
    public synchronized void close() {
        if (c != null)
            c.close();
        if (myDataBase != null)
            myDataBase.close();

        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    public File getDatabasePath(String name) {

        File file = myContext.getDatabasePath(name);

        return file;
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("ATTACH DATABASE ? as AttachedDB",
                new String[] { getDatabasePath("quizDbNew").getPath() });
        db.execSQL("INSERT OR IGNORE INTO questions (_id, file, answer, level) SELECT _id, file, answer, level FROM AttachedDB.questions");
        db.execSQL("DETACH AttachedDB");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:15:36.877

使用`"DROP TABLE"`in的概念`onUpgrade()`与数据库管理一样原始，但是更有用的技术需要更多的 SQL 知识。通过使用[`"ALTER TABLE"`](http://www.sqlite.org/lang_altertable.html)添加新列或以其他方式将旧数据整理到新架构中来升级数据库的更智能方法。

* * *

**在您所说的评论中添加**
以下内容（或多或少）：

> 我想将我的 Db v1 备份文件中的内容复制到我当前的 Db v2

所以让我们建立几个假设的表格：

*   数据库版本一 (DBv1)：

    ```
    CREATE TABLE Foo(_id INTEGER PRIMARY KEY, bar TEXT, bar2 TEXT, bar3 TEXT); 
    ```

*   数据库版本 2 (DBv2)：

    ```
    CREATE TABLE Foo(_id INTEGER PRIMARY KEY, bar2 TEXT, bar4 INTEGER); 
    ```

首先让我们看看从 DBv1 到 DBv2 的定期升级。SQLite 仅支持`ADD COLUMN`and `RENAME TO`，不支持`REMOVE COLUMN`或其他任何东西。所以我们必须重新创建整个表：

```
@Override  // DBv1 => DBv2
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("ALTER TABLE Foo RENAME TO OldFoo");
    db.execSQL("CREATE TABLE Foo(_id INTEGER PRIMARY KEY, bar2 TEXT, bar4 INTEGER)");
    db.execSQL("INSERT INTO Foo (_id, bar) SELECT _id, bar2 FROM OldFoo");
    db.execSQL("DROP TABLE OldFoo");
} 
```

这再次使用 DBv2 的模式创建了一个表，并通过将适当的列插入 DBv2 来保留 DBv1 中所有有效的现有数据。（然后它通过删除旧表来删除旧数据。）

您已经明智地选择在一个单独的文件中随着时间的推移备份您的数据库，但现在您希望将旧数据带入新的表模式。首先确保您的备份 SQLite 文件与您当前的 SQLite 文件 ( `data/data/<reverse.package.name>/databases/`) 位于同一目录中。它显然需要一个唯一的名称，我们称之为`DBBackup`。现在让我们附加`DBBackup`到您当前的数据库并从上面执行类似的操作：

```
// DBBackupv1 => DBv2
public void restore(SQLiteDatabase db) {
    db.execSQL("ATTACH DATABASE ? as AttachedDB", new String[] {getDatabasePath("DBBackup").getPath()});
    db.execSQL("INSERT OR IGNORE INTO Foo (_id, bar2) SELECT _id, bar2 FROM AttachedDB.Foo");
    db.execSQL("DETACH AttachedDB");
} 
```

我曾经`INSERT OR IGNORE`恢复任何已删除但保持当前现有行不变的行。您可以使用`INSERT OR REPLACE`恢复到备份版本。还有更多选项可以满足您的需求。

# android - 如何停止在谷歌地图上滚动？

> ID：13554961
> 
> 赞同：0
> 
> 时间：2012-11-25T20:06:29.870
> 
> 标签：android, google-maps

我编写了代码来停止在 android 中的地图上滚动。但是当 MotionEvent.ACTION_UP 发生时叠加。我该如何解决？或者我如何停止地图滚动？

```
 @Override
public boolean onTouch(View arg0, MotionEvent arg1) {

  if(arg1.getAction() == MotionEvent.ACTION_MOVE){
                    Drawable drawable = context.getResources().getDrawable(R.drawable.icon16);

                    // create and add an OverlayItem to the MyItemizedOverlay list
                    OverlayItem overlayItem = new OverlayItem(gPt, "", "");

                    itemizedOverlay = new MyItemizedOverlay(drawable,context);
                    itemizedOverlay.addOverlay(overlayItem);

                    // add the overlays to the map
                    mMapVw.getOverlays().clear();
                    mMapVw.getOverlays().add(itemizedOverlay);

                  return true;

            }
        }

        return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T20:42:47.543

调用`setClickable(false);`应禁用 MapView 的所有触摸事件。

# java - 如何在 Action 类之外从 Struts2 将错误消息发布到 HTML

> ID：13554962
> 
> 赞同：3
> 
> 时间：2012-11-25T20:06:38.257
> 
> 标签：java, spring, validation, jsp, struts2

我有一个注册程序。当我在数据库中插入一条记录时，我将实例化一个类并调用方法`insert()`。当我插入相同的记录时，当然会出现重复数据错误和大量错误消息。我想用`try`and捕捉它`catch`。我能做到。但是，我不知道如何向 JSP 显示消息。

我所了解的，在动作类中，`validate()`方法和方法`validation.xml`首先运行。调用这些方法后发生插入重复错误。

```
import com.opensymphony.xwork2.ActionSupport;
import lotmovement.business.crud.InsertUserProfile;
import lotmovement.business.entity.UserProfile;
import org.apache.commons.lang3.StringUtils;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class RegisterAction extends ActionSupport {

    private static String userId;
    private static String password;
    private static String firstName;
    private static String lastName;
    private static int securityLevel;

    @Override
     public String execute() {    
         ApplicationContext context = 
                 new ClassPathXmlApplicationContext("spring.xml");

          InsertUserProfile iup = 
                 (InsertUserProfile)context.getBean("insertuserprofile");
         iup.Insert();       

      return SUCCESS;
    } 
```

**这是我的插入用户配置文件方法**

```
 public void Insert() {          
    ApplicationContext context = new ClassPathXmlApplicationContext("spring.xml");
    UserProfile up = (UserProfile)context.getBean("userprofile");
    RegisterAction ra = (RegisterAction)context.getBean("registeraction");
    EntityStart es = (EntityStart)context.getBean("entitystart");

    es.StartDbaseConnection();

    up.setUserId(ra.getUserId());
    up.setFirstName(ra.getFirstName());
    up.setLastName(ra.getLastName());
    up.setPassword(ra.getPassword());
    up.setSecurityLevel(ra.getSecurityLevel());

    es.StartPopulateTransaction(up);

    es.CloseDbaseConnection();        
} 
```

**这是我的 JSP：**

```
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <link rel="stylesheet" type="text/css" href="CSS/register.css">
  <title>Register</title>
  <s:head />
</head>
<body>
<s:form method="POST" action="register" >
  </tr>
  <tr>
    <td colspan="2">
      <s:actionerror/>
      <s:fielderror/>
    </td>
  </tr>
  <s:textfield label="UserID"     key="userId" maxLength="20"/>
  <s:password label="Password"    key="password" maxLength="20"/>
  <s:password label="retype-Password"  key="retypepassword" maxLength="20"/>
  <s:textfield label="Firstname"  key="firstName" maxLength="20"/>
  <s:textfield label="Lastname"   key="lastName" maxLength="20"/>
  <s:textfield label="SecurityLevel" key="securityLevel" maxLength="20"/>
  <s:submit   value="Register"/>
</s:form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:31:09.050

有`addActionError`和`addFieldError`方法`ActionSupport`。您可以在方法中捕获任何错误`validate`。如果提交了错误的数据，则调用这些方法。一旦应用，请求将分派给`input`结果。在 JSP 中，您可以使用 `<s:actionerror`和`<s:fielderror`来显示您通过上述方法添加的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:47:17.167

试试这个：

1.定义自己的异常类

```
public class MyException extends Exception {} 
```

`insert`2.抛出这个异常，如果你的方法有异常

```
if(insertError){
    throw new MyExecption("your message");
} 
```

3.在动作类中，调用`insert method with try-catch block`

```
try{
    insert();
} catch(MyException me){
    addActionError(me.getMessage());
    return "anything_you_want";
} 
```

4.您可以使用在jsp中显示消息`<s:actionerror/>`

# c# - oop 接口、继承、基类、

> ID：13554964
> 
> 赞同：0
> 
> 时间：2012-11-25T20:06:55.873
> 
> 标签：c#, oop

我正在尝试根据实际示例学习接口和基类。假设我要抽象 Player 实体 On Player.cs 应该是分配了玩家的每项运动的所有通用属性和方法。所以，会有TeamSportPlayer、IndividualSportPlayer。同样，FootballPlayer 将派生自 TeamSportPlayer，TennisPlayer 将派生自 IndividualSportPlayer 等等。所有这些玩家都应该有权访问一流的 Player 及其属性。

希望我不会太混乱。

问题是：这是用 oop 抽象玩家表示的正确方法吗？

您将如何在这个实际示例中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:22:59.603

抽象类用于定义您永远不会拥有实例的对象。另一方面，接口用于定义对象的行为，并且接口独立于继承层次结构。

使用您的运动示例：

`Player.cs`可以是抽象类。它具有每个球员的姓名、年龄、地址等字段。但运动场上永远不会有“球员”，只有“足球运动员”或“篮球运动员”。而类`FootballPlayer.cs`又`BasketballPlayer.cs`继承自抽象类Player.cs。

另一方面，接口定义了类共享的一些常见行为。通常它用于定义其他类如何与它们交互。例如，如果您有一个名为 的类`TennisPlayer.cs`，`BasketballPlayer.cs`并且`FootballPlayer.cs`您可以有一个名为 的接口`IHasJerseyNumber.cs`。篮球和足球运动员有球衣号码，因此他们将继承`IHasJerseyNumber.cs`界面。网球运动员没有号码，他们不会继承接口。一个完全独立的类`Referee.cs`也可以实现接口，只要他也有一个球衣号码（在某些运动中可能）。

你可以在这里阅读更多：

[接口](https://stackoverflow.com/questions/2866987/what-is-the-definition-of-interface-in-object-oriented-programming)

[抽象类](https://stackoverflow.com/questions/1912475/what-is-an-abstract-class)

# python-3.x - 保存程序和加载正在使用的程序

> ID：13554966
> 
> 赞同：1
> 
> 时间：2012-11-25T20:06:59.783
> 
> 标签：python-3.x

我正在尝试创建一个程序，通过步行或跑步等方式使小人向前移动。我需要能够保存小人的状态并在任何给定时间加载它，但我不知道该怎么做。谁能帮我把球滚起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:32:07.427

您可能会将状态（字符的位置，也许是其他东西）存储在某种 Python 数据结构中。您可以创建一个文件来存储此信息。最明显的方法是：

1.  创建一个纯文本文件，其中包含重新创建状态所需的文本/数字。您需要对其进行解析以加载状态，但您可以选择您喜欢的任何文件格式。
2.  用于[`pickle`](http://docs.python.org/3/library/pickle.html)将 Python 对象直接转储到文件中。然后，您将使用它们来阅读它们`pickle.load`，而不必费心解析文件。

# php - 在 ajax 调用中使用 TCPDF 生成 PDF

> ID：13554972
> 
> 赞同：10
> 
> 时间：2012-11-25T20:07:26.493
> 
> 标签：php, ajax, tcpdf

我正在使用 TCPDF 类来生成 PDF。首先我以 json 格式（jquery）发送一些数据，然后我想用这些数据生成 PDF。

**你能告诉我我是否正确。**我应该生成 pdf，将其保存在服务器上，然后如果 ajax 调用返回成功，则将用户重定向到此 pdf。是好方法吗？

我有：

```
$.ajax({
    url: '/pdf/fiele_to_generate_pdf.php',
    type: 'POST',
    contentType: "application/json; charset=utf-8",
    data: $.toJSON(jsonObj),
    processData: false,
    dataType: 'html',    
    async: false,
    success: function(html) {
        window.location.href = '/pdf/example.pdf';      
    }
}); 
```

感谢您的任何建议。

编辑：所以我已经向服务器发送了一个通过 Ajax 制作 pdf 的请求，然后生成了 pdf 文件并保存在服务器上。然后我使用 window.location.href 将用户重定向到这个 pdf。一切正常，但我想避免在服务器上保存文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T20:08:28.313

好的，此脚本将保存文件并显示在浏览器中

诀窍在于使用带有“F”或“I”的输出方法：

```
$pdf->Output("your path", 'F');  //save pdf
$pdf->Output('file.pdf', 'I'); // show pdf 
```

* * *

## 代码

```
<?php
class PDF extends TCPDF {
    public function Header (){                       
         $this->SetFont('dejavusans', '', 14);
         $title = utf8_encode('title');
         $subtitle = utf8_encode('sub title');
         $this->SetHeaderMargin(40);            
         $this->Line(15,23,405,23);      
    }

    public function Footer() {
        $this->SetFont('dejavusans', '', 8);
        $this-> Cell (0, 5, 'Pag '.$this->getAliasNumPage().'/'.$this->getAliasNbPages(), 0, false, 'R', 0, '', 0, false, 'T', 'M');
    }   

    public static function makeHTML ($json){
        $html = '<table border="0.5" cellspacing="0" cellpadding="4">
        <tr>
            <th bgcolor="#DAB926" style="width:3%; text-align:left"><strong>you th</strong></th>      
        </tr>';
        for ($i=0; $i<count($json); $i++)
        {
            $a= $i+1; 
            $html .= '<tr>
                        <td style="width:15%; text-align:left">'.$json[$i]->Name.'</td>
                      </tr>';
        }   
        $html .= '</table>';
        return $html;           
    }   
}

function printReport ($json )
{
    set_time_limit(0);

    $pdf = new PDF("L", PDF_UNIT, "A3",true, 'UTF-8', false);

    $pdf->SetMargins (15, 27, 15, true);
    $pdf->SetFont('dejavusans', '', 8);
    $pdf->SetAutoPageBreak(TRUE,50);
    $pdf->AddPage();

    //create html
    $html = $pdf->makeHTML($json);  

    $pdf->writeHTML($html, false, false, false, false, '');

    if (!file_exists("your path"))
        mkdir("your path");

    $pdf->Output("your path", 'F');  //save pdf
    $pdf->Output('file.pdf', 'I'); // show pdf

    return true;
}

$json = json_decode("your json");
printReport($json);
?> 
```

# python - Python：解码 base64 编码的字符串

> ID：13554973
> 
> 赞同：5
> 
> 时间：2012-11-25T20:07:28.807
> 
> 标签：python, base64

我是 python 新手，对解码 base64 编码的 url 有疑问：

```
import base64
url64="aHR0cDovLzR1ZnJlZS50ay9tZWRpYTcyMzY0Ni9mdWVuZi8wMzYubXAzA"
finalUrl=base64.b64decode(url64) 
```

行不通！类型错误：不正确的填充

我还尝试添加所需的填充：

```
import base64
url64="aHR0cDovLzR1ZnJlZS50ay9tZWRpYTcyMzY0Ni9mdWVuZi8wMzYubXAzA"
finalUrl=base64.b64decode(url64 + '=' * (4 - len(url64) % 4)) 
```

但我仍然收到 TypeError: Incorrect padding

如果有人知道解决方案，那就太好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T20:10:48.807

看起来决赛`A`是多余的：

```
In [4]: base64.b64decode('aHR0cDovLzR1ZnJlZS50ay9tZWRpYTcyMzY0Ni9mdWVuZi8wMzYubXAz')
Out[4]: 'http://4ufree.tk/media723646/fuenf/036.mp3' 
```

# c - 为什么以下语句打印三次？

> ID：13554974
> 
> 赞同：1
> 
> 时间：2012-11-25T20:07:30.037
> 
> 标签：c, multithreading, fork

这是我的程序：

```
int main(int argc, char * argv[])
{
    pid_t child;
    int i=0;

    if( argc < 4 ){
        printf("Usage: %s <num_threads> <test_interval> <no_of_prints>\n", argv[0]);
        exit(1);
    }  

    // Some program logic goes here

    printf("context - switch \n\nPid\ttid\tNPid\tNtid\tJiffies\n\n");

    syscall(320);       

    child = fork();

    if(child == 0 ) { //in child
        fork();
        fork();
        process();
    }
    else    {
            wait(child);
            //Do some printing here 
    } 
```

我的输出有 3 个（有时是 2 个）打印的“上下文 - 切换”`printf`行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-25T20:09:15.630

这可能是因为`stdio`缓冲。简而言之，多个进程（父进程、子进程、孙子进程等）最终会使用相同的缓冲区，并且它们都会在死亡时将其写入屏幕。尝试：

```
printf("context - switch \n\nPid\ttid\tNPid\tNtid\tJiffies\n\n");
fflush(stdout); 
```

或者也许只是使用`write(2)`而不是`printf`.

# android - 将 Parse.com 中的数据加载到 ListView

> ID：13554976
> 
> 赞同：0
> 
> 时间：2012-11-25T20:07:35.590
> 
> 标签：android, listview, parse-platform

我一直在将 Parse.com 用于我在 android 上的照片共享应用程序，但在列表视图中显示图像和数据时遇到了一些问题。

基本上我想从 Parse.com 获取数据并将其显示在 listView 中。

在我的 MainActivity 中，我有方法 downloadContentForMainView() - 我在其中获取数据并将其插入到 HashMap 中 - 在获取所有数据后，我使用适配器在 listView 中显示数据。

这是我的代码：

```
private void downloadContentForMainView() throws ParseException
{
    ParseQuery query = new ParseQuery("PhotoUpload");
    query.whereEqualTo("User", username);
    query.findInBackground(new FindCallback() {
        public void done(List<ParseObject> content, ParseException pEx) {
            // TODO Auto-generated method stub
            if(pEx == null && content!=null)
            {
                if(!(content.isEmpty()))
                {
                        if((content!=null) && (!(content.isEmpty())))
                        {
                            for(ParseObject aParseObject : content)
                            {
                                ParseFile image = (ParseFile) aParseObject.get("photp");
                                image.getDataInBackground(new GetDataCallback() {

                                    @Override
                                    public void done(byte[] imageInBytes, ParseException pEx) {
                                        // TODO Auto-generated method stub
                                        bmp = BitmapFactory.decodeByteArray(imageInBytes, 0, imageInBytes.length);
                                    }
                                });

                                String objectId = aParseObject.getObjectId();
                                String date = aParseObject.getCreatedAt().toGMTString();
                                infoHashMap.put("objectId", objectId);
                                infoHashMap.put("Date", date);
                                infoHashMap.put("photo", bmp);

                            }
                        }
                        else
                        {
                            Toast toast2 = Toast.makeText(context,"Couldn't fetch data from server", Toast.LENGTH_LONG);
                            toast2.show();
                        }
                }
            }
        }
    });

    contentForList.add(infoHashMap);
    lazyAdapter = new LazyAdapter(this,contentForList);
    listView.setAdapter(lazyAdapter);

} 
```

从服务器获取所有数据后 - 我使用适配器在 listView 中显示数据 - 但我的活动仍然是黑色的。

有谁知道为什么？

**稍后更新：**

这是我的 LazyAdapter

```
public class LazyAdapter extends BaseAdapter{

private Activity activity;
private ArrayList<HashMap<String, Object>> contentList;
private static LayoutInflater inflater = null;  

public LazyAdapter(Activity a, ArrayList<HashMap<String, Object>> contentForList)
{
    this.activity=a;
    this.contentList=contentForList;
    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

public int getCount() {
    return contentList.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    ImageView logo = (ImageView)vi.findViewById(R.id.logo); // title
    TextView date = (TextView)vi.findViewById(R.id.label); // artist name

    HashMap<String, Object> info = new HashMap<String,Object>();
    info = contentList.get(position);
    String in =(String)info.get("Date");
    // Setting all values in listview
    date.setText(in);
    Bitmap bmp = (Bitmap) info.get("photo");
    logo.setImageBitmap(bmp);
    return vi;
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-23T18:40:43.650

抱歉迟到了，但我觉得这可能有用 -
[http://www.androidbegin.com/tutorial/android-parse-com-listview-images-and-texts-tutorial/](http://www.androidbegin.com/tutorial/android-parse-com-listview-images-and-texts-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T06:04:41.263

我认为你的适配器出了问题

```
public View getView(int position, View convertView, ViewGroup parent) {
View vi=convertView;
if(convertView==null)
    vi = inflater.inflate(R.layout.list_row, null);

ImageView logo = (ImageView)vi.findViewById(R.id.logo); // title
TextView date = (TextView)vi.findViewById(R.id.label); // artist name

HashMap<String, Object> info = new HashMap<String,Object>();
info = contentList.get(position);
String in =(String)info.get("Date");
// Setting all values in listview
date.setText(in);
Bitmap bmp = (Bitmap) info.get("photo");
logo.setImageBitmap(bmp);
return vi; 
```

}

您正在检查视图是否为空。请仔细检查。

# html - 更少的 mixin 或选择器来根据同级索引更改位置？

> ID：13554978
> 
> 赞同：8
> 
> 时间：2012-11-25T20:07:40.710
> 
> 标签：html, css, less

我正在尝试根据它们是哪个兄弟来调整几个兄弟 div 的位置。目前，它们都是`position: absolute`，但这并不是一成不变的。

它们每个都有几百像素高，但我希望它们相互重叠，以便后面的那些只能“窥视”前面的几个像素。我能想到的最简单的方法是为此使用 Less mixin `nth-of-type`，而不是仅将规则应用于匹配的一个索引，而是将索引传递给 mixin。基本上，我想要这个：

```
&:nth-of-type(@n) {
    top: @n * 20px;
} 
```

**编辑：**我目前在做什么：

```
&:nth-of-type(1) {
    .card_offset(1);
}
&:nth-of-type(2) {
    .card_offset(2);
}
&:nth-of-type(3) {
    .card_offset(3);
}
&:nth-of-type(4) {
    .card_offset(4);
} 
```

显然这是非最优的。有没有更好的方法来做到这一点？

或者，是否有一个 CSS 字段`'layout-height'`可以让 div 在布局中具有一定的高度（而不是其全高）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-25T20:50:53.213

假设您事先知道元素的数量（或者正在以某种方式重新计算您的 css），那么如果[放入](http://blog.thehippo.de/2012/04/programming/do-a-loop-with-less-css/)我最初[在 stack overflow 上](https://stackoverflow.com/questions/7226347/can-you-do-a-javascript-for-loop-inside-of-less-css)发现的循环结构中，那么基本上您所拥有的工作。

**更少的代码**

```
.loop(@index) when (@index > 0) {
     //set top amount
    &:nth-of-type(@{index}) { //NOTE: 1.3.3 and under is just @index, not @{index}
        top: @index * 20px;
    }

     // next iteration
     .loop(@index - 1);
}

// end the loop when index is 0
.loop(0) {}

.yourElem {
    @n: 6; //num of elements (could skip this and just put number in)
    .loop(@n);
} 
```

**输出**

```
.yourElem:nth-of-type(6) {
  top: 120px;
}
.yourElem:nth-of-type(5) {
  top: 100px;
}
.yourElem:nth-of-type(4) {
  top: 80px;
}
.yourElem:nth-of-type(3) {
  top: 60px;
}
.yourElem:nth-of-type(2) {
  top: 40px;
}
.yourElem:nth-of-type(1) {
  top: 20px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:10:49.213

我不认为这是可能的。会很酷，但我想这就是javascript的用途。

```
$('.parentDiv').children('div').each(function() {
    $(this).css({"top": num * 20 + "px"});
    num = num + 1;
}); 
```

这是完整的 js 解决方案：http: [//jsfiddle.net/VbuQ9/](http://jsfiddle.net/VbuQ9/)

如果你愿意，你可以在这里玩 LESS fiddle。 [http://jsfiddle.net/hV8sX/1/](http://jsfiddle.net/hV8sX/1/)

# r - 使用 ggplot 时出现“错误：绘图中没有图层”

> ID：13554980
> 
> 赞同：3
> 
> 时间：2012-11-25T20:07:51.430
> 
> 标签：r, ggplot2

我得到了一个带有基本统计值和因子（组）的简单 data.frame（AD0）：

```
 mean         se        sd median group
value1 0.725 0.07149951 0.4522026      1     1
value2 0.650 0.07637626 0.4830459      1     2
value3 0.175 0.06084343 0.3848076      0     3
value4 0.375 0.07752171 0.4902903      0     4 
```

我试图用以下方法制作一个简单的条形图：

```
p <- ggplot(AD0, aes(mean,group)) + geom_bar() 
```

但是，我收到消息：“错误：情节中没有图层”这是一件如此简单的事情，我无法理解为什么它不起作用。

如果有人可以帮助我，我会很高兴

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T20:19:11.433

由于您有预先汇总的数据，因此您需要`stat = "identity"`在`geom_bar`.

```
library(ggplot2)
ggplot(AD0, aes(group, mean)) + geom_bar(stat = "identity") 
```

此外，我想您想`group`用于 x 轴和`mean`y 轴。我交换了两个名字的顺序。

![在此处输入图像描述](../Images/f5929db1cd182102a35ff8e4959c3d72.png)

# javascript - 使用jquery按属性删除html元素

> ID：13554982
> 
> 赞同：2
> 
> 时间：2012-11-25T20:08:16.927
> 
> 标签：javascript, jquery, html

我需要删除一个其属性为`cursor = "pointer".`. 我需要在 html 中使用 javascript 有问题的项目是 this `<g cursor="pointer"></g>`。我不知道元素在 html 中具有这种形式的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T20:09:30.413

你可以使用这个：

```
$('g[cursor="pointer"]').remove(); 
```

# c++ - 模板和函数重载

> ID：13554991
> 
> 赞同：3
> 
> 时间：2012-11-25T20:09:06.723
> 
> 标签：c++, templates, overloading

为了研究函数模板的重载，我写了两个函数：

```
template <typename T>
void pe16_61_compare(const T&, const T&) {
    cout <<"template pe16_61_compare(T, T) called" << endl;
}

// plain functions to handle C-style character strings
void pe16_61_compare(const char*, const char*) {
    cout <<"normal func pe16_61_compare(...) called" << endl;;
} 
```

然后我定义了一些变量并调用了函数：pe16_61_compare

```
const char const_arr1[] = "world", const_arr2[] = "hi";
char ch_arr1[] = "world";
// first call
pe16_61_compare(ch_arr1, const_arr1);
// second call
pe16_61_compare(const_arr1, const_arr2); 
```

输出结果是：

```
template pe16_61_compare(T, T) called
normal func pe16_61_compare(...) called 
```

让我感到困惑的是，第一次调用调用了模板函数。对我来说，对于第一次调用，两个 pe16_61_compare 函数都是可行的函数并且具有相同的转换等级（非常量到常量和数组到指针），据说在这种情况下，模板函数应该从一组可行的功能。

谁能告诉我为什么？谢谢你考虑我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T20:12:36.503

对于第一次调用，`T = char[6]`比转换为更好的匹配`char const *`，因此模板获胜。

对于第二次调用，没有单个模板参数可以用于数组，因此非模板重载是唯一匹配的。

如果你说，

```
pe16_61_compare(static_cast<char const *>(const_arr_1),
                static_cast<char const *>(const_arr_2)); 
```

那么模板实例和普通函数都是可行的并且具有相同的签名，但是作为决胜局，非模板函数获胜（即这不是模棱两可的）。

# c - 在 XCode 中分析 C 程序

> ID：13554995
> 
> 赞同：0
> 
> 时间：2012-11-25T20:09:15.247
> 
> 标签：c, xcode, xcode4, profiling, profiler

我正在使用 XCode 开发一个 C 命令行实用程序，并且我正在尝试使用 XCode 的分析功能来跟踪程序分配和可能的内存泄漏。我可以将分配跟踪器实用程序很好地附加到程序本身并且它可以工作，问题是我无法从这一点与程序交互，它只是停留在其初始化和等待状态（程序肯定在我的某个地方的后台运行只是无法达到它）。我已经尝试调整各种设置无济于事，任何想法将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T20:15:34.317

如果您在 Xcode 之外启动 Instruments，您应该能够使用“目标”和“附加到进程”上方的下拉列表来分析任何已经运行的程序。所以一个选择——考虑到你描述你的程序的方式让它听起来是交互式的——是在终端中启动你的实用程序，然后将 Instruments 附加到它。

eg`vi`不是符号化的，但是针对它运行 Instruments 刚刚发现，在插入模式下，它花费大约 14% 的时间`write`和 4.5% 的时间`strcmp`（尽管使用 vi 之类的处理是如此微不足道，以至于必然会进行采样那里有错误）。

# java - GUI 使用 StartOnMainThread 锁定自身

> ID：13554997
> 
> 赞同：0
> 
> 时间：2012-11-25T20:09:18.460
> 
> 标签：java, macos, swing

我正在使用 JavaApplicationBundle 为我的 jar 文件设置图标，现在我正试图从 Dock 中删除我的程序。

我已设置`LSUIElement`为 1，但直到我`StartOnMainThread`在 Info.plist 的 Java 部分添加指令后才起作用。

但是 - 然后问题出现了 - GUI被锁定了 - 就像程序正在执行无限循环或其他东西一样。我变成`main()`了这样：

```
public static void main(String[] args) {

        Thread queryThread = new Thread() {
              public void run() {
                new MainWindow();
              }
            };
            queryThread.start();
        } 
```

但我看不到 JDialog - 即使 JavaApplicationBundle 进程正在运行，它也不会出现（因为这是后台应用程序 - 是否有一些我缺少的步骤来调出对话框？）

什么会导致这个问题？有没有人有简单的应用程序包，其中没有坐在 Dock 中运行 java 程序 - 我已经搜索过互联网，但我的搜索结果中没有出现任何内容？

谢谢

**编辑**

阅读评论后，我尝试了我已经尝试过的，但我忘记了：

```
public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable(){
      public void run() {
                new MainWindow();
      }
    });
} 
```

在这种情况下，应用程序正在运行 - 但没有显示 GUI。当我检查控制台消息时，我看到的很少：

```
*** -[NSConditionLock unlock]: lock (<NSCOnditionLock: 0x1347a0> '(null)') unlocked when not locked
*** Break on _NSLockError() to debug. 
```

# java - Android：应用程序抛出 CursorIndexOutOfBoundsException 并认为文件存在时手机中不存在

> ID：13554999
> 
> 赞同：0
> 
> 时间：2012-11-25T20:09:21.790
> 
> 标签：java, android

我正在制作音乐播放器，这是场景：

我从目录中删除了当前播放列表中即将播放的歌曲。（即该歌曲实际上已不再存在于手机中）

但是当播放器尝试播放歌曲时，它会抛出一个错误，捕获它并播放下一首歌曲。很简单，它正在工作。

然而问题是：

我将手机中删除的歌曲再次上传到之前的位置。

但是当我尝试使用 访问它时`Android database curson using MediaStore.Audio`，它仍然认为该歌曲不存在并抛出相同的错误。

下面的代码正在抛出`android.database.CursorIndexOutOfBoundsException`

请建议怎么做？

我是否需要更新一些标志，我的应用程序通过这些标志获取手机内存的更新状态并能够获取歌曲或其他任何东西？

```
String quesryString = MediaStore.Audio.Media.IS_MUSIC + "!=" + 0 + " AND "
        + MediaStore.Audio.Media.DATA + " = \"" + trackData + "\"";
// trackData is the name of the mp3 file & is coming right
String[] projection = { MediaStore.Audio.Media.TITLE,
        MediaStore.Audio.Media.ARTIST, MediaStore.Audio.Media.ALBUM,
        MediaStore.Audio.Media.DURATION };

Cursor cursor = context.getContentResolver().query(
        MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, projection,
        quesryString, null, null);
cursor.moveToFirst();
String songTitle =  cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Audio.Media.TITLE)); 
```