# StackOverflow 问答 16037000-16037999

# php - PHP聚合一个属性，一个类中的所有对象

> ID：16037012
> 
> 赞同：1
> 
> 时间：2013-04-16T12:24:59.487
> 
> 标签：php, class, object, aggregation

作为一个OO新手提前道歉......我正在尝试编写一种方法来聚合给定类存在的所有对象的属性。下面的代码描述了我想要做什么。

```
Class TeamMember(){
    function SetScore($value)   {
        $this->score = $value;
    }

    function GetTotalScoreForTeam() {
        //best way to iterate over all the objects to get a sum??????
        return totalScore;
    }
}

$john = new TeamMember();
$john->SetScore('182');

$paul = new TeamMember();
$paul->SetScore('212');

$totalScore = TeamMember->GetTotalScoreForTeam; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:46:56.563

即使这不是解决此问题的最佳方法，我认为这是使用预先编写的代码最能解释您的问题的方法：

```
class TeamMember { // a class is not a function/method; removed the ()
    public static $members = array(); // holds the instances
    public $score; // It is simply good practice to declare your fields (it is not necessary)

    function __construct () {
        self::$members[] = $this; // save the instances accessible for your score-calcuating method
    }

    function setScore ($value) {
        $this->score = $value;
    }

    static function getTotalScoreForTeam () { // a static method is best here
        $totalScore = 0;
        foreach (self::$members as $member) // foreach over the instances holding list
            $totalScore += $member->score;
        return $totalScore;
    }
}

$john = new TeamMember();
$john->setScore('182');

$paul = new TeamMember();
$paul->setScore('212');

$totalScore = TeamMember::getTotalScoreForTeam(); // for static access, use a :: instead of -> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:57:21.483

正如 Mike B 在评论中所说，您应该首先将 TeamMember 实例分组到 Team 类的实例中，然后运行一些聚合函数来计算该特定团队的总分，例如

```
<?php
$team1 = Team::create('Team 1')
    ->add( TeamMember::create('john')->SetScore(182) )
    ->add( TeamMember::create('paul')->SetScore(212) );

$team2 = Team::create('Team 2')
    ->add( TeamMember::create('peter')->SetScore(200) )
    ->add( TeamMember::create('marry')->SetScore(300) );

foo($team1);
foo($team2);

function foo(Team $team) {
    $score = $team->membersReduce(
        function($v, $e) {
            return $v+$e->getScore();
        }
    );

    $members = $team->membersMap(
        function($e) {
            return $e->getName();
        }
    );

    echo 'team : ', $team->getName(), "\r\n";
    echo 'score: ', $score, "\r\n";
    echo 'members: ', join(' | ', $members), "\r\n";
}

class TeamMember {
    protected $score = 0;
    protected $name;

    public static function create($name) {
        return new TeamMember($name);
    }

    public function __construct($name) {
        $this->name = $name;    
    }

    public function getName() {
        return $this->name;
    }

    public function SetScore($value) {
        $this->score = $value;
        return $this;
    }

    public function GetScore() {
        return $this->score;
    }
}

class Team {
    protected $members = array();
    protected $name;

    public static function create($name) {
        return new Team($name);
    }

    public function __construct($name) {
        $this->name = $name;    
    }

    public function getName() {
        return $this->name;
    }

    public function add(TeamMember $t) {
        // <-- check if $t already member of team -->
        $this->members[] = $t;
        return $this;
    }

    public function membersReduce($fn) {
        return array_reduce($this->members, $fn);
    }

    public function membersMap($fn) {
        return array_map($fn, $this->members);
    }
} 
```

印刷

```
team : Team 1
score: 394
members: john | paul
team : Team 2
score: 500
members: peter | marry 
```

# spring - Spring mvc 映射 + displaytag 分页/排序

> ID：16037019
> 
> 赞同：0
> 
> 时间：2013-04-16T12:25:21.840
> 
> 标签：spring, model-view-controller, mapping, displaytag

我正在尝试在我的项目中使用显示标签库。

JSP：

```
<display:table name="rooms" class="table table-striped" pagesize="5">
    <display:column property="name" titleKey="crs.admin.room.roomName" sortable="true" />
    <display:column property="capacity" />
</display:table> 
```

控制器：

```
@Controller
public class RoomController {
....
@RequestMapping(value = "/roomManagement*", method = RequestMethod.GET)
public ModelAndView get() {
    ModelAndView modelAndView = new ModelAndView();
    modelAndView.setViewName("roomManagement");
    modelAndView.addObject("rooms", roomService.findAll());
    return modelAndView;
} 
```

查看解析器：

```
<bean id="jspViewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
              value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value=""/>
    <property name="suffix" value=".jsp"/>
</bean> 
```

当我用它打开页面时，我的链接如下所示：

```
http://localhost:8081/roomManagement 
```

但点击分页/排序链接后，它看起来像：

```
http://localhost:8081/roomManagement.jsp?d-49653-s=0&d-49653-o=2 
```

由于“.jsp”后缀，我的控制器没有处理这个请求，也没有将房间列表放入视图中。我应该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:01:02.803

好的，这真的很简单，我添加了

```
 requestURI="/roomManagement" 
```

要显示的参数：table 标记

# django - django 的 timezone.now 没有显示正确的时间

> ID：16037020
> 
> 赞同：63
> 
> 时间：2013-04-16T12:25:23.193
> 
> 标签：django, django-timezone

我的服务器位于伦敦。

在我的`settings.py`我有：

```
TIME_ZONE = 'Europe/Moscow'
USE_TZ = True 
```

但是当我执行这个时：

```
from django.utils import timezone

print timezone.now().hour 
```

代码打印伦敦时间。我究竟做错了什么？

**更新：**

```
>> timezone.now()
datetime.datetime(2013, 4, 16, 12, 28, 52, 797923, tzinfo=<UTC>) 
```

有趣`tzinfo = <UTC>`…… 所以也许它打印的不是伦敦时间，而是UTC的+0时间？无论如何，有没有办法让 Django 显示莫斯科时间？

另外，当我渲染模板时`now = timezone.now()`

`{{ now.hour }}`打印 12（伦敦时间）

`{{ now|date:"G" }}`打印 16（莫斯科时间）

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-16T12:36:50.713

[请参阅Django 文档的“使用”部分中的](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#usage)问题 #2 。

```
>>> from django.utils import timezone
>>> timezone.localtime(timezone.now()) 
```

由于上面的文档还讨论了最佳实践，包括以下摘录：

> 如何获取当前时区的当地时间？
> 
> 那么，第一个问题是，你真的需要吗？
> 
> 您应该只在与人类交互时使用本地时间，并且模板层提供过滤器和标签以将日期时间转换为您选择的时区。
> 
> 此外，Python 知道如何比较感知的日期时间，并在必要时考虑 UTC 偏移量。用 UTC 编写所有模型和视图代码要容易得多（并且可能更快）。因此，在大多数情况下，django.utils.timezone.now() 返回的 UTC 日期时间就足够了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-07T08:45:31.090

```
from django.utils import timezone
time = timezone.localtime() 
```

无论您的 TIME_ZONE 设置为什么，它都会为您提供当地时间。

```
time = timezone.localtime(timezone.now()) # same result, but it is redundant. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-23T06:57:39.203

它在模板中起作用但在视图 python 代码中不起作用的原因有点在文档中： [https ://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-TIME_ZONE](https://docs.djangoproject.com/en/3.1/ref/settings/#std:setting-TIME_ZONE)

“.....这是 Django 用于在模板中显示日期时间并解释在表单中输入的日期时间的默认时区。”

这就是为什么`{{ now|date:"G" }}`印16（莫斯科时间）印莫斯科时间！

另一个注意事项是`timezone.now()`，在正常配置的 Django 应用程序中，将选择`TIME_ZONE`设置中设置的任何内容（下面示例中的“America/New_York”）。但也可以被覆盖（例如在中间件中或直接在该请求的视图中参见下面的巴黎）

```
In [27]: timezone.localtime(timezone.now())

Out[27]: datetime.datetime(2021, 2, 23, 1, 53, 49, 793743, tzinfo=<DstTzInfo 'America/New_York' EST-1 day, 19:00:00 STD>)

In [29]: timezone.activate(pytz.timezone("Europe/Paris"))

In [30]: timezone.localtime(timezone.now())

Out[30]: datetime.datetime(2021, 2, 23, 7, 54, 19, 21898, tzinfo=<DstTzInfo 'Europe/Paris' CET+1:00:00 STD>) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-26T18:57:02.383

django 的 use_tz = True 返回时区中的日期时间对象。如果设置为 false，它将使用系统默认（区域设置）时间，这是幼稚的。我做了一个小实验来澄清这种困惑

test1：当 use_tz = true 时；时区=美国/东部；系统时区：UTC+5:30

```
datetime.datetime.today() # returned naive datetime with locale time
timezone.now() returned # UTC
timezone.localtime() # returned us/eastern 
```

test2：当 use_tz = true 时；时区=美国/东部；系统时区：UTC-5

```
datetime.datetime.today() # returned naive datetime in with locale time
timezone.now() # returned UTC timezone
timezone.localtime() # in US/eastern timezone 
```

test3：当 use_tz = False 时；时区=美国/东部；系统时区：UTC-5

```
timezone.now() # returned naive datetime with system time
timezone.localtime() # returned traceback ValueError: localtime() cannot be applied to a naive datetime 
```

test4：当 use_tz = False；时区=UTC；系统时区：UTC+5:30

```
datetime.datetime.today() # returned naive datetime in system timezone
timezone.now() # returned naive datetime in system timezone
timezone.localtime() # returned traceback 
```

# flume - 如何在 Flume 中处理多行日志条目

> ID：16037023
> 
> 赞同：1
> 
> 时间：2013-04-16T12:25:30.780
> 
> 标签：flume

我刚开始玩 Flume。我有一个关于如何将多行日志条目作为单个事件处理的问题。就像错误条件下的堆栈跟踪一样。例如，将以下内容视为单个事件，而不是每行一个事件

*2013-04-05 05:00:41,280 错误（ClientRequestPool-PooledExecutionEngine-Id#4）[com.ms.fw.rexs.gwy.api.service.AbstractAutosysJob] 作业因 228794 java.lang.NullPointerException 在 com.ms 失败.fw.rexs.core.impl.service.job.ReviewNotificationJobService.createReviewNotificationMessageParameters(ReviewNotificationJobService.java:138) ....*

我已将源配置为 spooldir 类型。

谢谢你苏曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:48:55.373

如文档所述， spooldir source 为输入数据中由换行符分隔的每个字符串创建一个新事件。[您可以根据spooldir source 的代码](https://git-wip-us.apache.org/repos/asf?p=flume.git;a=blob;f=flume-ng-core/src/main/java/org/apache/flume/source/SpoolDirectorySource.java;h=641b5c6763ce9359e018139452fd83f3d92bb225;hb=trunk)创建自己的接收器（请参阅[http://flume.apache.org/FlumeDeveloperGuide.html#sink](http://flume.apache.org/FlumeDeveloperGuide.html#sink)）来修改此行为。您需要实现能够根据某些标准检测消息的开始行和结束行的解析算法。

此外，还有其他来源，例如 Syslog UDP 和 Avro，将整个接收到的消息视为单个事件，因此您无需任何修改即可使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T09:49:19.527

您需要考虑扩展 spool 源使用的行反序列化器，一种简单（但可能存在缺陷）的方法是在换行符上定界，但将带有一定数量空格前缀的行组合到前一行。

事实上，这个补丁已经存在一个 Jira 问题：

*   [https://issues.apache.org/jira/browse/FLUME-2779](https://issues.apache.org/jira/browse/FLUME-2779)

# php - 为什么不能使用 exec() 或 system() 函数运行可执行文件？

> ID：16037024
> 
> 赞同：1
> 
> 时间：2013-04-16T12:25:32.443
> 
> 标签：php, apache, exec, command-line-interface

我正在尝试`notepad`在服务器上运行（`localhost`暂时）。

`exec()`并且`system()`函数在例如 write 时工作正常`ping 127.0.0.1`。

但这不起作用（如果我直接在命令提示符下编写命令，则工作正常）：

```
$command = "C:\WINDOWS\system32\notepad.exe";

$result = system($command);

print_r($result); 
```

与. `Windows XP`_ `xampp`可能我没有权限，因为该命令是从其他帐户执行的，但我不知道如何检查。

有什么建议吗？

**编辑：**

如前所述[`bwoebi`](https://stackoverflow.com/a/16037080/1333512)，我已经打开了进程，但它们是从不同的用户（SYSTEM）打开的，我看不到应用程序何时打开。所以，我必须解释我的问题：如何更改从 PHP 脚本执行命令时使用的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:27:37.713

首先，如果您不使用单引号，则需要转义命令字符串中的反斜杠：

```
$command = "C:\\WINDOWS\\system32\\notepad.exe"; 
```

还要注意，如果Apache是​​作为Windows服务运行的，它没有桌面交互权限，所以**不能打开GUI**，试试在命令行直接用PHP运行脚本。

**编辑**

用于运行命令的用户是正在运行 PHP 的用户。要更改运行 PHP 的用户，您必须更改运行 Apache 的用户，**如果您希望此用户具有桌面交互权限，您必须自己运行 Apache，而不是作为服务运行。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:28:30.040

执行 shell 命令后让进程稍微休眠一下，然后在 TaskManager 中搜索记事本……然后你会看到这是两个不同的用户（你看不到其他用户的记事本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:30:11.767

记事本是一个 GUI 程序，因此需要激活 Windows TTY。

Ping 是命令行，因此可以由系统直接运行并将结果通过管道传输到调用它的程序中。

如果没有深入了解 os 的工作原理，基本上它不能在 Windows 机器上完成（它可能在 unix 机器上但更困难。）

# ruby-on-rails - 如何使用rails确定csv和excel文件第一行的内容

> ID：16037026
> 
> 赞同：3
> 
> 时间：2013-04-16T12:25:48.483
> 
> 标签：ruby-on-rails, ruby-on-rails-3, excel, csv, ruby-on-rails-3.2

我有一个简单的 Rails 应用程序，用户需要通过 csv 或 Excel 上传内容。我并不总是想假设用户知道数据库中所有必填字段，我只想让用户知道第一列是必需的，并且第一列上的任何内容都会进入`mobile_number`数据库中的列。我正在谈论的代码示例如下。我正在使用 roo gem。这是一个简单的应用程序，因此联系人表中只使用了两个数据库列。

```
 def load_imported_contacts
    spreadsheet = open_spreadsheet
    header = spreadsheet.row(1)
    (2..spreadsheet.last_row).map do |i|
      row = Hash[[header, spreadsheet.row(i)].transpose]
      contact = Contact.find_by_id(row["id"]) || Contact.new
      contact.name = "content of the second field(optional)"
      contact.mobile_number = "content in the first(required and must be the first column)"
      contact.save!
    end
  end

  def open_spreadsheet
    case File.extname(file.original_filename)
      when ".csv" then Csv.new(file.path, nil, :ignore)
      when ".xls" then Excel.new(file.path, nil, :ignore)
      when ".xlsx" then Excelx.new(file.path, nil, :ignore)
      else raise "Unknown file type: #{file.original_filename}"
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:16:53.753

经过一番研究，我终于解决了我的问题。在发布这个问题之前我应该​​这样做。解决方案如下

```
 def load_imported_contacts
    spreadsheet = open_spreadsheet
    header = spreadsheet.row(1)
    (1..spreadsheet.last_row).map do |i|
      row = Hash[[header, spreadsheet.row(i)].transpose]
      contact = Contact.find_by_id(row["id"]) || Contact.new
      contact.mobile_number = spreadsheet.cell(i,'A')
      contact.name = spreadsheet.cell(i,'B')
      contact
    end
  end 
```

# sql - 删除访问表中的公共数据

> ID：16037032
> 
> 赞同：0
> 
> 时间：2013-04-16T12:26:05.973
> 
> 标签：sql, database, ms-access, duplicates

我正在使用 Access 数据库并有以下问题：

**如何根据某些列删除整行？**

例如我有下表：

```
Id | Name |   Desc  | Contact No. | 
1  | XYZ  | bla bla | 123456      | 
2  | ABC  | bla bla | 123456      |
3  | TUV  | hmmmmm  | 123456      |
4  | XYZ  | bla bla | 123456      | 
```

我想删除所有具有重复信息的数据行，因此在本例中为第 1 行和第 4 行。当然，唯一的问题是 Id，它使整个行唯一......

我将如何去删除这个？是否有一些 SQL 代码可以处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:55:09.543

用于检测重复的自动加入：

```
DELETE FROM Table
WHERE Id IN
(
    SELECT t1.Id
    FROM Table t1
        INNER JOIN join Table t2
            ON t1.Name = t2.Name
            AND t1.[Desc] = t2.[Desc]
            AND t1.Contact = t2.Contact 
) 
```

如果您只想为每个重复项保留一行，请查看以下问题：[Deleting duplicate rows from a table](https://stackoverflow.com/questions/1043488/deleting-duplicate-rows-from-a-table)

```
DELETE FROM Table
WHERE Id NOT IN
(
    SELECT MIN(Id)
    FROM Table
    GROUP BY Name, [Desc], Contact
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:06:29.660

如果你需要删除所有重复的行，你可以使用这个 Ms-Access SQL 查询：

```
DELETE tbl.Id
FROM tbl
WHERE (((tbl.Id) In (SELECT tbl.Id
  FROM
    (SELECT [Name], [Desc], [Contact]
     FROM tbl
     GROUP BY [Name], [Desc], [Contact]
     HAVING COUNT(*)>1)  AS [t1]
  INNER JOIN tbl
  ON ([t1].Contact = tbl.Contact)
     AND ([t1].[Desc] = tbl.[Desc])
     AND ([t1].[Name] = tbl.[Name])))); 
```

要保留第一个副本，您可以使用以下命令：

```
DELETE tbl.Id
FROM tbl
WHERE (tbl.Id) Not In (SELECT Min(tbl.Id) AS MinId
FROM tbl
GROUP BY tbl.[Name], tbl.[Desc], tbl.[Contact]); 
```

# javascript - 替代 eval() javascript

> ID：16037033
> 
> 赞同：32
> 
> 时间：2013-04-16T12:26:06.853
> 
> 标签：javascript, jquery, jquery-plugins, eval

我主要使用 javascript、Jquery、knout 等

吸引我 eval() 的是

```
var a = 5;
var b = 10;
eval("a+b");
//Gives me output 15 
```

`a`注意：我在和的值`b`动态变化的情况下工作

在我的工作中，我处理了很多来自 json、knout 等的动态对象。所以 eval 解决了我的大部分问题。但是当我阅读时，我发现 eval() 有很多问题，比如放慢速度等。

当我必须将作为字符串获取的方程评估为作为对象的方程时，我进行了很多搜索，但没有找到 eval() 的任何替代品。

任何人都可以建议一个插件或函数替代 eval() 记住我上面给出的例子

**问题：**

*我正在使用剔除映射从 Json 数据创建一个表。这样无论 json 的格式是什么，表格都会生成。我还使用敲除计算来计算一些字段。现在我使用硬编码*

```
self.Salary = ko.computed(function(){ return self.salaryEqn() && eval(self.salaryEqn()).toFixed(2); })
self.salaryEqn(salEqnTxt); 
```

*我想动态执行这些方程。我可以将它动态地创建为字符串，但评估它们是我面临的问题。*

**我想要解决方案**

有没有办法在不使用 eval 的情况下计算存储在 JavaScript 中的字符串中的公式？

就像一个公式

```
 "self.Salary = ko.computed(function(){ return self.salaryEqn() && eval(self.salaryEqn()).toFixed(2); })" 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-16T13:15:27.123

在这方面，Javascript 是一种非常灵活的语言。在*极*少数情况下，`eval()`任何给定问题的正确答案都是正确的，这里当然没有必要。

如果您的`a`和`b`变量是对象的一部分，您可以使用字符串下标访问它们：

ie`myobj.a`也可以引用为`myobj['a']`.

由此，您可以为下标使用变量，因此您可以`myobj`动态引用任何元素——即：

```
var myobj = {a : 5, b : 10};

var dynamicProperty1 = 'a';
var dynamicProperty2 = 'b';

//gives 15.
alert( myobj[dynamicProperty1] + myobj[dynamicProperty2] ); 
```

不需要`eval()`。您可以随心所欲地构建`dynamicProperty`琴弦，因此几乎具有无限的灵活性。

如果你的`a`和`b`变量是全局变量，浏览器中的 JS 全局变量实际上是对象的子`window`对象，所以即使使用全局变量，你仍然可以使用这种技术。

即您的全局变量`a`也可以通过`window.a`or访问`window['a']`，后一个选项允许您执行上述相同的`dynamicProperty`技巧。

希望有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T12:56:53.787

你的意思是你想计算一个等式，直到你收到它才能知道？

如果是这样，请参阅[在 javascript 中计算字符串值，而不是使用 eval](https://stackoverflow.com/questions/6479236/calculate-string-value-in-javascript-not-using-eval)。

## **简而言之：**

eval 有时可以使用，但前提是方程字符串来自受信任的来源，并且您需要像**评估动态方程**这样的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T12:32:39.540

也许使用`window['var' + num]`可能对你更有用。我不太明白你的问题对不起。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-11T14:23:54.360

如果您可以将它们收集在类似的对象下`root = {a: 1, b: 2}`，那么

```
Object.observe(root, function(newValues) { 
    res = newValues.object.a + newValues.object.b;
}); 
```

可以在或更改时使您的`res`变量保持最新`a``b`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-11T10:03:28.917

检查[这个问题](https://stackoverflow.com/q/2029888/1697459)`eval`的更多替代方案和[另一个](https://stackoverflow.com/q/7127652/1697459)可能被认为是重复的替代方案......

我知道这是一个仅链接的答案，但它肯定会有助于其他人搜索`eval`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-20T17:57:19.230

看起来您正在尝试执行用户创建的动态方程。

例如，它可能是“a+b+c”或“dog+cat”，而你不知道。

处理此类用户输入等式的最佳方法是将文本解析为标记，然后将标记转换为值/操作数。

这是很多工作，但有预先推出的解决方案。例如，[math.js](http://mathjs.org/)

# java - 模式匹配器

> ID：16037036
> 
> 赞同：1
> 
> 时间：2013-04-16T12:26:10.757
> 
> 标签：java, regex, matcher

我有以下模式匹配器。

```
 Pattern pat = Pattern.compile("[^a-z][^,.:;]"); 
```

如何在其中包含`]`角色本身？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:27:37.670

你需要逃避它。

`\\]`

[看到这个。](https://stackoverflow.com/questions/5768480/java-regular-expression-and-escaping-meta-characters)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T12:27:42.950

`]`是一个特殊字符，用于表示[字符类](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)的结束，因此需要对其进行转义：

```
Pattern pat = Pattern.compile("[^a-z][^,.:;\\]]"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:28:53.957

您可以像这样使用转义字符 \ 来做到这一点`\\].`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:58:50.637

标准方式是使用类的`quote`函数`Pattern`。此函数返回指定字符串的文字模式字符串。

```
String myLiteralString = Pattern.quote(",.[:;");
Pattern pat = Pattern.compile("[^a-z][^" + myLiteralString + "]"); 
```

此方法转义正则表达式语法的所有特殊字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:33:38.480

你真的不需要逃避它。正则表达式中有一个特殊规则，如果你想要`]`列表中的实际字符，它必须是它的第一个元素。它会工作得很好。试试这个代码：

```
public static void main(String[] args){
    String texto = "[]hello[]";
    Pattern p = Pattern.compile("[]]+");
    Matcher m = p.matcher(texto);
    while(m.find()){
        System.out.println(m.group());
    }
} 
```

# authentication - 主域和多个子域之间的 Facebook PHP SDK 身份验证

> ID：16037039
> 
> 赞同：0
> 
> 时间：2013-04-16T12:26:23.163
> 
> 标签：authentication, login, facebook-php-sdk

我真的无法完成这项工作。我已经尝试了在 SO 或其他网站上找到的所有步骤，但是我的跨域 fb 身份验证不起作用..

我的身份验证脚本如何：

```
session_set_cookie_params(0,"/",".my-domain.com");
session_start();

// include facebook class
try {
  $fb = new Facebook(array(
    'appId' => $facebook_app_id,
    'secret' => $facebook_app_secret,
    'cookie' => true
  ));
} catch(FacebookAPIException $e) {
  // no active fb session
}

// other content here

try {
  $uid = $fb->getUser();

  if($uid) {
    $user = $fb->api('/me','GET');  
  }

} catch(FacebookApiException $e) {
  // not logged in
} 
```

现在的问题是该代码`my-domain.com`在`subdomain.my-domain.com`.

即使我在主域上成功通过身份验证`my-domain.com`，当我访问`subdomain.my-domain.com`主域的会话时，它也会被替换并且连接丢失。

**请注意**，在`subdomain.my-domain.com`没有抛出 API 异常但`$uid`为 0 的情况下。

我已经将 FB APP 设置页面上的域设置为`my-domain.com`.

这里的问题是什么？

# c# - 两个选项的sql查询差异和最佳情况

> ID：16037044
> 
> 赞同：0
> 
> 时间：2013-04-16T12:26:43.777
> 
> 标签：c#, asp.net, sql, sql-server-2008

我有一个用以`emp`下列命名的表：

```
id int (autoincrement), 
name varchar,
maxid int 
```

我想插入`id`,`name`和autoincrement 的`maxid`值。`maxid``id`

在以下两个查询选项中，哪一个是最佳选项，为什么？

选项1：

```
insert into emp (name,maxid) values ('abc',(select max(id)+1 from emp)) 
```

选项2：

```
string QRY = "insert into emp values('abc',0) select scope_identity()";
sqlcommand cmd= new sqlcommand(QRY, con);
datatable dt = new datatable();
con.open();
dt.load(cmd.executereader());  
con.close();
int scopeid=int.parse(dt.rows[0][0].tostring());

QRY="update emp set maxid='"+scopeid+"' where id ='"+scopeid+"'";
cmd= new sqlcommand(QRY, con);
cmd.executenonquery(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:09:12.403

简单的 [演示方法在这里](http://sqlfiddle.com/#!3/26580/1)

> 插入 dbo.emp
> 选择 'abc', IDENT_CURRENT('dbo.emp')

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:33:05.007

以上都不是更新的正确实现。

但根据你的情况，我会做两件事。

首先插入名称并使用自动增量设置id，然后执行更新那些尚未设置maxId的记录。

为什么要分两个阶段进行？

我们可能会得到与 MAX(id) 不同的结果和数据库增量特征设置的 id 值，因此必须删除选项 1。

可以使用的查询。

```
insert into emp (name) values ('abc')
update emp set maxid = id where maxid is null; 
```

但是从另一方面和 Serge 的观察来看，如果可能的话，你应该完全放弃这种行为。另一种选择是创建一个在插入后触发的触发器。这样做的好处是上面的视图或计算列是您只执行一次此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:30:02.167

我宁愿用`INSERT INTO...SELECT`语句，

```
INSERT INTO emp (name, maxid) 
SELECT 'abc', COALESCE(MAX(id), 0) + 1 
FROM   emp 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:39:43.030

`Select max(id)+1`可能与自动增量 ID 不同，因此该选项无效。

至于第二个选项，它仍然是不必要的复杂性。您可以使用 maxid NULL 插入，然后更新为 id

```
insert into emp (name,maxid) values ('abc',NULL)

update emp set maxid = id where maxid is null 
```

# windows - Windows 虚拟（假）设备 INF 安装

> ID：16037048
> 
> 赞同：1
> 
> 时间：2013-04-16T12:26:59.017
> 
> 标签：windows, installation, driver, virtual, inf

我一直在尝试在 Windows 7 64 位上从 Windows DDK 安装 MSVAD 虚拟音频示例驱动程序，但没有成功。我将示例 INF 修改为仅支持“简单”驱动程序。ChkInf 工具确认 INF 文件一切正常，我使用测试证书对包进行了签名。到目前为止，一切都很好。问题是：尽管阅读了 Microsoft 网站上的文档，但我不知道如何实际安装此驱动程序。问题是它与物理设备不匹配，因此我无法使用设备管理器更新现有设备上的驱动程序。除此之外，右键单击 INF + 安装方法不起作用，因为 INF 缺少 DefaultInstall 部分（这是签署驱动程序的要求）。

理想情况下，我希望能够从命令行安装此驱动程序，但如果需要特定程序，我将不得不这样做。

提前感谢您提供有关如何解决此问题的任何线索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:44:07.457

好吧，我想我搜索得不够远：[http ://social.msdn.microsoft.com/Forums/en-US/windowspro-audiodevelopment/thread/68ac63f3-7bb1-45b0-9677-957d7aa9f2d9](http://social.msdn.microsoft.com/Forums/en-US/windowspro-audiodevelopment/thread/68ac63f3-7bb1-45b0-9677-957d7aa9f2d9)

# javascript - 为什么 JavaScript 地图函数返回未定义？

> ID：16037049
> 
> 赞同：141
> 
> 时间：2013-04-16T12:26:59.350
> 
> 标签：javascript

我的代码

```
 var arr = ['a','b',1];
 var results = arr.map(function(item){
                if(typeof item ==='string'){return item;}  
               }); 
```

这给出了以下结果

```
["a","b",undefined] 
```

我不想`undefined`在结果数组中。我该怎么做？

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-04-16T12:28:11.807

如果项目不是字符串，则不会返回任何内容。在这种情况下，函数会返回`undefined`您在结果中看到的内容。

map 函数用于将一个值映射到另一个值，但看起来您实际上想要过滤数组，而 map 函数不适合。

你真正想要的是一个[过滤](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)功能。它采用一个函数，该函数根据您是否想要结果数组中的项目返回 true 或 false。

```
var arr = ['a','b',1];
var results = arr.filter(function(item){
    return typeof item ==='string';  
}); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2017-12-07T17:03:36.723

过滤器适用于未修改项目的特定情况。**但在很多情况下，当您使用 map 时，您希望对传递的项目进行一些修改。**

如果这是您的意图，您可以使用[reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
var arr = ['a','b',1];
var results = arr.reduce((results, item) => {
    if (typeof item === 'string') results.push(modify(item)) // modify is a fictitious function that would apply some change to the items in the array
    return results
}, []) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-11-03T10:22:19.363

由于 ES6`filter`支持尖箭头表示法（如 LINQ）：

所以可以归结为以下单行。

```
['a','b',1].filter(item => typeof item ==='string'); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-07-30T08:16:35.747

我的解决方案是在地图之后使用过滤器。

这应该支持每种 JS 数据类型。

例子：

```
const notUndefined = anyValue => typeof anyValue !== 'undefined'    
const noUndefinedList = someList
          .map(// mapping condition)
          .filter(notUndefined); // by doing this, 
                      //you can ensure what's returned is not undefined 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2019-08-08T07:19:35.263

您可以像下面的逻辑一样实现。假设您想要一个值数组。

```
let test = [ {name:'test',lastname:'kumar',age:30},
             {name:'test',lastname:'kumar',age:30},
             {name:'test3',lastname:'kumar',age:47},
             {name:'test',lastname:'kumar',age:28},
             {name:'test4',lastname:'kumar',age:30},
             {name:'test',lastname:'kumar',age:29}]

let result1 = test.map(element => 
              { 
                 if (element.age === 30) 
                 {
                    return element.lastname;
                 }
              }).filter(notUndefined => notUndefined !== undefined);

output : ['kumar','kumar','kumar'] 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-04-16T12:29:43.187

如果当前元素是 a ，则仅返回一个值`string`。也许分配一个空字符串就足够了：

```
var arr = ['a','b',1];
var results = arr.map(function(item){
    return (typeof item ==='string') ? item : '';  
}); 
```

当然，如果你想过滤任何非字符串元素，你不应该使用`map()`. 相反，您应该考虑使用该[`filter()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/filter)功能。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-04-16T12:30:46.820

```
var arr = ['a','b',1];
var results = arr.filter(function(item){
                if (typeof item ==='string') {return item;}  
               }); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2021-03-17T15:11:45.217

如果您必须使用 map 来返回自定义输出，您仍然可以将其与 filter 结合使用。

```
const arr = ['a','b',1]

const result = arr.map(element => {

  if(typeof element === 'string')
    return element + ' something'

}).filter(Boolean) // this will filter out null and undefined

console.log(result) // output: ['a something', 'b something'] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-05-10T21:59:40.140

如果你这样使用它，你的问题就会得到解决。此外，您将拥有一个干净而简短的代码

```
var _ = require('lodash'); //but first, npm i lodash --save
var arr = ['a','b',1];
var results = _.compact(
    _.map(arr, function(item){
        if(_.isString(item)){return item;}
    }
); //false, null, undefined ... etc will not be included 
```

用 ES6...

```
const _ = require('lodash'); //but first, npm i lodash --save
const arr = ['a','b',1];
const results = _.compact(
    _.map(arr, item => {
        if(_.isString(item)){return item;}
    }
); 
```

# objective-c - 无法在 Objective-c 中跟踪我的财产的价值

> ID：16037055
> 
> 赞同：0
> 
> 时间：2013-04-16T12:27:20.537
> 
> 标签：objective-c, properties, getter-setter

我对一类中的一个属性有疑问。如果有什么不同，我正在使用 iOS 6.1 进行编码。

类`UIViewController`和属性是在头文件中声明的，如下所示：

```
// Keeps track of time in seconds
@property (nonatomic, strong) NSNumber *timeInSeconds; 
```

在我的实现文件中，我在 3 次使用该属性：

*   一是用方法加时间`- (void)addTime`

*   一种是用方法减去时间`- (void)subtractTime`

这两种方法使用如下属性：

```
- (void)addTime
{
    CGFloat timeFloat = [self.timeInSeconds floatValue];

    // Here I set the value of the property timeInSeconds, but I can't access that value later on in the code!

    self.timeInSeconds = [NSNumber numberWithFloat:timeFloat +5];
    NSLog(@"Total Time:%@", self.timeInSeconds);
} 
```

这两种方法`addTime`并`subtractTime`做他们应该做的事情，并且`timeInSeconds`当我添加然后减去然后添加时它们会很好地跟踪属性值......

问题是当我在同一个实现文件中调用第三种方法时：

```
- (void)updateLabelTime
{
   self.label.attributedText = [[NSAttributedString alloc]initWithString:[self.timeInSeconds stringValue]];

   [self.label setNeedsDisplay];

   [NSTimer scheduledTimerWithTimeInterval:0.8 target:self selector:@selector(updateLabelTime) userInfo:nil repeats:YES];
} 
```

我还尝试创建一个`NSAttributedString`with`stringWithFormat`而不是，`initWithString`但问题仍然存在，它不是返回`timeInSeconds`我之前使用`addTime`and设置的属性的值`subtractTime`，而是调用创建一个新实例的getter，`timeInSeconds`因为在我的 getter 中我有惰性实例化.

我试图不为该属性编写 getter/setter（因为我使用的是 iOS 6.1），但这没有区别。

如果我只是将标签设置为一些随机字符串，它会起作用。问题是，如果我知道`timeInSeconds`55 的值，它仍然会创建一个新的`_timeInSeconds`.

因为我是法国人，所以我用我的英语尽力了，如果这个问题已经被一个初学者的 iOS 开发者问过，请不要回答，只是重定向我。不过没找到答案，谢谢！

编辑：这是自定义吸气剂

```
- (float)timeInSeconds
{
if (!_timeInSeconds) {
    _timeInSeconds = 0;
}

return _timeInSeconds;
} 
```

第二次编辑：

我犯的愚蠢的初学者错误是addTime和subtractTime实际上是在实现一个协议，他们设置了另一个类中“存在”的属性，这就是我无法访问它的原因！另一个需要该协议的类正在创建一个新的类实例，其中写入了 addTime 和 subtractTime。

需要做的是将控制器设置为协议的委托。我在 viewDidLoad 方法中这样做了：

```
self.view.delegate = self; 
```

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:03:58.807

在您的头文件中，声明此属性：

```
@property (assign) float timeInSeconds; 
```

在实现文件中：

```
@synthesize timeInSeconds = _timeInSeconds;

- (void)viewDidLoad
{
    [super viewDidLoad];
    _timeInSeconds = 0.0f;
}

- (void)addTime
{
    _timeInSeconds += 5.0f;
} 
```

这应该初始化`timeInSeconds`为零，然后每次调用时将其值增加 5 `addTime`。要在标签中使用其值：

```
- (void)updateLabelTime
{
   self.label.text = [NSString stringWithFormat:@"%f", _timeInSeconds];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:17:34.377

在您的自定义 getter 中，您将标量值分配给对象属性。事实上，将零分配给对象属性相当于将对象设置为零。

你需要做的是：

```
- (float)timeInSeconds
{
    if (!_timeInSeconds) {
        _timeInSeconds = [NSNumber numberWithFloat:0.0f];
        // or alternatively with the latest version of objective c
        // you can more simply use:
        // _timeInSeconds = @(0.0f);
    }

    return _timeInSeconds;
} 
```

# jquery - 来自 Youtube 的 iFrame。使用 jQuery 获取点击事件

> ID：16037058
> 
> 赞同：0
> 
> 时间：2013-04-16T12:27:35.747
> 
> 标签：jquery, html, ajax, post, youtube

我的应用程序（缩略图）中有来自 youtube 的 8 个视频的列表。我需要检测其中一个视频中的点击事件，并且它们通过`AJAX`( `$.post()`) 将视频加载到相同的`<div>`. 所以，我有一个问题......我无法在`iFrame`. 对于我的项目（可访问性），如果没有播放按钮，我不能像 youtube 在缩略图中使用的那样使用纯图像！（这个项目是为了智障孩子使用youtube，必须遵守很多规则！）

我使用 jQuery 框架！有什么解决办法吗？

# android - facebook app 如何实现可拖动的浮动Button

> ID：16037060
> 
> 赞同：9
> 
> 时间：2013-04-16T12:27:37.760
> 
> 标签：android, button, draggable, floating

我正在尝试获取一些有关如何在新版本的应用程序中实现像 Facebook 那样的按钮的信息。实际上，我不确定这个按钮是来自 Facebook 还是来自 Facebook messenge 应用程序，但这是获得我想要实现的示例的最简单方法。

他们在收到新消息通知时在任何地方添加了一个可拖动的浮动按钮，有人知道他们是如何实现的吗？

提前致谢。

编辑：

Toucher：其他使用我想要实现的应用程序。就在下面可以找到来自 Google Play 的链接

[https://play.google.com/store/apps/details?id=com.gau.go.touchhelperex&feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5nYXUuZ28udG91Y2hoZWxwZXJleCJd](https://play.google.com/store/apps/details?id=com.gau.go.touchhelperex&feature=nav_result#?t=W251bGwsMSwxLDMsImNvbS5nYXUuZ28udG91Y2hoZWxwZXJleCJd)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T18:21:32.100

看看这是否有帮助

[http://forum.xda-developers.com/showthread.php?t=1688531](http://forum.xda-developers.com/showthread.php?t=1688531)

该库在应用程序外部具有拖动视图

# java - JavaFX：多次使用线程

> ID：16037062
> 
> 赞同：10
> 
> 时间：2013-04-16T12:27:40.857
> 
> 标签：java, multithreading, javafx-2, javafx

我是 JavaFX 的新手，我的线程有点问题：我可以执行两次，但我找不到原因。

这是我的代码的总结：

```
Task<Void> task = new Task<Void>() {
    @Override public Void call() throws ImageLoadedException, HomographyException, IOException {
        try{
            System.out.println("GO !");
            return null;
        }
        catch (Exception e){
            e.printStackTrace();
        }
        return null;
    }
    @Override
    protected void succeeded() {
        super.succeeded();
        System.out.println("SUCCEEDED");
     }
};

@FXML protected void launch(ActionEvent event){
    new Thread(task).start();
} 
```

当我第一次单击启动线程的按钮时，我的任务运行没有任何问题（我的控制台显示“GO！”和“SUCCEEDED”）。

但是，如果我再次单击，则不会有任何附加内容。难道我做错了什么 ？我们不能多次使用线程吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T13:13:49.523

来自 [Thread.start()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29) 文档：**否**

> 多次启动一个线程是不合法的。特别是，线程一旦完成执行就可能不会重新启动。

来自[JavaFX 中的并发](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)教程：

> Task 类定义了一个不能重复使用的一次性对象。如果您需要一个可重用的 Worker 对象，请使用 Service 类。

因此，您必须考虑[Service](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Service.html)类而不是[Task](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html)。

* * *

**编辑**：这应该适合你：

~~服务服务=新服务<>（任务）；~~

```
//Updated use this to create a new Service object instead
    Service service = new Service() {
    @Override
    protected Task createTask() {
        return new Task() {
            @Override
            protected Void call() throws Exception {
                //Your codes here
                return null;
            }
        };
    }
};

@FXML protected void launch(ActionEvent event){
     if (!service.isRunning()) {
        service.reset();
        service.start();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T21:17:19.593

用一个按钮可以触发新任务

```
 Button btn = new Button();
                    btn.setText("New task");
                    btn.setOnAction(new EventHandler<ActionEvent>() {
                        @Override
                        public void handle(ActionEvent event) {
                            Executor ex=new Executor("Task"+count);
                            ex.start();
                            count++;
                            System.out.println("Task  Starting...");
                        }
                    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T21:14:14.130

用包装类做

```
 import java.io.IOException;
            import javafx.concurrent.Task;

            public class Executor {
                private String name;
                private Task<Void> task;

                public Executor(final String name) {
                    this.name=name;
                    task = new Task<Void>() {
                        @Override
                        public Void call() throws IOException, InterruptedException {
                            try {
                                int i=0;
                                while(i<20){
                                    System.out.println(name);
                                    Thread.sleep(2000);
                                    i++;
                                }
                                return null;
                            } catch (IllegalThreadStateException e) {
                                System.out.println(e);
                            }
                            return null;
                        }

                        @Override
                        protected void succeeded() {
                            super.succeeded();
                            try {
                                System.out.println(name+"  finish");
                            } catch (Exception ex) {
                                System.out.println(ex);
                            }
                        }
                    };
                }

                public void start() {
                    try {
                                Thread th = new Thread(task);
                                th.start();
                            } catch (Exception ex) {
                                System.out.println(ex);
                            }
                }
            } 
```

# r - 根据一列中的最小值聚合以删除数据表中的重复项

> ID：16037074
> 
> 赞同：3
> 
> 时间：2013-04-16T12:28:10.343
> 
> 标签：r, data.table

我对R中的data.table包很陌生。data.table的版本是1.8.2。

我的数据表有大约 2100 万行，所以理想情况下我很想使用数据表方法来解决我的问题，因为它是当今处理大数据的方法。以下是示例数据和代码：

```
samp_data <- data.frame(user1 = c(24, 24, 24, 56, 75, 75),
                        user2 = c(43, 43, 57, 34, 61, 61),  
                        amount1 = c(1, 4, 3, 2, 6, 8), 
                        amount2 = c(4, 7, 9, 3, 5, 6), 
                        PURCH_DATE_1 = as.Date(c("2012-01-01", "2012-04-29", 
                        "2012-03-02", "2012-06-15", "2012-03-17", "2012-09-25")), 
                        PURCH_DATE_2 = as.Date(c("2012-04-01", "2012-01-25", 
                        "2012-05-21","2012-08-18", "2012-04-03", "2012-10-29")))
samp_data$DIFF_DAYS <- abs(as.numeric(samp_data$PURCH_DATE_1-
samp_data$PURCH_DATE_2))
samp_data_new<-data.table(samp_data) 
```

我想取回一个包含 7 个原始列但在 user1 和 user2 列中有重复对的数据表，将保留 DIFF_DAYS 列中具有最小值的行。

假设我让你们中的一些人对我想要的东西感到困惑，下面的代码包含所需的输出：

```
samp_data_desired<-data.frame(user1=c(24,24,56,75),user2=c(43,57,34,61),
                              amount1=c(1,3,2,6),amount2=c(4,9,3,5),
                              PURCH_DATE_1=as.Date(c("2012-01-01","2012-03-02",
                              "2012-06-15","2012-03-17")),
                              PURCH_DATE_2=as.Date(c("2012-04-01","2012-05-21",
                              "2012-08-18","2012-04-03")),
                              DIFF_DAYS=c(91,80,64,17)) 
```

我知道如何使用 DT[, min(col1), by=user1] 执行简单的聚合来找到每个 user1 的平均值、最小值和最大值，但我无法成功使用唯一或重复的函数。我试过了：

```
samp_data_check <- data.table(samp_data, key=c("user1", "user2", 
                            "amount1", "amount2", "PURCH_DATE_1",
                            "PURCH_DATE_2")) 
```

和

```
samp_data_test <- samp_data_check[, unique(DIFF_DAYS), by=c("user1", 
                  "user2", "amount1", "amount2", "PURCH_DATE_1", 
                  "PURCH_DATE_2")] 
```

以及一些变化，但我感到非常困惑，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T12:40:11.547

`data.table`我能想到的第一种方式（除了将键列设置为之外没有太大关系`DIFF_DAYS`）。假设你`data.table`是 DT：

```
setkey(DT, "DIFF_DAYS")
DT[!duplicated(DT[, c("user1", "user2")])] 
```

* * *

另一种方法（更多`data.table`）：

```
setkey(DT, "user1", "user2", "DIFF_DAYS")
key.DT <- unique(DT[, 1:2])
DT[key.DT, mult = "first"] 
```

# matlab - Matlab dijkstra最短路径：节点列表

> ID：16037076
> 
> 赞同：0
> 
> 时间：2013-04-16T12:28:12.700
> 
> 标签：matlab, nodes, dijkstra, shortest-path, adjacency-matrix

如果您能向我推荐一个包含允许我列出的函数的 Matlab 库，我将非常高兴：1）由邻接矩阵标识的网络上从源节点到目标节点的所有路径 2）在应用 dijkstra 算法时，我想获取节点列表，不仅是边的距离。

我已经看过这个，但它只是提供最短的距离。

谢谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:01:06.723

我不知道图书馆，但是 1) 自己编写应该很简单。

如果要分析是否可以从另一个节点到达一个节点，只需计算：

![根据 J. Lunze 计算可达性：Ereignisdiskete Systeme](https://i.stack.imgur.com/fbHPv.gif)

具有节点数 N 和邻接矩阵 G

第 k 个矩阵为您提供有关 k 步可达性的信息。如果您使用*syms*命名矩阵 G 中的边，您将能够识别结果矩阵 E 中的所有可能路径。

# openerp - Openerp - stock.picking.in 函数中的 AttributeError

> ID：16037088
> 
> 赞同：0
> 
> 时间：2013-04-16T12:28:51.347
> 
> 标签：openerp

真的在努力解决这个问题：

我继承了 stock.picking.in 并添加了几列。然后我添加了一个函数字段。

在函数字段引用的函数中，如果我不使用来自 stock.picking.in 对象的任何属性，它就会起作用。当我使用对象中的任何值时，它开始随机给出 'AttributeError:' 和一些属性。它没有指定任何其他原因或原因。

代码：

```
class stock_picking_custom(osv.osv):
_name = 'stock.picking.in'
_inherit = 'stock.picking.in'
_table = "stock_picking"

def calc_royalty(self, cr, uid, ids, field_name, arg, context=None):
    if not ids: return {}
    res = {}
    for line in self.browse(cr, uid, ids, context=context):
        res[line.id] = 0 #line.royalty_rate * line.loading_netweight

    return res   

_columns = {
            'loading_netweight': fields.float('Net weight at loading', digits=(16,2), help="Net weight at loading (interior weight)"),
            'royalty_date': fields.date('Royalty Issue date'),
            'royalty_number' : fields.char('Royalty Number', size=64),
            'royalty_rate' : fields.float('Royalty Rate (p. ton)', digits=(16,2)),
            'royalty_amount' : fields.function(calc_royalty, type='float', digits=(16,2), string='Royalty Amount', store=True, select=True)
            }
stock_picking_custom() 
```

我已经注释掉了我想要使用的行。当我把这行代码放回代码中时，它会在Royalty_date（例如）上给出属性错误，这在函数中甚至都没有提到。

请指导。

**编辑：** *我尝试了与 purchase.order 完全相同的代码，并且效果很好。stock.picking.in 有什么不同？*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:35:20.817

我没有花太多时间在上面，但我知道该行与 stock.picking.in 对象一起出现，您定义的字段存储在 stock_picking 表中，这就是为什么它可能会使用 stock.picking 搜索该字段.in，没有得到和错误来了。对象和表中定义的字段可能存在问题，但不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:32:41.513

好的，在**交付**插件的**库存**模块中找到了答案。所以这是一个与继承顺序等相关的框架限制问题。

 **在这里分享，以防有人遇到类似情况。

为了解决这个问题，我在 stock.picking 和 stock.picking.in 中重复了相同的字段。然后我从picking.in类中调用picking类的calc函数。

代码：

```
class stock_picking_custom(osv.osv):
_name = 'stock.picking'
_inherit = 'stock.picking'

def calc_royalty(self, cr, uid, ids, field_name, arg, context=None):
    if not ids: return {}
    res = {}

    for line in self.browse(cr, uid, ids, context=context):
        res[line.id] = line.royalty_rate * line.loading_netweight

    return res   

_columns = {
            'loading_netweight': fields.float('Net weight at loading', digits=(16,2), help="Net weight at loading (interior weight)"),
            'royalty_date': fields.date('Royalty Issue date'),
            'royalty_number' : fields.char('Royalty Number', size=64),
            'royalty_rate' : fields.float('Royalty Rate (p. ton)', digits=(16,2)),
            'royalty_amount' : fields.function(calc_royalty, type='float', digits=(16,2), string='Royalty Amount', store=True, select=True)
            }

stock_picking_custom()

class stock_picking_in_custom(osv.osv):
_name = 'stock.picking.in'
_inherit = 'stock.picking.in'
_table = "stock_picking"

def calc_royalty(self, cr, uid, ids, field_name, arg, context=None):
    return self.pool.get('stock.picking').calc_royalty(cr,uid,ids,field_name,arg,context=context)

_columns = {
            'loading_netweight': fields.float('Net weight at loading', digits=(16,2), help="Net weight at loading (interior weight)"),
            'royalty_date': fields.date('Royalty Issue date'),
            'royalty_number' : fields.char('Royalty Number', size=64),
            'royalty_rate' : fields.float('Royalty Rate (p. ton)', digits=(16,2)),
            'royalty_amount' : fields.function(calc_royalty, type='float', digits=(16,2), string='Royalty Amount', store=True, select=True)
             }
 stock_picking_in_custom() 
```**

# java - Java - 使用特殊符号后如何删除单词

> ID：16037092
> 
> 赞同：1
> 
> 时间：2013-04-16T12:29:02.267
> 
> 标签：java, stack

如何删除后跟特殊字符（#）的单词？例如：从短语：Eva have green#eyes 我想删除单词“green”（Eva have eyes），即以空格结尾的单词。

我也有删除@后面的整行的问题，

例如：`Eva have green@eyes`---> 并且应该是“ `eyes`”我的代码（我不知道如何完成它）：

```
class Stack {

public Stack() {
    del = '&';    //that method deletes only one character
                  //ex: ab&cd ---> acd
    destroy = '@';
    delWord = '#';
    stack = new Stack<Character>();

}

public void methods(String string)
{

    for (int i=0; i< string.length(); i++) //that method deletes only one character
                                       //ex: ab&cd ---> acd
    {
       if ( del == string.charAt(i) )
       {
          if (stack.size() > 0)
             stack.remove(stack.size()-1);
       }
       else if( destroy == string.charAt(i) )
      {
       stack.remove(stack.size());

      }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:33:27.407

是的，使用 String 类中的 replaceAll 方法，例如

```
String myString = "eyes#green"
myString = myString.replaceAll("#.*", " "); 
```

第一个参数是匹配您要替换的正则表达式。在这种情况下，hashtag 后跟任何内容（即匹配字符串的其余部分）。

第二个参数是它应该被替换的内容，在本例中是一个空格。

根据您的目的修改正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:36:54.317

要删除后面的整行`@`，试试这个：

```
String s = "Eva have green@eyes";
s = s.replaceAll(".*@"," ");
System.out.println(s); 
```

**输出 ：** `eyes`

* * *

并删除之前的单词`#`，试试这个：

```
String s= "Eva have green#eyes ";
s= s.replaceAll("\\s*(\\w+)#", " ");
System.out.println(s); 
```

**输出 ：** `Eva have eyes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:37:59.143

您可以将字符串转换为数组：

```
String[] string = plainText.split(" ,;[(!)*=]")//not using your # 
```

然后将其转换为 ArrayList，使用简单的`for(String word: arraylist)` 检查每个单词是否存在 #，如果您发现这样的单词不要将其写入另一个 ArrayList 或直接写入 String 数组

# iphone - 为什么我想着色时会丢失 UIImage 质量

> ID：16037093
> 
> 赞同：1
> 
> 时间：2013-04-16T12:29:06.970
> 
> 标签：iphone, ios, objective-c, ipad, uikit

我目前正在使用此代码`UIImage`用所需颜色为白色着色。但经过处理后，图像（嵌入在原始图像大小良好的图像中）似乎`UIImageView`失去了质量。

```
+ (UIImage *)imageNamed:(NSString *)name withColor:(UIColor *)theColor
{
    UIImage *baseImage = [UIImage imageNamed:name];
    UIGraphicsBeginImageContext(baseImage.size);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGRect area = CGRectMake(0, 0, baseImage.size.width, baseImage.size.height);
    CGContextScaleCTM(ctx, 1, -1);
    CGContextTranslateCTM(ctx, 0, -area.size.height);
    CGContextSaveGState(ctx);
    CGContextClipToMask(ctx, area, baseImage.CGImage);
    [theColor set];
    CGContextFillRect(ctx, area);
    CGContextRestoreGState(ctx);
    CGContextSetBlendMode(ctx, kCGBlendModeMultiply);
    CGContextDrawImage(ctx, area, baseImage.CGImage);
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

有关如何解决此问题的任何建议？

# sql - 如何将 MS ACCESS 文件导入 SQL SERVER

> ID：16037095
> 
> 赞同：0
> 
> 时间：2013-04-16T12:29:09.307
> 
> 标签：sql, sql-server-2008, ms-access, import, oledb

我有一个 ACCESS 文件（名称=guid），其中包含一个名为`dbo_Ps`5 列的表。我想直接在 SQL SERVER 中导入它。

我试过这个：

```
INSERT INTO testage SELECT * FROM OPENDATASOURCE('Microsoft.ACE.OLEDB.12.0','Data Source=C:\App_TempFiles\cbc622a8-695c-4867-a26c-de18618cf642;')...[dbo_Ps] 
```

以前我在 SQL SERVER 中激活了`OPENROWSET`和支持。`OPENDATASOURCE`我还安装了 MS Office 2010 Pro 64 位。

最后我收到了这个错误信息：

```
Msg*7399, Niveau*16, État*1, Ligne*1
Le fournisseur OLE DB "Microsoft.ACE.OLEDB.12.0" du serveur lié "(null)" a rapporté une erreur. Accès refusé.
Msg*7301, Niveau*16, État*2, Ligne*1
Impossible d'obtenir l'interface requise ("IID_IDBCreateCommand") à partir du fournisseur OLE DB "Microsoft.ACE.OLEDB.12.0" du serveur lié "(null)".

Le fournisseur OLE DB "Microsoft.ACE.OLEDB.12.0" du serveur lié "(null)" a rapporté une erreur. Accès refusé.
Msg*7301, Niveau*16, État*2, Ligne*1
Impossible d'obtenir l'interface requise ("IID_IDBCreateCommand") à partir du fournisseur OLE DB "Microsoft.ACE.OLEDB.12.0" du serveur lié "(null)". 
```

我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:31:27.207

尝试 SQL Server Management Studio 中的 SQL Server 导入和导出向导：

![SQL Server 导入和导出向导](https://i.stack.imgur.com/vQXXo.png)

# xaml - WP8 - 访问父级的数据上下文

> ID：16037096
> 
> 赞同：6
> 
> 时间：2013-04-16T12:29:10.460
> 
> 标签：xaml, binding, windows-phone-8, commandbinding

如何在 windows phone 8 中访问父元素的数据上下文？AncestorType 在 WP8 中不可用。

```
<ItemsControl x:Name="Elements" ItemsSource="{Binding MyList}" Grid.Row="2" Grid.Column="3">
<ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel  />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Button Content="e"  Width="100" Height="100" Command="{Binding MyCommand" />
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

“MyCommand”是在“MyList”之外定义的。那么如何从我的按钮访问根数据上下文（DataContext = MyClass）。MyCommand 在 MyClass 类中定义。

提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T19:58:30.513

您可以改用 ElementName Binding。如果您的根网格（直接在您的页面内）称为 LayoutRoot：

```
<Button Command="{Binding DataContext.MyCommand, ElementName=LayoutRoot}" /> 
```

# javascript - 使用从 url 获取值 json 值

> ID：16037098
> 
> 赞同：0
> 
> 时间：2013-04-16T12:29:20.350
> 
> 标签：javascript, json

我查看了各种帖子，现在使用一个函数从 url 检索值，但无法摆脱 %20 个字符。发送的数据是 json，这里是在 url 中发送它的代码：

```
'<a href="' + url +"?id="+ json_data[i].product_id + 
...
"&description="+ json_data[i].description + '"> //includes white spaces 
```

在另一页上我有：

```
function getUrlVars()
{
 var vars = [], hash;
 var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
 for(var i = 0; i < hashes.length; i++)
 {
    hash = hashes[i].split('=');
    vars.push(hash[0]);
    vars[hash[0]] = hash[1];
 }
return vars;
}

var selectedData=getUrlVars();
document.write(selectedData.description); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:31:18.780

使用`encodeURIComponent`和`decodeURIComponent`函数：

```
"&description="+ encodeURIComponent(json_data[i].description) + '" 
```

和：

```
decoreURIComponent(hash[1]); 
```

这将照顾空间，但如果`&`描述中有标志，也会使事情正常进行。
例如：

```
> hash
["clean", "Machine%20washable%2030%20degrees%20reduced%20spin"]
> decodeURIComponent(hash[1]);
"Machine washable 30 degrees reduced spin" 
```

# jquery - 使用 JQuery 将动态 HTML 元素添加到 div 而不保持黑白连接

> ID：16037100
> 
> 赞同：0
> 
> 时间：2013-04-16T12:29:23.357
> 
> 标签：jquery, html

现在我有三个函数和两个按钮，可以将元素添加到 HTML div 标签：

```
<style>
#draggable { width: 600px; height: 800px; padding: 0.5em;}
#EditorArea { width: 600px; height: 800px; padding: 0.5em; border: 1px solid black}
</style>
<script type="text/javascript">
 $(function() {
$( "#draggable" ).draggable();
}); 

function MinMax() {
 $("#draggable").append("<table border= 1px><tr><td>Element</td><td><input type='textbox'/></td></tr><tr><td>Marked as</td><td><input type='textbox'/></td><tr><td>Min</td><td><input type='textbox'/></td><tr><td>Max</td><td><input type='textbox'/></td><tr><td>Преди ремонт</td><td><input type='textbox'/></td><tr><td>След ремонт</td><td><input type='textbox'/></td><tr><td>Time before</td><td><input type='textbox'/></td><tr><td>Time after</td><td><input type='textbox'/></td></table>");
};

function ShowDate() {
 $("#draggable").append("<p class='dateTime' style='width:120px; border: 2px solid black'>DateTime</p>");
}

</script>
</head>
<body>
<button type="button" onclick="MinMax()">MinMax</button>
<button type="button" onclick="ShowDate()">DateTime</button>
<div id="EditorArea">
<div id="draggable"></div>
</div> 
```

现在默认行为是每次我添加新元素时，它都会连接到前一个元素，依此类推，因此当我移动一个元素时，我会移动所有添加的元素。我想要的是能够从其他元素中自由移动每个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:39:01.380

试试这个[FIDDLE](http://jsfiddle.net/rajesh007/LKd8S/1/)

```
 $(function() {
        $( "#draggable" ).children().draggable();
         $('#MinMax').click(function(){
              $("#draggable").append("<table border= 1px><tr><td>Element</td><td><input type='textbox'/></td></tr><tr><td>Marked as</td><td><input type='textbox'/></td><tr><td>Min</td><td><input type='textbox'/></td><tr><td>Max</td><td><input type='textbox'/></td><tr><td>Преди ремонт</td><td><input type='textbox'/></td><tr><td>След ремонт</td><td><input type='textbox'/></td><tr><td>Time before</td><td><input type='textbox'/></td><tr><td>Time after</td><td><input type='textbox'/></td></table>");
             $( "#draggable" ).children().draggable();
         });
          $('#ShowDate').click(function(){
               $("#draggable").append("<p class='dateTime' style='width:120px; border: 2px solid black'>DateTime</p>");
              $( "#draggable" ).children().draggable();
          });
    }); 
```

# vba - VBA POWERPOINT：从PowerPoint中缩小Word图片

> ID：16037101
> 
> 赞同：0
> 
> 时间：2013-04-16T12:29:24.473
> 
> 标签：vba, ms-word, powerpoint

当我在 word 宏中使用此功能将所有图像缩小到 9.3 厘米时，此功能起作用：

```
Sub ShrinkWordImages()
Dim iShp As InlineShape

For Each iShp In ActiveDocument.InlineShapes
    iShp.LockAspectRatio = msoTrue
    iShp.Width = CentimetersToPoints(9.3)
Next iShp

End Sub 
```

但是，当我尝试从 powerpoint 宏中运行它时，引用一个 word 文档（所有引用都正确到位），word 文档中的图像就会消失。从 powerpoint 我使用它，它的唯一区别是：

```
For Each iShp In wrdDoc.InlineShapes 
```

wrdDoc 已正确声明和设置的位置。

宏完成后，PowerPoint 也会崩溃。我尝试将 iShp 更改为变体，但这没有帮助。

**编辑**：所以我现在已经确定 CentimetersToPoints(9.3) 在 powerpoint 中返回 0，而在 Word 中返回 263 左右。现在正在调查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:59:30.633

`CentimetersToPoint`在您的情况下，没有什么比 PowerPoint 更适合您了。您需要参考您的 Word 对象变量来获取维度。也许是这样的：

```
Sub CentimetersTo_Word()

    Dim WRD As Object
    Set WRD = CreateObject("Word.Application")

    Debug.Print WRD.centimeterstopoints(10)

End Sub 
```

因此，只需在之前添加您的 Word 应用程序参考`CentimetersToPoint`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:57:36.057

刚做了我自己的方法……它奏效了。

```
Function CmToPt(pt As Single) As Single
CmToPt = pt * 28.35
End Function 
```

不知道为什么正常的不工作，但这成功了。

# memory - GNU Guile SCM 到 char*

> ID：16037102
> 
> 赞同：2
> 
> 时间：2013-04-16T12:29:26.217
> 
> 标签：memory, scheme, gnu, guile

我对 FFI 和 GNU Guile 比较陌生，我正在编写绑定到一个大量使用`char*`变量的库。这是来自函数的代码，它包装了 C 函数：

```
static inline char*
scm_to_ascii_string(SCM string)
{
  return SCM_UNBNDP(SCM) ?  NULL
    : scm_to_stringn(string, NULL, "ascii", SCM_FAILED_CONVERSION_ERROR);
}

SCM_DEFINE(func, "func", ...)
{
  ...
  char *server_pass = scm_to_ascii_string(scm_server_pass);
  char *username = scm_to_ascii_string(scm_username);
  char *realname = scm_to_ascii_string(scm_realname);
} 
```

问题是任何对转换函数的调用都可能引发错误，从而导致内存泄漏。我能做些什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T17:04:57.650

您可以将输出部分作为参数，例如：

void scm_to_ascii_string(SCM 字符串, char* &out);

编辑：

我猜您的意思是c端有哪些异常处理程序方法，我认为手册中有关C语言编程的两个部分之一中可能有一些内容。

# ruby - 返回哈希的 if/else

> ID：16037103
> 
> 赞同：0
> 
> 时间：2013-04-16T12:29:28.333
> 
> 标签：ruby, ruby-on-rails-3, if-statement, hash

我想对返回的哈希执行查询，但在哈希上获得未定义的方法 <=。我的查询看起来像这样

```
<% if @fixture_date <= (Date.today + 7.days) %>
 Display fixtures whos date falls in this range
<% else %>
 no fixtures
<% end %> 
```

我有返回按日期分组的固定装置的表格

```
 <%= form_tag controller: 'predictions', action: 'create', method: 'post' do %>
 <% @fixture_date.sort.each do |date, fixture| %>
 <h5><%= date_format(date) %></h5><br>
 <% fixture.each do |fixture|%>

<%= fixture.home_team %> vs <%= fixture.away_team %>
<%= hidden_field_tag "predictions[][home_team]", fixture.home_team %>
<%= hidden_field_tag "predictions[][away_team]", fixture.away_team %>
<%= text_field_tag "predictions[][home_score]" %>
<%= text_field_tag "predictions[][away_score]" %><br />

<%= hidden_field_tag "predictions[][fixture_date]", fixture.fixture_date %>
<%= hidden_field_tag "predictions[][fixture_id]", fixture.id %>
<%= hidden_field_tag "predictions[][user_id]", current_user.id %>
<% end %>
<%= submit_tag "Submit predictions" %>
<% end %>
<% end %> 
```

返回的哈希示例

```
2013-04-17"=>[#<Fixture id: 3, home_team: "Man City", away_team: "Wigan", fixture_date: "2013-04-17", kickoff_time: "19:45", created_at: "2013-04-14 14:09:06", updated_at: "2013-04-14 14:09:06", prediction_id: nil>, #<Fixture id: 4, home_team: "West Ham", away_team: "Man Utd", fixture_date: "2013-04-17", kickoff_time: "19:45", created_at: "2013-04-14 14:09:06", updated_at: "2013-04-14 14:09:06", prediction_id: nil>, #<Fixture id: 5, home_team: "Fulham", away_team: "Chelsea", fixture_date: "2013-04-17", kickoff_time: "20:00", created_at: "2013-04-14 14:09:06", updated_at: "2013-04-14 14:09:06", prediction_id: nil>], 
```

我是否需要查询键的值，如果需要，我将如何去做？我猜如果我返回一个数组，那么这会起作用吗？还是我误解了这个？

然后我考虑在控制器中这样做并做到了这一点

```
@fixture_date.select{ |key, hash| hash["fixture_date"] <= (Date.today + 7.days) } 
```

但这次我似乎又遇到了一个错误

```
Cant convert String into Integer 
```

谢谢

编辑

```
def new
 @prediction = Prediction.new
 @fixtures = Fixture.all
 @fixture_date = @fixtures.group_by {|fd| fd.fixture_date}
 @fixture_date.select{ |k, v| v['fixture_date'].to_date <= (Date.today + 7.days) }
 end 
```

看法

```
<%= form_tag controller: 'predictions', action: 'create', method: 'post' do %>
<% @fixture_date.sort.each do |date, fixture| %>
<h5><%= date_format(date) %></h5><br>

<% fixture.each do |fixture|%>

<%= fixture.home_team %> vs <%= fixture.away_team %>
<%= hidden_field_tag "predictions[][home_team]", fixture.home_team %>
<%= hidden_field_tag "predictions[][away_team]", fixture.away_team %>
<%= text_field_tag "predictions[][home_score]" %>
<%= text_field_tag "predictions[][away_score]" %><br />

<%= hidden_field_tag "predictions[][fixture_date]", fixture.fixture_date %>
<%= hidden_field_tag "predictions[][fixture_id]", fixture.id %>
<%= hidden_field_tag "predictions[][user_id]", current_user.id %>
<% end %>
<% end %>
<%= submit_tag "Submit predictions" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:45:32.397

尝试 Date.parse：

```
@fixture_date.select! { |key, hash| Date.parse(hash["fixture_date"]) <= (Date.today + 7.days) } 
```

# ruby - 确保一个值在一个集合中，如果不是，则设置一个默认值

> ID：16037105
> 
> 赞同：2
> 
> 时间：2013-04-16T12:29:34.337
> 
> 标签：ruby

我正在做这样的事情来检查参数是否在集合中，如果不是，则设置默认值。它看起来不必要地罗嗦：

```
allowed_types = [:poem, :product, :news, :facebook, :tweet]
@type = params[:type]
@type = :poem unless allowed_types.include?(@type) 
```

完成此任务的最 Ruby 方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:33:54.893

那这个呢：

```
allowed_types = [:poem, :product, :news, :facebook, :tweet]
@type = allowed_types.include?(params[:type]) ? params[:type] : :poem 
```

* * *

看到我们在这里，我会说恕我直言，类似于`Hash#fetch`;的 Array 方法会很有用。就像是：

```
class Array
  # `fetch` is already taken (index fetching)
  def fetch_value(something, ifnone = nil)
    include?(something) ? something : ifnone
  end
end

[:poem, :product, :news].fetch_value(:news, :poem) #=> :news
[:poem, :product, :news].fetch_value(:salad, :poem) #=> :poem 
```

所以有人可以这样做：

```
@type = allowed_types.fetch_value(params[:type], :poem) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:34:33.973

你可以像这样简化它：

```
allowed_types = [:poem, :product, :news, :facebook, :tweet]
@type = allowed_types.include?(params[:type]) ? params[:type] : :poem 
```

但是你真正应该做的是验证，尽量保留所有的逻辑。也许是这样的：

```
validates :type, inclusion: { in:  %w(poem product news facebook tweet) } 
```

对于`params`我假设您在 rails 或 synatra 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T12:45:28.650

```
a = [1,2,4,5]
var = a.detect(proc{"not present"}){ |x| x == 55 }
p var #=> "not present"

a = [1,2,4,5]
var = a.detect(proc{"not present"}){ |x| x == 4 }
p var #=> 4

a = [1,2,4,5]
var = a.detect(proc{"not present"}){ |x| x == 1 }
p var #=> 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T19:42:22.653

使用身份哈希和[`Hash#fetch`](http://www.ruby-doc.org/core-2.0/Hash.html#method-i-fetch).

```
allowed_types = Hash[ [:poem, :product, :news, :facebook, :tweet].map{|e| [e,e]} ]
@type = allowed_types.fetch(@type, :poem) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T12:40:54.750

你可以在模型中做这样的事情：

```
class ModelName < ActiveRecord::Base
   ALLOWED_TYPES = Hash[[:poem, :product, :news, :facebook, :tweet].map{|v| [v,v]}] # { :poem => :poem ...
end 
```

在控制器中，您可以对 ALLOWED_TYPES 使用 fetch 方法：

```
ModelName::ALLOWED_TYPES.fetch(params[:type], :poem) # it will set as default poem 
```

# mysql - MySQL 按日期从 3 个表中选择

> ID：16037111
> 
> 赞同：0
> 
> 时间：2013-04-16T12:29:51.600
> 
> 标签：mysql, mysql-5.5

我有 3 个表音频、视频、图像

他们都有添加日期和uid

我想从uid = 1的这些表中选择所有（选择*）并按添加日期对所有结果进行排序，非常困惑查询会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:51:30.433

如果这些表包含相同的信息，您可以使用联合，例如：

```
select name, date_added
from(
  select video_name as name,date_added, uid
  from videos
  union all
  select audio_name as name,date_added, uid
  from audios
  union all
  select image_name as name,date_added, uid
  from images
) u
where uid = 1
order by date_added 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:46:48.097

如果 3 个表有 1 个相同的字段，如 groupID 或类似的字段，您可以使用左连接或内连接，具体取决于您想要的输出。

使用左连接：

```
select * from videos v left join audios a on v.groupID = a.groupID
left join images i on v.groupID = i.groupID 
```

注意：如果您想使用其他类型的连接，只需将单词“left”更改为“inner”。它不必具有相同的字段名称“groupID”。但是有必要有一个共同的功能，或者它代表一些相互关联的东西。

链接：这里有一些链接可以帮助你 [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp) [http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql -joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

享受编码..:)

# php - PHP：使用 IF 语句生成 SQL 困难

> ID：16037117
> 
> 赞同：0
> 
> 时间：2013-04-16T12:30:02.063
> 
> 标签：php, mysql, if-statement, mysqli

我在使用 IF 语句“选择”一些要运行的 MySQL 代码时遇到问题。这是我的代码：

```
if ($numRows == 0 && count($terms) == 3) {
    $query2 .= " AND ( i.ING = '" . join("' OR i.ING = '", $terms) . "')". $queryType ." GROUP BY r.recipeID
    HAVING COUNT(DISTINCT i.ING ) = 2)";
    $termCount = 2;

}

if ($numRows == 0 && $termCount == 2) {
    $query2 .= " AND ( i.ING = '" . join("' OR i.ING = '", $terms) . "')". $queryType ." GROUP BY r.recipeID
HAVING COUNT(DISTINCT i.ING ) = 1)"; 
```

这输出：

```
 AND ( i.ING = 'wonton wrappers' OR i.ING = 'grape jelly' OR i.ING = 'lard') GROUP BY r.recipeID HAVING COUNT(DISTINCT i.ING ) = 2) 
AND ( i.ING = 'wonton wrappers' OR i.ING = 'grape jelly' OR i.ING = 'lard') GROUP BY r.recipeID HAVING COUNT(DISTINCT i.ING ) = 1) 
```

但是，我只希望第二行成为我要使用的查询的一部分；但是因为第一个 if 语句也总是正确的，所以它也输出该行。

所以我想基于这两个陈述的结果是：

```
AND ( i.ING = 'wonton wrappers' OR i.ING = 'grape jelly' OR i.ING = 'lard') GROUP BY r.recipeID HAVING COUNT(DISTINCT i.ING ) = 1) 
```

这可能是我一直在看它太久的情况，并且无法注意到它是否是我忽略的一些最简单的事情。

有任何想法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:35:24.667

假设这是唯一受影响的代码，我认为您最好的选择是简单地替换`if ($numRows == 0 && $termCount == 2)`为`elseif ($numRows == 0 && $termCount == 2)`. （基本上，将其设置为 else if 子句以排除欺骗的可能性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:42:14.267

我建议像这样拆分逻辑：

```
if ($numRows == 0) {
  $query2 .= " AND ( i.ING = '" . join("' OR i.ING = '", $terms) . "')$queryType GROUP BY r.recipeID";

  $query2 .= " HAVING COUNT(DISTINCT i.ING) = " . (count($terms) == 3 ? 2 : 1);
} 
```

利用您的分支机构基本相同的事实。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:34:00.720

在您的第一个 IF 语句中；如果它为 TRUE（并且您输入了该语句），则您将 $termCount 设置为 2。第二个 IF 语句取决于 $termCount == 2。所以现在如果 $numRows 为 0，那么两个语句将始终为 true。寻找不同的方式来触发第二个 IF 语句；或者只是从第一个 IF 语句中删除 $termCount = 2

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:37:16.963

改用 If else 并形成您的语句，以便查询仅在逻辑上应该分配给 $query 。

# java - 谷歌应用引擎 JSP

> ID：16037119
> 
> 赞同：0
> 
> 时间：2013-04-16T12:30:11.767
> 
> 标签：java, google-app-engine, jsp

我创建了一个 Google App Engine 项目，但由于一些 SEO 问题，我想将我的一个页面从 HTML (+ JQuery) 更改为在服务器上呈现的 JSP

这个页面是index.html文件，我怎样才能让它作为一个JSP工作而不重命名它（我不希望用户去index.jsp，而是把index.html当作一个JSP页面）

我已经尝试将它添加到我的 web.xml 中，但它似乎不起作用

```
<servlet>
    <servlet-name>main</servlet-name>
    <jsp-file>/index.html</jsp-file>   (or index.html, same result)
 </servlet> 
```

关于如何解决这个问题的任何想法？

如果我将 index.html 重命名为 index.jsp 文件，一切正常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:23:44.207

您绝对可以在 Servlet 过滤器中执行此操作。

设置过滤器以捕获对 /index.html 的请求

然后在过滤器中返回 index.jsp，因此客户端将其视为 /index.html

前任：

```
 private ServletContext context;

    @Override public void init(FilterConfig arg0) throws ServletException {
        context = arg0.getServletContext();

    }

    @Override public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

        context.getRequestDispatcher("/index.jsp").include(request, response); 

    } 
```

这样做是在响应中包含 /index.jsp。当然，由于您没有 /index.html 文件，因此最终会成为整个响应。

# c# - 处理验证通常看哪些模式很有趣？

> ID：16037121
> 
> 赞同：1
> 
> 时间：2013-04-16T12:30:20.323
> 
> 标签：c#, validation, design-patterns

我正在用 c# 创建一个数独。

用户可以创建一个新的数独。我的数独课：

```
public class Sudoku
{
    #region Datamembers

    private Field[,] grid;
    private byte blockRows;
    private byte blockColumns;
    private Hashtable peers; 
```

用户可以保存新创建的数独。这样做时，会执行一些验证。例如：查看是否所有字段都已填写，查看是否所有字段都为空，查看同一行、列、块中是否没有相同的数字，...

我的验证最终看起来像这样：（它位于数独类中）

```
 public bool IsValid()
    {
        bool isValidSetup = this.IsValidSetup();
        if (!isValidSetup) return isValidSetup;

        return this.IsTrulyValid();
    }

    private bool IsValidSetup()
    {
        bool isEntirelyFilled = this.Is_EntirelyFilled();
        bool isEntirelyEmpty = this.Is_EntirelyEmpty();
        bool hasIdenticalDigits = this.Has_IdenticalDigits();

        this.Add_SetupValidationMessages(isEntirelyFilled, isEntirelyEmpty, hasIdenticalDigits);

        return !isEntirelyEmpty && !isEntirelyFilled && !hasIdenticalDigits;
    }

    private bool IsTrulyValid()
    {
        this.Clean();
        this.Solve();
        bool hasNoSolutions = !this.Is_EntirelyFilled();

        bool hasMultipleSolutions = false;
        if (!hasNoSolutions) hasMultipleSolutions = this.Has_MultipleSolutions();

        this.Add_TrulyValidationMessages(hasNoSolutions, hasMultipleSolutions);

        return !hasNoSolutions && !hasMultipleSolutions;
    } 
```

我想将验证与数独分开，使其成为 OOP。

我研究了策略模式，因为它看起来像是我可以使用的东西，并且在验证中被大量使用。但据我了解的模式，它毕竟不是我需要的；这样做的原因是因为它基于基于某些因素选择验证。我可能错了，但我似乎无法意识到为什么在我的情况下需要它。

我需要另一个类中的一个单独的验证（Is_EntirelyFilled()）。这是唯一一个不仅用于验证数独。那么，我应该把所有这些验证放在 1 类中吗？或者应该为每个验证创建单独的类并单独调用它们？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:38:37.950

您应该有一个 ValidationHandle 作为 Abstract 根据您的需要以不同的方式实现它并将其传递给您的客户端代码。像我记得的那样。

IBrakeBehaveior 应该是你的 IValidationHandle 子是验证类型。

Car 是客户端类，您需要客户端代码中的 IValidationHandle 实例。您需要在客户端代码中通过多态调用 IValidationHandleInstance.Validate() 它知道验证如何执行。

![在此处输入图像描述](https://i.stack.imgur.com/Ltt4j.png)

类似的东西

```
 public interface IValidationHandle 
     {
       bool Validate();         
     }

      //TODOs: Separate classes
      public class IsTrulyValidValidator:IValidationHandle;
      public class IsValidValitor:IValidationHandle;
      public class EntirelyFilledValidator:IValidationHandle;

      class Client
      {
           private IValidationHandle validator=null;
           public void SetValidationHandler(IValidationHandle validator)
           {
             this.validator=validator;
           }
            //Where You need call
            validator.Validate();
       } 
```

# asp.net - 标签中不打印值 货币转换

> ID：16037123
> 
> 赞同：0
> 
> 时间：2013-04-16T12:30:24.243
> 
> 标签：asp.net, web-services

我正在使用货币转换。我想在下拉更改中显示结果。假设我点击印度，它会在标签上显示印度货币。

```
protected void DdlFromCurrency_SelectedIndexChanged(object sender, EventArgs e)
{
    string Result = null;
    string url;

    //Call the web service to get the exchange rate for the two currencies selected by the user 
    url = "http://www.webservicex.net/CurrencyConvertor.asmx/ConversionRate?FromCurrency=" + DdlFromCurrency.SelectedValue + "&ToCurrency=" + DdlToCurrency.SelectedValue + "";
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    StreamReader Stream = new StreamReader(response.GetResponseStream());
    XmlDocument doc = new XmlDocument();
    Result = Stream.ReadToEnd();
    doc.LoadXml(Result);
    shw_courenct.Text = DdlFromCurrency.SelectedValue;
} 
```

我想显示货币价值而不是所选项目的价值。

# java - 如何在 Java 中使用模式来获取像 C 中的“sscanf”这样的组？

> ID：16037124
> 
> 赞同：0
> 
> 时间：2013-04-16T12:30:26.220
> 
> 标签：java, pattern-matching

我有字符串`user@domain:port`

我想从这个字符串中获取用户、域和端口。

所以我创建了正则表达式：

```
public static final String MATCH_USER_DOMAIN_PORT = "^([0-9,a-zA-Z-.*_]+)@([a-z0-9]+[\\.-][a-z0-9]+\\.[a-z]{2,}+):(6553[0-5]|655[0-2]\\d|65[0-4]\\d{2}|6[0-4]\\d{3}|[1-5]\\d{4}|[1-9]\\d{0,3})$"; 
```

到目前为止，这是我在 Unitest 中的方法：

```
public void test____matchesUserDomainWithPort(){

     String identityText = "maxim@domain.com:5555";
        String user = "";
        String domain = "";
        String port = "";

        if(identityText.matches(MATCH_USER_DOMAIN_PORT))
        {                                
            Pattern p = Pattern.compile(MATCH_USER_DOMAIN_PORT);
            Matcher m = p.matcher(identityText);

            user = m.group(1);
            domain= m.group(2);
            port= m.group(3);
        }

    assertEquals("maxim", user);
    assertEquals("domain.com", domain);
    assertEquals("5555", port);

} 
```

我得到错误：

```
 java.lang.IllegalStateException: No successful match so far
 at java.util.regex.Matcher.ensureMatch(Matcher.java:607)
 .... 
```

在排队：`user = m.group(1);`

我打开了[http://gskinner.com/RegExr/?2v5r0](http://gskinner.com/RegExr/?2v5r0)

一切似乎都很好：

输出：

```
RegExp: /^([0-9,a-zA-Z-.*_]+@[a-z0-9]+([\.-][a-z0-9]+)*)+\.[a-z]{2,}+:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3})$/
pattern: ^([0-9,a-zA-Z-.*_]+@[a-z0-9]+([\.-][a-z0-9]+)*)+\.[a-z]{2,}+:(6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3})$
flags: 
3 capturing groups: 
   group 1: ([0-9,a-zA-Z-.*_]+@[a-z0-9]+([\.-][a-z0-9]+)*)
   group 2: ([\.-][a-z0-9]+)
   group 3: (6553[0-5]|655[0-2]\d|65[0-4]\d{2}|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}) 
```

我错过了什么吗？

在`C`我只是写：`sscanf(identityText,"%[^@]@%[^:]:%511s",user,domain,port);`

当然，我可以用 and 分割这个文本`@`并`:`获得 3 个值，但有趣的是如何以温和的形式做到这一点:)

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:39:56.703

请用

```
if(identityText.matches(MATCH_USER_DOMAIN_PORT)){                                
     Pattern p = Pattern.compile(MATCH_USER_DOMAIN_PORT);
     Matcher m = p.matcher(identityText);
     while(m.find()){
        user = m.group(1);
        domain= m.group(2);
        port= m.group(3);
    }
} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:41:50.193

是的，我认为你的正则表达式是错误的。

```
public static final String MATCH_USER_DOMAIN_PORT = "^([0-9,a-zA-Z-.*_]+@[a-z0-9]+([\\.-][a-z0-9]+)*)+\\.[a-z]{2,}+:(6553[0-5]|655[0-2]\\d|65[0-4]\\d{2}|6[0-4]\\d{3}|[1-5]\\d{4}|[1-9]\\d{0,3})$"; 
```

分解它：

*   `^(`
*   `[0-9,a-zA-Z-.*_]+`
    *   任意数量的这些字符，将匹配“maxim”
*   `@`
    *   将匹配“@”
*   `[a-z0-9]+`
    *   任意数量的这些字符，将匹配“域”
*   `([\\.-][a-z0-9]+)*`
    *   将匹配“.com”（或者理论上是“.somethingelse.com”，很好）
*   `)+`
    *   我相信，将使第 2 组成为“maxim@domain.com”，但是“+”是什么？
*   `\\.`
    *   此处输入字符串中没有任何内容
*   `[a-z]{2,}+`
    *   这是像 .eu 这样的国家代码吗？再次，“+”是什么？
*   `:`
*   `(6553[0-5]|655[0-2]\\d|65[0-4]\\d{2}|6[0-4]\\d{3}|[1-5]\\d{4}|[1-9]\\d{0,3})`
    *   似乎过于复杂 - 可能不使用正则表达式进行数字验证
*   `$`

查看[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)，了解有关验证电子邮件地址的一些建议。

# c# - 为 kendo ui 网格列定义自定义模板

> ID：16037136
> 
> 赞同：3
> 
> 时间：2013-04-16T12:31:28.957
> 
> 标签：c#, asp.net-mvc, razor, kendo-ui, kendo-grid

我有一个剑道 ui 网格，我想绑定图像。这是我的代码：

```
@model List<NewHope.Model.Mt4_prices_instant>

<div class="tabContainer">
@(Html.Kendo().TabStrip()
          .Name("tabstripMarketWatch")
          .Items(tabstrip =>
          {
              tabstrip.Add().Text("Market Rates")
                  .Selected(true)
                  .Content(
                        @<text>
                            @if (Model != null)
                            {   
                                @(Html.Kendo().Grid(Model)    
                                    .Name("Grid")
                                    .Columns(columns =>
                                    {
                                        columns.Template(
                                            @<text>
                                                @if (item.direction == 1)
                                                {   
                                                    <img src="~/Images/up.png" alt="up"/>
                                                }
                                                else if (item.direction == 0)
                                                {
                                                    <img src="~/Images/down.png" alt="down"/>
                                                }
                                            </text>).Title("");
                                        columns.Bound(p => p.symbol);
                                        columns.Bound(p => p.bid);
                                        columns.Bound(p => p.ask);
                                    })
                                    //.Groupable()
                                    //.Pageable()
                                    .Sortable()
                                    .Scrollable()
                                    //.Filterable()
                                    .DataSource(dataSource => dataSource
                                        .Ajax()
                                        .Read(read => read.Action("Products_Read", "MarketWatch"))
                                    )
                                )    
                            }
                        </text>
                  );

              tabstrip.Add().Text("Cubes")
                  .Content(@<text>
                    <div class="weather">
                        <h2>18<span>&ordm;C</span></h2>
                        <p>Cubes</p>
                    </div>
                    <span class="rainy">&nbsp;</span>
                  </text>);
          })
    )
</div>
<style>
#tabstripMarketWatch-1, #tabstripMarketWatch-2 { /* tabstrip element */
    position: absolute;
    top: 41px;
    bottom: 0;
    left: 0;
    right: 0;
    width: auto;
    height: auto;
}

#Grid {
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 100%;
} 
```

对于以下部分：

```
columns.Template(
    @<text>
        @if (item.direction == 1)
        {   
            <img src="~/Images/up.png" alt="up"/>
        }
        else if (item.direction == 0)
        {
            <img src="~/Images/down.png" alt="down"/>
        }
     </text>).Title(""); 
```

我得到**“内联标记块不能嵌套。只允许一级内联标记。”** 错误。

我必须做什么才能成功渲染我的网格？

提前致谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T14:09:20.023

```
columns.Bound(p => p.bid).ClientTemplate("<# if(direction == 1) {#>" +
                "<img src='~/Images/up.png' alt='up'/>" +
                "<#} else if(direction == 0) {#>" +
                "<img src='~/Images/down.png' alt='down'/>" +
                "<#}#>")              
                .Title("End").Width(80); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:06:33.870

这是因为 razor 看到多个模板块，它为 tabstrip 找到了这个：

```
 .Content(
     @<text>
        @if (Model != null)
        {   .. 
```

和网格：

```
columns.Template(
   @<text>
         @if (item.direction == 1)
         { 
```

Razor 不喜欢这样。尝试@Samuel 链接到的方法，即使用辅助方法来呈现网格，并在标签条中调用该辅助方法。

# android - 在 View Pager 中更改 TabIndicator 的宽度

> ID：16037137
> 
> 赞同：2
> 
> 时间：2013-04-16T12:31:31.160
> 
> 标签：android, android-viewpager

我有一个 viewPager。我已经包含了 PagerTabStrip 以在文本下方显示文本和指示器。但是指示器的宽度大于文本的宽度。我想让指示器的宽度与文本的宽度相同。我该如何实现？

![请参考图片。](https://i.stack.imgur.com/mwb1l.png) 谢谢

# javascript - 是否可以模仿选项卡并生成选项卡的名称

> ID：16037144
> 
> 赞同：0
> 
> 时间：2013-04-16T12:31:45.797
> 
> 标签：javascript, jquery, html

网站在这里[http://www17.myfantasyleague.com/2013/home/78896](http://www17.myfantasyleague.com/2013/home/78896)

请注意，左侧有垂直排列的选项卡……“首页、管理、比赛日……等”

该网站的虚拟主机允许我们作为最终用户创建 css、html 和 js 以添加到他们现有的设计中。这些选项卡是通过网站上的控制面板生成和命名的，然后仅显示在主页上，而不显示在网站上的任何其他页面上。但是，我能够使用此脚本在网站的所有页面上显示选项卡。在此链接到同一站点[http://football17.myfantasyleague.com/2013/options?L=78896&O=07](http://football17.myfantasyleague.com/2013/options?L=78896&O=07)时，您会看到左侧的选项卡是通过下面的脚本生成的以供显示

```
// ADD HOME PAGE TABS TO REPORTS
var myURLBase = "http://%LIVESCORINGHOST%/%YEAR%/home/%LEAGUEID%";
var mimicHomePageTabs = new Array();
mimicHomePageTabs[0]="Home";
mimicHomePageTabs[1]="Management";
mimicHomePageTabs[2]="Game Day";
mimicHomePageTabs[3]="Standings";
mimicHomePageTabs[4]="History";
mimicHomePageTabs[5]="Playoffs";
mimicHomePageTabs[6]="Top Players";
mimicHomePageTabs[7]="Top Free Agents";
mimicHomePageTabs[8]="Pools";

if(!document.getElementById("body_home")||(document.getElementById("body_home")&&location.href.indexOf("MODULE=MESSAGE")!=-1)) {
document.write("<div id='homepagetabsdiv'><ul id='homepagetabs'>\n");
for(var x=0; x<mimicHomePageTabs.length;x++) {
document.write("<li id='tab"+x+"' onclick='window.location.assign(\""+myURLBase+"#"+x+"\")'>"+mimicHomePageTabs[x]+"</li>\n");
}
document.write("</ul></div>\n");
} 
```

唯一的缺点是我必须手动命名脚本中的每个选项卡以匹配它们在控制面板中添加的内容。我的问题/工作是，让标签显示在所有页面上，就像这个脚本一样，但是让这些标签自动命名以匹配在他们的控制面板中输入的内容以生成开始的标签。

如果没有像我们在他们的服务器上那样完全控制网站，这是否可能？

# c - C中的定时器中断

> ID：16037146
> 
> 赞同：1
> 
> 时间：2013-04-16T12:31:49.407
> 
> 标签：c, interrupt, dos, dosbox

我必须编写关于定时器中断的 ac 文件。程序将在 DosBox 上运行。程序的特点很简单：

> 程序为每个定时器中断调用一个函数（由我输入）。这些中断将使用 setvect 和 getvect 函数进行编程。

例如，如果我有 ac 代码可以在没有任何睡眠或延迟功能的情况下每秒打印一次“Hello world\n”到屏幕上，那就太好了。我的意思是打印“hello world”的代码必须在一个函数中并且用于每个中断程序都必须调用这个函数。

很难找到这个案例的例子，你能转发任何例子链接吗？谢谢大家的帮助。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-04T23:22:43.950

```
#include<signal.h>
#include<sys/time.h>
#include <unistd.h>
#include <assert.h>
#include <stdio.h>

#define PERIOD 999999
static sigset_t block ;
void timer_handler ();

static void init( ) __attribute__((constructor));
void init(){
    sigemptyset(&block);
    sigaddset(&block,SIGVTALRM);

struct sigaction act={0};
struct timeval interval;
struct itimerval period;

act.sa_handler=timer_handler;
assert(sigaction(SIGVTALRM,&act,NULL)==0);

interval.tv_sec=0;
interval.tv_usec=PERIOD;
period.it_interval=interval;
period.it_value=interval;
setitimer(ITIMER_VIRTUAL,&period,NULL);

}

void timer_handler(int sig){
write(1,"Hi\n",3); 

}
int main(){
  while(1);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:39:33.763

只是一个建议。

一般来说，最好不要在中断中使用打印之类的功能。在您的情况下，因为您的代码很简单，所以这并不是一个真正的问题，但是如果您在中断上花费大量时间，您可能会在更复杂的程序上遇到一些优先级问题......

# asynchronous - AWS Flow Framework，.get on Promises 永远等待

> ID：16037156
> 
> 赞同：1
> 
> 时间：2013-04-16T12:32:09.607
> 
> 标签：asynchronous, amazon-web-services, promise

我正在使用 AwsFlowFramework 的示例，特别是[helloworld](https://github.com/aws/aws-sdk-java/tree/master/src/samples/AwsFlowFramework/src/com/amazonaws/services/simpleworkflow/flow/examples/helloworld)和[fileprocessing](https://github.com/aws/aws-sdk-java/tree/master/src/samples/AwsFlowFramework/src/com/amazonaws/services/simpleworkflow/flow/examples/fileprocessing)。我已按照[此处给出的所有设置说明进行操作](http://docs.aws.amazon.com/amazonswf/latest/awsflowguide/setup.html)。使用方面编织器成功创建了所有客户端类。它全部编译并运行。

但是尝试`.get`在异步方法中执行 Promise 是行不通的。它永远等待，永远不会返回结果。

我究竟做错了什么？

特别是 helloworld 示例没有任何异步方法，也没有尝试`.get`在 Promise 上执行操作。因此，它在完全复制时确实有效，我可以在活动客户端中看到打印的“hello world”消息。但是，如果我创建一个存根异步方法来调用返回的 by `get`， 则永远不会调用活动的客户端，因此工作流将永远等待。实际上，如果我将返回的承诺设置为变量，则该示例有效。只有当我尝试调用Promise 时才会出现问题。具有异步方法的文件处理示例不起作用。`Promise<Void>``printHello``.get`

我看到在我的 aws 控制台中注册的工作流和活动类型。

我正在使用 Java SDK 1.4.1 和 Eclipse Juno。

* * *

我的失败尝试列表：

*   如果方面编织器做不同的事情，请使用 Eclipse Indigo 进行尝试。
*   [按照这个问题](https://forums.aws.amazon.com/thread.jspa?threadID=99636)的建议，将所有异步方法设为私有。
*   如果我调用`.isReady()`Promise，`false`即使我在看到打印的“helloworld”消息后调用它（通过在两者之间进行睡眠来确定）也是如此。这使我认为`Promise.get`阻止调用者直到`Promise.isReady`is`true`但是因为不知何故这永远不会正确，客户端不会被调用并且工作流会永远等待。
*   尝试了不同的[端点](http://docs.aws.amazon.com/general/latest/gr/rande.html#swf_region)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:15:51.900

我的很糟糕。我在`aop.xml`文件中配置错误，因此远程调用的负载 aspectj 编织不正确。

# javascript - 使用 Javascript 以印度格式显示数字

> ID：16037165
> 
> 赞同：53
> 
> 时间：2013-04-16T12:32:32.073
> 
> 标签：javascript, jquery, number-systems

我有以下代码要在印度编号系统中显示。

```
 var x=125465778;
 var res= x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); 
```

我得到这个输出：`125,465,778`。

我需要这样的输出：`12,54,65,778`.

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2015-11-18T12:36:30.717

我迟到了，但我想这会有所帮助:)

你可以使用[Number.prototype.toLocaleString()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString)

句法

```
numObj.toLocaleString([locales [, options]]) 
```

```
var number = 123456.789;
// India uses thousands/lakh/crore separators
document.getElementById('result').innerHTML = number.toLocaleString('en-IN');
// → 1,23,456.789

document.getElementById('result1').innerHTML = number.toLocaleString('en-IN', {
    maximumFractionDigits: 2,
    style: 'currency',
    currency: 'INR'
});
// → ₹1,23,456.79
```

```
<div id="result"></div>
<div id="result1"></div>
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-16T12:55:03.640

对于整数：

```
 var x=12345678;
    x=x.toString();
    var lastThree = x.substring(x.length-3);
    var otherNumbers = x.substring(0,x.length-3);
    if(otherNumbers != '')
        lastThree = ',' + lastThree;
    var res = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
    alert(res);
```

[现场演示](http://jsfiddle.net/XBtaw/)

对于浮动：

```
 var x=12345652457.557;
    x=x.toString();
    var afterPoint = '';
    if(x.indexOf('.') > 0)
       afterPoint = x.substring(x.indexOf('.'),x.length);
    x = Math.floor(x);
    x=x.toString();
    var lastThree = x.substring(x.length-3);
    var otherNumbers = x.substring(0,x.length-3);
    if(otherNumbers != '')
        lastThree = ',' + lastThree;
    var res = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree + afterPoint;

    alert(res);
```

[现场演示](http://jsfiddle.net/XBtaw/1/)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2016-04-09T13:38:52.713

简单的做法，

**1\. 使用 LocalString() 的直接方法**

```
(1000.03).toLocaleString()
(1000.03).toLocaleString('en-IN') # number followed by method 
```

**2\. 使用 Intl - 国际化 API**

**Intl**对象是 ECMAScript 国际化 API 的命名空间，它提供语言敏感的字符串比较、数字格式以及日期和时间格式。

例如：`Intl.NumberFormat('en-IN').format(1000)`

**3.使用自定义功能：**

```
function numberWithCommas(x) {
    return x.toString().split('.')[0].length > 3 ? x.toString().substring(0,x.toString().split('.')[0].length-3).replace(/\B(?=(\d{2})+(?!\d))/g, ",") + "," + x.toString().substring(x.toString().split('.')[0].length-3): x.toString();
}

console.log("0 in indian format", numberWithCommas(0));
console.log("10 in indian format", numberWithCommas(10));
console.log("1000.15 in indian format", numberWithCommas(1000.15));
console.log("15123.32 in indian format", numberWithCommas(15123.32));
```

如果您的输入是 10000.5，

```
numberWithCommas(10000.5) 
```

你会得到这样的输出，`10,000.5`

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2014-10-03T20:02:33.520

仅对于整数不需要额外的操作。

这将匹配最后的每个数字，后面有 1 个或多个双位数模式，并将其替换为自身 +“，”：

```
"125465778".replace(/(\d)(?=(\d\d)+$)/g, "$1,");
-> "1,25,46,57,78" 
```

但是由于我们希望最后有 3，让我们通过在输入匹配结束前添加额外的“\d”来明确说明这一点：

```
"125465778".replace(/(\d)(?=(\d\d)+\d$)/g, "$1,");
-> "12,54,65,778" 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-08-31T09:37:15.400

给定以下函数的数字，它以印度数字分组格式返回格式化数字。

> 例如：输入：12345678567545.122343
> 
> 输出：1,23,45,67,85,67,545.122343

```
 function formatNumber(num) {
            input = num;
            var n1, n2;
            num = num + '' || '';
            // works for integer and floating as well
            n1 = num.split('.');
            n2 = n1[1] || null;
            n1 = n1[0].replace(/(\d)(?=(\d\d)+\d$)/g, "$1,");
            num = n2 ? n1 + '.' + n2 : n1;
            console.log("Input:",input)
            console.log("Output:",num)
            return num;
    }

    formatNumber(prompt("Enter Number",1234567)) 
```

[https://jsfiddle.net/scLtnug8/1/](https://jsfiddle.net/scLtnug8/1/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-06T06:11:39.873

我在比赛中有点晚了。但这是执行此操作的隐含方式。

```
var number = 3493423.34;

console.log(new Intl.NumberFormat('en-IN', { style: "currency", currency: "INR" }).format(number)); 
```

如果您不想要货币符号，请像这样使用它

```
console.log(new Intl.NumberFormat('en-IN').format(number)); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-16T12:57:34.883

最简单的方法就是使用[Globalize插件（](https://github.com/jquery/globalize)[在此处](http://wiki.jqueryui.com/w/page/39118647/Globalize)和[此处](http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx)阅读有关它的更多信息）：

```
var value = 125465778;
var formattedValue = Globalize.format(value, 'n'); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-04-16T13:35:32.850

尝试如下，我在这里找到了一个数字格式化插件：[Java script number Formatter](http://code.google.com/p/javascript-number-formatter/)

通过使用我已经完成了以下代码，它工作正常，试试这个，它会帮助你..

**脚本 ：**

```
<script src="format.20110630-1100.min.js" type="text/javascript"></script>

<script>
  var FullData = format( "#,##0.####", 125465778)
  var n=FullData.split(",");
  var part1 ="";
    for(i=0;i<n.length-1;i++)
    part1 +=n[i];
  var part2 = n[n.length-1]
  alert(format( "#0,#0.####", part1) + "," + part2);
</script> 
```

**输入：**

```
1) 125465778
2) 1234567.89 
```

**输出：**

```
1) 12,54,65,778
2) 12,34,567.89 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-10-26T17:50:32.630

只需使用[https://osrec.github.io/currencyFormatter.js/](https://osrec.github.io/currencyFormatter.js/)

那么你只需要：

```
OSREC.CurrencyFormatter.format(2534234, { currency: 'INR' }); 
// Returns ₹ 25,34,234.00 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-09-14T10:01:42.143

此函数可以正确处理浮点值，只是添加到另一个答案

```
function convertNumber(num) {
  var n1, n2;
  num = num + '' || '';
  n1 = num.split('.');
  n2 = n1[1] || null;
  n1 = n1[0].replace(/(\d)(?=(\d\d)+\d$)/g, "$1,");   
  num = n2 ? n1 + '.' + n2 : n1;
  n1 = num.split('.');
  n2 = (n1[1]) || null;
  if (n2 !== null) {
           if (n2.length <= 1) {
                   n2 = n2 + '0';
           } else {
                   n2 = n2.substring(0, 2);
           }
   }
   num = n2 ? n1[0] + '.' + n2 : n1[0];

   return num;
} 
```

此函数会将所有函数原样转换为浮点数

```
function formatAndConvertToFloatFormat(num) {
  var n1, n2;
  num = num + '' || '';
  n1 = num.split('.');
  if (n1[1] != null){
    if (n1[1] <= 9) {
       n2 = n1[1]+'0';
    } else {
       n2 = n1[1]
    }
  } else {
     n2 = '00';
  }
  n1 = n1[0].replace(/(\d)(?=(\d\d)+\d$)/g, "$1,");
  return  n1 + '.' + n2;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-27T07:31:23.603

上面即兴的 Slopen 方法，适用于 int 和 floats。

```
 function getIndianFormat(str) { 
  str = str.split(".");
  return str[0].replace(/(\d)(?=(\d\d)+\d$)/g, "$1,") + (str[1] ? ("."+str[1]): "");
 }

 console.log(getIndianFormat("43983434")); //4,39,83,434
 console.log(getIndianFormat("1432434.474")); //14,32,434.474
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-09-03T09:46:15.290

**这些将格式化相应系统中的值。**

```
$(this).replace(/\B(?=(?:\d{3})+(?!\d))/g, ','); 
```

> 对于美国数字系统（百万和十亿）

```
$(this).replace(/\B(?=(?:(\d\d)+(\d)(?!\d))+(?!\d))/g, ','); 
```

> 对于印度数字系统（十亿和千万）

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-23T16:00:30.103

根据[Nidhinkumar 的问题](https://stackoverflow.com/questions/46376397/indian-currency-format-is-not-working-in-html)，我检查了上述答案，在处理负数时，输出将不正确，例如：-300 它应该显示为 -300 但上述答案将显示为 -,300 这不好所以我已尝试使用以下代码，即使在负面情况下也可以使用。

```
var negative = input < 0;
    var str = negative ? String(-input) : String(input);
    var arr = [];
    var i = str.indexOf('.');
    if (i === -1) {
      i = str.length;
    } else {
      for (var j = str.length - 1; j > i; j--) {
        arr.push(str[j]);
      }
      arr.push('.');
    }
    i--;
    for (var n = 0; i >= 0; i--, n++) {
      if (n > 2 && (n % 2 === 1)) {
        arr.push(',');
      }
      arr.push(str[i]);
    }
    if (negative) {
      arr.push('-');
    }
    return arr.reverse().join(''); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-11-24T09:44:11.420

通过小数支持和测试用例即兴创作@slopen 的答案。

**用法**：`numberToIndianFormat(555555.12) === "5,55,555.12"`

`utils.ts`

```
export function numberToIndianFormat(x: number): string {
    if (isNaN(x)) {
        return "NaN"
    } else {
        let string = x.toString();
        let numbers = string.split(".");
        numbers[0] = integerToIndianFormat(parseInt(numbers[0]))
        return numbers.join(".");
    }
}
function integerToIndianFormat(x: number): string {
    if (isNaN(x)) {
        return "NaN"
    } else {
        let integer = x.toString();
        if (integer.length > 3) {
            return integer.replace(/(\d)(?=(\d\d)+\d$)/g, "$1,");
        } else {
            return integer;
        }
    }
} 
```

`utils.spec.ts`

```
describe('numberToIndianFormat', () => {
    it('nan should output NaN', () => {
        expect(numberToIndianFormat(Number.NaN)).toEqual("NaN")
    });
    describe('pure integer', () => {
        it('should leave zero untouched', () => {
            expect(numberToIndianFormat(0)).toEqual("0")
        });
        it('should leave simple numbers untouched', () => {
            expect(numberToIndianFormat(10)).toEqual("10")
        });
        it('should add comma at thousand place', () => {
            expect(numberToIndianFormat(5555)).toEqual("5,555")
        });
        it('should add comma at lakh place', () => {
            expect(numberToIndianFormat(555555)).toEqual("5,55,555")
        });
        it('should add comma at crore place', () => {
            expect(numberToIndianFormat(55555555)).toEqual("5,55,55,555")
        });
    });
    describe('with fraction', () => {
        it('should leave zero untouched', () => {
            expect(numberToIndianFormat(0.12)).toEqual("0.12")
        });
        it('should leave simple numbers untouched', () => {
            expect(numberToIndianFormat(10.12)).toEqual("10.12")
        });
        it('should add comma at thousand place', () => {
            expect(numberToIndianFormat(5555.12)).toEqual("5,555.12")
        });
        it('should add comma at lakh place', () => {
            expect(numberToIndianFormat(555555.12)).toEqual("5,55,555.12")
        });
        it('should add comma at crore place', () => {
            expect(numberToIndianFormat(55555555.12)).toEqual("5,55,55,555.12")
        });
    });
}) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-27T07:11:32.380

印度货币格式功能

```
 function indian_money_format(amt)
    	{		
    		amt=amt.toString();
    		var lastThree = amt.substring(amt.length-3);
    		var otherNumbers = amt.substring(0,amt.length-3);
    		if(otherNumbers != '')
    			lastThree = ',' + lastThree;
    		var result = otherNumbers.replace(/\B(?=(\d{2})+(?!\d))/g, ",") + lastThree;
        alert(result)
    		return result;
    	}

      indian_money_format(prompt("Entry amount",123456))
```

# javascript - 同一页面上的 javascript 幻灯片链接

> ID：16037166
> 
> 赞同：0
> 
> 时间：2013-04-16T12:32:38.193
> 
> 标签：javascript, hyperlink

我刚刚从 Google 复制了 JavaScript 代码，我不知道如何制作将在当前页面上打开的超链接。

这是我插入`<head>`页面部分的代码。

```
var slideimages = new Array()
var slidelinks = new Array()

function slideshowimages() {
    for (i = 0; i < slideshowimages.arguments.length; i++) {
        slideimages[i] = new Image()
        slideimages[i].src = slideshowimages.arguments[i]
    }
}

function slideshowlinks() {
    for (i = 0; i < slideshowlinks.arguments.length; i++)
    slidelinks[i] = slideshowlinks.arguments[i]
}

function gotoshow() {
    if (!window.winslide || winslide.closed) winslide = window.open(slidelinks[whichlink])
    else winslide.location = slidelinks[whichlink]
    winslide.focus()
} 
```

这是我插入正文部分的代码：

```
<script>
<!--

slideshowimages("main.PNG", "mainhover.PNG")
slideshowlinks('index.php', '_self')

//configure the speed of the slideshow, in miliseconds

var slideshowspeed = 2500

var whichlink = 0
var whichimage = 0

function slideit() {
    if (!document.images) return
    document.images.slide.src = slideimages[whichimage].src
    whichlink = whichimage
    if (whichimage < slideimages.length - 1) whichimage++
    else whichimage = 0
    setTimeout("slideit()", slideshowspeed)
}
slideit()
slideit()

//-->
</script> 
```

每次点击图片，index.php页面总是出现在新标签页，有没有简单的方法，可以在同一页面打开index.php页面？我对 JavaScript 一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:47:35.417

查看 HTML 将有助于理解问题，但这段代码

```
if (!window.winslide || winslide.closed) winslide = window.open(slidelinks[whichlink])
else winslide.location = slidelinks[whichlink]
winslide.focus() 
```

基本上告诉如果这是你第一次运行它，然后打开一个新窗口 ( `window.open(slidelinks[whichlink]`)，例如 Chrome 将使用它来打开一个新标签

否则，如果它已经创建，则将该窗口的位置更改为幻灯片 URL（`else winslide.location = slidelinks[whichlink]`例如，它被设计为在新窗口中操作

要更改它，您需要`window.open`用可以在 iframe 或其他东西上运行的东西替换。

我不确定打开新窗口的目的是什么，但这就是代码的作用

附带说明一下，我不确定您是否找到了运行基于 HTML 的幻灯片的最佳代码，如果您想要现代幻灯片，我会尝试类似[http://lab.hakim.se/reveal-js/](http://lab.hakim.se/reveal-js/)

# html - 滚动到修复 - 使用 Plagin

> ID：16037174
> 
> 赞同：1
> 
> 时间：2013-04-16T12:33:13.077
> 
> 标签：html, scroll, position, fixed, absolute

我正在尝试在我的项目中使用此[代码。](https://github.com/bigspotteddog/ScrollToFixed)这是我的[项目](http://u2943455.mass.hc.ru/)

这是我的js代码：

```
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js" type="text/javascript"></script>
    <script src="jquery-scrolltofixed-min.js" type="text/javascript"></script>
    <script>

 $(document).ready(function() {

// first two divs
        $('#side').scrollToFixed({
                marginTop: $('.zel_bg').outerHeight(true) + 55,
                limit: $('.indbag').offset().top - $('#side').outerHeight(true) - 20,
             });
        $('#esp').scrollToFixed({
                marginTop: $('.zel_bg').outerHeight(true) + 55,
                limit: $('.indbag').offset().top - $('#esp').outerHeight(true) - 20,
             });

// second two divs
        $('#ss1').scrollToFixed({
                marginTop: $('.zel_bg').outerHeight(true) + 55,
                limit: $('.oforbag').offset().top - $('#ss1').outerHeight(true) - 20,
             });
        $('#ss2').scrollToFixed({
                marginTop: $('.zel_bg').outerHeight(true) + 55,
                limit: $('.oforbag').offset().top - $('#ss2').outerHeight(true) - 20,
             });
 });         
    </script> 
```

当它计算位置然后制作位置时，这是真的：为div固定。计算 div 的位置时是真的 position: absolute。但是在最后（底部）部分中 div 的位置是错误的。

乍一看，他们似乎只是消失了。但是代码计算了错误的高度以将块放置在底部。

plagin 的代码错了？或者我该如何解决？我的页面高度是流动的，我不能把它作为固定像素数。我想，这个plagin“ScrollToFixed”会帮助我。但是我有问题，我之前告诉过你。

# javascript - ember 数据序列化器数据映射

> ID：16037175
> 
> 赞同：3
> 
> 时间：2013-04-16T12:33:20.987
> 
> 标签：javascript, rest, ember.js, ember-data

我正在使用 ember 和 ember-data 来尝试使用来自服务器的 json 提要。这是我的代码：

```
App = Ember.Application.create();

DS.RESTAdapter.configure(
    "plurals", {
        category: 'categories'
    }
);

App.Store = DS.Store.extend({
    revision: 12,
    adapter: DS.RESTAdapter.create({
        url: 'app'
    })
});

App.Router.map(function(){
    this.resource('categories');
});

App.CategoriesRoute = Ember.Route.extend({
    model: function() {
        return App.Category.find();
    }
});

var attr = DS.attr;

App.Category = DS.Model.extend({
    name: attr('string')
}); 
```

现在这适用于测试服务器。使用以下 JSON

```
{
    "categories":[
        {
            "name":"Beef",
            "id":1
        },
        {
            "name":"Pork",
            "id":2
        }
    ]
} 
```

但是在生产中，服务器提供以下 json：

```
{
    "success":true,
    "message":"Request successful",
    "total":2,
    "data":[
        {
            "name":"Beef",
            "id":1
        },
        {
            "name":"Pork",
            "id":2
        }
    ]
} 
```

我一生都无法弄清楚如何使用序列化程序来使用实时 json。任何帮助，将不胜感激。提前致谢。

更新：

我已经尝试编写序列化程序，但它似乎没有工作......

见下文

```
App.Store = DS.Store.extend({
    revision: 12,
    adapter: DS.RESTAdapter.create({
        url: 'app',
        serializer: DS.RESTSerializer.extend({
            extract: function(loader, json, type, record) {
                var root = 'data';
                this.sideload(loader, type, json, root);
                this.extractMeta(loader, type, json);
                if (json[root]) {
                    if (record) { loader.updateId(record, json[root]); }
                    this.extractRecordRepresentation(loader, type, json[root]);
                }
            }
        })
    })
}); 
```

现在产生此错误`Uncaught Error: assertion failed: Your server returned a hash with the key data but you have no mapping for it`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T16:27:46.533

你有2个选择

*   使您的服务器兼容，并让它按照 ember 数据的预期返回 json，
*   编写你自己的适配器/序列化器来支持这种格式。

更新：编写您自己的序列化程序 更新 2：摆脱未使用的函数

[https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/json_serializer.js#L196](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/serializers/json_serializer.js#L196)

您可以继承`DS.RESTSerializer`并`extract`使用此代码进行更改

```
 extract: function(loader, json, type, record) {
    var root = 'data';

    if (json[root]) {
      if (record) { loader.updateId(record, json[root]); }
      this.extractRecordRepresentation(loader, type, json[root]);
    }
  } 
```

这假设请求的内容将始终在`data`您的 json 的键下。

# android - Android 从服务启动 Activity 而不启动应用程序的其他 Activity

> ID：16037183
> 
> 赞同：1
> 
> 时间：2013-04-16T12:33:34.917
> 
> 标签：android, android-activity, start-activity, launchmode

我在检测到 IncomingCall 时开始使用 Theme.Dialog 的活动；但是，当我开始我的对话活动时，它会隐藏来电屏幕，这不是我想要的行为。我想单独启动该对话活动，以便它出现在来电屏幕的顶部，而不是整个应用程序出现在来电屏幕的顶部。我在 Manifest 和 NEW_TASK 标志中使用了 SingleTask，并使用了各种上下文。作为提示，我想做类似 TrueCaller Android App 的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:40:22.877

您需要确保具有 Dialog 主题的 Activity 与您的应用程序的其余部分具有不同的任务关联性。否则，如果您的应用程序正在运行，则启动该活动（即使使用`FLAG_ACTIVITY_NEW_TASK`）只会将现有任务向前推进，并将您的活动置于其之上。

您应该将以下内容添加到此特定活动的清单中：

```
android:taskAffinity=""
android:noHistory="true"
android:excludeFromRecents="true" 
```

注意：设置`noHistory`并`excludeFromRecents`确保此任务不会出现在“最近的任务列表”中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:34:56.487

利用`android:launchMode="singleInstance"`

# php - 加载配置文件 onclick 搜索

> ID：16037184
> 
> 赞同：0
> 
> 时间：2013-04-16T12:33:35.290
> 
> 标签：php, jquery, ajax

我一直在创建一个 ajax 搜索。我一直想知道如何在使用 ajax 单击搜索结果时加载用户的个人资料。我尝试使用以下代码将用户的 ID 从数据库分配给 div，以便我可以使用 ajax 来加载配置文件：-

```
echo "<div id='$id'><img src='$img' /></div> 
```

我想设置一个**ajax**来**加载配置文件页面**，并且从配置文件页面，将有一个查询来搜索用户的数据库。**变量**($img/$id)**似乎适用于 ，** `img tag` **但不适用于** `div id`. 所以，我很想知道 facebook 和 google+ 是怎么回事。我尝试谷歌搜索，但没有找到这样的结果。

简而言之，我不知道如何分配一个变量（给 id 或 ajax 可以从中获取值的任何其他地方），以便**ajax 可以加载它，然后将其发布到 profile.php 以便配置文件.php 可以查询数据库并显示结果**。

编辑：由于你们中的一些人可能会误解，我在分配图像时没有问题，我在分配图像时遇到问题**id 作为变量**，以便我可以使用 database 自动分配它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:44:20.223

如果你想基于一个值加载一些东西，你可以尝试使用 html 中的 data-* 属性。例如：
`<div class="user-link" data-userid="<?= $user_id; ?>"><img src="..." /></div>`
可以检索为：

```
$('.user-link').click(function() { 
  console.log($(this).data('userid'));
}); 
```

编辑：[http ://api.jquery.com/data/](http://api.jquery.com/data/)

在您的情况下，您可以在点击中发布帖子。

编辑 2：我已根据已删除评论的要求将用户 ID 设为 php 变量。

# javascript - 未捕获的类型错误：对象 [对象对象] 没有方法“边框”？

> ID：16037189
> 
> 赞同：0
> 
> 时间：2013-04-16T12:33:45.773
> 
> 标签：javascript, jquery, plugins

这个错误一直让我发疯！无论如何，我创建了一个简单的 jQuery 插件，我称之为“border”，但我得到了这个错误：

**未捕获的类型错误：对象 [对象对象] 没有方法“边框”**

作为记录，jQuery 只包含**一次**，它包含在我的插件之前。

我用它来避免冲突：

```
<pre>
var $jq = $.noConflict();
//$.noConflict();
$jq("li").borderX('1px solid blue');
</pre> 
```

**编辑 ：**

这是我的插件代码：

```
jQuery(document).ready(function ($) {
    $.fn.borderX = function (params) {
        params = $.extend({width: 'null', color: 'null', radius: 'null'}, params);
        this.each(function () {
            var $t = $(this);
            var response = jQuery.parseJSON(params);
            if (typeof response == 'object') { //It is JSON
                if (params.width) {
                    $t.css('border-width:', params.width);
                }
                if (params.color) {
                    $t.css('border-color:', params.color);
                }
                if (params.radius) {
                    $t.css('border-radius:', params.radius);
                }
            } else {
                $t.css('border', params);
            }
        });
        return this;
    };
}); 
```

我调用名为“borderX”的插件的 HTML 代码是：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.borderX.js"></script>
<script type="text/javascript">
var $jq = $.noConflict();
//$.noConflict();
$jq("li").borderX('1px solid blue');
</script> 
```

**编辑°2：**

```
$.fn.border = function (options) {
    var params = $.extend({width: 'null', color: 'null', radius: 'null'}, options);
    this.each(function () {
        var $t = $(this);
        var response = jQuery.parseJSON(params);
        if (typeof response == 'object') { //It is JSON
            if (params.color) {
                $t.css('border-color:', params.color);
            }
            if (params.radius) {
                $t.css('border-radius:', params.radius);
            }
        } else {
            $t.css('border', params);
        }
    });
    return this;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:24:07.470

删除插件的第一行和最后一行，使其不被包裹`document.ready`

```
(function($) {
    $.fn.borderX = function(params) {
        params = $.extend( {width: 'null', color: 'null', radius: 'null'}, params);
        this.each(function() {
            var $t = $(this);
            var response = jQuery.parseJSON(params);

            if(typeof response == 'object')
            { //It is JSON
                if(params.width){$t.css('border-width',params.width);}
                if(params.color){$t.css('border-color',params.color);}
                if(params.radius){$t.css('border-radius',params.radius);} 
            }
            else
            {
                $t.css('border',params);
            }
        });
        return this;
    };
})(jQuery); 
```

# c# - 使用 F# 的“嵌套 if”与“if and”性能

> ID：16037191
> 
> 赞同：13
> 
> 时间：2013-04-16T12:33:50.300
> 
> 标签：c#, performance, if-statement, f#, cil

以下代码导致`slow1 = 1323 ms`,`slow2 = 1311 ms`和`fast = 897 ms`。这怎么可能？

这里：[嵌套或不嵌套的 if 块？](https://stackoverflow.com/questions/1657413/nested-or-not-nested-if-blocks)他们提到

> 任何现代编译器，我的意思是在过去 20 年中构建的任何东西，都会将它们编译成相同的代码。

```
let s = System.Diagnostics.Stopwatch()
let mutable a = 1
s.Start()

for i in 0 .. 1000000000 do
  if i < 0 then
    if i < 0 then
      a <- 4

printfn "fast = %d" s.ElapsedMilliseconds

s.Restart()

for i in 0 .. 1000000000 do
  if i < 0 && i < 0 then
    a <- 4

printfn "slow1 = %d" s.ElapsedMilliseconds

s.Restart()

for i in 0 .. 1000000000 do
  if i < 0 & i < 0 then
    a <- 4

printfn "slow2 = %d" s.ElapsedMilliseconds 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:32:03.683

我从 ildasm 获得了 MSIL，我将在此处发布以供某人详细说明（没有时间） - 现在是社区 wiki 时间：

快速（只是`i`比较线，其余部分相同）：

```
//000030:   if i < 1000 then
  IL_001f:  ldloc.0
  IL_0020:  ldc.i4     0x3e8
  IL_0025:  bge.s      IL_003b
//000031:     if i < 1000 then
  IL_0027:  ldloc.0
  IL_0028:  ldc.i4     0x3e8
  IL_002d:  bge.s      IL_0038 
```

慢的：

```
//000039:   if i < 1000 && i < 1000 then
  IL_0084:  ldloc.0
  IL_0085:  ldc.i4     0x3e8
  IL_008a:  bge.s      IL_0097
  IL_008c:  ldloc.0
  IL_008d:  ldc.i4     0x3e8
  IL_0092:  clt
  IL_0094:  nop
  IL_0095:  br.s       IL_0099
  IL_0097:  ldc.i4.0
  IL_0098:  nop
  IL_0099:  brfalse.s  IL_00a4 
```

附带说明一下，相同的 C# 版本对于两个版本具有相同的时间。

我在反汇编中注意到的一件事是 F# 变量是 Program.i 和 Program.a，所以我不确定 F# 中是否存在某些 C# 中不存在的对象干扰。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T09:25:12.913

来自 Don Syme 的电子邮件：

> 是的，我们已经注意到该线程并记录了一个问题。这不完全是一个错误（代码正确执行），但在这里获得等效性能肯定会很好。

# c# - 将立方体保存在变量中并应用缩放/旋转/移动 OpenTK

> ID：16037193
> 
> 赞同：0
> 
> 时间：2013-04-16T12:33:53.743
> 
> 标签：c#, 3d, editor, opentk

我正在创建简单的 3D 编辑器。我现在可以绘制像立方体这样的简单基元，但是，我不知道如何将此对象保存到 som 变量，然后将其复制到其他坐标。我也不知道如何旋转/缩放/移动这个立方体并将这个新形状保存到变量中。我看过很多关于这个主题的教程，但在每一篇教程中，人都在移动相机，而不是绘制的对象（立方体）。所以基本上我只需要教程如何将一些对象保存到变量中，而不是从变量中加载这个对象并在场景的不同坐标上多次绘制它，并对这些新对象应用一些变换（移动、旋转、缩放）。我正在用 C# 和 OpenTK 创建这个应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:38:56.270

使用`GL.Translate(x,y,z)`和函数移动坐标系原点、方向和缩放`GL.Rotate(θ,x,y,z)`。`GL.Scale(sx,sy,sz)`

所以在命令之后画一个立方体

```
GL.Translate(10,10,100); 
```

将在上述位置绘制立方体。下面是这个过程的一个（笨拙的）示​​例：

![例子](https://i.stack.imgur.com/afG37.png)

# css - 联系表格 7 水印字体颜色

> ID：16037196
> 
> 赞同：2
> 
> 时间：2013-04-16T12:33:59.390
> 
> 标签：css, wordpress

我似乎无法让我的联系人 7 水印工作，我升级了版本，现在我之前的 css 没有将水印更改为黑色，而且名称和地址框的字体也不同。

网站 =
goo.gl/BIWD3

这是我添加水印然后在以前工作的css中更改它的代码。

```
.wpcf7 .watermark {
color: black !important;
font-family: arial !important;
}

<div class="bottom-form">

<p style="text=align:left; font-weight:normal; font-family:arial;">
[textarea textarea-251 placeholder "Name and Address"]</p>
<p style="text-align:left;  font-weight:normal;">
 [text telephone placeholder "Telephone"]
</p>
<p style="text-align:left; font-weight:normal">
[text dateandtime placeholder "Date & Time"]
</p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:56:45.160

我的猜测是更新后的插件现在支持[HTML5 占位符属性。](http://www.w3.org/html/wg/drafts/html/master/single-page.html#the-placeholder-attribute) 尝试在现有`.watermark` 选择器旁边添加占位符选择器。有很多，因为它们都有供应商前缀；查看[此 SO 帖子](https://stackoverflow.com/questions/2610497/change-an-inputs-html5-placeholder-color-with-css)以获取更多详细信息。

```
.wpcf7 .watermark {
    color: black !important;
    font-family:'arial', sans-serif;
}
::-webkit-input-placeholder {
    color: black !important;
    font-family:'arial', sans-serif;
}
:-moz-placeholder {
    color: black !important;
    font-family:'arial', sans-serif;
}
::-moz-placeholder {
    color: black !important;
    font-family:'arial', sans-serif;
}
:-ms-input-placeholder {
    color: black !important;
    font-family:'arial', sans-serif;
} 
```

链接到 JSFiddle：http: [//jsfiddle.net/fHgae/](http://jsfiddle.net/fHgae/)

我刚刚在 2016 年 5 月 6 日使用 Visual Composer 进行了尝试，并将此代码复制并粘贴到带有联系 7 表单的页面上，效果很好。使用 Visual Composer 前端编辑时单击齿轮图标。当我复制和粘贴时，原始代码中缺少一个括号，这很奇怪，但我手动输入它并没有问题。占位符文本按预期从灰色变为黑色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T13:53:54.577

::-webkit-input-placeholder { /* WebKit 浏览器 */

颜色：#000 ！重要；

不透明度：1；

}

# android - JSch - 如何使用 Session 和 UserInfo

> ID：16037202
> 
> 赞同：1
> 
> 时间：2013-04-16T12:34:10.600
> 
> 标签：android, jsch

使用JSch时，不想提示用户输入密码时如何设置userinfo？提供的所有示例都将 userinfo 与 Swing 一起使用，并在运行时提示用户输入密码。我正在编写一个 android 应用程序，我会将密码保存为 SharedPreference，因此我不想提示用户。所有示例都显示他们使用 UserInfo 作为 MyUserInfo 类的基类，这似乎只是为了存储用户名和密码而过分矫枉过正。

样本是这样的：

```
JSch jsch=new JSch();
Session session=jsch.getSession(user, host, 22);
UserInfo ui=new MyUserInfo();
session.setUserInfo(ui);
session.connect(); 
```

MyUserInfo 类有几个方法和其他我不需要的东西。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-11T22:48:25.970

[UserInfo](http://epaul.github.io/jsch-documentation/simple.javadoc/index.html?com/jcraft/jsch/UserInfo.html)对象仅用于**用户交互**。如果您不想要交互，请不要使用它。

虽然您可以实现 UserInfo 接口以返回密码的静态值，但有一种更简单的方法：使用[`setPassword`Session 上的方法](http://epaul.github.io/jsch-documentation/simple.javadoc/com/jcraft/jsch/Session.html#setPassword%28byte%5B%5D%29)（实际上，其中两个：一个使用字符串，一个使用字节 []），改用它.

# android - 无法将测试用例添加到 TestSuite

> ID：16037205
> 
> 赞同：1
> 
> 时间：2013-04-16T12:34:30.873
> 
> 标签：android, junit

我编写了 Runner 类来执行测试套件，但我不断收到 java.lang.RuntimeException: Exception during suite construction.Method name could not be null。

```
import junit.framework.TestSuite;
import android.test.InstrumentationTestRunner;
import android.test.InstrumentationTestSuite;

public class Runner extends InstrumentationTestRunner {

public Runner() {
    super();
}

@Override
public TestSuite getAllTests() {
    InstrumentationTestSuite suite = new InstrumentationTestSuite(this);
    suite.addTest(new AndroidTest());
    return suite;
}

@Override
public ClassLoader getLoader() {
    return Runner.class.getClassLoader();
}

} 
```

我的测试用例文件。

```
import junit.framework.Assert;
import android.test.ActivityTestCase;

public class AndroidTest extends AndroidTestCase{

     @Override
        protected void setUp() throws Exception {
            // TODO Auto-generated method stub
            super.setUp();
        }

     String nuber;
     public AndroidTest(String number1) {
         System.out.println("paramertized");
         this.nuber=number1;

    }
     public AndroidTest() {
         super();
         System.out.println("default");
    }

    public void testSomething() throws Throwable {
        System.out.println(nuber);
           Assert.assertTrue(1 + 1 == 2);
        }

        public void testSomethingElse() throws Throwable {
           Assert.assertTrue(1 + 1 == 3);
        }

} 
```

我的清单文件。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="jp.co.rakuten.sdt.sampleapp.test"
    android:versionCode="1"
    android:versionName="1.0" >
<uses-permission android:name="android.permission.RUN_INSTRUMENTATION" />
    <uses-sdk android:minSdkVersion="9" />

    <instrumentation
        android:name="com.sampleapp.test.Runner"
        android:targetPackage="com.sampleapp" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <uses-library android:name="android.test.runner" />
    </application>

</manifest> 
```

我得到的例外。

```
java.lang.RuntimeException: Exception during suite construction
at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:239)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)
Caused by: java.lang.NullPointerException: Method name must not be null.
at java.lang.ClassCache.findMethodByName(ClassCache.java:238)
at java.lang.Class.getMethod(Class.java:962)
at android.test.suitebuilder.TestMethod.getAnnotation(TestMethod.java:60)
at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:39)
at android.test.suitebuilder.annotation.HasMethodAnnotation.apply(HasMethodAnnotation.java:30)
at com.android.internal.util.Predicates$OrPredicate.apply(Predicates.java:106)
at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:42)
at android.test.suitebuilder.annotation.HasAnnotation.apply(HasAnnotation.java:31)
at com.android.internal.util.Predicates$NotPredicate.apply(Predicates.java:122)
at android.test.suitebuilder.TestSuiteBuilder.satisfiesAllPredicates(TestSuiteBuilder.java:254)
at android.test.suitebuilder.TestSuiteBuilder.build(TestSuiteBuilder.java:190)
at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:373)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3246)
at android.app.ActivityThread.access$2200(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:41:43.890

好的，所以我可以重现您的问题。

通过删除`public AndroidTest(String)`构造函数并为字符串变量 nuber 设置一个值，我可以运行测试。

```
String nuber ="";
/*
public AndroidTest(String number1) {
    super();
    System.out.println("paramertized");
    this.nuber=number1;

}
*/
public AndroidTest() {
    super();
    System.out.println("default");
} 
```

[在 SO 上发布了一个类似的问题](https://stackoverflow.com/questions/8322424/how-to-resolve-exception-during-suite-construction)

# c# - 窗口在服务模式下没有文字

> ID：16037206
> 
> 赞同：3
> 
> 时间：2013-04-16T12:34:32.663
> 
> 标签：c#, winapi

我正在开发批处理引擎，因为我们有一个第三方软件，它是一个需要批量运行的客户端软件

我使用此代码来枚举进程 ID

```
public IEnumerable<int> EnumerateProcessWindowHandles(int processId)
{
    var handles = new List<IntPtr>();
    try
    {
        foreach (ProcessThread thread in Process.GetProcessById(processId).Threads)
            Win32.EnumThreadWindows(thread.Id,
                                    (hWnd, lParam) =>
                                        {
                                            handles.Add(hWnd);
                                            return true;
                                        }, IntPtr.Zero);

    }
    catch (Exception e) {}
    return handles.Select(h => (int)h);
} 
```

然后这段代码获取每个窗口的文本

```
public string GetText(int hWnd)
{
    // Allocate correct string length first
    int length = Win32.GetWindowTextLength(hWnd);
    var sb = new StringBuilder(length + 1);
    Win32.GetWindowText(hWnd, sb, sb.Capacity);
    return sb.ToString();
} 
```

从服务执行程序时，永远找不到我正在寻找的窗口，如果我从控制台程序启动它，它可以工作。如果我尝试从服务中启动 calc.exe，我会得到计算器窗口，因此可以从服务中获取窗口。从我的服务收听 calc.exe 时的输出

> 2013-04-16 13:52:09; 冗长的；23000; 1728; 5592; 批次：窗口hwnd：8454324；标题：计算器
> 
> 2013-04-16 13:52:09; 冗长的；23000; 1728; 5592; 批次：窗口hwnd：393910；标题：
> 
> 2013-04-16 13:52:09; 冗长的；23000; 1728; 5592; 批次：窗口hwnd：328806；标题：GDI+ 窗口
> 
> 2013-04-16 13:52:09; 信息; 23000; 1728; 5592; 批次：显示的计算器

并在收听我的真实应用程序时输出

> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：524976；标题：.NET-BroadcastEventWindow.2.0.0.0.218f99c.0
> 
> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：524978；标题：GDI+ 窗口
> 
> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：590366；标题：
> 
> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：787088；标题：
> 
> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：656044；标题：
> 
> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：721578；标题：
> 
> 2013-04-16 14:25:16; 冗长的；23000; 5076; 5140; 批次：窗口hwnd：590926；标题：

正如您所看到的，大多数 hwnd 都是无标题的，如果我也这样做，但从控制台模式我得到

> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：66672；标题：MSCTFIME UI
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：328694；标题：
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：328754；标题：
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：197656；标题：
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132122；标题：
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132178；标题：.NET-BroadcastEventWindow.2.0.0.0.218f99c.0
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132100；标题：MSCTFIME UI
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132186；标题：默认输入法
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132176；标题：GDI+ 窗口
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：197654；标题：默认输入法
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132144；标题：
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132142；标题：
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132140；标题：默认输入法
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：459078；标题：任务进度
> 
> 2013-04-16 14:21:08; 冗长的；23000; 4864; 4120; 控制台：窗口hwnd：132078；标题：默认输入法

我得到更多的 hwnd 和更多的标题，我感兴趣的窗口是**任务进度**

这可以解决吗？我正在起诉 Process.Start 以启动该过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:01:35.583

我假设您使用的是 Vista 或更高版本，因为早期版本不会出现此问题。正如@Damien_The_Unbeliever 所说，这是一个[会话 0 隔离](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)问题。

> 这可以解决吗？我正在起诉 Process.Start 以启动该过程

在会话 0 即启动第三方应用程序（您无法控制其代码）通常是一个坏主意。

*   您不知道该应用程序是否设计为在会话 0 的限制下运行。
*   安全问题，因为您可以通过此会话对系统造成更大的损害。

使用[CreateProcessAsUser](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429%28v=vs.85%29.aspx)将 STARTUPINFO 的 lpDesktop 成员设置为“Winsta0\\default”和通过[CreateEnvironmentBlock](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762270%28v=vs.85%29.aspx)获得的环境块。有关如何从 C# 调用这些，请参阅这篇[文章](http://blogs.msdn.com/b/alejacma/archive/2007/12/20/how-to-call-createprocesswithlogonw-createprocessasuser-in-net.aspx "如何在 .NET 中调用 CreateProcessWithLogonW 和 CreateProcessAsUser")

[您可以通过WTSQueryUserToken](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383840%28v=vs.85%29.aspx)获取用户令牌，并且会话 ID 可通过[WTSEnumerateSessions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383833%28v=vs.85%29.aspx)或 SERVICE_CONTROL_SESSIONCHANGE 消息提供给服务。

> 如您所见，大多数 hwnd 是无标题的，

您无法检索窗口文本的原因是因为 Windows 通过发送 WM_GETTEXT 消息来执行此操作（请参阅[msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520%28v=vs.85%29.aspx)上的备注部分），当然它不能这样做，因为您的引擎位于服务桌面上。

您可以在服务中解决此问题，方法是在一个单独的线程中执行您的操作，在该线程上您使用用户的桌面调用了[SetThreadDesktop](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686250%28v=vs.85%29.aspx)（请注意，请参阅备注中的警告）。

# jquery - jquery ui 1.10.2 显示缓动不再起作用

> ID：16037210
> 
> 赞同：0
> 
> 时间：2013-04-16T12:34:36.350
> 
> 标签：jquery, jquery-ui, show-hide

由于我已从**jquery-ui 1.8**升级到**1.10.2**，因此**`.show( effect [, options ] [, duration ] [, complete ] )`**不再起作用。

我可以替换：

```
$(this).show("slide", {direction:"left"}, 500); 
```

和

```
$(this).effect("slide"); 
```

但是当我更换时：

```
$(Elt).show("blind", {direction: "vertical"}, 500); 
```

和

```
$(Elt).effect("blind"); 
```

`$(Elt)`效果后消失`"blind"`。如果我 append `.show()`，它会被忽略。

[我在http://jqueryui.com/upgrade-guide/1.10/](http://jqueryui.com/upgrade-guide/1.10/)找到了一些关于`$.effects[]`（在页面末尾）的线索，但这对我来说没有意义。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T11:35:51.177

我不明白你想做什么。

有了这个，你可以`selectedObject`通过滑动它来显示你喜欢的缓动和方向：

```
$(selectedObject).show("slide", { easing: "TransitionName", direction: "left" }, 500); 
```

有了这个，您可以`selectedObject`通过将其滑出来隐藏它：

```
$(selectedObject).hide("slide", { easing: "TransitionName", direction: "right" }, 500); 
```

希望我能帮助你。

# c++ - Gtkmm 和 cairomm 与 Visual Studio 11（第一次）？

> ID：16037212
> 
> 赞同：1
> 
> 时间：2013-04-16T12:34:41.080
> 
> 标签：c++, gtk, cairo

我正在学习 c++ 并希望绘制几何图形以更好地享受这个过程并测试我的脚本。我搜索了一个用 c++ 绘制矢量的库，发现 Cairo 在这个网站上得到了强烈推荐。我继续下载了 Cairomm 附带的 Gtkmm 并安装了它。到目前为止，我使用了这个 aweomse 教程：

[https://live.gnome.org/gtkmm/MSWindows/UsingMSVC](https://live.gnome.org/gtkmm/MSWindows/UsingMSVC)

我遵循了这些步骤，但我认为本教程可能已经过时，或者使用 gtkmm-vc100-d-2_4.props 的 MSVC 2012 上的步骤之一可能存在问题（这可能仅在 MSVC 2010 上受支持）。总的来说，我真的很想开始，但我对此很陌生，而且非常困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T17:16:52.417

It seems the current latest Project property file is not supported with Visual Studio 11 (2012). I should have known that with the file name being, 'gtkmm-vc100-2_4'.

It works perfectly with VC10 so I reverted to using that for the time being.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-22T22:04:57.130

我在 Widnows 7 x64（包括 cairo 和其他）上为 Visual Studio 编译了 gtkmm3，看到[这个](https://stackoverflow.com/questions/8256793/gtkmm-3-0-library-for-windows/28112026#28112026)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T20:20:37.723

我有一个基于 CMake 的项目，用于在[MSYS2](https://msys2.github.io)之上[构建 gtkmm](https://github.com/mlt/gtkmm)（它曾经使用[OBS](http://en.wikipedia.org/wiki/Open_Build_Service)）。它可以与[CMake](https://chocolatey.org/packages/cmake)支持的任何版本的 Visual Studio以及普通的 makefile 和[jom](https://msys2.github.io) makefile 一起使用。

# codeigniter - 在视图中单击下拉列表更新 mysql 表

> ID：16037220
> 
> 赞同：0
> 
> 时间：2013-04-16T12:35:10.380
> 
> 标签：codeigniter, activerecord

有人可以帮助我，我想通过使用下拉列表框来更新数据库记录，所以当我从下拉列表中选择一个选项时，数据库会使用该记录的值更新，而无需使用 codeigniter 单击提交按钮。

我知道解决这个问题的最好方法是使用 AJAX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:56:43.207

是的，AJAX 可以使它工作，而使用 jQuery 可以使它更容易。您可以将事件侦听器添加到下拉列表中，以侦听其值的变化：

```
$("#the-dropdown-list").change(function() {
  var value = $(this).attr("value");
  $.ajax({
    url: "path/to/controller/action/",
    type: "POST",
    data: {value: value},
    success: function() {
      // whatever you want to do after
    }
  });
}); 
```

这将检测下拉列表值的变化，然后将其发送到对象中给出的控制器`url`动作`$.ajax`。之后，您可以像往常一样更新数据库记录。在控制器中，可以使用 获取新值`$_POST['value']`，因为我们定义`type`为 be`POST`并且要传递给控制器​​动作的不同值在`data`.

# php - 在回声中获取一个中间有空格的字符串

> ID：16037222
> 
> 赞同：0
> 
> 时间：2013-04-16T12:35:13.427
> 
> 标签：php, html

我在 html 中有一个代码，它允许我获取中间有空格的字符串，例如“玩游戏”。

在 html 中：

```
<li><a href="allProduct.php?category=Play Game">Play Game</a></li> 
```

但是我在 echo() 中不能这样做，我只设法得到了“play”这个词：

```
 echo("<table width=80%>
    <tr>
    <ul>
        <li><a href="allProduct.php?category=Play Game">Play Game</a</li>
    </ul>
    </tr>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:36:52.673

请注意，尽管大多数浏览器只会`eat`在 url 中使用空格，但它们在标准中是不允许的。你可以参考这个[文档](http://www.w3schools.com/tags/ref_urlencode.asp)，上面写着：

> URL 不能包含空格。URL 编码通常用 + 号替换空格。

在 PHP 中，用于[`urlencode()`](http://www.php.net/manual/en/function.urlencode.php)将空格编码为`+`：

```
$encoded = urlencode('allProduct.php?category=Play Game');
// will give you : allProduct.php?category=Play+Game 
```

此外，您不能使用双引号将包含双引号的字符串括起来。我会用单引号括起来。

完整示例：

```
echo('<table width=80%>
<tr>
<ul>
    <li><a href="' . urlencode('allProduct.php?category=Play Game') .'">Play Game</a</li>
</ul>
</tr>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:37:39.000

您将 echo 字符串括在双引号中，同时在字符串本身内使用双引号。您可以通过将 echo 字符串括在单引号中或使用反斜杠转义字符串中的双引号来解决此问题。（像这样：\"）

编辑：您可能还想从“播放”和“游戏”中删除空间。使用 PHP 的[urlencode()](http://php.net/manual/en/function.urlencode.php)函数来实现这一点。正如另一张海报所建议的那样，您也可以使用 a`&nbsp;`代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:37:04.533

使用正确的字符串转义：

```
echo("<table width=80%>
<tr>
<ul>
    <li><a href=\"allProduct.php?category=Play%20Game\">Play Game</a</li>
</ul>
</tr>"); 
```

您还必须使用 URL 格式对空格进行编码`%20`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:37:18.017

```
echo('<table width=80%>
<tr>
<ul>
    <li><a href="allProduct.php?category=Play%20Game">Play Game</a</li>
</ul>
</tr>'); 
```

将双引号更改为单引号，它将为您工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:37:36.533

使用单个 ' 表示回声。比你可以对 HTML 使用普通的 "

```
echo '<tag class="xyz">...</tag>'; 
```

顺便说一句：您不应该在链接中使用空格。

你可以——也应该使用——合适的方法。在你的情况下

```
urlencode('Music Albums') 
```

相应地对空间进行编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:46:38.760

检查这个

```
echo("<table width=80%>
        <tr>
        <ul>
        <li><a href='allProduct.php?category=Play Game'>Play Game</a</li>
        </ul>
        </tr>"); 
```

# android - 如何从子活动中调用 TabActivity 中的函数？

> ID：16037223
> 
> 赞同：1
> 
> 时间：2013-04-16T12:35:17.147
> 
> 标签：android, android-tabhost, tabactivity

我想根据我的孩子活动的内容更新选项卡的标题。

但是，当我打电话时：

```
TabActivity parent = (TabActivity) getParent();
TabHost parentHost = (TabHost) parent.getTabHost().findViewById(android.R.id.tabhost); 
```

在孩子中，程序崩溃了。* *（感谢 StinePike）现在我知道我无法获取 TabHost 的实例，但我仍然无法调用我自己的 TabActivity 中定义的方法。**

任何人都可以帮助我发现问题并解决它吗？

我的 TabActivity 设置：

```
public class Tab extends TabActivity {  
    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.tab);

        final TabHost tabHost = (TabHost)findViewById(android.R.id.tabhost);

        View newTab = (View) LayoutInflater.from(this).inflate(R.layout.tabmini, null);
        TextView text0 = (TextView) newTab.findViewById(R.id.tab_label);
        text0.setText("new tab");

        tabHost.setup(this.getLocalActivityManager());
        tabHost.setCurrentTab(1);

        tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator(newTab).setContent(new Intent(this, BrowserActivity.class)));

    }

    public void addTab(String startPage){
        //...Add a new Tab  
    }   
    public void setTabTitle(String title){
        //...Set new title  
    }   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:38:57.053

来自孩子的电话

```
RootActivity parentActivity;
parentActivity = (YourRootActivity) this.getParent();
parentActivity.setTitle(title); 
```

在父定义`setTitle(String s)`方法中

```
public void setTitle(String s){
 // set title here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:32:17.223

TabActivity 已弃用（[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)）。请考虑使用其他东西：

*   使用 tabhost + viewpager 的常规活动 ( [http://dewful.com/?p=15](http://dewful.com/?p=15) )
*   操作栏选项卡 ( [http://developer.android.com/guide/topics/ui/actionbar.html#Tabs](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs) )

# html - 如何在 UL 类的 LI 中为 DIV 设置 CSS 规则？

> ID：16037226
> 
> 赞同：3
> 
> 时间：2013-04-16T12:35:25.390
> 
> 标签：html, css, class

我有一个查询结果列表。该列表将显示如下：

```
<ul class="result">
    <li></li>
    <li></li>
    <li></li>
    ...
</ul> 
```

现在我想`li:before`在`li`.

所以我认为可以这样做：

```
<ul class="result">
    <li><div id="a"></div></li>
    <li><div id="a"></div></li>
    <li><div id="a"></div></li>
    ...
</ul> 
```

问题是我不能为此设置任何 CSS 规则？

我试过：

```
.wrapper #header #navline #searchbar .dropdown .result li#a{
    background-color: #fff;
    height: 10px;
    width: 15px;
} 
```

也

```
.wrapper #header #navline #searchbar .dropdown .result li #a{...} 
```

并且只是

```
.wrapper #header #navline #searchbar .dropdown .result #a{...} 
```

但没有任何效果。我的想法是否有错误，或者无法在`DIV`' `li`s 中添加一个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T12:38:31.290

`ID`A)为你的元素使用 unique s

B) 你的 CSS 选择器太复杂了

C) 应该是`.result li #a`因为`.result li#a`这意味着`li`s 有 ID

D）当您使用以下类时`div`：

```
<ul class="result">
    <li><div class="aDiv"></div></li>
    <li><div class="aDiv"></div></li>
    <li><div class="aDiv"></div></li>
    <li><div class="aDiv"></div></li>
</ul> 
```

你的选择器应该是这样的

```
.result li .aDiv {
    /* CSS styles */
} 
```

或者，如果有必要（你只想`<ul class="result">`在一个特定的内部添加 tagret `element#someId`），你可以使用更复杂的选择器：

```
#someId .result li .aDiv {
    /* CSS styles */
} 
```

但是，链接 ID 选择器是多余的：

```
#someId #someOtherId #finallyThere .result li .aDiv {
    /* CSS styles */
} 
```

因为，如前所述，ID 是**唯一的**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:40:12.390

按如下方式更新您的标记（因为 ID 应该是唯一的，您可以使用类名代替）：

```
<ul class="result">
    <li><div class="a"></div></li>
    <li><div class="a"></div></li>
    <li><div class="a"></div></li>
    ...
</ul> 
```

您的 CSS 选择器应如下所示：

```
.wrapper #header #navline #searchbar .dropdown .result li .a {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:38:53.087

而不是：`<li><div id="a"></div></li>` 使用`<li><div class="a"></div></li>`然后你唯一应该做的就是：.result li{style this thing}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:51:59.550

您还没有提供包含上述内容的所有 html，因此这可能需要根据您的要求进一步细化。

```
<!DOCTYPE html>
<html>
<head>
    <style>
        ul.result li div#a{ color: red; }
        ul.result li div#b{ color: green; }
        ul.result li div#c{ color: blue; }
    </style>
</head>
<body>
    <ul class="result">
        <li><div id="a">This is red</div></li>
        <li><div id="b">This is green</div></li>
        <li><div id="c">This is blue</div></li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:39:45.677

每个 div 不能有相同的 id。所以，你必须添加类。

# c# - 如何将表单数据保存为 XML 或 CSV？

> ID：16037228
> 
> 赞同：0
> 
> 时间：2013-04-16T12:35:31.943
> 
> 标签：c#, xml, csv, wpf-controls, save

我们目前已经构建了一个同时使用文本框和组合框的应用程序。

我们想在我们已经构建的用户控件库中创建一个保存按钮，并将当前输入的所有数据保存到 XML 或 CSV 中。两者中较容易的将是首选，但我觉得它们很可能是相同的困难。

我正在使用 WPF！我想这样做，以便将数据存储到文件中。文件不需要发生任何惊人的事情，这只是保存来自不同文本框和组合框的数据然后将它们存储在文档中的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:10:27.967

好的，这里有一些东西可以尝试。首先，因为您使用的是 WPF，所以您需要一种方法来获取特定类型的控件。这是一个适合您的扩展方法：

```
public static class DependencyObjectExtensions
{
    public static IEnumerable<T> GetChildren<T>(this DependencyObject parent) where T : DependencyObject
    {
        List<T> childControls = new List<T>();
        int count = VisualTreeHelper.GetChildrenCount(parent);
        for (int i = 0; i < count; i++)
        {
            DependencyObject childControl = VisualTreeHelper.GetChild(parent, i);
            if (childControl is T)
            {
                childControls.Add((T)childControl);
            }
        }
        return childControls;
    }
} 
```

接下来，您需要一种方法来创建 CSV：

```
public string ToCsv(params IEnumerable<Control>[] controls)
{
    return ToCsv(true, controls);
}

public string ToCsv(bool outputColumnNames, params IEnumerable<Control>[] controls)
{
    var sb = new StringBuilder();

    if (outputColumnNames)
    {
        foreach (var textBox in controls.OfType<TextBox>())
        {
            sb.Append(textBox.Name);
            sb.Append(",");
        }

        foreach (var comboBox in controls.OfType<ComboBox>())
        {
            sb.Append(comboBox.Name);
            sb.Append(",");
        }
        sb.Remove(sb.Length - 1, 1);
    }

    sb.AppendLine();

    foreach (var textBox in controls.OfType<TextBox>())
    {
        sb.Append(textBox.Text);
        sb.Append(",");
    }

    foreach (var comboBox in controls.OfType<ComboBox>())
    {
        sb.Append(comboBox.Text);
        sb.Append(",");
    }
    sb.Remove(sb.Length - 1, 1);

    return sb.ToString();
} 
```

最后......像这样使用它：

```
var textBoxes = grid.GetChildren<TextBox>();
var comboBoxes = grid.GetChildren<ComboBox>();
string csv = ToCsv(textBoxes, comboBoxes); 
```

在上面，`grid`在我的测试表单上定义如下：

```
<Grid Name="grid"> 
```

控件是它的孩子。希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:50:01.733

这是一个相当宽泛的问题，但总体思路是，您必须将数据序列化为最终使用的任何格式（这取决于您以后打算如何处理数据：您是否将其发送给另一个客户？需要以一种格式还是另一种格式？您只是保存数据以记录它吗？）另外，请记住 CSV 是一个平面文件，即文件的每一行都是一行，每个逗号分隔的值是在列中，而 XML 是一种分层格式，即树，如 HTML。这使得 CSV 更适合存储数据库行之类的内容，并使 XML 更适合存储分层内容，例如对象图、文档布局等。所以它真的取决于你想要做什么（你可能想要添加更多详细说明您的问题，以便获得更好的答案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:45:25.660

```
private void btnSave_Click(object sender, EventArgs e)
{
    var lines = new List<string>();
    foreach (Control c in this.Controls)
    {
        if (c is TextBox)
            lines.Add(string.Format("{0},{1}", ((TextBox)c).Name, ((TextBox)c).Text));
        if (c is ComboBox)
            lines.Add(string.Format("{0},{1}", ((ComboBox)c).Name, ((ComboBox)c).Text));
    }
    System.IO.File.WriteAllLines(@"data.csv", lines);
} 
```

对于 WPF：

帮手：

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
    if (depObj != null)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(depObj, i);
            if (child != null && child is T)
            {
                yield return (T)child;
            }

            foreach (T childOfChild in FindVisualChildren<T>(child))
            {
                yield return childOfChild;
            }
        }
    }
} 
```

编码：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
{
    var lines = new List<string>();
    foreach (TextBox tb in WindowHelper.FindVisualChildren<TextBox>(this))
        lines.Add(string.Format("{0},{1}", tb.Name, tb.Text));
    foreach (ComboBox cb in WindowHelper.FindVisualChildren<ComboBox>(this))
        lines.Add(string.Format("{0},{1}", cb.Name, cb.Text));
    System.IO.File.WriteAllLines(@"data.csv", lines);
} 
```

# javascript - 为什么切换功能无法按预期工作？

> ID：16037230
> 
> 赞同：0
> 
> 时间：2013-04-16T12:35:35.617
> 
> 标签：javascript

我对 javascript 很陌生，我从编写一个小脚本的简单任务开始。我希望通过单击切换按钮来显示字符串...

```
<!DOCTYPE html>
<html>
<body>

<button onclick="foo()">Foo</button>
<button onclick="toggle()">Toogle</button>
<p id="demo"></p>

<script>
     var toggle = false;//set the desired initial value to toggle flag
     var x = "";

     function toggle() {
         alert("ENTERED Toggle");
         toggle = !toggle;
         x= toggle? "Toggle set to true. " : "";
     }

     function foo() {`enter code here`
         alert("ENTERED Foo");
         var y = "Food pressed";
         y = x + y;
        document.getElementById("demo").innerHTML=y; // display the x value
     }
</script>

</body>
</html> 
```

预期：当仅单击 foo 时，会显示警报框并单击“确定”只是简单的“Foo 已按下”。应显示。当单击一次切换然后单击 foo 时，将显示“切换设置为 true。Foo 已按下”{两个警报出现在此过程中}，然后再次第二次按下切换并按下 foo，切换标志为切换并且只有“Foo press”。显示出来，它遵循这样......

实际结果：只有 foo click 有效，而 toggle click 根本无效。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:38:58.027

你有冲突的名字。该`toggle`函数替换`toggle`变量。这是因为在 ECMAScript (Javascript) 中，可以通过不添加括号来传递函数，也就是说函数是[一等公民](http://en.wikipedia.org/wiki/First-class_citizen)。

一个例子：

```
x = alert; //"x" is now the same function as "alert"
x("Hej"); 
```

因此，您对`toggle`函数的定义等同于此分配：

```
var toggle = function() {
  alert("ENTERED Toggle");
  toggle = !toggle;
  x= toggle? "Toggle set to true. " : "";
} 
```

解决方案是为函数或变量指定另一个名称。

# java - Android VM 是否有任何命令行选项？

> ID：16037234
> 
> 赞同：0
> 
> 时间：2013-04-16T12:35:48.823
> 
> 标签：java, android, virtual-machine

Android VM 是否有任何命令行选项？如果有，我如何在 Eclipse 中设置它们？

我正在寻找这样的东西：

[http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

但对于达尔维克。

如何使用该`-XX:+UseCompressedStrings`参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:52:25.843

我在谷歌[的这个链接](http://www.netmite.com/android/mydroid/dalvik/docs/embedded-vm-control.html)搜索中发现了以下内容：

> Dalvik VM 支持多种命令行参数（使用 adb shell dalvikvm -help 获取摘要），但无法通过 Android 应用程序运行时传递任意参数。但是，可以通过某些系统属性影响 VM 行为。

但这只是通过 adb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:47:36.437

答案是不。

Dalvik 没有任何命令行，例如您提到的 oracle 文章。

您可以使用一些清单参数来请求简单的东西，例如更大的内存、硬件加速等。

# git - 通过 ssh 连接到服务器时出现 Git 错误

> ID：16037240
> 
> 赞同：1
> 
> 时间：2013-04-16T12:36:07.770
> 
> 标签：git, ssh

我在 Windows 7 上，我想通过 ssh 连接到服务器。但是在身份验证后我得到了一个错误（这是成功的）。

```
fatal: Interactive git shell is not enabled.
hint: ~/git-shell-commands should exist and have read and execute access. 
```

我有一个 git，但我用 Google 搜索是因为缺少 git-shell-commands 目录。是的，安装 git 后我的主目录中没有这个文件夹，但我创建了它并授予了权限。我还安装了类似'msysgit'的东西（因为当我从exe安装git时我没有git-shell-commands目录，在msysgit中有这个文件夹所以我将它复制到我的主目录）但仍然有问题并且得到这个错误。有任何想法吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:41:20.367

*您应该在服务器端为您的git*用户设置正确的登录 shell 。通常它位于*/usr/local/bin/git-shell*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-07T13:32:24.710

**应用这两个命令将解决此问题：**

要为 your_git_user 启用 git-shell：

`usermod -s /usr/bin/git-shell your_git_user`

递归更改 your_git_user 目录的所有者：

`chown -R your_git_user:your_users_group /home/your_git_user`

**您可以使用以下命令添加 git shell 命令：**

`cp /usr/share/doc/git-1.8.3.1/contrib/git-shell-commands/ /home/your_git_user/git-shell-commands -R`

# javascript - 更改 MSCRM 2011 子网格实体

> ID：16037244
> 
> 赞同：0
> 
> 时间：2013-04-16T12:36:22.133
> 
> 标签：javascript, dynamics-crm-2011, subgrid

我知道如何修改子网格的 FetchXml。我正在尝试根据使用 JS 的选项集的选择来动态更改子网格。根据选项集，子网格需要能够显示不同的实体（不是同时）。
示例：子网格当前显示具有特定关系类型的客户。选项集更改，现在子网格应显示名字为 John 的潜在客户。

我收到的错误是“FetchXml 中指定的实体名称与 EntityExpression 中的实体名称不匹配”

我将下面的 fetch 输入到网格中。这只是一个多值搜索。rc_entitylist 包含系统中的所有实体。rc_attributelist 包含所选实体的所有字段。用户选择一个实体，选择一个要搜索的字段，输入搜索条件（每行一个值），然后相应地填充子网格。

```
function runSearch() {
var entityname = Xrm.Page.getAttribute("rc_entitylist").getText();
var sgrid = "searchResults";
var fetchXml = '<fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="false">'+
'<entity name="' + entityname + '">'+
'<all-attributes />' +
'<filter type="and">'+
'<filter type="or">';

    var textBoxLines = document.getElementById("rc_searchcriteria").innerText;
    var attributename = Xrm.Page.getAttribute("rc_attributelist").getText();
    var lines = textBoxLines.split(/\n/);
    for(var i=0;i < lines.length; i++){
    fetchXml = fetchXml + '<condition attribute="' + attributename + '" operator="eq" value="'+ lines[i] +'" />';
    }

  fetchXml = fetchXml + '</filter>'+
'</filter>'+
'</entity>'+
'</fetch>';
 updateXml(sgrid, fetchXml, entityname);
 }

 function updateXml(grid, xmlfield, entityname) {   
try {      
    var g = document.getElementById(grid).control;
    g.setParameter("fetchXml", xmlfield);
} catch (e) { }   
// Refresh the grid      
document.getElementById(grid).control.refresh();   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:37:26.037

您是否考虑过在表单中​​添加多个子网格，并根据选项集的 on-change 事件隐藏/显示它们？

# .net - System.Net.Http.HttpClient 是否遭受 HttpWebRequest.AllowWriteStreamBuffering 的影响？

> ID：16037249
> 
> 赞同：5
> 
> 时间：2013-04-16T12:36:35.373
> 
> 标签：.net, httpclient, out-of-memory

我一直在尝试使用`System.Net.Http.HttpClient`POST 一个更大的文件（+1GB），但它引发了一个`SystemOutOfMemory`异常：

```
at System.Net.ScatterGatherBuffers.AllocateMemoryChunk(Int32 newSize)
at System.Net.ScatterGatherBuffers..ctor(Int64 totalSize)
at System.Net.ConnectStream.EnableWriteBuffering()
at System.Net.HttpWebRequest.SetRequestSubmitDone(ConnectStream submitStream)
at System.Net.Connection.CompleteStartRequest(Boolean onSubmitThread, HttpWebRequest request, TriState needReConnect)
at System.Net.Connection.SubmitRequest(HttpWebRequest request, Boolean forcedsubmit)
at System.Net.ServicePoint.SubmitRequest(HttpWebRequest request, String connName)
at System.Net.HttpWebRequest.SubmitRequest(ServicePoint servicePoint)
at System.Net.HttpWebRequest.BeginGetRequestStream(AsyncCallback callback, Object state)
at System.Net.Http.HttpClientHandler.StartGettingRequestStream(RequestState state)
at System.Net.Http.HttpClientHandler.PrepareAndStartContentUpload(RequestState state) 
```

显然，类似的问题发生`HttpWebRequest`在这里讨论：http: [//support.microsoft.com/kb/908573](http://support.microsoft.com/kb/908573)。

有什么方法可以将`AllowWriteStreamBuffering`底层网络请求设置为`false`？我找不到任何东西。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:34:26.277

只是为了节省其他感兴趣的人的时间，我正在回答我自己的问题。

经过几次测试后，异常似乎与问题`HttpWebRequest`中讨论的问题相同。我使用 Microsoft.AspNet.WebApi 版本 4.0.20710.0。

下面是两段等效的代码；前者在大文件上失败，而后者工作正常。

顺便说一句，尽管问题的整体好处`HttpClient`变得非常明显:-)

* * *

## 使用`HttpClient`

```
var clientRef = new System.Net.Http.HttpClient(
    new HttpClientHandler()
    {
        Credentials = new System.Net.NetworkCredential(MyUsername, MyPassword)
    });
clientRef.BaseAddress = new Uri(serverAddress);
clientRef.DefaultRequestHeaders.ExpectContinue = false;
clientRef.PostAsync(
    MyFavoriteURL,
    new System.Net.Http.StreamContent(inputStream)).ContinueWith(
        requestTask =>
        {
            HttpResponseMessage response = requestTask.Result;
            response.EnsureSuccessStatusCode();
        }, TaskContinuationOptions.LongRunning).Wait(); 
```

* * *

## 使用`HttpWebRequest`

```
// Preauthenticate
var req  = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(MyFavoriteURL);
req.Credentials = new System.Net.NetworkCredential(MyUsername, MyPassword);
req.Method = "POST";
req.PreAuthenticate = true;
req.Timeout = 10000;
using (var resp = (System.Net.HttpWebResponse)req.GetResponse())
{
     if (resp.StatusCode != System.Net.HttpStatusCode.Accepted && resp.StatusCode != System.Net.HttpStatusCode.OK)
     {
         throw new Exception("Authentication error");
     }
}

// Upload
req = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(MyFavoriteURL);
req.Credentials = new System.Net.NetworkCredential(MyUsername, MyPassword);
req.Method = "POST";
req.PreAuthenticate = true;
req.Timeout = 1200000;
req.ContentLength = inputStream.Length;
req.ContentType = "application/binary";
req.AllowWriteStreamBuffering = false;
req.Headers.ExpectContinue = false;
using (var reqStream = req.GetRequestStream())
{
    inputStream.CopyTo(reqStream);
}

using (var resp = (System.Net.HttpWebResponse)req.GetResponse())
{
    if (resp.StatusCode != System.Net.HttpStatusCode.Accepted && resp.StatusCode != System.Net.HttpStatusCode.OK)
    {
        throw new Exception("Error uploading document");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T12:30:22.270

对于大文件上传，我也遇到了同样的问题。添加我的发现，以便对某人有所帮助。

HttpClient根据以下条件判断是否做缓冲，

```
if( HttpRequestMessage.Headers.TransferEncodingChunked == true ||     HttpRequestMessage.Content.Headers.ContentLength != null )
{
  //do streamed upload
}else
{
  //do buffered upload.
} 
```

我已将 PushedStreamContent 用作 HttpRequestMessage.Content，因为我的服务器每个请求最多接受 150 MB。一旦我将 TransferEncodingChunked 设置为 True，内存峰值就会减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-20T16:22:26.413

我认为你有一个重复的标题，你可以删除前者

```
req.Headers.Add("ExpectContinue", "false");
...
req.Headers.ExpectContinue = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-21T19:55:23.180

帮助我发送一个大文件，而无需通过“中继控制器”进行缓冲。
我开始工作的场景是：
客户端 Web 应用程序（水疗中心等）-> RelayController -> 存储 http 数据流的最终内容控制器

```
var request = new HttpRequestMessage()
{
  RequestUri = new Uri("https://someurl/api/upload"),
  Method = HttpMethod.Post,
};
request.Headers.TransferEncodingChunked = true;
request.Content = new StreamContent(Request.Body);

await httpClient.SendAsync(request); 
```

花了很多时间让它工作，得到了 Prakash P 的领导，他发布了 httpclient 流与缓冲逻辑。

# cassandra - 在 Cassandra 中设计时间序列数据库

> ID：16037250
> 
> 赞同：5
> 
> 时间：2013-04-16T12:36:39.323
> 
> 标签：cassandra, time-series

我正在考虑创建一个 Cassandra 时间序列数据库，用于存储数百万个日常数据系列，这些数据可能总共有多达 100B 个数据点。

我看了这篇文章： [http ://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/](http://rubyscale.com/blog/2011/03/06/basic-time-series-with-cassandra/)

这个设计非常合理。因此，基本上我可以将每日时间戳作为列，并在必要时通过将日期附加到行来对列进行分片。

我有两个问题：

*   我正在考虑存储多达 20,000 个带时间戳的（每日）列。甚至有必要通过例如对行进行分片。有这么多列的年份？对行进行分片以将列数减少到每年 365 是否有任何优点/缺点。
*   我的另一个想法是每年创建列族，而不是逐行分片。这样，当访问多年的数据时，我将不得不查询多个列族而不是一个列族，并在客户端加入结果。这种方法会加快速度还是减慢一切？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:13:24.870

如果您要管理大量写入，则您的方法存在一个问题。

始终写入 1 个键意味着对该键的所有写入都将转到一个节点。基本上，您每天将使用集群外的一个节点，因此您不妨拥有一个巨大的 Cassandra 实例，而不必费心设置集群。如果您的写入频率变得非常高，您可能会关闭负责当天/密钥的节点。

我的建议是将一天存储在同时使用的多行中。时间桶可能很危险，因为一个桶中的突然激增可能会使所有东西都下降。

您可以像这样创建您的存储桶（行键）：

*   [ROW_BASE_NAME] + [DAY] + someHashFunction(timestamp) % 10
*   [ROW_BASE_NAME] + [DAY] + random.nextInt(10)
*   [ROW_BASE_NAME] + [DAY] + nextbucket <--- 如果你有一个安全的方法来自己旋转存储桶

有很多方法可以做到这一点。您还可以使用要保存的列的某些元素来执行此操作。但我认为这样做应该很重要，以便始终利用整个 cassandra 集群。

我的回答仅对写入繁重的应用程序/功能有效，因为您将不得不使用 multi_get（多键整行读取）来读取所有数据并重构当天的整个时间线。

# java - 带有背景图像的JPanel，其中一些部分是透明的

> ID：16037253
> 
> 赞同：0
> 
> 时间：2013-04-16T12:36:44.000
> 
> 标签：java, swing, jpanel

我的图像就像一个中间透明的框架。我想将其作为 JPanel 的背景图像。我已经这样做了，但是对于图像的透明部分，白色即将到来。我想删除这个白色，以便这个 Jpanel 下面的组件变得可见。

我的自定义 JPanel 代码是

```
public class JPanelWithBackground extends JPanel {
private static final long serialVersionUID = 1L;
Image imageOrg = null;
Image image = null;
{
     addComponentListener(new ComponentAdapter() {
             public void componentResized(ComponentEvent e) {
             int w = JPanelWithBackground.this.getWidth();
             int h = JPanelWithBackground.this.getHeight();
             image = w>0&&h>0?imageOrg.getScaledInstance(w,h, 
             java.awt.Image.SCALE_SMOOTH):imageOrg;
             JPanelWithBackground.this.repaint();
   });
 }
 public JPanelWithBackground(Image image2) {
    imageOrg=image2;
    image=image2;
    setOpaque(false);
    }
    public void paintComponent(Graphics g) {
    super.paintComponent(g);
    if (image!=null) 
      g.drawImage(image, 0, 0, null);
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:25:22.290

我对您的代码没有任何特别的问题。问题可能是您的图像不像您期望的那样透明。

这是一个似乎可以完美运行的示例（我只是冒昧地修复了您代码中的小问题）：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Image;
import java.net.MalformedURLException;
import java.net.URL;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class JPanelWithBackground extends JPanel {
    private static final long serialVersionUID = 1L;
    Image imageOrg = null;

    public JPanelWithBackground(Image image2) {
        imageOrg = image2;
        setOpaque(false);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(imageOrg.getWidth(this), imageOrg.getHeight(this));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if (imageOrg != null) {
            System.err.println("painting");
            g.drawImage(imageOrg, 0, 0, getWidth(), getHeight(), this);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    JFrame frame = new JFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    JPanelWithBackground panel = new JPanelWithBackground(new ImageIcon(new URL(
                            "http://www.lemondedemario.fr/images/dossier/bowser/bowser.png")).getImage());
                    JPanel greenPanel = new JPanel(new BorderLayout());
                    greenPanel.setBackground(Color.GREEN);
                    greenPanel.add(panel);
                    frame.add(greenPanel);
                    frame.pack();
                    frame.setVisible(true);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

# java - org.springframework.jdbc.UncategorizedSQLException：

> ID：16037256
> 
> 赞同：1
> 
> 时间：2013-04-16T12:36:50.930
> 
> 标签：java, spring

```
org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; uncategorized SQLException for SQL [???]; SQL state [null]; error code [0]; Connections could not be acquired from the underlying database!; nested exception is java.sql.SQLException: Connections could not be acquired from the underlying database!
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertJdbcAccessException(HibernateAccessor.java:424)
    at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:410)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:424)
    at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)
    at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:921)
    at org.springframework.orm.hibernate3.HibernateTemplate.find(HibernateTemplate.java:913)
    at dao.daoImpl.FaxDaoImpl.getOutBoundFaxes(FaxDaoImpl.java:94)
    at faxUpload.SecureBatchFaxFileUpload.main(SecureBatchFaxFileUpload.java:75)
Caused by: java.sql.SQLException: Connections could not be acquired from the underlying database!
    at com.mchange.v2.sql.SqlUtils.toSQLException(SqlUtils.java:106)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:529)
    at com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource.getConnection(AbstractPoolBackedDataSource.java:128)
    at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:82)
    at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:417)
    at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:144)
    at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:105)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1561)
    at org.hibernate.loader.Loader.doQuery(Loader.java:661)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:224)
    at org.hibernate.loader.Loader.doList(Loader.java:2145)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2029)
    at org.hibernate.loader.Loader.list(Loader.java:2024)
    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:375)
    at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:308)
    at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:153)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1106)
    at org.hibernate.impl.QueryImpl.list(QueryImpl.java:79)
    at org.springframework.orm.hibernate3.HibernateTemplate$30.doInHibernate(HibernateTemplate.java:930)
    at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:419)
    ... 5 more
Caused by: com.mchange.v2.resourcepool.CannotAcquireResourceException: A ResourcePool could not acquire a resource from its primary factory or source.
    at com.mchange.v2.resourcepool.BasicResourcePool.awaitAvailable(BasicResourcePool.java:1319)
    at com.mchange.v2.resourcepool.BasicResourcePool.prelimCheckoutResource(BasicResourcePool.java:557)
    at com.mchange.v2.resourcepool.BasicResourcePool.checkoutResource(BasicResourcePool.java:477)
    at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool.checkoutPooledConnection(C3P0PooledConnectionPool.java:525)
    ... 23 more 
```

我在 spring 和 hibernate 中运行一个项目，使用我的 sql 和 c3p00l 属性。这是我的 c3pool 设置

```
 <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
  <!--  <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
     <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" >  -->
        <property name="driverClass"><value>${jdbc.driverClassName}</value></property> 
        <property name="jdbcUrl"><value>${jdbc.url}</value></property>
        <property name="user"><value>${jdbc.username}</value></property>
        <property name="password"><value>${jdbc.password}</value></property>

        </bean> 
```

有时我会收到此异常。这是因为我的 c3pool 设置。任何帮助将不胜感激

# javascript - 如何强制浏览器显示物理位置共享接受菜单

> ID：16037266
> 
> 赞同：0
> 
> 时间：2013-04-16T12:37:17.023
> 
> 标签：javascript, geolocation

我们正在开发一个平板电脑应用程序，一些代理将使用该应用程序。在 的帮助下`geolocation`，每次代理打开或关闭任务时，我们都会保存坐标。

问题是，我们获得状态，无论是否接受共享位置。因此，在他接受分享位置之前，我们不会让他走得更远。

但是如果他按下了`'Never for this site'`或类似的东西，我们怎么能把这些选项带回来让他说呢`'Allow'`？

我知道他们可以训练所有代理允许，但可能会发生“错误”:)

# language-agnostic - 集群文件系统对编程的影响（如果有的话）？

> ID：16037271
> 
> 赞同：1
> 
> 时间：2013-04-16T12:37:25.947
> 
> 标签：language-agnostic, filesystems, cluster-computing

我的集群节点必须访问大量文件（想想我必须应用于我的计算的一堆配置参数）。我们正在考虑部署带有集群文件系统（GFS 或 OCFS）的 SAN，问题是我不知道我的程序会受到怎样的影响（我是否必须处理文件锁定？）

这可能完全是愚蠢的，但这对我来说有点像范式转变，我需要确定。

谢谢

# java - 执行逻辑时检票加载图标/弹出窗口

> ID：16037273
> 
> 赞同：1
> 
> 时间：2013-04-16T12:37:27.607
> 
> 标签：java, javascript, popup, load, wicket

在我的**Wicket 应用程序**中，我有几行代码需要一些时间来执行。如果我可以在执行逻辑期间显示加载图标或弹出窗口，那就太好了。问题是我不知道如何实现这样的东西。有人可以帮我弄这个吗？

**目标**是_

```
Class.java
    // Show popup or icon
    this.getData();
    // Hide popup 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:53:08.357

看看这个检票口维基：

[通用忙指示符（适用于 Ajax 和非 Ajax 提交）](https://cwiki.apache.org/WICKET/generic-busy-indicator-for-both-ajax-and-non-ajax-submits.html)

如果您使用的是 ajax 按钮/链接，您可以使用它们`IndicatingAjaxLink`都`IndicatingAjaxButton`来自 wicket-extensions

```
<dependency>
<groupId>org.apache.wicket</groupId>
<artifactId>wicket-extensions</artifactId>
<version>${wicket.version}</version>
</dependency> 
```

关于自定义指标的链接：

[在 wicket 中自定义 IndicatingAjaxLink](https://stackoverflow.com/questions/11773885/customizing-indicatingajaxlink-in-wicket)

[是否可以更改 Wicket 活动指示器的颜色？](https://stackoverflow.com/questions/5665729/is-it-possible-to-change-the-color-of-wickets-activity-indicator)

您还可以覆盖 css 类：

```
span.wicket-ajax-indicator img {
  margin: 0;
  padding: 0;
  padding-left: 2px;
  display: inline;
  white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:58:15.723

看看[AjaxLazyLoadPanel](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/extensions/ajax/markup/html/AjaxLazyLoadPanel.html)。将需要很长时间的东西的显示放入一个 Panel 中，并用 AjaxLazyLoadPanel 包装它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T14:03:28.017

如果要加载要自定义的弹出窗口，则可以使用[模态](http://www.wicket-library.com/wicket-examples/ajax/modal-window;jsessionid=BF03586306102A3D86F318515E99DAE5?0)

窗户。按照教程在单击时加载模式窗口。

在目标面板上有任何你喜欢的文本。

在modalPanel1（目的面板）的onConfigure()中，最后添加如下代码：

```
Thread.sleep(//time average);
window.close(target); 
```

其中 target 作为参数从 ModalWindowPage.java 作为构造函数的对象传递给构造函数。

所以理想情况下，这是实例化的变化：

```
modal2.setContent(new ModalPanel1(modal2.getContentId(),target); 
```

其中 target 是 ajax 链接/按钮目标。

您也可以在页面加载时激活它（单击[此处](https://stackoverflow.com/questions/8063002/how-open-modal-window-on-page-load-in-wicket-1-5)查看讨论）

# c# - 将图像从 Windows Phone 上传到 Azure blob 存储。不创建

> ID：16037277
> 
> 赞同：2
> 
> 时间：2013-04-16T12:37:38.700
> 
> 标签：c#, azure, windows-phone, azure-storage, azure-blob-storage

我正在使用 Windows Azure 在我的 Windows Phone 应用程序中存储图像。

相机拍摄照片，然后上传所选照片流。但是它没有抛出错误但没有上传？

```
 var blobContainer = CloudStorageContext.Current.Resolver.CreateCloudBlobClient();
            var container = blobContainer.GetContainerReference("pics");

            var blob = container.GetBlobReference("picture.jpg");
            blob.UploadFromStream(e.ChosenPhoto, response => { MessageBox.Show(blob.Uri.ToString()) }); 
```

我不知道发生了什么。解析器包含正确的用户、密钥和 url。容器“图片”确实存在，但没有上传图像。消息框弹出一个不存在的 url。

更新 - 这里似乎发布了一个类似（几乎相同）的问题 -[将照片流从相机上传到 WP7 中的 azure blob](https://stackoverflow.com/questions/10348439/uploading-a-photo-stream-from-camera-into-azure-blob-in-wp7)。但是，大写的容器名称在这里不是问题，因此该解决方案没有解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T18:27:14.460

我有一个应用程序（Windows Phone 8）将拍摄的图像上传到 Azure webrole，然后将图像存储在 Azure 存储 Blob 中。下面的代码是服务器存储图像的方式。同样，此代码不会在手机上运行，​​但您可以将其用作参考。

```
 string randomGUID = locationID
                + "-"
                + Guid.NewGuid().ToString();

            //Retrieve storage account from application settings
            CloudStorageAccount storageAccount = GetStorageAccount();

            //Create blob client
            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

            //Retrieve reference to images container
            CloudBlobContainer container = blobClient.GetContainerReference(
                RoleEnvironment.GetConfigurationSettingValue("BlobContainer"));                    

            //Retrieve references to the blob inside the container
            CloudBlockBlob blockBlob = container.GetBlockBlobReference(randomGUID);

            blockBlob.UploadFromStream(imageToUpload); 
```

变量*imageToUpload*的类型是`Stream`。

如您所见，这是非常简单的代码。也许您的问题与您的 lambda 表达式有关`UploadFromStream`？

# android - 将 Drawable 转换为位图以更改 Google Maps Android API v2 中标记的颜色

> ID：16037279
> 
> 赞同：6
> 
> 时间：2013-04-16T12:37:48.183
> 
> 标签：android, google-maps, drawable, google-maps-android-api-2

我正在将旧应用程序从 v1 转换为 v2，但我的标记图标的颜色有问题。我有一个基本的白色图标，需要对其进行着色。

在 v1 中，我是这样做的：

```
Drawable d = DrawableUtils.resizeImageToDrawable(
    MapViewFragment.mapviewActivity,
    Configuration.Display.getDrawableFix(i),
    Configuration.MapView.getWaypointIconWidth(),
    Configuration.MapView.getWaypointIconHeight());
d.setColorFilter(color, Mode.MULTIPLY);

overlay = new MyFplnFixListItimizedOverlay(d); 
```

由于 v2 Markers 的图标不接受 Drawable，因此我考虑将 Drawable 转换为 Bitmap，如下所示：

```
Drawable d = DrawableUtils.resizeImageToDrawable(
    MapViewFragment.mapviewActivity,
    Configuration.Display.getDrawableFix(i),
    Configuration.MapView.getWaypointIconWidth(),
    Configuration.MapView.getWaypointIconHeight());
d.setColorFilter(color, Mode.MULTIPLY);

Bitmap icon = ((BitmapDrawable) d).getBitmap();

Marker marker = MapViewFragment.map.addMarker(new MarkerOptions()
    .position(point)
    .title(Integer.toString(fplnType))
    .visible(true)
    .icon(BitmapDescriptorFactory.fromBitmap(icon))); 
```

但由于某种原因，它不起作用。图标保持白色。任何人都知道为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-06T12:15:22.950

好的，这就是我在一天结束时的做法：

```
Drawable d = DrawableUtils.resizeImageToDrawable(
                    MapViewFragment.mapViewActivity,
                    Configuration.Display.getDrawableFix(i),
                    Configuration.MapView.getWaypointIconWidth(),
                    Configuration.MapView.getWaypointIconHeight());
d.setColorFilter(color, Mode.MULTIPLY);

Bitmap b = ((BitmapDrawable) d).getBitmap();
Canvas myCanvas = new Canvas(b);

int myColor = b.getPixel(0,0);
ColorFilter filter = new LightingColorFilter(myColor, color);

Paint pnt = new Paint();
pnt.setColorFilter(filter);
myCanvas.drawBitmap(b,0,0,pnt);

Marker marker = MapViewFragment.map.addMarker(new MarkerOptions()
    .position(point)
    .title(Integer.toString(fplnType))
    .visible(true)
    .icon(BitmapDescriptorFactory.fromBitmap(b))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T14:41:53.770

如果你的 drawable 没有在 XML 中定义，你可以使用这个方法：

```
protected Bitmap fromDrawable(final Drawable drawable, final int height, final int width) {
        final int widthDip = (int) TypedValue.applyDimension(1, width, getResources()
                .getDisplayMetrics());
            final int heightDip = (int) TypedValue.applyDimension(1, width, getResources().getDisplayMetrics());
        final Bitmap bitmap = Bitmap.createBitmap(width, height, Config.ARGB_8888);
        final Canvas canvas = new Canvas(bitmap);
        drawable.setBounds(0, 0, canvas.getWidth(), canvas.getHeight());
        drawable.draw(canvas);
        return bitmap;
    } 
```

请注意，如果您需要从 OUTSIDE an 执行此操作`Activity`，您还需要传递 a `Context`（以便调用`context.getResources().getDisplayMetrics()`）。您还可以传递`DisplayMetrics`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:44:42.037

我不确定这个 DrawableUtils 在做什么，但你正在将它转换为 BitmapDrawable。它真的是 BitmapDrawable 吗？

这是一些从任何类型的drawable中提取位图的代码：

```
Drawable d = // make sure it's not null
d.setBounds(0, 0, width, height);
Bitmap b = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
Canvas c = new Canvas(b);
d.draw(c); 
```

这个想法是您在可变位图上创建一个画布并在画布上绘制该可绘制对象

**编辑：**

我刚刚看到@Analizer 的答案，是的，如果您没有 Drawable 作为资源，我的答案很好。但是，如果您这样做，请改用他的答案。

# android - 具有自定义登录 UI 的移动应用程序中 Gigya 的登录流程

> ID：16037287
> 
> 赞同：3
> 
> 时间：2013-04-16T12:38:20.133
> 
> 标签：android, login, gigya

我正在使用 Gigya 开发一个 Android 应用程序，以允许人们使用 Facebook 和 Twitter 进行注册；与此同时，另一位开发人员也在 iOS 中做同样的事情。我们要实现自定义登录 UI。

标准方法使用 Gigya 自己的 UI，并在此处记录：

[http://developers.gigya.com/035_Mobile_SDKs/020_Android#Logging_in_the_User](http://developers.gigya.com/035_Mobile_SDKs/020_Android#Logging_in_the_User)

下面，它只是建议：

> 如果您想自己实现图形设计，请改用[登录](http://wikifiles.gigya.com/SDKs/Android/doc/com/gigya/socialize/android/GSAPI.html#login%28com.gigya.socialize.GSObject,%20com.gigya.socialize.GSResponseListener,%20java.lang.Object%29)方法。

标准登录方法使用方法调用专用的登录后回调，`onLogin(...)`并且所有后续流程都被描述为源自此事件。另一种登录方法调用标准`onGSResponse(...)`回调；目前尚不清楚如何使用响应来构造用户，因此我将实现设置为调用`socialize.getUserInfo`. 尝试调用这两种方法都导致了许多异常错误。

根据我开始使用的 Gigya 说明

```
mGSAPI = new GSAPI(GIGYA_APP_KEY, this);
mGSAPI.setAPIDomain("eu1.gigya.com"); 
```

in `onCreate(...)`（其中`GIGYA_APP_KEY`是从我们的控制台复制的值）。我之所以调用 setAPIDomain，是因为我们遇到了无效的数据中心错误（尽管是 500001 代码，而不是 301001 代码！），这已解决。

Facebook 登录按照我的预期通过登录流程，然后返回错误 400093（文档告诉我这是一个无效的 API 参数，并显示消息“缺少参数：client_id”）。

Twitter登录返回206002，“Account Pending Verification”，这似乎是有道理的；然后我打电话

```
mGSAPI.sendRequest(
        "getUserInfo",
        null, //parameters
        true, //use HTTPS
        this, //the callback
        null //a context object
); 
```

这给了我错误：

> 缺少必需的参数：未提供秘密或签名。无法验证请求。

[Web 应用程序需要建议 UID的文档`socialize.getUserInfo`](http://developers.gigya.com/037_API_reference/010_Socialize/socialize.getUserInfo)，但本机应用程序不需要。它没有提到其他必填字段。我有点卡住了......`GSAPI`对象不应该处理验证，因为它是用 API 密钥初始化的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:20:13.963

我可以在非常高的水平上为您提供一些集成 GIGYA 的方向。（下面的代码不是逐字记录的）希望它有所帮助。

对于一个私有的 Android 应用程序，我创建了一个管理器对象 (GigyaManager)，它维护了一个 GSAPI 对象的单例实例。

这个单例 GigyaManager 在我的应用程序对象中初始化：

```
public static GigyaManager getInstance(String apiKey, Context context) {
    mGSAPI = new GSAPI(apiKey, context);
} 
```

我的 GigyaManager 类也有一个包装方法来处理带有社交服务的登录：

```
public void loginWithSocialService(GigyaSocialProvider provider, GSResponseListener listener) throws Exception {
        // did the user attempt a social login, and bail out on the registration
        // phase?
        if (GigyaManager.getInstance().getGSAPI().getSession() != null) { 
            logout();
        }

        GSObject providerArgs = new GSObject();
        providerArgs.put(GigyaManager.GIGYA_ARG_PROVIDER, provider.name().toLowerCase());

        mGSAPI.login(providerArgs, listener, null);
    } 
```

这是从包含“登录”按钮的片段中的 onClick 侦听器触发的：

```
GigyaManager.getInstance("appKey", getActivity()).loginWithSocialService(GigyaSocialProvider.FACEBOOK, this); 
```

该片段必须实现具有回调来处理登录是否成功的 GSResponseListener：

```
@Override
public void onGSResponse(String method, GSResponse response, Object context) {
    if (!method.equalsIgnoreCase("login") || response.getErrorCode() != 0) {
        return;
    }
    GIGYAResponseWrapper resp = new GIGYAResponseWrapper(response.getResponseText());

    // user is attached to login provider? 
    if (resp.isIsAttached()) {
        // start some sort of loader or asynctask to get information about user account
        // connected to GIGYA social login

        Bundle args = new Bundle();
        args.putString(ARG_UID, resp.getUid());
        args.putString(ARG_UID_SIGNATURE, resp.getUidSignature());
        args.putString(ARG_SIGNATURE_TIMESTAMP, resp.getSignatureTimestamp());
        args.putString(ARG_SOCIAL_NICKNAME, resp.getNickname());

    } else {
        // login success, but this social account is not associated with anything in GIGYA
    }
} 
```

# iphone - 设备和模拟器中 iPhone 应用程序上的 Xcode 链接器错误

> ID：16037289
> 
> 赞同：0
> 
> 时间：2013-04-16T12:38:23.060
> 
> 标签：iphone, ios, objective-c, ios4

开发人员您好，当我尝试创建构建任何想法时，我得到一个链接器错误

这是错误

> 错误：未知参数：'-fobjc-nonfragile-abi2' 命令 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:03:17.760

如果您在项目设置的“其他链接器标志”中添加了此 (-fobjc-nonfragile-abi2) 链接器标志，则将其删除，根据最新的 LLVM 编译器，这是默认设置。

# perl - 在某些情况下不能将数字用于 perl 哈希键？

> ID：16037290
> 
> 赞同：2
> 
> 时间：2013-04-16T12:38:22.830
> 
> 标签：perl, key

快速提问...
为什么第一个键有效，而其余的无效？也就是说，第二个键会引发语法错误。我以前用数字作为键，但是一旦我写了' `to`'，脚本就会变黑（也就是说，不是通常用于键的注释颜色）。如果我拿走 ' `to`' 它会起作用并在下一个键上引发错误。

我不能有以数字开头的数字和字母组合吗？

```
my %ranges = (
    under10 => "x < 10000",
    10to20  => "10000 <= x < 20000",
    20to30  => "20000 <= x < 30000",
    30to40  => "30000 <= x < 40000",
    40to50  => "40000 <= x < 50000",
    50to60  => "50000 <= x < 60000",
    60to70  => "60000 <= x < 70000",
    70to80  => "70000 <= x < 80000",
    80to90  => "80000 <= x < 90000",
    90to100 => "90000 <= x < 100000",
    100plus => "100000 <= x",
); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T12:44:03.017

将它们放在引号中。[文档](http://perldoc.perl.org/perldata.html)说：

> => 运算符主要只是一个在视觉上更独特的逗号同义词，但如果它是一个合法的简单标识符的裸字，它也会安排其左侧操作数被解释为字符串。

标识符必须以字母或下划线开头，因此`10to30`不是合法标识符。结果，它不会被转换为字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:42:21.587

你需要引用它们:)

```
my %ranges = (
    'under10' => "x < 10000",
    '10to20'  => "10000 <= x < 20000",
    '20to30'  => "20000 <= x < 30000",
    '30to40'  => "30000 <= x < 40000",
    '40to50'  => "40000 <= x < 50000",
    '50to60'  => "50000 <= x < 60000",
    '60to70'  => "60000 <= x < 70000",
    '70to80'  => "70000 <= x < 80000",
    '80to90'  => "80000 <= x < 90000",
    '90to100' => "90000 <= x < 100000",
    '100plus' => "100000 <= x",
); 
```

# servicestack - 如何在 ServiceStack 插件中注册多个服务？

> ID：16037294
> 
> 赞同：2
> 
> 时间：2013-04-16T12:38:25.327
> 
> 标签：servicestack

我在 ServiceStack 页面上阅读了新的 wiki [Modularizing Services 。](https://github.com/ServiceStack/ServiceStack/wiki/Modularizing-services)我没有找到如何在插件中注册多个服务。当然，我可以`appHost.Register(typeof(MyServiceInside))`为插件内的每个服务使用。有没有更快的方法一次添加多个服务？就像您可以在 AppHost 的构造函数中通过指定程序集一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T15:05:59.527

RegisterService 允许您手动注册临时服务。如果您不想每次都输入方法，只需使用 For 循环：

```
var ServiceRoutes = new Dictionary<Type, string[]> {
    { typeof(AuthService), new[]{"/auth", "/auth/{provider}"} },
    { typeof(AssignRolesService), new[]{"/assignroles"} },
    { typeof(UnAssignRolesService), new[]{"/unassignroles"} },
};

foreach (var registerService in ServiceRoutes)
{
    appHost.RegisterService(registerService.Key, registerService.Value);
} 
```

# delphi - 使用动态布局搜索自定义缩略图查看器组件

> ID：16037306
> 
> 赞同：2
> 
> 时间：2013-04-16T12:38:56.460
> 
> 标签：delphi, layout, grid, thumbnails

我需要一个控件，它可以显示与所附图像相似的缩略图。

它应该支持：

*   虚拟模式
*   处理多达 50.000 张图像
*   缩略图组
*   缩放
*   使用德尔福 XE3。

如果这种控制尚不存在，我将不得不从头开始创建一个。开发这样的控件的最佳策略是什么？

[查看它应该是什么样子的示例](http://i.imgur.com/YrN5yh1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:16:05.130

RMKlever 在这里有一系列博客文章和示例代码[。](http://rmklever.com/?tag=thumbnails)可以模拟各种各样的东西，但是如果您对所需的格式特别感兴趣，则必须自己进行代码修改。

我相信这个控件是他自己的一个叫做[rkView](http://rmklever.com/?tag=rkview)的。演示可能需要大量工作才能让它们为您工作，我发现由于缺乏文档和示例，很难开始使用他的东西，但我最终想通了。

# jquery - 如何响应地限制元素的数量

> ID：16037311
> 
> 赞同：2
> 
> 时间：2013-04-16T12:39:09.700
> 
> 标签：jquery, css, html, responsive-design

我想限制列表中元素的数量。我想动态设置元素的数量。

我的第一种方法如下：

```
var winHeight = $(window).height() ;
var listHeight = $('.listElement').height() * $('.listElement').length ;

if ( listHeight > (winHeight * 0.66) ){

    // If the list is larger than 66% of the screen, cut off those elements 
    // and provide buttons to flick through the list

} 
```

它看起来不太好，我不确定这是否是正确的编码方式。

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:36:08.507

为什么不能使用 css 解决方案而不是 jQuery？

我不太了解，但是在您的 listElement 类上，尝试这样做：

```
.listElement {
  max-height: 300px; // put here your max height do you want
  height: 200px;
  overflow: auto; // when your list get the maximum height, css will put a scroolbar
} 
```

我很抱歉，如果不明白它。

拥抱，文。

# c# - 从一个 api 控制器方法重定向到另一个，并重新应用自定义授权过滤器

> ID：16037313
> 
> 赞同：3
> 
> 时间：2013-04-16T12:39:17.180
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

在 WebApi 中，我有一个控制器操作，我希望能够重定向到另一个 ApiController 操作。我用自定义的 AuthorizeAttribute ( ) 属性装饰这些方法，`CustomAuthorizaton`因此任何重定向都必须通过这些传入的安全过滤器。

这是一个例子：

```
public class SomeController : ApiController
{

    [CustomAuthorization("Foo")]
    [System.Web.Http.HttpGet]
    public CustomResponse SomeMethod(int arg1, int arg2)
    {
        ....
    } 
```

}

```
public class AnotherController : ApiController
{

    [CustomAuthorization("Bar")]
    [System.Web.Http.HttpGet]
    public CustomResponse AnotherMethod(int arg1, int arg2)
    {
        if(arg1 == 2){

           return Redirect to SomeMethod(...) in SomeController ???

        }

    } 
```

}

您会注意到我还返回了我自己的自定义响应对象（`CustomResponse`在本例中）。

所以我需要帮助的是如何`CustomResponse`从重定向返回结果，并使该重定向通过`CustomAuthorization`过滤器。

澄清一下，调用`AnotherMethod`只需要`"Bar"`权限，但在重定向期间，`SomeMethod`我们需要验证调用者也有`"Foo"`权限。

在不检查调用者是否被正确授权执行调用的情况下仅执行重定向/传输将是一个安全漏洞，特别是在这种情况下它需要不同的权限。

任何帮助深表感谢。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:27:35.817

要在不支付网络往返费用的情况下模拟重定向，您可以创建一个与 Web API 具有相同配置的内存服务器并使用 HTTPClient 实例来调用它。

你做这样的事情来设置内存服务器，

```
var httpConfiguration = new HttpConfiguration();
WebApiConfig.Register(httpConfiguration)
var httpServer = new HttpServer(httpConfiguration); 
```

然后你可以像这样调用它

```
var httpClient = new HttpClient(httpServer);
httpClient.GetAsync("http://mysite.com/mycontroller/redirectUrl"); 
```

最好将这些对象全局存储在某个地方，这样您就不会每次都重新创建它们。HttpClient 是线程安全的，因此无需担心重复使用它。

这种方法可确保您的请求通过与任何真实网络请求完全相同的步骤（ASP.NET 管道除外）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-16T14:36:28.477

So in case you want to pass data between two get actions you can serialize the object you want to pass - add it to routes and thed do a redirect like

```
return RedirectToAction(ActionName,ControllerName, new { a = Seriliaze(someObject)}) 
```

then you will be able to deserialize it on the other action and pass to your custom responce. But there will be limitation of url max length. Or you can try to use a TempData (at least it works nice for Post-Redirect-Get pattern when you need to pass some error etc.)

# android - android中的多色栏聊天

> ID：16037317
> 
> 赞同：4
> 
> 时间：2013-04-16T12:39:28.227
> 
> 标签：android, bar-chart, charts4j

我正在开发一个 android 应用程序。在我的应用程序中，我必须显示一个如下所示的多色条形图。 ![多色条形图](https://i.stack.imgur.com/9cpru.png)

我在网上搜索了很多，但得到了关于图书馆的不同建议。最后我发现唯一的解决方案是[chart4j](https://code.google.com/p/charts4j/)。在此页面中，他们的图表也显示了多种颜色。但是我只得到了 java 代码，但我未能将其作为 android 应用程序。

我从[这里](http://subinsugunan.blogspot.in/2012/01/charts4j-android-example.html)得到了一个使用 charts4j 的 android 示例应用程序。但它给出了例外。

```
FATAL EXCEPTION: main

 java.lang.NoClassDefFoundError: com.googlecode.charts4j.Data 
```

因此，请尝试帮助我找到显示多色图表的解决方案。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:11:14.127

我通过创建一个名为 libs 而不是 lib 的文件夹解决了异常。使用libs的原因是

> Android 当前的构建工具（Eclipse 和命令行）期望 JAR 位于 libs/ 目录中。它会自动将这些 JAR 添加到您的编译时构建路径中。更重要的是，它将 JAR 的内容放入您的 APK 文件中，因此它们将成为您运行时构建路径的一部分。
> 
> 使用 lib/ 并手动处理您的构建路径将解决编译时问题，但是您的 JAR 内容不在您的 APK 中，因此您在运行时将无法使用。

# android - 将 JSch 与 Eclipse 一起使用（Android 项目）

> ID：16037327
> 
> 赞同：0
> 
> 时间：2013-04-16T12:40:07.223
> 
> 标签：android, eclipse, jsch

我在 Eclipse 中将 JSch 与我的 Android 项目一起使用，但我遇到了一个小问题。当我尝试在 JSch 函数的编辑器中获取气球弹出文档（工具提示）时，我得到的只是（例如）：

```
void com.jcraft.jsch.Session.disconnect()
Note: This element neither has attached source nor attached Javadoc 
  and hence no Javadoc could be found. 
```

没有关于命令的文档，它可以抛出什么错误等。

我尝试将 javadocs 添加到项目中，但要么我做错了，要么 javadocs 的格式有问题。

我以前导入过类，我总是看到提示弹出，但 JSch 没有。如何在 JSch 库的编辑器中获取更多文档？

# ubuntu - 在 ubuntu 10.0.4 中安装 adb

> ID：16037328
> 
> 赞同：0
> 
> 时间：2013-04-16T12:40:07.250
> 
> 标签：ubuntu, path, adb

我正在尝试将 adb 配置为与 ubuntu 10.0.4 一起使用。我安装了所有 th sdk，然后将 pmatform-tools 和 tools 的路径放在 PATH 中。但是当我尝试运行时`adb command unkown`。我当时
试过了。 我一直都有未知的命令，但是，当我尝试时，一切都很好。问题是什么以及如何解决。`cd path/sdk/plateform-tools``adb devices`
`./adb devices`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:38:19.530

如果您将 adb 添加到 PATH，它应该可以工作。将其永久添加到 PATH 的一种方法是编辑 $HOME/.bashrc：

```
export PATH=$PATH:path_to_android_sdk/tools:path_to_android_sdk/platform-tools 
```

之后，关闭并打开终端，sdk 应该在 PATH 中。您可以通过在终端中执行此命令来查看使用的 adb：

```
which adb 
```

在此之后，转到该文件并授予它执行权限：

```
chmod a+x adb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T10:39:20.457

添加 PATH 后：

```
export PATH=$PATH:path_to_android_sdk/tools:path_to_android_sdk/platform-tools 
```

尝试使用：

```
source ~/.bashrc 
```

# sql-server - 在 Netbeans 7 中找不到适用于 SQL Server 的驱动程序

> ID：16037331
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:40:12.937
> 
> 标签：sql-server, classpath, netbeans-7

我使用带有驱动程序的 SQL Server 2005，`sqlsgbd4`我想从 NetBeans 7.3 连接到数据库。

我在 .jar 中有驱动程序 jar，`CLASSPATH`运行我的程序后仍然抛出此异常。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:57:23.307

右键单击项目并选择属性。去图书馆我希望这对你有帮助..

# r - 在 R 中对数据进行分组以执行功能

> ID：16037332
> 
> 赞同：1
> 
> 时间：2013-04-16T12:40:19.430
> 
> 标签：r, grouping, moving-average

这是我的数据示例：

```
 id   score
1          82   0.50000
2          82   0.39286
3          82   0.56250
4         328   0.50000
5         328   0.67647
6         328   0.93750
7         328   0.91667 
```

我想为每个 id 制作一列移动平均分数。

所以我需要以某种方式按 id 对数据进行分组，然后将 MA 函数应用于该分组数据，然后将输出作为另一列“MA_score”

我希望我的输出看起来像这样：

```
 id   score    MA_score
1          82   0.50000   NULL
2          82   0.39286   0.xxxx
3          82   0.56250   NULL
4         328   0.50000   NULL
5         328   0.67647   0.yyyy
6         328   0.93750   0.qqqq
7         328   0.91667   NULL 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:11:35.547

您可以使用 zoo 包中的 split 和 rollapply 作为解决此问题的众多方法之一。请注意，在下面的示例中，我将 rollapply 函数的宽度设置为 1，因此它只返回每个值。对于大于 1 的宽度，它将采用该值的平均值。

```
require(zoo)
sapply( split( df , df$id) , function(x) rollapply( x , width = 1 , align = 'left' , mean) )
#Note that by setting width = 1 we just return the value
$`82`
     id   score
[1,] 82 0.50000
[2,] 82 0.39286
[3,] 82 0.56250

$`328`
      id   score
[1,] 328 0.50000
[2,] 328 0.67647
[3,] 328 0.93750
[4,] 328 0.91667 
```

如果我们设置`width = 3`你会得到：

```
$`82`
     id   score
[1,] 82 0.48512

$`328`
      id     score
[1,] 328 0.7046567
[2,] 328 0.8435467 
```

`base`或者你可以在R中使用聚合：

```
aggregate(  score ~ id , data = df , function(x) rollapply( x , width = 1 , align = 'left' , mean)  )
   id                              score
1  82          0.50000, 0.39286, 0.56250
2 328 0.50000, 0.67647, 0.93750, 0.91667 
```

有很多方法可以做到这一点。不过，我会精确定义您的移动平均函数，因为有很多方法可以计算它（例如查看`TTR:::SMA`）

* * *

或者更直接地使用`ave`：

```
within(df, { MA_score <- ave(score, id, FUN=function(x) 
                rollmean(x, k=3, na.pad = TRUE))}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:25:38.957

您可以按唯一 ID 值拆分数据，计算每个唯一 ID 的滚动平均值（来自“zoo”包）并将结果附加到初始数据帧：

```
# Required packages
library(zoo)

# Data setup
df <- data.frame(id = c(82, 82, 82, 328, 328, 328, 328), 
                 score = c(0.5, 0.39286, 0.5625, 0.5, 0.67647, 0.9375, 0.91667))

# Split data by unique IDs
df.sp <- split(df, df$id)

# Calculate rolling mean for each unique ID
df.ma <- lapply(seq(df.sp), function(i) {
  rollmean(df.sp[[i]]$score, k = 3, na.pad = TRUE)
})

# Append column 'MA_score' to dataframe
for (i in seq(names(df.sp))) {
  df[which(df$id == names(df.sp)[i]), "MA_score"] <- df.ma[[i]]
}

df
   id   score  MA_score
1  82 0.50000        NA
2  82 0.39286 0.4851200
3  82 0.56250        NA
4 328 0.50000        NA
5 328 0.67647 0.7046567
6 328 0.93750 0.8435467
7 328 0.91667        NA 
```

# java - 两次获得完全相同的对象引用的机会是多少

> ID：16037336
> 
> 赞同：6
> 
> 时间：2013-04-16T12:40:29.897
> 
> 标签：java

我有时会假设如果`oldObject != newObject`对象发生了变化——在大多数情况下这似乎是一个公平的假设，但它真的是一个糟糕的假设吗？

简而言之，以下代码在什么情况下会打印“Same！”？

```
static WeakReference<Object> oldO = null;
...

Object o = new Object();
oldO = new WeakReference(o);

// Do some stuff with o - could take hours or even days to complete.
...

// Discard o (or let it go out of scope).
o = null;

// More stuff - could be hours or days later.
...
o = new Object();

// Later still.
if ( o == oldO.get() ) {
  System.out.println("Same!");
} 
```

我意识到这确实是远程可能的，因为对象引用本质上是对象的内存地址（或者可能在某些 JVM 中）。但可能性有多大？我们是在谈论它实际发生之前的几十年运行时间吗？

**添加**

我很抱歉 - 请假设这`oldO`是某种形式的`weak`参考，不会阻止它被收集。也许`Weak`就像代码（现在）所建议的那样，或者参考存储在数据库或某处的文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:47:04.633

永远不会是一样的。oldO 将始终引用初始对象，因此它永远不会被丢弃，并且新对象不能具有相同的地址。

更新：似乎答案已更新以指定这`oldO`是一个弱参考。在这种情况下，当对象消失时，`oldO`的引用将变为空。这意味着它永远不会匹配 JVM 中的另一个对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T13:09:55.493

（我正在回答我认为您真正想知道的内容，而不是您拥有的特定片段）

它依赖于实现。对象引用的约定是，只要对象还活着，就没有其他对象将 == 与它进行比较。这意味着在对象被垃圾回收之后，VM 可以自由地重用相同的对象引用。

Java 的实现可能会选择使用递增整数作为对象引用，在这种情况下，只有当引用计数器溢出回 0 时才能获得相同的对象引用。其他实现可能会使用内存位置，这使得相同引用的可能性更大被重复使用。无论如何，如果这很重要，您应该定义自己的对象身份。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T12:46:14.933

他们不可能平等。您仍然拥有对旧对象 ( `oldO`) 的引用，因此它永远不会被丢弃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T12:46:35.420

`o == oldO`意味着`o`与 相同的内存地址`oldO`。`o = oldO`因此，除非在某个时候，您正在执行or ，否则这不会发生`oldO = o`。当然，通过传递性，做`foo = o; oldO = foo`或任何等效的事情都会达到相同的结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T12:53:35.840

首先，内存地址无关紧要。Java 不是 C。对象标识是 JVM 实现——它可能依赖或不依赖内存地址，但更可能不依赖，因为 JVM 可以在内存中自由移动对象，但必须保持其标识。

但不管。因为您持有对原始对象的引用，所以第二个不能是“相同”对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T12:47:55.503

它永远不会发生。

您的第一个对象 ( `oldO`) 存储在特定的内存位置。

只要引用了 oldO，您的第二个对象就会在另一个内存位置被系统地引​​用。

所以`oldO == o`将比较两个内存地址，这总是不同的。

如果您取消引用 oldO，它将被垃圾收集，您最终将能够在同一地址创建一个新对象。但是您将无法将它与 oldO 进行比较，因为它已被取消引用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T12:54:43.727

通过引用您的旧对象，您可以防止它被垃圾收集，因此您可以防止该位内存可用于新对象，因此它们永远不会相等。

我想知道你是否使用了 SoftReference，你可以保留对旧对象的引用，同时允许它被垃圾收集但是：

1）我*假设*一旦收集到旧对象，SoftReference 设置为 null 并且

2）这是人为地试图强迫这种情况，所以并不能真正证明任何事情:-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T13:50:39.723

[根据文档](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)，当对象被垃圾回收时，弱引用将被清除。它没有指定“清除”是什么意思，但推测它设置为null。如果它实际上设置为 null，则无论其内存位置如何，都不会将 null 声明为 == 任何对象引用。

# javascript - Google Maps API 将变量传递给 InfoWindow

> ID：16037337
> 
> 赞同：1
> 
> 时间：2013-04-16T12:40:32.143
> 
> 标签：javascript, google-maps, google-maps-api-3

我有以下代码循环遍历一组标记；

地点数组：

```
var map_markers = [['Windsor Road, Salisbury, SP2 7NF <br/> 2nd Line', 'Windsor Road, Salisbury,', 1],['Bishopdown Road, Salisbury, SP1 3DT <br/> 2nd Line', 'Bishopdown Road, Salisbury,', 2],['Gainsborough Close, Salisbury, SP2 9HD <br/> 2nd Line', 'Gainsborough Close, Salisbury,', 3],['Montgomery Gardens, Salisbury, SP2 7UQ <br/> 2nd Line', 'Montgomery Gardens, Salisbury,', 4],['Manor Court, Salisbury, SP1 1LN <br/> 2nd Line', 'Manor Court, Salisbury,', 5],]; 
```

显然，以上所有内容都需要地理编码，以便我可以在地图上为每个人放置一个图钉，为此我构建了以下函数：

```
function init_map(map_id, center_address, markers) {

    geocoder = new google.maps.Geocoder();

    geocoder.geocode( { 'address': center_address, 'region': 'uk' }, function(results, status) {

        if (status == google.maps.GeocoderStatus.OK) { 

         //Init Map Options
         var mapOptions = {
            zoom: 11,
            center: results[0].geometry.location,
            mapTypeId: google.maps.MapTypeId.ROADMAP
         }

         var map = new google.maps.Map(document.getElementById(map_id), mapOptions);

         var infowindow = new google.maps.InfoWindow();

         var marker, i;

         for (i = 0; i < markers.length; i++) {  

            var marker_address = markers[i][1];
            var marker_content = markers[i][0];

            geocoder.geocode( { 'address': marker_address , 'region': 'uk' }, function(results, status) { 

             if (status == google.maps.GeocoderStatus.OK) { 
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function(marker, i) {

                    return function() {
                        infowindow.setContent(marker_content);
                        infowindow.open(map, marker);
                    }

                    }) (marker, i)); 

                } else {
                    alert("There was a issue getting the property information.")
                }
            });
         }

      } else {

        alert("Unable to find address: " + status);

      }

  });
} 
```

使用上面的代码，标记被正确放置在地图上，当我单击标记时，infoWindow 确实出现了，但是，它似乎卡在循环中，并且只在所有标记上显示最终的数组元素内容。任何人都可以推荐一个修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:47:00.690

问题是你`marker_content`在你的循环中创建，但你的事件监听器函数只会知道它的最终值。这是我如何写这个的一个刺：

```
...
for (i = 0; i < markers.length; i++) {  
    var marker_address = markers[i][1];
    var marker_content;

    geocoder.geocode( { 'address': marker_address , 'region': 'uk' }, function(results, status) { 
        if (status == google.maps.GeocoderStatus.OK) { 
            marker = new google.maps.Marker({
                position: new google.maps.LatLng(results[0].geometry.location.lat(), results[0].geometry.location.lng()),
                map: map
            });

            marker_content = markers[i][0];

            bindInfoWindow(marker, map, infowindow, marker_content);
        } else {
            alert("There was a issue getting the property information.")
        }
    });
}
...

// new global function, NOT nested in init_map
function bindInfoWindow(marker, map, infowindow, content) {
    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(content);
        infowindow.open(map, marker);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:01:07.140

这是我用来整理所有这些的示例代码。它具有更高级的信息框设置，因此您可能对此不感兴趣。但请注意我的 var 标记和微调器。这仅适用于代码的标记段...

```
var data = { "count": 10785236,
 "locationstuff": [{"photo_id": 27932, "photo_title": "Atardecer en Embalse", "photo_url": "http://www.panoramio.com/photo/27932", "photo_file_url": "http://mw2.google.com/mw-panoramio/photos/medium/27932.jpg", "longitude": -64.404945, "latitude": -32.202924, "width": 500, "height": 375, "upload_date": "25 June 2006", "owner_id": 4483, "owner_name": "Miguel Coranti", "owner_url": "http://www.panoramio.com/user/4483"}
,
{"photo_id": 522084, "photo_title": "In Memoriam Antoine de Saint Exupéry", "photo_url": "http://www.panoramio.com/photo/522084", "photo_file_url": "http://mw2.google.com/mw-panoramio/photos/medium/522084.jpg", "longitude": 17.470493, "latitude": 47.867077, "width": 500, "height": 350, "upload_date": "21 January 2007", "owner_id": 109117, "owner_name": "Busa Péter", "owner_url": "http://www.panoramio.com/user/109117"}
,
{"photo_id": 1578881, "photo_title": "Rosina Lamberti,Sunset,Templestowe , Victoria, Australia", "photo_url": "http://www.panoramio.com/photo/1578881", "photo_file_url": "http://mw2.google.com/mw-panoramio/photos/medium/1578881.jpg", "longitude": 145.141754, "latitude": -37.766372, "width": 500, "height": 474, "upload_date": "01 April 2007", "owner_id": 140796, "owner_name": "rosina lamberti", "owner_url": "http://www.panoramio.com/user/140796"}
,
{"photo_id": 97671, "photo_title": "kin-dza-dza", "photo_url": "http://www.panoramio.com/photo/97671", "photo_file_url": "http://mw2.google.com/mw-panoramio/photos/medium/97671.jpg", "longitude": 30.785408, "latitude": 46.639301, "width": 500, "height": 375, "upload_date": "09 December 2006", "owner_id": 13058, "owner_name": "Kyryl", "owner_url": "http://www.panoramio.com/user/13058"}
,
{"photo_id": 25514, "photo_title": "Arenal", "photo_url": "http://www.panoramio.com/photo/25514", "photo_file_url": "http://mw2.google.com/mw-panoramio/photos/medium/25514.jpg", "longitude": -84.693432, "latitude": 10.479372, "width": 500, "height": 375, "upload_date": "17 June 2006", "owner_id": 4112, "owner_name": "Roberto Garcia", "owner_url": "http://www.panoramio.com/user/4112"}
,
{"photo_id": 57823, "photo_title": "Maria Alm", "photo_url": "http://www.panoramio.com/photo/57823", "photo_file_url": "http://mw2.google.com/mw-panoramio/photos/medium/57823.jpg", "longitude": 12.900009, "latitude": 47.409968, "width": 500, "height": 333, "upload_date": "05 October 2006", "owner_id": 8060, "owner_name": "Norbert MAIER", "owner_url": "http://www.panoramio.com/user/8060"}
]}

var markers = [];
    for (var i = 0; i < data.count; i++) {
    spinnerUp(i);
    }

        function spinnerUp() {

            var data_mapper = data.locationstuff[i];

            var latLng = new google.maps.LatLng(data_mapper.latitude,data_mapper.longitude);

            var boxText = "<div class='mapLocationBox'>";
                boxText += "<h2>" + data_mapper.title + "</h2>" + "<p>" + data_mapper.address + "<br>" + data_mapper.city + ", " + data_mapper.zip + "</p>";
                boxText += "</div>";

            switch (data_mapper.iconSpecial)
                {
                case 0:
                  var iconColorSpecial = "http://www.google.com/intl/en_us/mapfiles/ms/micons/red-dot.png";
                  break;
                case 1:
                  var iconColorSpecial = "http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png";
                  break;
                }

            var marker = new google.maps.Marker({position: latLng,icon:iconColorSpecial});

            var infowindow = new google.maps.InfoWindow({
                                                    content: boxText
                                                    ,disableAutoPan: false
                                                    ,maxWidth: 0
                                                    ,pixelOffset: new google.maps.Size(0, 0)            
                                                    ,zIndex: null
                                                    ,closeBoxMargin: "10px 2px 2px 2px"
                                                    ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
                                                    ,infoBoxClearance: new google.maps.Size(1, 1)
                                                    ,isHidden: false
                                                    ,pane: "floatPane"
                                                    ,enableEventPropagation: false});

        google.maps.event.addListener(marker, 'click', function() {infowindow.open(map, this);});
        markers.push(marker);       
        } 
```

我有一个提供地址的文件。它可以是动态的或静态的。

在我通过我的循环旋转位置之前，我还弄清楚了地理定位的东西。

这种方法可以帮助你重构你的方法。

希望它有所帮助，祝你好运！

# java - AppConKit3：我对 Java 服务器文件的更改被覆盖

> ID：16037341
> 
> 赞同：1
> 
> 时间：2013-04-16T12:40:44.697
> 
> 标签：java, appconkit

我正在玩 AppConKit，到目前为止，我已经创建了一个带有几个屏幕的小应用程序。现在我正在尝试更改自动生成的 Java 代码。但是，每次我在 UI 中更改某些内容时，我在自动操作类（例如 LoadDetailAction.java）中所做的任何更改都会被覆盖。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:43:09.080

在每个生成的类的顶部，都有一个 JavaDoc 注释，如下所示：

```
/**
 * @generated
 */
public class LoadDataAction { 
```

只需从 JavaDoc 注释中删除 @generated，该类将不再被覆盖。

# javascript - 我想在单击按钮时激活选项卡菜单项

> ID：16037347
> 
> 赞同：0
> 
> 时间：2013-04-16T12:41:01.267
> 
> 标签：javascript, html

嗨，我有一个选项卡菜单，当我单击选项卡 1 中的按钮时，我想激活选项卡 2。

这是我的javascript：

```
<link rel="stylesheet" type="text/css" href="http://oliveshades.com/dashboard_menu.css">
<script type='text/javascript' src="http://oliveshades.com/jquery.idTabs.min.js"></script>

<script type='text/javascript'>
function toggle_visibility(id) {
    var thelist = document.getElementsByClassName("alist");
    for (var i = 0; i < thelist.length; i++) {
        thelist[i].style.display = 'none';
    }
    var e = document.getElementById(id);
    if (e.style.display == 'block') {
        e.style.display = 'none';
    } else {
        e.style.display = 'block';
    }
}</script> 
```

这是我的 HTML：

```
<div class="dashTab">
<ul class="idTabs">
  <li><a href="#tab1">Statistics</a></li>
  <li><a href="#tab2">Traffic</a></li>
</ul></div>

<div id="tab1"><input name="" type="button" value="redirect me to tab 2" /></div>
<div id="tab2">This is Tab2</div> 
```

[http://jsfiddle.net/UCjYS/](http://jsfiddle.net/UCjYS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T05:18:06.663

idTabs 似乎没有激活选项卡的方法，但您可以手动触发它。

```
$('#tab1 input').click(function(){
  $('li:contains("Traffic")').click();
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:38:16.533

尝试这个：

```
function changeTab(arg){
    switch(typeof arg){
        case "number":
            $('.idTabs > li:eq(' + arg + ') > a').click();
            break;
        case "string":
            $('.idTabs > li:contains(' + arg + ') > a').click();
            break;
    }
} 
```

[http://jsfiddle.net/DerekL/UCjYS/1/](http://jsfiddle.net/DerekL/UCjYS/1/)

# java - 错过 Facebook 权限：read_stream

> ID：16037348
> 
> 赞同：1
> 
> 时间：2013-04-16T12:41:01.333
> 
> 标签：java, facebook

我在 facebook 上的 read_stream 权限有一些问题。显然，我系统中大约 10% 的用户注册了他们的 Facebook 帐户，但没有 read_stream 权限。我总是将该权限添加到 oauth 请求中。

还有其他人有这个问题吗？仅针对某些请求发生，并且我无法通过添加我的帐户来重现它。

会不会是 facebook 帐户中的一些特定配置？

我正在使用这个库 restfb 1.6.9

# c# - 更新“邮件发送成功”后隐藏的面板可见性

> ID：16037349
> 
> 赞同：0
> 
> 时间：2013-04-16T12:41:08.420
> 
> 标签：c#, asp.net, ajax, gmail

我有一个包含两个更新面板的页面 - updatepanelform（可见），updatepanelthanks（隐藏）。我已经使用此方法在 asp 页面上的按钮单击事件上发送邮件。

```
protected void BtnRfqClick(object sender, EventArgs e)
{
    // Gmail Address from where you send the mail
    var fromAddress = TbEmailRfq.Text.ToString();
    // any address where the email will be sending
    var toAddress = "user@gmail.com";
    //Password of your gmail address
    var name = TbNameRfq.Text.ToString();
    const string fromPassword = "password";
    // Passing the values and make a email formate to display
    string subject = "Welcome To world";
    string body = "Name :" + TbNameRfq.Text.ToString() + Environment.NewLine +
                  "Email Id :" + TbEmailRfq.Text.ToString()
        + Environment.NewLine + TaComment.InnerText.ToString();
    // smtp settings
    var smtp = new System.Net.Mail.SmtpClient();
    {
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;
        smtp.EnableSsl = true;
        smtp.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
        smtp.Credentials = new NetworkCredential("user email", "password");
        smtp.Timeout = 20000;
    }
    // Passing values to smtp object
    smtp.Send(fromAddress, toAddress, subject, body);
} 
```

一切正常，但在成功发送电子邮件后，我无法将 updatepanelform 的可见性设置为隐藏，并将 updatepanelthanks 设置为可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:49:12.337

发送电子邮件后放置以下内容：

```
updatepanelform.Visible = false;
updatepanelthanks.Visible = true; 
```

# command-line - Dymo LabelManager PnP Postscript 文件 paperSize

> ID：16037354
> 
> 赞同：0
> 
> 时间：2013-04-16T12:41:24.533
> 
> 标签：command-line, ghostscript, postscript

在这里，我再次提出 PostScript 问题。

这次我试图打印这个简单的文件：

```
%!PS-Adobe-3.0
%%DocumentData: Clean7Bit
%%Requirements: color
%%LanguageLevel: 2
% 72 PostScript points = 1 inch
% 1 inch = 2.54 cm
%%PageBoundingBox: 8 8 300 36
<< /PageSize [300 36] >> setpagedevice

<< /Orientation 3>> setpagedevice

/ArialBold findfont 10 scalefont setfont
30 18 moveto (Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet Lorem ipsum dolor sit amet) show
showpage 
```

如您所见，它只有一行，我要打印的标签也非常小，它是 12 毫米宽，只要您需要（通常）。

我正在将文本正确打印到标签上，但只能打印到第二个“amet”。在那之后，打印机停下来并说他已经完成了，并且他总是打印完全相同的长度（9cm），而不管我设置的页面尺寸是多少。

任何人都知道我做错了什么？

我用来打印的命令是：

```
C:\gs\gswin32c.exe -sDEVICE=mswinpr2 -dNoCancel -dNOPAUSE -dSAFER -sOutputFile="%%printer%%DYMO LabelManager PnP" -q "C:\gs\dymo.ps" -c quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:18:47.120

I would always start by using the display device. If you remove the -sDEVICE=mswinpr2 Ghostscript will open a window and show you what it thinks the result will be, if that is incorrect then the mswinpr2 isn't going to be better. Try that and see what happens, this will also show you if you are falling off the media as the GS window is only white where the media is set.

# php - 在php中获取两个日期之间的周数

> ID：16037355
> 
> 赞同：2
> 
> 时间：2013-04-16T12:41:27.257
> 
> 标签：php

我想获取给定两个日期的周数，即从 2012 年 1 月 1 日到 2012 年 12 月 31 日。周数应该正好在上面指定的范围内。你能给出建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:44:19.877

这样的事情应该可以正常工作：

```
<?php
    $startDateUnix = strtotime('2012-01-01');
    $endDateUnix = strtotime('2013-01-01');

    $currentDateUnix = $startDateUnix;

    $weekNumbers = array();
    while ($currentDateUnix < $endDateUnix) {
        $weekNumbers[] = date('W', $currentDateUnix);
        $currentDateUnix = strtotime('+1 week', $currentDateUnix);
    }

    print_r($weekNumbers);
?> 
```

[**演示**](http://codepad.org/td2r8v07)。

**输出**：

```
Array
(
    [0] => 52
    [1] => 01
    [2] => 02
    .........
    [51] => 51
    [52] => 52
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:48:35.707

我认为您想要使用 DateTime 进行类似的操作：

```
$first_date = new DateTime();
$last_date  = new DateTime('-50 weeks');
$days_array = array();
foreach(new DatePeriod($first_date, new DateInterval('P1D'), $last_date) as $date) {
  $days_array[] = $date->format('W');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T12:47:39.703

像这样的东西应该可以完成这项工作：

```
$start = '2012-01-01';
$end = '2012-12-31';

$dates = range(strtotime($start), strtotime($end),604800);
$weeks = array_map(function($v){return date('W', $v);}, $dates); // Requires PHP 5.3+

print_r($weeks); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:44:57.273

做这样的事情：

[已移除]

编辑

```
<?php

for($w = strtotime($start_date); $w <= strtotime($end_date); $w += 7 * 24 * 3600)
{
echo date("W", $w) . '<br />';
}

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-28T09:38:38.910

您可以使用下面的 week_between_dates() 函数获取两个日期之间的周数。

```
function weeks_between_dates($d1,$d2)
{
    $t1 = strtotime($d1);
    $t2 = strtotime($d2);
    $out = array();
    while ($now <= $t2) {
        $out[] = date('W', $t1);
        $t1 = strtotime('+1 week', $t1);
    }
    return $out;
}

print_r( weeks_between_dates('2015-01-01','2015-12-31') ); // 01..53
print_r( weeks_between_dates('2016-01-01','2016-12-31') ); // 01..52 
```

# php - YII 图像缓存

> ID：16037356
> 
> 赞同：0
> 
> 时间：2013-04-16T12:41:34.520
> 
> 标签：php, yii, yii-extensions

我在 yii 框架中显示时使用 IWI 扩展来缓存图像。它工作正常，但问题是当我更新图像时，过去的缓存文件和文件夹存在。请帮我在更新图像后删除那些过去的缓存文件夹。

**编辑：**

```
$img = $image_name[0]['image_name']; 
$p = 'images/'.$img;
$newpath = Yii::app()->iwi->load($p)->resize(100,300,Image::AUTO)->cache();
$newpath = explode('=',$newpath); ?> 
Image : <br/><br/> 
<?php echo CHtml::image($newpath[1],"image"); ?> 
<div class="row">
<?php echo $form->labelEx($model, 'image'); ?>
<?php echo $form->fileField($model, 'image'); ?>
<?php echo $form->error($model, 'image'); ?>
</div> 
```

当我更新特定图片时。假设我正在更新表中 id 为 1 的图像。新图片正在使用新的缓存文件夹进行更新，并且存在以前的缓存文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:54:27.890

好的，我查看了 IwI 扩展，我想我明白你在问什么。

不幸的是，您无法开箱即用地实现这一目标。Iwi 使用带有最后修改日期的缓存 id。这意味着更改图像会创建一个新的缓存文件/文件夹，而不是根据依赖规则进行替换。

我认为最好的选择是扩展`Iwi`然后覆盖该`cache()`方法（最好使用 Yii 的缓存）

这是一个未经测试的示例：

**扩展`Iwi`类**：这是非常基本的，可能无法涵盖您的所有情况（即：用另一个不同的文件覆盖一个文件。其中一些是多余的，但我这样做很清楚）

```
class MyIwi extends Iwi
{
    public function cache()
    {
        if (!isset($this->image["file"])) {
            return false;
        } 
        $cacheFolder = YiiBase::getPathOfAlias('webroot.images.site.cache');   
        $imagePath = $this->image["file"];
        $info = pathinfo($imagePath);

        //create unique ID (filename for cached image) using actions and path. then serialize and hash it.
        $needle = $this->actions;
        array_unshift($needle, $imagePath);
        $cachedFilePath = $cacheFolder."/".md5(json_encode($needle)).".".$info["extension"];

        //if cache file doesn't exist or is older than file then cache 
        if(  
           $this->createOrNone() //did not look into this, keeping because it was in original method
           &&
           (!file_exists($cachedFilePath)
           || 
           filetime($imagePath) > filetime($cachedFilePath))
        )
            $this->save($cachedFilePath);
        return Yii::app()->createUrl($cachedFilePath);
    }

} 
```

希望这将使您走上正确的道路。祝你好运

# sql - 如何检查设备上的数据库？

> ID：16037357
> 
> 赞同：0
> 
> 时间：2013-04-16T12:41:44.200
> 
> 标签：sql, database, appconkit

所以我在构建我的应用程序和构建复杂的 sql 查询方面更进一步。在这里使用试用'n'error 变得很麻烦。有没有更好的办法？我主要在iOS上开发...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:49:37.967

您标记了您的问题 AppConKit，所以我假设您需要帮助。当您使用 AppConKit 开发 iOS 应用程序时，会在设备上自动创建一个 SQLite 数据库。

您可以轻松地从您的设备复制当前的 SQLite 数据库。为确保您的最新数据更改存储到数据库文件中，请关闭您的应用程序。将您的设备连接到您的 Mac/PC 并打开 iTunes。在 iTunes 中，转到您的设备并单击“应用程序”选项卡。在文件共享部分选择 AppConClient。这是一个名为 ibizclient.sqlite 的文件，您可以使用上面的保存按钮进行保存。使用免费的 SQLite 查看器，您可以打开数据库并检查您想知道的内容。

Windows SQLite 查看器：SQLiteSpy

Mac SQLite 查看器：SQLiteManager

# xcode - 可以让 xcodebuild test 显示测试的编译

> ID：16037358
> 
> 赞同：0
> 
> 时间：2013-04-16T12:41:44.240
> 
> 标签：xcode, xcodebuild

`xcodebuild -workspace aWorkspace -scheme aScheme test`两者都编译并运行与方案相关的测试，但它不显示测试套件的编译。如果测试源文件中存在编译错误，我只会得到`** TEST FAILED **`在尝试在 Vim 中开发时肯定不是很有帮助的错误。

有没有办法让 xcodebuild 输出测试源文件的编译，就像`xcodebuild build`显示常规源文件的编译一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T22:14:40.183

我遇到了完全相同的问题，只需确保您从 xcodebuild 参数中删除 TEST_AFTER_BUILD=YES （看起来您这里没有那个）。

并简单地将 2>&1 附加到命令的末尾。出于某种原因，xcodebuild 将测试输出写入标准错误而不是标准输出？

IE。做：

xcodebuild -workspace aWorkspace -scheme aScheme 测试 2>&1

# c# - C# BinaryWriter 长度前缀 - UTF7 编码

> ID：16037365
> 
> 赞同：6
> 
> 时间：2013-04-16T12:42:09.303
> 
> 标签：c#

我有一个项目使用内存映射文件让两个应用程序相互共享数据。生产者应用程序是用 C# 编写的，消费者应用程序使用普通的旧 C。两者都使用 VS2010。

MSDN 说“BinaryWriter.Write Method(String)”在数据前面加上一个 UTF-7 编码的无符号整数，然后写入有效负载。这正是我卡住的地方。如果我写一个长度为 256 个字符的字符串，C 应用程序的调试器会显示这个字节序列：0x80 0x2 <256 倍有效负载字符>。将长度前缀转换为我可以在消费者应用程序中安全使用的东西的最佳方法是什么？

生产者应用程序：

```
using System;
using System.IO;
using System.IO.MemoryMappedFiles;
using System.Threading;
using System.Text;
using System.Linq;

class Program
{
    static void Main(string[] args)
    {
        using (MemoryMappedFile mmf_read = MemoryMappedFile.CreateNew("mappedview", 4096))
        {
            using (MemoryMappedViewStream stream = mmf_read.CreateViewStream())
            {
                string str;
                BinaryWriter writer = new BinaryWriter(stream);

                str = string.Join("", Enumerable.Repeat("x", 256));

                writer.Write(str);
            }
        }
    }
} 
```

消费者应用：

```
#include <windows.h>
#include <stdio.h>
#include <conio.h>
#include <tchar.h>
#pragma comment(lib, "user32.lib")

#define BUF_SIZE 4096
TCHAR szName[]=TEXT("Global\\mappedview");

int _tmain()
{
    HANDLE hMapFile;
    LPCSTR pBuf;

    hMapFile = OpenFileMapping(
               FILE_MAP_ALL_ACCESS,         // read/write access
               FALSE,                       // do not inherit the name
               szName);                     // name of mapping object

    if (hMapFile == NULL)
    {
        _tprintf(TEXT("Could not open file mapping object (%d).\n"),
         GetLastError());
        return 1;
    }

    pBuf = (LPCSTR) MapViewOfFile(hMapFile,     // handle to map object
           FILE_MAP_ALL_ACCESS,             // read/write permission
           0,
           0,
           BUF_SIZE);

    if (pBuf == NULL)
    {
        _tprintf(TEXT("Could not map view of file (%d).\n"),
                GetLastError());

        CloseHandle(hMapFile);
        return 1;
    }

    printf("Proc1: %s\n\n", pBuf);              // print mapped data

    UnmapViewOfFile(pBuf);

    CloseHandle(hMapFile);

    return 0;
} 
```

兄弟，克里斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T12:54:58.033

尽管微软文档说了什么，

1.  写入的前缀数字实际上是一个[LEB128 编码的 count](http://en.wikipedia.org/wiki/LEB128)。
2.  这是字节数，*而不是*字符数。

我链接的 Wiki 页面为您提供了解码代码，但我会考虑使用我自己的方案。您可以使用手动将字符串转换为 UTF8[`Encoding.GetBytes()`](http://msdn.microsoft.com/en-us/library/system.text.encoding.getbytes.aspx)并将其写入 MMF，并在其前面加上一个普通的无符号短字符。这样你就可以完全控制一切。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-16T12:58:10.917

虽然[BinaryWriter.Write 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/yzxa6408.aspx)声明它“首先将字符串的长度写入为 UTF-7 编码的无符号整数”，但这是错误的。首先，UTF-7 是一种*字符串编码*，不能使用 UTF-7对*整数进行编码。*文档的*含义*（和代码*所做*的）是它使用可变长度 7 位编码（有时称为[LEB128](https://en.wikipedia.org/wiki/LEB128) ）写入长度。在您的特定情况下，数据字节`80 02`的含义如下：

> `1000 0000 0000 0010`
> 
> `Nbbb bbbb Eaaa aaaa`

*   `N`设置为 1 表示这不是最后一个字节
*   `E`设置为零表示这是最后一个字节
*   `aaaaaaa`并且`bbbbbbb`是真实数据；结果是：

> `00000100000000`
> 
> `aaaaaaabbbbbbb`

即`100000000`二进制，即十进制的 256。

# java - 如何实例化 Java 参数类型

> ID：16037366
> 
> 赞同：1
> 
> 时间：2013-04-16T12:42:09.830
> 
> 标签：java

我有以下抽象类：

```
public abstract class AbstractRepository<O, PK extends Serializable>{

protected EventDispatcher eventDispatcher;

protected GenericDao<O,PK> dao;

protected ApplicationPublisher publisher;

protected State state;

protected InternalPublisher internalPublisher;

@PostConstruct
private void initialise(){
    eventDispatcher.addHandler(this);
}

protected <T extends GenericDao<O,PK>> AbstractRepository(T dao, State state, ApplicationPublisher publisher, InternalPublisher internalPublisher, EventDispatcher eventDispatcher){
    this.dao = dao;
    this.state = state;
    this.publisher = publisher;
    this.internalPublisher = internalPublisher;
    this.eventDispatcher = eventDispatcher;
}

@HandleEvent
private void handleDataContributorCreatedEvent(DataContributorDeletedEvent event){

    List<O> stats = new ArrayList<O>();

    for(int x = -1 ; x < 50 ; x++){

        for (int y = 0 ; y < 360 ; y = y + 5){
            stats.add(**Need to instantiate paramater type O here**);
        }   

    }
    dao.save(stats);
} 
```

}

在事件处理程序方法中 - 我希望能够创建参数类型 O 的实例 - 但不确定如何做到这一点。任何有关最佳方法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:55:22.863

您应该创建一个接受参数的构造函数

```
Class<O> class 
```

对象存储它，当你需要它时使用

```
class.getConstructor() and constructor.newInstance 
```

反射 API 的方法。那是因为泛型类型只存在于编译时，在字节码中所有的东西都只是普通的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:45:03.747

[由于Java](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)中的类型擦除，您不能这样做。`O`基本上，在运行时无法知道参数的类。

正如@pescis 所建议的，[这里](https://stackoverflow.com/questions/1090458/instantiating-a-generic-class-in-java)描述了克服这个问题的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:02:56.823

您可以尝试使用您拥有的 List 实例，如下所示：

```
Class<?> clazz = (Class<?>) stats.getGenericInterface()[0]; 
```

那么你可以`clazz.newInstance()`。

免责声明：未经测试，但我很确定我在某处读过它有效。

# perl - Perl 中的 XML 文件创建 - 更新的要求

> ID：16037367
> 
> 赞同：0
> 
> 时间：2013-04-16T12:42:13.303
> 
> 标签：perl, xml-parsing

抱歉，我再次发布此内容，但很多要求已更改，我需要建议。
我的第一个输入文件是

```
Root1      TBLA      KEY1      COLA      A    B    
Root1      TBLA      KEY1      COLB      D    E    
Root1      TBLA      KEY3      COLX      M    N     
Root2      TBLB      KEY4      COLX      M    N     
Root2      TBLB      KEY4      COLD      A    B   
Root3      TBLC      KEY5      COLD      A    B 
```

我的第二个输入文件是

```
Root1      TBLA      KEY6    
Root2      TBLB      KEY7    
Root3      TBLC      KEY8 
```

我的第三个输入文件是

```
Root1      TBLA      KEY9    
Root1      TBLA      KEY10    
Root3      TBLC      KEY11 
```

基本上文件表示是
1) 第一个文件表示旧值和新值。首先是根表，其次是存在差异的实际表。第三列告诉键值。第四和第五代表新旧价值。

2）第二个文件代表只存在于db1中而不存在于db2中的主键。首先是根表，其次是存在键的实际表。第三列告诉键值

3) 第三个文件代表主键，它只存在于 db2 中，不存在于 db1 中。首先是根表，其次是存在键的实际表。第三列告诉键值

以 xml 格式创建的输出为

```
 <Data>    
    <Root1>
        <TBLA>    
            <NEW1>
                <KEY>KEY6</KEY>
            <NEW1>              
            <NEW2>
                <KEY>KEY9</KEY>
                <KEY>KEY10</KEY>
            <NEW2>              
            <MODIFIED>
                <KEY name =KEY1>
                    <COLA>
                        <oldvalue>A</oldvalue>
                        <newvalue>B</newvalue>    
                    </COLA> 
                    <COLB>    
                        <oldvalue>D</oldvalue>    
                        <newvalue>E</newvalue>     
                    </COLB>
                </KEY>
                <KEY name =KEY3>
                    <COLX>
                        <oldvalue>M</oldvalue>
                        <newvalue>N</newvalue>    
                    </COLX> 
                </KEY>
            </MODIFIED>     
        </TBLA>
    </Root1>        
    <Data> 
```

这不是完整的输出。显示部分输出 任何人都可以建议最好的方法是什么。我应该先将此文本文件转换为哈希值，然后再尝试使用`pltoxml()`. 这有意义吗？可以`XML::Simple`或`XML::Writer`足够了。

这是我第一次使用 xml 并且不确定哪种方法可以有效地帮助我的解决方案。
我的请求的一个小例子将不胜感激。

*输入文件将始终按 Root 排序，然后按 TBLNAME

输出格式
输出包含每个根、该根中的每个表以及每个表的输出，其中一个存在于一个中的键，然后仅存在于第二个中的键。这分别出现在 new1 和 new2 部分。第三部分包含 Modified 需要从第一个输入文件中读取并列出键值以及使用该键值修改哪些列（它们的旧值和新值）

如果我必须使用 XML::Simple，我如何从这些文件创建 hashref，我可以将其传递给 XMLout。这些文件中没有任何密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:49:43.443

这只是一个简单的问题，`split`将数据拆分为字段，将其存储到哈希中，然后使用[**`XML::Simple`**](http://search.cpan.org/perldoc?XML%3a%3aSimple).

*   请注意，我将事物放入数组中以强制执行您想要的顺序。
*   `DATA`从句柄中读取所有数据。你不应该需要我给你看 IO 代码。
*   该`@processors`数组只是您将在各种文件上使用的不同处理器：

代码：

```
use 5.016;
use strict;
use warnings;

use XML::Simple qw(:strict);

my %roots;

my @processors 
    = ( sub {
           my ( $root, $table, $key, $col, $old, $new ) = split /\s+/;
           $roots{ $root }{ $table }[2]{MODIFIED}{ $col }
                = { oldvalue => $old 
                  , newvalue => $new 
                  };
           return;
        }
      , sub { 
          my ( $root, $table, $key ) = split /\s+/;
          push @{ $roots{ $root }{ $table }[0]{NEW1}{KEY} }, $key;
        }
      , sub { 
          my ( $root, $table, $key ) = split /\s+/;
          push @{ $roots{ $root }{ $table }[1]{NEW2}{KEY} }, $key;
        }
      );

my $processor = shift @processors;
while ( <> ) { 
    chomp;
    if ( $_ eq '---' ) { 
        $processor = shift @processors;
    }
    else {
        $processor->( $_ );
    }
}

my $xs = XML::Simple->new( NoAttr => 1, RootName => 'Data', );
my $xml = $xs->XMLout( \%roots, KeyAttr => {} );
say $xml; 
```

它产生：

```
<Data>
  <Root1>
    <TBLA>
      <NEW1>
        <KEY>KEY6</KEY>
      </NEW1>
    </TBLA>
    <TBLA>
      <NEW2>
        <KEY>KEY9</KEY>
        <KEY>KEY10</KEY>
      </NEW2>
    </TBLA>
    <TBLA>
      <MODIFIED>
        <COLA>
          <newvalue>B</newvalue>
          <oldvalue>A</oldvalue>
        </COLA>
        <COLB>
          <newvalue>E</newvalue>
          <oldvalue>D</oldvalue>
        </COLB>
        <COLX>
          <newvalue>N</newvalue>
          <oldvalue>M</oldvalue>
        </COLX>
      </MODIFIED>
    </TBLA>
  </Root1>
  <Root2>
    <TBLB>
      <NEW1>
        <KEY>KEY7</KEY>
      </NEW1>
    </TBLB>
    <TBLB></TBLB>
    <TBLB>
      <MODIFIED>
        <COLD>
          <newvalue>B</newvalue>
          <oldvalue>A</oldvalue>
        </COLD>
        <COLX>
          <newvalue>N</newvalue>
          <oldvalue>M</oldvalue>
        </COLX>
      </MODIFIED>
    </TBLB>
  </Root2>
  <Root3>
    <TBLC>
      <NEW1>
        <KEY>KEY8</KEY>
      </NEW1>
    </TBLC>
    <TBLC>
      <NEW2>
        <KEY>KEY11</KEY>
      </NEW2>
    </TBLC>
    <TBLC>
      <MODIFIED>
        <COLD>
          <newvalue>B</newvalue>
          <oldvalue>A</oldvalue>
        </COLD>
      </MODIFIED>
    </TBLC>
  </Root3>
</Data> 
```

# vb.net - vb.net 如何为每个平台设置不同的后期构建事件

> ID：16037372
> 
> 赞同：0
> 
> 时间：2013-04-16T12:42:30.430
> 
> 标签：vb.net, build

在 vb.net 中设置构建后事件似乎总是为所有配置和所有平台设置 - 即使我希望它在每种情况下都不同。有没有办法强制执行后一种行为？

目前我被迫`IF "$(PlatformName)"=="x64"`在构建后事件命令行中进行测试，等等 - 丑陋！

我还*没有*被`All Configurations`选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:02:14.287

您可以创建一堆`cmd`名为 的文件`postbuild_x64.cmd`，`postbuild_x86.cmd`然后使用`call postbuild_$(PlatformName).cmd`.

# python - 在python中，++是什么意思？

> ID：16037377
> 
> 赞同：0
> 
> 时间：2013-04-16T12:42:58.000
> 
> 标签：python

我读过这样的剧本

```
for ... :
   for ...:
      ++i 
```

但这是什么`++`意思？`++`运算符是python吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T12:44:30.023

在 python 中，这只是一元加两次。它什么也没做。一个可能会将 bool 强制转换为 int，但第二个完全没用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-16T12:44:36.060

```
>>> +1
1
>>> ++1
1
>>> +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++1
1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T14:04:14.660

Python 是一种隐式类型语言，因此，除非我们知道变量的类型，否则如果我们对它应用运算符，我们无法确定会发生什么。在您的示例中，`i`不一定是整数，它可以是具有重载一元 + ( `__pos__`) 的对象，例如：

```
class Duplicator(object):
    def __init__(self, s):
        self.s = s

    def __pos__(self):
        self.s += self.s
        return self

    def __str__(self):
        return self.s

z = Duplicator("ha ")
# 1000 lines of code
print +z
print ++z
print +++z 
```

所以你的问题“`++x`在python中意味着什么”的答案是“它取决于什么`x`”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-16T12:44:36.467

您可以使用`i+=1`而不是`i++`for 您的 for 循环。Python中没有`++`用法。

# jsf - 将元素添加到 dataTable 仅用于查看目的

> ID：16037382
> 
> 赞同：0
> 
> 时间：2013-04-16T12:43:11.417
> 
> 标签：jsf, datatable

我很抱歉这个令人困惑的标题，我真的想不出一个更好的。

我有以下问题：

我的视图中有一个列表显示在 a 上`dataTable`，一切正常。它有点像付款清单，所以有付款金额、形式和其他详细信息。

现在客户希望我通过付款方式订购，并添加小计。我想到的唯一方法是将新项目添加到列表中，以便它们出现在列表中`dataTable`并且效果很好。

问题是这些值只需要存在于查看目的，所以每当我将列表发送回服务器进行一些处理时，我需要忽略这些值。我不想更改所有代码，所以我想我只是删除它们进行处理，并在返回视图时再次添加它们（因为我还需要在处理后更新它们，所以我不'没有不一致的值）。

对我来说最好的方法是什么？识别所有点并调用方法？也许为这项工作创建一个 servlet 过滤器？有什么建议么？

下面是一个表格应该是什么样子的例子：

![数据表](https://i.stack.imgur.com/4auTv.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:59:45.767

将它们显示为列的“页脚”方面，而不是列表的一部分。页脚不是在每行的基础上进行评估的，而是在每个表的基础上进行评估的，因此您可以安全地将其绑定到支持 bean 本身的属性而不是迭代列表。

例如

```
<h:dataTable value="#{bean.payments}" var="payment">
    ...
    <h:column>
        #{payment.price}
        <f:facet name="footer">
            #{bean.subtotalPaymentPrice}
        </f:facet>
    </h:column>
</h:dataTable> 
```

* * *

**更新**：根据问题更新，其中包括一个有用的屏幕截图，它比问题中的 1000 个单词更好地描述了要求，不，这不是标准 JSF 可能的“开箱即用”。根据您使用 PrimeFaces 或至少熟悉它的问题历史，您可能会发现它`<p:subTable>`很有帮助。另请参见[展示示例](http://www.primefaces.org/showcase/ui/datatableSubTable.jsf)。

# assembly - 将 c\c++ 代码翻译成 MIPS 汇编器

> ID：16037385
> 
> 赞同：1
> 
> 时间：2013-04-16T12:43:18.293
> 
> 标签：assembly, static, mips

如何将此代码翻译成 MIPS 汇编程序

```
#include <stdio.h>

void func() {
    static int x = 0;
    printf("%d\n", x);
    x++;
}

int main() {
    func(); 
    func(); 
    func(); 
    return 0;
} 
```

我不明白 MIPS 中的静态变量类比是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T20:51:43.227

```
 .file   1 "myC.c"

 # -G value = 8, Cpu = 3000, ISA = 1
 # GNU C version cygnus-2.7.2-970404 (mips-mips-ecoff) compiled by GNU C version cygnus-2.7.2-970404.
 # options passed:  -msoft-float
 # options enabled:  -fpeephole -ffunction-cse -fkeep-static-consts
 # -fpcc-struct-return -fcommon -fverbose-asm -fgnu-linker -msoft-float
 # -meb -mcpu=3000

gcc2_compiled.:
__gnu_compiled_c:
    .sdata
    .align  2

x.2:
    .word   0
    .align  2
$LC0:
    .ascii  "%d\n\000"
    .text
    .align  2
    .globl  func
    .ent    func
func:
    .frame  $fp,24,$31      # vars= 0, regs= 2/0, args= 16, extra= 0
    .mask   0xc0000000,-4
    .fmask  0x00000000,0
    subu    $sp,$sp,24
    sw  $31,20($sp)
    sw  $fp,16($sp)
    move    $fp,$sp
    la  $4,$LC0
    lw  $5,x.2
    jal printf
    lw  $2,x.2
    addu    $3,$2,1
    sw  $3,x.2
$L1:
    move    $sp,$fp         # sp not trusted here
    lw  $31,20($sp)
    lw  $fp,16($sp)
    addu    $sp,$sp,24
    j   $31
    .end    func
    .align  2
    .globl  main
    .ent    main
main:
    .frame  $fp,24,$31      # vars= 0, regs= 2/0, args= 16, extra= 0
    .mask   0xc0000000,-4
    .fmask  0x00000000,0
    subu    $sp,$sp,24
    sw  $31,20($sp)
    sw  $fp,16($sp)
    move    $fp,$sp
    jal __main
    jal func
    jal func
    jal func
    move    $2,$0
    j   $L2
$L2:
    move    $sp,$fp         # sp not trusted here
    lw  $31,20($sp)
    lw  $fp,16($sp)
    addu    $sp,$sp,24
    j   $31
    .end    main 
```

![在此处输入图像描述](https://i.stack.imgur.com/iQWGA.png)

我首选的用于进行这种转换的工具链是 MipsIT 程序。

# python - read() 函数的返回值是什么类型的？

> ID：16037390
> 
> 赞同：0
> 
> 时间：2013-04-16T12:43:31.590
> 
> 标签：python, byte

我想从二进制文件中读取前 188 个字节，并检查第一个字符是否为`0x47`. 下面的代码：

```
import os
fp=open("try.ts","rb")
for i in range(100):
  buf=fp.read(188)
if buf[0]=="\x47":
  print "OK"
fp.close() 
```

但它给出了：

```
if buf[0]=="\x47":
IndexError: string index out of range 
```

我的问题是：

1.  函数中返回值的类型是什么`read()`？
2.  如何获取字符串或数组中的第一个字符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T12:47:10.203

```
if buf[0]=="\x47":
IndexError: string index out of range 
```

这意味着你`buf`是空的。您在循环中覆盖了它 100 次。该文件中可能没有 18800 字节。在文件末尾`read`只返回一个空字符串。你的意思是把你的`if`里面`for`？如果是这样，请相应地缩进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:47:43.320

> 1.  read() 函数中返回值的类型是什么？

你的意思是`read`type的方法`file`。该命令`help(file.read)`给出：

> `read([size])`-> 最多读取 size 个字节，**以字符串形式返回。**
> 
> 如果 size 参数为负数或省略，则读取直到到达 EOF。请注意，在非阻塞模式下，即使没有给出大小参数，返回的数据也可能少于请求的数据。

* * *

> 2.  如何获取字符串或数组中的第一个字符？

就像你做的那样，`[0]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-01T19:55:44.977

使用序列类型时的建议：与其
使用精确索引，不如使用切片更有用。即使对象为空，切片也始终存在。

buf[0:1] 非空时返回与 buf[0] 相同，如果 buff 为空字符串则返回空字符串 ''，而 buf[0] 则返回错误（因为为空，所以第一个字符不存在）

并且字符串只有在为空时才为 False

# magento - 显示我的帐户导航链接

> ID：16037391
> 
> 赞同：0
> 
> 时间：2013-04-16T12:43:33.310
> 
> 标签：magento, magento-1.7

我创建了自定义页面并将该链接添加到我的帐户页面。但是如果我点击那个链接，侧边栏就会消失。如何在我的自定义模块页面中显示我的帐户导航侧边栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:02:04.270

使用更新句柄，例如

```
<layout>
<cevent_index_index>    --- your custom module handle in layout.xml
    <update handle="customer_account"/>  -- check customer.xml
    <reference name="my.account.wrapper">   ---- block in customer_account handle
        <block type="cevent/cevent" name="cevent" template="cevent/cevent.phtml"/>
    </reference>    
</cevent_index_index>
</layout> 
```

# jquery - 单击时显示某些拉斐尔形状

> ID：16037393
> 
> 赞同：2
> 
> 时间：2013-04-16T12:43:44.083
> 
> 标签：jquery, jquery-selectors, click, raphael, dom-selection

关于如何在 jQuery 对象上调用 Raphael 方法有一个[很好的答案。](https://stackoverflow.com/questions/4180963/how-to-call-raphael-methods-on-jquery-objects)它完美地工作。但我需要更多功能。我想在单击按钮时显示形状宽度某些属性。在那个答案中，我只能影响数组中的所有形状。我怎样才能过滤它们？我使用了这段代码：

```
$("button").click(function() {
    $.each(cottages_array, function(i, c){
        c.animate({fill: '#55bfe1', opacity: 1}, speed_anim_in);
    });
}); 
```

我的形状有属性类型，我只想突出显示特定类型的形状（例如 A 型）。在循环内部，我可以用不同的颜色填充不同的类型，但我不知道如何使用 jQuery 对循环外的点击应用任何条件。

```
for (var j = 0; j < obj.cottages.length; j++) {
    var obj_cottages = obj.cottages[j],
    my_path = canvas.path(obj_cottages.coords);
        my_path
            .attr({stroke: "none", fill: cottage_color_start, "fill-opacity": 0.8, opacity: 0, cursor: "pointer"})
            .data('type', obj_cottages.type)

if (obj_cottages.type == 'A') {
    my_path
        .attr({stroke: "none", fill: "#fff", "fill-opacity": 0.8, opacity: 0, cursor: "pointer"})
} 
```

我花了一整天的时间试图弄清楚如何做到这一点，但我一点运气都没有。

[http://jsfiddle.net/Fionaa/5BYK6/](http://jsfiddle.net/Fionaa/5BYK6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:47:25.817

我做的第一件事是为你的按钮添加一个 id，因为我们需要知道我们想要哪种类型：

```
<button id="A">Type А</button>
<button id="B">Type B</button>
<button id="C">Type C</button> 
```

接下来我找到点击的按钮的id：

```
// get id of button which was clicked
var type = this.id; 
```

然后我创建了一个临时集合来保存该类型的小屋：

```
// create temporary set
var set = canvas.set(); 
```

然后在你的循环中，我找到等于点击类型的山寨类型，并添加到临时集

```
// loop all cottages and find the type we want
    c.forEach(function(el){

        // put cottages in the temp set
        if(el.data("type") == type){
            set.push(el);
        }

    }); 
```

最后为这个临时集制作动画

```
// animate this set
    set.animate({fill: '#55bfe1', opacity: 1}, speed_anim_in); 
```

我有一个小提琴给你-http: [//jsfiddle.net/5BYK6/1/](http://jsfiddle.net/5BYK6/1/)

**编辑**

好的，我添加了以下内容：

```
// fade any previous set
    if(prevSet) {
        prevSet.animate({opacity: 0}, speed_anim_out);
    }

// store current set to remove later
    prevSet = set; 
```

基本上我们存储我们创建的上一个集合，并检查 prevSet 中是否存在一个，我们使用您的 speed_anim_out 变量将动画设置为 opacity: 0。

请参阅此[http://jsfiddle.net/5BYK6/2/的更新小提琴](http://jsfiddle.net/5BYK6/2/)

# orm - 与学说映射学说 2 的关联失败

> ID：16037394
> 
> 赞同：0
> 
> 时间：2013-04-16T12:43:44.153
> 
> 标签：orm, doctrine-orm, mapping, associations

我在学说 2 中遇到以下问题，我想将我的地址实体和国家实体加入我的用户实体。因此，经过一些尝试，它在数据库中运行良好，但是当我使用它时，`./vendor/bin/doctrine-module orm:validate-schema` 它显示映射失败。

```
[Mapping]  FAIL - The entity-class 'User\Entity\Adress' mapping is invalid:
* The association User\Entity\Adress#user refers to the inverse side field User\Entity\User#use
r_id which does not exist.
* The association User\Entity\Adress#country refers to the inverse side field User\Entity\Count
ry#id which is not defined as association.
* The association User\Entity\Adress#country refers to the inverse side field User\Entity\Count
ry#id which does not exist. 
```

我真的不知道为什么会这样，因为我的数据库像这样工作得很好。它识别地址中的用户和国家实体，以及值。

我的用户实体：

```
 ...
    /**
 * Entity Class representing a post of our User module.
 * 
 * @ORM\Table(name="user")
 * @ORM\Entity(repositoryClass="User\Repository\UserRepository")
 * 
 * @property int userid
 * @property string firstname
 * @property string insertion
 * @property string lastname
 * @property date dateofbirth
 * @property string gender
 * @property string phonenumber
 * @property string mobile
 */
    class User extends zfcUser implements UserInterface
    {
        /**
         * Id from user
         * 
         * @ORM\OneToMany(targetEntity="Adress", mappedBy="user", cascade= "remove")
         * @access protected
         */

        /**
         * Firstname of our user
         *
         * @ORM\Column(type="string", nullable=true)
         * @var string
         * @access protected
         */
        protected $firstname;

    ...
    ... 
```

我的地址实体：

```
/**
 * Entity Class representing our Adress module.
 *
 * @ORM\Entity
 * @ORM\Table(name="adress")
 * @property integer addressid
 * @property string street
 * @property integer number
 * @property string addition
 * @property string zipcode
 * @property integer userid
 * @property integer countryid
 */
class Adress
{

...
...

/** 
     * @ORM\ManyToOne(targetEntity="User", inversedBy="user_id")
     * @ORM\JoinColumn(name="user_id", referencedColumnName="user_id")
     * @var User[]
     * @access protected
     */
    protected $user;

    /**
     * @ORM\ManyToOne(targetEntity="Country", inversedBy="id")
     * @ORM\JoinColumn(name="country_id", referencedColumnName="id")
     * @var Country[]
     * @access protected
     */
    protected $country;

...
... 
```

我的国家实体：

```
 ...
    ...
    /**
 * Entity Class representing our Country module.
 *
 * @ORM\Entity
 * @ORM\Table(name="country")
 * @property integer id
 * @property string countrycode
 * @property string countryname
 */
    class Country
    {
    /**
         * Id from a country
         * 
         * @ORM\Id
         * @ORM\Column(type="integer")
         * @ORM\GeneratedValue(strategy="AUTO")
         * @ORM\OneToMany(targetEntity="Adress", mappedBy="country")
         * @var int
         * @access protected
         */
        protected $id;

    ...
    ... 
```

有人解释为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:37:41.020

对于第一个错误：

在您的`User`班级中，缺少与地址相关的属性，因此可能有两种可能性：

1.  如果它`protected $user_id`: 这将不起作用，因为 Doctrine 期望在此位置有一个地址对象数组。
2.  如果它`protected $addresses`：您必须将`Address`类中用户属性上的映射更改为：

    `@ORM\ManyToOne(targetEntity="User", inversedBy="addresses")`

对于第二个错误：

在您的`Address`班级中，您必须删除国家/地区的 inversedBy 属性：

```
@ORM\ManyToOne(targetEntity="Country") 
```

# android - Android - 更改屏幕键盘切换状态

> ID：16037400
> 
> 赞同：1
> 
> 时间：2013-04-16T12:44:08.460
> 
> 标签：android, android-softkeyboard

我在一个活动中有两个 EditTexts 用于激活我的应用程序。第一个存储名称并将输入类型设置为 textCapWords，第二个存储激活密钥并将输入类型设置为 textCapCharacters。

问题是，当您在上一个之后选择第一个 EditText 时，即使您移动到另一个活动，大写锁定仍处于打开状态。我想做的，不必创建自己的输入法，将其向下移动到移位，甚至完全关闭大写锁定。我尝试过使用检测对象来发送 shift 键甚至 capslock 键，但这只能影响硬件键盘。我认为这应该很容易做到。

这是布局文件的摘录，它在 2.3.7 及更低版本上运行良好。似乎在 4.0.4 上输入没有改变。

```
 <EditText
        android:id="@+id/et_device_name"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="7dp"
        android:hint="Please type in a unique name."
        android:singleLine="true"
        android:inputType="textCapWords"
   />

  <EditText
       android:id="@+id/et_activation_key"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:singleLine="true"
       android:inputType="textCapCharacters"
       android:maxLength="48"
 /> 
```

编辑：我唯一的另一件事是两个 textchanged 侦听器，它们都将各自的编辑文本错误设置为空。如果计数为 1。所以它们不会影响功能。

编辑：哦，如果第一次编辑文本，如果你手动关闭大写锁定它使用正常的输入类型规则（如果前面有一个字母，则小写，并为新单词移动空格）。

编辑：

```
et_DeviceName.addTextChangedListener( new TextWatcher()
                                          {
                                            @Override
                                            public void onTextChanged( CharSequence s, int start, int before, int count )
                                            {
                                                if(count == 1)
                                                {
                                                    et_DeviceName.setError( null );
                                                }
                                            }

                                            @Override
                                            public void beforeTextChanged( CharSequence s, int start, int count, int after )
                                            {                                                           
                                            }

                                            @Override
                                            public void afterTextChanged( Editable s )
                                            {
                                            }
                                          }
                                    );

et_ActivationKey.addTextChangedListener( new TextWatcher()
                                             {
                                                @Override
                                                public void onTextChanged( CharSequence s, int start, int before, int count )
                                                {
                                                    if( count == 1 )
                                                    {
                                                        et_ActivationKey.setError( null );
                                                    }
                                                }

                                                @Override
                                                public void beforeTextChanged( CharSequence s, int start, int count, int after )
                                                {
                                                }

                                                @Override
                                                public void afterTextChanged( Editable s )
                                                {
                                                }
                                             }
                                           ); 
```

编辑：我已经放弃使用软键盘，并通过在输入文本时手动大写 EditText 来解决我的问题。下面是我的代码，适用于遇到相同问题的任何人。

```
 et_DeviceName = (EditText) findViewById( R.id.et_device_name ); 
    et_DeviceName.setInputType( InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_WORDS );
    et_DeviceName.setText( MainActivity.DEVICE_NAME );              

    //Move the cursor to the end of the text, for easy editing
    Selection.setSelection( et_DeviceName.getEditableText(), et_DeviceName.getText().length() );

    et_ActivationKey = (EditText) findViewById( R.id.et_activation_key );       
    //et_ActivationKey.setInputType( InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS );

    btn_Activate = (Button) findViewById( R.id.btn_submit_act_key );

    et_DeviceName.addTextChangedListener( new TextWatcher()
                                              {
                                                    @Override
                                                    public void onTextChanged( CharSequence s, int start, int before, int count )
                                                    {
                                                        if(count == 1)
                                                        {
                                                            et_DeviceName.setError( null );
                                                        }
                                                    }

                                                    @Override
                                                    public void beforeTextChanged( CharSequence s, int start, int count, int after )
                                                    {
                                                    }

                                                    @Override
                                                    public void afterTextChanged( Editable s )
                                                    {                                                           
                                                    }
                                              }
                                        );

    et_ActivationKey.addTextChangedListener( new TextWatcher()
                                                 {                  
                                                        boolean capitalise = true;

                                                        /* Exists because for some reason the text randomly goes lower case, when this happens the methods are called 3 times.
                                                         * So this tracks how many times the methods have been called and if called amount is already on two then it will re-capitalise.
                                                         */                                                         
                                                        byte calledAmount = 0;

                                                        @Override
                                                        public void onTextChanged( CharSequence s, int start, int before, int count )
                                                        {
                                                            if( count == 1 )
                                                            {
                                                                et_ActivationKey.setError( null );
                                                            }

                                                            if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB && count != before)
                                                            {
                                                                capitalise = true;
                                                            }
                                                        }

                                                        @Override
                                                        public void beforeTextChanged( CharSequence s, int start, int count, int after )
                                                        {
                                                        }

                                                        @Override
                                                        public void afterTextChanged( Editable s )
                                                        {
                                                             if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB )
                                                             {
                                                                 calledAmount ++;

                                                                 if( capitalise || calledAmount == 2 )
                                                                 {
                                                                     capitalise = false;
                                                                     calledAmount = 0;

                                                                     s.replace( 0, s.length(), s.toString().toUpperCase() );
                                                                 }
                                                             }
                                                        }
                                                 }
                                           ); 
```

注意：我在检查 HoneyComb 时做了一个假设，问题所在的版本可能更低或更高（最有可能更高）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:25:46.210

尝试使用：

```
InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS;
InputType.TYPE_TEXT_FLAG_CAP_WORDS;
InputType.TYPE_TEXT_FLAG_CAP_SENTENCES; 
```

示例：输入类型或信息[的示例：](http://alvinalexander.com/java/jwarehouse/android/core/java/android/text/method/BaseKeyListener.java.shtml)[有关输入类型的信息](http://developer.android.com/reference/android/text/InputType.html#TYPE_TEXT_FLAG_CAP_SENTENCES)

编辑：here is an discussion about this in stackoverflow [Programmatically change input type of the EditText from PASSWORD to NORMAL &反之亦然](https://stackoverflow.com/questions/9892617/programmatically-change-input-type-of-the-edittext-from-password-to-normal-vic)

**编辑：**

```
EditText et1 = (EditText)findViewById(R.yourLayout.et1);
et1.setInputType(InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS); // capitalize all characters

EditText et2 = (EditText)findViewById(R.yourLayout.et2);
et2.setInputType(InputType.TYPE_TEXT_FLAG_CAP_SENTENCES); // capitalize the first
                                                          // letter of each sentence 
```

**编辑2：**

```
EditText et1 = (EditText)findViewById(R.yourLayout.et1);
et1.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_FLAG_CAP_CHARACTERS);

EditText et2 = (EditText)findViewById(R.yourLayout.et2);
et2.setInputType(InputType.TYPE_CLASS_TEXT|InputType.TYPE_TEXT_FLAG_CAP_SENTENCES); 
```

# java - 泽西岛，在点击资源之前向浏览器返回响应

> ID：16037401
> 
> 赞同：0
> 
> 时间：2013-04-16T12:44:09.257
> 
> 标签：java, validation, parameters, jersey

我正在为我的 RESTful 服务使用 Jersey 框架。

我的每个资源类都继承了一个基类，我的基类中几乎没有 URL 参数验证，所以如果我发现 URL 中缺少必填字段，我想停止我的基类中的流程（即 Don '不想去点击我的资源方法并从我的基类返回对浏览器的响应）。

目前我无法做到这一点，即使我尝试例如执行以下操作以返回缺少参数消息的浏览器，它也不会并且仍然会点击被调用的资源类 Web 服务方法：

```
return Response.status(Response.Status.BAD_REQUEST)
               .entity("Parameter value missing for "+ StringHelper.ArrayToString(requiredParametersValueMissing))
               .build(); 
```

你们面临的任何想法或类似情况。输入赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:23:53.300

您可以像这样抛出 WebApplicationException：

```
throw new javax.ws.rs.WebApplicationException(javax.ws.rs.core.Response
.status(javax.ws.rs.core.Response.Status.BAD_REQUEST)
.entity("Parameter value missing for ").type("text/html").build()); 
```

我通过扩展 com.sun.jersey.spi.container.servlet.ServletContainer 并自己从 HttpServletRequest 解析出参数来处理您想要做的事情。如果我发现错误，我会打电话

```
return super.service(baseUri, requestUri, request, response); 
```

这是您在基类中所做的吗？

# javascript - 如何在 ASP.Net MVC 中访问当前元素的名称

> ID：16037404
> 
> 赞同：-2
> 
> 时间：2013-04-16T12:44:15.223
> 
> 标签：javascript, asp.net-mvc

`Shared`我在文件夹 (in )中创建了一个“局部视图”，并用模型`Views`命名了它。`String``String`

因此，通过 ASP.Net MVC 角色，所有这些`@Html.EditorFor(ModelThatIsString)`都应该是我创建的视图（String.chtml）。那工作正常。

**但是**我想在这个视图中有一些 javascript 代码，所以我需要当前属性的 ID，我尝试了以下代码：

```
@model String
@Html.TextBox(null,"");
<script>
  var theTextBox = document.getElementById("??????");
  ...
</script> 
```

我怎样才能访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:52:50.713

好的`@Html.TextBox(null, "")`是错误的。因此，您设置的第一个属性`null`应该是文本框名称的字符串。所以这行不通。您还将该值硬编码为空字符串 ( `""`)，因此您的编辑器不会绑定。

**如果您在文本框中设置名称，则**忽略所有这些：****

 **```
@Html.TextBox("txt", "") 
```

您的 javascript 将是：

```
<script>
  var theTextBox = document.getElementById("txt");
  ...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:50:14.327

您必须自行设置此`id`属性。`TextBox`检查[此问题](https://stackoverflow.com/questions/291274/how-do-i-specify-attributes-for-a-html-textbox-helper-while-maintaing-the-value)以获取更多信息。**

# eclipse - 努力在 Maven 和 Eclipse 中更新 JRE 依赖项

> ID：16037414
> 
> 赞同：0
> 
> 时间：2013-04-16T12:44:40.033
> 
> 标签：eclipse, maven, java

我正在尝试在 Eclipse中构建一个[大型开源项目；](https://github.com/openplans/OpenTripPlanner/wiki)它使用 Maven，所以我安装了各种插件（m2eclipse 等），但我对这个设置有点不熟悉。

我可以毫无问题地构建和运行我感兴趣的特定 JAR。但是，当新构建的 JAR 尝试打开一个大的 ZIP 文件时，我得到了这个：

```
Exception in thread "main" java.lang.RuntimeException: java.util.zip.ZipException: invalid CEN header (bad sig
nature)
        at org.opentripplanner.graph_builder.impl.GtfsGraphBuilderImpl.buildGraph(GtfsGraphBuilderImpl.java:17
9)
        at org.opentripplanner.graph_builder.GraphBuilderTask.run(GraphBuilderTask.java:127)
        at org.opentripplanner.graph_builder.GraphBuilderMain.main(GraphBuilderMain.java:51)
Caused by: java.util.zip.ZipException: invalid CEN header (bad signature)
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(Unknown Source) 
```

我[做了一些研究](https://stackoverflow.com/questions/12346707/java-util-zip-zipexception-invalid-cen-header-bad-signature)，似乎这个错误意味着 java.util.ZipFile 无法读取文件，因为它是 ZIP64 格式。显然这是在 Java 1.7 中修复的，所以我尽职尽责地更新了 OS X 上的 JDK，并尝试通过在 Eclipse 中右键单击它来更改 Maven 项目，然后更改 Project Facet，这反过来似乎已经更新了该项目中的 JRE 库到 1.7：

![在此处输入图像描述](https://i.stack.imgur.com/ql9XS.png)

但是，这不起作用 - 即使重新构建了整个项目，我仍然会收到错误消息。

旧的 java.util.zip 是否有可能仍然从某个地方被拉入？我不太熟悉 Java 中的链接是如何工作的，旧的 JDK 可以像这样“嵌入”在依赖项中吗？还是 java.util.zip 只是在目标机器上使用？（这绝对是 JRE 1.7）我知道抛出异常的代码实际上包含在一个单独的 JAR 中，该 JAR 作为 Maven 依赖项引入：

![在此处输入图像描述](https://i.stack.imgur.com/PnovG.png)

我是否需要针对 Java 1.7 追踪并重新构建这个外部 JAR，这是这里的问题吗？或者是否有一个 Maven“父项目”的概念将我的新 JRE 1.7 退回到 1.6？对不起，如果这些问题是幼稚的。

我最初认为它会像在运行时机器上更新 JRE 一样简单，但显然不是。那么我该如何解决这个错误呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:59:17.570

假设问题确实是由使用旧版本的 Java 引起的，那么重建不会有任何区别。真正的**问题**是您的应用程序 JAR*运行*在较旧的 JRE 上。

在您用于运行应用程序的命令 shell 中，运行`java -version`. 这将告诉您运行时将使用什么 JDK/JRE`java -jar yourApp.jar ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:50:11.710

与 maven 的关系最重要的一点是请记住，事实的来源是 Maven 中的 pom 文件，而**不是**IDE。所以更改编译器版本必须在 pom.xml 文件中完成，而**不是**在 IDE 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:51:39.080

Maven 会忽略您在 Eclipse 中使用的 JRE，您必须使用 Maven 编译插件配置强制它。这是此链接中的方法[http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html)但使用版本 1.7 而不是 1.3

# google-maps - 谷歌地图 v3 问题

> ID：16037423
> 
> 赞同：0
> 
> 时间：2013-04-16T12:45:21.147
> 
> 标签：google-maps

我有下面的代码，但是谷歌地图没有完全显示（只有左上角）。请参阅此[屏幕截图](http://i49.tinypic.com/4iehe9.png)。有人可以帮忙吗？提前致谢。

```
<script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(<?php echo $hotel->hotel_latitude.','.$hotel->hotel_longtitude; ?>);

            var Options = {
                center:latlng,
                zoom:15,
                mapTypeId:google.maps.MapTypeId.ROADMAP
            };

            var map = new google.maps.Map(document.getElementById("ourlocation"),Options);

            marker = new google.maps.Marker({
                position:latlng,
                animation:google.maps.Animation.BOUNCE
            });

            marker.setMap(map);
        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T13:52:24.427

在我的一个项目中，我使用了谷歌地图 v3，但问题通过替换`http://*`而不是`https://*`. 所以试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T21:17:00.480

调用 setMap 后，尝试`google.maps.event.trigger(map, 'resize');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:22:06.707

将宽度和高度添加到您的 div，然后它会正常工作。

```
<div id="imgFrame" style="width: 800px; height: 900px"></div> 
```

# iphone - 为数组中的图像设置边框颜色

> ID：16037429
> 
> 赞同：0
> 
> 时间：2013-04-16T12:45:33.543
> 
> 标签：iphone, objective-c

我有一个数组中的图像，当我在视图中显示这些图像时，它应该出现在边框中。如何设置边框颜色？

```
for(UIImage *img in imagesArray)

{

//for bordercolor

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:48:44.117

首先从**Build Phases => Link Binary with Libraries => Add button(+)**`QuartzCore.framework`在您的项目中添加框架，然后将其文件导入您的类中，如下所示...

 **```
#import <QuartzCore/QuartzCore.h> 
```

并使用下面的代码设置颜色..

```
yourImageView.layer.borderWidth = 2.0;
yourImageView.layer.borderColor= [UIColor redColor].CGColor; 
```

**更新：**

```
-(IBAction)lockword:(id)sender { 
   for (UIImage *img3 in imagesArray) { 
     UIImageView *imgview1=[[UIImageView alloc]initWithImage:img3];
    imgview1.layer.borderWidth = 2.0;
    imgview1.layer.borderColor = [UIColor redColor].CGColor;
    [imgview1 release];
    // your other code write here
    // Add this UIImageView as a subview of your view with its frame...
 } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:47:17.473

```
#import <QuartzCore/QuartzCore.h>

[imageView.layer setBorderColor: [[UIColor blackColor] CGColor]];
[imageView.layer setBorderWidth: 2.0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:12:50.433

要允许编辑 imageview 的边框颜色属性，您需要添加**Quartzcore 框架** Add it from : **Link Binary with Libraries 选项**，然后在要更改边框颜色的地方编写以下代码：

```
[imageview.layer setBorderWidth:2.0]; // set the border width to any value you want so that your bordercolor would appear accordingly

[imageview.layer setBorderColor:[[UIColor blueColor].CGColor]; // set the color to whatever background color you want to set to your image 
```**

# asp.net - 如何在 ASP.NET WebForms 网站项目中启用实体框架

> ID：16037437
> 
> 赞同：2
> 
> 时间：2013-04-16T12:46:12.807
> 
> 标签：asp.net, entity-framework, webforms

如何在 Visual Studio 2012 的 WebForms 网站项目（不是 Web 应用程序项目）中启用实体框架？

编辑 1：我使用的是 Framework 4.0。我已经使用包管理器控制台安装了 Entity Framework 5.0。在包管理器控制台中执行 Enable-Migrations 时会抛出错误。

```
PM> enable-migrations
System.ArgumentException: The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG))

Server stack trace: 
   at EnvDTE.Properties.Item(Object index)
   at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs)
   at System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage(IMessage msg)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at EnvDTE.Properties.Item(Object index)
   at System.Data.Entity.Migrations.Extensions.ProjectExtensions.GetPropertyValue[T](Project project, String propertyName)
   at System.Data.Entity.Migrations.MigrationsDomainCommand.GetFacade(String configurationTypeName)
   at System.Data.Entity.Migrations.EnableMigrationsCommand.FindContextToEnable(String contextTypeName)
   at System.Data.Entity.Migrations.EnableMigrationsCommand.<>c__DisplayClass2.<.ctor>b__0()
   at System.Data.Entity.Migrations.MigrationsDomainCommand.Execute(Action command)
The parameter is incorrect. (Exception from HRESULT: 0x80070057 (E_INVALIDARG)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:58:06.583

请检查您是否安装了实体框架。如果没有，请在 NuGet 上获取 EF 运行时可用

检查[Nuget](http://msdn.microsoft.com/en-us/data/ee712906.aspx)和[示例应用程序的这些链接](http://programmaticponderings.wordpress.com/2012/11/22/first-impressions-of-database-first-development-with-entity-framework-5-in-visual-studio-2012/)

# ssrs-2008 - SSRS 2008 显示切换导致基于表达式显示或隐藏的错误

> ID：16037438
> 
> 赞同：0
> 
> 时间：2013-04-16T12:46:13.393
> 
> 标签：ssrs-2008, reporting-services

我正在 SSRS 2008 报表生成器中构建报表，并且正在我的详细信息行组上设置可见性属性。我希望此行的可见性基于名为 Show All Details 的参数，该参数为真或假，由用户在运行时选择。我还希望每个详细信息行的显示都通过它的摘要行列进行切换。

此功能的每一项都可以正常工作 - 整个报表可以根据 Show All Details 参数展开或折叠，并且每个详细信息行都可以通过单击其摘要列来展开或折叠。

但是，当我单独展开 1 行或几行，然后将 Show All Details 参数更改为 yes 时，这些展开的行实际上会折叠而不是保持展开状态。当我做相反的事情并折叠一些单独的行时也会发生同样的情况，然后将 Show all details 参数更改为 no；折叠的行实际上是展开而不是保持折叠状态。这是 SSRS 2008 中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T05:58:42.637

有同样的问题。您将可见性属性直接设置为行。您需要在“行组”窗口中设置可见性。包括组和子组中的所有其他行。

# templates - 页脚文件中的 Google Analytics（分析）

> ID：16037440
> 
> 赞同：0
> 
> 时间：2013-04-16T12:46:16.023
> 
> 标签：templates, google-analytics

我有一个关于 Google Analytics 如何跟踪 Wordpress 站点或任何其他使用模板文件在页脚或页眉中包含 Google Analytics 代码的站点中的页面的问题。由于该文件是在所有页面中生成和使用的，这是否意味着分析代码正在计算所有被查看的页面是否正确？此外，是否可以查看哪些页面正在获得点击并在 Google Analytics 中获得更详细的报告？我只是感觉我正在跟踪的页面显示的报告不准确，因为每个页面都使用相同的代码。任何人都可以帮助解决这个问题并就这个话题对我进行一些教育吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:51:27.997

代码始终相同，它加载在页脚中，因此您不必将其放在每个页面上。

在代码中，您的网站有一个唯一代码，因此分析知道哪些分析帐户需要获取信息。

无需每页更改代码。

你可以看到这样的浏览量：

-->谷歌分析--->内容-->网站内容-->所有页面

现在你得到一个包含 url 的列表和每个 url 的页面视图

您可以按综合浏览量（页面加载次数）和唯一页面浏览量（访问该页面的唯一 IP 地址的数量）对列表进行排序。

您还可以找到跳出率，它显示了有多少% 的用户在该页面上离开了您的网站。

# c# - 字符串包含另外两个字符串

> ID：16037445
> 
> 赞同：16
> 
> 时间：2013-04-16T12:46:28.687
> 
> 标签：c#, string, contains

如果字符串包含 2 个或更多单词，是否可以让包含函数查找？这就是我想要做的：

```
string d = "You hit someone for 50 damage";
string a = "damage";
string b = "someone";
string c = "you";

if(d.Contains(b + a))
{   
    Console.WriteLine(" " + d);
    Console.ReadLine();
} 
```

当我运行它时，控制台窗口很快就关闭了，没有显示任何东西。

还有一个问题：如果我想增加造成的伤害，那么获得该数字并将其放入 的最简单方法是`TryParse`什么？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-16T12:48:20.453

你最好只调用`Contains`两次或制作自己的扩展方法来处理这个问题。

```
string d = "You hit someone for 50 damage";
string a = "damage";
string b = "someone";
string c = "you";

if(d.Contains(a) && d.Contains(b))
{
   Console.WriteLine(" " + d);
   Console.ReadLine();
} 
```

至于您的其他问题，您可以构建一个正则表达式来解析字符串以查找 50，或者如果字符串始终相同，只需根据空格将其拆分并获得第 5 部分。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-16T12:57:40.963

```
public static class StringExtensions
{
    public static bool Contains(this string s, params string[] predicates)
    {
        return predicates.All(s.Contains);
    }
}

string d = "You hit someone for 50 damage";
string a = "damage";
string b = "someone";
string c = "you";

if (d.Contains(a, b))
{
    Console.WriteLine("d contains a and b");
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-16T12:49:18.737

这是因为 if 语句返回 false，因为 d 不包含 b + a 即“someonedamage”

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-16T13:07:03.323

您是在寻找包含一定数量单词的字符串还是包含特定单词的字符串？您的示例导致后者。

在这种情况下，您可能希望研究解析字符串或至少使用正则表达式。
学习正则表达式——它将在编程中有用 1000 倍。我不能过分强调这一点。使用 contains 和 if 语句将很快变成一团糟。

如果您只是想计算单词，那么：

```
string d = "You hit someone for 50 damage";  
string[] words = d.Split(' ');  // Break up the string into words
Console.Write(words.Length); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T12:51:17.693

使用代码`d.Contains(b + a)`检查“You hit someone for 50 damage”是否包含“someonedamage”。而这个（我猜）你不想要。

+ 连接 b 和 a 的两个字符串。

你必须检查它

```
if(d.Contains(b) && d.Contains(a)) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-16T12:48:26.857

这是因为*不*`d`包含( ie )，因此应用程序会终止（因为您在块内）。*`b + a``"someonedamage"``Console.ReadLine();``if`*

 ** * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-16T12:49:58.280

因为`b + a ="someonedamage"`，试试这个来实现：

```
if (d.Contains(b) && d.Contains(a))
{  
    Console.WriteLine(" " + d);
    Console.ReadLine();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-16T12:50:06.337

Your `b + a`is equal `"someonedamage"`，因为 your`d`不包含该字符串，所以您的`if`语句返回`false`并且不运行以下部分。

```
Console.WriteLine(" " + d);
Console.ReadLine(); 
```

您可以更有效地控制它；

```
bool b = d.Contains(a) && d.Contains(b); 
```

这是一个[`DEMO`](http://ideone.com/pL8J6V).

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-16T12:50:20.823

```
string d = "You hit someone for 50 damage";
string a = "damage";
string b = "someone";
string c = "you";

if(d.Contains(a) && d.Contains(b))
{
    Console.WriteLine(" " + d);
}
Console.ReadLine(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-16T12:51:25.367

所以你想知道一个字符串是否包含另外两个字符串？

您可以使用此扩展名，它还允许指定比较：

```
public static bool ContainsAll(this string text, StringComparison comparison = StringComparison.CurrentCulture, params string[]parts)
{
    return parts.All(p => text.IndexOf(p, comparison) > -1);
} 
```

以这种方式使用它（您也可以省略`StringComparison`）：

```
bool containsAll = d.ContainsAll(StringComparison.OrdinalIgnoreCase, a, b); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-04-16T12:51:56.940

如果您有单词列表，则可以执行以下方法：

```
public bool ContainWords(List<string> wordList, string text)
{
   foreach(string currentWord in wordList)
      if(!text.Contains(currentWord))
         return false;
   return true;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-04-16T12:52:54.977

您可以使用 linq 编写扩展方法。

```
public static bool MyContains(this string str, params string[] p) {
 return !p.Cast<string>().Where(s => !str.Contains(s)).Any();
} 
```

编辑（感谢 sirid）：

```
public static bool MyContains(this string str, params string[] p) {
 return !p.Any(s => !str.Contains(s));
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-16T13:28:30.043

我刚刚检查了 contains 中的空格以检查字符串是否包含 2 个或更多单词。

```
string d = "You hit someone for 50 damage";
string a = "damage";
string b = "someone";
string c = "you";

bool a = ?(d.contains(" ")):true:false;

if(a)
{
 Console.WriteLine(" " + d);
}

Console.Read(); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-09-03T09:20:49.393

```
string d = "You hit ssomeones for 50 damage";
string a = "damage";
string b = "someone";

if (d.Contains(a) && d.Contains(b))
{
    Response.Write(" " + d);

}
else
{
    Response.Write("The required string not contain in d");
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-05-08T13:48:54.270

那么你真正追求的是什么？如果您想确保某物受到损坏（在这种情况下），您为什么不使用[`string.Format`](https://msdn.microsoft.com/en-us/library/system.string.format(v=vs.110).aspx)

```
string a = string.Format("You hit someone for {d} damage", damage); 
```

这样，您就有能力获得您正在寻找的损坏限定符，并且能够为其他部分计算它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-11-25T21:17:11.840

```
 class Program {
          static void Main(String[] args) {
             // By using extension methods
             if ( "Hello world".ContainsAll(StringComparison.CurrentCultureIgnoreCase, "Hello", "world") ) 
                Console.WriteLine("Found everything by using an extension method!");
             else 
                Console.WriteLine("I didn't");

             // By using a single method
             if ( ContainsAll("Hello world", StringComparison.CurrentCultureIgnoreCase, "Hello", "world") )
                Console.WriteLine("Found everything by using an ad hoc procedure!");
             else 
                Console.WriteLine("I didn't");

          }

          private static Boolean ContainsAll(String str, StringComparison comparisonType, params String[] values) {
             return values.All(s => s.Equals(s, comparisonType));
          }    
       }

       // Extension method for your convenience
       internal static class Extensiones {
          public static Boolean ContainsAll(this String str, StringComparison comparisonType, params String[] values) {
             return values.All(s => s.Equals(s, comparisonType));
          }
       } 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-14T06:51:17.780

```
 public static bool In(this string str, params string[] p)
    {
        foreach (var s in p)
        {
            if (str.Contains(s)) return true;
        }
        return false;
    } 
```*

# javascript - 用javascript改变div的高度

> ID：16037449
> 
> 赞同：-4
> 
> 时间：2013-04-16T12:46:38.513
> 
> 标签：javascript, css, html, height

当 div 的高度超过 100px 时，我想在 div 上设置高度。

例如，当 div 的内容使 div 的高度填充超过 100px 时，我希望它自动适应到 200 px。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:51:10.753

您可以做到这一点的一种方法是确保元素 CSS 中没有“高度”属性（内联样式很好）。然后，当内容改变时调用这个函数：

```
if ($('#myDiv').height() > 100) {
    // Div is larger than 100px so increase it to 200px
    $('#myDiv').css('height', '200px');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:49:58.093

我认为`min-height`CSS 属性是您正在寻找的：

```
div#myDiv {
    min-height: 100px;
    height: auto; 
    display: block; /* float won't work */
} 
```

这*应该*会自动调整 div 的大小以动态包装其全部内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:49:14.553

***你可以试试***

```
if($("divID").height() > 100){
    $("divID").css("height","200px");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:53:26.813

您可以只使用 CSS 的 min-height 和 max-height 。

```
div#myDiv {
min-height: 100px;
height: auto;
max-height: 200px;
} 
```

你也可以用 javascript 做一些事情，但是这样你也可以有高度是 150px 或 120px 的可能性。如果你不想那样，你应该用javascript方式来做。

# php - 无法将用户 ID 保存到数据库

> ID：16037456
> 
> 赞同：-3
> 
> 时间：2013-04-16T12:46:50.893
> 
> 标签：php, mysql, insert, pdo, save

在编码方面我几乎是一个新手，很抱歉这里缺乏知识。

我正在尝试从一个数据库表（用户的 ID 号）中检索一个外键属性，因此我可以**`id`**将其设为一个变量，用于将详细信息保存到另一个数据库表中。

从那里我可以查看所有与该用户登录时的 id 相关联的已保存记录。

我的问题是获取用户 ID 并将其作为变量保存到数据库中，我似乎无法让它工作。如果我删除用户 ID，其余代码将起作用，但我需要将其保存到表中。

这是我的代码：

```
require_once( "dbconnect.php" );
try 
{
  $db = getConnection();    
  function get_id($db) 
  {   
    $username= $_SESSION['username'];
    $result = $db->query(
        "SELECT userID FROM users where username='$username'");
    return $result;
  }
  $uID = get_id($db); 

  $userID= $uID->setFetchMode(PDO::FETCH_NUM);
  $title = $Result->title;
  $desp = $Result->description;

  $sql = "INSERT INTO saved (userID, title, desp
          VALUES ('$userID', '$title', '$desp')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:01:21.993

正确的方法

```
function get_subid($db,$username) 
{   
    $stm = $db->prepare("SELECT userID FROM users where username=?");
    $stm->execute(array($username));
    return $stm->fetchColumn();
}
$userID = get_subid($db,$_SESSION['username']); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T12:49:03.120

尝试在查询中删除 userid 变量周围的引号：

```
$sql = "INSERT INTO saved (userID, title, desp) VALUES ($userID, '$title', '$desp')"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T13:04:22.883

尝试以下操作：

```
require_once( "dbconnect.php" ); 
try { 
/** * ** connect using the getConnection function written in myfunctions.php ** */ $db = getConnection();

function get_subid($db) {
$username= $_SESSION['username']; //variable accessed through the function 
$query = $db->query("SELECT userID FROM users where username='$username'");

$row = $query->row(); //Get's the first Row
$result = $row->userID; //Get's the field userID of this first row
return $result; 
} 
$uID = get_subid($db);

            $title = $Result->title;
            $desp = $Result->description;

            // insert into database
$data = array(
  'userID' => $uID,
  'title' => $title,
  'desp' => $desp
);
$db->insert('saved', $data); 
```

这应该是你想要的（见评论）

# c# - MongoDB 使用 Criteria 排除键 C#

> ID：16037463
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:08.343
> 
> 标签：c#, mongodb, projection

所以，我一直在使用这个对象

```
public class OrdenCompra
    {
        public String Proveedor { get; set; }
        public String EmitidaPor { get; set; }
        public String NumOrden { get; set; }
        public String TipoPago { get; set; }
        public String Descuento { get; set; }
        public String Recargo { get; set; }
        public String Observacion { get; set; }
        public List<DetalleOrden> Detalle { get; set; }

        public ObjectId Id { get; set; }
        public OrdenCompra() { this.Id = ObjectId.GenerateNewId(); }
        public OrdenCompra(ObjectId id) { this.Id = id; }
    } 
```

我可以使用常规对象，并且在我的应用程序中没有问题，但我需要将所有数据导出到 html 文件，如报告。

制作一个 html 标记并使用 jQuery 将 json 文件中的所有数据放到 html 中。

我只是用常规方式调用它

```
public String JsongetOrdenCompra(String orden)
        {
            try
            {
                return this._Collection.FindOneAs<OrdenCompra>(Query.EQ("NumOrden", orden)).ToJson();
            }
            catch (Exception e)
            {
                throw new Exception("Error al obtener Orden de Compra. \n"+e.Message);
            }
        } 
```

问题是“_id”键，所以 json 看起来像

> {“键”：“值”，“bla”：“bla”，“_id”：ObjectId（“516d3f86a3e2c814ac7ca180”）}

所以我无法解析它......

我知道有 SetFields(Exclude("_id")) 方式，但我不能使用**FindOneAs** ...

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:43:09.683

最终使用 C# DataContractJsonSerializer

首先，使用**System.Runtime.Serialization 添加；**到你的班级（和项目）。

然后将 [DataMember] 添加到您的所有属性中，例如

```
[DataMember]
public String Proveedor { get; set; }
[DataMember]
public String EmitidaPor { get; set; }
//and so on 
```

现在在你的控制器上

```
ClasesProClean.OrdenCompra Orden = HO.getOrdenCompra(orden);
DataContractJsonSerializer serializer =  new DataContractJsonSerializer(Orden.GetType());
System.IO.MemoryStream ms = new System.IO.MemoryStream();
serializer.WriteObject(ms, Orden);
String json = Encoding.Default.GetString(ms.ToArray()); 
```

输出：

```
{"Descuento":"5%","Detalle":[{"Cantidad":60,"CodProveedor":"45AB","Precio":600,"Producto":"BetÃºn","Total":36000},{"Cantidad":1000,"CodProveedor":"3D2","Precio":1000,"Producto":"Cera para piso flotante","Total":1000000}],"EmitidaPor":"Mario Cares","Id":{"_increment":8167808,"_machine":10740424,"_pid":5292,"_timestamp":1366114182},"NumOrden":"45","Observacion":"A la brevedad","Proveedor":"Atilio Di Gianmmarino S.","Recargo":"10%","TipoPago":"Contado"} 
```

这就是我一直在寻找的，一个可读的 json ;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:17:32.210

MongoDB`ToJson`扩展方法的行为有点奇怪 - 它可以配置，但输出往往难以使用。我建议您使用[`ServiceStack.Text`](https://github.com/ServiceStack/ServiceStack.Text)or`JavaScriptSerializer`作为 Json 序列化程序，如下所示：

```
public string JsongetOrdenCompra(String orden)
{
    try
    {
        var data = this._Collection.FindOneAs<OrdenCompra>(Query.EQ("NumOrden", orden));
        var s = new System.Web.Script.Serialization.JavaScriptSerializer();
        var result = s.Serialize(data);
        return result;
        // Alternatively, ServiceStack.Text.JsSerializer or 
        // extension methods like ASP.NET MVC's Json()
    }
    catch (Exception e)
    {
        throw new Exception("Error al obtener Orden de Compra. \n"+e.Message);
    }
} 
```

所有这一切都不是最佳实践，因为您向公众展示了所有数据，并且在公众和数据库之间没有额外的验证和验证级别。

更好的方法通常是[创建数据传输对象 (DTO)](http://martinfowler.com/eaaCatalog/dataTransferObject.html)并映射数据，例如使用[`AutoMapper`](https://github.com/AutoMapper/AutoMapper)，如下所示：

```
public class OrdenDTO 
{
    public String Proveedor { get; set; }
    public String EmitidaPor { get; set; }
}

public class OrdenReadDTO : OrdenDTO
{
    public ObjectId Id { get; set; }
}

{
...
  var data = this._Collection.FindOneAs<OrdenCompra>(Query.EQ("NumOrden", orden));
  var dto = AutoMapper.Mapper.DynamicMap<OrdenReadDTO>(dto);
  var s = new System.Web.Script.Serialization.JavaScriptSerializer();
  var string = s.Serialize(data);
  return string;
} 
```

这个想法是`OrdenDTO`包含可以发送到服务器的所有信息，`OrdenReadDTO`还包含可以从服务器读取的所有数据。通常，ID 是只读的。

如果您使用的是 ASP.NET MVC 或类似框架，通常有一些方法可以处理实际的域对象，如下所示：

```
public ActionResult JsongetOrdenCompra(String orden)
{
    // Assuming ASP.NET MVC
    try
    {
        var data = this._Collection.FindOneAs<OrdenCompra>(Query.EQ("NumOrden", orden));
        var dto = AutoMapper.Mapper.DynamicMap<OrdenReadDTO>(dto);
        return Json(dto);
    }
    catch (Exception e)
    {
        throw new Exception("Error al obtener Orden de Compra. \n"+e.Message);
    }
} 
```

# php - PayPal Express Checkout 按钮在 Chrome 和 Safari 上不起作用

> ID：16037468
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:19.943
> 
> 标签：php, javascript, mysql, paypal

我在一个网站上工作，我有一个自定义订单表格，在结帐时会显示一个 PayPal Express Checkout 按钮。该按钮使用销售价格和订单号正确重定向到 FireFox 中的 PayPal，但是在 Safari 和 Chrome 中，当我单击该按钮时，没有任何反应。使用 Chrome 开发人员工具，我可以看到当我单击按钮时正在处理 GET 请求，但随后立即取消。我已经尝试将表单目标更改为 target="_self" 和 target="paypal" 这没有帮助。这是我的 PayPal Express Checkout 按钮和重定向到 PayPal 的代码：

```
//////payment handlers
if ($payprovider == 'paypal') {
////hand off to paypal
header("Location: order-inspection.php?process=paypal&amount=".$row12['customer_payment_amount']."&items=".$row12['COUNT(session)']."&order=".$row12['ordernumber']." ");   
} elseif ($payprovider == 'googlewallet') {
////hand off to google
header("Location: order-inspection.php?process=googlewallet&amount=".$row12['customer_payment_amount']."&items=".$row12['COUNT(session)']."&order=".$row12['ordernumber']." ");
} elseif ($payprovider == 'wepay') {
////hand off to google
header("Location: order-inspection.php?do=wepay&amount=".$row12['customer_payment_amount']."&items=".$row12['COUNT(session)']."&order=".$row12['ordernumber']." ");
} elseif ($payprovider == 'callin') {
////hand off to google
header("Location: order-inspection.php?do=callin&amount=".$row12['customer_payment_amount']."&order=".$row12['ordernumber']."&id=".$_SESSION['CURINSPECID']." ");
} else {
////send to step one because inspectid dropped
header("Location: order-inspection.php?do=step1&error=sessiondropped");}

} elseif (isset($_GET['process']) && $_GET['process'] == 'paypal') {

////vars needed
$orderamount = cleanget('amount');
$orderitems = cleanget('items');
$ordernumberid = cleanget('order');
////update payment provider
$SQL1 = " UPDATE inspections_payment SET customer_payment_status='Dropped at Paypal',payment_provider = 'paypal' WHERE ordernumber = '".$ordernumberid."'";
$result1 = mysql_query($SQL1,$cid)or die(mysql_error());
////print the image to let customer know they are being redirected
print '<center><br /><br /><br /><br /><br /><strong>Sending you to PayPal for payment processing.</strong><br />Please wait.... </center>';
////data to send to paypal
print '<form name="payment" action="https://www.paypal.com/cgi-bin/webscr" method="post"><input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="team@lemonsquad.com">
<input type="hidden" name="cbt" value="Return to site.">
<input type="hidden" name="no_shipping" value="1">
<input type="hidden" name="no_note" value="1">
<input type="hidden" name="rm" value="2">
<input type="hidden" name="bn" value="IC_Sample">
<input type="hidden" name="on0" value="Order Number">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="os0" value="'.$ordernumberid.'">
<input type="hidden" name="custom" value="'.$ordernumberid.'">          
<input type="hidden" name="item_name" value="Lemon Squad - '.$orderitems.' Inspections Ordered" />
<input type="hidden" name="amount" value="'.$orderamount.'" />
<input type="hidden" name="return" value="http://www.lemonsquad.com/thankq.php">
<input type=hidden name="notify_url" value="http://www.lemonsquad.com/checking.php">
<input type="hidden" name="cancel_return" value="http://www.lemonsquad.com/order-inspection.php"/>
<input type="hidden" name="cpp_header_image" value="http://www.lemonsquad.com/images/paypalbanner.jpg"/>
</form>
<script type="text/javascript">
document.payment.submit();
</script>';

}

print '<form method="get" action="order-inspection.php" name="orderform1" id="orderform1" /><input type="hidden" name="process" value="final" /><input type="hidden" name="lsid" value="'.session_id().'" /><input type="hidden" name="paypro" value="paypal" />';
print '<a href="#" onClick="recordOutboundLink(this, \'Outbound Links\', \'paypal.com\');document[\'orderform1\'].submit();return false;"><img src="/images/paypal_checkout.png" /></a>';
print '<br /><br /></form>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:58:53.740

可能是一个快速而肮脏的修复，但为什么不向表单添加一个提交按钮，例如：“如果您在 10 秒内没有被重定向，请单击此处”然后提交吗？

# java - 使用现有（第 3 方）数据模型 (Java) 的领域驱动开发

> ID：16037471
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:26.533
> 
> 标签：java, hibernate, oop, domain-driven-design, anemic-domain-model

首先我想说的是，我开发软件的标准方法可能是许多开发人员的典型……我有行为丰富但没有状态的服务，我有只有状态而没有状态的对象（Bean）行为（我认为这通常被称为贫血域模型）。

我决定在一个新项目中尝试领域驱动设计 (DDD) 方法，但是我有几个问题确实让我很烦恼。

1.  我有一个现有的第 3 方数据库，我的组织使用它（它与业务紧密耦合，对此我无能为力：我不希望有任何评论提及如果第 3 方更改他们的数据模型...我知道！！）。我创建了休眠实体来表示数据，但是我不确定如何将其转换为符合 DDD 原则的内部模型表示（即封装数据访问的富域模型）。

2.  这类问题一定有模式，但我发现很难找到任何模式。这使我相信我可能以错误的方式做某事（即不是通常接近的方式）。

我目前的策略是：

*   识别休眠实体中的关键实体，并尝试将它们与相关的 Values 对象打包在一起（这真的很困难，我相信因为我从数据开始并创建一个域......关于方法的任何建议这也将受到欢迎）
*   对于我确定的每个包，我都创建了一个存储库来管理实体
*   在每个存储库（例如 StudentHibernateRepository）中，我抓住我需要的休眠实体并将它们包装在一个代理类中。
*   在每个代理类中，我添加了我的业务规则，这些规则通过使用包装的休眠实体作为数据源（再次尝试使我的代码行为丰富）。

如果有人有做类似事情的经验，请您分享经验/模式。如果您能反思一下我所采取的策略，那也会很有帮助。

干杯，

爱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:35:14.193

富域模型[只是 DDD 的一部分](http://gorodinski.com/blog/2013/03/11/the-two-sides-of-domain-driven-design/)。将现有且更糟糕但冻结的数据模型调整为丰富的域模型可能不值得。对持久性的无知是 DDD 的一个可取方面，但是在实践中，经常会做出妥协，并且不能简单地推迟诸如持久性之类的技术问题。

代理方法的一个问题是映射复杂性的增加。您的代理实体将不得不委托给底层的 NHibernate 映射对象，并且在某些情况下这可能会变得丑陋。

但是，如果没有域模型，您仍然可以获得 DDD 的许多好处。我会首先尝试识别核心域和任何子域以及相应的有界上下文。然后，将所有用例封装在[应用程序服务](http://gorodinski.com/blog/2012/04/14/services-in-domain-driven-design-ddd/)中，这些服务又将委托给您的 NHibernate 映射实体。您不会受益于行为丰富的实体，但我发现在这些类型的场景中这是一个公平的权衡。

# python - 在 Python 中使用函数返回子字符串

> ID：16037478
> 
> 赞同：1
> 
> 时间：2013-04-16T12:47:38.640
> 
> 标签：python, python-3.x, substring

我觉得我的问题很基础，因为我是第一学期计算机科学专业的学生。

我被要求返回**在**类似于`"abcd5efgh"`. 这个想法是用一个函数给我`"abcd"`。我想我需要使用`.isdigit`，但我不确定如何将它变成一个函数。先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T12:52:59.810

可以用正则表达式来完成，但是如果你已经发现了`isdigit`，为什么不在这种情况下使用它呢？

`return s`如果没有找到数字，您可以修改最后一行以返回其他内容：

```
def string_before_digit(s):
    for i, c in enumerate(s):
        if c.isdigit():
            return s[:i]
    return s # no digit found

print(string_before_digit("abcd5efgh")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:58:55.590

我目前也是一名学生，这就是我将如何解决这个问题：*对于我的学校，我们不允许使用像 python 中那样的内置函数：/

```
 def parse(string):
       newstring = ""
       for i in string:
          if i >= "0" and i <= "9":
             break
          else:
             newstring += i
       print newstring #Can use return if your needing it in another function

     parse("abcd5efgh") 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:03:07.753

一种实用的方法:)

```
>>> from itertools import compress, count, imap
>>> text = "abcd5efgh"
>>> text[:next(compress(count(), imap(str.isdigit, text)), len(text))]
'abcd' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T12:56:29.857

如果您不允许使用正则表达式，可能是因为他们告诉您手动明确地执行此操作，您可以这样做：

```
def digit_index(s):
    """Helper function."""
    # next(..., -1) asks the given iterator for the next value and returns -1 if there is none.
    # This iterator gives the index n of the first "true-giving" element of the asked generator expression. True-giving is any character which is a digit.
    return next(
        (n for n, i in enumerate(i.isdigit() for i in "abc123") if i),
        -1)

def before_digit(s):
    di = digit_index(s)
    if di == -1: return s
    return s[:di] 
```

应该给你你想要的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T12:53:08.910

下面的代码将使用正则表达式为您提供第一个非数字部分。

```
import re
myPattern=re.compile('[a-zA-Z]*')
firstNonDigitPart=myPattern.match('abcd5efgh')
firstNonDigitPart.group()
>>> 'abcd' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-15T20:31:38.693

一种迭代工具方法：

```
>>> from itertools import takewhile
>>> s="abcd5efgh"
>>> ''.join(takewhile(lambda x: not x.isdigit(), s))
'abcd' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T17:04:47.367

一个非常简单的单线，使用[`isdigit`](https://docs.python.org/2/library/stdtypes.html#str.isdigit):)

```
>>> s = 'abcd5efgh'
>>> s[:[i for i, j in enumerate([_ for _ in s]) if j.isdigit()][0]]
'abcd' 
```

# javascript - 将编译后的对象发送到闭包模板

> ID：16037480
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:38.747
> 
> 标签：javascript, google-closure-compiler, google-closure, google-closure-templates

如果我从 JavaScript 调用模板：

```
namespace.template(record); 
```

哪里`record`是一个实例：

```
/** @typedef {{var: string}} */ 
```

我在高级模式下使用 Google Closure Compiler，它会重写`var`，那么我如何`var`在模板中接收？是使用`'var'`而不是`var`防止重写的唯一方法吗？

我在想，理想情况下，如果我可以为模板的`@param`s 提供类型会很好，就像我可以为 JavaScript 代码一样，这应该让编译器知道要使用什么重写的名称......

* * *

看起来这不会发生在`var`. 如果键被命名，它确实会发生`default`，因为 SoyToJsSrcCompiler 生成代码使用`'default'`（仅用于这个特殊名称，而不是我迄今为止使用的任何其他名称），从而防止 Closure Compiler 重命名它，但该属性在 JavaScript 代码中被重命名，因为我使用的是`default`不带引号的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:36:45.447

如果您的模板看起来像：

```
/**
 * Foo
 * @param rec
 */
{template .Foo}
    <div>{$rec.var}</div>
{/template} 
```

然后 SoyToJsSrcCompiler 将生成类似于以下的代码：

```
/**
 * @param {Object.<string, *>=} opt_data
 * @param {(null|undefined)=} opt_ignored
 * @return {string}
 * @notypecheck
 */
namespace.Foo = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.rec.var) + '</div>';
}; 
```

此生成的模板函数旨在与您的源文件一起包含在编译中。由于输出属性访问的形式`rec.var`是编译器应该正确地重命名它。

# highcharts - point.change 不考虑 highstock 中的数据分组

> ID：16037482
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:43.780
> 
> 标签：highcharts, highstock

我正在尝试按照以下示例显示工具提示中的点之间的百分比变化，在 highstock 中：

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/compare/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/demo/compare/)

当我通过添加使用 dataGrouping 时出现问题：

```
dataGrouping: {
    approximation: 'high',
    forced: true,
    units: [[
        'month',
        [1]
    ]]
} 
```

DataGrouping碰巧打破了point.change值，这似乎没有考虑分组并计算数据条目之间的变化，而不是仅仅考虑分组后显示的点。

在这里您可以看到问题： http: [//jsfiddle.net/7bK3Z/](http://jsfiddle.net/7bK3Z/)（通过仔细观察，您会发现百分比变化是错误的）

在此先感谢您的帮助

# oracle - 在 SQL 中嵌入“ad hoc”函数

> ID：16037483
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:54.377
> 
> 标签：oracle, oracle11g

我想以 HH:MM 格式格式化部分日期（两个日期之间的差异）。

为此，我组装了以下逻辑：

```
LTRIM(TO_CHAR(TRUNC((DATE_DIFFERENCE) * 24),'00')) || ':' || LTRIM(TO_CHAR(MOD(ROUND((DATE_DIFFERENCE)*24*60),60),'00')) 
```

我需要将此逻辑应用于多个间隔，因此最好使用函数将关键内容 DRY。

有没有办法在 SQL 语句中嵌入这个逻辑（可能使用 Java），而不必求助于创建 Oracle 函数？

** 编辑 **

DATE_DIFFERENCE 可以是负数并且大于 24 小时。如果负数，我想包括符号，但也代表小时和分钟的差异，即使 DATE_DIFFERENCE 大于 24 小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:16:10.170

从查询访问的 Java 函数比 SQL 函数要多得多，所以我不完全确定你的意思。您不能使用查询声明函数，因为您将混合 SQL 和 PL/SQL 上下文。

您的转换看起来不必要地复杂；你可以这样做：

```
substr(numtodsinterval(date_difference, 'DAY'), 12, 5) 
```

该[`numtodsinterval`函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions117.htm)获取您的日期差异并将其转换为间隔数据类型，并`substr`获取涵盖小时和分钟的部分。

但它的行为略有不同，因为它会截断而不是四舍五入：

```
with tmp as (
    select to_date('2013-04-11 13:17:15', 'YYYY-MM-DD HH24:MI:SS')
        - to_date('2013-04-11 12:57:38', 'YYYY-MM-DD HH24:MI:SS')
        as date_difference
    from dual
    union all
    select to_date('2013-04-11 11:11:35', 'YYYY-MM-DD HH24:MI:SS')
        - to_date('2013-04-10 22:40:45', 'YYYY-MM-DD HH24:MI:SS') 
    from dual
    union all
    select to_date('2013-04-11 00:59:59', 'YYYY-MM-DD HH24:MI:SS')
        - to_date('2013-04-11 00:00:00', 'YYYY-MM-DD HH24:MI:SS') 
    from dual
)
select LTRIM(TO_CHAR(TRUNC((DATE_DIFFERENCE) * 24),'00')) || ':' ||
        LTRIM(TO_CHAR(MOD(ROUND((DATE_DIFFERENCE)*24*60),60),'00')),
    substr(numtodsinterval(date_difference, 'DAY'), 12, 5)
from tmp;

LTRIM(T SUBSTR(NUMTODSINTERV
------- --------------------
00:20   00:19
12:31   12:30
00:00   00:59 
```

这些的完整间隔是：

```
NUMTODSINTERVAL(DATE_DIFFERENCE,'DAY')
---------------------------------------------------------------------------
+000000000 00:19:37.000000000
+000000000 12:30:50.000000000
+000000000 00:59:59.000000000 
```

所以很明显第一个会四舍五入到`00:20`，但截断到`00:19`。正如 Egor Skriptunoff 在评论中指出的那样，您对第三个的计算给出了错误的答案，这就是我现在将其包括在内的原因。

这将四舍五入，但会更长一些：

```
to_char(round(date '2001-01-01' + date_difference, 'MI'), 'HH24:MI') 
```

我用过的文字中使用的实际日期`date '2001-01-01'`无关紧要，它可以是任何一天，`trunc(sysdate)`例如，您可以使用它。它只允许您将差异转换回一个`DATE`对象，然后您可以在其上使用内置[`round(date)`函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions154.htm)。为了比较：

```
with tmp as (...)
select LTRIM(TO_CHAR(TRUNC((DATE_DIFFERENCE) * 24),'00')) || ':' ||
        LTRIM(TO_CHAR(MOD(ROUND((DATE_DIFFERENCE)*24*60),60),'00')),
    substr(numtodsinterval(date_difference, 'DAY'), 12, 5),
    to_char(trunc(date '2001-01-01' + date_difference, 'MI'), 'HH24:MI'),
    to_char(round(date '2001-01-01' + date_difference, 'MI'), 'HH24:MI')
from tmp;

LTRIM(T SUBSTR(NUMTODSINTERV TO_CH TO_CH
------- -------------------- ----- -----
00:20   00:19                00:19 00:20
12:31   12:30                12:30 12:31
00:00   00:59                00:59 01:00 
```

这些实际上都没有给你你想要的东西，一个嵌入式的临时功能，但至少如果逻辑更清晰，那么重用它可能就不那么担心了。不过，将其包装在 SQL 函数中可能仍然不是一个糟糕的选择。

# android - 从 Json 字符串中获取随机项

> ID：16037486
> 
> 赞同：0
> 
> 时间：2013-04-16T12:47:56.837
> 
> 标签：android, json

我有一个 Json 字符串。

每次打开我的应用程序并使用它们时，我都希望获得一个条目。在网上搜索，我创建了这样的东西：

```
ArrayList<HashMap<String, String>> Listads = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> mapads = new HashMap<String, String>();
        String randomValue = null;
        try {
            for (adsTrend tr : objs.getTrends())

            {

                Log.i("ADS",
                        tr.getId() + " - " + tr.getLink() + " - "
                                + tr.getType() + " - " + tr.getEnabled());

                lv_arr[i] = tr.getId() + " - " + tr.getLink() + " - "
                        + tr.getType() + " - " + tr.getEnabled();
                i++;

                mapads.put("id", tr.getId());
                mapads.put("link", tr.getLink());
                mapads.put("type", tr.getType());
                mapads.put("enabled", tr.getEnabled());

                Listads.add(mapads);
                Random generator = new Random();
                Object[] values = mapads.values().toArray();
                randomValue = (String) values[generator.nextInt(values.length)];

            }

            Toast.makeText(SplashActivity.this,"this is my random value : "+randomValue,Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:01:56.673

假设您随机选择的所有内部`JSON`对象都包含相同的字符串（即启用和类型），选择随机对象很容易。您有一个嵌套`JSONArray`的内部`JSONObject`.

(1) 做出`JSONObject`初步反应

```
JSONObject response = new JSONObject(serverResponse); 
```

(2) 提取趋势数组

```
JSONArray trends = response.getJSONArray("trends"); 
```

(3) 获取趋势数组的大小

```
int trendsSize = trends.length(); 
```

(4) 在 0 和数组大小 - 1 之间选择一个随机索引（因为包含 0）

```
Random r = new Random();
int randomObjectIndex = r.nextInt(trendsSize-0) + 0; 
```

应该选择一个以trendSize为界的数字（该数字将不包括在内，因此它实际上是trendSize-1）和0

(5) 获取该位置的对象

```
JSONObject selectedRandomObject = trends.getJSONObject(randomObjectIndex); 
```

(6) 提取你想要的字符串

```
String type = selectedRandomObject.getString("type"); 
```

只要您要查找的字符串在那里，您就不应该收到 JSONException

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:00:29.857

试试这样

```
JSONObject jsonObj = new JSONObject(jsonStr); 

// using JSONArray to grab the trendsfrom under popop 
 JSONArray menuitemArr = popupObject.getJSONArray("trends");  

// lets loop through the JSONArray and get all the items 
for (int i = 0; i < menuitemArr.length(); i++) { 
   // printing the values to the logcat 
      Log.v(menuitemArr.getJSONObject(i).getString("_id").toString()); 
      Log.v(menuitemArr.getJSONObject(i).getString("_link").toString()); 
      Log.v(menuitemArr.getJSONObject(i).getString("Enabled").toString()); 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T12:58:42.520

[将此](https://stackoverflow.com/questions/4228975/how-to-randomize-arraylist)与您的代码相结合：

```
ArrayList<HashMap<String, String>> Listads = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> mapads = new HashMap<String, String>();
        String randomValue = null;
        try {
            for (adsTrend tr : objs.getTrends())

            {

                Log.i("ADS",
                        tr.getId() + " - " + tr.getLink() + " - "
                                + tr.getType() + " - " + tr.getEnabled());

                lv_arr[i] = tr.getId() + " - " + tr.getLink() + " - "
                        + tr.getType() + " - " + tr.getEnabled();
                i++;

                mapads.put("id", tr.getId());
                mapads.put("link", tr.getLink());
                mapads.put("type", tr.getType());
                mapads.put("enabled", tr.getEnabled());

                Listads.add(mapads);
                Collections.shuffle(Listads);
                Listadds.get(0);

                Log.i("ADS",
                        tr.getId() + " - " + tr.getLink() + " - "
                                + tr.getType() + " - " + tr.getEnabled()); 
```

# c++ - 请在此 C++ 代码中提供帮助（可修改的左值）

> ID：16037493
> 
> 赞同：-6
> 
> 时间：2013-04-16T12:48:21.787
> 
> 标签：c++

这段代码有问题，

```
#include <iostream>
#include <conio.h>
using namespace std;

class Circle {
        double x, y, r;
public:
        Circle (double a=1.0, double b=1.0, double c=1.0) { x=a; y=b; r=c; }
        ~Circle() {}
        double Area();
        double getRadius();

};

class Conus {
                double height;
                Circle C;
        public:
                Conus (double , double , double , double );
                ~Conus() {};
                double Volume();
                void setRadius(double );
        };

Conus::Conus(double h, double a, double b, double c)
        : C (a, b, c)
{
        height=h;
}
double Circle::Area() { return r*r*3.14; }
double Conus::Volume() { return C.Area()*height; }
double Circle::getRadius() { return r; }
void   Conus::setRadius(double t ) { C.getRadius()=t; }

int main() {
        double a=2.4, b=3.5, r=5.4, h=5.9;
        Circle Wre (a, b, r) ;
        Conus Konusi (h, a, b, r) ;
        cout << "Wris centris koordinatebia: " << a << " da " << b << ", radiusi: " << r
                << ". Wris fartobia :"  << Wre.Area() << endl;
        cout << "Konusis fudzis centris koordinatebia: " << a << " da " << b << ", radiusi: " << r
                <<endl<< "konusis moculobaa:  " << Konusi.Volume() << endl;
        Konusi.setRadius(r+3);
        cout << Konusi.Volume() << endl;

        _getch();
        return 0;
} 
```

它说 C.getRadius() 不是可修改的左值。有人可以帮忙吗..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:58:17.070

`getRadius()`返回对象半径的副本，而不是对其的引用，因此您不能将其用于修改。所以下面的表达式：

```
C.getRadius()=t; 
```

尝试修改临时副本，这是不允许的。（它不允许的原因是，否则该代码将编译但没有任何用处，给出一个微妙的错误，而不是一个容易识别的编译错误）。

有多种选择：

*   返回参考，`double & getRadius();`
*   添加一个`void setRadius(double);`函数，并将其用于修改
*   公开半径；除非有必要强制执行不变量，否则使用访问器没有什么意义。

如果您确实需要访问器函数，则应保留现有的`double getRadius()`，但声明它`const`。这将允许您获取但不能修改常量对象的半径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:49:50.187

这是一个不正确的分配，您正在尝试修改`r`not`r`本身的临时副本：

```
C.getRadius()=t; 
```

解决此问题的一种方法是将此方法添加到`Circle`：

```
void setRadius( double t ){ r = t ; } 
```

并调用：

```
void   Conus::setRadius(double t ) { C.setRadius( t ); } 
```

这是一篇很棒的文章[理解 C 和 C++ 中](http://eli.thegreenplace.net/2011/12/15/understanding-lvalues-and-rvalues-in-c-and-c/)的左值和右值，第一个示例与您刚才面临的问题相似。

# python - x, = ... - 这个尾随逗号是逗号运算符吗？

> ID：16037494
> 
> 赞同：60
> 
> 时间：2013-04-16T12:48:22.343
> 
> 标签：python, matplotlib, tuples

我不明白变量**行**后的逗号是什么意思： http: [//matplotlib.org/examples/animation/simple_anim.html](http://matplotlib.org/examples/animation/simple_anim.html)

```
line, = ax.plot(x, np.sin(x)) 
```

如果我删除逗号并且变量“line”变成变量“line”，那么程序就会被破坏。来自上面给出的 url 的完整代码：

```
import numpy as np
import matplotlib.pyplot as plt
import matplotlib.animation as animation

fig = plt.figure()
ax = fig.add_subplot(111)

x = np.arange(0, 2*np.pi, 0.01)        # x-array
line, = ax.plot(x, np.sin(x))

def animate(i):
    line.set_ydata(np.sin(x+i/10.0))  # update the data
    return line,

#Init only required for blitting to give a clean slate.
def init():
    line.set_ydata(np.ma.array(x, mask=True))
    return line,

ani = animation.FuncAnimation(fig, animate, np.arange(1, 200), init_func=init,
    interval=25, blit=True)
plt.show() 
```

根据[http://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences](http://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences)，变量后的逗号似乎与仅包含一项的元组有关。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-16T12:49:39.093

`ax.plot()`返回一个包含*一个元素的**元组*。通过将逗号添加到赋值目标列表中，您要求 Python 解包返回值并将其依次分配给左侧命名的每个变量。

 *大多数情况下，您会看到这被应用于具有多个返回值的函数：

```
base, ext = os.path.splitext(filename) 
```

但是，左侧可以包含任意数量的元素，并且只要它是元组或变量列表，就会进行解包。

在 Python 中，逗号使某些东西成为元组：

```
>>> 1
1
>>> 1,
(1,) 
```

在大多数位置，括号是可选的。您可以在不改变含义的情况下*用*括号重写原始代码：

```
(line,) = ax.plot(x, np.sin(x)) 
```

或者您也可以使用列表语法：

```
[line] = ax.plot(x, np.sin(x)) 
```

或者，您可以将其重铸为*不*使用元组解包的行：

```
line = ax.plot(x, np.sin(x))[0] 
```

或者

```
lines = ax.plot(x, np.sin(x))

def animate(i):
    lines[0].set_ydata(np.sin(x+i/10.0))  # update the data
    return lines

#Init only required for blitting to give a clean slate.
def init():
    lines[0].set_ydata(np.ma.array(x, mask=True))
    return lines 
```

有关分配如何与解包相关的完整详细信息，请参阅[分配语句](https://docs.python.org/3/reference/simple_stmts.html#assignment-statements)文档。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-16T12:52:02.287

如果你有

```
x, = y 
```

您解压缩长度为 1 的列表或元组。例如

```
x, = [1] 
```

将导致`x == 1`，而

```
x = [1] 
```

给 `x == [1]`*

# mysql - 在 where 子句中的 Max(datetime_column)

> ID：16037513
> 
> 赞同：0
> 
> 时间：2013-04-16T12:49:23.703
> 
> 标签：mysql, max, where, prestashop

我创建了一个查询来更新一个字段。但我需要更改最后一条记录的值。在我的**ps_order_history**表中有**date_add**列。它的类型是*datetime*。如果不能在 where 子句中使用 max() 函数，如何获得最后一条记录？这是我到目前为止得到的（有一些固定的参数，但这只是为了测试。我将在 PHP 代码中更改它）：

```
UPDATE ps_order_history AS h 
INNER JOIN ps_order_detail d ON d.id_order = h.id_order
INNER JOIN ps_orders o ON o.id_order = h.id_order
SET h.id_order_state = 18
WHERE d.product_name = "Academia Mastermaq"

AND o.id_customer = (
SELECT id_customer
FROM ps_customer
WHERE firstname = "Cristiano"
AND lastname = "Ferreira dos Santos"
)

AND max(h.date_add) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:55:01.187

你可以通过使用 Order by xxx DESC LIMIT 1 来做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:44:06.447

知道了！我发现了 MySQL 中的变量并使用一个变量来存储最大 id_order_history （我意识到我不需要 date_add 列，因为最大 id_order_history 是最后一个数据）。之后，我更新了表格。

这是查询：

```
SET @maxid = 
(
    SELECT max(h.id_order_history)

    FROM ps_order_history h

    WHERE h.id_order =
    (
        SELECT max(p.id_order)
        FROM ps_orders p
        INNER JOIN ps_order_detail d ON d.id_order = p.id_order

        WHERE p.id_customer = 
        (
            SELECT id_customer
            FROM ps_customer
            WHERE firstname = '$firstname'
            AND lastname = '$lastname'
            LIMIT 1
        )

        AND d.product_name = '$nome_produto'
        AND p.module = 'pagseguro'

        LIMIT 1
    )
);

UPDATE ps_order_history h
SET h.id_order_state = $status
WHERE h.id_order_history = @maxid; 
```

# php - PHP & JSON：如何从另一个值等于 xyz 的地方获得一个值？

> ID：16037535
> 
> 赞同：0
> 
> 时间：2013-04-16T12:50:22.687
> 
> 标签：php, json

我正在接收 JSON 并尝试使用 PHP 解释一些值。

JSON 转储的示例片段：

```
["11811"]=>
  object(stdClass)#15 (11) {
    ["parent_area"]=>
    NULL
    ["generation_high"]=>
    int(19)
    ["all_names"]=>
    object(stdClass)#16 (0) {
    }
    ["id"]=>
    int(11811)
    ["codes"]=>
    object(stdClass)#17 (3) {
      ["ons"]=>
      string(2) "08"
      ["gss"]=>
      string(9) "E15000008"
      ["unit_id"]=>
      string(5) "41421"
    }
    ["name"]=>
    string(10) "South East"
    ["country"]=>
    string(1) "E"
    ["type_name"]=>
    string(15) "European region"
    ["generation_low"]=>
    int(1)
    ["country_name"]=>
    string(7) "England"
    ["type"]=>
    string(3) "EUR"
  } 
```

由于有很多（嵌套）数据，我需要获取 ["name"] 的值，其中 ["type_name"] == 'European region'。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T15:22:20.863

你可以使用**array_filter()**

```
$data_array = array(...);
function is_european($data) {
   return $data->type_name == 'European region';
}
$filtered = array_filter($data_array,'is_european'); 
```

然后使用过滤后的数组来获取值。

也许更好的方法是使用[JsonPath](http://goessner.net/articles/JsonPath/)，就像这样，假设您的数组是解码 JSON（对象）的结果：

```
$names = jsonPath($data_object, "$.[?(@['type_name'] == 'European region')].name"); 
```

这个我自己没试过，可能需要修正一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T13:00:42.793

尝试这个：

```
<?php
$json = JSON_decode(str,true);
$arr  = Array();
foreach($json as $f) {
 /* eg. $f = $json["11811"] */
 if($f['type_name'] == 'European region') {
  $arr[] = $f['name'];
 }
}
?> 
```

# javascript - 如何在 JavaScript MVC3 Razor 视图引擎 .cshtml 中创建会话变量

> ID：16037538
> 
> 赞同：4
> 
> 时间：2013-04-16T12:50:28.217
> 
> 标签：javascript, asp.net-mvc-3, razor

我正在使用带有 Razor View 引擎的 MVC3，

我有 .cshtml 页面，其中我有一个 JavaScript 函数，在该 JavaScript 函数中，我想创建 Session 变量并在同一个 JavaScript 函数中检索该会话。

如何实现这一点..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T12:59:49.670

## 描述

会话位于服务器端，因此您需要调用服务器才能设置或检索会话变量。

只需发布到控制器并在那里设置 Session 变量。

## 样本

**jQuery**

```
$(function () {
    $.post('/SetSession/SetVariable', 
           { key : "TestKey", value : 'Test' }, function (data) 
    {
        alert("Success " + data.success);
    });
}); 
```

**Mvc 控制器**

```
public class SetSessionController : Controller
{
    public ActionResult SetVariable(string key, string value)
    {
        Session[key] = value;

        return this.Json(new { success = true });
    }
} 
```

## 更多信息

*   [在 MVC 3 应用程序中使用 JQuery 通过 Ajax 保存和检索会话数据](http://dotnetslackers.com/articles/aspnet/Save-and-retrieve-Session-data-via-Ajax-using-JQuery-in-an-MVC-3-application.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-01-12T07:14:25.737

使用 javascript 代码添加会话。只是必须添加此代码

```
sessionStorage.setItem("MyId", 123); 
```

您可以使用此代码调用添加的会话

```
var value = sessionStorage.getItem("MyId"); 
```

# java - Android API 8 中 CalendarContract 的替代方案？

> ID：16037539
> 
> 赞同：2
> 
> 时间：2013-04-16T12:50:29.497
> 
> 标签：java, android, android-calendar, android-event

我的应用程序需要将事件添加到内部电话 Caledar 的功能。在 API 14 中，可以通过 CalendarContract 和下面的代码一样。API 8 中的替代方案是什么？或者是否可以在代码中检测 API 并根据版本打开/关闭它？

```
 Intent intent = new Intent(Intent.ACTION_INSERT);
    intent.setType("vnd.android.cursor.item/event");
    intent.putExtra(Events.TITLE, "Learn Android");
    intent.putExtra(Events.EVENT_LOCATION, "Home suit home");
    intent.putExtra(Events.DESCRIPTION, "Download Examples");

    // Setting dates
    GregorianCalendar calDate = new GregorianCalendar(2012, 10, 02);
    intent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,
      calDate.getTimeInMillis());
    intent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME,
      calDate.getTimeInMillis());

    // Make it a full day event
    intent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true);

    // Make it a recurring Event
    intent.putExtra(Events.RRULE, "FREQ=WEEKLY;COUNT=11;WKST=SU;BYDAY=TU,TH");

    // Making it private and shown as busy
    intent.putExtra(Events.ACCESS_LEVEL, Events.ACCESS_PRIVATE);
    intent.putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY);
    startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:58:05.610

正如您所说，这仅在 API 14 上可用，并且在 API 8 上没有其他选择。过去您能做的最好的事情就是直接访问谷歌日历的 web-api。

因此，一般来说，最好的方法是使用 SDK_INT 查看 API 版本并根据需要启用/禁用该功能。

# xml - Coldfusion，使用带有动态soap body xml的soap调用Web服务

> ID：16037540
> 
> 赞同：1
> 
> 时间：2013-04-16T12:50:34.070
> 
> 标签：xml, web-services, soap, coldfusion

我需要从我的coldfusion 应用程序中通过HTTP 网络服务调用soap。这涉及到用户提交一个表单（有很多字段），然后代码应该将所有这些信息传递给 web 服务并获得一些响应。所以一直在为此制作原型。

我一直在浏览这个论坛，并且已经看到了很多代码片段，但不知何故，似乎都在 xml 部分中传递了硬编码值，但我需要从变量传递值。当我尝试传递变量等时，代码不会将它们视为变量，而是将其视为文本值。

我的网络服务调用代码是：

```
<cfsavecontent variable="soap"><?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope 
        xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://localhost:8500/Credit Card Soap Web Service"><!---1 this is the cfc location--->

 <!---Optional
    <soapenv:Header>
    <setInit>1</setInit>
    <!--- 2 header param --->
    </soapenv:Header>--->
    <soapenv:Body>
        <authorize soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" >
        <!---3 cfc method name --->
            <name>#elemName.XmlText#</name>
            <address>1010 Pine St</address>
            <zip>110001</zip>
            <state>MO</state>
            <country>USA</country>
            <cardtype>Visa</cardtype>
            <cardnumber>123123123</cardnumber>
            <expiry>10-12-2020</expiry>
            <amount>50000</amount>
        </authorize>
       </soapenv:Body>
</soapenv:Envelope>
</cfsavecontent>

<cfhttp url="http://localhost:8500/Credit Card Soap Web Service/Credit Card Soap Web Service authorization.cfc" method="post">
    <cfhttpparam type="header" name="content-type" value="text/xml">
    <cfhttpparam type="header" name="SOAPAction" value="">
    <cfhttpparam type="header" name="content-length" value="#len(soap)#">
    <cfhttpparam type="header" name="charset" value="utf-8">
    <cfhttpparam type="xml" name="message" value="#trim(soap)#">
</cfhttp>

<cfdump var="#xmlparse(cfhttp.FileContent)#"> 
```

* * *

此时的 web 服务只是简单地返回传递给它的值。仍然试图先解决这个问题。

注意代码：

```
>  <name>#elemName.Text#</name> 

>  <address>1010 Pine St</address> 
```

两行都以相同的方式处理..作为实际值。XmlText 设置为上述值，这不会从变量中选择值。

```
 <cfdump var="#xmlparse(cfhttp.FileContent)#"> 
```

这打印：

```
 item XmlText  
key XmlText NAME 
XmlAttributes struct 
xmlns:soapenc http://schemas.xmlsoap.org/soap/encoding/  
xsi:type soapenc:string  

**value XmlText #elemName.XmlText#** 
XmlAttributes struct 
xmlns:soapenc http://schemas.xmlsoap.org/soap/encoding/  
xsi:type soapenc:string 
```

请让我知道我在这里做错了什么。我是 CF 新手，但我的基础知识仍在改进。

另外我怎样才能将我的编码样式更改为“文档”

如果您需要我提供更多信息，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:02:02.660

为了传递变量的值，您需要做的就是用标签包装包含在`<cfsavecontent>`标签中的 ColdFusion 变量`<cfoutput>`。像这样：

```
 <name><cfoutput>#elemName.XmlText#</cfoutput></name> 
```

如果您有多个 ColdFusion 变量，您还可以将标签放置在`<cfoutput>`包含它们的代码块周围，而不是围绕每个单独的变量。像这样：

```
<soapenv:Body>
    <cfoutput>
        <authorize soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" >
            <!---3 cfc method name --->
            <name>#elemName.XmlText#</name>
            <address>#elemAddress.XmlText#</address>
            <zip>#elemZip.XmlText#</zip>
            <state>#elemState.XmlText#</state>
            <country>#elemCountry.XmlText#</country>
            <cardtype>#elemCardType.XmlText#</cardtype>
            <cardnumber>#elemCardNumber.XmlText#</cardnumber>
            <expiry>#elemCardDate.XmlText#</expiry>
            <amount>#elemAmount.XmlText#</amount>
        </authorize>
    </cfoutput>
</soapenv:Body> 
```

在您的`<cfhttpparam>`标签中，您还应该匹配根据变量的*修剪*长度确定内容长度的逻辑。`soap`因为那是您在消息中传递的内容。将`trim`函数添加到内容长度标头。像这样：

```
<cfhttpparam type="header" name="content-length" value="#len(trim(soap))#"> 
```

# javascript - sliderButton.offset().left 和 event.pageX 完全不同

> ID：16037544
> 
> 赞同：1
> 
> 时间：2013-04-16T12:50:38.127
> 
> 标签：javascript, jquery

所以我有一个按钮，我希望能够用鼠标左右拖动（类似于滑块）。问题是，当我在页面加载和鼠标按下时打印出按钮的左偏移量（因此当用户单击按钮时），我得到不同的结果：

```
$(function() {
    var sliderButton = $('.slider-button');
    var initialLeft = sliderButton.offset().left;
    alert(initialLeft); // This returns 810
    var maximumLeft = initialLeft + 235;
    sliderButton.mousedown(function(e) {
        alert(e.pageX); // 576
        sliderButton.bind('mousemove', function(e) {
            var left = e.pageX;
            if (left >= initialLeft && left <= maximumLeft) {
                sliderButton.offset({left: left});
            }
        })
    }).bind('mouseup', function() {
        sliderButton.unbind('mousemove');
    });
}); 
```

第一个警报返回：

```
810 
```

第二个：

```
576 
```

在 mousedown 事件中，光标与按钮位于同一位置，所以它不应该返回 810 吗？我不明白这种行为。

# ios - iPad 故事板中的主细节

> ID：16037546
> 
> 赞同：0
> 
> 时间：2013-04-16T12:50:47.343
> 
> 标签：ios

我在主细节方面遇到问题我知道masterDetail需要成为情节提要中的初始ViewController并且我想在按下按钮时制作一个菜单我加载`MasterDetail`......我到目前为止尝试过的内容：

我把`MENU ViewController`故事板称为例如`MENU.storyboard` 在`MasterDetail viewController`另一个故事板中调用`MainStory.storyboard` 然后从构建阶段我选择故事板的主要条目是`MENU` 最终在`MENU`类中（例如`MenuClass.m`）在按下时为按钮添加动作

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStory" bundle:nil];
MyNewViewController *myVC = [storyboard instantiateViewControllerWithIdentifier:@"myViewCont"]; 
```

然后添加这个视图。

问题是：当我在 iphone StoryBoard 中执行此步骤时，它可以完美运行。但是当我在 iPad StoryBoard 中执行相同的简单步骤时，代码崩溃（甚至在显示在 MENU storyBoard 之前）......当我在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions     ->appDelegate 
```

出现菜单故事板，但是当按下按钮加载 MasterDetail 时，我当然会崩溃，因为我在 appDelegate 中注释了 MasterDetail 初始化代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:09:28.677

我认为只使用 1 个故事板并将您的菜单设置`ViewController`为`rootViewController`应用程序会更容易。然后使用模态 segue将菜单链接`ViewController`到Master Detail 视图的主视图。`NavigationController`

![在此处输入图像描述](https://i.stack.imgur.com/aAAqC.png)

# c# - 在任务计划程序中运行程序时无法验证凭据

> ID：16037549
> 
> 赞同：2
> 
> 时间：2013-04-16T12:50:51.837
> 
> 标签：c#, authentication

我创建了一个程序来多次运行 certutil.exe 并分析输出。如果我在登录 PC 时运行该程序，它会正常运行，但是当我在任务计划程序中使用相同的凭据运行它并设置为在我未登录时运行时，它会失败。如果我安排它仅在我登录时运行，它就会正确运行。

该程序使用 Process 类来运行 certutil.exe 并捕获输出。失败的部分在提供给 Process 实例的不同凭据下运行。该程序需要访问不同域中的证书信息。我在 StartInfo 和 Process 中尝试了各种选项，例如 LoadUserProfile。因此，在我的常规凭据下运行的部分可以正常工作；在其他域的凭据下运行的部分失败，但仅在我未登录时计划运行时。

非常感谢任何解决此问题的建议。

# jquery - .each 方法中的 .gmap('search')，获取回调函数中的每个对象

> ID：16037550
> 
> 赞同：1
> 
> 时间：2013-04-16T12:51:01.937
> 
> 标签：jquery, cordova, jquery-mobile, jquery-gmap3

我使用 jquery-mobile 和 gmap-plugin 开发 PhoneGap 应用程序。我有一些代码和一些麻烦。

```
 str = '';
    db.transaction(function(t){     
      t.executeSql('SELECT name,address FROM table', [], function(t, res) {
        for(var i=0; i<res.rows.length; i++) {
          str += '<option selected="" value="'+res.rows.item(i).address+'">'+      
              res.rows.item(i).name + '</option>'; 
        }
      });
    },null,function(){
      $('#selectMenu').html(str);
      $('#selectMenu').selectmenu("refresh");
      $('#selectMenu').on('change', function () {
        setMarks();
      });
    });

function setMarks (){
  $('#map_canvas').gmap('clear', 'markers');
  var el;

  $("#selectMenu option:selected").each(function () {
    el = $(this);
    $('#map_canvas').gmap('search', { 'address': el.val() }, function(results, status) {    
        if ( status === 'OK' ) {
                $('#map_canvas').gmap('addMarker', { 'position': results[0].geometry.location, 'bounds': true,
                    'html': "<h3>"+el.text()+"</h3><p>"+el.val()+"</p>"},
                            function(map, marker) {
                    $(marker).click(function() {                                  
                                   $('#map_canvas').gmap('openInfoWindow',{'content': $(this).attr('html')}, this); 
                               return false;
                    });
              });       
        }
    });  
  });
} 
```

在方法*搜索*对象的回调函数中， *el*是我所选元素集合中的最后一个，但我想查看每个对象。也许有人面临这样的问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:23:05.013

我决定做不同的。不确定这是不是最好的方法，但它对我有用。我使用全局标记数组。在标记单击事件的回调函数中，我得到当前标记的索引。通过这个索引，我可以从选择菜单中获得选项，*然后**输入*我需要的*infoWindow*信息。

 *```
var arMarkers = new Array();

function arMarkersIndexOf(o) { 
    for (var i = 0; i < arMarkers.length; i++) {
        if (arMarkers[i].getPosition() == o.getPosition()) {
            return i;
        }
    }
    return -1;
}

var str = '';
db.transaction(function(t){     
   t.executeSql('SELECT name,address FROM table', [], function(t, res) {
            for(var i=0; i<res.rows.length; i++) {
              str += '<option selected="" value="' +
                    res.rows.item(i).address + '" data-index="' + i.toString() + '" data-seq="' + res.rows.item(i).MainOrg + '">' + 
                    res.rows.item(i).name + '</option>';                    
                $('#map_canvas').gmap('search', { 'address': res.rows.item(i).address }, 
                       function(results, status) {
                          if ( status === 'OK' ) {
                            $('#map_canvas').gmap('addMarker', { 'position': results[0].geometry.location, 'bounds': true}, 
                              function(map, marker) {
                                 arMarkers.push(marker);
                                 $(marker).click(function() {
                                     var i = arMarkersIndexOf(this);
                                     $('#map_canvas').gmap('openInfoWindow', {'content': '<h3>' + $('#selectMenu option[data-index="' + i.toString() + '"]').text() + '</h3>' + 
                                                    '<h4>' + $('#selectMenu option[data-index="' + i.toString() + '"]').data('seq') + '</h4>' +
                                                    '<p>' + $('#selectMenu option[data-index="' + i.toString() + '"]').val() + '</p>'}, this); 
                                     return false;
                                 });
                             });  
                         }
                       });  
            }
        });
    },null,function(){
        $('#selectMenu').html(str);
        $('#selectMenu').selectmenu("refresh");         
    }); 
```*

# scala - 为什么在这种情况下需要过滤器实现？

> ID：16037551
> 
> 赞同：2
> 
> 时间：2013-04-16T12:51:04.470
> 
> 标签：scala, filter, foreach, pattern-matching

以下代码无法编译：

```
scala> case class T3( x:Int,y:Int,z:Int) { def foreach[U](f:((Int,Int,Int)) => U) = f( (x,y,z) ) }
defined class T3

scala> for ( (x,y,z) <- T3(1,2,3) ) { println (x,y,z) }
<console>:10: error: value filter is not a member of T3
              for ( (x,y,z) <- T3(1,2,3) ) { println (x,y,z) }
                                 ^ 
```

我不明白为什么这段代码需要过滤器，因为它总是匹配的？

**编辑** 对于我的问题，添加一个无意义的过滤器实现就足够了：

```
scala> case class T3( x:Int,y:Int,z:Int) { def foreach[U](f:((Int,Int,Int)) => U) = f( (x,y,z) )
     | def filter(p: ((Int,Int,Int)) => Boolean) = this }
defined class T3

scala> for ( (x,y,z) <- T3(1,2,3) ) { println (x,y,z) }
(1,2,3)

scala> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:07:23.137

根据[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，除非模式是“无可辩驳的”，否则生成器`p <- e`将被转换为调用。`withFilter`一个模式不可辩驳的三个条件：

1.  `p`是可变模式。

显然，情况并非如此。

1.  `p`是一个类型化的模式`x : T'`和`'T <: T'`，其中`e : T`.

同样，这显然不是这种情况。

1.  `p`是构造函数模式`c(p1,...,pn)`，类型`T`是类的实例，类型`c`的主构造函数（第 5.3 节）`T`具有参数类型`T1, ..., Tn`，并且每个类型`pi`都是无可辩驳的`Ti`。

~~这里的问题是，虽然`(x,y,z)`是 的构造函数模式`Tuple3`，但类型`T`（此处`T3`）不是的实例`Tuple3`- 只有`foreach`方法的返回类型是。不可辩驳的模式转换是表达式脱糖的第一步`for`，因此在考虑返回类型 to 之前`foreach`。~~

~~因此，这种模式不能被证明是无可辩驳的。~~

编辑：虽然根据规范，上述内容似乎是有道理的，但我看不出它*实际上*有什么意义！例如，我的解释表明以下模式应该是无可辩驳的：

```
(a,b) <- (1,2) 
```

尽管它没有任何意义！它显然是在寻找一些东西来确定结果类型以检查不可辩驳性，而且似乎这就是`withFilter`方法。这表明它需要一种`withFilter`方法来确定是否`withFilter`需要该方法......

周围似乎有各种各样的错误：例如[https://github.com/scala/scala/pull/1893 。](https://github.com/scala/scala/pull/1893)我猜这也许是另一个破案子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:41:53.590

这将起作用：

```
 for ( T3(x,y,z) <- List(T3(1,2,3)) ) { println (x,y,z) } 
```

还有这个：

```
 for ( T3(x,y,z) <- Some(T3(1,2,3)) ) { println (x,y,z) } 
```

似乎`for`理解期望装箱值。

# confirmation - 如何在凯特编辑器中强制某种“关闭前确认”选项？

> ID：16037554
> 
> 赞同：3
> 
> 时间：2013-04-16T12:51:08.317
> 
> 标签：confirmation, kate

我经常处理在 Kate 中打开的大量文件。然后，当关闭我正在编辑的一个文件时，我不自觉地按下了 alt+F4，然后 Kate 愉快地关闭了我正在编辑的所有打开的文件，让我再次大喊大叫，并用键盘和硬件进行另一次弹性测试。 .

当我尝试一次关闭多个文件时，是否有办法强制 Kate 向我显示“关闭前确认”对话框，例如 Firefox 那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:43:29.423

**会话选择器**可能是一种解决方法。您在关闭 Kate 之前打开的所有文件都将重新打开。

要启用此功能，请转到`Settings`- `Configure Kate`。在`Application`-`Sessions`选择其中一种行为：

*   加载上次使用的会话
*   手动选择会话

然后，您需要手动保存会话（仅在您第一次使用此会话时）。在`Sessions`-下执行此操作`Save Session as`。当您稍后重新打开该会话并对该会话进行更改（打开文件、关闭文件）时，这些更改将自动保存。

# java - 如何将 Access-Control-Allow-Origin 添加到码头服务器

> ID：16037558
> 
> 赞同：9
> 
> 时间：2013-04-16T12:51:19.620
> 
> 标签：java, jetty, embedded-jetty

我有一个码头服务器来运行我的网络服务。最近我开发了一个使用 Web 服务的程序并遇到了 Access-Control-Allow-Origin 问题。

如何将 Access-Control-Allow-Origin: * 添加到码头嵌入式服务器。

下面是 webappcontext 代码。

```
public WebAppContext buildWebAppContext(){
    webAppContext = new WebAppContext();
    webAppContext.setDescriptor(webAppContext + "/WEB-INF/web.xml");
    webAppContext.setResourceBase(".");
    webAppContext.setContextPath("/posApplication");
    webAppContext.setAttribute("webContext", webAppContext);
    return webAppContext;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-16T17:38:41.577

[`org.eclipse.jetty.servlets.CrossOriginFilter`](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/servlets/CrossOriginFilter.html)在您的网络应用程序中设置。

关于该主题的旧问题/答案：[https ://stackoverflow.com/a/8454168/775715](https://stackoverflow.com/a/8454168/775715)

请参阅有关[CrossOriginFilter 使用](http://www.eclipse.org/jetty/documentation/current/cross-origin-filter.html)的Jetty[文档中心](http://www.eclipse.org/jetty/documentation/)：

**快速开始**

1.  [获取一份jetty-servlets.jar](http://search.maven.org/#search%7Cgav%7C1%7Cg:%22org.eclipse.jetty%22%20AND%20a:%22jetty-servlets%22)的副本。

2.  把`jetty-servlets.jar`你的`WEB-INF/lib`

3.  将以下内容添加到您的`WEB-INF/web.xml`

```
<filter>
    <filter-name>cross-origin</filter-name>
    <filter-class>org.eclipse.jetty.servlets.CrossOriginFilter</filter-class>
    <init-param>
        <param-name>allowedOrigins</param-name>
        <param-value>*</param-value>
    </init-param>
    <init-param>
        <param-name>allowedMethods</param-name>
        <param-value>GET,POST,HEAD</param-value>
    </init-param>
    <init-param>
        <param-name>allowedHeaders</param-name>
        <param-value>X-Requested-With,Content-Type,Accept,Origin</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>cross-origin</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T06:45:47.270

此 CORS 问题的解决方法是在 chrome/chromium 浏览器中使用扩展程序。这是扩展的链接。

[https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi?utm_source=chrome-app-launcher-info-dialog](https://chrome.google.com/webstore/detail/allow-control-allow-origi/nlfbmbojpeacfghkpbjhddihlkkiljbi?utm_source=chrome-app-launcher-info-dialog)

无需在服务器端代码中添加任何标题（这显然可以工作，但可能不是一个好主意）。

# java - 如何从 webview 共享 html 内容？

> ID：16037564
> 
> 赞同：0
> 
> 时间：2013-04-16T12:51:31.147
> 
> 标签：java, android

请告诉我如何分享 webview 的内容。我已经使用**myjavascriptinterface**类进行注册，但我没有存储 webview 的内容。请正确指导，以便我可以正确理解我的 javascriptinterface 类的用法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:57:50.100

目前尚不清楚您想具体分享什么。以下是常见的注意事项。

在最简单的情况下，您可以只共享一个 URL。您可以通过`webview.getUrl()`方法获得它。

如果您想共享整个文档，那么下一个问题是您希望共享哪些设备。如果都是关于 Android 的，那么您可以使用`webview.saveWebArchive()`方法来获取一个准备好发送到另一个 Android 设备的 XML 文件（该文件包含具有所有资源的文档内容）。

如果您想在任意平台上共享文档，您可以自己访问 html-code。例如，`captureWebDocument(text)`在您的 Java 接口中定义一个方法，在 webview 中为 JavaScript 扩展注册。然后子类`WebViewClient`和覆盖`onPageFinished()`方法 - 一个例子可以在[这里](https://stackoverflow.com/questions/9634409/run-custom-javascript-code-after-loading-any-website)找到。

在您应该执行的方法中：

```
webview.loadUrl("javascript:injectedJS.captureWebDocument(document.documentElement.innerHTML)"); 
```

因此，您将获得 Java 类中的文档内容，并且可以继续以任何合适的方式共享它。提取任何包含的资源（例如图像）将需要更多编码。

另一种可能性是在注入的 JavaScript 中执行所有共享功能（包括将数据上传到服务器，如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:41:04.320

您好，如果您的意思是 Contents HTML 代码，我建议您使用 Jsoup 库，它的语法非常简单：

```
Document document = JSoup.connect("http://example.com").get(); 
```

当你调用它时： String html = document.getHtml(); 它返回文档的 html 字符串。

# css - 通过将图像高度设置为容器高度，使图像适合其容器

> ID：16037566
> 
> 赞同：4
> 
> 时间：2013-04-16T12:51:37.643
> 
> 标签：css, image, aspect-ratio

假设我有 container.a，它有一些以像素为单位的高度，假设我在 container.a 中有另一个 container.b，它是 container.a 的 80%，现在说我想将一个以像素为单位的高度的图像放入容器中.b，如何使图像成为container.b的高度，然后使用CSS保持宽度纵横比？

```
<div class="container.a">
  <div class="container.b">
    <img class="image.a" src="my_image.png" />
  </div>
</div>

.container.a { width: 200px; height: 300px; }
.container.b { width: 80%; height: 80%; }
.image.a { ? } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:53:37.467

给图像的 100% 宽度

```
 .image.a{width:100%;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:58:47.997

用这个：

```
.image.a { height:100%; width:auto } 
```

# php - 如何在 PHP 中使用 OCI8 执行存储过程

> ID：16037569
> 
> 赞同：1
> 
> 时间：2013-04-16T12:51:40.680
> 
> 标签：php, oracle, stored-procedures, oci8

有人可以帮助我如何通过 php 调用 oracle 中的存储过程吗？我有存储过程的示例

```
CREATE OR REPLACE PROCEDURE view_institution(
       c_dbuser OUT SYS_REFCURSOR)
IS
BEGIN
  OPEN c_dbuser FOR
  SELECT * FROM institution;
END; 
```

上述名为 view_instituion 的存储过程用于显示表机构上的所有记录。有人可以教我在 php.ini 中调用上述存储过程吗？我是玩存储过程的新手

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T13:04:13.657

**如果您使用 PDO 引擎**

```
/* Define output */
$output = "";    

/* The call */
$stmt= $pdo->prepare("CALL view_institution(?)");

/* Binding Parameters */
$stmt->bindParam($parameter1, $output);

/* Execture Query */
$stmt->execute();

/* Get output on the screeen */
print_r($output, true); 
```

**如果你使用 oci**

```
/* The call */
$sql = "CALL view_institution(:parameter)";

/* Parse connection and sql */
$stmt= oci_parse($conn, $sql);

/* Binding Parameters */
oci_bind_by_name($stmt, ':parameter', $yourparameter) ;

/* Execute */
$res = oci_execute($stmt);

/* Get the output on the screen */
print_r($res, true); 
```

# kentico - Kentico - 更新媒体库中的图像会导致链接断开

> ID：16037571
> 
> 赞同：0
> 
> 时间：2013-04-16T12:51:45.280
> 
> 标签：kentico

我在媒体库中有一张图片，我在几个不同的页面上使用它。我正在使用 EditableImage 和 EditableText Web 部件链接到图像。
当我尝试使用媒体库工具中的更新链接替换媒体库中的图像时，页面上的图像链接没有得到更新。它们仍然链接到不再存在的旧图像的 url。
如果文件名相同，它似乎可以工作，所以我假设 web 部件只引用媒体库图像的 FilePath 而不是引用数据库记录。我是否使用不正确，还是有更好的方法在页面上包含媒体库图像？当我更新媒体库中的图像时，我也需要更新图像的链接。

我正在使用 Kentico v6.0.27 (SP1)‎ 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:53:44.623

您正在正确使用它并且行为是正确的。您可以使用“[使用永久 URL](http://devnet.kentico.com/docs/devguide/media_library_settings.htm) ”设置来更改此行为。它位于 CMSSitemanager->Settings->Content->Media。我已经使用可编辑的图像 Web 部件对其进行了测试，它可以根据您的要求工作。

# java - 带有条件的休眠查询缓存

> ID：16037574
> 
> 赞同：0
> 
> 时间：2013-04-16T12:51:56.623
> 
> 标签：java, mysql, hibernate, ehcache

我想有一点我还没有理解。我有一个班级女巫在属性中有 3 个元素集合

```
public class Pays implements Serializable{
private static final long serialVersionUID = -8767337896773261244L;
/**
 * the id of the country
 */
private long id;

/**
 * name of the country
 */
private String nom;
/**
 * The region of the country
 */
private Region region;
/**
 * Relations between a country and a composant
 */
private Set<PaysComposants> pc = new HashSet<PaysComposants>(0);
/**
 * Relations between a country and a service
 */
private Set<PaysServices> ps = new HashSet<PaysServices>(0);
/**
 * Relations between a country and some keys figures
 */
private Set<KeyFigure> kf = new HashSet<KeyFigure>(0); 
```

我是 DAO，我有一个从服务层调用的函数

```
 @Override
public Pays read(String nomPays) {
    Criteria criteria = super.getSession().createCriteria(Pays.class);
    criteria.setFetchMode("pc", FetchMode.JOIN);
    criteria.setFetchMode("ps", FetchMode.JOIN);
    criteria.setFetchMode("kf", FetchMode.JOIN);
    criteria.add(Restrictions.eq("nom", nomPays));
    criteria.setCacheable(true);
    Pays p=(Pays) criteria.uniqueResult();  
    return p;   } 
```

实际上，唯一放入缓存的对象只有 Pays p，其他集合 pc、ps 和 kf 没有放入缓存。

这是我的 ehCache.xml

```
 <ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="true"
monitoring="autodetect" dynamicConfig="true">

<defaultCache maxElementsInMemory="100000" eternal="false"
    timeToIdleSeconds="3600" timeToLiveSeconds="3600" overflowToDisk="true" />

<cache name="org.hibernate.cache.internal.StandardQueryCache"
    maxElementsInMemory="10000" eternal="false" timeToIdleSeconds="3600"
    timeToLiveSeconds="3600">
</cache>

<cache name="org.hibernate.cache.spi.UpdateTimestampsCache"
    maxElementsInMemory="10000" eternal="true">
</cache> 
```

我的休眠属性

```
 <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="current_session_context_class">thread</prop>
            <prop key="hibernate.cache.use_query_cache">true</prop>
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.cache.use_structured_entries">true</prop>
            <prop key="hibernate.cache.generate_statistics">true</prop>
            <prop key="hibernate.cache.provider_class">
                org.hibernate.cache.EhCacheProvider
            </prop>
            <prop key="hibernate.cache.region.factory_class">
                org.hibernate.cache.ehcache.SingletonEhCacheRegionFactory
            </prop>
            <prop key="hibernate.cache.provider_configuration_file_resource_path">
                applicationContext-ehCache-entity.xml
            </prop>

        </props>
    </property> 
```

和我的 Maven 依赖

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>4.2.0.Final</version>
    </dependency> 
```

我怎样才能做到这一点？我使用 FetchMde.Join 是因为我想避免 n+1 选择，实际上我的 Pays 是在一个选择中加载的。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:46:53.763

Hibernate 将只缓存 Pays p 对象，这是真的，因为 Criteria 仅在该对象上创建。如果要缓存其他集合，则必须在集合属性的 getter 方法上使用 Cachebale。您也可以在每个 Entity 对象上使用 Cache 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:25:02.877

我解决了我的问题，只需在我的 web.xml 中应用一个过滤器，如下所示：

```
<filter>
    <filter-name>openSessionInViewFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>baselineSessionFactory</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>openSessionInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

# jaxb - 杰克逊序列化 JAXB 对象给出了奇怪的结果

> ID：16037576
> 
> 赞同：1
> 
> 时间：2013-04-16T12:51:58.033
> 
> 标签：jaxb, jackson

我有一个 JAXB 对象。当我序列化它时，结果很有趣！像这样 =>

```
{"formData":{
"preConditions":{
    "acceptTermsAndConditions":"<?xml version=\"1.0\" encoding=\"UTF-16\"?>\n<acceptTermsAndConditions>true</acceptTermsAndConditions>",
    "receivePromoEmail":"<?xml version=\"1.0\" encoding=\"UTF-16\"?>\n<receivePromoEmail>false</receivePromoEmail>"
}, etc... 
```

然而，源 XML 仅具有**true**和**false**作为值：-

```
 <formData>
    <preConditions>
      <acceptTermsAndConditions>true</acceptTermsAndConditions>
      <receivePromoEmail>false</receivePromoEmail>
    </preConditions> etc... 
```

我生成 JSON 的代码如下：-

```
 Application application = (Application) JAXBUtil.getXMLAsApplication();
    ObjectMapper mapper = new ObjectMapper();
    AnnotationIntrospector introspector = new JaxbAnnotationIntrospector(TypeFactory.defaultInstance());
    // make deserializer use JAXB annotations (only)
    mapper.getDeserializationConfig().with(introspector);
    // make serializer use JAXB annotations (only)
    mapper.getSerializationConfig().with(introspector);

    try {
        mapper.writeValue(new File("application.json"), application);
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

**上面的PreConditions**类是由 JAXB2 (XJC) 生成的。以下是一个片段：-

```
@XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
        "acceptTermsAndConditions",
        "receivePromoEmail"
    })
    public static class PreConditions {

        @XmlElement(required = true)
        protected Object acceptTermsAndConditions;
        @XmlElement(required = true)
        protected Object receivePromoEmail;

        /**
         * Gets the value of the acceptTermsAndConditions property.
         * 
         * @return
         *     possible object is
         *     {@link Object }
         *     
         */
        public Object getAcceptTermsAndConditions() {
            return acceptTermsAndConditions;
        }

        /**
         * Sets the value of the acceptTermsAndConditions property.
         * 
         * @param value
         *     allowed object is
         *     {@link Object }
         *     
         */
        public void setAcceptTermsAndConditions(Object value) {
            this.acceptTermsAndConditions = value;
        }

        /**
         * Gets the value of the receivePromoEmail property.
         * 
         * @return
         *     possible object is
         *     {@link Object }
         *     
         */
        public Object getReceivePromoEmail() {
            return receivePromoEmail;
        }

        /**
         * Sets the value of the receivePromoEmail property.
         * 
         * @param value
         *     allowed object is
         *     {@link Object }
         *     
         */
        public void setReceivePromoEmail(Object value) {
            this.receivePromoEmail = value;
        }

    } 
```

关于 JSON 为何如此疯狂的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T17:53:41.973

由于 的名义类型`acceptTermsAndConditions`是`java.lang.Object`，因此很难知道到底发生了什么。序列化器将根据序列化的运行时类型进行选择——我猜它会是 DOM `Document`。在反序列化时，它不会很好地工作，只会变成`java.util.Map`.

因此，您可能需要更改架构以生成更具体的类型：任何`java.lang.Object`有可能导致问题。

您可能希望查看对象在序列化之前具有的实际 Java 类型。那应该解释奇怪的输出来自哪里。我不认为它可以是简单的布尔值。

# apache-flex - flex 移动应用程序中的广告

> ID：16037579
> 
> 赞同：0
> 
> 时间：2013-04-16T12:52:03.983
> 
> 标签：apache-flex, air, adobe, flash-builder, flex4.5

我的任务是在我的 FLEX 移动应用程序中显示广告。我正在使用 flash builder 4.5.1 我在互联网上阅读了 1-2 篇博客，但它对我不起作用。

如果有人可以帮助我，请多多帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:39:37.870

查看这 2 个分步教程

iOS： http: [//www.adobe.com/devnet/air/articles/iad-ane-ios.html](http://www.adobe.com/devnet/air/articles/iad-ane-ios.html)

安卓： http: [//www.adobe.com/devnet/air/articles/admob-ane-android.html](http://www.adobe.com/devnet/air/articles/admob-ane-android.html)

# java - 我们可以制作这样一个不继承 Object 类的类吗

> ID：16037580
> 
> 赞同：-8
> 
> 时间：2013-04-16T12:52:04.867
> 
> 标签：java

我们可以在java中制作这样一个不直接或间接继承Object类的类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:54:33.193

你不能。

每个类都继承自`Object`类，这是 Java 的设计方式。

请参阅[文档](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)。

# c# - C# 动作语法

> ID：16037581
> 
> 赞同：8
> 
> 时间：2013-04-16T12:52:06.237
> 
> 标签：c#

我有两种这样的方法：

```
public void ExecuteA()
{
    Write();
    // A specific work
    Clear();
}

public void ExecuteB()
{
    Write();
    // B specific work
    Clear();
} 
```

我想将`Write()`and`Clear()`方法提取到一个新方法（Action）中，以得到类似这样的东西：

```
public ASpecificWork()
{
    // do A work
}

public BSpecificWork()
{
    // do B work
}

Execute(BSpecificWork);
Execute(ASpecificWork); 
```

`Write()`和将一次性`Clear()`定义。`Execute()`这样做的正确语法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-16T12:54:44.857

```
public void Execute(Action action)
{
    Write();
    action();
    Clear();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T12:55:24.310

这应该可以解决问题：

```
public ASpecificWork()
{
    // do A work
}

public BSpecificWork()
{
    // do B work
}

public void Execute(Action action)
{  
    Write();
    action();
    Clear();
}

Execute(BSpecificWork);
Execute(ASpecificWork); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T12:56:38.873

`Execute`应该接受`Action`参数并且应该包含`Write()`, `action()`,`Clear()`方法。

```
public void Execute(Action action)
{
    Write();
    action();
    Clear();
} 
```

# sql - SQL查询，如何添加count(*)列

> ID：16037583
> 
> 赞同：-3
> 
> 时间：2013-04-16T12:52:13.387
> 
> 标签：sql, oracle, count, subquery

我有这个查询：

```
select segment_name,owner,blocks*8192/1024/1024 as MB,tablespace_name
from dba_segments
where segment_name like 'AUD_2%' and owner like 'AUDITOR'
order by 1 desc;

SEGMENT_NAME     OWNER              MB TABLESPACE_NAME
---------------- ---------- ---------- ----------------
AUD_201304       AUDITOR             7 WSS     
AUD_201303       AUDITOR            12 WSS     
AUD_201302       AUDITOR            11 WSS 
```

如何添加计数（*）列？

我猜一个相关的子查询会做，但究竟如何？

谢谢 ！

抱歉在stackoverflow上找到了代码，下次应该更好地搜索。谢谢

抱歉，这里是解决方案的链接： [How to count(*) of multiple tables, size and tablespace in one query](https://stackoverflow.com/questions/13822512/how-to-count-of-multiple-tables-size-and-tablespace-in-one-query?rq=1)

这里是代码：

```
SELECT ut.table_name,
           to_number(extractvalue(xmltype (dbms_xmlgen.getxml ('select count(*) c from '         ||ut.table_name)),'/ROWSET/ROW/C')) row_count,
       db.blocks*8192/1024/1024 as MB,
       db.tablespace_name
FROM user_tables ut
  join dba_segments db on db.segment_name = ut.table_name
WHERE ut.table_name LIKE 'AUD_2%' and owner like 'AUDITOR'
ORDER BY ut.table_name DESC; 
```

这里是输出：

```
TABLE_NAME                      ROW_COUNT         MB TABLES
------------------------------ ---------- ---------- ------
AUD_201304                          21067          7 WSS
AUD_201303                          43198         12 WSS
AUD_201302                          39046         11 WSS
AUD_201301                          44523         17 WSS
AUD_201212                          50580         15 WSS
AUD_201211                          49589         14 WSS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:54:06.457

尝试：

```
select 
        segment_name,
        owner,
        blocks*8192/1024/1024 as MB,
        tablespace_name,
        (select num_rows from dba_tables where table_name=segment_name) TOTAL_ROWS
from dba_segments
where segment_name like 'AUD_2%' and owner like 'AUDITOR'
order by 1 desc; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:15:40.837

> “给出表数的列，而不是每个表中的记录数”

你正在混合两个不同的概念。数据和元数据。

您的查询是查询数据字典以获取有关您的表的一些信息作为数据库中的对象。这是元数据：关于数据的数据。

而每个表包含多少行的计数只是数据。

你有两个选择。第一个是将 DBA_TABLES 视图加入您的查询并选择 NUM_ROWS。如果您的统计数据相当新鲜，并且您只需要一个指示性数字，这可能就足够了。

如果您不使用这些表的统计信息，或者您想要高度准确的计数，您将需要使用 PL/SQL。

```
create or replace function tab_row_cnt ( tname in user_tables.table_Nmae%type)
return pls_integer
is
  n pls_integer;
begin
  execute immediate 'select count(*) from '||tname into n;
  return n;
end; 
```

您可以将此函数包含在查询的投影中。

```
select segment_name,owner,blocks*8192/1024/1024 as MB,tablespace_name
       , tab_row_cnt (segment_name) as row_count
from dba_segments
where segment_name like 'AUD_2%' and owner like 'AUDITOR'
and segment_type = 'TABLE'
order by 1 desc; 
```

请注意，我在 SEGMENT_TYPE 上添加了一个测试。如果您的表是分区的，或者如果您想在查询中包含索引段，您将需要修改函数的逻辑。

请注意，如果您的表很大，计数可能需要很长时间，并且会大大减慢您的查询速度。速度是使用 USER_TABLES.NUM_ROWS 提供的近似值的另一个优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T12:57:14.013

您可以在查询结束时检索 @@ROW_COUNT

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:14:16.450

目前尚不清楚您要计算什么。但是如果要计算返回的行数，请使用分析函数：

```
select segment_name, owner, blocks*8192/1024/1024 as MB, tablespace_name,
       count(*) over () as cnt
from dba_segments
where segment_name like 'AUD_2%' and owner like 'AUDITOR'
order by 1 desc; 
```

# ruby-on-rails - Rails ActiveAdmin DSL 助手

> ID：16037586
> 
> 赞同：2
> 
> 时间：2013-04-16T12:52:20.757
> 
> 标签：ruby-on-rails, activeadmin

我想在定义 ActiveAdmin 页面时使用辅助方法。尤其是：

```
ActiveAdmin.register Catalog do
  menu parent: menu_title(:catalog)
end 
```

在哪里

```
def menu_title(s)
  proc { I18n.t("active_admin.menus.#{s}") }
end 
```

我放在哪里`menu_title`？将其放入`ViewsHelper`不起作用，并且文档似乎对这个问题保持沉默。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:59:32.363

好的，这是一个丑陋的解决方案。

在 ActiveAdmin 初始化文件中，在底部（块外）添加：

```
require Rails.root.join('lib', 'active_admin_dsl.rb') 
```

创建一个`lib/active_admin_dsl.rb`包含以下内容的文件：

```
class ActiveAdmin::DSL
  def menu_title(s)
    proc { I18n.t("active_admin.menus.#{s}") }
  end

  # or whatever
end 
```

另一个不那么难看但更麻烦的解决方案是编写一个模块，然后手动将其包含在每个注册的资源中：

```
ActiveAdmin.register Foo do
  include DSLHelper
end 
```

*但是，当您拥有大量*资源时，这肯定是不切实际的。

# javascript - 无法在 texbox 中显示组合框值

> ID：16037595
> 
> 赞同：0
> 
> 时间：2013-04-16T12:52:47.347
> 
> 标签：javascript, html, web

我正在从数据库中获取值并将它们显示在组合框中，现在我想在文本字段中显示选定的组合框值我试图解决它但我无法帮助我.....这是我的代码

```
<form name="form" method="POST" action="time.php" enctype="multipart/form-      data">
     <table align="center">
     <p>
     <tr><td>
     <label>Depurture</label></td>
     <td>
     <script>
function CBtoTB()
{
document.getElementById("text").value=document.getElementById("ComboBox").value
}
</script>
     <select>
<option id="ComboBox" onchange="CBtoTB()">Select City</option>
<?php 
include ('Database/db.php');

$result=mysql_query("SELECT `ctod` FROM `dewoocandd`") or die(mysql_error());
if($result)
{
  while($row=mysql_fetch_array($result))
  {
  $cname=$row['ctod'];
  echo "<option value=\"$cname\" ";
   echo'SELECTED';
echo "> ";
echo $row['ctod'];
   echo '</option>';
  }

 }

 ?>
 </select></td></tr></td>
    </p>
    <p>

     <tr><td> <label>Time:</label></td>
      <td><input type="text" name="pname" id="text" value="" required></td></tr>
      `enter code here`  </p>

      <tr><td> </td><td align="right"> <input type="submit" name="button" id="button"        value="Submit"></td></tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:04:03.727

`id="ComboBox"`并且`onchange="CBtoTB()"`应该在选择标签中，而不是在选项标签中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:09:34.820

您应该将`onchange`事件附加到`select`元素并将文本框的值更新为`select`.

Javascript：

```
function CBtoTB() {
    document.getElementById("text").value = document.getElementById("mySelect").value;
} 
```

HTML：

```
<select id="mySelect" onchange="CBtoTB()">
    <option >Select City</option>
    ...
</select> 
```

# ruby - ruby 数组检查 nil 数组

> ID：16037597
> 
> 赞同：8
> 
> 时间：2013-04-16T12:52:51.017
> 
> 标签：ruby, arrays, null

我有 ruby​​ 数组，`nil`但当我检查使用`nil?`并`blank?`返回时`false`

```
@a = [""]

@a.nil?
=> false

@a.empty?
=> false 
```

如何检查返回 true 的 nil 条件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-16T13:02:45.250

`[""]`是一个具有单个元素的数组，其中包含一个空的 String 对象。`[].empty?`将返回`true`。`@a.nil?`正在返回`false`，因为`@a`它是一个 Array 对象，而不是`nil`.

例子：

```
"".nil? # => false
[].nil? # => false
[""].empty? # => false
[].empty? # => true
[""].all? {|x| x.nil?} # => false
[].all? {|x| x.nil?} # => true
[].all? {|x| x.is_a? Float} # => true
# An even more Rubyish solution
[].all? &:nil? # => true 
```

最后一行演示了`[].all?`总是返回 true，因为如果 Array 为空，那么根据定义，它的所有元素（无元素）都满足每个条件*。*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-16T13:04:16.603

在红宝石中，您可以像这样检查

```
[""].all? {|i| i.nil? or i == ""} 
```

如果你在铁轨上，你可以做

```
[""].all? &:blank? 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:13:03.280

```
p defined? "" #=> "expression"
p defined? nil #=> "nil" 
```

`""`你认为的那个`nil`，实际上是一个`expression`。`empty`如下所示查看数组和数组的大小以`non-empty`获得更多证据：

```
p [].size #=> 0
p [""].size #=> 1 
```

说你`#nil?`和`#empty`给`false`。这是预期的。

# ios - 无法通过点击到 searchResultTable 的单元格导航到新的视图控制器

> ID：16037598
> 
> 赞同：0
> 
> 时间：2013-04-16T12:52:52.667
> 
> 标签：ios, objective-c, cocoa

我是目标 c 的新手。我有一张带搜索栏的桌子。**我的问题是当我第一次点击 searchResultTable 中的一个单元格时，它导航到另一个视图控制器，但是当我取消搜索并再次执行并点击搜索结果单元格时，什么也没发生。谁能帮我解决这个问题？**这是我的一些代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    UIViewController *newView = [[UIViewController alloc] init];
    if(tableView == self.tableView) {
        [self.navigationController pushViewController:newView animated:YES];
        newView.title = [[listOfGroups objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
    }
    if(tableView == self.searchDisplayController.searchResultsTableView) {
        [self.navigationController pushViewController:newView animated:YES];
        newView.title = [[searchData objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
    }

    [newView release];
} 
```

这是 Viewdidload 方法中的一些代码

```
searchDisplayController.delegate = self;
searchDisplayController.searchResultsDataSource = self;
self.searchDisplayController.searchResultsTableView.delegate = self; 
```

你能帮我解释一下上面的 3 行代码是如何工作的，这是什么意思？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:15:19.433

应用程序中的每个表视图都需要有一个**委托**和**与之**关联的数据源。

**dataSource**实现了**UITableViewDataSource**协议，该协议基本上由许多方法组成，这些方法定义了标题信息，要显示多少行数据，如何将数据划分为不同的部分，最重要的是，为表格视图提供单元格要显示的对象。

**委托**实现了**UITableViewDelegate**协议，并提供了对表格视图的外观和功能的额外控制，包括检测用户何时触摸特定行、定义自定义行高和缩进以及行删除和编辑功能的实现。

来源：[http ://www.techotopia.com/index.php/Creating_a_Simple_iPhone_Table_View_Application#The_Table_View_Delegate_and_dataSource](http://www.techotopia.com/index.php/Creating_a_Simple_iPhone_Table_View_Application#The_Table_View_Delegate_and_dataSource)

# jquery - 在使用 jQuery “toggle” 功能后查找元素的 css 发生了怎样的变化

> ID：16037619
> 
> 赞同：0
> 
> 时间：2013-04-16T12:53:40.843
> 
> 标签：jquery, css

我`toggle()`在我的 Javascript 函数中使用来更改元素的 CSS 类。单击该元素时，将删除该类，再次单击该元素时，将再次添加该类。如何确定该`toggle()`函数是否正在从元素中添加或删除类，以便我可以基于此执行一些其他操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:58:32.827

您可以使用 hasClass() 检查元素是否具有该类，如果为 true，则仅添加该类，如果为 false，则将其删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T12:57:30.463

您可以使用 jQuery [is 方法](http://api.jquery.com/is/)来确定元素是否满足适当的选择器（在本例中为类选择器）：

```
if (element.is('.class'))... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:06:03.400

这是原始示例

```
 $('#test').click(function() {
        $(this).toggleClass('red');
        $(this).toggleClass('blue');

        if($(this).hasClass('red')) {alert('red');}
        if($(this).hasClass('blue')) {alert('blue');}
    }); 
```

# python - git 可以输出“branch”和“remotes/origin/branch”之间的提交次数的最简单方法

> ID：16037623
> 
> 赞同：7
> 
> 时间：2013-04-16T12:53:58.187
> 
> 标签：python, git

我正在使用自定义构建系统来管理大量 git 存储库并主要用 python 编写。

如果我可以编写一个命令来报告所有存储库的当前分支，然后报告“分支”的头部是否与“远程/来源/分支”的头部相同，那将节省我很多时间。

我们已经有一个命令可以在每个 git 存储库中运行一个 shell 命令，我正在寻找的是一种从 git 获取一些关于分支和远程/源/分支的相对位置的简单格式化信息的方法。要么是提交数量的差异，要么是一个简单的布尔值。

从 git 中获取这些信息的方法是什么，这将最大限度地减少我必须在 python 端进行的解析和处理量？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-16T16:12:16.067

如果你有足够新的 git 版本，你可以使用：

```
$ git rev-list --count --left-right branch...origin/branch
2   1 
```

第一个数字，如果提交的数量在`branch`之前`origin/branch`，第二个是提交的数量在后面。所以这个分支有两个尚未提交到上游的提交，并且有一个上游提交还没有在我的本地分支中。

我相信引入 --count 时是 1.6 或 1.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T12:58:38.107

`git status`显示您在远程跟踪分支之前/之后的提交次数。不过，您需要先执行 git fetch ，否则 git 无法知道是否有任何新内容进入远程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T13:13:29.640

如果`branch`确保是`origin/branch`（即可快速转发）的祖先，则

```
git log --oneline branch..origin/branch 
```

应该打印它们之间的提交，每一个都在一行中。您可以在 python 或`wc -l`.

不确定是否存在简单通用的解决方案。和可能没有共同的祖先`origin/branch`，`branch`如果涉及孤儿分支。

# postgresql - 跳过行的 Postgresql csv 导入

> ID：16037624
> 
> 赞同：2
> 
> 时间：2013-04-16T12:54:00.620
> 
> 标签：postgresql, csv-import

我有一个 Postgresql 脚本，可以自动将 csv 文件导入我的数据库。该脚本可以检测重复记录并将其删除，进行适当的 upsert 但仍然无法解决所有问题。基本上，csv文件是从其他系统导出的，这些系统在文件的开头和结尾附加了额外的信息，例如：

```
Total Count: 2956
Avg Time: 13ms

Column1, Column2, Column3
...      ...      ... 
```

我想要做的是跳过文件底部的那些初始行或任何行。有什么方法可以在 Postgresql 中通过 COPY 或通过其他途径来做到这一点？我可以通过 Postgresql 调用例如操作系统命令吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:35:17.610

对于 Linux 使用`tail`并`head`裁剪文件并将其通过管道传输到您的脚本：

```
tail -n +3 file.csv | head -1 | psql -f my_script.sql my_database 
```

然后您的脚本将从 STDIN 复制：

```
copy my_table from STDIN; 
```

# php - Symfony2 将实体映射到不同的表

> ID：16037626
> 
> 赞同：3
> 
> 时间：2013-04-16T12:54:07.703
> 
> 标签：php, database, symfony, doctrine, mapping

我有我的实体`foo`，其中包含属性`id`，`bar`和`baz`。我可以根据未映射的属性用相同的实体填充两个不同的表（如`foo1`和）吗？实体的代码如下所示：`foo2``baz`

```
class foo {

  /**
  * @ORM\Column(name="id", type="integer")
  * @ORM\Id
  */      
  private $id;

  /**
  * @ORM\Column(name="bar", type="string")
  */
  private $bar;

  /**
  * Property not mapped in the database
  */
  private $baz; 
} 
```

如果值为`baz`1，我希望将实体保存在表中`foo1`，如果值为`baz`2，则保存在表中`foo2`。我在哪里可以选择它将保存在哪个表中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:19:28.980

使用学说继承：

[教义传承](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html)

它是这样工作的：

基本客户端

*   SubClient1 从 BaseClient 扩展
*   SubClient2 从 BaseClient 扩展

像这样，您甚至可以添加额外的字段，比如仅针对该实体的 SubClient1 或 SubClient2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:20:56.080

你绝对需要你的 $baz 属性吗？你如何确定它？

因为一个可能对您有帮助的简单解决方案是创建一个抽象的 foo 类，然后是 2 个继承自它并执行数据库关系的类。

这是示例：

```
abstract class foo {

  /**
  * @ORM\Column(name="id", type="integer")
  * @ORM\Id
  */      
  protected $id;

 /**
 * @ORM\Column(name="bar", type="string")
 */
 protected $bar;
}

/* @ORM\Table(name="foo1")
* @ORM\Entity(repositoryClass="yourRepo")
*/
foo1 extends foo{
}

/* @ORM\Table(name="foo2")
* @ORM\Entity(repositoryClass="yourRepo")
*/
foo2 extends foo{
} 
```

虽然我不确定它是否像这样简单，但也许它会有所帮助。

一些可能有助于执行此操作的文档：http: [//docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html)

请随时编辑/更正，我对此很陌生，但我认为这个想法可能会有所帮助。

# android - android中的调度程序

> ID：16037630
> 
> 赞同：2
> 
> 时间：2013-04-16T12:54:23.010
> 
> 标签：android

我正在android中创建一个调度程序应用程序，它每天在用户指定的时间运行这里是代码，请说明为什么它不工作

```
 private void setAlarm(String targetCal){
    Toast.makeText(MainActivity.this,"Alarm Set", Toast.LENGTH_LONG).show();
    String[] Time=targetCal.split(":");
    Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), RQS_1, intent, 0);
    AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
    Calendar timeOff = Calendar.getInstance();
    //int days = Calendar.SUNDAY + (7 - timeOff.get(Calendar.DAY_OF_WEEK)); // how many days until Sunday
    timeOff.set(Calendar.HOUR,Integer.valueOf(Time[0].trim()));
    timeOff.set(Calendar.MINUTE,Integer.valueOf(Time[1].trim()));
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, timeOff.getTimeInMillis(), alarmManager.INTERVAL_DAY , pendingIntent);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:06:14.187

将`setRepeating`行替换为以下内容：

*尝试：-*

```
 alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, timeOff.getTimeInMillis(), 1000 * 60 * 60 * 60 * 24, pendingIntent); 
```

*反而：-*

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, timeOff.getTimeInMillis(), alarmManager.INTERVAL_DAY , pendingIntent); 
```

注意：我刚刚实现了这种方式，它对我来说效果很好。

# c - 如何从scanf中识别字段分隔符？

> ID：16037633
> 
> 赞同：3
> 
> 时间：2013-04-16T12:54:36.780
> 
> 标签：c, scanf

我需要阅读一个文本文件，其名称带有如下数字。

```
rENLAg:12182
TgAlKd:19773
SSqUpz:16466
QYStPh:4113
CodNhz:28920
SgoIGz:25343 
```

我需要将字母与数字分开。fscanf 仅识别空格，而不识别其他字段分隔符。因此我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T12:56:19.870

一种解决方案是使用扫描集（请参阅[格式说明符表](http://en.cppreference.com/w/c/io/fscanf)中的*转换说明符* **[set]**条目）：

```
char buf[7];
int i;
/* Check result of fscanf(), which returns the number
   of assignments made, to ensure both 'buf' and 'i'
   were assigned values. */
if (fscanf(fp, " %6[^:]:%d", buf, &i) == 2)
{
} 
```

其中`" %6[^:]"`意味着跳过任何前导空格（例如，先前读取的换行符）并读取最多但不包括第一个`:`字符但不超过 6 个字符（以防止缓冲区溢出）。

# c# - 编码的 UI 测试日期时间问题

> ID：16037639
> 
> 赞同：1
> 
> 时间：2013-04-16T12:54:49.930
> 
> 标签：c#, visual-studio-2010, coded-ui-tests

我使用编码的 UI 测试，但我遇到了问题。我想在edittext中输入一个日期，但它给出了一个错误消息，问题出在哪里，谢谢。

```
public void TheDate()
{
    #region Variable Declarations
    HtmlEdit uITxtDateEdit = this.UIEWindowWindow8.UIDemoSiteDocument.UITxtDateEdit;
    #endregion

    uITxtDateEdit.Text = DateTime.Now.AddMonths(4).ToString("dd/MM/yyyy");            
} 
```

> 无法在控件上执行“SetProperty of Text with value "16.08.2013"'。
> 
> 额外细节：
> 
> TechnologyName：'Web' ControlType：'Edit' TagName：'INPUT' Id：'ctl00_ctl00_ctl00_wpm1_gwpc1_c1_txtDepartureDate_txtDate' 名称：'ctl00$ctl00$ctl00$wpm1$gwpc1$c1$txtDepartureDate_txtDate'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T04:55:41.720

uITxtDateEdit.Text = DateTime.Now.AddMonths(4).ToString("dd/MM/yyyy");

您正在尝试以其他格式插入日期。使用 dd/mm/yyyy 或将格式修改为 dd.mm.yyyy。其次，您提到了用于分钟的 MM（资本）。试试这个希望它能解决你的问题。

# oracle - Oracle数据库，大型plsql代码管理

> ID：16037641
> 
> 赞同：4
> 
> 时间：2013-04-16T12:54:51.160
> 
> 标签：oracle, plsql

我正在做一个项目，其中业务逻辑是使用 plsql 在 oracle 数据库中实现的。代码库变得越来越大，它的管理正在成为噩梦。

例如，当代码库使用 Java、C#、...时，您有项目的版本控制系统，其中存储了历史记录，并且您正在使用分支、标签等管理项目。我不明白如何使用 pl/ sql代码直接存储在数据库服务器中。

我想知道在这种情况下，管理 plsql 代码库的最佳实践是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T12:57:31.083

没有理由仅仅因为某些客户端工具默认以这种方式工作，就将 PL/SQL 存储在数据库中。

我强烈建议您选择自己喜欢的源代码控制系统并将 PL/SQL 源代码存储在其中。使用 all.sql 创建所有 PL/SQL 包和其他创建或替换对象。

查看[版本控制存储过程/PLSQL？](https://stackoverflow.com/questions/2390029/versioning-stored-procedures-plsql)对于另一种方法，但这需要更多的努力来设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:31:38.613

只需确保所有 PL/SQL 在应用于数据库之前都已在外部编写脚本，并将这些文件置于源代码控制之下。我选择的工具是 TortiseHG。

如果我的存储过程定义等存在的唯一位置是在数据库上，我会非常不高兴，部分原因与您提出这个问题的原因相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T09:15:14.043

我已经在 Oracle 工作了大约 20 年，但从未见过一个令人满意的代码管理系统在使用中。

然而，在过去的一年里，我一直在开发 Ruby on Rails 应用程序，分布式版本控制系统“git”由 gitflow 增强，以帮助形式化代码分支（master、develop、feature、hotfix 等）和数据库部署（ PostgreSQL) 使用 rake 进行迁移。我真的希望我有机会将它们与 Oracle 代码一起使用，因为它确实满足了我需要的每一个要求。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-07T10:20:31.723

我们构建了一个工具，以便我们可以在 Oracle 数据库中管理我们的 PL/SQL 代码。它将 Git 连接到 Oracle 数据库并帮助您轻松管理 PL/SQL 代码库。您可以执行基本的 Git 任务，例如提交、重置、分支、克隆、合并、拉取等……Gitora 会自动更新数据库中的 PL/SQL 代码。

您可以在[www.gitora.com下载它](http://www.gitora.com/)

# python - python subprocess.call不在if语句中执行

> ID：16037643
> 
> 赞同：0
> 
> 时间：2013-04-16T12:54:52.970
> 
> 标签：python, shell, subprocess, execute

我有这个块：

```
if data[0] == OUTPUT:
    pin,val = ord(data[0]),ord(data[1])
    if (pin == 1): #Turn Master Bedroom Light on
        process = subprocess.call(cmd1, stdout=subprocess.PIPE)
        print process
    elif (pin == 2): #Turn Master Bedroom Light off
        process = subprocess.call(cmd2, stdout=subprocess.PIPE)
        print process
    elif (pin == 3 or pin == 4): #Toggle garage door
        process = subprocess.call(cmd3, stdout=subprocess.PIPE)
        print process
    else:
        print "Invalid Pin" 
```

其中 cmd1、cmd2 和 cmd3 是我正在尝试执行的 shell 脚本文件，而 OUTPUT 是一个等于 1 的预定义常量。我知道该块实际执行，但它与 subprocess.call 语句一起挂起。

当我运行时：

```
subprocess.call(cmd1, stdout=subprocess.PIPE) 
```

单独在 python 解释器中，它工作得很好，但在我的 if-elif 块中它挂起。知道为什么吗？我完全感到困惑......我现在忽略 val 的价值，直到我可以让它工作。

提前致谢！我对python相当陌生，所以请温柔:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T15:18:41.467

[subprocess.call](http://docs.python.org/2/library/subprocess.html)状态的文档

> 请勿将此函数与 stdout=PIPE 或 stderr=PIPE 一起使用。由于当前进程中没有读取管道，因此如果子进程向管道生成足够的输出以填满 OS 管道缓冲区，则子进程可能会阻塞。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T13:00:32.827

> OUTPUT 是一个预定义的常数，等于 1

如果`data[0] == 1`，您的`ord()`呼叫将失败。你没有提到这一点，所以没有类似的事情发生。

如果，如我所想，`data`可能是一个字符串或一个`bytes()`或一个 unicode 的东西`data[0] == '\x01'`，有两种可能的情况：

要么`OUTPUT`是真的`== 1`，然后测试`data[0] == OUTPUT`失败，因为`'\x01' != 1`，整个东西都被跳过了。这是最可能的情况。

或者`OUTPUT == '\x01'`，然后整个东西都执行了，你的第一个`if`块被执行了，但是你告诉我们这不会发生。

SSCCE会有所帮助[。](http://sscce.org/)

# c# - 用 FileStream 直接读取一个字节文档（不带路径）

> ID：16037645
> 
> 赞同：0
> 
> 时间：2013-04-16T12:54:56.420
> 
> 标签：c#, filestream, streamreader

我在变量中有一个字节文档，我想将它放入 a`FileStream`中，以便将其放入`StreamReader`.

我可以这样做吗？

我看到它`FileStream`使用路径，但是有没有办法读取我的字节文档？

我得到了这样的东西，当然，`myByteDocument`不起作用，因为它不是一条路径：

```
file = new FileStream(myByteDocument, FileMode.Open, FileAccess.Read, FileShare.Read);

reader= new StreamReader(file); 
reader.BaseStream.Seek(0, SeekOrigin.Begin);
string fullText= "";
while (reader.Peek() > -1) 
{
    fullText+= reader.ReadLine();
}
reader.Close(); 
```

myByteDocument 是这样获得的：

```
DataRow row = vDs.Tables[0].Rows
byte[] myByteDocument = (byte[])row.ItemArray[0]; 
```

我阅读了该文档，并将其放入要替换的字符串中，其中的一些片段，然后在所有替换之后，使用`fullText`变量创建一个新文档，其中包含类似`sw.write(fullText)`, where `sw`is a `StreamWriter`.

所以，我想在不知道路径的情况下读取文件，而是直接使用字节文档。我可以这样做吗？

如果我不清楚，请不要犹豫，说出来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:03:41.560

您应该查看[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)课程而不是`FileStream`. 它应该提供您在不知道路径的情况下读取文件所需的功能（提供`myByteDocument`的是字节数组）。

```
var file = new MemoryStream(myByteDocument); 
```

您基本上可以使用相同的代码，只需将 MemoryStream 构造函数替换为您尝试使用的 FileStream 构造函数。

```
string fullText= "";

using(var file = new MemoryStream(myByteDocument))
using(var reader = new StreamReader(file))
{
    reader.BaseStream.Seek(0, SeekOrigin.Begin);
    while (!reader.EndOfStream)
    {
        fullText += reader.ReadLine();
    }
} 
```

请注意，我还`using`为文件访问添加了块。这比只调用要好得多，`reader.Close()`因为即使在调用`Close()`方法不会发生异常的情况下，它也会确保资源的清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:02:51.160

您需要将字节数组转换为字符串，然后替换您需要的内容，然后写入最终结果。您甚至不需要 StreamReaders 或 writer 来执行此操作。

看看这篇文章： [如何将字节 [] 转换为字符串？](https://stackoverflow.com/questions/1003275/byte-to-string-in-c-sharp)

在这里，您可以使用不同的方法将文档转换为字符串。接受的答案是：

```
string result = System.Text.Encoding.UTF8.GetString(myByteDocument) 
```

一旦你完成了所有的替换，只需将字符串保存到一个文件中，就像这样（最简单的方法）：

```
File.WriteAllText(path, result); 
```

# ubuntu - 在终端 1 上跟踪进度并在终端 2 中显示

> ID：16037656
> 
> 赞同：0
> 
> 时间：2013-04-16T12:55:25.697
> 
> 标签：ubuntu, terminal

我正在运行 ubuntu，我想找到一种方法来跟踪来自一个终端的回声，并将它们显示在第二个终端中。这是我要编码的结构。这样做的原因是我不希望用户在下载第一个终端时看到它，并且回显很快就会丢失。所以基本上，终端 1 将是运行的东西，显示它在做什么（对于高级用户），终端 2 将显示与终端 1 链接的预定回声

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:38:30.563

一个简单的方法是在中间使用一个文件。

从您的第一个过程中，您会将输出重定向到文件

```
script.sh > foo 
```

从另一个终端，您继续阅读文件中写入的内容以查看脚本的实际输出

```
tail -f foo 
```

不过，您可能不想在几个小时内这样做

话虽如此，你确定这真的是你想做的吗？拥有某种[调试级别](http://logging.apache.org/log4j/1.2/manual.html)不是更好吗，以便您可以激活/停用要显示的消息类型？

# jquery-mobile - 谷歌分析 & jQuery Mobile & jQuery 1.9

> ID：16037658
> 
> 赞同：0
> 
> 时间：2013-04-16T12:55:36.750
> 
> 标签：jquery-mobile, google-analytics

以前有一个关于将 Google Analytics 与 jquery Mobile 结合使用的问题，[此处](https://stackoverflow.com/questions/12762950/jquery-mobile-and-google-analytics)提供了成功的答案。然而，这适用于 1.9 之前的 jQuery 版本。

请有人帮助更改代码，以便将折旧的 .live 事件替换为当前的 .on 事件。我试过但没有成功。

这是 JavaScript 代码：

```
var _gaq = _gaq || [];

$(document).ready(function(e) {
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + 
          '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
}); 

$('[data-role=page]').live('pageshow', function (event, ui) {
    try {
        _gaq.push(['_setAccount', 'YOUR_ANALYTICS_ID_GOES_HERE']);

        if ($.mobile.activePage.attr("data-url")) {
            _gaq.push(['_trackPageview', $.mobile.activePage.attr("data-url")]);
        } else {
            _gaq.push(['_trackPageview']);
        }
    } catch(err) {}

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T08:28:10.690

Google 在*Tracking Info*页面上提供的代码如下所示，具体取决于您选择的功能：

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_setDomainName', 'foo.bar']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })(); 
```

并且你被告知在开场后立即放置`<body>`。您应该将其与 jQuery Mobile（在 v1.3 上测试）保持在同一位置，方法是删除该`_trackPageview`行并在该代码块的末尾添加一个简单的片段，给出：

```
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_setDomainName', 'foo.bar']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

    $(document).on('pageshow', ':jqmData(role="page")', function(evt, data) {
        var url = $(this).jqmData('absUrl');
        try {
            if (url) {
                url = $.mobile.path.parseUrl(url)
                _gaq.push(['_trackPageview', url.pathname + url.search + url.hash]);
            }
            else {
                _gaq.push(['_trackPageview']);
            }
        }
        catch(e) {}
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-01T11:44:15.540

除了将 .live 替换为 .on 之外，Google 还将 ga.js 替换为 analytics.js，作为 Universal Analytics 更改的一部分。

我正在使用 Walf 发布的代码的变体来跟踪基于 jQuery Mobile 的站点上的各个页面，但需要对其进行更改以使用新的 Universal Analytics 配置。我在 body 标记之后有以下脚本：

```
(function (i, s, o, g, r, a, m) {
i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
    (i[r].q = i[r].q || []).push(arguments)
    }, i[r].l = 1 * new Date(); a = s.createElement(o),
    m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

ga('create', 'UA-XXXXXXXX-X', 'site_name.com');
ga('send', 'pageview');

$(function () {
    $('[data-role=page]').on('pageshow', function (event, ui) {
        try {
            if (location.hash) {
                ga('send', 'pageview', location.hash);
            }
            else {
                ga('send', 'pageview');
            }
        }
        catch (error) {
        }
    });
}); 
```

Google Analytics 中按位置哈希（例如#about）列出的页面为我提供了我想查看的有关访问者如何与站点交互的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T14:25:49.077

在开始的正文标签之后：

```
<script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments);
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-XXXXXXX-XX', 'exemple.com');
</script> 
```

并且在每一页中：

```
<div data-role="page" ...>
    ...

    <script>
        $(document).off("pageshow", 'div[data-role="page"]').on("pageshow", 'div[data-role="page"]', function() {
            ga('send', 'pageview', $.mobile.path.getLocation());
        });
    </script>
</div> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-29T00:21:38.507

在将 .live() 更改为 .on() 之后，我还必须将`<head>`脚本`<body>`从. 否则我不会得到每一个页面视图。`</div>``<div data-role="page">`

# android - Android总是在开幕式上获得新位置

> ID：16037665
> 
> 赞同：1
> 
> 时间：2013-04-16T12:56:03.940
> 
> 标签：android, location, locationmanager

一如既往地获得新的位置？我在`onCreate`这里使用此代码

```
 locationManager = (LocationManager) this.getSystemService(LOCATION_SERVICE);
        isGPSEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
               if (isGPSEnabled) {
                      if (location == null) {
                          provider = LocationManager.GPS_PROVIDER;
                          locationManager.requestLocationUpdates(provider, 500, 0, this);
                          if (locationManager != null) {
                              location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);                                                    
                              if (location != null) {
                                  latLng = new LatLng(location.getLatitude(), location.getLongitude());                                   
                                  if (location != null) {                                                                                                             
                                      ParseQueryMap();
                                  }
                              }
                          }
                       }
                     }                            
              if (isNetworkEnabled){ 
                       if (location == null) {
                       provider = LocationManager.NETWORK_PROVIDER;
                       locationManager.requestLocationUpdates(provider, 500, 0, this);
                       if (locationManager != null) {                   
                           location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);       
                           if (location != null) {
                               latLng = new LatLng(location.getLatitude(), location.getLongitude());                               
                               if (location != null) {  
                                   ParseQueryMap();                               
                               }
                            }
                         }
                       }
                     }
                } 
```

如果在我运行应用程序时该位置不可用，则采用先前已知的位置 ( `getLastKnownLocation()`)。我不喜欢这个解决方案。我需要立即或在一段时间后（大约 5 秒）向我显示我的确切位置。启动时的确切位置我需要显示基地的最近点。可能吗？感谢您的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:20:01.640

尝试被动位置提供程序。通过使用它，您可以在已经请求它们的其他应用程序旁边接收位置更新。

请参阅[此博客条目](http://android-developers.blogspot.jp/2011/06/deep-dive-into-location.html)，其中详细描述了如何尽快修复该位置。[您可以在android-protips-location](https://code.google.com/p/android-protips-location/)项目中找到示例代码。

# javascript - 将建议框始终直接放在文本框下方

> ID：16037667
> 
> 赞同：0
> 
> 时间：2013-04-16T12:56:08.097
> 
> 标签：javascript, jquery, html, css

我有一个带有建议框的文本输入，在输入内容时会出现在输入下方。问题是当页面缩放时，有时该框会出现在稍微不同的位置（1-3 像素）。有没有办法保证，无论页面比例是多少，建议框相对于输入字段的底线始终保持在左边 0px 和顶部 0px 的位置？谢谢。

```
tBox = $('#textBox')[0];

$('#suggestionBox').css({
    width: "151px",
    border: "1px solid grey",
    position: "absolute",
    top: (tBox.offsetTop + tBox.offsetHeight) + "px",
    left: tBox.offsetLeft + "px"
});

<input type="text" id="textBox" />
<div id="suggestionBox" style="display:none;">suggesion</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:11:06.380

您是否尝试过使用此[http://docs.jquery.com/UI/API/1.8/Position](http://docs.jquery.com/UI/API/1.8/Position)？

[http://jsfiddle.net/ZpFm9/1/](http://jsfiddle.net/ZpFm9/1/)

```
$("#suggestionBox").position({
    my: "left top",
    at: "left bottom",
    of: $('#textBox')
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:20:40.277

看简单的例子：http: [//jsfiddle.net/JQeTT/](http://jsfiddle.net/JQeTT/)

```
$('#suggestionBox').css({
   width: "151px",
   border: "1px solid grey",
   position: "absolute",
   top: ($('#textBox').offsetTop + $('#textBox').offsetHeight) + "px",
   left: $('#textBox').offsetLeft + "px"
});

$('#textBox').focus(function(){

   $("#suggestionBox").show();
}).blur(function(){ //if lost the focus, the suggestion box hide again
   $("#suggestionBox").hide();
}); 
```

# javascript - $(window).blur 事件影响 Iframe

> ID：16037671
> 
> 赞同：8
> 
> 时间：2013-04-16T12:56:19.090
> 
> 标签：javascript, jquery, dom, iframe

我想检测用户何时离开我的页面（例如打开一个新标签），以便我可以停止倒计时。我是这样做的：

```
$(window).blur(function() {
 //stop countdown
}); 
```

但是我的页面中有一个 iframe，当用户点击它时倒计时也会停止，但我不希望当有人点击 iframe 时执行上述事件。

任何的想法？

更新，我正在尝试更多，基于这个答案[Click-event on iframe?](https://stackoverflow.com/questions/10572227/click-event-on-iframe) ：

```
iframeDoc = $('iframe').contents().get(0);
$(iframeDoc).click(function(){
   //maybe remove blur event?
}); 
```

更新： Tim B 解决方案有效：

```
$(window).blur(function () {
// check focus
if ($('iframe').is(':focus')) {
    // dont stop countdown
}
else {
    // stop countdown
}                
}); 
```

现在我必须在每次调用模糊事件时从 iframe 中移除焦点，否则如果用户在聚焦 iframe 后更改选项卡，倒计时将不会停止。我使用上述条件尝试过这样的操作：

```
if ($('iframe').is(':focus')) {
    // dont stop countdown
    $("iframe").blur()
    $(window).focus();
} 
```

但它没有用。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:29:31.873

一种解决方案是检查 iframe 是否具有焦点，然后不停止计时器。例如

```
$(window).blur(function () {
    // check focus
    if ($('iframe').is(':focus')) {
        // dont stop countdown
    }
    else {
        // stop countdown
    }                
}); 
```

现在这将起作用，但是如果您的 iframe 在用户更改选项卡时具有焦点，则倒计时不会停止。因此，在这种情况下，您需要考虑一个优雅的解决方案来将焦点从 iframe 之前移开。例如，如果用户在 iframe 内单击，则将焦点立即移回父窗口。

**编辑 - 更新答案以包含额外的 iframe 功能**

好的，所以我一直在玩这个。现在我不知道您的 iframe 中有什么内容，但是您可以向其中添加一些代码，这基本上会在单击时将焦点发送回父窗口中的对象。例如

在您的 iFrame 中

```
<script>
    $(function () {
        $(document).click(function () {
            // call parent function to set focus
            parent.setFocus();
        });
    });
</script> 
```

在您的主页中

```
<script>

    function setFocus() {
        // focus on an element on your page.
        $('an-element-on-your-page').focus();
    }

    $(function () {

        $(window).focus(function (e) {
            // bind the blur event
            setBindingEvent();
        });

        var setBindingEvent = function () {
            // unbind
            $(window).unbind('blur');
            $(window).blur(function () {
                // check focus
                if ($('iframe').is(':focus')) {
                    // unbind the blur event
                    $(window).unbind('blur');
                }  
                else {
                    // stop countdown
                }                
            });
        };

        setBindingEvent();

    });
</script> 
```

这将允许您单击 iframe，将焦点设置回主页，然后停止倒计时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:10:01.947

由于 iframe 的隔离，在其内部单击对父级来说算作模糊。如果 iframe 的内容可以通过 ajax 引入，那将是一个更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-20T09:55:59.737

我也有同样的问题。就我而言，我无法访问 iframe 页面及其由 CMS 加载的内容，也无法更改所有 iframe。我的计时器用 setInterval() 计数，在间隔内，我检查了 Iframe。

```
const focus = function() {
	// timer start
	isBlured = 0;
};

const blur = function() {
  // timer stop
  isBlured = 1;
}

window.addEventListener('focus', focus);
window.addEventListener('blur', blur);

function intervalFunction() {

  var activeELM = document.activeElement.tagName;

  if (isBlured == 0 || activeELM == "IFRAME"){
      // dont stop countdown
    	var stopIframe = $('iframe').blur();     
  }

}
```

# c# - 如何放大图像并在照片窗口中显示

> ID：16037675
> 
> 赞同：-3
> 
> 时间：2013-04-16T12:56:38.247
> 
> 标签：c#, asp.net

当您从gridview单击图像按钮并将放大图像显示到窗口照片中时。

下面是我的代码......实际上它正在工作......但问题是我不知道如何放大图像......谢谢你分享你的知识......我很感激......

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
        DataKeyNames="P_No" DataSourceID="SqlDataSource1"
        style="margin-left:115px" AllowPaging="True"
        onselectedindexchanged="GridView1_SelectedIndexChanged">
        <Columns>
            <asp:BoundField DataField="P_No" HeaderText="P_No" ReadOnly="True"
                SortExpression="P_No" ItemStyle-BackColor="#FFFF66" ItemStyle-HorizontalAlign="Center"                         
ItemStyle-VerticalAlign="Middle" HeaderStyle-BackColor="#EAEA00" />
            <asp:BoundField DataField="Model" HeaderText="Model" SortExpression="Model" ItemStyle-    
BackColor="#FFFF66" HeaderStyle-BackColor="#EAEA00" />
            <asp:BoundField DataField="Price(Php)" HeaderText="Price(Php)"
                SortExpression="Price(Php)" ItemStyle-BackColor="#FFFF66" HeaderStyle-BackColor="#EAEA00" />
            <asp:BoundField DataField="ImageFilename" HeaderText="ImageFilename"
                SortExpression="ImageFilename" ItemStyle-BackColor="#FFFF66" HeaderStyle-BackColor="#EAEA00" />

        <asp:TemplateField HeaderText="Images" HeaderStyle-BackColor="#EAEA00" >
           <ItemTemplate>
               <!--<asp:Image ID="Image1" Height="50px" Width="60px" runat ="server" ImageUrl='<%#Eval("ImageFilename","~/Images/{0}") %>' /> -->
               <asp:ImageButton ID="ImageButton1" runat="server" Height="50px" Width="60px" ImageUrl='<%#Eval("ImageFilename","~/Images/{0}") %>'   />
          </ItemTemplate>
       </asp:TemplateField>

       </Columns>
    </asp:GridView>

        <asp:SqlDataSource ID="SqlDataSource1" runat="server"
        ConnectionString="<%$ ConnectionStrings:DatabaseConnectionString %>"
        SelectCommand="SELECT * FROM [DevelopTbl]"></asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:06:06.730

您可以使用客户端脚本来执行此操作。可以在[此处找到示例应用程序](http://www.aspsnippets.com/Articles/Image-Gallery-in-ASPNet-with-enlarge-image-preview-using-C-and-VBNet.aspx)

# python - Base64 解码

> ID：16037676
> 
> 赞同：1
> 
> 时间：2013-04-16T12:56:38.583
> 
> 标签：python, python-3.x, base64, byte, codec

我正在尝试解码 base 64 中的一些文本，但我不明白为什么在尝试这样做时会出错：

`b'Zm9v'.decode('base64_codec')`

引发的异常是：`TypeError: expected bytes, not memoryview`

`base64`PS：我知道有使用该模块的替代方案。但我有兴趣知道答案，只是出于好奇。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:09:45.817

不幸的是，`bytes.decode()`and`str.encode()`方法（正确地）只支持也可以在类型之间转换的编解码器。`bytes.decode()`必须*始终*返回一个`str`对象，而`str.encode()`必须返回`bytes`；请参阅[介绍这些编解码器的原始问题](http://bugs.python.org/issue7475)：

> 编解码器可以使用任意类型，只是 unicode 和 bytes 对象上的辅助方法仅支持 Python 3.x 中的一种类型组合。

因此，您看到的具体错误是由于该`bytes.decode()`方法总是期望返回一个 type 的值`str`。同样，该`str.encode()`方法拒绝不`bytes`作为返回值返回的编解码器：

```
>>> 'Ceasar'.encode('rot_13')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: encoder did not return a bytes object (type=str) 
```

因此，对于 bytes-to-bytes 和 str-to-str 编解码器，您需要`codecs`直接使用该模块：

```
import codecs

codecs.getdecoder('base64_codec')(b'Zm9v')[0] 
```

# ios - 如何在 Mac 的 xcode 中为 AVPlayer 制作音量滑块

> ID：16037678
> 
> 赞同：0
> 
> 时间：2013-04-16T12:56:42.067
> 
> 标签：ios, xcode, macos, volume, avplayer

所以我有我的收音机应用程序的简单代码：

```
 -(IBAction)europaPlus:(id)sender{

        NSLog(@"EuropaPlus work");

        if (clicked ==  0) {

            clicked = 1;

            NSString *urlAddress = @"http://cast.europaplus.ua/europaplus.aac";

            NSURL *urlStream = [NSURL URLWithString:urlAddress];

            radioPlus = [[AVPlayer alloc] initWithURL:urlStream];

            [radioPlus play];}

        else {

            NSLog(@"EuropaPlus not work");

            [radioPlus release];

            clicked = 0;

        }
} 
```

此外，我仅将 AVPLAYER 用于 URL 连接，但如何在 MAC OS 中为 AVPlayer 进行音量控制。我知道 IOS 中的 MPMVolumeControl，但我有 mac os 项目。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:12:20.177

```
player = [[AVAudioPlayer alloc] initWithContentsOfURL:
          [NSURL fileURLWithPath:resourcePath] error:&err];
player.delegate = self;
[player play];
player.volume=.number;
player.numberOfLoops=-number; 
```

* * *

```
-(IBAction)slidervaluechanged {

     player.volume=slider.value; 

} 
```

有关更多信息，请查看链接：

[http://developer.apple.com/iphone/library/documentation/MediaPlayer/Reference/MPVolumeView_Class/Reference/Reference.html](http://developer.apple.com/iphone/library/documentation/MediaPlayer/Reference/MPVolumeView_Class/Reference/Reference.html)以及[如何实现 MPVolumeView？](https://stackoverflow.com/questions/2795567/how-do-you-implement-an-mpvolumeview)

# sqlite - 从 Firefox Addon worker 操作 SQLite 数据库

> ID：16037680
> 
> 赞同：1
> 
> 时间：2013-04-16T12:56:44.663
> 
> 标签：sqlite, firefox-addon-sdk, xpcom, worker

我正在开发一个 Firefox 扩展，它需要经常写入 SQLite 数据库（这是出于一些实验目的，而不是生产或任何东西）。问题是写入数据库有相当多的开销，所以我认为我可以将这部分移动到后台工作人员，以免中断浏览活动。

现在我的问题是我无法从工作人员那里访问 XPCOM 组件；即做

```
Components.utils.import("resource://gre/modules/Services.jsm");
Components.utils.import("resource://gre/modules/FileUtils.jsm"); 
```

来自工人将不起作用（`Components`未定义）。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T21:00:45.290

请参阅 indexed-db 模块[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/indexed-db.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/indexed-db.html)

```
var { indexedDB } = require('indexed-db');

var request = indexedDB.open('MyDatabase');
request.onerror = function(event) {
  console.log("failure");
};
request.onsuccess = function(event) {
  console.log("success");
}; 
```

# c++ - 在服务器端识别客户端的方法

> ID：16037683
> 
> 赞同：3
> 
> 时间：2013-04-16T12:56:53.907
> 
> 标签：c++, architecture, client-server, server-side

我正在用 C++ 创建客户端 - 服务器应用程序。服务器将接受来自多个客户端的请求。每个客户都有在服务器上创建的个人帐户。身份验证后，我知道客户端使用特定 ip 登录到特定帐户。现在我想确定哪些请求考虑特定帐户，例如：

客户端`A`登录：

```
username: user
password: pass123 
```

服务器发现这些数据与`id`= 3 的帐户匹配。

现在，当这个客户端`A`发送一些请求时，我希望服务器访问（并最终更改）`id`= 3 的帐户。到目前为止，我已经提出了这两个想法：

1.  我有一个`std::map`where key is`client ip`和 value is `account id`。身份验证后，服务器将客户端的 ip 和它的帐户 id 存储到`map`其中，稍后当服务器收到来自客户端的请求时，它会检查它的 ip 并在`map`.

2.  我有一个`std::map`where key 是随机生成的 key 而 value 是`account id`. 认证后，服务器为这个特定的客户端生成随机密钥，将此密钥发送给客户端，客户端保存以供进一步使用，服务器存储此密钥并保存`account id`在`map`.

我想知道这些是否是处理此类问题的好方法。哪个更好，还要考虑安全性（这对我来说非常重要）？还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:26:09.023

> 1）我有一个 std::map ，其中键是客户端 IP，值是帐户 ID。身份验证后，服务器将客户端的 ip 和它的帐户 ID 存储到此映射中，然后当服务器收到来自客户端的请求时，它会检查它的 ip 并在映射中查找它。

IP 本身是不够的：可以有多个不同的客户端从同一个 IP 连接（来自同一台计算机，或者来自 NAT 后面的不同计算机，因此您只能看到 NAT IP）。如果要基于 IP 的唯一密钥，则需要使用客户端的 IP/端口元组。

> 2）我有一个 std::map ，其中键是随机生成的键，值是帐户 ID。认证后，服务器为这个特定的客户端生成随机密钥，将此密钥发送给客户端，客户端保存以供进一步使用，服务器将此密钥和帐户ID存储在地图中。

这是非常危险的：是什么禁止客户端发送另一个客户端的“会话 ID”而不是他的，从而劫持另一个客户端的会话？这与您可能想要阅读的 HTTP Session Hijacking 完全相同。简而言之：如果可以避免，请不要这样做。

* * *

其他可能的解决方案：

*   仍然使用`std::map`您可以使用您的套接字句柄作为键：它在服务器上必须是唯一的，因此不会出现混淆，并且它使您免于在每条消息中检索客户端的 IP/端口。

*   如果您的服务器使用旧的“每个连接一个线程”模型，那么您不必跳过这些圈。只需将您的会话数据与 Thread Local Storage 变量相关联即可。或者，几乎所有线程库都允许您将参数传递给线程，这些参数可用于将特定数据与您的线程相关联（参见下面的示例）。

*   如果您的服务器使用旧的“每个连接一个进程”模型（fork），那么它会更容易，每个进程都有自己的变量，因此您无需做任何特别的事情。

* * *

不幸的是，只要我们不知道您的服务器使用的模型（线程、分叉、选择、aio...？），您的问题就非常开放，因此很难给您一个明确的答案。

* * *

如果您使用的是线程模型，这（大致）是我通常的做法（C++11 线程，但任何其他线程库也可以这样做）：

```
class ClientSession {
public:
    ClientSession(int sock)
        : m_sock(sock),
          m_thread(&ClientSession::threadFunction, this)
    {
    }
private:
    int m_sock;
    WhateverType m_someSessionVariable;

    std::thread m_thread; // the thread object should be declared last so that
    // it is initialised last in the constructor, thus avoiding race conditions
    // during the initialisation (you really don't want the thread to access
    // your member variables if they are not yet initialised!)

    static void threadFunction(ClientSession* object) {
      object->threadMethod();
    }

    void threadMethod() {
      // handle your connection
      // the current ClientSession object (this) *is* your session
      // put whatever you want in it, eg. m_someSessionVariable
    }
};

//...

int sock_client = TEMP_FAILURE_RETRY(accept(sock_server, 0, 0));
if (sock_client >= 0)
  new ClientSession(sock_client); 
```

**警告：**显然**这段代码是有缺陷**的，它永远不会破坏 ClientSession 对象，所以它有内存泄漏，但我的意思是展示如何将线程与特定会话对象相关联，我将把它留给你来管理你的对象的生命周期取决于您的确切架构和需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:17:03.700

通常，您向客户端发送一些他们将在每次连接到您的服务器时发送的内容（也称为会话变量）。这是唯一的，用于识别传入请求。

您概述的第一个想法留下了一个问题，即本地网络上的两台或更多台计算机将与远程服务器共享相同的外部 IP。这意味着如果一个客户端在该 IP 下登录，则内部网络上的每个人都被验证为该用户。

如果您的连接过程的开始是从会话变量生成开始的，您可以识别来自同一客户端的连接，甚至在它经过身份验证之前，实际上不必知道任何 IP 信息。如果您在每个新连接上更改此设置，甚至在每次使用新生成的函数调用后，您总会遇到中间人攻击问题。

在会话创建/恢复过程之前，您需要在客户端和服务器之间的通信上实施一些安全方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T13:11:00.277

我认为使用单个密钥进行以后的身份验证不是很安全。通过中间人攻击，该密钥可能被截获，或者可能被复制和使用，而服务器不会注意到发生了什么。如果安全性对您来说真的很重要，请考虑在网络层之上使用适当的身份验证/加密库以确保安全通信。

# database-design - 多维数据集计算给定期间的客户数量

> ID：16037685
> 
> 赞同：0
> 
> 时间：2013-04-16T12:56:56.257
> 
> 标签：database-design, ssas, data-warehouse, cube

今天我们有一个维度叫做客户。

我们有几个 SCD2 属性，因此有 DateFrom 和 DateTo 列来指示记录在什么期间处于活动状态。我们还有一个创建客户时的 CreationDate 和一个删除客户时的 RemoveDate。

现在我想创建一个多维数据集，它可以在 excel 中显示给定时间段内唯一客户的数量。例如，假设我每个月都想显示未删除的客户数量。在excel中它可能看起来像这样

```
2013-01     2013-02     2013-03
100         120         80 
```

2013-02我们共有120个客户。这并不意味着我们从 2013-01 年获得了 20 个新客户，因为我们可能已经失去了几个客户。也许我们得到了 30 个新的而失去了 10 个。

如何才能做到这一点？我读过的所有示例都显示了与销售事实表的连接。但我想知道客户的数量。我想我设法通过使用无事实事实表和使用计数度量（不同的 CustomerId）解决了一些问题。但这仅提供了拆分客户总数的可能性。我想查看每个月的客户数量。所以我相信我需要以某种方式连接日期维度。但是我不能将它与创建日期或删除日期联系起来，因为那时它只会计算在那一天。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:08:27.060

看起来很简单......创建一个聚合事实表，它只记录给定客户在您想要跟踪的任何时间段内的“第一笔”交易。我假设您的销售事实表有销售日期？

客户 SCD 的日期不应该与销售日期有任何关系......

```
AGG_CUSTOMER_SHOP
------------------------
MONTH_NUMBER INTEGER
CUSTOMER_ID INTEGER 
```

您的 ETL 过程通过执行类似的操作来构建它

```
SELECT distinct month_number, customer_id 
  FROM fact_sales s 
  JOIN dim_date d on (s.date_id = d.date_id)
  JOIN dim_customer c on (c.customer_id = s.customer_id) 
```

您的日期暗淡为您提供月份编号（201301）或其他任何内容，您只需将其存储在汇总表中即可。

# java - 从 HTTP 响应中提取帖子正文

> ID：16037686
> 
> 赞同：0
> 
> 时间：2013-04-16T12:56:56.530
> 
> 标签：java, apache, http, get, httprequest

我正在尝试使用 httpClient（通过 apache）发布和获取数据。发布绝对没问题，我的代码没有问题，但是，我不能对获取数据说同样的话。

我试图从中获取数据的网站是：[http ://www.posttestserver.com/data/2013/04/16/01.13.04594755373](http://www.posttestserver.com/data/2013/04/16/01.13.04594755373)

我只想接收帖子的正文（即底部以最近案例开头的 JSON 字符串），但是，我当前使用的方法（以及我在网上找到的每个方法）返回时间、源 IP、标题和正文（基本上它会返回所有内容）。有没有办法解析出这个的主体？我不想遍历返回的字符串并告诉它查找文本“Begin Post Body”，我想要一种自然的方法来执行此操作。那存在吗？

TLDR：我只希望它返回帖子正文中的内容

这是我的代码：

```
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

public static void main(String[] args) throws ClientProtocolException, IOException{

    HttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet("http://www.posttestserver.com/data/2013/04/16/01.41.38521171013");
    HttpResponse response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    System.out.println(EntityUtils.toString(entity));

} 
```

这是返回的内容：

```
Time: Tue, 16 Apr 13 01:41:38 -0700
Source ip: 155.198.108.247

Headers (Some may be inserted by server)
UNIQUE_ID = UW0OwtBx6hIAACfjfl4AAAAA
CONTENT_LENGTH = 7627
CONTENT_TYPE = application/json
HTTP_HOST = posttestserver.com
HTTP_CONNECTION = close
HTTP_USER_AGENT = Apache-HttpClient/4.2.4 (java 1.5)
REMOTE_ADDR = 155.198.108.247
REMOTE_PORT = 54779
GATEWAY_INTERFACE = CGI/1.1
REQUEST_METHOD = POST
QUERY_STRING = 
REQUEST_URI = /post.php
REQUEST_TIME = 1366101698

No Post Params.

== Begin post body ==
{"Recent Cases":[{"descript..etc etc"}]}
== End post body == 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:59:37.860

您可以向以下方法发送一个 url，它会在没有任何标头详细信息的字符串中为您提供响应，因此在您的示例中只有 json.

```
private static String readUrl(final String urlString) throws Exception {
        BufferedReader reader = null;
        try {
            final URL url = new URL(urlString);
            reader = new BufferedReader(new InputStreamReader(url.openStream()));
            final StringBuffer buffer = new StringBuffer();
            int read;
            final char[] chars = new char[1024];
            while ((read = reader.read(chars)) != -1) {
                buffer.append(chars, 0, read);
            }
            return buffer.toString();
        } finally {
            if (reader != null) {
                reader.close();
            }
        }
    } 
```

# dependency-injection - 如何在 IOC 容器中注册类型，但以与容器无关的方式？

> ID：16037687
> 
> 赞同：0
> 
> 时间：2013-04-16T12:56:58.570
> 
> 标签：dependency-injection, ioc-container, autofac, service-locator

*我有一个使用 IOC 容器（Autofac，但可以是任何容器）的应用程序。

我也有外部开发的模块。每个模块都需要指定自己的 DI 容器设置，定义存储库，特定于其模块的服务。

在部署时，这些模块会通过 XML 配置手动注册到 Autofac。

通常，如果每个模块都想从 IOC 容器请求一个类型的实例，我们可以使用 ServiceLocator 模式。这将每个模块与特定的 IOC 容器类型分离，例如 Autofac/Unity/StructureMap/等。

但我想在注册时将每个模块与 IOC 容器分离。例如在做 container.Register().As();

所有的 IOC 容器都有不同的方法来实现几乎相同的事情，所以我想知道是否有一个标准模式。

**更新**：我专门寻找一种方法来不知道类型的注册而不是类型实例的解析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:44:48.750

由于这种情况，服务定位器模式已经失宠。将模块与 IOC 容器解耦绝对是一个好主意，但服务定位器模式意味着它们仍然需要以某种方式引用它。编写自己的通用 IOC 容器包装器不是任何人都应该忍受的任务。

这种情况下更普遍接受的模式是注入模块的依赖项（很可能通过构造函数注入）并且仅在代码的入口点引用 IOC 容器。然后将初始化模块，并满足其所有依赖项。由于 IOC 容器只在一个地方被引用，所以没有必要将它抽象掉。随便挑一个就行，以后改的话，只需要改代码中的一个类即可。

换句话说，每当一个模块向 IOC 容器请求一个对象的实例时，而是将该实例传递给模块的构造函数。如果您需要请求的对象具有运行时依赖项，则改为通过构造函数为它们传递一个工厂。

有关更多详细信息，请参阅[这篇](http://www.devtrends.co.uk/blog/how-not-to-do-dependency-injection-the-static-or-singleton-container)文章。

[Martin Fowler](http://martinfowler.com/articles/injection.html#ServiceLocatorVsDependencyInjection)对服务定位器的看法不那么苛刻，但我认为结论是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T09:10:14.933

自从这篇文章以来已经有很长时间了，但是我为此目的创建了一个名为“不可知论 IoC”的项目，该项目专门设计用于解决您描述的问题并使用不可知的核心 api 提供设置的能力您的注册，然后在最终实现中使用 nuget 包来解释它。

[https://github.com/cardinal252/Agnostic-Ioc](https://github.com/cardinal252/Agnostic-Ioc)

[http://cardinalcore.co.uk/agnostic-ioc/getting-started/](http://cardinalcore.co.uk/agnostic-ioc/getting-started/)

# google-analytics - 如何在谷歌分析中找到特定页面的所有内部网站流量

> ID：16037689
> 
> 赞同：-1
> 
> 时间：2013-04-16T12:57:10.360
> 
> 标签：google-analytics

我目前正在尝试检查谷歌分析中的一些统计数据，但遇到了一些困难。

我想看看有多少人登陆我的网站（任何页面）然后访问了特定页面。我只对内部网站流量感兴趣。所以我不想知道有多少人直接登陆特定页面。我只想知道他们是否首先登陆网站的其他地方并点击进入特定页面。

例如说我的网站是：

www.mysite.com

我想知道的页面是 www.mysite.com/awesome/

我想知道所有到达 www.mysite.com、www.mysite.com/page、www.mysite.com/anyothepage/ 等然后继续访问 www.mysite.com/awesome 的人/

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:21:16.207

这可能会在[GA 论坛](http://productforums.google.com/forum/#!forum/analytics)上得到更好的回答，因为这不是一个真正的编程问题，但您可以创建一个自定义报告来显示这些数据。

这是一个如何构建它的示例：

**指标**：页面浏览量，您想要的任何其他东西（跳出率等）

**维度钻取**：上一页路径

**过滤器**：

包括：页面：确切：/awesome/

包括：上一页路径：正则表达式：^/.*

您可能需要根据您的实际页面名称/路径调整这些过滤器。

# android - 在 SL4a 中的 Py4a 中无法使用 python 脚本

> ID：16037692
> 
> 赞同：0
> 
> 时间：2013-04-16T12:57:14.620
> 
> 标签：android, python, sl4a

**您在什么设备上遇到问题？** 夏新N821

**您在设备上运行什么固件版本？** 安卓 4.1.1

**哪些步骤将重现该问题？**

1.  创建以下 Python 脚本：

    ```
    导入安卓
    机器人 = android.Android()
    droid.makeToast('你好，安卓！')
    打印“你好世界！”
    ```

2.  运行脚本

**什么是预期的输出？** 必须打印“Hello world！” 并弹出“Hello Android！”

**你看到了什么呢？**看到这个错误：

dlopen libpython2.6.so

Traceback（最近的通话清单）：

文件“/storage/sdcard0/sl4a/scripts/hello_world.py”，第 2 行，在

```
droid = droid.Android() 
```

文件“/storage/sdcard0/sl4a/scripts/android.py”，第 34 行，在**Init中**

```
self.conn = socket.create_connection(addr) 
```

文件“/home/manuel/AptanaStudio3Workspace/python-for-android/python-build/output/usr/lib/python2.6/socket.py”，第 498 行，在 create_connection

`socket.gaierror: [Errno 7] no address associated with hostname.`

.

.

**请在下面提供任何附加信息。** 我的朋友有同样的手机和同样的问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T04:29:49.907

我在联想 P770 上遇到了完全相同的问题。后来我确认这是由于某些软件或 OEM ROM 与 IPV6 绑定到 localhost 造成的。我很幸运能在 Google 群组中获得 Robbie Matthews 的帮助。他编译了一个特殊的 SL4A 包来解决这个问题。

[http://code.google.com/p/android-scripting/wiki/Unofficial#Development_releases](http://code.google.com/p/android-scripting/wiki/Unofficial#Development_releases)

如果你锻炼了，不要感谢我。反而感谢他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T02:04:10.310

您的脚本与您的错误消息不匹配？

您的错误包括以下行，这是不正确的。

```
droid = droid.Android() 
```

它应该与您在给出的示例中所写的一样。

```
droid = android.Android() 
```

# php - PHP 步骤在 foreach 中创建两个

> ID：16037694
> 
> 赞同：-2
> 
> 时间：2013-04-16T12:57:15.367
> 
> 标签：php, html

我想用来`foreach`获取一个数组并`<td>`在`<table>`.
例如，奇数在第一`td`和偶数在第二`td`。
以下代码不提供正确的结果：

```
|------------------|---------------|
|                  |               |
|------------------|---------------|

<table cellpadding="0" cellspacing="0">
    <?php   
    $id=1;              
    foreach ($resultM as $value) {
        if ( ($id % 2) == 0 )
            echo "<tr><td><ul class='styledlist'><li style='width:250px;'><a id='{$value['name_mojtahed']}'>{$value['name_mojtahed']}</a></li></td></tr></ul>";
        else 
            echo "<tr><td><ul class='styledlist'><li style='width:250px;'><a id='{$value['name_mojtahed']}'>{$value['name_mojtahed']}</a></li></td></tr>";
        $id++;
    } ?>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:05:51.273

我这样做：

```
 <table>
    <tr>
    <?php foreach($resultM as $i=>$value) : ?>
    <td>
    <?php print $value ?>
    </td>
    <?php if($i%2 == 0 && $i != 0) :?>
    </tr><tr>
    <?php endif;?>
    <?php endforeach;?>
    </tr>
    </table> 
```

# points - 需要 JomSocial 用户积分

> ID：16037695
> 
> 赞同：0
> 
> 时间：2013-04-16T12:57:17.290
> 
> 标签：points, jomsocial

我试图让 JomSocial 2.8 中的 UserPoints 系统像学分一样工作。我想要求一定数量的积分才能使用规则。现在他们有给予和扣除积分，但没有要求一定数量的选项。

有人可以指导我找到解决方案来解决这个问题。我正在寻找插件/扩展或关于如何开发它的逻辑的想法。我是一名前端开发人员，具有 PHP 知识，因此不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T19:31:10.577

在没有多少帮助的情况下，我找到了一个与 jomsocial 和 kunena 集成的 joomla 插件。它被称为 AlphaUserPoints - www.alphaplug.com 一切以及我需要的许多扩展。希望这对某人有帮助！

编辑：这并没有与 jomsocial 完全集成，这意味着大多数没有足够积分的操作都不起作用。它们由 ajax 调用，并且没有被 aup 组件及时看到以停止操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T17:42:13.873

我知道这是一个老问题，但我最近也有同样的需求。看了几天后，我决定自己弄清楚。其中大部分来自 AUP 文档，因此您可以这样做： Jomsocial 4.2 - 最新版本 Open components/com_community/controllers/photos.php 在第 2924 行之后

```
$preMessage = '';

        if (CLimitsLibrary::exceedDaily('photos', $my->id)) {

            $preMessage = JText::_('COM_COMMUNITY_PHOTOS_LIMIT_PERDAY_REACHED');

            $disableUpload = true;

        } else {

            $preMessage = JText::_('COM_COMMUNITY_PHOTOS_DEFAULT_UPLOAD_NOTICE');

            $disableUpload = false;

        } 
```

添加：

```
//AlphaUserPoints start
$api_AUP =  JPATH_SITE.DS.'components'.DS.'com_alphauserpoints'.DS.'helper.php';
if ( file_exists($api_AUP))
{
require_once ($api_AUP);            
}
//Alphauserpoints Get user points
    $user = & JFactory::getUser(); 
    $userid = $user->id ; 
    $totalPoints = AlphaUserPointsHelper::getCurrentTotalPoints( '', $userid  ); 
// Function to check if enough points
if ($totalPoints < 5) { // enter your Points Cost per Upload

            $preMessage = JText::_('COM_COMMUNITY_PHOTOS_LIMIT_POINTS_REACHED');

            $disableUpload = true;

        } else {

            $preMessage = JText::_('COM_COMMUNITY_PHOTOS_POINTS_UPLOAD_NOTICE');

            $disableUpload = false;

        } 
```

现在转到第 61601 行 - 查找：

```
if ($my->id == 0) {

            $tokenId = $jinput->request->get('token', '', 'NONE');

            $userId = $jinput->request->get('uploaderid', '', 'NONE');

            $my = CFactory::getUserFromTokenId($tokenId, $userId);

            $session = JFactory::getSession();

            $session->set('user', $my);

        } 
```

之后添加：

```
//AlphaUserPoints start
$api_AUP = JPATH_SITE.DS.'components'.DS.'com_alphauserpoints'.DS.'helper.php';
if ( file_exists($api_AUP))
{
require_once ($api_AUP);            
}
//Alphauserpoints Get user points
$user = & JFactory::getUser(); 
$userid = $user->id ; 
$totalPoints = AlphaUserPointsHelper::getCurrentTotalPoints( '', $userid  ); 
  if (CLimitsLibrary::exceedDaily('photos', $my->id)) {
  $this->_showUploadError(true, JText::_('COM_COMMUNITY_PHOTOS_LIMIT_PERDAY_REACHED'));
            return;
        }
// Function to check if enough points
    if ($totalPoints < 5) {
    $this->_showUploadError(true, JText::_('COM_COMMUNITY_PHOTOS_LIMIT_POINTS_REACHED'));
    return;
        } 
```

现在转到您的 langauge/en-GB/en-GB.com_community.ini 文件在任何地方添加：

```
COM_COMMUNITY_PHOTOS_LIMIT_POINTS_REACHED="You do not have enough points to upload images. Images are 5 points each." 
```

将您的消息更改为您为积分收取的任何费用。还要确保您也调整了代码中的点数。您还可以调整并将此代码用于视频上传或文件上传。
如果有人能把它变成 AUP 或 JomSocial 的可安装插件，那就太棒了。
我希望这对其他人有帮助！

# xml - T的重载扩展方法

> ID：16037706
> 
> 赞同：2
> 
> 时间：2013-04-16T12:57:47.603
> 
> 标签：xml, vb.net, reflection, types, extension-methods

我想通过实例的属性创建一个 XML 文档。为此，我编写了两个扩展。

```
<Extension()>
Public Function ToXml(Of T)(ByVal source As T) As XmlDocument
    Dim oXmlDocument As New XmlDocument
    oXmlDocument.AppendChild(oXmlDocument.CreateXmlDeclaration("1.0", "utf-8", Nothing))
    oXmlDocument.AppendChild(oXmlDocument.CreateElement(XmlConvert.EncodeName(source.GetType.ToString)))

    For Each Item As System.Reflection.FieldInfo In source.GetType.GetFields
        Dim oElement As XmlElement = oXmlDocument.CreateElement(Item.Name)
        oElement.Attributes.Append(oXmlDocument.CreateAttribute("Value")).Value = Item.GetValue(Nothing).ToString
        oXmlDocument.DocumentElement.AppendChild(oElement)
    Next

    Return oXmlDocument
End Function

<Extension()>
Public Function ToXml(Of T)(ByVal source As IEnumerable(Of T)) As XmlDocument
    Dim oXmlDocument As New XmlDocument
    oXmlDocument.AppendChild(oXmlDocument.CreateXmlDeclaration("1.0", "utf-8", Nothing))
    oXmlDocument.AppendChild(oXmlDocument.CreateElement(XmlConvert.EncodeName(source.GetType.ToString)))

    For Each Item As T In source
        oXmlDocument.DocumentElement.AppendChild(oXmlDocument.ImportNode(Item.ToXml.DocumentElement, True))
    Next

    Return oXmlDocument
End Function 
```

第二种方法应该适用于类型 by `IEnumerable(Of T)`，第一种适用于所有其他类型。如果我尝试将它用于,或类似的实例`Button`，它可以正常工作。使用 ie 的实例也会调用第一个方法。似乎忽略了 for 的扩展，因为 T 的扩展范围更广。`String``Int32``List(Of T)``IEnumerable(Of T)`

是否有可能强制 a`List(Of T)`使用扩展名`IEnumerable(Of T)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T15:26:14.417

[重载“签名”](http://msdn.microsoft.com/en-us/library/s3tbathb.aspx)不包括通用约束，因此调整`Of T`with`As`子句似乎没有帮助。

对于简单（非泛型）接口，会出现相同的“问题”，因为选择了与类最接近的匹配项以供重载使用。

因此请注意，对于某些类，`List(Of Integer)`例如，两个签名是`ToXml(List(Of Integer))`，`ToXml(IEnumerable(Of Integer))`因此它会清楚地选择前者，即完全匹配。

因为“不是最具体的”。错误，我什至没有解决方案可以让您向未来的编码人员提示他们调用了错误的例程。我能建议的最好的方法是不要对可以是列表的对象使用重载:-(

即有`ToXmlFromObject(Of T)(ByVal source As T)`和`ToXmlFromList(Of T)(ByVal source As IEnumerable(Of T))`

而且，在运行时（ :-( ），您可以使用反射`ToXmlFromObject`来检查 Enumerables 的使用情况。像这样的东西（直接输入到 SO 文本框中）：

```
Debug.Assert(GetType(T) Is GetType(String) _
    OrElse Not (From i In GetType(T).GetInterfaces() _
        Where i Is GetType(IEnumerable)).Any) 
```

* * *

我还应该提到一些错误消息暗示的另一个选项：您可以继续重载`ToXml(As T)`and `ToXml(As IEnumerable(Of T))`，但不要依赖隐含的重载。即明确列出`(Of ElementType)`以确保`ToXml(Of ElementType)(As IEnumerable(Of ElementType))`调用版本。（当您确实`SomeType`实施时，这仍然会失败`IEnumerable(Of SomeType)`。）

* * *

### 错误的答案

*正如我在评论中提到的，这失败了，因为您想`T`在`IEnumerable(Of )`演员表中指定不同的类型。*

*另外我现在注意到这会失败，因为调用`ToXml`with`IEnumerable(Of Anything)`会出错，因为上面描述的两个签名都是相同的，所以它错误“重载解析失败，因为没有可访问的 'ToXml' 对于这些参数是最具体的：......不是最具体的。 ......不是最具体的。”。*

我认为您唯一的选择是在另一个方向手动“强制”重载；即在确切的情况下，检查接口是否匹配，并调用该重载：

```
<Extension()>
Public Function ToXml(Of T)(ByVal source As T) As XmlDocument
  Dim enumSource = TryCast(source, IEnumerable(Of T))
  If enumSource IsNot Nothing Then Return ToXml(enumSource)
  ... 
```

# jqgrid - jqgrid：如何在不同的列上排序

> ID：16037708
> 
> 赞同：0
> 
> 时间：2013-04-16T12:57:48.900
> 
> 标签：jqgrid, jqgrid-formatter

我在 jqGrid 上有一个“金额”列。当我点击“金额”列的顶部时，网格需要按另一个名为“应付金额”的列进行排序。

我怎样才能做到这一点。

谢谢，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:45:20.930

您没有发布您使用的 jqGrid 代码。作为第一个您应该尝试做的是在您称为“应付金额”的列名称的值中`index`为列设置属性。`Amount`

另一种方法是使用定义为函数`sorttype`的列的属性。`Amount`该方式适用于使用情况或远程`datatype: "local"`使用选项（“json”、“jsonp”或“xml”）。您需要做的只是为定义如下的列添加属性：`loadonce: true``datatype``sorttype``Amount`

```
{
    name: "Amount",
    sorttype: function (cellValue, rowData) {
        return rowData.AmountPayable; // use the value from another column for
                                      // defining of the position of sorted rows
    }} 
```

有关其他代码示例，请参见[答案](https://stackoverflow.com/a/6690875/315935)或[此答案。](https://stackoverflow.com/a/5296935/315935)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:53:44.827

如果您定义`onSortCol`函数，您可以测试正在排序的列，然后更改值。

前任。

```
onSortCol: function (index, iCol, sortorder) {    
    if(index === "Amount"){
        index = "AmountPayable";              
    }
}, 
```

# javascript - 一种将元素添加到 ListView 的方法

> ID：16037709
> 
> 赞同：0
> 
> 时间：2013-04-16T12:57:49.237
> 
> 标签：javascript, windows-store-apps

有没有向 ListView 添加元素的方法？我的目标是在不绑定数据的情况下做到这一点！例如：

```
 myListView.add("one");
     myListView.add("two"); 
```

电子抄送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T15:46:32.960

只需简单地将项目添加到您的初始列表中。如果您有绑定设置，这会自动发生。

html

```
<div id="simpleBinding" data-win-control="WinJS.UI.ListView"></div>

<div id="simpleBindingTemplate" data-win-control="WinJS.Binding.Template">
    <h3 data-win-bind="innerText:name" />
    <span>Name :</span><span data-win-bind="textContent: name"></span>
    <img data-win-bind="src:imageUrl" />
</div>

```

Javascript

```
 //Note you could also declare an object type to use here,
//and instantiate them in the list below 
var Person = WinJS.Binding.define({
    name: "",
    birthday: ""
});

//Using the above object
//var people = [
//    new Person({ name: "Bob", birthday: "2/2/2002" }),
//    new Person({ name: "Sally", birthday: "3/3/2003" }),
//    new Person({ name: "Fred", birthday: "2/2/2002" })
//];

//Or simply using JSON
var people = [{ name: 'mary', birthday: '1/1/2010' }, 
              { name: 'fred', birthday: '1/1/2012' }];

//create the binding wrapper
var simpleFriends = new WinJS.Binding.List(people);

//get the ref to your list view
var simpleListView = document.getElementById('simpleBinding').winControl;

//get your template
var simpleTemplate = document.getElementById('simpleBindingTemplate');

simpleListView.itemDataSource = simpleFriends.dataSource;
//can also set in the markup for this element
simpleListView.itemTemplate = simpleTemplate;

//add a new item. the binding update happens automatically
//Could use a Person object we defined
//simpleFriends.push(new Person({ name: "Dynamically added", birthday: "2/2/2002"}));

//or JSON
simpleFriends.push({ name: "Dynamically added", birthday: "2/2/2002"}); 

```

要删除项目，您可以使用 pop 或查看这篇文章以获取索引方法 [从 WinJS.Binding.List 中删除项目](https://stackoverflow.com/questions/13872703/removing-an-item-from-a-winjs-binding-list)

[App Builder for 'Day 10' App Builder](http://aka.ms/stackbuilder)上有一些很好的绑定内容

# apache-poi - 如何使用带有事件 API 的 Apache POI 获取 Excel 表中的行数

> ID：16037716
> 
> 赞同：0
> 
> 时间：2013-04-16T12:58:16.697
> 
> 标签：apache-poi, xls

我正在使用 Apache POI Event API 来读取大型 Excel 工作表。

整个操作很冗长，因为我必须将所有数据放入数据库。我想显示导入进度，即

```
Processing sheet 1 of 5, row 5123 of 40000. 
```

在文件开头声明了所有工作表，因此工作表数没有问题。

在文件或工作表的开头是否有一条记录，我可以从中读取工作表中的行数？如果是这样，它是哪条记录以及我应该检查哪个属性以找出行数？

或者确定行数的唯一方法是等到所有行记录都被读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T18:53:45.023

有一些方法可以获取工作表中的行数：

```
getLastRowNum() 
```

和

```
getPhysicalNumberOfRows() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T17:27:22.620

`getLastRowNum() return ->0`如果工作表有 1 行，如果工作表没有行，则此功能`return-> 0`，但`getPhysicalNumberOfRows() return ->0`如果工作表中没有行，如果工作表有一行，它将`return->1`

# android - Android暂停广播接收器

> ID：16037720
> 
> 赞同：0
> 
> 时间：2013-04-16T12:58:30.137
> 
> 标签：android, multithreading, broadcastreceiver

我的应用程序中有一个广播接收器，它等待屏幕打开/关闭。我想做的是：

```
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        pause some seconds...
        ...do something
    }
} 
```

如何停止当前线程进入 onReceive 方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:16:30.893

你不能也不应该暂停 BrodcastReceiver 也不应该 postDelayed 到 Handler();

你不应该因为那个线程需要做其他事情而停止它，所以不要因为它是一个糟糕的设计而阻止它。

而且您不能 postDelay 因为来自文档：

> 从 onReceive() 返回后，BroadcastReceiver 不再处于活动状态，它的托管过程仅与在其中运行的任何其他应用程序组件一样重要。这一点尤其重要，因为如果该进程仅托管 BroadcastReceiver（用户从未或最近没有与之交互的应用程序的常见情况），那么在从 onReceive() 返回时，系统将认为其进程为空并主动终止以便资源可用于其他更重要的流程。

这意味着它从 onReceive() 返回的那一刻，所有这些都可能很快被杀死。

如果您希望在广播后的某个时间发生某些事情，您可以启动一个服务，并且该服务等待一段时间，或者如果您想要等待的时间长于几秒钟，您应该只启动此服务在 AlarmManager 中，并让 AlarmManager 为您启动该服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:58:28.020

根据我们的简短说明，我建议`onReceive()`您将[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)与`set(RTC, System.currentTimeMillis()+10000, thePendingIntentToNotifyYou)`. *这样，除非*设备进入睡眠状态，否则您将在十秒后收到通知。（`RTC_WAKEUP`以其他方式使用。）

通过您的广播接收器，您还将被告知屏幕正在关闭和打开（如果您还没有这样做，您还需要收听以停止计时器）并且必须保持一个小状态机，以便在触发`thePendingIntentToNotifyYou`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T13:02:10.693

使用[`Handler.postDelayed`](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)方法。

所以你的代码将是这样的

```
Handler h = new Handler();
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        h.postDelayed(new Runnable(){
             public void run(){
                    // do something
             }
           },pause_time_in_milis);
    }
} 
```

# android - Android - 如何在底部 ActionBar 中添加更多项目

> ID：16037721
> 
> 赞同：0
> 
> 时间：2013-04-16T12:58:31.853
> 
> 标签：android, android-actionbar, actionbarsherlock

我在 Galaxy Note 2 和 Android 上工作。我想在 Activity 的底部 ActionBar 中添加 4 个文本项。但是，在添加第三个之后，第四个在纵向模式下不会出现在屏幕上，而是在横向模式下出现在顶部的 ActionBar 中。

我已经尝试了项目上的所有 Android 选项，结果始终相同。

我怎样才能用基本的 ActionBar 或另一个添加 4 ？

谢谢。

编辑：

我的 XML 菜单文件：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/it1"
        android:showAsAction="always"
        android:title="1"/>
    <item
        android:id="@+id/it2"
        android:showAsAction="always"
        android:title="2"/>
    <item
        android:id="@+id/it3"
        android:showAsAction="always"
        android:title="3"/>
    <item
        android:id="@+id/it4"
        android:showAsAction="always"
        android:title="4"/>
</menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:26:39.393

仅对文本使用 android:showAsAction="always" 不起作用，因为 Android 似乎对仅具有文本的操作项使用固定大小，而不管其长度如何。这（当然）不是一个记录的功能，但我在 Note II、One X 和 Galaxu Nexus 上对其进行了测试，所有这些都运行 JB，所以它似乎（至少）是一个 JB 问题。

我的建议是使用适用于三个以上操作项的图标而不是文本

# ios - UITableView 将其设置为无选择

> ID：16037723
> 
> 赞同：4
> 
> 时间：2013-04-16T12:58:32.807
> 
> 标签：ios, uitableview

如何将 a`UITableView`默认设置为无选择？ `indexPath.row = -1`或类似的东西？

这是我创建表的代码：

```
UITableView* tblThisTable = [[UITableView alloc] initWithFrame:CGRectMake(elementX, elementY, elementW, elementH)];
        tblThisTable.rowHeight = 30.0;
        tblThisTable.layer.borderColor = [colorManager setColor:51.0 :51.0 :51.0].CGColor;
        tblThisTable.layer.borderWidth = 1.0;
        tblThisTable.delegate = self;
        tblThisTable.dataSource = self; 
```

我对委托协议的实现：

```
#pragma mark - Table View Management
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return arrStates.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [arrStates objectAtIndex:indexPath.row];
    cell.textLabel.textColor = [colorManager setColor:66.0 :66.0 :66.0];
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:20.0];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    strSelectedState = [arrStates objectAtIndex:indexPath.row];
} 
```

我有一个数据管理器类，我在将用户条目保存到 plist 之前检查它们的值。这是与表相关的代码（我只有状态表）：

...

```
} else if ([[_arrAllElements objectAtIndex:i] isMemberOfClass:[UITableView class]]) {

                UITableView* tblThisTable = (UITableView*)[_arrAllElements objectAtIndex:i];

                strElementKey = @"State";
                int selectedRow = tblThisTable.indexPathForSelectedRow.row;
                if(selectedRow > -1) { 
                    strElementValue = [arrStates objectAtIndex:selectedRow];
                } else {
                    strElementValue = @"No Entry";
                } 
```

...

因此，如果用户在未在表中选择任何内容的情况下点击保存按钮，我仍然会为 selectedRow 获得 0 值，但没有显示为选中状态。我正在考虑 UISegementedControls ，您可以将它们设置为 -1 以不进行选择。桌子不应该做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:24:51.100

你是如何保存行的？如果您要保存一个未初始化的`NSInteger`/ `int`，这可能会解释为什么它默认为`0`.

* * *

当您向桌子索要 时`indexPathForSelectedRow`，您需要`nil`在获取`row`财产之前检查它是否是（路径`row`的`nil`总是是`0`）。这个更新的代码应该可以满足您的需要：

```
NSIndexPath *selectedPath = tblThisTable.indexPathForSelectedRow;
if (selectedPath != nil) { 
    strElementValue = [arrStates objectAtIndex:selectedPath.row];
} else {
    strElementValue = @"No Entry";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:00:17.297

将此代码放入您的 .m 文件中，它将取消选择选定的行。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:35:35.913

下面的解决方案将起作用。编辑了创建单元格的代码：

```
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle=UITableViewCellSelectionStyleNone;
    }

    cell.textLabel.text = [arrStates objectAtIndex:indexPath.row];
    cell.textLabel.textColor = [colorManager setColor:66.0 :66.0 :66.0];
    cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:20.0];

    return cell;
} 
```

我添加了一行：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

更多信息可以在这里找到：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:06:53.323

如果要将所有 UITableView 设置为默认为无选择（滚动也不可触摸）

然后使用表格视图的属性 -

```
tableView.userInteractionEnabled=NO; 
```

如果你想停止选择单元格，

```
cell.selectionStyle=UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-06T05:30:14.560

在斯威夫特

```
// IF tableview selected row
let selectedIndexPath = tableView_Main.indexPathForSelectedRow

if selectedIndexPath != nil {

  tableView_Main.deselectRowAtIndexPath(selectedIndexPath!, animated: true)

} 
```

# minix - 黑白 Hurd 和 Minix 有什么区别？

> ID：16037724
> 
> 赞同：10
> 
> 时间：2013-04-16T12:58:35.043
> 
> 标签：minix, mach, microkernel

知道两者都是微内核，b/w Mach（Hurd 所基于的）和 Minix 有什么区别。有任何架构差异吗？稍微了解一下“什么是 L4”会很有帮助。我找不到任何涉及此内容的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T08:04:14.683

GNU Mach 是 Mach 微内核的一个实现。它是 GNU Hurd 操作系统中的默认微内核。

MINIX 是基于 Andrew S. Tanenbaum 为教育目的创建的微内核架构的类 Unix 计算机操作系统。

我认为你的问题是不正确的。Linux 和 FreeBSD 有什么区别？每个操作系统都实现了自己的系统调用、应用程序接口等。

L4 是第二代微内核家族，一般用于实现类 Unix 操作系统，但也用于各种其他系统。L4 与其前身 L3 一样，是由德国计算机科学家 Jochen Liedtke 创建的，以应对早期基于微内核的操作系统的性能不佳。

阅读下面的一些链接：

*   [微内核架构](http://en.wikipedia.org/wiki/Microkernel)
*   [GNU马赫](http://en.wikipedia.org/wiki/GNU_Mach)
*   [迷你](http://en.wikipedia.org/wiki/Minix)
*   [L4 微内核系列](http://en.wikipedia.org/wiki/L4_microkernel_family)

# ios - 有没有一种方法可以使用 C 或 C++ 库在 iOS 上生成、创建或导出 .ppt 演示文稿

> ID：16037725
> 
> 赞同：3
> 
> 时间：2013-04-16T12:58:35.967
> 
> 标签：ios, objective-c, cocoa-touch

我有一个 UIView 包含与动画一起出现的子视图，如何使用包含子视图动画的 UIView 生成 .ppt 或 .keynote 演示文稿。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:31:21.563

我不认为这是可能的。最接近的方法是检查 Open Document Format 并尝试创建一个创建 ODF 文档的工具。它们可以导出为 PPT。但是，没有可以使用的开箱即用的解决方案。你需要写它。

您可以查看这个允许以编程方式创建、扫描和操作 ODF 文档的项目： [http ://wiki.apache.org/incubator/ODFToolkitProposal](http://wiki.apache.org/incubator/ODFToolkitProposal)

它在 Java 中，但应该给你一个想法。

# ruby-on-rails - 如何使 ldap 与 rails 中的设计一起工作？

> ID：16037732
> 
> 赞同：1
> 
> 时间：2013-04-16T12:58:54.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ldap

我正在使用设计，我尝试使用 ldap，但我所有的尝试都失败了。我关注了[http://vimeo.com/13105005](http://vimeo.com/13105005) ，我真的在寻求帮助。

```
Started POST "/users/sign_in" for 127.0.0.1 at 2013-04-16 18:01:54 +0530
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"N7Xkqk8nHWqK4tgiCxyX4wFccSO8ozhy+nxXqS19arA=", "user"=>{"email"=>"logesh@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
WARNING: Can't verify CSRF token authenticity
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'logesh@gmail.com' LIMIT 1
  LDAP: LDAP dn lookup: cn=logesh@gmail.com
  LDAP: LDAP search for login: cn=logesh@gmail.com
  LDAP: Authorizing user cn=logesh@gmail.com,dc=server,dc=local
  LDAP: LDAP dn lookup: cn=logesh@gmail.com
  LDAP: LDAP search for login: cn=logesh@gmail.com
DEPRECATION WARNING: an empty resource was given to Devise::Strategies::LdapAuthenticatable#validate. Please ensure the resource is not nil. (called from service at /Users/logesh/.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/webrick/httpserver.rb:111)
Completed 401 Unauthorized in 13ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"N7Xkqk8nHWqK4tgiCxyX4wFccSO8ozhy+nxXqS19arA=", "user"=>{"email"=>"logesh@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
WARNING: Can't verify CSRF token authenticity
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/sessions/new.html.erb within layouts/application (3.1ms)
Completed 200 OK in 8ms (Views: 6.5ms | ActiveRecord: 0.0ms) 
```

我不知道如何向前迈进。我为此苦苦挣扎了大约 2 天，但仍然无法解决。

当我注册时，用户保存在用户模型中，但登录不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:24:55.163

Is it possible that in the LDAP directory you are using, rather than the naming attribute being `cn=logesh@gmail.com`, rather the mail attribute has that value, and the full DN is something other than: `cn=logesh@gmail.com,dc=server,dc=local`

Thus, your config, if possible should search for mail=logesh@gmail.com to then get the DN from that user object to then attempt to bind.

# r - 如何在 R 中创建多个图形窗口

> ID：16037735
> 
> 赞同：1
> 
> 时间：2013-04-16T12:59:06.653
> 
> 标签：r, graph, window

默认情况下，运行包含多个绘图指令的 R 代码，例如：

```
charts.RollingPerformance(ManagerRet, width = 63, colorset = bluefocus)
chart.Histogram(managers[,1,drop=F], main = "Density", methods = c("add.density", "add.normal")) 
```

一旦创建了第一个图并运行了新的行代码，第二个图将在包含第一个图之前替换窗口中的第一个图。

因此如何在 R 中创建多个图形窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:01:45.583

您可以使用、`dev.new()`或`windows()`、或来创建新的绘图窗口。`win.graph()``x11()``X11()`

# .net - 制作具有水平和垂直标题的 WPF-UI 元素

> ID：16037736
> 
> 赞同：0
> 
> 时间：2013-04-16T12:59:13.710
> 
> 标签：.net, wpf, vb.net, scroll

我需要做如下图所示的事情：

[处置 http://img560.imageshack.us/img560/8721/dispo16042013134903.png](http://img560.imageshack.us/img560/8721/dispo16042013134903.png)

水平滚动时需要冻结人员（1），垂直滚动时需要冻结日期（2）。所以总是可以说这个 $Person 在 $Date 上做 ...(4)。此外，还需要显示该人每天做某事的附加信息（3）。

我的数据结构目前是：Person -> Dictionary of Days -> ObservableCollection of what is done on this day (可以是多件事)

我怎样才能以一种好的 WPF 方式做到这一点？最好是这样我只能将 DataContext 设置为我的 Person 集合，其他一切都由 WPF 完成。

我感谢您的帮助。

* * *

编辑：

```
Public Class DispoPersonViewModel
    Inherits ViewModelBase
    Implements iScheduleOrganizer

    Private _dbContext As infosoftEntities
    Private WithEvents _Person As Person
    Private _DictAZGSchedule As New Concurrent.ConcurrentDictionary(Of Date, DispoAZGScheduleViewModel)

    Public Sub New(ByVal Person As Person, Optional ByVal dbContext As IDBContext 
       'Getting the data for the person
    End Sub

    Public ReadOnly Property AZGSchedule(ByVal dat As Date) As BusinessObjects.AZG.AZGSchedule Implements iScheduleOrganizer.AZGSchedule
        Get
            Return Me._Person.AZGSchedule(dat)
        End Get
    End Property

    'I omit the whole load and initialize and check functions here 
 End Class 
```

和

```
 Public Class DispoAZGScheduleViewModel
    Inherits ViewModelBase

    Private _Person As DispoPersonViewModel
    Private WithEvents _AZGSchedule As AZG.AZGSchedule
    Private WithEvents _lSchedule As ObservableCollection(Of DispoScheduleViewModel)

    Public Sub New(AZGEinteilung As AZG.AZGSchedule, Person As DispoPersonViewModel)
        'initializing the AZGSchedule
        Using CSTeile.MyStack.Push("DispoAZGScheduleViewModel.New")
            _AZGEinteilung = AZGEinteilung
            _Person = Person
            Dim lSched As New ObservableCollection(Of DispoScheduleViewModel)
            For Each sc As Schedule In _AZGSchedule.ListAllSchedules.ToList
                lSched.Add(New DispoScheduleViewModel(et, _Person, Me))
            Next
            _lSchedule = lSched
        End Using
    End Sub

    Public ReadOnly Property ListAllSchedules As List(Of DispoScheduleViewModel)
        Get
            Using CSTeile.MyStack.Push("DispoAZGScheduleViewModel.ListAllEinteilung")
                Return _lEinteilung.ToList
            End Using
        End Get
    End Property
    Public ReadOnly Property fc As AZG.AGZErrorCache 'for displaying errors
        Get
            Using CSTeile.MyStack.Push("DispoAZGScheduleViewModel.fc")
                Return Me._AZGSchedule.fc.Result
            End Using
        End Get
    End Property

   'I omit here the whole hookup to my BussinessObjects it would get to much
End Class 
```

现在我在代码隐藏中“构建”了整个东西，它并没有做我想做的所有事情，而且渲染速度很慢:-(。

# ios - 我是否需要签署 IPA 文件才能访问 testflightapp.com？

> ID：16037743
> 
> 赞同：0
> 
> 时间：2013-04-16T12:59:29.843
> 
> 标签：ios, ipa

我在 iphone 上有 MyApp.app/ 文件夹，我的应用在 JB 手机上运行良好。但我想在 testflightapp.com 上尝试，但网站让我感到困惑。我知道我可以通过将内容复制到 Payload 目录然后压缩它来创建简单的 IPA。这将适用于 JB。但是如何从这个转移到测试飞行？

我没有使用 XCode，我使用 clang++ 从 iPhone 上的命令行编译。因此，请不要包含“在 XCode 中单击该菜单”之类的答案。顺便说一句，我的公司确实拥有 macbooks、macminis 和苹果开发者帐户，以及几十个 ipad 和 iphone，但这不是我的问题的一部分。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:03:21.370

是的，您需要使用 Development 或 AdHoc 配置文件对应用程序进行签名。TestFlight 将检查 UDID 的配置文件，以仅允许访问配置文件中设备的 IPA。

TestFlight 不适合越狱开发，即使它只是用于测试。

您可以轻松地创建自己的站点来提供无线安装，您可以尝试开源[HockeyKit](http://HockeyKit.net/)，它是 TestFlight 的自托管替代方案。

# cakephp - CakePhp 无法发送电子邮件

> ID：16037745
> 
> 赞同：0
> 
> 时间：2013-04-16T12:59:30.903
> 
> 标签：cakephp, smtp

当我尝试在 cakephp 中发送消息或注册新用户时，我收到：

```
Could not send email. 
```

错误：发生内部错误。堆栈跟踪

```
CORE\Cake\Network\Email\MailTransport.php line 47 → MailTransport->_mail(string, string, string, string, null)
CORE\Cake\Network\Email\CakeEmail.php line 1066 → MailTransport->send(CakeEmail)
CORE\Cake\Controller\Component\EmailComponent.php line 347 → CakeEmail->send(null)
APP\Plugin\Messages\Controller\MessagesController.php line 158 → EmailComponent->send()
[internal function] → MessagesController->add(string)
CORE\Cake\Controller\Controller.php line 486 → ReflectionMethod->invokeArgs(MessagesController, array)
CORE\Cake\Routing\Dispatcher.php line 187 → Controller->invokeAction(CakeRequest)
CORE\Cake\Routing\Dispatcher.php line 162 → Dispatcher->_invoke(MessagesController, CakeRequest, CakeResponse)
APP\webroot\index.php line 96 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
```

我是 CakePhp 的新手，我在 app/Config/email.php 中编辑了这个文件

```
 public $smtp = array(
    'transport' => 'Smtp',
    'from' => array('simone.zambenedetti@uniroma1.it' => 'My Site'),
    'host' => 'ssl://smtp.gmail.com',
    'port' => 465,
    'timeout' => 30,
    'username' => '**user**', //hidden
    'password' => '**my secret**', //hidden
    'client' => null,
    'log' => false
    //'charset' => 'utf-8',
    //'headerCharset' => 'utf-8',
); 
```

还编辑 lib/Cake/Network/Email/CakeEmail.php

```
 protected $_transportName = 'Smtp'; 
```

并编辑 lib/Cake/Network/Email/SmtpTransport.php

```
public function config($config = array()) {
    $default = array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'timeout' => 30,
        'username' => 'simone.zambenedetti@uniroma1.it',
        'password' => 'enomis58',
        'client' => null,
        'tls' => false
    );
    $this->_config = $config + $default;
} 
```

请帮助我......一切工作，而不是电子邮件或消息。如果您想重新创建错误，您可以在我的网站 [http://bbcd.bio.uniroma1.it/eventi/上注册](http://bbcd.bio.uniroma1.it/eventi/)

谢谢大家回答我。

* * *

这里的代码：

```
 foreach($usersTo as $userTo) {
                if($userTo['User']['notification'] && $userTo['User']['id']!=$this->Auth->user('id')) {
                    $this->set('message_id', $parent_id);
                    $this->set('message', $this->request->data['Message']['message']);
                    $this->Email->reset();
                    $this->Email->from = Configure::read('evento_settings.systemEmail');
                    $this->Email->to = $userTo['User']['username'].'  <'.$userTo['User']['email'].'>';
                    $this->Email->replyTo = Configure::read('evento_settings.systemEmail');
                    $this->Email->return = Configure::read('evento_settings.systemEmail');
                    $this->Email->subject = __('You have a new message in').' ';
                    $this->Email->subject.= Configure::read('evento_settings.appName');
                    $this->Email->delivery = 'mail';
                    $this->Email->template = 'Messages.new_message';
                    $this->Email->sendAs = 'both';
                    $this->Email->send();
                    //debug($this->Session->read('Message.email'));exit;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:38:57.917

终于……我解决了。我犯了一个错误，忘记配置梨邮件，终于我可以用smtp发送电子邮件了。如果有人需要帮助，可以查看本教程： [http ://www.youtube.com/watch?v=dKO4MfOpDVs](http://www.youtube.com/watch?v=dKO4MfOpDVs)

谢谢大家的回答。

# postgresql - 具有@OneToOne 关系的 Spring Data JPA 无法更新已持久化的实体

> ID：16037746
> 
> 赞同：2
> 
> 时间：2013-04-16T12:59:32.820
> 
> 标签：postgresql, unique-constraint, spring-data-jpa, one-to-one

我们得到了这样的设置：一个文档有一个元素列表，这些元素是 Element 的子类，在这个例子中是 Link。链接与资源具有@OneToOne 关系。只要我们一步创建整个对象图，一切都会奏效。

我们现在更改了代码以创建 Resource 实例，将其持久化并将其传递给我们的客户端（Web，序列化为 JSON 的对象）。客户端创建 Document 的实例并添加与现有资源的链接。之后，我们尝试持久化新文档。

此时操作失败，因为 JPA 尝试使用相同的 id 持久化已经存在的 Resource。我认为发生这种情况是因为 Resource 已分离，JPA 无法确定该实体是否必须合并或持久化。当我删除 CascadeType.ALL 并用 CascadeType.MERGE 替换它时，一切都很好，除了资源根本没有更新。

基本上工作流程如下：

*   创建和持久化资源
*   离开交易
*   开始交易
*   使用链接和（分离的）资源创建文档
*   错误

我们的 JPA 配置是否存在问题（查看我们的实体）？如果你能给我一个提示，我很想给你一杯啤酒……:-) TYIA。

我们的设置是：EclipseLink 2.4.1、Spring Data JPA 1.3.0（使用@Repository）和 PostgreSQL 9.2。

文档：

```
@Entity
public class Document implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @OneToMany(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)
    @OrderColumn
    @JoinColumn(name = "document_id")
    private List<Element> elements = new ArrayList<Element>();

    // getters and setters
} 
```

元素：

```
@Entity
@Inheritance(strategy = InheritanceType.
public class Element implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "document_id", insertable = false, updatable = false)
private Document document;

    // getters and setters
} 
```

关联：

```
@Entity
public class Link extends Element {

    @Column
    private String appearance;

    @Column
    private String referenceType;

    @OneToOne(cascade = CascadeType.ALL, orphanRemoval = true, fetch = FetchType.LAZY)
    private Resource resource;

    // getters and setters
} 
```

资源：

```
@Entity
public class Resource {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Integer id;

    @Column
    private String uri;

    // getters and setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:29:20.400

CascadeType.MERGE 旨在级联合并操作，例如：

```
Document document = getDetachedDocumentSomehow();
em.merge(document) 
```

将整个对象图合并到持久性上下文。

您需要做的是将分离的 Resource 实例合并到第二个事务的持久性上下文中。

```
Resource resource = getDetachedResourceSomehow();
mergedResource = em.merge(resource)
link.setResource(mergedResource) 
```

**编辑：** 不使用实体管理器：

```
Resource resource = getDetachedResourceSomehow();
managedResource = resourceDao.findOne(resource.getId)
link.setResource(managedResource) 
```

要点是您必须设置资源的托管实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:02:32.457

我想我在 EclipseLink 实现中触发了一个错误。对于偶然发现相同问题的人，这里有一些有用的链接：

[http://chandanpandey.com/2012/12/22/persisting-a-detached-entity-in-jpa](http://chandanpandey.com/2012/12/22/persisting-a-detached-entity-in-jpa) [https://bugs.eclipse.org/bugs/show_bug.cgi?id=324941](https://bugs.eclipse.org/bugs/show_bug.cgi?id=324941)

解决方法是禁止 CascadeType.ALL

```
@OneToOne(cascade = CascadeType.ALL, orphanRemoval = true) 
```

而是使用

```
@OneToOne(cascade = {CascadeType.MERGE, CascadeType.REFRESH, CascadeType.REMOVE, CascadeType.DETACH}, orphanRemoval = false) 
```

并禁用 orphanRemoval。这肯定有一些缺点，我希望这将在 EclipseLink 的未来版本中得到修复（我对此表示怀疑，因为错误报告来自 2010 年）。

希望这对任何人都有帮助。

# java - spring上传文件问题

> ID：16037747
> 
> 赞同：10
> 
> 时间：2013-04-16T12:59:34.783
> 
> 标签：java, spring, model-view-controller, multipart

我需要将文件从浏览器上传到服务器。我使用 spring 3.2 作为我的 web 框架。

所以我像这样配置了我的应用程序。

1 - 我有 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <context-param>
        <param-name>contextClass</param-name>
        <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
    </context-param>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>racoonsoft.chaos.settings</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>MyServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>MyServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>admin/library</welcome-file>
    </welcome-file-list>

</web-app> 
```

2 - MainConfig 类

```
@Configuration
@Import({WebConfig.class })
public class MainConfig {
    @Bean
    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }

    @Bean
    public static ScheduledAnnotationBeanPostProcessor scheduledAnnotationBeanPostProcessor() {
        return new ScheduledAnnotationBeanPostProcessor();
    }

    @Bean
    public static StandardServletMultipartResolver multipartResolver() {
        StandardServletMultipartResolver resolver = new StandardServletMultipartResolver();
        return resolver;
    }
} 
```

3 - 处理分段上传的控制器

```
@Controller
@MultipartConfig(fileSizeThreshold=1024*1024*2, // 2MB
        maxFileSize=1024*1024*10,      // 10MB
        maxRequestSize=1024*1024*50)
public class FileUpload
{
    public static final int UPLOAD_RESULT_OK = 100000;
    @Autowired
    BookDao book_dao;

    @RequestMapping(value = "/admin/library/upload_file", method = RequestMethod.POST)
    public String saveFiles(@RequestParam("file-file") MultipartFile file) throws IOException
    {
        if (!file.isEmpty())
        {
            byte[] bytes = file.getBytes();
            return "redirect:caps/total_fail";
        }
        else
        {
            return "redirect:caps/total_fail";
        }
    }
} 
```

4 - 我放置表单以提交文件的jsp

```
...<form method="post" action="/admin/library/upload_file" enctype="multipart/form-data">
                <input type="text" name="name"/>
                <input type="file" name="file-file"/>
                <input type="submit"/>
            </form>... 
```

当我提交我的表格时，我得到了一个例外

```
org.springframework.web.bind.MissingServletRequestParameterException: Required MultipartFile parameter 'file-file' is not present
    org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:202) 
```

我不知道为什么。当我删除 @RequestParam 注释时，我调用了我的方法，但文件参数 = null。我的问题是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-27T23:30:38.260

我通过将以下内容添加到我的 spring 配置文件来解决此问题：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver" /> 
```

（我得到的错误是“org.springframework.web.bind.MissingServletRequestParameterException：必需的MultipartFile参数'myFile'不存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-09T16:45:20.077

我可以做到

```
@Override
    protected void customizeRegistration(ServletRegistration.Dynamic registration) {

        MultipartConfigElement multipartConfigElement = new MultipartConfigElement("/",100000, 200000, 50000);

        registration.setMultipartConfig(multipartConfigElement);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T18:23:59.820

@user64141 是对的，但如果使用 Java 配置而不是 xml，请尝试

```
@Bean
public MultipartResolver multipartResolver() {
    return new CommonsMultipartResolver();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:08:51.220

您还需要[`MultipartFilter`](http://static.springsource.org/spring/docs/1.2.9/api/org/springframework/web/multipart/support/MultipartFilter.html)为您的 webapp 配置。根据其 Javadoc，它使用 MultipartResolver 解析多部分请求（但您已经配置了那个）。您需要将其映射到处理文件上传的控制器的（部分）请求路径。

首先，添加`MultipartFilter`到您的 web.xml：

```
<filter>
    <filter-name>multipartFilter</filter-name>
    <filter-class>org.springframework.web.multipart.support.MultipartFilter</filter-class>
</filter> 
```

接下来，将过滤器映射到需要接受文件上传的（部分）URL：

```
<filter-mapping>
    <filter-name>multipartFilter</filter-name>
    <url-pattern>/admin/library/upload_file</url-pattern>
</filter-mapping> 
```

# ruby - ruby 元编程方法名称

> ID：16037751
> 
> 赞同：1
> 
> 时间：2013-04-16T12:59:41.173
> 
> 标签：ruby, metaprogramming

我尝试获取调用当前方法的方法的名称

```
def first_method
  my_method
end

def second_method
  my_method
end

def my_method
  puts "called from: #{method_name}"
end 
```

和预期的输出：

“调用自：first_method”

“调用自：last_method”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:03:14.470

```
def a
  c
end
def b
  c
end
def c
  p caller
end

a
#=> ["/Users/phrogz/Desktop/tmp.rb:2:in `a'", "/Users/phrogz/Desktop/tmp.rb:11:in `<main>'"]
b
#=> ["/Users/phrogz/Desktop/tmp.rb:5:in `b'", "/Users/phrogz/Desktop/tmp.rb:12:in `<main>'"] 
```

您可以使用正则表达式`caller[0][/`(.+?)'/,1]`来匹配第一个中的名称。

[这个答案](https://stackoverflow.com/a/15098459/405017)对 Ruby 2.0+ 有更好的解决方案

另见：[https ://github.com/banister/binding_of_caller](https://github.com/banister/binding_of_caller)

# c# - WPF - 使用鼠标事件在画布上绘图

> ID：16037753
> 
> 赞同：25
> 
> 时间：2013-04-16T12:59:44.323
> 
> 标签：c#, wpf, wpf-controls

我在处理画布上的鼠标事件时遇到问题。我想用鼠标在上面画，我想出了这些事件处理程序，但是当我开始画的时候它们什么都不做。

```
 private void paintSurface_MouseDown(object sender, MouseButtonEventArgs e)
    {
        if (e.ButtonState == MouseButtonState.Pressed)
            currentPoint = e.GetPosition(this);
    }

    private void paintSurface_MouseMove(object sender, MouseEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            Line line = new Line();

            line.Stroke = SystemColors.WindowFrameBrush;
            line.X1 = currentPoint.X;
            line.Y1 = currentPoint.Y;
            line.X2 = e.GetPosition(this).X;
            line.Y2 = e.GetPosition(this).Y;

            currentPoint = e.GetPosition(this);

            paintSurface.Children.Add(line);
        }
    } 
```

你能告诉我缺少什么或如何重写它以便它开始工作吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-04-16T13:11:44.580

我敢打赌你的画布没有收到鼠标事件，因为它的背景属性设置为透明

这对我来说很好。

![在此处输入图像描述](https://i.stack.imgur.com/Bnatf.png)

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Canvas  Name="paintSurface" MouseDown="Canvas_MouseDown_1" MouseMove="Canvas_MouseMove_1" >
        <Canvas.Background>
            <SolidColorBrush Color="White" Opacity="0"/>
        </Canvas.Background>
    </Canvas>
</Window>

using System;
using System.Threading;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Input;
using System.Windows.Shapes;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {

        Point currentPoint = new Point();

        public MainWindow()
        {
            InitializeComponent();
        }

        private void Canvas_MouseDown_1(object sender, System.Windows.Input.MouseButtonEventArgs e)
        {
            if (e.ButtonState == MouseButtonState.Pressed)
                currentPoint = e.GetPosition(this);
        }

        private void Canvas_MouseMove_1(object sender, System.Windows.Input.MouseEventArgs e)
        {
            if (e.LeftButton == MouseButtonState.Pressed)
            {
                Line line = new Line();

                line.Stroke = SystemColors.WindowFrameBrush;
                line.X1 = currentPoint.X;
                line.Y1 = currentPoint.Y;
                line.X2 = e.GetPosition(this).X;
                line.Y2 = e.GetPosition(this).Y;

                currentPoint = e.GetPosition(this);

                paintSurface.Children.Add(line);
            }
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-24T17:16:35.990

简单使用 InkCanvas

```
 <InkCanvas x:Name="InkCanvas" x:FieldModifier="public" Background="Transparent" Opacity="1" EditingMode="GestureOnly" ForceCursor="True" Cursor="Pen" >
                            <InkCanvas.DefaultDrawingAttributes>
                                <DrawingAttributes Color="White" Width="7" Height="7" />
                            </InkCanvas.DefaultDrawingAttributes>
                        </InkCanvas> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-20T02:03:45.560

使用 Line 时，粗线（line.StrokeThickness = 20）如下所示：

[![在此处输入图像描述](https://i.stack.imgur.com/Dk1g4.png)](https://i.stack.imgur.com/Dk1g4.png)

所以我尝试了 PolyLine 并且工作正常。（来自这个例子[http://www.c-sharpcorner.com/uploadfile/mahesh/polyline-in-wpf/](http://www.c-sharpcorner.com/uploadfile/mahesh/polyline-in-wpf/)）

```
Canvas.MouseMove += (sender, args) =>
{
    if (args.LeftButton == MouseButtonState.Pressed)
    {
        Polyline polyLine;
        if (PathModeCanvas.Children.Count == 0)
        {
            polyLine = new Polyline();
            polyLine.Stroke = new SolidColorBrush(Colors.AliceBlue);
            polyLine.StrokeThickness = 10;

            Canvas.Children.Add(polyLine);
        }

        polyLine = (Polyline)Canvas.Children[0];
        Point currentPoint = args.GetPosition(Canvas);
        polyLine.Points.Add(currentPoint);
   }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T13:26:50.597

```
public partial class MainWindow : Window
    {
        Line newLine;
        Point start;
        Point end;

    public MainWindow()
    {
        InitializeComponent();
    }

    private void DrawCanvas_MouseDown_1(object sender, MouseButtonEventArgs e)
    {
        start = e.GetPosition(this);
    }

    private void DrawCanvas_MouseMove_1(object sender, MouseEventArgs e)
    {
        if (e.LeftButton == MouseButtonState.Pressed)
        {
            end = e.GetPosition(this);
        }
    }

    private void DrawCanvas_MouseUp_1(object sender, MouseButtonEventArgs e)
    {

        newLine = new Line();
        newLine.Stroke = SystemColors.WindowFrameBrush;
        newLine.X1 = start.X;
        newLine.Y1 = start.Y;
        newLine.X2 = end.X;
        newLine.Y2 = end.Y;

        DrawCanvas.Children.Add(newLine);
    }
} 
```

# scala - 使用解析器组合器构造类型检查解析器

> ID：16037756
> 
> 赞同：0
> 
> 时间：2013-04-16T12:59:48.000
> 
> 标签：scala, generics, casting, parser-combinators

目前，我正在尝试`Reader[Token]`在 Scala 中解析 a 。因此，我想在解析步骤中检查 a`Token`是否是特定类的元素（例如`AToken`）。我可以使用以下代码轻松做到这一点：

```
def aToken = acceptIf(_.isInstanceOf[AToken])("Token " + _ + " is not of type AToken")
  ^^ { _.asInstanceOf[AToken] } 
```

这工作得很好。但我有几种类型要检查。所以对于每一种类型，我都需要在上面再写一遍。所以我想要一些`acceptIfInstanceOf[T]`自动（神奇地？）为 type 创建一个抽象方法`T`。

我目前的解决方案仍然是两步：

```
def acceptIfInstanceOf[T](implicit m: Manifest[T]) : Parser[Elem] =
  acceptIf(_.getClass == m.runtimeClass)("" + _ + " is not of type " + m)
def aToken = acceptIfInstanceOf[AToken] ^^ { _.asInstanceOf[AToken] } 
```

这也有效，但我想摆脱函数应用程序`aToken`并将其直接包含在`acceptIfInstanceOf`. 可悲的是，这不起作用：

```
def acceptIfInstanceOf[T](implicit m: Manifest[T]) : Parser[T] =
  acceptIf(_.getClass == m.runtimeClass)("" + _ + " is not of type " + m)
  ^^ { m.runtimeClass.cast(_) } 
```

我从 Scala 编译器收到以下错误消息：

```
scala: type mismatch;
found   : _$1 where type _$1
required: T
def acceptIfInstanceOf[T](implicit m: Manifest[T]): Parser[T] =
  acceptIf(_.getClass == m.runtimeClass)("" + _ + " is not of type " + m)
  ^^ { m.runtimeClass.cast(_) }
                          ^ 
```

有人知道是否以及如何构建这样的东西吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:32:04.990

如[huynhjl](https://stackoverflow.com/users/257449/huynhjl%20huynhjl)所述，使用`_.asInstaceOf[T]`替代解决了最初的问题：`m.runtimeClass.cast(_)`

```
def acceptIfInstanceOf[T](implicit m: Manifest[T]) : Parser[T] =
  acceptIf(_.getClass == m.runtimeClass)("" + _ + " is not of type " + m)
  ^^ { _.asInstanceOf[T] } 
```

然而，检查`_.getClass == m.runtimeClass`显然忽略了所有包含的子类型语义——仅仅是因为我们检查了两个对象`_.isInstanceOf`的相等性。`Class`

如果我想保持 的语义`isInstanceOf`，我必须使用以下测试：

```
reflect.ClassManifest.singleType(_) <:< m 
```

但由于这在 2.10 中已被弃用，我现在替换`Manifest`并`TypeTag`使用以下内容：

```
def acceptIfInstanceOf[T](implicit tag: TypeTag[T]): Parser[T] =
  acceptIf(currentMirror.reflect(_).symbol.toType <:< typeOf[T])
  ("" + _ + " is not of type " + tag.tpe)
  ^^ { _.asInstanceOf[T] } 
```

我从Stack Overflow 上的[另一个问题](https://stackoverflow.com/questions/13827365/replacing-deprecated-manifest-type-witness-in-scala-2-10 "在 2.10 中替换已弃用的清单类型见证")中得到了上述解决方案。

# powershell - 使用 New-Module -AsCustomObject 创建派生的自定义类型

> ID：16037758
> 
> 赞同：2
> 
> 时间：2013-04-16T12:59:48.250
> 
> 标签：powershell

是否可以使用 New-Module cmdlet 创建从另一个自定义类型派生的自定义类型？

例子：

```
function New-Shape
{
    New-Module -ArgumentList $args -AsCustomObject {
        param (
            [string]$position
            )
        {
            $script:position = $position
        }

        Export-ModuleMember -Variable Position
    }
}

function New-Circle
{
    # How to derive Circle from Shape?
    New-Module -ArgumentList $args -AsCustomObject {
        param (
            [string]$radius
            )
        {
            $script:radius = $radius
        }

        Export-ModuleMember -Variable Radius
    }
}

# So that we can do

$circle = New-Circle $position $radius

$circle.Position
$circle.Radius 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:03:47.747

AFAIK 这在普通的 PowerShell 中不起作用（至少不需要花费一些时间），但是应该可以[使用](http://psclass.codeplex.com/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T09:01:43.103

动态模块有强大的魔力，但它们有时会表现得很奇怪。但是，这似乎有效。我添加了一个脚本块和一个注释属性，只是为了证明它是可行的。小心数组。

```
 function New-Shape
    {
        New-Module -ArgumentList $args -AsCustomObject {
            param (
                [string]$position
            )
            {
                $script:position = $position
            }

            Export-ModuleMember -Variable Position
        }
    }

    function New-Circle
    {
        param
        (
            [string]$position,
            $radius
        )

        $circle = new-shape $position
        $circle | Add-Member -NotePropertyName radius -NotePropertyValue $radius
        $circle | Add-Member -PassThru -MemberType ScriptProperty -Name "Circumference" -force -Value {
            $this.radius * [math]::Pi * 2
        }
    }

    $MyCircle = new-circle '34,3'  2.56
    $myCircle.position
    $myCircle.radius
    $MyCircle.Circumference
    $MyCircle | gm 
```

# asp.net - 文件不存在 - favicon.ico

> ID：16037762
> 
> 赞同：1
> 
> 时间：2013-04-16T12:59:53.287
> 
> 标签：asp.net, vb.net

我已将 ASP.NET 网站拆分为 Web 应用程序（AppCode 类现在是一个单独的 DLL）。

我有一个 Global.asax 文件。当我启动一个网页时，我现在收到一个错误，上面写着：“文件不存在”网页加载成功。

经过进一步分析，Web 应用程序似乎正在寻找一个名为：favicon.ico 的文件。这个文件是什么？

我用谷歌搜索过这个，我可以浏览这样的网页：[文件不存在 Exception-favicon.ico](https://stackoverflow.com/questions/14474391/file-does-not-exist-exception-favicon-ico)。我还没有找到答案。

似乎 Web 应用程序会引发错误，但网站不会。

**更新** 我创建了一个空白网站项目，其中包含一个网页（default.aspx）和 Global.asax。然后，我使用一个网页 (default.aspx) 和 Global.asax 创建了空白 Web 应用程序项目。两个 Global.asax 文件都包含 Application_Error 子例程。我发现有问题的错误仅出现在 Web 应用程序中。因此，我相信 web 应用程序项目需要 favicon.ico。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:04:01.233

favicon.ico 是一个小图像，将在浏览器的页面选项卡中呈现。您可以使用[http://www.favicon.cc/生成它](http://www.favicon.cc/)

生成后，您可以将文件放在网站的根目录下，然后查看错误是否仍然存在。

# cognos - 从 Cognos 10 导入恢复

> ID：16037770
> 
> 赞同：0
> 
> 时间：2013-04-16T13:00:27.573
> 
> 标签：cognos

我已将 Cognos 8 中的完整内容存储导入到我的 Cognos 10.1 环境中，认为它会将现有数据合并到我的 Cognos 10 数据中……不用说我现在很伤心。有没有办法在没有备份的情况下恢复到以前的环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T14:29:08.033

Cognos 中没有内置恢复或回滚功能，因此如果没有内容存储数据库的备份，您将不走运。

我建议您定期备份您的环境。您还应该为 Cognos 实现某种类型的版本控制/部署工具（例如 MotioCI）。

MotioCI 会主动对 Cognos 中的所有更改进行版本控制，并将帮助您进行这些类型的部署。它还具有部署的“撤消”功能（如果你想回滚整个部署，你可以很容易地做到这一点）。

您可以在此处找到更多信息：

[http://www.motio.com/products/ci/cognos-version-control.do](http://www.motio.com/products/ci/cognos-version-control.do)

此外 - 本文将为您提供一些关于应该在 Cognos 中进行版本控制的好主意：

[http://info.motio.com/Blog/bid/76378/4-Common-Version-Control-Scenarios-in-Cognos-Connection](http://info.motio.com/Blog/bid/76378/4-Common-Version-Control-Scenarios-in-Cognos-Connection)

# apache - 如何从 apache camel 调用 CXF 异步 Web 服务

> ID：16037777
> 
> 赞同：1
> 
> 时间：2013-04-16T13:00:40.310
> 
> 标签：apache, xmpp, cxf, apache-camel, openfire

我有一个 javascript 客户端，它使用 apache tomcat 服务器中的回调调用异步 Web 服务。Webservice 将请求发送到 xmpp 服务器并返回。我有另一个接收器组件，它接收来自 xmpp 服务器的消息处理它并将响应放回另一个 xmpp 接收器队列中。现在我想通过将 Apache Camel 连接到接收者队列来了解如何通知客户端回调。我们在 apache camel 中是否有任何选项可以做到这一点。

如果您对此有任何想法，请告诉我。

谢谢洛克什

# python - 通过应用引擎从谷歌云存储中删除文件？

> ID：16037778
> 
> 赞同：0
> 
> 时间：2013-04-16T13:00:41.997
> 
> 标签：python, google-app-engine, flask, google-cloud-storage

我使用 Flask 和 App Engine 开发了一个应用程序。我能够在谷歌云存储中上传文件，但无法删除文件。

我正在使用：`files.delete('/gs/bucket/file.pdf')`删除文件。

应用程序执行此行，但文件不会从云存储中删除。

根据[https://developers.google.com/appengine/docs/python/googlestorage/functions#delete](https://developers.google.com/appengine/docs/python/googlestorage/functions#delete)，它应该可以工作。

它甚至不在本地开发服务器中工作。

请让我知道，我缺少什么或者有什么更好的方法来实现这一点？

# java - 如何使用 mouselistener 更改面板？

> ID：16037781
> 
> 赞同：0
> 
> 时间：2013-04-16T13:00:45.690
> 
> 标签：java, swing, jpanel, awt, mouselistener

我希望面板在鼠标悬停时展开并显示按钮和内容，然后鼠标退出面板必须返回顶部原始大小。到目前为止，我只能打印一条消息：

```
public JPanel GUI()
{
     final JPanel totalGUI = new JPanel();
     totalGUI.setBackground(Color.blue);
     totalGUI.setLayout(null);

    //+++++++++++++++
    //  -   -   -   -   -   -   PANEL 1!
    //+++++++++++++++       

    JPanel SearchPanel = new JPanel();  //Create new grid bag layout
    SearchPanel.setLocation(5, 5);
    SearchPanel.setSize(420, 120);
    totalGUI.add(SearchPanel);

    SearchPanel.addMouseListener(this);

    return totalGUI;
}

public void mouseEntered(MouseEvent e) {
       System.out.print("Mouse entered");
    }
public void mouseExited(MouseEvent e) {
        System.out.print("Mouse exited");
    }

private static void createAndShowGUI()
{
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame("RWB");

    gay3 demo = new gay3();
    frame.setContentPane(demo.GUI());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(false);
    frame.setSize(650, 500);    
    frame.setVisible(true);

}

public static void main(String[] args)
{
    createAndShowGUI();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:36:24.617

您可以在`mouseEntered`and`mouseExited`方法中执行此操作：

```
JPanel source = (JPanel)e.getSource();
//Edit the searchPanel here 
```

如果`searchPanel`不是唯一使用 this 的组件`MouseListener`，您可能首先必须检查源是否真的是一个实例`JPanel`：

```
Object o = e.getSource();
if(o instanceof JPanel) {
    JPanel source = (JPanel)o;
    //Edit the searchPanel here
} 
```

如果您知道源是`JPanel`.

# c++ - 如何按数字获得长长的面具？

> ID：16037785
> 
> 赞同：0
> 
> 时间：2013-04-16T13:01:06.123
> 
> 标签：c++

假设列出我们使用的所有掩码：

```
for (unsigned long long mask = 1; mask != 0; mask <<= 1) {

} 
```

但是在这里我们使用运算符`<<=`一一移动我们的掩码值，如何跨步到掩码编号`20`或`55`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:02:56.270

只需设置`mask`为您想要设置的值。

```
mask = 1LL << 20; 
```

# git - 将 Mercurial 项目转换为 Git

> ID：16037787
> 
> 赞同：291
> 
> 时间：2013-04-16T13:01:07.920
> 
> 标签：git, mercurial

我需要将一个 mercurial 项目转换为一个 git 项目，但我想保持提交历史不变。我目前的解决方案是删除 hg 相关文件，然后 git init && 手动添加我需要的文件，但这不会保留历史记录。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：291
> 
> 时间：2013-04-16T13:04:42.587

您可以尝试使用[fast-export](https://github.com/frej/fast-export)：

```
cd ~
git clone https://github.com/frej/fast-export.git
git init git_repo
cd git_repo
~/fast-export/hg-fast-export.sh -r /path/to/old/mercurial_repo
git checkout HEAD 
```

也看看[这个 SO question](https://stackoverflow.com/questions/10710250/converting-mercurial-folder-to-a-git-repository)。

* * *

如果您使用低于 4.6 的 Mercurial 版本，[adrihanu 会支持](https://stackoverflow.com/users/9127249/adrihanu)您：

正如他在评论中所说：*“如果您使用 Mercurial < 4.6 并且遇到“找不到 revsymbol”错误。您需要通过在 ~/fast-export 目录中运行 git checkout tags/v180317 来更新 Mercurial 或降级快速导出。”* .

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2016-01-18T11:18:16.090

好的，我终于解决了这个问题。这是在 Windows 上使用 TortoiseHg。如果您不使用它，您可以在命令行上执行此操作。

1.  安装 TortoiseHg
2.  右键单击资源管理器中的空白区域，然后转到 TortoiseHg 设置：

[![TortoiseHg 设置](https://i.stack.imgur.com/sYp4Z.png)](https://i.stack.imgur.com/sYp4Z.png)

3.  启用`hggit`：

[![在此处输入图像描述](https://i.stack.imgur.com/wmut4.jpg)](https://i.stack.imgur.com/wmut4.jpg)

4.  打开命令行，输入一个*空*目录。

5.  `git init --bare .git`（如果你不使用裸仓库，你会得到一个错误，比如`abort: git remote error: refs/heads/master failed to update`

6.  `cd`到您的 Mercurial 存储库。

7.  `hg bookmarks hg`

8.  `hg push c:/path/to/your/git/repo`

9.  在 Git 目录中：（`git config --bool core.bare false` 不要问我为什么。关于“工作树”的东西。Git 非常不友好。我发誓编写实际代码比使用 Git 更容易。）

希望它会起作用，然后您可以从新的 git 存储库推送到非裸存储库。

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2016-01-21T13:43:24.717

如果您想将现有的 mercurial 存储库导入“GitHub”存储库，您现在可以简单地使用[此处](https://github.com/new/import)提供的[GitHub Importer](https://help.github.com/articles/about-github-importer/) [需要登录]。无需再搞乱*快速导出*等（尽管它是一个非常好的工具）

 *您将完好无损地获得所有**提交**、**分支**和**标签。**另一件很酷的事情是，您也可以更改**作者的电子邮件 ID**。查看以下屏幕截图：

[![在此处输入图像描述](https://i.stack.imgur.com/PilSM.png)](https://i.stack.imgur.com/PilSM.png)

[![在此处输入图像描述](https://i.stack.imgur.com/WTcMb.png)](https://i.stack.imgur.com/WTcMb.png)

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2015-12-13T19:38:42.253

我将 Mercurial 转换为 Git 的一些经验。

## 1\. hg-fast-export

使用 hg-fast-export 失败，我需要 --force 如上所述。接下来我得到了这个错误：

错误：无法锁定 ref 'refs/heads/stable'：'refs/heads/stable/sub-branch-name' 存在；无法创建 'refs/heads/stable'

完成 hg-fast-export 后，我​​得到了一个截断的 repo。我认为这个 repo 有很多孤立的分支，hg-fast-export 需要一个有点理想化的 repo。这一切似乎有点粗糙，所以我转到了 Kiln Harmony ( [http://blog.fogcreek.com/announcing-kiln-harmony-the-future-of-dvcs/](http://blog.fogcreek.com/announcing-kiln-harmony-the-future-of-dvcs/) )

## 2\. 窑

如上所述，Kiln Harmony 似乎不存在于免费级别帐户中。我可以在仅 Git 和仅 Mercurial 存储库之间进行选择，并且没有切换选项。我提出了一张支持票，如果他们回复，我会分享结果。

## 3.hg-git

Hg-Git mercurial 插件 ( [http://hg-git.github.io/](http://hg-git.github.io/) ) 对我有用。在 Mac OSX 上仅供参考，我通过 macports 安装了 hg-git，如下所示：

*   须藤端口安装 python27
*   sudo 端口选择 --set python python27
*   sudo 端口安装 py27-hggit
*   vi ~/.hgrc

.hgrc 需要这些行：

```
[ui]
username = Name Surname <me@mydomain.com>

[extensions]
hgext.bookmarks =
hggit = 
```

然后我成功了：

```
hg push git+ssh://git@bitbucket.org:myaccount/myrepo.git 
```

## 4\. 警告：了解你的仓库

以上所有都是生硬的工具，我只是推进，因为花了足够的时间让团队正确使用 git。

在第一次按 (3) 推送项目时，我最终发现所有新更改都丢失了。这是因为这行代码只能被视为指南：

```
$ hg bookmark -r default master # make a bookmark of master for default, so a ref gets created 
```

理论上，当推送到 git 时，默认分支可以被视为 master，在我的例子中，我继承了一个 repo，他们使用“stable”作为 master 的等价物。此外，我还发现 repo 的提示是尚未与“稳定”分支合并的修补程序。

**如果没有正确理解 Mercurial 和要转换的 repo，最好不要进行转换。**

我执行以下操作以使 repo 准备好进行第二次转换尝试：

```
hg update -C stable
hg merge stable/hotfix-feature
hg ci -m "Merge with stable branch"
hg push git+ssh://git@bitbucket.org:myaccount/myrepo.git 
```

在此之后，我在 git 中有一个可验证的等效项目，但是我之前提到的所有孤立分支都消失了。我不认为这太严重，但我很可能会因为疏忽而后悔。因此，我最后的想法是无论如何都要保留原件。

编辑：如果你只想要 git 中的最新提交，这比上面的合并更简单：

```
hg book -r tip master
hg push git+ssh://git@bitbucket.org:myaccount/myrepo.git 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-10-06T22:06:36.077

我有一个类似的任务要做，但它包含了一些其他答案没有充分涵盖的方面：

*   我想转换我的回购的*所有*（在我的情况下：两个，或一般来说：多个）分支。
*   我的提交消息和文件名中有非 ASCII 和（作为 Windows 用户）非 UTF8 编码字符（对于好奇：德语变音符号）。

我没有尝试 fast-export 和 hg-fast-export，因为它们要求你的机器上有 Python 和一些 Mercurial Python 模块，而我没有。

我确实用 TortoiseHG 尝试了 hg-init，[这个答案](https://stackoverflow.com/a/34853438/1004651)给了我一个好的开始。但看起来它只转换当前分支，而不是一次全部转换（*）。所以我阅读了[hg-init 文档](https://github.com/schacon/hg-git#gitbranch_bookmark_suffix)和[这篇博](https://helgeklein.com/blog/2015/06/converting-mercurial-repositories-to-git-on-windows/)文并添加了

```
[git]  
branch_bookmark_suffix=_bookmark 
```

到我的 mercurial.ini，并做到了

```
hg bookmarks -r default master  
hg bookmarks -r my_branch my_branch_bookmark  
hg gexport 
```

（对要转换的每个分支重复第 2 行，如果在执行第 3 行之前碰巧进行了另一次提交，请再次重复）。`git`这会在 中创建一个文件夹`.hg`，结果是一个包含所有导出分支的裸 Git 存储库。我可以克隆这个 repo 并根据需要拥有一个工作副本。

或者几乎...

跑步

```
git status 
```

在我的工作副本上，所有名称中包含非 ASCII 字符的文件都显示为未跟踪文件。所以我继续研究并遵循[了这个建议](https://github.com/kblees/git/wiki#migration-without-previous-git-for-windows-available)：

```
git rm -rf --cached \*  
git add --all
git commit 
```

最后，回购准备好被推送到 Bitbucket :-)

[我还尝试了此答案](https://stackoverflow.com/a/34925470/1004651)中提到的 Github 导入器。我使用Bitbucket作为源系统，Github做得很好，它自动转换了所有的分支。但是，它在我的提交消息（Web-UI 和本地）和文件名（仅限 Web-UI）中显示所有非 ASCII 字符的“？”字符，虽然我可以如上所述修复文件名，但我不知道如何处理提交消息，所以我更喜欢 hg-init 方法。如果没有编码问题，Github 导入器将是一个完美且快速的解决方案（只要您有一个付费的 Github 帐户，或者可以容忍您的存储库是公开的，只要将其从 Github 拉到您的本地机器）。

* * *

(*) 所以看起来*在*我发现我必须为我要导出的所有分支添加书签之前。如果你这样做并推送到一个*裸*（！）回购，就像链接的答案说的那样，你会得到所有的分支。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-04-16T13:06:03.797

从：

[http://hivelogic.com/articles/converting-from-mercurial-to-git](http://hivelogic.com/articles/converting-from-mercurial-to-git)

> 迁移
> 
> 这是一个相对简单的过程。首先我们下载 fast-export（最好的方法是通过它的 Git 存储库，我将直接克隆到桌面），然后我们创建一个新的 git 存储库，执行迁移，并检查 HEAD。在命令行上，它是这样的：

```
cd ~/Desktop
git clone git://repo.or.cz/fast-export.git
git init git_repo
cd git_repo
~/Desktop/fast-export/hg-fast-export.sh -r /path/to/old/mercurial_repo
git checkout HEAD 
```

> 当您的项目在运行快速导出后迁移时，您应该会看到一长串提交。如果您看到错误，它们可能与不正确指定的 Python 路径有关（请参阅上面的注释并为您的系统自定义）。
> 
> 就是这样，你完成了。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-04-16T13:34:08.280

另一种选择是创建一个免费的 Kiln 帐户—— git 和 hg 之间的 kiln 往返行程，具有 100% 的元数据保留，因此您可以使用它进行一次转换或使用您喜欢的任何客户端访问存储库。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-06-16T15:21:03.423

这会更好作为评论，抱歉我没有评论权限。

@mar10 评论是我需要这样做的缺失部分。

> 请注意，“/path/to/old/mercurial_repo”必须是文件系统上的路径（不是 URL），因此您必须先克隆原始存储库。– mar10 2013 年 12 月 27 日 16:30

此评论是关于为我解决此问题的答案，[https://stackoverflow.com/a/10710294/2148757](https://stackoverflow.com/a/10710294/2148757)，这与此处标记为正确的答案相同，[https://stackoverflow.com/a/16037861 /2148757](https://stackoverflow.com/a/16037861/2148757)

这将我们的 hg 项目转移到了 git，并且提交历史记录完好无损。*

# java - 嵌套数组内的Mongodb增量值

> ID：16037788
> 
> 赞同：18
> 
> 时间：2013-04-16T13:01:13.100
> 
> 标签：java, spring, mongodb

我正在为 Spring 使用 mongotemplate，我想知道如何以原子方式增加我在数组中的一个文档的值。想象一下，我们有

```
{'a':1,
   b:[{_id:341432,
       c:2
      },
      {_id:341445,
       c:3
      }]}; 
```

我想要的是 _id 341445 的 c 从 3 增加到 4

我一直在使用 findAndModify 但我不知道如何为数组中的嵌套文档制作它。

问候。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-17T01:05:02.820

要更新数组字段中的元素，可以使用[位置 $ 运算符](http://docs.mongodb.org/manual/reference/operator/positional/)

例如，以下 js 将 _id 341445 的 c 从 3 递增到 4：

```
db.collection.update({a:1, "b._id":341445} , {$inc:{"b.$.c":1}}) 
```

# c# - 从视图中保存实体

> ID：16037791
> 
> 赞同：0
> 
> 时间：2013-04-16T13:01:19.470
> 
> 标签：c#, view, entity

在实体框架中，我有一个视图，其中包括两个表。我有兴趣从此视图更新表格。我发现了这个问题： [How to update tables from a View using Linq to Entities](https://stackoverflow.com/questions/6509490/how-to-update-tables-from-a-view-using-linq-to-entities)

由于这似乎并不那么容易，有没有好的替代解决方案？我能看到的唯一解决方案是将视图中的属性一对一地填充到表中的对象，但我很确定，这不是答案。

# c++ - 无法在opengl中绘制多个对象

> ID：16037793
> 
> 赞同：4
> 
> 时间：2013-04-16T13:01:24.273
> 
> 标签：c++, opengl

我无法弄清楚为什么下面的代码不起作用，我正在尝试绘制 2 个形状，一个红色的三角形和一个多色的立方体，它们本身可以完美地绘制，但是如果我尝试同时绘制两者给出了奇怪的错误，我尝试在改变变量修改我的着色器周围改变线条，但我似乎无法接近我想要的结果，当前代码最终绘制了 2 个使用立方体颜色的相同三角形。

```
GLuint VertexArrayID;

glGenVertexArrays(1, &VertexArrayID);
glBindVertexArray(VertexArrayID);

GLuint MatrixID = glGetUniformLocation(shader->id(), "MVP");

glm::mat4 Projection = glm::perspective(45.0f, 4.0f / 3.0f, 0.1f, 100.0f);
glm::mat4 View       = glm::lookAt(
glm::vec3(4,2,2), // Camera location
glm::vec3(0,0,0), // and looks at the origin
glm::vec3(0,1,0)  // Head is up (set to 0,-1,0 to look upside-down)
);

glm::mat4 myMatrix = glm::translate(-2.f,0.f,0.f);
glm::mat4 Model = glm::mat4(1.f);
Model= myMatrix * Model;
glm::mat4 MVP = Projection * View * Model;

glm::mat4 myMatrix2 = glm::translate(2.f,0.f,0.f);
glm::mat4 Model2 = glm::mat4(1.f);
Model2= myMatrix2 * Model2;
glm::mat4 MVP2 = Projection * View * Model2;

glViewport(0, 0, windowWidth, windowHeight); // set viewport to the size of the window
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT  | GL_STENCIL_BUFFER_BIT);

shader->bind();
glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP[0][0]);

glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,(void*)0);

glEnableVertexAttribArray(1);
glBindBuffer(GL_ARRAY_BUFFER, colourBuffer);
glVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,0,(void*)0);

glDrawArrays(GL_TRIANGLES,0,12*3);

glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);

glUniformMatrix4fv(MatrixID, 1, GL_FALSE, &MVP2[0][0]);
glEnableVertexAttribArray(0);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer2);
glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,(void*)0);

glEnableVertexAttribArray(1);
glBindBuffer(GL_ARRAY_BUFFER, colourBuffer2);
glVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,0,(void*)0);

glDrawArrays(GL_TRIANGLES, 0, 3);
glDisableVertexAttribArray(0);
glDisableVertexAttribArray(1);

SwapBuffers(hdc);

glDeleteBuffers(1, &vertexBuffer);
glDeleteBuffers(1, &vertexBuffer2);
glDeleteBuffers(1, &colourBuffer);
glDeleteBuffers(1, &colourBuffer2);
shader->unbind();
glDeleteVertexArrays(1, &VertexArrayID); 
```

这是主要代码。我以类似的方式创建所有缓冲区，基本上使用以下 3 行的变体来插入不同的缓冲区名称和数据，

```
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER,sizeof(Cube), Cube, GL_STATIC_DRAW); 
```

片段着色器

```
#version 330 core
in vec3 fragmentColour;
out vec3 colour;
void main(){
colour = fragmentColour;
} 
```

顶点着色器

```
 #version 330 core

  uniform mat4 MVP;

  layout(location = 0) in vec3 vertexPosition_modelspace;
  layout(location = 1) in vec3 vertexColour;
  out vec3 fragmentColour;

   void main(){

    gl_Position =  MVP * vec4(vertexPosition_modelspace,1);
    fragmentColour = vertexColour;
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:15:16.323

我看到您正在尝试使用 VAO，但您只创建了一个。另外，您为什么要准备：

> glEnableVertexAttribArray(0); glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer); glVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,0,(void*)0);
> 
> glEnableVertexAttribArray(1); glBindBuffer(GL_ARRAY_BUFFER, colourBuffer); glVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,0,(void*)0);

并删除：

> glDeleteBuffers(1, &vertexBuffer); glDeleteBuffers(1, &vertexBuffer2); glDeleteBuffers(1, &colourBuffer); glDeleteBuffers(1, &colourBuffer2);

每次渲染调用时你的 VAO对象了。[这](http://ogldev.atspace.co.uk/www/tutorial32/tutorial32.html)是一个很好的例子，它是如何正确完成的。

您应该做的是：仅在某些 init 方法中启动您的 VAO 一次。然后在渲染循环中：

```
 glBindVertexArray(m_VAO1);

   ///draw geometry here

    glBindVertexArray(0); 
```

对要渲染的每个几何图形执行此操作。

在对您的代码进行更深入的审查后，我看到您这样做了：

```
GLuint VertexArrayID;
glGenVertexArrays(1, &VertexArrayID);
glBindVertexArray(VertexArrayID); 
```

所以你确实绑定了 VAO。但是你只创建和绑定了一个！你需要为每个可渲染对象创建一个，将所有需要的缓冲区附加到它，然后在渲染循环中使用它们，正如我上面解释的那样。

# matlab - 在matlab中，如何计算矩阵中行之间的经过时间

> ID：16037799
> 
> 赞同：0
> 
> 时间：2013-04-16T13:01:44.533
> 
> 标签：matlab, date

我有一个 21128x9 矩阵，格式如下：

```
x = ['Participant No.' 'yyyy' 'mm' 'dd' 'HH' 'MM' 'SS' 'question No.' 'response'] 
```

例如

```
 x =

  Columns 1 through 5

      18        2011          10          26          15
      18        2011          10          26          15
      18        2011          10          26          15
      18        2011          10          26          15
      18        2011          10          26          15
      19        2011          10          31          13
      19        2011          10          31          13
      19        2011          10          31          13
      19        2011          10          31          13
      19        2011          10          31          13

  Columns 6 through 9

      42          33          27           4
      42          39          17           2
      42          45          52           2
      42          47          45           3
      42          50          12           3
       6           5          36           1
       6          20          27           4
       6          22          34           5
       6          33          43           3
       6          42          42           1 
```

其中第 2-7 列是日期向量。数据按日期/时间排序。

我想计算每个参与者回答每个问题所用的时间 - 即第 1 行和第 2 行、第 2 行和第 3 行、第 3 和第 4、第 4 和第 5 行之间经过的时间，然后是第 6 和第 7、第 7 和第 8 行等。 - 最后得到一个矩阵，按参与者编号排序，然后我可以计算出每个问题所用的平均时间。

我试过使用*etime*功能，但无济于事。

编辑：关于*etime*，只是为了看看它是否会在实践中起作用，我试着写：

```
etime(x(2,5:7),x(1,5:7)) 
```

仅比较第 1 行和第 2 行的第 5-7 列，但我不断返回：

```
 ??? Index exceeds matrix dimensions.

    Error in ==> etime at 41
    t = 86400*(datenummx(t1(:,1:3)) - datenummx(t0(:,1:3))) + ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:51:55.050

你快到了！您需要将 5s 更改为 2s，仅此而已：

```
etime(x(2,2:7),x(1,2:7)) 
```

现在要让它们全部得到，让我们制作两个日期向量矩阵，但其中一行彼此不同步：

首先设置 x：

```
 x =[ 18        2011          10          26          15        42          33          27           4
      18        2011          10          26          15        42          39          17           2
      18        2011          10          26          15        42          45          52           2
      18        2011          10          26          15        42          47          45           3
      18        2011          10          26          15        42          50          12           3
      19        2011          10          31          13         6           5          36           1
      19        2011          10          31          13         6          20          27           4
      19        2011          10          31          13         6          22          34           5
      19        2011          10          31          13         6          33          43           3
      19        2011          10          31          13         6          42          42           1] 
```

现在提取时间：

```
Tn = x(1:end-1, 2:7);
Tnplus1 = x(2:end, 2:7); 
```

并且 no 获得连续行之间以秒为单位的差异向量：

```
etime(Tnplus1, Tn) 
```

结果是：

```
ans =

           6
           6
           2
           3
      422595
          15
           2
          11
           9 
```

此外，如果您不关心年月日数据，只需将它们设置为零，即

```
Tn(:, 1:3) = 0;
Tnplus1(:, 1:3) = 0;
etime(Tnplus1, Tn)

ans =

       6
       6
       2
       3
   -9405
      15
       2
      11
       9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:06:57.983

以下是一些简单的步骤：

*   计算要比较的两行之间的差异
*   乘以包含每单位秒数的向量

小规模示例：

```
% Hours Mins Secs:

difference = ([23 12 4] - [23 11 59]);
secvec = difference .* [3600 60 1];
secdiff = sum(secvec) 
```

# javascript - 在图层显示上禁用父页面

> ID：16037802
> 
> 赞同：0
> 
> 时间：2013-04-16T13:01:51.973
> 
> 标签：javascript, html, css

我有一个隐藏层，当用户单击按钮时，该层设置为显示。如何使父页面变为禁用/灰色，以便用户在关闭图层之前无法单击父页面上的任何内容（设置为隐藏）

类似于灯箱画廊

我通过按钮（编辑）单击从父页面调用图层中的函数

```
edit.onclick=function(){
        edit_box('show');           
    } 
```

然后在图层上我调用 show 函数

```
function edit_box(showhide)
{
  if(showhide == "show")
    {
     document.getElementById('popupbox').style.visibility="visible";
    }else if(showhide == "hide"){
      document.getElementById('popupbox').style.visibility="hidden";        
    }   
 } 
```

#popup 的 CSS 是

```
#popupbox{ 
  padding:0; 
  margin: 0px auto; 
  background:white;
  border: solid #000000 1px; 
  z-index: 9000; 
  font-family: arial; 
  visibility: hidden; 
 } 
```

和 html 是

```
<div id="popupbox">
  <div class="close"><a href="javascript:edit_box('hide');" >close</a></div> 
```

任何指针都非常感谢，因为我不知道从哪里开始，只能找到重新启动在线其他地方弹出框的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:40:45.760

改变你的风格

```
#popupbox{ 
  padding:0; 
  margin: 0px auto;
  position:fixed;
  top:0; left:0; right:0; bottom: 0;
  display:none;

  background: rgba(255,255,255,0.5);
  border: solid #000000 1px; 
  z-index: 9000; 
  font-family: arial; 
 } 
```

和你的功能

```
function edit_box(showhide)
{
  if(showhide == "show")
    {
     $('#popupbox').show();
    } else if (showhide == "hide") {
      $('#popupbox').hide();        
    }   
 } 
```

* * *

如果您想支持不理解`rgba`颜色的浏览器，请使用半透明背景 .png 图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:47:15.717

好的，解决了这个问题

父页面上的css

```
.black_overlay{
        display: none;
        position: absolute;
        top: 0%;
        left: 0%;
        width: 100%;
        height: 100%;
        background-color: black;
        z-index:1001;
        -moz-opacity: 0.8;
        opacity:.80;
        filter: alpha(opacity=80);
    } 
```

图层页面上的 CSS

```
.white_content {
        display: none;
        position: absolute;
        top: 25%;
        left: 25%;
        width: 50%;
        height: 50%;
        padding: 16px;
        border: 16px solid orange;
        background-color: white;
        z-index:1002;
        overflow: auto;
    } 
```

然后是函数调用弹出层中父页面上的js

```
 document.getElementById('fade').style.display='block' 
```

父页面上的html div

```
<div id="fade" class="black_overlay"></div> 
```

弹出层上的js

```
 function edit_box(showhide){
    if(showhide == "show"){
    document.getElementById('popupbox').style.display='block';
        document.getElementById('popupbox').style.visibility="visible";
}else if(showhide == "hide"){
    document.getElementById('popupbox').style.display='none';
    document.getElementById('fade').style.display='none'
        document.getElementById('popupbox').style.visibility="hidden";      
} 
```

}

和图层上的html

```
<div id="popupbox" class="white_content">
  <div class="close"><a href="javascript:edit_box('hide');" >close</a></div> 
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:06:00.053

你为什么不试试jQuery，jQuery（"#popupbox"）.hide();

# c# - 如何在 DataGridView 中添加列（复选框）

> ID：16037804
> 
> 赞同：4
> 
> 时间：2013-04-16T13:02:01.863
> 
> 标签：c#, windows

我已经绑定`datagridview`了`datatable`窗体上的数据库在 Windows 窗体应用程序中加载，我想添加一个包含复选框的列。所以可以检查显示的任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:16:56.213

您可以轻松地将 DataGridViewCheckBoxColumn 添加到 DataGridView 列：

```
// Create new Checkbox Column
DataGridViewCheckBoxColumn myCheckedColumn = new DataGridViewCheckBoxColumn()
        {
            Name = "Checked Column", FalseValue = 0 , TrueValue = 1 , Visible = true
        };
// add the new column to your dataGridView 
myDataGridView.Columns.Add(myCheckedColumn); 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:23:31.213

尝试这个：

```
DataGridViewCheckBoxColumn CBColumn = new DataGridViewCheckBoxColumn();
CBColumn.HeaderText = "ColumnHeader";
CBColumn.FalseValue = "0";
CBColumn.TrueValue = "1";
dataGridView1.Columns.Insert(0, CBColumn); 
```

# c - C - execl()：无法执行位于另一个目录中的文件

> ID：16037809
> 
> 赞同：3
> 
> 时间：2013-04-16T13:02:19.133
> 
> 标签：c, linux, unix, exec, file-permissions

我正在尝试使用我的程序 notify.c 执行位于另一个目录中的名为“helloworld”的二进制文件（从 source.c 编译）。这是我的文件所在的位置：

/home/morts/桌面/helloworld

/home/morts/桌面/家庭作业/通知

我试过：

```
const char *cmd = "/home/morts/Desktop/helloworld";
execl(cmd, "LOL", NULL);
perror("execl()");
exit(EXIT_FAILURE); 
```

但我得到：

```
execl(): Permission denied 
```

如果 helloworld 位于 notify 的同一目录中，我只需输入“./helloworld”，但由于它们位于不同的目录中，我该如何解决这个问题？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T02:41:25.330

如果你想通过 execl 执行路径 /bin/test 下的文件 hello 而不使用任何参数，请尝试以下操作：

> execl("/bin/test/hello", "hello", (char*)NULL);

检查以下内容，否则您可能会收到权限拒绝错误：

1.  第一个参数必须是`/path/your_file`不带**空格的**
2.  第二个参数必须是“ **your_file** ”，与第一个参数相同
3.  最后一个参数必须是 (char*)NULL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:07:48.180

您应该通过尝试直接在终端中运行命令来检查路径是否正确并且您具有执行此文件的正确权限：

```
/home/morts/Desktop/helloworld 
```

如果它有效，那么您必须检查运行您的程序的用户是否也有权执行该文件。

# java - 是否可以使用 hadoop 文件系统 API 从 hdfs 一次删除多个文件？

> ID：16037810
> 
> 赞同：4
> 
> 时间：2013-04-16T13:02:20.733
> 
> 标签：java, hadoop, filesystems, delete-file

hadoop shell 有命令`hadoop fs -rm /dir/*`。但我没有从 API 中找到类似的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:18:27.917

要删除目录中的文件而不删除目录本身或从任何子目录中删除文件（即做什么`hadoop fs -rm /dir/*`），您可以使用：

```
FileSystem fs = dir.getFileSystem(getConf());
RemoteIterator<LocatedFileStatus> it = fs.listFiles(dir, false);
while (it.hasNext()) {
    fs.delete(it.next().getPath(), false);
} 
```

# mysql - 什么控制从 SQL 查询返回的记录集的大小？

> ID：16037813
> 
> 赞同：-3
> 
> 时间：2013-04-16T13:02:21.687
> 
> 标签：mysql, sql

关于记录集的大小或从打开的游标中可以返回的记录数，从查询中决定的因素是什么？有没有限制？

```
Select * from table; //How many results can be retrieved max?
Select * from table limit 0, 999999; //how many max number I can give here? 
```

我正在使用struts json。实际上，我想将 json 结果用于两个目的。

1.  使用分页渲染网格（dataTables），其中应根据输入应用限制。
2.  将结果导出到应该有任何限制的excel。但我仍然想使用相同的请求 url。我想出了一个想法，将限制传递给最大可能数量，以请求表中的所有数据返回到 excel 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:05:56.447

您可能想阅读 MySQL 文档，尤其是[这个](http://dev.mysql.com/doc/refman/5.0/en/column-count-limit.html).

# properties - 如果在安装时未设置属性，为什么在卸载时会忽略这些属性？

> ID：16037821
> 
> 赞同：2
> 
> 时间：2013-04-16T13:03:01.260
> 
> 标签：properties, wix, uninstallation, windows-installer

我创建了一个安装程序，它使用 WixSqlExtension 提供的 sqlstring 元素安装数据库。这是代码示例：

```
<ComponentGroup Id="DatabaseCreation" Directory="INSTALLFOLDER">
  <Component Id="CreateDatabase" Guid="SOMEGUID" KeyPath="yes">
    <sql:SqlString
      Id="CreateDB"
      Sequence="1"
      ExecuteOnInstall="yes"
      ContinueOnError="no"
      SqlDb="MasterDB"
      SQL="DECLARE @dbname nvarchar(128)
      SET @dbname = N'{[SQLDATABASE]}'

      IF(NOT EXISTS 
          (SELECT name 
          FROM master.dbo.sysdatabases
          WHERE ('[\[]' + name + '[\]]') = @dbname
          OR name = @dbname
          )
        )
      CREATE DATABASE {[SQLDATABASE]}"
      />
  </Component>
  <Component Id="DropDatabase" Guid="ANOTHERGUID" KeyPath="yes">
    <sql:SqlString 
      Id="DropDB" 
      Sequence="10000" 
      SqlDb="MasterDB" 
      ExecuteOnUninstall="yes" 
      ContinueOnError="no" 
      SQL="DECLARE @dbname nvarchar(128)
      SET @dbname = N'{[SQLDATABASE]}'

      IF(EXISTS 
          (SELECT name 
          FROM master.dbo.sysdatabases
          WHERE ('[\[]' + name + '[\]]') = @dbname
          OR name = @dbname
          )
        )
      DROP DATABASE {[SQLDATABASE]}"/>
    <Condition>
      <![CDATA[DROPDATABASE = "1"]]>
    </Condition>
  </Component>
</ComponentGroup> 
```

使用以下命令安装软件包后

```
msiexec /i package.msi /l*v install.log 
```

数据库按预期创建。但是用命令卸载包

```
msiexec /x package.msi DROPDATABASE="1" /l*v uninstall.log 
```

不会按预期删除数据库。奇怪的是，该属性似乎已设置，如 uninstall.log 中所述：

```
[...] MSI (s) (44:68) [14:42:12:442]: Command Line: DROPDATABASE=1 REMOVE=ALL CURRENTDIRECTORY=C:\install CLIENTUILEVEL=2 CLIENTPROCESSID=2532[...]
[...] MSI (s) (44:68) [14:42:12:462]: PROPERTY CHANGE: Adding DROPDATABASE property. Its value is '1'.[...]
[...]Property(S): MsiHiddenProperties = CreateDatabase;DropDatabase;ExecuteSqlStrings;RollbackCreateDatabase;RollbackExecuteSqlStrings[...]
[...]Property(S): DROPDATABASE = 1[...] 
```

现在到最有趣的部分：使用以下命令安装软件包时：

```
msiexec /i package.msi DROPDATABASE="1" /l*v install.log 
```

使用以下命令卸载软件包：

```
msiexec /x package.msi DROPDATABASE="0" /l*v uninstall.log 
```

删除数据库。我不明白为什么会这样。此处，为 DROPDATABASE 属性传递了值“0”，但代码明确指出，仅当该属性的值设置为值“1”时才删除数据库。可以再次在日志文件中看到该值的分配：

```
[...]MSI (s) (44:44) [14:49:12:587]: PROPERTY CHANGE: Adding DROPDATABASE property. Its value is '0'.[...] 
```

为什么卸载时忽略 DROPDATABASE 属性？MsiHiddenProperties 来自哪里？如何设置卸载属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T14:14:22.517

默认情况下 a`Component` `Condition`仅在安装期间评估。如果您希望`Condition`每次执行安装包时都进行评估，则需要在元素上设置`Transitive='yes'`属性。`Component`

但是，根据我的经验，在卸载过程中，如果`Component`MSI 安装了 MSI，则在卸载 MSI 时会将其删除。

`MsiHiddenProperties`来自您正在使用的 SQL 自定义操作。它们阻止 Windows 安装程序记录 SQL 字符串，因为有时 SQL 字符串中有密码，而您不希望在日志文件中以纯文本形式显示密码，从而导致安全漏洞。

# jquery - 如何在 Jquery UI 自动完成小部件中包含“添加新联系人”？

> ID：16037822
> 
> 赞同：-3
> 
> 时间：2013-04-16T13:03:02.777
> 
> 标签：jquery, jquery-ui, jquery-plugins, autocomplete

我在我的项目中使用 jQuery UI 自动完成小部件来查找所有客户名称。

如何在自动完成小部件 <LI> 中包含“添加新名称”文本链接？

请为我提供解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T15:13:22.447

希望这可以帮助...

```
$("#autocomplete").autocomplete({
    source: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby"],
    response: function (event, ui) {
        ui.content.push({
            label: 'Add a new Name',
            value: 'Add a new Name'
        });
    },
    open: function (event, ui) { //Add href & class
         $(".ui-autocomplete").find("a").last().attr('href','http://www.google.com').addClass('highLight');
    }
}); 
```

**[演示](http://jsfiddle.net/qakct/)**

# jquery - 将 jquery-layout 与流星一起使用

> ID：16037823
> 
> 赞同：3
> 
> 时间：2013-04-16T13:03:06.793
> 
> 标签：jquery, meteor, jquery-layout

我是流星和 jquery 布局的新手。

我正在努力寻找如何使两者一起工作。我添加了 jquery 和 jquery-layout 包。我相信我需要在某个阶段要求 jQuery 布局来布局页面，但是什么时候呢？如果我在 HTML 页面中执行此操作，我会收到消息“/UI 布局初始化错误/中心窗格元素不存在。/中心窗格是必需元素。”。我认为这是因为流星还没有加载任何模板。该示例基于流星默认应用程序。我在东窗格中添加了一个额外的模板。并粘贴在 jQuery 布局脚本中。

那么我应该在哪里、何时以及如何布局我的页面呢？

```
 <head>
    <title>Layouts</title>
    <script type="text/javascript">
      $(document).ready(function () {
        $('body').layout({ applyDemoStyles: true });
      });
  </script>   
  </head>

  <body>
    {{> navigation}}
    {{> hello}}
  </body>

  <template name="navigation">
  <div class="ui-layout-east">
    <p>Navigation stuff here</p>
  </div>
  </template>

  <template name="hello">
  <div class="ui-layout-north">
    <h1>Hello World!</h1>
        {{greeting}}
    <input type="button" value="Click" />
  </div>
  </template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T17:22:29.067

实际上问题就像错误所说的那样：**中心**窗格是必需的元素。所以代替`ui-layout-east`and `ui-layout-north`，尝试`ui-layout-east`and `ui-layout-center`：

```
<template name="hello">
  <div class="ui-layout-center">
    <h1>Hello World!</h1>
        {{greeting}}
    <input type="button" value="Click" />
  </div>
</template> 
```

此外，初始化布局的适当位置是在模板的`.rendered`事件处理程序中。因此，请尝试重组您的代码，以便有一个主模板，如下`root`例所示，然后将您的 jQuery 初始化代码放入`Template.root.rendered`其中（下面 .js 文件的第 2 行）。不要在里面放任何 JavaScript`<head>`也不要使用`$(document).ready`：

**layout.html**（假设默认文件名）

```
<head>
  <title>Layouts</title>
</head>

<body>
  {{> root}}
</body>

<template name="root">
  {{> navigation}}
  {{> hello}}
</template>

<template name="navigation">
  <div class="ui-layout-east">
    <p>Navigation stuff here</p>
  </div>
</template>

<template name="hello">
  <div class="ui-layout-center">
    <h1>Hello World!</h1>
        {{greeting}}
    <input type="button" value="Click" />
  </div>
</template> 
```

**布局.js**

```
if (Meteor.isClient) {
  Template.root.rendered = function() {
    $('body').layout({ applyDemoStyles: true });
  };
} 
```

# python - 如何将 numpy 对象数组转换为 str/unicode 数组？

> ID：16037824
> 
> 赞同：17
> 
> 时间：2013-04-16T13:03:07.230
> 
> 标签：python, string, numpy, type-conversion

**更新：** 在 numpy 的最新版本（例如 v1.8.1）中，这不再是问题。现在这里提到的所有方法都可以例外。

**原始问题：** 使用object dtype存储字符串数组有时很方便，特别是当需要在不知道字符串最大长度的情况下修改大型数组的内容时，例如，

```
>>> import numpy as np
>>> a = np.array([u'abc', u'12345'], dtype=object) 
```

在某些时候，可能希望将 dtype 转换回 unicode 或 str。但是，简单的转换会截断长度为 4 或 1 的字符串（为什么？），例如，

```
>>> b = np.array(a, dtype=unicode)
>>> b
array([u'abc', u'1234'], dtype='<U4')
>>> c = a.astype(unicode)
>>> c
array([u'a', u'1'], dtype='<U1') 
```

当然，人们总是可以显式地遍历整个数组以确定最大长度，

```
>>> d = np.array(a, dtype='<U{0}'.format(np.max([len(x) for x in a])))
array([u'abc', u'12345'], dtype='<U5') 
```

然而，在我看来，这有点尴尬。有一个更好的方法吗？

**编辑添加：** 根据这个[密切相关的问题](https://stackoverflow.com/questions/1582525/longest-string-in-numpy-object-array)，

```
>>> len(max(a, key=len)) 
```

是另一种找出最长字符串长度的方法，而这一步似乎是不可避免的......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-09-08T00:13:23.443

我知道这是一个老问题，但如果有人遇到它并正在寻找答案，请尝试

```
c = a.astype('U') 
```

你应该得到你期望的结果：

```
c = array([u'abc', u'12345'], dtype='<U5') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-08T17:34:59.923

至少在 Python 3.5 Jupyter 4 中我可以使用：

```
a=np.array([u'12345',u'abc'],dtype=object)
b=a.astype(str)
b 
```

对我来说效果很好并返回：

```
array(['12345', 'abc'],dtype='<U5') 
```

# php - Wordpress 日期显示条件

> ID：16037834
> 
> 赞同：0
> 
> 时间：2013-04-16T13:03:24.223
> 
> 标签：php, wordpress, date

我正在 Wordpress 上构建一个事件目录，并在我的主页、类别和搜索结果页面上有一个事件列表。页面示例图片：[Imgur](http://i.imgur.com/kXgjwYd.jpg?1)

如您所见，列表显示了开始日期和结束日期。它对所有事件执行此操作，即使开始日期和结束日期相同。我想创造以下条件：

*   如果开始日期和结束日期相等，则仅显示开始日期。

别的

*   如果开始日期和结束日期不相等，则显示两者。**或**如果结束日期大于开始日期，则显示两者。

这是我到目前为止所拥有的：

```
<span class="date">

<?php if($post->post_type == 'post'){
echo $date = date_i18n("d M",strtotime($post->post_date)); 
}else{
echo $date = date_i18n("d M",strtotime(get_post_meta($post->ID,'st_date',true))).' to       
'.date_i18n("d M",strtotime(get_post_meta($post->ID,'end_date',true))); 
}
?>
</span> 
```

感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:11:28.857

试试这个 ：

```
<span class="date">
    <?php 

    if($post->post_type == 'post'){
        $date = date_i18n("d M",strtotime($post->post_date));
    } else {
        if (strtotime(get_post_meta($post->ID,'st_date',true)) == strtotime(get_post_meta($post->ID,'end_date',true))) {
            $date = date_i18n("d M",strtotime(get_post_meta($post->ID,'st_date',true)));
        } else {
            $date = date_i18n("d M",strtotime(get_post_meta($post->ID,'st_date',true))) . ' to ' .date_i18n("d M",strtotime(get_post_meta($post->ID,'end_date',true)));
        }
    }

    echo $date;
    ?>
</span> 
```

希望这可以帮助你:)

# jquery - 使用 css3 或 jquery 或 html5 的浮动圆

> ID：16037835
> 
> 赞同：1
> 
> 时间：2013-04-16T13:03:24.450
> 
> 标签：jquery, html, css, html5-canvas, floating

我试图让一个圆圈/气泡（50px x 50px）在大约 150x150px 的区域内浮动。我希望它看起来有机；理想情况下不是简单的带有缓动的上下运动。我希望它看起来自然漂浮。

跨浏览器兼容性并不是最重要的，只要它是静态的作为后备就可以了。

任何想法/教程/jsfiddle的任何人都可以建议我使用？

# audio - 使用Gstreamer在录制音频+视频的同时显示无音频视频

> ID：16037840
> 
> 赞同：3
> 
> 时间：2013-04-16T13:03:37.433
> 
> 标签：audio, video, gstreamer, video-recording

我的 Logitech C920 网络摄像头提供以 h264 编码的视频流。我正在使用[这个“捕获”工具](http://www.oz9aec.net/index.php/gstreamer/473-using-the-logitech-c920-webcam-with-gstreamer)来访问数据：

所以我可以观看实时视频：

```
/usr/local/bin/capture -d /dev/video0 -c 100000 -o | \
  gst-launch-1.0 -e filesrc location=/dev/fd/0 \
                    ! h264parse \
                    ! decodebin\
                    ! xvimagesink sync=false 
```

...或将流记录为原始 h264 文件：

```
/usr/local/bin/capture -d /dev/video0 -c 100000 -o | \
  gst-launch-0.10 -e filesrc location=/dev/fd/0 \
                     ! h264parse \
                     ! mp4mux \
                     ! filesink location=/tmp/video.mp4 
```

...但我一生都无法弄清楚如何同时做这两个事情。录制时在屏幕上实时显示有时很有用，所以我想完成这项工作。花了几个小时寻找一种同时抓取和筛选的方法，但没有运气。`tee`用s 和s乱搞再多也无济于事`queue`。

猜猜将 ALSA 音频 (hw:2,0) 加入其中也是一种奖励，但我可以用一种丑陋的黑客方式解决这个问题。现在，即使 hw:2,0 是 Audacitu 或 arecord 中的有效输入，我也得到了这个，例如：

```
Recording open error on device 'hw:2,0': No such file or directory
Recording open error on device 'plughw:2,0': No such file or directory 
```

所以回顾一下：很想把这两个视频位放在一起，如果音频也能工作，那就是奖金。我觉得自己像个新手。

提前感谢您提供的任何帮助。

编辑：非工作代码：

```
/usr/local/bin/capture -d /dev/video1 -c 100000 -o | \
     gst-launch-1.0 -e filesrc location=/dev/fd/0 ! tee name=myvid ! h264parse ! decodebin \
     ! xvimagesink sync=false myvid. ! queue ! mux. alsasrc device=plughw:2,0 ! \
     audio/x-raw,rate=44100,channels=1,depth=24 ! audioconvert ! queue ! mux. mp4mux \
     name=mux ! filesink location=/tmp/out.mp4 
```

...导致：

```
WARNING: erroneous pipeline: could not link queue1 to mux 
```

编辑：尝试了 umlaeute 的建议，得到了一个几乎空的视频文件和一个冻结的实时视频帧。修复启用音频的代码中的两个小错误（双引号拼写错误，未将音频编码为与 MP4 兼容的任何内容。添加`avenc_aac`之后`audioconvert`做了那个技巧）后，有/无音频没有区别。错误输出：

```
Setting pipeline to PAUSED ...
Pipeline is live and does not need PREROLL ...
Setting pipeline to PLAYING ...
New clock: GstAudioSrcClock
Redistribute latency...
ERROR: from element /GstPipeline:pipeline0/GstMP4Mux:mux: Could not multiplex stream.
Additional debug info:
gstqtmux.c(2530): gst_qt_mux_add_buffer (): /GstPipeline:pipeline0/GstMP4Mux:mux:
DTS method failed to re-order timestamps.
EOS on shutdown enabled -- waiting for EOS after Error
Waiting for EOS...
ERROR: from element /GstPipeline:pipeline0/GstFileSrc:filesrc0: Internal data flow error.
Additional debug info:
gstbasesrc.c(2809): gst_base_src_loop (): /GstPipeline:pipeline0/GstFileSrc:filesrc0:
streaming task paused, reason error (-5) 
```

编辑：好的，umlaeute 的更正代码可以完美运行，但前提是我使用的是 v4l2src 而不是转换工具。现在，这意味着抓取 MJPEG 流而不是 H264 流。我的鼻子没有皮肤，虽然我想我更喜欢更现代的工作流程。所以无论如何，这就是实际工作的方法，输出一个 MJPEG 视频文件和一个实时“取景器”。不是很优雅，但很实用。感谢你的帮助！

```
gst-launch-1.0 -e v4l2src device=/dev/video1 ! videorate ! 'image/jpeg, width=1280, height=720, framerate=24/1' ! tee name=myvid \    
      ! queue ! decodebin ! xvimagesink sync=false \     
      myvid. ! queue ! mux.video_0 \    
      alsasrc device="plughw:2,0" ! "audio/x-raw,rate=44100,channels=1,depth=24" ! audioconvert ! lamemp3enc ! queue ! mux.audio_0 \    
      avimux name=mux ! filesink location=/tmp/out.avi
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:32:28.480

`mp4mux`当涉及到自动组合多个不同的流（例如使用）时，gstreamer 通常有点愚蠢。在这种情况下，您通常不仅应该将流发送到命名元素，还应该发送到特定的 pad（使用`elementname.padname`符号；`element.`符号实际上只是命名元素中“任何”pad 的简写）。

此外，您似乎忘记了`h264parse`mp4muxer（如果您查看视频所采用的路径，它真的归结`filesrc ! queue ! mp4mux`为可能有点粗糙）。

虽然我无法测试管道，但我想像下面这样的东西应该可以解决问题：

```
 /usr/local/bin/capture -d /dev/video1 -c 100000 -o | \
   gst-launch-1.0 -e filesrc location=/dev/fd/0 ! h264parse ! tee name=myvid \
     ! queue ! decodebin ! xvimagesink sync=false  \
     myvid. ! queue  ! mp4mux ! filesink location=/tmp/out.mp4 
```

使用音频可能更复杂，尝试这样的事情（显然假设您*可以*`alsasrc device="plughw:2,0"`使用该元素读取音频）

```
 /usr/local/bin/capture -d /dev/video1 -c 100000 -o | \
   gst-launch-1.0 -e filesrc location=/dev/fd/0 ! h264parse ! tee name=myvid \
     ! queue ! decodebin ! xvimagesink sync=false  \
     myvid. ! queue ! mux.video_0 \
     alsasrc device="plughw:2,0" ! "audio/x-raw,rate=44100,channels=1,depth=24"" ! audioconvert ! queue ! mux.audio_0 \
     mp4mux name=mux ! filesink location=/tmp/out.mp4 
```

# c# - Visual Studio C# 2010 向程序添加/编辑新的附加表单

> ID：16037841
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:03:41.287
> 
> 标签：c#, forms

所以我是实际构建 GUI 的新手，我正在创建一个项目，当您单击一个按钮时，您会打开一个新表单。有了这个新表单，我希望能够向它添加和编辑内容。

在我的解决方案资源管理器中，它只显示我最初创建的第一个表单，而不是第二个。我上网并使用了一些关于单击按钮时创建新表单的小微软简介，我从那里有点迷失了。

我的程序将有多个按钮，您可以单击它们并打开某些表单。我了解我已将 button_click 设置为创建新表单。我现在想知道如何编辑这些创建的表单。

我尝试刷新我的解决方案资源管理器，但它不会显示我新创建的设计。（我认为这可能是我可能的错误之一，哈哈）有人可以让我知道我应该做什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T13:08:09.500

首先添加一个新表格。右键单击您的项目（我的项目名为`Test`）并为其命名（我称它为`TestForm`）： ![创建表单](https://i.stack.imgur.com/50LEs.png)

然后，将以下代码添加到您的按钮：

```
TestForm MyForm = new TestForm();
MyForm.Show(); 
```

# python - 从对话框中取值

> ID：16037843
> 
> 赞同：0
> 
> 时间：2013-04-16T13:03:47.490
> 
> 标签：python, tkinter, tkinter-entry

我正在为下载管理器制作 GUI。单击“确定”按钮时，我希望`execute`启动该命令。我希望它从我的函数中获取值，即`dl_dialog`,`url`并将它们提供给我的下载器模块。`path``md5url`

问题是 的值`url`，`path`并且`md5url`不要更新为我在输入字段中键入的值。我怎样才能解决这个问题？

```
default_storage_path= "C:\sdmdownloads"
class App:
    def __init__(self, master):

        frame = Frame(master)
        frame.pack()

        self.button = Button(frame, text="QUIT", fg="red", command=frame.quit)
        self.button.pack(side=LEFT)

        self.hi_there = Button(frame, text="Download", command=self.dl_dialog)
        self.hi_there.pack(side=LEFT)

        self.path = default_storage_path
        self.url = ""
        self.md5url = ""
        self.filename = ""

    def dl_dialog(self):
        self.dialog = Pmw.Dialog(root,
            buttons = ('OK', 'Apply', 'Cancel', 'Help'),
            defaultbutton = 'OK',
            title = 'My dialog',
            command = self.execute)

        lbl1 = Tkinter.Label(self.dialog.interior(),text="URL")
        lbl1.pack(side="left")

        url = Tkinter.Entry(self.dialog.interior())
        url.pack(side="left")
        self.url = url

        lbl2 = Tkinter.Label(self.dialog.interior(),text="Path")
        lbl2.pack(side="left")

        path = Tkinter.Entry(self.dialog.interior())
        path.pack(side="left")
        path.insert(0,default_storage_path)
        self.path = path

        lbl3 = Tkinter.Label(self.dialog.interior(),text="MD5 URL")
        lbl3.pack(side="left")

        md5url = Tkinter.Entry(self.dialog.interior())
        md5url.pack()
        self.md5url = md5url

    def execute(self):
        #if result not in ('Apply', 'Help'):
        #    self.dialog.deactivate(result)

        if result == "OK":
            print "OK"
            path =self.path
            url = self.url
            md5url = self.md5url

            d = Downloader(path,url,md5url)
            thread.start_new_thread(d.checkhttplink, ())
            thread.start_new_thread(d.checkifexists, ())
        elif result == "Apply":
            print "Apply"
        elif result == "Cancel":
            print "Cancel"
        else:
            print"Help 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:22:51.613

已修复...抱歉忘记使用我的 StringVar()

# svn - Subversion 外部遵循 Symlink

> ID：16037846
> 
> 赞同：1
> 
> 时间：2013-04-16T13:04:01.140
> 
> 标签：svn, symlink, externals

**有没有办法对`svn:externals`属性使用符号链接？**

我有一个在我的网络服务器（在 unix 下）上运行的项目，其中有一些文件夹实际上是指向其他文件夹的符号链接。

当我将符号链接添加到存储库时，当我在 Windows 上签出它时，它会转换为文本文件。

例如，是否可以将外部指向这样的路径：

```
http://mysite/svn/mysymlink/whatineedtocheckout 
```

代替

```
http://mysite/svn/folder1/folder2/folder3/whatineedtocheckout 
```

这很重要，因为如果可以以这种方式使用符号链接，那么我们更新项目外部文件将非常简单（只需修改符号链接）。

# c# - sql server 2005 clr c# 检查文件状态

> ID：16037849
> 
> 赞同：0
> 
> 时间：2013-04-16T13:04:07.320
> 
> 标签：c#, sql-server-2005, clr

我需要检查多个远程 Windows 服务器（在 LAN 中）上文件的状态（现有？或上次修改日期）。远程服务器需要用户名和密码才能访问。

我试图使用 T-SQL (sql server 2005) 来完成它，但只是认为最好使用 CLR 过程/函数来完成？使用存储过程的原因是 ssrs 报告将使用它来显示每个服务器的列表是否具有文件（最后修改日期）。过程/函数的参数应该是服务器上文件的 unc/path。

我知道 CLR，但需要 c# 代码来执行此操作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:12:39.087

如果有问题的文件可以通过 UNC 路径名定位，那么使用 c# 非常简单：

```
var fInfo = new FileInfo("uncPathGoesHere");

if (fInfo.LastWriteTime > DateTime.Now.AddHours(-1))
{
    //  file modified within last hour
} 
```

# ruby-on-rails - 如何使用 ruby 在 mongodb 中获取最后一条记录？

> ID：16037852
> 
> 赞同：1
> 
> 时间：2013-04-16T13:04:17.167
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我在我的应用程序中使用 Ruby on rails，mongoid。我想获得集合中的最后一条记录。我试试

```
Person.find().sort({'_id',-1}) 
```

但是，此命令不适用于 ruby​​。我怎样才能获得最后的记录？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:08:29.827

尝试这个

```
Person.asc(:created_at).last 
```

# php - 开始日期和开始时间小于结束日期和结束时间验证

> ID：16037854
> 
> 赞同：0
> 
> 时间：2013-04-16T13:04:22.623
> 
> 标签：php, mysql, date, time, jquery-ui-datepicker

开始时间、结束日期和结束时间变量。

日期变量被格式化`yyyy-mm-dd`

时间变量被格式化`hh-mm`（但是只有小时数可用，例如分钟总是 00）

我可以将这些变量插入我的数据库没有问题，但是在我这样做之前，我想检查开始日期和时间是否在结束日期和时间之前。我知道如何检查时间是否更早，日期是否更早，但我无法同时检查时间和日期，我会很感激任何帮助？

```
$_POST['start_time']
$_POST['end_time']
$_POST['start_date']
$_POST['end_date'] 
```

是变量以及我如何获取它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T13:12:04.677

使用`DateTime`对象让自己的生活变得简单：

```
<?php
// assuming the following values...
$_POST['start_time'] = '06:00';
$_POST['end_time'] = '10:00';
$_POST['start_date'] = '2012-01-01';
$_POST['end_date'] = '2013-06-02';

//set up two DateTime objects
$start = DateTime::createFromFormat('Y-m-d H-i', $_POST['start_date'] . ' ' . $_POST['start_time']);
$end = DateTime::createFromFormat('Y-m-d H-i', $_POST['end_date'] . ' ' . $_POST['end_time']);

// check if they're valid
if ($start < $end) {
  echo 'We are good...';
} else {
  echo 'Something bad happened...';
} 
```

请记住，这假设您的`$_POST`ed 值是有效的。如果您尚未对其进行消毒，请`try/catch`至少将其包裹起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:11:20.840

```
function getTime ($ymd, $hi) {
    return strtotime($ymd." ".$hi);
}
if (getTime($_POST['start_date'], $_POST['start_time']) < getTime($_POST['end_date'], $_POST['end_time'])) {
    echo "Ok!";
} 
```

只需将其转换为 Unix 时间戳，然后进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T13:08:37.220

我会用[`DateTime::createFromFormat()`](http://www.php.net/manual/en/datetime.createfromformat.php)它。像这样：

```
$start = DateTime::createFromFormat('Y-m-d H-i',
             $_POST['start_date'] . ' ' . $_POST['start_time']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:07:46.257

尝试分解数组，然后使用 mktime() 函数将日期传递给秒。然后，只需比较两个日期，秒数越大越晚。

```
list($strHour, $strMin) = explode('-', $_POST['start_time']);
list($endHour, $endMin) = explode('-', $_POST['end_time']);
list($strYear, $strMonth, $strDay) = explode('-', $_POST['start_date']);
list($endYear, $endMonth, $endDay) = explode('-', $_POST['end_date']);

$startSeconds = mktime($strHour, $strMin, 0, $strMonth, $strDay, $strYear);
$endSeconds   = mktime($endHour, $endMin, 0, $endMonth, $endDay, $endYear);

if ($startSeconds > $endSeconds) {
    echo 'Start is bigger';
} 
```

# ruby-on-rails - RoR 登录页面并将数据发布到远程 url

> ID：16037855
> 
> 赞同：0
> 
> 时间：2013-04-16T13:04:23.677
> 
> 标签：ruby-on-rails, ruby, post, external

这是我的问题：

我需要将数据从 RoR 服务器发布到远程 PHP 服务器，到特定的 url，但在此之前我需要进行身份验证.. 任何帮助都非常感谢..

到目前为止我所做的..

```
#sample data
postparams ={'id'=>1, 'name'=>'Test', 'phone'=>'123123123'}
#url - is in form http://domain.com/some/somemore
#user - contains username
#pass - contains password

require "uri"
require "net/http"

uri = URI(url)
req = Net::HTTP::Post.new(uri.path)
req.set_form_data(postparams)

res = Net::HTTP.start(uri.hostname, uri.port) do |http|
  http.request(req)
end

case res
when Net::HTTPSuccess, Net::HTTPRedirection
 #all ok
else
  res.value
end 
```

显然我得到 403 .. 因为我没有被授权？我如何授权？

我还用 mechanize gem 试试运气（下图 - 使用相同的“样本”数据\vars）

```
#when not logged in it renders login form
login_form = agent.get(url).forms.first
login_form.username = user
login_form.password = pass

# submit login form
agent.submit(login_form, login_form.buttons.first)

#not sure how to submit to url..
#note that accessing url will not render the from 
#(I can't access it as I did with login form) - I simply need to post postparams
#to this url... and get the response code.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:56:56.987

我认为机械化宝石是您的最佳选择。

[这](http://mechanize.rubyforge.org/EXAMPLES_rdoc.html)是一个示例，展示了如何使用 mechanize 将文件发布到闪烁。也许您可以轻松适应您的需求：

```
require 'rubygems'
require 'mechanize'

abort "#{$0} login passwd filename" if (ARGV.size != 3)

a = Mechanize.new { |agent|
  # Flickr refreshes after login
  agent.follow_meta_refresh = true
}

a.get('http://flickr.com/') do |home_page|
  signin_page = a.click(home_page.link_with(:text => /Sign In/))

  my_page = signin_page.form_with(:name => 'login_form') do |form|
    form.login  = ARGV[0]
    form.passwd = ARGV[1]
  end.submit

  # Click the upload link
  upload_page = a.click(my_page.link_with(:text => /Upload/))

  # We want the basic upload page.
  upload_page = a.click(upload_page.link_with(:text => /basic Uploader/))

  # Upload the file
  upload_page.form_with(:method => 'POST') do |upload_form|
    upload_form.file_uploads.first.file_name = ARGV[2]
  end.submit
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:17:44.403

我强烈建议使用 ruby[​​ rest-client](https://github.com/adamwiggins/rest-client) gem。

# c# - 如何将 UserControl.IsEnabled 绑定到其命令

> ID：16037857
> 
> 赞同：3
> 
> 时间：2013-04-16T13:04:31.730
> 
> 标签：c#, wpf

我有一个 UserControl 声明一个命令：

```
public static readonly DependencyProperty CommandProperty = 
    DependencyProperty.Register("Command", typeof(ICommand), typeof(MyUserControl));

public ICommand Command
{
    get { return (ICommand) GetValue(CommandProperty); }
    set { SetValue(CommandProperty, value); }
} 
```

该命令由父 UI 分配。
如何将 UserControl 的 IsEnabled 绑定到命令的可用性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:44:51.843

尝试这个：

```
 public static readonly DependencyProperty CommandProperty =
        DependencyProperty.Register("Command", typeof(ICommand), typeof(UserControl1),
                                    new PropertyMetadata(default(ICommand), OnCommandChanged));

    public ICommand Command
    {
        get { return (ICommand) GetValue(CommandProperty); }
        set { SetValue(CommandProperty, value); }
    }

    private static void OnCommandChanged(DependencyObject dependencyObject,
                                         DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
    {
        var userControl = (UserControl1) dependencyObject;
        var command = dependencyPropertyChangedEventArgs.OldValue as ICommand;
        if (command != null)
            command.CanExecuteChanged -= userControl.CommandOnCanExecuteChanged;
        command = dependencyPropertyChangedEventArgs.NewValue as ICommand;
        if (command != null)
            command.CanExecuteChanged += userControl.CommandOnCanExecuteChanged;
    }

    private void CommandOnCanExecuteChanged(object sender, EventArgs eventArgs)
    {
        IsEnabled = ((ICommand) sender).CanExecute(null);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:44:17.043

你可以试试这个：

```
public static readonly DependencyProperty CommandProperty =
  DependencyProperty.Register(
    "Command", typeof(ICommand), typeof(UserControl1), new PropertyMetadata(null, OnCurrentCommandChanged));

private static void OnCurrentCommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e) {
  UserControl1 currentUserControl = d as UserControl1;
  ICommand newCommand = e.NewValue as ICommand;
  if (currentUserControl == null || newCommand == null)
    return;
  newCommand.CanExecuteChanged += (o, args) => currentUserControl.IsEnabled = newCommand.CanExecute(null);
}

public ICommand Command {
  get {
    return (ICommand)GetValue(CommandProperty);
  }
  set {
    SetValue(CommandProperty, value);
  }
} 
```

# jboss - 如何为特定应用程序定义自定义 EAR 文件名？

> ID：16037860
> 
> 赞同：0
> 
> 时间：2013-04-16T13:04:42.500
> 
> 标签：jboss, ear, eclipse-3.4

这是我的设置 SDK：Eclipse Ganymede (3.4.2) 应用服务器：jBoss 4.2.3GA

我有三个项目：

*   MYAPP，这是主项目，只有库和 log4j 配置。这是 application.xml 和 jboss-app.xml 所在的位置。
*   MYAPPEJB，这是我的业务逻辑项目，其中有我的实体 bean、会话 bean。
*   MYAPPWeb，这是我的客户端逻辑项目，其中有我的 Struts Forms、Struts Actions、JSP 和 Jasperreports 报告。

当我将项目发布到笔记本电脑上的 jBoss 服务器时，我得到了以下 EAR 文件名：MYAPP.ear，这很有意义。

我想为最终的 EAR 定义一个不同的自定义名称，比如说 ACCOUNTMANAGER.ear

这是我的 application.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:application="http://java.sun.com/xml/ns/javaee/application_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_5.xsd" id="Application_ID" version="5">
   <display-name>MYAPP</display-name>
   <module>
      <ejb>MYAPPEJB.jar</ejb>
   </module>
   <module>
      <web>
          <web-uri>MYAPPWeb.war</web-uri>
          <context-root>/manager/myapp</context-root>
      </web>
   </module>
   <library-directory>/lib</library-directory>
</application> 
```

任何想法？

谢谢

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:17:53.697

您可以在 web -> web-uri 标签下的 application.xml 文件中指定您的 ear 文件名。请检查此链接以供参考。[网络URI](http://docs.oracle.com/cd/E13222_01/wls/docs61/programming/app_xml.html#1028735)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T04:44:36.773

您可以在 application.xml 文件中指定。它将选择此名称而不是 ear 文件名。我的耳朵名字

# cordova - 如何修复 Windows Phone 8 Phonegap 应用程序的方向？

> ID：16037863
> 
> 赞同：3
> 
> 时间：2013-04-16T13:04:50.223
> 
> 标签：cordova, windows-phone-8, screen-orientation

有人知道如何修复 Windows Phone 8 的 Phonegap 应用程序中的方向吗？

我希望该应用程序仅支持纵向。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-20T19:38:21.530

接受的答案不正确

正确答案是：

打开

> 主页.xaml

并将其更改为您想要的方向，minie 是 Portrait

> SupportedOrientations="Portrait" 方向="Portrait"

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-02T16:47:36.853

如果要动态执行此操作，则需要创建一个插件。首先在 MainPage.xaml 文件中创建一个处理程序：

> ```
>  public MainPage()
>     {
>         ...
>         ScreenLockCommand.OnScreenLock += HandleScreenLock;
>         ... 
> ```

```
 }       

    public void HandleScreenLock(SupportedPageOrientation orientation)
    {
        this.Dispatcher.BeginInvoke((Action)(() =>
        {
            this.SupportedOrientations = orientation;
        }));
    } 
```

然后像这样从你的插件中调用它：

> OnScreenLock(SupportedPageOrientation.Portrait);

或者

> OnScreenLock(SupportedPageOrientation.PortraitOrLandscape);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T09:22:11.757

将此行添加到您的 config.xml 文件

```
<preference name="orientation" value="portrait" /> 
```

# c# - RDLC 报告中我的日期时间数据字段出错

> ID：16037866
> 
> 赞同：1
> 
> 时间：2013-04-16T13:05:06.357
> 
> 标签：c#, asp.net, datetime, reporting-services, ssrs-2008

我的日期时间字段报告遇到以下问题：

```
#Error 
```

* * *

![在此处输入图像描述](https://i.stack.imgur.com/D9mNT.png)

我检查 null 或空，但我总是得到这个错误

我试试这个：

```
=IIf(CDate(Fields!recommendationDate.Value)=CDate("1/1/0001"),Nothing,
 CDate(Fields!recommendationDate.Value).ToShortDateString()) 
```

* * *

```
=IIf(FormatDateTime(Fields!recommendationDate.Value,2)=CDate("1/1/0001"),"",FormatDateTime(Fields!recommendationDate.Value.Value,2)) 
```

* * *

```
=IIF(Fields!recommendationDate.Value is nothing, nothing,Format(CDate(Fields!recommendationDate.Value),"dd/MM/yyyy")) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T13:19:00.993

正确的代码是：

```
IIf(IsNothing(Fields!recommendationDate.Value), "",
              format(Fields!recommendationDate.Value, "dd/MM/yyyy")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:43:02.743

```
=IIF(CDATE(IIF(TRIM(Fields!recommendationDate.Value).ToString().Length = 0,
"1/1/0001",
Fields!recommendationDate.Value)).ToString() = CDATE("01/01/0001"),
"",
Format(CDATE(IIF(TRIM(Fields!recommendationDate.Value).ToString().Length = 0,
"1/1/0001",
Fields!recommendationDate.Value)), "dd-MMM-yyyy")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:16:41.797

我不知道`IIf`这里是否与 Ms Access 中的相似或相同`IIf`，但无论结果如何，表达式的所有部分都会执行（条件、真部分和假部分）。您可能想尝试`NULL`首先使用以下方法测试该字段`IsNull()`：

```
IIf(IsNull(Fields!recommendationDate.Value), CDate('01/01/0001'), Fields!recommendationDate.Value) 
```

# jquery - 难以计算外部 html 文件中 div 的数量（获取和查找） - jquery

> ID：16037869
> 
> 赞同：0
> 
> 时间：2013-04-16T13:05:14.320
> 
> 标签：jquery, get

所以这是我的 jquery 函数 - 它应该找到并返回控制台外部文件中的 div 数量作为 get 请求的回调。

```
$(document).ready(function(){

    $("#button").click(function(){

    $.get('source.html', function(data){
    alert("Data Loaded: " + data);
    var count = ($(data).find('div').size());
    console.log(count);
    });

    console.log ($("body").find('div').size());

    });

}); 
```

我收到一个警报，其中包含来自 source.html（包含 2 个 div）的正确数据，但计数变量总是显示为 0？有什么想法可以取悦你们这些了不起的人吗？

此处为 source.html 的 HTML：

```
<!DOCTYPE html>

 <html>
<head>
    <title>Source</title>
</head>

<body>

<div id="div1">
    You got loaded xxxx.
</div>
<div id="div2">
    You got loaded again xxxx.
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:23:52.880

如果你尝试的一切都失败了......

尝试将其添加到 jQuery 元素

```
$.get('source.html', function(data){ 
  var count = $('<div></div>').html(data).find('div').length; 
  console.log(count);
}); 
```

检查你是否得到 2 或 3。

谢谢

# iphone - Xcode 4.6 调试 - 未显示源代码（方案和调试工作流程设置正确）

> ID：16037875
> 
> 赞同：0
> 
> 时间：2013-04-16T13:05:40.133
> 
> 标签：iphone, ios, xcode, macos, debugging

在 XCode 中调试时突然看不到源代码。方案中的运行构建配置设置为debug，“Product -> Debug Workflow -> Show Disassembly...”不勾选。源代码一直显示到昨晚，我没有进行任何配置更改。帮助！建议？
该项目是一个 iPhone 应用程序；Xcode 4.6 版；Mac OSX 10.8.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:21:31.007

请检查“产品 -> 调试工作流程 -> 标准窗口”是否被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:56:33.460

哎呀——XCode 实际上配置正确，问题是“找不到选择器”异常一直冒泡到 main，这样我在调用堆栈中的唯一代码是 main，其余的都是 Apple 的。我自己代码中的断点实际上确实显示了源代码。

# java - 使用 pdfbox 1.8.0 时保存的 PDF 表单损坏

> ID：16037879
> 
> 赞同：0
> 
> 时间：2013-04-16T13:05:56.933
> 
> 标签：java, pdfbox

我已将我的`PDFBOX`API Jar 更新为`1.8.0`from `1.7.1`。

现在我面临一些问题，例如，如果我尝试保存 pdf，则保存的表单已损坏。我无法通过 pdfbox api 重新打开保存的 pdf 文件。

有没有人遇到过这个，所以请分享您的观点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T14:40:28.493

请使用 Apache PDFBox -- 版本 1.8.1。他们修复了一些错误。它会解决你的问题。我也在寻找 1.8.0 版中提供的新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-25T11:59:10.873

也许您遇到了在 1.8.1 版中解决的这个问题：

```
[PDFBOX-1556] - Saving a document containing a xfa form creates invalid pdf 
```

我正在运行 1.8.9 没有任何问题。

# jquery - 删除包含一组字符的类

> ID：16037882
> 
> 赞同：7
> 
> 时间：2013-04-16T13:06:03.670
> 
> 标签：jquery, css, removeclass

有没有办法删除一个开始或包含定义的文本字符串的类？

我有几个开始的背景颜色覆盖类`.bg`

```
.bgwhite
.bgblue
.bgyellow 
```

我已经为一个选择框设置了一个小 jquery，它添加和删除对元素的修改类，在这种情况下，`<a href id="buttontostyle">`我需要删除这些以 开头的类`.bg`，同时保留另一个确定按钮大小的类等等像这样：

```
 $("#buttoncolors").change(function() // buttoncolors is the select id
    {
        var valcolor = $("#buttoncolors").val();
        $("#buttontostyle").removeClass("bg" + "*");
        $("#buttontostyle").addClass(valcolor);

    }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T15:12:21.197

您可以将一个函数传递给 removeClass，它返回您要删除的类的列表。在此函数中，您可以测试每个类名是否以 bg 开头，如果是，则将其添加到要删除的类列表中。

```
$("#buttoncolors").on("change", function () {
  var valcolor = $("#buttoncolors").val();

  $("#buttonstyle").removeClass(function (index, classNames) {
    var current_classes = classNames.split(" "), // change the list into an array
        classes_to_remove = []; // array of classes which are to be removed

    $.each(current_classes, function (index, class_name) {
      // if the classname begins with bg add it to the classes_to_remove array
      if (/bg.*/.test(class_name)) {
        classes_to_remove.push(class_name);
      }
    });
    // turn the array back into a string
    return classes_to_remove.join(" ");
  });

  $("#buttonstyle").addClass(valcolor);
}); 
```

演示：[http ://codepen.io/iblamefish/pen/EhCaH](http://codepen.io/iblamefish/pen/EhCaH)

* * *

**奖金**

您可以通过对回调使用命名而不是匿名函数来整理代码，以便您可以多次使用它。

```
// name the function 
function removeColorClasses (index, classNames) {
  var current_classes = classNames.split(" "), // change the list into an array
      classes_to_remove = []; // array of classes which are to be removed

  $.each(current_classes, function (index, class_name) {
    // if the classname begins with bg add it to the classes_to_remove array
    if (/bg.*/.test(class_name)) {
      classes_to_remove.push(class_name);
    }
  });
  // turn the array back into a string
  return classes_to_remove.join(" ");
} 
```

然后，您可以通过传入您通常编写的名称来一遍又一遍地使用此函数`function () { ... }`

```
// code that the dropdown box uses
$("#buttoncolors").on("change", function () {
  var valcolor = $("#buttoncolors").val();

  $("#buttonstyle").removeClass(removeColorClasses);

  $("#buttonstyle").addClass(valcolor);
});

// another example: add a new button to remove all classes using the same function
$("#buttonclear").on("click", function () {
  $("#buttonstyle").removeClass(removeColorClasses);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T14:19:59.973

这应该可以解决问题，同时仍然保留其他类：

```
var matches = $('#buttontostyle').attr('class').match(/\bbg\S+/g);
$.each(matches, function(){
    var className = this;
    $('#buttontostyle').removeClass(className.toString());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:15:15.997

试试这个 -

```
$('#buttontostyle:not([class^="bg"])'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-10T13:19:37.843

这个怎么样...

```
// remove class regex expression function
$.fn.removeClassRegEx = function(regex) {
  var classes = $(this).attr('class');
  if (!classes || !regex) return false;
  var classArray = [];
  classes = classes.split(' ');
  for (var i = 0, len = classes.length; i < len; i++)
    if (!classes[i].match(regex)) classArray.push(classes[i]);
  $(this).attr('class', classArray.join(' '));
};

// run function on #card element
$('#card').removeClassRegEx('brand-');
```

```
.card-logo {
  background: black;
  color: white;
}

.brand-mastercard {
  background: red;
}
```

```
<code id="card" class="card-logo brand-mastercard">Inspect this element</code>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
```

来源取自这里... [https://websanova.com/blog/jquery/jquery-remove-class-by-regular-expression](https://websanova.com/blog/jquery/jquery-remove-class-by-regular-expression)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-14T07:09:22.847

允许更大的灵活性，用户只需要为他们想要删除的每个类返回 true：

```
$.fn.removeClassBy = function (fun) {
  if (!fun) return
  $(this).removeClass(function (index, classNames) {
    const currentClasses = classNames.split(' '); // change the list into an array
    let classesToRemove = []; // array of classes which are to be removed

    $.each(currentClasses, function (index, className) {
      // if the classname begins with bg add it to the classes_to_remove array
      if (fun(className)) {
        classesToRemove.push(className);
      }
    });
    // turn the array back into a string
    return classesToRemove.join(' ');
  })
} 
```

用法：

```
$('[class*="some-partial-class-name"]').removeClassBy(className => className.includes('some-partial-class-name')); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-16T14:23:32.640

试试这个

```
 $("#buttontostyle").removeClass('[class^="bg"]'); 
```

# jdo - 使用已声明变量的属性进行排序

> ID：16037892
> 
> 赞同：0
> 
> 时间：2013-04-16T13:06:35.817
> 
> 标签：jdo, datanucleus, jdoql

我有一个`ScInfo`存在于许多不同类中的类。这个类还有一个列表，`ScDetails`其中有一个`Date`名为 的成员变量`nextExecution`。

我需要不断查找符合条件的对象，其`ScDetails`对象的`nextExecution`成员变量在或等于当前服务器的时间之后（即**persistenceManagerInstance.getServerDate()**）。这意味着我需要查找对象，`ScInfo`具有>= serverDate的`ScDetails`对象）`nextExecution`

所以我使用以下方法（显示了一部分）：

```
public List<Object[]> getEligbleForExecution(long amount) {
    PersistenceManager pm = null;
    Transaction t = null;
    try {
        pm = getPM();
        t = pm.currentTransaction();
        t.begin();
        Query q = pm
                .newQuery(
                        entityClass, //This is generic
                        "!this.deleted && this.scheduleActive && det.active == true && (det.nextExecution == null || det.nextExecution <= :serverDate) && det.running == false && this.scInfo.scDetails.contains(det)");
        q.declareVariables(ScDetail.class.getName() + " det;");
        q.setRange(0, amount);
        q.setResult("this, det");
        q.setOrdering("det.nextExecution"); // This is the statement I need to apply but it's causing the error below
        Date serverDate = pm.getServerDate();
        List<Object[]> raw = new ArrayList<Object[]>((List<Object[]>) q.execute(serverDate)); 
```

这会引发以下错误堆栈跟踪（**调试**级别，我提到了我认为对于解决此问题至关重要的内容）：

```
14:54:32 DEBUG (Log4JLogger.java:58)-[main] >> QueryToSQL.processVariable (unbound) variable=det is not yet bound so returning UnboundExpression
14:54:32 DEBUG (Log4JLogger.java:58)-[main] Updating mapping of org.datanucleus.store.rdbms.sql.expression.NullLiteral@727f3b8a to be org.datanucleus.store.mapped.mapping.DateMapping@e72a8082
14:54:32 DEBUG (Log4JLogger.java:58)-[main] Transaction rolling back for ObjectManager org.datanucleus.MultithreadedObjectManager@fba0f36
14:54:32 DEBUG (Log4JLogger.java:58)-[main] Rolling back [DataNucleus Transaction, ID=Xid={A strange uncopyable character is in here !}, enlisted resources=[]]
14:54:32 DEBUG (Log4JLogger.java:58)-[main] Transaction rolled back in 1 ms
14:54:32 ERROR (ScTasksDAOImpl.java:67)-[main] Looking up eligible SC tasks
java.lang.NullPointerException
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.processVariableExpression(QueryToSQLMapper.java:3245)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.processPrimaryExpression(QueryToSQLMapper.java:2075)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compilePrimaryExpression(AbstractExpressionEvaluator.java:180)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileUnaryExpression(AbstractExpressionEvaluator.java:169)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileAdditiveMultiplicativeExpression(AbstractExpressionEvaluator.java:148)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileRelationalExpression(AbstractExpressionEvaluator.java:123)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.compileOrAndExpression(AbstractExpressionEvaluator.java:65)
    at org.datanucleus.query.evaluator.AbstractExpressionEvaluator.evaluate(AbstractExpressionEvaluator.java:46)
    at org.datanucleus.query.expression.Expression.evaluate(Expression.java:337)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.compileOrdering(QueryToSQLMapper.java:845)
    at org.datanucleus.store.rdbms.query.QueryToSQLMapper.compile(QueryToSQLMapper.java:403)
    at org.datanucleus.store.rdbms.query.JDOQLQuery.compileQueryFull(JDOQLQuery.java:883)
    at org.datanucleus.store.rdbms.query.JDOQLQuery.compileInternal(JDOQLQuery.java:343)
    at org.datanucleus.store.query.Query.executeQuery(Query.java:1747)
    at org.datanucleus.store.query.Query.executeWithArray(Query.java:1666)
    at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:243)
    at com.sc.ipk.sc.services.ScTasksDAOImpl.getEligbleForExecution(ScTasksDAOImpl.java:41)
    at com.sc.ipk.ixl.services.IxlTestDAOImpl.main(IxlTestDAOImpl.java:977)
14:54:32 DEBUG (Log4JLogger.java:58)-[main] Object Manager "org.datanucleus.MultithreadedObjectManager@fba0f36" closed 
```

那么不能使用声明的变量来查询排序吗？我尝试使用子查询，但我也无法让它工作，如果无法使用声明的变量进行排序，我可以为此提出一个新问题。

**编辑：** 尼尔慷慨地建议，基于集合中应该存在的元素进行排序在他看来并不合理。我明白这一点，但我不能例如`ScDetails`在订购对象后首先查找对象，然后再查找我的主要对象，因为我的目标主要对象可能会不时不同，我可能会查找`ScDetails`不属于的对象到主要候选人类。

例如： **A** has`ScInfo`它有一个集合`ScDetails` **B**，**C**（同上）

因此，如果我首先查找`ScDetails`对象（在对所有对象进行排序之后），我将无法过滤我的主要候选类（**A**、**B**和**C**），因为我可能会在尝试获取**B**或**C**候选对象时使用`ScDetails`属于**A 的对象。**

 ****谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T13:18:51.763

我看不出您如何按*该*变量排序。它表示候选集合中的一个元素。因此，如果候选人有 5 个元素，那么它如何通过元素上的某些属性进行排序是不确定的（1-N 映射）。显然，如果候选者是元素，那么根据元素的某些属性进行排序是非常有意义的，无论是否可变。****

# php - 使用 jquery 将地理位置数据保存到 html 文件

> ID：16037899
> 
> 赞同：3
> 
> 时间：2013-04-16T13:06:52.673
> 
> 标签：php, jquery, geolocation

我正在尝试将地理位置数据写入 HTML 文件，但不起作用。我总是收到以下有关数据的消息：

“注意：未定义的索引：”

jquery变量数据始终为空

... 我究竟做错了什么？

提前致谢。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

<body onload="testResults()">
<script>
function testResults()
{
if (navigator.geolocation)
{
    //Get the current position
    navigator.geolocation.getCurrentPosition(function (position)
    {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        //var cadena = "lat=" + latitude + "&lon=" + longitude;
        var cad = latitude + "  " + longitude;

        // do callback                
        $.ajax(
        {
            type: "POST",
            url: "checklo.php",
            //data: "lat=" + latitude + "&lon=" + longitude
            data: cad,
        }).done(function (msg)
        {
            // Only to check it
            alert("Data Saved: " + cad);
        });

    });
}
else
{
 alert("Sorry... your browser does not support the HTML5 GeoLocation API");
}
} 
```

和php文件checklo.php的代码

```
<?php
$file = 'geo.html';
$datos = $_POST['data'];

if (isset($datos)) {

  $fp = fopen($file, "a");
  fputs($fp, "</br>$datos </br>");
  flock($fp, 3); 
  fclose($fp);
  //echo 'msg ';
}
else {
  //echo 'msg !';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T18:53:51.607

谢谢你的回答

我用 print_r($_POST, true) 和 var_export($_POST, true) 检查了它，但我没有得到任何输出，我在 html 文件中得到的唯一东西是这个，一个空数组：

```
</br>Array
(
)
</br></br>Array
(
)
</br></br>Array
(
) 
```

我已经尝试过两种使用数据的方式，但都不起作用

```
 $.ajax(
 {
     type: "POST",
     url: "checklo.php",
     //data: "lat=" + latitude + "&lon=" + longitude ,
     data: 'cad' ,
 }).done(function (msg) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:43:52.330

我已经能够在 ajax 调用中使用以下格式解决

```
data: { lat: latitude, lon: longitude } 
```

并在 checklo.php

```
foreach ($_POST as $key => $value) 
  $dat .= $key . ' -> ' . $value . '<br>'; 
```

谢谢

# iphone - 纹理图集的 plist 中缺少精灵名称

> ID：16037900
> 
> 赞同：2
> 
> 时间：2013-04-16T13:06:52.857
> 
> 标签：iphone, cocos2d-iphone, plist

Cocos 2d：我有一个纹理图集的 plist，但在 plist 中我们没有得到精灵名称，只有坐标和大小。如何使用坐标使用来自 plist 的图像（因为名称不存在）

![在此处输入图像描述](https://i.stack.imgur.com/lJ7Mh.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T19:06:28.510

我的建议是重新创建 spritesheet 和 plist 文件。不要在没有图像名称的 plist 文件上浪费时间。

只需访问[http://www.zwopple.com/zwoptex/](http://www.zwopple.com/zwoptex/)并使用应用程序的免费版本（或 flash 版本）来创建 spritesheet 和 plist 文件。它将图像的名称添加到 plist 中。我经常使用它。

# sql - 将 SQL join 与 group by 和 MAX 转换为 Linq

> ID：16037901
> 
> 赞同：0
> 
> 时间：2013-04-16T13:06:54.340
> 
> 标签：sql, linq, entity-framework

我在 sql 中创建了以下查询，但我无法找出如何在我的 linq 中实现 StatusAndTrackingNotes 表连接：

```
SELECT *
FROM [Application] APP
join User USR on APP.ApplicationId = USR.UserApplicationId
join 
(Select MAX(TrackingDate) as MaxDateTD,TrackingApplicationId
 From StatusAndTrackingNotes 
 where TrackingLoanType = 1 and ((TrackingStatusCode <= 52 and TrackingStatusCode >= 50) or TrackingStatusCode = 62)
 group by TrackingApplicationId) MTND on APP.ApplicationId = MTND.TrackingApplicationId
join Details DTL on APP.ApplicationId = DTL.ApplicationId
join ApplicationFees AF on APP.ApplicationId = AF.ApplicationId
where APP.LatestStatus = 'F' and DTL.Type = 1 and DTL.FundingDate >= '2011-06-01'  and   DTL.FundingDate <= '2013-06-30'
    and AF.FirstRefPaidDate is not null 
```

请帮助我使用语法。首先我使用简单的查询和连接，然后

```
([Linq Query]).GroupBy(i => i.TrackingApplicationId).Select(g => g.OrderByDescending(c => c.TrackingDate).FirstOrDefault()); 
```

但它不返回任何结果。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:16:51.323

我会通过创建`StatusAndTrackingNotes`单独的查询并将其加入并将其分组到“主查询”来解决它。IE：

```
var trackingQuery =
    from t in statusAndTrackingNotes
    where t.TrackingLoanType == 1 && (t.TrackingStatusCode <= 52 && t.TrackingStatusCode >=50) || t.TrackingStatusCode == 62
    group t by t.TrackingApplicationId into trackings
    select new 
    { 
        TrackingApplicationId = trackings.Key,
        MaxDate = trackings.Max(t => t.TrackingDate)
    };

var appQuery =
    from app in Application
    join t in trackingQuery on app.ApplicationId equals t.TrackingApplicationId
    /* other joins here */
    select new
    {
        app,
        t.MaxDate,
    }; 
```

# java - 包含引号 java

> ID：16037903
> 
> 赞同：0
> 
> 时间：2013-04-16T13:07:00.860
> 
> 标签：java, string, quotation-marks

如何添加一个参数来检查一个字符串是否包含一个引号？我试图逃避角色，但它不起作用

```
words[i].contains() 
```

编辑：我的错，有一些未闭合的括号，现在可以正常工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:13:08.013

```
words[i].matches("[^\"]*\"[^\"]*") 
```

那就是：任何非引号，一个引号，任何非引号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T13:08:57.293

你可以使用这样的东西：

```
words[i].split("\"").length - 1 
```

这会给你`"`字符串中 s 的数量。因此，只需使用：

```
if (words[i].split("\"").length == 2) {
    //do stuff
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T13:24:00.127

您可以检查第一个引号是否存在，然后检查第二个引号是否不存在。~~它比使用匹配或拆分要快得多。~~

```
int index = words[i].indexOf('\"');
if (index != -1 && words[i].indexOf('\"', index + 1) == -1){
    // do stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:28:09.877

要检查数字或引号，您还可以在删除后使用字符串长度`"`。

```
int quotesNumber = words[i].length() - words[i].replace("\"", "").length();
if (quotesNumber == 1){
    //do stuff
} 
```

# entity-framework - 简单映射上的 EF 5.0 多重性错误

> ID：16037907
> 
> 赞同：5
> 
> 时间：2013-04-16T13:07:12.790
> 
> 标签：entity-framework, code-first

我有以下域对象：

```
public class Person 
{
    public int Id {get; set;}
    public int? FatherId {get; set;}
    public int? MotherId {get; set;}
    public int? HomeChurchId {get; set;}
    public int? BirthCountryId {get; set;}

    public Parent Father {get; set;}
    public Parent Mother {get; set;}
    public Church HomeChurch {get; set;}
    public Country BirthCountry {get; set;}
}

public class Parent
{
    public int Id {get; set;}
    ...
}

public class Church
{
    public int Id {get; set;}
    ...
}

public class Country
{
    public int Id {get; set;}
    ...
} 
```

映射 Person 时，所有这些属性的映射方式几乎相同：

```
HasOptional(p => p.Father).WithMany().HasForeignKey(p => p.FatherId);
HasOptional(p => p.BirthCountry).WithMany().HasForeignKey(p => p.BirthCountryId);    
... 
```

问题是，使用 BirthCountry 时，我在尝试查询 Person 时收到以下错误：

```
One or more validation errors were detected during model generation:

System.Data.Entity.Edm.EdmAssociationType: : Multiplicity conflicts with the
referential constraint in Role 'Person_BirthCountry_Target' in relationship
'Person_BirthCountry'. Because all of the properties in the Dependent Role are 
non-nullable, multiplicity of the Principal Role must be '1'. 
```

如果我删除 BirthCountry 属性（和映射）一切正常。令我困惑的是 BirthCountry 的设置就像 Person 中的所有其他可为空的属性一样。为什么其他属性没有给我同样的错误？

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T15:38:21.640

无知不是幸福……它只是令人沮丧。

我终于意识到我在 BirthCountryId 上有一个 [Required] 属性。这导致了问题......这完全有道理。我不能同时告诉 EF 它是可选的和必需的。

希望这可以使其他人摆脱与我一样的挫败感。

# java - 我可以在这样的地图中使用通配符吗？ , ?>

> ID：16037908
> 
> 赞同：4
> 
> 时间：2013-04-16T13:07:14.390
> 
> 标签：java, generics

我有一个私有实例

```
private final Map<Class<?>, ?> map; 
```

从语法上讲，这是正确的。我想做的就是这个。

```
public class User {
}
public class UserSubclass extends User {
}
public class Role {
}

map.put(User.class, new User()); // valid
map.put(User.class, new UserSubclass()); // valid
map.put(Role.class, new Role()); // valid
// But when I do the following I need to get an error
map.put(User.class, new Role(); // invalid, compiler error 
```

1.  我应该如何声明地图？
2.  如何将 HashMap 的对象实例化到此 Map？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:08:35.063

不，一个简单`java.util.Map`的不支持这个。它是*静态*类型的，您所要求的基本上是基于另一个参数的运行时类型的一个参数的动态类型。

但是，[Guava](https://code.google.com/p/guava-libraries/)类[`ClassToInstanceMap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/ClassToInstanceMap.html)完全实现了您想要的：

> 一个映射，它的每个条目都将一个 Java 原始类型映射到该类型的一个实例。除了实现之外`Map`，还有其他类型安全的操作`putInstance(java.lang.Class<T>, T)`和`getInstance(java.lang.Class<T>)`可用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T13:22:23.827

默认情况下您不能这样做，但您可以做的是创建自己的通用安全地图，这将起作用。

GenericMap 看起来像这样：

```
class GenericMap extends HashMap<Class<?>, Object> {

    public <T> T putClassAndInstance(Class<T> c, T o){
        return c.cast(super.put(c, o));
    }

    public <T> T getInstance(Class<T> c) {
        return c.cast(super.get(c));
    }
} 
```

然后可以像这样使用：

```
GenericMap map = new GenericMap();

map.putClassAndInstance(User.class, new User()); // valid
map.putClassAndInstance(User.class, new UserSubclass()); // valid
map.putClassAndInstance(Role.class, new Role()); // valid
map.putClassAndInstance(User.class, new Role()); // invalid, compiler error 
```

这样，您不必为 User 和 Role 创建特殊方法，并且仍然具有不为错误类型添加错误对象的安全性。

# php - php：达到行数后截断文本？

> ID：16037911
> 
> 赞同：1
> 
> 时间：2013-04-16T13:07:29.517
> 
> 标签：php

我熟悉基于达到的最大字符数的 PHP 截断文本，但是我想在截断之前从字符中调整它以将文本限制为 10 行。

我怎样才能实现这一目标？

这是我目前用来限制字符数的方法：

```
<?php $str = $profile['bio'];
$max = 510;
if(strlen($str) > $max) {
$str = substr($str, 0, $max) . '...'; } ?>
<?php echo $str ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:09:53.643

用于[`explode()`](http://php.net/manual/en/function.explode.php)将文本转换为行数组，[`array_slice()`](http://www.php.net/manual/en/function.array-slice.php)以限制行数，然后[`implode()`](http://php.net/manual/en/function.implode.php)将它们重新组合在一起：

```
<?php
    $text = "long\nline\ntext\nhere";
    $lines = explode("\n", $text);

    $lines = array_slice($lines, 0, 10); //10 is how many lines you want to keep
    $text = implode("\n", $lines);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:26:04.933

我认为你最好的选择是使用纯 CSS 来限制你的文本/容器的高度。

什么是文本“行”？纯文本写在表单域中？来自编辑器的文本可能里面充满了 html 标签？带有外来字符的utf8文本？

我没有看到短语“文本行”的共同模式，以便使用任何方法来限制其长度（因此限制其高度）。

如果你仍然想用 php 限制它，那么我建议使用长度限制器。总的来说，这里和网络上有无数的帖子。但是你应该小心编码数据（非拉丁数据）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:11:15.250

例如

```
<?php
$subject = data();

$p = "![\r\n]+!";
$subject = preg_split($p, $subject, 11);
$subject = array_slice($subject, 0, 10);
echo join("\r\n", $subject);

function data() {
    return <<< eot
Mary had a little lamb,
whose fleece was white as snow.

And everywhere that Mary went,
the lamb was sure to go.

It followed her to school one day
which was against the rule.

It made the children laugh and play,
to see a lamb at school.

And so the teacher turned it out,
but still it lingered near,

And waited patiently about,
till Mary did appear.

"Why does the lamb love Mary so?"
the eager children cry.

"Why, Mary loves the lamb, you know."
 the teacher did reply.
eot;
} 
```

印刷

```
Mary had a little lamb,
whose fleece was white as snow.
And everywhere that Mary went,
the lamb was sure to go.
It followed her to school one day
which was against the rule.
It made the children laugh and play,
to see a lamb at school.
And so the teacher turned it out,
but still it lingered near, 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-16T13:09:14.523

您可以使用此功能：

```
<?php
// Original PHP code by Chirp Internet: www.chirp.com.au
// Please acknowledge use of this code by including this header.
function truncateLongText ($string, $limit, $break=".", $pad="...") {
    // return with no change if string is shorter than $limit
    $string = strip_tags($string, '<b><i><u><a><s><br><strong><em>');

    if(strlen($string) <= $limit)
        return $string;
    // is $break present between $limit and the end of the string?
    if ( false !== ($breakpoint = strpos($string, $break, $limit)) ) {
        if($breakpoint < strlen($string) - 1) {
            $string = substr($string, 0, $breakpoint) . $pad;
        }
    }
    return $string;
} 
```

示例用法：

```
$text = "Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book.";
echo truncateLongText($text, 10);
// Lorem Ipsum is simply dummy text of the printing and typesetting industry... 
```

# c - 如何在 C 中的 int* 指针上使用 free 函数

> ID：16037912
> 
> 赞同：1
> 
> 时间：2013-04-16T13:07:32.293
> 
> 标签：c, pointers, malloc, free

这是我的代码：

```
int size;
int *p1;
scanf("%d",&size);
p1 =(int*)malloc(sizeof(int)*(size-1));         
for (i=0;i<size;i++)
    scanf("%d",&p1[i]);
free(p1); 
```

该程序运行完美，直到最后一行 - 自由功能。当它到达它时，我会收到一个巨大的错误窗口，例如“检测到堆损坏”。

我知道自由函数应该得到一个 void 指针，但我的是 int。我怎样才能释放它？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:08:55.160

您正在扫描的数字比您分配的空间多一个

```
p1 =(int*)malloc(sizeof(int)*(size-1));         
for (i=0;i<size;i++) 
```

这会导致损坏，`malloc` `size * sizeof *p1`字节。

调用`free`是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:08:43.620

```
p1 =(int*)malloc(sizeof(int)*(size-1)); 
```

应该

```
p1 =(int*)malloc(sizeof(int)*(size)); 
```

*您为大小为 1*的整数分配了内存，但您想读取它们的*大小*

# zend-framework - Zend_Form 无效但没有错误信息

> ID：16037913
> 
> 赞同：4
> 
> 时间：2013-04-16T13:07:34.750
> 
> 标签：zend-framework, validation, zend-form

我的 Zend_Forms 有一个奇怪的问题：`isValid()`正确地指出我的表单无效，但我没有收到任何错误消息。怎么会这样？

这是代码，这里没什么特别的。`$data`是一个帖子数据数组。未发送文件时会出现此问题。

```
 $form = $this->getForm('Foto');
    if(!$form->isValid($data)) {
        var_dump( $form->getErrors() ); die;
        return false;
    } 
```

`getForm()`如果尚未完成，则初始化表单。表格本身非常简单。

```
class Media_Forms_Foto extends Zend_Form
{
    /**
     * Initializer function. Setup forms fields.
     */
    public function init()
    {
        $this->setName('add Image');
        $this->setAction('media/gallery/addImage');

        $this->addElement('Hidden', 'gallery', array(
            'filters'    => array(),
            'validators' => array('Digits'),
            'required'   => false,
            'label'      => '',
        ));

        $this->addElement('File', 'foto', array(
            'required'      => true,
            'destination'   => ROOT_PATH .'public/upload/tmp/',
            'label'         => 'Foto',
            'validators'    => array(
                new Zend_Validate_File_IsImage(array(
                    'image/jpeg', 'image/gif', 'image/png'
                ))
            ),
            'maxFileSize'   => 2097152,
        ));

        $this->addElement('Submit', 'add', array(
            'required' => false,
            'ignore'   => true,
            'label'    => 'add Foto',
        ));

        $this->setAttrib('enctype', 'multipart/form-data');
    }
} 
```

输出：

```
array(3) {
    ["gallery"]=>
        array(0) {
        }
    ["foto"]=>
        array(0) {
        }
    ["add"]=>
        array(0) {
        }
} 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-04-22T14:00:25.407

您是否有机会使用 jquery 表单插件？如果是这样，请尝试使用 iframe 模式上传文件：

```
var options = {
    url: '/test/upload',
    success: function(response) {
    },
    beforeSubmit: disableSubmitButtons,
    iframe: true,
    dataType : 'json'
};

$('#testForm').ajaxForm(options); 
```

# iphone - iOS 企业程序违规？

> ID：16037927
> 
> 赞同：-1
> 
> 时间：2013-04-16T13:08:24.663
> 
> 标签：iphone, ios, app-store

我一直在研究企业计划，但我仍然不清楚。苹果指南说，当您购买企业许可证时，您可以将此许可证用于以下用途：

*   在 App Store 之外分发
*   分发到无限的设备
*   无需 Apple 审核

该程序旨在在您的企业内分发。但除了这些具体规则之外，我还阅读了允许将软件放在公司拥有的设备上。这并没有明确表示应用程序的用户必须在公司工作。

**我的问题是**：公司拥有设备但客户/客户使用它是否违反规则？

问候，

莱昂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:22:31.233

您应该向 Apple Enterprise 团队询问这个问题以确定。请注意，应用程序会从设备返回到 Apple（如果可能）以验证企业许可证是否仍然有效，从而记录哪些设备正在使用它。但是，这些设备没有注册，因此由 Apple 来挑战任何有问题的做法。总是最好问苹果。

# mysql - 在 Zend 中实现“锁定表”时出错

> ID：16037928
> 
> 赞同：0
> 
> 时间：2013-04-16T13:08:26.313
> 
> 标签：mysql, zend-framework, mysqli

以下是我实现锁定表的代码

```
$defaultDb = Zend_Db_Table::getDefaultAdapter();
$defaultDb->query("LOCK TABLES `test` WRITE"); 
```

但我得到一个错误

> 异常 'Zend_Db_Statement_Mysqli_Exception' 带有消息 'Mysqli 准备错误：准备好的语句协议尚不支持此命令'
> 
> Zend_Db_Statement_Mysqli->_prepare('LOCK TABLES ..')

我们不能在 Zend 中使用 lock 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:32:27.883

这并不是真正的 Zend 问题，而是 Mysqli 不接受某些查询的准备好的语句。看：

[http://framework.zend.com/issues/browse/ZF-1398](http://framework.zend.com/issues/browse/ZF-1398)

和

[使用 Zend Db 运行未准备好的语句](https://stackoverflow.com/questions/3598312/run-an-unprepared-statement-with-zend-db)

您将需要扩展适配器，或直接编写 SQL。

# c++ - 异常处理，c ++中的意外终止符

> ID：16037929
> 
> 赞同：1
> 
> 时间：2013-04-16T13:08:28.330
> 
> 标签：c++, exception, terminate

以下代码是关于异常处理的。我得到了输出：

```
Botch::f()
I'll be back! 
```

为什么水果没有被抓到？谢谢！

忽略这个。我想我已经提供了足够的细节。

```
#include <exception>
#include <iostream>
using namespace std;

void terminator() {
    cout << "I'll be back!" << endl;
    exit(0);
}

void (*old_terminate)() = set_terminate(terminator);

class Fruit {};

class Botch {
public:
    void f() throw(Fruit, bad_exception) {
        cout << "Botch::f()" << endl;
        throw Fruit();
    }
    ~Botch() { throw 'c'; }
};

int main() {
    try{
        Botch b;
        b.f();
    } catch(Fruit&) {
        cout << "inside catch(Fruit)" << endl;
    } catch(bad_exception&) {
        cout << "caught a bad_excpetionfrom f" << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:11:54.583

因为在您的 Fruit 异常的堆栈展开期间，您抛出了另一个异常（来自`Botch`析构函数）。所以你的终结者被调用了。这就是为什么从析构函数中抛出异常是一个坏主意，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:12:21.840

`Fruit`没有被捕获，因为代码永远不会到达那个 catch 子句。在`try`块中`main`，调用会`b.f()`引发类型异常`Fruit`。`Botch`作为响应，代码在进入 catch 子句之前销毁对象。的析构函数`Botch`抛出另一个异常，并触发对`terminate`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:14:09.357

在`b.f()`main 中调用时，`Fruit`抛出 a。然后执行离开该`try`块，并且在任何 catch 处理程序可以捕获它之前`Fruit`，`b`被销毁并被`'c'`抛出。在仍然活动的情况下抛出第二个异常`Fruit`会导致终止，无论任何捕获处理程序如何。
这就是为什么你永远不会从析构函数中抛出的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T13:22:22.413

因为程序流程如下：

```
try{
        Botch b;
        b.f();
        //-> exception of class Fruit has been thrown
        //-> Stack unwinding: during stack unwinding object b, 
        //which is on stack is destroyed, and its destructor is called
        //-> this destructor ~Botch() { throw 'c'; } throws another exception 
        //and this caused call of your terminator()
    } catch(Fruit&) {  // so we are never here 
```

# asp.net - Windows 8 IIS 不会在 asp.net 应用程序中加载样式表和图像

> ID：16037933
> 
> 赞同：13
> 
> 时间：2013-04-16T13:08:38.317
> 
> 标签：asp.net, iis, windows-8

我刚刚在我的计算机上安装了 Windows 8 并尝试加载我的 ASP.net 应用程序。页面加载没有问题。但是，位于 App_Themes 目录中的图像或样式表都不会加载。我确实有一个单独的文件夹，其中包含图像并且它们会加载。我认为这是一些安全问题，但我不知道它可能是什么。如果我将该站点部署到我的 dev 2008 R2 机器上，那么该站点会正确加载，但它无法在我的 Windows 8 机器上正确加载。

我的链接的一些示例是：

```
<link href="../App_Themes/Debug/style.css" type="text/css" rel="stylesheet" /> 
```

以上不加载。

```
<img id="ctl00_imgCompanyLogo" title="Header Logo" src="../Images/EmailImage.aspx?ID=6C633997-065C-44AD-9839-B754005B7995" style="border-width:0px;height:50px;width:220px;margin-left: 10px" /> 
```

然而，这个确实如此。

注意：文件根本不加载的页面上不会加载任何错误。

更新：我还应该注意，当我使用 Windows 7 编写代码时，这确实有效。

更新：我在我的应用程序中添加了一个 html 页面并右键单击该页面并且该页面没有呈现。但是，如果我创建一个新项目，页面会完美呈现。

Update2：我想我找到了问题的根源，但我不知道该怎么办。如果您在 Windows 8 机器上创建一个新项目，然后更改项目，使其使用虚拟目录而不是 IISExpress（使用项目 URL），则不会加载任何样式表，也不会加载图像。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T15:07:39.693

我有一个愚蠢的时刻。我没有选中 IIS 配置的 Common HTTP Features 组下的 Static Content 复选框。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-06-05T15:32:04.880

什么对我有用：

![在此处输入图像描述](https://i.stack.imgur.com/yhghY.png)

打开通用 HTTP 功能下的所有功能。我在安装 Windows 8 时没有检查这个。

请参考这篇文章：

[http://gurustop.net/blog/2009/10/12/funny-problem-windows-7-iis-7-5-images-css-not-showing/](http://gurustop.net/blog/2009/10/12/funny-problem-windows-7-iis-7-5-images-css-not-showing/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T13:40:58.213

您是通过 Visual Studio 运行应用程序还是在 IIS 中设置它？如果您使用 Visual Studio 来运行它，请按 F5，然后您可以在 web.config 中尝试此操作，以允许匿名用户访问该文件夹：

```
 <location path="App_Themes/Default/MyFile.css">
      <system.web>
         <authorization>
            <allow users="*"/>
         </authorization>
      </system.web>
   </location> 
```

# php - 将此 MySQL_* 转换为 PDO

> ID：16037937
> 
> 赞同：-5
> 
> 时间：2013-04-16T13:08:46.320
> 
> 标签：php, mysql, pdo

当我开始学习 PHP 时，我从未接触过 MySQL_，因为每个人都告诉我从 PDO 开始。

我了解 PDO 获取、执行等。但我真的不明白如何将其转换为 PDO：

这是一个分页系统，只是它的一小部分。

```
// counting the offset
$sql = ("SELECT * FROM comments LIMIT $offset, $rowsPerPage");
$res = mysql_query($sql) or die(mysql_error());

// how many rows we have in database
$sql2  = "SELECT COUNT(comment_id) AS numrows FROM comments";
$res2  = mysql_query($sql2) or die(mysql_error());
$row2  = mysql_fetch_array($res2);
$numrows = $row2['numrows'];

// print the random numbers
while($row = mysql_fetch_array($res))
{
    //Echo out your table contents here.

    echo $row[1].'<BR>';
    echo $row[2].'<BR>';
    echo '<BR>';
} 
```

我不知道 mysql_fetch_array 是什么，它看起来类似于 PDO::FETCH，但我无法真正理解它。

有人能给我一些关于如何将这个 MySQL_ 转换为 PDO 的提示吗？

谢谢。

这是完整的代码：

[http://pastebin.com/hg1Cd246](http://pastebin.com/hg1Cd246)

我的转换尝试：

```
// counting the offset
$sql = $pdo->prepare("SELECT * FROM comments LIMIT $offset, $rowsPerPage");
$res = $sql->execute();

// how many rows we have in database
$sql2  = $pdo->prepare("SELECT COUNT(comment_id) AS numrows FROM comments");
$res2  = $sql2->execute();
$row2  = $res2->fetchAll();
$numrows = $row2['numrows'];

// print the random numbers
while($row = $res2->fetchAll())
{
    //Echo out your table contents here.

    echo $row[1].'<BR>';
    echo $row[2].'<BR>';
    echo '<BR>';
} 
```

但收到此错误：

致命错误：在非对象上调用成员函数 fetchAll()

这一行： $row2 = $res2->fetchAll();

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:12:13.293

> 我不知道 mysql_fetch_array 是什么，它看起来类似于 PDO::FETCH

嗯，`mysql_fetch_array`是一个将结果（来自）获取到数组中的[函数。](http://php.net/manual/en/function.mysql-fetch-array.php)而是一个[常数族](http://www.php.net/manual/en/pdo.constants.php)。`mysql_query``PDO::FETCH_*`

* * *

> 有人能给我一些关于如何将这个 MySQL_ 转换为 PDO 的提示吗？

我不想显得粗鲁，但您绝对应该 RTM：您可以轻松找到[适当的文档](http://www.php.net/manual/en/book.pdo.php)和[示例](http://www.php.net/manual/en/pdo.prepared-statements.php)。

* * *

> fetchAll() 是否与 mysql_fetch_array 一样工作？

您可以查看文档[`mysql_fetch_array`](http://php.net/manual/en/function.mysql-fetch-array.php)并[`PDOStatament::fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php)自行回答。只是为了让您注意：在链接的文档页面上`mysql_fetch_array`明确说明：

> 此函数的替代方法包括：[...] PDOStatement::fetch()

* * *

> 我收到此错误：致命错误：调用非对象上的成员函数 fetchAll()

这个：

```
$res2  = $sql2->execute();
$row2  = $res2->fetchAll(); 
```

导致该错误，因为`execute()`将返回一个布尔值。要通过您检索结果，`fetchAll()`您应该在`PDOStatament`（在您的情况下`$sql2`）调用它。这是正确的代码：

```
$sql2->execute();
$row2  = $sql2->fetchAll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:18:20.857

根据您的代码，您正在使用`mysql_fetch_array`并用数据库中列的名称填充它：

```
**$row2**  = mysql_fetch_array($res2);
$numrows = **$row2['numrows']**; 
```

您可以使用`PDO::FETCH_ASSOC`这样您就可以继续使用列的名称，除此之外，您还可以使用列的数值（第一列是数字 0，第二列是 1，等等）。

我对 PDO 不是很常见，所以也请看看其他人的答案。除此之外，我强烈建议您看看可以使用哪些不同的方式从数据库中获取数据（_rows、_assoc、_array 等）。有很多东西要学:)

# java - 使用opencsv需要在写入之前清除我的文件

> ID：16037942
> 
> 赞同：1
> 
> 时间：2013-04-16T13:08:58.220
> 
> 标签：java, csv, opencsv

我的问题是我填写了一个 csv 文件，但我希望每次运行我的代码清空 csv 然后写入新数据。

每次我运行代码时，都会在 FOR 循环中从我的主体调用此方法...

```
public static void csv_output() throws Exception {
  FileWriter fw = new FileWriter("output/out.csv", true);
  //true refers to append
  PrintWriter pw = new PrintWriter(fw, false);
  //pw.flush();
  //clears the Buffer
  if (Auctionhouse.current_epoch == 1) {
    pw.print("Epoch");
    pw.print(",");
    for (int j = 0; j < Run_process.total_Agents; j++) {
      pw.print(Chromosome.chromosome.get(j).ID + "_Balance");
      pw.print(",");
    }
    for (int k = 0; k < Stockhouse.total_stocks; k++) {
      pw.print(Stockhouse.stockP.get(k).stock_Id);
      pw.print(",");
    }
  }
  pw.println();
  pw.print(Auctionhouse.current_epoch);
  pw.print(",");
  for (int i = 0; i < Run_process.total_Agents; i++) {
    String ag = Portfolio.Agent_balance.get(i) + "";
    pw.print(ag);
    pw.print(",");
  }
  for (int j = 0; j < Stockhouse.total_stocks; j++) {
    String pr = Auctionhouse.total_prices.get(Auctionhouse.current_epoch - 1).get(j) + "";
    pw.print(pr);
    pw.print(",");
  }
}
pw.flush();
pw.close();
fw.close(); 
```

冲洗不起作用。

PS：我想追加，以便我可以在每个循环中写入数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T14:04:00.523

如果要清除“output/out.csv”，只需将参数更改为`FileWriter`即可`false`。

```
FileWriter fw = new FileWriter("output/out.csv", false); 
```

正如[FileWriter 构造函数](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)的文档中所说，第二个参数指定是否要追加。在您的情况下，如果您想清除数据，您可以简单地传递`false`，它将写入文件的开头。您应该在应用程序启动时执行此代码。

**编辑：** 清除文件的内容而不删除它。如果您实现此代码，您将需要捕获`IOexception`并可能创建一个函数来执行代码，但这应该可以做到。

```
 public static void clearCsv() throws Exception {
        FileWriter fw = new FileWriter("output/out.csv", false); 
        PrintWriter pw = new PrintWriter(fw, false);
        pw.flush();
        pw.close();
        fw.close();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:48:59.027

据我了解，您希望在进入 for 循环之前拥有一个空的“output/out.csv”文件。因此，只需在程序启动时删除该文件 - 如果它存在。

```
File outFile = new File("output/out.csv");

// delete out file if it exists
if (outFile.exists()) {
    System.out.println("Old out.csv file exists. Removing...);
    outFile.delete();
} 
```

# c# - C++ API - 使用 extern "C" 返回一个对象的指针

> ID：16037945
> 
> 赞同：1
> 
> 时间：2013-04-16T13:09:07.077
> 
> 标签：c#, c++, api, pointers

我正在为 C++ 模拟框架编写 API。我想在 C# 中使用这个 API。但是我需要一个指向 C# 框架中的对象的指针，以便我可以对那个对象做一些事情。

所以我尝试了这个：

```
extern "C" ObjectClass GetObject() {
    return someOtherObject->getObject(); <-- returns an object of ObjectClass
} 
```

这根本不会建立。也许这真的是错误的方式，但不知道如何正确地做到这一点。

# php - PHP Guzzle：模拟 curl 异常/导致在测试中抛出 CurlException

> ID：16037961
> 
> 赞同：1
> 
> 时间：2013-04-16T13:09:36.367
> 
> 标签：php, guzzle

在 PHP 中使用[Guzzle HTTP 客户端库，](http://guzzlephp.org/)我可以使用[模拟插件](http://guzzlephp.org/guide/plugins.html#mock-plugin)来模拟 HTTP 响应并选择要在应用程序代码深处返回的 HTTP 响应。

尝试发送 HTTP 请求时，Guzzle 可能会抛出[CurlException 。](http://guzzlephp.org/api/class-Guzzle.Http.Exception.CurlException.html)

使用 Guzzle，我如何模拟 curl 异常，或者如何在应用程序代码中引发 CurlException？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T07:00:06.930

Guzzle 的最新添加就是这个功能：[https ://github.com/guzzle/guzzle/blob/master/src/Guzzle/Plugin/Mock/MockPlugin.php#L149](https://github.com/guzzle/guzzle/blob/master/src/Guzzle/Plugin/Mock/MockPlugin.php#L149)

只需使用 MockPlugin 和`addException()`方法来排队 CurlException 异常。

# java - 使用 google-app-engine 创建 resteasy 客户端会引发 NoClassDefFoundError

> ID：16037967
> 
> 赞同：0
> 
> 时间：2013-04-16T13:09:57.443
> 
> 标签：java, google-app-engine, resteasy

我收到 java.lang.NoClassDefFoundError: Could not initialize class org.jboss.resteasy.client.core.executors.ApacheHttpClient4Executor 在创建 Resteasy 客户端时将 Resteasy 与 google-app-engine 一起使用。

```
 import org.jboss.resteasy.client.ClientRequest;
      import org.jboss.resteasy.client.ClientResponse;

      public class Demo{
         public void testConnection()
         {
            ClientRequest request = new ClientRequest("url");
            request.accept("application/json");

            request.body("application/json", body);

            response = request.put(String.class);
         }
      } 
```

初始化 ClientRequest 类时引发异常。错误轨迹如下：

```
{java.lang.NoClassDefFoundError: Could not initialize class org.jboss.resteasy.client.core.executors.ApacheHttpClient4Executor
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance_(Runtime.java:127)    at com.google.appengine.tools.development.agent.runtime.Runtime.newInstance(Runtime.java:148)
at org.jboss.resteasy.client.ClientRequest.getDefaultExecutor(ClientRequest.java:87)
at org.jboss.resteasy.client.ClientRequest.<init>(ClientRequest.java:97)} 
```

# c++ - std:sort with & parametr c++ 的排序函数

> ID：16037969
> 
> 赞同：1
> 
> 时间：2013-04-16T13:10:01.760
> 
> 标签：c++, sorting

我想使用对我的实例的引用作为排序函数的参数。

我有`vector<CMail> log`，在课堂`CMail`上有我想要的比较的功能。

并且想要排序`log`，所以我有：

```
bool sortFunction(CMail a, CMail b){
  return (a.CompareByTimeStamp(b) < 0) ? true : false;
} 
```

进而

```
sort(log.begin(), log.end(), sortFunction); 
```

它工作正常。但是我可以像这样将函数参数作为参考吗？

```
bool sortFunction(CMail &a, CMail &b){
...
} 
```

当我这样做时，我的代码没有编译。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:15:55.340

简而言之：`const`尼斯。你需要：

```
bool sortFunction(const CMail& a, const CMail& b){
  return (a.CompareByTimeStamp(b) < 0);
} 
```

这也意味着您的签名`CompareByTimeStamp`必须是：

```
int CompareByTimeStamp(const Cmail& other) const; // (inside class Cmail {...};)
//                      ^ b is const         ^ a is const 
```

见[这里](http://en.cppreference.com/w/cpp/algorithm/sort)。这都是因为比较两个对象不应该改变它们。

# javascript - 使用 Javascript 在弯曲路径上移动对象

> ID：16037974
> 
> 赞同：1
> 
> 时间：2013-04-16T13:10:11.693
> 
> 标签：javascript, animation, curve

我试图在弯曲的路径上移动一个 div，没有任何库或 HTML5，只是纯 JavaScript。

问题是如何计算每一步的坐标（左上角）。

有人有什么主意吗？

![在此处输入图像描述](https://i.stack.imgur.com/0leBy.jpg)

# java - Java 动态验证

> ID：16037977
> 
> 赞同：2
> 
> 时间：2013-04-16T13:10:18.617
> 
> 标签：java, validation

我有一个包含一些字段（名字、姓氏、城市等）的实体对象。在一种情况下，我需要对这个对象应用一组限制（非空、长度限制、唯一等），在另一种情况下是其他一组。目前我正在使用自己的验证器，它针对不同的用例有不同的验证方法。

我可以用另一种不同的方式（标准解决方案）执行验证吗？

我将 Spring 与 Hibernate 一起使用。在 Hibernate 中实现的 JSR303 标准无法解决我的问题，因为注释只允许定义一组静态限制。我无法在运行时重新定义它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T14:07:25.930

您可以使用 Hibernate Validator 通过 ConstraintMapping 以编程方式构造约束：http: [//docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/cfg/ConstraintMapping.html](http://docs.jboss.org/hibernate/validator/4.1/api/org/hibernate/validator/cfg/ConstraintMapping.html)。可以找到文档[http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/programmaticapi.html](http://docs.jboss.org/hibernate/validator/4.1/reference/en-US/html/programmaticapi.html)

```
ConstraintMapping mapping = new ConstraintMapping();
mapping.type( Car.class )
    .property( "manufacturer", FIELD )
        .constraint( NotNullDef.class )
    .property( "licensePlate", FIELD )
        .constraint( NotNullDef.class )
        .constraint( SizeDef.class )
            .min( 2 )
            .max( 14 )
    .property( "seatCount", FIELD )
        .constraint( MinDef.class )
            .value ( 2 )
.type( RentalCar.class )
    .property( "rentalStation", METHOD)
        .constraint( NotNullDef.class );
HibernateValidatorConfiguration config = Validation.byProvider( HibernateValidator.class ).configure();
config.addMapping( mapping );
ValidatorFactory factory = config.buildValidatorFactory();
Validator validator = factory.getValidator(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:50:11.827

您可以在部署时使用类路径根目录下的[validation.xml文件重新定义 Hibernate 验证器。](http://docs.jboss.org/hibernate/validator/5.0/reference/en-US/html/validator-xmlconfiguration.html#d0e2226)如果任何一种部署只需要一种验证方案，那将起作用；您可以使用自己的 xml 文件构建每个部署。

另一方面，如果所需的验证依赖于应用程序的状态，那么您需要依赖于状态的验证器。验证组不会帮助你。您能否使用不同但相关的实体对象：

```
abstract class BaseEntity {
    private String name;
    public String getName() { return name;}
}

public class Entity1 extends BaseEntity {
    @Override
    @NotNull
    @Length(min=2, max=20)
    public String getName() { return super.getName();)
}

public class Entity2 extends BaseEntity {
    @Override
    @Length(min=2, max=10)
    public String getName() { return super.getName();)
} 
```

我已经这样做了，其中两个相关的类有一个列表。一方面，该列表至少需要两个元素。另一方面，列表可能为空，或者至少需要两个元素。

# asp.net - Div 继承父母的不透明度

> ID：16037981
> 
> 赞同：0
> 
> 时间：2013-04-16T13:10:25.320
> 
> 标签：asp.net, css, ajax

我正在尝试使用 Ajaxtoolkit 的 modalpopupextender 创建一个模式弹出窗口，它就像一个魅力。

当弹出窗口显示时，我想将页面变灰，并通过分配 popuppanel 的 modalPopup css 类来做到这一点：

```
<style type="text/css">
    .modalPopup {
        background-color: gray;
        filter: alpha(opacity=70);
        opacity: 0.7;
    }

    .modalDiv {
        background-color:white;
        height:200px;
        width:400px;
        margin-left:auto;
        margin-right:auto;
        margin-top:200px;
    }
</style> 
```

背景是灰色的，但现在我无法使弹出窗口中的控件再次变为实体。我尝试将它们放在一个 div 中，并为 div 分配另一个 css 类，在其中我将不透明度设置为 0 和 100，但这没有区别。

我的弹出面板是这样的：

```
 <asp:Panel ID="ModalPanel" runat="server" Width="100%" Height="100%" CssClass="modalPopup">
    <div class="modalDiv">
        writesomething:
        <asp:TextBox runat="server" ID="txtModalBox" /><br />

        <asp:Button Text="Ok" ID="btnModalOK" OnClick="btnModalOK_Click" runat="server" />
        <asp:Button Text="Annuller" ID="btnModalAnnuller" OnClick="btnModalAnnuller_Click" runat="server" /><br />
    </div>
</asp:Panel> 
```

所以我的问题是，我如何在具有透明背景的面板内有一个不透明的 div ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T13:12:34.023

使用时，您不能有一个比其父级更不透明的子级，`opacity`您应该使用 alpha 透明度值，[`rgba(0,0,0,0)`](http://www.w3.org/wiki/CSS/Properties/color/RGBA)以便透明度不会“继承”

唯一的缺点是[IE 9 以下](http://caniuse.com/css3-colors)`rgba()`不支持

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T14:44:54.013

如果您想在 9 之前的 IE 版本中使用 rgba，我会提供一个替代方案，但是，就我个人而言，我不喜欢过度使用它。

[http://css3pie.com/documentation/supported-css3-features/](http://css3pie.com/documentation/supported-css3-features/)

上面的链接将带您进入 CSS3 PIE 项目。在您的站点中使用它的说明非常简单，但简而言之，它允许非 CSS3 兼容的浏览器呈现某些 CSS3 功能（rgba 是这些功能之一，更不用说边框半径，这是另一个不错的功能） .

**以我的经验：** 一旦用户拉起页面，渲染功能确实需要几分之一秒（大部分时间），但对我来说，当我使用它时，这并不是一个真正的问题，因为它最终看起来就像他们的浏览器仍在加载页面，因为用户习惯于使用旧版浏览器。

希望这可以帮助那些发现自己需要 rgba 但必须与 IE8（或其他）完全兼容的人，因为我知道这正是发生在我身上的事情，而且据我所知，这是唯一可用的解决方案。

# c# - 我应该在派生的事件 args 类（即 EventArgs.Empty）中实现空对象模式吗？如果是这样 - 最好的方法是什么？

> ID：16037984
> 
> 赞同：0
> 
> 时间：2013-04-16T13:10:45.263
> 
> 标签：c#, .net, design-patterns, event-handling

System.EventArgs 实现了空对象模式的一种变体——开发人员使用 EventArgs.Empty 而不是 null 来指定“这里没什么意思”的情况，大概是为了让消费者不必处理可能的空引用异常

我正在使用派生事件 args 类声明我自己的事件，说`ContosoEventArgs` 我认为消费者能够传递类似的东西是很自然的`ContosoEventArgs.Empty`（只是`EventArgs.Empty`不起作用，因为这将尝试分配基类的实例到派生类的变量），就像他们习惯的那样。然而，这很难实现 - Empty 静态属性不依赖于我可以在派生类中设置的某些受保护属性 IsEmpty。如果是这样，我可以做类似的事情：

```
public class ContosoEventArgs : EventArgs
{
    public static ContosoEventArgs Empty
    {
        get
        {
            return new ContosoEventArgs{IsEmpty=true};
        }
    }
} 
```

又好又干净！

但是，这样的属性不存在，据我所知，测试 EventArgs 实例是否为空的唯一方法是与 EventArgs.Empty 进行比较。这意味着我现在需要实现运算符 == 重载...和运算符 !=、Equals(...) 和 GetHashCode()... 所有这些样板文件只是为了让我的专门事件参数遵循基本事件参数

我应该只允许空值吗？我认为这几乎就是他们在框架本身中所做的——MouseEventArgs 和 ImageClickEventArgs 没有显示空对象模式实现的痕迹

还是我忽略了第三种选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:11:29.407

我认为您可以在不重载相等成员的情况下使用此代码：

```
public class ContosoEventArgs : EventArgs
{
    public new static readonly ContosoEventArgs Empty = new ContosoEventArgs();
} 
```

如果您查看 EventArgs，它使用静态实例进行比较：

```
 [ComVisible(true)]
[__DynamicallyInvokable]
[Serializable]
public class EventArgs
{
    [__DynamicallyInvokable]
    public static readonly EventArgs Empty = new EventArgs();

    static EventArgs()
    {
    }
    [__DynamicallyInvokable]
    [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
    public EventArgs()
    {
    }
} 
```

# ios - 我可以在不使用 XCode 的情况下使用 AdHoc 配置文件对 iOS 应用程序进行签名吗？

> ID：16037985
> 
> 赞同：0
> 
> 时间：2013-04-16T13:10:49.863
> 
> 标签：ios, ipa

最好用Linux，Windows也行。像openssh和zip这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:45:46.147

我会使用 TeamViewer（付费版）或其他远程桌面软件来连接 tom office mac mini。否则你也会破坏签名许可证，而且很难配置钥匙串。

在您签署构建后，很难弄清楚为什么它没有安装在客户的 PC 上，因为那里没有错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T05:49:22.877

如果您可以远程 shell 进入 Mac (ssh)，那么您应该能够从命令行构建和签署您的项目。它可能需要事先进行一些设置，但是`xcodebuild`应该`xcrun`可以将您带到您需要去的地方。（这与人们为建立自动化持续集成构建所做的事情相同。）

不会让您停止使用 Xcode 或 Mac，但可能会让您不必坐在 Mac 前完成工作。

进一步阅读：

*   [Xcode 从命令行“构建和归档”](https://stackoverflow.com/questions/2664885/xcode-build-and-archive-from-command-line?rq=1)
*   [`xcodebuild`手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcodebuild.1.html)
*   [`xcrun`手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/xcrun.1.html)

# c# - 将复杂对象从 thead 传递到 UI（WPF、C#）

> ID：16037986
> 
> 赞同：0
> 
> 时间：2013-04-16T13:10:51.217
> 
> 标签：c#, wpf, multithreading, event-handling, treeview

我有一个`Thread`从第三方检索对象`API`并将它们存储在一个`TreeView`列表中`List<TreeView>`。我的意图是在`TreeView`内部`GUI`显示节点，但到目前为止我还没有成功。

由于我尝试了几乎所有类型的`Dispatcher.Invoke`东西，我认为我需要引发一个事件并以某种方式传递`List<TreeView>`对象，但我不知道如何去做。无论如何，我的目标是`TreeView`从不同于 UI 的线程更新。

提前致谢。

PS：我在`WPF .NET 4`。

我最近的尝试：

```
private void runButton_Click(object sender, RoutedEventArgs e) 
{
    if (PfUtils.isAPIConnected() && !GUIlocked) 
    {
        this.lockGUI();
        paralell_thread = new Thread(new ThreadStart(RunPowerFlowSimulation));
        paralell_thread.IsBackground = true;
        paralell_thread.Name = "RunPowerFlow";
        paralell_thread.ApartmentState = ApartmentState.STA;
        paralell_thread.Start();
        mainTabPanel.SelectedIndex = 1;
    }
}

private void RunPowerFlowSimulation() 
{
    PfUtilsUtilsExtended pf = new PfUtilsUtilsExtended();
    pf.performLoadFlow(statusLabel, pgbar1);
    TreeView tv = pf.gerRelevantObjects(PfUtils.GetActiveProject(), statusLabel, pgbar1);
    tv.Dispatcher.Invoke(new Action(() => { objectTreeView.ItemsSource = tv.Items; }));

    this.UnLockGUI();
} 
```

# javascript - Windows 商店应用程序 - 打印特定的 div

> ID：16037987
> 
> 赞同：1
> 
> 时间：2013-04-16T13:10:55.110
> 
> 标签：javascript, printing, windows-store-apps

我想知道，是否可以在 Windows 商店应用程序中打印特定的 div？我创建了调用打印功能的 appbar 打印按钮，可以打印整个“页面”（[msdn 示例](http://code.msdn.microsoft.com/windowsapps/Print-Sample-c544cce6)）。但我必须打印特定的可见 div。在 Windows 商店应用程序中可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:41:33.133

我的 div 的格式不如屏幕上的那么好，但它确实包含数据：

```
 onPrintTaskRequested: function (printEvent) {
    var printTask = printEvent.request.createPrintTask("Print Sample", function (args) {
        var docHtml = document.createDocumentFragment();
        docHtml.appendChild(document.getElementById("divToPrint"));
        args.setSource(MSApp.getHtmlPrintDocumentSource(docHtml));
    });
}, 
```

# sql - 如何为 Windows Authenticated 用户设置默认数据库？

> ID：16037990
> 
> 赞同：3
> 
> 时间：2013-04-16T13:11:06.227
> 
> 标签：sql, sql-server, ssms

当我用windows身份验证登录sql数据库时，我想将一个特定的数据库设置为默认数据库。我不希望主人成为默认值。

我知道您可以为 sql 用户执行此操作，但是对于经过 Windows 身份验证的用户可以吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T13:17:36.233

[`ALTER LOGIN`该语句](http://msdn.microsoft.com/en-us/library/ms189828.aspx)的大多数选项对于SQL 身份验证登录和 Windows 身份验证登录是相同的。

```
ALTER LOGIN [Domain\Username] WITH DEFAULT_DATABASE = database_name; 
```

您也可以通过 UI 执行此操作，但恕我直言，它的工作量更大，并且您不能将击键和鼠标单击存储在源代码管理中。在对象资源管理器中，展开您的服务器，展开安全性，展开登录名，右键单击您的登录名，选择属性。在底部的主屏幕上有一个`Default Database:`下拉菜单。更改它并单击确定。

# css - 如何使用 CSS 使列独立滚动？

> ID：16037993
> 
> 赞同：0
> 
> 时间：2013-04-16T13:11:08.253
> 
> 标签：css

这是我在这里的第一篇文章（我对这一切都很陌生），但我希望我问得正确。

我正在为我的硕士论文创建一个网页，我需要三个平行的文本列，它们将相互独立滚动，就像[这个模板一样](http://www.cssplay.co.uk/layouts/body5.html)

我似乎无法从此模板中获取 CSS 以在我的网站上工作，我想知道我做错了什么，或者是否有更好的方法来实现这种效果。

非常感谢你的帮助！

这是[我网站的 CSS](http://capstone.bethanybradshaw.com)

```
 body {
    padding:0;          
    width:100%;
    height: 100%;
    max-height: 100%;
    overflow; hidden;
    margin: 0;
    border: 0;
    background:#FFFFFF;     
    }

#title { 

    margin-bottom: 5px;
    background: #fff;
    width:100%
    z-index: 20;
    width: 100%;
    padding-top: 30px;
    }

#title h1 {

    font-family: Sorts Mill Goudy, Garamound, serif;
    font-size: 50px;
    text-align: center;
    font-weight: 100;
    color: 696969;
    line-height: 1px;
    letter-spacing: 10px;
    margin-top: 20px;   
    }

#title h2 {
    font-size: 16px;
    font-family: Sorts Mill Goudy, serif;
    text-align: center;
    font-weight: 100;
    color: #999;
    line-height: 20px;
    letter-spacing: 0px;
    }

#title ul {text-align:center; 
    padding-left, padding-right: 10px;
    padding-top: 30px;
    }

#title ul li {
    display:inline;
    font-family: "gill sans mt", "sans-serif";
    text-align: center;
    list-style:none;
    margin-left:0px;
    padding-left: 30px;
    padding-right: 30px;
    }

#title p{
    font-family: Sorts Mill Goudy Italic, Garamound, serif;
    size: 14px;
    font-weight: 300;
    background: #eee;
    padding: 10px;
    margin-left: 80px;
    margin-right: 80px;
    margin-top: 20px;
    margin-bottom: 15px;
    text-decoration: none;
    color: #000;
    }

#title a {
    color:#000;
    text-decoration: none;
    text-decoration: underline;
    }

#title a:hover {
    color: #A9A9A9;
    text-decoration: underline;
    }

/*  column settings */

#allcol {
    position: relative;
    }

#allcol h4{
    text-align: center;
    }

#col1 {
        font-family: Sorts Mill Goudy, Garamound, serif;
        text-align: left;
        float:left;
        background:#DCDCDC;
        padding-bottom:10px;
        padding-top: 10px;
        padding-left:1.5%;
        padding-right:1.5%;
        margin-left: 0px;
        width:30%;
        overflow: scroll;
        }

#col2 {     font-family: Sorts Mill Goudy, Garamound, serif;
        text-align: left;
        background: #fff;
        float:left;
        padding-bottom:10px;
        padding-top: 10px;
        padding-left:1.5%;
        padding-right:1.5%;
        width:30%;
        overflow: scroll;
        }

#col3 { font-family: Sorts Mill Goudy, Garamound, serif;
        text-align: left;
        float:left;
        background:#DCDCDC;
        padding-left:1.5%;
        padding-right:1.5%;
        padding-bottom:10px;
        padding-top: 10px;
        width:30%;
        overflow: scroll;
        }

#footer {
    clear:both;
    float:left;
    width:100%;
    border-top:1px solid #000;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:19:29.413

[http://jsfiddle.net/78PrJ/](http://jsfiddle.net/78PrJ/)

这是一个工作示例。如前所述，您必须设置`div height`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:16:15.040

添加这个 CSS：`#col1, #col2, #col3{ height: 500px; }`你已经在使用`overflow: scroll`，所以滚动条会出现，

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-16T13:16:20.550

`overflow:scroll`仅当在 中指定高度时才有效`px`。如果您指定高度，`%age`它将不起作用。

# cucumber-jvm - 是否可以在运行时跳过 Cucumber-JVM 的场景

> ID：16037999
> 
> 赞同：9
> 
> 时间：2013-04-16T13:11:22.987
> 
> 标签：cucumber-jvm

我想在场景中添加标签@skiponchrome，这应该在使用 Chrome 浏览器运行 Selenium 测试时跳过该场景。这样做的原因是因为某些场景在某些环境中工作而不在其他环境中工作，这甚至可能不是特定于浏览器测试的，并且可以应用于其他情况，例如操作系统平台。

示例钩子：

```
@Before("@skiponchrome") // this works
public void beforeScenario() {
  if(currentBrowser == 'chrome') { // this works
    // Skip scenario code here
  }
} 
```

我知道可以在黄瓜标签中定义 ~@skiponchrome 来跳过标签，但我想在运行时跳过标签。这样，当我在某个环境中开始测试运行时，我不必提前考虑要跳过哪些步骤。

我想创建一个钩子来捕获标签并跳过场景而不报告失败/错误。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-12-09T16:56:16.790

我意识到这是对已经回答的问题的最新更新，但我想添加一个由 cucumber-jvm直接[支持的选项：](https://github.com/cucumber/cucumber-jvm/pull/363)

```
@Before //(cucumber one)
public void setup(){
    Assume.assumeTrue(weAreInPreProductionEnvironment);
} 
```

`weAreInPreProductionEnvironment`“如果为假，该场景将被标记为忽​​略（但测试将通过） 。”

您将需要添加

```
import org.junit.Assume; 
```

与已接受答案的主要区别在于[JUnit 假设失败的行为就像挂起](https://github.com/cucumber/cucumber-jvm/commit/bc215fee21ea92739688f65ce49fff1b21847ff7)

**重要**由于一个[错误修复](https://github.com/cucumber/cucumber-jvm/pull/961)，您将需要 cucumber-jvm 版本 1.2.5，在撰写本文时它是最新的。例如，上面会在 cucumber-java8-1.2.3.jar 中生成失败而不是挂起

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T18:49:26.397

我真的更喜欢通过为每个环境定义单独的运行配置来明确正在运行哪些测试。我还喜欢将我使用的标签数量保持在最低限度，以保持配置数量易于管理。

我认为仅使用标签不可能实现您想要的。您需要编写一个自定义的 jUnit 测试运行程序来代替 @RunWith(Cucumber.class)。看看 Cucumber 的实现，看看事情是如何工作的。您需要根据浏览器或其他运行时条件更改 RuntimeOptionsFactory 创建的 RuntimeOptions 以包含/排除标签。

或者，您可以考虑编写一个调用您的测试套件的小脚本，根据您运行的环境构建一个动态包含/排除的标签列表。我认为这是一个更易于维护、更清洁的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-11-20T19:20:01.687

这真的很容易。如果您深入研究 Cucumber-JVM 和 JUnit 4 源代码，您会发现 JUnit 使得在运行时跳过非常容易（只是未记录）。

查看以下 JUnit 4 的源代码`ParentRunner`，其中 Cucumber-JVM 的`FeatureRunner`（`Cucumber`在默认 Cucumber 运行器中使用）：

```
@Override
public void run(final RunNotifier notifier) {
    EachTestNotifier testNotifier = new EachTestNotifier(notifier,
            getDescription());
    try {
        Statement statement = classBlock(notifier);
        statement.evaluate();
    } catch (AssumptionViolatedException e) {
        testNotifier.fireTestIgnored();
    } catch (StoppedByUserException e) {
        throw e;
    } catch (Throwable e) {
        testNotifier.addFailure(e);
    }
} 
```

这就是 JUnit 决定显示什么结果的方式。如果成功，它将显示通过，但`@Ignore`在 JUnit 中是可能的，那么在这种情况下会发生什么？好吧， an是由（或在本例中为Cucumber ）`AssumptionViolatedException`抛出的。`RunNotifier``FeatureRunner`

所以你的例子变成：

```
@Before("@skiponchrome") // this works
public void beforeScenario() {
  if(currentBrowser == 'chrome') { // this works
    throw new AssumptionViolatedException("Not supported on Chrome")
  }
} 
```

如果您以前使用过 vanilla JUnit 4，您会记得`@Ignore`当运行程序忽略测试时会显示一条可选消息。`AssumptionViolatedException`携带消息，因此您应该在以这种方式跳过测试后在测试输出中看到它，而无需编写自己的自定义运行程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-30T11:32:12.130

我也遇到了同样的挑战，我需要根据我在运行时从应用程序动态获取的标志跳过运行场景，该标志告诉应用程序是否启用了要测试的功能。

所以这就是我在场景文件中编写逻辑的方式，每个步骤都有胶水代码。

我使用了一个独特的标签“@Feature-01AXX”来标记我的场景，这些场景只有在应用程序上提供该功能（代码）时才需要运行。

因此，对于每个场景，首先检查标签“@Feature-01XX”，如果它存在，则检查该功能的可用性，然后才会选择运行该场景。否则它只会被跳过，Junit 不会将其标记为失败，而是将其标记为通过。因此，如果这些测试由于该功能不可用而未运行，最终结果将通过，这很酷......

```
@Before
public void before(final Scenario scenario) throws Exception {
    /*
        my other pre-setup tasks for each scenario.
    */

    // get all the scenario tags from the scenario head.
    final ArrayList<String> scenarioTags = new ArrayList<>();
    scenarioTags.addAll(scenario.getSourceTagNames());

    // check if the feature is enabled on the appliance, so that the tests can be run.
    if (checkForSkipScenario(scenarioTags)) {
        throw new AssumptionViolatedException("The feature 'Feature-01AXX' is not enabled on this appliance, so skipping");
    }
}

private boolean checkForSkipScenario(final ArrayList<String> scenarioTags) {
    // I use a tag "@Feature-01AXX" on the scenarios which needs to be run when the feature is enabled on the appliance/application
    if (scenarioTags.contains("@Feature-01AXX") && !isTheFeatureEnabled()) { // if feature is not enabled, then we need to skip the scenario.
        return true;
    }
    return false;
}

private boolean isTheFeatureEnabled(){
    /*
        my logic to check if the feature is available/enabled on the application.
        in my case its an REST api call, I parse the JSON and check if the feature is enabled.
        if it is enabled return 'true', else return 'false'
    */
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-05T22:47:46.833

我已经实现了一个定制的junit runner，如下所示。这个想法是在运行时添加标签。

所以说对于我们需要新用户的场景，我们将场景标记为“@requires_new_user”。然后，如果我们在一个环境中运行我们的测试（比如不允许您轻松注册新用户的生产环境），那么我们会发现我们无法获得新用户。然后将 ""not @requires_new_user" 添加到黄瓜选项以跳过该场景。

这是我现在能想象的最干净的解决方案。

```
public class WebuiCucumberRunner extends ParentRunner<FeatureRunner> {
    private final JUnitReporter jUnitReporter;
    private final List<FeatureRunner> children = new ArrayList<FeatureRunner>();
    private final Runtime runtime;
    private final Formatter formatter;

    /**
     * Constructor called by JUnit.
     *
     * @param clazz the class with the @RunWith annotation.
     * @throws java.io.IOException                         if there is a problem
     * @throws org.junit.runners.model.InitializationError if there is another problem
     */
    public WebuiCucumberRunner(Class clazz) throws InitializationError, IOException {
        super(clazz);
        ClassLoader classLoader = clazz.getClassLoader();
        Assertions.assertNoCucumberAnnotatedMethods(clazz);

        RuntimeOptionsFactory runtimeOptionsFactory = new RuntimeOptionsFactory(clazz);
        RuntimeOptions runtimeOptions = runtimeOptionsFactory.create();

        addTagFiltersAsPerTestRuntimeEnvironment(runtimeOptions);

        ResourceLoader resourceLoader = new MultiLoader(classLoader);
        runtime = createRuntime(resourceLoader, classLoader, runtimeOptions);
        formatter = runtimeOptions.formatter(classLoader);
        final JUnitOptions junitOptions = new JUnitOptions(runtimeOptions.getJunitOptions());
        final List<CucumberFeature> cucumberFeatures = runtimeOptions.cucumberFeatures(resourceLoader, runtime.getEventBus());
        jUnitReporter = new JUnitReporter(runtime.getEventBus(), runtimeOptions.isStrict(), junitOptions);
        addChildren(cucumberFeatures);
    }

    private void addTagFiltersAsPerTestRuntimeEnvironment(RuntimeOptions runtimeOptions) 
    {
        String channel = Configuration.TENANT_NAME.getValue().toLowerCase();
        runtimeOptions.getTagFilters().add("@" + channel);

        if (!TestEnvironment.getEnvironment().isNewUserAvailable()) {
            runtimeOptions.getTagFilters().add("not @requires_new_user");
        }

    }
...
} 
```

或者您可以扩展官方 Cucumber Junit 测试运行程序 cucumber.api.junit.Cucumber 和覆盖方法

```
 /**
     * Create the Runtime. Can be overridden to customize the runtime or backend.
     *
     * @param resourceLoader used to load resources
     * @param classLoader    used to load classes
     * @param runtimeOptions configuration
     * @return a new runtime
     * @throws InitializationError if a JUnit error occurred
     * @throws IOException         if a class or resource could not be loaded
     * @deprecated Neither the runtime nor the backend or any of the classes involved in their construction are part of
     * the public API. As such they should not be  exposed. The recommended way to observe the cucumber process is to
     * listen to events by using a plugin. For example the JSONFormatter.
     */
    @Deprecated
    protected Runtime createRuntime(ResourceLoader resourceLoader, ClassLoader classLoader,
                                    RuntimeOptions runtimeOptions) throws InitializationError, IOException {
        ClassFinder classFinder = new ResourceLoaderClassFinder(resourceLoader, classLoader);
        return new Runtime(resourceLoader, classFinder, classLoader, runtimeOptions);
    } 
```

您可以根据需要在此处操作 runtimeOptions。但是该方法被标记为已弃用，因此请谨慎使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-16T21:25:55.180

如果您使用的是 Maven，您可以阅读使用浏览器配置文件，然后在那里设置适当的 ~ exclude 标签？

除非您询问如何从命令行运行它，在这种情况下，您使用 @skipchrome 标记场景，然后在运行 cucumber 时将 cucumber 选项设置为 tags = {"~@skipchrome"}

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-20T14:22:48.890

如果您只想暂时跳过一个场景（例如，在编写场景时），您可以将其注释掉（在 Eclipse 或 Intellij 中是`ctrl`+ ）。`/`