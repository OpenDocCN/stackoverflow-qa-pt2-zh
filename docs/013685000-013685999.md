# StackOverflow 问答 13685000-13685999

# actionscript-3 - 抖动效果 - Flash CS6 ActionScript3.0

> ID：13685003
> 
> 赞同：7
> 
> 时间：2012-12-03T14:10:34.147
> 
> 标签：actionscript-3, flash-cs6

这个问题与 ActionScript 3.0 和 Flash CS6 有关

我试图让一个物体在几秒钟内稍微摇晃几秒钟。我把它做成了一个“movieclip”并制作了这个代码：

```
import flash.events.TimerEvent;

var Machine_mc:Array = new Array();

var fl_machineshaking:Timer = new Timer(1000, 10);
fl_machineshaking.addEventListener (TimerEvent.TIMER, fl_shakemachine);
fl_machineshaking.start ();

function fl_shakemachine (event:TimerEvent):void {

 for (var i = 0; i < 20; i++) {

  Machine.x += Math.random() * 6 - 4;
  Machine.y += Math.random() * 6 - 4;
 }

} 
```

在测试这部电影时，我遇到了多个错误，看起来与此一模一样：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at Historieoppgave_fla::MainTimeline/fl_shakemachine()
    at flash.utils::Timer/_timerDispatch()
    at flash.utils::Timer/tick() 
```

此外，该对象不会摇晃，但它会在每个滴答声中稳定地向上向左移动一点。

重点：我想知道在对象不再在舞台/场景中之后如何停止脚本，以及如何让它摇晃，因为我看不出我的脚本有什么问题，请帮忙，谢谢^_^

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:37:54.573

AStupidNube 提出了关于原始立场的重要观点。因此，将其添加到摇晃应该是一个来回运动，所以不要依赖可能会或可能不会得到你想要的东西的随机值。随着时间的推移，摇晃也会产生抑制作用，所以试试这样的方法：

**链接到工作代码**

• [http://wonderfl.net/c/eB1E](http://wonderfl.net/c/eB1E) - 基于 Event.ENTER_FRAME

• [http://wonderfl.net/c/hJJl](http://wonderfl.net/c/hJJl) - 基于定时器

• [http://wonderfl.net/c/chYC](http://wonderfl.net/c/chYC) - Event.ENTER_FRAME 基于额外的随机性

**1 到 20 个摇晃项目基于计时器的代码 - ENTER_FRAME 代码请参见上面的链接••</p>

```
package {
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.events.TimerEvent;
import flash.geom.Point;
import flash.text.TextField;
import flash.utils.Timer;

public class testing extends Sprite {

    private var shakeButton:Sprite;
    private var graphic:Sprite;
    private var shakerPos:Array;
    private var shakers:Array;
    private var numShakers:int = 20;
    private var dir:int = 1;
    private var displacement:Number = 10;
    private var shakeTimer:Timer;

    public function testing() {
        this.shakers = new Array();
        this.shakerPos = new Array();
        this.addEventListener(Event.ADDED_TO_STAGE, this.init);
    }
    private function init(e:Event):void {
        this.stage.frameRate = 30;
        this.shakeTimer = new Timer(33, 20);
        this.shakeTimer.addEventListener(TimerEvent.TIMER, this.shake);
        this.graphics.beginFill(0x333333);
        this.graphics.drawRect(0,0,this.stage.stageWidth, this.stage.stageHeight);
        this.graphics.endFill();

        this.createShakers();

        this.shakeButton = this.createSpriteButton("Shake ");
        this.addChild(this.shakeButton);
        this.shakeButton.x = 10;
        this.shakeButton.y = 10;
        this.shakeButton.addEventListener(MouseEvent.CLICK, this.shakeCallback);
    }
    private function createSpriteButton(btnName:String):Sprite {
        var sBtn:Sprite = new Sprite();
        sBtn.name = btnName;
        sBtn.graphics.beginFill(0xFFFFFF);
        sBtn.graphics.drawRoundRect(0,0,80,20,5);
        var sBtnTF:TextField = new TextField();
        sBtn.addChild(sBtnTF);
        sBtnTF.text = btnName;
        sBtnTF.x = 5;
        sBtnTF.y = 3;
        sBtnTF.selectable = false;
        sBtn.alpha = .5;
        sBtn.addEventListener(MouseEvent.MOUSE_OVER, function(e:Event):void { sBtn.alpha = 1 });
        sBtn.addEventListener(MouseEvent.MOUSE_OUT, function(e:Event):void { sBtn.alpha = .5 });
        return sBtn;
    }
    private function createShakers():void {
        var graphic:Sprite;

        for(var i:int = 0;i < this.numShakers;i++) {
            graphic = new Sprite();
            this.addChild(graphic);
            graphic.graphics.beginFill(0xFFFFFF);
            graphic.graphics.drawRect(0,0,10,10);
            graphic.graphics.endFill();
            // add a 30 pixel margin for the graphic
            graphic.x = (this.stage.stageWidth-60)*Math.random()+30;
            graphic.y = (this.stage.stageWidth-60)*Math.random()+30;
            this.shakers[i] = graphic;
            this.shakerPos[i] = new Point(graphic.x, graphic.y);
        }
    }
    private function shakeCallback(e:Event):void {
        this.shakeTimer.reset();
        this.shakeTimer.start();
    }
    private function shake(e:TimerEvent):void {
        this.dir *= -1;
        var dampening:Number = (20 - e.target.currentCount)/20;
        for(var i:int = 0;i < this.numShakers;i++) {
            this.shakers[i].x = this.shakerPos[i].x + Math.random()*10*dir*dampening;
            this.shakers[i].y = this.shakerPos[i].y + Math.random()*10*dir*dampening;
        }
    }
} 
```

}

现在这是一个线性阻尼，您可以通过平方或立方值来调整您认为合适的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:29:49.097

您必须记住原始起始位置并从该点计算抖动效果。这是我为 MovieClips 制作的抖动效果。它动态地向其中添加 3 个变量（startPosition、shakeTime、maxShakeAmount）。如果您使用类，您会将它们添加到您的剪辑中。

```
import flash.display.MovieClip;
import flash.geom.Point;

function shake(mc:MovieClip, frames:int = 10, maxShakeAmount:int = 30) : void 
{
    if (!mc._shakeTime || mc._shakeTime <= 0)
    {
        mc.startPosition = new Point(mc.x, mc.y);
        mc._shakeTime = frames;
        mc._maxShakeAmount = maxShakeAmount;
        mc.addEventListener(Event.ENTER_FRAME, handleShakeEnterFrame);
    }
    else
    {
        mc.startPosition = new Point(mc.x, mc.y);
        mc._shakeTime += frames;
        mc._maxShakeAmount = maxShakeAmount;
    }
}

function handleShakeEnterFrame(event:Event):void
{
    var mc:MovieClip = MovieClip(event.currentTarget);
    var shakeAmount:Number = Math.min(mc._maxShakeAmount, mc._shakeTime);
    mc.x = mc.startPosition.x + (-shakeAmount / 2 + Math.random() * shakeAmount);
    mc.y = mc.startPosition.y + (-shakeAmount / 2 + Math.random() * shakeAmount);

    mc._shakeTime--;

    if (mc._shakeTime <= 0)
    {
        mc._shakeTime = 0;
        mc.removeEventListener(Event.ENTER_FRAME, handleShakeEnterFrame);
    }
} 
```

你可以像这样使用它：

```
// shake for 100 frames, with max distance of 15px
this.shake(myMc, 100, 15); 
```

顺便说一句：在 Flash 中，您应该在“*发布设置”中启用“**允许调试”*以获得更详细的错误。这也会返回代码中断的行号。

 ** * *

**更新：**
现在编码时间/最大距离分开。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T00:26:05.497

这是所选答案的分叉版本，但更灵活一点，因为它还允许您设置频率。它还基于时间而不是帧，因此您可以在设置持续时间和间隔时考虑时间（毫秒）而不是帧。

用法类似于选择的答案：

摇（clipToShake，durationInMilliseconds，frequencyInMilliseconds，maxShakeRange）；

这只是我使用 TimerEvent 而不是 ENTER_FRAME 的意思的一个例子。它也不需要向您正在摇动的 MovieClip 添加动态变量来跟踪时间、摇动量和起始位置。

```
 public function shake(shakeClip:MovieClip, duration:Number = 3000, frequency:Number = 30, distance:Number = 30):void
    {
        var shakes:int = duration / frequency;
        var shakeTimer:Timer = new Timer(frequency, shakes);
        var startX:Number = shakeClip.x;
        var startY:Number = shakeClip.y;

        var shakeUpdate:Function = function(e:TimerEvent):void
            {
                shakeClip.x = startX + ( -distance / 2 + Math.random() * distance);
                shakeClip.y = startY + ( -distance / 2 + Math.random() * distance); 
            }

        var shakeComplete:Function = function(e:TimerEvent):void
            {
                shakeClip.x = startX;
                shakeClip.y = startY;
                e.target.removeEventListener(TimerEvent.TIMER, shakeUpdate);
                e.target.removeEventListener(TimerEvent.TIMER_COMPLETE, shakeComplete);
            }

        shakeTimer.addEventListener(TimerEvent.TIMER, shakeUpdate);
        shakeTimer.addEventListener(TimerEvent.TIMER_COMPLETE, shakeComplete);

        shakeTimer.start();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:27:43.637

-4 <= `Math.random() * 6 - 4`< 2

您将此偏移量添加到 Machine.x 20 次，因此向左移动的机会大于向右移动的机会。

看来您正在寻找这样的东西：

```
for each (var currentMachine:MovieClip in Machine_mc)
{
     currentMachine.x += Math.random() * 6 - 3;
     currentMachine.y += Math.random() * 6 - 3;
} 
```*

# c - Mac OS X x86-64 中指令指针的寻址

> ID：13685009
> 
> 赞同：0
> 
> 时间：2012-12-03T14:10:49.607
> 
> 标签：c, macos, assembly, osx-mountain-lion

我想了解更多关于汇编的知识并写了一个小例子：

```
#include <stdio.h>
#include <math.h>

void f() {
  unsigned char i[4];
  i[0] = 5;
  i[1] = 6;
  i[2] = 7;
  i[3] = 8;
  int j = 0;
  for(j=0; j < 20; j++)
    printf("%02X\n", i[j]);

}

int main() {
  int i[5];
  i[0] = 3;
  i[1] = 3;
  i[2] = 3;
  i[3] = 3;
  i[4] = 3;
  f();
  return 0;
} 
```

我的目标是查看指令指针的实际返回地址，当它启动 f() 时，它由 main() 中的 callq 调用确定。

我使用 gdb 反汇编 main() 并得到以下内容

```
 Dump of assembler code for function main:
 0x0000000100000eb0 <main+0>:   push   %rbp
 0x0000000100000eb1 <main+1>:   mov    %rsp,%rbp
 0x0000000100000eb4 <main+4>:   sub    $0x20,%rsp
 0x0000000100000eb8 <main+8>:   movl   $0x3,-0x1c(%rbp)
 0x0000000100000ebf <main+15>:  movl   $0x3,-0x18(%rbp)
 0x0000000100000ec6 <main+22>:  movl   $0x3,-0x14(%rbp)
 0x0000000100000ecd <main+29>:  movl   $0x3,-0x10(%rbp)
 0x0000000100000ed4 <main+36>:  movl   $0x3,-0xc(%rbp)
 0x0000000100000edb <main+43>:  callq  0x100000e40 <f>
 0x0000000100000ee0 <main+48>:  movl   $0x0,-0x8(%rbp)
 0x0000000100000ee7 <main+55>:  mov    -0x8(%rbp),%eax
 0x0000000100000eea <main+58>:  mov    %eax,-0x4(%rbp)
 0x0000000100000eed <main+61>:  mov    -0x4(%rbp),%eax
 0x0000000100000ef0 <main+64>:  add    $0x20,%rsp
 0x0000000100000ef4 <main+68>:  pop    %rbp
 0x0000000100000ef5 <main+69>:  retq 
```

所以我期待找到规定的指令指针返回地址为0x0000000100000ee0，因为这是callq之后的下一条指令。当我运行我的程序时，我得到（我将它们分成 4 组，以便您更好地阅读它们）：

```
05
06
07
08

40
1B
08
56

FF
7F
00
00

E0
EE
B7
09

01
00
00
00

00
00
00
00

03
00
00
00

03
00
00
00

03
00
00
00

03
00
00
00 
```

好的，所以我可以看到我在 f() 中写入局部变量的 5,6,7,8 并且可以看到 main() 的局部变量那些 4 字节整数，它们已设置为 3。之后5,6,7,8（这是一个 64 位系统）我希望接下来的 8 个字节编码 %rbp 寄存器的先前值，然后接下来的 8 个字节包含指令指针的返回地址。所以返回地址应该是

```
E0
EE
B7
09

01
00
00
00 
```

现在，当我将它与我期望从 gdb 得到的 0x0000000100000ee0 进行比较时，我可以在最后 4 个字节中看到 00000001，并且我可以在第一个字节中看到来自 00000ee0 的 e0。但是为什么我没有得到我所期望的呢？我考虑过字节顺序（我相信 Mac OS X 是小端），但这并不能解释我在这里看到的内容，从我的理解来看。

欢迎任何意见，

谢谢你们，

克里斯托夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:29:01.670

试试这个程序并多次运行它。

```
#include <stdio.h>

int
main(int argc, char **argv)
{
    int foo;

    printf("%p %p\n", main, &foo);
    return 0;
} 
```

我很确定你每次都会得到不同的地址。MacOS 具有与位置无关的二进制文件，并且堆栈也一直在更改位置。这是一项安全功能。

如果你在 gdb 中运行你的程序，你可能会得到你期望的结果，因为 gdb 禁用了随机化以使调试更容易。

# php - 有谁知道我如何检查 href 是否等于 smarty 中的当前页面链接？

> ID：13685011
> 
> 赞同：2
> 
> 时间：2012-12-03T14:10:54.550
> 
> 标签：php, javascript, jquery, html, smarty

有谁知道我如何检查 href 是否等于 smarty 中的当前页面链接？我想将一个“活动”类添加到菜单中的链接。我的代码是这样的

```
<div id="navigation-menu">
        <a href="index.php" class="active">Home</a>
    <a href="index.php?page=how_it_works">How it Works</a>
    <a href="index.php?page=prices">Prices</a>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:16:29.830

认为您可以执行以下操作：

```
<div id="navigation-menu">
    <a href="index.php"{if $smarty.get.page eq ''} class="active"{/if}>Home</a>
    <a href="index.php?page=how_it_works"{if $smarty.get.page eq 'how_it_works'} class="active"{/if}>How it Works</a>
    <a href="index.php?page=prices"{if $smarty.get.page eq 'prices'} class="active"{/if}>Prices</a>
</div> 
```

但不确定，不知道smarty。

# mysql - 我想在mysql中提取一个url的参数

> ID：13685017
> 
> 赞同：1
> 
> 时间：2012-12-03T14:11:05.787
> 
> 标签：mysql

我的数据库中有一个带有 url 参数值的列。我想用 sql 查询将这些参数放在不同的列中。我举个例子：

我现在有一个名为参数的列，例如这个值：`pOrgNum=j11000&pLanguage=nl&source=homepage`

现在我想要三列：`pOrgnum | pLanguage | source`我的参数值。

问题是我不知道我的参数的顺序或它的长度，所以我不能使用例如`substring(parameters,9,6)`来提取参数`pOrgnum`。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-07-23T18:21:51.700

您可以使用 MySQL UDF 来完成此操作，它还可以处理参数解码并处理大多数字符编码等。

[https://github.com/StirlingMarketingGroup/mysql-get-url-param](https://github.com/StirlingMarketingGroup/mysql-get-url-param)

例子

```
select`get_url_param`('https://www.youtube.com/watch?v=KDszSrddGBc','v');
-- "KDszSrddGBc"

select`get_url_param`('watch?v=KDszSrddGBc','v');
-- "KDszSrddGBc"

select`get_url_param`('watch?v=KDszSrddGBc','x');
-- null

select`get_url_param`('https://www.google.com/search?q=cgo+uint32+to+pointer&rlz=1C1CHBF_enUS767US767&oq=cgo+uint32+to+pointer&aqs=chrome..69i57.12106j0j7&sourceid=chrome&ie=UTF-8','q');
-- "cgo uint32 to pointer"

select`get_url_param`('/search?q=Na%C3%AFvet%C3%A9&oq=Na%C3%AFvet%C3%A9','q');
-- "Naïveté" 
```

[免责声明，我是作者。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-21T16:17:03.927

我通过在搜索参数之后取字符串的*右边*，然后在第一个 & 之前取结果字符串的*左边来实现这一点。*

这处理

*   如果参数是 url 中的最后一个参数（所以后面没有“&”）
*   如果参数不存在（返回空白）
*   不同长度的搜索字符串（前提是您在任何地方都替换了“utm_medium”）

这会在名为 url 的参数中找到“utm_medium”的值：

```
IF(locate("utm_medium", url)=0, '', LEFT(RIGHT(url,length(url)-locate("utm_medium",url)-length("utm_medium")),IF(locate("&",RIGHT(url,length(url)-locate("utm_medium",url)-length("utm_medium")))=0,length(RIGHT(url,length(url)-locate("utm_medium",url)-length("utm_medium")+1)),locate("&",RIGHT(url,length(url)-locate("utm_medium",url)-length("utm_medium"))))-1)) utm_medium 
```

要使用，请使用您的字段名称查找并替换*url*，并使用您的 url 参数替换 utm_medium。

*可能效率低下，但可以完成工作，并且在其他地方找不到简单的答案*

# sql - 显示前 30 天总计的字段

> ID：13685018
> 
> 赞同：0
> 
> 时间：2012-12-03T14:11:09.340
> 
> 标签：sql, sql-server, sql-server-2008-r2

我有这张桌子：

```
CREATE TABLE #Data1 
    (
    [Market] VARCHAR(100) NOT NULL, 
    [Operator] VARCHAR(100) NOT NULL,                                                                   
    [Date] DATETIME NOT NULL,   
    [Measure] VARCHAR(100) NOT NULL, 
    [Amount] NUMERIC(36,10)  NOT NULL, 
                --new calculated fields 
    [DailyAvg_30days] NUMERIC(38,6) NULL    DEFAULT 0                                   
    ) 
```

我已经填充了除`DailyAvg_30days`.
此字段需要显示前 30 天的总计，例如
1\. 如果`Date`特定记录是 12 月 2 日，那么它将是 11 月 3 日至 12 月 2 日期间的总计。
2\. 如果`Date`某个特定记录是 12 月 1 日，那么它将是 11 月 2 日至 12 月 1 日期间的总数。

我在更新表格之前尝试查找这些总数的尝试如下：

```
SELECT 
    a.[Market],
    a.[Operator],
    a.[Date],
    a.[Measure],
    a.[Amount],
    [DailyAvg_30days] = SUM(b.[Amount])
FROM 
    #Data1 a
    INNER JOIN #Data1 b
        ON 
        a.[Market] = b.[Market] AND
        a.[Operator] = b.[Operator] AND
        a.[Measure] = b.[Measure]   AND
        a.[Date] > b.[Date]-30 AND
        a.[Date] <= b.[Date]
GROUP BY
    a.[Market],
    a.[Operator],
    a.[Date],
    a.[Measure],
    a.[Amount]
ORDER BY 1,2,4,3 
```

这是一种有效的方法还是我需要从不同的角度来解决这个问题？

* * *

**编辑**

逻辑上有一个缺陷。我的同事 Jagoda 首先得到了答案，然后是 Gordon Linoff，他提出了一种我觉得更容易阅读的语法：

```
FROM 
    #DataCas a
    INNER JOIN #DataCas b
        ON 
        a.[Market] = b.[Market] AND
        a.[Operator] = b.[Operator] AND
        a.[Measure] = b.[Measure]   AND
        b.[Date]  BETWEEN a.[Date]-29 AND a.[Date] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:18:45.893

您应该查找a.date*之前的日期，而不是之后的日期。*所以：

```
 a.[Date] >= b.[Date]-30 AND
    a.[Date] <= b.[Date] 
```

应该：

```
b.[date] >= a.[date] - 30 and
b.[date] <= a.[date] 
```

或者，更清楚地说：

```
b.[date] between a.[date] - 30 and a.[date] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:02:33.453

请注意，您使用的是 DATETIME 字段。因此，如果您想要一整天，您首先需要将该字段转换为日期。

```
CONVERT(DATE, a.[Date]) >= CONVERT(DATEADD(d, -30, DATE), b.[Date]) AND
CONVERT(DATE, a.[Date]) <= CONVERT(DATE, b.[Date]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T15:25:54.763

Similar to @FergusBown you could use:

```
DATEADD(mm,-1,GETDATE()) 
```

# apache - 在接收完整的 POST 有效负载之前使用 Apache 发送 307 重定向

> ID：13685019
> 
> 赞同：2
> 
> 时间：2012-12-03T14:11:12.760
> 
> 标签：apache, redirect, post

是否可以在接收完整的 POST 有效负载之前发送 307 重定向标头？

我有一个必须将 POST 请求重定向到第三级域的网站；一切正常，除了上传大文件时需要将近两倍的时间，因为只有在网站（无用地）获取所有 POST 数据之后才发送 307。

谢谢！

# ruby-on-rails - 循环浏览最近的对象：Rails on Rails

> ID：13685021
> 
> 赞同：0
> 
> 时间：2012-12-03T14:11:26.677
> 
> 标签：ruby-on-rails, ruby

我正在尝试循环浏览最新的“文章” - 例如，最近 30 天内发布的 10 篇。

我是否应该在我的文章模型中创建一个方法，如下所示：

模型/文章.rb

```
def recent
  self.where('created_at > ?', Time.now-30.days.ago)
end 
```

然后在我看来呢？

意见

```
@articles.each do |article|
   link_to article.title, Article.recent    
end 
```

这当然行不通。

如果这个问题已经得到解答（也许我使用了错误的搜索词——stackoverflow 的新手），我们将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:19:27.423

`Scopes`检查这样的事情将是一件好事。检查[此处](http://guides.rubyonrails.org/active_record_querying.html#scopes)的链接以了解有关它们的更多信息。

在您的`Article`模型上，您可以创建一个`recent`如下所示的范围：

```
Class Article < ActiveRecord::Base
  scope :recent, lambda { where("created_at < ?", TimeZone.now) }
end 
```

然后您只需使用即可检索这些文章`Article.recent`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:27:59.393

我认为这*应该*是一个方法，而是一个类方法。对于这类事情，我个人更喜欢方法而不是作用域。

```
def self.recent
  where('created_at > ?', Time.now-30.days.ago).order("created_at desc").first(10)
end 
```

在您的控制器中，您可以`@recent_articles`设置

```
@recent_articles = Article.recent 
```

查看您将执行的操作

```
@recent_articles.each do |article|
  link_to article.title, article_path(article) # use your proper route method here.
end 
```

推荐（过时）阅读：[http ://www.railway.at/2010/03/09/named-scopes-are-dead/](http://www.railway.at/2010/03/09/named-scopes-are-dead/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:20:57.680

我想范围在那里对你有用：

[http://guides.rubyonrails.org/active_record_querying.html#scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)

€ 迟到 ;)

# teradata - 有没有办法使用 DBC 视图来查找数据库模式被更改的最后日期和时间？

> ID：13685023
> 
> 赞同：0
> 
> 时间：2012-12-03T14:11:30.947
> 
> 标签：teradata

我想查找在特定数据库上进行任何模式修改的日期和时间。修改是诸如已创建、更改或删除的表或列之类的东西。它不包括任何已插入、更新或删除的数据。

我需要这个的原因是因为我正在编写一个 .NET 实用程序，它严重依赖于从`dbc.tables`、`dbc.columns`和`dbc.indices`. 由于查询这些视图可能是一项非常昂贵的操作，因此我想将其全部读入自定义业务对象，然后将对象序列化为存储在磁盘上的 XML 文件。这样，我可以在需要时反序列化数据，除非数据库的 current_timestamp 大于或等于上次模式更改的日期时间，此时我将使用更新的模式刷新本地 XML 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:14:44.313

`LastAlterTimestamp`- 如果等于，`CreateTimestamp`则对象自创建或替换后未被修改。当特定于该数据字典对象的属性被更新时，它会被更新。

例如，当添加、删除或更改子对象（表、视图、宏、存储过程、函数等）时，不会更新 DBC.Databases.LastAlterTimestamp。它会在密码、默认角色、配置文件或帐户更改等情况下更新。

# c++ - 将“char a[4096] = {0};” 使 a 的元素初始化为 0？

> ID：13685024
> 
> 赞同：-2
> 
> 时间：2012-12-03T14:11:36.410
> 
> 标签：c++, arrays, char

> **可能重复：**
> [array[100] = {0} 如何将整个数组设置为 0？](https://stackoverflow.com/questions/629017/how-does-array100-0-set-the-entire-array-to-0)
> [如何初始化一个char数组？](https://stackoverflow.com/questions/3134458/how-to-initialize-a-char-array)

在 c++ 中，我想将 char 数组初始化为 0s 数组。会这样做吗
？`"char a[4096] = {0};"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:18:22.803

是的，它会……但请记住，一个`char`存在`0`是 ASCII `NULL`……如果您希望它初始化为所有`'0'`不起作用的（字符 0）。

在这种情况下：

```
memset(a, '0', 10); 
```

会是一个更好的方式去......或

```
std::fill(std::begin(a), std::end(a), '0'); 
```

会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:14:00.343

是的。

（而且这个答案也至少有 30 个字符。）

# c# - 将 Wpf 的数据网格绑定到数据库

> ID：13685026
> 
> 赞同：5
> 
> 时间：2012-12-03T14:11:48.437
> 
> 标签：c#, asp.net, wpf, wpf-controls, wpfdatagrid

我正在尝试将 WPF 的 DataGrid 绑定到 MS SQL 数据库中的表。

1）首先我创建了一个App.config文件如下rrr

```
 <connectionStrings> 
      <add name="ConString" connectionString="Data Source=MYDataSB\SQLExpress; 
       User Id=sa;Password=gm03C3; Initial Catalog=MYDB;">
    <connectionStrings/> 
```

2）其次，我在表单中添加了一个名为 grdEventLog 的数据网格

```
 <Grid>
        <DataGrid Name="grdEventLog"/>
      </Grid> 
```

3）然后我将此代码添加到 MainWindow.xaml.cs 文件中，如下所示：

```
 using System.Data;
     using System.Data.SqlClient;
     using System.Web;

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        FillDataGrid();
    }

    private void FillDataGrid()
    {
        string ConString = ConfigurationManager.ConnectionStrings["ConString"].ConnectionString;
        string CmdString = string.Empty;
        using (SqlConnection con = new SqlConnection(ConString))
        {
            CmdString = "SELECT Server,Date,Typ,Msg FROM EventLog";
            SqlCommand cmd = new SqlCommand(CmdString, con);
            SqlDataAdapter sda = new SqlDataAdapter(cmd);
            DataTable dt = new DataTable("EventLog");
            sda.Fill(dt);
            grdEventLog.ItemsSource = dt.DefaultView;
        }
    } 
```

输入所有这些条目后，我在 ConfigurationManager 处出现错误，指出“当前上下文中不存在该名称”

我正在尝试添加参考 cfgmgr32.dll 来克服此错误。但它不被接受。谁能建议克服这个错误？！

也欢迎在 WPF 中处理数据绑定的替代建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:53:56.500

问题不在于数据绑定本身。似乎，配置文件中或 ConnectionStrings [] 中使用的键中有错字。如果您在此处使用堆栈跟踪发布整个错误，这将很有用。PS 您的配置文件中有错字。应该不是

```
<connectionStrings> 
      <add name="ConString" connectionString="Data Source=MYDataSB\SQLExpress; 
       User Id=sa;Password=gm03C3; Initial Catalog=MYDB;">
    <connectionStrings/> 
```

但

```
<connectionStrings> 
      <add name="ConString" connectionString="Data Source=MYDataSB\SQLExpress; 
       User Id=sa;Password=gm03C3; Initial Catalog=MYDB;">
    </connectionStrings> 
```

见最后一行。

# php - 从法语日期字符串中删除重音符号

> ID：13685031
> 
> 赞同：1
> 
> 时间：2012-12-03T14:12:05.333
> 
> 标签：php, date, strftime, setlocale

我想用法语显示日期，但没有任何口音（法语月份只有 é 和 û）。

我有这个代码：

```
$date = '1359887884';
$date = strtotime($date);
setlocale(LC_TIME, "fr_FR", "fr_FR@euro", "fr", "FR", "fra_fra", "fra");
$date = strftime("%A %d %B", $date);
print "<p>date: " . $date . "</p>"; 
```

输出是：**dimanche 03 février**

我怎样才能像这样显示它：**dimanche 03 fevrier**

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:15:36.137

这应该可以解决问题：

```
print "<p>date: " . iconv('ISO-8859-1', 'ASCII//TRANSLIT//IGNORE', $date) . "</p>"; 
```

# mysql - 查询在不同的服务器上返回奇怪和不同的结果

> ID：13685032
> 
> 赞同：1
> 
> 时间：2012-12-03T14:12:07.393
> 
> 标签：mysql

**没关系，很抱歉浪费您的时间，经过仔细检查，在我的实时数据中确实没有这种情况。当我第一次问我的客户时，应该有一些。他们哪里错了，我要快速归咎于 MySQL。**

**情况**

在我的应用程序中，运行以下查询：

```
SELECT s.*, c.company_name, c.kvk_number 
FROM wp_kvk_statements as s 
LEFT JOIN wp_kvk_companies as c ON s.company_id = c.id 
WHERE s.status < 2 AND c.status = 1 
ORDER BY company_id, s.year DESC 
```

**问题**

在我的开发服务器上，此查询正确返回 wp_kvk_statements 中的状态小于 2（即 0 或 1）的所有行。对于 wp_kvk_companies 表中状态为 1 的公司。

但是在我的实时服务器上，只返回 wp_kvk_statements 中状态为 1 的行，就好像 c.status = 1 被解释错误一样。

**问题**

为什么会发生这种情况，我该如何解决。

**背景资料**

开发服务器 MySQL 导出（这是它工作的地方）：

```
-- phpMyAdmin SQL Dump
-- version 3.4.10.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Dec 03, 2012 at 01:22 PM
-- Server version: 5.5.20
-- PHP Version: 5.3.10

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

-- --------------------------------------------------------

--
-- Table structure for table `wp_kvk_companies`
--

CREATE TABLE `wp_kvk_companies` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `industry_id` int(11) NOT NULL,
  `company_name` char(255) CHARACTER SET utf8 NOT NULL,
  `kvk_number` char(12) NOT NULL,
  `status` int(11) NOT NULL DEFAULT '1',
  `last_crawled` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `wp_kvk_statements`
--

CREATE TABLE `wp_kvk_statements` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `company_id` int(11) NOT NULL,
  `year` int(4) NOT NULL,
  `bought` tinyint(1) NOT NULL,
  `analyzed` tinyint(1) NOT NULL,
  `status` int(11) NOT NULL,
  `added` datetime NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated_by_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique` (`company_id`,`year`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

实时服务器 MySQL 导出（这是损坏的地方）：

```
-- phpMyAdmin SQL Dump
-- version 3.5.2.2
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Dec 03, 2012 at 02:25 PM
-- Server version: 5.5.9
-- PHP Version: 5.3.17

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- Database: `deb51918_annuall`
--

-- --------------------------------------------------------

--
-- Table structure for table `wp_kvk_companies`
--

CREATE TABLE `wp_kvk_companies` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `industry_id` int(11) NOT NULL,
  `company_name` char(255) CHARACTER SET utf8 NOT NULL,
  `kvk_number` char(12) NOT NULL,
  `status` int(11) NOT NULL DEFAULT '1',
  `last_crawled` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `wp_kvk_statements`
--

CREATE TABLE `wp_kvk_statements` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `company_id` int(11) NOT NULL,
  `year` int(4) NOT NULL,
  `bought` tinyint(1) NOT NULL,
  `analyzed` tinyint(1) NOT NULL,
  `status` int(11) NOT NULL,
  `added` datetime NOT NULL,
  `updated` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `updated_by_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique` (`company_id`,`year`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:36:16.363

查询做了它应该做的事情。顺便说一句，`LEFT`那里是无用的，连接被转换为`INNER`连接，因为`WHERE`clase 包含一个`c.status = 1`条件。所以，您的查询相当于：

```
SELECT s.*, c.company_name, c.kvk_number 
FROM wp_kvk_statements as s 
INNER JOIN wp_kvk_companies as c ON s.company_id = c.id 
WHERE s.status < 2 AND c.status = 1 
ORDER BY company_id, s.year DESC ; 
```

您进一步说：“但是在我的实时服务器上，只返回 wp_kvk_statements 中状态为 1 的行，......”

实时服务器中是否有任何`wp_kvk_statements.status`不等于 1 的行？`wp_kvk_companies`那在表中还有一个相关的行`c.status=1`？

我猜不会。我的第二个猜测是您误解了查询应该返回的内容（LEFT/INNER 混淆可能？）。

如果实时服务器和测试服务器返回不同的结果，那么您要么在两台服务器中有不同的数据，要么正在运行（稍微）不同的查询。

# php - 绕过 tcp/ip 通信到位于同一服务器上的服务

> ID：13685035
> 
> 赞同：0
> 
> 时间：2012-12-03T14:12:18.517
> 
> 标签：php, web-services, zend-framework, soap

我正在开发一个位于同一服务器内的 2 个域上的项目：
1\. DataSource 系统，为主应用程序提供数据
2\. 主应用程序，为前端应用程序提供数据。

应用程序 1 需要在单独的域上工作，因为它是更多应用程序的数据源。我正在尝试找到一些方法来提高通信性能。从应用 2 到应用 1 的简单调用大约需要 0.3-0.4 秒。

是否有强制服务器绕过 TCP/IP 通信并直接从 localhost 调用服务？

这两个应用程序都是用 PHP 和 Zend Framework 编写的。服务器是 IIS。这两个应用程序都基于 SOAP 解决方案。

将不胜感激任何提示。如果需要，将提供更多信息。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:13:01.973

你这里有误会。如果你从 localhost 调用服务（即通过 Zend_HTTP_Client），这意味着你在这里使用了 tcp/ip 和 http 层。一切都通过套接字工作，无论是本地主机还是外部 IP 地址。

如果需要“从外部”访问其他应用程序（无法集成），恕我直言，您只能通过使用更快的网络服务器（例如 nginx）、关闭网络服务器中不需要的模块或编写自己的模块来加快速度套接字服务器，消除了 apache 和 nginx 所做的大量处理。[http://devzone.zend.com/209/writing-socket-servers-in-php](http://devzone.zend.com/209/writing-socket-servers-in-php)可以帮助您迈出第一步。

# intellij-idea - 如何在 IntelliJ IDEA 中找到特定文件？

> ID：13685036
> 
> 赞同：79
> 
> 时间：2012-12-03T14:12:17.937
> 
> 标签：intellij-idea, keyboard-shortcuts, keymapping

我需要在 IntelliJ IDEA 中找到 test.xml。我怎样才能做到这一点？键盘快捷键（如果有）？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-12-03T14:13:52.130

`cmd`+ `shift`+ `o`（在旧版本中为`cmd`+ `shift`+ `n`）导致文件打开对话框（在 Mac 上）。

您可以使用`*`字符作为通配符。如果同名文件超过 1 个，您将看到每个条目的文件目录，以帮助您做出选择。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2012-12-03T14:21:34.713

在 Windows 中：

`Ctrl`+ `Shift`+`N`

或者

`Navigate > File...`

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2017-04-17T05:54:20.860

我的 IntelliJ 版本是，

```
IntelliJ IDEA 2016.2.4 
```

对我来说，`cmd+shift+n`行不通。但，

```
command + shift + o 
```

非常适合我。

上面的快捷方式将为您提供搜索文件的对话框。

如需更多帮助，

在主菜单上，指向**导航**，然后分别选择类、文件或符号，或使用以下快捷方式：

**班级：** ⌘O

**文件（目录）：** ⇧⌘O

**符号：** ⌥⌘O

资料来源：JetBrains.com

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-09-03T11:55:08.503

只需连续快速按**Shift Shift**以显示弹出窗口以搜索所有内容。然后，您可以开始输入以搜索文件。它是一个模糊查找器，因此要匹配例如**S** ome **Class** With **with a Long Na** **me.java，您只需键入：sclwlna**（**或****其他**字母组合，在目标文件名中具有相同的出现顺序）。

 ******* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-06-16T08:20:01.203

嗯，这是切换操作系统的用户经常问的一个问题。我最近从 Windows 切换到 MAC。

打开文件快捷方式如下

视窗：`ctrl+shift+n` MAC：`command + shift + o`******

# java - 如何在 Java 中设置 unix 动态库路径（LD_LIBRARY_PATH）？

> ID：13685042
> 
> 赞同：2
> 
> 时间：2012-12-03T14:12:32.060
> 
> 标签：java, linux, unix

我有一个二进制可执行文件（无源代码），它需要在终端中执行此命令 - export LD_LIBRARY_PATH = "" 以链接到我在目录中拥有的库 lbtiff.so.3。只有在我执行了这个导出命令之后，我才能执行二进制文件，否则会报错——“加载共享库时出错：libtiff.so.3 ...

现在，我想从我的 java 代码中执行这个二进制文件。但是在运行时简单地执行导出命令并没有做任何事情，并且当我从 Java 执行二进制文件时，仍然会出现“error while ..”错误。我猜想通过 Java 可能无法设置 unix 特定的环境变量 LD_LIBRARY_PATH - 有没有办法可以从 Java 运行我的二进制文件并且它能够找到库？这是我当前的代码 -

```
Process p = Runtime.getRuntime().exec("bash -c export LD_LIBRARY_PATH=<lib path>");

p = Runtime.getRuntime().exec("<binary path>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:07:18.553

而不是`Runtime.exec`，使用`ProcessBuilder`. 这将允许您在运行需要它们的二进制文件时指定环境变量

```
ProcessBuilder pb = new ProcessBuilder("<binarypath>");
pb.environment().put("LD_LIBRARY_PATH", "<libPath>");
Process p = pb.start(); 
```

您使用两个单独`Runtime.exec`调用的方法将不起作用，因为您在第一个调用中所做的环境设置仅影响该特定`Process`的，而不是由单独调用`Runtime.exec`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:49:00.370

请参阅[我](https://stackoverflow.com/a/8962189/396730)对另一个问题的回答。最好的方法是不使用外部 shell 设置环境变量（您的代码不起作用，因为它不会全局设置变量，仅用于 bash 进程），而是从 Java 中设置变量。更容易并且它可以工作（并且在所有平台上，无论安装了哪个外壳）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:15:57.257

在 unix 系统上，您可以在执行命令之前添加变量

```
LD_LIBRARY_PATH=... foo args 
```

`foo`将使用`args`修改后的程序执行程序`LD_LIBRARY_PATH`

或者您可以通过以下方式利用子shell：

```
(export LD_LIBRARY_PATH=...; foo args) 
```

# ruby-on-rails - 对于每个循环，数组中的每个项目

> ID：13685048
> 
> 赞同：1
> 
> 时间：2012-12-03T14:13:01.873
> 
> 标签：ruby-on-rails, arrays, loops, foreach, haml

我已经将数据库中的一个字段传递到我的控制器中，因此我需要在我的视图中显示所有三个链接`@download`的值。`/link1, /link2, link3`我试过以下代码：

```
%ul.pdf
  - ["#{@download}"]. each do|li|
    %li= link_to "title", "#{ li }" 
```

但这仅显示一个超链接，其中所有三个链接的值合而为一。有什么办法可以让它在每个逗号或其他东西处分开吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:21:13.717

是的，您可以在逗号处拆分*（这也说明了逗号后面的空格）*。

```
@download.split(/,\s+/) 
```

或者，作为一个整体

```
%ul.pdf
  - @download.split(/,\s+/).each do|li|
    %li= link_to "title", "#{ li }" 
```

尽管您可能会考虑根据上下文`split`在控制器中执行。`@download`

# android - 调用 glGenVertexArray( ) 但总是在 android 机器上只返回一个 ID 为“0”的资源

> ID：13685052
> 
> 赞同：0
> 
> 时间：2012-12-03T14:13:20.453
> 
> 标签：android, opengl-es

我在 android 2.4 OS 和 EGL 上使用 VAO 使 VAO 扩展成功，所有 VAO 的函数都正确返回。

但是当我调用`glGenVertexArray( )`生成 VAO 资源时，我总是得到具有 '0' ID 的资源（它可以正确渲染，但我希望使用具有不同 VAO 资源 ID 的多个顶点类型，而不仅仅是返回 0 资源 ID 给我）。

在 IOS 或 windows 操作系统上，VAO 资源 ID 增加 unsigned int 类型（`glGenVertexArray()`将返回 0、1、2、3 ... 等 ID。

我该如何解决这个问题？也许我忘记调用任何启用 GL 状态函数或其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:09:11.147

 `````
for ( _dword i = 0; i < 3; i ++ )
{
  GLuint res[4] = {0};
  GL_CHECK_ERROR( glGenVertexArrays( 4, res ) );
  WLOG_TRACE_4( L"Create VAO(%d, %d, %d, %d)", res[0], res[1], res[2], res[3] );
} 
````  `所有 res 数组在调用 glGenVertexArrays( ) 后接收 (0, 0, 0, 0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:08:39.887

您是否确保您的上下文设置正确？

我在 iOS 上遇到了非常相似的问题；如果没有设置上下文（即它为空），那么当您调用 OpenGL 函数时，它基本上会说“if(context == null) return;”。

所以，调用“有​​效”，它不会崩溃......但它什么也没做。我通过将 VAO 变量初始化为非零值来确定这一点，并观察到 ​​GL 根本没有写入它。

正确设置上下文修复了它。``

# php - .HTACCESS 和图像

> ID：13685064
> 
> 赞同：0
> 
> 时间：2012-12-03T14:14:01.293
> 
> 标签：php, image, .htaccess

我有以下.HTACCESS：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

问题是当我尝试在网页中放置图像或在`<head>`标签中包含 CSS 或 JS 文件时，它会将所有内容路由到我的 index.php。我该如何预防/解决这个问题？

目的是将所有流量定向到我的索引，即当给定的 URL 是 domain.com/shop 或 domain.com/signup 时，它们将分别被带到 shop.php 或 signup.php。问题是当包含图像等路由到 index.php 时，它会搞砸。如果我只有一个图像标签：

`<img src="/img/foobar.jpg">`然后图像尝试使用属性 /img/foobar.jpg 加载 index.php。这不是我想做的。

我能想到的唯一解决方案是为每个图像硬编码 URL。IE

`<img src="<?=HARDREF;?>/image.jpg">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:20:28.510

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteBase /

# if file not exists
RewriteCond %{REQUEST_FILENAME} !-f

# if dir not exists
RewriteCond %{REQUEST_FILENAME} !-d

# avoid 404s of missing assets in our script
RewriteCond %{REQUEST_URI} !^.*\.(jpe?g|png|gif|css|js)$ [NC]

RewriteRule .* index.php [QSA,L]

</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:18:33.050

尝试添加类似这样的内容来排除这些文件类型：

```
RewriteCond $1 !^(jpg|jpeg|gif|ico|png|css|js) 
```

# javascript - Jquery没有将背景图像添加到div

> ID：13685065
> 
> 赞同：1
> 
> 时间：2012-12-03T14:14:05.890
> 
> 标签：javascript, jquery, background

我有一个向我的 div 添加背景图像的功能。但它没有显示。

这是我的功能

```
var totalCount = 6;
function changeBackground()
{
    var num = Math.ceil( Math.random() * totalCount );
    backgroundUrl = '/background/test2/'+num+'.jpg';

    $('#background').css('background-image, url('  +backgroundUrl+  ')');
}

changeBackground(); 
```

每次刷新页面时，图像都会发生变化。我知道那部分正在工作，因为如果我改变

```
$('#background').css('background-image, url('  +backgroundUrl+  ')'); 
```

到

```
document.body.parentNode.style.backgroundImage = 'url(background/test2/'+num+'.jpg)'; 
```

它向我展示了我想要的图像。但是在html标签上。我想要它在 div 上，所以我可以用 jQuery 淡入它。

这是我的 CSS

```
#background {
width:100% !important;
height:100% !important;
background-repeat:no-repeat;
background-position:center center;
background-attachment:fixed; 
-webkit-background-size: cover;
-moz-background-size: cover;
-o-background-size: cover;
    background-size: cover;
} 
```

我在控制台中没有收到任何错误，当我查找 css 时，css 中没有添加任何内容。我现在怎么能有什么问题？因此，将来我可以为自己解决问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:15:50.847

改变

```
$('#background').css('background-image, url('  +backgroundUrl+  ')'); 
```

到

```
$('#background').css('background-image', 'url('  +backgroundUrl+  ')'); 
```

# excel - excel总时间为小时（以秒为基数）

> ID：13685068
> 
> 赞同：0
> 
> 时间：2012-12-03T14:14:20.950
> 
> 标签：excel, time, formatting

我的工作表有一列，所有单元格的值都以秒为单位（这些数字可能非常大）。我想要做的是显示（格式化）它们总结为分钟和小时。"[hh]:mm:ss" 格式看起来不错，但它失败了，因为我的单元格包含秒，而 excel 预计它是天。

例子。我的专栏看起来像这样（以秒为单位的平均时间）：

```
30378.92
14142.78
13837.00
13787.44 
```

将其格式化为 time/[hh]:mm:ss 后，我得到：

```
729094:04:48 = 30378.92 * 24 ~= 729094.08
339426:43:12
332088:00:00
330898:33:36 
```

我想得到的是：

```
8:26:18 (30378 seconds = 8 hours + 26 mins + 18.9 secs) 
```

是否可以强制 excel 将“30378”视为秒数而不是天数？我知道我可以将 '00:00:30378' 写入单元格 - 这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:49:43.080

使用辅助列非常简单。用 A2 中的秒数除以 B2 中的 86400（一天中的秒数），即 B2 中的这个公式

=A2/86400

将 B2 格式化为 [hh]:mm:ss 并获得正确的时间值（即使超过 24 小时 - 方括号确保这一点）。

您可以为所有 A 列数据“填写”B2 公式

如果要“原位”转换列，则可以将整列除以 86400，而无需像这样的附加列：

将 86400 放在任何空白单元格中，然后复制该单元格 > 选择秒数据列 > 选择性粘贴 > 在“操作”下选择“除” > 确定 > ESC > 格式为 [hh]:mm:ss

# javascript - 更改输入类型=“文件”标签内容

> ID：13685070
> 
> 赞同：1
> 
> 时间：2012-12-03T14:14:24.900
> 
> 标签：javascript, jquery, html, css

我想知道是否有任何方法可以隐藏或更改默认标签的内容：`No file chosen`对于

```
<input type="file" id="myFileInput"/> 
```

到目前为止，我想出的是将其长度减少一半，以便显示工具提示。

```
$('input:file').css('width', parseFloat($($('input:file')).css('width'))/2 ); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:22:37.323

您不能将输入文件设计更改为每个浏览器的本机。但你仍然可以模拟它，抱歉哈基：

[见演示](http://jsfiddle.net/npmEL/)

```
<button id="btn_myFileInput">Choose file...</button>
<label for="btn_myFileInput">No file choosen or whatever...</label>
<input type="file" id="myFileInput" multiple />​ 
```

JS：

```
$(function () {
    $('#btn_myFileInput').data('default', $('label[for=btn_myFileInput]').text()).click(function () {
        $('#myFileInput').click()
    });
    $('#myFileInput').on('change', function () {
        var files = this.files;
        if (!files.length) {
            $('label[for=btn_myFileInput]').text($('#btn_myFileInput').data('default'));
            return;
        }
        $('label[for=btn_myFileInput]').empty();
        for (var i = 0, l = files.length; i < l; i++) {
            $('label[for=btn_myFileInput]').append(files[i].name + '\n');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T02:49:23.390

Chrome 也给了我这个问题。我尝试设置各种 CSS 选择器，但似乎没有任何效果。但是，我确实通过使用 FORM 元素找到了解决方案。

1.  命名您的 input[type=file] 元素。
2.  命名您的表单元素并将 input[type=file] 放入其中。
3.  制作一个跨度并将其放在表单中的输入下方。这将是你的标签。
4.  使用 CSS 将输入的高度设置为 0px 并将不透明度设置为 0，这将使其不可见。
5.  使跨度绝对定位到左侧 0px。

> ```
> <style>
>     #file {
>         height:0px;
>         opacity:0;
>     }  
>     #span {
>         left:0px;
>         position:absolute;
>         cursor: pointer;
>     }
> </style>
> 
> <form name="form">
>     <input type="file" id="file" name="file"/>
>     <span id="span">My File label!!!!</span>
> </form>
> 
> <script>
>     var span = document.getElementById("span");
> 
>     span.onclick = function(event) {
>         document.form.file.click(event);
>     };
> 
>     var span = document.getElementById("span");
>     span.onclick = function(event) {
>         document.form.file.click(event);
>     };
> </script> 
> ```

我在 Chrome 和 FF 中对此进行了测试，而不是 ie，但我希望这会有所帮助。jsfiddle [http://jsfiddle.net/aressler38/L5r8L/1/](http://jsfiddle.net/aressler38/L5r8L/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:26:26.920

您也可以通过这种方式进行操作，但这是一种 hack：

```
<input type="file" id="myFileInput" name="html" style="width: 90px;" onchange="this.style.width = '100%';"/> 
```

# php - 如何在 cakePHP 中显示单个项目

> ID：13685073
> 
> 赞同：0
> 
> 时间：2012-12-03T14:14:25.187
> 
> 标签：php, jquery, cakephp, loops, slider

我正在使用 cake PHP，在我的**视图中/technical_slider/index.ctp**如下：我正在使用本教程的一个经过大量修改的版本[Featured Content Slider Using jQuery](http://demo.webdeveloperplus.com/featured-content-slider/)

```
<?php foreach ($technicalSlides as $technicalSlide):?>
<div id="nav-fragment-1" class="ui-tabs-panel">

<h2><?php echo $technicalSlide['TechnicalSlide']['title'];?></h2>
<p><?php echo $technicalSlide['TechnicalSlide']['description'] ; ?></p>

</div>
<?php endforeach; ?> 
```

我的问题是：如何仅显示某些 id 或项目并在同一个 div 上应用不同的类？因为我只想记录 1-3 跳过 4-7 然后显示记录 8-15？

我在他们身上应用不同的课程，因为他们有不同的背景，但共享相同的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:38:06.283

添加一个计数器变量（在这种情况下`$i`），将其递增（`$i++`），使其在每个循环中增加一，并将您的检查添加到一个`if()`块中以确保您只编写您想要的那些：

```
<?php
$i = 1;
foreach ($technicalSlides as $technicalSlide):
    if($i < 4 || $i > 7) {
        ?>
        <div id="nav-fragment-1" class="ui-tabs-panel">

        <h2><?php echo $technicalSlide['TechnicalSlide']['title'];?></h2>
        <p><?php echo $technicalSlide['TechnicalSlide']['description'] ; ?></p>

        </div>
        <?php
    }
    $i++;
endforeach;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:39:06.587

您可以添加一个计数器，然后只显示您想要的那些。

```
 <?php int $i = 0; ?>
 <?php foreach ($technicalSlides as $technicalSlide):?>
 <?php if ($i < 4 || $i > 7): ?>
   <div id="nav-fragment-1" class="ui-tabs-panel">

   <h2><?php echo $technicalSlide['TechnicalSlide']['title'];?></h2>
   <p><?php echo $technicalSlide['TechnicalSlide']['description'] ; ?></p>
 <?php endif; ?>

 </div>
 <?php endforeach; ?> 
```

虽然我会合并所有类并使用属性。

# grails - 将 SpringSecurityService 注入 Grails 中的过滤器时为空

> ID：13685076
> 
> 赞同：6
> 
> 时间：2012-12-03T14:14:35.797
> 
> 标签：grails

我正在尝试在过滤器中使用 SpringSecurityService 来获取当前登录的用户。问题是我得到了 null 并且无法获取当前用户。

```
class ApplicationFilters {

   def springSecurityService

   def filters = {
      all(controller:'*', action:'*') {

         after = { Map model ->

            def userName=springSecurityService.currentUser
         }
      }
   }
} 
```

我也尝试从过滤器中获取参数映射，我也得到了空值。我应该怎么做才能解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:51:53.767

不知道你是否已经解决了这个问题，但你绝对可以通过像这样引用注入来调用你`Service`的类：`*Filters``applicationContext`

```
class TestFilters {
  def filters = {
    all(controller:'*', action:'*') {
        before = {
            applicationContext.testService.serviceMethod()
        }
        after = { Map model ->

        }
        afterView = { Exception e ->

        }
    }
  }
} 
```

# android - 在 android < 4.0 版中为重复事件添加异常

> ID：13685077
> 
> 赞同：-4
> 
> 时间：2012-12-03T14:14:37.860
> 
> 标签：android, exception, calendar, recurring

> Microsoft Office Project 2007 引入了有效工作周和日历例外，其中所有日历数据都与一组“有效开始/结束”日期相关联。-- [Microsoft Office 开发中心](http://msdn.microsoft.com/en-us/library/office/ms485348%28v=office.12%29.aspx)

*谷歌*也使用了这个[功能](https://groups.google.com/forum/?fromgroups=#!topic/google-calendar-help-dataapi/IGvMeQhxmfI)。

*Android* Calendar (pre- )是否`ICS`也支持这些功能？我尝试了谷歌搜索，但只找到了不完整的帖子，例如[https://stackoverflow.com/questions/13633577/android-8-sdk-14-recurring-event-exception](https://stackoverflow.com/questions/13633577/android-8-sdk-14-recurring-event-exception)。

我在[另](https://stackoverflow.com/questions/10100563/adding-calendar-and-events-in-android-4-0)一篇文章中了解到访问日历的方法是通过*内容提供程序*，但是我没有找到可行的解决方案

（例如，我尝试使用`"content://com.android.calendar/exception"`，但它导致异常说它是一个未知的 url）。

任何能引导我朝着正确方向前进的帮助都会非常有帮助，因为我一直在谷歌搜索无济于事，而且这种反复*尝试*的东西效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:33:01.003

不会。从 ICS（API 级别 14）开始正式支持 Android 日历异常：

![CONTENT_EXCEPTION_URI](../Images/585c03adc6407ed6544837ce98cd39d2.png)

--[安卓开发者指南](http://developer.android.com/reference/android/provider/CalendarContract.Events.html#CONTENT_EXCEPTION_URI)

有些版本可能允许您使用`Uri`您讨论的内容，因为它是从[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/provider/CalendarContract.java#CalendarContract.Events.0CONTENT_EXCEPTION_URI)派生的：

```
public static final String AUTHORITY = "com.android.calendar";
public static final Uri CONTENT_EXCEPTION_URI = Uri.parse("content://" + AUTHORITY + "/exception");

//hence, CONTENT_EXCEPTION_URI = Uri.parse("content://com.android.calendar/exception"); 
```

但是，由于它没有得到官方支持，因此不应该被认为是可靠的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:33:14.933

要回答您的第一个问题，是的，较旧的 Android 具有重复事件的例外情况。

由于该 API 是在 API 14 中引入的，它可能与以前版本的代码有很大不同。[这个链接](http://jimblackler.net/blog/?p=151)有一些关于从旧版本的日历中获取事件的提示。

# c# - 在 C# 中将 SQL 列拆分为 HTML 表中的多行

> ID：13685078
> 
> 赞同：0
> 
> 时间：2012-12-03T14:14:40.987
> 
> 标签：c#, asp.net

假设我的`datatable`检索列的值为“SAGAR - SAGAR”

```
DataTable dtOutput;
dtOutput = Generix.getATMDetails(sATM);//Retrieves data 
```

我可以将我的数据表转换为 HTML 表以在 HTML 页面中显示。如何在 HTML 页面中显示它的一列时将其转换为多行格式

例如：dtOutput（数据）

```
Comments (Column Header)
SAGAR - SAGAR - SAGAR 
```

现在在 HTML 页面中显示它应该是这样的

```
SAGAR
SAGAR
SAGAR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:25:08.633

您可以通过添加来获得新行`</ br>`。有几种方法可以做到这一点。

*   从`select query`使用`REPLACE(comments, ' - ' , '</ br>')` （如果你在 sql server 中）
*   内`datatable`
*   期间`data binding`如下

    ```
    <%# Eval("comments").ToString().Replace(" - ","</ br>") %> 
    ```

# javascript - 如何检查两个变量是否具有相同的引用？

> ID：13685079
> 
> 赞同：94
> 
> 时间：2012-12-03T14:14:40.923
> 
> 标签：javascript, equality

如何检查两个或多个对象/变量是否具有相同的引用？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-12-03T14:15:42.827

您使用`==`或`===`：

```
var thesame = obj1===obj2; 
```

[来自 MDN：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

> 如果两个操作数都是对象，那么当操作数引用内存中的同一个对象时，JavaScript 会比较相等的内部引用。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-03T14:16:00.023

相等和严格相等运算符都会告诉您两个变量是否指向同一个对象。

```
foo == bar
foo === bar 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-02-14T09:56:52.410

对于像对象这样的引用类型，**==**或**===**运算符仅检查其引用。

例如

```
let a= { text:'my text', val:'my val'}
let b= { text:'my text', val:'my val'} 
```

这里 a==b 将是错误的，因为两个变量的引用不同，尽管它们的内容相同。

但如果我把它改成

```
a=b 
```

如果我现在检查 a==b 那么它将是 true ，因为这两个变量的引用现在是相同的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-05-03T18:38:19.597

从开始`ES2015`，引入了一种新方法[`Object.is()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)，可用于比较和评估两个变量/引用的相同性：

下面是几个例子：

```
Object.is('abc', 'abc');     // true
Object.is(window, window);   // true
Object.is({}, {});           // false

const foo = { p: 1 };
const bar = { p: 1 };
const baz = foo;

Object.is(foo, bar);         // false
Object.is(foo, baz);         // true 
```

**演示：**

```
console.log(Object.is('abc', 'abc'));
console.log(Object.is(window, window));
console.log(Object.is({}, {}));

const foo = { p: 1 };
const bar = { p: 1 };
const baz = foo;

console.log(Object.is(foo, bar));
console.log(Object.is(foo, baz));
```

***注意：****此算法在处理有符号零和 NaN 方面与严格等式比较算法不同。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T15:04:28.707

可能的算法：

```
Object.prototype.equals = function(x)
{
  var p;
  for(p in this) {
      if(typeof(x[p])=='undefined') {return false;}
  }

  for(p in this) {
      if (this[p]) {
          switch(typeof(this[p])) {
              case 'object':
                  if (!this[p].equals(x[p])) { return false; } break;
              case 'function':
                  if (typeof(x[p])=='undefined' ||
                      (p != 'equals' && this[p].toString() != x[p].toString()))
                      return false;
                  break;
              default:
                  if (this[p] != x[p]) { return false; }
          }
      } else {
          if (x[p])
              return false;
      }
  }

  for(p in x) {
      if(typeof(this[p])=='undefined') {return false;}
  }

  return true;
} 
```

# java - 将字符串解析为日期

> ID：13685082
> 
> 赞同：-3
> 
> 时间：2012-12-03T14:14:52.643
> 
> 标签：java, string, parsing, date, typeconverter

```
String str_date = currentMonth + 1 + "-" + value.toString() + "-" + currentYear;
            DateFormat formatter ; 
            Date date = null ; 
            formatter = new SimpleDateFormat("dd-MMM-yy");
            try {
                date = (Date)formatter.parse(str_date);
            } 
            catch (ParseException e) {
                e.printStackTrace();
            }  
            System.out.println(date); 
```

嗨，我试图搜索迄今为止的字符串，几乎每个人都使用这种代码，但它似乎仍然打印出 null？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:40:48.287

尝试任一

```
formatter = new SimpleDateFormat("dd-MM-yyyy"); 
```

或者

```
formatter = new SimpleDateFormat("MM-dd-yyyy"); 
```

取决于你真正想要什么。您的代码表明您可能希望将一个月作为模式的第一部分。

确保这`currentMonth + 1`是你想要的。如果`currentMonth`是 12，则将`+1`日期推到下一年的 1 月。

另外，也要尝试习惯使用 a `Locale`。默认的可能对您有用，但会在其他人的计算机上中断。

# grails - Grails 2.1.1 - Logback 集成

> ID：13685084
> 
> 赞同：1
> 
> 时间：2012-12-03T14:15:00.860
> 
> 标签：grails, logback

我正在使用 Grails 2.1.1 进行开发，现在我想将 Logback (http://logback.qos.ch) 集成为默认的日志框架，因为它应该提供一些更好的日志功能，并且还可以通过 Groovy 进行配置。

由于 Logback 1.0.7（最新）仅适用于`slf4j 1.6.6`我想升级 Grails 依赖项。Grails 2.1.1 正在使用`slf4j 1.6.2`. 如何正确执行此操作？

我尝试了以下方法：在`BuildConfig.groovy`我排除`grails-plugin-log4j`和`slf4j-api`

```
grails.project.dependency.resolution = {
  // inherit Grails' default dependencies
  inherits("global") {
      excludes "grails-plugin-log4j", "slf4j-api"
  }
  ...
} 
```

我尝试与其他必要的库一起`slf4j-api 1.6.6`加载`compile` `build``runtime`

```
grails.project.dependency.resolution = {
  ...
  dependencies {
    // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

    compile "org.slf4j:slf4j-api:1.6.6"

    build   "org.slf4j:slf4j-api:1.6.6",
            "ch.qos.logback:logback-core:1.0.7",
            "ch.qos.logback:logback-classic:1.0.7"

    runtime "org.slf4j:slf4j-api:1.6.6",
            "org.slf4j:log4j-over-slf4j:1.6.6", // logback dependency for classic module, as seen on http://logback.qos.ch/dependencies.html
            "ch.qos.logback:logback-core:1.0.7",
            "ch.qos.logback:logback-classic:1.0.7"
}
  ...
} 
```

现在，如果我想从 Grails 命令行执行任何操作，要么 要么`grails compile`，`grails clean`它抱怨它无法执行脚本，因为它找不到 LoggerFactory 类：

```
| Loading Grails 2.1.1
| Configuring classpath
| Error Error executing script Compile: org/slf4j/LoggerFactory (NOTE: Stack trace has been filtered. Use --verbose to see entire trace.)
java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory
at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272)
at org.springframework.core.io.support.PathMatchingResourcePatternResolver.<clinit>(PathMatchingResourcePatternResolver.java:169)
| Error Error executing script Compile: org/slf4j/LoggerFactory 
```

如何`slf4j-api`正确升级底层？

如果我不排除第`slf4j-api`一个，我会与调用时标记为驱逐的“旧”1.6.2 api 发生冲突`grails dependency-report`......

另外，我希望有一个用于 Logback 的外部配置文件。我将如何实施它？使用 Log4j，我只是`log4jConfigurer`在文件中声明了一个 bean `conf/spring/resources.groovy`- 如何使用 Logback 完成？

有没有人用 Logback 记录 Grails 2.1.1 的经验，可以给我任何关于这个问题的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:35:22.923

因为我认为这个问题对于愿意使用 Grails 实现 Logback 日志框架的其他开发人员来说也是一个事实，所以我将在这个答案中分享我在这个主题上的进展——尽量不要用进度信息使初始问题过载。

1.  我仍然没有在 Grails 中更新**slf4j**的运气，所以我坚持使用简单地重载 slf4j-api 依赖项的解决方案。Grails 不会在 上显示错误`grails dependency-report`，只是在较旧的 slf4j 依赖项（1.6.2）上显示“驱逐通知”。这似乎可行，但我会继续寻找关于这个主题的更好的解决方案。

2.  我现在可以通过 ~~一个~~ ~~和一个~~~~在 中实现的类~~**为 Logback 加载一个外部配置文件，并在文件**~~中~~ ~~注册~~~~。~~~~（要在命令行上~~~~简单地执行~~~~。您可以在下面找到它~~ ~~）确保将其设为~~ ~~您的第一个条目，~~~~以便尽快配置和加载 Logback。~~~~`ServletContextListener``ConfigLoader``grails-app/src/java``ServletContextListener``web.xml``web.xml``grails install-templates``grails-app/src/templates/war/web.xml``<listener/>``web.xml`~~

    ~~我在 [https://bowerstudios.com/node/896](https://bowerstudios.com/node/896)找到了这个解决方案以及完整的代码示例，这是我在这个主题上找到的最好和最短的示例，它似乎有效！~~

    这个解决方案只是加载了外部配置文件并在`ConfigLoader`类中使用它，但没有为整个 Grails 应用程序设置它。所以我在谷歌上搜索了更多，我从 Logback 找到了一个解决方案，可以在 GitHub (https://github.com/qos-ch/logback-extensions) 上找到并与 集成 `Spring Framework`，所以我从这个[页面](https://github.com/qos-ch/logback-extensions/tree/master/spring/src/main/java/ch/qos/logback/ext/spring/web)和`LogbackConfigurer`从[这里开始](https://github.com/qos-ch/logback-extensions/tree/master/spring/src/main/java/ch/qos/logback/ext/spring)上课并调整它们以满足我的需要。

    *现在一切都像魅力一样工作，我能够创建一个外部配置文件 - 我最喜欢的是 - 它与默认情况下`log`注入到例如类的对象挂钩。`Controller`*

希望这对其他开发人员也有帮助；）

**如果您对此有更好或更“常规”的解决方案，请告诉我！**

# android - 在 FragmentPagerAdapter 中保留片段的实例

> ID：13685099
> 
> 赞同：3
> 
> 时间：2012-12-03T14:16:05.547
> 
> 标签：android, android-fragments, fragmentpageradapter

是否可以保留为 a`FragmentPagerAdapter`内部创建的每个片段的实例`FragmentPagerAdapter`？

像这样的东西：

```
@Override
    public Object instantiateItem(ViewGroup container, int position)
        switch(position){
        case 0:
            fragment0 = super.instantiateItem(container, position);
            return fragment0;
        case 1:
            fragment1 = super.instantiateItem(container, position);
            return fragment1;
        default:
            return super.instantiateItem(container, position);
        }
    } 
```

我会遇到内存问题吗？

这个想法是`MyFragmentPagerAdapter.fragment0`为了获得对片段的引用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T15:18:35.047

这种方法的问题在于，`FragmentManager`即使您维护一个引用，也可能会创建片段的新实例。在这种情况下，同一片段的多个实例将在内存中（泄漏），并且您维护的引用指向一个甚至可能不会显示的实例。所以换句话说，它是不安全的。

然而，安全的是在您的片段中维护您的活动的引用。

在您的片段中，您覆盖

```
@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    home = (YourFragmentActivity) activity;
}

public void onCreate(Bundle savedInstanceState) {
            home.setThisFragTag(getTag());
    } 
```

在你的 FragmentActivity

```
public void ThisFragTag(String tag) {
    this.fragTag = tag;
} 
```

现在在您的活动中，您可以保留当前显示的片段实例

```
(YourFragmentClass) getSupportFragmentManager().findFragmentByTag(fragTag); 
```

您可以对多个片段重复此操作

# vbscript - 尝试通过计划任务和 VBScript 删除文件

> ID：13685100
> 
> 赞同：0
> 
> 时间：2012-12-03T14:16:11.053
> 
> 标签：vbscript, ftp, windows-server-2008

我曾问过一个关于使用 VBScript 和 Windows 任务计划程序在服务器上无人看管地下载文件的问题。（请参阅 [脚本 SFTP 无人值守下载](https://stackoverflow.com/questions/13345678/scripting-sftp-unattended-download)）

这很好用，但现在我还需要从我正在调用的服务器中删除文件：

```
Set sessionses = WScript.CreateObject("WScript.Shell")

    sessionses.Run "C:\TCS\SFTP\delThem.bat", , True 
```

PSFTP 调用运行此命令的批处理文件：

```
psftp user@host:22 -batch -b script.txt -pw pa$$word 
```

script.txt 如下：

```
cd FromCeridian
del *.GEN 
```

如果我从命令行运行此命令，或双击包含该命令的批处理文件，它会“交互地”工作，但在无人值守和计划运行时，它不会执行此部分。服务器是 SFTP，所以我不能只使用 win ftp 命令来完成它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:35:08.700

检查任务的安全选项以验证用户身份是否具有正确的访问权限。

# wpf - 列表框自动调整大小，按钮不会

> ID：13685101
> 
> 赞同：0
> 
> 时间：2012-12-03T14:16:24.933
> 
> 标签：wpf, xaml, checkbox, listbox

我有一个`ListBox`with `CheckBoxes`，当我调整窗口大小时会自动调整大小。我`CheckedListBox XAML`在 StackOverflow 上找到了我认为的代码，我没有修改它，我希望所有 UI 元素都一样。

我读过一些关于设置的东西`Anchors`。正如我已经说过的，我没有对 XAML 代码做任何事情，也没有设置任何`Anchors`?

XAML 代码中是否有任何我看不到的负责调整大小的内容？

```
 <Grid>
    <TextBox Height="23" HorizontalAlignment="Left" Margin="12,28,0,0" Name="textBox1" VerticalAlignment="Top" Width="238" />
    <Label Content="Profilname" Height="28" HorizontalAlignment="Left" Margin="12,0,0,0" Name="label1" VerticalAlignment="Top" />
    <ListBox ItemsSource="{Binding datasource}" Margin="12,57,12,41"  Name="checkedListBox1" Opacity="0.7">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <CheckBox Content="{Binding Path=Item}" IsChecked="{Binding IsChecked}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
    <Button Content="save" Margin="12,302,12,12" Name="button3" Click="button3_Click" />
</Grid> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T03:48:13.700

您正在像 Canvas 一样进行操作，但您使用的是 Grid。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <Label Content="Profilname" Name="label1" Grid.Row="0" />
    <TextBox Name="textBox1" Grid.Row="1" />
    <ListBox ItemsSource="{Binding datasource}" Name="checkedListBox1" Grid.Row="2" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <CheckBox Content="{Binding Path=Item}" IsChecked="{Binding IsChecked}" />
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
    <Button Content="save" Name="button3" Click="button3_Click"  Grid.Row="3" />
</Grid> 
```

现在看到一切都在调整大小。

您现在可以根据需要添加边距和填充以进行样式设置。

# c - getch() 等待 Enter 键？

> ID：13685103
> 
> 赞同：4
> 
> 时间：2012-12-03T14:16:30.507
> 
> 标签：c, windows, getch

> **可能重复：**
> [C/C++：从标准输入中捕获字符而不等待按下回车键](https://stackoverflow.com/questions/421860/c-c-capture-characters-from-standard-input-without-waiting-for-enter-to-be-pr)

我在 Windows 7 上使用 C-Free 4 Standard 并编写了一个 C 程序。

我正在使用 getch() 作为暂停程序的函数，但是，按下的字符会在屏幕上回显，它会在继续之前等待按下 Enter 键（它看起来与scanf 有效）。我尝试了 getche()，它工作正常，尽管出现了回声。

getch() 函数可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:32:16.537

> getch、wgetch、mvgetch 和 mvwgetch 例程从窗口中读取一个字符。在无延迟模式下，如果没有输入等待，则返回值 ERR。在延迟模式下，程序会一直等待，直到系统将文本传递给程序。根据 cbreak 的设置，这是在一个字符之后（cbreak 模式），或者在第一个换行符之后（nocbreak 模式）。在半延迟模式下，程序会一直等待，直到输入字符或达到指定的超时时间。

在 Windows 中使用或多或少相同的方法。您可以使用 _getch() 获取应用程序可用的输入字符，而无需缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:29:55.677

实际上，在`pause`您输入某些内容之前，有几种方法可以执行您的程序，其中一种方法是使用[getchar()](http://www.cplusplus.com/reference/cstdio/getchar/)（它是官方标准库的函数集的一部分`stdio.h`），它会产生相同的效果as `getch()`（此函数是[conio.h](http://en.wikipedia.org/wiki/Conio.h)库函数集的一部分，它不是官方库）。

如果您的问题是您希望避免`Enter`每次输入一个在您的问题中不太清楚的字符时都按），请阅读以下内容：[How to Avoid press enter with any getchar()](https://stackoverflow.com/questions/1798511/how-to-avoid-press-enter-with-any-getchar)

# cucumber - 我可以在场景挂钩中访问功能名称吗？

> ID：13685105
> 
> 赞同：1
> 
> 时间：2012-12-03T14:16:31.173
> 
> 标签：cucumber

我想在场景挂钩中获取功能名称。我怎么才能得到它？

场景挂钩中除了场景名称和异常消息之外还有哪些信息可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:56:15.820

您可以通过从场景对象访问功能来获取功能名称：

```
Before do |scenario|
    case scenario
        when Cucumber::Ast::Scenario
            p scenario.feature.title
        when Cucumber::Ast::OutlineTable::ExampleRow
            p scenario.scenario_outline.feature.title
    end
end 
```

请注意，您必须以不同的方式处理场景与场景大纲。

有关该方案的其他可用信息，最好的办法是查看文档 - 请参阅[http://rdoc.info/gems/cucumber/Cucumber/Ast/Scenario](http://rdoc.info/gems/cucumber/Cucumber/Ast/Scenario)。

# javascript - javascript错误消息显示字段为空并且不继续

> ID：13685110
> 
> 赞同：0
> 
> 时间：2012-12-03T14:16:50.267
> 
> 标签：javascript

JavaScript 代码：

```
function notEmpty(elem, helperMsg)
{
    if(elem.value.length == 0)
    {
        alert(helperMsg);
        elem.focus();
        return false;
    }

    return true;
} 
```

HTML：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" />
 <input type="hidden" name="on0" value="Name :" />Name :
 <input type="text" id="req1" name="os0" maxlength="200" style="width:150px;"/>
 <input type="submit" id="buynow" value="Proceed To Checkout" onclick="notEmpty(document.getElementById('req1'), 'Please Enter a Value')" style="width:150px; margin:15px 0px 17px 0px;" />
</form> 
```

以上是我的代码。当我单击*继续结帐*时，如果字段为空白，那么它会给出我想要的错误，但问题是当我在警报对话框中单击确定按钮时，它会重定向到表单的操作。

我想如果有人不填写档案，那么它将保持在同一位置。请帮帮我谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:27:42.123

您需要将该函数应用为`onsubmit`表单的处理程序：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" onsubmit="return notEmpty(document.getElementById('req1'), 'Please Enter a Value');" /> 
```

如果函数返回 false，则通过在其中*返回*您取消表单提交。

# sql - sql DB计算移动摘要

> ID：13685113
> 
> 赞同：0
> 
> 时间：2012-12-03T14:17:03.543
> 
> 标签：sql

我想计算移动摘要

```
总量：100
第一张收据：20
第二张收据：10

```

计算栏第一行是总金额与第一次收货的差值：100-20=80

计算列中的第二行是第一个计算行和第一个收据之间的差异：80-10=70

演示文稿应该显示receipt_amount，余额：

```
收据金额 | 平衡
20 | 80
10 | 70

```

我很乐意使用您的帮助谢谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:26:58.097

您并没有真正向我们提供有关您的表格及其结构的太多信息。

我假设有一个包含总金额的`orders`表和一个包含每个收据的收据表（作为正值）：

由于您也没有指定您的 DBMS，因此这是 ANSI SQL：

```
select sum(amount) over (order by receipt_nr) as running_sum
from (
    select total_amount as amount 
    from orders 
    where order_no = 1
    union all
    select -1 * receipt_amount
    from the_receipt_table
    where order_no = 
) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:30:01.580

首先-感谢您的回复。

我使用可以同时使用 SQL 和 ORACLE 语法的 Cache DB。

基本上，数据位于两个不同的表中，但我将它们放在一个连接查询中。几行具有不同的收据金额，每行（收据）具有相同的总金额。敌人示例：

Receipt_no Receipt_amount Total_amount 余额 1 20 100 80 1 10 100 70 1 30 100 40 2 20 50 30 2 10 50 20

因此，计算的方式应该是，在第一个收据中，差额计算是根据 total_amount 进行的，所有其他收据（在同一个receipt_no 中）都从余额中减少

谢谢！

# javascript - 如何仅显示一张图像并将其居中放置在滑块中？

> ID：13685115
> 
> 赞同：0
> 
> 时间：2012-12-03T14:17:29.697
> 
> 标签：javascript, jquery, html, css

我正在使用[iosslider](https://github.com/iosscripts/iosSlider)，但似乎不能一次在滑块中只显示一张图像。我也试图将显示的单个图像居中。这是我的 HTML：

HTML：

```
<div class = 'iosSlider'>
    <div class = 'slider'>
        <div class="item">
            <img src="/images/nature1.png" />
        </div>
        <div class="item">
            <img src="/images/nature2.png" />
        </div>
    </div>
</div> 
```

我的 CSS 看起来像这样：

```
.iosSlider {
/* required */
position: relative;
top: 0;
left: 0;
overflow: hidden;

width: 100%;
height: 300px;

border: solid 1px #ff0000;
}

/* slider */
.iosSlider .slider {
/* required */
width: 100%;
height: 100%;
}

/* slide */
.iosSlider .slider .slide {
/* required */
float: left;

width: 100%;
height: 100%;
}

.iosSlider .slider .item img {
width: auto;
height: 300px;

border: solid 1px #00ff00;  
} 
```

我基本上试图在滑块中一次只显示一个居中的图像。以下是我目前看到的。如您所见，还显示了右侧的图像。

知道如何用我的 CSS 做到这一点吗？

尝试调整窗口大小，您会看到我的问题。我在具有 320x480 分辨率的移动网页上运行它。

![在此处输入图像描述](../Images/b07ef1b04db308b7c2849cbbc7a77abd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:23:16.307

将图像宽度/高度设置为 100%，您也可以绝对定位它们：

```
 .iosSlider .slider .item img {
     width: 100%;
     height: 100%;
     position:absolute;
     top:0;
     left:0;
     border: solid 1px #00ff00;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:25:54.780

好的，请在此处使用 javascript 或 jQuery 循环浏览您的图像集。现在，当 jQuery 函数选择它时，将另一个类添加到居中或聚焦的图像中`<div class = 'iosSlider'> <div class = 'slider'> <div class="item current"> <img src="/images/nature1.png" /> </div> <div class="item"> <img src="/images/nature2.png" /> </div> </div> </div>`

并且当下一张图像获得焦点时，从第一张图像中删除此类“当前”并应用于第二张，依此类推。并为此类当前的链接`allign: center; margin-left:auto; margin-right:auto;`和其他必要的 css 编写 css。

# php - PHP数组合并和擦除值

> ID：13685116
> 
> 赞同：-1
> 
> 时间：2012-12-03T14:17:39.283
> 
> 标签：php, arrays

我需要合并一个多维数组，以便在合并后新值等于 0 而不是原始值。

```
$data = array(
  0 => array(
  '2009-05-12' => string '1' (length=1)
  '2010-12-07' => string '8' (length=1)
  '2010-12-02' => string '23' (length=2)
  '2010-11-11' => string '16' (length=2)
  '2010-09-01' => string '1' (length=1)
  '2010-08-24' => string '1' (length=1)
  '2010-06-30' => string '1' (length=1)
  ), 1 => array(
  '2010-09-08' => string '1' (length=1)
  '2011-11-28' => string '1' (length=1)
  '2011-09-28' => string '3' (length=1)
  '2011-09-21' => string '1' (length=1)
  '2012-04-10' => string '21' (length=2)
  '2012-04-02' => string '12' (length=2)
  ), 2 => array(
  '2010-12-15' => string '12' (length=2)
  '2010-12-08' => string '12' (length=2)
  '2010-11-28' => string '12' (length=2)
  '2010-06-30' => string '12' (length=2)
  '2010-05-04' => string '1' (length=1)
  '2011-12-21' => string '9' (length=1)
  '2012-01-05' => string '23' (length=2)
  ), 3 => array(
  '2010-12-14' => string '2' (length=1)
  '2010-12-10' => string '4' (length=1)
  '2010-11-29' => string '4' (length=1)
  '2011-10-04' => string '7' (length=1)
  '2011-09-27' => string '11' (length=2)
  '2012-01-06' => string '1' (length=1)
  )
); 
```

我成功地做的是创建一个循环来合并数组中的元素：

```
foreach($data as $index => $date){
    foreach($data as $index2 => $date2)
        $data[$index] = array_merge($data[$index2], $data[$index]);
} 
```

上面的脚本输出几乎正确的结果，但是合并后的值应该等于 0 而不是原始值。

上述脚本的输出合并了每个嵌套数组，使其包含所有剩余嵌套数组的值。

输出应该是：

```
$data = array(
0 => array(
'2009-05-12' => string '1' (length=1)
'2010-12-07' => string '8' (length=1)
'2010-12-02' => string '23' (length=2)
'2010-11-11' => string '16' (length=2)
'2010-09-01' => string '1' (length=1)
'2010-08-24' => string '1' (length=1)
'2010-06-30' => string '1' (length=1)
'2010-09-08' => string '0' (length=1)
'2011-11-28' => string '0' (length=1)
'2011-09-28' => string '0' (length=1)
'2011-09-21' => string '0' (length=1)
'2012-04-10' => string '0' (length=1)
'2012-04-02' => string '0' (length=1)
'2010-12-15' => string '0' (length=1)
'2010-12-08' => string '0' (length=1)
'2010-06-30' => string '0' (length=1)
'2010-05-04' => string '0' (length=1)
'2011-12-21' => string '0' (length=1)
'2012-01-05' => string '0' (length=1)
'2010-12-14' => string '0' (length=1)
'2010-12-10' => string '0' (length=1)
'2010-11-29' => string '0' (length=1)
'2011-10-04' => string '0' (length=1)
'2011-09-27' => string '0' (length=1)
'2012-01-06' => string '0' (length=1)
), 1 => array(
'2009-05-12' => string '0' (length=1)
'2010-12-07' => string '0' (length=1)
'2010-12-02' => string '0' (length=1)
'2010-11-11' => string '0' (length=1)
'2010-09-01' => string '0' (length=1)
'2010-08-24' => string '0' (length=1)
'2010-06-30' => string '0' (length=1)
'2010-09-08' => string '1' (length=1)
'2011-11-28' => string '1' (length=1)
'2011-09-28' => string '3' (length=1)
'2011-09-21' => string '1' (length=1)
'2012-04-10' => string '21' (length=2)
'2012-04-02' => string '12' (length=2)
'2010-12-15' => string '0' (length=1)
'2010-12-08' => string '0' (length=1)
'2010-06-30' => string '0' (length=1)
'2010-05-04' => string '0' (length=1)
'2011-12-21' => string '0' (length=1)
'2012-01-05' => string '0' (length=1)
'2010-12-14' => string '0' (length=1)
'2010-12-10' => string '0' (length=1)
'2010-11-29' => string '0' (length=1)
'2011-10-04' => string '0' (length=1)
'2011-09-27' => string '0' (length=1)
'2012-01-06' => string '0' (length=1)
), 2 => array(
'2009-05-12' => string '0' (length=1)
'2010-12-07' => string '0' (length=1)
'2010-12-02' => string '0' (length=1)
'2010-11-11' => string '0' (length=1)
'2010-09-01' => string '0' (length=1)
'2010-08-24' => string '0' (length=1)
'2010-06-30' => string '0' (length=1)
'2010-09-08' => string '0' (length=1)
'2011-09-28' => string '0' (length=1)
'2011-09-21' => string '0' (length=1)
'2012-04-10' => string '0' (length=1)
'2012-04-02' => string '0' (length=1)
'2010-12-15' => string '12' (length=2)
'2010-12-08' => string '12' (length=2)
'2010-11-28' => string '12' (length=2)
'2010-06-30' => string '12' (length=2)
'2010-05-04' => string '1' (length=1)
'2011-12-21' => string '9' (length=1)
'2012-01-05' => string '23' (length=2)
'2010-12-14' => string '0' (length=1)
'2010-12-10' => string '0' (length=1)
'2010-11-29' => string '0' (length=1)
'2011-10-04' => string '0' (length=1)
'2011-09-27' => string '0' (length=1)
'2012-01-06' => string '0' (length=1)
), 3 => array(
'2009-05-12' => string '0' (length=1)
'2010-12-07' => string '0' (length=1)
'2010-12-02' => string '0' (length=1)
'2010-11-11' => string '0' (length=1)
'2010-09-01' => string '0' (length=1)
'2010-08-24' => string '0' (length=1)
'2010-06-30' => string '0' (length=1)
'2010-09-08' => string '0' (length=1)
'2011-09-28' => string '0' (length=1)
'2011-09-21' => string '0' (length=1)
'2012-04-10' => string '0' (length=1)
'2012-04-02' => string '0' (length=1)
'2010-12-15' => string '0' (length=1)
'2010-12-08' => string '0' (length=1)
'2010-11-28' => string '0' (length=1)
'2010-06-30' => string '0' (length=1)
'2010-05-04' => string '0' (length=1)
'2011-12-21' => string '0' (length=1)
'2012-01-05' => string '0' (length=2)
'2010-12-14' => string '2' (length=1)
'2010-12-10' => string '4' (length=1)
'2010-11-29' => string '4' (length=1)
'2011-10-04' => string '7' (length=1)
'2011-09-27' => string '11' (length=2)
'2012-01-06' => string '1' (length=1)
) 
```

);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:50:58.433

只是不要使用array_merge。

```
foreach($data as $index => $v){
    foreach($data as $data2){
       foreach($data2 as $date=> $val){
          if(!array_key_exist($date,$data[$index])){
            $data[$index][$date] = 0;
          }
       } 
    }
} 
```

# php - 使用 PHP 的带有 o_auth 请求（速率限制 API）的时间线视图的 Twitter 小部件

> ID：13685117
> 
> 赞同：0
> 
> 时间：2012-12-03T14:17:42.450
> 
> 标签：php, twitter, twitter-oauth

我正在为我的网站使用 twitter 小部件。[这](http://twitter.com/javascripts/widgets/widget.js)是我正在使用的当前 js 文件。我面临超过 150 个请求的请求超时问题，这是由于文档中未经身份**验证的请求**的速率限制 API 。

现在我尝试通过文档查找如何发送经过身份验证的请求，即我必须添加一个**o_auth 参数**，但没有成功。**我怎样才能实现它？**

我还想知道是否存在一个小部件，我可以使用它来**更改推文文本的颜色和推文的背景**。我希望用户对推文框进行**自定义设置**。他们的东西是否存在或我需要构建它？

我在服务器端使用**PHP**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:24:05.543

试试[http://twitterforweb.com](http://twitterforweb.com)

如果您仔细查看嵌入代码，则有“设置”参数，您可以像在项目站点上一样编辑它:)

# c# - 使用 WPF 验证命令

> ID：13685124
> 
> 赞同：3
> 
> 时间：2012-12-03T14:18:21.333
> 
> 标签：c#, wpf, entity-framework, data-binding, command

我是 WPF 和 MVVM 的新手，所以请多多包涵。

基本上，我正在创建一个应用程序，使用户能够将他们的组织详细信息输入数据库。

在我正在创建的 WPF 应用程序中，我有一个`View Model`包含`properties`,`commands`和`entity framework`方法（我知道这不是使用 MVVM 的正确方法，但我正在慢慢学习如何实现它）。

在我的一个视图中，它是一个选项卡控件，允许用户在数据库中输入不同的组织详细信息，然后在另一个视图中，我有一个数据网格来显示他们输入的内容，以便用户在何时更新内容需要。

这引出了我的问题。到目前为止，我已经验证了我的命令，以便当某些字段为空时，按钮将不会处于活动状态，但一旦输入，它们就会被激活。像这样；

```
 private ICommand showAddCommand;
    public ICommand ShowAddCommand
    {
        get
        {
            if (this.showAddCommand == null)
            {
                this.showAddCommand = new RelayCommand(this.SaveFormExecute, this.SaveFormCanExecute);//i => this.InsertOrganisation()
            }

            return this.showAddCommand;
        }
    }

    private bool SaveFormCanExecute()
    {
        return !string.IsNullOrEmpty(OrganisationName) && !string.IsNullOrEmpty(Address) && !string.IsNullOrEmpty(Country) && !string.IsNullOrEmpty(Postcode)
            && !string.IsNullOrEmpty(PhoneNumber) && !string.IsNullOrEmpty(MobileNumber) && !string.IsNullOrEmpty(PracticeStructure) && !string.IsNullOrEmpty(PracticeType) && !string.IsNullOrEmpty(RegistrationNumber); 
    }

    private void SaveFormExecute()
    {
        InsertOrganisations();
    }

  Xaml:
  <Button Content="Save" Grid.Column="1" Grid.Row="18" x:Name="btnSave" VerticalAlignment="Bottom" Width="75" Command="{Binding ShowAddCommand}"/> 
```

但我希望实现的是，一旦用户在 1 个组织中进入数据库，则该命令不会完全激活并防止用户意外进入另一个组织。目的是只允许添加 1 个组织，不多也不少。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:10:37.450

两件事情。1)，我建议编辑您的 RelayCommand 以采取如下操作：

```
 private Action<object> _execute;
    private Predicate<object> _canExecute;

    public RelayCommand(Action<object> execute, Predicate<object> canExecute)
    {
        if (execute == null)
            throw new ArgumentNullException("execute");
        _execute = execute;
        _canExecute = canExecute;
    }

    //[DebuggerStepThrough]
    public bool CanExecute(object parameter)
    {
        return _canExecute == null ? true : _canExecute(parameter);
    } 
```

这可能对您的直接问题没有帮助，但它会使您的代码更可重用，因为您将能够将视图中的某些元素绑定为 ICommand 中的参数，用于 CanExecute 测试和执行（或者如果您不需要这个，只需将 null 作为 ICommand.Execute 中的对象参数传递，并且不要将任何内容绑定到视图中的 CommandParameter）

此外，在您的 RelayCommand 中，确保您覆盖 CanExecuteChanged，如下所示：

```
 public override event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    } 
```

这将触发您的 ICommand 在用户进行更改时重新检查 CanExecute（并且很可能是您遗漏的部分）。

最后，一旦完成，只需将您的条件包含在 CanExecute 中（来自 CommandParameter 或来自 VM 中的某些内容）。

我希望这有帮助。

# sql-server - 在 LINQ 中选择一个奇怪的值 @p__linq__0

> ID：13685127
> 
> 赞同：12
> 
> 时间：2012-12-03T14:18:35.390
> 
> 标签：sql-server, entity-framework, c#-4.0, linq-to-sql

我在 LINQ 中有这个选择

```
 public List<EquipamentoNoDiscovery> GetEquipamentosNoDiscovery(int imID)

var lista = (from ma in ctx.macaddress
                         join m in ctx.mac on
                       ma.address_mac equals m.mac_id into g1
                         from m in g1.DefaultIfEmpty()

                         join ml in ctx.mac_link on
                         m.mac_id equals ml.mac_id into g2
                         from ml in g2.DefaultIfEmpty()

                         join im in ctx.immobile on
                         ml.link_id equals im.immobile_id into g3
                         from im in g3.DefaultIfEmpty()

                         join en in ctx.enterprise on
                          im.enterprise_id equals en.enterprise_id into g4
                         from en in g4.DefaultIfEmpty()

                         join pl in ctx.port_link on
                        ma.address_id equals pl.address_id into g5
                         from pl in g5.DefaultIfEmpty()

                         join p in ctx.port on
                         new { pl.sw_id, pl.port_id } equals new { p.sw_id, p.port_id }

                         join s in ctx.switch_lan on
                        pl.sw_id equals s.sw_id into g6
                         from s in g6.DefaultIfEmpty()
                         where pl.address_id == imID
                         select new
                         {
                             Regiao = en.enterprise_u_name,
                             Predio = im.immobile_u_name,
                             Equipamento = m.host,
                             TipoPlaca = m.mac_type,
                             Mac = ma.address_mac,
                             Ip_ma = ma.address_ip,
                             Ip_m = m.ip_address,
                             Comunidade = s.sw_community,
                             IpSwitch = s.sw_ip,
                             PortaIndex = p.port_index,
                             PortaNome = p.port_name
                         });

            ObjectQuery oQuery = (ObjectQuery)lista;
            string cmdSQL = oQuery.ToTraceString(); 
```

当我使用命令 oQuery.ToTraceString() 时，我可以看到这个“pl.address_id == imID”变成了“WHERE [Extent6].[address_id] = @p_linq *_0* ”。然后我的选择总是返回空，如果在 SQL 命令中我将值 @p_ *linq* _0 更改为一个数字，它工作正常。请问有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T14:22:16.447

这只是一个来自这个`where`子句的查询参数。

```
where pl.address_id == imID 
```

您的日志还应该显示为该参数传递的值，该值应该是`imID`. 检查该值 - 它可能不是您所期望的。

# pcre - 构造一个简单的正则表达式，只有 +、*、() 和 |

> ID：13685129
> 
> 赞同：0
> 
> 时间：2012-12-03T14:18:47.763
> 
> 标签：pcre

让我们`{a,b,c}`成为字母表。我必须构造一个匹配这个字母表上任何输入的正则表达式，如果`aa`出现在输入中，那么`cc`也必须出现（在输入中的某个地方）。

没有向前看，没有向后看，没有反向引用，只需使用量词 + 和 *，通过括号分组和通过`|`.

问题是我不知道如何解决这个问题。例如，这些输入必须匹配：

*   阿爸
*   密件抄送
*   支链氨基酸
*   "" (空输入)
*   bccbaa
*   ccbaabb

以下内容不得匹配：

*   啊
*   abaaab
*   咩
*   民航局

我怎样才能构建这样的正则表达式，只使用这些工具？

**更新**

我想过

```
((cc(b|c)*aa)|(aa(b|c)*cc))+|(ab|ba|ca|ca|bb|bc|cc)* 
```

你怎么看，这是否符合规范？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:11:44.783

```
(b|c|a(b|c))*(a|)|(a|b|c)*(aa(a|b|c)*cc|cc(a|b|c)*aa)(a|b|c)* 
```

将匹配：

*   任意数量的`b`s 或`c`s（甚至为零），或`a`if 后跟一个`b`or `c`，再加上一个可选的无伴奏`a`结尾。这些规则共同确保两个`a`s 始终由`b`or分隔`c`，并且还将匹配空字符串和单个字符。
*   一个字符串，在某处包含一个 aa，最后是一个 cc
*   一个字符串，在某处包含一个 cc，最后跟一个 aa

（作为参考，如果您需要每个都`aa`与 a 匹配`cc`，那您有点搞砸了。这不再是常规的。像这样的字符串需要计算到目前为止已经看到`ccccaaaa`了多少s，而 FSA 无法计算。）`cc`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:36:07.153

我想，对于给定的一组参数来说，这更简单：

```
/^((b|c|ab|ac|a$)*|(a|b|c)*(cc(a|b|c)*aa|aa(a|b|c)*cc)(a|b|c)*)$/; 
```

说明：显然你需要在这里匹配三种情况：

*   整个字符串不包含“aa”序列。此条件用以下模式表示：

`/^(b|c|ab|ac|a$)*$/`

...即：“匹配字符串末尾的任意数量的`b`和`c`符号`ab`、、`ac`序列或单个项目的任意组合”。`a`

*   整个字符串确实包含'aa'序列，后跟（某处）'cc'序列 - 它仍然`[abc]`仅由范围组成：

    `/^(a|b|c)* aa(a|b|c)* cc(a|b|c)* $/`

（不知何故，即使在该部分中，没有空格`*`也被视为斜体文本标记`<code>`；您显然不需要在正则表达式中使用它）

*   整个字符串确实包含 'aa' 序列，前面（某处）有 'cc' 序列 - 它仍然`[abc]`仅由范围组成：

    `/^(a|b|c)* cc(a|b|c)* aa(a|b|c)* $/`

现在你有了正则表达式的三个部分，我想很容易将它组合成简单的模式。

# angularjs - 如何在 AngularJS 中重复元素？

> ID：13685138
> 
> 赞同：1
> 
> 时间：2012-12-03T14:19:08.733
> 
> 标签：angularjs

我知道我可以`ng-repeat`用来迭代集合。我如何迭代一个范围。例如，类似：

```
<div class='aoeu' ng-repeat='count in range(1,5)'>
  <div id='{{count}}'></div>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:44:40.073

Javascript 中没有 range() 函数，但您可以创建一个返回适合您需要的值数组的函数，或者使用 JS 库来实现该效果。我会使用[underscore.js](http://underscorejs.org/)，非常简单：

```
<div class='aoeu' ng-repeat='count in _.range(1,5)'>
  <div id='{{count}}'></div>
</div> 
```

当然，为了让您能够在 Angular 应用程序（指令等）中使用下划线，您需要将其包含在您的作用域中。在您的项目中包含 underscore.js，并在您的主控制器中执行`$rootScope._ = _`

这样，角度中的任何控制器或指令都可以识别 $scope._ （引用下划线库），并且上面的代码片段将起作用！（如果您只需要创建任意范围，您可以自己创建范围函数 - 并且“制作”我的意思是复制数百万个可用示例中的任何一个。[这是一个](http://yesudeep.wordpress.com/2009/07/25/implementing-a-pythonic-range-function-in-javascript-2/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:57:31.253

下划线似乎是最有表现力的，但你可能想看看这个答案：[AngularJS ng-options create range](https://stackoverflow.com/questions/11160513/angularjs-ng-options-create-range/11161353#11161353)

它使用过滤器来创建一个数组。这是我的版本

```
var App = angular.module('app', []);
App.filter('range', function() {
  return function(arr, lower, upper) {
    for (var i = lower; i <= upper; i++){
      arr.push(i);
    }
    return arr;
  };
});​ 
```

您会使用如下：

```
<li ng-repeat="n in [] | range:5:10"> {{n}} </li> 
```

和 JSFiddle [http://jsfiddle.net/jaimem/hKvNc/4/](http://jsfiddle.net/jaimem/hKvNc/4/)

pd：如果您更喜欢`parseInt`将字符串转换为整数，请不要忘记传递`radix`. 在解析`min`和`max`.

# jquery - 在优化以下 jquery 代码方面需要帮助

> ID：13685141
> 
> 赞同：2
> 
> 时间：2012-12-03T14:19:23.080
> 
> 标签：jquery

有没有办法优化下面的代码行？

```
 $('#state').children('option:not(:first)').remove();
        $('#city').children('option:not(:first)').remove();
        $('#branch').children('option:not(:first)').remove();
        $('#branchAddress').children('option:not(:first)').remove(); 
```

我尝试用逗号分隔添加所有字段，但它不起作用。

请帮助优化上述代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:30:35.103

我会尝试类似的东西：

```
$('#state, #city, #branch, #branchAddress')
    .each(function(i,item){$('option:not(:first)',$(item)).remove();}); 
```

或像这样：

```
$('#state, #city, #branch, #branchAddress').find('option:not(:first)').remove(); 
```

最后（但我不会称之为优化 ;-)

```
$('#state option:not(:first), #city option:not(:first), #branch option:not(:first), #branchAddress option:not(:first)').remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:22:39.057

尝试

```
$('#branchAddress #state #city #branchAddress').children('option:not(:first)').remove(); 
```

选择器中可能有多个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:23:15.700

将相同的类添加到以上所有内容并引用它一次，而不是多次引用 ID

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:23:33.857

以下应该做（另见[jQuery 多选择器 api](http://api.jquery.com/multiple-selector/)）

```
$('#state, #city, #branch, #branchAddress').children('option:not(:first)').remove(); 
```

# xcode - 将 ZXingObjC 框架添加到项目中

> ID：13685142
> 
> 赞同：6
> 
> 时间：2012-12-03T14:19:26.820
> 
> 标签：xcode, frameworks, add, zxing

既然 ZXingObjC 可以用作框架，我一生都无法弄清楚如何将它添加到我的项目中。我按照 git 页面[https://github.com/TheLevelUp/ZXingObjC](https://github.com/TheLevelUp/ZXingObjC)上的说明进行操作，但是当我添加`#import <ZXingObjC/ZXingObjC.h>`xcode 时找不到该文件。然而，他们提供的示例项目编译得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T11:07:19.277

Current answer would be [http://cocoapods.org](http://cocoapods.org). Put `pod 'ZXingObjC'` into your `podfile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:35:22.473

**下面的文件在库头文件中不存在。**

```
#import <ZXingObjC/ZXingObjC.h> 
```

**还在Build Settings的****Search Header Path**中设置库头文件路径。并根据您的要求导入文件。

# iphone - 是否有 AVAudioPlayer 的开源替代品，它在音频播放真正开始时提供回调？

> ID：13685145
> 
> 赞同：1
> 
> 时间：2012-12-03T14:19:43.303
> 
> 标签：iphone, ios, audio, avaudioplayer, avplayer

我正在制作一个类似于翻书动画的应用程序。它使用 AVAudioPlayer 播放音轨并启动动画，这些动画必须在音频开始的同时开始。公差约为 +/- 100 毫秒。

我发现 AVPlayer 作为提供回调的替代方案，但使用起来非常复杂。

# php - Memcached lib 故障转移，如 memcache lib

> ID：13685150
> 
> 赞同：0
> 
> 时间：2012-12-03T14:20:00.987
> 
> 标签：php, memcached

我正在使用 php memcached（不是 memcache），但我遇到了故障转移问题。

例如，我有两台 memcached 服务器，但是当其中一台服务器崩溃时，我希望 memcached 继续运行只有一台。

使用 lib memcache 可以工作，但不适用于 memcached。我试过类似的东西

```
<?php

$m = new Memcached();
$m->setOption(Memcached::OPT_DISTRIBUTION, Memcached::DISTRIBUTION_CONSISTENT);

$m->addServer('server1', 11211);
$m->addServer('server2', 11211);

var_dump($m->set('1234','test'));
var_dump($m->get('1234'));

$m->flush();

$m = new Memcache();

$m->addServer('server1', 11211);
$m->addServer('server2', 11211);

var_dump($m->set('1234','test'));
var_dump($m->get('1234'));

$m->flush();

?> 
```

当两个 memcached 都启动时：

```
bool(true)
string(4) "test"
bool(true)
string(4) "test" 
```

但是当我停止 server2 时：

```
bool(false)
bool(false)

Notice: MemcachePool::set(): Server server2 (tcp 11211, udp 0) failed with: Connection refused (111) in /root/memcached.php on line 22

Call Stack:
    0.0013     637584   1\. {main}() /root/memcached.php:0
    0.0220     653104   2\. MemcachePool->set() /root/memcached.php:22

bool(true)
string(4) "test" 
```

在 memcached 上，IO 被直接阻塞并返回 false，而在 memcache 上，有一个通知，但 IO 工作。

PS：我试过了`setOption(Memcached::OPT_DISTRIBUTION,Memcached::DISTRIBUTION_CONSISTENT);`，还是不行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:30:04.980

选项`$m->setOption(Memcached::OPT_LIBKETAMA_COMPATIBLE, true);`允许:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T14:43:56.870

您缺少一种选择：

```
$m->setOption(Memcached::OPT_DISTRIBUTION,Memcached::DISTRIBUTION_CONSISTENT);
$m->setOption(Memcached::OPT_REMOVE_FAILED_SERVERS, true); 
```

否则，«set()» 调用将导致 «SERVER HAS FAILED AND IS DISABLED UNTIL TIMED RETRY»，但由于服务器未从列表中删除，因此同一服务器上的每个 set() 都会失败。

请注意，使用此配置时，当您在坏服务器上 set() 时，它会被删除，并且数据会在好服务器上正确 set()（坏服务器的密钥分布在所有剩余的服务器上）。

# php - PHP，替换所有出现的 page=number

> ID：13685155
> 
> 赞同：0
> 
> 时间：2012-12-03T14:20:37.213
> 
> 标签：php, regex, preg-replace, query-string, str-replace

我需要从字符串中删除所有出现的 &page=* ，其中 * 是一个数字。我将如何使用 regexp(?)

到目前为止，我一直在使用，

```
$this->targetpage = str_replace('&page='.$this->page, '', $_SERVER['REQUEST_URI']);
echo .$this->targetpage; 
```

还有一个好处是不必包含 &，因为 page=something 也可以在“？”之后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:23:20.753

```
$this->targetpage = preg_replace('~((?<=\?)page=\d+&?|&page=\d+)~i', '', $_SERVER['REQUEST_URI']); 
```

# python - Python match 仅捕获第一组

> ID：13685157
> 
> 赞同：0
> 
> 时间：2012-12-03T14:20:44.297
> 
> 标签：python, regex, match

我正在尝试使用 python 哟匹配字符串。

```
>> self._regexs = re.compile("(?P<g0>.*AMD$)|(?P<g1>.*AMD$)|(?P<g2>.*AMD$)|(?P<g3>.*)", re.DEBUG)
>> m = self._regexs.match("AMD")
>> print m.groups()
('AMD', None, None, None) 
```

我原以为 m.groups() 会显示：

```
>> print m.groups()
('AMD', 'AMD', 'AMD', None) 
```

但显然我做错了什么。我想知道为什么这个解决方案不起作用以及如何更改它，以便我得到我正在寻找的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:29:30.920

正则表达式的作用`greedy`在于它将接受第一个匹配项。在您的示例中，这是第一个捕获组，具有您的特定输入。替换表达式（由 表示`|`）将始终匹配样本字符串满足的第一个替换。

看起来您正在尝试创建一个无法完成的正则表达式类型，因为它需要对 's 之间的每个不同的不同子正则表达式进行`switch`回溯。使用单个正则表达式无法实现您希望达到的结果。`case``|`

也可以看看：

*   [正则表达式文档](http://docs.python.org/2/library/re.html)
*   [正则表达式引擎内部介绍](http://www.regular-expressions.info/engine.html)

# java - 为什么 Java 允许类型不安全的数组赋值？

> ID：13685158
> 
> 赞同：16
> 
> 时间：2012-12-03T14:20:46.400
> 
> 标签：java, arrays, runtime-error, declaration, type-safety

一般来说，Java 可以被认为是一种类型安全的语言。我知道泛型存在一些缺陷，但我最近遇到了一个以前从未遇到过的问题。分解它：

```
Object[] objects = new Integer[10];
objects[0] = "Hello World"; 
```

不会像预期的那样导致编译时错误。我会假设 Array of 的声明`Object`将不允许指向其他东西的数组。在泛型中，我不允许做出如此奇怪的事情，例如：

```
ArrayList<Object> objs = new ArrayList<Integer> 
```

如果我试图欺骗 Java 做某事

```
ArrayList<? extends Object> objects = new ArrayList<Integer> 
```

我可以声明它，但我只能添加类型的对象`null`。

为什么 Java 不阻止声明这种怪异的数组？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T14:50:58.747

首先，我应该指出这是类型安全的。

```
Object[] objects = new Integer[10];
objects[0] = "Hello World"; 
```

因为会抛出异常。（它不是*静态*类型安全的......但这完全是一个不同的陈述。）

Java 允许这样做的原因是历史性的。在 Java 5 之前，Java 不支持任何形式的泛型。Gosling 曾说过，如果他们有时间弄清楚泛型并将其合并到 Java 1.0 中，他们就会这样做。

不幸的是，他们没有。但是他们仍然希望能够编写具有以下签名的通用排序方法之类的东西：

```
 void sort(Object[] array, Comparator comp) ... 
```

为了使这个方法适用于任何类型的对象数组（没有泛型），有必要使数组协变；即，使传递 a `String[]`or`Integer[]`作为形式类型为 的参数合法`Object[]`。如果他们没有这样做，您将不得不将 复制`String[]`到`Object[]`，对其进行排序，然后将其复制回来。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T14:34:51.527

我认为除了“遗留设计”之外没有其他答案。（我承认这是说“因为”的一种奇特方式。）您几乎*需要*能够以某种方式完成与您展示的最后一项任务相同的任务。（否则，假设 Java 1.4 之前的语言特性，您将不得不使用手动向上/向下转换来制作大量副本）

在 Java 1 中，当数组的类型语义基本上是一成不变的时，泛型不可用，甚至在很长一段时间内都没有考虑到泛型。所以没有可用的机制来表达使这个构造类型安全所需的高阶类型约束——Gosling（IIRC 是简单的粉丝）认为解决编译时类型安全的这种边缘情况并不值得复杂语言使用任何可用的解决方案。或者没有在运行时进行检查而烦恼，甚至没有寻找解决方案。（归根结底，语言设计决策至少在某种程度上是任意的，只有一个人可以肯定地回答这个问题。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-03T14:29:37.207

“因为它必须”。

为了详细说明，请考虑以下示例：

```
Object[] objects = null;
if (something) {
    objects = new Integer[10];
} else {
    objects = new String[10];
} 
```

现在，Java 编译器如何知道允许哪些分配以及拒绝哪些分配？它不能。编译时类型是 Object，因此编译器允许您将任何 Object 放入数组中，这仅仅是因为它不知道数组的运行时类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T14:29:01.620

实际上，在数组的情况下，当您添加错误类型的元素时，您会在运行时遇到一个名为**ArrayStoreException的异常，在这种情况下为****String**。在泛型的情况下没有这样的**例外**。它是因为`very same reason`您不允许添加除对象之外的任何内容，因为您可能只是在列表中添加了错误的类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T17:01:05.983

我在谷歌搜索时发现了一个[讨论](http://c2.com/cgi/wiki?JavaArraysBreakTypeSafety)

我发现：

> 首先，数组不会破坏类型安全。如果他们这样做了，那么在运行时向上转换一个数组就不会失败。它们使编译器无法证明程序类型安全，因此检查被推迟到运行时。
> 
> 我认为这里发生了混淆，因为一方面，因为 String 是一个 Object 一个 Strings 数组显然是一个 Objects 数组，而另一方面它显然不是。答案在于数组的可变性。
> 
> 如果数组是不可变的，那么将 String[] 视为 Object[] 是安全的，因为不可变的 String[] 总是与不可变的 Object[] 完全相同。
> 
> 另一方面，如果数组是可变的，那么将 String[] 视为 Object[] 通常是不安全的。
> 
> 上述链接中描述的“通配符”技术正是 CommonLisp 多年来一直在做的事情。

```
(deftype StringArray? () (array String)) ; This is the type of arrays of String 
(deftype ObjectArray? () (array Object)) ; This is the type of arrays of Object 
(subtypep StringArray? ObjectArray?)      ; Is StringArray? a subtype of ObjectArray?? false, true                               ; No, it isn't. (false: it isn't, true: I'm ure) 
(deftype AnyArray? () (array *))         ; This is the type of arrays of anything (subtypep StringArray? AnyArray?)         ; Is StringArray? a subtype of AnyArray??   true, true                                ; Yes, it is. (true: it is, true: I'm sure) 
```

# mercurial - 让 TortoiseHG 使用我的 Python 安装

> ID：13685159
> 
> 赞同：0
> 
> 时间：2012-12-03T14:20:48.297
> 
> 标签：mercurial, mercurial-hook

我为 Mercurial 创建了一些使用一些外部库（即 jira-python）的 python 钩子。在 Linux 中，我使用 pip 安装软件包。然而，在 Windows 中，Mercurial 附带了 Python 的捆绑版本。当我运行它们时，我的钩子失败了，因为没有安装外部包。

我想让 Mercurial / TortoiseHG 使用我的 Python 安装，这样我就可以控制它的环境。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:36:22.007

您可以为 Python 安装 Mercurial 包：

*   [Mercurial 2.4 Python 2.7 包 - x86 Windows](http://mercurial.selenic.com/release/windows/mercurial-2.4.win32-py2.7.exe)
*   [Mercurial 2.4 Python 2.7 包 - x64 Windows](http://mercurial.selenic.com/release/windows/mercurial-2.4.win-amd64-py2.7.exe)

对于 TortoiseHG 特定的详细信息，我可以建议检查 %TortoiseHg%\library.zip - 它包含 TortoiseHG|Mercurial Python 模块所需的（一些？全部？），您可以（尝试）扩展该列表：“在哪里 Python TortoiseHG 的路径？” 主题史蒂夫博尔霍[写道](http://www.mail-archive.com/tortoisehg-discuss@lists.sourceforge.net/msg00933.html)：

> TortoiseHg 的整个 python 环境都包含在与它一起打包的 library.zip 中。
> 
> 我怀疑您可以做的是在您的评论板扩展文件的顶部添加一两行，以在尝试导入 simplejson 之前将您安装的 python 路径添加到 sys.path

将 python 路径添加到 sys.path 的提示也适用于您

**来自转换扩展页面的推荐**

> 您需要使用安装在独立 Python 之上的 Mercurial，并且您可能还需要执行类似的操作
> 
> `set HG=python c:\Python25\Scripts\hg`
> 
> 如果您还安装了默认的 Win32 二进制文件，则覆盖默认的 Win32 二进制文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:46:49.853

我通过 pip 安装了 Mercurial，也有 TortoiseHg。我的系统路径首先选择 Python 版本。

我重命名`C:\Program Files\TortoiseHg\hg.exe`为别的东西，然后运行 ​​TortoiseHg。一切仍然有效，但我没有很好的方法来验证它是否符合您的要求。你可以试一试。

# css - mixin中的SCSS多个属性

> ID：13685168
> 
> 赞同：4
> 
> 时间：2012-12-03T14:21:24.993
> 
> 标签：css, sass

看看下面的例子：

```
@mixin placeholder ($color) {
  &.-moz-placeholder {
    color: $color;
  }

  &:-ms-placeholder {
    color: $color;
  }
}

@include placeholder(#999); 
```

但相反，我想插入多个属性，而不仅仅是占位符样式中的颜色。像这样：

```
@mixin placeholder ($properties) {
  &.-moz-placeholder {
    $properties;
  }

  &:-ms-placeholder {
    $properties;
  }
}

@include placeholder(color: #999, text-shadow: 1px 0px 0px #000); 
```

这可能吗，如果可以，怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T15:16:03.933

正如@dave 所建议的，您可以使用 Sass 的`@content`指令来完成此操作。这是使用该语法的示例：

```
@mixin placeholder {
  &.-moz-placeholder {
    @content;
  }

  &:-ms-placeholder {
    @content;
  }
}

@include placeholder {
  color: #999;
  text-shadow: 1px 0px 0px #000;
}; 
```

请注意，要传递内容块，请使用花括号而不是括号。您可以在[SASS 文档](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixin-content)中阅读更多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:27:11.327

你在寻找“将内容块传递给 Mixin”吗？

[http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixin-content](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#mixin-content)

# java - Spring集成消息处理链的用法？

> ID：13685169
> 
> 赞同：6
> 
> 时间：2012-12-03T14:21:27.367
> 
> 标签：java, spring, spring-integration

我是春季集成的新手。我的配置文件中配置了几个频道，如下所示。

```
<int:channel id="channelOne" />
<int:channel id="channelTwo" />
<int:channel id="channelThree" /> 
```

我可以在这种情况下使用 MessageHandlerChain（[http://static.springsource.org/spring-integration/docs/2.0.0.RC1/reference/html/chain.html ）吗？](http://static.springsource.org/spring-integration/docs/2.0.0.RC1/reference/html/chain.html)

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T15:32:41.707

当端点通过直接通道连接时，链可以方便地简化配置：

代替

```
<int:channel id="foo1"/>

<int:service-activator input-channel="foo1" output-channel="foo2" ref="s1" />

<int:channel id="foo2"/>

<int:service-activator input-channel="foo2" output-channel="foo3" ref="s2/>

<int:channel id="foo3"/>

<int:service-activator input-channel="foo3" output-channel="foo4" ref="s3" />

<int:channel id="foo4"/> 
```

您可以使用

```
<int:channel id="foo1"/>

<int:chain input-channel="foo1" output-channel="foo4">    
    <int:service-activator ref="s1" />
    <int:service-activator ref="s2" />
    <int:service-activator ref="s3" />
</int:chain>

<int:channel id="foo4"/> 
```

请使用[当前文档](http://docs.spring.io/spring-integration/reference/html/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:45:22.083

我会看看通道拦截器（[http://static.springsource.org/spring-integration/docs/latest-ga/reference/htmlsingle/#channel-interceptors](http://static.springsource.org/spring-integration/docs/2.0.0.RELEASE/reference/htmlsingle/#channel-interceptors)）。这些将允许您在消息到达您的输入通道之前做一些事情，我假设它是 channelOne。您可以根据用例记录消息或引发异常等。

```
<channel id="channelOne">
    <interceptors>
        <ref bean="yourValidatingInterceptor"/>
    </interceptors>
</channel>

<beans:bean id="yourValidatingInterceptor" class="com.yourcompany.YourValidatingInterceptor"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-05T10:59:08.060

当一组处理程序需要以线性方式连接时，我们使用**消息处理程序链。**

```
<int:chain input-channel="marketDataInputChannel"> 
    <int:splitter ref="marketDataSplitter"/> 
    <int:service-activator ref="marketFieldServiceActivator"/> 
    <int:aggregator ref="marketDataAggregator"/> 
    <int:service-activator ref="marketItemServiceActivator"/> 
</int:chain> 
```

在上面的例子中，channel **splitter**的输出数据将是 service-activator 的输入，而**service-activator**的输出将是**aggregator**的输入......
希望这个解释能帮助你理解**`<int:chain />`**

# asp.net-mvc-3 - 调用多个操作方法（使用 ajax）并在新选项卡中显示 last 的结果

> ID：13685172
> 
> 赞同：1
> 
> 时间：2012-12-03T14:21:29.900
> 
> 标签：asp.net-mvc-3, jquery

我有一个表单，我需要一个接一个地调用两个操作方法。流程就是这样。

*   首先，我检查用户是否输入了先决条件数据。如果不是，那么我会显示一条消息，用户需要先输入数据。
*   如果输入了所有先决条件数据，我将调用一个返回数据的操作方法。如果没有返回数据，那么我会在同一页面上显示“未找到数据”消息。
*   如果返回数据，那么我调用另一个控制器中存在的另一个操作方法，该方法在新选项卡中返回包含所有数据的视图。

风景：

```
@using (Ajax.BeginForm("Index", "OrderListItems", null, new AjaxOptions { OnBegin = "verifyRequiredData"}, new { @id = "formCreateOrderListReport", @target = "_blank" }))
{
    //Contains controls and a button 
} 
```

此视图中的脚本：

```
 function verifyRequiredData() {            
            if ($("#dtScheduledDate").val() == "") {

                $('#dvValidationSummary').html("");
                var errorMessage = "";

                errorMessage = "<span>Please correct the following errors:</span><ul>";
                errorMessage += "<li>Please enter Scheduled date</li>";

                $('#dvValidationSummary').append(errorMessage);
                $('#dvValidationSummary').removeClass('validation-summary-valid').addClass('validation-summary-errors');

                return false;
            }
            else {
                $('#dvValidationSummary').addClass('validation-summary-valid').removeClass('validation-summary-errors');
                $('#dvValidationSummary').html("");

                $.ajax({
                    type: "GET",
                    url: '@Url.Action("GetOrderListReport", "OrderList")',                    
                    data: {
                        ScheduledDate: $("#dtScheduledDate").val(),
                        Crews: $('#selAddCrewMembers').val(),
                        Priorities: $('#selPriority').val(),
                        ServiceTypes: $('#selServiceTypes').val(),
                        IsMeterInfoRequired: $('#chkPrintMeterInfo').val()
                    },
                    cache: false,                    
                    success: function (data) {
                        debugger;
                        if (data !== "No data found") {
                            //var newUrl = '@Url.Action("Index", "OrderListItems")';
                            //window.open(newUrl, '_blank');
                            return true;
                        } else {
                            //Show message "No data found"
                            return false;
                        }
                    }
                });
                return false;
            }
        } 
```

“OrderList”控制器中的“GetOrderListReport”操作方法：

```
 public ActionResult GetOrderListReport(OrderListModel model)
 {
     var contract = new OrderReportDrilldownParamDataContract
     {             
         ScheduledDate = model.ScheduledDate
         //Setting other properties as well           
     };
     var result = OrderDataModel.GetOrderList(contract);

     if (string.IsNullOrWhiteSpace(result) || string.IsNullOrEmpty(result))
     {
         return Json("No data found", JsonRequestBehavior.AllowGet);             
     }

     var deserializedData = SO.Core.ExtensionMethods.DeserializeObjectFromJson<OrderReportDrilldownDataContract>(result);

     // send it to index method for list
     TempData["DataContract"] = deserializedData;
     return Json(deserializedData, JsonRequestBehavior.AllowGet);
    } 
```

OrderListItems Controller 中存在的最后一个操作方法，其结果需要显示在新选项卡中：

```
public ActionResult Index()
{
    var deserializedData = TempData["DataContract"] as OrderReportDrilldownDataContract;
    var model = new OrderListItemViewModel(deserializedData);
    return View(model);
} 
```

问题是我没有在新选项卡中看到这些数据，尽管我在 Ajax.BeginForm 中使用了 @target = "_blank"。如上所示，我也尝试过使用 window.open(newUrl, '_blank') 。但结果仍然没有显示在新选项卡中。

**请协助我在哪里出错？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T01:33:39.730

这是我认为您正在尝试做的事情的骨架。请注意，window.open 是一个弹出窗口，大多数用户都会阻止弹出窗口。

```
<form id="formCreateOrderListReport">
    <input type="text" vaule="testing" name="id" id="id"/>
    <input type="submit" value="submit" />
</form>

<script type="text/javascript">
    $('#formCreateOrderListReport').on('submit', function (event) {
        $.ajax({
            type: "POST",
            url: '/home/test',
            data: { id: $('#id').val()},
            cache: false
        }).done(function () {
            debugger;
            alert("success");
            var newUrl = '/home/contact';
            window.open(newUrl, '_blank');
        }).fail(function () {
            debugger;
            alert("error");
        });
        return false;
    });
</script> 
```

缩小应用程序以获得所需的 UI 流，然后使用数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T16:19:06.420

如果您使用的是 Ajax.BeginForm，那么您不应该同时进行 ajax 发布，因为不显眼的 ajax 库会在提交表单时自动执行 ajax 发布。

此外，如果您使用带有数据注释验证和客户端不显眼验证的视图模型，则无需手动验证 begin ajax 回调中的数据，因为如果发现任何验证错误，则不会提交表单。

在这种情况下，您需要添加的唯一 javascript 代码是一段用于 ajax 成功回调的代码。这看起来就像您当前拥有的那样，但您需要考虑到[在新标签中打开取决于浏览器和用户设置](https://stackoverflow.com/questions/427479/programmatically-open-new-pages-on-tabs)。它甚至可能被浏览器视为弹出窗口并被阻止，需要用户干预才能允许它们，就像在 IE8 中一样。你可以试试[这个小提琴](http://jsfiddle.net/DanielJG/GT8nA/)。

所以这将是你的模型：

```
public class OrderListModel 
{
    [Required]
    public DateTime ScheduledDate { get; set; }

    //the other properties of the OrderListModel
} 
```

表单将使用不显眼的 Ajax 发布到 OrderList 控制器的 GetOrderListReport。在成功回调中，您将检查响应，当它与“未找到数据”不同时，您将在新选项卡上手动打开 OrderListItems 页面。

这将是您的观点：

```
@model someNamespace.OrderListModel

<script type="text/javascript">
    function ViewOrderListItems(data){
        debugger;
        if (data !== "No data found") {
            var newUrl = '@Url.Action("Index", "OrderListItems")';
            //this will work or not depending on browser and user settings.
            //passing _newtab may work in Firefox too.
            window.open(newUrl, '_blank');
        } else {
            //Show message "No data found" somewhere in the current page
        }
    }
</script>

@using (Ajax.BeginForm("GetOrderListReport", "OrderList", null, 
                      new AjaxOptions { OnSucces= "ViewOrderListItems"}, 
                      new { @id = "formCreateOrderListReport" }))
{
    @Html.ValidationSummary(false)

    //input and submit buttons
    //for inputs, make sure to use the helpers like @Html.TextBoxFor(), @Html.CheckBoxFor(), etc
    //so the unobtrusive validation attributes are added to your input elements.
    //You may consider using @Html.ValidationMessageFor() so error messages are displayed next to the inputs instead in the validation summary
    //Example:
    <div>
        @Html.LabelFor(m => m.ScheduledDate)
    </div>
    <div>
        @Html.TextBoxFor(m => m.ScheduledDate, new {id = "dtScheduledDate"})
        @Html.ValidationMessageFor(m => m.ScheduledDate)
    </div>

    <input type="submit" value="Get Report" />
} 
```

有了这个，您应该能够使用 ajax 在初始页面中发布数据。然后根据收到的响应，您将使用第二页内容 (OrderListItems) 打开另一个窗口\选项卡（如前所述，取决于浏览器和用户设置，这可能会在新窗口中打开甚至被阻止）。

# database-design - 标准化问题

> ID：13685177
> 
> 赞同：1
> 
> 时间：2012-12-03T14:21:50.763
> 
> 标签：database-design, normalization

我正在尝试使这种关系正常化：

```
film_year  film_name  critic_id critic_name cinemas_debut           score
     2004  I robot          111        John  NY_cinema, LA_cinema       4 
     2004  I robot          222     Mathiew  NY_cinema, LA_cinema       5 
```

在哪里 ...

*   film_year 和 film_name 标识电影。
*   Cinemas_debut 是一个多值属性。
*   批评者 ID -> 批评者姓名
*   电影年、电影名、影评人 ID -> 得分

我无法转换与 3FN 的关系。这是我尝试过的：

*   第1步

到 1NF：

```
film_year  film_name  critic_id critic_name cinemas_debut           score
     2004  I robot          111        John  NY_cinema                  4 
     2004  I robot          222     Mathiew  LA_cinema                  5
     2004  I robot          111        John  NY_cinema                  4 
     2004  I robot          222     Mathiew  LA_cinema                  5 
```

*   第2步

到 2NF：

我将`critics`关系标识为 `critics ( critic_id (pk), critic_name )` 也将`reviews`关系标识为`reviews(film_year (pk), film_name (pk), critic_id (pk), score)` 但我不知道如何处理结果关系：

```
film_year  film_name  critic_id cinemas_debut          
     2004  I robot          111    NY_cinema                   
     2004  I robot          222    LA_cinema                  
     2004  I robot          111    NY_cinema                   
     2004  I robot          222    LA_cinema 
```

我的方法有什么问题？有人可以将这种关系翻译成 3FN 吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:38:29.500

我的建议是使用以下内容：

```
create table films
(
  film_id int,
  film_year int,
  film_name varchar(50)
);

create table critics
(
  critic_id int,
  critic_name varchar(50)
); 
```

在您创建表`films`并`critics`在两者之间创建连接表之后

```
create table film_critic
(
  film_id int,
  critic_id int,
  score int
); 
```

然后获取位置，为主要城市/位置创建一个表

```
create table premiere_locations
(
  location_id int,
  location_name varchar(50)
); 
```

最后在电影和地点城市之间创建一个连接表

```
create table film_location
(
  film_id int,
  location_id int
); 
```

然后查询您将使用的数据：

```
select f.film_year,
  f.film_name,
  c.critic_id,
  c.critic_name,
  fc.score,
  l.location_name
from films f
left join film_critic fc
  on f.film_id = fc.film_id
left join critics c
  on fc.critic_id = c.critic_id
left join film_location fl
  on f.film_id = fl.film_id
left join premiere_locations l
  on fl.location_id = l.location_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/f4161/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:40:00.760

我会以不同的方式建模。根据参数，将有 3 个实体： - Cinemas (cinemas_debut) >> 注意，您必须创建主键（即cinemas_id） - Films (film_year, film_name) >> 注意，您必须创建主键（即 film_id ) - 评论家（critic_id (PK)、critic_name、score）

现在，这是一个解释问题。在我看来，评论家与在一个特定电影院播放的一部电影有关。因此，我会创建一个关联 - Show(cinemas_id (FK),films_id (FK),critics_id (FK))

这样，您将拥有：

*   电影院：2 条记录（C1、C2）
*   电影：1 记录 (F1)
*   评论家：2 名评论家（CR1、CR2）
*   显示：2 条记录（C1-F1-CR1、C2-F1-CR2）

听起来更好吗？哔叽

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:12:42.383

行，

*   1St NF - 没有重复的元素或元素组
    你做到了：去重电影院

*   2nd NF：对连接键没有部分依赖
    换句话说，确保有一个值（几个值）唯一地标识其他属性

Critic(critic_id,critic_name, score) (/*我猜分数是critic的一部分*/)

Film(film_name, film_year)：您可以使用这两个字段来唯一标识电影，但它不会是 3rd NF -> 添加 PK film_id Film(film_id (FK), film_name (FK), film_year (FK))

Cinema (cinema_name): 不会在 3rd NF -> 添加一个 PK cinema_id Cinema(cinema_id, cinema_name) Film(film_id, film_name, film_year)

你需要将电影与电影院、评论家联系起来。根据批评者的上下文：

*   分数取决于电影和电影院放映（cinema_id，film_id，critic_id）

*   分数仅取决于电影 Show(film_id,critic_id)，其中主键是一对外键（标识一对电影/电影/评论家）并且是第 3 范式（您不处理这 3 个FK 单独）电影（cinema_id (FK)、film_id、film_name、film_year）

*   第三个 NF：不依赖非键属性 换句话说，确保没有属性被复杂键的一部分标识。您没有任何属性取决于系统的唯一复杂键（仅在备选方案 1 中显示的cinema_id/film_id/critic_id）

听起来很清楚？哔叽

# php - sql 查询和 php 变量的 php 总和

> ID：13685179
> 
> 赞同：0
> 
> 时间：2012-12-03T14:22:03.207
> 
> 标签：php, mysql, sql

嘿伙计们，我想要一个 mysql 查询和一个 php 变量的总和。有这样做的功能吗？这是我尝试过的：

```
$result3 = mysql_query($sql3);
                while ($resultarray3 = mysql_fetch_array($result3)){
                $Ergebnis = $Menge + $resultarray['Bestand'];
                echo $Ergebnis;
                } 
```

谁可以帮我这个事？

编辑：我想要一个 php 变量和一个 mysql 查询的总和，而不是两个 sql 表！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:32:08.153

```
$menge = '';
$result3 = mysql_query($sql3);
while ($resultarray3 = mysql_fetch_array($result3)){
  $menge = $menge + $resultarray3['Bestand'];
}
// result => $menge 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:34:24.897

如果只有一行，则不需要`.=`

```
$result3 = mysql_query($sql3);
            while ($resultarray3 = mysql_fetch_array($result3)){
            $Ergebnis .= $Menge + $resultarray3['Bestand'];//notice the change on this line
            echo $Ergebnis;
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:30:48.590

显示结果的查询包含 SUM(column)，因此您可以使用：

```
$sql3 = "SELECT bestand, SUM(bestand) as menge FROM database GROUP BY bestand"; 
```

然后在 PHP

```
$result3 = mysql_query($sql3);
while ($resultarray3 = mysql_fetch_array($result3)){
    echo $resultarray['bestand'] . ' = ' . $resultarray['menge'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:39:37.517

您定义`$resultarray3`但随后您在`$resultarray`没有这三个的情况下使用。

```
$Ergebnis = $Menge + $resultarray3['Bestand']; 
```

# c# - 从事件中捕获异常

> ID：13685180
> 
> 赞同：1
> 
> 时间：2012-12-03T14:22:10.180
> 
> 标签：c#, exception, dependencies

我有一个类`TCPDataLink`使用`Socket`. 我还有一个`IOManager`在抛出错误时（在我所有的`DataLink`）上进行一些日志记录的工具。

问题是我找不到从我的类中捕获`Socket`事件处理程序异常的方法。`IOManager`我不想`Logger`在我的类中注入依赖项，`TCPDataLink`因为我不想在我的所有`DataLink`类中重复日志记录代码。

**正常情况下的示例：**

```
// IOManager Class call in a normal case
try
{
  tcpInstance.DoSomething
}
catch (MyCustomEx e)
{
  // Log the problem
  Logger.log(e.ToString());
} 
```

**在我有问题的情况下：**

```
// TCPDataLink.cs
...
socket.OnConnection += ConnectionHandler // Cannot try/catch or whatever
...

void ConnectionHandler(...)
{
  // Code throwing Exceptions
} 
```

根据[这个](https://stackoverflow.com/questions/3114543/should-event-handlers-in-c-sharp-ever-raise-exceptions)线程，外部 try/catch 不是一个选项。所以我必须抓住`Exception`我的`ConnectionHanlder`和...？

在没有可能捕获的情况下，从我的 IOManager 登录的最佳选择是什么`Exception` ？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:26:32.557

最好的方法是实际*捕获*异常。*使用预期的异常处理*来编排您的应用程序工作流是您通常在 IO 交互中所做的事情，通常没有其他方法可以正确处理它。

`ConnectionHandler`因此，只需按`try/catch/throw`顺序处理它即可。可能是，不要在它捕获时引发异常，而只是*处理它*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:26:39.457

事件通常不应允许任何比`CpuOnFireException`. 如果一个事件代表一个可能成功也可能不成功的动作，并且其失败需要传递给调用代码，事件处理程序应该捕获所有不太严重的异常并通过“事件参数”参数传递有关它们的信息。当然，这对引发事件的代码部分产生了检查是否发生任何异常的义务；它还可以在事件*处理程序*方面创建一个义务，以检查先前处理程序中的问题是否应该导致事件处理程序忽略当前事件。

虽然`MulticastDelegate`用于处理事件订阅看似简单易行，但在处理 a 的一部分时发生的异常`MulticastDelegate`会导致其他部分被跳过；在许多情况下，跳过一个事件可能会将原本可恢复的异常变成不可恢复的异常（例如，如果更新通知收到，两个本应保持更新以相互匹配的集合可能会不同步跳过）。虽然可以将 a 分解`MulticastDelegate`为方法指针和目标的列表，但使用其他数据类型（如 an `EventHandler<T>[]`）来保存事件列表会更容易，而不必费心制作任何多播委托。

# r - 如何在 R Studio 中为字幕编码？

> ID：13685182
> 
> 赞同：2
> 
> 时间：2012-12-03T14:22:13.473
> 
> 标签：r, rstudio

我正在使用 R Studio，并注意到代码窗口和控制台之间有一个橙色的小号，其中列出了您正在使用的代码中的字幕。如何指示字幕的标签？是吗

```
#subtitle# 
```

或者

```
#subtitle 
```

要不然是啥？这些似乎都没有。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T14:24:03.483

在一行中，添加`#`您的标签，然后在您的标签后添加 4 个或更多连字符

```
# My chunk ---- 
```

`Ctrl``Shift``R`或者，您可以使用 Mac或`Command``Shift``R`在 Mac 上插入代码段

# ios6 - 连接字符串和整数

> ID：13685184
> 
> 赞同：1
> 
> 时间：2012-12-03T14:22:16.900
> 
> 标签：ios6, xcode4.5

下面的代码在 NSLog 中得到了我想要的结果，但*必须*有更简单的方法来做到这一点？我还收到“格式字符串不是字符串文字”错误，但仍然可以正常运行。

```
NSString *levelstring1 = @"Level ";
NSString *levelstring2 = [NSString stringWithFormat:@"%d", levelscore];
NSString *levelstring3 = @" (";
NSString *levelstring4 = [NSString stringWithFormat:@"%d", xpscore];
NSString *levelstring5 = @"/";
NSString *levelstring6 = [NSString stringWithFormat:@"%d", (levelscore*(levelscore+1)*100)];
NSString *levelstring7 = @")";

NSString *levelstringfinal = [[[[[[levelstring1 stringByAppendingFormat:levelstring2]stringByAppendingFormat:levelstring3]stringByAppendingFormat:levelstring4]stringByAppendingFormat:levelstring5]stringByAppendingFormat:levelstring6]stringByAppendingFormat:levelstring7];

NSLog(@"Level is %@",levelstringfinal); 
```

最终结果如下所示：级别 1 (50/100)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:30:05.743

您可以将它们组合成如下内容：

```
NSString *levelstringfinal = [NSString stringWithFormat:@"Level %d (%d/%d)", levelscore, xpscore, (levelscore*(levelscore+1)*100)]; 
```

您收到的警告是因为编译器无法检查变量的内容，而使用字符串文字它可以匹配占位符和变量以实现某种程度的一致性。

（即使您必须分段构建字符串，使用最后一行会更好，`stringByAppendingString`而不是`stringByAppendingFormat`因为它们不再是格式说明符。）

# struts2 - 在 Eclipse 中创建 Struts 2 项目时出现问题

> ID：13685187
> 
> 赞同：0
> 
> 时间：2012-12-03T14:22:27.670
> 
> 标签：struts2

我在从 Maven 创建 Struts 2 项目时遇到了一些问题。我在 tackOverflow 上看到了这篇关于创建自己的远程目录的帖子[，](https://stackoverflow.com/questions/12128626/how-to-create-a-struts-2-project-using-m2eclipse-plugin-using-eclipse-indigo)但是 Eclipse 告诉我目录是空的。

**同样在遵循 myKongs 注释之后，我通过输入mvn eclipse:eclipse -Dwtpversion=2.0**进入将生成的 Maven 项目转换为 Java Web 项目的部分但是这似乎只创建了一个普通的 Java 项目 - 它不能在服务器上运行。

我究竟做错了什么？

干杯

# r - 合并具有重复行的数据框

> ID：13685190
> 
> 赞同：2
> 
> 时间：2012-12-03T14:22:30.603
> 
> 标签：r

我有相当大的代谢物数据集。一些集合具有未标记的重复（没有表示重复的列）。下面是一个小例子。

```
a<-structure(list(ABBRC = structure(c(1L, 2L, 2L, 3L, 4L, 4L, 4L
        ), .Label = c("X1", "X2", "X3", "X4"), class = "factor"), X = 1:7, 
            Y = 1:7, Year = c(2009L, 2009L, 2009L, 2009L, 2009L, 2009L, 
            2009L)), .Names = c("ABBRC", "X", "Y", "Year"), class = "data.frame", row.names = c(NA, 
        -7L))
        b<-structure(list(ABBRC = structure(c(1L, 2L, 3L, 4L, 4L, 4L, 4L
        ), .Label = c("X1", "X2", "X3", "X4"), class = "factor"), Z = c(1L, 
        2L, 4L, 5L, 6L, 7L, 8L), A = c(1L, 2L, 4L, 5L, 6L, 7L, 8L), Year = c(2009L, 
        2009L, 2009L, 2009L, 2009L, 2009L, 2009L)), .Names = c("ABBRC", 
        "Z", "A", "Year"), class = "data.frame", row.names = c(NA, -7L
        ))
    merge(a,b)
ABBRC Year X Y Z A
1     X1 2009 1 1 1 1
2     X2 2009 2 2 2 2
3     X2 2009 3 3 2 2
4     X3 2009 4 4 4 4
5     X4 2009 5 5 5 5
6     X4 2009 5 5 6 6
7     X4 2009 5 5 7 7
8     X4 2009 5 5 8 8
9     X4 2009 6 6 5 5
10    X4 2009 6 6 6 6
11    X4 2009 6 6 7 7
12    X4 2009 6 6 8 8
13    X4 2009 7 7 5 5
14    X4 2009 7 7 6 6
15    X4 2009 7 7 7 7
16    X4 2009 7 7 8 8 
```

当我合并时，输出重复行的组合。这是预期的行为，但这不是我想要的。我希望将数据合并，就好像它们是重复一样（它们是）。是否有进行这种合并的功能，还是更容易标记重复然后合并？如果标签更容易，那么有什么好的方法呢？

期望的输出

```
structure(list(ABBRC = structure(c(1L, 2L, 2L, 3L, 4L, 4L, 4L, 
4L), .Label = c("X1", "X2", "X3", "X4"), class = "factor"), X = c(1L, 
2L, 3L, 4L, 5L, 6L, 7L, NA), Y = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 
NA), Z = c(1L, 2L, NA, 4L, 5L, 6L, 7L, 8L), A = c(1L, 2L, NA, 
4L, 5L, 6L, 7L, 8L), Year = c(2009L, 2009L, 2009L, 2009L, 2009L, 
2009L, 2009L, 2009L)), .Names = c("ABBRC", "X", "Y", "Z", "A", 
"Year"), class = "data.frame", row.names = c(NA, -8L))
ABBRC  X  Y  Z  A Year
1    X1  1  1  1  1 2009
2    X2  2  2  2  2 2009
3    X2  3  3 NA NA 2009
4    X3  4  4  4  4 2009
5    X4  5  5  5  5 2009
6    X4  6  6  6  6 2009
7    X4  7  7  7  7 2009
8    X4 NA NA  8  8 2009 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:46:24.023

不确定回答您自己的问题是否很酷，但我想出了如何通过创建索引变量来做到这一点。感谢 Hadley 对 plyr/seq_along() 的一些建议。

```
require(plyr)
a<-ddply(a, .(ABBRC), transform, rep=seq_along(ABBRC))
b<-ddply(b, .(ABBRC), transform, rep=seq_along(ABBRC))
merge(a,b, all=T)

  ABBRC Year rep  X  Y  Z  A
1    X1 2009   1  1  1  1  1
2    X2 2009   1  2  2  2  2
3    X2 2009   2  3  3 NA NA
4    X3 2009   1  4  4  4  4
5    X4 2009   1  5  5  5  5
6    X4 2009   2  6  6  6  6
7    X4 2009   3  7  7  7  7
8    X4 2009   4 NA NA  8  8 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T18:20:51.387

删除我的第一次痛苦尝试后，这是另一种方法，但不如您自己的`plyr`方法。它涉及首先生成一个虚拟`time`变量。

```
a$time <- as.numeric(ave(as.character(a$ABBRC), a$ABBRC, a$Year, FUN=seq_along))
b$time <- as.numeric(ave(as.character(b$ABBRC), b$ABBRC, b$Year, FUN=seq_along))
library(reshape2)
ab.long <- rbind(melt(a, id.vars=c("ABBRC", "Year", "time")),
                 melt(b, id.vars=c("ABBRC", "Year", "time")))
dcast(ab.long, ABBRC + Year + time ~ variable)
#   ABBRC Year time  X  Y  Z  A
# 1    X1 2009    1  1  1  1  1
# 2    X2 2009    1  2  2  2  2
# 3    X2 2009    2  3  3 NA NA
# 4    X3 2009    1  4  4  4  4
# 5    X4 2009    1  5  5  5  5
# 6    X4 2009    2  6  6  6  6
# 7    X4 2009    3  7  7  7  7
# 8    X4 2009    4 NA NA  8  8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:09:47.950

有几种方法可以解决这个问题。一种方法是在合并之前识别重复项

```
merge(a, b[!duplicatesFromA, ])
#    ABBRC Year X Y Z A
#  1    X4 2009 5 5 8 8
#  2    X4 2009 6 6 8 8
#  3    X4 2009 7 7 8 8 
```

当然，有几种方法可以找到重复项。
这是一个使用嵌套应用循环的 colSums 的方法。

```
duplicatesFromA <- 
    colSums(apply(b, 1, function(row.b) {
        apply(a, 1, function(row.a) {
            all(row.b==row.a)
        })
    })) > 0 
```

# android - 解析 XML 并在 TextView 中显示

> ID：13685193
> 
> 赞同：2
> 
> 时间：2012-12-03T14:22:32.333
> 
> 标签：android, xml, android-layout, arraylist, xml-parsing

我正在做一个测验应用程序。对于 MCQ 问题，我有一个已解析的 XML。 **这是 XML**：

```
<quiz>
<mchoice>
<question>Not a team sport for sure</question>
<id>1</id>
<option1>Cricket</option1>
<option2>Tennis</option2>
<option3>Rugby</option3>
<option4>Soccer</option4>
<answer>Tennis</answer>
</mchoice>
<mchoice>
<question>I am the biggest planet in the Solar System</question>
<id>2</id>
<option1>Saturn</option1>
<option2>Jupiter</option2>
<option3>Neptune</option3>
<option4>Pluto</option4>
<answer>Jupiter</answer>
</mchoice>
<mchoice>
<question>I am the closest star to the earth</question>
<id>3</id>
<option1>Milky way</option1>
<option2>Moon</option2>
<option3>Sun</option3>
<option4>North Star</option4>
<answer>Sun</answer>
</mchoice>
<mchoice>
<question>A number which is not prime</question>
<id>4</id>
<option1>31</option1>
<option2>61</option2>
<option3>71</option3>
<option4>91</option4>
<answer>91</answer>
</mchoice>
<mchoice>
<question>Which is correct?</question>
<id>5</id>
<option1>Foreine</option1>
<option2>Fariegn</option2>
<option3>Foreig</option3>
<option4>Foreign</option4>
<answer>Foreign</answer>
</mchoice>
</quiz> 
```

这是我使用的**XML Parser 类：**

```
public class XMLParser {

    // constructor
    public XMLParser() {

    }

    /**
     * Getting XML from URL making HTTP request
     * @param url string
     * */
    public String getXmlFromUrl(String url) {
        String xml = null;

        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        // return XML
        return xml;
    }

    /**
     * Getting XML DOM element
     * @param XML string
     * */
    public Document getDomElement(String xml){
        Document doc = null;
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {

            DocumentBuilder db = dbf.newDocumentBuilder();

            InputSource is = new InputSource();
                is.setCharacterStream(new StringReader(xml));
                doc = db.parse(is); 

            } catch (ParserConfigurationException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (SAXException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            } catch (IOException e) {
                Log.e("Error: ", e.getMessage());
                return null;
            }

            return doc;
    }

    /** Getting node value
      * @param elem element
      */
     public final String getElementValue( Node elem ) {
         Node child;
         if( elem != null){
             if (elem.hasChildNodes()){
                 for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                     if( child.getNodeType() == Node.TEXT_NODE  ){
                         return child.getNodeValue();
                     }
                 }
             }
         }
         return "";
     }

     /**
      * Getting node value
      * @param Element node
      * @param key string
      * */
     public String getValue(Element item, String str) {     
            NodeList n = item.getElementsByTagName(str);        
            return this.getElementValue(n.item(0));
        }
} 
```

**这是我调用 XML 解析器类并将解析的数据添加到其中包含 hashMap 的 Arraylist 的活动**：

```
// All static variables
    static final String URL = "http://gujaratimandal.org/data.xml";
    // XML node keys
    static final String KEY_MCHOICE = "mchoice"; // parent node
    static final String KEY_QUESTION = "question";
    static final String KEY_ID = "id";
    static final String KEY_OPTION1 = "option1";
    static final String KEY_OPTION2 = "option2";
    static final String KEY_OPTION3 = "option3";
    static final String KEY_OPTION4 = "option4";
    static final String KEY_ANSWER = "answer";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_MCHOICE);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_MCHOICE, parser.getValue(e, KEY_MCHOICE));
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_QUESTION, parser.getValue(e, KEY_QUESTION));
            //map.put(KEY_QUESTION, parser.getValue(e, KEY_QUESTION));

            map.put(KEY_OPTION1, parser.getValue(e, KEY_OPTION1));
            map.put(KEY_OPTION2, parser.getValue(e, KEY_OPTION2));
            map.put(KEY_OPTION3, parser.getValue(e, KEY_OPTION3));
            map.put(KEY_OPTION4, parser.getValue(e, KEY_OPTION4));
            map.put(KEY_ANSWER,  parser.getValue(e, KEY_ANSWER));
            // adding HashList to ArrayList
            menuItems.add(map);

            for (HashMap.Entry<String, String> entry : map.entrySet()) {
                String display_id=entry.getKey();
                String display_question = entry.getValue();
               makeAToast( ""+display_id+":"+ display_question);

            }

        }

         makeAToast(""+menuItems.size());
}

     public void makeAToast(String str) {

            Toast toast = Toast.makeText(this,str, Toast.LENGTH_LONG);
            toast.setGravity(Gravity.BOTTOM, 0, 0);
            toast.setDuration(1000000);
            toast.show();
        } 
```

问题是，数据正在被检索，但不是以期望的方式。

**我想以以下格式检索数据**：

![需要格式](../Images/0d7e9584974fd0175e1acd485a062161.png)

这样我就可以**用每个问题的数据填充这些 TextView**：

![需要填充](../Images/d8991373d42c85e146986af8972a46fe.png)

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:45:19.373

在你的公开课活动中制作一个字符串

字符串键选项，键选项2，名称；

和

```
for (int i = 0; i < nl.getLength(); i++) {

    HashMap<String, String> map = new HashMap<String, String>();
    Element e = (Element) nl.item(i);

    keyoption = parser.getValue(e, KEY_OPTION1);
    keyoption2 = parser.getValue(e, KEY_OPTION2);

    map.put(KEY_OPTION1, keyoption);
    map.put(KEY_OPTION2, keyoption2);
}

name.setText(keyoption); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:41:23.393

为您提到的布局创建一个 xml 文件。

这很简单。

1.  创建一个 LinearLayout 作为 xml 的根。（这无论如何都是默认值）`android:gravity="center"`

2.  看起来您在 LinearLayout 中需要 5 个 textView。一个问题。4 供您选择。他们都与`android:gravity="center_horizontal"`

3.  最后一个 EditText 来回答。

# python - 如何在python中将小时添加到当前时间

> ID：13685201
> 
> 赞同：218
> 
> 时间：2012-12-03T14:23:04.090
> 
> 标签：python, time, add, timedelta

我能够得到当前时间如下：

```
from datetime import datetime
str(datetime.now())[11:19] 
```

***结果***

```
'19:43:20' 
```

现在，我正在尝试添加`9 hours`上述时间，如何在 Python 中将小时数添加到当前时间？

* * *

## 回答 #1

> 赞同：467
> 
> 时间：2012-12-03T14:23:56.967

```
from datetime import datetime, timedelta

nine_hours_from_now = datetime.now() + timedelta(hours=9)
#datetime.datetime(2012, 12, 3, 23, 24, 31, 774118) 
```

然后使用字符串格式获取相关部分：

```
>>> '{:%H:%M:%S}'.format(nine_hours_from_now)
'23:24:31' 
```

如果您只是格式化日期时间，那么您可以使用：

```
>>> format(nine_hours_from_now, '%H:%M:%S')
'23:24:31' 
```

或者，正如@eumiro 在评论中指出的那样——`strftime`

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2019-08-30T11:19:01.943

导入[日期](https://docs.python.org/3/library/datetime.html#datetime-objects)时间和[时间增量](https://docs.python.org/3/library/datetime.html#timedelta-objects)：

```
>>> from datetime import datetime, timedelta
>>> str(datetime.now() + timedelta(hours=9))[11:19]
'01:41:44' 
```

但更好的方法是：

```
>>> (datetime.now() + timedelta(hours=9)).strftime('%H:%M:%S')
'01:42:05' 
```

您可以参考[`strptime`和`strftime`行为](https://docs.python.org/3/library/datetime.html#strftime-and-strptime-behavior)以更好地了解 python 如何处理日期和时间字段

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-07T13:32:34.310

这对我来说工作`seconds`时间不长，也可以使用函数转换回 UTC 时间。

```
from datetime import timezone, datetime, timedelta 
import datetime

def utc_converter(dt):
    dt = datetime.datetime.now(timezone.utc)
    utc_time = dt.replace(tzinfo=timezone.utc)
    utc_timestamp = utc_time.timestamp()
    return utc_timestamp

# create start and end timestamps
_now = datetime.datetime.now()
str_start = str(utc_converter(_now))
_end = _now + timedelta(seconds=10)
str_end = str(utc_converter(_end)) 
```

# tfs - 搜索工作项查询

> ID：13685202
> 
> 赞同：0
> 
> 时间：2012-12-03T14:23:06.760
> 
> 标签：tfs

在使用 TFS 2010 的“搜索工作项”插件后，我正在努力解决 TFS 2012 中类似工具的看似限制。

我的团队使用此即席查询在**所有**团队项目中快速搜索，以根据多个字段查找工作项。我一直无法找到修改查询以搜索其他字段并删除@Project 限制的方法。在 TFS 2010 中使用“--Template”字符串打开和修改查询被票证。TFS 2012 中是否有类似的解决方案？

每次使用[搜索语法](http://msdn.microsoft.com/en-us/library/cc668120.aspx)都可以手动指定所有额外的字段（很痛苦）-但是如何*消除*@Project等限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:22:48.593

您应该能够在团队资源管理器中打开查询并删除 @project 名称。但是，您现在无法从 TFS 2012 Web 访问 UI 上的搜索框中删除 @project 限制，因为它只会搜索单个团队项目。

我建议您阅读：

*   [http://blog.hinshelwood.com/project-of-projects-with-team-foundation-server-2010/](http://blog.hinshelwood.com/project-of-projects-with-team-foundation-server-2010/)
*   [http://blog.hinshelwood.com/one-team-project/](http://blog.hinshelwood.com/one-team-project/)

我认为随着您的前进，您会发现越来越多的事情进入了团队项目的边界。

# pentaho - 预览在 CDE 插件 + pentaho 中不起作用

> ID：13685212
> 
> 赞同：0
> 
> 时间：2012-12-03T14:23:40.960
> 
> 标签：pentaho

我正在使用 pentaho，并在其中生成报告，我正在使用 CDE 插件，我已按照给定的说明进行了正确安装，但问题是，CDE 将根据需要创建报告，在每个功能中都能有效工作，但仅预览不起作用。

当我尝试预览时，它给出了一张没有元素的纯白色空白纸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:39:42.693

你使用的是什么浏览器？首先，是在 Firefox 和安装了 Firebug 的情况下尝试这个。然后检查 javascript 控制台，看看是否有任何错误。

其次，您是如何安装 CDE 的？您是否使用了 ctools-installer.sh 脚本？如果不尝试使用脚本重新安装，则可能出现问题。

最后，您的 BI Server 设置如何？是否有机会通过 SSL？您的 SSL conf 设置如何？我过去曾看到特定 SSL 设置存在问题，可能需要稍作调整。

# r - 从matlab代码到R代码的矩阵

> ID：13685214
> 
> 赞同：3
> 
> 时间：2012-12-03T14:23:43.470
> 
> 标签：r, matlab, matrix

创建 matlab 中的代码是为了根据生态系统中物种的丧失来确定生态系统功能的概率。现在，这段代码必须翻译成 R。但我在翻译 matlab 中的矩阵操作时遇到了问题。

在 Matlab 中，这是我试图翻译成 R 代码的代码：

```
for j=1:N+1
multi_matrix4(:,j)=matrix(:,1);
end 
```

在 R 中，我将此代码放在 for 循环中：

```
+ multi.matrix4 <- matrix[,1,drop=FALSE]
+ multi.matrix4 <- multi.matrix4[,j,drop=FALSE]
+ class(multi.matrix4) 
```

这是来自 R 的消息，位于 for 循环下方：

```
Error: subscript out of bounds 
```

我的问题是：如何使用 R 进行这种矩阵操作？？？？？？

没有最后一张图的 matlab 代码是：

```
clear all

% No of permutations
sim=1000;

% Total No of ecosystem functions    
N=3;

%Total dimensions
J=3;

% Total No of species in pool
total_species=4;

% No of species drawn from pool
species=4;
multi_matrix=zeros(total_species,N);

% "Threshold"
t=.5;

result=zeros(sim,J);

for i=1:sim

% %Uniformly increasing trait values
for j=1:N
matrix=rand(total_species,2);
matrix(:,1)=linspace(0,1,total_species);
matrix=sortrows(matrix,2);
multi_matrix4(:,j)=matrix(:,1);
end

%Complete covariance
matrix=rand(total_species,2);
matrix(:,1)=linspace(0,1,total_species);
matrix=sortrows(matrix,2);
for j=1:N+1
multi_matrix4(:,j)=matrix(:,1);
end

% Excess of high trait values
for j=1:N
matrix=rand(total_species,2);
X=1:total_species;X=X';
matrix(:,1)=1-exp(-0.02*X.^2);
matrix=sortrows(matrix,2);
multi_matrix4(:,j)=matrix(:,1);
end

% Deficiency of high trait values
for j=1:N
matrix=rand(total_species,2);
X=1:total_species;X=X';
% matrix(:,1)=exp((X./22.6).^3)-1;
matrix(:,1)=exp((X./13.55).^3)-1;
matrix=sortrows(matrix,2);
multi_matrix4(:,j)=matrix(:,1);
end

% Reading empirical data
warning off
% [NUMERIC,txt]=xlsread('Plant_6.xls','Sheet1');
Exp07_2 = [ 0 0.72 0.70 ; 1 1 0 ; 0.62 0 1 ; 0.36 0.69 0.61]
multi_matrix(1:total_species,1:N)=Exp07_2;
random=rand(1,N);
multi_matrix(total_species+1,1:N)=random;
multi_matrix2=sortrows(multi_matrix',total_species+1);
multi_matrix3=multi_matrix2';
multi_matrix4=multi_matrix3(1:total_species,:);
warning on

    % adding a sorting column
    random2=rand(total_species,1);
    multi_matrix4(:,N+1)=random2;
    sort_multi_matrix=sortrows(multi_matrix4,N+1);

    % loop adding one function at a time
    for j=1:J

        loss_matrix=sort_multi_matrix(1:species,1:j);
        max_value=loss_matrix>=t;
        B=any(max_value',2);
        C=all(B);
        result(i,j)=sum(C);

    end

end

% reporting
res=mean(result);
res' 
```

R 代码如下所示：

```
rm()

#No of permutation
sims <- 1000;

#Total number of ecosystem functions
N <- 3

#Total dimensions
J <- 3

#Total number of species in pool
total.species <- 4

#No of species drawn from pool
species <- 4

multi.matrix <- matrix(0, nrow=total.species, ncol=N)
class(multi.matrix)

# $Threshold$
t <- .5;

# The results are to be put in a matrix
result <- matrix(0, nrow=sims, ncol=J)

for (i in 1 : sims)
{

#Uniformly increasing trait values
for (j in 1 : N)
{
matrix <- matrix(runif(total.species*2),total.species)
class(matrix)
matrix[,1] <- seq(0,1, len=total.species) # test 2
class(matrix)
matrix <- matrix[order(matrix( ,2)),]
class(matrix)
# multi.matrix4[,j,drop=FALSE] = matrix[,1,drop=FALSE]
multi.matrix4 <- matrix[,1,drop=FALSE]
multi.matrix4 <- multi.matrix4[,j,drop=FALSE]
class(multi.matrix4)
}

# Complete covariance
matrix <- matrix(runif(total.species*2),total.species)
class(matrix)
matrix[,1] <- seq(0, 1, len=total.species)
class(matrix)
matrix <- matrix[order(matrix( ,2)),]
class(matrix)
for (j in 1 : N + 1)
{multi.matrix4 <- matrix[,1,drop=FALSE]
multi.matrix4 <- multi.matrix4[,j,drop=FALSE]
class(multi.matrix4)
}

# Excess of high trait values
for (j in 1 : N)
{matrix <- matrix(runif(total.species*2),total.species)
class(matrix)
X <- 1 : total.species
X <- t(X)
matrix[,1] <- c(1 - exp(-0.02 %*% X^2)) # Hie... p. 8
matrix <- matrix[order(matrix( ,2)),]
# multi.matrix4[,j,drop=FALSE] <- matrix[,1,drop=FALSE]
# multi.matrix4[,j,drop=FALSE] <- matrix[,1]
multi.matrix4 <- matrix[,1,drop=FALSE]
multi.matrix4 <- multi.matrix4[,j,drop=FALSE]
class(multi.matrix4)
}

# Deficiency of high trait values
for (j in 1 : N)
{matrix <- matrix(runif(total.species*2),total.species)
    class(matrix)
X <- 1 : total.species
X <- t(X)
# matrix[1:4,1] <- c(exp((X/22.6)^3)-1)
matrix[1:4,1] <- c(exp((X/13.55)^3)-1)
class(matrix)
matrix <- matrix[order(matrix( ,2))]
class(matrix)
# multi.matrix4[,j,drop=FALSE] <- matrix[,1,drop=FALSE]
# multi.matrix4[,j,drop=FALSE] <- matrix[,1]
# multi.matrix4[,j] <- matrix[,1,drop=FALSE]
# class(multi.matrix4)
multi.matrix4 <- matrix[,1,drop=FALSE]
multi.matrix4 <- multi.matrix4[,j,drop=FALSE]
class(multi.matrix4)
}

# Reading empirical data
Exp_07_2 <- file(description = "Exp_07_2", open = "r", blocking = TRUE, encoding = getOption("encoding"), raw = FALSE)
Exp_07_2 <- matrix(scan(Exp_07_2),nrow=4,byrow=TRUE)
read.matrix <- function(Exp_07_2){
    as.matrix(read.table(Exp_07_2))
}
Exp_07_2
class(Exp_07_2)
multi.matrix <- matrix(c(Exp_07_2),ncol=3)
class(multi.matrix)
multi.matrix <- multi.matrix(1:total.species,1:N)  
class(multi.matrix)
random <- runif(N)
multi.matrix2 <- t(multi.matrix)[order(t(multi.matrix)[,1], t(multi.matrix)[,2], t(multi.matrix)[,3], t(multi.matrix)[,4]),]
class(multi.matrix2) 
multi.matrix3 <- t(multi.matrix2)
class(multi.matrix3)
multi.matrix4 <- multi.matrix3[1:total.species,,drop=FALSE]
class(multi.matrix4)

# Adding a sorting column
random2 <- runif(total.species,1)
random2 <- multi.matrix4[,N+1,drop=FALSE]
sort.multi.matrix <- multi.matrix4(order(multi.matrix4[,1], multi.matrix4[,2], multi.matrix4[,3],multi.matrix4[,4]),N+1,drop=FALSE)

# loop adding one function at a time
for (j in 1 : J)

{loss.matrix <- sort.multi.matrix[nrow=species,ncol=j,drop=FALSE]
    class(loss.matrix)
max.value <- loss.matrix >= t
c(B) <- any(t(max.value),2)
c(C) <- all(c(B))
result(i,j) <- c(sum(C))
}
}

# Reporting
res <- mean(result)
res
t(res) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:02:11.120

虽然我手头没有 Matlab 和 R，但我怀疑这是导致问题的原因：

在 R 中，您尝试分配给矩阵中不存在的位置，结果：失败

在 Matlab 中，您尝试分配给矩阵中不存在的位置，结果：它原谅了您奇怪的选择，扩展了您的矩阵并成功了。

假设这是问题，解决方案很简单：

> 在 R 中创建矩阵时，请确保它足够大以包含您以后要添加到其中的所有内容。

这称为初始化，在大多数情况下是最佳实践。即使在 Matlab 中，通常也建议尽可能提前正确初始化变量，而不是让它们随时间增长。

# qt - QT 是否有与 Microsoft Blend 或 Adob e 工具等效的工具？

> ID：13685215
> 
> 赞同：1
> 
> 时间：2012-12-03T14:23:46.733
> 
> 标签：qt, user-interface, adobe, expression-blend

在广泛使用 Microsoft 开发工具后，我出于研究目的迁移到 ubuntu 和 QT。

QT 是一个很棒的框架，到目前为止，我不需要任何东西，它也不存在。然而，围绕 QT 的工具生态系统有点落后于微软的生态系统（V.Studio，Expression Suite）

更具体地说，QT Creator 相当不错，但是在开发的情况下，缺乏像 MS-Blend （我认为这是必须的，对 V.Studio 的补充）或各种 Adob​​e 工具这样的“标准”工具是很明显的花哨的界面，动画等。如果没有“图形”工具，对动画（例如菜单的出现/消失）进行硬编码有点痛苦。

为此，您有什么工具可以提出，我不知道吗？

PS - 为了避免误解，我知道 qml/Qt_Quick/qdesigner/qt_Animation - [http://doc.qt.digia.com/qt/animation-overview.html](http://doc.qt.digia.com/qt/animation-overview.html)。我指的是使生活更轻松并减少硬编码所需时间的软件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:54:40.900

**直接回答：**

不，Qt arena 中没有可用的工具与 Microsoft Blend 的功能相匹配。

[有这个问题](https://stackoverflow.com/questions/800219/qt-versus-wpf-net)，它讨论了类似的情况；.NET 和 Qt 在 UI 设计方面的比较。

# include - 在 CMake 中将包含文件信息添加到库中

> ID：13685222
> 
> 赞同：1
> 
> 时间：2012-12-03T14:23:59.823
> 
> 标签：include, cmake, libraries

我想在我的 CMake 项目中使用导入的和内部的库，这样项目就不需要知道库的详细信息。（“内部库”是指其他 CMake 库目标，不确定正确的术语......）

信息应包含：

*   每种配置类型的库位置（包括 dll 和 .pdb 文件）
*   库包含文件夹

在某些项目中，我想写一些类似的东西：

```
 SET(TARGET_DEPENDS ext_lib1 ext_lib2 internal_lib1) 
```

并让构建系统处理所有包含文件夹和配置内容。

实现这一目标的最佳方法是什么？

AFAIK`add_library(... IMPORTED)`支持几乎所有其他内容，但包含文件夹信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:11:31.103

在构建“内部”库时，您还可以准备一个`YourInternalLibraryConfig.cmake`文件，该文件准备好用户“导入”库所需的所有内容。

这`YourInternalLibraryConfig.cmake`需要在构建内部库或安装它时创建。

在此`YourInternalLibraryConfig.cmake`，它应该调用`add_library( YourInternalLibrary IMPORTED )`并确保所有属性都已正确准备。例如它可以准备

*   具有`YourInternalLibrary_INCLUDE_DIRS`必要包含目录的变量。
*   a`YourInternalLibrary_DEFINES`具有所需的编译器定义
*   `YourInternalLibrary_LIBRARIES`总结提供的**所有**库

这样，您内部库的用户（例如主应用程序）可以简单地调用：

```
find_package( YourInternalLibrary )
include_directories( ${YourInternalLibrary_INCLUDE_DIRS} )
add_definitions( ${YourInternalLibrary_DEFINES} )
target_link_library( main ${YourInternalLibrary_LIBRARIES} ) 
```

对于更复杂的项目，您可以选择生成一个单独`UseYourInternalLibrary.cmake`的为您执行这三个步骤的项目，可选择启用/禁用内部某些部分的开关。

有关一些好的示例，请查看[Vtk](http://www.vtk.org/)或[OpenCV的源代码](http://opencv.org/)

# c# - 用于 int 的 C# SqlDataReader

> ID：13685226
> 
> 赞同：1
> 
> 时间：2012-12-03T14:24:13.893
> 
> 标签：c#, integer, int, sqldatareader

我对以下问题感到困惑；

我正在尝试使用 SqlDataReader 检索记录（列 'EmployeeId' (int)）。

当我直接在服务器上运行查询时，我得到了正确的记录。当我运行相同的程序来获取另一列（字符串）时，我正确地得到了记录。

我认为**问题是由于我尝试获取 int**，程序跳过

```
while (mySqlDbDataReader.Read()) 
```

并直接前往

```
catch (Exception eMsg1)
            { 
```

这是完整的程序

```
public string getUserId()
{
    //Check user details against login in Db
    //Local variables to capture values from Db
    string varId = "";

    //Connection string
    conn = sqlDbConnection.GetConnection();
    SqlCommand newCmd = conn.CreateCommand();
    newCmd.Connection = conn;
    newCmd.CommandType = CommandType.Text;

    //Query
    userCredentials connectedUser = new userCredentials();
    newCmd.CommandText = "SELECT EmployeeId FROM tblEmployees WHERE WinLogin='" + connectedUser.getWindowsLogin() + "';";

    //Connect
    newCmd.Connection = conn;
    conn.Open();

    //Utilisation du try-catch permettant de fermer la connexion même en cas de plantage
    try
    {
        SqlDataReader mySqlDbDataReader = newCmd.ExecuteReader();
        while (mySqlDbDataReader.Read())
        {
            //Tester que le résultat n’est pas NULL afin d’éviter un plantage au moment du crash
            if (mySqlDbDataReader["EmployeeId"] != System.DBNull.Value)
            {
                //Récupérer le nom à l’aide d’un cast
                varId = (string)mySqlDbDataReader["EmployeeId"];                        
            }
            else
            {
                varId = "Unknown";                       
            }
        }
    }
    catch (Exception eMsg1)
    {
        //In the event of trouble, display error msg
        //MessageBox.Show("Error while executing query: " + eMsg1.Message);
        Console.WriteLine(eMsg1);

        //Control
        MessageBox.Show("Empty");
    }
    finally
    {
        //Close DB connection
        conn.Close();
    }

    return varId;
}` 
```

谢谢你的帮助！

布莱斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:28:29.143

> 我正在尝试使用 SqlDataReader 检索记录（列 'EmployeeId' (int)）。

那么你为什么要转换成字符串呢？

```
varId = (string)mySqlDbDataReader["EmployeeId"]; 
```

那就是问题所在。您应该将其转换为 a `int`，或使用`GetInt32`：

```
// You don't need a local variable for this at all...
return mySqlDbDataReader.GetInt32(0); 
```

（这里的 0 是“`EmployeeId`列的序号；您可以使用它`GetOrdinal`来获取命名列的序号。）

当然，您还需要将方法的返回类型更改`int`为 - 或者`ToString`如果您*真的*希望该值作为字符串，则调用。（不过，我强烈建议不要这样做。）

当您将异常写入控制台时，您应该能够看到详细信息。我认为执行根本不会跳过`Read`调用-它正在读取结果，然后无法将其转换`int`为 a `string`，从而导致引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:29:56.277

您正在将 a 投射`int`到 a `string`，这是您无法做到的。

```
// Change varId to an int and cast to an int
varId = (int)mySqlDbDataReader["EmployeeId"]; 
```

或者

```
// Call ToString to get the string representation of the underlying value
varId = mySqlDbDataReader["EmployeeId"].ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:40:37.997

两个乔恩斯都是正确的。正是这种铸造似乎引发了问题。我想建议使用 Typed`QueryTableAdapter`来达到您的目的。只需`DataSet`在您的项目中添加一个新的，在数据​​集设计器中单击鼠标右键并添加一个查询。在此处键入您的查询，引入您的变量（我猜在这种情况下为用户名），它将在您的 QueryAdapter 中生成一个查询函数，该函数将接受您的变量，运行查询并返回 EmployeeID。此外，它还将使您免于 SQL 注入类型的事情，因为它在内部使用类型化参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:28:15.700

尝试转换int：

代替

```
//Récupérer le nom à l’aide d’un cast
varId = (string)mySqlDbDataReader["EmployeeId"]; 
```

采用

```
//Récupérer le nom à l’aide d’un cast
varId = mySqlDbDataReader["EmployeeId"].ToString(); 
```

这当然是假设它`EmployeeId`不可为空。

# multithreading - matlab脚本是否可以同时运行两个不同的函数

> ID：13685227
> 
> 赞同：6
> 
> 时间：2012-12-03T14:24:16.120
> 
> 标签：multithreading, matlab, parallel-processing

如果同时满足它们所需的条件，matlab 脚本是否可以同时运行两个不同的函数？

在这种情况下，我正在作为一个项目在 matlab 上制作一个两人格斗游戏：在任何时候如果两个玩家都说尝试跳跃。

通过单独的 if 语句和其中的 for 循环执行此操作会使一个玩家停在半空中，而另一个玩家完成他的跳跃，然后第一个玩家像往常一样继续他的跳跃。

目前我已经对这些动作进行了“硬编码”，并希望将它们转换为函数。

下面给出了两个跳转的示例。
这两个玩家目前也是积木，必须转换成精灵，所以每一个动作，比如来回走，原则上也会有一个for循环，所以这个问题对我的项目来说是至关重要的。

```
if double(c(1)) == 30 &&  double(c(2)) == 0 && jump == 0 % up
        jump=1;
        for dt=0:18
            dy=dy+20*0.1;
            y = y + dy;
            set(player,'Position',[x y w h]);
            pause(0.07)
            if double(c(1))==122 || double(c(2))==122 || double(c(3))==122 %check for punch
                if abs(x-x2)<=64 && hit2==0
                    h2=h2-10;
                    hit2=1;
                    x=x;
                    if x<x2
                        x2=x2+2*dx;
                    elseif x>x2
                        x2=x2-2*dx;
                    end
                    if h2<=0
                        disp('YOU WIN');
                    else
                        set(health2,'position',[640-h2 0 h2 20])
                    end
                    set(player2,'position',[x2 y2 wp hp])
                end
            elseif double(c(1))==120 || double(c(2))==120 || double(c(3))==120 %check for kick
                if abs(x-x2)<=70 && hit2==0
                    h2=h2-15;
                    hit2=1;
                    x=x;
                    if x<x2
                        if x2>=580
                            x2=580;
                        elseif x2<580
                            x2=x2+6*dx;
                        end
                    elseif x>x2
                        if x2<=0;
                            x2=0;
                        elseif x2>0
                            x2=x2-6*dx;
                        end
                    end
                    if h2<=0
                        disp('YOU WIN');
                    else
                        set(health2,'position',[640-h2 0 h2 20])
                    end
                    set(player2,'position',[x2 y2 wp hp])
                end
            end
        end
        dy=-dy; 
        y=126;
        jump=0;
        hit2=0;
    end
    if double(f(1))==105 && double(f(2))==0 && jump2 == 0 %player 2 up
        jump2=1;
        for dt2=0:1:18
            dy2=dy2+20*0.1;
            y2=y2+dy2;
            set(player2,'position',[x2 y2 wp hp]);
            pause(0.07)
             if double(f(1))==103 || double(f(2))==103 || double(f(3))==103 %Player 2 check for punch
                if abs(x-x2)<=64 && hit1==0
                    h1=h1-10;
                    hit1=1;
                    x2=x2;
                    if x<x2
                        if x>=580
                            x=580;
                        elseif x<580
                            x=x-2*dx;
                        end
                    elseif x>x2
                        if x<=0
                            x=0;
                        elseif x>0
                            x=x+2*dx;
                        end
                    end
                    if h1<=0
                        disp('Player 2 YOU WIN');
                    else
                        set(health,'position',[0 0 h1 20])
                    end
                    set(player2,'position',[x2 y2 wp hp])
                end
            elseif double(f(1))==104 || double(f(2))==104 || double(f(3))==104 %check for kick
                if abs(x-x2)<=70 && hit1==0
                    h1=h1-15;
                    hit1=1;
                    x=x;
                    if x<x2
                        if x>=580
                            x=580;
                        elseif x<580
                            x=x+6*dx;
                        end
                    elseif x>x2
                        if x<=0;
                            x=0;
                        elseif x>0
                            x=x-6*dx;
                        end
                    end
                    if h1<=0
                        disp('Player 2 YOU WIN');
                    else
                        set(health1,'position',[0 0 h1 20])
                    end
                    set(player,'position',[x y w h])
                end
            end
        end
        dy2=-dy2; %#ok<*NASGU>
        y2=126;
        jump2=0;
        hit1=0;
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:01:05.947

Matlab 不可能一次运行超过 1 个函数。Matlab 是一个严格的单线程编程环境，即按顺序执行脚本中的命令。用户**不能**直接在 Matlab 中编写任何多线程代码。一些内置的 Matlab 函数[确实支持多线程](http://www.mathworks.se/support/solutions/en/data/1-4PG4AN/?solution=1-4PG4AN)，你可以编写一个多线程的 MEX 函数，但是有严重的限制：Matlab MEX 接口（例如，内存分配）不是线程安全的，所以你要么分配一个线程，或在调用 Matlab 功能之前使用障碍。

有时您可以使用计时器功能来“中断”程序的执行并同时做一些事情，但在任何给定时刻仍然只有一个执行路径。

此外，您可以在 Parallel Processing Toolbox 中启动多个工作程序。然而，“master”脚本仍然是单线程的，等待workers完成以获取计算结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:02:18.297

您想要的称为线程操作。Matlab 对这些东西的支持非常有限，但是有一些。特别是有[批处理](http://www.mathworks.com/help/distcomp/batch.html)命令。当然，这假设您拥有并行处理工具包。

```
batch start_function 
```

然而，一般来说，同样的事情可以通过更仔细的循环来完成，在这个循环中，您首先获取操作，然后执行操作。如果您仔细跟踪状态，某些操作可能会在几个帧的过程中发生。将您的代码变成这样会很复杂，但让我向您展示基本思想（此代码不会运行，但应该大致告诉您该怎么做）：

```
player1_jump=false
player2_jump=false;
while(true)
   key=getKey();
   if key==PLAYER1_JUMP_KEY
      player1_jump=true;
   end
   if key==PLAYER2_JUMP_KEY
      player2_jump=true;
   end
   if player1_jump
      %Move player 1 one step
      if (done) %Put in your own criteria
          player1_jump=false;
      end
   end
   if player2_jump
      %Move player 2 one step
      if (done) %Put in your own criteria
          player2_jump=false;
      end
   end
end 
```

请注意，您必须跟踪每个玩家在跳跃中的位置等。此外，需要一个小的暂停语句来更新 gui。但是一般模式应该成立，我会让你去解决细节问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T04:09:36.133

你可能想调查

```
parfor 
```

这是一种并行执行操作的方式。如果这正是您要寻找的东西，我不肯定，但它似乎与您的描述相符

[http://www.mathworks.com/help/matlab/ref/parfor.html](http://www.mathworks.com/help/matlab/ref/parfor.html)

# asp.net-mvc - 向数据库传递值

> ID：13685230
> 
> 赞同：1
> 
> 时间：2012-12-03T14:24:21.237
> 
> 标签：asp.net-mvc, visual-studio-2010, sql-server-2008

空文本框是否将空值传递给数据库** SQL server 2008** 或空

细绳

**我在保存数据之前使用 string.empty 方法，**因为我需要清除数据

在用户输入任何内容之前

我不允许在我的表中使用空值，但文本框传递的值似乎已传递

因为“”而不是 null，所以表接受该值，我不希望这种情况发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:36:14.713

您可以将文本框值设置为`null`op`String.Empty`

还建议在将输入添加到数据库之前检查输入。像这样：

```
if (String.IsNullOrEmpty(txtTextbox.Text))
    //No value 
```

# django - Django模板回顾

> ID：13685232
> 
> 赞同：1
> 
> 时间：2012-12-03T14:24:24.623
> 
> 标签：django, django-templates

是否有可用的方法来获取 django 模板并查看上下文中需要哪些对象才能无错误地呈现？或者，是否可以在渲染模板后以编程方式找出是否存在任何错误的模板变量？

我的目标如下。想象一下我有一个模板：

```
Hello {{ name }}.
Your lucky number is {{lucky_number}} 
```

我想要一个包含“姓名”和“幸运号码”的列表。或者，如果我渲染该模板并仅提供“名称”的上下文，我想知道未提供“幸运号码”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:29:10.530

我发现这可以帮助我构建我的替代解决方案： [http ://excess.org/article/2012/04/paranoid-django-templates/](http://excess.org/article/2012/04/paranoid-django-templates/)

# c# - 如何 IKVM Apache POI

> ID：13685234
> 
> 赞同：2
> 
> 时间：2012-12-03T14:24:31.677
> 
> 标签：c#, java, apache, apache-poi, ikvm

我想在我的 .NET 应用程序中使用 Apache POI，我知道有一个端口 NPOI，但它不完整并且没有 PowerPoint 相关功能。

我尝试使用以下命令对其进行 IKVM 处理：

```
ikvmc -target:library poi-3.8.jar poi-ooxml-3.8.jar poi-ooxml-schemas-3.8.jar poi-excelant-3.8.jar poi-scratchpad-3.8.jar 
```

但是在使用生成的 dll 中的类后，我执行了应用程序，得到了这个错误：

```
The type initializer for 'org.apache.poi.xslf.usermodel.XMLSlideShow' threw an exception. 
```

有人可以指导我到我可以下载 IKVMed Apache POI 的链接，用谷歌搜索它，但到目前为止还没有多少运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T03:09:04.537

我刚刚完成了使用 IKVM 成功转换 POI 3.9 的项目。

先决条件：

*   下载 POI 3.9 并将所有 JAR 文件复制到一个目录中
*   下载IKVM（我用的是0.46.0.1版本）

以下命令（在所有 POI JAR 所在的同一目录中的 Windows 7 命令行中运行）对我有用：

```
ikvmc -target:library xmlbeans-2.3.0.jar
ikvmc -target:library stax-api-1.0.1.jar

ikvmc poi-ooxml-schemas-3.9-20121203.jar -target:library -reference:xmlbeans-2.3.0.dll -reference:stax-api-1.0.1.dll 

ikvmc -target:library log4j-1.2.13.jar
ikvmc -target:library commons-logging-1.1.jar
ikvmc -target:library commons-codec-1.5.jar

ikvmc poi-3.9-20121203.jar -target:library -reference:log4j-1.2.13.dll -reference:commons-logging-1.1.dll -reference:commons-codec-1.5.dll

ikvmc -target:library dom4j-1.6.1.jar

ikvmc poi-ooxml-3.9-20121203.jar -target:library -reference:poi-3.9-20121203.dll -reference:poi-ooxml-schemas-3.9-20121203.dll -reference:dom4j-1.6.1.dll -reference:xmlbeans-2.3.0.dll 
```

希望能帮助到你。

# python - 如果 NFS 服务器已挂载并在线，请签入 python 脚本

> ID：13685239
> 
> 赞同：3
> 
> 时间：2012-12-03T14:24:42.657
> 
> 标签：python, linux, nfs

我有一个类似于[Check if NFS share ismounted in python script](https://stackoverflow.com/questions/2889490/check-if-nfs-share-is-mounted-in-python-script)的问题，但是在我的情况下，NFS 服务器已安装，但服务器崩溃并脱机。我试图通过使用考虑到这一点，`os.dir.ismount('/path/to/mountpoint/)`但是我的问题是这个命令需要永远完成。

当我尝试做一个简单的`ls /path/to/mountpoint`这个命令也没有完成。有什么根本上的错误吗？我的设置是一个 linux NFSv3 服务器和一个 linux NFS 客户端。

我通常希望，如果 NFS 服务器无法安装或无法访问，该`ls`命令会显示本地目录的内容，而不是暂停终端。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T15:11:41.510

NFS 会发生这种情况，如果您挂载了 NFS 共享并且服务器不再经常通过网络访问，那么对挂载的任何 IO 访问都会卡住。如果您尝试在终端中运行 ls ，您会看到它只是卡住了，不会失败，只是无休止地等待它永远不会得到的响应。所以我建议你在你的 python 代码中运行 ls 然后设置一个超时。一旦达到此超时，您可以让它引发异常。下面是我测试过的一个实现。call_timeout 是一个函数，您可以给出要执行的命令和超时时间（以秒为单位）。如果命令在超时之前完成，它会立即返回，否则它会杀死它产生的进程并引发你可以捕获的 OSError。您可以选择返回 True 或 False，这是一种设计选择。

**代码**

```
from subprocess import Popen, check_output
import time

def call_timeout(cmd, timeout):
    start = time.time()
    p = Popen(cmd)
    while time.time() - start < timeout:
        if p.poll() is not None:
            return
        time.sleep(0.1)
    p.kill()
    raise OSError('command timed out') 
```

**示例调用**

这应该返回没有错误：

```
call_timeout(["sleep", "1"], 0.5) 
```

这将引发 OSError 错误：

```
call_timeout(["sleep", "1"], 1.5) 
```

你想要一些类似的东西：

```
call_timeout(["ls", "/path/to/mountpoint"], 5.0) 
```

# c - malloc 双重自由行为

> ID：13685240
> 
> 赞同：2
> 
> 时间：2012-12-03T14:24:43.923
> 
> 标签：c, linux, unix, malloc, gnu

GNU 手册页`malloc`定义了当`free()`使用相同的指针（先前由 分配的`malloc()`）调用两次时“发生未定义的行为”。

那是一种什么样的行为？
在哪里可以找到有关此类错误的更多信息？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:28:39.033

C99 标准针对*未定义的行为*规定了以下内容（在*术语和定义*部分下）：

> 可能的未定义行为范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（有发出的诊断消息）。

总结：*任何事情都有可能发生*。最坏的情况是程序按预期运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T18:48:53.680

“未定义的行为”仅仅意味着实现不需要以任何特定的方式处理这种情况；*任何*行为或结果都被认为是“正确的”。

`free`多次 -ing 指针的结果取决于 ; 的底层实现`malloc`。结果可能是崩溃和核心转储，或者它可能破坏`malloc`竞技场（弄脏未来的分配/解除分配），或者它可能`free`完全忽略双重。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:31:40.417

您不能同时释放两次相同的指针。

如果您想在没有未定义行为的情况下执行此类行为。

您可以使用以下宏而不是全部免费的代码

```
#define FREE(X) free(X); X=NULL

char *p;
p=malloc(50);
FREE(p);
FREE(p); 
```

当您强制指针为 时`NULL`，这将避免下一次释放中未定义的行为。因为`free(NULL)`不会导致未定义的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:26:37.910

未定义的行为意味着任何事情都可能发生。可能的结果之一是您的程序运行良好。另一个可能的结果是您的程序崩溃。或者你能想到的任何其他东西。

尝试分析未定义行为的特定实例时，您不会获得任何洞察力。补救方法是不要调用`free()`两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T14:46:51.560

“未定义的行为”通常意味着您的程序将崩溃。对于 c 库的实现者来说，这意味着他们可以随心所欲地处理这种情况。例如，他们可以免费忽略您的第二次无效免费。几乎没有 c 库会这样做。大多数 c 库只会因某种内存冲突错误而中止您的程序。

# sql - TSQL - 按类型分组

> ID：13685241
> 
> 赞同：1
> 
> 时间：2012-12-03T14:24:47.243
> 
> 标签：sql, sql-server, tsql, group-by

我有这个有 2 列的表：

```
ID, TypeID 
```

每个 ID 可以有多个 TypeID。在查询结果中，我想要以下内容：

```
ID, Count(TypeID = 10), Count(TypeID = 20 or 30), Count(TypeID 40 and 50) 
```

查询本身应该尽可能快/高性能。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:26:00.223

试试这个：

```
SELECT 
  ID,
  SUM(CASE WHEN TypeID = 10 THEN 1 ELSE 0 END) "Count of 10",
  SUM(CASE WHEN TypeID IN (20, 30) THEN 1 ELSE 0 END) "Count of 30 or 20",
  SUM(CASE WHEN TypeID IN (40, 50) THEN 1 ELSE 0 END) "Count of 40 AND 50"
FROM Table
GROUP BY ID; 
```

对于最后一种情况：`Count(TypeID 40 and 50)`我认为谓词`TypeID IN (40, 50)`对你有用，因为它会给出值 40 和 50 的计数。

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/aab5f/2)

# jquery - 根据当前 url 添加/删除类 jquery

> ID：13685244
> 
> 赞同：2
> 
> 时间：2012-12-03T14:25:04.107
> 
> 标签：jquery

我正在尝试编写一个干净的脚本来添加和删除基于 url 的类，因为我正在使用某种形式的 jquery 滑块插件。

所以我有 5 个跨度，第一个 1 在页面加载时有活动类

```
<span class="one active"></span>
<span class="two"></span>
<span class="three"></span>
<span class="four"></span>
<span class="five"></span> 
```

当我单击下一个按钮时，jquery 插件会在 url 的末尾附加一个“#/1”，并且对于每张幻灯片，数字都会增加一个，所以这是我迄今为止为每张幻灯片所做的：

```
$(function(){

$('#continue').click(function(){
  var location = window.location.href;

    if (location.indexOf('#/1') > -1 ) {
      $('.one').removeClass('active');
      $('.two').addClass('active');
    }

    if (location.indexOf('#/2') > -1 ) {
      $('.two').removeClass('active');
      $('.three').addClass('active');
    }
  }); 
}); 
```

所以我面临的问题是：

1.  这仅适用于下一个按钮的单击功能，如果用户单击上一个按钮，则活动类也需要更改为适当的数字，但我可能需要一种方法来准确检查他们单击上一个按钮的步骤from 并且需要将该代码复制 5 次，因为有 5 个步骤。

2.  如果用户刷新页面 span .one 将再次处于活动状态，并且用户所在的步骤将显示在页面上（刷新时不会返回到第一步）

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:38:49.893

```
jQuery(window).hashchange( function(){
    jQuery(location.hash).click();
});

jQuery(window).load( function(){
    jQuery(location.hash).click();
}); 
```

这两个功能将解决您的问题

# python - 从http请求python格式化返回

> ID：13685249
> 
> 赞同：0
> 
> 时间：2012-12-03T14:25:10.783
> 
> 标签：python, http, parsing, request, url-encoding

我正在尝试编写一个 python 脚本，它将从 http 服务器检索值并将数据更改为 csv 格式，我正在使用 httplib2 库来执行请求，但我的问题是内容的返回在 application/x -www-form-urlencoded 格式，我有将数据解析为字典的代码，但似乎无法将其作为这种字符串做任何事情，我知道对于广大用户来说这似乎很简单，因为我可以'似乎没有通过研究找到任何有关此的信息...

下面是一个示例代码，只是为了说明我正在尝试做的事情的类型和我的问题

```
import httplib2
http = httplib2.Http()

resp, content = http.request("http://example.com/foo/bar") 
```

感谢您的帮助

顺便说一句，我使用的是 python 2.7，请求自然返回的格式是 json

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:35:20.667

如果您收到编码响应，您可以使用`urllib.unquote`将转义字符替换为其“实际”表示。完成此操作后，您可以使用该`json`模块将字符串加载为 Python 对象，然后使用该`csv`模块根据响应创建 CSV。您的回复结构将决定您的最终设置方式，但希望这会让您走上正确的道路：

```
In [1]: import csv

In [2]: import json

In [3]: import urllib

In [4]: json_resp = urllib.quote('[{"name": "John Doe", "age": 35}, {"name": "Jane Doe", "age": 33}]')

In [5]: json_resp # What I believe your response looks like
Out[5]: '%5B%7B%22name%22%3A%20%22John%20Doe%22%2C%20%22age%22%3A%2035%7D%2C%20%7B%22name%22%3A%20%22Jane%20Doe%22%2C%20%22age%22%3A%2033%7D%5D'

In [6]: resp = urllib.unquote(json_resp) #'Unquote' the response

In [7]: resp
Out[7]: '[{"name": "John Doe", "age": 35}, {"name": "Jane Doe", "age": 33}]'

In [8]: content = json.loads(resp) # Turn the resp into a Python object

In [9]: fieldnames = ('name', 'age') # Specify the order in which to write fields

In [10]: with open('mycsv.csv', 'wb') as f:
   ....:     writer = csv.DictWriter(f, fieldnames)
   ....:     writer.writeheader() # Python 2.7+
   ....:     for item in content:
   ....:         writer.writerow(item)
   ....:
   ....: 
```

这将编写一个如下所示的 CSV：

```
name,age
John Doe,35
Jane Doe,33 
```

# c - 使用 Millis() 的 Arduino 草图循环

> ID：13685255
> 
> 赞同：1
> 
> 时间：2012-12-03T14:25:38.603
> 
> 标签：c, arduino

该程序的目标是向 Arduino 的 LCD 写入一个字符串，并在两个不同的消息之间循环。我当前版本的问题是它来回循环没有延迟。我怎样才能让这些一次写一个？

这是代码，我省略了一些不相关的部分：

```
 #include <LiquidCrystal.h>
  #include <string.h>
  // These are the pins our LCD uses.
  LiquidCrystal lcd(8, 9, 4, 5, 6, 7);
    // initalize the lcd, and button input at zero.
    int lcd_key     = 0;
    int adc_key_in  = 0;
    //define values for each button
    #define btnRIGHT  0
    #define btnUP     1
    #define btnDOWN   2
    #define btnLEFT   3
    #define btnSELECT 4
    #define btnNONE   5
 // read the buttons
 int read_LCD_buttons()
  {
   adc_key_in = analogRead(0);      // detects the value from the buttons
   // The buttons give values close to which values we saet them between.
   if (adc_key_in > 1000) return btnNONE; // When the input is greater than 1000 that         means no buttons are being pressed,
   if (adc_key_in < 50)   return btnRIGHT;
   if (adc_key_in < 195) return btnUP; 
   if (adc_key_in < 380) return btnDOWN; 
   if (adc_key_in < 555) return btnLEFT; 
   if (adc_key_in < 790) return btnSELECT;  
   return btnNONE; // if there is some issue with values, the programs will not break.
  }
  void setup()
  {
   Serial.begin(9600); //Set the serial monitor.
   lcd.begin(16, 2); //Set the LCD
  }
  void loop()
    {

     timer = millis();
   if (left == true) //Right alignment
         {
         lcd.clear() ; //Clear any existing text
         lcd.setCursor(5, 0); //Set cursor to right side.
         timer = millis();
         if (millis() < (timer + 5000)) {
         if (show1 == true) //See if first line should be displayed. If false, nothing is displayed.
         {
         lcd.print("Time");
         }
         //Second line
         lcd.setCursor(4, 1); 
         if (show2 == true)//See if second line should be displayed
         {
         lcd.print("12:00 PM");
         }
         }
         if ((timer + 5000) > millis() < (timer + 10000)) {
         //Display Date
         lcd.setCursor(5, 0);
         if (show1 == true)//See if first line should be displayed.
         {
         lcd.print("Date");
         }
         //Second line
        lcd.setCursor(1, 1);
        if (show2 == true)//See if second second should be displayed.
        {
        lcd.print("Nov. 16, 2012");
        }
        }
      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:11:49.607

这种情况`if ((timer + 5000) > millis() < (timer + 10000))`在 C 中没有任何意义——至少它没有达到你的预期。

它的调用如下：

*   first`(timer + 5000) > millis()`被调用，其值为 0 或 1
*   下一个 0 或 1（从第一个条件开始）与`(timer + 10000)`哪个始终为真进行比较（假设您没有溢出时间值并且您没有与大的负数进行比较）

你应该使用类似 if ((timer + 5000) > millis() && mills() < (timer + 10000)) 或者更确切地说：

```
int hlp_time = millis(); 
if ((timer + 5000) > hlp_time && hlp_time < (timer + 10000)) 
```

因为返回的时间`millis()`将在每次签入 if 条件之间有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:41:10.347

您是否尝试过设置 timer = millis(); 到循环之外？

# android - 带有圆角、实心边框和发光效果的 ImageView

> ID：13685256
> 
> 赞同：6
> 
> 时间：2012-12-03T14:25:45.417
> 
> 标签：android, android-layout, android-imageview

我想用自定义边框颜色将圆角和边框放到 ImageView 上。另外，我想用边框的颜色来实现发光效果。附上示例图片。请注意，源图像具有方形边框。我想这只能通过使用 Canvas 来实现？任何想法和示例代码？

![在此处输入图像描述](../Images/e0e76f74bacb6f346ee6cea2705f1449.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:39:09.640

这就是我为我的 ImageView 所做的，以便根据需要进行相同的更改。

制作了一张 image_shape.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<shape 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <stroke 
        android:width="1dp" 
        />
    <corners 
        android:radius="50dp" />

    <padding 
        android:left="10dp"
        android:right="10dp"
        android:top="10dp"
        android:bottom="10dp"/>

    <solid android:color="#10151D"/>

</shape> 
```

现在，把这个 xml 作为你的 imageView 的背景然后你会得到你想要的效果。现在我已经设置了自己的颜色。您可以放置​​您想要的颜色并获得圆形发光边框效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:39:47.087

尝试在可绘制文件夹中名为 roundCorners 的新 xml 文件中使用以下代码：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">

<solid android:color="#000000" />

<stroke
    android:width="1dp"
    android:color="#DDDDDD" />

<corners
    android:bottomLeftRadius="2dp"
    android:bottomRightRadius="2dp"
    android:topLeftRadius="2dp"
    android:topRightRadius="2dp" />

</shape> 
```

然后通过以下方式将其设置为布局文件中 ImageView 的背景：

```
android:background="@drawable/roundCorners" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-08T08:32:09.240

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"
    android:thickness="0dp" >
    <stroke android:color="#ff5febe7" android:width="2dp" />
    <solid android:color="#601E3232"/>
    <corners android:radius="5dp" />
</shape> 
```

# excel - 保存启用宏的 Excel 文件的正确方法是什么？

> ID：13685259
> 
> 赞同：1
> 
> 时间：2012-12-03T14:25:53.693
> 
> 标签：excel, save, vba

这是我使用 vba excel 的第 6 天，只要我需要报告格式化工具开发任务，我就会尝试学习东西，这几乎完成了。困扰我的事情是每次我尝试在 Visual Basic 编辑器和 Excel 上保存我的更改时，它都会给出一堆错误消息。我非常厌倦它，我对休息的紧张。

问题正如我在标题中所说：保存启用宏的 Excel 文件的正确方法是什么？

# c++ - 为什么将函数强制转换为除返回类型外相同的函数类型会失败？

> ID：13685262
> 
> 赞同：1
> 
> 时间：2012-12-03T14:26:02.000
> 
> 标签：c++

> **可能重复：**
> [返回类型是函数签名的一部分吗？](https://stackoverflow.com/questions/290038/is-the-return-type-part-of-the-function-signature)

跟进一个相关但切题的问题（[如何消除仅因返回类型不同而不同的函数模板？](https://stackoverflow.com/questions/13684264/how-to-disambiguate-function-templates-that-differ-only-by-return-type)），我想问一个与函数的*返回类型*不被认为是签名的一部分有关的问题的一个功能。

考虑以下代码：

```
#include <iostream>

int foo()
{
    return 0;
}

int main()
{
    long n = static_cast<long(&)()>(foo)(); // Error: incorrect return type
    int p = static_cast<int(&)()>(foo)(); // Compiles just fine 
} 
```

上面提到的代码行会导致编译错误，因为要转换为的函数类型的*返回类型与函数的**返回*类型`foo`不匹配。*`foo`*

 *但是我认为函数的返回类型在函数的签名中不起作用！

按照某种思路，既然函数签名`long(&)()`与 的签名匹配`foo`，那么`foo`对这种类型的函数的强制转换应该会成功。

然而，演员没有成功。推理哪里出错了？如果由于函数签名而强制转换不能失败，那么为什么强制转换失败？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T14:45:30.610

您是正确的，返回类型不构成函数*签名*的一部分。

但是，它确实构成函数*类型*的一部分，并且不允许将指针转换为不兼容的函数类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T14:52:05.607

返回类型**是**类型的一部分，尽管不用于*重载决议*。重要的是不要混淆这些术语。基本上，类型包括参数和返回值，但在重载决策期间，不考虑返回类型。函数或函数指针的*类型*是调用者和被调用者之间的约定，他们必须完全同意条款。

从实际的角度来看，考虑如果您的建议被允许会发生什么。想象一个调用约定，其中调用者保留空间并将指向该空间的指针传递给函数，然后函数将在该位置构造返回的对象（这实际上是一种*非常常见*的调用约定）。现在考虑您被允许执行您建议的演员表和以下用例

```
static_assert(sizeof(T1)<sizeof(T2));
T2 f();
T1 (*p)() = &f;

p();                                  // call 
```

现在，当编译器处理`p()`它时，它会在某处保留空间，并给出它需要保留的函数类型`sizeof(T1)`。然后它调用该函数，该函数最终调用`f`将`sizeof(T2)`字节写入导致溢出的位置。

即使尺寸匹配，代码也会有问题。考虑`T1==int`并`T2==float`在一个平台上`sizeof(int)==sizeof(float)`。虽然上面的代码不会导致缓冲区溢出，但存储在返回类型位置的位模式将是 a 的`float`，而不是 an 的`int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T16:32:29.843

函数的返回类型不是签名的一部分，但签名不是编译器为了正确调用函数指针或引用所引用的函数而需要知道的。

除了参数之外，编译器还需要知道返回类型，以便它可以为堆栈上的返回值腾出空间，或者从正确的寄存器中读取返回值，或者调用约定在给定的实施。

这就是为什么返回类型是函数类型的一部分——因此类型告诉编译器它在编译时需要知道什么，以便发出代码来调用函数。

> 函数签名`long(&)()`与 foo 的签名匹配

`long(&)()`不是函数签名，它是*type*。`foo(void)`是一个（表示一个）函数签名。它包括名称和参数。但是您永远不需要在 C++ 代码中指定函数签名（嗯，可能作为传递给`dlsym`或类似的字符串）。函数签名的最终表示是给定实现中函数的*错位名称*。修改方案不是标准的，它取决于实现（尽管如果不同的实现想要调用彼此的库，那么它们必须使用相同的方案，因此操作系统可能会指定一个）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:33:41.947

函数的返回类型**被**认为是其签名（及其类型）的一部分。但是，如果返回类型是“协变的”，则允许将函数指针分配给具有不同返回类型的变量。*

# javascript - 我可以使用 JAVASCRIPT/jQuery 将输入从表单保存到 HTML 中的 .txt，然后使用它吗？

> ID：13685263
> 
> 赞同：10
> 
> 时间：2012-12-03T14:26:08.040
> 
> 标签：javascript, jquery, html, css, xhtml

是否可以将文本输入（本地）从表单保存到文本文件，然后打开该文档以供以后使用？

只需使用 HTML、javascript 和 jQuery。没有数据库或 php。

/W

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T13:24:54.183

只有当用户允许像下载一样保存它并且他必须手动打开它时才可以保存，唯一的问题是建议一个名称，我的示例代码将只为 Google Chome 建议一个名称，并且只有当您使用由于`download`属性，链接而不是按钮。

您只需要一个[base64 编码库](http://www.webtoolkit.info/javascript-base64.html)和 JQuery 即可轻松完成。

```
// This will generate the text file content based on the form data
function buildData(){
  var txtData = "Name: "+$("#nameField").val()+
      "\r\nLast Name: "+$("#lastNameField").val()+
      "\r\nGender: "+($("#genderMale").is(":checked")?"Male":"Female");

  return txtData;
}
// This will be executed when the document is ready
$(function(){
  // This will act when the submit BUTTON is clicked
  $("#formToSave").submit(function(event){
    event.preventDefault();
    var txtData = buildData();
    window.location.href="data:application/octet-stream;base64,"+Base64.encode(txtData);
  });

  // This will act when the submit LINK is clicked
  $("#submitLink").click(function(event){
    var txtData = buildData();
    $(this).attr('download','sugguestedName.txt')
      .attr('href',"data:application/octet-stream;base64,"+Base64.encode(txtData));
  });
});
```

```
<!DOCTYPE html>
<html>
    <head><title></title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="base64.js"></script>
    </head>
    <body>
    <form method="post" action="" id="formToSave">
        <dl>
            <dt>Name:</dt>
            <dd><input type="text" id="nameField" value="Sample" /></dd>
            <dt>Last Name:</dt>
            <dd><input type="text" id="lastNameField" value="Last Name" /></dd>
            <dt>Gender:</dt>
            <dd><input type="radio" checked="checked" name="gender" value="M" id="genderMale" />
                Male
                <input type="radio" checked="checked" name="gender" value="F" />
                Female
        </dl>
        <p><a href="javascript://Save as TXT" id="submitLink">Save as TXT</a></p>
        <p><button type="submit"><img src="http://www.suttonrunners.org/images/save_icon.gif" alt=""/> Save as TXT</button></p>
    </form>
    </body>
</html>
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-03T05:36:59.960

**如果你问我最好的解决方案是这个。** 这将使用您选择的文件名保存文件，并使用按钮自动保存为 HTML 或 TXT 格式。

**例子：**

```
function download(filename, text) {
  var pom = document.createElement('a');
  pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + 

encodeURIComponent(text));
  pom.setAttribute('download', filename);

  pom.style.display = 'none';
  document.body.appendChild(pom);

  pom.click();

  document.body.removeChild(pom);
}

function addTextHTML()
{
    document.addtext.name.value = document.addtext.name.value + ".html"
}

function addTextTXT()
{
    document.addtext.name.value = document.addtext.name.value + ".txt"
}
```

```
<html>
  <head></head>
  <body>

    <form name="addtext" onsubmit="download(this['name'].value, this['text'].value)">

    <textarea rows="10" cols="70" name="text" placeholder="Type your text here:"></textarea>
    <br>
    <input type="text" name="name" value="" placeholder="File Name">
    <input type="submit" onClick="addTextHTML();" value="Save As HTML">
    <input type="submit" onClick="addTexttxt();" value="Save As TXT">

    </form>
  </body>
</html>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-06T16:52:13.830

据我了解，您必须将用户的输入本地保存到文本文件中。

检查此链接。看看这是否有帮助。

[将用户输入保存到本地文本文件](http://thiscouldbebetter.wordpress.com/2012/12/18/loading-editing-and-saving-a-text-file-in-html5-using-javascrip/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-03T01:38:37.233

这将用于从 HTML 页面加载文件并将文件保存到 TXT，并选择另存为

```
<html>
<body>

<table>
    <tr><td>Text to Save:</td></tr>
    <tr>
        <td colspan="3">
            <textarea id="inputTextToSave" cols="80" rows="25"></textarea>
        </td>
    </tr>
    <tr>
        <td>Filename to Save As:</td>
        <td><input id="inputFileNameToSaveAs"></input></td>
        <td><button onclick="saveTextAsFile()">Save Text to File</button></td>
    </tr>
    <tr>
        <td>Select a File to Load:</td>
        <td><input type="file" id="fileToLoad"></td>
        <td><button onclick="loadFileAsText()">Load Selected File</button><td>
    </tr>
</table>

<script type="text/javascript">

function saveTextAsFile()
{
    var textToSave = document.getElementById("inputTextToSave").value;
    var textToSaveAsBlob = new Blob([textToSave], {type:"text/plain"});
    var textToSaveAsURL = window.URL.createObjectURL(textToSaveAsBlob);
    var fileNameToSaveAs = document.getElementById("inputFileNameToSaveAs").value;

    var downloadLink = document.createElement("a");
    downloadLink.download = fileNameToSaveAs;
    downloadLink.innerHTML = "Download File";
    downloadLink.href = textToSaveAsURL;
    downloadLink.onclick = destroyClickedElement;
    downloadLink.style.display = "none";
    document.body.appendChild(downloadLink);

    downloadLink.click();
}

function destroyClickedElement(event)
{
    document.body.removeChild(event.target);
}

function loadFileAsText()
{
    var fileToLoad = document.getElementById("fileToLoad").files[0];

    var fileReader = new FileReader();
    fileReader.onload = function(fileLoadedEvent) 
    {
        var textFromFileLoaded = fileLoadedEvent.target.result;
        document.getElementById("inputTextToSave").value = textFromFileLoaded;
    };
    fileReader.readAsText(fileToLoad, "UTF-8");
}

</script>

</body>
</html> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T14:33:02.347

您可以使用`localStorage`保存数据以备后用，但不能使用 JavaScript（在浏览器中）保存到*文件。*

全面地说：您不能在浏览器中使用 JavaScript 将某些内容存储到文件中，但[使用 HTML5](http://www.html5rocks.com/en/tutorials/file/dndfiles/)可以读取文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T14:33:08.987

如果不使用服务器端逻辑，您无法将其保存为本地文件。但是，如果这符合您的需求，您可以查看 html5 的本地存储或我们的 javascript 插件作为[jStorage](https://github.com/andris9/jStorage)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-03T02:57:41.520

或者这也将以相同的方式工作，但没有保存选项：

```
<!DOCTYPE html>
<html>
<head>

<script type='text/javascript'>//<![CDATA[
window.onload=function(){
(function () {
var textFile = null,
  makeTextFile = function (text) {
    var data = new Blob([text], {type: 'text/plain'});

    // If we are replacing a previously generated file we need to
    // manually revoke the object URL to avoid memory leaks.
    if (textFile !== null) {
      window.URL.revokeObjectURL(textFile);
    }

    textFile = window.URL.createObjectURL(data);

    return textFile;
  };

  var create = document.getElementById('create'),
    textbox = document.getElementById('textbox');

  create.addEventListener('click', function () {
    var link = document.getElementById('downloadlink');
    link.href = makeTextFile(textbox.value);
    link.style.display = 'block';
  }, false);
})();

}//]]> 

</script>

</head>

<body>
  <textarea id="textbox">Type something here</textarea> <button id="create">Create file</button> <a download="info.txt" id="downloadlink" style="display: none">Download</a>

  <script>
  // tell the embed parent frame the height of the content
  if (window.parent && window.parent.parent){
    window.parent.parent.postMessage(["resultsFrame", {
      height: document.body.getBoundingClientRect().height,
      slug: "qm5AG"
    }], "*")
  }
</script>

</body>

</html> 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-12-03T14:30:30.427

答案是YES

```
<html>
<head>
</head>
<body>
<script language="javascript">
function WriteToFile()
{
var fso = new ActiveXObject("Scripting.FileSystemObject");
var s = fso.CreateTextFile("C:\\NewFile.txt", true);
var text=document.getElementById("TextArea1").innerText;
s.WriteLine(text);
s.WriteLine('***********************');
s.Close();
}
</script>

<form name="abc">
<textarea name="text">FIFA</textarea>
<button onclick="WriteToFile()">Click to save</Button>  
</form> 

</body>
</html> 
```

# plugins - 加载前在 Oracle ApEx IR 报告上显示加载动画

> ID：13685264
> 
> 赞同：0
> 
> 时间：2012-12-03T14:26:09.287
> 
> 标签：plugins, loading, oracle-apex

我正在尝试使用位于此处的以下加载动画插件：

[加载插件动画](http://apex-plugin.com/oracle-apex-plugins/dynamic-action-plugin/loading-icon_81.html)

但是在需要大约 5 - 10 秒才能加载的交互式报告 (IR) 上。

所以基本上，当用户点击一个菜单选项来运行这个 IR 时，我想显示这个加载动画，表明报表正在准备加载，然后一旦 IR 被加载，隐藏这个加载动画。

我怎样才能做到这一点？我的加载动画在报表实际加载后打开，而不是在实际加载之前。

我选择了“页面加载时触发”，甚至使用了“页面加载”事件，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:17:40.790

我已经设法从报告的菜单系统中得到这个。在我的应用程序的第 0 页上使用 jQuery 选择器动态操作和加载插件，现在可以按要求工作。

# c# - 检查 sftp 文件传输是否完成？

> ID：13685265
> 
> 赞同：1
> 
> 时间：2012-12-03T14:26:20.033
> 
> 标签：c#, .net, file, sftp, file-transfer

我们这里有一台 Windows 服务器，有一天我们将通过 sftp 获取文件夹中的一些文本文件。我没有更多信息，但也许这已经足够了。现在我应该编写一个函数，将这些文件移动到另一个文件夹中。嗯，这不应该那么难，我想......但现在我意识到我能够在文件完成之前移动它。所以我正在寻找一些解决方案，我真的很困惑。

我的解决方案是检查文件及其周围的进程。因为如果文件还没有完成，有一个复制过程，我可以检查这个过程。为方便起见，我只需要尝试锁定文件，如果没有其他进程，那么文件准备好移动了吗？

```
using (File.Open("myFile", FileMode.Open, FileAccess.Read, FileShare.None)) 
{ /*rdy!*/ } 
```

但是现在我看到人们正在写一些关于校验和测试或测试文件大小的东西，如果文件大小没有改变，那么文件就准备好了。这东西是不是有点复杂？请告诉我，我的解决方案也可以工作......我无法使用任何服务器对服务器 sftp 的东西进行测试。我只知道如果我将文件复制到另一个文件夹（通过资源管理器），这是可行的。这也可以通过 sftp 传输工作吗？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:44:24.077

文件大小检查很危险——如果上传被暂停然后又恢复怎么办？在您接受当前文件大小作为最终文件大小之前应该经过多长时间？=> 不是一个好的解决方案。

我会选择锁定，但是，这仅在写入文件的进程也以某种方式打开文件以使其被独占锁定时才有效。如果该过程不这样做，您将再次遇到问题。

另一种解决方案是使用临时名称上传文件，例如“.sftptmp”。并让上传者在完成后重命名它。这样您就可以确定文件已上传 - 只需忽略所有以“.sftptmp”结尾的文件。但是，这假设您实际上可以控制上传文件的过程。

# unix - 可以从命令行运行以自动执行浏览器操作的类似 iMacros 的程序？

> ID：13685266
> 
> 赞同：3
> 
> 时间：2012-12-03T14:26:22.573
> 
> 标签：unix, browser, selenium, imacros

这是我想做的事情：

Cron 在无头 unix 服务器上执行 iMacro（或类似 iMacro）脚本 - 本质上是为我做浏览器交互。

这可能吗？

我确信 cURL 将无法遍历 DOM 并触发用户事件。如果我可以在 unix CLI 中运行 iMacros 将是完美的，你可以，但我运行一个没有 Xorg 的无头服务器，显然 FF 需要 Xorg。带有 Lynx 的 iMacro 会很好，但我怀疑 iMacro 是否适用于 Lynx。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T15:17:44.550

老问题，但我正在寻找同样的东西，我在谷歌上找到了这篇文章。这里是答案：

有一些无头浏览器可以在没有 Xorg 的 Unix 系统上运行。您可以通过示例尝试 CasperJS、PhantomJS 或 Zombie。

# sql - Ruby on Rails - 基于查询在数据库中搜索

> ID：13685271
> 
> 赞同：0
> 
> 时间：2012-12-03T14:26:28.740
> 
> 标签：sql, ruby-on-rails, ruby, activerecord, sql-like

我有一个简单的表单，我在其中设置了一个我想浏览的查询，例如**panasonic viera**。这是关于我如何在数据库中搜索该术语的：

```
Product.where("name ilike ?", "%#{params[:q]}%").order('price') 
```

查询看起来像**%panasonic viera%**，但我需要以这种方式搜索查询：**%panasonic%viera%** - 我需要查找所有产品，标题中的单词**panasonic**或**viera** ... 但是如何制作这个查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:33:53.703

一种解决方案是将您的查询分解为单独的术语，并构建一组通过`OR`.

```
terms = params[:q].split
query = terms.map { |term| "name like '%#{term}%'" }.join(" OR ")
Product.where(query).order('price') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:33:45.473

如果您使用的是 PostgreSQL，则可以使用[`pg_search`](https://github.com/Casecommons/pg_search)gem。它支持全文搜索，带有选项`any_word`：

```
Setting this attribute to true will perform a search which will return all models containing any word in the search terms. 
```

示例来自`pg_search`：

```
class Number < ActiveRecord::Base
  include PgSearch
  pg_search_scope :search_any_word,
                  :against => :text,
                  :using => {
                    :tsearch => {:any_word => true}
                  }

  pg_search_scope :search_all_words,
                  :against => :text
end

one = Number.create! :text => 'one'
two = Number.create! :text => 'two'
three = Number.create! :text => 'three'

Number.search_any_word('one two three') # => [one, two, three]
Number.search_all_words('one two three') # => [] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T14:39:37.953

[通过ARel](https://github.com/rails/arel)怎么样

```
def self.search(query)
  words      = query.split(/\s+/)
  table      = self.arel_table
  predicates = []

  words.each do |word|
    predicates << table[:name].matches("%#{word}%")
  end

  if predicates.size > 1
    first = predicates.shift
    conditions = Arel::Nodes::Grouping.new(predicates.inject(first) {|memo, expr| Arel::Nodes::Or.new(memo, expr)})
  else
    conditions = predicates.first
  end

  where(conditions).to_a
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:33:24.523

这不工作？

```
 WHERE name LIKE "panasonic" OR name LIKE "viera" 
```

# c# - System.Windows.Forms.SaveFileDialog：保存具有相同文件扩展名的多种文件格式

> ID：13685274
> 
> 赞同：1
> 
> 时间：2012-12-03T14:26:39.223
> 
> 标签：c#, .net, winforms

我们想使用 .NET 的*System.Windows.Forms.SaveFileDialog*保存到文件。

我们有**多种**使用**相同文件扩展名**的文件格式（类似于在 Excel 中也有两种 .CSV 格式（MS-DOS 和 Macintosh））。

有谁知道我们如何获得用户选择的确切文件格式，而不仅仅是带有文件扩展名的文件名，因为它们是相同的。当然不必重新实现对话框... :-)

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:44:11.550

您可以使用`[FilterIndex](http://msdn.microsoft.com/de-de/library/system.windows.forms.filedialog.filterindex.aspx)`-Property`SaveFileDialog`来确定用户选择的 FileType。

```
SaveFileDialog oDialog = new SaveFileDialog();
oDialog.Filter = "CSV-File (Macintosh) (*.csv)|*.csv|CSV-File (MS-DOS) (*.csv)|*.csv";
oDialog.FilterIndex = 1;

if (oDialog.ShowDialog() == DialogResult.OK)
{
    switch (oDialog.FilterIndex)
    {
        case 1:
            // Handle CSV (Macintosh)
            break;
        case 2:
            // Handle CSV (MS-DOS)
            break;
    }
} 
```

# android - 自定义 ListView 适配器 [Mono Android] 中的 OutOfMemory 错误

> ID：13685275
> 
> 赞同：1
> 
> 时间：2012-12-03T14:26:40.693
> 
> 标签：android, listview, bitmap, android-listview, out-of-memory

您好 Stack Overflow Android 用户，

请帮助解决以下问题：

## 问题

我正在为列出鱼类种类的应用程序编写一个功能。我正在为适配器使用自定义 ListView 适配器类（我们称之为 FishSpeciesListAdapter）。到目前为止，我已经记录了 27 种鱼类作为程序的默认值（您最终也可以自己添加一些）。问题是，当我将适配器链接到实际的 listview xml 对象并向下滚动列表时，过了一会儿，我收到以下错误：

```
UNHANDLED EXCEPTION: Java.Lang.OutOfMemoryError: Exception of type 'Java.Lang.OutOfMemoryError' was thrown.
at Android.Runtime.JNIEnv.CallStaticObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
at Android.Graphics.BitmapFactory.DecodeByteArray (byte[],int,int) <0x001db>
at FishinTales.FishSpeciesListAdapter.GetView (int,Android.Views.View,Android.Views.ViewGroup) <0x002f7>
at Android.Widget.BaseAdapter.n_GetView_ILandroid_view_View_Landroid_view_ViewGroup_ (intptr,intptr,int,intptr,intptr) <0x00093>
at (wrapper dynamic-method) object.5dcc133f-a229-41c4-80e2-f5f5260ecdad (intptr,intptr,int,intptr,intptr) <0x0004b>

  --- End of managed exception stack trace ---
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    at android.graphics.BitmapFactory.nativeDecodeByteArray(Native Method)
    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:392)
    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:405)
    at fishintales.FishSpeciesListAdapter.n_getView(Native Method)
    at fishintales.FishSpeciesListAdapter.getView(FishSpeciesListAdapter.java:55)
    at android.widget.AbsListView.obtainView(AbsListView.java:1294)
    at android.widget.ListView.addViewBelow(ListView.java:2896)
    at android.widget.ListView.scrollListItemsBy(ListView.java:2825)
    at android.widget.ListView.arrowScrollImpl(ListView.java:2322)
    at android.widget.ListView.arrowScroll(ListView.java:2269)
    at android.widget.ListView.commonKey(ListView.java:2071)
    at android.widget.ListView.onKeyDown(ListView.java:2018)
    at android.view.KeyEvent.dispatch(KeyEvent.java:1037)
    at android.view.View.dispatchKeyEvent(View.java:3740)
    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:786)
    at android.widget.ListView.dispatchKeyEvent(ListView.java:2003)
    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
    at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
    at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
    at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    at dalvik.system.NativeStart.main(Native Method)

Unhandled Exception:
Java.Lang.OutOfMemoryError: Exception of type 'Java.Lang.OutOfMemoryError' was thrown.
at Android.Runtime.JNIEnv.CallStaticObjectMethod (intptr,intptr,Android.Runtime.JValue[]) <0x00080>
at Android.Graphics.BitmapFactory.DecodeByteArray (byte[],int,int) <0x001db>
at FishinTales.FishSpeciesListAdapter.GetView (int,Android.Views.View,Android.Views.ViewGroup) <0x002f7>
at Android.Widget.BaseAdapter.n_GetView_ILandroid_view_View_Landroid_view_ViewGroup_ (intptr,intptr,int,intptr,intptr) <0x00093>
at (wrapper dynamic-method) object.5dcc133f-a229-41c4-80e2-f5f5260ecdad (intptr,intptr,int,intptr,intptr) <0x0004b>

  --- End of managed exception stack trace ---
java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    at android.graphics.BitmapFactory.nativeDecodeByteArray(Native Method)
    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:392)
    at android.graphics.BitmapFactory.decodeByteArray(BitmapFactory.java:405)
    at fishintales.FishSpeciesListAdapter.n_getView(Native Met 
```

这是我的自定义 ListAdapter：

```
public class FishSpeciesListAdapter : BaseAdapter
{
    Context n_context;
    List<AppCode.Specie> n_specieData;

    public FishSpeciesListAdapter (Context context, List<AppCode.Specie> specieData)
    {
        this.n_context = context;
        this.n_specieData = specieData;
    }

    public override int Count {
        get { return this.n_specieData.Count; }
    }

    public override Java.Lang.Object GetItem (int position)
    {
        return null;
    }

    public override long GetItemId (int position)
    {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public override View GetView (int position, View convertView, ViewGroup parent)
    {
        View v;
        if(convertView==null){

            LayoutInflater li = LayoutInflater.FromContext(parent.Context);
            v = li.Inflate(Resource.Layout.Adapter_FishSpeciesIcon, null);
        }
        else
        {
            v = convertView;
        }
        ImageView iconImage = (ImageView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesIconImage);
        TextView nameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesNameText);
        TextView scientificNameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesScientificNameText);

        nameText.Text = this.n_specieData[position].Name;
        scientificNameText.Text = this.n_specieData[position].ScientificName;

        if (this.n_specieData[position].RelatedMedia.AttachedPhotos.Count < 1)
        {
            iconImage.SetImageResource(Resource.Drawable.Icon); 
        }
        else
        {
            iconImage.SetImageBitmap(BitmapFactory.DecodeByteArray(this.n_specieData[position].RelatedMedia.AttachedPhotos[0], 0, this.n_specieData[position].RelatedMedia.AttachedPhotos[0].Length));  
        }   

        return v;
    }
} 
```

## 代表我的其他研究

所有图像都在 100-300KB 的范围内。这真的会导致这个问题吗？

请[参考我的上](https://stackoverflow.com/questions/13684806/custom-listview-adapter-showing-incorrect-values-mono-android)一篇文章以获取其他代码，因为它有点相关但需要一个新问题。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T16:53:34.293

解决了！

它所做的是在每次调用 GetView 时将字节数组解码为位图。所以我所做的是在构造函数中将它们全部转换，并在调用 GetView 方法时制作位图缓存以供参考。

这是我更新的自定义 ListView 适配器，它可以工作。

```
public class FishSpeciesListAdapter : BaseAdapter
{
    Context n_context;
    List<AppCode.Specie> n_specieData;
    List<Bitmap> n_bitmapCache;

    public FishSpeciesListAdapter (Context context, List<AppCode.Specie> specieData)
    {
        this.n_context = context;
        this.n_specieData = specieData;
        this.n_bitmapCache = new List<Bitmap>();
        this.LoadBitmapsIntoCache();
    }

    private void LoadBitmapsIntoCache()
    {
        foreach(AppCode.Specie specie in this.n_specieData)
        {
            if (specie.RelatedMedia.AttachedPhotos.Count < 1)
            {
                this.n_bitmapCache.Add(BitmapFactory.DecodeResource(this.n_context.Resources, Resource.Drawable.Icon)); 
            }
            else
            {
                this.n_bitmapCache.Add(BitmapFactory.DecodeByteArray(specie.RelatedMedia.AttachedPhotos[0], 0, specie.RelatedMedia.AttachedPhotos[0].Length));  
            }
        }
    }

    public override int Count {
        get { return this.n_specieData.Count; }
    }

    public override Java.Lang.Object GetItem (int position)
    {
        return null;
    }

    public override long GetItemId (int position)
    {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public override View GetView (int position, View convertView, ViewGroup parent)
    {
        if(convertView==null){

            LayoutInflater li = LayoutInflater.FromContext(parent.Context);
            convertView = li.Inflate(Resource.Layout.Adapter_FishSpeciesIcon, null);
        }

        ImageView iconImage = (ImageView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesIconImage);
        TextView nameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesNameText);
        TextView scientificNameText = (TextView)convertView.FindViewById(Resource.Id.xml_adapter_fishSpeciesScientificNameText);

        nameText.Text = this.n_specieData[position].Name;
        scientificNameText.Text = this.n_specieData[position].ScientificName;
        iconImage.SetImageBitmap(this.n_bitmapCache[position]); 

        return convertView;
    }
} 
```

在构造函数中调用 LoadBitmapsIntoCache() 并将位图保存到列表后。问题已解决，我可以滚动浏览所有鱼类，而不会出现任何 OutOfMemory 错误。感谢所有帮助过的人。

# mysql - 通过桌面快捷方式执行mysql命令？

> ID：13685276
> 
> 赞同：0
> 
> 时间：2012-12-03T14:26:46.870
> 
> 标签：mysql, automation, command

在 Windows 机器上，每天我都必须通过 phpmyadmin 登录**mysql**，转到特定表并运行相同的 sql 命令进行一些清理。

我想在不设置 TRIGGER 的情况下自动执行此过程.....是否有执行此操作的命令提示符解决方案，或者可以简单地从桌面快捷方式运行的自动过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:20:11.373

编写脚本 Run.bat 并在其中复制以下内容：

mysql -h localhost -u root -ppassword -D database_name -e "清理命令"。

在您的 Windows 调度程序中安排此命令。

如果您有多个清理命令，则将它们添加到 sql 文件中，然后安排以下命令：

mysql -h localhost -u root -ppassword -D database_name < path_to_sql_file

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:30:06.727

对于 Windows，您可以使用任务调度程序。您可能无法让它登录到 phpMyAdmin。也许是 mysql 的 cmd 行？

# iphone - CGContextRestoreGState 好像没有恢复之前的状态

> ID：13685279
> 
> 赞同：1
> 
> 时间：2012-12-03T14:26:52.577
> 
> 标签：iphone, ios, ios5, core-graphics, dotted-line

因此，我需要沿轴绘制一系列虚线。在drawRect方法中我调用另一个方法来绘制轴。在那个方法中我保存GState绘制轴然后保存gstate在适当的时候再次绘制虚线，然后描边路径恢复gstate在轴上添加一些东西填充路径..事情现在是整个事情都是虚线......当我恢复gstate时，代码似乎没有丢弃虚线模式......

```
 CGContextSaveGState(ctx);
    CGContextSetFillColorWithColor(ctx, [[UIColor whiteColor] CGColor]);
 .......
    //draw a dased line
            CGContextSaveGState(ctx);
            CGContextSetLineWidth(ctx, 1.0);
            CGContextSetStrokeColorWithColor(ctx, [UIColor whiteColor].CGColor);
            CGFloat const kDashedLinesLength[]   = {1.0f, 0.5f};
            CGContextSetLineDash(ctx, 0.0, kDashedLinesLength, 2);
            CGContextMoveToPoint(ctx, LEFT_EXCLUSION_LENGTH + AXIS_LINE_WIDTH, crtYval);
            CGContextAddLineToPoint(ctx, LEFT_EXCLUSION_LENGTH + AXIS_LINE_WIDTH + self.xAxis.visibleLength , crtYval);
            CGContextStrokePath(ctx);
            CGContextRestoreGState(ctx);
...
   CGContextFillPath(ctx);
    CGContextRestoreGState(ctx); 
```

我怎么能痛到只有我需要的线被宠坏了？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T23:10:18.673

我不确定您的代码有什么问题，但这不是上下文还原中的错误，它可以正常工作。您替换为的代码中可能还有另一个错误......

可能是您的保存和恢复不平衡，这会导致各种问题 - 我会先检查一下。

我将它复制并粘贴到一个小的 iOS 测试应用程序自定义视图的 drawRect 方法中，并运行它，我看到了我所期望的。

这是按预期工作的小测试代码：

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code

    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGContextSaveGState(ctx);
    CGContextSetFillColorWithColor(ctx, [[UIColor blackColor] CGColor]);
    CGContextSetStrokeColorWithColor(ctx, [UIColor blackColor].CGColor);
    CGContextSetLineWidth(ctx, 2.0);

    //draw a dased line
    CGContextSaveGState(ctx);
    CGContextSetStrokeColorWithColor(ctx, [UIColor blueColor].CGColor);
    CGFloat const kDashedLinesLength[]   = {1.0f, 2.0f};
    CGContextSetLineDash(ctx, 0.0, kDashedLinesLength, 2);
    CGContextMoveToPoint(ctx, 100, 100 );
    CGContextAddLineToPoint(ctx, 100, 200);
    CGContextStrokePath(ctx);
    CGContextRestoreGState(ctx);

    CGContextMoveToPoint(ctx, 200, 100 );
    CGContextAddLineToPoint(ctx, 200, 200);
    CGContextStrokePath(ctx);

    CGContextFillPath(ctx);
    CGContextRestoreGState(ctx);
} 
```

并且是示例输出：

![截屏](../Images/c0757e57dc49c57f69c527ce7c706d5f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:29:04.827

您需要注意始终准确地平衡保存和恢复。我曾经在我的应用程序的一个完全不同的位置有一个或另一个太多的情况。因为 iOS 部分重用了上下文，这可能会使图形上下文处于奇怪的状态。

您应该在源代码中搜索 Save 和 Restore 的所有实例，并计算它们的数量是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:49:05.617

我想我知道你的问题。以这种方式看待它：直到您划过路径时才绘制线。因此，当您调用 CGContextAddLineToPoint（例如）时，无论何种模式生效都无关紧要。当您调用 CGContextAddLineToPoint 时，您不是在画线，而是在构建路径。我猜你绘制轴的子程序不会抚摸它们。在您稍后调用 CGContextStrokePath 之前，不会绘制轴，此时虚线图案生效。

# tridion - 无法取消发布组件

> ID：13685283
> 
> 赞同：1
> 
> 时间：2012-12-03T14:27:02.923
> 
> 标签：tridion

我正在使用 Tridion R5.3。我正在尝试删除一个组件，但它显示为已发布。无论我做什么，我都无法将其取消发布。我对数据库运行了以下查询以确定组件的发布位置。

```
SELECT *
FROM [dbo].[PUBLISH_STATES] WITH (NOLOCK)
WHERE REFERENCE_ID = 268494 
```

我收到了以下信息

*   编号：45173
*   REFERENCE_ID：268494
*   项目类型：16
*   PUBLICATION_ID：4
*   状态：1
*   STATE_CHANGE_DATE : 2006-08-18 12:50:25.597
*   PUBLICATION_TARGET_ID：2
*   TRUSTEE_ID : 43
*   TEMPLATE_REFERENCE_ID：89798
*   模板项目类型：32

我试图从 ID 为 2 的发布目标中取消发布该组件，但没有成功。

我可以安全地删除数据库中的行吗？

## 更新

根据 Nuno 的建议，在阅读[了另一个问题](https://stackoverflow.com/questions/11327484/how-to-set-ispublishedto-status-on-a-tridion-component)后，我认为我必须取消发布相关的组件模板。我已经尝试了以下方法，并且`Type Mismatch`在执行该`SetPublishedTo()`方法时得到了一个。

```
TDS.TDSE tdse = new TDS.TDSE();
var componentTemplate = (TDS.ComponentTemplate)tdse.GetObject("tcm:4-89798-32", TDSDefines.EnumOpenMode.OpenModeView);
componentTemplate.SetPublishedTo("tcm:4-268494", "tcm:0-2-65537", false, tdse.User); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:52:37.967

联系 SDL 支持后，解决方案是在相关组件的表和表中设置`STATE`字段。`0``ITEM_STATES``PUBLISH_STATES`

```
UPDATE dbo.ITEM_STATES
SET STATE = 0
WHERE ITEM_REFERENCE_ID = 268494

UPDATE dbo.PUBLISH_STATES
SET STATE = 0
WHERE REFERENCE_ID = 268494 
```

# c# - 在 Lotus Notes 8.5 的 NSF 文件中存储邮件和联系人

> ID：13685287
> 
> 赞同：0
> 
> 时间：2012-12-03T14:27:11.593
> 
> 标签：c#, lotus-notes

我们创建了 ac# 代码，它将在 nsf 中迁移邮件和联系人。到目前为止，我们为邮件和联系人创建了两个不同的 nsf 文件，因为它们都包含不同的模板，但是邮件和联系人是否可以存储在同一个 nsf 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:39:49.233

个人用户的邮箱上有一项设置，允许他们存储 iNotes 可以访问的联系人。从 Notes 客户端，转至文件 > 首选项。在“联系人”选项卡下，有一个“在复制和同步选项卡上**启用同步联系人”复选框。**

与为用户设置漫游不同，这些联系人似乎存储在我们服务器上的用户邮件文件中，因为在服务器上没有第二个 .nsf 的踪迹，但可以通过 iNotes 访问这些联系人。我不确定联系人存在于邮件文件的模板中，但它们必须存在。

可能没有完全回答你的问题，但我希望它能引导你走上正确的道路。

# c# - 如何获取单个用户的推文？

> ID：13685288
> 
> 赞同：0
> 
> 时间：2012-12-03T14:27:22.823
> 
> 标签：c#, api, twitter, stream

如何获取单个用户的推文？我知道我必须使用 Twitter Streaming API。我应该使用的网址是

```
https://userstream.twitter.com/1.1/user.json 
```

但是我该怎么说我想得到哪个用户的推文呢？我试过了

```
https://userstream.twitter.com/1.1/USERNAME.json 
```

但这不起作用。

有参数吗？

编辑：我找到了“track”参数。这行得通吗？如果我想获得“HarryPotter”的推文，我可以使用这个 URL 吗？

```
https://userstream.twitter.com/1.1/user.json#track=@harrypotter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:08:15.863

我认为您应该将 [GET statuses/user_timeline](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline)与 screen_name=USERNAME 一起使用，但我不知道您真正想要做什么。

# jquery - 从 ajax 帖子在 django 视图中创建多个对象

> ID：13685289
> 
> 赞同：4
> 
> 时间：2012-12-03T14:27:25.077
> 
> 标签：jquery, ajax, django

我有以下模型：对象 C，由对象 B 包含，由对象 A 包含

我在模板中有一个动态表单，并且使用 jQuery 函数，我可以向这个表单动态添加几个字段，每组字段代表对象（B 或 C）

当通过发布操作提交时，我想创建我的对象树。我的目标是在验证此模板时创建一个对象树。

目前它有效，但我想我的解决方案真的很脏：

*   根据表单中有多少元素，使用 js/jquery 创建列表
*   使用 $.post 作为数据参数传递这些列表
*   使用请求中的列表，在视图中的 django 数据模型中创建对象

我很确定有一个更好的解决方案：p

*   使用多个帖子通过不同的视图创建对象（A、B 和 C 不同）？（但同步问题..）
*   使用 json 直接在 js/jquery 端表示对象？
*   另一种解决方案？

非常感谢 - 为清楚起见进行了编辑

编辑：

注意：我这里的数据模型不同（我之前已经简化了）所以：会话是以前的“对象 A”练习是“对象 B”重复是“对象 C”-对不起，我希望它会足够清楚（我会在最后的帖子中更正）

在你们的帮助下，这里取得了一些进展 :) 我玩过一点 Form 和 FormSet。显然，它的强大:)

所以现在我有以下观点：

```
class RepetitionForm(forms.Form):
    weight = forms.CharField()
    count = forms.CharField()

def workoutForm(request):
    RepetitionFormSet = formset_factory(RepetitionForm, extra=1)

    if request.method == 'POST':
        repetitionFormSet = RepetitionFormSet(request.POST)

        user = get_object_or_404(User, pk=1)
        session = Session(date=datetime.date.today(), user=user)
        session.save()

        exerciseTypeRef = get_object_or_404(ExerciseTypeRef, pk=1)  
        exercise = Exercise(session = session, exerciseTypeRef = exerciseTypeRef)
        exercise.save()

        if repetitionFormSet.is_valid():
            for repetitionForm in repetitionFormSet.cleaned_data:
                if(repetitionForm.is_valid()):
                    weight = repetitionForm.data['weight']
                    count = repetitionForm.data['count']
        return HttpResponse("ok")
    else:
        repetitionFormSet = RepetitionFormSet()

    return render_to_response('workoutForm.html', {'formSet': repetitionFormSet}, context_instance=RequestContext(request)) 
```

模板方面是这样的：

```
{% csrf_token %}
{{ formSet.management_form }}
<ul id="idUlFormSet">
{% for item in formSet %}
    <li>
    {{ item }}
    </li>
{% endfor %} 
```

（模板中使用了更多代码来动态添加表单实例，因为这篇聪明的帖子描述了它 [Django - Javascript dynamic inline FormSet with autocomplete](https://stackoverflow.com/questions/10315479/django-javascript-dynamic-inline-formset-with-autocomplete)，我不会在这里解释）

目前，在提交表单时，我从视图中收到了这个错误：

“未找到关键‘重量’

如果我正在尝试

```
repetitionItem.isValid() 
```

“RepetitionForm”对象没有属性“isValid”

如果我使用 forms.ModelForm 而不是 forms.Form，也会出现同样的问题

我很困惑：p

我的模特

```
class User(models.Model):
name = models.CharField(max_length=100)
mail = models.CharField(max_length=100)
dateCreated = models.DateTimeField('User creation date')
def __unicode__(self):
    return self.name

class Session(models.Model):
date = models.DateField('Session Date')
user = models.ForeignKey(User)
def __unicode__(self):
    return self.date.strftime("%Y/%m/%d")

class ExerciseTypeRef(models.Model):
name = models.CharField(max_length=100)
desc = models.CharField(max_length=300)
def __unicode__(self):
    return self.name

class Exercise(models.Model):
session = models.ForeignKey(Session)
exerciseTypeRef = models.ForeignKey(ExerciseTypeRef)
def __unicode__(self):
    return self.exerciseTypeRef.name

class Repetition(models.Model):
exercise = models.ForeignKey(Exercise)
count = models.IntegerField()
weight = models.IntegerField() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:36:27.780

像这样为您的“A”模型制作模型表格。

```
class FormA(forms.ModelForm) :
    """Signup Form"""        
    class Meta :
        model = ObjectA 
```

在你看来：

```
from django.forms.models import modelformset_factory
def form(request) :
    # Use Modelformset_factory and exclude the FK fields
    FormBSet = modelformset_factory(ObjectB, exclude=('objecta',))
    FormCSet = modelformset_factory(ObjectC, exclude=('objectb',))

    if request.method == "POST" :
        forma = FormA(request.POST, prefix="forma")
        formbset = FormBSet(request.POST, prefix="formbset")
        formcset = FormCSet(request.POST, prefix="formcset")
        if forma.is_valid() and formbset.is_valid() and formcset.is_valid() :
            # save a
            a = forma.save()

            # save a into b
            for formb in formbset:
                b = formb.save(commit=False)
                b.objecta = a
                b.save()

            # save b into c
            for formc in formcset:
                c = formc.save(commit=False)
                c.objectb = b
                c.save()

        ... 
```

1.  在视图中初始化你的modelForms时给它们一个前缀
2.  `commit = False`这样您就可以保存上一次保存操作的结果对象
3.  使用 Formsets (https://docs.djangoproject.com/en/dev/topics/forms/formsets/#formsets) 管理 B 和 C 的 n* 个实例

## 编辑

使用`from django.forms.models import modelformset_factory` **NOT** formset_factory，还要注意排除参数。

见：[https ://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:16:50.737

现在工作！

犯了几个错误：

```
RepetitionFormSet = formset_factory(RepetitionForm, extra=1)
if request.method == 'POST':
    repetitionFormSet = repetitionFormSet(request.POST)
    #should be
    repetitionFormSet = RepetitionFormSet(request.POST) 
```

is_valid IS CRUCIAL （而不是填充对象！），我试图打电话

```
repetitionForm.isValid() 
```

这应该是一个 Java 函数，但不存在于 django 表单对象上！（愚蠢的我）

最后，有时我在没有填写字段的情况下测试了我的代码，引发了 KeyError 异常。我不确定这是否正常，我现在必须处理

非常感谢弗朗西斯！

# c# - 当另一个进程退出时在 C# 中引发事件

> ID：13685290
> 
> 赞同：6
> 
> 时间：2012-12-03T14:27:31.843
> 
> 标签：c#, wpf, events, process

我不知道这个问题是否已经被问过，但我找不到任何东西，所以如果你能找到一些东西，请引导我朝着正确的方向前进。

基本上，我想在我当前的 C# 程序中添加一个事件，以便在另一个指定进程（“example.exe”）退出时引发。那可能吗？

如果这不可能，是否有一种方法可以在通过直接路径（“C:\somefolderpaths...\example.exe”）退出指定进程时引发事件？

添加：我的程序没有启动进程 example.exe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:31:33.170

如果您使用的是 C# 4.0，您可以执行以下操作：

```
 Task.Factory.StartNew(() => 
  { 
      var process = Process.Start("process.exe");
      process.WaitForExit();
  }).ContinueWith(

      //THE CODE THAT WILL RUN AFTER PROCESS EXITED.  

  ); 
```

**编辑**

如果您不是流程的创建者，您可以使用[Process.GetProcessesByName](http://msdn.microsoft.com/en-us/library/z3w4xdc9.aspx)函数从已经可用的流程中检索流程。

```
var process = Process.GetProcessesByName("process.exe"); 
```

通过这种方式，您可以避免阻塞主线程，并在外部进程退出时运行您需要的代码。同时，继续做更重要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-12T09:12:18.357

`Exited`即使您不是流程的所有者，也可以使用该事件。这段代码工作得很好：

```
var proc = Process.GetProcessesByName("notepad")[0];

proc.EnableRaisingEvents = true;
proc.Exited += (s, e) => { Console.Write("Done"); }; 
```

`EnableRaisingEvents`发生在 .NET 端，与进程的创建无关 - 它与等待进程句柄发出信号有关。您可以使用任何等待句柄（并且进程也是等待句柄）来执行此操作，例如：

```
var registration 
 = ThreadPool.RegisterWaitForSingleObject(waitHandle, callbackMethod, null, -1, true); 
```

您实际使用单独线程（来自线程池）的唯一时间是在执行回调时。无需在等待时浪费线程什么都不做。

当然，如果你想在同步过程中等待，你仍然可以调用`WaitForExit`，最好是超时。或者您可以在 and 周围创建一个简单的包装`RegisteredWaitHandle`器`await`。

# r - 按升序/降序快速排序 data.table

> ID：13685295
> 
> 赞同：58
> 
> 时间：2012-12-03T14:27:47.397
> 
> 标签：r, performance, data.table

我有一个大约 300 万行和 40 列的 data.table。我想按组内的降序对该表进行排序，如下面的 sql 模拟代码：

```
sort by ascending Year, ascending MemberID, descending Month 
```

data.table 中是否有等效的方法来执行此操作？到目前为止，我必须将其分解为两个步骤：

```
setkey(X, Year, MemberID) 
```

这非常快，只需几秒钟。

```
X <- X[,.SD[order(-Month)],by=list(Year, MemberID)] 
```

此步骤需要更长的时间（5 分钟）。

更新：有人发表了评论`X <- X[sort(Year, MemberID, -Month)]`，后来被删除。这种方法似乎要快得多：

```
user  system elapsed 
5.560  11.242  66.236 
```

我的方法： setkey() 然后 order(-Month)

```
 user  system elapsed 
816.144   9.648 848.798 
```

我现在的问题是：如果我想在 sort(Year, MemberID, Month) 之后按 Year、MemberId 和 Month 进行汇总，data.table 是否识别排序顺序？

更新 2：回复 Matthew Dowle：

在使用 Year、MemberID 和 Month 设置键之后，我仍然每组有多个记录。我想要为每个组进行总结。我的意思是：如果我使用 X[order(Year, MemberID, Month)]，求和是否利用了 data.table 的二进制搜索功能：

```
monthly.X <- X[, lapply(.SD[], sum), by = list(Year, MemberID, Month)] 
```

更新 3：Matthew D 提出了几种方法。第一种方法的运行时间比 order() 方法快：

```
 user  system elapsed 
  7.910   7.750  53.916 
```

马修：让我感到惊讶的是转换月份的符号需要大部分时间。没有它，setkey 的速度非常快。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-03T15:47:49.957

### 2014 年 6 月 5 日更新：

data.table v1.9.3 的当前开发版本实现了两个新功能，即：`setorder`和`setorderv`，这正是您所需要的。这些函数通过选择在每列上选择升序或降序来对`data.table` *按引用重新排序。*查看`?setorder`更多信息。

此外，`DT[order(.)]`默认情况下还优化为使用`data.table`'s *internal fast order*而不是`base:::order`. 与 不同`setorder`，这将制作数据的完整副本，因此内存效率较低，但仍将比使用 base 的顺序操作快几个数量级。

### 基准：

这是使用`setorder`, data.table 的内部快速顺序和 with的速度差异说明`base:::order`：

```
require(data.table) ## 1.9.3
set.seed(1L)
DT <- data.table(Year     = sample(1950:2000, 3e6, TRUE), 
                 memberID = sample(paste0("V", 1:1e4), 3e6, TRUE), 
                 month    = sample(12, 3e6, TRUE))

## using base:::order
system.time(ans1 <- DT[base:::order(Year, memberID, -month)])
#   user  system elapsed 
# 76.909   0.262  81.266 

## optimised to use data.table's fast order
system.time(ans2 <- DT[order(Year, memberID, -month)])
#   user  system elapsed 
#  0.985   0.030   1.027

## reorders by reference
system.time(setorder(DT, Year, memberID, -month))
#   user  system elapsed 
#  0.585   0.013   0.600 

## or alternatively
## setorderv(DT, c("Year", "memberID", "month"), c(1,1,-1))

## are they equal?
identical(ans2, DT)    # [1] TRUE
identical(ans1, ans2)  # [1] TRUE 
```

在此数据上，基准测试表明 data.table 的顺序比这里**快****约 79 倍，**`base:::order`比这里快约 135 倍。`setorder`**`base:::order`**

 **`data.table`总是在 C 语言环境中排序/排序。如果您需要在其他语言环境中订购，那么您才需要使用`DT[base:::order(.)]`.

所有这些新的优化和功能共同构成了[FR #2405](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=2405&group_id=240&atid=978)。[还添加了 bit64::integer64 支持](https://github.com/Rdatatable/data.table/issues/703)。

* * *

> **注意：**请参阅历史/修订以获取较早的答案和更新。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-03T15:45:05.347

评论是我的，所以我会发布答案。我删除了它，因为我无法测试它是否等同于你已经拥有的。很高兴听到它更快。

```
X <- X[order(Year, MemberID, -Month)] 
```

总结不应取决于行的顺序。**

# sql - 如何对 DECIMAL（或 INTEGER）字段执行 LIKE 查询？

> ID：13685299
> 
> 赞同：2
> 
> 时间：2012-12-03T14:28:08.500
> 
> 标签：sql, informix

是否可以对包含 DECIMAL 类型的表列执行 LIKE 语句？或者，给定十进制（或整数）字段中的数字，选择匹配行的最佳方法是什么？

例如：

```
Name  Age
...   ...
John  25
Mary  76
Jim   45
Erica 34
Anna  56
Bob   55 
```

执行类似`SELECT * FROM table WHERE age LIKE 5`会返回：

```
Name  Age
John  25
Jim   45
Anna  56
Bob   55 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:38:57.007

从您的问题中不清楚您到底想要实现什么，但根据示例查询，您需要做的过滤应该可以使用普通的算术运算符来实现。

```
SELECT * FROM table WHERE MOD(age, 10) = 5 -- All records where the age ends in 5 
```

或者：

```
SELECT * FROM table WHERE MOD(age, 5) = 0 -- All records where age is divisible by 5 
```

* * *

既然您已经澄清，虽然您使用的是一个`DECIMAL`字段，但实际上并没有将其用作数值（好像您愿意，要求不存在），其他人给出的答案是合理的 - 将字段转换为文本值并使用`LIKE`它。

或者，将字段的类型更改为更适合您使用它的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:35:32.167

您可以将您的十进制字段转换为 varchar，然后像这样应用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-03T14:39:27.750

如果您创建查询

```
select name from table where age like '%5%' 
```

你可以做到这一点（至少在 mysql 和 db2 中）但是如果你喜欢匹配一个数字，你应该使用类似的东西：

```
select name from table where age > minimum and age < maximum 
```

或者，如果您真的有兴趣查询最后一个数字，请尝试与模数进行比较。

# javascript - 在 IE9 中使用 ajax 调用中的 html 更新 div

> ID：13685300
> 
> 赞同：0
> 
> 时间：2012-12-03T14:28:10.110
> 
> 标签：javascript, jquery, internet-explorer-9, innerhtml

我正在尝试将来自 ajax 调用的数据添加到我页面上的 div 中。以下在 webkit 浏览器中工作正常，但在 IE 中失败 -

```
$.ajax({
    type: 'POST',
    url: '/cart/add_to_cart',
    data: {'item_id': item_id},
    success: function(data) {
        $('#cart_summary').html(data);
    }
)}; 
```

我的html如下：

```
<div id="cart_summary">
    <a class='link_to_cart' href="/cart/">
        <span> CART &#40;5&#41; &pound;1054.75 </span>
        <img id="cart_icon" src="/static/images/cart_icon.tiff">
    </a>
</div> 
```

我试过放弃jQuery`.html()`调用并使用

```
var cartSummary = document.getElementById('cart_summary');
cartSummary.innerHTML = data; 
```

但这也失败了（在 IE 调试器中查看 cartSummary.innerHTML 的结果显示了我想要的 html，但它没有显示在页面上）。

我也尝试了 jQuery 的各种组合，`.remove()` `.text()`但`.append()`无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:35:15.820

这可能会有所帮助：

**jQuery Ajax 错误处理函数**

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

添加后，调用您的ajax函数，您将获得错误详细信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T10:23:53.803

好的，我找到了问题所在。我写了一个狡猾的 django 模板标签，它抛出了一个未封闭的`<a>`标签。Internet Explorer 正在（非常）奇怪地处理这个问题并把 dom 弄得一团糟。

这样做的结果是我有两个`<div id="cart_summary">`元素（仅在 IE 上 - 我从来没有弄清楚为什么）。可以想象，这给`document.getElementById('cart_summary')`和带来了问题`$('#cart_summary')`。

解决方案是删除重复的元素 id。

（非常感谢Palash Mondal、rcdmk、Explosion Pills、WebweaverD 和Wirey，他们花时间研究我的问题）。

# javascript - 在 DFP 广告管理系统 (SB) iframe 之外创建 jQuery 对话框

> ID：13685301
> 
> 赞同：1
> 
> 时间：2012-12-03T14:28:13.260
> 
> 标签：javascript, jquery, jquery-ui, dialog, google-dfp

我需要创建一个通过 DFP 广告管理系统 (SB) 提供的自定义对话框。DFP SB 通过 iframe 提供其横幅广告，这是导致问题的原因。我已经为 jquery 对话框创建了代码，但它不会在 iframe 之外中断并显示在它的父级中。

如何让对话框相对于 iframe 的父窗口而不是在 iframe 内显示？

或者也许有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:34:16.010

如果您有权访问该页面，则广告将显示在该页面上非常简单。

将对话框的代码移动到将显示广告的页面，然后只需从广告 iframe 调用主机页面上的 jQuery，如下所示：

```
<script>
    top.$('body').append('<div>This will be appended to the host page body</div>');
</script> 
```

或者，您仍然可以在 iframe 内构建广告，然后将其“复制”到主机页面，如下所示：

```
<script>
    // Build element 
    $('body').append('<div id="copythis">This will be copied to the host page</div>');

    // Select element to be copied to host page
    var el = $('#copythis');

    // Insert into host page
    top.$('body').append(el);
</script> 
```

希望这足以让你走上正确的道路。如果不发布您的代码，我会再看一下。

# c# - 在最后一个节点插入单链表

> ID：13685303
> 
> 赞同：0
> 
> 时间：2012-12-03T14:28:18.577
> 
> 标签：c#, linked-list, nullreferenceexception

我正在处理链表..我在第一个节点上成功插入和删除了一个节点..但是当我最后尝试插入节点时..它给出一个错误“对象引用未设置为对象的实例”

我的逻辑是正确的，但是 Visual Studio 正在生成一个异常，不知道为什么请帮帮我..

完整代码如下

```
class MyList
{
    private Node first;
    private Node current;
    private Node previous;

    public MyList()
    {
        first = null;
        current = null;
        previous = null;
    }

    public void InsertLast(int data)
    {
        Node newNode = new Node(data);

        current = first;

        while (current != null)
        {
            previous = current;
            current = current.next;
        }

        previous.next = newNode;
        newNode.next = null;
    }

    public void displayList()
    {
        Console.WriteLine("List (First --> Last): ");
        Node current = first;
        while (current != null)
        {
            current.DisplayNode();
            current = current.next;
        }
        Console.WriteLine(" ");
    }
}

class Node
{
    public int info;
    public Node next;

    public Node(int a)
    {
        info = a;
    }

    public void DisplayNode()
    {
        Console.WriteLine(info);
    }
}

class Program
{
    static void Main(string[] args)
    {
        MyList newList = new MyList();

        newList.InsertLast(10);
        newList.InsertLast(20);
        newList.InsertLast(30);
        newList.InsertLast(40);

        newList.displayList();

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:40:01.010

基本上你将不得不处理一个空列表的情况。在您当前的代码中，当列表为空时，您的上一个、当前和第一个都等于`null`. 所以你得到一个错误，因为你试图`previous.next()`在之前的 equals 时分配一个值`null`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:33:24.033

如果列表为空，则 first 将等于 null 并且当您尝试执行此操作时您的代码将引发异常，`previous.next = newNode;`因为`previous`is 也是`null`. 添加第一个节点时，您必须首先添加新元素，因此重写代码如下：

```
public void InsertLast(int data)
{
      Node newNode = new Node(data);
      if (first == null)
      {
           first = newNode;
      }
      else
      {
           current = first;

           while (current != null)
           {
                previous = current;
                current = current.next;
           }
           previous.next = newNode;
      }
      newNode.next = null;
} 
```

**编辑：**您可以像这样实现它，但要注意拳头是否为空以及只有第一个节点的情况。检查方法：

```
public void RemoveLast()
{            
      if (first != null)//there is no point in removing since the list is empty
      {
           if (first.next == null) //situation where list contains only one node
                first = null;
           else //all other situations
           {
                current = first;

                while (current.next != null)
                {
                    previous = current;
                    current = current.next;
                }
                previous.next = null;
           }
      }
} 
```

# java - 获取类层次结构的所有字段

> ID：13685311
> 
> 赞同：3
> 
> 时间：2012-12-03T14:28:43.607
> 
> 标签：java, class, reflection

我有课：

```
ClassA{
 public String filedA;
}

ClassB extends ClassA{
 public String filedB;
}

ClassC extends ClassB{
 public String filedC;
} 
```

然后我创建对象：

```
ClassC c=new ClassC();
c.fieldC="TestC";
c.fieldA="TestA";
c.fieldB="TestB"; 
```

在我尝试获取所有字段后，我打电话给

```
Field[] fields=c.getClass().getDeclaredFields(); 
```

但我得到的数组只有一项

```
fields[fieldC] 
```

如何从所有类中获取所有字段包括扩展？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T14:30:18.957

尝试以下操作：

```
Field[] fields = c.getClass().getFields(); 
```

如果您想要所有超类字段，请参阅以下内容：

[使用 Java 反射检索继承的属性名称/值](https://stackoverflow.com/questions/1042798/retrieving-the-inherited-attribute-names-values-using-java-reflection)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T14:36:08.423

您的 C 类不扩展任何类。然后，`getDeclaredFields()`只返回`String filedC`如您所见。你不能这样做`c.fieldA="TestA"`，`c.fieldB="TestB"`因为你的类没有声明这个字段。无论如何，在 C 扩展 B 和 B 扩展 A 的情况下，[getFields()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getFields%28%29)方法仅返回公共字段（包括继承的）：

> 返回一个包含 Field 对象的数组，反映了由此 Class 对象表示的类或接口的所有可访问公共字段。

并且[getDeclaredFields()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredFields%28%29)返回类中声明的所有字段（不包括继承的）：

> 返回一个 Field 对象数组，反映由此 Class 对象表示的类或接口声明的所有字段。这包括公共、受保护、默认（包）访问和私有字段，但不包括继承的字段。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-12T08:54:49.800

如果您不想重新发明轮子，您可以依赖[Apache Commons Lang](http://commons.apache.org/proper/commons-lang/)版本 3.2+，它提供[`FieldUtils.getAllFieldsList`](http://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/reflect/FieldUtils.html#getAllFieldsList(java.lang.Class))：

```
import java.lang.reflect.Field;
import java.util.AbstractCollection;
import java.util.AbstractList;
import java.util.AbstractSequentialList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;

import org.apache.commons.lang3.reflect.FieldUtils;
import org.junit.Assert;
import org.junit.Test;

public class FieldUtilsTest {

    @Test
    public void testGetAllFieldsList() {

        // Get all fields in this class and all of its parents
        final List<Field> allFields = FieldUtils.getAllFieldsList(LinkedList.class);

        // Get the fields form each individual class in the type's hierarchy
        final List<Field> allFieldsClass = Arrays.asList(LinkedList.class.getFields());
        final List<Field> allFieldsParent = Arrays.asList(AbstractSequentialList.class.getFields());
        final List<Field> allFieldsParentsParent = Arrays.asList(AbstractList.class.getFields());
        final List<Field> allFieldsParentsParentsParent = Arrays.asList(AbstractCollection.class.getFields());

        // Test that `getAllFieldsList` did truly get all of the fields of the the class and all its parents 
        Assert.assertTrue(allFields.containsAll(allFieldsClass));
        Assert.assertTrue(allFields.containsAll(allFieldsParent));
        Assert.assertTrue(allFields.containsAll(allFieldsParentsParent));
        Assert.assertTrue(allFields.containsAll(allFieldsParentsParentsParent));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T14:32:36.947

`ClassC`如果源自`ClassB`（并且可能源自`ClassA`等），这将与反射一起使用。我认为这是一个错字？然后这个：

```
Field[] fields = c.getClass().getFields(); 
```

会按预期工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-03T14:48:08.143

`getDeclaredFields()`您正在使用的，不包含从超类继承的字段。

如果你想要所有的clields只需使用`getFields()`方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T14:31:23.357

你应该能够得到它们

```
Field[] fields = c.getClass().getFields(); 
```

这将返回所有可访问的字段。

# iphone - 是否要在后台队列中调用 AVAudioPlayer 的 -prepareToPlay？

> ID：13685322
> 
> 赞同：1
> 
> 时间：2012-12-03T14:29:35.960
> 
> 标签：iphone, ios, ipad, avfoundation, avaudioplayer

此准备方法在成功时返回 BOOL 并且音频文件很重。我想在主线程上这样做不是一个好主意。那么这个方法返回时，后台调用这个并报告给主队列是否可以呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:35:31.913

这样做很好，出于同样的原因，我正在我的一个项目中这样做。

# scalability - 水平扩展基于 Web 的应用程序

> ID：13685328
> 
> 赞同：0
> 
> 时间：2012-12-03T14:29:55.090
> 
> 标签：scalability

我有一个同时运行 3 个服务的 Web 应用程序：“A”、“B”和“C”，它们共享来自外部数据库的相同数据。

“A”可能使用比“B”和“C”更多的资源，并且可能需要自己的专用机器。

我正在考虑通过以下方式水平扩展应用程序（通过部署新机器，而不是更新当前服务器的配置）：

*   以“每分钟”间隔测量服务器上的负载
*   如果负载超过 90% 超过 30 分钟，则部署一台新机器运行服务“A”、“B”或“C”的新实例，具体取决于哪个负载最高。
*   如果当前监控的机器的负载低于 10% 并且它不是唯一运行的机器，则关闭机器。

有没有关于这个主题的书或推荐的网站？

软件工具如何提供帮助？（或者更具体地说，我可能会考虑 Amazon EC2）

非常感谢，弗拉德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:26:05.457

Amazon 的 Elastic Load Balancer 似乎正是您所需要的。如果它们在 EC2 中运行，它将允许您扩展您的实例。它支持 HTTP/HTTPS 但其他非 Web TCP 服务。

RightScale 也是一种选择。它还支持除 EC2 之外的其他云。

# awk - 用 awk 计算距离

> ID：13685335
> 
> 赞同：2
> 
> 时间：2012-12-03T14:30:15.093
> 
> 标签：awk

我有如下所示的文本文件。

```
 CA     21.660  -6.795  11.323 
  C     28.811  -9.801  16.262
  O     23.221  -9.266  13.799
  CB    33.528 -11.934  17.900
  N     21.660  -6.795  11.323
  O     32.410  -8.539  16.566 
```

我想计算原子坐标之间的距离。例如，我想读取文件夹中的所有文件并计算第一个和第二个原子之间的距离，第一个和第三个，第一个和第四个等。然后，第二个和第三个，第二个和第四个，第二个和第五个等。公式是 SQRT ((X1-X2)^2 + (Y1-Y2)^2 + (Z1-Z2)^2)。我想用输入文件的名称将每个文件的输出保存到另一个文件夹中。我怎样才能用 awk 做到这一点？

期望的输出

```
CA-C  4.52
CA-O  3.80
CA-CB 5.68
CA-N  8.94
--
--
--
N-O   5.98 
```

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:09:41.050

这是一种使用方法`GNU awk`：

```
awk 'FNR==NR { a[NR]=$0; next } { for (i=FNR+1;i<=NR-1;i++) { split(a[i],b); print $1 "-" b[1], sqrt(($2-b[2])^2 + ($3-b[3])^2 + ($4-b[4])^2) | "column -t" } NR--}' file file 
```

它可以满足您的要求，但是您提供的算法与您需要的不同，或者您的预期输出计算不正确（我假设后者是问题所在）。无论如何，这是结果：

```
CA-C   9.19601
CA-O   3.83055
CA-CB  14.5092
CA-N   0
CA-O   12.0869
C-O    6.13194
C-CB   5.42981
C-N    9.19601
C-O    3.82595
O-CB   11.4092
O-N    3.83055
O-O    9.62406
CB-N   14.5092
CB-O   3.81517
N-O    12.0869 
```

如果您需要对当前工作目录中的多个文件执行此操作，并假设此目录中只有感兴趣的文件，您可以围绕该语句包装一个`for`循环。`awk`显然，您需要更改`/path/to/folder/`您选择的路径才能使其正常工作：

```
for i in *; do awk 'FNR==NR { a[NR]=$0; next } { for (i=FNR+1;i<=NR-1;i++) { split(a[i],b); print $1 "-" b[1], sqrt(($2-b[2])^2 + ($3-b[3])^2 + ($4-b[4])^2) | "column -t > /path/to/folder/" FILENAME } NR--}' "$i"{,}; done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T16:18:30.580

如果 atom 是包含您的数据的文件

```
awk '{ p[NR,0]=$1;p[NR,1]=$2;p[NR,2]=$3;p[NR,3]=$4; for (j=1;j<=NR-1;j++) print p[j,0]"-"$1,sqrt((p[NR,1]-p[j,1])^2+(p[NR,2]-p[j,2])^2+(p[NR,3]-p[j,3])^2) }' atoms 
CA-C 9.19601
CA-O 3.83055
C-O 6.13194
CA-CB 14.5092
C-CB 5.42981
O-CB 11.4092
CA-N 0
C-N 9.19601
O-N 3.83055
CB-N 14.5092
CA-O 12.0869
C-O 3.82595
O-O 9.62406
CB-O 3.81517
N-O 12.0869 
```

有一个问题：

*   您的数据包含两个相同的 O 原子，因此很难说输出中哪个是哪个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:22:53.347

这样的事情听起来像你想要的，但显然这两个结果都不符合你所说的它们应该澄清你的算法：

```
$ awk 'NR>1{print p[1]"-"$1,sqrt((p[2]-$2)^2 + (p[3]-$3)^2 + (p[4]-$4)^2)} {split($0,p) }' file
CA-C 9.19601
C-O 6.13194
O-CB 11.4092
CB-N 14.5092
N-O 12.0869

$ awk 'NR>1{print p[1]"-"$1,sqrt(($2-p[2])^2 + ($3-p[3])^2 + ($4-p[4])^2)} {split($0,p) }' file
CA-C 9.19601
C-O 6.13194
O-CB 11.4092
CB-N 14.5092
N-O 12.0869 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T05:55:44.777

下面是awk中的代码：

```
awk '{a[NR]=$0}
     END
     { 
       for(i=1;i<=NR;i++)
        {split(a[i],k);
         for(j=i+1;j<=NR;j++)
          {
           split(a[j],l);
           dist=(k[2]-l[2])*(k[2]-l[2])+(k[3]-l[3])*(k[3]-l[3])+(k[4]-l[4])*(k[4]-l[4]);
           print k[1]"-"l[1],sqrt(dist);
          }
        }
     }' your_file 
```

下面是测试：

```
> cat temp
 CA     21.660  -6.795  11.323 
  C     28.811  -9.801  16.262
  O     23.221  -9.266  13.799
  CB    33.528 -11.934  17.900
  N     21.660  -6.795  11.323
  O     32.410  -8.539  16.566 
```

执行：

```
> awk '{a[NR]=$0}END{for(i=1;i<=NR;i++){split(a[i],k);for(j=i+1;j<=NR;j++){split(a[j],l);dist=(k[2]-l[2])*(k[2]-l[2])+(k[3]-l[3])*(k[3]-l[3])+(k[4]-l[4])*(k[4]-l[4]);print k[1]"-"l[1],sqrt(dist);}}}' temp
CA-C 9.19601
CA-O 3.83055
CA-CB 14.5092
CA-N 0
CA-O 12.0869
C-O 6.13194
C-CB 5.42981
C-N 9.19601
C-O 3.82595
O-CB 11.4092
O-N 3.83055
O-O 9.62406
CB-N 14.5092
CB-O 3.81517
N-O 12.0869
> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T18:45:43.680

Perl 解决方案可能是：

```
#!/usr/bin/perl
use strict;
use warnings;

my @data = map [split], <DATA>;

for (my $i = 0; $i < @data; $i++) {
    for (my $j = $i+1; $j < @data; $j++) {
        my $d = distance( @data[$i, $j]);
        printf("%-6s%7.4f\n",
            join("-", map $_->[0], @data[$i, $j]), $d) if $d <= 6;
    }
}

sub distance {
    my ($coord1, $coord2) = @_;
    my $sum;
    for my $k (1 .. $#$coord1) {
        $sum += ($coord1->[$k] - $coord2->[$k])**2;
    }
    return sqrt $sum;
}

__DATA__
CA     21.660  -6.795  11.323 
C     28.811  -9.801  16.262
O     23.221  -9.266  13.799
CB    33.528 -11.934  17.900
N     21.660  -6.795  11.323
O     32.410  -8.539  16.566 
```

# android - 绘制和注释随机点

> ID：13685337
> 
> 赞同：0
> 
> 时间：2012-12-03T14:30:24.307
> 
> 标签：android, plot, achartengine, graphic

我已经很努力，但找不到一种方法来绘制一些随机点并在每个点上放置一个文本注释。

我的情节很简单。这里是点 {(1,5),(1,10),(2,3), (7,10),(9,11),(9,13)} 对于绘制的每个点，我会喜欢在上面添加文本注释。

我搜索了散点图、条形图、系列图等的高低，但找不到做我想做的事情的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:22:36.450

我遇到了同样的问题，据我所知，achartengine 目前不支持注释（我在论坛上问过）。

[Android Plot和](http://androidplot.com/ "安卓绘图")[这里](https://stackoverflow.com/questions/9741300/charts-for-android "安卓图表")提到的其他免费图表解决方案不支持注释，唯一的一个是[AFreeChart](http://code.google.com/p/afreechart/ "自由图表")，它是 Android 的 JFreeChart 的一个端口，我目前正在使用它，它很棒，并且比 achartengine 具有更多的功能。

* * *

**编辑：**

看到[这里](https://groups.google.com/forum/?fromgroups=#!topic/achartengine/mNAv9owZ7JY "这里")，我已经修改了 ace 源代码以具有注释功能。

# python - 从芹菜中的taskset_id中检索GroupResult？

> ID：13685344
> 
> 赞同：14
> 
> 时间：2012-12-03T14:30:46.057
> 
> 标签：python, celery, celery-task

我正在使用[官方文档中描述的 celery group 开始一组 celery 任务](http://celery.github.com/celery/userguide/tasksets.html#groups)

我还将组（任务集）ID 存储到数据库中，以便轮询 celery 的任务集状态。

```
job = group([
        single_test.s(1, 1),
        single_test.s(1, 2),
        single_test.s(1, 3),
    ])

result = job.apply_async()

test_set = MyTestSet()
test_set.taskset_id = result.id

# store test_set into DB 
```

有没有办法`result`从任务集 id 开始获取 GroupResult 对象（即 my ）？[类似于this question](https://stackoverflow.com/questions/5544611/retrieve-a-task-result-object-given-a-task-id-in-celery)中所做的事情，但与芹菜组合作。

我已经尝试过这样做：

```
r = GroupResult(taskset_id) 
```

但它不起作用，因为`r.results()`总是空的。

我应该使用`GroupResult.save()`和`GroupResult.restore()` [方法](http://docs.celeryproject.org/en/master/reference/celery.result.html#celery.result.GroupResult)吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-06T19:57:07.467

是的，您必须保存结果然后恢复它。

```
job = group([
    single_test.s(1, 1),
    single_test.s(1, 2),
    single_test.s(1, 3),
])
result = job.apply_async()
result.save()

from celery.result import GroupResult
saved_result = GroupResult.restore(result.id) 
```

我遇到了同样的问题，在看到您有关保存/恢复的提示后，我终于明白了。

# c# - 登录无效给予指定的演员是无效的

> ID：13685359
> 
> 赞同：0
> 
> 时间：2012-12-03T14:32:19.377
> 
> 标签：c#, winforms, error-handling

我有一个登录表单并修改了其他来源的一些代码以使其适合我的情况。由于数字为空或“无限”，登录无效时出现错误。

```
public int Validate_Login(String Username, String Password)
{

    //SqlConnection con = new SqlConnection(@"User id=judgment_day;Password=Kit$hen;Server=216.40.232.82, 2153;Database=new_judgment-system");
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["CityCollectionCSharp.Properties.Settings.newCityCollectionConnectionString"].ConnectionString);
    SqlCommand cmdselect = new SqlCommand();
    cmdselect.CommandType = CommandType.StoredProcedure;
    cmdselect.CommandText = "[dbo].[prcLoginv]";
    cmdselect.Parameters.Add("@Username", SqlDbType.VarChar, 50).Value = Username;
    cmdselect.Parameters.Add("@UPassword", SqlDbType.VarChar, 50).Value = Password;
    cmdselect.Parameters.Add("@OutRes", SqlDbType.Int, 4);
    cmdselect.Parameters["@OutRes"].Direction = ParameterDirection.Output;
    cmdselect.Connection = con;
    int Results = 0;

    try
    {
        con.Open();
        cmdselect.ExecuteNonQuery();
        Results = (int)cmdselect.Parameters["@OutRes"].Value;
    }
    catch (SqlException ex)
    {
        lblMessage.Text = ex.Message;
    }
    finally
    {
        cmdselect.Dispose();

        if (con != null)
        {
            con.Close();
        }
    }
    return Results;
} 
```

错误发生在这一行：

```
Results = (int)cmdselect.Parameters["@OutRes"].Value; 
```

我将如何进行错误处理，所以当它不是一个有效的整数时，它将触发代码所在的无效登录：

```
protected void btnlogin_Click(object sender, EventArgs e)
{
    int Results = 0;

    if (txtUsername.Text != null && txtPassword.Text != null)
    {
        Results = Validate_Login(txtUsername.Text, txtPassword.Text);

        if (Results > 0)
        {
            lblMessage.Text = "Login is Good";

            GlobalVariables.Globals.SetGlobalInt(Results);
            lblMessage.Text = "'" + GlobalVariables.Globals.GlobalInt + "'";
            this.Hide();
            frmSwitch frm = new frmSwitch();
            frm.Show();   
        }
        else
        {
            lblMessage.Text = "Invalid Login";
            lblMessage.ForeColor = System.Drawing.Color.Red;
        }
    }
    else
    {
        lblMessage.Text = "Please make sure that the username and the password is Correct";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:50:05.560

您似乎拥有大部分代码。我认为您不了解如何处理异常 - 阅读[异常处理](http://msdn.microsoft.com/en-us/library/ms173162%28v=vs.80%29.aspx)，您应该能够按照下面的示例进行操作。

由于您没有指定`Exception`引发的确切内容，因此我添加了一个通用异常处理程序。

```
 try
    {
        con.Open();
        cmdselect.ExecuteNonQuery();
        // Check for null values
        if (cmdselect.Parameters["@OutRes"].Value != DBNull.Value)
        {
           Results = (int)cmdselect.Parameters["@OutRes"].Value;
        }
    }
    catch (SqlException ex)
    {
        lblMessage.Text = ex.Message;
    }
    catch (Exception generalEx)
    {
        // Do something with the error - Just displaying for now
        lblMessage.Text = ex.Message;
    }
    finally
    {
        cmdselect.Dispose();

        if (con != null)
        {
            con.Close();
        }
    } 
```

该代码仅用于说明，请根据需要进行编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:57:37.050

试试这个：

```
try
{
    con.Open();
    cmdselect.ExecuteNonQuery();
    object o = (int)cmdselect.Parameters["@OutRes"].Value;
    if (o == DBNull.Value)
        return 0;
    return (int)o;
}
catch (SqlException ex)
{
    lblMessage.Text = ex.Message;
}
finally
.... 
```

并且`finally`块负责资源。

# load-balancing - WebFarm URL 重写

> ID：13685360
> 
> 赞同：2
> 
> 时间：2012-12-03T14:32:20.967
> 
> 标签：load-balancing, web-farm

我已经配置了 3 台服务器，一台是控制器，另外两台服务器在端口 81 上运行 ASP.NET 应用程序。应用程序可以直接使用端口 81 从两台服务器访问。

现在，我希望使用端口 81 从控制器（用于负载平衡）访问这些应用程序。

如何配置相同的 URL 重写规则。

从浏览器（客户端计算机），我正在使用 IP 地址访问我的所有服务器。

当应用程序使用端口 80 时，为 Web Farm 创建的 URL 重写规则正常工作，负载平衡按预期完成。

谢谢！！！

# sql - 在 SQL 语句中外连接绑定变量 (Oracle 11g)

> ID：13685361
> 
> 赞同：1
> 
> 时间：2012-12-03T14:32:22.690
> 
> 标签：sql, oracle11g, bind-variables

我们有很多使用可以为 Null 的绑定变量的选择语句。Null 表示 Bind-Value 不应限制语句。

这是我们正在做的一个简单示例：

```
CREATE TABLE PERSON AS
SELECT LEVEL AS ID, 'Person_'||LEVEL AS NAME
FROM DUAL 
CONNECT BY LEVEL <= 5000;

create index IPERSON1 on PERSON(NAME, ID);

begin
dbms_stats.gather_table_stats(user, 'PERSON');
end;

select * from PERSON
where NAME = nvl(:b1, NAME);

select * from PERSON
where (NAME =:b1 or :b1 is null); 
```

这 2 个语句具有以下执行计划：

```
select * from PERSON where NAME =nvl(:b1, NAME): 
------------------------------------------------------------------------------------
| Id  | Operation              | Name     | E-Rows |E-Bytes| Cost (%CPU)| E-Time   |
------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT       |          |        |       |     4 (100)|          |
|   1 |  CONCATENATION         |          |        |       |            |          |
|*  2 |   FILTER               |          |        |       |            |          |
|*  3 |    INDEX FAST FULL SCAN| IPERSON1 |    500 |  7500 |     2   (0)| 00:00:01 |
|*  4 |   FILTER               |          |        |       |            |          |
|*  5 |    INDEX RANGE SCAN    | IPERSON1 |      1 |    15 |     2   (0)| 00:00:01 |
------------------------------------------------------------------------------------

select * from PERSON where (NAME =:b1 or :b1 is null): 
-----------------------------------------------------------------------------
| Id  | Operation         | Name   | E-Rows |E-Bytes| Cost (%CPU)| E-Time   |
-----------------------------------------------------------------------------
|   0 | SELECT STATEMENT  |        |        |       |     3 (100)|          |
|*  1 |  TABLE ACCESS FULL| PERSON |     26 |   390 |     3   (0)| 00:00:01 |
----------------------------------------------------------------------------- 
```

那么，您认为这种外连接的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:12:58.970

我认为这个问题一般不能回答，因为它取决于特定的表模式和可用索引。

一般可以说的是：

*   两个提议的 WHERE 条件都无法通过索引查找直接找到相关行。相反，必须完全扫描表或索引。

*   将同一查询的不同变体合并为一个被认为是一种反模式，因为 Oracle 必须对所有变体使用相同的执行计划，这很可能对所有变体都不是最佳的。

所以这可能会更好：

1.  动态构建查询，即仅当参数不为空时才添加 WHERE 条件。如果存在 WHERE 条件，那么您仍应使用绑定参数，这对于优化性能至关重要。

2.  或者，根据参数是否为空来实现单独的查询。

选项 1 是首选选项。如果您运行 C#、Java 或类似语言的查询，它可能更容易实现。

选项 2 是您可能会在 PL/SQL 中使用的选项。但是，如果您有多个可以为空的参数，它可能会导致许多不同的查询。

# bash - Bash - 在包含给定字符串的行之后粘贴文件的内容

> ID：13685362
> 
> 赞同：0
> 
> 时间：2012-12-03T14:32:24.467
> 
> 标签：bash

非常感谢您的帮助！

我有一个名为 source.xml 的长文件我想制作一个 bash 脚本来在 source.xml 中插入 2 个 xml 文件的内容（请参阅下面的名称和 url），替换以下两行：

```
<include url="%SWFPATH%/scenes/corrugated_external/corrugated_cement_sheets/index.xml"/>
<include url="%SWFPATH%/scenes/corrugated_external/defining_asbestos/index.xml"/> 
```

因为我需要通过几十个目录运行脚本，所以我不能真正指定任何文件夹名称。我认为解决这个问题的最佳方法是：

1-将两个 index.xml 文件合并为一个（我已经这样做了）

2- 在包含“包含”的行之前或之后插入该合并文件

3-删除任何包含'include'的行（我知道怎么做）

怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:42:27.500

类似于以下内容：

```
sed -e "/<include url=.../r /path/to/corrugated_cement_sheets/index.xml" -e '/<include url=...>/d' source.xml 
```

当然，您也必须对另一个执行此操作，并将 include url=... 替换为您要替换的完整字符串。在这种情况下：

```
<include url="%SWFPATH%/scenes/corrugated_external/corrugated_cement_sheets/index.xml"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:35:00.350

尽管您可以使用标准的基于文本的工具来做到这一点，但我建议您使用[XMLStarlet](http://xmlstar.sourceforge.net/)等可识别 XML 的工具。为什么 ？

1.  它将尊重 XML 结构
2.  它将尊重 XML 字符和实体编码

# excel - 删除空白行直到 LastRow 变量

> ID：13685365
> 
> 赞同：2
> 
> 时间：2012-12-03T14:32:28.850
> 
> 标签：excel, vba

我正在尝试删除`LastRow`变量之前的所有空白行。下面你会找到我的样品。可行的**方法似乎是一种严肃的解决方法，我相信它可能会更短/更快**，我只是不知道如何去做。

**作品 - 严肃的解决方法**

```
LastRow = Cells(Rows.Count, "A").End(xlUp).Row

For i = 1 to LastRow
   If Range("A" & i).value = "" then
      Range("A" & i).value = "xxxxx"
   End if
Next i

For i = 1 to LastRow
   If Range("A" & i).value = "xxxxx" then
      Range("A" & i).Delete
      i = i - 1
   End if
Next i 
```

**无限循环**

```
LastRow = Cells(Rows.Count, "A").End(xlUp).Row

For i = 1 to LastRow
   If Range("A" & i).value = "" then
      Range("A" & i).Delete
      i = i - 1
   End if
Next i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:39:39.887

我还没有测试过这段代码，但它应该可以工作（可能稍作修改）：

```
Range("A1:A" & LastRow).SpecialCells(xlCellTypeBlanks).EntireRow.Delete 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:39:57.267

首先，我假设您已将计算设置为手动

其次，您有一个 for 循环，它将 1=i+1 并且您执行 i=i-1 因此 i=i+1-1 无限循环。这也应该发生在工作解决方法中（同样的错误）。

您可以使用选定的步骤进行循环，也可以使用负的步骤。由于删除缩短了范围，您可以从底部开始，现在开始工作

代码如下：

```
LastRow = Cells(Rows.Count, "A").End(xlUp).Row

For i = LastRow to 1 Step -1
   If Range("A" & i).value = "" then
      Range("A" & i).Delete
   End if
Next i 
```

如果您想删除完整的行，请`Range("A" & i).EntireRow.Delete`改用。

# c# - 实体框架上看似简单的查询非常慢

> ID：13685367
> 
> 赞同：2
> 
> 时间：2012-12-03T14:32:34.157
> 
> 标签：c#, sql, performance, entity-framework

所以我的项目中有一个非常基本的数据模型（针对 .NET 4.0，使用 NuGet 安装的 EF 5，首先是数据库），有 2 个表，Item 和 ItemGroup。

Item-table 具有各种字段，包括字符串和数字，以及指向 ItemGroup 的外键。

另一方面，ItemGroup 只有 Id、Name 和 Code（其中最后两个是字符串）。

现在，我有大约 5 万个项目，只有 100 个项目组。如果我`context.Items.ToList()`使用 SQL Profiler 执行 a ，则持续时间约为 2-3 秒，这是完全可以接受的。但是，如果我想同时使用 加载 ItemGroups `context.Items.Include("ItemGroup").ToList()`，则执行时间会上升到大约 12 秒。此外，如果我在获取所有项目后简单地获取所有项目组，执行时间也很长。这让我相信，将项目映射到它们各自的组需要时间。

但是，这仍然不能解释为什么 SQL Profiler 报告非常简单的 INNER JOIN 查询也需要超过 10 秒，而没有 JOIN 的相同查询只需要 2-3 秒。

我在这里不知所措，以前从未遇到过这种问题，所以任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:31:10.487

当您使用急切加载（包含）时，它会**立即从数据库**加载整个数据库树。所以它非常慢。

但是您可以通过使用[**LinqPad**](http://www.linqpad.net/)**将 EF 查询转换为 T-SQL**来确定需要改进的区域，然后使用**Sql Server 2008**上的**Database Engine Tuning Adviser**将帮助您确定所需的**索引键**。[](http://www.linqpad.net/)

 ******Microsoft 还[发布了一篇有关 EF 性能注意事项的文章，](https://docs.microsoft.com/en-gb/ef/ef6/fundamentals/performance/perf-whitepaper)您可能想阅读一下。******

# vhdl - 删除乘法余数的 VHDL 语法

> ID：13685371
> 
> 赞同：1
> 
> 时间：2012-12-03T14:32:41.197
> 
> 标签：vhdl, slice, arithmetic-expressions

我想将 U4.10 格式的定点数乘以 U0.8 格式的常数，并将结果截断为 U4.10。我想我想要的是这样的：

```
signal A, B : unsigned(13 downto 0);
signal MULT : unsigned(7 downto 0); 
```

...

```
B <= (A * MULT)(21 downto 8); 
```

但这不会编译。两个问题：

1.  我正在尝试做的正确语法是什么？
2.  如果我更改变量类型中的位数，是否有一种很好的方法可以使用一些符号属性或类似的东西来使代码更易于维护？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T16:52:11.860

使用正确宽度的中间信号。它丑陋但可靠且易于维护。

如果你不止一次这样做，把丑陋隐藏在一个函数中；如果您有多个功能或在多个地方使用它们，请将它们放在一个包中。

例如;

```
package DSP is
   subtype Data  is unsigned(13 downto 0);
   subtype Coeff is unsigned(7 downto 0);

   function Mul_Coeff (A:Data, M:Coeff) return Data;
end package DSP;

package body DSP is
   function Mul_Coeff (A:Data, M:Coeff) return Data is
      variable Temp : unsigned (Coeff'Length + Data'High downto 0) := A * M;
   begin
      return Temp (Temp'High downto Coeff'Length);
   end Mul_Coeff;
end package body DSP; 
```

...

```
B <= Mul_Coeff(A, Mult); 
```

如您所见，这还使用类型系统来保护您免受有关数据字宽的决策的更改。

稍后当您意识到舍入比截断给出的错误更低时，您只需修改这些函数......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:14:32.073

如果我上面的评论没有被未来的读者注意到：

有一种标准方法可以执行此类活动 - 使用此处的定点库：

[http://eda-stds.org/fphdl](http://eda-stds.org/fphdl)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T22:34:50.063

IMO 这需要属性：

```
procedure mul_fixed (
    signal a : in  unsigned_fixed;
    signal b : in  unsigned_fixed;
    signal c : out unsigned_fixed
    ) is
constant a_temp : unsigned(a'length - 1 downto 0) := to_unsigned(a);
constant b_temp : unsigned(b'length - 1 downto 0) := to_unsigned(b);
variable result : unsigned(a'length + b'length - 1 downto 0);
-- notice this might be negative if a, b are (? downto +n), which is correct
constant num_fractional : integer := 0 - a'right - b'right;
-- c integral might be bigger than integral/fractional part, make sure we only access valid indices in result
constant result_left    : integer := min(result'length - 1, num_fractional + c'left);
constant result_right   : integer := max(0                , num_fractional + c'right);
begin

    result := a_temp * b_temp;
    c <= (others => '0'); -- make sure all bits are defined
    c(result_left - num_fractional downto result_right - num_fractional) <= result(result_left downto result_right);

end procedure mul_fixed; 
```

在哪里

```
type unsigned_fixed is array(range <>) of std_logic; 
```

并且存在与无符号的转换函数。

所以你会

```
...
signal a : unsigned_fixed( 3 downto -10); -- 4Q10
signal b : unsigned_fixed(-1 downto  -8); -- 0Q8
signal c : unsigned_fixed( 3 downto -10); -- 4Q10

mul_fixed(a, b, c); 
```

我知道所有这些属性一开始看起来很可怕，但我经常发现自己编写了许多毫无意义的包，只是因为我有不同的数据类型：-/ IMO 应该花时间考虑一下，找出一个通用的解决方案并继续前进——那就是毕竟，VHDL 属性的用途是什么。

*   请注意，我在编写此代码时无法访问测试环境，因此在将结果分配给 c 时可能需要也可能不需要进行类型转换。

此外，如果可以的话，您可能至少应该看看定点库。或者使用带有定点包的 VHDL-2008。

# c# - 无法使用 c# 远程连接 SQL Server 2005 Express

> ID：13685372
> 
> 赞同：0
> 
> 时间：2012-12-03T14:32:50.240
> 
> 标签：c#, remote-access, sql-server-2005-express

我正在尝试使用 c# 远程连接到 SQL Server 2005 Express 版本，但它引发了异常。

> *与 SQL Server 建立连接时发生网络相关或特定于实例的错误。找不到或无法访问服务器。请验证实例名称是否正确，并且 SQL Server 已配置为允许远程连接。（提供者：名称管道提供者，错误：40 - 无法打开与 SQL Server 的连接）*

下面是我用来连接数据库的代码

```
 private void button_test_Click(object sender, EventArgs e)
    {
        try
        {
            string str = "data source=" + textBox_server.Text + "; initial catalog=" + textBox_db.Text
    + "; user id=" + textBox_user.Text + "; pwd=" + textBox_password.Text + ";";

            SqlConnection sqlcon = new SqlConnection(str);
            sqlcon.Open();
            sqlcon.Close();
            MessageBox.Show("Test Connection was successfull");
        }
        catch (Exception ex)
        {
            MessageBox.Show("Test Connection failed. "+ ex.Message);
        } 
```

我正在输入正确的 ip、数据库表名、用户名和密码。

验证 SQL Server Express 配置中的所有内容。一切都很好。

那么我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:47:12.903

这通常是 2 个问题之一。这可能是防火墙阻止，最简单的测试方法是尝试远程登录到 SQL 服务器端口（默认为 1433）。

另一个经常出现的问题是 SQL server express 上没有启用正确的协议。这是如何做到这一点的一个很好的描述。 [http://www.teratrax.com/connecting-sql-server-express/](http://www.teratrax.com/connecting-sql-server-express/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:57:10.457

在客户端计算机上，尝试停用防火墙。

在服务器计算机上，停用防火墙，但还要检查您是否为所需的 MSSQL 实例激活了 TCP/IP 协议：

*   应用程序“Sql Server 配置管理器”
*   展开节点“SQL Server 网络配置”
*   单击“XXXXXXX 上的协议”（选择所需的 SQL 实例）
*   右键/单击 TCP/IP 并选择“启用”

如果你想改变端口来监听；只需编辑“TCP/IP”的属性

哔叽

# javascript - 数据表：搜索文本区域在 AJAX 调用时变为不可编辑

> ID：13685379
> 
> 赞同：0
> 
> 时间：2012-12-03T14:33:08.470
> 
> 标签：javascript, jquery, jquery-datatables

我有一个 JS 代码，它会定期对后端进行 AJAX 调用以获取数据：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
<script>
$(document).ready(function() {

var oTable = $('#example').dataTable({"bDestroy" : true, "bUseRendered": false, "bSort" : false, "bPaginate" : true, "bDeferRender": true});
(function worker() {
                        $.ajax( {
                                "dataType": 'json',
                                "type": "GET",
                                "url": "/service/?data=" + QueryString.data,
                                "async":false,
                                "success": function (data)
                                {
                                        $('#example').dataTable().fnClearTable();
                                        for(var i = 0; i < data.aaData.length; i++) {
                                            $('#example').dataTable().fnAddData([
                                                data.aaData[i][0],
                                                data.aaData[i][1],
                                                data.aaData[i][2],
                                                data.aaData[i][3],
                                                data.aaData[i][4],
                                                data.aaData[i][5],
                                                data.aaData[i][6]
                                        ]);
                                        }
                                },
                                complete: function() {
                                        oTable.fnDraw(false);
                                        setTimeout(worker, 5000);
                                }
                });
        })();
            } );
    </script> 
```

问题在于，每当发出定期 AJAX 请求时，数据表中的“搜索：”选项将变为不可编辑 - 尽管在 AJAX 调用完成后启用了搜索文本框。因此，当我尝试输入已加载的数据表集的搜索文本以及进行 AJAX 调用时，我无法在其中添加/删除任何文本？

请让我知道如何克服相同的问题？

# android - 如何使用 JUnit 为我的 AIDL 测试自动生成的 java 文件

> ID：13685381
> 
> 赞同：4
> 
> 时间：2012-12-03T14:33:14.373
> 
> 标签：android, unit-testing, testing, junit, servicetestcase

我正在使用 eclipse 为我的项目编写 JUnit 测试用例。我的项目包含一个基于 AIDL 的绑定服务。执行项目后，我在 gen 文件夹中为 AIDL 自动生成了一个 java 文件。

该文件包含一个 Stub 类，该类具有如下方法

```
 public android.os.IBinder asBinder()
    public boolean onTransact(int code, android.os.Parcel data, android.os.Parcel reply, int flags) throws android.os.RemoteException 
```

和一个具有方法的代理类

```
public android.os.IBinder asBinder()
public java.lang.String getInterfaceDescriptor() 
```

还有我创建的一些方法。我想使用 JUint Test 测试上述方法。是否可以使用 [ServiceTestCase](http://developer.android.com/reference/android/test/ServiceTestCase.html)测试这些方法，或者我可以使用其他方法进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T08:09:49.370

我设法在我的 testProject 中使用以下代码测试了我的存根类的方法

```
IBinder service = this.bindService(new Intent(MyService.class.getName()));
        MyFile iTestServiceCall = MyFile.Stub.asInterface(service);
        b=service.transact(0, data, null, 0);
        assertTrue("Value is still false", b);
        assertNotNull("Value is null",iTestServiceCall.asBinder()); 
```

这里 MyService 是我创建的服务，MyFile 是 Aidl。

# java - 我必须如何使用 Java API 来促进故障转移？

> ID：13685384
> 
> 赞同：3
> 
> 时间：2012-12-03T14:33:26.403
> 
> 标签：java, api, riak

我正在尝试从我的 java 应用程序中使用 Riak，如果集群中的一台机器出现故障，它将开始使用其他机器。我设法在 C# 中使用 Corrugated Iron 驱动程序做到了这一点，但似乎无法使其在 java 中工作。

我确保我在 PBClusterConfig 中指定了不止一台 Riak 机器，即客户端“了解”集群中的所有机器。

我这样设置`PBClusterConfig`：

```
BClusterConfig config = new PBClusterConfig(maxConnections);
for(RiakServerConfig server : servers) {
    PBClientConfig.Builder builder = new PBClientConfig.Builder();
    PBClientConfig serverConfig = builder
        .withHost(server.getHostname())
        .withPort(server.getPort())
        .build();

    config.addClient(serverConfig);
} 
```

然后我的实际操作（仅读取和写入）如下所示：

```
client
    .createBucket(bucket)
    .withRetrier(DefaultRetrier.attempts(3))
    .execute()
    .store(key, value)
    .withRetrier(DefaultRetrier.attempts(3))
    .execute(); 
```

当 riak 集群正常时，此代码可以工作，但是当其中一台机器出现故障时，几秒钟后我收到以下错误`com.basho.riak.client.RiakRetryFailedException: com.basho.riak.pbc.AcquireConnectionTimeoutException: timeout acquiring connection permit from pool`：

关于如何使这项工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:10:35.207

[我相信关于集群客户端如何处理节点故障](https://github.com/basho/riak-java-client/issues/147)仍然存在一个悬而未决的问题。我在 riak 邮件列表中看到推荐的一种解决方法是[在应用程序服务器上安装例如 HAProxy 并让其](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-March/003461.html)处理故障转移。

# carousel - caroufredsel Cool carousel 51 有四个图像

> ID：13685385
> 
> 赞同：1
> 
> 时间：2012-12-03T14:33:27.713
> 
> 标签：carousel, caroufredsel

**[我想使用这个脚本](http://coolcarousels.frebsite.nl/c/51/coolcarousel.html)**

但有 4 张图片：

![在此处输入图像描述](../Images/6ba8806a6238e1e8dc33678a6e3d9f19.png)

我找不到怎么做我应该使用什么选项与 fredcarousel 你能推荐我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:36:09.627

以下是这个 carouFredsel 示例中发生的情况的细分：

作者使用变量指定幻灯片中每个元素的位置：

```
var _center = {
    width: 600,
    height: 400,
    marginLeft: 0,
    marginTop: 0,
    marginRight: 0
};
var _left = {
    width: 300,
    height: 200,
    marginLeft: 0,
    marginTop: 150,
    marginRight: -150
};
var _right = {
    width: 300,
    height: 200,
    marginLeft: -150,
    marginTop: 150,
    marginRight: 0
};
var _outLeft = {
    width: 150,
    height: 100,
    marginLeft: 150,
    marginTop: 200,
    marginRight: -200
};
var _outRight = {
    width: 150,
    height: 100,
    marginLeft: -200,
    marginTop: 200,
    marginRight: 50
}; 
```

然后使用 carouFredSel 启动器自定义滚动行为：

```
$('#carousel').carouFredSel({
    width: 900,
    height: 400,
    align: false,
    items: {
        visible: 3,
        width: 100
    },
    scroll: {
        items: 1,
        duration: 400,
        onBefore: function( data ) {
            data.items.old.eq( 0 ).animate(_outLeft);
            data.items.visible.eq( 0 ).animate(_left);
            data.items.visible.eq( 1 ).animate(_center);
            data.items.visible.eq( 2 ).animate(_right).css({ zIndex: 1 });
            data.items.visible.eq( 2 ).next().css(_outRight).css({ zIndex: 0 });

            setTimeout(function() {
                data.items.old.eq( 0 ).css({ zIndex: 1 });
                data.items.visible.eq( 0 ).css({ zIndex: 2 });
                data.items.visible.eq( 1 ).css({ zIndex: 3 });
                data.items.visible.eq( 2 ).css({ zIndex: 2 });
            }, 200);
        }
    }
}); 
```

onBefore 事件接收许多不同的参数，其中包含有关幻灯片的当前信息。在这种情况下，第一个参数是`oldItems`，然后使用之前设置的“位置”（`var _center`、`var _left`等），脚本会为相应的项目设置动画。然后这些行在动画之后设置幻灯片中元素的 css 和 z-index。它允许幻灯片以更有效的方式根据其 css 属性选择元素。

```
$('#carousel').children().eq( 0 ).css(_left).css({ zIndex: 2 });
$('#carousel').children().eq( 1 ).css(_center).css({ zIndex: 3 });
$('#carousel').children().eq( 2 ).css(_right).css({ zIndex: 2 });
$('#carousel').children().eq( 3 ).css(_outRight).css({ zIndex: 1 }); 
```

要将其调整为 4 个元素，您需要添加第 5 个具有定位和名称的变量，并`_farRight`在每一步将其插入脚本中。

# python - matplotlib (equal unit length): with 'equal' aspect ratio z-axis is not equal to x- and y-

> ID：13685386
> 
> 赞同：105
> 
> 时间：2012-12-03T14:33:32.010
> 
> 标签：python, matplotlib, graph, axis, aspect-ratio

当我为 3d 图形设置相等的纵横比时，`z-axis`不会更改为“相等”。所以这：

```
fig = pylab.figure()
mesFig = fig.gca(projection='3d', adjustable='box')
mesFig.axis('equal')
mesFig.plot(xC, yC, zC, 'r.')
mesFig.plot(xO, yO, zO, 'b.')
pyplot.show() 
```

给了我以下内容：

![图像1](../Images/211088aca9c9774d83d1361c97c40c6a.png)

显然 z 轴的单位长度不等于 x 和 y 单位。

如何使所有三个轴的单位长度相等？我找到的所有解决方案都不起作用。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2015-07-12T04:13:46.447

我喜欢上述解决方案，但它们确实有一个缺点，即您需要跟踪所有数据的范围和均值。如果您有多个要一起绘制的数据集，这可能会很麻烦。为了解决这个问题，我使用了 ax.get_[xyz]lim3d() 方法，并将整个东西放入一个独立的函数中，在调用 plt.show() 之前只调用一次。这是新版本：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

def set_axes_equal(ax):
    '''Make axes of 3D plot have equal scale so that spheres appear as spheres,
    cubes as cubes, etc..  This is one possible solution to Matplotlib's
    ax.set_aspect('equal') and ax.axis('equal') not working for 3D.

    Input
      ax: a matplotlib axis, e.g., as output from plt.gca().
    '''

    x_limits = ax.get_xlim3d()
    y_limits = ax.get_ylim3d()
    z_limits = ax.get_zlim3d()

    x_range = abs(x_limits[1] - x_limits[0])
    x_middle = np.mean(x_limits)
    y_range = abs(y_limits[1] - y_limits[0])
    y_middle = np.mean(y_limits)
    z_range = abs(z_limits[1] - z_limits[0])
    z_middle = np.mean(z_limits)

    # The plot bounding box is a sphere in the sense of the infinity
    # norm, hence I call half the max range the plot radius.
    plot_radius = 0.5*max([x_range, y_range, z_range])

    ax.set_xlim3d([x_middle - plot_radius, x_middle + plot_radius])
    ax.set_ylim3d([y_middle - plot_radius, y_middle + plot_radius])
    ax.set_zlim3d([z_middle - plot_radius, z_middle + plot_radius])

fig = plt.figure()
ax = fig.add_subplot(projection='3d')
ax.set_aspect('equal')

X = np.random.rand(100)*10+5
Y = np.random.rand(100)*5+2.5
Z = np.random.rand(100)*50+25

scat = ax.scatter(X, Y, Z)

set_axes_equal(ax)
plt.show() 
```

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-12-04T11:21:58.443

我相信 matplotlib 尚未在 3D 中正确设置等轴...但我前段时间发现了一个技巧（我不记得在哪里），我已经适应了它。这个概念是围绕您的数据创建一个假的立方边界框。您可以使用以下代码对其进行测试：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(projection='3d')
ax.set_aspect('equal')

X = np.random.rand(100)*10+5
Y = np.random.rand(100)*5+2.5
Z = np.random.rand(100)*50+25

scat = ax.scatter(X, Y, Z)

# Create cubic bounding box to simulate equal aspect ratio
max_range = np.array([X.max()-X.min(), Y.max()-Y.min(), Z.max()-Z.min()]).max()
Xb = 0.5*max_range*np.mgrid[-1:2:2,-1:2:2,-1:2:2][0].flatten() + 0.5*(X.max()+X.min())
Yb = 0.5*max_range*np.mgrid[-1:2:2,-1:2:2,-1:2:2][1].flatten() + 0.5*(Y.max()+Y.min())
Zb = 0.5*max_range*np.mgrid[-1:2:2,-1:2:2,-1:2:2][2].flatten() + 0.5*(Z.max()+Z.min())
# Comment or uncomment following both lines to test the fake bounding box:
for xb, yb, zb in zip(Xb, Yb, Zb):
   ax.plot([xb], [yb], [zb], 'w')

plt.grid()
plt.show() 
```

z 数据大约比 x 和 y 大一个数量级，但即使使用等轴选项，matplotlib 自动缩放 z 轴：

![坏的](../Images/dfd65e87422149bbf16a9c2272e7518d.png)

但是，如果添加边界框，则会获得正确的缩放比例：

![在此处输入图像描述](../Images/d61552ff9190bebf92a246614a57d223.png)

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2014-02-13T20:44:50.150

我通过使用`set_x/y/zlim` [函数](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_xlim)简化了 Remy F 的解决方案。

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(projection='3d')
ax.set_aspect('equal')

X = np.random.rand(100)*10+5
Y = np.random.rand(100)*5+2.5
Z = np.random.rand(100)*50+25

scat = ax.scatter(X, Y, Z)

max_range = np.array([X.max()-X.min(), Y.max()-Y.min(), Z.max()-Z.min()]).max() / 2.0

mid_x = (X.max()+X.min()) * 0.5
mid_y = (Y.max()+Y.min()) * 0.5
mid_z = (Z.max()+Z.min()) * 0.5
ax.set_xlim(mid_x - max_range, mid_x + max_range)
ax.set_ylim(mid_y - max_range, mid_y + max_range)
ax.set_zlim(mid_z - max_range, mid_z + max_range)

plt.show() 
```

![在此处输入图像描述](../Images/2b3a6d3156dffa4c3d9ebc2f40c3ffcc.png)

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2020-08-27T23:00:36.113

**简单修复！**

我已经设法让它在 3.3.1 版本中工作。

看起来这个问题可能已经在[PR#17172](https://github.com/matplotlib/matplotlib/pull/17515)中解决了；您可以使用该`ax.set_box_aspect([1,1,1])`函数来确保方面正确（请参阅[set_aspect](https://matplotlib.org/3.3.1/api/_as_gen/mpl_toolkits.mplot3d.axes3d.Axes3D.html#mpl_toolkits.mplot3d.axes3d.Axes3D.set_aspect)函数的注释）。当与@karlo 和/或@Matee Ulhaq 提供的边界框功能结合使用时，这些图现在在 3D 中看起来是正确的！

[![matplotlib 3d 等轴绘图](../Images/68ec17c43174fd4e0a4a568986e47019.png)](https://i.stack.imgur.com/6ZbF3.png)

**最小工作示例**

```
import matplotlib.pyplot as plt
import mpl_toolkits.mplot3d
import numpy as np

# Functions from @Mateen Ulhaq and @karlo
def set_axes_equal(ax: plt.Axes):
    """Set 3D plot axes to equal scale.

    Make axes of 3D plot have equal scale so that spheres appear as
    spheres and cubes as cubes.  Required since `ax.axis('equal')`
    and `ax.set_aspect('equal')` don't work on 3D.
    """
    limits = np.array([
        ax.get_xlim3d(),
        ax.get_ylim3d(),
        ax.get_zlim3d(),
    ])
    origin = np.mean(limits, axis=1)
    radius = 0.5 * np.max(np.abs(limits[:, 1] - limits[:, 0]))
    _set_axes_radius(ax, origin, radius)

def _set_axes_radius(ax, origin, radius):
    x, y, z = origin
    ax.set_xlim3d([x - radius, x + radius])
    ax.set_ylim3d([y - radius, y + radius])
    ax.set_zlim3d([z - radius, z + radius])

# Generate and plot a unit sphere
u = np.linspace(0, 2*np.pi, 100)
v = np.linspace(0, np.pi, 100)
x = np.outer(np.cos(u), np.sin(v)) # np.outer() -> outer vector product
y = np.outer(np.sin(u), np.sin(v))
z = np.outer(np.ones(np.size(u)), np.cos(v))

fig = plt.figure()
ax = fig.add_subplot(projection='3d')
ax.plot_surface(x, y, z)

ax.set_box_aspect([1,1,1]) # IMPORTANT - this is the new, key line
# ax.set_proj_type('ortho') # OPTIONAL - default is perspective (shown in image above)
set_axes_equal(ax) # IMPORTANT - this is also required
plt.show() 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2018-06-03T07:55:33.363

改编自@karlo 的回答，让事情变得更干净：

```
def set_axes_equal(ax: plt.Axes):
    """Set 3D plot axes to equal scale.

    Make axes of 3D plot have equal scale so that spheres appear as
    spheres and cubes as cubes.  Required since `ax.axis('equal')`
    and `ax.set_aspect('equal')` don't work on 3D.
    """
    limits = np.array([
        ax.get_xlim3d(),
        ax.get_ylim3d(),
        ax.get_zlim3d(),
    ])
    origin = np.mean(limits, axis=1)
    radius = 0.5 * np.max(np.abs(limits[:, 1] - limits[:, 0]))
    _set_axes_radius(ax, origin, radius)

def _set_axes_radius(ax, origin, radius):
    x, y, z = origin
    ax.set_xlim3d([x - radius, x + radius])
    ax.set_ylim3d([y - radius, y + radius])
    ax.set_zlim3d([z - radius, z + radius]) 
```

**用法：**

```
fig = plt.figure()
ax = fig.add_subplot(projection='3d')
ax.set_aspect('equal')         # important!

# ...draw here...

set_axes_equal(ax)             # important!
plt.show() 
```

* * *

**编辑：**此答案不适用于较新版本的 Matplotlib，因为合并的更改在和[`pull-request #13474`](https://github.com/matplotlib/matplotlib/pull/13474)中跟踪。作为对此的临时解决方法，可以删除以下新添加的行：[`issue #17172`](https://github.com/matplotlib/matplotlib/issues/17172)[`issue #1077`](https://github.com/matplotlib/matplotlib/issues/1077)[`lib/matplotlib/axes/_base.py`](https://github.com/matplotlib/matplotlib/pull/13474/commits/29b048f5105b77f4c75178ddd995f74e4379294a#diff-a7f4f21aa80e975d813bc436acb68d8cR1274-R1279)

```
 class _AxesBase(martist.Artist):
      ...

      def set_aspect(self, aspect, adjustable=None, anchor=None, share=False):
          ...

+         if (not cbook._str_equal(aspect, 'auto')) and self.name == '3d':
+             raise NotImplementedError(
+                 'It is not currently possible to manually set the aspect '
+                 'on 3D axes') 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2020-10-22T17:14:40.660

从 matplotlib 3.3.0 开始，[Axes3D.set_box_aspect](https://matplotlib.org/api/_as_gen/mpl_toolkits.mplot3d.axes3d.Axes3D.html#mpl_toolkits.mplot3d.axes3d.Axes3D.set_box_aspect)似乎是推荐的方法。

```
import numpy as np

xs, ys, zs = <your data>
ax = <your axes>

# Option 1: aspect ratio is 1:1:1 in data space
ax.set_box_aspect((np.ptp(xs), np.ptp(ys), np.ptp(zs)))

# Option 2: aspect ratio 1:1:1 in view space
ax.set_box_aspect((1, 1, 1)) 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-02-01T09:14:10.360

**编辑：** user2525140 的代码应该可以正常工作，尽管这个答案据说试图修复一个不存在的错误。下面的答案只是一个重复的（替代）实现：

```
def set_aspect_equal_3d(ax):
    """Fix equal aspect bug for 3D plots."""

    xlim = ax.get_xlim3d()
    ylim = ax.get_ylim3d()
    zlim = ax.get_zlim3d()

    from numpy import mean
    xmean = mean(xlim)
    ymean = mean(ylim)
    zmean = mean(zlim)

    plot_radius = max([abs(lim - mean_)
                       for lims, mean_ in ((xlim, xmean),
                                           (ylim, ymean),
                                           (zlim, zmean))
                       for lim in lims])

    ax.set_xlim3d([xmean - plot_radius, xmean + plot_radius])
    ax.set_ylim3d([ymean - plot_radius, ymean + plot_radius])
    ax.set_zlim3d([zmean - plot_radius, zmean + plot_radius]) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-30T02:20:48.403

我认为自从发布了这些答案以来，此功能已添加到 matplotlib 中。如果有人仍在寻找解决方案，我就是这样做的：

```
import matplotlib.pyplot as plt 
import numpy as np

fig = plt.figure(figsize=plt.figaspect(1)*2)
ax = fig.add_subplot(projection='3d', proj_type='ortho')

X = np.random.rand(100)
Y = np.random.rand(100)
Z = np.random.rand(100)

ax.scatter(X, Y, Z, color='b') 
```

代码的关键位是`figsize=plt.figaspect(1)`将图形的纵横比设置为 1 x 1。`*2`之后`figaspect(1)`将图形缩放两倍。您可以将此比例因子设置为您想要的任何值。

**注意**：这仅适用于具有一个情节的人物。

[![随机 3D 散点图](../Images/fd4bdc5796e1b7ec161827697314884d.png)](https://i.stack.imgur.com/9rP6B.png)

# android - 编辑文本获得焦点时滚动页面

> ID：13685389
> 
> 赞同：4
> 
> 时间：2012-12-03T14:33:41.260
> 
> 标签：android, scroll

`edittext`当获得焦点时，我正在使用以下代码将页面滚动到底部：

```
fcListener = new OnFocusChangeListener() {
        public void onFocusChange(View v, boolean hasFocus) {
            if (hasFocus)                   
                handler.postDelayed(new Runnable() {

                    @Override
                    public void run() {
                        Page.fullScroll(ScrollView.FOCUS_DOWN);                         
                    }
                },300);
        }
    };

personNameText.setOnFocusChangeListener(fcListener); 
```

但是，每当我单击editText 时，它会在页面向下滚动之后的瞬间获得焦点。然后edittext失去焦点。每次都会发生这种情况。如何防止失去焦点但仍使页面向下滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:42:58.980

不要尝试使用自定义代码滚动，而是在 Android Manifest.xml 中的活动上使用 android:windowSoftInputMode="adjustResize"。

# php - 如何在 YII 中包含 PEAR 的邮件和 SMTP 功能？

> ID：13685392
> 
> 赞同：1
> 
> 时间：2012-12-03T14:33:48.277
> 
> 标签：php, yii, pear

我已经设置了梨，并且之前被困在：

```
require_once('Mail.php'); 
```

我设法通过修复 PHP.ini 中的路径来解决这个问题，但现在 YII 抱怨：

```
include(LOGIN.php) [<a href='function.include'>function.include</a>]: failed to open stream: No such  file or directory 
```

我不知道要安装哪个库来让 PEAR 获取 LOGIN.php，如果这是问题所在。也可能是 YII 不允许导入 LOGIN.PHP，因为它可能有自己的？不过，我正在抓住稻草。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:55:42.403

这是因为 Yii 的自动加载器，它被设置为查找 Yii 的类，这与 PEAR 的标准不同，你需要做什么，它注册 PEAR 的自动加载器

[您可以在指南](http://www.yiiframework.com/doc/guide/1.1/en/extension.integration)中阅读相关内容

您可以使用如下所示的自动加载器：

```
static function loadClass($className){
  include str_replace('_','/',$className).'.php';
  return class_exists($className, false) || interface_exists($className, false);
  return false;
 } 
```

PEAR 扩展应该已经在 PHP 的包含路径中才能正常工作

请参阅[Zend Autoloader 扩展](https://github.com/yiiext/zend-autoloader-component)，了解如何实现它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:23:52.010

**`YiiMail`**是一个可用的扩展，用于发送带有或不带有 smtp 的邮件，这是一个电子邮件扩展，它包含`SwiftMailer`. 此扩展还允许您从查看文件创建电子邮件。从[这里下载](http://code.google.com/p/yii-mail/downloads/list)

在您的配置文件中，在组件部分中包含以下代码

```
'mail' => array(
                'class' => 'application.extensions.yii-mail.YiiMail',
                'transportType'=>'smtp',
                'transportOptions'=>array(
                    'host'=>'smtp.googlemail.com',
                    'username'=>'test@gmail.com',//
                    'password'=>'passwd',
                    'port'=>'465',
                    'encryption'=>'ssl',
                ),
                'viewPath' => 'application.views.mail',
                'logging' => true,
                'dryRun' => false
        ), 
```

在控制器动作部分使用类似下面的东西

```
$message = new YiiMailMessage;
$message->view = 'registrationFollowup';

//userModel is passed to the view
$message->setBody(array('userModel'=>$userModel), 'text/html');

$message->addTo($userModel->email);
$message->addBcc('someone@gmail.com');
$message->from = Yii::app()->params['adminEmail'];
Yii::app()->mail->send($message); 
```

视图`registrationFollowup`位于视图文件夹内的邮件文件夹中，视图路径从配置文件 ( `'viewPath' => 'application.views.mail'`)中理解

# mysql - sql动态日期比较

> ID：13685394
> 
> 赞同：0
> 
> 时间：2012-12-03T14:33:51.827
> 
> 标签：mysql, sql, database

在我的数据库中，我有两列，一列（已获得）`2012-08-03 14:18:39`在首次输入时设置日期（）。第二列（已处理）设置处理该条目的日期。我想要一个查询来查找数据库中的条目，其中在获取和处理条目之间已经过去了两天以上的时间。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:41:58.593

与建议的答案相比，[`DATEDIFF()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)它只使用`DATE`部分时间戳，[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timestampdiff)使您能够返回至少两天（即 48 小时）已过的记录：

```
SELECT * FROM myTable WHERE TIMESTAMPDIFF(DAY, Obtained, Processed) >= 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:41:51.627

尝试使用以下查询

```
SELECT * FROM MyTable WHERE DATEADD(Obtained, INTERVAL 2 DAY) <= Processed 
```

# objective-c - 通过点击 collectionViewCell 预览 UIImage

> ID：13685396
> 
> 赞同：0
> 
> 时间：2012-12-03T14:34:06.030
> 
> 标签：objective-c, ios, xcode, uicollectionview

新手提问。

我有 UICollectionView，其中包含在情节提要中创建的单元格。我通过添加 UIImage 来自定义单元格。通过点击图像我想显示图像预览（更大尺寸的相同图像）。我尝试使用`-didSelectItemAtIndexPath:`方法，但我不明白如何处理我点击的单元格指向这个特定单元格中的 UIImage，因为我没有这个本机方法的单元格参数。

还有一个问题：xcode 是否有制作照片预览的本机方法（当图像靠近并且背景略微褪色时），或者我需要自己实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:21:44.027

如果您看一下，`didSelectItemAtIndexPath`您会发现它为您提供了一个可以使用的索引路径。`UICollectionView cellForItemAtIndexPath`您可以使用该索引路径使用实例方法获取您的单元格。您将其投射到您自己的自定义单元格中，就可以了。

至于第二个问题，恐怕您必须自己实现，没有组件可以做到这一点，无论如何都不是来自Apple（除非您想使用模态）。

# ruby-on-rails - rails 中的human_attribute_name 和翻译文件

> ID：13685401
> 
> 赞同：1
> 
> 时间：2012-12-03T14:34:24.437
> 
> 标签：ruby-on-rails, ruby, localization, internationalization

我正在运行一个带有英语和西班牙语翻译文件的网站，默认使用英语。

使用以下翻译：

```
en:
  tenants:
    about: "About" 
```

至

```
es:
  tenants:
    about: "Acera" 
```

使用

```
t "tenants.about" 
```

正常工作，并在适当时从 en.yml 和 es.yml 文件中正确读取。

但是，当尝试使用 human_attribute_name 属性从西班牙语 es.yml 文件的另一部分中提取模型属性时，不会读取这些值。

所以像

```
Job.human_attribute_name(:title) 
```

返回“title”而不是“Título”。

同一个es.yml文件的人性化属性部分如下：

```
 es:
  tenants:
    about: "Acerca"
  activerecord:
    attributes:
      job:
        title: "Título de la oferta de trabajo"
        location: "Localización de la oferta de trabajo"
        job_type: "Tipo de trabajo"
        description: "Descripción" 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T23:24:48.210

哇 - 超级烦人。

这是来自 github 的长 es.yml 翻译文件的底部：[https ://github.com/svenfuchs/rails-i18n/tree/master/rails%2Flocale](https://github.com/svenfuchs/rails-i18n/tree/master/rails%2Flocale)

```
# remove these aliases after 'activemodel' and 'activerecord' namespaces are removed from 
Rails repository
  activemodel:
    errors:
      <<: *errors
  activerecord:
    errors:
      <<: *errors 
```

这覆盖了我的 activerecord: 文件顶部的声明。

考虑到它是一个超过 200 行的文件，这不是最好的位置，但我很遗憾没有阅读整个内容。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T14:44:49.463

我认为 'es:' 丢失了，或者缩进不正确。`"`没有必要：

```
es: 
  activerecord:
    attributes:
      job:
        title: Título 
```

# java - 如何将超过 1gb 分配给 netbeans JVM？

> ID：13685402
> 
> 赞同：4
> 
> 时间：2012-12-03T14:34:25.787
> 
> 标签：java, linux, maven, netbeans

我正在尝试分配 `Netbeans` 超过 1 GB RAM 的 jvm，但没有成功。我有一个非常庞大的 maven 项目要处理，并且 netbeans 在所有项目打开后立即内存不足。

我在 Gentoo 上工作 `linux`：

```
 Linux myHost 3.2.12-gentoo #3 SMP Mon Jul 2 14:27:56 CEST 2012 i686
 Intel(R) Xeon(R) CPU E31245 @ 3.30GHz GenuineIntel GNU/Linux

$ ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 129570
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 8192
cpu time               (seconds, -t) unlimited
max user processes              (-u) 129570
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

我的盒子的记忆是：

```
# cat /proc/meminfo 
MemTotal:       16585504 kB
MemFree:        11731232 kB
... 
```

当我设置时， `-J-Xmx3024m` 我会收到这些消息：

```
/opt/netbeans-7.2/bin/netbeans 
Error occurred during initialization of VM
Could not reserve enough space for object heap
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:50:34.453

您可以参考[Maximum Java heap size of a 32-bit JVM on a 64-bit OS](https://stackoverflow.com/questions/1434779/maximum-java-heap-size-of-a-32-bit-jvm-on-a-64-bit-os)，了解如何确定最大堆大小的限制。这并不意味着如果您的机器上有 99GB 的 RAM，您可以将 90Gigs 分配给 JVM

此外，这取决于您有多少可用内存、您的操作系统、netbeans、您的服务器，它们也需要一些内存。您只能将可用内存量分配给 JVM

该消息`Could not reserve enough space for object heap`表示`3024 MB`不可分配。尝试减少它

看起来像在 linux 上，每个进程的最大允许内存是 3gigs。尽管您不能将所有这些都分配给 jvm 堆，因为它也需要内存用于 premGem 等。我上面提到的线程..那里的帖子说，他成功地使用了 2.2 GB。

# javascript - XPages 应用程序的 Javascript 错误

> ID：13685403
> 
> 赞同：1
> 
> 时间：2012-12-03T14:34:27.300
> 
> 标签：javascript, proxy, xpages

我负责一些用户遇到问题的基于 XPage 的应用程序。某些页面上存在随机 Javascript 错误，只有在重新加载页面时才会自行解决。我设法在 Internet Explorer 上获得了错误消息的屏幕截图 - 这是您在出现 JS 错误时看到的警告三角形。

单击 IE 中的消息，我被告知以下 URL 中存在语法错误：

[http://cdncache2-a.akamaihd.net/loaders/1036/l.js?aoi=1311798366&pid=1036&zoneid=74570](http://cdncache2-a.akamaihd.net/loaders/1036/l.js?aoi=1311798366&pid=1036&zoneid=74570)

我不知道这是什么？！它不是链接到我的应用程序的资源。XPage 应用程序位于公司内部服务器上，对我来说运行良好，但德国的用户经常得到这个。

我试图找出这个 URL，但在谷歌上还没有找到任何可靠的东西。然而，一些网站暗示了代理。因此，我检查了 LAN 的 IE 设置，发现我没有使用代理，并且绕过 LAN 地址代理的选项显示为灰色。我让德国人确认他们也有和我一样的设置。

任何人都可以提供任何线索来解释为什么这个 JS 错误会出现在应用程序上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:37:13.007

The tool you want to use is [CURL](http://curl.haxx.se/). Using that you get the source code of the JS that gets loaded. If the code messes up the DOM then local JavaScript will fail. I would second Sven's suspicion that it is an addon. The question is: a planned or an unplanned one. You might want to entertain a HTTP Debugger to see what is going on on the wire. [TCPMon](http://ws.apache.org/commons/tcpmon/) from Apache is free and cross platform. [Fiddler](http://www.fiddler2.com/fiddler2/) is free but Windows only and [Charles](http://www.charlesproxy.com/) is Shareware cross platform. The later two can debug HTTPS too. Let us know the findings

# c# - 如何覆盖列表 包含

> ID：13685404
> 
> 赞同：9
> 
> 时间：2012-12-03T14:34:28.977
> 
> 标签：c#, generics, contains, iequatable

我想使用 List[MyObject] 比较一个属性而不是整个对象。因此，我使用 IEquatable[MyObject] 但编译器仍然需要 MyObject 而不是字符串属性。为什么？

这是我得到的：

```
public class AnyClass
{
    public List<AnyOtherClass> MyProperty { get; set; }        
    public string AnyProperty { get; set; }

    public AnyClass(string[] Names, string[] Values, string AnyProperty)
    {
        this.AnyProperty = AnyProperty;
        this.MyProperty = new List<AnyOtherClass>();
        for (int i = 0; i < Names.Length; i++)
            MyProperty.Add(new AnyOtherClass(Names[i], Values[i]));
    }
}

public class AnyOtherClass : IEquatable<string>
{
    public AnyOtherClass(string Name, string Values)
    {
        this.Name = Name;
        this.Values = Values.Split(';').ToList();
    }

    public string Name { get; set; }
    public List<string> Values { get; set; }

    public bool Equals(string other)
    {
        return this.Name.Equals(other);
    }
}

    private void DoSomething()
    {
        string[] Names = new string[] { "Name1", "Name2" };
        string[] Values = new string[] { "Value1_1;Value1_2", "Value2" };
        AnyClass ac = new AnyClass(Names, Values, "any Property");

        if (ac.MyProperty.Contains("Name1")) //Problem is here...
            //do something
    } 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-03T14:39:00.890

您可能想尝试使用这个：

```
myList.Any(x => x.someProperty == someValue); 
```

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/bb534972.aspx](http://msdn.microsoft.com/en-us/library/bb534972.aspx)

> 确定序列的任何元素是否满足条件。

如果您不知道，`x => x.someProperty == someValue`则称为 a 。`lambda expression`

`IEnumerable`请注意，您可以在任何实现`List<T>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T14:35:31.493

听起来你应该做 a`Where`而不是 a`Contains`

```
string value = "test";
ac.Where(ac => ac.Name1 == value || ac.Name2 == value); 
```

* * *

爆炸的原因`ac.MyProperty.Contains("Name1")`是因为`MyProperty`是a`List<AnyOtherClass>`而不是a`string`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T14:40:16.290

应该`IEquatable<AnyOtherClass>`不是`<string>`。尽管您的比较实际上是在比较类中的字符串，但您正在比较的实例`AnyOtherClass`不是 的实例。`String`

但它看起来更像是你想要做的是制作某种字典。在这种情况下，您应该使用字典类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T14:52:29.993

这不是 IEquatable<T> 的预期用途。查看文档[http://msdn.microsoft.com/en-us/library/ms131187.aspx](http://msdn.microsoft.com/en-us/library/ms131187.aspx)：

*对实现者的说明 将 IEquatable<T> 接口的类型参数替换为实现此接口的类型。*

除了没有设计成那样工作之外，为什么要在一个类上强制实现 equals ，因为不同的类对查找实例有特定的要求？如其他答案中所述，将其留给持有集合的类进行基于键的查找。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-12T19:45:39.870

这对我来说就像一个冠军！

"""

```
public class Point : IComparable<Point>, IEquatable<Point>
{
    public DateTime x;
    public double y;
    public uint z;

    public Point(DateTime dateTime, double rate, uint sequence)
    {
        x = dateTime;
        y = rate;
        z = sequence;
    }

    public int Compare(Point a, Point b)
    {
        // Equal.
        if (a.z == b.z)
        {
            return 0;
        }
        // Less than.
        else
        if ((a.z < b.z))
        {
            return -1;
        }
        // Greater than.
        else
        {
            return 1;
        }
    }

    public int CompareTo(Point point)
    {
        return Compare(this, point);
    }

    public static int operator- (Point a, Point b)
    {
        return (int)(a.z - b.z);
    }

    public bool Equals(Point point)
    {
        return z == point.z;
    }
} 
```

"""

# email - 如何使用所有原始标签将所有电子邮件从一个 gmail 帐户导入到另一个帐户？

> ID：13685406
> 
> 赞同：4
> 
> 时间：2012-12-03T14:34:33.207
> 
> 标签：email, gmail, labels

我有 2 个 gmail 帐户：第一个是我目前正在使用的帐户 - 它是 gmail 域下的 mail.huji.ac.il 帐户（我的大学电子邮件）。

我最近开了一个标准的gmail帐户，我想将所有旧gmail帐户的邮件导入新帐户。

问题是我在旧帐户中有很多标签，我想将它们也保留在新帐户中。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T08:46:56.177

Gmail 不支持它。如果您的大部分标签都被过滤器应用，您可以按照以下步骤再次触发该过程。

假设将账户 A 导入 B。

1.  启用 A 通过 POP 转发所有邮件：设置、转发和 POP/IMAP、POP 下载、启用所有邮件的 POP。
2.  将A的所有过滤器导出为文件：设置、过滤器、选择：全部、导出。
3.  将过滤器的备份文件导入B：设置、过滤器、导入过滤器。
4.  启用 B 通过 POP 接收来自 A 的邮件：设置、帐户、查看其他帐户的邮件、添加您拥有的 POP3 邮件帐户（添加帐户 A 的 POP 信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-24T20:04:48.947

它可以使用 Gmail API 完成：从一个帐户检索电子邮件并将它们插入另一个帐户。似乎有一个命令行工具可以为您执行此操作，称为[Got Your Back](https://github.com/jay0lee/got-your-back/wiki)。命令将类似于：

```
gyb --email youremail@mail.huji.ac.il --local-folder /home/you/gmail-backup
gyb --email yournewemail@gmail.com --action restore --local-folder /home/you/gmail-backup 
```

# javascript - FileReader API：在回调之外查看内容

> ID：13685409
> 
> 赞同：2
> 
> 时间：2012-12-03T14:34:43.923
> 
> 标签：javascript, html, filereader

我一直在使用 FileReader API 来读取本地文件并将它们提供给 Java 小程序，现在这已经奏效了。该文件被读取，小程序的行为就像它应该的那样。将文件内容（作为字符串）传递给小程序的函数目前在分配给阅读器的 onloadend() 事件的函数内部调用（我使用 onloadend() 代替 onload() 来满足一些错误处理需求。虽然也许我可以用 try/catch 指令替换它，我会研究它）。现在我想将文件的内容传递给一个全局变量，以便也用 Javascript 解析它。问题是这似乎是不可能的，因为：

1) 加载文件后 FileReader 对象的 .result 成员为空（这是有道理的，看看阅读器本身是如何异步的）；

2）如果我将 .result 成员复制到全局变量中，例如，如果我这样做：

```
var my_string;

function load_callback()
{
   //Do some stuff...
   my_string = this.result;
}

...

my_reader = new FileReader();
my_reader.onloadend = load_callback;
my_reader.readAsText(my_file)
document.getElementById("empty_paragraph").innerHTML = my_string; 
```

结果我得到了很大`undefined`的好处（这并没有多大意义，真的）。我应该怎么办？这是其他一些安全功能，使 FileReader 无法在其回调方法之外传播文件的内容吗？在任何人提到它之前 - 是的，该文件已由用户正确提交（正如我所说，页面的其余部分有效）；是的，我已经检查过该名称`my_string`是否以任何方式重复；我已经在 Chromium 和 Firefox 上测试过了，所以它不依赖于浏览器。有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:57:16.610

同步文件阅读器仅在 WebWorker 上下文中可用，因为阻塞工作线程不会导致 UI 冻结。无论如何，**没有办法在回调之外查看内容，除非**你使用：

```
<script type="application/javascript;version=1.7"></script> 
```

仅适用于Firefox。它允许您使用`yield`关键字，该关键字可用于实现可用于以同步方式编写异步代码的[纤程。](http://taskjs.org/)

# linux - 在单实例模式下使用 xinetd 运行 shell 脚本

> ID：13685411
> 
> 赞同：0
> 
> 时间：2012-12-03T14:34:49.510
> 
> 标签：linux, bash, sockets, shell, xinetd

当用户尝试执行由 xinetd 启动并作为单个实例运行的远程脚本时，我想给他一些反馈。

通过 UDP 或 TCP 套接字，用户将一些文本发送到 xinetd 正在侦听的端口。如果该脚本尚未使用，则会执行它，但如果没有，我想给用户一些反馈，例如“抱歉，此脚本已在使用。请稍后再试。” 怎么可能做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:29:33.600

在 Linux 上，您可以使用`flock`util-linux 中的实用程序：

```
if ! ( flock -n 42 || exit 1

    # Things to do in the single instance
    echo "Processing..."
    sleep 60 
    echo "Done" 

    exit 0
 ) 42> /var/tmp/mylockfile  # any unique filename
then 
    # Things to do when the script is in use
    echo "Sorry, the service is in use."
fi 
```

只要确保 () 中的子shell 以成功结束（就像`exit 0`这里一样），否则 then 子句会在您的过程完成后启动。

# blender - 从搅拌机中导出 glsl

> ID：13685413
> 
> 赞同：4
> 
> 时间：2012-12-03T14:34:54.643
> 
> 标签：blender, ogre

我创建了一个网格，我在 GLSL 中应用了带有附加效果的不同材质：有没有办法导出这些程序？

我正在使用搅拌机 2.61

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-28T09:10:15.317

有一个用于搅拌机的通用 GLSL 导出器，可以在[这里](http://blenderartists.org/forum/showthread.php?233186-Export-Materials-to-GLSL-Code)找到。您仍然需要设置 Ogre 材质脚本以使用这些着色器，并确保您使用 OpenGL 渲染系统进行渲染。手册中有一些关于使用 GLSL 着色器和 Ogre 材质的[参考](http://www.ogre3d.org/docs/manual/manual_21.html)。

# jquery - ASP.NET：未定义 jQuery Ajax 结果

> ID：13685416
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:00.430
> 
> 标签：jquery, asp.net, ajax

我有这个 jQuery ajax：

```
 // ... omitted code ...

        var data = "{'TagName':'" + TagName + "'}";

        var resultSet = 0;

        jQuery.ajax(
        {
            type: "POST",
            url: '<%= ResolveUrl("~/Webservices/TagWebServices.asmx/GetTagByTagName") %>',
            data: data,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (t)
            {
                resultSet = t.d;
            }
        });

        jQuery(this).after("<div style='color:#E3E3E3; margin-bottom:10px;'>" +
        resultSet.desc +
        "</div>" );

        // ... omitted code ... 
```

问题是当我使用 Firebug 并在最后一行添加断点然后单击（继续）resultSet.desc 按预期工作时，resultSet.desc 总是返回“未定义”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:37:49.300

ajax 调用是异步的（根据定义......）。所以你必须把做作放在成功处理程序中：

```
$.ajax({ ...
    success : function(t) {
        resultSet = t.d;
        jQuery(this).after("<div style='color:#E3E3E3; margin-bottom:10px;'>" +
            resultSet.desc +
        "</div>" );
    }
)}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:38:14.553

Ajax 默认是异步的。您可以尝试设置 ajax 请求同步设置：`async:false,`但这是一个不好的方法。

要走的路是在成功回调函数中编写逻辑代码，将 ref 保留在“this”对象上。

```
var data = "{'TagName':'" + TagName + "'}";

        var resultSet = 0,
            that = this;

        jQuery.ajax(
        {
            type: "POST",
            url: '<%= ResolveUrl("~/Webservices/TagWebServices.asmx/GetTagByTagName") %>',
            data: data,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (t)
            {
                resultSet = t.d;
                 jQuery(that).after("<div style='color:#E3E3E3; margin-bottom:10px;'>" +
                    resultSet.desc +
                    "</div>" );
            }
        }); 
```

# java - 如何使用 JR API 更改页面方向

> ID：13685417
> 
> 赞同：1
> 
> 时间：2012-12-03T14:35:02.067
> 
> 标签：java, jasper-reports

我想将报告视图***Portrait***更改为***Landscape***。

我用过这个方法：

```
jasperPrint.setOrientation(OrientationEnum.LANDSCAPE); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-05T07:52:01.930

```
jasperPrint.setOrientation(OrientationEnum.LANDSCAPE);
jasperDesign.setPageHeight(Page.Page_A4_Landscape().getHeight());
jasperDesign.setPageWidth(Page.Page_A4_Landscape().getWidth()); 
```

这对我很有用。我希望它会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:27:55.273

在 i-report 中很容易做到：

单击报告检查器中的顶部项目并使用属性中的下拉更改为横向

在代码中这是你必须做的

肖像 (a4)

`http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">`

 `landscape` 

``http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="842" pageHeight="595" orientation="Landscape" columnWidth="802" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">``

# hadoop - 将猪结果存储到本地文件

> ID：13685418
> 
> 赞同：4
> 
> 时间：2012-12-03T14:35:06.973
> 
> 标签：hadoop, apache-pig

我运行 pig 脚本做了一些激进的操作，输出的大小很小。

现在我跑

```
hadoop fs -getmerge ... 
```

分别地。

有什么方法可以让猪脚本直接将结果转储到本地文件中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T00:21:55.063

如果您不担心将所有内容合并到一个文件中，那么您可以在 grunt (http://wiki.apache.org/pig/Grunt) 中使用 copyToLocal 命令：

```
grunt> copyToLocal <src> <dest> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T20:45:12.923

另一种可能的方法是将 Pig 嵌入 Python 或 JavaScript。你可以做这样的事情（在 Python 中）：

```
import os
from org.apache.pig.scripting import Pig

P = Pig.compile("PUT YOUR PIG CODE HERE")
hdfs_input = "YOUR HDFS INPUT"
hdfs_output = "YOUR HDFS OUTPUT"
local_output = "YOUR LOCAL OUTPUT"
result = P.bind({'in': input, 'out': hdfs_output}).runSingle()
os.system("hadoop fs -getmerge " + hdfs_output + " " + local_output) 
```

并通过（例如）运行 Python 代码

```
pig -useHCatalog python_code.py 
```

# c# - 从数据库访问方法的条件返回

> ID：13685423
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:21.247
> 
> 标签：c#, .net, winforms

[Winforms .NET 4.0]

我希望能够调用一个方法并返回一个布尔值或一个对象。或者任何可以满足我的例子的东西。

例子：

方法查询数据库。如果返回的行为空，我希望调用方法知道这一点，以便调用另一个检查方法。如果查询返回包含数据的行，我应该返回数据对象。

我认为的一种方法是使用 out 关键字。使方法返回 bool 并在调用方法之前初始化返回的对象。

方法运行后，我可以检查是否为真，然后操作对象......

这是一个好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:37:26.407

> 方法查询数据库。如果返回的行为空，我希望调用方法知道这一点，以便调用另一个检查方法。

那为什么不直接返回一个`null`引用呢？你还想`null`表达别的意思吗？（例如，您是否曾经想表示已找到一个空值，而该值的含义与最初未找到的值不同？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:40:59.317

您可以使用 TryParse 习惯用法返回 bool 并填充 out 引用。另一种选择是返回一个元组。

# javascript - 在 jQuery 中发布多个表单

> ID：13685424
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:24.847
> 
> 标签：javascript, jquery, html

我有一个 HTML 页面，它有多个表单和一个表单之外的按钮，如下所示：-

```
<html>    
<body>

<div class="error" style="display:none;">
    <span></span>            
</div>
<form id="form1" name="form1"> 
Field 1: <input name="field1" id="field1" type="text" class="required">
</form>
<form id="form2" name="form2"> 
Field 2: <input name="field2" id="field2" type="text" class="required">
</form>

<div>
    <input id="btn" type="button" value="Validate">
</div>
</body>
</html> 
```

当我单击按钮时，jQuery 验证适用于 Form1，如果它通过 jQuery 验证，则适用于 Form2。如果这也成功，我需要将表格提交到后端。这里的问题是我一次只能提交一份表格。但是一旦两个表单都通过了 jQuery 验证，我需要在 Form1 和 Form2 中发送表单值。我怎样才能做到这一点？我发现我们可以在 javascript 中创建一个新表单并将所有表单元素添加到新表单并提交该表单。但我不确定这个解决方案的可行性有多大，因为每个表单至少包含 100 个表单字段，并且它需要在 IE 和 FF 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:48:03.120

执行 Javascript 验证后，您可以简单地使用序列化从每个表单中获取数据，然后使用 ajax 或 post 提交。

像这样的东西应该工作：

```
$.ajax({
    type: 'POST',
    url: url,
    data: $("#form1,#form2").serialize(),
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:14:46.153

您提交的只是最后一个隐藏表单。使用 jquery，您可以将所有值作为 json 字符串放入隐藏表单中。您可以使用 DeserializeJSON 方法在服务器端脚本中获取它。

希望这可以帮助：

```
<form id="form1" name="form1"> 
    Field 1: <input name="field1" id="field1" type="text" class="required">
</form> 
<form id="form2" name="form2"> 
    Field 2: <input name="field2" id="field2" type="text" class="required">
</form>
<form id="form3" name="form3"> 
    Field 3: <input name="field3" id="field3" type="text" class="required">
</form>
..........//After all your forms, just make a hidden form
<form id="hiddenForm" action="your required url">
    <input name="finalField" id="finalField" type="text" style="display:none;" class="required">
</form>
<script type="text/javascript">
    function submit(){
        var data = new Object();
        $('form').each(function(){
            if($(this).attr('id') != 'hiddenForm')
                data[$(this).attr('id')] = $(this).serialize();
        });
        $('#finalField').val(JSON.stringify(data));
        $('#hiddenForm').submit();
    }
</script> 
```

# asp.net-mvc-3 - 一次处理分配相同会话 ID 的多个用户的最佳解决方案是什么

> ID：13685431
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:53.477
> 
> 标签：asp.net-mvc-3, session, login

我的 asp .net mvc3 Web 应用程序面临的问题是应用程序将相同的会话 ID 分配给使用相同浏览器的多个用户登录（使用不同的凭据）。用户使用某些凭据登录后，下次他尝试使用同一浏览器中的另一个窗口使用不同的凭据登录时，我希望用户被重定向到第一次登录的主页，就像在 facebook 中一样。我怎样才能做到这一点？我想将每个用户的会话 ID 存储在数据库中，然后在尝试登录时检查会话 ID 是否已经存在。但这似乎会影响应用程序的性能。谁能告诉我处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:40:23.383

检查物业

```
System.Web.HttpContext.Current.User.Identity.IsAuthenticated 
```

在您的登录表单中。如果用户`IsAuthenticated`随后将他们重定向到他们的主页，而不是显示/处理登录表单。

# c - C中的列表：无法添加新元素

> ID：13685433
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:56.687
> 
> 标签：c, list

我有一个简单的程序，它初始化一个列表并向其中添加 n 个元素。问题是它不能添加下一个 n-1 元素（它只是用第一个元素初始化列表）。我测试了条件，似乎问题`last->next=elem`出在`add_elem`功能上。这是程序：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct lista {
  int val;
  struct lista *next;
} list;

void allocate(list *p) {
  printf("Alocating memory...");
  p=(list *)malloc(sizeof(list));
  if(p==NULL) {
    printf("Failed! Exiting program...");
    exit(1);
  } else printf("Done! \n");
}

void init_list(list *first, list *last) {
  printf("Insert first element value: ");
  scanf("%d", &(first->val));
  printf("Initializing list...\n");
  allocate(first);
  first->next=NULL;
  last=first;
  if(first->next==NULL && last==first) {
    printf("Done initializing! \n");
    printf("Last value: %d\n", last->val);
  }
}

void add_elem(list *elem, list *last, int i) {
  printf("Insert the %dth element value: ",i);
  scanf("%d", &elem->val);
  printf("Adding element to list...\n");
  allocate(elem);
  elem->next=NULL;
  last->next=elem;
  last=elem;
  if(elem->next==NULL && last==elem && last->next==elem) {
    printf("Done adding! \n");
    printf("Last value: %d\n", last->val);
  }
  //printf("%d\n", first->next->val);
}

void print_list(list *first) {
  printf("\nCurrent list: \n");
  list *it;
  for(it=first;it!=NULL;it=it->next) {
    printf("%d ",it->val);
  }
}

int main() {
  list first, last, elem;
  int n,i;
  printf("Insert number of elements: ");
  scanf("%d",&n);
  init_list(&first,&last);
  for(i=2;i<=n;i++) {
    add_elem(&elem,&last,i);
  }
  print_list(&first);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:41:31.533

在您的`allocate`函数中，您分配内存并将其分配给*局部*变量`p`。由于在函数返回时未保存对局部变量的更改，因此该内存将丢失。

您也不*需要*`main`分配该内存，因为您已经通过在函数中将列表声明为非指针来做到这一点。

# java - 总计不加起来

> ID：13685434
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:57.020
> 
> 标签：java, string, if-statement, while-loop

我正在高中comp sci课上做作业，我遇到了这个问题。总数不加。有人能告诉我为什么吗？

```
import javax.swing.*;

public class TimeSheets {

  public static void main(String[] args) {

    String loc;
    String[] day = new String[7];       
    String time1;
    String time2;
    int location;
    double total = 0;
    int num = 1;
    int x = 0;
    int y = 0;
    double clock1 = 0;
    double clock2 = 0;
    double hour;

    loc = JOptionPane.showInputDialog(null, "Enter your Work Location");
    location = Integer.parseInt(loc);

    while (x < 7 && y < 7) {

      day[x] = JOptionPane.showInputDialog(null, "Enter Day "+num+" 's Starting code");
      day[y] = JOptionPane.showInputDialog(null, "Enter Day "+num+" 's Ending code");
      time1 = day[x];
      time2 = day[y];

      if (time1 == "1") {
        clock1 = 9;
      }
      if (time1 == "2") {
        clock1 = 9.5;
      }
      if (time1 == "3") {
        clock1 = 10;
      }
      if (time1 == "4") {
        clock1 = 10.5;
      }
      if (time1 == "5") {
        clock1 = 11;
      }
      if (time1 == "6") {
        clock1 = 11.5;
      }
      if (time1 == "7") {
        clock1 = 12;
      }
      if (time1 == "8") {
        clock1 = 12.5;
      }
      if (time1 == "9") {
        clock1 = 13;
      }
      if (time1 == "A") {
        clock1 = 13.5;
      }
      if (time1 == "B") {
        clock1 = 14;
      }
      if (time1 == "C") {
        clock1 = 14.5;
      }
      if (time1 == "D") {
        clock1 = 15;
      }
      if (time1 == "E") {
        clock1 = 15.5;
      }
      if (time1 == "F") {
        clock1 = 16;
      }
      if (time1 == "G") {
        clock1 = 16.5;
      }
      if (time1 == "H") {
        clock1 = 17;
      }

      if (time2 == "1") {
        clock2 = 9;
      }
      if (time2 == "2") {
        clock2 = 9.5;
      }
      if (time2 == "3") {
        clock2 = 10;
      }
      if (time2 == "4") {
        clock2 = 10.5;
      }
      if (time2 == "5") {
        clock2 = 11;
      }
      if (time2 == "6") {
        clock2 = 11.5;
      }
      if (time2 == "7") {
        clock2 = 12;
      }
      if (time2 == "8") {
        clock2 = 12.5;
      }
      if (time2 == "9") {
        clock2 = 13;
      }
      if (time2 == "A") {
        clock2 = 13.5;
      }
      if (time2 == "B") {
        clock2 = 14;
      }
      if (time2 == "C") {
        clock2 = 14.5;
      }
      if (time2 == "D") {
        clock2 = 15;
      }
      if (time2 == "E") {
        clock2 = 15.5;
      }
      if (time2 == "F") {
        clock2 = 16;
      }
      if (time2 == "G") {
        clock2 = 16.5;
      }
      if (time2 == "H") {
        clock2 = 17;
      }

      hour = clock2 - clock1;
      total = hour + hour;

      JOptionPane.showMessageDialog(null, "total hour" + total);
      x++;
      y++;
      num++;

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:36:54.557

使用 equals() 方法检查字符串是否相等。`==`运算符检查两个引用变量是否引用同一个字符串对象。`equals()`方法检查两个字符串是否有意义地相等。

```
 if (time1 == "1") { 
```

应该是

```
 if (time1.equals("1")) { 
```

还有你所有的其他`if`'陈述。我强烈建议您使用嵌套的 if else 而不是一百万个 if 语句。例如：

```
if (time1.equals("1")) {
        clock1 = 9;
      }
      else if (time1.equals("2")) {
        clock1 = 9.5;
      }
    .......... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:58:44.643

**将此方法用于使用 ENUM 的静态地图**

```
public enum TimeToClock{
    1(9),
    2(9.5);
    //so on

    public final double value;

    private static final Map<Integer,TimeToClock> map;
    public static final TimeToClock[] VALUES = values();
    static {
        map = new HashMap<Integer,TimeToClock>(3);
        for (TimeToClock type : VALUES) {
            map.put(type.value, type);
        }
    }   

    TimeToClock(int value){
        this.value = value;
    }   
    public double getValue(){
        return this.value;
    }

    public static TimeToClock get(int key){
        return map.get(key);
    }
} 
```

**利用：**

```
double value = TimeToClock.get(2).getValue(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:56:12.570

你最后的总数看起来计算不正确。

```
total = hour + hour; 
```

是不是更有意义...

```
total = total + hour; 
```

所以你是在增加总数而不是在每次循环迭代后重置它？

# twilio - 使用 twilio 接收子帐户的呼叫

> ID：13685435
> 
> 赞同：0
> 
> 时间：2012-12-03T14:35:59.083
> 
> 标签：twilio

我有一点麻烦。我有 twilio 应用程序，它允许为我的客户创建子帐户、购买电话号码和其他。我需要增加客户接听和拨打电话的可能性。[http://twilio.com](http://twilio.com)上有很多文档和指南，但我找不到如何在我的应用程序中绑定和接收子帐户电话号码的呼叫的示例。仅提供主账户示例。您能给我一些放置此类示例的代码或链接示例吗？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T06:59:02.960

您应该能够以与使用父帐户的 sid 和令牌相同的方式使用[子帐户的 Account Sid 和 Auth Token。](https://www.twilio.com/docs/api/rest/subaccounts)只需将它们放入帮助程序库，然后以相同的方式发出请求。

# php - 在 prestashop 中更改主页

> ID：13685437
> 
> 赞同：0
> 
> 时间：2012-12-03T14:36:03.400
> 
> 标签：php, prestashop

我正在使用 prestashop 1.5.2

我想更改我的主页。实际上是，`index.php`但我想将其设置为`index.php?id_category=12`. 我在哪里可以禁用主页并指定新主页？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T14:55:46.447

那将是同一个文件...您只需将一个变量附加到 URL。您只需将指向它的链接更改为指向新 URL 而不是旧 URL。

# linux - 用 NAIL 发送 HTML 邮件？

> ID：13685438
> 
> 赞同：0
> 
> 时间：2012-12-03T14:36:04.883
> 
> 标签：linux, email, command-line, centos, html-email

我在 CENTOS 机器上，尝试使用 NAIL 发送 HTML 邮件。

我在网上到处搜索，但我能找到的只是人们说使用选项'-s“Content-type：text/html;”'，但这 - 不起作用。

一个更正确的问题可能是；如何在 NAIL 发送的邮件中添加标题行？

BR / F

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:05:30.530

看起来答案是钉子无法处理这个问题。

有人在 mailx devel 邮件列表上问这个问题，答案是：

> mailx 是一个电子邮件客户端，而不是一个电子邮件传输代理。您需要直接调用 Postfix。

[http://sourceforge.net/mailarchive/forum.php?thread_name=201101250955.36795.giecrilj%40stegny.2a.pl&forum_name=nail-devel](http://sourceforge.net/mailarchive/forum.php?thread_name=201101250955.36795.giecrilj%40stegny.2a.pl&forum_name=nail-devel)

您可以使用 -t 函数设置一些标头，您会看到一条错误消息，说明哪些标头被忽略。

```
nail -t < email_file 
```

# python - 如果数据冗余，重用预建字典的有效方法？深拷贝太慢了

> ID：13685445
> 
> 赞同：1
> 
> 时间：2012-12-03T14:36:15.600
> 
> 标签：python, performance, optimization, dictionary, python-2.7

我有一个代码，它涉及从预先计算的数据（即有很多查找）构建一个非常大的字典。它使用四整数元组作为键，使用元组列表作为项。然后使用每个键的附加函数更新该字典（以便可以在稍后阶段对每个项目进行排序）。上述过程重复了数千次，但原始（基本）字典保持不变。原始字典的大小与更新的大小大致相同（但会有所不同）。

我尝试使用`deepcopy`and 以将原始字典用作更新的“基础”。结果证明，复制比从头开始重建整个字典要慢一个数量级。

如果不清楚，也许这个简化的代码会更有意义：

```
print timeit.timeit('''
for iteration in xrange(10):
    base_dictionary = {(month, day, hour): [(value, 'some_data_name' + str(value)) for value in xrange(10)]
                      for month in xrange(5)
                      for day in xrange(5)
                      for hour in xrange(5)
                      }
    for valuenumber in xrange(10):
        for id_set in base_dictionary:
            base_dictionary[id_set].append((valuenumber, 'some_data_name' + str(valuenumber)))
'''
,
'''
''', number=100) 
```

结果：1.30800844321 秒

```
print timeit.timeit('''
for iteration in xrange(10):
    new_dictionary = deepcopy(base_dictionary)
    for valuenumber in xrange(10):
        for id_set in new_dictionary:
            new_dictionary[id_set].append((valuenumber, 'some_data_name' + str(valuenumber)))
'''
,
'''
from copy import deepcopy
base_dictionary = {(month, day, hour): [(value, 'some_data_name' + str(value)) for value in xrange(10)]
                  for month in xrange(5)
                  for day in xrange(5)
                  for hour in xrange(5)
                  }
''', number=100) 
```

结果：13.8005886255 秒

**每次运行迭代都重新构建同一个字典感觉非常浪费。有没有办法加速这个过程？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:35:54.720

你需要介于浅拷贝和深拷贝之间的东西。不需要复制元组，因为它们是不可变的。

```
newdict = {k, v[:] for k, v in olddict.iteritems()} 
```

# c# - ASP.NET Web 配置写入、删除 .ASPX 和忽略带句点的文件名。

> ID：13685449
> 
> 赞同：4
> 
> 时间：2012-12-03T14:36:29.840
> 
> 标签：c#, asp.net, regex, web-config

我编写了一个简单的重写规则，因此我可以从所有页面路径中删除 .aspx。

这样，如果有人输入[http://www.domain.com/Contact](http://www.domain.com/Contact)，他们将被带到联系页面，而不必输入[http://www.domain.com/contact.aspx](http://www.domain.com/contact.aspx)。

以下规则可以正常工作，除非文件名包含句点。我不希望应用该规则，因为即使认为当 url 是文件或目录时我有一个否定条件，这也不适用于处理程序和其他特殊文件。为了避免这个问题，我通过为每个文件添加一个条件来否定特殊文件，这不再是工作人员，但是因为有很多特殊情况会出现，我不想写一个新的每个特殊情况一个。

基本上我只需要添加一个条件，即当文件名中有句点来否定它。任何人都可以帮忙吗？我不擅长正则表达式。

```
<rule name="RewriteASPX" stopProcessing="true" enabled="true">
                <match url="(.*)" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="{R:1}.aspx" />
            </rule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:53:20.760

在匹配字段中试试这个：

```
<match url="^(.*/[^.]*)$" /> 
```

它应该匹配所有没有“。”的网址。在最后一个'/'之后。

# windows - Powershell 存在本地用户 ADSI

> ID：13685456
> 
> 赞同：2
> 
> 时间：2012-12-03T14:37:00.593
> 
> 标签：windows, powershell, local

我得到以下代码（工作）：

```
 #Import File
$Users = Import-Csv C:\Users\Administrator\Desktop\userImport\users.csv

# Setting data
$compname = hostname
$computer = [ADSI]"WinNT://$compname" 
$userGroup = [ADSI]"WinNT://./Users,Group"

# Loop to add all users
$Users | %  { 

    # Create user itself
    $createUser = $computer.Create("User",$_.userid)

    # Set password (print1!)
    $createUser.SetPassword($_.password)
    $createUser.SetInfo()

    # Create extra data
    $createUser.Description = "Import via powershell"
    $createUser.FullName = $_.'full name'
    $createUser.SetInfo()

    # Set standard flags (Password expire / Password change / Account disabled)
    $createUser.UserFlags = 64 + 65536 # ADS_UF_PASSWD_CANT_CHANGE + ADS_UF_DONT_EXPIRE_PASSWD
    $createUser.SetInfo()

    # Adduser to standard user group ("SERVER02\Users")
    $userGroup.Add($createUser.Path)

    # Show that user X as been added
    $username = $_.'full name'
    echo "User  $username added"
} 
```

但是如果用户已经存在，怎么可能建立一个检查呢？我真的在网上找不到任何东西：x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:48:52.963

你可以试试这个：

```
 #Import File
$Users = Import-Csv C:\Users\Administrator\Desktop\userImport\users.csv

# Setting data
$compname = hostname
$computer = [ADSI]"WinNT://$compname" 
$userGroup = [ADSI]"WinNT://./Users,Group"

$localUsers = $computer.Children | where {$_.SchemaClassName -eq 'user'}  |  % {$_.name[0].ToString()}

# Loop to add all users
$Users | %  { 

    if($localUsers -NotContains $_.userID)
    {
      ... do your job here....
    }
    else
    {
      write-host "User $($_.userID) already exists"
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T16:36:42.497

不幸的是，ADSI 接口似乎在 Windows 8.1 中被破坏了。这是我的解决方法：

```
if (& net users | select-string "UserName") {
    #  user exists
} else {
    #  user not found
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-31T12:27:33.823

您可以使用`Exists`ADSI 的静态函数来检查用户是否存在：

```
[ADSI]::Exists('WinNT://./username') 
```

但请注意这一点：[[ADSI]::Exists 抛出异常而不是返回 False](https://stackoverflow.com/q/10757316/932282)

# javascript - jQuery插件：将事件监听器添加到元素

> ID：13685458
> 
> 赞同：1
> 
> 时间：2012-12-03T14:37:15.070
> 
> 标签：javascript, jquery, plugins, event-listener

我正在创建一个供个人使用的小型 jQuery 插件，当您将鼠标悬停在一个元素上时，它会向文档添加一些内容。

目前这是（简化的）代码：

```
 (function($){
    $.fn.tempFnName = function(options){

        var element = $('<div />');

        return this
        .each(function(){
            $(this)
            .on('mouseenter',
                function(){
                    $('body')
                    .append(element);
                })
            .on('mouseleave',
                function(){
                    element.remove();
                });
        });
    };
})(jQuery); 
```

由于某种原因，这不起作用。在 google 和 stackoverflow 上环顾四周并没有提供答案。我究竟做错了什么？

**编辑：**正如 WTK 所指出的，这段代码没有任何问题。以下代码显示了应该如何实现插件。

```
function appendAddAnchor(){
    return $('<a />').tempFnName();
}

//even if I try the following, the click event will not work!
function appendAddAnchor(){
    return $('<a />')
            .click(function(){console.log('test')});
            .tempFnName();
} 
```

这对我来说真的很奇怪，因为我曾经将 Bootstrap'`.tooltip()`链接到相同的地方`$('<a />')`，而且这没有任何问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:24:02.470

我在这个小提琴中试过这个：http: [//jsfiddle.net/Gm4jk/2/](http://jsfiddle.net/Gm4jk/2/)

```
(function ($) {
    $.fn.tempFnName = function(options){
        var element = $('<div/>');
        element.html('aTest');
        return this.each( function(){
            $(this).mouseenter(function(){
                $('body').append(element);
            });
            $(this).mouseleave(function(){
                element.remove();
            });
        });
    };
})(jQuery);

$('#start').tempFnName(); 
```

它工作得很好。可能是您遇到了兼容性问题。

来自 jQuery 文档：

“mouseenter JavaScript 事件是 Internet Explorer 专有的。由于该事件的通用性，jQuery 模拟了这个事件，因此它可以在任何浏览器中使用。当鼠标指针进入元素时，这个事件被发送到一个元素。任何 HTML 元素可以接收这个事件。”

我读到这意味着如果您不使用速记绑定方法，您可能不会得到“模拟”事件，而 jQuery 可能正在寻找除 IE 之外的所有实际事件中不存在的事件。

需要明确的是，我还让它与您在 jsFiddle 中的代码一起使用。[http://jsfiddle.net/zFKXx/2/](http://jsfiddle.net/zFKXx/2/)

# ruby-on-rails - 从类渲染部分内容时，Url 助手不可用

> ID：13685459
> 
> 赞同：1
> 
> 时间：2012-12-03T14:37:14.377
> 
> 标签：ruby-on-rails

我有一个辅助类，它呈现部分内容以将内容存储在数据库中。

它工作正常，但是当视图包含由 url 助手提供的 url 时

```
<%= link_to "Show project", projects_url, class: "button" %> 
```

它抛出以下异常

# 未定义的局部变量或方法 projects_url

在名为 NotificationRender 的助手中呈现的代码是

```
def render(options)
    viewer = ActionView::Base.new()
    viewer.view_paths = ActionController::Base.view_paths
    viewer.extend ApplicationHelper    
    viewer.render options
end 
```

我将此助手包含在类通知中

```
class Notification < ActiveRecord::Base
  include NotificationRender

  .....
  def self.create_for(user, event, params)   
      template = "notifications/_email_project"
      list_params = {:template => template,:locals => params}
      notification = Notification.new
      notification.message = notification.render(list_params) #here I render the partial
      notification.subject = I18n.t "subject.#{event}"
      notification.to = user.email     
      notification.save
 end

end 
```

# java - Apache Commons JXPath 搜索是否在 XPath 搜索期间编组对象？

> ID：13685462
> 
> 赞同：2
> 
> 时间：2012-12-03T14:37:32.527
> 
> 标签：java, apache, jxpath

我是表达式语言的新手，我想了解有关`org.apache.commons.jxpath`实用程序的更多信息。但我想知道 JXPath 实用程序的实现。对象是否首先被封送，将应用 XPath 搜索，或者对象是否保持其原始状态，即没有封送它？

如果可能，请提供一些好的参考代码片段。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:40:45.487

我也许会查看[源代码](http://svn.apache.org/repos/asf/commons/proper/jxpath/trunk/src/java/org/apache/commons/jxpath/)。当您提到“编组”时，我不太明白您的意思。该对象不会被序列化，但我希望通过一些简单的反射来发现对象的属性。

[ValueUtils.java](http://svn.apache.org/repos/asf/commons/proper/jxpath/trunk/src/java/org/apache/commons/jxpath/util/ValueUtils.java)的源代码似乎有很多对象属性的反射代码。

# javascript - 使用 jQuery 查找选定复选框按钮控件的标签

> ID：13685465
> 
> 赞同：1
> 
> 时间：2012-12-03T14:37:43.590
> 
> 标签：javascript, jquery-mobile, checkbox

这是我的代码，我如何检索选中的标签复选框列表

```
 for( var i=0; i<results.rows.length; i++  )            //Remplir tableau liste des identifiants étapes
        { 
            $('#lbtn2').append("<input name='op' checked type='checkbox' value="+results.rows.item(i).Phrase+"    id="+results.rows.item(i).idPhrase+" />");
            $('#lbtn2').append('<label for='+results.rows.item(i).idPhrase+'>'+results.rows.item(i).Phrase+'</label>');
        }

        $('#lbtn2').append('<a href="#'+window.localStorage.getItem("id_grp")+'"  class="ba2"   data-role="button" >ajouter</a>').trigger('create');

$('.ba2').live('click', function () 
{
//Code for recover list of checkbox chechked
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:41:16.773

你可以使用这个：

```
var list = $(":checked"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:49:58.143

```
$('.ba2').live('click', function () 
{
 $("#lbtn2 input:radio:checked'").each(function(index){
      alert(this).val());
}); 
```

}

请记住使用 checked="checked" 进行有效标记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T18:57:17.260

试试这个：

```
$('.ba2').live('click', function(){
    $("#lbtn2 input[type='checkbox'] :selected").each(function(){
        alert($(this).val());
    });     
}); 
```

# c# - Marshal.StructureToPtr 无法解释的内存泄漏

> ID：13685467
> 
> 赞同：3
> 
> 时间：2012-12-03T14:37:48.860
> 
> 标签：c#, c++, memory, interop, marshalling

我正在开发一个应用程序，它通过 C++/CLR 包装器涉及本机 C++ 到 C# 互操作。

我在执行以下操作时遇到问题，这会导致内存泄漏：

```
MyObject data = (MyObject)Marshal.PtrToStructure(ptr, typeof(MyObject));
Marshal.StructureToPtr(data, ptr, false); 
```

（注意：我意识到此时我实际上并没有对“数据”做任何事情，所以这是多余的。）

内存使用量持续上升，直到应用程序因系统内存不足而崩溃。当我删除此代码时，这不会发生。它不是垃圾收集器，因为 a) 它应该在系统内存不足时收集，b) 我尝试使用 GC.Collect() 强制它。

事实上，我已将泄漏范围缩小到 StructureToPtr 命令。

我无法将第三个参数设置为“true”，因为内存是由本机 C++ 分配的，而 C# 认为这个“受保护”的内存无法释放。

我检查了填充的 Data 结构是否完好无损，具有有效数据，并且与等效的本机结构大小相同。

在我看来，这就是应该发生的事情：

1.  我的 ptr 引用的本机结构被编组并复制到“数据”托管结构中

2.  管理结构被复制回 ptr 引用的同一内存。

我看不出这如何导致内存泄漏，因为它的结构大小完全相同，被复制回相同的内存空间。但显然确实如此，删除代码会堵塞泄漏。

这里有一些我不正确理解的机械师吗？

编辑：根据要求，这里是“MyObject”的声明。

C＃：

```
[StructLayout(LayoutKind.Sequential)]
public struct MyObject
{
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamOne;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamTwo;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamThree;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamFour;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamFive;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamSix;
    [MarshalAs(UnmanagedType.R4)]
    public float ParamSeven;
    [MarshalAs(UnmanagedType.R4)]
    public float ParamEight;
    [MarshalAs(UnmanagedType.R4)]
    public float ParamNine;
    public Vector2f ParamTen;
    public Vector2f ParamEleven;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ParamTwelve;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ParamThirteen;
    [MarshalAs(UnmanagedType.LPWStr)]
    public string ParamFourteen;
    public IntPtr ParamFifteen;
    public IntPtr ParamSixteen;
} 
```

C++：

```
struct MyObject
{
    public:
    bool ParamOne;
    bool ParamTwo;      
    bool ParamThree;
    bool ParamFour;
    bool ParamFive;
    bool ParamSix;
    float ParamSeven;
    float ParamEight;
    float ParamNine;
    Vector2f ParamTen;
    Vector2f ParamEleven;
    wchar_t * ParamTwelve;
    wchar_t * ParamThirteen;
    wchar_t * ParamFourteen;
    void * ParamFifteen; 
    void * ParamSixteen;
}; 
```

Vector2f的定义如下：

```
[StructLayout(LayoutKind.Sequential)]
public struct Vector2f
{
    [MarshalAs(UnmanagedType.R4)]
    float x;
    [MarshalAs(UnmanagedType.R4)]
    float y;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T18:34:46.797

您的结构中有指向字符串的指针。这些指针是在您的非托管代码中分配的（使用`new wchar_t[<a number>]`），对吗？在封送这些指向托管代码的指针时，封送拆收器创建托管字符串并用非托管字符数组的内容填充它们。当将它们封送回非托管代码时，封送器复制整个结构内容，包括字符指针，并为其分配新值（使用 为每个字符串分配内存`CoTaskMemAlloc()`）。这就是第三个参数的`Marshal.StructureToPtr`用途。如果设置为 true，则封送拆收器尝试释放字符指针指向的内存（使用`CoTaskMemFree()`）。如果您已使用为字符指针分配内存`new`运算符，您不能将该参数设置为 true，并且通过封送回非托管，您会丢失指向已分配内存的指针（封送器用新值覆盖它们）。而且由于您没有释放编组器分配的内存，因此最终会导致内存泄漏。

处理这种情况的最佳选择是：

将字符串编组为指针并用于`Marshal.PtrToStringUni()`将它们转换为字符串：

```
[StructLayout(LayoutKind.Sequential)]
public struct MyObject
{
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamOne;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamTwo;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamThree;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamFour;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamFive;
    [MarshalAs(UnmanagedType.I1)]
    public bool ParamSix;
    [MarshalAs(UnmanagedType.R4)]
    public float ParamSeven;
    [MarshalAs(UnmanagedType.R4)]
    public float ParamEight;
    [MarshalAs(UnmanagedType.R4)]
    public float ParamNine;
    public Vector2f ParamTen;
    public Vector2f ParamEleven;
    public IntPtr ParamTwelve;    // <-- These are your strings
    public IntPtr ParamThirteen;  // <--
    public IntPtr ParamFourteen;  // <--
    public IntPtr ParamFifteen;
    public IntPtr ParamSixteen;
} 
```

和编组：

```
 MyObject data = (MyObject)Marshal.PtrToStructure(ptr, typeof(MyObject));
    var str1 = Marshal.PtrToStringUni(data.ParamTwelve);
    var str2 = Marshal.PtrToStringUni(data.ParamThirteen);
    var str3 = Marshal.PtrToStringUni(data.ParamFourteen);
    Marshal.StructureToPtr(data, ptr, false); 
```

# c++ - 分配一次调用 cudaMalloc 的两个数组

> ID：13685468
> 
> 赞同：4
> 
> 时间：2012-12-03T14:37:49.920
> 
> 标签：c++, c, memory-management, cuda, gpu

内存分配是 GPU 中最耗时的操作之一，因此我想通过`cudaMalloc`使用以下代码调用一次来分配 2 个数组：

```
int numElements = 50000;
size_t size = numElements * sizeof(float);

//declarations-initializations
float *d_M = NULL;
err = cudaMalloc((void **)&d_M, 2*size);
//error checking

// Allocate the device input vector A
float *d_A = d_M;

// Allocate the device input vector B
float *d_B = d_M + size;

err = cudaMemcpy(d_A, h_A, size, cudaMemcpyHostToDevice);
//error checking

err = cudaMemcpy(d_B, h_B, size, cudaMemcpyHostToDevice);
//error checking 
```

原始代码位于名为 vectorAdd.cu 的 cuda 工具包的示例文件夹中，因此您可以假设 h_A、h_B 已正确启动，并且代码无需我进行修改即可工作。
结果是第二个 cudaMemcpy 返回了一个带有 message **invalid argument**的错误。

似乎操作“d_M + size”没有返回人们期望的结果，因为设备内存的行为不同，但我不知道如何。

是否有可能使我的方法（一次调用 cudaMalloc 为两个数组分配内存）工作？也欢迎任何关于这是否是一种好方法的评论/答案。

**更新**
正如[Robert](https://stackoverflow.com/users/1695960/robert-crovella)和[dreamcrash](https://stackoverflow.com/users/1366871/dreamcrash)的回答所建议的那样，我必须将元素数（numElements）添加到指针 d_M 而不是字节数的大小。仅供参考，没有可观察到的加速。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:36:04.363

你只需要更换

```
float *d_B = d_M + size; 
```

和

```
float *d_B = d_M + numElements; 
```

这是指针算法，如果你有一个浮点数组，`R = [1.0,1.2,3.3,3.4]`你可以通过`printf("%f",*R);`. 第二个位置呢？你就这样`printf("%f\n",*(++R));`做`r[0] + 1`。你不做`r[0] + sizeof(float)`，就像你做的那样。当你这样做时，`r[0] + sizeof(float)`你将访问位置中的元素，`r[4]`因为`size(float) = 4`。

When you declare `float *d_B = d_M + numElements;` the compiler assumes that `d_b` will be continuously allocated in memory, and each element will have a size of a `float`. Hence, you do not need to specify the distance in terms of bytes but rather in terms of elements, the compiler will do the math for you. This approach is more human-friendly since it is more intuitive to express the pointer arithmetic in terms of elements than in terms of bytes. Moreover, it is also more portable, since if the number of bytes of a given type changes based on the underneath architecture, the compiler will handle that for you. Consequently, one's code will not break because one assumed a fixed byte size.

* * *

You said that *"The result was that the second cudaMemcpy returned an error with message invalid argument"*:

If you print the number corresponding to this error, it will print `11` and if you check the [CUDA API](http://www.cs.cmu.edu/afs/cs/academic/class/15668-s11/www/cuda-doc/html/group__CUDART__TYPES_g3f51e3575c2178246db0a94a430e0038.html) you verify that this error corresponds to :

**cudaErrorInvalidValue**

> This indicates that one or more of the parameters passed to the API call is not within an acceptable range of values.

In your example means that float `*d_B = d_M + size;` is getting out of the range.

You have allocate space for `100000` floats, `d_a` will start from 0 to 50000, but according to your code `d_b` will start from `numElements * sizeof(float);` 50000 * 4 = 200000, since 200000 > 100000 you are getting **invalid argument**.

# android - RelativeLayout 崩溃，LinearLayout 工作正常！为什么？

> ID：13685471
> 
> 赞同：-2
> 
> 时间：2012-12-03T14:37:57.940
> 
> 标签：android, android-layout, android-emulator

我是 Android 编程新手（尽管我是 C 专家和 Java 中级专家）。

我不明白为什么当我尝试使用创建新项目时 Eclipse 自动生成的默认 RelativeLayout 来 setContentView() 时，我的应用程序会崩溃。

它在模拟器和我的手机上都崩溃了。

但是，如果我将布局更改为 LinearLayout 它工作得非常好。

谁能给我一个清楚的解释为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:43:50.100

首先让我向您解释一下布局并按照给定的示例进行操作：

现在让我们将注意力转向那些组织其他控件的有用布局控件。最常用的布局类是：

**FrameLayout** – 旨在显示一堆子视图控件。可以将多个视图控件添加到此布局。这可用于在同一屏幕空间内显示多个控件。

**LinearLayout** – 设计用于在单行或单列中显示子视图控件。这是一种非常方便的用于创建表单的布局方法。

**RelativeLayout** – 旨在显示子 View 控件之间的关系。例如，您可以将控件设置为位于另一个控件的“上方”或“下方”或“左侧”或“右侧”，由其唯一标识符引用。您还可以相对于父边缘对齐子视图控件。

**TableLayout** – 旨在将子视图控件组织成行和列。使用 TableRow 布局视图（基本上是水平方向的 LinearLayout）为表格的每一行添加单独的视图控件。

尝试以下代码进行相对布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center"
android:orientation="vertical" >
    <LinearLayout
        android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:orientation="vertical"
            android:padding="5dp">
        <TextView
                android:id="@+id/textMsg"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:textColor="#000000"
                android:textSize="14dp" />
    </LinearLayout>

<Button
    android:id="@+id/btn2"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Contacts"
    android:textColor="#342D7E" />

<Button
    android:id="@+id/btn1"
    android:layout_width="150dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Send"
    android:textColor="#342D7E" />

<EditText
    android:id="@+id/edittext1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btn2"
    android:layout_alignParentLeft="true"
    android:ems="10"
    android:hint="Type a Message"
    android:maxLines="5" >

    <requestFocus />
</EditText>
</RelativeLayout> 
```

让我知道它是否再次崩溃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-23T11:47:54.660

我只是有同样的问题。

我如何修复它：在 main.xml 中更改布局后，我在 mainActivity.java 文件中声明的布局仍然是 LinearLayout。

进入您的 mainActivity.java 文件并将其更改为相对输出。

检查你的它可能会解决它

# vb.net - 检查 Flash 电影是否播放完毕

> ID：13685472
> 
> 赞同：1
> 
> 时间：2012-12-03T14:38:01.980
> 
> 标签：vb.net, flash

我有使用 powerpoint 转换器从 powerpoint 转换而来的 flash 电影。我可以播放 Flash 电影，但我需要确定电影是结束还是播放完毕。

我需要隐藏 Flash 电影控件并在 Flash 电影之后显示一些控件。我尝试研究但没有找到可靠的答案，只有一些不起作用的代码段。有任何想法吗？谢谢！

这是我播放视频的方式：

```
 AxShockwaveFlash1.Stop()
    AxShockwaveFlash1.Movie = Application.StartupPath & "\RSA.swf"
    AxShockwaveFlash1.Play()
    AxShockwaveFlash1.Loop = False 
```

我使用 iSpring 将 powerpoint 转换为 flash 电影。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:56:11.047

看看这篇关于检查 SWF （电影剪辑？）[长度的文章。](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/4cfd1944-9dcd-4156-acfe-cdaea3046785/)它描述了一种可用于`AxShockwaveFlash`对象的技术，以确定 SWF 是否在其最后一帧上。

您还可以使用其他技术，但通常需要修改 SWF 的代码，以便在影片剪辑的结尾分派事件或调用函数。

我希望我能提供更多帮助，但遗憾的是，微软似乎没有`AxShockwaveFlash`在网络上提供 API 参考（也许 b/c 我不订阅 MSDN）。

# r - R中的可变数据框

> ID：13685473
> 
> 赞同：3
> 
> 时间：2012-12-03T14:38:02.557
> 
> 标签：r

假设我已经将一个 csv 文件加载到 R 中，其中包含两列（例如 A 列和 B 列），其中包含实际值条目。调用数据框 df。是否可以加快以下代码的速度：

```
dfm <- df[floor(A) = x & floor(B) = y,]
x <- 2
y <- 2
dfm 
```

我希望会有类似于功能的东西，例如

```
dfm <- function(x,y) {df[floor(A) = x & floor(B) = y,]} 
```

这样我就可以输入

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:53:46.623

由于以下几个原因，现在编写的方式不起作用：

1.  您需要在分配之前`x`和`y`之前分配值`dfm`。换句话说，行`x <- 2`和`y <- 2`必须`dfm <- ...`在行之前。
2.  `R`不知道什么`A`和`B`是，即使您将它们放在包含它们的数据框的括号内。你需要写`df$A`和`df$B`。
3.  `=`是赋值运算符，但您正在寻找逻辑运算符`==`。现在您的代码正在说“将值 x 分配给`floor(A)`”（这实际上没有意义）。您想告诉它“仅选择`floor(A)`等于 x 的行”，或者`floor(A)==x`.

所以你想要的是：

```
dfm.create <- function(x,y) {df[floor(df$A)==x & floor(df$B)==y,]}
dfm <- dfm.create(2,2) 
```

请注意，如果您希望调用数据框`dfm`，则不想命名该函数`dfm`，否则您将不得不删除该函数以制作数据框。

# image - 使用 curl 或 snoopy 类获取图像

> ID：13685482
> 
> 赞同：0
> 
> 时间：2012-12-03T14:38:25.490
> 
> 标签：image, curl, snoopy

如何获取具有 snoopy 类或 curl 的唯一图像？我有闲置的 html 代码 `<img src="unique_pic/itemname.gif" border="0">`

我想做的事？我想获取文件“unique_pic”中的所有图像并将它们保存为 .gif 或者我想从网站获取所有图像 gif。

我需要这些解决方案之一

# android - 如何阻止/断开连接/连接到开放 wifi 热点（android）的客户端？

> ID：13685483
> 
> 赞同：5
> 
> 时间：2012-12-03T14:38:27.457
> 
> 标签：android, wifi, tethering

我能够以编程方式在 Android 2.2 中创建一个开放的 wifi 热点，并使用 ARP 文件读取已连接客户端的 ip 和 mac：[此处的代码](http://www.whitebyte.info/android/android-wifi-hotspot-manager-class) 现在我想找到一种方法来限制 wifi 热点的使用。我想使用开放网络而不设置任何密钥。应该可以阻止某些客户端（可能是 mac 过滤）或断开已连接但未经授权的客户端。这个想法是通过wifi连接向热点发送消息。一些客户端应该被允许访问其他不被允许的热点。我怎样才能开发出这样的东西？感谢您的帮助或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-07T18:29:08.980

使用 mac 过滤可能是一个选项，但客户端始终可以更改他的 mac 地址，并且使用这种方法，您只能在客户端要连接时阻止。如果您想断开客户端连接，则需要使用 deauth 数据包。

android 中有一个应用程序调用 wifikill 来发送 deauth 数据包。

[http://forum.xda-developers.com/showthread.php?t=1282900](http://forum.xda-developers.com/showthread.php?t=1282900)

在这个应用程序中，您选择要断开连接的客户端，Android 设备将执行 deauth 攻击。

你可以尝试开发一些东西，但这个应用程序对我来说很成功。

但是，如果您使用开放网络来控制访问将非常棘手，即使您取消了客户端的权限，他们也总是可以更改他们的 mac 并尝试看起来像一个合法用户。您将永远无法 100% 控制开放网络中的客户端。

# linked-list - 链接链中对象的静态指针

> ID：13685485
> 
> 赞同：0
> 
> 时间：2012-12-03T14:38:28.547
> 
> 标签：linked-list

在一些运行良好的遗留代码中，使用了以下方法：

```
public class A
{
    public static A First;
    public static A Last;

    public A Next;
    public A Previous;

    public A() 
    {
        if (First == null) { First = this; }
        else { Previous = Last; Previous.Next = this; }
        Last = this;
    }
 } 
```

这样，所有类型 A 的实例都按创建顺序链接，而无需显式使用链接列表或其他任何东西。

事实上，我认为这是一个优雅的解决方案，但我也认为可以提出许多反对意见。我应该考虑哪些反对意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:42:32.690

我的主要反对意见：它不是线程安全的。如果在多个线程中使用此算法，则结果是不可预测的

# jquery - 跳转到下一页

> ID：13685487
> 
> 赞同：0
> 
> 时间：2012-12-03T14:38:51.463
> 
> 标签：jquery, html

我试图在 32 秒后重定向到另一个页面。我需要平稳过渡到第二页。现在过渡非常突然，看起来不太好。有任何想法吗？

这是我的查询：

```
function redirect() {
                window.location = $('a').attr('href');

            }

            setTimeout(redirect, 32000); 
```

HTML5：

```
<a href="Holiday_Final.htm"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:22:36.500

您不能使用淡入淡出的效果进行重定向。您必须使用 ajax 来执行此类动画。

但是你可以试试这个

```
function redirect() {
    $('body').fadeOut(1000,function(){
        window.location = $('a').attr('href');
    });
}
setTimeout(redirect, 31000); 
```

在重定向之前您将有一个 1s 淡出（并且没有淡入，只是突然加载下一页）

# c# - 如何在 C# 中打印西里尔文 PDF？缺少文字

> ID：13685491
> 
> 赞同：0
> 
> 时间：2012-12-03T14:38:59.283
> 
> 标签：c#, printing, itextsharp

我使用 iTextSharp 在我的程序中创建文档。文档中的所有文本都是俄语，我使用 Tahoma 字体：

```
 private static void PrepareFonts()
    {
        _baseTahoma = BaseFont.CreateFont("c:/windows/fonts/tahoma.ttf", BaseFont.IDENTITY_H, BaseFont.EMBEDDED);
        _tahomaBold = new Font(_baseTahoma, 10, Font.BOLD);
        _tahoma = new Font(_baseTahoma, 10, Font.NORMAL);
        _tahoma16Bold = new Font(_baseTahoma, 18, Font.BOLD);
        _tahomaSmall = new Font(_baseTahoma, 8, Font.NORMAL);
    } 
```

创建文档后，我会在单击按钮时以这种方式打印它：

```
 RegistryKey adobe = Registry.LocalMachine.OpenSubKey(@"Software\Microsoft\Windows\CurrentVersion\App Paths\AcroRd32.exe");

        if (adobe != null)
        {
            string path = adobe.GetValue("").ToString();

            GenerateDocuments();

            Process proc = new Process();

            proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            proc.StartInfo.Verb = "print";

            string pdfFileName = _invoice.FullName;

            proc.StartInfo.FileName = path;
            proc.StartInfo.Arguments = @"/p /h " + pdfFileName;
            proc.StartInfo.UseShellExecute = false;
            proc.StartInfo.CreateNoWindow = true;

            proc.Start();
            proc.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
            if (proc.HasExited == false)
            {
                if (!proc.WaitForExit(5000))
                    proc.Kill();
            }

            proc.EnableRaisingEvents = true;
            proc.Close();
        } 
```

但在纸上，只有表格中的行，没有任何字符。没有文字或数字。

在需求规范中，用户必须在单击按钮时打印文档，而我必须这样做。无法手动打开文档和“打印为图像”。

任何人都可以提出建议，我如何打印西里尔文文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:00:05.820

@Drac当我打开文件时，我看到西里尔字符；当我打印文件（正常打印）时，我看到西里尔字符。如果某些打印机无法正确打印文档，您需要查看您的打印机驱动程序（可能您使用了错误的驱动程序）或您的打印机。

# java - Inline menu appearing with mouseover

> ID：13685497
> 
> 赞同：2
> 
> 时间：2012-12-03T14:39:17.030
> 
> 标签：java, javascript, jquery, css, jsp

What I am looking for is an inline menu, that pops up by a mouseover event. Does anyone know how to do something like this? The way it currently works in my program is very complicated (using multiple servlets and JSON).

Answered

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:50:16.793

create a div element that will house the menu items that you require. hide it by default and give it absolute positioning. Add a mouseover event that will calculate the position based on which element you are hovering over and set this element's position to that and make it visible.

# c# - 用户控件的水平列表（winforms）

> ID：13685501
> 
> 赞同：3
> 
> 时间：2012-12-03T14:39:31.377
> 
> 标签：c#, winforms, listview, horizontallist

我敢肯定这不会像我目前发现的那么复杂！

我正在尝试呈现用户控件的水平列表。他们会有很多。因此，某种形式的虚拟列表将是可取的。

每个用户控件都将包含一个图像并且可以选择。

在 Android/Flex/iOS 中，这对于他们的 List Adapters、List Item Renderers 等来说是微不足道的……但是在 Win 表单中它确实看起来非常棘手。

我查看了 ObjectListView 将视图模式设置为 Tile。但是似乎没有一种方法可以水平渲染。

我试过用我的用户控件填充流布局。但是在加载图像时，内存使用量会飙升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:16:11.390

您可以使用 FlowLayoutPanel 容器控件并将其 WrapContents 设置为 false 并将 FlowDirection 设置为 LeftToRight（这是默认设置）。...而且，可能，AutoScroll 为真。

* * *

**编辑**

至于内存不足，请考虑通过处理 Scroll 事件并根据需要创建/处置控件来模拟虚拟化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:55:16.013

派生您自己的图像控件`Control`并覆盖`OnPaint`以自己绘制图像。为图片的路径或名称添加属性，但不要将图片本身存储在控件中。谷歌[自定义控件 c#](http://www.google.com/search?q=custom%20control%20c#)。

为图像使用缓存。一个很好的数据结构是[循环缓冲区](http://en.wikipedia.org/wiki/Circular_buffer)。这有助于在内存中仅保留有限数量的图像。

# c# - Windows Phone 中的自动 IP 分配

> ID：13685516
> 
> 赞同：1
> 
> 时间：2012-12-03T14:40:11.213
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我想以编程方式自动为 Windows Phone 分配 IP 地址。我可以想到两种可能的方法 1\. 分配私有 IP 地址 2\. 在 AutoIP 模式下使用 DHCP 客户端

这甚至可能吗？我找不到任何这些问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:51:06.340

除非我错了，否则您不能在 Windows phone 7.0 和 7.5 中使用 IP 地址（既不获取也不设置）。

我也试了半天，最后还是放弃了，转投android了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:46:19.893

这些都不可能。您无法控制 Windows Phone 上的 IP 分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:19:34.490

我建议您找出 WP7 的 MAC 地址，然后在特定 IP 上为该 MAC 地址设置 DHCP 保留（我在我的小型家用 WiFi 路由器上完成了此操作）。显然没有办法通过手机本身来确定 MAC 地址；您必须从网络本身中找到它。

# php - 试图分享到 facebook 的链接只分享主 url

> ID：13685519
> 
> 赞同：0
> 
> 时间：2012-12-03T14:40:19.263
> 
> 标签：php, facebook, share, facebook-sharer

我是 twitter、facebook 等 api 和 javascripts 的新手。

其他人可能会问类似的问题，但请检查我的问题，我想这个问题不是重复的问题。

我正在尝试将**url 分享到 facebook**。这是我的代码

```
<?php $link="www.google.com"> 
    <script>
        function fbs_click() 
        {
        u=location.href;
        t=document.title;
        window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');
        return false;
        }
        </script>
        <style>
        html .fb_share_button { display: -moz-inline-block; display:inline-block; padding:1px 20px 0 5px; height:15px;  background:url(http://static.ak.facebook.com/images/share/facebook_share_icon.gif?6:26981) no-repeat top right; } html .fb_share_button:hover { color:#fff; url(http://static.ak.facebook.com/images/share/facebook_share_icon.gif?6:26981) no-repeat top right; text-decoration:none; }
        </style> 
        <a rel="nofollow" href="http://www.facebook.com/share.php?u=<?php  echo $link;?>" 
        class="fb_share_button" onclick="return fbs_click()" target="_blank" style="text-align:center;"></a>
        </div> 
```

但不是共享`www.google.com`它，而是显示**主要网址**，例如`www.mysite.com/facebookshare.php`我哪里出错了。

我还尝试了一个简单的锚标记方法来分享，但它扰乱了我的整个 CSS。示例

```
<a href = "http://www.facebook.com/sharer/sharer.php?u= <?php echo $link;?>">
                    <img src = "http://www.mysite.com/FB_2.png"></a> 
```

请帮助我获取我希望将 (www.google.com) 共享到 facebook 的确切网址。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:38:06.657

[https://stackoverflow.com/questions/10566503/facebook-share-sharer-php-x-facebook-debugger?rq=1](https://stackoverflow.com/questions/10566503/facebook-share-sharer-php-x-facebook-debugger?rq=1) fb 不再支持 fb 的共享部分，您必须使用 javascript 的提要对话框部分api [https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/) 还确保您的 og 元标记包含正确的信息[http://ogp.me/](http://ogp.me/)这可能是您的问题

# java - 显示下一帧后“母帧”消失

> ID：13685527
> 
> 赞同：-2
> 
> 时间：2012-12-03T14:40:42.477
> 
> 标签：java, swing, jframe, multiple-instances

我实际上正在研究一个显示许多帧的java项目，当我们点击一​​个按钮然后我们转到适当的帧......问题是第一帧总是保持可见。

我试过 f1.setVisible(false); 在执行的操作中，但同样的问题仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T14:43:39.693

我已经建议过一千次了，但不是多个框架，而是让单个框架使用`CardLayout`可以切换多个视图的适当布局管理器（例如）。

有关详细信息，请参阅[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T14:51:55.263

在打开一个新框架时，还调用一个关闭窗口的方法

```
private void closeWindow(){
    WindowEvent event = new WindowEvent(this, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(event);
} 
```

# android - 如何重新启动 GLSurfaceView 的渲染线程（或改用什么方法）？

> ID：13685529
> 
> 赞同：2
> 
> 时间：2012-12-03T14:40:44.787
> 
> 标签：android, multithreading, opengl-es, glsurfaceview

我正在尝试制作经典手机游戏范例的方法：关卡选择器，然后是游戏屏幕。 *我完全理解有很多方法可以做到这一点*，但我想知道当我尝试这个特定的方法时出了什么问题（出于学习目的）：

1.  我有一个活动，其中包含对我自己的 GLSurfaceView 孩子的引用。在活动开始时，它会加载默认的“级别”并完美播放。我可以看到渲染线程已启动。

2.  我实现了一个 OptionsMenu 项目，它在激活后使用适当的适配器膨胀 GridView，允许用户选择一个级别；并使用 setContentView 将此膨胀的 Layout 设置为 Activity。这是 GLThread 死亡的时候。

3.  现在我还实现了该菜单的 OnClick，以便在单击后它会在游戏引擎中加载一个关卡（工作正常，顺便说一句），并通过使用 setContentView 和保存的（在 1.中）参考带回 GLSurfaceView。

4.  这就是我得到一个空白屏幕的方式。一切正常，菜单仍然有效，我可以回到关卡选择器，但在调试器中我可以看到渲染线程不存在。

拜托，有人可以向我解释这里**到底出了什么问题**吗？我完全不确定这个OpenGL内在。

# android - 当页脚存在时，片段列表视图的最后两项不显示

> ID：13685532
> 
> 赞同：0
> 
> 时间：2012-12-03T14:40:50.620
> 
> 标签：android, android-layout, android-listview

美好的一天，我有一个包含 4 个片段的活动。Activity 有一个页脚，我用它在这些片段视图之间切换。现在在我的一个片段中，我有一些小部件，最后一个小部件是`ListView`. 问题是，最后 2 个条目`Listview`显示不正确！它们被页脚遮挡。`Listview`我已经为to的宽度和高度设置了 LayoutParameters `FILL_PARENT`。但它不工作。知道我该如何解决这个问题吗？提前致谢。

我的布局是：

对于片段：

```
<?xml version="1.0" encoding="utf-8"?>  
    <RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent" 
    android:layout_height="match_parent"
    android:orientation="vertical">

    <Button android:id="@+id/line_button_id" android:layout_width="160dp"
        android:layout_height="wrap_content" android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" android:layout_marginLeft="5dp" android:focusable="true"
        android:layout_marginTop="8dp" android:text="@string/line_graph" android:background="@drawable/temp_left_button" />

    <Button android:id="@+id/bar_button_id" android:layout_width="160dp"
        android:layout_height="wrap_content" android:layout_alignBaseline="@+id/line_button_id"
        android:layout_alignBottom="@+id/line_button_id" android:focusable="true"
        android:layout_alignParentRight="true" android:layout_marginRight="5dp"
        android:text="@string/bar_graph" android:background="@drawable/temp_right_button"></Button>"

    <FrameLayout 
       android:id="@+id/graph_framelayout_id"
       android:layout_width="fill_parent"
       android:layout_height="280dp"
       android:layout_below="@id/line_button_id"
       android:padding="4dp"
       android:layout_margin="4dp"
       android:background="@drawable/rounded_date_filter">
    </FrameLayout>

        <!-- first cell information, dashboard -->
       <LinearLayout
             android:id="@+id/row1_id" 
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_margin="4dp"
             android:layout_below="@id/graph_framelayout_id"
             android:orientation="horizontal"
             android:clickable="true"
             android:background="@drawable/rounded_table_row">

            <TextView 
                   android:id="@+id/dashboard_datefrom_id"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:layout_weight="1"
                   android:layout_gravity="center_vertical"
                   android:layout_marginLeft="20dp"
                   android:text="01 may 2012"/>

               <ImageView 
                   android:id="@+id/dashboard_image_id"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:layout_weight="1"
                   android:src="@drawable/ic_action_search"/>

                  <TextView 
                   android:id="@+id/dashboard_dateto_id"
                   android:layout_width="wrap_content"
                   android:layout_height="wrap_content"
                   android:layout_weight="1"
                   android:layout_gravity="center_vertical"
                   android:text="01 sept 2012"/>
       </LinearLayout>

       <!-- accounts overview listview -->
        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/row1_id"
            android:layout_margin="4dp"
            android:orientation="vertical"
            android:background="@drawable/rounded_date_filter">

             <TextView 
              android:id="@+id/list_text_header_id"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:padding="2dp"
              android:text="@string/data_grid_text_header_day"
              android:background="@drawable/text_header">
              </TextView>

             <ListView
              android:id="@android:id/list" 
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
             </ListView>

        </LinearLayout>
        </RelativeLayout> 
```

对于活动我有这个：

<

```
?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

 <FrameLayout
        android:id="@+id/fragment_container_id"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </FrameLayout>

<include layout="@layout/footer"></include>"
</RelativeLayout> 
```

我用活动的框架布局中的片段替换

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:47:25.117

您在 Fragment 中使用什么布局，如果您使用 RelativeLayout 并将上述属性设置为您的 ListView，这肯定不会发生，如下所示：

尝试将其添加到 Activity 布局中的 FrameLayout 中。

```
android:layout_above="@+id/footer" 
```

# delphi - Delphi datatsource autoedit，哪个事件

> ID：13685533
> 
> 赞同：0
> 
> 时间：2012-12-03T14:40:54.990
> 
> 标签：delphi, events, dataset, datasource

我在 Delphi 2009 中有一个数据源和一个数据集。我想，如果我的列 (AT) 值 = 1，那么数据源自动编辑属性将为 true，其他值为 false。我尝试使用 onStateChange，但这对我来说不是一件好事。此列有 2 个值 1 或 0，我看到，如果这是真的，但我不知道，哪个事件可以帮助我。：） 例子：

```
procedure TdmodUnion.dsoQuotationsStateChange(Sender: TObject); 
begin
if dsetQ.FieldByName('AT').AsInteger=1 then 
    dsourceQ.AutoEdit:=true; 
end; 
```

我可以选择什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:47:56.487

您可以使用 OnDataChange，字段在参数内。如果您使用的是 ADO，那么数据集的 AfterScrollEvent 也很有用。

# objective-c - 桌面图像更改时收到通知？

> ID：13685534
> 
> 赞同：0
> 
> 时间：2012-12-03T14:40:54.740
> 
> 标签：objective-c, image, macos, cocoa, desktop

有什么办法可以在桌面图像更改时得到通知？最简单的方法是通过通知，但我还没有找到任何特别的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:51:32.347

不幸的是，没有办法检测用户的壁纸或监控它何时发生变化。我们根本无法访问这些信息。

# python - Emacs Python 错误延迟

> ID：13685536
> 
> 赞同：1
> 
> 时间：2012-12-03T14:40:58.403
> 
> 标签：python, emacs

我在 Windows 7 上使用 Python 3.3 和 Emacs 23.4。使用 python-shell 时出现一些奇怪的行为。如果我输入一个产生某种输出的命令，我会立即在下一行得到结果。但是，如果我输入的 Python 语句导致错误，则不会显示任何输出。当我输入下一条 Python 语句并按回车键时，将显示上一行的错误消息。

例如，当我处理一些命令行参数时：

```
>>> args
Namespace(templatedir=None, xmldir=None)
>>> args.bobbins
>>> args.templatedir
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'Namespace' object has no attribute 'bobbins'
>>> 
```

第一条语句打印出 args 变量的值。第二条语句应该打印出一条错误消息，但没有打印任何内容。第三个语句是正确的，但实际上打印出第二个语句的错误。

有人知道我的 Python / Emacs 设置有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-21T08:40:05.113

这是 Python 中的一个错误，已[修复](https://bugs.python.org/issue21425)。

# c# - Array.Length 和 Array.Count() 的区别

> ID：13685541
> 
> 赞同：19
> 
> 时间：2012-12-03T14:41:17.990
> 
> 标签：c#, arrays

> **可能重复：**
> [集合中的计数、长度和大小](https://stackoverflow.com/questions/300522/count-vs-length-vs-size-in-a-collection)
> [Array.Length vs Array.Count](https://stackoverflow.com/questions/1506963/array-length-vs-array-count)

我声明了这个数组：

```
int[] misInts = new Int[someNumber];

/* make some happy operations with the elements in misInts */ 
```

所以我可以通过 misInts.Length 或 misInts.Count() 获得 SomeNumber 的值

C# 中的数组继承自 IEnumerable。所以如果我有：

```
Func<int> misIntsF = Enumerable.Range(0, someNumber).Select(c=> /* make some happy operations that return Integers */); 
```

有人告诉我，如果我创建 misIntsF.Count()，我实际上会执行 Lambda 表达式中的代码，获取结果并计算它们。但是数组 misInts 没有 Lambda 表达式。

misInts.Count() 是否比 misInts.Length 更消耗内存？misInts.Count() 和 misInts.Length 有什么区别？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-03T14:43:30.927

`array.Count()`实际上是对`Enumerable.Count<T>(IEnumerable<T>)`扩展方法的调用。

由于这个方法需要一个`IEnumerable<T>`（而不是`ICollection<T>`，它有一个`Count`属性），它需要遍历整个序列来确定它有多大。

但是，它实际上检查参数是否实现`ICollection<T>`（哪些数组实现），如果是，则`Count`直接返回。
因此，调用`.Count()`数组并不比调用慢多少`.Length`，尽管它会涉及额外的类型转换。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-03T14:43:53.020

没有太大的区别，因为[`Enumerable.Count`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)如果它可以转换为 [`ICollection<T>`](http://msdn.microsoft.com/en-us/library/92t2ye13.aspx).

MSDN：

> 如果源的类型实现了 ICollection，则该实现用于获取元素的计数。否则，此方法确定计数。

来源：

```
ICollection<TSource> collection = source as ICollection<TSource>;
if (collection != null)
{
    return collection.Count;
} 
```

否则它将枚举序列以对其进行计数：

```
int num = 0;
using (IEnumerator<TSource> enumerator = source.GetEnumerator())
{
    while (enumerator.MoveNext())
    {
        num++;
    }
}
return num; 
```

（来源：[**ILSpy**](http://ilspy.net/)）

# php - 如何使用 Active Record 插入子查询的值？

> ID：13685544
> 
> 赞同：1
> 
> 时间：2012-12-03T14:41:40.897
> 
> 标签：php, sql, codeigniter, codeigniter-2

我使用活动记录将值插入数据库。

所有其他类型的查询我都使用自定义查询，因为它更容易，但活动记录插入非常好。

所以我有这个代码：

```
 $comment = array (
'point_id' => $object->id,
'title' => $object->title,
'comment' => $object->comment,
'author_name' => $object->author_name,
'is_temp' => 0,
'parent_id' => $object->parent_id

);
return $this->db->insert('comments', $comment); 
```

现在我希望能够将 is_temp 设置为子查询结果，即：

```
(SELECT allow_user_comments from subjects where id='somevalue') 
```

一个人如何做到这一点？

我希望避免使用第三方库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:04:53.843

好吧，我怀疑这就是你应该这样做的事实，但 CI 不就是这样吗？

这就是我让它工作的方式（当然，从 $comment 数组中删除 is_temp）：

```
$this->db->set($comment);
$this->db->set('is_temp',
'(SELECT allow_user_comments from subjects where id='.$subject_id.')',FALSE);
$this->db->insert('comments'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:54:40.030

随意使用[https://github.com/NTICompass/CodeIgniter-Subqueries](https://github.com/NTICompass/CodeIgniter-Subqueries)。我已经使用它并且它有效！希望它会有用。:-)

# sinatra - 在停止 EventMachine 之前返回 Sinatra 响应

> ID：13685551
> 
> 赞同：0
> 
> 时间：2012-12-03T14:42:14.590
> 
> 标签：sinatra, eventmachine

我在事件机器中使用 Sinatra，我想在收到 DELETE 请求后关闭服务器并退出，并返回 200 OK。但是，现在我无法做到这一点，并且总是在退出之前返回一个空响应。我将如何实现这一目标？以下是相关代码：

```
EM.run do
  class Server < Sinatra::Base
    delete '*' do
      EM.defer proc{ halt 200 }, proc{ EM.stop }
     end
  end

  Server.run!
end 
```

发生的情况是我得到一个空回复，并得到以下堆栈跟踪：

```
/Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/sinatra-1.3.3/lib/sinatra/base.rb:803:in `throw': uncaught throw `halt' in thread 0x7fa4225f2020 (ThreadError)
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/sinatra-1.3.3/lib/sinatra/base.rb:803:in `halt'
    from instant-markdown-d.rb:39:in `DELETE *'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:1037:in `call'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:1037:in `spawn_threadpool'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:1033:in `initialize'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:1033:in `new'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:1033:in `spawn_threadpool'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:1023:in `defer'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/thin-1.5.0/lib/thin/connection.rb:51:in `process'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
    from /Users/syeo/.rvm/gems/ruby-1.8.7-p352@instant-markdown-d/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
    from instant-markdown-d.rb:10 
```

我也尝试了许多类似的方法，但找不到发送 200 的方法，然后关闭服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T16:48:45.587

最终这样做了：

```
EM.run do
  class Server < Sinatra::Base
    delete '*' do
      EM.add_timer(0.2) do
        EM.stop
        exit
      end
      status 200
    end
  end

  Server.run!
end 
```

这是一个黑客，但至少有效。

# javascript - 用下拉列表替换文本框

> ID：13685552
> 
> 赞同：0
> 
> 时间：2012-12-03T14:42:20.107
> 
> 标签：javascript, jquery, css, struts2, struts

```
<s:select name="searchCriteria"
            headerValue="Select Criteria"
            list="#{'userName':'User Name','email':'Email','status':'Status','firmName':'Firm Name','firstName':'First Name',
            'middleName':'Middle Name','lastName':'Last Name'}"
              ></s:select>

<s:textfield name="searchField" size="50" /> 
```

我有一个下拉列表，允许我按搜索条件搜索用户。但是当用户选择按公司名称搜索时。我想用下拉列表替换文本框（显示可用公司）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T20:30:45.057

People didn't accept my edit over Alex_B (¬¬' I was just encoding what Alex_B said in comments) so I put this new answer:

*Wrap the text box in a div and then add an event on when user makes the required selection you could do something like*

```
$('#select_id').show();
$('#textbox_id').hide(); 
```

*And the jsp:*

```
<s:select id="first_select" ... ></s:select>

<s:select id="select_id" ...></s:select>
<s:textfield id="textbox_id" .../> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:45:57.060

将文本框包装在 div 中，然后在用户进行所需选择时添加一个事件，您可以执行类似的操作

```
$('div').empty().html('<s: select ... '); 
```

# php - Google Drive API 网络认证 PHP

> ID：13685555
> 
> 赞同：0
> 
> 时间：2012-12-03T14:42:27.960
> 
> 标签：php, google-drive-api

我需要创建一个外部 php Web 应用程序 (PHP) 以使用 API 连接到 Google Drive。问题是快速启动示例说明用户必须访问一个 url 来获取授权码才能完成授权。有没有办法在没有任何用户交互的情况下自动实现授权。我基本上需要通过 Web 应用程序自动复制现有的文档模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:59:34.777

这在没有授权的情况下是不可能的，但在没有用户交互的情况下是可能的。请参阅有关[域委派](https://developers.google.com/drive/delegation)和[服务帐户](https://developers.google.com/drive/service-accounts)的 Drive SDK 文档部分。服务帐户可能是您需要的。

# flash - 使用 RTMFP 进行 P2P、多对多实时视频聊天时，什么时候应该使用 RTMFP 群组？

> ID：13685556
> 
> 赞同：1
> 
> 时间：2012-12-03T14:42:28.400
> 
> 标签：flash, actionscript, streaming, flash-media-server, rtmfp

基本上，我正在开发一个通过 RTMFP 促进多对多实时视频聊天的程序，而依靠 RTMP。我已经启动并运行了所有基本功能，而且大多数情况下人们可以进出并相互交谈。但是，我在 RTMFP 中遇到了一种称为“组”的东西，这让我认为这可能是错误的编码方式。

什么时候应该使用 NetGroup 对象和类似的东西，什么时候应该只使用自己的 P2P RTMFP 混合物（即用于实时视频聊天）？能够依靠 RTMP 的愿望是否会影响这个决定？我知道返回并重新编写所有内容可能是一个坏主意，但我仍然需要真正了解我在这里看到的内容以及何时使用它。谢谢！

编辑：我试图在个别访问者的连接、与用户相关但不流式传输的数据等上保留一些相当具体的标签。

# actionscript-3 - 如何检测 SpinnerList 控件中间的点击？带测试用例和截图

> ID：13685558
> 
> 赞同：1
> 
> 时间：2012-12-03T14:42:30.510
> 
> 标签：actionscript-3, apache-flex, spinner, flex4.6, flex-mobile

如何检测[SpinnerList控件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/SpinnerList.html)**中间**的项目的点击？

即典型情况 - 当用户滚动 SpinnerList 时，直到所需项目位于中间，**然后**单击它？

当我只是添加一个`click`事件处理程序时，我也会错误地检测到这种情况，当用户只是单击某个项目以使其显示在中间时，如下截图所示：

![在此处输入图像描述](../Images/5dab6a777acda553d45697291ba884d7.png)

下面是我的测试用例代码。

请问有什么建议吗？我也尝试使用自定义`SpinnerListItemRenderer`并在那里添加点击处理程序，但它并没有改变上述问题。

**主要.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:ViewNavigatorApplication 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    firstView="views.MainHomeView">
</s:ViewNavigatorApplication> 
```

**意见/MainHomeView.mxml：**

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        title="How to detect a click?">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            private function handleClick(event:Event):void {
                trace('selectedItem: ' + _list.selectedItem);
            }
        ]]>
    </fx:Script>

    <s:SpinnerListContainer>
        <s:SpinnerList id="_list" 
                       click="handleClick(event)"
                       typicalItem="45" 
                       dataProvider="{new ArrayList([1,5,6,10,15,30])}"
                       wrapElements="false"/>
    </s:SpinnerListContainer>
</s:View> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:53:04.640

自己解决了这个问题`itemRenderer`-

**红黑.as：**

```
package {
    import flash.events.MouseEvent;
    import spark.components.List;
    import spark.components.SpinnerList;
    import spark.components.SpinnerListItemRenderer;

    public class RedBlack extends SpinnerListItemRenderer {
        public function RedBlack() {
            super();
            cacheAsBitmap = true;
            minHeight = 50;
            setStyle('textAlign', 'center');
            addEventListener(MouseEvent.CLICK, handleClick, false, 0, true);
        }

        override public function set data(value:Object):void {
            super.data = value;
            setStyle('color', int(value) % 2 ? 'red' : 'black');
        }

        private function handleClick(e:MouseEvent):void {
            var list:SpinnerList = owner as SpinnerList;
            var value:int = int(data);

            if (list && value == list.selectedItem) {
                trace('clicked in the middle: ' + value);
            }
        }   
    }
} 
```

# php - 双下拉 - 来自 MySQL 的内容

> ID：13685562
> 
> 赞同：0
> 
> 时间：2012-12-03T14:42:45.317
> 
> 标签：php, javascript, mysql, ajax

我目前有 2 个下拉菜单，例如国家和州。我想根据第一个下拉框的选择来限制第二个下拉菜单的内容。例如，如果是英国，则不会显示美国德克萨斯州或阿拉斯加等州。

目前我发现的唯一解决方案是使用带有一堆数组等的 JS。但问题是下拉列表的内容是固定的，我需要从 MySQL 数据库中获取下拉框的内容。

有谁知道实现这一目标的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:03:19.040

```
<select name="country" id="sel1">
  <option>USA</option>
  ...
</select>

<select name="state" id="sel2">
  Some default options
  ...
</select>

<script type="text/javascript">
   var sel1 = document.getElementById('sel1');
   sel1.onchange = function() {
      ---> ajax functionality to change sel2 contents <----
   }
</script> 
```

# combobox - 在 ZK 中更改组合框的颜色

> ID：13685563
> 
> 赞同：0
> 
> 时间：2012-12-03T14:42:46.750
> 
> 标签：combobox, zk, zul

嗨，我是 ZK 的新手，我想将组合框的选定单元格从标准颜色浅蓝色更改为绿色。我一直在寻找在线资源，但不知何故我什么都做不了。有小费吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T03:05:23.047

我认为这正是您正在寻找的，即下拉列表中的选定项目应该是绿色而不是默认的浅蓝色

```
<zk>
<style>
.z-combobox-rounded-pp .z-comboitem-seld, .z-combobox-pp .z-comboitem-seld {
    background: green;
}
</style>
<window border="normal" title="hello">
    <combobox>
      <comboitem label="item 1"/>
      <comboitem label="item 2"/>
      <comboitem label="item 3"/>
      <comboitem label="item 4"/>
    </combobox> 
</window>
</zk> 
```

[你可以在这里](http://zkfiddle.org/sample/j7sbi/1-change-selected-comboitem-background)看到一个现场演示（带有 6.0.1 微风主题），但同样的代码也应该可以在 ZK 6.5.1 上运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T18:16:48.077

在 ZK 中更改颜色是通过对元素应用/覆盖 css 来完成的。
您正在寻找的 css 类是`.z-comboitem:hover`.
只需将以下内容添加到 .zul

```
<style>
.z-comboitem:hover {
    background: /* your color here*/; 
 }
 </style> 
```

请阅读[此](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/Theming_and_Styling/CSS_Classes_and_Styles)内容以获取更多信息。

## 编辑

抱歉，我的答案是更改悬停颜色而不是选定的颜色，并且我引用了错误的 CSS 类的第一个版本...
**@kachhalimbus**答案应该是最好的，尤其是因为他肯定比我有更多的经验。所以感谢**@kachhalimbu** :)

# java - 没有标题问题的片段对话框

> ID：13685564
> 
> 赞同：7
> 
> 时间：2012-12-03T14:42:56.217
> 
> 标签：java, android

我正在尝试创建一个片段对话框，并且需要完整的空间来显示信息。所以我想禁用标题栏。但是在我禁用它之后，宽度不再最大化。

```
public class ArticleSearchFragment extends DialogFragment {
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setStyle(STYLE_NO_TITLE, getTheme());
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
  View view = inflater.inflate(R.layout.article_search, container, false);
  ...
} 
```

和 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<AutoCompleteTextView
    android:id="@+id/searchField"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:hint="Ean / Name / Produkt Nummer"
    android:completionThreshold="1" />
<Button
   android:id="@+id/cancel"
   android:layout_width="match_parent"
   android:layout_height="wrap_content"
   android:text="@string/cancel" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-27T07:38:41.757

把这段代码放在你`onCreateView()`的`dialog fragment`

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_view_image, null);
   getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
   return view;
} 
```

它将删除标题栏`Dialog Fragment`

# c# - 我应该在查询中检查 null 还是 dbnull

> ID：13685571
> 
> 赞同：0
> 
> 时间：2012-12-03T14:43:24.407
> 
> 标签：c#, sql-server-2008

我有一个查询，它检查有多少特定类型的记录使用`count()`.

```
select count(*) from abc where date="some value" 
```

在这里，我的查询是否有可能返回`null`或`DBNull`？我应该检查他们吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T14:45:34.613

我不这么认为：它可以返回零或更大，因为你在数。

`NULL`将是一个错误的结果，因为*没有结果*是*零结果*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:45:48.633

不，它总是会返回一个大于或等于的数字`0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:06:27.303

就试一试吧：

```
SELECT COUNT(*) WHERE 1=2
--Returns 0 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/ms175997%28v=sql.105%29.aspx)：

> COUNT 始终返回一个**int**数据类型值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:47:33.037

如果您使用的是 ExecuteScalar，我认为该调用将检索 null 而不是 DbNull 对象。

为了始终接收一个值，我用来封装我的请求：SELECT ISNULL((SELECT COUNT(date) FROM abc WHERE date = "some value"), 0)

哔叽

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T14:48:12.433

您应该检查`DbNull`它是面向数据库的。

看到这个[答案](https://stackoverflow.com/questions/4958379/what-is-the-difference-between-null-and-system-dbnull-value)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T14:54:09.257

这就是我所做的：

```
if (rdr.HasRows)
        {
          rdr.Read();
          if (rdr["MyField"] != DBNull.Value)
                {
                   bla bla....
                } 
```

所以是的，检查 DBNull。

# javascript - Windows Phone 8：无法识别 CSS 方向

> ID：13685577
> 
> 赞同：3
> 
> 时间：2012-12-03T14:43:42.273
> 
> 标签：javascript, css, orientation, media-queries, windows-phone-8

我正在尝试在 css 中获取所有移动设备上的方向并在方向更改时触发一些 css。

这是对代码的简单测试：

```
 <div class="orientation">
        <span class="landscape">Landscape</span>
        <span class="portrait">Portrait</span>
    </div> 
```

CSS是：

```
 .portrait, .landscape {
         position: absolute;
         top: 0px;
         left: 0px;
     }

    .portrait {display: block;}
    .landscape {display: none;}

    @media screen and (orientation:landscape) {
        .portrait {display: none;}
        .landscape {display: block;}
    } 
```

现在在所有 webkit 浏览器（android、ios）甚至桌面上它都可以正常工作（除了几个设备），但在新的 windows phone 8 设备中它没有接受变化。（诺基亚 lumia 920）

我还查看了一些 javascript 资源（虽然我不是 javascript wiz），即：

*   [http://www.developria.com/2010/08/detecting-screen-orientation-i.html](http://www.developria.com/2010/08/detecting-screen-orientation-i.html)
*   [http://davidwalsh.name/orientation-change](http://davidwalsh.name/orientation-change)

但据我所知，这仍然不适用于 windows phone 8 设备？

我需要使用特定的 MS css 代码还是有其他方法可以做到这一点？如果有一个支持跨浏览器/跨移动设备的 javascript 片段可以获取更改并在更改时向 body 标记添加一个类，那就太好了。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T21:19:00.427

`@media all and (orientation:landscape)`绝对是您应该采取的正确方向。在关于 WP8 和 HTML 的 build2012 演讲中有一个现场演示。[有关 WP8 IE10 @ http://channel9.msdn.com/Events/Build/2012/2-015](http://channel9.msdn.com/Events/Build/2012/2-015)上的方向更改，请参见时间戳 35:30~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T19:38:26.930

根据this [blog entry](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/15/adapting-your-webkit-optimized-site-for-internet-explorer-10.aspx#step2)，当您在本地查看网页时，IE 默认为 Intranet 站点的向后兼容模式。这可能是导致它无法按预期工作的原因。您可以通过添加以下元标记来修复它：

```
<meta http-equiv="x-ua-compatible" content="IE=edge" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-18T16:07:25.363

虽然这是一个老问题，但我遇到了同样的问题，即 Surface Pro 2 平板电脑上的 IE11 无法识别方向。它归结为空白。我想我会分享解决方案，以防其他人遇到同样的问题。

不起作用：
`@media all and (orientation : portrait) {`

作品：
`@media all and (orientation:portrait) {`

# spring - 只有 Spring-MVC 需要哪些 jar？

> ID：13685579
> 
> 赞同：4
> 
> 时间：2012-12-03T14:43:49.073
> 
> 标签：spring, spring-mvc, spring-webflow

我需要在我的临时项目中运行 Spring-MVC。同时我有最小的内存区域来存储所有的 jar 文件。所以任何机构都建议我只需要 Spring-MVC 而不是任何其他 jar 文件。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:51:31.940

根据 maven，spring-webmvc`3.1.2`需要以下 jar：

*   aopalliance-1.0.jar
*   commons-logging-1.1.1.jar
*   spring-webmvc-3.1.2.RELEASE.jar
*   spring-asm-3.1.2.RELEASE.jar
*   spring-beans-3.1.2.RELEASE.jar
*   spring-core-3.1.2.RELEASE.jar
*   spring-context-3.1.2.RELEASE.jar
*   spring-aop-3.1.2.RELEASE.jar
*   spring-expression-3.1.2.RELEASE.jar
*   spring-context-support-3.1.2.RELEASE.jar
*   spring-web-3.1.2.RELEASE.jar

servlet 容器（fe servlet-api）提供的东西被忽略了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:51:55.693

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-web</artifactId>
  <version>3.1.0.RELEASE</version>
</dependency>
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-core</artifactId>
  <version>3.1.0.RELEASE</version>
  <exclusions>
    <exclusion>
      <artifactId>commons-logging</artifactId>
      <groupId>commons-logging</groupId>
    </exclusion>
  </exclusions>
</dependency>
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-webmvc</artifactId>
  <version>3.1.0.RELEASE</version>
</dependency> 
```

# database - 从数据库初始化演员的最佳实践方法是什么

> ID：13685581
> 
> 赞同：5
> 
> 时间：2012-12-03T14:43:50.900
> 
> 标签：database, scala, initialization, akka, actor

我有一个顶级演员（在监护人之下），`Groups`在启动时调用它需要从数据库中加载组列表并根据数据库中的这些组创建一堆子演员。

我已将数据库加载代码放在`preStart`函数内，因为我不希望在加载组之前处理任何消息。

目前我的`Groups`演员是这样的；

```
var groups: Map[String, ActorRef] = Map()

override def preStart() = {
  groups = getGroupsFromDB() map createGroup
}

def createGroup(pair: (String, Long)) = {
  val (name, id) = pair
  val group = context.actorOf(Props(new Group(id, name)), name = name)

  name -> group
} 
```

但是我不认为这是处理此问题的最佳方法，因为如果数据库服务器不可用会发生什么？那么从数据库处理数据初始化的最佳实践方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:31:38.317

Akka[文档](http://doc.akka.io/docs/akka/snapshot/scala/fault-tolerance.html)解释了如何监督顶级参与者的容错。

如果数据库不可用，您可以应用那里的原则来管理您可能会发现的异常。

# sh - Linux 回收站脚本

> ID：13685584
> 
> 赞同：2
> 
> 时间：2012-12-03T14:43:57.493
> 
> 标签：sh, recycle-bin

我在 SH shell linux 中用三个不同的脚本创建了一个回收站脚本，删除、回收和恢复。

前两个脚本工作正常；“删除”将所选文件移动到回收站，同时记录一个名为“trashinfo”的文本文件，该文件显示文件的原始路径位置（稍后用于恢复）和“垃圾箱”，删除回收站中的所有内容.

“恢复”脚本应采用删除脚本中获得的记录路径名并将文件返回到其原始位置。我花了比我想记住的更多的时间，并且无法让恢复脚本正常工作！

下面是我编写的脚本，据我所知，我正在寻找包含路径名的文本文件中的文件名变量，例如“restore testfile”，然后将其与基本名称命令 testfile然后移动到已被 grep 并与基本名称组合的位置。

有人对我要去哪里有任何指示吗？

```
if [ "$*" != -f ]
then
path=grep "$*" /usr/local/bin/trashinfo
pathname=basename "$path"
mv "$path" "$pathname" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:53:23.577

```
path=$(grep "$*" /usr/local/bin/trashinfo)
pathname=$(basename "$path") 
```

# notepad++ - 使用 Notepad++ 替换文本文件中的许多不同字符串

> ID：13685588
> 
> 赞同：1
> 
> 时间：2012-12-03T14:44:14.317
> 
> 标签：notepad++, text-editor, replace

我有一个文本文件，我需要用其他字符串替换许多不同的字符串，例如

```
AA > b
BB > hes
kg > ret 
```

等等

当然，我想一次全部更换。我想知道如何在文本编辑器中执行此操作（即不使用类似的工具`sed`）。这在记事本++中可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:33:52.473

Notepad++ 无法做到这一点，我从未见过任何其他编辑器可以做到这一点。

一种选择是为它编写自己的 Notepad++ 插件，如果你喜欢这种东西的话。

否则命令行工具或某种脚本是最简单的选择。

# android - XML 多标签问题 Android

> ID：13685589
> 
> 赞同：1
> 
> 时间：2012-12-03T14:44:15.863
> 
> 标签：android, xml

我正在使用 xml，但遇到了一个无法解决的问题。我在 xml 代码中有标记相同的标签，我需要将它们全部拉入，但我目前拥有的代码仅拉入第一个标签。我试图解析的 xml 代码是：

```
<Pickup>
  <AddressLine>Address Line 1</AddressLine>
  <AddressLine>Address Line 2</AddressLine>
  <AddressLine>Address Line 3</AddressLine>
  <AddressLine>Address Line 4</AddressLine>
  <AddressLine>Address Line 5</AddressLine>
     <Postcode>
        <PostcodeOut>PostCode One</PostcodeOut>
        <PostcodeIn>PostCode Two</PostcodeIn>
     </Postcode>
     <AddressCoords>
        <Latitude>00.000000</Latitude>
        <Longitude>-0.000000</Longitude>
    </AddressCoords> 
```

我解析数据的代码是：

```
 XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(xml); // getting DOM
    references = new ArrayList<String>();
    NodeList nl = doc.getElementsByTagName("Bookings");
    NodeList nlpickup = doc.getElementsByTagName("Pickup");
    NodeList nldestination = doc.getElementsByTagName("Destination");
    NodeList nlAddress = doc.getElementsByTagName("AddressLine");

    AddressData = new StringBuilder();
    addressData = new ArrayList<String>();

    // looping through all item nodes <item>
    for (int i = 0; i < nl.getLength(); i++) {              

        Element e = (Element) nl.item(i);
        resultCode = parser.getValue(e, "BookingNo");
        DateTime = parser.getValue(e, "PickupTime");

        Element etwo = (Element) nlpickup.item(i);
        Element eaddress = (Element) nlAddress.item(i);
        PAddressTwo = parser.getValue(eaddress, "AddressLine");

         AddressData.append(PAddressTwo + " ,");

        PPostIn = parser.getValue(etwo, "PostcodeOut");
        PPostOut = parser.getValue(etwo, "PostcodeIn");
        VType = parser.getValue(e, "VehicleType");
        Dist =parser.getValue(e, "Mileage");

        Element ethree = (Element) nldestination.item(i);
        DAddressOne = parser.getValue(ethree, "AddressLine");
        DPostIn = parser.getValue(ethree, "PostcodeOut");
        DPostOut = parser.getValue(ethree, "PostcodeIn");

    } 
```

我正在使用的 xml 解析器是：

```
public class XMLParser {

// constructor
public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();

        xml = EntityUtils.toString(httpEntity);
        InputStream is = new ByteArrayInputStream(xml.getBytes("UTF-8"));
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sbtwo = new StringBuilder();
        String myfeed = null;
        while ((myfeed = reader.readLine()) != null) {
            final String newjsontwo = myfeed.replaceAll(
                    "throw 'allowIllegalResourceCall is false.';", "");
            sbtwo.append(newjsontwo);
        }
        is.close();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){

                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    } 
```

任何想法我如何获得标签以及代码中哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:56:51.247

你没有做错任何事。解析多个元素基本上就是您对 Bookings NodeList nl 所做的工作。通过使用标签名称、Document 类调用 getElementsByTagName 获取 NodeList，并使用 NodeList 的 getLength() 方法和 item() 方法遍历 NodeList 中的节点。

```
NodeList nl = doc.getElementsByTagName("AdressLine");
for(int i = 0; i < nl.getLength(); i++) {
   Node n = nl.item(0);
   // do something with node...
   Element e = (Element)n;
   e.getElementsByTagName("PostCode");
} 
```

如果将 Node 对象强制转换为 Element 类，则 Element 类对象只允许访问相应 Node 对象的子元素。在上面的代码中，`e.getElementsByTagName("PostCode");`仅返回相应 AdressLine 元素的 PostCode 子元素。

在您使用以下代码行的情况下，例如，当您执行 Document 类的 getElementsByTagName 方法时，您正在解析整个 xml 文档的每个 AdressLine 。Document 类的 doc 对象对应于整个文档。

```
NodeList nlAddress = doc.getElementsByTagName("AddressLine"); 
```

我希望这有帮助！

# asp.net-mvc-3 - ObjectCache 在什么级别

> ID：13685591
> 
> 赞同：2
> 
> 时间：2012-12-03T14:44:18.920
> 
> 标签：asp.net-mvc-3, caching

如果我将一个对象添加到 ObjectCache - 它存储在什么级别？应用程序的所有用户都可以访问它还是只有特定实例可以访问它？

我读过声称它在应用程序级别的文章，但是当我枚举缓存时，我只能看到应用程序实例创建的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:54:39.607

据我所知，它取决于应用程序池（因为它位于 ASP.NET 堆栈的顶部）。

这意味着如果您在同一台机器上有多个相同缓存的实例，每个实例使用不同的应用程序池，那么您将拥有不同的缓存。如果您有多台机器，则相同。

如果您想在多台机器上使用单个缓存，请使用 Windows Server Appfabric 等分布式缓存。

# java - Java，无法在 Windows 上删除文件

> ID：13685592
> 
> 赞同：1
> 
> 时间：2012-12-03T14:44:20.533
> 
> 标签：java, windows, deployment, javafx, auto-update

我的应用程序有一个简单的更新程序。在代码中，我正在下载新版本，删除旧版本并将新版本重命名为旧版本。

它在 Linux 上运行良好。但不适用于 Windows。没有例外或其他东西。ps RemotePlayer.jar 它是当前运行的应用程序。

**更新：**

不起作用 - 这意味着在 file.delete() 和 file.renameTo(...) 文件仍然存在之后。我使用 sun java 7。（因为我使用 JavaFX）。

ps对不起我的英语。

```
public void checkUpdate(){
    new Thread(new Runnable() {
        @Override
        public void run() {
            System.err.println("Start of checking for update.");
            StringBuilder url = new StringBuilder();
            url.append(NetworkManager.SERVER_URL).append("/torock/getlastversionsize");
            File curJarFile = null;
            File newJarFile  = null;

            try {
                curJarFile = new File(new File(".").getCanonicalPath() + "/Player/RemotePlayer.jar");
                newJarFile = new File(new File(".").getCanonicalPath() + "/Player/RemotePlayerTemp.jar");
                if (newJarFile.exists()){
                    newJarFile.delete();
                }
            } catch (IOException e) {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                System.err.println("Cannot find curr Jar file");
                return;
            }

            if (curJarFile.exists()){
                setAccesToFile(curJarFile);
                try {
                    String resp = NetworkManager.makeGetRequest(url.toString());
                    JSONObject jsresp = new JSONObject(resp);
                    if (jsresp.getString("st").equals("ok")){
                        if (jsresp.getInt("size") != curJarFile.length()){
                            System.out.println("New version available, downloading started.");
                            StringBuilder downloadURL = new StringBuilder();
                            downloadURL.append(NetworkManager.SERVER_URL).append("/torock/getlatestversion");

                            if (NetworkManager.downLoadFile(downloadURL.toString(), newJarFile)){

                                if (jsresp.getString("md5").equals(Tools.md5File(newJarFile))){
                                    setAccesToFile(newJarFile);
                                    System.err.println("Deleting old version. File = " + curJarFile.getCanonicalPath());

                                    boolean b = false;
                                    if (curJarFile.canWrite() && curJarFile.canRead()){
                                        curJarFile.delete();
                                    }else System.err.println("Cannot delete cur file, doesn't have permission");

                                    System.err.println("Installing new version. new File = " + newJarFile.getCanonicalPath());

                                    if (curJarFile.canWrite() && curJarFile.canRead()){
                                        newJarFile.renameTo(curJarFile);
                                        b = true;
                                    }else System.err.println("Cannot rename new file, doesn't have permission");

                                    System.err.println("last version has been installed. new File  = " + newJarFile.getCanonicalPath());

                                    if (b){
                                        Platform.runLater(new Runnable() {
                                            @Override
                                            public void run() {
                                                JOptionPane.showMessageDialog(null, String.format("Внимание, %s", "Установлена новая версия, перезапустите приложение" + "", "Внимание", JOptionPane.ERROR_MESSAGE));

                                            }
                                        });
                                    }
                                }else System.err.println("Downloading file failed, md5 doesn't match.");
                            }
                        } else System.err.println("You use latest version of application");
                    }
                }catch (Exception e){
                    e.printStackTrace();
                    System.err.println("Cannot check new version.");
                }

            }else {
                System.err.println("Current jar file not found");
            }
        }
    }).start();
}

private void setAccesToFile(File f){
    f.setReadable(true, false);
    f.setExecutable(true, false);
    f.setWritable(true, false);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-13T14:29:29.687

我找到了解决这个问题的方法。在我的案例中出现了删除问题，因为-：

```
File f1=new File("temp.txt");
RandomAccessFile raf=new RandomAccessFile(f1,"rw");
f1.delete();//The file will not get deleted because raf is open on the file to be deleted 
```

但是，如果我在调用 delete 之前关闭 RandomAccessFile，那么我可以删除该文件。

```
File f1=new File("temp.txt");
RandomAccessFile raf=new RandomAccessFile(f1,"rw");
raf.close();
f1.delete();//Now the file will  get deleted 
```

所以我们必须在调用删除天气之前检查任何对象，如 FileInputStream、RandomAccessFile 是否在该文件上打开。如果是，那么我们必须在对该文件调用 delete 之前关闭该对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:48:52.837

windows 锁定当前正在使用的文件。你不能删除它们。在 Windows 上，您无法删除应用程序当前正在使用的 jar 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:06:11.827

由于您使用的是 Java 7，请尝试`java.nio.file.Files.delete(file.toPath())`，如果删除失败，它将引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:00:28.980

有几个原因：

1.  您是否有权在 windows 中编辑文件。

2.  该文件是否正在使用中。

3.  这条路是对还是错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-16T14:04:47.747

我不知道您使用的是哪个版本的 Java。

我知道当 Java 是 sun 属性时，他们发布了 Object File 无法在 Windows 平台上正确删除文件（对不起，我再也找不到参考了）。

您可以做的技巧是直接测试平台。当您在 linux 上时，只需使用经典的 File 对象。

在 windows 上启动一个命令系统来要求 windows 删除你想要的文件。

```
Runtime.getRuntime().exec(String command); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-11-23T05:30:54.700

我只想发表一条评论。我了解到，如果您以管理员身份运行 eclipse 程序，则可以从 eclipse 中删除 Java 中的文件。即，当您右键单击 IDE 图标（Eclipse 或任何其他 IDE）并选择以管理员身份运行时，Windows 允许您删除该文件。

我希望这有帮助。它帮助了我。

亲切地，

费尔南多

# post - Laravel 更新语法 - 使用数组更新记录

> ID：13685593
> 
> 赞同：19
> 
> 时间：2012-12-03T14:44:21.323
> 
> 标签：post, laravel, laravel-routing

我无法通过 Laravel 中的 POST 进行基本记录更新。

我已经在一个数组中捕获了所有的帖子数据，如果现有的 Order# 为 0，那么我创建一个新记录（工作正常）。否则我更新现有记录。

订单.php

```
class Order extends Eloquent {
    public static $table = 'my_orders';
} 
```

路由.php

```
//Handle a new order POST
Route::post('order', array('do' => function() {
    $thisOrder = array(
         'qty' => Input::get('quantity'),
         'desc' => Input::get('description'),
    );

    $thisOrderID = Input::get('orderNo');

    //CHECK FOR NEW OR EXISTING ORDER
    if($thisOrderID > 0) {
        //THIS FUNCTION SOMEHOW RETURNS THE FUNCTION CALL AND DOESNT CONTINUE PAST
        //AND THE RECORD IS NOT UPDATED
        $updateOrder = Order::update($thisOrderID, $thisOrder);
    }
} 
```

更新：上面的代码确实有效。我有一个验证错误，导致函数提前返回。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-03T15:11:13.193

而不是这一行：

```
$updateOrder = Order::update($thisOrderID, $thisOrder); 
```

你需要做：

```
$updateOrder = Order::find($thisOrderID)->update($thisOrder); 
```

使用 find()（等于 where_id()），您可以从数据库中选择特定行，并使用 update 传递新数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:10:03.233

你觉得这怎么样：

```
//Handle a new order POST
Route::post('order', array('do' => function() {
    $thisOrder = array(
         'qty' => Input::get('quantity'),
         'desc' => Input::get('description'),
    );

    $thisOrderID = Input::get('orderNo');

    $order = Order::find( $thisOrderID );

    //CHECK FOR NEW OR EXISTING ORDER
    if( $order ) {
        $order->title = 'New order title';
        $order->desc = 'New description';
        $order->save();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:13:26.753

erm ，我会建议这样做，如果 $thisOrder 包含密钥，它只会更新记录，否则只会创建一个新记录。

```
$thisOrder = array(
     'orderNo' => Input::get('orderNo'),
     'qty' => Input::get('quantity'),
     'desc' => Input::get('description'),
);

$updateOrder = Order::save($thisOrder); 
```

如果 Input::get('orderNo') 不会创建任何值，否则更新

# android - 获取其他应用的生命周期状态

> ID：13685596
> 
> 赞同：1
> 
> 时间：2012-12-03T14:44:26.907
> 
> 标签：android, android-activity, android-lifecycle

如果其他应用程序发生更改，我想获取它们的生命周期状态。首先，如果 whatsapp 重新打开，我想显示一个小吐司，例如：“whatsapp，onResume()”。如果我在使用 whatsapp 后切换到主屏幕，我想要一个新的祝酒词：“whatsapp，onPause()”，以及每个动作。

# windows-8 - 带有全屏滚动条的水平布局

> ID：13685602
> 
> 赞同：1
> 
> 时间：2012-12-03T14:44:46.980
> 
> 标签：windows-8

如何使用全屏滚动条创建水平布局？就像 Windows 8 中的“Store”应用程序。我使用 WinJS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:15:17.367

试试这个，flexbox：

> [http://msdn.microsoft.com/en-us/library/ie/hh673531(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh673531(v=vs.85).aspx)

有一个名为“flex-direction”的属性允许您将行更改为列，即元素将垂直对齐。也可以反转方向，即容器中的最后一个元素将首先出现在列表中。这个属性可以取值——'row'、'row-reverse'、'column'和'column-reverse'。

# django - 如果用户登录，带有 Django 的 userena 如何跟踪？

> ID：13685603
> 
> 赞同：4
> 
> 时间：2012-12-03T14:44:46.603
> 
> 标签：django, session

使用普通的 Django 用户处理，一旦用户登录，您将保存一个会话。但是，在读取 userena views.py 文件进行登录后，我看不到如何跟踪用户，因此一旦他们登录在，该站点现在他们已登录。我将来自 userena 的代码放在下面：

```
def signin(request, auth_form=AuthenticationForm,
       template_name='userena/signin_form.html',
       redirect_field_name=REDIRECT_FIELD_NAME,
       redirect_signin_function=signin_redirect, extra_context=None):
"""
Signin using email or username with password.

Signs a user in by combining email/username with password. If the
combination is correct and the user :func:`is_active` the
:func:`redirect_signin_function` is called with the arguments
``REDIRECT_FIELD_NAME`` and an instance of the :class:`User` whois is
trying the login. The returned value of the function will be the URL that
is redirected to.

A user can also select to be remembered for ``USERENA_REMEMBER_DAYS``.

:param auth_form:
    Form to use for signing the user in. Defaults to the
    :class:`AuthenticationForm` supplied by userena.

:param template_name:
    String defining the name of the template to use. Defaults to
    ``userena/signin_form.html``.

:param redirect_field_name:
    Form field name which contains the value for a redirect to the
    successing page. Defaults to ``next`` and is set in
    ``REDIRECT_FIELD_NAME`` setting.

:param redirect_signin_function:
    Function which handles the redirect. This functions gets the value of
    ``REDIRECT_FIELD_NAME`` and the :class:`User` who has logged in. It
    must return a string which specifies the URI to redirect to.

:param extra_context:
    A dictionary containing extra variables that should be passed to the
    rendered template. The ``form`` key is always the ``auth_form``.

**Context**

``form``
    Form used for authentication supplied by ``auth_form``.

"""
form = auth_form

if request.method == 'POST':
    form = auth_form(request.POST, request.FILES)
    if form.is_valid():
        identification, password, remember_me = (form.cleaned_data['identification'],
                                                 form.cleaned_data['password'],
                                                 form.cleaned_data['remember_me'])
        user = authenticate(identification=identification,
                            password=password)
        if user.is_active:
            login(request, user)
            if remember_me:
                request.session.set_expiry(userena_settings.USERENA_REMEMBER_ME_DAYS[1] * 86400)
            else: request.session.set_expiry(0)

            if userena_settings.USERENA_USE_MESSAGES:
                messages.success(request, _('You have been signed in.'),
                                 fail_silently=True)

            # Whereto now?
            redirect_to = redirect_signin_function(
                request.REQUEST.get(redirect_field_name), user)
            return redirect(redirect_to)
        else:
            return redirect(reverse('userena_disabled',
                                    kwargs={'username': user.username}))

if not extra_context: extra_context = dict()
extra_context.update({
    'form': form,
    'next': request.REQUEST.get(redirect_field_name),
})
return ExtraContextTemplateView.as_view(template_name=template_name,
                                        extra_context=extra_context)(request) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:28:43.257

用户首先使用

> 用户=验证（身份=身份，密码=密码）

可以在这里找到[https://github.com/django/django/blob/master/django/contrib/auth/backends.py](https://github.com/django/django/blob/master/django/contrib/auth/backends.py) 该方法检查用户是否存在，并检查密码是否正确。

如果一切顺利，就会调用登录方法

> 登录（请求，用户）

可以在这里找到 [https://github.com/django/django/blob/master/django/contrib/auth/views.py](https://github.com/django/django/blob/master/django/contrib/auth/views.py)

如您所见，这是 Django 附带的两种方法，它们充当 Django 的“默认”身份验证包。

您的站点知道用户已登录，因为您可能会使用中间件（特别是 SessionMiddleware 和 AuthenticationMiddleware），它们将会话和用户对象附加到请求中。上面提到的登录方法将用户 ID 保存到会话中。

有关更多详细信息，请参阅[https://docs.djangoproject.com/en/dev/topics/auth/#authentication-in-web-requests](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-in-web-requests)

* * *

关于您的评论：

您可以使用*RequestContext*呈现您的模板，或者让您的视图返回一个*TemplateResponse*。请参阅[https://docs.djangoproject.com/en/dev/ref/template-response/#using-templateresponse-and-simpletemplateresponse](https://docs.djangoproject.com/en/dev/ref/template-response/#using-templateresponse-and-simpletemplateresponse)

这会将*用户*对象传递给模板处理器。然后，在您的模板中，您可以执行以下操作：

```
{% if user.is_authenticated %}
 <p>Welcome {{ user.first_name }}</p>
{% else %}
 <p>Please log in</p>
{% endif %} 
```

另请参阅[https://docs.djangoproject.com/en/dev/topics/auth/#id8](https://docs.djangoproject.com/en/dev/topics/auth/#id8)

在我看来，确实很有可能将它的修改版本放在你的 base.html 中。例如，如果用户未登录，则显示登录按钮，并在用户登录时将其替换为将用户带到他/她的个人资料页面的按钮。

# php - 自动记录/记录请求 URI 作为 PHP 错误的一部分？

> ID：13685606
> 
> 赞同：4
> 
> 时间：2012-12-03T14:44:53.943
> 
> 标签：php, error-handling

有没有办法让请求 URI 自动添加到`error_log()`输出中？当前的错误如下所示：

```
[03-Dec-2012 13:56:22] PHP Fatal error:  Call to a member function getStories()
on a non-object in /usr/share/php/MyProject/Model/Index.php on line 148 
```

有没有办法在那里获取URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:51:03.633

希望这可以帮助：

```
 function debugErrorHandler($errno, $errstr, $errfile, $errline)
    {
       if(error_reporting()!==0) 
       {
          switch($errno) 
          {
            default:
               error_log("PHP Warning Debug: Server Request URI: " .
              print_r($_SERVER["REQUEST_URI"], true));
              break;
          }

          return false; // false -&gt; Execute PHP internal error handler
     }
    } 
```

# arrays - 计算对象数组中列的唯一行数

> ID：13685608
> 
> 赞同：1
> 
> 时间：2012-12-03T14:45:04.537
> 
> 标签：arrays, ruby-on-rails-3, object, unique

## 使用

```
Ruby  1.9.3-p194  
Rails 3.2.8 
```

这就是我需要的。
计算不同的人力资源 (human_resource_id) 并将其除以分配的总数 (assignment_id)。因此，下面给出的虚拟数据的答案应该是：

### 每个人力资源 1.5 个任务

但我只是不知道该去哪里了。
这是我尝试过的：

**表名：**作业

```
id       | human_resource_id | assignment_id | assignment_start_date | assignment_expected_end_date
80101780 | 20200132          | 80101780      | 2012-10-25            | 2012-10-31
80101300 | 20200132          | 80101300      | 2012-07-07            | 2012-07-31
80101308 | 21100066          | 80101308      | 2012-07-09            | 2012-07-17 
```

首先，我需要为我需要“查看”的时间段做出选择。这总是一年前的最大值。

```
a = Assignment.find(:all, :conditions => { :assignment_expected_end_date => (DateTime.now - 1.year)..DateTimenow })
=> [
#<Assignment id: 80101780, human_resource_id: "20200132", assignment_id: "80101780", assignment_start_date: "2012-10-25", assignment_expected_end_date: "2012-10-31">, 
#<Assignment id: 80101300, human_resource_id: "20200132", assignment_id: "80101300", assignment_start_date: "2012-07-07", assignment_expected_end_date: "2012-07-31">, 
#<Assignment id: 80101308, human_resource_id: "21100066", assignment_id: "80101308", assignment_start_date: "2012-07-09", assignment_expected_end_date: "2012-07-17">
]

foo = a.group_by(&:human_resource_id) 
```

现在我得到了一个漂亮的“对象哈希数组”，我只是不知道下一步该做什么。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:56:32.250

您可以尝试在 SQL 中执行请求：

```
ActiveRecord::Base.connection.select_value('SELECT count(distinct human_resource_id) / count(distinct assignment_id) AS ratio FROM assignments'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:52:48.113

你可以做类似的事情

```
human_resource_count = assignments.collect{|a| a.human_resource_id}.uniq.count
assignment_count = assignments.collect{|a| a.assignment_id}.uniq.count

result = human_resource_count/assignment_count 
```

# symfony1 - 创建一个接受空值的布尔表单小部件

> ID：13685609
> 
> 赞同：1
> 
> 时间：2012-12-03T14:45:05.720
> 
> 标签：symfony1, widget, symfony-1.4, propel, symfony-forms

我的 Symfony 模型有一个布尔字段，但也接受 NULL，因此有效地是一个三态值。

我怎样才能为此编写一个小部件？Symfony 自动生成一个 sfWidgetFormCheckbox 但不能设置为 NULL。

我尝试了 sfWidgetFormChoice ，但我必须将值指定为字符串才能使它们工作：

```
$this->setWidget('wt', new sfWidgetFormChoice(array(
    'choices' => array(true => 'true', false => 'false', null => 'null')
))); 
```

它适用于存储值，但每当我保存“假”值时，选择就会跳回“空”。我尝试了 'false'、'0'、'' 等的几种组合，但在所有三种情况下都没有任何效果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T20:16:01.910

[来自文档](http://symfony.com/legacy/doc/more-with-symfony/1_4/en/05-Custom-Widgets-and-Validators#chapter_05_building_a_simple_widget_and_validator)的示例：

```
class sfWidgetFormTrilean extends sfWidgetForm
{
  public function configure($options = array(), $attributes = array())
  {

    $this->addOption('choices', array(
      0 => 'No',
      1 => 'Yes',
      'null' => 'Null'
    ));
  }

  public function render($name, $value = null, $attributes = array(), $errors = array())
  {
    $value = $value === null ? 'null' : $value;

    $options = array();
    foreach ($this->getOption('choices') as $key => $option)
    {
      $attributes = array('value' => self::escapeOnce($key));
      if ($key == $value)
      {
        $attributes['selected'] = 'selected';
      }

      $options[] = $this->renderContentTag(
        'option',
        self::escapeOnce($option),
        $attributes
      );
    }

    return $this->renderContentTag(
      'select',
      "\n".implode("\n", $options)."\n",
      array_merge(array('name' => $name), $attributes
    ));
  }
} 
```

# batch-file - MQ 触发器执行批处理文件

> ID：13685611
> 
> 赞同：1
> 
> 时间：2012-12-03T14:45:17.497
> 
> 标签：batch-file, triggers, websphere, message, broker

我的场景是使用批处理文件停止和启动消息流，其中我有 mqsi 命令。当我手动执行批处理文件时，我可以停止和启动流程。当我尝试使用在一个特定队列上启用的触发器执行批处理文件时，我收到以下错误，

* * *

C:\Program Files\IBM\MQSI\7.0\bin>mqsistopmsgflow DISSERTATION_MS -e WITH_WATCHDOG -m WITH_WATCHDOG.MainFlow_Webservice_With_WatchDog 线程“main”中的异常 java.lang.NoClassDefFoundError: com.ibm.broker.config.util.MessageFlowControl 原因： java.lang.ClassNotFoundException: com.ibm.broker.config.util.MessageFlowControl at java.net.URLClassLoader.findClass(URLClassLoader.java:434) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:653) 在 sun。 misc.Launcher$AppClassLoader.loadClass(Launcher.java:358) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:619)

## 找不到主类：com.ibm.broker.config.util.MessageFlowControl。程序将会退出。

我不确定，我在哪里做错了。请求您的帮助。谢谢。

问候， 吉文

# android - 如果未启用服务，则阻止应用程序继续运行

> ID：13685616
> 
> 赞同：0
> 
> 时间：2012-12-03T14:45:37.400
> 
> 标签：android, service, gps

我正在创建一个使用 GPS 的 Android 应用程序。我想提示用户打开位置服务并阻止程序进行，除非它们被打开。我尝试使用 while 循环，但由于某种原因它不起作用，并且出现内存不足错误。关于如何实现这样的事情的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:51:24.987

你不能长时间阻塞 UI 线程，否则你会得到可怕的 ANR（应用程序无响应）对话框。像 Android 这样的 GUI 框架是基于事件的。`finish()`因此，在单击对话框的“确定”按钮时，使用对话框通知用户先决条件和您的活动。

# android - 如何在应用程序中编码音频？

> ID：13685625
> 
> 赞同：0
> 
> 时间：2012-12-03T14:46:26.250
> 
> 标签：android, audio

**一些背景**

我制作的应用程序是一个间隔应用程序。这允许用户为两个间隔中的每一个选择时间量。运行时，应用程序会使用用户选择的两个时间设置运行倒计时计时器。我想在每个间隔播放两首歌曲，但我无法设置歌曲更改的具体时间，因为用户会更改。因此，如果用户只为第一个间隔选择 4 秒，我只需要播放这首歌，而当倒计时从另一个间隔开始时，我需要播放另一首歌曲。

**现在到我真正的问题。**

我如何调用音频播放？我看了很多问题，但他们都说我需要把音频播放器放在一个新的活动中？如果我把它放在一个新的活动中，它不会停止倒数计时器吗？我怎样才能使倒数计时器继续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:03:19.720

你有两种在android中播放声音的方法，一种是SoundBoard（专为短片设计，如果你想播放歌曲就不要使用它），另一种是MediaPlayer。您可以通过将文件放入 raw 文件夹然后执行以下操作来播放音频：

```
MediaPlayer mp = MediaPlayer.create(ClassName.this, R.raw.sound); 
mp.start(); 
```

然后，当计时器结束时，您可以停止歌曲，`mp.stop();`您可以通过以下方式播放以下音频文件：

```
mp.reset();  
mp = MediaPlayer.create(ClassName.this, R.raw.sound2); 
```

完成后记得使用`mp.release();`.

我希望我了解您需要做什么，您还应该将媒体播放器放在一个新线程中，请参阅官方 android 开发人员文档：

> 为避免挂起您的 UI 线程，请生成另一个线程来准备 MediaPlayer 并在完成后通知主线程。但是，虽然您可以自己编写线程逻辑，但这种模式在使用 MediaPlayer 时非常常见，以至于框架提供了一种通过使用 prepareAsync() 方法来完成此任务的便捷方法。此方法开始在后台准备媒体并立即返回。媒体准备完成后，调用通过 setOnPreparedListener() 配置的 MediaPlayer.OnPreparedListener 的 onPrepared() 方法。

# jquery - 下拉菜单jquery的问题

> ID：13685626
> 
> 赞同：0
> 
> 时间：2012-12-03T14:46:28.093
> 
> 标签：jquery, html, drop-down-menu

我真的是 JS 和 Jquery 的新手，我正在尝试使用 slideDown 制作一个下拉菜单，但是当我在父链接中快速将鼠标悬停很多次时，事情就有点不对劲了。

这是代码：

```
jQuery(document).ready(function($) {
  $('li.parent').mouseenter(function() {
    $('.sub').slideDown('fast')
  });

  $('li.parent').mouseleave(function() {
    $('.sub').slideUp('fast')
  });
}); 
```

和 HTML

```
 <li class="parent">
   <span>Produtos</span>
    <ul class="sub">
    <div class="sub-bg">
        <li>
          <a href='produtos.php?categoria=9'>Banho</a>
        </li>
        <li>
          <a href='produtos.php?categoria=7'>Cama</a>
        </li>
     </div>
    </ul>
   </li> 
```

这里是在线网站[，](http://viotidesign.com.br/clientes/casafelice/)所以你们可以看到问题，只需将鼠标快速悬停在“Produtos”按钮上即可。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:50:56.217

如果我没有猜错你的问题，你只需要使用[stop()](http://api.jquery.com/stop/)就可以`stop the currently-running animation on the matched elements`了，它应该没问题：

```
jQuery(document).ready(function($) {
    $('li.parent').mouseenter(function() {
        $('.sub').stop().slideDown('fast')
    });

    $('li.parent').mouseleave(function() {
        $('.sub').stop().slideUp('fast')
    });
});​ 
```

**演示：http:** [//jsfiddle.net/vGuHh/](http://jsfiddle.net/vGuHh/)

# c# - CsvReader 不检测二进制输入文件

> ID：13685628
> 
> 赞同：0
> 
> 时间：2012-12-03T14:46:49.593
> 
> 标签：c#, parsing, csv

我正在使用[A Fast CSV Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)库来读取我的 C# 应用程序中的 CSV 文件。但是我在创建`CsvReader`对象时遇到了一些麻烦。

`CsvReader csv = new CsvReader(new StreamReader("data.csv"), true));`

将二进制文件传递给此代码时，不会引发异常，并且输入文件被视为普通 CSV 文件。如何检测给定文件是否为 CSV 文件？或者至少我怎样才能确保它不是二进制文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:00:37.920

检测文件是文本还是二进制[*文件*](http://code.google.com/p/chardetsharp/source/browse/#svn/trunk/src/CharDet)[很难](http://code.google.com/p/chardetsharp/source/browse/#svn/trunk/src/CharDet)*。绝大多数文本文件*也不*是CSV 也是有道理的。因此，我质疑这种验证是否值得。*

 *如果 CSV 阅读器无法检测到垃圾输入（可能是在您开始解析而不是在构建时），那么我会考虑使用不同的实现。有很多负载可供选择。

这是.net中可用的一个：

参考`Microsoft.VisualBasic`，您可以使用[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

```
using (var parser =
    new TextFieldParser(@"c:\data.csv")
        {
            TextFieldType = FieldType.Delimited,
            Delimiters = new[] { "," }
        })
{
    while (!parser.EndOfData)
    {
        string[] fields;
        fields = parser.ReadFields();
        //go go go!
    }
} 
```*

# php - PHP从字符串中提取ID

> ID：13685632
> 
> 赞同：1
> 
> 时间：2012-12-03T14:47:07.433
> 
> 标签：php, regex

例如：Lorem ipsum dolor sit amet，[ID: 123] Suspendisse [blahsh 68] condimentu

我怎么会得到123？

我有第一部分检查角色位置：

```
$pos = strrpos($l, "ID: ");
if ($pos === false) {
    $id = 123;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T14:50:58.323

这最容易用正则表达式处理。

```
$matches = array();
$pattern = '/^.*\[ID:\s+(\d+)\].*$/';
preg_match($pattern, "Lorem ipsum dolor sit amet, [ID: 123] Suspendisse [blahsh 68] condimentu", $matches);

// Your number is in $matches[1]
Array
(
    [0] => Lorem ipsum dolor sit amet, [ID: 123] Suspendisse [blahsh 68] condimentu
    [1] => 123
) 
```

模式匹配`[ID:`后跟任意数量的空格`\s+`。然后`(\d+)`捕获数字序列。`[]`括号需要转义，`\[ \]`因为它们是正则表达式中的元字符。

如果您对表达式的其余部分感兴趣：

*   `^.*`是字符串的开头以及后面的任何其他内容...
*   `.*$`是在上面已经解释的匹配部分之后直到字符串末尾的任何其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:57:46.680

如果字符串总是 [ID:1234] 可能会这样

```
$str='Lorem ipsum dolor sit amet, [ID: 123] Suspendisse [blahsh 68] condimentu';
preg_match_all("~\[ID:\s(.*?\d+)\]~",$str,$match);
echo $match[1][0]; 
```

# jsf - 如何在重定向页面中显示面孔消息

> ID：13685633
> 
> 赞同：27
> 
> 时间：2012-12-03T14:47:10.920
> 
> 标签：jsf, redirect, message

我提供了一个界面，允许用户为应用程序创建帐户。在过程结束时，注册方法执行注册过程，将成功消息添加到页面，然后将用户导航到显示所有系统用户的中央数据表。

我遇到的问题是，由于页面重定向，成功消息永远不会显示。我不能在方法中使用 wait() ，因为在方法完成之前不会显示 JSF 消息。理想情况下，我希望显示成功消息，然后在指定时间后重定向页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-03T14:52:05.860

[将消息保存](http://docs.oracle.com/javaee/7/api/javax/faces/context/Flash.html#setKeepMessages-boolean-)在[flash 范围内](http://docs.oracle.com/javaee/7/api/javax/faces/context/ExternalContext.html#getFlash--)。它会在重定向中幸存下来。

```
context.addMessage(clientId, message);
externalContext.getFlash().setKeepMessages(true);
return "users.xhtml?faces-redirect=true"; 
```

* * *

请注意，较旧的[Mojarra](https://github.com/javaserverfaces/mojarra)版本有一些与 Flash 范围相关的特殊错误：

*   [问题 1755 - Flash 范围内的消息比下一个请求的寿命更长 - 在 2.0.7 / 2.1.4 中修复](https://github.com/javaserverfaces/mojarra/issues/1755)
*   [问题 2130 - Flash cookie 启用数据攻击 - 在 2.1.24 / 2.2.1 中修复](https://github.com/javaserverfaces/mojarra/issues/2130)
*   [问题 2140 - 重定向到不同路径时 Flash cookie 不可用 - 在 2.1.14 / 2.2.0 中修复](https://github.com/javaserverfaces/mojarra/issues/2140)
*   [问题 2906 - Flash cookie 对 root 上的应用程序使用错误的路径 - 在 2.1.24 / 2.2.1 中修复](https://github.com/javaserverfaces/mojarra/issues/2906)
*   [问题 2959 - Flash 有时会创建在 IE 中失败的 version1 cookie - 在 2.1.25 / 2.2.2 中修复](https://github.com/javaserverfaces/mojarra/issues/2959)
*   [问题 2977 - 会话过期后，Flash 会导致过时 cookie 上出现 NPE - 已在 2.1.25 / 2.2.2 中修复](https://github.com/javaserverfaces/mojarra/issues/2977)
*   [问题 2866 - 过时时未清除 Flash cookie - 已在 2.1.27 / 2.2.5 中修复](https://github.com/javaserverfaces/mojarra/issues/2866)

您最好至少升级到 Mojarra 2.1.27 / 2.2.5，以确保您的应用程序不受此影响。

# objective-c - 我是否必须在 Objective-C 中释放对象

> ID：13685635
> 
> 赞同：1
> 
> 时间：2012-12-03T14:47:20.600
> 
> 标签：objective-c, memory-leaks, release

> **可能重复：**
> [使用 Cocoa 和 Objective-C 理解引用计数](https://stackoverflow.com/questions/6578/understanding-reference-counting-with-cocoa-and-objective-c)

我对内存泄漏有点困惑 - 当我必须释放对象时，以及它何时会在 iOS 中自动释放，所以请使用以下代码帮助我理解。我有一种带有以下*while*块的方法：

```
-(void) oneMethod {
    NSMutableArray *returnValue = [[[NSMutableArray alloc] init] autorelease];

    while(true) { 
    ...
     MyObject *myObj = [[MyObject alloc] initWithFrequency:100];

    [returnValue addObject:myObj];

    [myObj release];
    ...
    }
} 
```

1.  我是否必须调用 [myObj release] 或者它将在每个循环中自动释放？
2.  另外，我是否必须将 autorelease 放在 NSMutableArray 初始化调用中，或者它会在我从方法返回后立即自动释放？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:54:04.177

您应该使用[ARC - 自动引用计数](http://developer.apple.com/library/ios/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW13)，然后您就不必担心释放分配的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:33:11.803

越早，我学到的东西就越好。您的示例是在插入数组后适当地释放每个 myObj 变量。数组现在“拥有”对象，只要数组存在，对象就会存在，没有理由保留变量引用。

ARC 似乎确实让这一切变得完全没有必要。我想知道有多少开发人员会在不久的将来学习这个概念，因为 ARC 现在已经为您完成了这一切。

据推测，您没有使用 ARC，因此，如果您没有调用 [myObj release]，每次循环都会导致泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:14:58.423

你的代码是正确的。

我发现当你更多地使用它时，你会习惯它。我不会花太多时间去想它。

通常，您需要发布您制作的所有内容（或自动发布）。

您的循环编码正确，因为它易于记忆，即使对于大型数组也是如此。

# python - 为什么从类*外部*设置“私有”python 属性？

> ID：13685647
> 
> 赞同：6
> 
> 时间：2012-12-03T14:48:06.153
> 
> 标签：python, django

阅读 Django 源代码后，我发现了[这个](https://github.com/django/django/blob/master/django/template/loader_tags.py#L173)函数。这是[块](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#block)标签的实现。

令我感兴趣的是，他们从类实例*外部*设置了一个带有两个前导下划线 ( `__loaded_blocks`)的变量（解析器是[Parser 类](https://github.com/django/django/blob/master/django/template/base.py#L233)的一个实例）。Django 源代码中的快速 grep 显示该字符串仅出现在此处。*`parser``loaded_blocks`*

 *现在我以前从未考虑过使用 python 名称修饰功能，但这实际上会隐藏`__loaded_blocks`属性`parser`本身！要从`parser`方法中读取此属性，您必须求助于`getattr(self, "__loaded_blocks")`.

我是否认为这只是所选属性名称的意外和未使用的副作用？还是有更深层次的目的？

**一般来说，你为什么要做这样的事情？**

**编辑：**澄清一下，我完全知道，只要您不尝试`__loaded_blocks`从 的方法访问该属性`parser`，它就会像任何其他属性一样工作，并且它实际上*不是*一个损坏的属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:57:16.367

`__`当您将前缀为 的属性添加到实例时，我认为不会发生名称修改

来自[文档](http://cpython_sandbox.readthedocs.org/en/latest/reference/expressions.html)：

> 私有名称修饰：当文本出现在类定义中的标识符以两个或多个下划线字符开头并且不以两个或多个下划线结尾时，它被认为是该类的私有名称。在为私有名称生成代码之前，私有名称会转换为更长的形式。转换在名称前面插入类名，删除前导下划线，并在类名前面插入一个下划线。例如，出现在名为 Ham 的类中的标识符 __spam 将被转换为*Ham*_垃圾邮件。此转换与使用标识符的语法上下文无关。如果转换后的名称非常长（超过 255 个字符），则可能会发生实现定义的截断。如果类名仅包含下划线，则不进行任何转换。

```
class Test:
  pass

test = Test()
test.__hello = 'hii'    
test.__hello  # hiii 
```

尽管名称没有被破坏，但它仍将其标记为代码使用者的“私有”*

# android - ACTION_TIMEZONE_CHANGED 旧值？

> ID：13685649
> 
> 赞同：0
> 
> 时间：2012-12-03T14:48:09.447
> 
> 标签：android, broadcastreceiver, android-2.3-gingerbread

我想在 Android ( 2.3 ) 上的时间、日期、时区更改上使用旧值。

我正在使用广播接收器，例如：

```
 <receiver android:name=".broadcastreceiver.OnDateTimeChanged">
        <intent-filter>
            <action android:name="android.intent.action.DATE_CHANGED"/>
            <action android:name="android.intent.action.TIME_SET"/>
            <action android:name="android.intent.action.TIMEZONE_CHANGED"/>
        </intent-filter>
    </receiver> 
```

在 java 类中，我想拥有旧值：

```
public class OnDateTimeChanged extends BroadcastReceiver
{
 @Override
 public void onReceive(Context context, Intent intent)
 {
     // Do some work here
     Log.d("OnDateTimeChanged", "intent action:"+intent.getAction() + ", intent : "+intent);

 }
} 
```

知道如何获取（注销）时间、时区、日期的旧值吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:20:11.537

我不知道任何给你旧值的函数，所以我建议你这样做：

当您的应用程序启动时，获取时间、时区和日期的当前值并将其存储在变量中。您可以创建一个更简单的类。然后将该变量存储在您的数据集中，以便能够在任何活动中使用（或根据需要将其解析为额外的）。然后每次值改变时也改变变量。像：

```
public class OnDateTimeChanged extends BroadcastReceiver
{
 @Override
   public void onReceive(Context context, Intent intent)
   {
      // TimeManager is the name I gave to the class I told you before
      TimeManager timeManager = Provider.dataset().timeManager();

      // ... 

      // Calculate the elapsed time between the two times, if you need
      // (I didn't test but I think this will work)
      Date oldDateTime = timeManager.getDateTime();
      timeManager.setElapsedTime(currentDateTime - oldDateTime);

      // ...

      // And then at the end save the current values again,
      // (in this case: the DateTime)
      timeManager.setDateTime(currentDateTime);
   }
} 
```

这是你需要的吗？希望能帮助到你。

# sql-server - SQL server 中的 Sum over Sum ？

> ID：13685651
> 
> 赞同：2
> 
> 时间：2012-12-03T14:48:11.257
> 
> 标签：sql-server, sql-server-2008

*这是[sqlonline](https://data.stackexchange.com/stackoverflow/query/edit/87752)*

有一个乐队。

每个成员都会演奏一种乐器。

每件乐器的价格为 X$

我想创建一个报告：每个成员对乐队经理的*“成本”是多少。*

```
create table #Inst(id int, name nvarchar(max) , price int )
insert into  #Inst values  (1,'guitar',20), 
                           (2,'bass',10),
                           (3,'drums',30),
                           (4,'piano',40) 

  create table #Players(id int, name nvarchar(max) , instId int )
  insert into  #Players values (1,'john',1), 
                               (2,'john',4),
                               (3,'paul',2),
                               (4,'paul',2),
                               (5,'george',1),
                               (6,'ringo',3) 
```

我试过什么？

```
select name , totalCostToTheband=   
              (select sum(price) from #inst i where i.id= #players.instId ) 
from #players 
```

但这会产生重复的名称：

![在此处输入图像描述](../Images/ed7ea78ce1367f1985785cdcc7b42ba1.png)

我想查看 4 条记录，这些记录汇总了每个名称的成本。

**ps：** *我本可以在整个查询中创建一个 sum()，但我想知道是否有更好、更优雅的解决方案。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T14:52:38.387

在当前架构中，您应该这样做

```
SELECT 
    p.name , 
    sum(price) as totalCostToTheband
FROM
    #players p 
    INNER JOIN #inst i ON i.id = p.instId
GROUP BY
    p.name 
```

* * *

但是当你有多对多关系时，你通常会用链接做一个中间表

```
create table #Inst(id int, name nvarchar(max) , price int )
create table #Players(id int, name nvarchar(max) )
create table #instplayer(id int, inst_id, player_id ) 
```

这样可以避免重复`#players`表内的玩家，并且还允许同名的玩家在同一个乐队中；）

阅读[http://sqlrelationship.com/many-to-many-relationship/](http://sqlrelationship.com/many-to-many-relationship/)了解更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:52:10.470

您可以通过添加组来修复您的查询，如下所示：

```
select p.name
,   (select sum(price) from #inst i where i.id= p.instId ) as totalCostToTheband
from #players p
group by p.name 
```

但是，更好的方法是使用连接：

```
select p.name, sum(i.price) as totalCostToTheband
from #players p
join #inst i on i.id=p.instId
group by p.name 
```

# javascript - 如何在我的网页上设置旋转器/轮播的焦点

> ID：13685653
> 
> 赞同：1
> 
> 时间：2012-12-03T14:48:11.657
> 
> 标签：javascript, jquery

如何在我的网页上设置旋转器/轮播的焦点

根据我的代码，两个旋转器同时滑动，但我只希望那个旋转器滑动，它是集中的。

我在 and 上添加了 tabindex 属性，`"carousel_inner"` `div`我还在 the 上添加了 tabindex 属性`"#home_rotator"` `div`，然后调用了焦点函数，但它们同时集中在我的网页中

我的代码是：

```
$("#carousel_inner").attr("tabindex",0).focus(function() {
    $(document).keydown(function(eventObject) {
        if(eventObject.which==37) {//left arrow
            $("#carousel_inner").focus();               
            $('#left_scroll').click();//emulates click on prev button 
        } else if(eventObject.which==39) {//right arrow
            $("#carousel_inner").focus();               
            $('#right_scroll').click();//emulates click on next button
        }   
    });
}); 
```

// 添加键盘导航

```
$("#home_rotator").attr("tabindex",-1).focus(function() { 
    $(document).keydown(function(eventObject) {
        if(eventObject.which==37) {//left arrow
            $("#home_rotator").focus();             
            base.goBack();//emulates click on prev button 
        } else if(eventObject.which==39) {//right arrow
            $("#home_rotator").focus();             
            base.goForward();   //emulates click on next button 
        }           
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:34:27.527

您在焦点函数中绑定事件。一旦一个事件被绑定，它就被绑定了。取消焦点元素不会解除先前事件的绑定，除非您通过`.unbind()`在事件中编写语句明确告诉它`.blur()`。

但是，最好在事件之外绑定`.keydown()`一次事件*，*`focus()`然后检查哪个元素具有焦点并执行所需的操作。

```
$(document).keydown(function(e) { 
    if ( document.activeElement.id === 'carousel_inner' ) {
        if ( e.which === 37 ) {
            // event for left key on carousel_inner
        }
        else if ( e.which === 39 ) {
            // event for right key on carousel_inner
        }
    }
    else if ( document.activeElement.id === 'home_rotator' ) {
        if ( e.which === 37 ) {
            // event for left key on home_rotator
        }
        else if ( e.which === 39 ) {
            // event for right key on home_rotator
        }
    }
}); 
```

jsfiddle：http: [//jsfiddle.net/9ErRF/](http://jsfiddle.net/9ErRF/)

# ruby-on-rails - NoMethodError: nil:NilClass 的未定义方法 `-'

> ID：13685657
> 
> 赞同：6
> 
> 时间：2012-12-03T14:48:23.683
> 
> 标签：ruby-on-rails, mongodb, mongoid, ruby-1.9.3

重新启动我的虚拟机后，每当我尝试访问任何数据时，都会收到此错误。我正在使用 Rails 3.2.3 和带有 Mongoid 的 Mongodb。这是我第一个使用 MongoDB 和 Mongoid 的项目，我相当肯定这个问题与它有关。Mongo 似乎已启动并正在运行。完整的错误信息是：

```
NoMethodError: undefined method `-' for nil:NilClass
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/cluster.rb:118:in `block in refresh'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/cluster.rb:125:in `each'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/cluster.rb:125:in `refresh'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/cluster.rb:78:in `nodes'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/cluster.rb:187:in `with_secondary'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/session/context.rb:104:in `with_node'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/session/context.rb:43:in `query'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/moped-1.2.5/lib/moped/query.rb:109:in `first'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/mongoid-3.0.6/lib/mongoid/contextual/mongo.rb:201:in `first'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/mongoid-3.0.6/lib/mongoid/contextual.rb:18:in `first'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/mongoid-3.0.6/lib/mongoid/finders.rb:119:in `first'
from (irb):3
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
from /home/development/.rvm/gems/ruby-1.9.3-p0@applicationName/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T17:46:32.953

听起来您的 mongoid.yml 已被覆盖。尝试做一个`rails g mongoid:config`然后再试一次。干杯。

# android - dumpsys 输出格式

> ID：13685658
> 
> 赞同：2
> 
> 时间：2012-12-03T14:48:25.520
> 
> 标签：android, adb

每个 android 设备的 dumpsys 输出格式是否完全相同？如在应用程序中读取转储服务的输出并执行精确的字符串匹配以解析返回的数据是否安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T05:18:21.480

不要期望格式 100% 相同。不同的Android版本之间有细微的变化。此外，某些服务依赖于使用的特定硬件组件（无线电/芯片组/外围设备/传感器/等） - 因此实际服务代码可能来自不同的 OEM，而不是来自 Google。

但是 98% 可能对您的应用程序来说已经足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:12:27.807

不，据我所知，您应该始终从运行相同操作系统的同一设备获得相同的输出。

根据我的经验，没有太多的输出格式。在我编写monkeyrunner测试的几十个设备中，我只体验过2个。除了涵盖阅读我遇到的两种格式之外，我使用了一个简单的尝试。如果它们都失败了，那么我会打印一个错误并停止我的脚本。

```
memList = memFull.split()
try:
    dalvikIndex = memList.index('dalvik')
    heapSize = memList [dalvikIndex + 5]
    memAllocated = memList [dalvikIndex + 10]
    memFree = memList [dalvikIndex + 15]
except ValueError:
    try:
        dalvikIndex = memList.index('Dalvik')
        heapSize = memList [dalvikIndex + 4]
        memAllocated = memList [dalvikIndex + 5]
        memFree = memList [dalvikIndex + 6]
    except ValueError:
        print 'Unsupported output format detected. MemoryMonitor script will need to be updated to support this format'
        break 
```

# python - Python3.2垂直链接

> ID：13685670
> 
> 赞同：2
> 
> 时间：2012-12-03T14:49:19.350
> 
> 标签：python, syntax, python-3.x

在 Python3.2 中，我可以这样做：

```
foo = Bar()
foo.setSomething(something1).setStatus('horizontal').setAttributes(attributes) 
```

最终链条变得很长。我很想垂直链接。

```
foo = Bar()
foo.setSomething(something1)
   .setStatus('vertical')
   .setAttributes(attributes) 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:53:51.633

只需将您的表达式括在括号中：

```
foo = Bar()
(foo.setSomething(something1)
     .setStatus('vertical')
     .setAttributes(attributes)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:59:48.900

谢谢@Krotton 的回答，它确实有效。还要感谢@sean 的[链接](https://stackoverflow.com/questions/2550439/correct-way-to-put-long-function-calls-on-multiple-lines)。因此，使用垂直链接的正确方法是：

```
foo = Bar()
(foo.setSomething(something1)
     .setStatus('vertical')
     .setAttributes(attributes)) 
```

您也可以使用语法，如多行字符串，以允许垂直链接：

```
foo = Bar()
foo.setSomething(something1)\
   .setStatus('vertical')\
   .setAttributes(attributes) 
```

# codeigniter-2 - 我希望我的网站语言代码显示在 URL 中吗？

> ID：13685671
> 
> 赞同：0
> 
> 时间：2012-12-03T14:49:18.470
> 
> 标签：codeigniter-2

我有一个用 codeigniter 制作的网站。这是一个多语言网站，大约有 9 种语言。基本上，语言更改是通过 cookie 完成的，因此对于特定访问者来说，无论最后在他的 cookie 中设置的哪种语言都是向他显示的语言，这会更好。但问题是我想在 url 中显示语言代码，每次语言更改时，Hench cookie 都会更改，并且语言代码也应该跳转到 URL：

```
www.mysite.com/en/contoller/function             (en from cookies)
www.mysite.com/fr/contoller/function             (fr from cookies)
www.mysite.com/cn/contoller/function             (cn from cookies) 
```

甚至我想在主页上显示语言代码。

```
www.mysite.com/en 
```

朋友，这怎么可能？我已经阅读了很多东西，但找不到完整的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T06:25:27.310

好吧，你试过`$routes`吗？打开 /application/config/routes.php 并设置规则：

```
$routes['([a-zA-Z]+)/(:any)'] = '$2'; 
```

它也应该做这项工作：

```
$routes['([a-zA-Z]{2})/(:any)'] = '$2'; 
```

我没有试过这个：

```
$routes[(en|fr|es)/(:any)'] = '$1'; 
```

# r - 聪明的 diff() 用于 data.frames

> ID：13685677
> 
> 赞同：0
> 
> 时间：2012-12-03T14:49:50.477
> 
> 标签：r

一个 data.frame 包含某个值的测量值和像这样记录它的时间

```
df <- data.frame(time=1:1000, v=sin(1:1000)) 
```

我绘制了`v`

```
library(zoo)
plot(x=(rollmean(df$time,k=2)), y=diff(df$v,k=2)) 
```

这种方法在某种程度上适用于小矩阵和 if `k=2`，但对于推导超过 5 个值`diff(df$v, k=5)`和许多列的更复杂的情况，它不是很方便。

有没有更好更灵活更直接的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:00:13.193

我不确定是否理解您的问题，但这样的事情可能会有所帮助

```
library(plyr)
numcolwise(diff)(df,lag) 
```

# iphone - 如何将背景图像放入 iphone 中的文本字段和文本视图？

> ID：13685680
> 
> 赞同：4
> 
> 时间：2012-12-03T14:49:57.107
> 
> 标签：iphone, ios, xcode, uitextfield, uitextview

虽然我已经在`UITextField`. 它不适用。我没有使用任何编码。我刚刚`image.png`使用 Interface Builder 选择了一个文件作为背景图像。那么，该怎么做呢？并且没有背景图片属性`UITextView`。那么，如何添加背景图片`textView`呢？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-03T15:02:18.937

请参考 UITextField 的文档，您会发现以下内容：

此属性的默认值为 UITextBorderStyleNone。如果该值设置为 UITextBorderStyleRoundedRect 样式，则与文本字段关联的自定义背景图像将被忽略。

在Interface Builder中，就在你设置背景图片的地方，应该有一个选择边框样式的选项，默认选择的是RoundedRect，选择其他样式就可以立即看到背景图片。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T14:58:53.087

用这个

```
textField.backgroundColor = [UIColor colorWithPatternImage:myImage]; 
```

其中“myImage”是您的图像。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-13T19:59:05.823

**斯威夫特 4**

第一个，将图像添加到`Assets.xcassets`您想要的名称中，例如`myImage`. 在您的文本字段中，您可以将其设置为：

```
myTextField.background = UIImage(named: "myImage") 
```

另外，如果要删除边框：

```
myTextField.layer.borderColor = CGColor.clear
myTextField.layer.borderWidth = 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-17T05:04:06.087

```
 CGRect frame1 = CGRectMake(30, 130,160, 30);
textField = [[UITextField alloc] initWithFrame:frame1];
textField.borderStyle =UITextBorderStyleNone;
textField.background=[UIImage imageNamed:@"textFieldImage.png"]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T15:30:31.717

您可以使用设置 TextView 背景图像

```
[textView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"yourImage.png"]]]; 
```

对于 yourTextField 您可以使用 2 方法设置图像，首先是先前的，其他是

```
[textField setBackground:[UIImage imageNamed:@"yourImage.png"]]; 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-03T14:58:27.447

要将背景图像添加到没有背景图像属性的视图，您需要做一些技巧。您将需要创建一个 UIImageView，然后将 UITextView 添加为子视图。确保 UITextView 背景颜色也设置为清除。例如：

```
UIImageView *imageView = [[UIImageView alloc] initWithimage:myImage];
[self.view addSubview:imageView];
[imageView addSubview:myTextView]; 
```

# jquery - 带有关闭按钮的 jQuery

> ID：13685683
> 
> 赞同：0
> 
> 时间：2012-12-03T14:50:09.127
> 
> 标签：jquery

我有这个代码

`<input type='submit' name='sub_form' value='Save'>`和`<a href="#" class="close">Cancel</a>`

jQuery是

```
$('td.add_text').click(function(e) {
    $('<img src="images/ajaxLoader.gif" id="loading" style="width:auto;" />').appendTo(".quotation_computation");
    //Cancel the link behavior
    e.preventDefault();
    //Get the A tag
    var ccom = $( 'input[name=com_code]' ).val();
    var ucom = $( 'input[name=user_code]' ).val();
    var in_form = $( 'input[name=in_form]' ).val();
    var ctrack = $( 'input[name=com_for_track]' ).val();

    $.ajax({
        type:"GET",
        url:"forms/tem.php",
        data: {uc: ucom, cc: ccom, ct: ctrack, in_f: in_form },
        dataType: 'html',
        target: '.quotation_computation',
        success: function(data){
            $(".quotation_computation").find('img#loading').remove();
            $(".quotation_computation").html(data);
        }
    })
}); 
```

和关闭按钮 jquery

```
$(".close").click(function () {
      $(".quotation_computation").hide();
}); 
```

和html

```
<div class="quotation_computation">
ANOTHER JQUERY PROBLEM
</div> 
```

当我单击关闭按钮时，它不起作用。

我的关闭按钮错了吗？好的，当我单击`div class="quotation_computation">`jquery ajax 工作正常并保存到我的数据库时。但是当我单击`Cancel`按钮时，jquery ajax 或表单仍然存在。

有什么我需要改变的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:00:50.433

单击`<a href="#">`锚标记将具有默认操作，即它将强制刷新页面。您必须阻止此默认操作，否则它将刷新页面并重新打开您刚刚隐藏的元素。

```
$('.close').click(function(e) {
   $('.quotation_computation').hide();
   e.preventDefault();
}); 
```

# c++ - 如何打印 Trie 中的所有单词？

> ID：13685687
> 
> 赞同：6
> 
> 时间：2012-12-03T14:50:28.560
> 
> 标签：c++, data-structures, trie

我正在尝试`Trie`用 C++ 创建一个实现。我无法弄清楚如何打印存储在`Trie`.

这就是我实施`TrieNode`.

```
struct TrieNode{
  bool isWord;
  int data; //Number of times Word Occured
  TrieNode *Child[ALPHABET_SIZE]; //defined as 26
}; 
```

我知道我可以将 a 存储`pointer`到父节点，深度优先搜索所有节点，`isWord==True`并递归打印这些节点中的每个单词。

但我想知道有没有办法`Trie`用我实现的 a打印出每个单词`TrieNode`。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-03T15:18:49.697

这是 Konrad Rudolph 的一个相当有效的版本，没有假设 data 是一个字符。我还以使用`std::string&`. 这个想法是传递前缀并在每次递归时对其进行修改，将字符推到末尾并随后弹出它，最终比疯狂复制它更有效。

```
void traverse(std::string& prefix, TrieNode const& node) {
  if (node.isWord)
    print(prefix);

  for (char index = 0; index < ALPHABET_SIZE; ++index) {
    char next = 'a'+index;
    TrieNode const* pChild = node.Child[index];
    if (pChild) {
      prefix.push_back(next);
      traverse(prefix, *pChild);
      prefix.pop_back();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T14:57:52.707

您不需要父节点，您的代码很容易通过递归适应遍历。伪代码：

```
void traverse(string prefix, TrieNode const& n) {
    prefix += static_cast<char>(n.data);

    if (n.isWord)
        print(prefix);

    for (auto const next : n.Child)
        if (next)
            traverse(prefix, *next);
} 
```

这或多或少是有效的 C++。只要`print`适当定义。

**编辑**响应 Yakk 的评论和您的澄清，这是一个不假设`data`包含当前字符的版本（我的失误！）：

```
void traverse(string const& prefix, TrieNode const& n) {
    if (n.isWord)
        print(prefix);

    for (std::size_t i = 0; i < ALPHABET_SIZE; ++i)
        if (n.child[i])
            traverse(prefix + ('a' + i), *n.child[i]);
} 
```

我将把更有效的实现留给 Yakk 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-07T05:02:43.027

```
void traversePrint(TrieNode* sr,char* out,int index)
{
    if(sr!=NULL)
    {
        for(int i=0;i<SIZE;i++)
        {
            if(sr->child[i]!=NULL)
            {
                out[index] = 'a'+i;
                traversePrint(sr->child[i],out,index+1);
            }
        }
        if(sr->isEnd)
        {
            out[index]='\0';
            cout << out << endl;
        }
    }
} 
```

// 调用

```
char out[MAX_WORD_SIZE];
traversePrint(root,out,0); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-08T15:27:11.990

我认为这里不需要 isword。指向子节点的指针的存在将足以遍历 trie 中的可用单词。要查找单词，请从根开始，并在任何递归步骤中查找单词中的当前字符。

```
struct trie {
  trie *children[ALPHABET_SIZE];
};

void traversal(trie *&t, string &str) {
    bool is_seen = false;
    for(int i = 0; i < ALPHABET_SIZE; i++) {
        if(t->children[i]) {
            if(!is_seen) {
               is_seen = true;
            }
            str.push_back(t[i]);
            traversal(t->children[i], str);
            str.pop_back();
        }
    }
    if(!is_seen) {
        cout << str << "\n";
    }

} 
```

# android - Oauth 错误消息“缺少消息或附件”，“类型”：“OAuthException”，“代码”：Android 中的 100，而 Facebook 在朋友墙上发帖

> ID：13685688
> 
> 赞同：2
> 
> 时间：2012-12-03T14:50:31.957
> 
> 标签：android, facebook, oauth, friend, invitation

我想为我的应用程序用户提供使用 Facebook 帐户登录我的应用程序的选项。我可以使用下面的代码来做到这一点。

```
String[] permissions = { "offline_access", "publish_stream", "user_photos", "publish_checkins", "photo_upload" };
mFacebook.authorize(FacebookLogin.this, permissions, new LoginDialogListener());

public final class LoginDialogListener implements DialogListener {
    public void onComplete(Bundle values) {
        new MyAsyncGetJsonFromFacebbok(FacebookLogin.this).execute();
    }

    public void onFacebookError(FacebookError error) {
        Toast.makeText(FacebookLogin.this, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
        Log.v("onFacebookError FacebookLogin", error.toString());
    }

    public void onError(DialogError error) {
        Toast.makeText(FacebookLogin.this, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
        Log.v("onError FacebookLogin", error.toString());
    }

    public void onCancel() {
        Toast.makeText(FacebookLogin.this, "Something went wrong. Please try again.", Toast.LENGTH_LONG).show();
    }

    public class MyAsyncGetJsonFromFacebbok extends AsyncTask<Void, Void, JSONObject> {
        Context context;
        JSONObject jsonObj = null;

        public MyAsyncGetJsonFromFacebbok(Context context_) {
            this.context = context_;
        }

        @Override
        protected JSONObject doInBackground(Void... params) {
            try {
                jsonObj = com.facebook.android.Util.parseJson(mFacebook.request("me"));
            } catch (FacebookError e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
            return jsonObj;
        }

        @Override
        protected void onPostExecute(JSONObject jsonObj) {
            try {
                String facebookID = jsonObj.getString("id");
                String firstName = jsonObj.getString("first_name");
                String lastName = jsonObj.getString("last_name");
                Toast.makeText(FacebookLogin.this, "Thank you for Logging In, " + firstName + " " + lastName + "!", Toast.LENGTH_SHORT)
                        .show();
                SessionStore.save(mFacebook, FacebookLogin.this);
                storeDataInSharedPreferrence(facebookID, firstName, lastName);
                sendInvitationToFriends(facebookID);
                startNextActivity();
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

现在我正在尝试邀请我所有的 Facebook 朋友加入我的 android 应用程序。为此，我正在尝试来自此链接的代码，[向 facebook 朋友发送加入我的网站的邀请](https://stackoverflow.com/questions/6747935/send-an-invitation-to-facebook-friends-to-join-my-website)，并修改它的代码（因为它不起作用），现在代码是：

```
String response = mFacebook.request((userID == null) ? "me" : userID);
            Bundle params = new Bundle();

            params.putString("message", "msg");
            params.putString(mFacebook.getAccessToken(), "msg");

            params.putByteArray("message", "message goes here".getBytes());
            params.putByteArray("link", "http://mysite.com".getBytes());
            params.putByteArray("caption", "Click the link".getBytes());
            params.putByteArray("description", "description of link".getBytes());
            params.putByteArray("name", "name of link".getBytes());
            params.putByteArray("picture", "http://url.to.my.picture/pic.jpg".getBytes());

            response = mFacebook.request(((userID == null) ? "me" : userID) + "/feed", params, "POST"); 
```

但它给出了错误

```
12-03 19:46:04.552: D/Tests(873): {"error":{"message":"(#100) Missing message or attachment","type":"OAuthException","code":100}} 
```

所以请帮我消除这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:07:29.500

为什么要使用`params.putByteArray`文本字段？我了解“图片”字段。但是一个简单`params.putString`的“消息”、“链接”、“标题”、“描述”和“名称”字段就足够了。

此外，您将两次传递“消息”参数。一旦来到这里：`params.putString("message", "msg");`

还有一个在这里：`params.putByteArray("message", "message goes here".getBytes());`

您的代码基本上应该如下所示：

```
Bundle params = new Bundle();
params.putString("message", "msg");
params.putString(mFacebook.getAccessToken(), "msg");

params.putString("message", "message goes here".getBytes()); // CHOOSE FROM EITHER THE ONE ON THIS LINE OR THIS ONE: params.putString("message", "msg");
params.putString("link", "http://mysite.com".getBytes());
params.putString("caption", "Click the link".getBytes());
params.putString("description", "description of link".getBytes());
params.putString("name", "name of link".getBytes());
params.putByteArray("picture", "http://url.to.my.picture/pic.jpg".getBytes()); 
```

我为我的应用程序使用完全相同的代码（好吧，几乎无论如何），它工作得很好。话虽如此，我对此不太确定：`params.putByteArray("picture", "http://url.to.my.picture/pic.jpg".getBytes());`

我只从画廊或相机上传照片。

# ios - 如何在 iPhone 上从我的 PC 的命令行运行测试

> ID：13685701
> 
> 赞同：1
> 
> 时间：2012-12-03T14:51:07.300
> 
> 标签：ios, selenium, command-line-arguments

我正在尝试远程连接到 iPhone，以便在其上运行使用 selenium IDE 创建的测试。
我以 URL 的形式拥有 iPhone 的 IP（iwebdriver 在 iPhone 上运行），但在命令中缺少某些内容。

以下是我试图通过命令行运行的 selenium 独立命令：

```
java -jar selenium-server-standalone-2.25.0.jar
-hubHost "http://192.168.0.130:3001/wd/hub/" -browser browserName=iphone
-htmlSuite "*webdriver" "http://135.109.198.173/"  "IDEAutomation\Login.html" "IDEAutomation\Reports\Report.html"
-userExtensions "amartgwt3.0\smartgwt-3.0\selenium\user-extensions.js" 
```

为了到达 iPhone 应该使用的 URL 是：“http://192.168.0.130:3001/wd/hub/”

测试应该在服务器上运行：“http://135.109.198.173/”

*从 Eclipse 项目可以连接到 iwebdriver 并在 iphone 设备上运行测试。

这个问题有解决方案吗？

# javascript - 在 Javascript 中打印数组（或对象）的处理程序/引用

> ID：13685706
> 
> 赞同：19
> 
> 时间：2012-12-03T14:51:27.903
> 
> 标签：javascript, reference

> **可能重复：**
> [如何获取 JavaScript 变量的内存地址？](https://stackoverflow.com/questions/639514/how-can-i-get-the-memory-address-of-a-javascript-variable)

有没有办法在javascript中打印数组的引用？

我想要做的是检查两个数组是否具有相同的引用，并且可以像这篇文章所建议的那样完成：[如何检查两个变量是否具有相同的引用？](https://stackoverflow.com/questions/13685079/how-to-check-if-two-vars-have-the-same-reference)

但是，如果我正在使用数组，是否可以打印参考？

例子

```
var Array1=["hi"];
var Array2=["hello"];

var thesame = Array1==Array2; 
```

相同的值是`false`。

但是我可以像 `window.alert(@Array1);` 在 javascript 中那样使用某种想法打印他的 Array1 引用吗？

**- 更新 -**

我真正想要的是被引用的实际地址空间。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T15:00:30.510

Javascript 实现仅在遵循 ECMA 规范的情况下进行标准化。内存存储的复杂性可能因浏览器而异，并且 JS 无法访问。

至于您*为什么*关心的问题：JS 是一种轻量级脚本语言。将内存管理和优化任务委托给平台是很有意义的，而它需要不必要的循环来向您公开一个接口。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T14:59:36.823

如果你想查看某种指向被引用类型（数组、对象）的指针的值——你不能。

例如，在 Perl 中，您有一个标量类型，它是对某物的引用。当您打印此标量时，您可以获得类似于指向该值的指针的字符串表示形式。JavaScript 中没有这种标量的类比。

您只能检查两个引用是否指向同一事物。

与所有带有 GC 的语言一样，在 JavaScript 中，您无法确定在程序执行过程中同一个对象是否具有相同的内存指针（它可以在堆中移动）。正如我所提到的，您没有将指针抽象为语言中的内置类型。所以显示当前引用可能不是一个好主意，因为它可能是动态的（取决于引擎的架构，尤其是 GC）。

# java - 将 JDBC 中的数据显示到 JTable 中

> ID：13685707
> 
> 赞同：0
> 
> 时间：2012-12-03T14:51:29.803
> 
> 标签：java, swing, jdbc, jtable

我已经遵循了该站点上有关在表中显示数据库信息的一些先前建议，但是我的仍然无法正常工作。我有一个生成的 Netbeans 对话框，其中包含一个名为 mainTable 的表，我将模型设置为从 MySql 获取的 ResultSet。

**编辑整个班级：**

```
import swing.SwingUtilities;
import javax.java.awt.Dialog;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.util.Vector;

import javax.swing.JDialog;
import javax.swing.JOptionPane;

swing.table.DefaultTableModel;

public class AddressBookImpl extends AddressBookGui implements ActionListener {
final static AddressBookImpl impl = new AddressBookImpl();
DefaultTableModel defaultTableModel = new DefaultTableModel();
AddressBookGui gui = new AddressBookGui();

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override public void run() { impl.startGUI(); }});
}

public void startGUI(){
    gui.main(null);
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    this.setResizable(true);
    this.setTitle("Address Book");
    listeners();
    refreshTable();
}

public DefaultTableModel refreshTable() {
    try{

        DatabaseImpl dbimpl = new DatabaseImpl();
        dbimpl.refreshDatabase();
        ResultSet refreshResult = dbimpl.refreshResult;
        ResultSetMetaData meta = refreshResult.getMetaData();
        int numberOfColumns = meta.getColumnCount();

        while (refreshResult.next()) 
        {
            Object[] rowData = new Object[numberOfColumns];

            for (int i = 0; i < rowData.length; ++i)
            {
                rowData[i] = refreshResult.getObject(i + 1);
            }
            defaultTableModel.addRow(rowData);
        }
        this.defaultTableModel = defaultTableModel;
    } catch (Exception e) {
        e.printStackTrace();
    }

    gui.mainTable.setModel(defaultTableModel);
    return defaultTableModel;
}

public void listeners() {
    quitFileMenuBar.addActionListener(this);
    addButton.addActionListener(this);
    refreshButton.addActionListener(this);
}

@Override
public void actionPerformed(ActionEvent e) {
    if (e.getActionCommand().equalsIgnoreCase("Quit")) 
    {
        this.dispose();
    }
    if (e.getActionCommand().equalsIgnoreCase("Add"))
    {
        // Add a new address to the DB
    }
    if (e.getActionCommand().equalsIgnoreCase("About"))
    {

    }
    if (e.getActionCommand().equalsIgnoreCase("Refresh"))
    {
        refreshTable();
        System.out.println("Refreshing........");
    }
}
} 
```

和 DatabaseImpl 类：

```
protected ResultSet refreshDatabase() {
    try {
        Class.forName("com.mysql.jdbc.Driver");
        con = DriverManager.getConnection(url, user, password);
        System.out.println("Connection is created to " + url);

        Statement statement = con.createStatement();
        String selectAllQuery = "Select * from " + table + ";";

        ResultSet refreshResult = statement.executeQuery(selectAllQuery);
//          con.close();
        this.refreshResult = refreshResult;
        return refreshResult;

    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return refreshResult;
} 
```

然而，这只是显示了表格应该在的空白区域，有什么帮助吗？

GUI 类是一个沼泽标准 netbeans 生成的类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:56:14.223

看起来您将 TableModel 传递到错误的 JTable 中，传递到当前可视化的 AddressBookGui 实例未持有的 JTable 中。这将不起作用（正如您所发现的那样），因为设置新创建的 AddressBookGui 实例的 JTable 对可视化对象绝对没有影响，因为虽然它们是同一类的实例，但它们彼此独立。解决方案是将此模型传递到由实际可视化的 AddressBookGui 实例保存的 JTable 中。请注意，一个不好的解决方案是使用静态字段。只是不要这样做。

**编辑**
我认为您的问题在于对继承的错综复杂的滥用以及再次设置非可视化 JTable 的模型。我怀疑您的代码行`gui.main(null)`调用了一个静态 main 方法，该方法创建并显示了一个 AddressBookGui 实例，并且这个人持有您的 JFrame。**如果是这样**，那么它正在显示的这个 AddressBookGui 实例又与 gui 变量所持有的不同。

我建议你不要让AddressBookImpl 扩展AddressBookGui，而是让它简单地保存一个AddressBookGui 的实例，并且你不要调用AddressBookGui 的main 方法，而是让AddressBookImpl 负责显示**它的**AddressBookGui 实例。

# javascript - 为什么这个 JavaScript 不起作用？（我在stackoverflow上找到了JSFiddle，但是当我把它放在html中时不起作用）

> ID：13685711
> 
> 赞同：-4
> 
> 时间：2012-12-03T14:51:34.517
> 
> 标签：javascript, jquery

编辑：感谢您的帮助！对不起，我没有检查控制台...我对 HTML/CSS 有很好的掌握，但刚开始学习 JavaScript，知道检查控制台以及实现评论中的一些帮助肯定会对我的未来有所帮助JavaScript 的努力。

我试图弄清楚为什么我在 stackoverflow 上找到的这段代码对我不起作用。我希望实现的代码来自这篇文章：[jQuery hover to slide?](https://stackoverflow.com/questions/7761729/jquery-hover-to-slide)

[这是我的 HTML 测试页面](http://ringpublications.net/stackoverflow/)

我可以确认 JQuery 库正在加载，所以我不确定它为什么可以在 JSFiddle.net 中工作，但不能在我的代码中工作。我希望/认为这是我会“做”的一个小错误，例如缺少结束引号/括号，但我找不到任何东西。任何帮助是极大的赞赏！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:58:33.140

你只需要确保你的代码中没有奇怪的字符。最好放在记事本之类的...

# java - 使用 Eclipse(JAVA) 实现 JMagick 自动化

> ID：13685714
> 
> 赞同：3
> 
> 时间：2012-12-03T14:51:44.440
> 
> 标签：java, eclipse, selenium, imagemagick, jmagick

我正在尝试开发自动化程序来捕获两个图像，然后比较这些图像以查看它们是否相似。

我正在使用带有 Selenium Web 驱动程序的 Windows 7 和 Eclipse IDE (JAVA)。

我已经完成了我的研究，发现 JMagick 最适合我，但我没有成功让它与 eclipse 一起工作。我已经安装了 JMagick、ImageMagick 并将本地库添加到 eclipse 中。

问题是我找不到任何可以帮助我理解以下问题的指南或有用的链接。我如何自动化 JMagick 截屏？我如何保存那些截取的屏幕截图？我如何逐个像素地比较那些截取的屏幕截图？所有这些都使用 JMagick，最后我如何显示差异图像？

如果有人有任何想法或知道任何指南，请提供！任何帮助是极大的赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:31:08.890

你为什么不改用[OpenCV](http://opencv.willowgarage.com/wiki/)呢？JMagick 没有足够的文档记录。您必须查看 ImageMagick 文档。

但是，如果我是你，我会编写一个脚本来从你的代码中调用。

要截屏：

```
import -window root screen.jpeg 
```

此外，要比较两个图像，您可以阅读本[指南](http://www.imagemagick.org/script/compare.php)

我希望这对你有帮助！

# css - Helvetica Neue Cyrillic Extended - 设计噩梦

> ID：13685719
> 
> 赞同：0
> 
> 时间：2012-12-03T14:51:57.340
> 
> 标签：css, unicode, fonts

我正在为客户开发一个网站，他们希望文本显示在 Helvetica Neue 中。我听说过这种字体很多，但我似乎无法在任何地方找到它。我的意思是我找到了拉丁字母，但没有找到带有字母 Ү 和Ө 的西里尔字母。有这样的字体吗？我在哪里可以找到它？那个看起来像 y 不是 y。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:06:52.997

如果他们想要在网页上显示 Helvetica Neue Cyrillic，他们需要联系 Linotype 并询问允许此类使用的许可证的价格。我不认为他们会得到一个。

如果他们只想要类似的东西，就必须有人搜索合适的类似字体。“类似的东西”可能会出现在“Helvetica Neue”之类的名称下，但前提是它不是商业发行的，因为该名称受商标保护。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T15:05:01.423

虽然这不是编程问题，但这里有一个链接可以帮助您[Helvetica_Neue_](http://rghost.net/2222821)以及['helvetica neue cyrillic](http://www.abstractfonts.com/search/helvetica+neue+cyrillic)

谷歌是你的朋友

# c# - 如何在 Windows 应用商店应用程序中添加 GetFileFromPathAsync 的路径

> ID：13685724
> 
> 赞同：1
> 
> 时间：2012-12-03T14:52:13.907
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我想共享其文件路径给出的文件。单击共享魅力后，它说：来自我的应用程序的数据存在问题。文件路径的正确格式是什么？

```
string filepath = "C:\Users\USER\Pictures\pic.png"; // bad format, unrecognized escape sequence
StorageFile file = await StorageFile.GetFileFromPathAsync(filepath);
args.Request.Data.SetStorageItems(new[] { file } ); 
```

我也试过：

```
string filepath = "C:\\Users\\USER\\Pictures\\pic.png";
string filepath = @"C:\Users\USER\Pictures\pic.png"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:16:06.020

在 WinRT 中，您不能使用文件名直接引用文件。Windows 应用商店应用程序可以使用的文件夹是有限的，并且只能使用适当的 API 访问。您可以在此处找到列表：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)。

特别是，因为您尝试访问图片文件夹中的图片，所以您需要使用**KnownFolders.PictureLibrary**位置。您还需要声明相关能力。查看这篇文章了解更多信息：[http](http://danlb.blogspot.it/2011/11/winrt-file-access.html) ://danlb.blogspot.it/2011/11/winrt-file-access.html 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:55:24.037

您可以尝试使用以下代码：

```
Windows.Storage.StorageFolder installedLocation = Windows.ApplicationModel.Package.Current.InstalledLocation;
XDocument document = XDocument.Load(installedLocation.Path + @"/Assets/Configuration/Menu.xml"); 
```

# joomla1.5 - joomla页脚位置

> ID：13685726
> 
> 赞同：0
> 
> 时间：2012-12-03T14:52:25.737
> 
> 标签：joomla1.5

joomla 1.5 页脚显示在左右面板下方，但如果内容面板的长度超过这两者，则页脚不会被推低。换句话说，如果内容比左/右 div 长，页脚将显示在内容 div 区域内。明显的可能性是 div 浮动没有被清除，但我的 css 页脚 id 包括：

```
clear: both; 
```

我的页脚模板代码是

```
<div id = "footer">
        <jdoc:include type="modules" name="footer" style="xhtml" />
     </div> 
```

谁能发现错误或建议在哪里查看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:44:55.297

你能发个链接吗？根据代码片段提出建议很难吗？您可能需要查找 nicolasgallagher.com/micro-clearfix-hack 并将其应用于您的左右面板

# php - Codeigniter 图像处理问题

> ID：13685727
> 
> 赞同：2
> 
> 时间：2012-12-03T14:52:28.480
> 
> 标签：php, image, codeigniter, gd

我正在尝试创建图像的缩略图，例如，这个： ![原始图像](../Images/e7985d8fd8a7d0ad12eae70f5aa27a77.png)

我需要缩略图为 500x300。我选择了一个非常宽的图像 (944x168) 进行说明。

我在 codeigniter 中做的第一件事是放大（或缩小）图像，使其尽可能小，但覆盖 500x300 区域。所以在这种情况下，我需要缩放到 1685x300，因为它比它高。我使用以下设置在 codeigniter 中执行此操作：

```
$config=array(
   "image_library"=>"gd2",
   "source_image"=>"blah.png",
   "maintain_ratio"=>true,
   "master_dim"=>"height",  /* in this case, with a wide image, this is what I want*/
   "height"=>300,
   "width"=>1685   /* calculated by (width/height)*300 */
); 
```

然后我执行如下：

```
$this->load->library('image_lib',$config);
$this->image_lib->resize(); 
```

但是 codeigniter 给了我这个： ![错误调整大小](../Images/12dd930e37b725726ce402fa7b1f9592.png) 这不是我所期望的，因为我只是在这个阶段调整了大小，而不是裁剪。这是正确的分辨率，1685x300

我期待这个，但分辨率为 1685x300 ![更正](../Images/e7985d8fd8a7d0ad12eae70f5aa27a77.png)

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:08:53.057

我打`$this->image_lib->resize()`了两次电话。谢谢您的帮助

# sql - 从查询中添加列

> ID：13685730
> 
> 赞同：1
> 
> 时间：2012-12-03T14:52:33.923
> 
> 标签：sql, join

我有两个表（`tblBestsellers`，`tblAllsellers`）。

*   `tblAllsellers`包括店里所有的书
*   `tblBestsellers`仅包括已售出超过配额的那些。

他们之间的唯一联系就是他们的`productID`.

是否可以在运行时添加带有标题的列`Bestseller`？使用查询将显示该书是否是畅销书，例如

```
ProductID   - Product Name  - Bestseller   
----------------------------------------
324234        Harry Potter        Y
382932        LOTHR               Y
234292        SQL Guide           N 
```

等等。

我怀疑某处有一个 IF 语句？

```
SELECT *
FROM tblAllsellers, tblbestsellers 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:55:59.380

您应该对 ProductID执行`LEFT JOIN`of `tblAllSellers`with 。`tblBestSellers`如果`tblBestSellers`给定的 ProductID 中有记录，则表示该产品是畅销书，否则不是。因此，您可以在`CASE`最后一列的语句中使用此列`BestSeller`。

```
SELECT 
    A.*, 
    CASE 
        WHEN B.ProductId IS NULL THEN 'N' 
        ELSE 'Y' 
    END 'BestSeller'
FROM 
    tblAllSellers A
    LEFT JOIN tblBestSellers B
    ON A.ProductId = B.ProductID 
```

您将在另一个带有 JOIN 的查询中使用它，如下所示：

```
 SELECT A.* 
 FROM 
     AnotherTable X
     JOIN 
     (
        SELECT 
            A.*, 
            CASE 
                WHEN B.ProductId IS NULL THEN 'N' 
                ELSE 'Y' 
            END 'BestSeller'
        FROM 
            tblAllSellers A
            LEFT JOIN tblBestSellers B
            ON A.ProductId = B.ProductID
     ) AS Y
     ON X.ProductId = Y.ProductID 
```

如果您想将此查询的结果与来自另一个查询的结果连接起来，那么您可以按如下方式进行：

```
 SELECT A.ProductId, A.COlumn1, A.Column2 ...
 FROM 
     AnotherTable X

 UNION 
 SELECT Y.ProductId, Y.Column1, Y.Column2..
 FROM
 (
 SELECT 
      A.*, 
      CASE 
           WHEN B.ProductId IS NULL THEN 'N' 
           ELSE 'Y' 
      END 'BestSeller'
 FROM 
      tblAllSellers A
      LEFT JOIN tblBestSellers B
      ON A.ProductId = B.ProductID
 ) AS Y 
```

对于 UNION 场景，请确保两个 SELECT 语句中的列数、数据类型相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:56:28.597

你可以更好地使用`Case`语句。

```
 SELECT A.*, CASE WHEN B.ProductId IS NULL THEN 'N' ELSE 'Y' END 'BestSeller'
 FROM 
tblAllSellers A, tblBestSellers B
where A.ProductId = B.ProductID 
```

# c# - 等效于使用 Mono 的 C# for iOS 的 Javascript eval？

> ID：13685732
> 
> 赞同：0
> 
> 时间：2012-12-03T14:52:41.920
> 
> 标签：c#, javascript, ios, mono, xamarin.ios

> **可能重复：**
> [是否可以动态编译和执行 C# 代码片段？](https://stackoverflow.com/questions/826398/is-it-possible-to-dynamically-compile-and-execute-c-sharp-code-fragments)

作为一种解释性语言的 Javascript 能够在运行时评估作为字符串作为布尔表达式（例如）传递的表达式。

所以，布尔表达式字符串

```
 string expression = "(125 >= 50 && 125 < 150) || (95 >= 70 && 95 < 100)" 
```

可以简单地传递给`eval`函数

```
result = eval (expression) 
```

结果将是一个布尔值。我想使用 C# 和 Mono for iOS 做同样的事情。我查找了“C# 中 Javascript eval 的等效项”，所有显示的结果都使用了某种形式的动态**编译**（有些使用捆绑到 DLL 中的 Javascript eval 函数）。

但是，**iOS 不允许即时编译**，并且需要预编译所有代码。鉴于这种情况，我想知道是否存在不使用动态编译的 C# 的 eval 实现。

请注意，**我只对上述布尔表达式感兴趣**。谢谢。

# mysql - 如何将 Windows 2008 R2 上的 Mysql 数据库备份到 Amazon S3？

> ID：13685733
> 
> 赞同：0
> 
> 时间：2012-12-03T14:52:44.000
> 
> 标签：mysql, amazon-s3, amazon-web-services, backup, amazon

我有一个在 Windows 2008 R2 机器上运行的 MySql 数据库。我想每晚将我的数据库备份到 Amazon S3。

我是这个领域的新手，所以任何人都可以指导我完成这些步骤。

任何博客链接也很感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:19:55.903

我建议不要尝试自己编写脚本并对其进行测试，而是建议使用商业软件包（更安全的选择，因为他们有很多客户并在不同的条件下对其进行了测试）。一种选择是使用 Zmanda 的软件。他们有一个很好的 MySQL 解决方案并支持 Amazon S3，所以它应该相当容易。

# css - 用于视网膜显示设备的 CSS 规则应用于 ie 8

> ID：13685737
> 
> 赞同：0
> 
> 时间：2012-12-03T14:52:59.370
> 
> 标签：css, internet-explorer-8

嗨，我正在使用模板，并且有一个为视网膜显示设备编写的 css 规则。问题是它也适用于 IE8。我在网上搜索过，规则写得对，我无法弄清楚这里出了什么问题。任何 hekp 表示赞赏。

这是代码：

```
@media (min–moz-device-pixel-ratio: 1.5),
(-o-min-device-pixel-ratio: 3/2),
(-webkit-min-device-pixel-ratio: 1.5),
(min-device-pixel-ratio: 1.5),
(min-resolution: 1.5dppx) {
/* on retina, use image that’s scaled by 2 */
.fader:before {
background: url(../mobapp/iphone@2x.png) 0 0;
} 
```

其中覆盖了以下内容：

```
.fader:before {
        background: url(../mobapp/iphone.png) 0 0; 
        background-size: 100%;
        left: -40px;
        width: 593px;
        height: 782px;
        top: 0px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:05:19.737

```
@media (min–moz-device-pixel-ratio: 1.5),
(-o-min-device-pixel-ratio: 3/2),
(-webkit-min-device-pixel-ratio: 1.5),
(min-device-pixel-ratio: 1.5),
(min-resolution: 1.5dppx) {
     /* on retina, use image that’s scaled by 2 */
     .fader:before {
      background: url(../mobapp/iphone@2x.png) 0 0;
}

// Pads and larger phones
@media only screen and (min-width: 600px)
{
    .fader:before {
        background: url(../mobapp/iphone.png) 0 0; 
        background-size: 100%;
        left: -40px;
        width: 593px;
        height: 782px;
        top: 0px;
    }
}

maybe 
```

# android - android mediaplayer 一边播放另一边缓存

> ID：13685743
> 
> 赞同：1
> 
> 时间：2012-12-03T14:53:27.967
> 
> 标签：android, media-player, android-mediaplayer

android mediaplayer在线音乐，第一次边播放边缓存，后来直接播放本地音乐，我们的资源是mp3，我现在是两个线程，一个播放一个下载。主流播放器如何实现，可以获取mediaplayer自带的PCM格式缓存数据，然后将代码转成mp3格式？或者定制一个媒体播放器？顺便说一句我的英语太差了不好意思mediaPlayer。

```
mMediaPlayer.reset();
File file = new File(Environment.getExternalStorageDirectory()+  File.separator + "music",
playMusicDataBean.music_id + ".mp3");
            if (file.exists()) {
                mMediaPlayer.setDataSource(file.getAbsolutePath());
            } else {
                mMediaPlayer.setDataSource(playMusicDataBean.url);
                new Thread() {

                    @Override
                    public void run() {

                        try {
                            URL url = new URL(playMusicDataBean.url);
                            URLConnection conn = url.openConnection();
                            InputStream in = conn.getInputStream();
                            if (in == null)
                                throw new RuntimeException("stream is null");
                            // File file =
                            // File.createTempFile("player_mp3_cache",
                            // ".mp3",
                            // MainActivity.this.getCacheDir());
                            File file = new File(
                                    Environment.getExternalStorageDirectory()
                                            + File.separator + "nyx"
                                            + File.separator + "music",
                                    playMusicDataBean.music_id + ".mp3");
                            if (!file.exists())
                                file.createNewFile();
//                          if(file.exists())
//                              file.delete();
                            m_strTempFilePath = file.getAbsolutePath();
                            System.out.println(m_strTempFilePath);
                            FileOutputStream fos = new FileOutputStream(file);
                            byte buffer[] = new byte[128];
                            do {
                                int nNumRead = in.read(buffer);
                                if (nNumRead <= 0)
                                    break;
                                fos.write(buffer);
                            } while (true);
                            // m_player.setDataSource(m_strTempFilePath);
                            in.close();
                            fos.close();
                            // playMusicDataBean.isLoaded=true;
                        } catch (MalformedURLException e) {
                            e.printStackTrace();
                        } catch (FileNotFoundException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                    }
                }.start();
            } mMediaPlayer.prepareAsync(); 
```

# neo4j - Neo4j REST Cypher 列别名问题

> ID：13685744
> 
> 赞同：1
> 
> 时间：2012-12-03T14:53:34.357
> 
> 标签：neo4j, cypher

我正在尝试使用 Neo4J REST API 进行简单的 CYPHER 查询。这是查询：

```
START n=node(*)
RETURN n as Node1, sum(n.TestInt?) 
```

我收到以下错误：

> 未知标识符“n”

我还尝试了以下方法：

```
START n=node(*)
RETURN n as Node1, sum(Node1.TestInt?) 
```

但我仍然是同样的错误：

> 未知标识符“Node1”

没有任何别名的相同查询不会返回任何错误并且可以完美运行。

我认为别名应该对此没有影响是错误的吗？为什么节点的标识符突然无法识别？

我处于需要使用别名的情况。这是一个只能在 Neo4j 中修复的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:52:25.190

这是 Neo4j 1.8 中的一个错误，当您为一个值设置别名时，您无法以别名访问它。

你可以试试你的情况：

```
START n=node(*) RETURN n as Node1, sum(n.TestInt?) 
```

此外，您想要做的可能是按某些内容分组，然后对这些值求和，现在您正在`n.TestInt`为每一行准确返回，没有总和。

# iphone - 正确重新加载 UITableView

> ID：13685745
> 
> 赞同：0
> 
> 时间：2012-12-03T14:53:44.967
> 
> 标签：iphone, objective-c, ios

我这里有问题。我的应用程序将一些对象保存到 SQLite 数据库中，该数据库是我的 UITableView 的来源。一切正常，除非在运行时向我的数据库添加新对象，否则我的 UITableView 不会更新其内容。这是我的代码：

```
- (void)viewDidLoad
{
    [self daten];
    [super viewDidLoad];
}

-(NSMutableArray *) daten{

if (daten)
    return daten;

    self.daten = [[NSMutableArray alloc] init];

@try {
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [self getDBPath];
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"An error has occured: %s", sqlite3_errmsg(db));

    }

    const char *sql = "SELECT * FROM  Daten";
    if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
    }else{

        while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
            .......
        }
    }
}
@catch (NSException *exception) {
    NSLog(@"Problem with prepare statement:  %s", sqlite3_errmsg(db));
}
@finally {
    sqlite3_finalize(sqlStatement);
    sqlite3_close(db);

    return daten;
}
} 
```

我认为问题出在这里：

```
if (daten)
    return daten;

    self.daten = [[NSMutableArray alloc] init]; 
```

但是，如果我的数据库在运行时获得了一个新对象，那么我的数组此时不是 nil 并且将在没有新对象的情况下返回！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:56:47.437

您可以在表格视图上调用 reloadData。

这个问题似乎是重复的：[UITableView reload data](https://stackoverflow.com/questions/5094972/uitableview-reload-data)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:57:26.367

你应该打电话：[[tableView reloadData]](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006943-CH3-SW19)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:58:20.763

这很简单，只需添加：-

```
[tableView reloadData]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:58:50.363

UITableView 有一个名为 reloadData 的方法，用于重新加载表格的行和部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T15:05:08.117

您没有显示插入新记录的过程，但这是您需要处理重新加载数据的地方。如果您当时没有将 daten 设置为 nil 或将信息插入到数组中，那么您对 ​​reload 的调用将收到相同的数据，不会显示任何新数据。

daten 是可变的，因此您可以使用

```
[self.daten insertObject:myInfo atIndex:myIndex]; 
```

将记录成功插入数据库后的过程：

```
* insert related info into your NSMutableArray.
* insert row into tableview or reload tableview. 
```

或者，您可以将 daten 设置为 nil 并让它从原始方法重新填充。

```
self.daten = nil;
[self.tableview reloadData]; 
```

假设您的 tableview 数据源方法正在返回基于 [self daten] 的值，下一次调用将重新填充数组。在这种情况下，没有理由让它可变。

此外，没有理由在 viewDidLoad 中调用 [self daten]。当您的数据源方法请求数组时，它将根据您的访问器创建和填充。

# emacs - csharp-mode.el：语法高亮，仅此而已

> ID：13685748
> 
> 赞同：0
> 
> 时间：2012-12-03T14:53:51.503
> 
> 标签：emacs

我正在寻找一种仅进行 C# 语法突出显示的 emacs 模式。我在网上 (http://code.google.com/p/csharpmode/) 上找到*的 csharp-mode.el缩进，插入右大括号并忽略 TAB。*我希望 emacs 只写下我输入的内容。

此模式的 emacs 菜单没有禁用此行为的项目（与 C 模式一样）。在 csharp 模式的手册中我没有找到任何提示。我不了解 Lisp，所以我无法深入研究 csharp-mode.el 的代码以使其适应我的需要。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T22:08:52.383

您可以使用挂钩来禁用由以下方式安装的本地键绑定`csharp-mode`：

```
(add-hook 'csharp-mode-hook (lambda () (use-local-map nil))) 
```

# sparql - dotNetRDF & DBPedia - 获取所有图表 - UriFormattedException

> ID：13685749
> 
> 赞同：1
> 
> 时间：2012-12-03T14:53:55.010
> 
> 标签：sparql, dbpedia, dotnetrdf

我在使用 dotNetRDF 向 DBpedia 询问所有图表时遇到问题。执行以下代码后：

```
SparqlRemoteEndpoint endpoint = new SparqlRemoteEndpoint(
    new Uri("http://dbpedia.org/sparql"), "http://dbpedia.org"
);
SparqlResultSet results = endpoint.QueryWithResultSet(
    "SELECT DISTINCT ?g WHERE { GRAPH ?g {?s ?p ?o} }"
); 
```

我有`UriFormattedException`消息`Invalid URI: The format of the URI could not be determined.`

以下图存在问题：`b3sonto`, `b3sifp`, `dbprdf-label`, `virtrdf-label`, `facets`- 可能 dotNetRDF 忘记了默认图 URI

顺便提一句。我可以成功地执行这个查询表单 dotNetRDF： `SELECT ?s ?p ?o FROM <b3sonto> WHERE { ?s ?p ?o} limit 20`

你知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:57:29.430

这些不是有效的 URI，因此 dotNetRDF 在返回时无法处理它们。这是 Virtuoso 的一个错误，应该向他们报告 (virtuoso-users@lists.sf.net)

它们与默认图无关，因为默认图根据定义是未命名的并且没有 URI。

您可以使用这些虚假 URI 查询 Virtuoso，因为 dotNetRDF 默认情况下在发送查询之前根本不解析查询。这允许您向远程端点发送非标准语法，否则 dotNetRDF 的标准兼容实现可能会拒绝该语法。

# php - 向多个用户发送电子邮件通知

> ID：13685751
> 
> 赞同：-1
> 
> 时间：2012-12-03T14:54:00.683
> 
> 标签：php, email

我已经尝试使用此代码向 TABLE (student) 中的所有学生发送电子邮件通知，当然学生的电子邮件已经存储在数据库中，所以当我尝试此代码时，它只会向一个学生发送电子邮件（第一个在桌子 ） ！我已经使用“测试邮件服务器工具”来检查邮件是否发送，正如我所说的它只发送邮件给一个学生，我怎样才能将它发送给表中的所有学生（学生）？

```
 include("connect.php");

     $Load=$_SESSION['login_user'];  
         $smail= "Select Email from admin WHERE ID=$Load ";
     $email= mysql_query($smail);  

    $result3 = mysql_query("Select email from student") or die(mysql_error());
    $row3 =mysql_fetch_array($result3);
    $mail =$row3['email'];
    $to = $mail;
        $subject = "SPMS";
        $message = "You have a new Schedule" ;
    $headers = "From: $email";
        $sent = @mail($to, $subject, $message, $headers) ;
        if($sent) {print "Your Email Notifications send successfully"; } 
        else {print "We encountered an error sending your mail"; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T14:55:35.867

您需要像这样遍历结果集，

```
$subject = "SPMS";
$message = "You have a new Schedule" ;
while( $row3 = mysql_fetch_array($result3)) {
 $mail =$row3['email'];
 $to = $mail;     
 $headers = "From: $email";
 $sent = @mail($to, $subject, $message, $headers) ;
 if($sent) { print "Your Email Notifications send successfully"; } 
 else {print "We encountered an error sending your mail"; } 
} 
```

这是供您参考的[手册。](http://php.net/manual/en/function.mysql-fetch-array.php)

**注意：**不推荐使用 Mysql_* 扩展。如果可能，请使用 Mysqli 或 PDO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:03:35.740

根据PHP手册，应该可以在“to”参数上以逗号分隔多个收件人，因此使用您的代码，`$to = implode(', ', $mail)`

您可以使用密件抄送标头发送给多个收件人，而不是透露他们的所有地址。

此外，您可能希望检查[PHPMailer](http://phpmailer.worxware.com/index.php)以简化您站点中电子邮件任务的开发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:59:34.750

我会遍历多个电子邮件地址，然后为每个电子邮件地址发送一封邮件。

```
<?php

    $addresses = array("mail@example.com", "mail2@example.com", "mail3@example.com");

    foreach ( $addresses as $index => $address )
    {
        // send email to $address.
    }

 ?> 
```

当然，这不是您的实际代码，但逻辑应该足够清晰。

# cakephp - 在 AuthComponent 数组中使用 'contain()' 来指定字段

> ID：13685754
> 
> 赞同：0
> 
> 时间：2012-12-03T14:54:04.553
> 
> 标签：cakephp, authentication

在我从 2.2 版看到的 CakePHP 的文档中，为 AuthComponent 添加了配置键“包含”：

> 核心身份验证对象支持以下配置密钥。
> 
> [...]
> 
> 包含加载用户记录时的可包含选项。

[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#configuring-authentication-handlers)

但我无法理解它是如何工作的（没有例子）。

这不起作用：

```
'Auth' => array(
    'authenticate'      => array(
        'Form' => array(
            'contain'   => array('User' => array('id', 'full_name')),
            'fields'    => array('username' => 'email'),
        )
    )
) 
```

这都不是：

```
'Auth' => array(
    'authenticate'      => array(
        'Form' => array(
            'contain'   => array('id', 'full_name'),
            'fields'    => array('username' => 'email'),
        )
    )
) 
```

建议？有人试过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:57:31.923

你快到了。只需在第一个示例中添加“字段”键，如下所示：

```
'Auth' => array(
    'authenticate'      => array(
        'Form' => array(
            'contain'   => array('User' => array('fields'=>array('id', 'full_name'))),
            'fields'    => array('username' => 'email'),
        )
    )
) 
```

注意：虽然这在语法上是正确的，但我不明白为什么“用户”应该包含“用户”......好吧 YMMV

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:58:32.517

`Contain()`用于包含不同的模型，而不是同一个 Auth 已经检索的模型（除非您尝试包含其他用户，即他们的朋友或其他东西 - 但是您可能有一个别名，而不是“用户”）。

所以，一个例子是：

```
'Auth' => array(
    'authenticate'      => array(
        'Form' => array(
            'contain'   => array('Post'),
            'fields'    => array('username' => 'email'),
        )
    )
) 
```

这将导致 Auth 在检索用户数据时也检索用户的帖子。

# javascript - 多个条目/帖子 javascript google feed

> ID：13685755
> 
> 赞同：0
> 
> 时间：2012-12-03T14:54:05.667
> 
> 标签：javascript, jquery, google-feed-api

无法弄清楚为什么我的循环重复了结果？我试图从 kalRss = rss url 获取 RSS 提要。它得到了所有东西，但它以一种奇怪的方式复制了条目。如果您查看萤火虫控制台，您可以发现只有 3 个条目。[http://www8.umu.se/project/rut/display/index.html](http://www8.umu.se/project/rut/display/index.html)

```
<script src="https://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript">
    google.load("feeds", "1");
    var kalRSS = "http://www.upc.umu.se/om-upc/kalendarium/prenumerera/kalender-rss/?categories=concert,conference,courseEducation,culturOnCampus,dissertation,exhibition,lecture,licentiateSeminar,meeting,theOthers,seminar,seminarSeries,workshop&whoCanAttend=employees&calendarIds=69&fromSiteNodeId=45897";
    function initialize() {
        console.log("initialize");
        var container = $('#dailyFeed');
        container.empty();
        //var feed = new google.feeds.Feed("http://fastpshb.appspot.com/feed/1/fastpshb");
        var feed = new google.feeds.Feed("http://www.upc.umu.se/om-upc/kalendarium/prenumerera/kalender-rss/?categories=concert,conference,courseEducation,culturOnCampus,dissertation,exhibition,lecture,licentiateSeminar,meeting,theOthers,seminar,seminarSeries,workshop&whoCanAttend=employees&calendarIds=69&fromSiteNodeId=45897");
        feed.setNumEntries(3);
        feed.load(function(result) {
            if (!result.error) {
                var html = '';
                var entryLenght = result.feed.entries.length;
                console.log("Number of posts: " + entryLenght);
                for (var i = 0; i < entryLenght; i++) {
                    console.log("Loop: " + i);
                    var entry = result.feed.entries[i];
                    console.log(entry);
                    var startTime = entry.content.substr(11, 5)
                    var endTime = entry.content.substr(27, 5)
                    html += '<li class="daily">';
                    html += '<h3 class="georgia">' + entry.title + '</h3>';
                    html += '<h4>' + entry.categories[0] + '</h4>';
                    html += '<p>Info: ' + entry.contentSnippet + '</p>';
                    html += '<p><img src="img/watch.png" class="icon" />' + startTime + ' - ' + endTime + '</p>';
                    html += '</li>';
                    container.append(html);
                }
            }
        });
    }
    google.setOnLoadCallback(initialize);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:01:37.377

您正在循环中执行 a `html += "<li></li>"`，但您忘记在循环内重置此变量。因此，在每次迭代中，循环都会将其添加到容器中：

*   第 1 项
*   第 1 项，第 2 项
*   第 1 项、第 2 项、第 3 项

最终结果：

*   第 1 项，第 1 项，第 2 项，第 1 项，第 2 项，第 3 项

要修复，请在每次迭代时将`html`变量重置为，例如：`""`

```
for (var i = 0; i < entryLenght; i++) {
    var html = '';
    // rest of your code
} 
```

# c# - 创建绑定到表 WPF 和 LINQ to Entities 的动态控件

> ID：13685756
> 
> 赞同：0
> 
> 时间：2012-12-03T14:54:06.567
> 
> 标签：c#, .net, wpf, linq, entity-framework

我写了一篇有 2 个问题的帖子，并被告知将它们分成 2 个不同的帖子，因为其中一个在这里解决了，另一个是：

我认为我在理解一些基本概念时遇到了问题......我正在创建一个用于管理复杂数据库的项目，（我正在使用 linq 到我的数据库的实体，它位于 ms-sql 2012 和 WPF 中）

我想创建一个通用视图来编辑（删除更新和插入）数据库中的大量表，我手动创建表列表没有问题，但之后我如何以通用方式管理它？linq to entity 不允许执行以下操作：

```
string tableName = listbox.selectedItem.value;
var a = from p in db.tables[tableName] select p; 
```

即使我为每个表手动完成所有这些，我如何创建一个编辑信息的 UI？我需要动态创建一个表单/视图/用户控件进行编辑，其中将包含每列的文本框和日期时间选择器等项目...但我无法为表格进行通用选择...

为了清楚起见，我在 .net 技术方面有一些很好的经验，但是 WPF 和 LINQ 对我来说是新的，我可以在没有 linq 的情况下使用直接联系 SQL DB 轻松地在 asp.net 或 windows 窗体应用程序中创建以上所有内容，因此我理解我对一些基础知识的理解有疑问，希望得到我的 2 个问题的答案，并且非常乐意获得相关教程的指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:21:52.270

使用实体框架的主要优点是它允许对数据库进行一定程度的抽象（这就是 ORM 所做的）。如果您需要将 DB 表直接暴露给 UI，您最好使用普通的旧 ADO.Net `System.Data.DataSet etc`，并且 WPF`DataGrid`具有`AutoGenerateColumns`基于 DataTable 列自动生成网格列的属性。

此外，`listbox.selectedItem.value`不建议在 WPF 中执行类似的操作。您不应在代码中操作 UI 元素的属性。你最好看看 MVVM 模式。

# java - \ / 需要正则表达式（反斜杠，正斜杠）

> ID：13685758
> 
> 赞同：0
> 
> 时间：2012-12-03T14:54:19.647
> 
> 标签：java, android, regex

我需要一个“\/”的正则表达式（它不是 V，它是一个反斜杠和一个正斜杠（？））只捕获“\”并用“”替换它是可以的。

试过：

```
parsed= parsed.replace(Matcher.quoteReplacement("\\/"), "");
parsed= parsed.replace("\\", "");
parsed= parsed.replace("\\\", "");
parsed= parsed.replace("\\\\", ""); 
```

它们都不起作用。我有点困惑。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:56:24.243

差不多好了。要删除`\/`，请使用：

```
parsed= parsed.replaceAll("\\\\/", ""); 
```

`\\`是`\`java 字符串中的 a ，您需要在正则表达式中`\\`转义`\`。因此`\\\\`.

**编辑 ：**

我可能误会了。要删除所有`/`，只需使用

```
 parsed= parsed.replaceAll("/", ""); 
```

那就不用逃了，不过还是用[正确的方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)吧。

# c - 我应该在调用 DB->put 并在数据上使用 DB_DBT_MALLOC 标志后释放数据吗？

> ID：13685760
> 
> 赞同：0
> 
> 时间：2012-12-03T14:54:28.127
> 
> 标签：c, memory-management, berkeley-db

调用 DB->put() 后，我在释放内存时遇到问题。当我这样做时，它说“双重免费或腐败”。

代码示例：

```
DBT key,value;
int err;
...
memset(value,0,sizeof(DBT));
value.data=malloc(10);
memset(value.data,10);
value.flags=DB_DBT_MALLOC;
...
value.size=10;
...
if((err=db->put(db,NULL,&key,&value,0))){
    ...
}
free(value.data); 
```

C API 参考不包含有关该主题的任何信息，它仅提供有关在检索（但不存储）数据时使用 DB_DBT_MALLOC 的一些信息：

> 设置此标志时，Berkeley DB 将为返回的键或数据项分配内存（使用 malloc(3) 或用户指定的 malloc 函数），并在键或数据 DBT 的数据字段中返回指向它的指针结构体。因为任何分配的内存都成为调用应用程序的责任，所以调用者必须确定是否使用数据字段的返回值分配了内存。

当调用 DB->put 时，Berkeley DB 不返回任何数据，它只存储一个键/数据对。它是否复制数据，或者在调用 DB->close 或 ENV->close 之前内存是否应该存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:55:22.113

`DB_DBT_MALLOC`没有影响，`db->put()`因为`db->put()`将复制数据。所以你很可能在别处破坏你的堆。这种错误并不总是在它们引起的地方表现出来。我的猜测是您正在注销某个缓冲区的末尾。尝试在其上运行 Valgrind，跟踪此类问题通常非常有用。

我运行了这个简单的测试程序，它运行良好，valgrind 报告没有泄漏：

```
void test() {
    DB *DB;
    DBT key;
    DBT data;
    DBT value;
    int i;

    db_create(&DB, NULL, 0); 
    if(DB->open(DB, NULL, "tmp.db2", NULL, DB_BTREE, DB_CREATE, 0664) != 0) {
        printf("DB->open failed!\n");
        exit(0);
    }

    memset(&value,0,sizeof(value));
    value.size=10;
    value.data=malloc(value.size);
    memset(&key,0,sizeof(key));
    key.data=malloc(sizeof(unsigned int));
    key.size = sizeof(unsigned int);    
    for(i=0; i < 10; i++) {
        *(unsigned int*)key.data = i;
            memset(value.data, 0, value.size); /* valgrind complains if I leave this out? */
        sprintf(value.data, "test %d", i);

        if(DB->put(DB, NULL, &key, &value, 0 ) != 0) {
            printf("key stored failed\n");
            exit(-1);
        }
    }
    free(value.data);
    free(key.data);

    key.data = malloc(sizeof(unsigned int));
    key.size = sizeof(unsigned int); 
    *(unsigned int*)key.data=5;
    memset(&data,0,sizeof(data));
    data.flags = DB_DBT_MALLOC;
    DB->get(DB, NULL, &key,&data, 0);

    printf("size: %d data: %s\n", data.size, (const char*)data.data);
    DB->close(DB, 0);
    free(data.data);
    free(key.data);

    return;
} 
```

# web-services - 上传图片，转换为base64并发送到jersey

> ID：13685762
> 
> 赞同：1
> 
> 时间：2012-12-03T14:54:36.153
> 
> 标签：web-services, backbone.js, jersey, image-uploading

我正在编写 Web 应用程序，其中前端将写在 html、backbone.js 上，后端写在球衣上。我的html表单中有很多图片上传（输入类型=“文件”）和文本数据（输入类型=“文本”）。我必须在一个请求中将所有这些（图像和纯文本）上传到泽西岛服务器。

我读到只有当我将图像转换为 Base64 格式时，我才能在一个请求中将带有文本数据的图像发送到服务器。

是否可以将通过 html 表单上传的图像转换为 base64 格式，然后将所有数据发送到球衣？

预先感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:48:16.120

我对泽西岛没有任何经验，但我知道这将适用于其他后端。`file_name`在此示例中，您的模型将作为和发布到服务器图像数据`file_data`。您将需要在后端解码图像。下面的前端代码利用了[FileReader API](https://developer.mozilla.org/en-US/docs/DOM/FileReader)。它不适用于 IE < 10。

```
var model = Backbone.Model.extend({
  readFile : function (file, callback) {
    var reader = new FileReader();
    reader.onload = (function (theFile, self) {
      return function (e) {
        self.set({file_name: theFile.name, file_data : e.target.result});
        _.isUndefined(callback) ? null : callback();
      };
    })(file, this);

    reader.readAsDataURL(file);
  }
});

var view = Backbone.View({
  //...
  onRender : function () {
    var self = this,
      fileChangeHandler = function (e) {
      var callback = function () {
        self.model.save({}, {});
      };
      var file = e.originalEvent.target.files[0];
      self.model.readFile(file, callback);
    };
    self.$("input[type='file']").change(fileChangeHandler);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T07:37:23.240

您会以表格的形式将多个文本和图像发布到球衣上吗？

html代码：

```
<form action="rest/test" method="post" enctype="multipart/form-data">
    <input type="text" name="text1" /> <br />
    <input type="file" name="file1" /> <br />
    <input type="text" name="text2" /> <br />
    <input type="file" name="file2" /> <br />
    <input type="submit" value="Submit" />
</form> 
```

球衣代码：

```
@Path("/test")
public class TestResource {

    public TestResource() {
    }

    @POST
    @Consumes("multipart/form-data")
    public Response create(
            @FormDataParam("text1") String text1,
            @FormDataParam("file1") InputStream file1,
            @FormDataParam("text2") String text2,
            @FormDataParam("file2") InputStream file2) {

        //get your data

        return Response.ok().build();
    }
} 
```

# amazon-s3 - 托管在 Amazon S3 上的图像的自定义 URL

> ID：13685764
> 
> 赞同：10
> 
> 时间：2012-12-03T14:54:39.030
> 
> 标签：amazon-s3

我目前正在使用 Amazon S3 来托管和提供我网站的图像。例如，链接如下所示：

[http://s3.amazonaws.com/MyBucket/images/tn_1014.jpg](http://s3.amazonaws.com/MyBucket/images/tn_1014.jpg)

我想做的是让路径看起来更像我们原始站点的路径，例如：

[http://www.mySiteName.com/images/tn_1014.jpg](http://www.mySiteName.com/images/tn_1014.jpg)

我将如何/在哪里进行设置。我想它可能是某处的某种映射，我只是不确定在哪里。我用 IIS 和 Railo 运行一个 VPS 盒子。是我在网络服务器上设置的还是在 DNS 设置中的某个地方设置的？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T14:58:22.743

按照[http://carltonbale.com/how-to-alias-a-domain-name-or-sub-domain-to-amazon-s3/](http://carltonbale.com/how-to-alias-a-domain-name-or-sub-domain-to-amazon-s3/)上的教程将您的域别名到您的 S3 存储桶。

# javascript - ASP.NET 捆绑和缩小以及从其他 Web 应用程序中使用它

> ID：13685768
> 
> 赞同：2
> 
> 时间：2012-12-03T14:54:44.840
> 
> 标签：javascript, asp.net, bundle, minify

我有 ASP.NET MVC 4 应用程序，其中包含一些简单的 jQuery 小部件库。现在我想允许其他 Web 应用程序使用该库。与其在客户端页面上逐个文件插入每个小部件文件，不如在一个请求时将它们全部加载为一个包。有谁知道是否可以使用 Microsoft ASP.NET Web 优化框架来做那个捆绑包？换句话说，我想准备一些“jquery-library-1.0.0.js”文件并允许其他应用程序加载它。

我能找到的只是如何在 MVC 应用程序中使用它，而没有关于如何准备带有静态名称的包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T17:16:52.163

经过一些研究，我找到了如何做到这一点的方法 - 使用 IBundleTransform 接口。它允许访问捆绑内容，我只需将其转储到我想要的位置的磁盘上，然后将其用于任何其他想要使用该库的应用程序。

```
public class ScriptsBundleTransform : IBundleTransform
{
    public string ScriptsPath { get; set; }
    public string Version { get; set; }
    public string Minified { get; set; }
    public string Full { get; set; }

    public ScriptsBundleTransform()
    {
    }

    public ScriptsBundleTransform(string path, string version, string minified, string full)
    {
        ScriptsPath = path;
        Version = version;
        Minified = minified;
        Full = full;
    }

    public void Process(BundleContext context, BundleResponse response)
    {
        string scriptsRoot = context.HttpContext.Server.MapPath(Path.Combine(ScriptsPath, Version));

        if (!Directory.Exists(scriptsRoot))
            Directory.CreateDirectory(scriptsRoot);

        //  if minified file name specified...
        if (!string.IsNullOrEmpty(Minified))
        {
            using (TextWriter writer = File.CreateText(Path.Combine(scriptsRoot, Minified)))
            {
                writer.Write(response.Content);
            }
        }

        //  if full file name specified...
        if (!string.IsNullOrEmpty(Full))
        {
            using (Stream writer = File.OpenWrite(Path.Combine(scriptsRoot, Full)))
            {
                foreach (var file in response.Files)
                {
                    file.VirtualFile.Open().CopyTo(writer);
                }
            }
        }
    }
} 
```

之后，我只需要将包配置中的这个转换器添加到我想要转储到磁盘的包中：

```
 widgets.Transforms.Add(new ScriptsBundleTransform()
            {
                Version = "1.0.0",
                ScriptsPath = "~/Scripts",
                Minified = "jquery.library.min.js",
                Full = "jquery.library.js"
            }); 
```

即使库中的任何小部件将被更改，转储文件也会自动重新生成，我没有手动控制这个过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:43:47.743

捆绑和缩小是 Asp.Net 4.5 的新功能

您可以在此处找到更多详细信息： [http ://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

因此，如果您拥有 Asp.Net 4.5 - 您拥有开箱即用的捆绑和缩小功能。（您尚未指定构建应用程序的 Asp.Net 版本）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:54:48.423

我不确定您是否可以将捆绑和缩小用作独立实用程序，但您可以尝试以下方法之一：

1.  如果您已经在项目中使用捆绑和缩小，并且在浏览器中启动页面后只想要输出 JavaScript 文件，您可以导航到文件的 URL 并下载它。

或者

1.  您可以查看 Springboard ( [https://github.com/soulwire/Springboard](https://github.com/soulwire/Springboard) ) 或 Grunt ( [http://gruntjs.com](http://gruntjs.com/) ) 等实用程序，尽管这两者都需要一些额外的工作才能在 Windows 上工作，因为它们的其他依赖关系。

# php - 如何使用 Codeigniter 验证多个字段的不同上传文件扩展名？

> ID：13685769
> 
> 赞同：1
> 
> 时间：2012-12-03T14:54:54.283
> 
> 标签：php, codeigniter, codeigniter-2

我有两个字段可以上传两个扩展：

*   要上传的第一个字段（PDF、doc、docx）

*   第二个要上传的字段（zip）

如何让 Codeigniter 验证不同字段的不同扩展？

```
/**
 * change book source file
 * 
 * @param integer $book_id 
 */
public function upload_book_source($book_id) {
    $vars = array();
    $vars['upload_path'] = PUBPATH . 'global/modules/bookstore/files/books_source_file/';
    $vars['allowed_types'] = 'doc|docx|pdf|zip';
    $vars['max_size'] = '30720';
    $vars['encrypt_name'] = TRUE;
    $vars['book_id'] = $book_id;

    $book = $this->d_book->find_by_id($book_id);
    if (isset($_POST['submit'])) {
        $file_name = $this->upload($vars);
        $this->d_book->update_one_field($book_id, 'bo_path', $file_name[0]['file_name']);
        $this->d_book->update_one_field($book_id, 'bo_path_zip', $file_name[1]['file_name']);

        $this->session->set_flashdata('success_msg', lang('file_uploaded'));
        redirect('bookstore/admin_d_book/');
    } else {
        $vars['upload_errors'] = NULL;
    }

    if ($book->bo_path) { // load cover image
        $vars['file_path'] = base_url() . 'global/modules/bookstore/files/books_source_file/' . $book->bo_path;
    } else {
        $vars['file_path'] = NULL;
    }
    $vars['controller_name'] = 'admin_d_book';
    $this->view('bookstore/admin/change_source_file', $vars);
}

/**
 * 
 * @param array $config the configuration array
 * @return string
 * 
 */
private function upload($config) {
    $this->load->library('upload', $config);
    for ($i = 1; $i <= 2; $i++) {

        if (!empty($_FILES['file' . $i]['name'])) {

            if (!$this->upload->do_upload('file' . $i))
                $vars['upload_errors'] = $this->upload->display_errors("<p class='notification n-error'>", "</p>");
            else
                $result[] = $this->upload->data();
        }
    }
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:47:22.763

您需要不同的配置，以便您可以更改`allowed_types`不同输入的配置，例如：

```
echo form_open_multipart();
echo form_upload('mydoc'); // <input type="file" name="mydoc">
echo form_upload('myzip'); // <input type="file" name="myzip">
echo form_close(); 
```

```
$config = array(
    // your default config
);
$this->load->library('upload', $config);

$config['allowed_types'] = 'doc|docx|pdf';
$this->upload->initialize($config);
$this->upload->do_upload('mydoc');

$config['allowed_types'] = 'zip';
$this->upload->initialize($config);
$this->upload->do_upload('myzip'); 
```

# extjs - 将菜单从 ExtJS 4.0 迁移到 4.1

> ID：13685770
> 
> 赞同：0
> 
> 时间：2012-12-03T14:55:12.407
> 
> 标签：extjs, menu, extjs4, extjs4.1

我一直在将我的项目从 ExtJS 4.0 迁移到 4.1。这张照片说明了一切：

![在此处输入图像描述](../Images/67a9eb91d28fa105589880131f121555.png)

这就是我构建菜单的方式：

```
function addItems(items) {
    var toolBarItems = [];
    for (var i = 0; i < items.length; i++) {
        var newItem = {
            text: items[i].Name,
            command: items[i].Command,
            height: 24,
            cls: 'toolbarbtn'
        };
        if (items[i].subItems === undefined || items[i].subItems === []) {
            newItem.handler = clickToolbarItemHandler;
        }
        else {
            newItem.menu = Ext.create('Ext.menu.Menu', {
                items: addChildItems(items[i].subItems)
             }); 
        }
        toolBarItems.push(Ext.create('Ext.button.Button', newItem));
    }
    return toolBarItems;
}

function addChildItems(subItems) {
    var subMenuItems = [];
    for (var i in subItems) {
        var item = subItems[i];

        var subMenuItem = {
            text: item.Name,
            command: item.Command,
            shadow: false,
            cls: 'toolbarbtn' 
        };

        if (item.subItems === undefined || item.subItems === []) {
            subMenuItem.handler = clickToolbarItemHandler;
        }
        else
            subMenuItem.menu = Ext.create('Ext.menu.Menu', {
                items: addChildItems(item.subItems)
            });
        subMenuItems.push(subMenuItem);
    }
    return subMenuItems;
} 
```

这在 4.0 中没有发生，我似乎无法找到解释为什么现在会发生这种情况。有什么想法吗？

更新：

@Lolo：感谢您提醒我更新 css 文件。

不幸的是，它并没有解决问题。

我试图像这样添加一个 renderTo ：

```
function addChildItems(subItems) {
var subMenuItems = [];
for (var i in subItems) {
    var item = subItems[i];

    var subMenuItem = {
        text: item.Name,
        command: item.Command,
        cls: 'toolbarbtn' 
    };

    if (item.subItems === undefined || item.subItems === []) {
        subMenuItem.handler = clickToolbarItemHandler;
    }
    else
        subMenuItem.menu = Ext.create('Ext.menu.Menu', {
            //TODO: MIGV4
            shadow: false,
            renderTo: Ext.getBody(),
            items: addChildItems(item.subItems)
        });
    subMenuItems.push(subMenuItem);
}
return subMenuItems; 
```

}

它确实解决了子菜单对齐问题，但仍然出现一些意外错误。图片再次说明了一切：

![在此处输入图像描述](../Images/b56a465a237b9905895932ef544bc802.png)

此错误仅在第一次渲染菜单时发生。当我再次测试时，它工作得很好。

有什么想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:44:27.447

我不认为这个问题与你的 JS 代码有关。看起来有些风格问题。你也切换到新`css`文件了吗？`JS`我通过包含4.1 的源和`CSS`4.0 的文件来重现此行为。见例子：http: [//jsfiddle.net/ukqYU/2/](http://jsfiddle.net/ukqYU/2/)

明显的解决方法是链接正确的 CSS 文件。

编辑：我发现在 4.1 中他们`.x-layer`稍微改变了类风格，这可能会导致这个问题。尝试更改`position:absolute;`为`position: absolute !important;`in `.x-layer`。那你应该很好。

# python - OpenCV Python calcOpticalFlowFarneback

> ID：13685771
> 
> 赞同：13
> 
> 时间：2012-12-03T14:55:14.077
> 
> 标签：python, opencv

非常感谢，如果有人可以帮助我。我尝试使用第 216 页末尾的“OReilly Programming Computer Vision with Python”一书的示例。

```
 #!/usr/bin/env python

import cv2
def draw_flow(im,flow,step=16):
    h,w = im.shape[:2]
    y,x = mgrid[step/2:h:step,step/2:w:step].reshape(2,-1)
    fx,fy = flow[y,x].T

    # create line endpoints
    lines = vstack([x,y,x+fx,y+fy]).T.reshape(-1,2,2)
    lines = int32(lines)

    # create image and draw
    vis = cv2.cvtColor(im,cv2.COLOR_GRAY2BGR)
    for (x1,y1),(x2,y2) in lines:
        cv2.line(vis,(x1,y1),(x2,y2),(0,255,0),1)
        cv2.circle(vis,(x1,y1),1,(0,255,0), -1)
    return vis

cap = cv2.VideoCapture(0)

ret,im = cap.read()
prev_gray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)

while True:
    # get grayscale image
    ret,im = cap.read()
    gray = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)

    # compute flow
    #flow = cv2.calcOpticalFlowFarneback(prev_gray,gray,None,0.5,3,15,3,5,1.2,0)
    flow = cv2.calcOpticalFlowFarneback(prev_gray,gray,float(0),float(0),3,15,3,5,float(1),0)
    prev_gray = gray

    # plot the flow vectors
    cv2.imshow('Optical flow',draw_flow(gray,flow))
    if cv2.waitKey(10) == 27:
        break 
```

我在终端（LXUbuntu，lxterminal）中执行，我收到以下错误：

```
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
VIDIOC_QUERYMENU: Invalid argument
Traceback (most recent call last):
  File "hw.py", line 35, in <module>
    flow = cv2.calcOpticalFlowFarneback(prev_gray,gray,None,0.5,3,15,3,5,1.2,0)
TypeError: a float is required 
```

我知道问题出在函数 calcOpticalFlowFarneback 中，因为这需要浮点数，因此，我尝试 calcOpticalFlowFarneback(prev_gray,gray,None,float(0.5),3,15,3,5,float(1.2),0 ) 但不工作。

非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T16:51:02.777

您需要稍微更改一下代码。

首先，包括 Numpy 库，因为`mgrid`, `int32`,等方法`vstack`是 numpy 函数。

所以在代码的顶部，添加：

```
from numpy import * 
```

其次，关于您的问题，第四个参数应该是`int`. 您已将其作为浮点数提供。将其设为 1（或 3，如您所愿）。最后一个参数是输出本身。你不需要它。所以删除它。

所以我的最终陈述如下所示（对我来说效果很好）：

```
flow = cv2.calcOpticalFlowFarneback(prev_gray,gray,0.5,1,3,15,3,5,1) 
```

试试这个，如果出现任何错误，请告诉我。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-23T09:50:37.573

@sunside

```
flow = cv2.calcOpticalFlowFarneback(prvs, next, None, 0.5, 3, 15, 3, 5, 1.2, 0) 

cv2.calcOpticalFlowFarneback(prev, next, flow, pyr_scale, levels, winsize, iterations, poly_n, poly_sigma, flags) → flow 
```

是 opencv3.x 语法，请参见[opencv3.x doc](http://docs.opencv.org/3.0-beta/modules/video/doc/motion_analysis_and_object_tracking.html)

否则：

```
flow = cv2.calcOpticalFlowFarneback(prvs, next, None, 0.5, 3, 15, 3, 5, 1.2, 0) 
TypeError: a float is required

cv2.calcOpticalFlowFarneback(prev, next, pyr_scale, levels, winsize, iterations, poly_n, poly_sigma, flags[, flow]) 
```

你必须在 opencv2.x 上运行过，它可以这样断言：

```
import cv2
print cv2.__version__ 
```

见[opencv2.x 文档](http://docs.opencv.org/2.4/modules/video/doc/motion_analysis_and_object_tracking.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-02-10T22:08:05.823

如果你使用 Python3，插入`def draw_flow`

```
y, x = np.mgrid[step/2:h:step, step/2:w:step].reshape(2,-1).astype(int) 
flow = cv2.calcOpticalFlowFarneback(prevgray, gray, None, 0.5, 3, 15, 3, 5, 1.2, 0) 
```

对于 Python 2，您应该使用

```
y, x = np.mgrid[step/2:h:step, step/2:w:step].reshape(2,-1)
flow = cv2.calcOpticalFlowFarneback(prevgray, gray, 0.5, 3, 15, 3, 5, 1.2, 0) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-01T19:05:36.920

当我如下调用该函数时，将显示以下错误消息：

```
 flow = cv2.calcOpticalFlowFarneback(prvs, next, None, 0.5, 3, 15, 3, 5, 1.2, 0) 
```

错误：

```
flow = cv2.calcOpticalFlowFarneback(prvs, next, None, 0.5, 3, 15, 3, 5, 1.2, 0) 
TypeError: a float is required 
```

当我删除该值时`None`，我的程序可以正常工作：

```
flow = cv2.calcOpticalFlowFarneback(prvs, next, 0.5, 3, 15, 3, 5, 1.2, 0) 
```

功能`calcOpticalFlowFarneback()`成型：

```
cv2.calcOpticalFlowFarneback(prev, next, pyr_scale, levels, winsize, iterations, poly_n, poly_sigma, flags[, flow]) → flow 
```

事实证明，我们不应该传递`None`for 参数的值`pyr_scale`。我们可以传递`None`给参数`flow`。

*   `pyr_scale`：一个参数，指定图像比例（<1）为每个图像构建金字塔；`pyr_scale = 0.5`表示经典金字塔，其中下一层比上一层小两倍。

*   `flow`: 计​​算的流图，其大小`prvs`和类型相同`CV_32FC2`。

# websocket - 为什么 Javascript 对 Websocket 很重要？

> ID：13685776
> 
> 赞同：2
> 
> 时间：2012-12-03T14:55:25.593
> 
> 标签：websocket

这似乎是一个奇怪的问题，但我真的很困惑，因为当[从 Tornado 下载这个示例](https://github.com/facebook/tornado/tree/master/demos/websocket)时，我认为：好的，我运行它，它会工作！但问题是，它没有工作，因为我在离线模式下进行了测试，并且缓存中没有 jQuery！

[并从 SO](https://stackoverflow.com/questions/10028770/html5-websocket-vs-long-short-polling)中找到了这个：

> Ajax - 创建到服务器的连接发送一些数据（简化为 get/post），并接收响应。
> 
> 长轮询 - 创建与服务器的连接，发送一些数据，保持连接并有时从服务器接收一些数据。连接保持短时间，并定期重新连接。在服务器端它仍然像网页一样处理。
> 
> WebSockets - 创建到服务器的连接，并根据需要保持。服务器或客户端可以轻松地阻止它。双向发送数据。WebSockets 通常对每条消息使用掩码，因此数据被简单地加密。

那么，为什么即使它与服务器端相关，引擎盖下总是有 Javascript 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T20:17:37.313

JavaScript 仅在浏览器中对 WebSocket 很重要，因为浏览器已经在 J​​avaScript 中实现了 WebSocket API（参见 RFC 6455）。因此，如果您想从 HTML5 页面中访问 WebSocket，您需要编写 JavaScript。但是，您也可以使用 Java Applet 在 Java 客户端中执行 WebSocket。（尽管小程序已经失宠。）此外，可以从本地应用程序（包括移动 iOS）执行 WebSocket。

许多 WebSocket 服务器平台尝试支持多种类型的客户端。例如，Kaazing 不仅提供 JavaScript 客户端，还提供 .NET、Silverlight、Java 和 Objective-C 客户端。WebSocket 的基本思想是您只需编写一次服务器逻辑，然后您就可以“收获”您在各种不同客户端中所做的事情。

请记住，如果您要使用 WebSocket，您将需要一种编程语言而不是基本的 HTML 标记，因为您需要处理通过 WebSocket 连接传入的数据。这些数据可以来自许多不同的协议，例如 AMQP、STOMP、socket.IO、WAMP 和许多其他协议。对于每种类型的协议，您实际上都需要一个不同的库来处理协议的处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T15:54:04.850

Javascript 最初是作为一种向网页添加客户端表单验证和少量动态用户交互的方式。然而，现代 Javascript 是一种非常强大的语言（也有很多烦恼），它可以在浏览器或服务器上运行（使用类似[Node.js](http://nodejs.org)的东西）。现代浏览器提供了许多仅适用于 Javascript 的 API（除非并且直到其他语言如 Dart 得到普遍支持），例如 Web Workers、Canvas、Web GL、Web Audio API、XMLHTTPRequest（即 AJAX）、计时器、事件等。

浏览器的旧概念是能够下载和呈现静态 HTML 标记文档的程序。现在将浏览器视为主要用于执行 Web 应用程序的操作系统 + 库 + API 更为有用。换句话说，现代网络浏览器的主要目的是执行 Javascript 并为 Javascript 提供 API。HTML 的主要目的是指定要加载的初始 Javascript 文件以启动 Web 应用程序。HTML 和 CSS 也可用于定义 DOM 树的初始状态（Javascript API 的可见部分）。但是，您可以使用 HTML 和 CSS 静态指定的所有内容，也可以使用 Javascript 动态生成。

在这种情况下，WebSockets 是浏览器中的一种 API，它使 Web 应用程序（即在浏览器中运行的 Javascript 程序）能够与 WebSocket 服务器建立低延迟的双向通信通道。

**更新**：

*他们为什么不直接说“WebSockets 在 Javascript 版本 xxx 中可用”？*

1.  Javascript 不仅适用于 Web（例如 Node.js），而且这些 API 也不仅仅适用于 Javascript。例如，如果你有一个启用了 Dart 的 Chrome 版本，那么这些相同的 API 可以从 Dart 中获得。script 标签允许使用其他语言，因此未来的浏览器可能会运行可以访问这些 API 的其他语言。
2.  Javascript 是由[ECMA](http://www.ecma-international.org/)定义的语言，WebSockets、Web Workers 等是由[W3C](http://w3.org)定义为 HTML5 的一部分的浏览器 API。浏览器版本决定了哪些 Web API 可用以及 Javascript 的版本。您的浏览器可能使用支持新 API 的旧版 Javascript，反之亦然。

# php - Codeigniter Netbeans 使用 MysqlObjects 自动完成

> ID：13685777
> 
> 赞同：2
> 
> 时间：2012-12-03T14:55:30.503
> 
> 标签：php, mysql, codeigniter, netbeans, autocomplete

我需要使用 codeigniter 数据库 mysql 对象在 netbeans 中自动完成。我已经为标准类启用了自动完成功能，但是如果我得到 mysql 结果，则什么也没有（因为通过[http://php.net/manual/en/function.mysql-fetch-object.php](http://php.net/manual/en/function.mysql-fetch-object.php)
动态创建的对象 我的解决方法是声明仅包含字段的 model_raw 类。

```
/**
 * 
 * @param int $id
 * @return Account_model_raw 
 */
public function get_Account($id) {
    if (is_int($id) === FALSE)
        return null;

    $query = $this->db->get_where($this->table, array('id' => $id), 1);
    if ($query->num_rows() <= 0)
        return null;
    $ret = $query->row();

    return $ret;
}

class Account_model_raw{
var $id;
var $login;
var $password;
var $lastlogin;
} 
```

现在，如果我使用 get_Account 方法，我可以在 netbeans 中获得自动完成功能。

我的问题是是否有更好的方法来保持类与 mysql 同步。如果表发生变化怎么办？我不想手动编辑数据库和原始类文件。

也许这些原始文件可以用脚本自动创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:18:05.443

您可以使用 MY_Model 或 ORM 库。

[https://github.com/jamierumbelow/codeigniter-base-model](https://github.com/jamierumbelow/codeigniter-base-model)

[http://redbeanphp.com/](http://redbeanphp.com/)

因此，如果您使用 X 和 Y 对象，则无需在模型中显式声明，您可以使用这些库以使用 X 表声明模型的方式使用这些库，然后您可以调用 ORM 提供的函数来访问其中的字段值你的数据库。

PS：不要依赖自动完成来实现这些类型的功能，尽管您不会从 NetBeans 中看到数据库中的内容，但您至少可以依靠库来知道在哪里放置您为其提供的 x,y 对象。

# c - 由于指针的“突然”变化而导致无限循环

> ID：13685778
> 
> 赞同：2
> 
> 时间：2012-12-03T14:55:34.687
> 
> 标签：c, pointers, while-loop, conditional-statements

我明白，在编程世界中，什么都没有发生，但我真的被困在这里......在我的 while 循环结束时，条件内的指针突然从 NULL 变为“某事”

我有以下功能：

```
tListInstr *copyList (tListInstr *sourceList)   {

    tListInstr *newList;
    listInit(&newList);
    listFirst(sourceList);

    while(sourceList->active != NULL){
        InstructionGenerate(newList, 
                        sourceList->active->Instruction.instType,
                        sourceList->active->Instruction.addr1,
                        sourceList->active->Instruction.addr2,
                        sourceList->active->Instruction.addr3);

        listNext(sourceList);
        if(sourceList->active == NULL)
            printf("wtf????\n");
    }

    return newList;
} 
```

解释代码，它是解释器的一部分，该函数复制源语言中被调用函数的3个地址代码指令列表并返回副本，`sourceList`要复制的列表（它永远不会为NULL）`newList`显然是新列表。`listInit`分配内存并初始化新列表，`listFirst`将活动设置`sourceList`为它的第一项。`listNext`将活动转移到下一个项目，就在当前活动的后面。`InstructionGenerate`将新指令附加到`newList`.

好吧，我的问题是，在循环结束时`sourceList->active` 显然是 NULL，因为我`wtf????`在终端上得到了无限的，但是在它被打印并`while` 测试了 get 的条件之后，它具有非 NULL 值（我检查过）并且 while 循环无限地。

有趣的是，当我删除`InstructionGenerate` 呼叫时，它运行正常。但是`InstructionGenerate` 不会/不应该`sourceList` 以任何方式影响指针，因为它正在使用`newList`，如果它以某种奇怪的方式我不明白做某事`sourceList`，我会在它被调用后更改活动并在它被调用之前测试条件.

我认为这不会有任何帮助，但这里是`InstructionGenerate` 它调用的代码和函数：

```
void InstructionGenerate(tListInstr *l, int varType,void *addr1, void *addr2,void *addr3){
    tInstr I;
    I.addr1 = addr1;
    I.addr2 = addr2;
    I.addr3 = addr3;
    I.instType = varType;
    listInstInsert(l,I);
}

void listInstInsert(tListInstr *L,tInstr I)
{
    tListItem ptr = malloc(sizeof(struct listItem));
    if(ptr == NULL)
        return;
    else
    {
        ptr->Instruction = I;
        if (L->first == NULL){
            ptr->nextItem = NULL;
            L->first = ptr;
            L->end = ptr;
        }
        else{
            ptr->nextItem = NULL;
            L->end->nextItem = ptr;
            L->end = ptr;
        }
    }
} 
```

最后`struct`是

```
typedef struct tInstr
{
    int instType;
    void *addr1;
    void *addr2;
    void *addr3;
} tInstr;

typedef struct listItem
{
    tInstr Instruction;
    struct listItem *nextItem;
} *tListItem;

typedef struct tListInstr
{
    struct listItem *first;
    struct listItem *end;
    struct listItem *active;
} tListInstr; 
```

编译：
gcc 4.4.5 版（Debian 4.4.5-8）
gcc 4.5.4 版（GCC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:33:46.883

您很可能在某处的指针操作中有错误。我没有看到任何免费调用，因此您很可能没有悬空指针问题。您很可能使用未初始化的指针或以某种方式滥用指针。也许它在一帧中指向堆栈上的有效区域，而不是在另一帧中。流水线是导致您雄辩地陈述“无限wtf”的原因。当执行if中的比较指令时，值为NULL。当在循环前置条件中再次比较它时，一些流水线更改已生效，将其设置为非 NULL 值。

# maven - 如何指定依赖战争的概况？

> ID：13685781
> 
> 赞同：1
> 
> 时间：2012-12-03T14:55:37.003
> 
> 标签：maven, dependencies

我有一个多模块 Maven 项目，其中设置了配置文件。因此，如果我想使用我的模拟版本，我可以指定：

```
mvn clean install -Pmock 
```

我如何在另一个项目的 pom 中复制它，它将这个模拟实现作为依赖项？

我尝试了以下方法，但配置文件标签被视为无效：

```
<dependency>
    <groupId>com.mysite</groupId>
    <artifactId>rest.service</artifactId>
    <profile>mock</profile>
    <type>war</type>
    <version>1.0-SNAPSHOT</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:45:23.257

您需要有一个父 pom 来定义和激活配置文件，但不要配置它。配置将保留在依赖模块中。

在您的父 pom 中，您将拥有类似的内容：

```
<profiles>
    <profile>
         <id>mock</id>
         <activation>
             <property>useMock</property>
             <value>true</value>
         </activation>
    </profile>
</profiles> 
```

然后在您的模块中，您可以配置该配置文件：

```
<profiles>
    <profile>
        <id>mock</id>
        ...Profile Stuff Here
    </profile>
</profiles> 
```

# c# - C# MS Exchange 将电子邮件移动到文件夹

> ID：13685782
> 
> 赞同：8
> 
> 时间：2012-12-03T14:55:39.567
> 
> 标签：c#, exchange-server, email

**补充：**感谢用户@grapkulec，我正在使用

```
using Microsoft.Exchange.WebServices.Data; 
```

我正在尝试将电子邮件移动到我已经在 Outlook 中创建的文件夹（使用 MS Exchange）。到目前为止，我已经能够将电子邮件移动到草稿或另一个众所周知的文件夹名称，但没有成功将其移动到我创建的名为“示例”的文件夹中。

```
foreach (Item email in findResults.Items)
email.Move(WellKnownFolderName.Drafts); 
```

上面的代码有效；但我不想使用众所周知的文件夹。而且，如果我尝试将代码更改为：

```
email.Move(Folder.(Example)); 
```

或者

```
email.Move(Folder.["Example"]); 
```

它不动（在这两种情况下，都会引发错误）。我在 MSDN、SO 和通用 C# 上找到了大量关于如何将电子邮件移动到文件夹中的示例 - 但**只有**Outlook“众所周知”的文件夹（草稿、垃圾邮件等），它不适用于我创建的文件夹。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-04T17:11:09.757

解决了！

`Move`由于 ID 格式错误，无论多次尝试，该命令都失败了。显然，移动操作不允许使用名称。我曾尝试`DisplayName`作为标识符，这就是让我失望的原因。最后，我放弃了`DisplayName`，这会有所帮助。相反，我通过将 ID 存储在一个变量中来指向 ID（它停止了烦人的“ID 格式错误”错误），并且移动有效。

代码：

```
Folder rootfolder = Folder.Bind(service, WellKnownFolderName.MsgFolderRoot);
rootfolder.Load();

foreach (Folder folder in rootfolder.FindFolders(new FolderView(100)))
{
    // Finds the emails in a certain folder, in this case the Junk Email
    FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.JunkEmail, new ItemView(10));

    // This IF limits what folder the program will seek
    if (folder.DisplayName == "Example")
    {
        // Trust me, the ID is a pain if you want to manually copy and paste it. This stores it in a variable
        var fid = folder.Id;
        Console.WriteLine(fid);
        foreach (Item item in findResults.Items)
        {
            // Load the email, move the email into the id.  Note that MOVE needs a valid ID, which is why storing the ID in a variable works easily.
            item.Load();
            item.Move(fid);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-03T15:29:04.167

看来您正在使用 EWS 托管 API，所以这是我如何做这些事情的答案。

项目上的移动方法可以接受 WellKnownFolderName 或文件夹 ID。如果我理解正确，您希望将您的电子邮件移动到名为“示例”的文件夹中。所以首先你需要获取这个文件夹的文件夹对象：

```
var filter = new SearchFilter.IsEqualTo(FolderSchema.DisplayName, "Example");
var view = new FolderView(1)
{
    PropertySet = new PropertySet(BasePropertySet.FirstClassProperties)
};
var findFoldersResults = exService.FindFolders(filter, view);
folder = findFoldersResults.FirstOrDefault(f => f.DisplayName.Equals("Example", StringComparison.OrdinalIgnoreCase)); 
```

现在您应该拥有“示例”文件夹变量，并且可以将其 id 传递给电子邮件的 Move 方法。有关更多详细信息，请查看有关如何使用 EWS 托管 API 的 msdn 页面，那里有很多简单和基本的使用示例。

顺便说一句：WellKnownFolderNames 枚举是最常见的 Exchange 文件夹（如收件箱、已发送邮件等）的便利类型。如果有任何其他 Exchange 对象，您必须通过搜索和/或绑定自行检索任何其他内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-10T11:26:52.700

基于这些答案，创建了一种移动到文件夹的工作方法，可能对某人有用：

```
/// <summary>
/// Moves the email to the specified folder.
/// </summary>
/// <param name="mail">Email message to move.</param>
/// <param name="folderName">Display name of the folder.</param>
public void MoveToFolder(EmailMessage mail, string folderName)
{
    Folder rootfolder = Folder.Bind(_exchangeService, WellKnownFolderName.MsgFolderRoot);
    rootfolder.Load();
    Folder foundFolder = rootfolder.FindFolders(new FolderView(100)).FirstOrDefault(x => x.DisplayName == folderName);
    if (foundFolder == default(Folder))
    {
        throw new DirectoryNotFoundException(string.Format("Could not find folder {0}.", folderName));
    }

    mail.Move(foundFolder.Id);
} 
```

# menu - 如何使用applescript单击“下拉窗口”

> ID：13685787
> 
> 赞同：2
> 
> 时间：2012-12-03T14:55:48.020
> 
> 标签：menu, click, applescript

所以我的问题是在磁盘战士中，“目录”窗格下有一个下拉窗口，我无法让applescript“单击”。无论如何告诉applescript“单击”下拉窗口，然后从列表中单击一个磁盘？我的老板希望整个代码自动化，这是我不确定我是否可以自动化的一部分。这是我的代码：

```
do shell script "open /Applications/DiskWarrior.app"
delay 3
tell application "System Events"
    keystroke "my password"
    delay 2
    keystroke return
    delay 3
    keystroke tab
    delay 3
    keystroke return
    delay 20
    --Delay 20 to allow time for the application to fully load
    end tell 
```

打开diskwarrior后，下一步是选择我要重建的磁盘，但正如我所说，我不确定如何告诉applescript“点击”它。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:31:51.177

```
do shell script "open -a DiskWarrior"
delay 5
tell application "System Events"
    tell process "SecurityAgent"
        set value of text field 2 of scroll area 1 of group 1 of window 1 to "password"
        click button 2 of group 2 of window 1
    end tell
    delay 5
    tell process "DiskWarrior"
        set frontmost to true
        tell pop up button 1 of window 1
            click
            click menu item 2 of menu 1
        end tell
        set visible to false -- workaround for a glitch in the DiskWarrior UI
        set visible to true
        click button "Rebuild" of window 1
    end tell
end tell 
```

我无法单击重建按钮来工作。在 Automator 中记录操作虽然有效：

![](../Images/74c313908dacae988b9b40965e5703df.png)

# xml - 如何在不知道要转换的类的类型或存在的情况下反序列化对象

> ID：13685788
> 
> 赞同：0
> 
> 时间：2012-12-03T14:55:48.803
> 
> 标签：xml, class, object, serialization, reflection

大家好，请帮我一个忙，我有许多具有相同结构的自定义类，例如它们都有属性模式，并且它们的对象的属性对我序列化很重要，因为我想从许多类中保存许多这些对象在许多应用程序中作为日志记录系统，所以我不能在一个解决方案中收集所有类来反序列化它们。

如果我的解决方案中有类，我可以使用反射来获取它们的属性和值并在数据表中导出属性或在反序列化之后，将对象转换为该类的类型，但我的问题是如何反序列化对象并获得“类型对象属性的“，名称”和“值”，而我的解决方案中没有它们的类。

在这种情况下，当我想反序列化时，会收到此错误消息：“缺少根元素。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:08:18.343

正如您所提到的，您可以通过反射检查反序列化的对象，并确保除非您以某种方式拥有对象的类型，否则您可以拥有的一切，我的意思是以前在其他程序集中或在同一个程序集中编译。这意味着您毫无疑问需要组装！

但不要失去勇气。通过反射，您可以从对象中检索您想要的任何东西，除了对象类所在的域所必需的东西。例如，您可以拥有 Product 类的反序列化实例，但您无法识别 Product 类在做什么以及它的存在哲学是什么。这些东西被放在与 Customer、Order、ProductLine、Stock 和该域的其他类相关的 Product 域中。

但是再次希望您可以通过为您的类定义一些标准行为来克服这些问题，这些行为由所有域中的所有类实现。

# tcp - Microchip TCP/IP 堆栈 PIC18F 无效数据包 seq/ack 数

> ID：13685790
> 
> 赞同：3
> 
> 时间：2012-12-03T14:56:02.683
> 
> 标签：tcp, microchip, pic18

亲爱的 StackOverflowers 同胞，

我正在做一个项目，使用 Microchip 的 TCP/IP 堆栈在我的定制（和测试）板上实现 PIC18F87J60 上的某些东西。作为测试，我编写了一些代码来建立连接，将其保持 x 秒，然后优雅地关闭它。我已经将它实现为一个有限状态机。我还没有添加发送和接收数据。

但是，我的程序无法建立连接。使用 Wireshark，我注意到我的设备通过 DHCP 成功接收了 IP 地址，并且 ARP 解析正确完成。我暂时忽略了 DNS，因为这也会出错，但我稍后会解决这个问题。我还看到第一个 SYN 数据包由我的设备发送并由服务器按应有的方式响应，但 3 次握手中的 3e 步骤出错了。确认号只是一个随机数，因此服务器会感到困惑并使用 RST 数据包重置连接。然后我的设备使用带有另一个随机序列号的 ACK 数据包确认重置，并且服务器以某种方式接受该数据包。然后服务器尝试使用 SYN 数据包再次建立连接，但我的代码不侦听传入连接，因此连接结束。

这是我的代码：

```
#define THIS_IS_STACK_APPLICATION
#include "TCPIP.h"

APP_CONFIG AppConfig;

ROM char serverAddress[] = "data.zienu.eu"; //unused in this codefile: DNS doesn't work yet
ROM char serverIP[] = "80.69.92.56";
short authenticationPort = 5588;

typedef enum _SOCKET_STATE {
    SOCKET_DONE = 0,
    SETUP_CONNECTION,
    CONNECTING,
    CONNECTED,
    AWAITING_ANSWER,
    SENDING_DATA,
    CLOSE_CONNECTION,
    DISCONNECTING,
    DISCONNECTED
} SOCKET_STATE;

typedef struct _CONNECTION {
    TCP_SOCKET socketID;
    SOCKET_INFO* remoteInfo;
    const char* remoteHostName;
    WORD remotePort;
    SOCKET_STATE state, previousState;
    DWORD timeOut;
    BYTE purpose;
} CONNECTION;

void InitHardware();
void AuthenticateTask();
void FTPDownloadTask();
void HandleTCPConnection(CONNECTION* connection);

ROM BYTE SerializedMACAddress[6] = {MY_DEFAULT_MAC_BYTE1, MY_DEFAULT_MAC_BYTE2, MY_DEFAULT_MAC_BYTE3, MY_DEFAULT_MAC_BYTE4, MY_DEFAULT_MAC_BYTE5, MY_DEFAULT_MAC_BYTE6};
void InitAppConfig(void) {
    AppConfig.Flags.bIsDHCPEnabled = TRUE;
    AppConfig.Flags.bInConfigMode = TRUE;
    memcpypgm2ram((void*)&AppConfig.MyMACAddr, (ROM void*)SerializedMACAddress, sizeof(AppConfig.MyMACAddr));
    AppConfig.MyIPAddr.Val = MY_DEFAULT_IP_ADDR_BYTE1 | MY_DEFAULT_IP_ADDR_BYTE2<<8ul | MY_DEFAULT_IP_ADDR_BYTE3<<16ul | MY_DEFAULT_IP_ADDR_BYTE4<<24ul;
    AppConfig.DefaultIPAddr.Val = AppConfig.MyIPAddr.Val;
    AppConfig.MyMask.Val = MY_DEFAULT_MASK_BYTE1 | MY_DEFAULT_MASK_BYTE2<<8ul | MY_DEFAULT_MASK_BYTE3<<16ul | MY_DEFAULT_MASK_BYTE4<<24ul;
    AppConfig.DefaultMask.Val = AppConfig.MyMask.Val;
    AppConfig.MyGateway.Val = MY_DEFAULT_GATE_BYTE1 | MY_DEFAULT_GATE_BYTE2<<8ul | MY_DEFAULT_GATE_BYTE3<<16ul | MY_DEFAULT_GATE_BYTE4<<24ul;
    AppConfig.PrimaryDNSServer.Val = MY_DEFAULT_PRIMARY_DNS_BYTE1 | MY_DEFAULT_PRIMARY_DNS_BYTE2<<8ul  | MY_DEFAULT_PRIMARY_DNS_BYTE3<<16ul  | MY_DEFAULT_PRIMARY_DNS_BYTE4<<24ul;
    AppConfig.SecondaryDNSServer.Val = MY_DEFAULT_SECONDARY_DNS_BYTE1 | MY_DEFAULT_SECONDARY_DNS_BYTE2<<8ul  | MY_DEFAULT_SECONDARY_DNS_BYTE3<<16ul  | MY_DEFAULT_SECONDARY_DNS_BYTE4<<24ul;

    // Load the default NetBIOS Host Name
    memcpypgm2ram(AppConfig.NetBIOSName, (ROM void*)MY_DEFAULT_HOST_NAME, 10);
    FormatNetBIOSName(AppConfig.NetBIOSName);
}

void InitHardware() {
    /** \var isBoot (LATH0_bit) tells the boot-interrupt handler that boot is busy */
    LATHbits.LATH0 = 1;

    ADCON1 |= 0x0f;         // adc pins as I/0
    CMCON  |= 7;            // Disable comperator

    OSCCON = 0x04;
    OSCTUNE = 0x40; //41 MHz

    /******************************************************************/
    // init========
//    Het TRISA en TRISF register moeten goed zijn ingesteld voor de analoge input:
    PORTA = 0x00;
    TRISA = 0x20;   /* Bit 1 and 2 are used by ethernet LEDS */
    PORTB = 0x00;
    TRISB = 0x00;   /* output mode */
    PORTC = 0x03;   /* LED R en G off */
    TRISC = 0xc0;   /* Bit 6 and 7 are used by UART 1 */
    PORTD = 0x00;   /* used to display ethernetsecond_timer in DEBUG mode*/
    TRISD = 0x00;   /* output mode */
    PORTE = 0x00;
    TRISE = 0x00;   /* output mode */
    PORTF = 0x00;
    TRISF = 0x0E;   /* output mode */
    PORTG = 0x00;
    TRISG = 0x00;
    PORTH = 0x00;
    TRISH = 0x00;

    /* interrupt priorities are possible with microC */
    IPR1bits.ADIP = 0;      //give ADC LOW interrupt priority
    RCONbits.IPEN = 1;      //Enable interrupt priorities
    INTCON2bits.RBPU = 1;   // Disable internal PORTB pull-ups

    INTCONbits.GIEH = 1;
    INTCONbits.GIEL = 1;
}

void interrupt low_priority LowISR(void) {
    TickUpdate();
}

void interrupt HighISR(void) {
}

void HandleTCPConnection(CONNECTION* connection) {
    switch(connection->state) {
        case SETUP_CONNECTION:
            if(!AppConfig.Flags.bInConfigMode) {
                connection->socketID = TCPOpen((DWORD) (PTR_BASE)&serverIP[0], TCP_OPEN_ROM_HOST, connection->remotePort, connection->purpose);

                connection->timeOut = TickGet() + TICK_SECOND * 15;
                connection->previousState = SETUP_CONNECTION;
                connection->state = CONNECTING;
                TCPWasReset(connection->socketID);
            }
            break;
        case CONNECTING:
            if(TCPIsConnected(connection->socketID)) {
                connection->previousState = CONNECTING;
                connection->state = CONNECTED;
                connection->remoteInfo = TCPGetRemoteInfo(connection->socketID);
                connection->timeOut = TickGet() + TICK_SECOND * 10;
            }
            else if(TickGet() >= connection->timeOut) {
                connection->previousState = CONNECTING;
                connection->state = CLOSE_CONNECTION;
            }
            break;
        case CONNECTED:
            if(TickGet() >= connection->timeOut) {
                connection->previousState = CONNECTED;
                connection->state = CLOSE_CONNECTION;
            }
            else if(TCPWasReset(connection->socketID)) {
                connection->previousState = CONNECTED;
                connection->state = CLOSE_CONNECTION;
            }
            break;
        case CLOSE_CONNECTION:
                connection->previousState = CLOSE_CONNECTION;
                connection->state = DISCONNECTING;
                TCPDisconnect(connection->socketID);        //Send a TCP FIN packet
                connection->timeOut = TickGet() + TICK_SECOND * 5;
            break;
        case DISCONNECTING:
            if(TCPIsConnected(connection->socketID)) {
                connection->previousState = DISCONNECTING;
                connection->state = DISCONNECTED;
            }
            else if(TickGet() >= connection->timeOut) {
                TCPDisconnect(connection->socketID);
                TCPDisconnect(connection->socketID);    //Time out: Send a RST packet and proceed
                connection->previousState = DISCONNECTING;
                connection->state = DISCONNECTED;
            }
            break;
        case DISCONNECTED:
            connection->previousState = DISCONNECTED;
            connection->state = SOCKET_DONE;
            break;
        case SOCKET_DONE:
            break;
        default:
            break;
    }
}

void main() {
    InitHardware();
    TickInit();
    InitAppConfig();
    StackInit();

    CONNECTION connection;
    connection.purpose = TCP_PURPOSE_CUSTOM_FTP_CMD;
    connection.remoteHostName = serverIP;
    connection.remotePort = authenticationPort;
    connection.previousState = SOCKET_DONE;
    connection.state = SETUP_CONNECTION;
    while(TRUE) {
        HandleTCPConnection(&connection);
        StackTask();
        StackApplications();
    }
} 
```

这是[Wireshark 日志](http://i45.tinypic.com/15mg0ec.png)的屏幕截图。

在此先感谢，BitJunky

编辑：这是[wireshark 转储文件](http://www.filehosting.org/file/details/399835/wiresharkDump.pcapng)。我过滤了 MAC 地址，因此部分 DHCP 进程未显示在此转储中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:39:30.613

我解决了这个问题。我认为 TCPIP 堆栈与高科技编译器兼容，但似乎并非如此。C18 和 XC8 编译器与我发布的代码完美配合。

Greetz BitJunky

# android - android gridview 图像设置可见性

> ID：13685791
> 
> 赞同：1
> 
> 时间：2012-12-03T14:56:07.577
> 
> 标签：android, android-gridview

在我的 android 应用程序中。我有 gridview。在对网格视图的选择项之一执行操作后，我想将该项的可见性设置为 false。如何执行此操作？

代码如下 -

```
public void onItemClick(AdapterView<?> arg0, View arg1, int no,long lg) {
                // TODO Auto-generated method stub

                AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);
                id=no;
                alert.setTitle("Title");
                alert.setMessage("Message");
                alert.setIcon(flag[no]);

                // Set an EditText view to get user input 
                final EditText input = new EditText(MainActivity.this);
                alert.setView(input);

                alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                  String value = input.getText().toString();
                  // Do something with value!
                  System.out.println("mmmm"+value);
                  if(value.equalsIgnoreCase(country[id])){

                                 // here i want to set item visibility..

                  }
                  else
                    {}
                  }
                });

                alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                  public void onClick(DialogInterface dialog, int whichButton) {
                    // Canceled.
                  }
                });

                alert.show();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T04:27:27.847

您不能在 gridView 中隐藏单个项目

您唯一能做的就是更改传递给 gridView 适配器的项目列表。您可以从列表中删除要隐藏的项目并调用 notifyDataSetChanged 以使 gridView 反映您的更改。

# mono - Mono winforms 在 linux 上看起来不一样

> ID：13685792
> 
> 赞同：2
> 
> 时间：2012-12-03T14:56:08.490
> 
> 标签：mono

我刚刚移植了我的一个 C# .net 程序以在 linux 上使用 mono 运行。从功能上看，它似乎可以工作，但是在 linux 下，该程序看起来非常不同。似乎许多用户控件相对于主窗口已经增长，这导致使用 Visual Studio 构建时不存在许多截断和滚动条。我试过这个：

[http://www.mono-project.com/FAQ:_Winforms](http://www.mono-project.com/FAQ:_Winforms)

但这没有帮助。有没有办法让我的程序在 mono/linux 和 .net/windows 上看起来一样？我意识到我可能需要稍微重新设计表格。

另外，由于我将 .net 项目加载到单声道中，我无法找到表单设计器？如何在我的程序 linux 端进行表单布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:01:21.523

所以这里的问题是，如果你让 WinForms 在 Linux 上看起来像 Windows，人们会抱怨它在 Linux 上看起来不像是原生的，如果你让它看起来在 Linux 上是原生的，人们仍然会抱怨。

也就是说，可能存在导致 UI 显示不正确的错误 - 您应该尝试创建小型测试用例并提交错误（在此过程中，您可能会发现在两个平台上都有效的方法）。

Linux 上没有表单设计器，您需要使用 Visual Studio 来获得设计时支持。

# java - Youtube：在 Java 上流式搜索视频

> ID：13685794
> 
> 赞同：0
> 
> 时间：2012-12-03T14:56:12.453
> 
> 标签：java, youtube, video-streaming, youtube-api

我正在尝试通过 Youtube API for Java 在 youtube 上进行搜索。我想“通过任何播放方式”播放这些视频。我该怎么做？在很多情况下，我已经看到了这个例子：

```
startActivity(new Intent(Intent.ACTION_VIEW, 
Uri.parse("http://www.youtube.com/watch?v=videoid"))); 
```

我该如何使用它？我需要添加更多的 jar 文件吗？还是需要其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:19:27.907

[在https://developers.google.com/youtube/getting_started#player_apis](https://developers.google.com/youtube/getting_started#player_apis)中描述了支持的 YouTube 视频播放方式

如果您正在编写桌面 Java 应用程序，那么您将需要找到某种方法在您的应用程序中嵌入 Web 浏览器并使用嵌入式播放器，或者可能只是强制使用`http://youtu.be/VIDEO_ID`URL 打开单独的浏览器实例。

# asp.net - 每个浏览器窗口或选项卡创建唯一的会话变量

> ID：13685806
> 
> 赞同：0
> 
> 时间：2012-12-03T14:56:46.287
> 
> 标签：asp.net, vb.net, global-variables, webforms

创建基于 .Net Session 的变量时有一点问题。

我知道我可以只使用`Session`扩展并完成它，但我正在寻找更多在单个桌面上的多个浏览器（窗口或选项卡，对于 IE）情况。

目前，我在 Web-App 中声明了一个模块，当我打开两个单独的 IE 窗口时，它们最初会`PageRouting`按预期加载自定义设计，但是一旦我在两个窗口都打开的情况下进入下一步，最后一个要打开是用于应用程序其余部分的设计/逻辑。

### 模块.vb

```
Namespace classes
    Module Globals
        Public Brand As Brand
        Public Test As Test
        Public Results As Results
        Public Primary As String = "#FFFFFF"
        Public Secondary As String = "#FFFFFF"
        Public Terteruary As String = "#FFFFFF"

    End Module
End Namespace 
```

在代码中，我将对象引用为`Globals.Brand`或`Globals.Primary`但在任何一种情况下，同一个桌面可以打开具有不同`PageRouting`地址的同一个网站，它假定最后打开的浏览器窗口。

`Brand`&`Test`变量在事件`Session_Start`中初始化`Globals.asax`。对这些对象的所有引用都是在使用`Globals.<variable>`时使用注释的显式引用。 `Results`在网站执行期间首次使用时初始化。

### 问题

1.  我如何确保每个单独的浏览器窗口都加载了自己独特的会话缓存以供站点使用？

### 更新 - 2012-12-03

这样的设计怎么样？

```
Public Class Class1
  private _sess as HTTPSessionState
  ...
  private readonly property Session as HttpSessionState
    Get
      if _sess is nothing then
        _sess = httpcontext.current.session
      end if
      return _sess
    End Get
  end property
  ...
  public property Primary as string
    Get
      return cstr(session("primary"))
    end get
    Set(value as string)
      session("primary") = value
    end set
  end property
  ...
end class 
```

在主/内容页面级别实例化 Class1？

### 更新 #2 - 2012-12-03

修改了模块，让我知道这是否是可行的会话控制设置

```
Module Globals
    'Dictionary Collection of type (SessionID:String, Quiz:classes.Quiz)
    Public Quizzes As Dictionary(Of String, classes.Quiz)

    Public Property Quiz(session As String) As Quiz
        Get
            Return Quizzes(session)
        End Get
        Set(value As Quiz)
            Quizzes(session) = value
        End Set
    End Property

End Module 
```

## 最终表格 2012-12-10：

模块.vb

```
Module Globals
    'Get/Set a Quiz object into the SessionState.
    Public Property Quiz(sess As HttpSessionState) As Quiz
        Get
            Return CType(sess("quiz"), Quiz)
        End Get
        Set(value As Quiz)
            sess("quiz") = value
        End Set
    End Property

End Module 
```

网页配置

```
<system.web>
...
    <sessionState mode="InProc" cookieless="UseCookies" 
                  regenerateExpiredSessionId="true" timeout="20" 
                  cookieName="ASPNET_Quiz" />
...
</system.web> 
```

上述表单使用属性的索引器方面按预期工作。Havent 有任何用户实例问题。附带说明一下，为了使此功能有效工作，用户必须关闭所有浏览器窗口并打开一个新窗口以清除会话

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:16:38.797

您遇到的问题是 Web 编程中非常常见的问题。一个模块的成员是**静态**的——这意味着在你的应用程序的整个 AppDomain 中有一个它们的实例。访问这些的每个用户都将获得相同的对象。

您可以将模块中的公共变量替换为您编写其 getter 以访问字典中用户特定字段的属性（在编写此 getter 代码时请记住线程安全）。

更简单的解决方案是使用 Session。会话值存储在服务器端并且是用户特定的。客户端发送的唯一内容是会话密钥，如果您使用的是 .Net 身份验证，则可能已经发送。

检查此来源：

[如何让公共变量（在模块中）不在用户之间共享价值](https://stackoverflow.com/questions/11802850/how-to-get-a-public-variable-in-a-module-to-not-share-value-between-users)

# php - 从数据库中检索不一致的数据

> ID：13685809
> 
> 赞同：1
> 
> 时间：2012-12-03T14:56:57.633
> 
> 标签：php, url-rewriting

最近我的网站功能出现问题，我不知道为什么会这样。问题是我无法从数据库中获取几乎任何数据。在某些情况下，可以检索文章的文本，但在大多数情况下不会发生。这是示例。如果我通过此链接打开页面[http://www.positive.rs/racunari?id_tip_komp=55&artikal=20068](http://www.positive.rs/racunari?id_tip_komp=55&artikal=20068)它将打开该页面。但如果我选择任何其他链接，它将打开网上商店的主页。

而在网站的其他部分，我只能在 URL 未重写时打开链接（[http://positive.rs/medija-centar?page=novosti&more=windows-8-pro-upgrade-za-8-hiljada-dinara](http://positive.rs/medija-centar?page=novosti&more=windows-8-pro-upgrade-za-8-hiljada-dinara)）但是使用重写的 URL 我无法让它工作。我已经清除了 .htaccess，但这些尝试都没有成功。

知道如何解决这个问题吗？

# python - 如何为每个请求（或线程）添加不同的代理到scrapy

> ID：13685810
> 
> 赞同：4
> 
> 时间：2012-12-03T14:57:02.173
> 
> 标签：python, proxy, scrapy

主题。我们的蜘蛛跟踪链接并使用“解析页面”函数解析它们，该函数返回项目。在第一次调用 parse_page 之前，如何为每个请求添加不同的代理？

例如，我有 250 个代理池，并希望随机选择每个代理请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T23:06:26.853

您可以为此创建一些中间件。例如：

```
#Start your middleware class
class ProxyMiddleware(object):

# overwrite process request
def process_request(self, request, spider):

    # Set the location of the proxy
    request.meta['proxy'] = "http://123.456.789.012"

    # Use the following lines if your proxy requires authentication
    proxy_user_pass = "USER_AND_PASS"

    # setup basic authentication for the proxy
    encoded_user_pass = base64.encodestring(proxy_user_pass)
    request.headers['Proxy-Authorization'] = 'Basic ' + encoded_user_pass 
```

我相信您可以通过修改上述代码轻松地随机化代理 url、用户名和密码。如果您需要任何其他帮助，请告诉我。

# php - Magento getUrlPath() 不起作用

> ID：13685815
> 
> 赞同：2
> 
> 时间：2012-12-03T14:57:21.553
> 
> 标签：php, magento

我使用 magento 进行了这个多站点/商店设置，但 `$_product->getUrlPath()`. 我有这 2 家商店，当我在主页上显示这两家商店的产品时，它总是向我显示相同的链接

当我在 1 号商店时（对于所有产品，即使它们不是来自 1 号商店）：shop1.com/product-name.html

当我在商店 2 时（这里相同）： shop1.com/product-name.html 而不是 shop2.com/product-name.html

我也试过了`$_product->getProductUrlRewrite()`，`$_product->getProductUrl()` 也试过了，`$_product->getUrlKey()`但什么都没有，它总是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T20:48:59.813

您的产品将返回其 URL 并考虑加载的商店，除非您在中间某处更改了它或专门设置了要从哪个商店获取产品属性。

因此，您需要做的第一件事是通过检查确保您加载了正确的商店

```
Mage::app()->getStore(); 
```

如果返回的商店不是您所期望的，请检查调用初始商店时设置的商店

```
Mage::run(); 
```

在 index.php 中。

如果商店是您想要的商店和/或您只想显示不同商店的产品网址，那么您可以在您的产品型号上通过调用设置您想要使用的商店

```
$_product->setStoreId(YOUR_STORE_ID) 
```

这将设置产品商店，您可以从该商店获取它的 URL。所以，打电话

```
$_product->setStoreId(YOUR_STORE_ID)->getProductUrl(); 
```

将返回所需商店的产品 URL。

# matlab - IPPL 与 Matlab 编译器运行时 (MCR)

> ID：13685817
> 
> 赞同：2
> 
> 时间：2012-12-03T14:57:26.187
> 
> 标签：matlab, matlab-deployment

我正在尝试将应用程序从 Matlab 部署到 JAVA。我使用 Matlab Builder JA 和图像处理工具箱。我使用 MacOSX 上的 deploytool 从 Matlab R2012a 创建了我的 jar 文件。

当我在我的 mac 上使用这个 jar 运行我的 JAVA 程序时，没问题，但是当我尝试在 Linux 或 Windows 系统上运行它时，我收到错误：

未定义的函数或变量“ipplmex”。==> ippl 在 48 处出错 ==> imrotate>useIPP 在 205 处出错

使用 iptsetpref('UseIPPL', false) 停用 IPPL 并不能解决我的问题。

我还在使用 Matlab R2011a 的 Linux 环境中完成了完全相同的工作，它可以在 Linux 上运行，但在 MacOSX 机器上却没有同样的错误。

如果有人在更改操作系统时对这个 IPPL 事情有想法，那就太好了。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:18:40.183

使用 Builder JA 创建的 Java 组件只有在它们不依赖于特定于平台的库（例如您创建的 MEX 文件或图像处理工具箱提供的 IPPL 库）时才是跨平台的。

如果您希望您的 Java 组件使用 IPPL，我认为您需要在 Mac、Linux、Windows 上创建一次 Java 组件，并使用在适当平台上创建的版本。

`ipplmex`是一个（特定于平台的）MEX 文件，由 调用`ippl`，它是一个实用函数，用于检查 IPPL 是否可用。我目前无法检查这一点，但我认为无论您是否已通过命令指定要实际使用 IPPL，它都会检查可用性`iptsetpref`。因此，无论您是否指定应使用 IPPL，仍然会调用特定于平台的 MEX 文件。

同样，我目前无法检查这一点，但如果您对不使用 IPPL 的组件感到满意，您可以尝试修改`ippl`命令以仅返回零（表示 IPPL 不可用）而不尝试执行`ipplmex`. `ippl.m`（在尝试任何修改之前，请确保复制现有文件）。

# javascript - 从 iframe 调用 javascript 函数

> ID：13685821
> 
> 赞同：-1
> 
> 时间：2012-12-03T14:57:40.540
> 
> 标签：javascript, events, html, iframe, slide

> **可能重复：**
> [从 Iframe 到父页面 javascript 函数的 Iframe 函数调用](https://stackoverflow.com/questions/2161388/iframe-function-calling-from-iframe-to-parent-page-javascript-function)

我的主页中有一个 JavaScript 函数。这是一个向上滑动 div“切换”的功能（使用 jquery）。

此主页包含一个嵌入到 div#toggle 中的 iframe。

当我单击属于 iframe 的链接时，我想执行上滑功能。

我在 iframe 中的链接上放置了一个 onclick 事件（以触发在我的主页中声明的函数），但它不起作用。好吧，我并不感到惊讶，但我不知道如何让它发挥作用。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:03:32.480

您可以使用`window.parent`来访问包含页面：

```
window.parent.someToggleFunc(); 
```

请注意，像这样的 iframe 之间的 Javascript 访问受[Same Origin Policy](https://developer.mozilla.org/en-US/docs/Same_origin_policy_for_JavaScript)的约束。

# ios - 交替使用拆分视图控制器和导航控制器作为窗口根视图控制器

> ID：13685828
> 
> 赞同：2
> 
> 时间：2012-12-03T14:57:58.490
> 
> 标签：ios, uinavigationcontroller, uisplitviewcontroller, ipad

我有一个导航控制器，它是我的应用程序的根视图控制器。这是我的主屏幕。我有一个拆分视图控制器，其主视图列出位置，详细视图显示地图上的位置。我想将拆分视图控制器推送到导航控制器，但它抛出一个错误，说拆分视图控制器不能推送到导航控制器，它必须是应用程序的根视图控制器。所以我尝试了一个艰难的方法。

```
MyAppDelegate *myappdelegate= [[UIApplication sharedApplication] delegate];
UISplitViewController * vc= [[UISplitViewController alloc] init];
vs.viewControllers = [NSArray arraywithObjects......
....
myappdelegate.window.rootViewController= vc; 
```

这行得通。它按预期显示没有动画的拆分视图控制器。当我关闭拆分视图控制器时，我会执行相同的步骤。我正在创建一个带有主屏幕笔尖的导航控制器，并再次将其设置为我的应用程序委托的 window.rootviewController。它再次成功加载主屏幕。

但我怀疑这是实现这一目标的正确方法。有没有更符合条件的方法呢？

而且我无法释放拆分视图控制器的子控制器。我在子控制器的发布方法上做了一个断点。它没有被抓住。我假设当我将我的应用程序的根视图控制器设置为导航控制器时，旧的根视图控制器（拆分视图控制器）必须与其子级一起释放。然后我在关闭拆分视图控制器时尝试了下面的代码。

```
UISplitViewController *oldviewcontroller= (UISplitViewController*) myappdelegate.window.rootViewController;
for (UIViewController *child in oldviewcontroller.viewControllers)
{
     [child release];
}

//Setting the navigation controller as window.rootviewController again in here. 
```

此代码引发错误，提示“[UIImageView __viewDidDisappear:]: unrecognized selector sent to instance 0x7d ....”

我认为由于已经发布了视图，因此 viewdidDisappear 事件中没有图像视图。

简而言之，我的问题是我是否使用正确的方法来实现这一目标？如果是这样，我怎样才能成功释放所有子视图控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:07:56.880

我终于找到了办法。我可能发现了错误。我所做的是砍掉我坐的树枝。我正在释放我当前所在的视图控制器:) 当调用 viewdidDisappear 时，没有这样的视图控制器。因为我已经把它扔到太空了。下面是我的工作步骤。我希望它对某人有用。但我不能忍受想到苹果可能会拒绝我的应用程序。我希望找到一个合适的方法。

**这是我交替使用拆分视图控制器和导航控制器作为窗口根视图控制器的最终工作方式。**

首先，我在 AppDelegate 界面中定义了 NavigationController 和 SplitViewController 属性。

```
AppDelegate.h
@property (assign,nonatomic) UINavigationController * NC;
@property (assign,nonatomic) UISplitViewController *SVC; 
```

其次，我在 AppDelegate didFinishLaunch 事件上分配了新创建的 NC。

```
AppDelegate.m
//Creating my main screen controller
//Creating my navigation controller with my view controller instance. Then
self.NC= my_navigation_controller;
self.window.rootViewController= self.NC; 
```

第三次创建 splitview 控制器并设置为应用程序的根视图控制器

```
 MyMainScreen.m
 -(void) OpenSplit()
 {
      //Creating my master view controller of SVC
      //Creating my detail view controller of SVC
      //Creating my SVC;
      AppDelegate * app_delegate= [[UIApplication sharedApplication] delegate];
      app_delegate.SVC= newly created my SVC;
      app_delegate.window.rootViewController= app_delegate.SVC;          
 } 
```

第四，在 SVC 详细视图的 viewDidLoad 事件中释放未使用的 NC。

```
MyDetailView.m
- (void) viewDidLoad()
{
    ...
    AppDelegate * app_delegate= [[UIApplication sharedApplication] delegate];
    app_delegate.NC= nil;  //i dont need it now. i am releasing. Releasing Navigation Controller release as well child controllers. I learned with testing.
} 
```

五是管理关闭拆分视图功能。我在DetailView的NavigationBar上使用了UIBarButton。

```
MyDetailView.m
-(void) closeSplitView
{
     //Creating navigation controller with my main screen view controller
     AppDelegate * app_delegate= [[UIApplication sharedApplication] delegate];
     app_delegate.NC= newly_created_NC;
     app_delegate.window.rootViewController= appdelegate.NC;
} 
```

第六，在主屏 viewDidLoad 事件中处理未使用的拆分视图控制器。

```
 MyMainScreen.m
 -(void) viewDidLoad
 {
    AppDelegate * app_delegate= [[UIApplication sharedApplication] delegate];
    app_delegate.SVC= nil; //I am releasing it because i am working with NC now.
 } 
```

# jquery - jquery如何从一个类中添加多个节点的值，并输出最终值？

> ID：13685829
> 
> 赞同：3
> 
> 时间：2012-12-03T14:58:01.013
> 
> 标签：jquery, sum, add

[http://jsfiddle.net/7Upk7/](http://jsfiddle.net/7Upk7/)

我只是尝试一些如何添加多个值，并将答案附加到指定节点中。

因此，例如，我正在尝试添加所有值`td.add-hour`并输出答案`td.sum-hour`

```
$('td.add-hour').each(function() {
    sum += Number($(this).val());
});

$('td.sum-hour').html(sum);​ 
```

但我真的很难找到一个简单的工作解决方案。任何人都可以请教一个 jquery 解决方案。

请参阅下面的小提琴与许多尝试之一。

[http://jsfiddle.net/7Upk7/](http://jsfiddle.net/7Upk7/)

提前致谢。乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:00:40.683

几件事：

`sum`永远不会被初始化。首先，写：`var sum = 0;`

`.val`是获取输入的值。你想用`.text()`.

见：http: [//jsfiddle.net/7Upk7/2/](http://jsfiddle.net/7Upk7/2/)

# php - 如果列不是自动增量，则显示列

> ID：13685830
> 
> 赞同：0
> 
> 时间：2012-12-03T14:58:06.283
> 
> 标签：php, mysql, sql

我想要查询应该返回没有 auto_increment 的列。

```
SHOW COLUMNS FROM test - This Query Return the following datas

Field   Type    Null    Key Default Extra
id  int(11) NO  PRI NULL    auto_increment
content text    NO      NULL 
```

我想要查询应该返回不是 auto_increment 的列

前任：

```
SHOW COLUMNS FROM test WHERE `Extra` != 'auto_increment'
Field   Type    Null    Key Default Extra
content text    NO      NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:08:30.357

您可以查询[`INFORMATION_SCHEMA.COLUMNS`](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)：

```
SELECT  column_name
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name = 'test'
 AND  extra = 'auto_increment'; 
```

# string - 替换列表的一部分

> ID：13685832
> 
> 赞同：1
> 
> 时间：2012-12-03T14:58:17.673
> 
> 标签：string, r

有没有一种简单的方法可以用另一个字符串列表替换字符向量中的字符串子列表？就像是

```
gsub(c("a","b"),c("z","y"),a) 
```

或者

```
replace(a,c("a","b"),c("z","y")) 
```

不幸的是，这两个都不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T15:17:52.870

如果您只是替换单个字符，那么`chartr`可能正是您要查找的内容：

```
> chartr( "ab", "zy", "abababa")
[1] "zyzyzyz" 
```

这个[问题](https://stackoverflow.com/questions/13581465/improving-performance-of-a-loop-with-succeeding-string-replacements)可能也很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:10:01.617

一个简单的循环 using`gsub`就足够了，并且在大多数情况下可能会执行得很好：

```
a <- c("x","y")
b <- c("a","b")
vec <- "xy12"

 mgsub <- function(pattern,replacement,x,...){
    for (i in seq_along(pattern)){
        x <- gsub(pattern = pattern[i],replacement = replacement[i],x,...)
    }
    x
 }

> mgsub(a,b,vec)
[1] "ab12" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T16:52:07.397

我可以发誓在 R 中有一个递归应用，确实​​有，但它做了一些非常不同的事情。

无论如何，这是一个：

```
#' Iteratively (recursively) apply a function to its own output
#' @param X a vector of first arguments to be passed in
#' @param FUN a function taking a changing (x) and an initial argument (init)
#' @param init an argument to be "worked on" by FUN with parameters x[1], x[2], etc.
#' @return the final value, of the same type as init
#' @example
#' vec <- "xy12"
#' replacementPairs <- list( c("x","a"), c("y","b") )
#' iapply( replacementPairs , FUN=function(repvec,x) {
#'   gsub(repvec[1],repvec[2],x)
#' }, init=vec )
iapply <- function(X, FUN, init, ...) {
  res <- init
  for(x in X) {
    res <- FUN(x, res, ...)
  }
  res
} 
```

该示例返回`"ab12"`.

# jquery - datarow css 类 - 确定表中返回的行数 - 澄清

> ID：13685834
> 
> 赞同：0
> 
> 时间：2012-12-03T14:58:21.160
> 
> 标签：jquery, html, css

我对 html、css、jquery 和 javascript 有点陌生

我试图查看根据搜索返回了多少行。下面是我正在使用的 javascrip 中的代码。

**重点笔记**

表名：searchResultsTable

```
var numberOfrows = $("#searchResultsTable tr").length; 
```

**问题**

该表实际上返回一行，但是当我尝试打印时，`numberofrows` 它打印为 2 。不知道为什么。根据报告的数量，我必须调用不同的函数。

我检查了代码以查看是否有任何隐藏行但什么也没有。任何人都可以为我澄清这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:08:33.613

在 SvenBieder 的帮助下。当您尝试计算表中的行数时，也会计算第一行中的表头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:53:08.740

问题是您的表头包含在第一行。这意味着 .length 返回标题行的数据行数量 +1。

# vb.net - 在脚本中启动应用程序并在按住 Ctrl 键的同时执行应用程序

> ID：13685836
> 
> 赞同：2
> 
> 时间：2012-12-03T14:58:26.557
> 
> 标签：vb.net, powershell, batch-file, dos

我想要一个脚本来自动启动我的一个应用程序，但是由于程序的设置，必须在按住 Ctrl 键的同时启动应用程序（直到应用程序完全加载为止）正常工作。

现在，我知道在批处理中我们可以做这样的事情

开始 "" "C:\Program Files\Microsoft Office\Winword.exe" "D:\Docs\demo.txt"

但是，我怎样才能实现按住 Ctrl 键？

如果您知道任何其他可以执行此操作的脚本类型，例如 VB 或 PowerShell，我也愿意尝试。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:10:33.663

参数被拾取：

```
My.Application.CommandLineArgs 
```

关于 ctrl 键，我强烈建议您更改软件的工作方式，因为它相当愚蠢。

如果您绝对必须按下 ctrl 键，我建议您查看以下内容：[http ://tksinghal.blogspot.se/2011/04/how-to-press-and-hold-keyboard-key.html](http://tksinghal.blogspot.se/2011/04/how-to-press-and-hold-keyboard-key.html)

# apache - Apache solr - 更像这个分数

> ID：13685839
> 
> 赞同：1
> 
> 时间：2012-12-03T14:58:28.943
> 
> 标签：apache, solr

我有一个包含约 1000 个文档的小索引，只有两个字段： - id（字符串） - 内容（text_general）

我注意到，当我通过 id 进行 MLT 搜索类似内容时，原始文档（其中 id 是搜索到的 id）的得分为 5.241327。有 1:1 的重复文档，对于重复的内容，它返回分数 = 1.5258181。为什么？为什么 100% 重复时不是 5.241327。

另一个问题是我可以通过在查询中传递一些文本以任何方式按内容获取相似性文档。例子：

```
/mlt/?q=content:Some encoded long text&mlt.fl=content 
```

我正在尝试检查是否上传了类似的内容，并且必须在新内容上传时执行检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:08:19.790

尝试一些不同的参数可能是值得的。我也只在一个字段上使用 MLT，我使用以下参数：

'mlt.boost'：'true'，'mlt.fl'：'my_field_name'，'mlt.maxqt'：1000，'mlt.mindf'：'0'，'mlt.mintf'：'0'，'qt '：'mlt'，'行'：'10'

有关参数的说明，请参阅[http://wiki.apache.org/solr/MoreLikeThis](http://wiki.apache.org/solr/MoreLikeThis)。我认为使用小的索引 mintf 可能很重要，我看到默认的 mintf（词频）是 2，所以我假设 ID 只是一个词，所以这可能被忽略了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T11:27:54.867

首先，Solr More-Like-This 是如何工作的？

1.  执行常规 Solr 查询（例如“?q=content:Somecoded long text&.....”。
2.  对于上述查询返回的每个文档，More-Like-This 进行 More like this 查询...所以，第一个结果集“响应”，就像任何 Solr 查询结果集一样。More-Like-This 出现在下面并以类似的内容开头（Json 格式）： "moreLikeThis":{ "57375":{"numFound":18155,"start":0,"docs":["

有关更多类似此算法的说明，请阅读：http: [//blog.brattland.no/node/18](http://blog.brattland.no/node/18) 和：[http ://cephas.net/blog/2008/03/30/how-morelikethis-works- in-lucene/](http://cephas.net/blog/2008/03/30/how-morelikethis-works-in-lucene/)

如果您还没有解决问题，请告诉我，我将指导您完成。

# ios - iOS 日历查看日组件

> ID：13685843
> 
> 赞同：1
> 
> 时间：2012-12-03T14:58:36.650
> 
> 标签：ios, calendar, components, icalendar

我正在寻找一个组件，它允许我像在 iCal 中一样管理日历每日视图。到目前为止，我发现[https://github.com/muhku/calendar-ui](https://github.com/muhku/calendar-ui) 问题是缺少一种通过点击创建事件的简单方法。编写一个通过点击创建事件的过程，同时管理事件视图的拖动和扩展可能非常耗时。您知道是否有任何实现此功能的组件（开源或商业）在某处可用？我不认为 iOS 提供了类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-08T17:03:21.350

到目前为止我发现的最好的一个是：[FSCalendar](https://github.com/WenchaoD/FSCalendar)

# c - 在C中的结构指针之间转换

> ID：13685848
> 
> 赞同：15
> 
> 时间：2012-12-03T14:58:52.043
> 
> 标签：c, casting

请考虑以下代码。

```
typedef struct{
    int field_1;
    int field_2;
    int field_3;
    int field_4;

    uint8_t* data;
    uint32_t data_size;
} my_struct;

void ext_function(inalterable_my_struct* ims, ...); 
```

我想允许`ext_function`（由第三方编写）`field_3`仅`field_4`在`my_struct`. 所以我做了以下事情：

```
typedef struct{
    const int field_1;
    const int field_2;
    int field_3;
    int field_4;

    const uint8_t* data;
    const uint32_t data_size;
} inalterable_my_struct;

void ext_function(inalterable_my_struct* ims, ...); 
```

`my_struct`在调用之间和`inalterable_my_struct`调用之前转换指针是否安全`ext_function`（如下所示）？

```
void call_ext_function(my_struct* ms){
    inalterable_my_struct* ims = (inalterable_my_struct*)ms;
    ext_function(ims, ...);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T15:04:49.403

我不认为这是一个好主意。

被调用的函数总是可以抛弃任何`const`:ness，并根据需要修改数据。

如果您可以控制调用点，则最好创建一个副本并使用指向该副本的指针调用该函数，然后将您关心的两个字段复制回：

```
void call_ext_function(my_struct* ms)
{
    my_struct tmp = *ms;
    ext_function(&tmp, ...);
    ms->field_3 = tmp.field_3;
    ms->field_4 = tmp.field_4;
} 
```

更干净，除非您每秒执行数千次，否则性能损失应该很小。

如果函数触及它，您可能也必须伪造基于指针的数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:14:35.280

根据 C99 标准，`struct`即使两个 s 的声明相同，它们也不会具有兼容的类型。从第 6.7.7.5 节：

> 示例 2 在声明之后

```
typedef struct s1 { int x; } t1, *tp1;
typedef struct s2 { int x; } t2, *tp2; 
```

> type`t1`和指向的类型`tp1`是兼容的。Type`t1`也与 type 兼容`struct s1`，但与类型`struct s2`、、 或`t2`所指向的类型不兼容。`tp2``int`

此外，具有不同限定符的两种类型不被认为是兼容的：

> 对于要兼容的两个限定类型，两者都应具有兼容类型的相同限定版本；说明符或限定符列表中类型限定符的顺序不影响指定的类型。

一种更简洁的方法是`struct`完全隐藏你的，用一个不起眼的句柄（`typedef`顶部的一个`void*`）替换它，并提供用于操作`struct`. 这样你就可以完全控制你的结构`struct`：你可以随意重命名它的字段，尽可能多地改变布局，改变字段的底层类型，以及做你通常做的其他事情避免当`struct`您的客户知道内部布局时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T16:04:06.630

我认为这不是一个好主意，因为很难跟踪结构是否已转换（尤其是在代码很大的情况下）。也将它转换为 const 并不能保证它不会被转换为`non-const structure`以后。

unwind 提供的解决方案是一个非常好的解决方案。另一种（更明显）的解决方案是将结构分成两个较小的部分。

```
typedef struct{
    const int field_1;
    const int field_2;
    const uint8_t* data;
    const uint32_t data_size;
} inalterable_my_struct;

typedef struct{
    int field_3;
    int field_4;
} my_struct;

void ext_function(const inalterable_my_struct* const ims, my_struct* ms ...); 
```

我在上面的调用中也使指针保持不变，但这不是必需的。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-03T15:10:12.650

即使标准没有说明它，它也可能适用于大多数编译器。如果你真的需要的话，你甚至可以用工会做一些更便携的事情。除非它不会改变任何东西。

这就是为什么它不会改变任何东西的原因：

```
$ cat foo.c
struct foo {
    const int a;
    int b;
};

void
foo(struct foo *foo)
{
    foo->a = 1;
}
$ cc -c foo.c
foo.c: In function ‘foo’:
foo.c:9: error: assignment of read-only member ‘a’
$ cc -Dconst= -c foo.c
$ 
```

# java - 使用套接字和 AsyncTask 强制关闭

> ID：13685850
> 
> 赞同：0
> 
> 时间：2012-12-03T14:58:52.297
> 
> 标签：java, android, sockets, tcp, android-asynctask

你好堆栈的人......

请在下面查看我的课程代码和我的 LogCat...

尝试连接时，我正在用力关闭。如果有人可以帮助我弄清楚为什么会非常感激。

基本上代码正在做的是：

1.  从意图中获取 IP 地址。
2.  使用 32 端口连接到 IP
3.  然后发送一个命令，等待响应并发送另一个命令。
4.  在我们发送 2 个命令后，我应该得到“SNX_COM>”的响应
5.  建立连接后，我希望连接保持打开状态，以便在单击按钮时发送特定命令。

请帮忙 ：）

```
package com.smarte.smartipcontrol;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;

public class IPControl extends Activity {

private Socket socket;
private String serverIpAddress = "com.smarte.smartipcontrol.ACTU_IP";
private static final int REDIRECTED_SERVERPORT = 32;
public PrintWriter out;
public BufferedReader in;
public String data;
public Object pd;

public void getModel(View view) {
    try {
        out.println("[m\r\n");
        //System.out.print("root\r\n");
        while(!in.ready());
        String textStatus = readBuffer();

    } catch(IOException e) {}
}

@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);

   setContentView(R.layout.act_ipcontrol);

   try{   

   this.pd = ProgressDialog.show(this, "Loading..", "Please Wait...", true, false);
    new AsyncAction().execute();

   }catch (Exception e) {
       e.printStackTrace();
   }

   }

private class AsyncAction extends AsyncTask<String, Void, String> {
   protected String doInBackground(String... args) { 
   try {
 InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
 socket = new Socket(serverAddr, REDIRECTED_SERVERPORT);
} catch (UnknownHostException e1) {
 e1.printStackTrace();
} catch (IOException e1) {
 e1.printStackTrace();
}
try {
 out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true); in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
 while (! in .ready());
 readBuffer();
 out.println("root\r\n");
 //System.out.print("root\r\n");
 while (! in .ready());
 readBuffer();
 out.println("root\r\n");
 //System.out.print("root\r\n");
 while (! in .ready());
 String msg = "";

while ( in .ready()) {
 msg = msg + (char) in .read();
}
} catch (IOException e) {}

       return null;//returns what you want to pass to the onPostExecute()
   }

   protected void onPostExecute(String result) {

   //resultis the data returned from doInbackground

       IPControl.this.data = result;

       if (IPControl.this.pd != null) {
           ((Dialog) IPControl.this.pd).dismiss();
       }
    }

}

private String readBuffer() throws IOException {
    String msg = "";

    while(in.ready()) {
        msg = msg + (char)in.read();
    }
    //System.out.print(msg);
    if(msg.indexOf("SNX_COM> ") != -1) return msg.substring(0, msg.indexOf("SNX_COM> "));
    else return msg;
}

} 
```

日志猫.......

```
12-03 15:39:56.346: E/AndroidRuntime(2697): FATAL EXCEPTION: AsyncTask #5
12-03 15:39:56.346: E/AndroidRuntime(2697): java.lang.RuntimeException: An error occured while executing doInBackground()
12-03 15:39:56.346: E/AndroidRuntime(2697):     at android.os.AsyncTask$3.done(AsyncTask.java:299)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.lang.Thread.run(Thread.java:856)
12-03 15:39:56.346: E/AndroidRuntime(2697): Caused by: java.lang.NullPointerException
12-03 15:39:56.346: E/AndroidRuntime(2697):     at com.smarte.smartipcontrol.IPControl$AsyncAction.doInBackground(IPControl.java:71)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at com.smarte.smartipcontrol.IPControl$AsyncAction.doInBackground(IPControl.java:1)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-03 15:39:56.346: E/AndroidRuntime(2697):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-03 15:39:56.346: E/AndroidRuntime(2697):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:04:08.800

我认为你的问题在这里：

```
 InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
 socket = new Socket(serverAddr, REDIRECTED_SERVERPORT); 
```

我找不到你`serverIpAddress`的分配位置，因此你得到 NullPointerException。

# php - cakephp 将 ACL 添加到功能登录系统

> ID：13685851
> 
> 赞同：2
> 
> 时间：2012-12-03T14:58:59.523
> 
> 标签：php, cakephp, authentication, acl

我以本教程为基础[http://www.jamesfairhurst.co.uk/posts/view/creating_an_admin_section_with_cakephp_updated](http://www.jamesfairhurst.co.uk/posts/view/creating_an_admin_section_with_cakephp_updated)

并且目前为我的应用程序提供了一个功能强大且内容丰富的管理部分。

由于缺乏远见，我没有考虑到需要能够登录到他们自己的主页的普通用户，他们可以在其中查看预订等。

我有一个适当的数据库设置，并包含一个“角色”字段进行身份验证。我也遵循了 cakePHP 自己的 'auth' 示例，但是未能在不引发各种错误的情况下实现它们，在这个阶段我不想过多地改变登录系统的结构，那种事情可能会变成头疼快！！

我已与本教程的原作者交谈，他同意添加到 user_controller.php 文件中的一些简单逻辑就足够了。

基本上我需要类似这样的东西：“如果用户 == 'user' THEN 重定向到 'user_index.php' 简单地说。下面是 user_controller.php 的当前登录函数

```
function login() {
        if(!empty($this->data)) {
            // unset unrequired validation rules
            unset($this->User->validate['username']['check_username_exists']);

            // validate form
            $this->User->set($this->data);
            if($this->User->validates()) {
                // update Last Login date
                $this->User->id = $this->User->_user['User']['id'];
                $this->User->saveField('last_login',date("Y-m-d H:i:s"));

                // save User to Session and redirect
                $this->Session->write('User', $this->User->_user);
                $this->Session->setFlash('You have successfully logged in.','default',array('class'=>'flash_good'));
                $this->redirect(array('action'=>'index','admin'=>TRUE));
            }
        }
    } 
```

所有验证都在 user.php 模型中处理，app_controller.php 中有一些逻辑来重定向身份验证，它包含在下面；

app_controller.php

```
class AppController extends Controller {
    // class variables
    var $_User = array();

    /**
     * Before any Controller action
     */
    function beforeFilter() {
        // if admin url requested
        if(isset($this->params['admin']) && $this->params['admin']) {
            // check user is logged in
            if( !$this->Session->check('User') ) {
                $this->Session->setFlash('You must be logged in for that action.','flash_bad');
                $this->redirect('/login');
            }

            // save user data
            $this->_User = $this->Session->read('User');
            $this->set('user',$this->_User);

            // change layout
            $this->layout = 'admin';
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T21:27:58.093

我在我的应用程序中遇到了类似的问题。在我的 User 模型中，我创建了一个 getRole() 方法，它只是将角色从数据库中提取出来，然后我使用一条`switch`语句将用户重定向到正确的控制器。

作为一种不同的方法，您可以在`isAdmin`您的用户表中添加一列（默认为 0，1 表示管理员）。假设已经没有太多管理员，您可以手动设置管理员。在您的控制器中，您只需要相应地检查字段和重定向。

# php - 具有方向 KML 的 LinearRing

> ID：13685853
> 
> 赞同：0
> 
> 时间：2012-12-03T14:59:05.503
> 
> 标签：php, kml

我有一个包含点（坐标）和航向（方向/方位角）的数据库。我想在 kml 中创建指向标题方向的饼形扇区（LinearRing）。有人对如何使用 php 构建它有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:37:19.497

好吧，php不是我的强项。这是伪代码，可能会对您有所帮助（*）。

“在半径为 r 的球体上，在指定方位角和范围内计算大圆上的点。PHI、LAMBDA、PHI0、LAMBDA0 和 AZ 是以弧度表示的角度，而 RNG 是与 R 具有相同单位的距离。”

```
INPUT: phi0, lambda0, az, rng, r
OUTPUT: phi,lambda 

rng = rng / r; // Convert the range to an angle on the sphere (in radians).

epsilon = 1.7453e-07; // Set tolerance
if(phi0 >= pi / 2 - epsilon) // starting at north pole
    az = pi; 
if(phi0 <= epsilon - pi / 2) // starting at south pole
    az = 0; 

// Calculate coordinates of great circle end point using spherical trig.
phi = asin( sin(phi0) * cos(rng) + cos(phi0) * sin(rng) * cos(az) );

lambda = lambda0 + atan2( sin(rng) * sin(az) , cos(phi0) * cos(rng) - sin(phi0) * sin(rng) * cos(az) ); 
```

*phi0*和*lambda0*是您的初始坐标，而*az*是您的航向。改变*az* +/- 一定范围以获得点，这些点形成饼图的圆段。其余的应该是直截了当的。

(*) 来源： http: [//mind.cog.jhu.edu/courses/680/octave/Installers/Octave/Octave.OSX10.6/Applications/MATLAB_R2009b.app/toolbox/map/map/private/greatcirclefwd.m](http://mind.cog.jhu.edu/courses/680/octave/Installers/Octave/Octave.OSX10.6/Applications/MATLAB_R2009b.app/toolbox/map/map/private/greatcirclefwd.m)

# c#-4.0 - 如何将只读ppt保存为pdf？

> ID：13685854
> 
> 赞同：2
> 
> 时间：2012-12-03T14:59:04.310
> 
> 标签：c#-4.0, asp.net-4.0, office-interop

当我尝试将只读 ppt/pptx 保存为 pdf 时，我得到了如下所示的 msg

![在此处输入图像描述](../Images/521dbde25e04d0da31857d9a5ad2beb3.png)

下面是我的代码：

```
 Microsoft.Office.Interop.PowerPoint.Application pptApplication = new Microsoft.Office.Interop.PowerPoint.Application();
        pptApplication.DisplayAlerts = PpAlertLevel.ppAlertsNone;
        Microsoft.Office.Interop.PowerPoint.Presentation pptPresentation = pptApplication.Presentations.Open("E:\\Share Box\\data.pptx", MsoTriState.msoTriStateMixed,
        MsoTriState.msoFalse, MsoTriState.msoFalse);

        string temp = pptPresentation.ReadOnly.ToString();

        pptPresentation.SaveAs("E:\\Share Box\\"+DateTime.Now.Second.ToString(), PpSaveAsFileType.ppSaveAsPDF, MsoTriState.msoTrue);

        pptPresentation.Close();

        Marshal.FinalReleaseComObject(pptPresentation);
        pptPresentation = null;
        pptApplication.Quit();

        Marshal.FinalReleaseComObject(pptApplication);
        pptApplication = null;

        GC.Collect(); 
```

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:04:58.163

我试过这段代码，它工作正常。为此，我使用从 [http://www.microsoft.com/en-in/download/details.aspx?id=3508下载的互操作程序集](http://www.microsoft.com/en-in/download/details.aspx?id=3508)

也请看这个

[http://support.microsoft.com/kb/873433](http://support.microsoft.com/kb/873433)

# iis-7 - 阻止 IIS 7.5 将不存在的页面传递给 Coldfusion

> ID：13685856
> 
> 赞同：2
> 
> 时间：2012-12-03T14:59:06.310
> 
> 标签：iis-7, coldfusion

Coldfusion 当前正在处理 *.cfm 和 *.html 页面。如果我请求一个不存在的页面，例如 www.example.com/sadfasdfasd.cfm，IIS 仍会将请求传递给 Coldfusion 处理程序，而不是定向到 IIS 404 错误页面。Coldfusion 处理程序以 Debugger 页面响应，指出找不到文件。在将文件传递给处理程序之前，如何让 IIS 检查文件是否存在。如果它不存在，我希望它显示 404 错误页面。目前我的错误页面设置为提供本地和远程的详细错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T21:11:23.953

尝试将**httpErrors**条目添加到您的根 web.config 文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
    <httpErrors errorMode="Custom">
            <remove statusCode="404" subStatusCode="-1" />
            <error statusCode="404" path="404.html" responseMode="File" />
        </httpErrors>
    </system.webServer>
</configuration> 
```

您的自定义 404.html 页面也应该位于根文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:08:21.003

如果您进入 IIS 并关闭详细的错误消息，它将显示 IIS 错误，而不是让 Coldfusion 处理它。

如果您有权访问 IIS 管理器，请转到站点 > 错误页面 > 右侧的“编辑功能”。您可能也可以将等效代码放入您的 web.config 文件中来处理此问题。

您可以根据需要选择任何其他选项。

请注意，这也是允许您从coldfusion 的调试器中查看coldfusion 错误的功能。

# android - 在同一活动的布局之间切换：可能但推荐？

> ID：13685857
> 
> 赞同：0
> 
> 时间：2012-12-03T14:59:06.160
> 
> 标签：android, android-layout

我想知道当你想显示另一个屏幕时，为什么人们一直建议开始新的活动？

假设我想显示一个带有标签和 edit_text 的屏幕来询问用户名，然后是另一个类似的屏幕来询问年龄，然后是另一个屏幕来显示输入的数据并要求确认。

我这样做了：

```
main_layout.xml:   has a button let's say mainButton, onClick="startRegistration"
name_layout.xml:      edittext asking for name
age_layout.xml:        edittext asking for age
confirm_layout.xml:    display info + button to confirm 
```

并在：

```
public class MainActivity extends Activity {

onCreate(...) {
   ...
   setContentView(R.layout.main_layout);
}

public void startRegistration(View clickedButton) {
   setContentView(R.layout.name_layout);
}
..
} 
```

...依此类推，所有按钮处理程序都是主类中的公共 void 方法，每个方法都包含`setContentView()`下一个布局作为参数。

我觉得这是一种糟糕的编程风格，但它工作得非常好。这样做可以吗？如果没有，还有其他简单的方法吗？为这些事情开始一项新活动对我来说真的很愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:12:55.713

If you code different layouts for the same type of screen then its not really an ideal idea. The better idea is to have the same layout and point to the same layout from the classes where the layouts are the same. In the screen where you want to have an extra/less control or different control then just have unique IDs to such controls.

Refer the controls from their IDs and you will have a single layout file. Writing different layout classes where the controls are same will pave way to code repetition and hence is not an ideal way of coding.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:06:06.320

通常，您将“活动”组合在一个活动中。对您而言，注册使用多个屏幕，但彼此链接。我建议将 1 Activity 与 ViewFlipper 一起使用。

为所有人拥有 1 个活动将搞砸用户的导航。Back 键必须特别处理。“如果返回键，设置此内容，否则设置此内容等”

# sum - 在 ireport 中汇总列值 - 未找到变量错误

> ID：13685862
> 
> 赞同：0
> 
> 时间：2012-12-03T14:59:39.243
> 
> 标签：sum, ireport, xmltable

我正在使用变量对单列中的所有值（垂直）求和，我在代码中声明如下，但是当我运行代码时，它会给出错误：

. 未找到变量。

我在摘要带中打印此表，因为当我在详细信息带中声明它时，许多页面都在重复表中重复。

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="intra_fho" language="groovy" pageWidth="648" pageHeight="792" columnWidth="608" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="9a93052d-913c-448c-a2bd-956da96ec037">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <style name="table 2">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <style name="table 3">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <style name="table 4">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 4_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 4_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <style name="table 5">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 5_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 5_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 5_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
        <conditionalStyle>
            <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
            <style backcolor="#EFF7FF"/>
        </conditionalStyle>
    </style>
    <subDataset name="New Dataset 1" uuid="585047d6-61a7-4b62-9dae-49e3ad3b2855">
        <queryString>
            <![CDATA[SELECT
     intra_fho_final.`FirstName` AS intra_fho_final_FirstName,
     intra_fho_final.`DoctorID` AS intra_fho_final_DoctorID,
     intra_fho_final.`for_doctor` AS intra_fho_final_for_doctor,
     intra_fho_final.`by_doctor` AS intra_fho_final_by_doctor,
     intra_fho_final.`Net_Services_by_Physicians` AS intra_fho_final_Net_Services_by_Physicians,
     intra_fho_final.`Value_of_Net_Services` AS intra_fho_final_Value_of_Net_Services
FROM
     `intra_fho_final` intra_fho_final]]>
        </queryString>
        <field name="intra_fho_final_FirstName" class="java.lang.String"/>
        <field name="intra_fho_final_DoctorID" class="java.lang.Integer"/>
        <field name="intra_fho_final_for_doctor" class="java.math.BigDecimal"/>
        <field name="intra_fho_final_by_doctor" class="java.math.BigDecimal"/>
        <field name="intra_fho_final_Net_Services_by_Physicians" class="java.math.BigDecimal"/>
        <field name="intra_fho_final_Value_of_Net_Services" class="java.math.BigDecimal"/>
    </subDataset>
    <queryString language="SQL">
        <![CDATA[SELECT
     intra_fho_final.`FirstName` AS intra_fho_final_FirstName,
     intra_fho_final.`DoctorID` AS intra_fho_final_DoctorID,
     intra_fho_final.`for_doctor` AS intra_fho_final_for_doctor,
     intra_fho_final.`by_doctor` AS intra_fho_final_by_doctor,
     intra_fho_final.`Net_Services_by_Physicians` AS intra_fho_final_Net_Services_by_Physicians,
     intra_fho_final.`Value_of_Net_Services` AS intra_fho_final_Value_of_Net_Services
FROM
     `intra_fho_final` intra_fho_final]]>
    </queryString>
    <field name="intra_fho_final_FirstName" class="java.lang.String"/>
    <field name="intra_fho_final_DoctorID" class="java.lang.Integer"/>
    <field name="intra_fho_final_for_doctor" class="java.math.BigDecimal"/>
    <field name="intra_fho_final_by_doctor" class="java.math.BigDecimal"/>
    <field name="intra_fho_final_Net_Services_by_Physicians" class="java.math.BigDecimal"/>
    <field name="intra_fho_final_Value_of_Net_Services" class="java.math.BigDecimal"/>
    <variable name="for_doctor" class="java.math.BigDecimal" incrementType="Column" calculation="Sum">
        <variableExpression><![CDATA[$F{intra_fho_final_for_doctor}]]></variableExpression>
    </variable>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="49" splitType="Stretch">
            <staticText>
                <reportElement uuid="8a5981f1-7059-4834-ab1b-c0b1e23cba44" x="201" y="10" width="206" height="28"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font fontName="Times New Roman" size="24"/>
                </textElement>
                <text><![CDATA[Intra-FHO Report]]></text>
            </staticText>
        </band>
    </title>
    <summary>
        <band height="57" splitType="Stretch">
            <componentElement>
                <reportElement uuid="30b3af0e-8160-460f-b1c9-e3d5bce80cbe" key="table 5" style="table 5" stretchType="RelativeToBandHeight" x="56" y="6" width="496" height="44" isRemoveLineWhenBlank="true" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="New Dataset 1" uuid="79799bc4-801b-440c-a09b-bc24c0542297">
                        <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                    </datasetRun>
                    <jr:column uuid="47b87b0f-9b0a-405a-8bec-ff898a66036f" width="90">
                        <jr:columnHeader style="table 5_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="f7a46f3d-2297-487b-88e6-9150a1b1eca2" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[First Name]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30" rowSpan="1">
                            <box>
                                <pen lineWidth="0.5"/>
                                <topPen lineWidth="0.5"/>
                                <leftPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                                <rightPen lineWidth="0.5"/>
                            </box>
                            <staticText>
                                <reportElement uuid="0a44ed1e-7ada-4e53-a0f1-f8e80215b921" x="0" y="0" width="90" height="30" backcolor="#19FFFF"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[Total]]></text>
                            </staticText>
                        </jr:columnFooter>
                        <jr:detailCell style="table 5_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="6ee7fb55-7327-4386-ac9a-b9f134f87cac" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{intra_fho_final_FirstName}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="dbfb1b17-68ce-4a59-869e-0d1a0783c53c" width="90">
                        <jr:columnHeader style="table 5_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="a497ced3-2a53-4cb7-a1bb-01761cff09e9" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[DoctorID]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30" rowSpan="1">
                            <box>
                                <pen lineWidth="0.5"/>
                                <topPen lineWidth="0.5"/>
                                <leftPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                                <rightPen lineWidth="0.5"/>
                            </box>
                        </jr:columnFooter>
                        <jr:detailCell style="table 5_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="7ab80c20-bf8c-41ce-9758-0c23c3c31614" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{intra_fho_final_DoctorID}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="19ca94c6-4b15-43e0-9deb-7d0e4877c74e" width="90">
                        <jr:columnHeader style="table 5_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="0a9d6455-c731-4e97-8504-60573fbefb38" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[Services for doctor]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30" rowSpan="1">
                            <box>
                                <pen lineWidth="0.5"/>
                                <topPen lineWidth="0.5"/>
                                <leftPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                                <rightPen lineWidth="0.5"/>
                            </box>
                            <textField>
                                <reportElement uuid="fc9cbc6f-8e58-458b-917b-9ddfd901e7b0" x="0" y="0" width="90" height="30"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$V{for_doctor}]]></textFieldExpression>
                            </textField>
                        </jr:columnFooter>
                        <jr:detailCell style="table 5_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="86d7773c-0639-46a4-bd36-1b1ae44ca117" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{intra_fho_final_for_doctor}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="1bba8b0e-1dbb-42fe-99c8-c06ccaeaffd1" width="90">
                        <jr:columnHeader style="table 5_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="70ba240b-7471-40d0-89af-ffb486c40426" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[Services by doctor]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30" rowSpan="1">
                            <box>
                                <pen lineWidth="0.5"/>
                                <topPen lineWidth="0.5"/>
                                <leftPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                                <rightPen lineWidth="0.5"/>
                            </box>
                        </jr:columnFooter>
                        <jr:detailCell style="table 5_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="3dee1b58-18d9-46d1-9f15-83187acbb958" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{intra_fho_final_by_doctor}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="c74af907-1849-414a-af92-e2ce8ae993b9" width="90">
                        <jr:columnHeader style="table 5_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="e479699f-be34-4b02-ac94-04d081f1f701" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[Net Services by Physicians]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30" rowSpan="1">
                            <box>
                                <pen lineWidth="0.5"/>
                                <topPen lineWidth="0.5"/>
                                <leftPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                                <rightPen lineWidth="0.5"/>
                            </box>
                        </jr:columnFooter>
                        <jr:detailCell style="table 5_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="a1a6b8e4-fde3-4420-98c6-870f22b1227c" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{intra_fho_final_Net_Services_by_Physicians}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column uuid="beb168ea-b1a8-4ac9-8aae-eb5c15e983f5" width="90">
                        <jr:columnHeader style="table 5_CH" height="30" rowSpan="1">
                            <staticText>
                                <reportElement uuid="b29fb3a0-5b2a-4ad3-b3c1-9624a2690ac9" x="0" y="0" width="90" height="30"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle">
                                    <font isBold="true"/>
                                </textElement>
                                <text><![CDATA[Value of Net Services]]></text>
                            </staticText>
                        </jr:columnHeader>
                        <jr:columnFooter height="30" rowSpan="1">
                            <box>
                                <pen lineWidth="0.5"/>
                                <topPen lineWidth="0.5"/>
                                <leftPen lineWidth="0.5"/>
                                <bottomPen lineWidth="0.5"/>
                                <rightPen lineWidth="0.5"/>
                            </box>
                        </jr:columnFooter>
                        <jr:detailCell style="table 5_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="2e6374e8-8e70-4823-97d9-81599f44016f" x="0" y="0" width="90" height="20"/>
                                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                                <textFieldExpression><![CDATA[$F{intra_fho_final_Value_of_Net_Services}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </summary>
</jasperReport> 
```

# compiler-errors - 构造函数 VDM++ 中的错误

> ID：13685863
> 
> 赞同：1
> 
> 时间：2012-12-03T14:59:45.610
> 
> 标签：compiler-errors, vdm++

我在 VDM++ ToolBox Academic 中遇到了一个愚蠢的错误。

当我尝试运行一个操作时，它给了我这个错误：

```
Run-Time Error 280: No constructor with this parameter list is in scope
value: "Game" 
```

我的构造函数是：

```
public Game: Date * Team * Team ==> Game
Game(d,t1,t2) == (
    matchday := d;
    host := t1;
    visitor := t2;
    return self;
); 
```

我在这里称它为：

```
game := new Game(matchday1day1,groupA.teams(2),groupA.teams(3)); 
```

我有这个声明：

```
public groupA : Group;
public matchday1day1 : Date; 
```

和（分组）：

```
public teams : seq of Team; 
```

错误指向 的第一个字母`Game`。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:52:32.610

如果我正确阅读了您对模型的描述，那么它应该如下所示：

```
class Group

instance variables
public teams : seq of Team := [new Team(),new Team(),new Team()];
end Group

class Team
end Team

class Date
end Date

class Game

instance variables
matchday: Date;
host : Team;
visitor : Team;

operations
public Game: Date * Team * Team ==> Game
Game(d,t1,t2) == (
    matchday := d;
    host := t1;
    visitor := t2;
    return self;
);
end Game

class Test
instance variables

public groupA : Group := new Group();
public matchday1day1 : Date := new Date();

operations

public test : ()==>()
test()== (
dcl game : Game;
 game := new Game(matchday1day1,groupA.teams(2),groupA.teams(3)) ;
)

end Test 
```

我在哪里添加了测试并初始化了变量。

我在这里没有发现任何问题，事实上它也可以在 Overture 中运行，[Overture](http://overturetool.org/)是 VDM 的另一个开源工具套件。我认为您的规范是正确的 VDM。在 Overture IDE 中尝试一下。

# javascript - Javascript 正则表达式有助于将字符串拆分为天、小时、分钟（“s”或没有“s”）

> ID：13685871
> 
> 赞同：0
> 
> 时间：2012-12-03T15:00:14.333
> 
> 标签：javascript

我有一个字符串

```
var str = "2 Days, 2 Hours 10 Minutes"; 
```

如果我 ：

```
str.split(/Days/); 
```

我得到：

```
["2 ", ", 2 Hours 10 Minutes"] 
```

所以我想我可以使用 string.split 来拆分我的字符串并用这种方法得到“天”、“小时”和“分钟”。

但是，当我有时有“s”或没有“s”时，我该怎么办，例如：

```
var str = "1 Day, 2 Hours 10 Minutes"; 
```

这里我的字符串是“1 Day”而不是“2 Days”，所以“day”值上没有“s”。有没有办法分割一个字符串

```
Day(s)
Hour(s)
Minute(s) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:03:17.330

您正在使用正则表达式进行拆分，因此只需在“s”之后放置一个问号即可使其成为可选：

```
str.split(/Days?/); 
```

`i`您可能还希望通过将标志添加到正则表达式来使其不区分大小写：

```
str.split(/days?/i); 
```

`match`您也可以使用string 方法（而不是）用一行来完成整个操作，`split`如下所示：

```
("2 Days, 3 hours, 5 minutes").match(/(\d+)\s*days?\,?\s*(\d+)\s*hours?\,?\s*(\d+)\s*minutes?/i) 
```

这将返回一个像这样的数组：

```
["2 Days, 3 hours, 5 minutes", "2", "3", "5"] 
```

所以位置 1、2 和 3 中的项目分别是天、小时和分钟。

将该正则表达式分解为英文：

*   （捕获的组，即数组项 1） 1 个或多个数字
*   零个或多个空白字符
*   天
*   可选的
*   可选逗号
*   零个或多个空格字符......并重复几小时和几分钟。

[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)查看有关字符串的正则表达式匹配的文档，以及有关如何在[此处](http://www.regular-expressions.info)使用正则表达式的出色文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:02:36.410

当然：

```
str.split(/Days?/);
str.split(/Hours?/);
str.split(/Minutes?/); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T15:13:53.453

如果您尝试将 Days/Hours/Minutes 放入单个 3 元素数组，并且您可以保证您的输入将始终有一个值（即使该值为 0），那么消除所有非数字可能会更简单和非空格，然后在空间上拆分并删除空元素。

```
var result = new Array();
var tempstr = str.replace(/[^0-9\s]/g, ''); 
var arr = tempstr.split(' ');

for(var i = 0; i<arr.length; i++) {
    if (arr[i]) {
        result.push(arr[i]);
    }
} 
```

*注意：从[这个 SO Post](https://stackoverflow.com/questions/281264/remove-empty-elements-from-an-array-in-javascript)中挪用的阵列清理循环。*

# mysql - MySql：选择类别 id=2 和 3 的所有帖子

> ID：13685872
> 
> 赞同：3
> 
> 时间：2012-12-03T15:00:17.297
> 
> 标签：mysql, sql, categories, posts

我有以下包含 2 列的数据库：

```
posts id    category id
1           2
2           1
1           3
3           3
3           2
4           5 
```

我需要一个查询，当提取所有属于 2 和 3 类的帖子 id 时，这意味着：id 为 1 和 3 的帖子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:04:02.680

选择类别 2 和 3 中的所有帖子 ID：

```
SELECT posts_id
FROM posts
WHERE categoryId IN (2, 3)
GROUP BY posts_id
HAVING COUNT(distinct categoryId) = 2; 
```

仅选择仅`category_id = 5`与其他任何关联而不与任何其他关联的帖子 ID：

```
SELECT posts_id
FROM posts
GROUP BY posts_id
HAVING SUM(categoryId <> 5) = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:26:18.823

```
SELECT post_id, category_id
FROM posts
WHERE category_id IN (2, 3)
GROUP BY post_id
ORDER BY category_id; 
```

# markdown - 使用 markdown (kramdown)创建元素

> ID：13685874
> 
> 赞同：4
> 
> 时间：2012-12-03T15:00:19.230
> 
> 标签：markdown, html

是否可以使用降价创建跨度元素？我正在使用 Kramdown 转换器。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T15:10:28.407

根据[Markdown 语法规范/文档](http://daringfireball.net/projects/markdown/syntax)，您应该能够使用纯 HTML`<span>`元素。此外，[Kramdown 文档](http://kramdown.rubyforge.org/syntax.html#html-spans)有一整节介绍了一般使用 HTML 元素，`<span>`特别是使用 HTML 元素。

来自 Kramdown 的文档：

> HTML 标签不仅可以用于块级，还可以用于跨度级。跨度 HTML 标签只能在一个块级元素内使用，不能在一个块级元素中使用开始标签而在另一个块级元素中使用结束标签。请注意，仅支持正确的 XHTML！这意味着您必须使用，例如，`<br/>` 而不是`<br>`（尽管 kramdown 尽可能尝试修复此类错误）。
> 
> 默认情况下，kramdown 解析 span HTML 标签内的 kramdown 语法。但是，可以使用 parse_span_html 选项配置此行为。如果设置为 true，则启用 HTML 跨度中的语法解析，如果设置为 false，则禁用解析。还可以使用 markdown 属性在每个标签的标签上启用/禁用语法解析：
> 
> *   如果 HTML 标记具有属性 markdown="0"，则在该 HTML 标记内不进行任何解析（HTML 跨度标记的解析除外）。
>     
>     
> *   如果 HTML 标记具有属性 markdown="1"，则标记的内容被解析为跨度级别元素。
>     
>     
> *   如果 HTML 标记具有属性 markdown="block"，则会发出警告，因为 HTML 跨度不能包含块级元素并且该属性被忽略。
>     
>     
> *   如果 HTML 标记具有属性 markdown="span"，则标记的内容将被解析为跨度级别元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T04:34:49.360

我只是使用[降价跨度元素。](http://daringfireball.net/projects/markdown/syntax#span)

# java - App Engine 会话安全问题

> ID：13685881
> 
> 赞同：1
> 
> 时间：2012-12-03T15:00:39.167
> 
> 标签：java, security, google-app-engine, session

我在应用引擎的会话中存储用户状态（登录/用户 ID）。知道其他用户 UserId 的用户是否可以操纵他们的 cookie 并以其他用户身份登录。

我应该采取什么措施来防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:10:20.307

一个用户不可能直接访问另一个用户的数据。但是，一个用户有办法窃取另一个用户的登录会话。但这不是 GAE 特有的。

看：

1.  [http://en.wikipedia.org/wiki/Session_hijacking](http://en.wikipedia.org/wiki/Session_hijacking)
2.  [http://en.wikipedia.org/wiki/Cross-site_request_forgery](http://en.wikipedia.org/wiki/Cross-site_request_forgery) (CSRF)

劫持很容易发生在开放的 wifi 热点上。一个常见的解决方案是使用[SSL](https://developers.google.com/appengine/docs/ssl)托管您的站点。

当用户登录您的网站并在同一浏览器中打开恶意网站时，就会发生 CSRF。有多种方法可以防止这种情况发生。一个常见的解决方案是在 HTML 表单中包含一个随机[验证令牌。](https://stackoverflow.com/questions/198520/how-to-best-prevent-csrf-attacks-in-a-gae-app)此外，设置 HTTP 响应[标头](http://blog.whitehatsec.com/x-frame-options/)：`X-Frame-Options: sameorigin`并检查请求标头`X-Requested-With`是否不等于非 ajax 命中的“XMLHttpRequest”。

XSS 可用于使这些攻击更有效，因此也要防范它。

对于这些类型的攻击，一般来说，让您的用户[会话](https://www.owasp.org/index.php/Session_Timeout)快速过期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:19:12.623

我不是安全专家。但我学到的是：

*   使用 HTTPS
*   不要使用框架
*   在您的表单中为每个请求使用新的 CSRF 令牌
*   并将您的状态保存在数据存储中，而不是使用会话 cookie 存储。

# javascript - 如果在 Jquery 屏蔽输入插件中没有为电话字段提供扩展名，则摆脱 x

> ID：13685889
> 
> 赞同：0
> 
> 时间：2012-12-03T15:01:23.693
> 
> 标签：javascript, jquery, maskedinput, jquery-mask

我使用[jquery Masked](http://digitalbush.com/projects/masked-input-plugin/#demo)输入插件。

我在字段上有以下掩码：

```
 "?999-999-9999 x9999" 
```

为什么`?`在开始？因为如果用户输入了不完整的数字，我不想清除该字段，所以我将整个事情设为可选。现在，当用户输入数字时，始终可以看到`x`电话是否有分机。`x`如果没有延期，我该如何摆脱它？

同样，我不想清除该字段，如果我使用

```
 "999-999-9999? x9999" 
```

是的，它只有在有分机时才会添加 x，但如果输入的电话不完整，它会清空不是目标的字段。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:20:57.987

在尝试了很多之后，我自己修复了它以实现目标。

目标是在输入不完整的情况下保持文本不消失，如果没有给出扩展名，则摆脱 x。

我在代码末尾添加了这个测试：

```
var splitString = $("[name=myinput]").val().split("x");
//if splitString array length is more than 1 means splitString[1] is set
//if splitString[1].length is 0 means its only x by itself so get rid of it
if (splitString.length > 1 && splitString[1].length == 0) {
    $("[name=myinput]").val($("[name=myinput]").val().replace("x", ""));
} 
```

例子：

```
 entered text: 718-111-123 x -> turns into -> 718-111-123
 entered text: 718-111     x -> turns into -> 718-111
 entered text: 718-111-123 x555 -> turns into -> 718-111-123 x555 
```

# visual-studio-2012 - 我可以将 Visual Studio 产品密钥用于 2 站吗？

> ID：13685898
> 
> 赞同：1
> 
> 时间：2012-12-03T15:01:57.233
> 
> 标签：visual-studio-2012

我购买了 Visual Studio Pro 2012，我想在我的台式机和笔记本电脑上安装该程序。

现在我刚刚安装在我的桌面上，但我也想在我的笔记本电脑上使用 VS2012。

我可以使用相同的产品密钥在我的笔记本电脑上安装 VS2012 吗？我不会同时运行该程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:25:31.753

> Visual Studio Professional 是按用户许可的。每个许可用户都可以在任意数量的设备上安装和使用该软件来设计、开发、测试和演示他们的程序。以这种方式使用软件的每个其他人也必须拥有许可证。

摘自[Visual Studio 2012 和 MSDN 许可白皮书 - 2012 年 10 月.pdf](http://www.microsoft.com/en-us/download/details.aspx?id=13350)

# mysql - 逗号之间的MySQL字符串搜索

> ID：13685899
> 
> 赞同：1
> 
> 时间：2012-12-03T15:01:59.480
> 
> 标签：mysql, sql

我的数据库构建如下：

1.  值1，值2，值3 | 1
2.  值 4，值 5，值“u6 | 2
3.  值 5，值 6，值 8 |3

（两列，一列有一个用逗号分隔的键，另一列只是一个普通的 var-char）

我正在寻找在引号中查找查询的最可靠方法，但我在这里有点迷路了。

我为此使用了边界一词：

```
SELECT * FROM ABC WHERE content REGEXP '[[:<:]]value 5[[:>:]]' 
```

问题是当我做这个查询时：

```
SELECT * FROM ABC WHERE content REGEXP '[[:<:]]5[[:>:]]' 
```

它还将返回值，这不是我想要的。另一个问题是单词边界将引号称为单词边界

我该如何解决这个问题并创建一个仅获取引号之间的确切完整查询的简单查询？

顺便说一句，我没有更改数据库结构的选项...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T15:04:56.893

正如[@MarcB 评论](https://stackoverflow.com/questions/13685899/mysql-string-search-between-commas/13685944#comment18789060_13685899)的那样，您*确实*应该尝试[规范化](http://en.wikipedia.org/wiki/Database_normalization)您的架构：

```
CREATE TABLE ABC_values (
  id  INT,
  content VARCHAR(10),
  FOREIGN KEY (id) REFERENCES ABC (id)
);

INSERT INTO ABC_values
  (id, content)
VALUES
  (1, 'value1'), (1, 'value2'), (1, 'value3'),
  (2, 'value4'), (2, 'value5'), (2, 'val"u6'),
  (3, 'value 5'), (3, 'value 6'), (3, 'value 8')
;

ALTER TABLE ABC DROP content; 
```

然后，根据需要，您可以在表之间执行[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)并对结果进行分组：

```
SELECT   id, GROUP_CONCAT(ABC_values.content) AS content
FROM     ABC LEFT JOIN ABC_values USING (id) NATURAL JOIN (
  SELECT id FROM ABC_values WHERE content = 'value 5'
) t
GROUP BY id 
```

如果完全不可能更改架构，您可以尝试[`FIND_IN_SET()`](http://dev.mysql.com/doc/en/string-functions.html#function_find-in-set)：

```
SELECT * FROM ABC WHERE FIND_IN_SET('value 5', content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:17:16.590

另一种解决方法是将 LIKE 与列表中项目的分隔符一起使用：

```
WHERE content LIKE ',5,' 
```

但是您要查找的项目可能位于列表的开头或结尾。因此，您必须即时修改列表以在开头和结尾包含分隔符。

```
WHERE CONCAT(',', content, ',') LIKE '%,5,%'  -> this works for me on mysql 
```

这很有效，从某种意义上说，它并不比您为逗号分隔列表中的项目所做的任何其他搜索差。那是因为这样的搜索必然会进行表扫描，因此效率非常低。随着表中数据的增长，您会发现它的性能不足以发挥作用。

另请参阅我对[在数据库列中存储分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad/3653574#3653574)

# redirect - 每次运行批处理文件时，从批处理文件输出的 txt 文件中插入新行

> ID：13685900
> 
> 赞同：0
> 
> 时间：2012-12-03T15:02:02.047
> 
> 标签：redirect, batch-file

我有一个批处理文件来检查安装在多台计算机上的软件。我希望批处理文件给出机器名称，然后在它下面给出软件列表。

文本文件应该像这样输出：

jamespc1 安装的软件

在我的批处理文件中

```
echo %%a > pcs.txt
psinfo \\%%a >> pcs.txt 
```

但是每次批处理文件运行时，它都会按原样输出，但它会不断覆盖前面的行。

它插入 jamespc1 然后将 psinfo 输出附加到 jamespc1 下，除非它不断覆盖它检查的每台机器的行，所以我最终只得到列表中最后一台机器的信息。

如何让批处理文件在每台电脑的 txt 文件中创建新行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:08:47.933

`>`将覆盖。

`>>`将追加。

每次运行时，它都会先使用覆盖，从而替换旧文件。

只需更改`>`为`>>`始终附加并保留所有数据。

```
echo %%a >> pcs.txt
psinfo \\%%a >> pcs.txt 
```

# c# - C# JSON 解析与子字符串

> ID：13685904
> 
> 赞同：3
> 
> 时间：2012-12-03T15:02:20.107
> 
> 标签：c#, json, httpwebrequest, substring, json.net

我有一个程序正在发出网络请求，然后分解响应。内容类型是 JSON，我目前将响应视为字符串并使用子字符串对其进行解码。

```
string bidnumber = "buyNowPrice";
int startbid = tradetemp.IndexOf(bidnumber) + 13;
int bidlength = 10;
string bidtemp = tradetemp.Substring(startbid, bidlength);
string endbid = ",";
int endbid2 = bidtemp.IndexOf(endbid);
int bidlength2 = endbid2;
string bidtmp = bidtemp.Substring(0, bidlength2);
long bid = Convert.ToInt64(bidtmp); 
```

我为大约 5 个变量执行此操作，并且不断地一遍又一遍地执行此操作。问题是使用 JSON 解析会比我当前的代码更有效（更快）。使用 JSON 解析会使我的代码更简洁，但这里速度是优先考虑的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T15:08:36.487

使用 JSON 解析。作为程序员，你可能犯的最大错误之一就是说速度很重要，并因此编写长而可怕的代码。这种方法有几个问题。

1.  速度有多重要？如果您可以消除 70% 的书面代码以换取 10 毫秒的性能，这可以接受吗？如果不实施编写良好的解决方案并亲眼看到它，您就无法知道权衡取舍。

2.  您认为会消耗性能的东西不一定会消耗性能。快速编写代码并不一定能解决性能问题，因为您需要*测试*它的性能。

3.  你准备承受多少头痛来换取“速度”？同样，在进行基准测试之前您不知道速度有多快，但是编写不佳的代码，或者甚至是冗长而混乱的代码都会大大增加维护程序的成本。不要小看这一点。

我强烈建议您使用 VS 2012 中默认包含的 JSON.NET 库。我已经使用了很多次，并且总体印象非常深刻。它干净且易于使用。实施它，然后进行基准测试。我想你会印象深刻的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T15:07:19.953

您可以随时尝试并衡量与您的代码相比的性能。但我建议您使用 JSON 解析器，因为这将使您的代码更加稳定。这是[`nice comparison`](http://www.servicestack.net/mythz_blog/?p=344).NET 的不同 JSON 序列化程序。如果速度对您来说非常重要，[ServiceStack 的 JSON 序列化程序是最快的序列化程序之一。](https://github.com/ServiceStack/ServiceStack.Text)

也不要忘记阅读[`stop rolling your CSV parser`](http://secretgeek.net/csv_trouble.asp)文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T15:08:55.047

JSON解析肯定会更有效。它会让你的代码更简洁，而且它会像你想要的一样快。每个人都推荐的最好的方法是使用：[JSON.NET](http://json.codeplex.com/)

它被证明比标准的 C# JavascriptSerializer 更快。JSON.NET 使序列化和反序列化对象变得轻而易举，并且快速高效地完成。

页面底部有 JSON.NET 与常规 C# JSON 库的性能比较。

# javascript - 开发和生产的 URL BASE

> ID：13685905
> 
> 赞同：0
> 
> 时间：2012-12-03T15:02:25.067
> 
> 标签：javascript, html, url, base

我们有一个开发和生产环境，并希望在推出到 PROD 时进行切换。我们可以轻松地使用 HTML 基础标记，只需编辑 URL BASE。这很好，但有时在指向其他站点的页面中的其他 url 不会产生预期的效果。

```
<BASE HREF="http://dev.com">
<A HREF="/LFA.html"><IMG SRC="/LFA.png"></A> 
```

在 javascript 中完成此任务的最简单方法是什么。

dev 是[http://dev.com](http://dev.com) prod 是[http://prod.com](http://prod.com)例如

# c# - Windows 服务转换 xml 和 OI 写入器/读取器

> ID：13685906
> 
> 赞同：0
> 
> 时间：2012-12-03T15:02:28.420
> 
> 标签：c#, windows-services

嘿，我目前正在将我的功能从控制台程序转换为 Windows 服务程序，并且无法读取我的 settings.xml 文件并写入日志文件。

我如何指定程序将在哪里查找文件？当程序从它开始的地方查看地图时，如果它可以像我的控制台版本一样工作，那就太好了。

您可以在 Windows 服务程序中执行此操作以查看我安装该服务的地图吗？

**这就是现在的功能**

```
public List<string> GetSettingsXml()  //Läser settings.xml som innehåller företags sökvägarna som behövs för att öppna kontakten till visma adminitration
    {
        List<string> PathList = new List<string>();
        try
        {
            XmlReader xr;
            using (xr = XmlReader.Create("Settings.xml")) //Läs från Settings.xml
            {
                while (xr.Read())   //Läser xml filen till slutet
                {
                    if (xr.HasValue)    //om den har ett värde så...
                    {
                        if ((!String.IsNullOrWhiteSpace(xr.Value)))
                        {
                            PathList.Add(xr.Value.ToString()); //plockar ut alla värden i xml filen
                        }
                    }
                }
            }

        }
        catch (Exception e)
        {
            WriteToLog("127.0.0.1", "GetSettings", "Exception", e + ": " + e.Message);
        }
        return PathList;
    } 
```

和另一个

```
public void WriteToLog(string ip, string FunctionName, string Keyfield, string Result)   //skapar log filen om den inte finns och skriver i den
    {
        if (ip != "127.0.0.1")
        {
            OperationContext context = OperationContext.Current;
            MessageProperties prop = context.IncomingMessageProperties;
            RemoteEndpointMessageProperty endpoint = prop[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;
            ip = endpoint.Address;
        }
        string Today = DateTime.Today.ToString().Remove(10);
        StreamWriter log;

        if (!File.Exists("logfile " + Today + ".txt"))
        {
            log = new StreamWriter("logfile " + Today + ".txt");
        }
        else
        {
            log = File.AppendText("logfile " + Today + ".txt");
            log.WriteLine();
        }

        log.Write(DateTime.Now + " ::: " + ip + " ::: Funktions namn: " + FunctionName);
        if (Keyfield != "NoKeyField")
            log.Write(" ::: Nyckelfält: " + Keyfield + " ::: Resultat: " + Result);
        else
            log.Write(" ::: Resultat: " + Result);
        if (FunctionName == "host.Close()")
            log.WriteLine();

        log.Close();   //stäng loggen
    } 
```

我如何让我的服务知道文件在哪里？:) 谢谢你的回答

编辑

```
[RunInstaller(true)]
public class WindowsServiceInstaller : Installer
{
    /// <summary>
    /// Public Constructor for WindowsServiceInstaller.
    /// - Put all of your Initialization code here.
    /// </summary>
    public WindowsServiceInstaller()
    {
        ServiceProcessInstaller serviceProcessInstaller = new ServiceProcessInstaller();
        ServiceInstaller serviceInstaller = new ServiceInstaller();

        //# Service Account Information
        serviceProcessInstaller.Account = ServiceAccount.LocalSystem;
        serviceProcessInstaller.Username = null;
        serviceProcessInstaller.Password = null;

        //# Service Information
        serviceInstaller.DisplayName = "VenatoWCF";
        serviceInstaller.Description = "VenatoWCF 0.903 skapar en WCF service som med hjälp av olika funktioner kommunicerar mellan Visma Administration och Client";
        serviceInstaller.StartType = ServiceStartMode.Automatic;

        //# This must be identical to the WindowsService.ServiceBase name
        //# set in the constructor of WindowsService.cs
        serviceInstaller.ServiceName = "VenatoWCF";

        this.Installers.Add(serviceProcessInstaller);
        this.Installers.Add(serviceInstaller);
    }
} 
```

如果有帮助，这是我的安装程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:07:00.537

> 我如何指定程序将在哪里查找文件？

`Environment.CurrentDirectory`如果未指定路径，.NET 会在其中查找文件。该目录取决于应用程序的启动方式。

例如，如果您从 Visual Studio 中运行应用程序，该文件夹将是*输出路径*（在项目设置/构建下），~~而对于 Windows 服务，它将是服务所在的目录。~~

Windows 服务从*服务控制管理器*所在的文件夹启动（来源：[Windows 服务运行在哪个目录？](https://stackoverflow.com/questions/884963/what-directory-does-a-windows-service-run-in)）。

您可以通过使用找到自己的目录`Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)`

# r - 带有 rm.outlier 函数的 data.frame 错误

> ID：13685914
> 
> 赞同：2
> 
> 时间：2012-12-03T15:03:07.213
> 
> 标签：r, runtime-error, outliers

我有一个数据框 1488 obs。和400 var。我正在尝试记录表中的所有值，然后通过命令 rm.outlier 使用包异常值，我很想删除异常值。唯一的问题是我收到此错误：

```
Error in data.frame(V1 = c(-0.886056647693163, -0.677780705266081, -1.15490195998574,  : arguments imply differing number of rows: 1487, 1480, 1481, 1475, 1479, 1478, 1483, 1485, 1484, 1477, 1482, 1469 
```

这是我的代码：

```
datalog <- matrix(0,nrow(data),ncol(data))
datalog[,] <- apply(data,2,log10)
datalog[datalog==-Inf] <- 0
datalog <- as.data.frame(datalog, stringsAsFactors=F)

testNoOutliers <- rm.outlier(datalog, fill = FALSE, 
                         median = FALSE, opposite = FALSE) 
```

我的数据： [https ://skydrive.live.com/redir?resid=CEC7696F3B5BFBC6!341&authkey=!APiwy6qasD3-yGo](https://skydrive.live.com/redir?resid=CEC7696F3B5BFBC6!341&authkey=!APiwy6qasD3-yGo)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:08:49.373

您收到错误是因为您没有相同数量的异常值条形变量。

要纠正它，您有 2 个选项：

1.  放置选项**fill = TRUE**：放置平均值而不是异常值并且不删除

2.  自己删除 oulier：

    ```
     # get a list of outlier index for each variable
      ll <- apply(datalog,2,function(x) which(x == outlier(x))) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:12:27.207

您收到此错误是因为从每列中删除了不同数量的异常值，因此无法将列放在一个数据框中。

如果您想用 NA 替换异常值，一种解决方案是

```
out.rem<-function(x) {
  x[which(x==outlier(x))]=NA
  x
}

apply(datalog,2,out.rem) 
```

要删除包含异常值的整行，您可以向@agstudy 解决方案添加额外的行

```
ll <- apply(datalog,2,function(x) which(x == outlier(x)))
new.datalog <- datalog[-unique(unlist(ll)),] 
```

# c - 多线程分段错误（核心转储）无法检测到问题

> ID：13685919
> 
> 赞同：0
> 
> 时间：2012-12-03T15:03:24.693
> 
> 标签：c, pthreads, segmentation-fault

我被困在 thSegmentation 错误（核心转储）是错误的，我已经没有什么想法了。请帮我找出问题所在。

代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <math.h>
#include <semaphore.h>

#define workTime 5
#define workersLimitNr 3

struct dataBlock{
    struct node *root;
    int listSize;
    int forIndex;
};

struct node { // std linked list node
    int value;
    int worker;
    struct node *next;
};

int slots = 0; // only 3 threads are allowed to access the list
int availableCheck(){   // check if thread can acces the list
    if(slots < 3) return 0;
    else return -1;
}

pthread_mutex_t mutp = PTHREAD_MUTEX_INITIALIZER;   //condvar mutex
pthread_cond_t  condvar = PTHREAD_COND_INITIALIZER;   //condvar

void * worker( void *data ){
    struct dataBlock *inData = (struct dataBlock *) data;
    struct node *root = inData->root;
    int listSize =  inData->listSize;
    int forIndex = inData ->forIndex;
    free(data);
    printf( "*    Thread id: %lu    forID:  %d  workerNode: \n",pthread_self(),forIndex); 

    pthread_mutex_lock( &mutp );
    if(availableCheck() < 0){
        printf( " ^^^ List not available yet... \n" ); 
        pthread_cond_wait( &condvar, &mutp );
    } 
    struct node *it = root;

    printf( "_ _ _ _forID_ %d\n", forIndex );
    do{
        if(forIndex == it->worker){
            printf("valid for sqrt  forIndex %d == it->worker %d\n",forIndex, it->worker );
            if(it->value > 2){
                while(it->value != 1)
                it->value = sqrt(it->value);
                // it->value = it->value - 1;
            }
        }
        it = it->next;
        printf("->val: %d   \n", it->value);
    }while(it !=  NULL);

    pthread_cond_signal( &condvar ); // 
    pthread_mutex_unlock( &mutp ); 
    return NULL;
}

int main( int argc, char *argv[] ){
    if ( argc != 3 ){
        printf( "Programm must be called with \n NR of elements and NR of workers! \n " );
        exit( 1 );
    }

    int i;
    struct node *root;
    struct node *iterator;  

//prepare list for task
    int listSize = atoi(argv[1]);
    int nrWorkers = atoi(argv[2]);
    root = malloc(sizeof( struct node) );

    root->value = rand() % 100;
    root->worker = 0;
    iterator = root;

    for( i=1; i<listSize; i++ ){
        iterator->next = malloc(sizeof(struct node));
        iterator = iterator->next;
        iterator->value = rand() % 100;
        iterator->worker = i % nrWorkers;
        printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
    }
    iterator->next = NULL;
    printf("? List got populated\n");

// Create all threads to parse the link list
    int ret;    
    printf("workersInput: %d\n",nrWorkers);
    pthread_mutex_init(&mutp,NULL);

    pthread_t w_thread;
    pthread_t* w_threads = malloc(nrWorkers * sizeof(w_thread));

    for( i=0; i < nrWorkers; i++ ){         
        struct dataBlock *data = malloc(sizeof(struct dataBlock));
        data->root = root;
        data->listSize = listSize;
        data->forIndex = i;
        ret = pthread_create ( &w_threads[i], NULL, worker, (void *) data );
        if( ret ) {
            perror("Thread creation fail");
            exit(2);    
        }   
        printf("in for, ret= %d\n",ret);

    } 

    for ( i = 0; i < nrWorkers; i++){
        pthread_join(w_threads[i],NULL);
    }
    iterator = root;
    for ( i = 0; i < listSize; i++){
        printf("val: %d  worker: %d _  ", iterator->value, iterator->worker);
        iterator = iterator->next;
    }

    free(root);
    free(iterator);
    return 0;
} 
```

终端编译+程序运行：

```
bogdan@bogdan-VirtualBox:~/dos/threads$ gcc -Wall -g  s.c -o s -pthread -lm
s.c: In function ‘worker’:
s.c:35:6: warning: unused variable ‘listSize’ [-Wunused-variable]
bogdan@bogdan-VirtualBox:~/dos/threads$ ./s 4 4
node #1 worker: 1  value: 86
node #2 worker: 2  value: 77
node #3 worker: 3  value: 15
? List got populated
workersInput: 4
in for, ret= 0
in for, ret= 0
in for, ret= 0
in for, ret= 0
*    Thread id: 3050646336    forID:  3  workerNode: 
_ _ _ _forID_ 3
->val: 86   
->val: 77   
->val: 15   
valid for sqrt  forIndex 3 == it->worker 3
Segmentation fault (core dumped) 
```

**PS：**`while(iterator->next != NULL)`从和在列表创建中更改线程工作函数中的while条件后弹出错误`iterator->next`== NULL;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:17:14.283

你的`printf`崩溃整个事情：

```
do {
    // ...
    it = it->next;
    printf("->val: %d   \n", it->value);
} while(it !=  NULL); 
```

在某个时刻，就在您达到退出条件之前，`it`is `NULL`，因此您通过尝试打印值来取消引用空指针。

删除`printf`应该使程序正常运行。另外，不要忘记`free()`.

*专业提示：*使用 Valgrind 检测无效的内存访问。

# git - 使用 pip 安装特定的 git commit

> ID：13685920
> 
> 赞同：217
> 
> 时间：2012-12-03T15:03:30.093
> 
> 标签：git, installation, commit, pip

我正在开发一个 django 应用程序，我正在使用 pip 来管理我的需求。如何安装特定的 git 提交？

就我而言，我需要安装此提交： [https ://github.com/aladagemre/django-notification/commit/2927346f4c513a217ac8ad076e494dd1adbf70e1](https://github.com/aladagemre/django-notification/commit/2927346f4c513a217ac8ad076e494dd1adbf70e1)

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2012-12-06T23:29:31.927

您可以指定提交哈希、分支名称、标签。

对于分支名称和标签，您还可以安装压缩分发。这更快、更高效，因为它不需要克隆整个存储库。GitHub 会自动创建这些包。

**哈希：**

```
$ pip install git+git://github.com/aladagemre/django-notification.git@2927346f4c513a217ac8ad076e494dd1adbf70e1 
```

**分店名称**

用 git

```
$ pip install git+git://github.com/aladagemre/django-notification.git@cool-feature-branch 
```

或来自源包

```
$ pip install https://github.com/aladagemre/django-notification/archive/cool-feature-branch.tar.gz 
```

**标签**

用 git

```
$ pip install git+git://github.com/aladagemre/django-notification.git@v2.1.0 
```

或来自源包

```
$ pip install https://github.com/aladagemre/django-notification/archive/v2.1.0.tar.gz 
```

[这是一个没有详细记录的功能，但您可以在https://pip.pypa.io/en/latest/topics/vcs-support/](https://pip.pypa.io/en/latest/topics/vcs-support/)找到更多信息

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-05-23T19:04:25.530

只需添加以下行，就可以在项目中使用 requirements.txt 文件自动安装 python 包：

`package-name -e git+https://github.com/owner/repository.git@branch_or_commit#egg={package-name}`

并运行命令行：

`$ pip install -r requirements.txt`

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-08-12T21:49:14.447

对@hugo-tavares 的回答的额外评论：

如果它是私有 GitHub 存储库，则需要使用：

```
pip install git+ssh://git@github.com/.... 
```

在你的情况下：

```
pip install git+ssh://git@github.com/aladagemre/django-notification.git@2927346f4c513a217ac8ad076e494dd1adbf70e1 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-14T22:54:59.990

如果你想创建一个 egg 包，你仍然可以使用相同的 @branch_or_commit 附件：`pip install git+ssh://git@github.com/myrepo.git@mybranch#egg=myeggscript`

# node.js - CentOS 5.8 上的 Node.js 0.8.15 崩溃且没有错误消息

> ID：13685925
> 
> 赞同：1
> 
> 时间：2012-12-03T15:04:05.597
> 
> 标签：node.js

我在 CentOS 5.8 上运行的 node.js 中有一个非常简单的应用程序。不幸的是，它在运行大约半小时后无声地崩溃。任何人？

# android - 将捆绑包从一个意图转发到另一个意图

> ID：13685934
> 
> 赞同：1
> 
> 时间：2012-12-03T15:04:30.933
> 
> 标签：android, android-intent, bundle

有没有一种方法可以将一个意图包从一个意图传递到另一个意图，而不必提取该包并单独处理每个额外的？

例子：

```
intent2.setExtras(intent2.getExtras()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:22:01.623

为什么不？鉴于存在 3 个活动：ActivityA、ActivityB 和 ActivityC...

**活动一**

```
Intent intentA = new Intent(this,ActivityB.class);
intentA.putExtras(new Bundle()); 
```

**活动 B**

```
Intent intentB = new Intent(this,ActivityC.class);
intentB.putExtras(getIntent()); 
```

**活动 C**

```
Intent intentFromA = getIntent();
// Consume and process the Bundle here. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:31:47.477

有专门的功能

Intent.putExtras（捆绑附加功能）

希望这有助于塞尔

# asp.net-mvc - MVCSiteMapProvider 并将注册商标添加到页面

> ID：13685935
> 
> 赞同：0
> 
> 时间：2012-12-03T15:04:33.697
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在 MVC ASP.NET 中使用 MVCSiteMapProvider (https://github.com/maartenba/MvcSiteMapProvider) 作为我的面包屑解决方案。`&reg;`有没有人在使用 MVCSiteMapProvider 时有添加面包屑的经验？`&reg;`在 XML 中的 title 属性中使用无效。对于我们的品牌，我们必须在一些页面名称之后有注册商标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:12:42.417

替换`&reg;`为`&#174;`并且您的 XML 应该是有效的

# wordpress - 使用 wp_mail 函数 () 在我的插件中出错

> ID：13685936
> 
> 赞同：1
> 
> 时间：2012-12-03T15:04:35.977
> 
> 标签：wordpress

我正在 Wordpress 中开发我的第一个插件。然后其中一个功能需要发送电子邮件。

但是当我调用函数**wp_mail ()**时会抛出这个错误：

**致命错误：调用未定义的函数 wp_mail ()**

我应该如何在我的插件中定义这个函数？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:11:46.587

在加载 WordPress 环境之前，您可能正在尝试做一些事情。

您的所有操作都应附加到某个钩子上，例如“init”用于前端操作，“admin-init”用于后端，或“wp-ajax-{$your-action-here}”用于 ajax .

检查法典文档：[http ://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters](http://codex.wordpress.org/Plugin_API#Hooks.2C_Actions_and_Filters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T19:58:44.437

只需包含 wp-load.php 并继续！

```
require('../../../wp-load.php'); 
```

或者

```
require('wp-load.php'); 
```

取决于你的脚本是如何加载的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-10T03:07:19.520

The `wp_mail()` function is not available until after the action `plugins_loaded`, so if you try to use it before that point it will throw an error because the function is undefined at that point.

So rather than simply calling `wp_mail()`, you should be hooking that process to an action so that it occurs after the function has been loaded.

A lot of plugins use `init` as the action hook to connect their action to. `init` comes after `plugins_loaded`, so if you use that, it should work.

# asp.net - 没有 MVC 的 ASP.NET 路由？

> ID：13685943
> 
> 赞同：1
> 
> 时间：2012-12-03T15:04:54.823
> 
> 标签：asp.net

如果不使用 ASP.NET MVC，是否可以使用 ASP.NET 路由？这似乎是比 URL 重写更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:06:48.723

是的，从 ASP.NET 3.5 SP1 开始，路由功能位于[System.Web.Routing](http://msdn.microsoft.com/en-us/library/cc490435%28v=vs.100%29.aspx)中。有关如何开始的信息，请参阅[此 MSDN 页面。](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:09:02.030

您必须更具体地了解您的场景，但总的来说，是的，可以在没有 MVC 上下文的情况下使用路由，我从来没有这样做过（从来没有这样做过），但是如果有构建更好看的 URL 并拥有我的样板的场景代码减少，这是一个不错的选择。

# mysql - LOAD DATA 删除后回收磁盘空间

> ID：13685949
> 
> 赞同：4
> 
> 时间：2012-12-03T15:05:13.837
> 
> 标签：mysql, load-data-infile

我有一个由 MYISAM 表组成的数据库模式，我有兴趣不时从某些表中删除旧记录。

我知道删除不会回收内存空间，但是正如我在 DELETE 命令的描述中发现的那样，插入可能会重用已删除的空间

*在 MyISAM 表中，删除的行保存在链表中，随后的 INSERT 操作重用旧的行位置。*

如果 LOAD DATA 命令也重用已删除的空间，我很感兴趣？

**更新**

我也对索引空间如何回收感兴趣？

**更新 2012-12-03 23:11**

根据从@RolandoMySQLDBA 收到的答案提供了更多信息

在执行以下建议的查询后，对于需要重用或回收空间的不同表，我得到了不同的结果：

```
SELECT row_format FROM information_schema.tables
WHERE table_schema='mydb' AND table_name='mytable1'; 
```

>`Dynamic`

```
SELECT row_format FROM information_schema.tables
WHERE table_schema='mydb' AND table_name='mytable2'; 
```

>`Fixed`

**更新 2012-12-09 08:06**

`LOAD DATA`当且仅当行格式是固定的或（行格式是动态的并且有一个大小完全相同的已删除行）时，才会重用以前删除的空间（我已经通过运行一个简短的脚本对其进行了检查）。

似乎如果 row_format 是动态的，则对每条记录进行已删除列表的完整查找，如果未找到确切的行大小，则不使用已删除的记录，并且表内存使用量会增加，另外`LOAD DATA`会需要更多时间来导入记录。

我将排除此处给出的答案，因为它完美地描述了所有过程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T17:07:37.823

对于名为的 MySQL 表，`mydb.mytable`只需运行以下命令：

```
OPTIMIZE TABLE mydb.mytable; 
```

您也可以分阶段执行此操作：

```
CREATE TABLE mydb.mytable_new LIKE mydb.mytable;
ALTER TABLE mydb.mytable_new DISABLE KEYS;
INSERT INTO mydb.mytable_new SELECT * FROM mydb.mytable;
ALTER TABLE mydb.mytable_new ENABLE KEYS;
ALTER TABLE mydb.mytable RENAME mydb.mytable_old;
ALTER TABLE mydb.mytable_new RENAME mydb.mytable;
ALTER TABLE mydb.mytable_old;
ANALYZE TABLE mydb.mytable; 
```

无论哪种情况，表最终都没有碎片。

试试看 ！！！

# **更新 2012-12-03 12:50 EDT**

如果您担心行是否在批量 INSERT 中通过 重用`LOAD DATA INFILE`，请注意以下几点：

当您创建 MyISAM 表时，我假设默认行格式是动态的。你可以检查它是什么

```
SHOW CREATE TABLE mydb.mytable\G 
```

或者

```
SELECT row_format FROM information_schema.tables
WHERE table_schema='mydb' AND table_name='mytable'; 
```

由于表格的行格式是`Dynamic`，因此碎片行具有各种大小。MyISAM 存储引擎将不断检查每个删除的行长度，以查看下一组要插入的数据是否适合。如果传入的数据无法放入任何已删除的行，则追加新的行数据。

[这种行的存在可以使`myisamchk`斗争](http://www.mysqlperformanceblog.com/2012/11/19/concatenating-myisam-files/)。

这就是我推荐跑步的原因`OPTIMIZE TABLE`。这样，数据将被更快地附加。

# **更新 2012-12-03 12:58 EDT**

您还可以做一些有趣的事情：[尝试将 concurrent_insert 设置为 2](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_concurrent_insert)。这样，您总是在不检查表中的间隙的情况下追加到 MyISAM 表。这将显着加快 INSERT，但不理会所有已知的空白。

您仍然可以尽早使用`OPTIMIZE TABLE`.

# **更新 2012-12-03 13:40 EDT**

为什么不运行我的第二个建议

```
CREATE TABLE mydb.mytable_new LIKE mydb.mytable;
ALTER TABLE mydb.mytable_new DISABLE KEYS;
INSERT INTO mydb.mytable_new SELECT * FROM mydb.mytable;
ALTER TABLE mydb.mytable_new ENABLE KEYS;
ALTER TABLE mydb.mytable RENAME mydb.mytable_old;
ALTER TABLE mydb.mytable_new RENAME mydb.mytable;
ANALYZE TABLE mydb.mytable; 
```

这会给你一个想法

*   `OPTIMIZE TABLE`运行需要多长时间
*   `.MYD`运行后和`.MYI`会小多少`OPTIMIZE TABLE`

运行我的第二个建议后，您可以将它们与

```
SELECT
    A.mydsize,B.mydsize,A.mydsize - B.mydsize myd_diff,
    A.midsize,B.myisize,A.myisize - B.myisize myi_diff
FROM
(
    SELECT data_length mydsize,index_length myisize
    FROM information_schema.tables
    WHERE table_schema='mydb' AND table_name='mytable'
) A,
(
    SELECT data_length mydsize,index_length myisize
    FROM information_schema.tables
    WHERE table_schema='mydb' AND table_name='mytable_new'
) B; 
```

# **更新 2012-12-03 16:42 EDT**

任何 ROW_FORMAT 设置为固定的表都可以每次都分配相同长度的行。如果 MyISAM 表维护一个已删除行的列表，则应始终选择列表中的第一行作为插入数据的下一行。在找到具有足够长度的合适行间隙之前，无需遍历整个列表。每个删除的行都会快速附加到`DELETE`. 每个 INSERT 都会选择已删除行的第一行。

我们可以假设这些事情，因为[MyISAM 表可以进行并发插入](http://dev.mysql.com/doc/refman/5.5/en/concurrent-inserts.html)。为了通过[concurrent_insert](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_concurrent_insert)选项使用此功能，在 MyISAM 表中的 INSERT 必须能够检测到以下三 (3) 项之一：

1.  存在已删除行的列表，因此从列表中选择
    *   Row_Format=Dynamic ：已删除行的列表，每行的长度不同
    *   Row_Format=Fixed ：所有行长度相同的已删除行列表
2.  缺少已删除行的列表，因此追加
3.  绕过检查是否存在已删除行的列表（将[**concurrent_insert**](http://dev.mysql.com/doc/refman/5.5/en/concurrent-inserts.html)设置为 2）

为了使检测#1 尽可能快，MyISAM 表的 row_format 必须是固定的。如果是动态的，很有可能需要遍历列表。

# ios - 更改 setSymbology 后 Zbar 无法正常工作

> ID：13685951
> 
> 赞同：0
> 
> 时间：2012-12-03T15:05:19.233
> 
> 标签：ios, zbar-sdk

我希望 Zbar 可以使用单个 Zbar 阅读器捕获图像并扫描 QR 码，而不会从当前的 ViewController 中将其关闭。

为此我正在使用

```
[reader.scanner setSymbology:ZBAR_QRCODE config: ZBAR_CFG_ENABLE to:1]; 
```

当滑块更改为 QR 码模式时启用和

```
[reader.scanner setSymbology:ZBAR_QRCODE config: ZBAR_CFG_ENABLE to:0]; 
```

当滑块设置为特定值时禁用 QR 码模式。

通过这样的更改无法正常工作。如果最初启用 QR 码，zbar 阅读器会很好地扫描 QR 码。

但我最初只想显示一个图像选择器，所以我使用上面的代码禁用 QR 码模式并`symbology`根据需要进行更改。通过更改符号系统，QR 码不起作用。有人可以帮我解决这个问题吗？

我正在使用 iOS 6.0开发[最新版本。](http://nchc.dl.sourceforge.net/project/zbar/iPhoneSDK/ZBarSDK-1.2.dmg)提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T01:18:49.760

你现在可能已经解决了这个问题。虽然这个问题很难想象，但任何一种解决方案都可以解决它：

1.  使用 ZBarReaderController 而不是 ZBar ReaderViewController，这样您就可以控制何时捕获条形码。（符号系统支持在初始化控制器之前设置一次我不相信您可以动态更改符号系统支持，因为您只禁用了 QR 码 - 它将继续支持其他 20 种左右的条形码格式。

2.  如果您想从相机胶卷中挑选图像，您需要在 Z 条读取器控制器之外进行，但您仍然应该能够使用 Z 条解码生成的图像 - 在示例应用程序中应该很容易弄清楚。

# gstreamer - gst-launch with tcpserversink 不工作

> ID：13685952
> 
> 赞同：0
> 
> 时间：2012-12-03T15:05:30.160
> 
> 标签：gstreamer, gst-launch

我正在尝试用户 gst-launch 通过 tcp 流式传输 mp3 音频，这就是我正在尝试的：

```
$ gst-launch-0.10 filesrc location="/path/to/file.mp3" ! tcpserversink host=0.0.0.0 port=3000 
```

但它不起作用输出如下：

```
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock
ERROR: from element /GstPipeline:pipeline0/GstTCPServerSink:tcpserversink0: Internal GStreamer error: negotiation problem.  Please file a bug at http://bugzilla.gnome.org/enter_bug.cgi?product=GStreamer.
Additional debug info:
gstmultifdsink.c(2700): gst_multi_fd_sink_render (): /GstPipeline:pipeline0/GstTCPServerSink:tcpserversink0:
Received first buffer without caps set
Execution ended after 94657 ns.
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline .. 
```

我出错的问题是什么？

我在互联网上进行了大量搜索，但没有找到正确的文档如何正确使用 gst-launch。如果有人可以请指点我正确的文档或告诉我如何使用它会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:54:59.640

`tcpserversink`抱怨其水槽垫上缺少盖子：

```
Received first buffer without caps set 
```

这是因为 tcpserversink 想知道它发送了什么。
告诉它的一种方法是手动解码和重新编码流：

```
gst-launch-0.10 filesrc location="/path/to/file.mp3" ! mad ! audioconvert ! lame ! tcpserversink host=0.0.0.0 port=3000 
```

但这只是浪费CPU能力。
有一个叫做 that 的元素`mpegaudioparse`（除了一些其他的东西）计算出 mpeg 流的细节并相应地设置它的输出上限。通过简单地将它放在你`filesrc`和`tcpserversink`你之间，你最终会得到一个工作管道：

```
$ gst-launch-0.10 filesrc location="/path/to/file.mp3" ! mpegaudioparse ! tcpserversink host=0.0.0.0 port=3000 
```

# salesforce - Salesforce 中站点的 HTTPS 警告

> ID：13685953
> 
> 赞同：0
> 
> 时间：2012-12-03T15:05:30.420
> 
> 标签：salesforce

当我为我的沙盒组织打开安全（HTTPS）站点 URL 时，我在浏览器上收到以下错误，

*您试图到达********* .cs9.force.com，但实际上您到达了一个将自己标识为*.cs9.force.com 的服务器。这可能是由于服务器上的配置错误或更严重的原因造成的***

 **出现问题是因为我使用***站点***来公开 WS，并且 HTTPS 警告在与 WS 交互时在客户端出现错误。

如何配置我的组织以解决 HTTPS 警告消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:41:29.247

因为您使用的是站点，所以您可以使用 HTTP。无法更改 HTTPS 站点设置。并且没有办法上传您自己的 SSL 证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:12:58.127

不知道你的问题现在解决了没有。但是您需要将您的 WS 配置为接受通配符 SSL 证书。我目前正面临这个问题，以下[链接](https://forums.oracle.com/forums/thread.jspa?threadID=2511587&stqc=true)可能对您有所帮助。由于跨许多应用程序共享 weblogic 服务器，我无法使用此解决方案。如果您找到上述任何解决方案，请[在此处](https://stackoverflow.com/questions/16016894/configure-wildcard-ssl-hostnameverifier-in-java)发表评论。**

# php - JS表单验证不起作用

> ID：13685956
> 
> 赞同：0
> 
> 时间：2012-12-03T15:05:38.253
> 
> 标签：php, javascript, html, forms, validation

我正在尝试使用 JS 函数验证一些表单字段，但单击提交按钮时它们似乎没有加载或检查字段。

```
<html>
  <body>
    <?php require_once('logic.php'); ?>
    <h1>Add new Region/Entity</h1>
    <?php 
      if ($_POST['submitted']==1) {
        echo $error;
      }
    ?>
    <form action="logic.php" method="post" name="registration" onSubmit="return formValidation();">
      Region: <input type="text" name="region" value="<?php echo @$_POST['region']; ?>"><br>
      Description: <br><textarea name="description" cols="50" rows="10"><?php echo @$_POST['description']; ?></textarea><br>
      Remarks: <input type="text" name="remarks" value="<?php echo @$_POST['remarks']; ?>">
      <input type="hidden" name="submitted" value="1"><br>
      <input type="submit" value="Submit" onclick=""> 
```

这是JS：

```
<script type="text/javascript">
  function formValidation() {
    var region = document.registration.region;
    var descr = document.registration.description;
    var remarks = document.registration.remarks;
    if(empty_validation()) {
      if(reg_validation()) {
        if(reg_letters()) {
          if (desc_letters()) {
            if (desc_validation()) {

            }
          }
        }
      }
    }
    return false;
  }
  function empty_validation() {
    var reg_len = region.value.length;
    var descr_len = descr.value.length;
    var rem_len = remarks.value.length;
    if (reg_len == 0 || decr_len == 0 || rem_len == 0) {
      alert("Please fill all the fields");
      return false;
    }
    return true;
  }
  function reg_validation() {
    if (reg_len > 50) {
      alert("Only 50 characters are allowed in the Region field");
      region.focus();
      return false;
    }
    return true;
  }
  function reg_letters() {
    var letters = /^[A-Za-z]+$/;
    if(region.value.match(letters)) {
      return true;
    } else {
      alert('Region field must have only alphabetical characters');
      region.focus();
      return false;
    }
  }
  function desc_validation() {
    if (descr_len > 500) {
      alert("Only 500 characters are allowed in the description field");
      descr.focus();
      return false;
    }
    return true;
  }
  function desc_letters() {
    var iChars = "!@#$%^&*()+=-[]\\\';,./{}|\":<>?";
    for (var i = 0; i < descr_len; i++) {
      if (iChars.indexOf(descr.value.charAt(i)) != -1) {
        alert ("Your description has special characters. \nThese are not allowed.\n Please remove them and try again.");
        return false;
      }
    }
    return true;
  }
</script>
</form>
</body>
</html> 
```

如您所见，我将表单中的值发布到 PHP 文件中。我已经使用`onSubmit`表单标签中的事件来初始化`formValidation()`函数。由于某种原因它不起作用。

如果您需要，这是[一个工作示例。](http://appinventr.com/Task/interface.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:22:35.007

我不会修复你遇到的每一个小错误，但主要问题是变量没有在你期望的地方定义。您不能在一个函数中声明变量并期望它在下一个函数中可用（无需将其作为参数传递或全局声明）。例如，您的`empty_validation`功能应该是这样的：

```
function empty_validation(region, descr, remarks) {
    var reg_len = region.value.length;  
    var descr_len = descr.value.length;  
    var rem_len = remarks.value.length;  

    if (reg_len == 0 || decr_len == 0 || rem_len == 0) {
        alert("Please fill all the fields");  
        return false;  
    }
    return true;  
} 
```

在你的`formValidation`函数中，你这样称呼它：

```
if(empty_validation(region, descr, remarks)) { 
```

这只是一个示例，您需要在几个地方执行此操作。

还有一些其他的事情——你总是`false`从`formValidation`……返回你的意思是放在`return true;`最里面的`if`语句中吗？此外，由于您似乎所做的只是调用这些函数中的每一个，因此您可以将它们放入一个大`if`语句中，如下所示：

```
if (empty_validation() && reg_validation() && reg_letters() && desc_letters() && desc_validation()) {
    return true;
}
return false; 
```

# ruby - 覆盖先前实例化的新路由

> ID：13685957
> 
> 赞同：0
> 
> 时间：2012-12-03T15:05:42.327
> 
> 标签：ruby, rack, rackup

我一定是从 Rack 的[不存在的](http://rack.github.com/)文档中遗漏了一些东西:) 我正在尝试向[ruhoh](https://github.com/ruhoh)添加额外的 web 服务路由，并且可以让它们工作`localhost:9292/test`，但是新`Rack::Builder`对象似乎覆盖了最后一个，因为我无法再访问默认博客位于`localhost:9292/`. 我已经尝试了不同的方法来定义新的路线而不声明`Rack::Builder.new`，但不能让任何工作。

使用此界面添加其他路由的最佳方法是什么？

```
require 'rack'
require 'ruhoh'

run Ruhoh::Program.preview

# Additional routes

builder = Rack::Builder.new do
  use Rack::CommonLogger
  map '/test' do
    run Proc.new {|env| [200, {"Content-Type" => "text/html"},  StringIO.new("infinity 0.1")] }
  end
end

run builder 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:10:06.880

以你使用它的方式，`run Ruhoh::Program.preview`永远不会服务请求。

您应该将其放入构建器中：

```
builder = Rack::Builder.new do
  use Rack::CommonLogger
  map '/' do
    run Ruhoh::Program.preview
  end

  map '/test' do
    run Proc.new {|env| [200, {"Content-Type" => "text/html"},  StringIO.new("infinity 0.1")] }
  end
end

run builder 
```

# php - HTACCESS 目录重定向

> ID：13685959
> 
> 赞同：0
> 
> 时间：2012-12-03T15:05:51.497
> 
> 标签：php, apache, .htaccess, webserver

我正在尝试将地址 www.example.com/tops/articles/first_article 重定向
**到** 地址
**www.example.com/tops/test1.php?name=first_article**

还将地址 www.example.com/tops/galleries/first_gallery 重定向
**到** 地址
**www.example.com/tops/test2.php?name=first_gallery**

以及所有其他地址，例如
**www.example.com/tops/first_page** 到
**www.example.com/tops/page.php?name=first_page**

以下 htaccess 文件给了我一个重定向循环。

```
RewriteEngine on
Options +FollowSymLinks

RewriteRule ^/tops/articles/(.+)$  /tops/test1.php?name=$1  [L]

RewriteRule ^/tops/galleries/(.+)$  /tops/test2.php?name=$1  [L]

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule (.*)$ ./page.php?name=$1 
```

有人知道这是为什么吗？我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:34:19.540

是否`page.php`存在于根目录（或任何其他非`/tops/`目录）中？

如果没有，那么这可能是你的问题。您应该将最后一条规则更改为：

```
RewriteRule ^tops/(.*)$ /tops/page.php?name=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:29:12.603

你可以试试这个：

```
RewriteEngine On
RewriteRule ^tops/articles/([a-zA-Z0-9-=_.]+)/?$   http://www.example.com/tops/test1.php?name=$1 [L]
RewriteRule ^tops/galleries/([a-zA-Z0-9-=_.]+)/?$   http://www.example.com/tops/test2.php?name=$1 [L]
RewriteRule ^tops/([a-zA-Z0-9-=_.]+)/?$   http://www.example.com/page.php?name=$1 [L] 
```

用这些规则替换所有 3 条规则。

**更新**所有字符：

```
RewriteEngine On
RewriteRule ^tops/articles/([^/]*)/?$   http://www.example.com/tops/test1.php?name=$1 [L]
RewriteRule ^tops/galleries/([^/]*)/?$   http://www.example.com/tops/test2.php?name=$1 [L]
RewriteRule ^tops/([^/]*)/?$   http://www.example.com/tops/page.php?name=$1 [L] 
```

.htaccess 应该在根目录中 如果它在`/tops`目录中，请尝试将其从模式和替换 URL 中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T03:34:13.767

好吧，我终于让它工作了。

以为我分享它，所以如果有人每次搜索这个问题，他都会找到它。

这是有效的代码：

```
RewriteEngine on
Options +FollowSymLinks

RewriteRule ^articles/(.+)$ ./test1.php?name=$1 [L]

RewriteRule ^galleries/(.+)$ ./test2.php?name=$1 [L]

RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteRule (.*)$ ./page.php?name=$1 [L] 
```

享受 ！

# windows - Windows的启动顺序是什么？

> ID：13685960
> 
> 赞同：6
> 
> 时间：2012-12-03T15:05:52.657
> 
> 标签：windows, login, startup, runonce

我很想知道用户登录期间 Windows 启动的顺序。有人知道吗？基本上，我的应用程序被 GPO 调用的登录脚本调用。在调用第 3 方 EXE 时，它无法启动。

然后，通过反复试验，我发现 HKCU...\RunOnce 键在登录脚本之后执行。同样的结果，正在调用 EXE，但无法启动。

什么工作：更新登录脚本在用户的启动文件夹中创建一个快捷方式。现在EXE按预期启动。

我知道 AutoRuns 可以告诉我所有可以放置启动项的位置，有人知道整个执行顺序吗？我能够发现 Run 和 RunOnce 键被异步调用。我可以继续测试 AutoRuns 声明的每个启动项，但这可能需要几天时间。

我最感兴趣的是 Windows 2003 Server 登录启动流程，但我怀疑它与当今使用的其他 Windows 风格非常相似。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T15:58:01.470

资料来源：[了解启动过程 - Windows 7 教程](http://sourcedaddy.com/windows-7/understanding-the-startup-process.html)

> Windows 7 的正常启动顺序是：
> 
> 1.  开机自检 (POST) 阶段
> 2.  初始启动阶段
> 3.  Windows 启动管理器阶段
> 4.  Windows 引导加载程序阶段
> 5.  内核加载阶段
> 6.  登录阶段
> 
> ![启动可以采用的不同路径的高级概述](../Images/5a272653e0954805823fe7d3e9d6fbff.png)
> 
> **内核加载阶段** Windows 引导加载程序负责将 Windows 内核 ( `Ntoskrnl.exe`) 和 HAL 加载到内存中。内核和 HAL 一起初始化了一组称为 Windows 执行程序的软件功能。Windows 执行程序处理存储在注册表中的配置信息 `HKLM\SYSTEM\CurrentControlSet`并启动服务和驱动程序。以下部分提供了有关内核加载阶段的更多详细信息。
> 
> **登录阶段**
> 
> Windows 子系统启动`Winlogon.exe`，这是一个系统服务，使您能够登录和注销。`Winlogon.exe`然后执行以下操作：
> 
> *   启动服务子系统 ( `Services.exe`)，也称为 SCM。SCM 初始化注册表项 Start 在注册表子项中指定为 Autoload 的服务 `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Servicename`。
> *   启动本地安全机构 (LSA) 进程 ( `Lsass.exe`)。
> *   在开始登录提示符处解析`Ctrl`+ `Alt`+`Delete`组合键（如果计算机是 AD DS 域的一部分）。
> 
> 登录用户界面 (LogonUI) 功能和凭据提供程序（可以是标准凭据提供程序或第三方凭据提供程序）收集用户名和密码（或其他凭据）并将此信息安全地传递给 LSA 进行身份验证。如果用户提供了有效的凭据，则使用默认的 Kerberos V 5 身份验证协议或 Windows NT LAN Manager (NTLM) 授予访问权限。
> 
> Winlogon 初始化安全和身份验证功能，而 PnP 初始化自动加载服务和驱动程序。`LastKnownGood` 用户登录后，注册表项（位于 中）引用的控制集将使用子项`HKLM\SYSTEM\Select`中的内容进行更新 `CurrentControlSet`。默认情况下，Winlogon 会启动 `Userinit.exe`并启动 Windows 资源管理器外壳。然后 Userinit 可能会启动其他进程，包括：
> 
> *   **组策略设置生效**应用于用户和计算机的组策略设置生效。
> *   **启动程序运行**当未被组策略设置覆盖时，Windows 将启动登录脚本、启动程序和以下注册表子项和文件系统文件夹中引用的服务：
>     
>     
>     
>     ```
>     HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Runonce
>     HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\Explorer\Run
>     HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run
>     HKEY_CURRENT_USER\Software\Microsoft\Windows NT\CurrentVersion\Windows\Run
>     HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run
>     HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunOnce
>     SystemDrive\Documents and Settings\All Users\Start Menu\Programs\Startup
>     SystemDrive\Documents and Settings\username\Start Menu\Programs\Startup 
>     ```
>     
>     
> 
> 安装 Windows 后，可能会将多个应用程序配置为默认启动，包括 Windows Defender。计算机制造商或 IT 部门可能会配置其他启动应用程序。
> 
> 在用户成功登录到计算机之前，Windows 启动不会完成。如果在登录阶段启动失败，则说明配置为自动启动的服务或应用程序存在问题。

*如果您想了解更多信息，请查看源链接。*

# ruby-on-rails - 使用 collection_select 在数据库中存储值的问题

> ID：13685962
> 
> 赞同：0
> 
> 时间：2012-12-03T15:06:01.857
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有两个模型：

项目.rb

```
class Project < ActiveRecord::Base
 belongs_to :customer
end 
```

和客户.rb

```
class Customer < ActiveRecord::Base
  has_many :projects
end 
```

在 _form.html.erb 我有：

```
<p>
    <label>Select Customer</label>
    <%= f.collection_select :customer_id, Customer.all, :id, :name, :include_blank => true %>
</p> 
```

它应该从客户模型中收集客户并显示所有客户，最后它应该将值分配给项目表中的 customer_id。

现在，当我检查日志时，一切都在过去。当我选择 value=1 的第一个客户时，它会在我的日志中传递 customer_id = "1" 但它不会存储在表中。它在项目表中显示 customer_id = nil。

有人可以帮忙吗。谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:36:09.903

请检查您是否在 attr_accessible 方法中添加了 customer_id，例如，

```
class Project
  attr_accessible :your_other_attributes, :customer_id
end 
```

# php - 服务器发送事件停止以新参数开始

> ID：13685965
> 
> 赞同：4
> 
> 时间：2012-12-03T15:06:14.590
> 
> 标签：php, javascript, server-sent-events

请帮忙。

我正在使用服务器发送事件根据存储在数据库中的数据动态更新网站。

我现在希望根据上一条消息中收到的数据将一个新参数 ('abc.php/?lastID=xxx') 传递回 PHP 脚本。

我知道我可以`event.close`用来停止当前的“流”，但我正在努力弄清楚如何对`'EventListener'`动态创建 URL 的每个新 EventSource 使用相同的

有人可以指出我正确的方向吗？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:10:23.520

好的，花了一些时间来更好地掌握 Javascript。

```
var source = new EventSource("xyz.php?last=0");
source.addEventListener('message', onMessageHandler,false);

function onMessageHandler(event) {
   console.log(event.data);//just for debug purposes

   event.target.close(); //close current stream.
   var last = "1234"; // loaded from event.data in my solution.
   var sourceNew = new EventSource("xyz.php?last=" + last); // start another 
   sourceNew.addEventListener('message', onMessageHandler, false); //event

} 
```

我似乎已经解决了我遇到的问题。

塔

# matlab - 如何在绘图中仅显示特定曲线子集的图例？

> ID：13685967
> 
> 赞同：40
> 
> 时间：2012-12-03T15:06:21.920
> 
> 标签：matlab, plot, legend

```
t = 0 : 0.01 : 2 * pi;
s = sin(t);
c = cos(t);
m = -sin(t);

hold on;
plot(t, s, 'r');
plot(t, c, 'b');
plot(t, m, 'g');
hold off;

legend('', 'cosine', ''); 
```

![阴谋](../Images/6d152e3df7b899c63069d560a9d65846.png)

我的绘图中有几条曲线。我只想显示其中一些的图例。我该怎么做？

例如，如何在上面的绘图中只显示余弦曲线的图例？当我调用`legend()`函数`legend('', 'cosine');`而不是添加空的第三个参数时，确实从图例中删除了第三条绿线。但这并不能解决我的问题，因为不需要的红线仍然可见。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-11-18T12:55:11.167

我不喜欢存储句柄值，当我的图中有很多图表时，它会变得一团糟。因此我找到了另一个解决方案。

```
t = 0 : 0.01 : 2 * pi;
s = sin(t);
c = cos(t);
m = -sin(t);
hold on;
plot(t, s, 'r', 'HandleVisibility','off'); % Plotting and telling to hide legend handle
h2 = plot(t, c, 'b', 'DisplayName', 'cosine');  % Plotting and giving legend name
plot(t, m, 'g', 'HandleVisibility','off'); % Plotting and telling to hide legend handle

legend show  % Generating legend based on already submitted values 
```

这给了我与 Eitan T 的答案相同的图表。

应该注意的是，这也会影响其他 matlab 函数，例如`cla`只会删除图例中提到的图。在 Matlab 文档中搜索 HandleVisibility 以了解更多信息。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-03T15:22:18.097

只需将所需的*图例句柄*存储在变量中并将数组传递给`legend`. 在您的情况下，它只是一个值，如下所示：

```
hold on;
plot(t, s, 'r');
h2 = plot(t, c, 'b');  % # Storing only the desired handle
plot(t, m, 'g');
hold off;

legend(h2, 'cosine');  % # Passing only the desired handle 
```

你应该得到这个情节：

![在此处输入图像描述](../Images/08ddd3a45b881efabc4a3ddfc9779255.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-03T15:36:45.453

让我们从您的变量开始并绘制它们：

```
t = 0 : 0.01 : 2 * pi;
s = sin(t);
c = cos(t);
m = -sin(t);

figure;
hold ('all');
hs = plot(t, s);
hc = plot(t, c);
hm = plot(t, m); 
```

有一个名为[IconDisplayStyle](http://www.mathworks.com/help/matlab/creating_plots/controlling-legends.html)的属性。它埋得很深。您需要遵循的路径是：

Line -> Annotation -> LegendInformation -> IconDisplayStyle

设置该`IconDisplayStyle`属性`off`将使您跳过该行。例如，我将关闭`hs`的图例。

```
hsAnno = get(hs, 'Annotation');
hsLegend = get(hsAnno, 'LegendInformation');
set(hsLegend, 'IconDisplayStyle', 'off'); 
```

当然，您可以继续这样做：

```
set(get(get(hs, 'Annotation'), 'LegendInformation'), 'IconDisplayStyle', 'off'); 
```

但我发现它更难理解。

现在，该`legend`功能将跳过`hs`.

以此结束我的代码：

```
legend('cosine', 'repeat for this handle') 
```

会给你这个： ![在此处输入图像描述](../Images/82ebf49f07235b259569ee10bb6cf601.png)

编辑：乔纳斯在评论中有一个很好的建议：`DisplayName`像这样设置 hc 的属性：

```
set(hc, 'DisplayName', 'cosine');
legend(gca, 'show'); 
```

会给你你需要的传说。您将把您的线路句柄与`'cosine'`. 因此，您可以使用`'off'`或`'show'`参数调用图例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-07T21:38:44.570

为了扩展塞巴斯蒂安的答案，我有一个特殊情况，我正在以两种格式（压缩或拉伸的桁架梁）之一绘制几条线，并且只要标签相同，就能够在图例中绘制特定的绘图句柄长度

```
for ii=1:nBeams
    if X(ii)<0 %Bars with negative force are in compession
        h1=plot(linspace(beamCord(ii,1),beamCord(ii,3)),...
            linspace(beamCord(ii,2),beamCord(ii,4)),'r:');
    elseif X(ii)>0 %Bars with positive force are in tension
        h2=plot(linspace(beamCord(ii,1),beamCord(ii,3)),...
            linspace(beamCord(ii,2),beamCord(ii,4)),'b');
    end
end

legend([h1;h2],['Compression';'Tension    ']); 
```

其中 'Tension' 后面加了 4 个空格，使字符数一致。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-05T09:18:06.893

您可以更改绘制曲线的顺序并将图例应用于第一条曲线：

```
t = 0 : 0.01 : 2 * pi;
s = sin(t);
c = cos(t);
m = -sin(t);

plot(t,c,t,s,t,m)  % cosine is plotted FIRST
legend('cosine')   % legend for the FIRST element 
```

如果我想为余弦和正弦添加图例：

```
plot(t,c,t,m,t,s)  % cosine and -sine are first and second curves
legend('cosine', '-sine') 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-03-10T15:14:22.173

快速的情节黑客：

1.  剪掉所有不想出现在图例中的东西
2.  应用图例
3.  粘贴

# html - 下拉菜单宽度更改为动态

> ID：13685971
> 
> 赞同：1
> 
> 时间：2012-12-03T15:06:46.053
> 
> 标签：html, css

在此示例中，“我的帐户”文本的宽度是固定的。我想要做的是使其动态化，因此它应该根据文本的长度扩大或缩小，因为我将打印用户的全名，而不是写“我的帐户”，并且总是不同的。

菜单离开当前位置，当我更改位置和宽度值时。

[例子](http://www.9lessons.info/2012/06/simple-drop-down-menu-with-jquery-and.html)

如果您知道更简单的示例，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:16:43.253

您需要删除所有给下拉设置宽度的样式，并`$('.submenu').width($('.account').outerWidth());`在页面加载时添加。

jsFiddle：http: [//jsfiddle.net/fRGqD/1/](http://jsfiddle.net/fRGqD/1/)

# c - 网络传输对 cpu 的影响

> ID：13685975
> 
> 赞同：2
> 
> 时间：2012-12-03T15:06:54.743
> 
> 标签：c, networking, cpu-usage, data-transfer

我有一个项目，我需要尽量减少通过网络发送/接收计算数据的影响。

在我的配置中，一个（小）计算机网格将计算大量值（matrix_i^n，每台机器都分配了一大组 i）。然后，这些值将根据计算值的属性通过网络发送到另一台计算机（平均而言，每台计算机接收相同数量的值）。

我想优化计算这些值所需的时间（最大功率 m，预先确定）。为此，我需要选择传输中间结果的最佳方式：

*   预先计算所有内容，然后将所有值交换到正确的计算机
*   一旦可用，就将每个值发送到正确的计算机
*   在计算过程中交换小数据包的混合解决方案

由于网络传输非常慢，我觉得我应该尽快开始传输数据，但我不确定 CPU 上的开销（处理更多异常，因此调度程序需要更多工作）不会影响计算性能.

您是否知道我可以依赖的文档或我可以用来自己进行一些测试的良好基准套件（用 C 编写）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:33:13.253

网络的 CPU 使用率通常取决于您进行的 I/O 调用量。如果可以的话，设计你的应用程序的方式可以让你轻松调整缓冲区大小，以便进行测试。使用足够的缓冲，10gb/s 毫不费力。

您使用的是什么操作系统？我怀疑你是否会需要它，但 Windows 8 具有[注册 I/O](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740642%28v=vs.85%29.aspx)，它旨在实现极低的延迟和 CPU 使用率。

# c# - 如何在 string.format 操作中格式化参数

> ID：13685976
> 
> 赞同：4
> 
> 时间：2012-12-03T15:06:54.180
> 
> 标签：c#, string, string.format

这不是一个严重的问题，我只是好奇。

我正在格式化一个字符串，输出字符串中的数据多次重复使用参数数据，但改变了大小写（例如）。

```
string data = "TEST";
string s = string.Format("{0} - {1}", data, data.ToLower());
// REQUIRED OUTPUT 
// TEST - test 
```

但我能以某种方式实现这一目标......

```
// ****PSEUDO-code****
//string s = string.Format("{0} - {0}.ToLower()", data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:09:33.947

有许多说明符可让您格式化替换格式化标记的数据（[本文是了解这些的好地方](http://blog.stevex.net/string-formatting-in-csharp/)）。

不幸的是，没有说明符可以让您`ToLower`在字符串上执行 a - 您必须自己执行此操作，然后才能将其传递给`String.Format`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:10:36.877

你想做的事情是不可能的。

当您将`string`参数传递给`string.Format`它时，它保持不变（除了对齐/宽度）。无法指定复合格式来操纵传入的值`string`以更改其大小写。

# javascript - 如何测量javascript对象的内存使用情况

> ID：13685979
> 
> 赞同：3
> 
> 时间：2012-12-03T15:07:07.650
> 
> 标签：javascript, canvas

例如，我想将“数字数组”与“字符串数组”进行比较，以存储 Alpha 大于或小于 0.5 的静态画布/图像位，我稍后需要读取/访问它

我想知道哪个内存使用量最少并且可能更快？

```
var c =$('$myCanvas');
var d = c[0].getContext('2d').getImageData().data; 
// access: d[3+4*(c.width()*y+x)] >= 0.5 
```

对比

```
var n = [ [ 2147483647, 2147483647, 2147483647 ], [ 0, 0, 0 ], ... ]
// access: n[y][x/31|0] >> x%31 & 1 
```

对比

```
var s = [ [ 255, 255, 255, 255, ... ].to_s(), [ 0, 0, 0, 0, ...].to_s(), ... ]
// access: n[y].charCodeAt(x/8|0) >> x%8 & 1 
```

请注意， to_s() 是自定义函数，用于将字节数组转换为类似于此的字符串：[https ://codereview.stackexchange.com/questions/3569/pack-and-unpack-bytes-to-strings](https://codereview.stackexchange.com/questions/3569/pack-and-unpack-bytes-to-strings)

这些代码可能是错误的，这只是我稍后将实现的概念

所以，我的问题是，如何测量 d、n 和 s 的内存使用情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:16:34.687

您可以考虑[V8 profiler](https://github.com/felixge/node-memory-leak-tutorial)。使用它的标志，您可以获得堆使用情况。可能这就是你需要的。

# c# - 如何向 Gridview 添加新行？

> ID：13685980
> 
> 赞同：1
> 
> 时间：2012-12-03T15:07:07.443
> 
> 标签：c#, asp.net, gridview

我有一个带有 3 个模板字段的 Gridview：1 个带有 DropDownList，另外 2 个带有 Texboxes。

我设法获得了 GridView 中的第一个空行。现在，我需要在 DropDownList 的 SelectedIndexChanged 事件上添加另一行。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:08:51.620

**默认.aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel runat="server">
            <ContentTemplate>
                <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                    Width="317px">
                    <Columns>
                        <asp:TemplateField HeaderText="Text 1">
                            <ItemTemplate>
                                <asp:TextBox runat="server" Visible='<%# Eval("isLast") %>' ID="Text1"></asp:TextBox>
                                <asp:Label runat="server" Visible='<%# !(bool)Eval("isLast") %>' Text='<%# Eval("text1") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Text 2">
                            <ItemTemplate>
                                <asp:TextBox runat="server" Visible='<%# Eval("isLast") %>' ID="Text2"></asp:TextBox>
                                <asp:Label runat="server" Visible='<%# !(bool)Eval("isLast") %>' Text='<%# Eval("text2") %>'></asp:Label>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:DropDownList ID='DropDownList' Visible='<%# Eval("isLast") %>' runat="server" 
                                    onselectedindexchanged="DropDownList_SelectedIndexChanged" AutoPostBack="true">
                                    <asp:ListItem Text="Option 1" Value="1" />
                                    <asp:ListItem Text="Option 2" Value="2" />
                                    <asp:ListItem Text="Option 3" Value="3" />
                                </asp:DropDownList>
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                </asp:GridView>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
</html> 
```

**默认.aspx.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            DataTable dt = new DataTable("table1");
            dt.Columns.Add("ID", Type.GetType("System.Int32"));
            dt.Columns.Add("text1");
            dt.Columns.Add("text2");
            dt.Columns.Add("isLast", Type.GetType("System.Boolean"));
            for (int i = 0; i < 3; i++)
            {
                dt.Rows.Add(new object[] { 
                    i, 
                    i < 2 ? "text 1 row " + i : string.Empty, 
                    i < 2 ? "text 2 row " + i : string.Empty, 
                    i == 2 });
            }
            GridView1.DataSource = dt;
            GridView1.DataBind();
            Session["dataTable"] = dt; // change to sql data source
        }
    }
    protected void DropDownList_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList ddl = (DropDownList)sender;
        DataTable dt = (DataTable)Session["dataTable"];
        var maxId = dt.AsEnumerable().Max(row => Convert.ToInt32(row["ID"]));
        var dataRow = dt.AsEnumerable().Where(row => (int)row["ID"] == maxId)
                        .Select(row => row)
                        .FirstOrDefault();
        dataRow["text1"] = ((TextBox)GridView1.Rows[GridView1.Rows.Count - 1].FindControl("Text1")).Text;
        dataRow["text2"] = ((TextBox)GridView1.Rows[GridView1.Rows.Count - 1].FindControl("Text2")).Text;
        dataRow["isLast"] = false;
        dt.Rows.Add(new object[] { maxId + 1, string.Empty, string.Empty, true });
        GridView1.DataSource = dt;
        GridView1.DataBind();
        Session["dataTable"] = dt;
    }
} 
```

# php - 将日期变量传递给 sql 查询

> ID：13685990
> 
> 赞同：1
> 
> 时间：2012-12-03T15:07:30.127
> 
> 标签：php, mysql, variables, date

我有以下用户输入表单。我需要将 mmddyyyy 组合成一个变量，然后将其传递到另一个页面以在 sql 查询中使用。当日期被硬编码时，我可以让查询工作，所以我知道它有效..我没有看到很多关于这个主题的问题，但我相信很多人都必须这样做。

```
<?
$date=$_POST['date'];
if(isset($date) and $date=="search"){
$month=mysql_real_escape_string($_POST['Month']);
$day=mysql_real_escape_string($_POST['Day']);
$year=mysql_real_escape_string($_POST['Year']);
$reserveStartTime=mysql_real_escape_string($_POST['Time']);
$reserveDate="$month/$day/$year";
echo "mm/dd/yyyy format :$reserveDate<br>";
$reserveDate="$year-$month-$day";
echo "YYYY-mm-dd format :$reserveDate<br>";
echo "$reserveStartTime";
}
?>

 <label for="Month"><span class="text"><span class="text"><span class="text"><span class="text"><span class="text">Month</span>:</span></span></span></span></label>
    <span class="text">
    <select name="Month"size="1" id="Month">
      <option value="01">Jan</option>
      <option value="02">Feb</option>
      <option value="03">Mar</option>
      <option value="04">Apr</option>
      <option value="05">May</option>
      <option value="06">Jun</option>
      <option value="07">Jul</option>
      <option value="08">Aug</option>
      <option value="09">Sep</option>
      <option value="10">Oct</option>
      <option value="11">Nov</option>
      <option value="12">Dec</option>
      </select>
    <label for="Day">Day:</label>
    <select name="Day" id="Day">
      <option value="01">1</option>
      <option value="02">2</option>
      <option value="03">3</option>
      <option value="04">4</option>
      <option value="05">5</option>
      <option value="06">6</option>
      <option value="07">7</option>
      <option value="08">8</option>
      <option value="09">9</option>
      <option value="10">10</option>
      <option value="11">11</option>
      <option value="12">12</option>
      <option value="13">13</option>
      <option value="14">14</option>
      <option value="15">15</option>
      <option value="16">16</option>
      <option value="17">17</option>
      <option value="18">18</option>
      <option value="19">19</option>
      <option value="20">20</option>
      <option value="21">21</option>
      <option value="22">22</option>
      <option value="23">23</option>
      <option value="24">24</option>
      <option value="25">25</option>
      <option value="26">26</option>
      <option value="27">27</option>
      <option value="28">28</option>
      <option value="29">29</option>
      <option value="3">30</option>
      <option value="31">31</option>
    </option>
       </select>
    <label for="Year">Year:</label>
    <select name="Year" id="Year">
      <option value="2012">2012</option>
      <option value="2013">2013</option>
      <option value="2014">2014</option>
      <option value="2015">2015</option>
      <option value="2016">2016</option>
      <option value="2017">2017</option>
      </select>
     <label for="Time">Time:</label>
    <select name="Time" id="Time">
      <option value="9:00">9:00 am</option>
      <option value="9:30">9:30 am</option>
      <option value="10:00">10:00 am</option>
      <option value="10:30">10:30 am</option>
      <option value="11:00">11:00 am</option>
      <option value="11:30">11:30 am</option>
      <option value="12:00">12:00 pm</option>
      <option value="12:30">12:30 pm</option>
      <option value="13:00">1:00 pm</option>
      <option value="13:30">1:30 pm</option>
      <option value="14:00">2:00 pm</option>
      <option value="14:30">2:30 pm</option>
      <option value="15:00">3:00 pm</option>
      <option value="15:30">3:30 pm</option>
      <option value="16:00">4:00 pm</option>
      <option value="16:30">4:30 pm</option>
      <option value="17:00">5:00 pm</option>
      <option value="17:30">5:30 pm</option>
      <option value="18:00">6:00 pm</option>
      <option value="18:30">6:30 pm</option>
      <option value="19:00">7:00 pm</option>
      <option value="19:30">7:30 pm</option>
      <option value="20:00">8:00 pm</option>
      <option value="20:30">8:30 pm</option>
      <option value="21:00">9:00 pm</option>
   </select>
    </span></p>
         <p>
      <span class="text">
      <input type="hidden" class="text" name="date"value="search">
    <input type="submit" value="Search" />
      </span></p>
  <p>&nbsp;</p>
</form>
</body>
</html>

It then passes the variable to my sql page..
if (isset($_POST['date']) and $_POST['action']=='Search')

        //Get available times for court reservations

    try
    {
    $sql = "SELECT timeslots.courtId, courtName, courtFee, timeslots.slotId, timeslots.reserveStartTime FROM courts INNER JOIN timeslots ON courts.courtId = timeslots.courtId INNER JOIN bookings ON timeslots.slotId != bookings.slotId WHERE bookings.reserveDate = '$reserveDate' AND  timeslots.reserveStartTime = '$reserveStartTime'
    GROUP BY courtName"; 
    $result = $pdo->query($sql);
    }
    catch (PDOException $e)
    {
        $error = 'Error retrieving courts: ' . $e->getMessage();
    include 'error.html.php'; 
        include 'error.html.php';
        exit();
    }
    //getting all time slots available
    while($row = $result->fetch())
    { 
    $courts[] = array('timeslots.courtId' => $row['courtId'],'courtName' => $row['courtName'],'courtFee' => $row['courtFee'], 'timeslots.slotId' => $row['slotId'], 'reserveStartTime' =>$row['reserveStartTime']);
    }
?> 
```

# java - InputSteam.read 可以溢出缓冲区吗

> ID：13685991
> 
> 赞同：1
> 
> 时间：2012-12-03T15:07:31.550
> 
> 标签：java, inputstream

读取命令是否在填充数据时检查缓冲区的大小，或者是否有可能因为缓冲区不够大而丢失数据？换句话说，如果有十个字节的数据可供读取，服务器是否会继续存储剩余的 2 个字节的数据，直到下一次读取。

我只是在这里用 8 作为例子来过度戏剧化这种情况。

```
InputStream stdout;
...
while(condition)
{
    ...
    byte[] buffer = new byte[8];
    int len = stdout.read(buffer);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:09:21.507

不，`read()`不会因为您没有为所有可用字节提供足够的空间而丢失任何数据。

不清楚您在这里所说的“服务器”是什么意思，但第一次读取后，10 字节消息的最后两个字节将可用。（或者有可能，例如，第`read()`一个字节只会读取前六个字节，剩下四个字节要读取。）

# html - 带有 rhtml 和 knitr 的多个数字

> ID：13685992
> 
> 赞同：4
> 
> 时间：2012-12-03T15:07:34.297
> 
> 标签：html, r, knitr

我有一个 Rhtml 文件，我从中获取一个 R 文件。在这个 R 文件中，我正在做一些绘图。

```
p=ggplot(data)
p+geom_line() 
```

现在，我可以一个接一个地制作一个情节，然后在做的时候 `knit(".Rhtml")`我一个接一个地开始。

但我想把这些数字并排排列。（数字的数量因报告而异）。

有没有办法在 Rhtml 文件中设置一个选项，使数字并排排列（例如两列或三列或四列）。

所以，实际上它会像一个`par(mfrow)`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T16:16:16.140

用于`out.width`将数字并排放置。这是一个可重现的示例

```
## Figures side by side

```{r out.width = '50%', echo = F, message = F}
require(ggplot2)
p0 = qplot(wt, mpg, data = mtcars)
p1 = p0 + geom_smooth()
p0
p1
``` 
```

编辑。如果您希望显示代码或显示消息，则只需添加`fig.show = "hold"`到您的块选项以确保您的数字在其余块之后打印，然后将它们并排打印，因为您设置`out.width = "50%"`

请参阅[此消息](https://github.com/yihui/knitr/blob/master/NEWS#L140)以`knitr`注意引入更改的时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T15:16:32.690

情节可以与`gridExtra`包结合。例如，如果您有三个图（`p1`、`p2`和`p3`），则命令为：

```
library(gridExtra)
newPlot <- grid.arrange(p1, p2, p3) 
```

查看`gridExtra`包装以获取更多详细信息。

# powershell - 使用 powershell 从 TFS 2010 签出文件

> ID：13685993
> 
> 赞同：7
> 
> 时间：2012-12-03T15:07:41.857
> 
> 标签：powershell, tfs, powershell-2.0

我只想用 powershell 检查一个路径，并在一分钟后在 Team Foundation Server 上检查这个路径。

我怎样才能做到这一点？

我已经在我的服务器上安装了 tfs 电动工具。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T16:21:28.507

你不需要电动工具。只需使用带有 TFS 团队资源管理器的 Visual Studio 附带的 tf.exe 命令行实用程序。 `tf edit <file> /noprompt`签出和`tf checkin <file> /comment:$comment /noprompt`签入。查看 tf.exe 上的命令行用法以获取更多信息`tf /?`和`tf checkin /?`. 您需要使用 tf.exe 的路径配置 PowerShell 会话。这通常由 VS vars 批处理文件完成。但是您应该能够像这样简单地添加到路径中：`$PATH += "${VS110COMNTOOLS}..\Ide"`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-07T13:53:06.350

这是一个检查是否安装了管理单元的函数。如果您安装了 powertools，它会使用它，否则，它会使用命令行工具`tf.exe`

```
function checkout-file([string] $file)
{
    "Checking out $file"
    if ((Get-PSSnapin -Name  Microsoft.TeamFoundation.PowerShell -ErrorAction SilentlyContinue) -eq $null )
    {
        Add-PsSnapin  Microsoft.TeamFoundation.PowerShell -ErrorAction SilentlyContinue

        if ((Get-PSSnapin -Name  Microsoft.TeamFoundation.PowerShell -ErrorAction SilentlyContinue) -eq $null )
        {
            #try to check out the code using command line tf.exe
            &"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\TF.exe" checkout $file | Out-Null
        }
        else{
            #checkout the file using snapin
            Add-TfsPendingChange -Edit $file | Out-Null
        }
    }else{
        #checkout the file using snapin
        Add-TfsPendingChange -Edit $file | Out-Null
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T06:40:15.493

这是我的解决方案：

```
$tf = &"C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\tf.exe"     checkout C:\setup\folder /recursive
$tf | Out-null 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T16:33:24.573

如果您为 powershell 安装了电动工具命令行开关。您不需要像 Kieth 提到的那样的路径，命令行的一部分为完整的 tf.exe 路径别名 tf。[因此，只需在此处](http://msdn.microsoft.com/en-us/library/z51z7zy0%28v=VS.80%29.aspx)使用 tf.exe 命令行参考，如果您正确安装了 powershell 命令行开关，所有这些都应该可以工作。

不过，您应该确保您的 powershell 已使用此命令安装它们

```
 Add-PSSnapin Microsoft.TeamFoundation.PowerShell 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-14T21:12:42.000

如果您尝试在同一命令中处理多个文件而不拾取其他文件或循环访问它们，则另一种选择是使用通配符。

```
 tf.exe undo AssemblyInfo* /recursive
   tf.exe checkout AssemblyInfo* /recursive
   #changes files
   tf.exe checkin AssemblyInfo* /recursive 
```

# mongodb - Python 和 mongodb 选择

> ID：13685995
> 
> 赞同：0
> 
> 时间：2012-12-03T15:07:45.023
> 
> 标签：mongodb, nosql

我在 mongodb 中有以下文件：

```
{ "_id" : { "$oid" : "50bc8c38cb5ecd32fb8d12d3"} , "p" : 0 , "d" : <Binary Data> , "kid" : 6384}
{ "_id" : { "$oid" : "s6bc8c3phg5ecd32bbgd12f3"} , "p" : 1 , "d" : <Binary Data> , "kid" : 6384}
{ "_id" : { "$oid" : "k7bc8kf8vg5echy2bbgd12m5"} , "p" : 1 , "d" : <Binary Data> , "kid" : 6385}
 { "_id" : { "$oid" : "k7bc8kf8vg5echy2bbgd12m5"} , "p" : 1 , "d" : <Binary Data> , "kid" : 6386} 
```

我想查询数据库以仅返回具有相同孩子但不同 p 的数据库。对于每个孩子，如果存在，它应该返回 2 行，否则没有。

例如，结果应该是：

```
{ "_id" : { "$oid" : "50bc8c38cb5ecd32fb8d12d3"} , "p" : 0 , "d" : <Binary Data> , "kid" : 6384}
{ "_id" : { "$oid" : "s6bc8c3phg5ecd32bbgd12f3"} , "p" : 1 , "d" : <Binary Data> , "kid" : 6384} 
```

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:10:56.923

您需要在客户端执行两个查询或对它们进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:07:11.733

您可以将聚合方法用作两个查询之一

```
db.myTable.aggregate( [ { '$group': { '_id': "$kid", 'count': { '$sum': 1 } } }, 
                        { '$match': { 'count': { '$gt': 1 } } } ] )['result'] 
```

这应该给你一个有不止一个父母的孩子的名单

```
[{u'count': 2, u'_id': 6384}] 
```

然后，你可以为那些孩子做一个查找。

# wordpress - 在 wordpress “循环”之外搜索

> ID：13685996
> 
> 赞同：1
> 
> 时间：2012-12-03T15:07:46.863
> 
> 标签：wordpress

我正在创建一个仅使用 Wordpress 后端的博客。我找到了获取最新帖子（wp_get_recent_posts）和我需要的所有必需数据的功能。我通过包含 wp-load 来做到这一点，这样我就可以访问 WP 的功能。

但是，我找不到任何可以让我在 Wordpress 的主题循环之外执行搜索的东西，就像我对其余数据一样。

我希望有一个搜索功能，我可以向它传递一个搜索查询，可以是标题、正文内容或标签名称。

我是否在文档中遗漏了一些非常明显的东西，似乎有一个功能可以满足我在 WP 的“循环”之外需要的所有其他功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:14:52.890

那对你有用吗？

```
// query for a given term ("search_term")
$search_query = new WP_Query();
$search_posts = $search_query->query('s=search_term'); 
```

[来源](https://groups.google.com/forum/?fromgroups=#!topic/wp-hackers/JqpLnU-91-k)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:27:29.163

sanchothefat 回复:

您可以将 get_posts() 与搜索参数一起使用：

```
$results = get_posts( array( 's' => 'search term' ) ); 
```

[https://wordpress.stackexchange.com/questions/74763/search-outside-of-the-loop/74766#74766](https://wordpress.stackexchange.com/questions/74763/search-outside-of-the-loop/74766#74766)