# StackOverflow 问答 14426000-14426999

# c++ - .pdb中的函数地址与.exe不同，为什么？

> ID：14426003
> 
> 赞同：3
> 
> 时间：2013-01-20T15:23:14.357
> 
> 标签：c++, windows, winapi, windbg, dbghelp

我通过 SymEnumSymbols 从 .pdb 文件中读取了主函数的地址，值为 **0x0100116e0**，

```
BOOL CALLBACK SymEnumSymbolsProc(PSYMBOL_INFO pSymInfo, ULONG SymbolSize, PVOID UserContext )
{   
    if( pSymInfo != NULL )
    {
        // Show the symbol      

        std::string str = pSymInfo->Name;
        if (str.find("main")!=-1)
        {
            int ss=pSymInfo->Address;
        }

    }
    return TRUE;
} 
```

但是这个函数在VS2008的解密码中的地址是004116E0

```
int _tmain( int argc, const TCHAR* argv[] )
{
    004116E0  push        ebp  
    004116E1  mov         ebp,esp 
    ...
{ 
```

然后我尝试通过将 2 个不同的地址传递给 SymGetSymFromAddr64 来验证结果，我得到了相同的函数符号，唯一的区别是 PIMAGEHLP_SYMBOL64 的地址成员，一个是 100116e0，另一个是 4116E0。我也试过用微软的 dbh.exe 验证一下，命令是

```
load TestSymbolLookup.pdb
TestsymbolLookup [1000000]:n main
addr   : 10116e0
name   : main
size   : b2c
flags  : 0
type   : 2
modbase: 1000000
value  : 0
reg    : 0
scope  : SymTagExe<1>
tag    : SymTagFunction<5>
index  :1 
```

我的 main 函数的地址在 TestsymbolLookup.exe 中是唯一的，但为什么我得到 2 个不同的答案？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:45:04.063

这些地址是“相同的”，它们不同，因为 PDB 中的地址是相对虚拟地址，而您使用 enum proc 找到的地址已被虚拟化。PDB 将始终使用不会被变基等掩盖的地址。

如果您减去基于加载地址（或`.code`部分的开头取决于），您将获得 RVA。[这个](https://stackoverflow.com/questions/2170843/va-virtual-adress-rva-relative-virtual-address)SO question 可能被证明是有用的阅读。

# android - 阅读“我”的名片

> ID：14426004
> 
> 赞同：3
> 
> 时间：2013-01-20T15:23:20.410
> 
> 标签：android, android-contacts

从一些 API 开始，Google 决定添加一个“我”联系人，描述设备所有者的信息。

您如何阅读此联系人的信息？甚至可能吗？我可以从哪个 API 假设它存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T15:58:24.723

看起来问题在这里，但措辞不同。只是想重定向其他提出这个问题的人：

实际问题：

[如何在 Android 设备上获取用户配置文件](https://stackoverflow.com/questions/13350844/how-to-get-the-user-profile-on-android-device)

它将您重定向到稍微不同的版本，但其中包含您可能正在寻找的内容：

[如何获取 Android 设备的主电子邮件地址](https://stackoverflow.com/questions/2112965/how-to-get-the-android-devices-primary-e-mail-address/2175688#2175688)

# php - 如何在 php 中以编程方式从选项卡中获取 IMEI 号码

> ID：14426006
> 
> 赞同：1
> 
> 时间：2013-01-20T15:23:22.540
> 
> 标签：php, imei

当我的网页加载到浏览器中时，我需要从 android 设备中获取 IMEI 号码，页面将用 php 编写。我需要从设备中获取 imei 号码并将其发布到服务器上的某些页面以进行身份​​验证..

我遇到了许多可以通过java客户端应用程序解决的工作，但这对我的项目没有用......

我已经尝试使用 SNMP 协议来获取所有系统信息，例如磁盘驱动器/系统进程列表/正常运行时间/停机时间和基本系统描述，但这不会提供完成此任务所需的信息级别。

有没有办法使用 php 应用程序在 web 上获取 IMEI 号码或系统的任何唯一 ID。

* * *

任何人都可以建议这有什么帮助.. 在 PHP $system = new Java('java.lang.System'); 中获取 Java 类 java.lang.System 的实例；在php程序里面..

这个想法是编写实现 IMEI 获取的 java 程序，即[如何在 android 中以编程方式获取设备的 IMEI/ESN？](https://stackoverflow.com/questions/1972381/how-to-programmatically-get-the-devices-imei-esn-in-android) 在php程序中获取系统信息...

## 参考：php.net/manual/en/java.examples-basic.php

任何机构都建议解决。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:25:57.160

所以，基本上你只想让你的网页可用，Android 设备可以访问？

您的客户端是一个浏览器，而浏览器只是不发送那种信息。查看请求标头以了解可用的内容。如果这样做，这将是一个巨大的隐私问题。

所以如果你真的有这样的需求，你必须创建自己的 Android 应用程序。虽然有 Quercus（可以在 JVM 上运行 PHP），但我认为带有 Android Java SDK 的混搭浏览器会更容易完成。无论如何，PHP5 在语法上与 Java 非常相似。

检查浏览器端的[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)以及[如何在 android 中以编程方式获取设备的 IMEI/ESN？](https://stackoverflow.com/questions/1972381/how-to-programmatically-get-the-devices-imei-esn-in-android)对于IMEI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:33:54.003

您的网页会在应用程序中加载吗？如果是，那么您可以使用[How to get the device's IMEI/ESN programmatically in android?](https://stackoverflow.com/questions/1972381/how-to-programmatically-get-the-devices-imei-esn-in-android) 得到相同的

否则，如果您只是在手机浏览器中加载页面，恐怕它不允许您访问 IMEI

By the way, there are several other ways of authentication besides IMEI. Do you have any specific requirements to use only IMEI. If you post your authentication needs, we might be able to suggest alternative solutions.

# ruby-on-rails-3 - Bundler锁定丝瓜，没有理由

> ID：14426011
> 
> 赞同：1
> 
> 时间：2013-01-20T15:24:04.317
> 
> 标签：ruby-on-rails-3, bundler, feedzirra

所以我想在我的 rails 应用程序中使用 feedzirra。Feedzirra 使用丝瓜络宝石。当我在 Gemfile 中仅指定 feedzira gem 时，它安装了 loofah 1.0.0。但是 loofah 1.0.0 在 utf-8 编码方面存在一些问题。所以我想升级并将gemfile更改为

```
source 'https://rubygems.org'
source 'http://gems.github.com'

gem 'nokogiri', '~> 1.4.7'
gem 'loofah', '~> 1.2.1'
gem 'feedzirra' 
```

但是现在 Bundler 告诉我丝瓜被锁定到 1.0.0

```
You have requested:
  loofah ~> 1.2.1

The bundle currently has loofah locked at 1.0.0.
Try running `bundle update loofah 
```

好的，但是 bundle update loofah 抛出了这个，我很困惑，它什么也没告诉我......

```
Bundler could not find compatible versions for gem "loofah":
  In Gemfile:
    loofah (~> 1.2.1) ruby

    loofah (1.0.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:59:21.660

我删除了所有 gem 并再次运行 bundle install ，这次没有任何问题

# c++ - 使用继承来重定向多个并行层次结构 C++

> ID：14426013
> 
> 赞同：-4
> 
> 时间：2013-01-20T15:24:11.433
> 
> 标签：c++, templates, inheritance, point-cloud-library

这是我最好的问题摘要：

> 当多个单独的类从多个单独的基类中继承每个类时，如何使用继承机制编写一个函数，该函数将来自多个这些基类的对象作为参数？

但最好通过例子来解释。

我有一个在其 API 中提供以下类的库：

```
class A{..};

class B{..}; 
```

这些类用于向使用应用程序隐藏模板的复杂性。实现涉及模板：

```
template <Type1>
class AImpl: public A{..};

template <Type2>
class BImpl: public B{..}; 
```

问题是我需要一个类似的功能：

```
void foo(A insta,B instb); 
```

继承机制在这里似乎对我没有多大帮助，因为如果函数在内部`AImpl`，它就无法自动选择正确`Type2`的`BImpl`（没有动态转换列表）。

到目前为止，我最好的解决方案是将其中一个类模板化两次：

```
template <Type1,Type2>
class BImpl: public B{
  void foo(A insta);
}; 
```

但是这种方法似乎并没有扩展到组合`A`和`B`几个任意模板化实例化可能有用的情况（这需要一个动态转换，它只在确定参数`insta`实际上是一个`AImpl<Type2>`- 或上述列表的情况下才有效演员表）。

在不增加`A`and用户的复杂性的情况下`B`，是否可以做我在这里尝试做的事情，还是有更惯用的方法？

谢谢大家。

## 编辑

鉴于 Bart van Ingen Schenau 的回答，这可能无关紧要，但为了回应 Nawaz 和 Andy Prowl 的询问，我制定了以下示例文件。它需要 PCL 库，但它是工作代码（尽管我试图实现的一个缩减示例）。

感谢大家的意见。

该类`Features`类似于`A`上面和`Keypoint`上面`B`。我也将 PCL 标签添加到问题中。

```
#include <pcl/features/fpfh.h> //gives pcl::PointCloud, pcl::FPFHSignature33, etc.

//interface
class Keypoints{
  public:
    virtual unsigned int size();
    //more virtual methods here
};
class Features{
  public:
    virtual unsigned int size();
    //more virtual methods here
};

//implementation
template<typename KeypointType>
class KeypointsImpl:public Keypoints{
  public:
    typename pcl::PointCloud<KeypointType>::Ptr keypoints_;
    virtual unsigned int size(){ return keypoints_->size();}
    //more implementations of virtual methods here
};

template<typename FeatureType>
class FeaturesImpl:public Features{
  public:
    typename pcl::PointCloud<FeatureType>::Ptr features_;
    virtual unsigned int size(){ return features_->size();}
    //more implementations of virtual methods here
};

//void removeBadFeatures(Keypoints k,Features f); //<-- would like to have this too

int 
main (int argc, char ** argv)
{
    //Class construction could be done anywhere. 
    Features *f = new FeaturesImpl<pcl::FPFHSignature33>();
    Keypoints *k = new KeypointsImpl<pcl::PointXYZ>();

    int a = f->size();
    int b = k->size();
    //removeBadFeatures(k,f); //will alter f and k in concert
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:51:36.827

如果我理解正确，您正在编写一个使用多个独立模板（`Aimpl`、、`Bimpl`等）的库。为了对库的用户隐藏这一事实，您只公开这些模板的非模板基类（`A`、`B`等）。
现在，您有一个函数`foo`需要处理两个模板化类型，作为对其基类的引用传入，并且您面临无法（轻松）推断出参数引用的模板的问题。

只有几个选项可以解决这个困境：

1.  完全根据在基类上工作的操作来编写`foo`（因为这就是所有的信息`foo`）。
2.  认真地重新考虑使用继承隐藏模板的优点您的库设计。
3.  Write the interminable list of `dynamic_cast`s to determine which derive class you are working with. (it is best to avoid this option if in any way possible, because it is a real nightmare.)

# c# - 它是如何在内部工作的

> ID：14426018
> 
> 赞同：0
> 
> 时间：2013-01-20T15:24:54.760
> 
> 标签：c#, entity-framework-5

```
var user = userContext.Users.First(u => u.Id == 1);
user.Name = "John";
userContext.SaveChanges(); 
```

如何`EF`知道只有 Name 列已更改并因此创建 SQL 查询来更新它？

如何`EF`跟踪实体？

它是否在从数据库中获取实体后将其保留在内存中，然后将其与上下文中修改的实体进行比较？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:30:43.177

简短的回答是肯定的。EF 保留从数据库读取的数据的“原始”副本。[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/vstudio/bb896269%28v=vs.100%29.aspx)上阅读有关更改跟踪的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:07:35.603

Entity Framework 可以选择为每个跟踪更改的模型生成一个代理类。本质上，它使用自跟踪属性包装对象。

基本上，你可以设想它实现了这样的东西（我不确定实际的内部结构，但这应该对*理论*有所帮助，如果你想看看它是如何完成的，你可以反编译*）*：

```
internal List<string> ChangedFields = new List<string>();

private string _name;
public string Name
{
    get { return _name; }
    set {
        ChangedFields.Add("Name");
        _name = value;
    }
} 
```

显然，通过为每个字段复制此内容，您所做更改的每个字段都会在`ChangedFields`.

同样，这纯粹是为了说明它如何使用具有显式`get`/的属性来工作`set`，*而不是*具体说明 Entity Framework 是如何做到的。

# java - 字符串输入不会用空格打印？

> ID：14426024
> 
> 赞同：1
> 
> 时间：2013-01-20T15:25:21.513
> 
> 标签：java, string, input

```
System.out.print("\nEnter name: ");
String name = input.next();
System.out.println("Added: " + name); 
```

当我输入像“Ciara Lim”这样的名字时，它只会显示“Ciara”而忽略“Lim”。我想我应该`input.nextLine();`像之前研究过的那样使用。但是当我将其更改为 时`input.nextLine();`，它不会读取我输入的内容，如下所示：

```
Enter name: Added: 
```

怎么了？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:28:23.017

空格被解释为输入之间的分隔符。

如果您想阅读姓氏和姓氏：

```
System.out.print("\nEnter name: (FirstName LastName)");
String name = input.next()+" "+ input.next(); 
```

如果您允许多个名字，这并不能解决问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:33:00.440

使用`input.nextLine()`它的作品很好

`Scanner#nextLine`- 将此扫描器前进到当前行并返回被跳过的输入。完整的例子 -

```
 Scanner input = new Scanner(System.in);
    System.out.print("\nEnter name: ");
    String name = input.nextLine();
    System.out.println("Added: " + name); 
```

输出 -

```
Enter name: Ciara Lim
Added: Ciara Lim 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:29:53.570

您应该使用 nextLine() 方法而不是使用 next()

```
public java.lang.String nextLine() 
```

将此扫描器前进到当前行并返回被跳过的输入。此方法返回当前行的其余部分，不包括末尾的任何行分隔符。位置设置为下一行的开头。

由于此方法继续搜索输入以查找行分隔符，因此如果不存在行分隔符，它可能会缓冲所有搜索要跳过的行的输入

# oop - 继承示例

> ID：14426029
> 
> 赞同：0
> 
> 时间：2013-01-20T15:26:01.223
> 
> 标签：oop, c#-4.0, inheritance

考虑下面的代码片段：

```
 class BaseClass
{
    public void SayHi()
    {
        Console.WriteLine("Hi from base class");
    }

    public virtual void SayHello()
    {
        Console.WriteLine("Hello from base class");
    }
}

class DerivedClass : BaseClass
{
    public void SayHi()
    {
        Console.WriteLine("Hi from derived class");
    }

    public new void SayHello()
    {
        Console.WriteLine("Hello from derived class");
    }
}

 class Program
{
    static void Main(string[] args)
    {
        BaseClass _object = new DerivedClass();

        _object.SayHi();
        _object.SayHello();

        Console.ReadKey();
    }
} 
```

上面的输出显示：

```
Hi from base class 
Hi from derived class 
```

谁能解释一下这背后的原因。另外，如果我们在派生类中创建同名方法，是否不需要重写基类的虚方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:39:24.743

多态性的全部意义在于类型的对象`BaseClass`可以设置为`Derived`类的实例，但具有不同的行为[语义]。如果不是这种情况，那么您将永远无法将新的派生 Form 实例插入到`Winforms`框架中。

OP，你的定义是错误的。虚拟方法是为了启用多态性。关键字的使用`new`也是错误的，应该是`override`为`virtual`方法定义新的行为。

您的基类中的虚拟方法可以在您的基类中被覆盖，这样即使您的变量类型是`BaseClass`，您覆盖的虚拟方法也会在该变量上被调用。

# r - 包含 NA 的字段的范围

> ID：14426033
> 
> 赞同：7
> 
> 时间：2013-01-20T15:26:33.230
> 
> 标签：r, range, missing-data

我正在使用一个数据集，其中 csv 文件的第 11 列包含数字数据。它也包含一些 NA 值。这是对象的str：

```
str(dataheart)
 num [1:4706] 14.3 18.5 18.1 NA NA NA 17.7 18 15.9 NA ... 
```

因此，作为 R 的新学生，我曾期望结果`range(dataheart)`是最小值和最大值。通过查看带有数据的 CSV 文件，我知道最小值和最大值分别为 10.1 和 21.9。

但上面返回一个向量

```
[1] NA NA 
```

我对这个功能的理解不正确吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-20T15:27:26.260

你需要

```
range(x,na.rm=TRUE) 
```

看`?range`

`base`为了获得额外的荣誉，这里是使用和`stats`包中的函数列表`na.rm`：

```
uses_na_rm <- function(x) is.function(fx <- get(x)) && 
                         "na.rm" %in% names(formals(fx))
basevals <- ls(pos="package:base")
basevals[sapply(basevals,uses_na_rm)]
##  [1] "colMeans"                "colSums"                
##  [3] "is.unsorted"             "mean.default"           
##  [5] "pmax"                    "pmax.int"               
##  [7] "pmin"                    "pmin.int"               
##  [9] "range.default"           "rowMeans"               
## [11] "rowsum.data.frame"       "rowsum.default"         
## [13] "rowSums"                 "Summary.data.frame"     
## [15] "Summary.Date"            "Summary.difftime"       
## [17] "Summary.factor"          "Summary.numeric_version"
## [19] "Summary.ordered"         "Summary.POSIXct"        
## [21] "Summary.POSIXlt"        

statvals <- ls(pos="package:stats")
statvals[sapply(statvals,uses_na_rm)]
## [1] "density.default"  "fivenum"          "heatmap"          "IQR"             
## [5] "mad"              "median"           "median.default"   "medpolish"       
## [9] "quantile.default" "sd"               "var" 
```

为了进一步考虑 R 中的哪些函数处理`NA`s 以及如何处理，可以对带有`na.action`参数（`lm`和朋友）的函数进行类似的搜索。

# linux - 如何让 ANTLRWorks 工作？

> ID：14426034
> 
> 赞同：4
> 
> 时间：2013-01-20T15:26:46.420
> 
> 标签：linux, antlrworks

通过遵循[如何安装这个该死的东西？在](http://www.antlr.org/wiki/pages/viewpage.action?pageId=728)www.antlr.org 我有 ANTLR 3.5 工作：

```
$ java -version    # I have Oracle`s Java JDK installed
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)
$ ls
antlrworks-1.5.jar
$ export CLASSPATH=./antlrworks-1.5.jar:$CLASSPATH
$ java org.antlr.Tool -version
ANTLR Parser Generator  Version 3.5 
```

但是根据[ANTLRWorks: The ANTLR GUI Development Environment](http://www.antlr.org/works/)，**ANTLRWorks 也应该包含在上面的 JAR 文件中。我该如何启动它？**

* * *

如果我键入`java a`并双击它，它首先完成它以`java antlr.`指示类路径上没有 antlrworks 包。我不知道是否应该有一个。如果我继续使用双标签，我会得到：

```
antlr.ANTLRException                     antlr.CharStreamIOException              antlr.debug.ListenerBase                 antlr.debug.TraceListener                antlr.SemanticException
antlr.ANTLRHashString                    antlr.collections.AST                    antlr.debug.MessageEvent                 antlr.DefaultFileLineFormatter           antlr.StringUtils
antlr.ANTLRStringBuffer                  antlr.collections.ASTEnumeration         antlr.debug.MessageListener              antlr.FileLineFormatter                  antlr.Token
antlr.ASTFactory                         antlr.collections.impl.ASTArray          antlr.debug.ParserListener               antlr.InputBuffer                        antlr.TokenBuffer
antlr.ASTNULLType                        antlr.collections.impl.ASTEnumerator     antlr.debug.ParserMatchEvent             antlr.LexerSharedInputState              antlr.TokenQueue
antlr.ASTPair                            antlr.collections.impl.BitSet            antlr.debug.ParserMatchListener          antlr.LLkParser                          antlr.TokenStream
antlr.BaseAST                            antlr.collections.impl.IntRange          antlr.debug.ParserTokenEvent             antlr.MismatchedCharException            antlr.TokenStreamException
antlr.ByteBuffer                         antlr.collections.impl.Vector            antlr.debug.ParserTokenListener          antlr.MismatchedTokenException           antlr.TokenStreamIOException
antlr.CharBuffer                         antlr.collections.impl.VectorEnumerator  antlr.debug.SemanticPredicateEvent       antlr.NoViableAltException               antlr.TokenStreamRecognitionException
antlr.CharFormatter                      antlr.CommonAST                          antlr.debug.SemanticPredicateListener    antlr.NoViableAltForCharException        antlr.TreeParser
antlr.CharQueue                          antlr.CommonToken                        antlr.debug.SyntacticPredicateEvent      antlr.Parser                             antlr.TreeParserSharedInputState
antlr.CharScanner                        antlr.debug.Event                        antlr.debug.SyntacticPredicateListener   antlr.ParserSharedInputState             antlr.Utils
antlr.CharStreamException                antlr.debug.GuessingEvent                antlr.debug.TraceEvent                   antlr.RecognitionException 
```

* * *

我`antlrworks-1.5.jar`通过访问[http://www.antlr.org/download.html](http://www.antlr.org/download.html)并单击[版本 1.5 - 适用于 Windows、Linux 和 Mac OS X 进行下载](http://www.antlr.org/download/antlrworks-1.5.jar)。JAR 的文件大小为`2684608`字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:46:25.620

尝试使用[http://www.antlr3.org/download/](http://www.antlr3.org/download/)而不是[http://www.antlr3.org/download.html](http://www.antlr3.org/download.html)
注意最后没有 html。

现在您可以看到文件的实际大小。

AntlrWorks jar 包含 Antlr，但 Antlr jar 不包含 AntlrWorks。

一旦您在系统上安装了 Antlrworks jar 并安装了**[Sun Java](http://www.java.com/en/download/help/linux_install.xml)**。

见：[http ://www.antlr3.org/works/help/tutorial/howtorun.html](http://www.antlr3.org/works/help/tutorial/howtorun.html)

> 在 Linux 上运行
> 
> 要运行 ANTLRWorks，请使用命令行： •$ java -jar antlrworks-1.2.1.jar •</p>
> 
> 注意：在 Linux 上，确保已安装 Sun JDK。不支持任何其他 JDK，因为其中许多在调用 Swing 时会崩溃。

是的，文档已经过时了。只需为 jar 文件使用正确的名称。

请记住，这都是免费软件，由人们根据自己的时间维护，因此旧的东西不会得到应有的更新。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:51:55.947

对不起，如果这个答案太简单了

1）去[antlrworks](http://www.antlr.org/works/)网站下载[antlrworks](http://www.antlr.org/download/antlrworks-1.5.jar)文件

2) cd 到您的下载文件夹，并且：`java -jar antlrworks-1.5.jar`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T19:12:06.807

获取 antlrworks-1.5（带 gui 的 antlr 3.0）的新网址：[http](http://www.antlr3.org/download/antlrworks-1.5.jar) ://www.antlr3.org/download/antlrworks-1.5.jar（antlr.org 现在专用于 antlr 4.0....）

# database - 桌面应用程序使用什么样的数据库？

> ID：14426037
> 
> 赞同：0
> 
> 时间：2013-01-20T15:27:10.523
> 
> 标签：database

我有兴趣了解 dekstop 应用程序使用什么类型的数据库？

它们通常是嵌入式数据库还是只是纯文本和 xml 文件？

我看不到我安装的程序的任何数据库服务器要求？那么他们如何保存数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:30:46.510

没有两个程序是完全相同的，它完全取决于应用程序的存储需求。

如果需要完整的 RDBMS，应用程序倾向于使用嵌入式数据库平台，例如 SQL Server Compact 或 SQLite。这些都是嵌入到应用程序本身的组件，并且不需要运行外部服务器来提供常见的数据库功能，例如 SQL 查询。

另一方面，如果数据是轻量级的或主要是文本的，您可以简单地使用前面提到的平面文件存储系统，例如 XML。

请注意，对于我的一些需要性能的应用程序，我选择使用 SQL Server LocalDB，这是一个可安装的依赖项，但允许动态加载数据库的用户实例，而不是完整安装 SQL Server Express 作为服务运行并永久托管数据库。

# c# - asp.net 验证器验证时如何调用 Javascript 或 jquery？

> ID：14426040
> 
> 赞同：0
> 
> 时间：2013-01-20T15:27:23.103
> 
> 标签：c#, asp.net, vb.net, validation

我有一个 asp.net 应用程序。我在我的 aspx 页面中添加了验证控件。我只想根据验证器在客户端触发的验证事件启用或禁用一个图像。

当 Validator 控件触发 Validate 时，我如何调用 Javascript？

我的意思是是否有任何客户端事件，例如 OnValidate 或 CompareFieldValidator 控件的 afterValidate ？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:58:58.363

您可以通过 3 种方式进行操作。

1）您可以使用自定义验证器在验证器中使用您的 java 脚本

2）你可以从java脚本显式地触发验证器

3）你可以同时使用java脚本和Validator。但是你需要在java脚本中添加一个条件才能一起工作。条件是：

if (Page_ClientValidate() == true) { 把你的代码放在这里 }

# php - Amazon Cloudfront 签名 URL 访问被拒绝问题

> ID：14426045
> 
> 赞同：2
> 
> 时间：2013-01-20T15:28:25.363
> 
> 标签：php, amazon, amazon-cloudfront

我正在尝试为我的 S3 存储桶中的内容构建 Amazone cloudfront 的签名 URL。我已按照从[http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-creating-signed-url-custom-policy.html# private-content-custom-policy-creating-signature-download-procedure](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-creating-signed-url-custom-policy.html#private-content-custom-policy-creating-signature-download-procedure)但我正在构建的 url 的某些原因是收到此消息“AccessDeniedAccess denied”。

我还从**分发设置的****行为**中将“受信任的签名者”添加为“自我”，并为该 分发添加了一个**来源**。我不确定我错过了什么。这是我的php代码

 ****```
<?php

    function rsa_sha1_sign($policy, $private_key_filename) 
    {
        $signature = "";

        // load the private key
        $fp = fopen($private_key_filename, "r");
        $priv_key = fread($fp, 8192);
        fclose($fp);
        //echo $priv_key;
        $pkeyid = openssl_get_privatekey($priv_key);

        // compute signature
        openssl_sign($policy, $signature, $pkeyid);

        // free the key from memory
        openssl_free_key($pkeyid);
        //echo $signature;
        return $signature;
     }

    function url_safe_base64_encode($value) 
    {
        $encoded = base64_encode($value);
        // replace unsafe characters +, = and / with 
        // the safe characters -, _ and ~
        return str_replace(
            array('+', '=', '/'),
            array('-', '_', '~'),
            $encoded);
     }

    $key_pair_id = "MY_KEY_PAIR_ID";
    $donwload_cname = "MY_DOWNLOAD_CNAME";
    $download_url = "MY_DOMAIN_NAME/download/2012/01/FILE_NAME.mp3";

    $DateLessThan = time() + (24*7*60*60);
    $policy = '{"Statement":[{"Resource":"'.$download_url.'","Condition":{"DateLessThan":{"AWS:EpochTime":'.$DateLessThan.'}}}]}';

    $private_key_file = "MY_PRIVATE_KEY_FILE.pem";

    $signature = rsa_sha1_sign($policy, $private_key_file);
    $signature = url_safe_base64_encode($signature);

    $final_url = $download_url.'?Policy='.url_safe_base64_encode($policy).'&Signature='.$signature.'&Key-Pair-Id='.$key_pair_id;
    echo $final_url;

?> 
```

我已尝试使用 download_url 的域名和 cname 但没有效果。那就是我尝试了两种url格式

```
$download_url = "MY_DOMAIN_NAME/download/2012/01/FILE_NAME.mp3" 
$download_url = "MY_DOWNLOAD_CNAME/download/2012/01/FILE_NAME.mp3" 
```

但没有工作。谁可以帮我这个事 。我确信这里缺少一些非常小的东西，或者需要对存储桶设置进行一些处理，但现在不知道该怎么做。需要紧急帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T09:14:05.343

您还必须在下载 URL 中添加协议（http:// 或 https://）。因为有和没有那个的签名会有所不同。云前端后端可能正在使用完整的 URL（带有 http:// 或 https://）生成签名，并且签名与您的签名不匹配，并且您收到拒绝访问错误。

使您的下载网址如下所示，

```
$download_url = "http://MY_DOMAIN_NAME/download/2012/01/FILE_NAME.mp3" 
```

或 https://

```
$download_url = "https://MY_DOMAIN_NAME/download/2012/01/FILE_NAME.mp3" 
```****

# playframework - Play 2.1 RC2 的自制公式

> ID：14426054
> 
> 赞同：4
> 
> 时间：2013-01-20T15:29:29.617
> 
> 标签：playframework, playframework-2.0, homebrew

**问题**

Play 2.1 RC2 有自制配方吗？我已经尝试在谷歌上搜索，但没有运气。谢谢！

**更新 1**

我想我明白了。我找到了 RC1 的公式，并将其修改为 RC2。我现在正在测试它。这是我在本地机器上创建的 play.rb 的内容。

```
# Recipe for play-2.1-RC2

require 'formula'

class Play < Formula
  homepage 'http://www.playframework.org/'
  url 'http://download.playframework.org/releases/play-2.1-RC2.zip'
  sha1 'cd25571250b753cec81e916059025465e541637d'
  version '2.1-RC2'

  def install
    rm Dir['*.bat'] # remove windows' bat files
    libexec.install Dir['*']
    inreplace libexec+"play" do |s|
      s.gsub! "$dir/", "$dir/../libexec/"
      s.gsub! "dir=`dirname $PRG`", "dir=`dirname $0` && dir=$dir/`dirname $PRG`"
    end
    bin.install_symlink libexec+'play'
  end
end 
```

**更新 2**

我为上述文件创建了一个公共要点。因此，这是您可以用来安装 Play 2.1 *RC2*的最终命令：

```
brew install https://gist.github.com/raw/4579402/play.rb 
```

您可能需要取消链接之前安装的 Play 版本，使用：

```
brew unlink play 
```

**更新 3**

截至今天（2/3/2013），Faruk 建议的 brew 命令仍在安装 RC2，我想要 RC4。所以这里是安装 Play 2.1 *RC4*的命令。

```
brew install https://gist.github.com/raw/4705322/play.rb 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:41:19.373

您可以使用以下命令：

```
brew install --devel play 
```

这将安装开发版本（现在是 play-2.1-RC2）而不是稳定版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T16:27:01.063

您可以通过以下方式查看最新版本：

```
$ brew update
$ brew info play 
```

或者去公式文件

```
https://github.com/mxcl/homebrew/blob/master/Library/Formula/play.rb 
```

# php - Twig模板忽略for循环中的值

> ID：14426055
> 
> 赞同：0
> 
> 时间：2013-01-20T15:29:30.960
> 
> 标签：php, for-loop, twig

我希望忽略数组中的一个值，因此这里只显示四个孩子中的三个。中有四个项目，`page.root`但我只想显示其中三个。

```
<nav role="navigation">
    <ul>
      {% for child in page.root %}
        <li>
          <a href="{{ child.url }}">{{ child.title }}</a>
        </li>
      {% endfor %}
    </ul>
</nav> 
```

浏览文档我找不到限制`for`循环的方法。

谢谢您的帮助！

=============

对，我正在运行同样使用 Twig 的 Stacey 应用程序。对不起，我应该更具体。

使用 stacey， slice 是一种方法，因此可以解决我的问题：

```
<nav role="navigation">
    <ul>
      {% for child in slice (page.root, 0,3) %}
        <li>
          <a href="{{ child.url }}">{{ child.title }}</a>
        </li>
      {% endfor %}
    </ul>
</nav> 
```

我在[这里](https://getsatisfaction.com/stacey/topics/slice_filter_in_3_0)找到了。这仅正确输出 page.root 中的三个子项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:43:44.707

> *“模板系统旨在表达演示而不是程序逻辑。” - Django 文档*

所以，你可以使用 if 语句，

```
{% for child in page.root %}
  {% if child.title != 'any title' %}
  <li>
    <a href="{{ child.url }}">{{ child.title }}</a>
  </li>
  {% endif %}
{% endfor %} 
```

[欲了解更多信息](http://twig.sensiolabs.org/doc/tags/if.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:31:33.607

“仅打印前 n 个项目”的常见解决方案是[`slice`](http://twig.sensiolabs.org/doc/filters/slice.html)过滤器：

```
{% for child in page.root|slice(0, 3) %}
    {# params are start and length, so that means the first 3 items #}
{% endfor %} 
```

# python - 从文本中剪切一些特定的行并将它们放入另一个文件中

> ID：14426056
> 
> 赞同：-2
> 
> 时间：2013-01-20T15:29:31.490
> 
> 标签：python, file, file-io

我有一个包含行的文本文件。我想剪切编号在列表中的行，并将它们放入另一个文件中。

例如，如果我有一个包含 的列表`[1, 3, 67]`，那么我想将第 1 行、第 3 行和第 67 行放入一个新文件中，并将它们从原始文件中删除。在 Python 中最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:37:00.253

如果您不想将所有行都保留在内存中，这是一个想法：

```
def lines(fname, numbers):
    numbers = sorted(numbers, reverse=True)
    with open(fname) as f:
        for n, line in enumerate(f, 1):
            if n == numbers[-1]:
                yield line
                numbers.pop()
                if not numbers:
                     break 
```

文档链接：

*   [`itertools.count`](http://docs.python.org/2/library/itertools.html#itertools.count)
*   [`zip`](http://docs.python.org/2/library/functions.html#zip)

**编辑：**如果您可以一次读取整个文件（并且想要返回行列表），您可以使用`readlines()`来获取所有行的列表，但对我来说这没有任何意义，所以我d 做我上面展示的。但是，您可以这样做：

```
def lines(fname, numbers):
    with open(fname) as f:
        lines = f.readlines()
        return [lines[i] for i in numbers] 
```

如果您想要“自然”编号，请更改`lines[i]`为。`lines[i+1]`

**Edit2：**那么你仍然需要编写**两个**新文件：一个包含这些行，一个包含其余行。为此，`open`文件并使用文件对象的[`writelines`](http://docs.python.org/2/library/stdtypes.html#file.writelines)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:41:28.660

使用`itertools.islice()`：

例如，如果文件是：

```
1
2
3
4
5
6
7
8
9 
```

代码：

```
In [107]: li=[2,4,6]  # this list should be sorted first
In [108]: with open("abc.txt") as f:
    prev=0
    for num in li:
        print list(islice(f,num-prev-1,num-prev))       
        prev=num
   .....:         
['2\n']
['4\n']
['6\n']

In [109]: li=[1,7,9]

In [110]: with open("abc.txt") as f:
    prev=0
    for num in li:
        print list(islice(f,num-prev-1,num-prev))  #print or do something else     
        prev=num
   .....:         
['1\n']
['7\n']
['9\n'] 
```

# javascript - AJAX、JS 和 Select2 的问题

> ID：14426065
> 
> 赞同：1
> 
> 时间：2013-01-20T15:30:37.557
> 
> 标签：javascript, ajax, jquery, jquery-select2

如果我做了一些愚蠢的事情，我深表歉意，但我对 Select2 和 Ajax 是全新的，并且在尝试完成这项工作时遇到了很多麻烦。我正在尝试创建自己的 json 文件（~~链接已删除~~）以与我正在构建的表单（~~链接已删除）一起使用。~~在 Chrome 中使用 Firefox Lite，我能够从我的服务器获得响应（200 OK），但选择框不显示搜索结果。我的 json 文件似乎使用[http://jsonformatter.curiousconcept.com](http://jsonformatter.curiousconcept.com)正确验证。你也可以在

有什么想法或提示吗？

**json.php 来源：**

```
<?
    $myArray = array(
            array( "id" => "id1", "text" => "title1" ),
            array( "id" => "id2", "text" => "title2" )
            );

    echo json_encode($myArray); 

?> 
```

**select.php 源码：**

```
<html>
<head>
    <link href="select2/select2.css" rel="stylesheet"/>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="select2/select2.js"></script>
    <script>
        function movieFormatResult(movie) {
            var markup = "<table class='movie-result'><tr>";
            markup += "<td class='movie-info'><div class='movie-title'>" + movie.title + "</div>";
            markup += "</td></tr></table>"
            return markup;
        }

        function movieFormatSelection(movie) {
            return movie.title;
        }

    </script>
    <script id="script_e6">
        $(document).ready(function() {
            $("#e6").select2({
                placeholder: "Search for a movie",
                minimumInputLength: 1,
                ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
                    url: "http://api.rottentomatoes.com/api/public/v1.0/movies.json",
                    dataType: 'jsonp',
                    data: function (term, page) {
                        return {
                            q: term, // search term
                            page_limit: 10,
                            apikey: "my-api-key" // please do not use so this example keeps working
                        };
                    },
                    results: function (data, page) { // parse the results into the format expected by Select2.
                        // since we are using custom formatting functions we do not need to alter remote JSON data
                        return {results: data.movies};
                    }
                },
                formatResult: movieFormatResult, // omitted for brevity, see the source of this page
                formatSelection: movieFormatSelection,  // omitted for brevity, see the source of this page
                dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
            });
        });
    </script>
    <script id="script_e6a">
        $(document).ready(function() {
            $("#e6a").select2({
                placeholder: "Search for a movie",
                minimumInputLength: 1,
                ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
                    url: "http://willwelch.net/play/nhs/pstudents/json.php",
                    dataType: 'jsonp',
                    data: function () {
                        return;
                    },
                    results: function () { // parse the results into the format expected by Select2.
                        return {results: data};
                    }
                },
                formatResult: movieFormatResult, // omitted for brevity, see the source of this page
                formatSelection: movieFormatSelection,  // omitted for brevity, see the source of this page
                dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
            });
        });
    </script>    
</head>

<body style="height:500px;">
    <p>original example (works)</p>
    <input type="hidden" class="bigdrop" id="e6" style="width: 600px; display: none;"><br><br>
    <p>my version (does not work)</p>
    <input type="hidden" class="bigdrop" id="e6a" style="width: 600px; display: none;">
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:38:47.933

您将 url (willwelch.net) 称为 jsonp 调用。在您的php中，您必须捕获`callback`ajax调用传递的参数，并将结果包装在函数调用中，函数名=回调参数的内容。

所以对你的 php 的调用可能是：

```
 http://willwelch.net/play/nhs/pstudents/json.php?callback=myfunc 
```

你应该返回的是：

```
 myfunc([{"id":"id1","text":"title1"},{"id":"id2","text":"title2"}]) 
```

请注意，ajax 调用将自动添加回调参数。

**编辑**

您还需要更改`return`方法以添加`data`为输入参数：

```
 results: function (data) { // parse the results into the format expected by Select2.
               return {results: data};
         } 
```

# php - CURL POST/GET URL 存储在变量中时不起作用

> ID：14426072
> 
> 赞同：0
> 
> 时间：2013-01-20T15:32:19.987
> 
> 标签：php, curl

简而言之...

**不工作**

```
$url = "http://www.example.com/test/index.php?id=1&token=723648723";  <-- Set by previous Curl   
$ch = curl_init(); 
    curl_setopt ($ch, CURLOPT_URL, $url); 
    curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
    curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
    curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
    $html = curl_exec ($ch); 
    echo $html; 
```

**作品**

```
$ch = curl_init(); 
    curl_setopt ($ch, CURLOPT_URL, "http://www.example.com/test/index.php?id=1&token=723648723"); 
    curl_setopt ($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6"); 
    curl_setopt ($ch, CURLOPT_TIMEOUT, 60); 
    curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 0); 
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookie); 
    curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookie); 
    $html = curl_exec ($ch); 
    echo $html; 
```

是什么赋予了？我试过 urlencode、urldecode、rawurlencode 都没有成功。

显然，在浏览器中发布网址可以正常工作。

**编辑：我可能应该添加 url 是从另一个 curl 在此之前运行的。如果我将 url 存储在一个变量中，它可以工作，但如果我让另一个 curl 设置变量，它不会。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:09:26.883

试试这个：

```
$url = "http://www.example.com/test/index.php?id=1&token=723648723"; // < -- Set by previous Curl
$ch      = curl_init($url); // init with the given $url here

// remove curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.6) Gecko/20070725 Firefox/2.0.0.6");
curl_setopt($ch, CURLOPT_TIMEOUT, 60);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie);

$html = curl_exec($ch);
if ($html === false) // check for errors
{
    // throw new Exception('Curl error: ' . @curl_error($ch));
    echo 'Curl error: ' . @curl_error($ch);
}

@curl_close($ch); // close properly
echo $html; 
```

**更新 3**：清理 html、空格、新行、替换`&amp;`和强制字符串数据类型...

```
$url = (string) trim(strip_tags($url));
$url = str_replace('&amp;', '&', $url);
$ch  = curl_init($url);
// etc 
```

# sql-server-2008 - SQL Server 2012 Intellisense 有效，但对于 2008 无效

> ID：14426076
> 
> 赞同：0
> 
> 时间：2013-01-20T15:32:57.783
> 
> 标签：sql-server-2008, intellisense, sql-server-2012, ssms-2012

从我拿到机器的那一天起，他们甚至在我的机器上安装了 SSMS 2008 之前，我已经安装了 2012，所以我不知道智能感知是否曾经在 2008 上工作过。但是它在 2012 上工作。2012 是否覆盖了一些 dll 或在注册表中的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T19:46:15.863

是的。连接到 2008+ SQL Server 时，SSMS 2008+ 应该具有智能感知功能。如果您没有获得 2008 数据库的智能感知，我建议您进行网络搜索或联系 Microsoft 支持。

这是一篇[MS 支持文章](http://support.microsoft.com/kb/2531482)，说明了有关 VS2010 SP1 的已知原因。

# javascript - async.series 使用粗箭头或自引用控制流错误

> ID：14426078
> 
> 赞同：0
> 
> 时间：2013-01-20T15:33:15.053
> 
> 标签：javascript, asynchronous, coffeescript

我在一个类中使用异步库，并在其中一个系列步骤中使用粗箭头会导致触发两个回调，其中带有粗箭头的函数直接调用结束步骤，而不是系列中的下一步。为什么是这样？这是一个简化的例子。

```
class FakeProfileRepository

    getByEmail : (email, callback) ->
        return callback null, email

    update : (data, callback) ->
        async.series
            checkNull: (next) ->
                if data and data.uname
                    next null
                else
                    next Error("No profile to save")

            checkEmailExists: (next) =>
                @getByEmail 'test', (err, results) ->
                    if not results
                        next new Error("Could not find an existing profile to update")
                    else
                        next err

            checkProfile: (next) ->
                return next new Error('foo')

        , (err, results) ->
            console.log('series ended with error:' + err) 
```

这会导致触发额外的回调， checkEmailExists 触发它对最终结果函数的回调，以及 checkProfile 步骤（正确）触发最后一个结果函数

```
EXPECTED:
series ended with error:foo

ACTUAL: (two callbacks fired)
series ended with error:foo
series ended with error:null 
```

如果我使用粗箭头，或者即使我设置 self= this 并使用普通箭头，似乎会发生此错误

```
 checkEmailExists: (done) ->
            self.getByEmail data.uname, (err, results) -> 
```

为什么会出现这个错误，有没有更好的方法来引用类方法，又不会搞乱async的控制流程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:32:31.623

有几件事要检查；

您对“更新”方法的定义不使用粗箭头，因此您需要绝对确保该方法在调用时始终具有正确的“this”。通常，您会将其识别为 someinstance.update(...) 调用。

您绝对确定您的代码不会触发对更新方法的两次调用吗？您可以在方法的开头添加一个 console.log 以确保。

您的错误处理看起来也有些古怪，您可能希望稍微精简一下示例，以确保它的行为符合您的要求。

# jquery - 将 HTML 编码的
转换为 jquery .text() 中的 html 换行符

> ID：14426079
> 
> 赞同：4
> 
> 时间：2013-01-20T15:33:16.513
> 
> 标签：jquery, html, newline

我在变量中有一些文本`sometext`，我想`div`使用`$('div').text(sometext);`. 问题是所有`<br/>`的 s 都`sometext`变成了`&lt; br/ &gt;`. 我不能使用`$('div').html()`，因为我想在 中保留很多内部结构`div`，所以我只能使用该`.text()`功能。

因此，一旦我将文本传递给`div`，有没有办法将编码`<br/>`标记更改为 HTML 中的真正换行符？我的意思是这样的：

```
$('div').convertMyBRsToHTML(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:49:23.100

您请求的函数应如下所示：

```
$.fn.convertMyBRsToHTML = function(text){
    this.text(text);
    this.html(this.html().replace(/&lt;br\s*\/&gt;/g,'<br/>'));
    return this;
} 
```

现在您可以通过以下方式使用：

```
$(YOUR_SELECTOR).convertMyBRsToHTML("<b>Some</b> new text.<br />next line<br />and so on"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T15:35:27.837

`<br>`您可以在设置文本之前替换s：

```
$('div').text(sometext.replace(/<br\s*\/?>/gi, '\n'); 
```

# java - Windows 虚拟键盘

> ID：14426080
> 
> 赞同：0
> 
> 时间：2013-01-20T15:33:19.697
> 
> 标签：java, windows, keyboard, virtual

我有一个 JSP 页面，里面有一个按钮。当我单击该按钮时，将弹出 Windows 屏幕键盘。我该怎么做？我做了研究，发现“Runtime.getRuntime().exec("osk");” 但是我在哪里实现这些线？我把它放在servlet中吗？还是在我的jsp页面？

`<td><INPUT type="button" value="on screen keyboard" onclick="Runtime.getRuntime().exec("osk");"/>`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:25:34.607

无法从网页调用虚拟键盘——这就是您的 JSP 最终为用户提供的。您拥有的代码片段适用于在计算机内部而不是在浏览器中运行的 Java SE 应用程序。

您可以做的是使用 JavaScript 在您的网页上构建一个类似的小工具。已经有很多这样的解决方案可用，只是谷歌的“javascript虚拟键盘”。[http://www.greywyvern.com/code/javascript/keyboard](http://www.greywyvern.com/code/javascript/keyboard)就是一个例子。

# objective-c - KVC 兼容类

> ID：14426084
> 
> 赞同：1
> 
> 时间：2013-01-20T15:33:43.873
> 
> 标签：objective-c, cocoa, kvc

在 iOS 文档中读取 KVC Compliant 时。我试图测试一个类。是否符合 KVC 类？

但我有一些问题：

1.  属性“Name”、“Age”没有设置器，并且该类仍在使用 KVC 且没有错误并且不会触发任何异常

2.  当没有为属性创建 setter 时，编译器会做什么？它是否创建了 setter 和 getter 对？

    人.h

    ```
    @interface Person : NSObject
    {
        NSString *name;
        NSInteger age;
    } 
    ```

    人.m

    ```
    @implementation Person

    - (id)init
    {
        self = [super init];
        if (self) {
            name = @"Duc Nguyen";
            age = 10;
        }
        return self;
    } 
    ```

    视图控制器.m

    ```
    - (IBAction)showKeyKVC:(id)sender {
        //--test kvc
        name1.text = [person valueForKey:@"name"];
        age1.text = [NSString stringWithFormat:@"%@", [person valueForKey:@"age"]];
    } 
    ```

当我按下按钮时，结果是：年龄：10，姓名：Duc Nguyen。我不明白在这种情况下该类如何使用 KVC？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-06T06:33:05.140

答案在[Accessor Search Patterns for Simple Attributes](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/SearchImplementation.html#//apple_ref/doc/uid/20000955-CJBBBFFA) KVC 指南中。

> **setValue:forKey 的默认搜索模式：**
> 
> `setValue:forKey:`当为属性调用默认实现时，将使用以下搜索模式：
> 
> 1.  在接收者的类中搜索名称与模式匹配的访问器方法`set<Key>:`。
> 2.  如果没有找到访问器，并且接收者的类方法`accessInstanceVariablesDirectly`返回`YES`，则在接收者中搜索名称与模式`_<key>`、`_is<Key>`、`<key>`或相匹配的实例变量`is<Key>`。

默认实现是对`accessInstanceVariablesDirectly`方法返回YES，所以KVC机制实际上是从`name`和`age`实例变量中获取值。

# ssis - 导入包后即使删除后仍保留在数据库中

> ID：14426086
> 
> 赞同：0
> 
> 时间：2013-01-20T15:33:56.073
> 
> 标签：ssis, sql-server-2008-r2

我是 SQL Server 新手。我将存储在我的文件系统上的一个包导入到我的 SQL Server 2008R2 数据库中。后来我从文件系统中删除了这个包。但是，该包继续保留在 SQL Server 数据库中，甚至可以执行！

我所知道的一点是这不应该发生，因为即使是 SQL Server 也会引用存储在文件系统中的那个包。所以我的问题是：这种行为正常吗？如果不是，可能是什么原因

切里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:42:58.897

当包在文件系统上时，它就可以放在你想要的任何地方。`dbo.sysssispackage`当包在数据库中时，如果您使用包部署模型，它将存储在 2008/2008R2 和 2012 的 msdb 目录中。2005 年使用`dbo.sysdtspackages90`和 2012 年在项目部署模型中将使用`SSISDB`目录。

所以现在你知道它在一个表中，这就是代理能够引用的。如果您想摆脱它，请调用适当的存储过程。在这种情况下，`msdb.dbo.sp_ssis_deletepackage`它需要 2 个参数，包的名称和包所在的文件夹。根文件夹是`00000000-0000-0000-0000-000000000000`. 否则，使用正确的包名称运行以下查询，它将生成删除所述包所需的调用。

与往常一样，在盲目运行之前评估语句。

```
SELECT 
    P.name
,   P.folderid
,   'EXECUTE msdb.dbo.sp_ssis_deletepackage @name = ''' + P.name + ''', @folderid = ''' + CAST(P.folderid as varchar(50)) + '''' AS run_me
FROM 
    dbo.sysssispackages AS P
WHERE
    P.name = 'Package' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T07:00:55.587

经过深思熟虑并询问了一些精通sql的认真的人，我觉得这种行为很自然。创建这两个文件夹只是为了区分获取包的来源。导入后，包将保存在数据库中。那么它的位置并不重要。在我的示例中，创建了包的副本并将其存储在数据库中。谢谢大家的帮助和时间:)

# java - 插入日期和时间

> ID：14426088
> 
> 赞同：0
> 
> 时间：2013-01-20T15:34:17.340
> 
> 标签：java, android, sqlite

我正在尝试在我的 sqlite 数据库中插入日期选择器和时间选择器中的值。我已将日期和时间存储在对象变量中，然后在我的 DBhandler 类中调用一个方法以通过 contentvalue 对象插入它们。

现在我在这里失败的是实际的插入和数据类型。

我在“timeApp”和“dateApp”的以下代码中遇到错误我将这些变量作为 DATE 和 TIME 变量传递给 createAppointmentEntry 方法：

错误信息：

```
 The method put(String, String) in the type ContentValues is not applicable for the arguments (String, Time) 
```

处理发生的错误：

```
public void createAppointmentEntry(String nameApp, String typeApp, Time timeApp, Date dateApp ,String commentApp, Boolean onOrOff) {

        ContentValues cv = new ContentValues();
        cv.put(KEY_NAMEAPP, nameApp);
        cv.put(KEY_TYPEAPP, typeApp);

                    //ERROR on the following two 'puts'
        cv.put(KEY_TIMEAPP, timeApp);
        cv.put(KEY_DATEAPP, dateApp);

        cv.put(KEY_COMMENTAPP, commentApp);
        cv.put(KEY_ALARM, onOrOff);
        ourDatabase.insert(DATABASE_TABLE, null, cv); 
```

这是我的数据库列：

```
 public static final String KEY_ROWAPPID = "_appid";
public static final String KEY_NAMEAPP = "app_name";
public static final String KEY_TYPEAPP = "app_type";
public static final String KEY_TIMEAPP = "app_time";
public static final String KEY_DATEAPP = "app_date";
public static final String KEY_COMMENTAPP = "app_comments";
public static final String KEY_ALARM = "app_alarm"; 
```

我的 onCreate 方法：

```
db.execSQL("CREATE TABLE " + DATABASE_TABLEAPP + " (" +
            KEY_ROWAPPID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAMEAPP + " TEXT NOT NULL, " +
                KEY_TYPEAPP + " TEXT NOT NULL, " +
                KEY_TIMEAPP + " TEXT NOT NULL, " +
                KEY_DATEAPP + " TEXT NOT NULL, " +
                KEY_COMMENTAPP + " TEXT NOT NULL, " +
                KEY_ALARM + "BOOLEAN NOT NULL);"

                ); 
```

下面是我设置时间和日期对象变量的方法：

```
 Date setDate = new Date(dobYear - 1900, dobMonth, dobDate);

Time timeToSet = new Time();
timeToSet.set(0, dobMinute, dobHour); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:16:00.423

从编译错误和 的 API 来看`ContentValues`，似乎`ContentValues`只支持原始类型，`String`而`byte[]`. 所以，尝试更换：

```
//ERROR on the following two 'puts'
 cv.put(KEY_TIMEAPP, timeApp);
 cv.put(KEY_DATEAPP, dateApp); 
```

和：

```
 cv.put(KEY_TIMEAPP, timeApp.toString());
 cv.put(KEY_DATEAPP, dateApp.toString()); 
```

您可以使用格式化程序将`Time`和格式化为能够将其解析回`Date`的标准。`String`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:41:38.520

我猜到了一些东西，但我不确定 `KEY_ALARM + "BOOLEAN NOT NULL);"` 您是否在 create 语句中遗漏了一个空格。尝试删除它并使用空格重新创建它。

```
db.execSQL("CREATE TABLE " + DATABASE_TABLEAPP + " (" +
            KEY_ROWAPPID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_NAMEAPP + " TEXT NOT NULL, " +
                KEY_TYPEAPP + " TEXT NOT NULL, " +
                KEY_TIMEAPP + " TEXT NOT NULL, " +
                KEY_DATEAPP + " TEXT NOT NULL, " +
                KEY_COMMENTAPP + " TEXT NOT NULL, " +
                KEY_ALARM + " BOOLEAN NOT NULL);" 
```

`KEY_ALARM + " BOOLEAN NOT NULL);"` 昨天犯了同样的错误。如果您编写了一个 Helperclass，只需更改`DATABASE_VERSION`Else 调用`db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLEAPP);` ，Helper 类就会调用它，例如

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
            "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLEAPP);
    onCreate(db); //recreate 
} 
```

使用新语句比自动重新创建数据库。

# php - IF HTML element display is none, then do something, ELSE do something else - PHP

> ID：14426094
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:34:49.833
> 
> 标签：php, html

> **可能重复：**
> [从 PHP 获取 CSS 样式](https://stackoverflow.com/questions/1399210/get-css-style-from-php)

我想做一个`if`可以做的事情，只有当 div 的显示不是无时。这是一个例子：

```
<div id="div_1" style="display:none;">blah blah blah</div>
<?php if (div_1 display is none){...} else {echo $variable;} ?> 
```

知道我将如何处理这部分`(div_1 display is none)`吗？？？如果可以，当然可以！先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:40:58.047

你不能做那个服务器端。也许你可以使用 JavaScript 和 Jquery 是一个很好的工具：

```
if($('#div_1').css('display') == 'none')
{
    ...
}
else {
    $('#Some_Div').html('...');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:58:55.003

对于非 jquery 纯 'ol javascript

```
if (element.style.display == 'none'){
   //your element is not visible
} else {
   //your element is visible
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:02:02.983

您可以使用 Ajax 和 JavaScript

```
<script>
$(document).ready(function() {
if($('#div').is(':hidden')) {
$.ajax({
   url: "file.php",
   type: "POST",
   data: {somedata: "data"}, 
      success: function(msg) {

       $("#div").html(msg);
      }
});
}
else {
//...
}
});
</script> 
```

# ruby - 使用 class_eval 创建方法

> ID：14426100
> 
> 赞同：3
> 
> 时间：2013-01-20T15:35:23.570
> 
> 标签：ruby, methods, metaprogramming, class-eval

我想写一个方法，它接受一个参数并创建另一个方法，用这个参数命名。这是我的代码

```
class Class
  def createMethod(attr_name)
    attr_name = attr_name.to_s
    class_eval %Q{
        def #{attr_name}
            puts "bar"
        end
    }
  end
end

p Class.new.createMethod("foo").respond_to?(:foo) 
```

不幸的是，`respond_to?(:foo)`评估为`false`. 怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:48:06.023

这是因为`class_eval`它是一个类方法，并且您在实例的上下文中调用它。你可以这样做：

```
class Class
  def createMethod(attr_name)
    attr_name = attr_name.to_s
    self.class.class_eval %Q{
        def #{attr_name}
            puts "bar"
        end
    }
    self # Return yourself if you want to allow chaining methods
  end
end 
```

这是执行此操作时的输出`irb`：

```
irb(main):001:0> class Class
irb(main):002:1>   def createMethod(attr_name)
irb(main):003:2>     attr_name = attr_name.to_s
irb(main):004:2>     self.class.class_eval %Q{
irb(main):005:2"         def #{attr_name}
irb(main):006:2"             puts "bar"
irb(main):007:2"         end
irb(main):008:2"     }
irb(main):009:2>   end
irb(main):010:1> end
=> nil
irb(main):011:0> clazz = Class.new
=> #<Class:0x007fd86495cd58>
irb(main):012:0> clazz.respond_to?(:foo)
=> false
irb(main):013:0> clazz.createMethod("foo")
=> nil
irb(main):014:0> clazz.respond_to?(:foo)
=> true 
```

# hosting - 什么是托管带宽？

> ID：14426103
> 
> 赞同：-5
> 
> 时间：2013-01-20T15:36:23.887
> 
> 标签：hosting

我总是看到这个术语有混淆，我[在维基百科中找到了这个](http://en.wikipedia.org/wiki/Bandwidth_%28computing%29#Bandwidth_in_web_hosting)：

> 在网站托管中，“带宽”一词通常被错误地用于描述在规定时间内传输到网站或服务器的数据量，例如一个月内累积的带宽消耗，以每月千兆字节为单位。用于表示每月或给定期间的最大数据传输量的更准确的短语是每月数据传输。

这是如何测量的？如果用户上传视频，那么费用将是*上传 + 下载 x（观看次数）*？

托管带宽**无限**是什么意思？

如果对带宽有限制，这是使用基于线程的服务器（限制服务器资源）而不是使用事件驱动的**真正原因吗？**

即：在事件驱动中，与基于线程相比，没有消耗物理限制，在基于线程的情况下，创建的每个线程都会消耗内存和 CPU 资源！不是用于事件驱动而不是解决 10k 问题，所以我猜基于线程用于强制机器停止并等待其他客户端被替换！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:45:53.593

如果我正确理解您的问题，带宽包括上传和下载。任何需要以牺牲主机为代价通过线路发送数据的活动都将被视为带宽。

使用基于线程或事件驱动的架构是提高处理效率和减少阻塞的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:44:04.803

通常，在**共享主机**服务器上，带宽是根据 Apache Web 服务器日志、FTP 服务日志以及可能的其他一些服务计算得出的。

计算的流量是 apache 等传输的文件大小的总和，因此它可能不包括这些“易于计算带宽”服务“外部”的流量。例如，MySQL 流量可能不包括在内。

共享主机意味着一台服务器运行许多网站和用户（托管客户）帐户。

* * *

在**专用服务器**和**虚拟机**上 - 流量计算通常基于网络驱动程序/接口信息 - 它更精确且独立于服务。

* * *

托管带宽无限的含义 - 这可能意味着您的托管服务通过网络接口连接到 Internet，这太慢了，无法超过分配给托管服务提供商的一个用户/客户的非常大的月份传输。

* * *

通常 - 托管服务提供商必须为其互联网服务提供商支付传输费用。他们的账单不仅基于连接速度，如“家庭互联网服务”。

# javascript - 在 jquery-localize 中处理默认语言

> ID：14426104
> 
> 赞同：1
> 
> 时间：2013-01-20T15:36:34.717
> 
> 标签：javascript, localization

我正在尝试使用 jquery-localize 来本地化我的小应用程序。如果用户是丹麦人，我希望使用丹麦语，否则使用英语。

我尝试什么都不做，但如果使用未知语言的应用程序，那么所有字符串都是空的。

我目前的解决方案是这个

```
chosenLanguage = window.navigator.userLanguage || window.navigator.language;
langSearch = new RegExp('^da', 'i');
if (chosenLanguage.match(langSearch)){
  // Do nothing
}
else {
  $("[data-localize]").localize("local", { language: "en" });
} 
```

但是这个解决方案似乎太复杂而无法正确。任何帮助或建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:22:36.227

jquery-localize 库似乎是相当原始的字符串自定义工具，甚至没有回退到通用语言环境的想法。您当前的解决方案也太简单而不是太复杂。它依赖于“浏览器语言”，这与用户的语言偏好没有任何关系。相反，设计和实现语言切换。通常的方法是将英文版本作为主要版本，并提供一些链接或按钮以更改为其他语言。

# objective-c - 在 Mac 应用程序中使用来自 Keychain 的证书

> ID：14426105
> 
> 赞同：2
> 
> 时间：2013-01-20T15:36:35.917
> 
> 标签：objective-c, xcode, cocoa, certificate, keychain

我正在尝试构建一个迷你应用程序来共同设计一个带有`codesign`实用程序的 Mac OS X 应用程序和我在钥匙串中的开发人员证书。为此，我使用`NSTask`，就像这样：

```
[task setLaunchPath:@"/usr/bin/codesign"];
// ...
NSString *certificateName = @"\"3rd Party Mac Developer Application: Firstname Lastname\"";
NSString *appName = @"\"/path/to/My App.app\"";
NSArray *args = [NSArray arrayWithObjects:@"-s", certificateName, appName, nil];
// ...
[task launch]; 
```

我使用 a`NSPipe`来捕获输出并收到此错误消息：`no identity found`...
但是，如果我通过终端手动启动此命令，则应用程序已签名良好（因此这不是证书安装错误等问题）。

我认为问题出现是因为我的应用程序无法访问钥匙串中的证书（但我可以通过终端）。

有人已经遇到过这个问题吗？

提前谢谢，最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:53:13.437

您不应在以下参数中嵌入额外的引号`NSTask`：

```
NSString *certificateName = @"3rd Party Mac Developer Application: Firstname Lastname";
NSString *appName = @"/path/to/My App.app"; 
```

参数中的空格是自动处理的，不需要引号。

# html - 如何更改整个页面的默认滚动条，而不仅仅是在 div 中

> ID：14426112
> 
> 赞同：6
> 
> 时间：2013-01-20T13:07:32.100
> 
> 标签：html, css, jquery-ui

我正在尝试借助以下教程更改网页的默认滚动条：http:
[//manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

问题是滚动条会随着我们放入特定 div 标签而不是整个页面的内容而改变。例如，在这个[演示](http://manos.malihu.gr/tuts/custom-scrollbar-plugin/fluid_scrollbar_example.html)中，滚动条发生了变化，但整个页面没有变化。任何人都可以帮助我更改整个页面的滚动条，而不仅仅是特定的内容块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T16:58:32.477

您正在使用的样式`#content_1`仅应用于 div（`mCustomScrollbar`检查代码时查看类？）。根据您发布的教程：

> 包含文件后，在要添加自定义滚动条的元素上调用 mCustomScrollbar 函数。

因此，如果您希望它应用于整个页面，则需要在主体上调用它，而不是在该 div 上调用它：

```
$("body").mCustomScrollbar(); 
```

***编辑：***
从开发人员的页面上，他评论说它不会专门工作，`body`但你可以用容器 div 而不是 body 做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-19T16:04:59.750

也许对某人来说它仍然是真实的。所以解决方法如下。

```
$(function()
{
	var win = $(window);
	var isResizing = false;
	win.bind(
		'resize',
		function()
		{
			if (!isResizing) {
				isResizing = true;
				var container = $('#full-page-container');
				container.css(
					{
						'width': 1,
						'height': 1
					}
				);
				container.css(
					{
						'width': win.width(),
						'height': win.height()
					}
				);
				isResizing = false;				
			}
		}
	).trigger('resize');

        $('body').css('overflow', 'hidden');

	// IE Tweak
	if ($('#full-page-container').width() != win.width()) {
		win.trigger('resize');
	}

        $('#full-page-container').mCustomScrollbar({
            theme: "dark",
            scrollbarPosition: "inside",
            scrollInertia: 300,
            snapAmount: 50,
            scrollButtons: { 
                enable: true
            },
            contentTouchScroll: true,
            scrollEasing:"easeOutCirc",              
            autoDraggerLength:true,               
            advanced:{  
                updateOnBrowserResize:true,   
                updateOnContentResize:true   
            }
        });
});
```

```
*{
  margin: 0;
  padding: 0;
}

body {
  overflow: hidden;
  background-color: #f1f1f1;
}

#full-page-container
{
  overflow: hidden;
}

.container{
  width: 700px;
  height: 1200px;              
}

.main-content{              
  height: 1200px;              
}

.content{
  width: 250px;
  height: 200px;
  margin: 0 auto;                
  margin-bottom: 10px;
  background-color: #0066cc;
}
```

```
<!DOCTYPE html>
<html>
    <head>
        <title>mCustomScrollBar</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.0.9/jquery.mCustomScrollbar.min.css">
      </head>
  <body>
    <div id="full-page-container">
      <div class="container">            
        <div class="main-content">
            <div class="content">Content</div>
            <div class="content">Content</div>
            <div class="content">Content</div>
            <div class="content">Content</div>
            <div class="content">Content</div>
            <div class="content">Content</div>
            <div class="content">Content</div>
        </div>
      </div>
    </div>
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.0.9/jquery.mCustomScrollbar.concat.min.js"></script>
```

# wpf - 使用 WPF 数据绑定时实现事务编辑（提交/恢复）的好方法

> ID：14426119
> 
> 赞同：3
> 
> 时间：2013-01-20T15:38:09.040
> 
> 标签：wpf, data-binding, transactions

我有一个相当标准的要求——我需要能够打开一个对话框，用户可以在其中更改数据绑定字段中的值，然后选择单击“确定”或“取消”，单击“取消”会恢复更改。

我看过`IEditableCollectionView`,`IEditableObject`和`BindingGroup`s，但它们似乎都是为了一次编辑一个项目。我的程序在列表中提供了一组对象，用户从列表中选择一个项目并使用`SelectedItem`-bound `TextBox`es 对其进行编辑。这意味着可以编辑任意数量的项目，包括从列表中添加和删除它们，如果他按下取消，**所有**这些更改都需要还原。

起初我只是通过深拷贝（序列化）进行对象备份并在取消时恢复它们，但现在对象必须包含对其他共享对象的引用，这使得这种方法存在问题。

在不来回手动复制对象和/或值的情况下处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:13:31.763

在这种情况下，[DataTable](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)类将完美运行。它可以保存更改、返回（逐步）或还原所有更改和许多其他功能。DataTable 类有一个与 XML 配合得很好的嵌套特性。

如果您愿意保存在数据库中，请查看[EntityFramework](http://msdn.microsoft.com/en-us/data/jj590134)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:58:42.247

经过对此事的更多思考，我得出的结论是，至少对于小规模实施而言，最好的方法是编写一个“按值深拷贝”方法，该方法复制对象字段和属性的值而不替换对象本身（这样即使恢复数据，对已编辑对象的任何引用仍保持不变）。

为此，我编写了以下扩展方法：

```
public static void CopyDataTo(this Object source, Object target) {
    // Recurse into lists
    if (source is IList) {
        var a = 0;
        foreach (var item in (IList)source) {
            if (a >= ((IList)target).Count) {
                var type = item.GetType();
                var assembly = Assembly.GetAssembly(type);
                var newItem = assembly.CreateInstance(type.FullName);
                ((IList)target).Add(newItem);
            }
            item.CopyDataTo(((IList)target)[a]);
            a++;
        }
        while (a < ((IList)target).Count) {
            ((IList)target).RemoveAt(a);
        }
    }

    // Copy over fields
    foreach (var field in source.GetType().GetFields())
        field.SetValue(target, field.GetValue(source));
    // Copy properties
    foreach (var property in source.GetType().GetProperties().Where(
        property => property.CanWrite && !property.GetMethod.GetParameters().Any()))
    {
        property.SetValue(target, property.GetValue(source));
    }
} 
```

这不是灵丹妙药：它只适用于相同类型的对象，列表项必须有一个无参数的构造函数，并且无法控制递归深度。此外，我还没有机会在任何长期或更复杂的场景中进行测试，但到目前为止它做了它应该做的（在对象之间复制值）并且可以用于简单的备份/恢复场景：

```
var backup = new TypeOfVariableToEdit();
data.CopyDataTo(backup);
var clickedOK = RunDataEditor(data);
if (!clickedOK)
    backup.CopyDataTo(data); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-20T16:34:53.413

最好的方法是不要：

如果您需要这些项目，请从数据库或任何数据存储中获取它们的新副本，允许用户进行更改，如果他们按下取消，则丢弃更改。如果他们按保存，将数据保存到存储中，然后刷新现有屏幕或其他任何内容。

# ruby-on-rails - Ruby on Rails 3：尝试从不同的控制器呈现视图。但我得到同一个控制器

> ID：14426122
> 
> 赞同：1
> 
> 时间：2013-01-20T15:38:35.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

在我的应用程序中，我创建了一个表单来创建新帖子（帖子是一个模型）。我有一个名为 posts 的控制器。该表单位于管理员控制器中。表单使用 form_for(@post)。它发布到后控制器。在这种方法中，帖子被成功创建。但问题在于提交失败。在表单中，我添加了代码以显示错误

```
 <% if @post.errors.any? %>
        <div id="error_explanation">
            <div class="alert alert-error">
                The form contains <%= pluralize(@post.errors.count, "error") %>
            </div>
            <ul>
                <% @post.errors.full_messages.each do |msg| %>
                    <li> <%= msg %> </li>
                <% end %>
            </ul>
        </div>
    <% end %> 
```

但是在 post 控制器中，如果提交失败，我已将其设置为 redirect_to admins 控制器中的 newpost 页面。重定向时，我会丢失错误消息。

所以，我补充说

```
render 'dasharea/newpost' 
```

localhost:3000/dasharea/newpost 是具有表单的页面的 URL。使用此代码，它说

```
Missing template dasharea/newpost with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

但我已经在那个页面了？然后我尝试添加控制器和这样的动作（注意：我正在编辑帖子控制器的创建动作。我需要在管理员控制器中呈现 newpost 动作）：

```
render 'admins/newpost' 
```

然后，它将引导我到帖子：

```
http://localhost:3000/posts 
```

但是现在，表格在那里，我可以看到错误。但我需要渲染我有表单（dasharea/newpost）的原始页面！我怎样才能做到这一点？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T19:23:20.317

我的解决方案：AJAX 表单。没有更多的问题。用javascript当场更新表格。`window.location.href = '/your-url'`如果需要，您甚至可以使用重定向。

如果您需要处理 html 请求，您始终可以将表单指向您选择的 url：

```
form_for @post, url: route_to_current_controller 
```

处理此控制器上的 create_post 操作并确保您的路线设置正确。不好的一面是您将在与 PostsController 不同的控制器中处理帖子创建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T03:53:18.360

您可能正在寻找`render template: 'admins/newpost'`. 如果您仍然收到有关缺少模板的错误，请根据视图/管理员/新帖子的可用格式检查请求的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T12:33:03.920

`render new`当出现错误时，我认为您可能想要。错误消息应该由 rails 自动填充。

您还可以验证是否有一个名为`newpost.html.erb`inside的文件`app/views/dasharea`？

# php - Facebook php-sdk/js-sdk：Cookie/会话管理

> ID：14426124
> 
> 赞同：0
> 
> 时间：2013-01-20T15:39:04.743
> 
> 标签：php, facebook, cookies

> **可能重复：**
> [Facebook 登录：检查每个页面的身份验证？](https://stackoverflow.com/questions/14420639/facebook-login-check-authentication-at-every-page)

我正在遵循这些指南： [https ://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/) [https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

因此，cookie 是在 FB.init() js 函数中设置的，但我不明白：

*   PHP SDK如何读取cookie？我必须使用 getUser() 吗？我认为，这在指南中有点不清楚。
*   我在我网站的每个页面中包含什么来检查登录状态？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:53:06.070

查看 SDK 中包含的示例。这是带有 JS SDK 的 URL [Facebook PHP SDK 示例](https://github.com/facebook/facebook-php-sdk/blob/master/examples/with_js_sdk.php)

# php - 仅显示文本文件的最后 10 行

> ID：14426125
> 
> 赞同：-4
> 
> 时间：2013-01-20T15:39:05.150
> 
> 标签：php, javascript, ajax, file, text

我不是程序员，所以我不知道如何编辑它。

我正在使用我在 stackoverflow 中找到的代码，并且只想显示文本文件中的最后 10 行。

```
<html>
<head>
<script type="text/javascript">
    function loadXMLDoc()
    {
    var xmlhttp;
    if (window.XMLHttpRequest)
      {
      xmlhttp=new XMLHttpRequest();
      }
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","status.txt",true);
    xmlhttp.send();
    }
</script>
</head>
<body>
<script type="text/javascript">
    loadXMLDoc();
</script>
<div id="myDiv">Current Status</div>
<script type="text/javascript">
    setInterval("loadXMLDoc()", 2000);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:41:16.417

这是一种可能的解决方案：

```
... = xmlhttp.responseText.split("\n").slice(-10).join("\n"); 
```

# c# - 在gridview中用条件填充行

> ID：14426132
> 
> 赞同：0
> 
> 时间：2013-01-20T15:39:40.880
> 
> 标签：c#, asp.net, linq, rowdatabound

我需要使用 linq 评估数据库中的条件，以便每行的复选框启用或不启用，我认为可以使用`RowDataBound`or`CreateRow`事件来完成。

即，我有一个gridview，其中有几列填充有来自linq 的数据源。在所有这些列中，其中两个各有一个复选框，因此如果来自基数的记录等于 1，则仅启用具有该行复选框的 column2，如果不等于 1，则保持原样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:54:51.467

我已经为您准备了如何使用数据绑定来完成此操作的简化示例。

第一个 aspx 代码，注意我使用了 ValidateRecord 来验证单个记录：

```
 <asp:GridView ID="GridView1" runat="server" DataKeyNames="Id" DataSourceID="ObjectDataSource1" AutoGenerateColumns="true">
        <Columns>
            <asp:TemplateField HeaderText="Check">
                <ItemTemplate>
                    <asp:CheckBox ID="CheckBox1" runat="server" Enabled='<%# ValidateRecord(Eval("RowState")) %>' />
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="GetItems" TypeName="WebTester.DataGridTester">
    </asp:ObjectDataSource> 
```

现在结束后面的代码。GetItems只是用来生成一些demo数据，重点在ValidateRecord里面：

```
 public bool ValidateRecord(object value)
    { 
        return (value as int?) == 1;
    }

    public static DataTable GetItems()
    { 
        //generate some demo data...
        DataTable dt = new DataTable();
        dt.Columns.Add("RowState", typeof(int?));
        dt.Columns.Add("Id",typeof(int));
        dt.Columns.Add("col1", typeof(string));
        dt.Columns.Add("col2", typeof(string));
        dt.Columns.Add("col3", typeof(string));
        dt.Columns.Add("col4", typeof(string));
        dt.Columns.Add("col5", typeof(string));
        dt.Columns.Add("col6", typeof(string));
        dt.Columns.Add("col7", typeof(string));
        dt.Rows.Add(new object[] {1, 1,"some","data","in","first","row", ".", ".." });
        dt.Rows.Add(new object[] {0, 2, "second", "record", "inside", "demo", "datatable", "-", "--" });
        return dt;
    } 
```

所以最终结果将如下所示： ![在此处输入图像描述](../Images/746eb4256261786cbace693693956ba3.png)

第一行复选框被启用，第二行被禁用。

快乐编码！

# authentication - 使用 joomla 和 spring 的 SSO

> ID：14426134
> 
> 赞同：1
> 
> 时间：2013-01-20T15:40:29.360
> 
> 标签：authentication, joomla, spring-security, openid, single-sign-on

我在同一台服务器上有 2 个网站：一个由 joomla 3.0 (php) 创建，另一个由 spring framework 3.2 (java) 创建。

我想要一个具有最少代码的 SSO：人们可以从一个网站登录，而无需登录另一个网站。

我想openid。但我不希望每个人都有 openid 登录，所以我必须提供自己的 openid 服务器。这是一个很好的解决方案吗？有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:15:55.030

我通过使用 cookie 解决了这个问题：两个网站都在同一个域中。所以我为 Joomla 3.0 编写了一个外部身份验证插件。

* * *

您好，我在 4 年多后回来了。

在我的新架构中，我现在使用 JWT。因此，您可以在服务器之间共享 jwt pass_phrase 并将生成的 jwt 存储在 cookie 或 local_storage 中，而不是只使用一个简单的 cookie。

它更安全，不依赖于操作系统/框架/语言。

# magento - Magento 顶部链接购物车由清漆缓存

> ID：14426143
> 
> 赞同：0
> 
> 时间：2013-01-20T15:41:24.333
> 
> 标签：magento, varnish

我正在使用 Varnish 来提高我的 Magento 商店的性能。我的问题是 Varnish 正在缓存购物车中项目的顶部链接数。

我想在页面加载后使用 Ajax 调用，不知道如何实现，建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:20:34.817

如果您想通过 ajax 实现这一点，这是一种可能的方法：

后端工作：

1.  对于修改购物车中商品数量的每个操作，观察事件并触发一个方法，该方法将使用您需要的必要数据更新客户端上的 cookie。您可以做一些简单的事情并存储 JSON 结构：`{"cartItem": 2, "isLoggedIn": false}`. **一些**要观察的事件：
    1.  controller_action_postdispatch_checkout
    2.  controller_action_postdispatch_customer
    3.  checkout_onepage_controller_success_action
2.  创建一个控制器/动作，它将返回完全相同的数据结构（以及在它的位置设置 cookie）。

前端工作：

1.  在 DOM 准备就绪时，您的代码应该在后端查找 cookie 集。如果它不存在，则向控制器发出 ajax 请求以获取它。
2.  获得必要的数据后，根据需要更新 DOM 中的值

您需要确保聆听所有必要的事件。使用 cookie 将有助于加快客户端的处理速度并减少浏览器需要发出的 HTTP 请求的数量。

# php - PHP脚本语法错误

> ID：14426146
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:41:56.547
> 
> 标签：php, mysql

我在使用 PHP 时遇到问题（我对此非常缺乏经验），并且出现以下错误。谁能帮我找到以下错误的原因。

**解析错误：语法错误，意外的 '' (T_ENCAPSED_AND_WHITESPACE)，在第 30 行的 /home/jsnow/projects/one/htdocs/edit-exec.php 中需要标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING)**

我的代码：

```
$dbconn = mysql_select_db(APP_DB);
if(!$dbconn) 
{ 
    die("ERROR SELECTING DB"); 
}

$query = "SELECT * FROM users WHERE users_id='$_SESSION['SESS_USER_ID']'"; 
$result = @mysql_query($query);

if($result) { 
    header("location: success-register.php");  
    exit();
}else { 
    die("Query failed");  
} 
```

我不确定它是否很明显，但我看不到。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:43:49.723

上面的代码写得不是很好。

您最好使用 PDO 之类的东西而不是下面的东西。

但是，问题很可能出在 $query 的 ' 内部。

试试下面的。

```
$dbconn = mysql_select_db(APP_DB);
if(!$dbconn) {
    die("ERROR SELECTING DB");
}

$query = "SELECT * FROM users WHERE users_id='".$_SESSION['SESS_USER_ID']."'";
$result = @mysql_query($query);

if($result) {
   header("location: success-register.php");
   exit();
}else {
   die("Problem registering");
} 
```

这将修复代码，但我建议使用类似下面的代码（稍后将添加参数并撒旦确保防止 sql 注入）：

```
$dbh = new PDO("database details");
$sth = $dbh->prepare('SELECT * FROM users WHERE users_id=:users_id');
$sth->bindParam(':users_id', $_SESSION['SESS_USER_ID']);
$sth->execute(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T15:44:42.237

```
$query = "SELECT * FROM users WHERE name = '".$full_name."' AND users_id = '".$_SESSION['SESS_USER_ID']."'"; 
```

# c# - 将数字转换为水晶报表中的填充字符串

> ID：14426148
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:42:21.067
> 
> 标签：c#, asp.net, visual-studio-2010, sql-server-2008, crystal-reports

我正在使用水晶报表进行报告。我有一个小问题，实际上我的`{id}`报告中有一个字段调用绑定到我的 sql 表的标识。它显示像**1,2,3,4**这样的值，但我希望我的值在左边用零填充，使其总共有 7 位数字。例如0000001,0000002,0000003,0000004 **，对于 1234，它应该是 0001234**。

我试过`Right("0000"&{MyFieldToPad},7)`但它不起作用，它说它需要布尔值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:06:28.857

在你的 SQL 查询中而不是说

```
SELECT id 
  --, other columns
  FROM dbo.table
  WHERE ...
; 
```

说：

```
SELECT RIGHT('0000000' + CONVERT(VARCHAR(12), id), 7)
  --, other columns
  FROM dbo.table
  WHERE ...
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:34:35.853

如果 {table.id} 是数字，则需要使用该`totext()`函数指定格式并将其转换为字符串：`totext({table.id},"0000000")`

如果 {table.id} 是一个 varchar，那么你的示例公式应该可以工作：`right("0000000"&{table.id},7)`不知道为什么它会说你需要一个布尔值......我的猜测是你没有像你应该那样创建一个新公式，而是把它它不属于的代码。尝试仅使用该代码从头开始创建新公式。

# java - 带有resultSet的jsp页面上的异常

> ID：14426150
> 
> 赞同：0
> 
> 时间：2013-01-20T15:42:25.827
> 
> 标签：java, jsp, resultset

我正在尝试使用以下方法检查用户是否已投票。我使用了与登录相同的方法，登录效果很好。ResultSet 执行查询部分发生错误。这是为了检查用户是否已经投票。

```
public boolean checkVote(int userId) throws ClassNotFoundException, SQLException{        
    String query = "SELECT * FROM polls WHERE User='"+ userId +"''";        
    connect();        
    PreparedStatement ps = (PreparedStatement) dbConnection.prepareStatement(query);
    ResultSet results = (ResultSet)ps.executeQuery();

    while(results.next())
    {
         return true;
    }
    disconnect();
    return false;

} 
```

堆栈跟踪：

```
 org.apache.jasper.JasperException: An exception occurred processing JSP page     /    Gadgets.jsp at line 40

 37:                 <%db.DBConnection db = new  db.DBConnection(); 
 38:                 ArrayList<Product> myProducts =db.getAllProducts();
 39:                 User u = db.getUser(session.getAttribute("Username").toString());
 40:                 boolean checkVote = db.checkVote(u.getId());
 41:                 if(checkVote == true)
 42:                                        { %>
 43:                                          <form id="Gadgets" action="Gadgets.jsp"      method="post"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:48:20.840

不是关于你的例外，而是对你的代码有评论。由于您没有使用不需要的语句参数（通过`?`）`PreparedStatement`，因此您可以使用 simple`Statement`并通过`connection.createStatement`. 或者更好的方法是继续使用`PreparedStatement`并传递`userId`参数。

更多关于[这里](http://www.velocityreviews.com/forums/t124880-createstatement-vs-preparestatement.html)

现在关于你的例外。似乎该`checkVote`方法是您的 servlet 方法，而不是您的`db`对象的方法。但你试图打电话给`db's` `checkVote`. 这是一个原因`JasperException`。

# ios - 将 UITableViewController 更改为 UIViewController

> ID：14426151
> 
> 赞同：1
> 
> 时间：2013-01-20T15:42:27.113
> 
> 标签：ios, uitableview, superclass

我正在尝试使用超类 ATSDragToReorderTableViewController 但我遇到的问题是我使用的是带有表格视图的 UIViewController 而不是 UITableViewController。我尝试将超类更改为 UIViewController，但这会带来大量错误，主要是“在 ATSDragToReorderTableViewController* 类型的对象上找不到属性 tableView”

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-10T17:11:38.463

`ATSDragToReorderTableViewController`将from的 superClass 更改`UITableViewController`为`UIViewController`。添加`< UITableViewDataSource, UITableViewDelegate >`，然后添加属性：

```
@property (nonatomic, strong) IBOutlet UITableView *tableView; 
```

# php - Swift Mailer 和 Symfony2 - 假脱机中没有邮件

> ID：14426152
> 
> 赞同：3
> 
> 时间：2013-01-20T15:42:36.347
> 
> 标签：php, symfony, swiftmailer

从官方 Swift Mailer 组交叉发布....

我正在尝试使用 Swift Mailer 包和文件假脱机发送电子邮件，但是当我告诉控制台发送邮件时，它告诉我假脱机中有 0 条消息。假脱机应该由 Swift Mailer 自动创建，还是我需要手动创建文件？因为我在任何地方都看不到假脱机文件。

我的 config.yml：

```
# Swiftmailer Configuration
swiftmailer:
    transport: sendmail
    host:      /usr/bin/sendmail
    username:  %mailer_user%
    password:  %mailer_password%
    spool:
        type: file
        path: "%kernel.root_dir%/spool" 
```

我如何发送邮件：

```
public function contactAction(Request $request)
{
    $form = $this->createFormBuilder()
        ->add('name', 'text', array('label' => 'Name:'))
        ->add('email', 'email', array('label' => 'Email Address:'))
        ->add('subject', 'text', array('label' => 'Subject:'))
        ->add('message', 'textarea', array('label' => 'Message:'))
        ->getForm();

    if ($request->isMethod('POST')) {
        $form->bind($request);
        $data = $form->getData();

        if (!empty($data['name'])) {
            $data['message'] = str_replace("\n.", "\n..", $data['message']);

            $emailValidator = new Email();
            $emailValidator->message = "Invalid email address";

            $error = $this->get('validator')->validateValue($data['email'], $emailValidator);

            if (count($error) == 0) {
                $mail = \Swift_Message::newInstance()
                    ->setSubject($data['subject'])
                    ->setFrom('mail@mysite.com')
                    ->setTo('me@myrealaddress.com')
                    ->setBody($data['message']);

                $this->get('mailer')->send($mail);

                return $this->redirect($this->generateUrl('_success'));
            } else {
                return $this->redirect($this->generateUrl('_failure'));
            }
        }
    } 
```

我究竟做错了什么？根据 Symfony 文档，这应该可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T18:43:21.237

在标准安装中，`path: "%kernel.root_dir%/spool"`相当于`app/spool`在此目录中创建和写入，运行您的 Web 服务器的用户需要特定的权限。

但是，如果您不想更改目录的权限，您始终可以使用`cache`具有以下配置的文件夹：

```
# Swiftmailer Configuration
swiftmailer:
    transport: sendmail
    host:      /usr/bin/sendmail
    username:  %mailer_user%
    password:  %mailer_password%
    spool:
        type: file
        path: "%kernel.cache_dir%/swiftmailer/spool" 
```

**请注意**，这样做时，您在清除缓存时必须非常小心，因为如果您有未发送的电子邮件，它们将与其他缓存文件一起消失。

# jsf - PrimeFaces PickList 组件，如何将所有目标值获取到一个 InputText 组件？

> ID：14426153
> 
> 赞同：0
> 
> 时间：2013-01-20T15:42:39.813
> 
> 标签：jsf, jsf-2, primefaces

`inputText`我用一个和一个`commandButton`组件创建了 xhtml 页面。当我单击按钮时，显示列表中`overlayPanel`的`pickList`和一个`commandButton`。我想获取所有目标值并将其放入`inputText`（此组件必须只有一个）。你能帮我怎么做吗？

下面是我现在写的 xhtml 代码：

```
<h:panelGrid id="displayPlayers" columns="3">
        <ui:repeat value="#{pickListBean.players.target}" var="player"> 
            <p:inputText id="input2" value="#{player.name}" />
        </ui:repeat> 
        <p:commandButton id="overPanBtn2" value="overPanBtn2" type="button" />
    </h:panelGrid>

    <p:overlayPanel id="chartPanel2" for="overPanBtn2" hideEffect="fade">
        <p:pickList id="pickList4" value="#{pickListBean.players}" var="player" itemLabel="#{player}" itemValue="#{player}" converter="playerConverter">
            <p:column style="width:75%;">  
                #{player.name}  
            </p:column>
            <p:column style="width:75%;">  
                #{player.number}  
            </p:column>
        </p:pickList>
        <p:commandButton id="playerSubmit4" value="Ok" update="displayPlayers" style="margin-top:5px" />
    </p:overlayPanel> 
```

我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T21:34:43.123

在您的情况下，它应该是这样的，您只需要遵循[展示示例](http://www.primefaces.org/showcase/ui/picklist.jsf)：

**XHTML**

```
<p:pickList id="pickList4" value="#{pickListBean.players}" var="player" itemLabel="#{player}" itemValue="#{player}" converter="playerConverter">
    <p:ajax event="transfer" listener="#{pickListBean.onTransfer}" update="msg" />
    <p:column style="width:75%;">  
            #{player.name}  
    </p:column>
    <p:column style="width:75%;">  
            #{player.number}  
    </p:column>
</p:pickList> 
```

**支持豆**

```
String selectedPlayerNames;

//GETTER

public void onTransfer(TransferEvent event) {
    selectedPlayerNames = "";
    for (Player p : players.getTarget()){
        selectedPlayerNames += p.getName() + " ";
        }
} 
```

只需在传输发生时调用事件，并将目标值保存到字符串中。然后将此 String 属性绑定到`p:inputText`.

# javascript - 骨干验证不起作用

> ID：14426155
> 
> 赞同：22
> 
> 时间：2013-01-20T15:42:43.610
> 
> 标签：javascript, backbone.js

我正在使用 Backbone 的`validate`功能来保证`Man`拥有`age`超过 18 的属性。这是我的代码：

```
var Man = Backbone.Model.extend({
    initialize : function(){
        this.on("error",function(model,error){
            alert(error);
        });
    },
    validate : function(attrs,options){
        if (attrs.age < 18){
            return 'below 18';
        } 
    }
})

var man = new Man({name : 'qian', age : 12}); 
```

但看结果似乎`validate`不起作用。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-20T16:00:04.843

在 Backbone.js（在 version 之前`0.9.10`）中，在 before和 before 中`validate`都被调用。`save``set`

当您设置*无效*值 时，您将收到*警告错误。*

 *示例 -*`age`值低于 18*：

```
var man = new Man ({name : 'qian', age : 12});
man.set({ age: 12 }); // that will trigger alert 
```

**编辑**

对于 Backbone.js 版本`0.9.10+`，报告了一个问题：[Failed validation does not trigger error callback](https://github.com/documentcloud/backbone/issues/2153)。问题解释说

> `invalid`应该使用事件而不是`error`

因此，将您的代码更改为：

```
var Man = Backbone.Model.extend({
    initialize : function(){
        this.on("invalid",function(model,error){
            alert(error);
        });
    },
    ... 
```

`validate`并将选项设置为的变量设置为`true`将触发`alert`.

```
man.set({age: 12}, {validate : true}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-20T06:31:27.593

对于主干 v.1.0.0

```
var Man = Backbone.Model.extend({
    initialize : function(){
        this.on("invalid",function(model,error){
            alert(error);
        });
    },
    validate : function(attrs, options){
        if (attrs.age < 18){
            return 'below 18';
        } 
    }
}); 
```

### 示例 1\. 没有 {validate:true}

```
//Object will be created with invalid attribute 'age' 
var man = new Man({name : 'qian', age : 12});
console.log(man) // Returns an object with invalid attributes

// But we'll use only valid objects.
// Also we'll get the error message in alert, if validation fails.
if(man.isValid()){
    alert( man.get('name') );
}

var man = new Man({name : 'qian', age : 19});
if(man.isValid()){
    alert( man.get('name') );
} 
```

### 示例 2\. 使用 {validate:true}

```
//Object will be created without any passed attributes
var man = new Man({name : 'qian', age : 12}, {validate:true});
console.log(man) //Object will be without passed attributes

/* man.isValid() returns 'true' throw we passed invalid attrs.
   We won't see any error alert message, because Backbone created empty object */
/* Doesn't work */
if(man.isValid()){
    alert( man.get('name') ); //undefined
}
/* Works */
// Created model had invalid attrs, so validationError won't be empty.
// If all attrs are valid, validationError will be empty
if(!man.validationError){
    alert( man.get('name') );
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-09T11:09:11.237

如果您正在使用新版本（> 1.0）的 Backbone 并希望在`model.set`方法时触发验证，

那么你必须通过`{validate: true}`火灾验证。

采用

```
model.set({field:value},{validate: true}) 
```

或者

```
model.set("field","value",{validate: true}) 
```

代替

```
model.set({field:value}) 
```

REF：[主干更改日志](http://backbonejs.org/#upgrading)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-20T16:13:03.520

```
var man = new Man({name : 'qian', age : 12}, {validate : true}); 
```

**编辑：**

validate 方法仅在您使用`validate`参数传递选项对象的情况下才有效（从 0.9.9 版本开始）： [https ://github.com/documentcloud/backbone/blob/master/backbone.js#L539](https://github.com/documentcloud/backbone/blob/master/backbone.js#L539)

它触发的不是`error`事件而是`invalid`事件*

# ios - iOS Ad Hoc 生成较小的 .ipa 文件大小

> ID：14426159
> 
> 赞同：0
> 
> 时间：2013-01-20T15:43:22.567
> 
> 标签：ios, ipa, adhoc

为了通过 Ad Hoc 分发分发您的应用程序，您必须为 ad hoc 分发创建一个配置文件，下载配置文件文件，验证它在 Xcode 中是否有效，使用配置文件签署应用程序（应该是相同的捆绑包 ID )，编辑方案以复制发布配置并将其重命名为 ad hoc，也将其更改为归档命令采用 ad hoc 配置，点击命令“存档”，按照管理器屏幕，直到您将其分发为 ad hoc，保存ipa 文件，你就完成了。

一切都按预期工作，我之前已经成功部署过多次临时分发，问题是最终的 .ipa 文件比整个应用程序文件夹小得多，从 17MB 到 3.3 MB 文件，除了 iTunes不会安装此应用程序。

你有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:36:12.413

应用程序文件夹通常包含许多不同的构建（用于模拟器和实际设备），有时还包含存储库数据，因此您不必担心大小差异。我的一个 iOS 项目的文件夹大小为 25MB，而 IPA 只有 6MB。

此外，PNG 在编译时针对 iOS 进行了优化，因此如果原始 PNG 之前没有太大，4KB 的图像大小并不一定意味着有问题。

我建议您专注于真正的问题，这必须与您的配置文件有关。您是否确保您的配置文件包含您要安装应用程序的设备？

# java - Java中的字节原语

> ID：14426161
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:43:35.360
> 
> 标签：java, byte

我一直在做一个图像项目，我在互联网上读到，`byte`为图像工作解决了很多问题并提高了效率。我试图用谷歌搜索它，但没有找到它的任何定义。所以我来这里问

*   Java中的字节是什么？它有什么用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:44:56.583

您可以阅读[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

> byte：byte 数据类型是一个 8 位有符号二进制补码整数。它的最小值为 -128，最大值为 127（含）。字节数据类型可用于在大型数组中节省内存，其中内存节省实际上很重要。它们也可以用来代替 int ，它们的限制有助于澄清您的代码；变量的范围有限这一事实可以作为一种文档形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:45:36.473

`byte`是java的原始类型之一。是一个字节的抽象（**带**符号的 8 位整数）。

# javascript - 使用 CSP 在 Web Worker 中启用“新功能”

> ID：14426162
> 
> 赞同：7
> 
> 时间：2013-01-20T15:43:35.727
> 
> 标签：javascript, google-chrome, web-worker, content-security-policy, function-constructor

我无法`new Function`在 Web Worker 中工作。我有一个生成 Web Worker 的 HTML 页面。这个 Web Worker 通过`new Function(str)`. 我正在尝试在打包的 Chrome 应用程序中使用它，该应用程序需要使用类似`eval`代码的页面在清单中明确列为沙盒页面。

现在，有两种选择：

*   **列出要沙盒化的页面**。**如果这样做，我可以使用`new Function`，但我无法生成 Web Worker，因为我无法发出任何请求（沙盒页面具有唯一的来源）。`new Worker(...)`抛出一个`SECURITY_ERR`.

    *   `new Function`在沙箱中工作
    *   `new Worker`由于唯一来源而在沙箱中失败** 
***   **不要**列出要沙盒化的页面。如果这样做，我可以生成一个 Web Worker，但该 Worker 不能使用`new Function`，因为它没有被沙盒化。`new Function(...)`抱怨`EvalError`使用它。
    *   `new Function`由于类似而在非沙盒中`eval`失败
    *   `new Worker`在非沙盒中工作**

 **我的 CSP 如下：

```
sandbox allow-scripts script-src 'self' 'unsafe-eval'; object-src 'self' 
```

我该怎么做才能`new Function`在 Web Worker 中工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:40:58.357

有一种称为内联工作者的技术，我建议使用它。

*   创建一个包含 worker 源代码的 Blob 对象
*   将其转换为“dataurl”
*   用这个 dataurl 实例化 worker

[这在他们的WebWorkers 教程](http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers)中的 HTML5 Rocks 站点上使用示例代码进行了描述。这样，您可以将站点列为沙盒，但由于不需要执行外部请求，它也应该在沙盒模式下工作。**

# php - 在 PHP 中附加变量会导致语法错误

> ID：14426163
> 
> 赞同：0
> 
> 时间：2013-01-20T15:43:37.197
> 
> 标签：php, variables, syntax, syntax-error

这个 php 代码有什么问题？

```
$sql = mysql_query("select * from news where isActive = 1 and partnerid_fk = '$partnerid'");
$news = "";
while($row = mysql_fetch_assoc($sql)) {
    news .= "<li class='news-item'><a href='#'>" . $row['news'] . "</a></li>";
} 
```

新闻附加行上的错误：

```
Syntax error. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T15:44:54.290

您忘记了美元符号：

```
news .= 
```

应该

```
$news .= 
```

# string - Scala，函数的字符串表示

> ID：14426167
> 
> 赞同：2
> 
> 时间：2013-01-20T15:44:15.413
> 
> 标签：string, function, scala, representation

有没有办法可以获取函数的字符串表示形式？

`val f = List(1, 2, 3, 4, 66, 11).foldLeft(55)_`

`f`是 type 的函数`((Int, Int) => Int) => Int`，这将是我正在寻找的表示，但我无法在任何地方找到它。

当然，该`toString`方法是我的第一次尝试，但它返回的只是`<function1>`. scala REPL 做得对，文档也是。一定有办法吗？

问候。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T15:51:34.220

当类型在编译时已知时，您可以使用 Scalas `TypeTag`：

```
scala> import reflect.runtime.universe._
import reflect.runtime.universe._

scala> def typeRep[A : TypeTag](a: A) = typeOf[A]
typeRep: [A](a: A)(implicit evidence$1: reflect.runtime.universe.TypeTag[A])reflect.runtime.universe.Type

scala> val f = List(1, 2, 3, 4, 66, 11).foldLeft(55)_
f: ((Int, Int) => Int) => Int = <function1>

scala> typeRep(f)
res2: reflect.runtime.universe.Type = ((Int, Int) => Int) => Int 
```

有关`TypeTag`正在做什么的详细说明，请参见[另一个](https://stackoverflow.com/questions/12218641/scala-2-10-what-is-a-typetag-and-how-do-i-use-it/12232195#12232195)答案。

# instruments - 仪器：目标无法运行：已在退出的进程上运行

> ID：14426168
> 
> 赞同：1
> 
> 时间：2013-01-20T15:44:18.197
> 
> 标签：instruments

我退出了 Instruments、iPhone 模拟器、Xcode，然后拔下并重新连接了我的 iPhone。我仍然收到以下错误。

![仪器截图](../Images/8d739d5b13e384b29b43e9f8b13adb25.png)

下面的第一个答案没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:57:17.557

尝试关闭您的 iPhone 并重新启动它。有时这是解决调试器中某个进程挂起的问题的唯一方法，也许它也适用于 Instruments。

# opengl - Swizzling Vertex Arrays, Vertex Buffer Objects and Shaders

> ID：14426174
> 
> 赞同：0
> 
> 时间：2013-01-20T15:44:56.253
> 
> 标签：opengl, vbo, vao

我对顶点数组、顶点缓冲区对象和着色器有基本的了解。但是，我不确定是否可以重用它们或关联是否是双射的。

例如：

*   我可以在不同的顶点数组中使用相同的顶点缓冲区对象吗？
*   我可以在不同的着色器中使用相同的顶点数组吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:58:37.903

是的你可以 ：）

**VBO** - 控制数据的存储位置

**VAO** - 控制布局和绑定（你可以有几个 VAO 指向同一个 VBO，但顺序不同）

**着色器**- 负责处理数据，它们可以与不同的 VAO/VBO 组合一起使用（但该组合当然必须匹配着色器中的属性布局）

# iphone - 实现 MWFeedParser 时出错

> ID：14426178
> 
> 赞同：0
> 
> 时间：2013-01-20T15:45:17.927
> 
> 标签：iphone, xcode, rss

我试图使用 MWFeedParser 库。我认为问题在于我想使用带有表格视图的视图控制器来显示新闻。现在启动应用程序时，我的表格视图中没有任何内容。新闻视图控制器的代码如下所示：

。H：

```
#import "MWFeedItem.h"
#import "MWFeedParser.h"

@interface NewsViewController : UIViewController <MWFeedParserDelegate> {
    IBOutlet UILabel *label;
    // Parsing
    MWFeedParser *feedParser;
    NSMutableArray *parsedItems;

    // Displaying
    NSArray *itemsToDisplay;
    NSDateFormatter *formatter;
    IBOutlet UITableView *tableView;

}

// Properties
@property (nonatomic, retain) NSArray *itemsToDisplay;
@property (nonatomic, retain) IBOutlet UITableView *tableView;

@end 
```

.M:

```
#import "NSString+HTML.h"
#import "MWFeedParser.h"
#import "DetailTableViewController.h"

@implementation NewsViewController

@synthesize itemsToDisplay, tableView;

#pragma mark -
#pragma mark View lifecycle

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"News", @"News");
        self.tabBarItem.image = [UIImage imageNamed:@"icon_news"];    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    // Date
    // Setup
    self.title = @"News";
    formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterShortStyle];
    [formatter setTimeStyle:NSDateFormatterShortStyle];
    parsedItems = [[NSMutableArray alloc] init];
    self.itemsToDisplay = [NSArray array];

    // Refresh button
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh
                                                                                            target:self
                                                                                            action:@selector(refresh)];
    // Parse
    NSURL *feedURL = [NSURL URLWithString:@"http://www.website.com/feed/"];
    feedParser = [[MWFeedParser alloc] initWithFeedURL:feedURL];
    feedParser.delegate = self;
    feedParser.feedParseType = ParseTypeFull; // Parse feed info and all items
    feedParser.connectionType = ConnectionTypeAsynchronously;
    [feedParser parse];

    UIImage *someImage = [UIImage imageNamed:@"back_active1@2x.png"];
    [button setBackgroundImage:someImage forState:UIControlStateHighlighted];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewDidAppear:(BOOL)animated {
    static BOOL first = YES;
    if (first) {
        UIViewController *popup = [[Home1ViewController alloc] initWithNibName:@"Home1ViewController" bundle:nil];

        [self presentViewController:popup animated:NO completion:nil];
        first = NO;
    }
}

#pragma mark -
#pragma mark Parsing

// Reset and reparse
- (void)refresh {
    self.title = @"Refreshing...";
    [parsedItems removeAllObjects];
    [feedParser stopParsing];
    [feedParser parse];
    /*
    self.tableView.userInteractionEnabled = NO;
    self.tableView.alpha = 0.3;
     */
}

- (void)updateTableWithParsedItems {
    self.itemsToDisplay = [parsedItems sortedArrayUsingDescriptors:
                           [NSArray arrayWithObject:[[NSSortDescriptor alloc] initWithKey:@"date"
                                                                             ascending:NO]]];
    /*  self.tableView.userInteractionEnabled = YES;
    self.tableView.alpha = 1;
    [self.tableView reloadData];
                 */
}

#pragma mark -
#pragma mark MWFeedParserDelegate

- (void)feedParserDidStart:(MWFeedParser *)parser {
    NSLog(@"Started Parsing: %@", parser.url);
}

- (void)feedParser:(MWFeedParser *)parser didParseFeedInfo:(MWFeedInfo *)info {
    NSLog(@"Parsed Feed Info: “%@”", info.title);
    self.title = info.title;
}

- (void)feedParser:(MWFeedParser *)parser didParseFeedItem:(MWFeedItem *)item {
    NSLog(@"Parsed Feed Item: “%@”", item.title);
    if (item) [parsedItems addObject:item];
}

- (void)feedParserDidFinish:(MWFeedParser *)parser {
    NSLog(@"Finished Parsing%@", (parser.stopped ? @" (Stopped)" : @""));
    [self updateTableWithParsedItems];
}

- (void)feedParser:(MWFeedParser *)parser didFailWithError:(NSError *)error {
    NSLog(@"Finished Parsing With Error: %@", error);
    if (parsedItems.count == 0) {
        self.title = @"Failed"; // Show failed message in title
    } else {
        // Failed but some items parsed, so show and inform of error
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Parsing Incomplete"
                                                         message:@"There was an error during the parsing of this feed. Not all of the feed items could parsed."
                                                        delegate:nil
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];
        [alert show];
    }
    [self updateTableWithParsedItems];
}

#pragma mark -
#pragma mark Table view data source

// Customize the number of sections in the table view.
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

// Customize the number of rows in the table view.
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return itemsToDisplay.count;
}

// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    // Configure the cell.
    MWFeedItem *item = [itemsToDisplay objectAtIndex:indexPath.row];
    if (item) {

        // Process
        NSString *itemTitle = item.title ? [item.title stringByConvertingHTMLToPlainText] : @"[No Title]";
        NSString *itemSummary = item.summary ? [item.summary stringByConvertingHTMLToPlainText] : @"[No Summary]";

        // Set
        cell.textLabel.font = [UIFont boldSystemFontOfSize:15];
        cell.textLabel.text = itemTitle;
        NSMutableString *subtitle = [NSMutableString string];
        if (item.date) [subtitle appendFormat:@"%@: ", [formatter stringFromDate:item.date]];
        [subtitle appendString:itemSummary];
        cell.detailTextLabel.text = subtitle;

    }
    return cell;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    // Show detail
    DetailTableViewController *detail = [[DetailTableViewController alloc] initWithStyle:UITableViewStyleGrouped];
    detail.item = (MWFeedItem *)[itemsToDisplay objectAtIndex:indexPath.row];
    [self.navigationController pushViewController:detail animated:YES];

    // Deselect
    [self->tableView deselectRowAtIndexPath:indexPath animated:YES];

}

@end 
```

在 IB 中，我将表格视图拖到视图上并将其链接到数据源和委托。但是表格视图中没有显示任何内容。真的很感激一些答案/想法！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T10:14:02.703

我认为您应该在“updateTableWithParsedItems”方法中取消注释以下行：

```
[self.tableView reloadData]; 
```

# python - GAE 中的 URL 重写

> ID：14426179
> 
> 赞同：0
> 
> 时间：2013-01-20T15:45:27.980
> 
> 标签：python, google-app-engine, url-rewriting

你知道是否有可能使用 GAE 和 Python 重写一个 url，使其在域部分中看起来也不同？

所以，例如，

www.aaa.appspot.com 到 www.bbb.com ??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:04:06.890

这不是[Url 重写](http://en.wikipedia.org/wiki/Rewrite_engine)，它[是 GAE 支持的自定义域](https://developers.google.com/appengine/docs/domain)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:46:37.027

如果您希望 .app-id.appspot.com 的请求与 .app-id.appspot.com 的处理方式不同，您可以使用 webapp2 的 DomainRoute。如果您有两个自定义域指向您的应用程序，这同样适用于 example.com 与 example2.com。

请参阅：[http ://webapp-improved.appspot.com/guide/routing.html#domain-and-subdomain-routing](http://webapp-improved.appspot.com/guide/routing.html#domain-and-subdomain-routing)

这样，您就可以拥有一个 AppEngine 应用程序来处理对 example.com 和 example2.com 的请求（或者只处理从 example1.com 到 example2.com 的重定向）。

# php - propel DOMDocument::schemaValidate(): Element 'foreign-key', attribute 'ondelete','onupdate','skipsql' 属性不允许？

> ID：14426180
> 
> 赞同：0
> 
> 时间：2013-01-20T15:45:28.393
> 
> 标签：php, orm, propel

我正在使用推进 PHP：外键属性不依赖于父表。创建、更新、删除发生在父表中，不会影响子表。

像 onupdate、ondelete、skipsql 这样的外键元素不接受这样的推进和错误

> DOMDocument::schemaValidate(): 元素'外键'，属性'ondelete'，'onupdate'，'skipsql'

属性不允许？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T10:53:44.890

我明白了，这是我的 xml 文件中的语法错误。

```
<table name="names" phpName="Name">
<column name="nameid" phpName="Nid" type="integer" size="11" required="true" primaryKey="true"
autoIncrement="true" description="Name ID"/>
<column name="name" phpName="Name" type="varchar" size="50" required="true"
description="Name"/>
<validator column="name">
<rule name="required" message="Name is Required"/>
<rule name="minLength" value="3" message="Enter Valid Full-Name, Minimum of 3 characters"/>
<rule name="maxLength" value="20" message="Invalid Entry"/>
<rule name="match" value="/^[\w]+$/" message="No Special Character Allowed"/>
<rule name="unique" />
</validator>
</table>

<table name="relations" phpName="Relations">
<column name="rid" type="integer" size="11" required="true" primaryKey="true" autoIncrement="true"
description="Relational ID"/>

<column name="pnid" type="integer" size="11" required="true" description="name User ID"/>

<column name="rnid" type="integer" size="11" required="true" description="name Relationship ID"/>

<column name="relation" type="varchar" size="100" required="true" description="Relationship"/>

<validator column="relation">
<rule name="required" message="Relationship Type is Required" />
<rule name="match" value="/^([\w])+([\.\w\-]+)+$/" message="Enter a Valid String" />
<rule name="minLength" value="3" message="Enter a Valid Relation Ship"/>
<rule name="maxLength" value="20" message="Invalid Entry"/>
</validator>

<foreign-key foreignTable="names" onUpdate="CASCADE" onDelete="CASCADE">
<reference local="pnid" foreign="nid" />
<reference local="rnid" foreign="nid" />
</foreign-key>
</table> 
```

# java - JavaBean 值用 sql 为空

> ID：14426181
> 
> 赞同：-2
> 
> 时间：2013-01-20T15:45:35.367
> 
> 标签：java, sql, swing, listener, javabeans

```
 public void getEvent(String tableClick) {

    Events e = new Events();
    try {
        pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");
        rs = pst.executeQuery();
        while(rs.next()){      
        e.setEventName(rs.getString(2));
        System.out.println(rs.getString(2));
        e.setEventDate(rs.getDate(3));
        e.setEventTime(rs.getString(4));
        e.setEventVenue(rs.getString(5));
        e.setEventDetail(rs.getString(6));
        e.setEventOpportunity(rs.getString(7));
        e.setEventMoreDetails(rs.getString(8));
        e.setEndTime(rs.getString(9));
        rs.close();
        pst.close();
       }
    } 
    catch(SQLException ex){
    ex.printStackTrace();
    } 
} //end getEvent 
```

虽然`System.out.println(rs.getString(2)`从数据库中打印一个值，但我无法在我的 bean 中填充此信息。

我正在使用 mutators 来填充`JavaBean`，但是当我尝试在 MVC 框架的 View 类中使用访问器时，它显示`null`.

这是我在 VIEW 课上的电话

VIEW 类中的方法

```
 public void changeDisplay() {
       Events e = new Events();
       evTitle.setText(""+e.getEventName());
       evWhen.setText("When: "+ e.getEventDate());
       evWhere.setText("Where: "+ e.getEventVenue());
       evDescription.setText("Description: "+ e.getEventDetail());
       evOpportunity.setText("Opporunity: "+ e.getEventOpportunity());
       evMoreDet.setText("More Details: "+ e.getEventMoreDetails());
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:53:25.803

这段代码不能工作......为什么你有一个`getEvent`用`void`返回类型调用的方法？你想要的可能是这样的：

```
public Event getEvent(String tableClick) {
Events e = new Events();
try {
    pst = conn.prepareStatement("SELECT * FROM Event WHERE eventID='"+tableClick+"' ");
    rs = pst.executeQuery();
    while(rs.next()){      
    e.setEventName(rs.getString(2));
    System.out.println(rs.getString(2));
    e.setEventDate(rs.getDate(3));
    e.setEventTime(rs.getString(4));
    e.setEventVenue(rs.getString(5));
    e.setEventDetail(rs.getString(6));
    e.setEventOpportunity(rs.getString(7));
    e.setEventMoreDetails(rs.getString(8));
    e.setEndTime(rs.getString(9));
    rs.close();
    pst.close();
    return e;
   }
} catch(SQLException ex) {
    ex.printStackTrace();
    return null;
} 

} //end getEvent 
```

我不知道您的代码是如何工作的，但您可能想从视图中调用该方法，然后显示该值。您的`changeDisplay`方法正在显示`null`，因为您刚刚创建了对象...

你可能需要类似的东西：

```
public void changeDisplay(Events e) {
    evTitle.setText(""+e.getEventName());
    evWhen.setText("When: "+ e.getEventDate());
    evWhere.setText("Where: "+ e.getEventVenue());
    evDescription.setText("Description: "+ e.getEventDetail());
    evOpportunity.setText("Opporunity: "+ e.getEventOpportunity());
    evMoreDet.setText("More Details: "+ e.getEventMoreDetails());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:52:52.977

`Events`您在方法中创建的是`changeDisplay()`一个新对象，而不是您填充的对象`getEvent`。您需要返回/存储`e`from`getEvent`方法并在需要时使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:54:26.473

在 getEvent 函数中，您正在创建 Events 类的对象，并使用 setter 在其中设置数据库值。

但是在 changeDisplay Function 中，您再次创建了 Events 类的对象并尝试使用 getter 获取值。

```
public void changeDisplay() {
   Events e = new Events(); 
```

代替在 changeDisplay 函数中创建 Events 类的新对象，您必须使用在 getEvent 函数中创建的 Events 类的相同对象。

因为您在不同的对象中设置了值，并且您试图从 Events 类的不同对象中获取值，这就是它向您显示空值的原因。

# javascript - 使 Javascript RSA 消息加密给出相同的结果

> ID：14426186
> 
> 赞同：2
> 
> 时间：2013-01-20T15:45:54.913
> 
> 标签：javascript, rsa, public-key-encryption

您好，我正在使用 javascript RSA 加密过程并且它正在工作：

```
<!DOCTYPE html>
    <html lang="en">
            <head>
            <title></title>
              <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
              <script type="text/javascript" src="base64.js"></script>
              <script type="text/javascript" src="asn1.js"></script>
              <script type="text/javascript" src="jsbn.js"></script>
              <script type="text/javascript" src="prng4.js"></script>
              <script type="text/javascript" src="rng.js"></script>
              <script type="text/javascript" src="rsa.js"></script>
              <script type="text/javascript" src="pemconvert.js"></script>
              <script>
                    function loadpubKey(){
                            var pubkey = "-----BEGIN PUBLIC KEY-----\nMFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAPBYvSszUjI5psKM958bHTDb+9NONv3X\nWVIGLR9/Al4j8/mqSDMhwFuu9oEyXl80+Ga2cohEQPpWyxzg3/tfGDUCAwEAAQ==\n-----END PUBLIC KEY-----";
                            $("#publicKey").html(pubkey);
                        }
                    function RSAEncryptData()
                        {
                            var Message = $("#Message_to_Encrypt").val();
                            var pubkey = pem_import($("#publicKey").val());             
                            $("#RSAMessageEncrypted").html(pubkey.encrypt(Message));
                        }
            </script>
            </head>
        <body onload="loadpubKey();">
        <h1>RSA Encryption/Decryption using library From :https://github.com/tao-software/jsrsa</h1>
        <form>
                <strong>Public key         :</strong> <textarea rows="3" cols="100"  id="publicKey"></textarea><br>
                <strong>Message to RSA encrypt :</strong> <textarea rows="3" cols="100"  id="Message_to_Encrypt"></textarea><br>
                <input type="button" value="RSA Encrypt" onclick="RSAEncryptData();">
                <strong>RSA encrypted Message :</strong> <textarea rows="3" cols="100"  id="RSAMessageEncrypted"></textarea><br>
        </form> 
        </body>
    </html> 
```

每次我使用相同的消息进行加密点击“加密”按钮时，我都会得到一个新的不同加密值。我该怎么做才能使这种加密为使用的相同消息提供相同的加密结果？

实际上我想要做的是使用 RSA 用公钥加密一些电话号码，然后将它们存储在一个表中，然后我将加密任何电话号码，我将在 RSA 中使用相同的公钥通过一个过程并查看如果有匹配的表。

使用上面的脚本，即使我多次加密同一个电话号码，我也永远找不到匹配项，这就是为什么我希望在加密同一个电话号码时结果相同。欢迎任何想法。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:20:48.200

正如 Greg 在[他的评论](https://stackoverflow.com/questions/14426186/make-javascript-rsa-message-encryption-giving-same-result#comment20083095_14426186)中所说，PKCS #1 填充中的随机性将导致您的加密结果每次都不同。

根据您的用例，我建议您将电话号码的哈希值与加密数据一起存储。然后，您可以根据哈希执行快速查找。您可能希望在散列之前对您的电话号码加盐。

*请记住，哈希值不能保证是唯一的，因此您会得到两个冲突的哈希值的可能性很小。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T19:34:13.877

听起来你想用你的私钥*签署一条消息，并让其他人用你的公钥**验证*签名。您链接的库提供了 RSASign 和 RSAVerify 方法，可能在实例的`sign`和`verify`方法`RSAKey`下。我不是 JS 程序员，所以我只能说这就是它的样子。

# android - Android 4.2 - LD_PRELOAD 是否支持？

> ID：14426191
> 
> 赞同：3
> 
> 时间：2013-01-20T15:46:16.740
> 
> 标签：android, android-ndk, android-4.2-jelly-bean, ld-preload

我想知道较新的 Android 版本现在是否支持 LD_PRELOAD？

在 4.0 ICS 的时候它不是，并且在文档（NDK docs/SYSTEM-ISSUES.html）中仍然有：

```
No support for LD_LIBRARY_PATH, LD_PRELOAD, RTLD_LOCAL and many other options. 
```

但是几天前，我在我的 Android 4.2 Galaxy Nexus 上使用了 LD_LIBRARY_PATH 并且它有效（！）。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-05T18:30:55.217

虽然官方的 NDK-r9d 文档仍然这么说，但事实证明 LD_PRELOAD 确实适用于有根设备。跑

```
adb shell
setprop wrap.com.xyz.yourapp LD_PRELOAD=/path/to/your/library.so
stop
start 
```

将库推送到设备后。我在 ANDROID-19 模拟器上成功尝试了它以提供函数的替代定义。

查看此链接 - [http://cedricvb.be/post/intercepting-android-native-library-calls/](http://cedricvb.be/post/intercepting-android-native-library-calls/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:29:11.313

一般来说，`LD_LIBRARY_PATH`他已经在工程构建（又名 root 设备）上工作了很长一段时间。问题是这对生产构建没有帮助——不是因为加载器改变了，而是因为你的应用程序的环境是安全的。

# php - 连接到数据库mysql以进行事件的php日历

> ID：14426193
> 
> 赞同：0
> 
> 时间：2013-01-20T15:46:31.573
> 
> 标签：php, mysql

所以我有一个非常简单的日历的代码，但是我不知道如何查询 mysql 数据库来查找该月每一天的任何事件。我知道如何在数据库中查询该信息，但我不知道我会将它放在创建日历的代码中的什么位置，或者如何构建它或其他任何东西。我查看了许多 php 日历代码，对于每个代码我都无法从我的数据库中获取数据，我只是不知道该怎么做。任何帮助将不胜感激，谢谢。编辑日历代码以包含数据库内容：

```
include ("connection.php"); 

$date =time (); 
$day = date('d', $date); 
$month = date('m', $date); 
$month = $month + "02";
$year = date('Y', $date); 
$years = substr($year, 2, 2);

$first_day = mktime(0,0,0,$month, 1, $year); 
$title = date('F', $first_day); 
$day_of_week = date('D', $first_day); 
switch($day_of_week){ 
    case "Sun": $blank = 0; break; 
    case "Mon": $blank = 1; break; 
    case "Tue": $blank = 2; break; 
    case "Wed": $blank = 3; break; 
    case "Thu": $blank = 4; break; 
    case "Fri": $blank = 5; break; 
    case "Sat": $blank = 6; break; 
}

$days_in_month = cal_days_in_month(0, $month, $year);
echo "<table border=1 width=294>";
echo "<tr><th colspan=7> $title $year </th></tr>";
echo "<tr><td width=42>S</td><td width=42>M</td><td 
width=42>T</td><td width=42>W</td><td width=42>T</td><td 
width=42>F</td><td width=42>S</td></tr>";
$day_count = 1;
echo "<tr>";

while ( $blank > 0 ) 
{ 
    echo "<td></td>"; 
    $blank = $blank-1; 
    $day_count++;
} 
$day_num = 1;
 while ( $day_num <= $days_in_month ) 
{ 

echo "<td> $day_num <br/>";

$result = mysql_query("SELECT time, length FROM hire WHERE day = '$day_num' and month =    '$month' and year = '$years'") or die ('Error: '.mysql_error ()); 
```

而 ($row = mysql_fetch_array($result)){

```
$time = $row['time'];
$length = $row['length'];

}

if (isset($time) and (isset($length))) {
 echo "Time: " . $time . "<br/> Length: " . $length . "<br/>";
}

"</td>";

    $day_num++; 
    $day_count++;
        if ($day_count > 7)
        {
        echo "</tr><tr>";
        $day_count = 1;
        }

} 

while ( $day_count >1 && $day_count <=7 ) 
{ 
    echo "<td> </td>"; 
    $day_count++; 
} 

echo "</tr></table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:06:16.797

您需要将数据库代码放在输出日期单元格的位置。这是代码：

```
<?php
include ("connection.php"); 

$date =time (); 
$day = date('d', $date); 
$month = date('m', $date); 
$month = $month + "01";
$year = date('Y', $date); 

$first_day = mktime(0,0,0,$month, 1, $year); 
$title = date('F', $first_day); 
$day_of_week = date('D', $first_day); 
switch($day_of_week){ 
    case "Sun": $blank = 0; break; 
    case "Mon": $blank = 1; break; 
    case "Tue": $blank = 2; break; 
    case "Wed": $blank = 3; break; 
    case "Thu": $blank = 4; break; 
    case "Fri": $blank = 5; break; 
    case "Sat": $blank = 6; break; 
}

$days_in_month = cal_days_in_month(0, $month, $year);
echo "<table border=1 width=294>";
echo "<tr><th colspan=7> $title $year </th></tr>";
echo "<tr><td width=42>S</td><td width=42>M</td><td width=42>T</td><td width=42>W</td><td width=42>T</td><td width=42>F</td><td width=42>S</td></tr>";
$day_count = 1;
echo "<tr>";

while ( $blank > 0 ) 
{ 
    echo "<td></td>"; 
    $blank = $blank-1; 
    $day_count++;
} 
$day_num = 1;
 while ( $day_num <= $days_in_month ) 
{ 
    //database code here
    $result = ''; //formatted html result
    echo "<td> $day_num $result</td>"; 
    $day_num++; 
    $day_count++;
    if ($day_count > 7)
    {
        echo "</tr><tr>";
        $day_count = 1;
    }
} 

while ( $day_count >1 && $day_count <=7 ) 
{ 
    echo "<td> </td>"; 
    $day_count++; 
} 

echo "</tr></table>"; 
```

# java - GWTquery 事件侦听器不工作

> ID：14426195
> 
> 赞同：0
> 
> 时间：2013-01-20T15:46:53.073
> 
> 标签：java, gwt, gwtquery

我正在尝试向这样的元素添加一个简单的单击侦听器：

```
$(".choice_span").bind(Event.ONMOUSEUP, new Function() {
                public boolean f(Event E) {
                Window.alert("foo");
                return true;
            }
        }); 
```

但是当我点击时，什么也没有发生（所有导入都很好，没有问题）。所以我虽然这可能是我应该等待所有元素加载。所以我把它改成：

```
Scheduler.get().scheduleDeferred(new Scheduler.ScheduledCommand () {
        public void execute () {
            $(".choice_span").bind(Event.ONMOUSEUP, new Function() {
                public boolean f(Event E) {
                Window.alert("foo");
                return true;
            }
        });
        }
    }); 
```

但是点击监听器仍然无法正常工作。我认为 GWTquery 没有问题，因为如果我用类似的东西替换事件处理程序，所有这些跨度都会在页面加载时`$(".choice_span").text("foo")`将它们的文本更改为**foo 。**谁能告诉我这里可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T08:47:45.063

您必须确保您定位的元素在 dom 中。如果您正在使用小部件，则可以将小部件作为查询的上下文传递

`$(".choice_span", myWidget).bind(...)`

或在附加小部件时执行您的查询：

```
myWidget.addAttachHandler(new Handler() {
            @Override
            public void onAttachOrDetach(AttachEvent event) {
                if (event.isAttached()) {
                   $(".choice_span").bind(Event.ONMOUSEUP, ...);
                } else {
                   $(".choice_span").bind(Event.ONMOUSEUP);
                }
            }
        }); 
```

如果你想在点击时收听，我建议你使用 click() 方法。

# c++ - vs2012 工具集兼容性

> ID：14426198
> 
> 赞同：6
> 
> 时间：2013-01-20T15:47:07.767
> 
> 标签：c++, visual-c++, visual-studio-2012, msvcrt

在我的 VS2012 中，我有 4 个可用的工具集：v90、v100、v110 和 v110_xp。我用两个项目 testlib（一个静态库）和 testexe（控制台应用程序）做了一个简单的测试。接口只是一个带有签名的函数`void test()`。结果：

*   testlib(v90), testexe(v90 以外的任何东西) -> 不链接
*   testlib(v100), testexe(v110 or v110_xp) -> 链接

然而，我觉得 v100 和 v110 会链接起来有点奇怪，所以我试图让场景复杂一点。现在我的方法看起来像这样`std::map<std::string, std::string> test(const std::string& arg)`：正如预期的那样，testlib(v100) 和 testexe(v110) 没有链接 ( `mismatch detected for '_MSC_VER'`)。

但是 testlib(v110) 和 testexe(v110_xp) 仍然可以链接，并且生成的 exe 可以在 Windows XP 上运行。这只是偶然还是这是受支持的情况？如果这只是偶然，那么欢迎使用仅使用 v110_xp 中提供的功能并破坏这种兼容性的示例代码。我想知道是否应该将我的库的两个版本部署到我的客户，或者只使用 v110 编译的版本。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-20T17:08:51.473

“工具集”一词在描述 v110 和 v110_xp 之间的差异时有点用词不当。您仍在使用相同的构建工具。而且您仍然拥有相同版本的 CRT。通过比较您在两个版本之间加载的 DLL 的 Debug + Windows + Module 列表中看到的内容，您可以看到一些内容。记下 msvcr110.dll 的名称和位置。

CRT 实际上是由 Update 1 更新的，它现在支持 XP 和更新的 Windows 版本。这通过它在运行时动态绑定到后来的 winapi 函数来工作，使用 GetProcAddress()，如果在 XP 上运行时找不到它们，它会一瘸一拐地走。

不同的是您获得了另一个版本的 Windows SDK。最后一个仍然与 XP 7.1 兼容的版本。您会在 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.1A 中找到它。当您使用 v110 工具集构建时，您将使用存储在 C:\Program Files (x86)\Windows Kits\8.0 中的 SDK 包含和库文件

当您在 c:\program files (x86)\msbuild 目录中搜索该字符串时，可以看到使用 v110_xp 时的特定更改：

*   包含和 lib 文件等的目录更改为 Windows 7.1 SDK 路径
*   添加了 _USING_V110_SDK71_ 预处理器符号，不在其他任何重要的地方使用
*   链接器的 /SUBSYSTEM 选项已更改为仅需要 Windows 版本 5.02，即 XP 版本号。

长话短说，混合使用 v110 和 v110_xp 工具集构建的模块不是问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T13:15:30.587

官方不支持混合`v110_xp`可执行文件和`v110`库。

在与 Microsoft 单独上报此问题后，他们回答了以下问题：

**Q1: 使用这些库 (v110) 并使用工具集 v110_xp 构建的应用程序能否在 Windows XP 机器上正常运行？**

只有使用 v110_xp 工具集构建的可执行文件才能在 Windows XP 机器上正常运行。因此，如果应用程序需要在 Windows XP 机器上正常运行，您需要确保您的项目从默认的 v110 工具集切换到项目属性页中新引入的 v110_xp 工具集，包括可执行文件和 DLL，如果有的。

**Q2：我们是否需要发布使用工具集 v110_xp 构建的这些库的另一个版本？**

我认为这取决于您需要在哪种平台上部署应用程序。如果您的部署计划包括 Windows XP 机器，则有必要发布使用 v110_xp 工具集构建的可执行文件/DLL 的新版本。但是，考虑到使用 v110_xp 工具集构建的相同可执行文件/DLL 也可以在 Vista 及更高版本上运行，我建议您可以只保留使用 v110_xp 工具集构建的可执行文件/DLL 的单个版本，这可以在所有其他平台上运行。当 Windows XP 不再在您的部署计划中时，您可以将整个可执行文件/DLL 转换为使用 v110 工具集进行重建。如果您想分别针对 Windows XP 和其他系统，如果您可以同时维护两个版本的可执行文件/DLL，当然会很好。

**Q3：Microsoft 是否支持在 Windows XP 上使用工具集 v110 构建的库？**

答案是不。如果您想在 Windows XP 上正确运行应用程序，一切都需要在 v110_xp 模式下构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:11:46.250

请不要将具有/导出类的 DLL 与不同版本的 Visual Studio 混合（即使是较小的版本差异）。STL 和 MFC 具有构建在模板之上的类（类本身可能没有为用户模板化），这防止了不同版本之间的链接和/或编译。

一个简单的例子是`CString`：与 MFC 的静态和动态链接将有不同的`CString`实现。Unicode 和 ANSI`CString`也不同。另一个例子是 STL 本身： Debug build`vector`与 release build 不同`vector`。此外，在 STL 集合的情况下，编译器设置也会改变容器的大小/实现（如`vector`, `list`）。

因此，最好不要导入具有这些类型的类作为参数的导出类/函数。甚至不要以不透明的方式传递它们（比如在 void-pointer 之上）。

# coded-ui-tests - 如何在编码的 ui 测试完成后保持浏览器打开？

> ID：14426202
> 
> 赞同：3
> 
> 时间：2013-01-20T15:48:16.863
> 
> 标签：coded-ui-tests

我正在为 Web 应用程序使用 Visual Studio 2012 Coded UI 测试。我有一个登录应用程序的测试，该应用程序启动浏览器，找到登录对话框，输入凭据，然后单击确定。我有一个断言，它在登录后检查正确的 url。此测试似乎运行正常。我的问题是它在测试运行后关闭了浏览器。我需要保持浏览器打开，这样我才能运行序列中的下一个测试。我该怎么做呢？

目前，我的 [TestCleanup()] 部分中没有任何内容。我假设我正在寻找的东西在这里，但到目前为止，我还没有很幸运地弄清楚它应该是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T15:10:53.240

我没有找到此解决方案的原始来源:(您可以使用如下所示的方法。此方法需要在 TestSetup 中调用。还声明类型 BrowserWindow 的类级别变量 _browserWindow

```
private void SetBrowser()
    {
        if(_browserWindow == null)
        {
            BrowserWindow.CurrentBrowser = "ie";
            _browserWindow = BrowserWindow.Launch("http://www.google.com");
            _browserWindow.CloseOnPlaybackCleanup = false;
           _browserWindow.Maximized = !_browserWindow.Maximized;
        }
        else
        {
            BrowserWindow.CurrentBrowser = "ie";
            _browserWindow = BrowserWindow.Locate("Google");
           _browserWindow.Maximized = !_browserWindow.Maximized;
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:43:35.567

好的，所以我需要做的是在每次测试之前启动和登录。我想我想要的是先运行浏览器和登录测试，然后是每个额外的测试。在阅读了更多之后，我决定我真正想要的是将这个逻辑作为每个测试的初始化代码运行。我通过将此代码添加到在 Visual Studio 2012 中启动编码的 ui 项目时生成的默认 [TestInitialize()] 来完成此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-25T23:16:06.830

我发现以下方法适用于 Visual Studio 2015 中的数据驱动编码 UI 测试。

您将需要使用 [ClassInitialize] 并打开浏览器并根据 [TestMethod] 开始的位置引导它。

在测试类中的所有方法都执行完毕后，使用[ClassCleanup]释放资源。

您可以在使用 [TestInitialize] 初始化类后重定向不同的测试方法，并使用 [TestCleanup] 清理测试。但是要小心这些，因为它们会在每种测试方法中发生，如果它关闭您的浏览器实例，您的后续测试将失败。

```
private static BrowserWindow browserWindow = null;

[ClassInitialize]
public static void ClassInitialize(TestContext context)
{
    Playback.Initialize();
    browserWindow = BrowserWindow.Launch(new Uri("http://198.238.204.79/"));          
}

[ClassCleanup]
public static void TestCleanup()
{
    browserWindow.Close();
    Playback.Cleanup();
} 
```

# java - Java ObjectInputStream（服务器\客户端）

> ID：14426205
> 
> 赞同：0
> 
> 时间：2013-01-20T15:48:38.530
> 
> 标签：java, objectinputstream

服务器线程

```
package schatserver;

public ServerThread(Socket socket) {
        this.socket = socket;
        this.start();
    } 

 public void run() {
        try {
             ObjectInputStream inputStream = new ObjectInputStream(this.socket.getInputStream());
              ObjectOutputStream outputStream = new ObjectOutputStream(this.socket.getOutputStream());
        container = (Message) inputStream.readObject();  
        .....
        ..... etc 
```

并且“消息类”包含在服务器端和客户端

```
public class Message implements Serializable {

private String login;
private String message;
private String[] users;
private Date time;

public Message(String login, String message){ //for client
        this.login = login;
        this.message = message;
        this.time = java.util.Calendar.getInstance().getTime();
    }

 public Message(String login, String message, String[] users){//for server
        this.login = login;
        this.message = message;
        this.time = java.util.Calendar.getInstance().getTime();
        this.users = users;
    } 
```

尝试发送对象“消息”

```
private static Message message;

public void Connect() {
        try {            
            sock = new Socket(ClientConfig.HOST, ClientConfig.PORT);
            System.out.println("Connected with: " + ClientConfig.HOST);                        
            ObjectOutputStream out = new ObjectOutputStream(sock.getOutputStream());
            out.writeObject(message);
            out.flush(); 
```

在这一行得到“java.lang.ClassNotFoundException：socketchatclient.Message”

```
 container = (Message) inputStream.readObject(); 
```

有人可以解释我应该如何发送对象消息吗？

套接字聊天客户端。- 这是客户端包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:00:04.270

> java.lang.ClassNotFoundException：socketchatclient.Message

这意味着您正在尝试反序列化您没有的类。您的客户端上的代码很可能与服务器上的代码不同，并且客户端已经序列化了它拥有的一个类，但除非服务器在同一个包中也有这个类，否则它无法反序列化它。

我建议您有一个用于可序列化对象的通用模块，并且客户端和服务器共享以确保相同的类在两端都可用。

# text-to-speech - 是否可以控制 eSpeak 文本到语音的速度？

> ID：14426206
> 
> 赞同：5
> 
> 时间：2013-01-20T15:49:08.233
> 
> 标签：text-to-speech, espeak

是否可以控制 eSpeak 文本到语音的速度？如果可能的话 - 怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-02T02:42:32.270

这取决于您所说的“速度”是什么意思，以及您如何访问该程序。通过命令行，最简单的方法是`-s<words per minute>`和`-g<gap in milliseconds>`，下面的详细信息。GUI 只允许设置`-s`80-450 的推荐范围内的值。

### 命令行

如果您使用的是命令行，每分钟说的字数可以像 Kara 提到的那样使用选项`-s <words per minute>`. 根据默认值`espeak --help`是每分钟 175 个字。

最小值被列为每分钟 80 个字，在命令行中提供较低的值只是默认为 80。列出的最大速度是 450，但在命令行中可能超过这个值，这样做是否明智是完全由用户决定。

如果你的意思是单词之间的停顿，`-g <gap in milliseconds>`可以用来影响间距。同样，默认值列为 10mS。但是，给出 - 的值会`g1000`在单词之间设置 5 秒的间隔；我怀疑这是文档中的错误，需要进一步调查。

强烈建议阅读`espeak --help`，您可能必须先找到`espeak`可执行文件的正确路径。

### 图形用户界面

如果您可以访问 GUI，例如从 espeak 安装程序编译的 TTSApp.exe，则移动速率滑块将允许您在 -s80 和 -s450 之间移动。

似乎无法使用 Microsoft GUI 更改字间距。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T01:13:59.717

您可以使用选项指定每分钟的`-s`字数，默认为 160 wpm。

`espeak "hello world" -s 100`

# php - PHPUnit 数据提供程序错误

> ID：14426208
> 
> 赞同：4
> 
> 时间：2013-01-20T15:49:24.897
> 
> 标签：php, unit-testing, phpunit

所以我刚开始使用 PHPUnit，我正在为一个非常简单的库编写测试。它只包含两个类，所以我认为这将是一个很好的起点，这样我就可以了解单元测试的工作原理。

我做了一级测试没有任何问题，但第二个让我头疼，因为我就是不知道这有什么问题。我的数据提供者似乎有些错误。

```
<?php

use PIFlex\Roulette\Roulette;

class RouletteTest extends PHPUnit_Framework_TestCase
{
    protected $roulette;

    public function setUp()
    {
        $this->roulette = new Roulette();
    }

    /*
     * @dataProvider addItemDataProvider
     */
    public function testAddItem($item)
    {
        $this->assertInstanceOf(
            'PIFlex\Roulette\Roulette',
            $this->roulette->addItem($item, 1)
        );
    }

    public function addItemDataProvider()
    {
        return array(
            array("string"),
            array(1),
        );
    }
} 
```

它向我抛出以下错误：

```
There was 1 error:

1) RouletteTest::testAddItem
Missing argument 1 for RouletteTest::testAddItem()

/home/igor/Dropbox/www/Github/PIFlexRoulette/test/PHPUnit/Roulette/RouletteTest.php:22

FAILURES!
Tests: 12, Assertions: 11, Errors: 1. 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-20T16:06:55.943

您有错误的注释注释。它应该以“**”开头，所以只需更改：

```
/*
 * @dataProvider addItemDataProvider
 */ 
```

进入：

```
/**
 * @dataProvider addItemDataProvider
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T19:02:31.937

*...扩展[@Cyprian的回答](https://stackoverflow.com/a/14426364/934739)...*

关于注释的[PHPUnit 文档附录](http://phpunit.de/manual/4.1/en/appendixes.annotations.html)指出

> 注释是一种特殊形式的句法元数据，可以添加到某些编程语言的源代码中。`@annotation arguments`虽然 PHP 没有用于注释源代码的专用语言功能，但 PHP 社区已经建立了使用诸如文档块中的标签来注释源代码。在 PHP 文档中，块是反射的：它们可以通过反射 API 的`getDocComment()`方法在函数、类、方法和属性级别上访问。PHPUnit 等应用程序在运行时使用此信息来配置其行为。— [PHPUnit 文档](http://phpunit.de/manual/4.1/en/appendixes.annotations.html)

反射可`getDocComment()`用于：

*   [`ReflectionClass`](http://php.net/manual/reflectionclass.getdoccomment.php)
*   [`ReflectionFunctionAbstract`](http://php.net/manual/reflectionfunctionabstract.getdoccomment.php)
*   [`ReflectionProperty`](http://php.net/manual/reflectionproperty.getdoccomment.php)

虽然没有记录需要两个星号，但在评论部分[`ReflectionClass::getDocComment`](http://php.net/manual/reflectionclass.getdoccomment.php#99938)， 和[`ReflectionFunctionAbstract::getDocComment`](http://php.net/manual/reflectionfunctionabstract.getdoccomment.php#94591).

**资源**

*   [PHP 反射文档](http://php.net/manual/book.reflection.php)

# c# - 管理网格中的列跨度

> ID：14426211
> 
> 赞同：1
> 
> 时间：2013-01-20T15:49:41.213
> 
> 标签：c#, wpf, windows-phone-7, xaml

> **可能重复：**
> [WPF 网格中的独立宽度](https://stackoverflow.com/questions/14185191/independants-width-in-a-wpf-grid)

我想在网格上显示 3 个文本块 (2 x 2)

我需要使用 columnspan，但我做不到。

我有的 ：

![在此处输入图像描述](../Images/a9673ce41817ff7bec9e32b436a32eb1.png)

我想要的是 ：

![在此处输入图像描述](../Images/0288ad7ddb2c45d1af199e5796f86ff1.png)

我尝试了几种操作。

这是我的代码：

```
<Grid Margin="20" VerticalAlignment="Top" HorizontalAlignment="Stretch">
 <Grid.RowDefinitions>
    <RowDefinition />
    <RowDefinition />
 </Grid.RowDefinitions>

 <Grid.ColumnDefinitions>
    <ColumnDefinition Width="*"/>
    <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>
 <TextBlock  Grid.Row="0" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCodeTiers" Text="{Binding m_strCode}" FontWeight="Bold" FontSize="22" />
 <TextBlock  Grid.Row="0" Grid.Column="1" Margin="0,0,10,0" x:Name="TxtBox_cNomTiers" Text="{Binding m_strNom}"   FontWeight="Bold" FontSize="22" />
 <TextBlock Grid.Row="1" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCPostal" TextWrapping="Wrap" Text="{Binding m_strFonction}" />
</Grid> 
```

我知道我需要使用 ColumnSpan 但我试过但没有结果:(

任何人都可以

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T15:56:57.710

尝试`Grid.ColumnSpan`在最后添加`TextBlock`：

```
<TextBlock  Grid.ColumnSpan="2" Grid.Row="1" Grid.Column="0" Margin="0,0,10,0" x:Name="TxtBox_cCPostal" TextWrapping="Wrap" Text="{Binding m_strFonction}" /> 
```

# ruby-on-rails - 可以在控制器规范中创建记录吗？

> ID：14426213
> 
> 赞同：0
> 
> 时间：2013-01-20T15:49:45.190
> 
> 标签：ruby-on-rails, rspec, devise, factory-bot

我写了以下示例：

```
it "should assign @services containing all the current user services" do
  customer = FactoryGirl.create(:user, fullname: "Iris Steensma")
  sign_in customer
  service = FactoryGirl.create(:service, user: customer)
  puts "Service.count = #{Service.count}" # Service.count = 0
  get :home
  assigns[:services].should eq([service])
end 
```

动作控制器为：

```
def home
 #@services = curent_user.posted_services
 @services = Service.all
end 
```

factory.rb 包含：

```
FactoryGirl.define do

  sequence :address do |n|
    "Street #{n}"
  end

  factory :user do
    fullname "Foo Bar"
    email { "#{fullname.gsub(' ', '.').downcase}@example.com" if fullname }
    password "secret"
  end

  factory :preference do
    profile "customer"
    user
  end

  factory :service do
    status :pending
    source_addr { generate(:address) }
    target_addr { generate(:address) }
    passenger "Mis Daysi"
    start_at Time.now
    offer 5
    payment "cash"
    user
  end

end 
```

为什么 Factory Girl 无法创建服务记录？工厂在“rails c test”测试环境下工作正常

这是 rspec 输出：

```
Failures:

  1) UsersController GET home should assign @services containing all the current user services
     Failure/Error: assigns[:services].should eq([service])

       expected: [#<Service:0x460d8ea @name="Service_1003">]
            got: []

       (compared using ==)

       Diff:
       @@ -1,2 +1,2 @@
       -[#<Service:0x460d8ea @name="Service_1003">]
       +[]

     # ./spec/controllers/users_controller_spec.rb:26:in `block (3 levels) in <top (required)>'

Finished in 1.03 seconds
3 examples, 1 failure 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:54:06.977

我相信正确的语法是：

```
assigns(:service).should eq([service]) 
```

根据 rspec 文档`assigns[key]`曾经是分配实例变量的方式，这看起来有点像你正在发生的事情。

[https://github.com/rspec/rspec-rails](https://github.com/rspec/rspec-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T11:45:34.157

首先， user: customer 这里不需要，因为您使用的 customer.services.create 已经这样做了

```
service = customer.services.create(attributes_for(:service, user: customer)) 
```

其次，试试这个，在 service = customer.services.create 之后做类似的事情

```
service.valid?
puts service.errors.inspect
puts service.user == customer 
```

也许你也可以试试

```
service = FactoryGirl.create(:service, :user => customer) 
```

另外，您确定关联是在服务类上定义的吗？

没有

```
#<Service:0x57856f4 @name="Service_1003"> 
```

应该

```
#<Service:0x57856f4 @name="Service_1003" user="<your customer object"> 
```

?

您的服务工厂是如何定义的？

# php - 如何阻止人们访问需要登录的隐藏页面？

> ID：14426214
> 
> 赞同：0
> 
> 时间：2013-01-20T15:50:02.990
> 
> 标签：php, html, session

我在学校做一个项目，我需要知道一种简单的方法来阻止人们在没有会话的情况下进入该站点。我有很多页面我不相信我花时间在每个页面上粘贴代码。此外，由于 php，我在每个页面中都包含了菜单栏，所以我想知道我必须在菜单中放入什么类型的代码来阻止没有会话的用户。其余的内容代码在我想隐藏的页面上。我相信您可以通过输入网址登录并允许用户查看已登录用户的隐藏页面。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:19:21.357

请不要使用普通的 cookie。会议是要走的路。或者，如果不能使用会话并且必须使用 cookie，请先对 cookie 进行签名，以便能够验证您的应用程序确实是设置它的应用程序。

```
 <?php
session_start();

if (!isset($_SESSION['authenticated'])) {
  header('Location: login.php');
  exit; 
}

... whatever logged in users should see .. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-20T16:01:43.623

如果您不想使用会话，请使用 cookie。

```
<?php
/*Just add this piece of PHP code to top of any page you 
   don't want not-logged in users to see */
if (!isset($_COOKIE['logged']))
    header("Location: login.php");  //It redirects the user to your login page

?>

<html>
   <body>
      ...
   </body>
</html> 
```

登录页面可能是这样的：

```
<?php
    if (isset($_COOKIE['logged']))
        header("home.php");

    if ($_POST['submit']) {
        //get username and password
        $uname = $_POST['uname'];
        $pass = $_POST['password'];

        if ($uname=="correct" && $pass=="correct"){ //EDIT
            setcookie('logged','1');
                    header("Location: home.php"); //Redirect to home page
        }
        else echo "Wrong combinaton!";
    }

?>

<html>
    <body>
        <form action="login.php" method="post">
            <label>Username</label><input type="text" name="uname" /><br />
            <label>Password</label><input type="password" name="pass" /><br />
            <input type="submit" name="submit" value="Login" />
        </form>
    </body>
</html> 
```

# php - 将字符串转换为时间和日期

> ID：14426215
> 
> 赞同：0
> 
> 时间：2013-01-20T15:50:16.017
> 
> 标签：php

我正在从 API 解析数据。我正在获取开始时间 ( `634942260000000000`) 和结束时间 ( `634942332000000000`)。你能指导我如何解码这个字符串以获得格式化的时间/日期吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:53:34.777

它们对我来说就像服务器滴答声。

```
$seconds = $ticks / 1000000;
$date = date("d-m-Y", $seconds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:54:39.520

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)做你需要的，传递你想要的格式作为第一个参数，你的时间（以毫秒为单位）作为第二个参数。

# image - 图案图像压缩/生成

> ID：14426218
> 
> 赞同：1
> 
> 时间：2013-01-20T15:50:42.727
> 
> 标签：image, design-patterns, compression

用某种模式无损压缩图像的最佳方法是什么。我想要尽可能小的尺寸，理想的是可以生成图像中的图案（或非常接近的图案，然后只存储差异）：

![噪音](../Images/573b2c667cd1e20276fc166b4cb4ae6e.png)

它看起来有点像地毯设计。[我已经在这里](https://stackoverflow.com/questions/14140808/noise-image-compression)发布了类似的主题，但现在我有了带有图案的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:17:35.237

如果您事先知道图案的大小，则可以首先压缩该图案并添加几个数字来指示复制的图案。在您显示的示例图像中，只需添加图案沿每个维度重复的次数。

否则，如果除了图像之外没有先前的信息，该图像由一个重复多次的较小图像模式组成，那就相当棘手了。

对于这种模式图像只是平铺多次的特殊情况，您可以首先计算图像的 FFT。结果，您的频域中的峰值彼此之间的偏移距离与空间域中的相同。您提取这些峰值，然后您就知道模式重复自身的频率，即模式的大小。最后，您从图像中裁剪出一个矩形并将其用作生成模式。

# c++ - C++ Websocket 接收 2 个字节

> ID：14426220
> 
> 赞同：0
> 
> 时间：2013-01-20T15:51:08.013
> 
> 标签：c++, unix, websocket, recv

直升机。我正在开发一个 C++ Websocket 库。一切正常，直到出现一个奇怪的问题。

```
 int n = 0, n_add = 0;
char *buf = (char*)malloc(BUFLEN);
char new_buffer[4096];
while ((n = recv(client_id, buf, BUFLEN, 0)) > 0) {
    strcat(new_buffer, buf);
    int new_buffer_length = strlen(new_buffer);
    int buf_length = strlen(buf);
    n_add+= n;
    // debug
    cout << "buf: '" << buf << "'" << endl;
    cout << "new_buffer_length: '" << new_buffer_length << "'" << endl;
    cout << "buf_length: '" << buf_length << "'" << endl;
    cout << "n: '" << n << "'" << endl;
    cout << "n_add: '" << n_add << "'" << endl;

    memset(buf, '\0', BUFLEN);
    if (n_add == new_buffer_length && n < BUFLEN) {
        cout << "new_buffer: '" << new_buffer << "'" << endl;
        // if client is already connected
        if (ws_clients[client_id][2] == WS_READY_STATE_OPEN) {
            this->ws_client_message(client_id, new_buffer, new_buffer_length);
        }

        // if client needs a handshake
        if (ws_clients[client_id][2] == WS_READY_STATE_CONNECTING) {
            this->ws_client_handshake(client_id, new_buffer);
        }
        memset(&new_buffer, '\0', 4096);
        n_add = 0;
        FD_ZERO(&this->tmp_fds);
    }
} 
```

握手以及小于 126 的任何有效负载都完成得很好。当发生这种情况时，我得到了这个：

```
buf: 'þ'
new_buffer_length: '2'
buf_length: '2'
n: '128'
n_add: '128'
buf: '½HÆA¯J'
new_buffer_length: '8'
buf_length: '6'
n: '6'
n_add: '134' 
```

n 说我收到了 128 个字节，但实际上只有 2 个，第二次给了我 6 个字节，这些都可以。如果我将限制为 128 的 BUFLEN 更改为 2，我会一切正常，除了最后一个循环，它永远不会达到 134，即实际有效载荷长度。

好的，如果每个人都有任何想法，我正在使用[http://www.websocket.org/echo.html](http://www.websocket.org/echo.html)进行测试，我尝试了一切。请给我一些提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:59:43.153

char* 不一定是 C 字符串，它必须正确终止。

```
while ((n = recv(client_id, buf, BUFLEN, 0)) > 0) {
    strcat(new_buffer, buf);
    .... 
```

这个拼写问题，无论在 buf 中收到什么，都可能不会被 '\0' 终止。当你调用 strcat 时，它不起作用。

查看strcat 和**strncat**函数的手册，确保正确使用这些函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:56:23.497

RFC6455的[数据框架](https://www.rfc-editor.org/rfc/rfc6455#section-5)部分显示 websocket 消息不是纯文本，也不是以 null 结尾的字符串。您不能使用 C 字符串处理函数，例如`strlen`或`strcat`在您阅读的消息上。

如果您想继续使用 C 字符串，请使用`n`来确定您已读取的字节数并将`strncpy`其添加到缓冲区中。由于您正在编写 C++ 服务器，因此如果改用使用，您可能会发现事情更容易`std::string`。

处理大约 128 个字符的消息的差异可能来自这样一个事实，即用于指示消息长度的字节数对于超过 125 个字节的有效负载会增加。对于长度在 126 到 255 字节之间的消息，扩展的有效负载长度中将有一个零字节。您的代码将（错误地）将此解释为 C 字符串的终止符。

# jquery - jQuery/Css 使用 z-index 和相对位置作为居中按钮？

> ID：14426221
> 
> 赞同：0
> 
> 时间：2013-01-20T15:51:10.377
> 
> 标签：jquery, css, position, z-index

我有一个按钮位于另一个 div （容器）的中心。单击按钮时，其他一些 div 也会显示在此容器中。实际上它们在那里，但使用 css dipslay: none，并使用 jQuery 显示。

但是，当您单击以显示这些 div 时，该按钮会从 div 中剔除。我明白为什么，但我认为我可以使用 z-index 将按钮保持在原位？

我的问题是，我怎样才能在不使用绝对位置的情况下将按钮保持在原位？

*我不想使用绝对位置的原因是因为我想让它保持响应。如果我对按钮使用绝对值，那么除了按钮之外，一切都是响应式的。如果这是废话，也请告诉我！*

[**jsfiddle**](http://jsfiddle.net/yRGrL/)

**CSS**

```
#button {
    height:40px;
    width:100px;
    margin: -20px -50px;
    position:relative;
    top:50%;
    left:50%;
    z-index: 30;
}
#container {
    z-index: 2;
    height: 424px;
    width: 424px;
    background: black;
}
div.square {
    background: gray;
    padding: 0;
    margin: 3px;
    display: none;
    float: left;
    position: relative;
    width: 100px;
    height: 100px;
    z-index: 4;
} 
```

**HTML**

```
<div id="container">
    <input type="button" value="show" id="button"></input>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
    <div class="square"></div>
</div> 
```

**JS**

```
$('#button').bind('click', function () {

    $('.square').show();

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T15:57:45.417

如果将按钮的相对位置设置为 -105px，则无需绝对定位即可

```
$('#button').bind('click', function () {

    $('.square').show();
    $(this).css('left', '-105px');

}); 
```

[http://jsfiddle.net/axrwkr/yRGrL/5/](http://jsfiddle.net/axrwkr/yRGrL/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:29:44.927

绝对定位元素本身并没有什么反应迟钝的地方。当元素最终位于视口之外时，绝对定位会成为问题。在这里使用绝对定位使您的演示不比开始时响应慢，因为绝对定位是相对于`#container`元素的。

[http://jsfiddle.net/yRGrL/4/](http://jsfiddle.net/yRGrL/4/)

```
#button {
    height:40px;
    width:100px;
    margin: -20px -50px;
    position: absolute; /* modified */
    top:50%;
    left:50%;
    z-index: 30;
}
#container {
    z-index: 2;
    height: 424px;
    width: 424px;
    background: black;
    position: relative; /* added */
}
div.square {
    background: gray;
    padding: 0;
    margin: 3px;
    display: none;
    float: left;
    position: relative;
    width: 100px;
    height: 100px;
    z-index: 4;
} 
```

# meteor - 如何在 Meteor 的模板中做一些简单的数学运算？

> ID：14426223
> 
> 赞同：7
> 
> 时间：2013-01-20T15:51:16.887
> 
> 标签：meteor, handlebars.js

假设我在 Meteor 中有一个简单的 product_orders 集合（_id、user_id、user_name、product_name、price_unit、quantity），我想在表中显示单个用户的所有订单，其中每行应包含：

```
user_name, product_name, quantity, price_unit, quantity, price_total (price_unit * quantity) 
```

此外，我想显示所有用户订单的总计。

我看不到在 Handlebars.js 模板中执行此操作的简单方法，因为 Handlebars 似乎不支持简单的数学运算。我可以轻松地将 product_order 的光标返回到我的模板，但看不到在模板中计算 price_total 和总计的简单方法。

我正在考虑创建某种模板助手，但不确定这是否是正确的方向。这个问题看起来必须有一个简单而优雅的解决方案。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-20T16:04:14.810

是的，你应该写一个助手。Handlebars 不支持在模板中使用逻辑（这是一种很好的做法，因为它会强制您应用关注点分离模式）。

模板助手看起来像这样：

```
Handlebars.registerHelper("grandTotal", function(user_name) {
  var grandTotal = some_magic_to_calc_total(user_name);
  return grandTotal;
}); 
```

然后你可以从你的模板中调用这样的助手：

```
<template name="foo">
  {{grandTotal user_name}}
</template> 
```

[您可以在Handlebars.js 文档](http://handlebarsjs.com/)中阅读有关帮助程序的更多信息。

# java - 为什么我的应用程序在模拟器中崩溃？

> ID：14426224
> 
> 赞同：-6
> 
> 时间：2013-01-20T15:51:18.380
> 
> 标签：java, android, passwords, android-edittext

我刚开始编写一个小密码管理器，但每次我在模拟器中运行它时，它都会崩溃并且我收到以下错误：

> android.widget.TextView 无法转换为 android.widget.EditText

每个人都看到了错误吗？

MainActivity.java：

```
package de.lennartschoch.passwordmanager;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

Button login;
EditText masterpassfield;
String masterpass;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    login = (Button) findViewById(R.id.login);
    masterpassfield = (EditText) findViewById(R.id.masterpass);
    masterpass = "password";
    login.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View view) {

            if(masterpassfield.getText().toString() == masterpass) {

                Intent success = new Intent(view.getContext(), Passwords.class);
                startActivityForResult(success, 0);

            }

        }});
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<EditText
    android:id="@+id/masterpass"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textView1"
    android:layout_alignRight="@+id/textView1"
    android:layout_centerVertical="true"
    android:ems="10"
    android:inputType="textPassword" />

<Button
    android:id="@+id/login"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/masterpass"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="20dp"
    android:text="@string/login" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/masterpass"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="20dp"
    android:text="@string/masterpasstext"
    android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:54:16.320

**`Project -> Clean`**似乎是我唯一的解决方案。

尝试清理你的项目几次，然后构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T15:57:10.763

尝试 Project -> Clean 并检查任何 .xml 文件中是否有任何警告。如果有任何 R.class 将无法正确生成。

# maps - 如何将当前位置添加到动态谷歌地图中？

> ID：14426226
> 
> 赞同：0
> 
> 时间：2013-01-20T15:51:26.877
> 
> 标签：maps

我找到了当前位置的代码，但我真的不知道如何在我拥有的动态谷歌地图中实现。有人可以指导我吗？谢谢。

我为当前位置找到的代码：http: [//4rapiddev.com/google-api/display-user-current-location-on-google-map/](http://4rapiddev.com/google-api/display-user-current-location-on-google-map/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:12:39.653

[HTML5 Geolocation](http://www.w3schools.com/html/html5_geolocation.asp)可能会有所帮助。查看在地图中显示结果。

# git - 为什么 .git/refs/remotes 中的 git remote sill 的旧名称？

> ID：14426231
> 
> 赞同：3
> 
> 时间：2013-01-20T15:51:45.527
> 
> 标签：git, git-remote

我最近将我的“主要”远程 git 存储库`code.google`从`github`. 然后，我将旧的`origin`repo 重命名为`code-google`并且之前创建了远程`github`到`origin`. 到目前为止，一切都很好。

但...

中仍有参考`.git/refs/remotes`：

```
code-google  github  origin 
```

我试过这个，但它似乎没有工作：

```
$ git remote prune github --dry-run
fatal: 'github' does not appear to be a git repository
fatal: The remote end hung up unexpectedly 
```

为什么github改名后还在？为什么我不能处理它？我怎样才能清理我的回购？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T15:58:32.320

~~[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/github/0X26kCcn__Q)~~（现已删除）提到重命名遥控器是不够的：

> 如果你想真正完整，你还应该删除你的 ' `origin`' refs ：

```
rm -R .git/refs/remotes/origin 
```

一个更安全的方法是克隆你的新远程仓库（现在在 GitHub 上），然后*添加*另一个远程。

# notepad++ - 如何更改 NppFTP Notepad++ 的背景颜色？

> ID：14426232
> 
> 赞同：3
> 
> 时间：2013-01-20T15:52:00.200
> 
> 标签：notepad++

我想更改 NppFTP Notepad++ 插件背景。
[这是我的 Notepad++ 的截图](http://i.stack.imgur.com/Yfq3K.jpg)，我设置了 Zenburn 主题`Menu Settings -> Style Configurator`。

编程语言和搜索结果区域有黑色背景，但**NppFTP**没有将背景更改为黑色。为什么？
有没有办法将此面板的背景更改为黑色？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:24:11.370

提交 NppFTP 的[功能请求](http://sourceforge.net/tracker/?group_id=321962&atid=1353003)。

# iphone - UIView翻转动画

> ID：14426233
> 
> 赞同：12
> 
> 时间：2013-01-20T15:52:08.790
> 
> 标签：iphone, ios, objective-c, uikit

在我的游戏中，我的主 UIView 上托管了一个较小的 UIView 网格。盒子会随机变成不同的颜色，此时用户可以触摸它们来得分。当他们触摸框时，我想显示某种动画，理想情况下类似于 XCode 原生提供的模态水平翻转 segue。如何在不实际转换到另一个 UIView 的情况下制作此动画？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-20T16:05:29.740

您可以简单地尝试像这样为视图变换设置动画（对于垂直翻转）：

```
[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^(void) {
                     view.transform = CGAffineTransformMakeScale(1, -1);
                 }
                 completion:nil]; 
```

或者为了更好地控制你可以看看[iOS-Flip-Transform](https://github.com/Dillion/iOS-Flip-Transform)。

编辑：

对于阴影的东西，试试这个：

```
 view.layer.shadowColor = [UIColor blackColor].CGColor;
    view.layer.shadowOpacity = 0.75;
    view.layer.shadowRadius = 15.0;
    view.layer.shadowOffset = (CGSize){0.0,20.0};

[UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveEaseInOut
                 animations:^(void) {
                     view.transform = CGAffineTransformMakeScale(1, -1);
                 }
                 completion:^(BOOL b) {
    view.layer.shadowColor = [UIColor clearColor].CGColor;
    view.layer.shadowOpacity = 0.0;
    view.layer.shadowRadius = 0.0;
    view.layer.shadowOffset = (CGSize){0.0, 0.0};
                 }]; 
```

我希望这对你有用。您可以根据需要更改阴影设置。不要忘记导入 QuartzCore/QuartzCore.h。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-20T17:07:16.793

[UIView](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)提供了一个方法叫做

```
+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished))completion 
```

选项包括`UIViewAnimationOptionTransitionFlipFromLeft`和...`Right`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-20T16:07:58.583

对于每个应该翻转的框，您可以使用容器 UIView。将两侧添加到此容器中。

```
if (side1Visible) {
    UIViewAnimationOptions options = UIViewAnimationOptionBeginFromCurrentState |     
    UIViewAnimationTransitionFlipFromRight;  

    [UIView transitionWithView:containerView  
                  duration:1.0  
                   options:options  
                animations:^{ side1.hidden = YES; side2.hidden = NO; }  
                completion:NULL];  
} else {
    UIViewAnimationOptions options = UIViewAnimationOptionBeginFromCurrentState |     
    UIViewAnimationTransitionFlipFromLeft;  

    [UIView transitionWithView:containerView  
              duration:1.0  
               options:options  
            animations:^{ side1.hidden = NO; side2.hidden = YES; }  
            completion:NULL]; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-23T14:18:42.763

根据[Ilker Baltaci 的回答](https://stackoverflow.com/a/14426376/5472124)，这就是我最终得到的结果（在**Swift 3**中） ：

```
@IBAction func flipViews() {

    // declare variables for transition
    let duration = 0.5
    var animationOptions: UIViewAnimationOptions
    var animations: () -> Void
    var completion: ((Bool) -> Void)?

    if view2.isHidden {
        animationOptions = [.beginFromCurrentState, .transitionFlipFromTop]
        animations = {
            self.view2.isHidden = false
            self.view1.isHidden = true
        }
        completion = { success in
            if success {
                self.updateSomeContentOfView2()
            }
        }
    } else {
        animationOptions = [.beginFromCurrentState, .transitionFlipFromBottom]
        animations = {
            self.view2.isHidden = true
            self.view1.isHidden = false
        }
    }

    UIView.transition(with: containerView,
                      duration: duration,
                      options: animationOptions,
                      animations: animations,
                      completion: completion)
} 
```

我的视图层次结构`containerView`，`view1`& `view2`（都`IBOutlets`在我的自定义 ViewController 类中）如下：

*   `containerView`
    *   `view1`
    *   `view2`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-24T06:39:30.987

您可以使用 Swift 3.0 的以下代码执行此操作：

```
 UIView.animate(withDuration: 0.5, delay: 0.0, options: .curveEaseInOut, animations: { 
        self.view.transform = CGAffineTransform(scaleX: 1, y: -1)
    }, completion: nil) 
```

请记住，此操作将发生在您的主线程上，因此应用程序将在执行期间被阻止。

如果您需要完成处理程序，有几个选项可用于

# android - Android - 如何使用 Facebook 3.0 SDK 发布状态

> ID：14426234
> 
> 赞同：0
> 
> 时间：2013-01-20T15:52:10.883
> 
> 标签：android, facebook, post, message

使用 Facebook SDK 示例，我可以使用 Facebook 登录，但现在我需要在墙上发布消息，我不明白该怎么做。这是我的代码 public class CondividiSuFacebookActivity extends Activity{

```
 public void onCreate(Bundle savedInstanceState) 
  {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.facebook_condividi);

      String msg = (String)getIntent().getStringExtra("message");

      // start Facebook Login
      Session.openActiveSession(this, true, new Session.StatusCallback() 
      {

          // callback when session changes state

          public void call(Session session, SessionState state, Exception exception) 
          {
                if (session.isOpened()) 
                {

                    // make request to the /me API
                    Request.executeMeRequestAsync(session, new Request.GraphUserCallback() 
                    {

                        // callback after Graph API response with user object
                        public void onCompleted(GraphUser user, Response response) 
                        {
                            if (user != null) 
                            {
                                TextView welcome = (TextView) findViewById(R.id.welcome);
                                welcome.setText("Hello " + user.getName() + "!");
                            }
                        }
                    });
                }
          }
    });
  }

  public void onActivityResult(int requestCode, int resultCode, Intent data) {
      super.onActivityResult(requestCode, resultCode, data);
      Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
  }

 } 
```

我找到了这个功能：

```
 Request.newStatusUpdateRequest(session, "Hello!", new Request.Callback() {

public void onCompleted(Response response) {
        // TODO Auto-generated method stub

}
 }); 
```

但我不明白如何使用它。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:31:12.987

我建议你看看下面的 StackOverflow 问题。

[使用 sdk 3.0 在 facebook 墙上发帖](https://stackoverflow.com/questions/13290047/posting-on-facebook-wall-with-sdk-3-0)

请确保您阅读问题的答案以获得完整的解决方案。问题中的代码仍然可以帮助您。

# javascript - 为按钮创建的每个新行添加 i++

> ID：14426238
> 
> 赞同：0
> 
> 时间：2013-01-20T15:52:38.227
> 
> 标签：javascript, jquery

我尝试使用 PHP 和 Javascript 制作一些可重复的字段。这工作正常，但在保存帖子（为 WordPress 创建插件）后，克隆的行将覆盖最新的行。这是因为我没有为每一行使用唯一的 id。

我想用 javascript 添加一个 'id' 属性，并且我希望使用 id 1 增加创建的每一行。我已经用 PHP 做过类似的事情，但发现这不是我想要的，我认为我最好用 javascript，因为当我使用“添加新”按钮克隆字段时，数量不会增加+1;

这是我使用过的 php 代码：

```
$count = 2;
for ($i = 0; $i < $count; $i++) {

    // Begin a table row
    echo '<tr class="row" id="' . '['.$i.']' . '-repeatable">';
    echo '<td class="order">' . '['.$i.']' . '</td>';

            // Do cool stuff inside the row

    echo '<td class="remove"><a class="repeatable-remove button" href="#">-</a></td>';
    echo '</tr>'; // End .row

} // End for loop

<a href"#" class="button">Add new row</a> 
```

可重复字段的 JS 代码：

```
// Add repeatable row
jQuery('.repeatable-add').click(function() {
    // Clone row
    var row = jQuery(this).closest('.ui-sortable').find('tbody tr.row:last-child');
    var clone = row.clone();

    clone.find('input[type=text], text, textarea, select, input.upload_image').val(''); // Reset the values
    clone.find('.preview_image').attr('src', ''); // Reset the values

    row.after(clone);

    //
    return false;
}); 
```

我想我必须做这样的事情：

```
clone.find('tr.row').attr('id', 'repeatable-' + addInteger); 
```

但是如何在 Jquery/Javascript 中增加 +1，就像我在 PHP 中的示例一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:18:23.333

您要做的是查看您正在克隆的行的 ID，并使用该 ID 为新行提供正确的索引值。我在您的示例中添加了两行代码，一行定义了一个名为的新变量`clonedIdIndex`，另一行使用该变量中的值为克隆行定义了一个新 ID。

```
jQuery('.repeatable-add').click(function() {
    // Clone row
    var row = jQuery(this).closest('.ui-sortable').find('tbody tr.row:last-child'),
        clone = row.clone(),
        clonedIdIndex = parseInt( clone.find('tr.row').attr('id').split('-')[1], 10 );

    clone.find('input[type=text], text, textarea, select, input.upload_image').val('');    
    clone.find('.preview_image').attr('src', ''); // Reset the values

    // Assign new ID
    clone.find('tr.row').attr('id', 'repeatable-' + (++clonedIdIndex));

    row.after(clone);

    //
    return false;
}); 
```

# java - 自定义类加载器是否使代码对客户端不可见？

> ID：14426246
> 
> 赞同：-1
> 
> 时间：2013-01-20T15:53:30.597
> 
> 标签：java, classloader

我想要一个 html 页面中的 java 小程序，但源代码不可见，这可以通过自定义类加载器实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:04:16.223

您可以创建一个自定义 ClassLoader，从随机字节解码类。但是，这个 ClassLoader 本身就是一个类，需要以默认方式加载，以便 JVM 理解。并且用户可以对其进行反编译，从而有效地了解如何解码您的其他类。

在实践中所做的是使用混淆器。我们在公司使用 Proguard。

# java - '此方法必须返回 int 类型的结果' Java？

> ID：14426247
> 
> 赞同：0
> 
> 时间：2013-01-20T15:53:34.370
> 
> 标签：java, methods, return-value

```
public static void main(String args[])
{
    double arr[] = {1,-6.3,9000,67.009,1.1,0.0,-456,6,23,-451.88};

    ArrayList<Integer> List = new ArrayList<Integer>();

     List.add(1);
     List.add((int) -6.3);
     List.add(9000);
     List.add((int) 67.009);
     List.add((int)1.1);
     List.add((int)0.0);
     List.add(-456);
     List.add(6);
     List.add(23);
     List.add((int)451.88);
}

public static int ArrayListMax(ArrayList List)
{

    for (int i=0; i<List.size(); ++i)
    {
        System.out.println(List.get(i));
    } 
```

错误在于：

```
 public static int ArrayListMax(ArrayList List) 
```

这可能是一个非常愚蠢的错误，但我是 Java 新手，所以请原谅我。

请问有什么帮助吗？

谢谢你。

编辑：

我想要 ArrayListMax 方法打印列表的大小！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:56:20.440

向您的方法添加一个返回 的`return`语句，或将方法签名从 更改为。并为该方法添加一个结束。`ArrayListMax()``int``public static int``public static void``}`

此外，您不应将`List`其用作该方法的参数名称，因为它是您在此代码中实际导入的接口的名称。Java 中的约定是变量名和方法名以小写字母开头（驼峰式），类名以大写字母开头（帕斯卡式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:01:42.617

`List`假设您试图在方法中获取最大值`arrayListMax`，您需要根据您的方法签名返回一个整数，错误告诉您

```
This method must return a result of type int 
```

您可以执行以下操作，而不是打印列表中的所有值：

```
public static int arrayListMax(List<Integer> List) {
   return Collections.max(list);
} 
```

* * *

使用[Java 命名约定](http://java.about.com/od/javasyntax/a/nameconventions.htm)。方法和变量名称以小写字母开头。使用这种方法有助于避免实例和类型之间的混淆（例如在方法中的情况下`List`）`main`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T15:56:11.873

问题在于这种方法：

```
public static int ArrayListMax(ArrayList List)
{

    for (int i=0; i<List.size(); ++i)
    {
       System.out.println(List.get(i));
    }
} 
```

您不是从此方法返回，您必须返回 int 类型来解决该错误。由于您已将 int 指定为返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T15:56:11.937

您将函数创建为返回结果

```
public static int ArrayListMax(ArrayList List) 
```

为了消除你的问题，如果你不需要返回任何东西，写

```
public static void ArrayListMax(ArrayList List) 
```

`void`表示您不希望该方法返回结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T15:57:24.347

如果您只是打印出值，则签名应该是 public static void ArrayListMax(ArrayList List)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T16:15:54.440

**首先**`ArrayListMax`，即使您已将其 retun 类型设置为，您也不会使用方法返回任何内容`int`。`void`在您直接从列表中打印时返回。

**其次，**即使您为方法设置了正确的返回类型`ArrayListMax`，您仍然需要在方法中调用该方法`main`，如下所示：

```
public static void main(String args[])
{
    double arr[] = {1,-6.3,9000,67.009,1.1,0.0,-456,6,23,-451.88};

    ArrayList<Integer> List = new ArrayList<Integer>();

     List.add(1);
     List.add((int) -6.3);
     List.add(9000);
     List.add((int) 67.009);
     List.add((int)1.1);
     List.add((int)0.0);
     List.add(-456);
     List.add(6);
     List.add(23);
     List.add((int)451.88);
     YourClassNameInWhichMethodIs.ArrayListMax(List);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-20T16:20:28.367

您应该使用 return 语句，因为 Methode 返回一个 int 类型值。

# jquery-mobile - jquery mobile scrollview在ios 4.3上不起作用

> ID：14426252
> 
> 赞同：2
> 
> 时间：2013-01-20T15:53:47.493
> 
> 标签：jquery-mobile, jquery-plugins

我正在使用“jquery.mobile.scrollview.min.js”使我的 div 可滚动。我的应用程序在任何版本大于 5 的 IOS 上运行良好，当我尝试在 IOS 版本 4.3 上运行它时，滚动区域的行为很奇怪。

我的 Div 如下

```
<div id="BranchesScrollDiv" class="ui-listview">

        <table class='MrPfixedcolumn' width="100%" style="border-spacing: 0; font-family: Arial;
            color: #000; font-weight: bold; font-size: small">
            <wc id="wcMrPTableContainer" runat="server"> 
                <tr id='MrPcolumn1row1' class="#CssClass#">
                    <td class='MrProw1' align='left'  onclick="BLBranchID=#BranchID#; BLBranchENname=#BranchENname#;BLBranchARName=#BranchARName#;BLCity=#City#;BLArea=#Area#;BLLong=#Long#;BLLati=#Lati#;BLTele=#Tele#;BLEmail=#Email#;BLFax=#Fax#;BLWorkH=#WorkH#; HandleBranchesListRowClicked();" style="width:50%;height:30px;border-right:1px solid #fff;">
                        <span id='MrPcolumn1row1span' >#BranchValue#</span>
                    </td>
                    <td class='MrProw1' align="left"  onclick="BLBranchID=#BranchID#; BLBranchENname=#BranchENname#;BLBranchARName=#BranchARName#;BLCity=#City#;BLArea=#Area#;BLLong=#Long#;BLLati=#Lati#;BLTele=#Tele#;BLEmail=#Email#;BLFax=#Fax#;BLWorkH=#WorkH#; HandleBranchesListRowClicked();" style="width:25%;height:30px;border-right:1px solid #fff;">
                        <span id='Span1' >#CityValue#</span>
                    </td>
                    <td class='MrProw1' align="left" onclick="BLBranchID=#BranchID#; BLBranchENname=#BranchENname#;BLBranchARName=#BranchARName#;BLCity=#City#;BLArea=#Area#;BLLong=#Long#;BLLati=#Lati#;BLTele=#Tele#;BLEmail=#Email#;BLFax=#Fax#;BLWorkH=#WorkH#; HandleBranchesListRowClicked();" style="width:25%;height:30px;">
                        <span id='Span2' >#AreaValue#</span>
                    </td>
                </tr>
            </wc>
        </table>
    </div> 
```

我在准备好的文档中应用了滚动，如下所示

```
$("#BranchesScrollDiv").scrollview({ direction: 'y' });
$("#BranchesScrollDiv > .ui-scrollbar").addClass("ui-scrollbar-visible"); 
```

任何人都可以告诉我我能做些什么来解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:37:45.537

```
$("#BranchesScrollDiv").scrollview({ scrollMethod: 'translate', direction: 'y' }); 
```

代替

```
$("#BranchesScrollDiv").scrollview({ direction: 'y' }); 
```

我希望帮助其他人回答这个问题

# php - mysql关键字搜索得到带有搜索结果的四舍五入的邻居字符串

> ID：14426255
> 
> 赞同：0
> 
> 时间：2013-01-20T15:54:03.650
> 
> 标签：php, mysql, mysqli

我正在使用`PHP`, `MySQL`,`Ajax`关键字搜索。条件是 MySQL 表中只有两个字段。

```
1 -> id
2 -> description 
```

Que : 如果我在描述中得到搜索结果。那我怎么能用圆角邻居字符串显示搜索到的关键字。因为描述字段可能有很多长字符串。所以不可能在列表中显示它。

表示如果描述表中有**Hello how are you ？有很多字符串的长篇故事......等等** ，用户搜索**很长，**然后描述的结果显示在建议列表中，但它应该只显示**你吗？长篇大论**。

表示不使用相邻的圆形字符串。

我应该在查询中使用 MySQL 的什么函数来获取邻居舍入字符串。

# python - 程序如何在 python 中的两个函数之间进行选择？

> ID：14426261
> 
> 赞同：4
> 
> 时间：2013-01-20T15:55:16.800
> 
> 标签：python, function, python-3.x

我有一个 Python 3.2 程序，可以计算未来任意时间段的投资价值，它可能适用于单利和复利。问题是我定义了两个函数，“main()”和“main2()”，第一个是简单的，第二个是复利的。现在我想做的是，给定用户的一些输入，程序在运行 main() 或 main2() 之间进行选择。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T15:58:27.257

首先，给你的函数起更好的名字。然后使用映射：

```
def calculate_compound(arg1, arg2):
    # calculate compound interest

def calculate_simple(arg1, arg2):
    # calculate simple interest

functions = {
    'compound': calculate_compound,
    'simple':   calculate_simple
}

interest = functions[userchoice](inputvalue1, inputvalue2) 
```

因为 Python 函数是一等公民，所以您可以将它们存储在 Python 字典中，使用键查找它们，然后调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:14:55.513

您可以将解决方案用作 Martijn 的海报，但您也可以使用`if/else`Python 构造来调用您的`simple`或`compound`计算例程

考虑到 Compound Interest 例程应该采用额外的参数`n`，即感兴趣的频率计算，因此您可以根据参数长度切换函数调用。

此外，您的驱动程序例程应该接受可变参数以接受两种函数的参数

```
>>> def calc(*args):
    if len(args) == 3:
        return calc_simple(*args)
    elif len(args) == 4:
        return calc_compund(*args)
    else:
        raise TypeError("calc takes 3 or 4 arguments ({} given)".format(len(args)))

>>> def calc_compund(*args):
    P, r, n, t = args
    print "calc_compund"    
    #Your Calc Goes here

>>> def calc_simple(*args):
    P, r, t = args
    print "calc_simple"
    #Your Calc Goes here

>>> calc(100,10,2,5)
calc_compund
>>> calc(100,10,5)
calc_simple
>>> calc(100,10)

Traceback (most recent call last):
  File "<pyshell#108>", line 1, in <module>
    calc(100,10)
  File "<pyshell#101>", line 7, in calc
    raise TypeError("calc takes 3 or 4 arguments ({} given)".format(len(args)))
TypeError: calc takes 3 or 4 arguments (2 given)
>>> 
```

# android - Android 将布局与列表视图集成

> ID：14426271
> 
> 赞同：1
> 
> 时间：2013-01-20T15:56:35.117
> 
> 标签：android, android-layout

我有一个包含两个部分的布局，第一部分（无滚动）用于字母，第二部分（带滚动）用于对象，如何在第二部分放置列表视图？我做`setcontentfiew(R.layout.menu)`了`oncreate()`吗？这是活动

```
public class FoodsMenu extends ListActivity {

    String foods[];

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, foods));
    }

} 
```

这是布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <ScrollView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:fillViewport="true" >
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#000000"
            android:orientation="vertical" >
        </LinearLayout>
    </ScrollView>
    <LinearLayout
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ffffff"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/tvA"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="A" />
        <TextView
            android:id="@+id/tvB"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="B" />
        <TextView
            android:id="@+id/tvC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="C" />
        <TextView
            android:id="@+id/tvD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="D" /> 
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:03:09.543

以下 xml 将创建一个具有两个水平部分的布局。第一部分将有一个带有 5 个 TextView 且没有滚动的垂直 LinearLayout，而第二部分将有一个 ListView 来保存对象。

还要注意 ListView 有它自己的 Scroller，所以你不需要自己添加一个。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >
    <LinearLayout
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:background="#ffffff"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/tvA"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="A" />
        <TextView
            android:id="@+id/tvB"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="B" />
        <TextView
            android:id="@+id/tvC"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="C" />
        <TextView
            android:id="@+id/tvD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="13dp"
            android:layout_gravity="center"
            android:textColor="#025f7c"
            android:text="D" /> 
    </LinearLayout>
    <ListView
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            ...... // other ListView attributes
          >
    </ListView>

</LinearLayout> 
```

# java - java websphere MQ

> ID：14426272
> 
> 赞同：5
> 
> 时间：2013-01-20T15:56:39.107
> 
> 标签：java, jakarta-ee, ibm-mq

我的目标是使用 WebSphere MQ Java 编程将 n 条消息放在一个 for 循环中的 WebSphere MQ 队列中。

我的 java 程序将作为独立程序运行。

如果两者之间有任何异常，我需要回滚所有消息。

如果没有例外，那么我应该提交所有消息。

在我完全完成之前，外界不应该看到我在队列中的消息。我如何实现这一目标？

***根据 T.Rob 的回复更新了示例代码：***

请检查示例代码是否正常？

设置 MQGMO_SYNCPOINT 是否仅与我的程序调用有关？（因为并行运行的类似程序也会将消息放在同一个队列中，并且这些消息不应该受到我程序的 SYNCPOINT 的影响。）

```
public void sendMsg() {
        MQQueue queue = null;
        MQQueueManager queueManager = null;
        MQMessage mqMessage = null;
        MQPutMessageOptions pmo = null;
        System.out.println("Entering..");
        try {
            MQEnvironment.hostname = "x.x.x.x";
            MQEnvironment.channel = "xxx.SVRCONN";
            MQEnvironment.port = 9999;

            queueManager = new MQQueueManager("XXXQMANAGER");
            int openOptions = MQConstants.MQOO_OUTPUT;      
            queue = queueManager.accessQueue("XXX_QUEUENAME", openOptions, null, null, null);

            pmo = new MQPutMessageOptions(); 
            pmo.options = CMQC.MQGMO_SYNCPOINT;

            String input = "testing";
            System.out.println("sending messages....");
            for (int i = 0; i < 10; i++) {
                input = input + ": " + i;
                mqMessage = new MQMessage();
                mqMessage.writeString(input);
                System.out.println("Putting message: " + i);
                queue.put(mqMessage, pmo);

            }
            queueManager.commit();
            System.out.println("Exiting..");

        } catch (Exception e) {
            e.printStackTrace();
            try {
                System.out.println("rolling back messages");
                if (queueManager != null)
                    queueManager.backout();
            } catch (MQException e1) {
                e1.printStackTrace();
            }
        } finally {
            try {
                if (queue != null)
                    queue.close();
                if (queueManager != null)
                    queueManager.close();
            } catch (MQException e) {
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T21:59:48.110

WMQ 支持本地和全局 (XA) 工作单元。只需指定选项即可使用本地工作单元。正如 keithkreissl 在另一个答案中提到的那样，全局 XA 事务需要事务管理器。

对于您所描述的，一个 POJO 在同步点下进行消息传递，[`MQC.MQGMO_SYNCPOINT`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQC.html#MQGMO_SYNCPOINT)请在您的[`MQGetMessageOptions`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQGetMessageOptions.html). 当您准备好提交时，发出[`MQQManager.commit()`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQQueueManager.html#commit%28%29)or[`MQQManager.backout()`](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.javadoc.doc/WMQJavaClasses/com/ibm/mq/MQQueueManager.html#backout%28%29)调用。

请注意，ggrandes 提供的响应和文档是指 JMS 而不是 Java 类。Java 类使用 WMQ 过程 API 的 Java 等效项，可以支持许多线程 ( [doc](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/ja11160_.htm) )，甚至提供连接池 ( [doc](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/ja11210_.htm) )。请参阅 Java 文档而不是 JMS 文档以了解正确的行为。此外，我已链接到最新的[WMQ Java V7.5 客户端](http://ibm.co/SupptPacMQC75)附带的 WMQ V7.5 文档。后面的客户端有更多的本地功能（跟踪、灵活的安装路径、MQClient.ini 等）并与后级 QMgrs 一起使用。强烈建议使用最新的客户端，并且免费下载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T17:10:30.017

您只需要创建一个启用事务的会话。

```
Session session;
// ...
boolean transacted = true;
session = connection.createSession(transacted, Session.AUTO_ACKNOWLEDGE);
try {
    // ...do things...
    session.commit();
} catch (Exception e) {
    session.rollback();
}
// ... 
```

警告注意：会话不是线程安全的 ;-)

*   文档[Websphere MQ/JMS](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzaw.doc/jm41210_.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:42:29.470

如果您有权访问事务管理器，更重要的是连接到您的 MQ 访问的 XATransaction，您可以在消息处理开始时启动事务，将所有消息放在队列中，然后提交事务。使用 XATransactions 在事务提交之前它不会放置任何消息。如果您无权访问它，您可以通过将消息放在本地数据对象中进行更多检查，如果没有异常遍历发送消息的本地数据对象，则将代码包装在 try/catch 中。后一种方法的问题是它将提交您的所有其他处理，但如果在发送消息时出现问题，您的其他处理将不会回滚。

# c#-4.0 - 反序列化包含 xsi:type 属性的文档时遇到问题

> ID：14426276
> 
> 赞同：0
> 
> 时间：2013-01-20T15:57:16.247
> 
> 标签：c#-4.0, xml-parsing, xsd, xsitype

解析 XML 文件时出现错误`serializer.Deserialize(reader)`： `Namespace prefix \"java\" not defined`

我的 XML [http://www.virtualdtm.ru/files/serverReplays/rFactorHotlapsData.xml](http://www.virtualdtm.ru/files/serverReplays/rFactorHotlapsData.xml)

我的代码

```
var serializer = new XmlSerializer(typeof(rootDB));
var reader = new XmlTextReader(Server.MapPath(Url.Content("~/Content/xml/rFactorHotlapsData.xml")));
var rFactorHotLapsData = (rootDB)serializer.Deserialize(reader); 
```

我的课

```
//------------------------------------------------------------------------------
// <auto-generated>
//     Этот код создан программой.
//     Исполняемая версия:4.0.30319.17929
//
//     Изменения в этом файле могут привести к неправильной работе и будут потеряны в случае
//     повторной генерации кода.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;
namespace net.vmso.cpanel.Models.rFactorHotLaps
{
}

// 
// Этот исходный код был создан с помощью xsd, версия=4.0.30319.17929.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)]
public partial class rootDB {

    private rootDBListOfCategory[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("listOfCategory", Form=System.Xml.Schema.XmlSchemaForm.Qualified)]
    public rootDBListOfCategory[] Items {
        get {
            return this.itemsField;
        }
        set {
            this.itemsField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class rootDBListOfCategory {

    private string categoryNameField;

    private rootDBListOfCategoryListOfTrack[] listOfTrackField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string categoryName {
        get {
            return this.categoryNameField;
        }
        set {
            this.categoryNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("listOfTrack", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public rootDBListOfCategoryListOfTrack[] listOfTrack {
        get {
            return this.listOfTrackField;
        }
        set {
            this.listOfTrackField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class rootDBListOfCategoryListOfTrack {

    private string trackNameField;

    private rootDBListOfCategoryListOfTrackSlowestLapRecord[] slowestLapRecordField;

    private rootDBListOfCategoryListOfTrackListOfLapRecord[] listOfLapRecordField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string trackName {
        get {
            return this.trackNameField;
        }
        set {
            this.trackNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("slowestLapRecord", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public rootDBListOfCategoryListOfTrackSlowestLapRecord[] slowestLapRecord {
        get {
            return this.slowestLapRecordField;
        }
        set {
            this.slowestLapRecordField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("listOfLapRecord", Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public rootDBListOfCategoryListOfTrackListOfLapRecord[] listOfLapRecord {
        get {
            return this.listOfLapRecordField;
        }
        set {
            this.listOfLapRecordField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
public partial class rootDBListOfCategoryListOfTrackSlowestLapRecord {

    private string driverNameField;

    private string sessionNameField;

    private string dateField;

    private string vehicleModNameField;

    private string vehicleNameField;

    private string vehicleCategoryField;

    private string lapTimeField;

    private string lastLapTimeField;

    private string rankField;

    private string sessionIdField;

    private string lapCountField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string driverName {
        get {
            return this.driverNameField;
        }
        set {
            this.driverNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string sessionName {
        get {
            return this.sessionNameField;
        }
        set {
            this.sessionNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string date {
        get {
            return this.dateField;
        }
        set {
            this.dateField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string vehicleModName {
        get {
            return this.vehicleModNameField;
        }
        set {
            this.vehicleModNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string vehicleName {
        get {
            return this.vehicleNameField;
        }
        set {
            this.vehicleNameField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string vehicleCategory {
        get {
            return this.vehicleCategoryField;
        }
        set {
            this.vehicleCategoryField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string lapTime {
        get {
            return this.lapTimeField;
        }
        set {
            this.lapTimeField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string lastLapTime {
        get {
            return this.lastLapTimeField;
        }
        set {
            this.lastLapTimeField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string rank {
        get {
            return this.rankField;
        }
        set {
            this.rankField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string sessionId {
        get {
            return this.sessionIdField;
        }
        set {
            this.sessionIdField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute()]
    public string lapCount {
        get {
            return this.lapCountField;
        }
        set {
            this.lapCountField = value;
        }
    }
}

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
    public partial class rootDBListOfCategoryListOfTrackListOfLapRecord {

        private string driverNameField;

        private string sessionNameField;

        private string dateField;

        private string vehicleModNameField;

        private string vehicleNameField;

        private string vehicleCategoryField;

        private string lapTimeField;

        private string lastLapTimeField;

        private string rankField;

        private string sessionIdField;

        private string lapCountField;

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string driverName {
            get {
                return this.driverNameField;
            }
            set {
                this.driverNameField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string sessionName {
            get {
                return this.sessionNameField;
            }
            set {
                this.sessionNameField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string date {
            get {
                return this.dateField;
            }
            set {
                this.dateField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string vehicleModName {
            get {
                return this.vehicleModNameField;
            }
            set {
                this.vehicleModNameField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string vehicleName {
            get {
                return this.vehicleNameField;
            }
            set {
                this.vehicleNameField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlElementAttribute(Form=System.Xml.Schema.XmlSchemaForm.Unqualified)]
        public string vehicleCategory {
            get {
                return this.vehicleCategoryField;
            }
            set {
                this.vehicleCategoryField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string lapTime {
            get {
                return this.lapTimeField;
            }
            set {
                this.lapTimeField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string lastLapTime {
            get {
                return this.lastLapTimeField;
            }
            set {
                this.lastLapTimeField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string rank {
            get {
                return this.rankField;
            }
            set {
                this.rankField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string sessionId {
            get {
                return this.sessionIdField;
            }
            set {
                this.sessionIdField = value;
            }
        }

        /// <remarks/>
        [System.Xml.Serialization.XmlAttributeAttribute()]
        public string lapCount {
            get {
                return this.lapCountField;
            }
            set {
                this.lapCountField = value;
            }
        }
    } 
```

[1]：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:23:43.937

未定义 java 命名空间前缀，但在 .xml 文档的 xsi:type 属性中使用它。如果您将定义它的属性添加到文档的根目录，错误就会消失。

```
<rootDB xmlns:java="http://tempuri3.org"> 
```

正如我们后来发现的那样，除此之外，xsi:type 正在搞乱类的生成。很糟糕。

**使用 XmlSerializer**

```
<listOfTrack xsi:type="java:com.prorfactor.top100.database.Track"> 
```

元素的名称是`listOfTrack`, 在默认命名空间中。然而，它的类型`com.prorfactor.top100.database.Track`在 java 前缀所指的命名空间中。发生这种情况是因为`xsi:type`属性改变了它。xsd.exe 可以解决这个问题，但它需要一点帮助。

我让它工作的方式是创建两个`.xsd`s. 一个用于 java 命名空间，另一个用于文档的命名空间。他们相互导入。作为一个例子，我将展示描述文档开头的部分，其中名称和类型跳来跳去很多。

```
<rootDB xmlns="http://tempuri2.org"
        xmlns:java="http://tempuri3.org">
  <listOfCategory xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:type="java:com.prorfactor.top100.database.Category">
    <listOfTrack xsi:type="java:com.prorfactor.top100.database.Track"> 
```

对于我称为的默认命名空间，`http://tempuri2.org`模式必须列出元素的名称，因为它们位于默认命名空间中：

```
 <xs:element name="rootDB" >
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element ref="listOfCategory" />
      </xs:choice>
    </xs:complexType>
  </xs:element>

  <xs:element name="listOfCategory"
              type="java:com.prorfactor.top100.database.Category">
  </xs:element>

  <xs:element name="listOfTrack"
              type="java:com.prorfactor.top100.database.Track">
  </xs:element> 
```

我称之为 java 命名空间的架构`http://tempuri3.org`列出了使用 xsi:type 分配给元素的复杂类型：

```
 <xs:complexType name="com.prorfactor.top100.database.Category"
        xmlns:orig="http://tempuri2.org">
    <xs:sequence>
      <xs:element ref="orig:listOfTrack" minOccurs="0" maxOccurs="unbounded" />
      <xs:element ref="orig:categoryName"/>
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="com.prorfactor.top100.database.Track"
        xmlns:orig="http://tempuri2.org">
    <xs:sequence>
      <xs:element ref="orig:slowestLapRecord" />
      <xs:element ref="orig:listOfLapRecord" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element ref="orig:trackName"/>
    </xs:sequence>
  </xs:complexType> 
```

我编译了这两个`.xsd`，生成的类设法反序列化 .xml 文件。

如果我手动添加 java 命名空间，并为 .xml 文件指定默认命名空间

所以，老实说，我认为你最好使用 LINQ to XML：

**使用 LINQ to XML**

```
XDocument xElement = XDocument.Load(Server.MapPath(Url.Content("~/Content/xml/rFactorHotlapsData.xml")));

// just some selects to show how you select them
var cats = from cat in xElement.Descendants("listOfCategory")
           select new
           {
              Name = cat.Descendants("categoryName").FirstOrDefault().Value,
              Track = from track in cat.Descendants("listOfTrack")
                      select new 
                      {
                         Name = track.Descendants("trackName").FirstOrDefault().Value,
                         LapRecord = from record in cat.Descendants("listOfLapRecord")
                                     select new
                                     {
                                        driverName = record.Descendants("driverName").FirstOrDefault().Value,
                                        sessionName = record.Descendants("sessionName").FirstOrDefault().Value,
                                        date = record.Descendants("date").FirstOrDefault().Value
                                     }
                       }
           };

// And a demo of how to iterate over the result of the select
foreach (var category in cats)
{
   Console.WriteLine(category.Name);
   foreach (var track in category.Track)
   {
      Console.WriteLine("  " + track.Name);
      foreach (var lapRecord in track.LapRecord)
      {
         Console.WriteLine("      " + lapRecord.driverName);
         Console.WriteLine("      " + lapRecord.sessionName);
         Console.WriteLine("      " + lapRecord.date);
      }
   }
} 
```

# c# - 简单的对象和数组是如何传递的？

> ID：14426279
> 
> 赞同：1
> 
> 时间：2013-01-20T15:57:29.893
> 
> 标签：c#, javascript, .net, silverlight, marshalling

我对负责将简单 Javascript 对象和数组转换为“托管类型”（为简洁起见，C#）对象的转换机制有点困惑。

[Microsoft 文章](http://msdn.microsoft.com/en-us/library/cc645079%28v=vs.95%29.aspx)的第一部分关于此状态（或似乎暗示）转换是隐式和自动的：

> *   JavaScript 数组被转换为 object[]。
> *   JavaScript 字典被转换为 Dictionary。

但是，后续部分似乎提到了转换的帮助器`create`和`createObject`函数的必要性：

数组：

> **数组和列表类型**
> 
> 默认值是从 JavaScript 到托管代码的**显式按值封送处理。**不支持对托管输入参数的自动 JSON 序列化。相反，您必须显式使用可创建类型或创建辅助方法。
> 
> ```
>  ...
>  ... 
> ```
> 
> **按值编组**
> 
> 如果要按值将 JavaScript 数组传递给托管代码，则目标 .NET Framework 属性或输入参数的类型必须不是 ScriptObject。然后，您必须使用**create** 或**createObject**帮助器方法之一显式强制将 JavaScript 数组转换为 .NET Framework 列表或数组类型。

（“字典和自定义类型”有一对几乎相同的子句）

是否有我遗漏的东西，或者文档是否矛盾？简单对象和数组的转换是否是隐式和自动的？如果是这样，后面的条款适用于哪些对象？如果不是，为什么在隐式转换的原始 Javascript 类型中提到它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:39:01.667

1) 答案在文章中。你没有引用的一段。

> JavaScript 字典将按值递归封送到目标 .NET Framework 类型。Silverlight 将使用 JSON 序列化程序将 JavaScript 字典反序列化为符合标准的 .NET Framework 自定义类型或字典。

2）因为自定义类型可能在已知类型中。如果您是这样的异端，.net 确保您可以随意绕过转换。我说异端，好像是这样，为什么首先使用json？=)

就让它滑吧。。

# web-services - 在不同的专用 Web 服务器上拆分 Web 服务

> ID：14426291
> 
> 赞同：0
> 
> 时间：2013-01-20T15:59:10.757
> 
> 标签：web-services, iis, networking

我目前在单个服务器上有许多 Web 服务。将来，我们希望将负载从单个服务器上转移到其他服务器上。

我熟悉横向扩展的概念，但在我们的案例中，我希望在不同的 Web 服务器上拥有不同的 Web 服务，以便可以将流量路由到正确的 Web 服务。因此，执行更密集工作的 Web 服务可以专用于特定服务器。

我该怎么做？

我是否需要更改我的客户端应用程序以便在正确的 Web 服务器上调用正确的 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:58:37.710

我认为在这里使用的正确模式是拥有一台带有调度程序的服务器，该调度程序只会将请求转发到适当的后端服务。然后，如果您决定将一个后端服务移动到另一台服务器，那么您可以在调度程序中进行配置更改。

我确信您可以通过编程方式完成，但我确信软件或硬件（如 F5）负载均衡器有能力对其进行配置。

# python - scrapy爬虫出错

> ID：14426294
> 
> 赞同：1
> 
> 时间：2013-01-20T15:59:30.050
> 
> 标签：python, scrapy

这是错误消息：

```
2013-01-20 22:45:02+0700 [scrapy] INFO: Scrapy 0.16.3 started (bot: scrapybot)

2013-01-20 22:45:02+0700 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, SpiderState

2013-01-20 22:45:02+0700 [scrapy] DEBUG: Enabled downloader middlewares: HttpAuthMiddleware, DownloadTimeoutMiddleware, UserAgentMiddleware, RetryMiddleware, DefaultHeadersMiddleware, RedirectMiddleware, CookiesMiddleware, HttpCompressionMiddleware, ChunkedTransferMiddleware, DownloaderStats

2013-01-20 22:45:02+0700 [scrapy] DEBUG: Enabled spider middlewares: HttpErrorMiddleware, OffsiteMiddleware, RefererMiddleware, UrlLengthMiddleware, DepthMiddleware

2013-01-20 22:45:02+0700 [scrapy] DEBUG: Enabled item pipelines: 

2013-01-20 22:45:02+0700 [test] INFO: Spider opened

2013-01-20 22:45:02+0700 [test] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)

2013-01-20 22:45:02+0700 [scrapy] DEBUG: Telnet console listening on 0.0.0.0:6023

2013-01-20 22:45:02+0700 [scrapy] DEBUG: Web service listening on 0.0.0.0:6080

2013-01-20 22:45:07+0700 [test] DEBUG: Crawled (200) <GET https://api.instagram.com/v1/tags/finnishgirl/media/recent?client_id=b59fbe4563944b6c88cced13495c0f49&callback=jQuery15208793520946055651_1358691536717&_=1358691537498> (referer: None)

2013-01-20 22:45:07+0700 [scrapy] INFO: 18

2013-01-20 22:45:07+0700 [scrapy] INFO: 18

2013-01-20 22:45:21+0700 [test] DEBUG: Crawled (200) <GET https://api.instagram.com/v1/tags/finnishgirl/media/recent?callback=jQuery15208793520946055651_1358691536717&_=1358691537498&client_id=b59fbe4563944b6c88cced13495c0f49&max_tag_id=1358724742769> (referer: https://api.instagram.com/v1/tags/finnishgirl/media/recent?client_id=b59fbe4563944b6c88cced13495c0f49&callback=jQuery15208793520946055651_1358691536717&_=1358691537498)

2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [scrapy] INFO: 18
2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] ERROR: 2013-01-20 22:45:21+0700 [-] E...... 
```

我不知道有关此类错误的任何信息

这是我的代码。

```
from scrapy.contrib.spiders import CrawlSpider
from scrapy.http import Request
from scrapy import log
import json
import re

class Spider(CrawlSpider):
    name = "test"
    count = 0

    def start_requests(self):
        return [Request('https://api.instagram.com/v1/tags/finnishgirl/media/recent?client_id=b59fbe4563944b6c88cced13495c0f49&callback=jQuery15208793520946055651_1358691536717&_=1358691537498', callback=self.parse_basic)]

    def parse_basic(self, response):
        if self.count == 2:
            return
        self.count = self.count + 1
        log.start()
        body = response.body
        body = re.sub (r'jQuery[0-9_]+\(', '', body)
        body = body[:len(body) - 1]
        body = json.loads(body)
        next_url = body['pagination']['next_url']
        count = len(body['data'])
        log.msg(str(count), level=log.INFO)
        f = open('test.'+str(self.count), 'w')
        f.write(next_url)
        f.close
        return [Request(next_url, callback=self.parse_basic)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T04:16:52.060

我发现了我的错误这是因为 parse_basic 方法中的 log.start()，return 语句中产生的请求被发送回 parse 方法，然后再次启动 log.start() => this make错误发生

# ruby-on-rails - 无法理解一段 Rails 代码的原因

> ID：14426296
> 
> 赞同：1
> 
> 时间：2013-01-20T15:59:36.510
> 
> 标签：ruby-on-rails

在生成的 application.html.erb 的默认布局中，这本书添加了这行代码，因为 rails 一次加载所有样式表，我们需要一个约定来将特定于控制器的规则限制在与该控制器关联的页面中。使用 controller_name 作为类名是一种简单的方法。他们添加了以下代码：

```
<body class = '<%= controller.controller_name %>' > 
```

但我还是不明白它在做什么？有人可以解释一下吗？实际上，这是否是常见且推荐的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:04:52.697

这基本上`class`是将主体的设置为当前控制器名称。因此，如果您有一个在多个控制器之间共享的布局，则根据当前活动的控制器，您将拥有不同的 body 类。这使您可以根据控制器确定 CSS 的范围。例如在 SCSS 中：

```
body.auth {
    background-color: red;
    .row {
        font-size: 12pt;
    }
}

body.post {
    background-color: green;
    .row {
        font-size: 10pt;
    }
} 
```

这样，当您进行任何`AuthController`操作时，您网站的背景颜色将为`red`. 当在时`PostController`，它会是`green`。请注意，`row`类名在两者之间是通用的，但是因为您的范围仅限于控制器，所以它们不会在浏览器中竞争。

您可以通过这种方式确定所有 CSS 样式的范围，并且几乎可以为您的 CSS 样式提供一个命名空间，以防不同控制器之间的类名冲突。由于你的 CSS 都是从资产管道连接在一起的，如果你有竞争的类名，这很容易导致渲染问题。这有助于缓解这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:05:43.127

这是一种基于控制器确定 CSS 范围的方法。

假设您有 2 个模型：`Car`和`Brand`，并且您希望顶部菜单在显示所有汽车的页面上显示为绿色，在显示品牌的页面上显示为红色。

在列出所有汽车的页面（汽车#index）上，车身看起来像这样：

```
<body class="cars"> 
```

在列出所有品牌 (brands#index) 的页面上，正文如下所示：

```
<body class="brands"> 
```

所以你可以像下面这样写你的css：

```
.cars .menu {
    background: green;
}

.brands .menu {
    background: red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:06:51.407

它向主体添加了一个与控制器名称同名的 CSS 类。这在通过 CSS 定位特定控制器以为该控制器上的所有操作添加自定义样式时很有用。因此，假设您的管理部分有一个 AdminController，并且您希望页面背景不同，这样您就知道您在管理部分而不是其他用户将看到的部分。

```
body.admin {
  background-color: gray;
} 
```

我见过的完成类似操作的另一个约定是使用当前控制器的名称加载 CSS 文件：

[http://shaunchapman.me/post/446260774/rails-tip-automatically-link-a-controllers-stylesheet](http://shaunchapman.me/post/446260774/rails-tip-automatically-link-a-controllers-stylesheet)

只要您了解发生了什么，我认为这两种方式都可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T16:24:13.303

最好将 action_name 添加到 body 类

```
<body class='<%= "#{controller_name} #{action_name} %>' 
```

You may scope not only CSS but also Javascript to controller or action. (becauses .js files as well as .css are merged together by assets pipeline)

CoffeeScript example:

```
$(document).ready ->
  if $('body').hasClass('cars')
    //..code for cars only controller 
```

SASS example:

```
.cars {
  .menu { background-color:blue; } # cars controller specific css
  &.new {
    .menu { background-color:red; } # cars' action new specific css
  }
} 
```

# android - SQLite 更新 Blob 错误

> ID：14426300
> 
> 赞同：0
> 
> 时间：2013-01-20T15:59:52.577
> 
> 标签：android, sqlite, hashmap, blob

我正在尝试将位图存储为 BLOB 和一些字符串在同一个 SQLdatase 中。

**这是我的数据库：**

// 更新单个联系人

```
public int update(String name, String email, String uid, String tel, String niver, String created_at, byte[] thumb) {
    SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, name); // Name
    values.put(KEY_EMAIL, email); // Email
    values.put(KEY_UID, uid); // Email
    values.put(KEY_TEL, tel); // Telefone
    values.put(KEY_NIVER, niver); // Niver
    values.put(KEY_CREATED_AT, created_at); // Created At
    values.put(KEY_THUMB, thumb); // thumb

    //db.close(); // I deleted this line

    // updating row
    return db.update(TABLE_LOGIN, values, KEY_THUMB + " = ?",
            new String[] { String.valueOf(getRowCount()) });
} 
```

我用它来用位图更新数据库；

```
 imagebutton.setImageBitmap(photo);
                    imagebutton.setScaleType(ScaleType.FIT_XY);
                    ByteArrayOutputStream stream = new ByteArrayOutputStream();
                    photo.compress(Bitmap.CompressFormat.JPEG, 100, stream);
                    byte[] imageInByte = stream.toByteArray();
                    db.update(null, null, null, null, null, null, imageInByte); 
```

**日志：**

```
01-21 15:47:47.445: E/AndroidRuntime(24673): FATAL EXCEPTION: main
01-21 15:47:47.445: E/AndroidRuntime(24673): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=65538, result=-1, data=Intent { act=inline-data (has extras) }} to activity {br.com.example.nightid/br.com.example.nightid.main.BaseSampleActivity}: java.lang.IllegalStateException: database not open
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2536)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.ActivityThread.access$2000(ActivityThread.java:117)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.os.Looper.loop(Looper.java:130)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at java.lang.reflect.Method.invokeNative(Native Method)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at java.lang.reflect.Method.invoke(Method.java:507)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at dalvik.system.NativeStart.main(Native Method)
01-21 15:47:47.445: E/AndroidRuntime(24673): Caused by: java.lang.IllegalStateException: database not open
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.database.sqlite.SQLiteDatabase.updateWithOnConflict(SQLiteDatabase.java:1712)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.database.sqlite.SQLiteDatabase.update(SQLiteDatabase.java:1666)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at com.example.androidhive.library.DatabaseHandler.update(DatabaseHandler.java:150)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at br.com.example.nightid.slidingmenu.SlidingFragment.onActivityResult(SlidingFragment.java:204)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.support.v4.app.FragmentActivity.onActivityResult(FragmentActivity.java:161)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.Activity.dispatchActivityResult(Activity.java:3919)
01-21 15:47:47.445: E/AndroidRuntime(24673):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
01-21 15:47:47.445: E/AndroidRuntime(24673):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:03:56.747

使用此代码，它现在可以工作：

```
 public int updateUser(byte[] thumb) {
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();
        values.put(KEY_THUMB, thumb); // thumb
        Log.w(TAG, String.valueOf(thumb));
        // updating row
        return db.update(TABLE_LOGIN, values, null,
                null );
    } 
```

new String[] { String.valueOf(getRowCount()) } 在 logcat 上给了我这个错误。

# html - 触摸屏设备是否支持 onmousedown 和 onmouseup？

> ID：14426303
> 
> 赞同：2
> 
> 时间：2013-01-20T16:00:18.790
> 
> 标签：html, mobile, touch

我只是想问一下部署时触摸屏移动设备是否支持 onmouseup 和 onmousedown 事件。

我在这里有这段代码：

```
<img src="images/plus.png" id="+" onclick=compare(this.id) onmousedown=changeplus() onmouseup=changeplus2() class=plus_button style="width:100px; height:100px;"> 
```

而且我不确定该设备是否会支持这些。

我无法测试它，因为我还没有设备。如果不是，是否有任何替代方案？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T21:17:24.207

您可以在 Chrome 浏览器中轻松模拟触摸事件。

1- 按 F12 查看开发工具 2- 单击右下角的“设置”图标 3- 转到设置面板中的“覆盖”部分 4- 激活复选框：“模拟触摸事件”

就这样！准备测试您的代码。

# twitter-bootstrap - 引导 2.2.2 内联帮助不在中间显示

> ID：14426310
> 
> 赞同：0
> 
> 时间：2013-01-20T16:01:10.713
> 
> 标签：twitter-bootstrap

什么是代码问题？请在[jsfiddle](http://jsfiddle.net/5S5CB/77/)中查看。
1\. 内联帮助不显示在中间。
2.当我滚动窗口时，内联帮助边距不正确。

[http://i.stack.imgur.com/8oCG5.jpg](http://i.stack.imgur.com/8oCG5.jpg)

```
 <form class="well  ">
        <div class="controls controls-row ">
            <input type="text" placeholder="Name" class="span5 ">
            <span class="help-inline">Please Enter Small Name.</span>
        </div>
        <div class="controls controls-row">
            <input type="text" placeholder=".span5" class="span5">
        </div>
        <div class="controls controls-row">
            <input type="text" placeholder=".span4" class="span4">
            <input type="text" placeholder=".span1" class="span1">
        </div>
        <div class="controls controls-row">
            <input type="text" placeholder=".span3" class="span3">
            <input type="text" placeholder=".span2" class="span2">
        </div>
        <div class="controls controls-row">
            <input type="text" placeholder=".span2" class="span2">
            <input type="text" placeholder=".span3" class="span3">
        </div>
        <div class="controls controls-row">
            <input type="text" placeholder=".span1" class="span1">
            <input type="text" placeholder=".span4" class="span4">
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:36:17.690

```
 <form class="well  ">
                    <div class="controls controls-row ">
                      <input type="text" placeholder=".spanName">
                      <span class="help-inline">Inline help text</span>
                    </div>
                    <div class="controls controls-row">
                        <input type="text" placeholder=".span5" class="span5">
                    </div>
                    <div class="controls controls-row">
                        <input type="text" placeholder=".span4" class="span4">
                        <input type="text" placeholder=".span1" class="span1">
                    </div>
                    <div class="controls controls-row">
                        <input type="text" placeholder=".span3" class="span3">
                        <input type="text" placeholder=".span2" class="span2">
                    </div>
                    <div class="controls controls-row">
                        <input type="text" placeholder=".span2" class="span2">
                        <input type="text" placeholder=".span3" class="span3">
                    </div>
                    <div class="controls controls-row">
                        <input type="text" placeholder=".span1" class="span1">
                        <input type="text" placeholder=".span4" class="span4">
                    </div>
                </form> 
```

您在输入中使用了一个类（class="span5" 太大而无法获得内联帮助，所以我建议您为内联帮助工作设置常规大小。我认为这就是您想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T02:24:41.323

该类仅在附加了类的表单和您的表单丢失的容器`.help-inline`的上下文中才能正常工作。您可以通过将块自己与一些负边距对齐或正确设置表单以使用该类以及适当的容器来克服这个问题。`.form-horizontal``.control-group``.help-inline``.form-horizontal``.control-group`

# java - 使用 RegEx 从坐标中提取数字

> ID：14426321
> 
> 赞同：-3
> 
> 时间：2013-01-20T16:02:38.703
> 
> 标签：java, regex, numbers

我是Java编程语言的初学者。

当我将 (1,2) 输入控制台（包括括号）时，如何编写代码以使用 RegEx 提取第一个和第二个数字？

如果没有这样的表达式来提取括号内的第一个/第二个数字，我将不得不将输入坐标的方式更改为不带括号的 x,y，这应该更容易提取要使用的数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:29:20.180

试试这个代码：

```
public static void main(String[] args) {
    String searchString = "(7,32)";
    Pattern compile1 = Pattern.compile("\\(\\d+,");
    Pattern compile2 = Pattern.compile(",\\d+\\)");
    Matcher matcher1 = compile1.matcher(searchString);
    Matcher matcher2 = compile2.matcher(searchString);
    while (matcher1.find() && matcher2.find()) {
        String group1 = matcher1.group();
        String group2 = matcher2.group();
        System.out.println("value 1: " + group1.substring(1, group1.length() - 1 ) + " value 2: " + group2.substring(1, group2.length() - 1 ));
    }
} 
```

并不是说我认为正则表达式在这里最好用。如果你知道输入的形式是：（数字，数字），我会先去掉括号：

```
stringWithoutBrackets = searchString.substring(1, searchString.length()-1) 
```

然后用 split 标记它

```
String[] coordiantes = stringWithoutBrackets.split(","); 
```

通过 Regex API 查看，您还可以执行以下操作：

```
public static void main(String[] args) {
    String searchString = "(7,32)";
    Pattern compile1 = Pattern.compile("(?<=\\()\\d+(?=,)");
    Pattern compile2 = Pattern.compile("(?<=,)\\d+(?=\\))");
    Matcher matcher1 = compile1.matcher(searchString);
    Matcher matcher2 = compile2.matcher(searchString);
    while (matcher1.find() && matcher2.find()) {
        String group1 = matcher1.group();
        String group2 = matcher2.group();
        System.out.println("value 1: " + group1 + " value 2: " + group2);
    }
} 
```

主要的变化是我使用 (?<==\))、(?=,)、(?<=,)、(?=\)) 来搜索括号和逗号，但不使用它们。但我真的认为这对这项任务来说太过分了。

# php - 如何在群组墙上发布新消息

> ID：14426326
> 
> 赞同：2
> 
> 时间：2013-01-20T16:03:24.540
> 
> 标签：php, facebook, cron

我有一个包含食谱的网站，并且该网站在 facebook 中有一个有数千名朋友的群组。我想在小组时间线上发布新食谱。例如，我可以每 1 小时使用 cron 执行一次。

```
require_once('facebook.php');

    $config = array(
        'appId' => 'xxx',
        'secret' => 'xxx',
    );

    $facebook = new Facebook($config);

    // If not, we'll get an exception, which we handle below.
    try {
        $ret_obj = $facebook->api('/page_id/feed', 'POST',
                                    array(
                                    'link' => 'www.example.com',
                                    'message' => 'Posting with the PHP SDK!'
                                ));
        echo '<pre>Post ID: ' . $ret_obj['id'] . '</pre>';

    } catch(FacebookApiException $e) {
        echo "error type: ". $e->getType()."<br />";
        echo "error mesage: ". $e->getMessage()."<br />";
    } 
```

我应该如何更改我的脚本以便能够从 cron 守护进程在组页面上发布？

我稍微更改了脚本，现在出现此错误：错误类型：OAuthException 错误消息：（＃200）用户尚未授权应用程序执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:10:21.450

[如此处](https://developers.facebook.com/docs/reference/api/group/#links)文档所述：

> `/GROUP_ID/feed`用户可以通过使用`publish_actions`权限和以下参数发出 HTTP POST 请求，在群组墙上发布链接。（`publish_stream`也可以，但你应该使用`publish_actions`。）这需要一个用户`access_token`。

所以你需要做的只是发布（以用户身份运行你的脚本）：

1.  `publish_actions`允许
2.  用户`access_token`

现在要将其用作 cronjob，我通常会执行以下操作：

1.  授权用户（有权发布到该组）具有所需的权限
2.  [扩展他的令牌](https://developers.facebook.com/docs/howtos/login/extending-tokens/)
3.  将此令牌存储在数据库中
4.  使用令牌发布
5.  密切关注过期变量，在令牌过期 3 天之前 --> 向用户发送电子邮件以再次“登录”到您的应用程序，然后转到**#3**
6.  在发布并记录它时始终捕获任何错误；您可以检查错误是否与访问令牌有关，因此转到**#5**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:08:29.413

尝试：

```
$config = array(
    'appId' => 'xxx',
    'secret' => 'xxx',
    'cookie' => true
); 
```

设置 cookie 应该让您保持登录状态。

# java - 如何从java中捕获的异常返回到特定点

> ID：14426327
> 
> 赞同：0
> 
> 时间：2013-01-20T16:03:36.183
> 
> 标签：java, exception-handling

```
public void processing()
{

    System.out.println("Please enter the amount of saving per month: ");

    try
    {
        while(input.hasNext())
        {
            setSavingPermonth(input.nextDouble());

            System.out.println("Please enter expected interest rate: ");
            setInterestRate(input.nextDouble());

            System.out.println("Please enter number of month for saving: ");
            setNumberOfMonth(input.nextInt());

            displayInputs();
            System.out.println();
            totalContibution();
            totalSavingAmount();

            System.out.println();
            System.out.println("\nPlease enter the amount of saving per month: \n(or <Ctrl + D> to close the program)");
        }
    }
    catch(InputMismatchException inputMismatchException)
    {
        System.err.println("Input must be numeric. \ntry again: ");
              //**Anything need to done here in order to go back to setInterestRate()?**
    }
} 
```

我想回到异常捕获错误输入异常之前的位置，例如，我为 setInterestRate() 输入了一个字符串，但 Java 将我捕获到那里，并显示错误消息，问题：我该如何返回到那里以便我可以重新输入正确的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:10:49.480

重写您的代码，使其使用以下方法：

```
static double inputDouble(Scanner input) {
  while (input.hasNext()) try {
    return input.nextDouble();
  }
  catch (InputMismatchException e) {
    System.out.println("Wrong input. Try again.");
    input.next(); // consume the invalid double
  }
  throw new IOException("Input stream closed");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:31:33.840

您可以使用以下两种方法来获取整数和双精度：

```
static int getIntInput(Scanner input) {
    while(true)
    {
        try {
            if (input.hasNext()) {
                return input.nextInt();
            }
        } catch (InputMismatchException  e) {
            System.err.println("Input must be numeric. \ntry again: ");
            input.next();
        }
    }
}

static double getDoubleInput(Scanner input) {
    while(true)
    {
        try {
            if (input.hasNext()) {
                return input.nextDouble();
            }
        } catch (InputMismatchException  e) {
            System.err.println("Input must be numeric. \ntry again: ");
            input.next();
        }
    }
} 
```

# html - 当我链接到页面的特定部分时遇到问题？

> ID：14426328
> 
> 赞同：5
> 
> 时间：2013-01-20T16:03:43.073
> 
> 标签：html

我做了一个很长的页面，我正在我的电脑上测试。由于太长了，所以我在顶部添加了一个目录。目录下方是一些链接，单击这些链接可将您带到页面的特定部分。这是我使用的标记示例：

```
<h4>Table of Contents</h4>
<ul>
    <li><a href="#gotolink">Link</a></li>  
</ul>
<h3><a name="gotolink">Link</a></h3>
    <p>some stuff here</p> 
```

它工作正常。问题是我也有一个固定的标题，因为无论您在页面上的哪个位置，您总是会看到标题，当我单击目录下的链接时，它会将我带到页面的该部分，但标题最终覆盖了`<h3>`这些东西。我想让它在您单击链接时将您带到页面的该部分，但该部分将位于屏幕中间，而不是顶部，因此标题不会覆盖任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:31:23.017

### 解决方案

您可以通过设置`position: relative;`目标`<a>`元素来做到这一点；只需给标题设置一个高度，然后设置`top: -[header height]`在`<a>`.

### 示范

[这是一个 JSFiddle](http://jsfiddle.net/FreV6/)。单击`Link`长页面顶部的 （请原谅大量的 Lorum Ipsum）。该页面将跳转到红色标题。

### CSS

```
body {
    margin-top: 20px;    /* Same height as header */
}

#header {
    position: fixed;
    background: black;
    color: white;
    height: 20px;
    line-height: 20px;
    width: 100%;
    top: 0;
}

h3 a {
    position: relative;
    top: -20px;    /* Negative header height */

    /* Don't select anchor */
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    -o-user-select: none;
    user-select: none;
} 
```

### 注意事项

*   标头必须具有明确的高度，以便可以正确设置偏移量。
*   由于`<a>`是从包含元素的偏移量（`<h3>`在这种情况下），用户选择被禁用`user-select: none`。这意味着其中的任何文本都是*不可*`<a>`选择的。这就是为什么我没有`<h3>`在 JSFiddle 演示中将 ' 文本包装在其中的原因。
*   这不会将目标标题放置在屏幕中间，*但会将**其*放置在标题下方。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:12:57.993

我建议添加一些 JavaScript，当单击将您标记到页面命名部分的锚标记时，会向下滚动 x 个像素以补偿静态标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:14:22.980

也许你应该尝试这样的事情：

```
...
    <a name="link"></a><br /><br /><br /><br /><br />  
    <h3>Your Heading Here</h3>
    <p>some stuff here</p> 
```*

# python - ntpath.basename() 替代方案？

> ID：14426331
> 
> 赞同：1
> 
> 时间：2013-01-20T16:04:10.010
> 
> 标签：python, filepath

我正在尝试使用`ntpath.basename()`像`/Users/user/file_one`和 get一样的字符串`file_one`。但是，我遇到了问题`ntpath`。它在我运行脚本时有效，但在我 py2app 之后，ntpath 不再有效。ntpath 有替代方案吗？我不确定它对 Windows 有什么特殊功能，但我的脚本是为 OS X 构建的，因此只使用正斜杠，所以如果没有 ntpath 提供的“NT 魔法”，我应该没问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:22:29.243

```
>>> import os
>>> print(os.path.split('/Users/user/file_one')[1])
file_one
>>> print(os.path.basename('/Users/user/file_one'))
file_one 
```

# java - C++ 中的 Java 数组列表

> ID：14426338
> 
> 赞同：24
> 
> 时间：2013-01-20T16:04:41.453
> 
> 标签：java, c++

在Java中我可以做到

```
List<String> data = new ArrayList<String>();
data.add("my name"); 
```

我将如何在 C++ 中做同样的事情？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-20T16:05:11.987

使用`std::vector`和`std::string`：

```
#include <vector>  //for std::vector
#include <string>  //for std::string

std::vector<std::string> data;
data.push_back("my name"); 
```

请注意，在 C++ 中，您不需要`new`每次创建对象时都使用。该对象`data`是通过调用的默认构造函数默认初始化的`std::vector`。所以上面的代码没问题。

在 C++ 中，原则是：**尽可能****避免`new`**。

如果您在编译时已经知道大小并且数组不需要增长，那么您可以使用`std::array`：

```
#include <array> //for std::array

std::array<std::string, N> data; //N is compile-time constant
data[i] = "my name"; //for i >=0 and i < N 
```

阅读文档以获取更多详细信息：

*   [标准::向量](http://en.cppreference.com/w/cpp/container/vector)
*   [标准::字符串](http://en.cppreference.com/w/cpp/container/string)
*   [标准::数组](http://en.cppreference.com/w/cpp/container/array)

* * *

C++ 标准库有很多容器。根据情况，您必须选择最适合您的目的的一种。我不可能一一谈论它们。但这里的图表很有帮助（[来源](http://linuxsoftware.co.nz/cppcontainers.html)）：

![在此处输入图像描述](../Images/73f7217719558a93474211928e58ef1f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:45:16.593

所有组合在一个线向量中 myVec(1,"hello");

# .net - 基于 TCP 套接字的文件传输：正确接收和保存文件

> ID：14426348
> 
> 赞同：0
> 
> 时间：2013-01-20T16:05:36.967
> 
> 标签：.net, vb.net, tcpclient, file-sharing

我正在尝试创建一个文件共享程序。至此，连接和文件传输部分已经处理完毕。但我目前在如何正确接收和保存文件方面遇到问题。

**当且仅当**我将在服务器端指定其名称和扩展名时，我才能成功接收文件。现在我的问题是，如何检索文件的名称和扩展名，以便在服务器上成功接收文件？我的意思是我不想在每次收到文件时都指定一个名称。这可能吗？我正在考虑通过另一个网络流发送文件名，但我想有更好的方法来做到这一点。

提前致谢！

**这是错误的屏幕截图。**

[http://i.stack.imgur.com/XkpZ2.png](http://i.stack.imgur.com/XkpZ2.png)

**服务器端代码**

```
 While True
                Dim c As TcpClient = server.AcceptTcpClient
                Dim s As NetworkStream = c.GetStream

                FileOpen(1, filePath, OpenMode.Binary)
                Dim buffer(1024 - 1) As Byte
                Do While True
                    Dim bytesRead As Integer = s.Read(buffer, 0, buffer.Length)
                    If bytesRead = 0 Then Exit Do
                    FilePut(1, buffer)
                Loop
                FileClose(1)
                s.Close()
                c.Close()
            End While 
```

**客户端代码**

```
 Dim nstm As Stream = cli.GetStream()
            Dim fstm As Stream = New FileStream(filePath, FileMode.Open, FileAccess.Read)
            Dim buffer(1024 - 1) As Byte
            Do While True
                Dim bytesRead As Integer = fstm.Read(buffer, 0, buffer.Length)
                If bytesRead = 0 Then Exit Do
                nstm.Write(buffer, 0, bytesRead)
            Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:16:52.707

你不能直接保存文件到桌面，你必须创建新文件夹并将文件分配到新文件夹。我尝试创建示例，此图像结果 [http://diaryanakku.files.wordpress.com/2013/01/clientsocket.png](http://diaryanakku.files.wordpress.com/2013/01/clientsocket.png)

这个发送文件的代码参考，对不起印度尼西亚语言的教程，但代码仍然是英文，我希望能有所帮助。 [http://diaryanakku.wordpress.com/2013/01/21/mengirim-file-melalui-socket-vb-net/](http://diaryanakku.wordpress.com/2013/01/21/mengirim-file-melalui-socket-vb-net/)

# javascript - WinRT - StreamSocket - 通过 LoadAsync 读取数据时连接关闭

> ID：14426350
> 
> 赞同：1
> 
> 时间：2013-01-20T16:05:49.247
> 
> 标签：javascript, sockets, windows-8, windows-runtime

我正在尝试通过 StreamSocket 发送 HTTP 请求，但响应被截断

**“failedWinRTError：对象已关闭。”**

* * *

这是我的代码：

```
 var count, hostName, raw_request, raw_response, reader, socketProtection, startReader, streamSocket, writer;
  streamSocket = new Windows.Networking.Sockets.StreamSocket();

  hostName = new Windows.Networking.HostName("www.reddit.com", "80");

  raw_response = "";

  count = 0;

  startReader = function() {
    return reader.loadAsync(8 * 1000).done(function(bytesRead) {

      raw_response += reader.readString(reader.unconsumedBufferLength);
      if (raw_response.indexOf("</html>") > 0) {
        return;
      } else {
        startReader();
      }
    }, function(error) {

      raw_response += reader.readString(reader.unconsumedBufferLength);
      window.raw_response = raw_response;
      return;
    });
  };

  streamSocket.connectAsync(hostName, "80", 0).done(function(response) {
    var string;

    reader = new Windows.Storage.Streams.DataReader(streamSocket.inputStream);
    reader.inputStreamOptions = 1;

    writer = new Windows.Storage.Streams.DataWriter(streamSocket.outputStream);
    string = "Hello world";
    writer.writeString(raw_request);
    return writer.storeAsync().done(function() {
      writer.flushAsync();
      writer.detachStream();
      return startReader();
    });
  }); 
```

* * *

我注意到响应的开头也被截断了。

这是我在 HTTP 响应开始时得到的。

> /1.1 200 确定

同样奇怪的是...... HTTPS 请求完美运行。

* * *

知道我做错了什么吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T20:38:03.423

从主机名中删除*http://*并且不需要第二个参数：

```
var hostName = new Windows.Networking.HostName("www.reddit.com"); 
```

*在ConnectAsync*中使用这个对象，只需要主机名和服务名参数：

```
streamSocket.connectAsync(hostName, "80").done(function (response) {
    // ....
}, function (error) {
    console.log(error);
}); 
```

**更新：**好的，如果连接被关闭，服务器可能会关闭它。您是否发送格式良好的请求？这是一个例子：

```
var raw_request, raw_response, reader, writer;
var streamSocket = new Windows.Networking.Sockets.StreamSocket();

function doRequest() {
    var hostName = new Windows.Networking.HostName("www.reddit.com");
    streamSocket.connectAsync(hostName, "808").then(function () {
        reader = new Windows.Storage.Streams.DataReader(streamSocket.inputStream);
        reader.inputStreamOptions = Windows.Storage.Streams.InputStreamOptions.partial;
        writer = new Windows.Storage.Streams.DataWriter(streamSocket.outputStream);

        raw_request = "GET / HTTP/1.1\r\nHost: www.reddit.com/\r\nConnection: close\r\n\r\n";
        writer.writeString(raw_request);
        return writer.storeAsync();
    }).then(function () {
        raw_response = "";
        return startReader();
    }, function (error) {
        console.log(error);
    });
}

function startReader() {
    return reader.loadAsync(99999999).then(function (bytesRead) {
        raw_response += reader.readString(reader.unconsumedBufferLength);
        if (bytesRead === 0) {
            window.raw_response.value = raw_response;
            return;
        }
        return startReader();
    });
}; 
```

# jquery - jquery每个函数少写一条记录

> ID：14426351
> 
> 赞同：0
> 
> 时间：2013-01-20T16:05:51.057
> 
> 标签：jquery, each

我有以下代码

```
$.getJSON('/update-recent-stat', function(jsonData)
{
   var counterjson = 0;

   $.each(jsonData, function(i, value){
        var i = counterjson++;
        var link = jsonData[i].linkid;
        var time = jsonData[i].time;
        var value = jsonData[i].tagvalue;
        var type = jsonData[i].type;
        var sender = jsonData[i].sender;

        $("#DownBoxL ul li:eq("+ i +")").html("<div class=Timestamp>"+time+"</div><div class=UserName><a href=\"#"+link+"\">"+sender+"</a> <?php echo $lang['sending'] ?> "+type+"!</div><div class=TagValue>+"+value+"</div>");
     });
}) 
```

还有一个依赖文件（更新程序），它查询数据并返回 JSON 文件。现在的问题是这段代码每次少写一条记录！有人看到我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:08:24.873

解决方案：

只需删除此行：

```
var i = counterjson++; 
```

您正在重新分配`i`给一个新变量。尝试另一个变量：

```
$.each(jsonData, function(i, value){
        var j = counterjson++; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:08:39.070

`i`每次执行该代码块时都会增加变量。我认为这就是原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:11:20.537

您应该有效地使用参数并执行以下操作：

```
 $.each(jsonData, function(i, value){
        var link = value.linkid;
        var time = value.time;
        var value = value.tagvalue; //<-- Shouldn't mask variables
        var type = value.type;
        var sender = value.sender;

        $("#DownBoxL ul li:eq("+ i +")").html("<div class=Timestamp>"+time+"</div><div class=UserName><a href=\"#"+link+"\">"+sender+"</a> <?php echo $lang['sending'] ?> "+type+"!</div><div class=TagValue>+"+value+"</div>");
     }); 
```

虽然你也可以去掉作业，只剩下一行。

```
$.each(jsonData, function(i, value){
        $("#DownBoxL ul li:eq("+ i +")").html("<div class=Timestamp>"+value.time+"</div><div class=UserName><a href=\"#"+value.link+"\">"+value.sender+"</a> <?php echo $lang['sending'] ?> "+value.type+"!</div><div class=TagValue>+"+value.tagValue+"</div>");
     }); 
```

`each`使用索引填充第一个参数，因此您不应该手动跟踪它，并且使用适当的对象值填充第二个参数，因此您不需要手动检索它。如果你不打算使用它，你应该只使用 a`for`来清楚。

# android - 如何在android的AsyncTask中使用进度对话框

> ID：14426356
> 
> 赞同：3
> 
> 时间：2013-01-20T16:06:31.757
> 
> 标签：android, android-asynctask

我正在开发一个需要用户登录的应用程序。通过 url 登录可以正常工作。但是，当我添加 AsyncTask 以添加进度对话框时，该应用程序不会改变意图。我尝试了所有可能的方法，但都是徒劳的。下面是代码：

```
 package com.epolicing;

import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class LoginActivity extends Activity implements OnClickListener{
    Button loginButton;
    EditText usernme,passwrd;
    TextView error;
    String username,password;
    static final int Dialog_logging_in=1;
    boolean userverified=false;

    // Session Manager Class
     SessionManager session;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login); 
        session = new SessionManager(getApplicationContext()); 
        loginButton = (Button) findViewById(R.id.loginButton);
        usernme = (EditText) findViewById(R.id.UserName);
        passwrd=(EditText) findViewById(R.id.password);
        username=usernme.getText().toString().trim();
        password=passwrd.getText().toString().trim();
        error=(TextView)findViewById(R.id.errorTextView);
        loginButton.setOnClickListener(this);
    }

     protected Dialog onCreateDialog(int id){
      Dialog dialog = null;
      switch(id){
      case Dialog_logging_in:
          ProgressDialog.show(LoginActivity.this,"","Authenticating user...");
          break;
          default:
              dialog=null;
      }
      return dialog;

     }

    public void onClick(View v) {
        switch(v.getId()){
        case R.id.loginButton:
            String user,pass;
            user=usernme.getText().toString();
            pass=passwrd.getText().toString();

            if(user.equals("")||pass.equals("")){       
                message();
            }
            else {
                new log_in().execute(this);
            }
            break;
            }

        }

    //login method
      public void login() {
                ArrayList<NameValuePair>postParameters=new ArrayList<NameValuePair>();
                postParameters.add(new BasicNameValuePair("username",usernme.getText().toString()));
                postParameters.add(new BasicNameValuePair("password",passwrd.getText().toString().trim()));

                //String valid="1";
                String response=null;
                try{
                    response=CustomHttpClient.executeHttpPost("http://10.0.2.2/epolicing/tologin.php",postParameters);
                    String res=response.toString();
                    res=res.replaceAll("\\s+","");
                    if(res.equals("0")) {
                 error.setText("Wrong password or username combination");
                    }
                    else {
                        String usern=usernme.getText().toString().trim();
                        session.createLoginSession(usern,res);
                        userverified=true;
                        //Intent intent=new Intent(LoginActivity.this,menu.class);
                        //startActivity(intent);    
                    }
                }
                catch(Exception e){
                    error.setText(e.toString());

                }

      }

      public void message(){
        Context context=getApplicationContext();
        CharSequence text="username and/or password cannot be blank";
        int duration=Toast.LENGTH_LONG;
        Toast toast=Toast.makeText(context, text, duration);
        toast.show();
    }

     private class log_in extends AsyncTask<LoginActivity,Void,LoginActivity>{
        @Override
         protected void onPreExecute(){
            showDialog(Dialog_logging_in); 
         }
        @Override
        protected LoginActivity doInBackground(LoginActivity... Params) {
            login();
            return null;
        }
        protected void onPostExecute(LoginActivity params){
            super.onPostExecute(params);
            //dismissDialog(Dialog_logging_in);
            if(userverified==true){
                Intent intent=new Intent(LoginActivity.this,menu.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                LoginActivity.this.startActivity(intent);
            }

        }

     }
} 
```

这是日志：

```
01-20 19:36:53.685: E/WindowManager(1191): Activity com.epolicing.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40555c68 that was originally added here
01-20 19:36:53.685: E/WindowManager(1191): android.view.WindowLeaked: Activity com.epolicing.LoginActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40555c68 that was originally added here
01-20 19:36:53.685: E/WindowManager(1191):  at android.view.ViewRoot.<init>(ViewRoot.java:258)
01-20 19:36:53.685: E/WindowManager(1191):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
01-20 19:36:53.685: E/WindowManager(1191):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
01-20 19:36:53.685: E/WindowManager(1191):  at android.view.Window$LocalWindowManager.addView(Window.java:424)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.Dialog.show(Dialog.java:241)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.ProgressDialog.show(ProgressDialog.java:107)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.ProgressDialog.show(ProgressDialog.java:90)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.ProgressDialog.show(ProgressDialog.java:85)
01-20 19:36:53.685: E/WindowManager(1191):  at com.epolicing.LoginActivity.onCreateDialog(LoginActivity.java:50)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.Activity.onCreateDialog(Activity.java:2482)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.Activity.createDialog(Activity.java:882)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.Activity.showDialog(Activity.java:2557)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.Activity.showDialog(Activity.java:2524)
01-20 19:36:53.685: E/WindowManager(1191):  at com.epolicing.LoginActivity$log_in.onPreExecute(LoginActivity.java:120)
01-20 19:36:53.685: E/WindowManager(1191):  at android.os.AsyncTask.execute(AsyncTask.java:391)
01-20 19:36:53.685: E/WindowManager(1191):  at com.epolicing.LoginActivity.onClick(LoginActivity.java:71)
01-20 19:36:53.685: E/WindowManager(1191):  at android.view.View.performClick(View.java:2485)
01-20 19:36:53.685: E/WindowManager(1191):  at android.view.View$PerformClick.run(View.java:9080)
01-20 19:36:53.685: E/WindowManager(1191):  at android.os.Handler.handleCallback(Handler.java:587)
01-20 19:36:53.685: E/WindowManager(1191):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 19:36:53.685: E/WindowManager(1191):  at android.os.Looper.loop(Looper.java:123)
01-20 19:36:53.685: E/WindowManager(1191):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-20 19:36:53.685: E/WindowManager(1191):  at java.lang.reflect.Method.invokeNative(Native Method)
01-20 19:36:53.685: E/WindowManager(1191):  at java.lang.reflect.Method.invoke(Method.java:507)
01-20 19:36:53.685: E/WindowManager(1191):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-20 19:36:53.685: E/WindowManager(1191):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-20 19:36:53.685: E/WindowManager(1191):  at dalvik.system.NativeStart.main(Native Method) 
```

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-20T16:18:58.810

无需返回当前的 Activity 实例，`doInBackground`因为`AsyncTask`它是 Activity 的内部类，因此您只需使用`LoginActivity.this`启动下一个 Activity 将您的 AsyncTask 类更改为：

```
 private class log_in extends AsyncTask<String,Void,String>{
        ProgressDialog pDialog;
        @Override
         protected void onPreExecute(){
            pDialog = new ProgressDialog(LoginActivity.this);
            pDialog.setMessage("Authenticating user...");
            pDialog.show();
         }
        @Override
        protected String doInBackground(String... params) {
            login();
            return null;
        }
        protected void onPostExecute(String params){
            super.onPostExecute(params);
            pDialog.dismiss();
            if(userverified==true){
                Intent intent=new Intent(LoginActivity.this,menu.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                LoginActivity.this.startActivity(intent);
            }
           else{
               error.setText("Wrong password or username combination");
            }

        }

     } 
```

因为无法更新 UI 元素，`doInBackground`并且您正在尝试在`login()`方法内设置 textview 文本，而不是更改 Textview 文本`userverified==false`

# r - 使用 R/RCurl 高效下载大文件

> ID：14426359
> 
> 赞同：15
> 
> 时间：2013-01-20T16:06:45.137
> 
> 标签：r, curl, rcurl

我看到很多使用 RCurl 下载二进制文件的例子是这样的：

```
library("RCurl")
curl = getCurlHandle()
bfile=getBinaryURL (
        "http://www.example.com/bfile.zip",
        curl= curl,
        progressfunction = function(down, up) {print(down)}, noprogress = FALSE
)
writeBin(bfile, "bfile.zip")
rm(curl, bfile) 
```

如果下载量很大，我想最好将它同时写入存储介质，而不是全部在内存中获取。

在 RCurl 文档中，有一些示例可以按块获取文件并在下载文件时对其进行操作，但它们似乎都称为文本块。

你能举一个工作的例子吗？

## 更新

一位用户建议对二进制文件使用`download file`带有选项的 R native 。`mode = 'wb'`

在许多情况下，本机函数是一个可行的替代方案，但有许多用例不适合此本机函数（https、cookie、表单等），这就是 RCurl 存在的原因。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T09:24:26.973

这是工作示例：

```
library(RCurl)
#
f = CFILE("bfile.zip", mode="wb")
curlPerform(url = "http://www.example.com/bfile.zip", writedata = f@ref)
close(f) 
```

它将直接下载到文件中。返回的值将是（而不是下载的数据）请求的状态（0，如果没有错误发生）。

提到`CFILE`在 RCurl 手册上有点简洁。希望将来它将包含更多详细信息/示例。

为了您的方便，相同的代码被打包为一个函数（并带有一个进度条）：

```
bdown=function(url, file){
    library('RCurl')
    f = CFILE(file, mode="wb")
    a = curlPerform(url = url, writedata = f@ref, noprogress=FALSE)
    close(f)
    return(a)
}

## ...and now just give remote and local paths     
ret = bdown("http://www.example.com/bfile.zip", "path/to/bfile.zip") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T18:10:51.840

嗯.. 使用 mode = 'wb' :) .. 运行它并按照我的评论进行操作。

```
# create a temporary file and a temporary directory on your local disk
tf <- tempfile()
td <- tempdir()

# run the download file function, download as binary..  save the result to the temporary file
download.file(
    "http://sourceforge.net/projects/peazip/files/4.8/peazip_portable-4.8.WINDOWS.zip/download",
    tf ,
    mode = 'wb' 
)

# unzip the files to the temporary directory
files <- unzip( tf , exdir = td )

# here are your files
files 
```

# java - 如何从文本文件中提取特定数据然后显示它（Java）

> ID：14426362
> 
> 赞同：1
> 
> 时间：2013-01-20T16:06:51.830
> 
> 标签：java, eclipse, netbeans, text-files, jtextfield

我有一组以这种格式显示的数据：

```
total question,Hint count,Right question Count 
```

这些是由“：”分隔的整数。

```
"01:02:03" 
```

如何读取文本文件以便从数据中挑选出“02”并显示出来？

我编写了一个基本程序，它只读取文本文件并将其显示在 jTextField 中，但我发现很难获得信息来帮助我做到这一点。

最后如果我有这组数据，

```
number1"10:07:03"
number2"10:03:08"
number3"10:06:05"
number4"10:02:10" 
```

我将分别从数据中提取07、03、06、02。

任何输入都会很好，如果有人有在线资源和教程，我也很乐意自己看看。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:11:46.477

您可以使用[readLine](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)方法，然后在表示您的行的字符串上使用 带有“：”分隔符的[split方法。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)那么你锻炼应该是微不足道的......

（如果您从未听说过 bufferedreader，请阅读我提供的第一个链接中的类描述。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:12:11.047

您可能希望在[`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html). 特别是[`String.split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)使用`:`作为分隔符签出。

您还可以考虑使用更高级的正则表达式，[`Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)有关更多信息，请参阅。但是，在这种情况下，`split`应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:33:24.843

使用`readLine`and的例子`split`：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream("yourFile.txt")));

String text;
while((text = reader.readLine()) != null) {
    String [] parts = text.split(":");
    // now `parts` array will contain your data
} 
```

# c# - 必须声明标量变量错误

> ID：14426363
> 
> 赞同：1
> 
> 时间：2013-01-20T16:06:53.147
> 
> 标签：c#, sql, sql-server, ado.net

我正在尝试从代码隐藏中显示 sql 选择结果，但是发生了此错误：

> *必须声明标量变量“@poNum”。*
> 
> 第 75 行：sdsUsers.SelectParameters.Add("@poNum", poNum.Text.Trim());
> 第 76 行：
> 第 77 行：DataView dvMember = (DataView)sdsUsers.Select(DataSourceSelectArguments.Empty); //这里的错误
> 第 78 行：DataTable tblMember = dvMember.Table;

代码：

```
string connectionString2 = ConfigurationManager.ConnectionStrings["WholesaleConnectionString"].ConnectionString;
string selectSql = "SELECT invoiceNum, poNum FROM SendInvoice where poNum = @poNum";

SqlDataSource sdsUsers = new SqlDataSource(connectionString2, selectSql); 
sdsUsers.SelectParameters.Clear(); 
sdsUsers.SelectParameters.Add("@poNum", poNum.Text.Trim());

DataView dvMember = (DataView)sdsUsers.Select(DataSourceSelectArguments.Empty); //error occured here 
DataTable tblMember = dvMember.Table;

for(int i=0;i<tblMember.Rows.Count;i++) { 
            if (i==0){ 
             Label aaa = new Label();
             aaa.Text = tblMember.Rows[i].ItemArray[0].ToString();
            } 
        } 
```

我被这个问题困扰了好几天，我找不到解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:28:23.737

我会尝试从参数名称中删除 @ （尽管将其保留在您的 SQL 中）：

```
sdsUsers.SelectParameters.Add("poNum", poNum.Text.Trim()); 
```

或（假设 poNum 是一个 int）：

```
sdsUsers.SelectParameters.Add(new Parameter("poNum", System.TypeCode.Int32, poNum)); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-31T02:21:30.597

```
sdsUsers.SelectParameters.Clear(); 
```

应该紧随其后

```
sdsUsers.SelectParameters.Add("@poNum", poNum.Text.Trim()); 
```

# enums - 在 Go 中表示枚举的惯用方式是什么？

> ID：14426366
> 
> 赞同：658
> 
> 时间：2013-01-20T16:07:22.017
> 
> 标签：enums, go, genetics

我试图表示一个简化的染色体，它由 N 个碱基组成，每个碱基只能是`{A, C, T, G}`.

我想用枚举形式化约束，但我想知道在 Go 中模拟枚举最惯用的方式是什么。

* * *

## 回答 #1

> 赞同：794
> 
> 时间：2013-01-20T16:15:09.460

引用语言规范：[Iota](http://golang.org/ref/spec#Iota)

> 在常量声明中，预先声明的标识符 iota 表示连续的无类型整数常量。每当保留字 const 出现在源代码中并在每个 ConstSpec 之后递增时，它都会重置为 0。它可以用来构造一组相关的常量：

```
const (  // iota is reset to 0
        c0 = iota  // c0 == 0
        c1 = iota  // c1 == 1
        c2 = iota  // c2 == 2
)

const (
        a = 1 << iota  // a == 1 (iota has been reset)
        b = 1 << iota  // b == 2
        c = 1 << iota  // c == 4
)

const (
        u         = iota * 42  // u == 0     (untyped integer constant)
        v float64 = iota * 42  // v == 42.0  (float64 constant)
        w         = iota * 42  // w == 84    (untyped integer constant)
)

const x = iota  // x == 0 (iota has been reset)
const y = iota  // y == 0 (iota has been reset) 
```

> 在 ExpressionList 中，每个 iota 的值是相同的，因为它仅在每个 ConstSpec 之后递增：

```
const (
        bit0, mask0 = 1 << iota, 1<<iota - 1  // bit0 == 1, mask0 == 0
        bit1, mask1                           // bit1 == 2, mask1 == 1
        _, _                                  // skips iota == 2
        bit3, mask3                           // bit3 == 8, mask3 == 7
) 
```

> 最后一个示例利用了最后一个非空表达式列表的隐式重复。

* * *

所以你的代码可能就像

```
const (
        A = iota
        C
        T
        G
) 
```

或者

```
type Base int

const (
        A Base = iota
        C
        T
        G
) 
```

如果您希望基数是与 int 不同的类型。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2013-08-01T09:17:48.550

参考 jnml 的答案，您可以通过根本不导出 Base 类型（即写成小写）来防止 Base 类型的新实例。如果需要，您可以创建一个可导出的接口，该接口具有返回基类型的方法。该接口可用于处理 Bases 的外部函数，即

```
package a

type base int

const (
    A base = iota
    C
    T
    G
)

type Baser interface {
    Base() base
}

// every base must fulfill the Baser interface
func(b base) Base() base {
    return b
}

func(b base) OtherMethod()  {
} 
```

* * *

```
package main

import "a"

// func from the outside that handles a.base via a.Baser
// since a.base is not exported, only exported bases that are created within package a may be used, like a.A, a.C, a.T. and a.G
func HandleBasers(b a.Baser) {
    base := b.Base()
    base.OtherMethod()
}

// func from the outside that returns a.A or a.C, depending of condition
func AorC(condition bool) a.Baser {
    if condition {
       return a.A
    }
    return a.C
} 
```

主包内部`a.Baser`现在实际上就像一个枚举。只有在 a 包中，您才能定义新实例。

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2017-11-21T11:05:08.233

你可以这样做：

```
type MessageType int32

const (
    TEXT   MessageType = 0
    BINARY MessageType = 1
) 
```

使用此代码编译器应检查枚举类型

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2018-03-19T22:48:16.573

确实，上述使用`const`和`iota`的示例是在 Go 中表示原始枚举的最惯用的方式。但是，如果您正在寻找一种方法来创建功能更全面的枚举，类似于您在其他语言（如 Java 或 Python）中看到的类型呢？

在 Python 中创建一个看起来和感觉起来像字符串枚举的对象的一种非常简单的方法是：

```
package main

import (
    "fmt"
)

var Colors = newColorRegistry()

func newColorRegistry() *colorRegistry {
    return &colorRegistry{
        Red:   "red",
        Green: "green",
        Blue:  "blue",
    }
}

type colorRegistry struct {
    Red   string
    Green string
    Blue  string
}

func main() {
    fmt.Println(Colors.Red)
} 
```

假设您还需要一些实用方法，例如`Colors.List()`和`Colors.Parse("red")`。而且你的颜色更复杂，需要成为一个结构。然后你可能会做一些这样的事情：

```
package main

import (
    "errors"
    "fmt"
)

var Colors = newColorRegistry()

type Color struct {
    StringRepresentation string
    Hex                  string
}

func (c *Color) String() string {
    return c.StringRepresentation
}

func newColorRegistry() *colorRegistry {

    red := &Color{"red", "F00"}
    green := &Color{"green", "0F0"}
    blue := &Color{"blue", "00F"}

    return &colorRegistry{
        Red:    red,
        Green:  green,
        Blue:   blue,
        colors: []*Color{red, green, blue},
    }
}

type colorRegistry struct {
    Red   *Color
    Green *Color
    Blue  *Color

    colors []*Color
}

func (c *colorRegistry) List() []*Color {
    return c.colors
}

func (c *colorRegistry) Parse(s string) (*Color, error) {
    for _, color := range c.List() {
        if color.String() == s {
            return color, nil
        }
    }
    return nil, errors.New("couldn't find it")
}

func main() {
    fmt.Printf("%s\n", Colors.List())
} 
```

在那一点上，确定它有效，但您可能不喜欢重复定义颜色的方式。如果此时你想消除它，你可以在你的结构上使用标签并做一些花哨的反射来设置它，但希望这足以覆盖大多数人。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2020-09-27T20:31:16.440

结构命名空间有一种方法。

好处是所有枚举变量都在特定的命名空间下以避免污染。问题是我们只能使用`var`not`const`

```
type OrderStatusType string

var OrderStatus = struct {
    APPROVED         OrderStatusType
    APPROVAL_PENDING OrderStatusType
    REJECTED         OrderStatusType
    REVISION_PENDING OrderStatusType
}{
    APPROVED:         "approved",
    APPROVAL_PENDING: "approval pending",
    REJECTED:         "rejected",
    REVISION_PENDING: "revision pending",
} 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2016-01-02T13:56:02.627

从 Go 1.4 开始，该`go generate`工具已与[`stringer`](https://godoc.org/golang.org/x/tools/cmd/stringer)使您的枚举易于调试和打印的命令一起引入。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2018-08-30T04:28:12.870

我相信我们在这里有很多很好的答案。但是，我只是想添加我使用枚举类型的方式

```
package main

import "fmt"

type Enum interface {
    name() string
    ordinal() int
    values() *[]string
}

type GenderType uint

const (
    MALE = iota
    FEMALE
)

var genderTypeStrings = []string{
    "MALE",
    "FEMALE",
}

func (gt GenderType) name() string {
    return genderTypeStrings[gt]
}

func (gt GenderType) ordinal() int {
    return int(gt)
}

func (gt GenderType) values() *[]string {
    return &genderTypeStrings
}

func main() {
    var ds GenderType = MALE
    fmt.Printf("The Gender is %s\n", ds.name())
} 
```

这是迄今为止我们可以创建枚举类型并在 Go 中使用的惯用方式之一。

编辑：

添加另一种使用常量枚举的方式

```
package main

import (
    "fmt"
)

const (
    // UNSPECIFIED logs nothing
    UNSPECIFIED Level = iota // 0 :
    // TRACE logs everything
    TRACE // 1
    // INFO logs Info, Warnings and Errors
    INFO // 2
    // WARNING logs Warning and Errors
    WARNING // 3
    // ERROR just logs Errors
    ERROR // 4
)

// Level holds the log level.
type Level int

func SetLogLevel(level Level) {
    switch level {
    case TRACE:
        fmt.Println("trace")
        return

    case INFO:
        fmt.Println("info")
        return

    case WARNING:
        fmt.Println("warning")
        return
    case ERROR:
        fmt.Println("error")
        return

    default:
        fmt.Println("default")
        return

    }
}

func main() {

    SetLogLevel(INFO)

} 
```

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2021-02-05T03:33:14.727

对于这样的用例，使用字符串常量可能很有用，以便可以将其编组为 JSON 字符串。在以下示例中，`[]Base{A,C,G,T}`将被编组为`["adenine","cytosine","guanine","thymine"]`.

```
type Base string

const (
    A Base = "adenine"
    C      = "cytosine"
    G      = "guanine"
    T      = "thymine"
) 
```

使用 时`iota`，这些值被编组为整数。在以下示例中，`[]Base{A,C,G,T}`将被编组为`[0,1,2,3]`.

```
type Base int

const (
    A Base = iota
    C
    G
    T
) 
```

这是一个比较两种方法的示例：

[https://play.golang.org/p/VvkcWvv-Tvj](https://play.golang.org/p/VvkcWvv-Tvj)

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-06-28T13:02:28.853

这是一个在有许多枚举时将被证明有用的示例。它使用 Golang 中的结构，并利用面向对象的原则将它们捆绑在一起，形成一个整洁的小包。添加或删除新枚举时，任何底层代码都不会更改。过程是：

*   定义枚举结构`enumeration items`：**EnumItem**。它具有整数和字符串类型。
*   将 定义`enumeration`为以下列表`enumeration items`：**Enum**
*   为枚举构建方法。包括了一些：
    *   `enum.Name(index int)`: 返回给定索引的名称。
    *   `enum.Index(name string)`: 返回给定索引的名称。
    *   `enum.Last()`: 返回最后一个枚举的索引和名称
*   添加您的枚举定义。

这是一些代码：

```
type EnumItem struct {
    index int
    name  string
}

type Enum struct {
    items []EnumItem
}

func (enum Enum) Name(findIndex int) string {
    for _, item := range enum.items {
        if item.index == findIndex {
            return item.name
        }
    }
    return "ID not found"
}

func (enum Enum) Index(findName string) int {
    for idx, item := range enum.items {
        if findName == item.name {
            return idx
        }
    }
    return -1
}

func (enum Enum) Last() (int, string) {
    n := len(enum.items)
    return n - 1, enum.items[n-1].name
}

var AgentTypes = Enum{[]EnumItem{{0, "StaffMember"}, {1, "Organization"}, {1, "Automated"}}}
var AccountTypes = Enum{[]EnumItem{{0, "Basic"}, {1, "Advanced"}}}
var FlagTypes = Enum{[]EnumItem{{0, "Custom"}, {1, "System"}}} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-03-24T09:07:51.447

重构[https://stackoverflow.com/a/17989915/863651](https://stackoverflow.com/a/17989915/863651)使其更具可读性：

```
package SampleEnum

type EFoo int

const (
    A EFoo = iota
    C
    T
    G
)

type IEFoo interface {
    Get() EFoo
}

func(e EFoo) Get() EFoo { // every EFoo must fulfill the IEFoo interface
    return e
}

func(e EFoo) otherMethod()  { // "private"
    //some logic
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-11-09T07:34:40.880

这是在 golang 中实现枚举的一种安全方法：

```
package main

import (
    "fmt"
)

const (
    MALE   = _gender(1)
    FEMALE = _gender(2)
    RED    = _color("RED")
    GREEN  = _color("GREEN")
    BLUE   = _color("BLUE")
)

type Gender interface {
    _isGender()
    Value() int
}

type _gender int

func (_gender) _isGender() {}

func (_g _gender) Value() int {
    return int(_g)
}

type Color interface {
    _isColor()
    Value() string
}

type _color string

func (_color) _isColor() {}

func (_c _color) Value() string {
    return string(_c)
}

func main() {
    genders := []Gender{MALE, FEMALE}
    colors := []Color{RED, GREEN, BLUE}
    fmt.Println("Colors =", colors)
    fmt.Println("Genders =", genders)
} 
```

输出：

```
Colors = [RED GREEN BLUE]
Genders = [1 2] 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-12-03T16:19:34.670

此外，这是将不同角色存储在一个字节中的一个位置的一种非常有效的方法，其中第一个值设置为 1，位移了 iota。

```
package main

import "fmt"

const (
    isCaptain = 1 << iota
    isTrooper
    isMedic

    canFlyMars
    canFlyJupiter
    canFlyMoon
)

func main() {
    var roles byte = isCaptain | isMedic | canFlyJupiter
    //Prints a binary representation.
    fmt.Printf("%b\n", roles)
    fmt.Printf("%b\n", isCaptain)
    fmt.Printf("%b\n", isTrooper)
    fmt.Printf("%b\n", isMedic)

    fmt.Printf("Is Captain? %v\n", isCaptain&roles == isCaptain)
    fmt.Printf("Is Trooper? %v", isTrooper&roles == isTrooper)

} 
```

# f# - Store Credit 的 F# 解决方案

> ID：14426369
> 
> 赞同：0
> 
> 时间：2013-01-20T16:07:28.180
> 
> 标签：f#, functional-programming

我想解决这个练习：[http](http://code.google.com/codejam/contest/351101/dashboard#s=p0) ://code.google.com/codejam/contest/351101/dashboard#s=p0使用 F#。

**我是函数式编程和 F# 的新手，**但我非常喜欢这个概念和语言。我也喜欢 codejam 练习，它看起来很简单，但却很真实。有人可以指出我的解决方案吗？

目前我已经编写了这段代码，它只是简单的命令式，从功能的角度来看很难看：

```
(*
    C - Credit
    L - Items
    I - List of Integer, wher P is single integer

    How does the data look like inside file
    N
    [...
    * Money
    * Items in store
    ...]
*)

    let lines = System.IO.File.ReadAllLines("../../../../data/A-small-practice.in")
    let CBounds c = c >= 5 && c <= 1000
    let PBounds p = p >= 1 && p <= 1000

    let entries = int(lines.[0]) - 1
    let mutable index = 1   (* First index is how many entries*)
    let mutable case = 1

    for i = 0 to entries do
        let index = (i*3) + 1
        let C = int(lines.[index])
        let L = int(lines.[index+1])
        let I = lines.[index+2]    
        let items = I.Split([|' '|]) |> Array.map int    
        // C must be the sum of some items

        // Ugly imperative way which contains duplicates
        let mutable nIndex = 0
        for n in items do
            nIndex <- nIndex + 1
            let mutable mIndex = nIndex
            for m in items.[nIndex..] do            
                mIndex <- mIndex + 1
                if n + m = C then do
                    printfn "Case #%A: %A %A" case nIndex mIndex
                    case <- case + 1 
```

我想找出加起来等于 C 值但不是以通常的命令方式的项目 - 我想要功能方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:30:14.070

你没有具体说明你将如何解决问题，所以很难给出建议。

关于读取输入，您可以将其表示为`Seq`. [Seq 模块](http://msdn.microsoft.com/en-us/library/ee353635.aspx)的高阶函数非常方便：

```
let data = 
   "../../../../data/A-small-practice.in"
   |> System.IO.File.ReadLines
   |> Seq.skip 1
   |> Seq.windowed 3
   |> Seq.map (fun lines -> let C = int(lines.[0])
                            let L = int(lines.[1])
                            let items = lines.[2].Split([|' '|]) |> Array.map int
                            (C, L, items)) 
```

**更新：**

对于示例的其余部分，您可以使用[sequence expression](http://msdn.microsoft.com/en-us/library/dd233209.aspx)。它功能强大且易于表达嵌套计算：

```
 let results = 
     seq { 
          for (C, _, items) in data do
            for j in 1..items.Length-1 do
              for i in 0..j-1 do
                if items.[j] + items.[i] = C then yield (i, j)
     }

 Seq.iteri (fun case (i, j) -> printfn "Case #%A: %A %A" case i j) results 
```

# asp.net-web-api - 在控制器上下文之外访问 HttpRequestMessage

> ID：14426375
> 
> 赞同：0
> 
> 时间：2013-01-20T16:07:57.730
> 
> 标签：asp.net-web-api, autofac

是否可以在控制器上下文之外访问当前请求信息（HttpRequestMessage）？

我想设置一个涉及传入请求标头的租户策略（ITenantIdentificationStrategy）。在自托管模式下 HttpContext.Current 不是一个选项，我还没有找到任何其他解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:12:09.980

听起来您正在寻找 HttpMessageHandler 。MessageHandlers 允许您对每个请求执行某种处理，并提供对请求和响应消息的完全访问权限。

# java - 某些控件上的 JavaFX fxml 默认 css 边框

> ID：14426377
> 
> 赞同：3
> 
> 时间：2013-01-20T16:07:59.070
> 
> 标签：java, css, javafx

我正在尝试使用 JavaFX Scene Builder 为我的应用程序创建 UI。我正在使用 CSS 文件来设置界面中的控件样式。我注意到某些控件 ( `TableView`, `TreeView`) 有一个我不想要的默认灰色边框。

我试过设置`-fx-border-style: none;`和`-fx-border-width: 0;`都没有工作。然后我尝试为各个边（`-fx-border-right-color:#FFF;`）设置边框颜色，但这也不起作用。我唯一可以改变的是所有边的边框颜色。

有谁知道如何摆脱默认边框，以及如何为这些控件的各个边设置边框样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T11:47:27.353

对我来说，以下工作：

```
TreeView tv = (TreeView) scene.lookup("#myTree");

// ... setup your tree

tv.setStyle("-fx-border-style: none; -fx-background-color:transparent;"); 
```

高温下，

# c++ - 没有命名空间的“namespace::fn”和“::fn”有什么区别？

> ID：14426378
> 
> 赞同：0
> 
> 时间：2013-01-20T16:08:08.383
> 
> 标签：c++

> **可能重复：**
> [C++ 命名空间问题](https://stackoverflow.com/questions/5966647/c-namespace-question)

我见过几个没有命名空间的例子。这样做有什么好处？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T16:09:02.393

`::fn`指`fn`在*全局*命名空间中调用的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-20T16:17:51.543

`::fn`引用全局命名空间中的某些东西（它是一个绝对路径）。`using <obj>;`请注意，您可以使用or将内容导入全局命名空间`using namespace <name>`；

`namespace::fn`引用相对于当前命名空间的命名空间中的某些东西（它是相对路径）。

```
namespace X
{
     namespace Y
     {
           int Z()
           {
               N::fn();
               // Compiler looks for
               //      ::X::Y::N::fn()
               //      ::X::N::fn()
               //      ::N::fn()
               //
               // The search is done in that order the first found
               // is used. Note this is done at compile time only.

               ::fn(); // Absolute path. No search done.
                       // looks for `fn()` in the global namespace

               fn();   // Relative path no namespace
                       // Searchs for ::X::Y::fn()
                       //             ::X::fn()
                       //             ::fn()

               ::X::fn(); // Absolute path no search done.
                          // looks for `fn()` in the namespace X which must be
                          // in the global namespace.
           }
     }          
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T16:18:43.120

当您有两个具有此名称的变量时要使用`::fn`，一个在函数内声明，另一个在全局范围内。因此，如果您想处理该函数内部的全局 fn（声明了局部 fn），则需要调用它`::fn`以区分它们

```
int fn = 5;

int main (int argc, char *argv[])
{
      int fn = 10;
      std::cout << "local fn is " << fn << " global fn is " << ::fn;  
      return 0;

} 
```

# binary - 纯二进制编辑器（不是十六进制编辑器）是否存在？

> ID：14426379
> 
> 赞同：0
> 
> 时间：2013-01-20T16:08:13.127
> 
> 标签：binary, editor

谁能告诉我互联网上是否已经有一个纯二进制阅读器/编辑器（不是十六进制编辑器）？

在互联网上详尽搜索后，我找不到一个！

我知道我可能可以编写一个脚本来做到这一点，但只是好奇是否有人知道已经存在的任何内容？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:47:32.487

不存在的原因是因为十六进制显示与二进制相同的内容，但以更紧凑和可读的形式。每对十六进制数字等于八个二进制数字。

您只需要将十六进制读取为二进制即可。11110000 是 F0，00001111 是 0F。如果你必须， xxd 有一个二进制选项：

```
$ xxd -b binaryIShex 
0000000: 01100010 01101001 01101110 01100001 01110010 01111001  binary
0000006: 00100000 01001001 01010011 00100000 01101000 01100101   IS he
000000c: 01111000 00100001 00001010                             x!.

$ xxd binaryIShex 
0000000: 6269 6e61 7279 2049 5320 6865 7821 0a    binary IS hex!. 
```

Bless 也可以这样做，但是您需要根据 [Layout Help](http://home.gna.org/bless/bless-manual/ch05s03.html)编辑默认布局： [Bless with binary user defined layout http://i.minus.com/i1pMAx6lWN7q1.png](http://i.minus.com/i1pMAx6lWN7q1.png)。

# ruby-on-rails - rails在视图中美化json

> ID：14426386
> 
> 赞同：2
> 
> 时间：2013-01-20T16:08:50.680
> 
> 标签：ruby-on-rails, json

我想在视图中显示一些“美化”的 json 以用于调试目的。例如，而不是显示：

```
{"observations"=>{"realtime_start"=>"1776-07-04", "realtime_end"=>"9999-12-31", "observation_start"=>"1776-07-04", "observation_end"=>"9999-12-31", "units"=>"lin", "output_type"=>"1", "file_type"=>"xml", "order_by"=>"observation_date", "sort_order"=>"desc", "count"=>"2541", "offset"=>"0", "limit"=>"10", "observation"=>[{"realtime_start"=>"2013-01-10", "realtime_end"=>"9999-12-31", "date"=>"2012-12-01", "value"=>"1458.750"}, {"realtime_start"=>"2012-12-13", "realtime_end"=>"2012-12-19", "date"=>"2012-11-01", "value"=>"1435.307"}, {"realtime_start"=>"2012-12-20", "realtime_end"=>"2013-01-09", "date"=>"2012-11-01", "value"=>"1435.304"}, {"realtime_start"=>"2013-01-10", "realtime_end"=>"9999-12-31", "date"=>"2012-11-01", "value"=>"1435.303"}, {"realtime_start"=>"2012-11-01", "realtime_end"=>"2012-11-07", "date"=>"2012-10-01", "value"=>"1418.277"}, {"realtime_start"=>"2012-11-08", "realtime_end"=>"2012-11-14", "date"=>"2012-10-01", "value"=>"1418.286"}, {"realtime_start"=>"2012-11-15", "realtime_end"=>"2012-11-22", "date"=>"2012-10-01", "value"=>"1418.285"}, {"realtime_start"=>"2012-11-23", "realtime_end"=>"2012-11-28", "date"=>"2012-10-01", "value"=>"1418.284"}, {"realtime_start"=>"2012-11-29", "realtime_end"=>"9999-12-31", "date"=>"2012-10-01", "value"=>"1418.274"}, {"realtime_start"=>"2012-10-04", "realtime_end"=>"2012-10-10", "date"=>"2012-09-01", "value"=>"1409.636"}]}} 
```

...我想显示：

```
{
"observations": {
    "realtime_start": "1776-07-04",
    "realtime_end": "9999-12-31",
    "observation_start": "1776-07-04",
    "observation_end": "9999-12-31",
    "units": "lin",
    "output_type": "1",
    "file_type": "xml",
    "order_by": "observation_date",
    "sort_order": "desc",
    "count": "2541",
    "offset": "0",
    "limit": "10",
    "observation": [{
        "realtime_start": "2013-01-10",
        "realtime_end": "9999-12-31",
        "date": "2012-12-01",
        "value": "1458.750"
    }, {
        "realtime_start": "2012-12-13",
        "realtime_end": "2012-12-19",
        "date": "2012-11-01",
        "value": "1435.307"
    }, {
        "realtime_start": "2012-12-20",
        "realtime_end": "2013-01-09",
        "date": "2012-11-01",
        "value": "1435.304"
    }, {
        "realtime_start": "2013-01-10",
        "realtime_end": "9999-12-31",
        "date": "2012-11-01",
        "value": "1435.303"
    }, {
        "realtime_start": "2012-11-01",
        "realtime_end": "2012-11-07",
        "date": "2012-10-01",
        "value": "1418.277"
    }, {
        "realtime_start": "2012-11-08",
        "realtime_end": "2012-11-14",
        "date": "2012-10-01",
        "value": "1418.286"
    }, {
        "realtime_start": "2012-11-15",
        "realtime_end": "2012-11-22",
        "date": "2012-10-01",
        "value": "1418.285"
    }, {
        "realtime_start": "2012-11-23",
        "realtime_end": "2012-11-28",
        "date": "2012-10-01",
        "value": "1418.284"
    }, {
        "realtime_start": "2012-11-29",
        "realtime_end": "9999-12-31",
        "date": "2012-10-01",
        "value": "1418.274"
    }, {
        "realtime_start": "2012-10-04",
        "realtime_end": "2012-10-10",
        "date": "2012-09-01",
        "value": "1409.636"
    }]
} 
```

}

当我分配一个变量@beautifiedJson = JSON.pretty_generate(parseHolder) 时，parseHolder 是 json 对象，然后通过以下方式将@beautifiedJson 放在我的视图中：

```
 <%= @beautifiedJson %> 
```

……景色没有美化。当我查看页面源时，json 被格式化（正确的缩进和行），但是，在视图中正确显示的必要 html 格式没有到位。

我的问题是我是正确使用 rails JSON 方法还是需要另一种方法来完成格式化？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T16:57:08.163

采用：

```
<pre>
    <%= @beautifiedJson %>
</pre> 
```

如果您查看原始代码生成的*页面源*代码，您会发现它已被美化，但浏览器忽略了`JSON.pretty_generate(parseHolder)`正在添加的换行符和制表符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T16:49:19.407

所以答案只是：

```
<pre><%= @beautifiedJson %></pre> 
```

# python - 如何在python中搜索和替换文本文件的多个值？

> ID：14426388
> 
> 赞同：0
> 
> 时间：2013-01-20T16:08:59.250
> 
> 标签：python, replace

我的数据：

```
1 255 59 0 1 255 0 1 1 0 4 0 5 

0 1 255 1 253 0 90 1 1 0 2 0 233 
```

我是 python 新手，我需要通过使用条件替换文本文件中的所有值：

1.  如果行中的值 = 255，则替换为 1

2.  如果行中的值 < 255 (254, 253, 252...)，则替换为 0

所以，我的目标数据是：

```
1 1 0 0 1 1 0 1 1 0 0 0 0 

0 1 1 1 0 0 0 1 1 0 0 0 0 
```

我怎么解决这个问题？

实际上，我试图修复它，但不适用于我的数据。

这是我的代码：

```
f1 = open('20130103.txt','r')
f2 = open('20130103_2.txt','w')
count = 255
for line in f1:
    line = line.replace('255','1')
    count = count-1
    line = line.replace('%d'%(count), '0')
    f2.write(line)
f1.close()
f2.close() 
```

结果是：

```
1 1 59 0 1 1 0 1 1 0 4 0 5 
0 1 1 1 0 0 90 1 1 0 2 0 233 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:42:14.757

这里引人注目的是数字`255`，你想显示`1`它，这清楚地表明，你只对`8th bi`t 感兴趣。唯一看起来很奇怪的情况是您的 o/p 不符合您的要求，`1`在这种情况下不进行操作，您必须将其排除在转换之外

如果我必须相信你的要求

```
>>> with open("test.in") as fin, open("test.out","w") as fout:
    for line in fin:
        line = (e >> 7 for e in map(int, line.split()))
        fout.write(''.join(map(str, line)))
        fout.write('\n') 
```

如果我必须相信你的数据

```
>>> with open("test.in") as fin, open("test.out","w") as fout:
    for line in fin:
        line = (e >> 7 if e != 1  else 1 for e in map(int, line.split()))
        fout.write(''.join(map(str, line)))
        fout.write('\n') 
```

这个问题的另一种观点。

```
>>> with open("test.in") as fin, open("test.out","w") as fout:
    for line in fin:
        line = (e / 255 if e != 1  else 1 for e in map(int, line.split()))
        fout.write(''.join(map(str, line)))
        fout.write('\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:12:56.297

你可以这样做：

```
with open('20130103.txt', 'r') as f1, open('20130103_2.txt', 'w') as f2:
    for line in f1:
        values = line.split()
        new_values = ' '.join('1' if value == '255' else '0' for value in values)

        f2.write(new_values + '\n') 
```

*   `line.split()`将行分割成块。`'a b'.split() == ['a', 'b']`
*   `'1' if value == '255' else '0' for value in values`是一个仅输出`'1'`或的生成器`'0'`，具体取决于值列表中某个项目的值。
*   `' '.join()`用空格将列表（或生成器，在这种情况下）中的值连接在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:26:02.327

这是一个示例，说明如何传递`re.sub`一个函数（而不是替换字符串）来真正控制替换的完成方式：

```
import re
lines = ['1 255 59 0 1 255 0 1 1 0 4 0 5',
     '0 1 255 1 253 0 90 1 1 0 2 0 233']
def do_replace(match):
    number = int(match.group(0))
    if number == 0 or number == 1:
        return str(number)
    elif number == 255:
        return '1'
    elif number < 255:
        return '0'
    else:
        raise ValueError
for line in lines:
    print re.sub(r'\d+', do_replace, line) 
```

印刷：

```
1 1 0 0 1 1 0 1 1 0 0 0 0
0 1 1 1 0 0 0 1 1 0 0 0 0 
```

# php - 无法在 Win8 上远程调试 php5.4

> ID：14426392
> 
> 赞同：0
> 
> 时间：2013-01-20T16:09:13.513
> 
> 标签：php, windows-8, xdebug, phpstorm

我正在尝试使用 phpStorm 4.0.3 远程调试 php 5.4.4，但失败了。奇怪的是，我可以在 Phpstorm 中正常调试本地 PHP 代码。

我正在使用 Xdebug v2.2.0 并且我的操作系统是 Windows 8，这是我认为无法调试的主要原因。因为我可以在 Windows Server 2003 上使用相同的配置进行操作。

这是我的配置`php.ini`：

```
[xdebug]
zend_extension="D:/apachePHP/PHP/ext/php_xdebug.dll"

xdebug.remote_enable   = On
xdebug.remote_host     = "localhost"
xdebug.remote_port     = 9000
xdebug.remote_handler  = "dbgp"
xdebug.auto_trace = 1
xdebug.collect_includes = 1
xdebug.collect_params = 1
xdebug.collect_return = 1
xdebug.default_enable = 1
xdebug.collect_assignments = 1
xdebug.collect_vars = 1
xdebug.remote_autostart = 1
xdebug.remote_connect_back = 1
xdebug.show_exception_trace = 1
xdebug.show_local_vars = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:13:09.137

我将 phpStorm 与 windows 8 + wampserver 32 位（也适用于 64 位）一起使用，它可以工作，但我必须在以下位置更新 xedebug.dll：http: [//xdebug.org/download.php](http://xdebug.org/download.php)

您可能还需要在浏览器中开始调试会话，有用的 chrome 扩展：[xdebug helper](https://chrome.google.com/webstore/detail/xdebug-helper/eadndfjplgieldjbigjakmdgkmoaaaoc)

可能有很多原因，但可能是其中之一。

# mongodb - Mongo：更新 Mongo DB 行时遇到问题

> ID：14426397
> 
> 赞同：2
> 
> 时间：2013-01-20T16:09:49.080
> 
> 标签：mongodb

我正在尝试更新 Mongo DB 中的一行。我有一个名为 users 的集合

```
db.users.find()

{ "_id" : ObjectId("50e2efe968caee13be412413"), "username" : "sss", "age" : 32 } 
```

**我正在尝试使用用户名 Erinamodobo 更新该行并将年龄修改为 55**

我尝试了以下方法，但它不起作用。

```
db.users.update({ "_id": "50e2efe968caee13be412413" }, { $set: { "username": "Erinamodobo" } }); 
```

请让我知道我在哪里犯了错误？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:32:45.147

如果您使用的是 mongo shell，则将 _id 作为 ObjectId 传递，否则，它将找不到现有用户。

```
db.users.update({"_id": ObjectId("50e2efe968caee13be412413")},
     { "$set" :
          { "username": "Erinamodobo", "age" : "55" }}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:25:02.443

使用此查询，您将更新名称本身。

请注意，更新的语法如下：

```
 db.COLLECTION.update( {query}, {update}, {options} ) 
```

where`query`选择要更新的记录并`update`指定要更新的字段的值。

因此，在您的情况下，正确的命令是：

```
 db.users.update({ "name": "Erinamodobo" }, { $set: { "age": 55 } }); 
```

但是，我建议您阅读 mongodb 文档，写得很好（[http://docs.mongodb.org/manual/applications/update/](http://docs.mongodb.org/manual/applications/update/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:37:53.487

作为@WiredPrairie 的扩展，尽管他陈述了正确的答案，但他并没有真正解释。

The`OjbectId`不是字符串，实际上是一个`Object`这样的搜索方式，`Object`您必须提供`Ojbect`相同类型的 an ，即这里的 an `ObjectId`：

```
db.users.update({ "_id": ObjectId("50e2efe968caee13be412413") }, { $set: { "username": "Erinamodobo" } }); 
```

对于您使用的任何特定 BSON 类型也是如此，`Date`您`NumberLong`需要将参数包装在`Object`类型的 s 中。

# mysql - 临时表在 PHPMyAdmin 中不起作用

> ID：14426401
> 
> 赞同：5
> 
> 时间：2013-01-20T16:10:17.077
> 
> 标签：mysql, temp-tables

我运行这个查询

```
CREATE TEMPORARY TABLE usercount SELECT * FROM users 
```

我收到这条消息

```
Your SQL query has been executed successfully ( Query took 0.1471 sec ) 
```

但是当我尝试使用访问新创建的表时

```
SELECT * FROM usercount 
```

我收到这个错误

```
#1146 - Table 'abc_site.usercount' doesn't exist 
```

不知道为什么，我需要提一下，我事先做了很多谷歌搜索。

我的 PHPMyAdmin 版本是 3.5.2.2 和 MySQL 5.5.27

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T16:43:41.843

PHPMyAdmin（或者更确切地说是 PHP）在每个屏幕后关闭数据库连接。因此，您的临时表消失了。

PHPMyAdmin的SQL查询框中可以放多条SQL语句；这应该作为一个块执行，因此不会删除临时表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T19:22:33.793

临时表是临时表，使用后删除。例如，当向数据库插入数据时，首先我们可以插入临时表，因此当完成事务时，再插入主表。

```
EXAMPLE :
//------------------------------------------
CREATE TEMPORARY TABLE TEMP
(
USERNAME VARCHAR(50) NOT NULL,
PASSWORD VARCHAR(50) NOT NULL,
EMAIL varchar(100),
TYPE_USER INT
);
INSERT INTO TEMP VALUES('A','A','A','1');
SELECT * FROM TEMP
//-----------------------------------------
Show A,A,A,1 
```

# c#-4.0 - 向我的项目添加 .dll 外部文件引用不起作用

> ID：14426402
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:10:32.243
> 
> 标签：c#-4.0, visual-studio-2012, windows-forms-designer

我正在尝试向我的 Windows 窗体项目添加外部引用。我从 CodeProject.com 下载的另一个项目中有一个名为“ExtendedRichTextBox.dll”的文件

我通过从“添加引用”对话框中浏览它来添加它，并再次通过将文件复制到我的项目的调试文件夹并从扩展中添加引用来添加它。

无论哪种方式，引用的正确功能都不起作用。（我在指令 usings 中添加了“使用 ExtendedRichTextBox”）

帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:29:49.180

是的，谢谢。我设法处理了它的问题，因为我正在使用的richtextbox被声明为this.richTextBox1 = new System.Windows.Forms.richtextbox，它应该被声明为extendedrichtextbox扩展：应该做的是声明“ this.richTextBox1 = new ExtendedRichTextBox.RichTextBoxPrintCtrl();"

# c# - 如何传递有时为空的参数？

> ID：14426403
> 
> 赞同：0
> 
> 时间：2013-01-20T16:10:47.263
> 
> 标签：c#, geolocation, coordinates, windows-phone-8, nullreferenceexception

在此事件处理程序中：

```
 public static void geolocator_PositionChanged(Geolocator sender, PositionChangedEventArgs args)
        {
            DateTimeOffset timeStampUTC = args.Position.Coordinate.Timestamp.ToUniversalTime();
            DateTimeOffset timeStampLocal = timeStampUTC.LocalDateTime;
            DateTimeOffset dateTimeStampUTC = timeStampUTC.DateTime;
            RecordLocation(args.Position.Coordinate.Latitude, args.Position.Coordinate.Longitude,    
            args.Position.CivicAddress.City, args.Position.CivicAddress.State, dateTimeStampUTC, timeStampLocal);
        } 
```

...我得到一个`Null Reference Exception`因为`args.Position.CivicAddress`是`null`（传递给的其余参数`RecordLocation()`是有效的）。我认为有时 Position 会`null`，有时不会。我该怎么做才能让找不到城市或州的时代有增无减？我试图使`RecordLocation()`'s 定义中的那些字符串可以为空，但这不会编译。

我是否需要检查 CivicAddress 是否为 null 并创建我的`RecordLocation()`方法的重载版本，还是有其他方法来处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T16:12:54.080

> 我该怎么做才能让找不到城市或州的时代有增无减？

你只需要检查一下。例如：

```
if (args.Position != null && args.Position.CivicAddress != null)
{
    // Now you can use args.Position.CivicAddress.State safely
} 
```

如果你想用 做很多事情`args.Position`，你很可能想要一个“外部” if 语句 - 很可能使用局部变量来简化事情：

```
var position = args.Position;
if (position != null)
{
    if (position.CivicAddress != null)
    {
        // Use properties of position.CivicAddress
    }
    // Assuming Coordinate is nullable to start with, of course...
    if (position.Coordinate != null)
    {
        // ...
    }
} 
```

# java - 服务器上的 SQLITE 管理器

> ID：14426406
> 
> 赞同：0
> 
> 时间：2013-01-20T16:11:02.013
> 
> 标签：java, database, sqlite, sqlitemanager

我想知道是否可以将 SQLITE 管理器数据库放到服务器上？我的意思是，当我在一个 java 项目中完成我的程序并为该项目制作安装程序时。任何从运行在任何操作系统上且具有管理权限的计算机下载它的人都可以访问数据库而不会出现连接问题。此外，任何登录到程序的人都可以通过完整的数据库连接来登录。

有没有办法做到这一点？我也不希望要安装程序的用户为数据库安装任何其他程序。此外，我希望该程序可以在任何可能没有在 firefox 网络浏览器上安装 SQLITEManager 插件或什至在该计算机上安装 firefox 的计算机上运行。

我还希望管理员能够在数据库应该位于的在线服务器上编辑任何内容。如果这在 SQLITE 管理器上是不可能的，你能推荐一个可以做到这一点但也可以使用和处理已经为 sqlite 程序制作的代码的数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:19:49.910

SQLite 数据库只是平面文件。通俗地说，这意味着什么：

*   我将您的数据库下载为文件。
*   我可以随意修改。
*   我不会被迫同步到新版本的平面文件。

您有一个选择：您要么编写代码以强制将 SQLite 平面文件定期同步到客户端，要么在服务器上使用专用 DBMS，例如[MySQL](http://www.mysql.com/)，并强制客户端连接到该数据库。

# mongodb - 将 MongoDB 作为守护进程启动，无需写入日志

> ID：14426408
> 
> 赞同：4
> 
> 时间：2013-01-20T16:11:17.047
> 
> 标签：mongodb

是否有远程（ssh）方式来模拟：

```
mongod --fork --logpath /var/log/mongodb.log 
```

没有记录部分？如果我省略 logpath mongod 会抱怨。

我让它在 RaspberryPi 上运行，我想关闭注销以最大限度地延长 SD 卡的使用寿命。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T17:21:00.780

将日志记录重定向到`/dev/null`文件而不是文件：

```
mongod --fork --logpath /dev/null 
```

# c++ - 使用着色器在 OpenGL 中绘制精灵表的技术

> ID：14426412
> 
> 赞同：3
> 
> 时间：2013-01-20T16:11:36.037
> 
> 标签：c++, opengl, sprite-sheet

我现在正在学习 OpenGL，我想从精灵表中将一些精灵绘制到屏幕上。我注意到我是否以正确的方式这样做。

我想做的是用泰拉瑞亚的瓷砖建造一个世界。这意味着构建我的世界的所有图块都是 1x1，但我以后可能想要一些东西，比如 2x1、1x2、2x2 等实体。

我现在要做的是，我有一个名为“Tile”的类，其中包含 tile 的变换矩阵和指向其缓冲区的指针。非常简单：

```
Tile::Tile(glm::vec2 position, GLuint* vbo)
{
    transformMatrix = glm::translate(transformMatrix, glm::vec3(position, 0.0f));
    buffer = vbo;
} 
```

然后，当我绘制瓷砖时，我只需绑定缓冲区并更新着色器的 UV 坐标和顶点位置。之后，我将图块的变换矩阵传递给着色器并使用 glDrawElements 绘制它：

```
glEnableVertexAttribArray(positionAttrib);
glEnableVertexAttribArray(textureAttrib);

for(int i = 0; i < 5; i++) 
{
    glBindBuffer(GL_ARRAY_BUFFER, *tiles[i].buffer);

    glVertexAttribPointer(positionAttrib, 2, GL_FLOAT, GL_FALSE, 4 * sizeof(GLfloat), 0);
    glVertexAttribPointer(textureAttrib, 2, GL_FLOAT, GL_FALSE, 4 * sizeof(GLfloat), (void*)(2 * sizeof(GLfloat)));

    glUniformMatrix4fv(transformMatrixLoc, 1, GL_FALSE, value_ptr(tiles[i].transformMatrix));
    glDrawElements(GL_TRIANGLE_STRIP, 4, GL_UNSIGNED_INT, 0);
}

glDisableVertexAttribArray(positionAttrib);
glDisableVertexAttribArray(textureAttrib); 
```

我能更有效地做到这一点吗？我在想我可以有一个用于 1x1 瓦片的缓冲区，一个用于 2x1 瓦片等的缓冲区，然后让 Tile 类包含 UVpos 和 UVsize，然后将它们发送到着色器，但我不确定我是如何会那样做。

我认为我用一个用于 1x1 的缓冲区和一个用于 2x1 的缓冲区所描述的听起来会快很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:00:00.777

> 我能更有效地做到这一点吗？

我认为你不能*降低*效率。您正在为每个四边形绑定整个缓冲区对象。然后，您正在上传一个矩阵。对于*每个四边形。*

tilemap 绘制（并且只有*map*，而不是实体）通常工作的方式是您构建一个包含可见屏幕图块的某些部分的缓冲区对象。空白空间呈现为透明瓷砖。然后，您可以在一次绘图调用中渲染屏幕该区域的*所有*图块。您为该区域中的所有图块提供一个矩阵。

通常，您将拥有一些这样的可见区域，以便在该区域更改时轻松更新该区域的图块。屏幕外的区域被重新用于屏幕上的区域，因此您可以用新的平铺数据填充它们。

# php - 如何在php中将table1中的数据插入到表2中

> ID：14426413
> 
> 赞同：1
> 
> 时间：2013-01-20T16:11:41.510
> 
> 标签：php, mysql, sql, database

我想做一个排名。

# 表格1

*   ID
*   姓名
*   经验点
*   等级。

# 表2

*   等级
*   经验点。

我想通过表格将数据收集到 Table1 中。现在，每个人都要写XP和LvL。

如果他们发布XP会更好，并且LvL自动来自Table2。

我用这个将数据插入表中：

```
$mysql ="INSERT INTO $table (id, name, xp, lvl) VALUES ('$id','$name','$xp','$lvl')"; 
```

并用这个选择lvl：

```
$query="select id from table2 where $lvl>=$xp LIMIT 0 , 1"; 
```

但是我怎样才能加入选择，并将其放入插入中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:14:50.617

使用`INSERT...INTO SELECT`声明

```
INSERT  INTO table1 (ID, Name, ExperiencePoint, Lvl)
SELECT  '$id' AS ID, '$name' AS Name, 
        '$xp' AS ExperiencePoint, Lvl
FROM    table2
WHERE   ExperiencePoint = '$xp' 
```

* * *

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用 PreparedStatements，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# javascript - 添加错误显示

> ID：14426416
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:11:49.873
> 
> 标签：javascript

修复了我的代码。但是，现在弹出警报说您的值是 NaN。然而，它是一个数字。parseInt 有点帮助。我很可能错过了一些东西。现在我的代码如下所示：

```
 <input id="a" type="text">

    <script>
        function myFunction()
            {
                x=document.getElementById("a").value;
                if(x==""||isNaN(x))
                    {
                        alert("Your First Number is Not Numeric");
                    }
                a=document.getElementById("a").value;   
            }
    </script>   

    <button type="button" onclick="myFunction()">Submit Number</button>
    <br />
    <p>Second Number</p>
    <br />
    <input id="b" type="text">
    <script>
        function myFunction1()
            {
                x=document.getElementById("b").value;
                if(x==""||isNaN(x))
                    {
                        alert("Your Second Number is Not Numeric");
                    }
                b=document.getElementById("b").value;
            }
    </script>

    <button type="button" onclick="myFunction1()">Submit Number</button>
    <br />
    <script>
        function add()
            {
                d=parseInt(a);
                e=parseInt("b");
                c=d+e;
                alert("The number is " + c);
            }
    </script>
    <button type="button" onclick="add()">Add numbers</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:16:26.750

输入值*是*字符串。`parseInt`在您尝试添加它们之前，使用或其他将它们转换为数字的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:17:07.907

看起来你确实有字符串而不是整数。您可以`parseInt`在添加它们之前将它们转换为整数。

这里有更多信息：http: [//www.w3schools.com/jsref/jsref_parseint.asp](http://www.w3schools.com/jsref/jsref_parseint.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:17:57.193

输入的值是字符串，而不是数字。在添加它们之前，您需要使用`parseInt()`或`parseFloat()`将您的字符串转换为数字。

# cloud-foundry - 云代存储

> ID：14426418
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:12:01.560
> 
> 标签：cloud-foundry

Je suis en train de developper une application d'upload et download des fichiers sur cloud Foundry cependant je sais pas comment accéder à la partie stockage des fichiers afin de les récupérer pour faire 下载

> 我正在开发云代工厂上的应用程序上传和下载文件，但是我不知道如何访问文件存储以恢复下载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:22:52.147

如果将文件存储在 CF 中的本地文件系统上，则会出现几个问题。尽管文件可以由应用程序的每个实例写入，但它们对应用程序的其他实例不可见。而且它们不会在应用程序实例本身的生命周期内存活（将完全消失，例如，当您的应用程序重新启动时），因此应该被视为短暂的。

目前，其他选项是将文件存储为 CF 提供的服务（例如 MySQL 或 MongoDB）中的 blob，然后从应用程序中检索它们。或者，由于您确实拥有出站端口 80 和 443 访问权限，CF.com 外部但可访问的服务也是一种选择。

并希望谷歌翻译对你有用。

> Il ya plusieurs problèmes si vous stockez des fichiers sur le système de fichiers local au sein des FC。Bien que les fichiers peuvent être écrits par chaque instance d'une application, ils ne seront pas visibles par les autres instances de l'application。Et ils ne survivront pas la durée de vie de l'instance de l'application elle-même (sera totalement disparu, par exemple, lorsque votre application est redémarrée), et devrait donc être traitée comme éphémère。
> 
> Pour l'instant, les autres options sont soit de stocker des fichiers comme des gouttes dans un service dans les FC provisionné (par exemple, MySQL ou MongoDB), puis de les récupérer à partir de l'application。Ou depuis que vous avez ne port sortant 80 et 443 accès, les services qui sont externes à CF.com mais sont accesss sont également une option。
> 
> Et espérons que la traduction google fonctionne pour vous。

# javascript - 扩展jquery自动完成：从文本输入中选择部分字符串

> ID：14426422
> 
> 赞同：0
> 
> 时间：2013-01-20T16:12:19.043
> 
> 标签：javascript, jquery, jquery-autocomplete

HTML

```
<input type='text' id='searchable'value='hello world' />
<input type='hidden' id=x value='hel' /> 
```

我如何从#searchable 中选择文本，从隐藏输入值的末尾到#searchable 的末尾？

**已修复 谢谢大家**

```
 $('input.complete').live('keyup.autocomplete', function(){
        var hi=$(this).val().toUpperCase();
        var was=this;//PROBlEM was here... was=$(this)
            $(this).autocomplete({
                source: function(request, response) {
                        $.ajax({ url: '<?=base_url()?>ajax/ac',
                        data: { 'term': this.term,'page': 'clinic','key': this.element.attr('data-complete')},
                        dataType: "json",
                        type: "POST",
                        success: function(data){
                            if(!data.length){
                                var result = [{label: 'No match found',value: response.term}];
                                response(result);
                            }else{
                                response(data);
                                $(was).val(data[0]['value']);
                                was.selectionStart=hi.length;
                                was.selectionEnd=data[0]['value'].length;
                            }
                        }
                    });
                },
                select: function(event, ui){},
                minLength: 2,
            });
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:19:40.573

试试这个

```
(function() {
    var search = $('#searchable')[0],
        searchvalue = search.value,
        xtext = $('#x').val(),
        startAt = searchvalue.indexOf(xtext) + xtext.length;
    search.selectionStart = startAt;
    search.selectionEnd = searchvalue.length;
}()); 
```

[**现场演示**](http://jsfiddle.net/qK6pq/3/show/)

如果`x`值总是从搜索值的第一个字符开始匹配，则`searchvalue.indexOf(xtext)`它是多余的，因为它总是会返回`0`并且可以安全地删除。

### 参考：

*   多托罗：[`selectionStart`](http://help.dottoro.com/ljtfkhio.php)，[`selectionEnd`](http://help.dottoro.com/ljxjdqwh.php)
*   MSDN [`selectionStart`](http://msdn.microsoft.com/en-us/library/ie/ff974768%28v=vs.85%29.aspx)：，[`selectionEnd`](http://msdn.microsoft.com/en-us/library/ie/ff974767%28v=vs.85%29.aspx)
*   MDN：[`HTMLInputElement`属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement#Properties)

注意：作为HTML5`selectionStart`的`selectionEnd`一部分，不支持 IE < 9。如果您要推出自己的预输入，如果您打算支持旧的 IE，我建议在应用文本输入元素中的自动完成之前对这些进行功能测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:18:34.067

给你...在 Firefox 和 Chrome 中测试...

这将从隐藏值到字符串的末尾突出显示：

```
$("#searchable")[0].selectionStart = $("#x").val().length;
$("#searchable")[0].selectionEnd = $("#searchable").val().length; 
```

*这将从开始到隐藏值突出显示：*

```
var s = $("#x").val();

$("#searchable")[0].selectionStart = 0;
$("#searchable")[0].selectionEnd = s.length; 
```

# linux - 进程区域表&全局描述符&虚拟地址

> ID：14426435
> 
> 赞同：0
> 
> 时间：2013-01-20T16:13:48.993
> 
> 标签：linux, virtual-address-space

我正在阅读这里的培训机构之一的 linux 笔记。根据这一点，每当创建一个进程时，就会为其分配一个区域。区域包含进程的所有段。

区域也由区域表指定。区域表包含以下条目；--
虚拟地址到 - 物理地址指针 + 磁盘块描述符

磁盘块描述符指向磁盘上的交换或 exe 文件。

我有两个问题:-----

1> Global & Local Descriptor 角色在哪里。

[http://www.google.co.in/imgres?um=1&hl=en&sa=N&tbo=d&biw=1366&bih=677&tbm=isch&tbnid=GSUGxm8x4QWQ1M:&imgrefurl=http://iakovlev.org/index.html%3Fp%3D945&docid= 8Y36SIxwT17J6M&imgurl=http://iakovlev.org/images/intel/31.jpg&w=1534&h=1074&ei=oBX8UKuwBoHsrAer8YHQAw&zoom=1&iact=hc&vpx=79&vpy=377&dur=609&hovh=188&hovw=268&tx=150&ty=107&sig=103468883298920883665&page=1&tbnh=155&tbnw=221&start= 0&ndsp=27&ved=1t:429,r:14,s:0,i:124](http://www.google.co.in/imgres?um=1&hl=en&sa=N&tbo=d&biw=1366&bih=677&tbm=isch&tbnid=GSUGxm8x4QWQ1M:&imgrefurl=http://iakovlev.org/index.html%3Fp%3D945&docid=8Y36SIxwT17J6M&imgurl=http://iakovlev.org/images/intel/31.jpg&w=1534&h=1074&ei=oBX8UKuwBoHsrAer8YHQAw&zoom=1&iact=hc&vpx=79&vpy=377&dur=609&hovh=188&hovw=268&tx=150&ty=107&sig=103468883298920883665&page=1&tbnh=155&tbnw=221&start=0&ndsp=27&ved=1t:429,r:14,s:0,i:124)

2> 每个进程都有自己的全局描述符表吗？我认为是的，否则两个进程的虚拟地址将指向相同的物理地址。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:45:04.053

1) 全局描述符表给出线性地址的基地址。它几乎总是零，并且“限制”设置得太“全1”（即所有可寻址内存）。实际上，实际上并未使用段选择器。该架构要求它们存在并加载，但它们“可用于”的实际效果并未在 Linux 中使用。

本地描述符表的工作方式完全相同，只是每个进程都有一个 LDT。通常它保存任务的堆栈段——它的基地址仍然为零。进程可以修改LDT，不能修改GDT。

要判断该段是 GDT 还是 LDT，请查看第 3 位（值 8 的那个） - 例如，在我的系统`ss`中有 value `0x2b`，所以它设置了第 3 位。`cs`另一方面是`33`，所以它没有设置第 3 位，因此从 GDT 中出来。

2) 不。有一个 GDT（准确地说，每个 CPU 内核）——这就是它被称为“全局”的原因——所有事物都有一个。这也是堆栈段位于 LDT 中的原因，因为每个进程都有一个。

# html - 玉到 HTML 转换器

> ID：14426436
> 
> 赞同：36
> 
> 时间：2013-01-20T16:13:56.313
> 
> 标签：html, converter, pug

我已经开始使用 nodejs 和jade 编写应用程序，但过了一段时间我的团队决定切换到 Django。我仍然想使用使用jade编写的网页，而不必手动重新编写它们。

有谁知道将玉代码转换为html的工具？据我所知，大多数涉及玉的工具都集中在相反的转换上。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-20T16:20:20.717

Jade 应该带有一个命令行实用程序来执行此操作。

见这里[https://github.com/visionmedia/jade#jade1](https://github.com/visionmedia/jade#jade1)

或者在上面查看运行它的生成文件。

-

编辑 - 似乎 Jade 被重命名为 Pug - 见[https://github.com/pugjs/pug/issues/2184](https://github.com/pugjs/pug/issues/2184)

但答案仍然存在 - Pug 带有一个命令行工具 - 安装它`npm install pug-cli -g`

然后你可以运行`pug my_template.pug` 它会产生 my_template.html

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-20T03:57:12.387

如果你想要在线的东西。你可以试试[http://naltatis.github.io/jade-syntax-docs/](http://naltatis.github.io/jade-syntax-docs/)或[http://jade-lang.com/demo/](http://jade-lang.com/demo/)

# iis - IIS 6 中的其他网站

> ID：14426438
> 
> 赞同：0
> 
> 时间：2013-01-20T16:14:05.970
> 
> 标签：iis, web-applications, iis-6

管理 IIS 相当新。

我们有一个运行 IIS 6（无 ssl）的 Windows 2003 服务器。用户构建的应用程序之一是用于 droid 手机，它们只需要 SSL 连接。客户购买了 ssl 证书，并希望每个调用该网站的用户都被迫使用 SSL 连接。

问题：我是否必须创建一个默认网站的副本站点，并应用此 SSL 并将其设置为只有端口 443 才能访问它？

或者，有没有更简单的方法来解决这个问题？

有人告诉我，将 SSL 证书应用于现有的默认网站将不起作用，因为如果您这样做，并强制所有连接到端口 443，内部用户将失败。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:20:56.577

如果我需要在 IIS 上运行多个站点，我通常只是在默认网站下创建额外的子网站——它工作得很好，我相信你应该能够为它设置 ssl。

在 IIS7 上（不确定 IIS6 是否可以）以及我经常创建多个顶级站点，并将它们映射到不同的 FQDN。您还可以使用相同的 FQDN 将它们映射到不同的端口，但这显然不太理想。

# .htaccess - 禁用通过主域访问插件域

> ID：14426441
> 
> 赞同：1
> 
> 时间：2013-01-20T16:14:43.813
> 
> 标签：.htaccess, subdomain, cpanel, addon-domain

我的主网站上有 10 个插件域，您可以通过 atm 访问任何插件（称为 test1.com）网站，链接为 test1.mainwebsite.com 或 www.mainwebsite.com/test1

如何阻止对插件的访问？

我试过这个，但是这个块只有 www.mainwebsite.com/test1 的方式。

```
 RewriteEngine On
    RewriteCond %{HTTP_HOST} ^(www.)?mainwebsite.com$ [NC]
    RewriteCond %{REQUEST_URI} ^/google.com/(.*)$ [OR]
    RewriteCond %{REQUEST_URI} ^/something.net/(.*)$ 
    RewriteRule ^(.*)$ - [L,R=404] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-26T08:58:16.703

禁用对子域的访问

以下是一个示例“.htaccess”代码，它提供了一种彻底的方法，通过强制“404 Not Found”错误使插件域文件夹及其内容在主域中不可见。这适用于网络浏览器和搜索引擎：

```
RewriteEngine On
        RewriteCond %{HTTP_HOST} ^(www.)?domain.com$ [NC]
        RewriteCond %{REQUEST_URI} ^/addonfolder/(.*)$
        RewriteRule ^(.*)$ - [L,R=404] 
```

# c# - 如何获取辅助屏幕的图像并将其放入主屏幕的窗口中？

> ID：14426448
> 
> 赞同：0
> 
> 时间：2013-01-20T16:15:35.860
> 
> 标签：c#, .net, wpf, screen-capture, imagesource

我想复制辅助屏幕的桌面图像并将其放入主屏幕上的窗口中（使用 C# 和 WPF）。

我正在考虑使用`Drawing.CopyFromScreen`但那是 WinForm 技术，我想看看是否可以只使用 WPF。

如果我想连续捕捉这张图片，那么快速执行此操作的方法是什么？

我可以`ImageSource`以某种方式为屏幕图像创建一个吗？

此外，如果使用此方法未捕获鼠标指针，我想将其绘制到此图像中，这样我就可以看到指针在辅助屏幕上的位置，而无需实际看到屏幕。

仅适用于 Windows 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:40:09.347

我认为[这篇文章](http://10rem.net/blog/2011/02/08/capturing-screen-images-in-wpf-using-gdi-win32-and-a-little-wpf-interop-help)正是你所需要的。它描述了如何截取屏幕并从中创建 BitmapSource（继承自 ImageSource）。

# php - 文件上传后如何显示隐藏的输入值

> ID：14426458
> 
> 赞同：0
> 
> 时间：2013-01-20T16:16:59.300
> 
> 标签：php, javascript, jquery, html, ajax

```
 var $fileVideo = $("<form action='videoupload.php' method='post' enctype='multipart/form-data' target='upload_target_video' onsubmit='return videoClickHandler(this);' class='videouploadform' >" + 
    "Video File: <input name='fileVideo' type='file' class='fileVideo' /></label>" +  
    "<input type='submit' name='submitVideoBtn' class='sbtnvideo' value='Upload' /></label>" + 
     "<p class='listVideo' align='left'></p>" +
    "<iframe class='upload_target_video' name='upload_target_video' src='/' style='width:0px;height:0px;border:0px;solid;#fff;'></iframe></form>"); 
```

现在下面我有一个 jquery 代码，当文件完成上传时触发。

```
 function htmlEncode(value) { return $('<div/>').text(value).html(); }

      function stopVideoUpload(success, videofilename){

          var result = '';
          videocounter++;

          if (success == 1){
             result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
              $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename));
          }

          return true;   
    } 
```

下面是它上传文件的代码，然后使用 javascript`id`从数据库中接收文件名和文件名，并将其发布回上面的 javascript 函数以显示信息：

```
 move_uploaded_file($_FILES["fileVideo"]["tmp_name"],
      "VideoFiles/" . $_FILES["fileVideo"]["name"]);
      $result = 1;

    $videosql = "INSERT INTO Video (VideoFile) 
    VALUES (?)";

        if (!$insert = $mysqli->prepare($videosql)) {
      // Handle errors with prepare operation here
    }

    //Assign the variable
$vid = 'VideoFiles/'.$_FILES['fileVideo']['name'];

            //Dont pass data directly to bind_param store it in a variable
$insert->bind_param("s",$vid);

 $insert->execute();
 $id = $mysqli->insert_id;

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();     

        }else{
  echo "Upload was not successful";   
  }

     <script language="javascript" type="text/javascript">
     window.top.stopVideoUpload(<?php echo $result; ?>,'<?php echo $id . $_FILES['fileVideo']['name'] ?>');
     </script> 
```

因此，如果上传文件`VideoFiles/tulips.png`，那么在 db 中它看起来像这样，例如：

视频表：

```
ImageId  VideoFile
23       VideoFiles/tulips.mp4 
```

所以在上面的 javascript 函数中它显示了这个：

`23ImageFile/tulips.mp4`

我的问题是，我希望`$id`或如上例所示`23`显示为隐藏的输入值。但我的问题是如何做到这一点？

**更新：**

```
 function htmlEncode(value) { return $('<div/>').text(value).html(); }

      function stopVideoUpload(success, videofilename, videoID){

          var result = '';
          videocounter++;

          if (success == 1){
             result = '<span class="videomsg'+videocounter+'">The file was uploaded successfully</span>';
      $('.listVideo').eq(window.lastUploadVideoIndex).append('<input type="hidden" name="vidid" value="videoID" />');
              $('.listVideo').eq(window.lastUploadVideoIndex).append('<div>' + htmlEncode(videofilename));

          }

          return true;   
    } 
```

…………

```
 move_uploaded_file($_FILES["fileVideo"]["tmp_name"],
          "VideoFiles/" . $_FILES["fileVideo"]["name"]);
          $result = 1;

        $videosql = "INSERT INTO Video (VideoFile) 
        VALUES (?)";

            if (!$insert = $mysqli->prepare($videosql)) {
          // Handle errors with prepare operation here
        }

        //Assign the variable
    $vid = 'VideoFiles/'.$_FILES['fileVideo']['name'];

                //Dont pass data directly to bind_param store it in a variable
    $insert->bind_param("s",$vid);

     $insert->execute();
     $id = $mysqli->insert_id;

            if ($insert->errno) {
              // Handle query error here
            }

            $insert->close();     

            }else{
      echo "Upload was not successful";   
      }

 <script language="javascript" type="text/javascript">
 window.top.stopVideoUpload(<?php echo $result; ?>,'<?php echo $id; ?>','<?php echo $_FILES['fileVideo']['name']; ?>');
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:36:21.990

这里的“显示”是什么意思？我猜你想要的是将隐藏`<input />`字段的值设置为`"23"`. 如果我是对的，您可以更改`stopVideoUpload()`为 3 个参数：`success`、、`videofilename`和`ID`（或您想要的其他名称）。然后，附加`<input type="hidden" name="(name you want)" value="(ID you received)" />`到`$('.listVideo')`您想要的其他容器中。

如果你已经有一个隐藏字段，只需使用 jQuery 的`val()`函数来设置值 =)

[http://api.jquery.com/val/](http://api.jquery.com/val/)

# python - python中具有无限初始条件的ODE

> ID：14426470
> 
> 赞同：5
> 
> 时间：2013-01-20T16:18:07.053
> 
> 标签：python, scipy, ode

我有一个二阶微分方程，我想在 python 中求解它。问题是对于其中一个变量，我没有初始条件，`0`而只有无穷大的值。谁能告诉我应该提供哪些参数`scipy.integrate.odeint`？能解决吗？

方程： ![在此处输入图像描述](../Images/45e2ce1758fcd81fe4a93ace49e1d125.png)

需要根据时间找到 Theta。它的一阶导数在 处等于 0 `t=0`。theta 是未知的，`t=0`但它会在足够长的时间变为零。其余的都是已知的。作为一个近似值`I`可以设置为零，从而消除二阶导数，这应该会使问题更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T05:39:01.160

这远不是一个完整的答案，而是根据 OP 的要求发布在这里。

我在评论中描述的方法是所谓的[射击方法](http://en.wikipedia.org/wiki/Shooting_method)，它允许将边界值问题转换为初始值问题。为方便起见，我将把你的函数重命名`theta`为`y`. 要以数值方式求解您的方程，您首先将其转换为一阶系统，使用两个辅助函数`z1 = y`和`z2 = y'`，因此您当前的方程

```
I y'' + g y' + k y = f(y, t) 
```

将被改写为系统

```
z1' = z2
z2' = f(z1, t) - g z2 - k z1 
```

你的边界条件是

```
z1(inf) = 0
z2(0) = 0 
```

因此，首先我们设置函数来计算新向量函数的导数：

```
def deriv(z, t) :
    return np.array([z[1],
                     f(z[0], t) - g * z[1] - k * z[0]]) 
```

如果我们有一个条件，我们可以在和`z1[0] = a`之间用数字解决这个问题，并得到最后一次的值，例如`t = 0``t = 1000``y`

```
def y_at_inf(a) :
    return scipy.integrate.odeint(deriv, np.array([a, 0]),
                                  np.linspace(0, 1000, 10000))[0][-1, 0] 
```

所以现在我们需要知道的是`a`，`y = 0`我们`t = 1000`穷人的无穷大

```
a = scipy.optimize.root(y_at_inf, [1]) 
```

# java - 检测何时拖动 JSplitPane 分隔线，而不是调整组件大小

> ID：14426472
> 
> 赞同：2
> 
> 时间：2013-01-20T16:18:21.397
> 
> 标签：java, swing, jsplitpane

我想实现一个 JSplitPane （水平拆分），其中正确的组件具有恒定的宽度，即当分隔器被拖动时，它将跳回到正确的大小，除非分隔器被拖得足够远，在这种情况下，最右边的组件将具有零宽度。

为了重新显示正确的组件，用户可以将分隔线向左拖得足够远。

我大部分时间都在工作，但是当我根据更改窗口大小的大小和速度调整窗口大小时，分隔符跳转会显示或隐藏正确的组件，而我想要的是它不应该改变“状态”即，如果正确的组件不可见，那么它应该保持不可见，反之亦然。

我已经尝试了很多东西，但主要障碍是似乎无法知道用户通过鼠标拖动分隔线的天气，或者代码（我的分隔线逻辑和/或 JSplitPane 内部逻辑）是否更改了分隔线位置.

这是一个自包含的测试用例，运行它并尝试拖动水平分隔线以隐藏和显示右侧面板，并尝试调整窗口大小。

在 Mac OS X Java 1.6 (Apple) 或 Java 7 (Oracle) 上无法正常工作。使用 Oracle 的东西，渲染速度要慢得多，问题也更严重。调整窗口大小缓慢起作用，但快速改变窗口大小会导致问题。

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Rectangle;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ComponentEvent;
import java.awt.event.ComponentListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;

import net.miginfocom.swing.MigLayout;

public class SplitTest {
    public static class MySplitPane extends JSplitPane {
        boolean m_RightCollapsed;

        public MySplitPane(int orientation, JComponent left, JComponent right) {
            super(orientation, left, right);

            addPropertyChangeListener(new PropertyChangeListener() {

                @Override
                public void propertyChange(PropertyChangeEvent evt) {

                }
            });
            addComponentListener(new ComponentListener() {

                @Override
                public void componentShown(ComponentEvent e) {
                    reposDivider();
                }

                @Override
                public void componentResized(ComponentEvent e) {
                    reposDivider();
                }

                @Override
                public void componentMoved(ComponentEvent e) {
                    reposDivider();
                }

                @Override
                public void componentHidden(ComponentEvent e) {
                }
            });

        }

        public void reposDivider() {
            setDividerLocation(getDividerLocation());
        }

        public void setDividerLocation(int location) {
            int newLocation;
            m_RightCollapsed = location > getSize().width - getRightComponent().getPreferredSize().width / 2;
            if (m_RightCollapsed)
                newLocation = getSize().width;
            else
                newLocation = getSize().width - getInsets().right - getDividerSize() - getRightComponent().getPreferredSize().width;
            super.setDividerLocation(newLocation);
        }
    }
    static class MyScrollable extends JPanel implements Scrollable {
        int m_Height;

        public MyScrollable(int height) {
            m_Height = height;
        }

        @Override
        public void paint(java.awt.Graphics g) {
            super.paint(g);
            g.setColor(Color.CYAN);
            g.fillOval(0, 0, getWidth(), 500);
        }

        @Override
        public Dimension getPreferredScrollableViewportSize() {
            //return super.getPreferredSize();
            return new Dimension(100, m_Height);
        }

        @Override
        public int getScrollableUnitIncrement(Rectangle visibleRect, int orientation, int direction) {
            // TODO Auto-generated method stub
            return 10;
        }

        @Override
        public int getScrollableBlockIncrement(Rectangle visibleRect, int orientation, int direction) {
            return 20;
        }

        @Override
        public boolean getScrollableTracksViewportWidth() {
            return true;
        }

        @Override
        public boolean getScrollableTracksViewportHeight() {
            return false;
        }

    }

    public static class ShrinkGrow extends JPanel {
        public ShrinkGrow(final JComponent component, final JSplitPane split) {
            JButton grow = new JButton("+++");
            JButton shrink = new JButton("---");
            add(grow);
            add(shrink);

            grow.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Dimension oldSize = component.getPreferredSize();
                    Dimension newSize = new Dimension(oldSize.width, oldSize.height + 10);
                    component.setPreferredSize(newSize);
                    component.setSize(newSize);
                }
            });
            shrink.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Dimension oldSize = component.getPreferredSize();
                    Dimension newSize = new Dimension(oldSize.width, oldSize.height - 10);
                    component.setPreferredSize(newSize);
                    component.setSize(newSize);
                }
            });
        }
    }

    public static void main(String[] args) {
        JFrame window = new JFrame();

        JPanel mainView = new JPanel();
        JPanel top = new JPanel();
        top.setLayout(new BoxLayout(top, BoxLayout.Y_AXIS));
        JPanel bottom = new JPanel();
        bottom.setLayout(new BoxLayout(bottom, BoxLayout.Y_AXIS));

        final JSplitPane rightSplit = new JSplitPane(JSplitPane.VERTICAL_SPLIT);

        JPanel topContent = new MyScrollable(200);
        JPanel topFixed = new ShrinkGrow(topContent, rightSplit);
        topFixed.setLayout(new BoxLayout(topFixed, BoxLayout.X_AXIS));

        JScrollPane topFlexible = new JScrollPane(topContent);
        topFlexible.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
        topFlexible.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);

        JPanel bottomContent = new MyScrollable(300);
        JPanel bottomFixed = new ShrinkGrow(bottomContent, rightSplit);
        bottomFixed.setLayout(new BoxLayout(bottomFixed, BoxLayout.X_AXIS));

        JScrollPane bottomFlexible = new JScrollPane(bottomContent);
        bottomFlexible.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
        bottomFlexible.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);

        mainView.setBackground(Color.red);
        topFixed.setBackground(Color.green);
        topContent.setBackground(Color.green.darker());
        bottomFixed.setBackground(Color.blue);
        bottomContent.setBackground(Color.blue.darker());

        mainView.setMinimumSize(new Dimension(100, 100));
        mainView.setPreferredSize(new Dimension(400, 300));
        mainView.setMaximumSize(new Dimension(10000, 10000));

        topFixed.setMinimumSize(new Dimension(topFixed.getMinimumSize().width, 30));
        topFixed.setPreferredSize(new Dimension(topFixed.getPreferredSize().width, 30));
        topFixed.setMaximumSize(new Dimension(topFixed.getMaximumSize().width, 30));

        bottomFixed.setMinimumSize(new Dimension(bottomFixed.getMinimumSize().width, 40));
        bottomFixed.setPreferredSize(new Dimension(bottomFixed.getPreferredSize().width, 40));
        bottomFixed.setMaximumSize(new Dimension(bottomFixed.getMaximumSize().width, 40));

        topContent.setPreferredSize(new Dimension(100, 500));
        bottomContent.setPreferredSize(new Dimension(100, 400));

        top.add(topFixed);
        top.add(topFlexible);
        bottom.add(bottomFixed);
        bottom.add(bottomFlexible);
        rightSplit.setLeftComponent(top);
        rightSplit.setRightComponent(bottom);

        rightSplit.setMinimumSize(new Dimension(0, 0));

        final JSplitPane mainSplit = new MySplitPane(JSplitPane.HORIZONTAL_SPLIT, mainView, rightSplit);

        window.add(mainSplit);
        window.pack();
        window.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T16:28:59.197

不确定是否可以捕获`dragging`事件，但可以肯定您可以捕获`propertyChange`事件。`JSplitPane`可以通过`PropertyChangeListener`JSplitPane 类在移动 的分隔符后捕获事件。确保您提供 `DIVIDER_LOCATION_PROPERTY`作为参数，以便此侦听器将侦听修改的分隔线位置事件。如果您不将此作为方法中的第一个参数提供，则如果' 的方法作为值返回，`addPropertyChangeListener()`则始终可以放置条件语句。`PropertyChangeEvent``getPropertyName()``dividerLocation`

```
jSplitPane1.addPropertyChangeListener(JSplitPane.DIVIDER_LOCATION_PROPERTY, new PropertyChangeListener() {
@Override
public void propertyChange(PropertyChangeEvent pce) {
    // do here
}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-11T21:13:19.093

将 MouseListener 添加到 JSplitPane Divider 以检测何时拖动分隔线。拖动时，响应属性更改事件。样本：

[https://community.oracle.com/thread/1352161?start=0&tstart=0](https://community.oracle.com/thread/1352161?start=0&tstart=0)

```
SplitPaneUI spui = splitPane.getUI();
    if (spui instanceof BasicSplitPaneUI) {
      // Setting a mouse listener directly on split pane does not work, because no events are being received.
      ((BasicSplitPaneUI) spui).getDivider().addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent e) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T18:50:30.063

> ...除非分隔线被拖得足够远，在这种情况下，最右边的组件将具有零宽度。
> 
> 为了重新显示正确的组件，用户可以将分隔线向左拖得足够远。

听起来您所要做的就是禁用 splitPane 以禁用拖动，

然后 setOneTouchExpandable() 为真。您可能需要删除“可扩展”之一

按钮禁用扩展错误的方式

# python - 在系统中为用户更改 Python 中的墙纸

> ID：14426475
> 
> 赞同：2
> 
> 时间：2013-01-20T16:18:36.343
> 
> 标签：python, windows, system, ctypes, wallpaper

我想要做的是更改 Windows 中的桌面墙纸。为此，我使用以下代码：

```
import ctypes
import Image

pathToBmp = "PATH TO BMP FILE"
SPI_SETDESKWALLPAPER = 20  
ctypes.windll.user32.SystemParametersInfoA(SPI_SETDESKWALLPAPER, 0, pathToBmp , 0) 
```

这在我运行 .py 文件时有效，当我使用 py2exe 转换它并在当前用户下运行 exe 时有效，但是当我以 SYSTEM 身份运行 exe 时，当前用户背景不会改变。

这当然是意料之中的。但我不知道如何解决它。

顺便说一句，您的任何解决方案是否更改当前用户背景或所有用户的背景都没有关系。

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T06:26:24.183

如何在注册表中创建一个值键：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run 
```

这将在用户登录时更改背景。

要尝试它，请编写此脚本，例如，将其命名为`SetDesktopBackground.py`您喜欢的任何位置：

```
#!python

from ctypes import *
from os import path

SPI_SETDESKWALLPAPER = 0x14
SPIF_UPDATEINIFILE   = 0x1

lpszImage = path.join(path.dirname(path.realpath(__file__)), 'your_image.jpg')

SystemParametersInfo = windll.user32.SystemParametersInfoA

SystemParametersInfo(SPI_SETDESKWALLPAPER, 0, lpszImage, SPIF_UPDATEINIFILE) 
```

不要忘记将一些图像 ,`your_image.jpg`放在同一目录中。然后打开注册表编辑器：

```
Start > Search > type regedit.exe 
```

然后去路径：

```
HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run 
```

右键单击并选择`New > String Value`并为此值键入您喜欢的任何名称。

右键单击这个新值并选择`Modify`，在`Data Value`字段中写入：

```
"C:\Python26\pythonw.exe" "C:\Path\To\SetDesktopBackground.py" 
```

要对其进行测试，请注销并再次登录。当此用户登录时，背景应该会改变。

这是手动的方法，您可以在应用程序中使用[_winreg](http://docs.python.org/2/library/_winreg.html)在安装期间创建值：

```
#!python

from _winreg import *
from sys import executable
from os import path

subkey  = 'Software\\Microsoft\\Windows\\CurrentVersion\\Run'
script  = 'C:\\Path\\To\\SetDesktopBackground.py'
pythonw = path.join(path.dirname(executable), 'pythonw.exe')

hKey = OpenKey(HKEY_CURRENT_USER, subkey, 0, KEY_SET_VALUE)

SetValueEx(hKey, 'MyApp', 0, REG_SZ, '"{0}" "{1}"'.format(pythonw, script))

CloseKey(hKey) 
```

# android - Android NDK 构建问题 - jni flac

> ID：14426479
> 
> 赞同：1
> 
> 时间：2013-01-20T16:18:58.720
> 
> 标签：android

我已经阅读了 Android hello-jni 教程，并且能够构建它。我现在正尝试在我的工作区中运行 ndk-build。

```
=======================
MobileApp/jni/flac
$ ../../../../../android-ndk-r8d-windows/ndk/ndk-build
make: Nothing to be done for `cd'.
======================= 
```

从项目目录根目录尝试

```
=======================
MobileApp/
$ ../../../android-ndk-r8d-windows/ndk/ndk-build
make: Nothing to be done for `cd'.
======================= 
```

如果我进行谷歌搜索，我似乎看不到这些“cd”错误，只有“全部”。我正在使用cygwin。添加 jni/flac 目录后是否需要修改 AndroidManifest.xml？

我试过添加这个（就像在 hello-jni 示例中一样），但错误消息没有变化。

```
=================
        <activity android:name=".flac"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
================ 
```

你们需要审查 andriod.mk 文件吗？附带说明一下，我正在使用的应用程序项目取自 Ubuntu 并带到了 Windows。我不认为这会做任何事情，但我只是为了安全起见。

麦克风

# facebook - 如何从某些粉丝页面获取 Facebook 状态更新？

> ID：14426481
> 
> 赞同：0
> 
> 时间：2013-01-20T16:19:27.207
> 
> 标签：facebook, facebook-graph-api, microsoft-metro, facebook-c#-sdk

更新时间：2013 年 1 月 27 日 经过一番研究，我发现我需要做一个 http get .. 我正在使用 graph apis 。我正在使用以下网址。每次我收到不好的请求时怎么办？ [https://graph.facebook.com/1021259526/statuses&limit=20&access_token=AAAFM2GZAUaXQBAIlkFVUKxZCXs2rbZCuyoHy0n1jKucWuA8QorbdOLzJ7Wr3TUUBMrcZB6j008RjnOtwWnNJTcmzWSXZAjKeFz](https://graph.facebook.com/1021259526/statuses&limit=20&access_token=AAAFM2GZAUaXQBAIlkFVUKxZCXs2rbZCuyoHy0n1jKucWuA8QorbdOLzJ7Wr3TUUBMrcZB6j008RjnOtwWnNJTcmzWSXZAjKeFz)

我假设访问令牌是每次用户登录时都会获得的用户访问令牌。

我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:14:09.957

我现在能够获取 json 数据.. 对于任何被困在这里的人，我建议你们使用 fiddler 跟踪来捕获 https 流量并在您的应用程序中使用该 url....所以我的错误是[https:/ /graph.facebook.com/1021259526/statuses?method=GET&format=json&access_token=](https://graph.facebook.com/1021259526/statuses?method=GET&format=json&access_token=) "wahtever 是访问令牌" ....

# jquery - 使用 jquery ui datepicker 和更改日期格式

> ID：14426484
> 
> 赞同：2
> 
> 时间：2013-01-20T16:19:46.050
> 
> 标签：jquery, jquery-ui, datepicker, date-format

我无法更改日期格式.. 快把我的头发扯掉了。搜索API并尝试了一切。尝试了一切

# HTML

```
<body>
  <p>Date:
    <input type="text" id="datepicker" />
  </p>
</body> 
```

# jQuery

```
$(function () {
  $(".selector").datepicker({
    dateFormat: 'dd-mm-yy'
  });
  $("#datepicker").datepicker({
    showOn: "button",
    buttonImage: "calendar_icon120121018-7997-10s714y-0_original.png",
    buttonImageOnly: true
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:29:44.350

我看到你已经从 API 复制粘贴了这一行：

```
$( ".selector" ).datepicker({ dateFormat: 'dd-mm-yy' }); 
```

`.selector`是您应用日期选择器的元素的占位符，在本例中为`#datepicker`. 这只是一个示例，您必须对其进行修改以适合您自己的代码。

将`dateFormat`选项放入实际的 datepicker 初始化程序，就像所有其他选项一样：

```
$( "#datepicker" ).datepicker({
    dateFormat: 'dd-mm-yy',
    showOn: "button",            
    buttonImage: "calendar_icon120121018-7997-10s714y-0_original.png",          
    buttonImageOnly: true    
}); 
```

# javascript - 使用 jquery 添加/删除 div

> ID：14426488
> 
> 赞同：0
> 
> 时间：2013-01-20T16:20:00.090
> 
> 标签：javascript, jquery

我将代码更改为以下内容：

```
$(document).ready(function () {
            $('#add').on('click', function () {
                var $contacts = $(".contact");
                $("<div/>").append($("<input>", {
                  "type": "text",
                  "name": "contact[" + $contacts.length + "][name]"
                })).insertAfter($contacts.last());
            });
          });   

<div class="contact">
Name: &nbsp; <input type="contact[0][name] type="text">
</div>
<div class="contact">
Name: &nbsp; <input type="contact[1][name] type="text">
</div>
<div class="contact">
Name: &nbsp; <input type="contact[2][name] type="text">
</div> 
```

这有效，并允许我添加另一行。但是，我在两件事上需要帮助：

1）当我添加另一行并点击提交时。$_POST 数组只显示前三个值，而不是动态添加的数组。

2）如何在附加的 html 中添加更多文本？它只显示输入框，而不是它前面的“名称：”。

谢谢！

这就是 print_r($_POST) 返回的内容（我还有其他表单字段）：

```
 Post:
 Array
  (
[custsubmit] => Submit
[contact] => Array
    (
        [0] => Array
            (
                [id] => 
                [name] => name1
            )

        [1] => Array
            (
                [id] => 
                [name] => name2
            )

        [2] => Array
            (
                [id] => 
                [name] => name3
            )

    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:25:02.047

您可以从使用多维数组开始。

```
<div class="contact">
  <input type="text" name="contact[0][name]">
  ...
</div>
<div class="contact">
  <input type="text" name="contact[1][name]">
  ...
</div>
... 
```

我将容器的 更改`id`为`<div>`类名，因为该`id`属性是唯一的。

现在，要添加新行，您可以使用如下内容。

```
var $contacts = $(".contact");
$("<div/>", {
  "class": "contact",
  "html": $("<input>", {
    "type": "text",
      "name": "contact[" + $contacts.length + "][name]"
  })
}).insertAfter($contacts.last()); 
```

这样，您将在 PHP 中收到一个不错的数组，如下所示：

```
Array
(
    [0] => Array
        (
            [name] => foo
        )
    [1] => Array
        (
            [name] => bar
        )
    ...
) 
```

* * *

[正如我之前在这里回答](https://stackoverflow.com/a/11617734/417685)的那样，您可以通过使用 DOM 模板来使用更复杂的布局。

```
.template {
  display: none;
} 
```

```
<div class="contact template">Name: &nbsp;
  <input type="contact[{{id}}][name]" type="text">
</div> 
```

```
$(function() {
  var $template = $(".template");
  $('#add').on('click', function () {
    var $contacts = $(".contact").not(".template");
    $template.template({
      id: $contacts.length
    }).insertAfter($contacts.last());
  });
}); 
```

[你可以在这里看到它。](http://jsfiddle.net/8x5p5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:28:01.310

要“正确”地做到这一点，您需要某种 MVC（模型-视图-控制器）或类似的设计。您应该研究一些让生活更轻松的客户端框架（例如 Angular.js、Backbone 等）。

如果您想不使用框架 - 一种（相对）简单的方法是将模板保留为字符串（参见下面的示例）。然后在javascript中保留一个计数器，在添加一行时递增它，替换模板变量并将生成的字符串用作innerHtml，即：

```
var contactTemplate = '<input type="text" name="contact{{id}}" id="contact{{id}}" val="{{Name}}">...';
var counter = 1;
var addContact = function(data) {
    counter++;
    var html = contactTemplate.replace(/{{id}}/g, counter).replace(/{{Name}}/g, data.Name);
    var newElement = $('<div>'+html+'</div>');
    $('#container').append(newelement);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:29:41.297

```
$(document).ready(function () {
  $('#add').on('click', function () {
      var newID = 'contact' + ($('input:text').length + 1 );
      newDiv = '<input type="text" name="' + newID + '" id="' + newID + '" value="' + newID + '" />';
      $('#contact').html( $('#contact').html() + newDiv );
  });
}); 
```

其中，HTML 是这样的：

```
<input type='button' id="add" value="Add more" />
<br />
<div id="contact">
  <input type="text" name="contact1" id="contact1" />
  <input type="text" name="contact2" id="contact2" />
  <input type="text" name="contact3" id="contact3" />
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T16:28:05.283

在您的输入周围有一个 div，然后您可以使用[jquery append](http://api.jquery.com/append)将另一个输入放在列表的末尾。此外，每次创建元素时，您都可以通过调用`.children().length`take that number add 1 来获取单个 div 中的输入数量。

# python - Python 3：ImportError“没有名为 Setuptools 的模块”

> ID：14426491
> 
> 赞同：384
> 
> 时间：2013-01-20T16:20:25.190
> 
> 标签：python, module, package, setup.py, python-3.3

我在 Python 3 中安装软件包时遇到了麻烦。

我一直使用`setup.py install`. 但是现在，当我尝试安装 ansicolors 包时，我得到：

```
importerror "No Module named Setuptools" 
```

我不知道该怎么做，因为我过去没有安装 setuptools。尽管如此，我还是能够在`setup.py install`没有 setuptools 的情况下安装许多软件包。为什么我现在应该得到 setuptools？

我什至无法安装 setuptools，因为我有 Python 3.3，而 setuptools 不支持 Python 3。

为什么我的安装命令不再起作用？

* * *

## 回答 #1

> 赞同：669
> 
> 时间：2013-01-20T16:27:51.347

您的`setup.py`文件需要`setuptools`. 一些 Python 包曾经`distutils`用于分发，但现在大多数都使用`setuptools`更完整的包。[这](https://stackoverflow.com/questions/6344076/differences-between-distribute-distutils-and-setuptools)是关于它们之间差异的问题。

`setuptools`在 Debian 上安装：

```
sudo apt-get install python3-setuptools 
```

对于旧版本的 Python (Python 2.x)：

```
sudo apt-get install python-setuptools 
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2013-05-12T19:20:45.637

**编辑：**官方[setuptools dox 页面](https://packaging.python.org/tutorials/installing-packages/)：

> 如果您从 python.org 安装了 Python 2 >=2.7.9 或 Python 3 >=3.4，则您已经拥有 pip 和 setuptools，但需要升级到最新版本：
> 
> 在 Linux 或 OS X 上：
> 
> ```
> pip install -U pip setuptools 
> ```
> 
> 在 Windows 上：
> 
> ```
> python -m pip install -U pip setuptools 
> ```

**因此，这篇文章与*Distribute*相关的其余部分已过时（例如，某些链接不起作用）。**

### 编辑 2022-02-04

从 Python 3.10 [Distutils 已弃用，将在 Python 3.12 中删除](https://docs.python.org/3/whatsnew/3.10.html#distutils)- 使用[setuptools](https://packaging.python.org/en/latest/guides/distributing-packages-using-setuptools/)：

> 不推荐使用整个 distutils 包，将在 Python 3.12 中删除。它用于指定包构建的功能已经完全被第三方包 setuptools 和包装取代......

## 分发（已弃用）

[Distribute](http://pythonhosted.org/distribute/) - 是一个 setuptools fork，它“提供 Python 3 支持”。分发（setuptools）+ pip的安装说明：

```
curl -O http://python-distribute.org/distribute_setup.py
python distribute_setup.py
easy_install pip 
```

类似的问题[在这里](https://stackoverflow.com/a/16511005/565525)。

更新：[Distribute](http://pythonhosted.org/distribute/)似乎已过时，即合并到 Setuptools 中：*Distribute 是 Setuptools 项目的一个已弃用的分支。自 Setuptools 0.7 版本以来，Setuptools 和 Distribute 已合并，并且不再维护 Distribute。所有正在进行的工作都应参考 Setuptools 项目和 Setuptools 文档。*

您可以尝试使用[setuptools](https://pypi.python.org/pypi/setuptools#unix-wget) pypi 页面上的说明（我还没有测试过，抱歉 :( ）：

```
wget https://bitbucket.org/pypa/setuptools/raw/bootstrap/ez_setup.py -O - | python
easy_install pip 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2021-02-09T09:37:23.010

**确保您正在运行最新版本的 pip**

我尝试安装[Ansible](https://en.wikipedia.org/wiki/Ansible_(software))，但失败了

> ModuleNotFoundError：没有名为“setuptools_rust”的模块

`python3-setuptools`已经到位，所以升级`pip`解决了它。

```
pip3 install -U pip 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2013-11-04T22:01:47.290

我在使用 Python 2.6 的 Oracle Linux 6.4 上的[virtualenv](http://pypi.python.org/pypi/virtualenv)中执行此操作，因此基于*apt*的解决方案不是我的选择，Python 2.7 的想法也不是。我的解决方法是升级由 virtualenv 安装的 setuptools 版本：

```
pip install --upgrade setuptools 
```

之后，我能够将软件包安装到 virtualenv 中。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2020-07-26T18:17:22.613

对我有用的解决方案是升级我的 setuptools：

```
python3 -m pip install --upgrade pip setuptools wheel 
```

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2021-01-19T08:16:02.207

对于由于不同原因而遇到相同问题的其他人：即使 a`pyproject.toml`与 位于同一目录中，也会发生这种情况`setup.py`，即使`setuptools`可用时也是如此。

删除`pyproject.toml`为我解决了这个问题。

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2016-03-04T09:04:47.600

`pip uninstall setuptools`

进而：

`pip install setuptools`

这对我有用并解决了我的问题。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2021-05-10T09:15:44.693

**第一步 #1**
*你必须安装`setuptools`*

> 在 Linux 上：
> 
> `pip install -U pip setuptools`

> 在 Mac 操作系统上：
> 
> `pip install -U pip setuptools`

> 在 Windows 上：
> 
> `python -m pip install -U pip setuptools`

**第二步#2**

*确保您已使其可访问（使其在环境变量中可用）*

> 在 Linux 上
> 
> `export PATH="INSTALLATIONDIRECTORY:$PATH"`

> 在 Mac 操作系统上
> 
> 对不起，我不知道。

> 在 Windows 上
> 
> 1.  打开开始搜索，输入“env”，然后选择“编辑系统环境变量”</li>
> 2.  单击“环境变量”按钮。
> 3.  根据需要设置环境变量。新建按钮添加了一个附加变量。
> 4.  选择“确定”关闭所有对话框。您的更改已保存！

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2021-07-05T05:23:56.797

如果 与`pyproject.toml`位于同一目录中`setup.py`，则可能是问题的原因。我重命名了那个文件，但它并没有解决问题，所以我重新建立了原始文件名，并进行了以下更改。

在 [build-system] 部分下，我将“setuptools”添加到了 requires= 列表中，并且它起作用了。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-01-20T16:25:57.923

该`distribute`软件包提供了 Python 3 兼容版本`setuptools`： http: [//pypi.python.org/pypi/distribute](http://pypi.python.org/pypi/distribute)

此外，用于[`pip`](http://www.pip-installer.org/en/latest/installing.html#installing-globally)安装模块。它会自动查找依赖项并为您安装它们。

你的包裹对我来说很好用：

```
[~] pip --version                                                              
pip 1.2.1 from /usr/lib/python3.3/site-packages (python 3.3)
[~] sudo pip install ansicolors                                                
Downloading/unpacking ansicolors
  Downloading ansicolors-1.0.2.tar.gz
  Running setup.py egg_info for package ansicolors

Installing collected packages: ansicolors
  Running setup.py install for ansicolors

Successfully installed ansicolors
Cleaning up...
[~] 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-05-30T06:10:25.693

Windows 7的：

我在[这里](https://stackoverflow.com/questions/20038284/how-to-install-selenium-for-python-and-c-sharp/30542856#30542856)为 Python [Selenium WebDriver](https://en.wikipedia.org/wiki/Selenium_(software)#Selenium_WebDriver)提供了一个完整的解决方案：

1.  设置轻松安装（Windows - 简化）
    1.  从“https://pypi.python.org/pypi/setuptools”下载 ez.setup.py ( [https://bootstrap.pypa.io/ez_setup.py )](https://bootstrap.pypa.io/ez_setup.py)
    2.  将 ez.setup.py 移至`C:\Python27\`
    3.  打开 cmd 提示符
    4.  `cd C:\Python27\`
    5.  `C:\Python27\python.exe ez.setup.py install`

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2021-09-13T09:00:40.437

我跑了`sudo python setup.py build_ext -i`，它失败了`No module named setuptools`。

我用这个命令解决了它：

```
<i>sudo apt-get install python-setuptools</i> 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-07-14T09:40:30.603

[PyPA 推荐](https://python-packaging-user-guide.readthedocs.org/en/latest/current.html)的用于安装和管理 Python 包的工具是`pip`. `pip`包含在 Python 3.4 ( [PEP 453](http://legacy.python.org/dev/peps/pep-0453/) ) 中，但对于旧版本，这里是[如何安装](https://pip.pypa.io/en/latest/installing.html)它（在 Windows 上）：

下载[https://bootstrap.pypa.io/get-pip.py](https://bootstrap.pypa.io/get-pip.py)

```
>c:\Python33\python.exe get-pip.py
Downloading/unpacking pip
Downloading/unpacking setuptools
Installing collected packages: pip, setuptools
Successfully installed pip setuptools
Cleaning up...

>c:\Python33\Scripts\pip.exe install pymysql
Downloading/unpacking pymysql
Installing collected packages: pymysql
Successfully installed pymysql
Cleaning up... 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-08-29T09:34:11.720

几年前，我继承了一个在 Django-1.2.3 下运行的 Python (2.7.1) 项目，现在被要求通过 QR 可能性来增强它。我遇到了同样的问题，也没有找到*pip*或*apt-get*。所以我以一种完全不同但简单的方式解决了它。

我 /bin/vi-ed setup.py 并将“from setuptools import setup”行更改为：“from distutils.core import setup”

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-03-23T16:26:16.830

如果`pip`未安装，例如如果它来自[Deadsnakes PPA](https://launchpad.net/%7Edeadsnakes/+archive/ubuntu/ppa)或 Docker 环境，则修复此错误的最佳方法是通过运行[引导](https://docs.python.org/3/library/ensurepip.html)它

```
python -m ensurepip 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2021-10-07T15:57:47.573

当我的 pip requirements.txt 文件包含一个使用诗歌构建的可编辑库并包含一个 pyproject.toml 文件时，我遇到了这个问题。[按照setuptools](https://setuptools.pypa.io/en/latest/build_meta.html)的文档，我的解决方案是将 setuptools 添加到 pyproject.toml 文件中的构建系统要求中，如下所示：

```
[build-system]
requires = ["poetry-core>=1.0.0", "setuptools"]
build-backend = "poetry.core.masonry.api" 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-12-16T17:59:39.107

如果您仍然发现此问题，请尝试以下操作：

```
python3 -m pip install scrapy --upgrade --force --user 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-02-17T14:31:14.673

在尝试安装 socketIO 时，我遇到了同样的问题。在我的系统（Windows 11）中，setupTools 出现了两次。在`C:\Program Files\Python310\Lib\site-packages\`和 在`C:\Users\user\AppData\Roaming\Python\Python310\site-packages\` 不得不卸载其中之一。

# c - 复杂的声明（C）

> ID：14426505
> 
> 赞同：1
> 
> 时间：2013-01-20T16:21:51.473
> 
> 标签：c, syntax, declaration

> **可能重复：**
> [如何理解复杂的函数声明？](https://stackoverflow.com/questions/1448849/how-to-understand-complicated-function-declarations)
> [用于解析 C 表达式的螺旋规则和“声明遵循用法”](https://stackoverflow.com/questions/3707096/spiral-rule-and-declaration-follows-usage-for-parsing-c-expressions)

您可能已经阅读过[K&R 的 The C Programming Language](https://rads.stackoverflow.com/amzn/click/com/0131103628)一书中的同名部分“复杂声明” 。我只是在读这本书，并试图用 C 语言提高自己。在阅读了提到的部分之后，我想我无法理解 C 声明语句的语法背后的逻辑。1、2、3 和 4 来自第 5 节，第 6 节来自其他页面。

1.  `int (*daytab)[13]` daytab：指向 int 数组 [13] 的指针

2.  `void (*comp)()` comp：指向返回 void 的函数的指针

3.  `char (*(*x())[])()` x：函数返回指向数组[]的指针，指向函数返回char的指针

4.  `char (*(*x[3])())[5]` x：指向函数的指针的数组 [3] 返回指向 char 的数组 [5] 的指针

5.  `typedef int (*PFI)(char *, char *)` 创建类型 PFI，用于“指向函数（两个 char * 参数）返回 int 的指针。语法在这里如何工作？

最后，我的问题是：

*   你能通过上面的例子来解释你思考和阅读复杂声明的方式吗？
*   1、3、4 之类的东西是否实际可用和需要？如果是这样，你能写一些代码示例吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-20T16:23:59.357

在过去一周左右的时间里，我在 HackerNews 上看到了[“顺时针/螺旋规则” 。](http://c-faq.com/decl/spiral.anderson.html)这是考虑 C 声明，尤其是函数指针的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:27:40.917

查看右侧的标识符和符号：

*   如果它是一个`[`标识符是一个数组。
*   如果它是一个`(`标识符是一个函数
*   如果它`)`向左看，你会发现`*`：标识符是一个指针
*   如果右侧或左侧没有任何内容，则标识符是“普通旧”对象。

阐述：

1.  `int (*daytab)[13]`
    `daytab`是一个指针

2.  `void (*comp)()`
    `comp`是一个指针

3.  `char (*(*x())[])()`
    `x`是一个函数

4.  `char (*(*x[3])())[5]`
    `x`是一个数组

5.  `typedef int (*PFI)(char *, char *)`
    `PFI`是一个指针

# git - 如何使分支的git头重置为分支上的标记？

> ID：14426506
> 
> 赞同：0
> 
> 时间：2013-01-20T16:22:00.887
> 
> 标签：git

我用 a 标记了我的主分支，`git tag -a 1.0.0`我想做的是将我的主分支重置`reset --hard`为标记指向的提交。我的问题。

1.  如何找出标签指向的提交ID？
2.  如何将分支的头部重置为标签指向的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:38:14.703

您可以将标签名称传递给以`git reset`重置为该标签名称指向的提交：`git reset --hard 1.0.0`。

如果你仍然想要提交哈希，你可以得到它

```
git show -s --format=%H 1.0.0^{commit} 
```

（`git show 1.0.0`也可以；上面只转储提交哈希。）

# css - 如何组合背景图像？

> ID：14426508
> 
> 赞同：0
> 
> 时间：2013-01-20T16:22:39.160
> 
> 标签：css, image, background, sprite

我有一些我在我的网站上使用的图片。我正在尝试减少 http 请求。在我的标题中，我的徽标向左浮动，然后另一张带有特价等的图片在同一个 div 中向右浮动。我的问题是如何将这些组合在一起，并且在使用流体布局时仍然可以计算出它们之间需要的空间量。您是否还建议将主要背景图像与这些徽标等结合起来，如果是，我该怎么做才能使其在流畅的布局中看起来仍然正确

# iphone - 为什么 Apple 的 SimplePing ping 在 AIRPLANE MODE 下的 iPhone 上会成功？

> ID：14426511
> 
> 赞同：2
> 
> 时间：2013-01-20T16:22:58.570
> 
> 标签：iphone, ios, xcode, connection

我正在使用 Apple 的 SimplePing 示例 ping“google.com”：http: [//developer.apple.com/library/mac/#samplecode/SimplePing/Introduction/Intro.html](http://developer.apple.com/library/mac/#samplecode/SimplePing/Introduction/Intro.html)

当我将 iphone 设置为飞行模式时，ping 也成功。

注意：ping 这也不起作用：

```
"google.com?random=" + a random int; 
```

**为什么 ping 会成功？**

# javascript - Jquery在字符串中查找模式

> ID：14426512
> 
> 赞同：0
> 
> 时间：2013-01-20T16:23:06.497
> 
> 标签：javascript, jquery, regex

我需要使用 jquery 从字符串中查找路径信息并将结果推送到数组中。

字符串输出看起来像；

```
 "var rsr = Raphael('rsr', '270', '266'); 
 var path_a = rsr.path('M144.869,199c0,7.659-5.479,13.139-13.14,
 13.139 c-7.659,0-14.598-5.479-14.598-13.139s6.209-13.139,13.869-
 13.139S144.869,191.341,144.869,199z'); path_a.attr({fill: 'non .... etc" 
```

我需要在 rsr.path() 中检索每次出现的路径信息；

我将如何实现这一目标？在我的字符串上使用 $.each 和正则表达式？

谢谢凸轮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:29:16.517

JavaScript 将允许您使用正则表达式执行此操作：

```
var s = " var rsr = Raphael('rsr', '270', '266'); var path_a = rsr.path('M144.869,199c0,7.659-5.479,13.139-13.14, 13.139 c-7.659,0-14.598-5.479-14.598-13.139s6.209-13.139,13.869- 13.139S144.869,191.341,144.869,199z'); path_a.attr({fill: 'non .... etc";

var regex = /M144\.869(.+?)869,199z/g;
var matches = regex.exec(s); 
```

match[0] 然后包含捕获组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:52:41.363

我发现这行得通..

```
 $(document).ready(function(){

    $('form.svg-convert').submit(function(event){

        var content = $(this).find('textarea').val();
        process(content);

        event.preventDefault();
    })
})

var process = function(c){

    var content = c,
        paths = [];

    var contentSplit = content.split('path(');
    contentSplit.shift(); 

    $.each(contentSplit,function(i,v){

        var path = v.split(')');
        path = path[0];
        paths.push(path);

    });

} 
```

# c++ - 如何使用 HKLM\SYSTEM\CurrentControlSet\Enum 获取设备列表及其参数？

> ID：14426521
> 
> 赞同：1
> 
> 时间：2013-01-20T16:24:10.443
> 
> 标签：c++, winapi, registry

如何使用注册表部分获取设备的内容和主要参数`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Enum?`

好吧，我需要扫描注册表树，包含`..\Enum\{SomeID}\{OneMoreID}\{MyDearValue}`，其中应该包含一些描述，即“KINGSTON 100500TB Flash of God”。主要问题是：如何使用 WinAPI 和 C++ 获取所有这些字符串描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:30:22.080

使用 Win32 注册表功能。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724875(v=vs.85).aspx)

# erlang - rebar编译eunit错误

> ID：14426524
> 
> 赞同：2
> 
> 时间：2013-01-20T16:24:28.770
> 
> 标签：erlang, rebar, eunit

我使用 rebar 使用命令“rebar compile eunit”进行 eunit 测试，但得到错误信息：

```
==> myapp (compile)

==> myapp (eunit)

src/myapp_app.erl:8: badly formed 'include_lib'

src/myapp_app.erl:26: undefined macro 'assertNot/1'

ERROR: eunit failed while processing /Users/Dao/ErlProject/myapp: rebar_abort 
```

我真的不知道这是什么意思，谁能告诉我为什么？

PS：我的英文很差，请见谅

myapp_app.erl 像这样：

```
-ifdef(TEST).

-include_lib(“eunit/include/eunit.hrl”).

-endif.

........

-ifdef(TEST).

 simple_test() ->

  ok = application:start(myapp),

  ?assertNot(undefined == whereis(myapp_sup)).

-endif. 
```

它来自这里：[https ://github.com/rebar/rebar/wiki/Getting-started](https://github.com/rebar/rebar/wiki/Getting-started)

我按照步骤，但得到了错误！

我的erlang版本是R15B03

操作系统：OS X Lion

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:46:23.303

确保以下列方式包含 eunit：

```
-include_lib("eunit/include/eunit.hrl"). 
```

不用说，确保你安装了 eunit。到目前为止，我记得，例如，某些 Ubuntu 版本中可能没有默认安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T02:15:47.007

# asp.net-mvc - 可以创建通用视图模型吗？

> ID：14426525
> 
> 赞同：0
> 
> 时间：2013-01-20T16:24:36.537
> 
> 标签：asp.net-mvc

不久前，我发布了[这个](https://stackoverflow.com/questions/14423056/why-do-we-use-viewmodels/ "这")关于 ViewModels 使用的问题。

我有另一个与同一主题相关的问题 -

可以创建通用视图模型吗？泛型是指可以在不同视图之间共享的视图模型。（一些视图可能使用视图模型字段的一个子集，而另一个可能使用另一个子集）。或者每个视图模型是否应该为一个特定的视图量身定制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:41:31.267

那么简短的答案是肯定的，长的答案是肯定的。

例如，如果通过 ViewModel 配置分页，则可以很好地为这些页面推广 ViewModel。这只是一个例子，但我相信还会有更多......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:35:12.817

为什么不使用 ViewBag？

根据我的经验，这就是它的用途。

# c# - 如何在 asp.net MVC 4 和 MVC 5 中设置默认控制器

> ID：14426526
> 
> 赞同：107
> 
> 时间：2013-01-20T16:24:37.483
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-mvc-5

**如何在不设置HomeController**的情况下为我的**ASP.NET MVC** 4 项目设置默认控制器？

 **应用程序启动时如何设置默认**区域？**

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2013-01-20T16:30:23.673

最好的方法是改变你的路线。默认路由（在您的 App_Start 中定义）设置`/Home/Index`

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters*
        new { controller = "Home", action = "Index", 
        id = UrlParameter.Optional }
); 
```

作为默认登陆页面。您可以将其更改为您想要的任何路线。

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters*
        new { controller = "Sales", action = "ProjectionReport", 
        id = UrlParameter.Optional }
); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-08-04T04:29:27.817

在**App_Start**文件夹中的**RouteConfig.cs**中设置以下代码

 **```
public static void RegisterRoutes(RouteCollection routes)
{
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
 routes.MapRoute(
 name: "Default",
 url: "{controller}/{action}/{id}",
 defaults: new { controller = "Account", action = "Login", id = UrlParameter.Optional });
} 
```

如果仍然无法正常工作，请执行以下步骤

**第二种方式：** 您只需按照以下步骤操作，

1）右键单击您的项目

2) 选择属性

3）选择Web选项，然后选择特定页面（控制器/视图），然后设置您的登录页面

在这里，Account 是我的控制器，Login 是我的操作方法（保存在 Account Controller 中）

请看随附的![在此处输入图像描述](../Images/6900e6255ccd3e347a586f8adb24e814.png)屏幕截图。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-12-31T14:55:08.577

我没有看到这个问题得到回答：

> 应用程序启动时如何设置默认**区域？**

因此，这是设置默认区域的方法：

```
var route = routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
    ).DataTokens = new RouteValueDictionary(new { area = "MyArea" }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-01T09:29:59.267

如果您只有一个控制器，并且您想访问 root 上的每个操作，您可以像这样跳过控制器名称

```
routes.MapRoute(
        "Default", 
        "{action}/{id}", 
        new { controller = "Home", action = "Index", 
        id = UrlParameter.Optional }
); 
```****

# mysql - 查询不适用于单引号撇号

> ID：14426531
> 
> 赞同：2
> 
> 时间：2013-01-20T16:25:33.417
> 
> 标签：mysql, sql, phpmyadmin

`phpmyadmin`查询不适用于单引号/撇号。

不行

```
ALTER TABLE 'about_team' CHANGE 'position' 'pp' INT( 11 ) NOT NULL 
```

工作：

```
ALTER TABLE `about_team` CHANGE `position` `pp` INT( 11 ) NOT NULL 
```

相同的查询但不起作用，给出错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行**的 ''about_team' CHANGE 'position' 'pp' INT(11) NOT NULL'附近使用正确的语法**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T16:27:20.747

这是因为当你使用`single`报价时，它只是意味着它是一个`STRING`. 而`BACTICK`（*第二个查询*）意味着转义一列。

> ```
> 'about_team' is not equal with `about_team`
> 
> 'about_team' is STRING
> `about_team` is a Table Name 
> ```

实际上，包含名称的反引号是*可选*的，因为使用的名称 where not on `MySQL Reserved Keyword List`。

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

通常，*`single quotes`用于值周围*，而*`backticks`用于表名和列名*。

# android - 如何在 Android 4.0 上管理/禁用主页按钮？

> ID：14426538
> 
> 赞同：0
> 
> 时间：2013-01-20T16:26:27.890
> 
> 标签：android, back-button, launcher, home-button

我正在开发的应用程序必须看起来像一个启动器。我之所以打开这个主题，是因为我在 Stack Overflow 中查看的整个主题中都找不到正确的答案。
我希望应用程序禁用或控制整个按钮以退出此应用程序。我在 Android 2.3 上禁用了主页和返回按钮，但它在 Android 4.0 上不起作用（返回按钮除外）。
总而言之，我不能，我只想禁用 Android 4.0 上的主页按钮
除了其他答案，你能给出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:54:55.933

除非您将应用程序设为主屏幕，否则无法拦截 Android 上的主页按钮。这是出于安全原因，因此恶意应用程序无法通过覆盖所有可以退出的按钮来接管您的设备。主页按钮是能够离开任何应用程序的一种可靠方式。

简而言之，不，这是不可能的，即使是这样，它也会严重破坏用户对应用程序行为的期望。如果你想实现这一点，你必须将你的应用程序变成一个启动器。

# java - java.io.NotSerializableException: java.lang.reflect.Constructor

> ID：14426539
> 
> 赞同：1
> 
> 时间：2013-01-20T16:26:32.527
> 
> 标签：java, swing, serialization, stream, jtable

我想从我的模型中序列化一个模型`JTable`，不幸的是我得到了一个`NotSerializableException`. 我所有的领域都是`Serializable`，我不明白这里的问题出在哪里。

```
public class Sauvegarde extends AbstractAction implements Serializable {

    private static final long serialVersionUID = 1L;
    public DefaultTableModel model;

    public Sauvegarde(String string) {
        super(string);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        sauve_actionPerformed(e);
        System.exit(0);

    }

    public void sauve_actionPerformed(ActionEvent e) {
        this.model = Grille.dfm;
        try {

            // Serialisation
            FileOutputStream fos = new FileOutputStream("sauve.tmp");
            ObjectOutputStream oos = new ObjectOutputStream(fos);
            oos.writeObject(model);
            oos.close();
        } catch (IOException e1) {
            e1.printStackTrace();
        }
    }
} 
```

这是我创建 JTable 和模型的类：

```
 String[] columnTitles = { "A", "B", "C", "D", "E"};
    String[] cellulesVide = { "", "", "", "", ""};
    String[][] rowData = new String[nombreDeLignes][5];

    dfm = new DefaultTableModel(columnTitles,0);

    //table.setCellSelectionEnabled(true);

    for (int i = 0 ; i < nombreDeLignes ; i++)
    {   
        dfm.addRow(cellulesVide);
    }

    table = new JTable(dfm) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:24:00.203

没有魔法。

您应该检查对象层次结构中的所有类及其字段。所有字段和类都应该是可序列化的或原始的。

Parent 可能不可序列化，但它必须具有默认构造函数。

如果上述条件成立，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:03:06.247

正如异常所说，您直接或间接地在某个地方拥有构造函数类型的非瞬态数据成员，它不是可序列化的。找到它并使其暂时化，或消除它。构造函数不可序列化。

# javascript - 分配数组值不起作用？

> ID：14426543
> 
> 赞同：1
> 
> 时间：2013-01-20T16:27:01.830
> 
> 标签：javascript, multidimensional-array

对于国际象棋游戏，我在敌方棋子上搜索可能的攻击者。板表示是通过多维数组完成的。`board[i][j]`，其中 i = 行，j 是列（所以 8x8），值是片段本身。

在搜索可能的攻击者时，我想创建一个新数组`aPossibleAttackers[i][j]`

```
var aPossibleAttackers = []; // create array
var ti,tj; // temp row/col 
```

我在所有可能的方向（0-7）上进行搜索，并寻找我遇到的第一件作品。所以方向和距离是已知的。然后我计算这是哪个字段，并希望将对应的值从 复制`board[i][j]`到`aPossibleAttackers[i][j]`。但是，它不起作用。

代码：

```
alert( veld(attackerRow,attackerCol) + " pos att op veld " + veld((attackerRow + (i * rowStep)), (attackerCol + (i * colStep))));

aPossibleAttackers[search_dir] = i; // searchdirection and distance, OK
ti = attackerRow + (i * rowStep); // OK
tj = attackerCol + (i * colStep); // OK
//aPossibleAttackers[ti][tj] = board[ti][tj]; // not possible????
alert("test2 ti= " + ti + " tj=" + tj + " ?? " + aPossibleAttackers); 
```

我究竟做错了什么？？`board[i][j]`确实存在，否则我不会找到一块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T13:05:26.580

可能是字符串转换问题

尝试

```
alert( 
    veld(attackerRow,attackerCol)
    + " pos att op veld "
    + veld(((attackerRow*1) + (i * rowStep)), ((attackerCol*1) + (i * colStep))));

aPossibleAttackers[search_dir] = i; // searchdirection and distance, OK
ti = (attackerRow*1) + (i * rowStep); // OK
tj = (attackerCol*1) + (i * colStep); // OK
//aPossibleAttackers[ti][tj] = board[ti][tj]; // not possible????
alert("test2 ti= " + ti + " tj=" + tj + " ?? " + aPossibleAttackers); 
```

只是一个猜测

# css - 主标志拒绝居中

> ID：14426545
> 
> 赞同：0
> 
> 时间：2013-01-20T16:27:05.807
> 
> 标签：css, centering

我已经尝试了所有我能想到的技巧，但我主页上的主徽标绝对拒绝水平居中：

[http://aksarbenribfest.bugs3.com/public_html/#!/page_home](http://aksarbenribfest.bugs3.com/public_html/#!/page_home)

它略微偏右，这一点尤其引人注目，因为它位于居中的标题元素的正下方。

我感谢所有的帮助！

谢谢！

罗伯特·奥马哈，内布拉斯加州

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:32:05.790

这是因为容器 section#content 比 logo 本身小

```
section #content {
  width: 940px;
}

.logo {
  width: 976px;
} 
```

标志在容器右侧溢出，由于容器居中，标志出现偏离中心。您可以通过使徽标更小或容器更大来解决问题

# sql - SQL Server 上的 SQL - 无法运行存储在变量中并使用 exec 执行的查询

> ID：14426547
> 
> 赞同：1
> 
> 时间：2013-01-20T16:27:11.603
> 
> 标签：sql, sql-server, sql-server-2008

我正在尝试在 SQL Server 2008 中执行以下 SQL-

```
DECLARE @sql nvarchar, @fullname nvarchar;

SET @fullname='1patents_corrected.csv';
SET @sql = 'BULK INSERT GooglePatentsIndividualDec2012.dbo.patent from ' + @fullname+ '     WITH  ( DATAFILETYPE = "char", FIELDTERMINATOR = "^", ROWTERMINATOR =  "\n" );'

EXEC(@sql) 
```

但是我收到了这个错误——

> *消息 2812，级别 16，状态 62，第 1 行
> 找不到存储过程“B”。*

我在这里做错了什么？

更新——我改变了查询，即。为每个 varchar 变量指定一个大小。现在代码是这样的——

```
 DECLARE @MyCounter int;
 DECLARE @Fileprefix nvarchar(1000), @Filesuffix nvarchar(1000), @fullname nvarchar(1000), @Counter_string nvarchar(1000), @sql nvarchar(1000);

 SET @MyCounter = 1;
 SET @Fileprefix= 'C:\Arvind_gpd\patents\';
 SET @Filesuffix='data_corrected.csv';

 WHILE (@MyCounter < 10)

 BEGIN;
 Set @Counter_string= Cast(@MyCounter AS varchar(1) );
 Set @fullname = (@Fileprefix+ @Counter_string + @Filesuffix );
 SET @sql = 'BULK INSERT GooglePatentsIndividualDec2012.dbo.patent from ' + @fullname+ 
 '  WITH  ( DATAFILETYPE = "char", FIELDTERMINATOR = "^", ROWTERMINATOR = "\n" );'
 EXEC(@sql);
 SET @MyCounter = @MyCounter + 1;
 END;  
 GO 
```

但是我现在遇到了一个不同的错误-

```
 Msg 102, Level 15, State 1, Line 1 
```

'C:' 附近的语法不正确。消息 319，级别 15，状态 1，第 1 行关键字“with”附近的语法不正确。如果此语句是公用表表达式、xmlnamespaces 子句或更改跟踪上下文子句，则前面的语句必须以分号结束。

现在我做错了什么:(？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T16:29:27.043

改变

```
DECLARE @sql nvarchar 
```

至

```
DECLARE @sql nvarchar(2000) 
```

默认大小为 1

这同样适用于`@fullname nvarchar;`给它一个大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T18:42:16.697

使用 BULK INSERT 时需要引用文件名。

改变

```
SET @sql = 'BULK INSERT GooglePatentsIndividualDec2012.dbo.patent 
from ' + @fullname+ 
WITH  ( DATAFILETYPE = "char", FIELDTERMINATOR = "^", ROWTERMINATOR ="\n" );' 
```

至

```
SET @sql = 'BULK INSERT GooglePatentsIndividualDec2012.dbo.patent 
FROM ''' + @fullname + '''
WITH  ( DATAFILETYPE = ''char'', FIELDTERMINATOR = ''^'', ROWTERMINATOR =''\n'' )' 
```

您会注意到我有多个单引号捆绑在一起的实例。双单引号代表 SQL Server 中的转义（即我在另一个引号中引用一个引号）。

另外，我看到您在代码中使用了很多分号。使用 T-SQL 编写时无需放入它们

# jquery - 如何更改网页的默认滚动速度、滚动量、滚动惯性

> ID：14426548
> 
> 赞同：13
> 
> 时间：2013-01-20T16:27:16.563
> 
> 标签：jquery, html, jquery-ui, jquery-plugins

我正在尝试更改网页的默认滚动速度，数量和惯性。我谷歌了很多，但徒劳无功

幸运的是，今天晚些时候，我发现[了一个插件](http://manos.malihu.gr/jquery-custom-content-scroller/)，它允许我们只在特定的 div 标签内而不是在整个网页中更改滚动速度、数量、惯性。

这是一个基本代码

```
 $(".I-WILL-APPLY-ONLY HERE").mCustomScrollbar({
 set_width:false, 
set_height:false, 
 horizontalScroll:false, 
scrollInertia:550, 
 SCROLLINERTIA:"easeOutCirc", 
 mouseWheel:"auto", 
  autoDraggerLength:true, 
    scrollButtons:{ 
enable:false, 
       scrollType:"continuous", 
     SCROLLSPEED:20, 
      SCROLLAMOUNT:40 
     },
    advanced:{
updateOnBrowserResize:true, 
   updateOnContentResize:false, 
      autoExpandHorizontalScroll:false, 
    autoScrollOnFocus:true 
   },
           callbacks:{
     onScrollStart:function(){}, 
    onScroll:function(){}, 
onTotalScroll:function(){}, 
    onTotalScrollBack:function(){}, 
   onTotalScrollOffset:0, 
whileScrolling:false, 
       whileScrollingInterval:30 
 }
   });

<div id="I-WILL-APPLY-ONLY HERE" class="I-WILL-APPLY-ONLY HERE">
A basic height in pixels would be defined for this element and any content appearing here will have a different scrollspeed,inertia.Mentioning heignt of this div element is compulsary,else i wont show the output    </div> 
```

问题是我想要整个页面，而不仅仅是特定的 div 元素。任何帮助将不胜感激。请帮助我

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-20T23:31:01.913

您可以使用 jQuery 来做到这一点，看看我的小提琴：http: [//jsfiddle.net/promatik/NFk2L/](http://jsfiddle.net/promatik/NFk2L/)

您可以添加滚动事件的事件侦听器，请注意您可能会阻止滚动的默认操作... `if (event.preventDefault) event.preventDefault();`

然后该事件的处理程序，使用 jQuery animate，将执行滚动...

```
function handle(delta) {
    var time = 1000;
    var distance = 300;

    $('html, body').stop().animate({
        scrollTop: $(window).scrollTop() - (distance * delta)
    }, time );
} 
```

您可以设置时间、距离（也可以添加缓动方法），请参阅[fiddle中的完整示例](http://jsfiddle.net/promatik/NFk2L/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T23:02:12.573

为什么不将您的 HTML 包装在容器 div 中并定位它，如下所示：

```
<div class="container">
  <div id="I-WILL-APPLY-ONLY HERE" class="I-WILL-APPLY-ONLY HERE">
<!-- Content here -->
  </div>
</div> 
```

然后在 jQuery 中定位您的容器类：

```
$('.container').mCustomScrollbar... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-11T20:12:56.003

我适应平滑的元素工作：[Codepen](https://codepen.io/hermannpessoa/pen/QBwJzG?editors=1111)

```
$('.smooth').on('mousewheel', function(e){
  wheel(e.originalEvent, this)
})

function wheel(event, elm) {
    var delta = 0;
    if (event.wheelDelta) delta = event.wheelDelta / 120;
    else if (event.detail) delta = -event.detail / 3;

    handle(delta, elm);
    if (event.preventDefault) event.preventDefault();
    event.returnValue = false;
}

function handle(delta, elm) {
    var time = 1000;
      var distance = 100;

    $(elm).stop().animate({
        scrollTop: $(elm).scrollTop() - (distance * delta)
    }, time );
} 
```

# ios - 使用捏合/缩放创建类似 imovie 的框架条

> ID：14426552
> 
> 赞同：4
> 
> 时间：2013-01-20T16:27:47.070
> 
> 标签：ios, ios6, avfoundation, mpmediaplayercontroller

有谁知道苹果是如何从视频中创建逐帧幻灯片的？我想实现类似的功能，每 5 秒左右显示一帧，具有捏/缩放功能，可以提高分辨率（每 1 秒帧）或降低分辨率（每 10 秒帧）..

我的意思的屏幕截图在这里；

![在此处输入图像描述](../Images/c7377ecb1d6dd6cc5a80561b98cb4dac.png)

我一直在研究 AVFoundation 和 MediaPlayer 框架，但没有想出任何东西..他们使用的是内部 api 还是什么？

如果有人有可以分享的代码示例，这位 iOS 新手将不胜感激！

# android - Frame Layout 不同屏幕尺寸不同

> ID：14426557
> 
> 赞同：0
> 
> 时间：2013-01-20T16:28:18.413
> 
> 标签：android, layout, android-framelayout

我有一个大问题。相同的 .xml 在较大的屏幕上可以正常工作，但在较小的屏幕上则不行。该问题出现在模拟器和真机上。这是我的 .XML。

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:id="@+id/linearview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="50dp"
    android:layout_marginTop="100dp"
    android:background="#FFFFFF"
    android:visibility="visible"
    android:text="CLOSED"
    android:textColor="#FF0000"
    android:textSize="12dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="123sp"
    android:layout_marginTop="100dp"
    android:background="#FFFFFF"
    android:visibility="visible"
    android:text="CLOSED"
    android:textColor="#FF0000"
    android:textSize="12dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="193dp"
    android:layout_marginTop="200dp"
    android:background="#FFFFFF"
    android:visibility="visible"
    android:text="CLOSED"
    android:textColor="#FF0000"
    android:textSize="12dp"
    android:textStyle="bold" />

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="263dp"
    android:layout_marginTop="200dp"
    android:background="#FFFFFF"
    android:visibility="visible"
    android:text="CLOSED"
    android:textColor="#FF0000"
    android:textSize="12dp"
    android:textStyle="bold" />

</FrameLayout> 
```

以下是不同尺寸屏幕的屏幕截图。基本上，我编写了一个代码，用“封闭”文本视图覆盖图表上的“0”。在较大的屏幕上工作正常，但在较小的屏幕上，所有的 TextViews 都聚集在角落里。我已经尝试过 layout-small、layout 和 layout-large .xmls。似乎没有任何效果。

![在此处输入图像描述](../Images/cfb99a66ca7edeaac55b5e8723663483.png)

![在此处输入图像描述](../Images/90390ad9108d98581f456d87242d84b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:12:06.003

弄清楚了！！

我必须先在 TextVeiws 上设置布局重力，然后它才开始工作。奇怪的是，它在没有指定重力属性的情况下在更大的屏幕上工作。

# python - 如何导入包中所有模块的成员？

> ID：14426574
> 
> 赞同：2
> 
> 时间：2013-01-20T16:30:40.413
> 
> 标签：python, import, python-3.x, package

我正在开发一个具有类似于以下文件结构的包：

```
test.py
package/
    __init__.py
    foo_module.py
    example_module.py 
```

如果我调用`import package`test.py，我希望包模块看起来类似于：

```
>>> vars(package)
mapping_proxy({foo: <function foo at 0x…}, {example: <function example at 0x…}) 
```

换句话说，我希望所有模块的成员都`package`在`package`'s 命名空间中，并且我不希望模块本身在命名空间中。`package`不是子包。

假设我的文件如下所示：

foo_module.py：

```
def foo(bar):
    return bar 
```

example_module.py：

```
def example(arg):
    return foo(arg) 
```

测试.py：

```
print(example('derp')) 
```

如何构建 test.py、example_module.py 和 __init__.py 中的导入语句，以便在包目录外部（即 test.py）和包本身（即 foo_module.py 和 example_module.py）内工作？我尝试的一切都会给出`Parent module '' not loaded, cannot perform relative import`或`ImportError: No module named 'module_name'`。

另外，作为旁注（根据 PEP 8）：“非常不鼓励对包内导入进行相对导入。始终对所有导入使用绝对包路径。即使现在 PEP 328 已在 Python 2.5 中完全实现，它的样式明确的相对导入是不鼓励的；绝对导入更便携，通常更具可读性。”

我正在使用 Python 3.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:55:32.713

`from module import name`我认为您可以通过使用样式导入来获得所需的值，而不会弄乱您的命名空间。我认为这些导入将满足您的要求：

进口`example_module.py`：

```
from package.foo_module import foo 
```

进口`__init__.py`：

```
from package.foo_module import foo
from package.example_module import example

__all__ = [foo, example] # not strictly necessary, but makes clear what is public 
```

进口`test.py`：

```
from package import example 
```

请注意，这仅在您正在运行`test.py`（或包层次结构的同一级别的其他东西）时才有效。否则，您需要确保包含的文件夹`package`位于 python 模块搜索路径中（通过将包安装在 Python 将查找它的某个位置，或者将适当的文件夹添加到`sys.path`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T20:17:54.213

> 我希望包中所有模块的成员都在包的命名空间中，并且我不希望模块本身在命名空间中。

我能够通过调整我在 Python 2 中使用的东西来自动导入插件以在 Python 3 中也能工作来做到这一点。

简而言之，它是这样工作的：

1.  包的`__init__.py`文件导入同一包目录中的所有其他 Python 文件，但名称以`'_'`（下划线）字符开头的文件除外。

2.  然后它将导入模块名称空间中的任何名称添加到模块名称`__init__`（也是包的名称空间）的名称中。请注意，我必须`example_module`从`import foo`.`.foo_module`

以这种方式做事的一个重要方面是意识到它是动态的，并且不需要将包模块名称硬编码到`__init__.py`文件中。当然，这需要更多的代码来完成，但也使它非常通用并且能够与几乎任何（单级）包一起使用——因为它会在添加新模块时自动导入新模块，并且不再尝试导入任何已删除的模块从目录。

**`test.py`**：

```
from package import *

print(example('derp')) 
```

**`__init__.py`**：

```
def _import_all_modules():
    """ Dynamically imports all modules in this package. """
    import traceback
    import os
    global __all__
    __all__ = []
    globals_, locals_ = globals(), locals()

    # Dynamically import all the package modules in this file's directory.
    for filename in os.listdir(__name__):
        # Process all python files in directory that don't start
        # with underscore (which also prevents this module from
        # importing itself).
        if filename[0] != '_' and filename.split('.')[-1] in ('py', 'pyw'):
            modulename = filename.split('.')[0]  # Filename sans extension.
            package_module = '.'.join([__name__, modulename])
            try:
                module = __import__(package_module, globals_, locals_, [modulename])
            except:
                traceback.print_exc()
                raise
            for name in module.__dict__:
                if not name.startswith('_'):
                    globals_[name] = module.__dict__[name]
                    __all__.append(name)

_import_all_modules() 
```

**`foo_module.py`**：

```
def foo(bar):
    return bar 
```

**`example_module.py`**：

```
from .foo_module import foo  # added

def example(arg):
    return foo(arg) 
```

# c++ - 移动构造函数问题

> ID：14426579
> 
> 赞同：4
> 
> 时间：2013-01-20T16:31:24.740
> 
> 标签：c++, visual-c++, c++11, visual-studio-2012, move-semantics

我有以下课程：

```
class Student
{
private:
    std::string firstName;
    std::string lastName;
public:
    Student():firstName(""), lastName("") 
    { 
    }

    Student(const std::string &first, const std::string &last)
        :firstName(first), lastName(last) 
    {
    }

    Student(const Student &student)
        :firstName(student.firstName), lastName(student.lastName)
    {
    }

    Student(Student &&student)
    {
        firstName=std::move(student.firstName);
        lastName=std::move(student.lastName);
    }

    // ... getters and setters    
}; 
```

我这样使用它：

```
std::vector<std::shared_ptr<Student>> students;
std::shared_ptr<Student> stud1 = std::make_shared<Student>("fn1","ln1");
students.push_back(stud1);
Student stud2("fn2","ln2");
students.push_back(std::make_shared<Student>(std::move(stud2))); 
```

根据我的阅读，编译器自动生成了移动构造函数。现在，当我踏入这条线时，`students.push_back(std::make_shared<Student>(std::move(stud2)));`我到达了移动构造函数，这没关系。

如果我在进入该行时注释掉移动构造函数，我会到达复制构造函数。我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T02:59:20.763

Visual C++ 2012 does not implicitly generate move constructors or move assignment operators.

(The rules governing when move operations are and are not implicitly declared and defined changed several times during standardization; Visual C++ 2012 does not support the standardized (2011) set of rules.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:47:22.670

在您的情况下，您可以简单地声明所有这些构造函数`=default`，例如

```
class student
{
  std::string firstname, surname;
public:
  student(student const&) = default;
  student(student&&) = default;
  student&operator=(student const&) = default;
  student&operator=(student&&) = default;
  // etc
}; 
```

并且不要担心细节：编译器应该对此进行排序并生成对`std::string::string(string&&)`（移动构造函数）的适当调用。

**编辑**当然，这不适用于有缺陷的编译器，但如果你标记“C++11”，那么你应该期待一个 C++11 的答案。

# javascript - 在javascript中减去军事时间

> ID：14426580
> 
> 赞同：0
> 
> 时间：2013-01-20T16:31:27.353
> 
> 标签：javascript, time, subtraction

> **可能重复：**
> [检查 javascript中的](https://stackoverflow.com/questions/1787939/check-time-difference-in-javascript)
> [时差 计算javascript 中的时差](https://stackoverflow.com/questions/9820138/calculate-time-difference-in-javascript)

这是我从表单输入中提取时间的代码块，

```
start = group.find('.startTime').val().replace(':',''),     // like 0100
end = group.find('.endTime').val().replace(':',''),         // like 0300
timeDiff = (end - start) < 0 ? (end - start + 2400) : (end - start), 
```

`timeDiff`考虑到经过午夜的时间，所以如果我尝试从 0100 中减去 2300 并得到 -2200，它会加上 2400 以获得 0200 或 2 小时的正确差异。

我的问题出现在我尝试减去一些时间，例如 2100 - 2030（这应该给我半小时），但因为它只是一个原始数字，我得到了 70 的实际差异。我的问题是如何正确减去这些？如果我需要将其转换为日期或时间对象，那么这样做的正确方法是什么？我研究了该`setTime`方法，但这听起来不像我需要的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:22:31.650

如果没有`Date`对象（对于仅时间值来说似乎没问题），您应该将时间转换为分钟或小时 - 始终只使用一个单位进行计算（尤其不要将它们混合成一个代表六十进制的十进制数）！

```
function toTime(string) {
    var m = string.match(/(\d{2}):({\d2})/);
    return m && 60 * parseInt(m[1], 10) + parseInt(m[2], 10),
}
var start = toTime( group.find('.startTime').val() ),
    end = toTime( group.find('.endTime').val() );

var timeDiff = Math.abs(end - start);

function fromTime(minutes) {
    var m = minutes % 60,
        h = (minutes - m) / 60;
    return ("0"+h).substr(-2)+":"+("0"+m).substr(-2);
} 
```

# php - 用PHP制作可以手动编辑的问题和答案

> ID：14426582
> 
> 赞同：0
> 
> 时间：2013-01-20T16:31:30.643
> 
> 标签：php, mysql, arrays, for-loop, fetch

我正在尝试制作一个系统，您可以创建/编辑多项选择题以及答案。现在我有一个问题表和一个答案表，答案表代码中的一个字段：

```
$qexecute = mysql_query("SELECT * FROM `questions` WHERE `type`='1'");
$num = mysql_num_rows($execute);
for($i=0;$i<$num;$i++)
{
    $quest = mysql_fetch_assoc($execute);
    $aexecute = mysql_query("SELECT * FROM `answers` WHERE `qid`='$i'");
    $num = $mysql_num_rows($aexecute);
    $a = mysql_fetch_assoc($aexecute);
    echo $i . '.' . $quest['questiontext'] . '<br />' . $a['answertext'];
} 
```

由于某种原因，它什么也没输出。

# html - 更改元素的css（不同父母的相同元素）

> ID：14426586
> 
> 赞同：0
> 
> 时间：2013-01-20T16:31:56.433
> 
> 标签：html, css

我想更改所有锚元素的样式。我希望他们一样，不管他们的父母。

所以只是写这样的东西：

```
a { color: red } 
```

并将其应用于所有元素。

这是因为我正在更改一些主题，而我不能这样做，因为对于某些类或元素，锚标记的样式不同，我想知道是否可以以某种方式更改它。另一种方法是找到所有这些样式规则，并在那里进行更改（如果没有更简单的解决方案）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:33:52.417

您可以使用自己的覆盖 CSS 样式`!important`。这是一个很好的[教程](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)。

在您的情况下，如果您希望覆盖链接的颜色，您可以执行以下操作：

```
a { 
color: red !important;
} 
```

# java - 测试无效位标志

> ID：14426587
> 
> 赞同：2
> 
> 时间：2013-01-20T16:32:02.217
> 
> 标签：java, bit-manipulation, flags

我正在使用位标志从一个字节中读取用户提供的选项。我想检查字节是否包含任何无效/未知的标志值。

到目前为止，我编写的快速测试代码如下所示：

```
public class Test {
  static byte flag1 = 0x01;
  static byte flag2 = 0x02;
  static byte flag3 = 0x04;

  public static void main(String[] args) {
    byte invalidFlags = 0x0F;
    byte goodFlags = (byte) (flag1 | flag2);

    System.out.println(flagsAreOK(invalidFlags));
    System.out.println(flagsAreOK(goodFlags));

    // prints:
    //
    // false
    // true
  }

  private static boolean flagsAreOK(byte value) {
    byte allFlags = (byte) (flag1 | flag2 | flag3);
    byte badFlags = (byte) ~allFlags;

    return ((value & badFlags) == 0);
  }
} 
```

这似乎工作正常。但是，是否有人知道：

*   一个更整洁的方法来做到这一点？无论如何，我都不是操纵专家。

*   处理标志操作的现有库？我[`BitField`](http://commons.apache.org/lang/api/org/apache/commons/lang3/BitField.html)从 Apache Commons Lang 找到了，但是已经有一个 bug 抱怨[JavaDocs 是多么不可能阅读](https://issues.apache.org/jira/browse/LANG-731)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:36:52.453

您应该使用[`BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)，但是您这样做的方式是检查是否仅设置了有效标志的正确方法。

您的示例已修改：

```
public class Test {
  static BitSet flag1 = new BitSet();
  static BitSet flag2 = new BitSet();
  static BitSet flag3 = new BitSet();

  public static void main(String[] args) {
    flag1.set(0, true);
    flag2.set(1, true);
    flag3.set(2, true);

    BitSet invalidFlags = new BitSet();
    invalidFlags.set(0, 3, true);
    BitSet goodFlags = new BitSet();
    goodFlags.or(flag1);
    goodFlags.or(flag2);

    System.out.println(flagsAreOK(invalidFlags));
    System.out.println(flagsAreOK(goodFlags));
  }

  private static boolean flagsAreOK(BitSet value) {
    return value.get(0, value.length()).clear(0, 2).cardinality() == 0;
  }
} 
```

您可以使用从 s 的数组`BitSet.valueOf(...)`创建一个。有关更多信息，请参阅 JavaDoc。`BitSet``byte`

# jquery - Knockout JS 分页和 Facet 搜索

> ID：14426588
> 
> 赞同：0
> 
> 时间：2013-01-20T16:32:02.313
> 
> 标签：jquery, knockout.js

我正在尝试组合一个单页应用程序，该应用程序允许同时进行多面搜索和分页。我对 Knockout 还很陌生，我正在努力将这两个概念联系在一起。

开发站点可以在这里看到[http://especial2.egcommerce.com/search](http://especial2.egcommerce.com/search)

```
function ProductDimensionsViewModel () {
    var self = this;

    self.dimensions = ko.observableArray();

    //self.dimensions(data);

    var baseUri = 'api/product_dimensions.php';
    $.getJSON(baseUri, self.dimensions);

    //self.dimensions.subscribe(function(updated) {
       // alert(updated);
   // });

    self.filterByBrand = ko.computed(function() {
        return ko.utils.arrayFilter(self.dimensions(), function(dimension) { return dimension.type == "BRAND"; })
    });

    self.filterByArea = ko.computed(function() {
        return ko.utils.arrayFilter(self.dimensions(), function(dimension) { return dimension.type == "AREA"; })
    });

    self.filterByType = ko.computed(function() {
        return ko.utils.arrayFilter(self.dimensions(), function(dimension) { return dimension.type == "TYPE"; })
    })

    self.filterByBrandMenu = ko.computed(function() {
        return ko.utils.arrayFilter(self.dimensions(), function(dimension) { return dimension.type == "BRAND" && dimension.menuItem == "YES"})
    });

    self.filterByAreaMenu = ko.computed(function() {
        return ko.utils.arrayFilter(self.dimensions(), function(dimension) { return dimension.type == "AREA" && dimension.menuItem == "YES"})
    });

    self.filterByTypeMenu = ko.computed(function() {
        return ko.utils.arrayFilter(self.dimensions(), function(dimension) { return dimension.type == "TYPE" && dimension.menuItem =="YES" })
    });

    self.products = ko.observableArray();
    $.getJSON("api/products", self.products);
    //self.products(product)

    //console.log(self.products(data.count));

    /*
     * Paging functionality
    */

    // only for example, used to demonstrate setting the total item count from a service call.
    self.SetTotalResults = ko.observable(100);

    // holds the total item count
    self.TotalResults = ko.observable();

    // actual pager, used to bind to the pager's template
    // first parameter must be an observable or function which returns the current 'total item count'.
    // it is wrapped in a ko.computed inside the pager.
    self.Pager = ko.pager(self.TotalResults);

    // Subscribe to current page changes.
    self.Pager().CurrentPage.subscribe(function () {
        self.search();
    });

    self.search = function () {
        // simulate a search

        // ie.:
        /*
         var maximumRows = self.Pager().PageSize(),
         searchText = self.SearchText(),
         startIndex = (self.Pager().CurrentPage() - 1) * maximumRows;
         myService.search(searchText, startIndex, maximumRows)
         .done(function(result) {
         // set your own results etc...
         self.TotalResults(result.totalItemCount);
         }
         */

        // setting 'total results'. This should be in your result callback
        // in this example we grab it from the form.
        var totalItemCount = self.SetTotalResults();
        self.TotalResults(totalItemCount);
    } 
```

ko.applyBindings(new ProductDimensionsViewModel())

如您所见，我已经设法填充过滤器并从 ajax 调用中提取产品。

我现在需要以下一些指导。

1.  如何根据左侧的复选框过滤产品
2.  如何将分页功能链接到产品结果。

任何帮助将不胜感激，该网站可能只有 1500 种产品，所以我认为我试图实施的解决方案将使产品导航非常流畅。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:49:32.813

在不编写所有代码的情况下解释这有点具有挑战性，但希望这些添加是有意义的：

```
self.page = ko.observable(0)
self.pageSize = ko.observable(20)

self.filters = [
    { id: 'dining', label: 'Fine Dining', active: ko.observable(false) },
    { id: 'events', label: 'Hospitality and Events', active: ko.observable(false) },
    { id: 'restaurants', label: 'Restaurant', active: ko.observable(false) }
    // etc...
]

self.activeFilters = ko.computed(function() {
  return self.filters.filter(function(filter) {
    return filter.active();
  })
})
self.activeFilters.subscribe(function() {
    // Make ajax call based on activeFilters, and start and pageSize as params
})

<ul data-bind="foreach: filters">
  <li>
    <input type="checkbox" data-bind="checked: active">
    <label data-bind="text: label"></label>
  </li>
</ul> 
```

分页标记未在此处显示，但会绑定到 self.page 和 self.pageSize 可观察对象，具体取决于您希望如何控制它。

希望这可以帮助。

# php - Symfony 增加选择索引

> ID：14426589
> 
> 赞同：0
> 
> 时间：2013-01-20T16:32:05.387
> 
> 标签：php, symfony, doctrine-orm, twig

在显示选项字段文本的显示模板中，我发现出于某种原因，我必须从选项索引中减去 1 才能正确显示所选值。为什么是这样？

示例：Choice 字段基于下表：

```
vid description
1   Critical
2   Emergency
3   FACE
4   General Dist.
5   Let's Talk Turkey
6   TEFAP
7   Emergency plus General
8   TEFAP plus General 
```

控制器通过以下方式获得：

```
$type = $em->getRepository('ManaClientBundle:Contactdesc')->findAll(); 
```

模板片段：

```
Attribute(type, vid) [vid={{ vid }}]:{{ dump(attribute(type, vid)) }} 
```

产量，例如，这个：

```
Attribute(type, vid) [vid=4]:class Mana\ClientBundle\Entity\Contactdesc#834 (2) { private $vid => int(5) private $description => string(17) "Let's Talk Turkey" } 
```

请注意，客户端的 vid 为 4，但转储显示为 5。嗯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:03:43.373

数组索引为 0，因此数组的索引 4 是第五个元素。您的代码段没有显示 vid=4 的项目，而是显示数组的索引 4 ...

# regex - RegEx：将电子邮件地址与 GApp 的子域匹配

> ID：14426598
> 
> 赞同：1
> 
> 时间：2013-01-20T16:33:13.853
> 
> 标签：regex, gmail

我正在尝试编写一个可在 Google Apps 中使用的正则表达式，以匹配带有子域的传入邮件的电子邮件地址，例如：

```
root@*wildcard*.mydomain.com 
```

但不是

```
root@mydomain.com 
```

这样我就可以使用 Gmail 将它们重定向到正确的收件人 @mydomain.com。

以下正则表达式在我的正则表达式编辑器中有效，但与 Gmail 测试中的任何内容都不匹配：

```
^[-+.0-9A-Z_a-z]+@[-+.0-9A-Z_a-z]+\.(mydomain.com)$ 
```

对于那些熟悉 GApps 的人，我指的是设置 > 电子邮件 > 接收路由 > 配置 > 选项下的设置。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:43:11.473

试着把破折号放在最后；一些正则表达式方言无法处理字符类中的前导破折号。除此之外，您的正则表达式看起来不错。

```
^[+.0-9A-Z_a-z-]+@[+.0-9A-Z_a-z-]+\.(mydomain\.com)$ 
```

# c# - 无法显示列表 作为我的 ItemsControl 和 StackPanel 视图的列之一？

> ID：14426606
> 
> 赞同：1
> 
> 时间：2013-01-20T16:33:39.133
> 
> 标签：c#, wpf, xaml

我有以下课程：

```
public class Order
{
    public string OrderName { get; set; }
    public List<Parts> PartsList { get; set; }
}

public class Parts
{
    public string PartName { get; set; }
    public double PartQuantity { get; set; }
} 
```

在我的代码中，我创建了一个 Order 对象列表

```
List<Order> myOrders; 
```

我想以某种方式向用户显示所有这些，比如使用元素的堆栈面板，其中第一个是 TextBox 来显示 OrderName，第二个是 Datagrid 来显示部件列表？

老实说，我正在尝试许多不同的事情（我对使用什么类型的控件没有要求），但我永远无法正确显示 PartsList（要么我什么也没得到，要么我得到“收藏”显示给用户。

我们的目标是看到这样的东西：

```
Order1    Part1    7
          Part2    12
Order2    Part1    100
          Part2    1
          Part3    58 
```

这是我今天拥有的 XAML，我真的认为它会起作用：

```
<ItemsControl x:Name="visual"
              ItemsSource="{Binding myOrders}"
              HorizontalAlignment="Stretch"
              HorizontalContentAlignment="Stretch" 
              Margin="0,397,37,31" Grid.Row="1" Height="172">
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <ItemsControl ItemsSource="{Binding }"
                    HorizontalAlignment="Stretch"
                    HorizontalContentAlignment="Stretch">
        <ItemsControl.ItemTemplate>
          <DataTemplate>
            <StackPanel>
              <TextBlock Text="{Binding OrderName}"
                         Margin="10" />
              <ItemsControl ItemsSource="{Binding PartsList}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch">
                <ItemsControl.ItemTemplate>
                  <DataTemplate>
                    <Grid HorizontalAlignment="Stretch">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                      </Grid.ColumnDefinitions>
                      <TextBlock Grid.Column="0"
                                 Text="{Binding PartName}"
                                 TextAlignment="Center" />
                      <TextBlock Grid.Column="1"
                                 Text="{Binding PartQuantity}"
                                 TextAlignment="Center" />
                    </Grid>
                  </DataTemplate>
                </ItemsControl.ItemTemplate>
              </ItemsControl>
            </StackPanel>
          </DataTemplate>
        </ItemsControl.ItemTemplate>
      </ItemsControl>
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

有谁看到这段代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:40:57.633

你有一个额外的不必要的`ItemsControl`。带有 的那个`ItemsSource="{Binding}"`。

因此，假设这`myOrders`是一个包含`Order`s 集合的属性，这应该可以工作：

```
<ItemsControl x:Name="visual"
              ItemsSource="{Binding myOrders}"
              HorizontalAlignment="Stretch"
              HorizontalContentAlignment="Stretch" Margin="0,397,37,31" 
              Grid.Row="1" Height="172">
  <ItemsControl.ItemTemplate>  
    <!-- This defines the DataTemplate to display one Order object-->   
    <DataTemplate>     
            <StackPanel>
              <TextBlock Text="{Binding OrderName}"
                         Margin="10" />
              <ItemsControl ItemsSource="{Binding PartsList}"
                            HorizontalAlignment="Stretch"
                            HorizontalContentAlignment="Stretch">
                <ItemsControl.ItemTemplate>
             <!-- This defines the DataTemplate to display one Parts object--> 
                  <DataTemplate>
                    <Grid HorizontalAlignment="Stretch">
                      <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                      </Grid.ColumnDefinitions>
                      <TextBlock Grid.Column="0"
                                 Text="{Binding PartName}"
                                 TextAlignment="Center" />
                      <TextBlock Grid.Column="1"
                                 Text="{Binding PartQuantity}"
                                 TextAlignment="Center" />
                    </Grid>
                  </DataTemplate>
                </ItemsControl.ItemTemplate>
              </ItemsControl>
            </StackPanel>        
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

# php - php计数来自多个文件夹的文件并回显总数

> ID：14426607
> 
> 赞同：0
> 
> 时间：2013-01-20T16:33:42.533
> 
> 标签：php, directory

我有一个 php 代码，它将显示我在文件夹中拥有的文件数量。

**代码：**这将在我的页面上呼应，“**共有 119 篇文章**”

```
$directory = "../health/";
if (glob($directory . "*.php") != false) /* change php to the file you require either html php jpg png. */ {
    $filecount = count(glob($directory . "*.php")); /* change php to the file you require either html php jpg png. */
    echo "<p>There are a total of";
    echo " $filecount ";
    echo "Articles</p>";
} else {
    echo 0;
} 
```

**问题：**

我想计算 27 个或更多文件夹中的文件并回显文件总数。

有没有我可以添加要打开的文件夹列表，例如：

```
$directory = "../health/","../food/","../sport/"; 
```

然后它将统计所有文件并显示总数**“共有394篇文章”**

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:41:11.887

是的你可以：

```
glob('../{health,food,sport}/*.php', GLOB_BRACE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:43:09.933

毫无疑问，这比[clover](https://stackoverflow.com/users/1982115/clover)的回答效率低：

```
$count = 0;
$dirs = array("../health/","../food/","../sport/");
foreach($dirs as $dir){
    if($files = glob($dir."*.php")){
        $count += count($files);
    }
}

echo "There are a total of $count Articles"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T16:44:10.580

一个简单的答案是只使用一个数组和一个循环。这是你自己可以弄清楚的。

```
$directories = array('../health/', '../food/', '../sport/');
$count = 0;
foreach ($directories as $dir) {
    $files = glob("{$dir}*.php") ?: array();
    $count += count($files);
}
echo "<p>There are a total of {$count} articles</p>"; 
```

但@clover 的回答更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T16:51:00.617

像往常一样，划分你的问题通常要好得多。例如：

*   获取文件（请参阅[`glob`](http://php.net/glob)）。
*   计算结果的文件数（编写一个处理两种情况的`glob`函数。）。`FALSE``Array`
*   做输出（不要在其他代码中做输出，在最后做，使用变量（就像你已经做的那样，只是分开输出））。

一些示例代码：

```
/**
 * @param array|FALSE $mixed
 * @return int
 * @throws InvalidArgumentException
 */
function array_count($mixed) {

    if (false === $mixed) {
        return 0;
    }
    if (!is_array($mixed)) {
        throw new InvalidArgumentException('Parameter must be FALSE or an array.');
    }

    return count($mixed);
}

$directories = array("health", "food", "string");
$pattern     = sprintf('../{%s}/*.php', implode(',', $directories));
$files       = glob($pattern, GLOB_BRACE);
$filecount   = array_count($files);

echo "<p>There are a total of ", $filecount, " Article(s)</p>"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-20T16:41:46.000

您可以使用此处解释的 opendir 命令： [http ://www.php.net/manual/en/function.opendir.php](http://www.php.net/manual/en/function.opendir.php)

结合上一个链接中显示的示例：

```
<?php
$dir = "/etc/php5/";

// Open a known directory, and proceed to read its contents
if (is_dir($dir)) {
    if ($dh = opendir($dir)) {
        while (($file = readdir($dh)) !== false) {
            echo "filename: $file : filetype: " . filetype($dir . $file) . "\n";
        }
        closedir($dh);
    }
}
?> 
```

基本上打开你第一次浏览的文件夹，然后循环计算每个不是文件夹的单个项目。

**编辑：** 似乎有人给出了比这更简单的解决方案。

# vb.net - 如何在 VB.NET 中单击按钮时切换表单的语言？

> ID：14426609
> 
> 赞同：2
> 
> 时间：2013-01-20T16:33:53.490
> 
> 标签：vb.net, visual-studio-2010, localization

我想创建本地化的应用程序并想实现一个语言切换器（例如特殊按钮）。我使用 Visual Studio 2010 express (VB.NET)。

我用一个标签和一个按钮创建了简单的测试应用程序。我将表单的属性“Localizable”设置为“True”，并以 2 种语言（默认为英语和俄语）编辑了组件的文本。

我知道需要添加

```
Imports System.Threading.Thread
Imports System.Globalization 
```

在 Form1.vb 的开头，然后使用

```
Thread.CurrentThread.CurrentUICulture = New CultureInfo("ru") 
```

启用俄语本地化。但是，如果我将此行放入 Button_Click 事件中，它不会更改语言。是否可以在按钮单击或组合框更改等事件中切换语言？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:17:17.543

是的，您可以在按钮单击事件或更改事件上实现本地化。您可以将文化设置为

```
Thread.CurrentThread.CurrentUICulture = New CultureInfo("ru-RU") 
```

这些链接将帮助您：[全球化和本地化 Windows 应用程序](http://windowsdevcenter.com/pub/a/dotnet/2003/09/29/globalization_pt2.html)，[演练：本地化 Windows 窗体](http://msdn.microsoft.com/en-us/library/y99d1cd3.aspx)，[本地化应用程序](http://msdn.microsoft.com/library/z68135h5%28en-US,VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T14:30:30.827

这是一个可能的解决方法：[https ://social.msdn.microsoft.com/Forums/en-US/72f70870-0c0c-4eb1-886b-9db9917d080a/form-support-multilanguage-at-runtime-in-windows-based-应用程序#8c775cc0-5e5e-4551-b5d1-52bb5c1663e8](https://social.msdn.microsoft.com/Forums/en-US/72f70870-0c0c-4eb1-886b-9db9917d080a/form-support-multilanguage-at-runtime-in-windows-based-application#8c775cc0-5e5e-4551-b5d1-52bb5c1663e8)

首先更改 CurrentUICulture，然后强制将新文化的资源应用于所有控件。

此代码示例循环通过`Me.Controls`，但您也应该循环子容器（面板等）。

这样做会改变字符串、位置、大小等。

```
 System.Threading.Thread.CurrentThread.CurrentUICulture = New CultureInfo("es-ES")
        Dim res As ComponentResourceManager = New ComponentResourceManager(Me.GetType)
        For Each aControl As Control In Me.Controls
            res.ApplyResources(aControl, aControl.Name)
        Next 
```

已编辑：您还可以使用以下方法更改线程的默认文化：

```
CultureInfo.DefaultThreadCurrentCulture = New CultureInfo("es-ES") 
```

这样做，您在运行时创建的所有新表单都将使用这个新的 CultureInfo。

# forms - ZF2 - 工厂调用创建的表单需要将 url 参数传递给服务

> ID：14426611
> 
> 赞同：4
> 
> 时间：2013-01-20T16:34:11.697
> 
> 标签：forms, zend-framework2, factory

我在 zf2 CMS 应用程序中有一个表单，其中包含一个由服务填充的标准选择列表和一个也由服务填充的定制表单元素，该表单是使用 Module.php 中的工厂调用设置的：

```
public function getServiceConfig()
{
    return array(
            'factories' => array(
                'ElmContent\Form\WebpageForm' => function ($sm) {
                    $service1 = $sm->get('parentPagesService');
                    $service2 = $sm->get('categoryService');
                    $form    = new Form\WebpageForm;
                    $form->setService($service1, $service2);

                    return $form;
                }, 
```

categoryService 用于填充我的定制表单元素（来自另一个表的类别列表） - 如果我在我的 CMS 中编辑页面，那么当我构建类别列表时，我想引用另一个表并查看哪些已关联，为此我需要从 url 传入页面 id，例如：

[http://cms.local/pages/edit/100](http://cms.local/pages/edit/100)其中 100 是页面 id，然后可以传递给 categoryService：

```
$this->getCategoryAssociationsTable()->findByPageId(100); 
```

如果需要，可以提供更多代码，但本质上，2 个表单元素由 db 表中的数据填充，因此我使用工厂调用进行设置，第二个元素是定制格式的复选框列表，如果它们在编辑时设置为选中状态之前被选中。为此，我需要从 url 传递 pageId，但是在按照我的方式设置表单时看不到在哪里执行此操作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T07:19:50.353

从控制器传递它 $form = $sm->get('my-form'); $form->setRequest($this->getRequest()); 我想 Request 对象将包含您需要的所有信息？– 山姆 1 月 20 日 18:39

# jquery - jQuery 函数返回未定义

> ID：14426612
> 
> 赞同：0
> 
> 时间：2013-01-20T16:34:17.627
> 
> 标签：jquery, json, undefined

> **可能重复：**
> [AJAX 函数未返回变量](https://stackoverflow.com/questions/12475269/variable-doesnt-get-returned-from-ajax-function)

我有这个功能：

```
 function getCompanyName(companyID) {

        $.getJSON('http://www.domain.com/' + companyID + '.json', function(companyData) {
            $.each(companyData, function(i,item){   
                result = item.name;
            });         
            return result;
        });
   }; 
```

`getCompanyName(13)`如果我像结果一样调用它`undefined`并且如果我访问`www.domain.com/13.json`，我会得到这个结果：

```
[
  {
    id: 13,
    category_id: 2,
    name: "Company Name",
    phone: "333-333-3333",
    address: "Address",
    description: "Description",
    logo_url: "/system/businesses/logos/000/000/013/thumb/G13.jpeg?1348191485"
  }
] 
```

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:07:08.763

您的**getCompanyName()**函数将很快完成执行。在 ajax 请求完成之前很久。所以如果你写这样的东西：

var `a=getCompanyName(companyID);`，结果将是未定义的，因为响应尚未从服务器返回。（尽管您已经退出**getCompanyName()**函数）

长话短说，您需要等待直到 ajax 响应完成（而不是直到`getCompanyName(companyID)`函数完成，**删除`return result`并将处理结果所需的所有功能放入回调函数中/或从中调用其他函数.. ..**

# symfony - 如果我只有“一”方的 id，如何保存多对一的“多”方？

> ID：14426614
> 
> 赞同：0
> 
> 时间：2013-01-20T16:34:24.620
> 
> 标签：symfony, doctrine-orm

假设我有两个具有一对多关系的实体。称它们为 EntityOne 和 EntityMany。

我想将 EntityMany 保存到数据库中。我没有 EntityOne 的实例，但我知道所需的 entity_one_id。

有没有办法在不从数据库中检索 EntityOne 实例的情况下保存 EntityMany？

我不想对保存的 EntityMany 做任何事情。我只是想保存它。

在这种情况下，我能够保存 EntityMany 的唯一方法是从数据库中检索 EntityOne，执行 $entity_many->setEntityOne($entity_one)，然后持久化 EntityMany。

这行得通，但是当所有 db 需要的是 id 时，这似乎是对 EntityOne 的不必要查询。

我尝试简单地实例化一个新的 EntityOne() 并设置 id（我必须为自动生成的整数 id 添加一个设置器），然后使用那个未保存的实例，但 Doctrine 对几个错误并不满意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:51:25.763

EntityManager 有一个方法“getReference”——你可以用它来实现你的目标。它应该看起来像这样：

```
$entityRef = $em->getReference('EntityOne', $entityOneId);
$entityMany->setEntityOne($entityRef);
// ... 
```

看这里：

[http://docs.doctrine-project.org/en/latest/reference/configuration.html#proxy-objects](http://docs.doctrine-project.org/en/latest/reference/configuration.html#proxy-objects)

# android - Android可以加载多个菜单布局文件吗？

> ID：14426617
> 
> 赞同：2
> 
> 时间：2013-01-20T16:34:56.970
> 
> 标签：android, layout, menu, subclass

我想要一个超类活动，它定义每个活动除了自己的之外还应该有哪些基本菜单项。

到目前为止，这是我的代码：

```
public abstract class SuperActivity extends FragmentActivity {

    protected List<TextView> textView = new ArrayList<TextView>();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(getContentResource());

        setTextViews(textView);

    }

    protected abstract void setTextViews(List<TextView> textViews);

    protected abstract int getContentResource();

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
            getMenuInflater().inflate(R.menu.menuitemsforallsubclasses, menu);
    return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.basicmenuitem1:
            allSubclassActivitiesCanDoThis()
            return true;
        case R.id.basicmenuitem2:
            allSubclassActivitiesCanDoThis2()
            return true;

        }
    }
} 
```

在子类中，我只需向 onCreateOptionsMenu（一个附加布局文件）和 onOptionsItemSelected 添加一些内容，对吗？只是想确保我没有走错路。甚至可以在同一个活动中加载多个布局文件吗？

仅供参考：如果您想知道为什么我在活动中有一个 TextView 数组：除此之外，我还希望将每个子类活动的所有 TextView 都放在一个 ArrayList 中，这样我就可以自动将侦听器添加到所有这些活动中，以便我知道何时活动中发生了一些变化或做一些其他整洁的事情。

我正在做的事情可能吗？是否可以加载多个菜单布局文件？

# iphone - 如何在屏幕底部创建带有 3 个按钮的自定义菜单？

> ID：14426619
> 
> 赞同：1
> 
> 时间：2013-01-20T16:35:09.963
> 
> 标签：iphone, objective-c, uibutton

我想在屏幕底部创建某种带有 3 个按钮的菜单。我应该如何解决这个问题，三个按钮彼此相邻，顶部有一些透明空间？

有更好的办法吗？

![在此处输入图像描述](../Images/d60a52104ee2e546df0f1f9e06020166.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:44:26.820

遵循以下 4 个步骤

1) 需要为此获取 4 个图像（3 个按钮图像和 1 个带有图案和透明渐变的背景图像）

2) 创建`UIView`

3）设置`UIView`背景图片（图案和透明渐变）

4）添加三个按钮到子视图`UIView`。

您可以在 IB 上执行此操作，也可以创建自定义`UIView`

# c# - 基本 ListView 样式

> ID：14426624
> 
> 赞同：1
> 
> 时间：2013-01-20T16:35:49.533
> 
> 标签：c#, .net, xaml

我已经阅读了文档并尝试了许多示例，但老实说，这些示例看起来像一个大杂烩，似乎没有多大意义。

任何人都可以推荐任何易于遵循的教程或文档，了解如何在 XAML 中设置 ListView 控件的样式吗？（没有表情混合）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:52:49.893

查看这 2 部分“WPF ListView 样式教程”文章：[http ://blog.vascooliveira.com/wpf-listview-styling-tutorial-part-i/](http://blog.vascooliveira.com/wpf-listview-styling-tutorial-part-i/)

注意：在我的计算机上，XML (XAML) 代码无法正确显示，< 和 > 符号显示为“<”和“>”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:17:28.680

设置 ListView 样式的两个主要常见技巧是设置项目的样式和更改列表框用于布置项目的容器类型。

**为项目设置样式**
这基本上意味着将`ItemTemplate`xaml 中的内容设置为知道如何显示列表框内容的内容`ItemsSource`，通常使用绑定。

例如，如果您`ObservableCollection<Customer>`绑定到客户定义为的列表框：

```
public class Order
{
    public int Id { get; set; }
    public string OrderReference { get; set; }
    public string CustomerName { get; set; }
} 
```

然后，您可以使用数据模板为项目设置样式，如下所示：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <TextBlock Text="{Binding CustomerName}" />
                <TextBlock Text="{Binding OrderReference}" />
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

一个基本的例子，但你明白了。

**更改项目的布局方式**
本质上，您可能不希望垂直列出项目的默认行为，因此您可以使用该属性将列表框中使用的容器控件更改为更合适的内容`ItemsPanel`。例如，如果您有一个项目模板，它看起来像 Windows 资源管理器中“大图标”视图中的项目，那么您可能希望列表框使用 a`WrapPanel`而不是 a `StackPanel`（我很确定它是 a `StackPanel`）：

```
<ListBox>
    <ListBox.ItemsPanel>
        <DataTemplate>
            <WrapPanel>
                <ContentPresenter />
            </WrapPanel>
        </DataTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

又是一个基本的例子。

我将所有这些代码从内存中写到 StackOverflow 中，如果其中有一些拼写错误或记错的部分，我深表歉意。

HTH。

# javascript - 嵌套菜单栏显示

> ID：14426629
> 
> 赞同：0
> 
> 时间：2013-01-20T16:36:25.513
> 
> 标签：javascript, jquery, css

我有一个嵌套菜单栏的问题。当浏览器启动或调整大小时，如何使其始终显示在屏幕上？

```
$('.item').mouseover(function(){
        var ul=$(this).children('ul');
        ul.css("visibility","visible");
        var heigh=$(window).height()-ul.offset().top;

        if(heigh < 600){
           ul.offset({ top: heigh-500});
        }
    }); 
```

jsfiddle.net/srontopekok/qJR4n/3 我希望子菜单不要离开屏幕到底部并保持静止。长得像天猫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:06:47.127

```
//trigger immediately
$('.item').trigger('mouseover');

//trigger on resize
$(window).on('resize', function () { $('.item').trigger('mouseover'); }); 
```

# drupal-7 - 查看单个产品的多个图像的幻灯片

> ID：14426631
> 
> 赞同：1
> 
> 时间：2013-01-20T16:36:32.957
> 
> 标签：drupal-7, slideshow, drupal-views, product

如何显示产品的多个图像的幻灯片。我能够制作内容类型的图像的幻灯片，例如产品展示，它向我显示所有产品的图像。（[阅读此处了解更多信息](http://www.bentedder.com/create-an-easy-jquery-slideshow-in-drupal-7/comment-page-1/#comment-5501 "在这里阅读更多")）。但我想展示单个产品的图像。请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:52:43.040

[现场幻灯片](http://drupal.org/project/field_slideshow)应该为您完成。

# matlab - 怎么做气泡图？

> ID：14426637
> 
> 赞同：9
> 
> 时间：2013-01-20T16:37:05.797
> 
> 标签：matlab, plot

我已经搜索了许多方法来做**Mathematica**的气泡图，但没有有价值的结果，我发现的所有内容都是使用变体*标记大小*进行绘图，这不是一个好的解决方案，因为标记大小值是有界的。

有没有像下面的**Mathematica那样在****Matlab**中做气泡图？

 **![气泡图图像](../Images/5f481224a7759f27bc81a39476855941.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-20T17:02:45.897

我看不出有什么问题[`scatter`](http://www.mathworks.com/matlabcentral/fileexchange/6805-BUBBLE%20PLOT)。例子：

```
x = 80 * randn(1, 30); 
y = 80 * randn(size(x));
r = randi(1500, size(x));
c = randi(10, size(x));
scatter(x, y, r, c, 'filled', 'MarkerEdgeColor', 'k') 
```

这为我产生了以下情节：

![在此处输入图像描述](../Images/95594a24fa8c92ab36266a3515b4bfe2.png)

如您所见，该图显示了非常大和非常小的圆圈。**

# android - 将 Intent 过滤器与广播接收器一起使用

> ID：14426638
> 
> 赞同：0
> 
> 时间：2013-01-20T16:37:16.937
> 
> 标签：android

`android:exported="false"`使用广播接收器时，intent-filters 和属性的用法有什么细节和区别？

如果我们在`<receiver>`标签中指定一些意图过滤器，那么无论指定的意图过滤器如何，此活动都会接收所有意图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:01:55.557

`android:exported`只是指示该类是否可以被其他应用程序调用。如果您不需要它被其他应用程序调用，您可以放心地将其设置为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:07:34.730

Merlin 已经回答了您导出的部分问题。

关于意图过滤器：适合您的意图过滤器之一的所有广播事件都会导致您的 onReceive 方法被调用。意图被传递到方法中。因此，如有必要，您可以检查哪种类型的事件触发了接收器。

# .htaccess - htaccess - 基于变量的重定向

> ID：14426640
> 
> 赞同：1
> 
> 时间：2013-01-20T16:37:27.483
> 
> 标签：.htaccess, redirect, http-status-code-301

我最近更新了我的网站，结果旧的用户名系统发生了变化，这导致现在在谷歌上的链接出现问题。

我已经尝试过 htaccess 没有成功，但这是我想要做的：

```
http://example.com/userprofile.php?Member=[insertusername] 
```

需要重定向到：

```
http://example.com/user/[insertusername] 
```

从我收集的内容来看，htaccess 似乎是做到这一点的方法，但当然我会很感激听到任何其他选择。非常感谢。

# shell - 如何从 shell 脚本中获取 telnet 执行结果代码？

> ID：14426643
> 
> 赞同：1
> 
> 时间：2013-01-20T16:37:55.433
> 
> 标签：shell, unix, telnet

使用以下 shell 代码进行远程 telnet 请求：

```
{
sleep 5
echo admin
sleep 3
echo pass
sleep 3
echo ls
sleep 5
echo exit
} | telnet 172.16.1.1 
```

我想检查 telnet 连接是否成功。尝试使用 $?:

```
echo $? 
```

但它总是返回“1”，即使 telnet 连接正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:44:34.980

Telnet 以这种方式编写脚本非常困难，与建立连接和完成预期操作所需的时间高度不同步。 [expect](http://linux.about.com/od/commands/a/The-Linux-Unix-Command-Expect.htm)正是为了这种目的而创建的。您启动一个程序，如 telnet，然后声明一系列期望 - 例如，当从程序发出“用户名：”时，以及要触发的操作（例如：输入用户名）。

还有许多语言的库或包装器：

*   [蟒蛇期待](http://pexpect.sourceforge.net/pexpect.html)
*   [红宝石期待](http://www.42klines.com/2010/08/14/what-to-expect-from-the-ruby-expect-library.html)
*   [perl 期望](http://search.cpan.org/~rgiersig/Expect-1.15/Expect.pod)

下面是一个驱动 telnet 发出 HTTP HEAD 请求的示例：

```
set timeout 20

spawn telnet localhost 80

expect "Connected to "
send "HEAD / HTTP/1.0\r\n\r\n"

expect "HTTP 200 OK" 
```

鉴于所有这些，我觉得我必须指出 telnet 被认为是不安全的。 [SSH](http://www.openssh.com/)是一个更好的选择，它支持更好的身份验证选择（例如：[公钥/私钥 auth](http://paulkeck.com/ssh/)），对可以运行[的命令的限制（通过 .ssh/authorized_keys）。](http://www.wallix.org/2011/10/18/restricting-remote-commands-over-ssh/)设置 ssh 和 ssh-keys 后，您的脚本将简化为单个 shell 命令：

```
ssh user@hostname ls 
```

ssh 对安全、可靠的远程命令执行有很好的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:52:59.663

如果我没记错的话，这个期望脚本会执行您在上面所做的事情。

```
#!/usr/bin/expect

spawn telnet 172.16.1.1

expect username:
send admin
expect password:
send pass
expect "\$ "
send ls
expect "\$ "
send exit 
```

这是一个有用的入门链接：http: [//oreilly.com/catalog/expect/chapter/ch03.html](http://oreilly.com/catalog/expect/chapter/ch03.html)

# python - Python：最终用户问题

> ID：14426645
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:38:08.340
> 
> 标签：python, python-2.7

我在编写 python 程序时效率很高，我问用户一系列问题，但我想知道我是否可以编写程序让用户问计算机一系列问题。

例如，用户可以问我叫什么名字（计算机）。如果有代码；我想知道它是什么，以及他们是否有关于该主题的初学者课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:42:22.493

这与向他们提问基本上是一样的。与其提出问题，不如向他们提供某种提示。让他们说出他们想要什么，然后你分析他们的意见以确定适当的回应方式。回复后，再次提示他们以实物回复。

[这](http://pythonism.wordpress.com/2010/04/18/a-simple-chatbot-in-python/)是一个例子。

# javascript - 如何确定边界框的背景是否在裁剪区域内？

> ID：14426651
> 
> 赞同：0
> 
> 时间：2013-01-20T16:38:46.560
> 
> 标签：javascript, math, rotation, geometry, bounding-box

我有一张可以在固定框架（固定位置和大小）后面自由移动、旋转和调整大小的图像。如果旋转图像的边界框的背景在框架内，我如何使用 JavaScript/jQuery 找出？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:14:10.983

您的背景由 4 个顶点组成。如果你认识他们，你可以简单地检查他们是否在框架内。

如果您没有顶点但有尺寸、位置和旋转，您可以使用数学和三角函数来发现它们。

[这个回答](https://stackoverflow.com/a/12161405/2001870)可能会有所帮助。

# scala - 涉及 mutable.IndexedSeq、view、take 和 grouped 的集合代码抛出 ClassCastException

> ID：14426653
> 
> 赞同：2
> 
> 时间：2013-01-20T16:38:52.333
> 
> 标签：scala, casting, scala-collections

以下 scala 代码编译良好。

```
object Main extends App {
  import scala.collection.mutable.IndexedSeq

  def doIt() {
    val nums: IndexedSeq[Int] = Array(3,5,9,11)
    val view: IndexedSeq[Int] = nums.view
    val half: IndexedSeq[Int] = view.take(2)
    val grouped: Iterator[IndexedSeq[Int]] = half.grouped(2)
    val firstPair: IndexedSeq[Int] = grouped.next() //throws exception here
  }

  doIt()
} 
```

但是，在运行时它会`java.lang.ClassCastException: scala.collection.SeqViewLike$$anon$1 cannot be cast to scala.collection.mutable.IndexedSeq` 调用`grouped.next()`

我希望调用`grouped.next()`返回等于`IndexedSeq[Int](3,5)`

我想知道为什么这段代码会失败，是否有适当的方法来修复它？

如果我在 REPL 中重复相同的步骤，类型信息会确认代码编译的原因，但不会让我了解引发异常的原因：

```
scala> val nums = Array(3,5,9,11)
nums: Array[Int] = Array(3, 5, 9, 11)

scala> val view = nums.view
view: scala.collection.mutable.IndexedSeqView[Int,Array[Int]] = SeqView(...)

scala> val half = view.take(2)
half: scala.collection.mutable.IndexedSeqView[Int,Array[Int]] = SeqViewS(...)

scala> val grouped = half.grouped(2)
grouped: Iterator[scala.collection.mutable.IndexedSeqView[Int,Array[Int]]] = non-empty iterator

scala> val firstPair = grouped.next()
java.lang.ClassCastException: scala.collection.SeqViewLike$$anon$1 cannot be cast to scala.collection.mutable.IndexedSeqView 
```

Scala 版本 2.10.0-20121205-235900-18481cef9b -- 版权所有 2002-2012，LAMP/EPFL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:59:07.300

看起来你遇到了[错误 SI-6709](https://issues.scala-lang.org/browse/SI-6709)

# php - Echo 一次打印一个值

> ID：14426657
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:39:13.923
> 
> 标签：php, mysql, system, friend

我创建了一个系统，用户注册到我的网站，他们的详细信息输入到我的用户表 (SQL) 中。然后用户可以通过他们的用户名搜索其他用户。然后，他们可以向用户发送好友请求，并将其输入到我的好友请求表 (SQL) 中。然后使用 echo 将好友请求打印到页面上。如果有多个好友请求，则显示friendrequest1friendrequest2friendrequest3等。是否可以仅打印friendrequest1，然后用户接受，此用户名放入我的朋友表（SQL）中，然后显示friendrequest2等，这样每个请求是个人的。所以 echo 可以计算有多少请求并一次显示一个？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:41:44.900

在您的 SQL 语句中，请考虑使用`LIMIT 1`，因为这一次只会返回 1 个请求。

结合`ORDER BY`，您可以获得最新或最旧的请求。

[更多关于这个](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:41:35.873

当你`SELECT`从桌子上时`friendrequest`，你可以在最后做 a `LIMIT 1`，你只会得到一个结果。

# jquery - Fancybox 中的 JW 播放器。无法隐藏控制栏

> ID：14426659
> 
> 赞同：0
> 
> 时间：2013-01-20T16:39:18.273
> 
> 标签：jquery, fancybox, jwplayer, fancybox-2

Folk's，我正在使用 Fancybox 和 Jwplayer 来显示视频，就像使用照片一样。我的问题是导航栏永远不会隐藏。此外，视频从 768px（原始尺寸）调整为 725px（显示尺寸），我不知道为什么。这是代码：HTML

```
 <a class="video" href="../img/advertising/img/video/NEOCLAIM_Femme.flv" title="NEOCLAIM Femme"><img src="../img/advertising/ico/ic02-neocalmF.jpg" alt="" /></a> 
```

和 JS

```
 $("a.video").click(function() {
   $.fancybox({
    'scrolling' : 'no',
    'padding' : 0,
    'title' : this.title,
    'type' :'swf',
    'content': '<embed src="../jwplayer/player.swf?file='+this.href+'&amp;autostart=true&amp;fs=1" type="application/x-shockwave-flash" width="768" height="432" wmode="opaque" allowfullscreen="true" allowscriptaccess="always"></embed>',
    helpers : {
        overlay : {
            css : {
                'background' : 'rgba(0, 0, 0, 1)'
            }
        }
    }              
   });
   return false;
  }); 
```

我是初学者，找不到解决方案。谢谢您的帮助。这是页面的链接[在此链接之后，您必须单击第一个缩略图](http://hatfab.dyndns.org/new-roberto/pages/advertising.html#)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:46:50.773

这并不是真正的花式问题，而是您可能在 LongTail 支持论坛上发现的问题。

如果您想隐藏（并在悬停时显示）JWPlayer 控制栏，您只需通过 flashvar 将其放在“**上方**” `controlbar=over`...这样当鼠标空闲时控制栏将自动隐藏，如果您悬停则显示播放时的视频。

另一方面，您可以使用`data-*`链接中的 (HTML5) 属性传递每个视频的特定大小，例如：

```
<a data-width="352" data-height="270" class="video" href="../img/advertising/img/video/NEOCLAIM_Femme.flv" title="NEOCLAIM Femme"><img src="../img/advertising/ico/ic02-neocalmF.jpg" alt="" /></a> 
```

...（使用每个视频的正确值`width`和`height`值）并在您的 fancybox 脚本中，使用 API 选项防止自动调整大小.... 然后使用回调`fitToView: false`捕获每个视频的尺寸。`afterLoad`

您完整的 fancybox 自定义脚本应该如下所示：

```
$(document).ready(function () {
  $(".video").fancybox({
    padding : 0,
    fitToView: false, // fancybox won't auto-resize to fit in viewport
    content: '<span></span>', // create temp content
    scrolling: 'no',
    helpers : { overlay : { css : {  'background' : 'rgba(0, 0, 0, 1)' }  }  },
    afterLoad: function () {
      var $width = $(this.element).data('width'); // get dimensions from data attributes
      var $height = $(this.element).data('height');
      // replace temp content
      this.content = "<embed src='jwplayer.swf?file=" + this.href + "&autostart=true&amp;wmode=opaque&amp;controlbar=over' type='application/x-shockwave-flash' width='" + $width + "' height='" + $height + "'></embed>"; 
    }
  });
}); // ready 
```

...**请注意**，我们添加`controlbar=over`了对象的字符串值`this.content`。另请注意，我们没有使用该`.click()`方法，而是将 fancybox 直接绑定到选择器`.video`。此外，我们实际上不需要`'title' : this.title`，或者`'type' :'swf'`我删除它们。

演示？……**[看这里](http://www.picssel.com/playground/jquery/JWplayer_ControlHide20jan13.html)**

# android - Android - FLAC_FileEncoder 无法解析为类型

> ID：14426660
> 
> 赞同：0
> 
> 时间：2013-01-20T16:39:27.993
> 
> 标签：android

全部，

我试图按照这篇文章的说明在答案区域提出问题，但已将其删除。我不知道如何在帖子中添加后续问题。堆栈流是否需要这样做？我认为让最初发布的人回复它很重要。

[如何在java中编写FLAC文件](https://stackoverflow.com/questions/7466698/how-to-write-flac-files-in-java)

向前进。

我使用 Eclipse 导入参考库：Project->Properties->JavaBuildPath->AddExternalJars 导航到 javaFlacEncoder-0.2.3.jar。

不幸的是，我收到以下错误消息：FLAC_FileEncoder 无法解析为类型

我以为我按照说明加载了一个外部 jar。Eclipse 能够告诉我将 lib 导入到文件中（它在选择时添加了代码）。你能告诉我我做错了什么吗？变量不应该来自导入。

Dl'd 来源： http: [//sourceforge.net/projects/javaflacencoder/ ?source=dlp](http://sourceforge.net/projects/javaflacencoder/?source=dlp)

有一个文档指南显示它应该在那里（这就是为什么我想和发布回复的人谈谈）。

代码：

```
import javaFlacEncoder.FLAC_FileEncoder;

.....

  private void convertWavToFlac(String wavFilename, String flacFilename) {
      // TODO Auto-generated method stub
      FLAC_FileEncoder flacEncoder = new FLAC_FileEncoder();   // <---- Error
      File inputFile = new File(wavFilename);
      File outputFile = new File(flacFilename);

      flacEncoder.encode(inputFile, outputFile);
      System.out.println("Converted Wave to Flac - Done");
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T01:06:20.663

所以，我最终发现我需要重新启动 eclipse。导致错误的错误是在更改清单时，加上构建/清理，我不是通过 eclipse 添加/删除文件。Eclipse 不太喜欢这个，而且一定对链接文件的内容感到困惑。

重新启动后还有其他错误。它们在下面的帖子中被识别。 [Eclipse for android：R 的问题](https://stackoverflow.com/questions/11746973/eclipse-for-android-issues-with-r)

# php - $_SERVER 和 apache_request_headers() 跨请求持久化？

> ID：14426661
> 
> 赞同：1
> 
> 时间：2013-01-20T16:39:56.497
> 
> 标签：php, apache, http-headers

我正在为 php 中的 Web 服务进行身份验证。当用户进行身份验证时，会生成一个会话。最终此会话到期，用户需要再次进行身份验证。身份验证信息在 http 标头中发送。

但似乎有时变量 $_SERVER（或 apache_request_headers()）会返回一些当前请求中客户端未发送的标头（它们是在以前的请求中发送的）。例如，有时我得到的变量 $_SERVER['HTTP_RESPONSE'] 填充了来自先前请求的信息。

$_SERVER 或 apache_request_headers() 在请求中“坚持”是否正常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:46:02.797

这取决于您是否使用浏览器访问脚本。

您的“持久”标头可能是由于浏览器缓存造成的，但即便如此，我也不完全确定发生了什么。我尝试使用 Fiddler 运行一些测试，但无法复制问题。

也许尝试清除缓存，因为可能已从以前版本的脚本中存储了不同的标头。

但是，我肯定会避免在标头中发送身份验证参数。除非您使用 HTTPS，否则它们很容易被嗅探和窃取。你为什么使用标题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:48:18.627

`$_SERVER`包含有关服务器的信息，它不一定包含任何请求/响应信息，它在服务器生命周期内是持久的（例如，SERVER_NAME 将持久，但与请求/响应无关）

`apache_request_headers()`包含一组已发送的标头，这些标头可能包含也可能不包含任何 cookie 和会话信息 - 它们取决于您用于访问服务器的客户端。

唯一在请求中持续存在的东西，它是 $_SESSION，因为每次您访问 $_SESSION 超全局时，它都会获取保存在文件系统上的会话信息（基本 PHP 实现），一些框架将会话保存在数据库中（比如 Yii）。

我假设您要创建基于请求标头的身份验证，因此您实际需要做的是解析 request_headers，将它们与合法的用户凭据进行匹配，然后简单地`open_session()`；并在会话中输入一个值，将用户标记为已验证，任何后续检查都将针对 $_SESSION 超全局或其他会话实现进行。

# ios - UIButton 标签不尊重上一个动画的完成处理程序在选择时设置的文本

> ID：14426669
> 
> 赞同：0
> 
> 时间：2013-01-20T16:41:24.450
> 
> 标签：ios, iphone, animation

在 _menuButton 的 touchUpInside 调用中，我执行动画以显示带有完成块的菜单，以将菜单的标签从“打开”更改为“关闭”。该动画效果很好，但是当您按下 _menuButton 时，即使用户取消点击或滑出按钮，它也会立即从“关闭”变为“菜单”。按钮标签的初始文本是“菜单”。

不确定它是否有区别，但我的 _menuButton 属性是：

```
@property (weak, nonatomic) IBOutlet UIButton *menuButton; 
```

动画加载菜单：

```
 [UIView animateWithDuration:0.50
                     animations:^{
                         [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                         _menuButton.center = CGPointMake(_menuButton.center.x + 120, _menuButton.center.y);
                         _quitButton.center = CGPointMake(_quitButton.center.x + 215, _quitButton.center.y);
                         _rulesButton.center = CGPointMake(_rulesButton.center.x + 215, _rulesButton.center.y);
                         _preferencesButton.center = CGPointMake(_preferencesButton.center.x + 215, _preferencesButton.center.y);
                         _quitButton.alpha = 1.0f;
                         _rulesButton.alpha = 1.0f;
                         _preferencesButton.alpha = 1.0f;
                         _menuButton.alpha = 1.0f;
                     } completion:^(BOOL finished) {
                         _menuButton.titleLabel.text = @"close";
                     }]; 
```

动画卸载菜单：

```
 [UIView animateWithDuration:0.50
                     animations:^{
                         [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
                         _menuButton.center = CGPointMake(_menuButton.center.x - 120, _menuButton.center.y);
                         _quitButton.center = CGPointMake(_quitButton.center.x - 215, _quitButton.center.y);
                         _rulesButton.center = CGPointMake(_rulesButton.center.x - 215, _rulesButton.center.y);
                         _preferencesButton.center = CGPointMake(_preferencesButton.center.x - 215, _preferencesButton.center.y);
                         _quitButton.alpha = 0.0f;
                         _rulesButton.alpha = 0.0f;
                         _preferencesButton.alpha = 0.0f;
                         _menuButton.alpha = 0.6f;
                     } completion:^(BOOL finished) {
                         _menuButton.titleLabel.text = @"menu";
                     }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:27:33.760

更改`_menuButton.titleLabel.text = @"close";`为

```
[_menuButton setTitle:@"close" forState:normal]; 
```

请参阅 [UIButton 类参考。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:55:54.443

[UIButton](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)提供了查询和设置标题的方法。您正在寻找的是：

```
- (void)setTitle:(NSString *)title forState:(UIControlState)state 
```

# actionscript-3 - Actionscript：ExternalInterface.addCallback() 究竟是如何工作的？

> ID：14426678
> 
> 赞同：0
> 
> 时间：2013-01-20T16:41:37.017
> 
> 标签：actionscript-3, flash, oop, first-class-functions

我对 ActionScript 很陌生，但对面向对象或一般的过程语言都不是新手。但是，ActionScript 对这两个类别的功能的特殊组合让我感到困惑。

具体来说，我对[ExternalInterface.addCallback()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#addCallback%28%29)的机制感到困惑。方法签名是：

```
public static function addCallback(functionName:String, closure:Function):void 
```

特别感兴趣的是闭包参数，它具有以下文档：

> **closure:Function** — 要调用的函数闭包。这可能是一个独立的函数，也可能是一个引用对象实例方法的方法闭包。通过传递方法闭包，您可以将回调指向特定对象实例的方法。

我认为上面的意思是闭包**只是**一个函数（不是方法），它可能是也可能不是包含来自实例化对象的方法调用的闭包。所以当我看到这样的代码（取自同一个文档页面）时，我会感到困惑：

```
public class ext_test extends Sprite {
    function ext_test():void {
        ExternalInterface.marshallExceptions = true;
        ExternalInterface.addCallback("g", g);

        try {
        ExternalInterface.call("throwit");
        } catch(e:Error) {
        trace(e)
        }
    }
    function g() { throw new Error("exception from actionscript!!!!") }
    } 
```

上面的代码插入了 to `addCallback`，一个非静态方法，`ext_test`没有将它包装在一个包含实例化`ex_test`对象的闭包中。

该方法包含一些琐碎的代码，但如果它有包含成员变量等的语句怎么办？当没有父对象时如何评估该方法？

此外，（因为`addCallback`似乎允许传递任意方法）文档没有提及访问修饰符对传递的方法（如果有）的影响。如果我将方法标记为私有，我仍然可以将它传递给 addCallback 吗？这是怎么回事？

如果有人能帮我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T21:42:58.687

如果您关心的是知道您传递的方法将在什么上下文中执行，这只是您附加它的上下文。

文档中的jibber jabber 简单的表示AS3 和runtime 中有几种函数。“独立”函数是指您通常所说的匿名函数 - 它仍然保留定义它们的上下文：

```
var anonymous:Function = createAnonymous();
trace(anonymous()); // 123

function createAnonymous():Function {
    var internalStuff:Number = 123;
    var func:Function = function():Number {
        return internalStuff;
    }
    return func;
} 
```

方法闭包是类方法的实例，就像对象是这些类的实例一样。因此，当您将方法闭包传递给 时`ExternalInterface.addCallback()`，您将在调用它时对上下文（即成员变量）是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:25:49.913

哎呀。完全忘记了在我见过的所有示例中，`addCallback`都是在构造函数的上下文中执行的，因此传递给它的方法引用具有要在其下执行的上下文。

因此，访问修饰符无关紧要，因为类中的所有内容都可以被类看到。

# javascript - CKEditor如何创建自定义样式下拉？

> ID：14426679
> 
> 赞同：2
> 
> 时间：2013-01-20T16:41:43.417
> 
> 标签：javascript, ckeditor, fckeditor

有没有办法在 Ckeditor 中创建自定义样式下拉菜单？

截屏：

![在此处输入图像描述](../Images/0030e75ae3f3ded1c9d025ca615fbab4.png)

从屏幕截图中可以看出，我希望能够创建一个新的下拉列表（如样式下拉列表）来包含这些黄色和绿色标记以及可能的其他我想要的标记。

我看过文档，但他们只展示了如何创建自定义按钮以添加到工具栏，但我不知道如何将带有样式的自定义下拉菜单添加到工具栏。

任何帮助将不胜感激。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T14:51:35.000

我相信你需要创建一个插件来完成这项工作。一个例子可以在这里找到： [http ://ckeditor.com/forums/CKEditor-3.x/Custom-drop-down](http://ckeditor.com/forums/CKEditor-3.x/Custom-drop-down)

此外，CKeditor 的插件似乎位于此处： [http ://ckeditor.com/addon/strinsert](http://ckeditor.com/addon/strinsert)

此插件将字符串添加到您的内容中，但您可以查看代码并了解如何使其添加样式。

# arrays - matlab数组赋值

> ID：14426684
> 
> 赞同：2
> 
> 时间：2013-01-20T16:42:02.717
> 
> 标签：arrays, matlab

我正在尝试将目录中的所有文件保存为字符串数组，如下所示：

`files = {'hello.gdf'; 'hello2.gdf'...; ... 'etc.gdf'}`

由于我有很多目录，我想自动执行此操作。这是我的代码：

```
gdffiles = dir(fullfile('D:', 'subject', '01', '*.gdf'))
for i=1:size(gdffiles)
    files(i) = gdffiles(i).name;
end 
```

我想指定`files`找到的 gdf ​​文件的名称，但我收到以下消息：

`??? Subscripted assignment dimension mismatch.`

`Error in ==> getFiles at 3 files(i) = gdffiles(i).name;`

我究竟做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:45:44.953

检查此解决方案

```
path       = fullfile('D:', 'subject', '01', '*.gdf');
files      = dir(path);
files      = struct2cell(files);
files      = files( 1, 1:end ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:47:19.807

**错误原因：**

您尝试`files`在`i`第一个位置分配一个字符串（`char`数组）`gdffiles(i).name`。但是，您使用的是数组元素分配（圆括号`()`）。因此，您会收到一个错误：您只能分配**一个** `char`using `files(i)`。

**可能的解决方案：**

1.  您应该分配给`files`使用花括号 - 因为`files`是一个`cell`数组：

    ```
    files{i} = gdffiles(i).name; 
    ```

2.  您可以通过以下方式在没有循环的情况下获得相同的结果：

    ```
    files = { gdffiles(:).name }; 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:05:20.513

你试过这个：

```
ListOfAllFiles = ls('*.gif') 
```

希望能帮助到你

# php - mysql select where limit, join where

> ID：14426685
> 
> 赞同：5
> 
> 时间：2013-01-20T16:42:06.133
> 
> 标签：php, mysql, sql, join

我有以下两个 MySQL 表

*   产品（product_id、名称、类别）
*   products_sizes (product_id, 尺寸)

每个产品都可以有多种尺寸

我需要查询

1.  根据类别和尺寸选择产品（如果设置了尺寸） - 例如类别 = 'shoes' 和尺寸 = '10'
2.  它仍然必须返回产品的所有尺寸，但前提是产品具有与其尺寸相同的特定尺寸
3.  它必须同时将产品的结果限制在一定数量的偏移量

我现在有以下查询。我工作但不受类别限制，只返回指定的一种尺寸（此处为“10”） - 我需要所有尺寸，但仅适用于尺寸中有“10”的产品......

```
SELECT products.*
     , products_sizes.*
FROM (
   SELECT *
   FROM products 
   LIMIT $limit OFFSET $offset
   ) AS products
LEFT JOIN products_sizes 
   ON products.products_id = products_sizes.products_id 
WHERE products_sizes.size = 10 
```

...如果我添加 WHERE category = 'something' 查询不返回任何内容...

```
SELECT products.*
     , products_sizes.*
FROM (
   SELECT * 
   FROM products 
   WHERE category = 'shoes' 
   LIMIT $limit OFFSET $offset
   ) AS products
LEFT JOIN products_sizes 
   ON products.products_id = products_sizes.products_id
WHERE products_sizes.size = 10 
```

??

**更新：越来越近...**

阅读答案后，我现在有了这个：

```
SELECT *
FROM products AS p 
LEFT JOIN products_sizes AS s 
    ON p.product_id = s.product_id
    WHERE s.product_id 
        IN (SELECT product_id FROM s WHERE size = 10)
    AND p.category = 'shoes' 
```

它满足了我最初的问题的前两个要求：

1.  返回受类别和大小限制的结果
2.  如果其中一个尺寸等于指定尺寸，则返回每个产品的所有尺寸

...但我仍然需要将结果限制为一定数量的产品。如果我在查询的最后放置一个 LIMIT $limit ，它将限制返回的尺寸数量而不是产品数量......感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:00:28.120

您的主查询中的`WHERE`子句违背了您的目的`LEFT JOIN`，使其与`INNER JOIN`. 您的派生表很可能没有选择任何匹配的行（尺寸为 10 的鞋子）。

除非您的数据没有显示某些内容，否则您可以尝试以下操作：

```
SELECT products.*
     , products_sizes.*
FROM products 
JOIN products_sizes 
   ON products.products_id = products_sizes.products_id
WHERE products.category = 'shoes' 
   AND products_sizes.size = 10
LIMIT $limit OFFSET $offset 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T09:55:41.310

您的最终查询是绝对正确的。只需在子查询中使用限制，这将绑定产品的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-05T22:06:03.723

您可能需要至少三种结果格式：

1.  每个尺寸一行，但仅限于 10 种不同的产品
2.  10 行 - 每个产品一个，一列包含逗号分隔的尺寸
3.  两个结果集，将在 PHP 中组合：
    *   10 个产品
    *   相关尺寸

对于每种格式，您需要以某种方式返回 10 种符合您条件的不同产品。

最有表现力的方式是使用 EXISTS 语句：

```
select p.*
from products p
where p.category = 'shoes'
and exists (
    select *
    from products_sizes ps
    where ps.product_id = p.product_id
      and ps.size = 10
)
order by p.product_id
limit $limit offset $offset 
```

另一种方法是使用 JOIN：

```
select p.*
from products p
join products_sizes ps
  on ps.product_id = p.product_id
where p.category = 'shoes'
  and ps.size = 10
order by p.product_id
limit $limit offset $offset 
```

由于其紧凑的代码，我将进一步使用第二个。但是你总是可以用 EXISTS 语句替换它。

**1.**

```
select p.*, ps.size
from (
    select p.*
    from products p
    join products_sizes ps
      on ps.product_id = p.product_id
    where p.category = 'shoes'
      and ps.size = 10
    order by p.product_id
    limit $limit offset $offset
) p
join products_sizes ps
  on ps.product_id = p.product_id
order by p.product_id, ps.size 
```

**2.**

```
select p.*, group_concat(ps.size order by ps.size) as sizes
from products p
join products_sizes ps1
  on ps1.product_id = p.product_id
join products_sizes ps
  on ps.product_id = p.product_id
where p.category = 'shoes'
  and ps1.size = 10
group by p.product_id
order by p.product_id
limit $limit offset $offset 
```

您可以使用`explode()`PHP 将字符串转换为数组：

```
$product->sizes = explode(',' $product->sizes); 
```

**3.**

```
select p.*
from products p
join products_sizes ps
  on ps.product_id = p.product_id
where p.category = 'shoes'
  and ps.size = 10
limit $limit offset $offset 
```

将结果存储在按产品 ID 索引的数组中。例如在 fetchAssoc 循环中：

```
$row->sizes = array();
$products[$row->product_id] = $row; 
```

从结果中提取产品 ID：

```
$productIds = (',', array_keys($products)); 
```

获取相关尺寸；

```
select product_id, size
from products_sizes
where product_id in ($productIds)
order by product_id, size 
```

在循环中链接尺寸

```
$products[$row->product_id]->sizes[] = $row->size; 
```

给定以下示例数据

```
| product_id |   name | category | sizes |
|------------|--------|----------|-------|
|          1 | shoes1 |    shoes |   8,9 |
|          2 | shirt1 |   shirts | 10,11 |
|          3 | shoes2 |    shoes |  9,10 |
|          4 | shoes3 |    shoes | 10,11 |
|          5 | shoes4 |    shoes | 10,12 | 
```

并使用`LIMIT 2 OFFSET 0`，结果将是：

**1.**

```
| product_id |   name | category | size |
|------------|--------|----------|------|
|          3 | shoes2 |    shoes |    9 |
|          3 | shoes2 |    shoes |   10 |
|          4 | shoes3 |    shoes |   10 |
|          4 | shoes3 |    shoes |   11 | 
```

**2.**

```
| product_id |   name | category | sizes |
|------------|--------|----------|-------|
|          3 | shoes2 |    shoes |  9,10 |
|          4 | shoes3 |    shoes | 10,11 | 
```

**3.**

```
| product_id |   name | category |
|------------|--------|----------|
|          3 | shoes2 |    shoes |
|          4 | shoes3 |    shoes |

| product_id | size |
|------------|------|
|          3 |    9 |
|          3 |   10 |
|          4 |   10 |
|          4 |   11 | 
```

演示：

*   [http://sqlfiddle.com/#!9/903c1/6](http://sqlfiddle.com/#!9/903c1/6)
*   [http://rextester.com/RZW84326](http://rextester.com/RZW84326)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-20T17:02:48.500

```
SELECT *
FROM products AS p
LEFT JOIN products_sizes AS s ON p.product_id = s.product_id
WHERE p.product_id IN (SELECT product_id FROM products_sizes WHERE size = 10)
LIMIT 15 
```

**编辑（解释）：**

我正在考虑它并意识到您可能也想知道其中的原因：p

您对满足特定标准的*产品感兴趣，因此这是您可供选择的主要表。*

您想知道该产品的可用尺寸，将尺寸连接到产品。

您只对具有一定尺寸的产品感兴趣。运行子查询以查找具有该尺寸的产品。仅显示那些产品。

# wcf - Mono for Android 中的 OData 质量

> ID：14426690
> 
> 赞同：1
> 
> 时间：2013-01-20T16:42:37.623
> 
> 标签：wcf, mono, xamarin.android, wcf-client, wcf-data-services-client

我正在寻找创建一些跨平台库。对于我的移动平台，对我来说最重要的事情之一就是访问 Web 服务。在做了相当多的阅读之后，似乎最好的解决方案是针对 DataServiceContext (wcf-data-services-client) 进行编写。

在我编写我的跨平台库并开始我的单声道 android 试用版之前，我想知道是否有人对 Android 上的这个库有任何经验？有没有人有在 Mono for Android 上使用任何 WCF 客户端库的经验？有关该主题的任何信息或个人经验都会有所帮助。

谢谢你。

# python - 快速创建 2 个大型随机矩阵并将它们相乘

> ID：14426691
> 
> 赞同：1
> 
> 时间：2013-01-20T16:42:42.543
> 
> 标签：python, numpy

我在 Python 方面的经验很少，但我想在深入研究之前做一些快速测试。我已经在我的 Windows（64 位）机器上安装了 Python 3.3。我还从这里[http://www.lfd.uci.edu/~gohlke/pythonlibs/](http://www.lfd.uci.edu/~gohlke/pythonlibs/)安装了 'numpy-MKL-1.7.0rc1.win-amd64-py3.3.‌exe' (NumPy) 。

完成所有这些设置后，我基本上想创建两个介于 0.0 和 1.0 之间的随机值的大矩阵 (10000 x 10000)，然后将它们相乘，也许还可以计算整个操作的时间。

使用此处的代码 - [https://stackoverflow.com/a/2710189/928007](https://stackoverflow.com/a/2710189/928007)在错误“NameError: name 'np' is not defined”中产生

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:44:49.370

该答案中的代码需要以下导入：

```
import numpy as np 
```

该语句需要在任何引用`np.<whatever>`.

# python - django admin搜索多个单词

> ID：14426692
> 
> 赞同：8
> 
> 时间：2013-01-20T16:42:49.660
> 
> 标签：python, django, django-admin

`search_fields`当搜索表达式有多个单词并且我想执行*startwith*搜索时，我无法使用

我有一堂课

```
class Foo(models.Model):
  kw = models.CharField(max_length = 255)
  ...

class FooAdmin(admin.ModelAdmin):
  search_fields = ('^kw',) 
```

`'^'`表示我要执行开始搜索。如果我正在寻找 kw 'foo fuu'，django 将执行查询：

```
select * from app_foo where `foo`.`kw` like 'foo%' and `foo`.`kw` like 'fuu%' 
```

这个查询显然给出了零结果。我应该怎么做才能使引擎寻找`'foo fuu%'`？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-23T22:49:13.020

如何覆盖`self.query`所以`split()`不起作用？

```
from django.contrib.admin.views.main import ChangeList

class UnsplitableUnicode(str):
    "An object that behaves like a unicode string but cannot be split()"
    def split(self, *args, **kwargs):
        return [self]

class MultiWordSearchChangeList(ChangeList):
    "Changelist that allows searches to contain spaces"
    def get_query_set(self, request):
        self.query = UnsplitableUnicode(self.query)
        return super(MultiWordSearchChangeList, self).get_query_set(request)

class FooAdmin(admin.ModelAdmin):
    def get_changelist(self, request, **kwargs):
        return MultiWordSearchChangeList 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T14:39:37.907

正如 Thai Tran 所说，这有点乱。这是您必须编辑的部分。

```
from django.contrib import admin
from django.contrib.admin.views.main import ChangeList

class CustomChangeList(ChangeList):
    def get_query_set(self, request):
        #Basically copy and paste in entire function and edit the piece copied in here.

        if self.search_fields and self.query:
            orm_lookups = [construct_search(str(search_field))
                           for search_field in self.search_fields]
            for bit in self.query.split():
                or_queries = [models.Q(**{orm_lookup: bit})
                              for orm_lookup in orm_lookups]
                qs = qs.filter(reduce(operator.or_, or_queries))
            if not use_distinct:
                for search_spec in orm_lookups:
                    if lookup_needs_distinct(self.lookup_opts, search_spec):
                        use_distinct = True
                        break

class FooAdmin(admin.ModelAdmin):
    def get_changelist(self, request, **kwargs):
        return CustomChangeList 
```

从经验来看，覆盖 ChangeList 会导致问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T01:18:05.880

这是一个可以对管理员进行高级搜索的片段链接：

[http://djangosnippets.org/snippets/2322/](http://djangosnippets.org/snippets/2322/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-27T16:06:02.690

这是[Mike Fogel 答案](https://stackoverflow.com/a/14490862/170159)的略微修改版本，在最近的 Django 版本中似乎不起作用：

```
from django.contrib import admin
from django.contrib.admin.views.main import ChangeList

class UnsplittableStr(str):
    "An object that behaves like a unicode string but cannot be split()"
    def split(self, *args, **kwargs):
        return [self]

class MultiWordSearchMixin:
    def get_changelist(self, request, **kwargs):
        query = request.GET.get('q', '')
        request.GET = request.GET.copy()
        request.GET['q'] = UnsplittableStr(query)
        return ChangeList 
```

现在您可以从`ModelAdmin`类中的 mixin 继承：

```
class FooAdmin(MultiWordSearchMixin, admin.ModelAdmin):
    """Your ModelAdmin code here""" 
```

# java - 吃豆人开/合嘴动画

> ID：14426693
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:42:51.693
> 
> 标签：java, swing, awt, java-2d, pacman

我想用最简单的方法制作 pacman 开/关嘴动画。这是我最近的代码：问题是，什么都没有发生？

```
package ordner;

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JFrame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class PacMan implements ActionListener {

private JFrame frame;
private DrawPanel panel;

private void initGui() {

frame = new JFrame("Pacman");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

panel = new DrawPanel();
frame.add(panel);
panel.setBackground(Color.BLACK);
frame.setSize(300, 300);
frame.setVisible(true);
}

 public static void main(String[] args) {
  PacMan pm = new PacMan();
  pm.initGui();
}

 @Override 
  public void actionPerformed(ActionEvent e) {
  panel.repaint();  
   }

 } 
```

这是我的绘图面板：

```
import java.awt.Color;
import java.awt.Graphics;
import javax.swing.JFrame;
import javax.swing.JPanel;

 public class DrawPanel extends JPanel  {

 @Override
  public void paintComponent(Graphics g) {
    super.paintComponent(g); 

g.setColor(Color.yellow);
g.fillArc(70,50,150,150,30,300);

int i = 0;
while ( i <= 60) {

  g.fillArc(70,50,150,150,30-i,300+i+i);

  try {
    Thread.sleep(25);
  }
  catch (Exception e) {
    Thread.currentThread().interrupt();
    }
    i++;

   } 
 }  

  } 
```

while 循环不会影响任何东西，这可能是什么原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T11:44:48.263

像这样的东西可能适用于 PacMan 图像。它使用基于 Java 2D 的`Shape`实例来表示表单，并使用一个`AffineTransform`来生成不同的方向。

![吃豆人 - 右](../Images/e63174a4485065d85ffe27a8e8c6d4b6.png) ![吃豆人 - 下](../Images/33dfe64c0160256b2dc314f6448118f6.png)
![吃豆人 - 向上](../Images/3bcf7f0c72e9745e92136b06defdcb91.png) ![吃豆人 - 左](../Images/c1a19e81b91e6cea13efc2fba31f933a.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.BufferedImage;
import javax.swing.*;

import java.io.*;
import javax.imageio.ImageIO;

class PacManShape {

    private double size;
    private double rotation;
    final int maxSize = 4;
    static File home = new File(System.getProperty("user.home"));
    static File images = new File(home, "images");

    PacManShape(int size, double rotation) {
        this.size = size;
        this.rotation = rotation;
    }

    public Area getPacManShape(double jaws) {
        Area area = new Area(new Ellipse2D.Double(0d, 0d, size, size));

        double x1 = size / 2 + (2d * size * Math.cos(jaws / 2d));
        double y1 = size / 2 + (2d * size * Math.sin(jaws / 2d));
        double x2 = x1;
        double y2 = size / 2 - (2d * size * Math.sin(jaws / 2d));

        Polygon mouth = new Polygon();
        mouth.addPoint((int) (size / 2), (int) (size / 2));
        mouth.addPoint((int) x1, (int) y1);
        mouth.addPoint((int) x2, (int) y2);
        mouth.addPoint((int) (size / 2), (int) (size / 2));

        area.subtract(new Area(mouth));

        return area;
    }

    public BufferedImage getPacManImage(double angle, Color color) {
        BufferedImage bi = new BufferedImage(
                (int) size, (int) size, BufferedImage.TYPE_INT_ARGB);

        Graphics2D g2 = bi.createGraphics();

        g2.setColor(color);
        g2.fillRect(0, 0, (int) size, (int) size);

        AffineTransform rotate = AffineTransform.getRotateInstance(
                rotation, size / 2, size / 2);
        g2.setTransform(rotate);

        Area pacMan = getPacManShape(angle);
        g2.setRenderingHint(
                RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
        g2.setColor(Color.YELLOW);
        float[] dist = {.15f, .9f};
        Color[] colors = {Color.YELLOW, Color.ORANGE};
        Point2D center = new Point2D.Double(size / 2, size / 2);
        RadialGradientPaint radial = new RadialGradientPaint(
                center, (float) ((size / 2) - 2f), dist, colors);
        g2.setPaint(radial);
        g2.fill(pacMan);
        GradientPaint gradient = new GradientPaint(
                0, 0, new Color(255, 255, 225, 220),
                (int) (size / 3), 0, new Color(255, 255, 255, 0));
        g2.setPaint(gradient);
        g2.fill(pacMan);

        g2.dispose();

        return bi;
    }

    public void savePacManImage(int q, int num) throws IOException {
        double angle = Math.PI*2 / 3d * ((double) num / (double) maxSize);
        BufferedImage bi = getPacManImage(angle, Color.WHITE);

        images.mkdirs();
        File img = new File(images, "PacMan-" + q + "x" + num + ".gif");
        ImageIO.write(bi, "gif", img);
    }

    public static void main(String[] args) {

        try {
            for (int ii = 0; ii < 4; ii++) {
                PacManShape pms = new PacManShape(100, (double) ii * Math.PI / 2d);
                for (int jj = 0; jj <= pms.maxSize; jj++) {
                    pms.savePacManImage(ii, jj);
                }
            }
            Desktop.getDesktop().open(images);
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        Runnable r = new Runnable() {

            @Override
            public void run() {
                JPanel gui = new JPanel(new BorderLayout());

                gui.add(new PacManComponent());

                JOptionPane.showMessageDialog(null, gui);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
}

class PacManComponent extends JPanel {

    double angle = 0d;
    int preferredSize = 100;
    double diff = Math.PI / 8;
    boolean chomp = true;
    Timer timer;

    PacManComponent() {
        ActionListener listener = new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                repaint();
            }
        };
        timer = new Timer(180, listener);
        timer.start();
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(preferredSize, preferredSize);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g.create();
        //double size = (getWidth() < getHeight() ? getWidth() : getHeight());
        if (angle > 2 * Math.PI / 3) {
            chomp = true;
        } else if (angle < 0.01) {
            chomp = false;
        }
        if (chomp) {
            angle -= diff;
        } else {
            angle += diff;
        }
        PacManShape pms = new PacManShape(100, 0d);

        Image image = pms.getPacManImage(angle, new Color(0, 0, 0, 0));
        g2.drawImage(image, 0, 0, this);

        g2.dispose();
    }
} 
```

如果您想在运行时转换和渲染图像，请尝试从这一系列使用部分透明度软化边缘的 PNG 格式图像开始。

![吃豆人 1](../Images/43f8061f7a60d9d0e6fa68946c852b40.png) ![吃豆人 2](../Images/07a986e031501da2c3435cdbf6dd2c4c.png) ![吃豆人 3](../Images/a1fe25c0173c9268e6966f6679b925f7.png) ![吃豆人 4](../Images/4af389fc83d6ff584e2fd5079d210c56.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T16:49:41.097

对于动画，您可以使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来移动 Pacman 图形以及调整“嘴”张开的角度，方法是改变`fillArc`.

`KeyEvents`可以使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)实现与移动控制的交互。

此外，我会将`paint`功能移动到`paintComponent`子类中的方法中以`JComponent`获得更好的绘制性能。

相关：[用 Swing 绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

* * *

**编辑：**

当您开始使用 Java 时，首先需要完成许多任务

1.  使用静态图形创建`JComponent`基础类。`Pacman`将您的绘画逻辑移动到`paintComponent`
2.  让 Swing Timer 功能正常工作。遵循[Oracle 的 Timers 指南](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。
3.  实施`Key Bindings`
4.  其他功能，例如记分等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T17:42:18.657

2d 动画： [http ://en.wikipedia.org/wiki/File:The_Horse_in_Motion.jpg](http://en.wikipedia.org/wiki/File:The_Horse_in_Motion.jpg)

伪代码：

```
while programActive:
    deltatime = get_time_since_last_call()
    update_animation_frame(deltatime)
    image = get_animation_frame()
    draw_background()
    draw(image)
    enforce_framerate(24) 
```

与 Java 相比，在 Pygame 中学习和做这类事情会很容易，但不适合大型项目

# android - 在 Android 应用程序中访问 WordNet dict 文件

> ID：14426697
> 
> 赞同：5
> 
> 时间：2013-01-20T16:42:59.357
> 
> 标签：android, wordnet, jwi

我正在用 Android 写一个文字游戏。这是我的第一个应用程序，所以我的知识几乎不存在。

我想做的是使用 JWI 访问 WordNet 字典。这需要指定 WordNet 字典的文件路径。

根据我的阅读，Android“资产”无法通过简单的文件路径获得，但 JWI 初始化 WordNet 字典 API 所需的是字典文件磁盘位置的 URL。

那么，最好的行动方案是什么？我应该在启动时将资产复制到 android 设备上的已知文件夹中吗？我想不出更好的方法，但这对我来说似乎完全愚蠢。

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T12:02:20.303

我有同样的问题（但是对于码头 webapp 而不是 android）并尝试了这两种方法，但是没有成功：

```
JWNL.initialize(this.getClass().getClassLoader().getResourceAsStream("wordnet_properties.xml");
dict = Dictionary.getInstance(); 
```

在这里它成功加载了 wordnet_properties.xml，但它无法访问属性文件指向的字典。

直接使用字典文件夹：

```
String dictPath = "models/en/wordnet/dict/";
URL url = this.getClass().getClassLoader().getResource(dictPath);
System.out.println("loading wordnet from "+url);
dict = new RAMDictionary(url, ILoadPolicy.NO_LOAD); 
```

在这里，我将字典 URL 设为`jar:file:/home/myusername/.m2/repository/package/1.0-SNAPSHOT/commons-1.0-SNAPSHOT.jar!/models/en/wordnet/dict/`. 但是 WordNet 不接受 jar 协议并给我错误：

```
java.lang.IllegalArgumentException: URL source must use 'file' protocol
    at edu.mit.jwi.data.FileProvider.toFile(FileProvider.java:693)
    at edu.mit.jwi.data.FileProvider.open(FileProvider.java:304)
    at edu.mit.jwi.DataSourceDictionary.open(DataSourceDictionary.java:92)
    at edu.mit.jwi.RAMDictionary.open(RAMDictionary.java:216) 
```

我的下一个调查将是为 RAMDictionary 或类似的东西创建一个子类，请告诉我您是否在此期间找到了解决方案。

PS：在我尝试重写 FileProvider 以改用资源后，我刚给开发人员写了一封寻求帮助的邮件，但一两个小时后我放弃了，因为代码调用了很多其他代码，这些代码也只适用于文件。我会及时通知你！

PPS：我收到了开发人员的答复，说流基本上不可能，因为它们不提供必要的随机访问。但是，如果真的有必要，他提出实施一种解决方案，将其全部加载到 RAM 中，但这会占用大约 500 MB，我想这对于 android 应用程序来说太多了，所以我想最好还是把它解压到某个地方。

PS：这是我的解包解决方案（如果您使用日志记录，可以将 System.out.println 语句替换为 logger 语句，如果您不喜欢它们，可以将其删除）：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.URISyntaxException;
import java.util.Enumeration;
import java.util.jar.JarEntry;
import java.util.jar.JarFile;

/** Allows WordNet to be run from within a jar file by unpacking it to a temporary directory.**/
public class WordNetUnpacker
{
    static final String ID = "178558556719"; // minimize the chance of interfering  with an existing directory  
    static final String jarDir = "models/en/wordnet/dict";

    /**If running from within a jar, unpack wordnet from the jar to a temp directory (if not already done) and return that.
     * If not running from a jar, just return the existing wordnet directory.
     * @see getUnpackedWordNetDir(Class)*/
    static File getUnpackedWordNetDir() throws IOException
    {return getUnpackedWordNetDir(WordNetUnpacker.class);}

    /**If running from within a jar, unpack wordnet from the jar to a temp directory (if not already done) and return that.
     * If not running from a jar, just return the existing wordnet directory.
     * @param clazz the class in whose classloader the wordnet resources are found.
     * @see getUnpackedWordNetDir()**/

    static File getUnpackedWordNetDir(Class clazz) throws IOException
    {
        String codeSource = clazz.getProtectionDomain().getCodeSource().getLocation().getPath();
        System.out.println("getUnpackedWordNetDir: using code source "+codeSource);
        if(!codeSource.endsWith(".jar"))
        {
            System.out.println("not running from jar, no unpacking necessary");
            try{return new File(WordNetUnpacker.class.getClassLoader().getResource(jarDir).toURI());}
            catch (URISyntaxException e) {throw new IOException(e);}
        }
        try(JarFile jarFile = new JarFile(codeSource))
        {
            String tempDirString = System.getProperty("java.io.tmpdir");
            if(tempDirString==null) {throw new IOException("java.io.tmpdir not set");}
            File tempDir = new File(tempDirString);
            if(!tempDir.exists()) {throw new IOException("temporary directory does not exist");}
            if(!tempDir.isDirectory()) {throw new IOException("temporary directory is a file, not a directory ");}
            File wordNetDir = new File(tempDirString+'/'+"wordnet"+ID);
            wordNetDir.mkdir();
            System.out.println("unpacking jarfile "+jarFile.getName());
            copyResourcesToDirectory(jarFile, jarDir, wordNetDir.getAbsolutePath());
            return wordNetDir;
        }       
    }
    /** Copies a directory from a jar file to an external directory. Copied from <a href="http://stackoverflow.com/a/19859453/398963">Stack Overflow</a>. */
    public static void copyResourcesToDirectory(JarFile fromJar, String jarDir, String destDir) throws IOException
    {
        int copyCount = 0;
        for (Enumeration<JarEntry> entries = fromJar.entries(); entries.hasMoreElements();)
        {
            JarEntry entry = entries.nextElement();
            if(!entry.getName().contains("models")) continue;
            if (entry.getName().startsWith(jarDir) && !entry.isDirectory()) {
                copyCount++;
                File dest = new File(destDir + "/" + entry.getName().substring(jarDir.length() + 1));
                File parent = dest.getParentFile();
                if (parent != null) {
                    parent.mkdirs();
                }

                FileOutputStream out = new FileOutputStream(dest);
                InputStream in = fromJar.getInputStream(entry);

                try {
                    byte[] buffer = new byte[8 * 1024];

                    int s = 0;
                    while ((s = in.read(buffer)) > 0) {
                        out.write(buffer, 0, s);
                    }
                } catch (IOException e) {
                    throw new IOException("Could not copy asset from jar file", e);
                } finally {
                    try {
                        in.close();
                    } catch (IOException ignored) {}
                    try {
                        out.close();
                    } catch (IOException ignored) {}
                }
            }
        }
        if(copyCount==0) System.out.println("Warning: No files copied!");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-09T11:30:47.607

您可以将所有 dict 文件从“assets”复制到应用程序的内部目录。只需在第一个应用程序启动时执行一次。从那时起，您可以像这样随意使用 JWI：

```
String path = getFilesDir() + "/dict";
URL url = new URL("file", null, path);
IDictionary dict = new Dictionary(url); 
```

# php - 一个带有两个 PDO 查询的 PHP 脚本？

> ID：14426710
> 
> 赞同：0
> 
> 时间：2013-01-20T16:44:32.767
> 
> 标签：php, mysql, pdo, crud

我最近开始在重建客户的出租车预订系统时使用 PDO。

我有一个名为 create_booking.php 的脚本，它最初将预订详细信息插入 MySQL 数据库中的预订表中。插入客户详细信息后，它会检索 lastinsertID 以获取预订参考。然后它在作业表中创建一个作业并引用预订参考来关联作业/预订。

第一个插入工作正常，但第二个插入不是 . 有任何想法吗？

```
 if (isset($_POST['customer_title'])) {

  include('../assets/db_connection.php');

  $create_booking = $db->prepare("INSERT INTO bookings(customer_name, billing_address,    contact_tel, contact_mob, contact_email, party_pax, party_cases, booking_notes, price, booking_agent, booking_date, booking_status, authorised)
                                      VALUES(:customer_name, :billing_address, :contact_tel, :contact_mob, :contact_email, :party_pax, :party_cases, :booking_notes, :price, :booking_agent, :booking_date, :booking_status, :authorised );");
  $create_booking->execute(array(
      ":customer_name"       =>   $customer_title  . ' ' .   $customer_first_name  . ' '  .   $customer_last_name,
      ":billing_address"     =>   $billing_address,
      ":contact_tel"         =>   $customer_tel,
      ":contact_mob"         =>   $customer_mobile,
      ":contact_email"       =>   $customer_email,
      ":party_pax"           =>   $passengers,
      ":party_cases"         =>   $cases,
      ":booking_notes"       =>   $booking_notes,
      ":price"               =>   $price,
      ":booking_agent"       =>   $booking_agent,
      ":booking_date"        =>   $booking_date,
      ":booking_status"      =>   $booking_status,
      ":authorised"          =>   $authorised    
    ));

  $booking_ref = $db->lastInsertId('booking_ref'); // Takes Booking Ref generated in $create_booking

  $create_job    = $db->prepare("INSERT INTO jobs(booking_ref, pickup_date, pickup_time, pickup_address, destination_address, return, scheduled)
                                (:booking_ref, :pickup_date, :pickup_time, :pickup_address, :destination_address, :return, :scheduled )");

  $create_job->execute(array(

      ":booking_ref"          =>  $booking_ref,
      ":pickup_date"          =>  $pickup_date,
      ":pickup_time"          =>  $pickup_time,
      ":pickup_address"       =>  $pickup_address,
      ":destination_address"  =>  $pickup_destination,
      ":return"               =>  "N",
      ":scheduled"            =>  "N"

    ));

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:48:53.247

您的第二个 SQL 查询丢失`VALUES`。

`INSERT INTO() ... VALUES()`

`$create_job = $db->prepare("INSERT INTO jobs(booking_ref, pickup_date, pickup_time, pickup_address, destination_address, return, scheduled) VALUES (:booking_ref, :pickup_date, :pickup_time, :pickup_address, :destination_address, :return, :scheduled )");`

# android - 冻结旧 SDK 的 Android APK 版本

> ID：14426712
> 
> 赞同：1
> 
> 时间：2013-01-20T16:44:47.473
> 
> 标签：android

我了解多个 APK 在 Google Play 上的工作方式，但到目前为止，我已经支持 V7 (2.1) 及更高版本的单个 APK。我想开始使用可能更难以向后兼容的 Android 3.x-4.x+ 功能，而且我不介意不必构建这个不断增长的兼容性库。但我仍然想让 Android 2.x 用户可以使用该产品，即使该版本将被“冻结”并且不会获得未来的产品增强功能。

那么这应该怎么做最好呢？我可以使用基本的多 APK 方法，但是 2.x 设备的用户可能会在产品描述中看到他们将要安装的 APK 中没有的内容。但是版本号会根据与用户设备匹配的 APK 正确显示吗？

做过这件事的人有什么其他想法吗？

# php - 如何使用 PHP 解析文件

> ID：14426715
> 
> 赞同：1
> 
> 时间：2013-01-20T16:45:04.187
> 
> 标签：php, arrays, fileparsing

我有这个文件，我不知道如何解析这个文件。

```
type = 10
version = 1.2
PART
{
    part = foobie
    partName = foobie
    EVENTS
    {
        MakeReference
        {
            active = True
        }
    }
    ACTIONS
    {
    }
}
PART
{
    part = bazer
    partName = bazer
} 
```

我希望这是一个看起来像的数组

```
$array = array(
    'type' => 10,
    'version' => 1.2,
    'PART' => array(
        'part' => 'foobie',
        'partName' => 'foobie,
        'EVENTS' => array(
            'MakeReference' => array(
                'active' => 'True'
            )
        ),
        'ACTIONS' => array(
        )
    ),
    'PART' => array(
        'part' => 'bazer',
        'partName' => 'bazer'
    )
); 
```

我尝试使用 preg_match 但这并不成功。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:46:16.043

为什么不使用 PHP 可以原生解码的格式，比如 JSON？

[http://php.net/json_decode](http://php.net/json_decode)

```
$json = file_get_contents("filename.txt");
$array = json_decode($json);
print_r($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:00:53.517

这是我的方法。

首先更改我将 { 更改为之前的行。这很容易

```
$lines = explode("\r\n", $this->file);
foreach ($lines as $num => $line) {
    if (preg_match('/\{/', $line) === 1) {
       $lines[$num - 1] .= ' {';
       unset($lines[$num]);
    }
} 
```

现在输入看起来像这样

```
PART {
    part = foobie 
```

现在我们可以将整个事情改为 XML，我知道我在问题中说的是 PHP 数组，但是 XML 对象仍然足够好。

```
foreach ($lines as $line) {
            if (preg_match('/(.*?)\{$/', $line, $matches)) {
                $xml->addElement(trim($matches[1]));
                continue;
            }

            if (preg_match('/\}/', $line)) {
                $xml->endElement();
                continue;
            }

            if (strpos($line, ' = ') !== false) {
                list($key, $value) = explode(' = ', $line);
                $xml->addElementAndContent(trim($key), trim($value));
            }
} 
```

addElement 实际上只是将 a 添加到字符串 endElement 添加 a 和 addElementAndContent 两者都做，并在它们之间添加内容。

并且只是为了使整个内容成为一个 XML 对象，我正在使用

```
$xml = simplexml_load_string($xml->getXMLasText()); 
```

现在 $xml 是一个 XML 对象，使用起来更容易:)

# wpf - 错误 175：在配置中找不到指定的存储提供程序 - Sql Server CE

> ID：14426716
> 
> 赞同：0
> 
> 时间：2013-01-20T16:45:09.943
> 
> 标签：wpf, entity-framework, sql-server-ce

o我正在 .net 4.0 中构建 WPF 应用程序。我有一个本地数据库`.sdf`文件。我正在使用 EF 连接到数据库。构建应用程序时，我得到`Error 175: The specified store provider cannot be found in configuration`

我尝试删除并重新创建模型和 sdf 文件。我尝试了[此](https://stackoverflow.com/questions/2540784/using-entity-framework-with-an-sql-compact-private-installation/2542055#2542055)链接中详细介绍的所有内容以及从中获取的博客文章。

我不能让这个错误消失。该应用程序在我的机器上运行（错误在`edmx`文件中，因此它仍然运行），但是当我发布它并在另一台计算机上运行安装程序时，我在消息框中收到相同的错误。

我的本地机器是安装了 VS2010 的 Windows 2008 R2 64bit。我正在安装的机器是 Windows 7 32bit。

**编辑：**也试过[这个](http://msdn.microsoft.com/en-us/library/aa983326(v=vs.100).aspx)并得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:24:06.650

我再次下载了 SQL Server CE 并进行了修复安装，然后重新打开了 VS2010，进行了构建，错误消失了。

我卸载并重新安装了它并没有帮助，所以我真的不知道为什么会这样，但是你去了。

# jquery - jQuery ajax 切换回点击的 img src

> ID：14426717
> 
> 赞同：0
> 
> 时间：2013-01-20T16:45:16.007
> 
> 标签：jquery, ajax, thumbnails

我有一个使用点击的ajax从拇指放大到大的图像。

他们使用相同的 html 元素只是替换了 img src，例如：

```
src="image_thumb.jpg" 
```

切换到

```
src="image_large.jpg" 
```

我的问题是，当用户再次点击时如何切换回拇指图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:47:20.347

您可以使用[toggle-event](http://api.jquery.com/toggle-event/) API 来使用两个功能：一个是从 thumb 更改为 large，另一个是从 large 更改为 thumb。通过使用切换，每次用户单击时，它将在两者之间交替。

如果你想尝试类方法，你可以这样做：

```
$('img').on('click', function(){
   if ($(this).hasClass('thumb')){
     $(this).removeClass('thumb').addClass('large');
     //set your large image here
   } else {
     $(this).removeClass('large').addClass('thumb');
     //set your thumb image here
   }
}); 
```

这里的好处是您可以使用 CSS 进行任何更改以适应大图像或缩略图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:11:38.880

由于`toggle`在 1.8 中已弃用并在 1.9 中删除，因此您应该这样做

```
$('img').on('click', function(){
  var $this = $(this);
  if ($this.data('originalSrc')){
    $this.prop('src', $this.data('originalSrc'));
    $.removeData(this, 'originalSrc');
  } else {
    $this.data('originalSrc', $this.attr('src'));
    $this.prop('src', 'image_large.jpg');
  }
}); 
```

演示[http://jsfiddle.net/PSFeJ/](http://jsfiddle.net/PSFeJ/)

# jquery-ui - 将选项动态附加到选择中不起作用

> ID：14426721
> 
> 赞同：1
> 
> 时间：2013-01-20T16:45:26.593
> 
> 标签：jquery-ui

DDL 没有用新的选项集刷新

$("#selectid").live('change', function () { if ($('option:selected', $(this)).text() == '--Next 50--') {

```
 var currentFifty = (parseInt($(this).val()) - 1);

                var upperFifty = parseInt(currentFifty + 50);

                var cOptions = '';

                for (var i = currentFifty; i < upperFifty; i++) {

                    if (collection[i].ID != null && collection[i].ID != "undefined") {
                        cOptions = cOptions + "<option value=" + collection[i].ID + ">" + collection[i].Text + "</option>";

                    }

                }

                alert($(this).html());

                $(this).append(cOptions);

                $(this).append($("<option></option>").val((upperFifty + 1)).html("--Next 50--"));

                var allhtml = ($(this).html());

                $(this).trigger('refresh');

            }
        }); 
```

# java - 我没有收到来自 Java 的 DatagramPacket 的响应

> ID：14426722
> 
> 赞同：1
> 
> 时间：2013-01-20T16:45:33.590
> 
> 标签：java, sockets, packet, datagram

我想检查一个远程主机服务器是否接受特定端口上的 UDP 数据包。使用 SocketServer，我可以建立 TCP/IP 连接并且它可以工作，但我必须使用 UDP。

```
DatagramSocket ds;
DatagramPacket dp;
byte[] bytes = new byte[32];
InetAddress IAddress = new InetAddress.getByName("86.55.X.X");    

ds = new DatagramSocket();
ds.setSoTimeout(100);
ds.connect(IAddress, 1122);
ds.send(dp);
ds.isConnected();
dp = new DatagramPacket(bytes, bytes.length);
ds.receive(dp);
ds.close(); 
```

它上面的代码应该可以工作，我不知道如何测试它，因为我没有找到任何可以运行/测试上面代码的主机/软件。我正在尝试在远程主机上对其进行测试。远程主机禁用了 Windows 操作系统和防火墙。它有一个路由器，防火墙也被禁用。我可以访问远程服务器并在路由器中进行更改。我的问题是：如果唯一打开的端口用于 TCP/IP，远程主机可以接受 UDP 数据包吗？（端口转发）。在路由器控制面板中，我只能为 TCP/IP 进行端口转发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:55:33.647

你绝对应该试一试`localhost`（`localhost`你可以很容易地调试你的软件在收到东西时发生了什么）。

此外，您应该希望绑定您`DatagramSocket`的端口以接收数据包。发送时不需要`DatagramSocket`连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T19:06:39.270

您需要将以下变量传递给您的 JRE

```
java -Djava.net.preferIPv4Stack=true  ... 
```

# ios - UIPageViewController 方向只向前

> ID：14426728
> 
> 赞同：7
> 
> 时间：2013-01-20T16:46:00.190
> 
> 标签：ios, uiviewcontroller, ios6, datasource, uipageviewcontroller

目标是创建一个只能向前导航的 UIPageViewController。我正在使用数据源为 UIPageViewController 提供内容。方向设置为**UIPageViewControllerNavigationDirectionForward**，过渡样式为**UIPageViewControllerTransitionStyleScroll**。

实施

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    // returns the next view controller
} 
```

返回下一个视图控制器，而以下应确保向后导航是不可能的

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    return nil;
} 
```

返回 nil 应该表明导航是不可能的（如文档中所述）。但是，我总是可以向后滚动一页。假设我有 10 页，我可以向前滚动所有页面，但在任何页面我都可以向后滚动 1 页。（例如：在第 5 页我可以回到第 4 页，在第 8 页我可以回到第 7 页，依此类推。）

我知道我可以通过不使用数据源并使用*setViewControllers:direction:animated:completion:*方法来避免这种情况，但我想了解为什么我的尝试失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T19:10:12.430

这是您在 pageViewController 将其转换样式设置为滚动时得到的行为——我不知道为什么，但它与将滚动视图插入到层次结构中的某处有关（如果我可以看到它被分配）在打开仪器的情况下运行我的项目）。如果过渡是 Page Curl，那么如果你在你做的地方返回 nil，你就不会显示任何前一页。

所以，我认为你坚持使用 setViewControllers:direction:animated:completion: 除非你想切换到 Page Curl 动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-13T18:04:15.487

这是一个简单的解决方案，只需在协议中将 isLeftScrollEnabled 的默认值设置为 false： [UIPageViewController with 可配置滚动方向](https://stackoverflow.com/questions/22098493/how-do-i-disable-the-swipe-gesture-of-uipageviewcontroller/58366298#58366298)

# ember.js - 遵循 #linkTo 助手的 emberjs 指南不显示单个帖子

> ID：14426730
> 
> 赞同：0
> 
> 时间：2013-01-20T16:46:02.810
> 
> 标签：ember.js, ember-router

我有一个带有如下所示路线的**[jsfiddle ，它与](http://jsfiddle.net/rxWzu/2/)****[emberjs 指南](http://emberjs.com/guides/templates/links/)**中的路线完全相同，当我单击附加到**{{post.title}}的****#linkTo 助手**时，它应该向我显示单个帖子，但它没有，而是控制台显示此错误：

 ****未捕获的错误：断言失败：无法在未定义的对象上调用带有“id”的 get。**

此外，当我单击主页上的帖子链接时，它会显示所有标题，但在控制台中，它也会显示此错误：

**未捕获的错误：您所做的某事导致视图在渲染后但在插入 DOM 之前重新渲染。**

```
EmBlog.Router.map(function() {
  this.resource("posts", function(){
    this.route('show', {path: '/:post_id'}) ;
  });
}); 
```

与[emberjs指南相同的模板](http://emberjs.com/guides/templates/links/)

```
<script type="text/x-handlebars" data-template-name="posts/index">
  {{#each post in content}}
    <p>{{#linkTo 'posts.show' post}} {{post.title}}  {{/linkTo}}</p>
 {{/each}}
</script> 
```

我查看了这个**[提交，它添加了对字符串文字的支持作为 {{linkTo}} 的参数](https://github.com/emberjs/ember.js/commit/b2e82aecf22c2654eb6e6894f5a0b82e2adfe5ed)**，特别是来自该提交的以下建议：

现在，Ember 允许您将字符串文字指定为参数。**{{#linkTo post popular}}**将在当前上下文中查找“流行”属性并生成一个指向具有该 ID 的模型的 URL。而**{#linkTo post "popular"}}**会将字符串文字 "popular" 视为模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:57:39.170

似乎唯一的问题是您忘记将上下文传递给 posts/show 模板中的 linkTo posts.edit 助手。

```
<script type="text/x-handlebars" data-template-name="posts/show">
  <h1>Post</h1>
  <p>Your content here.</p>
  <h3> {{title}} </h3>
  <h3> {{body}} </h3>
  <br/>
  <p> {{#linkTo 'posts.index'}} back {{/linkTo}}</p>
  <p> {{#linkTo 'posts.edit' content}} Edit the post  {{/linkTo}}</p>  
</script> 
```

这是一个工作小提琴，顺便说一句，我已经清理了一些，有些东西对我来说似乎没用。

[http://jsfiddle.net/rxWzu/9/](http://jsfiddle.net/rxWzu/9/)**

# css - 用时尚或 Chrome 用户脚本替换网站上的“Helvetica”字体？

> ID：14426738
> 
> 赞同：2
> 
> 时间：2013-01-20T16:46:41.523
> 
> 标签：css, google-chrome, font-face, userscripts, stylish

我对使用 Helvetica 字体和 Helvetica Neue 的网站有疑问。
我尝试获得一些帮助来修复它，但它显然是我的 Linux 安装的问题。

由于我自己无法修复它，我想为我的 Chrome 浏览器编写用户样式（时尚）或用户脚本，以检测使用 Helvetica 或 Helvetica Neue 的网站。
如果使用了这些字体，则将它们替换为其他字体。

这怎么可能实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T08:40:30.257

如果这仅**适用于几个网站，请使用[Stylish](https://addons.mozilla.org/en-US/firefox/addon/stylish/)**，并仅针对页面中那些有问题的部分进行调整。例如：

```
@-moz-document domain("stackoverflow.com"), domain("askubuntu.com") {
    body, p, div, textarea {
        font-family: comic sans !important;
    }
} 
```

如果它**适用于所有网站，Stylish 或用户脚本不是您最好的选择。**
这是因为：

1.  对于 Stylish 来说，寻找并添加适当的 CSS 选择器将是一项全职工作。
2.  或者，对 Stylish 采取全面的方法，例如：

    ```
    * {
        font-family: comic sans !important;
    } 
    ```

    毫无疑问会破坏一些网站的布局。

3.  理论上，用户脚本只有在设置为 Helvetica 时才能替换 CSS，但会出现以下两个问题之一：

    1.  检查样式表似乎更有效，但由于安全限制，您的脚本将被阻止读取/写入某些表。尽管您最感兴趣的样式表可能是可读的（相同的域，而不是在 JS 创建的 iframe 中）。
    2.  相反，您可以检查每个元素的计算样式，但是您必须监视 AJAX 更改，这可能会占用 CPU 资源。

对于一揽子方法，**最明智的做法是修复或重新安装 Linux 操作系统。**

至少，您应该能够将系统的 Helvetica 字体映射到其他字体（我知道您可以在 Windows 上做到这一点，所以 Linux 可能也有一个机制）。

最好在[Unix 和 Linux](https://unix.stackexchange.com/)或[超级用户](https://superuser.com/)上提问，以帮助解决系统字体问题。

# javascript - 选择 td 值 onClick

> ID：14426739
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:46:45.857
> 
> 标签：javascript, function, select

我想从表中选择（突出显示）第二个 td 标记的内容。每个第二个 td 标签都有一个`onClick`调用函数的属性。

该函数应该选择 td 的内容。

示例：http: [//jsfiddle.net/RCpKy/1/](http://jsfiddle.net/RCpKy/1/)

在这种情况下，该函数应通过单击来`selectThis`选择每个字段。`value`

仅限 JS（无 jQuery）。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:55:20.463

试试这个代码

```
 function selectThis(element) {

    element.style.backgroundColor="#f3f3f3";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:32:18.880

`element.textContent`小于等于 IE7 的中断， `element.innerHTML`有效，但我建议使用`firstChild.nodeValue`

```
function selectThis(element) {

var selectedTdValue = element.firstChild.nodeValue;

alert(selectedTdValue)
} 
```

# javascript - 动态制作可调整大小的 div 不起作用

> ID：14426741
> 
> 赞同：0
> 
> 时间：2013-01-20T16:46:50.677
> 
> 标签：javascript, jquery, jquery-ui

我有一个使用 jquery 动态创建 div 的函数，用户可以定义几个属性来设置 div 的样式。问题是我希望 div 可以调整大小，但生成的 div 是用户定义的大小，但我无法调整它的大小。

这是我的功能：

```
function createDiv(id, divWidth, divHeight, divContent, divBgColor, opacity){
    //FIRST HEX TO RGB FOR BG COLOR & OPACITY
    var currentColor = hexToRgb(divBgColor);
    //CREATE THE WRAPPER DIV
    var wrapper = $('<div/>', {
        id: id
    }).css({
        "backgroundColor": 'rgba('+currentColor+' '+opacity+')',
        "min-width": divWidth,
        "min-height": divHeight
    }).resizable({
        containment: 'parent',
        minHeight: divHeight,
        minWidth: divWidth
        }).appendTo('.current-layer');
} 
```

这是对函数的调用：

```
onclick="createDiv('1', '200px', '100px', 'text', '#FF0000', 0.5)" 
```

我希望有人能告诉我我做错了什么！TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:24:04.767

parent( `containment`) 的宽度/高度必须高于可调整大小的最小宽度/最小高度。当前未设置宽度和高度，因此它将是 100% 和 0

结果：您可以调整大小：

*   **宽度：** 200px，直到容器的宽度（100%）

*   **height:** 100px 到容器的高度（也是 100px，来源于它的内容），所以高度是不可调整的

演示：http: [//jsfiddle.net/doktormolle/VnCHA/](http://jsfiddle.net/doktormolle/VnCHA/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:25:41.797

我解决了这个问题，感觉有点像布偶。因为 div 是动态创建的，所以我必须在将其附加到 DOM**后调整其大小。**

# c# - 等效于 DbContext 上的 ObjectContext.AddObject(entityName, entity)

> ID：14426745
> 
> 赞同：4
> 
> 时间：2013-01-20T16:47:20.620
> 
> 标签：c#, entity-framework, ado.net, upgrade, entity-framework-5

我升级了一个开始的旧项目，`ef4`但现在我将它迁移到`ef5`.

这是旧代码：

```
protected void SaveEntity<T>(T entity)
{
        using (DocsManagerContainer context = new DocsManagerContainer())  
                {  
                    string entityType = typeof(T).ToString();  
                    GetLogger().LogMessage("Save " + entityType + " started", LogLevel.Info);  
                    DbTransaction transaction = null;  
                    try  
                    {  
                        context.Connection.Open();  
                        transaction = context.Connection.BeginTransaction();  
                        context.AddObject(typeof(T).Name + "s", entity);  
                        transaction.Commit();  
                        context.SaveChanges();  
                    }  
                    catch (Exception e)  
                    {  
                        GetLogger().LogMessage("Save " + entityType + " thrown error :", e, LogLevel.Error);  
                        throw e;  
                    }  
                    finally  
                    {  
                        context.Connection.Close();  
                        transaction = null;  
                    }  
                    GetLogger().LogMessage("Save " + entityType + " ended", LogLevel.Info);  
                }  
    } 
```

我已经升级了几乎所有的代码，除了 : `context.AddObject(typeof(T).Name + "s", entity);`，但这不再受支持。
我怎样才能升级这个？

ps我确实想使用通用代码，而不是使用开关添加相应的对象来纠正`ObjectSet` ps错误如果我使用.Set().Add(entity)是：

```
Error   2   The type 'T' must be a reference type in order to use it as parameter 'TEntity' in the generic type or method 'System.Data.Entity.DbContext.Set<TEntity>()' D:\work\DocsManager\trunk\DocsManagerDataMapper\EF4Factory\BaseEF4Factory.cs    64  21  DocsManagerDataMapper 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T17:03:29.003

使用 DbContext，您可以使用`context.Set<T>().Add(entity)`;

示例：`context.Set<User>()`等价于`context.Users`so`context.Set<User>().Add(myUser)`等价于`context.Users.Add(myUser)`.

你想要更接近这个的东西：

```
protected void SaveEntity<T>(T entity)
    where T : class
{
    using (DocsManagerContainer context = new DocsManagerContainer())  
    {  
        DbTransaction transaction = null;  
        try  
        {  
            context.Connection.Open();  
            transaction = context.Connection.BeginTransaction();  
            context.Set<T>().Add(entity);  
            transaction.Commit();  
            context.SaveChanges();  
        }  
        finally  
        {  
            context.Connection.Close();  
                transaction = null;  
        }
    }
} 
```

# ruby-on-rails - 使用 rspec 测试设计视图

> ID：14426746
> 
> 赞同：12
> 
> 时间：2013-01-20T16:47:24.310
> 
> 标签：ruby-on-rails, authentication, rspec, devise, tdd

我已经生成了 Devise 正在运行的视图`rails g devise:views`，现在想测试它们。

这就是我想出的：

```
require 'spec_helper'

describe "devise/sessions/new" do
    before do
        render
    end

    it "renders the form to log in" do
        rendered.should have_selector("form", action: user_session_path, method: :post) do |form|

        end
    end
end 
```

对于它给我的渲染语句`undefined local variable or method 'resource'`。[谷歌搜索](https://groups.google.com/forum/?fromgroups=#!topic/plataformatec-devise/fMuUbVUQa3U)后，我发现我应该添加

```
@user.should_receive(:resource).and_return(User.new) 
```

在渲染语句之前 - 但它仍然给我同样的错误，我不确定如何使用它。

我究竟做错了什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-12T14:18:48.133

只是另一个想法，以防有人遇到同样的问题。我不是很喜欢将代码添加到我的助手中，只是为了让测试可以通过，所以我最终在我的测试中的 before 块中添加了这段代码：

```
before do
  view.stub(:resource).and_return(User.new)
  view.stub(:resource_name).and_return(:user)
  view.stub(:devise_mapping).and_return(Devise.mappings[:user])
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-20T18:20:23.827

你知道吗？我在有人遇到类似问题的地方找到[了这个答案。](https://stackoverflow.com/questions/4081744/devise-form-within-a-different-controller)解决方案是在您的应用程序助手中包含以下代码：

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
  @devise_mapping ||= Devise.mappings[:user]
end 
```

这是必要的，因为 devise 在其控制器中使用了某些辅助方法。但是，如果我从我的规范访问视图，这些辅助方法不可用，因此我的测试失败。将这些方法放在应用程序助手中，可以在整个应用程序中访问它们，包括我的规范，并且确实通过了测试！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-23T18:16:09.903

在*rspec*中，有一个配置不允许您存根未定义的方法。对于*rails 4*，它甚至是标准行为：

```
# spec/spec_helper.rb
config.mock_with :rspec do |mocks|
  mocks.verify_partial_doubles = true
end 
```

因此，最高投票的答案不适用于设计助手。更改`verify_partial_doubles`为`false`或使用实际的助手。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-04T17:22:14.153

像 Mike Fogg 一样，我不喜欢为了让这些视图规范正常工作而向我的 ApplicationController 添加多个方法的想法。

我注意到我的 rspec 安装有一个`spec/mixins`目录，所以我做了以下操作：

```
# spec/mixins/devise_helpers.rb
module DeviseHelpers
  def resource_name
    :user
  end

  def resource
    @resource ||= User.new
  end

  def devise_mapping
    @devise_mapping ||= Devise.mappings[:user]
  end
end 
```

然后包括在我的规范中：

```
# spec/views/devise/registrations/new.html.haml_spec.rb
require 'rails_helper'
include DeviseHelpers

describe 'devise/registrations/new.html.haml' do
  it 'has a login link for existing users' do
    render
    expect(rendered).to have_link('Log in')
  end
end 
```

现在我可以将这些方法混合到任何需要它们的规范中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-05-16T05:34:42.953

我想做@MikeFogg 的解决方案——我在另一个视图规范中做了类似的事情来处理Pundit——但我当然遇到了@ChrisEdwards 指出的关于需要的问题`mocks.verify_partial_doubles = false`。

但是，我对在整个测试套件中关闭它并没有太大兴趣，这是一个很好的检查，“通常推荐”并且在 Rspec 4+ 中是默认设置。

实际上，我首先在这里发布了一个解决方案，我在 before/after 块中重新配置了 RSpec，但是我遇到了一种非常非常简单的方法来做到这一点，而且效果很好：

```
 before(:each) do
    without_partial_double_verification do
      allow(view).to receive(:resource).and_return(Student.new)
      allow(view).to receive(:resource_name).and_return(:student)
      allow(view).to receive(:devise_mapping).and_return(Devise.mappings[:student])
    end
    # other before_each configuration here as needed
  end 
```

这自 2016 年以来一直存在，最初被称为`without_verifying_partial_doubles`，但被重命名为 current `without_partial_double_verification`。在我能看到的任何地方似乎都没有记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-14T13:14:14.200

在这里结合[@sixty4bit 答案](https://stackoverflow.com/a/31223305/23723)和[这个答案，](https://stackoverflow.com/a/37649333/23723)我想出了这个解决方案：

```
class DeviseHelpers < Module
  def initialize(resource_name, resource_class)
    @resource_name = resource_name
    @resource_class = resource_class
  end

  def extended(base)
    _resource_name = @resource_name
    _resource_class = @resource_class
    base.class_eval do
      define_method :resource_name do
        _resource_name
      end

      define_method :resource do
        @resource ||= _resource_class.new
      end

      define_method :devise_mapping do
        @devise_mapping ||= Devise.mappings[_resource_name]
      end
    end
  end

end 
```

这允许您通过在规范顶部要求它来使用不同的资源：

`require 'support/devise_helpers'`

然后像这样调用它：

```
before do
  view.extend(DeviseHelpers.new(:customer, Customer))
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-06T14:15:50.867

对于 RSpec 4、Rails 6 和 Devise 4.7，我在这里的其他建议没有成功，或者担心对我的其他测试或生产代码的影响。

```
allow(view).to receive(:current_user).and_return(user) 
```

在我看来，规范最终对我有用，而无需任何其他配置更改。（必须先定义`user`。）

近年来，底层 gems/框架发生了有意义的变化，这使得这里的一些其他解决方案无效，这并非不可能。更有可能是我错误配置了 Devise、RSpec 和/或相关帮助程序。

我确认`current_user`已在 rspec/rails/example/view_example_group.rb 中填充，但`nil`在`render`. 我在 view_example_group.rb 中找到了这条评论并关注了它：

```
 # The instance of `ActionView::Base` that is used to render the template.
        # Use this to stub methods _before_ calling `render`.
        #
        #     describe "widgets/new.html.erb" do
        #       it "shows all the widgets" do
        #         view.stub(:foo) { "foo" }
        #         render
        #         # ...
        #       end
        #     end
        def view
          _view
        end 
```

[https://github.com/rspec/rspec-rails/blob/main/lib/rspec/rails/example/view_example_group.rb](https://github.com/rspec/rspec-rails/blob/main/lib/rspec/rails/example/view_example_group.rb)

`stub`不推荐使用语法，但`view.stub(:current_user) { user }`也可以使用（目前）。

# javascript - 将 Flash 嵌入到自动播放中

> ID：14426747
> 
> 赞同：0
> 
> 时间：2013-01-20T16:47:32.933
> 
> 标签：javascript, flash

我真的很困惑这怎么不起作用，但是由于某种原因视频不会自动启动，我做错了什么吗？嵌入式代码用于 Flash 播放

```
<object width="600" height="409">

<param name="movie" value="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"></param>
<param name="flashvars" value="src=http%3A%2F%2Fwww.domain.com%2Fvideo%2Ftest%2F<?php echo $video;?>"></param>
<param name="allowFullScreen" value="true"></param>
<param name="allowscriptaccess" value="always"></param>
<param name="autoPlay" value="true"></param>

<embed src="http://fpdownload.adobe.com/strobe/FlashMediaPlayback.swf"
       type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" autoPlay="true"
       width="600" height="409" flashvars="src=http%3A%2F%2Fwww.domain.com%2Fvideo%2Ftest%2F<?php echo $video;?>">
</embed>

</object> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T18:51:36.150

尝试`autoPlay=true`输入`flashvars`参数以将此参数发送到 swf 文件：

```
<param name="flashvars" value="src=http%3A%2F%2Fwww.domain.com%2Fvideo%2Ftest%2F<?php echo $video;?>&autoPlay=true"></param> 
```

我已经测试过了，它的工作。

记住也要更改标签中的`flashvars`属性=）`<embed>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T07:35:03.153

;?>&auto=TR"（不是自动播放，只有AUTO！）>

# emacs - 多词缩写展开

> ID：14426748
> 
> 赞同：1
> 
> 时间：2013-01-20T16:47:36.853
> 
> 标签：emacs

我发现了这个关于多词缩写的邮件列表[消息](http://lists.gnu.org/archive/html/emacs-devel/2007-10/msg02152.html)，但仍然无法扩展工作。

我定义了这两个缩写：

```
"agw"          0    "a great whale"
"a g w"         0    "a great whale" 
```

在“agw”之后按空格有效，但不是“ag w”。但是，如果我调用 `(abbrev-expansion "a g w")`，则返回正确的扩展。

问题是如何让 Emacs 向后搜索超出一个单词边界？

是的，yasnippet 存在并且我使用它，但是缩写更加无缝（例如，“1/2”之后的按空格将其变成 unicode 一半）。我也不想更改语法表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:36:54.417

SPACE，在插入自身之前，会在点之前寻找一个缩写来展开。它使用'backward-word'，它将在前一个空格处停止。因此 SPACE 不能扩展缩写内的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:18:43.137

As explained by Andreas, it does not work because by default abbrevs only work if they are made up of chars that are "word constituent" and " " is not a word constituent. You can change this rule, tho, for a given table, with something like `(abbrev-table-put <table> :regexp <regexp>)` where a regexp like `"\\<\\(\\w+:?\\)\\W*"` would pretty much reproduce the default behavior.

Now for your case, you want a regexp that will match "a g w" and "agw" but note that it shouldn't match the "agw" of "dawg" and neither should it match "a g agw", which makes it a bit tricky. One way to do that is to define your regexp as `(concat "\\<" (regexp-opt '("agw" "a g w")) "\\W*")`, which is fairly simple to do but has the downside that it requires changing the regexp any time you add an abbrev.

# python - Python - 线程 - 我可以列出线程队列吗？

> ID：14426749
> 
> 赞同：1
> 
> 时间：2013-01-20T16:47:45.013
> 
> 标签：python, multithreading, list, queue

我正在制作一个线程聊天服务器，我需要一种向所有客户端发送消息的方法。我可以使用全局队列，但只有一个处理客户端的线程能够发送消息。所以我想知道是否可以在每个客户端线程中创建一个单独的队列对象并将它们附加到一个列表中，以便我能够将消息发送到每个客户端的队列。这可能吗？

```
clientqueues = [] #Global list of client queues

class ClientThread(threading.Thread):
    def __init__(self):
        myqueue = Queue.Queue() #Client queue
        clientqueues.append(myqueue)
        ...
def MessageAllClients(message):
    global clientqueues
    for queue in clientqueues:
        queue.put(message) 
```

这会奏效还是我会以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:49:30.780

你的方法很好。我唯一要改变的是制作`clientqueues`一个[静态成员](https://stackoverflow.com/questions/3506150/static-class-members-python)而`ClientThread`不是全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:52:33.533

队列只是一个对象（就像 Python 中的所有东西一样），所以列出它们没有问题。

# c# - 带有 ByteBuffer 的 2 个 Java 方法的 C# 版本

> ID：14426750
> 
> 赞同：-4
> 
> 时间：2013-01-20T16:47:46.900
> 
> 标签：c#, java, arrays, bytebuffer

我是 C# 新手，非常感谢我需要在 C# 中实现的 2 个 Java 方法的帮助

```
public static String getTerminatedString(ByteBuffer buf) {
                return new String(getTerminatedArray(buf));
        }

public static byte[] getTerminatedArray(ByteBuffer buf) {
            int start = buf.position();

            while(buf.get() != 0) {}
            int end = buf.position();

            byte[] bytes = new byte[end - start - 1]; //don't include terminator
            buf.position(start);
            buf.get(bytes);

            //put position after array
            buf.position(end); //skip terminator

            return bytes;
    } 
```

提前致谢！！！

更新：

到目前为止，我写了这个：

```
 public static String getTerminatedString(byte[] buf) 
        {
            try
            {
                unsafe
                {
                    byte[] res = getTerminatedArray(buf);

                    fixed (byte* ptr_byte = &res[0]) // NullRef exception here
                    {
                        sbyte* ptr_sbyte = (sbyte*)ptr_byte;
                        return new String(ptr_sbyte);
                    }
                }
            }
            catch (NullReferenceException nre)
            {
                Console.Error.WriteLine(nre.Message + Environment.NewLine + nre.StackTrace);
                return null;
            }
        }

        public static byte[] getTerminatedArray(byte[] buf) 
        {
            try
            {

                int start = buf[0];
                int end = 0;
                for (int i = 0; i < buf.Length; i++)
                {
                    if (buf[i] == 0)
                    {
                        end = i;
                        break;
                    }
                }

                byte[] bytes = new byte[end - start - 1]; //overflow exeption here

                for (int i = 0; i < bytes.Length; i++)
                {
                    bytes[i] = buf[i];
                }

                return bytes;
            }
            catch (OverflowException oe)
            {
                Console.Error.WriteLine(oe.Message + Environment.NewLine + oe.StackTrace);
                return null;
            }
        } 
```

但我得到了上面标记的 2 个例外。我检查了这些 ByteBuffer 方法背后的逻辑，但不知道我做错了什么>。>

所以 nullreferenceexception 是 catch 块返回 null 的结果。问题出在 byte[] bytes = new byte[end - start - 1]; （如果我的实现是正确的......是吗？：D）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:56:19.193

Java 中的 ByteBuffer 与 .NET 中的字节数组不同，因此您需要重新考虑您的代码。您甚至无法完成 Java 代码所做的事情。

一条线索在

```
int start = buf[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:54:30.550

如果您的缓冲区是 a 的`Byte[]`转换`String`，要取回您的文本，只需使用：

```
String myString = Encoding.UTF8.GetString(buffer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T20:26:26.507

Tnx迈克尔！

我检查了 Java 中的 ByteBuffer 文档，还发现了一些非常有趣且有用的 C# ByteBuffer 实现 - [http://www.codeforge.com/read/92854/ByteBuffer.cs__html](http://www.codeforge.com/read/92854/ByteBuffer.cs__html)

我添加了

```
public virtual byte[] Get(byte[] bytes)
    {
        long oldpos = Position;
        bytes = reader.ReadBytes(bytes.Length);
        Position = oldpos;

        return bytes;
    } 
```

所以我可以使用 buf.get(bytes); //使用此方法后，MemoryStream**位置**不应该改变，是吗？

我用它测试过

```
string str = "Test_tesT-Test" + char.MinValue; 
```

到目前为止，它正确地删除了终结器

# javascript - 如何覆盖 jquery ui 自动完成项目？

> ID：14426751
> 
> 赞同：0
> 
> 时间：2013-01-20T16:47:58.740
> 
> 标签：javascript, jquery, jquery-ui, autocomplete

我正在使用 jquery 自动完成功能将 GeoNames 中的城市加载到我页面上的文本框中：

```
$("#MyInput").autocomplete({
source: function (request, response) {
    $.ajax({
        url: "http://ws.geonames.org/searchJSON",
        dataType: "jsonp",
        data: {
            featureClass: "P",
            style: "full",
            maxRows: 10,
            name_startsWith: request.term
        },
        success: function (data) {
            response($.map(data.geonames, function (item) {
                return {
                    label: item.name + ", " + item.countryName,
                    value: item.name + " (" + item.countryName + ")" + " [" + item.countryCode + "]"
                };
            }));
        }
    });
}
}).data("autocomplete")._renderItem = function (ul, item) {
    return $("<li></li>")
        .data("item.autocomplete", item)
        .append("<a><strong>" + item.label + "</strong> / " + item.value + "</a>")
        .appendTo(ul);
}; 
```

此外，我正在尝试覆盖 _renderItem 以在我的自定义视图中显示自动完成结果，但此方法不影响我的项目。我的代码有什么问题？您可以在[jsfiddle.net/找到示例](http://jsfiddle.net/h3Ln6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T15:11:17.047

I just did this where i wanted to set the "data" of the text box. In my case I didn't want to show any of the "data". I just "added" a third value when performing the map called data and set it to "item", then gave a "select" section. See below.

```
 $(document).ready(function () {
        var $birds = $("#birds")
        $birds.focus();
        mURL = "my url here";
        $birds.autocomplete({
            minLength: 0,
            source: function (request, response) {
                $.ajax({
                    type: "POST",
                    url: GW.Common.getBaseURL() + "/Functions/EmailCounts/TypeAHead.aspx/country_state_city",
                    data: "{'text':'" + request.term + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        var jsonData = $.parseJSON(msg.d)[0].Cities;
                        response($.map(jsonData, function (item) {
                            return {
                                label: item.name + ', ' + item.state + ' ' + item.country,
                                value: item.name + ', ' + item.state + ' ' + item.country,
                                data: item // added as "extra"
                            };
                        }));
                    },
                    error: function (msg) {
                        alert(msg.status + ' ' + msg.statusText);
                    }
                })
            },
            focus: function (event, ui) {
                $birds.val(ui.item.label);
                return false;
            },
            select: function (event, ui) {
                log(ui.item ? "Selected: " + ui.item.value + " aka " + ui.item.id : "Nothing selected, input was " + this.value);
                $birds.val(ui.item.label);
                $birds.attr("data", JSON.stringify(ui.item.data)); // now you can use the extra "data" you set in success.
                return false;
            }
        }); 
```

# c++ - 未调用复制构造函数，有人可以解释函数的返回值是如何工作的

> ID：14426752
> 
> 赞同：-2
> 
> 时间：2013-01-20T16:48:13.907
> 
> 标签：c++, c++11, return, return-value

> **可能重复：**
> [没有调用复制构造函数](https://stackoverflow.com/questions/7173632/no-call-to-the-copy-constructor)

在此代码中，从不调用复制构造函数（也不调用移动构造函数或赋值运算符）。怎么可能？有人可以解释函数如何返回值，堆栈和寄存器会发生什么（或发布一些好的链接）吗？

```
 #include <iostream>
#include <cstring>

using namespace std;

class Test;

Test getnew(int arg);
class Test
{

  public:
    char *conts;
    int len;
        Test(char* input = NULL){conts = new char[len=10];
            if(input)strncpy(conts,input,9);else strcpy(conts,"xxxxx");
            cout << "\nconstructor: " << conts;
        };
        Test(const Test& t){
                conts = new char[10];
                if(t.len)strncpy(conts,t.conts,9);
                len = t.len;
                cout << "\ncopy-constructor: " << conts;
        };
        Test(Test&& t){
               conts = t.conts;
               t.conts = NULL;
               std::swap(len,t.len);
               cout << "\nmove-constructor: " << conts;
        };

        ~Test(){
            cout << "\ndestructor";
            if(conts)delete [] conts;
             len = 0;
             conts = NULL;
        };
        Test& operator=(Test rhs)
        {
            std::swap(conts,rhs.conts);
            std::swap(len,rhs.len);
            cout << "\nassigend: " << conts;
        }

};

int main()
{

   Test t2 = getnew(1);
   cout << endl << t2.conts;
    return 0;
}

Test getnew(int arg)
{
        Test retj("FFFFF");
        return retj;
} 
```

只调用了一个构造函数和一个析构函数。但是对象 t2 具有使用正确值“FFFF”初始化的值成员 conts。我知道应用了返回值优化，但是对象 t2 是如何初始化的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:53:34.137

*理论上*，应该发生的是编译器会创建一个返回值的临时副本，然后将该临时对象分配给接收函数输出的变量。

但是，即使复制构造函数或移动构造函数有副作用，编译器也可以省略返回值的复制和移动。在您的情况下，这变成了所谓的**NRVO （命名返回值优化），这是****RVO**（返回值优化）的一个特例。

因此，您所看到的很可能是移动省略的结果。有一些编译器选项可以禁用此优化，但一些编译器（例如 Clang 3.2）在处理这些选项时存在错误（请参阅[此问题](https://stackoverflow.com/questions/14297639/rvalue-hello-world-missing-constructor/14298095#14298095)的答案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:49:23.343

使用[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)，`T2`赋值给`Test`初始化的对象`getnew`。这就是 RVO 的工作原理。

# java - java android中的XOR掩码

> ID：14426760
> 
> 赞同：3
> 
> 时间：2013-01-20T16:48:31.237
> 
> 标签：java, android, eclipse, xor

用户输入代码字和文本进行加密，程序应该在文本上加上XOR掩码-并恢复正常，但它只是戴上掩码并没有恢复正常外观，为什么？

```
public void onClick(View arg0) {
        code = etCode.getText().toString();
        text = etText.getText().toString(); 

        while(code.length()<text.length()){
            code+=code;
        }
        char[] Ccode = code.toCharArray();
        char[] Ctext = text.toCharArray();

        for(i=0;i<Ctext.length;i++){
            Ctext[i]^=Ccode[i];
        }

        rezult=Ctext.toString();

        for(i=0;i<Ctext.length;i++){
            Ctext[i]^=Ccode[i];
        }
        rezult+="\n";
        rezult+=Ctext.toString();
        tvMain.setText(rezult);
        }
    }); 
```

如果我输入`code : code , text : text` 它显示：

```
[C@40527808
[C@40527808 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T16:53:54.483

您输出数组的地址。你想要内容。数组没有有用`toString()`的 mwthod。

改变

```
rezult=Ctext.toString(); 
```

至

```
rezult=new String(Ctext); 
```

同样的

```
rezult+=Ctext.toString(); 
```

=>

```
rezult+=new String(Ctext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:52:45.120

在 Java 中，对数组的默认`toString()`操作是转换为内部标识符，这就是您所看到的。尝试使用：

```
rezult = new String(Ctext);
...
rezult += new String(Ctext); 
```

或者，取决于您要显示的内容（因为我不清楚`Ctext`始终包含可显示的字符）：

```
rezult = Arrays.toString(Ctext);
...
rezult += Arrays.toString(Ctext); 
```

这将为您提供一个逗号分隔的字符值数组，并用方括号括起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:53:30.590

您不能使用 toString() 将 char 数组转换为字符串。

利用`tvMain.setText(new String(Ctext));`

# vbscript - WinHttpRequest ResponseText 为文本（.txt）文件变空 - Windows2008R2/Windows 7

> ID：14426761
> 
> 赞同：1
> 
> 时间：2013-01-20T16:48:45.290
> 
> 标签：vbscript, qtp, winhttprequest

我是 QTP 和 VBScript 的新手，我正在尝试获取文本文件内容作为响应（示例 URL：[http://xxxx/dir/MIS/test_667/logfile.667.txt](http://x.x.x.x/dir/MIS/test_667/logfile.667.txt)）。下面的代码在 WindowsXP 上按要求工作，但在 Windows7/Windows2008R2 上得到“空”响应文本（sIMPResponse = objWinHTTP.ResponseText）。

我尝试了不同的用户代理字符串@ [http://www.zytrax.com/tech/web/msie-history.html](http://www.zytrax.com/tech/web/msie-history.html)，但没有运气。

任何人都可以协助解决获取 WinHTTP.ResponseText 的 .txt 文件内容的解决方案。

在此先感谢您的帮助。

## 代码片段：

```
 Dim sResponse, sIMPResponse

    Function PortalUrlExists(ByVal sUrl)
    On Error Resume Next
    UrlExists = False
    Dim objWinHTTP, nStatus
    'Create a WinHTTP Request using the link's URL
    Set objWinHTTP = CreateObject("WinHttp.WinHttpRequest.5.1")
    If Err.Number <> 0 Then
     Exit Function
     End If
     objWinHTTP.Open "GET", sUrl, False
     objWinHTTP.SetRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MyApp 1.0; Windows NT 5.1)"
     'Send the Request to the Server and capture the response
     objWinHTTP.SetTimeouts 180000, 180000, 180000, 180000
     objWinHTTP.Send 
     If Err.Number <> 0 Then
      Set objWinHTTP = Nothing
      Exit Function
     End If
     nStatus = objWinHTTP.Status
     If nStatus = 200 Then
       UrlExists = True
      If InStr(1, sUrl, ".txt", vbTextCompare) > 0 Then
       sIMPResponse = objWinHTTP.ResponseText  ' ***** This is getting "Empty", where as it has to get the text file content from the URL ****
      Else sResponse = objWinHTTP.ResponseText
      End If
     End If
     Set objWinHTTP = Nothing
    End Function 
```

# php - 分解字符串 - 使用自动换行 - 在循环中执行命令直到数组完成

> ID：14426766
> 
> 赞同：0
> 
> 时间：2013-01-20T16:49:10.270
> 
> 标签：php, arrays, loops, imagemagick, explode

我不知道如何解释这一点，所以请提前原谅我的标题和描述。如果你能弄清楚这一点，你就可以翻译任何东西。

下面的代码采用一个字符串并将其分解为 143 个字符标记处的“整个单词”行。这部分工作完美：

```
// Wrap at 143 characters
$x = 143;
$longString = 'This is a very long string.  This is a very long string to be broken into separate lines to be worked with invidually.';

$lines = explode("\n", wordwrap($longString, $x));

echo $lines[0]; 
echo $lines[1]; etc. etc. 
```

接下来我需要做的是使用 Imagemagick “重新组装”这些行，以将这些行输出到一个段落中，行间距。

这是 ImageMagick 命令行的示例。

```
-background none  -fill white  -font Arial  -pointsize 42  -size 2600x
   caption:'{$textstring}'  -geometry +830+3643  -composite 
```

我不明白的是如何遍历该数组（我相信这是术语？）并添加生成的每个新行，直到数组完成（再次不确定术语）。

基本上，我不知道其中会输出多少。

```
echo $lines[0]; 
echo $lines[1];
etc. 
```

最后，我需要将几何图形增加 X 个像素，每次通过循环。`-geometry +830+3643`所以几何部分将是`-geometry +830+3743`每 100 像素等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:35:54.097

你可以看[这里](http://www.imagemagick.org/Usage/text/#text_operators)他们有相当数量的 ImageMagic 文本处理示例

# android - 如何更改 android SearchView 文本

> ID：14426769
> 
> 赞同：98
> 
> 时间：2013-01-20T16:49:24.067
> 
> 标签：android, searchview

SearchView 是否有 setText() 方法或类似的方法？我尝试像这样在 searchView 中设置搜索文本，但没有这样的方法。

```
searchView.setText(searchToken); 
```

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2013-01-20T16:49:24.067

在想知道并尝试之后，我发现 API 中有一个名为 setQuery() 的方法，您可以设置 searchView 文本，您可以选择提交搜索或不使用布尔参数。

```
searchView.setQuery(searchToken, false); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-04-23T15:34:29.440

您可以使用`setQuery()`更改文本框中的文本。

但是，`setQuery()`该方法会触发搜索视图的焦点状态，因此在调用此方法后会在屏幕上显示一个键盘。

要解决此问题，只需调用`searchView.clearFocus()`after`setQuery()`方法将其取消焦点，键盘将不会显示在屏幕上。

**例子：**

```
String suggestWord = intent.getDataString();
searchView.setQuery(suggestWord, false);
searchView.clearFocus(); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-04-16T15:28:26.520

这对我有用

```
 MenuItem sItem = menu.findItem(R.id.search);
    SearchView searchView = (SearchView) sItem.getActionView();

    sItem.expandActionView();
    searchView.setQuery("your text", false); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-02-09T03:12:34.947

如果您想预先填写`SearchView`一些文本`searchView.setQuery(text, false)`，则无法开箱即用。原因是当`SearchView`扩大

`searchView.onActionViewExpanded()`

被调用，它调用`searchView.setText("")`并清除我们设置的任何文本。

`SearchView`解决方案是设置一个扩展侦听器并在扩展后设置前置文本

```
override fun onCreateOptionsMenu(menu: Menu): Boolean {
    menuInflater.inflate(R.menu.main, menu)
    val searchView = menu.findItem(R.id.action_search).actionView as SearchView
    menu.findItem(R.id.action_search).setOnActionExpandListener(object : MenuItem.OnActionExpandListener {
        override fun onMenuItemActionExpand(item: MenuItem?): Boolean {
            // it is important to call this before we set our own query text.
            searchView.onActionViewExpanded()
            searchView.setQuery("Prefil Text", false)
            return true
        }

        override fun onMenuItemActionCollapse(item: MenuItem?) = true
    })
    return true
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-04-05T15:12:48.867

如果您希望 searchView 展开并且可以在用户点击 x（关闭）后收缩回图标，方法是：

```
searchView.isIconified = false // Expand it
searchView.setQuery("your text here", false) // true if you want to submit, otherwise false
searchView.clearFocus() // so the keyboard is not show up. 
```

注意：如果您使用以下方法扩展它：

```
searchView.onActionViewExpanded() 
```

用户点击 x（关闭）后，searchView 不会缩回

# asp.net-mvc - 使用依赖注入初始化实体框架模型？

> ID：14426776
> 
> 赞同：1
> 
> 时间：2013-01-20T16:49:57.247
> 
> 标签：asp.net-mvc, entity-framework, dependency-injection, inversion-of-control, unity-container

所以我开始研究依赖注入和 Ioc 容器。据我所知，DI 用于避免紧密耦合类或避免从消费者类中创建依赖对象。但是，如果我们只在一个类中使用该对象，是否不需要使用 DI？现在我的问题是如何统一初始化我的实体模型？目前我像往常一样使用构造函数注入将我的实体模型初始化为

```
public class Food
{
    private FoodContext _foodContext

    public Food(FoodContext food)
    {
        _foodContext=food
    } 
} 
```

现在这`FoodContext`是我的实体框架模型，如何统一初始化？将来我可能想用另一个模型替换模型，因此在整个解决方案中查找和替换所有参考可能会变得很头疼。所以为了做到这一点，我要先创建一个界面吗？我的意思是自动生成的类包含很多很多的属性和方法。这似乎不对。

那么这样做的正常做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:53:04.443

要实现这一点，请查看[存储库模式 存储库模式](http://www.codeproject.com/Articles/363501/Repository-pattern-with-Entity-Framework-Code-Firs) 的主要思想：它使用接口抽象 DataProvider 并使用依赖注入调用，这带来了两个主要好处：低耦合和可测试性。

# php - 编写我自己的 MySQL 库？这是个好主意吗？

> ID：14426777
> 
> 赞同：0
> 
> 时间：2013-01-20T16:50:15.100
> 
> 标签：php, mysql, mysqli

**更新：感谢所有帮助人员，我决定尝试编写自己的 PHP 类来处理 MySQL 请求。**

当我尝试从函数切换`mysql_`到`mysqli_`函数时，我现在面临一个问题，因为我实际上有数万行 PHP/MySQL 代码和分散在数百个文件中的查询，它们都是使用诸如`mysql_query`, `mysql_num_rows`,`mysql_fetch_assoc`等函数。逐行（甚至使用查找/替换）将这些`mysqli_`函数更改为带有准备好的语句的函数，这一切都已经够痛苦了，但是如果将来 PHP.net 决定发布其他的东西怎么办？会弃用这些`mysqli_`功能吗？

所以现在我正在考虑编写我自己的 MySQL 库（你会这么称呼它吗？），它调用`mysqli_`函数并将其包含在我的所有文件中。这样，如果我将来需要更改其他内容，理论上我可以更改“库”中的功能一次，更改将反映在所有页面上，而不是手动完成并手动更改所有内容。

这是个好主意吗？我在网上找到了一个叫做[MeekroDB](http://www.meekro.com/)的东西，但首先我不确定它是否是我正在寻找的东西，其次他们要收取 50 美元才能在商业上使用它（我想这样做。）是否有其他免费的解决方案，还是我只是在浪费时间？

任何意见/反馈表示赞赏:)

**编辑：**如果不清楚，就好像我在对数据库进行查询的每个文件中都连接到我的数据库。我有一个用于连接 MySQL 数据库的 functions.php 文件，我`include`在所有其他文件中都使用了该文件。我的问题与`mysql_query`,`mysql_num_rows`和`mysql_fetch_assoc`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T16:56:54.317

从查看您引用的链接到`MeekroDB`，我认为您正在编写的不是`mysql_*`/`mysqli_*`方法之类的 MySQL API。

您实际上要编写的是*Database Abstraction Layer*，尽管它是特定于 MySQL 的。

事实是，除非您要编写自己的底层模块来与 MySQL 通信（当然，您在 PHP 中也*很难*做到这一点），否则您可能最终还是会使用这些`mysqli_`方法作为支持。

有许多可用的层，但老实说，我会考虑使用 PDO 而不是编写自己的，或者`mysqli_*`如果您担心函数被弃用，则使用。PDO 使用自己的 MySQL 驱动程序，因此如果需要，将进行更新。它还支持您需要的所有内容，包括易于使用的事务、准备好的语句等等。

如果您想创建自己的易于访问的方法，例如`DB::Query(..)`，您可以通过简单地包装 PDO 来做到这一点。

Overall, though, I don't see how this is going to help with organising your code. You're probably going to want to look into something like an ORM (Object Relationship Mapper) to your DB where you can define your own classes that map straight into tables, which should alleviate the need of running queries almost entirely, apart from edge cases. The most comprehensive ORM available would probably be [Doctrine](http://www.doctrine-project.org/), although you can quite easily write your own by again, wrapping PDO.

Just as an example of what you could achieve by using an ORM, here's a snippet of code to demonstrate:

```
$blogPost = BlogPosts::Load(123);
$blogPost->title = 'New Title';
$blogPost->save(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T17:00:10.713

Wrapping your code around the basic PHP database function is a good idea, otherwise there are already a few good solutions you should not have to build you own library. Maybe ORM (Object-relational_mapping) would be interesting for you, popular libraries are [doctrine](http://www.doctrine-project.org/) or [propel](http://propelorm.org/).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T17:02:30.657

> Would this be a good idea?

As a matter of fact, this is the **only** sane way of handling SQL queries.

Let me suggest you my [library, designed to protect your queries against SQL injections](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php). It is absolutely free and way better than anything that costs $50 or $5000.

The only thing you need to learn before starting to use it is *type-hinted placeholders*, but the conception is very easy and I am sure you will get it in a second. Nevertheless, feel free to ask any questions.

By the way, PDO is apparently not the way to go - it is ugly, toilsome to use and unsafe with whatever query that goes slightly beyond several basic cases.
For example:

```
// SafeMySQL: only 2 lines and not a sign of injection
$sql  = "SELECT * FROM goods WHERE category IN(?a) ORDER BY ?n";
$data = $db->getAll($sql, $_GET['categories'], $_GET['orderby']);

// PDO
// errr... (massive headscratching resulting with something like 
// 2 screens of code with manual escaping and all that stuff 
// but most likely still unsdafe as only few PHP developers
// actually have an idea how to properly handle such cases ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T16:58:15.860

You're looking for something similar to a "database wrapper class".

PHP since 5.1 has a built-in abstraction layer called PDO for that.

# java - 如何在 DefaultMutableTreeNode (Java Swing) 中存储 CORBA 对象？

> ID：14426779
> 
> 赞同：1
> 
> 时间：2013-01-20T16:50:55.473
> 
> 标签：java, string, swing, corba

我知道前段时间我问[了几乎相同的问题](https://stackoverflow.com/questions/12769997/java-swing-corba-objects-how-to-store-corba-objects-in-defaultlistmodel)，但是我有一个非常相似的新问题-但是你们当时给我的解决方案现在不起作用:(

我有一个 IDL 接口：

```
interface User {
    string toString();
    //..
};

interface Group {
    typedef sequence<User> Users;
    Users getUsers();

}; 
```

当我将它翻译成 C++ 时，我得到了这样的结果：

```
// ...
Group::Users* GroupImpl::getUsers()
{
    // ..return sequence of 'User'-objects
} 
```

在客户端（用 Java 编写）我想向我的用户展示。我做这样的事情：

```
public void showAllUsers() {
    User[] users = interface_obj.getUsers();
    DefaultMutableTreeNode root = new DefaultMutableTreeNode("Main Node");
    for(int i=0; i<users.length;i++) {
        User u = users[i];
        DefaultMutableTreeNode node = new DefaultMutableTreeNode(
            ((UserView)u).getUser());
        root.add(node);
    }

    treeForumReview.setModel(new DefaultTreeModel(root));
} 
```

当然，我有一堂课：

```
public class UserView {

        private final User f;

        private UserView(User f) {
            this.f = f;
        }

        public Forum getUser() {
            return this.f;
        }

        @Override
        public String toString() {
            String ret = null;
            ret = this.f.getName();
            return ret;
        }
    } 
```

但是在运行所有这些时，我收到一条消息：

![错误信息](../Images/691b7f4b5a719af2e4fcdc2f5bc2fbec.png)

当我像我写的那样这样做时，我只看到我的用户对象的 IOR：

```
IOR :0123405948239481293812312903891208320131293812381023
IOR: 0092930912617819919191818173666288810010199181919919 
```

等等 ...

如何做到这一点，看到他们的`toString()`代表`DefaultMutableTreeNode`？我不想这样做：

```
model.addElement(users[i].toString()); 
```

那不是重点。当我使用 RMI 而不是 CORBA 时，`model.addElement(users[i]);`这正是我所需要的，因为我看到了用户字符串表示。但我需要使用 CORBA 并存储在 DefaultMutableTreeNode corba-user-objects 中，而不是字符串。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:58:01.147

解决了它：

```
 if (users != null) {
                for (User f : users) {
                    UserView fv = new UserView(f);
                    DefaultMutableTreeNode node = new DefaultMutableTreeNode(fv);
                    root.add(node);
                }
            } 
```

# javascript - javascript/jQuery – 在垂直调整页面大小时保持 div 滚动到底部？

> ID：14426780
> 
> 赞同：2
> 
> 时间：2013-01-20T16:50:57.727
> 
> 标签：javascript, jquery, css, scroll

在垂直调整页面大小时，我无法将`.content`div 的滚动条固定在底部，即，当用户调整屏幕大小期间页脚向上移动时，“窗口”一词应该是绝对不可见的最后一件事。`footer`页脚应该将单词“Just Some Text”推送到可滚动内容中，而“Window”应该保持可见并位于div顶部。然而，现在情况正好相反：当页面调整大小时，`footer`向上移动覆盖单词“window”，然后是“the”，然后是“of”等，让“Just Some Text”可见。就像我之前说的，可以说它需要是“对立面”。

所以我的问题是：如何在页面调整大小期间不断滚动到底部？

这是一个小提琴：http: [//jsfiddle.net/N672c/2/](http://jsfiddle.net/N672c/2/)

出于这个问题的目的，我在这里有一个基本的 html 结构：

```
 <header></header>

 <div id="content_id" class="content">
      <div class="container">
         Just<br>
         Some<br>
         Text.<br>

         Try<br>
         resizing<br>
         the<br>
         height<br>
         of<br>
         the<br>
         window
     </div>
 </div>

 <footer></footer> 
```

还有一些CSS：

```
 header, footer {
     position: fixed;
     left: 0; right: 0;
     height: 100px;
     background: teal;
 }

 header { top: 0 }
 footer { bottom: 0 }

 .content {
     position: fixed;
     top: 100px; bottom: 100px;
     left: 0; right: 0;
     overflow-y: scroll;
  }

 .container {
     padding: 20px;
     position: absolute;
     left: 0;
     right: 0;
     bottom: 0;
 } 
```

还有少量的javascript：

```
 var $content = $('.content'),
 $container = $('.container'),
 containerHeight = $container.outerHeight();

 $(window).resize(function () {
      $container.css({
         position: $content.innerHeight() > containerHeight ? 'absolute' : 'static'
      });
 }).resize(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:29:33.140

您可以使用 scrollTop 方法将滚动条设置到所需位置，该方法采用一个参数，即偏移值。

在这里，您可以将 scrollTop 方法添加到您的“内容”块中，并带有容器块高度的偏移量，这是您希望保持其恒定的高度。

因此，将其添加到您的调整大小函数中。

```
$content.scrollTop($container.height()); 
```

这将使您在调整大小时一直滚动到最后。

这是一个快速检查[http://jsfiddle.net/4LQnW/6/](http://jsfiddle.net/4LQnW/6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:13:27.177

在调整大小方法中只需添加：

```
$content.scrollTop($content.height()); 
```

这将不断`$content`滚动到底部：http: [//jsfiddle.net/N672c/4/](http://jsfiddle.net/N672c/4/)

# html - 鼠标悬停时的CSS3幻灯片div

> ID：14426781
> 
> 赞同：2
> 
> 时间：2013-01-20T16:51:00.387
> 
> 标签：html, css

我想让一个 div 滑过另一个向后的，但不知道如何提示？我可以制作动画，但是当我将鼠标悬停在动画上时无法正常工作，有人可以解释一下为什么吗？

```
<!DOCTYPE html>
<html>
<head>
<style>
.fundo_main {
    width:200px;
    height:200px;
    background-color:red;
    position:relative;
}
.fundo_main:hover {
    width:200px;
    height:200px;
    -webkit-animation-name:myfirst;
    position:relative;
}
.fundo {
    width:200px;
    height:200px;
    background-color:red;
    position:relative;
    -webkit-animation-name:myfirst;
}

.fundo:hover {
    width:200px;
    height:200px;
    background-color:blue;
    -webkit-animation-name:myfirst;
    -webkit-animation-duration:.3s;
    -webkit-animation-timing-function:linear;
    -webkit-animation-direction:left;

}
@-webkit-keyframes myfirst {
    0% { width:0px; }
    65% { width: 150px;}    
    100% { width:200px; }
}
</style>
</head>
<body>
<div class="fundo_main">
    <div class="fundo"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:08:48.853

我会说改变这个：

```
.fundo:hover 
```

对此：

```
.fundo_main:hover .fundo 
```

# ruby-on-rails - Ruby：有什么方法可以为 CLI 应用程序安装 Rails.logger？

> ID：14426783
> 
> 赞同：0
> 
> 时间：2013-01-20T16:51:08.153
> 
> 标签：ruby-on-rails, ruby, logging

在集成到 Rails 应用程序之前，我有一些单独测试的 Ruby 代码。因为最终的应用程序。在 Rails 中，我有很多对 Rails.logging.xxx 的调用，我想要在那里，但是有了这些，我无法运行独立的应用程序，因为它不知道 Rails.logging。如何设置它，以便我可以在我的 CLI 测试应用程序中进行这些日志记录调用。并在最终的 Rails 部署中工作？

泰，弗雷德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:15:14.467

为什么不创建一个仅在 CLI 版本中可用的简单存根记录器？例如：

```
class Rails
  def self.logger
     @logger ||= Logger.new('cli_logger.log')
  end
end

Rails.logger.info("Spam") 
```

或者可能更像[Rails](http://guides.rubyonrails.org/debugging_rails_applications.html#the-logger)：

```
class Rails
  cattr_accessor :logger
end

Rails.logger = Logger.new('cli_logger.log')
Rails.logger.info("It works") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:15:15.310

为什么你不能在你的应用程序中使用记录器？像普通调试器一样使用它？

见[http://ruby.about.com/od/tasks/a/logger.htm](http://ruby.about.com/od/tasks/a/logger.htm)

# python - 为什么我的并行代码会产生错误？

> ID：14426788
> 
> 赞同：4
> 
> 时间：2013-01-20T16:51:55.777
> 
> 标签：python, parallel-processing

问题 1：当`sys.stdout.write`未包装在单独的函数中时，下面的代码会失败。

问题 2：当`ssys.stdout.write`被包装在单独的函数中时，代码会在每个字母之间打印空格。

代码（v1）：

```
#!/usr/bin/env python

import pp
import sys

def main():
    server = pp.Server()

    for c in "Hello World!\n":
        server.submit(sys.stdout.write, (c,), (), ("sys",))()

if __name__=="__main__":
    main() 
```

痕迹：

```
$ ./parhello.py
Traceback (most recent call last):
  File "./parhello.py", line 15, in <module>
    main()
  File "./parhello.py", line 12, in main
    server.submit(write, (c,), (), ("sys",))()
  File "/Library/Python/2.7/site-packages/pp.py", line 461, in submit
    sfunc = self.__dumpsfunc((func, ) + depfuncs, modules)
  File "/Library/Python/2.7/site-packages/pp.py", line 639, in __dumpsfunc
    sources = [self.__get_source(func) for func in funcs]
  File "/Library/Python/2.7/site-packages/pp.py", line 706, in __get_source
    sourcelines = inspect.getsourcelines(func)[0]
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 688, in getsourcelines
    lines, lnum = findsource(object)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 527, in findsource
    file = getsourcefile(object)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 446, in getsourcefile
    filename = getfile(object)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/inspect.py", line 422, in getfile
    'function, traceback, frame, or code object'.format(object))
TypeError: <built-in method write of file object at 0x1002811e0> is not a module, class, method, function, traceback, frame, or code object
make: *** [test] Error 1 
```

代码（v2）：

```
#!/usr/bin/env python

import pp
import sys

def hello(c):
    sys.stdout.write(c)

def main():
    server = pp.Server()

    for c in "Hello World!\n":
        server.submit(hello, (c,), (), ("sys",))()

if __name__=="__main__":
    main() 
```

痕迹：

```
$ ./parhello.py
H e l l o   W o r l d ! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T19:17:45.130

对于第一部分， pp 并非旨在将内置函数作为`submit`. 第二个问题更复杂。在 pp 调用提交的函数之前，它会将 stdout 和 stderr 重定向到一个 StringIO 对象。完成任务后，它会打印来自 StringIO 对象的值

```
print sout, 
```

这意味着它会`sout`在打印内容之前附加一个空格。为了解决这个问题，不要`sys.stdout`直接使用您的函数，而是打印到您管理的文件或队列，并以更好的方式处理打印。

# data-structures - 为什么在二叉搜索树中查找是 O(log(n))？

> ID：14426790
> 
> 赞同：27
> 
> 时间：2013-01-20T16:52:28.633
> 
> 标签：data-structures, time-complexity, big-o, binary-search-tree

我可以看到，当在**BST**中查找一个值时，每次我们将一个节点与我们正在寻找的值进行比较时，我们都会留下一半的树。

但是我不明白为什么时间复杂度是`O(log(n))`. 所以，我的问题是：

如果我们有一棵包含 N 个元素的树，为什么查找树并检查是否存在特定值的时间复杂度是 O(log(n))，我们如何得到呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-20T17:10:09.170

您的问题似乎在[这里](https://stackoverflow.com/questions/2307283/what-does-olog-n-mean-exactly)得到了很好的回答，但总结一下您的具体问题，最好反过来考虑它；“随着节点数量的增加，BST 求解时间会发生什么变化”？

本质上，在 BST 中，每次将节点数量增加一倍时，您只会将求解的步骤数增加一倍。为了扩展这一点，四倍的节点给出了两个额外的步骤。八倍的节点给出了三个额外的步骤。十六倍的节点给出了四个额外的步骤。等等。

这些对中第一个数字的以 2 为底的对数是这些对中的第二个数字。它是基于 2 的日志，因为这是一个二进制搜索（每一步都将问题空间减半）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-06-13T13:57:40.027

对我来说，最简单的方法是查看 log2(n) 的图，其中 n 是二叉树中的节点数。作为一个表，它看起来像：

```
 log2(n) = d

          log2(1) = 0
          log2(2) = 1 
          log2(4) = 2
          log2(8) = 3
          log2(16)= 4 
          log2(32)= 5
          log2(64)= 6 
```

然后我画了一个小二叉树，这个从深度 d=0 到 d=3：

```
 d=0          O
                        / \
            d=1        R   B
                      /\   /\
            d=2      R  B R  B
                    /\ /\ /\ /\
            d=3    R B RB RB R B 
```

因此，当深度 d 从 d=2 变为 d=3 时，树中的节点数 n 有效地*翻倍*（例如，当深度 d 从 7 变为 15 时，n 增加 8 到 d=3，增加1.) 因此，所需的额外处理量（或所需时间）仅增加**1**次额外计算（或迭代），因为处理量与 d 有关。

我们可以看到，在将节点数加倍后，我们只向下增加了 1 级深度 d，从 d=2 到 d=3，以在所有节点 n 中找到我们想要的节点。这是真的，因为我们现在已经搜索了整个树，嗯，我们需要搜索的一半来找到我们想要的节点。

我们可以将其写为`d = log2(n)`，其中 d 告诉我们当树中有 n 个节点时，我们需要（平均）执行多少计算（多少次迭代）才能到达树中的任何节点。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-03T01:10:12.937

这可以很容易地在数学上显示出来。

在我介绍之前，让我澄清一些事情。**在平衡二叉搜索树**中查找或查找的复杂度为 O(log(n))。一般来说，对于二叉搜索树，它是 O(n)。我将在下面显示两者。

在平衡二叉搜索树中，在最坏的情况下，我正在寻找的值在树的叶子中。由于 BST 的有序结构，我将基本上从根遍历到叶子，只查看树的每一层一次。因此，我需要做的搜索次数是树的层数。因此，问题归结为为具有 n 个节点的树的层数找到一个封闭形式的表达式。

这是我们将进行简单归纳的地方。只有 1 层的树只有 1 个节点。2 层的树有 1+2 个节点。3 层 1+2+4 节点等。模式很清晰：一棵有 k 层的树恰好有

n=2^0+2^1+...+2^{k-1}

节点。这是一个几何级数，这意味着

n=2^k-1,

等效地：

k = log(n+1)

我们知道 big-oh 对 n 的大值感兴趣，因此常数是无关紧要的。因此 O(log(n)) 复杂度。

我将给出另一种更短的方法来显示相同​​的结果。因为在寻找一个值时，我们不断地将树分成两半，并且我们必须这样做 k 次，其中 k 是层数，以下是正确的：

(n+1)/2^k = 1,

这意味着完全相同的结果。您必须说服自己 n+1 中的 +1 来自哪里，但是即使您不注意它也没关系，因为我们正在谈论 n 的大值。

现在让我们讨论一般的二叉搜索树。在最坏的情况下，它是完全不平衡的，这意味着它的所有节点都只有一个孩子（它变成了一个链表）参见例如[https://www.cs.auckland.ac.nz/~jmor159/PLDS210/niemann/ s_fig33.gif](https://www.cs.auckland.ac.nz/~jmor159/PLDS210/niemann/s_fig33.gif)

在这种情况下，要在叶子中找到值，我需要迭代所有节点，因此 O(n)。

最后一点是，这些复杂性不仅适用于查找，还适用于插入和删除操作。

（当我达到 10 个代表点时，我将使用更好看的 Latex 数学样式编辑我的方程式。所以现在不会让我这样做。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-03T01:22:56.780

每当您看到其中包含 O(log n) 因子的运行时，[您很有可能正在查看“不断将某个对象的大小除以一个常数”形式的内容。](https://stackoverflow.com/questions/9152890/what-would-cause-an-algorithm-to-have-olog-n-complexity/9153420#9153420)所以思考这个问题的最好方法可能是——当你在二叉搜索树中进行查找时，究竟是什么被一个常数因子削减了，这个常数究竟是什么？

首先，让我们假设您有一个完美平衡的二叉树，如下所示：

```
 *
              /             \
             *               *
          /     \         /     \
         *       *       *       *
        / \     / \     / \     / \
       *   *   *   *   *   *   *   * 
```

在进行搜索的每一点，您都会查看当前节点。如果它是您正在寻找的那个，那就太好了！你完全完成了。另一方面，如果不是，那么你要么下降到左子树或右子树，然后重复这个过程。

如果你走进两个子树中的一个，你实际上是在说“我根本不关心另一个子树中有什么”。你把里面的所有节点都扔掉了。那里有多少个节点？好吧，通过快速的目视检查 - 理想情况下，随后进行一些很好的数学运算 - 你会发现你正在丢弃树中大约一半的节点。

这意味着在查找的每一步中，您要么 (1) 找到您要查找的节点，要么 (2) 丢弃树中的一半节点。由于您在每一步都在做恒定的工作量，因此您正在查看 O(log n) 行为的标志性行为 - 每一步的工作量都会下降一个常数因子，因此它只能以对数方式进行多次次。

当然，并不是所有的树都是这样的。AVL 树有一个有趣的特性，即每次下降到子树时，您都会丢弃总节点的大致黄金比例部分。因此，这可以保证您在用完节点之前只能采取对数许多步骤 - 因此 O(log n) 高度。在红/黑树中，每一步都会丢弃（大约）四分之一的总节点，并且由于您缩小了一个常数因子，您再次获得了您想要的 O(log n) 查找时间。非常有趣的替罪羊树有一个可调参数，用于确定它的平衡程度，但您可以再次证明，您采取的每一步都会根据这个可调参数丢弃一些常数因子，给出 O(log n) 查找。

然而，这种分析对于不平衡的树来说是错误的。如果你有一棵纯粹的退化树——每个节点都只有一个子节点——那么你沿着树向下走的每一步只会扔掉一个节点，而不是一个恒定的分数。这意味着在最坏的情况下查找时间会达到 O(n)，因为从 n 中*减去*常数的次数是 O(n)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-17T19:59:38.820

> 如果我们有一棵包含 N 个元素的树，为什么查找树并检查是否存在特定值的时间复杂度是 O(log(n))，我们如何得到呢？

**那不是真的**。默认情况下，二叉搜索树中的查找不是`O(log(n))`，其中`n`是节点数。在最坏的情况下，它可能变成`O(n)`. 例如，如果我们插入以下序列的值`n, n - 1, ..., 1`（以相同的顺序），那么树将表示如下：

```
 n
                 /
              n - 1
               /
            n - 2
             /
           ...
           1 
```

查找具有值的节点`1`具有`O(n)`时间复杂度。

为了使查找更有效，树必须**平衡**，使其最大高度与 成正比`log(n)`。在这种情况下，查找的时间复杂度是`O(log(n))`因为查找任何叶子都受`log(n)`操作限制。

但同样，并非每个**二叉搜索树**都是**平衡二叉搜索树**。您必须平衡它以保证`O(log(n))`时间复杂度。

# grails - Grails 动态连接到休眠变化

> ID：14426796
> 
> 赞同：0
> 
> 时间：2013-01-20T16:52:53.470
> 
> 标签：grails

我正在尝试根据登录的应用程序用户动态更改与休眠的连接。IE 每个应用程序用户都将拥有自己的 oracle 架构。为此，我根据登录的用户从代码中动态更改了**dataSourceUnproxied.username**和**dataSourceUnproxied.password**的值，然后我关闭了连接并使用新设置再次获得连接。它有效，但**问题**是如果两个用户同时登录到我的应用程序，连接将设置为最后登录用户的连接，并且两个用户将再次使用相同的连接。这些变量似乎是应用程序范围的变量，它们为所有用户设置了值。

有没有办法根据用户会话使这些值不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T21:13:20.090

我认为你的问题类似于这个 [http://grails.1312388.n4.nabble.com/unique-dataSource-per-HttpSession-td1343203.html](http://grails.1312388.n4.nabble.com/unique-dataSource-per-HttpSession-td1343203.html)

基本上你可以想出自己的数据源实现。

我相信它可以帮助您解决小黑角的问题。

# haskell - 模棱两可的异常类型

> ID：14426800
> 
> 赞同：1
> 
> 时间：2013-01-20T16:53:13.090
> 
> 标签：haskell, types, exception-handling

我将一些旧代码从`Prelude.catch`to更改为`Control.Exception.catch`并得到一个模棱两可的类型错误。“没什么大不了的”，我想。但是，经过仔细检查，我不确定为什么这不能按原样工作......

```
handler :: Exception e => e -> IO x

with_handler :: IO x -> IO x
with_handler act = catch act handler 
```

在我看来，这段代码应该可以*工作*，但它显然违反了类型系统的一些主格规则。（虽然我不确定是什么。）

有人可以准确解释类型检查器对什么不满意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T16:58:16.593

编译器不知道为`handler`. 它在运行时看不到引发了什么异常，然后为 选择适当的类型`handler`，它必须在编译时解析类型。

可能可以给出`handler`类型

```
handler :: SomeException -> IO x 
```

这将解决歧义。

# objective-c - 在 2 个视图之间旋转

> ID：14426804
> 
> 赞同：1
> 
> 时间：2013-01-20T16:53:24.490
> 
> 标签：objective-c, cocoa-touch, ios4, ios6

我有两种看法。如何通过旋转在它们之间转换？我想旋转第一个视图以获得第二个视图...谢谢。

我尝试使用 [UIView transitionFromView 但它没有旋转参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:19:20.853

这可能是你所期待的。但是，并不像您预期​​的那样，因为它不使用过渡动画来简单地添加或删除子视图。

```
UIView *view1 = [[UIView alloc] initWithFrame:CGRectMake(60, 140, 200, 200)];
view1.backgroundColor = [UIColor greenColor];
[self.view addSubview:view1];    
UIView *view2 = [[UIView alloc] initWithFrame:CGRectMake(60, 140, 200, 200)];
view2.backgroundColor = [UIColor redColor];
  [self.view addSubview:view2];
view2.alpha = 0;
[UIView transitionWithView:view1 duration:2.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    view1.transform = CGAffineTransformMakeRotation(M_PI/2);
} completion:^(BOOL com){
    view2.alpha = 1;
    [view1 removeFromSuperview];
}]; 
```

# java - ClassNotFoundException: BasicDataSourceFactory

> ID：14426810
> 
> 赞同：0
> 
> 时间：2013-01-20T16:53:41.957
> 
> 标签：java, linux, tomcat, classpath, classnotfoundexception

我有一个 JAVA 应用程序，可以在 Tomcat7 上的本地 Windows7 环境中正常运行。我正在尝试在 Linux 环境中将其投入生产。一切都已完成并且工作正常，除非我的应用程序尝试访问数据库。不涉及数据库的操作，它工作正常。我得到的错误是

```
java.lang.ClassNotFoundException: org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory 
```

此类是 tomcat-dbcp.jar 的一部分。这放在我的 $CATALINA_HOME/lib 文件夹中。为什么这个还没有收到？请帮忙！

更新：我还打开了 .jar 文件并进行了检查。存在 org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory.class 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T06:54:01.163

终于可以破解了。我的错误 - 我只依靠 echo $CATALINA_HOME 来检查它的位置。事实证明，这可能会产生误导。最好使用

```
ps aux | grep catalina 
```

在输出中寻找 catalina.base 和 catalina.home。这些变量前面给出的路径是从中获取 Tomcat 库的路径。我已经完成了默认安装，并在 /usr/share/tomcat7 下找到了这些库。事实证明，使用 yum 完成的默认安装没有提供 tomcat-dbcp.jar 文件。相反，它提供了 commons-dbcp.jar。阅读有关[tomcat-dbcp 与 commons-dbcp 的信息](https://stackoverflow.com/questions/4711943/tomcat-dbcp-vs-commons-dbcp)

更改 usr/share/tomcat7 文件夹下的 lib 文件需要我使用 sudo bash。您还可能注意到 /usr/share/tomcat7 下的 lib 文件夹是一个 simlink。只需执行 ls /usr/share/tomcat7 -l 即可获取父位置。您将只能在父位置进行更改。可以检查 server.xml 的类似内容，它最终也是从 /usr/share/tomcat7 本身中挑选出来的。

管理所有这些的最佳方式是创建您自己的模拟链接，这样您在第一次之后就无需费心去不同的位置。

感谢所有试图提供帮助的人。

# vb.net - 无法从当前日期获取月份

> ID：14426813
> 
> 赞同：4
> 
> 时间：2013-01-20T16:54:10.783
> 
> 标签：vb.net, date

我试图从当前日期中提取月份，但徒劳无功。我正在使用代码：

```
 Format(Today.Date, "mmmm") 
```

但是，当我尝试运行它以显示像一月这样的月份时，它会显示 00。我认为这会起作用，但事实并非如此。我可以做些什么来使用像单个函数这样的简单方法从 vb.net 中的当前日期获取月份？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T16:55:14.497

试试这个 ：

```
DateTime.Today.ToString("MMMM") 
```

查看[此](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)了解详细的日期格式选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T16:59:33.373

试试这个

```
 MonthName(Now.Date.Month(),true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T16:58:06.093

msdn：[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

```
Format(Today.Date, "MMMM") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T23:41:59.973

EXTRACT(MONTH FROM NOW()) ，获取当前日期的月份

# git - 如何查看 origin/master 在 master 之前的提交消息？

> ID：14426819
> 
> 赞同：5
> 
> 时间：2013-01-20T16:54:37.720
> 
> 标签：git

当 git 通知我我的本地分支落后于 master 时，我如何告诉 git 打印出我落后的日志消息。例如，在以下情况下，如何查看我在 master 上没有的 2 个提交的日志消息？

```
git status
# On branch master
# Your branch is behind 'origin/master' by 2 commits, and can be fast-forwarded.
#
nothing to commit, working directory clean 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-20T17:05:16.787

您可以尝试（按照“ [Git diff ？有和没有点`..`有什么区别`..`](https://stackoverflow.com/questions/7251477/git-diff-whats-the-difference-between-having-and-no-dots)”）：

```
 git log master..origin/master 
```

这与以下内容相同：

```
git log origin/master ^master 
```

`origin/master`（告诉我哪些提交*不是*-- ' `^`' -- on `master`）

![git 日志点](../Images/82c53804c4bf96f87f7fe9ec6637d1c5.png)

# android - AIDL 输入参数

> ID：14426820
> 
> 赞同：2
> 
> 时间：2013-01-20T16:54:40.577
> 
> 标签：android, aidl

我想知道 AIDL 中的 inout 参数是干什么用的？

我知道什么是为了什么，什么是为了什么。（out 不会编组传递的对象）。

但我不明白 inout 是做什么用的。

我查看了： [AIDL 接口参数值中的“In/out/inout”？](https://stackoverflow.com/questions/4700225/in-out-inout-in-a-aidl-interface-parameter-value) 问题，但还是不明白。

根据我的测试，参数的传递很像在中指定它。

因此，如果 any1 可以阐明什么是 inout 会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T16:59:11.710

`in`参数仅从调用者传输到被调用者。参数从`out`被调用者传输到调用者。并且`inout`参数是双向传输的。

`inout`当您将对象传递给被调用者并且被调用者更改它时，您将使用参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T14:44:34.360

这是我在 AIDL 中解释定向标签的版本，

*   它只是一个指示数据流向的方向标签。
    *   **in** - 对象从客户端传输到仅用于输入的服务
    *   **out** - 对象从客户端传输到仅用于输出的服务。
    *   **inout** - 对象从客户端传输到用于输入和输出的服务。
*   所有非原始参数都需要一个方向标签来指示数据的走向。要么进，出，要么进。

*   默认情况下，基元**在**，否则不能

*   请注意，来自客户端的 RPC 调用是**同步**的。
*   您应该**将方向限制**为真正需要的方向，因为编组参数很昂贵。

**示例**：请检查下面的 AIDL 接口以更好地理解它。

```
package com.hardian.sample.aidl;
import com.hardian.sample.aidl.TeamMember;

interface ITeamManageService {
void getTeamCaptian(out TeamMember member);
void updateTeamMember(inout TeamMember member, in boolean isLeader);
oneway void removeTeamMember(in TeamMember member);
} 
```

在这里，我们使用**了 out**、**in**、**inout**方向标签来指示数据的走向。

1.  **getTeamCaptian(out TeamMember member)** : 获取球队队长。这里的“ **out** ”方向标签的意思是，当客户端调用该方法时，“member”对象没有相关数据，但是服务器要对“member”对象进行修改，所以客户端会得到更新后的“member”对象. 实际上，方法调用是**同步**的。

2.  **updateTeamMember(inout TeamMember member, in boolean isLeader)** : 更新团队的队长。这里的“ **inout** ”方向标签的意思是，当客户端调用这个方法时，“member”对象里面有相关的数据。服务器将使用输入数据并对其进行处理。流程完成后，客户应取回相关数据。实际上，方法调用是**同步**的。

3.  **removeTeamMember(in TeamMember member)** 从团队中删除成员。这里的“ **in** ”方向标签意味着，“成员”对象从客户端传输到服务，仅用于输入。如果对服务中的“成员”对象进行了任何更改，那么它将不会反映在客户端中。方法调用是**异步**的，我们可以在方法签名中加上“ **oneway ”关键字。**异步方法不能有“out”和“inout”参数，它们也必须返回 void。

# python - 在 Python HTML 中创建条形图

> ID：14426822
> 
> 赞同：0
> 
> 时间：2013-01-20T16:54:51.503
> 
> 标签：python, html

寻找从字典创建条形图的系统有大约 150 行可以放入图表。

{'test.com'：十进制（'40'），'cmi.com'：十进制（'70'），'dublin.ie'：十进制（'5'），'sfss.edu'：十进制（'35 '), 'computer.ie': 十进制('10')}

一直在做的是 for 循环并使其成为图像宽度，但不能像想要的那样动态地工作。

```
print "<img src='line.png' width='%d'>" % email[1] 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:43:13.643

Solution i am using

```
import matplotlib

matplotlib.use('Agg')
from pylab import *
from decimal import *

def main(my_dict):..
    bar_graph(my_dict, graph_title='Custoers')
    show_html()

def bar_graph(name_value_dict, graph_title='', output_name='bargraph.png'):
    figure(figsize=(15, 10)) # image dimensions..
    title(graph_title, size='x-small')

    # add bars
    for i, key in zip(range(len(name_value_dict)), name_value_dict.keys()):
        barh(i, name_value_dict[key], color='red')

    # axis setup
    yticks(arange(0, len(name_value_dict)),
        [('%s: %d \n' % (name)) for name in
        zip(name_value_dict.keys(), name_value_dict.values())],
        size='small')

# max_value = max(name_value_dict.values())
#tick_range = arange(0, max_value, (max_value / len(ame_val_dict)))
#formatter = FixedFormatter([str(x) for x in tick_range])
# gca().yaxis.set_major_formatter(formatter)

    # gca().yaxis.grid(which='major')
    grid(True).
    savefig(output_name)

def show_html():
    #print "<html><body>"
    print "<img src='bargraph.png'>"
    #print "</body></html>"

if __name__ == "__main__":
    my_dict = {'la' : Decimal('20'), 'cmi' : Decimal(100)}
    main(my_dict) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T21:52:06.053

结合

[当 DISPLAY 未定义时，在 Python 中创建条形图](https://stackoverflow.com/questions/7871338/creating-bar-charts-in-python) 并 [使用 matplotlib 生成 PNG](https://stackoverflow.com/questions/2801882/generating-a-png-with-matplotlib-when-display-is-undefined)

能够解决这个感谢帮助。

```
#!/usr/bin/env python
print 'Content-type: text/html'
print.
import numpy as np
import matplotlib as mpl
mpl.use('Agg')

import matplotlib.pyplot as plt 
```

谢谢

# flash - 使用 MTASC 编译时在 AS2 中导入类

> ID：14426823
> 
> 赞同：1
> 
> 时间：2013-01-20T16:54:55.527
> 
> 标签：flash, actionscript-2, mtasc

我正在尝试使用 MTASC 编译我在 AS2 中工作的项目。但是，我在导入一些课程时遇到了一些问题。我的目录结构如下：

```
assets
--MouseTrail.fla
bin
--MouseTrail.swf
src
--MouseTrail
----Interface.as
----Main.as 
```

**主文件**

```
class MouseTrail.Main extends MovieClip
{
    public static function main(root:MovieClip)
    {
        root.__proto__ = Main.prototype;
    }
} 
```

**接口.as**

```
import MouseTrail.Main;

class MouseTrail.Interface extends MouseTrail.Main
{
    public function Interface(root:MovieClip)
    {
       super(root); 
       start();
    }

    private function start():Void
    {
        lineStyle(1, 0, 100);
        lineTo(100, 100);
    }
} 
```

我用来编译我的类的命令是：

```
mtasc ~/Desktop/mousetrail/src/MouseTrail/* -swf ~/Desktop/mousetrail/bin/mouseTrail.swf 
```

但是，我收到以下错误：

```
Desktop/mousetrail/src/MouseTrail/Interface.as:4: lines 4-21 : type error class not found : MouseTrail.Main 
```

看来我无法从我的 MouseTrail 库中导入我需要的类。

任何人都可以提供一些帮助以使其正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:49:14.943

使用此命令行解决了此问题：

```
mtasc ~/Desktop/mousetrail/src/MouseTrail/Interface.as -swf ~/Desktop/mousetrail/bin/mouseTrail.swf -out ~/Desktop/mousetrail/bin/mouseTrailTest.swf -cp ~/Desktop/mousetrail/src 
```

价值观

-swf 输入 .swf

-out 输出 .swf

-cp 类根文件夹

# java - 如何在android中使用achartengine对齐图表中心？

> ID：14426825
> 
> 赞同：2
> 
> 时间：2013-01-20T16:55:02.670
> 
> 标签：java, android, android-layout, achartengine, legend

我有一个使用 achartengine 的折线图。它运行良好。

但我想改变传说的位置。

我希望它在中心对齐！而不是离开......

```
from :

--* Systolic * Diastolic * Pulses------------------

to:

----------* Systolic * Diastolic * Pulses---------- 
```

![在此处输入图像描述](../Images/d95564dd30fcb99ab3360a4251795159.png)

位置可以在上方或左/右改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:54:59.990

实际上，您根本无法使用 Dan 的[answear](https://stackoverflow.com/questions/12626844/how-to-replace-the-legends-of-piechart-using-achartengine-api/12627823#12627823)中提到的 AChartEngine 来移动图例。

因此，唯一的方法是隐藏图例，而是将其自定义/创建为文本视图并将其设置在您的活动中。当然，如果您将图表不是作为单独的活动，而是嵌入到您的自定义布局中。

# python - 如何在python中避免两个循环

> ID：14426827
> 
> 赞同：2
> 
> 时间：2013-01-20T16:55:05.763
> 
> 标签：python, loops

这是我的问题：我在 python 中有一个字典，例如：

```
a = {1:[2, 3], 2:[1]} 
```

我想输出：

```
1, 2
1, 3
2, 1 
```

我正在做的是

```
for i in a:
    for j in a[i]:
        print i, j 
```

那么有没有更简单的方法可以避免在这里出现两个循环，或者它已经是最简单的方法了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:01:04.903

你拥有的代码和它得到的一样好。一个小的改进可能是在外部循环中迭代字典的项目，而不是进行索引：

```
for i, lst in a.items() # use a.iteritems() in Python 2
    for j in lst:
        print("{}, {}".format(i, j)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:05:59.623

如果您想避免显式的 for 循环，可以使用列表推导的几种替代方法。

**# 1 方法**

```
# Python2.7
for key, value in a.iteritems():    # Use a.items() for python 3
    print "\n".join(["%d, %d" % (key, val) for val in value]) 
```

**# 2 方法**- 一种更奇特的列表推导方式

```
print "\n".join(["\n".join(["%d, %d" % (key, val) for val in value]) for key, value in a.iteritems()]) 
```

两者都会输出

```
1, 2
1, 3
2, 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:29:55.440

请记住，在 Python 中`Readability counts.`，理想情况下，@Blckknght 的解决方案是您应该期待的，但只是从技术上将您的问题视为 POC，您可以将表达式重写为单个循环，这是一个解决方案。

但是需要注意的是，如果你想让你的代码可读，请记住`Explicit is better than implicit.`

```
>>> def foo():
    return '\n'.join('{},{}'.format(*e) for e in chain(*(izip(cycle([k]),v) for k,v in a.items())))

>>> def bar():
    return '\n'.join("{},{}".format(i,j) for i in a for j in a[i])

>>> cProfile.run("foo()")
         20 function calls in 0.000 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 <pyshell#240>:1(foo)
        5    0.000    0.000    0.000    0.000 <pyshell#240>:2(<genexpr>)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
       10    0.000    0.000    0.000    0.000 {method 'format' of 'str' objects}
        1    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'join' of 'str' objects}

>>> cProfile.run("bar()")
         25 function calls in 0.000 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.000    0.000 <pyshell#242>:1(bar)
       11    0.000    0.000    0.000    0.000 <pyshell#242>:2(<genexpr>)
        1    0.000    0.000    0.000    0.000 <string>:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
       10    0.000    0.000    0.000    0.000 {method 'format' of 'str' objects}
        1    0.000    0.000    0.000    0.000 {method 'join' of 'str' objects} 
```

# ruby-on-rails - 新建对象后在视图中显示 HTML？

> ID：14426830
> 
> 赞同：1
> 
> 时间：2013-01-20T16:55:14.490
> 
> 标签：ruby-on-rails

在 Rails 中创建对象后，我将重定向到新对象页面。在对象所有者的第一次视图中，我想要一个弹出窗口询问用户是否想邀请他们的 Facebook 朋友加入这个新对象。

如果这段 HTML 应该显示一次，你如何检查视图？

我知道向新对象发送数据的唯一方法是使用 redirect_to :notice，但这只是在顶部的横幅中显示为文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:00:19.697

[Flash 哈希](http://guides.rubyonrails.org/action_controller_overview.html#the-flash)可能是完成此任务的最简单方法。设置后仅对下一个请求可用。添加

```
redirect_to @new_object, :flash=>{ :show_invitation=>true } 
```

在创建控制器的动作和

```
<%= "banner HTML" if flash[:show_invitation] %> 
```

在你看来。

# actionscript-3 - Flash Builder 4.6，移动，动态加载图像到自定义 ItemRender

> ID：14426832
> 
> 赞同：0
> 
> 时间：2013-01-20T16:55:20.303
> 
> 标签：actionscript-3, flash, apache-flex, mobile, builder

在自定义 itemrender 中加载图像以供列表的好地方。我尝试在 createChildren 中为图像创建我的持有者，但尚未设置数据。我认为数据功能不行，因为每次用户滚动时都是 calinig。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T00:43:51.067

You didn't tell us what the image is and how it relates to your itemRenderer. Here are a few options:

If your image will not change based on the data then create your image class in createChildren(). Set the property on it in the createChildren() method; if it is static. If it is something that may change you may consider setting it in commitProperties().

If your image will change based on the data; then you should change it either in the set data method or in a dataChange event handler. I prefer the latter, but that is just preference. An itemRenderer is re-used as the list is scrolled. So the data that your renderer represents changes with it; and so should your visual display.

If lots of the elements of your dataProvider may use the same image; you can write conditional logic to determine whether or not the image should be loaded again. This would prevent the image from reloading again unnecessarily.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T16:56:34.650

您需要将 data/url 设置为`commitProperties`.

# php - 使用按钮删除mysql数据库记录

> ID：14426834
> 
> 赞同：1
> 
> 时间：2013-01-20T16:55:28.537
> 
> 标签：php, javascript, jquery, mysql

我在Mysql中做了一个数据库。这个数据库有3个表，1：user 2：activity 3：user_activity。user_activity 是一个koppeltabel（我不知道这个词是不是正确的英文，所以它是一个连接表user 和activity 的表），这个表有以下行：1：ActivityID 和UserID。

我制作了一个脚本，从数据库中获取内容并显示该内容（该内容在我的脚本中称为活动）。每个活动都有自己的按钮，当您按下该按钮时，您会将特定活动添加到您的“指南”中。将活动添加到指南后，该活动也将显示。

所以这是我到目前为止的代码。js脚本：

```
$(document).ready(function() {

$(".addActivity").click( function() {

    var activityId = $(this).data('activity');  

    $.ajax({
        type: "POST",
        url: "add_activity.php",
        data: {
            activity: activityId
        },
        dataType: 'json',
        success: function (data) {

        }
    });
    $(this).hide();
    }); 
}); 
```

这是我的“add_activity.php 文件：

```
<?php
include "connection.php";

// Haal eerst de gebruikers info van de gebruiker die ingelogd is op
$sql = "SELECT * FROM user WHERE Username = '".$_SESSION['Username']."' ";
$stm = $db->prepare($sql);
$result = $stm->execute(array());
while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
$userID = $row['UserID'];
}

// Lees de activity van $_POST
$activityID = filter_input(INPUT_POST, 'activity', FILTER_VALIDATE_INT, array('min_range' => 1));
if( $activityID )
{
    // Check of the activity bestaat in de database
    $activityQuery = $db->prepare("SELECT ActivityID FROM activity LIMIT 1");
    $activityQuery->execute( array( $activityID ) );
    if( 1 === $activityQuery->rowCount() )
    {
        // Voeg het record toe
        $activityQuery = $db->prepare("REPLACE INTO user_activity(`UserID`,`ActivityID`)VALUES (?, ?)");
        $activityQuery->execute( array( $userID, $activityID ) );
        if( 0 < $activityQuery->rowCount() )
        {
            echo "Record toegevoegd.";
            exit;
        }
    }
}

// Failure
echo "Er is een fout opgetreden.";
?> 
```

这是我的按钮：

```
echo '<input type="button" class="addActivity" onclick="MakeRequest(' . $test . ')" value="Activiteit toevoegen" data-activity="' . $row['ActivityID'] . '">'; 
```

该脚本在 user_activity 中创建了一条新记录，但现在我还想要一个从 user_activity 中删除记录的按钮。我试图修改这个脚本，但我没有成功。我希望你有足够的信息，并且有人愿意帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:58:06.407

您需要创建一个`delete_activity.php`文件并运行如下查询：

```
DELETE FROM `user_activity` ... 
```

然后只需对另一个按钮进行类似的 AJAX 调用：

```
$(".delActivity").click( function() {

    var activityId = $(this).data('activity');  

    $.ajax({
        type: "POST",
        url: "delete_activity.php",
        data: {
            activity: activityId
        },
        dataType: 'json',
        success: function (data) {
        }
    });

    $(this).hide();
    }); 

}); 
```

# excel - VBA Unfilter 范围

> ID：14426837
> 
> 赞同：6
> 
> 时间：2013-01-20T16:55:49.800
> 
> 标签：excel, excel-2007, vba

我正在使用这段代码：

```
Sheets("Sheet1").AutofilterMode = False 
```

使用 VBA 取消过滤 Excel 工作表中的数据（重点是清除所有过滤器）。这似乎并不总是有效，有更好的方法吗？

谢谢！

如果有帮助，此表从 Sql Server 链接（数据 --> 从其他来源 --> 从 Sql Server...），并且它具有彩色设计布局（特定于表）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-20T20:29:35.343

改为使用`Worksheets("Sheet1").ShowAllData`。请参阅[http://msdn.microsoft.com/en-us/library/office/bb178108%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/bb178108%28v=office.12%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-12T17:51:19.537

仅当`ShowAllData`您的工作表具有过滤器时才有效，否则它将损坏。我发现您可以使用它创建一个函数`On Error Resume Next`，它应该适用于所有情况：

```
Sub ShowAllData()
On Error Resume Next
Worksheets("Sheet1").ShowAllData

End Sub 
```

然后从你的主子调用函数：

```
Sub Main()

ShowAllData

End Sub 
```

# javascript - 如何根据 x 轴中特定日期的选择来决定哪些值将出现在 y 轴上

> ID：14426840
> 
> 赞同：0
> 
> 时间：2013-01-20T16:56:19.517
> 
> 标签：javascript, highcharts

在[此图表](http://www.highcharts.com/demo/line-time-series)中，我们如何确定 y 轴的给定值属于 x 轴的哪个特定日期。

```
 series: [{
                type: 'area',
                name: 'USD to EUR',
                pointInterval: 24 * 3600 * 1000,
                pointStart: Date.UTC(2006, 0, 01),
                data: [
                    0.8446, 0.8445, 0.8444, 0.8451,    0.8418, 0.8264,    0.8258, 0.8232,    0.8233, 0.8258,
                    0.8283, 0.8278, 0.8256, 0.8292,    0.8239, 0.8239,    0.8245, 0.8265,    0.8261, 0.8269,
                    0.8273, 0.8244, 0.8244, 0.8172,    0.8139, 0.8146,    0.8164, 0.82,    0.8269, 0.8269,
                    0.8269, 0.8258, 0.8247, 0.8286,    0.8289, 0.8316,    0.832, 0.8333,    0.8352, 0.8357,
                    0.8355, 0.8354, 0.8403, 0.8403,    0.8406, 0.8403,    0.8396, 0.8418,    0.8409, 0.8384,
                    0.8386, 0.8372, 0.839, 0.84, 0.8389, 0.84, 0.8423, 0.8423, 0.8435, 0.8422,
                    0.838, 0.8373, 0.8316, 0.8303,    0.8303, 0.8302,    0.8369, 0.84, 0.8385, 0.84,
                    0.8401, 0.8402, 0.8381, 0.8351,    0.8314, 0.8273,    0.8213, 0.8207,    0.8207, 0.8215,
                    0.8242, 0.8273, 0.8301, 0.8346,    0.8312, 0.8312,    0.8312, 0.8306,    0.8327, 0.8282,
                    0.824, 0.8255, 0.8256, 0.8273, 0.8209, 0.8151, 0.8149, 0.8213, 0.8273, 0.8273,
                    0.8261, 0.8252, 0.824, 0.8262, 0.8258, 0.8261, 0.826, 0.8199, 0.8153, 0.8097,
                    0.8101, 0.8119, 0.8107, 0.8105,    0.8084, 0.8069,    0.8047, 0.8023,    0.7965, 0.7919,
                    0.7921, 0.7922, 0.7934, 0.7918,    0.7915, 0.787, 0.7861, 0.7861, 0.7853, 0.7867,
                    0.7827, 0.7834, 0.7766, 0.7751, 0.7739, 0.7767, 0.7802, 0.7788, 0.7828, 0.7816,
                    0.7829, 0.783, 0.7829, 0.7781, 0.7811, 0.7831, 0.7826, 0.7855, 0.7855, 0.7845,
                    0.7798, 0.7777, 0.7822, 0.7785, 0.7744, 0.7743, 0.7726, 0.7766, 0.7806, 0.785,
                    0.7907, 0.7912, 0.7913, 0.7931, 0.7952, 0.7951, 0.7928, 0.791, 0.7913, 0.7912,
                    0.7941, 0.7953, 0.7921, 0.7919, 0.7968, 0.7999, 0.7999, 0.7974, 0.7942, 0.796,
                    0.7969, 0.7862, 0.7821, 0.7821, 0.7821, 0.7811, 0.7833, 0.7849, 0.7819, 0.7809,
                    0.7809, 0.7827, 0.7848, 0.785, 0.7873, 0.7894, 0.7907, 0.7909, 0.7947, 0.7987,
                    0.799, 0.7927, 0.79, 0.7878, 0.7878, 0.7907, 0.7922, 0.7937, 0.786, 0.787,
                    0.7838, 0.7838, 0.7837, 0.7836, 0.7806, 0.7825, 0.7798, 0.777, 0.777, 0.7772,
                    0.7793, 0.7788, 0.7785, 0.7832, 0.7865, 0.7865, 0.7853, 0.7847, 0.7809, 0.778,
                    0.7799, 0.78, 0.7801, 0.7765, 0.7785, 0.7811, 0.782, 0.7835, 0.7845, 0.7844,
                    0.782, 0.7811, 0.7795, 0.7794, 0.7806, 0.7794, 0.7794, 0.7778, 0.7793, 0.7808,
                    0.7824, 0.787, 0.7894, 0.7893, 0.7882, 0.7871, 0.7882, 0.7871, 0.7878, 0.79,
                    0.7901, 0.7898, 0.7879, 0.7886, 0.7858, 0.7814, 0.7825, 0.7826, 0.7826, 0.786,
                    0.7878, 0.7868, 0.7883, 0.7893, 0.7892, 0.7876, 0.785, 0.787, 0.7873, 0.7901,
                    0.7936, 0.7939, 0.7938, 0.7956, 0.7975, 0.7978, 0.7972, 0.7995, 0.7995, 0.7994,
                    0.7976, 0.7977, 0.796, 0.7922, 0.7928, 0.7929, 0.7948, 0.797, 0.7953, 0.7907,
                    0.7872, 0.7852, 0.7852, 0.786, 0.7862, 0.7836, 0.7837, 0.784, 0.7867, 0.7867,
                    0.7869, 0.7837, 0.7827, 0.7825, 0.7779, 0.7791, 0.779, 0.7787, 0.78, 0.7807,
                    0.7803, 0.7817, 0.7799, 0.7799, 0.7795, 0.7801, 0.7765, 0.7725, 0.7683, 0.7641,
                    0.7639, 0.7616, 0.7608, 0.759, 0.7582, 0.7539, 0.75, 0.75, 0.7507, 0.7505,
                    0.7516, 0.7522, 0.7531, 0.7577, 0.7577, 0.7582, 0.755, 0.7542, 0.7576, 0.7616,
                    0.7648, 0.7648, 0.7641, 0.7614, 0.757, 0.7587, 0.7588, 0.762, 0.762, 0.7617,
                    0.7618, 0.7615, 0.7612, 0.7596, 0.758, 0.758, 0.758, 0.7547, 0.7549, 0.7613,
                    0.7655, 0.7693, 0.7694, 0.7688, 0.7678, 0.7708, 0.7727, 0.7749, 0.7741, 0.7741,
                    0.7732, 0.7727, 0.7737, 0.7724, 0.7712, 0.772, 0.7721, 0.7717, 0.7704, 0.769,
                    0.7711, 0.774, 0.7745, 0.7745, 0.774, 0.7716, 0.7713, 0.7678, 0.7688, 0.7718,
                    0.7718, 0.7728, 0.7729, 0.7698, 0.7685, 0.7681, 0.769, 0.769, 0.7698, 0.7699,
                    0.7651, 0.7613, 0.7616, 0.7614, 0.7614, 0.7607, 0.7602, 0.7611, 0.7622, 0.7615,
                    0.7598, 0.7598, 0.7592, 0.7573, 0.7566, 0.7567, 0.7591, 0.7582, 0.7585, 0.7613,
                    0.7631, 0.7615, 0.76, 0.7613, 0.7627, 0.7627, 0.7608, 0.7583, 0.7575, 0.7562,
                    0.752, 0.7512, 0.7512, 0.7517, 0.752, 0.7511, 0.748, 0.7509, 0.7531, 0.7531,
                    0.7527, 0.7498, 0.7493, 0.7504, 0.75, 0.7491, 0.7491, 0.7485, 0.7484, 0.7492,
                    0.7471, 0.7459, 0.7477, 0.7477, 0.7483, 0.7458, 0.7448, 0.743, 0.7399, 0.7395,
                    0.7395, 0.7378, 0.7382, 0.7362, 0.7355, 0.7348, 0.7361, 0.7361, 0.7365, 0.7362,
                    0.7331, 0.7339, 0.7344, 0.7327, 0.7327, 0.7336, 0.7333, 0.7359, 0.7359, 0.7372,
                    0.736, 0.736, 0.735, 0.7365, 0.7384, 0.7395, 0.7413, 0.7397, 0.7396, 0.7385,
                    0.7378, 0.7366, 0.74, 0.7411, 0.7406, 0.7405, 0.7414, 0.7431, 0.7431, 0.7438,
                    0.7443, 0.7443, 0.7443, 0.7434, 0.7429, 0.7442, 0.744, 0.7439, 0.7437, 0.7437,
                    0.7429, 0.7403, 0.7399, 0.7418, 0.7468, 0.748, 0.748, 0.749, 0.7494, 0.7522,
                    0.7515, 0.7502, 0.7472, 0.7472, 0.7462, 0.7455, 0.7449, 0.7467, 0.7458, 0.7427,
                    0.7427, 0.743, 0.7429, 0.744, 0.743, 0.7422, 0.7388, 0.7388, 0.7369, 0.7345,
                    0.7345, 0.7345, 0.7352, 0.7341, 0.7341, 0.734, 0.7324, 0.7272, 0.7264, 0.7255,
                    0.7258, 0.7258, 0.7256, 0.7257, 0.7247, 0.7243, 0.7244, 0.7235, 0.7235, 0.7235,
                    0.7235, 0.7262, 0.7288, 0.7301, 0.7337, 0.7337, 0.7324, 0.7297, 0.7317, 0.7315,
                    0.7288, 0.7263, 0.7263, 0.7242, 0.7253, 0.7264, 0.727, 0.7312, 0.7305, 0.7305,
                    0.7318, 0.7358, 0.7409, 0.7454, 0.7437, 0.7424, 0.7424, 0.7415, 0.7419, 0.7414,
                    0.7377, 0.7355, 0.7315, 0.7315, 0.732, 0.7332, 0.7346, 0.7328, 0.7323, 0.734,
                    0.734, 0.7336, 0.7351, 0.7346, 0.7321, 0.7294, 0.7266, 0.7266, 0.7254, 0.7242,
                    0.7213, 0.7197, 0.7209, 0.721, 0.721, 0.721, 0.7209, 0.7159, 0.7133, 0.7105,
                    0.7099, 0.7099, 0.7093, 0.7093, 0.7076, 0.707, 0.7049, 0.7012, 0.7011, 0.7019,
                    0.7046, 0.7063, 0.7089, 0.7077, 0.7077, 0.7077, 0.7091, 0.7118, 0.7079, 0.7053,
                    0.705, 0.7055, 0.7055, 0.7045, 0.7051, 0.7051, 0.7017, 0.7, 0.6995, 0.6994,
                    0.7014, 0.7036, 0.7021, 0.7002, 0.6967, 0.695, 0.695, 0.6939, 0.694, 0.6922,
                    0.6919, 0.6914, 0.6894, 0.6891, 0.6904, 0.689, 0.6834, 0.6823, 0.6807, 0.6815,
                    0.6815, 0.6847, 0.6859, 0.6822, 0.6827, 0.6837, 0.6823, 0.6822, 0.6822, 0.6792,
                    0.6746, 0.6735, 0.6731, 0.6742, 0.6744, 0.6739, 0.6731, 0.6761, 0.6761, 0.6785,
                    0.6818, 0.6836, 0.6823, 0.6805, 0.6793, 0.6849, 0.6833, 0.6825, 0.6825, 0.6816,
                    0.6799, 0.6813, 0.6809, 0.6868, 0.6933, 0.6933, 0.6945, 0.6944, 0.6946, 0.6964,
                    0.6965, 0.6956, 0.6956, 0.695, 0.6948, 0.6928, 0.6887, 0.6824, 0.6794, 0.6794,
                    0.6803, 0.6855, 0.6824, 0.6791, 0.6783, 0.6785, 0.6785, 0.6797, 0.68, 0.6803,
                    0.6805, 0.676, 0.677, 0.677, 0.6736, 0.6726, 0.6764, 0.6821, 0.6831, 0.6842,
                    0.6842, 0.6887, 0.6903, 0.6848, 0.6824, 0.6788, 0.6814, 0.6814, 0.6797, 0.6769,
                    0.6765, 0.6733, 0.6729, 0.6758, 0.6758, 0.675, 0.678, 0.6833, 0.6856, 0.6903,
                    0.6896, 0.6896, 0.6882, 0.6879, 0.6862, 0.6852, 0.6823, 0.6813, 0.6813, 0.6822,
                    0.6802, 0.6802, 0.6784, 0.6748, 0.6747, 0.6747, 0.6748, 0.6733, 0.665, 0.6611,
                    0.6583, 0.659, 0.659, 0.6581, 0.6578, 0.6574, 0.6532, 0.6502, 0.6514, 0.6514,
                    0.6507, 0.651, 0.6489, 0.6424, 0.6406, 0.6382, 0.6382, 0.6341, 0.6344, 0.6378,
                    0.6439, 0.6478, 0.6481, 0.6481, 0.6494, 0.6438, 0.6377, 0.6329, 0.6336, 0.6333,
                    0.6333, 0.633, 0.6371, 0.6403, 0.6396, 0.6364, 0.6356, 0.6356, 0.6368, 0.6357,
                    0.6354, 0.632, 0.6332, 0.6328, 0.6331, 0.6342, 0.6321, 0.6302, 0.6278, 0.6308,
                    0.6324, 0.6324, 0.6307, 0.6277, 0.6269, 0.6335, 0.6392, 0.64, 0.6401, 0.6396,
                    0.6407, 0.6423, 0.6429, 0.6472, 0.6485, 0.6486, 0.6467, 0.6444, 0.6467, 0.6509,
                    0.6478, 0.6461, 0.6461, 0.6468, 0.6449, 0.647, 0.6461, 0.6452, 0.6422, 0.6422,
                    0.6425, 0.6414, 0.6366, 0.6346, 0.635, 0.6346, 0.6346, 0.6343, 0.6346, 0.6379,
                    0.6416, 0.6442, 0.6431, 0.6431, 0.6435, 0.644, 0.6473, 0.6469, 0.6386, 0.6356,
                    0.634, 0.6346, 0.643, 0.6452, 0.6467, 0.6506, 0.6504, 0.6503, 0.6481, 0.6451,
                    0.645, 0.6441, 0.6414, 0.6409, 0.6409, 0.6428, 0.6431, 0.6418, 0.6371, 0.6349,
                    0.6333, 0.6334, 0.6338, 0.6342, 0.632, 0.6318, 0.637, 0.6368, 0.6368, 0.6383,
                    0.6371, 0.6371, 0.6355, 0.632, 0.6277, 0.6276, 0.6291, 0.6274, 0.6293, 0.6311,
                    0.631, 0.6312, 0.6312, 0.6304, 0.6294, 0.6348, 0.6378, 0.6368, 0.6368, 0.6368,
                    0.636, 0.637, 0.6418, 0.6411, 0.6435, 0.6427, 0.6427, 0.6419, 0.6446, 0.6468,
                    0.6487, 0.6594, 0.6666, 0.6666, 0.6678, 0.6712, 0.6705, 0.6718, 0.6784, 0.6811,
                    0.6811, 0.6794, 0.6804, 0.6781, 0.6756, 0.6735, 0.6763, 0.6762, 0.6777, 0.6815,
                    0.6802, 0.678, 0.6796, 0.6817, 0.6817, 0.6832, 0.6877, 0.6912, 0.6914, 0.7009,
                    0.7012, 0.701, 0.7005, 0.7076, 0.7087, 0.717, 0.7105, 0.7031, 0.7029, 0.7006,
                    0.7035, 0.7045, 0.6956, 0.6988, 0.6915, 0.6914, 0.6859, 0.6778, 0.6815, 0.6815,
                    0.6843, 0.6846, 0.6846, 0.6923, 0.6997, 0.7098, 0.7188, 0.7232, 0.7262, 0.7266,
                    0.7359, 0.7368, 0.7337, 0.7317, 0.7387, 0.7467, 0.7461, 0.7366, 0.7319, 0.7361,
                    0.7437, 0.7432, 0.7461, 0.7461, 0.7454, 0.7549, 0.7742, 0.7801, 0.7903, 0.7876,
                    0.7928, 0.7991, 0.8007, 0.7823, 0.7661, 0.785, 0.7863, 0.7862, 0.7821, 0.7858,
                    0.7731, 0.7779, 0.7844, 0.7866, 0.7864, 0.7788, 0.7875, 0.7971, 0.8004, 0.7857,
                    0.7932, 0.7938, 0.7927, 0.7918, 0.7919, 0.7989, 0.7988, 0.7949, 0.7948, 0.7882,
                    0.7745, 0.771, 0.775, 0.7791, 0.7882, 0.7882, 0.7899, 0.7905, 0.7889, 0.7879,
                    0.7855, 0.7866, 0.7865, 0.7795, 0.7758, 0.7717, 0.761, 0.7497, 0.7471, 0.7473,
                    0.7407, 0.7288, 0.7074, 0.6927, 0.7083, 0.7191, 0.719, 0.7153, 0.7156, 0.7158,
                    0.714, 0.7119, 0.7129, 0.7129, 0.7049, 0.7095
                ]
            }] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T08:13:21.033

通过使用单击事件，您可以检索单击的点并查看其 x 和 y 值。

```
plotOptions: {
             area: {         
                    events: {
                             click: function(event) {
                             alert(event.point.x + ' -> ' + event.point.y);
                                                    }
                             }
                    }
              } 
```

> [http://jsfiddle.net/GbE3s/2/](http://jsfiddle.net/GbE3s/2/)

# google-chrome - 从 chrome 获取密码

> ID：14426841
> 
> 赞同：2
> 
> 时间：2013-01-20T16:56:21.297
> 
> 标签：google-chrome, google-chrome-extension

是否可以在 chrome 扩展中访问保存密码？我正在查看 API 但没有找到它。我想将所有密码导出到不同的存储中，使用扩展名似乎是合乎逻辑的方法，但我找不到如何做到这一点。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T18:14:59.190

好的，要回答我自己的问题，似乎无法通过扩展 API 访问该信息，但在 linux 上（linux 不加密登录信息，windows 会），您只需要访问`"~/.config/chromium/Default/Login Data"`并从登录表中提取数据。这是 sqlite3 数据库。

所以它可以用 NPAPI 来完成。

# python - python-网络数据传输

> ID：14426843
> 
> 赞同：1
> 
> 时间：2013-01-20T16:56:26.477
> 
> 标签：python, networking

基于网络的编程新手。

我有 2 台电脑（我知道他们的 IP）。
一台计算机必须使用代理才能连接到 Internet。另一个不通过代理连接。他们不在同一个局域网上。

**我的问题**：
是否可以仅使用它们的 IP（通过代理）连接它们并在它们之间传输数据（至少是文本流）？甚至是插座？

如果没有，是否可以使用其他可以从计算机本地获取的信息来连接它们？

**如果**
1\. 我必须在两个系统上安装模块就可以了；
2.两台电脑都需要有一个.py文件；

我在一个系统上的 Windows 7 上使用 Python 2.7（代理后面的那个），但另一个必须与 Windows、Debian 和 Linux 一起使用（并且不使用任何代理）。

**编辑 1**
代理使用身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:38:17.633

一种可能性是在您的机器上运行一个带有一些 Web 服务的 Web 服务器，而不是在代理后面。假设您也可以在此服务器上获得上传文件的机制，您可以将数据传输到代理后面的机器或从其传出。

使用 python，您可以使用[urllib2](http://docs.python.org/2/howto/urllib2.html)。要使其使用代理（如果它不透明），您需要设置环境变量`HTTP_PROXY`，或配置 urrlib2 以使用它（请参阅[此问题](https://stackoverflow.com/questions/5620263/using-an-http-proxy-python)）。

# regex - 为什么 nextgroup 不匹配没有尾随空格的换行符？

> ID：14426845
> 
> 赞同：2
> 
> 时间：2013-01-20T16:56:33.320
> 
> 标签：regex, syntax, syntax-highlighting, vim

考虑以下 3 组高亮组和语法匹配：

```
hi  Foo     ctermfg=black   ctermbg=red     guifg=black     guibg=red
hi  Filler  ctermfg=black   ctermbg=green   guifg=black     guibg=green
hi  Bar     ctermfg=black   ctermbg=blue    guifg=black     guibg=blue
syn match   Foo     "foo"       nextgroup=Filler
syn match   Filler  "\_s*"      nextgroup=Bar       contained
syn match   Bar     "bar"                           contained

hi  Baz     ctermfg=black   ctermbg=cyan    guifg=black     guibg=cyan
hi  Qux     ctermfg=black   ctermbg=yellow  guifg=black     guibg=yellow
syn match   Baz     "baz\_s*"   nextgroup=Qux
syn match   Qux     "qux"                           contained

hi  Abc     ctermfg=black   ctermbg=magenta guifg=black     guibg=magenta
hi  Xyz     ctermfg=black   ctermbg=white   guifg=black     guibg=white
syn match   Abc     "abc"       nextgroup=Xyz       skipwhite   skipnl
syn match   Xyz     "xyz"                           contained 
```

`Filler`并且`Bar`仅在`Foo`;之后匹配 同样，`Qux`仅在 之后`Baz`，并且`Xyz`仅在 之后`Abc`。`:set list`为了清楚起见，以下示例说明了除非有尾随空格，否则如何匹配`Filler`和`Bar`不匹配：`Foo``Foo`

![](../Images/508b7b8e08ae4400643e298d5acbfb6e.png)

该`Baz` `Qux`示例验证匹配换行符，那么为什么在拆分为and`\_s`时这不起作用？这句话是相关的：`Baz``Foo``Filler`[`:help syn-skipnl`](http://vimdoc.sourceforge.net/htmldoc/syntax.html#:syn-skipnl)

> 当存在“skipnl”时，下一行可能会找到与 nextgroup 的匹配项。这只发生在当前项目在当前行的末尾结束时！当“skipnl”不存在时，下一个组只会在同一行中的当前项目之后找到。

该`Abc` `Xyz`示例完全使用`skipwhite` `skipnl`和不使用`\_s`，确实在这两种情况下都匹配。这是否意味着`EOL`不符合“在同一行中的当前项目之后”的条件？当然它不能成为下一行的一部分？这似乎与正常搜索`\_s`或`\n`导致`EOL`字符在同一行匹配的事实相矛盾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-09T14:01:54.867

如果匹配`\n`在. _ _`nextgroup``skipnl``nextgroup``\n`

在给定的例子中，由于第一个`Foo`匹配在之前立​​即结束`\n`并且`Foo`没有指定`skipnl`，Vim 甚至不尝试匹配`Filler`。其他空格的引入允许`Filler`在第二次匹配之后进行`Foo`匹配，并且由于`Filler`包含`\n`，`Bar`也可以在不`Filler`指定的情况下匹配`skipnl`。

相关代码在`src/syntax.c`：

```
/* nextgroup ends at end of line, unless "skipnl" or "skipempty" present */
if (current_next_list != NULL
        && syn_getcurline()[current_col + 1] == NUL
        && !(current_next_flags & (HL_SKIPNL | HL_SKIPEMPTY)))
    current_next_list = NULL; 
```

和

```
/* handle next_list, unless at end of line and no "skipnl" or
 * "skipempty" */
current_next_list = cur_si->si_next_list;
current_next_flags = cur_si->si_flags;
if (!(current_next_flags & (HL_SKIPNL | HL_SKIPEMPTY))
        && syn_getcurline()[current_col] == NUL)
    current_next_list = NULL; 
```

# scheme - 一个使用小数并以一元形式返回的函数

> ID：14426852
> 
> 赞同：1
> 
> 时间：2013-01-20T16:57:24.847
> 
> 标签：scheme, racket

我正在设计一个函数，它使用一个自然数（如 0、1、2、...等）并使用符号 I 返回以一元（基数 1）表示它的字符串，并在一元后以十进制显示数字形式。所以如果我输入 2，我会得到`"II (2)"`. 5，我会得到`"IIIII (5)"`。

我是这样做的：

```
 (define (number->unary c )
      (cond
       [(= c  1 )  "I (1)" ]
       [(= c  2 ) "II (2)" ]
       [(= c  3) "III (3)"]
       [(= c  4) "IIII (4)"]
       [(= c  5) "IIIII (5)"]
       [(= c  6) "IIIIII (6)"]
       [(= c  7) "IIIIIII (7)"]
       [(= c  8) "IIIIIIII (8)"]
       [(= c  9) "IIIIIIIII (9)"]
       [(= c  10) "IIIIIIIIII (10)"])) 
```

但是有没有更简单的方法来解决这个问题？我一直在阅读有关数字->字符串、字符串附加和复制的信息，但我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:20:45.320

确实有一种更简单的方法 - 使用循环来生成适当数量的`"I"`字符。想一想，如果`c`equals会发生什么`100`？你不应该为此创造一百个条件！

这是一种可能的方法，使用辅助过程通过递归过程实现迭代`loop`：

```
(define (number->unary c)
  (loop c (string-append " (" (number->string c) ")")))

(define (loop num str)
  (if (zero? num)
      str
      (loop (sub1 num) (string-append "I" str)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:54:52.143

这适用于初级学生语言。

下面产生一元部分。

```
(define (number->unary c )
  (cond
    [(= c 0) ""]
    [else    (string-append "I" (number->unary (- c 1)))])) 
```

之后附加计数器（您确定括号是在输出中吗？）。

# python - 无法在 Django 模型中调用 save()？获取：AttributeError：“unicode”对象没有属性“保存”

> ID：14426854
> 
> 赞同：1
> 
> 时间：2013-01-20T16:57:36.087
> 
> 标签：python, django, models

感谢您花时间帮助我。

我对 django 和 python 很陌生。

所以我有一个模型，我试图从另一个模型中提取一些数据来构建一个登陆页面。我试图让它在管理员中完全可定制，但我发现为了我想要的，我将不得不涉及 AJAX。我已经取消了它，并主要删除了管理员自定义，因为这实际上只适用于我自己的个人网站。

因此，归结为总体目标：

*   有很多“图库”页面我想从中提取第一张图片

*   我的“登陆”页面上的每个画廊都将是来自每个画廊、标题和画廊网址的单个图像。

这是我的模型的一部分：AggeragateImages(Orderable) 类：

```
 aggeragate = models.ForeignKey("AggeragatePage", related_name="thumbnails")
    gallery_titles = models.CharField(editable=False, max_length=1000)
    gallery_slug = models.CharField(editable=False, max_length=1000)

    def getGallery():
        """
        Returns PK of all Gallery content type pages
        """
        galleryPK = []

        for e in Page.objects.filter(content_model='gallery'):
            galleryPK.append(e.pk)

        return galleryPK

    galleryPK = getGallery()

    for e in galleryPK:
        gallery_titles = Gallery.objects.get(pk=e).titles
        gallery_titles.save()
        gallery_slug = Gallery.objects.get(pk=e).slug
        gallery_slug.save()

    def __unicode__(self):
        return self.name 
```

但是，为什么我运行 syncdb 我得到： AttributeError: 'unicode' object has no attribute 'save'

我也尝试通过交互式外壳来执行此操作，并且在调用“保存（）”时遇到相同的错误

我真的离基地很远吗？我真的很感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:10:28.230

问题出在：

```
gallery_titles = Gallery.objects.get(pk=e).titles
gallery_titles.save() 
```

当你这样做时`Gallery.objects.get(pk=e)`，它会返回一个模型实例，然后你检索它的`titles`属性，我猜它是一个字符串（`unicode`）。因此，在这一点上，`gallery_titles`您尝试将其保存在下一行，但`unicode`类没有`save`导致错误的方法。

作为旁注，将逻辑代码直接放在类定义中可能不是最好的主意。您可以将您的逻辑分解为更合适的类方法。当您在其定义中调用类方法时，您仍在定义类属性。

# php - 准确计算两篇文章之间的距离

> ID：14426857
> 
> 赞同：1
> 
> 时间：2013-01-20T16:58:05.317
> 
> 标签：php, algorithm, levenshtein-distance

我正在编写一个软件来比较文章。我正在寻找一种有效且准确的算法来计算两篇文章之间的差异（变化）。变化应该完全取决于单词而不是字母。我已经尝试过`levenshtein()`，但它的时间复杂度为**O(n*m)**，在像文章这样的大文本上执行时非常昂贵。我也尝试过 `similar_text()`具有更高时间复杂度的**O(n*m*3)**。此外，`levenshtein()`并`similar_text()`计算将一个字符串转换为另一个字符串所需的操作数，这不是计算两篇大文章之间差异的准确方法。

我还有什么其他选择？

* * *

**编辑：**

我试图从搜索引擎（Google）的角度大致计算变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:05:14.680

PostgreSQL 使用[tsvector](http://www.postgresql.org/docs/8.3/static/datatype-textsearch.html)来实现它的全文搜索功能。也许这对你来说很方便。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:26:10.190

如果您可以定义如何根据单词来衡量文本相似度，那么您就成功了一半。例如：您可以计算两篇文章中每个单词的出现次数，然后创建两个列表的简单差异。但是，这不适用于含义上的相似性。

如果您有数据库，请使用它们的全文功能。如前所述，PostGres 提供了这样的功能。我使用 MSSQL，您可以简单地调用 FREETEXT 函数，该函数将计算一个“等级”，表明两个文本的相似程度。

我强烈建议使用成熟的产品，而不是尝试编写自己的产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:35:17.193

没有办法比较两篇文章。`levenshtein()`并`similar_text()`旨在比较两个词，而不是文章。

最简单的算法是逐字展开文章，找到逐字的相似性并根据您的任务进行一些数学运算，如下所示：

```
// not tested!
function similar_articles($articleA, $articleB) {
  $wordsA = array_unique(preg_split('@[\W]+@', $articleA));
  $wordsB = array_unique(preg_split('@[\W]+@', $articleA));
  $resultSimilarity = 0;
  foreach($wordsA as $wordA) {
    $wordSimilarity = 0;
    foreach($wordsB as $wordB) {
      similar_text($wordA, $wordB, $percent);
      $wordSimilarity = max($wordSimilarity, $percent);
    }
    $resultSimilarity += $wordSimilarity;
  }
  return($resultSimilarity / count($wordsA));
} 
```

注意：`similar_articles($artileA, $articleB)`!=`similar_articles($artileB, $articleA)`因为`similar_text($wordA, $wordB)`!= `similar_text($wordB, $wordA)`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-20T17:49:11.403

计算一种距离的一种简单方法是比较参考。另一种方法是根据字典选择一些关键词，并按照社会相关性的顺序计算距离。

另外，为了使用[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)看看[stringmetric](http://rockymadden.com/stringmetric/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T19:06:47.237

就我而言，我需要计算两篇文章之间的差异。所以，我发现这个非常简单的解决方案非常适合我。它的工作原理是简单地将相似度计算为两篇文章之间的**常用词**除以***max(文章 A 中的单词数，文章 B 中的单词数)***。然后通过从 100 中减去相似度来计算变异，以获得变异百分比。下面的代码解释了这一切。

```
function get_variation($article1,$article2){

      $wordsA = array_unique(preg_split('@[\W]+@', $article1));
      $wordsB = array_unique(preg_split('@[\W]+@', $article2));
      $intersection = array_intersect($wordsA, $wordsB);
      $similarity = (count($intersection)/ (max(count($wordsA),count($wordsB))) * 100);
      $similarity =  number_format($similarity, 2, '.', '');
      $variation = 100-$similarity;
      return $variation;
} 
```

# linux - 我在 linux 命令行中使用 wc 或 grep 有什么问题吗？我的字符数得到 +1

> ID：14426860
> 
> 赞同：-1
> 
> 时间：2013-01-20T16:58:08.530
> 
> 标签：linux, bash, grep, command-line-interface, wc

当我跑

```
echo "obase=2;3" | bc | grep -v \n\s | wc -m 
```

bash 返回 3。但是当我运行时

```
echo "obase=2;3" | bc 
```

bash 返回 11。

为什么 wc -m 的计数高一位数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:01:25.920

**额外的字符是尾随的换行符。**

`wc -m`接收并计算以下三个字符：`1` `1` `\n`.

```
$ echo "obase=2;3" | bc | grep -v \n\s | od -c
0000000    1   1  \n                                                    
0000003 
```

如果你去掉换行符，计数将如你所料：

```
$ echo "obase=2;3" | bc | grep -v \n\s | tr -d '\n' | wc -m
       2 
```

# java - Java - NoClassDefFoundError

> ID：14426864
> 
> 赞同：3
> 
> 时间：2013-01-20T16:58:24.097
> 
> 标签：java, exception, noclassdeffounderror

我需要编译一个外部 java 文件（比如 a.java）。这是我为此编写的代码。

（字符串路径包含java和class文件的路径）

```
 command[0] = "javac";
    command[1] = path+"a.java";
    p = Runtime.getRuntime().exec(command); 
```

上面的代码似乎工作得很好。但是下面的代码

```
 command[0] = "java";
    command[1] = "a";
    command[2] = "-cp";
    command[3] = "."+path+"a";
    p = Runtime.getRuntime().exec(command);        
    stdInput = new BufferedReader(new InputStreamReader(p.getInputStream()));
    stdError = new BufferedReader(new InputStreamReader(p.getErrorStream()));
    while ((temp = stdInput.readLine()) != null) result += "\n" + temp;
    while ((temp = stdError.readLine()) != null) result += "\n" + temp; 
```

导致以下错误

```
java.lang.NoClassDefFoundError: a
Exception in thread "main" 
```

有人可以解释这段代码的问题吗？谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T17:00:57.003

您*首先*指定类名，然后是类路径的参数。类名始终是程序特定参数之前的*最后一件事。*在您的情况下，类路径部分因此*不会*被视为一个选项 - 它将被视为`-cp`Java 程序本身的两个参数（和路径）。

所以而不是：

```
java a -cp (whatever) 
```

你要

```
java -cp (whatever) a 
```

# c++ - C++ SDL 2D 跳跃（重力）

> ID：14426870
> 
> 赞同：4
> 
> 时间：2013-01-20T16:58:44.440
> 
> 标签：c++, sdl

我正在使用 C++ 自学 SDL、OpenGL 等。在线教程帮助我创建了一个在屏幕上移动的盒子和一个盒子不能通过的窗台......

我没有成功找到一个教程来解释和展示如何让盒子跳跃或跳跃。理想情况下，我希望我的盒子能够移动并跳到类似于老式马里奥的壁架上。

我不确定这是否可以通过 SDL 完成？我猜需要添加一些东西才能在按下 up 后让盒子回到地面......我已经尝试了`up`/`down`键并试图让盒子在按下后返回地面但它没有工作。我试过把盒子放在地上，但是向上键不起作用。我也尝试过，一旦按下并且盒子已经移动以使盒子下降相同的距离......我有点明白它需要如何实现（我认为），我只是不知道足够的 C++写它，或者它甚至可以完成。

目前我可以向左或向右和向上移动，但他仍然漂浮在空中:(

这是我的代码：

```
 #include "SDL.h"
    #include "SDL_image.h"
    #include <string>

    const int SCREEN_WIDTH = 480;
    const int SCREEN_HEIGHT = 480;
    const int SCREEN_BPP = 32;
    const int FRAMES_PER_SECOND = 20;
    const int SQUARE_WIDTH = 20;
    const int SQUARE_HEIGHT = 20;

    SDL_Surface *square = NULL;
    SDL_Surface *screen = NULL;
    SDL_Event event;
    SDL_Rect wall;

    class Square{
        private:
        SDL_Rect box;
        int xVel, yVel;
        public:
        Square();
        void handle_input();
        void move();
        void show();};

    class Timer{
        private:
        int startTicks;
        int pausedTicks;
        bool paused;
        bool started;
        public:
        Timer();
        void start();
        void stop();
        void pause();
        void unpause();
        int get_ticks();
        bool is_started();
        bool is_paused();};

    SDL_Surface *load_image( std::string filename ){
        SDL_Surface* loadedImage = NULL;
        SDL_Surface* optimizedImage = NULL;
        loadedImage = IMG_Load( filename.c_str() );
        if( loadedImage != NULL )
        {
            optimizedImage = SDL_DisplayFormat( loadedImage );
            SDL_FreeSurface( loadedImage );
            if( optimizedImage != NULL )
            {
                SDL_SetColorKey( optimizedImage, SDL_SRCCOLORKEY, SDL_MapRGB( optimizedImage->format, 237, 145, 33 ) );//optimizedImage->format, 0, 0xFF, 0xFF
            }
        }
        return optimizedImage;}

    void apply_surface( int x, int y, SDL_Surface* source, SDL_Surface* destination, SDL_Rect* clip = NULL ){
        SDL_Rect offset;
        offset.x = x;
        offset.y = y;
        SDL_BlitSurface( source, clip, destination, &offset );}

    bool check_collision( SDL_Rect A, SDL_Rect B ){
        int leftA, leftB;
        int rightA, rightB;
        int topA, topB;
        int bottomA, bottomB;

        leftA = A.x;
        rightA = A.x + A.w;
        topA = A.y;
        bottomA = A.y + A.h;

        leftB = B.x;
        rightB = B.x + B.w;
        topB = B.y;
        bottomB = B.y + B.h;

        if( bottomA <= topB ){return false;}
        if( topA >= bottomB ){return false;}
        if( rightA <= leftB ){return false;}
        if( leftA >= rightB ){return false;}
        return true;}

    bool init(){
        if( SDL_Init( SDL_INIT_EVERYTHING ) == -1 ){return false;}

        screen = SDL_SetVideoMode( SCREEN_WIDTH, SCREEN_HEIGHT, SCREEN_BPP, SDL_SWSURFACE );
        if( screen == NULL ){return false;}

        SDL_WM_SetCaption( "Move the Square", NULL );
        return true;}

    bool load_files(){
        square = load_image( "square.bmp" );
        if( square == NULL ){return false;}
        return true;}

    void clean_up(){
        SDL_FreeSurface( square );
        SDL_Quit();}

    Square::Square(){
        box.x = 50;
        box.y = 360;
        box.w = SQUARE_WIDTH;
        box.h = SQUARE_HEIGHT;
        xVel = 0;
        yVel = 0;}

    void Square::handle_input(){
        if( event.type == SDL_KEYDOWN ){
            switch( event.key.keysym.sym ){
                case SDLK_UP: yVel -= SQUARE_HEIGHT / 2; break;
                //case SDLK_DOWN: yVel += SQUARE_HEIGHT / 2; break;
                case SDLK_LEFT: xVel -= SQUARE_WIDTH / 2; break;
                case SDLK_RIGHT: xVel += SQUARE_WIDTH / 2; break;}}
        else if( event.type == SDL_KEYUP ){
            switch( event.key.keysym.sym ){
                case SDLK_UP: yVel += SQUARE_HEIGHT / 2; break;
                //case SDLK_DOWN: yVel -= SQUARE_HEIGHT / 2; break;
                case SDLK_LEFT: xVel += SQUARE_WIDTH / 2; break;
                case SDLK_RIGHT: xVel -= SQUARE_WIDTH / 2; break;}}}

    void Square::move(){
        box.x += xVel;
        if( ( box.x < 0 ) || ( box.x + SQUARE_WIDTH > SCREEN_WIDTH ) || ( check_collision( box, wall ) ) ){
            box.x -= xVel;}

        box.y += yVel;

        if( ( box.y < 0 ) || ( box.y + SQUARE_HEIGHT > SCREEN_HEIGHT ) || ( check_collision( box, wall ) ) ){
            box.y -= yVel;}}

    void Square::show(){
        apply_surface( box.x, box.y, square, screen );}

    Timer::Timer(){
        startTicks = 0;
        pausedTicks = 0;
        paused = false;
        started = false;}

    void Timer::start(){
        started = true;
        paused = false;
        startTicks = SDL_GetTicks();}

    void Timer::stop(){
        started = false;
        paused = false;}

    void Timer::pause(){
        if( ( started == true ) && ( paused == false ) ){
            paused = true;
            pausedTicks = SDL_GetTicks() - startTicks;}}

    void Timer::unpause(){
        if( paused == true ){
            paused = false;
            startTicks = SDL_GetTicks() - pausedTicks;
            pausedTicks = 0;}}

    int Timer::get_ticks(){
        if( started == true ){
            if( paused == true ){
                return pausedTicks;}
            else{return SDL_GetTicks() - startTicks;}
        }return 0;}

    bool Timer::is_started(){return started;}
    bool Timer::is_paused(){return paused;}

    int main( int argc, char* args[] ){
        bool quit = false;
        Square mySquare;
        Timer fps;
        if( init() == false ){return 1;}
        if( load_files() == false ){return 1;}

        wall.x = 130;
        wall.y = 300;
        wall.w = 220;
        wall.h = 20;

        while( quit == false ){
            fps.start();
            while( SDL_PollEvent( &event ) ){
                mySquare.handle_input();
                if( event.type == SDL_QUIT ){
                    quit = true;}}

            mySquare.move();
            SDL_FillRect( screen, &screen->clip_rect, SDL_MapRGB( screen->format, 1, 1, 1 ) );
            SDL_FillRect( screen, &wall, SDL_MapRGB( screen->format, 237, 145, 33 ) );
            mySquare.show();

            if( SDL_Flip( screen ) == -1 ){return 1;}
            if( fps.get_ticks() < 1000 / FRAMES_PER_SECOND ){
                SDL_Delay( ( 1000 / FRAMES_PER_SECOND ) - fps.get_ticks() );}}

        clean_up();
        return 0;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:45:20.200

我很确定老派马里奥使用了一些手工制作的基于状态的跳跃函数，没有任何东西与真实物理甚至纯粹意义上的正弦/抛物线曲线相似（尽管他们可能会使用这样的数学作为跳跃的顶点)

您要考虑的输入和状态如下所示：STATE_PRESSED、STATE_DECELERATE、STATE_DESCEND、STATE_FREEFALL。

只要用户按下按钮或直到发生超时，STATE_PRESSED 就会进行线性向上移动。这允许用户在限制最大跳跃高度的同时控制跳跃高度。STATE_DECELERATE 通常是抛物线函数发挥作用的地方。但请记住，如果用户继续按住跳跃按钮，许多平台游戏会在此状态下*略微减慢减速速度。*如果您隐含地发现自己将跳跃按钮一直按住到跳跃的顶点以获得最大高度，则您可以判断任何游戏何时执行此操作。

STATE_DESCEND 非常明显，抛物线函数可能就足够了。一旦达到特定速度，状态应该切换到 STATE_FREEFALL ——此时速度不再增加。这些状态都不受用户按钮按下的影响。

如果需要，您可以将最后两个状态一起滚动，但在我制作状态机的时候，我更喜欢保持清晰定义的状态。例如，它还可以帮助您的游戏的其他部分检查玩家当前的跳跃或跌倒状态。

琐事：NES 上的原始马里奥游戏实际上使用了手工制作的查找表，因为旧的 NES CPU 无法执行基本加法/减法之外的任何操作，但它们非常类似于指数/抛物线曲线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T17:59:55.020

你需要应用一些非常基础的物理学。有可用的库，但对于像这样的简单案例，只需要最少的代码。

您已经有了 xVel 和 yVel 变量。当按下 UP 键时，框“跳”起来，为 yVel 添加值。重力是影响盒子速度的恒定力。盒子向下加速。在实践中，您在 move() 函数的每一帧中将重力应用于速度。

```
yVel -= GRAVITY;    // Zero in space, small value on Moon, big value on Jupiter
box.y += yVel; 
```

请注意，当盒子撞到地板时，您会反转 y 速度。这很好，但是在应用重力的情况下，重力会累积，盒子最终会以惊人的速度弹跳。盒子在反弹时应该会失去“能量”，因此速度可能会减半。

您的代码中的问题是您使用的是整数值。重力是一种微弱的力量，所以要让它看起来真实，它应该是一个小的值。对于整数值，可能无法找到该值。（没有玩弄固定点值，但这是另一个话题。）

所以考虑将 xVel 和 yVel 更改为浮点数。当然，盒子的位置也应该使用浮动。

对于具有更精确物理和考虑帧速率的真正复杂的解决方案，请查看：[https ://gamedev.stackexchange.com/questions/15708/how-can-i-implement-gravity](https://gamedev.stackexchange.com/questions/15708/how-can-i-implement-gravity)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:03:15.477

你应该检查 box2d 2D 物理引擎，它是用 C++ 开发的并且是开源的。 [BOX2D](http://box2d.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T17:03:57.553

您可以使用正弦曲线作为跳跃速度。起初它很快，但在跳跃的顶部速度变慢，直到速度为零，然后运动沿着相同的曲线（但相反，所以先慢）向下。如果仅`Up`按下键，则仅更改 Y 位置，否则如果同时按下左键或`Right`键，则也更改 X 位置。

如果精灵在向上的途中与物体发生碰撞，在到达跳跃的顶部之前，您会立即反转上下方向。减速以与精灵碰撞时相同的速度开始，并沿着相同的正弦曲线加速，直到它回到“地面”。

您可以试验的加速度和速度的精确方程式。

# sqlite - PropertyInfo.CanWrite 属性在调试版本中为 true，在发布版本中为 false

> ID：14426871
> 
> 赞同：1
> 
> 时间：2013-01-20T16:58:47.717
> 
> 标签：sqlite, xamarin.android, android-sqlite, sqlite-net

我们正在使用 Xamarin 的 mono for android 构建一个 android 应用程序，对于跨平台持久性解决方案，我们正在使用[sqlite-net](https://github.com/praeclarum/sqlite-net)

在调试版本中，一切正常，所有用例都通过了，我们很高兴。在为发布而构建时，数据层根本不起作用。由于它处于发布模式，因此很难调试（根据我的定义），但最终我放大了问题：创建表时，sqlite-net 框架迭代属性并仅使用可写的属性。问题是在发布模式下，所有 out POCO 的属性对于 PropertyInfo.CanWrite 都返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:34:33.863

这是由于您链接项目的方式。有关完整的详细信息，请参见[此处](http://forums.xamarin.com/discussion/276/reflection-on-type-in-dll-allways-returns-propertyinfo-canwritefalse)。

# java - 简单的restlet登录

> ID：14426879
> 
> 赞同：1
> 
> 时间：2013-01-20T16:59:28.507
> 
> 标签：java, restlet, restful-authentication, restlet-2.0

我正在玩restlet，我想创建一个登录机制，将密码和用户名存储在MysqlDatabase中。

```
public class zeus extends Application {

    @Override
    public Restlet createInboundRoot() {
        // Δημιουργία του router.
        Router router = new Router(getContext());
        router.attach("/customers", CustomersResource.class);

        ChallengeAuthenticator guard = new ChallengeAuthenticator(getContext(), ChallengeScheme.HTTP_BASIC, "login required");

        UserVerifier verifier = new UserVerifier();
        verifier.verify(identifier, secret); // where do i get the identifier ?
        guard.setVerifier(verifier);

        guard.setNext(router);
        return guard;
    }
} 
```

还有我的用户验证器类

```
public class UserVerifier extends SecretVerifier {

    @Override
    public boolean verify(String identifier, char[] secret) {
    System.out.println(identifier);
    System.out.println(secret);
    //TODO compare with the Database
    return true;
    }

} 
```

我找不到如何获取标识符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T09:31:15.097

如果我正确理解您的问题，您的问题是如何与您的 Restlet 验证程序中的数据库进行交互，以及如何在您的 Restlet 应用程序中协同工作。

最好的方法是定义一个实现数据库交互逻辑的 DAO。像这样的东西：

```
public class SecurityDao {
    private DataSource dataSource;

    public SecurityDao() {
        // Intialize your datasource using DBCP or C3P0
        dataSource = new com.mchange.v2.c3p0.ComboPooledDataSource();
        dataSource.setDriverClass(MyDriverClass.class);
        dataSource.setJdbcUrl("jdbc:mysql://locahost/mydb");
        dataSource.setUser("username");
        dataSource.setPassword("pwd");

        // Don't forget to clean the pool when Restlet application stop
        // with ComboPooledDataSource#close method
    }

    public boolean hasUserPassword(String user, String password) {
        Connection conn = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            // Some SQL request like that
            ps = conn.prepareStatement("select * from <MYTABLE> where USER = ? and PASSWORD = ?");
            ps.setString(1, user);
            ps.setString(2, password);
            rs = ps.executeQuery();
            return rs.next();
        } catch(Exception ex) {
            (...)
        } finally {
            // close rs
            // close ps
            // close conn
        }
    }
} 
```

现在我们已经实现了 DAO，我们将从 Restlet 应用程序类实例化它并在您的验证器中设置它：

```
public class zeus extends Application {
    private SecurityDao securityDao;

    public zeus() {
        securityDao = new SecurityDao();
    }

    @Override
    public Restlet createInboundRoot() {
        (...)

        UserVerifier verifier = new UserVerifier();
        verifier.setSecurityDao(securityDao);

        (...)
        return guard;
    }
} 
```

您现在需要调整一下您的验证器，如下所述：

```
public class UserVerifier extends SecretVerifier {
    private SecurityDao securityDao;
    public void setSecurityDao(SecurityDao securityDao) {
        this.securityDao = securityDao;
    }

    public boolean verify(String identifier, char[] secret) {
        System.out.println(identifier);
        System.out.println(secret);
        return securityDao.hasUserPassword(identifier, new String(secret));
        return true;
    }
} 
```

实际上，Restlet 应用程序的 createInboundRoot 方法初始化了路由。这在应用程序启动时完成一次，即当第一个请求完成时。然后，当接收到 HTTP 请求时，Restlet 会自动调用验证器，并在该请求中提供安全提示。您不必显式调用验证器的验证方法，Restlet 框架会这样做......

希望它可以帮助你，蒂埃里

# osgi - 如何在 OSGi Felix 容器中运行 ActiveMQ？

> ID：14426882
> 
> 赞同：3
> 
> 时间：2013-01-20T16:59:44.563
> 
> 标签：osgi, activemq

您好，我想在 Apache Felix OSGi 容器中运行 ActiveMQ。我不想将它作为嵌入式代理运行，换句话说，我不想编写代码。理想的情况是在 Felix 中部署 AMQ jar 并更改配置文件以修改其行为。

看起来这对于 Apache Karaf 容器是可行的，但是如果可能的话，我既找不到关于如何在 felix 中执行此操作的文档，也找不到明确的答案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T20:04:21.457

看起来您正在寻找[Apache Service Mix](http://servicemix.apache.org/)

= Apache Karaf 与 ActiveMQ + Apache Camel + Apache CXF + 其他好东西。

但是如果你宁愿自己做，你可以坚持使用 Karaf 或 Felix，你不能直接使用 ActiveMQ 包并按照这个指令做吗？

[http://activemq.apache.org/osgi-integration.html](http://activemq.apache.org/osgi-integration.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T09:51:44.840

如果你真的想在纯 Apache Felix 中部署 ActiveMQ，那么最好的开始方法是研究 ActiveMQ 的 Karaf 特性。您需要安装那里引用的所有包和一些基本的 karaf 包。

在 ActiveMQ Karaf 功能中，代理是使用来自 Karaf 的 Spring 或 Blueprint 部署程序启动的。这将寻找 spring dm 或 blueprint 文件并启动它们。代理配置就是这样一个启动整个 ActiveMQ 的文件。

因此，通过一些努力应该是可能的，但最终您将复制 karaf 的许多功能。因此，像 Petter 建议的那样首先使用 Karaf 是更简单的方法。

# android - 如何添加带有子项的列表视图

> ID：14426884
> 
> 赞同：1
> 
> 时间：2013-01-20T16:59:56.200
> 
> 标签：android, android-listview, subitem

我想将字符串数组中的数据显示为列表视图的子项。

我到底该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:23:21.243

这是你想要达到的目标吗？

这是我使用片段的应用程序代码的一部分。一个片段是列表片段。

```
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Category List extends ListFragment {

final static String[] CATEGORIES = {"String1","String2",
    "String3","String4"};

@Override
public void onActivityCreated(Bundle savedInstanceState) {
super.onActivityCreated(savedInstanceState);
setListAdapter(new ArrayAdapter<String>(getActivity(),
        android.R.layout.simple_list_item_activated_1,
        CATEGORIES)); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:19:57.233

您需要创建一个适配器类。这是您的解决方案：首先在 MainActivity 类中创建一个私有类，如下所示：

```
private class Adapter extends BaseAdapter
{
    ArrayList<String> list;
    public Adapter(ArrayList<String> list)
    {
        this.list=list;
    }
    @Override
    public int getCount() 
    {
        return list.size();
    }
    @Override
    public String getItem(int index) 
    {
        return list.get(index);
    }
    @Override
    public long getItemId(int arg0) 
    {
        return 0;
    }
    @Override
    public View getView(int index, View view, ViewGroup arg2) 
    {
        TextView tv_text = new TextView(MainActivity.this);
        tv_text.setText(list.get(index));
        tv_text.setGravity(Gravity.CENTER_HORIZONTAL|Gravity.CENTER_VERTICAL);
        @SuppressWarnings("deprecation")
        AbsListView.LayoutParams params = 
                new AbsListView.LayoutParams(AbsListView.LayoutParams.FILL_PARENT,
                        AbsListView.LayoutParams.FILL_PARENT);
        tv_text.setLayoutParams(params);
        tv_text.setHeight(60);
        tv_text.setTextSize(18);
        return tv_text;
    }       
} 
```

那么您需要将字符串放入`ArrayList<String>`：

```
ArrayList<String> list = new ArrayList<String>();
for(int i=0;i<yourArray.length(); i++) list.add(yourArray[i]); 
```

之后，您需要创建 Adapter 类的实例：

```
Adapter adapter = new Adapter(list); 
```

那么您需要将适配器设置为您的主适配器`ListView`：

```
ListView lv_list = (ListView)findViewById(R.id.listView1);
lv.setAdapter(adapter); 
```

D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T18:08:53.130

从 Android 开发站点下载 api 演示或打开 SDK 管理器并确保您已下载`Samples`当前 SDK。

然后导航到示例文件夹并查看`expandable lists`. 那里有一些完全有效的例子。

在我的 WinXP comp 中，文件位于此处：

`C:\Program Files\Android\android-sdk\samples\android-16\ApiDemos\src\com\example\android\apis\view`然后查找`expandable lists.jar`文件

# html - ``= 0 之间的距离

> ID：14426885
> 
> 赞同：-3
> 
> 时间：2013-01-20T16:59:59.240
> 
> 标签：html, css, html-table

`<td>`我可以将一个到另一个的距离设置`<td>`为零吗？我在这里粘贴代码：

```
<table>
  <tr>
    <td style="width:212px;">
       <h3 id="skills">  <input id="skills_check" type="checkbox" name="skills" /> Appraise &#9705</h3>
    </td>
    <td>
       <h3 id="skills_opt">int</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="skill_mod" style="width:30px" />&nbsp=</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="ability_mod" style="width:30px;border-top:none;border-left:none;border-right:none;" />&nbsp+</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="ranks" style="width:30px;border-top:none;border-left:none;border-right:none;" />&nbsp+</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="misc_mod" style="width:30px;border-top:none;border-left:none;border-right:none;" /></h3>
    </td>
  </tr>
  <tr>
    <td style="width:212px;">
       <h3 id="skills"><input id="skills_check" type="checkbox" name="skills" />Appraise &#9705</h3>
    </td>
    <td>
       <h3 id="skills_opt">int</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="skill_mod" style="width:30px" />&nbsp=</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="ability_mod" style="width:30px;border-top:none;border-left:none;border-right:none;" />&nbsp+</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="ranks" style="width:30px;border-top:none;border-left:none;border-right:none;" />&nbsp+</h3>
    </td>
    <td>
       <h3 id="skills_opt"><input type="text" name="misc_mod" style="width:30px;border-top:none;border-left:none;border-right:none;" /></h3>
    </td>
  </tr>
</table> 
```

距离太远了，`<td>`应该更近一些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:11:45.360

在表格元素上设置[`border-collapse`](http://www.w3.org/wiki/CSS/Properties/border-collapse)为。`collapse`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:28:08.300

我认为您指的是带有“评估”字样的专栏。如果是这样，请删除包含宽度的样式，并且**不要忘记**关闭所有`<h3>`标签。

此外，您可以在[此处](http://jsfiddle.net/7a6wr/)找到您的代码清理了正常运行。

# android - Opencv教程和例子包括c++

> ID：14426891
> 
> 赞同：1
> 
> 时间：2013-01-20T17:00:24.967
> 
> 标签：android, eclipse, opencv, android-ndk

嗨，我正在三星 Galaxy 2 上运行 Opencv 2.4.3 的第三个教程，在 Eclipse 中按“播放”时它会立即冻结。没有 ndk 和 c 代码的简单示例可以正常工作。

我附上了Eclipse的LogCat：

```
01-20 18:33:46.464: I/OCVSample::Activity(17468): Instantiated new class org.opencv.samples.tutorial3.Sample3Native
01-20 18:33:46.464: I/OCVSample::Activity(17468): called onCreate
01-20 18:33:46.474: D/CameraBridge(17468): Attr count: 3
01-20 18:33:46.474: D/JavaCameraView(17468): Java camera view ctor
01-20 18:33:46.574: D/CameraBridge(17468): call surfaceChanged event
01-20 18:33:46.599: D/OpenCVManager/Helper(17468): Service connection created
01-20 18:33:46.599: D/OpenCVManager/Helper(17468): Trying to get library path
01-20 18:33:46.954: D/OpenCVManager/Helper(17468): Trying to get library list
01-20 18:33:47.209: D/OpenCVManager/Helper(17468): Library list: ""
01-20 18:33:47.209: D/OpenCVManager/Helper(17468): First attempt to load libs
01-20 18:33:47.209: D/OpenCVManager/Helper(17468): Trying to init OpenCV libs
01-20 18:33:47.209: D/OpenCVManager/Helper(17468): Trying to load library /data/data/org.opencv.engine/lib/libopencv_java.so
01-20 18:33:47.209: D/dalvikvm(17468): Trying to load lib /data/data/org.opencv.engine/lib/libopencv_java.so 0x4158b5d0
01-20 18:33:47.224: D/dalvikvm(17468): Added shared lib /data/data/org.opencv.engine/lib/libopencv_java.so 0x4158b5d0
01-20 18:33:47.224: D/OpenCVManager/Helper(17468): OpenCV libs init was ok!
01-20 18:33:47.224: D/OpenCVManager/Helper(17468): First attempt to load libs is OK
01-20 18:33:47.224: D/OpenCVManager/Helper(17468): Init finished with status 0
01-20 18:33:47.224: D/OpenCVManager/Helper(17468): Unbind from service
01-20 18:33:47.224: D/OpenCVManager/Helper(17468): Calling using callback
01-20 18:33:47.229: I/OCVSample::Activity(17468): OpenCV loaded successfully
01-20 18:33:47.229: D/AndroidRuntime(17468): Shutting down VM
01-20 18:33:47.229: W/dalvikvm(17468): threadid=1: thread exiting with uncaught exception (group=0x40c871f8)
01-20 18:33:47.229: E/AndroidRuntime(17468): FATAL EXCEPTION: main
01-20 18:33:47.229: E/AndroidRuntime(17468): java.lang.UnsatisfiedLinkError: Couldn't load native_sample: findLibrary returned null
01-20 18:33:47.229: E/AndroidRuntime(17468):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at java.lang.System.loadLibrary(System.java:535)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at org.opencv.samples.tutorial3.Sample3Native$1.onManagerConnected(Sample3Native.java:33)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at org.opencv.android.AsyncServiceHelper$1.onServiceConnected(AsyncServiceHelper.java:314)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1068)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1085)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at android.os.Handler.handleCallback(Handler.java:605)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at android.os.Looper.loop(Looper.java:137)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at java.lang.reflect.Method.invokeNative(Native Method)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at java.lang.reflect.Method.invoke(Method.java:511)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-20 18:33:47.229: E/AndroidRuntime(17468):    at dalvik.system.NativeStart.main(Native Method)
01-20 18:36:41.642: I/Process(17468): Sending signal. PID: 17468 SIG: 9
01-20 18:36:42.092: I/OCVSample::Activity(17774): Instantiated new class org.opencv.samples.tutorial3.Sample3Native
01-20 18:36:42.092: I/OCVSample::Activity(17774): called onCreate
01-20 18:36:42.112: D/CameraBridge(17774): Attr count: 3
01-20 18:36:42.112: D/JavaCameraView(17774): Java camera view ctor
01-20 18:36:42.132: D/OpenCVManager/Helper(17774): Service connection created
01-20 18:36:42.132: D/OpenCVManager/Helper(17774): Trying to get library path
01-20 18:36:42.377: D/OpenCVManager/Helper(17774): Trying to get library list
01-20 18:36:42.612: D/OpenCVManager/Helper(17774): Library list: ""
01-20 18:36:42.612: D/OpenCVManager/Helper(17774): First attempt to load libs
01-20 18:36:42.612: D/OpenCVManager/Helper(17774): Trying to init OpenCV libs
01-20 18:36:42.612: D/OpenCVManager/Helper(17774): Trying to load library /data/data/org.opencv.engine/lib/libopencv_java.so
01-20 18:36:42.612: D/dalvikvm(17774): Trying to load lib /data/data/org.opencv.engine/lib/libopencv_java.so 0x4158d068
01-20 18:36:42.637: D/dalvikvm(17774): Added shared lib /data/data/org.opencv.engine/lib/libopencv_java.so 0x4158d068
01-20 18:36:42.637: D/OpenCVManager/Helper(17774): OpenCV libs init was ok!
01-20 18:36:42.637: D/OpenCVManager/Helper(17774): First attempt to load libs is OK
01-20 18:36:42.637: D/OpenCVManager/Helper(17774): Init finished with status 0
01-20 18:36:42.637: D/OpenCVManager/Helper(17774): Unbind from service
01-20 18:36:42.637: D/OpenCVManager/Helper(17774): Calling using callback
01-20 18:36:42.637: I/OCVSample::Activity(17774): OpenCV loaded successfully
01-20 18:36:42.637: D/AndroidRuntime(17774): Shutting down VM
01-20 18:36:42.637: W/dalvikvm(17774): threadid=1: thread exiting with uncaught exception (group=0x40c871f8)
01-20 18:36:42.642: E/AndroidRuntime(17774): FATAL EXCEPTION: main
01-20 18:36:42.642: E/AndroidRuntime(17774): java.lang.UnsatisfiedLinkError: Couldn't load native_sample: findLibrary returned null
01-20 18:36:42.642: E/AndroidRuntime(17774):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at java.lang.System.loadLibrary(System.java:535)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at org.opencv.samples.tutorial3.Sample3Native$1.onManagerConnected(Sample3Native.java:33)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at org.opencv.android.AsyncServiceHelper$1.onServiceConnected(AsyncServiceHelper.java:314)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1068)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1085)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at android.os.Handler.handleCallback(Handler.java:605)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at android.os.Looper.loop(Looper.java:137)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at java.lang.reflect.Method.invokeNative(Native Method)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at java.lang.reflect.Method.invoke(Method.java:511)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-20 18:36:42.642: E/AndroidRuntime(17774):    at dalvik.system.NativeStart.main(Native Method)
01-20 18:37:08.612: I/Process(17774): Sending signal. PID: 17774 SIG: 9
01-20 18:37:20.797: I/OCVSample::Activity(18138): Instantiated new class org.opencv.samples.tutorial3.Sample3Native
01-20 18:37:20.802: I/OCVSample::Activity(18138): called onCreate
01-20 18:37:20.812: D/CameraBridge(18138): Attr count: 3
01-20 18:37:20.812: D/JavaCameraView(18138): Java camera view ctor
01-20 18:37:20.827: D/OpenCVManager/Helper(18138): Service connection created
01-20 18:37:20.832: D/OpenCVManager/Helper(18138): Trying to get library path
01-20 18:37:21.057: D/OpenCVManager/Helper(18138): Trying to get library list
01-20 18:37:21.327: D/OpenCVManager/Helper(18138): Library list: ""
01-20 18:37:21.327: D/OpenCVManager/Helper(18138): First attempt to load libs
01-20 18:37:21.327: D/OpenCVManager/Helper(18138): Trying to init OpenCV libs
01-20 18:37:21.327: D/OpenCVManager/Helper(18138): Trying to load library /data/data/org.opencv.engine/lib/libopencv_java.so
01-20 18:37:21.327: D/dalvikvm(18138): Trying to load lib /data/data/org.opencv.engine/lib/libopencv_java.so 0x4158e028
01-20 18:37:21.342: D/dalvikvm(18138): Added shared lib /data/data/org.opencv.engine/lib/libopencv_java.so 0x4158e028
01-20 18:37:21.342: D/OpenCVManager/Helper(18138): OpenCV libs init was ok!
01-20 18:37:21.342: D/OpenCVManager/Helper(18138): First attempt to load libs is OK
01-20 18:37:21.342: D/OpenCVManager/Helper(18138): Init finished with status 0
01-20 18:37:21.342: D/OpenCVManager/Helper(18138): Unbind from service
01-20 18:37:21.342: D/OpenCVManager/Helper(18138): Calling using callback
01-20 18:37:21.342: I/OCVSample::Activity(18138): OpenCV loaded successfully
01-20 18:37:21.342: D/AndroidRuntime(18138): Shutting down VM
01-20 18:37:21.342: W/dalvikvm(18138): threadid=1: thread exiting with uncaught exception (group=0x40c871f8)
01-20 18:37:21.347: E/AndroidRuntime(18138): FATAL EXCEPTION: main
01-20 18:37:21.347: E/AndroidRuntime(18138): java.lang.UnsatisfiedLinkError: Couldn't load native_sample: findLibrary returned null
01-20 18:37:21.347: E/AndroidRuntime(18138):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at java.lang.System.loadLibrary(System.java:535)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at org.opencv.samples.tutorial3.Sample3Native$1.onManagerConnected(Sample3Native.java:33)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at org.opencv.android.AsyncServiceHelper$1.onServiceConnected(AsyncServiceHelper.java:314)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at android.app.LoadedApk$ServiceDispatcher.doConnected(LoadedApk.java:1068)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at android.app.LoadedApk$ServiceDispatcher$RunConnection.run(LoadedApk.java:1085)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at android.os.Handler.handleCallback(Handler.java:605)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at android.os.Looper.loop(Looper.java:137)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at android.app.ActivityThread.main(ActivityThread.java:4511)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at java.lang.reflect.Method.invokeNative(Native Method)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at java.lang.reflect.Method.invoke(Method.java:511)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
01-20 18:37:21.347: E/AndroidRuntime(18138):    at dalvik.system.NativeStart.main(Native Method) 
```

# soapui - 返回 HTTP 错误代码时使soapUI 测试用例失败

> ID：14426895
> 
> 赞同：3
> 
> 时间：2013-01-20T17:00:40.347
> 
> 标签：soapui

我正在使用soapUI 4.5.1，并希望像这样设置一个测试用例（使用项目中已经存在的REST请求）：

*   向服务器认证，接收cookie
*   请求另一个仅在经过身份验证时可用的资源

我遇到的问题是，即使服务器返回 HTTP 400，请求仍然显示为 [FINISHED]。在测试用例选项中，我发现启用了“错误失败”设置。当 HTTP 返回码不是 200-ish 时，有什么方法会失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T17:23:28.763

向请求添加一个“有效的 HTTP 状态代码”断言，它需要一个 HTTP 响应代码列表，这些代码被认为是有效的，否则就断言。

还有一个“无效的 HTTP 状态代码”断言，它断言响应是否在列表中。

[SOAPUI 断言入门](http://www.soapui.org/Functional-Testing/getting-started-with-assertions.html)

# java - JButton 仅在鼠标悬停时出现？

> ID：14426896
> 
> 赞同：3
> 
> 时间：2013-01-20T17:00:50.123
> 
> 标签：java, swing, jbutton, paint

[这](http://pastebin.com/pqc2r8dz)是我的代码：我取出了一些我认为没有必要的东西。我可能也拿出了一些括号，但我只是想展示我拥有的内容。

发生的情况是，当我运行程序时，背景图像会绘制（它是资源中的 PNG），并且只出现一个按钮（我的 PLAY 按钮），这是第一个按钮 - 它是自动选择的。

我实际上有四个按钮，但我的代码中只包含了 PLAY 和 INSTRUCTIONS。除非我将鼠标悬停在它们上面，否则其他三个不会出现。我知道paint方法可能有点奇怪，但我不知道如何解决它。

如果我选择一个不同的按钮并最小化窗口然后再次打开它，则该选定的按钮是唯一出现的按钮。我必须将鼠标悬停在其他按钮上才能出现。

我也添加`super.paint()`了绘画方法，我得到了所有按钮，但背景是灰色的。我认为问题在于`super.paint()`绘制了我所有的按钮，并且`g.drawImage(bg, 0, 0, null)`只绘制了我的背景，如果不绘制另一个，我就无法做到这一点。

对不起，如果这是一团糟。我是 Java 新手，我很难清楚地表达我想说的话。

```
public class MainMenu extends JFrame {

    private JPanel contentPane;

    /**
     * Launch the application.
     */

    //variables
    public static Image bg;

    public static void main(String[] args) {

        MainMenu mainFrame = new MainMenu();
        mainFrame.setSize(FRAME_WIDTH, FRAME_HEIGHT);
        mainFrame.setResizable(false);
        mainFrame.setLocationRelativeTo(null);
        mainFrame.setTitle ("Zumby");
        mainFrame.setLayout(null);

        // Loads the background image and stores in bg object.
        try {
            bg = ImageIO.read(new File("zumby.png"));
        } catch (IOException e) {
        }
        mainFrame.setVisible(true);
    }

    /**
     * Overrides the paint method.
     * MONDAY
     */
     public void paint(Graphics g)
     {
        // Draws the img to the BackgroundPanel.
        System.out.println("paint");
        g.drawImage(bg, 0, 0, null);
     }

    /**
     */
    public MainMenu() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 800, 500);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        contentPane.setOpaque(false);
        setContentPane(contentPane);
        contentPane.setLayout(null);

        //create buttons
        JButton btnPlay = new JButton("PLAY");
        btnPlay.setBackground(Color.BLACK);
        btnPlay.setForeground(Color.WHITE);
        btnPlay.setFont(font);
        btnPlay.setBorder(border);
        btnPlay.setFocusPainted(false);

        //if "Play" is clicked

        btnPlay.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent click) {
                setVisible(false);
                new GamePlay(); //opens up GamePlay window
            }
        });
        btnPlay.setBounds(600, 64, 141, 61);
        contentPane.add(btnPlay);

        JButton btnInstructions = new JButton("INSTRUCTIONS");

        btnInstructions.setBounds(600, 160, 141, 61);
        btnInstructions.setBackground(Color.BLACK);
        btnInstructions.setFocusPainted(false);
       // btnInstructions.setEnabled(true);

        contentPane.add(btnInstructions);
        repaint();
        pack(); 
        setVisible(true);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T01:29:55.663

Swing 使用“分层”概念进行绘画......

`paint`调用`paintComponent`,`paintBorder`和`paintChildren`. 通过覆盖`paint`和调用失败`super.paint`，您阻止了组件绘制它的各个层。

在 Swing 中，最好使用`paintComponent`提供自定义绘制，它允许您在可能添加到组件的任何其他组件下方绘制。

![在此处输入图像描述](../Images/caa5731d0eec8f89d762b1f5006b93a7.png)

```
public class TestPaint01 {

  public static void main(String[] args) {
    new TestPaint01();
  }

  public TestPaint01() {
    EventQueue.invokeLater(new Runnable() {
      @Override
      public void run() {
        try {
          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception ex) {
        }

        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new TestPane());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

      }
    });
  }

  public class TestPane extends JPanel {

    private Image backgroundImage;

    public TestPane() {
      try {
        BufferedImage background = ImageIO.read(new File("/path/to/image.jpg"));
        //backgroundImage = background.getScaledInstance(-1, background.getHeight() / 4, Image.SCALE_SMOOTH);
        backgroundImage = background;
      } catch (IOException ex) {
        ex.printStackTrace();
      }
      setLayout(new GridBagLayout());
      add(new JButton("Hello"));
    }

    @Override
    public Dimension getPreferredSize() {
      return backgroundImage == null ? super.getPreferredSize() : new Dimension(backgroundImage.getWidth(this), backgroundImage.getHeight(this));
    }

    @Override
    protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      int x = (getWidth() - backgroundImage.getWidth(this)) / 2;
      int y = (getHeight() - backgroundImage.getHeight(this)) / 2;
      g.drawImage(backgroundImage, x, y, this);
    }

  }

} 
```

您可能会发现[A Closer look at the Paint Mechanism](http://docs.oracle.com/javase/tutorial/uiswing/painting/closer.html) and [Painting in AWT 和 Swing](http://www.oracle.com/technetwork/java/painting-140037.html)提供了丰富的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:08:11.013

我认为这是因为您正在覆盖绘画方法。最好覆盖重绘，然后调用 super.repaint(); 像这样：

```
public void repaint(Graphics g)
        {
             super.repaint(g);
         // Draws the img to the BackgroundPanel.
             System.out.println("paint");
           g.drawImage(bg, 0, 0, null);
        } 
```

然后组件也被重绘。

但是，如果您只想将图像显示为背景，请参见[此处。](https://stackoverflow.com/questions/1064977/setting-background-images-in-jframe "这里")

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T17:26:01.220

您正在压倒一切`paint()`，但不要调用`super.paint()`. 所以JFrame的`paint()`方法实现完成的组件的正常绘制不会被执行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-20T18:03:05.887

由于您使用的是 Swing 和`JFrame`用于覆盖的绘画机制`paintComponent`，`paint`因此通常与 applet 或 AWT 一起使用。

# mysql - 带有“AND”的简单 mysql 查询不起作用，但每一边或变体都可以

> ID：14426900
> 
> 赞同：-2
> 
> 时间：2013-01-20T17:01:20.767
> 
> 标签：mysql

这个看似非常简单的 mysql 查询很难处理：

这不起作用（有效，但不返回任何行）：

```
select * from events where type = 'Disposition' AND startDT > '2012-01-01' 
```

以下所有查询都使用相同的数据：

```
select * from events where type = 'Eval' AND startDT > '2012-01-01'    
-- (change the value to Eval it works!)

select * from events where type = 'Disposition' AND addedDT > '2012-01-01' 
-- (search a different date field it works!)

select * from events where type = 'Disposition'  
-- (get rid of the AND it works!)

select * from events where startDT > '2012-01-01'   
-- (again, no AND it works!) 
```

我尝试了错误查询的变体，但也不起作用：

```
select * from events where `type` = 'Disposition' AND `startDT` > '2012-01-01'
select * from events where `type` = 'Disposition' AND `startDT` > '2012-01-01 00:00:00'
select events.* from events where `type` = 'Disposition' 
    AND `startDT` > '2012-01-01 00:00:00' 
```

（还尝试了日期的变化，小写处置）

我在这些字段上没有索引，所以我在 startDT 上添加了一个索引，然后 type+startDT（addDT 有一个）。没有不同。

startDT 和 addedDT 是 DATETIME 字段。类型是 varchar 30

有任何想法吗？

-- 如果这有帮助，这里是解释输出：

坏的一个：

```
explain select * FROM `events` WHERE `startDT` > '2012-01-11 00:00:01' AND `type` = "Disposition" limit 1000
"id"    "select_type"   "table" "type"  "possible_keys" "key"   "key_len"   "ref"   "rows"  "Extra"
"1" "SIMPLE"    "events"    "range" "startDT,type"  "type"  "40"    NULL    "1" "Using where" 
```

右边：

```
explain select * FROM `events` WHERE `type` = "Disposition" limit 1000
"id"    "select_type"   "table" "type"  "possible_keys" "key"   "key_len"   "ref"   "rows"  "Extra"
"1" "SIMPLE"    "events"    "ref"   "type"  "type"  "32"    "const" "13760" "Using where" 
```

左边：

```
explain select * FROM `events` WHERE `startDT` > '2012-01-11 00:00:01' limit 1000
"id"    "select_type"   "table" "type"  "possible_keys" "key"   "key_len"   "ref"   "rows"  "Extra"
"1" "SIMPLE"    "events"    "range" "startDT"   "startDT"   "8" NULL    "13760" "Using where" 
```

架构：

```
CREATE TABLE `events` (
    `id` VARCHAR(80) NOT NULL,
    `pk` INT(11) NOT NULL AUTO_INCREMENT,
    `addedDT` DATETIME NOT NULL,
    `type` VARCHAR(30) NOT NULL,
    `startDT` DATETIME NOT NULL,
    PRIMARY KEY (`pk`),
    INDEX `addedDT` (`addedDT`),
    INDEX `startDT` (`startDT`),
    INDEX `type` (`type`, `startDT`)
)
COLLATE='latin1_swedish_ci'
ENGINE=InnoDB
AUTO_INCREMENT=29407; 
```

示例行：

```
INSERT INTO `events` (`id`, `pk`, `addedDT`, `type`, `startDT`) VALUES ('FBF8CE96-AE86-36C6-3C27-E2AAD042476B', 29406, '2012-12-28 12:59:03', 'Disposition', '2012-12-28 12:59:00');
INSERT INTO `events` (`id`, `pk`, `addedDT`, `type`, `startDT`) VALUES ('12577DB6-9B22-FA73-89BD-E2A5C1764B6D', 29405, '2012-12-28 12:53:32', 'Disposition', '2012-12-28 12:53:00'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:11:14.590

列`startDT`是表中的日期类型，请尝试将日期比较为-

```
select * from events where `type` = 'Disposition' AND `startDT` > DATE('2012-01-01'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:28:10.153

在 where 子句中添加日期

```
WHERE `startDT` >  DATE('2012-01-01') 
```

或者

```
WHERE DATE(`startDT`) >  ('2012-01-01') 
```

[http://www.sqlfiddle.com/#!2/4c879/7](http://www.sqlfiddle.com/#!2/4c879/7)

可以在此处找到类似的帖子[如何从日期时间列中选择日期？](https://stackoverflow.com/questions/1754411/how-to-select-date-from-datetime-column)

# php - php 中的 URL 表示

> ID：14426903
> 
> 赞同：-1
> 
> 时间：2013-01-20T17:01:37.107
> 
> 标签：php, url

我习惯于像这样表示嵌入的 url 信息：

```
http://test.com/reports/statement.php?company=ABC&q=1 
```

我该怎么做呢？

```
http://test.com/reports/ABC/Q1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:04:34.527

你需要使用`Apache mod_rewrite`来实现这一点。

如果您的服务器启用了它，您可以在以下位置执行以下操作`.htaccess`：

```
RewriteEngine on
RewriteRule ^([^/\.]+)/([^/\.]+)/?$ /statement.php?company=$1&q=$2 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:09:01.457

您可以使用 $_SERVER['PATH_INFO'] 访问 URL docpath中脚本地址*之后的任何内容。*

例如

[http://test.com/reports/statement.php/ABC/Q1](http://test.com/reports/statement.php/ABC/Q1)

...然后在 statement.php 中，您将在 $_SERVER['PATH_INFO'] 中拥有字符串“/ABC/Q1”

当然，您需要设置您的网络服务器以匹配 URL 并根据 HTTP 请求定位正确的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:33:39.050

正如其他人所说，您必须使用 url 重写。

通常是一个使用它的 php 应用程序，它应用称为**Front Controller**的模式。

这意味着几乎每个 url 都被重写为指向一个文件，其中 $_SERVER['PATH_INFO'] 用于决定要做什么，通常通过匹配您为操作定义的模式，或者返回 404 错误，如果url 不匹配任何指定的模式。

这称为**路由**，每个现代 php 框架都有一个组件来帮助完成这项工作。

一个聪明的举措也是提供一个工具来为你的资源生成 url 而不是手写它们，这样如果你改变一个 url 模式，你就不必在任何地方重写它。

如果您需要复杂的路由系统，请查看一些主要框架的路由组件，例如 Symfony2、Zend Framework 2、Auraphp。

对于那里最简单的 php 路由器，请改为[GluePHP](http://gluephp.com/)。代码库很小，因此您可以自己了解这些东西的工作原理，甚至可以根据需要实现一个适合您需求的小型路由器。

# localhost - Tornado 的本地主机

> ID：14426905
> 
> 赞同：0
> 
> 时间：2013-01-20T17:01:52.643
> 
> 标签：localhost, tornado

我正在尝试学习 python cgi web 编程，但我无法处理所有的 apache 配置，我开始使用 tornado web 服务器。- 我的问题是在哪里放置我的 .py 文件以在浏览器上运行。我的意思是龙卷风的 localhost[192.168.0.10] 是什么。我的操作系统是 Macosx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:49:26.680

你不需要阿帕奇。您可以运行该应用程序：

```
python myapp.py 
```

然后在网络浏览器中连接到它：

```
http://localhost:8888 
```

其中 8888 是您调用的端口`application.listen`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:59:49.483

我建议将文件放在您的 /Users//Sites/ 中为您的项目创建一个文件夹并创建一个以`__main__.py`tornado 应用程序命名的文件。

您需要在终端中执行脚本。

```
cd ~/Sites/your_tornado_project
Python 。/

```

您的`__main__.py`文件将被调用并且龙卷风进程将运行。

* * *

假设您已正确配置 apache。要从浏览器运行，您需要执行以下操作

1）更新您的虚拟主机。

`sudo nano /etc/apache2/extra/httpd-vhosts.conf`

```
#
# 你的虚拟主机文件
#

<虚拟主机 *:80>
    DocumentRoot "/Users/you/Sites/your_project_dir"
    服务器名称 mysite.com
    ProxyPass / http://localhost:4000/ retry=0
    ProxyPassReverse / http://localhost:4000/ retry=0
    错误日志“/Users/you/Sites/your_project_dir/apache-error-log.log”

        选项索引 FollowSymLinks
        允许覆盖所有
        命令允许，拒绝
        允许所有人
    </目录>
</虚拟主机>

```

用您的龙卷风应用程序替换适当的信息。

2) 编辑`sudo nano /etc/hosts`和添加`127.0.0.1 mysite.com`

3)`sudo apachectl restart`

`mysite.com`4)在浏览器中打开。多田！

# asp.net - Chrome 渲染 asp.net 块

> ID：14426914
> 
> 赞同：0
> 
> 时间：2013-01-20T17:02:38.597
> 
> 标签：asp.net, css, google-chrome, html, updatepanel

我在 asp.net 中有一个页面在 Chrome 中无法正确呈现：当某个块变小（由于页面上网格元素的数量）时，背景不会完全刷新，它会留下一部分之前的渲染，直到更改选项卡浏览器并返回。当通过变得可见然后隐藏的块时也会发生同样的事情。有没有办法强制重新渲染背景（我使用的是 UpdatePanel 和 Chrome v 24.0.1）？或者有没有人看到这种行为并设法解决这个问题（可能是一些 z-index css 问题）？请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:56:14.633

在研究了一段时间的asp代码、网格属性、css、chrome bugs上的foums之后，似乎网格下div的css属性修改成功了，我不得不改变溢出：可见溢出: 隐藏。

# c# - ASP MVC4 中的 MVC Scaffold 在访问页面时抛出错误（打开数据读取器和多个连接）

> ID：14426917
> 
> 赞同：0
> 
> 时间：2013-01-20T17:02:59.670
> 
> 标签：c#, mysql, entity-framework, entity-framework-4, asp.net-mvc-4

我已经生成了一个实体（城市），现在我尝试根据本教程使用 MVC Scaffold 生成脚手架：http: [//www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-使用-MVC4-和](http://www.codeproject.com/Articles/468777/Code-First-with-Entity-Framework-5-using-MVC4-and)

我遇到的问题是我在 MySQL 服务器上执行此操作，我收到以下错误：

> 已经有一个打开的 DataReader 与此 Connection 关联，必须先关闭它。

我环顾四周，注意到有些人必须在他们的连接字符串中启用 MARS（多个活动结果集），但显然 MySQL 没有这样的参数。我也试过 AllowBatch=True 但这也没有用。这是我的连接字符串：

```
<add name="socialgeogroep6Entities" connectionString="metadata=res://*/Models.Model1.csdl|res://*/Models.Model1.ssdl|res://*/Models.Model1.msl;provider=MySql.Data.MySqlClient;provider connection string=&quot;server=localhost;AllowBatch=True;user id=socialgeogroep6;password=snow;database=socialgeogroep6&quot;" providerName="System.Data.EntityClient" /> 
```

以前有没有人遇到过这个问题，如果有，您是如何解决的？我真的很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T01:15:29.087

由于启用了延迟加载，我遇到了这个问题。您没有发布存储库代码，但我想知道这个查询是否导致了问题：

```
public ViewResult Index()
{
    return View(cityRepository.AllIncluding(city => city.users, city => city.districts));
} 
```

我使用该`Include()`语句执行预先加载以在一个查询中获取一个或两个子实体。如果我们说`All()`在 repo 中调用了一个返回 an的函数`IQueryable`，则可以执行以下操作：

```
 // ...
    var allCities = cityRepository.All().Include("users").Include("districts").ToList();
    return View(allCities);
} 
```

这将创建一个查询，该查询会同时选择所有内容`cities`以及填充的`users`导航`districts`属性。一旦在消费代码中访问属性，将执行查询并返回 an 而不是 an ，后者将通过延迟加载进行`ToList()`枚举`IEnumerable`。`IQueryable`

如果它是导致此问题的不同存储库功能，则以`Include()`类似的方式对其进行处理应该很简单。

# r - 每项频率 - R TM DocumentTermMatrix

> ID：14426925
> 
> 赞同：4
> 
> 时间：2013-01-20T17:03:38.313
> 
> 标签：r, tm, term-document-matrix

我对 R 很陌生，不能完全理解 DocumentTermMatrixs。我有一个使用 TM 包创建的 DocumentTermMatrix，其中包含术语频率和术语，但我不知道如何访问它们。

理想情况下，我想：

```
 Term  # 
    "the" 200 
    "is"  400 
    "a"   200 
```

目前我的代码是：

```
 library(tm)
    common.words <- c("amp","@RT","I","http","https", stopwords("english"), "you")
    x <- Corpus(VectorSource(results)) 
    x <- tm_map(x, stripWhitespace) 
    x <- tm_map(x, removeNumbers) 
    x <- tm_map(x, removePunctuation) 
    x <- tm_map(x, stripWhitespace)

    dtm <- DocumentTermMatrix(x)
    for(i in 1:length(common.words)) {
    dtm <- dtm[,!colnames(dtm)%in%c(common.words[i])]
    } 
```

这是 str(dtm) 的输出

```
 List of 6
   $ i       : int [1:9769] 1 1 1 1 1 1 1 1 2 2 ...
   $ j       : int [1:9769] 1596 1684 1858 2112 2175 2490 2714 2814 873 961 ...
   $ v       : num [1:9769] 1 1 2 1 1 2 1 1 1 1 ...
   $ nrow    : int 1477
   $ ncol    : int 3201
   $ dimnames:List of 2
   ..$ Docs : chr [1:1477] "1" "2" "3" "4" ...
   ..$ Terms: chr [1:3201] "\u0093\u0085a" "aardvark" "aaron" "abbie" ...
    - attr(*, "class")= chr [1:2] "DocumentTermMatrix" "simple_triplet_matrix"
    - attr(*, "Weighting")= chr [1:2] "term frequency" "tf" 
```

谢谢，

-一个

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T18:21:38.280

它似乎是数据的稀疏矩阵组织。频率似乎在“v”列表中，您可以通过在术语属性中查找术语的位置来获得该频率。为什么不提供`dput(head(results, 30))`这样您的代码（以及您的 SO 受众）将有一些工作要做？在查看了包中的示例之后，我怀疑您实际上想要以下内容：

```
tdm <- TermDocumentMatrix(x)
z <- inspect( tdm[ c("the", "is", "a"), dimnames(tdm)$Docs] )
rowSums(z) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-22T16:46:50.880

我遇到了同样的问题，发现了我认为更简单的方法：

```
num <- 10 # Show this many top frequent terms

tdm[findFreqTerms(tdm)[1:num],] %>%
      as.matrix() %>%
      rowSums() 
```

在列中打印比较棘手（我相信有人有比这更好的方法）：

```
terms <- findFreqTerms(tdm)[1:num]
tdm[terms,] %>%
      as.matrix() %>%
      rowSums()  %>% 
      data.frame(Term = terms, Frequency = .) %>%  
      arrange(desc(Frequency)) 
```

# java - 鼠标移动太快无法检查碰撞

> ID：14426926
> 
> 赞同：1
> 
> 时间：2013-01-20T17:03:38.127
> 
> 标签：java, performance, mouse, drag, collision

我在玩滑块游戏时遇到问题，因为当我尝试快速撞击两个方块时，碰撞代码会混乱。如果鼠标速度较慢，它可以工作。有没有办法对鼠标速度设置最大上限或更改我的代码以使其不会发生？

```
 //when the mouse is dragged and component selected is not null, continue
    if (componentName != null) {
        //get the current mouse x and y assuming that it was clicked from the middle of the component
        mouseX = e.getX() - carImage[Integer.parseInt(componentName)].getWidth() / 2;
        mouseY = e.getY() - carImage[Integer.parseInt(componentName)].getHeight() / 2;
        //get the direction of the selected component
        direction = group.get(mapsIndex)[Integer.parseInt(componentName)].updown(Integer.toString(Integer.parseInt(componentName)));
        //if the direction is horizontal, make sure that the object is not dragged off the screen (right and left)
        if (direction == true) {
            if (mouseX < 50) {
                mouseX = 50;
            } else if (mouseX > 50 * 7 - carImage[Integer.parseInt(componentName)].getWidth()) {
                mouseX = 50 * 7 - carImage[Integer.parseInt(componentName)].getWidth();
            }
            //get the location of the mouse for the y axis
            mouseY = carImage[Integer.parseInt(componentName)].getY();
            //if the direction is vertical, make sure that the object is not dragged off the top and bottom of the screen
        } else {
            if (mouseY < 50) {
                mouseY = 50;
            } else if (mouseY > 50 * 7 - carImage[Integer.parseInt(componentName)].getHeight()) {
                mouseY = 50 * 7 - carImage[Integer.parseInt(componentName)].getHeight();
            }
            //get the location of the mouse for the x axis
            mouseX = carImage[Integer.parseInt(componentName)].getX();
        }
        //find the area that the selected object occupies
        Rectangle or = carImage[Integer.parseInt(componentName)].getBounds();
        //go through all other components
        for (int x = 0; x < max; x++) {
            //as long as the comparison is not made with itself or a nonexistant object, continue
            if (x != Integer.parseInt(componentName) && carImage[x] != null) {
                //get the area that the compared object occupies
                Rectangle collide = carImage[x].getBounds();
                //if the two areas intersect, make the selected car go back to where it was
                if (or.intersects(collide)) {
                    mouseX = carImage[Integer.parseInt(componentName)].getX();
                    mouseY = carImage[Integer.parseInt(componentName)].getY();
                }
            }
        }

        //update the component's location to where the mouse is
        carImage[Integer.parseInt(componentName)].setLocation(mouseX, mouseY);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:07:54.427

我不会走你试图限制鼠标速度的道路——用户有个人偏好。

您可以做的是将用户交互与系统行为分开以提高可靠性。保持并更新当前位置并以指定的时间间隔在后台线程中计算碰撞 - 如果发生碰撞，则将用户移回。您应该能够以比用户注意到的更短的时间间隔运行它。并且您可以通过利用更多内核来提高性能，即 Java 7 ForkJoin 池是一个简单的解决方案。

# javascript - 无法在本机 javascript 中获取类或标记元素

> ID：14426930
> 
> 赞同：0
> 
> 时间：2013-01-20T17:03:57.113
> 
> 标签：javascript, onload, getelementsbytagname, getelementsbyclassname

我试图在文档加载后隐藏一些元素。我设法做到这一点，但在使用or`getElementById`时无法做到这一点。`getElementsByClassName``getElementsByTagName`

我已经阅读了很多问题和答案，但找不到解决方案。[这是小提琴样本。](http://codepen.io/anon/pen/owCma)

javascript:

```
function myFunction() {
  document.getElementById("b").style.display="none";
  document.getElementsByTagName('p').style.display="none";
  document.getElementsByClassName("a").style.display="none";
}
onload = myFunction; 
```

html:

```
<p>Tag Ele Test</p>
<p class="a">Class Test</p>
<p id="b">ID Test</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:05:34.770

`getElementsByTagName()`and的问题`getElementsByClassName()`在于两者都返回一组您需要迭代的元素，而`getElementById()`返回单个元素。

```
var elements = document.getElementsByTagName("p");
for (var i = 0; i < elements.length; i++) {
    elements[i].style.display = "none";
} 
```

**参考：**

1.  [https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)
2.  [https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:06:25.207

getElement **s** ( [`byTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName), [`byClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)) 确实返回 a [`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，您需要对其进行迭代。它没有单一的`style`声明属性。

```
var element = document.getElementById("b");
if (element != null)
    element.style.display = "none";
var elements = document.getElementsByTagName('p');
for (var i=0; i<elements.length; i++)
    elements[i].style.display = "none";
elements = document.getElementsByClassName("a");
for (var i=0; i<elements.length; i++)
    elements[i].style.display = "none"; 
```

# android - 如何向edittext添加提示

> ID：14426932
> 
> 赞同：2
> 
> 时间：2013-01-20T17:04:01.063
> 
> 标签：android

我有两个edittext输入框。第一个是用户名，第二个是密码。我想在输入框上添加提示。我用 settex() 方法写了提示。另外，我写过

```
 in onclick(view v) 

           caseR.id.editText_1:
                 text1.setText("");  
                  break;

      in oncreate 

            text1 = findViewById(R.id.editText_1);
            text1.setText("username"); 
```

每当我单击输入框时，提示都会消失。但是，提示并没有消失。现在，我做错了吗？或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:05:39.923

采用

```
text1.setHint("MyHintString"); 
```

反而。[`setHint()`](http://developer.android.com/reference/android/widget/TextView.html#setHint%28java.lang.CharSequence%29)提供当用户键入内容时消失的提示。您还可以使用 String 资源 ID 或基于 xml 的方法，但在您的情况下，使用 String 方法就足够了。

仅`setText()`当您要将文本放入用户可以修改的 EditText 时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:06:25.447

你可以用它`editTextExample.setHint("example")`来实现你想要的。

或者，在 XML 中，将其添加到您的 EditText：`android:hint="example"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:07:11.333

正确的方法是使用包含提示字符串[`setHint(int resource)`](http://developer.android.com/reference/android/widget/TextView.html#setHint%28int%29)的[字符串资源。](http://developer.android.com/guide/topics/resources/string-resource.html)

所以你`onCreate`应该有：`text1.setHint(R.String.yourhint);`

你的 res->values->strings.xml 文件应该包含

```
<string name="yourhint">This Hint Will Disappear</string> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T17:07:26.597

用于**`setHint(String hint)`**在 EditText 中指定提示。

```
text1.setHint("This is the hint..."); 
```

或者，在您的 XML 布局文件中，您可以使用**`android:hint="This is the Hint"`**相应 EditText 的属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T02:34:22.197

如果你想在活动的 xml 文件中设置它，你也可以这样做。

在你的 xml 文件中`android:hint="@string/yourhint"`

你的 res->values->strings.xml 文件应该包含

```
<string name="yourhint">This Hint Will Disappear</string> 
```

# uml - 为后端应用程序开发活动图

> ID：14426937
> 
> 赞同：0
> 
> 时间：2013-01-20T17:04:44.337
> 
> 标签：uml, activity-diagram

我正在开发一个基于 Web 的后端应用程序。在这个后端，我可以查看、添加、编辑和删除信息。有一个表格和一个位于表格下方的表格。首先，应用程序将信息加载到表中。当我选择编辑一行时，我单击该行中的“编辑”链接，信息将被加载到表单中。然后我可以更改信息并保存。

在我的“编辑”活动图中，我应该从用户单击“编辑”链接开始还是从将信息加载到表格开始？

我有点困惑，因为这个加载信息步骤已经包含在“查看”活动图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T04:09:05.773

好吧，我认为这取决于。如果你在分区中绘制所有角色，那么你可以只使用一次“加载操作”并显示从这个到其他活动的转换，比如如果你为查看创建分区，编辑和删除链接，那么你可以显示加载表只显示一次，然后在编辑链接分区中直接显示从它到“编辑行”活动的转换，其他活动也是如此。不用说你必须相应地使用分支。你可以发布你创建的粗略图表可以进行改进。

# php - 为什么 rand() 生成的数字很小？

> ID：14426941
> 
> 赞同：2
> 
> 时间：2013-01-20T17:05:21.390
> 
> 标签：php

这是我的代码

```
<?php

function random_id() {
    $chars = 'abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $id = '';
    for ($i = 0; $i < 5; ++$i)
    {
        $id .= $chars[rand(1, 26)];
    }
    echo $id;
}

random_id();

?> 
```

它不断生成带有 5 个小写数字的 ID，并且非常偶尔会在其中包含一个数字。我也尝试过`mt_rand()`，并且还在循环之前的脚本开头使用`srand(time())`and 。`srand(microtime())`

另外，应该是`rand(1, 26)`还是`rand(0, 25)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T17:09:05.460

您的字符串长度超过 26 个字符。请改用此 rand 函数：

```
rand(0, strlen($chars) - 1) 
```

因此，您不必在每次迭代时计算字符串长度，但仍保持动态，值得考虑将计算移到循环之外，如下所示：

```
$chars = 'abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ';
$chars_cnt = strlen($chars) - 1;
for ($i = 0; $i < 5; ++$i)
{
    $id .= $chars[rand(1, $chars_cnt)];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T17:09:13.770

您没有生成足够高的随机数来获取整个数组。

小写字符：0-25

号码：26-35

大写汽车：36-61

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-20T17:11:54.427

`0` is the start point and `strlen($chars)` is the count of character in the `$str` string.

You should change your code to this:

```
 for ($i = 0; $i < 5; ++$i)
    {
        $id .= $chars[rand(0, strlen($chars)-1)];
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-20T17:09:42.387

I think you need to remember to use a bigger number than 26, as that is the number of letters in the alphabet, you might want to use 26+26+10= 62:

```
$id .= $chars[rand(0, 61)]; 
```

CHEERS!

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-20T17:10:46.660

Arrays in PHP are zero indexed, so yes the first number in the call should be zero. You're also only picking from the beginning of the array.

Use this in stead:

```
for ($i = 0; $i < 5; ++$i)
{
    $id .= $chars[rand(0, 61];
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-20T17:13:43.823

Your $chars holds a string with length > 26 but your random number is between 1 and 26 (inclusive). The string index starts with 0 that is char a. For now only chars bcd...xyz1 are used. You could check the string-length dynamically and get a valid random number.

```
function random_id() { 
    $chars = 'abcdefghijklmnopqrstuvwxyz1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZ'; 
    $chars_cnt = strlen($chars)-1; 
    $id = ''; 
    for ($i = 0; $i < 5; ++$i) 
    {   
        $id .= $chars[rand(0, $chars_cnt)]; 
    } 
    return $id; 
} 

echo random_id(); 
```

# visual-studio-2012 - 'Emgu.CV.CvInvoke' 的类型初始化程序引发了 Win8 64 位 VS2012 的异常

> ID：14426942
> 
> 赞同：1
> 
> 时间：2013-01-20T17:05:23.190
> 
> 标签：visual-studio-2012, runtime-error, emgucv

我正在尝试使用 EmguCV 在 Visual Studio 中制作网站。`The type initializer for 'Emgu.CV.CvInvoke' threw an exception`内部异常出错`An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B).`

以下是我的设置的详细信息：

> Windows 8 64 位
> 
> VS2012
> 
> 适用于 Windows x64 的 Emgu 库 2.3

我在论坛上看到的大部分帮助都是针对一个项目的，但如果重要的话，这是一个网站。

我已经将所有 DLL 复制到“ `Website\bin`”文件夹中。所以，我怀疑这是否是问题所在。我也将这些 DLL 放入`System32`和`SysWOW64`文件夹中。没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T14:07:00.640

通常，当您忘记复制或包含 opencv dll 或 MSVCRT 安装出错时，会发生此错误。您可以在[Emgu Wiki](http://www.emgu.com/wiki/index.php/Download_And_Installation#The_type_initializer_for_.27Emgu.CV.CvInvoke.27_threw_an_exception.)上看到更多信息。

# java - 使用 Java 注解的 ViewResolver

> ID：14426947
> 
> 赞同：22
> 
> 时间：2013-01-20T17:05:57.723
> 
> 标签：java, spring, model-view-controller, spring-mvc, annotations

在[Spring](http://en.wikipedia.org/wiki/Spring_Framework) 3.1.1 中是否可以使用 Java 注释配置视图解析器？

我使用 Java 注释完成了所有配置，但我被困在**view resolver**上。

### 代码

```
package com;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.jdbc.datasource.DriverManagerDataSource;
import javax.sql.DataSource;
import org.springframework.jdbc.datasource.DataSourceTransactionManager;
import com.*;
import org.springframework.web.servlet.view.InternalResourceViewResolver;
import org.springframework.web.servlet.view.UrlBasedViewResolver;
import org.springframework.web.servlet.view.JstlView;

@Configuration
@ComponentScan("com")
public class AppConfig
{
    {
          //Other bean declarations
    }

    @Bean
    public UrlBasedViewResolver urlBasedViewResolver()
    {
        UrlBasedViewResolver res = new InternalResourceViewResolver();
        res.setViewClass(JstlView.class);
        res.setPrefix("/WEB-INF/");
        res.setSuffix(".jsp");

        return res;
    }
} 
```

我使用了这段代码并运行了应用程序，但它没有返回适当的视图。但是，如果我在文件中配置一个**viewresolver**`app-servlet.xml`，它就可以正常工作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-20T18:02:46.323

您的类应该扩展 WebMvcConfigurerAdapter 类。请看下面的例子

```
@Configuration
@ComponentScan(basePackages="com")
@EnableWebMvc
public class MvcConfiguration extends WebMvcConfigurerAdapter{

    @Bean
    public ViewResolver getViewResolver(){
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-17T10:35:15.307

我用 Spring 4.3.4 测试了你的场景，它工作正常。我建议仔细检查您扫描的软件包以及 AppConfig 是否正确提供。我正在附加从您的 AppConfig 开始的所有文件。然而，扩展 WebMvcConfigurerAdapter 是件好事。随附的源代码并不理想，它过于简单，只是为了尝试重现您报告的问题。

从 AppConfig 开始：

```
package com;

import org.springframework.context.annotation.*;
import org.springframework.web.servlet.view.*;

@Configuration
@ComponentScan("com")
public class AppConfig {
    @Bean
    public UrlBasedViewResolver getViewResovler() {
        UrlBasedViewResolver urlBasedViewResolver = new UrlBasedViewResolver();
        urlBasedViewResolver.setViewClass(JstlView.class);
        urlBasedViewResolver.setPrefix("/WEB-INF/jsp/");
        urlBasedViewResolver.setSuffix(".jsp");
        return urlBasedViewResolver;
    }

} 
```

然后：

```
package com;

import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

    public class WebInit extends AbstractAnnotationConfigDispatcherServletInitializer {

        @Override
        protected Class<?>[] getRootConfigClasses() {
            return new Class<?>[] { };
        }

        @Override
        protected Class<?>[] getServletConfigClasses() {
            return new Class<?>[] { AppConfig.class };
        }

        @Override
        protected String[] getServletMappings() {
            return new String[] { "/" };
        }
    } 
```

最后：

```
package com;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class MainController {

    @RequestMapping("/")
    public ModelAndView asdf() {
        return new ModelAndView("ABC");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T16:37:26.387

上面的问题是在定义 bean getViewResolver 之前调用了 DispatcherServlet.initViewResolvers，它找不到 bean，因此它永远不会添加视图解析器。

如果将 bean 定义移动到 xml 定义中，它就会被拾取。由于某种原因，如果 XML 中没有定义 ViewResolver，则您定义的 MvcConfiguration 类不会触发 DispatcherServlet 刷新。

# html - IE不显示图片

> ID：14426950
> 
> 赞同：0
> 
> 时间：2013-01-20T17:06:21.557
> 
> 标签：html, internet-explorer, image

某些特定图片不会显示在我的 IE 网站上（我认为是版本 6 到 8）。而不是图片，只是一个带有红色 X 的盒子。

*   图片存在于服务器上。
*   链接没有损坏，它是用正确的 XHTML/HTML 编写的。
*   如果您手动输入图片的 URL，您不会得到 404，而根本什么也没有。
*   图片显示在其他浏览器中。
*   文件名和链接都是小写的。
*   图片全部保存为.jpg。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:14:28.260

这很可能不是缓存问题，因为如果是这样，则将显示旧图像，而不是没有图像（不包括注册缓存但实际文件已删除的边缘情况）。

无论哪种方式，IE 都以其怪癖而闻名。您最好的选择是删除所有临时数据并刷新。

一个非常疯狂的猜测是图像是使用 IE 未知的 JPEG 压缩格式保存的。但这*极*不可能。

# javascript - 使用 javascript 进行 HTML5 拖放 DOM 操作

> ID：14426958
> 
> 赞同：5
> 
> 时间：2013-01-20T17:06:56.810
> 
> 标签：javascript, html, dom, javascript-events

我正在尝试使用本机拖放事件重新排序 DOM SVG 元素。下面的代码在 Firefox 中似乎可以工作（带有一些奇怪的图像效果），在 Chrome 中工作的次数有限（2 或 3 次拖放重新排序工作，然后它似乎挂起），在 IE 中根本不是很好。我最好的猜测是，我没有正确考虑所讨论的事件，某种类型的重置。或者可能以这种方式使用没有 dataTransfer 的拖动事件是不正确的。我的目标是在没有库的情况下理解这种类型的函数，但在最基本的层面上对 DOM 函数、javascript、HTML 和 CSS 有一个更清晰的理解。我很容易在该列表中的任何地方出错。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Drag and Drop Experiments</title>
    <style>svg { border-width:3px} </style>
  </head>
<body>
  <div id="main">
    <svg id="s1" draggable="yes" width="100" height="100">
      <circle cx="50" cy="50" r="30" fill="blue"></circle>
    </svg>
    <svg id="s2" draggable="yes" width="100" height="100">
      <circle cx="50" cy="50" r="30" fill="red"></circle>
    </svg>
    <svg id="s3" draggable="yes" width="100" height="100">
      <circle cx="50" cy="50" r="30" fill="yellow"></circle>
    </svg>
  </div>
  <script type="text/javascript">
      var dragSourceElement = null;
      var dragTargetElement = null;
      function doDragStart(e){
          this.style.opacity = "0.4";
          this.style.border = "solid";
          dragSourceElement = this;
      }
      function doDragEnter(e){
          if(dragSourceElement != this){
             this.style.border = "dashed";
          } 
      }
      function doDragLeave(e){
          if(dragSourceElement != this){
              this.style.border = "";
          }
      }
      function doDragOver(e){
          if(dragSourceElement != this){
              dragTargetElement = this;
              e.preventDefault();//to allow a drop?
          }
      }
      function doDragEnd(e){
          this.style.border = "";
          this.style.opacity = "1.0";
      }
      function doDragDrop(e){
          if(dragSourceElement != dragTargetElement){
          dnd_svg(dragSourceElement,dragTargetElement);
          }
          dragSourceElement.style.border = "";
          dragTargetElement.style.border = "";
          dragSourceElement.style.opacity = "";
          dragSourceElement = null;
          dragTargetElement = null;
      }
      //called after a drag and drop
      //to insert svg element c1 before c2 in the DOM
      //subtree of the parent of c2, assuming c1 is 
      //dropped onto c2
      function dnd_svg(c1,c2){
        var parent_c2 = c2.parentElement;
        parent_c2.insertBefore(c1,c2);
      }
      function addL(n){
           n.addEventListener('dragstart',doDragStart,false);
           n.addEventListener('dragenter',doDragEnter,false);
           n.addEventListener('dragleave',doDragLeave,false);
           n.addEventListener('dragover',doDragOver,false);
           n.addEventListener('drop',doDragDrop,false);
      }
      addL(document.getElementById("s1"));
      addL(document.getElementById("s2"));
      addL(document.getElementById("s3"));
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T20:48:02.377

本[教程](http://www.html5rocks.com/en/tutorials/dnd/basics/)非常适合理解原生拖放，并附有大量示例。

但是，可能存在与 SVG 相关的特殊问题。例如，请参阅此[Mozilla 错误](https://bugzilla.mozilla.org/show_bug.cgi?id=691796)：“dragstart 事件未在 svg 元素上触发”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T20:22:57.447

请参阅[此 JSFiddle](http://jsfiddle.net/SzgAR/10/)。FF 中的 SVG 上的拖放事件存在问题，因此一种解决方案是向 SVG 添加包装器元素。有了这个，您可以使用 dataTransfer 方法，然后将节点附加到放置位置。

```
<!DOCTYPE HTML>
<html>

   <head>
        <style type="text/css">
            #div1,#div2 {
                width:350px;
                height:70px;
                padding:10px;
                border:1px solid #aaaaaa;
            }
        </style>
        <script>
            function allowDrop(ev) {
                ev.preventDefault();
            }

            function drag(ev) {
                var id = ev.target ? ev.target.id : ev.srcElement.id;
                if (id === "circle") {
                    id = ev.target.parentNode.parentNode.id;
                }
                ev.dataTransfer.setData("Text", id);
            }

            function drop(ev) {
                ev.preventDefault();
                var data = ev.dataTransfer.getData("Text");
                ev.target.appendChild(document.getElementById(data));
            }
        </script>
    </head>

    <body>

        <div id="div1" ondrop="drop(event)"
        ondragover="allowDrop(event)"></div>
             <div id="div2" ondrop="drop(event)"
        ondragover="allowDrop(event)"></div>
        <br>
        <div id="wrapper" draggable="yes" ondragstart="drag(event)" style="width:100px; height:100px;">
            <svg id="svg" width="100" height="100" draggable="yes" ondragstart="drag(event)" >
                <circle id="circle" cx="50" cy="50" r="30" fill="yellow"></circle>
            </svg>
        </div>
    </body>

</html> 
```

这适用于我在 FF 18 和 IE 9 中。令人讨厌的部分是 FF 和 IE 都为这些事件提供不同的目标，IE 返回 SVG 作为拖动事件的目标，而 FF 返回圆圈。很烦人。

更新：我在 Chrome 24 中尝试了这个 JSFiddle，它可以工作。

# jsf-2 - primefaces mobile中的模板

> ID：14426959
> 
> 赞同：3
> 
> 时间：2013-01-20T17:07:07.667
> 
> 标签：jsf-2, primefaces, mobile-website

如何在 primefaces mobile 中创建模板，因为根标签是 f:view，而不是 html。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-20T17:11:06.907

XML 根元素无关紧要。它仅包含 XML 名称空间声明。关键是您应该`<f:view renderKitId="PRIMEFACES_MOBILE">`在主模板中有一个。因此，以下主模板的启动示例应该可以正常工作：

```
<f:view 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pm="http://primefaces.org/mobile"
    renderKitId="PRIMEFACES_MOBILE"
>
    <ui:insert name="some" />
</f:view> 
```

模板客户端看起来和往常一样：

```
<ui:composition template="/WEB-INF/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:pm="http://primefaces.org/mobile"
>
    <ui:define name="some">
        ...
    </ui:define>
</ui:composition> 
```

# android - Android的linearLayout理解

> ID：14426967
> 
> 赞同：0
> 
> 时间：2013-01-20T17:07:30.517
> 
> 标签：android, xml, android-linearlayout, android-xml

我想创建一个几乎没有垂直条纹的 android 活动，这是我的代码：

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:background="#CCCCCC" >
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="250dp"
    android:background="#FFFFFF" >
</LinearLayout> 
```

如您所见，上部条纹为 50 dp，底部条纹为 250 dp。问题是我只看到一条条纹，这是我看到的： ![在此处输入图像描述](../Images/900531ceb0f19b63301589df9e0f3ddd.png)

我只看到一条条纹。

我应该如何正确地做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T17:10:05.810

我认为你父母`LinearLayout`的`orientation`属性是`horizontal`。如果您将其方向 ( `android:orientation`) 设置为`vertical`问题应该得到修复。

请发布您的整个布局文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T20:12:50.980

LinearLayout 的方向属性决定了它的子视图将如何被绘制：一个在另一个之下（垂直）或一个在另一个之上（水平）。[您可以在此处](https://github.com/asnehal/Layouts.git)找到 LinearLayout 示例

# java - Android服务器客户端问题

> ID：14426969
> 
> 赞同：0
> 
> 时间：2013-01-20T17:07:40.743
> 
> 标签：java, android, client

我希望有人可以帮助我，我正在尝试创建一个将设备的 GPS 坐标传输到服务器的基本应用程序。我完全是套接字编程的菜鸟（嗯，我今年在大学里介绍了最基本的知识）。

作为垫脚石，我正在关注一个创建服务器和 android 客户端的在线教程，它旨在将用户的输入发送到服务器，然后服务器将其打印在控制台上。我越来越熟悉如何设置服务器和客户端的基础知识，即打开端口等。问题是，当点击发送时，应用程序崩溃，在模拟器上测试时，显然存在问题，但我看不到。

当我使用设备进行测试并点击发送时，控制台上没有打印任何内容。我已经附加了下面的客户端和服务器代码，下面代码中的 ip 用于模拟器，我将其更改为我的设备 ip 并对其进行测试。

****服务器****

```
public class Additional_Server {
private static ServerSocket serverSocket;
private static Socket clientSocket;
private static InputStreamReader inputStreamReader;
private static BufferedReader bufferedReader;
private static String message;
public static void main(String[] args) {
    try {
        serverSocket = new ServerSocket(2001); // Server socket
    } catch (IOException e) {
        System.out.println("Could not listen on port: 2001");
    }
    System.out.println("Server started. Listening to the port 2001");
    while (true) {
        try {
            clientSocket = serverSocket.accept(); // accept the client connection
            inputStreamReader = new InputStreamReader(
                    clientSocket.getInputStream());
            bufferedReader = new BufferedReader(inputStreamReader); // get the client message
            message = bufferedReader.readLine();
            System.out.println(message);
            inputStreamReader.close();
            clientSocket.close();
        } catch (IOException ex) {
            System.out.println("Problem in message reading");
        }
    }
} 
```

}

****客户****

```
import android.os.Bundle;
import android.app.Activity;
import java.io.IOException;
import java.io.PrintWriter;
import java.net.Socket;
import java.net.UnknownHostException;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
public class TCPclient extends Activity {
private Socket client;
private PrintWriter printwriter;
private EditText textField;
private Button button;
private String messsage;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_tcpclient);
        textField = (EditText) findViewById(R.id.Msg); // reference to the text field
        button = (Button) findViewById(R.id.bSend); // reference to the send button
        // Button press event listener
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                messsage = textField.getText().toString(); // get the text message on    the text field
                textField.setText(""); // Reset the text field to blank
                try {
                    client = new Socket("127.0.0.1", 2001); // connect to server
                    printwriter = new PrintWriter(client.getOutputStream(),
                            true);
                    printwriter.write(messsage); // write the message to output stream
                    printwriter.flush();
                    printwriter.close();
                    client.close(); // closing the connection
                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
    } 
```

非常感谢任何指针、建议或帮助，因为我所看到的看起来是正确的，但显然有一些不正确的地方。提前谢谢你！！！

加里

我已经按照建议编辑了上面的代码以将其放入异步任务中，模拟器没有崩溃，但是，我仍然无法将任何打印输出到控制台..有人可以帮忙吗？我在这里尝试，我只是不太习惯android，这是最好的学习方式....

```
public class TCPclient extends Activity {

private Socket client;
private PrintWriter printwriter;
private EditText textField;
private Button button;
private String messsage;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tcpclient);

    textField = (EditText) findViewById(R.id.Msg);  // reference to the text field
    button = (Button) findViewById(R.id.bSend);     // reference to the send button
    messsage = textField.getText().toString();      // get the text message on the text field

    // Button press event listener
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            textField.setText(""); // Reset the text field to blank
            new commAsyncTask().execute();
        }

        class commAsyncTask extends AsyncTask<Void, Void, String> {

            @Override
            protected String doInBackground(Void... params) {
                // TODO Auto-generated method stub
                try {
                    client = new Socket("192.168.1.2", 2001); // connect to
                                                                // server
                    printwriter = new PrintWriter(client.getOutputStream());

                    printwriter.println(messsage); 
                    printwriter.flush();
                    printwriter.close();

                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                return null;
            }

            @Override
            protected void onPostExecute(String result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);
            }
        }

    });
} 
```

}

所以各位，有很多人比我聪明得多，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:12:16.563

tl dr - 线程

基本上在 Android 中，UI 和您的代码一样在线程上运行。所以套接字代码阻止它运行 UI 部分，这导致 Android 操作系统认为应用程序没有响应（或类似的东西），因此它崩溃了。

编辑：修复通过线程或异步任务或其他东西将袜子放在另一个线程中

# mysql - 连接两个独立查询的结果

> ID：14426976
> 
> 赞同：0
> 
> 时间：2013-01-20T17:08:18.937
> 
> 标签：mysql, sql, join

我有两个工作查询：

第一个返回产品列表：

```
$sql = "
   SELECT a.stockID, a.stockCatID, a.stockName, a.stockCode, a.stockCatCode,
   CONCAT_WS(' » ', d.stockCatName, c.stockCatName, b.stockCatName) AS stockPath,
   a.stockName AS stockTitle, a.stockID AS uniStock
   FROM stockcards a
   LEFT OUTER JOIN stockcategories b
     ON a.stockCatID = b.stockCatID
   LEFT OUTER JOIN stockcategories c
     ON b.stockParentCat = c.stockCatID
   LEFT  OUTER JOIN stockcategories d
     ON c.stockParentCat = d.stockCatID "; 
```

第二个基本上是返回总接收和总发送的差异，即剩余数量：

```
SELECT DISTINCT (COALESCE(o.totalReceived, 0) + COALESCE(p.totalSent, 0)) as RemainingStock
 FROM deliverydetails k 
 INNER JOIN stockcards l ON k.stockID= l.stockID
 LEFT JOIN
     (
         SELECT m.stockID, SUM(m.dQuantity) totalReceived
         FROM deliverydetails m
         WHERE m.dQuantity > 0
         GROUP BY m.stockID
     )
     o ON k.stockID = o.stockID
 LEFT JOIN
     (
         SELECT n.stockID, SUM(n.dQuantity) totalSent
         FROM deliverydetails n
         WHERE n.dQuantity < 0
         GROUP BY n.stockID
     )
     p ON k.stockID = p.stockID 
```

我需要在第一个查询中添加一个新列以显示剩余数量。但是没能成功加入这两个。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:30:37.203

看起来您的第二个查询只是将每个 stockID 的正负 dQuantities 相加，然后将它们加在一起，我认为对您的第一个查询的这个小改动就足够了：

```
SELECT a.stockID, a.stockCatID, a.stockName, a.stockCode, a.stockCatCode,
   CONCAT_WS(' » ', d.stockCatName, c.stockCatName, b.stockCatName) AS stockPath,
   a.stockName AS stockTitle, a.stockID AS uniStock,
   dd.RemainingStock AS RemainingStock 
   FROM stockcards a
   LEFT OUTER JOIN stockcategories b
     ON a.stockCatID = b.stockCatID
   LEFT OUTER JOIN stockcategories c
     ON b.stockParentCat = c.stockCatID
   LEFT  OUTER JOIN stockcategories d
     ON c.stockParentCat = d.stockCatID
   LEFT OUTER JOIN 
     (SELECT stockID, SUM(dQuantity) AS RemainingStock
     FROM deliverydetails
     GROUP BY stockID) AS dd
   ON dd.stockID = a.stockID 
```

# php - 将 mysql 列转换为数组并在下拉列表中使用该数组

> ID：14426978
> 
> 赞同：0
> 
> 时间：2013-01-20T17:08:45.243
> 
> 标签：php, html, mysql, arrays, drop-down-menu

长期聆听者，第一次来电者。我无法从名为“roster”的 mysql 表中提取名为“Rep_IP”的列，将其转换为数组，然后使用该数组填充 html 中的下拉列表。我已经尝试了这里以及其他地方列出的几个建议，但我没有任何运气。该页面显示得很好，但下拉列表没有可供选择的选项。我想我会看看你们是否能告诉我我在这里做错了什么。

```
<html>
<body>

<form action="insert.php" method="post">
<p>Rep ID:</p>

<?php
$con = mysql_connect("localhost", "root");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("rep_stats", $con);
$query = "SELECT Rep_ID FROM roster";

$result = mysql_query($query) or die ("no query");

$result_array = array();
echo "$query"
while($row = mysql_fetch_assoc($result))
{
$result_array[] = $row;
}
?>
<select name="Rep_ID">
<?php

foreach($result_array as $rep)
{
echo "<option value=" . $rep['Rep_ID'] . ">" . $rep['Rep_ID'] . "</option>";
}   

?>
</select>
Issues Handled: <input type="number" name="IssuesHandled">
Hours Worked: <input type="number" step="any" name="HoursWorked">
<input type="submit">
</form>

</body>
</html> 
```

如您所见，下拉菜单也是用于在新表中创建条目的表单的一部分。我不知道这是否会有所作为，但我想我会指出这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T17:18:31.700

尝试这个。

```
<select name="Rep_ID">
  <?php
  while($row = mysql_fetch_assoc($result))
  {
      echo "<option value=" . $row['Rep_ID'] . ">" . $row['Rep_ID'] . "</option>";
  }
  ?>
  </select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:15:59.853

尝试这个：

```
<?php

function select_list(){
$host = "host";
$user = "user";
$password = "password";
$database = "database";

$link = mysqli_connect($host, $user, $password, $database);
IF (!$link)
{
echo ('Could not connect');
}
ELSE {
$query = "SELECT Rep_ID FROM roster";

$result = mysqli_query($link, $query);

while($row = mysqli_fetch_array($result, MYSQLI_BOTH)){
    echo "<option value=" . $row['Rep_ID'] . ">" . $row['Rep_ID'] . "</option>";
}  

}
mysqli_close($link);
}

$begin_form = 
<<< EODBEGINFORM
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head><title>Insert data </title></head>
<body>

<form action="insert.php" method="post" name="form1">
<p>Rep ID:</p>

<select name="reps" form="form1">
EODBEGINFORM;

$end_form =
<<< EODENDFORM
</select><br>
Issues Handled: <input type="text" size="12" name="IssuesHandled"><br>
Hours Worked: <input type="text"  size="12" name="HoursWorked"><br>
<input type="submit" name="submit" value="submit">
</form>
</body>
</html>
EODENDFORM;

echo $begin_form;
echo select_list();
echo $end_form;
?> 
```

您会注意到我使用了 MYSQLI_ 而不是 MYSQL_，原因是这更适合新代码，请参阅上面的注释。

我调试了您的代码并遇到了很多问题。:-( 主要问题是：
`echo "$query"`您忘记了行尾的分号。

祝你项目好运。

# algorithm - 如果 g , h 是满足 f(n) = O(g(n)) 和 g(n) = O(h(n)) 的函数，则证明 f(n) = O(h(n))

> ID：14426989
> 
> 赞同：5
> 
> 时间：2013-01-20T17:09:39.537
> 
> 标签：algorithm, math, big-o

我目前正在上我的第一个离散数学课，但遇到了一些麻烦。这是我第一次遇到大哦，我在理解这个特殊问题时遇到了一些麻烦。

我理解证明，`n <= O(n)`因为我可以在数学上证明存在这样一个常数，对于 n >= k 的所有值都适用

如果`f`, `g`,`h`是这样的函数，`f(n) = O(g(n))`并且`g(n) = O(h(n))`

用课堂上给出的big oh的定义来证明`f(n) = O(h(n))`

我的回答是

`|f(n)| <= U1|g(n)| for all n >= k`

`|g(n)| <= U2|h(n)| for all n >= j`

因此

`|f(n)| <= U3|h(n)| for all n >= i`

因此`f(x)`=`O(h(x))`

我试图在她的办公时间见教授，但她说我的校对不正确，但并没有真正说明原因。我在这上面花了很长时间，我什至不知道该怎么办。任何帮助都会很棒...

* * *

好的！让我再试一次！

`|f(n)| <= U1|g(n)| for all n >= k`

`|g(n)| <= U2|h(n)| for all n >= j`

让`i`等于其中最大的一个`k ∨ j`。

让`U3`相等`U1 * U2`

`f(n) <= U3|h(n)| for all n >= i`

因此

`f(n) = O(h(n))`

更好的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:38:09.530

使用大 O 定义：

```
f = O(g) iff exist c, n0 > 0 such that forall n >= n0 then 0 <= f(n) <= cg(n)

g = O(h) iff exist k, n1 > 0 such that forall n >= n1 then 0 <= g(n) <= kh(n) 
```

现在取最后一个不等式并将所有成员除以`c`: `0 <= f(n)/c <= g(n)`，我们可以代`g(n)`入第二个不等式：`0 <= f(n)/c <= kh(n)`。最后将所有成员乘以`c`，您得到`0 <= f(n) <= kch(n)`的是 的定义`f = O(h)`：

```
f = O(h) iff exist j, n2 > 0 such that forall n >= n2 then 0 <= f(n) <= jh(n) 
```

在我们的例子中是：`n2 = max(n0, n1)`和`j = ck`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T17:34:51.297

您可以使用 Bachmann-Landau 符号的极限解释。

然后，您可以使用以下推理：

![推理](../Images/69920b75f90455c5e1212e9faa78c5ed.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T17:27:41.463

如果您将第二个不等式替换为第一个不等式，您最终应该得到`U3 = U1 * U2`，但是您所谓的“i”是关键点。我认为（但我的理论时代已经过去很久了，所以我可能错了）你可以优雅地结束`n >= argmax{ k, j }`.

# c - 字符数组赋值

> ID：14426991
> 
> 赞同：0
> 
> 时间：2013-01-20T17:09:58.487
> 
> 标签：c, arrays, file-handling

我正在尝试将文本文件中的行读入 char 数组，但出现了问题。请查看代码，让我知道我做错了什么。谢谢。

```
#include <stdio.h>
#include <stdlib.h>
int main(void) {
    int i=0,j;
    char* string[100];
    char line[100];
    FILE *file; 
    file = fopen("patt", "r"); 
    while(fgets(line, sizeof line, file)!=NULL) {
        printf("%d %s",i, line);
        string[i]=line;
        i++;
    }
    for (j=0 ; j<i ; j++) {
        printf("string[%d] %s",j, string[j]);
    }
    fclose(file);
    return 0;
} 
```

输入文件 patt 有以下内容。

```
rec
cent
ece
ce
recent
nt 
```

在执行上面的代码时，我得到了这个

```
0 rec
1 cent
2 ece
3 ce
4 recent
5 nt
string[0] nt
string[1] nt
string[2] nt
string[3] nt
string[4] nt
string[5] nt 
```

我期望的是这个

```
0 rec
1 cent
2 ece
3 ce
4 recent
5 nt
string[0] rec
string[1] cent
string[2] ece
string[3] ce
string[4] recent
string[5] nt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-20T17:12:08.920

您重复写入同一个数组。

`while(fgets(line, sizeof line, file)!=NULL) {`

在这一行中，您反复写入数组`line`。

* * *

我认为你误解了什么`char* string[100];`。您将它用作数组数组，而实际上它是一个包含 100 个指针的数组。

要纠正这个问题，您需要首先在每次迭代中分配一个新的内存块：

```
 string[i] = malloc(strlen(line)+1); 
```

然后你需要将内容复制`line`到`string[i]`：

```
strcpy(string[i], line); 
```

此外，在程序结束时，您将需要使用`free`来释放内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T17:19:14.163

您的`string[i]=line;`意思是您将指向同一缓冲区 ( `line`)的指针重复存储到`string`. 像这样的东西：

![在此处输入图像描述](../Images/0ecba08a0e52e911bd333ee4ce5ced98.png)

为了使事情正常进行，您需要为每个要指向的缓冲区分配一个新缓冲区，例如：`string[i] = dupe_string(line);`，其中`dupe_string`将是：

```
char *dupe_string(char const *in) { 
    char *dupe;
    if (NULL != (dupe = malloc(strlen(in) + 1)))
        strcpy(dupe, in);
    return dupe;
} 
```

请注意，由于这用于`malloc`为每个字符串分配空间，因此您最终需要调用每个字符串`free`以避免内存泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T17:31:53.553

为了帮助您理解您的代码：

*   您正在写入每次`string[i]`的地址，而数组的内容在整个循环中不断变化。这导致，所有都包含相同变量的地址，即。在循环结束时，从文件中读取的最后一行存储在数组中。现在，当您打印 string[i] 时，您正在打印变量中存在的数据。由于 string[i] 的所有实例都包含相同的地址，它们都打印相同的值，即在您的输出中。`line``line``string[i]``line``line``line``line``nt`

> ```
> int main(void) {
>     int i=0,j;
>     char* string[100];
>     char line[100];
>     FILE *file; 
>     file = fopen("patt", "r"); 
>     while(fgets(line, sizeof(line), file)!=NULL) {//You missed the ()'s in the sizeof
>         printf("%d %s",i, line);
>         string[i]=line;
>         i++;
>     } 
> ```

*您应该做的是：

```
int main(void) {
int i=0,j;
char* string[100];
char line[100];
FILE *file; 
file = fopen("patt", "r"); 
while(fgets(line, sizeof(line), file)!=NULL) {//You missed the ()'s in the sizeof
    printf("%d %s",i, line);
    string[i]=malloc(strlen(line)+1); ///You need to allocate some memory to char* string[i] here
    if(string[i] == NULL)//Do a NULL check if malloc failed
      //Handle NULL here
    strncpy(string[i],line,strlen(line)+1);//Use strncpy to copy line into the malloced memory in string[i]
    i++;
} 
```

现在，由于您已经分配了用于存储数据的内存，因此您也需要释放内存。所以，而不是在你的代码中：

```
 for (j=0 ; j<i ; j++) {
        printf("string[%d] %s",j, string[j]);
    }
    fclose(file);
    return 0;
} 
```

做这个：

```
 for (j=0 ; j<i ; j++) {
    printf("string[%d] %s",j, string[j]);
    free(string[j]);
    }
   fclose(file);
   return 0;
} 
```

现在，这应该给你你想要的。

# python - django imagekit 处理器：使用存储在数据库中的维度

> ID：14426996
> 
> 赞同：3
> 
> 时间：2013-01-20T17:10:11.947
> 
> 标签：python, django, imagekit, django-imagekit

我有一个模型，其中缩略图宽度在父对象（外键）之间变化。我需要能够将此信息提供给 imagekit 处理器。这就是我所拥有的：

```
class Wall(models.Model):
    #...
    width = models.SmallIntegerField(null=True, blank=True)
    #...

class Poster(models.Model):
    wall = models.ForeignKey(Wall, related_name='posters')
    #...
    original_image = models.ImageField(upload_to=upload_image_to)

    def __init__(self, *args, **kwargs):
        self.thumbnail = ImageSpecField([
                Adjust(contrast=1.2, sharpness=1.1),
                SmartResize(height=163, width=self.wall.width)
            ],
            image_field='original_image', format='PNG'
        )

        super(Poster, self).__init__(*args, **kwargs)
    #... 
```

但如果我这样做，什么都不会发生，甚至不会生成缩略图 url。

以下将导致此异常：
AttributeError: 'ForeignKey' object has no attribute 'width'

```
class Poster(models.Model):
    wall = models.ForeignKey(Wall, related_name='posters')
    #...
    original_image = models.ImageField(upload_to=upload_image_to)

    thumbnail = ImageSpecField([
            Adjust(contrast=1.2, sharpness=1.1),
            SmartResize(height=163, width=wall.width)
        ],
        image_field='original_image', format='PNG'
    )
    #... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-09T07:58:54.013

#1 答案不适合当前版本的 django-imagekit (3.0.3)。我找到了官方的解决方案。请参考 [http://django-imagekit.readthedocs.org/en/latest/advanced_usage.html#specs-that-c​​hange](http://django-imagekit.readthedocs.org/en/latest/advanced_usage.html#specs-that-change)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T03:45:31.417

您不能在模型定义中引用实例值。这就是 Django 变得有点棘手的地方；模型是实例化时实例外观的声明，这就是为什么相互依赖的字段必须通过名称（例如`image_field='original_image'`规范）引用其他字段的原因。

从 imagekit 的源代码中可以看出，它`processors`可以采用静态处理器列表来应用，也可以采用可调用的方法，该可调用应返回要在生成时应用的处理器列表。由于您希望生成在运行时根据宽度进行更改，因此您可以利用这一点。

使用该字段出现`processors`的实例调用可调用对象`thumbnail`，然后允许您查找宽度。

```
def thumbnail_processors(instance, file):
    # Dynamic width lookup.
    width = instance.wall.width
    return [
        Adjust(contrast=1.2, sharpness=1.1),
        SmartResize(width=width, height=163),
        ]

class Poster(models.Model):
    wall = models.ForeignKey(Wall, related_name='posters')
    #...
    original_image = models.ImageField(upload_to=upload_image_to)

    thumbnail = ImageSpecField(
        processors=thumbnail_processors,
        image_field='original_image', format='PNG'
    )
    #... 
```

现在当您访问该字段时，`thumbnail_processors`将在运行时而不是在模型声明时调用来获取处理器列表。`width`是从您的外键获得的，并执行了适当的调整大小。

可能有一些需要调查的问题。当您访问时，`thumbnail`将根据您的宽度生成一个图像文件。如果您稍后更改宽度并再次请求缩略图，我不确定存储和缓存后端的行为方式。您可能需要一个自定义文件名生成器，它可以对缩略图的宽度进行编码，以便当宽度发生变化时，将生成一个具有不同名称的新缩略图。

# android - 我的应用程序运行不顺利

> ID：14426997
> 
> 赞同：0
> 
> 时间：2013-01-20T17:10:20.347
> 
> 标签：android, metadata, handler

我正在尝试开发一个应用程序。这是一个无线电应用程序。当我使用一种方法来显示元数据时，它会产生一些问题。1.播放暂停按钮不流畅。2.花更多时间展示布局。

这是主要的活动代码：

```
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;

import android.media.MediaPlayer;

import android.os.Bundle;

import android.util.Log;
import android.view.View;
import android.view.Window;

import android.widget.ImageButton;
import android.widget.TextView;

public class IRadioActivity extends Activity implements
        MediaPlayer.OnCompletionListener, MediaPlayer.OnPreparedListener,
        MediaPlayer.OnErrorListener, MediaPlayer.OnBufferingUpdateListener {

    private String TAG = getClass().getSimpleName();
    private MediaPlayer mp = null;

    private ImageButton btnPlay;

    String title;
    String artist;

    private static Context con;
    Timer timer;
    TextView StationName;
    String Stationurl = "http://95.211.82.139:8048";

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        IRadioActivity.con = this;

        btnPlay = (ImageButton) findViewById(R.id.btnPlay);

        mp = new MediaPlayer();

        mp.setOnCompletionListener(this); // Important

        btnPlay.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // check for already playing
                if (mp.isPlaying()) {
                    if (mp != null) {
                        mp.pause();
                        // Changing button image to play button
                        btnPlay.setImageResource(R.drawable.btn_play);
                    }
                } else {
                    // Resume song
                    if (mp != null) {
                        mp.start();
                        // Changing button image to pause button
                        btnPlay.setImageResource(R.drawable.btn_pause);
                    }
                }

            }
        });
        playSong();
        getMeta();
    }

    public void playSong() {
        // Play song

        try {
            mp.reset();
            mp.setDataSource(Stationurl);
            mp.prepare();
            mp.start();

            // Displaying Song title

            // Changing Button Image to pause image
            btnPlay.setImageResource(R.drawable.btn_pause);

        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void onDestroy() {
        super.onDestroy();
        mp.release();
    }

    public void onCompletion(MediaPlayer mp) {
        // TODO Auto-generated method stub

    }

    // ----------------
    public boolean onError(MediaPlayer mp, int what, int extra) {
        StringBuilder sb = new StringBuilder();
        sb.append("Media Player Error: ");
        switch (what) {
        case MediaPlayer.MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK:
            sb.append("Not Valid for Progressive Playback");
            break;
        case MediaPlayer.MEDIA_ERROR_SERVER_DIED:
            sb.append("Server Died");
            break;
        case MediaPlayer.MEDIA_ERROR_UNKNOWN:
            sb.append("Unknown");
            break;
        default:
            sb.append(" Non standard (");
            sb.append(what);
            sb.append(")");
        }
        sb.append(" (" + what + ") ");
        sb.append(extra);
        Log.e(TAG, sb.toString());
        return true;
    }

    public void onBufferingUpdate(MediaPlayer mp, int percent) {
        Log.d(TAG, "PlayerService onBufferingUpdate : " + percent + "%");
    }

    // .....top bar button....//

    public void getMeta() {

        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            public void run() {

                URL url;
                // Message msg = handler.obtainMessage();
                try {
                    // url = new URL("http://relay5.slayradio.org:8000");
                    url = new URL(Stationurl);
                    final IcyStreamMeta icy = new IcyStreamMeta(url);

                    runOnUiThread(new Runnable() {

                        @Override
                        public void run() {
                            // TODO Auto-generated method stub

                            // Typeface book = Typeface.createFromAsset(
                            // getAssets(), "fonts/Neutra2Text-Book.otf");

                            final TextView songTitle = (TextView) findViewById(R.id.songName);
                            final TextView artistName = (TextView) findViewById(R.id.artistName);
                            try {

                                artistName.setText(icy.getArtist().toString()
                                        .trim());
                                artistName.setText(icy.getArtist().toString()
                                        .trim());
                                songTitle.setText(icy.getTitle().toString()
                                        .trim());

                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }

                        }
                    });

                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        }, 0, 500);

    }

    @Override
    public void onPrepared(MediaPlayer mp) {
        // TODO Auto-generated method stub

    }

} 
```

当我使用 getMeta(); 时面临这些问题；方法。

此方法的主类是：

```
import java.io.IOException;
import java.io.InputStream;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class IcyStreamMeta<Message> {

    protected URL streamUrl;
    private Map<String, String> metadata;
    private boolean isError;

    public IcyStreamMeta(URL streamUrl) {
        setStreamUrl(streamUrl);

        isError = false;
    }

    /**
     * Get artist using stream's title
     *
     * @return String
     * @throws IOException
     */
    public String getArtist() throws IOException {
        Map<String, String> data = getMetadata();

        if (!data.containsKey("StreamTitle"))
            return "";

        String streamTitle = data.get("StreamTitle");
        String title = streamTitle.substring(0, streamTitle.indexOf("-"));
        return title.trim();
    }

    /**
     * Get title using stream's title
     *
     * @return String
     * @throws IOException
     */
    public String getTitle() throws IOException {
        Map<String, String> data = getMetadata();

        if (!data.containsKey("StreamTitle"))
            return "";

        String streamTitle = data.get("StreamTitle");
        String artist = streamTitle.substring(streamTitle.indexOf("-")+1);
        return artist.trim();
    }

    public Map<String, String> getMetadata() throws IOException {
        if (metadata == null) {
            refreshMeta();
        }

        return metadata;
    }

    public void refreshMeta() throws IOException {
        retreiveMetadata();
    }

    private void retreiveMetadata() throws IOException {
        URLConnection con = streamUrl.openConnection();
        con.setRequestProperty("Icy-MetaData", "1");
        con.setRequestProperty("Connection", "close");
        con.setRequestProperty("Accept", null);
        con.connect();

        int metaDataOffset = 0;
        Map<String, List<String>> headers = con.getHeaderFields();
        InputStream stream = con.getInputStream();

        if (headers.containsKey("icy-metaint")) {
            // Headers are sent via HTTP
            metaDataOffset = Integer.parseInt(headers.get("icy-metaint").get(0));
        } else {
            // Headers are sent within a stream
            StringBuilder strHeaders = new StringBuilder();
            char c;
            while ((c = (char)stream.read()) != -1) {
                strHeaders.append(c);
                if (strHeaders.length() > 5 && (strHeaders.substring((strHeaders.length() - 4), strHeaders.length()).equals("\r\n\r\n"))) {
                    // end of headers
                    break;
                }
            }

            // Match headers to get metadata offset within a stream
            Pattern p = Pattern.compile("\\r\\n(icy-metaint):\\s*(.*)\\r\\n");
            Matcher m = p.matcher(strHeaders.toString());
            if (m.find()) {
                metaDataOffset = Integer.parseInt(m.group(2));
            }
        }

        // In case no data was sent
        if (metaDataOffset == 0) {
            isError = true;
            return;
        }

        // Read metadata
        int b;
        int count = 0;
        int metaDataLength = 4080; // 4080 is the max length
        boolean inData = false;
        StringBuilder metaData = new StringBuilder();
        // Stream position should be either at the beginning or right after headers
        while ((b = stream.read()) != -1) {
            count++;

            // Length of the metadata
            if (count == metaDataOffset + 1) {
                metaDataLength = b * 16;
            }

            if (count > metaDataOffset + 1 && count < (metaDataOffset + metaDataLength)) {              
                inData = true;
            } else {                
                inData = false;             
            }               
            if (inData) {               
                if (b != 0) {                   
                    metaData.append((char)b);               
                }           
            }               
            if (count > (metaDataOffset + metaDataLength)) {
                break;
            }

        }

        // Set the data
        metadata = IcyStreamMeta.parseMetadata(metaData.toString());

        // Close
        stream.close();
    }

    public boolean isError() {
        return isError;
    }

    public URL getStreamUrl() {
        return streamUrl;
    }

    public void setStreamUrl(URL streamUrl) {
        this.metadata = null;
        this.streamUrl = streamUrl;
        this.isError = false;
    }

    public static Map<String, String> parseMetadata(String metaString) {
        Map<String, String> metadata = new HashMap();
        String[] metaParts = metaString.split(";");
        Pattern p = Pattern.compile("^([a-zA-Z]+)=\\'([^\\']*)\\'$");
        Matcher m;
        for (int i = 0; i < metaParts.length; i++) {
            m = p.matcher(metaParts[i]);
            if (m.find()) {
                metadata.put((String)m.group(1), (String)m.group(2));
            }
        }

        return metadata;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:19:10.103

使用 prepareAsync() 而不是 prepare()。请参阅此处的文档：http: [//developer.android.com/guide/topics/media/mediaplayer.html#preparingasync](http://developer.android.com/guide/topics/media/mediaplayer.html#preparingasync)

# shell - 权限设置

> ID：14426999
> 
> 赞同：0
> 
> 时间：2013-01-20T17:10:27.087
> 
> 标签：shell, operating-system

我想知道 chmod 中 s 的用途是什么。

```
 tiago2@ubuntu:~$ ls -l file
 -rw-r--r-- 1 tiago2 tiago2 0 2013-01-20 17:05 file
 tiago2@ubuntu:~$ chmod g+s file
 tiago2@ubuntu:~$ ls -l file
 -rw-r-Sr-- 1 tiago2 tiago2 0 2013-01-20 17:05 file 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T17:16:44.403

`s`代表设置。

> 文件权限位包括文件所有者、组和其他的执行权限位。当所有者的执行位设置为“s”时，设置用户 ID 位被设置。这会导致运行该文件的任何人或进程都可以访问系统资源，就好像他们是该文件的所有者一样。当组的执行位设置为“s”时，设置组 ID 位被设置，并且运行程序的用户根据文件所属组的访问权限获得访问权限。

命令：

```
chmod g+s file 
```

在文件“file”上设置组 ID 位。