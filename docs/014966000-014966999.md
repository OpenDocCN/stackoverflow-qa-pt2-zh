# StackOverflow 问答 14966000-14966999

# python - 从文件中删除特定的行返回 ("\n")

> ID：14966001
> 
> 赞同：0
> 
> 时间：2013-02-19T19:42:18.617
> 
> 标签：python, formatting

我有一个文件，有些行在错误的位置有一个 \n。我能够正确地找到它们，但是当我尝试将我的发现输出到一个新文件时，即使我打印结果，它们仍然显示 \n，它们也很好。到目前为止，这是我的代码：

```
f = open("DUP1.txt","r")
w = open("output.txt", "w")
mark = 0

for line in f:
  if mark == 1:
    mark = 0
    w.write(outputline.replace("\n","\t") + line)
  else:
    subp = line.find(".")
    if subp < 8:
      mark = 1
      outputline = line.replace("\n","")
    else:
      w.write(line) 
```

我打开的文件如下所示：

```
ABC0005    other   info    here
ABC0005.23
other      info    here
ABC0005.46
other      info    here 
```

我试图让它看起来像：

```
ABC0005    other   info    here
ABC0005.23 other   info    here
ABC0005.46 other   info    here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:56:46.813

```
with open('testdata.txt') as fin, open('testdata.out', 'w') as fout:
    for line in fin:
        if 0 <= line.find('.') <= 8:
            fout.write(line.rstrip() + '\t' + next(fin))
        else:
            fout.write(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:55:33.577

这一行：

```
subp = line.find(".") 
```

不在`-1`时返回。这弄乱了你的逻辑。`"."``subp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:55:04.963

即使我不知道出了什么问题，这里有一些漂亮的单行：

```
infile = open("test")
outfile = open("out", "w")    
outfile.writelines(s if not i%2 else s.replace("\n", "\t") for i, s in enumerate(infile)) 
```

编辑：[约翰克莱门茨的答案](https://stackoverflow.com/a/14966220/472416)更好。

# android - 恢复 FragmentStatePagerAdapter 中的 Fragment 恢复错误

> ID：14966006
> 
> 赞同：0
> 
> 时间：2013-02-19T19:42:35.993
> 
> 标签：android, fragment

我有一个测验应用程序，它将多项选择题（下面`TextView`有 5 个选项）显示为 a中的`RadioButtons`片段。`FragmentStatePagerAdapter``ViewPager`

我得到的错误仅在片段恢复时出现。向前滑动，它会完美地加载每个问题和所有 5 个选项。然而，当它恢复时，它加载完全错误，所有 5`RadioButtons`显示相同的文本，特别是最后一个`RadioButton`。我无法弄清楚为什么会发生此错误，但是我认为这可能与调用超类有关，但这只是一种预感。

这是代码：

`OnCreateView`正确设置由 logcat 确定的文本：

```
for (String s : aArray) {
// Runs through a string array of the 5 answers
        LinearLayout l = lArray.get(pos);

            RadioButton r = (RadioButton) l.findViewById(R.id.radio);
            Log.d(s, correctanswer);
//Log tag shows that the choices during initial creation or **restore** are the different 5 answers
            r.setText(s);
        }
    return rootView; 
```

然后这是我的`OnViewStateRestored`：

```
public void onViewStateRestored(Bundle savedInstanceState) {
    super.onViewStateRestored(savedInstanceState);
    for (LinearLayout l : lArray) {
        RadioButton r = (RadioButton) l.findViewById(R.id.radio);
        Log.e(r.getText().toString(), correctanswer);
//Suddenly the displayed text is the same for all 5 buttons
        if (r.isChecked())
            r.performClick();
//android automatically saves check status. for full restore I click all the buttons
    }
} 
```

如果您需要来自 OnCreateView 的更多代码或其他任何内容，请告诉我。我似乎无法找出导致此问题的原因，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:50:37.093

您的每个单选按钮都应该有一个不同的 id，而不是它们都具有相同的 id。这就是单选按钮和其他视图通过 id 保存状态的方式。好吧，更准确地说，他们将状态保存在由其 id 映射的 SparseArray 中。因此，为什么他们都拥有第 5 个恢复的信息。

# bash - bash 导出命令，其中包含一个变量

> ID：14966008
> 
> 赞同：1
> 
> 时间：2013-02-19T19:42:36.713
> 
> 标签：bash

我有脚本在许多循环中使用的命令并想要导出它。

```
#!/bin/bash
export COMMAND=$(many programs $FILE)
# And use this command latter like this:
for FILE in ./*; 
do 
eval $"COMMAND"
done 
```

而且我无法导出这个命令，因为我从这个命令中的程序中得到一个错误（请提供输入）。

如何导出带有变量的 COMMAND？

**编辑**

我使用了@Charles Duffy 的答案，但还有一个问题：

```
your_command() {
do_something_with "$1"
do_something_else_with "$1"
}
export -f your_command

for i in $(seq 1 $Times); do 
  for file in ./*; do
     your_command "$file"
  done 
done 
```

When `Times`=1 循环工作正常，但 when `Times`=2`your_command`不保存输出（第一个循环有输出，但第二个循环没有）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:45:00.227

你`command`应该是一个函数，而不是一个变量。

```
your_command() {
  do_something_with "$1"
  do_something_else_with "$1"
}

for file in ./*; do
  your_command "$file"
done 
```

如果您确实需要将其导出（可用于子流程），您可以使用以下方法执行此操作：

```
export -f your_command 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:47:53.787

首先 - 您应该使用一个函数，如其他答案中所述。也就是说，也可以修复你所拥有的东西。您可能不应该使用`$()`. 按照您的方式，您的“许多程序”将在初始化时立即运行`COMMAND`，并且您将保存它们的*输出*，而不是命令行本身。除此之外，当时`$FILE`还没有设置。这是您的脚本的修改版本，应该可以工作：

```
#!/bin/bash

COMMAND='many programs "${FILE}"'
# And use this command later like this:
for FILE in *
do 
  eval ${COMMAND}
done 
```

我对您的脚本所做的更改：

1.  删除不必要的`export`
2.  放置`{}`变量名
3.  双引号`${FILE}`，以防文件名中有空格
4.  摆脱了`$()`并替换为`''`
5.  固定缩进以便于阅读
6.  将`for`循环列表更改为`*`from`./*`以减少输入

# jquery - Firebug 控制台中的 jQuery 类型错误

> ID：14966012
> 
> 赞同：0
> 
> 时间：2013-02-19T19:42:51.610
> 
> 标签：jquery, cakephp

我试图在我的项目中包含一些 jQuery 插件，但在 firebug 控制台中出现了太多错误。我不确定它们为什么会出现。我还可以确认 jQuery 库也已加载。

当我在我的模板文件上运行它们时，我没有收到这些错误。当我将它们转换为我的 cakePHP 模板时，我得到了很多 javascript 错误。

我尝试调试每个文件，但似乎没有相同的错误。

![在此处输入图像描述](../Images/2b9a93dfa84cdc940a4d24a5523b6d01.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:46:08.713

如果您使用的是 jQuery 1.9 或 2.0，`$.browser`则从代码中删除。可能就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:48:33.853

实际上这通常会发生，当您使用带有错误参数的库代码时，实际上这不是与 jQuery 相关的异常，而是您使用的库。将您的代码放入：

```
try
  {
  //Run some code here
  }
catch(err)
  {
  //Handle errors here
  } 
```

并使用 Jquery 1.8 作为已删除的更新库`$.browser`：

```
<script src="http://code.jquery.com/jquery-1.8.1.min.js"></script> 
```

# linux - Linux/CentOS 最好的虚拟化或开源云平台是什么？

> ID：14966014
> 
> 赞同：0
> 
> 时间：2013-02-19T19:43:10.973
> 
> 标签：linux, centos, cloud, virtualization

我有一个 4 节点服务器，我想对其进行虚拟化或用于开始构建云基础架构。我想在上面使用 CentOS 5 或 6。对我来说，最好的虚拟化或基于云的解决方案是什么？

这是我的服务器的规格，

八个 Intel 四核 2.5GHz CPU
64GB DDR2 全缓冲 RAM
八个 500GB 7.2K SATA 硬盘
四个 1 Gbit NIC
两个 550W 电源

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T01:38:54.407

目前有很多开源的虚拟化或云平台。当您说云计算时，我认为您正在寻找 IaaS 系统。您可以使用 OpenStack、CloudStack、Eucalyptus 等云解决方案。当然，几个纯虚拟化软件也能满足你的要求。比如XenServer Free版，oVirt主要由RedHat贡献，Convirt开源版。我强烈推荐 XenServer 有几个原因。

*   它比 oVirt 成熟得多。XenServer 作为商业解决方案已经存在好几年了。免费版是开源且功能强大的。
*   它很容易部署。您无需安装和配置 KVM 或 Xen 等管理程序。XenServer 作为 ISO 映像分发。将其安装为新操作系统，一切就绪。
*   它很容易使用。XenServer 具有命令行工具和称为 XenCenter 的 GUI 工具来管理您的 VM。坏消息是 XenCenter 是一个仅限 Windows 的应用程序
*   部署虚拟机很容易。XenServer 提供了许多内置的来宾操作系统模板，使创建新 VM 变得非常容易。
*   资源池。甚至免费版也允许您以资源池的形式管理多个节点。一个资源池最多可以包含16个节点。（不是免费版造成的，即使是付费版也有这个限制）

# javascript - 需要访问二级 json 字段，但代码仅设置为第一

> ID：14966015
> 
> 赞同：0
> 
> 时间：2013-02-19T19:43:14.990
> 
> 标签：javascript, json

我正在尝试将标识符传递给函数以访问此（非常简化的）json报价对象中的字段“yrhiprice”：

```
quote: {
        "last": "49.65",
        "FundamentalData": {
          "yrhiprice": "49.77000"
        }
      } 
```

我传递给的函数（我无法编辑）根据我放入表格单元格的数据字段访问这些字段：

```
<td data-field="last"></td> 
```

和我无法编辑的（非常简化的）函数，它只接受 data-field 属性中的任何内容并将其用作访问对象中字段的键

```
var name = $elt.data('field');    
var value = (quote[name]) ? (quote[name]) : '---';
$elt.text(value); 
```

所以，我的相当荒谬的问题是：有什么方法可以访问“yrhiprice”字段，即使它只会将其放入第一组括号中？

我试过“FundamentalData["yrhiprice"]”、“FundamentalData.yrhiprice”和“FundamentalData][yrhiprice”，但没有成功。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:59:38.687

```
var name = "FundamentalData";
var val = quote[name];
val = val.yrhiprice; //"49.77000" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:57:01.633

如果您无法编辑该函数并且`FundamentalData.yrhiprice`不起作用，则可以将对象展平，以便将`yrhiprice`属性复制到一个级别。显然，这仅在您需要复制的所有属性名称都是唯一的情况下才有效，但即使在这种情况下，您也只需要注意为您的属性添加前缀或后缀以使其唯一。

所以如果你有一个`quote`对象，你能：

```
myQuote.FundamentalData_yrhiprice = myQuote.FundamentalData.yrhiprice; 
```

接着：

```
<td data-field="FundamentalData_yrhiprice"> 
```

# iphone - CSRF 验证失败。在 iOS 中使用 Pinterest 请求中止错误

> ID：14966016
> 
> 赞同：0
> 
> 时间：2013-02-19T19:43:15.673
> 
> 标签：iphone, ios, uiwebview, csrf, pinterest

我正在尝试集成`Pinterest`到我的 iOS 应用程序中。

这是我尝试过的。

```
- (void)viewDidLoad
{

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}
 - (void)viewWillAppear:(BOOL)animated
{
    [_pinterestWebView.scrollView setShowsHorizontalScrollIndicator:NO];
    [_pinterestWebView.scrollView setShowsVerticalScrollIndicator:NO];
    [super viewWillAppear:animated];
    [self postToPinterestWithImageUrl:_url andDescription:_description];

}
-(void)postToPinterestWithImageUrl:(NSString *)url andDescription:(NSString *)description
{

    NSString *buttonUrl = [NSString stringWithFormat:@"http://pinterest.com/pin/create/button/?url=http://www.flor.com&media=%@&description=%@", url, @"hello"];
    [_pinterestWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:buttonUrl] cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:40]];    
}
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSLog(@"WebView URL = %@",[request.URL absoluteString]);
    return YES;
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
    [_activityIndicator startAnimating];
    [_activityIndicator setHidden:NO];
}

-(void)webViewDidFinishLoad:(UIWebView *)webView {

    NSRange range = [[webView.request.URL absoluteString] rangeOfString:@"login"];
    if (range.location==NSNotFound) {

        CGRect modifiedFrame = self.view.superview.frame;
        CGPoint center = self.view.superview.center;

        UIInterfaceOrientation orinetation= [[UIApplication sharedApplication] statusBarOrientation];
        if (UIInterfaceOrientationIsLandscape(orinetation)) {
            modifiedFrame.size=CGSizeMake(350, 650);
        }
        else
        {
            modifiedFrame.size=CGSizeMake(650, 350);
        }
        [self.view.superview setFrame:modifiedFrame];
        [self.view.superview setCenter:center];
        NSLog(@"Content Offset = %@",NSStringFromCGPoint(webView.scrollView.contentOffset));
        [webView.scrollView setContentOffset:CGPointMake(40, 0)];

    }
    NSLog(@"Content Size = %@",NSStringFromCGSize([webView.scrollView contentSize]));
    [_activityIndicator stopAnimating];
    [_activityIndicator setHidden:YES];
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    NSLog(@"Error = %@",[error localizedDescription]);
}
- (void)viewDidUnload
{
    [self setActivityIndicator:nil];
    [self setPinterestWebView:nil];
    [super viewDidUnload];
}
- (IBAction)dismissIt:(id)sender
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

-(BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES;
} 
```

但是，一旦 webview 加载了`pinterest`登录页面并且如果我更改方向并尝试登录，那么我会在 webview 上显示以下消息。

![在此处输入图像描述](../Images/4ca8dd67e8aa00634635ca0ce6fc2b13.png)

可能是什么问题呢？我在加载`Pinterest`网址时犯了任何错误吗？此外，它总是提示进行身份验证。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:11:08.950

发生的事情是您试图在没有 Django CSRF（跨站点请求伪造）令牌的情况下向 Pinterest 发出请求。您需要获取该 CSRF 令牌并将其放入`postToPinterestWithImageUrl`. 此外，在尝试以这种方式与 Pinterest 交互时，您可能会想要使用 POST 而不是 GET 请求。此外，您每次都必须登录的原因是因为您将其`NSURLCacheStorageNotAllowed`用作缓存策略，该策略可确保不会将有关 HTTP 会话的任何内容（包括会话信息）保存到磁盘。尝试将缓存策略更改为`NSURLCacheStorageAllowed`.

# android - 列表视图行高

> ID：14966017
> 
> 赞同：0
> 
> 时间：2013-02-19T19:43:19.903
> 
> 标签：android, listview

我正在尝试设置 listview 行高而不制作自定义 listview 和新 arrayadapter。我将高度设置为 LayoutParams.WRAP_CONTENT；我在 logcat 中得到了这个

```
02-19 20:42:25.721: E/AndroidRuntime(6936): at android.widget.AbsListView.obtainView(AbsListView.java:2465) 02-19 20:42:25.721: 
                    E/AndroidRuntime(6936): at android.widget.ListView.measureHeightOfChildren(ListView.java:1250) 
```

这是我的查看代码：

```
public View getView(int position, View convertView, ViewGroup parent) {
                 System.gc();
                 TextView tv = new TextView(mContext.getApplicationContext());
                 LayoutInflater inflater = getLayoutInflater();
                 LayoutParams params = tv.getLayoutParams();
                 String id = null;
              mRowHeight = LayoutParams.WRAP_CONTENT;
                 if (params == null) {
                       music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);
                       musiccursor.moveToPosition(position);
                       id = musiccursor.getString(music_column_index);
                       music_column_index = musiccursor
.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);
                       musiccursor.moveToPosition(position);
                       id += musiccursor.getString(music_column_index);
                       tv.setText(id);
                       params.height = mRowHeight;
                 } else
                       tv = (TextView) convertView;
                 return tv; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:45:44.217

> E/AndroidRuntime(6936): 在 android.widget.AbsListView.obtainView(AbsListView.java:2465) 02-19 20:42:25.721: E/AndroidRuntime(6936): 在 android.widget.ListView.measureHeightOfChildren(ListView.java :1250)

您的错误意味着该`getView()`方法将**`null`**在某些情况下返回。我对您的代码有点困惑，`convertView`如果为空，您无处可膨胀。

您的方法太混乱且不正确。我建议您为行创建`XML`布局，然后使用此布局进行膨胀，`convertView`然后使用来自`Cursor`.

```
if (convertView == null) {
   convertView = inflater.inflate(R.layout.someRowLayout, null, false);
   // if you have RowHolder so set him as tag to convertView
}
else {
      // just recycle it if you have holder
}
if (cursor.moveToPosition(position)) {
   String data = cursor.getString(cursor.getColumnIndex(Constants.COLUMN_NAME));
   if (data != null && data.length() > 0) {
      TextView t = findViewById(R.id.someId);
      t.setText(data);
   }
} 
```

# c# - Asp.net Web Api 将响应状态码设置为数字

> ID：14966018
> 
> 赞同：39
> 
> 时间：2013-02-19T19:43:26.247
> 
> 标签：c#, http, asp.net-web-api

在 Asp.net Web Api 中，如何使用 int 或字符串而不是 StatusCode 枚举来设置响应的状态代码？

就我而言，我想返回带有状态代码 422“无法处理的实体”的验证错误，但它没有枚举器。

```
HttpResponseMessage response = Request.CreateResponse();
response.StatusCode = HttpStatusCode.UnprocessableEntity; //error, not in enum 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-19T19:47:21.130

您可以将任何 int 转换为 HttpStatusCode。

```
response.StatusCode = (HttpStatusCode)422; 
```

你也可以：

```
HttpResponseMessage response = Request.CreateResponse((HttpStatusCode)422, "Unprocessable Entity"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-02-04T19:45:04.430

我最终为此创建了一个类：

```
 public class HttpStatusCodeAdditions
    {
        public const int UnprocessableEntityCode = 422;
        public static HttpStatusCodeAdditions UnprocessableEntity = new HttpStatusCodeAdditions(UnprocessableEntityCode);

        private HttpStatusCodeAdditions(int code)
        {
            Code = code;
        }
        public int Code { get; private set; }

        public static implicit operator HttpStatusCode(HttpStatusCodeAdditions addition)
        {
            return (HttpStatusCode)addition.Code;
        }
    } 
```

可以这样使用：

```
response.StatusCode = HttpStatusCodeAdditions.UnprocessableEntity; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T16:50:35.803

将您的**HttpStatusCode**转换为整数：

```
response.StatusCode = Convert.ToInt32(HttpStatusCode.UnprocessableEntity) 
```

# openoffice.org - 如何：列出 Openoffice Calc 或 Excel 中两列文本的所有可能排列

> ID：14966026
> 
> 赞同：-1
> 
> 时间：2013-02-19T19:43:51.597
> 
> 标签：openoffice.org, openoffice-calc

我正在尝试执行以下操作：

我有一张带有 2 列带有文本输入的单元格的表格。现在，我想生成所有排列，最好将它们粘贴到单独的工作表中。有谁知道如何做到这一点？（还有谁还有空闲时间.. :D）

提前致谢！

亲切的问候，

弗雷德·施尼特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:48:00.727

注释格式不允许二维布局。让我们看看这是否效果更好。

只是为了确保问题得到理解，当你说“所有排列”时，你有没有弄清楚你在谈论多少个排列？

让我们看一下这个案例，共有三行：

一个 | d

乙 | e

c | F

如果您在谈论每一行中的配对，我们可以保持第一列固定并仅置换第二列。反转对很容易。对于所有排列，这是否是可接受的结果：

一个 | d | d | 电子| 电子| f | F

乙 | 电子| f | d | f | d | e

c | f | 电子| f | d | 电子| d

那是仅 3 个术语 (def) 的六个排列。它很快变得更糟。这是目标吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T15:29:57.927

是的，如果您有对象（数据选择，无论是字母、单词还是文本）。您将数量乘以（数量-1），即 IE 40*39

现在在您的示例中，如果说 JohnClaire 和 ClaireJohn 算作重复并且必须消除一个，那么数学结果应该是。(数量 * 数量 -1)/(2)。结果应该是 780。

这完全取决于约翰克莱尔和克莱尔约翰的例子是否被认为是相同的。

我希望我有代码来列出这个场景，无论是使用文本还是数字。

# mysql - 检索日期中给定年份的所有 ORM 记录

> ID：14966039
> 
> 赞同：0
> 
> 时间：2013-02-19T19:44:43.500
> 
> 标签：mysql, date, search, orm, kohana

所以我有一个简单的模型，它有一个`date`属性，它作为 MySQL`DATE`值（即`2013-02-19`）存储在数据库中。

检索日期为 2012 年的所有记录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:22:47.640

[您可以使用 ORM 查询生成器和DB::expr()](http://kohanaframework.org/3.3/guide-api/DB#expr)方法获取 2012 年的所有记录：

```
$year = 2012;

$my_models = ORM::factory('MyModel')
        ->where(DB::expr('YEAR(`date`)'), '=', $year)
        ->find_all();

// $my_models will be a Database_Result object
// To get an array of ORM row objects, simply:
$my_models_rows = $my_models->as_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:57:02.003

```
SELECT * FROM table_name WHERE YEAR(date_column) >= 2012; 
```

# jquery - 使用 jQuery 的快速订单表单

> ID：14966041
> 
> 赞同：0
> 
> 时间：2013-02-19T19:44:47.537
> 
> 标签：jquery, forms

我们正在尝试创建一个快速订单表单，客户在其中输入项目 SKU 及其数量，然后向下跳到下一行并执行相同操作。在选择数量输入后，我们需要让 jQuery 对我们的数据库进行检查，以确保这是一个真正的 SKU，并以成功或失败消息响应客户端。我们查看了各种代码，并通过添加新行和检查单个输入找到了那些可以工作的代码，但是我们找不到也无法编写同时支持两者的代码。不确定我们是否可以允许输入的名称属性使用“name[]”，或者它是否需要一个集合名称、“name_1”、“name_2”等。如果我们使用 name[]，如何调用数据库知道使用哪个 inut 字段来获取变量。

任何帮助是极大的赞赏。请在下面查看我们的代码：

HTML：

```
<table id="mytable" width="300" border="1" cellspacing="0" cellpadding="2">
  <tbody>
   <tr>
    <td colspan="2">Quick Order</td>
   </tr>
  <tr class="person">
     <td><input type="text" name="name[]" class="nameClass" placeholder="Item ID" /></td>
     <td><input type="text" name="qty[]" class="qtyClass" placeholder="QTY" /></td>
  </tr>
  <tr class="person">
     <td><input type="text" name="name[]" class="nameClass" placeholder="Item ID" /></td>
     <td><input type="text" name="qty[]" class="qtyClass" placeholder="QTY" /></td>
  </tr>
 </tbody>
 </table> 
```

Javascript：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#mytable tbody>tr:last .nameClass").change(function() {
      $('#mytable tbody>tr:last').clone(true).insertAfter('#mytable tbody>tr:last').hide().fadeIn(500);
      $('#mytable tbody>tr:last .nameClass').val('');
      return false;
    });  // change Function

    $('.nameClass').blur(item_check);
    //});

}); // doc ready

function item_check(){  
    var itemid = $('.nameClass').val();
    //console.log(itemid);
    jQuery.ajax({
     type: "POST",
     url: "checkItem.php",
     data: 'itemid='+ itemid,
     cache: false,
     success: function(response){
        if(response == 1){
            $('.nameClass').css('border', '3px #C33 solid');    
        }else{
            $('.nameClass').css('border', '3px #090 solid');
        }

    }
});
} // end function
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:13:29.740

> 不确定我们是否可以允许输入的名称属性使用“name[]”，或者它是否需要一个集合名称、“name_1”、“name_2”等。如果我们使用 name[]，如何调用数据库知道使用哪个 inut 字段来获取变量。

通常，当您将事件附加到输入时，使用“this”变量很容易识别有问题的输入。你甚至不需要知道输入的名称。

此外，由于您正在处理可变数量的行，您可能应该查看 [jQuery 的 on() 方法](http://api.jquery.com/on/)来处理事件。例如（[jsfiddle 演示](http://jsfiddle.net/RAsHm/)）：

```
var my_table = $('#mytable');

// Whenever the last .nameClass input in the table gains focus, clone that row
my_table.on('focus', '.nameClass:last', function () {
    var input = $(this);
    var new_row = input.closest('tr').clone();
    $('input', new_row).val(''); // set blank input values for the cloned row
    $('tbody', my_table).append(new_row);
});

// When a .nameClass input loses focus, check that the SKU in it (if any) is valid
my_table.on('blur', '.nameClass', function () {
    var input = $(this);
    var itemid = $.trim(input.val());
    if (itemid) {
        // Replace demo code with appropriate $.ajax call
        if (itemid == 'fail') {
            input.css('border', '3px #C33 solid');
        } else {
            input.css('border', '3px #090 solid');
        }
    }
}); 
```

# php - php 访问一个全局类

> ID：14966050
> 
> 赞同：0
> 
> 时间：2013-02-19T19:45:55.283
> 
> 标签：php

这一直让我发疯（喝大量的咖啡和通宵工作无济于事）我想从我在应用程序中的任何位置访问课程。我在我的索引页面中实例化类（它会自动加载我的库/类）但似乎我无法获得对它的全局访问。这是我的索引页：

```
function __autoload($class)
{
    require LIBS . $class .'.php';
}

$Core = new Core($server, $user, $pass, $db); 
```

这会完美地自动加载我的 Lib/类，然后我实例化我的核心（这是在我的 Lib/core.php 中自动加载的）

然后在我的核心中创建通常的数据库连接，获取并检查 URL 以及实例化几个类（自动加载的类）的位置，我创建一个 __construct，这就是我要实例化模板类的位置。我希望在我的任何控制器和模型中访问该类的全局访问权限。

```
class Core {

    function __construct(DATABASE VARIABLES IN HERE)
    {
        $this->Template = new Template();
    }

} 
```

好的，所以我想我可以通过在父模型和父控制器中执行以下操作来访问模板对象：

```
class Controller
{

    public $Core;

    function __construct()
    {
        global $Core;
        $this->Core = &$Core;
    }
} 
```

控制器是父级扩展了我所有的控制器，因此我假设我可以写`$this->Core->Template->get_data();`来访问模板方法？这似乎会引发错误。

我确定这一定是我忽略的一些简单的事情，如果有人能帮我一把，那就太好了。这个问题快把我逼疯了。

在我的 __construct 中，我的子控制器中还有一个旁注，我构造了 Parent`parent::_construct();`

错误似乎是`Notice: Trying to get property of non-object`and `Fatal error: Call to a member function get_data() on a non-object`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:49:02.467

```
class Controller
{

    public $Core;

    function __construct(Core $core)
    {
        $this->Core = $core;
    }
}

class ControllerChild extends Controller {
    function __construct(Core $core, $someOtherStuff){
      parent::__construct($core) ;
      //And your $this->Core will be inherited, because it has public access
    }
} 
```

*   `&`注意：处理对象时不必使用符号。对象通过引用自动传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:51:15.430

您可以创建`Core`一个`singleton`并实现一个静态函数来接收指向该对象的指针。

```
define ('USER', 'username');
define ('PASS', 'password');
define ('DSN', 'dsn');

class Core {

  private static $hInstance; 

  public static function getInstance() { 
    if (!(self::$hInstance instanceof Core)) {
        self::$hInstance = new Core(USER, PASS, DSN);
    } 

    return self::$hInstance; 
  }

  public function __construct($user, $pass, $dsn) {
     echo 'constructed';
  }
 } 
```

然后在您的控制器中，您可以使用：

```
$core = Core::getInstance(); 
```

哪个应该输出`constructed`。

**编辑**

更新以演示如何通过带输出的静态函数进行构造。

# excel - 部分匹配没有 vba

> ID：14966051
> 
> 赞同：0
> 
> 时间：2013-02-19T19:45:56.777
> 
> 标签：excel

寻找一个 excel 公式，它将部分匹配两个充满名称（字符串）的列，其中包含可调整数量的被视为匹配的字符。例如，一个单词中有 4 个或 5 个相同的字符是匹配的，但我想调整这个公式。例如

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T10:38:56.263

您可以使用一些功能。您可以使用诸如 Match 和 VLookup 函数之类的函数

```
VLOOKUP(lookup_value,table_array,col_index_num,range_lookup)

MATCH(lookup_value, lookup_array, [match_type]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T05:58:50.670

如果你基本上想要一个模糊的 vlookup，有一个插件可以提供这个。Excel 的 PowerUps 加载项在 Excel 2003 到 2013 中工作。它有一个名为 pwrVLOOKUP 的函数，可以进行模糊 vlookup，其操作与 vlookup 基本相同，如果你愿意，只是模糊。此处的页面上发布了一个示例：http: [//officepowerups.com/2013/10/23/fuzzy-vlookup-in-excel/](http://officepowerups.com/2013/10/23/fuzzy-vlookup-in-excel/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T16:01:56.700

只要您正在寻找精确匹配，VLOOKUP 就很棒。TRUE / FALSE 参数并没有真正达到您认为它服务的目的。当你在寻找非黑即白的东西时，你需要一些模糊的逻辑。

VLOOKUP 不足的一个简单示例：

*   歌曲名称 A =“贝多芬：费德里奥 op.72”
*   歌曲名称 B = “贝多芬：费德里奥作品 72”

微软发布了一个免费的 Excel 插件（与最新版本兼容），可以实现模糊的 vlook up'ing。在此处获取文件（加载项 + 文档 + 示例）：

> > [http://www.microsoft.com/en-us/download/details.aspx?id=15011](http://www.microsoft.com/en-us/download/details.aspx?id=15011)

它默认导出匹配度，因此您可以从那里使用一些参数。

# bash - 从 shell 关闭所有持有给定端口的进程

> ID：14966064
> 
> 赞同：1
> 
> 时间：2013-02-19T19:46:49.020
> 
> 标签：bash

我正在尝试使我一次又一次面临的一项工作自动化。有些端口有时没有被以前的工作正确关闭..

假设端口 5000,5001

我想做的是看看这些端口是否打开

并杀死这些端口，如果它们是开放的

所以现在，我正在做

```
lsof -i :5000 
```

和

```
 kill -9 pid1
    kill -9 pid2 
```

等等..

有没有办法将 5000 和 5001 作为参数传递并自动执行此过程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:55:00.610

如果您想在使用它时使其自动化，请执行以下操作。

创建一个 bash 脚本，例如将其命名为 'killMyPorts' 并添加以下内容：

```
#!/bin/bash
kill -9 `lsof -i :"${1}" | awk '{if (NR!=1) {print $2}}'` 
```

一旦你使脚本可执行（chmod u+x），你可以按如下方式执行它：

```
./killMyPorts 5000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:49:46.157

`fuser`可以为您完成这项工作。

```
kill_port_users() {
  for port; do
    fuser -n tcp -k "$port"
  done
}

kill_port_users 5000 5001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T19:57:01.717

你有没有尝试过

```
kill -9 `lsof -i :5000` 
```

或者

```
kill -9 $(lsof -i :5000) 
```

# grails - 部署在 JBoss 上的 grails 应用程序给出 404 状态资源未找到

> ID：14966066
> 
> 赞同：1
> 
> 时间：2013-02-19T19:47:06.740
> 
> 标签：grails, jboss, web.xml

在 JBoss 4.2 上成功部署 grails 战争（遵循所有黑客使其工作）

```
INFO  [org.jboss.web.tomcat.service.TomcatDeployer] deploy, ctxPath=/hello-0.1, warUrl=.../tmp/deploy/tmp2535731769294056658hello-0.1-exp.war/
WARN  [javax.enterprise.resource.webcontainer.jsf.config] Unable to process deployment descriptor for context '/hello-0.1' 
```

但

```
http://myhostname:8080/hello-0.1/ 
```

给出 404 错误。我尝试了许多不同的路径来访问资源，但无济于事

```
message /hello-0.1/
description The requested resource (/hello-0.1/) is not available. 
```

它在这里使用 grails run-app 在本地运行良好：

```
http://localhost:8080/hello/hello/index 
```

我有一种感觉，我需要在 web.xml 或 jboss-web.xml 中设置它

```
<jboss-web>
        <context-root>hello-0.1</context-root>  
        <loader-repository>
            com.hello:archive=hello-0.1.war
            <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
        </loader-repository>
</jboss-web> 
```

日志

```
2013-02-25 06:09:26,179 INFO  [org.jboss.web.tomcat.service.TomcatDeployer] deploy, ctxPath=/hello, warUrl=.../tmp/deploy/tmp8355669251173232249hello-exp.war/
2013-02-25 06:09:26,179 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] AbstractWebContainer.parseWebAppDescriptors, Begin
2013-02-25 06:09:26,180 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] Creating ENC using ClassLoader: java.net.FactoryURLClassLoader@1731334
2013-02-25 06:09:26,180 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] ..org.jboss.mx.loading.UnifiedClassLoader3@b98fe1{ url=file:../jboss-4.2.3.GA/server/default/tmp/deploy/tmp8355669251173232249hello-exp.war/ ,addedOrder=31}
2013-02-25 06:09:26,180 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] ..org.jboss.system.server.NoAnnotationURLClassLoader@1dd7056
2013-02-25 06:09:26,180 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] ..sun.misc.Launcher$AppClassLoader@cac268
2013-02-25 06:09:26,180 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] ..sun.misc.Launcher$ExtClassLoader@1a16869
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] Unable to retrieve orbjavax.management.InstanceNotFoundException: jboss:service=CorbaORB is not registered.
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] Linked java:comp/UserTransaction to JNDI name: UserTransaction
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] addEnvEntries
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkResourceEnvRefs
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkResourceRefs
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkMessageDestinationRefs
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkEjbRefs
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkEjbLocalRefs
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkServiceRefs
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] linkSecurityDomain
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] No security-domain given, using default: java:/jaas/other
2013-02-25 06:09:26,181 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] Linking security/securityMgr to JNDI name: java:/jaas/other
2013-02-25 06:09:26,182 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] AbstractWebContainer.parseWebAppDescriptors, End
2013-02-25 06:09:26,193 DEBUG [org.jboss.web.tomcat.service.TomcatDeployer] Using session cookies default setting
2013-02-25 06:09:26,453 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] ConfigureListener.contextInitialized(/hello)
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.displayConfiguration' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.validateXml' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.verifyObjects' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.forceLoadConfiguration' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enableHtmlTagLibValidator' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.preferXHTML' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.compressViewState' - ENABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.compressJavaScript' - ENABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.externalizeJavaScript' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.sendPoweredByHeader' - ENABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enableJSStyleHiding' - DISABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enableScriptsInAttributeValues' - ENABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.writeStateAtFormEnd' - ENABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enableLazyBeanValidation' - ENABLED
2013-02-25 06:09:26,454 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enabledLoadBundle11Compatibility' - DISABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enableRestoreView11Compatibility' - DISABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.serializeServerState' - DISABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.enableViewStateIdRendering' - ENABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.registerConverterPropertyEditors' - DISABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.disableUnicodeEscaping' - DISABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1021: [/hello] Configuration option 'com.sun.faces.developmentMode' - DISABLED
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'javax.faces.STATE_SAVING_METHOD' set to 'server'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'javax.faces.DEFAULT_SUFFIX' set to '.jsp'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'com.sun.faces.numberOfViewsInSession' set to '15'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'com.sun.faces.numberOfLogicalViews' set to '15'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'com.sun.faces.injectionProvider' set to 'org.jboss.web.jsf.integration.injection.JBossInjectionProvider'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'com.sun.faces.responseBufferSize' set to '1024'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'com.sun.faces.clientStateWriteBufferSize' set to '8192'
2013-02-25 06:09:26,455 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] JSF1018: [/hello] Configuration option 'com.sun.faces.expressionFactory' set to 'com.sun.el.ExpressionFactoryImpl'
2013-02-25 06:09:26,461 DEBUG [javax.enterprise.resource.webcontainer.jsf.config] No FacesServlet found in deployment descriptor - bypassing configuration 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:01:43.540

在本地，您似乎将上下文根配置为`/hello`. 当您部署到 JBoss 时，您`jboss-web.xml`是在告诉 JBoss`hello-0.1`使用`context-root`.

您需要使您的上下文根在两者中都匹配`Config.groovy`，这将具有`grails.app.context`（或`app.context`在`application.properties`）和`context-root`中`jboss-web.xml`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:51:19.657

您是否构建了战争并将其放在部署目录中？不需要黑客。来自文档：

**JBoss 4.2**

部署到 JBoss 4.2 很简单，只需启动 JBoss，然后将 WAR 文件放入 JBOSS_HOME/server/default/deploy 目录（或您要部署到的相关配置文件）。JBoss 将自动部署 Grails 应用程序，然后可以通过以下方式访问该应用程序：

`http://localhost:8080/myapp-0.1`

[http://grails.org/Deployment#JBoss%204.2](http://grails.org/Deployment#JBoss%204.2)

# ios - iOS - 如何正确缩放具有不同图像大小的 UIButton（如 Facebook 新闻提要）？

> ID：14966074
> 
> 赞同：2
> 
> 时间：2013-02-19T19:47:46.843
> 
> 标签：ios, image, uitableview, uibutton, scale

我正在尝试为应用程序复制 Facebook 的新闻提要，并将具有应显示的图像。图像将有多种尺寸，那么我应该如何正确缩放它们以适应单元格而不看起来很奇怪？

该单元格包含一个 UIButton，然后将图像设置为它。我正在使用一个按钮，因为我想在按下它时打开全尺寸图像。如果用点击手势更改为 UIImageView 更好，我也可以这样做，只是认为按钮更简单。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:04:18.913

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {

UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext();
return newImage; 
```

}

使用它根据大小缩放图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:35:40.123

我假设您将使用 a`UITableView`来显示这些图像。

这将在您滚动表格视图时产生问题，因为图像会随着行的加载而调整大小，并且需要太多的处理时间，从而导致滚动不流畅。

有两种方法可以解决这个问题：

1.  在创建全尺寸图像时创建适当大小的图像，并以这种方式将它们保存到磁盘。如果这些是静态照片，那么您将在图像编辑程序（即 Photoshop）中创建缩略图，并将它们与全分辨率照片一起包含在内。如果照片是动态下载/生成的，那么您需要在保存全尺寸图像时创建较小的版本。这实际上比听起来更复杂，如果这是您需要走的路线，我可以提供一些代码。关键是在加载 tableview 行时您不需要调整图像大小，从而节省**大量**时间。

2.  在后台线程中调整图像大小，并在处理完成时将它们添加到表视图行中。这样做的例子很多，包括来自 Apple 的以下示例项目： [https ://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

最好的表现是两者都做，但根据我的经验，真正需要的只是其中之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T04:26:59.257

您可以`[CGAffineTransformMakeScale][1]`在 Quartz 2D 框架中非常轻松地缩放视图。

```
#define X_SCALE_FACTOR 2.5
#define Y_SCALE_FACTOR 2.5
UIImageView *imageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"myimage.png"]];
imageView.transform = CGAffineTransformMakeScale(X_SCALE_FACTOR, Y_SCALE_FACTOR); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T22:39:55.223

为什么不通过 UIImageView 的内置函数处理所有图像大小，然后在它们上面放置一个与它们相同大小（框架）的透明按钮......（*要使 UIButton 透明，只需清除背景颜色和按钮类型`Custom`（我认为默认是圆角矩形什么的）

另一方面，如果您只想检测对 UIImageView 的点击而不在图像上放置透明的 UIButton，只需使用 touchesBegan 并检测触摸是否在数组中的 UIImage 上。

# css - 覆盖引导浮动和边距

> ID：14966077
> 
> 赞同：0
> 
> 时间：2013-02-19T19:47:51.117
> 
> 标签：css, ruby-on-rails-3, twitter-bootstrap

我有一个如下所示的页面![在此处输入图像描述](../Images/8cdd0cfb4a157cc1047937d0efebc36e.png)。

现在我正在尝试通过使用 twitter boostrap 来复制它`<div class= hero-unit>`。我做了以下事情：

```
<div class="center hero-unit">
  <table class="form">
    <tr>
      <td>
        <%= form_for(@user) do |f| %>
            <% if @user.errors.any? %>
                <div id="error_explanation" xmlns="http://www.w3.org/1999/html">
                  <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>

                  <ul>
                    <% @user.errors.full_messages.each do |msg| %>
                        <li><%= msg %></li>
                    <% end %>
                  </ul>
                </div>
            <% end %>
            </td>
            </tr>
            <tr>
              <td class="th" colspan="2">Login Details</td>
            </tr>
            <tr>
              <% if @user.id %>
                  <td><%= f.label :id %></td>
                  <td><%= @user.id %></td>

              <% end %>
            </tr>
            <tr>
              <td><%= f.label :current_sign_in_at, "Sign in time" %></td>
              <td><%= @user.current_sign_in_at.nil? ? "Not signed in" : @user.current_sign_in_at.strftime('%d-%b-%Y %H:%M:%S') %></td>

            </tr>
            <tr>
              <td> <%= f.label :first_name %>
                <br/></td>
              <td><%= @user.first_name %></td>
            </tr>
            <tr>
              <td><%= f.label :last_name %>
                <br/></td>
              <td><%= @user.last_name %></td>
            </tr>
            <tr>
              <td><%= f.label :email %>
                <br/></td>
              <td><%= @user.email %></td>
            </tr>
            <% if can? :manage, :all %>
                <tr>
                  <td class="th" colspan=2>Roles and Privileges</td>
                </tr>
                <tr>
                  <% for role in Role.all %>
                      <td><%= role.name %><%= check_box_tag "user[role_ids][]", role.id, @user.roles.include?(role), :disabled => true %></td>
                  <% end %>
                </tr>
            <% end %>
            <tr>
              <td>
                <%= link_to 'Edit', edit_user_path(@user), :class => 'btn btn-medium' %> |
                <%= link_to 'Back', usermanagement_path, :class => 'btn btn-medium' %>
              </td>
            </tr>
                </table>
            <table class="form" >
              <% if @user == current_user %>
                  <caption><b>Previous Orders</b></caption>
                  <thead>
                  <tr>
                    <th>Order No:</th>
                    <th>Order Date</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th>View Order</th>
                  </tr>
                  </thead>
                  <% current_user.orders.each do |order| %>
                      <tr>
                        <td style="width: 10px;"><%= order.id %></td>
                        <td><%= order.created_at.to_s(:short) %></td>
                        <td><%= order.quantity %></td>
                        <td><%= number_to_currency(order.total_price, :unit => "£") %></td>
                        <td><%= link_to 'View Order',(order)%></td>
                      </tr>
                  <% end %>
                  <% if current_user.orders.empty? %>
                      <tr>
                        <td>No bookings found</td>
                      </tr>
                  <% end %>
                  </table>

                </div>
        <% end %>
<% end %> 
```

上述更改输出以下内容：

![在此处输入图像描述](../Images/91ade3cab98339e99639750a79a0ac27.png)

所以我的问题是我怎样才能让它与`login details`. 我确实尝试`<table style="float: left; margin-left: 20px;">`在`Previous Orders`桌子上做以下事情。为什么这不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:11:32.160

我试图模拟您在下面显示的表格。由于您使用的是 Bootstrap，我建议您查看[响应式表格](http://elvery.net/demo/responsive-tables/)。还有各种示例说明如何为较小的屏幕创建和表示表格。
这是具有相同[Jsfiddle 和表的 jsfiddle](http://jsfiddle.net/shail/AwyjQ/6/show/) ![表格截图](../Images/f5021be9d90148771ceb2de9069585f0.png)

```
<div class="hero-unit">
<div class="row">
    <div class="span4">
        <table class="table table-condensed">
            <thead>
                <tr>
                    <th>Login Details</th>
                </tr>
            </thead>
            <tbody>
                <tr class="success">
                    <td>ID</td>
                    <td>1</td>
                </tr>
                <tr class="error">
                    <td>Sign in Time</td>
                    <td>01/04/2013 11:35am</td>
                </tr>
                <tr class="warning">
                    <td>First Name</td>
                    <td>Jack</td>
                </tr>
                <tr class="info">
                    <td>Last Name</td>
                    <td>Sparrow</td>
                </tr>
                <tr class="warning">
                    <td>Email Id</td>
                    <td>jack@sparrow.com</td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="span8">
        <table class="table table-condensed">
            <thead>
                <tr>
                    <th>Order no</th>
                    <th>Order Date</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th>View order</th>
                </tr>
            </thead>
            <tbody>
                <tr class="success">
                    <td>1</td>
                    <td>TB - Monthly</td>
                    <td>01/04/2012</td>
                    <td>Approved</td>
                    <td>View Order</td>
                </tr>
                <tr class="error">
                    <td>2</td>
                    <td>TB - Monthly</td>
                    <td>02/04/2012</td>
                    <td>Declined</td>
                </tr>
                <tr class="warning">
                    <td>3</td>
                    <td>TB - Monthly</td>
                    <td>03/04/2012</td>
                    <td>Pending</td>
                </tr>
                <tr class="info">
                    <td>4</td>
                    <td>TB - Monthly</td>
                    <td>04/04/2012</td>
                    <td>Call in to confirm</td>
                </tr>
            </tbody>
        </table>
    </div>
</div> 
```

# php - 如何设置单个 wordpress 小部件的样式

> ID：14966091
> 
> 赞同：-2
> 
> 时间：2013-02-19T19:48:44.360
> 
> 标签：php, html, css, wordpress

我在[http://coconutwaterblog.com](http://coconutwaterblog.com)中使用时事通讯插件。但我想将标题背景设置为黄色的单个小部件的样式。谁能建议我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:41:21.760

根据小部件的开发方式，它可以内联而不是通过 CSS 推送样式。

使用开发人员工具（例如 Firebug）来确定当前样式的来源，以确定需要更改它们以达到预期结果的位置。

如果可以，您可以更改主题样式表以包含您想要对指定元素执行的操作。

查看您的网站后，我无法确定您尝试更改哪个小部件。如果 ti 是“来自博客”小部件，则 CSS 将如下所示：

```
#omc-sidebar.omc-right ul.xoxo li#pages-2.omc-widget h3.widgettitle {background:yellow;} 
```

而且，在查看页面上的标记之后，这些属性似乎在文档本身的第 80 行出现，这意味着您将无法使用样式表覆盖它们。您将不得不在主题本身的插件中更改代码。

# itextsharp - 展平注释

> ID：14966099
> 
> 赞同：1
> 
> 时间：2013-02-19T19:49:18.777
> 
> 标签：itextsharp

这是我需要实现的。

我从我的客户那里收到了一些 pdf，其中一些包含印章、注释等......在 pdf 中。

所以我需要展平这些注释，使它们成为 pdf 的一部分。

我知道您可以使用 itextSharp 展平表单字段，但不能直接展平注释。

有人告诉我要实现这一点，我需要将注释的外观添加到内容流中，例如使用 PdfStamper，然后丢弃注释。

有人知道实现这一点会很好。

谢谢

# ruby-on-rails-3 - 我可以将逻辑添加到 rails 3 隐藏字段吗？

> ID：14966100
> 
> 赞同：0
> 
> 时间：2013-02-19T19:49:30.387
> 
> 标签：ruby-on-rails-3, logic, hidden-field

我有一个提交数据的表单，我想根据是否填写所有其他字段来自动设置一个字段。如果它们都已完成，则该字段将为“完成”，否则将设置为“草稿”。

所以我有这样的隐藏字段：

```
<%= f.hidden_field :status, :value => "draft" %> 
```

使其默认为草稿。但是，我是否可以添加逻辑，说明如果所有其他字段都已填写，它将是“完整的”，如果是这样，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:13:49.263

假设您的模型名为 foo，以下是如何在客户端使用 jquery 执行此操作：

```
<script type='text/javascript'>
  $(document).ready(function() {
    $('input[name*="otherfields"]').on('change', function() {
      var othercount = 0;
      $('input[name*="otherfields"]').each(function() {
        if ( $(this).is(':checked') )
          othercount += 1;
      });
      if ( othercount == 2 ) 
        $('#foo_status').attr('checked',true)
      else
        $('#foo_status').attr('checked',false)
    });
  });
</script>

<%= check_box_tag :item1 , '1', false, :name=>'otherfields[1]' %>    
<%= check_box_tag :item2 , '2', false, :name=>'otherfields[2]' %>
<%= f.hidden_field :status, :value => "draft" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:54:54.780

是的，您可以在控制器中执行此操作。

假设表单将您引导至创建操作。

在控制器的创建动作中，您可以通过查看`params`然后使用语句在保存之前`if`为其分配适当的值来检查所有字段是否已完成`status`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:48:29.627

假设当状态改变时不需要发生其他客户端事件，最好将这种业务逻辑作为回调放置在模型中，例如（替换`Foo`并`fieldx`使用您的模型和字段名称）：

```
class Foo < ActiveRecord::Base

  before_save :default_status

  def default_status
    if field1 && field2 && field3 && field4
      self.status = 'completed'
    else
       self.status = 'draft'
    end
  end

end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T19:53:37.040

这将使用 javascript，可能是 jQuery 来完成。但是，为什么要这样设计呢？你不能在服务器端这样做吗？

# bash - 最小输入命令行计算器 - tcsh vs bash

> ID：14966102
> 
> 赞同：5
> 
> 时间：2013-02-19T19:49:33.817
> 
> 标签：bash, shell, unix, alias, tcsh

我喜欢有一个方便的命令行计算器。要求是：

*   支持所有基本算术运算符：+、-、/、*、^ 用于求幂，加上括号用于分组。
*   需要最少的输入，我不想调用一个程序与之交互然后要求它退出。
*   理想情况下，除了表达式本身之外，只应在命令行中输入一个字符和一个空格。
*   它应该知道如何忽略数字中的逗号和美元（或其他货币符号），以便我从网络上复制/粘贴，而不必担心在将每个数字粘贴到计算器之前必须清理它
*   容忍空白，存在或缺少空格不应导致错误
*   无需在表达式中引用任何内容来保护它免受 shell 的影响 - 再次是为了减少输入

由于 tcsh 支持别名位置参数，并且别名扩展先于除历史扩展之外的所有其他扩展，因此在 tcsh 中实现接近我理想的东西是直截了当的。

我用这个：

```
alias C 'echo '\''\!*'\'' |tr -d '\'',\042-\047'\'' |bc -l' 
```

现在我可以用最少的输入做如下的事情：

```
# the basic stuff:
tcsh>  C 1+2
3

# dollar signs, multiplication, exponentiation:
tcsh>  C $8 * 1.07^10
15.73721085831652257992

# parentheses, mixed spacing, zero power:
tcsh>  C ( 2+5 ) / 8 * 2^0
.87500000000000000000

# commas in numbers, no problem here either:
tcsh>  C 1,250.21 * 1.5
1875.315 
```

如您所见，无需引用任何内容即可使所有这些工作。

现在问题来了。尝试在不支持参数别名的 bash 中做同样的事情，迫使我将计算器实现为 shell 函数并使用“$@”传递参数

```
function C () { echo  "$@" | tr -d ', \042-\047' | bc -l; } 
```

这以各种方式中断，例如：

```
# works:
bash$  C 1+2
3

# works:
bash$  C 1*2
2

# Spaces around '*' lead to file expansion with everything falling apart:
bash$  C  1 * 2
(standard_in) 1: syntax error
(standard_in) 1: illegal character: P
(standard_in) 1: illegal character: S
(standard_in) 1: syntax error
...

# Non-leading parentheses seem to work:
bash$  C  2*(2+1)
6

# but leading-parentheses don't:
bash$  C  (2+1)*2
bash: syntax error near unexpected token `2+1' 
```

当然，在表达式周围添加引号可以解决这些问题，但与原始要求背道而驰。

我理解*为什么*事情会在 bash 中中断。我不是在寻找解释。相反，我正在寻找一种不需要手动引用参数的*解决方案。*我对 bash 向导的问题是有什么方法可以使 bash 支持方便的最小打字计算器别名。不需要引用，就像 tcsh 一样？这是不可能的吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T01:05:17.197

如果您准备打字`C` `Enter`而不是`C` `Space`，那么天空就是极限。该`C`命令可以采用您想要的任何形式进行输入，与 shell 语法无关。

```
C () {
  local line
  read -p "Arithmetic: " -e line
  echo "$line" | tr -d \"-\', | bc -l
} 
```

在 zsh 中：

```
function C {
  local line=
  vared -p "Arithmetic: " line
  echo $line | tr -d \"-\', | bc -l
} 
```

* * *

[`noglob`在 zsh 中，您可以使用修饰符](http://zsh.sourceforge.net/Doc/Release/Shell-Grammar.html#index-noglob)关闭特定命令的参数的通配。它通常隐藏在别名中。这可以防止`*^()`begin 字面解释，而不是引号或`$`.

```
quickie_arithmetic () {
  echo "$*" | tr -d \"-\', | bc -l
}
alias C='noglob quickie_arithmetic' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:27:20.503

至少可以使用'set -f'来防止 * 的扩展（在某人的[博客文章之后](http://blog.edwards-research.com/2011/05/preventing-globbing/)：

```
alias C='set -f -B; Cf '
function Cf () { echo  "$@" | tr -d ', \042-\047' | bc -l; set +f; }; 
```

在别名中关闭它，在计算之前，然后再打开

```
$ C 2 * 3
6 
```

* * *

我下载了 bash 源代码并仔细查看。括号错误似乎直接发生在命令行解析期间，在运行任何命令或扩展别名之前。并且没有任何标志来关闭它。所以不可能从 bash 脚本中做到这一点。

这意味着，是时候带上重型武器了。在解析命令行之前，使用 readline 从标准输入读取。因此，如果我们拦截对 readline 的调用，我们就可以对命令行做任何我们想做的事情。

不幸的是，bash 与 readline 静态链接，因此无法直接拦截调用。但至少 readline 是一个全局符号，所以我们可以使用 dlsym 获取函数的地址，并且使用该地址我们可以在 readline 中插入任意指令。

直接修改readline是为了减少错误，如果在不同的bash版本之间改变了readline，所以我们修改了调用readline的函数，导致如下方案：

1.  使用 dlsym 定位 readline
2.  将 readline 替换为我们自己的函数，该函数使用当前堆栈在第一次调用时定位调用 readline (yy_readline_get) 的函数，然后恢复原始 readline
3.  修改 yy_readline_get 以调用我们的包装函数
4.  在包装函数内：如果输入以“C”开头，则用没有问题的符号替换括号

用 C 语言为 amd64 编写，我们得到：

```
#include <string.h>
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#ifndef __USE_GNU
#define __USE_GNU
#endif
#ifndef  __USE_MISC
#define  __USE_MISC
#endif
#include <dlfcn.h>
#include <unistd.h>
#include <sys/mman.h>
#include <errno.h>

//-----------Assembler helpers----------

#if (defined(x86_64) || defined(__x86_64__))

    //assembler instructions to read rdp, which we need to read the stack
#define MOV_EBP_OUT "mov %%rbp, %0"
    //size of a call instruction 
#define RELATIVE_CALL_INSTRUCTION_SIZE 5

#define IS64BIT (1)

    /*
      To replace a function with a new one, we use the push-ret trick, pushing the destination address on the stack and let ret jump "back" to it
      This has the advantage that we can set an additional return address in the same way, if the jump goes to a function

    This struct corresponds to the following assembler fragment:          
     68       ????  push                   <low_dword  (address)>
     C7442404 ????  mov DWORD PTR [rsp+4], <high_dword (address) )
     C3             ret
    */
typedef struct __attribute__((__packed__)) LongJump { 
  char push; unsigned int destinationLow;
  unsigned int mov_dword_ptr_rsp4; unsigned int destinationHigh;
  char ret;
//  char nopFiller[16];
} LongJump;

void makeLongJump(void* destination, LongJump* res) {
  res->push = 0x68;
  res->destinationLow = (uintptr_t)destination & 0xFFFFFFFF;
  res->mov_dword_ptr_rsp4 = 0x042444C7;
  res->destinationHigh = ((uintptr_t)(destination) >> 32) & 0xFFFFFFFF;
  res->ret = 0xC3;
}

//Macros to save and restore the rdi register, which is used to pass an address to readline (standard amd64 calling convention)
typedef unsigned long SavedParameter;
#define SAVE_PARAMETERS SavedParameter savedParameters;  __asm__("mov %%rdi, %0": "=r"(savedParameters)); 
#define RESTORE_PARAMETERS __asm__("mov %0, %%rdi": : "r"(savedParameters)); 

#else
#error only implmented for amd64...
#endif

//Simulates the effect of the POP instructions, popping from a passed "stack pointer" and returning the popped value
static void * pop(void** stack){
  void* temp = *(void**)(*stack);
  *stack += sizeof(void*); 
  return temp;
}

//Disables the write protection of an address, so we can override it
static int unprotect(void * POINTER){
  const int PAGESIZE = sysconf(_SC_PAGE_SIZE);;
  if (mprotect((void*)(((uintptr_t)POINTER & ~(PAGESIZE-1))), PAGESIZE, PROT_READ | PROT_WRITE | PROT_EXEC)) {
    fprintf(stderr, "Failed to set permission on %p\n", POINTER);
    return 1;
  }
  return 0;
}

//Debug stuff
static void fprintfhex(FILE* f, void * hash, int len) {
  for (int i=0;i<len;i++) {
    if ((uintptr_t)hash % 8 == 0 && (uintptr_t)i % 8 == 0 && i ) fprintf(f, " ");
    fprintf(f, "%.2x", ((unsigned char*)(hash))[i]);
  }
  fprintf(f, "\n");
}

//---------------------------------------

//Address of the original readline function
static char* (*real_readline)(const char*)=0; 

//The wrapper around readline we want to inject.
//It replaces () with [], if the command line starts with "C "
static char* readline_wrapper(const char* prompt){
  if (!real_readline) return 0;
  char* result = real_readline(prompt);
  char* temp = result; while (*temp == ' ') temp++;
  if (temp[0] == 'C' && temp[1] == ' ') 
    for (int len = strlen(temp), i=0;i<len;i++) 
      if (temp[i] == '(') temp[i] = '[';
      else if (temp[i] == ')') temp[i] = ']';
  return result;
}

//Backup of the changed readline part
static unsigned char oldreadline[2*sizeof(LongJump)] = {0x90};
//A wrapper around the readline wrapper, needed on amd64 (see below)
static LongJump* readline_wrapper_wrapper = 0;

static void readline_initwrapper(){
  SAVE_PARAMETERS
  if (readline_wrapper_wrapper) { fprintf(stderr, "ERROR!\n"); return; }

  //restore readline
  memcpy(real_readline, oldreadline, 2*sizeof(LongJump)); 

  //find call in yy_readline_get
  void * frame;
  __asm__(MOV_EBP_OUT: "=r"(frame)); //current stackframe
  pop(&frame); //pop current stackframe (??)
  void * returnToFrame = frame;
  if (pop(&frame) != real_readline) {  
    //now points to current return address
    fprintf(stderr, "Got %p instead of %p=readline, when searching caller\n", frame, real_readline); 
    return; 
  }
  void * caller = pop(&frame); //now points to the instruction following the call to readline
  caller -= RELATIVE_CALL_INSTRUCTION_SIZE; //now points to the call instruction
  //fprintf(stderr, "CALLER: %p\n", caller);
  //caller should point to 0x00000000004229e1 <+145>:   e8 4a e3 06 00  call   0x490d30 <readline>
  if (*(unsigned char*)caller != 0xE8) { fprintf(stderr, "Expected CALL, got: "); fprintfhex(stderr, caller, 16); return; }

  if (unprotect(caller)) return;

  //We can now override caller to call an arbitrary function instead of readline.
  //However, the CALL instruction accepts only a 32 parameter, so the called function has to be in the same 32-bit address space
  //Solution: Allocate memory at an address close to that CALL instruction and put a long jump to our real function there
  void * hint = caller;
  readline_wrapper_wrapper = 0;
  do { 
    if (readline_wrapper_wrapper) munmap(readline_wrapper_wrapper, 2*sizeof(LongJump));
    readline_wrapper_wrapper = mmap(hint, 2*sizeof(LongJump), PROT_EXEC | PROT_READ | PROT_WRITE, MAP_ANONYMOUS|MAP_PRIVATE, -1, 0); 
    if (readline_wrapper_wrapper == MAP_FAILED) { fprintf(stderr, "mmap failed: %i\n", errno);  return; }
    hint += 0x100000;
  } while ( IS64BIT && ( (uintptr_t)readline_wrapper_wrapper >= 0xFFFFFFFF + ((uintptr_t) caller) ) ); //repeat until we get an address really close to caller
  //fprintf(stderr, "X:%p\n", readline_wrapper_wrapper);
  makeLongJump(readline_wrapper, readline_wrapper_wrapper); //Write the long jump in the newly allocated space

   //fprintfhex(stderr, readline_wrapper_wrapper, 16);
   //fprintfhex(stderr, caller, 16);

  //patch caller to become call <readline_wrapper_wrapper>
  //called address is relative to address of CALL instruction
  *(uint32_t*)(caller+1) = (uint32_t) ((uintptr_t)readline_wrapper_wrapper - (uintptr_t)(caller + RELATIVE_CALL_INSTRUCTION_SIZE) ); 

   //fprintfhex(stderr, caller, 16);

   *(void**)(returnToFrame) = readline_wrapper_wrapper; //change stack to jump to wrapper instead real_readline (or it would not work on the first entered command)

   RESTORE_PARAMETERS
}

static void _calc_init(void) __attribute__ ((constructor));

static void _calc_init(void){
  if (!real_readline) {
    //Find readline
    real_readline = (char* (*)(const char*)) dlsym(RTLD_DEFAULT, "readline");
    if (!real_readline) return;
    //fprintf(stdout, "loaded %p\n", real_readline);
    //fprintf(stdout, "  => %x\n", * ((int*) real_readline));

    if (unprotect(real_readline)) { fprintf(stderr, "Failed to unprotect readline\n"); return; }
    memcpy(oldreadline, real_readline, 2*sizeof(LongJump)); //backup readline's instructions

    //Replace readline  with readline_initwrapper
    makeLongJump(real_readline, (LongJump*)real_readline); //add a push/ret long jump from readline to readline, to have readline's address on the stack in readline_initwrapper
    makeLongJump(readline_initwrapper, (LongJump*)((char*)real_readline + sizeof(LongJump) - 1)); //add a push/ret long jump from readline to readline_initwrapper, overriding the previous RET

  }
} 
```

这可以编译成一个拦截库：

```
gcc -g -std=c99 -shared -fPIC  -o calc.so -ldl calc.c 
```

然后在 bash 中加载：

```
gdb --batch-silent -ex "attach $BASHPID" -ex 'print dlopen("calc.so", 0x101)' 
```

现在，当加载使用括号替换扩展的先前别名时：

```
alias C='set -f -B; Cf '
function Cf () {  echo  "$@" | tr -d ', \042-\047' | tr [ '(' | tr ] ')' | bc -l; set +f; }; 
```

我们可以写：

```
$  C  1 * 2
  2
$  C  2*(2+1)
  6
$  C  (2+1)*2
  6 
```

* * *

更好的是，如果我们从 bc 切换到[qalculate](http://qalculate.sourceforge.net/)：

```
 alias C='set -f -B; Cf '
 function Cf () {  echo  "$@" | tr -d ', \042-\047' | tr [ '(' | tr ] ')' | xargs qalc ; set +f; }; 
```

然后我们可以这样做：

```
$ C e ^ (i * pi)
  e^(i * pi) = -1

$ C 3 c 
  3 * speed_of_light = approx. 899.37737(km / ms) 
```

# c++ - 在 Arduino 上拆分字符串

> ID：14966103
> 
> 赞同：0
> 
> 时间：2013-02-19T19:49:42.393
> 
> 标签：c++, c, arduino

我正在寻找一种在我的 Arduino 上拆分字符串的方法。我可以使用哪个库或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:16:24.440

[string.h 中定义的strtok](http://www.cplusplus.com/reference/cstring/strtok/)函数是否不适合您的目的？

# php - php在输入尝试后设置时间延迟

> ID：14966106
> 
> 赞同：0
> 
> 时间：2013-02-19T19:49:45.233
> 
> 标签：php

问题与蛮力攻击有关。如果用户输入了错误的密码，php 会在 mysql 中记录尝试的日期时间。如果密码不正确，我需要用户只能在一定时间（1-2 秒）后进行下一次尝试。据我了解 php sleep 不好，因为它不会阻止机器人发出请求？

什么是解决方案（在没有 php sleep 的情况下设置时间延迟）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:54:16.540

如果该用户的请求数很高，您可以在文件开头添加睡眠。可能为过去 24 小时内的每个失败请求增加 1 秒，或者如果该数字达到某个阈值则退出。

```
<?
//script to find when last requests were made
if($failed>2)
{
    sleep($failed+1);
}elseif($failed>10)
{
    exit;//or redirect
}
//the rest of the file

?> 
```

# css - Linking background images relative to the stylsheet

> ID：14966108
> 
> 赞同：1
> 
> 时间：2013-02-19T19:49:46.437
> 
> 标签：css

I'm coding this Wordpress site [http://searchanddevelop.ca/adv/](http://searchanddevelop.ca/adv/) where I have a stylesheet in which I frequently refer to external background images.

I don't want to hard link these images, but when I use relative links the Wordpress permalink structure breaks everything as it nests inner-pages inside directories (or pseudo-directories, I guess).

Click on a page in the URL I cited and you'll see what I mean.

```
.area-heading {
    background: url('../../../images/titlechevron.png') no-repeat left;
    margin: 2px 0 11px 2px;
    height: 16px;
    } 
```

Also, if I link things relative to the domain root then when I move the site out of the test directory /adv/ and to its own domain, I expect all the background images will break.

What's the best way to link my images relatively here? I feel like I'm missing a core concept.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:07:05.597

With WordPress, the easiest way to keep your images intact is to put them into the theme folder - (where your style.css file is) - then, regardless of where you have the site installed, the images are going to be in the same place relative to the style.css file.

Generally, I create a folder called "images" and place this into my theme folder. Then to link to the images, I would be able to use (in the stylesheet) url('images/photo.jpg'), etc.

The theme file will then contain everything needed by the theme to display correctly- all your styling, images, & theme files are together.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:23:41.637

In an external style sheet, all relative urls are expected to be relative to the CSS document.

```
/styles/screen.css
/images/foo.png 
```

If screen.css wants to use foo.png as a background image, it would be referenced like so:

```
.foo {
    background: url(../images/foo.png);
} 
```

When you use relative URLs, you can't go around shuffling your CSS files without modifying the paths in those files.

It sounds like you are in need of a test environment where the structure of your assets is identical to that of your live site. Such an environment could be created by setting up a web server on your desktop machine (I personally use a virtual machine running unix on my desktop for my web server), but that is beyond the scope of this question. Setting up symbolic links to your assets in your "test" directory could also work.

# java - Java.io.FileNotFoundException 使用 File 对象

> ID：14966115
> 
> 赞同：2
> 
> 时间：2013-02-19T19:50:15.957
> 
> 标签：java, filenotfoundexception, java-io

```
File read = new File("Numbers.txt");
Scanner inputFile = new Scanner(read);

while(inputFile.hasNext())
{
    sum = inputFile.nextDouble() + sum;
    count++;
}

inputFile.close();//close the input file 
```

我正在尝试从文本文件中读取数据，`Numbers.txt`并且以下代码可以正常编译，但是`Java.io.FileNotFoundException`在程序运行时出现错误。我也试过输入完整的文件路径，但我可能做错了。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:10:50.077

确保您的文本文件在您的 java 文件所在的文件夹中，因为您使用了直接路径。并尝试此代码检查，如果仍然无法正常工作。

```
BufferedReader read = new BufferedReader(new FileReader("yourTextFile.txt"));
String line = read.readLine();

while(line !=null)
{
     System.out.println(line);
     line=read.readLine();
}
}catch(Exception ex)
{System.out.println(ex.getMessage());} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:04:15.520

尝试添加

```
System.out.println("Full path is " + read.getCanonicalPath()
                   + ", canRead=" + read.canRead()
                   + ", exists=" + read.exists()); 
```

然后看看你的文件系统上是否存在完整路径，根据`canRead`.

如果文件是符号链接，则`canRead`可能返回 true，因为符号链接是可解析的，即使链接指向的文件不可读。要正确处理符号链接，您确实需要使用新的`java.nio.file`API。

# magento - Magento 不会在主页上显示所有产品

> ID：14966117
> 
> 赞同：4
> 
> 时间：2013-02-19T19:50:21.720
> 
> 标签：magento, product

我在我的 magento 主页上显示所有产品时遇到问题。我已将此代码添加到我的 CMS - 页面 - 设计中：

```
{{block type="catalog/product_list"
        name="home.catalog.product.list"
        alias="products_homepage"
        template="catalog/product/list.phtml"}} 
```

但没有运气。我已经尝试重新索引我的产品并且我已经刷新了缓存。一直在这几个小时寻找答案。

我还尝试将类别 ID 添加到上述代码中。

我的 Magento 上有一个自定义主题，所以可能与此有关？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:25:35.493

将其添加到您的 CMS 页面内容，而不是设计。

# javascript - Javascript 内存泄漏 - Canvas HTML5 jQuery

> ID：14966119
> 
> 赞同：1
> 
> 时间：2013-02-19T19:50:32.987
> 
> 标签：javascript, jquery, html, canvas

我正在建立一个主要使用画布的网站，但唯一涉及的画布是一条水平绘制的线，该线长约 13000 像素。

当用户滚动我的窗口时，然后沿 m 画布路径水平滚动， [Example](http://joelb.me/scrollpath/)。

我注意到在 Firefox（版本 6.0.2）上我的文档无法滚动。在我的控制台中，我收到类似于 (NS_ERROR_OUT_OF_MEMORY) 的内容。

谷歌搜索后，我发现它可能是潜在的内存泄漏？这是如何工作的，是因为我编写代码的方式吗？还是这是浏览器/硬件问题？

我在窗口调整大小等上重新初始化我的功能，我很好奇这是否有任何 imapct？

```
// Initate the plugin

$(window).resize(function() {
    if(this.resizeTO) clearTimeout(this.resizeTO);
    this.resizeTO = setTimeout(function() {
        $(this).trigger('resizeEnd');
    }, 500);
});

$(window).bind('resizeEnd', function() {
    $("#path").scrollPath({drawPath: true, wrapAround: false});
});

$("#path").scrollPath({drawPath: true, wrapAround: false}); 
```

* * *

```
 $(document).ready(init);

            $('.wrapper').css({'top' : '0px','left' : '0px'});
            $('.wrapper > div').css({'height' : + $(window).height() +'px'});

        function init() {

        // Set window height and width variables 
            var windowheight = $(window).height(); 
            var windowwidth = $(window).width(); 

            // Check monitor size and workot if incentives needs extra space etc 
            var bff = 4020 + (1993 - windowwidth);

            // Move divs into position 
            $('.culture').css('top', + - windowheight + 'px');
            $('.careerpath').css('top', + - windowheight + 'px');
            $('.training').css('top', + - windowheight + 'px');
            $('.apply').css('top' , + - windowheight + 'px');

            /* ========== DRAWING THE PATH AND INITIATING THE PLUGIN ============= */

            $.fn.scrollPath("getPath")
                // Move to 'start' element
                .moveTo(0, 0, {name: "div"})
                .lineTo(2400, 0, {name: "div1"})    

                .lineTo((bff-550), 0, {name: "div2"})

                .lineTo(bff, 0, {name: "div3"})

                .lineTo(bff, -windowheight, {name: "div4"}) 

                .lineTo((bff + 1993), -windowheight, {name: "div5"})

                .lineTo((bff + 1993 + 1837), -windowheight, {name: "div6"}) 

                .lineTo((bff + ((1993 + 1837 + 1795) - 325)), -windowheight, {name: "div7"})    

            // We're done with the path, let's initate the plugin on our wrapper element
            // Window resize function
            $(window).resize(function() {
                if(this.resizeTO) clearTimeout(this.resizeTO);
                this.resizeTO = setTimeout(function() {
                    $(this).trigger('resizeEnd');
                }, 500);
            });

            $(window).bind('resizeEnd', function() {
                $("#path").scrollPath({drawPath: true, wrapAround: false});
            });

            $("#path").scrollPath({drawPath: true, wrapAround: false});

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:32:53.737

好的，现在我搜索了您使用的插件，我知道发生了什么。

[http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)

“线”实际上是一个形状，它`scrollPath`正在为此生成一个漂亮的大画布。问题出在`scrollPath`东西里面。它创建了太多的画布实例或泄漏了一些东西。

您应该更好地跟踪/记录错误并将其报告给作者。

从单个 DOM 元素创建路径的建议是无效的，因为我们知道您的意思不是单条直线。我不知道你的 trget 到底是什么，但你可以用[impress.js实现它](https://github.com/bartaz/impress.js/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:03:01.213

你这样做是错的。这种方法只会带来痛苦。

我不认为你有泄漏，你只是有一个程序的内存占用。除了内存之外，您还会遇到巨大的性能问题。2D 画布受填充率（绘制的像素数）的影响很大。即使在速度很快的计算机上，绘制这么多像素也会非常慢。

所以不要制作一个巨大的画布，然后在上面滚动窗口/视口。相反，制作一个小画布，它只呈现更大事物的可见部分。

# xcode - Xcode 错误：接收器类型“SimpleCellPartes”例如消息未声明具有选择器“presentModalViewController:animated:”的方法

> ID：14966122
> 
> 赞同：-1
> 
> 时间：2013-02-19T19:50:40.837
> 
> 标签：xcode, uitableview

我收到错误消息：接收器类型“SimpleCellPartes”例如消息未声明带有选择器“presentModalViewController:animated:”的方法

该按钮位于表格视图的单元格中，我尝试部署一个新视图

这是我的代码：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:58:16.553

在您的代码中，当您尝试使用 UITableView 进入视图时，您正在尝试执行以下操作：

```
[cell presentModalViewController: controller animated:YES]; 
```

但是您的代码似乎没有出现。

# java - Sublime Text 2 中 public static void main() 和 System.out.println() 的键绑定

> ID：14966123
> 
> 赞同：3
> 
> 时间：2013-02-19T19:50:42.897
> 
> 标签：java, sublimetext2

我最近从在 emacs 中编码 java 到在 sublime text 2 中进行。我想知道如何创建键绑定，这样如果我输入 sop 我会得到 System.out.println() 如果我输入 psvm 我'将获得公共静态无效主体。我正在为 Ubuntu 使用 Sublime Text 2。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T21:42:05.737

您可以使用[片段](http://docs.sublimetext.info/en/latest/extensibility/snippets.html)。

`Tools/New Snippet...`：

```
<snippet>
    <content><![CDATA[
System.out.println()
]]></content>
    <tabTrigger>sop</tabTrigger>
    <scope>source.java</scope>
</snippet> 
```

将此文件以`.sublime-snippet`扩展名保存在`Packages/User`.

这样，在 Java 源文件中，当您键入`sop`后跟 时`tab`，您将获得所需的内容。

您可以对`psvm`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-14T15:02:14.187

当然，您可以使用片段，但对于您的要求，您只需键入：

**pl[tab]**为

```
System.out.println(); 
```

和**main[tab]**为

```
public static void main(String[] args) {
} 
```

# html - 如果您有特定于该页面的 CSS，最好将其包含在文件中还是单独的文件中？

> ID：14966124
> 
> 赞同：1
> 
> 时间：2013-02-19T19:50:43.693
> 
> 标签：html, css

我正在开发一个网络应用程序；其中一个屏幕需要一些非常特定**于该页面**的 CSS （即，它不会在应用程序/站点的其他任何地方使用）。

所以 - 我有三个选择：

1.  将其包含在全局 CSS 文件中
2.  将其包含在特定于页面的 CSS 文件中
3.  将其包含在`<head>`页面中

选项 1 的缺点是当用户访问应用程序的任何屏幕时将加载 CSS，即使她从未访问过该特定屏幕（这很有可能）。

选项 2 的缺点是它是一个单独的 HTTP 请求；由于 CSS 本身非常***小***（<1kb） - http 请求本身的开销似乎比下载数据的实际带宽更糟糕。

选项 3 的缺点是用户每次访问页面时都会下载 CSS（即 CSS 不会被缓存）。但由于这是一个不常查看的页面（并且很少*重新访问*页面），这似乎是次要的。

对我来说 - 似乎选项 3 可能是最好的。但我读到的一切似乎都不鼓励这种方法。

考虑到专家们如何努力推动 CSS sprite 来最小化 http 请求，同样的逻辑难道不适用于一个很小的 ​​CSS 文件吗？那么，为什么#3 不是一个好的选择呢？还有其他我错过的注意事项吗？

对于它的价值——似乎同样的问题适用于任何特定于页面的 JavaScript；我可以将它包含在`<script>`页面末尾的标记中，或者包含在单独的 .js 文件中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:00:09.490

把它放在头上，然后继续解决其他问题。:)

> “程序员浪费大量时间去思考或担心他们程序中非关键部分的速度，而在考虑调试和维护时，这些效率上的尝试实际上会产生强烈的负面影响。我们应该忘记小的效率，说97% 的时间：过早的优化是万恶之源。但我们不应该放弃关键的 3% 的机会。” ——唐纳德·克努斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:14:20.523

如果您在*单个*页面中使用它，则最好将其`<head>`直接包含在其中。它会导致更少的 HTTP 请求通过，更少的带宽使用，以及稍微更快的加载。

您还可以考虑使用内部样式表和外部样式表的组合：对于您可能在站点范围内使用的东西，例如 、 、 等的样式`h1`，`h2`链接`h3`到外部样式表。对于特定于一页的内容，例如`background-image`，将样式放入`<head>`.

# java - 从具有多个枚举的类中获取枚举

> ID：14966126
> 
> 赞同：0
> 
> 时间：2013-02-19T19:50:47.893
> 
> 标签：java, enums

我有一个看起来像这样的类：

```
public class Catalog {

    public enum Table1 implements IExcelEnum{
            Name, Date, Id
    }

    public enum Table2 IExcelEnum {
        ...
    }
} 
```

我可以到枚举Table1，比如：

```
System.out.println(Catalog.Table2.Name.value()); 
```

但是我想要做的是能够提供一个字符串或一个标识符，然后把枚举取出来，这样我就可以在创建我的数据对象时引用它。例如：

```
Data dataCol1 = new Data(Catalog.getEnum("Table1"), ArrayList<String> values); 
```

我有一个名为 IExcelEnum 的接口，它没有任何字段，它只是为了让我可以通用地键入我的枚举，以便我的数据结构愿意接受其中的任何一个。

最干净的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:58:41.463

您可能需要像这样使用反射：

```
 public class Catalog
{
    public interface I
    {
    }

    public enum T1 implements I
    {
        A, B, C;
    }

    public enum T2 implements I
    {
        D, E, F;
    }

    public static void main (String [] args) throws Exception
    {
        String name = "T1";

        Class <? extends I> c =
            (Class <? extends I>)Class.forName (
                Catalog.class.getName () + "$" + name);

        I [] values = (I [])c.getMethod ("values").invoke (null);

        for (I i: values)
            System.out.println (i);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:54:56.937

你的意思是`Catalog.T1.valueOf("TC1")`？

在 Java 中，所有枚举都实现了该`valueOf(String)`方法，[请参见此处。](http://docs.oracle.com/javase/7/docs/api/java/lang/Enum.html#valueOf)

# ios - Objective-c将具有不同属性的相同实例添加到数组中

> ID：14966129
> 
> 赞同：0
> 
> 时间：2013-02-19T19:50:58.697
> 
> 标签：ios, objective-c, arrays

我正在尝试以下代码来创建实例、分配属性、添加到数组。然后，分配新属性并再次添加。但是数组将包含 2 个相同的对象（等于添加的第二个对象）。Message 类仅具有几个（非原子，保留）NSStrings/Integer 属性。这可能与我对指针的理解有关，有人可以解释一下吗？

```
 self.messages=[[NSMutableArray alloc]init];
    Message *m=[[Message alloc]init];
    m.cb=@"2402";
    m.ck=1001;
    m.msg=@"as";
     [self.messages addObject:m];

    m.cb=@"2422";
    m.ck=1002;
    m.msg=@"aadfsdsdfdssdklsdflkh";
    [self.messages addObject:m];
    NSLog(@"%@",self.messages); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T19:54:05.863

当您将对象添加到数组时，它不会**将**对象的副本添加到数组中，而只是对它的引用。如果您想要两个不同的对象，那么您需要创建两个不同的对象，而不是重复使用同一个对象（或者，正如@Brendon 指出的那样，在将其添加到数组时创建一个副本）。

要修复您的示例，最常见的技术是在开始修改第二个对象的属性之前添加以下行：

```
m=[[Message alloc]init]; 
```

或者，使用第二个指针和对象而不是重用`m`.

**编辑：**
要添加副本，请更改`[self.messages addObject:m];`为`[self.messages addObject:[m copy]];`，假设`Message`该类符合`NSCopying`协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:54:15.203

是的，在执行发布的代码后，在索引 0 和 1 处`self.messages`包含`Message`对象两次。不过，这不是问题。数组可以包含任何对象，甚至它们本身。

似乎您想要两个 distict 对象，因此您只需创建第二个`Message`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T22:37:18.047

您可以实现 NSCopy 协议——正如 lnafziger 所提到的——或者只是在 for 循环中很容易地创建新实例。

> «两个或多个，用一个 for»
> — Edsger W. Dijkstra

```
self.messages=[[NSMutableArray alloc] init];
NSArray *dataArray = @[ @{@"cb": @"2402", @"ck": @(1001), @"msg": @"as"}, 
                        @{@"cb": @"2422", @"ck": @(1002), @"msg": @"aadfsdsdfdssdklsdflkh"}
                      ];

for(NSDictionary *data in dataArray) {
    Message *m=[[Message alloc] init];
    m.cb = data[@"cb"];
    m.ck = [data[@"ck"] integerValue];
    m.msg = data[@"msg"];
    [self.messages addObject:m];
} 
```

# javascript - SyntaxError：标识符在 Firebug 中的数字文字之后立即开始

> ID：14966133
> 
> 赞同：4
> 
> 时间：2013-02-19T19:51:18.323
> 
> 标签：javascript, firebug

当我调用这个 javascript 函数时，我得到了这个错误：

```
function kickUser(id_userChat){
$.post("chatFuncs.php", { action: "kick", id_user: id_userChat });  
} 
```

这个“kickUser”函​​数是为每个连接到我的聊天框的用户生成的，像这样

```
$listUsers .= '<img src="imgUsers/'.$DBClass->nomImg($rowUsers['id_user'],$posImg).'" height="'.$heightImg.'" width="'.$widhImg.'"/>
<span class="styleMsg">'.$rowUser['nameUser'].'</span>&nbsp;
<a href="#" class="BtnKick" onClick="kickUser('.$rowUsers['id_user'].')">Kick</a></br>'; 
```

并且“踢”动作只是对我的数据库的更新，我在其中从我的 chatUsers 表中删除了用户

如果我将 $rowUsers['id_user'] 更改为 $rowUsers['userName']，则错误更改为： **ReferenceError: 'userName' is not defined**（我仅为此示例更改了 'userName' 的用户真实姓名）。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T20:02:43.320

JavaScript 中的标识符不能以数字开头；它们*必须*以字母开头，`$`或`_`.

* * *

我猜它来自这个：

```
onclick="kick_user('.$rowUsers['id_user'].')">Kick</a> 
```

如果您的意思是传递一个字符串，那么您需要引用正在传递的值。

```
onclick="kick_user(\"'.$rowUsers['id_user'].'\")">Kick</a> 
```

我不知道 PHP，所以也许你需要不同的转义，但这应该给你的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:04:24.320

生成的 JavaScript 代码将是

```
kickUser(userName) 
```

…显然没有 js 变量`userName`。你想传递一个字符串：

```
kickUser('userName'); 
```

因此，将引号/撇号添加到输出中，并且不要忘记`$rowUsers['userName']`正确转义。与 for 完全一样`$rowUsers['id_user']`，它似乎甚至输出了一个无效的标识符。

# java - Java 2D API：空指针异常

> ID：14966134
> 
> 赞同：0
> 
> 时间：2013-02-19T19:51:28.667
> 
> 标签：java, swing, netbeans, nullpointerexception, java-2d

请看下面的代码

```
package java2D;

import java.awt.BasicStroke;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.*;
import java.awt.*;

public class Joins extends JFrame
{
    private JPanel centerPanel;

    public Joins()
    {   
        this.setLayout(new BorderLayout());
        this.add(createCenterPanel(),"Center");

        this.setSize(200,250);
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    private JPanel createCenterPanel()
    {
        centerPanel = new JPanel();
        //centerPanel.setLayout(new FlowLayout());

        Graphics g = centerPanel.getGraphics();

        Graphics2D g2d =  (Graphics2D)g;

        BasicStroke bs1 = new BasicStroke(8, BasicStroke.CAP_ROUND, BasicStroke.JOIN_BEVEL);
        g2d.setStroke(bs1);
        g2d.drawRect(15, 15, 80, 50);

        BasicStroke bs2 = new BasicStroke(8, BasicStroke.CAP_ROUND, BasicStroke.JOIN_MITER);
        g2d.setStroke(bs2);
        g2d.drawRect(125, 15, 80, 50);

        BasicStroke bs3 = new BasicStroke(8, BasicStroke.CAP_ROUND, BasicStroke.JOIN_ROUND);
        g2d.setStroke(bs3);
        g2d.drawRect(235, 15, 80, 50);

        return centerPanel;
    }

    public static void main(String[]args)
    {
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                new Joins();
            }
        });
    }
} 
```

此代码生成 NullPointerException。我需要在`centerPanel`. 在我开发 Swing 应用程序时，我通常将 JFrame 区域划分为多个 JPanel，我这里也是这样做的，但最终出现 NullPointerException！

以下是错误

```
run:
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at java2D.Joins.createCenterPanel(Joins.java:34)
    at java2D.Joins.<init>(Joins.java:17)
    at java2D.Joins$1.run(Joins.java:55)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:705)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:675)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90)
BUILD SUCCESSFUL (total time: 6 seconds) 
```

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:10:09.913

不要使用`getGraphics`. 创建一个新的`JPanel`并将您的绘图功能放入`paintComponent`记住调用的方法中`super.paintComponent(g)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:12:35.870

正如已经指出的那样，`Graphics g = centerPanel.getGraphics();`是您问题的根源。

您永远不应该使用 getGraphics 来执行自定义绘制。充其量`getGraphics`是最后一个绘画周期的快照，最坏的情况是，你已经看到了最糟糕的结果，它是`null`

要执行自定义绘画，您应该自己创建一个自定义组件（`JPanel`例如从类似的东西）并覆盖它的`paintComponent`方法（不要忘记调用`super.paintComponet`）

看看[Performing Custom Painting](http://docs.oracle.com/javase/tutorial/uiswing/painting/)了解更多细节

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T19:57:05.627

错误在：

```
Graphics g = centerPanel.getGraphics(); 
```

根据javadocs：

> 为此组件创建图形上下文。`null`如果此组件当前不可显示，则此方法将返回。

也许您需要先将 添加`JPanel`到您的`Joins`框架中，然后才能使用`getGraphics()`?

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T20:01:51.853

什么都不可见，因此 getGraphics() 返回 null。尝试：

```
 centerPanel = new JPanel();
    JFrame frame = new JFrame();
    frame.add(centerPanel);
    frame.setVisible(true);
    centerPanel.setVisible(true); 
```

# redhat - 如何在 Redhat linux 上安装 liquibase

> ID：14966135
> 
> 赞同：3
> 
> 时间：2013-02-19T19:51:30.710
> 
> 标签：redhat, liquibase, headless

认为这可能对其他人有所帮助。如果您正在运行无头 VM，则可能不会立即清楚如何安装 liquibase。我正在使用 redhat linux 盒子，想知道尝试安装 liquibase 的命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:51:30.710

如果您可以使用浏览器访问另一台计算机。转到[http://www.liquibase.org/download](http://www.liquibase.org/download)并将路径复制到 liquibase zip 文件。将该路径粘贴到 wget 命令中，如下例所示

`wget https://github.com/downloads/liquibase/liquibase/liquibase-2.0.5-bin.zip`

将 zip 文件解压缩到您选择的位置，例如 ~/liquibase

完成后，您必须手动创建 liquibase.properties 文件。

# jquery - 如何优化我的 javascript 代码？

> ID：14966137
> 
> 赞同：1
> 
> 时间：2013-02-19T19:51:38.357
> 
> 标签：jquery

我创建了以下 jquery 切换框显示/隐藏功能。但我知道我有多余的代码，我想让它尽可能简短和有效。这只是我从一开始就学习编码的*尝试*......

HTML：

```
<div>
    <ul>
        <li><a id="areaPta">Pretoria</a></li>
        <li><a id="areaPotch">Potch</a></li>
        <li><a id="areaJhb">JHB</a></li>
    </ul>
</div>
<div>
    <div class="hidden" id="pretoriaDetail">Pretoria Content</div>
    <div class="hidden" id="potchDetail">Potch Content</div>
    <div class="hidden" id="jhbDetail">JHB Content</div>
</div> 
```

CSS：

```
.hidden{
    display: none;
} 
```

JS：

```
$(function() {

    var p = $('#areaPta');
    var po = $('#areaPotch');
    var j = $('#areaJhb');

    p.click(function (){
        $('.hidden').hide(500);
        $('#pretoriaDetail').show(500);
    });
    po.click(function (){
        $('.hidden').hide(500);
        $('#potchDetail').show(500);
    });
    j.click(function (){
        $('.hidden').hide(500);
        $('#jhbDetail').show(500);
    });

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T19:56:40.453

您的标记应尽可能指定元素之间的关系，而不是在 JavaScript 中手动编码此数据。您可以使用`href`每个标签的属性`<a>`来指定该`<a>`标签要影响的元素的 ID：

```
<div>
    <ul id="nav">
        <li><a id="areaPta" href="#pretoriaDetail">Pretoria</a></li>
        ...
    </ul>
</div>
<div>
    <div class="hidden" id="pretoriaDetail">Pretoria Content</div>
    ...
</div> 
```

然后让您的点击绑定更加通用：

```
$("#nav a").click(function(event) {
  event.preventDefault();

  $(".hidden").hide(500);
  $($(this).attr("href")).show(500)
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:05:56.797

我在[http://jsfiddle.net/jagzviruz/w3hqe/1/](http://jsfiddle.net/jagzviruz/w3hqe/1/)创建了一个 JS fiddle，它可以指导您如何在创建更有意义的标记的同时最小化代码行。请注意，这确实会创建多个点击处理程序。`.on()`您可以通过在包装链接的 ul 上创建处理程序来做得更好。

HTML

```
<div>
  <ul>
    <li><a id="areaPta" href="#" rel="pretoriaDetail">Pretoria</a></li>
    <li><a id="areaPotch" href="#" rel="potchDetail">Potch</a></li>
    <li><a id="areaJhb" href="#" rel="jhbDetail">JHB</a></li>
  </ul>
</div>
<div>
  <div class="hidden" id="pretoriaDetail">Pretoria Content</div>
  <div class="hidden" id="potchDetail">Potch Content</div>
  <div class="hidden" id="jhbDetail">JHB Content</div>
</div> 
```

CSS

```
.hidden {
    display: none;
}
ul li a{
    text-decoration:none;
} 
```

JS

```
var p = $('#areaPta, #areaPotch, #areaJhb') ;

p.click(function (e) {
    var targ = $('#'+$(this).attr('rel')) ;
    e.preventDefault();
    $('.hidden').hide(500)
    targ.show(500);    
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T19:59:28.253

这是一种方法，使用您当前的标记（我确实将 ID 大写以便它们匹配） - [http://jsfiddle.net/D3e4d/3/](http://jsfiddle.net/D3e4d/3/)

```
$('a').click(function(e) {
    e.preventDefault();
    var clicked = $(this).text();
    $('.hidden').hide(500);
    $('[id^="' + clicked + '"]').toggle(500);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T19:59:30.307

您可以编写一个通用处理函数，只需对标记稍作改动。见下文，

```
<ul id="mylinks">
    <li><a id="areaPta" data-content-id="pretoriaDetail">Pretoria</a></li>
    <li><a id="areaPotch" data-content-id="potchDetail">Potch</a></li>
    <li><a id="areaJhb" data-content-id="jhbDetail">JHB</a></li>
</ul> 
```

然后剧本，

```
$('#mylinks a').click (function () {
   $('.hidden').hide(500);
   $('#' + $(this).data('content-id')).show(500);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T20:00:32.457

对于初学者，我通常声明返回带有`$`前缀的 jquery 对象的变量：

```
var $p = $('#areaPta'); 
```

但是当它们只使用一次时，将它们存储到变量中是没有意义的。

在我看来，你的代码没问题。我能立即想到的唯一可以减少冗余的事情是：

```
<a id="areaPta" data-target="pretoriaDetail">Pretoria Content</a>

$('li a').on('click', function(e){

    var target = $(e.target).data('target');

    $('#' + target).fadeIn(500);
}); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-02-19T20:01:36.867

你在这里做的事情我会做以下方式：

HTML：

```
<div>
    <ul>
        <li><a class="whateverClass">Pretoria</a></li>
        <li><a class="whateverClass">Potch</a></li>
        <li><a class="whateverClass">JHB</a></li>
    </ul>
</div>
<div>
    <div class="hidden">Pretoria Content</div>
    <div class="hidden">Potch Content</div>
    <div class="hidden">JHB Content</div>
</div> 
```

CSS：

```
.hidden{
    display: none;
} 
```

JS：

```
//This will shorten things up for you a bit.
$(function() {
    $(".whateverClass").click(function (){
        //Fixed a bug here
        $('.hidden').hide(500);
        $(this).find('.hidden').show(500);
    });
}); 
```

但是，我不想深入了解您为什么想要这种确切的行为，但至少它更短且更易于维护。

# linux - 陈不工作

> ID：14966140
> 
> 赞同：14
> 
> 时间：2013-02-19T19:51:45.350
> 
> 标签：linux, ubuntu, permissions, chown

在 Ubuntu 12.04 上，chown 命令似乎无法正常工作

> root@server:/var/www/folder/# ls -al

运行这个出来

> drwxr-xr-x 11 776 sftponly 4096 Feb 17 14:08 Other_Folder

我需要该组的写权限，所以我运行：

> chown -R 776 ./Other_Folder

然后当我再次运行 ls -al 时，输出仍然是

> drwxr-xr-x 11 776 sftponly 4096 Feb 17 14:08 Other_Folder

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-19T20:01:19.583

`chown`用于更改文件的所有权，而不是更改权限。

`ls -al`没有向您显示谁拥有该文件，只是它的权限。

如果 root 拥有这些文件，您需要`chown`正确地使用它们，然后才能更改它们的权限：

```
chown -R yourname:yourname folderName 
```

然后作为所有者，您可以更改他们的权限：

```
chmod -R 776 folderName 
```

**编辑：** 我仔细检查了语法，它似乎是正确的，你可能需要使用 sudo 来使用它们。

# database - 在 joomla 组件中，我应该将数据库函数存储在哪里，以及如何调用它们？

> ID：14966141
> 
> 赞同：1
> 
> 时间：2013-02-19T19:51:51.070
> 
> 标签：database, model-view-controller, architecture, joomla, model

我现在正在构建我的第一个 joomla 组件。

我有 3 个表： __questions __resaults __display

我还需要 Joomla 用户表：

__用户

我只有一个视图：view.questions.html

此视图获取数据，还需要一些数据库功能。它需要：

1.  从用户表中获取信息。
2.  从结果表中获取信息
3.  从显示表中获取信息
4.  -SET- 到 reaults 表的信息

现在，我知道 Joomla 是用 MVC 架构构建的。我认为，这意味着不处理视图中的数据库。

我应该将数据库处理函数存储在哪里，如何在前端调用它们？

处理问题的功能在问题视图模型中，没有问题，但是其他表呢？我应该将处理它们的函数也放入问题模型、帮助文件中，还是为每个其他表制作模型，然后从问题视图中调用它们？如果我应该制作其他模型，我该如何从问题视图中调用它们？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:02:31.037

为每个表创建一个模型。然后，您将从控制器实例化它们以使它们可用于视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:40:13.647

通过使用组件创建器，您可以节省大量时间并学到很多东西：[http](http://www.notwebdesign.com/joomla-component-creator/) ://www.notwebdesign.com/joomla-component-creator/它会为您完成所有 MVC 工作。

# javascript - 用鼠标旋转地球

> ID：14966143
> 
> 赞同：1
> 
> 时间：2013-02-19T19:51:57.013
> 
> 标签：javascript, math, opengl-es, geometry, webgl

我可以确定用户[点击](https://stackoverflow.com/questions/14964257/clicking-on-a-sphere)了地球上的哪个位置。

当用户第一次单击鼠标按钮时，我可以存储他们单击的位置；让我们称之为`pin`.

然后，当他们拖动鼠标时，我想将鼠标放在`pin`鼠标光标下。

![在此处输入图像描述](../Images/dea646cf7394a3ba1d23127a4b2b9880.png)

这是一些似乎大致保持`pin`鼠标指针下方的代码，但没有正确保持地球；它随机闪烁和旋转。有时它会完全翻转轴，因此地球会暂时从后向前。

```
function evtPos(evt) {
    if(!scene.ortho) return null;
    var x = lerp(scene.ortho[0],scene.ortho[1],evt.clientX/canvas.width),
        y = lerp(scene.ortho[3],scene.ortho[2],evt.clientY/canvas.height), // flipped
        sqrd = x*x+y*y;
    return (sqrd > 1)?
        null:
        mat4_vec3_multiply(mat4_inverse(scene.mvMatrix),[x,y,Math.sqrt(1-sqrd)]);
}

function onMouseDown(evt) {
    pin = evtPos(evt);
}

function onMouseMove(evt,keys,isMouseDown) {
    if(!isMouseDown) return;
    var pt = evtPos(evt);
    if(pin == null) pin = pt;
    if(pt == null) return;
    var d = vec3_sub(pt,pin),
        rotx = Math.atan2(d[1],d[2]),
        roty = (d[2] >= 0)?
            -Math.atan2(d[0] * Math.cos(rotx),d[2]):
            Math.atan2(d[0] * Math.cos(rotx),-d[2]),
        rotz = Math.atan2(Math.cos(rotx),Math.sin(rotx)*Math.sin(roty));
    scene.mvMatrix = mat4_multiply(scene.mvMatrix,mat4_rotation(rotx,[1,0,0]));
    scene.mvMatrix = mat4_multiply(scene.mvMatrix,mat4_rotation(roty,[0,1,0]));
    scene.mvMatrix = mat4_multiply(scene.mvMatrix,mat4_rotation(rotz,[0,0,1]));
}

function onMouseUp(evt) {
    pin = null;
} 
```

此外，随着时间的推移，似乎会出现错误，`pin`并且距离鼠标指针越来越远。我想我应该以某种方式`mvMatrix`完全计算每个事件而不是大量的小增量？

我希望用户能够拖动地球以自然地导航。我发现的所有旋转地球仪的代码都使用固定速度，例如箭头键，而不是在鼠标指针下“固定”地球仪。Unity 有一个`Quaternion.FromToRotation(fromPos,toPos)`看起来很有前途的功能，但源代码不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:56:27.040

执行此操作的方法之一是[arcBall 算法](http://run.usc.edu/cs520-s12/assign2/p245-shoemake.pdf)。甚至还有可用的[JavaScript 实现](http://www.math.tamu.edu/~romwell/arcball_js/index.html)，因此您无需自己动手。

# android - 使用视图组将图像视图置于相机预览模式

> ID：14966144
> 
> 赞同：2
> 
> 时间：2013-02-19T19:52:00.263
> 
> 标签：android, android-layout

我正在使用 Google 的示例通过在 ViewGroup 中使用 CameraPreview 模式。我喜欢它的想法，但我试图在它上面放置视图，而相机总是取代它。我移除了相机以查看它下方的图像（意味着正在添加视图，它只是被添加到相机下方，即使我将相机放在图像下方并调用了一百万次 bringChildToFront(myImageView)。

```
public class CameraPreview extends ViewGroup implements SurfaceHolder.Callback {
private final String TAG = "Preview";

SurfaceView mSurfaceView;
SurfaceHolder mHolder;
Size mPreviewSize;
List<Size> mSupportedPreviewSizes;
Camera mCamera;
private DrawOnTop mDraw;
public ImageView myImageView;

 CameraPreview(Context context) {
    super(context);
    myImageView = new ImageView(context);
    Bitmap bmp = BitmapFactory.decodeResource(context.getResources(), R.drawable.ic_launcher);
    Drawable drawable = new BitmapDrawable(bmp);
    myImageView.setImageDrawable(drawable);
    mSurfaceView = new SurfaceView(context);
    addView(mSurfaceView,0);
    addView(myImageView,1); 

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);

    Log.d("",drawable+"");
    bringChildToFront(myImageView);
    debug(2);
}

public void setCamera(Camera camera) {
    mCamera = camera;
    if (mCamera != null) {
        mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
        requestLayout();
    }

    bringChildToFront(myImageView);

}

public void switchCamera(Camera camera) {
   setCamera(camera);
   try {
       camera.setPreviewDisplay(mHolder);
   } catch (IOException exception) {
       Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
   }
   Camera.Parameters parameters = camera.getParameters();
   parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
   requestLayout();

   camera.setParameters(parameters);
   mSurfaceView.setBottom(0);
    bringChildToFront(myImageView);

}
 public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    try {
        if (mCamera != null) {
            mCamera.setPreviewDisplay(holder);
        }
    } catch (IOException exception) {
        Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
    }
    bringChildToFront(myImageView);

}
.... 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:42:26.240

答案是 ViewGroup 自下而上工作。这意味着 0 实际上是最顶部暴露的视图，而不是底部。我将顺序从：

```
addView(mSurfaceView,0);
addView(myImageView,1); 
```

至：

```
addView(myImageView, 0);
addView(mSurfaceView, 1); 
```

它把图像放在首位。我花了太多时间来解决这个简单的答案。

# c# - 具有一类字段的 EntityFramework 和 Model

> ID：14966147
> 
> 赞同：-3
> 
> 时间：2013-02-19T19:52:08.697
> 
> 标签：c#, entity-framework, postgresql, ef-code-first

我有“用户”和“投标”模型。

当然还有 DateBase 中的“Users”和“Bids”表。（[postgres 表中的“投标”列](http://i.stack.imgur.com/8ZLpX.png)）

我可以像这样映射一个“用户”字段：

```
 public int UserId { get; set; }
    public virtual User User { get; set; } 
```

但不知道如何映射三个具有不同名称的“用户”字段。

```
 public int CreatorId { get; set; }//id of user in db table
    public int ManagerId { get; set; }//id of user in db table
    public int ExecutorId { get; set; }//id of user in db table
    public virtual User Creator { get; set; }
    public virtual User Manager { get; set; }
    public virtual User Executor { get; set; } 
```

我应该怎么办？

```
public class Bid
{
    public int BidId { get; set; }

    public string Title { get; set; }
    public string Text { get; set; }

    public DateTime DateOfCreating { get; set; }
    public DateTime DateOfProcessing { get; set; }
    public DateTime DateOfExecution { get; set; }

    //here is something incorrect
    public int CreatorId { get; set; }
    public int ManagerId { get; set; }
    public int ExecutorId { get; set; }
    public virtual User Creator { get; set; }
    public virtual User Manager { get; set; }
    public virtual User Executor { get; set; }

    public bool IsProcessed { get; set; }
    public bool IsExecuted { get; set; }
    public bool IsExecutionConfirmed { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:49:24.180

我怀疑你必须告诉`Entity Framework`这 3 个属性应该用作数据库中的外键。

由于它们具有非常规名称（EF 不会自动将它们识别为外键），因此您可以通过设置`ForeignKey`它们的属性并指定它们是外键值的导航属性来帮助它理解。

```
[ForeignKey("Creator")]
public int CreatorId { get; set; }

[ForeignKey("Manager")]
public int ManagerId { get; set; }

[ForeignKey("Executor")]
public int ExecutorId { get; set; }

public virtual User Creator { get; set; }
public virtual User Manager { get; set; }
public virtual User Executor { get; set; } 
```

# javascript - 在 Google Maps KML 地标上触发点击事件

> ID：14966149
> 
> 赞同：8
> 
> 时间：2013-02-19T19:52:18.657
> 
> 标签：javascript, google-maps, google-maps-api-3, kml

我有一张正在加载动态外部 KML 的地图，其地标定义如下：

```
<Placemark id="MapZoneID_23443">
    <name>Name Here</name>
    <description>Text Here</description>
    <styleUrl>#ff8080ff</styleUrl>
    <Polygon>
        <outerBoundaryIs>
            <LinearRing>
                <coordinates>
                    ....
                </coordinates>
            </LinearRing>
        </outerBoundaryIs>
    </Polygon>
</Placemark> 
```

我想做的是有一个链接/下拉列表/任何可以单击或选择的内容以基本上触发点击`$('#MapZoneID_23443')`......但我无法弄清楚如何触发该点击，或者这是否可能。地图可能非常复杂，所以我宁愿不必使用 JS gmaps 标记预加载所有内容。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:11:27.820

It's not currently possible.

Star the issue on the bug tracker to both vote for it and follow it's progress: [https://code.google.com/p/gmaps-api-issues/issues/detail?id=3006](https://code.google.com/p/gmaps-api-issues/issues/detail?id=3006)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-08T22:36:20.663

我找到了一种解决方法。

将此添加到该`<style>`部分中的地标

```
<BalloonStyle><text>TEXT</text></BalloonStyle> 
```

单击 .js 回调后，您将能够访问此值

```
event.featureData.info_window_html 
```

因此，在您的 KML 文件中

```
<Placemark id="MapZoneID_23443">
   <BalloonStyle><text>TEXT</text></BalloonStyle>
   ...
</Placemark> 
```

在 javascript 中

```
google.maps.event.addListener(kmlLayer, 'click', function(event) {
  var content = event.featureData.info_window_html;
  console.log(content);
}); 
```

# html - 休假时清除 HTML 表单字段

> ID：14966151
> 
> 赞同：0
> 
> 时间：2013-02-19T19:52:29.813
> 
> 标签：html, regex

当我从 HTML 表单字段（5+4 邮政编码）中跳出时，如果我只输入了 5 个数字，则该字段会清除，但如果我填写所有 5+4，则数字仍然存在。我正在使用`jquery.maskedinput`插件进行屏蔽。如果这就是我输入的全部，为什么 5 位数字不保留？

这是 jsFiddle 中的一个重现：http: [//jsfiddle.net/dEfE8/1](http://jsfiddle.net/dEfE8/1)

```
<input data-val="true" 
 data-val-length="The field Claimant Zip Code must be a string with a maximum length of 10." data-val-length-max="10" 
 data-val-regex="The field Claimant Zip Code must match the regular expression &#39;^(\d{5}|\d{5}-\d{4})$&#39;." 
 data-val-regex-pattern="^(\d{5}|\d{5}-\d{4})$" 
 data-val-required="The Claimant Zip Code field is required." 
 id="Claimant_Zip" 
 name="Claimant.Zip" 
 title="Claimant Zip Code" 
 type="text" 
 value="" /> 
```

**更新**：附加相关代码

这是附加到有问题的领域。它是 jquery.maskedinput 插件的一部分：

```
$("#Claimant_Zip").mask("99999-9999"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:19:03.993

[根据“屏蔽输入”插件的文档](http://digitalbush.com/projects/masked-input-plugin/)：

> 按照设计，此插件将拒绝未完成掩码的输入。您可以通过使用“？”来绕过它。字符在您想考虑输入可选的位置。

`?`在连字符修复它之前添加一个：

```
$("#Claimant_Zip").mask("99999?-9999"); 
```

**OP 的 jsFiddle 工作：http: [//jsfiddle.net/dEfE8/2/](http://jsfiddle.net/dEfE8/2/)**

# activemq - Linux ActiveMQ 目标 主题启动

> ID：14966152
> 
> 赞同：0
> 
> 时间：2013-02-19T19:52:32.520
> 
> 标签：activemq, startup, jms-topic

我正在尝试在 ActiveMQ 启动时设置一个主题。我们将拥有 Durable 订阅者，但它们尚不可用。

启动配置说要添加：

```
<destinations>
  <queue physicalName="FOO.BAR" />
  <topic physicalName="SOME.TOPIC" />
</destinations> 
```

我已将此添加到 activemq.xml 但没有运气。ActiveMQ 启动时没有创建主题。我们正在运行 5.7。

想法？

编辑：

我正在尝试设置有关 ActiveMQ 启动的主题。当 ActiveMQ 重新启​​动（或关闭并启动）时，主题被删除，因为它们在内存中。我想在 XML 配置中添加一个主题，以便在启动 AMQ 时动态创建它。这样我们的 ESB 就可以直接访问它并开始工作了。ESB 将成为 Durable 订阅者，但目前还不是。仍在执行。文档说要添加到 XML 配置中的上述行。但我没有运气。开始时不会创建主题。

所以我的我会在任何地方添加它们？

```
 <beans
  xmlns="http://www.springframework.org/schema/beans"
  xmlns:amq="http://activemq.apache.org/schema/core"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans   http://www.springframework.org/schema/beans/spring-beans.xsd
 http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core.xsd">

<!-- Allows us to use system properties as variables in this configuration file -->
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>file:${activemq.conf}/credentials.properties</value>
    </property>
</bean>

<!--
    The <broker> element is used to configure the ActiveMQ broker.
-->
<broker xmlns="http://activemq.apache.org/schema/core" brokerName="localhost" dataDirectory="${activemq.data}">

    <!-- Like here? -->
    <destinations>
       <queue physicalName="FOO.BAR" />
       <topic physicalName="SOME.TOPIC" />
    </destinations>
    <!--
        For better performances use VM cursor and small memory limit.
        For more information, see:

        http://activemq.apache.org/message-cursors.html

        Also, if your producer is "hanging", it's probably due to producer flow control.
        For more information, see:
        http://activemq.apache.org/producer-flow-control.html
    -->

    <destinationPolicy>
        <policyMap>
          <policyEntries>
            <policyEntry topic=">" producerFlowControl="true">
                <!-- The constantPendingMessageLimitStrategy is used to prevent
                     slow topic consumers to block producers and affect other consumers
                     by limiting the number of messages that are retained
                     For more information, see:

                     http://activemq.apache.org/slow-consumer-handling.html

                -->
              <pendingMessageLimitStrategy>
                <constantPendingMessageLimitStrategy limit="1000"/>
              </pendingMessageLimitStrategy>
            </policyEntry>
            <policyEntry queue=">" producerFlowControl="true" memoryLimit="1mb">
              <!-- Use VM cursor for better latency
                   For more information, see:

                   http://activemq.apache.org/message-cursors.html

              <pendingQueuePolicy>
                <vmQueueCursor/>
              </pendingQueuePolicy>
              -->
            </policyEntry>
          </policyEntries>
        </policyMap>
    </destinationPolicy>

    <!--
        The managementContext is used to configure how ActiveMQ is exposed in
        JMX. By default, ActiveMQ uses the MBean server that is started by
        the JVM. For more information, see:

        http://activemq.apache.org/jmx.html
    -->
    <managementContext>
        <managementContext createConnector="false"/>
    </managementContext>

    <!--
        Configure message persistence for the broker. The default persistence
        mechanism is the KahaDB store (identified by the kahaDB tag).
        For more information, see:

        http://activemq.apache.org/persistence.html
    -->
    <persistenceAdapter>
        <kahaDB directory="${activemq.data}/kahadb"/>
    </persistenceAdapter>

      <!--
        The systemUsage controls the maximum amount of space the broker will
        use before slowing down producers. For more information, see:
        http://activemq.apache.org/producer-flow-control.html
        If using ActiveMQ embedded - the following limits could safely be used:

    <systemUsage>
        <systemUsage>
            <memoryUsage>
                <memoryUsage limit="20 mb"/>
            </memoryUsage>
            <storeUsage>
                <storeUsage limit="1 gb"/>
            </storeUsage>
            <tempUsage>
                <tempUsage limit="100 mb"/>
            </tempUsage>
        </systemUsage>
    </systemUsage>
    -->
      <systemUsage>
        <systemUsage>
            <memoryUsage>
                <memoryUsage limit="64 mb"/>
            </memoryUsage>
            <storeUsage>
                <storeUsage limit="100 gb"/>
            </storeUsage>
            <tempUsage>
                <tempUsage limit="50 gb"/>
            </tempUsage>
        </systemUsage>
    </systemUsage>

    <!--
        The transport connectors expose ActiveMQ over a given protocol to
        clients and other brokers. For more information, see:

        http://activemq.apache.org/configuring-transports.html
    -->
    <transportConnectors>
        <!-- DOS protection, limit concurrent connections to 1000 and frame size to 100MB -->
        <transportConnector name="openwire" uri="tcp://0.0.0.0:61616?maximumConnections=1000&amp;wireformat.maxFrameSize=104857600"/>
        <transportConnector name="amqp" uri="amqp://0.0.0.0:5672?maximumConnections=1000&amp;wireformat.maxFrameSize=104857600"/>
    </transportConnectors>

    <!-- destroy the spring context on shutdown to stop jetty -->
    <shutdownHooks>
        <bean xmlns="http://www.springframework.org/schema/beans" class="org.apache.activemq.hooks.SpringContextHook" />
    </shutdownHooks>

</broker>

<!--
    Enable web consoles, REST and Ajax APIs and demos

    Take a look at ${ACTIVEMQ_HOME}/conf/jetty.xml for more details
-->
<import resource="jetty.xml"/> 
```

/齐吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-27T06:21:15.400

将您的目的地放在`<destinations>`标签内，例如

```
<destinations>
   <queue physicalName="FOO.BAR" />
   <topic physicalName="SOME.TOPIC" />
</destinations> 
```

里面

`<broker></broker>`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:51:45.863

我刚刚将它们放入香草 5.7 AMQ 安装（在 MacOS 上），我通过 Web 控制台看到了队列和主题......

您应该重新安装 AMQ 以尝试缩小问题范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T08:05:08.313

我自己的解决方案有效。尽管在我们的 Linux 环境中，我们有不止一个实例。/user/share 下一个，/home/activemq/ 下一个

所以当我编辑正确的文件时它起作用了。

感谢你付出的努力。

# c# - 没有数据传递给“创建”视图对象

> ID：14966153
> 
> 赞同：1
> 
> 时间：2013-02-19T19:52:36.203
> 
> 标签：c#, asp.net-mvc

我的 MVC 应用程序有一个我不明白的奇怪行为。

当我单击“创建”actionLink 时，生成的视图与设计的一样。所以我用适当的值填充字段来测试行为。

但是当我单击“创建”按钮时，传递给受控对象的所有字段都为 null，id 为 0，我真的不明白为什么会这样做。

这是处理 Create 的控制器方法：

```
[HttpPost]
public ActionResult Create(ObjInfo _obj)
{
    if (ModelState.IsValid)
    {
        m_ObjManager.CreateObj(_obj);
        return RedirectToAction("Index");
    }

    return View(_obj);
} 
```

以下是我编写“创建”视图的方式：

```
@model MyApp.Models.ObjInfo

@{
    ViewBag.Title = "Create";
}

<h2>Create New Object</h2>

@using (Html.BeginForm()){
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>OBJ</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_ID)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_ID)
            @Html.ValidationMessageFor(model => model.m_ID)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_Address)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_Address)
            @Html.ValidationMessageFor(model => model.m_Address)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_City)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_City)
            @Html.ValidationMessageFor(model => model.m_City)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_ContactName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_ContactName)
            @Html.ValidationMessageFor(model => model.m_ContactName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.m_ContactTitle)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.m_ContactTitle)
            @Html.ValidationMessageFor(model => model.m_ContactTitle)
        </div>

        (...)

        <p>
            <input type="submit" value="Create"/>
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to Link", "Index")
</div>

@section scripts{
    @Scripts.Render("~/bundles/jqueryval")
} 
```

如果需要，我准备提供我的代码来解决这个问题。

```
namespace MyApp.Models 
{
    public class ObjInfo 
    {
        /// <summary>
        /// Properties declaration.
        /// </summary>
        public int m_ID;
        public string m_Address;
        public string m_City;
        public string m_ContactName;
        public string m_ContactTitle;
        public string m_Country;
        public string m_Name;
        public string m_Email;
        public string m_FaxNumber;
        public string m_Notes;
        public string m_PhoneNumber;
        public string m_PostalCode;
        public string m_Region;

        /// <summary>
        /// Default Constructor.
        /// </summary>
        public CustomerInfo()
        {

        }

        /// <summary>
        /// Overloaded constructor with parameters.
        /// </summary>
        /// <param name="_adress"></param>
        /// <param name="_city"></param>
        /// <param name="_contactName"></param>
        /// <param name="_contactTitle"></param>
        /// <param name="_country"></param>
        /// <param name="_customerID"></param>
        /// <param name="_name"></param>
        /// <param name="_mail"></param>
        /// <param name="_faxNumber"></param>
        /// <param name="_notes"></param>
        /// <param name="_phoneNumber"></param>
        /// <param name="_postalCode"></param>
        /// <param name="_region"></param>
        public CustomerInfo(string _adress, string _city, string _contactName, string _contactTitle, string _country, int _customerID, string _customerName,
            string _mail, string _faxNumber, string _notes, string _phoneNumber, string _postalCode, string _region)
        {
            this.m_Address = _adress;
            this.m_City = _city;
            this.m_ContactName = _contactName;
            this.m_ContactTitle = _contactTitle;
            this.m_Country = _country;
            this.m_CustomerID = _customerID;
            this.m_CustomerName = _customerName;
            this.m_EbayCustomer = _ebayCustomer;
            this.m_Email = _mail;
            this.m_FaxNumber = _faxNumber;
            this.m_Notes = _notes;
            this.m_PhoneNumber = _phoneNumber;
            this.m_PostalCode = _postalCode;
            this.m_Region = _region;
        }

        /// <summary>
        /// Destructor.
        /// </summary>
        ~CustomerInfo()
        {

        }

        /// <summary>
        /// Dispose method.
        /// </summary>
        public virtual void Dispose()
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:06:58.110

确保您的模型类在每个属性上都有公共设置器，即

```
public string m_Address { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:10:35.083

```
namespace MyApp.Models 
{
    public class ObjInfo 
    {
        /// <summary>
        /// Properties declaration.
        /// </summary>
        public int m_ID {get; set;};
        public string m_Address {get; set;};
        public string m_City {get; set;};
        public string m_ContactName {get; set;};
        public string m_ContactTitle {get; set;};
        public string m_Country {get; set;};
        public string m_Name {get; set;};
        public string m_Email {get; set;};
        public string m_FaxNumber {get; set;};
        public string m_Notes {get; set;};
        public string m_PhoneNumber {get; set;};
        public string m_PostalCode {get; set;};
        public string m_Region {get; set;}; 
```

# c++ - 使用 C++ 检测进程崩溃的最佳方法是什么

> ID：14966154
> 
> 赞同：3
> 
> 时间：2013-02-19T19:52:49.573
> 
> 标签：c++, winapi, windows-7, windows-kernel

有什么方法可以检测 Windows 7 中的进程崩溃？澄清一下，在每个进程崩溃时，windows 都会创建 WERfault.exe（windows 错误报告）。我有驱动程序通过使用内核的现有内核回调机制来监视系统。当某个进程事件发生时，回调会通知我的驱动程序（使用 PsSetCreateProcessNotifyRoutine）。问题是我看到由 svchost.exe 创建的 WERfault.exe 但我找不到解决哪个进程崩溃的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:13:36.257

将您的应用程序设置为[自动调试器](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb204634%28v=vs.85%29.aspx)。如果您想提供通常的 UI，这可以在真正的 WER 上传递事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T08:18:00.340

-> 有什么方法可以检测 Windows 7 中的进程崩溃？

是的，您可以使用 AdPlus 脚本，可以与命令行一起使用。它可以与windbg一起使用，我认为它可以解决你的问题。Adplus 将所有进程内存转储到一个文件中。

# java - 如何插入一个java列表 使用Mybatis？

> ID：14966155
> 
> 赞同：1
> 
> 时间：2013-02-19T19:52:52.233
> 
> 标签：java, ibatis, mybatis

我想使用 Mybatis 将字符串列表插入到我的数据库中的单个列中。我试过使用自定义类型处理程序，但我什至无法让 Mybatis 调用它。

有关我已经完成的工作的更详细报告，请单击[此处](https://stackoverflow.com/questions/14762471/how-do-configure-the-dao-files-to-handle-inserting-a-liststring-in-mybatis)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:48:18.597

在为语句指定参数时，`INSERT`这样做：

```
INSERT INTO tableName(a) VALUES(#{aVal, typeHandler=com.test.YourTypeHandler}) 
```

`aVal`您传递给语句的参数在哪里。除了类型处理程序的全名之外，您还可以使用它的别名。但是不要忘记在 MyBatis 的配置文件中注册它（typeHandler）

**已编辑**

一个好的做法是指定要插入的值的类型，如下所示： `#{aVal, jdbcType=VARCHAR, typeHandler=com.test.YourTypeHandler}`. 它将使您免受 aVal 空值的问题

# graph - 如何合并图中的节点？

> ID：14966157
> 
> 赞同：5
> 
> 时间：2013-02-19T19:52:54.517
> 
> 标签：graph, graphviz, graph-algorithm

我想合并在我的应用程序中语义相同的节点。有什么工具或算法可以用来处理我的图表吗？

**输入示例：**节点**a**和**b**应合并。

```
digraph g {                                                                     
  a -> {b;c;d;e};                                                               
  b -> {a;c;d;e};                                                               
} 
```

使用图形的图像`dot`：

![节点 a 和 b 应该合并](../Images/9a0d705769e2b8eadd5fac68f2f3959f.png)

**输出示例：**节点**a**和**b**已合并到节点**ab**中。

```
digraph g {                                                                     
  ab -> {c;d;e};                                                                
} 
```

![在此处输入图像描述](../Images/8a43299985342c0debdbf56c0604833e.png)

**粗略草图算法：**

```
# XE = a set of nodes, represent a directed edge (x,_)
# YE = a set of nodes, representing a directed edge (y,_)
# XE \ y = XE except y
# YE \ x = YE except x

For each pair of nodes x,y
  If (edges (x,y) and (y,x) exists) AND (XE \ y == YE \ x)
    create new node xy -> xedges\y
    delete nodes x and y and their edges 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:46:26.153

有一个工具：叫做[`gvpr`](http://www.graphviz.org/pdf/gvpr.1.pdf)图形*模式扫描和处理语言*。

从链接的pdf：

> **gvpr是一个受****awk**启发的图形流编辑器。它将输入图复制到其输出，可能会转换它们的结构和属性，创建新图或打印任意信息。

我相信你可以通过创建一个 gvpr 程序来实现你所需要的。

我没有时间创建有效的解决方案，但您可以查看[此答案](https://stackoverflow.com/a/7362207/63733)以获取示例 gvpr 程序和其他信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:55:59.833

Graphviz 中没有内置这样的功能，但是您可以借助[不相交的集合数据结构对图形进行预处理](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)

# c# - 从 Visual Studio 2012 分发 Outlook 加载项

> ID：14966158
> 
> 赞同：1
> 
> 时间：2013-02-19T19:52:58.733
> 
> 标签：c#, visual-studio-2012, installshield, outlook-addin

我为我们的办公室编写了一个 Outlook 加载项，我希望将其提供给其他人进行测试。

我的谷歌搜索表明我应该在解决方案中创建一个 InstallShield 项目并使用它，但是我的 Visual Studio 安装只打开一个存在死链接的 InstallShield 下载页面。

在此失败之后，我尝试使用 bin 目录中的文件手动将加载项添加到 Outlook，但它告诉我它是一个无效的加载项。

对于如何继续使此加载项可用于分发，我在这里有点茫然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:04:51.323

您可以使用单击一次，在解决方案资源管理器中右键单击 Outlook 项目，然后选择发布并按照向导进行操作。唯一的问题是您需要签署 click-once 应用程序，因为 Office 插件特别关注安全性。

[这个](https://stackoverflow.com/questions/5864297/how-do-i-deploy-outlook-addin-using-clickonce)问题有更多细节。

# perl - hashref 检查使用 if 条件返回 null

> ID：14966168
> 
> 赞同：0
> 
> 时间：2013-02-19T19:53:56.343
> 
> 标签：perl, hashref

使用 perl 有一段时间了，但经常遇到这种情况，比如说，$results 是一个 hashref，代码如下：

```
$results->{'Key_1'} = 'Valid_string';
if ( $results->{'Key_1'} ) {  ---> this doesn't return true
   Code to do something .....
} 
```

如果我的问题很清楚，谁能解释一下，为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:57:48.573

我猜的唯一原因是这`$results`不是*HASH 引用*，或者您的“有效字符串”实际上是一个整数：`0`

您可以使用以下方法对其进行测试：

```
print ref $results; 
```

它应该返回

> 哈希（0x.......）

如果没有，那就有问题了。

* * *

像这样更好的测试以避免任何意外：

```
if (exists($results->{'Key_1'})) {
    # ...
} 
```

看[`perldoc perlreftut`](http://perldoc.perl.org/perlreftut.html)

并且[`perldoc -f exists`](http://perldoc.perl.org/functions/exists.html)：

> 存在 EXPR
> 
> 给定一个指定散列元素的表达式，如果散列中的指定元素曾经被初始化，则返回 true，即使相应的值未定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:17:11.097

That's not going to happen for that string. That could be true for other strings.

```
$results->{'Key_1'} = '';     # Empty string is false.
$results->{'Key_1'} = '0';    # Zero is false. 
```

Or maybe you didn't assign a string at all

```
$results->{'Key_1'} = 0;      # Zero is false.
$results->{'Key_1'} = undef;  # Undef is false. 
```

[`defined`](http://perldoc.perl.org/functions/defined) will return true for the empty string and zero:

```
if ( defined( $results->{'Key_1'} ) ) { 
```

[`exists`](http://perldoc.perl.org/functions/exists) will return true for the empty string, zero and undef:

```
if ( exists( $results->{'Key_1'} ) ) { 
```

# java - 需要复制的代码按钮

> ID：14966174
> 
> 赞同：0
> 
> 时间：2013-02-19T19:54:07.180
> 
> 标签：java, android, multithreading, ticker

我得到了如下所示的按钮代码，但它只有一个按钮和一个 textview 我的项目需要的意思是需要有两个或多个按钮将计入单独的系统但使用相同的代码。将包括下面的主要代码，但任何在系统中添加更多功能的帮助都非常受欢迎！

**主要代码**

```
package com.example.counter;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    // Private member field to keep track of the count
    private static int mCount = 0;

    private TextView countTextView;
    private Button countButton;
    public static final String PREFS_NAME = "com.example.myApp.mCount";
    private SharedPreferences settings = null;
    private SharedPreferences.Editor editor = null;

    /** ADD THIS METHOD **/
    @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);  
      setContentView(R.layout.main);
      countTextView = (TextView) findViewById(R.id.TextViewCount);
      countButton = (Button) findViewById(R.id.ButtonCount);

      countButton.setOnClickListener(new View.OnClickListener() {
          public void onClick(View v) {
              mCount++;
              countTextView.setText("Count: " + mCount);
              editor = settings.edit(); 
              editor.putInt("mCount", mCount);
              editor.commit();
          }
      });
    settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);

     }

    @Override
    public void onPause() {
      super.onPause();  
    }

    @Override
    public void onResume() {
      super.onResume();  
      mCount = settings.getInt("mCount", 0);
      countTextView.setText("Count: " + mCount);
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:17:38.593

在您的 xml 中创建 3 个按钮，假设它们的 id 是 ButtonCount、ButtonCount2 和 ButtonCount3 以及被声明的 countButton2 和 countButton3。然后将它们初始化如下：

```
 countButton = (Button) findViewById(R.id.ButtonCount);

  countButton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
          mCount++;
          countTextView.setText("Count: " + mCount);
          editor = settings.edit(); 
          editor.putInt("mCount", mCount);
          editor.commit();
      }
  });

  countButton2 = (Button) findViewById(R.id.ButtonCount2);

  countButton2.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
          //do something here
      }
  });

  countButton3 = (Button) findViewById(R.id.ButtonCount3);

  countButton3.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
          //do something else here
      }
  }); 
```

# php - PHP：如何在一个页面上使用会话，而另一个页面正在加载会话

> ID：14966177
> 
> 赞同：0
> 
> 时间：2013-02-19T19:54:25.593
> 
> 标签：php, curl, session-variables, progress

我正在使用 CURL 从外部 url 下载一个大文件并将其保存在我的服务器上。这可能需要几分钟。在下载运行时，我正在使用 curl_setopt($ch, CURLOPT_PROGRESSFUNCTION,.. 运行匿名函数，该函数会使用当前下载信息定期更新我的 $_SESSION['download_progress'] 变量。

现在，所有这一切都发生在 upload.php 文件中，当用户等待文件下载时，我使用 javascript 请求 progress.php 页面，其中包含以下简单代码：

```
session_start();
echo $_SESSION['download_progress']; 
```

这允许我的 javascript 代码显示有关下载进度的信息。

除了它不工作。

在“upload.php”完成加载之前，“progress.php”页面不会加载（换句话说，两个页面仅在文件完成下载后加载），这并不好。session_start() 以某种方式阻止了“progress.php”页面的加载。我使用自己的服务器（apache + php 5.4），所以我拥有所有管理员权限。

我怎么解决这个问题？我可以使用一些丑陋的解决方法，比如将下载信息写入文本文件而不是会话变量，然后使用 javascript 直接读取该文本文件，但我宁愿不这样做。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:04:08.140

您有文件系统支持的会话的经典问题。您的上传脚本在其持续时间内锁定会话支持文件，因此在释放锁定之前无法访问会话信息。

这里有几种可能的解决方案，但最简单的一种是您的上传脚本定期释放会话并再次锁定它；这将为您的进度脚本在此期间阅读会话留下机会。

要释放会话锁定，请[`session_write_close`](http://php.net/manual/en/function.session-write-close.php)随时从您的上传脚本调用。这使您无法访问会话变量，直到您`session_start`稍后再次调用。您可以随意重复此循环。

还有其他更强大的解决方案。例如，您可以将进度信息移动到某个在脚本执行期间不会保持锁定的存储机制；您可以根据他们的会话 ID 识别每个用户的信息（如果存在，您无需*启动*会话即可获取其 ID）。

# c# - 将 LINQ 用于 CSV 数据

> ID：14966178
> 
> 赞同：4
> 
> 时间：2013-02-19T19:54:32.747
> 
> 标签：c#, linq, csv

只要数据中没有任何逗号，我的代码就可以很好地工作。

```
IEnumerable<Account> AccountItems = from line in File.ReadAllLines(filePath).Skip(1)
                let columns = line.Split(',')
                select new Account
                {
                    AccountName = columns[0],
                    BKAccountID = columns[1],
                    Brand = columns[2],
                    FirstOE = columns[3],
                    LastOE = columns[4]
                }; 
```

但输出包含带逗号的数据，当数据中有逗号时，将数据用双引号括起来。我不确定我是否仍然可以使用 LINQ 来执行此操作。

```
Acme Health Care,{C2F9A7DD-0000-0000-0000-8B06859016AD},"Data With, LLC",2/4/2013,2/18/2013 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T19:57:42.410

看看这个问题： [Reading CSV files using C#](https://stackoverflow.com/questions/3507498/reading-csv-file)

```
TextFieldParser parser = new TextFieldParser(@"c:\temp\test.csv");
parser.TextFieldType = FieldType.Delimited;
parser.SetDelimiters(",");
while (!parser.EndOfData) 
{
    //Processing row
    string[] fields = parser.ReadFields();
    foreach (string field in fields) 
    {
        //TODO: Process field
    }
}
parser.Close(); 
```

当 .NET 可以握住您的手时，无需重新发明轮子。

# d3.js - 过滤数据的最佳实践

> ID：14966179
> 
> 赞同：3
> 
> 时间：2013-02-19T19:54:42.227
> 
> 标签：d3.js

我的看法是，在使用过滤器构建动态图表时，每次用户请求过滤数据时，我都可以

1.  执行一个新的 MySQL 查询，并使用 MySQL 进行过滤。

    ```
    SELECT date,
      SUM(IF( `column` = `condition`, 1, 0)) as count
      ... 
    ```

2.  执行一个新的 MySQL 查询，并使用服务器端语言（在我的例子中是 PHP）进行过滤。

    ```
    function getData(condition)  {
      $resultSet = mysqli_query($link, "SELECT date, column ... ");

      $count = 0;
      while ($row = mysqli_fetch_assoc($result_set)) {
          if ($row['column'] == 'condition') {
              $count++;
          }
      }
    } 
    ```

3.  最初执行单个 MySQL 查询，将所有数据传递给客户端，并使用 Javascript & d3 进行过滤。

我希望答案不是非黑即白。例如，如果某个过滤器几乎没有被请求，那么让其他 95% 的用户等待相关数据可能没有意义，因此过滤器将需要一个新的数据调用。但我真的在考虑边缘情况 - 过滤器经常使用但特殊的情况。在这种情况下，将过滤逻辑放在前端、后端还是在我的数据库查询中更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T02:38:40.997

一般来说，如果过滤*可以*在前端进行，*应该*在前端进行。优点是：

*   如果您的服务器出现故障也没关系
*   为您节省带宽成本
*   节省用户等待往返时间

缺点是它可能比后端更慢且更复杂。但是，取决于数据量，在很多情况下（例如您的示例），Javascript 已经足够好了。d3 甚至有一个内置的过滤器功能：

```
//remove anything that isn't cake
d3.selectAll('whatever')
  .filter(function(d){return d.type != 'cake'})
  .remove() 
```

如果您需要更复杂的过滤，例如基本聚合，您可以使用[Crossfilter](http://square.github.com/crossfilter/)（也来自 Mike Bostock）或出色的 d3+crossfilter 包装器[dc.js。](http://nickqizhu.github.com/dc.js/)

# php - 视图和变量

> ID：14966180
> 
> 赞同：1
> 
> 时间：2013-02-19T19:54:44.737
> 
> 标签：php, kohana-3

我是 Kohana 框架的新手。

我想创建控制器并在视图中显示变量。

我的控制器 Start.php：

```
 <?php defined('SYSPATH') or die('No direct script access.');

class Controller_Start extends Controller_Template {

    public function action_index()
    {
        $view = View::factory('start')
                    ->set('title', array('tytul 1', 'tytul 2'));

                $this->response->body($view);
    }

} 
```

在 APPPATH/views 中有 Start.php：

```
<h1><?php echo $title[0] ?></h1> 
```

当我打开网站有错误：

```
View_Exception [ 0 ]: The requested view template could not be found 
```

当我显示来自操作的数据时：

```
$this->response->body('test'); 
```

当我打开网站时有“测试”

我的观点有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:46:24.923

Your controller is missing the template definition, Piotr.

What you have to do in your Controller is to define what view your controller need to use:

```
class Controller_Start extends Controller_Template {

    // This has to be defined
    public $template = 'start';

    public function action_index()
    {
        $this->template->set('title', array('tytul 1', 'tytul 2'));

        // No need to do this if you're extending Controller_Template
        // $this->response->body($view);
    }
} 
```

`my_view` is the filename (without the .php extension) of a template file located in your `/application/views` folder. If it's in a subfolder, then provide it in there, e.g.:

```
public $template = 'subfolder/start'; 
```

Note that it has to be defined as string, as the [`Controller_Template::before()`](http://kohanaframework.org/3.3/guide-api/Controller_Template#before) method will transform it to a [View object](http://kohanaframework.org/3.3/guide-api/View). This means that you do not have to create your own `$view` object within the `action_index()`, unless you want to override the default one. Then you'd need to do something like:

```
class Controller_Start extends Controller_Template {

    public function action_index()
    {
        $view = View::factory('start')
                    ->set('title', array('tytul 1', 'tytul 2'));

        $this->template = $view;

        // And that's it. Controller_Template::after() will set the response
        // body for you automatically
    }
} 
```

If you want to have full control over the template and don't want Kohana to interfere I'd suggest not extending the `Controller_Template` class, but rather use the plain `Controller` and render the view yourself, e.g.:

```
class Controller_Start extends Controller {

    public function action_index()
    {
        $view = View::factory('start')
                    ->set('title', array('tytul 1', 'tytul 2'));

        // Render the view and set it as the response body
        $this->response->body($view->render());
    }
} 
```

# dns - 为 EC2 实例上的 memcached 配置主机名

> ID：14966181
> 
> 赞同：0
> 
> 时间：2013-02-19T19:54:51.367
> 
> 标签：dns, amazon-ec2, memcached, hostname

我在我的每个 EC2 Web 服务器实例上使用 Memcached。我不确定如何在服务器级别为 memcache 节点配置各种主机名。

考虑以下示例：

```
<?php 
$mc = new Memcached() 
$mc->addServer('node1', 11211); 
$mc->addServer('node2', 11211); 
$mc->addServer('node3', 11211); 
```

`node1`, `node2`,是如何`node3`配置的？

我已经阅读了一些设置来配置实例并使用这些条目进行`hostname`更新。`/etc/host`但是，我对配置这些东西还不够熟悉。

我正在寻找一种可扩展的解决方案——处理添加和删除实例——并且是自动的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:37:33.150

这样做的困难在于在您的应用程序中保持更新的主机列表。当可以添加和删除主机时，使此列表保持最新可能是一个挑战。您也许可以使用某种代理，这有助于为您的应用程序提供一个恒定的端点。

如果你不能使用代理，我有几个想法。

1.  如果主机列表是静态的，则为每个 memcached 主机分配一个弹性 ip。在 ec2 区域内，这将解析为其关联的主机的本地 IP 地址。有了这个想法，您就有了一个应用程序可以使用的主机列表。

2.  如果您要定期添加/远程主机，您需要能够动态更新您的应用程序将使用的主机列表。您可以在 EC2 api 中查询具有特定标签的实例，然后获取所有这些实例的 IP 地址。将列表缓存在内存或磁盘上，然后将其与您的应用程序一起加载。如果您每分钟运行一次，任何主机更改都应在 1 分钟内传播，除非 EC2 api 更新缓慢。

# ios - IOS 到 REST-ful MVC Api 服务 - [Get] 有效，但参数无法通过 [Post] 到达服务器

> ID：14966184
> 
> 赞同：0
> 
> 时间：2013-02-19T19:54:55.717
> 
> 标签：ios, rest, post, asp.net-mvc-4

我认为标题说明了这一点。我可以很好地访问我的 api 控制器上的 Get 函数。我可以使用 Post 方法，但我的参数 (macAddress) 为空。我在 xcode 中尝试了此代码的许多变体：

```
 NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@",baseURL,controller]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                       cachePolicy:NSURLRequestUseProtocolCachePolicy
                                                   timeoutInterval:60.0];
[request setHTTPMethod:@"POST"];
NSString *postString = @"macAddress=testestest";
NSData *myRequestData = [ NSData dataWithBytes: [ postString UTF8String ] length: [ postString length ] ];
[request setHTTPBody:myRequestData];

[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];

NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

和控制器：

```
 public String Post([FromBody]string macAddress)
    {
        //......
    } 
```

（我知道我正在使用同步请求和零响应/错误，只是想弄清楚这方面）

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:11:32.517

看起来您的 *postString 没有 [NSString stringWithFormat 方法]。我将以下代码与我自己的 restful API 一起使用。

```
NSString *deviceToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"rsdevicetoken"];

NSString *postString = [NSString stringWithFormat:@"token=%@&active=%@&draw=%@&result=%@&message=%@",deviceToken,allNotify, draw, results, message];
NSData *postData = [postString dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:@"http://www.someurl.com/updateSubscriptions"]];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:postData];

NSError *error;
NSURLResponse *response;
NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *data=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
NSLog(@"%@", data); 
```

希望这会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:39:00.397

这是一个疯狂的猜测，但如果您的`macAddress`帖子参数具有以下格式：`01:23:45:67:89:ab`您需要将 ':' url 编码为 '%3A'。

# html - 打印 div 进入文本框时

> ID：14966193
> 
> 赞同：2
> 
> 时间：2013-02-19T19:55:11.520
> 
> 标签：html, css, printing, css-float

对于一个普通的网页，我正在尝试打印 A4 尺寸的页面......网页在没有打印的情况下工作正常......当我在打印后看到页面时，最后一个 div 进入文本框....如何使最后一个 div 留在右边.....

[http://jsfiddle.net/D7vgU/embedded/result/](http://jsfiddle.net/D7vgU/embedded/result/)

```
<div style=" width: 300px; display: inline-block; position: relative; bottom: 39px; float: right;">

  <span style="color: #000; font-size: 12px; font-family: arial; font-wieght: bold; margin-left: 45px;">
    Mark Up
  </span>
  <span style="margin-left: 110px;">
    10%
  </span>

  <div>

    <span style="margin-left: 45px;">
      Non-Tax Amount
    </span>
    <span style="margin-left: 59px;">
      0
    </span>

  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:44:02.667

你可以使用：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css"> 
```

或者

```
@media print {/*printer only styles here*/} 
```

# html - 响应式设计中的文章和无序列表溢出

> ID：14966195
> 
> 赞同：1
> 
> 时间：2013-02-19T19:55:19.027
> 
> 标签：html, css, media-queries

我有一个由三篇文章组成的网站。我为响应式设计设置了几个媒体查询，但是当我调整大小时，文章的 ul 和 li 元素似乎溢出了文章（在 iphone5 上测试）。我可以通过将文章的高度设置为 200% 来解决这个问题，但如果可以的话，我想避免这种情况。文章和ul背后的CSS：

```
#about {
background-color: #ebebeb;
width: 100%;
height: 100%;
margin: 0;
padding: 0;
}

#about h1 {
text-align: center;
margin: 0;
padding-top: 3em;
}

#about ul {
display: block;
width: 100%;
margin: 5em auto;
list-style: none;
padding: 0;
-webkit-transition: all 0.3s ease-in-out;
-moz-transition: all 0.3s ease-in-out;
-o-transition: all 0.3s ease-in-out;
 transition: all 0.3s ease-in-out;
}

#about ul  li {
width: 20%;
float: left;
vertical-align: top;
margin:0 6.6666665%;
font-size: .8em;
-webkit-transition: all 0.3s ease-in-out;
-moz-transition: all 0.3s ease-in-out;
-o-transition: all 0.3s ease-in-out;
 transition: all 0.3s ease-in-out;
}

#about ul li img {
display: block;
margin-left: 2em;
-webkit-transition: all 0.3s ease-in-out;
-moz-transition: all 0.3s ease-in-out;
-o-transition: all 0.3s ease-in-out;
 transition: all 0.3s ease-in-out;
} 
```

这是一个 jsFiddle => [http://jsfiddle.net/sKvqF/](http://jsfiddle.net/sKvqF/) 如果没有所有必要的代码，很难重新创建它给出的效果，但我希望有人能在我的代码中的某个地方发现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:46:09.187

我不是 100% 确定，你所说的“溢出”是指什么，但如果你浮动列表项，你很可能希望在你的 ul 上包含一个 clearfix，例如：

```
#about ul:before, #about ul:after { content: ""; display: table; }
#about ul:after { clear: both; }  
#about ul { zoom: 1; } 
```

请参阅[https://stackoverflow.com/a/6539954/1696030](https://stackoverflow.com/a/6539954/1696030) 但也要注意 CSS 选择器的高特异性，请参阅 fe [http://csswizardry.com/2011/09/when-using-ids-can-be -课堂上的痛苦/](http://csswizardry.com/2011/09/when-using-ids-can-be-a-pain-in-the-class/)

# oauth-2.0 - oAuth 2 谷歌登录 - access_token 和 refresh_token

> ID：14966196
> 
> 赞同：1
> 
> 时间：2013-02-19T19:55:24.537
> 
> 标签：oauth-2.0, access-token

据我了解，access_token 的寿命很短，大约 1 小时，然后如果用户想登录，我应该使用 refresh_token 来获取新的 access_token。我在测试中观察到的是，即使在第二天我尝试登录时，谷歌也没有要求我进行身份验证就让我登录了，这有点令人困惑。（在这个测试中我没有使用 refresh_token）有人可以向我解释一下何时以及为什么使用 refresh_token。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-06T21:53:34.823

我知道这个问题可能太老了，只是为了未来的读者......

您可能在另一个选项卡中打开了 gmail 或（任何其他 google 页面）。只要有一个活动的谷歌页面，您的访问令牌就会被刷新。

# joomla - Joomla - 覆盖 getItem 方法

> ID：14966202
> 
> 赞同：3
> 
> 时间：2013-02-19T19:55:49.023
> 
> 标签：joomla, content-management-system, overriding, joomla2.5

我想覆盖在文件 \administrator\components\com_content\models\article.php 中找到的方法 getItem()

*第 257 行* `public function getItem($pk = null)`

我需要根据变量 $pk 的值来修改返回值。

我该怎么做呢？

我希望找到一种不修改核心的方法。

另外，如果可以覆盖，我可以用它做一个插件吗？

我正在使用 Joomla 2.5.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:03:23.540

通过更多搜索，发现了一个漂亮的解决方案。

我所需要的只是覆盖 com_content 下的模型（article.php）。这样就搞定了。

使用[Plugin Override](http://extensions.joomla.org/extensions/style-a-design/templating/15611)插件可以覆盖 Joomla 核心。[在digitaldisseny](http://www.digitaldisseny.com/en/blog/94-joomla-override-model-view-controller-part-one)上找到了一篇很棒的文章

关于覆盖 Joomla! 的文档！使用这个的核心 MVC[在这里](http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core)

希望它也对其他人有所帮助。

任何更好的想法都非常受欢迎。

# python - Python: Most efficient way to toggle "verbose" output?

> ID：14966204
> 
> 赞同：2
> 
> 时间：2013-02-19T19:55:51.687
> 
> 标签：python, logging, function-pointers

So, I have a script with a lot of debugging output that I can toggle on/off with a -v flag. My current code looks like this:

```
def vprint( obj ):
    if args.verbose:
        print obj 
```

However, I'm thinking this is inefficient since every time I call `vprint()`, it has to jump to that function and check the value of `args.verbose`. I came up with this, which should be slightly more efficient:

```
if args.verbose:
    def vprint( obj ):
        print obj
else:   
    def vprint( obj ):
        pass 
```

While the `if` is now removed, it still has to jump to that function. So I was wondering if there was a way to define `vprint` as something like a function pointer that goes nowhere, so it could skip that altogether? Or is Python smart enough to know not to waste time on a function that's just `pass`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:36:36.510

Unless your performance analysis has lead you here, it's probably not worth optimizing. A quick set of tests yields a minor (0.040) improvement over 1000000 iterations:

```
 1000004 function calls in 0.424 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.424    0.424 <string>:1(<module>)
        1    0.242    0.242    0.424    0.424 test.py:14(testit)
        1    0.000    0.000    0.424    0.424 test.py:21(testit1)
  1000000    0.182    0.000    0.182    0.000 test.py:6(vprint)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}

         1000004 function calls in 0.408 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.408    0.408 <string>:1(<module>)
  1000000    0.142    0.000    0.142    0.000 test.py:10(vprint2)
        1    0.266    0.266    0.408    0.408 test.py:14(testit)
        1    0.000    0.000    0.408    0.408 test.py:18(testit2)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects} 
```

Test code follows;

```
#!/usr/bin/python

import cProfile

verbose=False
def vprint(msg):
    if verbose:
        print msg

def vprint2(msg):
    pass

def testit(fcn):
    for i in xrange(1000000):
        fcn(i)

def testit2():
    testit(vprint2)

def testit1():
    testit(vprint)

if __name__ == '__main__':
    cProfile.run('testit1()')
    cProfile.run('testit2()') 
```

# javascript - 使用 Javascript 获取支持 bean 的值

> ID：14966205
> 
> 赞同：14
> 
> 时间：2013-02-19T19:55:52.003
> 
> 标签：javascript, jsf, jsf-2

*JSF 2.0、Mojarra 2.0.1、PrimeFaces 3.4.1*

有类似的问题，但我需要某事。别的; javascript 函数必须等待支持 bean 方法，该方法正在填充要从 js 函数中提取的变量。我想说的是：

```
<p:commandLink action="#{statusBean.getStatuses}" oncomplete="afterLoad()"/> 
```

假设 js 函数只是获取值并将其打印到屏幕上。

```
function afterLoad() {    
    alert("#{statusBean.size}");
} 
```

这是生日孩子：

```
@ManagedBean
@ViewScoped
public class StatusBean {
    public int size=0;
    List<Status> panelList = new ArrayList<Status>();
    public void getStatuses() {
        this.panelList = fillList();
        this.size = panelList.size(); //Assuming 3
    }
    //getter and setters
} 
```

因此函数将大小警报为 0，这是它的初始值，而我们期望看到 3。

**它是如何工作的：**如果我将`@PostConstruct`注释添加到 bean 的头部，它肯定会得到正确的大小，因为 bean 在页面加载之前就已经构建好了。但这意味着多余的进程，在 commandlink 操作之后才需要的值。那么如何推迟js功能呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-19T20:08:39.253

JSF/EL 和 HTML/JS 不同步运行。相反，JSF/EL 在 webserver 中运行并生成 HTML/JS，而 HTML/JS 又在 webbrowser 中运行。在浏览器中打开页面，右键单击并*查看源代码*。你看，没有一行 JSF/EL。它是一个和所有的 HTML/JS。代替您的 JS 函数，您将看到：

```
function afterLoad() {    
    alert("0");
} 
```

正是这个 JS 函数在您的命令按钮操作完成时被调用。所以结果是完全可以预料的。

基本上，您想让 JSF 重新渲染那段 JS。

```
<p:commandLink action="#{statusBean.getStatuses}" update="afterLoad" oncomplete="afterLoad()"/>
<h:panelGroup id="afterLoad">
    <h:outputScript>
        function afterLoad() {    
            alert("#{statusBean.size}");
        }
    </h:outputScript>
</h:panelGroup> 
```

根据您没有说明的具体功能要求，可能有更优雅的方法。例如, `RequestContext#execute()`,`<o:onloadScript>`等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-19T20:09:30.147

你的 JavaScript 中的 EL 是在页面渲染时计算的，你可以更新它的容器（如果它在某个 JSF 组件中），但我会建议另一种方法。

当您发出 AJAX 请求时，您可以在`getStatuses()`方法中添加回调参数。您可以为此使用 Primefaces 的`RequestContext`实用方法`addCallBackParam()`：

```
public void getStatuses() {
    this.panelList = fillList();
    this.size = panelList.size();
    RequestContext.getCurrentInstance().addCallBackParam("size", this.size);
} 
```

你可以在 xhtml 中使用这个参数：

```
<p:commandLink action="#{statusBean.getStatuses}" oncomplete="afterLoad(xhr, status, args)"/>

<script type="text/javascript">
  function afterLoad(xhr, status, args) {    
    alert(args.size);
  }
</script> 
```

# javascript - JavaScript 同步两个数组（对象）/查找增量

> ID：14966207
> 
> 赞同：8
> 
> 时间：2013-02-19T19:55:59.197
> 
> 标签：javascript, sync

我有两个数组，旧的和新的，它们在每个位置保存对象。我将如何同步或查找增量（即与旧数组相比，新数组中的新内容、更新内容和删除内容）

```
var o = [
    {id:1, title:"title 1", type:"foo"},
    {id:2, title:"title 2", type:"foo"},
    {id:3, title:"title 3", type:"foo"}
];

var n = [
    {id:1, title:"title 1", type:"foo"},
    {id:2, title:"title updated", type:"foo"},
    {id:4, title:"title 4", type:"foo"}
]; 
```

通过以上数据，以id为key，我们发现id=2的item有更新的title，id=3的item被删除，id=4的item是新的。

是否存在具有有用功能的现有库，或者是循环和内循环的情况，比较每一行..例如

```
for(var i=0, l=o.length; i<l; i++)
{   
    for(var x=0, ln=n.length; x<ln; x++)
    {
        //compare when o[i].id == n[x].id    
    }  
} 
```

这种比较三遍，找到新的、更新的和删除的？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-19T20:28:14.893

没有什么魔法可以做你需要的。您需要遍历这两个对象以查找更改。一个好的建议是将您的结构转换为地图以加快搜索速度。

```
/**
 * Creates a map out of an array be choosing what property to key by
 * @param {object[]} array Array that will be converted into a map
 * @param {string} prop Name of property to key by
 * @return {object} The mapped array. Example:
 *     mapFromArray([{a:1,b:2}, {a:3,b:4}], 'a')
 *     returns {1: {a:1,b:2}, 3: {a:3,b:4}}
 */
function mapFromArray(array, prop) {
    var map = {};
    for (var i=0; i < array.length; i++) {
        map[ array[i][prop] ] = array[i];
    }
    return map;
}

function isEqual(a, b) {
    return a.title === b.title && a.type === b.type;
}

/**
 * @param {object[]} o old array of objects
 * @param {object[]} n new array of objects
 * @param {object} An object with changes
 */
function getDelta(o, n, comparator)  {
    var delta = {
        added: [],
        deleted: [],
        changed: []
    };
    var mapO = mapFromArray(o, 'id');
    var mapN = mapFromArray(n, 'id');    
    for (var id in mapO) {
        if (!mapN.hasOwnProperty(id)) {
            delta.deleted.push(mapO[id]);
        } else if (!comparator(mapN[id], mapO[id])){
            delta.changed.push(mapN[id]);
        }
    }

    for (var id in mapN) {
        if (!mapO.hasOwnProperty(id)) {
            delta.added.push( mapN[id] )
        }
    }
    return delta;
}

// Call it like
var delta = getDelta(o,n, isEqual); 
```

有关示例，请参见[http://jsfiddle.net/wjdZ6/1/](http://jsfiddle.net/wjdZ6/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-15T16:33:38.103

这是`@Juan Mendes`答案的打字稿版本

```
 mapFromArray(array: Array<any>, prop: string): { [index: number]: any } {
    const map = {};
    for (let i = 0; i < array.length; i++) {
      map[array[i][prop]] = array[i];
    }
    return map;
  }

  isEqual(a, b): boolean {
    return a.title === b.title && a.type === b.type;
  }

  getDelta(o: Array<any>, n: Array<any>, comparator: (a, b) => boolean): { added: Array<any>, deleted: Array<any>, changed: Array<any> } {
    const delta = {
      added: [],
      deleted: [],
      changed: []
    };
    const mapO = this.mapFromArray(o, 'id');
    const mapN = this.mapFromArray(n, 'id');
    for (const id in mapO) {
      if (!mapN.hasOwnProperty(id)) {
        delta.deleted.push(mapO[id]);
      } else if (!comparator(mapN[id], mapO[id])) {
        delta.changed.push(mapN[id]);
      }
    }

    for (const id in mapN) {
      if (!mapO.hasOwnProperty(id)) {
        delta.added.push(mapN[id]);
      }
    }
    return delta;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-03T12:01:11.497

`@Juan Mendes`与内置地图相同，但效率更高（在查找附加值时）

```
function mapDelta(oldMap, newMap, compare) {

    var delta = {
        added: [],
        deleted: [],
        changed: []
    };

    var newKeys = new Set(newMap.keys());

    oldMap.forEach(function (oldValue, oldKey) {
        newKeys.delete(oldKey);
        var newValue = newMap.get(oldKey);
        if (newValue == undefined) {
            delta.deleted.push({ key: oldKey, value: oldValue });
            return;
        }
        else if (!compare(oldValue, newValue)) {
            delta.changed.push({ key: oldKey, oldValue: oldValue, newValue: newValue });
        }
    });

    newKeys.forEach(function (newKey) {
        delta.added.push({ key: newKey, value: newMap.get(newKey) });
    });

    return delta;
} 
```

并使用`typescript`

```
function mapDelta<K, T>(oldMap: Map<K, T>, newMap: Map<K, T>, compare: (a: T, b: T) => boolean) {

  const delta = {
    added: [] as { key: K, value: T }[],
    deleted: [] as { key: K, value: T }[],
    changed: [] as { key: K, oldValue: T, newValue: T }[]
  };

  const newKeys = new Set(newMap.keys());

  oldMap.forEach((oldValue, oldKey) => {
    newKeys.delete(oldKey);
    const newValue = newMap.get(oldKey);
    if (newValue == undefined) {
      delta.deleted.push({ key: oldKey, value: oldValue });
      return;
    } else if (!compare(oldValue, newValue)) {
      delta.changed.push({ key: oldKey, oldValue: oldValue, newValue: newValue });
    }
  })

  newKeys.forEach((newKey) => {
    delta.added.push({ key: newKey, value: newMap.get(newKey) });
  })

  return delta;
} 
```

# c# - Hits Object Deprecated in Lucene.Net 3.03，我该如何替换它？

> ID：14966208
> 
> 赞同：6
> 
> 时间：2013-02-19T19:56:02.200
> 
> 标签：c#, full-text-search, lucene.net

我正在通过 lucene 工作，并被 Hits 对象的这个问题所困扰。我有一个 Using Lucene.Net.Search 但由于某种原因 VS12 Express 找不到 Hits 对象，因此以下内容无法编译。

编译器抱怨这一行

```
Hits hits = searcher.Search(booleanQuery, hits_limit); 
```

带有以下错误消息

> 错误 1 ​​找不到类型或命名空间名称“Hits”（您是否缺少 using 指令或程序集引用？）

我不明白，根据在线教程你需要的是Lucnen.Net.Search

任何建议

```
// validation
if (subqueries.Count == 0) return new List<MATS_Doc>();
// set up lucene searcher
Searcher searcher = new IndexSearcher(_directory, false);
var hits_limit = 1000;
var analyzer = new StandardAnalyzer(Version.LUCENE_30);
BooleanQuery booleanQuery = new BooleanQuery();
foreach (Query fieldQuery in subqueries)
{
    booleanQuery.Add(fieldQuery, Occur.SHOULD);
}
//var parser = new QueryParser(Version.LUCENE_30, searchField, analyzer);
//var query = _parseQuery(searchQuery, parser);
Hits hits = searcher.Search(booleanQuery, hits_limit);
IEnumerable<MATS_Doc> results = _mapLuceneSearchResultsToDataList(hits, searcher);
analyzer.Close();
searcher.Dispose();
return results; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T20:10:02.670

我使用 Lucene.net 3.0.3，Search() 返回一个**TopDocs**对象，其中包含一些属性和一组 ScoreDoc 元素。这是一个例子：

```
Lucene.Net.Search.TopDocs results = searcher.Search(booleanQuery, null, hits_limit);

foreach(ScoreDoc scoreDoc in results.ScoreDocs){
    // retrieve the document from the 'ScoreDoc' object
    Lucene.Net.Documents.Document doc = searcher.Doc(scoreDoc.Doc);
    string myFieldValue = doc.get("myField");
} 
```

# ruby - {葡萄}授权

> ID：14966210
> 
> 赞同：12
> 
> 时间：2013-02-19T19:56:06.793
> 
> 标签：ruby, api, authorization, grape-api

我正在尝试在 ruby​​ 中创建一个宁静的 json api - 所以我在Rack 内使用葡萄（ [https://github.com/intridea/grape ）。](https://github.com/intridea/grape)我没有在这个项目中使用 Rails，所以康康舞、魔法等等……似乎不是最好的选择。另外，我讨厌在葡萄的声明性 DSL 中混入一堆命令式逻辑。

虽然葡萄内置了身份验证支持，但我没有看到任何关于授权的信息。看起来这将是一个足够常见的用例，这条路以前会走过，但是在谷歌和葡萄代码库本身进行了一些相当彻底的挖掘之后，我什么也没发现。

有没有人为他们的葡萄项目实施过这样的事情？你用了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-26T03:56:57.967

这可能有点太晚了，但无论如何。我建议您使用*Pundit*进行授权，这非常简单。要在*Grape* API 端点中使用它，您需要包含 Pundit 助手：

```
class API < Grape::API
  format :json

  helpers Pundit
  helpers do
    def current_user
      resource_owner
    end
  end

  mount FoosAPI
end 
```

现在在您的 API 端点中，您应该能够`authorize foo, action?`像在 Rails 控制器中一样使用：

```
class FoosAPI < Grape::API
  get ':id' do
    foo = Foo.find(params[:id])
    authorize foo, :show?
    present foo, with: FooEntity
  end
end 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T19:31:47.807

我想我可以对此发表简短的评论，但是该字段太短了，如果不是正确答案，对不起，但是：

您提到了巫术-我认为这是身份验证系统，与授权无关。（我不知道魔法 gem 的实现——只是从文档中重复声明并假设描述枚举了它替换的此类系统并且它是有效的定义）。我想这只是错误。

你应该问自己的基本问题是......

您开发了多少基于角色的系统？我认为如果这只是公共/私人/管理员角色的问题，您可能应该考虑将其移至不同的 API。

在某些情况下这可能很麻烦，但对于不复杂的非附加角色值得一试。葡萄中的简单挂载将解决OOTB问题。

真正的问题是，如果您考虑一些可扩展/动态的角色系统，或者您只想干活。这可能很痛苦;-)。我认为 Rayan 的 Bytes cancan gem 实现应该可以帮助您了解如何在更高的抽象级别上解决此类问题。对于特定的（没有更高的抽象 - 例如动态角色）实现，只使用来自葡萄的当前给定的助手并将他们的职责委托给模型（基本用法）应该没问题。

```
helpers do
  def current_user
    @current_user ||= User.authorize!(env)
  end

  def authenticate!
    error!('401 Unauthorized', 401) unless current_user
  end
end 
```

所以所有的故事都是关于如何实现 User.authorize!(env) 我相信这应该在你的模型中完成，并且完全取决于你的需要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-17T16:55:22.083

不知道我的回答对你来说是否及时。我最近在 Rails4 项目中遇到了**Grape**和**授权问题。**在尝试之后，我找到了一种方法。在我的项目中，我使用[权威人士](https://github.com/elabs/pundit)进行**授权**，它要求我创建一个**策略**文件夹，并为每个模型创建授权规则，每个规则都是一个 Ruby 类，类似这样（来自权威人士 Github 页面）

```
class PostPolicy < ApplicationPolicy
  def update?
    user.admin? or not record.published?
  end
end 
```

然后在 Grape API 中，我只使用这个类进行授权，代码如下：

```
desc "hide a post"
post :hide do
  authenticate!
  error!( "user unauthorized for this" ) unless PostPolicy.new(current_user, @post).hide_post?
  @post.update hidden: true
  { hidden: @post.hidden }
end 
```

和`authenticate!`助手`current_user`是自定义助手。通过这种方式，我可以重用开发网站部件时创建的授权规则。

这对我有用。希望权威的**方式**可以解决你的**葡萄授权问题**

# php - 从目录中的文件数组创建 Zip

> ID：14966212
> 
> 赞同：3
> 
> 时间：2013-02-19T19:56:10.477
> 
> 标签：php, arrays, zip

我正在尝试从我服务器上文件夹中包含的文件创建一个 Zip 文件。

这是我的代码：

```
$zip = new ZipArchive();
$dirArray = array();
$new_zip_file = $temp_unzip_path.'test_new_zip.zip';

$new = $zip->open($new_zip_file, ZIPARCHIVE::CREATE);
if ($new === TRUE) {
    $handle = opendir($temp_unzip_path);
    while (false !== ($entry = readdir($handle))) {
    $dirArray[] = $entry;
    }
    print_r ($dirArray);
    closedir($handle);
} else {
    echo 'Failed to create Zip';
}

$zip->close(); 
```

我对 PHP 真的很陌生，所以我试图从 PHP 手册中拼凑起来，以及我在网上找到的一些示例。

我已经`print_r`暂时放在那里以确保将条目添加到数组中 - 这是我计划将来放置其余 zip 函数的地方。

我的问题是它没有打印任何东西，所以我不知道文件是否被添加到 zip 中。

我的代码可能全错了（我希望不会），所以如果有人能指出我正确的方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:09:02.437

我稍微修改了您的代码，它创建了一个没有任何问题的 zip 文件。如果这对您不起作用，请检查您在目录中的权限`mydirectory`

```
<pre><?
$temp_unzip_path = './mydirectory/';
$zip = new ZipArchive();
$dirArray = array();
$new_zip_file = $temp_unzip_path.'test_new_zip.zip';

$new = $zip->open($new_zip_file, ZIPARCHIVE::CREATE);
if ($new === true) {
    $handle = opendir($temp_unzip_path);
    while (false !== ($entry = readdir($handle))) {
        if(!in_array($entry,array('.','..')))
        {
            $dirArray[] = $entry;
            $zip->addFile($temp_unzip_path.$entry,$entry);
        }
    }
    print_r ($dirArray);
    closedir($handle);
} else {
    echo 'Failed to create Zip';
}

$zip->close();
?> 
```

# java - 公历法

> ID：14966213
> 
> 赞同：2
> 
> 时间：2013-02-19T19:56:16.567
> 
> 标签：java, calendar, gregorian-calendar

我正在尝试创建一个程序，它接受两个日期作为参数，并返回日期是否在本周，但我在调用`isDateInCurrentWeek`. 当我尝试编译程序时，我收到一条错误消息

```
requestHoliday.java:16: isDateInCurrentWeek(java.util.GregorianCalendar) in requestHoliday cannot be applied to (java.util.Calendar)
      if (isDateInCurrentWeek(startDate) && isDateInCurrentWeek(endDate)); 
```

.

```
import java.util.*;
import java.text.*;

public class hols {
   public static void main( String[] args ) {
      DateFormat df = new SimpleDateFormat("dd MM yyyy");
      Date start = df.parse(args[0]);
      Date end = df.parse(args[1]);
      Calendar startDate = new GregorianCalendar();
      Calendar endDate = new GregorianCalendar();
      startDate.setTime(start);
      endDate.setTime(end);
      if( isDateInCurrentWeek( startDate ) && isDateInCurrentWeek( endDate ));
         System.out.println( "Date is in current week!" );
   }

   public static boolean isDateInCurrentWeek(GregorianCalendar date) {
      Calendar currentCalendar = GregorianCalendar.getInstance();
      int week = currentCalendar.get(Calendar.WEEK_OF_YEAR);
      int year = currentCalendar.get(Calendar.YEAR);
      Calendar targetCalendar = GregorianCalendar.getInstance();
      targetCalendar = date;
      int targetWeek = targetCalendar.get(Calendar.WEEK_OF_YEAR);
      int targetYear = targetCalendar.get(Calendar.YEAR);
      return week == targetWeek && year == targetYear;
   }
} 
```

不太确定问题是什么，因为该方法将公历作为输入，并且两个日期采用公历格式。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:05:16.930

你有一个`;`在末尾`if`，删除它...

公历是日历，而不是相反。如果抽象和通用方法适合您的需要，请更改签名以使用日历。如[“编程到接口”意味着什么？](https://stackoverflow.com/q/383947/1065197)（感谢[路易吉](https://stackoverflow.com/users/1065197/luiggi-mendoza)）。

hols id 不是一个[*好的*班级名称](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)。霍尔斯可能会更好...

此代码运行良好：

```
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

public class Hols {
   public static void main( String[] args ) throws ParseException {
      DateFormat df = new SimpleDateFormat("dd MM yyyy");
      Date start = df.parse( args[0] );
      Date end   = df.parse( args[1] );
      Calendar startDate = new GregorianCalendar();
      Calendar endDate = new GregorianCalendar();
      startDate.setTime(start);
      endDate.setTime(end);
      if( isDateInCurrentWeek( startDate ) && isDateInCurrentWeek( endDate ))
         System.out.println( "Date is in current week!" );
      else
         System.out.println( "Date is NOT in current week!" );
   }

   public static boolean isDateInCurrentWeek( Calendar date ) {
      Calendar currentCalendar = Calendar.getInstance();
      int week = currentCalendar.get(Calendar.WEEK_OF_YEAR);
      int year = currentCalendar.get(Calendar.YEAR);
      Calendar targetCalendar = Calendar.getInstance();
      targetCalendar = date;
      int targetWeek = targetCalendar.get(Calendar.WEEK_OF_YEAR);
      int targetYear = targetCalendar.get(Calendar.YEAR);
      return week == targetWeek && year == targetYear;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T19:57:30.500

当您调用`isDateInCurrentWeek`时，您传入的变量会被输入`Calendar`。将它们声明为`GregorianCalendar`。

或者，如果您不需要任何`GregorianCalendar`特定内容，请更改方法签名`isDateInCurrentWeek`以接受`Calendar`.

# linux - 空整数数组变量输出为零，一些为空。如此迷茫

> ID：14966215
> 
> 赞同：2
> 
> 时间：2013-02-19T19:56:20.790
> 
> 标签：linux, multidimensional-array, ada

我正在编写一个 Ada 程序来解决数独难题。现在我只是想让数组正确填充和输出。我接受这样的文本文档：

```
4 5 7 89 
  2 5 6  
  79  542
  35 6489
   3 8   
 6847 91 
 238  59 
 79 3 2 1
1  6  7 3 
```

其中空格是空方块。数组声明：

```
Sudoku_Array : array (1..9, 1..9) of Integer; 
```

这是为数组赋值的代码。Is_Char_Number 检查字符是否为 0-9，ConverttoNum 将 Char 转换为整数。该数组应该只有一个空值，其中有空格。

```
Open(File, In_File, Argument(1));
while not End_Of_File(File) loop
    for R in 1..9 loop
        for C in 1..9 loop
            Get(File, Char);
            if Is_Char_Number(Char) then
                Sudoku_Array(R,C) := ConverttoNum(Char);
            end if;
        end loop;
    end loop;
end loop; 
```

所以，如果我输入上面未完成的数独谜题，我会得到它（宽度为 2）：

```
 4 0 5 0 732630 8 9-1620489328
326304196088 2 0 56846 6 0 0
-161330220832630 7 91163006750 0 5 4 2
32767-1613303064 3 532630 6 4 8 9
 1 1 0 3 1 8-161330306432630 0
 0 6 8 4 7-1613314008 9 1 1
 0 2 3 8-161330220832630 5 9-1623044096
32630 7 94198472 31264732688 2-1615461819 1
 1 0 6 6-162053872032630 732630 3 
```

我假设疯狂的数字是空数组实例，但其中一些出现为零，就好像它们被设置为整数 0。

那么，有没有办法将整数数组值正确设置为空？而且，有没有办法更好地在屏幕上显示结果？显示一个空格而不是一个疯狂的数字。

谢谢

编辑：谢谢大家，我可能以错误的方式来解决这个问题。我想我可以将其设置为零，而不是尝试将空格设置为空数组值。因为数独中没有零，所以无论如何都必须更改它们。多谢你们！非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:05:34.457

两种简单的方法：选择一种。

1）初始化数组：

```
Sudoku_Array : array (1..9, 1..9) of Integer := (others => (others => 0)); 
```

这可能看起来很奇怪，但是`(others => 0)`将一维数组中的每个元素都设置为 0，而另一个`others =>`子句对每一行都执行此操作。

`else`2) 在子句中添加默认操作。

```
if Is_Char_Number(Char) then
   Sudoku_Array(R,C) := ConverttoNum(Char);
else 
   Sudoku_Array(R,C) := 0;
end if; 
```

我认为这里的初始化更整洁，但两种方式都有其用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:07:47.333

我不知道 Ada 是如何工作的，但你似乎只检查是否有一个 char

```
if Is_Char_Number(Char) then
      Sudoku_Array(R,C) := ConverttoNum(Char);
end if; 
```

所以如果它是一个 char 转换它并把它放在数组中，如果不是？然后你插入一个零，我想它会做你想做的事

# c# - Ajax webservice 在远程机器上不起作用

> ID：14966216
> 
> 赞同：1
> 
> 时间：2013-02-19T19:56:32.783
> 
> 标签：c#, ajax, web-services

我有一个用 c# 编写的 web 服务，供 Windows 手机客户端使用并且可以正常工作。

所以我开发了一个 html5/jquery 来使用相同的 asmx 服务和 Works！

当我尝试从远程机器（页面和服务的主机除外）访问此 html 页面时，它失败了。

这种情况有什么特殊配置吗？

唯一的区别是，从 ajax 调用到 webservice 的地址中的 localhost 更改为主机的固定 ip，我发布到电话设备时也是如此。

这是代码

```
 $.ajax({
        url: "http://localhost:8000/services/webservice.asmx/RetornaPedidoPorMesa",
        type: "POST",
        dataType: "text",
        data: { NumeroMesa: parseInt(querystring("numeroMesa")), 
         CodigoSeguranca: parseInt(querystring("codigo")) },
        success: function (response) {

            var xml = $(response);
            if (xml.find("Retorno").text() != "") {
                var list = $("#pedido").find('ul');
                $("#ulPedido li").remove();

                list.append("<li>Voçê não tem permissão para acessar o pedido</li>");
            } else {

                if (xml.find("Total") != "") {
                    var list = $("#pedido").find('ul');
                    $("#ulPedido li").remove();

                    list.append("<li>" + "Mesa  " + querystring("numeroMesa") + "   -   " + "R$ " + xml.find("Total").first().text() + "</li>");
                }
                if (xml.find("Items") != "") {
                    if (xml.find("RetornoItems") != "") {
                        var list = $("#produtos").find('ul');
                        $("#ulProdutos li").remove();
                        $(xml.find("RetornoItems")).each(function myfunction() {
                            if (parseInt($(this).find("Quantidade").first().text()) > 0)
                                list.append("<li>" + $(this).find("Descricao").text() + "<div style='float:right\;margin-left:30px;margin-top:10px'>" + parseInt($(this).find("Quantidade").first().text()) + " x R$ " + $(this).find("ValorUnitario").first().text() + " = R$ " + $(this).find("Total").first().text() + "</div></li>");

                        });
                    }
                }
            }

        },
        error: function (response) {
            alert("erro de acesso ao serviço.");
        }
    }); 
```

有什么帮助吗？提前致谢...

# c - scanf上的C编程段错误

> ID：14966217
> 
> 赞同：2
> 
> 时间：2013-02-19T19:56:37.263
> 
> 标签：c, segmentation-fault, scanf

我已经编写了以下代码段，但无法理解为什么它无法到达最后一行 printf。我在第 4 行之后立即得到一个段错误。 kill_char 只是用来杀死在前一个 scanf 中添加的“输入”字符。任何帮助将不胜感激，谢谢！

```
int remove = 0;
char kill_char = 'a';
printf("Enter the product number to be removed: ");
scanf("%d", &remove);
scanf("%c", &kill_char);
printf("Does not get here"); 
```

编辑：完整代码如下，removeProduct函数中出现错误

```
 #include <stdio.h>
#include <stdlib.h>

struct product_node {
char *supply_type;
long number;
char *description;
float price;
int quantity_bought;
float retail_price;
int quantity_sold;
struct product_node *next;
};

struct product_node *head;//declaring head out here 
//allows the list to be in scope for the functions

/*Function Prototypes*/
void addProduct();
void removeProduct();
void listProduct();
void listSupplierTypes();
void supplierTypeProfit();
void totalProfit();

void addProduct(){
    char kill_char = 'a';//used to kill the enter characters
    struct product_node *new_node;
    new_node = malloc(sizeof(struct product_node));

    printf("\nEnter a string for type: ");
    scanf( "%s", &(*new_node).supply_type);
    scanf("%c", &kill_char);
    printf("Enter the product number: ");
    scanf("%ld", &(*new_node).number);
    scanf("%c", &kill_char);
    printf("Enter the description: ");
    scanf("%s", &(*new_node).description);
    scanf("%c", &kill_char);
    printf("Enter the wholesale price: ");
    scanf("%f", &(*new_node).price);
    scanf("%c", &kill_char);
    printf("Enter the quantity bought: ");
    scanf("%d", &(*new_node).quantity_bought);
    scanf("%c", &kill_char);
    printf("Enter the retail price: ");
    scanf("%f", &(*new_node).retail_price);
    scanf("%c", &kill_char);
    printf("Enter the quantity sold: ");
    scanf("%d", &(*new_node).quantity_sold);
    scanf("%c", &kill_char);

    struct product_node *walker;
    walker = head;
    int can_insert = 1;
    while (!(walker == NULL))
    {
        if (((*walker).number == (*new_node).number) && ((*walker).supply_type == (*new_node).supply_type))
        {
            can_insert = 0;
        }
        walker = (*walker).next;
    }

    if (can_insert==1)
    {
        (*new_node).next = head;
        head = new_node;
        printf("Insertion Successful");
    }
    else
    {
        printf("\nERROR INSERTING:This product name and number is already in the list\n");
    }
    free(new_node);
}
void removeProduct(){
    int remove = 0;
    char kill_char = 'a';
    printf("Enter the product number to be removed: ");
    scanf("%d", &remove);
    scanf("%c", &kill_char);
    printf("Does not get here");
    struct product_node *walker;
    struct product_node *prev;
    prev = head;
    walker = (*head).next;

    if ((*prev).number == remove)
    {
    head = walker;
    }//points head to second node to remove first

    while (!(walker = NULL))
    {
        if ((*walker).number == remove)
        {
            (*prev).next = (*walker).next;
        }
    }
}
void listProduct(){
    printf("Still unsure what defines a supplier...");
}
void listSupplierTypes(){
    printf("Same as above");
}
void supplierTypeProfit(){
    printf("Again");
}
void totalProfit(){
    float total = 0.0;
    struct product_node *walker;
    walker = head;
    while(!(walker == NULL))
    {
        total += ((float)(*walker).quantity_sold * (*walker).retail_price) - ((float)(*walker).quantity_bought * (*walker).price);
        walker = (*walker).next;
    }
    printf("Total Profit is: $%.2f\n", total);
}

int main()
{
    head = NULL;

    char *temp_type;
    char *temp_description;
    int temp_number, temp_quantity_bought, temp_quantity_sold;
    float temp_price, temp_retail_price;

    while(!feof(stdin))
    {
        scanf( "%s %ld %s %f %d %f %d\n", &temp_type, &temp_number, &temp_description, &temp_price, &temp_quantity_bought, &temp_retail_price, &temp_quantity_sold);

        struct product_node *new_node;
        new_node = malloc(sizeof(struct product_node));
        (*new_node).next = head;
        head = new_node;

        (*head).supply_type = temp_type;
        (*head).number = temp_number;
        (*head).description = temp_description;
        (*head).price = temp_price;
        (*head).quantity_bought = temp_quantity_bought;
        (*head).retail_price = temp_retail_price;
        (*head).quantity_sold = temp_quantity_sold;
    }

    freopen("/dev/tty", "rw", stdin);

    int done=0;
    int selection=0;

    while (!done)
    {
        printf("\nMENU OPTIONS:\n");
        printf("1\. Add a product number\n");//Okay
        printf("2\. Remove a product number\n");
        printf("3\. List the products for a supplier\n");
        printf("4\. List all unique supplier types\n");
        printf("5\. Show profit margin for a specific supplier type\n");
        printf("6\. Show total profit\n");//Okay
        printf("7\. Quit\n");//Okay
        printf("Enter a selection (1-7): ");

        scanf("%d", &selection);
        char garbage = 'a';
        scanf("%c", &garbage);

        switch(selection){
        case 1:
            addProduct();
            break;
        case 2:
            removeProduct();
            break;
        case 3:
            listProduct();
            break;
        case 4:
            listSupplierTypes();
            break;
        case 5:
            supplierTypeProfit();
            break;
        case 6:
            totalProfit();
            break;
        case 7:
            done = 1;
            break;
        default:
            printf("Invalid selection.\n");
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:14:40.163

~~[`remove`](http://linux.die.net/man/3/remove)是标准函数的名称，在`<stdio.h>`. 使用相同名称定义您自己的对象或其他实体具有未定义的行为。该调用可能试图`int`在函数的地址处存储一个值`remove()`。~~

~~尝试选择不同的名称。~~

**更新：**我想我错了。标准头文件中定义的函数名称保留用作*具有外部链接*的标识符；`#include`如果相关标头为d，则它们也保留用作宏名称和文件范围的标识符。两者都不适用于您的情况。不过，避免自己定义此类标识符仍然是一个好主意。

此外，这可能与您看到的症状无关，但是

```
scanf("%d", &obj); 
```

如果输入是一个语法上有效的整数，其值超出`int`.

执行*确实*到达了您的“未到达此处”行。您没有看到它，因为在程序终止之前没有打印缓冲的输出。改变这个：

```
printf("Does not get here"); 
```

对此：

```
printf("Does not get here\n");
fflush(stdout); 
```

当我在 下运行您的程序时`gdb`，我在以下位置看到了段错误：

```
if ((*walker).number == remove) 
```

我在编译过程中也收到了几个警告：

```
c.c: In function ‘addProduct’:
c.c:32:5: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘char **’ [-Wformat]
c.c:38:5: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘char **’ [-Wformat]
c.c: In function ‘main’:
c.c:134:9: warning: format ‘%s’ expects argument of type ‘char *’, but argument 2 has type ‘char **’ [-Wformat]
c.c:134:9: warning: format ‘%ld’ expects argument of type ‘long int *’, but argument 3 has type ‘int *’ [-Wformat]
c.c:134:9: warning: format ‘%s’ expects argument of type ‘char *’, but argument 4 has type ‘char **’ [-Wformat] 
```

这很容易导致内存损坏。修复这些，看看会发生什么。

**更新 2：**

我不知道您的代码可能还有哪些其他程序，但是：

```
while (!(walker = NULL))
{  
    if ((*walker).number == remove)
    {  
        (*prev).next = (*walker).next;
    }
} 
```

几乎可以肯定是错误的。`=`您正在使用可能需要相等比较的赋值运算符`==`。修复后，代码会更清晰，如下所示：

```
while (walker != NULL)
{
    if (walker->number == remove)
    {
        prev->next = walker->next;
    }
} 
```

这就是当我在 gdb 告诉我段错误在线后快速查看时跳出来的`if ((*walker).number == remove)`。

尝试自己使用调试器，一次解决一个问题，并注意任何编译器警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:44:52.153

您的 printf 没有出现，因为它没有从缓冲区中刷新，只需在字符串末尾使用“\n”，您就会看到它：

```
printf("Does not get here\n"); 
```

因此，错误不在`scanf`，而是在这一行：

```
walker = (*head).next; 
```

正如我所看到的，程序可能会在`head`未分配时到达那里，因此您可以在函数的开头检查它：

```
void removeProduct(){
    int remove = 0;
    char kill_char = 'a';
    if (head == NULL) {
        printf("No product to remove!\n");
        return;
    } 
```

我不确定是否还有其他错误，但这是我注意到的。

`kill_char`顺便说一句，您可以通过在格式字符串的开头和结尾插入空格来避免使用`scanf`：

```
scanf(" %d ", &remove); 
```

它将跳过所有白色字符（如制表符、空格和换行符）。而且，如果你真的只想跳过一个，而且只有一个，你可以使用`*`忽略匹配：

```
scanf("%d%*c", &remove); 
```

# ruby - 我无法安装 ruby racer - 由于某种原因我无法创建 Makefile

> ID：14966224
> 
> 赞同：1
> 
> 时间：2013-02-19T19:56:52.037
> 
> 标签：ruby, homebrew, therubyracer

```
Installing therubyracer (0.11.0) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/jamesharrington/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb 
checking for main() in -lpthread... yes
checking for main() in -lobjc... yes
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/jamesharrington/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
    --with-pthreadlib
    --without-pthreadlib
    --with-objclib
    --without-objclib
    --enable-debug
    --disable-debug
/Users/jamesharrington/.rvm/gems/ruby-1.9.3-p327/gems/therubyracer-0.11.0/ext/v8/build.rb:50:in `build_with_rubygem_libv8': undefined local variable or method `libv8_include_flags' for main:Object (NameError)
    from extconf.rb:20:in `<main>'

Gem files will remain installed in /Users/jamesharrington/.rvm/gems/ruby-1.9.3-p327/gems/therubyracer-0.11.0 for inspection.
Results logged to /Users/jamesharrington/.rvm/gems/ruby-1.9.3-p327/gems/therubyracer-0.11.0/ext/v8/gem_make.out
An error occurred while installing therubyracer (0.11.0), and Bundler cannot continue.
Make sure that `gem install therubyracer -v '0.11.0'` succeeds before bundling. 
```

**osx 10.7.5
rails 3.2.3
ruby​​ 1.9.3p327（2012-11-10 修订版 37606）[x86_64-darwin11.4.2]**

如果有人能帮我弄清楚为什么我无法安装 therubyracer，我将不胜感激。

这是 /Users/jamesharrington/.rvm/gems/ruby-1.9.3-p327/gems/therubyracer-0.11.0/ext/v8/gem_make.out

```
/Users/jamesharrington/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
checking for main() in -lpthread... yes
checking for main() in -lobjc... yes
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/jamesharrington/.rvm/rubies/ruby-1.9.3-p327/bin/ruby
    --with-pthreadlib
    --without-pthreadlib
    --with-objclib
    --without-objclib
    --enable-debug
    --disable-debug
/Users/jamesharrington/.rvm/gems/ruby-1.9.3-p327/gems/therubyracer-0.11.0/ext/v8/build.rb:50:in `build_with_rubygem_libv8': undefined local variable or method `libv8_include_flags' for main:Object (NameError)
    from extconf.rb:20:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:04:23.030

这帮助我解决了同样的错误：

```
bundle update therubyracer libv8 
```

# html - 网页不会滚动

> ID：14966225
> 
> 赞同：-1
> 
> 时间：2013-02-19T19:56:57.300
> 
> 标签：html, webpage, windows-server-2003

我制作的网页不允许我滚动。我怎样才能解决这个问题？除了查看代码之外，您还可以在[此地址](http://dsafatlanta.info/dsaf)查看实时网站 此外，这些选项卡仅在某些 Web 浏览器上查看。如何在所有浏览器上制作它？

```
 <!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!-- Consider adding a manifest.appcache: h5bp.com/d/Offline -->
<!--[if gt IE 8]><!--> <html class="no-js b1" lang="en"> <!--<![endif]--> <!--[TO PUT THE BACKGROUND BACK, CHANGE "b1" to "bg1"-->
<head>
  <meta charset="utf-8">

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/i/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title></title>
  <meta name="description" content="">

  <!-- Mobile viewport optimized: h5bp.com/viewport -->
  <meta name="viewport" content="width=device-width">

  <!-- Place favicon.ico and apple-touch-icon.png in the root directory: mathiasbynens.be/notes/touch-icons -->

  <link rel="stylesheet" href="css/style.css">
   <link rel="stylesheet" type="text/css" href="css/jquery.jqzoom.css">  

  <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <!-- More ideas for your <head> here: h5bp.com/d/head-Tips -->

  <!-- All JavaScript at the bottom, except this Modernizr build.
       Modernizr enables HTML5 elements & feature detects for optimal performance.
       Create your own custom Modernizr build: www.modernizr.com/download/ -->
  <script src="js/libs/modernizr-2.5.3.min.js"></script>
</head>
<body>
  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->
  <header>
<h1>The Down Syndrome Awareness Foundation (DASF)</h1>
  </header>
  <div id="image">
  <img src="img/zoom.png">    
        <a href="img/big.JPG" class="MYCLASS" title="DSAF Logo">  
    <img src="img/small.JPG" title="Our Logo">  
    </a>  
  </div>

   <div id="back" >
  <img src="img/back.png" alt-text="Back" title="Back">    
  </div>

  <div role="main" id="container">

    <div id="primary">
        <h2>TITLE ONE</h2>
        </pre>
        <p>TEXT</p>
        <p>MORE TEXT, ANOTHTER PARAGRAPH</p>

    </div>

    <div id="content" class="one-edge-shadow">
        <!-- <h2>Main content</h2> -->
        <div id="tabContainer">
        <div class="tabs">
            <ul>
            <li id="tabHeader_1">About the Disorder</li>
            <li id="tabHeader_2">TAB 2</li>
            <li id="tabHeader_3">Commercial</li>
            </ul>
  </div>
  <div class="tabscontent">
    <div class="tabpage" id="tabpage_1">
        <h2>HEADER ONE</h2>
        <p><strong>What is Down Syndrome?:</strong></p>
        <p></p>
        <p><strong>Quality of Life:</strong></p>
        <ul>
        <li>A person with Down Syndrome in 1900 could expect to live to about 9-11 years. Now, patients with Down Syndrome live to 50 years old, with a ratio of 1:10 living to 70
        <li>About 92% of pregnant women with babies with Down Syndrome elect to terminate the pregnancy
        <li>Rate of bullying to children is increased to children with disorders is much higher
        <li>Increase risk for Alzheimer’s Disease, Cancers, Celiac Disease, and Vision and Hearing Impairment
        </ul>
        <p><strong>Severity:</strong></p>
        <p></p>
        <p><strong>Famous Cases:</strong></p>
        <p></p>
        <p><strong>Special Olympics:</strong></p>
        <p></p>
    </div>
    <div class="tabpage" id="tabpage_2">
        <h2>HEADER 2</h2>
        <hr>
      <p><strong>Clinical Science</strong></p>
      <p></p>
      <p><strong>Causes:</strong></p>
                <ul>
                <li>Having a third copy, or part of a third copy of chromosome 21
                <li>1% of cases are hereditary, the other 99% of cases are random or based on the mother’s age being over thirty-five (35) years 
                </ul>
      <p><strong>Symptoms:</strong></p>
                <ul>
                <li>Delayed physical, social, and intellectual development</li>
                <li>Decreased muscle tone</li>
                <li>Short neck, excess skin on the back of the neck</li>
                <li>Flattened facial profile</li>
                <li>Upward slanting eyes</li>
                <li>Skin fold that comes out from the upper eyelid and covers the corner of the eye</li>
                <li>Wide, short hands and short fingers</li>
                <li>A single deep crease in the palm of the hand</li>
                <li>White spots on the coloured part of the eye</li>
                <li>Deep groove between the first and second toes</li>
                </ul>
      <p><strong>Treatment</strong></p>
      <p>There is no cure for Down Syndrome, however there are treatments to minimalise the symptoms and the conditions associated with them. Speech and coordination can be improved by occupational therapy and special education.</p>
      <p><strong>Heart Defects Related to Down Syndome</strong></p>
      <p></p>
    </div>
    <div class="tabpage" id="tabpage_3">
        <h2>As Seen on "The Today Show"</h2>
      <p>PARAGRAPH ONE BECAUSE I'M SO LAZY AND CAN'T ADD MORE, SORRY</p>
    </div>
      </div>
        <!-- <p>Inner containers can be set using % measurements which are relative to the parent container.</p>
        <p>If the outermost container is set in 'em' and the inner containers are set in % everything will ultimately be relative to the font-size.</p>
        <p>To create elastic grids you can do the initial math using absolute px measurements and then use the following formula to convert to relative measurements.</p>
        <p><strong>target &divide; context = result</strong></p> -->
        <div id="button-box">

            <a  class="button">About Us</a>

        </div>
    </div>

    <div id="secondary" class='visuallyhidden'>
        <h2>Seconday Sidebar</h2>
        <pre>
#secondary {
  float:left;
  width:25%;
}
        </pre>
        <p>One potential gotcha is if you change font-sizes on internal containers. That can change the context of measurements inside the container.</p>
        <p>You can mitigate this problem by changing font sizes on elements other than the containers themselves.</p>
    </div>
    </div>
    <div id="remedy" class="one-edge-shadow">
        <h2>Meet the Team</h2>
        <p>I CAN PUT BULLETS IN LATER</p>
        <p>BUT IM JUST SO TIRED</p>
        <p>DURRRRR</p>
        <p><strong>I CAN EVEN MAKE IT BOLD!</strong></p>
    </div>
  <footer>

  </footer>

  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
   <!--  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script> -->
  <script src="js/jquery-1.7.2.min.js"></script>
 <script type='text/javascript' src='js/jquery.jqzoom-core.js'></script> 
 <script src="js/acidTabs.js"></script>

  <!-- scripts concatenated and minified via build script -->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>

  <!-- end scripts -->

  <!-- Asynchronous Google Analytics snippet. Change UA-XXXXX-X to be your site's ID.
       mathiasbynens.be/notes/async-analytics-snippet -->
  <script>
    var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
    (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
    g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
    s.parentNode.insertBefore(g,s)}(document,'script'));
  </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:04:23.580

改变：

```
html {
    overflow: hidden;
} 
```

至：

```
html {
    overflow: auto;
} 
```

# visual-studio - “git checkout”不更新文件

> ID：14966232
> 
> 赞同：1
> 
> 时间：2013-02-19T19:57:28.457
> 
> 标签：visual-studio, git-extensions, git-checkout

我使用 git 的工作流程是这样的： 1\. pull --rebase from origin/master 2\. 为特定问题创建一个新分支并在该分支上进行更改 3\. 切换回 master 然后合并新分支已经创建到掌握

从文档页面， git checkout 应该是

> 更新工作树中的文件以匹配索引或指定树中的版本

但是，在我对新分支和结帐主机进行更改并使用“git status”检查状态后，更改的文件仍然存在。

最糟糕的是，我在 Visual Studio 的 git 扩展中使用了“撤消文件更改”选项，现在即使我切换回使用“签出”命令创建的分支，我也不再看到我的更改。无论如何我可以重做这些更改吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:03:03.297

在“结帐大师”之前，您确定要提交您正在处理的分支中的文件吗？

确保在您正在处理的分支中提交文件。否则，如果 git 丢弃更改的文件，您将永远丢失它们。

如果您还不想提交文件，请尝试查看[git stash](http://www.kernel.org/pub/software/scm/git/docs/git-stash.html)。Git stash 允许您临时保存更改，而无需将它们提交到任何分支。

# python - 检查两个数组是否具有等效行的最快方法

> ID：14966236
> 
> 赞同：3
> 
> 时间：2013-02-19T19:57:55.247
> 
> 标签：python, arrays, numpy

我试图找出一种更好的方法来检查两个二维数组是否包含相同的行。以以下案例为例：

```
>>> a
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
>>> b
array([[6, 7, 8],
       [3, 4, 5],
       [0, 1, 2]]) 
```

在这种情况下`b=a[::-1]`。检查两行是否相等：

```
>>>a=a[np.lexsort((a[:,0],a[:,1],a[:,2]))]
>>>b=b[np.lexsort((b[:,0],b[:,1],b[:,2]))]
>>> np.all(a-b==0)
True 
```

这很棒而且相当快。但是，当两行“关闭”时，就会出现问题：

```
array([[-1.57839867  2.355354   -1.4225235 ],
       [-0.94728367  0\.         -1.4225235 ],
       [-1.57839867 -2.355354   -1.4225215 ]]) <---note ends in 215 not 235
array([[-1.57839867 -2.355354   -1.4225225 ],
       [-1.57839867  2.355354   -1.4225225 ],
       [-0.94728367  0\.         -1.4225225 ]]) 
```

在 1E-5 的容差范围内，这两个数组按行相等，但 lexsort 会告诉您其他情况。这可以通过不同的排序顺序来解决，但我想要一个更一般的情况。

我在玩弄这个想法：

```
a=a.reshape(-1,1,3)
>>> a-b
array([[[-6, -6, -6],
        [-3, -3, -3],
        [ 0,  0,  0]],

       [[-3, -3, -3],
        [ 0,  0,  0],
        [ 3,  3,  3]],

       [[ 0,  0,  0],
        [ 3,  3,  3],
        [ 6,  6,  6]]])
>>> np.all(np.around(a-b,5)==0,axis=2)
array([[False, False,  True],
       [False,  True, False],
       [ True, False, False]], dtype=bool)
>>>np.all(np.any(np.all(np.around(a-b,5)==0,axis=2),axis=1))
True 
```

这并不能告诉您数组是否按行相等，只要 in 的所有点`b`都接近`a`. 行数可以是几百，我需要做很多。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:40:36.393

您的最后一个代码没有按照您的想法执行。它告诉您的是 in 中的每一行`b`是否接近 in 中的一行`a`。如果将`axis`用于外部调用的 更改为`np.any`and `np.all`，则可以检查 in 的每一行`a`是否接近`b`. 如果 中的每一行都`b`接近 中的一行`a`，并且 中的每一行都`a`接近 中的一行`b`，则集合相等。可能计算效率不是很高，但对于中等大小的数组，在 numpy 中可能非常快：

```
def same_rows(a, b, tol=5) :
    rows_close = np.all(np.round(a - b[:, None], tol) == 0, axis=-1)
    return (np.all(np.any(rows_close, axis=-1), axis=-1) and
            np.all(np.any(rows_close, axis=0), axis=0))

>>> rows, cols = 5, 3
>>> a = np.arange(rows * cols).reshape(rows, cols)
>>> b = np.arange(rows)
>>> np.random.shuffle(b)
>>> b = a[b]
>>> a
array([[ 0,  1,  2],
       [ 3,  4,  5],
       [ 6,  7,  8],
       [ 9, 10, 11],
       [12, 13, 14]])
>>> b
array([[ 9, 10, 11],
       [ 3,  4,  5],
       [ 0,  1,  2],
       [ 6,  7,  8],
       [12, 13, 14]])
>>> same_rows(a, b)
True
>>> b[0] = b[1]
>>> b
array([[ 3,  4,  5],
       [ 3,  4,  5],
       [ 0,  1,  2],
       [ 6,  7,  8],
       [12, 13, 14]])
>>> same_rows(a, b) # not all rows in a are close to a row in b
False 
```

对于不太大的数组，性能是合理的，即使它必须构建一个数组`(rows, rows, cols)`：

```
In [2]: rows, cols = 1000, 10

In [3]: a = np.arange(rows * cols).reshape(rows, cols)

In [4]: b = np.arange(rows)

In [5]: np.random.shuffle(b)

In [6]: b = a[b]

In [7]: %timeit same_rows(a, b)
10 loops, best of 3: 103 ms per loop 
```

# jquery - 在使用 addMethod 进行 jquery Validate 之前清理数据

> ID：14966242
> 
> 赞同：1
> 
> 时间：2013-02-19T19:58:33.003
> 
> 标签：jquery, jquery-validate

我有一个看似简单的任务，但我无法弄清楚如何去做。

我有一个使用 jquery validate 插件进行验证的表单。我有一个自定义验证，它验证您在 text/textarea 字段中是否具有所有有效的 ascii 字符，我们使用 $.validator.addMethod() 功能将其连接到任何具有“ascii”类的字段。

我的问题是我想保留验证，但我也有一个单独的短 javascript 函数来清理那些垃圾字符。我想在验证抱怨它无效之前对输入字段运行清理。

我尝试在它返回 true 或 false 之前将清理放入验证方法中，但没有奏效。我尝试将其绑定到 blur 事件，但没有成功。

将它绑定到 keyup 事件是可行的，但我觉得这是一个 hack。我只是想让它做它的事情，并把它与验证联系起来，这样它就知道在检查该字段的有效性之前要进行清理。

我在这里找到了一个名为 bindFirst 的 jquery 扩展：[How to order events bound with jQuery](https://stackoverflow.com/questions/290254/how-to-order-events-bound-with-jquery)

并尝试将清理“首先”绑定到模糊事件，但这没有用。

我想我可以使用“依赖”功能提取我需要的东西，但是在使用自定义验证时这似乎不是一个选项。

在我提到的所有场景中......它确实执行了清理，但直到它已经抱怨该字段无效。只需返回该字段并退出即可删除错误消息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:38:09.037

您只需要利用 Validate 插件的内置回调函数之一。如果要使用`onfocusout`，则修改默认`onfocusout`回调函数。

**默认`onfocusout`回调**：

```
onfocusout: function( element, event ) {
    if ( !this.checkable(element) && (element.name in this.submitted || !this.optional(element)) ) {
         this.element(element);
    }
} 
```

**建议用法**：

请注意如何保留核心功能以不干扰其他字段。

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // rules & options,
        onfocusout: function (element, event) {
            if (!this.checkable(element) && (element.name in this.submitted || !this.optional(element))) {
                if (element.name == "yourfield") {
                    // your code to do cleanup on name="yourfield"
                }
                this.element(element);  // <-- this triggers validation on the field
            }
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/WTjTy/](http://jsfiddle.net/WTjTy/)**

`input`演示将在指定字段模糊时触发模拟“清理”，就在显示任何错误之前。

# mysql - 如果某行存在于另一个表中的某一天和某个时间段，则从表中省略该行

> ID：14966245
> 
> 赞同：1
> 
> 时间：2013-02-19T19:58:43.993
> 
> 标签：mysql

我正在尝试编写一个查询，如果在某个日期/时间找到另一个表中的一行，则它会省略它，但如果确实如此，它会包含它。

它目前省略了该行，但如果在某个日期/时间未找到，则不包括它。我该如何纠正这个问题？

```
SELECT * FROM ts_room
WHERE
id <>
(SELECT status
FROM ts_request rq
LEFT JOIN ts_allocation a ON a.request_id = rq.id
WHERE 
day_id=1 AND period_id=2
OR a.status IS NOT NULL
AND a.status IN ('Pending','Declined','Failed')) 
```

这是我的 SQL 小提琴[http://sqlfiddle.com/#!2/c8da9/49](http://sqlfiddle.com/#!2/c8da9/49)

# android - 清单错误

> ID：14966249
> 
> 赞同：0
> 
> 时间：2013-02-19T19:59:02.713
> 
> 标签：android, xml

嗨，我正在编写一个 android gps 教程，但在 AndroidManifest.xml 中出现错误。错误是“错误解析 xml：文档元素后的垃圾”，并显示在清单开始标记行。任何想法是什么问题？我尝试删除“xmlns......android”，但这不起作用..

```
<?xml version="1.0" encoding="utf-8"?>
<View xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</View>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.ballincoliig.gun.powder.mills.walking.trail"
    android:versionCode="1"
    android:versionName="1.0">
    <application android:versionName="@drawable/icon" android:label="@string/app_name">
        <activity android:name="GPSActivity"
                android:label="@string/app_name">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN"/>
                    <category android:name="android.intent.category.LAUNCHER"/>
                    </intent-filter>
                    </activity>
          <uses-library android:name="com.google.android.maps" />       
        </application>
        <uses-sdk android:minSdkVersion="4"/>

        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
        <uses-permission android:name="android.permission.INTERNET"></uses-permission>
        </manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:02:08.040

那个视图是干什么用的？去掉它：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.ballincoliig.gun.powder.mills.walking.trail"
        android:versionCode="1"
        android:versionName="1.0" >

        <application
            android:label="@string/app_name"
            android:versionName="@drawable/icon" >
            <activity
                android:name="GPSActivity"
                android:label="@string/app_name" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <uses-library android:name="com.google.android.maps" />
        </application>

        <uses-sdk android:minSdkVersion="4" />

        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
        <uses-permission android:name="android.permission.INTERNET" />

    </manifest> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:00:10.547

您必须`<View>`在第一行之后删除该元素。

说明：`<View>`元素属于布局，而不是清单。此外，在这种情况下，XML 文件只能有一个顶级（根）节点`<manifest>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:01:13.577

取出`View`. 您的清单不需要/不应包含`View`

[显现](http://developer.android.com/guide/topics/manifest/manifest-element.html)

# networking - 计算真实网络往返

> ID：14966250
> 
> 赞同：-3
> 
> 时间：2013-02-19T19:59:04.420
> 
> 标签：networking, network-protocols

我想更好地了解网络延迟。

假设有一个客户端和两个服务器。客户端向每个服务器发送 1000 个字节，每个服务器立即响应 1000 个字节。

来自客户端的 Ping 往返时间：

*   到**服务器 1** - 2ms
*   到**服务器 2** - 20ms

假设客户端和服务器都连接到质量为 1 Gbps 的管道（但不是通过它们之间的专用线路）。

问题：如何计算从客户端开始发送它的 1000 个字节到它完全接收到响应数据的最后一个字节的实时时间。服务器 1 会接近 2 毫秒，服务器 2 会接近 20 毫秒吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:02:13.383

是的，完全正确！

ping 往返延迟测量一个小数据包从网络上的一个主机传输到另一台主机并返回到原始主机所需的时间。

您应该记住，您获得的数字会根据网络条件和主机处理器的负载而有所波动。您应该在几个样本上平均往返延迟，但要准备好任何其他数据包可能由于各种原因而经历异常延迟。

# sql - 临时表上的内部联接，除非它是空的

> ID：14966252
> 
> 赞同：1
> 
> 时间：2013-02-19T19:59:17.270
> 
> 标签：sql, sql-server, tsql

我想对临时表进行内部连接，但前提是另一个变量不为 NULL？例如，我有一个用户表，我传入一个字符串，其中用户 ID 用分号分隔。我将它读入一个临时表，并针对用户表进行内部连接，但前提是用户 ID 的字符串不为空。否则我想返回所有用户行。

存储过程有一个变量传入：

```
@UidList             varchar(max), 
```

这是一串用户 ID，用分号分隔。这变成了一个临时表

```
DECLARE @List TABLE (UserUid uniqueidentifier NOT NULL) 
```

然后另一个函数将传入的字符串转换为表

```
IF @UidList IS NOT NULL
INSERT INTO @List(UserUid)
SELECT ItemUid
FROM dbo.AFN_ConvertUidListToTable(@UidList) 
```

然后我加入用户表

```
select * from users 
...
inner join @List on users.userid = @List.UserUid` 
```

但是如果传入的字符串@UidList 为空，那么我想匹配用户表中的所有行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:14:16.077

```
declare @tmp table (id int)

--insert into @tmp values (1)

Select * from a
where 
(
ID in (Select ID from @tmp)
or 
(Select Count(ID)  from @tmp)=0
) 
```

[http://sqlfiddle.com/#!3/a1a22/10](http://sqlfiddle.com/#!3/a1a22/10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:07:40.117

当然，这只是查看用户 ID 字符串和分支的情况吗？

```
IF @UserIds IS NULL
  select * from users
ELSE
  'stuff involving tempdb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:29:57.433

如果@UidList IS NULL，左连接将从用户表中获取所有记录：

```
SELECT users.* 
FROM users
LEFT JOIN @List 
ON @List.UserUid = users.userid
WHERE @List.UserUid IS NOT NULL
OR @UidList IS NULL 
```

但是如果@UidList 不为空，那么我们正在寻找匹配项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T20:08:25.193

```
DECLARE @UserCount INTEGER

SELECT @UserCount = COUNT(1) FROM #UserIDList

IF @UserCount > 0
BEGIN
  SELECT UserTable.* FROM UserTable JOIN #UserIDList ON UserTable.ID = #UserIDList.ID
END
ELSE
BEGIN
  SELECT UserTable.* FROM UserTable
END 
```

# mysql - MySQL 的数据库映射工具，以帮助从一个数据库迁移到另一个数据库？

> ID：14966263
> 
> 赞同：1
> 
> 时间：2013-02-19T19:59:53.930
> 
> 标签：mysql, database, wordpress, data-migration

我需要将 WordPress 数据从一个数据库迁移到另一个数据库，其中一些信息需要更改值。例如，我有一个 meta_key 表，我需要将所有值“xyz”更改为“abc”。是否有任何 GUI 工具甚至简单的 php 脚本可以提供帮助？

例如，一个类或函数接受一个当前值数组和一个我想将它们更改为的数组......

GUI 工具将是首选，但任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:48:29.943

MySQL有一个 GUI ( [PHPMyAdmin](http://www.phpmyadmin.net) )，具有出色的导入和导出选项，大多数主机使用 MySQL 作为标准服务提供。在那里，您可以导出任何数据库或选定的表，然后手动替换某些值（假设它是您需要替换的值的简短列表），只需在导出文件中使用记事本的替换功能，然后再将其导入其他数据库.

为此，您不需要任何 SQL 知识，但您需要： 1\. 安装 PHPMyAdmin（通常由托管服务提供） 2\. PHPMyAdmin 导出和导入选项的工作知识（不是火箭科学）

# xslt - XSLT 将命名空间声明从子元素移动到父元素

> ID：14966266
> 
> 赞同：0
> 
> 时间：2013-02-19T20:00:04.023
> 
> 标签：xslt

我有这个来源：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <sc:GetFdrRewardsResponse xmlns:sc="http://somecompany.com/soa/cardaccount1.1/schema"
    xmlns:sc_1="http://somecompany.com/soa/common1.1/schema"
    xmlns:sc_2="http://somecompany.com/soa/common/schema"
    xmlns:sc_3="http://somecompany.com/soa/cardaccount/schema">
      <sc_1:ResponseCode>0000</sc_1:ResponseCode>
      <sc_1:ResponseMessage>Successful Execution</sc_1:ResponseMessage>
      <sc_1:CorrelationId>1234</sc_1:CorrelationId>
      <sc:FdrRewards>
        <sc_2:BankNumber>0175</sc_2:BankNumber>
        <sc:IsRewardsMember>true</sc:IsRewardsMember>
        <sc:IsEligibleToRedeem>true</sc:IsEligibleToRedeem>
        <sc_3:AmazingRewardsBalance>10442.00</sc_3:AmazingRewardsBalance>
        <sc_3:CashBackSavingsBalance>0.00</sc_3:CashBackSavingsBalance>
      </sc:FdrRewards>
    </sc:GetFdrRewardsResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

并且需要这个结果：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <sc_3:GetFdrRewardsResponse 
       xmlns:sc_1="http://somecompany.com/soa/common1.1/schema"
       xmlns:sc_2="http://somecompany.com/soa/common/schema"
       xmlns:sc_3="http://somecompany.com/soa/cardaccount/schema" >
      <sc_1:ResponseCode>0000</sc_1:ResponseCode>
      <sc_1:ResponseMessage >Successful Execution</sc_1:ResponseMessage>
      <sc_1:CorrelationId >1234</sc_1:CorrelationId>
      <sc_3:FdrRewards>
        <sc_2:BankNumber >0175</sc_2:BankNumber>
        <sc_3:AmazingRewardsBalance>10442.00</sc_3:AmazingRewardsBalance>
        <sc_3:CashBackSavingsBalance>0.00</sc_3:CashBackSavingsBalance>
      </sc_3:FdrRewards>
    </sc_3:GetFdrRewardsResponse>
  </soapenv:Body>
</soapenv:Envelope> 
```

我正在使用这个转换：

```
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:sc="http://somecompany.com/soa/cardaccount1.1/schema"
  xmlns:sc_1="http://somecompany.com/soa/common1.1/schema"
    xmlns:sc_2="http://somecompany.com/soa/common/schema"
    xmlns:sc_3="http://somecompany.com/soa/cardaccount/schema"
  >

  <xsl:output method="xml" version="1.0" encoding="UTF-8" standalone="yes" indent="yes"/>

  <xsl:strip-space elements="*"/>

  <xsl:template match="node() | @*">
    <xsl:copy>
       <xsl:apply-templates select="node() | @*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="sc:IsRewardsMember"/>
  <xsl:template match="sc:IsEligibleToRedeem"/>

  <xsl:template match="sc:*">
    <xsl:element name="sc_3:{local-name()}">
      <xsl:apply-templates/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

这几乎可以工作。它将生成的命名空间声明放在每个子元素上，而不是在父元素中声明一次。

有任何想法吗？一个完整的 XSLT 文件会很棒......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:23:27.747

当我将您的 XSLT 更改为以下内容时：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sc="http://somecompany.com/soa/cardaccount1.1/schema" xmlns:sc_1="http://somecompany.com/soa/common1.1/schema" xmlns:sc_2="http://somecompany.com/soa/common/schema" xmlns:sc_3="http://somecompany.com/soa/cardaccount/schema">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" standalone="yes" indent="yes"/> 
    <xsl:strip-space elements="*"/>

    <xsl:template match="node() | @*">
        <xsl:copy>
            <xsl:apply-templates select="node() | @*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="sc:IsRewardsMember"/>
    <xsl:template match="sc:IsEligibleToRedeem"/>

    <xsl:template match="sc:GetFdrRewardsResponse">
        <sc_3:GetFdrRewardsResponse>
            <xsl:apply-templates select="node()|@*"/>
        </sc_3:GetFdrRewardsResponse>
    </xsl:template>
</xsl:stylesheet> 
```

所需的输出几乎就是您想要的，但输出中仍然包含以下命名空间：

```
xmlns:sc="http://somecompany.com/soa/cardaccount1.1/schema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
```

但它不应该伤害任何人

# mysql - 在 MYSQL 中添加没有“创建断言”的检查约束

> ID：14966269
> 
> 赞同：1
> 
> 时间：2013-02-19T20:00:08.100
> 
> 标签：mysql, sql, constraints

我正在尝试向我的数据库中的表 ORDERS 和 RESULTS 添加检查约束，但 MYSQL 不接受断言。如何编辑它以适应 MYSQL 接受的语法？可以用 ALTER TABLE 来完成吗？

```
CREATE ASSERTION
CHECK (NOT EXISTS SELECT * FROM ORDERS, RESULTS, 
WHERE ORDERS.ORDER_NUMBER = RESULTS.ORDER_NUMBER 
AND ORDERS.ORDER_DATE > RESULTS.DATE_REPORTED); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:11:19.423

MySQL 不支持检查约束，因此它们将被忽略。查看[MySQL Doc](http://dev.mysql.com/doc/refman/5.6/en/sql-syntax-data-definition.html)以查看允许的语法。您可以尝试使用触发器来检查插入/更新时插入的数据！

# python - Numpy ndarray 子类 - 在 __array_finalize__ 中强制重塑

> ID：14966273
> 
> 赞同：2
> 
> 时间：2013-02-19T20:00:12.293
> 
> 标签：python, numpy, subclass, multidimensional-array

我遇到以下问题：

我想为这个子类的任何新实例编写一个 ndarray 子类并强制执行形状（-1,3），无论它以何种方式出现——显式构造函数、视图转换或来自模板。

我已经尝试了很多东西，但似乎都没有。我认为我还没有完全掌握基本过程。任何帮助深表感谢！

```
import numpy as np

class test(np.ndarray):
def __new__(cls, *args, **kwargs):
    return np.ndarray.__new__(cls, *args, **kwargs)

def __array_finalize__(self, obj):

#        self.resize(-1,3)
#        self.reshape(-1,3)
#        self=self.reshape(-1,3)
        np.reshape(self,(-1,3))

a=np.array([1,2,3])
b=a.view(test)
c=test(a)
d=a.reshape(-1,3)
print '+++++++'
print a.shape,a
print '+++++++'
print b.shape,b
print '+++++++'
print c.shape,c
print '+++++++'
print d.shape,d 
```

为了澄清我想要做的事情：

我有我想将其一般视为 3D 的矢量场，因此 (:,3) 形状和 (-1,3) 形状调整大小。我正在寻找一个纯粹的面向对象的解决方案来实现一些额外的方法来补充 NumPy 已经提供的功能。

例如，我已经开始纯粹用 ndarrays 写一些东西，但是如果我可以写的话，代码会更易读

```
normalizedVector = ndarray.view(my3DVectorClass).normalize() 
```

而不是

```
normalizedVector = ndarray / ( sum(ndarray**2, axis=1)**0.5 ) 
```

我的第二个问题：

*   我希望不必担心我是否要求形状 (3,) 或 (:,3) 数组的规范化版本。
*   我希望能够在类方法实现中使用纯线性代数术语，而不必为方法定义中的索引和错误/尺寸检查而烦恼

我想您可能会争辩说只使用 my3DVectorClass 的实例，但是在使用所有 SciPy 机器时我必须进行反向视图转换，因为如果我没记错的话，他们期望 ndarray，这将使这些部分成为代码有点臃肿。

如果我的逻辑可能以某种方式出错，我将感谢您的建议。我仍然非常了解 OOP 和 SciPy/NumPy。

已经非常感谢了！

马库斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T09:53:55.283

你应该看看这个[`matrix`类](https://github.com/numpy/numpy/blob/master/numpy/matrixlib/defmatrix.py#L195)是如何实现的。它使用类似的技巧来维护`ndims=2`.

然而，我和许多其他人认为这种诡计比它的价值更麻烦。该类`matrix`在过去引起了很多问题，因为它只是部分表现得像一个正常的`ndarray`. 考虑改为编写函数。您在上面给出的代码示例将是最易读的，如下所示`normalizedVector = normalize(ndarray)`：制作更多的子类并不总是最好的设计，即使使用面向对象的风格也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:02:28.920

`reshape`将尝试使用新形状创建数据视图，如果不能，它将使用新形状创建数据的副本。但是原始对象保持不变。要就地修改形状，您可以执行以下操作：

```
self.shape = (-1, 3) 
```

例如：

```
>>> a = np.arange(9)
>>> a
array([0, 1, 2, 3, 4, 5, 6, 7, 8])
>>> np.reshape(a, (-1, 3)) # creates a view with the new shape
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
>>> a # but the original object is unchanged
array([0, 1, 2, 3, 4, 5, 6, 7, 8])
>>> a.shape = (-1, 3) # this modifies the original object
>>> a
array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]]) 
```

不过你必须小心，因为如果不复制就无法重塑它，它会引发`AttributeError`：

```
>>> a = np.arange(36).reshape(6, 6).T
>>> b = np.reshape(a, (-1, 3)) # creates a copy of the data in a
>>> a.shape = (-1, 3) # tries to reshape in-place, and fails
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: incompatible shape for a non-contiguous array 
```

# javascript - 在 Backbonejs 中解析包含子模型的模型数据

> ID：14966274
> 
> 赞同：0
> 
> 时间：2013-02-19T20:00:14.523
> 
> 标签：javascript, backbone.js, backbone-model

我正在使用 Backbonejs 构建仪表板车辆应用程序。我的一些模型使用 HTTP 持久化回服务器，而其他模型则持久化到本地文件系统，只能通过框架的读/写函数访问。

我的问题专门针对那些我坚持到文件系统的问题，尽管它可能适用于任何一种情况。

我的 Player 模型（您可能已经猜到它处理音频播放）包含一个 Playlist 对象。当应用程序关闭时，我将当前播放器状态保存到文件系统，以便下次启动时可以恢复它。

```
save: function () {
    sdk.write_json_file('player.json', this.toJSON());
} 
```

我看到 toJSON 也自动为包含的模型调用 toJSON，导致存储的 JSON 看起来像：

```
{
    'playing':true,
    'playlist_i': 2
    'playlist':[
        {
            'stream_url': 'http://my.stream.com/blah',
            'title': 'Title goes here',
            'artist': 'Artist goes here',
            ...& other metadata
        },
        ...and so on
    ]
} 
```

那么我有我重写的 fetch 函数：

```
fetch: function () {
    var p = sdk.read_json_file('player.js');
    this.set(this.parse(p), {});
    return this;
} 
```

现在的问题是，一旦调用 fetch ，重置事件就会触发并且我的播放器视图会尝试更新。播放器视图假设播放器模型包含一个播放列表对象。从技术上讲，它确实如此，但此时播放列表只是一个 JavaScript 哈希，因为它尚未被解析为 Playlist 实例。

我想知道根据读取的文件返回的数据，我将在模型中的何处创建播放列表实例。

免责声明：Backbonejs 菜鸟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:26:14.837

我没有足够的上下文来尝试非常具体，但是无论如何，如果您想为 Backbone 编写另一个“适配器”，您可能应该制作自己的 Backbone.sync 适配器，并覆盖同步方法以供相关模型使用你自己的同步适配器。

save/fetch 方法调用 Backbone.sync 适配器，但它们也确保数据得到正确的前/后处理（通过调用 parse，它允许您做的不仅仅是从传递的 json 或类似物中设置特定成员）。

有用于 localStorage、indexedDB 的 Backbone.sync 适配器，可能还有一些用于文件系统 API 的适配器。谷歌上的第一件事是：

[https://github.com/scotthovestadt/Backbone.fileSystem](https://github.com/scotthovestadt/Backbone.fileSystem)

我已经成功地使用了 localStorage 和 indexedDB 的适配器，但还没有尝试过我自己上面链接的那个。

# c# - 如何创建自定义消息泵？

> ID：14966277
> 
> 赞同：4
> 
> 时间：2013-02-19T20:00:17.140
> 
> 标签：c#, multithreading, concurrency, message-queue

我正在做一个小练习，我需要创建类似于消息泵的东西。我有一个工作队列要做，我希望工作完全在一个线程上完成，而任何线程都可以将工作添加到要完成的队列中。

```
Queue<WorkToDo> queue; 
```

线程使用等待句柄告诉泵有工作要做。

```
WaitHandle signal; 
```

只要有工作要做，泵就会循环，然后等待信号再次启动。

```
while(ApplicationIsRunning){
    while(queue.HasWork){
        DoWork(queue.NextWorkItem)
    }
    signal.Reset();
    signal.WaitOne();
} 
```

每个其他线程都可以向队列添加工作并发出等待句柄的信号......

```
public void AddWork(WorkToDo work){
    queue.Add(work);
    signal.Set();
} 
```

问题是，如果添加工作的速度足够快，则可能会出现这样一种情况，即工作可以留在队列中，因为在队列检查工作和 WaitHandle 重置之间，另一个线程可以将工作添加到队列中。

我将如何减轻这种情况而不在 WaitHandle 周围放置昂贵的互斥锁？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:54:30.373

您可以使用它来*更*`BlockingCollection<T>`轻松地实现队列，因为它将为您处理同步：

 *```
public class MessagePump
{
    private BlockingCollection<Action> actions = new BlockingCollection<Action>();

    public void Run() //you may want to restrict this so that only one caller from one thread is running messages
    {
        foreach (var action in actions.GetConsumingEnumerable())
            action();
    }

    public void AddWork(Action action)
    {
        actions.Add(action);
    }

    public void Stop()
    {
        actions.CompleteAdding();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:10:41.377

你不应该做一个完整的互斥锁，但你可以放一个锁语句

```
public void AddWork(WorkToDo work)
{
  queue.Add(work);
  lock(lockingObject)
  {
    signal.Set();
  }
} 
```

使用任何你想要的锁定对象，大多数人会说使用信号本身是一个坏主意。

响应下面的@500 - 服务器内部错误的评论，您可以在工作之前重置信号。以下应该保护的东西：

```
while(ApplicationIsRunning)
{
  while(queue.HasWork)
  {
    WorkItem wi;
    lock(lockingObject)
    {
       wi = queue.NextWorkItem;
       if(!queue.HasWork)
       {
          signal.Reset();
       }
    }
    DoWork(wi)
  }

  signal.WaitOne();
} 
```

这样，如果您有更多工作，内部队列将继续进行。如果没有，它会落入`signal.WaitOne()`，并且只有在没有更多工作排队时我们才会重置。

这里唯一的缺点是，如果在执行时有工作进入，我们可能会连续多次重置`DoWork`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:09:16.167

您可以使用[WaitOne(TimeSpan)](http://msdn.microsoft.com/en-us/library/cc190477.aspx)方法，以便拥有混合信号/轮询循环。基本上指定最多等待 1 秒的时间跨度。这将导致任务在该竞赛中被捕获最多保留一秒钟（或您指定的任何轮询时间）或直到另一个任务添加到您的队列中。*

# ios - 来自 IB 的原型单元参考

> ID：14966278
> 
> 赞同：0
> 
> 时间：2013-02-19T20:00:18.697
> 
> 标签：ios, uitableview, xamarin.ios

我正在`iOS`用故事板做项目`MonoTouch`。

我有 UITableView ( `myCustomTableFoo`) 的自定义类，并在 IB 中指定了此类的原型单元格。然后我想以编程方式实例化这个类。坏事是缺少原型单元格，而且我不知道如何将原型单元格插入到我以编程方式创建的表格对象中。

我有一个故事板，我想`IB`在所有继承的表类中使用我的原型单元格。我认为`MonoTouch`在这种情况下可能与 Objective-c 非常相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:57:32.780

你可以使用

```
this._tableView.RegisterClassForCellReuse(typeof(MyCell), new NSString("MyReuseIdentifier")); 
```

然后你可以使用出列你的单元格

```
this._tableView.DequeueReusableCell("MyReuseIdentifier"); 
```

单元格将被自动实例化。您确实需要使用注册您的类`[Register("MyCell")`，它应该有一个像这样的构造函数

```
public MyCell(IntPtr handle) : base(handle) {

} 
```

不过有一件事，我认为您不能重用您在情节提要中定义的单元格。如果你想在不同的 TableView 实例中重用相同的单元格，你可以为你的单元格创建一个唯一的 Nib，然后类似的东西就可以了：

```
public partial class MyCell : UITableViewCell {

    private MySuperCellView _mySuperNibView;

    public MyCell (IntPtr handle) : base (handle) {

    }

    private void checkState() {
        // Check if this is the first time the cell is instantiated
        if (this._mySuperNibView == null) {
            // It is, so create its view
            NSArray array = NSBundle.MainBundle.LoadNib("NibFileName", this, null);
            this._mySuperNibView = (MySuperCellView)Runtime.GetNSObject(array.ValueAt(0));
            this._mySuperNibView.Frame = this.Bounds;
            this._mySuperNibView.LayoutSubviews();

            this.AddSubview(this._mySuperNibView);
        }
    }

    public object cellData {
        get { return this._mySuperNibView.cellData; }
        set {
            this.checkState();
            this._mySuperNibView.cellData = value;
        }
    }
} 
```

在这里，我使用在外部 Nib 上定义的通用视图。如果尚未实例化，我在将数据输入 Cell 时手动实例化它。它通常发生在第一次实例化 Cell 时。

# visual-studio-2010 - vb6 的目标是什么？

> ID：14966281
> 
> 赞同：0
> 
> 时间：2013-02-19T20:00:29.437
> 
> 标签：visual-studio-2010, vb6

.net 应用程序依赖 CLR 来定位处理器。VB6 代码如何转换为 0 和 1？VB6 代码和处理器之间是什么？我尝试在网上搜索，但所有资源似乎只告诉你如何编写一个 vb6 程序。没有一个解释它是如何工作的。

长话短说：`.net : CLR :: VB6 : ?`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:17:14.377

> VB6 代码如何转换为 0 和 1？

VB6 编译器将代码编译为 0 和 1，然后链接器将其链接到可执行文件中。

> VB6 代码和处理器之间是什么？

有人可能会说，没什么。
或者是虚拟机，如果代码被编译为 PCCode 而不是本机二进制文件（项目设置中的一个选项）。
或者，有人可能会说介于两者之间的是 VB6 运行时，但它比 CLR 运行时要少得多。

> 这些 com+ 组件最初是使用 vb6 构建的。建造它的人早已不复存在。似乎没有人对此了解太多。我需要修复一个 com+ 组件。

知道 VB 是否被编译为本机代码在这里并没有真正的帮助。无论如何，您都必须对其进行调试，并且在任何情况下调试看起来都是一样的。

> 是否可以使用 VS 2010 调试 vb6 程序？

否。
或者，如果您愿意打开非托管代码调试并在汇编程序中调试 VB 组件（并不是说您在发现问题后能够做很多事情），可能会说是。

# php - 使用网络驱动器访问数据库和服务器

> ID：14966283
> 
> 赞同：1
> 
> 时间：2013-02-19T20:00:39.470
> 
> 标签：php, odbc, network-drive

我正在尝试连接到网络驱动器中的访问数据库。我的服务器是 windows 2003 和 ISS。我尝试将访问数据库放在本地驱动器上，并在我的 PHP 代码中使用 odbc connect。它工作得很好。但是，当我将数据库移到网络驱动器上并更改 DSN 后，我尝试使用 UNC 路径和正常的网络驱动器访问。任何人都可以帮助我。我很感激你的时间。

# .net - NLP/探索。回答 - 从数据库中检索信息

> ID：14966285
> 
> 赞同：4
> 
> 时间：2013-02-19T20:00:48.617
> 
> 标签：.net, sql-server, nlp, artificial-intelligence, question-answering

最近我读了一些关于 NLP 的文章，到目前为止，我对一切如何工作有了一个*（非常）*基本的概念，从句子拆分到 POS 标记，以及知识表示。

我知道那里有各种各样的 NLP 库（主要是 Java 或 Python），并且已经找到了一个 .NET 实现（[SharpNLP](http://sharpnlp.codeplex.com/)）。实际上已经很出色了。无需编写任何自定义处理逻辑；只需使用它们的功能，*瞧！*用户输入被很好地分开并带有 POS 标记。

如果我的主要动机是构建一个问答系统（类似于聊天机器人），我不明白从这里去哪里。我可以使用哪些库（最好是 .NET）？如果我想构建自己的知识库，我应该如何表示我的知识？我是否需要将带有 POS 标记的输入解析为我的数据库可以理解的其他内容？如果我使用的是 MS SQL，是否有任何库可以帮助将 POS 标记的输入映射到数据库查询？或者我是否需要根据*程序语义*（我已阅读）编写自己的数据库查询逻辑？

当然，下一步是制定一个结构良好的答复，但我想我可以把它留到以后。现在困扰我的是该领域缺乏资源（**知识表示**，**NLP 到 KB/DB-retrieval**），如果你们中的任何人可以提供您的专业知识，我将非常感激 :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T06:24:13.600

这是一个非常广泛的问题，因此它几乎不适合 StackOverflow 的格式，但我更想试一试。

**首先，关于 NLP 的一句话 NLP**
领域成熟工具的广泛可用性本身就有些误导。当然，从 *POS 标记*或*分块*到*自动摘要*或*命名实体识别*等所有/大多数 NLP 功能都被各种库的逻辑和支持数据所覆盖，并且通常得到很好的服务。然而，从这些构建块构建现实世界的解决方案绝非易事。一个人需要：

*   沿着某种管道或链构建解决方案，从而将特定转换的结果反馈到后续流程的输入中。
*   配置各个流程：这些流程的计算框架已经建立，但它们对基础数据极为敏感，例如训练/参考语料库、可选的调整参数等。
*   选择并验证适当的功能/流程。

对于与从文本中提取和处理语义元素相关的部分解决方案（大体上的信息提取，还有共指消歧、关系提取或情感分析等），上述问题尤其困难。这些 NLP 函数和各种库中的相应实现往往更难配置，对依赖于领域的模式或语音级别的变化甚至支持语料库的“格式”更敏感。

简而言之，NLP 库为问题中提到的“问答系统”等应用程序提供了必要的**构建块，但****需要大量“胶水”**以及如何以及在何处应用胶水的自由裁量权（以及良好的剂量）非 NLP 技术，例如知识表示问题，如下所述）。

**关于知识表示**
如上所述，仅 POS 标记并不是 NLP 管道的充分元素。本质上，词性标记将添加有关文本中每个单词的信息，指示该词的 [可能] 语法角色（如名词、形容词、动词和代词等）。这个词性信息非常有用，因为它允许，对于例如，随后将文本分块成逻辑相关的词组和/或更精确地查找字典、分类法或本体中的单个词。

为了说明某些“问答系统”可能需要的信息提取类型和基础知识表示，我将讨论各种语义搜索引擎中使用的通用格式。但是请注意，对于语义搜索，这种格式可能比规定性更具概念性，并且其他应用程序（例如专家系统或翻译机器）还需要其他形式的知识表示。

这个想法是使用 NLP 技术和支持数据（从简单词典的简单“查找表”，到分类的树状结构，再到用专门语言表达的本体）从文本中**提取实体的*三元组***，结构如下：

*   代理人：某事或某人“做”某事
*   动词：正在做什么
*   对象：完成“做”的人或物品（或更一般地说，关于“做”的一些信息的补充）

示例：
  猫/代理吃/动词鼠标/对象。
  John-Grisham/agent write/动词 The-Pelican-Brief/对象
  奶牛/代理生产/动词牛奶/对象

此外，这种三元组，有时称为“事实”，可以分为与特定语义模式相对应的各种类型，通常围绕动词的语义组织。例如，“ *Cause-Effect* ”事实有一个动词来表达某种因果关系，“ *Contains* ”事实有一个动词来暗示容器到容器的关系，“ *Definition* ”事实用于定义代理/主体的模式[如果仅部分]由对象（例如“猫是哺乳动物”）等。

人们可以很容易地想象如何查询这些事实数据库以提供问题的答案，并提供各种智能和服务，例如同义词替换或提高问题答案的相关性（与普通关键字匹配相比）。

**真正的困难在于从文本中提取事实**。许多 NLP 功能都为此目的而发挥作用。例如，NLP 管道中的步骤之一是用它们引用的名词替换代词（*回指解析*或更一般地 NLP 术语中*的共*指解析）。另一个步骤是识别命名实体：人名、地理位置、书籍等（ NLP 术语中的*NER*）。另一个步骤可能是重写由“AND”连接的子句，以便通过重复隐含的语法元素来创建事实。
例如，上面的 John Grisham 示例可能来自文本摘录，例如
`Author J. Grisham was born in Arkansas. He wrote "A time to Kill" in 1989 and "The Pelican Brief" in 1992"`

Getting to`John-Grisham/Agent wrote/Verb The-Pelican-Brief/Object`暗示（除其他外）：

*   将“J. Grisham”和“The Pelican Brief”识别为特定实体。
*   在第二句中将“He”替换为“John-Grisham”。
*   将第二句重写为两个事实：“John-Grisham 在 1989 年写了 A-time-to-kill”和“John-Grisham 在 1992 年写了 The-Pelican-brief”
*   删除“in 1992”部分（或者更好的是，创建另一个事实，一个“时间事实”：“The-Pelican-brief/Agent is-related-in-time/verb year-1992/object”）（顺便说一句，这将也暗示已确定`1992`为“年”类型的时间实体。）

简而言之：信息提取是一项复杂的任务，即使应用于相对有限的领域以及利用库中可用的现有 NLP 功能时也是如此。这肯定是一个比仅仅从形容词和动词中识别名词更“混乱”的活动；-)

# php - 在同一文件中运行带有 HTML 的 PHP 脚本

> ID：14966288
> 
> 赞同：0
> 
> 时间：2013-02-19T20:01:12.200
> 
> 标签：php, html, mysql

我正在尝试创建一个简单的 PHP 注册和登录表单。在向 register.php 文件添加样式和 HTML 之前，一切都按预期工作。现在，当单击注册时，没有说谢谢您注册，没有任何反应。

```
 <html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div id="wrapper">
<div class="form">

<?php
echo "<h1>Register</h1>";

$submit = $_POST['submit'];

// form data

$fullname = STRIP_TAGS($_POST['fullname']);
$username = STRIP_TAGS($_POST['username']);
$password = STRIP_TAGS($_POST['password']);
$repeatpassword = STRIP_TAGS($_POST['repeatpassword']);
$date = date("Y-m-d");

if ($submit)
{   
    if($fullname&&$username&&password&&$repeatpassword)
    {

    if ($password==$repeatpassword)
    {
        //check char length of username and fullname
        if(strlen($username)>25||strlen($fullname)>25)
        {
            echo "Length of username or fullname is too long!";
        }
        else
        {   //check password length

            if (strlen($password)>25||strlen($password)<6)
            {
            echo "Password must be between 6 and 25 characters";
            }
            else 
            {   //register the user!
                // encrypt password
            $password = md5($password);
            $repeatpassword = md5($repeatpassword);

                //open database

            $connect = mysql_connect("localhost", "Matt", "password123");
            mysql_select_db("phpsignin");

            $queryreg = mysql_query("
            INSERT INTO users VALUES ('','$fullname','$username','$password','$date')`

            ");

            die ("Thankyou for registering! <a href='index.php'> Return to login page</a>");
            }
        }

    }   
    else
        echo "Your passwords do not match!";
    }
    else
        echo "Please fill in <b>all</b> fields!";

}

?>
<form id="login" action='register.php' method='POST'>
    <fieldset>
            <ol>
            <li>
            <label>Your Full Name:
            <input type="text" name='fullname' value='<?php echo $fullname; ?>'>
            </label>
            </li>

            <li>
            <label>Choose a username:
            <input type="text" name='username' value='<?php echo $username;?>'>
            </label>
            </li>

            <li>
            <label>Choose a password:
            <input type="password" name='password'>
            </label>
            </li>

            <li>
            <label>Confirm Your Password:
            <input type="password" name='repeatpassword'>
            </label>
            </li>
    </fieldset>
    <div id="buttonHolder">
    <button type="submit" name="submit">Register</button>
    </div>
</form>

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:05:26.690

您的提交按钮没有`value`，因此`if ($submit)`永远不会是真正的值，并且您的逻辑分支将永远不会运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:20:11.407

改变：

```
$submit = $_POST['submit']; 
```

到：

```
$submit = $_POST; 
```

# sql - SQL Server 2008 查找丢失的行

> ID：14966294
> 
> 赞同：0
> 
> 时间：2013-02-19T20:01:24.663
> 
> 标签：sql, sql-server-2008, gaps-and-islands, missing-data

我有一个巨大的数据库，特别是一个表缺少行。我知道这是真的，但我需要找到差距并展示出来。主键是序号列。我需要显示实际丢失的序列号。该表有 76,054,525 行数据。

更新，序列号由我们的软件提供，每一个都代表一个唯一的“播放”记录。我们的软件不允许在播放序列号中出现间隙。任何差距都会丢失数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:06:29.513

这是一个差距和孤岛问题，很多人都写过如何解决这个问题。例如，Itzik Ben-Gan在 SQL Server MVP Deep Dives 一书的[第 5 章中介绍了它](http://www.manning.com/nielsen/SampleChapter5.pdf)

但是，您为什么担心身份列中的空白？那是自然发生的事情，无法避免。您可以在此处阅读更多相关信息：http: [//sqlity.net/en/792/the-gap-in-the-identity-value-sequence/](http://sqlity.net/en/792/the-gap-in-the-identity-value-sequence/)

# javascript - Ajax 查询不起作用

> ID：14966298
> 
> 赞同：0
> 
> 时间：2013-02-19T20:01:53.983
> 
> 标签：javascript, ajax

我有以下代码：

```
var _07votes = $("#07votes");
$(document).ready(function() {
        setInterval(function() {
                $.ajax({
                        url: "http://services.runescape.com/m=poll/retro_ajax_result?callback=?",
                        method: "GET",
                        contentType: "application/json",
                        dataType: "jsonp",
                        timeout: 10000;
                }).done(function(data){
                        if (data.votes > 0) {
                                _07votes.text("" + data.votes);
                        }
                });
        }, 3000);
}); 
```

我无法让这个 Ajax 代码工作，就像它不会查询一样。有人会知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:03:40.020

您将获得对在结果存在之前放置结果的元素的引用。将其移动到`ready`事件处理程序中：

```
$(document).ready(function() {
  var _07votes = $("#07votes");
  ... 
```

### 编辑：

此外，删除超时值后的分号：

```
timeout: 10000 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-19T20:05:12.980

除了 Guffa 的答案，您必须首先解析 JSON 响应（当您成功检索它时）。

您可以使用 - 方法执行此操作[`jQuery.parseJSON()`](http://api.jquery.com/jQuery.parseJSON/)。

# amazon-web-services - 如何使用 AWS SDK 在远程 EC2 上运行 Java 程序

> ID：14966303
> 
> 赞同：1
> 
> 时间：2013-02-19T20:02:17.150
> 
> 标签：amazon-web-services, amazon-ec2

我是 EC2 和 AWS SDK 的新手。我想从 AWS SDK 或使用 Java API for EC2 在我的 EC2 实例上执行 java 程序。我应该使用哪种方法？如何 ？另外，我如何使用相同的 API 在 EC2 实例上运行命令。

我坚持这一点，任何帮助将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T15:19:32.633

您可以通过 [ec2-run-instances](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-RunInstances.html) 参数在实例启动时执行此操作：user-data 或 user-data-file

Amazon Linux 和 Ubuntu AMI 具有[CloudInit](https://help.ubuntu.com/community/CloudInit) - 它调用在实例初始化时作为用户数据传递的脚本

对于 CLI，它看起来像

```
ec2-run-instances --key [KEYPAIR] --user-data-file [script_file] ami-[your-ami] 
```

script_file 可能看起来像

```
#! /bin/bash
cd path-to-you-program  
java -cp.... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:08:18.193

据我了解，您有一个 ec2 实例设置，其中包含一个 java 程序。要在您的 ec2 上运行 java 程序，您不需要 aws sdk。事实上，要在您的 ec2 上运行任何命令，您只需 ssh 到您的机器，然后从控制台执行命令（如果您的实例是 linux），对于 Windows，使用远程桌面连接到您的实例。
AWS 开发工具包用于配置和管理您的 ec2 实例（用于启动或终止新实例、指定配置等任务）

# vim - 为什么 after/ftplugin/yaml.vim 中的这个 Vim 语法命令不起作用？

> ID：14966307
> 
> 赞同：4
> 
> 时间：2013-02-19T20:02:26.480
> 
> 标签：vim

我有以下行`after/ftplugin/yaml.vim`

```
syn match yamlBlockMappingKey /^\s*\zs.*\ze\s*:\%(\s\|$\)/ 
```

我也试过这个：

```
execute 'syn match yamlBlockMappingKey /^\s*\zs.*\ze\s*:\%(\s\|$\)/' 
```

这样做的目的是让 vim 正确突出包含空格的键，根据[这个 stackoverflow question](https://stackoverflow.com/questions/13456538/how-do-i-get-vim-to-highlight-yaml-mapping-key-when-it-contains-a-space)。问题是当我打开一个新的 YAML 文件时该命令似乎不起作用。我知道这`after/ftplugin/yaml.vim`是有源的，因为我`echom`在那里输入了一个命令，它显示在`messages`. 另外，如果我只是将该行粘贴到命令提示符中并执行它，它就可以工作。有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T07:45:20.683

这些`ftplugin`脚本的来源*在*语法脚本之前，因此默认的 YAML 语法会清除您的附加定义。将您的扩展名`after/syntax/yaml.vim`改为；毕竟，您是在扩展语法，而不是文件类型设置。

# spring - Spring Security：不支持身份验证方法：GET

> ID：14966309
> 
> 赞同：4
> 
> 时间：2013-02-19T20:02:27.377
> 
> 标签：spring, spring-security, security-context

我不知道我在哪里遗漏了一些东西，非常感谢您对此的帮助！我尝试登录后收到“不支持身份验证方法：GET”消息。

这是我的security-Context.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
              http://www.springframework.org/schema/security 
              http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <!-- <security:http auto-config="true" access-decision-manager-ref="accessDecisionManager"> -->
    <security:http auto-config="true">
        <security:intercept-url pattern="/login/login.do" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/login/doLogin.do" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/lib/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/css/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/images/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/resources/**" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_REMEMBERED" />
        <security:form-login login-page="/login/login.do" authentication-failure-url="/login/login.do?login_error=true" default-target-url="/test/showTest.do"/>
        <security:logout logout-success-url="/login/login.do" invalidate-session="true" />
        <security:remember-me key="rememberMe"/>
    </security:http>    

    <security:authentication-manager>
        <security:authentication-provider>
            <security:jdbc-user-service data-source-ref="dataSource" 
            users-by-username-query="select EMAIL as email, PASSWORD as password, from ams.user where EMAIL=?"
            authorities-by-username-query="
                select distinct user.EMAIL as email, permission.NAME as authority 
                from ams.user, ams.user_role, ams.role, ams.role_permission, ams.permission
                where user.ID=user_role.USER_ID AND user_role.ROLE_ID=role_permission.ROLE_ID AND role_permission.PERMISSION_ID=permission.ID AND user.EMAIL=?"/>
            <security:password-encoder ref="passwordEncoder" />
        </security:authentication-provider>
    </security:authentication-manager>

    <bean id="passwordEncoder"
        class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
        <constructor-arg value="256" />
    </bean>
</beans> 
```

还有我的登录控制器：

```
@Controller
public class LoginController {

    @RequestMapping(method = RequestMethod.GET)
    public ModelAndView showLogin() {
        ModelAndView mav = new ModelAndView("login/login");

        return mav;
    }

    @RequestMapping(method = RequestMethod.POST)
    public ModelAndView doLogin(@RequestParam("email") String email, 
            @RequestParam("password") String password,
            @RequestParam("remember_me") boolean rememberMe,
            HttpServletRequest request, HttpServletResponse response) {

        ModelAndView mav = new ModelAndView();

        mav.setViewName("redirect:/j_spring_security_check?j_email=" + email + "&j_password=" + password + "&_spring_security_remember_me=" + rememberMe);

        return mav;
    }
} 
```

如果您需要更多信息，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:04:33.590

我猜您尝试使用用户名和密码作为查询参数向登录 URL 发送 HTTP GET 请求。由于这本质上是不安全的（例如可以添加书签），因此是不允许的。您应该改为发送 HTTP POST。

# xsd - 在 XML Schema 中定义 maxLength facet 的语法是什么？

> ID：14966311
> 
> 赞同：6
> 
> 时间：2013-02-19T20:02:32.033
> 
> 标签：xsd, notepad++, xmlspy

我正在尝试使用多种工具验证 XML 模式，但我没有收到一致的消息，具体取决于我使用的工具。以下语法似乎是问题所在：

```
<xs:element name="Name" 
            minOccurs="1" 
            type ="xs:string" 
            maxLength = "125"/> 
```

XML-Spy 会触发错误，而 Notepad ++ (windows) 和 XML Copy Editor (Ubuntu) 会对其进行验证。那么语法是否正确，或者我应该使用这个：

```
<xs:element name="name">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:minOccurs="1"/>
      <xs:maxLength = "125"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T21:11:03.780

这就是语法的样子：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="SomeContainer">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Name" minOccurs="0">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:maxLength value="125"/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:element>                   
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

*   minOccurs 仅适用于内容模型中的元素。全局级别的元素不会出现这种情况。
*   minOccurs="1" 是多余的。`1`是默认值，因此您不必指定它。
*   maxLength 是与简单类型限制相关的约束方面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T23:24:16.720

你问“那么我的语法是正确的[在示例 1 中] 还是我应该写 [示例 2]？”

两者都不。

在您的第一个示例中，您在 xs:element 元素上使用了未声明的 maxLength 属性。（minOccurs 属性可能会或可能不会被允许，这取决于上下文；正如 Petru Gardea 已经指出的那样，它在顶级元素声明中是不合法的。）不对此提出错误的编辑器并没有做完整的工作检查模式是否符合 XSD 模式（更不用说 XSD 的完整约束了）。如果您想要可靠地验证 XSD 模式文档，Xerces、Saxon、MSV 或其他一些符合标准的 XSD 实现是您的朋友。

在您的第二个示例中， minOccurs 已不再是元素声明（在某些情况下可能是）上的属性，而是成为 xs:restriction （否，错误）内的元素（否，错误）。maxLength 方面正确表示为 xs:restriction 的元素子元素，但您示例中的元素格式不正确；它似乎试图使用元素类型名称作为属性名称。如果删除错误的 minOccurs 元素并更正格式错误的 maxLength 元素，则剩下的就是 Name 的语法正确的顶级元素声明：

```
<xs:element name="name">
  <xs:simpleType>
    <xs:restriction base="xs:string">
      <xs:maxLength value = "125"/>
    </xs:restriction>
  </xs:simpleType>
</xs:element> 
```

# php - 不使用 fclose() 覆盖文件句柄导致缺点？

> ID：14966315
> 
> 赞同：2
> 
> 时间：2013-02-19T20:02:46.417
> 
> 标签：php, fopen, file-handling, fclose

尽管我覆盖了文件句柄变量，但每次打开新文件时是否需要关闭文件句柄？

例如：

```
$fp = fopen("example.txt", 'w');
$fp = fopen("example.html", 'w');// is the file handle to example.txt closed now?
fclose($fp); 
```

我在一个循环内创建了几个文件，我考虑是否需要关闭循环内每个文件的句柄，或者在循环完成后关闭一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:28:42.097

当初始句柄的内存被释放时，您的系统*可能会*清理指针并关闭它。使用以下脚本：

```
$fp = fopen("example.txt", 'w');
$fp = fopen("example.html", 'w');

while (true); 
```

我从以下输出`inotifywait -m -r .`：

```
MODIFY example.txt
OPEN example.txt
MODIFY example.html
OPEN example.html
CLOSE_WRITE,CLOSE example.txt 
```

这意味着如果没有明确`fclose`的 on `example.txt`，它无论如何都会被 Zend 引擎隐式关闭，就像它会在脚本执行结束时关闭打开的句柄一样（即通过[引用计数](http://php.net/manual/en/language.types.resource.php#language.types.resource.self-destruct)）。

**但是**，我仍然建议您正确且明确地关闭任何文件句柄，特别是考虑到您的用例 - 在循环中打开多个文件句柄的内存影响应该足以引起关注。再加上长时间运行的脚本可能会锁定文件，安全考虑的任何问题，最好正确清理句柄。

另请参阅：[为什么我需要`fclose`在 PHP 中写入文件后？](https://stackoverflow.com/questions/6038764/why-do-i-need-fclose-after-writing-to-a-file-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:07:47.240

文件句柄将仍然打开，直到您调用`fclose()`

您所做的只是覆盖变量，失去对先前句柄的任何引用。如果您仍然需要控制它们，请将它们分配给不同的变量。

垃圾收集器通常必须从内存中删除没有引用的对象，但这并不总是发生。

# assembly - 如何在汇编x86中添加数字的数字

> ID：14966316
> 
> 赞同：0
> 
> 时间：2013-02-19T20:02:55.830
> 
> 标签：assembly, x86, add, digits

我正在用汇编语言编写一个程序，该程序将计算客户端输入的整数的数字之和。该号码将始终为 10 位数字。我对组装很陌生，我不知道如何进行。这是我到目前为止所写的：

```
 SECTION .data

msg1:   db "Enter a number 10 digits long: "
len1:   equ $-msg1

msg2:   db "The sum of the digits is "
len2:   db $-msg2

        SECTION .bss

num:    resb 10
sum:    resb 3

        SECTION .text
        global _start

_start: nop

start:

        ;prompt for number
        mov     eax, 4
        mov     ebx, 1
        mov     ecx, msg1
        mov     edx, len1
        int     080h

        ;input number
        mov     eax, 3
        mov     ebx, 0
        mov     ecx, num
        mov     edx, 10
        int     080h

init:
        mov     esi, num
        mov     edi, sum

add_digits:

        ;loop 10 times
        ;retrieve next digit
        ;add '0' to convert to number
        ;add to sum

        ;subtract 0 to sum

        ;print results
        mov     eax, 4
        mov     ebx, 1
        mov     ecx, msg2
        mov     edx, len2
        int     080h

        mov     eax, 4
        mov     ebx, 1
        mov     ecx, sum
        mov     edx, 3
        int     080h

        ;exit
exit:
        mov     eax, 1
        mov     ebx, 0
        int     080h 
```

我只需要知道如何在“add_digits”中实现伪代码。另外，如果我写了上面的任何代码很差/错误，请告诉我。非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:08:55.833

阅读除法 AKA`div`指令，它如何为您提供商和余数。然后考虑检索一个数字的位数和除以 10 之间的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:06:00.573

1.  因为`sys_read`总是返回换行符——没有它就不会返回——我会为缓冲区分配 11 个字节并将 11 个字节放入 edx for `sys_read`. 您可能也想刷新缓冲区...
2.  您要减去`'0'`以将字符转换为数字，并添加`'0'`以将数字转换为字符。你的评论倒过来了。
3.  因为我们知道，根据“规范”，总和不会超过 90，这将适合一个字节并且可以用两个字符表示，是的，有一种方法可以避免`div`......

    ```
    ; sum in al...
    aam ; split the byte in al into two digits in al and ah
    add ax, 3030h ; add '0' to both digits
    xchg al, ah  ; swap 'em into right order
    mov [edi], ax ; store both characters in "[sum]"
    mov byte [edi + 2], 10 ; linefeed after printing it? 
    ```

（警告未经测试的代码！）这很好而且很短，但它会转换的数字范围有限 - 对于“时间”数字很方便。我会学习`div`使用 C 库函数和/或学习使用 C 库函数，但如果我记忆犹新，那应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-31T01:08:20.377

如果将数字作为二进制读入内存，则需要再次从数字中提取数字，即需要将二进制转换为十进制。要在数字系统之间进行转换，您需要除以（在本例中除以 10）或使用一些特殊算法。无需除法即可将二进制转换为十进制有[双重涉猎](https://en.wikipedia.org/wiki/Double_dabble)，但它可能比架构上的除法支持除法运算要慢。

最简单的方法是一个接一个地读取数字并立即将其添加到总和中，或者将整个数字读取为字符串然后添加字符

# html - 混合/未知语言的 Content-Language 标头和 lang 属性值

> ID：14966317
> 
> 赞同：2
> 
> 时间：2013-02-19T20:02:58.397
> 
> 标签：html, internationalization, http-headers

我们有一个主要是英语的 Intranet 应用程序，但以各种未指定的语言提供内容片段。

Chrome曾经检测外文内容并提供翻译：如果我们有很多外文内容，它会提供翻译整个页面；如果我们只有一点外国内容，用户可以选择文本并使用“翻译成英语”上下文菜单。这两个选项目前都被破坏了，因为（显然）Chrome 现在接受`Content-Language`标题作为福音，并禁用翻译上下文菜单。

我们的服务器发出响应标头，包括：

```
Content-Language: en-US 
```

这是正确的，因为 UI 都是英文的。但是，我们需要一些方法来标记页面中内容*可能*不是英文的区域。例如评论区。

我们可以使用什么`lang`值来将页面的一部分标记为“可能不是英语”，而不知道它是什么语言？

```
<div lang="??">
  <p>...customer comments...</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:18:03.137

在[HTML5 CR](http://www.w3.org/TR/html5/dom.html#the-lang-and-xml%3alang-attributes)中，声明某些内容为未知语言的方法是使用`lang`带有空字符串的属性作为其值，即`lang=""`.

Chrome 是否认识到这是一个不同的问题。一般来说，机器翻译的质量非常低，禁用它通常是一件好事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:39:28.103

如果我没记错的话（来自多语言网络研讨会），`Content-Language`应该不再使用。相反，您应该使用属性`lang`和`xml:lang`.

考虑到这一点，答案就很简单了：一定`lang`要为你知道的东西使用这个属性，这些东西肯定是英文的，其他的东西保持不变。
这当然意味着您不能将`lang`标签用于全局范围（即 as `<html lang="en">`），但我真的无能为力。

顺便提一句。用适当`lang`的 . 例如，可以考虑强制用户从列表中选择有效语言，或者使用某个库从文本中检测语言。在这种情况下，您将在渲染时了解语言，我认为这已经足够了。

# java - 从 Java 中使用 scala.Either

> ID：14966321
> 
> 赞同：4
> 
> 时间：2013-02-19T20:03:22.423
> 
> 标签：java, scala, scala-java-interop, either

我正在使用来自 java 的 scala 库，特别是一个返回`Either[A, B]`. 在我的 java 代码中，我可以这样做：

```
scalaFunction.callMethod(new Function<Either<A, B>>() {
   public byte[] apply(Either<A, B> result) {
      B right = result.right().???
   }
} 
```

`result.right()`返回 a `RightProjection`，但我无法在 Java 中导入它（使用 IntelliJ）。有没有一种正确的方法来处理 Java 中的 Either 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:12:57.903

我没有对此进行测试，但根据 ScalaDoc for [`RightProjection`](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/scala/util/Either%24%24RightProjection.html)，您应该可以调用`get()`. 请注意，如果`result`不是`Right`.

为了在 IDE 中使用 Scala 类，IDE 需要了解它们。因此，您需要添加`scala-library.jar`到 IDE 中指定的构建路径中。对于 IDE（以及 Java 编译器和运行时），Scala 只是一个常规库，它依赖于所有用 Scala 编写的库和程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:30:59.217

`RightProjection`并且是在（不是 的内部类）中`LeftProjection`定义的嵌套类。您必须跟踪 Scala 对象到 JVM 类的编码。我认为它是带有附加的对象名称和其他一些东西......然后JVM级别的类将是一个名称结合了对象的类名称和一个（我认为是另一个）和.`object Either``class Either``$``RightProjection``$``RightProjection`

或类似的东西。我从来没有必要挖得这么深。

库存`javap`工具可以帮助您追踪这些信息。

# javascript - Galleria 中的第一张图片无字幕

> ID：14966326
> 
> 赞同：0
> 
> 时间：2013-02-19T20:03:41.600
> 
> 标签：javascript, jquery, galleria

我正在尝试以 Classic 为主题的 Galleria。

通过一次调整（将经典主题更改为始终显示标题，这不会影响这一点），我的测试代码可以工作，但显示的第一个图像没有标题。后续的图像会。

演示：[http ://www.ski-review.com/ski_news/galleria/](http://www.ski-review.com/ski_news/galleria/)

Firebug 显示相关的 div 类（galleria-info-title）在页面加载时设置了 display:none，但以下图像的后续 div 没有。

我玩过各种选项，这些选项要么没有影响，要么变得更糟（根本没有标题）。开箱即用的插件和主题会出现不一致的行为，这似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:56:39.560

事实证明，这可能是 Galleria 中的一个错误，其中“2014”标题被解释为非字符串。非数字标题将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T09:39:11.270

我不确切知道你“调整”了什么，但使用`_toggleInfo: false`应该这样做：

[http://jsfiddle.net/EEXdq/](http://jsfiddle.net/EEXdq/)

# android - 在 android 启动期间启动的 bin/sh 脚本

> ID：14966327
> 
> 赞同：1
> 
> 时间：2013-02-19T20:03:44.980
> 
> 标签：android, shell, android-emulator, android-4.0-ice-cream-sandwich, busybox

我有一个 shell 脚本，我想在 Android 启动期间启动它。

由于脚本位于 /bin/sh 下，因此需要 busybox 来启动脚本。我在 Android /system/bin 文件夹中安装了busybox。在 init.goldfish.rc 的末尾，我添加了以下行：

```
service start_my_script /system/bin/busybox ash /path/to/myscript.sh
    class main
    oneshot 
```

但不知何故，我的脚本在 android 启动期间没有启动。

我正在使用 Android Icecream-Sandwich 口味。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T01:28:35.910

在我给 myscript.sh 555 root:shell 权限后执行

我可以在 system/core/include/private/android_filesystem_config.h

# sql-server - 为什么 sp_columns 不返回任何结果？

> ID：14966329
> 
> 赞同：4
> 
> 时间：2013-02-19T20:03:59.827
> 
> 标签：sql-server

我试图为我在 StackOverflow 上的另一篇文章“描述”一个表，但是当我运行 sp_columns 时，没有显示任何结果或行。

```
sp_columns assignee 
```

结果：

```
A bunch of column headers... 
```

我的数据库有什么问题，为什么这不起作用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T20:12:31.140

而不是`sp_columns`使用目录视图（其中许多`sp_`过程未针对新功能进行更新）。

```
SELECT name, system_type_id, ...
  FROM sys.columns
  WHERE [object_id] = OBJECT_ID('dbo.TableName');
  ---- yes this is important ----^^^^ 
```

此外，显然，请确保您在正确的数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-29T14:57:14.393

对于特定架构，请尝试：

```
sp_columns tableName, schemaName 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-02-12T14:59:16.497

INFORMATION_SCHEMA 是 ANSI 标准。

```
SELECT *
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = 'dbo' AND TABLE_NAME = 'MEMBER_FLAGS'
;

SELECT COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,NUMERIC_PRECISION,NUMERIC_PRECISION_RADIX
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_SCHEMA = 'dbo' AND TABLE_NAME = 'MEMBER_FLAGS'
; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T20:03:59.827

如果您连接到错误的数据库，查询将正确执行，但不会返回任何结果。

例如，如果您`assignee`在`patents`数据库中调用了一个表并且正在对数据库运行此查询`master`，您将不会得到任何结果并且不会出现错误：

```
sp_columns 'dbo.assignee'; 
```

结果：

```
Nothing, nada, zilch. 
```

如果您更改连接以使查询适用于正确的数据库，您将获得结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-21T12:49:16.860

尝试如下，

```
exec sp_columns yourTableName 
```

这将返回可以在当前环境中查询的指定表和视图的列信息。

注意：如果表格包含数据，那么您将只获得数据列表。

# safari - 使用 mediaelement.js 破坏来自 Icecast 的实时 mp3 流

> ID：14966330
> 
> 赞同：2
> 
> 时间：2013-02-19T20:04:01.660
> 
> 标签：safari, streaming, mp3, mediaelement.js, icecast

我正在使用 mediaelement.js 从 Icecast 以 mp3 格式直播我们的广播电台。一切都很好，除了奇怪的报告说流不会在某些浏览器中播放。我已经验证它不会在 Safari 5.1.7/Windows 中播放（但是谁使用它呢？）。更令人不安的是来自 Windows 7/Firefox 或 Chrome 用户的报告，尽管我自己无法复制这个问题。

Icecast 流使用端口 8000，我想知道在某些地方是否存在防火墙问题阻止了该端口。但这并不能解决 Safari/Windows 问题。

有人知道这里的交易可能是什么吗？

谢谢，杰克

# python - python 2.7.3中的函数和参数

> ID：14966342
> 
> 赞同：4
> 
> 时间：2013-02-19T20:04:24.473
> 
> 标签：python, function, python-2.7, parameter-passing, computer-science

在我的计算机科学课上，我刚刚开始学习 Python 中的函数和参数。现在我的导师正在让我们学习参数传递。我没有输入我的程序的大量摘要，而是重新输入了下面的作业指南。

**说明：**在此程序中，用户必须选择输入费用、输入付款或在信用卡上显示余额。允许用户通过在键盘上输入代码来表明他们的选择。

使用以下函数名称：

*   enterValue 用户输入一个值

*   addCharge 将传递给函数的值添加到余额中

*   addPayment 从余额中减去传递给函数的值

*   showBalance 显示信用卡上的当前余额

让用户为适当的操作输入以下代码：

*   “C”用于输入费用

*   “P”用于输入付款

*   “B”表示余额

*   允许输入交易，直到输入“Z”

# 程序

```
balance = 0
def enterValue ():
    enter = input ("Enter a value.")
    return enter

def addCharge (enter,balance):
    balance = balance + enter
    return balance

def addPayment (enter,balance):
    balance = balance - enter
    return balance
def showBalance ():
    print "Your balance is... ", balance

transaction = raw_input ("Enter C for charges, P for payments, and B to show your balance. ") 
enterValue ()
while transaction != "Z":

    if transaction == "C":
        balance = addCharge(enter,balance)
        showBalance()        
    elif transaction == "P": 
        balance = addPayment (enter,balance)
        showBalance()
    elif transaction =="B":
        balance = enterValue()
        showBalance()
    transaction = raw_input ("Enter C for charges, P for payments, and B to show your balance. ") 
```

# 输出

```
Enter C for charges, P for payments, and B to show your balance. P

Traceback (most recent call last):
  File "/Users/chrisblive/Downloads/Charge_Braverman-2.py", line 26, in <module>
    balance = addPayment (enter,balance)
NameError: name 'enter' is not defined 
```

（我的问题是我的价值`enterValue()`没有被定义。）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T09:47:35.073

练习的主要任务是理解将参数传递给函数。所以只需将函数中所有需要的变量传递给它！几乎可以说所有函数都有自己的命名空间，如果你想在其中使用另一个级别的值，你必须将它作为参数传递并返回它，如果你想在较低级别重用它。

例如：

```
###   Level "enterValue"   ###
def enterValue():
    return float(raw_input("Enter a value: "))
### End Level "enterValue" ###

###   Level "addCharge"   ###
def addCharge(enter, balance):
    balance = balance + enter
    return balance
### End Level "addCharge" ###

###   Level "showBalance"   ###
def showBalance(balance):
    print "Your balance is %f" % balance
### End Level "showBalance" ###

### Level "Mainlevel" ###
# This is where your program starts.
transaction = None
balance = 0.0
while transaction != "Z":
    transaction = raw_input("Enter C for charges, P for payments, and B to show your balance.\nEnter Z to exit: ").upper()

    if transaction == "C":
        enter = enterValue()
        balance = addCharge(enter, balance)
        showBalance(balance)
    elif transaction == "P":
        balance = addPayment(enter, balance)
        showBalance(balance)
    elif transaction == "B":
        showBalance(balance)
### End Level "Mainlevel" ### 
```

# tfs - 如何在 Visual Studio 2010 中为自定义签入策略创建 PolicyEnvelope？

> ID：14966343
> 
> 赞同：0
> 
> 时间：2013-02-19T20:04:26.170
> 
> 标签：tfs, checkin-policy

我在 Visual Studio 2010 中为 TFS 2010 创建了一个自定义签入策略。该策略本身运行良好。现在，我正在尝试从代码中应用自定义策略。下面是我的代码：

```
try
        {
            var projectCollectionUri = new Uri("https://mydomain.com/tfs");
            var projectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(projectCollectionUri, new UICredentialsProvider());
            projectCollection.EnsureAuthenticated();

            var vcs = projectCollection.GetService<VersionControlServer>();

            var teamProject = vcs.GetTeamProject("myProject");

            foreach (PolicyType policyType in Workstation.Current.InstalledPolicyTypes)
            {
                if (policyType.Name.ToLower().Contains("MyPolicyType"))
                {
                    //teamProject.SetCheckinPolicies(new PolicyEnvelope[] { new PolicyEnvelope(workItemPolicy, policyType) });
                    //break;
                }
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        } 
```

我被困在这条线上：

```
//teamProject.SetCheckinPolicies(new PolicyEnvelope[] { new PolicyEnvelope(workItemPolicy, policyType) }); 
```

如何为我的自定义策略创建策略信封？我引用的代码来自以下位置： [http ://bartwullems.blogspot.com/2012/02/team-foundation-server-2010-enable.html](http://bartwullems.blogspot.com/2012/02/team-foundation-server-2010-enable.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:33:57.460

您只需`WorkItemPolicy`将示例中的 替换为您的策略：

例如：

```
var myPolicy = new MyPolicy();

foreach (PolicyType policyType in Workstation.Current.InstalledPolicyTypes)
{
    if (policyType.Name == myPolicy.Type)
    {
        teamProject.SetCheckinPolicies(
            new PolicyEnvelope[]
            {
                new PolicyEnvelope(myPolicy, policyType)
            });
        break;
    }
} 
```

如果您的控制台应用程序中没有包含您的策略的程序集，您可能需要添加对它的引用。

# c# - 使用 LINQ 访问字段表关系

> ID：14966351
> 
> 赞同：-1
> 
> 时间：2013-02-19T20:05:03.597
> 
> 标签：c#, database, linq, relation

我有两个表：发布和用户。

用户有一个 Id 和 Name... 字段。并且 Post 有一个 userId 和 Title... 字段。

我正在使用 linq，我希望能够编写如下内容：

```
var post = dc.Posts.FirstOrDefault();
var user = post.User; 
```

那么我希望能够做到：`post.User.Name` ...

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:29:21.173

假设您正在使用实体框架。确保您的实体具有导航属性，并且启用了延迟加载。您的代码应该可以工作：

```
var post = dc.Posts.FirstOrDefault();
if (post != null)
    name = post.User.Name; 
```

您还可以在加载帖子时预先加载用户实体：

```
var post = dc.Posts.Include(p => p.User).FirstOrDefault();
if (post != null)
    name = post.User.Name; 
```

# css - 我如何移动这个块？

> ID：14966356
> 
> 赞同：0
> 
> 时间：2013-02-19T20:05:22.530
> 
> 标签：css, position, css-position, word-wrap

我是编码新手，所以如果这是一个基本问题，我很抱歉。我正在尝试将文本放在屏幕左侧，将表单放在屏幕右侧。我设法准确地定位了这两个项目，但由于某种原因，文本被迫错误地换行。

我试图使文本看起来像这样：

“雇佣你
明天买不起的人才！”

但是，CSS 中的某些内容会强制文本像这样换行：

“雇佣你 明天买不起的人才！
”

我认为这与我将表单放置在文本右侧的方式有关。这是控制文本的 CSS：

```
.SimpleText { width:928px; margin:50px auto  auto  auto; padding-top: 18px; height:90px;} 
.SimpleText h2 { color:#fff; font:normal 30px  Georgia, "Times New Roman", Times, serif;     padding:0 0 0 40px; margin:0; background:url(images/h2_bg_simple_text.gif) left no-repeat;}<br>
.SimpleText p { color:#bbe2ed; font:normal 11px  Georgia, "Times New Roman", Times, serif; padding:0 0 0 60px; margin:0;} 
```

这是控制表单的css：

```
#formtest{ position: relative; float: right; left: 100px;} 
```

这是它在 html 页面中的显示方式：

```
 <div class="SimpleText">
      <div id="formtest">

          <!--form is here !-->

      </div>

    <h2>Hire the talent you won't be <br />able to afford tomorrow!</h2>
    <p>Great talent you can depend upon</p>

  </div> 
```

如何修复它以使其正确包装？谢谢你。

此外，表单位于 iframe 内部。这是 iframe 的代码：

```
<script type="text/javascript">document.write(unescape("%3Ciframe id=\"fb_iframe\"     src=\"formio.php" + window.location.search + "\" width=\"560\" height=\"677\"allowtransparency=\"true\" scrolling=\"no\" frameborder=\"0\"%3E&lt;a href=\"new_Form.php\" title=\"new_Form\"&gt;blan&lt;/a&gt;%3C/iframe%3E"));</script>
<noscript>
<iframe width="560" height="677" style="border:none; background:transparent;   overflow:hidden;"
 id="formfas" src="axyform.html">
&lt;a href="formio.php" title="new_Form"&gt;m&lt;/a&gt;
</iframe>
</noscript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:22:55.483

您可以通过扩展`.SimpleText`. 例如：

```
.SimpleText {
    width:968px;
} 
```

[JS 小提琴示例](http://jsfiddle.net/pEzg7/)

# liferay - 在 service.xml 文件中使用 Finder 方法从表中检索数据是否是强制性的

> ID：14966360
> 
> 赞同：0
> 
> 时间：2013-02-19T20:05:37.317
> 
> 标签：liferay, liferay-6

我正在使用 Liferay-6，我是它的初学者。

我的要求是，我有一个名为**Players**的表，其列为`ID`，我需要`Name`从中`Category`检索基于`Category`从 Front-end 中选择的所有 Player-names。

我知道我需要为此使用 Liferay `ServiceBuilder`，所以我的问题是在创建`service.xml`文件时我需要为此使用查找器方法还是无需它就可以管理？

请指定，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:12:08.110

您不需要使用 finder-methods，但如果您无论如何都在使用，那么`ServiceBuilder`我看不出没有利用 finder-methods 的任何意义。只需在以下内容中写几行`service.xml`：

```
<finder name="Category" return-type="Collection">
    <finder-column name="category" case-sensitive="false" />
</finder> 
```

但是，如果您根本不使用`service.xml`，那么您当然不能使用查找器方法，您必须手动完成所有操作。

但是，如果您正在使用`service.xml`或打算使用`service.xml`，那么请务必使用 finder-methods，因为它可以为您节省一天的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:19:26.910

既然您决心使用 Service Builder，我同意 Finders 是最好的方法

1.  service.xml 中的每个 Finder 都会让您访问 playerLocalPersistence.findby.. 方法，tat 将返回一个玩家集合
2.  如果您想检索其他内容（例如 List playerNames），您可以在 PlayersLocalServiceImpl 中编写一个方法，在函数体内使用上述 finder 函数，并返回您的自定义 Collection，可从 PlayersLocalServiceUtil 访问
3.  无论如何都会创建 findByPrimary fider。例如，如果“ID”设置为主键，则无需为该属性添加 Finder

实际上，您需要编写自定义查询，仅当您要搜索超过 1 个实体时（换句话说，FROM 查询部分使用多个数据库表）。在其他所有情况下，service.xml 中的 Finder 节点都是可行的方法

# c# - Unity3d 与 c# 脚本

> ID：14966361
> 
> 赞同：1
> 
> 时间：2013-02-19T20:05:39.990
> 
> 标签：c#, unity3d

您好我想在我的 unity3d 项目中添加一个滑块，我正在使用 c# 脚本和以下代码。

```
 public float hSbarValue;
 void OnGUI() {
         hSbarValue = GUI.HorizontalScrollbar(new Rect(25, 25, 100, 30), hSbarValue, 1.0F, 0.0F, 100.0F);
    } 
```

这绘制了一个滑块，我必须使用鼠标拖动它。

我想把它变成一个可以自行移动的滑块（如乒乓球效果），直到按下按钮，然后将值存储在`hSbarValue`变量中。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:12:32.853

您可以尝试使用协程来增加它的值并在按下按钮时终止协程。就像是：

```
IEnumerator IncrementValue() {
    while (true) { // Or a better limit
        hSbarValue += someIncrementValue;
        yield return new WaitForSeconds(1); // Or other value
    }
}

void Start {
    StartCoroutine("IncrementValue");
}

// later inside the button press handler
StopCoroutine("IncrementValue"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:40:16.327

hSbarValue = GUI.Horizo​​ntalScrollbar(new Rect(25, 25, 100, 30), Mathf.PingPong(Time.time*5.0f, 20), 1.0F, 0.0F, 50.0F);

# jquery - Ajax 请求只处理一次

> ID：14966362
> 
> 赞同：0
> 
> 时间：2013-02-19T20:05:43.310
> 
> 标签：jquery, html, ajax

我有一个表格，其中有如下图所示的行。单击在线订单链接时，会在该行的正下方显示一个表格，如第二张图片所示。

## 第一张图片

![在此处输入图像描述](../Images/afecdafee85eaf942a2eb9b3e81c3bb6.png)

## 第二张图片

![在此处输入图像描述](../Images/4223d367144d350117092ea8fba47cd0.png)

现在我正在做的事情是在单击提交按钮时启动 ajax 请求。请求在第一个实例中是成功的。但是当再次发出请求时，它就不起作用了。它的工作原理相同`<tr>`，但是当单击第二个在线订单`<tr>`并在其下方加载表单`<tr>`时，提交 ajax 将不起作用，

```
 $(document).ready(function(){
    var $form  = $('.form'),  $table = $('.table');
    $table.on('click', '.link', function(e) {
        e.preventDefault();
        $table.find('tr.temp-row').remove();
        $(this).closest('tr').after(function() {
            var $tr = $('<tr class="temp-row"><td colspan="4"></td></tr>');
            return $tr.find('td').html($form).end();
        });
    });

    $("#cancel").click(function(){
      $form.hide();
    });

    $("#submit").click(function(){

      var request = $.ajax({
        url: "processform.php",
        type: "POST",
        //data: {msg : msg},
        dataType: "html"
      });

      request.done(function(msg) {
        //$("#log").html( msg );
        alert(msg);
      });

      request.fail(function(jqXHR, textStatus) {
        alert( "Request failed: " + textStatus );
      });

      return false;
    })

  }); 
```

我的`processform.php`页面只返回一些在请求它的页面中发出警报的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:53:51.787

问题是您使用 id 附加相同的表单和相同的提交`#submit`。因此，您将有多个具有相同 ID 的提交按钮。

您不显示表单的 HTML，而是使用提交的 id，而不是使用提交按钮的类来处理点击事件（例如`$(".submitBtn").click...`）。

附带说明一下，您应该`clone`在将`$form`变量`$table.on('click'...`分配给事件处理程序之前将其分配给，`<td>`因为这可能会在以后导致问题。

# iphone - 实时格式化美元金额

> ID：14966364
> 
> 赞同：2
> 
> 时间：2013-02-19T20:05:51.853
> 
> 标签：iphone, ios, objective-c, mobile

我正在开发一个要求用户输入美元金额的 iOS 应用程序。它需要允许他们输入最大值为 $9999.99 的美元和美分

我希望它像这样工作：有一个文本字段显示：“$0.00”输入 $5.25 输入将随着每次按键而改变。所以它看起来像这样： '5' 被按下，显示：$0.05 '2' 被按下，显示：$0.52 '5' 被按下，显示： $5.25

我试图以多种不同的方式进行这项工作，但都存在问题。使用 NSNumberformatter 无法正常工作。如果用户按下退格键，使用链接列表或数组将不起作用，我真的不想实现堆栈，因为我担心它会太耗时。请告知我应该如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:37:50.743

这只是一个指示性示例，说明如何执行此操作。您应该研究此代码并根据您的情况重新调整它。试试看：

```
@autoreleasepool
{
    // Here I create the formatter and I set the format. You do this faster with setFormat: .
    NSNumberFormatter* formatter=[[NSNumberFormatter alloc]init];
    formatter.numberStyle= NSNumberFormatterCurrencyStyle;
    formatter.maximumIntegerDigits=6;
    formatter.maximumFractionDigits=2;
    formatter.currencySymbol= @"$";
    formatter.currencyDecimalSeparator= @".";
    formatter.currencyGroupingSeparator= @",";
    formatter.positivePrefix=@"";

    NSArray* numbers= @[ @1 ,@2 ,@3 ,@4, @5, @6, @7, @8  ];
    // These are the inserted numbers, you should change the code in a way that
    // every number is taken in input from the text field.
    float number=0.0f;
    for(NSUInteger i=0;i<8;i++)
    {
        // It just simulates what happens if the user types the numbers in the array.
        number= [numbers[i] floatValue] * 1.0e-2 + number*10;
        NSLog(@"%@",[formatter stringFromNumber: @(number)]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:53:02.100

```
NSString* formattedAmount = [NSString stringWithFormat:@"$%01d.%02d",dollars,cents]; 
```

# excel - Excel：使用复杂模型计算另一张纸上的值

> ID：14966370
> 
> 赞同：-1
> 
> 时间：2013-02-19T20:06:28.867
> 
> 标签：excel

假设我创建了一个复杂的财务模型，该模型使用 20 个变量输入，最终通过大量单元格和公式得出一个结果。然后我想制作一个汇总汇总表，提供 7 组左右的 20 个变量和每个组合的结果值，但能够调整它们并重新计算新结果。如何将模型表用作传递 20 个变量的汇总表的计算？

例如，型号：

```
Var 1:  5
Var 2:  3
...
Var 20: 5

Result: 10843 (large multi-cell based model calculation) 
```

卷起：

```
Var 1:  5      6      2
Var 2:  3      3      5
...
Var 20: 5      6      3

Result: 10843  9834   5873 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:48:04.737

您可以使用 Excel 的内置数据表来实现这一点！

数据表在标题行/列中使用一个或两个变量的表 - 并计算每个组合的工作簿结果。这是一个简单的模型来展示这个概念： ![在此处输入图像描述](../Images/e77c0bf622ad3f7415df6dc41ed37afd.png)

要使其正常工作，您需要：

1.  将指向您感兴趣的最终结果的链接放置在该表的左上角单元格中（在本例中，我放置`=B3`在单元格 A5 中）。
2.  在标题行/列中输入参数 1 和 2 的选项
3.  选择表
4.  单击*数据*选项卡->*数据工具*->*假设分析*->*数据表*
5.  链接两个参数

现在，在您的情况下，您有 20 个要修改的参数。您可以通过以下方式轻松执行此操作： ![在此处输入图像描述](../Images/6c1e4468933b7c5705b7284bac8497a1.png)

1.  插入一个新的“当前场景”参数 - 在示例中这是黄色单元格 V17。
2.  在表中添加另一列，其中包含每个场景的参数。在该列中，您为所选方案的每个参数选择正确的值。在我的示例中，我使用了以下公式：

    ```
    =指数($B5:$U5,$V$17)
    ```

3.  重新链接您的模型，以便使用该行中的参数进行计算（在我的示例中，“模型”仅返回参数 1-10 的平均值）
4.  建立你的数据表：
    1.  将结果单元格链接到左上角的单元格（这里 A22 链接到 V18）
    2.  在标题栏中输入从 1 到场景计数的数字。（注意：您也可以使用场景名称和此表中的名称 - 然后您需要将上述`INDEX`公式修改为 `INDEX(...,MATCH(...))`）
    3.  选择表格，即标题行和另一行（此处范围为 A22:U23）
    4.  添加数据表。请注意，您需要将 V17 中的场景 ID 链接为“行输入单元”（我总是觉得这违反直觉）。*重要提示：*您还需要为空的“列输入单元格”提供链接，否则数据表将返回错误的结果。在我的示例中，我链接了单元格 W17，该单元格为空白且在整个模型中未使用。

完毕！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:24:41.167

[因为 Peter Albert 让我们对数据表大开眼界，所以我还建议使用名为Scenarios](http://office.microsoft.com/en-us/excel-help/switch-between-various-sets-of-values-by-using-scenarios-HP010072669.aspx?CTT=1)的内置假设分析。

虽然数据表仅限于一个或两个变量，但场景最多可管理 32 个。如果您查看场景摘要，大约在页面的一半处，您会看到一个看起来可能符合要求的预构建表。

# json - JSON数据绑定到控制器中的模型对象

> ID：14966373
> 
> 赞同：0
> 
> 时间：2013-02-19T20:06:30.313
> 
> 标签：json, asp.net-mvc-3, model-binding

我正在使用 JQGRID，如下所示：

```
@(Html.Grid("Basic")
    .SetCaption("")
     .SetUrl("/cntrler/GetListGridData?{\"mdlobj\":" + Json.Encode(Model))
    .SetDataType(MvcJqGrid.Enums.DataType.Json)
    .SetRequestType(MvcJqGrid.Enums.RequestType.Post)
    .SetPager("pager")
    .SetHeight(400)
) 
```

上面的“模型”是视图页面中的模型对象。运行时，URL 将呈现为：

```
url:'/cntrler/GetListGridData?{"mdlobj":{"PLANT":"1","DEPT":"5","CRIB":"5"}' 
```

“PLANT”、“DEPT”、“CRIB”是模型对象中的属性。

我有我的控制器方法，它被调用：

```
[HttpPost]
public string GetListGridData(ReceiptIndexViewModel mdlobj, GridSettings gridSettings)
    {
        var mdl = mdlobj;
    } 
```

问题是，我没有看到从视图页面发布的 mdlobj 属性值。这些都是空的。

有人能告诉我如何将视图页面通过 JSON 发布的值绑定到控制器中的模型对象吗？

# iphone - 在 iOS 上将属性从一个控制器传递到另一个控制器

> ID：14966375
> 
> 赞同：3
> 
> 时间：2013-02-19T20:06:32.673
> 
> 标签：iphone, ios, objective-c, azure, azure-mobile-services

我正在 iOS 上使用 Azure 移动服务，并且我已启用身份验证。我扩展了微软作为示例提供的默认应用程序以使用 tabBarController。一个控制器是 MS 使用的默认控制器，称为 ToDoListController。

我想在我的第二个控制器 AddItemController 中使用 ToDoListController 中使用的 todoService 属性。所以，在 ToDoListController 的标题中，我有

```
@property (strong, nonatomic) TodoService *todoService; 
```

在同一个控制器的 m 中，我有它的合成。

当我想在 tabBarController 中使用此属性时，我将其称为

```
(((TodoListController *)self.parentViewController).todoService) 
```

但我明白了

> [UITabBarController todoService]：发送到实例的无法识别的选择器

和

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UITabBarController todoService]: unrecognized selector sent to instance 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:30:59.613

看起来您正在尝试访问您的标签栏控制器之一。尝试这个

```
for (UIViewController *v in ((UITabBarController*)self.parentviewController).viewControllers)
{
     UIViewController *vc = v;

     if ([v isKindOfClass:[TodoListController class])
     {
         ((TodoListController *)v).todoservice;
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:39:34.913

最后问题是一个断点。数据现在很好，没有问题

```
(((TodoListController *)self.parentViewController).todoService) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:19:38.757

您是否将 ToDoService 的 .h 文件导入到 tabBarController 中？这将允许对 tabBarController 的可见性。为不使用评论功能提前道歉，我不允许。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T23:05:56.960

我建议让您的 TodoService 成为单身人士。有很多方法可以做到这一点，这里有一段简单的代码，它创建了一个你可以在任何地方访问的单例*。将此方法签名添加到您的 TodoService.h 文件

```
+ (TodoService *) defaultService; 
```

而这个实现

```
TodoService *todoService;

+ (TodoService *)defaultService
{
    if (todoService == nil) {
        todoService = [[TodoService alloc] init];
    }
    return todoService;
} 
```

现在，您可以从应用程序中的任何位置访问单个实例

```
TodoService* service = [TodoService defaultService];
[service doSomething]; 
```

*注意，在 Objective C 中实现单例有更好的方法，但在大多数情况下，这是一个很好的方法，你只在主线程上调用 defaultService。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T20:45:04.753

您将选择器发送到错误的控制器，尝试检测层次结构中的哪一个正是您的 TodoListController。为什么你认为 parentViewController 是 TodoListController？

如果您在 UITabBarController 中呈现为模态当前 VC，则 parentVC 是 UITabBarController。

你也可以试试`self.parentViewController.parentViewController`；

# json - Twitter GET 状态计数不起作用

> ID：14966378
> 
> 赞同：1
> 
> 时间：2013-02-19T20:06:45.057
> 
> 标签：json, twitter, get

我正在使用 jQuery 在某个主题标签之后显示 Twitter 提要。这是网址：

[http://search.twitter.com/search.json?callback=?&count=3&q=%23test&include_entities=true&include_rts=true](http://search.twitter.com/search.json?callback=?&count=3&q=%23test&include_entities=true&include_rts=true)

但它返回 15 行，而不是我在 url (count=3) 中指定的 3 行......有没有一种新的方法来声明计数？[这是 Jabulr 中的数据](http://jabulr.com/?e=http://search.twitter.com/search.json?callback=?&count=3&q=%2523test&include_entities=true&include_rts=true)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:18:09.793

据我所知，[搜索 API](https://dev.twitter.com/docs/using-search)不支持该`count`参数。

REST API [GET 搜索/推文](https://dev.twitter.com/docs/api/1.1/get/search/tweets)确实如此，但使用它有点复杂，因为所有请求都需要在 2013 年 3 月之前进行身份验证，即从现在起一周多一点。

# visual-studio-2010 - 可以使 Visual Studio 2010 选项卡式界面有意义吗？

> ID：14966380
> 
> 赞同：0
> 
> 时间：2013-02-19T20:06:54.870
> 
> 标签：visual-studio-2010, tabs

有没有一种简单的方法可以让 Visual Studio 2010 选项卡式界面像您期望的那样工作？基本上我希望它像网络浏览器一样工作：

`CTRL + W`=关闭当前选项卡（不选择当前单词）

`CTRL + TAB`= 切换到当前选项卡右侧的选项卡（不弹出选项卡选择窗口）

`CTRL + SHIFT + TAB`= 切换到当前选项卡左侧的选项卡（不弹出选项卡选择窗口）

无论如何，标签是否总是按时间顺序打开并保持这种状态。默认情况下，Visual Studio 将按时间顺序打开它们，但随后会根据您正在处理的内容更改顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:30:36.890

要更改/覆盖键盘命令，请转到工具 -> 选项 -> 环境 -> 键盘。在快捷方式中分配您的首选键，然后选择所需的命令。

类似于下面的屏幕截图 ![在此处输入图像描述](../Images/701d7c71819e9bdc545f553880fe7e46.png)

对于时间顺序，恐怕它不支持开箱即用，您可能需要一些宏或第三方插件（不确定是否有）

# c# - 向服务器发送一些数据并获取它

> ID：14966381
> 
> 赞同：0
> 
> 时间：2013-02-19T20:06:54.900
> 
> 标签：c#, mysql, linux, winforms, connection

一个特定的客户端（教师）应该向服务器发送一些数据，而其他客户端（学生）应该能够获取这些数据消息。嗯...也许把它想象成一个文本信使。

![在此处输入图像描述](../Images/54f4a4bf49cb2e907dd985a415db14a2.png)

数据只是一些简单的文本，没有什么大不了的。

我想知道这样做的最佳方法是什么？我查看了 WCF，它似乎很复杂。尝试了一些演示文件，但无法使其正常工作。

我也知道 PHP/Mysql。将这些数据插入 mysql 表是否有意义？我认为这不是一个好主意。它不会接近实时速度。

**编辑：应用程序采用 Windows 形式（C# 语言），服务器应用程序/服务可以通过任何方式。**

我不确定服务器端。所以我也可以是一个 linux 网络服务器（php&mysql）或一个基于 Windows 的应用程序。

**编辑 2**：我没有使用 ASP.NET 的经验，也不知道编码或制作 ASP 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:09:07.427

查看[ASP.NET SignalR](http://signalr.net/)。要么使用套接字/WCF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:36:10.170

好吧，如果你说它应该是某种文本信使范式，我仍然不确定服务器的作用是什么？记录？认证？

无论如何，我想[这篇文章](http://www.jarloo.com/c-udp-multicasting-tutorial/)将是一个好的开始。注意利弊。

# ruby-on-rails - 如何重新检查客户端事件的红宝石条件

> ID：14966385
> 
> 赞同：0
> 
> 时间：2013-02-19T20:06:59.023
> 
> 标签：ruby-on-rails, ruby, client-side, soundcloud

如果播放列表为空，我有一个设置为隐藏的 SoundCloud 小部件。当有人将歌曲添加到播放列表（单击添加按钮）时，是否有重新检查条件的方法？

```
 <% if @current_user.id == Integer(@party_profile.host) %>
    <div <% if @firstsong == "undefined" %> style="display:none;" <% end %>>
      <object height="81" width="80%" id="myPlayer" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
        <iframe id="sc-widget" width="95%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/<%= @firstsong %>&show_artwork=true&liking=ture&sharing=true&frameborder="no"&scrolling="no"&enable_api=true&object_id=myPlayer"></iframe>
      </object>
    </div>
  <% end %> 
```

我添加这个红宝石条件而不是在点击时刷新 soundcloud 小部件的一部分的原因是因为我不希望每次有人添加歌曲时都刷新小部件（仅当播放器被隐藏并添加了新歌曲时） .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:12:10.660

不，一旦服务器将其交给客户端，所有的 erb 内容都一成不变。但是，您可以做的是编写一个 js 函数来处理客户端事件

```
 ``$().ready(function() {
    $("#some_id_of_a_dom_element_that_changes_due_to_a_user_addition").change(function() {
      $("song_container").show()
    })
  })``  ## 回答 #2

> 赞同：0
> 
>             
> 
> 时间：2013-02-20T01:45:41.137

这里有几件事：

1.  （好消息）有一个~~新~~ [的基于 HTML5 的小部件](http://blog.soundcloud.com/2012/01/26/html5-widget/)，它看起来也比 Flash 好得多（并且适用于 iOS 等）。

2.  （好消息）小部件有一个[API](http://developers.soundcloud.com/docs/api/html5-widget)。

3.  （坏消息）获取播放列表内容的实时更新不是 SoundCloud API 的目的，Widget 也不是为之而设计的。出于性能原因，存在一定程度的缓存，这意味着小部件获得的内容可能落后于现实一段时间。

如果不知道您的预期用途是什么，很难说什么是最适合您的解决方案。 
```

# python - trac 在 Windows 上 - 身份验证

> ID：14966388
> 
> 赞同：0
> 
> 时间：2013-02-19T20:07:14.180
> 
> 标签：python, windows, tracking, trac

我希望在 windows 上使用 trac（用于缺陷跟踪）——因为它与 svn（也在 windows 上）有很好的集成。

我使用 python 2.7 安装了它（winpy 版本）并且能够启动并运行独立服务器 - 但是我不知道如何配置登录？按照说明，我创建了一个带有 md5 加密密码的密码文件，然后在我重新运行独立服务器时引用了这个文件。

关于如何通过身份验证运行它的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T21:05:30.717

基于 Apache 网络服务器的 Trac：另一种可能性是 Apache 的 SSPI 身份验证模块。然后，Trac 会重用 Windows 域中的所有用户。它在 http.conf 中为 Trac[配置。](https://coderanger.net/~coderanger/tracdoc/install/apacheauth.html#sspi-authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:19:16.540

管理帐户的最简单方法之一是使用[AccountManager 插件](http://trac-hacks.org/wiki/AccountManagerPlugin)。在全新的 Trac 安装中，设置方法如下：

1.  运行`trac-admin /path/to/projenv permission add anonymous TRAC_ADMIN`命令给自己管理员权限
2.  安装插件
3.  以图形方式创建新的管理员帐户
4.  授予管理员帐户`TRAC_ADMIN`权限
5.  使用管理员帐户登录
6.  撤销账户的`TRAC_ADMIN`权限`anonymous`
7.  根据需要创建用户帐户

该插件的网站列出了有关如何安装和配置它的其他信息和示例。

# compression - ZPAQ 使用模糊信息

> ID：14966390
> 
> 赞同：3
> 
> 时间：2013-02-19T20:07:18.647
> 
> 标签：compression

我试图在 matt mahoney 的 web 中测试压缩算法，但是当我想解压缩文件时，它只保存第一个块。它给了我以下说明

```
"zpaqd v6.19 ZPAQ development tool, " __DATE__ "\n"
"To compress: zpaqd {a|c}[i|n|s|t]... config [arg]... archive files...\n"
"  a - append to existing archive.zpaq\n"
"  c - create new archive.zpaq\n"
"  i - don't save file sizes in comments\n"
"  n - don't save file names\n"
"  s - don't save SHA-1 checksums or test post-processor\n"
"  t - don't save header locator tag\n"
"  config.cfg with args $1...$9 - see libzpaq.h\n"
"To decompress:   zpaqd d archive [output [block [blocks [segments]]]]\n"
"To list:         zpaqd l archive\n"
"To run:          zpaqd r config [arg]... {h|p} [input [output]]\n"
"To trace:        zpaqd t config [arg]... {h|p} [N|xN]...\n"
"To compute SHA1: zpaqd s files...\n"
"See http://mattmahoney.net/zpaq/ for latest version\n" 
```

有关文件名和块的信息已提供给我，但我不知道“[output [block [blocks [segments]]]]”是什么意思。我一直在尝试解压，但我真的没有弄清楚。我知道这个网站不是关于特定程序的，但在所有网络中我都没有找到任何信息，这是我最后的资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T20:27:49.200

用于`zpaq`提取，而不是`zpaqd`.

`zpaq`（当前版本是 6.41）是一个通用归档器。`zpaqd`主要是用于开发和测试用 ZPAQL 语言编写的压缩算法的工具。但是，您可以使用它来压缩和解压缩单个文件，如下所示：

```
zpaqd c 3 archive.zpaq input
zpaqd d archive.zpaq output 
```

详细规格在 zpaqd.cpp 或 zpaq.cpp 的源代码注释中。如果您使用 zpaqd，它有助于理解[http://mattmahoney.net/dc/zpaq202.pdf](http://mattmahoney.net/dc/zpaq202.pdf)中描述的存档格式和 libzpaq.h 中描述的 ZPAQL 语言。

# python - 在 Windows 7/XP 上运行后台进程

> ID：14966391
> 
> 赞同：0
> 
> 时间：2013-02-19T20:07:20.340
> 
> 标签：python, windows-7, windows-xp, background-process

我正在使用 python 开发一个需要能够在 Windows 7 和 XP 上运行的应用程序。该应用程序从 UI 上的按钮获取一些简单的输入，并根据需要修改一些数字的选择，然后将它们上传到网站或将它们添加到稍后上传的队列中。

我的问题是我需要修改数字并上传在后台运行的过程。我在编程方面没有经验，所以我不确定该怎么做。实现这一目标的最佳方法是什么？

编辑：对不起，我不认为我很清楚。它使我无法在后台运行某些东西。具体来说，我需要运行后台进程，直到给出停止它的命令。它正在处理稳定的输入数字流，它正在修改然后一次上传一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:20:23.447

对于在两个操作系统上的使用，我建议使用`py2exe`. 甚至我的 Python 2.7 64 位编译脚本也可以在 Windows XP 机器上运行，所以我想这应该可以。

您希望如何通过 GET 表单或通过 FTP 将这些数字上传到主页，GET 应该更容易。假设您的文件位于`http://example.com/testfile.php`，您只需使用 urllib 打开此文件：

```
import urllib
urllib.urlopen("http://example.com/testfile.php?number1=20&number2=100") 
```

如果你想通过 FTP 上传数字，我建议使用`ftplib`Python 内置的标准 ftp 库。

编辑：忘了提到在单独的线程中运行它：

```
import thread
thread.start_new_thread(upload_function()) #using the upload-process in a new function 
```

# maven - maven 3 jar 存在但构建失败

> ID：14966394
> 
> 赞同：0
> 
> 时间：2013-02-19T20:07:36.203
> 
> 标签：maven, maven-3

当我构建自己的项目时，出现错误：

```
Failure to find com.google.gwt:gwt-user:jar:2.5 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced 
```

但实际上这个罐子存在于我的本地仓库中。我在 ~/.m2 中也有 settings.xml，但这是我公司回购的设置，也许这​​就是原因。但我尝试没有这个文件但失败了。

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:18:33.930

在你的命令行构建中尝试 -U

# python - python matplotlib画布没有重新调整大小

> ID：14966395
> 
> 赞同：1
> 
> 时间：2013-02-19T20:07:36.600
> 
> 标签：python, canvas, matplotlib, bar-chart

我是python新手，所以请多多包涵。我的 python 脚本读取一个文件，然后将其解析为一个数组。然后它使用 matplotlib 库来绘制条形图。由于文件'datadump.txt'中的数据不断变化，我在脚本中添加了一个无限循环来读取数据，解析它然后绘制它。一切正常。问题是，当我尝试用鼠标重新调整窗口大小时，画布或绘图保持不变并且不会重新调整为新窗口大小。

我怎样才能让画布重新调整到新的窗口大小？

这是我的python脚本：

```
#! /usr/bin/python2.7
#! /usr/lib/pymodules/python2.7

import time
import matplotlib.pyplot as plt

# Global variables
fig = plt.figure()

def animated_graph():
    printonce = True
    while (True):
        # Make sure that the file is not currently being access by another program
        # If it is, then let the user know.
        try:
            file = open('datadump.txt', 'r')
        except IOError:
            if (printonce == True):
                print "The file is empty or does not exist."
                printonce = False

        # If the file is accessible, then execute the code below
        with file:
            file.seek(0)
            first_char = file.read(1)
            if first_char:
                # Extract all data and create a matrix containing string values
                table = [row.strip().split('\t') for row in file]
                # Close the file once the data has been extracted
                file.close()

                # If the table is not empty, then continue with the execution
                if table:
                    numrow = len(table)
                    numcol = len(table[0])

                    #print ("num of rows: " + str(numrow))
                    #print ("num of cols: " +  str(numcol))

                    tcp = 0
                    udp = 0
                    http = 0
                    dns = 0
                    icmp = 0

                    # Go thru each row and combine the total count of each protocol of for all IPs
                    for r in range(1, numrow):
                        for c in range(1, numcol):
                            if c==1:
                                tcp = tcp + int(table[r][c])
                            elif c==2:
                                udp = udp + int(table[r][c])
                            elif c==3:
                                http = http + int(table[r][c])
                            elif c==4:
                                dns = dns + int(table[r][c])
                            elif c==5:
                                icmp = icmp + int(table[r][c])

                    '''
                    print "tcp:  " + str(tcp)
                    print "udp:  " + str(udp)
                    print "http: " + str(http)
                    print "dns:  " + str(dns)
                    print "icmp: " + str(icmp)
                    '''
                    gridnumber = range(1,6)
                    labels = ["tcp", "udp", "http", "dns", "icmp"]
                    #plt.bar(gridnumber, [tcp, udp, http, dns, icmp], color="red", width=0.4, label="Total # of connections", align="center")
                    plt.clf()
                    plt.bar(1, tcp, color="red", width=0.4, label="tcp " + str(tcp), align="center")
                    plt.bar(2, udp, color="green", width=0.4, label="udp " + str(udp), align="center")
                    plt.bar(3, http, color="blue", width=0.4, label="http " + str(http), align="center")
                    plt.bar(4, dns, color="brown", width=0.4, label="dns " + str(dns), align="center")
                    plt.bar(5, icmp, color="gold", width=0.4, label="icmp " + str(icmp), align="center")
                    plt.xlim([0,8])
                    plt.xticks(gridnumber, labels)
                    plt.xlabel("Protocols")
                    plt.ylabel("Total # of packets")
                    plt.title("Number of packets in a time window of 5secs")
                    plt.legend()
                    fig.canvas.draw()
                    #time.sleep(1)

def main():
    length = 0
    print "\nOpening file 'datadump.txt' "
    printonce = True
    while (True):
        try:
            length = len(open("datadump.txt").readlines())
            break
        except IOError:
            if (printonce == True):
                print "The file is empty or does not exist."
                printonce = False

    #print "%d lines in your choosen file" % length
    win = fig.canvas.manager.window
    win.after(1, animated_graph)
    plt.figure(fig.number)
    plt.show()

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T04:08:15.700

You need to let the GUI event loop catch its breath, and calling `time.sleep()` doesn't quite do it, though it's almost the thing to do.

In my code, I solve this problem with a call to`plt.waitforbuttonpress(.1)`, where the .1 is the timeout to wait (in seconds), before allowing the call to return and continue running whatever else you have going on.

I suspect this will allow the gui to catch the resize events and process them properly.

# python - 在二维数组中搜索字符串的最快方法是什么

> ID：14966396
> 
> 赞同：1
> 
> 时间：2013-02-19T20:07:39.037
> 
> 标签：python

我需要在二维数组的第一列中搜索一个字符串。最明显的方法是

```
for i in range (0, len(list)):
if list[i][0]==searchstring:
   list[i][4]=do_a_bunch_of_stuff 
```

我需要知道“i”在哪里，以便我可以对同一行执行 do_a_bunch_of_stuff。我需要遍历二维数组中的所有行

速度是不是漂亮代码的主要因素。执行此操作的最快（CPU 性能）方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:14:30.150

没有真正更快的方法可以做到这一点，您将始终需要比较搜索字符串的每个内部列表的第一个元素。

以下可能会稍微快一些，因为它避免了几个索引查找：

```
for x in lst:
    if x[0] == searchstring:
        x[4] = do_a_bunch_of_stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:21:22.303

由于该列未排序，因此线性搜索将是您希望从搜索中获得的最快速度，因为您需要检查每个元素。

如果这是您必须重复执行的过程，您可以使用字典创建索引：

```
index = {}
for i in range (0, len(list)):
    index[list[i]] = index.get(list[i], list()) + [i] 
```

然后，您可以简单地查找您需要搜索的任何字符串的索引：

```
rows = index[some_string] 
```

这是以额外的内存开销为代价的，因为您要存储来自第 0 列的每个唯一值和要引导的整数列表。

如果您不需要将数据保留为 2D 数组格式，则可以考虑将其重组为字典。您可以将搜索字符串用作映射到元组列表的键，其中每个元组都保存该行中其他列的数据。

# imagemagick - MAMP 中的 Imagick 问题

> ID：14966401
> 
> 赞同：3
> 
> 时间：2013-02-19T20:07:46.753
> 
> 标签：imagemagick, osx-lion, mamp, imagick

因此，我遵循了此页面上的所有说明：

[http://thoomtech.com/post/8832473042/mamp-imagemagick-lion](http://thoomtech.com/post/8832473042/mamp-imagemagick-lion)

Imagick 已安装，我可以验证 imagick.so 是否位于 MAMP 中的相应文件夹中。

但是，没有任何与 Image Magick 或 Imagick 相关的内容出现在 phpinfo 中......当我打电话时`new Imagick()`我收到一个错误：找不到 Class 'Imagick'

我能错过什么？我在 Lion 上运行 MAMP。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T17:58:23.867

您需要在本地 MAMP 服务器使用`imagick.so`的文件中加载扩展名。`php.ini`

*   在 phpinfo 中，找到“加载的配置文件”下的文件
*   编辑该 ini 文件以包含以下内容。

```
extension=imagick.so
; or 
extension=/absolute/path/to/your/imagick.so 
```

通过在终端中运行以下行来验证模块是否已成功加载

```
php -m | grep imagick
# Should return 'imagick' on success 
```

# animation - 使用 create.js 制作动画而不更新整个画布

> ID：14966406
> 
> 赞同：1
> 
> 时间：2013-02-19T20:07:58.507
> 
> 标签：animation, html5-canvas, gif, easeljs, createjs

我希望有一个人可以帮助我。我将 ZigFu 和 Kinect 与 html5 一起使用，一切正常，但后来我想将 gif 图像放在画布上，发现它们不起作用。所以为了解决这个问题，我创建了一个我的 gif 精灵表并将其放在画布上。

我的问题是，当使用 easeljs 更新 bmp 动画时，它会更新整个画布并清除我想要保留的原始背景。

任何人都可以提供另一种方法来实现这一点吗？我可以在不必更新整个屏幕的情况下为图像设置动画吗？

非常感谢您的回答，我已经有一段时间了，尝试了很多不同的东西，但就是无法理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:34:14.860

您基本上每次都必须绘制所有内容。因此，每个动画循环都必须绘制背景。我知道，这可能并不理想，但它确实不会影响性能。例如：

```
function eachLoop(){
    //draw background
    //animate images
} 
```

如果我误解了 createJS 的工作方式，我深表歉意（我从未真正使用过它，但我对画布非常熟悉）希望这会有所帮助并祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T21:46:03.493

您还可以使用多个画布/舞台，后面有 BG 元素，前面有更新项目。

# batch-file - 复制文件的批处理脚本执行网络计算机，然后记录是否成功

> ID：14966413
> 
> 赞同：0
> 
> 时间：2013-02-19T20:08:27.573
> 
> 标签：batch-file

我有一个计算机名称列表，我以文本文件的形式输入脚本，并且对于每个工作站，我想将文本文件复制到桌面，然后我希望它记录天气，复制成功与否不同的文本文件，目前我在读取文件中有 2 个工作站名称，一个是可联系的，一个是不可联系的，我在日志文件中只得到一个返回，工作站名称没有填充。

```
SET COPIED=successful
SET WORKSTATION=XL
FOR /F %%X IN (workstations2.txt) DO copy /Y physicians.txt "\\%%X\C$\Documents and settings\All users\Desktop\physicians.txt"
SET WORKSTATION=%%X
IF ERRORLEVEL 1 SET COPIED="not successful"
Echo %Date% %Time% File Copy %COPIED% to %WORKSTATION% >> Logfile.txt
@echo Completed.
pause 
```

这是我的日志文件的输出

```
Tue 02/19/2013 14:02:42.74 File Copy successful to %X 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:27:39.943

我不知道你为什么要这样设置工作站，但这对我有用

注意循环主体周围的括号

```
SET COPIED=successful
FOR /F %%X IN (workstations2.txt) DO (
    echo copy /Y physicians.txt "\\%%X\C$\Documents and settings\All users\Desktop\physicians.txt"
    IF ERRORLEVEL 1 SET COPIED=not successful
    Echo %Date% %Time% File Copy %COPIED% to %%X >> Logfile.txt
)
@echo Completed.
pause 
```

# scala - 在 Scala 项目中使用 sbt 程序集时在 jar 中包含 Hyperic Sigar 库

> ID：14966414
> 
> 赞同：6
> 
> 时间：2013-02-19T20:08:31.030
> 
> 标签：scala, sbt, sbt-assembly

我正在使用 sbt 构建一个 Scala 项目，并使用 sbt-assembly 插件创建一个胖 jar。我可以通过将以下内容添加到`build.sbt`.

```
unmanagedJars in Compile +=
    file("lib/hyperic-sigar-1.6.4/sigar-bin/lib/sigar.jar") 
```

但是，当我尝试运行它时，我收到以下错误，因为`*.so`库不包含在 jar 中。

```
no libsigar-amd64-linux.so in java.library.path
org.hyperic.sigar.SigarException: no libsigar-amd64-linux.so in java.library.path
    at org.hyperic.sigar.Sigar.loadLibrary(Sigar.java:172)
    at org.hyperic.sigar.Sigar.<clinit>(Sigar.java:100)

Exception in thread "main" java.lang.UnsatisfiedLinkError: org.hyperic.sigar.ptql.SigarProcessQuery.create(Ljava/lang/String;)V
    at org.hyperic.sigar.ptql.SigarProcessQuery.create(Native Method)
    at org.hyperic.sigar.ptql.ProcessQueryFactory.getQuery(ProcessQueryFactory.java:66)
    at org.hyperic.sigar.ptql.ProcessFinder.findSingleProcess(ProcessFinder.java:44) 
```

* * *

我要包含的库在其中`lib/hyperic-sigar-1.6.4/sigar-bin/lib/*.so`，它们需要链接到 jar 中类路径中的目录。我知道做这样的映射的唯一方法是：

```
resourceDirectory in Compile <<=
    baseDirectory{ _ / "lib/hyperic-sigar-1.6.4/sigar-bin/lib" } 
```

这会导致将`*.so`库添加到jar 的**根目录**，而不是特定目录。如何指定资源映射以映射`lib/hyperic-sigar-1.6.4/sigar-bin/lib/*.so`到我的 jar 中类路径中的目录？我正在尝试做的事情的术语是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T02:34:28.920

假设 sigar 确实能够从类路径加载本机库，这应该可以解决问题：

```
libraryDependencies += "org.fusesource" % "sigar" % "1.6.4" classifier("native") classifier("") 
```

否则，您需要手动将它们从 jar 中解压缩并提供正确的 java.library.path

# mediaelement.js - 在 mediaelement.js 中播放 FLV 视频

> ID：14966423
> 
> 赞同：3
> 
> 时间：2013-02-19T20:08:57.270
> 
> 标签：mediaelement.js

如何在 mediaelement.js 中播放 .FLV 视频？

这是一个内部应用程序，我只需要使用 Google Chrome 和 mediaelement.js 播放 MP4 和 FLV 视频

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T21:55:16.700

只需插入`<video src="path/to/myvideo.flv" id="myvideo" controls="controls" preload="true"></video>`您的代码并从视频的 id 中实例化一个 mediaelement 对象。

# c# - 如果类型的 BindingGroup 名称等于 someName，则执行工作

> ID：14966426
> 
> 赞同：1
> 
> 时间：2013-02-19T20:09:07.627
> 
> 标签：c#, wpf, xaml, data-binding

我正在尝试检查一组 CheckBoxes 的绑定组是否等于我将 Checkboxes 列表设置为的绑定组的名称。

使用 foreach 循环，我可以在名为“附件”的分组框中找到子项。

在附件组框内，我有一个属于 2 个不同 BindingGroups 的复选框列表。

例如，在 xaml 我有：

```
 <CheckBox Name="AccessoriesSpareBattery"
                      BindingGroup="523S"
                      HorizontalAlignment="Left" Margin="71,117,0,0" VerticalAlignment="Top" 
                      Checked="AccessoriesSpareBattery_Checked">
                <TextBlock TextWrapping="Wrap" Text="Spare Battery"/>
            </CheckBox> 
```

我在 groupbox 中有 5 个配件，每个配件的绑定组设置为“5233”或“523S”

在代码中：

```
 private void S5233_Checked(object sender, RoutedEventArgs e)
    {
        foreach (var c in Accessories.Children.OfType<CheckBox>())
        {
            if (c.BindingGroup == "523S")
            {
                c.IsEnabled = true;
            }
        }
    } 
```

此代码块将遍历附件组框中的每个复选框。但是，当我尝试构建时，if 语句给了我以下错误。

错误 CS0019：运算符“==”不能应用于“System.Windows.Data.BindingGroup”和“字符串”类型的操作数

如何引用复选框的绑定组，以便仅更改那些特定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:45:04.287

该`BindingGroup`属性的类型为[`System.Windows.Data.BindingGroup`](http://msdn.microsoft.com/en-us/library/system.windows.data.bindinggroup.aspx)。检查 MSDN 页面，您应该能够查询它的`Name`属性：

```
private void S5233_Checked(object sender, RoutedEventArgs e)
{
    foreach (var c in Accessories.Children.OfType<CheckBox>())
    {
        if (c.BindingGroup.Name == "523S")
        {
            c.IsEnabled = true;
        }
    }
} 
```

# java - 是否可以在 Windows 2008 服务器上使用 Java FX 启用硬件加速？

> ID：14966427
> 
> 赞同：5
> 
> 时间：2013-02-19T20:09:11.220
> 
> 标签：java, graphics, javafx-2, javafx, hardware-acceleration

正如[在这个问题中](https://stackoverflow.com/questions/14566379/is-there-a-way-to-detect-if-java-fx-is-using-hardware-acceleration)所讨论的，可以通过`-Dprism.verbose=true`作为系统属性传递来检测 Java FX 是否正在使用硬件加速。当我在 Windows 2008 Server R2 上的 Java FX 应用程序上执行此操作时，它显然会退回到软件渲染：

```
Prism pipeline init order: d3d j2d
Using t2k for text rasterization
Using dirty region optimizations
Prism pipeline name = com.sun.prism.d3d.D3DPipeline
Loading D3D native library ...
        succeeded.
Direct3D initialization failed
Wrong operating system version
(X) Got class = class com.sun.prism.d3d.D3DPipeline
GraphicsPipeline.createPipeline: error initializing pipeline com.sun.prism.d3d.D3DPipeline
*** Fallback to Prism SW pipeline
Prism pipeline name = com.sun.prism.j2d.J2DPipeline
(X) Got class = class com.sun.prism.j2d.J2DPipeline
Initialized prism pipeline: com.sun.prism.j2d.J2DPipeline 
```

我的问题是，是否可以强制硬件加速，比如让 JFX 认为我有不同的操作系统？如果我能以某种方式绕过操作系统检查，我希望它可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T21:02:12.767

这相当容易：-Dprism.forceGPU=true

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-28T15:41:06.273

您还可以定义 javaFx 尝试使用的顺序，例如：-Dprism.order=es2,j2d。如果你想在 Windows 上进行 OpenGl 渲染，你需要它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-27T01:52:45.887

看起来你还没有安装 DirectX。

Direct3D 初始化失败..

# android - AccelerationSensor.accelerationchanged() 使应用变慢

> ID：14966429
> 
> 赞同：0
> 
> 时间：2013-02-19T20:09:25.450
> 
> 标签：android, crash, accelerometer, android-sensors

在我的应用程序中，我使用 AccelerationSensor.accelerationchanged(xAccel, yAccel, zAccel) API 问题是在任何轴上的每个 o.oooo1 更改都会调用该方法，因此应用程序变得非常慢，有时甚至变得“无​​响应”

有没有办法检查整数部分是否已更改并放弃任何小数更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:11:40.467

当您为传感器注册侦听器时，它允许您设置频率。使用较慢的频率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:22:32.157

这就是我正在做的，在我`onStartCommand()`的服务中

```
mSensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL); 
```

这是我正在处理我的数据的功能，它的重量很轻，但它应该给你一个使用阈值的想法。就我而言，我真的只需要稍微了解一下设备，就我而言，differenceValue 需要大约 1.75G，但对你来说可能会有所不同。

```
@Override
public void onSensorChanged(SensorEvent event) {

    if(last[0] == 0.0f &&
       last[1] == 0.0f &&
       last[2] == 0.0f){

        last[0] = event.values[0];
        last[1] = event.values[1];
        last[2] = event.values[2];

        return;
    }

    float diff = 0f;

    if(Math.abs(last[0] - event.values[0]) > differenceValue ||
       Math.abs(last[1] - event.values[1]) > differenceValue ||
           Math.abs(last[2] - event.values[2]) > differenceValue){

        Log.d(TAG,"G values are "+event.values[0]+" "+event.values[1]+" "+event.values[2]);
        Log.d(TAG,"Last G values are "+last[0]+" "+last[1]+" "+last[2]);

        diff = Math.abs(last[0] - event.values[0]);

        if(diff < Math.abs(last[1] - event.values[1])){
           diff = Math.abs(last[1] - event.values[1]);
        }

        if(diff < Math.abs(last[2] - event.values[2])){
           diff = Math.abs(last[2] - event.values[2]);
        }

        Log.d(TAG,"Sensor difference: "+diff);

        //Do what ever processing you need here

    }

    last[0] = event.values[0];
    last[1] = event.values[1];
    last[2] = event.values[2];
} 
```

# c++ - 在成员变量后加括号来初始化？

> ID：14966438
> 
> 赞同：3
> 
> 时间：2013-02-19T20:09:41.690
> 
> 标签：c++, initialization, member-variables

我见过有人在初始化列表中的成员变量后面加上括号。我想知道为什么人们会这样做？

例如，我在头文件中有一个 STL 容器：

```
class A{
public: 
    A();
    ...
private: 
    vector<string> v;
} 
```

在源文件中：

```
A::A() : v() {} 
```

我的问题是什么是 v() 以及为什么人们这样做，因为看起来 v 也没有被初始化为一个值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T20:11:25.510

这将为成员运行默认构造函数或初始化程序（对于普通类型）。在这种情况下，它将默认构造向量。由于是默认构造函数，这里就不需要了。`v`在没有初始化程序的情况下会默认构造。

* * *

```
class Example {

private:
    int defaultInt;
    vector<int> defaultVector;
    int valuedInt;
    vector<int> sizedVector;

public:

    Example(int value = 0, size_t vectorLen = 10) 
        : defaultInt(), defaultVector(), valuedInt(value), sizedVector(vectorLen)
    {
        //defaultInt is now 0 (since integral types are default-initialized to 0)
        //defaultVector is now a std::vector<int>() (a default constructed vector)
        //valuedInt is now value since it was initialized to value
        //sizedVector is now a vector of 'size' default-intialized ints (so 'size' 0's)
    }

}; 
```

对于踢腿和咯咯笑声，您还`thirdVector(vectorLen, value)`可以获取`vector`带有`vectorLen`value 的元素`value`。（所以`Example(5, 10)`会制作`thirdVector`一个`10`元素向量 value `5`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:32:31.737

`My question is what is v() and why do people do that since that doesn't look like v is initialized into a value either`

有时这样做是为了更明确。对于非 POD 类型，这不是必需的，因为会自动为它们调用默认构造函数。如果类型默认构造函数尚未定义或不可访问，这将导致编译错误。

这对 POD 类型最有意义，因为它们的值在未初始化时是未定义的。

```
struct A
{
    int  t;
    A() : { /* value of t undefined */ }
}

struct A
{
    int  t;
    A() : t() { /* value of t is t's default value of 0 */ }
} 
```

# wcf - 通过在运行时确定类型来创建 WCF 服务

> ID：14966439
> 
> 赞同：0
> 
> 时间：2013-02-19T20:09:43.477
> 
> 标签：wcf, service, runtime

我正在尝试在运行时不知道其类型/接口的情况下创建 WCF 服务。为此，我使用 ChannelFactory。ChannelFactory 是一个泛型类，所以我需要使用 Type.MakeGenericType。我传递给 MakeGenericType 的类型来自我之前通过搜索一些程序集通过反射收集的接口列表。

最终，我调用 MethodInfo.Invoke 来创建对象。该对象创建得很好，但我无法将其转换为正确的接口。投射时，我收到以下错误：

“无法将透明代理转换为类型 'Tssc.Services.MyType.IMyType'”

经过一些试验，我发现传递给 MakeGenericType 的接口/类型似乎是问题所在。如果我用实际界面替换列表中的界面，那么一切正常。我梳理了这两个对象，看不出有什么区别。当我修改代码以生成这两种类型时，将它们与 Equals 进行比较会返回 false。我不清楚 Equals 是否只是检查它们是否引用同一个对象（不是），或者它们是否正在检查所有属性等。

这是否与我收集界面的方式有关（反射，保存在列表中......）？对象的比较似乎表明它们是等效的。我打印了两个对象的所有属性，它们是相同的。我需要深入挖掘吗？如果有，进到哪里？

```
 // createService() method

     //*** tried both of these interfaces, only 2nd works - but they seem to be identical
     //Type t = interfaces[i]; // get type from list created above - doesn't work
     Type t = typeof(Tssc.Services.MyType.IMyType); // actual type - works OK

     // create ChannelFactory type with my type parameter (t)
     Type factoryType = typeof(ChannelFactory<>);
     factoryType = factoryType.MakeGenericType(new Type[] { t });         

     // create ChannelFactory<> object with two-param ctor
     BasicHttpBinding binding = new BasicHttpBinding();
     string address = "blah blah blah";
     var factory = Activator.CreateInstance(factoryType, new object[] { binding, address });

     // get overload of ChannelFactory<>.CreateChannel with no parameters
     MethodInfo method = factoryType.GetMethod("CreateChannel", new Type[] { });

     return method.Invoke(factory, null);

     //--------------- code that calls code above and uses its return

     object ob = createService();

     //*** this cast fails
     Tssc.Services.MyType.IMyType service = (Tssc.Services.MyType.IMyType)ob; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:33:56.963

好的，我明白这里发生了什么 - 问题与加载相同的程序集有关，该程序集被有效地加载了两次——一次通过引用，一次通过程序集加载命令。您需要做的是更改加载程序集的位置，并检查它是否已存在于当前 AppDomain 中，如下所示：

```
Assembly assembly = AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a => a.GetName().Name.Equals("ClassLibrary1Name"));

if (assembly == null)
{
    assembly = System.Reflection.Assembly.LoadFile("path to your assembly");
}

//do your work here 
```

这样，如果程序集已经加载到内存中，它将使用那个。

# javascript - 根据当前顶部选定的选项卡获取嵌套选项卡

> ID：14966441
> 
> 赞同：0
> 
> 时间：2013-02-19T20:09:47.147
> 
> 标签：javascript, jquery, jquery-tabs

我很难从嵌套选项卡中获取 id。

我有选项卡，每个选项卡内部都有嵌套选项卡。我从顶部选项卡获取 id 没有问题。

现在我想检查哪个选项卡处于活动状态，但它必须来自顶部选定选项卡中的一组选项卡。

```
//Top tabs
var topTabs = $('.tabs').tabs();
//Current selected top tab
var curSelected = topTabs.tabs('option', 'selected');

//Here how can I get the subtab?  NON FUNCTIONAL EXAMPLE
var secondTabSelected = $(curSelected ).children($('.subtabs').('option', 'selected')); 
```

有什么想法可以直接存档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:15:47.377

在没有看到更多代码的情况下，我只能假设您的 html 是如何设置的。但是，就个人而言，我会在调用时使用[选项卡的激活事件](http://api.jqueryui.com/tabs/#event-activate)`$('.subtabs').tabs()`，而不是稍后绑定事件侦听器。

JAVASCRIPT：

```
$('.subtabs').tabs({
    activate: function( event, ui ) {
        //get relative li index
        var secondTabSelected = $(ui.newTab).index();
        console.log(secondTabSelected);
    }
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/b8uf2/2/](http://jsfiddle.net/dirtyd77/b8uf2/2/)

希望这会有所帮助，如果您需要其他任何东西，请告诉我！

# php - HTML提交按钮解释

> ID：14966448
> 
> 赞同：-1
> 
> 时间：2013-02-19T20:10:24.450
> 
> 标签：php, html, submit

我只是想了解 php.ini 中的提交按钮。

我知道它执行表单标记中所述的操作。所以基本上我所拥有的是一个表单标签，它只定义了它的ID，即没有方法属性也没有动作。在这个表单中是一个提交按钮。该输入元素仅将类型定义为提交，即没有名称属性、id 和值。

快速描述文件：它有两个必需的输入文本元素和一个提交按钮。当我在 chrome 中查看此文件并单击提交按钮时，在必填字段下方显示一个弹出窗口，我没有在“必填字段”中输入文本。

但是我喜欢这个功能，它不检查空格，即“”。

所以回到我的问题，有人可能会告诉我提交按钮实际上做了什么，或者当我点击它时它调用了什么方法，即使它所在的表单没有定义任何操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:13:53.883

单击按钮时，浏览器会检测到这一点并将表单提交回服务器。这与 PHP 无关，它只是实现 HTML 规范规定的浏览器。

由于您的表单没有`action`属性，因此浏览器会收集表单中所有符合条件的输入控件的值，将其转换为[查询字符串](http://en.wikipedia.org/wiki/Query_string)，并使用该查询字符串向当前 URL发出 HTTP [GET请求。](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)HTML5 规范详细[介绍了这一点](http://www.w3.org/TR/html5/forms.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:15:49.900

提交按钮为提交表单提供了一种可能的界面。这就像短信的发送按钮。虽然有提交表单的替代方法，但提交按钮是 HTML 选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:17:44.157

当表单`action`为空时，表单将 GET 数据提交到表单所在的页面。（基本上，它会自行重新加载，并附上新的表单数据。）因此，您可以在同一页面的顶部编写 PHP 代码来操作数据。

在页面顶部的 PHP 代码中，您可以测试您的表单是否在这两个必填字段中发送了数据。如果一个或两个都为空，您可以`echo`向用户发送一条消息，告诉他们这些字段是必需的。

# php - 在函数内部的 ECHO 内部调用 PHP 函数

> ID：14966451
> 
> 赞同：2
> 
> 时间：2013-02-19T20:10:32.027
> 
> 标签：php

```
function footer(){
    echo "
    <script src='<?php echo JS_DIR ?>/nav.min.js'></script>
    ";
} 
```

有没有办法我可以从 php echo 中调用这个 JS_DIR 函数，或者交替输出：

```
<script src='<?php echo JS_DIR ?>/nav.min.js'></script> 
```

...从页脚功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:14:15.913

采用：

```
function footer(){
    echo "
    <script src='".JS_DIR()."/nav.min.js'></script>
    ";
} 
```

双引号 (") 停止字符串文字，句点 (.) 将 JS_DIR() 函数的输出连接（添加/附加）到字符串。第二个句点和双引号附加字符串文字，'/nav。 min.js'>' 到你的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:12:36.380

你是这个意思吗？

```
function footer(){
    echo "<script src='". JS_DIR() ."/nav.min.js'></script>";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T20:12:29.263

```
function footer(){
    echo '<script src="'.JS_DIR.'/nav.min.js"></script>';
} 
```

# asp.net - 未知的 302 重定向在根。爬虫无法跟进

> ID：14966453
> 
> 赞同：0
> 
> 时间：2013-02-19T20:10:39.130
> 
> 标签：asp.net, http, iis, url-rewriting, routing

当我注意到 Facebook Debugger 和其他爬虫工具无法解析我的页面时，整个事情就开始了。Facebook 抛出一个严重错误，指出它无法遵循重定向。我相信搜索引擎机器人正在达到同样的目的。该网站**通过所有主要的网络浏览器正常运行。**

值得一提的是，我正在试验 ASP.NET 路由，使用 IIS8 下的 Web 窗体。

给定一个网站 ( [http://example.com](http://example.com) )，这就是发生的事情。

**案例1：**尝试访问root，这是我使用Web Sniffer模拟器得到的

![在此处输入图像描述](../Images/4d1d913930ae6dba499abfdaa0465b92.png)

*案例1观察：*

我注意到的第一件事是“302”重定向而不是“200 OK”。它提供了带有或不带有前导“www”的 302 重定向。

我注意到位置标题只是“/”，由来自 IIS 的页面确认，我无法使用常规浏览器看到，它表示页面已移动到“/”。我相信此时有些事情搞砸了，爬虫由于某种原因无法完成。

**案例 2：**尝试使用 Web Sniffer 模拟器访问给定类别页面

案例2观察：

正如您可能已经想到的那样，与案例 1 相同。Facebook 调试器再次无法通过它，导致它无法遵循重定向。

![在此处输入图像描述](../Images/8a18ee2da2a9f466c4c0f8b32f475c64.png)

**问题：**

1：如何在位置标头中强制使用绝对路径而不是相对路径，这足以让爬虫跟踪吗？

2：什么可能导致网站的 www 和非 www 版本首先发生 302 重定向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:35:49.353

您的 Web 应用程序很可能依赖于 cookie。应用程序发送一个`Set-Cookie`标头并重定向到同一页面，以便接收具有可用 cookie 数据的新请求。搜索引擎/机器人、Facebook 机器人和您的 Web Sniffer 模拟器不会发送该 cookie 数据，因此 Web 应用程序会继续发送 302 重定向响应。

解决方案是将您的应用程序更改为不需要 cookie 来仅查看您的网页。

# linux - 如何从包中识别构建架构？

> ID：14966455
> 
> 赞同：0
> 
> 时间：2013-02-19T20:10:45.410
> 
> 标签：linux, build

我有一台装有 Red Hat AS5 的机器。在它上面安装了两个版本的 linux 应用程序，称为 xmlsec。一个是为 AS3 构建的，另一个是为 AS5 构建的。有什么方法可以验证哪个是哪个？文件名提供了这些信息，但有没有办法查看已安装包的签名以确保准确性？

一般来说，有没有办法确定已完成安装的构建架构 (OS)？

如果我需要提供更多信息，请告诉我。

我对构建和维护包还是很陌生。如果我的问题没有意义或者我只是需要获得更多的理解，请引导我访问一些书籍或网站。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:59:19.537

这个怎么样？

```
$rpm -q -a --queryformat='%{N}-%{V}-%{R}.%{arch}\n'
vsftpd-2.0.1-5.EL4.5.x86_64
hal-0.4.2-6.EL4.x86_64 
```

或者试试这个

```
$rpm -q -a --queryformat '%{NAME}%{VERSION}%{RELEASE}\n'
xorg-x11-twm6.8.21.EL.18
hwbrowser0.190.EL4.4 
```

Buildarch 标签

```
$rpm -q --queryformat='%{N}-%{V}-%{R}.%{arch}.%{BUILDARCHS}\n' rpm
rpm-4.4.2.3-18.el5.x86_64.(none) 
```

标签列表

```
$rpm --querytags
BUILDHOST
OS
POSTIN
POSTUN
FILELINKTOS
BUILDTIME
BUILDHOST
BUILDARCHS 
```

# xml - 在 DOM 中使用 getNamedItem 函数

> ID：14966460
> 
> 赞同：0
> 
> 时间：2013-02-19T20:11:01.870
> 
> 标签：xml, dom, vbscript

我试图通过 Vb 脚本在 xml DOM 中使用函数 getNamedItem，但它永远不会工作。下面是一段代码和 XML 文档。请帮助我找出错误，在此先感谢。

```
Set obj = CreateObject("Microsoft.xmldom")
obj.async = false
obj.load ("C:\Users\ACER\Desktop\Project Folder\Parsing XML\Books.xml")
Set root = obj.documentElement
Set child = root.childNodes
Set Node = child.item(1)
s=Node.getNamedItem('author')
Msgbox s 
```

XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<bookstore>
  <book category="cooking">
    <title lang="en">Everyday Italian</title>
    <author>Giada De Laurentiis</author>
    <year>2005</year>
    <price>30.00</price>
  </book>
  <book category="children">
    <title lang="en">Harry Potter</title>
    <author>J K. Rowling</author>
    <year>2005</year>
    <price>29.99</price>
  </book>
</bookstore> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:29:53.843

错误的引用：

```
getNamedItem('author') - use double quotes " 
```

错误的功能：

```
getNamedItem - Returns IXMLDOMNode object for the specified attribute. 
```

就像是：

```
 Dim root  : Set root  = objMSXML.documentElement
 Dim child : Set child = root.childNodes
 Dim Node  : Set Node = child.item(1)
 Dim ndFnd : Set ndFnd = Node.selectSingleNode("author")
 WScript.Echo ndFnd.text 
```

会给你：

```
J K. Rowling 
```

getNamedItem() 的示例用法：

```
...     
Dim Node  : Set Node = child.item(1)
WScript.Echo Node.attributes.getNamedItem("category").value 
```

# jquery - 使用 jQuery 验证验证多个复选框

> ID：14966465
> 
> 赞同：10
> 
> 时间：2013-02-19T20:11:14.463
> 
> 标签：jquery, jquery-validate

我正在尝试使用多个复选框，并确保使用 jQuery 验证检查这些复选框中的至少一个。到目前为止，我还没有运气。我错过了什么？我知道我的验证在那里，因为它适用于其他字段，但不适用于我的复选框。我把代码放在[jfiddle](http://jsfiddle.net/stasis/ZDz59/)上，也许这会有所帮助。

编辑：我为输入名称=列表参数（列表 []）添加了括号。同样在我的规则中，我将名称参数从列表更改为“列表 []”。我的旧代码如下。谢谢斯帕奇！

```
OLD: <input type='checkbox' name='list' id='fullProduct'></input>

FIXED: <input type='checkbox' name='list[]' id='fullProduct'></input> 
```

这是我的代码。

```
$("#tradeForm").validate({
        rules: {
            startDate: {
                required: true,
                date: true
            },
            endDate: {
                required: true,
                date: true
            },
            showName: {
                required: true,
                minlength: 5
            },
            location: {
                required: true
            },
            list: {
                required: true
            }
        },
        messages: {
            startDate: "*",
            endDate: "*"
    }
});

                <table>
                <tr>
                    <th>Name of Show</th>
                    <td> <input type='text' name='showName'></input></td>
                </tr>
                <tr>
                    <th>Location</th>
                    <td><input type='text' name='location'></input></td>
                </tr>
                <tr>
                    <th><span style='padding-right: 50px;'>Select Literature</span></th>
                    <td><input type='checkbox' name='list' id='fullProduct'></input><span style='font-size: 12px;'>Guide One</span></td>
                    <td><input type='checkbox' name='list' id='oilProduct'></input><span style='font-size: 12px;'>Guide Two</span></td>
                </tr>                               
                <tr>                                
                    <td></td>                       
                    <td><input type='checkbox' name='list' id='diamondProduct'></input><span style='font-size: 12px;'>Guide Three</span></td>
                    <td><input type='checkbox' name='list' id='motorProduct'></input><span style='font-size: 12px;'>Guide Four</span></td>
                </tr>                               
            </table> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-19T20:42:59.720

您的`name`复选框组的 是`list[]`, not `list`，因此您必须这样声明规则。[由于它包含方括号，因此`[]`您必须将其括在引号中](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)：

```
rules: {
    'list[]': {
        required: true
    }
}, 
```

**你的 jsFiddle：http: [//jsfiddle.net/ZDz59/1/](http://jsfiddle.net/ZDz59/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:14:43.050

如果您只想始终选中其中一个复选框，请改用**input type="radio"**。

如果不是：尝试将复选框的名称属性更改为**list[]**。由于可以有多个检查值，因此它必须包含括号以指示它是一个数组。否则该值将被覆盖。

# uinavigationcontroller - 在 JASidePanels 中隐藏导航栏并显示自定义导航栏

> ID：14966467
> 
> 赞同：1
> 
> 时间：2013-02-19T20:11:18.563
> 
> 标签：uinavigationcontroller

如何在 JASidePanel 中隐藏中心面板的导航栏并显示自定义栏以及自定义按钮然后显示控制器的左侧面板？

链接是

[https://github.com/gotosleep/JASidePanels](https://github.com/gotosleep/JASidePanels)

以及如何管理中央面板的内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T06:54:25.673

您应该尝试阅读头文件 JASidePanelController.h，因为它解释了您的大部分问题。

要隐藏导航栏，请在中心面板上执行以下操作：

```
[sidePanelController.centerPanel.navigationController setNavigationBarHidden:YES animated:YES]; 
```

要自定义栏，请尝试：

```
[[UINavigationBar appearance] setBackgroundImage:image forBarMetrics:UIBarMetricsDefault]; 
```

要显示自定义按钮，继承 JASidePanelController 并覆盖：

```
+ (UIImage *)defaultImage; 
```

最后，要显示左侧面板，请尝试：

```
[sidePanelController showLeftPanelAnimated:YES]; 
```

# regex - 正则表达式用 Powershell 替换引号

> ID：14966472
> 
> 赞同：0
> 
> 时间：2013-02-19T20:11:28.173
> 
> 标签：regex, powershell

我正在编辑一些网络日志文件，我想从一些字段中删除双引号，但不是全部。

例如，在以下行中，我想删除 IP 地址和 server.domain.com 中的双引号，但保留其余部分。

```
2013-02-18 21:47:46.636 POST /Path/page.html - - "173.194.79.106" "Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.296)" - "server.domain.com" 200 1079 15 
```

我正在循环加载每一行的文件`Foreach-Object`

我可以通过以下方式获取 IP 地址周围不带引号的行：

```
[regex]::replace($_,"`"(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})`"", '$1') 
```

因此，我尝试使用以下内容对 server.domain.com 项目执行相同的操作：

```
[regex]::replace($_,"`"[a-zA-Z]*\.[dD][oO][mM][aA][iI][nN]\.[cC][oO][mM]`"",'$1') 
```

我的结果是这样的：

```
2013-02-18 21:47:46.636 POST /Path/page.html - - "173.194.79.106" "Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 4.0.30319.296)" - $1 200 1079 15 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:34:21.740

添加括号并`(?i)`用于不区分大小写：

```
[regex]::replace( $_, "(?i)`"([a-z]*\.domain\.com)`"", '‌​$1' ) 
```

或者，您可以使用`-replace`默认情况下不区分大小写

```
$_ -replace "`"([a-z]*\.domain\.com)`"", '$1' 
```

# client - IBM Websphere 中的 Axis2 Web 服务客户端引发“密钥派生错误”异常

> ID：14966475
> 
> 赞同：1
> 
> 时间：2013-02-19T20:11:32.890
> 
> 标签：client, websphere, axis2, rampart

我们在 IBM websphere 中部署了一个安全的 Web 服务客户端（壁垒）。我们正面临服务提供商（外部）可能经常宕机的情况。我们的客户工作正常，并且可以访问该服务，直到它出现故障。一旦提供者在停机后返回，客户端就会抛出异常：

```
org.apache.axis2.AxisFault: General security error; nested exception is:
    org.apache.ws.security.conversation.ConversationException: Error in key derivation 
```

目前，要从中恢复，我们需要重新启动服务器，这是不可接受的。有没有人有类似的问题？任何指针都会有很大帮助。在此先感谢，罗斯

# linux - 安装 XSP CentOS

> ID：14966479
> 
> 赞同：0
> 
> 时间：2013-02-19T20:11:55.727
> 
> 标签：linux, mono, centos, xsp

尝试安装 xsp-2.10.2。一直工作正常，现在在新安装时给我这个错误

**编辑：**我已经从源代码安装了 Libgdiplus 和 Mono 3.0.1，现在尝试对 xsp4 做同样的事情。

```
./configure --prefix=/opt/mono
make ; make install

Making install in Mono.WebServer
mkdir: cannot create directory `2.0': File exists
GMCS  /out:2.0/Mono.WebServer2.dll
/usr/local/bin/mcs: line 2: /usr/local/bin/mono: No such file or directory
/usr/local/bin/mcs: line 2: exec: /usr/local/bin/mono: cannot execute: No such file or 
directory
make[2]: *** [2.0/Mono.WebServer2.dll] Error 126
make[1]: *** [install-recursive] Error 1
make: *** [install-recursive] Error 1 
```

# django - 带有 Django 的 RESTful URL

> ID：14966480
> 
> 赞同：2
> 
> 时间：2013-02-19T20:11:55.573
> 
> 标签：django, restful-url

我一直在尝试 Ruby on Rails，并且非常喜欢 URL 的 RESTful 方法。现在我正在尝试学习 Django，我想创建与 Rails 相同的嵌套 URL。

可以说我想这样做：`/categories/12/products/13`

这是我想出的，但似乎不起作用：

```
url(r'^categories/(?P<category_id>\d+)/products/(?P<product_id>\d+/$)', 'my_app.views.product', name="product"), 
```

这应该怎么做？另外，您如何使用`url`模板助手来创建这种链接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:13:55.033

查看[美味派](http://tastypieapi.org/)。它是 Django 的一个插入式 REST Api，类似于您在 Rails 中所使用的，无需太多工作即可让您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:25:30.727

很高兴你把它整理好了，因为提到了 TastyPie，我也会推荐[Django REST 框架](http://django-rest-framework.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:33:00.243

在模板中，您可以使用`<a href="{% url product category_id product_id %}">Link title</a>`

要在您的 python 代码中创建一个 url，您可以使用`reverse`：

```
from django.core.urlresolvers import reverse

url = reverse('product', args=[category_id, product_id]) 
```

# c# - 单击 html 按钮

> ID：14966482
> 
> 赞同：-4
> 
> 时间：2013-02-19T20:12:03.570
> 
> 标签：c#, html, button, click, invoke

这是我试图点击的按钮：

```
<td class="dark" onclick="document.getElementById('id').value = '0'; document.getElementById('form').submit()">
   test
</td> 
```

我尝试了使用 Winform WebBrowser 控件单击该元素的代码：

```
HtmlElementCollection links = webBrowser1.Document.Links;

foreach (HtmlElement link in links)
{
    if ((link.InnerText != null) && (link.InnerText.Equals("test")))
        link.InvokeMember("Click");
} 
```

它点击链接，但不点击我上面发布的按钮。我也尝试过不同的事情：

```
if (curElement.GetAttribute("id").Equals("0"))
{
    curElement.InvokeMember("click");
} 
```

从 WebBrowser 控件单击该表格单元格的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:39:47.343

问题在于，您所说的“链接”不是 WebBrowser 方面的链接，而是所谓的表格单元，它在 html 中表示为[此处](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/td)`<td>`解释的标记。这就是当您遍历集合时找不到所需内容的原因。`document.links`

[您可以在webbrowsercontrol](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)的 Document 属性上使用另一种方法来获取特定标记名称的列表[GetEelementsByTagName](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmldocument.getelementsbytagname.aspx)。那会给你`<td>`的。通过一个简单的 if 您可以检查您是否到达正确`<td>`，然后在元素上调用[RaiseEvent](http://msdn.microsoft.com/en-us/library/system.windows.forms.htmlelement.raiseevent.aspx)以调用所需的行为。

```
 foreach (HtmlElement td in this.webBrowser1.Document.GetElementsByTagName("td")) 
  {
         Debug.WriteLine(td.InnerText);
        if (td.InnerText.Equals("test"))
        {
                     td.RaiseEvent("onclick");
        }
  } 
```

# jquery - jquery复杂选择器，如何找到具有特定ID的元素中的所有元素最少？

> ID：14966483
> 
> 赞同：0
> 
> 时间：2013-02-19T20:12:04.613
> 
> 标签：jquery, jquery-selectors

如何找到不在具有特定 ID 的元素中的所有元素？我试试这个，但它不起作用：

```
$(':not(#content *)') 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:29:54.073

选择所有内容，然后使用[`not`](http://api.jquery.com/not/)删除不需要的内容：

```
$("*").not("#content *"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:15:50.960

试试这个：

```
$(':not([id="content"])') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:30:34.770

这应该让你开始

**html**

```
<div id="div1"></div>
<div id="div2"></div>
<div id="content">
    <div id="div3"></div>
    <div id="div4">
        <div id="div5"></div>
    </div>
</div> 
```

**js**

```
$(function(){

    var $divsWithoutContentParent = $('body div').filter(function(){
        return !$(this).closest('#content').length;
    });

    console.log($divsWithoutContentParent);
}); 
```

# [小提琴](http://jsfiddle.net/dTNhe/2/)

# jquery - jQuery UI Autocomplete JSON 给出错误：Uncaught TypeError: Cannot use 'in' operator to search '62' in

> ID：14966487
> 
> 赞同：9
> 
> 时间：2013-02-19T20:12:15.767
> 
> 标签：jquery, ajax, json, jquery-ui, autocomplete

我在让自动完成功能在我的页面上工作时遇到了很多麻烦。当我在搜索输入中输入 2 个字符（“OW”）时，我得到了预加载器图像（见下文），但它永远不会消失，我也永远不会得到自动完成弹出窗口。查看 Chrome 中的控制台显示：

```
Uncaught TypeError: Cannot use 'in' operator to search for '62' in [{"value":103,"label":"FLOWER"},{"value":105,"label":"YELLOW"}] 
```

这是正在返回的实际字符串（通过在成功块中添加警报（数据）来确认）：

```
[{"kwrdID":103,"kwrdKeyWord":"FLOWER"},{"kwrdID":105,"kwrdKeyWord":"YELLOW"}] 
```

这是自动完成的主要代码

```
$("#searchInput").autocomplete({
source: function (request, response) {
    $.ajax({
        url: '@Url.Action("GetKeywords", "Home")',
        dataType: "json",
        data: {
            SearchTerm: request.term
        },
        success: function (data) {
            response($.map(data.keywords, function (item) {
                return {
                    label: item.kwrdKeyWord,
                    value: item.kwrdID
                }
            }));
        }
    });
},
    minLength: 2
}); 
```

最后，这是预加载器（以防万一它相关）。

```
$(document).ajaxStart(function () {
    var position = $('#divParent').position();
    position.left += (($('#divParent').width() / 2) - ($('#preloader').width() / 2));
    position.top += (($('#divParent').height() / 2) - ($('#preloader').height() / 2));
    $('#preloader').css(position).show();
    $('#preloader').show();
}).ajaxStop(function () {
    $('#preloader').hide();
}); 
```

谁能帮忙解释这里发生了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T17:52:34.973

这是一条漫长的道路，但经过数小时的试验后，我想出了以下代码：

```
$("#searchInput").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: '@Url.Action("GetKeywords", "Home")',
            dataType: "json",
            data: {
                SearchTerm: request.term
            },
            success: function (data) {
                var parsed = JSON.parse(data);
                var newArray = new Array(parsed.length);
                var i = 0;

                parsed.forEach(function (entry) {
                    var newObject = {
                        label: entry.kwrdKeyWord
                    };
                    newArray[i] = newObject;
                    i++;
                });

                response(newArray);
            },
            error: function (message) {
                response([]);
            }
        });
    },
    minLength: 2
}); 
```

这似乎工作正常。事实是我的关键字是独一无二的，所以无论如何我都可以不用 ID。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-01-28T13:29:38.907

一些有用的帮助：

如果您使用的是 json，则可能是“json 对象”没有被解析，或者您已经用其他变量覆盖了变量（就像我最近愚蠢地做的那样）。

对于第一个问题，请确保您的服务器知道“application/json” MIME 类型，否则使用标头（用于 PHP）

我的意思是，在 PHP 中，首先使用这个：

```
header("Content-type: application/json"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T03:18:40.577

这里你如何使用源属性的函数

```
source:function(request,response) {
    var url = "your url";
    var postdata = "your data"; // normally you might use request.term to get the current user input
    $.ajax({url:url,data:postdata,success:function(responsedata){
        response($.parseJSON(responsedata))
    }});
} 
```

响应函数接受 JSON 对象数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T08:15:36.850

`data.keywords`而不是`JSON.parse(data)`在这一行写替换： `response($.map(data.keywords, function (item) {`。

BR，哈泽姆

# jquery - jQuery click 事件在第一次尝试时失败

> ID：14966495
> 
> 赞同：0
> 
> 时间：2013-02-19T20:12:36.957
> 
> 标签：jquery, onclick

我有一个绑定到特定类的 onClick 的函数。该功能似乎在第一次尝试时没有触发，但之后工作正常。奇怪的是，我在脚本中的警报每次都有效，所以我无法弄清楚为什么其余的功能会失败。

```
$(document).ready(function () {
    // capture original link and asset name on click
    $("a.dggate").bind("click", function () {
        window.tempURL = $("a.dggate").attr("href");
        window.assetTitle = $("a.dggate").attr("title");
        strAsset = assetTitle;
        alert("click " + knownUser);
        if (knownUser != true) {
            //alert(tempURL);
            $("a.dggate").fancybox({
                // choose which form to display
                href: "http://www.domain.com/",
                type: 'iframe',
                scrolling: 'no',
                width: "60%",
                height: "100%",
                titleShow: false
            });
        } else {
            // send blind form if user is known
            bFormSubmit();
            return false;
        }
    }); // click
}); // ready 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:20:49.097

尝试写作

```
$("a.dggate").click(function (e) {
    e.preventDefault(); 
```

而不是那个“绑定”线，似乎有效。

# html - 哪个 CSS 定义阻止了左侧边栏 DIV 的高度增长？

> ID：14966498
> 
> 赞同：-3
> 
> 时间：2013-02-19T20:12:54.010
> 
> 标签：html, css

我在确定哪个 CSS 类定义阻止左侧边栏（带有粉红色背景的那个）在[此页面](http://princecorp.dev.warp9inc.com/testing.html)上的高度增长时遇到问题。

我之前应该提到，我已经尝试了我能想到的一切，并在这里研究了许多问题，包括添加和`height:auto;`到`overflow:auto;`、，`col-left`以及所有其他问题。 `sidebar``col-main`

有人可以帮我识别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:33:07.600

乍一看，我认为主要问题是`position:absolute`for的使用`.col-left`。`position:absolute`导致该元素位于页面其余部分的流程之外。它的高度对其父级的结果高度没有影响（就好像它不在父级内部一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:21:16.033

查看页面源代码，元素的高度不是通过 CSS 指定的。如果您希望侧边栏增长，则需要指定高度和/或最小/最大高度属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:22:33.263

你有很多高度值设置为 100%，在我能够增加你的内容的垂直空间之前，我一直到页面 div 类。

我建议评估您是否应该在这么多元素中使用特定的高度属性，您可能会无缘无故地限制自己。

# c++ - 我可以在列表后面使用在初始化列表中初始化的 C++ 类成员吗？

> ID：14966501
> 
> 赞同：9
> 
> 时间：2013-02-19T20:12:58.800
> 
> 标签：c++, instantiation, class-constructors, podofo

我正在重写一些代码以消除全局变量，并使类构造函数/析构函数处理一些第三方库资源的清理，但我担心一些代码会从类初始化列表中的另一个成员初始化一个成员。

```
class MyPodofoDocument {
public:
    // generates pdf to stream
    MyPodofoDocument(std::stringstream *pStringStream)
        : device(pStringStream), document(&device)
    {
    }
private:
    PoDoFo::PdfOutputDevice device;
    PoDoFo::PdfStreamedDocument document;
    PoDoFo::PdfPainter painter;
}; 
```

使用此类的代码不需要查看使用该库的所有详细信息，但我隐藏它们的方式使其依赖于使用成员来初始化其他成员，然后才能到达构造函数的实际代码块，它在哪里有一个有效的 this 指针。

它在单元测试框架中工作，所以我的问题基本上是，“这可以吗，便携且安全吗？”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T20:16:30.860

成员按照声明的顺序从上到下进行初始化

```
PoDoFo::PdfOutputDevice device;
PoDoFo::PdfStreamedDocument document;
PoDoFo::PdfPainter painter; 
```

所以使用`device`初始化是安全的`document`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T20:15:40.063

有点儿。规则是成员变量按照它们在类声明中声明的顺序进行初始化。

在您的情况下，这很好，因为`device`在之前声明过`document`。

然而，在以下情况下，我们有未定义的行为，尽管初始化列表的顺序。

```
class A {
public:
  A(int i) : b(i), a(b) { }
private:
  int a;
  int b;
} 
```

# java - 默认情况下，Apache POI 会锁定所有单元格。如何使所有单元格解锁？

> ID：14966502
> 
> 赞同：0
> 
> 时间：2013-02-19T20:13:06.727
> 
> 标签：java, excel, apache-poi

如何使工作表中的所有单元格默认解锁？

此代码段创建一个所有单元格都锁定的工作表

```
SXSSFWorkbook wb = new SXSSFWorkbook();
Sheet sheet = wb.createSheet("Results");
Row row = sheet.createRow(rowCounter);
Cell cell = row.createCell(counter);
cell.setCellValue("test"); 
```

尝试打开 excel 文件时，此代码段会导致一些损坏的数据

```
SXSSFWorkbook wb = new SXSSFWorkbook();
Sheet sheet = wb.createSheet("Results");
Row row = sheet.createRow(rowCounter);
Cell cell = row.createCell(counter);
CellStyle cellStyle = wb.createCellStyle();
cellStyle.setLocked(false);
cell.setCellStyle(cellStyle);
cell.setCellValue("test"); 
```

此代码段不会导致任何问题，但它也会解锁单元格。我可以修改所有单元格，但如果我点击“格式”，“锁定单元格”链接会突出显示。

```
SXSSFWorkbook wb = new SXSSFWorkbook();
Sheet sheet = wb.createSheet("Results");
Row row = sheet.createRow(rowCounter);
Cell cell = row.createCell(counter);
cell.setCellValue("test");
cell.getCellStyle().setLocked(false); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T21:07:38.410

您的第一个片段**不会**使用 POI 3.9 生成带有锁定单元格的文档。

```
SXSSFWorkbook wb = new SXSSFWorkbook();
Sheet sheet = wb.createSheet("Results");
Row row = sheet.createRow(0);
Cell cell = row.createCell(0);
cell.setCellValue("test");

FileOutputStream fileOut = new FileOutputStream("/tmp/test.xlsx");
wb.write(fileOut);
fileOut.close(); 
```

正如预期的那样，单元格在生成的工作簿中是可编辑的。

SXSSF 是流式 POI API。它针对将大量数据写入基于 XML 的电子表格进行了优化（普通的 XSSF api 将 XML 文档保存在内存中，并且在构建大型文档时可以使用大量内存）。如果您不需要输出基于 XML 的大型文档，我建议您只使用 XSSF api，因为 SXSSF 有几个限制和陷阱，并且没有很好的文档记录。

也可以看看：

*   [SXSSF 文档](http://poi.apache.org/spreadsheet/how-to.html#sxssf)
*   [POI 快速入门](http://poi.apache.org/spreadsheet/quick-guide.html)

# javascript - 如何使用 Javascript 提交表单

> ID：14966505
> 
> 赞同：-3
> 
> 时间：2013-02-19T20:13:30.420
> 
> 标签：javascript, html, forms

```
<input type="submit" name="submit" value="Submit" onclick="check_form();"></div> 
```

如果所有字段都正确函数`check_form()`返回true，我要提交表单，只有所有字段都正确，该怎么做。在我关闭 JavaScript 警报表单自动提交的那一刻。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:16:04.070

你错过了回报

```
<input type="submit" name="submit" value="Submit" onclick="return check_form();"></div> 
```

和你的功能

```
function check_form(){
    var isValid = true;
    if(.....) {
        isValid = false;
    } 
    return isValid;
} 
```

更好地使用`onsubmit`表单，因为文本框中的 Enter 键可以提交它。

# xml - 不处理子节点（使用“SelectNodes”）

> ID：14966520
> 
> 赞同：1
> 
> 时间：2013-02-19T20:14:31.500
> 
> 标签：xml, vb.net, parent-node

示例 XML；

```
<root>
  <cmdset>Set 1
    <cmd>Command 1</cmd>
  </cmdset>
  <cmdset>Set 2
    <cmd>Command 2</cmd>
  </cmdset>
</root> 
```

我只想从`<cmdset>`标签中提取文本。示例代码；

```
Sub Main()
        Dim doc As XmlDocument = New XmlDocument()
        doc.Load("help.xml")
        For Each Element As XmlElement In doc.SelectNodes("//cmdset")
            Console.WriteLine(Element.InnerText)
        Next
        Console.Read()
    End Sub 
```

电流输出；

```
Set 1
    Command 1
Set 2
    Command 2 
```

期望的输出；

```
Set 1
Set 2 
```

谢谢请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:15:54.400

您需要使用 XPath`text()`函数仅选择文本内容，例如：

```
For Each textNode As XmlText In doc.SelectNodes("//cmdset/text()")
    Console.WriteLine(textNode.InnerText)
Next 
```

请注意，我还将迭代器从`XmlElement`变量更改为`XmlText`变量，因为 XML 文档中的文本内容不被视为元素节点，而是文本节点。

# c - 自定义内核：实现文件系统

> ID：14966523
> 
> 赞同：2
> 
> 时间：2013-02-19T20:14:45.977
> 
> 标签：c, operating-system, filesystems, kernel, ext2

作为一个课程外的项目，我目前正在开发一个内核，以试图更好地理解实际操作系统的所有方面。到目前为止，我已经完成了一个平面物理内存模型的设置，它支持分页和基本中断（接下来可能是键盘和触控板/鼠标）。我认为向前迈出的一步是实现一个文件系统，我对 ext2 很感兴趣。我环顾四周，即使在 SO 上，但没有任何明确的答案可以回答我的问题：

1.  是否可以编写驱动程序来访问 C 中的 ext2 文件系统，还是我需要降低？
2.  如果我打算从 USB 设备访问文件系统，我假设我需要首先运行 USB 设备驱动程序。对此的任何帮助将不胜感激。
3.  我知道用于检测文件系统的代码已经在 MINIX 和其他内核上可用，但我真正想知道的是，如果我想构建一个自定义的虽然简单的文件系统，我该怎么做？我也在考虑这种可能性。

如果问题和细节听起来有点无知，我深表歉意，但我仍在学习过程中。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:48:47.940

我会尝试给你一些提示/提示 - 一个明确的答案并不那么简单：

1.  用 C 编写的 ext2 文件系统只是 C。C 只是一种编程语言——你可以使用 C++、普通汇编或其他一些语言（一些操作系统使用 D）——但不是“托管”语言等。但它是重要的是您对这种语言有坚如磐石的理解。在我看来，程序集是必须的（看看操作系统中的调度程序 -> 普通程序集）

2.  您真的要编写 USB 驱动程序吗？它“不仅仅是”一个简单的 USB 驱动程序（抽象层）。为什么是 USB 驱动程序而不是软盘或 CD 驱动程序（相信我 - 32 位保护模式下的软盘驱动程序并不难）？

3.  请专注于您的项目。当然 Linux（早期版本）和 Minix 有示例代码，但要注意设计结构（Monolithic/Microkernel 或混合内核）——不要混合使用，编写自己的代码。

请一步一个脚印。您编写了一个基本的 IRQ 处理程序，并且计划编写键盘/鼠标驱动程序 - 编写键盘驱动程序！不要梦想加载和执行文件（Rom 不是一天建成的）。

You have to read documentations, for example the Intel manuals or other "books". A very popular forum is osdev.org - take a look at the wiki. As twalberg said, it's a very huge module - stay focused on the main parts of your operating system.

I know, this is not the answer to your question - but it's important not to go in the wrong direction and dream of a fancy UI or something like this ;)

[osdev.org forum](http://f.osdev.org/)
[osdev.org wiki](http://www.osdev.org/)
[Intel manuals](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

And a few other books in my book shelf can you find here (Tanenbaum, Silberschatz with Peter Galvin - great books!):

[Books](http://wiki.osdev.org/Books)

# android - No photo in ImageView after return from Intent, handling life-cycle events

> ID：14966525
> 
> 赞同：0
> 
> 时间：2013-02-19T20:14:50.650
> 
> 标签：android, sql, android-camera, android-imageview, lifecycle

I had idea to build simple app that can store text and images. I started from Notepad Tutorial ([http://developer.android.com/training/notepad/index.html](http://developer.android.com/training/notepad/index.html)) from first and second exercise. After I did second I arrange exercise to handle images, it was working very well unless user tapped back button in device. With help came thid exercise where the goal to handling life-cycle events. I managed to did it, it is working very well for old entries in database, but when I try to add new Image, my ImageView is not filled with just taken photo. Can you spot where is the problem?

```
public class ParagonArmageddonEdit extends Activity
{

private EditText mTitleText;
private EditText mBodyText;
private Long mRowId;
private ImageView imageContainer;
private byte[] imageInByteArray;
private Button takePhotoButton;
private ParagonDbAdapter mDbHelper;

private static final long serialVersionUID = 1L;
public boolean classEnabled;
private static final int CAMERA_REQUEST = 1888;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    mDbHelper = new ParagonDbAdapter(this);
    mDbHelper.open();

    setContentView(R.layout.paragonarmageddon_edit);
    setTitle(R.string.edit_note);

    this.imageContainer = (ImageView) this.findViewById(R.id.ImageView);
    this.takePhotoButton = (Button) this.findViewById(R.id.photoButton);
    mTitleText = (EditText) findViewById(R.id.title);
    mBodyText = (EditText) findViewById(R.id.body);

    Button confirmButton = (Button) findViewById(R.id.Save);

    mRowId = (savedInstanceState == null) ? null :
        (Long) savedInstanceState.getSerializable(ParagonDbAdapter.KEY_ROWID);
    if (mRowId == null) {
        Bundle extras = getIntent().getExtras();
        mRowId = extras != null ? extras.getLong(ParagonDbAdapter.KEY_ROWID)
                                : null;
    }
    populateFields();

    this.takePhotoButton.setOnClickListener(new View.OnClickListener()
    {

        @Override
        public void onClick(View v)
        {
            //camera Intent
            Intent IntentKamery = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(IntentKamery, CAMERA_REQUEST); 
        }
    });

    confirmButton.setOnClickListener(new View.OnClickListener()
    {

        public void onClick(View view) {
            setResult(RESULT_OK);
            finish();
        }

    });
}

private void populateFields() {
    if (mRowId != null) {
        Cursor note = mDbHelper.fetchNote(mRowId);
        startManagingCursor(note);
        mTitleText.setText(note.getString(
                note.getColumnIndexOrThrow(ParagonDbAdapter.KEY_TITLE)));
        mBodyText.setText(note.getString(
                note.getColumnIndexOrThrow(ParagonDbAdapter.KEY_BODY)));
        byte[] photo = note.getBlob(note.getColumnIndexOrThrow(ParagonDbAdapter.KEY_ZDJECIE));
        Bitmap photoConvertedToBitmap = BitmapFactory.decodeByteArray(zdjecie, 0, photo.length);
        this.imageContainer.setImageBitmap(photoConvertedToBitmap);
    }
}

protected void onActivityResult(int requestCode, int resultCode, Intent data)
{  
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK)
    {   
        Bitmap photoConvertedToBitmap = (Bitmap) data.getExtras().get("data"); 
        imageContainer.setImageBitmap(photoConvertedToBitmap);

        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        photoConvertedToBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
        imageInByteArray = stream.toByteArray();
        photoTaken = true;
    }  
}
@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putSerializable(ParagonDbAdapter.KEY_ROWID, mRowId);
}

@Override
protected void onPause() {
    super.onPause();
    saveState();
}

@Override
protected void onResume() {
    super.onResume();
    populateFields();
}

private void saveState() {
    String title = mTitleText.getText().toString();
    String body = mBodyText.getText().toString();

    imageContainer.buildDrawingCache();
    Bitmap photoConvertedToBitmap = imageContainer.getDrawingCache();

    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    photoConvertedToBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    imageInByteArray = stream.toByteArray();

    if (mRowId == null) {
        long id = mDbHelper.createNote(title, body, imageInByteArray);
        if (id > 0) {
            mRowId = id;
        }
    } else {
        mDbHelper.updateNote(mRowId, title, body, imageInByteArray);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:20:49.363

Intent`android.provider.MediaStore.ACTION_IMAGE_CAPTURE`不会在其“数据”Extra 中返回字节数组。它返回一个`Uri`必须打开的图像，例如

`Uri uri = data.getData();`

这提供了图像的内容路径，可以使用以下命令加载`ContentResolver`：

```
InputStream input = context.getContentResolver().openInputStream(uri);
Bitmap bitmap = BitmapFactory.decodeStream(input); 
```

您需要确保检查`Uri`存在并优雅地处理错误，您永远不应该假设另一个应用程序会做一些明智的事情，并且应该尽可能地期待格式错误/丢失的数据。

# mysql - Copy columns data from one table to another

> ID：14966527
> 
> 赞同：0
> 
> 时间：2013-02-19T20:14:56.257
> 
> 标签：mysql

Please could someone help, i'm really stuck.

I have a mysql database with two tables ( with thousands of rows ), each table has a column called 'map' and i need to copy all the rows from one tables column to the 'map' column of the other table?

I know it seems simple but i'm getting in a jumble

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:19:39.520

像这样的东西会起作用。

```
UPDATE table_to
       JOIN table_from
       <put join here>
SET table_to.map = table_from.map 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:38:20.917

或者只是简单地使用下一个。这会将 table_from 中的所有行与 map 列中的值插入 table_to 的 map 列。

```
INSERT INTO table_to
(map)
SELECT map FROM table_from 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T16:59:43.190

在mysql中将数据从一个表复制到另一个表

插入到`database1`. `table1`选择 * 从`database2`。`table2`;

# php - PHP，fputcsv，想把每个数组写成一列而不是一行

> ID：14966528
> 
> 赞同：0
> 
> 时间：2013-02-19T20:14:59.627
> 
> 标签：php, arrays, csv, fputcsv

简单示例：

```
$a = array(1,2,3,4);
$b = array(10,20,30,40);
$c = array(100,200,300,400); 
```

如果我执行以下操作：

```
$fp = fopen('somefile.csv','w');
fputcsv($fp,$a);
fputcsv($fp,$b);
fputcsv($fp,$c);
fclose($fp); 
```

我得到一个看起来像这样的文件：

```
1,2,3,4
10,20,30,40
100,200,300,400 
```

正如我所料。但是我想要的是：

```
1,10,100
2,20,200
3,30,300
4,40,400 
```

如果不从每个数组中循环和写入每个索引，这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:19:10.833

使用循环有什么问题？这很容易。

```
$fp = fopen('somefile.csv','w');
for ($i = 0 ; $i < 4 ; $i++){
  fputcsv($fp, array($a[$i], $b[$i], $c[$i])) ;
}
fclose($fp) ; 
```

# mysql - 在 MySQL 中为 SHOW PROFILES 变量重新创建代码

> ID：14966529
> 
> 赞同：0
> 
> 时间：2013-02-19T20:14:59.610
> 
> 标签：mysql

嗨，我正在使用 MySQL，

```
SHOW PROFILES; 
```

返回一个长列表，例如这样的行：

```
 |Query_ID|Duration     |Query
>| 9    |    0.00028550 |   INSERT INTO Duration(Status,DURATION,Query_ID)| 
```

我正在尝试复制它，因此我可以将结果插入到表中并添加一个`WHERE`子句。

所以我尝试了这个

```
SELECT Query_ID, STATE, FORMAT(DURATION, 6) AS DURATION
FROM INFORMATION_SCHEMA.PROFILING
WHERE QUERY_ID = 9; 
```

但这会返回一个较低级别的视图（我不想要）：

> 起始 0.000053 开表 0.000088

这与以下内容相同：

```
SHOW PROFILE; 
```

我将如何重新创建`SHOW PROFILES`？所以我可以执行这样的事情：

```
INSERT INTO Duration(Query_ID,Status,DURATION)
SELECT * FROM SHOW PROFILE
WHERE PROFILE.QUERY_ID = 9; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:21:26.673

按 分组`QUERY_ID`。要获取状态，您需要`STATE`具有[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html) `SEQ`的记录；要获得持续时间，只需`DURATION`对组中的每条记录求和：

```
INSERT INTO Duration
  (Query_ID, Status, DURATION)
SELECT QUERY_ID, STATE, t.DURATION
FROM   INFORMATION_SCHEMA.PROFILING JOIN (
  SELECT   QUERY_ID, MAX(SEQ) AS SEQ, SUM(DURATION) AS DURATION
  FROM     INFORMATION_SCHEMA.PROFILING
  WHERE    QUERY_ID = 9
  GROUP BY QUERY_ID  -- superfluous in the presence of the above filter
) t USING (QUERY_ID, SEQ) 
```

# java - How to show JPanel over another JPanel and then hide it

> ID：14966530
> 
> 赞同：0
> 
> 时间：2013-02-19T20:15:10.873
> 
> 标签：java, swing, awt

So Id like to have 2 JPanels. Up JPanel (introPanel) and down JPanel (mainPanel). Id like to add keyListener to JFrame so when I press any key up panel hides so we can see down panel. How should the code look like to work?

```
class MainFrame extends JFrame {
    private MainPanel mainPanel = new MainPanel();
    private IntroPanel introPanel = new IntroPanel();

    MainFrame() {
        add(mainPanel);
        add(introPanel);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        addKeyListener(new KeyAdapter() {
            @Override
            public void keyReleased(KeyEvent ev) {
                introPanel.setVisible(false);
            }
        });
        pack();
        setVisible(true);
    }

} 
```

This code doesn't hide introPanel. What's wrong?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:19:40.513

您只能将一个组件放置在该`BorderLayout.CENTER`位置，以便在添加时发生`introPanel`位移`mainPanel`。`mainPanel`如果您希望它出现，您必须添加：

```
add(mainPanel);
revalidate();
repaint(); 
```

考虑使用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。它以这种方式支持“堆叠”组件的概念。

还可以考虑为基于 Swing 的应用程序使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。与不同`KeyListeners`的是，Key Bindings 不需要焦点来与之交互`KeyEvents`。

# python - Python IndentationError：Xcode 上的“预期有缩进块”

> ID：14966531
> 
> 赞同：1
> 
> 时间：2013-02-19T20:15:15.850
> 
> 标签：python, xcode, indentation

我在 xcode 和 vi 上遇到了这个错误。Python 说行类 LeastModel 有一个 IndentationError: expected an indented block。我检查了我在 Xcode 上的偏好，将 4 个空格用于制表符以及我一直在使用制表符的所有地方。请帮我！

```
def make_model(data,model):

class LeastModel():
    """
    linear system solved using linear least squares
    This class serves as an example that fulfills the model interface needed by the ransa function.
    """
    def __init__(self,input_columns,output_columns):
        self.input_columns = input_columns
        self.output_columns = output_columns
        #self.debug = debug 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:23:11.017

您的问题是您在该行之后没有缩进代码：

```
def make_model(data,model): 
```

您可以：

1.  摆脱那条线

2.  将一些缩进代码写入该函数的主体

3.  缩进整个类定义，以便`LeastModel`在函数中定义类。

`make_model`从你调用你的函数和你的类的事实来看`LeastModel`，我认为你以某种方式打算将类定义放在函数中。但这可能是您的错误 - 请注意，如果您在函数中定义它，您将无法在函数之外使用该类（除非您从函数中返回类本身，使用`return LeastModel`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:17:21.160

假设没有复制错误并且这就是您的代码实际的样子，您需要缩进`__init__()`以使其位于类定义中：

```
class LeastModel():
    """
    linear system solved using linear least squares
    This class serves as an example that fulfills the model interface needed by the ransa function.
    """
    def __init__(self,input_columns,output_columns):
        self.input_columns = input_columns
        self.output_columns = output_columns
        #self.debug = debug 
```

**编辑：**现在您已经包含了完整的代码，问题实际上是您的`make_model()`函数定义下没有任何内容。如果该函数实际上应该什么都不做，请`pass`在该行下方添加`def`（缩进一级）。否则，在此处放置一些代码或删除该`def`行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:17:29.330

不应该是：

```
class LeastModel():
    """
    linear system solved using linear least squares
    This class serves as an example that fulfills the model interface needed by the ransa function.
    """
    def __init__(self,input_columns,output_columns):
        self.input_columns = input_columns
        self.output_columns = output_columns
        #self.debug = debug 
```

# php - 修复了 upload.php 脚本的文件名

> ID：14966535
> 
> 赞同：-5
> 
> 时间：2013-02-19T20:15:25.390
> 
> 标签：php, xml, file-upload, upload

我正在尝试将 XML 文件上传到服务器，该文件名为`data.xml`. 每次访问数据时，数据总是会被覆盖。

我的疑问是如何将文件名设置为带有`.xml`扩展名的固定名称作为扩展名过滤器？我想将文件放在与`upload.php`.

这是我到目前为止所尝试的：

```
<?php

$target_path = "uploads/";

$target_path = $target_path . basename($_FILES['uploadedfile']['name']);

if (move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ", basename($_FILES['uploadedfile']['name']), " has been uploaded";
} else {
    echo "There was an error uploading the file, please try again!";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:17:31.270

你有没有尝试过：

```
<?
$target_path = "uploads/";

$target_path = $target_path . 'data.xml'; 

 if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
" has been uploaded";
 } else{
 echo "There was an error uploading the file, please try again!";
 }
?> 
```

# c++ - boost::spirit and grammars

> ID：14966538
> 
> 赞同：0
> 
> 时间：2013-02-19T20:15:32.060
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

I'm trying to parse this simply and consise xml-minded structure with Boost::Spirit,

```
One{
    Two{
        Three{
        }
    }
} 
```

And the code is organized as follows:

Struct definition to keep the spirit-stuff:

```
struct config;
typedef boost::variant< boost::recursive_wrapper<config> , std::string > config_node;

struct config
{
    std::string name;
    std::vector<config_node> children; 
};

BOOST_FUSION_ADAPT_STRUCT(
    config,
    (std::string, name)
    (std::vector<config_node>, children)
) 
```

( shameless stealed from the xml intro )

Declaration of the rules ( on the parser class )

```
qi::rule<Iterator, config(), qi::locals<std::string>, ascii::space_type> cfg;
qi::rule<Iterator, config_node(), ascii::space_type> node;
qi::rule<Iterator, std::string(), ascii::space_type> start_tag;
qi::rule<Iterator, void(std::string), ascii::space_type> end_tag; 
```

Definition of the rules, in the parser 'parse' method.

```
 node = cfg;
    start_tag =  +(char_ -'{') >> '{';
    end_tag = char_('}');

    cfg %=  start_tag[_a = _1]
        >>  *node
        >>  end_tag(_a); 
```

_a and _1 are boost::phoenix variables.

This rules works for the small snipped pasted above, but if I change it to:

```
One{
    Two{
    }
    Three{
    }
} 
```

( two groups in the same scope, instead of group inside of other group ) the parser fails. and I have no idea why.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:38:01.540

为了将来参考，您的代码似乎是 Boost 教程中[mini_xml2.cpp](http://www.boost.org/doc/libs/1_47_0/libs/spirit/example/qi/mini_xml2.cpp)的简化版本（又名“无耻被盗”）。

为了使您的示例正常工作，您必须更改该行：

```
start_tag =  +(char_ -'{') >> '{'; 
```

至

`start_tag = +(char_ -'{' - '}') >> '{';`

现在非常不言自明:) 每当解析器解析 a`start_tag`时，它就会开始寻找`node`s （因为`>> *node`部分）。既然`}`是合法的`start_tag`，它可能被认为是合法的，它不应该被承认。

* * *

顺便说一句，您可能会考虑修复代码中的一些冗余。例如：

在最初的 mini_xml2.cpp 示例中，`end_tag`用作检查您关闭与打开的标签相同的标签的函数（因此签名`void(std::string)`）。你会更好

```
cfg %=  start_tag[_a = _1]
>> *node
>> "}"; 
```

* * *

mini_xml2.cpp 示例中的节点是多态的，因此`boost::variant`与访问者一起使用。在您的示例中，这也是多余的。老实说，这让我想知道这条线

```
node = cfg 
```

在编译期间没有引起任何问题，因为`node`有一个`boost::variant`类型。仅供参考，在原始示例中，这一行是：

```
node %= xml | text; 
```

并且`%=`操作员正确地“猜测”了 RHS 的类型，因为`|`操作员将结果读取为`boost::variant`.

# javascript - 在 Google 电子表格中编写自定义文件格式下载器

> ID：14966539
> 
> 赞同：2
> 
> 时间：2013-02-19T20:15:32.047
> 
> 标签：javascript, google-apps-script, google-sheets, google-apps

我的目标是编写类似于`File > Download as > *`Google 电子表格中当前功能的东西，但我希望它采用自定义格式。

具体来说，我想将财务交易电子表格转换为 QIF 或 OFX 文件，以便导入会计软件。本质上，按下 UI 上的按钮将下载当前打开的电子表格的 QIF/OFX 版本。

到目前为止，我已经尝试了以下方法：

*   发布用于创建自定义文件的服务（通过实现`doGet`）并使用. 如果我直接使用浏览器调用端点，这将有效。`ContentService``TextOutput.downloadAsFile()`
*   尝试通过 window.location 将浏览器重定向到服务的 URL，但这似乎在 App 脚本的上下文中不可用。
*   尝试使用`UrlFetchApp.fetch`让前端（电子表格）让浏览器导航到服务的 URL。这也不起作用（并不令人惊讶）。

那么，这是正确的方法吗？我还能怎么攻击这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:55:15.287

看起来这是你必须做的。

1.  创建一个 UiApp
2.  在该应用程序内添加下载链接。
3.  在电子表格上显示 UiInstance

它有点笨重，但它似乎是最干净的解决方案。

```
function downloadAsWhatever() {
  var app = UiApp.createApplication();
  app.add(app.createAnchor("Download the file now!", "https://script.google.com/macros/s/[...]/exec"))
  SpreadsheetApp.getActiveSpreadsheet().show(app.setWidth(300).setHeight(150));
} 
```

您可以将应用程序的大小设置为您想要的任何大小。我选择将其设置得更小，以便在电子表格屏幕上占用更少的空间。

* * *

> 目前，将用户引导至新页面的最佳方式是创建一个锚点小部件并让他们单击它。我们知道这不是一个理想的用户体验，但它应该足以满足必须的用例。

[来源](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1061)

# mongodb - mongodb seconday failure, stopped writing on primary server

> ID：14966541
> 
> 赞同：0
> 
> 时间：2013-02-19T20:15:35.483
> 
> 标签：mongodb

Working with mongodb replica set and i have configured everything and it was working fine. I didn't have a arbiter for it. Just a primary and secondary for backup purpose. Somehow secondary went down (I didn't see any specific info on log file about secondary went down). The issue here is primary trying t connect secondary and its failing.. and no write operation happening on primary and app broken. I didn't understand how primary stopped writing because secondary went down.

Any Thoughts?

primary log was showing "can't connect to slave server"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:46:38.760

w option:
A number greater than 1:

Guarantees that write operations have propagated successfully to the specified number of replica set members including the primary. **If you set w to a number that is greater than the number of set members that hold data, MongoDB waits for the non-existent members to become available, which means MongoDB blocks indefinitely.**

Please check this article in detail: specifically Internal operation of write concern: [http://docs.mongodb.org/manual/core/write-operations/](http://docs.mongodb.org/manual/core/write-operations/)

# css - 使用导入 URL 会保护我的 CSS 代码吗

> ID：14966550
> 
> 赞同：-2
> 
> 时间：2013-02-19T20:16:03.323
> 
> 标签：css, stylesheet

我一直是用来复制我的网站样式表的人的目标，所以这次我想使用以下内容保护我的 css 文件：-

我将创建`fake.css`并在其中放置以下代码`@import url`

```
@import url("css/real.css"); 
```

现在如果他查看源代码只会看到上面的行并会尝试调用

```
www.my_site.com/css/real.css 
```

但我确实会使用我的托管面板将不允许直接访问文件`.css`

现在我的问题是，它是否足够节省，或者他仍然可以通过使用 firebug 或其他方式获取代码！？~ 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:17:24.797

没有办法对用户隐藏 CSS。

# xml - 非标准名称 - XPath

> ID：14966554
> 
> 赞同：0
> 
> 时间：2013-02-19T20:16:12.810
> 
> 标签：xml, soap, xpath, osb

我正在尝试从 OSB 中的 Web 服务消息树中获取信息。但名称不标准（`<xml-fragment>`）

这是我正在使用的表达式：

```
{$inputRoot_Res/PutResponse/ArrayOfInterfaceObjOutput/xml-fragment/idEntradaCaller/text()} 
```

好吧，似乎没有选择数据。

你知道如何处理这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:55:53.843

好的，看来我找到了答案。我的结构中有一个未定义的命名空间，这就是我没有收集数据的原因。

正如 Tomalak 所说，这似乎是一个有效的名称。所以，命令结束如下：

{$inputRoot_Res/urn:PutResponse/ArrayOfInterfaceObjOutput/xml-fragment/idEntradaCaller/text()}

其中“urn”在命名空间框中定义。

很抱歉给您带来麻烦，感谢 Tomalak 和 Jens Erat 的回答。=)

# ios - How to move uiview on this trajectory

> ID：14966555
> 
> 赞同：0
> 
> 时间：2013-02-19T20:16:13.850
> 
> 标签：ios, cocoa, uiimage, anchor

Can me explane how I can rotate image use anchor point like

[https://www.dropbox.com/s/vh3h5cr1mkdbfh3/ex_image2.JPG](https://www.dropbox.com/s/vh3h5cr1mkdbfh3/ex_image2.JPG)

on .m

```
#import <QuartzCore/QuartzCore.h> 
```

on .h

```
[UIView animateWithDuration:0.7f
                          delay:0
                        options:UIViewAnimationOptionCurveEaseOut
                     animations:^
     {
         self.center = position;
         self.layer.anchorPoint = CGPointMake(-1, 0);
         self.transform = CGAffineTransformMakeRotation(-5);

     }
                     completion:^(BOOL completed){

                     }]; 
```

When I use this code I have something like that

[https://www.dropbox.com/s/v87abux9dqm4y0p/ex_image1.JPG](https://www.dropbox.com/s/v87abux9dqm4y0p/ex_image1.JPG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:04:50.807

当您对图层应用旋转变换时，旋转会围绕锚点进行。

所以先将图层的锚点设置为(0.0, 0.0)。

```
self.layer.anchorPoint = CGPointMake(0.0f, 0.0f); 
```

然后您可以旋转视图，旋转将围绕锚点 (0.0, 0.0) 进行。

```
[UIView animateWithDuration:2.0f animations:^{
    self.transform = CGAffineTransformMakeRotation(3.1415f);
}]; 
```

代码将以您所描绘的方式将视图旋转一整圈。

您可以查看[Apple 的“Core Animation Programming Guide”中标题为“Anchor Points Affect Geometric Manipulations”的部分以](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/coreanimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW17)获取更多信息。

# sql - 如何格式化来自 sql/oracle 数据库的大量数据的用户输入名称？

> ID：14966563
> 
> 赞同：0
> 
> 时间：2013-02-19T20:16:58.457
> 
> 标签：sql, oracle, spell-checking, data-entry

我有一个表，将用户输入的名称存储到文本编辑框中。

此输入框上没有选择或屏蔽

这导致数据库有不一致的数据，例如

```
John Doe
 John Dow
Jonh doe
johh Doe 
```

当名字应该是 John Doe 时。

我想知道如何创建一个查询，该查询可以使用多个用户名将名称解析回它们应该是的（我知道所有拼写错误的名称出现）。

例子：

```
select name from tableName
set
(
if(name = 'John Dow' or name = 'Johh Doe') name = 'John Doe'
)

(
if(name = 'Janee Doe' or name = 'Jaan Doe' name = 'Jane Doe'
) 
```

使用 SQL 和 Oracle Developer

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:19:40.363

好吧，您可以使用`case`：

```
update tableName
    set name = (case when name in ('John Dow', 'Johh Dow') then 'John Doe'
                     when name in ('Janee Doe', 'Jaan doe') then 'Jane Doe'
                     else name
                end) 
```

您可能希望包含一个`where`子句来限制使用相同值更新的行数：

```
 where name in ('John Dow', 'Johh Dow', 'Janee Doe', 'Jaan doe') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:20:19.833

这是一个简单的左外连接；假设您将所有拼写错误都放在一个表格中，并且它在拼写错误本身上是唯一的，即每个拼写错误都与*一个*且只有一个名称相关联。只需确保您首先使用 NVL 取正确的名称

```
select nvl(b.name, a.name) as name
  from tablename a
  join misspellings b
    on a.name = b.misspelling 
```

我不确定我是否会更新表格（如果您正在尝试这样做并不清楚）如果拼写错误实际上是正确的会发生什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:02:02.383

试一试：

```
 with testdata as
(
select 'John     Doe' as name from dual
union
select ' John dow' as name from dual
union
select ' JON DOH ' as name from dual
union
select ' Joe   wtf ' as name from dual
),
transdata as (
select 'JOHN DOW' as badval, 'JOHN DOE' as goodval from dual
union
select 'JON DOH' as badval, 'JOHN DOE' as goodval from dual
)
select 
'"' || td.name || '"' as raw_name,
--initcap(trim(regexp_replace(nvl(tr.goodval, td.name), '(\W){2,}', ' '))) as output
initcap(nvl(tr.goodval, trim(regexp_replace(td.name, '(\W){2,}', ' ')))) as output
from testdata td, transdata tr
where upper(trim(regexp_replace(td.name, '(\W){2,}', ' '))) = tr.badval(+);

RAW_NAME,OUTPUT
" John dow",John Doe
" JON DOH ",John Doe
"John     Doe",John Doe
" Joe   wtf ",Joe Wtf 
```

确保外部连接到您的翻译表。尽管如此，您也可以尝试对输入进行一些基本的清理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T15:05:38.017

忘记连接、initcaps、CASE 等……这些通常不用于搜索文本。使两边都在上面并使用 Like 运算符。复制/粘贴以查看结果：

```
With t AS
(
 SELECT 'John Doe' name FROM dual
  UNION ALL
 SELECT  'John Dow' FROM dual
  UNION ALL 
 SELECT 'Jonh doe' FROM dual
  UNION ALL
 SELECT 'johh Doe' FROM dual
)
SELECT name FROM t WHERE Upper(name) Like Upper('%jo%do%') --or '%john%do%' - up to you
/ 

Output: 

NAME
-------------
John Doe
John Dow
Jonh doe
johh Doe 
```

# jquery - JQuery UI 1.8.23 copy paste issue

> ID：14966564
> 
> 赞同：2
> 
> 时间：2013-02-19T20:17:00.293
> 
> 标签：jquery, jquery-autocomplete

We are using following JQuery code (JSF) to invoke Autocomplete. Everthing seems to work fine when user keys in data but when user copies and pastes Autocomplete will work only in second attempt. I am testing following code in IE 8\. Any inputs are appreciated

```
<script type="text/javascript">
$(function () { 
    $(document).on('keyup.autocomplete','##{resp.workItemResponse.wiResponseId}', function() {
        $('##{resp.workItemResponse.wiResponseId}').autocomplete({
            minLength: 3,
            source: function( request, response){
                $.ajax({
                    type: 'GET',
                    url: "/iaportal/autoCompleteServlet",
                    cache: false,
                    delay: 200,
                    data: {
                        'respId':'#{resp.workItemResponse.wiResponseId}',
                        'type': '#{autoCompleteType}',
                        'term':request.term
                    },
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function(data){
                        response($.map(data.acctNum, function (item) {
                            return {                                
                                label: item.label,
                                value: item.label
                            }
                        }));
                    },
                    error: function(message){
                        alert("error "+message);
                    }
                });
            },
            select: function( event, ui ) {
                var selectedObj = ui.item;
                var text = selectedObj.value;
                $('.autoComplete#{resp.workItemResponse.wiResponseId}').attr('value', text);
                $('.autoComplete#{resp.workItemResponse.wiResponseId}').trigger('change'); 
            }
        });
        $('##{resp.workItemResponse.wiResponseId}').keyup(function(){
            var text = this.value;
            if(text == '' || text.length == 0){
                $('.autoComplete#{resp.workItemResponse.wiResponseId}').attr('value', "");
                $('.autoComplete#{resp.workItemResponse.wiResponseId}').trigger('change');
            }
        });
    }); // on Ends

    var textElem;
    $(document).on('paste','##{resp.workItemResponse.wiResponseId}',function() {
        textElem = this;
        setTimeout(invokeOnPaste , 100); 
    });  

    function invokeOnPaste(){
        var text = $(textElem).val();
        if(text.length == 14){ 
            $('.autoComplete#{resp.workItemResponse.wiResponseId}').attr('value', text);
            $('.autoComplete#{resp.workItemResponse.wiResponseId}').trigger('change'); 
        } else if(text.length != 0){
            $('##{resp.workItemResponse.wiResponseId}').trigger('search','autocomplete');
        } 
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:26:44.317

除了 IE（和启用了配置选项的 FireFox）之外，所有浏览器在 Javascript 中的剪贴板访问都受到限制。您需要绑定到其他东西，例如`keyup`粘贴`Ctrl+V`。据我所知，以跨浏览器兼容的方式绑定到上下文菜单粘贴是不可能的。

# c# - How to save special characters?

> ID：14966566
> 
> 赞同：1
> 
> 时间：2013-02-19T20:17:07.173
> 
> 标签：c#, .net

I'm saving some data in a .txt file so I can load/read it after, but some special characters do not work well.

I took a screenshot how it looks "inside" the string, because it saves some symbols in the file and when I load it doesn't load as it is suppose to.

Image with the characteres and how they are show in the string:

![enter image description here](../Images/76a000c71223267216d881692f6103bd.png)

I'm using the WinAPI code to write and read the file: `WritePrivateProfileString()` and `GetPrivateProfileString()`

```
public static void FileWriteValue(string File, string Section, string Key, string Value)
        {
            WritePrivateProfileString(Section, Key, Value, File);
        }

        public static string FileReadValue(string File, string Section, string Key)
        {
            StringBuilder temp = new StringBuilder(100000);
            int i = GetPrivateProfileString(Section, Key, "", temp, 100000, File);
            return temp.ToString();
        } 
```

Upddated with the Write and Read.

# vim - How to eliminate the delay in message redirection to a file in Vim?

> ID：14966569
> 
> 赞同：3
> 
> 时间：2013-02-19T20:17:14.367
> 
> 标签：vim

I have this line in my vimrc:

```
redir! >/Users/seanmackesey/.vim/.vimmessages 
```

But messages do not show up in this file immediately after they are generated-- when I run `tail -f .vimmessages` in the shell, messages show up slowly and somewhat erratically. I get a big dump of messages to it *sometimes* when I run the `:messages` command, but I can't figure out exactly what the pattern is. Is there a way to simply append each message as it occurs, immediately, to the end of a file?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:42:09.093

全局的问题`:redir`在于它没有嵌套，因此它也会导致映射和使用`:redir`. 而是使用

```
:set verbosefile=/Users/seanmackesey/.vim/.vimmessages 
```

捕获所有消息。因为 Vim 的实现使用缓冲输出，但您仍然会遇到一些分块。

你没有提到你打算在哪里使用这个输出，所以很难给出更好的建议。如果您确实需要立即输出到外部文件，则必须使用`writefile()`或使用嵌入式脚本语言来编写和刷新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T07:43:48.017

这似乎更可能是简单的数据缓冲，而不是任何特定的时间延迟。

我浏览了 Vim 7.3 源代码，看起来好像`redir`是用*fopen*、*puts*和*putc*以及*fclose*（即 stdio）完成的。似乎没有对*fflush*、*setbuf*、*setbuffer*、*setlinebuf*或*setvbuf*进行任何调用，因此重定向将始终使用系统 stdio 提供的默认缓冲（可能是某种方便大小的“块缓冲”）。

您可以定期停止并重新启动重定向以有效刷新数据：

```
redir END | redir! >>~/.vim/.vimmessages 
```

除此之外，似乎没有一种很好的方法可以对`redir`文件执行您想要的操作。

# php - Limiting an encoded string to a specific number of characters

> ID：14966575
> 
> 赞同：0
> 
> 时间：2013-02-19T20:17:28.470
> 
> 标签：php, encryption

I want to encode a string of text in PHP but with a limit (characters) in the result.

E.g I want to encode the string "The quick brown fox jumps over the lazy dog" but I want the encoded result to only have 10 characters.

Is this possible?

# kendo-ui - 使用 Kendo UI Grid，您如何访问过滤和排序的数据？

> ID：14966581
> 
> 赞同：6
> 
> 时间：2013-02-19T20:17:46.507
> 
> 标签：kendo-ui, kendo-grid

我有一个可排序和可过滤的剑道网格。当我导出时，我想导出当前可见的所有数据，而不仅仅是当前页面。

`$("#grid").data("kendoGrid").dataSource` -> 似乎是未排序和未过滤的项目的原始列表。在 Chrome 开发者工具中，`_data`似乎`_pristine`是一样的。

也有，`dataSource.view`但它只是当前页面上可见的 10 个项目。

有没有办法访问排序列表和/或过滤列表？

更新：我在剑道论坛上找到了这个答案，看看它是否有帮助。 [http://www.kendoui.c​​om/forums/framework/data-source/get-filtered-data-from-paged-grid.aspx](http://www.kendoui.com/forums/framework/data-source/get-filtered-data-from-paged-grid.aspx)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-17T18:56:55.160

以下是访问过滤数据的方法：

```
 var dataSource = $("#grid").data("kendoGrid").dataSource;
        var filteredDataSource = new kendo.data.DataSource({
            data: dataSource.data(),
            filter: dataSource.filter()
        });

        filteredDataSource.read();
        var data = filteredDataSource.view(); 
```

然后你可以遍历数据：

```
 for (var i = 0; i < data.length; i++) {
            result += "<tr>";

            result += "<td>";
            result += data[i].SiteId;
            result += "</td>";

            result += "<td>";
            result += data[i].SiteName;
            result += "</td>";

            result += "</tr>";
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-17T02:59:34.987

仅查看内存中的本地数据时，大多数答案都适用于 Kendo Grid。如果您使用远程数据（例如，您的网格绑定到 ODATA 源） - 您将需要遍历所有页面以获取过滤后的数据。

然而，这样做并不像我想象的那么简单。

我想出了以下内容：

```
 var filteredRows = [];

      function getResults() {

        var dataSource = $("#grid").data("kendoGrid").dataSource;
        var filters = dataSource.filter();
        var allData = dataSource.data();
        var query = new kendo.data.Query(allData);
        var data = query.filter(filters).data;            

        var totalRowCount = parseInt(dataSource.total().toString());
        var totalPages = Math.ceil(totalRowCount / dataSource.pageSize());

        PageTraverser(dataSource, 1, totalPages, filters, function () {
                        $('#pResults').text('Got ' + filteredRows.length + ' rows of filtered data.');              
        });            
      }

      function PageTraverser(dataSource, targetPage, totalPages, filters, completionFunction) {

        dataSource.query({
          page: targetPage,
          pageSize: 20,
          filter: filters
        }).then(function () {
          var view = dataSource.view();
          for (var viewItemId = 0; viewItemId < view.length; viewItemId++) {
            var viewItem = view[viewItemId];
            filteredRows.push(viewItem);
          }
          targetPage++;
          if (targetPage <= totalPages) {
            PageTraverser(dataSource, targetPage, totalPages, filters, completionFunction);
          } else {
            completionFunction();
          }
        });
      } 
```

这里的工作示例：http: [//dojo.telerik.com/@JBoman32768/Ucudi](http://dojo.telerik.com/@JBoman32768/Ucudi)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-18T13:30:56.603

这是我们目前的做法，尽管有多种选择：

```
var myData = new kendo.data.Query(dataSource.data()).filter(dataSource.filter()).data; 
```

您只需调用一个新查询并应用网格已应用的当前过滤器，这将返回与网格完全相同的结果。

# java - 将 ArrayList 转换为数组

> ID：14966583
> 
> 赞同：3
> 
> 时间：2013-02-19T20:17:47.707
> 
> 标签：java, arrays, exception, arraylist, null

我在将数组列表转换为 java 中的数组时遇到了一些麻烦。

我有一个名为 Table 的类，它包含一个名为的数组列表`applicants`，它采用字符串。当我使用我的`toArray()`函数时，它似乎没有将数组列表转换为数组。

我知道这一点，因为当我运行 listArray() 函数时，它会给出错误：

`java.lang.NullPointerException`.

这是代码。任何帮助将不胜感激。

```
public class Table {
    public ArrayList<String> applicants;
    public String appArray[];

    public Table() {
        applicants = new ArrayList<String>();
    }

    public void addApplicant(String app) {
        applicants.add(app);
    }

    public void toArray() {
        int x = applicants.size();
        String[] appArray = new String[x];
        appArray = applicants.toArray(appArray);
    }

    public void list() {
        for (int i = 0; i < applicants.size(); i++) {
            System.out.println(applicants.get(i));
        }
    }

    public void listArray() {
        for (int i = appArray.length; i > 0; i--) {
            System.out.println(appArray[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T20:19:51.227

这是因为您`appArray`在此处的方法中隐藏了该字段：

```
 int x = applicants.size();
 String[] appArray = new String[x];
 appArray = applicants.toArray(appArray); 
```

`appArray`当您应该使用`appArray`已在类中声明的字段时，您将创建一个新的局部变量。

你应该做

```
public void toArray()
{
    appArray = applicants.toArray(new String[0]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:37:37.667

```
appArray = new String[applicants.size()];
int index = 0;
for(String app:applicants){
    appArray [index] = app;
    index++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-14T07:53:01.863

因为您的 ArrayList 和 Array 都应该只有字符串，所以您可以这样做。

```
appArray = applicants.toArray(new String[0]); 
```

[javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#toArray%28T%5b%5d%29)中的更多信息。

# jquery - Jquery 序列化在 Ajax 提交上没有产生任何结果

> ID：14966588
> 
> 赞同：0
> 
> 时间：2013-02-19T20:18:42.987
> 
> 标签：jquery

为什么`serialize()`下面什么都不产生？

它不适用`type=file`吗？如果没有，我如何发布我的数据？

```
<form enctype="multipart/form-data" id="fileload" name="fileform"  
                                        action="/bounce" method=POST>
Select JSON File:<br> 
          <input id="fname" type="file" name="fdata" /><br>
          <input type="submit" name="abutton" value="Load" />
        </form>

$(function() {
  $('#fileload[name=fileform]').submit(function(e){
  // or $('form[name=fileform]').submit(function(e){
    e.preventDefault();
    var v= $(this).serialize();
    console.log('V' +  v) ;
    $.post($(this).attr('action'), $(this).serialize(), function(json) {
    alert(json);
    }, 'text');
  return false;
  }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:31:49.193

Jquery 无法读取本地文件，但如果您想获取文件名 + 路径：

```
$(function(){
$('#fileload[name=fileform]').submit(function(e){
// or $('form[name=fileform]').submit(function(e){
    e.preventDefault();
    var v= $(this).serialize()+$('#fname').attr('name')+'='+$('#fname').val();
    console.log('V' +  v) ;
    $.post($(this).attr('action'), v, function(json) {
    alert(json);
    }, 'text');
return false;

}); }); 
```

# actionscript-3 - 调试 Flash SWF 面板

> ID：14966589
> 
> 赞同：0
> 
> 时间：2013-02-19T20:18:46.020
> 
> 标签：actionscript-3, flash, apache-flex, jsfl, flascc

有没有人认为可以使用套接字为 swf 文件创建自定义调试器，能够支持断点并逐步执行代码功能？

我知道那里有 swf 调试器，但我还没有找到可以单步执行代码的调试器...

我正在考虑创建一个，并希望获得一些意见和想法。

我知道 Flash 有一个 System.Pause() 函数可以停止播放器，我可以使用 stackTrace 获取代码行。但我不知道如何执行步骤功能。

也许 FlasCC 怎么样？

或者创建一个服务器调试器，它会在每一步调用暂停函数......但是我怎么知道何时处理新行？

我想创建它的原因是调试 Flash 扩展 SWFpanel，它不会连接到 Flash 远程调试器

欢迎任何想法和想法。

# java - 为什么 `text.charAt(i+1) <= text.length()` 不起作用？

> ID：14966590
> 
> 赞同：0
> 
> 时间：2013-02-19T20:18:48.240
> 
> 标签：java, if-statement

```
case 1: 
if (text1Input.charAt(i+1) <= text1Input.length() &&
    Character.isUpperCase(text1Input.charAt(i+1)))
{
  a += 60;
  b += 100;
}
else
{
  a += 55;
  b += 60;
}
break; 
```

这行代码有意义吗？它无法按我的意愿工作，也无法解决问题。该代码旨在检查字符串中的下一个字符。如果字符存在（意思是还没有到达字符串的末尾），并且字符是大写的，它使用这些坐标。否则，它会使用其他人。我的问题是无论大小写它总是使用后者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T20:21:37.933

您正在将一个角色与一个位置进行比较，这可能不是您想要的，因此您可以使用`i+1`而不是`x.charAt(i+1)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T20:21:09.973

线

```
text1Input.charAt(i+1) <= text1Input.length() 
```

没有意义。更有意义的是

```
i+1 < text1Input.length() 
```

您现在所做的是将`i+1`第 th 个字符的 ASCII 值`text1Input`与其长度进行比较，这是荒谬的。（您还应该使用`i+1 < text1Input.length()`，而不是`<=`。）

# javascript - 如何使用 Javascript 从移动站点链接到完整站点而不重定向回移动站点

> ID：14966593
> 
> 赞同：1
> 
> 时间：2013-02-19T20:19:00.767
> 
> 标签：javascript, redirect, mobile, web

我正在从我的完整网站的所有页面调用此脚本，以将移动用户重定向到移动网站 url。当有人单击链接（来自移动站点）以查看完整站点时，问题就出现了……重定向将用户直接返回到移动站点。

```
<script type="text/javascript">
<!--
if (screen.width <= 700) {
window.location = "http://domain.com";
}
//-->
</script> 
```

如果用户来自移动网站 url，我可以在这个 JS 代码中添加一些不允许重定向发生的东西吗？在我的情况下，我只想使用 javascript，所以如果有人有 JS 解决方案；那将是我正在寻找的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:28:38.367

使用来自 MDN 的 cookie 代码：[https ://developer.mozilla.org/en-US/docs/DOM/document.cookie](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)

点击链接。设置一个cookie

```
docCookies.setItem("isMobile","true"); 
```

当您检查重定向时，请阅读 cookie

```
if (!docCookies.getItem("isMobile")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:05:12.050

这以一种方式，它将记住用户选择 100 天。 [http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

使用我提供的链接中的功能：然后更改此如果；

```
<script type="text/javascript">
<!--
if (screen.width <= 700 && getCookie("mobileRedirected")!="true"){
window.location = "http://domain.com";
}
//-->
</script> 
```

在返回该页面的链接上执行以下操作：

```
<a href="#" onclick="setCookie('mobileRedirected','true',100);document.location='index.html';">LINK</a> 
```

下次用户开始索引时，它会知道它已经点击了离开 mobile.html 的方式

也就是说，如果您希望用户能够在站点之间进行选择，如果没有（仅显示移动设备一次），您可以这样做：

```
 <script type="text/javascript">
    <!--
    if (screen.width <= 700 && getCookie("mobileRedirected")!="true"){
setCookie('mobileRedirected','true',100);
    window.location = "http://domain.com";
    }
    //-->
    </script> 
```

并一起跳过链接代码

上面代码的完整工作示例

```
 <script type="text/javascript">
   function setCookie(c_name,value,exdays){
var exdate=new Date();
exdate.setDate(exdate.getDate() + exdays);
var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
document.cookie=c_name + "=" + c_value;
}
function getCookie(c_name){
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++){
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)    {
    return unescape(y);
    }
  }
}
    if (screen.width <= 700 && getCookie("mobileRedirected")!="true"){
        setCookie('mobileRedirected','true',100);
        window.location = "http://google.com";
    }
    </script> 
```

如果您希望小型浏览器窗口也被重定向，您也可以使用 window.innerWidth。工作示例链接：[http ://allanthya.net/cookietest.php](http://allanthya.net/cookietest.php)

# c++ - 反转散列，发现碰撞（XOR 和和左/右移位）

> ID：14966594
> 
> 赞同：2
> 
> 时间：2013-02-19T20:19:05.960
> 
> 标签：c++, hash, xor, hash-collision, reversing

```
A ^ ( (A >> 2) + (A << 5) + C ) == B 
```

如果 B 是 const 且 C 是变量，如何找到 A？（如果没有解决方案可以更改C）

A 是双字，B 是双字，C 是字节！= 0

*Edit1：在 GalacticJello 的回答之后，我有另一个问题：**有没有办法在没有循环的情况下做到这一点（简化表达式）？***

为什么我需要这个：我正在尝试为

```
unsigned int X(const char* const in) { //strlen(in) is always < 127

  unsigned int result = 0x12345678; //just for an example
  for(int i = 0; in[i] != 0; ++i)
    result ^= (result >> 2) + (result << 5) + in[i];

  return result;
} 
```

目前我有一个生成随机 C 然后搜索 A 的循环。（我使用生成随机值 [for A] 的循环搜索 A 并检查上述表达式是否为真）

*Edit2：**这是我当前用于搜索冲突的代码，我现在正在测试..***

```
#include <stdio.h>
#include <conio.h>

using namespace std;

unsigned int originalHash(const char* const in) {

    unsigned int result = 0x12345678;
    for(int i = 0; in[i] != 0; ++i) {
        result = result ^ ((result >> 2) + (result << 5) + in[i]);
    }

    return result;

}

//A ^ ( (A >> 2) + (A << 5) + C ) == B
bool findSolutions(unsigned int inHash, char* _C, unsigned int* _A) { //Starts searching from *A and *C and writes there values on success.

    unsigned int C = *_C;
    if(C == 0) ++C;

    unsigned int A = *_A;

    for(C; C < 256; ++C) {

        for(A; A < 0xFFFFFFFF; ++A) {

            if((A ^ ( (A >> 2) + (A << 5) + C )) == inHash) {

                *_C = C;
                *_A = A;
                return true;

            }

        }

        A = 0;

    }

    return false;

}

bool findCollisions(unsigned int inHash, char* szOutStr) {

    const unsigned int REQ_HASH = 0x12345678;
    unsigned int prevHash = 0;
    int curChar = 0;

    do {

        printf("Loop Begin:\tI = %i | H = %08x | rH = %08x\n", curChar, inHash, REQ_HASH);

        if(!findSolutions(inHash, &szOutStr[curChar], &prevHash)) {

            printf("Unable to find solutions for %08x\n", inHash);

            if(curChar == 0) return false;
            --curChar;
            continue;

        }

        if(prevHash == REQ_HASH) {

            szOutStr[curChar] = 0;
            return true;

        }

        printf("Found solution:\tC = %02x (%c) | A = %08x\n", szOutStr[curChar], szOutStr[curChar], prevHash);

        char firstSolutionC = szOutStr[curChar];
        unsigned int firstSolutionA = prevHash;

        printf("Trying to find alternative solutions..\n");
        do {

            if(!findSolutions(inHash, &szOutStr[curChar], &prevHash)) {

                printf("Alternative solution not found!\n");
                break;

            }

            printf("Alternative solution found [%s valid]:\tC = %02x (%c) | A = %08x\n", prevHash == REQ_HASH ? "" : "not", szOutStr[curChar], szOutStr[curChar], prevHash);

            if(prevHash == REQ_HASH) {

                szOutStr[curChar] = 0;
                return true;

            }

            ++prevHash;

        } while(true);

        szOutStr[curChar] = firstSolutionC;
        prevHash = firstSolutionA;
        printf("Using first solution:\tC = %02x (%c) | A = %08x\n", szOutStr[curChar], szOutStr[curChar], prevHash);

        ++curChar;
        inHash = prevHash;

    } while(curChar < 127);

    return false;

}

int main(void) {

    char mask[] = "hQh";

    DWORD original = originalHash(mask);

    printf("%s == %08x\n", mask, original);

    char out[128];
    memset(out, 0, sizeof out);
    if(findCollisions(original, out))
        printf("%08x == %s\n", original, out);
    else
        printf("Unable to find collisions\n");

    getch();

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:25:26.807

我只是想回答一下这个问题（对不起 C# 代码，但你应该能够理解要点）：

> A ^ ( (A >> 2) + (A << 5) + C ) == B

```
static List<Tuple<uint, uint>> FindSolutions(uint B)
{
    var solutions = new List<Tuple<uint, uint>>();
    for (uint C = 0; C < uint.MaxValue; C++)
    {
        for (uint A = 0; A < uint.MaxValue; A++)
        {
            uint guess = A ^ ((A >> 2) + (A << 5) + C);
            if (guess == B)
                solutions.Add(new Tuple<uint,uint>(A, C));
        }
    }

    return solutions;
}

var solutions = FindSolutions(0x00000001); 
```

如果 B 是您的常数（在这种情况下为 0x00000001），那么 A 和 C 的前几个解决方案是：

```
A = 0x8b439581, B= 0x00000001, C = 0x00000000
(0x8b439581 ^ ((22d0e560) + (6872B020) + 0)) == 0x00000001
0x8b439581 ^ (0x8b439580) == 0x00000001
0x00000001 == 0x00000001 
```

其他：

```
A = 0x9ba5e354, B= 0x00000001, C = 0x00000000
A = 0x00000000, B= 0x00000001, C = 0x00000000
A = 0x6a7ef9db, B= 0x00000001, C = 0x00000004 
```

... ETC。

编辑：

要查找冲突，您可以简单地通过键空间执行蛮力。

再次对 C# 代码表示抱歉：

```
static uint originalHash(string input)
{
   unt result = 0x12345678;
   for (int i = 0; i < input.Length; i++)            
      result ^= (result >> 2) + (result << 5) + input[i];

   return result;
}

var charset = new string(Enumerable.Range(1, 255).Select(i => (char)i).ToArray());

var hits = new List<string>();
var hashToFind = originalHash("hQh");

for (int wordNum = 1; wordNum < int.MaxValue; wordNum++)
{
    var word = Utils.NumberToString(wordNum, charset);
    var guess = originalHash(word);
    if (guess == hashToFind)
    {
        Console.WriteLine("Found: " + word);
        hits.Add(word);
    }
} 
```

运行上面的代码在一两分钟后给了我以下碰撞：

> cê cë1 côÌ cõí cö c÷¦ cøG cùh dÌ1 dÍ dÒí dÓÌ dÖh d×G dØ¦ dÙ e¬ e1 e²Ì e³í e¶G e·he¸ e¹¦ f1 ff¦ f fh fG fí fÌ gm gn1 gq gr¦ gsG gth gwÌ gxí hO1 hP hQh hRG hS¦ hT hUí hVÌ i/ i01 i1G i2h i3 i4¦ i5Ì i6í

那些翻译得不好，这是字节值：

```
{ 0x63, 0xEA, 0x10, }
{ 0x63, 0xEB, 0x31, }
{ 0x63, 0xF4, 0xCC, }
{ 0x63, 0xF5, 0xED, }
{ 0x63, 0xF6, 0x85, }
{ 0x63, 0xF7, 0xA6, }
{ 0x63, 0xF8, 0x47, }
{ 0x63, 0xF9, 0x68, }
{ 0x64, 0xCC, 0x31, }
{ 0x64, 0xCD, 0x10, }
{ 0x64, 0xD2, 0xED, }
{ 0x64, 0xD3, 0xCC, }
{ 0x64, 0xD6, 0x68, }
{ 0x64, 0xD7, 0x47, }
{ 0x64, 0xD8, 0xA6, }
{ 0x64, 0xD9, 0x85, }
{ 0x65, 0xAC, 0x10, }
{ 0x65, 0xAD, 0x31, }
{ 0x65, 0xB2, 0xCC, }
{ 0x65, 0xB3, 0xED, }
{ 0x65, 0xB6, 0x47, }
{ 0x65, 0xB7, 0x68, }
{ 0x65, 0xB8, 0x85, }
{ 0x65, 0xB9, 0xA6, }
{ 0x66, 0x8D, 0x31, }
{ 0x66, 0x8E, 0x10, }
{ 0x66, 0x91, 0xA6, }
{ 0x66, 0x92, 0x85, }
{ 0x66, 0x93, 0x68, }
{ 0x66, 0x94, 0x47, }
{ 0x66, 0x97, 0xED, }
{ 0x66, 0x98, 0xCC, }
{ 0x67, 0x6D, 0x10, }
{ 0x67, 0x6E, 0x31, }
{ 0x67, 0x71, 0x85, }
{ 0x67, 0x72, 0xA6, }
{ 0x67, 0x73, 0x47, }
{ 0x67, 0x74, 0x68, }
{ 0x67, 0x77, 0xCC, }
{ 0x67, 0x78, 0xED, }
{ 0x68, 0x4F, 0x31, }
{ 0x68, 0x50, 0x10, }
{ 0x68, 0x51, 0x68, }
{ 0x68, 0x52, 0x47, }
{ 0x68, 0x53, 0xA6, }
{ 0x68, 0x54, 0x85, }
{ 0x68, 0x55, 0xED, }
{ 0x68, 0x56, 0xCC, }
{ 0x69, 0x2F, 0x10, }
{ 0x69, 0x30, 0x31, }
{ 0x69, 0x31, 0x47, }
{ 0x69, 0x32, 0x68, }
{ 0x69, 0x33, 0x85, }
{ 0x69, 0x34, 0xA6, }
{ 0x69, 0x35, 0xCC, }
{ 0x69, 0x36, 0xED, } 
```

# ruby-on-rails - 如何在rails 3中使用参数路由新动作？

> ID：14966596
> 
> 赞同：0
> 
> 时间：2013-02-19T20:19:19.940
> 
> 标签：ruby-on-rails, routes, ruby-on-rails-3.2

我有 2 个模型：`User`并且`Post`
`User`有很多`posts`
`Post`属于`User`

然后我创建了一个名为`list`in的新操作`PostsController`，它将用户`id`作为参数来查找并列出某个用户发布的所有帖子。

网址就像`posts/list/:user_id`

如何修改路线以执行此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:27:35.970

在您的应用程序中，转到 config 文件夹，然后打开 routes.rb 并取消注释以下行（如果不存在，则添加它）：

```
 match ':controller(/:action(/:id))(.:format)' 
```

这应该够了吧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:40:49.487

将此行添加到您的路线

```
match 'posts/list/:user_id', :to => 'posts#list' 
```

# xml - 使用模板匹配测试节点是否为空或包含 NULL

> ID：14966598
> 
> 赞同：2
> 
> 时间：2013-02-19T20:19:22.057
> 
> 标签：xml, xslt

编辑到 XML

我试图弄清楚如何使用模板匹配测试节点是否不存在或包含单词 NULL。目前我在匹配的模板中使用 <xsl:choose> 测试。有没有更有效的方法来做这个测试？

在 XML 中，如果 or 节点不存在，或者包含单词 NULL，那么我想完全跳过该节点并打印出一条说明该节点为什么不正确的语句（即“标题不存在”或“内容为 NULL” ”）。

在 XML 中，我的第三个和第四个节点不应该显示任何内容，而是打印一条说明为什么不显示内容的语句。

这是我用来测试的 XML 示例：

```
<?xml version="1.0" encoding="utf-8"?>
<FIGURES>
  <FIGURE>
    <TITLE>Title 1</TITLE>
    <DESC>Description 1</DESC>
    <CONTENT>Content 1</CONTENT>
  </FIGURE>
  <FIGURE>
    <TITLE>Title 2</TITLE>
    <DESC>Description 2</DESC>
    <CONTENT>Content 2</CONTENT>
  </FIGURE>
  <FIGURE>
    <DESC>Description 3</DESC>
    <CONTENT>Content 3</CONTENT>
  </FIGURE>
  <FIGURE>
    <TITLE>Title 4</TITLE>
    <DESC>Description 4</DESC>
    <CONTENT>NULL</CONTENT>
  </FIGURE>     
  <FIGURE>
    <TITLE>Title 5</TITLE>
    <DESC>Description 5</DESC>
    <CONTENT>Content 5</CONTENT>
  </FIGURE>
</FIGURES> 
```

这是我正在使用的 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="utf-8"/>

<xsl:template match="/">
  <div class="container">
   <xsl:apply-templates />
 </div>
</xsl:template>

<xsl:template match="FIGURES">
  <ul class="list">
    <xsl:apply-templates select="FIGURE" mode="titles" />
  </ul>  
  <div class="content">
    <xsl:apply-templates select="FIGURE" mode="content" />
  </div>
</xsl:template>

<xsl:template match="FIGURE" mode="titles">
  <xsl:choose>
    <!-- Check to see if the TITLE field is empty -->
    <xsl:when test="translate(./TITLE,' ', '') = ''">The TITLE node is empty</xsl:when>                      
    <!-- Check to see if the TITLE field is NULL -->
    <xsl:when test="normalize-space(./TITLE) = 'NULL'">The TITLE node is NULL</xsl:when> 
    <!-- Check to see if the CONTENT field is empty -->
    <xsl:when test="translate(./CONTENT,' ', '') = ''">The CONTENT node is empty</xsl:when>
    <!-- Check to see if the CONTENT field is NULL -->
    <xsl:when test="normalize-space(./CONTENT) = 'NULL'">The CONTENT node is NULL</xsl:when>                                            
    <xsl:otherwise>
      <li>
        <a href="#section-{position()}">
          <h3><xsl:value-of select="TITLE" /></h3>
        </a>
        <p><xsl:value-of select="DESC" /></p>
      </li>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

<xsl:template match="FIGURE" mode="content">
  <xsl:choose>
    <!-- Check to see if the TITLE field is empty -->
    <xsl:when test="translate(./TITLE,' ', '') = ''">The TITLE node is empty</xsl:when>                      
    <!-- Check to see if the TITLE field is NULL -->
    <xsl:when test="normalize-space(./TITLE) = 'NULL'">The TITLE node is NULL</xsl:when> 
    <!-- Check to see if the CONTENT field is empty -->
    <xsl:when test="translate(./CONTENT,' ', '') = ''">The CONTENT node is empty</xsl:when>
    <!-- Check to see if the CONTENT field is NULL -->
    <xsl:when test="normalize-space(./CONTENT) = 'NULL'">The CONTENT node is NULL</xsl:when>                                            
    <xsl:otherwise>
      <div id="section-{position()}">
        <p><xsl:value-of select="CONTENT" /></p>
      </div>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template>

</xsl:stylesheet> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:15:08.437

这将基本上产生与您的 XSLT 相同的结果，并避免使用`xsl:choose`. 请试一试：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8"/>

  <xsl:template match="/">
    <div class="container">
      <xsl:apply-templates />
    </div>
  </xsl:template>

  <xsl:template match="FIGURES">
    <ul class="list">
      <xsl:apply-templates select="FIGURE" mode="titles" />
    </ul>
    <div class="content">
      <xsl:apply-templates select="FIGURE" mode="content" />
    </div>
  </xsl:template>

  <xsl:template match="FIGURE" mode="titles">
    <li>
      <a href="#section-{position()}">
        <h3>
          <xsl:value-of select="TITLE" />
        </h3>
      </a>
      <p>
        <xsl:value-of select="DESC" />
      </p>
    </li>
  </xsl:template>

  <xsl:template 
      match="FIGURE[ *[self::TITLE or self::CONTENT]
                      [not(normalize-space(.)) or normalize-space(.) = 'NULL']
                   ]"
      mode="titles">
    <xsl:apply-templates select="TITLE | CONTENT" />
  </xsl:template>

  <xsl:template match="FIGURE" mode="content">
    <div id="section-{position()}">
      <p>
        <xsl:value-of select="CONTENT" />
      </p>
    </div>
  </xsl:template>

  <xsl:template 
      match="FIGURE[ *[self::TITLE or self::CONTENT]
                      [not(normalize-space(.)) or normalize-space(.) = 'NULL']
                   ]"
      mode="content">
    <xsl:apply-templates select="TITLE | CONTENT" />
  </xsl:template>

  <xsl:template match="TITLE | CONTENT" />

  <xsl:template match="*[self::TITLE or self::CONTENT][not(normalize-space(.))]">
    <xsl:value-of select="concat('The ', local-name(), ' node is empty')"/>
  </xsl:template>

  <xsl:template match="*[self::TITLE or self::CONTENT][normalize-space(.) = 'NULL']">
    <xsl:value-of select="concat('The ', local-name(), ' node is NULL')"/>
  </xsl:template>
</xsl:stylesheet>

Please give it a try. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:31:52.850

**这是一个较短的转换，它产生相同的结果，并且不使用任何条件 XSLT 指令**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
     <div class="container">
       <ul class="list">
         <xsl:apply-templates/>
       </ul>
       <div class="content">
           <xsl:apply-templates mode="content"/>
         </div>
     </div>
 </xsl:template>

 <xsl:template match="FIGURE">
   <li>
     <a href="#section-{position()}">
       <xsl:apply-templates select="TITLE"/>
     </a>
     <xsl:apply-templates select="DESC"/>
   </li>
 </xsl:template>

 <xsl:template match="TITLE">
   <h3><xsl:value-of select="."/></h3>
 </xsl:template>

 <xsl:template match="DESC">
   <p><xsl:value-of select="."/></p>
 </xsl:template>

 <xsl:template match="FIGURE[*[. = 'NULL' or not(normalize-space())]]">
  <xsl:apply-templates select="*[. = 'NULL' or not(normalize-space())]"/>
 </xsl:template>

 <xsl:template match="FIGURE/*[. = 'NULL']">
  The <xsl:value-of select="name()"/> node is NULL.
 </xsl:template>
 <xsl:template match="FIGURE/*[not(normalize-space())]">
  The <xsl:value-of select="name()"/> node is empty.
 </xsl:template>

 <xsl:template match="FIGURE[not(*[. = 'NULL' or not(normalize-space())])]" mode="content">
      <div id="section-{position()}">
         <p><xsl:value-of select="CONTENT"/></p>
      </div>
 </xsl:template>
 <xsl:template match="FIGURE" mode="content"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<FIGURES>
    <FIGURE>
        <TITLE>Title 1</TITLE>
        <DESC>Description 1</DESC>
        <CONTENT>Content 1</CONTENT>
    </FIGURE>
    <FIGURE>
        <TITLE>Title 2</TITLE>
        <DESC>Description 2</DESC>
        <CONTENT>Content 2</CONTENT>
    </FIGURE>
    <FIGURE>
        <TITLE></TITLE>
        <DESC>Description 3</DESC>
        <CONTENT>Content 3</CONTENT>
    </FIGURE>
    <FIGURE>
        <TITLE>Title 4</TITLE>
        <DESC>Description 4</DESC>
        <CONTENT>NULL</CONTENT>
    </FIGURE>
    <FIGURE>
        <TITLE>Title 5</TITLE>
        <DESC>Description 5</DESC>
        <CONTENT>Content 5</CONTENT>
    </FIGURE>
</FIGURES> 
```

**与最初提供的转换产生相同的结果：**

```
<div class="container">
   <ul class="list">
      <li>
         <a href="#section-1">
            <h3>Title 1</h3>
         </a>
         <p>Description 1</p>
      </li>
      <li>
         <a href="#section-2">
            <h3>Title 2</h3>
         </a>
         <p>Description 2</p>
      </li>
  The TITLE node is empty.

  The CONTENT node is NULL.
 <li>
         <a href="#section-5">
            <h3>Title 5</h3>
         </a>
         <p>Description 5</p>
      </li>
   </ul>
   <div class="content">
      <div id="section-1">
         <p>Content 1</p>
      </div>
      <div id="section-2">
         <p>Content 2</p>
      </div>
      <div id="section-5">
         <p>Content 5</p>
      </div>
   </div>
</div> 
```

# javascript - 如何通过javascript的正则表达式获取元素内部文本中的数字

> ID：14966604
> 
> 赞同：0
> 
> 时间：2013-02-19T20:19:29.213
> 
> 标签：javascript, html, regex

我想通过 javascript 正则表达式获取 html 内部文本中的数字来替换它们。
例如，在下面的代码中，我想获得 1,2,3,4,5,6,1,2,3,1,2,3，而不是 div 标签内的 444。

```
<body>
  aaaa123aaa456
  <div style="background: #444">aaaa123aaaa</div>
  aaaa123aaa
</body> 
```

什么可能是正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:22:37.523

您最好的选择是使用`innerText`或`textContent`获取没有标签的文本，然后只使用正则表达式`/\d/g`来获取数字。

```
function digitsInText(rootDomNode) {
  var text = rootDomNode.textContent || rootDomNode.innerText;
  return text.match(/\d/g) || [];
} 
```

例如，

```
alert(digitsInText(document.body)); 
```

如果您的 HTML 不在 DOM 中，您可以尝试自己剥离标签：[JavaScript：如何从字符串中剥离 HTML 标签？](https://stackoverflow.com/questions/5002111/javascript-how-to-strip-html-tags-from-string)

* * *

由于您需要进行替换，我仍然会尝试遍历 DOM 并单独对文本节点进行操作，但如果这是不可能的，请尝试

```
var HTML_TOKEN = /(?:[^<\d]|<(?!\/?[a-z]|!--))+|<!--[\s\S]*?-->|<\/?[a-z](?:[^">']|"[^"]*"|'[^']*')*>|(\d+)/gi;

function incrementAllNumbersInHtmlTextNodes(html) {
  return html.replace(HTML_TOKEN, function (all, digits) {
    if ("string" === typeof digits) {
      return "" + (+digits + 1);
    }
    return all; 
  });
} 
```

然后

```
incrementAllNumbersInHtmlTextNodes(
    '<b>123</b>Hello, World!<p>I <3 Ponies</p><div id=123>245</div>') 
```

生产

```
 '<b>124</b>Hello, World!<p>I <4 Ponies</p><div id=123>246</div>' 
```

它会混淆特殊元素（如`<script>`结束）的位置，并且无法识别实体编码的数字，但应该以其他方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:31:35.953

您不一定需要 RegExp 来获取不包括其后代元素的元素的文本内容——事实上，我建议不要这样做，因为 RegExp 匹配 HTML 非常困难——有 DOM 解决方案：

```
function getImmediateText(element){
    var text = '';

    // Text and elements are all DOM nodes. We can grab the lot of immediate descendants and cycle through them.
    for(var i = 0, l = element.childNodes.length, node; i < l, node = element.childNodes[i]; ++i){
    // nodeType 3 is text
        if(node.nodeType === 3){
            text += node.nodeValue;
        }
    }

    return text;
}

var bodyText = getImmediateText(document.getElementsByTagName('body')[0]); 
```

所以这里有一个函数，它只将直接文本内容作为字符串返回。当然，您可以使用 RegExp 将其剥离为数字，如下所示：

```
var numberString = bodyText.match(/\d+/g).join(''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-17T20:54:23.437

只是为了回答我的老问题：
可以通过前瞻来实现。

```
/\d(?=[^<>]*(<|$))/g 
```

替换数字

```
 html.replace(/\d(?=[^<>]*(<|$))/g, function($0) {
        return map[$0]
    }); 
```

答案的来源[https://www.drupal.org/node/619198#comment-5710052](https://www.drupal.org/node/619198#comment-5710052)

# ms-access - 按日期删除数据，其中日期为文本格式 YYYY/MM

> ID：14966612
> 
> 赞同：2
> 
> 时间：2013-02-19T20:19:46.380
> 
> 标签：ms-access, vba

我想在 VBA 中运行删除查询以删除包含大于预先计算的当前月份的计费月份的记录。来自另一个系统的源数据具有文本格式的日期，显示为 (YYYY/MM)。

这是声明：

```
mySQL = "DELETE * FROM [tblBillingData]" _
& "WHERE (((tblBillingData.[Billing Month]) > PreCalcCurrentMonth));"

DoCmd.RunSQL mySQL 
```

所有变量都已正确声明，当我单步执行代码时，我可以看到 PreCalcCurrentMonth，但是当它运行 SQL 语句时，我会看到 PreCalcCurrentMonth 变量的 Enter Parameter 输入框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:31:27.163

如果这`PreCalcCurrentMonth`是一个 Date 变量，请尝试以下操作：

```
mySQL = "DELETE * FROM [tblBillingData]" & _
   "WHERE (((tblBillingData.[Billing Month]) > " & _
    Format(PreCalcCurrentMonth,"\#mm\/dd\/yyyy\#") & _
    "));"

 DoCmd.RunSQL mySQL 
```

`Format(PreCalcCurrentMonth,"\#mm\/dd\/yyyy\#")`确保您的日期转换为美国日期格式#mm/dd/yyyy# 的字符串，无论您的区域设置如何。# 是日期分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:31:58.023

尝试这个：

```
mySQL = "DELETE * FROM [tblBillingData]" _
& "WHERE (((tblBillingData.[Billing Month]) > #" & PreCalcCurrentMonth & "#));" 
```

首先，您需要将您的变量称为字符串之外的变量，否则，Access VBA 会认为它是一个字符串。

其次，您需要用`#`符号包围日期参数。

# objective-c - 尝试覆盖init方法时出错

> ID：14966614
> 
> 赞同：0
> 
> 时间：2013-02-19T20:19:54.700
> 
> 标签：objective-c

我有一个 Square 类，我试图重写一个 init 方法，.m 看起来像这样：

```
@implementation Square

{
    Rectangle *rect;
}

@synthesize side;

-(int) area
{
    return side * side;
}

-(int) peremiter
{
    return side * 4;
}

-(id) init
{
    return [self init];
}

-(Square *) initWithSide:(int)s
{
    self = [super init];

    if (self)
     [self initWithSide:s];

    return self;
}

@end 
```

我得到的错误是在`initWithSide`方法中说：

委托的结果`init`必须立即返回或分配给`self`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:24:55.780

这些行：

```
if (self)
 [self initWithSide:s]; 
```

毫无意义，基本上意味着您将一遍又一遍地调用初始化程序。您应该更改它以做一些有用的事情（例如设置 的值`s`）。附带说明一下，您的无参数`init`方法也是错误的。它应该是：

```
-(id) init {
    return [super init];
} 
```

但是由于其中没有专门的实现，因此您实际上根本不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:46:28.587

删除当前的 init 方法并用这些方法替换它们（不要忘记在接口范围内更新它们）：

```
- (id)init {
    if (self = [super init]) {
        // do whatever you like to to do here
    }
    return self;
}

- (id)initWithSide:(int)s { // but an NSInteger would be more elegant, and the parameter name 's' also would be better to be like 'side'
    if (self = [super init]) {
        [self setSide:s];
    }
    return self;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:27:53.660

这是正确的语法：

```
- (id) initWithSide:(int)s{
   self = [super init];
    if (self){
        //init elements 
    }
    return self;
} 
```

# excel - 用户选择随机 Excel 单元格，单击按钮，宏执行 - Bloomberg DDE

> ID：14966618
> 
> 赞同：1
> 
> 时间：2013-02-19T20:20:11.627
> 
> 标签：excel, bloomberg, dde

我对宏和这个论坛很陌生。我搜索了论坛并没有找到我正在寻找的答案。我正在编写一个宏来启动 Bloomberg DDE，所以当单击一个按钮时，一个终端窗口将出现在前面，并且已经提交了特定的语法。

一般而言，假设 $B$3 = MSFT, $H$2=CSCO, $E$9=GIS

如果用户在电子表格上选择 MSFT，然后单击 GIP30 按钮，我希望将以下内容发送到 BB 终端：

微软 GIP30

因此，除了标识选择了哪个单元的宏之外，可能需要在传输到 BB DDE 之前附加“US”。我从网上收集了一些花絮。

当我硬编码“MSFT US”时让它工作，但需要它是动态的。我注释掉了“动态”代码。

感谢所有帮助。

谢谢。

```
Sub OpenGIP()

Dim ch As Long
ch = DDEInitiate("winblp", "bbk")
'Opens Bloomberg window #2 (Note: <blp-n> - where n is [BB Window instance # - 1])
Call DDEExecute(ch, "<blp-1><home> MSFT US <EQUITY> GIP30 <GO>")
'Call DDEExecute(ch, "<blp-1><home> ActiveCell.Value & ' US' <EQUITY> GIP30 <GO>")
Call DDETerminate(ch)

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:26:44.620

尝试这个

```
Call DDEExecute(ch, "<blp-1><home> " & ActiveCell.value & " US <EQUITY> GIP30 <GO>") 
```

# flash - As2：在循环中创建函数

> ID：14966623
> 
> 赞同：0
> 
> 时间：2013-02-19T20:20:20.990
> 
> 标签：flash, actionscript-2

我遇到了非常简单的代码的问题。

```
for(i=1;i<3;i++){
        _root.otoczenie["z"+i].onPress = function()
        {
            trace(i)
        }
    } 
```

为什么每个 MovieClip（z1 或 z2）都将“1”返回到跟踪，以及如何以其他方式构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:32:47.960

首先，当您按下项目时，这应该跟踪“3”。

问题是您的所有函数都跟踪最后受“for”影响的“i”的值。

您必须将值分配给每个对象，例如：

```
for(var i:Number = 1; i <= 2 ; i++) {
    _root.otoczenie["z"+i].myValue = i;
    _root.otoczenie["z"+i].onPress = function () {
        trace(this.myValue);
    }
} 
```

更好的方法是使用委托并使用通用功能：

```
for(var i:Number = 1; i <= 2 ; i++) {
    _root.otoczenie["z"+i].myValue = i;
    _root.otoczenie["z"+i].onPress = mx.utils.Delegate.create(this,onItemPressed);
}

function onItemPressed() {
        trace(this.myValue);
} 
```

# wordpress - 重力形式通知定制

> ID：14966627
> 
> 赞同：0
> 
> 时间：2013-02-19T20:20:38.560
> 
> 标签：wordpress, forms, email, gravity

我在 wordpress 中建立了一个重力形式。我有大约 20 个文本字段。但是当我提交表单时，我会在电子邮件中看到所有 20 个字段。但是我只想显示电子邮件中具有值的那些字段，如果任何字段中都没有值，那么它不应该出现。任何想法如何实现该功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T23:50:40.760

要发送所有提交的字段，您可以使用通知模板中的占位符 {all_fields} 仅发送那些提交的字段。

{all_fields} 与创建默认管理员通知时使用的占位符相同。

# git - 在 Windows 7 上使用 GIT BASH 的 Groovy 引导错误

> ID：14966631
> 
> 赞同：3
> 
> 时间：2013-02-19T20:20:49.140
> 
> 标签：git, unix, groovy, cygwin

我正在调用一个 git 钩子来预先提交。这会触发对 groovy 脚本的调用，并以允许远程调试挂钩执行的方式执行此操作。像这样：

```
#!/usr/bin/env groovy
groovy -Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,server=y,address=8085,suspend=y "C:\Users\.......hooks\PreCommit.groovy" 
```

当我使用 GIT BASH 触发钩子时，我看到以下错误：

```
/c/Program Files (x86)/Groovy/Groovy-2.1.0/bin/startGroovy: line 96: [: too many arguments org.codehaus......: startup failed: .... expected EOF, found ':' @ line 3 column 35] 
```

当我快速查看 startGroovy 文件时，我看到以下不清楚的代码 - 其中第 96 行是 GROOVY 主页的 if 条件：

```
# For Cygwin, ensure paths are in UNIX format before anything is touched.
if $cygwin ; then
  [ -n "$GROOVY_HOME" ] && GROOVY_HOME=`cygpath --unix "$GROOVY_HOME"`
  [ -n "$JAVACMD" ] && JAVACMD=`cygpath --unix "$JAVACMD"`
  [ -n "$JAVA_HOME" ] && JAVA_HOME=`cygpath --unix "$JAVA_HOME"`
  [ -n "$CP" ] && CP=`cygpath --path --unix "$CP"`
else
  if [ -n "$GROOVY_HOME" -a `expr "$GROOVY_HOME":'\/$'` ] ; then
      GROOVY_HOME=`echo $GROOVY_HOME | sed -e 's/\/$//'`
  fi
fi 
```

这是 groovy 引导程序中的错误吗？我的 Windows 7 让环境变量 GROOVY_HOME 正确指向：C:\program file (x86)\Groovy\Groovy-2.1.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T02:46:48.267

问题出在 Groovy 的脚本中。该脚本没有在所有正确的地方正确引用环境变量 GROOVY_HOME。GROOVY_HOME 表示的路径中的空格，在我的情况下，“程序文件 (x86)”有 2 个空格，被解释为分隔符，并导致路径被解析为超过 1 个参数。要修复它，请将 Windows 环境变量 GROOVY_HOME 的定义更改为使用波浪号版本的路径。编辑您的环境变量 GROOVY_HOME（在 Vista 上，开始/右键单击计算机/属性/高级系统设置/环境变量/用户或系统，我的是系统）并设置为 c:/Progra~2/Groovy/Groovy-2.1。 3\. 当您启动 Git、MinGW 或 CygWin shell 时，您不会有空格，也不会出现任何错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T22:08:29.190

Git Bash 中缺少 cygpath 命令，它只实现了 cgywin 的精简版本。一种解决方案是为 git 使用完整的 cygwin 安装，但它可能类似于使用 unix 样式的目录名称创建自己的 .bashrc：

```
# Check to see what the DOS directories are
echo GROOVY_HOME=$GROOVY_HOME
echo JAVACMD=$JAVACMD
echo JAVA_HOME=$JAVA_HOME
echo CP=$CP

# Add the directories you found to .bashrc in a unix style
cat - >>~.bashrc
export GROOVY_HOME='/c/program file (x86)/Groovy/Groovy-2.1.0'
export JAVACMD="..."
export JAVA_HOME="/c/Program files/Java/jre7/bin/java"
export CP= "..." 
```

请根据需要更改路径。您可以使用 notepad++ 或其他编辑器而不是 cat 来编辑 .bashrc。请记住 cat - 命令在 Bash 中使用 Control-D 终止，而 DOS 复制 con file.txt 使用 Control-Z。通过将这些变量放在 .bashrc 中，它们不会干扰您的 DOS 环境变量。

# c++ - 调试另一个程序员库

> ID：14966633
> 
> 赞同：2
> 
> 时间：2013-02-19T20:20:54.787
> 
> 标签：c++, netbeans

我有一些其他编码器 c++ 库，其中包含源文件、makefile 等。我有兴趣了解这个库。即它做了什么（它的文档记录很差），它是如何做的等等。我的一种方法是将它作为一个库包含在我的代码中。但我不希望这样，因为我想使用 netbeans 调试代码（为了理解代码流）。

有什么方法可以让我调试库以便理解它。

现在，当我只是将其他程序代码复制粘贴到我的 netbeans 项目中时。它给了我makefile问题。有没有别的出路？

其他程序员库也有很多错误。

# php - PHP 正则表达式，只取回部分结果

> ID：14966635
> 
> 赞同：0
> 
> 时间：2013-02-19T20:21:00.480
> 
> 标签：php, regex

**我有以下 PHP 正则表达式：**

```
@<tr[\s\S]*?<a class="b1"[\s\S]*?<em[^>]*>([^<]*)[\s\S]*?stars_small_([0-9].[0-9])@ 
```

**我在这个网站上使用的：**

[游戏间谍](http://xbox360.gamespy.com/index/reviews.html?ordering.attribute=game.lower_catalog_name&ordering.order=asc&constraint.return_all=is_true&constraint.catalog_letter.game=A&default.sort.attribute=game.lower_catalog_name&default.sort.order=asc)

**我得到了这个数据：**

```
[1] => Array
        (
            [0] => AC/DC Live: Rock Band Track Pack
            [1] => Ace Combat 6: Fires of Liberation
            [2] => All-Pro Football 2K8
            [3] => Alone in the Dark
            [4] => Armored Core 4
            [5] => Army of Two
            [6] => Army of Two: The 40th Day
        )

    [2] => Array
        (
            [0] => 3.5
            [1] => 2.5
            [2] => 3.5
            [3] => 3.5
            [4] => 2.5
            [5] => 3.5
            [6] => 3.5
        ) 
```

这就是我正在寻找的，但是我似乎并没有取回所有数据。我应该得到以下带有分数的标题。但由于某种原因，我只得到了其中的一些。

```
AC/DC Live: Rock Band Track Pack     
Ace Combat 6: Fires of Liberation    
Afro Samurai         
Alan Wake    
Aliens vs. Predator  
All-Pro Football 2K8    
Alone in the Dark   
Amped 3     
Armored Core 4  
Army of Two 
Army of Two: The 40th Day   
Assassin's Creed     
Assassin's Creed II  
Assassin's Creed: Brotherhood    
Avatar: The Game 
```

**我在这里测试了我的正则表达式：**

[http://www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)

**使用这个 HTML：**

[http://justpaste.it/20u5](http://justpaste.it/20u5)

任何帮助解释为什么我只取回一些结果将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:43:48.487

将子模式更改为`stars_small_([0-9].[0-9])`，因为某些 url 在标签的属性中`stars_small_([0-9](?:\.[0-9])?)`只有一位数字。`SRC``IMG`

# css - float 没有正确对齐 div 元素

> ID：14966639
> 
> 赞同：0
> 
> 时间：2013-02-19T20:21:12.347
> 
> 标签：css, html, css-float

**HTML：**

```
 <div class="table" style="display:table;width:600px">
      <div style="display:table-row">

         <div style="width:30%;float:left;display:table-cell">Flow ID</div> 
         <div style="width:60%;float:right;display:table-cell">
             <input type="text" name="flowid" size="20" id="flowid"/>
         </div> 
         <div style="width:10%,float:right;display:table-cell">  [Default : 32] </div>
      </div>

      <div style="display:table-row">
          <div style="width:30%;float:left;display:table-cell">Traffic Class</div>
          <div style="width:60%;float:right;display:table-cell">
              <input type="text" name="traffic" size="20" id="traffic"/> 
          </div>          
          <div style="width:10%;float:right;display:table-cell"> [Default : 0] </div>
      </div>
  </div> 
```

**CSS：**

```
div.table {
 font: 81.25%/1 arial,helvetica,sans-serif;
 font-weight:bold;
 background-color:rgb(241,241,241);
 margin: 0 auto;
 width: 50%;
 text-align:center;
 border-width: 1px 1px 1px 1px;
 border-style: solid;
 border-color: rgb(229, 229, 229);
} 
```

我得到的输出是：

![在此处输入图像描述](../Images/b20db75ff237af12d5780685c355c7cf.png)

为什么会出现这种奇怪的行为？

Althoguh 第一行似乎组织正确，但表格单元格元素仍未完全左右对齐。对于第二排，我不知道发生了什么？

我是使用 div 的新手，因为我曾经用表格做所有这些事情，所以如果遗漏了一些琐碎的事情，请原谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:40:47.853

不需要浮点数，并且您在其中一种内联样式中也有错字：

`width:10%,float:right;`应该是`width:10%;float:right;`。

这是它的工作原理：http: [//jsfiddle.net/sQ4Nb/](http://jsfiddle.net/sQ4Nb/)

这里是你应该有你的代码：http: [//jsfiddle.net/cS35y/](http://jsfiddle.net/cS35y/)

这是一个 HTML 表格版本：http: [//jsfiddle.net/53fKu/](http://jsfiddle.net/53fKu/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T20:25:22.770

如果您决定像表格一样显示 div 元素，为什么还要使用它们？你可以尝试这样的事情：[jsfiddle](http://jsfiddle.net/HJ2JA)

```
<ul id="wrapper">
    <li>
        <div style="width:30%;" class="cell">Flow ID</div>
        <div style="width:55%;" class="cell">
            <input type="text" name="flowid" size="20" id="flowid" />
        </div>
        <div style="width:15%;" class="cell">[Default : 32]</div>
    </li>
    <li>
        <div style="width:30%;" class="cell">Traffic Class</div>
        <div style="width:55%;" class="cell">
            <input type="text" name="traffic" size="20" id="traffic" />
        </div>
        <div style="width:15%;" class="cell">[Default : 0]</div>
    </li>
</ul>

#wrapper {
    width: 600px;
    list-style: none;
}
.cell {
    float: left;
} 
```

# php - 闰年的最后一天，第 53 周还是第 1 周？

> ID：14966642
> 
> 赞同：3
> 
> 时间：2013-02-19T20:21:14.887
> 
> 标签：php, date, datetime

我有一个脚本可以处理原始 CSV 数据并生成按一年中的星期分组的报告。
看起来像这样：

```
//timezone is set to Europe/London
$date = new DateTime($raw['order_date']); // example: 12/31/2012

$key = $date->format('Y W'); // 2012 01

$array[$key][] = $raw['product_id']; 
```

在我尝试解析新年前夜生成的数据之前，一切正常，由于某种原因，系统认为 2012 年 12 月 31 日是 2012 年的第 1 周。我不确定它是错误还是功能，但生成的报告肯定是错误的。

传递此问题并将数据按周分组的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T20:29:00.413

试试这个：

```
$key = $date->format('o W'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:27:19.260

我认为星期是在星期四定义的，这意味着如果星期四在 2013 年，那么它被算作当年的一周。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-16T06:18:14.053

```
$w=(int)date('W');

$m=(int)date('n');

$w=$w==1?($m==12?53:1):($w>=51?($m==1?0:$w):$w);

$year = date('Y');

if($w==53)

{

$year=$year+1;

} 
```

过去一年我正确地获得了所有 d 记录，但在 2016 年 4 月第一次选择比我在 2015 年 4 月得到的报告显示任何遗漏或其闰年问题

# r - 使用ggplot facet_grid在不同条件下相同变量的散点图？

> ID：14966643
> 
> 赞同：3
> 
> 时间：2013-02-19T20:21:15.517
> 
> 标签：r, ggplot2

我想将数据框的同一列与具有不同行值的点相关联。例如，在`iris`数据框中，我想制作三个散点图，比较`Petal.Length`的`virginica`、的和的。我希望它看起来就像一个正常或情节。例如，我可以这样做：`versicolor``setosa``virginica``versicolor``setosa``facet_grid``facet_wrap`

`ggplot(iris) + geom_point(aes(x=Petal.Length, y=Petal.Length)) + facet_grid(~Species)`

这不是我想要的，因为它正在绘制`Petal.Length`每个物种对自己的图，但我希望情节看起来像这样，除了我手动编码哪个物种与其他物种进行比较的地方。如何做到这一点`ggplot`？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T08:40:15.963

您的问题似乎是关于比较对属于多个类别的许多个人测量的单个变量。鉴于您使用`iris`数据集的示例，散点图可能不是有用的可视化。

在这里，我提供了几个可用的单变量可视化`ggplot2`。我希望其中之一是有帮助的：

```
library(ggplot2)

plot_1 = ggplot(iris, aes(x=Petal.Length, colour=Species)) +
         geom_density() +
         labs(title="Density plots")

plot_2 = ggplot(iris, aes(x=Petal.Length, fill=Species)) +
         geom_histogram(colour="grey30", binwidth=0.15) +
         facet_grid(Species ~ .) +
         labs(title="Histograms")

plot_3 = ggplot(iris, aes(y=Petal.Length, x=Species)) +
         geom_point(aes(colour=Species),
                    position=position_jitter(width=0.05, height=0.05)) +
         geom_boxplot(fill=NA, outlier.colour=NA) +
         labs(title="Boxplots")

plot_4 = ggplot(iris, aes(y=Petal.Length, x=Species, fill=Species)) +
         geom_dotplot(binaxis="y", stackdir="center", binwidth=0.15) +
         labs(title="Dot plots")

library(gridExtra)
part_1 = arrangeGrob(plot_1, plot_2, heights=c(0.4, 0.6))
part_2 = arrangeGrob(plot_3, plot_4, nrow=2)
parts_12 = arrangeGrob(part_1, part_2, ncol=2, widths=c(0.6, 0.4))
ggsave(file="plots.png", parts_12, height=6, width=10, units="in") 
```

![在此处输入图像描述](../Images/dccba4a35a1e63b27d11b8bc3dd6ce81.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T20:43:44.040

最好先对数据进行分组。我会做这样的事情：

```
# get Petal.Length for each species separately    
df1 <- subset(iris, Species == "virginica", select=c(Petal.Length, Species))
df2 <- subset(iris, Species == "versicolor", select=c(Petal.Length, Species))
df3 <- subset(iris, Species == "setosa", select=c(Petal.Length, Species))

# construct species 1 vs 2, 2  vs 3 and 3 vs 1 data
df <- data.frame(x=c(df1$Petal.Length, df2$Petal.Length, df3$Petal.Length), 
y = c(df2$Petal.Length, df3$Petal.Length, df1$Petal.Length), 
grp = rep(c("virginica.versicolor", "versicolor.setosa", "setosa.virginica"), each=50))
df$grp <- factor(df$grp)

# plot
require(ggplot2)
ggplot(data = df, aes(x = x, y = y)) + geom_point(aes(colour=grp)) + facet_wrap( ~ grp) 
```

这导致：

![在此处输入图像描述](../Images/90ce72567d974e3406294df2e63f9725.png)

# python - 检查python字符串格式？

> ID：14966647
> 
> 赞同：14
> 
> 时间：2013-02-19T20:21:26.713
> 
> 标签：python, string, data-manipulation

我有一堆字符串，但我只想保留这种格式的字符串：

x/x/xxxx xx:xx

检查字符串是否符合这种格式的最简单方法是什么？（假设我想检查它是否有 2 个 / 和一个 ':' ）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-19T20:32:06.950

尝试正则表达式：

```
import re
r = re.compile('.*/.*/.*:.*')
if r.match('x/x/xxxx xx:xx') is not None:
   print 'matches' 
```

您可以调整表达式以满足您的需求

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-19T20:31:50.293

使用[time.strptime](http://docs.python.org/2/library/time.html#time.strptime)从字符串解析到时间结构。如果字符串与它引发的格式不匹配`ValueError`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-19T20:46:39.730

如果您将正则表达式与 match 一起使用，您还必须考虑结尾太长。如果不测试此代码中的长度，则可以在末尾滑动任何非换行符。这是从其他答案修改的代码。

```
import re
r = re.compile('././.{4} .{2}:.{2}')
s = 'x/x/xxxx xx:xx'
if len(s) == 14:
  if r.match(s):
    print 'matches' 
```

# android - 数据传输中断时适配器中的空指针

> ID：14966649
> 
> 赞同：0
> 
> 时间：2013-02-19T20:21:37.420
> 
> 标签：android, null, nullpointerexception, adapter

当用户中断到数据馈送的传输时，我的 Android 应用程序会`null`强制关闭。或者有时如果互联网速度很慢而且似乎停滞不前，我会得到`null`

这是我处理http代码的方式：

```
 HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url_select);

        try {
            httpPost.setEntity(new UrlEncodedFormEntity(param));
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();

            // read content
            is = httpEntity.getContent();

        } catch (Exception e) {

            Log.e("log_tag", "Error in http connection " + e.toString());
        }
        try {
            BufferedReader br = new BufferedReader(
                    new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();
            String line = "";
            while ((line = br.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result = sb.toString();

        } catch (Exception e) {
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        return null;
    } 
```

然后在`onPostExecute`, `AsyncTask`null 在这里返回，如下面的 LogCat 所示：

```
adapter = new ReviewAdapter(getActivity(), r, tf); // Line 1164 
```

我想`r`是什么`null`杀死了它？（`tf`是我传入的TrueType字体）

这是`r`代码：

```
 for (String i : reviews) {
            r[index] = new Review(reviews.get(index),
                    datelist.get(index), userlist.get(index),
                    itemlist.get(index), ratings.get(index),
                    helpfulCount.get(index), chatCounts.get(index),
                    catlist.get(index), titlelist.get(index));
            index++;
        } 
```

这些`ArrayLists`是通过`JSON`Parsing from`PHP`等填充的。

所以我的问题是：我如何普遍处理这个问题？有没有办法避免null？或者我怎样才能优雅地抛出错误而不是强制关闭？

这是Logcat：

```
02-19 12:15:12.012: E/AndroidRuntime(32116): FATAL EXCEPTION: main
02-19 12:15:12.012: E/AndroidRuntime(32116): java.lang.NullPointerException
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.widget.ArrayAdapter.init(ArrayAdapter.java:310)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.widget.ArrayAdapter.<init>(ArrayAdapter.java:128)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at com.---.---.ReviewAdapter.<init>(ReviewAdapter.java:42)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at com.---.---.RateFragmentActivity$ReviewFragment$ReviewTask.onPostExecute(RateFragmentActivity.java:1164)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at com.---.---.RateFragmentActivity$ReviewFragment$ReviewTask.onPostExecute(RateFragmentActivity.java:1)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.os.AsyncTask.finish(AsyncTask.java:631)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.os.Looper.loop(Looper.java:137)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at android.app.ActivityThread.main(ActivityThread.java:5193)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at java.lang.reflect.Method.invokeNative(Native Method)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at java.lang.reflect.Method.invoke(Method.java:511)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
02-19 12:15:12.012: E/AndroidRuntime(32116):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:36:24.520

如果第一个`try`块抛出异常，您可能应该停在那里，不要打扰第二个`try`块，因为`is`它可能不是`httpEntity.getContent();`if throw an exception 的值`httpClient.execute`（在连接不良的情况下它会这样做。

为什么你不能只检查是否`r`是`null`并向用户显示他们的连接丢失的错误？

# javascript - 使用流体基线网格具有不同网格高度的网格布局

> ID：14966654
> 
> 赞同：0
> 
> 时间：2013-02-19T20:21:45.760
> 
> 标签：javascript, css

我正在使用这个模板： http: [//fluidbaselinegrid.com/](http://fluidbaselinegrid.com/)创建流体网格来布局我的个人网站。并非我所有的网格都是高度，有时我会得到错误的位置。 ![截屏](../Images/5e9c197145e3698b04c444ba6090d608.png)[1]。

技能部分应位于博客文章 5 下的左侧，联系人应位于技能旁边。

请在[http://vsrao.com.s3-website-us-east-1.amazonaws.com](http://vsrao.com.s3-website-us-east-1.amazonaws.com)查看我的网站。你应该可以在那里访问 css 和 html。我太长了，无法将其粘贴到这篇文章中。如果这是不礼貌的行为，请告诉我。也让我知道是否有更好的最新流体网格框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:18:44.513

您可以通过在列上通过第 n 个子选择器应用 clear: left 来解决这个问题。使用您的媒体查询，您应该能够模仿 2 或 3 列布局，如下所示：

```
// 2 column layout
@media only screen and (max-width: 767px) {
  .g1:nth-child(2n+1) {
    clear: left;
  }
}

// 3 column layout
@media only screen and (min-width: 768px) {
 .g1:nth-child(3n+1) {
        clear: left;
      }
} 
```

注意：您需要添加一个新的媒体查询（最大宽度：767px），以便清除 2 列布局仅适用于较小的屏幕视图。

# c - 在c中将int64转换为float32

> ID：14966658
> 
> 赞同：0
> 
> 时间：2013-02-19T20:21:52.647
> 
> 标签：c, floating-point, int, type-conversion

我从代表 64 位整数的四个 16 位寄存器中读取嵌入式设备。读取函数在 uint16_t 中读取它们，我想将其转换为浮点数 32。如果我像这样进行转换，我会收到警告左移计数 >= 类型宽度 [默认启用]。

```
uint16_t u1,u2,u3,u4;
u1=readregister();
u2=readregister();
u3=readregister();
u4=readregister();

float num11 = (float) (u1 << 48);       
float num22 = (float) (u2 << 32); 
float num33 = (float) (u3 << 16);   
float num44 = (float) u4;   
float numm= num11+num22+num33+num44;
printf("%f\n", numm); 
```

准确性如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:29:21.533

一种方法是：

```
#include <math.h>

float numm = (float) u4 + ldexpf(u3, 16) + ldexpf(u2, 32) + ldexpf(u1, 48); 
```

这不需要您的嵌入式编译器提供您已经拥有的任何其他整数大小`uint16_t`，它只需要`ldexpf()`.

这将计算一个`float`在移位整数的数学和的一个 ULP 内的 a `u1`，..., `u4`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:23:08.100

这样做：

```
float num11 = (uint64_t) u1 << 48;
/* ... */ 
```

`uint64_t`如果编译器由于转换为而发出警告（C 不需要）`float`，您可以添加额外的强制转换`float`：

```
float num11 = (float) ((uint64_t) u1 << 48); 
```

这将摆脱警告。

出于效率和精度的原因，最好先将 4 转换`uint16_t`为 single `uint64_t`，然后再执行一次从 `uint64_t`to的转换`float`。

# ios - UITableViewCell 自定义字体仅在表格更新后显示

> ID：14966662
> 
> 赞同：2
> 
> 时间：2013-02-19T20:22:07.273
> 
> 标签：ios, objective-c, uitableview

我没有做任何复杂的事情。只是试图在表格单元格上设置字体。如果我在视图控制器出现后重新加载表格数据，或者表格滚动并且单元格自行更新，则字体显示正常。但是如果我只是在第一次加载时设置了 tableview 属性，它就不能正确显示。

这是代码：

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *cellIdentifier = @"listItem";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    cell.textLabel.text = [pickerList objectAtIndex:indexPath.row];

    return cell;
}

-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    cell.backgroundColor = [UIColor AMFDarkBlueColor];
    cell.selectionStyle = UITableViewCellSelectionStyleGray;
    cell.textLabel.textColor = [UIColor AMFRedColor];
    cell.textLabel.font = [UIFont fontWithName:@"MuseoSlab-500" size:cell.textLabel.font.pointSize];
} 
```

就像我说的，如果我调用它，它会`reloadData`起作用`viewDidAppear`。这似乎是一个不必要的步骤，所以我想确保我没有做错什么。

谢谢

*编辑* 无论我设置字体`cellForRowAtIndexPath`还是`willDisplayCell`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:50:24.360

尝试这样做

```
 cell.textLabel.font = [UIFont fontWithName:@"MuseoSlab-500" size:17.0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:25:36.303

将 cell.textLabel.font = ... 更改为单元格启动后的右侧。

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *cellIdentifier = @"listItem";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];

        cell.textLabel.font = [UIFont fontWithName:@"MuseoSlab-500" size:cell.textLabel.font.pointSize];
    }
//Continue cell config
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:49:44.923

这对我来说很好，试一试：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
}

UIFont *myFont = [ UIFont fontWithName: @"Arial" size: 30.0 ];
cell.textLabel.font = myFont;   
[cell.textLabel setText:@"Text"];

return cell;
} 
```

# c# - 当所有内容都设置为小数点后四位时，实体框架以小数点后两位四舍五入

> ID：14966663
> 
> 赞同：5
> 
> 时间：2013-02-19T20:22:10.027
> 
> 标签：c#, entity-framework-4, sql-server-2008-r2

我试图理解为什么实体框架 4 在 EF 模式模型和数据库中都将精度设置为 4 时舍入到小数点后两位。

这是我对十进制字段之一的架构定义：

![SellPrice 指定比例为 19,4](../Images/7daa2d7ade621cb06e6c1020849bd4bf.png)

这是我的数据库定义

```
CREATE TABLE OrderItems(
....
[SellPrice] [decimal](19, 4) NOT NULL,
.... 
```

当我在计算产品的售价后执行插入查询时，我看到有足够的小数

![SellPrice 显示很多小数](../Images/4baded0cd075eeaa2ee4c0df1a5b5347.png)

MiniProfiler 显示我的查询，并显示该值具有小数点

```
DECLARE ...
        @15 Decimal = '100,54347826086956521739130435',
        ...

insert [dbo].[OrderItems](..., [SellPrice], ...)
values (..., @15, ....)
select [OrderItemId]
from [dbo].[OrderItems]
where @@ROWCOUNT > 0 and [OrderItemId] = scope_identity() 
```

但是当我查看 Microsoft Sql Profiler 时，它`SellPrice`是四舍五入的

```
exec sp_executesql N'insert [dbo].[OrderItems](..., [SellPrice], ...)
values (..., @15, ...)',
...,@15=100.54,...' 
```

我很难找到四舍五入的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:32:58.913

猜测一下，我会说您的 SQL 数据类型应该是`money`，而不是**在**`decimal`c `decimal`# 中与SQL 不同。特别是，如果您查看TSQL类型的 MSDN 文档 ( [http://msdn.microsoft.com/en-us/library/ms187746.aspx )；](http://msdn.microsoft.com/en-us/library/ms187746.aspx)**`decimal``decimal`**

 **> 在 Transact-SQL 语句中，带小数点的常量会自动转换为数值数据值，使用所需的最小精度和小数位数。例如，常数 12.345 被转换为精度为 5、小数位数为 3 的数值。
> 
> 从十进制或数字转换为浮点数或实数可能会导致一些精度损失。

没有明确说明这是您的问题的原因，但我可以很好地猜测它是。您可能对数据类型有更多的运气，`money`因为这是最等效的，如果您从现有数据库生成模型，这也是 EF 默认的**

# asp.net - ASP.NET 中的自定义授权作为过滤器还是在控制器的构造函数中？

> ID：14966677
> 
> 赞同：3
> 
> 时间：2013-02-19T20:23:13.417
> 
> 标签：asp.net, asp.net-mvc, authentication, asp.net-web-api, authorization

在我的 ASP.NET Web API 控制器中，我想限制对用户角色的访问。执行此操作的常用方法是扩展 AuthorizeAttribute ( [example](http://leastprivilege.com/2012/06/22/authorization-in-asp-net-web-api/) , [example](https://stackoverflow.com/questions/12211904/asp-net-web-api-authentication-and-validation) )，然后使用我的自定义属性 (例如 [AuthorizeUser]) 在我的控制器上撒上。

另一种方法是在控制器的构造函数中添加一个函数。无论如何都需要构造函数，因为我正在使用依赖注入。

这是一些代码：

```
public class MyController: ApiController
{
    private IUnitOfWork unitOfWork;
    private IAccountUtils accountUtils;

    // Constructor
    public MyController(
        IUnitOfWork unitOfWork, 
        IAccountUtils accountUtils)
    {
        this.unitOfWork = unitOfWork;
        this.accountUtils = accountUtils;

        // Restrict access to 'User' role
        accountUtils.ThrowExceptionIfUserNotInRole(User.Identity, "User");
    }

    // More code
} 
```

因为有无数的教程和示例使用过滤器来授权用户，所以我认为这是最好的方法。但是，当我在调试器中单步执行我的代码时，我发现构造函数方法在过滤器之前被触发。

为了优化代码，如果用户无权访问控制器，尽快中断是有意义的。如果我没记错的话，在构造函数中而不是在过滤器中执行授权应该更有效。我是正确的还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:22:06.473

您的主要关注点似乎是优化您的代码，并且您正确地注意到控制器构造函数在授权过滤器之前运行。但是这两种解决方案之间的性能差异*非常*小，应该不会真正影响您的服务。

虽然从构造函数中抛出可能有效，但它不是最优雅的解决方案，因为它需要您在代码中授权，而不是使用属性以声明方式进行授权。它还迫使您将对象实例化逻辑与不那么干净的授权逻辑混合在一起。

所以我建议只坚持使用授权过滤器。

# c# - 使用循环验证，然后允许用户再次输入

> ID：14966682
> 
> 赞同：0
> 
> 时间：2013-02-19T20:23:36.857
> 
> 标签：c#, wpf, loops, datepicker

我正在尝试在 C# 中验证我的 WPF 程序，以检查用户是否已将日期输入到我的 DatePicker 事件中。如果用户没有输入日期，我希望它让用户在再次运行整个程序之前重新输入数据。如果用户输入的数字小于 1 或大于 10，我也希望它执行相同的操作。但是目前它只是继续执行程序的其余部分，导致它稍后中断。

我的“文本框”事件称为 UserInput，我的 DatePicker 称为“RequestedDate”

我的代码：

```
if (int.TryParse(UserInput.Text, out numberEntered))
{

    while (DateRequested.SelectedDate == null)
    {
        MessageBox.Show("You have not input a valid date");
        Output.Text = "Please try again";

    }

       while (numberEntered < 1 || numberEntered > 10)
    {
        MessageBox.Show("You can only book tickets with values more than one or less than 10");
        Output.Text = "Please try again";
        break;
    }

    Output.Text = "Number of tickets selected: " + UserInput.Text + "Date: " + DateRequested.Text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:30:43.500

您在这里有几个问题：

> 1 - UI 元素不是“事件”，因此不存在 `TextBox Event`.
> 
> 2 - [UI 不是数据](https://stackoverflow.com/questions/14381402/wpf-programming-methodology/14382137#14382137)。因此，您应该在 ViewModel 中抽象您的逻辑并对其进行操作。

发布您的 XAML，我将编辑我的答案，显示实现此功能的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T22:57:42.340

您应该只将您绑定`TextBox.Text`到一个`DateTime`对象，如果输入的数据不正确，这将通过在`TextBox`.

如果这`DateTime`是强制性的，您应该设置一个`ValidationRule`供您`TextBox`验证，则无需将所有这些 UI 逻辑拖到您的模型中。

# php - 如何在 Gearman 工作人员中访问我的 PHP 应用程序公共功能？

> ID：14966687
> 
> 赞同：0
> 
> 时间：2013-02-19T20:23:52.327
> 
> 标签：php, gearman

在我的应用程序中，用户可以一次上传多张照片。

一旦这些被服务器接收到，就会发生以下情况：

*   安排了一个 Gearman 工人作业，该作业处理所有上传的图像，创建各种不同的裁剪尺寸并应用 Lancosz 过滤，然后最终将它们写入磁盘。根据上传照片的数量和分辨率，此过程最多可能需要 10 秒左右。
*   在主 PHP 线程中，数据库会更新以反映上传的图像。

尽管一切正常，但不能保证 Gearman 工作人员在数据库更新时已经完成。这意味着如果用户访问查询数据库以获取这些图像的页面，则他们可能会获得损坏的图像链接。

因此，我需要执行以下操作之一：

1.  将我的数据库更新代码移动到 Gearman 工作器中，以便在图像处理完成后完成。
2.  暂时，在 PHP 主线程中，将完整大小的图像放置在所有位置，将完整大小的图像多次复制到各种不同的目录（“/assets/images/cropped/image.jpg”、“/assets/images/ thumbnail/image.jpg" 等）等待它们在稍后 Gearman 工作人员完成时被较小的裁剪和过滤版本覆盖。

出于显而易见的原因，解决方案 1 是最有意义的，尽管这当然有可能导致用户上传图像和他/她实际上能够在应用程序中查看它们之间的延迟。

因此，这实际上是一个 2-3 个问题：

*   解决方案 1 或 2 是最好的方法，如果是，为什么？有没有更好的方法来管理我没有看到的这种情况？
*   如果我使用解决方案 1，是否有办法管理因更新工作人员中的数据库而导致的潜在延迟？
*   如果我选择使用解决方案 1，我会遇到一个问题，因为我对 PHP 中的面向对象编程比较陌生。如下所述：

如果我确实使用解决方案 1，我需要能够访问我的主应用程序数据库类和 memcached 类的公共函数，以及调用 Gearman 工作者本身的函数类，所有这些都来自 Gearman 工作者。

例如，在我的主应用程序中执行 MySQL PDO 数据库查询，`$query = new Query($sql);`然后绑定值并执行它等。在该文件的顶部`use \App\Query`，我可以访问这些公共函数。在其他情况下，我会从另一个函数中访问一个函数，但在同一个类中使用`self::functionToPerform();`Gearman 工作人员脚本在我的实际应用程序之外，那么我将如何从工作人员内部访问这些函数？

我知道从一个问题中可以提出很多问题，我希望我已经足够清楚地表达了这一点。任何帮助真的将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:21:59.607

How important is real-time upload/update images? Because if time for process images is ~10 sec., user can see notification about this. And as soon as images ready web-page will be updated.

I think workers for images processing must do just this job. You can create workers for DB updates. It's will be two types of workers which can communicate with a message queue (like a RabbitMQ).

And upload process will be looks like this:

*   User uploading his images
*   Image processing worker gets a task and do it
*   Image processing worker sends notify message in queue: 'Images ready!'
*   DB update worker gets this message and do updates
*   DB update worker sends notify message and main process update the page view

Ofcourse, if I right understand a problem...

# java - java:comp/env 未绑定

> ID：14966688
> 
> 赞同：1
> 
> 时间：2013-02-19T20:24:02.507
> 
> 标签：java, tomcat, catalina

我目前在我的 $CATALINA_HOME/lib 目录中有一些库来处理一些系统/数据库身份验证。其中一个文件 foo.jar 包含一个扩展类

```
org.apache.catalina.realm.DataSourceRealm 
```

并用于身份验证。此文件需要访问我存储在 server.xml 中的一些属性但是，当我尝试访问它时出现错误。代码段如下

```
try{
Context ctx = new InitialContext();
Context envCtx = (Context)ctx.lookup("java:comp/env");

String property = (String)envCtx.lookup("property");

} catch(Exception ex) {} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:30:02.133

您还需要在您的应用程序的 context.xml 中具有关联的 ResourceLink。例如，如果您的 webapp 名为 foo，则应该有一个文件`conf/Catalina/localhost/foo.xml`名为

```
<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE Context>

<Context antiJARLocking="true">
    <ResourceLink name="property" 
        type="classname" 
        global="propertyNameInGlobalNamingResources" />  
    ...
</Context> 
```

如果你`META-INF/context.xml`在你的war文件中包含这些链接，tomcat会将它复制到`conf/Catalina/localhost/foo.xml`第一次部署应用程序时（尽管不是在那之后的任何时间，因为你打算在那里进行更改并能够再次部署而不会破坏自定义)

# utf-8 - openSSl - 使用 ASCII 和 UTF-8 字符解析 subjectAltName

> ID：14966690
> 
> 赞同：2
> 
> 时间：2013-02-19T20:24:10.970
> 
> 标签：utf-8, openssl

SubjectAltName 包含 ASCII 和 UTF-8 字符的混合，例如：

6DC3C16E - m(小a带尖)n

我正在使用 X509_NAME_oneline 解析并获取混合转义序列，例如 'm\xC3\xA1n'

是否有一个 openssl 函数可以返回一个完整的 UTF-8 字符串？

谢谢

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:57:07.980

`"m\xC3\xA1n"` *是*一个完整的 UTF-8 字符串。UTF-8 是一种可变长度编码，所有 ASCII 字符（代码点小于 128）都以 ASCII 和 UTF-8 相同的方式编码。例如，字符`m`只是`0x6d`ASCII 和 UTF-8 中的单个字节。

# servicestack - 大摇大摆的服务堆栈通配符路径

> ID：14966693
> 
> 赞同：1
> 
> 时间：2013-02-19T20:24:26.837
> 
> 标签：servicestack, swagger

我正在使用 ServiceStack 并有这样的路线：

```
[Route("/hello/{Name*}")] 
```

所以`/hello/some/parameters`应该处理任何类似的事情。
Swagger 使用以下 url：`/hello/{Name*}`无论我为 Name 参数提供什么值，当我点击“试用按钮”时，我都会收到以下消息：从客户端检索到的潜在危险客户端值 Request.Path (*)。

请注意，我正在使用以下 ApiMember 属性：

`[ApiMember(Name = "Params", DataType = "string", ParameterType = "path" , IsRequired = true)]`

我输入的任何文本仍然被 * 覆盖，并且出现上述错误。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T00:08:40.593

首先，发生错误是因为 Swagger 调用在路径/请求中使用 {Name*} 的默认值。URL 的路径中不允许出现 (*)。通过在 ServiceStack 类中使用正确的属性，您应该能够获得一个文本框以在 Swagger UI 中输入您自己的值。

像下面这样的东西应该让文本框出现。有关示例，请参见[https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/SwaggerHelloWorld](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/SwaggerHelloWorld)。

```
public class Hello {
  [ApiMember(Name=”Name*”, Description = “Name Description”, ParameterType = “path”, DataType = “string”, IsRequired = true)] 
   public string Name {get; set; }
} 
```

# android - 来自 SQLite 的 Android 光标在方法调用时崩溃

> ID：14966694
> 
> 赞同：1
> 
> 时间：2013-02-19T20:24:28.650
> 
> 标签：android, database, sqlite, cursor

晚上好！

我正在尝试从我刚刚在我的 android 项目中创建的 SQLite 数据库中读取数据。我创建数据库并输入数据没有任何问题（我认为）。我查询数据库以获取没有任何运行时投诉的数据，并且我得到了从方法调用返回的游标。但是当我尝试使用光标时应用程序崩溃了。“线程以未捕获的异常退出 (group=0x416b72a0)。

这是我要运行的代码。光标的 toString 工作正常。

```
 TransactionSQLOH helper = new TransactionSQLOH(context, getDbName(yearS, monthS));
    SQLiteDatabase db = helper.getReadableDatabase();
    String[] columns = {"amount", "label", "year", "month", "day", "categoryID", "type", "ID", "time"};
    Cursor cursor = db.query(TransactionSQLOH.TABLE_NAME, columns, null, null, null, null, null);
    System.out.println(db);
    helper.close();
    System.out.println("Transaction_Check3.1");
    if (cursor == null){
        return null;
    }
    System.out.println("Transaction_Check3.2");
    System.out.println(cursor);
    int test = cursor.getCount();
    System.out.println("Transaction_Check3.3");
    Transaction[] result = new Transaction[10]; 
```

我在线上遇到错误

```
int test = cursor.getCount(); 
```

帮助将不胜感激:)

编辑，记录：

```
 02-19 21:08:11.273: I/System.out(21558): Transaction_Check1
   02-19 21:08:11.283: I/System.out(21558): Transaction_Check2
   02-19 21:08:11.283: I/System.out(21558): SQLiteDatabase:                      /data/data/com.SverkerSbrg.Spendo/databases/transactions_201301
   02-19 21:08:11.283: I/System.out(21558): Transaction_Check3
   02-19 21:08:11.288: I/System.out(21558): Transaction_Check3.1
   02-19 21:08:11.288: I/System.out(21558): Transaction_Check3.2
   02-19 21:08:11.288: I/System.out(21558): android.database.sqlite.SQLiteCursor@421107d8
   02-19 21:08:11.288: I/System.out(21558): Transaction_Check3.3
   02-19 21:08:11.288: I/System.out(21558): Transaction_Check4
   02-19 21:08:11.288: D/AndroidRuntime(21558): Shutting down VM
   02-19 21:08:11.288: W/dalvikvm(21558): threadid=1: thread exiting with uncaught exception (group=0x416b72a0)
   02-19 21:08:11.328: E/AndroidRuntime(21558): FATAL EXCEPTION: main
   02-19 21:08:11.328: E/AndroidRuntime(21558): java.lang.IllegalStateException: Could not execute method of the activity
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.view.View$1.onClick(View.java:3704)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.view.View.performClick(View.java:4232)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.view.View$PerformClick.run(View.java:17298)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.os.Handler.handleCallback(Handler.java:615)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.os.Handler.dispatchMessage(Handler.java:92)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.os.Looper.loop(Looper.java:137)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.app.ActivityThread.main(ActivityThread.java:4921)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at java.lang.reflect.Method.invokeNative(Native Method)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at java.lang.reflect.Method.invoke(Method.java:511)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at dalvik.system.NativeStart.main(Native Method)
   02-19 21:08:11.328: E/AndroidRuntime(21558): Caused by: java.lang.reflect.InvocationTargetException
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at java.lang.reflect.Method.invokeNative(Native Method)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at java.lang.reflect.Method.invoke(Method.java:511)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.view.View$1.onClick(View.java:3699)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     ... 11 more
   02-19 21:08:11.328: E/AndroidRuntime(21558): Caused by: java.lang.IllegalStateException: Cannot perform this operation because the connection pool has been closed.
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteConnectionPool.throwIfClosedLocked(SQLiteConnectionPool.java:972)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteConnectionPool.waitForConnection(SQLiteConnectionPool.java:609)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteConnectionPool.acquireConnection(SQLiteConnectionPool.java:349)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteSession.acquireConnection(SQLiteSession.java:894)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteSession.executeForCursorWindow(SQLiteSession.java:834)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:62)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:143)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:196)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:236)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at com.SverkerSbrg.Spendo.Datastructures.Transaction.getMonthTransaciton(Transaction.java:88)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     at com.SverkerSbrg.Spendo.MainActivity.btn2_click(MainActivity.java:43)
   02-19 21:08:11.328: E/AndroidRuntime(21558):     ... 14 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:35:46.083

移动：

```
helper.close(); 
```

之后：

```
int test = cursor.getCount(); 
```

你得到一个`IllegalStateException`例外，因为你试图在`SQLiteOpenHelper`访问数据库的光标已关闭之后使用它。这会导致错误。

# python - 使用 web.py 从模板生成 HTML 时，如何在字符串中保留换行符？

> ID：14966695
> 
> 赞同：0
> 
> 时间：2013-02-19T20:24:43.100
> 
> 标签：python, html, templates, python-2.7, web.py

我正在使用 web.py 使用模板生成 HTML 页面。

HTML 模板是这样的：

```
$def with (scene)

...

<p id="descriptions">
    $scene.descriptions[scene.status]
</p> 
```

我希望它从描述文件中放置的一些字符串包括这样的换行符：

```
example_scene = (
"""Status 1 - Line 1
Status 1 - Line 2
Status 1 - Line 3""",
"""Status 2 - Line 1
Status 2 - Line 2
Status 2 - Line 3""",
) 
```

但是当它生成 HTML 页面时，这些行会像这样一起运行：

> 状态 1 - 第 1 行状态 1 - 第 2 行状态 1 - 第 3 行

而不是这样：

> 状态 1 - 第 1 行
> 
> 状态 1 - 第 2 行
> 
> 状态 1 - 第 3 行

如果我`\n`为 Python 换行符包含 a 则无效，如果我`<br />`为 HTML 换行符包含 a ，则它只包含如下字符：

> 状态 1 - 第 1 行<br />状态 1 - 第 2 行<br />状态 1 - 第 3 行

有什么办法可以保留这些换行符吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:30:52.173

Web.py 正在[转义 HTML](http://webpy.org/docs/0.3/templetor#filtering)。要关闭它，请更改您的模板代码：

```
$:scene.descriptions[scene.status]
 ^-- add this thing 
```

# ruby - IRB - Ruby 1.9.x 哈希语法：{if: true} 不等于 {:if => true}

> ID：14966696
> 
> 赞同：6
> 
> 时间：2013-02-19T20:24:44.987
> 
> 标签：ruby, hash, ruby-1.9, irb, ruby-1.9.3

长话短说，我正在编写一个包含选项参数的方法，如果键 :if 的值评估为 true，它将执行某些操作。当我使用新语法在 IRB 中尝试哈希时，在 IRB 中出现语法错误，提示保持打开状态：

```
1.9.3p374 :010 > {if: true}
1.9.3p374 :011?> 
```

使用旧语法，工作得很好：

```
1.9.3p374 :011 > {:if => true}
 => {:if=>true} 
```

启动语句的所有关键字都表现出相同的行为。例如`def`, `do`, `module`,`case`

其他出现在中间并且`class`工作正常的保留字：`else`,`end`

我的问题是：这是预期的行为、错误还是限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:55:28.073

用任何语言可靠且明确地解析事物是具有挑战性的。当您开始使用保留字时尤其如此。并且`irb`必须超越这一点，并在解析器之上提供一个交互式模型，这更加困难。我个人认为，无论是作为语言的用户还是作为维护者，担心这样的情况并没有太大的价值。在我看来，最好简单地弄清楚什么是有效的，并尽可能避免陷入这些情况。

你可以在普通的 Ruby 中看到一些类似的行为`irb`。例如：

```
puts({if: true})  # no problem, behaves as expected in Ruby 1.9.3.
puts {if: true}   # raises a syntax error in Ruby 1.9.3 
```

要回答您的问题，它是“预期的行为、错误还是限制”，我想说您应该忽略`irb`并将其与普通的 Ruby 进行比较，如果您这样做，它就可以正常工作。这意味着它必须是一个`irb`错误。

但是有可能或值得解决吗？@coreyward 在他的评论中提出了一个很好的观点，即`irb`在大多数情况下遇到`if`. 您必须进一步了解才能确定，但​​您可能无法明确解释所有这样的情况。

我的建议：如果可以的话，完全避免这种结构，如果可以避免的话，不要使用标签的保留字！

这是一个可以用纯 Ruby 运行的文件（例如 MRI）。您应该`{:if=>true}`在输出中看到以确认它有效。

```
{if: true}
foo = {if: true}
# if MRI is working, should be able to execute this file without trouble.
p foo 
```

# string - 让用户在 IPython 中输入命令

> ID：14966699
> 
> 赞同：0
> 
> 时间：2013-02-19T20:25:01.240
> 
> 标签：string, input, command, ipython

我对python相当陌生，这个问题可能是针对具体情况的。我正在使用 IPython 创建物理模拟图。

我遇到的问题是，当我尝试创建一个程序来避免一遍又一遍地重新键入相同的代码时。我试图让用户输入在 IPython 中执行命令，而不必自己输入所有内容。

例如，我正在使用一个名为 pynbody 的程序。我想做的是获取它，所以当我用 ipython 打开我的测试程序时，它会提示用户输入用户想要导入的内容。但是，我只能将它作为一个字符串输入，它不会执行。

获取用户输入所涉及的语法是什么，即 input= raw_input("What would you like to import?")

就像你在 IPython 中输入的命令一样执行，即 import pynbody

如果你创建一个程序，即test.py，它工作正常，并且在其中你有import pynbody。关于从用户输入中使其工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:05:31.210

不确定我完全理解你想要做什么，但你可以试试

`imported_module = __import__(<string>)` 或 `eval('python expression')`查看[http://docs.python.org/2/library/functions.html#eval](http://docs.python.org/2/library/functions.html#eval)

如需更复杂，请查看“ast”模块（[http://docs.python.org/2/library/ast.html](http://docs.python.org/2/library/ast.html)）

但对于初学者来说，我会避免走这条提示用户导入包或使用 raw_input 手动输入表达式的道路。

# django - 使用 gunicorn_django 的 django 入口点挂钩

> ID：14966701
> 
> 赞同：0
> 
> 时间：2013-02-19T20:25:08.843
> 
> 标签：django, startup, gunicorn

我在我的服务器上使用带有 gunicorn 和 nginx 的 Django 1.4.1，其设置类似于[Django-Nginx-Gunicorn](http://senko.net/en/django-nginx-gunicorn/)。

我需要一个连接 Django 的好地方，这样我就可以在启动时初始化信号监听器之类的东西（因此它适用于所有管理命令和服务器启动）。

我知道很多人使用 urls.py 或中间件 hack（[在哪里放置 Django 启动代码？](https://stackoverflow.com/questions/2781383/where-to-put-django-startup-code)），但是当我运行时这些似乎没有被调用`python manage.py shell`。并且在某个时候，启动信号将可用，但我不想分叉 Django 来包含它，除非绝对必要。

[我真的很喜欢Entry Point Hook Django Projects](http://eldarion.com/blog/2013/02/14/entry-point-hook-django-projects/)的启动脚本技术，它在使用`python manage.py runserver`或任何其他管理命令时都能正常工作。但是，gunicorn 在没有调用管理命令的情况下启动 Django，我不知道在哪里修改我的 gunicorn 启动脚本以运行 startup.py，如 WSGI.py 示例所示。有什么解决办法吗？

# php - 表单验证，参数传递和页面重定向问题

> ID：14966705
> 
> 赞同：1
> 
> 时间：2013-02-19T20:25:23.383
> 
> 标签：php, jquery, ajax, validation

所以我用 PHP 和 jQuery 创建了这个表单验证器。PHP 代码将检查表单，然后返回一个包含错误字段的数组。示例：{"email":1,"password":1}

但是现在我担心是否没有发现错误。这里的问题是我在代码末尾包含了“return false”以防止页面重定向。我读过这是不好的代码实践，但没有找到另一种按预期工作的方式。

第二个问题是如何将 o-array 传递给 $('input').each 函数。现在它会说所有表格都是有效的，因为没有通过。如果我使用 $.post 而不是 $.ajax 这个范围问题由于某种原因不会出现。

jQuery：

```
$(function() {

    $('#register').submit(function() {
        var url = $(this).attr('action');
        var data = $(this).serialize();

        $.ajax({
            type: 'GET',
            url: url,
            data: data,
            success: function(o) {
                console.log(o);
                $('input').each(function() {
                    var msgId = o[$(this).attr('name')];
                    console.log(o[$(this).attr('name')]);

                    if (msgId > 0) {
                        $('#listError').css('visibility', 'visible');
                        $('#listError').append('<li>' + $(this).nextAll('span.msg').eq(msgId - 1).text() + '</li>');
                        $(this).addClass('invalid');
                    } else if (msgId != 0) {
                        $(this).addClass('valid');
                    }
                    $('#listError').append('</ul>');
                })
            }
        }, 'json');

        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:56:31.563

拳头，你为什么要提交表单，而你真的不想提交？！改为使用按钮并从其单击处理程序发出 AJAX 请求。

```
$('#registerButton').click(function() {
    var form = $('#register')

    var data = form.serialize();

    $.ajax(...);
}); 
```

“第二个问题是如何将 o 数组传递到 $('input').each 中”

这里有什么问题？如果您有一个`each()`内部成功回调，则可以在 each() 中使用`data`传递给回调（或在您的情况下）的参数。`o`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T20:38:28.547

尝试这个

```
$(function() {

    $('#submit_button_id').click(function() {
        var url = $(this).attr('action');
        var data = $(this).serialize();
        var ret = true;
        $.ajax({
            type: 'GET',
            url: url,
            async: false,
            data: data,
            success: function(o) {
                console.log(o);
                $('input').each(function() {
                    var msgId = o[$(this).attr('name')];
                    console.log(o[$(this).attr('name')]);

                    if (msgId > 0) 
                        ret = false;
                        $('#listError').css('visibility', 'visible');
                        $('#listError').append('<li>' + $(this).nextAll('span.msg').eq(msgId - 1).text() + '</li>');
                        $(this).addClass('invalid');
                    } else if (msgId != 0) {
                        $(this).addClass('valid');
                    }
                    $('#listError').append('</ul>');
                })
            }
        }, 'json');

        if(ret==true){
            $('#register').submit();
        }
    });

}); 
```

# regex - 如何删除csv文件中字符序列后的空格？

> ID：14966708
> 
> 赞同：0
> 
> 时间：2013-02-19T20:25:44.200
> 
> 标签：regex, csv, whitespace

谁能指出我可以在哪里编写脚本来删除 csv 文件中的空格，但是我只想在特定的字符序列之后删除空格，所以我希望需要正则表达式

```
fName, lName, age, address 1 address 2, <example>   <tag>  </tag>  </example>
fName, lName, age, address 1 address 2, <example>   <tag>  </tag>  </example>
fName, lName, age, address 1 address 2, <example>   <tag>  </tag>  </example>

EDIT:
Desired outcome: 

fName, lName, age, address 1 address 2, <example><tag></tag></example>
fName, lName, age, address 1 address 2, <example><tag></tag></example>
fName, lName, age, address 1 address 2, <example><tag></tag></example> 
```

所以在上面的例子中，我想删除标签中括号前后的空格，但在其他值中保留空格。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:27:44.007

在 perl 中：

```
s/\s+</</g;
s/>\s+/>/g; 
```

将删除之前的前导空格`<`和之后的尾随空格`>`。

另外，根据您的更新；如果你只想删除之间的空格`>`，`<`你可以简单地做`s/>\s+</></g;`

# c++ - 在 C++ 中解析日期字符串

> ID：14966710
> 
> 赞同：0
> 
> 时间：2013-02-19T20:25:50.360
> 
> 标签：c++, string, parsing, date

我儿子正在学习 C++，他的一个练习是让用户在 DD/MM/YYY 中输入日期，然后将其输出到月日、年

```
So: 19/02/2013
Output: February 19, 2013. 
```

我试图帮助他理解各种方式，但现在我自己也搞糊涂了。

`getline()` `std::string::substr()` `std::string::find()` `std::string::find_first_of()` `std::string::find_last_of()`

我无法用这些完全正确的方式弄清楚。

我目前的解析尝试是：

```
#include <iostream>
#include <string>

using namespace std;

int main (void)
{
    string date;
    string line;

    cout << "Enter a date in dd/mm/yyyy format: " << endl;
    std::getline (std::cin,date);

    while (getline(date, line))
    {
        string day, month, year;
        istringstream liness( line );
        getline( liness, day, '/' );
        getline( liness, month,  '/' );
        getline( liness, year,   '/' );

        cout << "Date pieces are: " << day << " " << month << " " << year << endl;
    }
} 
```

但我收到如下错误：

```
`g++ 3_12.cpp -o 3_12`
`3_12.cpp: In function ‘int main()’:`
`3_12.cpp:16: error: cannot convert ‘std::string’ to ‘char**’ for argument ‘1’ to ‘ssize_t getline(char**, size_t*, FILE*)’`
`3_12.cpp:18: error: variable ‘std::istringstream liness’ has initializer but incomplete type` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:38:37.943

```
int day, month, year;
char t;
std::cin >> day >> t >> month >> t >> year; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:48:33.797

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:29:36.150

您错过了[`std`正则表达式库](http://en.cppreference.com/w/cpp/regex)！我认为这是最安全、最有效的方法。

回到主题，我*认为*既然`getline`是一个`extern "C"`函数，你不能使用 a 来重载它`using namespace std`（顺便说一句应该禁止）。您应该尝试`std`在所有`getline`呼叫之前添加。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T20:37:54.857

对于`std::istringstream`，您需要：

```
#include <sstream> 
```

PS 不要使用`using namespace std;`. 这是一个坏习惯，最终会给你带来麻烦。

# php - 配置 PHP 的“--with-mysql=DIR”选项的正确路径是什么

> ID：14966716
> 
> 赞同：0
> 
> 时间：2013-02-19T20:26:26.007
> 
> 标签：php, mysql, compilation

我正在尝试使用 MySQL 扩展从源代码编译 PHP 作为共享库。提供的说明`./configure --help`说：

```
--with-mysql=DIR      Include MySQL support.  DIR is the MySQL base directory. 
```

但是，我不知道 MySQL 基目录是什么意思！这是mysql客户端可执行文件所在的目录吗？（例如在我的机器/usr/bin 上）。或者它们是指共享库（即libmysqlclient.so 和libmysqlclient_r.so）的位置（例如在我的机器/usr/lib 上）？还是别的地方？我已经尝试了几个位置，但是当我尝试使用 php 的编译版本时，我仍然收到如下错误：

```
Call to undefined function mysql_connect() 
```

请帮忙！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:36:14.777

正如 ./configure --help 所说，“DIR 是 MySQL 的**基本**目录。

在我的情况下，这将是安装 MySQL 的目录：/usr/local/mysql

你可以试试：

```
mysqld --verbose --help 
```

并寻找“basedir”配置值

# c - 类似du -a的C函数？

> ID：14966718
> 
> 赞同：0
> 
> 时间：2013-02-19T20:26:28.997
> 
> 标签：c, bash

有没有一种方法可以编写一个 C 函数来为我提供目录树中每个文件的文件大小？（类似于 du -a 的输出）？

我在获取任何一种文件大小时都没有问题，但是在通过主目录中的目录递归时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:10:34.187

> Is there a way that I can write a C function that gives me the file size for each file in a directory tree?

Yes, there is. You can use the `<dirent.h>` API to traverse a directory:

```
#include <stdio.h>
#include <stdlib.h>
#include <limits.h>
#include <dirent.h>
#include <sys/stat.h>

void recursive_dump(DIR *dir, const char *base)
{
    struct dirent *ent;
    for (ent = readdir(dir); ent != NULL; ent = readdir(dir)) {
        if (ent->d_name[0] == '.') {
            continue;
        }

        char fname[PATH_MAX];
        snprintf(fname, sizeof(fname), "%s/%s", base, ent->d_name);

        struct stat st;
        stat(fname, &st);

        if (S_ISREG(st.st_mode)) {
            printf("Size of %s is %llu\n", fname, st.st_size);
        } else {
            DIR *ch = opendir(fname);
            if (ch != NULL) {
                recursive_dump(ch, fname);
                closedir(ch);
            }
        }
    }
}

int main(int argc, char *argv[])
{
    DIR *dir = opendir(argv[1]);
    recursive_dump(dir, argv[1]);
    closedir(dir);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:27:57.267

是的。您需要使用 opendir 和 stat。参见“man 3 opendir”和“man 2 stat”。简而言之：

```
#include <dirent.h>
#include <sys/stat.h>
// etc...

void the_du_c_function() {
   struct dirent direntBuf;
   struct dirent* dirEntry = 0;
   const char* theDir = ".";
   DIR* dir = opendir(theDir);
   while (readdir_r(dir,&direntBuf,dirEntry) && dirEntry) {
      struct stat filestat;
      char filename[1024];
      snprintf(filename,sizeof(filename),"%s/%s",theDir,dirEntry.d_name);
      stat(filename,&filestat);
      fprintf(stdout,"%s - %u bytes\n",filename,filestat.st_size);
   }
} 
```

我刚刚输入了那个代码段。我没有编译它，但这就是它的要点。

# google-chrome - 离开应用程序页面时如何记录chrome应用程序？

> ID：14966719
> 
> 赞同：2
> 
> 时间：2013-02-19T20:26:32.383
> 
> 标签：google-chrome, google-chrome-extension

我想记录一个 chrome 应用程序的活动，这是一个新的标签替换。单击链接将使应用程序在当前窗口中加载新页面。如何记录此类活动，console.log 似乎没有做任何事情。我是新手，请帮忙。谷歌开发页面不是很广泛:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:40:11.133

您可以`console.log()`从后台页面使用并处理来自此代码的每个页面的加载：

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab){
    if(changeInfo['status']  == 'complete'){
        console.log(tabId, changeInfo['url'], tab['url']);
    }
}); 
```

# joomla - Joomla！我刚刚创建的新页面的链接是什么？

> ID：14966723
> 
> 赞同：1
> 
> 时间：2013-02-19T20:26:47.943
> 
> 标签：joomla, content-management-system

我的任务是更新 Joomla 网站。我已经使用现有页面有一段时间了，但现在我不得不创建一个新页面。

我刚刚使用 Joomla 创建了一个新页面。**但我找不到该页面的 URL 是什么。此外，启用了漂亮的网址。但我不知道如何为我刚刚创建的页面创建一个漂亮的 url。**

我什至尝试`/index.php?Itemid=`在 url 中添加 id 并且不起作用。

似乎这样的事情是不言自明的，但我一直在寻找选项和菜单，并在谷歌上搜索答案，但我在任何地方都找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:34:10.110

据我所知，您需要将文章附加到类别才能查看。

您可以将文章分配给一个类别。之后打开该类别中的一篇文章，并将 url 中最后一个“/”之后的文本替换为您文章的别名。

您还可以将文章分配给链接到菜单项的类别。这样您就可以在菜单中看到文章链接。

您可以稍后从该类别中删除该文章。

# jquery - 检查所有/取消选中所有复选框js

> ID：14966733
> 
> 赞同：0
> 
> 时间：2013-02-19T20:27:29.443
> 
> 标签：jquery, checkbox

我有一个小问题，我真的不知道如何解决它，如果我选择了所有复选框，它将显示“取消全选”但如果我取消选择一两个我希望我的“全选”再次出现，我的问题是如果我选中每个复选框并且我开始手动取消选中它假设再次激活全选，但是如果我按下全选它将取消选中所有内容而不是全选。

这是我的 HTML 代码的一部分：

```
<input type="button" class="btn-primary btn-mini" id="check1" value="Check All" /> 
<input type="hidden" id="isChkd" value="true" />                                                                      
<input type="checkbox" name="" value="" class="cb1-element"> 751        
<input type="checkbox" name="" value="" class="cb1-element"> 752                                                                  
<input type="checkbox" name="" value="" class="cb1-element"> 753                                                                  
<input type="checkbox" name="" value="" class="cb1-element"> 754 
```

我的 JS：

```
$('#check1').toggle(function(){
    $('.cb1-element').attr('checked','checked');
    $(this).val('Uncheck All');
    $('#isChkd').val(true);
},function(){
    $('.cb1-element').removeAttr('checked');
    $(this).val('Check All');     
    $('#isChkd').val(false);
})

$('.cb1-element').change(function(){
    if($('#isChkd').val() == false){
        $('#check1').val('Uncheck All');
        $('#isChkd').val(true);
    }else{
        $('#check1').val('Check All');
        $('#isChkd').val(false);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:56:32.630

```
$('#check1').click(function(){
    if($('#isChkd').val() == 'true'){
        $('.cb1-element').attr('checked','checked');
        $(this).val('Uncheck All');
        $('#isChkd').val('false');
    }
    else{
        $('.cb1-element').removeAttr('checked');
        $(this).val('Check All');     
        $('#isChkd').val('true');
    }
});

$('.cb1-element').change(function(){
    var all = $('input.cb1-element').length;
    var checked = $('input.cb1-element:checked').length;
    if(all == checked){
        $('#check1').val('Uncheck All');
        $('#isChkd').val('false');
    }else{
        $('#check1').val('Check All');
        $('#isChkd').val('true');
    }
}); 
```

在这里工作 jsFiddle [http://jsfiddle.net/C9Tw2/18/](http://jsfiddle.net/C9Tw2/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:33:27.520

我认为`$('#isChkd').val()`是返回一个字符串，所以比较`== false`总是失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:48:46.563

由于您使用隐藏的输入标签作为标志，我也会在您的点击功能中使用它

```
$('#check1').click(function(){
    if($('#isChkd').val() == "false"){
        $('.cb1-element').prop('checked', true);
        $(this).val('Uncheck All');
        $('#isChkd').val(true);
    } else if($('#isChkd').val() == "true"){
        $('.cb1-element').prop('checked', false);
        $(this).val('Check All');     
        $('#isChkd').val(false);
    }
}); 
```

这样，您就没有必须单击才能使其工作的切换功能。

我还在您的更改函数中添加了另一个 if 语句，以检测所有 4 个复选框何时被选中，它会将其更改为“取消选中所有”并将您的标志更改为“真”。

```
$('.cb1-element').change(function(){
    if($('#isChkd').val() == false){
        $('#check1').val('Uncheck All');
        $('#isChkd').val(true);
    }else if($(':checked').length == 4){
        $('#check1').val('Uncheck All');
        $('#isChkd').val(true);    
    }else{
        $('#check1').val('Check All');
        $('#isChkd').val(false);
    }
}); 
```

您可以在 jsfiddle 中看到它在这里工作：http: [//jsfiddle.net/TWMAu/](http://jsfiddle.net/TWMAu/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T20:50:34.253

有几点需要考虑：

1) 要设置/清除`checked`属性，请使用`.prop('checked', true)`或`.prop('checked', false)`。它是在 jQuery 中处理属性的更新和更好的方法。

2）您可以使用 2 个按钮来切换可见性（或真正显示），而不是使用隐藏输入来跟踪您的复选框是否需要设置或清除。这样，您不必根据复选框状态对按钮进行特殊处理。

3) Toggle 不是状态更改处理程序。它只是切换元素的可见性。相反，结合注释 #2、use`.on('click', function() {})`或 just `.click()`。

4）你真的有3个状态：全开，全关，其他组合。您需要决定如何处理第三个状态。在这种情况下，您甚至可以同时显示“全选”和“取消全选”。

HTML：

```
<input type="button" class="btn-primary btn-mini" id="check1" value="Check All"/>
<input type="button" class="btn-primary btn-mini" id="uncheck1" value="Uncheck All"/>
<input type="checkbox" name="" value="" class="cb1-element">751
... 
```

JS：

```
$('#check1').on('click', function () {
    $('.cb1-element').prop('checked', true);
    $('#check1, #uncheck1').toggle();
});

$('#uncheck1').on('click', function () {
    $('.cb1-element').prop('checked', false);
    $('#check1, #uncheck1').toggle();
});

$('.cb1-element').change(function () {
    var num = $('.cb1-element').length;

    if ($('.cb1-element:checked').length == num) {
        $('#check1').hide();
        $('#uncheck1').show();
    } else {
        $('#uncheck1').hide();
        $('#check1').show();
    }
}); 
```

演示：http: [//jsfiddle.net/jtbowden/tfwX9/](http://jsfiddle.net/jtbowden/tfwX9/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T21:09:44.390

HTML

```
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />
<input type="checkbox" />
<button>Check All</button> 
```

JS

```
$(':checkbox').click(function () {
    ex()
});
$('button').click(function () {
    ex(1)
});
var ex = function (btn) {
    if ($(':checkbox').length == $(':checkbox:checked').length) { //All are checked
        if (btn == 1) { //If button is clicked
            $(':checkbox').attr('checked', false);//Uncheck All
            $('button').html('Check All');
        } else { //If button is not clicked i.e. the last unselected checkbox was clicked
            $('button').html('Uncheck All');
        }
    } else if (btn == 1) { // BUtton is clicked
        $(':checkbox').attr('checked', true);//Check All
        $('button').html('Uncheck All');
    } else {
        $('button').html('Check All'); // Reset text to default
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T10:06:17.830

试试这个，

```
<input type="checkbox" id="check1" onclick="$('input[type=checkbox][class=cb1-element]').attr('checked',this.checked)"> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-20T07:10:29.673

选中所有复选框

```
$("input:checkbox").attr("checked", true); 
```

取消选中所有复选框

```
$("input:checkbox").attr("checked", false); 
```

使用类检查所有复选框

```
$(".class_name:checkbox").attr("checked", true); 
```

使用类取消选中所有复选框

```
$(".class_name:checkbox").attr("checked", false); 
```

# joomla - Joomla 的 Jfbconnect 插件

> ID：14966743
> 
> 赞同：0
> 
> 时间：2013-02-19T20:27:50.487
> 
> 标签：joomla, joomla2.5

我正在使用 Joomla 的 Jfbconnect 插件。在 Joomla 的 Jfbconnect 插件中，我如何以及在何处找到 CallBack Url 或生成它的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:54:28.220

你可以在这个[链接上看到](http://www.sourcecoast.com/jfbconnect/docs/configuration-guide/enable-plugins)

在“Facebook 应用程序”标题下，您可以在屏幕截图中看到“站点 URL”字段。

也许那是回调网址。

# string - 如何通过 sed 解析 html - 提取由两个字符串分隔的两个字符串 - 在不同的行上，按顺序

> ID：14966745
> 
> 赞同：0
> 
> 时间：2013-02-19T20:27:58.710
> 
> 标签：string, bash, sed, extract

我有一个 bash 脚本：

```
v1='value="'
v2='" type'

do_parse_html_file() {
   sed -n "s/.*${v1}//;s/${v2}.*//p" "${_SCRIPT_PATH}/IBlockListLists.html"|egrep '^http' >${_tmp_file}
} 
```

...仅从 html 文件中提取 URL。我想输出：

某名网址
某名网址

--- 输入 html 文件的示例如下：

```
</tr>
<tr class="alt01">
<td><b><a href="http://www.iblocklist.com/list.php?list=bcoepfyewziejvcqyhqo">iana-reserved</a></b></td>
<td>Bluetack</td>
<td><img style="border:0;" src="I-BlockList%20%7C%20Lists_files/star_4.png" alt="" height="15" width="75"></td>
<td><input style="width:200px; outline:none; border-style:solid; border-width:1px; border-color:#ccc;" id="bcoepfyewziejvcqyhqo" readonly="readonly" onclick="select_text('bcoepfyewziejvcqyhqo');" value="http://list.iblocklist.com/?list=bcoepfyewziejvcqyhqo&amp;fileformat=p2p&amp;archiveformat=gz" type="text"></td>
</tr>
<tr class="alt02">
<td><b><a href="http://www.iblocklist.com/list.php?list=cslpybexmxyuacbyuvib">iana-private</a></b></td>
<td>Bluetack</td>
<td><img style="border:0;" src="I-BlockList%20%7C%20Lists_files/star_4.png" alt="" height="15" width="75"></td>
<td><input style="width:200px; outline:none; border-style:solid; border-width:1px; border-color:#ccc;" id="cslpybexmxyuacbyuvib" readonly="readonly" onclick="select_text('cslpybexmxyuacbyuvib');" value="http://list.iblocklist.com/?list=cslpybexmxyuacbyuvib&amp;fileformat=p2p&amp;archiveformat=gz" type="text"></td>
</tr> 
```

--- 结果应如下所示：

> iana-reserved [http://list.iblocklist.com/?list=bcoepfyewziejvcqyhqo&fileformat=p2p&archiveformat=gz](http://list.iblocklist.com/?list=bcoepfyewziejvcqyhqo&fileformat=p2p&archiveformat=gz) iana-private [http://list.iblocklist.com/?list=cslpybexmxyuacbyuvib&fileformat=p2p&archiveformat=gz](http://list.iblocklist.com/?list=cslpybexmxyuacbyuvib&fileformat=p2p&archiveformat=gz)

---是否可以通过 sed 在一行命令中获得它？如果是这样，请帮助。

列表的第一部分 - “somename”总是排在第一位，而不是紧随其后的 URL 位于下一个 / 不必是第二个 / 行。

```
>somename   ... is delimited by   'href="URL">'   and   '</a>'       on one line           
>URL ... is always delimited by   'value="'       and   '" type'     on any following line 
```

谢谢你，
亲切的问候。
M。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:30:12.160

使用我的[cli html 解析器](http://videlibri.sourceforge.net/xidel.html)Xidel，它是一行：

```
xidel "${_SCRIPT_PATH}/IBlockListLists.html" -e '//a/concat(., " ", @href)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:36:41.533

[shell](/questions/tagged/shell "显示标记为“外壳”的问题")不是执行此操作的正确工具。

我可以向您展示一些使用*HTML 解析器在*[python](/questions/tagged/python "显示标记为“python”的问题")或[perl](/questions/tagged/perl "显示标记为“perl”的问题") ( `ruby`, `java`, `php`)中执行此操作的脚本。这些是这项工作的正确工具。

 *这可能是本网站上讨论最多的问题，请参阅这篇[出色的帖子](https://stackoverflow.com/a/1732454/465183)

制作这个网站的其中一个人也写了[这个](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:54:44.163

使用解析器。其中有很多，这里是一个使用`HTML::TokeParser`.

内容`script.pl`：

```
#!/usr/bin/env perl

use warnings;
use strict;
use HTML::TokeParser;

my $p = HTML::TokeParser->new( shift ) || die;

while ( my $tag = $p->get_tag( 'a' ) ) { 
    printf qq|%s %s\n|, $p->get_text, $tag->[1]{href};
} 
```

像这样运行它：

```
perl-5.14.2 script.pl htmlfile 
```

这会产生：

```
iana-reserved http://www.iblocklist.com/list.php?list=bcoepfyewziejvcqyhqo
iana-private http://www.iblocklist.com/list.php?list=cslpybexmxyuacbyuvib 
```*

# java - 静态模拟不起作用

> ID：14966748
> 
> 赞同：6
> 
> 时间：2013-02-19T20:28:13.053
> 
> 标签：java, static, junit, mockito, powermock

我有以下示例单元测试，它试图模拟 java.nio.file.Files 但这个模拟不起作用并且代码试图删除示例路径。

```
@Test
    public void testPostVisitDirectory() throws Exception {
        Path mockedPath = Paths.get("sample path");
        PowerMockito.mockStatic(Files.class);
        PowerMockito.doNothing().when(Files.class,
                PowerMockito.method(Files.class, "delete", Path.class));

        DeleteDirVisitor visitor = new DeleteDirVisitor(false);
        Assert.assertEquals("The was a problem visiting the file",
                FileVisitResult.CONTINUE,
                visitor.postVisitDirectory(mockedPath, null));
    } 
```

知道有什么问题吗？

这是方法的内容`visitor.postVisitDirectory`

```
[...]
if (e == null) {
            Files.delete(dir);
            return FileVisitResult.CONTINUE;
        }
[...] 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T06:03:15.993

我在使用 powermock 1.5.1 和 Files 类时遇到了类似的问题，并且怀疑它在静态模拟一些/所有 jdk1.7 类时存在问题，尽管我不知道为什么。我还检查了 javassist 版本，当时它是最新的（3.18.0-GA），

我将我的测试类剥离到 Files 行，但它仍然不起作用。然后我决定尝试模拟另一个静态类 StringUtils.chop("string"); (commons-lang3) 然后我的 powermock 测试工作了，我能够强制它从 mock 中生成异常。

这向我证明了我已经按照书本完成了所有工作，并且静态模拟在 Files 类上不起作用，但在 StringUtils 上起作用。

顺便说一句，我更改了 @PrepareForTest 和 PowerMockito.mockStatic() 调用以引用正确的类。

最后我放弃了嘲笑文件。只是提醒一下，以防其他人遇到同样的问题。

**编辑。得到它的工作：**我已经再次尝试了这个，因为我在另一个项目中需要它。有一个更新版本的 PowerMock out (1.5.3) 使用更新的 javassist (3.18.1-GA) 修复了我在回复另一条评论时提到的错误。

即使您正在测试的类没有公开静态方法，我也可以`Files`通过将被测类添加到现在和现在`@PrepareForTest`一样来不断地模拟工作。`Files`对于其他静态模拟，我以前不需要这样做。我不知道为什么需要它或对`Files`.

例子：

```
public class MyTestClass {

    public void justToTestMocking(Path path) throws IOException {
        if (!Files.exists(path)) {
            throw new IllegalArgumentException("I know there is a deleteIfExists() but I am just testing mocking");
        }
        Files.delete(path);
    }
} 
```

以及下面的测试：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest({Files.class, MyTestClass.class})
public class MyTestClassTest {

    @Before
    public void setUp() {
        mockStatic(Files.class);

    }        

    @Test
    public void justToTestMocking_WillDeletePath() throws IOException {
        Path path = mock(Path.class);
        MyTestClass test = new MyTestClass();

        when(Files.exists(path)).thenReturn(true);

        test.justToTestMocking(path);

        verifyStatic();
        Files.delete(path);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T20:57:05.657

你加了吗

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Files.class) 
```

到包含该方法的junit测试类？

请参阅[powermock 文档](http://code.google.com/p/powermock/wiki/GettingStarted)，写作测试部分。

**编辑：**

嗯，看来你做的一切都是对的。这是我正在运行的内容：

```
import java.io.IOException;
import java.nio.file.FileVisitResult;
import java.nio.file.Files;
import java.nio.file.Path;
import java.nio.file.Paths;
import java.nio.file.SimpleFileVisitor;

import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.api.mockito.PowerMockito;
import org.powermock.core.classloader.annotations.PrepareForTest;
import org.powermock.modules.junit4.PowerMockRunner;

@RunWith(PowerMockRunner.class)
@PrepareForTest(Files.class)
public class TestVisitor {
  public class PrintingVisitor extends SimpleFileVisitor<Path> {
    @Override
    public FileVisitResult postVisitDirectory(final Path dir, final IOException exc) throws IOException {
      Files.delete(dir);
      return FileVisitResult.CONTINUE;
    }
  }

  @Test
  public void testPostVisitDirectory() throws Exception {
    final Path mockedPath = Paths.get("sample path");

    /* Mocking */
    PowerMockito.mockStatic(Files.class);
    PowerMockito.doNothing().when(Files.class, PowerMockito.method(Files.class, "delete", Path.class));
    /* End Mocking */

    final PrintingVisitor visitor = new PrintingVisitor();
    Assert.assertEquals("The was a problem visiting the file", FileVisitResult.CONTINUE, visitor.postVisitDirectory(mockedPath, null));
  }
} 
```

如果我注释掉标记为 Mocking 的部分，我会得到`NoSuchFileException`. 如果我离开它，测试通过。

也许发布产生错误的完整示例？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-05T08:36:48.020

我有一个类似的问题，事实证明它与准备正确的课程有关。

在上面的示例中，被测试的类已经在“prepareFor-Scope”中，因为它是测试类的内部类。

您必须将类添加到`@PrepareForTest`调用静态方法...在我的情况下，这些还不够，因为访问的代码`Files.delete`位于无法显式准备的匿名类中。

我命名了匿名类并将其添加到`@PrepareForTest`并且一切正常

# php - yii Csrf Token cookie，为什么要转移到 Post？

> ID：14966754
> 
> 赞同：0
> 
> 时间：2013-02-19T20:28:23.803
> 
> 标签：php, security, cookies, yii, csrf

烂英文：

也许我误解了 Csrf 的方式，但是如果它在 cookie 中并且可以从那里获取，为什么要传入 POST 请求。

如果不安全，为什么不呢？那为什么它传输cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:36:45.480

Yii 将使用 CSRF 令牌创建一个 cookie，并且每当提交表单时，它会将 cookie 中的 CSRF 令牌与 from 中的 CSRF 令牌进行比较。

# java - AppEngineFile 到字节 []

> ID：14966757
> 
> 赞同：1
> 
> 时间：2013-02-19T20:28:29.650
> 
> 标签：java, google-app-engine, blobstore

如何将 AppEngineFile 转换为字节数组？

我有像这样从 blobkey 创建的文件

```
AppEngineFile file = fileService.getBlobFile(new BlobKey("blob key")); 
```

我已经尝试过这样的事情

```
FileService fileService = FileServiceFactory.getFileService();

// Create a new Blob file with mime-type "text/plain"
AppEngineFile file = fileService.getBlobFile(new BlobKey(video.getBlobkey()));

BlobstoreInputStream b = new BlobstoreInputStream(new BlobKey(video.getBlobkey()));

RandomAccessFile f = new RandomAccessFile(file.getFullPath(), "r");
byte[] pixels = b.read(); //doesn't work 
```

这个想法是通过 POST 请求发送这个字节数组。

这是我必须构建请求的代码：

```
String attachmentName = "test";
String attachmentFileName = "test.mp4";
String crlf = "\r\n";
String twoHyphens = "--";
String boundary =  "*****";

HttpURLConnection httpUrlConnection = null;
URL url = new URL("http://example.com/server.cgi");
httpUrlConnection = (HttpURLConnection) url.openConnection();
httpUrlConnection.setUseCaches(false);
httpUrlConnection.setDoOutput(true);
DataOutputStream request = new DataOutputStream(httpUrlConnection.getOutputStream());

request.writeBytes(twoHyphens + boundary + crlf);
request.writeBytes("Content-Disposition: form-data; name=\"" + attachmentName + "\";filename=\"" + attachmentFileName + "\"" + crlf);
request.writeBytes(crlf);

// Get a file service
FileService fileService = FileServiceFactory.getFileService();
// Create a new Blob file with mime-type "text/plain"
AppEngineFile file = fileService.getBlobFile(new BlobKey(video.getBlobkey()));

BlobstoreInputStream b = new BlobstoreInputStream(new BlobKey(video.getBlobkey()));

RandomAccessFile f = new RandomAccessFile(file.getFullPath(), "r");
byte[] pixels = b.read();

request.write(pixels);

request.writeBytes(crlf);
request.writeBytes(twoHyphens + boundary + twoHyphens + crlf);

request.flush();
request.close();

InputStream responseStream = new    BufferedInputStream(httpUrlConnection.getInputStream());

BufferedReader responseStreamReader = new BufferedReader(new InputStreamReader(responseStream));
String line = "";
StringBuilder stringBuilder = new StringBuilder();
while ((line = responseStreamReader.readLine()) != null)
{
    stringBuilder.append(line).append("\n");
}
responseStreamReader.close();

String response = stringBuilder.toString();
System.out.println(response); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:08:39.153

你可以简单地这样做：

```
FileReadChannel ch = fileservice.openReadChannel(file, true);
byte[] data = getBytes(Channels.newInputStream(ch)); 
```

并使用这种方便的方法（可在其他地方使用）：

```
public static byte[] getBytes(InputStream is) throws IOException {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    int len;
    byte[] data = new byte[100000]; // adapt buffer size to your needs
    while ((len = is.read(data, 0, data.length)) != -1) {
        buffer.write(data, 0, len);
    }

    buffer.flush();
    return buffer.toByteArray();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T21:00:36.133

```
AppEngineFile file = ...

int size = (int) fileservice.stat(file).getLength().longValue();

    FileReadChannel ch = fileservice.openReadChannel(file, true);
    ByteBuffer dst = ByteBuffer.allocate(size);
    try {
        int sum=0;
        while (sum<size) {
           int read = ch.read(dst);
           sum+=read;
        }
    } finally {ch.close();}

    bytes byte[] = dst.array(); 
```

（这不是从 Java 中的 Channel 读取的方式，但似乎 appengine 中有一个[错误](http://code.google.com/p/googleappengine/issues/detail?id=7862)，需要您知道确切的字节数）。

# php - 如何重构这个 PHP 数组代码

> ID：14966758
> 
> 赞同：1
> 
> 时间：2013-02-19T20:28:29.647
> 
> 标签：php, arrays

有没有更好的方法如何在 PHP 中获取数组中的其他元素？

假设`$a`数组中肯定存在。

```
$array = array('one','two');

if($a==$array[0]){
    $b = $array[1];
}else{
    $b = $array[0];
} 
```

对于这么小的事情，似乎代码太多了。

编辑：我不是在寻找三元语法。我正在寻找某种可以自动执行此操作的功能。

EDIT2：我知道一个字符串。我知道数组中存在那个字符串和另一个。我想要另一个。我可以使用什么 PHP 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:37:53.600

如果保证它只是一个包含两个元素的数组，并且 $a 保证作为一个值存在于 $array

```
$b = $array[1 - array_search($a, $array)]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T20:30:14.677

您可以使用[三元组](http://php.net/manual/en/language.operators.comparison.php)来缩短语法。

```
$b = ($a==$array[0]) ? $array[1] : $array[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:35:10.693

没有真正的功能来做你所描述的事情，但如果你想缩短你的代码，并且你不想使用三元，那么你可以这样做：

```
$array = array('one','two');

$b = $array[0];
if($a==$array[0])
  $b = $array[1]; 
```

如您所说，如果`$a`数组中肯定存在，则此方法有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T20:30:52.733

你可以使用：

```
$b = $a == $array[0] ? $array[1] : $array[0] ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T20:34:58.097

好吧，假设您的数组可能比两个元素长，您就不能进行搜索吗？

`$b = $array[array_search($a, $array)];`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-19T20:50:57.920

好吧，让这更难看，这是我的解决方案：

```
$b = $array[!array_search($a, $array)]; 
```

# c# - 在 localhost 但不在网站上获取损坏的图像

> ID：14966764
> 
> 赞同：1
> 
> 时间：2013-02-19T20:29:08.617
> 
> 标签：c#, asp.net

在我们的网站上，我们将图像放在带有以下行的网格上：

```
imgUpdated.ImageUrl = "./images/Test_Icon.gif"; 
```

这在发布到生产或测试网站时可以正常工作，但在 IDE 中它会提供损坏的 (Red-X) 图像。损坏图像上的属性说明了这一点：

```
http://localhost:52168/OurApp/images/Test_Icon.gif 
```

如果我尝试将其传递到浏览器中，它会将我重定向到具有以下 URL 的登录页面：

```
http://localhost:52168/OurApp/login.aspx?ReturnUrl=%2fITRequest%2fimages%2fTest_Icon.gif 
```

我将不胜感激您可能提供的任何帮助。我已经尝试在 IIS 中设置一个虚拟目录并删除句点，但这没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:43:02.800

您的图像或任何其他内容路径应以正斜杠**/**开头，它始终指向您网站的根目录。这样，无论您在什么环境中，您的路径都将始终相同。所以，回答你的问题......你的路径应该是这样的：

```
imgUpdated.ImageUrl = "/images/Test_Icon.gif"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:53:19.250

使用以下 xml创建一个`web.config`文件并将其放在您的图像文件夹中

```
<configuration>
    <system.web>
        <authorization>
            <allow users="?"/>
        </authorization>
    </system.web>
</configuration> 
```

这可能是您的 IDE 不显示图像的原因。如果您的浏览器给出`401`响应并重定向到您的登录页面，则 IDE 需要一个图像 MINE 类型。

您可以在授权部分找到[更多信息](http://weblogs.asp.net/gurusarkar/archive/2008/09/29/setting-authorization-rules-for-a-particular-page-or-folder-in-web-config.aspx)

# android - 如何知道绑定的Android Emulator的控制台端口号？

> ID：14966767
> 
> 赞同：1
> 
> 时间：2013-02-19T20:29:21.020
> 
> 标签：android, emulation, adb

我需要知道，我如何获得以编程方式连接到 android 模拟器的控制台端口。我正在使用库 com.android.ddmlib。

更具体地说：假设我已经启动了一些模拟器，当我执行一些程序时，它会检查某个端口（例如 5554）上是否有一些模拟器。如果是，则输出为真，否则为假。

我可以从 android 调试桥访问所有设备（IDevice），但我无法实现，如果该特定设备绑定到某个特定端口。

我看到的只是 adb devices -l 的输出，但它只写“emulator-5554”。它是如何实现端口的唯一方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T05:37:09.530

该命令`adb start-server`显示消息，

```
* daemon not running. starting it now on port xxxx * 
```

“xxxx”是正在使用的端口号`adb`。

# matlab - MATLAB图中轴标签和轴之间的距离

> ID：14966770
> 
> 赞同：12
> 
> 时间：2013-02-19T20:29:25.630
> 
> 标签：matlab, matlab-figure

我正在用 MATLAB 绘制一些数据，我想调整轴标签和轴本身之间的距离。但是，只需在标签的“位置”属性中添加一点，标签就会移出图形窗口。是否有“保证金”属性或类似的东西？

![在此处输入图像描述](../Images/2ed08a7119c1ed12b8e85baa91ea7319.png)

在上图中，我想增加数字和标签“时间（s）”之间的距离，同时自动扩展数字大小，使标签不会超出范围。

这就是我设置图形/轴的方式。

```
figure;
set(gca, ...
    'Box'         , 'off'                        , ...
    'LooseInset'  , get(gca, 'TightInset') * 1.5 , ...
    'TickDir'     , 'in'                         , ...
    'XMinorTick'  , 'off'                        , ...
    'YMinorTick'  , 'off'                        , ...
    'TickLength'  , [.02 .02]                    , ...
    'LineWidth'   , 1                            , ...
    'XGrid'       , 'off'                        , ...
    'YGrid'       , 'off'                        , ...
    'FontSize'    , 18                           ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T02:17:14.043

我写了一个函数，它应该完全符合你的要求。它将轴保持在完全相同的大小和位置，它向下移动 x-label 并将图形大小增加到足够大以显示标签：

```
function moveLabel(ax,offset,hFig,hAxes)
    % get figure position
    posFig = get(hFig,'Position');

    % get axes position in pixels
    set(hAxes,'Units','pixels')
    posAx = get(hAxes,'Position');

    % get label position in pixels
    if ax=='x'
        set(get(hAxes,'XLabel'),'Units','pixels')
        posLabel = get(get(hAxes,'XLabel'),'Position');
    else
        set(get(hAxes,'YLabel'),'Units','pixels')
        posLabel = get(get(hAxes,'YLabel'),'Position');
    end

    % resize figure
    if ax=='x'
        posFigNew = posFig + [0 -offset 0 offset];
    else
        posFigNew = posFig + [-offset 0 offset 0];
    end
    set(hFig,'Position',posFigNew)

    % move axes
    if ax=='x'
        set(hAxes,'Position',posAx+[0 offset 0 0])
    else
        set(hAxes,'Position',posAx+[offset 0 0 0])
    end

    % move label
    if ax=='x'
        set(get(hAxes,'XLabel'),'Position',posLabel+[0 -offset 0])
    else
        set(get(hAxes,'YLabel'),'Position',posLabel+[-offset 0 0])
    end

    % set units back to 'normalized' and 'data'
    set(hAxes,'Units','normalized')
    if ax=='x'
        set(get(hAxes,'XLabel'),'Units','data')
    else
        set(get(hAxes,'YLabel'),'Units','data')
    end
end 
```

在这种情况下`offset`应该是像素的绝对偏移量。如果你想要相对偏移量，我认为这个函数很容易被重写。`hFig`是图形句柄和`hAxes`坐标区句柄。

编辑：在调用函数之前，使用`hFig = figure;`和轴创建图形`hAxes = axes;`（然后像在问题中那样设置轴：） 。`set(hAxes,...)`

EDIT2：添加了`'Units'`of`hAxes`和 the`XLabel`分别改回“规范化”和“数据”的行。这样，在调整大小后，图形将保持您想要的方式。

EDIT3：修改了函数以适用于 X 和 Y 标签。附加输入`ax`应该是`'x'`或`'y'`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-19T21:04:07.857

您可以通过调整 xlabel 轴的位置来完成此操作。我还建议使用“标准化”单位，这样您的定位就不会依赖于数据范围。这是一个例子：

```
figure
plot(rand(1,10))

set(gca, 'Units', 'Normalized');
pos = get(gca, 'Position');
offset = 0.1;
set(gca, ...
    'Box'         , 'off'                        , ...
    'LooseInset'  , get(gca, 'TightInset') * 1.5 , ...
    'TickDir'     , 'in'                         , ...
    'XMinorTick'  , 'off'                        , ...
    'YMinorTick'  , 'off'                        , ...
    'TickLength'  , [.02 .02]                    , ...
    'LineWidth'   , 1                            , ...
    'XGrid'       , 'off'                        , ...
    'YGrid'       , 'off'                        , ...
    'FontSize'    , 18                           , ...
    'Position'    , pos + [0, offset, 0, -offset]);

h = xlabel('Time (s)');
set(h, 'Units', 'Normalized');
pos = get(h, 'Position');
set(h, 'Position', pos + [0, -offset, 0]); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-30T21:41:45.810

我知道这已经得到了解答，但这（在某种程度上）是一种更简单的方法：

```
relative_offset = 1.5;
close all;
figure(99);clf
plot(rand(1,10))
xlabel('The x-axis')
xh = get(gca,'XLabel'); % Handle of the x label
pause(0.2)
set(xh, 'Units', 'Normalized')
pause(0.2)
pos = get(xh, 'Position');
set(xh, 'Position',pos.*[1,relative_offset,1]) 
```

我已经包含了暂停命令，因为否则我的系统会以某种奇怪的方式超前。

/尼尔斯

# excel - 从 scripting.dictionary 中提取键值到一个范围内

> ID：14966771
> 
> 赞同：0
> 
> 时间：2013-02-19T20:29:30.287
> 
> 标签：excel, vba

我从 g （对象）中提取键值很好，但是它们在 M 范围内相互覆盖，我不明白，因为它应该寻找偏移量？我显然错过了一些东西。有任何想法吗？谢谢！

```
With wbkVer.Worksheets(1)
    Set g = CreateObject("scripting.dictionary")   
    Set rngChasssSrc = wbkCS.Worksheets(2).Range("Z3:Z20")
    Set rngchassis = wbkVer.Worksheets(1).Range("M" & .Rows.Count).End(xlUp).Offset(1, 0)
For Each k In rngChasssSrc
    tmp = Trim(Right(k.Value, 7))
    If Not IsEmpty(tmp) Then g(tmp) = g(tmp) + 1
Next k
For Each u In g.Keys()
    rngchassis.Value = u
Next u
End With 
```

**最终代码：**

```
With wbkVer.Worksheets(1)
    Set g = CreateObject("scripting.dictionary")
    Set rngChasssSrc = wbkCS.Worksheets(2).Range("Z3:Z20")
    Set rngchassis = .Range("M" & .Rows.Count).End(xlUp).Offset(1, 0)

    For Each k In rngChasssSrc
        If k > 0 then
        tmp = Trim(Right(k.Value, 7))
        If Not IsEmpty(tmp) Then g(tmp) = g(tmp) + 1
        End if
    Next k
    For Each u In g.Keys()
        rngchassis.Value = u
        Set rngchassis = .Range("M" & .Rows.Count).End(xlUp).Offset(1, 0)
    Next u
End With 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:33:42.620

> rngchassis.Value = u

问题是您没有增加目标单元格，因此它不断覆盖它:)

**未经测试**- 这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim lRow As Long

    With wbkVer.Worksheets(1)
        Set g = CreateObject("scripting.dictionary")
        Set rngChasssSrc = wbkCS.Worksheets(2).Range("Z3:Z20")

        '~~> Find Last Row in Col M for writing
        lRow = .Range("M" & .Rows.Count).End(xlUp).Row + 1

        For Each k In rngChasssSrc
            tmp = Trim(Right(k.Value, 7))
            If Not IsEmpty(tmp) Then g(tmp) = g(tmp) + 1
        Next k
        For Each u In g.Keys()
            .Range("M" & lRow).Value = u
            lRow = lRow + 1
        Next u
    End With
End Sub 
```

**编辑**

顺便说一句，您上面的代码也可以写成（注意重置范围）

```
With wbkVer.Worksheets(1)
    Set g = CreateObject("scripting.dictionary")
    Set rngChasssSrc = wbkCS.Worksheets(2).Range("Z3:Z20")
    Set rngchassis = .Range("M" & .Rows.Count).End(xlUp).Offset(1, 0)

    For Each k In rngChasssSrc
        tmp = Trim(Right(k.Value, 7))
        If Not IsEmpty(tmp) Then g(tmp) = g(tmp) + 1
    Next k

    For Each u In g.Keys()
        rngchassis.Value = u
        Set rngchassis = .Range("M" & .Rows.Count).End(xlUp).Offset(1, 0)
    Next u
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:15:51.903

`For Each u ...`循环可以替换为

```
rngchassis.Resize(g.Count, 1) = Application.Transpose(g.Keys) 
```

# sql - DB2 SQL 错误代码 -255

> ID：14966772
> 
> 赞同：1
> 
> 时间：2013-02-19T20:29:35.127
> 
> 标签：sql, db2, sqlcode

我以前从未见过此错误代码，也找不到任何文档。这是查询：

```
WITH QUERY AS (
    SELECT rrn(T1), blah, bleh, 
        ROW_NUMBER() OVER (order by  bleh desc) AS RN  
    FROM T1 
    WHERE (
        upper(blah) like ('%WEST%') 
     OR upper(bleh) like ('%WEST%')
    ) 
) 
SELECT * FROM QUERY WHERE RN BETWEEN 1 AND 10 
```

该错误仅在应用 upper() 时发生。

错误消息是“查询不支持功能”。

# asp.net - Intuit 合作伙伴平台 (IPP) QuickBooks Online (QBO) BlueDot Menu ASPX 页面未在 Internet Explorer (IE) 中呈现

> ID：14966774
> 
> 赞同：4
> 
> 时间：2013-02-19T20:29:42.487
> 
> 标签：asp.net, internet-explorer, infragistics, intuit-partner-platform, quickbooks-online

我有一个 .aspx 页面来显示 BlueDot 或 ConnectToQuickBooks 按钮。生成的 HTML 如下所示，从 IE 页面收集：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>TrueCommerce to Intuit Connect Page</title>
    <script type="text/javascript" src="https://appcenter.intuit.com/Content/IA/intuit.ipp.anywhere.js"></script>
    <script type="text/javascript">
        intuit.ipp.anywhere.setup({
            menuProxy: 'http://localhost:1384/MenuProxy.aspx',
            grantUrl: 'http://localhost:1384/OauthGrant.aspx'
        });
    </script>
</head>
<body>

<div id="blueDotDiv">
    <ipp:bluedot></ipp:bluedot>
</div>

</body>
</html> 
```

此代码不会在 IE 中显示。它将在 Chrome 和 Firefox 中正常显示。

[我使用W3C 标记验证服务](http://validator.w3.org/)验证了 HTML，并且只收到了标签上的错误，这是意料之中的。

我正在使用以下 IE 浏览器
**IE 版本：** 8.0.7601.17514 64 位版本

我们正在使用 Silverlight 并使用[Infragistics HTML 查看器控件 - Silverlight xamHtmlViewer](http://www.infragistics.com/products/silverlight/html-viewer/)嵌入了 ASPX 页面。从 xamHtmlViewer 内部调用或直接调用时，BlueDot 菜单不会出现（尽管它在 Chrome 和 Firefox 中都适用）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T20:39:04.403

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0060_Reference/Widgets/0010_Connect_Button](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere/0060_Reference/Widgets/0010_Connect_Button)

要在 IE8 中显示 Connect to QuickBooks 按钮，需要 html xmlns 属性，例如：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ipp=""> 
```

# r - 为什么使用函数“detach()”的主要目的是？

> ID：14966776
> 
> 赞同：1
> 
> 时间：2013-02-19T20:29:46.747
> 
> 标签：r

我们在课堂上看到了以下 R 代码：

```
attach(LifeCycleSavings)
boxplot(sr, main = "Box Plot of Savings Ratio")
detach() 
```

但是，为什么我们需要在这里使用“detach()”呢？我输入了“LifeCycleSavings”，仍然得到如下输出：

```
> LifeCycleSavings
                  sr pop15 pop75     dpi  ddpi
Australia      11.43 29.35  2.87 2329.68  2.87
Austria        12.07 23.32  4.41 1507.99  3.93
Belgium        13.17 23.80  4.43 2108.47  3.82 
```

文件“LifeCycleSavings”没有被分离。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T20:53:27.893

要回答您的具体问题，`detach`在这种情况下是从搜索路径中删除该数据框。这意味着您不能再从该数据框中单独引用变量名称：

```
attach(LifeCycleSavings)
> sr
 [1] 11.43 12.07 13.17  5.75 12.88  8.79  0.60 11.90  4.98 10.78 16.85  3.59 11.24 12.64 12.55 10.67  3.01
[18]  7.70  1.27  9.00 11.34 14.28 21.10  3.98 10.35 15.48 10.25 14.65 10.67  7.30  4.44  2.02 12.70 12.78
[35] 12.49 11.14 13.30 11.77  6.86 14.13  5.13  2.81  7.81  7.56  9.22 18.56  7.72  9.24  8.89  4.71
> detach(LifeCycleSavings)
> sr
Error: object 'sr' not found 
```

所以在这一点上，如果我们想使用`sr`，我们需要输入`LifeCycleSavings$sr`来告诉 R 去哪里看。

正如 Andrie 所提到的，很多人不赞成这种使用`attach`and `detach`（尽管`detach`有时也用于从搜索路径中删除包），因为它真的会弄乱你的搜索路径。

# mongodb - 在 Mongo 中存储嵌套类别（或分层数据）的最有效方法？

> ID：14966777
> 
> 赞同：18
> 
> 时间：2013-02-19T20:29:47.583
> 
> 标签：mongodb, database, nosql

我们有几个产品的嵌套类别（例如，**运动 -> 篮球 -> 男装**，**体育 -> 网球 -> 女装**），并且使用 Mongo 而不是 MySQL。

我们知道如何将嵌套类别存储在像 MySQL 这样的 SQL 数据库中，但是对于如何为 Mongo 做的任何建议，我们将不胜感激。我们需要优化的操作是快速找到一个类别或子类别中的所有产品，这些产品可以嵌套在根类别下的几层（例如，**男篮**类别中的所有产品或**女子网球**类别中的所有产品）。

[这个 Mongo 文档](https://docs.mongodb.com/manual/applications/data-models-tree-structures/)提出了一种方法，但它说当我们需要子树需要操作时它不能很好地工作（因为类别可以达到多个级别）。

关于有效存储和搜索任意深度嵌套类别的最佳方法的任何建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-23T13:12:36.407

您要决定的第一件事就是您将使用哪种树。

要考虑的最重要的事情是您的数据和访问模式。您已经说过，您所有工作的 90% 将是查询，并且听起来（电子商务）更新只会由管理员运行，很可能很少。

因此，您需要一个模式，让您能够通过路径快速查询孩子，即：体育 -> 篮球 -> 男子、体育 -> 网球 -> 女子，并且不需要真正扩展到更新。

正如您正确指出的那样，MongoDB 确实为此提供了一个很好的文档页面：[https](https://docs.mongodb.com/manual/applications/data-models-tree-structures/) : //docs.mongodb.com/manual/applications/data-models-tree-structures/ 其中 10gen 实际上为树声明了不同的模型和模式方法和描述了它们的主要起伏。

如果您希望轻松查询，应该引起注意的是物化路径：[https ://docs.mongodb.com/manual/tutorial/model-tree-structures-with-materialized-paths/](https://docs.mongodb.com/manual/tutorial/model-tree-structures-with-materialized-paths/)

这是一种非常有趣的构建树的方法，因为要在上面给出的示例中查询“网球”中的“女性”，您可以简单地执行一个预先固定的正则表达式（可以使用索引：[http://docs.mongodb .org/manual/reference/operator/regex/](http://docs.mongodb.org/manual/reference/operator/regex/)）像这样：

```
db.products.find({category: /^Sports,Tennis,Womens[,]/}) 
```

查找树的特定路径下列出的所有产品。

不幸的是，这个模型在更新方面真的很糟糕，如果您移动一个类别或更改其名称，您必须更新所有产品，并且一个类别下可能有数千种产品。

更好的方法是将 a`cat_id`放在产品上，然后使用架构将类别分成单独的集合：

```
{
    _id: ObjectId(),
    name: 'Women\'s',
    path: 'Sports,Tennis,Womens',
    normed_name: 'all_special_chars_and_spaces_and_case_senstive_letters_taken_out_like_this'
} 
```

因此，现在您的查询仅涉及类别集合，这应该使它们更小且性能更高。例外情况是当您删除一个类别时，产品仍需要触摸。

因此，将“网球”更改为“羽毛球”的示例：

```
db.categories.update({path:/^Sports,Tennis[,]/}).forEach(function(doc){
    doc.path = doc.path.replace(/,Tennis/, ",Badmin");
    db.categories.save(doc);
}); 
```

不幸的是，MongoDB 目前没有提供查询中的文档反射，因此您必须将它们拉出客户端，这有点烦人，但希望它不会导致带回太多类别。

这基本上就是它的工作原理。更新有点痛苦，但我相信能够使用索引在任何路径上立即查询的能力更适合您的场景。

当然，额外的好处是这个模式与嵌套集模型兼容：[http](http://en.wikipedia.org/wiki/Nested_set_model) ://en.wikipedia.org/wiki/Nested_set_model我一次又一次地发现它对于电子商务网站来说非常棒，例如网球可能同时在“运动”和“休闲”下，并且您需要多个路径，具体取决于用户来自哪里。

物化路径的模式很容易通过添加另一个来支持这一点`path`，很简单。

希望它是有道理的，相当长的一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T07:17:20.323

如果所有类别都不同，则将它们视为标签。不需要在项目中编码层次结构，因为在查询项目时不需要它们。层次结构是一种表现形式。用其路径中的所有类别标记每个项目，因此“运动 > 棒球 > 鞋子”可以保存为`{..., categories: ["sport", "baseball", "shoes"], ...}`. 如果您想要“运动”类别中的所有商品，请搜索`{categories: "sport"}`，如果您只想要鞋子，请搜索`{tags: "shoes"}`。

这不会捕获层次结构，但是如果您考虑一下，那也没关系。如果类别不同，则在查询项目时层次结构对您没有帮助。不会有其他“棒球”，所以当你搜索它时，你只会得到层次结构中“棒球”级别以下的东西。

我的建议依赖于不同的类别，我猜它们不在您当前的模型中。但是，没有理由不能区分它们。您可能已选择将页面上显示的字符串用作数据库中的类别名称。如果您改为使用“sport”或“womens_shoes”等符号名称并使用查找表来查找要在页面上显示的字符串（如果类别名称发生变化，这也将为您节省数小时的工作时间——而且它会使网站的翻译更容易，如果您需要这样做）您可以轻松地确保它们是不同的，因为它们与页面上显示的内容没有任何关系。因此，如果您在层次结构中有两个“鞋”（例如“网球 > 女式 > 鞋”和“网球 > 男式”

# c++ - 只有一个对象实现基本功能时的菱形继承

> ID：14966784
> 
> 赞同：4
> 
> 时间：2013-02-19T20:30:11.093
> 
> 标签：c++, visual-studio-2010

是的，我以前处理过钻石继承问题，但这次我的问题似乎相当独特。我有一个名为 IShaderResource 的接口，它充当基类。我有另一个从 IShaderResource 派生的接口，称为 IVertexBuffer。然后我有一个名为 D3D11ShaderResource 的基本接口的实现，它派生自 IShaderResource。之后，我有一个名为 D3D11VertexBuffer 的对象，它扩展了 D3D11ShaderResource 并实现了 IVertexBuffer。所以现在我的层次结构看起来像这样。

```
 IShaderResource
                                   /        \
                                  /          \
                         IVertexBuffer     D3D11ShaderResource
                                  \          /
                                   \        /
                                D3D11VertexBuffer 
```

IShaderResource 只有 1 个纯虚函数。这与普通菱形继承的不同之处在于 IVertexBuffer 没有实现该功能。它仍然是抽象的，而 D3D11ShaderResource 确实实现了该功能。当我实际上将 IShaderResource 继承到两个派生类时，它仍然认为我有一个欠精细的抽象函数。为了让我的系统正常工作，我需要从 IShaderResource 派生 IVertexBuffer。这些实现将位于在运行时开始时动态加载的 dll 中，但在程序的整个生命周期中将保持链接。因此，任何从任何地方的 dll 创建的对象都可以通过接口访问，但在接口之后，类型将在程序的整个生命周期中定义。例如，如果你已经加载了 d3d11 库并创建了一个顶点缓冲区，你会得到一个指向 D3D11VertexBuffer 实例的 IVertexBuffer ptr，之后就不可能有其他实现的顶点缓冲区实现。这意味着在渲染器中，我可以将 IShaderResource 投射到 D3D11ShaderResource 完全知道它将是什么。（注意 * 在渲染器之外这样做会破坏接口的目的）

在我的渲染器界面中有一些函数，我想传递一个 IShaderResource 像 IVertexBuffer 并仅通过它的 D3D11ShaderResource 部分对底层 D3D11VertexBuffer 执行操作，而其他人将接收 IVertexBuffer 并在 D3D11Vertexbuffer 上执行操作。为此，我需要从 IShaderResource 派生以确保 D3D11ShaderResource 是 IShaderResource 的完整类型，同时还具有从 IVertexBuffer 和 D3D11ShaderResource 继承的 D3D11VertexBuffer。

我在这里推送 4000 行代码，所以我将发布有问题的摘录。

IShaderResource

```
class IShaderResource
{
public:
    struct INIT_DESC
    {
        SYNC_USAGE usage;
    };

public:
    // virtual destructor for derived classes
    virtual ~IShaderResource() {}

    // the resource usage hint
    virtual IRenderUtility::SYNC_USAGE GetUsageType() = 0;
}; 
```

IVertexBuffer

```
class IVertexBuffer : 
    public virtual IShaderResource
{
public:
    struct INIT_DESC : public IShaderResource::INIT_DESC
    {
        const void * Data;
        unsigned int ByteWidth;
        unsigned int ByteStride;
    };

public:
    // virtual destructor for derived classes
    virtual ~IVertexBuffer() {}

    // the resource usage hint
    virtual IRenderUtility::SYNC_USAGE GetUsageType() = 0;
}; 
```

D3D11ShaderResource

```
class D3D11RenderUtility::D3D11ShaderResource : 
    public virtual IRenderUtility::IShaderResource
{
public:
    struct INIT_DESC
    {
        IRenderUtility::SYNC_USAGE usage;
        ID3D11ShaderResourceView * resourceView;
    };

public:
    // default constructor
    D3D11ShaderResource(INIT_DESC & desc) : 
        m_Usage(desc.usage),
        m_ResourceView(desc.resourceView)
        {}

    // virtual destructor for derived classes
    virtual ~D3D11ShaderResource() {}

    // obtains the resource usage hint
    IRenderUtility::SYNC_USAGE GetUsageType() {return m_Usage;}

    // used to obtain the resource view of the object
    ComPtr<ID3D11ShaderResourceView> GetResourceView() const {return m_ResourceView;}

protected:
    IRenderUtility::SYNC_USAGE m_Usage;
    ComPtr<ID3D11ShaderResourceView> m_ResourceView;
}; 
```

D3D11顶点缓冲区

```
class D3D11RenderUtility::D3D11VertexBuffer : 
    public IRenderUtility::IVertexBuffer ,
    public D3D11RenderUtility::D3D11ShaderResource
{
public:
    struct INIT_DESC : 
        public D3D11ShaderResource::INIT_DESC
    {
        ID3D11Buffer * buf;
    };

private:
    // disable copy constructor 
    D3D11VertexBuffer(const D3D11VertexBuffer & buf);

    // disable assignment operator
    void operator=(const D3D11VertexBuffer & buf);  

public:
    // default constructor
    D3D11VertexBuffer(INIT_DESC & desc) :
        D3D11ShaderResource(desc),
        m_Buffer(desc.buf)
        {}

    // virtual destructor for derived classes
    virtual ~D3D11VertexBuffer() {}

    // used to obtain the d3d11 vertex buffer pointer
    ComPtr<ID3D11Buffer> GetBuffer() const {return m_Buffer;}

private:
    ComPtr<ID3D11Buffer> m_Buffer;
}; 
```

IRenderUtility::SYNC_USAGE 是框架的一个简单枚举，而 ComPtr 是我为自动释放 com 指针而制作的一个小智能包装器。除此之外，其余的都很明显。

顺便说一句，实际的错误是这样的： `error C2259: 'SYNC::D3D11RenderUtility::D3D11VertexBuffer' : cannot instantiate abstract class 2> due to following members: 2> 'SYNC::IRenderUtility::SYNC_USAGE SYNC::IRenderUtility::IVertexBuffer::GetUsageType(void)' : is abstract`

SYNC 是所有这一切所在的命名空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:42:37.887

我认为您需要删除`GetUsageType`in的声明`IVertexBuffer`。将它放在那里 AND 在 base 中似乎是多余的`IShaderResource`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T23:44:36.153

您在这里使用的是语言定义所称的“优势”。如果您的两个中间类中只有一个覆盖了虚拟基中定义的虚函数，那么该定义也适用于派生类。正如@chuex 所说，您需要删除 IVertexBuffer 中的冗余声明，因为这打破了应用优势的前提。

出于可读性或任何其他原因添加冗余代码通常是一个坏主意，即使只是因为它使维护变得更加困难。在这里，它破坏了您的类层次结构正在尝试做的事情。

# ruby-on-rails - Rails 中的日期时间比较失败

> ID：14966788
> 
> 赞同：5
> 
> 时间：2013-02-19T20:30:15.277
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, timezone

由于某种原因，比较总是失败，请从 Rails 控制台查看：

```
irb(main):021:0> @game.game_date.class
=> ActiveSupport::TimeWithZone
irb(main):026:0> @game.game_date
=> Tue, 19 Feb 2013 23:15:00 UTC +00:00
irb(main):022:0> @game.game_date.to_datetime
=> Tue, 19 Feb 2013 23:15:00 +0000
irb(main):019:0> DateTime.now
=> Tue, 19 Feb 2013 23:48:38 +0330
irb(main):020:0> @game.game_date.to_datetime > DateTime.now
=> true 
```

为什么比较总是错误的？我也试过这个：

```
@game.game_date.to_time > Time.now.to_tim 
```

结果也是 true ，但很明显，从 23:48 > 23:15:00 开始它应该是 false 。

请注意，我在 ubuntu 和 Rails 3.1 下使用 ruby​​ ruby​​ 1.9.3p0

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T20:45:33.820

您的时区有问题：

```
irb(main):022:0> @game.game_date.to_datetime
=> Tue, 19 Feb 2013 23:15:00 +0000
irb(main):019:0> DateTime.now
=> Tue, 19 Feb 2013 23:48:38 +0330 
```

你看，你的 game_date 属性有一个`+0000`TimeZone，而 DateTime.now 有一个`+0330`

试试这个：

```
@game.game_date.to_datetime > Time.zone.now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:57:04.397

它以这种方式对我有用，无论如何不确定它是否是最好的方法，但至少以我期望的方式工作：

```
@game.game_date.to_datetime > Time.now.to_datetime.change(:offset => "+0000") 
```

# javascript - jQuery 中的 .animate() 函数不能滑动图像

> ID：14966790
> 
> 赞同：0
> 
> 时间：2013-02-19T20:30:16.307
> 
> 标签：javascript, jquery, jquery-animate, slideshow

代码：

```
$("#previous_image").click(function(){
  $("#images").animate({"right": "+=250px"}, "slow");
    return false;
}); 
```

当我运行 console.log 时，我进入了 click 功能，所以这不是问题。看来我的 div 只是不想动画。

我的 CSS 代码 (SASS)

```
#images_container{
  display: block;
  margin-left: 39px;
  width: 630px;
  height: 81px;
  overflow: hidden;
}

#images{
  display: block;
  width: 1500px;
  min-width: 650px;

  img{
    margin-top: 7px;
    display: inline-block;
    height: 66px;
    cursor: pointer;

    filter: url(svg/filters.svg#grayscale);
    filter: gray; /* IE6-9 */
    -webkit-filter: grayscale(100%); /* Google Chrome & Safari 6+ */

    transition: filter .3s ease-in-out;
    -moz-transition: filter .3s ease-in-out;
    -webkit-transition: filter .3s ease-in-out;
    transition: -webkit-filter .3s ease-in-out;
    -moz-transition: -webkit-filter .3s ease-in-out;
    -webkit-transition: -webkit-filter .3s ease-in-out;

    @include transition-property(-webkit-filter);
    @include transition-duration(.3s);
    @include transition-timing-function(ease-out);

    &:hover{
      filter: none;
      -webkit-filter: grayscale(0);
    }
  } 
```

有什么硬仗吗？吓死我了

干杯。W。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:34:06.683

你不应该需要`+=`

尝试这个：

```
$("#previous_image").click(function(){
    $("#images").animate({"right": "250px"}, "slow");
    return false;
}); 
```

也可以使用`right`并且`left`您需要一个绝对定位的元素。为了绝对定位某物，您需要将其容器相对定位。

因此，将您的 css 更改为：

```
#images_container{
  display: block;
  margin-left: 39px;
  width: 630px;
  height: 81px;
  overflow: hidden;
  position: relative;
}

#images{
  display: block;
  width: 1500px;
  min-width: 650px;
  position: absolute;
} 
```

# c - 错误：预期的标识符或数字常量之前的“（”

> ID：14966792
> 
> 赞同：1
> 
> 时间：2013-02-19T20:30:29.257
> 
> 标签：c, compiler-errors, kernel, header-files

编译内核时出错，这真的让我很头疼。无法弄清楚出了什么问题。多行宏定义已被换行符转义。

实际错误是

```
include/linux/mmc/sdio_func.h:169:2: error: expected identifier or '(' before ')' token 
```

触发错误的头文件

```
/*
 *  include/linux/mmc/sdio_func.h
 *
 *  Copyright 2007-2008 Pierre Ossman
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or (at
 * your option) any later version.
 */

#ifndef MMC_SDIO_FUNC_H
#define MMC_SDIO_FUNC_H

#include <linux/device.h>
#include <linux/mod_devicetable.h>

#include <linux/mmc/pm.h>

struct mmc_card;
struct sdio_func;

typedef void (sdio_irq_handler_t)(struct sdio_func *);

/*
 * Structure used to hold embedded SDIO device data from platform layer
 */
struct sdio_embedded_func {
    uint8_t f_class;
    uint32_t f_maxblksize;
};

/*
 * SDIO function CIS tuple (unknown to the core)
 */
struct sdio_func_tuple {
    struct sdio_func_tuple *next;
    unsigned char code;
    unsigned char size;
    unsigned char data[0];
};

/*
 * SDIO function devices
 */
struct sdio_func {
    struct mmc_card     *card;      /* the card this device belongs to */
    struct device       dev;        /* the device */
    sdio_irq_handler_t  *irq_handler;   /* IRQ callback */
    unsigned int        num;        /* function number */

    unsigned char       class;      /* standard interface class */
    unsigned short      vendor;     /* vendor id */
    unsigned short      device;     /* device id */

    unsigned        max_blksize;    /* maximum block size */
    unsigned        cur_blksize;    /* current block size */

    unsigned        enable_timeout; /* max enable timeout in msec */

    unsigned int        state;      /* function state */
#define SDIO_STATE_PRESENT  (1<<0)      /* present in sysfs */

    u8          tmpbuf[4];  /* DMA:able scratch buffer */

    unsigned        num_info;   /* number of info strings */
    const char      **info;     /* info strings */

    struct sdio_func_tuple *tuples;
};

#define sdio_func_present(f)    ((f)->state & SDIO_STATE_PRESENT)

#define sdio_func_set_present(f) ((f)->state |= SDIO_STATE_PRESENT)

#define sdio_func_id(f)     (dev_name(&(f)->dev))

#define sdio_get_drvdata(f) dev_get_drvdata(&(f)->dev)
#define sdio_set_drvdata(f,d)   dev_set_drvdata(&(f)->dev, d)
#define dev_to_sdio_func(d) container_of(d, struct sdio_func, dev)

/*
 * SDIO function device driver
 */
struct sdio_driver {
    char *name;
    const struct sdio_device_id *id_table;

    int (*probe)(struct sdio_func *, const struct sdio_device_id *);
    void (*remove)(struct sdio_func *);

    struct device_driver drv;
};

#define to_sdio_driver(d)   container_of(d, struct sdio_driver, drv)

/**
 * SDIO_DEVICE - macro used to describe a specific SDIO device
 * @vend: the 16 bit manufacturer code
 * @dev: the 16 bit function id
 *
 * This macro is used to create a struct sdio_device_id that matches a
 * specific device. The class field will be set to SDIO_ANY_ID.
 */
#define SDIO_DEVICE(vend,dev) \
    .class = SDIO_ANY_ID, \
    .vendor = (vend), .device = (dev)

/**
 * SDIO_DEVICE_CLASS - macro used to describe a specific SDIO device class
 * @dev_class: the 8 bit standard interface code
 *
 * This macro is used to create a struct sdio_device_id that matches a
 * specific standard SDIO function type.  The vendor and device fields will
 * be set to SDIO_ANY_ID.
 */
#define SDIO_DEVICE_CLASS(dev_class) \
    .class = (dev_class), \
    .vendor = SDIO_ANY_ID, .device = SDIO_ANY_ID

extern int sdio_register_driver(struct sdio_driver *);
extern void sdio_unregister_driver(struct sdio_driver *);

/*
 * SDIO I/O operations
 */
extern void sdio_claim_host(struct sdio_func *func);
extern void sdio_release_host(struct sdio_func *func);

extern int sdio_enable_func(struct sdio_func *func);
extern int sdio_disable_func(struct sdio_func *func);

extern int sdio_set_block_size(struct sdio_func *func, unsigned blksz);

extern int sdio_claim_irq(struct sdio_func *func, sdio_irq_handler_t *handler);
extern int sdio_release_irq(struct sdio_func *func);

extern unsigned int sdio_align_size(struct sdio_func *func, unsigned int sz);

extern u8 sdio_readb(struct sdio_func *func, unsigned int addr, int *err_ret);
extern u8 sdio_readb_ext(struct sdio_func *func, unsigned int addr, int *err_ret,
    unsigned in);
extern u16 sdio_readw(struct sdio_func *func, unsigned int addr, int *err_ret);
extern u32 sdio_readl(struct sdio_func *func, unsigned int addr, int *err_ret);

extern int sdio_memcpy_fromio(struct sdio_func *func, void *dst,
    unsigned int addr, int count);
extern int sdio_readsb(struct sdio_func *func, void *dst,
    unsigned int addr, int count);

extern void sdio_writeb(struct sdio_func *func, u8 b,
    unsigned int addr, int *err_ret);
extern void sdio_writew(struct sdio_func *func, u16 b,
    unsigned int addr, int *err_ret);
extern void sdio_writel(struct sdio_func *func, u32 b,
    unsigned int addr, int *err_ret);

extern int sdio_memcpy_toio(struct sdio_func *func, unsigned int addr,
    void *src, int count);
extern int sdio_writesb(struct sdio_func *func, unsigned int addr,
    void *src, int count);

extern unsigned char sdio_f0_readb(struct sdio_func *func,
    unsigned int addr, int *err_ret);
extern void sdio_f0_writeb(struct sdio_func *func, unsigned char b,
    unsigned int addr, int *err_ret);

extern mmc_pm_flag_t sdio_get_host_pm_caps(struct sdio_func *func);
extern int sdio_set_host_pm_flags(struct sdio_func *func, mmc_pm_flag_t flags);

#endif 
```

第 169 行是 #endif 之前的最后一行代码，但看到它我就是不知道它有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:34:27.857

`mmc_pm_flag_t`编译器不知道类型。您是否包含正确的标题？如果是，请检查标题并查看是否需要启用某些宏。

# sql - 它是一个缓慢的查询吗？可以改进吗？

> ID：14966797
> 
> 赞同：5
> 
> 时间：2013-02-19T20:30:41.770
> 
> 标签：sql, oracle, query-optimization, subquery, correlated-subquery

我正在阅读 SQLZOO“ [SELECT 教程中](http://sqlzoo.net/wiki/SELECT_within_SELECT_Tutorial)的 SELECT ”，这是完成这项工作的查询之一（任务**7**）

> 世界（名称、大陆、地区、人口、gdp）

```
SELECT w1.name, w1.continent, w1.population 
FROM world w1
WHERE 25000000 >= ALL(SELECT w2.population FROM world w2 WHERE w2.continent=w1.continent) 
```

我的问题是关于这种查询的有效性。子查询将针对主查询的每一行（国家）运行，因此重复地重新填充给定大陆的 ALL 列表。

1.  我应该担心还是 Oracle 优化会以某种方式处理它？
2.  可以在没有相关子查询的情况下对其重新编程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T21:01:23.103

首先，您需要了解 oracle 如何将此查询转换为评估。

```
SELECT w1.name
     , w1.continent
     , w1.population 
FROM world w1
WHERE 25000000 >= ALL(SELECT w2.population 
                       FROM world w2 
                      WHERE w2.continent=w1.continent
                     ); 
```

现在优化器将使用 ALL 比较运算符后跟子查询的条件转换为使用 ANY 比较运算符和互补比较运算符的等效条件

```
 SELECT w1.name
        , w1.continent
       , w1.population 
  FROM world w1
   WHERE NOT(25000000 < ANY (SELECT w2.population 
                        FROM world w2 
                      WHERE w2.continent=w1.continent)
          ); 
```

然后，优化器使用带有 ANY 比较运算符的条件转换规则将第二个查询进一步转换为以下查询，然后是相关子查询：

```
 SELECT w1.name
       , w1.continent
       , w1.population 
   FROM world w1
  WHERE
     NOT EXISTS (SELECT w2.population 
                  FROM world w2 
                 WHERE w2.continent=w1.continent
                   AND 25000000 < w2.population
                ); 
```

这是我从 oracle 源[链接中获取的](http://docs.oracle.com/cd/B10501_01/server.920/a96533/opt_ops.htm#1005334)

对于您的问题：

1.  是的，oracle 会处理这个问题，正如转换所暗示的那样，oracle 如何转换上述查询。但更好地理解这个最终结果查询是如何工作的。
2.  是的，这可以在没有相关子查询的情况下完成，但无论如何你必须加入同一个表，因为你需要比较表中具有相同大陆的其他记录。[*如果我错了，请纠正我*]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T08:23:57.767

如果您想在没有关联子查询的情况下重写查询，这是一种方法：

```
SELECT w1.name, w1.continent, w1.population 
FROM world w1
  JOIN
    ( SELECT continent, MAX(population) AS max_population
      FROM world
      GROUP BY continent
    ) c
    ON c.continent = w1.continent
WHERE 25000000 >= c.max_population ; 
```

我并不是说这会更快。Oracle 的优化器非常好，这是一个简单的整体查询，但是您编写它。这是另一个简化：

```
SELECT w1.name, w1.continent, w1.population 
FROM world w1
  JOIN
    ( SELECT continent
      FROM world
      GROUP BY continent
      HAVING MAX(population) <= 25000000 
    ) c
    ON c.continent = w1.continent ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T08:16:23.017

您可以简化此操作，而无需扫描表两次：

```
select a.name, a.continent, a.population, a.max_pop
  from (select w1.name, w1.continent, w1.population, 
               max(w1.population) over (partition by w1.continent) max_pop
          from world w1
       ) a 
where 25000000 >= a.max_pop; 
```

# wpf - 使用 Horizo ntalContentAlignment 属性将文本与 ContentControl 对齐

> ID：14966804
> 
> 赞同：5
> 
> 时间：2013-02-19T20:30:56.110
> 
> 标签：wpf, alignment, text-alignment, text-align

我正在尝试将“文本对齐”应用于 ContentControl。由于 ContentControl 没有像 TextBlock 那样的水平或垂直文本对齐属性，因此我尝试使用 ContentControl 的 Horizo​​ntalContentAlignment 属性。

我的问题是我不能让它与 ContentControl 本身一起工作。

在我的示例中，我有一个显示“hello world”的内容控件和一个显示“更改它”的按钮。

当我单击按钮时，我在内容控件和按钮上设置了 Horizo​​ntalContentAlignment。按钮的内容会发生变化，但内容控件的内容不会发生变化。

这是我的 XAML 代码：

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <ContentControl x:Name="ctrl" Width="525">
        Hello World!
    </ContentControl>
    <Button x:Name="btn" Grid.Row="1" Content="Change It" Click="btn_Click"/>
</Grid>
</Window> 
```

这是我的按钮单击事件的 VB.NET 代码：

```
Class MainWindow 

  Private Sub btn_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
    If (ctrl.HorizontalContentAlignment = HorizontalAlignment.Left) Then
        ctrl.HorizontalContentAlignment = HorizontalAlignment.Right
        btn.HorizontalContentAlignment = Windows.HorizontalAlignment.Right
    Else
        ctrl.HorizontalContentAlignment = HorizontalAlignment.Left
        btn.HorizontalContentAlignment = Windows.HorizontalAlignment.Left
    End If
    ctrl.UpdateLayout()
  End Sub

End Class 
```

由于各种原因，我无法用文本块替换我的内容控件，但我仍然需要能够对齐内容。

编辑：

虽然 Narohi 解决了建议的工作，但我仍然对内容控件的 Horizo​​ntalContentAlignment 属性不对齐内容的原因感到困惑。

我尝试了一个标签控件（继承自 ContentControl），它的 Horizo​​ntalContentAlignment 属性正确对齐了内容。

（再次编辑：我不再对此感到困惑，似乎在所有情况下都没有正确使用 Horizo​​ntalContentAlignment。）

这是我更新的 XAML 代码：

```
<Window x:Class="MainWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <ControlTemplate x:Key="AlignmentAwareControl" TargetType="ContentControl">
            <ContentPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
    </ControlTemplate>
</Window.Resources>
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <ContentControl x:Name="ctrlTxt" Grid.Row="0"
                    Template="{StaticResource AlignmentAwareControl}" 
                    HorizontalContentAlignment="Center" Padding="0">Hello World Content Control!</ContentControl>
    <Label x:Name="ctrl" Grid.Row="1"  HorizontalContentAlignment="Center" Padding="0">Hello World Label!</Label>
    <ContentControl x:Name="ctrlImg" Grid.Row="2" 
                    Template="{StaticResource AlignmentAwareControl}"
                    HorizontalContentAlignment="Center">
        <Image Source="C:\Users\Frinavale\Pictures\Business_Woman.jpg"/>
    </ContentControl>

    <Button x:Name="btn" Grid.Row="3" Content="Change It" Click="btn_Click"/>
</Grid>
</Window> 
```

这是我更新的 VB.NET 代码：

```
Class MainWindow 

  Private Sub btn_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
    If (ctrl.HorizontalContentAlignment = HorizontalAlignment.Left) Then
        ctrlImg.SetValue(ContentControl.HorizontalContentAlignmentProperty, Windows.HorizontalAlignment.Right)
        ctrlTxt.SetValue(ContentControl.HorizontalContentAlignmentProperty, Windows.HorizontalAlignment.Right)
        ctrl.SetValue(ContentControl.HorizontalContentAlignmentProperty, Windows.HorizontalAlignment.Right)
        btn.HorizontalContentAlignment = Windows.HorizontalAlignment.Right
    Else
        ctrlImg.SetValue(ContentControl.HorizontalContentAlignmentProperty, Windows.HorizontalAlignment.Left)
        ctrlTxt.SetValue(ContentControl.HorizontalContentAlignmentProperty, Windows.HorizontalAlignment.Left)
        ctrl.SetValue(ContentControl.HorizontalContentAlignmentProperty, Windows.HorizontalAlignment.Left)
        btn.HorizontalContentAlignment = Windows.HorizontalAlignment.Left
    End If
    ctrl.UpdateLayout()
  End Sub
End Class 
```

期待你的建议

-弗林尼

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T21:14:05.870

在 Blend 中打开 ContentControl 的默认控件模板会揭示您原来的方法不起作用的原因。

```
<ControlTemplate TargetType="{x:Type ContentControl}">
    <ContentPresenter/>
</ControlTemplate> 
```

默认模板对继承自 Control 的 Horizo​​ntalContentAlignment 属性没有任何作用。将其与 Label 的默认模板并列。

```
<ControlTemplate TargetType="{x:Type Label}">
    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
        <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

正如我们所见，Label 实际上绑定到 Horizo​​ntalContentAlignment。WPF 控件是无外观的，因此无法保证当前 ControlTemplate 会遵守某个属性。我推测 WPF 设计者不尊重 Horizo​​ntalContentAlignment 属性，因为人们通常将内容放置在其中独立于 ContentControl 的属性，或者他们假设如果有人要使用这样的通用控件，他们会提供自己的模板，例如...

```
<ContentControl x:Name="ctrl" Width="525">
    <ContentControl.Template>
        <ControlTemplate TargetType="ContentControl">
            <Grid>
                <ContentPresenter VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
            </Grid>
        </ControlTemplate>
    </ContentControl.Template>
    Hello World!
</ContentControl> 
```

# svn - SVN 钩子不起作用

> ID：14966807
> 
> 赞同：4
> 
> 时间：2013-02-19T20:31:11.937
> 
> 标签：svn, hook, commit

我有一个分支和主干的服务器存储库。分支是所有团队成员的存储库。我试图`svn hooks`只在分支下的仓库中使用，但它似乎不能正常工作。以下是我尝试采取的步骤：

1.  `my_repo`从远程服务器的签出`branch/my_repo`

2.  由于本地 repo`my_repo`没有任何内容，我在本地创建了一个新的 svn repo 并将包括`/hooks`文件夹在内的所有内容复制到`my_repo`.

3.  我在其中创建了一个空文件`my_repo`并添加了一行文本。然后`svn add`这个文件。

4.  修改了`my_repo/hooks/pre-commit.tmpl`文件并使其始终不通过错误代码 1。现在它看起来像：

```
#!/bin/sh
1号出口

```

1.  复制`pre-commit.tmpl`到 pre-commit 并将 pre-commit 的执行许可添加到我自己

2.  服务器包含其他人的现在服务器的结构是这样的：

```
- 服务器
    - 分支
        - my_repo
            - 我的文件
            - 挂钩
                - 预提交
        - 汤姆的回购
        - 其他团队成员的回购
    - 树干

```

1.  在签出的仓库中，我使用以下方式提交了更改：`svn commit -m "dumb change"`

现在从这里我应该无法提交，它应该给我一个代码 1 的错误，对吗？但我在任何地方都看不到它。

1.  然后我尝试将 hooks 文件夹放在顶层，并与分支和树干处于同一水平。即结构看起来像：

```
-服务器
    - 分支机构
        - my_repo
            - 我的文件
        - 汤姆的回购
        - 其他团队成员的回购
    - 树干
    - 挂钩
        - 预提交

```

但是，仍然无法正常工作。叹...

但是，在 David 的帮助下，我弄清楚了该怎么做以及出了什么问题： 1\. 强调：hooks 文件夹的所有权应该与创建存储库的人相同。因此，我不得不要求所有者将挂钩文件添加到服务器。我没有在服务器上创建存储库，因此这些文件在我的工作目录中是不可见的。2.现在这是我尝试过的：

```
  1）在我自己的Linux系统上，我`svnadmin create`一个新的存储库，可能称为test_server：其中有文件夹：confs，db，hooks，locks；文件：格式，readme.txt
  2）在同一级别上，mkdir 一个新文件夹（称为working_dir）作为您的本地工作目录并从test_server 签出。现在 working_dir 包含一个名为 test_server 的文件夹，它是空的。您在步骤 1 中看不到任何文件夹或文件
  3) 如上所述修改 test_server 的 hooks 文件。
  4）尝试添加一个文件并在working_dir/test_server文件夹中的文件中添加一个新行并提交。
  5）现在您应该看到提交失败并显示消息：svn：提交被预提交挂钩（退出代码 1）阻止，没有输出。

```

非常感谢大卫和任何人早些时候发表评论！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T03:10:27.607

当您运行挂钩时，STDOUT（通常由`echo`语句产生）被禁用。这意味着您的脚本不能使用 STDOUT 打印出任何内容，即使它已被重定向到文件。

相反，您需要打开另一个文件描述符而不是使用`1`(STDOUT)。您可以使用该`exec`命令打开另一个文件描述符，然后将其通过管道传输到文件中：

```
exec 4> $my_file  #Opening my_file for writing
echo "This is going to $my_file" >&4 
```

STDERR 也被*重定向*。收集 STDERR 的输出并将其发送回调用客户端，但仅当挂钩返回非零退出代码时。这为您提供了一种与客户端沟通挂钩失败原因的方法。

您还必须小心，因为挂钩运行的环境已被清除。偶数`$PATH`为空。

这些是钩子脚本可以在命令行中正常运行的一些原因，但当它作为钩子执行时则不行。

如果您不相信钩子正在工作，只需将其设置为以非零退出代码退出。如果您从 Subversion 收到交易失败的消息，您就知道钩子脚本已执行。

我还建议您至少使用`svnserve`作为 Subversion 服务器——即使您是唯一使用存储库的人。`file://`即使我是唯一一个使用存储库的人，我也从不使用。该`svnserve`过程使用起来非常简单，而且相当轻巧。

另外，永远不要`svn`在钩子脚本中使用。改为使用`svnlook`。

* * *

# 附录

我想非常非常清楚地说明这一点。我们需要同意一些定义：

*   SERVER 是运行 Subversion 存储库的机器。您使用该命令`svnadmin create foo`创建了一个`foo`将充当存储库本身的目录。
*   REPOSITORY DIRECTORY 是该`svnadmin create`命令在服务器上创建的目录。这是存储库的服务器端。您***不会***在此处看到您已签入 Subversion 的任何文件。相反，您将看到一个`hooks`目录和一个`db`目录。这是服务器用来跟踪其更改的内容。
*   `svn checkout`WORKING DIRECTORY 是您为签出项目的特定版本所做的目录。
*   `svn`REPOSITORY 是您使用各种命令（如`svn ls`or`svn log`或）时获得的 REPOSITORY DIRECTORY 的虚拟视图`svn co`。这不是存储库目录，而是存储库的视图。

好的，现在我们解决了这个问题：

Hook 脚本存放在 REPOSITORY DIRECTORY 目录下`hooks`。当您创建存储库目录时，已经有一个子目录调用`hooks`了一些用于挂钩脚本的模板。这些将有一个`*.tmpl`后缀。要制作钩子，您需要用钩子脚本替换其中一个脚本，并删除该`*.tmpl`后缀。钩子脚本必须具有可执行权限并且归运行 Subversion SERVER 进程的用户所有。（用户运行`httpd`或`svnserve`服务器上的命令）。

挂钩适用于整个存储库。您不能仅在特定分支受到影响时才告诉钩子不要触发。但是，您的钩子脚本可以查看文件所在的位置并据此采取行动。我有一个[预提交钩子](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)可以做到这一点。它使用控制文件根据文件的位置确定需要采取的操作。然而，每次提交发生时，即使它不需要做任何事情，这个钩子也会触发。

我希望这回答了你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:58:41.007

您是否尝试过在其他地方使用输出文件，例如`/tmp`？听起来您正试图写回您的工作副本目录，所以钩子脚本可能无法访问那里？

请注意，该钩子将以任何运行 SVN*服务器进程*的用户身份运行，而不是 SVN*客户端*。因此，如果您使用的是 Apache WebDAV 类型的访问，它将是 Apache 的用户（我认为）；如果使用 SSH 访问，则为`svn+ssh://user@path`语法中列出的用户；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:46:33.157

> 修改了 hooks/pre-commit.tmpl 文件，现在看起来像

预提交钩子需要命名为预提交。pre-commit.tmpl 只是一个示例文件，永远不会运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T02:41:10.003

看了你的问题，感觉有点迷茫。我来这里只是为了确保您的理解是正确的：

Subversion 中没有“签出回购”之类的东西。我们有 repo（通常在远程服务器中），从该 repo 签出后，我们有一个本地**工作副本**。Hooks 是在存储库中发生的事情，而不是本地工作副本。

根据您对步骤的描述，这就是我得到的：

1.  从远程存储库签出：远程服务器

2.  由于签出的*工作副本*没有任何内容，我在本地创建了一个新的 svn 存储库，并将包括 /hooks 文件夹在内的所有内容复制到我签出的*工作副本*中。

3.  我在签出的*工作副本*中创建了一个空文件并添加了一行文本。然后svn添加这个文件。

4.  *修改了工作副本*中的 hooks/pre-commit.tmpl 文件，现在它看起来像：（已删除）

5.  为所有用户添加执行许可并将 pre-commit.tmpl 复制到 pre-commit *（这些都发生在工作副本中）*

6.  在签出的*工作副本*中，我使用以下命令提交了更改： svn commit -m "dumb change"

如果我的理解是正确的，那么您只是误解了钩子的使用。钩子是放在存储库中的东西，而不是工作副本。当您提交（或执行其他操作）时，Hook 在存储库计算机上运行，​​而不是在本地计算机上运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T11:22:04.297

从 tmpl 复制并将 exec 添加到 hooks 脚本，如下所示

```
cp post-commit.tmpl post-commit
chmod +x post-commit 
```

# java - 问题覆盖 tostring

> ID：14966808
> 
> 赞同：0
> 
> 时间：2013-02-19T20:31:14.537
> 
> 标签：java, overriding, tostring

我想在`Ship`类的`toString`方法中覆盖`CargoShip`类的`toString`方法，这样控制台就不会打印船的建造年份。我试过这样做，但它仍然打印年份。我不确定我是否对覆盖进行了错误的编码，或者问题是否与在`ShipDemo`类中调用方法的方式有关。

船级：

```
public class Ship {
    public String shipName;
    public String yearBuilt;

    public Ship() {
    }

    public Ship(String name, String year) {
        shipName = name;
        yearBuilt = year;
    }

    public void setShipName(String name) {
        shipName = name;
    }

    public void setYearBuilt(String year) {
        yearBuilt = year;
    }

    public String getShipName() {
        return shipName;
    }

    public String getYearBuilt() {
        return yearBuilt;
    }

    public String toString() {
        //return toString() + " Name: " + shipName
        //+ "\n Year Built: " + yearBuilt;
        String str;
        str = " Name: " + shipName + "\n Year Built: " + yearBuilt;

        return str;
    }
} 
```

货船类：

```
public class CargoShip extends Ship {
    public int capacity;

    public CargoShip() {
    }

    public CargoShip(int maxCap, String name, String year) {
        super(name, year);
        capacity = maxCap;
    }

    public int getCapacity() {
        return capacity;
    }

    public void setCapacity(int cap) {
        cap = capacity;
    }

    public String toString() {
        return super.toString() + " Name: " + getShipName()
                + " Tonnage Capacity: " + getCapacity();
    }
} 
```

ShipDemo类：

```
public class ShipDemo {
    public static void main(String[] args) {
        // Array Reference
        Ship[] shiptest = new Ship[3];

        // Elements in array set to ship type
        shiptest[0] = new Ship();
        shiptest[1] = new CargoShip();
        shiptest[2] = new CruiseShip();

        // Ship 1
        shiptest[0].setShipName("Manitou ");
        shiptest[0].setYearBuilt("1936 ");

        // Ship 2 ; Cargoship
        shiptest[1] = new CargoShip(13632, "SS Edmund Fitzgerald", "1958");

        // Ship 3 ; Cruiseship
        shiptest[2] = new CruiseShip(2620, "RMS Queen Mary 2", "2004");

        // loop to print out all ship info
        for (int i = 0; i < shiptest.length; i++) {
            // Output
            System.out.println("Ship " + i + " " + shiptest[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:33:42.153

在`CargoShip`您有以下内容：

```
public String toString()
{       
    return super.toString() + " Name: " + getShipName() + " Tonnage Capacity: "      + 
    getCapacity();    
} 
```

通过调用`super.toString()`，您实际上是在调用父类`toString()`方法，其中包括年度打印。您应该删除该方法调用并将返回的字符串更改为仅包含您要显示的信息。

覆盖父方法意味着提供具有相同名称、参数列表、返回类型和可见性的方法，但实现可能不同（方法体）。您无需调用`super`即可将其视为压倒一切。

您可能希望在`CargoShip`：

```
public String toString()
{       
    return " Name: " + getShipName() + " Tonnage Capacity: " + getCapacity();    
} 
```

# symfony - CKeditor 使用自定义配置按类查找

> ID：14966811
> 
> 赞同：1
> 
> 时间：2013-02-19T20:31:27.900
> 
> 标签：symfony, ckeditor, wysiwyg

我很困惑如何让ckeditor按类查找

```
<script>
    CKEDITOR.replace( 'chillair_sitebundle_pagetype[content]', {
        filebrowserBrowseUrl : '{{ ['http://', app.request.host, asset('libraries/elfinder/elfinder.html')]|join }}',
    });
</script> 
```

目标是按类替换但是 findAll 不支持自定义配置我需要在页面中进行配置，因为渲染主机和资产函数等变量很重要，所以我不能将配置电影到 config.js

# javascript - Caroufredsel 无限线性缓动在最后一张适合屏幕的图像之后添加边距

> ID：14966812
> 
> 赞同：3
> 
> 时间：2013-02-19T20:31:29.357
> 
> 标签：javascript, jquery, carousel, caroufredsel

我在[http://chiaroscurodev.telegraphbranding.com/](http://chiaroscurodev.telegraphbranding.com/)使用 CarouFredsel jQuery 插件，如您所见，它正在计算在给定浏览器宽度的情况下适合屏幕的整个图像的数量。然后在滚动下一个图像之前在最后一个图像之后添加边距。

我的代码：

```
$("#carousel").carouFredSel({
            width       : "100%",
            auto: { 
                duration        : 40000,
                easing          : "linear",
                timeoutDuration : 0,
                pauseOnHover    : "immediate"
            }

        }); 
```

我希望轮播可以无限滚动 100% 的浏览器，而无需在每个图像后添加任何边距，只是不断地显示图像流。

另外，有谁知道我如何实现一个功能，当您单击图像时，它会滑动轮播以使图像在浏览器中居中？

谢谢你的帮助。

# r - 复平面中的多个根与 R

> ID：14966814
> 
> 赞同：7
> 
> 时间：2013-02-19T20:31:33.450
> 
> 标签：r, complex-numbers

我一直在尝试找到一个函数来返回方程的所有复杂解，例如：

```
16^(1/4) = 2+i0,  -2+i0,  0+i2,  0-i2 
```

就目前而言，如果我进入`16^(1/4)`控制台，它只返回 2。我可以为此编写一个函数，但我想知道在 R 中是否有一种简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T20:44:35.860

你需要`polyroot()`：

```
polyroot(z = c(-16,0,0,0,1))
# [1]  0+2i -2-0i  0-2i  2+0i 
```

其中`z`是“升序多项式系数向量”。

我在上面的例子中传递的向量`z`是这个等式的一个紧凑表示：

```
-16x^0 + 0x^1 + 0x^2 + 0x^3 + 1x^4 = 0

                          x^4 - 16 = 0

                               x^4 = 16

                                 x = 16^(1/4) 
```

* * *

**编辑：**

如果`polyroot`'s 的语法让您感到困扰，您只需编写一个包装函数，为您提供一个更好（如果不太通用）的界面：

```
nRoot <- function(x, root) {
    polyroot(c(-x, rep(0, root-1), 1))
}
nRoot(16, 4)
# [1]  0+2i -2-0i  0-2i  2+0i
nRoot(16, 8)
# [1]  1.000000+1.000000i -1.000000+1.000000i -1.000000-1.000000i
# [4]  1.000000-1.000000i  0.000000+1.414214i -1.414214-0.000000i
# [7]  0.000000-1.414214i  1.414214+0.000000i 
```

# .htaccess - 仅强制主页为非 ssl

> ID：14966816
> 
> 赞同：0
> 
> 时间：2013-02-19T20:31:39.723
> 
> 标签：.htaccess, ssl

我需要编写一个仅将主页强制为非 ssl 的 htaccess

所以如果你要去 https://www. 123.com 或[https://123.com](https://123.com)它将重定向/强制它转到 http://www。123.com 或[http://123.com](http://123.com)。

我只希望在主页上进行此更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:51:44.917

我没有要测试的 https 框，但我认为这些规则应该可以满足您的要求：

```
<IfModule mod_rewrite.c>

RewriteEngine On 

# Only rewrite if using HTTPS and that we're on the index page, then redirect to http
RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} ^/index.[a-z]+$ [NC]
RewriteRule .+ http://%{SERVER_NAME}%{REQUEST_URI} [R,QSA]

</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:51:40.193

RewriteCond %{SERVER_PORT} 443 RewriteRule ^$ [http://eosworldwide.com/](http://eosworldwide.com/) [L,R=301]

# c# - Main 方法中的 Try/Catch 块仅适用于调试器

> ID：14966817
> 
> 赞同：0
> 
> 时间：2013-02-19T20:31:43.327
> 
> 标签：c#, winforms, try-catch

我有一个问题（C#、WinForm）：
有一个代码（Program.cs）：

> static void Main()
> {
> try
> {
> Application.Run(new Form());
> }
> catch (Exception e)
> {
> // 做某事。（也有 e）
> }
> }

当我从 VisualStudio 运行代码时，try-catch 块工作正常。
但是如果我在 VisualStudio 之外运行代码，则会抛出默认错误消息，并且不会运行 try-catch 块。

当我尝试时，我使用了字典并调用了未定义的键，这会引发异常。（在 Form1.cs 中）
我尝试删除 (Exception e) 部分。

谢谢您的帮助！

# javascript - 测试 Mocha 中抛出的错误

> ID：14966821
> 
> 赞同：102
> 
> 时间：2013-02-19T20:31:50.743
> 
> 标签：javascript, testing, mocha.js, chai

我希望能在这个问题上找到一些帮助。我正在尝试为我正在编写的应用程序编写测试。我已将问题提炼为以下示例代码。我想测试是否引发了错误。我使用 Testacular 作为测试运行程序，以 mocha 作为框架，chai 作为断言库。测试运行，但测试失败，因为抛出了错误！任何帮助是极大的赞赏！

```
function iThrowError() {
    throw new Error("Error thrown");
}

var assert = chai.assert,
    expect = chai.expect;
describe('The app', function() {
    describe('this feature', function() {
        it("is a function", function(){
            assert.throw(iThrowError(), Error, "Error thrown");
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-07-22T17:14:04.170

你没有以`assert.throws()`正确的方式传递你的功能。

该`assert.throws()`函数需要一个函数作为其第一个参数。在您的代码中，您正在调用 iThrowError 并在调用`assert.throws()`.

基本上，改变这个：

```
assert.throws(iThrowError(), Error, "Error thrown"); 
```

对此：

```
assert.throws(iThrowError, Error, "Error thrown"); 
```

应该可以解决您的问题。

带参数：

```
assert.throws(() => { iThrowError(args) }, Error); 
```

或者

```
assert.throws(function() { iThrowError(args) }, Error, /Error thrown/); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-11-07T20:06:44.663

添加到[最上面的答案](https://stackoverflow.com/a/17793483/504793)，如果你需要调用你的函数作为测试的一部分（即你的函数应该只在传递某些参数时抛出错误），你可以将你的函数调用包装在一个匿名函数中，或者，在 ES6+ 中，您可以在箭头函数表达式中传递您的函数。

```
// Function invoked with parameter.
// TEST FAILS. DO NOT USE.
assert.throws(iThrowError(badParam), Error, "Error thrown"); // WRONG!

// Function invoked with parameter; wrapped in anonymous function for test.
// TEST PASSES.
assert.throws(function () { iThrowError(badParam) }, Error, "Error thrown");

// Function invoked with parameter, passed as predicate of ES6 arrow function.
// TEST PASSES.
assert.throws(() => iThrowError(badParam), Error, "Error thrown"); 
```

而且，为了彻底起见，这里有一个更字面的版本：

```
// Explicit throw statement as parameter. (This isn't even valid JavaScript.)
// TEST SUITE WILL FAIL TO LOAD. DO NOT USE, EVER.
assert.throws(throw new Error("Error thrown"), Error, "Error thrown"); // VERY WRONG!

// Explicit throw statement wrapped in anonymous function.
// TEST PASSES.
assert.throws(function () { throw new Error("Error thrown") }, Error, "Error thrown");

// ES6 function. (You still need the brackets around the throw statement.)
// TEST PASSES.
assert.throws(() => { throw new Error("Error thrown") }, Error, "Error thrown"); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-02-21T18:53:49.530

我看到您能够解决您的问题，但无法检查特定错误。要使用 Chai 的 expect/should 语法这样做，您可以使用来自[throw()](http://chaijs.com/api/bdd/#throw)不同签名的参数：

```
@param{ ErrorConstructor } constructor
@param{ String | RegExp } expectederror message
@param{ String } message _optional_ 
```

在您的示例中，您应该能够使用以下任一项：

```
expect(iThrowError).to.throw(/Error thrown/);
expect(iThrowError).to.throw(Error, /Error thrown/);
expect(iThrowError).to.throw(new Error('Error thrown')); 
```

而且（同样，来自 chai 的文档），您可以使用以下方法过滤其他错误消息：

```
expect(iThrowError).to.throw(Error).and.not.throw(/Another Error thrown/); 
```

希望这可以帮助！

# sql - 在 SQL 中增加一个 varchar

> ID：14966824
> 
> 赞同：0
> 
> 时间：2013-02-19T20:31:57.293
> 
> 标签：sql, sql-server

基本上，我想在 SQL 中增加一个 varchar，其值为“ABC001”。

我有将一个添加到 int 的代码，但我不知道如何让它为 varchar 工作：

```
SELECT
  NXT_NO
FROM
  TABLE

UPDATE
  TABLE
SET
  NXT_NO = NXT_NO + 1 
```

如果 NXT_NO 是 varchar，是否有一种简单的方法来增加？

我想：

ABC001 ABC002 ABC003

和

它还需要与：

001, A0001, AB00001

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:40:50.957

好吧，你可以这样做：

```
update table
    set nxt_no = left(next_no, 3) +
                  right('0000000' + cast(substring(next_no, 4, 100)+1 as varchar(255)), 4) 
```

在我看来有点蛮力。

顺便说一句，您可以使用标识列来自动增加 id。如果您想在前面放置一个固定前缀，您可以使用计算列。或者采纳 Bohemian 的建议，将前缀和数字存储在不同的列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:48:45.347

```
update 
    [table] 
set [nxt_no] = case when PATINDEX('%[0-9]%', [nxt_no]) > 0 then 
          left([nxt_no], PATINDEX('%[0-9]%', [nxt_no])-1) -- Text part
          + -- concat
          right( REPLICATE('0', LEN([nxt_no]) - PATINDEX('%[0-9]%', [nxt_no])+1) + convert( varchar, convert(int, right([nxt_no], LEN([nxt_no]) - PATINDEX('%[0-9]%', [nxt_no])+1))+1), LEN([nxt_no]) - PATINDEX('%[0-9]%', [nxt_no])+1)
else 
    [nxt_no] end 
```

# python - 列表的while循环？

> ID：14966828
> 
> 赞同：1
> 
> 时间：2013-02-19T20:32:15.150
> 
> 标签：python, loops, for-loop, while-loop

我对编程很陌生，我有一个快速的问题。我正在尝试为一系列恒星制作高斯函数。但是我希望所有星星的下曲线大小都为 100。我正在考虑做一个while循环，说虽然下曲线的总长度为100。但是，我收到一个错误，我猜它与它是一个列表有关。我正在向你们展示我的代码，看看你们是否可以在这里帮助我。谢谢！

我收到语法错误：无法分配给调用函数

```
import numpy
import random
import math
import matplotlib.pyplot as plt
import matplotlib.mlab as mlab
import scipy
from scipy import stats
from math import sqrt
from numpy import zeros
from numpy import numarray

variance = input("Input variance of the star:")
mean = input("Input mean of the star:")

space=numpy.linspace(-4,1,1000)
sigma = sqrt(variance)

Max = max(mlab.normpdf(space,mean,sigma))
normalized = (mlab.normpdf(space,mean,sigma))/Max

def random_y_pt():
    return random.uniform(0,1)

def random_x_pt():
    return random.uniform(-4,1)

import random

def undercurve(size):
    result = []
    for i in range(0,size):
        y = random_y_pt()
        x = random_x_pt()
        if y < scipy.stats.norm(scale=variance,loc=mean).pdf(x):
            result.append((x))
    return result

size = 1

while len(undercurve(size)) < 100:
     undercurve(size) = undercurve(1)+undercurve(size)
     print undercurve(size)

plt.hist(undercurve(size),bins=20)
plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:43:21.810

如果你的错误是这样`SyntaxError: can't assign to function call`的，那是因为你的线

```
undercurve(size) = undercurve(1)+undercurve(size) 
```

这是试图将右侧的输出设置为 的值`undercurve(size)`，这是您无法做到的。

听起来您实际上只想查看`100`返回的列表中的第一个项目`undercurve(size)`。为此，使用

```
undercurve(size)[:100] 
```

# get - 我在使用超链接将变量从 php 页面传递到另一个 php 页面时遇到问题

> ID：14966831
> 
> 赞同：0
> 
> 时间：2013-02-19T20:32:16.713
> 
> 标签：get

我曾经让代码工作，但我改变了一些东西，它停止工作。$id 被传递到浏览器的地址栏，但不会传递到下一页。我使用了 session_start

```
while($row = mysql_fetch_array($resultd))
 {
$id = $row['id_num'];
echo "Edit&nbsp;&nbsp;"; //ln68
echo "<a href='del.php?id_num = $id'>Delete</a>";
echo $row['id_num'] . " " . $row['first_name'] . " " . $row['last_name'] . ",&nbsp;&nbsp; " . $row['title'] . ",&nbsp;&nbsp; " . $row['city'] . ",&nbsp;&nbsp; " . $row['phone_pri'] . ",&nbsp;&nbsp; " . $row['email_addr']; 
```

回声“

”；}

接收页面没有获取变量。我使用过 $_SESSION、$_GET、$_POST，但似乎没有任何效果。我什至颠倒了 href 行中的值，但仍然没有任何效果。我也在这里使用了 session_start。

这是第 2 页

```
$id = $_POST['id_num'];

// send query
$sql = 'delete FROM `delegate` WHERE `id_num`= $id'; 
```

您的意见将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:36:50.600

您正在使用 GET 请求通过链接传递数据

但在您的第二页中，您使用的是 POST

将其更改为 $id = $_GET['id_num']; 并尝试

并且不要在 href "中使用空格

将其更改为“

空格将被计为一个字符

# jcifs - 您如何知道 JCIFS 的特定实例在哪里运行？

> ID：14966833
> 
> 赞同：0
> 
> 时间：2013-02-19T20:32:21.977
> 
> 标签：jcifs

在我的公司，一年多来，我每天早上都被锁定在我的 Windows 帐户之外。IS 公司不断告诉我，同名的计算机`jcifs3_188_b5`每 20 分钟就会推送一个错误密码。

他们还告诉我这不是公司网络上的计算机，只是告诉我找到这台机器并让它停止这样做。所以，这里有一个真正的侦探工作，因为我不知道 JCIFS 是什么，除了每 20 分钟从我的帐户推送一个错误密码的东西。

JCIFS 系统驻留在哪里，为什么没有人知道它来自哪里？有没有工具可以找到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T08:36:13.030

显然，JCIFS 以这种格式从 IP 地址构造工作站名称：

```
JCIFS<3rd octet>_<4th octet>_<index> 
```

因此，您应该能够从中找到机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:35:38.233

JCIFS 应用程序很可能是从用户的手机上运行的。该程序似乎与移动邮件程序相关联。

# jquery - 隐藏/显示 div 在 IE7 中不起作用

> ID：14966837
> 
> 赞同：0
> 
> 时间：2013-02-19T20:32:46.313
> 
> 标签：jquery, wordpress, internet-explorer-7

我已经接管了一个 WordPress 站点，该站点在单击另一个 div 中的链接时使用 jquery 在框架中显示/隐藏内容。这在除 IE7 之外的所有浏览器中都能完美运行。在 IE7 中，什么也没有发生。什么都没有。而且它不会抛出任何错误。这是我正在使用的代码

HTML：

```
<div id="campaignCards" class="contentBody">
<?php $args = array( 
   'post_type' => 'home_promos', 
   'posts_per_page' => 8,
   'order' =>'ASC' );
     $postcount = 0;
    $loop = new WP_Query( $args );
    while ( $loop->have_posts() ) : $loop->the_post(); ?>
     <a class="slideLink" href="<?php if(get_post_meta($post->ID,     
         'mcb2b_home_promos_link', true)) { echo get_post_meta($post->ID,   
         'mcb2b_home_promos_link', true); } ?>">
     <div class="campaign_card" id="card<?php echo $postcount; ?>">
       <?php the_content();?>
     </div>
     </a>
      <? $postcount++; endwhile; ?> 
</div>          
<div id="homebuttons">
<ul>
    <?php $args = array( 
    'post_type' => 'home_promos', 
    'posts_per_page' => 8,
    'order' =>'ASC' );
      $postcount = 0;
       $loop = new WP_Query( $args );
       while ( $loop->have_posts() ) : $loop->the_post(); ?>
    <li class="campaignPicker">
       <a href="javascript:showonlyone('card<?php echo $postcount; ?>');">
            <?php if (has_post_thumbnail()) {the_post_thumbnail();} ?>
       </a>
    </li>
      <?php  $postcount++; endwhile; ?>
</ul>
</div> 
```

JS

```
function showonlyone(thechosenone) {
      var campaign_card = document.getElementsByTagName("div");
            for(var x=0; x<campaign_card.length; x++) {
                  name = campaign_card[x].getAttribute("class");
                  if (name == 'campaign_card') {
                        if (campaign_card[x].id == thechosenone) {
                        campaign_card[x].style.display = 'block';
                  }
                  else {
                        campaign_card[x].style.display = 'none';
                  }
            }
      }
} 
```

我认为问题出在`var campaign_card = document.getElementsByTagName("div");`但我不熟练使用 jquery 在 IE 中进行调试。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:40:15.693

好吧，您的代码似乎根本没有使用 jQuery。如果您想使用 jquery 的强大功能，我建议您阅读[此处](http://docs.jquery.com/Tutorials)的教程。

无论如何，对于您的问题，您想试试这个：

```
function showonlyone(thechosenone) {
  $(".campaign_card").hide();
  $("#" + thechosenone).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:43:51.240

```
function showonlyone(thechosenone) {
  $('div#' + thechoenone).css('display', 'block');
  $('div.campaign_card').css('display', 'none');
} 
```

试试这个而不是你的函数。请注意，您需要确保已将 jQuery 库作为项目的一部分包含在内。

# android - 如何通过单击按钮从 about 返回上一个活动？

> ID：14966838
> 
> 赞同：2
> 
> 时间：2013-02-19T20:32:46.677
> 
> 标签：android, button, android-activity, dialog, about-box

我试图通过单击按钮从关于对话框返回到主要活动：

```
public class AboutActivity extends Activity implements OnClickListener{
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about);
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    SharedPreferences prefs = getSharedPreferences("com.example.tiocontas",MODE_PRIVATE);
    SharedPreferences.Editor prefsEditor = prefs.edit();
    prefsEditor.putBoolean("FirstTime", false);
    finish();
    //this.onBackPressed();
}
} 
```

我已经尝试了 finish() 和 onBackPressed() 都没有结果，我做错了什么可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:58:49.353

从我在您的代码中可以看到，您的`onClick()`方法没有附加按钮。您可以通过 xml 或编程两种方式执行此操作。

在xml中

```
<Button
...
android:onClick="functionName"/> 
```

然后在您的代码中，定义您在 xml 中命名的函数

```
public void functionName(View v)
{
  // some code
  finish();
} 
```

以编程方式声明您的按钮

```
Button aBtn = (Button) findViewById(R.id.button_id);
aBtn.setOnClickListener(new OnClickListener() {         
    @Override
    public void onClick(View v)
    {
      // some code
      AboutActivity.this.finish()
    }
}); 
```

如果您已经`onClick()`以某种方式将按钮附加到未显示的按钮上，那么您可能正在完成主要活动。在这种情况下，请描述单击按钮并显示主活动时发生的情况

[OnClickListener() 的文档](http://developer.android.com/guide/topics/ui/controls/button.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:57:39.060

您可以在 btnclick 上调用 onBackPressed() 函数，然后可以在类的末尾定义以下代码：

```
 @Override
    public void onBackPressed() {
        super.onBackPressed();
        Intent intent = new Intent(this, YourActivity.class);
        startActivity(intent);
    } 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T20:36:30.713

好像你已经完成了；你以前的活动。从 MainActivity 中删除您的 aboutActivty 中的 finish()。

# datepicker - 更改日期选择器的格式

> ID：14966839
> 
> 赞同：0
> 
> 时间：2013-02-19T20:32:47.023
> 
> 标签：datepicker, uitextfield

如何将日期格式更改为`yy/mm/dd`？

这是我到目前为止所拥有的：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
  if (textField == _celebration)
  {
      UIDatePicker *datePicker = [[UIDatePicker alloc]init];
      [datePicker setDate:[NSDate date]];
      [datePicker addTarget:self action:@selector(updateTextField:) forControlEvents:UIControlEventValueChanged];
      [self.celebration setInputView:datePicker];
  }
}

- (void)updateTextField:(id)sender
{
  UIDatePicker *picker = (UIDatePicker*)self.celebration.inputView;
  self.celebration.text = [NSString stringWithFormat:@"%@",picker.date];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:47:42.307

制作这样的格式化程序

```
NSDateFormatter* format = [[NSDateFormatter alloc]init];
[format setDateFormat:@"YY/MM/dd"]; 
```

像这样从 NSDate 获取格式化的字符串

```
NSString* testDate = [format stringFromDate:[NSDate date]]; 
```

从这样的字符串中获取 NSDate 。

```
NSDate* reformDate = [format dateFromString:testDate]; 
```

如果不在 ARC 中，则释放，否则设置为 nil [格式释放]；或格式=无；

你可以修改你的函数看起来像这样。这会将格式化的日期字符串设置为 UITextField 的文本。

```
- (void)updateTextField:(id)sender
{
    UIDatePicker *picker = (UIDatePicker*)self.celebration.inputView;

    NSDateFormatter* format = [[NSDateFormatter alloc]init];
    [format setDateFormat:@"YY/MM/dd"];

    NSString* formattedDate = [format stringFromDate:picker.date];

    self.celebration.text = formattedDate;

    format = nil;
} 
```

话虽如此，UIDatePicker 本身不支持这样的格式。您可以在此处引用该类。 [UIDatePicker 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)

如果您真的为 datePicker 设置了这种格式，您可能必须构建一个自定义格式。但是，我不鼓励这样做，因为内置的 UIDatepicker 会自动考虑用户的区域设置和语言，而您的格式会将其锁定为您的首选格式（这对于您的用户而言并不总是正确的，具体取决于他们在世界上的位置）。

# sitecore - 在 Sitecore 中使用什么工具按日期和排名进行搜索？

> ID：14966840
> 
> 赞同：2
> 
> 时间：2013-02-19T20:32:50.010
> 
> 标签：sitecore, lucene.net

我想知道以下要求的最佳解决方案是什么：

在 CMS 网站上，我需要根据自由文本关键字研究在 Sitecore 中创建的文章。这些文章是在特定文件夹结构中创建的 Sitecore 项目。

*   内容 ----- 时事通讯 --------V 1 --------V 2

Lucene 是检索基于自由文本的任何文章的最佳选择吗？文章必须根据两个选项显示在屏幕上：按日期或按排名（自由文本关键字在文章中出现的次数）还有其他选项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T21:34:33.227

Lucene 绝对是您的最佳选择，因为它已经被 Sitecore 使用并且使集成变得更加容易。

关于 Lucene 有一篇非常好的文章和演练：

*   [Lucene 查询演练](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/06/LuceneQuery1.aspx)

但最好使用 Advanced Database Crawler：

*   [使用 Sitecore AdvancedDatabaseCrawler Lucene 索引获取最新消息](http://briancaos.wordpress.com/2011/10/13/get-latest-news-using-sitecore-advanceddatabasecrawler-lucene-index/)
*   [使用高级数据库爬虫](http://sitecoredevs.wordpress.com/2012/07/09/using-advanced-database-crawler/)
*   [高级数据库爬虫和动态字段](http://www.letsdositecore.com/advanced-database-crawler-and-dynamic-fields/)

# css - 选择没有子元素的元素

> ID：14966841
> 
> 赞同：10
> 
> 时间：2013-02-19T20:32:50.887
> 
> 标签：css, css-selectors

我有一个页面可能是以下之一：

```
<span id='size'>33</span> 
```

或者

```
<span id='size'>
    <b>33</b>
    <strike>32</strike>
</span> 
```

我想在这两种情况下都获取值 '33'，有没有我可以使用的 CSS 选择器？我尝试使用以下 #size 没有 b 兄弟或 b 这是 #size 兄弟：

```
document.querySelector('#size:not(>b), #size>b').innerText 
```

但是我不断收到错误消息-“错误：SYNTAX_ERR：DOM Exception 12”

根据[w3 Spec](http://www.w3.org/TR/css3-selectors/#negation)仅支持[简单选择器](http://www.w3.org/TR/css3-selectors/#simple-selectors-dfn)，问题是“大于号”（U+003E，>）”被视为[简单选择器](http://www.w3.org/TR/css3-selectors/#simple-selectors-dfn)定义的一部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T20:44:45.980

你不能用常规的 CSS 选择器来做，但是你可以用几行 JS 来做：

```
var element = document.querySelector('#size');
var b = element.querySelector('b');
var text = b ? b.innerText : element.childNodes[0].nodeValue;

console.log(text); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:48:41.087

So really you want significant text (ie other than whitespace, because in your second example there's probably tabs and returns between the `span` start tag and the `b`) of `#size`, or, if that doesn't exist, the significant text of its first element:

```
// Is text just whitespace?
function isWhitespace(text){
    return text.replace(/\s+/,'').length === 0;
}

// Get the immediate text (ie not that of children) of element
function getImmediateText(element){
    var text = '';

    // Text and elements are all DOM nodes. We can grab the lot of immediate descendants and cycle through them.
    for(var i = 0, l = element.childNodes.length, node; i < l, node = element.childNodes[i]; ++i){
    // nodeType 3 is text
        if(node.nodeType === 3){
            text += node.nodeValue;
        }
    }

    return text;
}

function getFirstTextNode(element){
    var text = getImmediateText(element);

    // If the text is empty, and there are children, try to get the first child's text (recursively)
    if(isWhitespace(text) && element.children.length){
        return getFirstTextNode(element.children[0])
    }
    // ...But if we've got no children at all, then we'll just return whatever we have.
    else {
        return text;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:45:53.090

在我们拥有 CSS Level 4 选择器和父选择器的那一天，您将能够使用一个简单的选择器，但现在您不能直接使用它。

您可以迭代找到第一个文本节点，但这是一个 hacky 解决方案：

```
var text = document.getElementById('size').innerHTML.split(/<.*?>/)[0]; 
```

`#size`仅在您对元素的内容有所了解时使用。

# php - 将数据库更新安全地传递到 vpn 之外的服务器

> ID：14966856
> 
> 赞同：0
> 
> 时间：2013-02-19T20:34:11.770
> 
> 标签：php, sql-server, ftp, aes, vpn

我现在花了很长时间试图弄清楚如何将几行从 SonicWall VPN 内的服务器传递到远程 VPS 云服务器。VPN 内的服务器是运行 SQL Server 2005 的 Microsoft 2003，目标服务器是带有 MySQL 的 CentOS 6。我一直无法找到让 CentOS 从 VPN 外部轻松安全地访问 MSSql 服务器的方法。总的来说，我对 SonicWall 或其他防火墙的了解极为有限，我真的不想打开安全风险之门。因此，鉴于此，我提出了以下解决方案：

1) 预定的 PHP 脚本提取行并在密码保护的 excel 文件中以 AES-256 对其进行加密

2) 脚本然后使用 FTP 将 excel 文件上传到我的远程服务器

3) 具有相同加密密钥的远程服务器解密文件并将行上传到 MySQL 数据库。

两个问题：

1) 这是将敏感数据从一台服务器移动到另一台服务器的安全方法吗？

2）有没有更简单的方法来访问我没有想到的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:43:18.613

您涉及 FTP 和文件，本质上是系统到系统的传输，这可能会由于文件锁定而导致麻烦，而且看起来很丑陋。

更好的方法是让远程 CentOS 机器公开一个端口/Web 服务，该服务由 HTTPS 公开，需要客户端身份验证：

1.  您的脚本从某个来源检索行
2.  该脚本将行转换为服务器可以读取的形式
3.  该脚本调用客户端公开的端口，这是一个传出连接，因此应该更容易从 VPN 外部获取（基于可以在 VPN 外部获取 FTP 连接的事实）
4.  该脚本验证服务器端证书并提供它自己的客户端证书并通过 SSL 传输行
5.  CentOS 主机接收行并根据需要处理它们。

使用您当前的方法，您将需要以某种方式保护 FTP 连接，要安全地做到这一点，需要服务和客户端相互验证自己的身份，并且 SSL 在连接协商和协议流方面完成了这方面的大部分繁重工作.

# jquery - Jquery (1.10.1) 菜单覆盖

> ID：14966860
> 
> 赞同：1
> 
> 时间：2013-02-19T20:34:34.073
> 
> 标签：jquery, css, jquery-ui, jquery-ui-menu

*这是我的简短形式的问题：*我想在里面有一个带有菜单的拆分按钮（使用 jquery-ui 完成，请参阅：[jqueryui-demo](http://jqueryui.com/button/#splitbutton)，这**不会影响其他任何东西的定位**。所以第二个按钮不应该移动所有,如果第一个拆分按钮显示它的菜单,在[jsfiddle](http://jsfiddle.net/VUBqK/2/)中明显错误.我知道可以将 css 中的位置属性更改为绝对,但我真的不想计算每个位置(并重新计算如果发生变化或 document.size() 发生变化...

**有没有办法告诉 jquery.menu 它应该覆盖我的菜单？**

jsfiddle 归结为以下内容：

**JavaScript**

```
$(function () {
     $.each($(".key"), convert);

 });

 function convert(index, element) {
     //retrieve button-value
     var key = $(element).text();
     //exchange elements html with the split-button and the menu
     $(element).html(
         '<div><div><button class="KeywordTag">' + key + '</button>
          <button class="selectButton">Options</button></div>
          <ul>
            <li><a href="#" class="addtoquery">Add to Query</a></li>
            <li><a href="#" class="opentab">Open in new Tab</a></li>
            <li><a href="#" class="addtoquerytab">Add to Query in new Tab</a></li>
          </ul></div>');
     //call jquery.button(...) to turn the buttons into good looking buttons the the
     //unordered list into a menu
     //...
     //add event handling
     //...
  } 
```

**CSS**

```
//for round borders...
//I'd probably need to change the position attribute, but I really don't want to
//have to calculate each position by hand...
.KeywordTag {
    -moz-border-topleft-radius: 75px;
    -moz-border-bottomleft-radius: 75px;
    -webkit-border-topleft-radius: 75px;
    -webkit-border-bottomleft-radius: 75px;
    border-bottom-left-radius:75px;
    border-top-left-radius:75px;
}
.selectButton {
    -moz-border-topright-radius: 75px;
    -moz-border-bottomright-radius: 75px;
    -webkit-border-topright-radius: 75px;
    -webkit-border-bottomright-radius: 75px;
    border-bottom-right-radius:75px;
    border-top-right-radius:75px;
} 
```

**html**

```
<!-- Those spans will be exchanged with 
     the actual buttons and menus by the javascript above -->
<span class="key">examplekey</span>
<span class="key">examplekey2</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:44:17.073

因为我今天早上解决了我的问题并且我想为其他人记录解决方案，所以我正在回答我自己的问题。

如果你定义了`<ul>`你`<ul style='position: absolute; z-index=1'>`想要的行为。

请参阅：http: [//jsfiddle.net/crapman/VUBqK/7/](http://jsfiddle.net/crapman/VUBqK/7/)或![示例截图](../Images/30ab7e28cf42d636af94e2aa1b7e2678.png)

# wordpress - IIS 服务器上的第二个 Wordpress 安装

> ID：14966871
> 
> 赞同：1
> 
> 时间：2013-02-19T20:34:59.147
> 
> 标签：wordpress, iis, web-config

我目前在我的服务器根目录中有一个有效的 wordpress 安装，但现在我正在将另一个 wordpress 站点添加到子文件夹“new-site”。

它是一个 IIS 服务器，所以 web.config 文件应该在根目录中有这个，根据 wordpress：

```
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
            <rule name="wordpress" patternSyntax="Wildcard">
                <match url="*" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                <action type="Rewrite" url="index.php" />
            </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

我现在面临的问题：如何修改根的 web.config 文件（如下），以便 /new-site 中的 WP 安装工作正常。（它在我的本地主机上运行良好，我已经更改了 wp-options 中的 URL。新站点上的主页看起来不错，但是如果您单击任何链接，它将成为根站点的错误页面。）谢谢！

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="4294967295" />
            </requestFiltering>
        </security>

        <rewrite>
            <rules>
                <rule name="Main Rule" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php" />
                </rule>
                <rule name="wordpress" patternSyntax="Wildcard">
                    <match url="*" />
                        <conditions>
                            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                        </conditions>
                    <action type="Rewrite" url="index.php" />
                </rule>
            </rules>
        </rewrite>

        <defaultDocument>
            <files>
                <clear />
                <add value="index.php" />
                <add value="index.html" />
                <add value="Default.htm" />
                <add value="Default.asp" />
                <add value="index.htm" />
                <add value="aboutus.html" />
            </files>
        </defaultDocument>

        <handlers>
            <remove name="PHP53_via_FastCGI" />
            <remove name="AboMapperCustom-1045478" />
            <add name="PHP53_via_FastCGI" path="*.php" verb="GET,HEAD,POST" modules="FastCgiModule" scriptProcessor="C:\Program Files (x86)\PHP\v5.3\php-cgi.exe" resourceType="Either" requireAccess="Script" />
        </handlers>   
    </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-21T00:11:03.637

解决了。在子文件夹的 web.config 中添加`<clear />`，使其不受根规则的影响。

```
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <clear />
                <rule name="wordpress" patternSyntax="Wildcard">
            <match url="*" />
              <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
              </conditions>
            <action type="Rewrite" url="index.php" />
          </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

来源：[http ://forums.iis.net/post/1883731.aspx](http://forums.iis.net/post/1883731.aspx)

# .net - 从 Word 文档填写 ASP.NET 表单

> ID：14966882
> 
> 赞同：0
> 
> 时间：2013-02-19T20:35:55.963
> 
> 标签：.net, web-applications, asp.net-mvc-4, ms-word

是否可以填写 ASP.NET 表单 (MVC 4) 来读取（或导入）Word 文档？

**更新**

我们有一个定价协议和报价单的标准文档，我想要实现的是阅读该文档（也许稍后他们想将文档上传到保管箱帐户或类似服务）并填写表格以在应用。该文件包含相同的标题，仅更改项目、价格等。

谢谢你的时间

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:27:55.487

你可以通过两种方式做到这一点：

1.  客户端
    *   a）使用转换器（可执行文件）
    *   b) 使用组件（例如 ActiveX ...）
2.  服务器端

MS Word 文档的服务器端处理对客户和您来说都更容易处理。将文档上传到服务器上的临时文件夹后，您可以轻松访问它，并且由于格式是唯一的并且您知道，因此可以轻松提取数据。然后，您可以将其存储到数据库或在已填写的表单上显示给用户，而客户端可以在该表单中添加任何丢失的数据。

有许多代码示例可用于在[Web](http://www.google.com/#hl=en&tbo=d&output=search&sclient=psy-ab&q=reading+ms+word+using+c#&oq=c#+reading+ms+word&gs_l=hp.1.1.0i30j0i8i30l2.2061.6177.0.9455.18.16.0.2.2.1.501.7114.4-15j1.16.0.les;..0.0...1c.1.3.psy-ab.rtLP1azrDw8&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&bvm=bv.42553238,d.bGE&fp=c20a49455b2cdf23&biw=1200&bih=644)上阅读 MS Word 文档。

# sql - 如何修复 trac 报告中的双重 LEFT JOIN

> ID：14966885
> 
> 赞同：1
> 
> 时间：2013-02-19T20:36:08.833
> 
> 标签：sql, join, trac

我们使用自定义版本的 trac，人们可以根据两个标准为错误评分，让我们称它们为`severity`和`importance`。

为简单起见，假设数据库包含以下表：

桌子`ticket`

```
id | title           | reporter
1  | SQL injection   | Torvalds
2  | Buffer Overflow | Linus
3  | Localization    | bofh 
```

桌子`votes`

```
ticket_id | value | type       | voter
1         | 4     | severity   | Linus
1         | 2     | severity   | Torvalds
1         | 3     | severity   | bofh
1         | 4     | importance | Linus
1         | 3     | importance | Torvalds
2         | 4     | severity   | Linus
2         | 2     | severity   | Torvalds
2         | 1     | importance | Linus
2         | 1     | importance | bofh
3         | 1     | importance | Linus 
```

因此，例如第一行意味着用户`Linus`建议将 4 作为工单 #1 的严重性分数。

现在，我在用于获取平均分数的 trac 报告中有以下 SQL 查询：

```
SELECT t.title, t.reporter, AVG(vs.value), AVG(vi.value), COUNT(vs.value), COUNT(vi.value)
FROM ticket t
LEFT JOIN votes vs ON vs.type = 'severity'   AND vs.ticket_id=t.id
LEFT JOIN votes vi ON vi.type = 'importance' AND vi.ticket_id=t.id; 
```

在我的希望中，这应该返回一个具有以下值的表：

```
title | reporter | severity avg | importance avg | number of sev. votes | number of imp. votes
SQL injection | Torvalds | 3 | 3.5 | 3 | 2 
```

从而告诉我有多少人投了票以及他们的票数是多少。

但是，由于工作方式`LEFT JOIN`，我得到的条目是严重性和重要性投票的笛卡尔积，所以平均值仍然有效，而两个计数都设置为 3x2=6 而不是正确的值。

有没有一种简单的方法来修复这个查询，以便它返回我想要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:46:04.303

将 CASE 语句与聚合函数结合起来：

```
SELECT 
  t.title, 
  t.reporter, 
  SUM(CASE WHEN v.type = 'importance' THEN 1 ELSE 0 END) AS Count_Imp,
  SUM(CASE WHEN v.type = 'severity' THEN 1 ELSE 0 END) AS Count_Sev,
  SUM(CASE WHEN v.type = 'importance' THEN v.value ELSE 0 END) / 
    Count_Imp AS Avg_Imp,
  SUM(CASE WHEN v.type = 'severity' THEN 1 ELSE 0 END) / 
    Count_Sev AS Avg_Sev
FROM 
  ticket t
  LEFT JOIN votes v 
  ON v.ticket_id = t.id; 
```

如果 Trac SQL 不允许您重新使用别名`Count_Imp`，`Count_Sev`您只需在平均计算列中重复这些语句。

# c++ - c ++更新静态int

> ID：14966896
> 
> 赞同：0
> 
> 时间：2013-02-19T20:36:34.920
> 
> 标签：c++

我正在尝试更新静态 int

**测试.h**

```
static int Delay = 0;
void UpdateDelay(); 
```

**测试.cpp**

```
#include "test.h"

void UpdateDelay(){
Delay = 500;
} 
```

**主文件**

```
 #include "test.h"

    int main(){
    UpdateDelay();
    std::cout << Delay << std::endl;
    return 0;

} 
```

输出应该是：500，但它显示：0

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:38:16.917

声明为的全局变量`static`具有**[内部链接](https://stackoverflow.com/questions/1358400/what-is-external-linkage-and-internal-linkage-in-c)**。这意味着每个翻译单元（即`.cpp`文件）都会获得该变量的私有副本。

对一个翻译单元的私有副本所做的更改不会对不同翻译单元持有的同一变量的私有副本产生任何影响。

如果您想共享一个全局变量，请在单个翻译单元中为其提供*一个*定义，并让所有其他翻译单元通过指定关键字的*声明来引用它：*`extern`

**测试.h**

```
extern int Delay;
void UpdateDelay(); 
```

**测试.cpp**

```
#include "test.h"

void UpdateDelay(){
    Delay = 500;
} 
```

**主文件**

```
#include "test.h"

int Delay = 0; // Do not declare this as static, or you will give
               // internal linkage to this variable. That means it
               // won't be visible from other translation units.

int main(){
    UpdateDelay();
    std::cout << Delay << std::endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T20:39:23.033

如果您放入`static int Delay`.h 文件，则每个 .cpp 文件都将拥有自己的唯一实例。

你想使用外部。

测试.h

```
extern int Delay;
void UpdateDelay(); 
```

测试.cpp

```
#include "test.h"
int Delay = 0;

void UpdateDelay()
{
    Delay = 500;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:38:17.700

你不能`static int Delay`在你的.h中声明每个cpp会发生什么是它自己版本的“延迟”

你想要做的是在 test.cpp 中声明静态 int Delay 就在你的 UpdateDelay 之上

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T20:40:00.007

在这种用法中，关键字`static`意味着每个 cpp 文件都有一个名为`Delay`. 所以`UpdateDelay()`改变的不是`main()`打印的。

如果要使用单个变量，请`extern`改为：在头文件中，将`extern int Delay;`. 在一个源文件中，放入`int Delay = 0;`.

# javascript - 将值从 javascript 传递到表单

> ID：14966905
> 
> 赞同：1
> 
> 时间：2013-02-19T20:37:03.040
> 
> 标签：javascript, html

我有一个按钮（输入类型 = 按钮），它使用一些简单的 javascript 来切换 3 种状态，这很好用，但我发现当我提交表单时，我无法传递按钮的当前值。

```
<input type=button ID="1" value="$decMake" name=decMake onclick="toggle(this);"> 
```

JS：

```
function toggle(button) {
  if(document.getElementById("1").value==""){
    document.getElementById("1").value="Strength";
  }
  else if(document.getElementById("1").value=="Strength"){
    document.getElementById("1").value="Opportunity";
  }
  else if(document.getElementById("1").value=="Opportunity"){
    document.getElementById("1").value="";
  }
} 
```

我试图用一个简单的输入“隐藏”语句来做到这一点，但我认为这还不够，需要更聪明一点，这样做的最好方法是什么

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:44:47.663

隐藏的输入可能是最好的方法。

```
<input type="hidden" id="buttonValue" value=""/>
<input type=button ID="buttonToggle" value="$decMake" name="buttonToggle" onclick="toggle(this);"> 
```

还将按钮更改为`id`更具描述性的按钮。

```
function toggle(button) {
    var value=button.value;
    switch(value){
        case "": value="Strength"; break;
        case "Strength": value="Opportunity"; break;
        default : value=""; 
    }
    button.value = value;
    document.getElementById("buttonValue").value = value;
} 
```

# wtforms - wtforms 如何从用户请求向表单提供数据？

> ID：14966909
> 
> 赞同：0
> 
> 时间：2013-02-19T20:37:21.017
> 
> 标签：wtforms

这是基本的烧瓶获取/发布应用程序：

```
@app.route('/foo', methods = ['GET', 'POST'])
def fooapp():
   form = SomeForm()

   if form.validate_on_submit():
     /* do something with posted data */
   else:
     /* render html for forms to receive user input */ 
```

似乎`process(formdata)`wtforms 的 Form 对象的方法是从请求中读取的。但我从来没有调用过那个方法；我所做的只是检查请求方法是否为 POST 并且`form`在验证用户输入时没有错误。我的表单是如何以及何时从请求数据中读取的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:05:16.553

您必须使用 Flask-WTF 库，他们的[文档进入了](http://pythonhosted.org/Flask-WTF/#api-changes)无需提供以下内容的便利`request.form`：

> 您不需要将 request.form 传递到您的表单实例中，因为除非指定了备用数据，否则表单会自动从 request.form 填充。传入 None 来抑制这个。其他参数与 wtforms.Form 相同。

# standards - 如何在标准 Pascal 中使用文件

> ID：14966910
> 
> 赞同：1
> 
> 时间：2013-02-19T20:37:25.940
> 
> 标签：standards, pascal

在标准 Pascal ( [ISO7185](http://pascal-central.com/docs/iso7185.pdf) ) 中，没有任何程序`Assign`可以让程序员将某种文件名分配给文件变量。它只出现在 Turbo Pascal 和其他衍生产品中。

那么......如果我遵守标准，我应该如何打开特定文件的句柄？

我发现最接近的是这个[Irie Pascal 示例](http://www.irietools.com/iriepascal/linux/progref106.html)：

```
program vowels(f, output);
var
   f : file of char;
   tot, vow : integer;
   c : char;
begin
   reset(f);
   tot := 0;
   vow := 0;
   while not eof(f) do
      begin
         read(f, c);
         case c of
            'a', 'e', 'i', 'o', 'u',
            'A', 'E', 'I', 'O', 'U'
               : vow := vow + 1;
            otherwise
         end;
         tot := tot + 1;
      end;
   writeln('Total characters read = ', tot);
   writeln('Vowels read = ', vow)
end. 
```

这表明我可以将文件名作为启动参数。这使用 Irie Pascal 有效。但是，如果我尝试将它与[P5](https://www.assembla.com/code/pascal-p5/subversion/nodes/trunk/)一起使用，它应该最接近我发现的现代计算机的标准兼容 Pascal 编译器，我得到 (在替换 'otherwise' 之后) `**** Error: external file unknown 'f '`。那么，标准方法是什么？或者这实际上是标准方式并且 P5 做错了什么？

编辑：标准也给出了一个样本

```
program copy (f, g);
  var f,g : file of real;
begin
  reset(f) ; rewrite(g);
  while not eof(f) do
    begin
      g^ := f^ ; get(f) ; put(g)
    end
end. 
```

但我无法让它与任何编译器一起工作。

编辑2：

这样做：

```
program copy (f, g);
  var f,g : file of char;
begin
  reset(f) ; rewrite(g);
  while not eof(f) do
    begin
      g^ := f^ ; get(f) ; put(g)
    end
end. 
```

在入江工作得很好并且符合标准。使用它，文件名可以作为启动参数给出。

然而，正如[Marco van de Voort](https://stackoverflow.com/a/14977150/365237)所解释的，

> ISO 7185 根本没有程序指定文件名的任何标准方式，因此任何此类方式都已超出 7185（Bind 是 ISO 10206，Assign 是 UCSD/BP，Reset 的第二个参数是 GPC 的扩展和 I想想其他一些编译器）。

（[来源](http://www.g-n-u.de/pipermail/gpc/2005-December/013120.html)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:09:02.200

IIRC 这是为了在启动程序之前操作系统绑定文件的 VMS 支持。

未绑定的文件自动为 tempfile iirc。搜索 GNU Pascal 邮件列表（旧档案，比如 2005 年左右），他们对 ISO 文件实现进行了相当多的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T00:08:22.640

它是 CDC 6000 系列机器上的 Scope。但是，其余的都是正确的。您基本上将外部文件分配给 Scope 命令语言中的逻辑头文件名。

当然，现在这看起来很乏味，但那是批处理模式计算机的时代，所有东西都作为输入的卡片“甲板”提交，然后作为一系列输出“卡片”收集。磁带卷轴摆脱了实际的卡片，但磁带被视为磁带上的卡片集合。

在正常使用中，Wirth 的原始编译器实际上仅限于输入和输出文件。如果您想要多个输入文件，请将它们连接起来。这比听起来容易，因为大多数输入和输出文件都是文本，并且每个文件都有不同的结束标记。

这种范例非常适合您为批处理系统上的作业安装输入磁带和输出磁带的想法。批处理计算机的工作是线性处理输入磁带并产生输出磁带。一台大而快的机器会将多个作业连接到一个磁带上并按顺序运行。

高速打印机的选择通常完善了系统。因此，一个在 1960 年代学习计算机科学的大学生会在看起来像打字机的东西上打一个卡座（或让键盘打孔操作员打字），然后该卡座将被收集并转录到磁带卡座并计划运行。一个小时或更长时间后，您从打印机收到了代表程序输出的绿条部分。

无论如何，关于为什么 Wirth 将这种限制放在语言中，这始终是一个很好的辩论问题。可能原因很简单，CDC 6000 机器无法处理按名称随机打开文件的功能。还要记住，Pascal 的前身 Algol 没有任何 I/O 语句！他们认为 I/O 本质上是特定于机器的。

斯科特·摩尔

# ruby - Sinatra 总是打印 '!! 标准输出上的“无效请求”

> ID：14966911
> 
> 赞同：1
> 
> 时间：2013-02-19T20:37:27.290
> 
> 标签：ruby, sinatra

我在胡闹，不顾一切地尝试用 Sinatra 实现 SSL。我使用了许多在互联网上找到的脚本，但实际上并不知道它们做了什么。然后我意识到我实际上并不需要 SSL，现在 sinatra 完全坏了。

无论我的应用程序是什么，每当它收到来自浏览器的请求时，它总是在终端上打印“!! Invalid request”。我注意到`http://localhost:4567`总是切换到`https://localhost:4567`浏览器 URL 中。

我想让 Sinatra 像我最初安装它时那样工作。

我是新手...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:39:39.013

卸载并重新安装`Sinatra`和 Ruby

# python - 将int转换为字符串中的单字节？

> ID：14966916
> 
> 赞同：5
> 
> 时间：2013-02-19T20:37:51.393
> 
> 标签：python

我现在在 Python 中实现 PKCS#7 填充，需要填充我的文件块，以便达到可被 16 整除的数字。我被推荐使用以下方法来附加这些字节：

```
input_chunk += '\x00'*(-len(input_chunk)%16) 
```

我需要做的是以下几点：

```
input_chunk_remainder = len(input_chunk) % 16
input_chunk += input_chunk_remainder * input_chunk_remainder 
```

显然，上面的第二行是错误的；我需要将第`input_chunk_remainder`一个转换为单字节字符串。我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:45:14.783

要创建给定值的一个字节，您可以使用以下[`chr()`函数](http://docs.python.org/2/library/functions.html#chr)：

```
>>> chr(5)
'\x05'
>>> chr(5) * 5
'\x05\x05\x05\x05\x05' 
```

或者您可以使用 a[`bytearray()`](http://docs.python.org/2/library/functions.html#bytearray)具有正确数量的整数：

```
>>> str(bytearray(5 * [5]))
'\x05\x05\x05\x05\x05' 
```

或使用[`array.array()`](http://docs.python.org/2/library/array.html)相同的：

```
>>> import array
>>> array.array('B', 5*[5]).tostring()
'\x05\x05\x05\x05\x05' 
```

或使用该[`struct.pack()`函数](http://docs.python.org/2/library/struct.html)将整数打包成字节：

```
 >>> import struct
 >>> struct.pack('{}B'.format(5), *(5 * [5]))
 '\x05\x05\x05\x05\x05' 
```

可能有更多的方法.. :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-08T05:49:34.680

在 Python3 中，`bytes`内置函数接受整数序列。所以对于一个整数：

```
>>> bytes([5])
b'\x05' 
```

当然，那是字节，而不是字符串。但是在 Python3 世界中，无论如何，OP 可能会为他描述的应用程序使用字节。

# pdf - 管理 Adob e PDF 打印机 - 如何强制关闭依赖系统字体的选项

> ID：14966921
> 
> 赞同：-1
> 
> 时间：2013-02-19T20:38:05.463
> 
> 标签：pdf, printing, citrix

我正在运行一个 Citrix 驱动的环境，并且我有一个重要的软件，它可以在所有报告运行时创建一个 PDF 存储库。我遇到的问题是用户的打印机必须填充到环境中（不仅仅是默认打印机 - 全部），并且许多计算机上都有 Acrobat 9 或 X。创建报告的软件需要关闭依赖系统字体，但一些用户在他们计算机上的 PDF 打印机上打开它。有时，当用户 x 去创建报告时，它会从用户 y 的会话中获取打印机，该会话可能没有正确取消设置选项 - 然后用户 x 的不可替代的报告丢失。该应用程序是一个敏捷应用程序，我无权访问源代码。有没有办法，在 Citrix 或 AD 中，脚本这个选项被取消正确？知道是否有注册表项或某种钩子我可以用 powershell 脚本激活来解决这个问题吗？我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:15:59.723

我已经研究了几个星期来为自己解决这个问题，我一直在寻找更多答案并找到了你的问题。为了解决您的问题，我能够在此处找到注册表项：

[HKEY_CURRENT_USER\Printers\DevModePerUser]

包含所有当前的打印机属性。如果导出它，您可以在登录期间运行脚本来添加 reg 密钥。只需确保在单词后重新启动假脱机程序，以确保更改适用。此外，这些设置仅适用于具有相同名称的打印机，因此如果您有多个打印机名称，则必须为每个不同的打印机名称设置不同的 reg 键。在将打印机设置更改为我喜欢的方式后，我只是将密钥 esport，然后编辑 .reg 文件以删除有关其他已安装打印机的任何数据，以确保 .reg 文件不会影响任何其他打印机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T13:41:02.117

显然，这个问题是一个普遍的问题。Microsoft 已经承认，我试图避免的 PDF 创建问题是 GP 中的一个问题，从（认为它是版本）7 开始。Microsoft 推荐的解决方法是打开 PDF 打印机属性并取消选中使用系统字体框。Adobe 不支持此配置，因此他们不会提供一种明确的方法来在网络级别使用位于许多位置的客户端和 4 个不同的 Acrobat 主要版本来实现它。我最接近的是一篇文章，该文章确定了一个非常长的字符串，我必须对其进行十六进制编辑，该字符串似乎在 Acrobat 的特定次要版本中发生了变化。M$ 和 Adob​​e 的发展之路。因此，换句话说，两家主要公司的主要产品线都没有支持。在这一点上，我无处可去。如果其他人有解决此问题的方法，我很想听听。谢谢！

# python - Python 高速公路 WAMP 消息传递协议

> ID：14966922
> 
> 赞同：1
> 
> 时间：2013-02-19T20:38:05.687
> 
> 标签：python, protocols, specifications, autobahn, wamp-protocol

我正在通过 Pythons multiprocessing.pipe 传输 WAMP 协议，并且我需要重新实现 WampCraClientProtocol。

问题 A：在以下模棱两可的情况下：

```
exclude  = ['ABCDEFGH001', 'ABCDEFGH002', 'ABCDEFGH003']
eligible = ['ABCDEFGH001', 'ABCDEFGH002', 'ABCDEFGH003']
[TYPE_ID_PUBLISH, topicURI, event, exclude, eligible]

# Is the exclude or eligible stronger?
# (Can I do following?)

exclude  = set('ABCDEFGH001', 'ABCDEFGH002', 'ABCDEFGH003')
eligible = set('ABCDEFGH001', 'ABCDEFGH002', 'ABCDEFGH003')
eligible -= exclude
[TYPE_ID_PUBLISH, topicURI, event, [], list(eligible)] 
```

问题 B：`excludeMe`所有方式都可以替换为`[self.session_id]`?

```
[TYPE_ID_PUBLISH, topicURI, event, excludeMe] ==
[TYPE_ID_PUBLISH, topicURI, event, [self.session_id]] 
```

/阿基·R。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:58:07.283

问题A：案件没有歧义-任何人都不会收到消息。逻辑是：（订阅者和合格）\排除。

问题 B：两条消息都会导致代理的相同行为。

# android - 安装后apk会以何种方式自行删除？

> ID：14966932
> 
> 赞同：0
> 
> 时间：2013-02-19T20:38:22.417
> 
> 标签：android

我制作了一个应用程序并进行测试，我想将其提供给一些朋友进行尝试/测试。但我不希望他们把它传递给其他人。那么有没有办法安装apk后，apk自行删除呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:41:32.703

当您安装 apk 时，它只是被复制到内部存储中。有人总是可以很容易地从那里取回它。

无法删除他们下载安装的 apk，因为您不知道该 apk 在手机上的位置。你总是可以显示一个对话框来询问他们，或者在你的应用程序中编写一些代码来设置一个过期日期，之后就会停止工作（就像在 SwiftKey Flow Beta 中一样）。

但是，大多数情况下分发测试版 apk 是一个信任问题。如果您不信任测试人员将其保密，请不要将其提供给他们。

# java - 在java中从文件中剪切列

> ID：14966939
> 
> 赞同：1
> 
> 时间：2013-02-19T20:38:46.913
> 
> 标签：java

我已经搜索并找不到我的问题。我已经用 linux 输出 ls -l 保存了文件，其内容是：

```
drwxr-xr-x  2 usr usr 4096 Jan 20 17:49 file1
drwxrwxr-x  4 usr usr 4096 Jan 20 18:00 file2
drwx------  2 usr usr 4096 Feb  3 08:48 catalog1 
```

例如，我想只留下带有小时的第八列，并切断其余部分。我应该怎么办？我是java和编程的初学者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:44:28.750

您可以使用正则表达式来匹配时间戳（因为可以保证类似时间的值不会出现在任何其他字段中）。就像是：

```
// Populate this with the output of the ls -l command
String input;

// Create a regular expression pattern to match.
Pattern pattern = Pattern.compile("\\d{2}:\\d{2}");

// Create a matcher for this pattern on the input string.
Matcher matcher = pattern.matcher(input);

// Try to find instances of the given regular expression in the input string.    
while (matcher.find()){
  System.out.println(matcher.group());
} 
```

* * *

要检索任意列，您可以选择为要检索的任何列编写正则表达式，或者您可能希望仅在空格字符上拆分每一行，然后按索引选择。例如，要获取所有文件大小：

```
String input;

String[] inputLines = input.split("\n");
for (String inputLine : inputLines) {
  String[] columns = inputLine.split(" ");
  System.out.println(columns[4]); // Where 4 indicates the filesize column
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T21:44:03.160

您需要使用[StringTokenizer](http://docs.oracle.com/javase/6/docs/api/java/util/StringTokenizer.html)来提取您正在寻找的确切信息。试试下面的代码：

```
String value =  "drwxr-xr-x  2 usr usr 4096 Jan 20 17:49 file1\n"+
                "drwxrwxr-x  4 usr usr 4096 Jan 20 18:00 file2\n"+
                "drwx------  2 usr usr 4096 Feb  3 08:48 catalog1";
StringBuffer sBuffer = new StringBuffer(10);
StringTokenizer sTokenizer = new StringTokenizer(value,"\n");
while (sTokenizer.hasMoreTokens())
{
    String sValue = sTokenizer.nextToken();
    StringTokenizer sToken = new StringTokenizer(sValue," ");
    int counter = 0;
    while (sToken.hasMoreTokens())
    {
        String token = sToken.nextToken();
        counter++;
        if (counter == 8)//8 is the column that you want to leave.
        {
            sBuffer.append(token+"\n");
            break;
        }
    }           
}
System.out.println(sBuffer.toString()); 
```

# https - https 上的 Amazon S3 零星“访问被拒绝”错误

> ID：14966941
> 
> 赞同：0
> 
> 时间：2013-02-19T20:38:57.167
> 
> 标签：https, amazon-s3, access-denied

我们的一些用户在加载托管在 S3 上的 .js 和 .css 时遇到问题。我们通过window.onerror跟踪服务器上的JS错误。在日志中，我经常可以看到，对于某些加载 .js 的用户 S3 会产生“访问被拒绝”。

我们使用 bucketname.s3.amazonaws.com/folder/file.js 语法。

我们对于它可以做些什么呢？是亚马逊的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:45:43.023

您可能需要在 S3 上设置一个策略，其中包括使用存储桶上的 GetObject 操作对所有委托人的 Effect:Allow 元素描述。您可以在此处为 S3（以及其他）生成策略：http: [//awspolicygen.s3.amazonaws.com/policygen.html](http://awspolicygen.s3.amazonaws.com/policygen.html)。

# java - Swing 控件在 Java 6 下工作，而不是在 Java 7 下工作

> ID：14966944
> 
> 赞同：0
> 
> 时间：2013-02-19T20:39:11.383
> 
> 标签：java, swing, user-interface

我正在对现有应用程序进行维护。我正在开发的功能在 Java 6 下编译时可以使用，但在 Java 7 下无法使用。我会尽量简短。

该应用程序有一个巨大的 JTabbedPane，几乎构成了整个 UI。JTabbedPane 包含许多 JPanel。反过来，每个 JPanel 都包含大量的 JComponent。用户可以在控件中输入值，但是如果出于某种原因他们想要清除所有更改，他们可以选择一个选项来“重置”面板。负责方法的工作方式是删除 JPanel，重新创建一个完全相同的类（它们都继承自 JPanel）并将其重新插入到 JTabbedPane 中的相同索引处。很简单，对吧？

但实际发生的情况是它切换到 JTabbedPane 中的下一个 JPanel 选项卡，然后新面板中的许多控件显示与下一个面板中的控件重叠。因此，例如，如果我选择了 panel0 并想要重置它，它将显示 panel1 已被选中，并且一大堆 panel0 的组件与其重叠。

它变得更加奇怪。发生这种情况后，无法选择其他选项卡。就像用户界面冻结一样。用户必须通过单击其顶部的选项卡来选择当前选项卡（即 panel1）（这很奇怪，因为它已经被选中）。然后他们可以转到其他选项卡，一切都按应有的方式运行。但是，如果他们不知道解决方法，那就太可怕了。这是完全错误的。重置面板应该只显示所有控件为空白的相同面板。

这是用伪代码完成的操作：

1.  获取当前面板
2.  创建它的新实例
3.  移除当前面板
4.  插入新实例
5.  重新验证和重新绘制
6.  设置面板的选中索引

这是实际的代码：

```
public void resetCurrentTab( int currentTabIndex ) {

   // tried using m_tabbedPane.getTabComponentAt( currentTabIndex), but that returns null
   JPanel curTab = (JPanel)m_tabbedPane.getSelectedComponent();
   if( curTab == null )
          return;
   String curTabName = curTab.getName().trim();

   // create new instance of panel
   JPanel newPanel = null;
   try {
      newPanel = curTab.getClass().newInstance();
   } catch (InstantiationException e) {
      log.equals("Could not reset tab... tab " + curTabName + " creation failed.");
      return;
   } catch (IllegalAccessException e) {
      log.equals("Could not reset tab... tab " + curTabName + " creation failed.");
      return;
   }

   if( newPanel != null ) {
      m_tabbedPane.remove( currentTabIndex );
      m_tabbedPane.insertTab( newPanel.getName(), null, newPanel, null, currentTabIndex );
      newPanel.setVisible( true );
   }

   m_tabbedPane.revalidate();
   m_tabbedPane.repaint();
   m_tabbedPane.setSelectedIndex( currentTabIndex );
} 
```

就像我说的，这是在 Java 6 下编译的。在 Java 7 下，会发生奇怪的事情。我尝试了所有显而易见的事情，比如更改调用 revalidate()、repaint() 和 setSelectedIndex() 的顺序，但这并没有改变行为。我还尝试取出并重新添加相同的 JPanel 只是为了看看会发生什么。我没有得到重叠控件的奇怪之处，但它确实会在选项卡式控件中选择下一个 JPanel（选项卡）。

**tl;博士**

在 Java 6 下编译运行良好的功能在 Java 7 下编译不工作。

有任何想法吗？

**编辑**：我将问题完全追溯到其他东西。在用户重置选项卡之前，一个方法会弹出一个 JOptionPane 询问他们是否确定要这样做。它只是使用简单的 YES/NO 版本的 .showConfirmDialog()。如果我删除对话框，该功能将完美运行。如果我使用对话框，我会得到古怪的行为。

```
int response = JOptionPane
   .showConfirmDialog(
      currentTab,
      confirmMsg,
      "Reload the '" + curTabName + "' Tab",
      JOptionPane.YES_NO_OPTION,
      JOptionPane.QUESTION_MESSAGE );

      if( response == JOptionPane.YES_OPTION )
         // return a value indicating to reset the panel 
```

我为第一个参数尝试了几个不同的值，但没有一个改变行为。如您所见，对话框在重置发生之前很久就超出了范围。仍然不知道为什么这在 Java 6 而不是 7 下有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T21:26:19.963

感谢所有的建议。

我以不寻常的方式修复了这个问题，但这是一个不寻常的错误。我删除了之前完成的方法中的 Panel（在上面的代码中称为 curTab），然后设置了一个标志。TabbedPane（我必须创建自己的，继承自 JTabbedPane）在自定义 Paint() 方法中查找标志。我不做任何自定义绘画，但在该方法中，我分配新面板并将其插入到 TabbedPane 中删除旧面板的索引处。然后我清除所有标志并清理所有内容。

就像我说的，这是一个不寻常的修复，但这是我尝试过的唯一方法，我可以避免视觉和功能故障。

# c# - MEF 2 无法导入通用接口的通用实现

> ID：14966946
> 
> 赞同：2
> 
> 时间：2013-02-19T20:39:12.660
> 
> 标签：c#, generics, .net-4.0, mef

我正在使用来自[Codeplex 主页](http://mef.codeplex.com/releases/view/79090 "Codeplex 上的 MEF2 项目")的最新 MEF 2 预览版，它应该添加开放泛型支持。确实如此，但在这种特定情况下，MEF 无法组合通用接口的通用实现：

```
public interface IOuter
{
    IInner Value { get; }
}

[Export(typeof(IOuter))]
public class MyOuter : IOuter
{
    [ImportingConstructor]
    public MyOuter(InnerGenericClass<string, int> value)
    {
        this.Value = value;
    }

    public IInner Value { get; private set; }
}

public interface IInner
{
    void Say();
}
public interface IGenericInner<T, K> : IInner
{
    // something else here
}

[Export(typeof(IGenericInner<,>))]
public class InnerGenericClass<T, K> : IGenericInner<T, K>
{
    public void Say()
    {
        Console.WriteLine("{0}, {1}", typeof(T), typeof(K));
    }
}

class Startup
{
    public void CatalogSetup()
    {
        var catalog = new AggregateCatalog(
            new AssemblyCatalog(Assembly.GetExecutingAssembly())
            );
        var container = new CompositionContainer(catalog, CompositionOptions.DisableSilentRejection);

        var batch = new CompositionBatch();

        container.Compose(batch);

        var outer = container.GetExportedValue<IOuter>();
        outer.Value.Say();
    }
} 
```

这是**CompositionExpect**：

```
The composition produced a single composition error. The root cause is provided below. Review the CompositionException.Errors property for more detailed information.

1) No exports were found that match the constraint: 
    ContractName    ConsoleApplication1.InnerGenericClass(System.String,System.Int32)
    RequiredTypeIdentity    ConsoleApplication1.InnerGenericClass(System.String,System.Int32)

Resulting in: Cannot set import 'ConsoleApplication1.MyOuter.Value (ContractName="ConsoleApplication1.InnerGenericClass(System.String,System.Int32)")' on part 'ConsoleApplication1.MyOuter'.
Element: ConsoleApplication1.MyOuter.Value (ContractName="ConsoleApplication1.InnerGenericClass(System.String,System.Int32)") -->  ConsoleApplication1.MyOuter -->  AssemblyCatalog (Assembly="ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null")

Resulting in: Cannot get export 'ConsoleApplication1.MyOuter (ContractName="ConsoleApplication1.IOuter")' from part 'ConsoleApplication1.MyOuter'.
Element: ConsoleApplication1.MyOuter (ContractName="ConsoleApplication1.IOuter") -->  ConsoleApplication1.MyOuter -->  AssemblyCatalog (Assembly="ConsoleApplication1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null") 
```

即使我将 InnerGenericClass 的导入移动到**MyOuter.Value**的属性，**也会**引发相同的异常：

```
[Export(typeof(IOuter))]
public class MyOuter : IOuter
{
    [Import(typeof(InnerGenericClass<string, int>))]
    public IInner Value { get; private set; }
} 
```

奇怪的是，当我将导入类型更改为**IGenericInner时，它****确实有效**：

 **```
[Export(typeof(IOuter))]
public class MyOuter : IOuter
{
    [ImportingConstructor]
    public MyOuter(IGenericInner<string, int> value)
    {
        this.Value = value;
    }

    public IInner Value { get; private set; }
} 
```

更奇怪的是，通过属性导入时它**不起作用。**

**摘要：**我不能使用泛型接口将对象导入到*Value属性，因为***IGenericInner**接口可能有更多的实现（我也想导入一个特定的实现，但这并不重要）。

我希望在这种情况下我不必完全绕过 MEF。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T08:54:22.763

导致您导出接口 IGenericInner<> 但要导入特定类 InnerGenericClass MEF 找不到正确的部分。您可以通过这种方式导出和导入特定类或创建两个 InnerGenericClass<> 导出：

```
[Export(typeof(IGenericInner<,>))]
[Export(typeof(InnerGenericClass<,>))]
public class InnerGenericClass<T, K> : IGenericInner<T, K> {
    public void Say() {
        Console.WriteLine("{0}, {1}", typeof(T), typeof(K));
    }
} 
```

我刚刚在 VS .NET 4.5 项目中对此进行了测试，它可以工作。顺便提一句。MEF 2 已在 .NET 4.5 中发布 - 如果可能，我建议使用框架的 System.ComponentModel.Composition.dll 部分而不是预览版。

**更新**：第三种解决方案（适用于预览版 5）可能是另外使用字符串合同名称。我个人尽量避免这种难看语法的原因，但没关系。代码将如下所示：

```
[Export(typeof(IOuter))]
public class MyOuter : IOuter {
    [ImportingConstructor]
    public MyOuter([Import("MySpecialInnerGenericClass", typeof(IGenericInner<,>))]InnerGenericClass<string, int> value) {
        this.Value = value;
    }

    public IInner Value { get; private set; }
}
[Export("MySpecialInnerGenericClass", typeof(IGenericInner<,>))]
public class InnerGenericClass<T, K> : IGenericInner<T, K> {
    public void Say() {
        Console.WriteLine("{0}, {1}", typeof(T), typeof(K));
    }
} 
```**

# google-apps-script - 谷歌电子表格（应用程序脚本）从具有数据验证的单元格中选择下拉列表后添加重复行

> ID：14966952
> 
> 赞同：1
> 
> 时间：2013-02-19T20:39:50.010
> 
> 标签：google-apps-script, google-sheets

我正在尝试从具有数据验证的单元格中的下拉列表中选择后添加重复行，单击下拉列表后，我希望它在当前行下方添加一个具有相同公式的新行。我似乎无法以正确的方式从第三列中复制我的公式（它完美地复制了我的数据验证）。我也不知道如何为下拉菜单添加功能。如果您可以提供帮助，请告诉我。我将分享电子表格。

电子表格： [https ://docs.google.com/spreadsheet/ccc?key=0AiRmDcJRv_f2dDFGNDRCYWtBUmU2TE9hUlI1ZkVZYWc&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AiRmDcJRv_f2dDFGNDRCYWtBUmU2TE9hUlI1ZkVZYWc&usp=sharing)

我正在使用本指南尝试编写/修改我的脚本，但没有运气 [谷歌电子表格（应用程序脚本）将一行信息复制到另一个电子表格](https://stackoverflow.com/questions/14223625/google-spreadsheets-app-script-copying-a-row-of-information-to-another-spreads/14966567#14966567)

再次感谢你！

# android - Android：Webview 在 Nexus 7 (4.2.2) 上嵌入 YouTube 视频作品，而不是 Samsung Intercept (2.2)

> ID：14966954
> 
> 赞同：1
> 
> 时间：2013-02-19T20:39:59.480
> 
> 标签：android, webview, youtube

好的，所以我一直在做这方面的工作，并在使用 Nexus 7 嵌入 iframe 时获得了一个 YouTube 视频，但随后我使用运行 2.2 的旧三星拦截器对其进行了测试，我得到了视频缩略图，但是当我点击播放时，它只是进入黑框并停止。这是我目前正在使用的代码：

```
 int width = 0;
    int height = 0;
    Point size = new Point();
    WindowManager w = getWindowManager();

      if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2)
      {
            w.getDefaultDisplay().getSize(size);
            width = size.x;
            height = size.y; 
      }
      else
      {
            Display d = w.getDefaultDisplay(); 
            width = d.getWidth(); 
            height = d.getHeight(); 
      }

    WebView webView = (WebView) findViewById(R.id.welcomeVideo);
    String play= "<html><body><div align=\"center\"> <iframe class=\"youtube-player\" type=\"text/html\" width=\"" + width/2 + "\" height=\"" + height/4 + "\" src=\"http://www.youtube.com/embed/9DNAyD4ll6E?html5=1\" frameborder=\"0\"></div></body></html>";
    webView.setWebChromeClient(new WebChromeClient() {
    });
    webView.getSettings().setJavaScriptEnabled(true);
    if (Build.VERSION.SDK_INT < 8)
    {
        webView.getSettings().setPluginsEnabled(true);
    }
    else
    {
        webView.getSettings().setPluginState(WebSettings.PluginState.ON);
    }
    webView.setHorizontalScrollBarEnabled(false);
    webView.loadData(play, "text/html", "utf-8");
    webView.setBackgroundColor(0x00000000); 
```

如您所见，我尝试了一些方法，例如启用插件、使浏览器显示为 Chrome 以及将 HTML5=1 附加到 YouTube 视频链接的末尾。我不确定这是否只是因为手机的版本或其他原因，但我的客户也对其进行了测试并说它不工作（虽然还没有回复我关于它是*如何*不工作的，所以这可能是一个完全不同的问题）。有没有更好的方法来解决这个问题以获得最大的兼容性？如果不是，我可能只是使用意图来启动 YouTube 应用程序，但我的客户非常明确地希望它嵌入到页面上，同时拥有广泛的受支持设备。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:06:48.917

Android 2.1 和 2.2 支持部分视频元素。

请参考：[http](http://caniuse.com/#feat=video) ://caniuse.com/#feat=video 。

# r - R中跨越BCE到AD的日期序列

> ID：14966957
> 
> 赞同：10
> 
> 时间：2013-02-19T20:40:02.633
> 
> 标签：r, date

我想生成从公元前 10,000 年到现在的日期序列。这对于 0 CE（或 AD）来说很容易：

```
ADtoNow <- seq.Date(from = as.Date("0/1/1"), to = Sys.Date(), by = "day") 
```

但我对如何在 0 **AD**之前生成日期感到困惑。显然，我可以在现在之前做很多年，但如果能够将某些东西绘制成 BCE 和 AD 那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T22:23:45.710

为了扩展 Ricardo 的建议，这里有一些关于事情如何运作的测试。或者不要为此工作。

我将`?as.Date`用粗体字重复约书亚对未来搜索者的警告：

# “注意：公元 1 年（又名公元 1 年）之前的几年可能无法正确处理。”

```
as.integer(as.Date("0/1/1"))
[1] -719528

as.integer(seq(as.Date("0/1/1"),length=2,by="-10000 years"))
[1]  -719528 -4371953

seq(as.Date(-4371953,origin="1970-01-01"),Sys.Date(),by="1000 years")
# nonsense
 [1] "0000-01-01" "'000-01-01" "(000-01-01" ")000-01-01" "*000-01-01"
 [6] "+000-01-01" ",000-01-01" "-000-01-01" ".000-01-01" "/000-01-01"
[11] "0000-01-01" "1000-01-01" "2000-01-01"

> as.integer(seq(as.Date(-4371953,origin="1970-01-01"),Sys.Date(),by="1000 years"))
# also possibly nonsense
 [1] -4371953 -4006710 -3641468 -3276225 -2910983 -2545740 -2180498 -1815255
 [9] -1450013 -1084770  -719528  -354285    10957 
```

尽管这似乎确实适用于绘图：

```
yrs1000 <- seq(as.Date(-4371953,origin="1970-01-01"),Sys.Date(),by="1000 years")
plot(yrs1000,rep(1,length(yrs1000)),axes=FALSE,ann=FALSE)
box()
axis(2)
axis(1,at=yrs1000,labels=c(paste(seq(10000,1000,by=-1000),"BC",sep=""),"0AD","1000AD","2000AD"))
title(xlab="Year",ylab="Value") 
```

![在此处输入图像描述](../Images/158aef590d7b95b9bc8c96b01eabfec6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-23T23:03:28.710

自从提出这个问题以来，已经过去了相当长的一段时间。随之而来的是一个新的 R 包[gregorian](https://github.com/edgararuiz/gregorian)，它可以在方法中处理 BCE 时间值`as_gregorian`。

下面是一个分段构建从 -10000 BCE 到当前年份的日期列表的示例。

```
library(lubridate)
library(gregorian)

# Container for the dates
dates <- c()
starting_year <- year(now())
# Add the CE dates to the list
for (year in starting_year:0){
  date <- sprintf("%s-%s-%s", year, "1", "1")
  dates <- c(dates, gregorian::as_gregorian(date))
}

starting_year <- "-10000"
# Add the BCE dates to the list
for (year in starting_year:0){
start_date <- gregorian::as_gregorian("-10000-1-1")
date <- sprintf("%s-%s-%s", year, "1", "1")
dates <- c(dates, gregorian::as_gregorian(date))
} 
```

如何*使用*列表取决于您，只要知道日期对象的相关属性是`year`和`bce`。例如，您可以遍历日期列表、解析年份并确定它是否为 BCE。

```
> gregorian_date <- gregorian::as_gregorian("-10000-1-1")
> gregorian_date$bce
[1] TRUE
> gregorian_date$year
[1] 10001 
```

### 0AD 注释

gregorian 包假定当您指的是第 0 年时，您实际上是在谈论第 1 年（如下所示）。我个人认为应该抛出异常，但这是映射用户需要牢记的。

```
> gregorian::as_gregorian("0-1-1")
[1] "Monday January 1, 1 CE" 
```

*BCE*也是如此

```
> gregorian::as_gregorian("-0-1-1")
[1] "Saturday January 1, 1 BCE" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T22:02:09.170

正如@JoshuaUlrich 评论的那样，简短的回答是否定的。

但是，您可以将年份拼接成单独的列，然后转换为整数。这对你有用吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T22:29:49.500

该软件包`lubridate`似乎可以处理“负”年，尽管它确实创建了 a year `0`，从上述评论来看似乎是不准确的。尝试：

```
library(lubridate)

start <- -10000

stop <- 2013

myrange <- NULL

for (x in start:stop) {

     myrange <- c(myrange,ymd(paste0(x,'-01-01')))
} 
```

# c# - Timer(callback,...) 回调函数是否添加到堆栈中？垃圾收集 Q 用这个

> ID：14966958
> 
> 赞同：2
> 
> 时间：2013-02-19T20:40:09.153
> 
> 标签：c#, timer, garbage-collection, callstack

我有一个功能需要在每个午夜存档 90 天前的电子邮件。我创建了一个类来处理这个问题，示例如下：

```
 public void processArchives()
    {
        initializeTimer();
    }

    private void initializeTimer()
    {
        var now = DateTime.Now;
        var tomorrow = now.AddDays(1);
        var durationUntilMidnight = tomorrow.Date - now;

        var t = new Timer(o => { attemptArchivalProcess(); }, null, TimeSpan.Zero, durationUntilMidnight);
    }

    private void attemptArchivalProcess()
    {
        //perform archival
        initializeTimer(); //re-start timer to process tomorrow
    } 
```

问题是，对 initializeTimer 的重复调用会导致堆栈溢出（重复的函数调用）还是会“永远”运行良好？

并且我应该能够将 processArchives() 作为新线程调用，并保持线程打开，还是在 init 调用之后需要某种循环，例如：

```
 while(!Program.Closing){ sleep(...); } 
```

防止它被垃圾收集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:45:57.373

**编辑 x1** - 在第二句中表示“堆”，而不是“堆栈”......（d'oh！）

我认为这不会导致堆栈溢出，原因很简单。行`var t = new Timer(`... 在堆上创建一个新对象。函数指针保存在对象内部，并且（理论上）在实际调用之前永远不要添加到堆栈中。当`attemptArchivalProcess()`被调用时，它会依次调用`initializeTimer()`（添加到堆栈中），但是这会在同一个线程上正常完成并退出（从堆栈中删除）。当`Timer`确实启动时，它将开始进入堆栈的 2-call 条目。

现在，这一切都说，我知道堆栈的幕后复杂性增加了，但我的观点是，最终你有两个方法被调用，然后正确退出 - 并且在它们退出时应该正确清理。

或者至少这是我的推理。我完全承认我愿意对此进行更正......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:24:17.880

我认为您已接近潜在的解决方案。

# 定时器

*回答您的第一个问题*：正如您已经得出的结论，计时器将在其委托上经过。委托将在一个单独的线程上执行，并且每个计时器经过都会获得一个全新的自己的堆栈来执行。因此，无休止的计时器已过事件将永远不会触发`StackOverflowException`.

# 等到永远？

*尝试回答您的第二个问题*：您不必编写无限循环来保持您的应用程序存活**。**但是，您可以这样做，这完全取决于您的应用程序需要什么。权衡利弊。

幸运的是有更多可能的解决方案（没有对错，权衡它们以满足您的需求）

您可以考虑的解决方案列表：

## Console.ReadLine()

如果你有一个控制台应用程序，你可以简单地等待用户输入。主线程将永远等待而不消耗处理器能力。

## 按照Servy的建议，创建一个计划任务

这样你就不需要做任何事情来编写无限循环。您的应用程序将在完成后简单地退出。如果您实际将此应用程序部署给用户，可能不是最漂亮的解决方案。

## 视窗服务

您也可以选择更成熟的解决方案并编写一个 Windows 服务（听起来比它更复杂，编写一个基本的 Windows 服务非常简单）。这样您也不必费心编写永无止境的循环，Windows 服务将按设计永远运行（当然，您决定停止它的单元）

## 永无止境的while循环的替代方案-WaitHandle

您还可以使用信号机制（例如使用 a `AutoResetEvent`），以便您的主线程可以等待直到设置了某个信号。这样您也不必*主动等待*（=不消耗处理器周期）。

您有很多选择，这一切都归结为您的特定需求，我无法为您决定。**你可以。:)**

* * *

所有这些话，让我们举个例子。单元测试代表您的应用程序。计时器是另一种类型，即`System.Timers.Timer`. 您可以将该计时器设置为，`AutoReset`这样您就不必创建新计时器。

这里的例子，我希望它对你有意义（如果没有，评论，也许我可以澄清）

```
 private Timer _processTimer;
    private AutoResetEvent _resetSignal;

    [Test]
    public void YourImaginaryMainApp()
    {
        const int interval = 24 * 60 * 60 * 1000; // every day

        _resetSignal = new AutoResetEvent(false);
        _processTimer = new Timer(interval)
            {
                AutoReset = true
            };
        _processTimer.Elapsed += ProcessTimerOnElapsed;

        _resetSignal.WaitOne( /*infinite*/);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:32:59.093

这是我为此尝试的解决方案....

```
 System.Threading.Timer timerFunc = null;

    public void processArchives()
    {
        initializeTimer();

        while (!CSEmailQueues.StoppingService) //is
            Thread.Sleep(CSEmailQueues.sleeptime); 

        timerFunc.Dispose();

        return;
    }

    private void initializeTimer()
    {
        var now = DateTime.Now;
        var tomorrow = now.AddDays(1);
        var durationUntilMidnight = tomorrow.Date - now;

        if (timerFunc != null) timerFunc.Dispose();
        timerFunc = new System.Threading.Timer(o => { attemptArchivalProcess(); }, null, TimeSpan.Zero, durationUntilMidnight);
    }

    private void attemptArchivalProcess()
    {
        //Do Work
        initializeTimer(); //re-start timer to process tomorrow
    } 
```

所以...这将处理计时器对象并在每次运行时创建一个新对象（因为此计时器只执行一次）。另外，作为一个类级别的变量，总是有一个对计时器的引用，所以垃圾收集器在我等待它触发时不会处理它。

然后我所要做的就是创建一个线程，从服务的 onStart 调用中调用 processArchives()，这实际上应该永远运行，除非调用 onStop 并将 StoppingService 设置为 true。

另外我猜我不必担心计时器回调对 timerFunc 的跨线程使用，因为在任何给定时间都不应该有超过 1 个实例来访问此对象。

# java - 将jar转换为可执行文件的命令行工具？

> ID：14966959
> 
> 赞同：2
> 
> 时间：2013-02-19T20:40:14.197
> 
> 标签：java, windows, jar, executable

我可以通过以下命令将 Java`.class`文件转换为文件：`.jar`

```
jar cvf Hello.jar Hello.class 
```

现在我想将其转换`.jar`为 Windows 可执行文件 (.exe)。是否有任何类似的命令或任何命令行工具来执行此操作？

我正在开发一种自动工具来将 .class 文件编译为 .exe 而无需任何人工干预，因此基于 GUI 的工具将无法工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T20:55:27.523

有几种选择：

*   [jar2exe](http://www.jar2exe.com/)
*   [Excelsior JET](http://www.excelsior-usa.com/jet.html)
*   [执行人](http://mpowers.net/executor/)
*   [JS平滑](http://jsmooth.sourceforge.net/)
*   [GCJ](http://gcc.gnu.org/java/)
*   [JCGO](http://www.ivmaisoft.com/jcgo/index.htm)
*   [发射4J](http://launch4j.sourceforge.net/)
*   [压缩包](http://www.duckware.com/jexepack/index.html)

最后一个（JexePack）可能更接近您的需求，因为它是一个命令行工具：

> JexePack 是一个命令行工具（非常适合自动编写脚本），它允许您将 Java 应用程序（类文件）以及它的资源（如 GIF/JPG/TXT/等）打包成单个压缩的 32 位 Windows EXE ，它使用 Sun 的 Java 运行时环境运行。支持控制台和窗口应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:46:46.303

我一直使用[Launch4J](http://launch4j.sourceforge.net/)。易于添加到 Ant 或 shell 脚本中。有一个 GUI 可以帮助构建配置文件（如果需要），然后在脚本中引用配置文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:42:53.433

看看[JSmooth](http://jsmooth.sourceforge.net/)。奖励：还有一个 Maven 插件。

更新：要作为命令行运行，请参阅[命令行参考手册](http://jsmooth.sourceforge.net/docs/jsmooth-doc.html#N102A9)。

# php - preg_match 与表达式

> ID：14966963
> 
> 赞同：0
> 
> 时间：2013-02-19T20:40:32.133
> 
> 标签：php, preg-match, expression

我有两种从 RSS 中提取的行。这些是正在玩的游戏和尚未开始的游戏。我在下面的代码只提取已经开始的游戏。

```
$string = "Tampa Bay 6 Florida 5 (FINAL - OT)
Ottawa 0 Toronto 3 (FINAL)
NY Islanders at Ottawa (7:30 PM ET)
Toronto at Tampa Bay (7:30 PM ET)
San Jose at St. Louis (8:00 PM ET)
Detroit at Nashville (8:00 PM ET)
Vancouver at Chicago (8:30 PM ET)
Los Angeles at Edmonton (10:00 PM ET)";

preg_match_all("/^(\D+)(\d+ )(\D+)(\d+ )\s*\((.*)\)$/m", $string, $result);

echo "<pre>";

print_r($result); 
```

重要的是，对于两种类型的线路，团队保持在同一个阵列中。我不知道该怎么做。有什么帮助吗？我敢肯定这只是我忘记的一种表达方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:34:33.600

呸。这就是我想出的。如果有任何分数，它使用条件模式来匹配分数，如果没有找到分数，它将偷偷地“删除”“at”（表明它是一个未开始的匹配）。它将使用相同的技术来计算第二队的得分。最后它将匹配最后一个括号组的内容。

捕获的组：

1.  团队 1 名称
2.  团队 1 得分（如果“在”则为空）
3.  团队 2 名称
4.  团队 2 得分（如果'at'则为空）
5.  最后一个括号的内容

    preg_match_all( '#^([a-zA-Z ]+)(?(?=\d+)(\d+)\s+|\s+at\s+)([a-zA-Z ]+)(?( ?=\d+)(\d+))\s+(([^)]+))#m', $str, $matches );

    // 请注意编辑快乐的用户，正则表达式无法在 SO 上正确格式化。

**唯一的问题是您应该修剪团队名称，因为其中可能存在不需要的空格。**

## 分解

*   ([a-zA-Z ]+) - 匹配第一个团队名称
*   (?(?=\d+)(\d+)\s+|\s+at\s+) - 使用[条件检查](http://www.php.net/manual/en/regexp.reference.conditional.php)和[前瞻断言](http://www.php.net/manual/en/regexp.reference.assertions.php)来查看是否找到数字，如果是，则捕获团队 1 的分数，否则我们匹配但不捕获 at 字符串（忍者技能:)）。
*   ([a-zA-Z ]+) - 匹配第二个团队名称
*   (?(?=\d+)(\d+)) - 另一个条件检查第二队的得分
*   \s+ - 在剩余的括号位之前匹配一些空格
*   (([^)]+)) - 匹配括号内的所有内容

# laravel - Laravel 更新时如何更新 /app 文件夹？

> ID：14966970
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:00.080
> 
> 标签：laravel, laravel-4

有时我的 Laravel 项目在运行后会出现问题`composer update`。我相信这是由 Laravel 应用程序框架（[https://github.com/laravel/laravel](https://github.com/laravel/laravel)）的变化引起的。如何更新我的本地项目以反映这些更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:08:15.803

我通常使用 git pull request。git pull 请求执行 git fetch，然后执行 git merge。它很适合我。换句话说，一个 git pull 是你可以用远程仓库更新你的仓库的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:41:00.080

从 Kindari（[http://forums.laravel.io/viewtopic.php?id=5367](http://forums.laravel.io/viewtopic.php?id=5367)）在 Laravel 论坛上的精彩论坛帖子中：

> 如果您最初克隆了这个存储库并且仍然与它共享 git 历史记录，您通常可以轻松地合并更改。假设您的遥控器是指向此存储库的“上游”，您可以执行以下操作：

```
 git fetch upstream 
 git merge upstream/develop 
```

> 或者，您可以从开发分支中挑选单个提交，但我不会在这里介绍。
> 
> 如果您最初下载了 zip 发行版或删除了上游历史记录，您仍然可以手动解决问题。查看此分支上的提交并进行应用程序中不存在的任何更改。通常，重大更改是简单的配置更改。

由于*大多数*更改可能是简单的配置更改，因此另一种选择是对根文件夹和 /app 文件夹进行比较。您将主要看到自己的配置，但您也会看到应该添加的任何新配置项。

# xml - 带有嵌套 CDATA 部分的 lxml

> ID：14966971
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:01.917
> 
> 标签：xml, lxml, cdata

我有包含讨厌的嵌套 CDATA 的 XML（在其他地方生成，无法控制），例如：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE prc SYSTEM "prc.dtd">
<body>
  <![CDATA[Towards Automatic Generation blabla
<definition> 
   <query><![CDATA[ <root[AByS]> <sc methodName="get_NYT.ARTICLES" serviceURL="http://www.nytimes.com/srv/"> 
  <params> <param name="subjectP" value="{ subjectP }"> </> </> </> <sc methodName="get_WP.ARTICLES" 
   serviceURL="http://www.wpost.com/srv/"> <params> <param name="subjectP" value="{ subjectP }"> </> </> 
   </> </>; ]]></query> </definition> </serviceDefinition> (b) Figure 7\. (a) The query for Web service 
]]>
</body> 
```

`lxml`（Python）炸弹

```
XMLSyntaxError: Opening and ending tag mismatch: body line 3 and query, line 9, column 28 
```

因为它认为第一个`]]>`结束 CDATA，而实际上它只结束内部 CDATA，而后面的标签 ,`</query>`仍然在外部 CDATA 内，不应该被解析。

什么是解析此类 XML 的好方法？这意味着我希望 CDATA 中的所有内容都保留为未解析的数据，即使它内部包含更多 CDATA。写我自己的解析器？想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T01:16:21.463

由于嵌套`CDATA`部分使其不是来自良好的 XML，因此您不能在其上使用任何 XML 工具。

您需要使用可以处理嵌套结构的文本解析器，因此它需要计数器或堆栈支持。这排除了简单的正则表达式解决方案。如果这些`CDATA`部分是平衡的，则该任务在某种程度上类似于处理嵌套括号。

展开嵌套`CDATA`部分的一种方法是使它们成为连续`CDATA`部分。

一些伪代码：

```
counter = 0 or stack is empty
when found "<![CDATA[" string
    if counter != 0 or stack not empty
        replace "<![CDATA[" with "]]><![CDATA["
    increase counter or push to stack
when found "]]>" string
    decrease counter or pop stack
    if counter != 0 or stack not empty
        replace "]]>" with "]]><![CDATA[" 
```

理想情况下，您可以将其用作输入流阅读器，将输出通过管道传输到 XML 解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:59:40.110

嵌套 CDATA 不合法，因此这不是有效的 XML。

CDATA 部分可能不包含“]]>”。在 XML 中转义它的正确方法是这样的 "]]]]>"

[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/223652/is-there-a-way-to-escape-a-cdata-end-token-in-xml)

# java - Java 中的问题扫描器

> ID：14966975
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:12.867
> 
> 标签：java

尝试使用 Scanner 对象从 JOPtionPane 输入对话框中读取时遇到了困难（下面的文本）

```
int array[] = new int[6];
for (int i=0; i<6; i++)
    { 
        Scanner sc = new Scanner(System.in);
        JOptionPane.showInputDialog("Enter a number to fill the array: ");
        array[i]=sc.nextInt(System.in);
    } 
```

更改如下代码后，困难得到解决：

```
String st;
int array[] = new int[6];
for (int i=0; i<6; i++)
    { 
        st= JOptionPane.showInputDialog("Enter a number to fill the array: ");
        array[i] = Integer.parseInt(st);
    } 
```

我想知道为什么我不能使用 Scanner 类对象填充数组：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:48:08.293

扫描仪可以设置为从多个不同的地方获取输入，但不幸的是不是来自 JOptionPane。如果您想使用扫描仪，您必须选择不同的输入方法。文件、现有字符串或控制台输入。

[Java 6 API - 类扫描器](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#Scanner%28java.io.File%29)

JOptionPane 仅从一个地方收集其输入，即它自己。

[Java 6 API - 类 JOptionPane](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JOptionPane.html)

# javascript - 如何显示网站的并发用户数？

> ID：14966978
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:28.837
> 
> 标签：javascript, ruby-on-rails, concurrency, analytics

我想在我的网站上显示并发用户数。是否有 JS API 以某种方式加载该信息？

（我使用 Mixpanel、Clicky、Google Analytics 等……一定有人知道这些信息！）

编辑：这是不同的，因为我正在寻找一个不会影响我的数据库的 JS 解决方案。虽然如果有必要，我会用 Ruby on Rails 来做。

# java - 通用列表中的 NullPointerException

> ID：14966980
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:33.413
> 
> 标签：java, nullpointerexception, generic-list

我一直在 stackoverflow 上搜索 1000 个 NullPointerException 帖子，但我一生都无法弄清楚为什么会发生这种情况；除了显而易见的（它是空的）。有人可以帮助我了解导致我遇到此运行时错误的 Generic Singly LinkedList 是什么我不了解。

这是我的代码：

```
 import java.io.*;
    import java.util.*;

public class GList<T> {         
    private GNode<T> head;
    private GNode<T> cursor;

    private static class GNode<E>{
    private E data;        //NULLPOINTEREXCEPTION
    private GNode<E> next;

    public GNode(E data, GNode<E> next) {
        this.data = data;
        this.next = next;
    }
}                
public static class InnerList<E> {
    private String name;
    private GList<Integer> inner = new GList<Integer>();

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public GList<Integer> getInner() {
        return inner;
    }
    public void setInner(GList<Integer> inner) {
        this.inner = inner;
    }
}
public boolean hasNext(T cursor) {
    /*
     * returns whether or not the node pointed to by 'cursor' is
     * followed by another node. If 'head' IS null, returns False
     */
    if (cursor != null)
    {
        return true;
    }
    else
    {
        return false;
    }
}
public void insertFirst(T t) {
    /*
     * puts a new node containing t as a new first element of the list
     * and makes cursor point to this node
     */     
    if (hasNext(t) == false){
        head = new GNode<T>(t, head);
        head.next.data = t;
        cursor.next = head;
    }
    else{
        System.out.println("List is not null.");
    }
} 
public static void main(String[] args){

GList<InnerList> list = new GList<InnerList>();

String ln = "hello";
list.cursor.next.data.setName(ln);  //NULLPOINTEREXCEPTION

/*Exception in thread "main" java.lang.NullPointerException
 *at GList$GNode.access$0(GList.java:10)
 *at GList.main(GList.java:67) 
 */
}
} 
```

这是家庭作业，所以解释将是最有帮助的，因为我确信我将在接下来的几个月里处理 LinkedList。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T20:43:23.243

由于您使用的是默认构造函数，因此您尚未给出实现

```
GList<InnerList> list = new GList<InnerList>(); 
```

它的所有字段都没有被初始化，所以

```
list.cursor == null 
```

Java 在这里停止执行，但您的其他字段也为空。花时间重新访问您的代码并初始化所有相关字段。

事实上，您不应该尝试访问列表中的任何内容，因为您尚未向其中添加任何项目。它的`head`和`cursor`为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:44:12.603

在这一行`list.cursor.next.data.setName(ln);`中，您试图引用从未初始化的对象的属性。

在您声明游标、下一步和数据的地方没有设置任何值。在您的主要方法中，您从不设置 head 或 cursor 的值，因此它们仍然为空。然后您尝试引用它们并获得 NPE。

# angularjs - AngularJS 处理这样的模态的方式是什么

> ID：14966981
> 
> 赞同：11
> 
> 时间：2013-02-19T20:41:40.587
> 
> 标签：angularjs

我知道您不应该将您的显示逻辑放在控制器中，我正在努力使用正确的 AngularJS 方法来解决这个问题。

我在模态框内展示表单。我正在使用 Zurb Foundation 的模态显示。

标记：

```
<div class="button" ng-click="modalAddWidget">Add Widget</div>
<div id="modalAddWidget" class="reveal-modal">
  <h6>New Widget</h6>
  <form>
    <fieldset>
      <legend>Widget Name</legend>
      <input type="text" ng-model="ui.add_widget_value" />
    </fieldset>
    <div class="small button right" ng-click="addWidget()">Add Widget</div>
    <div class="small button right secondary" ng-click="addWidgetCancel()">Cancel</div>
  </form>
</div> 
```

控制器：

```
 ...
  $scope.modalAddWidget = function() {
    $("#modalAddWidget").reveal();
  }
  $scope.addWidget = function() {
    $scope.myobject.widgets.push({"name": $scope.ui.add_widget_value});
    $scope.ui.add_widget_value = '';
    $('#modalAddWidget').trigger('reveal:close');
  }
  $scope.addBudgetCancel = function() {
    $scope.ui.add_widget_value = '';
    $('#modalAddWidget').trigger('reveal:close');
  }
  ... 
```

注意：$scope.ui 是我用来存储 UI 值的对象，在用户实际单击“添加小部件”之前不应将其绑定到我的对象

$scope.myobj 是存储我的数据的地方。

Foundation 的`$("#modalAddWidget").reveal();`功能呈现模态叠加。

由于我不应该将我的显示代码放在控制器中，解决这个问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-19T21:01:56.900

您不想从控制器操作 DOM（甚至引用它）。

这里最好有一个指令。

```
app.directive('revealModal', function (){
   return function(scope, elem, attrs) {
     scope.$watch(attrs.revealModal, function(val) {
        if(val) {           
           elem.trigger('reveal:open');
        } else {
           elem.trigger('reveal:close');
        }
     });
     elem.reveal();
   }
}); 
```

然后在你的控制器中：

```
$scope.modalAddWidget = function (){
   $scope.ui = { add_widget_value: '' };
   $scope.showModal = true;
};

$scope.addWidget = function (){
    $scope.myobject.widgets.push({"name": $scope.ui.add_widget_value});
    $scope.ui.add_widget_value = '';
    $scope.showModal = true;
}; 
```

在你的 HTML 中

```
<div class="button" ng-click="modalAddWidget()">Add Widget</div>
<div id="modalAddWidget" class="reveal-modal" reveal-modal="showModal">
  <h6>New Widget</h6>
  <form name="addWidgetForm" ng-submit="addWidget()">
    <fieldset>
      <legend>Widget Name</legend>
      <input type="text" name="widgetValue" ng-model="ui.add_widget_value" required />
      <span ng-show="addWidgetForm.widgetValue.$error.required">required</span>
    </fieldset>
    <button type="submit" class="small button right">Add Widget</button>
    <div class="small button right secondary" ng-click="showModal = false;">Cancel</div>
  </form>
</div> 
```

基本上你会在你的范围内设置一个布尔值来显示和隐藏你的模态。（我不确定是否显示模态的打开/关闭机制，所以我在上面的代码中猜测）。

ALSO：我努力在其中添加一些验证。

# python - Windows 上的“无法找到 vcvarsall.bat”错误

> ID：14966982
> 
> 赞同：5
> 
> 时间：2013-02-19T20:41:47.923
> 
> 标签：python

6 小时前，我开始寻找在 Windows 7 上为 python 2.7 编译 c 扩展的解决方案。

我尝试了所有可能的解决方案，例如使用较旧的 MINGW 版本或尝试使用 tdm-mingw 版本（4.4）。我还尝试更改

> “-Wall -mno-cygwin”

从 cygwinccompiler 并使用新版本创建新文件 distutils.cfg

但我仍然“至少”得到这个错误：

> “错误：命令‘gcc’失败，退出状态为 1”

有没有人可以在windows下编译类似“pip install lxml”的东西？

如果是...请分享您的智慧...；）您正在运行哪种 MINGW 版本...您的 python 版本是什么或您修改后的 cygwinccompiler.py 看起来如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-22T12:50:22.150

你试过微软的 Visual C++ 编译器吗？

如果没有，您可能需要在此处下载“Microsoft Visual C++ Compiler for Python 2.7”，看看是否可以避免“无法找到 vcvarsall.bat”错误：[https ://www.microsoft.com/en-us/download /details.aspx?id=44266](https://www.microsoft.com/en-us/download/details.aspx?id=44266)

这通常适用于我在 Windows 上使用 Python 2.7

# c# - 需要授权的图片源URI

> ID：14966983
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:47.560
> 
> 标签：c#, wpf

在我的 WPF 上`Window`，我将`Image`其`UriSource`设置为 Internet 上某些图像的 URL。

```
<Image>
    <Image.Source>
        <BitmapImage UriSource="http://tinyurl.com/anmucph" />
    </Image.Source>
</Image> 
```

当我在 Internet 上使用可公开访问的图像时，一切正常：WPF 框架执行必要的 HTTP GET 请求并显示图像。

我想要做的是使用`UriSource`一个 URL，它需要 HTTP GET 请求附带一个 Authorization 标头。（我有我想要使用的所需的 Authorization 标头字符串。）

如何使用`UriSource`需要授权的？WPF中有内置的东西吗？或者这是否需要定制解决方案？如果是这样，我如何连接到 WPF 框架以提供自定义逻辑来执行 HTTP GET？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-20T05:36:54.907

我知道这是一个旧线程，但我想跟进我找到的解决方案。

.net 有一个很酷的功能，可以让您在系统或应用程序级别上用自己的方法覆盖它的核心。这可以为 WebRequest.Create 方法完成

见[http://msdn.microsoft.com/en-us/library/bc0fhzk5.aspx](http://msdn.microsoft.com/en-us/library/bc0fhzk5.aspx)

这篇文章是一个包含 IWebRequestCreate 的完整示例，因此您不会陷入递归。

[将标头添加到机器上的所有* HTTP 请求](https://stackoverflow.com/questions/9217595/add-header-to-all-http-requests-on-a-machine)

毕竟，您的应用程序范围内的所有内容都将被迫使用您的 create 方法。

注意：在添加您的 auth 标头之前，请确保您在正确的域中，这样您就不会将您的 auth 提供给其他地方 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:51:43.013

你有资源的用户名和密码吗？如果只是标准的 HTTP 身份验证，您可以像这样指定域名：

```
http://username:password@tinyurl.com/anmucph 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T20:49:31.760

使用 WPF 中内置的工具无法做到这一点。

另一种方法是创建一个轻量级的本地 HTTP 代理，它只有一个

*   `GET http://localhost:####/proxy?uri={uri}&authorization={authorization}`

操作（其中端口 #### 在防火墙后面），这反过来会产生

*   `GET {uri}`

使用提供的授权标头值请求。

然后，您可以将要显示的受保护资源的 URI 编码 URI设置`UriSource`在`http://localhost:####/proxy?uri=X&authorization=Y`哪里，并且是与请求一起发送的 URI 编码授权标头。`X``Y``GET`

# php - PHP似乎执行了两次脚本

> ID：14966984
> 
> 赞同：7
> 
> 时间：2013-02-19T20:41:50.917
> 
> 标签：php, apache, web, webserver, debian

我的网络服务器表现得很奇怪。似乎它在发送到 apache 之前执行了两次脚本（PHP）。

我已经运行了这个文件：

```
<?php
echo '<pre>';
session_start();
$_SESSION['index']++;
echo '<br>';
print_r($_SESSION);
?> 
```

而且我知道++一开始会发出通知，但这只是为了调查它是否运行两次。无论如何，打印的会话显示每次加载页面时 index-index 都会增加 2。

网络服务器是 apache2，php5 安装在一个 debian 单元上。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:44:32.043

```
echo '<pre>'; //Headers and cookies already sent.
session_start(); //Cannot set cookie anymore, system tries again, I guess 
```

首先开始会话，然后输出任何内容。试着放在`session_start();`上面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T07:53:06.200

我不能感谢这个问题的海报。他的会话测试让我意识到我遇到了多次运行 php 脚本的相同问题。

在我的脚本中，我有两个由 if-else-construct 相互分隔的 PDO 函数。一种是简单的选择，一种是简单的插入功能。但是每次我运行脚本时，两个 pdo 命令都会被执行。PDO 最终在我的表中写入了条目“public”的行。

所以发生了什么事？由于无法找到 HTML 代码中的元素，我的页面被多次发送。在我的情况下，这是一个命名错误的 css 文件。当我解决了这个问题（查看代码 4 小时后），问题就消失了。例如，损坏的图像也会触发相同的事件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-04T00:06:44.110

好吧，伙计们，找到了一个完全疯狂的解决这个问题的方法。只是张贴以供将来参考。我最近在 Chrome 中安装了一个 HTML 验证器（一个扩展）。这似乎是罪魁祸首。加载完所有内容后，验证器似乎正在重新请求页面，因此它被执行了两次。不错的插件。不是！我花了大约半天时间才弄清楚这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-29T04:17:20.347

我看到了同样的行为......页面第一次运行时会出现 $_POST，然后第二次不会出现......搜索代码以找出页面可能再次发回自身的原因。徒劳无功。

在看到上面user1601869的回答后，我开始检查。我有一些我还没有写的样式表的链接，所以把它们的骨架放进去。

事实证明，对我来说，罪魁祸首是：

```
<link rel="shortcut icon" href=""> 
```

这只是导致我的页面中断的图标的占位符。我建议如果您有同样的问题，请查找`<HEAD></HEAD>`已损坏的链接！

# django - Django - 在提交时保存数据但不重新加载视图

> ID：14966985
> 
> 赞同：2
> 
> 时间：2013-02-19T20:41:53.930
> 
> 标签：django

我有一个显示可以使用提交按钮保存的表单的视图。我不希望在提交表单时重新加载视图。但是，如果函数不返回响应，我会遇到错误。

视图.py

```
from django.shortcuts import render_to_response
from ezmapping.models import *
from django.forms.models import modelformset_factory

def setAppOptions(request, map_name):
    if request.user.is_authenticated():
        app_selected = EzApp.objects.get(app_name=app_name, created_by=request.user)
        formset = ezAppOptionFormSet(user=request.user, instance=app_selected)
        if request.method == 'POST':
            formset = ezAppOptionFormSet(request.POST, instance=app_selected, user=request.user)
            if formset.is_valid():
                formset.save()

        return render_to_response("manage_app_options.html", {'formset': formset}, context_instance=RequestContext(request)) 
    else:
        error_msg = u"You are not logged in"
        return HttpResponseServerError(error_msg) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:46:35.723

除非您通过 ajax 发布表单，否则您将无法在不重新呈现模板的情况下进行 POST。如果您通过 ajax 提交表单并返回 JSON、XML 等响应，则您可以使用表单错误或其他信息更新模板。

但是，鉴于您视图中概述的用例，我建议使用[@login_required 装饰器](https://docs.djangoproject.com/en/1.4/topics/auth/#the-login-required-decorator)完全限制对视图的访问。如果你这样做，你的视图逻辑可以大大简化。

# sql - SQL Server：当参数为空时为插入查询设置默认值

> ID：14966986
> 
> 赞同：0
> 
> 时间：2013-02-19T20:41:55.430
> 
> 标签：sql, sql-server-2005, ibatis

我正在尝试执行如下插入查询：

```
Insert Into table1 (column1, column2)
Values (#value1#, #value2#) 
```

但是比方说，我想`2/19/2013`在参数`#value2#`为空时默认 column2 。我将如何实现这一目标？

我正在使用 Ibatis 框架，插入语句位于 XML 文件中，该文件用于从控制器调用的 db 文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:48:50.103

This may be what you're looking for:

`ISNULL(#value2#,'2/19/2013')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T21:09:17.460

如果您无法更改来自 XML 文件的插入语句，您可以考虑创建触发器

```
CREATE TRIGGER table1_Insert ON table1
INSTEAD OF INSERT
AS
INSERT INTO table1 (column1, column2)
    SELECT column1, ISNULL(column2,'2/19/2013') FROM INSERTED; 
```

然后如果尝试插入一个`NULL`

```
INSERT INTO table1 VALUES (1, NULL); 
```

你会有

```
| COLUMN1 |   COLUMN2 |
-----------------------
|       1 | 2/19/2013 | 
```

这是**[sqlfiddle](http://sqlfiddle.com/#!3/34226/1)**

# php - 使用 array_combine 存储从 csv 读取的数据

> ID：14966987
> 
> 赞同：0
> 
> 时间：2013-02-19T20:42:04.303
> 
> 标签：php, arrays, symfony, csv

我需要从 csv 文件中提取标题和值。两者都稍后在前端访问。

```
$header = array();
$contacts = array();

if ($request->isMethod('POST')) {

   if (($handle = fopen($_FILES['file']['tmp_name'], "r")) !== FALSE) {
        $header = fgetcsv($handle, 1000, ",");

        while (($values = fgetcsv($handle, 1000, ",")) !== FALSE) {

            // array_combine
            // Creates an array by using one array for keys
            // and another for its values
            $contacts[] = array_combine($header, $values);
        }
        fclose($handle);
   }
} 
```

它适用于看起来像这样的 csv 文件

```
Name,Firstname,Organisation,
Bar,Foo,SO, 
```

我刚刚导出了我的 gmail 联系人并尝试使用上面的代码读取它们，但出现以下错误

> 警告：array_combine() [function.array-combine]：两个参数应该有相同数量的元素

gmail csv 看起来像这样

```
Name,Firstname,Organisation
Bar,Foo,SO 
```

最后一个漏掉`,`是错误的原因吗？出了什么问题以及如何解决？

我在 SO 上找到了这个

```
function array_combine2($arr1, $arr2) {
    $count = min(count($arr1), count($arr2));
    return array_combine(array_slice($arr1, 0, $count),
                         array_slice($arr2, 0, $count));
} 
```

这可行，但它会跳过**名称**字段，并且并非所有字段都被合并。这是因为 gmail csv 不是真的有效吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:03:59.313

我通过扩展数组大小或根据标题的大小对其进行切片来管理它。

```
if (count($header) > count($values)) {
    $contacts = array_pad($values, count($header), null);
} else if (count($header) < count($values)) {
    $contacts = array_slice($values, 0, count($header));
} else {
    $contacts = $values;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T16:44:38.870

虽然这不是您提出的问题的答案，但它可能是问题根源的答案。我最近遇到了这个问题，并意识到我犯了一个愚蠢的错误，因为我不了解`fgetcsv()`函数的参数：

那里`1000`表示您从中获取内容的 csv 中单行的最大行长度。比这更长，函数返回`null`！我不知道为什么示例中给出的版本如此吝啬，但这不是必需的；将其设置为`0`允许`fgetcsv()`读取任意长度的行。（文档警告说这比较慢。对于大多数用例，`fgetcsv()`我几乎无法想象它慢到足以引起注意。）

# c# - 桌面应用程序到外部 Web 服务器数据库的连接字符串

> ID：14966988
> 
> 赞同：0
> 
> 时间：2013-02-19T20:42:10.350
> 
> 标签：c#, sql, database-connection, connection-string

我正在尝试从桌面应用程序获取工作连接字符串到外部（亚马逊）Web 服务器上的数据库。现在我收到用户消息登录失败，这让我觉得我很接近。

我可以转到服务器上的数据库并使用“TestGuy”的 SQL 登录名登录并运行查询，所以我知道他的凭据有效

这是我的连接字符串

```
 string remote = @"data source=ec2-54-234-254-230.compute-1.amazonaws.com,1433;uid=testguy;pwd=****;Initial Catalog=RMSScrum;Application Name=RMS;pooling=false";

+$exception {"Login failed for user 'testguy'."}    System.Exception {System.Data.SqlClient.SqlException} 
```

我还在我的服务器上打开了端口 1433，我是关闭还是遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T20:50:09.400

关。

你有没有打开“Sql Server 配置管理器”

1.  SQL Server 网络配置
2.  协议……”
3.  TCP/IP
4.  IP 地址选项卡

您应该会看到一个具有 PUBLIC IP - 确保已启用框设置为“是”。其次，确保底部的“IPALL”的动态端口为空白，并确认 TCP 端口为 1433。

1.  可能只是连接字符串问题？[http://www.connectionstrings.com/sql-server/](http://www.connectionstrings.com/sql-server/)

# windows - 在 Windows 中转义 curl 命令

> ID：14966989
> 
> 赞同：5
> 
> 时间：2013-02-19T20:42:26.007
> 
> 标签：windows, curl, marklogic

我正在尝试`curl`从 Windows 中的命令行运行命令，但对于我的生活，我无法弄清楚我应该如何逃避它。

我正在执行这个：

```
C:\WINDOWS\system32>curl --anyauth --user user:password -X POST -d "{\"rest-api\":{\"name\":\"BizSimDebug3\"}}" -H "Content-type: application/xml" http://localhost:8002/v1/rest-apis 
```

我得到了这个：

```
<rapi:error xmlns:rapi="http://marklogic.com/rest-api">
  <rapi:status-code>400</rapi:status-code>
  <rapi:status>Bad Request</rapi:status>
  <rapi:message-code>RESTAPI-INVALIDCONTENT</rapi:message-code>
  <rapi:message>Your bootstrap payload caused the server to throw an error.  Underlying error message: XDMP-DOCROOTTEXT: xdmp:get-request-body() -- Invalid root text "{&amp;quot;rest-api&amp;quot;:{&amp;quot;name&amp;quot;:&amp;quot;BizSimDebug3&amp;quot;}}" at  line 1</rapi:message>
</rapi:error> 
```

我还需要做些什么来转义 -d 标志中的内部引号吗？还是我完全忽略了真正的问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-12T20:35:54.907

这适用于 Windows：

```

curl -i -X POST -H "Content-Type: application/json" -d "{\"Field1\": 123, \"Field2\": 456 }" "http://localhost:8080"

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T14:00:17.973

该`XDMP-DOCROOTTEXT`错误表明服务器正在尝试将有效负载解析为`XML`失败。

标`Content-Type`头告诉服务器您正在发送`XML`，但有效负载是`JSON`.

尝试将`Content-Type`标题更改为`application/json`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T21:54:03.770

引用是地狱。通过“Windows 命令行和您的提示，我认为您的意思是 cmd.com ？。这与 linux shell 引用的内容不同。

对于这个简单的实验，我建议使用 2 种引号以避免转义但即使那样它也不太可能工作

```
curl --anyauth --user user:password -X POST -d "{'rest-api':{'name':'BizSimDebug3'}}" -H "Content-type: application/xml" http://localhost:8002/v1/rest-apis 
```

使用类似 unix 的 shell 可能会带来更好的运气，例如运行 cygwin ( [http://www.cygwin.com/](http://www.cygwin.com/) ) 或 xmlsh (www.xmlsh.org)，它们会像 linux 一样逃逸。

你真的会做一场噩梦，通过 Windows 命令行本地运行任何复杂的东西。

-大卫