# StackOverflow 问答 13127000-13127999

# java - 如何从 Java (JRuby) 连接到 .Net WCF MS-LWSSP SOAP 服务？

> ID：13127002
> 
> 赞同：0
> 
> 时间：2012-10-29T17:50:04.740
> 
> 标签：java, .net, wcf, soap, wsdl

我正在与一个在当前纯 MRI Ruby/Rails 堆栈上的客户端合作，但是我们有一个第 3 方服务，我们需要开始与它建立在 .Net 和 WCF 上的接口，并且访问它的唯一方法是肥皂。他们使用 MS-LWSSP（[MS 文档](http://msdn.microsoft.com/en-us/library/dd357239%28prot.20%29.aspx)）作为安全协议，而 Ruby SOAP 库似乎都不了解如何连接到它。

我们正在考虑将 JRuby 添加到技术堆栈（作为一个单独的小应用程序）以连接到该服务，因为 Java 为处理 SOAP 提供了更多选择。但是，我不熟悉任何 Java SOAP 库。

我看过其他一些关于使用 Java 客户端连接到 .Net SOAP 服务的帖子，但我没有看到任何使用此安全协议的具体地址。他们的 SOAP 服务是 SOAP 版本 1.2，它确实有一个我们可以访问的 WSDL。

有人做过吗？您能否向我提供有关哪些图书馆会对此有所帮助的信息？

非常感谢您提供任何建议或信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:37:58.273

这是一个老问题，但我会回答对我们有用的问题。或者更准确地说，什么对我们没有用。

没有一个 Ruby SOAP 库与我们必须使用的协议兼容。我们花了很多时间来试用它们，但它们根本无法与客户合作。我们考虑过自己实施协议，但这比我们想花的精力要多得多。

最后，我们请求客​​户端允许我们通过非 SOAP 路由进行访问，结果要好得多。

故事的寓意：尝试询问您是否可以进行非 SOAP 访问。它会为您节省很多精力和头痛。

# json - 播放框架路由问题（400 bad request）

> ID：13127008
> 
> 赞同：4
> 
> 时间：2012-10-29T17:50:34.137
> 
> 标签：json, jquery, post, playframework-2.0

我在向 play 框架发布 POST 时遇到问题——这可能与 Play 相关的程度不如 HTTP 相关。

```
$.ajax({
    type:'POST',
    url:'http://localhost:9000/start',
    data: {
        myJson:JSON.stringify(arg)
    }
}).done(function(data) {
    console.log(data);
}); 
```

其中`arg`是一个字符串数组，即： `['a', 'b', 'c']`

我试图用来捕捉这一点的路线是：

```
POST    /start      controllers.Application.startIt(myJson) 
```

我究竟做错了什么？截至目前（如果路由正确捕获），该函数将永远不会返回 400。Play 控制台没有输出，只有 javascript：

`POST http://localhost:9000/start 400 (Bad Request)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:18:51.430

该文档解释了框架[何时返回 BadRequest 错误代码。](http://www.playframework.org/documentation/2.0/ScalaGlobal)问题来自您的路由器文件。您定义了一个路由*/start*，它将触发一个方法调用*startIt*，但是该方法有一个参数并且框架不知道它应该传递哪个值。

要正确处理 JSON 请求，请查看[文档的专用部分](http://www.playframework.org/documentation/2.0/ScalaJsonRequests)。

# sql-server - 允许用户从 SQL 执行 BCP 导出命令的最安全方法是什么？

> ID：13127013
> 
> 赞同：0
> 
> 时间：2012-10-29T17:50:48.907
> 
> 标签：sql-server, security, bcp, xp-cmdshell, sql-server-administration

我目前在一个环境中工作，在这种环境中，从手动运行的 SQL 脚本中以 **编程方式****导出**表的能力将有很大帮助。

 **从脚本执行导出将是从存储过程中运行整个过程的第一步，因此我必须能够从 SQL 启动导出。

该组织目前在大多数服务器上具有以下配置 -

*   SQL Server 2005 或 2008
*   xp_cmdshell -**禁用**
*   CLR -**启用**

最终，我希望能够调用传递以下参数的过程并让它执行导出。

*   表名
*   文件路径/名称（在网络共享上）
*   文件格式

目前 BCP 在功能方面似乎是一个完美的选择，但由于 xp_cmdshell 被禁用，我无法通过命令行调用它。

该组织规模很小，并且很高兴为安全解决方案而努力，到目前为止，我的印象是他们对安全性有很好的控制。他们已经做出了禁用 xp_cmdshell 的全面决定，但如果我能提出一种安全的方法来允许使用它，我认为他们会很容易接受。

在我的研究中，我遇到了**“EXECUTE AS”**功能以及带有**证书**的签名程序，但仍然无法确定任何一种方法是否可以帮助我实现我想要的。

此外，如果您有其他解决方案可以让我实现相同的最终结果，我会全力以赴！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:39:57.047

正如 Aaron Bertrand 指出的那样，问题在于 xp_cmdshell 已禁用。

您可以考虑两种选择。

1.  使用[批量插入](http://msdn.microsoft.com/en-us/library/ms188365%28v=sql.105%29.aspx)。需要 INSERT 和 ADMINISTER BULK OPERATIONS 权限

2.  创建类型为“操作系统（CmdExec）”的 SQL 代理作业以运行 BCP。您可能需要代码来创建/更新作业以传递参数。**

# algorithm - 为此编写最快的算法？

> ID：13127015
> 
> 赞同：-6
> 
> 时间：2012-10-29T17:50:56.523
> 
> 标签：algorithm, graph, ada

给定一张 20x30 的“方格纸”标记任何偶数 n 个单元格，以便每个单元格都有奇数个标记的相邻单元格，并且所有单元格连接在一起形成一个“片”相邻单元格被定义为直接相邻的单元格。（所有周围的单元格，不包括对角单元格）。

我在提出一个干净的算法时遇到了问题。我目前有一个，它非常混乱和令人困惑，我只知道必须有更好的方法来做到这一点，我只是不确定如何。我正在寻找一种快速实现的算法，因为我没有太多时间来编写程序，而且我们必须用 Ada 对其进行编码，这不是我的强项。我目前正在使用我这样制作的 CanMark(cell); -- 检查是否可以标记单元格。有问题（单元格）；-- 检查单元格周围是否有偶数个标记的单元格。HasFix（单元格）；-- 检查是否有可以标记的单元格序列以消除当前存在的问题。

我现在没有代码，但我回家后会发布。

任何帮助将不胜感激。

很抱歉不清楚。我只是在问一个方向，而不是让你为我解决我的问题。我觉得这可以使用与图形相关的算法来完成，但知道的不够多，无法确定。我现在没有我的代码，但我一定会在有能力的时候发布它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:14:57.293

我会从小处着手，然后逐步建立。最小的（n = 1）很简单： * 这显然不起作用，因为有 0 个邻居（和偶数）。所以对于 n=1 不存在解。接下来，尝试 n=2。只有一个选择：** 这有效。现在 n=3 呢？不起作用，n = 3 没有解决方案。现在，如何添加它以使 n=4？n=6？你能形成一个图案吗？

# html - 向右浮动并填充父级

> ID：13127018
> 
> 赞同：4
> 
> 时间：2012-10-29T17:51:05.273
> 
> 标签：html, css

当一个元素在相对定位的元素中向右浮动时，如何使高度填充父元素？

```
<div id="page">
  <div id="left"></div>
  <div id="right"></div>
</div> 
```

```
#page {
  width: 980px;
  padding: 10px;
  background: #3C4B76;
  display: block;
  margin: 10px auto auto auto;
  position: relative;
}

#left {
  padding: 0;
  margin: 0;
  width: 230px;
  float: left;
}

#right {
  float: right;
  width: 720px;
  border-left: 1px solid white;
  padding: 5px 5px 5px 20px;
  height: 100%;
  position: relative;
  display: block;
} 
```

在这个例子中，`#right`元素没有填充“#page”元素，它只是增长到与内容一样大。如果它小于`#page`我想`#right`填充父级。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:07:02.570

为父母试试这个：

```
overflow:auto; 
```

另一种解决方案：

**家长：**

```
display: table; 
```

**孩子：**

```
display: table-row; 
```

检查这个[小提琴](http://jsfiddle.net/j7wd4/)

**更新：** 要使用跨浏览器 CSS 设置等高列，您应该阅读这篇[Matthew James 帖子](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:05:39.150

复制粘贴以下内容

CSS：

```
#page {
    width: 980px;
    padding: 10px;
    background: #3C4B76;
    display: block;
    margin: 10px auto auto auto;
    position: relative;
}  

#left {
    padding: 5px 0;
    margin: 0; width: 230px;
    float: left;
}  

#right {
    float: right;
    width: 720px;
    border-left: 1px solid white;
    padding: 5px 5px 5px 20px;
    height: 100%;
    position: relative;
    display: block;
}

.clearfix:after {
     visibility: hidden;
     display: block;
     font-size: 0;
     content: " ";
     clear: both;
     height: 0;
     }
.clearfix { display: inline-block; }
/* start commented backslash hack \*/
* html .clearfix { height: 1%; }
.clearfix { display: block; }
/* close commented backslash hack */ 
```

HTML：

```
<div id="page" class="clearfix">
   <div id="left">left</div>
   <div id="right">right</div>
</div> 
```

小提琴链接：

[http://jsfiddle.net/uExdD/9/](http://jsfiddle.net/uExdD/9/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-11T13:04:13.360

万一其他人发现这篇旧帖子，进行 clearfix 的新方法是：

```
.clearfix:after {
  content: "";
  display: table;
  clear: both;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:57:20.513

只需给它与父级相同的高度并将 clearfix 应用于父级。

```
.clearfix:after {
     visibility: hidden;
     display: block;
     font-size: 0;
     content: " ";
     clear: both;
     height: 0;
     }
.clearfix { display: inline-block; }
/* start commented backslash hack \*/
* html .clearfix { height: 1%; }
.clearfix { display: block; }
/* close commented backslash hack */ 
```

# c - 为什么我的文件指针会导致未定义的符号错误？

> ID：13127020
> 
> 赞同：3
> 
> 时间：2012-10-29T17:51:13.473
> 
> 标签：c

到目前为止，这是我的代码：

```
#include <stdio.h>

int main(void)
{
    char filename[50];   /* for holding file's name  */
    FILE *fp;            /* fp is the "file pointer" */

    printf("Please enter the name of an input file: ");
    scanf("%s", filename);

    if (!(fp = fopen(filename, "w")))    /*w=write*/
            fprintf(stderr, "unable to open file\a\n");
    else {/* process file */
            fprintf(fp, "Testing...\n");
    }
    return 0;
} 
```

线

```
FILE *fp; 
//is giving me an error Undefined Symbol "FILE" 
```

线

```
fprintf(stderr, "unable to open file\a\n"); 
//is giving me an error Undefined Symbol "stderr" 
```

我认为这些关键字是标准的 C/C++？他们为什么给我错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T17:52:42.070

你有`#include <stdio.h>`吗？您的声明`main()`也不正确。它应该返回`int`，而不是`void`。

不，`FILE`不是 C 或 C++ 中的关键字。它的声明在`<stdio.h>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T17:55:23.553

请添加以下行作为文件中的第一条语句

`#include <stdio.h>`

数据类型 FILE 和 fprint() 等函数在此头文件中定义，因此您需要它来运行程序（告诉编译器 FILE、fprintf() 等的定义）

# php - ajax 数据是字符串而不是数组

> ID：13127021
> 
> 赞同：0
> 
> 时间：2012-10-29T17:51:30.577
> 
> 标签：php, jquery, ajax

我使用 jquery ajax 将一些数据发送到 php 文件

```
$.ajax({
            type: 'GET',
            url: 'dosomething.php',
            data: {list:orderNew}
            }); 
```

哪个将这个发送到 php

```
$list = $_GET['list']; 
```

print $list 给了我这个：

```
 list[4]=null&list[1]=null&list[2]=4&list[12]=null&list[11]=null&list[3]=null 
```

我希望将它作为一个数组来获取，这样我就可以在我的 php 文件中执行此操作

```
 foreach($list as $key => $value) {
            if($value == "null"){
                $value = 0;
            }
} 
```

如何将 list[] 数据作为实际数组发送，以便 php 将其作为数组读取或将字符串转换为数组，以便我可以在我的 php 页面上执行我的 foreach？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T17:59:42.580

尝试

```
parse_str($list, $arr);
print_r($arr); 
```

输出

```
Array
(
    [list] => Array
        (
            [4] => null
            [1] => null
            [2] => 4
            [12] => null
            [11] => null
            [3] => null
        )

) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T17:54:50.930

您必须在服务器端使用 jsonencode，然后使用 jn 客户端：

```
$.ajax({
            type: 'JSON',
            url: 'dosomething.php',
            data: {list:orderNew}
            }); 
```

# javascript - 何时是在 Javascript 中填充大型选择下拉列表的最有效时间？

> ID：13127025
> 
> 赞同：0
> 
> 时间：2012-10-29T17:51:53.777
> 
> 标签：javascript, jquery, select, drop-down-menu, backbone.js

我一直在努力解决这个问题。我正在使用主干来渲染模型，并为我的下拉菜单选择了插件。

当一个新的集合进来时，jQuery slideDown 效果被用来渲染每个模型。每个模型都有一个选择下拉列表，需要填充超过 600 个选项。

我遇到的问题是，如果我先填充下拉菜单，那么 slideDown 动画就会断断续续，实际上通常只是被忽略（突然我的模型出现了，没有动画。）

我尝试过的另一个选项是先渲染模型，只为特定下拉列表附加模型的值，然后设置它的选定值。然后，调用 setTimeout 并填充其余选项（在幕后）。然而，在这种情况下，最终会出现明显的、令人讨厌的延迟。如果我没有设置超时，那么它会尝试填充尚不存在的下拉菜单。

我是否错过了如何有效地做到这一点的东西？我正在缓存选择下拉列表的选项列表。我已经尝试将所有选项循环到一个字符串中并替换下拉列表的 html，并循环遍历每个选项并一次附加一个。

我认为我的问题更多地与动画和 600 多个下拉选项的组合有关。理想情况下，模型出现后，它会立即填充下拉列表，不会有任何延迟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:00:12.540

您不一定需要超时。您可以在主干中创建自己的[事件。](http://backbonejs.org/#Events)

```
initialize: function () {
  // When our event is triggered, load the dropdowns.
  this.on( 'doneWithThings', this.loadDropdowns );
},

// render the view
render: function () {
  // Whatever it is that you do when rendering.
  // When you're done rendering, trigger an event.
  this.trigger( 'doneWithThings' );
},

loadDropdowns: function () {
  // Load them!
} 
```

其他我会尝试的事情......

将选项保留在客户端（JS 数组）中，但不要将它们绘制到屏幕上，除非用户已展开屏幕的该 slideDown 部分。同样，当 slideDown 效果发生时引发一个事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:52:39.537

> 理想情况下，模型出现后，它会立即填充下拉列表，不会有任何延迟。

不知道 blackbone 但如果有一些动画，你可以看看 [jquery .promise()](http://api.jquery.com/promise/)

```
$(":animated").promise().done(function() {
    //load data
  });​ 
```

# vba - 级联下拉更新和冻结 VBA

> ID：13127027
> 
> 赞同：0
> 
> 时间：2012-10-29T17:52:02.447
> 
> 标签：vba, excel

我有三个组合框：**cbo_prefRoom1, cbo_prefRoom2, cbo_prefRoom3**。

在表单初始化时， **cbo_prefRoom2**和**cbo_prefRoom3**被禁用。

当用户在**cbo_prefRoom1**中选择一个选项时，它会启用**cbo_prefRoom2**。当用户在**cbo_prefRoom2**中选择一个选项时，它会启用**cbo_prefRoom3**。

我想做的是添加一个实例，如果用户选择 cbo_prefRoom1 中的选项**，**`No Preference`那么会发生**cbo_prefRoom2**和**cbo_prefRoom3**更新为相同的值。然后**cbo_prefRoom2**和**cbo_prefRoom3**被禁用，直到用户更改**cbo_prefRoom1**中的选项。******`No Preference`****`No Preference`**********

 ******还有第二种情况，如果用户选择 cbo_prefRoom2 中的选项**，**`No Preference`则cbo_prefRoom3**将**更新为相同的值并禁用。然后**cbo_prefRoom3**被禁用，直到用户更改**cbo_prefRoom2**中的选项。****`No Preference`**`No Preference`******

 ******我该如何实现这一目标？

```
Private Sub cbo_prefRoom1_Change()

' When user selects an option in cbo_prefRoom1 then cbo_prefRoom2 is enabled
    With cbo_prefRoom2
        .Enabled = Len(cbo_prefRoom1.Value) > 0
            If Not .Enabled Then
                .ListIndex = -1
            End If
    End With

End Sub

Private Sub cbo_prefRoom2_Change()

' When user selects an option in cbo_prefRoom2 then cbo_prefRoom3 is enabled
    With cbo_prefRoom3
        .Enabled = Len(cbo_prefRoom2.Value) > 0
            If Not .Enabled Then
                .ListIndex = -1
            End If
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:18:09.807

像这样的东西？您也可以采用相同的想法并将其移动到`cbo_prefRoom2`单击事件的事件中。

```
If cbo_prefRoom1.Value = "No Preference" Then
  cbo_prefRoom2.value = "No Preference"
  cbo_prefRoom3.value = "No Preference"
Else
  With cbo_prefRoom2
    .Enabled = Len(cbo_prefRoom1.Value) > 0
    If Not .Enabled Then
      .ListIndex = -1
    End If
  End With
End If 
```************

# c# - 在 c# Win Form 中从列表框保存到 .csv 文件

> ID：13127033
> 
> 赞同：0
> 
> 时间：2012-10-29T17:52:46.427
> 
> 标签：c#, file, csv, listbox

我一直在寻找如何做到这一点的几个小时，我认为最好的想法是为每个循环提供一个，然后将其传递到 Stream Writer。

我尝试了多种不同的方法，我想也许我还不足以看到我的错误，如果有人能够提供帮助，那就太好了。

目前该文件已创建，我得到的唯一输出是第一行的“System.Windows.Forms.ListBox+ObjectCollection”，这表明我没有正确传递值。

这是代码：

```
 private void btnSave_Click(object sender, EventArgs e)
    {
        StreamWriter myOutputStream = new StreamWriter("Myfile.csv");
        myOutputStream.WriteLine(lstBox.Items);
        myOutputStream.Close();
        //foreach (object item in lstBox.Items)
        //string listString = lstBox.SelectedItem.ToString();
        //StreamWriter streamBox = File.CreateText(@"testfile.csv");
        //streamBox.Write(listString);
        //streamBox.Close();
        //if (SaveFileDialog.ShowDialog() == DialogResult.OK)
        //{
        //    System.IO.StreamWriter streamBox = new System.IO.StreamWriter(SaveFileDialog);
        //    foreach (object item in lstBox.Items)
        //        streamBox.WriteLine(item.ToString());
        //    streamBox.Close();
        //}
    } 
```

所有注释掉的部分都是我过去尝试过的。但是现在，我认为最简单的方法是前三行。

感谢您的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T17:55:14.223

您正在写出`listBox.Items`，这是一个`ListBoxObjectCollection`. 您需要一个 foreach 循环来编写每个项目：

```
StreamWriter myOutputStream = new StreamWriter("Myfile.csv");

foreach (var item in lstBox.Items)
{
    myOutputStream.WriteLine(item.ToString());
}

myOutputStream.Close(); 
```

另请注意，您可以`using`在此处使用块：

```
using (StreamWriter myOutputStream = new StreamWriter("Myfile.csv"))
{
    foreach (var item in lstBox.Items)
    {
        myOutputStream.WriteLine(item.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:58:59.323

首先，里面有什么`ListBox`？如果列表框中的项目只是字符串项目，那么您可以执行以下操作：

```
StreamWriter myOutputStream = new StreamWriter("Myfile.csv");
foreach (string item in lstBox.Items) {
    myOutputStream.WriteLine(item);
}
myOutputStream.Close(); 
```

# html - 仅在一个 div 上阻止来自单个样式表的样式

> ID：13127035
> 
> 赞同：0
> 
> 时间：2012-10-29T17:52:55.003
> 
> 标签：html, xhtml, css

我有一个位于页面上的 div。问题是它从样式表（样式表 A）中继承全局样式，例如全局 ul 和表格样式，但是，我希望这个单个 div 不这样做。我要求有问题的 div**只能**从另一个样式表（样式表 B）获取其样式。目前他们正在发生冲突。

有没有办法做到这一点**而不必以**任何方式接触样式表 A？这是因为样式表 A 控制着我站点的所有主要样式，并且站点足够大，以至于更改可能会破坏某些内容。有问题的 div 包含与站点无关的数据，因此不需要样式表 A。

如果有帮助，我正在使用 javascript Prototype？请不要Jquery :)

使用 iframe 怎么样？这是一个有效的解决方案，它将如何工作？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T02:59:30.200

任何重复的样式将始终应用最后一个读取。

假设你有这个样式：`.class { background-color: red; }`在你的样式表 A 中，这个在 B:`.class { background-color: blue; }`中。

因此，如果您在 B 之前调用样式表 A：

```
<link href="sheet_a.css" rel="stylesheet" type="text/css" />
<link href="sheet_b.css" rel="stylesheet" type="text/css" /> 
```

然后应用的样式将是`.class { background-color: blue; }`，因为它是浏览器读取的最后一个样式。

现在，如果这不起作用（如果您的样式表以不同的顺序被调用，或者 A 中的样式比 B 中的样式更具体，所以 A 仍在应用中），您可以使用[`!important`tag](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)。

`.class { background-color: blue !important; }`将覆盖 A 中的样式，只要它在原始样式中也没有 !important。

如果您只想更改一个元素，则不一定需要新的样式表。您可以`<style></style>`在 html 头中的标签之间使用新样式，也可以在元素 ( `<div style="background-color: blue;"></div>`) 中内联。内联元素比外部工作表上的相关性更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:42:42.097

也许最简单的方法是简单地找出 div 从样式表 A 继承的每个样式属性，然后用样式表 B 手动覆盖这些样式。

如果您想将 div 放入 iframe，那也应该可以。您需要该 div 拥有自己的 HTML 文件，托管在与主页相同的域中（否则您会遇到安全问题）。链接到 div 页面中的 stylesheetB，它会起作用。但是，在为 iframe 设置样式时，您会遇到一些问题。由于您无法从父文档中读取子文档中的 CSS 属性，因此您必须使 iframe 具有固定的宽度和高度，这在许多情况下都会受到限制。我想你可以让 iframe 滚动，但这也可能不是你想要的。

我认为最好的方法是使用 Chrome Inspect Element 或 Firefox 中的 Firebug 来查看 div 正在接收的 CSS 继承，然后

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:07:21.730

您可以在 html 结构上使用[内联样式，也可以在](http://www.w3schools.com/css/css_howto.asp)**样式表 b**`!important`上添加您想要的规则以覆盖样式**表 a 上的样式**。

 ****例如，在**样式表 b**上，您将执行以下操作：

```
.element {background:red !important} 
```****

# loops - 在伪代码中将while循环转换为for循环

> ID：13127037
> 
> 赞同：0
> 
> 时间：2012-10-29T17:52:59.487
> 
> 标签：loops, for-loop, while-loop

我需要将此循环转换为 for 循环。

```
Input:A number k ≥ 0 
Output: Output ?? 
x←0
y←0
while x≤k do 
x←x+1 
y←y+3
return y 
```

你也能描述一下这个的输出吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T17:55:54.057

你没有描述你在想什么语言，我也不认识你的 while 例子的语法。但是这个 C 代码应该是该代码的 for 循环等价物。

```
for(x=0, y=0; x <= k; x++) y += 3; 
```

当然，如果您只关心结果，则可以将其替换为

```
y = 3*(k+1); 
```

编辑：好的，作为伪代码，这可能类似于

```
y←0
for each x from 0 to k inclusive do
    y←y+3
end do
return y 
```

但我自己发现正确的 C 代码更清晰。

# maven - 如何让 Heroku 使用我的“acctest”maven 配置文件？

> ID：13127041
> 
> 赞同：3
> 
> 时间：2012-10-29T17:53:11.807
> 
> 标签：maven, deployment, heroku, maven-profiles

我想将 Heroku 用作（最终用户）验收测试环境。我的不同环境之间的差异是通过使用不同的 Maven 配置文件（基本上切换到使用包含属性文件的特定目录）来捕获的。

因此，对于本地开发，我们运行“mvn -P local-dev package”；部署到生产环境时，我们运行“mvn -P prod install”等。

现在我们希望 Heroku 使用“acc-test”配置文件运行 maven。也就是说，我们想要一个 git push 来触发“mvn -P acc-test install”，而不是运行标准的“mvn install”。

那可能吗？我们怎么能做到这一点？

# python - 在 tkinter 中使用网格进行标签布局

> ID：13127045
> 
> 赞同：0
> 
> 时间：2012-10-29T17:53:30.073
> 
> 标签：python, user-interface, widget, tkinter

我在弄清楚如何在 tkinter 中正确使用网格时遇到了一些麻烦。我只希望两个标签并排出现。

当我执行以下操作时，它们会出现在与我的应用程序不同的窗口中。我很困惑，因为我的应用程序上有我想要的按钮（不使用网格），但我不太清楚网格中的标签。

```
 //this is just a snippet from a function
    self.root = tk.Tk()
    tk.Label(master=self.root, text=directory).grid(row=0,column=0)
    tk.Label(master=self.root, text=directory).grid(row=0,column=1) 
```

根窗口是在应用程序的不同部分创建的，所以我在这里所做的只是制作另一个（我认为）。我只想让标签出现在已经创建的窗口中，但我不知道我应该参考什么。这是在一个单独的文件中，其中包含带有上述代码的文件

```
from Tkinter import *
import tkinter as tk
import widgetActions
import shutil

class mywidgets(widgetActions.Actions):

def __init__(self,root):
    frame = tk.Frame(root)
    self.makeMenuBar(frame)
    frame.pack()
    frame.config(width=400)
    self.body()
    return

def makeMenuBar(self,frame):
    menubar = Frame(frame,relief=RAISED,borderwidth=1)
    menubar.pack()

    mb_file = Menubutton(menubar,text='file')
    mb_file.pack(side=LEFT)
    mb_file.menu = Menu(mb_file)

    mb_file.menu.add_command(label='open', command = self.openfile)
    mb_file.menu.add_command(label='close', command = menubar.quit)

    mb_file['menu'] = mb_file.menu
    return

def body(self):
    self.filename()

def main():
root = tk.Tk()
k=mywidgets(root)
root.title('menu bar')
root.mainloop()
main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:04:45.880

您不能创建 的两个实例`Tk`。正如您所观察到的，您将获得两个窗口。这不是唯一的问题，只是最明显的问题。

您需要传入对包含这些标签的 winget 的引用。或者，将根窗口存储为全局变量或对象的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T17:10:14.010

将 2 个标签并排放置，即 label1 和 label2：
`label1.grid(column=0, row=0)`
`label2.grid(column=1, row=0)`

应该这样做

# c# - 如果条件或尝试阻止

> ID：13127049
> 
> 赞同：1
> 
> 时间：2012-10-29T17:53:40.750
> 
> 标签：c#, .net

哪个更好用？

```
if (condition)
{
    flagCheck = true;

    //Service layer call - code.

    flagCheck = false;
} 
```

或者

```
if (condition)
{
    flagCheck = true;

    try
    {
       //Service layer call - code.
    }
    finally
    {
        flagCheck = false;
    }
} 
```

这两种方法有什么区别？在某些情况下，一种可以比另一种更适合使用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T17:56:39.610

在第一种情况下，如果抛出异常，则`flagCheck`保留，而在第二种情况下，无论是否抛出异常，都将设置为after 。`true``// Service layer call - code``flagCheck``false``// Service layer call - code`

这两种情况都不比另一种更好。选择能满足您需求的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T17:56:20.763

那么`try`块意味着您正在寻找`dangerous`在允许程序崩溃之前需要处理的操作。通常`if`，代替语句`try`仅适用于运行时异常。IE 空引用异常

# c - 在 C 中的函数中使用#define 数字

> ID：13127051
> 
> 赞同：0
> 
> 时间：2012-10-29T17:53:49.340
> 
> 标签：c, function, c-preprocessor

为什么这段代码不起作用？（这不是实际代码，而是简化版）

```
#include <stdio.h>
#define NUMBER 5
int function( int NUMBER );

int main (void)
{
    function( NUMBER );
    return 0;

}
int function( int NUMBER )
{
    printf("Hi %d\n", NUMBER);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T17:55:22.773

```
#define NUMBER 5
int function( int NUMBER ); 
```

`#define`是一个预处理宏，简单的文本替换。所以，让我们看看你真正想要编译的是什么：

```
int function( int 5 ); 
```

这没有任何意义。这部分很好：

```
int main (void)
{
    function( NUMBER );
    return 0;    
} 
```

因为您使用 value进行*调用* ，但 的签名应如下所示：`function``5``function`

```
int function( int x );  // the argument is a variable, x 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T17:55:11.023

```
 #define NUMBER 5
 int function( int NUMBER ); 
```

是相同的：

```
 int function( int 5 ); 
```

参数名称不能有数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T17:59:17.047

它不起作用，因为您所做的事情毫无意义。阅读上面的答案以了解原因。

它应该是这样的：

```
#include <stdio.h>
#define NUMBER 5

void function ( int );  // a function prototype, saying 'function' accepts an int as the first argument.

int main ( void ) // the 'main' is called when the program runs.
{
   function ( NUMBER );
   return 0;  // returning zero means that no error was encounter in the program
}

void function( int i )
{
   printf ( "Hi %d\n", i );
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T18:03:33.163

预处理后，您的代码如下所示：

```
int function( int 5 );

int main (void)
{
    function( 5 );
    return 0;

}
int function( int 5 )
{
    printf("Hi %d\n", 5 );
    return 0;
} 
```

也就是说，在编译代码之前，所有出现的符号`NUMBER`都被替换为整数常量。`5`这在对 的*调用*中可以正常工作`function`，但在声明或定义中却不行；参数*名称*不能是整数常量表达式。

您将需要更改声明和定义，以便不命名参数`NUMBER`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T17:56:31.523

行`int function( int NUMBER );`是一个函数原型，是吗？您应该在其中省略 NUMBER。此外，您的函数定义应该有自己的输入变量名称 - 不要使用 NUMBER，所以要像这样：

```
int function( int num )
{
    printf("Hi\n");
    return 0;
} 
```

# python - 在python中将字符串解析为日期

> ID：13127058
> 
> 赞同：1
> 
> 时间：2012-10-29T17:54:42.870
> 
> 标签：python, date

> **可能重复：**
> [解析日期并使用 python 格式化？](https://stackoverflow.com/questions/2265357/parse-date-and-format-it-using-python)

我对 Python 很陌生。我有以下两个字符串：

```
Mon, 29 Oct 2012 13:07:07 GMT
2012-10-29 12:57:08 
```

我希望python中可以有任何日期解析库，它可以将上述两个字符串解析为如下内容：

```
2012-10-29 12:57:08 
```

以便我可以比较它们。请注意，比较应该能够产生类似于整数比较的结果。Like`1`小于`2`, 所以同样的方式`2012-10-29 12:57:08`小于`2012-10-29 13:57:08`

在python中有什么容易做到的吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:00:00.133

使用该[`dateutil`模块](http://labix.org/python-dateutil)进行一般日期解析：

```
>>> from dateutil.parser import parse
>>> parse('Mon, 29 Oct 2012 13:07:07 GMT')
datetime.datetime(2012, 10, 29, 13, 7, 7, tzinfo=tzutc())
>>> parse('2012-10-29 12:57:08')
datetime.datetime(2012, 10, 29, 12, 57, 8) 
```

`datetime.datetime`可以通过多种方式比较对象。

如果您知道要解析的每个日期字符串的确切格式，您还可以使用以下[`datetime.datetime.strptime()`方法](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)更明确地进行解析：

```
>>> import datetime
>>> datetime.datetime.strptime('Mon, 29 Oct 2012 13:07:07 GMT', '%a, %d %b %Y %H:%M:%S %Z')
datetime.datetime(2012, 10, 29, 13, 7, 7) 
```

但是请注意，该方法会*忽略*时区！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:56:22.870

是的，[`time.strptime`](http://docs.python.org/2/library/time.html#time.strptime)可以将文本转换为日期表示。从那里你可以用[`strftime`](http://docs.python.org/2/library/time.html#time.strftime)你喜欢的方式打印它。

```
>>> a = '2012-10-29 12:57:08'
>>> time.strptime(a, '%Y-%m-%d %H:%M:%S')
time.struct_time(tm_year=2012, tm_mon=10, tm_mday=29, tm_hour=12, tm_min=57, tm_sec=8, tm_wday=0, tm_yday=303, tm_isdst=-1)
>>> b = 'Mon, 29 Oct 2012 13:07:07 GMT'
>>> time.strptime(b, '%a, %d %b %Y %H:%M:%S %Z')
time.struct_time(tm_year=2012, tm_mon=10, tm_mday=29, tm_hour=13, tm_min=7, tm_sec=7, tm_wday=0, tm_yday=303, tm_isdst=0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T17:59:34.373

python 中的`datetime`模块及其`strptime`功能（字符串解析）可以做到这一点。

例如，您可以像这样使用函数：

```
somestring = '2004-03-13T03:00:00Z'
result = datetime.datetime.strptime(somestring, '%Y-%m-%dT%H:%M:%SZ') 
```

文档[在这里](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)。

# android - onNewIntent(intent) 不能正常工作

> ID：13127060
> 
> 赞同：14
> 
> 时间：2012-10-29T17:54:43.787
> 
> 标签：android, oauth

我正在构建这个 twitter 应用程序，其中调用浏览器以从我的主要活动进行身份验证.. 在线程中运行以下代码（AsyncTask）

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url)).setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_FROM_BACKGROUND);
context.startActivity(intent); 
```

这里

```
context is the context of main activity..the uri is returned through `intent`.. 
```

经过身份验证后，它要做的是回到我的主要活动，回到它现在的状态。现在发生的事情是，它创建了另一个主要活动的实例。

我在用

```
@Override
public void onNewIntent(Intent intent) {
    super.onNewIntent(intent); 
    SharedPreferences prefs = getSharedPreferences("twitter", 0);
    final Uri uri = intent.getData();
    if (uri != null && uri.getScheme().equals(Constants.OAUTH_CALLBACK_SCHEME)) {

        setLoggedIn(true, tlogout);
        tstatus=true;

        new RetrieveAccessTokenTask(this,consumer,provider,prefs,tstring).execute(uri);

    }
} 
```

但是，问题仍然存在..另一件事是，在模拟器（2.3）中一切正常..在我的设备中不起作用..它的 Android 2.3.6

我的清单是

```
<activity
    android:name=".mainActivity"

    android:launchMode="singleTask"

    android:label="@string/title_activity_main" >
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="x-oauthflow-twitter" android:host="callback" />

    </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:15:43.463

我不熟悉 Twitter 认证过程，但您可以尝试`FLAG_ACTIVITY_CLEAR_TOP`代替`Intent.FLAG_ACTIVITY_SINGLE_TOP`.

后者仅适用于您的主要活动在堆栈顶部，另一个清除堆栈并确保您的活动在顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:11:23.560

OAuthRequestTokenTask.java

```
package com.android.twit;

import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.util.Log;

public class OAuthRequestTokenTask extends AsyncTask<Void, Void, Void> {

final String TAG = getClass().getName();
private Context context;
private OAuthProvider provider;
private OAuthConsumer consumer;

/**
 * 
 * We pass the OAuth consumer and provider.
 * 
 * @param context
 *            Required to be able to start the intent to launch the browser.
 * @param provider
 *            The OAuthProvider object
 * @param consumer
 *            The OAuthConsumer object
 */
public OAuthRequestTokenTask(Context context, OAuthConsumer consumer,
        OAuthProvider provider) {
    this.context = context;
    this.consumer = consumer;
    this.provider = provider;
}

/**
 * 
 * Retrieve the OAuth Request Token and present a browser to the user to
 * authorize the token.
 * 
 */
@Override
protected Void doInBackground(Void... params) {

    try {
        Log.i(TAG, "Retrieving request token from Google servers");
        final String url = provider.retrieveRequestToken(consumer,
                ConstantsTwit.OAUTH_CALLBACK_URL);
        Log.i(TAG, "Popping a browser with the authorize URL : " + url);
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url))
                .setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP
                        | Intent.FLAG_ACTIVITY_NO_HISTORY
                        | Intent.FLAG_FROM_BACKGROUND);
        context.startActivity(intent);
    } catch (Exception e) {
        Log.e(TAG, "Error during OAUth retrieve request token", e);
    }

    return null;
}

} 
```

PrepareRequestTokenActivity.java

```
package com.android.twit;

import oauth.signpost.OAuth;
import oauth.signpost.OAuthConsumer;
import oauth.signpost.OAuthProvider;
import oauth.signpost.basic.DefaultOAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;

public class PrepareRequestTokenActivity extends Activity {

final String TAG = getClass().getName();

private OAuthConsumer consumer;
private OAuthProvider provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    try {
        // CommonsHttpOAuthConsumer
        this.consumer = new CommonsHttpOAuthConsumer(
                ConstantsTwit.CONSUMER_KEY, ConstantsTwit.CONSUMER_SECRET);
        // this.provider = new
        // CommonsHttpOAuthProvider(Constants.REQUEST_URL,
        // Constants.ACCESS_URL, Constants.AUTHORIZE_URL);
        this.provider = new DefaultOAuthProvider(ConstantsTwit.REQUEST_URL,
                ConstantsTwit.ACCESS_URL, ConstantsTwit.AUTHORIZE_URL);
    } catch (Exception e) {
        Log.e(TAG, "Error creating consumer / provider", e);
    }

    Log.i(TAG, "Starting task to retrieve request token.");
    new OAuthRequestTokenTask(this, this.consumer, this.provider).execute();
}

/**
 * Called when the OAuthRequestTokenTask finishes (user has authorized the
 * request token). The callback URL will be intercepted here.
 */
@Override
public void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    Log.e("", "onNewIntent() is called...");
    SharedPreferences prefs = PreferenceManager
            .getDefaultSharedPreferences(this);
    final Uri uri = intent.getData();
    if (uri != null
            && uri.getScheme().equals(ConstantsTwit.OAUTH_CALLBACK_SCHEME)) {
        Log.i(TAG, "Callback received : " + uri);
        Log.i(TAG, "Retrieving Access Token");
        new RetrieveAccessTokenTask(this, consumer, provider, prefs)
                .execute(uri);
        finish();
    }
}

public class RetrieveAccessTokenTask extends AsyncTask<Uri, Void, Void> {

    private Context context;
    private OAuthProvider provider;
    private OAuthConsumer consumer;
    private SharedPreferences prefs;

    public RetrieveAccessTokenTask(Context context, OAuthConsumer consumer,
            OAuthProvider provider, SharedPreferences prefs) {
        this.context = context;
        this.consumer = consumer;
        this.provider = provider;
        this.prefs = prefs;
    }

    /**
     * Retrieve the oauth_verifier, and store the oauth and
     * oauth_token_secret for future API calls.
     */
    @Override
    protected Void doInBackground(Uri... params) {
        final Uri uri = params[0];
        final String oauth_verifier = uri
                .getQueryParameter(OAuth.OAUTH_VERIFIER);

        try {
            provider.retrieveAccessToken(consumer, oauth_verifier);

            final Editor edit = prefs.edit();
            edit.putString(OAuth.OAUTH_TOKEN, consumer.getToken());
            edit.putString(OAuth.OAUTH_TOKEN_SECRET,
                    consumer.getTokenSecret());
            edit.commit();

            String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
            String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

            consumer.setTokenWithSecret(token, secret);
            // context.startActivity(new Intent(context,
            // AndroidTwitterSample.class));

            executeAfterAccessTokenRetrieval();

            Log.e(TAG, "OAuth - Access Token Retrieved");

        } catch (Exception e) {
            Log.e(TAG, "OAuth - Access Token Retrieval Error", e);
        }

        return null;
    }

    private void executeAfterAccessTokenRetrieval() {
        String msg = getIntent().getExtras().getString("tweet_msg");
        String path = getIntent().getExtras().getString("imagePath");
        try {
            TwitterUtils.sendTweet(prefs, msg, path);
        } catch (Exception e) {
            Log.e(TAG, "OAuth - Error sending to Twitter", e);
        }
    }
}

} 
```

常量Twit.java

```
package com.android.twit;

public class ConstantsTwit {

public static final String CONSUMER_KEY = "xxxxxxxxxxxxxxx";
public static final String CONSUMER_SECRET = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";

public static final String REQUEST_URL = "  https://api.twitter.com/oauth/request_token";
public static final String ACCESS_URL = "https://api.twitter.com/oauth/access_token";
public static final String AUTHORIZE_URL = "https://api.twitter.com/oauth/authorize";

public static final String OAUTH_CALLBACK_SCHEME = "x-test-oauth-twitter";
public static final String OAUTH_CALLBACK_HOST = "callback";
public static final String OAUTH_CALLBACK_URL = OAUTH_CALLBACK_SCHEME
        + "://" + OAUTH_CALLBACK_HOST;

} 
```

在 AndroidManifest.xml 中

```
<activity
        android:name="com.android.twit.PrepareRequestTokenActivity"
        android:configChanges="touchscreen|keyboard|keyboardHidden|navigation|orientation"
        android:excludeFromRecents="true"
        android:launchMode="singleTask"
        android:windowSoftInputMode="stateAlwaysHidden" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="callback"
                android:scheme="x-test-oauth-twitter" />
        </intent-filter>
    </activity> 
```

TwitterUtils.java

```
package com.android.twit;

import oauth.signpost.OAuth;
import twitter4j.Twitter;
import twitter4j.TwitterException;
import twitter4j.TwitterFactory;
import twitter4j.http.AccessToken;
import android.app.Activity;
import android.content.SharedPreferences;
import android.widget.Toast;

public class TwitterUtils {

public static Activity tmp_Add_Daily_Mood;

public static boolean isAuthenticated(SharedPreferences prefs) {

    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token, secret);
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(ConstantsTwit.CONSUMER_KEY,
            ConstantsTwit.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);

    try {
        twitter.getAccountSettings();
        return true;
    } catch (TwitterException e) {
        return false;
    }
}

public static void sendTweet(SharedPreferences prefs, String msg)
        throws Exception {
    String token = prefs.getString(OAuth.OAUTH_TOKEN, "");
    String secret = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

    AccessToken a = new AccessToken(token, secret);
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(ConstantsTwit.CONSUMER_KEY,
            ConstantsTwit.CONSUMER_SECRET);
    twitter.setOAuthAccessToken(a);
    twitter.updateStatus(msg);
}

} 
```

用法

```
Intent i = new Intent(getApplicationContext(),
                    PrepareRequestTokenActivity.class);
i.putExtra("tweet_msg", getTweetMsg());         
startActivity(i); 
```

看看这个...它可能会帮助你..

# c# - 是否有创建可访问受保护成员的工人类的标准模式？

> ID：13127061
> 
> 赞同：1
> 
> 时间：2012-10-29T17:54:44.257
> 
> 标签：c#, inheritance, design-patterns

我只是使用部分类做了一些古怪的事情，我想知道是否有一个已经建立的模式可以使用一种不那么令人困惑的方法完成同样的事情。

**问题：**

*   我有一个基类，其中包含受保护的成员和为派生类设计的虚拟方法，以便在调用它们时工作。

*   我想把这项工作委托给一份工人名单。

*   但是，我需要工作人员可以访问受保护的成员。

**我可能过于复杂的解决方案：**

注意：我意识到这取决于类是部分的 - 我可以接受，但如果有一个不需要它的解决方案会很酷......

```
void Main()
{
    ABase aBase = new ADerived();
    aBase.DoWork();
}

public partial class ABase
{
    protected int state1 = 1;
    protected int state2 = 2;
    List<ABase> workers;

    public ABase()
    {
        workers = new List<ABase>();
        CreateWorkers(workers);
    }

    protected virtual void CreateWorkers(List<ABase> workers)
    {
    }

    public ABase(ABase aBase)
    {
        this.Target = aBase;
    }

    public virtual void DoWork()
    {
        foreach (var worker in this.workers)
        {
            worker.DoWork();
        }
    }

    protected ABase Target { get; private set; }
}

public partial class ABase
{
    public class Worker1 : ABase
    {
        public Worker1(ABase aBase) : base(aBase) { }

        public override void DoWork()
        {
            Console.WriteLine (Target.state1);
        }
    }

    public class Worker2 : ABase
    {
        public Worker2(ABase aBase) : base(aBase) { }

        public override void DoWork()
        {
            Console.WriteLine (Target.state2);
        }
    }
}

public class ADerived : ABase
{
    protected override void CreateWorkers(List<ABase> workers) 
    {
        workers.Add(new Worker1(this));
        workers.Add(new Worker2(this));
    }
} 
```

**输出：**

```
1
2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:11:12.960

我会更改设计，使工作人员根本不访问实例字段。我会`DoWork`使用一个包含他们需要的信息的参数，并让基类将状态传递给`DoWork`方法。

```
public class MyState //TODO give better name
{
    public int State1 { get; set; }
    public int State2 { get; set; }
}

public class ABase
{
    public MyState state = new MyState()
    {
        State1 = 1,
        State2 = 2
    };

    List<Action<MyState>> workers = new List<Action<MyState>>();

    public ABase()
    {
        CreateWorkers();
    }

    public void DoWork()
    {
        foreach (var action in workers)
        {
            action(state);
        }
    }

    private void CreateWorkers()
    {
        workers.Add(new Worker1().DoWork);
        workers.Add(Worker2.Process);
    }
}

public class Worker1
{
    public void DoWork(MyState state)
    {
        Console.WriteLine(state.State1);
    }
}

public class Worker2
{
    public static void Process(MyState state)
    {
        Console.WriteLine(state.State2);
    }
} 
```

# ruby - 如何读入 .rb 文件的内容？

> ID：13127062
> 
> 赞同：0
> 
> 时间：2012-10-29T17:54:43.630
> 
> 标签：ruby, file-io

我可以使用 Ruby (v1.9.3-p125) 读取任何文件，但无法使用以下命令：

```
IO.read("myself.rb")
File.open("myself.rb","rb") 
```

在“*.rb”文件上执行此操作时，它将返回一个空白字符串。如果我将文件重命名为“myself.rabit”，它可以工作。

如何绕过对 ruby​​ 源文件的明显过滤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:06:43.687

没有这样的过滤，您不会遇到您认为遇到的错误。

例如，这可以作为存储在`.rb`文件中的完整 Ruby 程序正常工作：

```
puts File.open(__FILE__).read 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:17:43.590

您已经得到正确答案：使用`__FILE__`.

当您想读取主文件时，还有另一种可能性。

请参阅以下代码：

```
p DATA
p DATA.pos
p DATA.read

__END__
This is text after __END__ 
```

当你执行它时，你会得到

```
#<File:test.rb>
50
"This is text after __END__" 
```

`DATA`是一个文件句柄，位于脚本 ( `__END__`) 的结尾之后 - 在我的示例中它是位置 50。

我经常使用它`DATA`来将数据存储在一种“here-document”中。

您可以使用这种可能性，只需将位置设置为文件开头。

```
DATA.pos= 0
puts DATA.read 
```

两个限制：

*   它仅适用于主文件，不适用于任何文件。
*   `__END__`是强制性的。

# java - 如何将数组存储到 ArrayList 的元素中？

> ID：13127065
> 
> 赞同：2
> 
> 时间：2012-10-29T17:54:52.273
> 
> 标签：java, arraylist

```
Robentry [] Rb = new Robentry[robNum]; 
```

我怎样才能存储`Rb`到一个`ArrayList<E> Rt`，所以`Rt.get(0) == Rb`是`true`。不知道怎么定义`E`的`ArrayList<E>`。

**编辑：**

如果我使用：

```
Robentry [] Rb = new Robentry[robNum];
List<Robentry []> Rt = new  ArrayList<Robentry []>();
// initialize Rb
//...
// 
Rt.add(Rb); 
```

如果我改变`Rb[0]`，`Rt.get(0)[0]`也会改变。那么如何存储`Rb`into的内容，`Rt`使其`Rt`独立于`Rb`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T17:56:09.873

`ArrayList<Robentry[]> arrList`听起来像你想要的。

这意味着`arrList`是`List`（或`ArrayList`）的`Robentry[]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:56:07.720

你可以使用 Type Robentry[] 到一个列表。像 -

```
List<Robentry []> list = new ArrayList<Robentry []>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T17:58:49.433

您可以如下声明和使用`List`of 类型`Robentry[]`：

```
 //Declare a list of type Robentry[] 
    List<Robentry[]> list = new ArrayList<Robentry []>();
    //add the rb to the list
    list.add(Rb);

    //compare the list element with Rb
    System.out.println(list.get(0)==Rb);//should print true 
```

请注意：`==`在上面的示例中很好，因为列表元素与 Rb 相同，否则`equals`建议使用方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T17:59:25.143

```
 ArrayList<Robentry> Rt=(ArrayList<Robentry>) Arrays.asList(Rb); 
```

或以你的方式，

```
ArrayList<Robentry[]> Rt=new ArrayList<Robentry[]>();
rt.add(Rb); 
```

这称为泛型，用于确保变量应仅包含特定类型。请参阅this for official [docs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/generics.html)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-29T18:26:40.970

根据您修改后的问题，您可能想要

```
Rt.add(Rb.clone()); 
```

或者

```
Rt.add(Arrays.copyOf(Rb, Rb.length)); 
```

数组引用是按值传递的，因此如果您希望数组相互独立，则必须进行显式复制。

# text - 社交媒体情感分类数据集

> ID：13127066
> 
> 赞同：5
> 
> 时间：2012-10-29T17:54:54.650
> 
> 标签：text, machine-learning, social-networking

我想对文本进行情感分类（来自社交媒体的帖子，例如推文、facebook 墙贴、youtube 评论等......）。虽然我找不到**带有注释数据的好的数据集**。我正在寻找的不仅仅是带有正面和负面注释的数据。我正在寻找具有多种情绪的数据集。这可以是离散值（ekman 6 基本情绪）或连续值（唤醒效价模型）。有谁知道我在哪里可以得到这样的数据集，这可以来自 twitter、Facebook、Myspace ......只要它来自社交网络

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:32:35.430

好吧，我认为更好的名字（或者，更常用的）是**情感分析**（情感分类）——对吗？我不确定社交媒体是否确实提供了他们的私人数据（也许是其中的一部分）。无论如何，我找到了这篇论文：

[http://www.cs.cornell.edu/home/llee/papers/sentiment.pdf](http://www.cs.cornell.edu/home/llee/papers/sentiment.pdf)

他们正在处理数据：来自[https://groups.google.com/forum/?fromgroups#!aboutgroup/rec.arts的](https://groups.google.com/forum/?fromgroups#!aboutgroup/rec.arts.movies.reviews)[http://www.cs.cornell.edu/people/pabo/movie-review-data/](http://www.cs.cornell.edu/people/pabo/movie-review-data/) [.movi​​es.reviews](https://groups.google.com/forum/?fromgroups#!aboutgroup/rec.arts.movies.reviews)。

它适合你吗？基本上，找到合适的数据通常是 ML 中的一个大问题。通常需要自己构建（我的意思是手动对其中的一部分进行分类，然后应用一些聚类或半监督学习）

如果您在网络上找不到任何合适的内容，我会尝试联系一些撰写与您的研究类似的文章的作者。也许他们已经创建了适合您的数据集...

# c# - 自英国夏令时于周日结束以来，WCF 服务方法失败

> ID：13127071
> 
> 赞同：1
> 
> 时间：2012-10-29T17:55:08.997
> 
> 标签：c#, wcf, c#-4.0, datetime

我有许多 Windows Mobile PDA，它们都与中央服务器通信。自周日以来，每台 PDA 都未能更新。它失败的方法是我的同步服务的第一步，它调用：

```
ServerTimeContract timeContract = Service.GetServerDateTime(); 
```

WCF 端的代码是：

```
public ServerTimeContract GetServerDateTime()
{
    DateTime now = DateTime.Now;
    return new ServerTimeContract(now.ToUniversalTime(), 
        now.IsDaylightSavingTime());
} 
```

为了完整起见，这是`ServerTimeContract`：

```
[Serializable]
[DataContract]
public class ServerTimeContract
{
    [DataMember(IsRequired = true, EmitDefaultValue = false)]
    public DateTime DateTime { get; private set; }
    [DataMember(IsRequired = true, EmitDefaultValue = false)]
    public bool IsDaylightSavings { get; private set; }

    public ServerTimeContract(DateTime dateTime, bool isDaylightSavings)
    {
        DateTime = dateTime;
        IsDaylightSavings = isDaylightSavings;
    }
} 
```

如果我在我的 PC 上将日期更改为 27/10/2012 并运行上述代码，那么它工作正常。如果我将日期更改回今天，我会收到一个异常消息“底层连接已关闭：连接已意外关闭”。

PDA 抛出错误“无法从传输连接读取数据”。

更奇怪的是，如果我将返回方法更改为始终传入`true`第二个构造函数参数，一切正常：

```
public ServerTimeContract GetServerDateTime()
{
    DateTime now = DateTime.Now;
    return new ServerTimeContract(now.ToUniversalTime(), true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:26:51.173

固定的。我刚刚`IsRequired = true`从合同中的 IsDaylightSavings 属性中删除了 。如果有人想发表评论并解释原因，那就太好了。尽管我很确定在这种情况下该属性是不必要的。

# c++ - C++ 中的运算符调用语法

> ID：13127080
> 
> 赞同：8
> 
> 时间：2012-10-29T17:55:24.380
> 
> 标签：c++, operators, comparison-operators

是否会出现语法错误的情况

```
if (first == second) // ... 
```

有什么不同？

```
if (first.operator==(second)) // ... 
```

我不这么认为，只是想知道。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T18:03:15.410

```
a == b 
```

有时相当于

```
a.operator==(b) 
```

有时相当于

```
operator==(a,b) 
```

`==`如果含义最终是非类类型的“内置”含义，有时不等于两者。

每当编译器看到`==`时，如果至少一种类型涉及用户定义的类型，它就会搜索成员运算符（不得隐藏在`a`的类类型范围内）和非成员运算符（使用参数相关查找）并内置在含义上（因为一个类可能通过内置比较隐式转换为普通类型）。如果不止一个是有意义的，那么它会进入重载解决规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T17:56:13.973

如果您的意思是“两种语法何时不等价”，那么答案是当相等运算符不是任何类型的成员时`first`。显然，第二个变体不适用于没有 member 的类型`operator==`。这包括内置类型。

当类型 of 确实存在成员运算符时`first`，两者不同，因为非成员运算符可以允许对`first`and进行类型转换`second`，而具有成员运算符的示例仅允许对 进行转换`second`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:05:21.023

两个语句具有不同效果的情况的一个说明是您对`first`. 例如：

```
struct my_int
{
    int num;

    my_int(int num) : num(num) {}
};

bool operator==(const my_int& a, const my_int& b)
{
    return a.num == b.num;
} 
```

在这种情况下，以下是有效的 C++ 代码：

```
my_int a(1);
int x = 1;

if (x == a) {
    std::cout << "Equal\n";
} 
```

在哪里编译此代码：

```
my_int a(1);
int x = 1;

if (x.operator==(a)) {
    std::cout << "Equal\n";
} 
```

给出如下编译错误：

> Conversion.cpp：在函数'int main（）'中：conversion.cpp：21：16：错误：请求'x'中的成员'operator =='，它是非类类型'int'</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T17:58:37.280

第二个不适用于原语。但是，这两种形式都适用于公开重载该运算符的自定义类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T18:08:08.060

如果您的问题仅基于语法，那么它取决于参数的类型。考虑以下代码：

```
#include <iostream>

using namespace std;

class a {

public:

  a(){
  }

  int operator ==(const a& v){
    cout << "member operator" << endl;
    return false;
  }

};

int operator ==(a &v1, a &v2){
    cout << "external operator" << endl;
    return true;
}

int main(){

  a a1, a2;

  if (a1 == a2 && a1.operator==((const a&)a2)) {
    cout << "done" << endl;
  }

} 
```

在此设置中，两个运算符都被调用。如果函数类型参数相同，似乎会优先选择该方法。

# spring - org.springframework.core.NestedIOException：找不到 URL 的速度模板

> ID：13127082
> 
> 赞同：0
> 
> 时间：2012-10-29T17:55:30.420
> 
> 标签：spring, velocity

带弹簧的速度配置，我缺少一些配置。请告诉我为什么会这样。当我点击我的网址时出现以下错误。

```
SEVERE: Servlet.service() for servlet springDispatcher threw exception
org.springframework.core.NestedIOException: Cannot find Velocity template for URL [layout.vm]: Did you specify the correct resource loader path?; nested exception is org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'layout.vm'
at org.springframework.web.servlet.view.velocity.VelocityLayoutView.checkResource(VelocityLayoutView.java:133)
at org.springframework.web.servlet.view.UrlBasedViewResolver.loadView(UrlBasedViewResolver.java:438)
at org.springframework.web.servlet.view.AbstractCachingViewResolver.createView(AbstractCachingViewResolver.java:186)
at org.springframework.web.servlet.view.UrlBasedViewResolver.createView(UrlBasedViewResolver.java:401)
at org.springframework.web.servlet.view.AbstractCachingViewResolver.resolveViewName(AbstractCachingViewResolver.java:103)
at org.springframework.web.servlet.DispatcherServlet.resolveViewName(DispatcherServlet.java:1211)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1160)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:950)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:861)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:606) 
```

弹簧上下文.xml

```
<bean id="velocityConfig"
class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
<property name="resourceLoaderPath" value="/WEB-INF/velocity/" />
</bean>

<!-- View resolvers can also be configured with ResourceBundles or XML files. 
If you need different view resolving based on Locale, you have to use the 
resource bundle resolver. -->
<bean id="viewResolver"
class="org.springframework.web.servlet.view.velocity.VelocityLayoutViewResolver">
<property name="cache" value="true" />
<property name="prefix" value="" />
<property name="suffix" value=".vm" />
</bean> 
```

当velocityconfig被删除时，我得到了以下异常。

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [org.springframework.web.servlet.view.velocity.VelocityConfig] is defined: expected single bean but found 0
at org.springframework.beans.factory.BeanFactoryUtils.beanOfTypeIncludingAncestors(BeanFactoryUtils.java:367)
at org.springframework.web.servlet.view.velocity.VelocityView.autodetectVelocityEngine(VelocityView.java:239)
at org.springframework.web.servlet.view.velocity.VelocityView.initApplicationContext(VelocityView.java:225)
at org.springframework.context.support.ApplicationObjectSupport.initApplicationContext(ApplicationObjectSupport.java:119)
at org.springframework.web.context.support.WebApplicationObjectSupport.initApplicationContext(WebApplicationObjectSupport.java:72)
at org.springframework.context.support.ApplicationObjectSupport.setApplicationContext(ApplicationObjectSupport.java:73)
at org.springframework.context.support.ApplicationContextAwareProcessor.invokeAwareInterfaces(ApplicationContextAwareProcessor.java:117)
at org.springframework.context.support.ApplicationContextAwareProcessor.postProcessBeforeInitialization(ApplicationContextAwareProcessor.java:92)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)
at org.springframework.beans.fact 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:09:26.843

如果我没记错的话，您将能够`viewResolver`单独使用您的 Velocity 配置。

将您的前缀修改为您的 resourceLoaderPath 中提到的前缀，它应该没问题（自己没有测试过）

```
<property name="prefix"><value>/WEB-INF/velocity/</value></property> 
```

此外，您可以完全删除`velocityConfig`标签。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-02-05T02:19:25.000

你应该使用

```
(bean id="ViewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver") 
```

不是

```
(bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityLayoutViewResolver") 
```

这个bean使用'layout.vm'，我也有这个问题。

# ads - 如何跟踪 VAST 3.0 封装广告素材的点击次数？

> ID：13127087
> 
> 赞同：1
> 
> 时间：2012-10-29T17:55:53.523
> 
> 标签：ads, vast

我的服务器返回[VAST 3.0](http://www.iab.net/media/file/VASTv3.0.pdf) XML，其中包含引用第 3 方广告素材的包装器：

```
<VAST version="3.0">
   <Ad>
      <Wrapper>
         <AdSystem>MyAdSystem</AdSystem>
         <Impression>http://myserver/impression_tracker</Impression>
         <VASTAdTagURI>http://ad.doubleclick.net/pfadx/N270.126913.6102203221521/B3876671.21;dcadv=2215309;sz=0x0;ord=%5Btimestamp%5D;dcmt=text/xml</VASTAdTagURI>
         <Creatives>
            <Linear>
               <VideoClicks>
                  <ClickTracking>http://myserver/click_tracker</ClickTracking>
               </VideoClicks>
            </Linear>
         </Creatives>
      </Wrapper>
   </Ad>
</VAST> 
```

通过指定服务器处理程序 URL 或通过复制/粘贴 XML将其插入到 Google 的[视频套件检查器](https://developers.google.com/interactive-media-ads/docs/vastinspector_dual)中，正确显示前贴片广告（以城市景观/双击徽标开头的视频），然后是测试视频 (android)，并在第一次正确 ping 印象跟踪 URL播放广告帧。

我的问题是：点击广告会重定向到包装广告中指定的点击后到达 URL，并且`<VideoClicks>`无论我是否使用或两者都使用`<ClickThrough>`，都完全忽略了我的外部包装器中的部分。`<ClickTracking>`

阅读规范后，我仍然不确定，是不是：

1.  只是谷歌测试播放器的限制？
2.  我的 XML 错误？
3.  规范本身的限制，只有在“真实”广告中的处理程序的附加参数支持的情况下，才可能通过包装器进行点击跟踪`<VASTAdTagURI>`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T09:49:12.583

这可能是玩家的限制。

我遇到过类似的问题。当其中`VASTAdTagURI`有重定向时，Google Inspector 会显示此错误：

> 错误：收到格式错误的广告响应。

[不过，当我在http://www.videoplaza.com/demo/](http://www.videoplaza.com/demo/)中使用相同的 Vast 标签时，我实际上看到了视频。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T21:39:51.560

你应该有创意元素，即

```
<Creatives>
    <Creative>
       <Linear> 
```

你的xml坏了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T15:49:15.517

面临同样的问题。

我在 VAST 标准中没有发现任何关于这种情况的提及，所以我猜这完全取决于玩家。

我发现 JWPlayer 在使用 VAST 包装器时不会调用第一方广告服务器的点击跟踪

# nhibernate - Fluent NHibernate 和 Ninject 的多个会话

> ID：13127089
> 
> 赞同：0
> 
> 时间：2012-10-29T17:56:00.603
> 
> 标签：nhibernate, fluent-nhibernate, ninject

我正在建立一个多租户、独立的数据库应用程序，并且通过阅读下面关于 stackoverflow 的这篇文章取得了一些良好的进展。

[使用 Fluent nHibernate 和 Ninject 实现多租户。每个租户一个数据库](https://stackoverflow.com/questions/9021766/multitenancy-with-fluent-nhibernate-and-ninject-one-database-per-tenant/9022004)

我看到正在设置两个会话。一种是将用于获取租户信息的“主”会话，然后是特定于子域​​的租户会话。我有应用程序很好地切换到基于域的指定数据库，并且对如何设置“主”数据库会话以及如何使用它有疑问。

我尝试专门为主会话注册一个新会话，但收到关于已注册 ISession 的错误。

我是 nHibernate 的新手，不确定采取此措施的最佳途径。

**NinjectWebCommon.cs**

```
kernel.Bind<WebApplication1.ISessionSource>().To<NHibernateTenantSessionSource>().InSingletonScope();
kernel.Bind<ISession>().ToMethod(c => c.Kernel.Get<WebApplication1.ISessionSource>().CreateSession());
kernel.Bind<ITenantAccessor>().To<DefaultTenantAccessor>(); 
```

**ITenantAccessor.cs**

```
 public Tenant GetCurrentTenant()
    {
      var host = HttpContext.Current.Request.Url != null ? HttpContext.Current.Request.Url.Host : string.Empty;

      var pattern = ConfigurationManager.AppSettings["UrlRegex"];
      var regex = new Regex(pattern);
      var match = regex.Match(host);

      var subdomain = match.Success ? match.Groups[1].Value.ToLowerInvariant() : string.Empty;
      Tenant tenant = null;

      if (subdomain != null)
      {
        // Get Tenant info from Master DB.
        // Look up needs to be cached
        DomainModel.Master.Tenants tenantInfo;

        using (ISession session = new NHibernateMasterSessionSource().CreateSession())
        {
            tenantInfo = session.CreateCriteria<DomainModel.Master.Tenants>()
                .Add(Restrictions.Eq("SubDomain", subdomain))
                .UniqueResult<WebApplication1.DomainModel.Master.Tenants>();
        }

        var connectionString = string.Format(ConfigurationManager.AppSettings["TenanatsDataConnectionStringFormat"], 
            tenantInfo.DbName, tenantInfo.DbUsername, tenantInfo.DbPassword);

        tenant = new Tenant();
        tenant.Name = subdomain;
        tenant.ConnectionString = connectionString;
      }

      return tenant;
    } 
```

感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T01:52:08.873

添加另一个会话绑定并添加一些条件。例如

```
kernel
    .Bind<ISession>()
    .ToMethod(c => c.Kernel.Get<NHibernateMasterSessionSource>().CreateSession())
    .WhenInjectedInto<TenantEvaluationService>(); 
```

# php - 用于查询公共注释的 PHP Facebook FQL

> ID：13127097
> 
> 赞同：1
> 
> 时间：2012-10-29T17:56:28.653
> 
> 标签：php, facebook-like, facebook-php-sdk, facebook-fql

我创建了一个没有特殊权限的应用程序。使用这个应用程序，我可以查询 Facebook 事件以显示在我的网站上。这一切都很好。

我现在想通过显示我的粉丝页面的 Facebook 笔记来扩展网站。当我尝试实现它时，我收到错误消息：

“需要用户会话”

在 FQL-Note API 参考中，他们说“任何有效的 access_token，如果它是由页面编写的公共笔记”。我想我有一个有效的公共令牌。

```
require '../src/fb-sdk/src/facebook.php';

$facebooknotes = new Facebook(array(
    'appId'  => 'xxxxxxxxxxxxxxx',
    'secret' => 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy',
    'cookie' => false, // enable optional cookie support
));

$fql_notes = "SELECT uid, note_id, title, content, content_html, created_time, updated_time FROM note WHERE uid = 149018831796518";

$param  =   array(
'method'    => 'fql.query',
'query'     => $fql_notes,
'callback'  => ''
);

$fql_notesResult   =   $facebooknotes->api($param);

foreach($fql_notesResult as $keys => $fbnotevalues){ echo "<h2>" . $fbnotevalues['title'] . "</h2>" . $fbnotevalues['content_html']; } 
```

有人可以帮忙吗？

问候，

边缘射击

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:07:48.870

FQL 似乎无法获取页面的注释。该`uid`字段正在寻找用户 ID。我的猜测是，如果您获得了适当的访问令牌，您仍然会遇到错误，因为您的 ID 不属于某个页面。

要获取页面的注释，您需要使用图形 API：

```
$fql_notesResult   =   $facebooknotes->api('/149018831796518/notes', 'GET');
foreach($fql_notesResult as $keys => $fbnotevalues){ 
  echo "<h2>" . $fbnotevalues['subject'] . "</h2>" . $fbnotevalues['message']; 
} 
```

# java - 尝试从数组中随机选择一个值时出错

> ID：13127102
> 
> 赞同：0
> 
> 时间：2012-10-29T17:56:49.697
> 
> 标签：java, arrays, random

我有一个主类，我在其中定义了一个 Seat 类型的二维数组，然后使用一种方法随机选择一个座位元素并将其设置为“已预订”

但是，如果它必须随机选择超过 1 个（有时即使它只需要随机选择一个）座位元素，它会返回此错误：

```
"Exception in thread "main" java.lang.NullPointerException
    at cinemasystem.Seat.bookSeat(Seat.java:173)
    at cinemasystem.CinemaSystem.main(CinemaSystem.java:70)
Java Result: 1" 
```

我不知道我做错了什么，可能与我的随机生成方法有关，无论如何，任何帮助将不胜感激。

主类：

```
public static void main(String[] args) {

        Seat cinemaactual = new Seat("Cinema");
        Seat[][] cinema = new Seat[12][23];
        Seat bookedSeat = new Seat("");

        Ticket ticket = new Ticket();
        Scanner scan = new Scanner(System.in);
        String answer, contiune, list;
        cinemaactual.CreateTheatre(cinema);
        int number, check = 0, category, id;

        do {

            System.out.print("Welcome to the Theatre Booking System. (QUIT to exit)"
                    + "\nWould you like to purchase tickets or list available seats?"
                    + "(/Purchase/List/Help)");
            answer = scan.nextLine();

            if (answer.equalsIgnoreCase("purchase")) {
                do {

                    System.out.println("Please choose the cateogry of ticket "
                            + "you would like, followed by who the ticket is for"
                            + "and the amount required. (separated by a space)\n"
                            + "1\. Gold\n2\. Silver\n3\. Bronze\n\n1\. Adult\n2."
                            + " Child\n3\. Concession");
                    category = scan.nextInt();
                    check = category;
                    id = scan.nextInt();
                    number = scan.nextInt();
                    if (category == 1 || category == 2 || category == 3 && id == 1 || id == 2 || id == 3) {

                        ticket.SetType(category);
                        if (category == 1) {
                            ticket.SetName("Gold");
                        } else if (category == 2) {
                            ticket.SetName("Siler");
                        } else {
                            ticket.SetName("Bronze");
                        }
                        ticket.SetNumber(number);
                        ticket.SetID(id);
                        if (id == 1) {
                            ticket.SetCategory("Adult");
                        } else if (id == 2) {
                            ticket.SetCategory("Child");
                        } else {
                            ticket.SetCategory("Bronze");
                        }
                        System.out.print("You have selected "
                                + ticket.GetNumber() + " " + ticket.GetName()
                                + " ticket(s) at the " + ticket.GetCategory() + " price.");
                        System.out.println();
                        ticket.BuyTicket(category, id);
                        bookedSeat = Seat.bookSeat(cinema, number);

                    } else {

                        System.out.print("Sorry, incorrect input, please enter an apropriate value.");
                        check = scan.nextInt();
                    }
                } while (check == 0 || check > 3);

                do {
                    System.out.print("Would you like to perchase more tickets? (Yes/No)");
                    contiune = scan.nextLine();

                    if (contiune.equalsIgnoreCase("Yes")) {
                        System.out.print("Would you like to list available seats? (Yes/No) (A/G/S/B)");
                        list = scan.nextLine();
                        cinemaactual.DisplayTheatre(cinema);
                        if (list.equalsIgnoreCase("Yes")) {
                            cinemaactual.DisplayTheatre(cinema);

                        }
                    } 
```

在我的座位类别中随机选择座位的方法：

```
 public static Seat bookSeat(Seat[][] x, int number){
        int count = 0;
        Seat book = new Seat("");
        Random rand = new Random();
        while(count < number){
    if (x != null) {

        do {
        book = x[rand.nextInt(x.length)][rand.nextInt(x.length)];
        book.bookSeat(true);}

        while (book.isBooked());
    }   count++; }
    return book;
} 
```

172号线和173号线座位

172：`book = x[rand.nextInt(x.length)][rand.nextInt(x.length)];`

173: `book.bookSeat(true);}`

Seat 类中的 CreateTheatre 方法：

```
 public Seat[][] CreateTheatre(Seat[][] x) {

        for (int row = 0; row < 8; row++) {
            for (int col = 0; col < 4; col++) {
                x[row][col] = new Seat("B");
            }
        }
        for (int row = 8; row < 12; row++) {
            for (int col = 0; col < 4; col++) {
                x[row][col] = new Seat("S");
            }
        }

        for (int row = 0; row < 8; row++) {
            for (int col = 19; col < 23; col++) {
                x[row][col] = new Seat("B");
            }
        }
        for (int row = 8; row < 12; row++) {
            for (int col = 19; col < 23; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 3; row < 5; row++) {
            for (int col = 4; col < 9; col++) {
                x[row][col] = new Seat("B");
            }
        }
        for (int row = 3; row < 5; row++) {
            for (int col = 14; col < 19; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 9; row < 12; row++) {
            for (int col = 7; col < 4; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 3; row < 5; row++) {
            for (int col = 14; col < 20; col++) {
                x[row][col] = new Seat("B");
            }
        }

        for (int row = 5; row < 9; row++) {
            for (int col = 4; col < 9; col++) {
                x[row][col] = new Seat("S");
            }
        }

        for (int row = 5; row < 9; row++) {
            for (int col = 14; col < 20; col++) {
                x[row][col] = new Seat("S");
            }
        }
        for (int row = 6; row < 9; row++) {
            for (int col = 9; col < 14; col++) {
                x[row][col] = new Seat("G");
            }
        }
        for (int row = 9; row < 12; row++) {
            for (int col = 7; col < 16; col++) {
                x[row][col] = new Seat("G");
            }
        }

        for (int row = 9; row < 12; row++){
            for (int col = 4; col < 7; col++){
                x[row][col] = new Seat("S");
            }
        }

        for (int row = 9; row < 12; row++){
            for (int col = 16; col < 19; col++){
                x[row][col] = new Seat("S");
            }
        }
        return x;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:03:02.880

如果您检查了`CreateTheatre`逻辑，则内部的值`cinema`可能为空。通过一个循环将默认值放入数组中。

以行为例，`0`您只填充从`0`to 到`4`然后`19`to 的值`23`。除此之外，我看不到您填写值。

```
for(int i = 0; i<cinema.length;i++)
    for(int j=0; j<cinema[i].length;j++)
      cinema[i][j] = new Seat(""); 
```

更新：如果不想放空座位，那么您可以在调用之前添加空检查`book.bookSeat(true)`

```
if(book != null){
 book.bookSeat(true);
} 
```

* * *

*您可以使用 打印多维数组`Arrays.deepToString(cinema)`。*

*正如在其他线程使用中指出的那样`book = x[rand.nextInt(12)][rand.nextInt(23)]`*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:04:45.117

我不确定这是否是您收到错误的原因，我不知道这是来自哪条线路，但现在这是错误的：

你来做这件事：

```
Seat[][] cinema = new Seat[12][23]; 
```

然后你这样做：

```
book = x[rand.nextInt(x.length)][rand.nextInt(x.length)]; 
```

这相当于：

```
book = x[rand.nextInt(12)][rand.nextInt(12)] 
```

当我假设你真正想要做的是：

```
book = x[rand.nextInt(12)][rand.nextInt(23)] 
```

考虑一下：

```
Seat[] y = x[rand.nextInt(x.length)];
book = y[rand.nextInt(y.length)]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:09:43.500

我认为`NullPointerException`异常的根本原因在于`CreateTheatre`方法。请确保座位数组的所有行和列（即 12*23）都用`Seat`Object 填充。

**一些观察：**

1.  这个循环似乎没有做任何事情，因为`col`它被初始化`7`并与`<4`.

    ```
    for (int row = 9; row < 12; row++) {
        for (int col = 7; col < 4; col++) {
            x[row][col] = new Seat("S");
        }
     } 
    ```

2.  这个循环

    ```
    for (int row = 3; row < 5; row++) {
        for (int col = 14; col < 19; col++) {
            x[row][col] = new Seat("S");
        }
    } 
    ```

    似乎与此循环重叠，因为它使用相同的行但重叠的列。

    ```
    for (int row = 3; row < 5; row++) {
        for (int col = 14; col < 20; col++) {
            x[row][col] = new Seat("B");
        }
     } 
    ```

**最后，有几个席位未初始化，如下所示，这是`NullPointerException`在`bookSeat()`方法中使用时造成的。**

```
B, B, B, B, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, B, B, B, B
B, B, B, B, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, B, B, B, B
B, B, B, B, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, B, B, B, B
B, B, B, B, B,    B,    B,    B,    B,    null, null, null, null, null, B,    B,    B,    B,    B,    B, B, B, B
B, B, B, B, B,    B,    B,    B,    B,    null, null, null, null, null, B,    B,    B,    B,    B,    B, B, B, B
B, B, B, B, S,    S,    S,    S,    S,    null, null, null, null, null, S,    S,    S,    S,    S,    S, B, B, B
B, B, B, B, S,    S,    S,    S,    S,    G,    G,    G,    G,    G,    S,    S,    S,    S,    S,    S, B, B, B
B, B, B, B, S,    S,    S,    S,    S,    G,    G,    G,    G,    G,    S,    S,    S,    S,    S,    S, B, B, B
S, S, S, S, S,    S,    S,    S,    S,    G,    G,    G,    G,    G,    S,    S,    S,    S,    S,    S, S, S, S
S, S, S, S, S,    S,    S,    S,    S,    G,    G,    G,    G,    G,    S,    S,    S,    S,    S,    S, S, S, S
S, S, S, S, S,    S,    S,    S,    S,    G,    G,    G,    G,    G,    S,    S,    S,    S,    S,    S, S, S, S
S, S, S, S, S,    S,    S,    S,    S,    G,    G,    G,    G,    G,    S,    S,    S,    S,    S,    S, S, S, S 
```

如果您想初始化所有座位，那么我认为您可能需要更新`CreateTheatre`以下循环：

```
 for (int row = 0; row < 8; row++) {
            for (int col = 0; col < 4; col++) {
                x[row][col] = new Seat("B");;
            }
        }
        for (int row = 8; row < 12; row++) {
            for (int col = 0; col < 4; col++) {
                x[row][col] = new Seat("S");;
            }
        }

        for (int row = 0; row < 8; row++) {
            for (int col = 19; col < 23; col++) {
                x[row][col] = new Seat("B");;
            }
        }

        for (int row = 0; row < 3; row++) {
            for (int col = 4; col < 20; col++) {
                x[row][col] = new Seat("G");;
            }
        }

        for (int row = 8; row < 12; row++) {
            for (int col = 19; col < 23; col++) {
                x[row][col] = new Seat("S");;
            }
        }
        for (int row = 3; row < 5; row++) {
            for (int col = 4; col < 9; col++) {
                x[row][col] = new Seat("B");;
            }
        }
        for (int row = 3; row < 5; row++) {
            for (int col = 8; col < 20; col++) {
                x[row][col] = new Seat("S");;
            }
        }
        for (int row = 9; row < 12; row++) {
            for (int col = 7; col < 14; col++) {
                x[row][col] = new Seat("S");;
            }
        }
        for (int row = 9; row < 12; row++) {
            for (int col = 14; col < 20; col++) {
                x[row][col] = new Seat("B");;
            }
        }

        for (int row = 5; row < 9; row++) {
            for (int col = 4; col < 9; col++) {
                x[row][col] = new Seat("S");;
            }
        }

        for (int row = 5; row < 9; row++) {
            for (int col = 14; col < 20; col++) {
                x[row][col] = new Seat("S");;
            }
        }
        for (int row = 5; row < 9; row++) {
            for (int col = 9; col < 14; col++) {
                x[row][col] = new Seat("G");;
            }
        }
        for (int row = 9; row < 12; row++) {
            for (int col = 7; col < 16; col++) {
                x[row][col] = new Seat("G");;
            }
        }

        for (int row = 9; row < 12; row++){
            for (int col = 4; col < 7; col++){
                x[row][col] = new Seat("S");;
            }
        }

        for (int row = 9; row < 12; row++){
            for (int col = 16; col < 19; col++){
                x[row][col] = new Seat("S");;
            }
        } 
```

**另外，**由于您的行和列不一样（Seat[12][23]--> 12 行和 23 列），我认为您想在`bookSeat()`方法中更改此语句：

```
 book = x[rand.nextInt(x.length)][rand.nextInt(x.length)]; 
```

用作`x[0].length`列长度，如下所示：

```
 book = x[rand.nextInt(x.length)][rand.nextInt(x[0].length)]; 
```

# c# - 如何将 AddComponentInstance 转换为 Register

> ID：13127110
> 
> 赞同：0
> 
> 时间：2012-10-29T17:57:09.140
> 
> 标签：c#, castle-windsor

AddComponentInstance 的：

```
WindsorContainer.Kernel.AddComponentInstance<T>(typeof(T), instance); 
```

已过时。

它的替换是：

```
WindsorContainer.Register(Component.For<IClassParameters>().ImplementedBy<ClassParameters>()); 
```

但是我有一个门面：

```
public static void AddInstance<T>(object instance)
    {
        _iocManager.WindsorContainer.Kernel.AddComponentInstance<T>(typeof(T), instance);
    } 
```

我看不到如何使用 Register 方法而不是 AddComponentInstance。
这是错误的：

```
_iocManager.WindsorContainer.Register(Component.For<T>().ImplementedBy<T>().Instance(instance)); 
```

我应该使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T12:01:51.157

答案是：

```
 public static void AddInstance<T>(T instance) where T : class 
    {
        _iocManager.WindsorContainer.Register(Component.For<T>().Instance(instance));
    } 
```

请注意强制编译器将 T 作为 Class 并因此作为 Ref 变量的方法签名

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T20:54:58.070

```
container.Register(Component.For<Foo>().Instance(new Foo()); 
```

# c# - 如何将二进制文件转换为一串零和一，反之亦然

> ID：13127113
> 
> 赞同：0
> 
> 时间：2012-10-29T17:57:25.953
> 
> 标签：c#, string, binary

我是 C# 二进制的新手，我需要知道一些事情......

1.  读取exe

2.  将其转换为字符串（例如 10001011）

3.  修改字符串

4.  写回一个新的exe

我听说了一些关于`string.Join`将二进制转换为字符串的东西，但我不太明白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:05:40.077

要将 exe 转换为二进制字符串，首先将其读入字节数组：

```
byte[] fileBytes = File.ReadAllBytes(inputFilename); 
```

然后：

```
public static string ToBinaryString(byte[] array)
{
    var s = new StringBuilder();
    foreach (byte b in array)
        s.Append(Convert.ToString(b, 2));

    return s.ToString();
} 
```

将其转换为二进制字符串。

要将二进制字符串转换回字节数组：

```
public static byte[] FromBinaryString(string s)  
{
    int count = s.Length / 8;
    var b = new byte[count];
    for (int i = 0; i < count ; i++)
        b[i] = Convert.ToByte(s.Substring(i * 8, 8), 2);

    return b;
} 
```

最后，写入文件：

```
File.WriteAllBytes(path, fileBytes); 
```

# jquery - 附加到 jQuery Datepicker 模糊事件

> ID：13127115
> 
> 赞同：7
> 
> 时间：2012-10-29T17:57:32.550
> 
> 标签：jquery, jquery-ui, datepicker, jquery-events, blur

我正在开发一个用于文本框的 jQuery 插件，我希望它可以与使用文本框的 jQueryUI 小部件一起使用，例如 datepicker。这给我带来了问题，因为日期选择器上的模糊事件似乎是在实际设置值之前引发的。

我使用的一种解决方法是在执行我的代码之前设置一个超时，以便有时间设置 datepickers 值。见下面的代码：

```
$(this).blur(function() {
    // $(this).val() == ""
    var elem = $(this);
    setTimeout(function() {
        //elem.val() != ""
    },100);
}); 
```

我不确定这种解决方法是否是问题的最佳解决方案，或者即使它总是有效。如果我将超时设置为 10 毫秒而不是 100 毫秒，则它不起作用 - 我担心代码是否由于某种原因执行缓慢，100 可能并不总是足够的。

谁能想到一个更好的解决这个问题的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T09:07:11.777

`onClose`最后，我的解决方案是，如果有问题的文本框被日期选择器使用（通过检查`hasDatepicker`类），则动态连接到事件。这样做的问题是您不能像往常一样绑定到事件，因为日期选择器只能将一个函数附加到它的特定事件。为了解决这个问题，我检查是否已经附加了一个函数，如果是，在我的代码之后调用它：

```
var elem = $(this);
var someFunction = function() {
    //elem.val() != ""
}
if (elem.hasClass('hasDatepicker')) {
    var onClose = elem.datepicker('option','onClose');
    elem.datepicker('option','onClose', function() {
        someFunction();
        if (onClose) { onClose(elem.val()); }
    });
} else {
    elem.bind('blur',someFunction);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T18:11:24.703

您可以将 datepicker 中的几个事件绑定到其中，`onSelect`或者在它们中是 datepicker selector 的输入。您也可以使用 datepicker参数来获取值`onClose``this``ui`

```
$(selector).datepicker({
     onClose:function(evt, ui){             
          $(this).myPlugin('someMethod');
     })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T14:49:55.323

这是更简单的方法：

```
$('#element').datepicker({
    onClose: function() {
        $(this).trigger('change');
    }
});

$('#element').bind('change',function(){
    // someFunction();
}); 
```

# wordpress - 虹膜 Wordpress 主题滑块不起作用

> ID：13127121
> 
> 赞同：0
> 
> 时间：2012-10-29T17:58:03.983
> 
> 标签：wordpress, slider, themes

我为我的 wordpress 网站购买了 iris 主题。一切正常，但无论如何滑块都不会显示在主页上。我有一个静态主页，并添加了至少 1060 像素宽的图像，就像它想要的那样。我已阅读文档，但找不到任何解决我问题的方法。如果有人有 Iris 经验并能带领我朝着正确的方向前进，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:30:07.097

嗬！我忘记在页面属性下选择`Home Page`模板。

# apache - Symfony2：无法启动会话，因为标头已经发送

> ID：13127122
> 
> 赞同：7
> 
> 时间：2012-10-29T17:58:06.703
> 
> 标签：apache, symfony, nginx, php

TL;DR 在带有 Nginx / PHP-FPM 的 Linux 机器上出现错误，说明“无法启动会话，因为已经发送了标头。”。Apache 本地机器设置上未发生错误

所以在我的本地机器上，我的 Symfony2 应用程序运行良好。没有错误弹出。但是，一旦我部署到我们的 Linux 服务器，当我在 Controller 类中调用某个 Action 时，就会出现此错误

```
Failed to start the session because headers have already been sent. 
```

在我已经调用的索引操作中

```
$session = $this->getRequest()->getSession(); 
```

在同一个控制器类的另一个动作中，我再次调用它。当我尝试时弹出错误

```
$session->set('foo', $bar); 
```

在我的 Twig 中，我通过一个表单和一个具有 formaction 属性的按钮来调用操作，如下所示

```
<form id='blahblah'>
    .... some fields here .....
    <button type='submit' formaction='{{path('2ndAction')}}'></a>
</form> 
```

所以在我的本地机器上，运行 Apache 一切正常。Linux 服务器正在使用 Nginx 和 php-fpm，由于某种原因它崩溃了。我检查了 phpInfo() 并且会话自动启动设置为关闭。不确定这是否是 Nginx/php-fpm 问题，但我认为这可能是相关信息。

这是控制器声明、indexAction() 和我的 2ndAction()

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\HttpFoundation\Session\Session;    
use CBSi\Utils\HTTPUtils\CURLUtil;

class StartController extends Controller
{
    /**
     * @var  CurlUtil $curlUtil
     */
    private $curlUtil;

    /**
     * @var AccessControl $accessControl
     */

    private $accessControl;

    /*placeholder for request object*/
    private $requestHolder;

   /**
    * @Route("/path/for/action/one", name="start")
    * @Template()
    */

public function indexAction()
{
 $session = $this->getRequest()->getSession();
 $this->curlUtil = $this->get('curlUtil');
 $this->requestHolder= Request::createFromGlobals();

// Some logic is done here

return $this->render('ListEngagementBundle:Start:start.html.twig');

}

/**
 * @Route("/path/to/second/action", name="2ndAction")
 * @Template
 */
public function 2ndAction(){
    $session = $this->getRequest()->getSession();
    $this-> curlUtil = $this->get('curlUtil');
    $this->requestHolder= Request::createFromGlobals();

    //Some logic is done here to get the data for the session variable

       $bar= logic output

               $session->set('foo', $bar);

    return $this->redirect($this->generateUrl('start'));
}
} 
```

如果您需要我可以提供的更多信息，我会:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T19:01:49.637

所以我想通了。在我打电话的第二个动作中

```
$session->getRequest()->getSession(); 
```

我不得不将其更改为

```
$session = new Session();
$session->start(); 
```

去搞清楚。:P

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T10:49:08.753

我得到了同样的错误。但就我而言，我在 `< ?php` 标签之前的 AppKernel.php 中放置了一些空格。因此，如果其他人收到此错误，请检查在会话初始化之前加载的每个 .php 文件的第一行之前是否有一些空格或制表符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-09T10:27:22.717

当在某些预期`$this->session->start();` 有**echo**语句的脚本中时，我会发生这种情况！希望这可以帮助其他人调试问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-12T13:19:43.637

每次我尝试使用 symfony 控制台更新我的数据库架构以及尝试使用 composer 安装新的依赖项时，我都会收到此错误消息：

> [运行时异常]
> 
> ```
> Failed to start the session because headers have already been sent by "/var    
> /www/html/pulsar283/src/MyService/Local/Brasil.php" at line 153. 
> ```

所以，我去检查文件，在第 152 行我发现了一个“?>”（php 关闭标签）。

所以，我只是删除了 php 关闭标签，错误再也没有出现过！

# sql - groovy sql select语句中的if运算符

> ID：13127124
> 
> 赞同：1
> 
> 时间：2012-10-29T17:58:15.397
> 
> 标签：sql, grails-orm, grails-2.0

我想在 select 语句中使用 if 运算符，使用 executeQuery 命令。就像是：

```
def tmpRec = BankStatement.executeQuery("select   SUM(IF(operation='CREDIT',cashAmount,-1*cashAmount)) from BankStatement group by portfolio,currency,code") 
```

go 但 IF 运算符不起作用。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:08:28.027

虽然我不知道 Groovy SQL，但在大多数 DBMS 中，CASE 语句用作条件语句。也许以下方法会起作用：

```
def tmpRec = BankStatement.executeQuery("select SUM(CASE WHEN operation='CREDIT' THEN cashAmount ELSE (-1*cashAmount) END) from BankStatement group by portfolio,currency,code") 
```

# javascript - JavaScript-评估真/假值的方法的差异

> ID：13127126
> 
> 赞同：0
> 
> 时间：2012-10-29T17:58:25.953
> 
> 标签：javascript, evaluation

你好，JS 迷们。有人可以向我解释以下评估变量真实性的方法之间的区别吗？

```
var q1Var1 = "hello",
        q1Var2 = 0,
        q1Var3 = true,
        q1Var4 = "false",
        q1Var5 = -1,
        q1Var6 = undefined,
        q1Var7 = null,
        q1Var8;

// What is the difference between this block of code:

console.log( !q1Var1 );
console.log( !q1Var2 );
console.log( !q1Var3 );
console.log( !q1Var4 );
console.log( !q1Var5 );
console.log( !q1Var6 );
console.log( !q1Var7 );
console.log( !q1Var8 );

// and this block?

if( q1Var1 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var2 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var3 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var4 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var5 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var6 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var7 === true ){ console.log( "true" ) } else { console.log( "false" ) };
if( q1Var8 === true ){ console.log( "true" ) } else { console.log( "false" ) }; 
```

我期待发现第二个块只是第一个块的倒数（换句话说，值只会切换），但是，看起来只有设置为非字符串“true”的变量实际上返回 true。为什么是这样？两种评价的根本区别是什么：

```
!q1Var1

vs.

true === q1Var1 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T17:59:19.417

这说明了JavaScript中[“虚假”值的概念。](http://11heavens.com/falsy-and-truthy-in-javascript)例如，`undefined`变得与`false`布尔上下文（如`if`条件）中的相同。然而，`undefined === false`事实*并非*如此。以下都是“假”值：

*   `false`
*   `undefined`
*   空字符串
*   数字 0
*   `null`
*   `NaN`

运算符的`===`意思是“严格相等”（例如，参见[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)）；它禁止自动类型转换。

运算符的类型转换规则`==`（来自上面的第二个链接）是：

> 如果两个操作数**的类型不同**，JavaScript 会转换操作数，然后应用严格比较。如果任一操作数是**数字或布尔值**，则操作数将尽可能转换为数字；否则，如果任一操作数是**字符串**，则尽可能将另一个操作数转换为字符串。如果**两个操作数都是对象**，那么当操作数引用内存中的同一个对象时，JavaScript 会比较相等的内部引用。

严格的比较规则是：

*   当两个字符串具有相同的字符序列、相同的长度和对应位置的相同字符时，它们是严格相等的
*   当两个数字在数值上相等（具有相同的数值）时，它们是严格相等的。NaN 不等于任何东西，包括 NaN。正零和负零彼此相等
*   如果两个布尔操作数都为真或都为假，则两个布尔操作数严格相等
*   无论是严格比较还是抽象比较，两个对象都不相等
*   仅当操作数引用相同的对象时，比较对象的表达式才为真
*   Null 和 Undefined 类型是 ==（但不是 ===）

请特别注意，这`!var`与`var == false`（当然也与`var === false`if`var`不是开头的布尔值不同）不同。非空字符串是“真实的”（`!"..."`始终`false`适用于任何非`"..."`空字符串），但是当转换为数字（如`"0"`）时评估为 0 的非空字符串是`== false`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:09:52.727

据我了解，第二组测试（q1Var1 === true）正在寻找绝对平等。它不会默认为真实性，因为它正在寻找完美的匹配。

而第一组，我对此有点模糊，我认为正在测试一个对象，因为测试没有上下文......至少，我*认为*这就是正在发生的事情......oo

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:05:10.320

`===`运算符可能有点混乱，有时会被过度使用。使用`===`运算符时，请务必记住它比较类型和值。因此，当使用这样的语句时：

```
if( q1Var1 === true ) 
```

它要求`q1Var1`具有相同的类型和值`true`。如果情况是这样设置的：

```
q1Var1 = 1; 
if (q1Var1 === true) { console.log(true); } else { console.log(false); }//false 
```

然后控制台将记录`false`，因为`1`它的类型和值与`true`.

但是，使用`==`运算符，控制台将记录`true`，因为`1`它的值与`true`.

这可以通过以下方式观察到：

```
if (1 == true) { console.log(true); } else { console.log(false); }//true
if (1 && true) { console.log(true); } else { console.log(false); }//true 
```

在另一端，

```
if( !q1Var1 ); 
```

测试 q1Var1 是否为 0。值得注意的是，因为`false`在值上也等于 0（但仍然不是类型），

```
if (0 && false) { console.log(true); } else { console.log(false); }//true (same value)
if (0 == false) { console.log(true); } else { console.log(false); }//true (same value)
if (0 === false) { console.log(true); } else { console.log(false); }//false (same value, different type) 
```

这个测试对于数字和布尔值都是正确的，因为没有类型测试。

```
if (!0) { console.log(true); } else { console.log(false); }//true
if (!false) { console.log(true); } else { console.log(false); }//true 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T18:08:15.003

当我们有一个操作的 2 个不同操作数时，应该对第一个值进行解释（类型转换）以返回第二个操作数类型的结果，这称为`type cast`. 在条件方程中，结果应该是`boolean`类型，所以结果总是被转换为`boolean`，所以回到你的问题，所有这些例子都是`cast`不同的类型`boolean`。在 javascript 中，转换是自动进行的，但在某些语言中，尤其是在使用`strict`语法时，您应该自己指定转换，否则您的日志将充满错误。

# perl - 如何确定特定 perl 模块的包？

> ID：13127130
> 
> 赞同：-4
> 
> 时间：2012-10-29T17:58:39.063
> 
> 标签：perl, package

有没有办法确定特定 perl 模块的包？我目前正在寻找 XML::Code... 而且，为了缩小可能的答案：我不想使用 cpan。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:04:38.480

你的意思是Debian包？为什么不直接在您的存储库中搜索“XML::Code”？不过，以下通常会给出答案。

1.  通过在 CPAN 上搜索模块来查找模块的分发名称。在这种情况下，它是[XML-Code](http://search.cpan.org/dist/XML-Code)。
2.  将其转换为小写。
3.  挂起`lib`。
4.  附加`-perl`.

所以，`libxml-code-perl`。

# visual-studio - VS 2008 设置已更改，在控制面板中有两个安装

> ID：13127133
> 
> 赞同：0
> 
> 时间：2012-10-29T17:58:47.830
> 
> 标签：visual-studio, installation

我的 Visual Studio 2008 安装项目已更改，因此 MFC 和 VC 的合并模块已替换在安装文件夹中手动安装的 DLL。我对合并模块没问题，但是有一个问题。在之前的设置中，用户可以在“Everyone”和“Just me”之间进行选择。在新设置中，此选择无效，并且由于合并模块必须为每个人安装，因此始终为每个人安装。因此，如果以前的安装是“只为我”，那么新安装不会删除以前安装的 DLL，并且在控制面板中有两个同名的安装。

在新版本的安装项目中 ProductCode 发生了变化，UpgradeCode 没有，RemovePreviousVersion 设置为 true，Version 比以前高。

如果我从设置中排除合并模块，并“只为我”安装新版本，那么一切都很好。旧文件被删除，控制面板中只有一个安装。但我宁愿不给用户单独安装可再发行软件包带来负担。

我如何在 Visual Studio 2008 安装程序中同时拥有合并模块，并指示安装程序删除以前的版本，即使以前的版本是“只为我准备的”，而新的版本是为“所有人”准备的？

也许更好的问题是你会代替我做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:44:08.517

Windows Installer（MSI 文件的处理程序）不会在安装另一个产品期间卸载一个产品。此外，当按用户（“just me”）和按机器（“everyone”）安装时，相同的安装被视为两个不同的产品。因此，如果要在每台计算机上安装新的，则您无法从 .msi 卸载每个用户安装的旧版本。

选项按优先顺序排列：

1.  进行引导程序安装 (.exe)，它将寻找并卸载所有需要卸载的内容。Bootstrapper 也是安装先决条件的[首选方式](http://robmensching.com/blog/posts/2009/7/14/Lets-talk-about-Burn)，而不是使用合并模块。
2.  从 .msi 中，您可以检测到有问题，然后停止安装。我已经[这样做了](https://stackoverflow.com/q/13683651/395718)，但也将使用第一个选项。
3.  忽略问题，说这是设计使然，什么也不做。这一切都在用户手中。

# ios - 为什么 UITextView 会结合之前设置的属性文本的属性？

> ID：13127136
> 
> 赞同：9
> 
> 时间：2012-10-29T17:59:03.007
> 
> 标签：ios, uilabel, uitextview, nsattributedstring

在玩 NSAttributedString 时，我遇到了 UITextView 的一些奇怪行为。假设我有两个属性：

```
@property (weak, nonatomic) IBOutlet UILabel *label;
@property (weak, nonatomic) IBOutlet UITextView *textView; 
```

在这些属性的拥有控制器中，我有以下代码：

```
NSDictionary *attributes = @{NSFontAttributeName : [UIFont systemFontOfSize:20.],
                            NSForegroundColorAttributeName: [UIColor redColor]};
NSAttributedString *as = [[NSAttributedString alloc] initWithString:@"Hello there!" attributes:attributes];

NSMutableAttributedString *mas = [[NSMutableAttributedString alloc] initWithString:@"Hello where?" attributes:nil];
[mas addAttribute:NSForegroundColorAttributeName value:[UIColor yellowColor] range:NSMakeRange(3, 5)];

self.label.attributedText = as;
self.label.attributedText = mas;

self.textView.attributedText = as;
self.textView.attributedText = mas; 
```

在模拟器中运行时，标签看起来（呃，发挥你的想象力）如下，使用系统默认字体：

```
<black>Hel</black><yellow>lo wh</yellow><black>ere?</black> 
```

文本视图如下所示，使用大小为 20.0 的系统字体：

```
<red>Hel</red><yellow>lo wh</yellow><red>ere?</red> 
```

似乎文本视图正在组合来自两个属性字符串的属性。我发现这是一个令人惊讶的结果，并希望它表现得像标签一样。

我怀疑这是一个错误。如果不是，那么 UITextView 如何以及为什么以与 UILabel 不同的方式对待属性文本？

（XCode 版本 4.5.1）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T00:20:33.870

我很确定这不是错误。该文件明确指出：

> 分配一个新的值 [给文本视图的`attributedText`] 会更新 font、textColor 和 textAlignment 属性中的值，以便它们反映属性字符串中从位置 0 开始的样式信息。

因此，您未明确设置的任何属性都将从文本视图的整体属性继承，这些属性由先前的属性文本设置。

因此，正确的做法是在进行第二次分配之前重置字体、textColor 和 textAlignment：

```
self.tv.attributedText = as;
// reset everything
self.tv.text = nil;
self.tv.font = nil;
self.tv.textColor = nil;
self.tv.textAlignment = NSTextAlignmentLeft;
// and now... lo and behold ...
self.tv.attributedText = mas; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T00:04:54.253

我向 Apple 提交了错误报告。他们回来说，iOS 7 beta 1 解决了这个问题。验证为已修复。

# wpf - 将样式应用于 WPF 项目的窗口

> ID：13127139
> 
> 赞同：2
> 
> 时间：2012-10-29T17:59:16.543
> 
> 标签：wpf, xaml

作为测试，我通过在 App.xaml (Application.Resources) 中添加新样式来更改少数元素的样式，并且在窗口中定义了样式。

现在，我想知道这是否有任何例外？这意味着在 WPF 应用程序中（假设我们有 3 个窗口 w1、w2、w3）我们可以将 app.xaml 中定义的样式仅应用于窗口 1 和 2，然后 3 从其本地 ResourceDictionary 块或任何其他来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:01:56.440

您可以使用两种方法：

1.  将样式显式放在 Window1 和 Window2 中，而不是放在 Window3 中。这将导致样式仅存在于这些窗口中。[合并资源字典](http://msdn.microsoft.com/en-us/library/aa350178.aspx)在这里是一个很好的方法，因为您可以定义一次样式并根据需要“导入”它。
2.  在 Window3 中放置一个新样式，该样式将覆盖`App.xaml`. 使用的样式是通过在 Xaml 中向上遍历树直到找到合适的样式来确定的。如果 Window3 有自己的样式，它将“覆盖”应用程序的 xaml 文件中的样式。

# c++ - 更换 QPen - 如何删除

> ID：13127140
> 
> 赞同：1
> 
> 时间：2012-10-29T17:59:16.450
> 
> 标签：c++, qt

我正在开发一个 GUI，它允许用户在背景图片上使用鼠标/QSpinBox 事件修改椭圆。

我想设置它，以便当用户单击椭圆时，椭圆会改变颜色并被“选中”。

我将 QGraphicsView/Scene 与 QGraphicsEllipseItem 一起使用。这是我的问题，因此`setPen(QPen & const)`调用是一个参考：

*   如果我在堆栈上分配一支笔并将其传入，则会出现段错误。
*   如果我在堆上分配笔，当我设置新笔时它不会被删除
*   访问器方法返回笔的副本

无论如何，我必须接近这个错误，可以提供任何建议吗？

PS - 我想避免制作另一个成员变量。我将有很多椭圆，每个椭圆都不应该有自己的笔变量！

* * *

此代码将导致段错误：

```
void MyClass::SetupEllipses()
{
    QPen pen();
    pen.setColor(QColor(255,0,0));
    pen.setWidth(2);

    m_ellipse = new QGraphicsItemEllipse(); //This is a member variable of MyClass
    m_ellipse->setRect(some ssize here);
    m_ellipse->setPen(pen);

    m_graphicsview->scene()->addItem(m_ellipse); //m_graphicsview is also a member variable of MyClass and has had a scene added to it.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:31:59.047

> 如果我在堆栈上分配一支笔并将其传入，则会出现段错误。

这是正确的方法——如果你遇到了段错误，那肯定不是由于 QPen。发布您的代码和调试器堆栈跟踪。

无论如何，每个 QGraphicsEllipseItem 都将存储 QPen 的（轻量级）副本，因此在堆上创建 QPen 实例是荒谬且容易出错的。不要担心太多的 QPen 实例。QPen 使用[隐式共享](http://qt-project.org/doc/qt-4.8/implicit-sharing.html)，即如果您共享同一支未修改的笔，则副本很便宜。

# mysql - 如何解决对我的 mysql 数据库的访问被拒绝的问题

> ID：13127145
> 
> 赞同：-1
> 
> 时间：2012-10-29T17:59:37.623
> 
> 标签：mysql, sql, cpanel

我不知道我什么时候在 phpMyAdmin 中运行以下代码

```
SET GLOBAL log_bin_trust_function_creators = 1;

    -- ----------------------------
    -- Function structure for `__mydiv`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `__mydiv`;
    DELIMITER ;;
    CREATE   FUNCTION `__mydiv`(`a` int, `b` int) RETURNS bigint(20)
    BEGIN

            return FLOOR(a / b);
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `__mymod`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `__mymod`;
    DELIMITER ;;
    CREATE   FUNCTION `__mymod`(`a` int, `b` int) RETURNS bigint(20)
    BEGIN

            return (a - b * FLOOR(a / b));
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `_gdmarray`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `_gdmarray`;
    DELIMITER ;;
    CREATE   FUNCTION `_gdmarray`(`m` smallint) RETURNS smallint(2)
    BEGIN

            CASE m
                    WHEN 0 THEN RETURN 31;
                    WHEN 1 THEN RETURN 28;
                    WHEN 2 THEN RETURN 31;
                    WHEN 3 THEN RETURN 30;
                    WHEN 4 THEN RETURN 31;
                    WHEN 5 THEN RETURN 30;
                    WHEN 6 THEN RETURN 31;
                    WHEN 7 THEN RETURN 31;
                    WHEN 8 THEN RETURN 30;
                    WHEN 9 THEN RETURN 31;
                    WHEN 10 THEN RETURN 30;
                    WHEN 11 THEN RETURN 31;
            END CASE;

    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `_jdmarray`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `_jdmarray`;
    DELIMITER ;;
    CREATE   FUNCTION `_jdmarray`(`m` smallint) RETURNS smallint(2)
    BEGIN

            CASE m
                    WHEN 0 THEN RETURN 31;
                    WHEN 1 THEN RETURN 31;
                    WHEN 2 THEN RETURN 31;
                    WHEN 3 THEN RETURN 31;
                    WHEN 4 THEN RETURN 31;
                    WHEN 5 THEN RETURN 31;
                    WHEN 6 THEN RETURN 30;
                    WHEN 7 THEN RETURN 30;
                    WHEN 8 THEN RETURN 30;
                    WHEN 9 THEN RETURN 30;
                    WHEN 10 THEN RETURN 30;
                    WHEN 11 THEN RETURN 29;
            END CASE;

    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `_jdmarray2`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `_jdmarray2`;
    DELIMITER ;;
    CREATE   FUNCTION `_jdmarray2`(`m` smallint) RETURNS smallint(2)
    BEGIN

            CASE m
                    WHEN 1 THEN RETURN 31;
                    WHEN 2 THEN RETURN 31;
                    WHEN 3 THEN RETURN 31;
                    WHEN 4 THEN RETURN 31;
                    WHEN 5 THEN RETURN 31;
                    WHEN 6 THEN RETURN 31;
                    WHEN 7 THEN RETURN 30;
                    WHEN 8 THEN RETURN 30;
                    WHEN 9 THEN RETURN 30;
                    WHEN 10 THEN RETURN 30;
                    WHEN 11 THEN RETURN 30;
                    WHEN 12 THEN RETURN 29;
            END CASE;

    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `pdate`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `pdate`;
    DELIMITER ;;
    CREATE   FUNCTION `pdate`(`gdate` datetime) RETURNS char(100) CHARSET utf8
    BEGIN

            DECLARE 
                    i,
                    gy, gm, gd,
                    g_day_no, j_day_no, j_np,
                    jy, jm, jd INT DEFAULT 0; /* Can be unsigned int? */
            DECLARE resout char(100);
            DECLARE ttime CHAR(20);

            SET gy = YEAR(gdate) - 1600;
            SET gm = MONTH(gdate) - 1;
            SET gd = DAY(gdate) - 1;
            SET ttime = TIME(gdate);
            SET g_day_no = ((365 * gy) + __mydiv(gy + 3, 4) - __mydiv(gy + 99, 100) + __mydiv (gy + 399, 400));
            SET i = 0;

            WHILE (i < gm) do
                    SET g_day_no = g_day_no + _gdmarray(i);
                    SET i = i + 1; 
            END WHILE;

            IF gm > 1 and ((gy % 4 = 0 and gy % 100 <> 0)) or gy % 400 = 0 THEN 
                    SET g_day_no =  g_day_no + 1;
            END IF;

            SET g_day_no = g_day_no + gd; 
            SET j_day_no = g_day_no - 79;
            SET j_np = j_day_no DIV 12053;
            SET j_day_no = j_day_no % 12053;
            SET jy = 979 + 33 * j_np + 4 * __mydiv(j_day_no, 1461);
            SET j_day_no = j_day_no % 1461;

            IF j_day_no >= 366 then 
                    SET jy = jy + __mydiv(j_day_no - 1, 365);
                    SET j_day_no = (j_day_no - 1) % 365;
            END IF;

            SET i = 0;

            WHILE (i < 11 and j_day_no >= _jdmarray(i)) do
                    SET j_day_no = j_day_no - _jdmarray(i);
                    SET i = i + 1;
            END WHILE;

            SET jm = i + 1;
            SET jd = j_day_no + 1;
            SET resout = CONCAT_WS ('-', jy, jm, jd);

            IF (ttime <> '00:00:00') then
                    SET resout = CONCAT_WS(' ', resout, ttime);
            END IF;

            RETURN resout;
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `PMONTH`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `PMONTH`;
    DELIMITER ;;
    CREATE   FUNCTION `PMONTH`(`gdate` datetime) RETURNS char(100) CHARSET utf8
    BEGIN

            DECLARE 
                    i,
                    gy, gm, gd,
                    g_day_no, j_day_no, j_np,
                    jy, jm, jd INT DEFAULT 0; /* Can be unsigned int? */
            DECLARE resout char(100);
            DECLARE ttime CHAR(20);

            SET gy = YEAR(gdate) - 1600;
            SET gm = MONTH(gdate) - 1;
            SET gd = DAY(gdate) - 1;
            SET ttime = TIME(gdate);
            SET g_day_no = ((365 * gy) + __mydiv(gy + 3, 4) - __mydiv(gy + 99, 100) + __mydiv(gy + 399, 400));
            SET i = 0;

            WHILE (i < gm) do
                    SET g_day_no = g_day_no + _gdmarray(i);
                    SET i = i + 1; 
            END WHILE;

            IF gm > 1 and ((gy % 4 = 0 and gy % 100 <> 0)) or gy % 400 = 0 THEN 
                    SET g_day_no = g_day_no + 1;
            END IF;

            SET g_day_no = g_day_no + gd;
            SET j_day_no = g_day_no - 79;
            SET j_np = j_day_no DIV 12053;
            set j_day_no = j_day_no % 12053;
            SET jy = 979 + 33 * j_np + 4 * __mydiv(j_day_no, 1461);
            SET j_day_no = j_day_no % 1461;

            IF j_day_no >= 366 then 
                    SET jy = jy + __mydiv(j_day_no - 1, 365);
                    SET j_day_no =(j_day_no - 1) % 365;
            END IF;

            SET i = 0;

            WHILE (i < 11 and j_day_no >= _jdmarray(i)) do
                    SET j_day_no = j_day_no - _jdmarray(i);
                    SET i = i + 1;
            END WHILE;

            SET jm = i + 1;
            SET jd = j_day_no + 1;
            RETURN jm;
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `pmonthname`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `pmonthname`;
    DELIMITER ;;
    CREATE   FUNCTION `pmonthname`(`gdate` datetime) RETURNS varchar(100) CHARSET utf8
    BEGIN

            CASE PMONTH(gdate)
                    WHEN 1 THEN RETURN 'ÝÑæÑÏíä';
                    WHEN 2 THEN RETURN 'ÇÑÏíÈåÔÊ';
                    WHEN 3 THEN RETURN 'ÎÑÏÇÏ';
                    WHEN 4 THEN RETURN 'ÊíÑ';
                    WHEN 5 THEN RETURN 'ãÑÏÇÏ';
                    WHEN 6 THEN RETURN 'ÔåÑíæÑ';
                    WHEN 7 THEN RETURN 'ãåÑ';
                    WHEN 8 THEN RETURN 'ÂÈÇä';
                    WHEN 9 THEN RETURN 'ÂÐÑ';
                    WHEN 10 THEN RETURN 'Ïí';
                    WHEN 11 THEN RETURN 'Èåãä';
                    WHEN 12 THEN RETURN 'ÇÓÝäÏ';
            END CASE;

    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `pyear`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `pyear`;
    DELIMITER ;;
    CREATE   FUNCTION `pyear`(`gdate` datetime) RETURNS char(100) CHARSET utf8
    BEGIN

            DECLARE
                    i,
                    gy, gm, gd,
                    g_day_no, j_day_no, j_np,
                    jy, jm, jd INT DEFAULT 0; /* Can be unsigned int? */
            DECLARE resout char(100);
            DECLARE ttime CHAR(20);

            SET gy = YEAR(gdate) - 1600;
            SET gm = MONTH(gdate) - 1;
            SET gd = DAY(gdate) - 1;
            SET ttime = TIME(gdate);
            SET g_day_no = ((365 * gy) + __mydiv(gy + 3, 4) - __mydiv(gy + 99, 100) + __mydiv(gy + 399, 400));
            SET i = 0;

            WHILE (i < gm) do
                    SET g_day_no = g_day_no + _gdmarray(i);
                    SET i = i + 1;
            END WHILE;

            IF gm > 1 and ((gy % 4 = 0 and gy % 100 <> 0)) or gy % 400 = 0 THEN
                    SET g_day_no =  g_day_no + 1;
            END IF;

            SET g_day_no = g_day_no + gd;
            SET j_day_no = g_day_no - 79;
            SET j_np = j_day_no DIV 12053;
            set j_day_no = j_day_no % 12053;
            SET jy = 979 + 33 * j_np + 4 * __mydiv(j_day_no, 1461);
            SET j_day_no = j_day_no % 1461;

            IF j_day_no >= 366 then
                    SET jy = jy + __mydiv(j_day_no - 1, 365);
                    SET j_day_no = (j_day_no - 1) % 365;
            END IF;

            SET i = 0;

            WHILE (i < 11 and j_day_no >= _jdmarray(i)) do
                    SET j_day_no = j_day_no - _jdmarray(i);
                    SET i = i + 1;
            END WHILE;

            SET jm = i + 1;
            SET jd = j_day_no + 1;
            RETURN jy;
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `pday`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `pday`;
    DELIMITER ;;
    CREATE   FUNCTION `pday`(`gdate` datetime) RETURNS char(100) CHARSET utf8
    BEGIN

            DECLARE
                    i,
                    gy, gm, gd,
                    g_day_no, j_day_no, j_np,
                    jy, jm, jd INT DEFAULT 0; /* Can be unsigned int? */
            DECLARE resout char(100);
            DECLARE ttime CHAR(20);

            SET gy = YEAR(gdate) - 1600;
            SET gm = MONTH(gdate) - 1;
            SET gd = DAY(gdate) - 1;
            SET ttime = TIME(gdate);
            SET g_day_no = ((365 * gy) + __mydiv(gy + 3, 4) - __mydiv(gy + 99 , 100) + __mydiv(gy + 399, 400));
            SET i = 0;

            WHILE (i < gm) do
                    SET g_day_no = g_day_no + _gdmarray(i);
                    SET i = i + 1;
            END WHILE;

            IF gm > 1 and ((gy % 4 = 0 and gy % 100 <> 0)) or gy % 400 = 0 THEN
                    SET g_day_no = g_day_no + 1;
            END IF;

            SET g_day_no = g_day_no + gd;
            SET j_day_no = g_day_no - 79;
            SET j_np = j_day_no DIV 12053;
            SET j_day_no = j_day_no % 12053;
            SET jy = 979 + 33 * j_np + 4 * __mydiv(j_day_no, 1461);
            SET j_day_no = j_day_no % 1461;

            IF j_day_no >= 366 then
                    SET jy = jy + __mydiv(j_day_no - 1, 365);
                    SET j_day_no = (j_day_no-1) % 365;
            END IF;

            SET i = 0;

            WHILE (i < 11 and j_day_no >= _jdmarray(i)) do
                    SET j_day_no = j_day_no - _jdmarray(i);
                    SET i = i + 1;
            END WHILE;

            SET jm = i + 1;
            SET jd = j_day_no + 1;
            RETURN jd;
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `_gdmarray2`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `_gdmarray2`;
    DELIMITER ;;
    CREATE   FUNCTION `_gdmarray2`(`m` smallint, `k` SMALLINT) RETURNS smallint(2)
    BEGIN

            CASE m
                    WHEN 0 THEN RETURN 31;
                    WHEN 1 THEN RETURN 28+k;
                    WHEN 2 THEN RETURN 31;
                    WHEN 3 THEN RETURN 30;
                    WHEN 4 THEN RETURN 31;
                    WHEN 5 THEN RETURN 30;
                    WHEN 6 THEN RETURN 31;
                    WHEN 7 THEN RETURN 31;
                    WHEN 8 THEN RETURN 30;
                    WHEN 9 THEN RETURN 31;
                    WHEN 10 THEN RETURN 30;
                    WHEN 11 THEN RETURN 31;
            END CASE;

    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `gdate`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `gdate`;
    DELIMITER ;;
    CREATE   FUNCTION `gdate`(`jy` smallint, `jm` smallint, `jd` smallint) RETURNS datetime
    BEGIN

            DECLARE
                    i, j, e, k, mo,
                    gy, gm, gd,
                    g_day_no, j_day_no, bkab, jmm, mday, g_day_mo, bkab1, j1
            INT DEFAULT 0; /* Can be unsigned int? */
            DECLARE resout char(100);
            DECLARE fdate datetime;

      SET bkab = __mymod(jy,33);

      IF (bkab = 1 or bkab= 5 or bkab = 9 or bkab = 13 or bkab = 17 or bkab = 22 or bkab = 26 or bkab = 30) THEN
        SET j=1;
      end IF;

      SET bkab1 = __mymod(jy+1,33);

      IF (bkab1 = 1 or bkab1= 5 or bkab1 = 9 or bkab1 = 13 or bkab1 = 17 or bkab1 = 22 or bkab1 = 26 or bkab1 = 30) THEN
        SET j1=1;
      end IF;

            CASE jm
                    WHEN 1 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 2 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 3 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 4 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 5 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 6 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 7 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 8 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 9 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 10 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 11 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 12 THEN IF jd > _jdmarray2(jm)+j or jd <= 0 THEN SET e=1; end IF;
            END CASE;
      IF jm > 12 or jm <= 0 THEN SET e=1; end IF;
      IF jy <= 0 THEN SET e=1; end IF;

      IF e>0 THEN
        RETURN 0;
      end IF;

      IF (jm>=11) or (jm=10 and jd>=11 and j=0) or (jm=10 and jd>11 and j=1) THEN
        SET i=1;
      end IF;
      SET gy = jy + 621 + i;

      IF (__mymod(gy,4)=0) THEN
        SET k=1;
      end IF;

            IF (__mymod(gy,100)=0) and (__mymod(gy,400)<>0) THEN
                    SET k=0;
            END IF;

      SET jmm=jm-1;

      WHILE (jmm > 0) do
        SET mday=mday+_jdmarray2(jmm);
        SET jmm=jmm-1;
      end WHILE;

      SET j_day_no=(jy-1)*365+(__mydiv(jy,4))+mday+jd;
      SET g_day_no=j_day_no+226899;

      SET g_day_no=g_day_no-(__mydiv(gy-1,4));
      SET g_day_mo=__mymod(g_day_no,365);

            IF (k=1 and j=1) THEN
                    IF (g_day_mo=0) THEN
                            RETURN CONCAT_WS('-',gy,'12','30');
                    END IF;
                    IF (g_day_mo=1) THEN
                            RETURN CONCAT_WS('-',gy,'12','31');
                    END IF;
            END IF;

            IF (g_day_mo=0) THEN
                    RETURN CONCAT_WS('-',gy,'12','31');
            END IF;

      SET mo=0;
      SET gm=gm+1;
      while g_day_mo>_gdmarray2(mo,k) do
                    SET g_day_mo=g_day_mo-_gdmarray2(mo,k);
        SET mo=mo+1;
        SET gm=gm+1;
      end WHILE;
      SET gd=g_day_mo;

      RETURN CONCAT_WS('-',gy,gm,gd);
    END;;
    DELIMITER ;

    -- ----------------------------
    -- Function structure for `gdatestr`
    -- ----------------------------
    DROP FUNCTION IF EXISTS `gdatestr`;
    DELIMITER ;;
    CREATE   FUNCTION `gdatestr`(`jdat` char(10)) RETURNS datetime
    BEGIN

            DECLARE
                    i, j, e, k, mo,
                    gy, gm, gd,
                    g_day_no, j_day_no, bkab, jmm, mday, g_day_mo, jd, jy, jm,bkab1,j1
            INT DEFAULT 0; /* ### Can't be unsigned int! ### */
            DECLARE resout char(100);
            DECLARE jdd, jyd, jmd, jt varchar(100);
            DECLARE fdate datetime;

            SET jdd = SUBSTRING_INDEX(jdat, '/', -1);
            SET jt = SUBSTRING_INDEX(jdat, '/', 2);
            SET jyd = SUBSTRING_INDEX(jt, '/', 1);
            SET jmd = SUBSTRING_INDEX(jt, '/', -1);
            SET jd = CAST(jdd as SIGNED);
            SET jy = CAST(jyd as SIGNED);
            SET jm = CAST(jmd as SIGNED);

             SET bkab = __mymod(jy,33);

      IF (bkab = 1 or bkab= 5 or bkab = 9 or bkab = 13 or bkab = 17 or bkab = 22 or bkab = 26 or bkab = 30) THEN
        SET j=1;
      end IF;

      SET bkab1 = __mymod(jy+1,33);

      IF (bkab1 = 1 or bkab1= 5 or bkab1 = 9 or bkab1 = 13 or bkab1 = 17 or bkab1 = 22 or bkab1 = 26 or bkab1 = 30) THEN
        SET j1=1;
      end IF;

            CASE jm
                    WHEN 1 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 2 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 3 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 4 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 5 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 6 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 7 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 8 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 9 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 10 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 11 THEN IF jd > _jdmarray2(jm) or jd <= 0 THEN SET e=1; end IF;
                    WHEN 12 THEN IF jd > _jdmarray2(jm)+j or jd <= 0 THEN SET e=1; end IF;
            END CASE;
      IF jm > 12 or jm <= 0 THEN SET e=1; end IF;
      IF jy <= 0 THEN SET e=1; end IF;

      IF e>0 THEN
        RETURN 0;
      end IF;

      IF (jm>=11) or (jm=10 and jd>=11 and j=0) or (jm=10 and jd>11 and j=1) THEN
        SET i=1;
      end IF;
      SET gy = jy + 621 + i;

      IF (__mymod(gy,4)=0) THEN
        SET k=1;
      end IF;

            IF (__mymod(gy,100)=0) and (__mymod(gy,400)<>0) THEN
                    SET k=0;
            END IF;

      SET jmm=jm-1;

      WHILE (jmm > 0) do
        SET mday=mday+_jdmarray2(jmm);
        SET jmm=jmm-1;
      end WHILE;

      SET j_day_no=(jy-1)*365+(__mydiv(jy,4))+mday+jd;
      SET g_day_no=j_day_no+226899;

      SET g_day_no=g_day_no-(__mydiv(gy-1,4));
      SET g_day_mo=__mymod(g_day_no,365);

            IF (k=1 and j=1) THEN
                    IF (g_day_mo=0) THEN
                            RETURN CONCAT_WS('-',gy,'12','30');
                    END IF;
                    IF (g_day_mo=1) THEN
                            RETURN CONCAT_WS('-',gy,'12','31');
                    END IF;
            END IF;

            IF (g_day_mo=0) THEN
                    RETURN CONCAT_WS('-',gy,'12','31');
            END IF;

      SET mo=0;
      SET gm=gm+1;
      while g_day_mo>_gdmarray2(mo,k) do
                    SET g_day_mo=g_day_mo-_gdmarray2(mo,k);
        SET mo=mo+1;
        SET gm=gm+1;
      end WHILE;
      SET gd=g_day_mo;

      RETURN CONCAT_WS('-',gy,gm,gd);
    END;;
    DELIMITER ; 
```

然后我收到错误：

```
#1227 - Access denied; you need the SUPER privilege for this operation 
```

我已将所有数据库命令（例如 select delete alter, ... 更改为 yes）到我的 MySQL 数据库管理器中。我正在使用 directAdmin v1.41.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:01:13.850

我会尝试授予该用户 ID 和客户端 IP 的权限，看看是否有帮助。

[http://dev.mysql.com/doc/refman/5.0/en/grant.html](http://dev.mysql.com/doc/refman/5.0/en/grant.html)

# php - 使用新的 WordPress 2.7 评论循环交替奇数和偶数评论样式

> ID：13127146
> 
> 赞同：0
> 
> 时间：2012-10-29T17:59:39.230
> 
> 标签：php, wordpress, comments

使用新的 WordPress 2.7 评论循环，我知道您可以简单地将 .odd 和 .even 添加到您的 CSS 以获得交替样式，我已经这样做了：

```
.odd { background: #ccc; color: #000; }
.even { background: #bbb; color: #000; } 
```

但是，我有两种不同的背景 - 浅色和深色 - 用户可以从选项面板中进行选择。因此，我需要两个不同版本的奇数类和偶数类，这样我就可以为每个类设置不同的颜色，因为上述背景颜色在浅色背景下看起来不错，但在深色背景下不太好。

但是使用 2.7 注释循环，奇数类和偶数类实际上并不存在于代码中。如果他们是，我会做这样的事情：

```
$background = get_option('mytheme_background');
if ($background== "option1") { echo '<div class="odd-dark">'; } 
if ($background== "option1") { echo '<div class="even-dark">'; }
if ($background== "option2") { echo '<div class="odd-light">'; } 
if ($background== "option2") { echo '<div class="even-light">'; } 
```

因此，由于 .odd 和 .even 实际上并不存在于代码中，我如何才能在 CSS 中拥有两个不同的 .odd 和 .even 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T17:36:10.703

一个迟来的回应，但对于其他任何偶然发现它的人......

解决这个问题的一个更简单的方法是反过来看。无需为每个必需的 html 元素添加主题选项名称，只需在**包含**元素中添加单个类名称即可。

例如，在给定的示例中，您可以将*“dark”*添加到文档中的类列表中`body`- 然后与“dark theme”相关的所有样式属性都将声明如下：

```
body.dark div.odd  { ... }
body.dark div.even { ... } 
```

这样你：

*   减少标记中的*膨胀*
*   让你的 CSS 逻辑更具可读性
*   确保一致的命名约定

# encryption - 缓冲区溢出 OpenSSL 加密/解密问题

> ID：13127152
> 
> 赞同：0
> 
> 时间：2012-10-29T17:59:57.517
> 
> 标签：encryption, openssl

我目前正在尝试使用 OpenSSL 加密和解密文件，使用（加密）：

```
openssl rsautl -encrypt -pubin -inkey public.pem -in plaintext.txt -out encyrptiontext.txt 
```

对于我正在使用的解密：

```
openssl rsautl -decrypt -inkey private.pem -in encyrptiontext.txt 
```

密钥是从同一个文件生成的，但是当我尝试解密一行时，我收到了这个错误：

```
8952:error:0407106B:rsa routines:RSA_padding_check_PKCS1_type_2:block type is not 02:.\crypto\rsa\rs
a_pk1.c:190:
8952:error:04065072:rsa routines:RSA_EAY_PRIVATE_DECRYPT:padding check failed:.\crypto\rsa\rsa_eay.c
:592: 
```

我不确定为什么我会得到这个，因为他们使用默认设置并且密钥是从同一个生成器生成的。

# javascript - 在 Boilerplatejs 应用程序上的组件之间共享数据源

> ID：13127153
> 
> 赞同：2
> 
> 时间：2012-10-29T17:59:57.383
> 
> 标签：javascript, single-page-application, boilerplatejs

我正在使用[Boilerplatejs](http://boilerplatejs.org)构建一个具有“论坛”和“类别”的 Web 应用程序。在类别模块上，我有列出所有类别并编辑特定类别的组件（就像与样板js 捆绑在一起的列表详细信息示例）。

注册新论坛时，我需要列出所有类别，这些类别是在模块初始化的标签上使用 Ajax 检索的，因此，如果我使用类别模块添加新类别，则添加时该列表不会更新一个新的论坛。

遵循 BoilerplateJS 指南，我可以在更新类别列表时发出一个事件，因此其他模块可以触发一个新的 ajax 请求并获取更新的类别列表，但是拥有一个可以最小化的共享数据源（或组件）是否明智？网络请求？

# java - 无法在 ActiveMQ 中使用来自嵌入式远程代理的消息

> ID：13127157
> 
> 赞同：1
> 
> 时间：2012-10-29T18:00:07.360
> 
> 标签：java, activemq, remote-access, messagebroker

我是一个 ActiveMQ 初学者。我的主要看起来像这样：

```
public static void main(String[] args) throws Exception {

        BrokerService broker = new BrokerService();

        if(isProducer(args)){
            broker.addConnector("tcp://localhost:8001");

            broker.start();
            // start producer...
        }
        else{
            broker.addConnector("tcp://localhost:9000"); 
            broker.addNetworkConnector("static:(tcp://localhost:8001)");

            broker.start(); // Getting stuck here!!!
            // start consumer
        }

        waitForever(); 
```

}

我启动了这个应用程序两次，一次是作为生产者，一次是作为消费者。当我启动消费者时，它卡在 broker.start() 行上。

我错过了什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:01:50.790

基本上，您启动代理一次（将其嵌入到 jvm 中）。

```
BrokerService broker = new BrokerService();
broker.setUseJmx(true);
broker.addConnector("tcp://localhost:61616");
broker.start(); 
```

然后连接到代理（消费者和生产者应用程序都需要此代码）：

```
url = "vm://localhost:61616"    //if you are in same jvm
url2 = "tcp://localhost:61616"   //if you are in diff jvm or other host
connectionFactory = new ActiveMQConnectionFactory(username,password,url);
connection = (ActiveMQConnection) connectionFactory.createConnection();
connection.start();
session = connection.createSession(transacted, ackMode); 
```

然后设置消费者

```
Destination queue = session.createQueue("queuename");
MessageConsumer consumer = session.createConsumer(queue);
consumer.setMessageListener(new MessageConsumer()); 
```

设置生产者并发送消息

```
MessageProducer producer = session.createProducer(queue);
ObjectMessage objectMessage = session.createObjectMessage();
objectMessage.setObject(object);
producer.send(objectMessage); 
```

看看例如：http: [//jmsexample.zcage.com/index2.html](http://jmsexample.zcage.com/index2.html)

或[http://svn.apache.org/repos/asf/activemq/branches/activemq-5.6/assembly/src/release/example/src/](http://svn.apache.org/repos/asf/activemq/branches/activemq-5.6/assembly/src/release/example/src/)

# android - 如何更改 CAB 中的“完成”文本？

> ID：13127160
> 
> 赞同：8
> 
> 时间：2012-10-29T18:00:14.710
> 
> 标签：android, android-actionbar, contextual-action-bar

Android 的文档说了很多关于[CAB 的](http://developer.android.com/design/patterns/actionbar.html)内容，但没有关于如何更改“完成”的文本。有谁知道怎么做？

[其他链接：]

*   [http://developer.android.com/design/patterns/selection.html](http://developer.android.com/design/patterns/selection.html)
*   [http://developer.android.com/guide/topics/ui/menus.html#CAB](http://developer.android.com/guide/topics/ui/menus.html#CAB)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T19:58:08.170

“完成”的布局在框架的[layout](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout/action_mode_close_item.xml)和[layout-large](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/layout-large/action_mode_close_item.xml)文件夹中提供。`android:attr/actionModeCloseButtonStyle`可以使用活动主题中的属性设置此按钮的样式。样式仅涵盖`android:background`按钮的，如[styles.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/styles.xml#L1917)中所述。此外，用于“完成”的字符串在 Android 的范围内 ( `@string/action_mode_done`)。因此，不能更改 CAB 的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T10:59:37.773

如果您使用 ABS，这可以帮助您

```
<string name="abs__action_mode_done"></string> 
```

# php - 如何连接到 mysql_query onclick td

> ID：13127161
> 
> 赞同：-2
> 
> 时间：2012-10-29T18:00:23.320
> 
> 标签：php, javascript, html, mysql

我在 PHP 中有一个 mysql_query。当我手动插入用户名时它可以工作。

我现在要做的是使用从 mysql DB 动态创建的表，我选择一个具有名称的单元格，然后将该名称连接到 mysql_query。我该怎么做呢？我已经寻找示例，但找不到任何关于使用表格单元添加到 mysql_query 以检索数据的内容。

例如

```
select * from cars were car='bmw' 
```

现在，如果我在单击 mercedes 时有一个汽车表，那么查询中的 bmw 将是 mercedes。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:38:07.480

如果这是一个“简单”的应用程序，完成任务的一个简单方法是使用`POST`或`GET`. 当您根据搜索结果动态创建表格时，请尝试将结果转储为指向您的脚本（或其他脚本）的超链接并使用`$_GET`.

这个例子完全是假设性的，因为根据您的 OG 问题，我没有太多可做的。在这里，您正在创建表格并转储您的结果：

```
$run = mysql_query("SELECT * FROM cars");
echo "<table>";
while ($row = mysql_fetch_array($run)) {
    $car = $row['car'];
    echo "<tr><td>";
    echo "<a href='searchByCar.php?car=$car'>$car</a>";
    echo "</td></tr>";
}
echo "</table"; 
```

现在您将结果作为用户可以单击的超链接，使用以下内容，`searchByCar.php`以便您可以收集他们选择的内容并使用它：

```
$selected_car = $_GET['car'];
$query = "SELECT * FROM cars WHERE car='$selected_car'"; 
```

这至少应该让你开始，但你应该研究`GET`，以及研究`POST`和`AJAX`。`mysql_*`在不支持的情况下，此示例在不久的将来也将无用。您应该真正考虑使用`PDO`或`MySQLi`（或至少了解它们）。我会为这些打出示例，但您可以使用[Google.com](http://www.google.com)找到大量内容。为了让您开始，请尝试查看：[PDO vs MySQLI：您应该使用哪个？](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)

# java - GWT ClientFactory：这不只是一个大块/单体吗？

> ID：13127163
> 
> 赞同：6
> 
> 时间：2012-10-29T18:00:32.093
> 
> 标签：java, gwt, dependency-injection, anti-patterns

[GWT ClientFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#ClientFactory)似乎是 GWT 应用程序萌芽的新设计模式，虽然不是 GWT API 的正式一部分，但受到 GWT 的鼓励，并在无数 GWT/MVP 示例中找到。

我*想*喜欢这个`ClientFactory`概念。但我担心的是：对于具有许多屏幕、显示区域和复杂架构的真正大型应用程序，单个应用`ClientFactory`程序将成为数据结构的巨大单体，其上可能有数百个 getter 方法。

所以我问：这样可以*吗*？为什么 GWT 鼓励和接受这样的单体设计，但在其他（一般）应用程序中却没有。更重要的是，有没有办法将广泛跨度分解`ClientFactory`成工厂对象的层次结构，以帮助代码可维护性、依赖项/引用等？

如果是这样，是否将 a 分解`ClientFactory`为更小的工厂，每个工厂负责为应用程序的不同部分注入必要的视图、演示者等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T18:56:16.597

这个`ClientFactory`想法只是手动 DI，使接线简单易懂。在不了解[GIN](http://code.google.com/p/google-gin/)甚至 GWT 的情况下，这些应用程序似乎主要是 Java，让您了解如何使各个部分工作，而无需了解作者首选的连接应用程序的方式的细节。

就像一个示例 Java 教程会让您从 开始`public static void main(String[] args)`，或者可能让您构建一个完全手动的 Servlet，您可以使用它来获得这个想法，然后转向一个结构更好的应用程序。`ClientFactory`的实用性来自于它作为一个概念的简单性和透明性，而不是因为它是构建大型应用程序的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:44:48.167

正如 ben_w 建议的那样：

使用 Google Gin 并通过创建一些 GinModules 创建您的应用程序。比你`@Inject`在客户端使用。这将有助于处理复杂性。事实上，如果没有依赖注入，我不会启动任何项目。

# email - 回复邮件列表中错过的消息

> ID：13127164
> 
> 赞同：1
> 
> 时间：2012-10-29T18:00:34.410
> 
> 标签：email, mailing-list

我错过了昨天在源软件邮件列表上的一条消息。即我今天只订阅了该列表，并找到了一条关于我昨天发布的相同问题的消息（通过搜索功能）。

有什么办法可以回复那条消息，就好像我昨天订阅了邮件列表一样？

我知道电子邮件有一个 In-Reply-To 标头字段，但我认为我需要某种消息 ID 才能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:35:35.493

根据邮件列表，可能会有一个 Web 界面让您回复消息（例如 gmane 允许这样做）。

如果没有，可能会有一个 Web 界面来查看消息的 ID，然后您可以在 In-Reply-To 标头中使用它。

如果没有，我怀疑有办法做你想做的事。

# .net - .NET 的 3way 合并库

> ID：13127165
> 
> 赞同：2
> 
> 时间：2012-10-29T18:00:39.637
> 
> 标签：.net, merge, 3-way-merge

我不知道如何在 .NET 中实现 DVCS 样式合并。据我了解，它是使用我的、他们的和起源的 3way 差异。我进行了谷歌搜索，发现[http://razor.occams.info/code/diff/](http://razor.occams.info/code/diff/)这似乎是一种补丁类型的合并（我的/原始的，他们的），这不是我想要的合并类型。我尝试使用 nuget 进行搜索，但没有找到合并

.NET 是否有 3 种方式合并库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:12:19.710

您可以查看[Synchrotron 中 JS 3-way merge implementation 的 C# 端口](https://gist.github.com/2633407)，这是[Synchrotron 项目](http://homepages.kcbbs.gen.nz/tonyg/projects/synchrotron.html)的一个端口。

[Tao](https://stackoverflow.com/users/74296/tao)在“[任何适合 .NET 的体面的文本差异/合并引擎？](https://stackoverflow.com/a/10685911/6309) ”中提到。

# sql - 如何获得每条记录的中位数？

> ID：13127166
> 
> 赞同：-1
> 
> 时间：2012-10-29T18:00:42.023
> 
> 标签：sql, sql-server, sql-server-2008, tsql

sql server 中没有中间函数，所以我使用了这个绝妙的建议：

[https://stackoverflow.com/a/2026609/117700](https://stackoverflow.com/a/2026609/117700)

这会计算整个数据集的中位数，但我需要每条记录的中位数。

我的数据集是：

```
+-----------+-------------+
| client_id | TimesTested |
+-----------+-------------+
|    214220 |           1 |
|    215425 |           1 |
|    212839 |           4 |
|    215249 |           1 |
|    210498 |           3 |
|    110655 |           1 |
|    110655 |           1 |
|    110655 |          12 |
|    215425 |           4 |
|    100196 |           1 |
|    110032 |           1 |
|    110032 |           1 |
|    101944 |           3 |
|    101232 |           2 |
|    101232 |           1 |
+-----------+-------------+ 
```

这是我正在使用的查询：

```
select client_id,  
    (
    SELECT
    (
     (SELECT MAX(TimesTested ) FROM
       (SELECT TOP 50 PERCENT t.TimesTested 
       FROM counted3 t 
       where t.timestested>1 
       and CLIENT_ID=t.CLIENT_ID 
       ORDER BY t.TimesTested ) AS BottomHalf)
     +
     (SELECT MIN(TimesTested ) FROM
       (SELECT TOP 50 PERCENT t.TimesTested 
       FROM counted3 t 
       where t.timestested>1 
       and CLIENT_ID=t.CLIENT_ID 
       ORDER BY t.TimesTested DESC) AS TopHalf)
    ) / 2 AS Median
    ) TotalAvgTestFreq
from counted3 

group by client_id 
```

但它给了我有趣的数据：

```
+-----------+------------------+
| client_id | median???????????|
+-----------+------------------+
|    100007 |               84 |
|    100008 |               84 |
|    100011 |               84 |
|    100014 |               84 |
|    100026 |               84 |
|    100027 |               84 |
|    100028 |               84 |
|    100029 |               84 |
|    100042 |               84 |
|    100043 |               84 |
|    100071 |               84 |
|    100072 |               84 |
|    100074 |               84 |
+-----------+------------------+ 
```

**我可以得到每个 client_id 的中位数吗？**

我目前正在尝试使用来自 Aaron 网站的这个**很棒的查询：**

```
select c3.client_id,(
    SELECT AVG(1.0 * TimesTested ) median
    FROM
    (
        SELECT o.TimesTested , 
        rn = ROW_NUMBER() OVER (ORDER BY o.TimesTested ), c.c
        FROM counted3 AS o
        CROSS JOIN (SELECT c = COUNT(*) FROM counted3) AS c
        where count>1
    ) AS x
    WHERE rn IN ((c + 1)/2, (c + 2)/2)
    ) a
    from counted3 c3
    group by c3.client_id 
```

不幸的是，正如 Richardthekiwi 指出的那样：

> 这是一个中位数，而这个问题是关于每个分区的中位数

我想知道如何加入它`counted3`以获得每个分区的中位数？>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:10:22.190

尝试这个：

```
select client_id,  
    (
    SELECT
    (
     (SELECT MAX(testfreq) FROM
       (SELECT TOP 50 PERCENT t.testfreq 
       FROM counted3 t 
       where t.timestested>1 
       and c3.CLIENT_ID=t.CLIENT_ID 
       ORDER BY t.testfreq) AS BottomHalf)
     +
     (SELECT MIN(testfreq) FROM
       (SELECT TOP 50 PERCENT t.testfreq 
       FROM counted3 t 
       where t.timestested>1 
       and c3.CLIENT_ID=t.CLIENT_ID 
       ORDER BY t.testfreq DESC) AS TopHalf)
    ) / 2 AS Median
    ) TotalAvgTestFreq
from counted3 c3

group by client_id 
```

我将 c3 别名添加到外部 CLIENT_ID 引用和外部表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:26:44.590

注意：如果 testFreq 是`int`or`bigint`类型，则需要在取平均值之前对其进行 CAST ，否则您将得到整数除法，例如，`(2+5)/2 => 3`如果 2 和 5 是中位数记录 - 例如`AVG(Cast(testfreq as float))`.

```
select client_id, avg(testfreq) median_testfreq
from
(
    select client_id,
           testfreq,
           rn=row_number() over (partition by CLIENT_ID
                                 order by testfreq),
           c=count(testfreq) over (partition by CLIENT_ID)
    from tbk
    where timestested>1
) g
where rn in (round(c/2,0),c/2+1)
group by client_id; 
```

中位数可以作为奇数行中的中心记录，或者作为偶数行中两个中心记录的平均值。这由`rn in (round(c/2,0),c/2+1)`选择所需的一个或两个记录的条件处理。

# c# - 数字输入设备到c#

> ID：13127167
> 
> 赞同：0
> 
> 时间：2012-10-29T18:00:44.573
> 
> 标签：c#

**问题：**

*   我正在编写一个应用程序，每次机器做某事时都需要从机器接收电输入。
    *   我在机器上设置了一个限位开关，目前每次机器完成它时它都会完成一个电路
    *   我需要它使用usb输入到计算机中，而不是仅仅完成一个电路。
    *   我有一个 dataq 'dl-148u-sp' 我得到了 c# 代码来使用 ActiveX 控件生成一个图形，但我真正需要的是正在完成的电路的数字输出（我一生都想不通出了怎么办）..
    *   我最终炸毁了设备（我认为），即使它附带的软件也不再识别它了......
    *   我需要一台新设备，结果他们停产了我拥有的那个，而发货后的下一个要 90 美元。

**问题：**

有更好/更便宜/更简单的方法吗？或者任何人都可以推荐一个使用 c# 代码很容易获得输出的好设备，以便我可以将它合并到我制作的程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:10:17.280

目前尚不清楚您是否在这里要求硬件或软件解决方案。您是否在问促进数据从您的机器传输到 PC 的最佳方式是什么？如果是这样，这可能不是问的地方，但您可能会查看 USB 到 GPIO 模块。

[http://numato.com/8-channel-usb-gpio-module](http://numato.com/8-channel-usb-gpio-module)就是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:09:23.360

我推荐一个Arduino：

[http://www.arduino.cc/playground/Main/InterfacingWithHardware](http://www.arduino.cc/playground/Main/InterfacingWithHardware)

他们的开发套件很便宜，并且有大量的开放/免费库将 Arduino 连接到 C#。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T21:29:51.757

更昂贵和复杂的板是带有 c# 库和许多功能的[IOFirebug 。](http://iofirebug.com/en/homeen/)输入电压范围为 5V 至 30V。

# objective-c - 从数组向 UITable 添加行

> ID：13127168
> 
> 赞同：0
> 
> 时间：2012-10-29T18:00:49.823
> 
> 标签：objective-c, ios, arrays, uitableview, cells

我有一个 UITable，以及它的数据源和委托的类。该类有一个名为的属性`logItemsArray`，其中包含许多用作一行数据的对象（客户姓名、添加日期等...）（单元格有一个特殊的类，我将这些对象传递给它并返回一个单元格） .

我还有一个名为的方法`loadNextLogEvents`，它从 Web 服务器加载一些数据并将项目添加到其中`logItemsAraay`（它会自动加载接下来 100 行的数据）。

此方法从方法调用一次`viewWillApear`，也从按钮调用以加载下一个事件。

表视图的 dataSource`numberOfRowsInTable`返回`logItemsArray`.

问题是：我如何“更新”表格`loadNextLogEvents`以使用新数据加载单元格（数组已更新，因此方法`numberOfRowsInTable`和`cellForRowAtIndexPath`方法都将返回所需的新行结果，我只需要触发它们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:03:30.897

用这个：

```
[tableView reloadData]; 
```

# c# - 将 8bpp 转换为 24bpp 时图像发生偏移

> ID：13127171
> 
> 赞同：2
> 
> 时间：2012-10-29T18:00:56.437
> 
> 标签：c#, image, graphics

当我使用以下代码将位图从 8bpp 转换为 24bpp 时，结果图像发生了偏移，但我无法弄清楚原因，谁能帮忙？

```
private static Bitmap ConvertTo24(Bitmap bmpIn)
{
    bmpIn.Save(@"F:\sara1.bmp");
    Bitmap converted = new Bitmap(bmpIn.Width, bmpIn.Height, PixelFormat.Format24bppRgb);
    using (Graphics g = Graphics.FromImage(converted))
    {
         // Prevent DPI conversion
         g.PageUnit = GraphicsUnit.Pixel;
         // Draw the image
         g.DrawImageUnscaled(bmpIn, 0, 0);
         // g.DrawImage(bmpIn, 0, 0);
    }
    converted.Save(@"F:\sara2.bmp");
} 
```

![在此处输入图像描述](../Images/53aee5011c04196a2025089b2d63c1d7.png)

* * *

![在此处输入图像描述](../Images/369ebcb032b681a8ff7a9e354802e861.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:20:24.873

以下代码对我有用：

```
private static Bitmap ConvertTo24(Bitmap bmpIn)
{
    bmpIn.Save(@"F:\sara1.bmp");
    Bitmap converted = new Bitmap(bmpIn.Width, bmpIn.Height, PixelFormat.Format24bppRgb);
    using (Graphics g = Graphics.FromImage(converted))
    {
        // Prevent DPI conversion
        g.PageUnit = GraphicsUnit.Pixel;
        // Draw the image
        // g.DrawImageUnscaled(bmpIn, 0, 0);
        g.DrawImage(bmpIn, 0, 0, converted.Width, converted.Height);
    }
    converted.Save(@"F:\sara2.bmp");
} 
```

提供宽度和高度会重新缩放图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:41:32.253

`bmpIn`在您的功能中收到它之前，您可能会遇到问题。您可以在放入 8bpp 图像后测试以下（更好的）代码`f:\sara1.bmp`（只是为了确保在转换之前没有移动 8bpp 图像）。

```
private static Bitmap ConvertTo24(Bitmap bmpIn)
{
    //Bitmap bmpIn;
    bmpIn = new Bitmap(@"f:\sara1.bmp");
    Bitmap converted = new Bitmap(bmpIn.Width, bmpIn.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
    using (Graphics g = Graphics.FromImage(converted))
    {
         g.PageUnit = GraphicsUnit.Pixel;
         Rectangle rng = new Rectangle(new Point(0, 0), bmpIn.Size);
         g.DrawImage(bmpIn, rng);  // use this instead of following
    }
    converted.Save(@"F:\sara2.bmp");
} 
```

希望它工作正常 4 u。我使用了 DrawImage(Image img, Rectangle rng) 正如你在评论中所说的那样

回答完毕。以下为说明。您的代码（已编辑。按原样使用并遵循评论）

```
private static Bitmap ConvertTo24(Bitmap bmpIn)
{
    bmpIn.Save(@"F:\sara1.bmp");
    return;
    // After you have called this function. Go open your image f:\sara1.bmp from
    //hrad disk-- I doubt you would find it shifted here even before conversion
    Bitmap converted = new Bitmap(bmpIn.Width, bmpIn.Height, PixelFormat.Format24bppRgb);
    using (Graphics g = Graphics.FromImage(converted))
    {
         // Prevent DPI conversion
         g.PageUnit = GraphicsUnit.Pixel;
         // Draw the image
         g.DrawImageUnscaled(bmpIn, 0, 0);
         // g.DrawImage(bmpIn, 0, 0);
    }
    converted.Save(@"F:\sara2.bmp");
} 
```

再次你的代码（我只是忽略了你收到的 8bpp 位图并直接从 f 驱动器中获取它，假设你会在运行应用程序之前或至少在调用此函数之前放置它）

以下代码对我来说也很好用。

```
private static Bitmap ConvertTo24(Bitmap bmpIn)
{
    Bitmap bmpIn = new Bitmap(@"f:\sara1.bmp");
    Bitmap converted = new Bitmap(bmpIn.Width, bmpIn.Height, PixelFormat.Format24bppRgb);
    using (Graphics g = Graphics.FromImage(converted))
    {
         // Prevent DPI conversion
         g.PageUnit = GraphicsUnit.Pixel;
         // Draw the image
         g.DrawImageUnscaled(bmpIn, 0, 0);
         // g.DrawImage(bmpIn, 0, 0);
    }
    converted.Save(@"F:\sara2.bmp");
} 
```

# javascript - 比较javascript中的数字

> ID：13127172
> 
> 赞同：0
> 
> 时间：2012-10-29T18:01:02.333
> 
> 标签：javascript

所以这是我的代码：

```
var score1 = $(this).attr('data-score1');
var score2 = $(this).attr('data-score2');

if (score1 < score2) {
  // do some
}
if (score2 > score1) {
  // do something else
} 
```

现在，只要两个变量都为 < 或都 > 100，这可以正常工作，但是只要这些变量中的一个大于 100 而另一个不是错误的 if 语句被触发。这里到底发生了什么？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:03:20.810

利用`parseInt()`

属性会抛出字符串。所以当你尝试比较它们时......你实际上是在比较

`"100" > "90"` 而不是`100 > 90` ..使用带有**基数的****parseInt()**应该可以解决您的问题..

 **```
var score1 = parseInt( $(this).attr('data-score1') , 10);
var score2 = parseInt( $(this).attr('data-score2') , 10);

if (score1 < score2) {
  // do some
}
else if (score2 > score1) {
  // do something else
} 
```

正如@naveen 建议的那样，您也可以这样做

```
var score1 = +$(this).attr('data-score1');
var score2 = +$(this).attr('data-score2'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:03:37.193

您正在将值作为字符串进行比较。字符串“90”以 开头`9`，其 ascii 代码大于`1`。

您可以使用将其转换为数字[`parseInt`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)

```
parseInt(score1, 10) 
```**

# entity-framework-4 - 不支持 Distinct 方法

> ID：13127173
> 
> 赞同：2
> 
> 时间：2012-10-29T18:01:06.623
> 
> 标签：entity-framework-4, distinct, wcf-data-services

我正在使用 Linq to Entities 并收到此错误

```
The method Distinct is not supported 
```

在这行代码上

```
var typeIds = _context.AttributeValues.Select(av => av.AttributeTypeId).Distinct(); 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T11:30:56.780

根据 MSDN，一些使用 OData 服务的 LINQ 方法不受支持。以下是不支持的方法的部分列表。

*   全部
*   任何
*   康卡特
*   DefaultIfEmpty
*   清楚的
*   除了
*   相交
*   联盟
*   压缩

有关不受支持的操作的完整列表，请参见[此处](http://msdn.microsoft.com/en-us/library/ee622463(v=vs.110).aspx)

但是，作为一种解决方法，下面的语句应该在这种情况下起作用。

```
var typeIds = _context.AttributeValues
                      .Select(av => av.AttributeTypeId)
                      .AsEnumerable()
                      .Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T14:37:12.663

一种解决方案是使用（服务器端）`QueryByCube`我的产品 AdaptiveLINQ ( [www.adaptivelinq.com](http://www.adaptivelinq.com) ) 提供的方法来定义 WCF 数据服务。**此方法转换聚合中的投影（由选择运算符表示）**。

您只需定义一个具有一维的多维数据集：AttributeTypeId

```
av => av.AttributeTypeId 
```

定义一个提供可查询集合的数据服务：

```
yourDbContext.AttributeValues.QueryByCube(yourCube); 
```

现在您可以使用 OData 协议查询您的服务：

```
http://.../myService.svc/AttributeValues?$select=AttributeTypeId 
```

或者，如果您使用 C# 客户端：

```
serviceContext.AttributeValues.Select(x => x.AttributeTypeId); 
```

相对于 AJ Qarshi 建议的解决方法，此解决方案的优势在于**在服务器端进行了区分**。

# casting - 为什么 xs:string 不是 XQuery 中 xs:NMTOKEN 的实例？

> ID：13127174
> 
> 赞同：2
> 
> 时间：2012-10-29T18:01:13.317
> 
> 标签：casting, xquery, instanceof

当我尝试以下操作`"123" instance of xs:NMTOKEN`时，它返回 false。
但是当我尝试时`"123" instance of xs:string`，它返回true。

在我看来，第一个结果是错误的，因为字符串可以转换为 xs:NMTOKEN，对吗？即，我希望`"123" instance of xs:NMTOKEN`返回 true。

这是我正在使用的实现的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:23:11.473

不，`"123"`是`xs:string`文字，不是它的子类型之一。如果要获取`xs:NMTOKEN`具有值的项目，`123`则必须显式转换字符串：

```
xs:NMTOKEN("123") instance of xs:NMTOKEN 
```

`true`按预期返回。

# php - 小改动破坏了 mysql 查询

> ID：13127176
> 
> 赞同：4
> 
> 时间：2012-10-29T18:01:17.547
> 
> 标签：php, mysql

> **可能重复：**
> [PHP PDO bindValue in LIMIT](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)

我有这段代码很好用。

```
if (array_key_exists('cat', $_GET) === TRUE) {
    $category = $_GET['cat'];
} else {
    $category = '.*';
}

$conn = new PDO('mysql:host=localhost;dbname=news', 'root', '');
$stmt = $conn->prepare('SELECT * FROM stories 
                        WHERE category RLIKE :cat
                        ORDER BY score DESC LIMIT 0, 25');
$stmt -> execute(array(
    'cat' => $category,
    ));

$result = $stmt->fetchAll(); 
```

如您所见，它从 get 请求中获取一个类别，并在数据库中搜索该类别中的所有内容。

我还尝试添加一点，以便可以在 get 请求中定义一个页面，并且查询将在 25 行之后开始，每增加一个页面。

这是我写的：

```
if (array_key_exists('cat', $_GET) === TRUE) {
    $category = $_GET['cat'];
} else {
    $category = '.*';
}

if (array_key_exists('page', $_GET) === TRUE) {
    $page = intval($_GET['page'])*25;
} else {
    $page = 0;
}

$conn = new PDO('mysql:host=localhost;dbname=news', 'root', '');
$stmt = $conn->prepare('SELECT * FROM stories 
                        WHERE category RLIKE :cat
                        ORDER BY score DESC LIMIT :page, 25');
$stmt -> execute(array(
    'cat' => $category,
    'page' => $page
    ));

$result = $stmt->fetchAll(); 
```

但是现在，无论是什么页面，或者是否有类别，查询都没有返回任何内容。

也许我没有正确处理整数。知道为什么我会得到这个结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:32:48.810

正如所提到的[关于如何将值应用于 LIMIT 条件的示例](https://stackoverflow.com/questions/2269840/php-pdo-bindvalue-in-limit)：

```
$stmt -> execute(array(
  'cat' => $category,
  'page' => (int) $page
)); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-29T18:14:50.347

Ray 已经给了你答案：将用户提交的页面变量转换为一个整数（一定要这样做，否则你将容易受到 SQL 注入的攻击）并将其直接插入到查询字符串中，而不使用占位符。

# c# - 如果我的界面必须返回 Task 什么是无操作实现的最佳方式？

> ID：13127177
> 
> 赞同：519
> 
> 时间：2012-10-29T18:01:21.500
> 
> 标签：c#, .net, task-parallel-library, async-await, threadpool

在下面的代码中，由于接口的原因，该类`LazyBar`必须从其方法中返回一个任务（并且为了参数，不能更改）。如果`LazyBar`s 的实现不寻常，因为它碰巧快速同步地运行 - 从该方法返回 No-Operation 任务的最佳方式是什么？

我已经在`Task.Delay(0)`下面进行了，但是我想知道如果函数被*大量*调用（为了论证，每秒数百次），这是否有任何性能副作用：

*   这种句法糖会解开大事吗？
*   它是否开始阻塞我的应用程序的线程池？
*   编译器是否足以处理`Delay(0)`不同的问题？
*   `return Task.Run(() => { });`会有什么不同吗？

有没有更好的办法？

```
using System.Threading.Tasks;

namespace MyAsyncTest
{
    internal interface IFooFace
    {
        Task WillBeLongRunningAsyncInTheMajorityOfImplementations();
    }

    /// <summary>
    /// An implementation, that unlike most cases, will not have a long-running
    /// operation in 'WillBeLongRunningAsyncInTheMajorityOfImplementations'
    /// </summary>
    internal class LazyBar : IFooFace
    {
        #region IFooFace Members

        public Task WillBeLongRunningAsyncInTheMajorityOfImplementations()
        {
            // First, do something really quick
            var x = 1;

            // Can't return 'null' here! Does 'Task.Delay(0)' have any performance considerations?
            // Is it a real no-op, or if I call this a lot, will it adversely affect the
            // underlying thread-pool? Better way?
            return Task.Delay(0);

            // Any different?
            // return Task.Run(() => { });

            // If my task returned something, I would do:
            // return Task.FromResult<int>(12345);
        }

        #endregion
    }

    internal class Program
    {
        private static void Main(string[] args)
        {
            Test();
        }

        private static async void Test()
        {
            IFooFace foo = FactoryCreate();
            await foo.WillBeLongRunningAsyncInTheMajorityOfImplementations();
            return;
        }

        private static IFooFace FactoryCreate()
        {
            return new LazyBar();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：742
> 
> 时间：2012-10-29T18:05:10.403

今天，我建议使用[Task.CompletedTask](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task.completedtask.aspx)来完成此任务。

* * *

.net 4.6 之前：

使用`Task.FromResult(0)`or将比使用无操作表达式`Task.FromResult<object>(null)`创建更少的开销。`Task`在创建`Task`具有预定结果的结果时，不涉及调度开销。

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2014-11-22T02:07:09.643

要添加到[Reed Copsey](https://stackoverflow.com/a/13127229/885318)关于 using的答案`Task.FromResult`，如果您缓存已完成的任务，则可以进一步提高性能，因为已完成任务的所有实例都是相同的：

```
public static class TaskExtensions
{
    public static readonly Task CompletedTask = Task.FromResult(false);
} 
```

您可以在`TaskExtensions.CompletedTask`整个应用程序域中使用相同的实例。

* * *

[.Net Framework (v4.6)](http://blogs.msdn.com/b/pfxteam/archive/2015/02/02/new-task-apis-in-net-4-6.aspx)的最新版本添加了[`Task.CompletedTask`](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task.completedtask.aspx)静态属性

```
Task completedTask = Task.CompletedTask; 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2015-12-22T01:23:19.910

`Task.Delay(0)`因为在接受的答案中是一个好方法，因为它是已完成的缓存副本`Task`。

从 4.6 开始，现在`Task.CompletedTask`它的目的更加明确，但不仅`Task.Delay(0)`仍然返回单个缓存实例，它返回与**相同**的单个缓存实例`Task.CompletedTask`。

两者的缓存性质都不能保证保持不变，但是作为依赖于实现的优化，它们只是依赖于实现的优化（也就是说，如果实现更改为仍然有效的东西，它们仍然可以正常工作）使用`Task.Delay(0)`是比公认的答案更好。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-12-13T13:28:54.060

最近遇到了这个问题，并且不断收到有关该方法无效的警告/错误。

我们的工作是安抚编译器，这可以清除它：

```
 public async Task MyVoidAsyncMethod()
    {
        await Task.CompletedTask;
    } 
```

这汇集了迄今为止所有建议中最好的。除非您实际上在方法中做某事，否则不需要 return 语句。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2019-06-24T04:15:23.900

```
return Task.CompletedTask; // this will make the compiler happy 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-05-30T20:01:16.943

当您必须返回指定类型时：

```
Task.FromResult<MyClass>(null); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-02T14:16:01.270

我更喜欢`Task completedTask = Task.CompletedTask;`.Net 4.6 的解决方案，但另一种方法是将方法标记为 async 并返回 void：

```
 public async Task WillBeLongRunningAsyncInTheMajorityOfImplementations()
    {
    } 
```

您会收到警告（CS1998 - 没有等待表达式的异步函数），但在这种情况下可以安全地忽略它。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-06-02T14:32:49.900

```
return await Task.FromResult(new MyClass()); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-02-14T06:37:23.413

如果您使用的是泛型，所有答案都会给我们编译错误。您可以使用`return default(T);`. 下面的示例进一步解释。

```
public async Task<T> GetItemAsync<T>(string id)
            {
                try
                {
                    var response = await this._container.ReadItemAsync<T>(id, new PartitionKey(id));
                    return response.Resource;
                }
                catch (CosmosException ex) when (ex.StatusCode == System.Net.HttpStatusCode.NotFound)
                {

                    return default(T);
                }

            } 
```

# redirect - 带参数的 301 URL 重定向，没有 htaccess 或 php

> ID：13127179
> 
> 赞同：0
> 
> 时间：2012-10-29T18:01:25.660
> 
> 标签：redirect, http-status-code-301

我如何重定向`http://olddomain.com/page`到`http://newdomain.com/page`

旧域使用 namecheap 的 dns。目前，我已经设置了一个 301 URL 重定向 on`olddomain.com`和`www.olddomain.com`to `www.newdomain.com`。但是，访问`olddomain.com/page` 将我带到`www.newdomain.com`而不是`www.newdomain.com/page`.

有没有办法在不使用 htaccess 或 php 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T15:43:27.107

使用站长工具。那很容易。我们通常使用服务器端编程，IP 重定向。但这非常容易和方便。

# sql-server-2008-r2 - 在多个数据库上选择查询

> ID：13127180
> 
> 赞同：2
> 
> 时间：2012-10-29T18:01:37.140
> 
> 标签：sql-server-2008-r2

我想要做的是验证一个 URL。我只需要能够从我们目前在 SQL Server 2008 中拥有的所有数据库中选择单个值。所有数据库都是相同的，只是不同用户的同一数据库的多个实例。

我希望从每个数据库的一个表中提取一项。

每个数据库都包含一个表`SETTINGS`，并在该表中为`MapIconURL`. 我需要每个数据库中每个表的值。我正在查看大约 30 个具有此值的数据库。

所以我找到了“未记录的”存储过程 sp_MsForEachDb 并且已经工作......到了一定程度。
我正在使用的代码是这样的：

`EXEC sp_MsForEachDb 'use ?; SELECT "?" as databasename,SETTINGSKEYID, SECTION, NAME, INIVALUE, DESCRIPTION FROM ?.dbo.SETTINGS WHERE [NAME] = "MapIconURL"'`

我注意到它没有选择所有数据库，但它也在选择主表以及其他系统表，并且我认为这可能是它没有选择所有表的原因。有没有办法排除系统相关的表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T03:07:32.400

如果数据库的数量（和名称）是固定的，那么您可以简单地执行以下操作：

```
从 db1.dbo.SETTINGS 中选择 MapIconUrl
联合所有
从 db2.dbo.SETTINGS 中选择 MapIconUrl
...

```

但是，如果数据库的数量或名称*不*固定，则必须动态构建查询。

首先，运行查询`SELECT name FROM master..sysdatabases`以获取数据库的名称。

然后，遍历结果集（在 T-SQL 中，使用 a [`CURSOR`](http://msdn.microsoft.com/en-us/library/ms180169.aspx)）并构建您的查询并执行它（在 T-SQL 中，使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)）。

# java - 基本类型映射的休眠标准

> ID：13127184
> 
> 赞同：2
> 
> 时间：2012-10-29T18:02:00.610
> 
> 标签：java, hibernate, collections, mapping

我有一个看起来像这样的 Hibernate 映射：

```
class A {
    private Long id;
    private Map<C,String> someMap;
    ...

    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public Long getId() {
         return id;
    }

    public void setId(Long id) {
         this.id = id;
    }

    @ElementCollection(targetClass=String.class, fetch=FetchType.EAGER)
    public Map<C, String> getSomeMap() {
        return someMap;
    }

    pubic void setSomeMap(Map<C,String> someMap){
           this.someMap = someMap;
    }
}

class B {
    private Long id;
    private A a;
    ...
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public Long getId() {
         return id;
    }

    public void setId(Long id) {
         this.id = id;
    }

    @OneToOne
    public A getA(){
         return a;
    }

    public void setA(A a){
         this.a = a;
    }
}

class C {
    private Long id;
    ...
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    public Long getId() {
         return id;
    }

    public void setId(Long id) {
         this.id = id;
    }
} 
```

如何进行查询（使用标准）以获取所有具有此类“A”的“В”，例如，“test”作为“someMap”中的值？或者我只能用清晰的sql来做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:24:05.817

有趣的。我从来没有做过一个映射，其中键是对象，而字符串是值。一般情况是相反的。您可以将字符串保留在 C 上，并使用直接集合吗？还是这里有一种时髦的多对多关系？

# jpanel - java actionListener中的按钮和标签列表

> ID：13127185
> 
> 赞同：0
> 
> 时间：2012-10-29T18:02:00.470
> 
> 标签：jpanel, jbutton, jlabel, actionlistener, jlist

所以我有一个JList，每一行都是一个JButton，后跟一个jLabel。我需要做的是，当我单击按钮时它会调用一个函数，但现在无论我单击该行，它都会调用另一个函数。

问题是它进入了listselectionlistener的函数内部。所以按钮监听器永远不会被调用。我试图删除列表侦听器，只使用一个按钮，但它不起作用。我在想也许在列表的侦听器中，我可以验证点击是在哪里完成的，但我认为这不是正确的做法。

任何想法？

这是我如何定义我的班级

```
public class SelectScheduleUI extends JPanel implements ListCellRenderer<JPanel>, ListSelectionListener, ActionListener 
```

这是我创建框架的一部分时的代码。

```
m_Schedules = new DefaultListModel<JPanel>();
m_SchedulesList = new JList<JPanel>(m_Schedules);

m_SchedulesList.addListSelectionListener(this); 
```

后来当我添加列表的每个元素时。

```
JPanel schedulePanel = new JPanel(new GridBagLayout());
GridBagConstraints c = new GridBagConstraints();

JButton enabledLabel = new JButton();   
enabledLabel.setBounds(0, 0, ICON_WIDTH, ICON_HEIGHT);
enabledLabel.setBorder(null);
enabledLabel.addActionListener((ActionListener) this);
schedulePanel.add(enabledLabel, c, LABEL_ICON);

JLabel label = new JLabel();
label.setText(p_SchedulerName);
label.setBounds(0, 0, LABEL_NAME_WIDTH, ICON_HEIGHT);
schedulePanel.add(label, c, LABEL_NAME);

m_Schedules.addElement(schedulePanel); 
```

我有一个关于按钮点击事件的虚拟程序

```
public void actionPerformed(ActionEvent e)
{
    //Execute when button is pressed
    System.out.println("You clicked the button");
} 
```

这是列表的监听器

```
@Override
public void valueChanged(ListSelectionEvent e)
{
    if(e.getValueIsAdjusting() == false)
    {
        //if the user didn't select anything, or is in the 
        //  process of selecting multiple items, don't update
        if(m_SchedulesList.getSelectedIndex() == -1 || 
                m_SchedulesList.getSelectedIndices().length > 1)
        {
            return;
        }
        m_Selector.onScheduleSelect(m_Schedules.get(m_SchedulesList.getSelectedIndex()).getName());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:26:37.957

所以我想出了一种方法，而不是使用包含 JLabel 和 JButton 的 JList。我只是使用了一个 JTable，第一列是标签，第二列是一个复选框（在我的情况下，我需要一些东西来打开\关闭列表中的某些东西）。

有了那个 JTable，我需要 OnColumnClick 事件和 OnRowClick 事件。为了能够多次调用同一个按钮，我只需在 OnColumnClick 中选择同一行的另一列。

# ruby-on-rails - 开发模式下的 Rails 缩小（编译）资产

> ID：13127189
> 
> 赞同：13
> 
> 时间：2012-10-29T18:02:52.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline

如何在 Rails 开发模式下以缩小（编译）形式呈现我的资产？

我有大约几十个资产文件，因为它们是一个接一个地提供的，所以在页面加载之前需要很长时间。我相信，如果我将它们编译并从中获得服务，将加快我的页面加载时间（我知道当我专门处理资产时这并不理想）。

这是我在布局中的样式和脚本标签

```
<%= stylesheet_link_tag 'all'  %>
<%= javascript_include_tag 'all' %> 
```

我也跑过`bundle exec rake assets:precompile:nondigest`

但我仍然看到资产一个接一个地被渲染。请帮忙！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-29T18:08:25.907

这很简单。
您只需要在您的`config/environments/development.rb`

```
config.assets.debug = false 
```

并重新启动您的 Rails 服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-30T14:53:22.067

On Rails 4.2.1 使用以下配置：

```
config.assets.js_compressor = :uglifier
config.assets.css_compressor = :sass
config.assets.compile = true
config.assets.digest = true
# config.assets.debug = true 
```

使用此配置，`precompile`将使`development`环境中的所有 JS 和 CSS 文件都缩小到我的范围内。

# colorbox - 彩盒不适用于 Pinterest

> ID：13127194
> 
> 赞同：0
> 
> 时间：2012-10-29T18:03:16.693
> 
> 标签：colorbox, pinterest

我一直在使用最新版本的颜色框​​和来自各种网站的 RSS 提要..它运行良好......但它不适用于 Pinterest..它只是空白。这是来自 ReadWriteWeb 的 rss 提要的地方（并且可以正常工作，就像它与 CNN 和大量其他 rss 提要一样）：

[http://www.allenweiss.com/test](http://www.allenweiss.com/test)

这是一个 pinterest 提要：

[http://www.allenweiss.com/test](http://www.allenweiss.com/test)

任何想法为什么它不能与 Pinterest 一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T01:04:24.937

我认为您省略了 pinterest 示例。

如果您以与显示来自 CNN 的链接相同的方式显示 pinterest 链接，则可能是 pinterest 框架破坏的问题。我不确定 pinterest 是否禁止对他们的页面进行 iframe，但有些网站肯定会这样做。

# r - 通过多维数据重新排序以进行 ggplot2 绘图

> ID：13127195
> 
> 赞同：0
> 
> 时间：2012-10-29T18:03:17.017
> 
> 标签：r, ggplot2

我在制作我认为应该是一个相当简单的 ggplot2 图时遇到了一些麻烦。

我在数据框中有一些实验数据。每个数据条目都由正在测量的系统和运行它的实例（问题）标识。每个条目还具有针对特定系统和实例测量的值。

例如：

```
mydata <- data.frame(System=c("a","b","a","b","a","b"), Instance=factor(c(1,1,2,2,3,3)), Value=c(10,5,4,2,7,8)) 
```

现在，我想将此数据绘制在箱线图中，其中 x 轴包含实例标识符，条形图的颜色表示该值适用于哪个系统。条形高度应按数据框中的值加权。

这几乎可以满足我的要求：

```
qplot(data=mydata, weight=Value, Instance, fill=System, position="dodge") 
```

我想做的最后一件事是重新排序条形图，以便它们按系统 A 的值排序。但是，我想不出一个优雅的方法来做到这一点。

我的第一直觉是使用`qplot(data=mydata, weight=Value, reorder(Instance, Value), fill=System, position="dodge")`，但这将按`mean`每个实例的值排序，我只想使用 A 中的值。我可以用`qplot(data=mydata, weight=Value, reorder(Instance, Value, function(x) { x[1] } ), fill=System, position="dodge")`“第一个值”对实例进行排序，但这很危险（如果顺序改变了？）并且读者不清楚。

什么是更优雅的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:24:05.610

我确信有比这更好的方法，但是制作`Instance`一个`ordered`作品，并且即使数据发生变化也会继续工作：

```
qplot(data=mydata, weight=Value, 
 ordered(Instance,
 levels=mydata[System=='a','Instance'] [order(mydata[System=='a','Value'])])
,fill=System, position="dodge") 
```

也许写同样的东西稍微更优雅的方式：

```
qplot(data=mydata, weight=Value, 
ordered(Instance,
levels=Instance [System=='a'] [order(Value [System=='a'])]) # Corrected
,fill=System, position="dodge") 
```

# c# - XmlTextReader 阻止应用程序

> ID：13127196
> 
> 赞同：1
> 
> 时间：2012-10-29T18:03:19.713
> 
> 标签：c#, .net, wpf

我使用`XmlTextReader`阅读器在线获取一些数据。

在此阶段，应用程序就像被阻止一样。

我曾尝试使用`BeginInvoke`，但没有多大帮助。

或者我可能需要执行一些类似的 COMPLETED 动作......

我不知道...

任何线索如何解决它？

谢谢！

```
var searchUrl = "http://weather.service.msn.com/find.aspx?outputview=search&src=vista&weasearchstr=" + query;
// Application is blocked here
var reader = new XmlTextReader(searchUrl);

while (reader.Read())
{ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:10:12.303

如果您使用的是 c# 5.0，async/await 可以在这里提供帮助

```
public async void SOQuestion(string query)
{
    var searchUrl = "http://weather.service.msn.com/find.aspx?outputview=search&src=vista&weasearchstr=" + query;

    WebClient wc = new WebClient();
    string xml = await wc.DownloadStringTaskAsync(searchUrl);

    var xDoc = XDocument.Parse(xml);

    var results = xDoc.Descendants("weather")
                        .Select(w => new
                        {
                            Location = w.Attribute("weatherlocationname").Value,
                            Temp = w.Element("current").Attribute("temperature").Value,
                            SkyText = w.Element("current").Attribute("skytext").Value,

                        })
                        .ToList();

    dataGridView1.DataSource = results;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:35:25.420

TPL（任务并行化库）是一种很好且简单的方式来处理像这样的简单任务。如果你有一个设置 XMLReader 的方法和一个你想在之后调用的方法，它看起来像这样：

```
Task XmlReaderTask = Task.Factory.StartNew(() => ReadXmlUrl(url));
XmlReaderTask.ContinueWith(x => SometMethodToDoAfter()); 
```

它也不需要您使用 C# 5.0（我确信新的 sync 和 await 关键字是处理此问题的更好方法），但 TPL 已经存在了一段时间，并且只会在较新版本的 .NET 中变得更好因此，为了快速简单地介绍一些基本线程，它绝对值得一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:06:10.933

你需要使用`Task<bool> ReadAsync()`

# php - DOMDocument - 提取标签的文本内容，但首先删除某些子元素

> ID：13127199
> 
> 赞同：0
> 
> 时间：2012-10-29T18:03:21.427
> 
> 标签：php, domdocument

**示例源 HTML：**

```
<p>
 <strong>Byline:</strong> Introductory text. 

 <a href="1.html" target="">Link 1</a> |
 <span class="foo"></span> 
 <a href="2.html">Link 2</a>
 <a href="3.html">Link 3</a>
</p> 
```

**我正在尝试做的事情：**

我想加载 HTML，去掉链接和其他无关标签（如果我必须指定它们是什么，这不是问题），比如“|” 依此类推，保留“署名”和“介绍性文字”。这是一个解析第 3 方站点的脚本，所以我无法添加 CSS 类等。

我第一次尝试使用（现在不是很广泛使用）[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)，最近一直在尝试[DOMDocument](http://php.net/manual/en/class.domdocument.php)。

但是我绝对无处可去-例如，现在我什至无法遍历下面的树`<p>`：

```
$doc = new DOMDocument();
$doc->loadHTML($somehtml);

$p = $doc->getElementsbyTagName('p');

foreach($p->childNodes as $item) {
  ...    
} 
```

以上为我提供了该行的“未定义属性：DOMNodeList::$childNodes”错误`foreach`。

另外：我很沮丧，因为我显然无法使用 等来可视化 DOM `print_r`，`var_dump`而且当我使用循环浏览链接时`xpath->query`（这在这里似乎不合适，因为我真的不想搜索/提取特定的东西，而是使用 HTML，删除我不想要的节点，然后保存它）使用 print_r 向我显示了链接文本，但没有显示 href="" 的内容。

任何人都可以推荐一个可以理解的 DOMDocument 指南吗？PHP 手册在实际示例方面似乎很短。

# ruby-on-rails - 谁负责在 Rails 中生成 .idea 文件？

> ID：13127203
> 
> 赞同：10
> 
> 时间：2012-10-29T18:03:31.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, plugins, code-generation

当我查看我的 Rails 应用程序文件夹时，我可以找到一个**.idea**文件夹，其中包括：

*   .generators
*   .rakeTasks

还有更多......例如，当我打开**.generators时，我看到以下内容：**

```
<?xml version="1.0" encoding="UTF-8"?>
<Settings><!--This file was automatically generated by Ruby plugin.
You are allowed to: 
1\. Reorder generators
2\. Remove generators
3\. Add installed generators
To add new installed generators automatically delete this file and reload the project.
--><GeneratorsGroup><Generator name="active_record:migration" /><Generator name="active_record:model" /><Generator name="active_record:observer" /><Generator name="active_record:session_migration" /><Generator name="controller" /><Generator name="erb:controller" /><Generator name="erb:mailer" /><Generator name="erb:scaffold" /><Generator name="generator" /><Generator name="helper" /><Generator name="integration_test" /><Generator name="mailer" /><Generator name="metal" /><Generator name="migration" /><Generator name="model" /><Generator name="model_subclass" /><Generator name="observer" /><Generator name="performance_test" /><Generator name="plugin" /><Generator name="resource" /><Generator name="scaffold" /><Generator name="scaffold_controller" /><Generator name="session_migration" /><Generator name="stylesheets" /><Generator name="test_unit:controller" /><Generator name="test_unit:helper" /><Generator name="test_unit:integration" /><Generator name="test_unit:mailer" /><Generator name="test_unit:model" /><Generator name="test_unit:observer" /><Generator name="test_unit:performance" /><Generator name="test_unit:plugin" /><Generator name="test_unit:scaffold" /></GeneratorsGroup></Settings> 
```

如您所见：“**这个文件是由 Ruby 插件自动生成的。** ”

那么谁负责生成这些文件呢？

我怎么称呼它？

IDE需要照顾吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-29T18:23:31.507

[如果使用 Jet Brains 的RubyMine](http://www.jetbrains.com/ruby/)或 Jet Brains Intellij IDE至少打开一次应用程序，则会创建此文件夹和文件。

所有关于项目的用户配置都保存在这个目录中。

如果您删除此 .idea 文件夹并在[Rubymine](http://www.jetbrains.com/ruby/)中打开项目，这些文件将使用新的默认 Rubymine 配置再次生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T23:06:45.813

`~/.gitignore`对 gitters的一个有用的补充：

```
# ignore JetBrains IDE stuff
.idea
.generators 
```

# ruby-on-rails - 确保数组中的至少一项存在于另一项中

> ID：13127206
> 
> 赞同：1
> 
> 时间：2012-10-29T18:03:33.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, associations

我有以下型号：

```
class Post < ActiveRecord::Base
    has_and_belongs_to_many :countries
end

class User < ActiveRecord::Base 
    has_many :entitlements
    has_many :countries, :through => :entitlements
end 
```

帖子索引页面上的帖子必须至少有一个与用户所在国家/地区之一相同的国家/地区。

我在我的模型和冗长的控制器代码中尝试了各种范围，但我不知道如何检查应该是一个简单的关系：Post.countries 中的至少一个项目是否存在于 User.countries 中。

任何帮助都得到了很大的帮助。

**更新：**

好的，所以我的控制器中有以下内容：

```
 def index
    @user = current_user
    @user.countries.each do |user_country|  
       @user_country_posts += Country.find(user_country.id).posts
    end
    @posts = @user_country_posts
  end 
```

这是遍历 user.countries 并找到这些国家的每个帖子。但是当我运行它时，我得到：

```
NoMethodError: undefined method `+' for nil:NilClass 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T23:35:55.050

问题是您正在尝试使用`@user_country_posts`之前未定义的实例变量，因此其值为`nil`.

在线：

```
@user_country_posts += Country.find(user_country.id).posts 
```

您实际上是在调用变量`+`上的方法，因此这与调用a`@user_country_posts`是等效的。`+``nil`

尝试在方法的开头初始化变量，例如：

```
@user_country_posts = [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:51:32.813

我也会考虑使用 ruby​​ 的联合方法：即：

```
[1,2,4] & [1,4,5]
=> [1,4] 
```

因此，如果您有用户国家/地区列表和发布国家/地区列表，那么以下内容可能会起作用：即：

```
@shared_country_ids = @user.countries.map(&:id) & @post.countries(&:id) 
```

从您上面的更新中，您似乎想要做的是显示所有具有用户国家代码之一的帖子。如果是这种情况，我会执行以下操作：即：

```
@posts = Post.where(:countries => @user.countries) 
```

假设您正确配置了关系，上述内容应该可以工作。

# c - 一个人如何学习对游戏机模拟器进行编程（特别是硬件知识）？

> ID：13127212
> 
> 赞同：3
> 
> 时间：2012-10-29T18:03:50.687
> 
> 标签：c, console, hardware, emulation, video-game-consoles

我之前问过一个类似的问题，关于如何编写模拟器，当我看到答案并查找一些开源游戏机模拟器时，我发现除了对“低级”语言的中级理解之外，还需要更多的东西（即 C）。我真正想知道的是，我需要了解有关硬件的什么信息才能对这样的模拟器进行编程。我正在接近在 Java 上“相当不错”，但这对我没有多大帮助。我已经开始学习 C 并且现在已经走了很长一段路，但是我很想知道我必须在硬件方面学习什么才能编写这样的控制台模拟器。

我问这个问题的原因是我一直在互联网上搜索关于仿真的书籍和资源，每当我遇到一个仿真器教程时，它总是像“你需要对 C 有基本的了解才能遵循本教程”，当我尝试遵循它时，我不能，只是因为我不知道到底在编程什么。我对硬件一无所知。（我父亲努力将他的显示器连接到他的 PC 可能更了解它）

所以我的问题是，我需要学习什么（微处理器、内存等？），是否有任何好的资源可以教我这些东西，而无需我上大学或其他东西（已经在做软件工程） )?

如果这不是一个真正的问题，或者不够清楚，或者类似的问题，我深表歉意。我只是对这个主题很感兴趣。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-29T18:30:34.663

认为这可能更适合programmers.stackexchange.com，但无论如何：

我不会说你需要任何特定的知识。了解微处理器和内存管理的工作原理以及汇编程序知识将有很大帮助（因为您实际上是在为类似汇编程序的代码编写解释器）。假设你已经知道你的目标硬件是如何工作的，那么你所要做的就是实现以下组件（即伪造真实硬件并模仿/模拟它的行为）：

*   模拟 CPU 解析和运行机器代码。
*   模拟输入组件（将键盘、鼠标或操纵杆输入转换为 CPU 可访问的“引脚信号”）。
*   模拟输出组件（将图像和音频数据转换为可见的东西，例如在屏幕上显示某些东西或像真实的硬件组件一样生成声音）。
*   模拟其他组件，如内存包、内置电池、墨盒、扩展芯片等。

作为一般建议，我会说暂时忘记编写任何模拟器。而是从尝试编写自己的字节码解释器开始。

例如，您可以使用一个简单的伪代码序列：

```
x = 5
y = 10
print(x + y) 
```

用伪汇编程序编写，可能是这样的：

```
mov x, 5
mov y, 10
add x, y // to be honest, this is essentially x += y; not just x + y
prt x
end 
```

现在用（代码）数字替换所有指令。所有变量都替换为数字：

```
0x01 0x00 0x05
0x01 0x01 0x0a
0x02 0x00 0x01
0x03 0x00
0x00 
```

这可能看起来有点奇怪，但我保留了上面的顺序和换行符。请注意，我使用`0x01`了第一条指令，而不是`0x00`. 这只是为了方便，所以我可以使用`0x00`“NOOP/no operation”或作为终止符（如本例所示）。现在只需删除换行符，您最终就会得到自定义字节码。

```
char code[] = {0x01, 0x00, 0x05, 0x01, 0x01, 0x0a, 0x02, 0x00, 0x01, 0x03, 0x00, 0x00}; 
```

要运行此代码，您可以编写一个简单的“模拟器”。它只有一个有限的指令集，但它会工作。我实际上没有测试这段代码，所以请记住，我可能在某些时候搞砸了。然而，它应该足以让您了解如何/做什么。请注意，在此示例中，我没有拆分数据存储器和指令存储器。这将增加更多目前并不真正需要的复杂性。

```
int pos = 0; // essentially being our "instruction pointer"
char registers[10];
while(code[pos]) { // still some instruction
    switch(code[pos++]) { // determine what to do and move the instruction pointer
    // 0x00 isn't handled here, as that's part of our loop already
    case 0x01: // mov(e)
        registers[code[pos++]] = code[pos++]; // read the value into the register
        break;
    case 0x02: // add
        registers[code[pos++]] += registers[code[pos++]];
        break;
    case 0x03: // prn
        printf("%d", registers[code[pos++]]);
        break;
    }
} 
```

一旦你理解了我在这里所做的事情，我很确定你也应该更容易理解其他来源。哦，还有一个有趣的事实：如果您这样做是为了教育目的，而不仅仅是为了编写一个高效的模拟器，那么您可以开始使用 Java。它会不太理想且速度较慢，但​​您基本上可以做同样的事情，甚至可能至少消除您路上的障碍。

快速说明：在上面的示例中，您可以有第二个线程不断地`registers[]`在屏幕上写入内容。通过这种方式，您基本上可以模拟一些视频硬件（例如电视屏幕或 LED）。

如果您正在寻找更多要阅读的资源，我会尝试使用一些简单的处理器并开始学习汇编代码。如果可能，选择一个非常简单的架构。概念总是相同的，但随着指令集、地址空间虚拟化等越来越多，事情可能会变得复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:21:01.643

我建议学习一门汇编语言来获得你需要的基础知识。如果您对超级 nintnedo 等感兴趣，您可以尝试学习 65816-assembly，这是该控制台使用的处理器的汇编语言。要开始，您可以从这里开始阅读：[http](http://en.wikibooks.org/wiki/Super_NES_Programming) ://en.wikibooks.org/wiki/Super_NES_Programming 。其他控制台也存在类似的资源。我还建议使用具有调试功能的模拟器，例如 Geiger 的调试 snes9x，它可以让您逐步执行游戏、转储正在执行的操作、检查内存等。虽然这些都与编写控制台没有直接关系模拟器，它会给你一些你正在寻找的背景。

不过，老实说，如果 C 看起来对你来说完全陌生，那么最好在尝试汇编之前学习其中的一些内容。C 比汇编抽象得多，但仍会为您提供许多重要概念的基础，最重要的是指针。

但基本上，模拟器所做的是单步执行游戏的机器代码，逐条执行。控制台是一个相当复杂的野兽，有多个处理器和协处理器以及相关的硬件协同工作。所以你可能应该从一个更简单的模拟器开始，它只模拟 CPU，而忽略其余的。学习汇编之所以如此有用，是因为汇编与模拟器应该处理的机器代码进行了 1:1 的转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:05:12.470

如果，如您所说，您对硬件一无所知，那么编写仿真器并不容易。了解硬件的基本功能可能比了解任何特定的编程语言更有意义。

我可以推荐 Noam Nisan 和 Shimon Schocken 的书*The Elements of Computing Systems*及其相关的互联网资源 ( [http://www.nand2tetris.org/](http://www.nand2tetris.org/) )。本书将带您从简单的与非门到构建功能计算机，然后到编写汇编程序、编译器和操作系统，最后是俄罗斯方块游戏。在每个级别，您都可以“构建自己的”或使用网络可用的答案来构建下一个级别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-12T06:16:00.790

首先，对模拟器进行编程需要来自多个领域的知识。您需要牢牢掌握的两大领域是计算机体系结构和您选择的编程语言。如果您根本没有编程经验，那么创建模拟器并不是一个好主意。话虽如此，只要您熟悉它，您就可以使用任何您想要的语言创建模拟器！

为了了解系统如何工作，建议您复习计算机体系结构。我建议阅读一本关于该主题的好书，例如[Computer Architecture: A Quantitative Approach](https://rads.stackoverflow.com/amzn/click/com/012383872X)，这对于大多数建筑课程来说是一本非常常见的书。

一旦您掌握了系统如何运行（CPU、内存、寄存器、指令集等）的工作（基本）知识，您就可以尝试模拟您选择的系统。在这个阶段，我建议尽可能多地挖掘有关您选择的系统的信息。[Zophar.net](http://www.zophar.net/documents.html)收集了大量关于许多视频游戏机的技术文档。

一旦您对想要模拟的系统有所了解，我建议您编写代码来读取 ROM 文件并提取文件内容（特别是指令）。下一步是模拟架构的 CPU 并为每条指令编写处理程序。我通过在从 ROM 加载的实际指令上运行 CPU 来测试 CPU。在您实现了大量指令后，您可以开始实现其他子系统，例如图形和事件/中断系统。我通常实施的最终系统是健全的。

（无耻的插件）我在一本名为[*Emulation - Step by Step*](https://goo.gl/CCRBeJ)的书中写了更多关于这一切的内容，我希望在几个月内出版。我还没有看到关于这个主题的另一本书，这很可耻，因为它是一个非常有趣的话题！

# objective-c - 使用 iCloud 时使用 NSFetchedResultsController 的表开始为空

> ID：13127213
> 
> 赞同：0
> 
> 时间：2012-10-29T18:03:56.100
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller, icloud

我的应用程序设置为使用 iCloud 的核心数据，但是当它启动时，显示数据的 UITableView 是空的，需要一点时间来填充数据。有没有办法让它立即显示数据，就好像它没有 iCloud 集成一样？

```
- (NSManagedObjectContext *)managedObjectContext {

    if (managedObjectContext != nil) {
        return managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];

    if (coordinator != nil) {
        NSManagedObjectContext* moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];

        [moc performBlockAndWait:^{
            [moc setPersistentStoreCoordinator: coordinator];
            [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(mergeChangesFrom_iCloud:) name:NSPersistentStoreDidImportUbiquitousContentChangesNotification object:coordinator];
        }];
        managedObjectContext = moc;

        managedObjectContext.mergePolicy = [[NSMergePolicy alloc]
                                            initWithMergeType:NSMergeByPropertyObjectTrumpMergePolicyType];
    }

    return managedObjectContext;
}

- (void)mergeChangesFrom_iCloud:(NSNotification *)notification {

    NSLog(@"Merging in changes from iCloud...");

    NSManagedObjectContext* moc = [self managedObjectContext];

    [moc performBlock:^{

        [moc mergeChangesFromContextDidSaveNotification:notification];

        NSNotification* refreshNotification = [NSNotification notificationWithName:@"SomethingChanged"
                                                                            object:self
                                                                          userInfo:[notification userInfo]];

        [[NSNotificationCenter defaultCenter] postNotification:refreshNotification];
    }];
}

- (NSManagedObjectModel *)managedObjectModel {

    if (managedObjectModel != nil) {
        return managedObjectModel;
    }
    NSString *modelPath = [[NSBundle mainBundle] pathForResource:@"EntryDatabase" ofType:@"momd"];
    NSURL *modelURL = [NSURL fileURLWithPath:modelPath];
    managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];

    return managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

    if((persistentStoreCoordinator != nil)) {
        return persistentStoreCoordinator;
    }

    persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];
    NSPersistentStoreCoordinator *psc = persistentStoreCoordinator;

    // Set up iCloud in another thread:

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // ** Note: if you adapt this code for your own use, you MUST change this variable:
        NSString *iCloudEnabledAppID = @"IDRemovedFromStackOverflow";

        // ** Note: if you adapt this code for your own use, you should change this variable:
        NSString *dataFileName = @"CoreDataStore.sqlite";

        // ** Note: For basic usage you shouldn't need to change anything else

        NSString *iCloudDataDirectoryName = @"Data.nosync";
        NSString *iCloudLogsDirectoryName = @"Logs";
        NSFileManager *fileManager = [NSFileManager defaultManager];

        NSString *storePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:dataFileName];

        NSURL *localStore = [NSURL fileURLWithPath:storePath];

        NSURL *iCloud = [fileManager URLForUbiquityContainerIdentifier:nil];

        if (iCloud) {

            NSLog(@"iCloud is working");

            NSURL *iCloudLogsPath = [NSURL fileURLWithPath:[[iCloud path] stringByAppendingPathComponent:iCloudLogsDirectoryName]];

            NSLog(@"iCloudEnabledAppID = %@",iCloudEnabledAppID);
            NSLog(@"dataFileName = %@", dataFileName);
            NSLog(@"iCloudDataDirectoryName = %@", iCloudDataDirectoryName);
            NSLog(@"iCloudLogsDirectoryName = %@", iCloudLogsDirectoryName);
            NSLog(@"iCloud = %@", iCloud);
            NSLog(@"iCloudLogsPath = %@", iCloudLogsPath);

            if([fileManager fileExistsAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]] == NO) {
                NSError *fileSystemError;
                [fileManager createDirectoryAtPath:[[iCloud path] stringByAppendingPathComponent:iCloudDataDirectoryName]
                       withIntermediateDirectories:YES
                                        attributes:nil
                                             error:&fileSystemError];
                if(fileSystemError != nil) {
                    NSLog(@"Error creating database directory %@", fileSystemError);
                }
            }

            NSString *iCloudData = [[[iCloud path]
                                     stringByAppendingPathComponent:iCloudDataDirectoryName]
                                    stringByAppendingPathComponent:dataFileName];

            NSLog(@"iCloudData = %@", iCloudData);

            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];
            [options setObject:iCloudEnabledAppID            forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudLogsPath                forKey:NSPersistentStoreUbiquitousContentURLKey];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:[NSURL fileURLWithPath:iCloudData]
                                    options:options
                                      error:nil];

            [psc unlock];
        }
        else {
            NSLog(@"iCloud is NOT working - using a local store");
            NSMutableDictionary *options = [NSMutableDictionary dictionary];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
            [options setObject:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

            [psc lock];

            [psc addPersistentStoreWithType:NSSQLiteStoreType
                              configuration:nil
                                        URL:localStore
                                    options:options
                                      error:nil];
            [psc unlock];

        }

        dispatch_async(dispatch_get_main_queue(), ^{
            [[NSNotificationCenter defaultCenter] postNotificationName:@"SomethingChanged" object:self userInfo:nil];
        });
    });

    return persistentStoreCoordinator;

 }

- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    //Set up the fetched results controller.

    // Create the fetch request for the entity.

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Entry" inManagedObjectContext:[AppDelegate applicationDelegate].managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Sort using the timeStamp property..
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"creationDate" ascending:NO];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Use the sectionIdentifier property to group into sections.
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[AppDelegate applicationDelegate].managedObjectContext sectionNameKeyPath:@"sectionIdentifier" cacheName:@"Root"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    self.fetchedResultsController.delegate = self;

    return _fetchedResultsController;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:51:14.780

一种可能的解决方案是为您的包创建一个预填充的 .sqlite 文件，然后在创建持久存储协调器之前将其复制到 Documents 目录

# mysql - 使用 VBA（excel）在 excel 中没有显示正确的结果 - 连接到 mysql

> ID：13127214
> 
> 赞同：1
> 
> 时间：2012-10-29T18:03:57.500
> 
> 标签：mysql, vba, excel

我是 VBA 的初学者。我设法在 VBA 中运行 mySQL 查询，但我在所有 excel 列结果中得到相同的数字。我不确定我应该在代码中更改什么以显示不同的结果。有人可以帮帮我吗？

```
 strSql = "SELECT COUNT(*), destination_id FROM `order`   " & _
     "JOIN user ON user.id = order.destination_id   " & _
     "WHERE payment_status = 'pay'  " & _
     "AND email NOT LIKE '%@thelts.com' " & _
     "AND email NOT LIKE '%trend.com' " & _
     "AND `is_dinstinct` IS NULL; "

    rs.Open strSql, oConn, adOpenDynamic, adLockPessimistic

    res = rs.GetRows

    rs.Close

    Range("A1", "B6") = res(0, 0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:11:39.787

两件事，看起来你在你的 sql 中缺少一个 GROUP BY destination_id （虽然 thst 在 mysql 中可能是合法的，我是一个 sql server 伙计）但我相信你真正的问题是在线......

范围（“A1”，“B6”）= res（0, 0）

您在这里所说的是将结果放在范围的每个单元格中的位置 0, 0 处。

你可以试试

范围("a1") = res(0, 0)

范围("b6") = res(0, 1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:49:04.140

`CopyFromRecordset`是我（&@TimWilliams）用来将结果写入范围的方法 - 您可能会发现它比先加载到数组中更有帮助

[excel帮助](http://msdn.microsoft.com/en-us/library/office/bb223288%28v=office.12%29.aspx)中的一个例子：

```
For iCols = 0 to rs.Fields.Count - 1
    ws.Cells(1, iCols + 1).Value = rs.Fields(iCols).Name
Next
ws.Range(ws.Cells(1, 1), ws.Cells(1, rs.Fields.Count)).Font.Bold = True
ws.Range("A2").CopyFromRecordset rs 
```

将此方法放在您的代码中，

```
strSql = "SELECT COUNT(*), destination_id FROM `order`   " & _
"JOIN user ON user.id = order.destination_id   " & _
"WHERE payment_status = 'pay'  " & _
"AND email NOT LIKE '%@thelts.com' " & _
"AND email NOT LIKE '%trend.com' " & _
"AND `is_dinstinct` IS NULL; "

rs.Open strSql, oConn, adOpenDynamic, adLockPessimistic

Range("A1").CopyFromRecordset rs 
```

# mysql - 提高查询性能/重写查询以在 MySQL 上更快

> ID：13127216
> 
> 赞同：2
> 
> 时间：2012-10-29T18:04:13.630
> 
> 标签：mysql, sql

我有几个查询对我数据库中当前的数据运行非常缓慢（几分钟），我想提高它们的性能。不幸的是，它们有点复杂，所以我通过谷歌获得的信息不足以让我弄清楚要添加哪些索引，或者我是否需要重写我的查询或什么......我希望有人能提供帮助。如果事情设置得当，我*认为他们不应该这么慢。*

第一个查询是：

```
SELECT i.name, i.id, COUNT(c.id) 
FROM cert_certificates c 
JOIN cert_histories h ON h.cert_certificate_id = c.id 
LEFT OUTER JOIN inspectors i ON h.inspector_id = i.id
LEFT OUTER JOIN cert_histories h2 
  ON (h2.cert_certificate_id = c.id AND h.date_changed < h2.date_changed)
WHERE (h.cert_status_ref_id = ? OR h.cert_status_ref_id = ?) 
  AND h2.id IS NULL
GROUP BY i.id, i.name
ORDER BY i.name
```

第二个查询是：

```
SELECT l.letter, c.number
FROM cert_certificates c 
JOIN cert_type_letter_refs l ON c.cert_type_letter_ref_id = l.id
JOIN cert_histories h ON h.cert_certificate_id = c.id
LEFT OUTER JOIN cert_histories h2 
  ON (h2.cert_certificate_id = c.id AND h.date_changed < h2.date_changed)
WHERE h.cert_status_ref_id = ? 
  AND h2.id IS NULL 
  AND h.inspector_id = ?
ORDER BY l.letter, c.number 
```

cert_certificates 表与 cert_histories 表一样包含近 19k 条记录（尽管未来该表预计将增长到 cert_certificates 表大小的大约 2-3 倍）。其他的桌子都很小；每条记录少于 10 条。

现在唯一的索引是每个表的 id 和 cert_certificates.number。我在几个地方（例如[这里](https://stackoverflow.com/questions/3658859/when-to-add-what-indexes-in-a-table-in-rails)）阅读以添加外键索引，但在 cert_histories 表的情况下，几乎所有列（cert_certificate_id、inspector_id、cert_status_ref_id）也是[不可取](https://stackoverflow.com/questions/5447987/why-cant-i-simply-add-an-index-that-includes-all-columns)的（根据一些该问题的答案，例如 Markus Winand 的），所以我有点迷路了。

任何帮助将不胜感激。

ETA：EXPLAIN 在第一个查询中的结果是（对不起，可怕的格式；我使用的是 SQLyog，它在一个漂亮的表中显示它，但似乎 StackOverflow 不支持表？）：

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE h ALL NULL NULL NULL NULL 19740 使用 where；使用临时的；使用文件排序
1 简单我参考 index_inspectors_on_id index_inspectors_on_id 768 marketing_development.h.inspector_id 1   
1 SIMPLE c ref index_cert_certificates_on_id index_cert_certificates_on_id 768 marketing_development.h.cert_certificate_id 91 在哪里使用；使用索引
1 SIMPLE h2 ALL NULL NULL NULL NULL 19740 使用 where
```

第二个查询：

```
id select_type table type possible_keys key key_len ref rows Extra
1 SIMPLE h ALL NULL NULL NULL NULL 19795 使用 where；使用临时的；使用文件排序
1 SIMPLE c ref index_cert_certificates_on_id index_cert_certificates_on_id 768 marketing_development.h.cert_certificate_id 91 使用 where
1 SIMPLE l ALL index_cert_type_letter_refs_on_id NULL NULL NULL 5 使用 where；使用连接缓冲区
1 SIMPLE h2 ALL NULL NULL NULL NULL 19795 使用 where
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:11:16.980

您应该在连接字段上创建索引：

```
cert_certificates.cert_type_letter_ref_id
cert_histories.cert_certificate_id
cert_histories.date_changed
cert_histories.inspector_id 
```

# google-chrome - iPad 2 Chrome 渲染问题

> ID：13127218
> 
> 赞同：1
> 
> 时间：2012-10-29T18:04:24.927
> 
> 标签：google-chrome, css, media-queries, screen-orientation, ipad-2

我目前有一个网站在 iPad 1 和 2 的 Safari 中正确呈现，并且在 iPad 1 Chrome 中正确呈现，但 iPad 2 的 Chrome 没有正确接收我的纵向模式媒体查询。

我正在使用的 CSS 查询：

@media only screen and (min-width: 767px) and (max-width: 979px)

这可以毫无问题地抓住所有其他浏览器。我尝试在其中添加（方向：纵向），但无法解决 Chrome 的问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:20:38.493

iPad 中的 Chrome 在清除缓存方面存在问题，即使使用`clear the browser data`. 目前最好的办法是不要使用 Chrome，而是使用 Safari。大多数时候，两者的渲染都是一样的。

重新安装 Chrome 应用程序将暂时清除缓存并解决问题。

# statistics - 我可以从时间序列数据中获得（我的）什么样的统计数据和信息？

> ID：13127220
> 
> 赞同：1
> 
> 时间：2012-10-29T18:04:26.020
> 
> 标签：statistics, data-mining

我有一个包含不同太阳能发电厂时间序列数据的数据库：太阳有多强以及该工厂创造/收获了多少电力。该数据以 15 分钟为增量。

我想使用数据挖掘来获得新的见解，然后将发现可视化给用户。

我知道这属于数据挖掘领域，但我的问题可能更具体（处理时间序列数据）。那么我可以从这种数据中提取什么，或者我在哪里可以读到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T23:43:04.880

**时间序列分析**本身就是一个完整的领域。也就是说，您始终可以从一些基础知识开始，并不断为您的分析添加更多内容。

从您的太阳能数据开始，您可以尝试以下几件事：

1.  首先，分析您的太阳能数据。也就是说，计算最小值、最大值、每日平均值、每小时峰值和最低值等，以了解数据。使用 x 轴绘制时间将为您提供视觉信息。
2.  时间序列数据可以分解为“趋势”和“季节性”（可以是任何重复的时间间隔）
3.  在数据流中寻找异常值和异常。缺失值、重复等。

如果您想了解有关时间序列的更多信息（并且如果知道 R），那么该`forecast`软件包是入门的好方法。（[尤其是这本免费的电子书](http://a-little-book-of-r-for-time-series.readthedocs.org/en/latest/)）

*对时间序列*的任何搜索都会将您带到 Hyndman 教授的页面，我发现[他的预测书的免费章节](http://otexts.com/fpp/)非常有用。

希望能帮助您入门。

# ios - 仅使用 UIWebview 打开网站是否允许 safari 访问..如何检查

> ID：13127222
> 
> 赞同：2
> 
> 时间：2012-10-29T18:04:40.557
> 
> 标签：ios, safari, restrictions

我已经搜索了网络以及我所有的书籍和参考资料，但我没有找到我想要的东西。

由于构建的应用程序类型，如果用户限制了 Safari，我需要限制对 UIWebView “东西”的访问。

有没有办法检查 safari 是否在 iPhone 上受到限制，如果是这样，例子......网站，参考资料？我希望能够检查并为这些用户发出警报，而其他用户只需加载页面即可。一切都对我有用，但我不知道如何检查它是否受到限制。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:36:06.350

我发现最好的方法是使用以下内容：

```
BOOL safariAvailable = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"http://test"]]; 
```

在 iOS 6.0 中，苹果似乎改变了这种行为（在 5.x 中有效）:(

我发现的唯一方法是实际尝试打开 URL，然后在您的应用程序委托上观察 resignActive 通知。如果您在致电后不久未能得到它，那么它可能不存在 safari。啊。

# xaml - 如何在 WinRT 中使用 XAML 制作 100% 输入对话框

> ID：13127227
> 
> 赞同：0
> 
> 时间：2012-10-29T18:05:02.740
> 
> 标签：xaml, windows-runtime

我想创建一个简单的输入对话框，我很难让它拉伸到屏幕宽度的 100%（我可以手动设置宽度，这不是我想要做的）。我试过水平拉伸，我试过设置左右边距（希望它将两端锚定到边距），我试过用“*”宽度在网格中指定 RowDefintiions。我可以在 XAML 编辑器中看到弹出窗口看起来是屏幕宽度的 100%，但网格不是。

以下面为例。我希望弹出窗口和/或网格在屏幕上跨越 100% 的宽度。有没有一种简单的方法可以做到这一点？

```
<Page
x:Class="TimeCalculator.BlankPage1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:TimeCalculator"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d">

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">

    <Popup x:Name="pop" IsOpen="True" Margin="0,0,0,0">
        <Grid x:Name="popGrid" Background="Green" HorizontalAlignment="Stretch">
            <TextBlock Text="This is the popup where I will ask for input" HorizontalAlignment="Stretch"></TextBlock>
        </Grid>
    </Popup>

</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:49:14.650

尝试

```
popGrid.Width = Window.Current.Bounds.Width; 
```

# android - GCM Demo Application 无法注册到 tomcat 服务器

> ID：13127230
> 
> 赞同：0
> 
> 时间：2012-10-29T18:05:12.877
> 
> 标签：android, tomcat

我已经尝试并通过以下链接完成了 90% 的 Android 的 GCM Demo 应用程序：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)所以我想请你帮忙解决以下错误。我搜索并参考了许多网站和论坛的解决方案。但我想不通。所以请帮助我。谢谢你。![在此处输入图像描述](../Images/45accec571a574759269c3e072f0bbcc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T05:04:43.887

您需要安装帮助程序库并对模拟器进行必要的更改。

1.  转到您的 android SDK 文件夹并打开 SDK Manager 并在 Extras 部分下安装 Google Cloud Messaging for Android Library。（如果您没有看到 Google Cloud Messaging for Android Library，请将您的 SDK 管理器更新到最新版本）

2.  安装库后，它将在您的 Andoird_SDK_Folder\extras\google\gcm\gcm-client\dist 中创建 gcm.jar 文件。稍后您需要将此 .jar 文件添加到您的 android 项目中。

3.  现在打开您的 AVD 管理器并创建一个新的 Google API 模拟器并启动模拟器。（注意：要在模拟器中测试 gcm 应用程序，您只需要在 Google API 设备上测试它）

4.  启动模拟器后，按菜单按钮转到设置。选择帐户和同步。然后按添加帐户按钮并添加一个 Google 帐户。

最后在模拟器上测试您的应用程序。

# css - display: table-cell 导致 firefox 和 opera 忽略 max-width 和 max-height 属性

> ID：13127240
> 
> 赞同：0
> 
> 时间：2012-10-29T18:05:56.530
> 
> 标签：css, firefox, opera, vertical-alignment, css-tables

如果您愿意，请访问[http://debourg-dev.ch/syselcloud/erp-rh/](http://debourg-dev.ch/syselcloud/erp-rh/)，您会看到在 firefox 和 opera 中，图像没有使用 max-height 属性。这是因为我使用 display:table-cell 来垂直对齐它们，如果我删除 display: table-cell 它工作正常。如何将这些图像与 display: table-cell 垂直对齐并让 firefox 和 opera 使用正确的 max-height 值？

相关代码为：

```
.partenaire-logo-wrap {
height: 110px;
text-align: center;
vertical-align: middle;
display: table-cell;
}

.partenaire-logo-wrap img {
max-height: 90px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:07:50.147

```
.partenaire-logo-wrap img {
max-height: 90px;
-moz-height:90px;
-o-height:90px;
} 
```

如果您想查看此帖子，我将从此处获取此信息

[Firefox 中忽略的最大高度，适用于 Chrome 和 Safari](https://stackoverflow.com/questions/3925879/max-height-ignored-in-firefox-works-in-chrome-and-safari)

# php - 从 Mysql 查询创建会话数组

> ID：13127251
> 
> 赞同：0
> 
> 时间：2012-10-29T18:06:49.607
> 
> 标签：php, arrays, session

我对会话或数组还不是很好。

这是我到目前为止的内容，但出现错误

> 警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源。

这是我的代码：

```
$checkgroupadmin = $this->db->query("SELECT group_id FROM groupadmin 
  WHERE contact_id = $contactid");
while ($adminrow = mysql_fetch_array($checkgroupadmin, MYSQL_ASSOC)) {
  $_SESSION[group_admin] = array('group'=>$adminrow['group_id']);
} 
```

任何帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:15:43.763

> > 警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源。

您收到错误是因为`$checkgroupadmin`不是 mysql_fetch_array() 需要的实际查询资源。

```
$checkgroupadmin = $this->db->query("SELECT group_id FROM groupadmin WHERE contact_id = $contactid");` 
```

换句话说，上面的面向对象调用没有返回 mysql 资源查询。

无论如何，您为什么要将面向对象的样式与程序样式混合在一起。其次，上面的代码`$this>db->query`应该发生在一个类的方法中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:09:28.370

`mysql_fetch_array()`返回当前结果的关联数组，但在您的代码中，您只需覆盖`$_SESSION`每个结果中的相同值。您可能需要创建自己的结果 ID 数组，然后将其分配给`$_SESSION`变量。

```
// query database
$checkgroupadmin = $this->db->query("SELECT group_id FROM groupadmin WHERE contact_id = $contactid");
// array to hold each group_id
$result_array = array();
// varify that $checkgroupadmin returned results 
if ($checkgroupadmin){
    // get results into associative array
    while ($adminrow = mysql_fetch_array($checkgroupadmin, MYSQL_ASSOC)) {
        // put the group id into your results array
        $result_array[] = $adminrow['group_id'];
    }
}
// set results array to the 'group_admin' key in $_SESSION
$_SESSION['group_admin'] = $result_array; 
```

请注意[mysql_* 扩展已被弃用](http://news.php.net/php.internals/53799)，您应该改用[mysqli](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)。

# linux - Qmake 不包含 qt 的库路径

> ID：13127264
> 
> 赞同：2
> 
> 时间：2012-10-29T18:07:47.297
> 
> 标签：linux, qt, qmake

我只是在我的 slax 盒子上安装了 qt，我尝试使用 qmake 编写和编译。

但问题是 qmake 没有写它的“Makefile”来包含 -Lqt-mt 或 -Lqt。我必须手动提供，否则会有未解决的链接。我能为此做些什么？有什么解决方法吗？

![在此处输入图像描述](../Images/04d63d77a58d7d445d3a1e08fa8c3807.png)

这是 qmake 的“Makefile”输出。

```
#############################################################################
# Makefile for building: hello
# Generated by qmake (2.01a) (Qt 4.5.3) on: Tue Feb 2 04:04:03 2010
# Project:  hello_world.pro
# Template: app
# Command: /usr/bin/qmake -unix -o Makefile hello_world.pro
#############################################################################

####### Compiler, tools and options

CC            = gcc
CXX           = g++
DEFINES       = 
CFLAGS        = -pipe $(DEFINES)
CXXFLAGS      = -pipe $(DEFINES)
INCPATH       = -I/usr/lib/qt-3.3.8b/mkspecs/linux-g++ -I.
LINK          = g++
LFLAGS        = 
LIBS          = $(SUBLIBS)   
AR            = ar cqs
RANLIB        = 
QMAKE         = /usr/bin/qmake
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = $(COPY)
COPY_DIR      = $(COPY) -r
INSTALL_FILE  = $(COPY_FILE)
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = $(COPY_FILE)
DEL_FILE      = rm -f
SYMLINK       = ln -sf
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p

####### Output directory

OBJECTS_DIR   = ./

####### Files

SOURCES       = hello_world.cpp 
OBJECTS       = hello_world.o
DIST          = hello_world.pro
QMAKE_TARGET  = hello
DESTDIR       = 
TARGET        = hello

first: all
####### Implicit rules

.SUFFIXES: .o .c .cpp .cc .cxx .C

.cpp.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cc.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.cxx.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.C.o:
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"

.c.o:
    $(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"

####### Build rules

all: Makefile $(TARGET)

$(TARGET):  $(OBJECTS)  
    $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)

Makefile: hello_world.pro  /usr/lib/qt-3.3.8b/mkspecs/linux-g++/qmake.conf 
    $(QMAKE) -unix -o Makefile hello_world.pro
qmake:  FORCE
    @$(QMAKE) -unix -o Makefile hello_world.pro

dist: 
    @$(CHK_DIR_EXISTS) .tmp/hello1.0.0 || $(MKDIR) .tmp/hello1.0.0 
    $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/hello1.0.0/ && (cd `dirname .tmp/hello1.0.0` && $(TAR) hello1.0.0.tar hello1.0.0 && $(COMPRESS) hello1.0.0.tar) && $(MOVE) `dirname .tmp/hello1.0.0`/hello1.0.0.tar.gz . && $(DEL_FILE) -r .tmp/hello1.0.0

clean:compiler_clean 
    -$(DEL_FILE) $(OBJECTS)
    -$(DEL_FILE) *~ core *.core

####### Sub-libraries

distclean: clean
    -$(DEL_FILE) $(TARGET) 
    -$(DEL_FILE) Makefile

compiler_clean: 

####### Compile

hello_world.o: hello_world.cpp 
    $(CXX) -c $(CXXFLAGS) $(INCPATH) -o hello_world.o hello_world.cpp

####### Install

install:   FORCE

uninstall:   FORCE

FORCE: 
```

这是我使用的 .pro 文件。

```
TEMPLATE=app
CONFIG+= qt warn_on release
HEADERS=
SOURCES=hello_world.cpp
TARGET=hello 
```

我已经设置了 $QTDIR 并且我认为一切都已就绪。我错过了哪里？为什么我必须手动给它？为什么qmake首先不起作用？

编辑：在makefile中有

```
LIBS          = $(SUBLIBS) 
```

我所做的就是将其更改为，

```
LIBS          = $(SUBLIBS)  -lqt-mt 
```

更改后一切正常！问题又来了，为什么我必须手动做这样的事情？

对于@Frank Osterfeld，我认为我使用的是正确的'qmake'，因为当我点击 qmake --version 时，我确实明白了。

```
QMake version 2.01a
Using Qt version 4.5.3 in /usr/lib/qt/lib 
```

- 提前致谢 -

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:15:14.880

当一台机器上安装了多个 Qt 时，正确设置环境以指向正确的 Qt 版本非常重要。以下是要检查的重要环境变量：

1.  `$QTDIR`-- 应该指向 Qt 安装的基目录。
2.  `$QMAKESPEC`-- 应该指向`$QTDIR`（例如`$QTDIR/mkspecs/linux-g++`）下的制作规范目录。
3.  `$QT_PLUGIN_PATH`-- 应该指向插件目录，通常在 Qt 安装中（例如`$QTDIR/plugins`）。
4.  `$PATH`-- 里面应该有`$QTDIR/bin`目录。您希望使用的安装应该首先在`$PATH`.

如果一切都失败了，请检查您的完整环境以确保引用了正确的 Qt 安装（`env`在 *nix 上使用，`set`在 Windows 上使用）。

`Makefile`如果您注意到在生成的 by中指向错误安装的目录`qmake`，则可能是您的环境没有正确设置（在这种情况下，`$QMAKESPEC`是罪魁祸首）。

最后，重要的是要注意 Qt3 中的库不再存在于 Qt4 中：Qt3 有`libqt-mt`,`libqui`等。Qt4 有`libQtCore`,`libQtGui`等。

# javascript - Javascript 使用 onclick="showElem 打开/关闭 div

> ID：13127272
> 
> 赞同：0
> 
> 时间：2012-10-29T18:08:18.617
> 
> 标签：javascript, html

我有一个用户点击图像以显示 div 的工作概念。

我使用`javascript:void(0);`and`onclick="showElem('div40');"`来打开和关闭 div

我在这里有一个 jsFiddle：http: [//jsfiddle.net/dillon/M4t5Q/](http://jsfiddle.net/dillon/M4t5Q/)

我想要的是一次只允许一个 div 打开。因此，如果其中一个 div 已打开，则单击另一个 div 时它将关闭。

我自己无法找到解决方案，所以我希望得到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:11:35.433

最简单的解决方案就是进行修改`showElem`，以便`div`在打开活动的之前关闭所有可能的 open 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:17:03.923

要隐藏所有当前打开的 DIV，您可以使用：

```
// close all other DIVs with class 'show'
var currentlyShown = document.getElementsByClassName('show');
for(var i in currentlyShown) {
    currentlyShown[i].className = 'hide';
} 
```

**演示**：http: [//jsfiddle.net/M4t5Q/3/](http://jsfiddle.net/M4t5Q/3/)

# python - python - 如何使用python中的csv模块导入分隔符不规则的文件？

> ID：13127273
> 
> 赞同：1
> 
> 时间：2012-10-29T18:08:19.027
> 
> 标签：python, list, csv, import, delimiter

我想这是一个非常简单的问题，但直到现在对我来说还没有......我有一个包含这样列的文件：

```
1 2  3 4  5   3
6 7 -8 9  0   5
4 8 -4 6 -7   8 
```

我在python中有这段代码：

```
import csv

MyValues = [] #create an empty list
values = csv.reader(open('myfile', 'rb'), delimiter=' ')
for row in values:
    MyValues.append(row[5] if len(row)>4 else None)
print MyValues 
```

问题是分隔符不仅仅是一个空格，有时是两个或三个空格。直到现在我无法修复，即使使用嗅探器或方言例程......有人知道如何导入列吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:11:39.420

而不是使用 csv 模块，只需[`str.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)在每一行上使用：

```
MyValues = []
for line in open('myfile'):
    row = line.split()
    MyValues.append(row[5] if len(row)>4 else None)
print MyValues 
```

`str.split()`默认情况下以空格分割字符串，连续的空格字符将被视为单个分隔符。

# jquery - jquery验证textarea的addmethod

> ID：13127275
> 
> 赞同：3
> 
> 时间：2012-10-29T18:08:22.023
> 
> 标签：jquery, forms, jquery-validate

嗨，使用 jquery validate 插件，使用 .add 方法来检查输入是否等于联系人姓名，如果是，则要求用户输入姓名

```
$(document).ready(function(){
$.validator.addMethod("contact1", function(value) {
    return value != "Contact Name";
}, 'Please enter a contact name');
$.validator.addMethod("message1", function(value){
    return value != "Message";
}, 'Please enter a contact name');

$('.contact-form form').validate({
rules: {
  contact: {
    "contact1":'',
    required: true
  },
  text: {
    "message1":'',
    required: true
  },

}, 
```

}); });

这适用于 input="text" 框但不适用于文本区域我将如何让它适用于文本区域？

编辑抱歉遗漏了我对文本区域的添加方法

这就是我在 html 中的内容

```
<textarea onblur="if(this.value=='')this.value=this.defaultValue;"
        onfocus="if(this.value==this.defaultValue)this.value='';" rows="5" id="text" name="text">Message
                                   </textarea> 
```

它确实正确调用了“必需”，但没有正确调用 .addmethod 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:33:37.420

我没有看到代码错误，在您的 html 中`input`记住设置`name`属性，验证使用它。

输入：http: [//jsfiddle.net/TBnLH/1/](http://jsfiddle.net/TBnLH/1/)

文本区域：http : [//jsfiddle.net/TBnLH/6/](http://jsfiddle.net/TBnLH/5/)

# csv - JMeter CSV 循环

> ID：13127276
> 
> 赞同：0
> 
> 时间：2012-10-29T18:08:25.453
> 
> 标签：csv, jmeter

谁能告诉我如何在不停止线程的情况下循环两次相同的 CSV 文件？

目前我有

```
Thread Group
+-- While Controller
    +-- CSV (True,True,False)
        Loop Controller (2)
        +-- SOAP/RPC Request 
```

所以想法是检索 5 个请求，然后再次重复相同的 5 个请求。
注意：我不想两次发送相同的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:15:01.500

假设你的问题的意思是：“我想重用数据集，但不想同时发送相同的请求。”，那么你应该可以设置以下配置。你不应该需要一个while循环。

```
Thread Group
* Loop Count = 2
* Thread Count = 5
|
+-- CSV 
    * Recycle on EOF = true
    * Stop thread on EOF = false
    * Sharing mode = All threads 
```

打破它：

*   线程组上的循环计数将运行整个线程组指定的次数，有 5 个线程，每个线程将从您的 CSV 文件发出一个请求
*   CSV 数据集配置上的“回收”和“停止线程”设置将导致数据集被重复使用，直到线程完成。

实现此目的的另一种方法是将循环计数设置为您要采样的 URL 数量的倍数：

```
Thread Group
* Loop Count = 10
* Thread Count = 1
|
+-- CSV 
    * Recycle on EOF = true
    * Stop thread on EOF = false
    * Sharing mode = All threads 
```

这效率略低，因为这意味着请求必须串行执行而不是并行线程，但这是另一种执行方式。

# android - Android中的视频播放器问题

> ID：13127278
> 
> 赞同：0
> 
> 时间：2012-10-29T18:08:26.063
> 
> 标签：android, video-streaming, android-videoview

我正在构建一个涉及视频播放器的应用程序，我有一个列表视图，它显示视频列表，然后单击其中任何一个应该播放该视频。我使用的链接是 rstp youtube 链接，视频播放正常，但是当我在播放视频后单击返回按钮并再次进入列表时，我得到抱歉视频无法播放错误。

这是我的视频播放器类和列表类：

视频播放器类：

```
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single);
    vid=(VideoView) findViewById(R.id.svid);
    iv=(ImageView) findViewById(R.id.simg);
    ip=(ImageView) findViewById(R.id.playimg);
    t=(TextView) findViewById(R.id.textView1);
    final ProgressDialog pd=new ProgressDialog(SingleItem.this);
    Intent g=getIntent();
    thumb=g.getStringExtra("thumb");
    link=g.getStringExtra("link");
    msg=g.getStringExtra("msg");
    //link="rtsp://v7.cache5.c.youtube.com/CjYLENy73wIaLQmgwjdV-8ZI5BMYJCAkFEIJbXYtZ29vZ2xlSARSBWluZGV4YKSf0bH1u4jEUAw=/0/0/0/video.3gp";
     String path1=link;
        MediaController mc = new MediaController(this);
        mc.setAnchorView(vid);
        mc.setMediaPlayer(vid);
        uri=Uri.parse(path1);
        vid.setMediaController(mc);
        vid.setVideoURI(uri);
      //  vid.requestFocus();
        //iv.setClickable(true);
        loadImage(thumb);
        t.setText(msg);
        ip.setClickable(true);
        ip.setImageResource(R.drawable.play);
        // ip.setVisibility(ImageView.INVISIBLE);
        vid.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                // TODO Auto-generated method stub
                //ip.setVisibility(ImageView.VISIBLE);
                pd.dismiss();

            }
        });
        ip.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                 vid.start();
                 pd.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                    pd.setMessage("Loading Video...");
                    pd.setIndeterminate(false);
                    pd.setCancelable(true);
                    pd.show();

                    if(vid.isPlaying()){
                         iv.setVisibility(ImageView.INVISIBLE);
                         ip.setVisibility(ImageView.INVISIBLE);
                     }else{
                         iv.setVisibility(ImageView.VISIBLE);
                         ip.setVisibility(ImageView.VISIBLE);
                         vid.stopPlayback();
                     }

            }
        });
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    vid.stopPlayback();

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    vid.stopPlayback();
}

void loadImage(String image_location){

    URL imageURL = null;

    try {
     imageURL = new URL(image_location);
     } 

    catch (MalformedURLException e) {
        e.printStackTrace();
     }

    try {
     HttpURLConnection connection= (HttpURLConnection)imageURL.openConnection();
     connection.setDoInput(true);
     connection.connect();
        InputStream inputStream = connection.getInputStream();

        bitmap = BitmapFactory.decodeStream(inputStream);//Convert to bitmap
        iv.setImageBitmap(bitmap);
    }
    catch (IOException e) {

         e.printStackTrace();
    }

} 
```

}

我的列表类：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    pf=new PrefMethods(this);
    e=(EditText) findViewById(R.id.editText1);
    go=(Button) findViewById(R.id.bGo);

    e.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            if(e.getText().length()==0){
            adapter=new LazyAdapter(VideoList.this, myList);
            //Toast.makeText(getApplicationContext(), "Here finally", 500).show();
            list.setAdapter(adapter);
            }
        }
    });

        ArrayList<String> items = new ArrayList<String>();
        myList = new ArrayList<HashMap<String, String>>();
        arr_link = new ArrayList<String>();
        arr_thumb = new ArrayList<String>();
        arr_msg = new ArrayList<String>();
        allItems=new ArrayList<HashMap<String, String>>();
        try {
            URL urlnew= new URL("link");
            HttpURLConnection urlConnection =
                (HttpURLConnection) urlnew.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.connect();
                        // gets the server json data
            BufferedReader bufferedReader =
                new BufferedReader(new InputStreamReader(
                        urlConnection.getInputStream()));
            String next;
            while ((next = bufferedReader.readLine()) != null){
                JSONArray ja = new JSONArray(next);
                int k=ja.length();
                vid_id=pf.loadprefs();
                //Toast.makeText(getApplicationContext(), "Here", 500).show();
                for (int i = 0; i < ja.length(); i++) {
                    HashMap<String, String> map = new HashMap<String, String>();
                    JSONObject jo = (JSONObject) ja.get(i);
                    WaveData waveData = new WaveData(jo.getString("VUpload"), jo.getInt("recid"),jo.getString("VYoutube"),jo.getString("VMessage"),jo.getString("VThumb"));
                    if(jo.getInt("recid")>vid_id){
                        if(i==k-1){
                            pf.saveprefs(jo.getInt("recid")); 
                            //vid_id=2;
                            vid_id=jo.getInt("recid");
                            //Toast.makeText(getApplicationContext(), ""+vid_id, 500).show();
                        }else{}
                    }else{}
                    if(jo.has("VUpload")){
                    map.put("msg", jo.getString("VMessage"));
                    map.put("youtube", jo.getString("VYoutube"));
                    map.put("thumb", jo.getString("VThumb"));
                  //  Toast.makeText(getApplicationContext(), "Here too", 500).show();
                    myList.add(map);

                    //Toast.makeText(getApplicationContext(), jo.getString("VMessage"), 500).show();
                    items.add(jo.getString("VMessage"));
                    arr_msg.add(jo.getString("VMessage"));
                    arr_link.add(jo.getString("VYoutube"));
                    arr_thumb.add(jo.getString("VThumb"));
                    }       
                }     
            }
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        list=(ListView)findViewById(R.id.list);
        adapter=new LazyAdapter(this, myList);
        //Toast.makeText(getApplicationContext(), "Here finally", 500).show();
        list.setAdapter(adapter);
        //Toast.makeText(getApplicationContext(), "Set List ", 500).show();
        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                String l=list.getAdapter().getItem(arg2).toString();
                Toast.makeText(getApplicationContext(), l, 500).show();
                String sthumb=arr_thumb.get(arg2);
                String slink=arr_link.get(arg2);
                String smsg=arr_msg.get(arg2);
                Intent vid=new Intent(getApplicationContext(), SingleItem.class);
                vid.putExtra("link", slink);
                vid.putExtra("msg", smsg);
                vid.putExtra("thumb", sthumb);
                startActivity(vid); 
            }
        });

          go.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                allItems.clear();
                String l= e.getText().toString();
                for(int g=0;g<vid_id;g++){

                    if(myList.get(g).containsValue(l)){
                        allItems.add(myList.get(g));
                    }
                }
                adapter=new LazyAdapter(VideoList.this, allItems);
            //  Toast.makeText(getApplicationContext(), "Here finally", 500).show();
                list.setAdapter(adapter);
                }
            });
    }
} 
```

视频列表加载没有问题，甚至视频播放，但是当我点击后退按钮时，它回到列表并说对不起，这个视频无法播放！

有什么想法为什么会出错？

提前谢谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:03:31.430

修复了这个问题，我所做的只是让视频在 onPause 和 onDestroy 方法中停止播放。

现在它工作正常没有任何错误

# ios - iOS Facebook SDK：必须使用活动访问令牌来查询有关当前用户的信息

> ID：13127282
> 
> 赞同：13
> 
> 时间：2012-10-29T18:08:54.127
> 
> 标签：ios, facebook, facebook-ios-sdk

我遵循了许多示例并查看了有关此访问令牌错误的许多问题，但我似乎无法找出我得到它的原因或如何修复它。

我像在 3.1 sdk 示例中那样初始化 Facebook：

```
 NSArray* permissions = [[NSArray alloc] initWithObjects:@"publish_stream", @"publish_actions", nil];
 self.fb = [[FBSession alloc] initWithPermissions:permissions];
 [self.fb openWithCompletionHandler:^(FBSession *session,
                                         FBSessionState status,
                                         NSError *error)
     {
         [self sessionStateChanged:session :status :error];
     }]; 
```

这工作正常，用户被要求接受 Safari 中的应用程序权限，然后返回到应用程序。当用户返回到应用程序时，我的 FBSessionState 是 FBSessionStateOpen。

当我尝试这个时：

```
[FBRequestConnection startForMeWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error)
                 {

                     [self showAlert:@"logged in?" result:result error:error];
                 }]; 
```

或这个：

```
NSMutableDictionary* fbPost = [[NSMutableDictionary alloc] initWithObjectsAndKeys:@"post from iOS", @"message", nil];
[FBRequestConnection startWithGraphPath:@"me/feed" parameters:fbPost HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection, id result, NSError *error)
                                        {

                                            [self showAlert:@"message posted?" result:result error:error];
                                        }]; 
```

但我得到：

```
FBSDKLog: FBURLConnection <#1126>:

  Duration: 936 msec

Response Size: 0 kB

  MIME type: text/javascript

  Response:

{"error":{"message":"An active access token must be used to query information about the current user.","type":"OAuthException","code":2500}} 
```

我从我的 FBSession 中获取了访问令牌并将其放入 Facebook 的访问令牌调试器中，它表明我有一个好的令牌：

```
App ID: <hidden>
Metadata: {"sso":"iphone-safari"}
User ID: <hidden>
Issued:  1351525817 (about an hour ago)
Expires: 1356709817 (in about 2 months)
Valid:  True
Origin: Mobile Web Faceweb
Scopes: create_note photo_upload publish_actions publish_stream share_item status_update video_upload 
```

我必须在设置或其他东西中遗漏一些小细节。

谢谢大家！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-31T21:47:56.777

根据文档，[https://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection](https://developers.facebook.com/docs/reference/ios/3.1/class/FBRequestConnection)

“该请求使用由 [FBSession activeSession] 表示的活动会话。”

这适用于处理请求的静态方法。因此，您要做的是确保设置活动会话。请执行下列操作：

```
[FBSession setActiveSession:self.fb]; 
```

就在您调用第一个 FBRequestConnection start* 方法之前。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-07T21:11:29.217

好吧，过了一段时间，注意到 FBSession.activeSession 不是零，我在发送请求之前缺少的是：

```
 if (!FBSession.activeSession.isOpen) {
        [FBSession openActiveSessionWithAllowLoginUI: YES];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-01T21:34:08.947

尝试使用`FBSDKGraphRequest`登录前创建的对象时，我在 SDK 的 v4 中遇到此错误。当我将其更改为`FBSDKGraphRequest`在使用它之前立即创建（即登录后）时，它工作正常。似乎此类的初始化程序设置了一些在请求启动时未刷新的令牌。

登录后我尝试更新请求的`tokenString`属性，但由于某种原因，这是一个`readonly`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T12:53:13.817

/* 不推荐用于 google 和 facebook func application(_ application: UIApplication, open url: URL, sourceApplication: String?, annotation: AnyObject) -> Bool { let googleDidHandle = GIDSignIn.sharedInstance().handle(url, sourceApplication: sourceApplication,注释：注释）

```
 let facebookDidHandle = FBSDKApplicationDelegate.sharedInstance().application(
        application, 
```

open: url, sourceApplication: sourceApplication, annotation: annotation) print(facebookDidHandle) return googleDidHandle || facebookDidHandle } */

所以我使用了 func application(_ application: UIApplication, open url: URL, options: [String: AnyObject]) -> Bool {

```
 return FBSDKApplicationDelegate.sharedInstance().application(application, didFinishLaunchingWithOptions: options) || GIDSignIn.sharedInstance().handle(url as URL!, sourceApplication: options[UIApplicationOpenURLOptionsSourceApplicationKey] as! String, annotation: options[UIApplicationOpenURLOptionsAnnotationKey])
} 
```

xcode 8 测试版 3，iOS 10

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T14:23:58.383

你也可以试试这个，对我有用

```
func application(_ application: UIApplication,
                      open url: URL, 
                       options: [String: AnyObject]) -> Bool
{
    let delegate = FBSDKApplicationDelegate.sharedInstance()

    return delegate.application(application, open: url, 
                                sourceApplication: options["UIApplicationOpenURLOptionsSourceApplicationKey"] as! String, 
                                       annotation: options["UIApplicationOpenURLOptionsAnnotationKey"])
} 
```

# angularjs - angularjs：如何返回调用视图？

> ID：13127284
> 
> 赞同：1
> 
> 时间：2012-10-29T18:09:04.097
> 
> 标签：angularjs

我有一个用于创建项目的视图。在其他视图中，我有指向此项目视图的链接。当用户关闭项目视图时，我需要返回到从中调用项目视图的视图。angularjs 有支持吗？

到目前为止，我还没有看到比这更先进的东西：

```
function myController($scope, $location, ...) {
    ...
    $scope.submit = function () {
        $scope.item.$save(function () {
            $location.path("/my/url");
        });
    };
} 
```

我正在寻找`"/my/url"`用非硬编码的东西替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:07:45.317

我想到的一个建议是在你的根范围（或一些共享的父范围）中有一个可以用作堆栈的数组。当您有一个想要返回的“子流”时，您可以在进入子流之前将当前位置推送到堆栈。子流完成后，它可以将最后一个位置从堆栈中弹出并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T23:14:09.320

`history.back();`应该可以正常工作。路由的重点是利用 URL，因此浏览器上的“后退按钮”可以通过单页应用程序“向后”导航。 `history.back();`只是回到浏览器的历史。

# r - R GraphNEL：adj 函数的结果是长度为 1 的向量。分别访问连接的值？

> ID：13127286
> 
> 赞同：1
> 
> 时间：2012-10-29T18:09:19.370
> 
> 标签：r, random

我正在使用 graphNEL 对象，需要提取指定节点的相邻节点。这可以用 adj(nodes(graph),"node123") 解决，但是节点作为大小为 1 的向量返回。所以我不能直接访问它的 vertain 节点。

让我们说：

```
> adjacent <- adj(subgraph,"hsa:991")
> adjacent
$`hsa:991`
[1] "hsa:10744" "hsa:29945" "hsa:51433" "hsa:8881" 
```

对于一个算法，我只需要说“hsa:29945”，但由于这个向量的大小为 1，我有一个问题。这可能吗？最好的事情是每个节点都被识别为一个元素。顺便说一句：也许有人可以向我解释为什么它们甚至只是一个元素我的意思是 [1] "hsa:10744 hsa:29945 hsa:51433 hsa:8881" 我可以理解，但为什么每个节点后都有引号？毕竟我只需要在图上实现随机游走。但是我还没有找到任何包裹。所以我会尝试自己实现它。

希望您能够帮助我。提前致谢。干杯丰富

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:16:39.750

`adj(g, index=XXX)`正在返回一个列表，其中包含 XXX 的每个条目的邻居。因此，为了提取 XXX 条目的结果，您需要访问列表中的相应条目。然后，这将为您提供所需的结果：

```
##a simple mock-up graph
g <- new("graphNEL", nodes=c("V1","V2","V3"), edgemode="undirected")
g <- addEdge("V1","V2",g)
g <- addEdge("V1","V3",g)

adj.res <- adj(g,"V1") #returns a list
adj.res[["V1"]] #returns a vector 
```

# c# - 一种将 WPF 窗口添加到 C# 表单应用程序中的方法

> ID：13127289
> 
> 赞同：1
> 
> 时间：2012-10-29T18:09:27.233
> 
> 标签：c#, .net, wpf, forms, wpf-controls

我想让表单加载具有透明背景和非矩形形状的初始屏幕，并且可以点击。这可能吗 ？这个怎么做的 ？

我想知道是否有办法让 Form1 在同一个 vs 项目中调用 WPF 窗口（作为一种启动画面）。

我尝试在 VS 的项目资源管理器中右键单击该项目-> 添加，然后我正在搜索 WPF 窗口。但我唯一能添加的是“wpf User Controll”。

到目前为止一切都很好，但是如果我启动应用程序，它会给我一个错误，说我应该添加对 System.Windows.markup.IQueryAmbient 的引用，但我无法在列表中找到它（.NET）

我究竟做错了什么 ？将 WPF 窗口实现到 Forms 应用程序项目中的正确方法是什么？

感谢所有建议。

**编辑：**

这是 Adob​​e Flash Professional CS6 的启动画面，它几乎准确地解释了我想要什么。包含半透明和全透明部分的非矩形图像 [http://webalazar.com/wp-content/uploads/2012/09/Adobe-Flash-Professional-CS6.png](http://webalazar.com/wp-content/uploads/2012/09/Adobe-Flash-Professional-CS6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:18:03.620

有 3 种方法可以做到这一点：

1.) 完全使用 WPF，然后在您的 WPF 应用程序中引用 WinForms .NET 库，如果您想要 WinForms 特定的东西

2.) 创建一个新的 WPF 库（一个可以在您的代码中引用的 .NET dll），其中包含您想要的所有 WPF 功能（如您的初始屏幕），然后创建一个新的 WinForms .NET 应用程序并引用 WPF WinForms 项目中的项目，然后从 WinForms 应用程序调用 WPF 库

3.) 根据您要完成的任务（例如特殊的图形窗口或其他“花哨”的 UI 内容），以及您愿意投入多少时间/精力，您可以学习 DirectX，或使用 'gdi32\. dll' 并导入它的 GDI+ 功能。

编辑：

因此，这是在 WindowForm C# 应用程序中获取 WPF 启动画面的一步一步：

1.) 创建一个新的 C# Windows 窗体应用程序，随意调用它并将其保存在您想要的任何位置

2.) 文件->添加->新建项目

3.) 添加一个新的 C# WPF 用户控件库，将其命名为 SplashScreen 并确保注意它会尝试将其保存在相同的文件位置，因此如果要将其保存在其他位置，请务必选择不同的位置。

4.) 删除在 SplashScreen WPF 库中创建的默认“UserControl1.xaml”

5.) 右键单击​​ WPF 项目和“添加->窗口”，然后将其命名为 SplashScreen.xaml

6.) 将 SplashScreen.xaml 中的所有现有代码替换为以下内容：

```
<Window x:Class="SplashScreen.SplashScreen"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None" Background="Transparent" AllowsTransparency="True"
        ShowInTaskbar="False" SizeToContent="WidthAndHeight"
        Title="SplashScreen" WindowStartupLocation="CenterScreen">
    <Image Source="logo.png" Stretch="None" />
</Window> 
```

7.) 右键单击​​ WPF 项目和“添加->现有项目”，确保您的文件过滤器设置为“所有文件”并选择“logo.png”。

8.) 查看新导入的“logo.png”的属性并确保其“构建操作”设置为“资源”

9.) 在您的 Windows 窗体项目中，右键单击“添加”->“新建引用”，选择“项目”选项卡并选择您刚刚创建的“SplashScreen”WPF 项目。

10.) 在您的 Windows 窗体项目中，右键单击“添加”->“新建引用”，选择“.NET”选项卡并选择“PresentationFramework”、“PresentationCore”、“WindowsBase”和“System.Xaml”库。

11.) 在 Windows 窗体项目的“Program.cs”文件中，您现在可以执行以下操作：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace MyGame
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);

            // Create a new 'splash screen instance
            SplashScreen.SplashScreen ss = new SplashScreen.SplashScreen();
            // Show it
            ss.Visibility = System.Windows.Visibility.Visible;
            // Forces the splash screen visible
            Application.DoEvents();
            // Here's where you'd your actual loading stuff, but this
            // thread sleep is here to simulate 'loading'
            System.Threading.Thread.Sleep(5000);
            // Hide your splash screen
            ss.Visibility = System.Windows.Visibility.Hidden;
            // Start your main form, or whatever
            Application.Run(new Form1());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:54:33.483

1.  创建 Windows 窗体
2.  将其设置`FormBorderStyle`为无
3.  将其设置`TransparencyKey`为#00FF00
4.  将其设置`BackgroundImage`为 png 图像，并将不需要的区域颜色设置为 #00FF00
5.  完毕！

当您将图像加载为表单的背景图像时，它会将其每个像素与透明度键进行比较，如果匹配，则将该像素呈现为透明。

# java - 在无头环境中在 Ubuntu 上使用 Chrome 运行 Selenium 测试

> ID：13127291
> 
> 赞同：0
> 
> 时间：2012-10-29T18:09:38.560
> 
> 标签：java, selenium

关于这个主题有大量的帖子，但由于某种原因，我发现几乎没有与 Chrome 相关（似乎最近添加了对 headless 的支持）。**测试使用浏览器在本地运行**。

1.  是否可以从 Java 触发 Xvfb 显示，以便我可以在一个地方管理所有内容？我宁愿不必这样做：

    Xvfb :1 -screen 0 1024x768x24 &

通过命令行。运行显示器然后关闭它会很有用。

1.  [以编程方式将环境属性设置为 ChromeDriver](https://stackoverflow.com/questions/7722615/setenvironmentproperty-to-chromedriver-programatically)是我发现的解决方案。

问题？我无法让它在 Ubuntu 机器上运行。

我收到的错误是：

```
/home/ubuntu/myproject/conf/chromedriver: 1: Syntax error: Unterminated quoted string 
```

我正在使用的测试类：

```
import java.io.File;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeDriverService;

import play.Logger;
import utils.LocalInfo;

import com.google.common.collect.ImmutableMap;

public class TestCI {

    private WebDriver driver;

    @SuppressWarnings("deprecation")
    public TestCI(String url) {

        if (!LocalInfo.isEC2()) {

            Logger.info("Running tests by opening a browser...");

            System.setProperty("webdriver.chrome.driver", "conf/chromedriver");

            setWebDriver(new ChromeDriver());

        } else {

            Logger.info("Running tests headlessly...");

            String xPort = System.getProperty("Importal.xvfb.id", ":1");

            ChromeDriverService service = new ChromeDriverService.Builder()
                    .usingChromeDriverExecutable(new File("conf/chromedriver"))
                    .usingAnyFreePort()
                    .withEnvironment(ImmutableMap.of("DISPLAY", xPort)).build();

            setWebDriver(new ChromeDriver(service));

        }

        getWebDriver().get("http://www.google.com");

        try {
            someUITest();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        getWebDriver().close();

    }

    public WebDriver getWebDriver() {
        return driver;
    }

    public void setWebDriver(ChromeDriver driver) {
        this.driver = driver;
    }

    public void someUITest() throws Exception {

        getWebDriver().findElement(By.name("q"));

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:03:14.140

我切换到 chromedriver for linux，它摆脱了未终止的引用字符串错误[http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

# cryptography - 将带有自定义 oid 的已验证/签名属性添加到 PKCS#7 签名？

> ID：13127293
> 
> 赞同：1
> 
> 时间：2012-10-29T18:09:42.473
> 
> 标签：cryptography, openssl, pkcs#7

有没有办法使用 openssl 为 PKCS#7 签名消息传递额外的认证属性？我被命令行困住了。

我目前正在使用：

```
openssl smime -sign -outform DER -md sha1 -binary -signer my.crt -inkey my.key 
```

我在 openssl cli 帮助中没有找到任何相关选项。

* * *

更多信息 ：

我目前正在尝试在 NodeJS 中构建 SCEP（http://tools.ietf.org/pdf/draft-nourse-scep-23.pdf）服务器。

SCEP 规范需要构建 PKCS#7 签名`pkiMessages`，

```
The SignerInfo MUST contain a set of authenticatedAttributes (see PKCS#7 [RFC2315] Section 9.2 as well as Section 3.1.1 in this document). All messages MUST contain
* an SCEP transactionID attribute
* an SCEP messageType attribute
* an SCEP senderNonce attribute
* any attributes required by PKCS#7 [RFC2315] Section 9.2 If the message is a response, it MUST also include 
```

目前我唯一的选择是`openssl`通过`child_process.spawn`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T22:14:50.450

不幸的是，无法从 OpenSSL 命令行（无论是使用 smime 还是使用 cms 命令）向签名消息添加自定义属性。如果要添加一些自定义属性，则必须使用 OpenSSL API。

主要步骤是：

*   调用`CMS_sign`创建一个`CMS_ContentInfo`
*   创建一个SignerInfo`CMS_add1_signer`
*   将属性添加到此签名者`CMS_signed_add1_attr_by_OBJ`
*   与`CMS_final()`

更多细节在这里：[http ://www.openssl.org/docs/crypto/CMS_sign.html](http://www.openssl.org/docs/crypto/CMS_sign.html)

# python - Python - 在哪里粘贴要导入的文件

> ID：13127295
> 
> 赞同：1
> 
> 时间：2012-10-29T18:09:58.760
> 
> 标签：python, import, importerror

首先让我告诉你，我是一个新用户，我刚开始在大学学习 Python，所以如果这个问题在其他主题中得到回答，我很抱歉，但我搜索了，我似乎找不到它。

我从老师那里收到了一个文件`work.pyc`，他说我必须使用命令将它导入我的 Wing IDE 中`from work import *`，问题是我不知道将文件放在哪里才能导入它。

它只是说`ImportError: No module named work`。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:11:50.647

有几种选择。最直接的方法是将它放在与要导入它的 py 文件相同的文件夹中。

您可能还想看看[这个](http://docs.python.org/2/tutorial/modules.html#compiled-python-files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:13:08.467

如果您正在处理`main.py`文件夹中调用的脚本`project`，则一种选择是将其放置在`project/work.pyc`

这将使模块可导入，因为它与您的代码位于同一工作目录中。

Python 解析 import 语句的方式是这样的（简化的）：

您正在使用的 Python 解释器（`/usr/bin/python2.6`例如，您的系统上可能有多个）有一个搜索路径列表，用于查找可导入的代码。这个列表在`sys.path`里面，你可以通过启动你的解释器并像这样打印出来来查看它：

```
>>> import sys
>>> from pprint import pprint
>>> pprint(sys.path) 
```

`sys.path`通常包含来自标准库的模块路径、附加安装的包（通常在站点包中）和可能的其他第 3 方模块。

当您执行类似的操作时`import foo`，Python 将首先查看在您的脚本所在的目录中是否有一个模块被调用`foo.py`。如果没有，它将搜索`sys.path`并尝试从那里导入它。

正如我所说，这个解释有点简化。详细信息在有关[模块搜索路径](http://docs.python.org/2/tutorial/modules.html#the-module-search-path)的部分中进行了说明。

**注 1：**`*.pyc`你得到的是 编译的[Python 字节码](http://docs.python.org/2/tutorial/modules.html#compiled-python-files)。这意味着它的内容是二进制的，它包含由 Python 虚拟机执行的指令，而不是`*.py`您通常处理的源代码。

**注2：** 你的老师给你的建议`from work import *`是相当糟糕的建议。在交互式解释器中出于测试目的这样做可能是可以的，但你不应该*在*实际代码中这样做。相反，你应该做类似的事情`from work import chop, hack`

主要原因：

*   **命名空间污染**。您可能会导入不需要的东西，但仍会污染您的全局命名空间。
*   **可读性**。如果您曾经阅读过别人的代码并想知道从哪里来`foo`，只需向上滚动并查看导入，您就会确切地看到它是从哪里导入的。如果那个人用过`import *`，你就不能那样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T18:15:13.130

如果您使用的是 python 解释器（让您直接将 python 代码输入其中并执行的解释器），您必须这样做：

```
sys.path.append('newpath')

from work import * 
```

其中**newpath**是文件系统上包含 work.pyc 文件的路径

# oop - 将不同情况的参数封装在一个对象中的缺点是什么？

> ID：13127296
> 
> 赞同：0
> 
> 时间：2012-10-29T18:10:05.487
> 
> 标签：oop, design-patterns, interface, polymorphism, encapsulation

我会给你一个关于寻路的例子。当你想找到一条路径时，你可以选择一个最终目的地，一个初始位置并找到两者之间最快的路径，或者你可以定义第一个位置，让算法显示你可以完成的每条路径，或者你可以想模拟这个进行测试，然后说出最终目的地并假设您“传送”到那里，依此类推。很明显，功能是一样的：寻找路径。但是参数可能因实现而异。我搜索了很多，找到了很多解决方案：摆脱接口，将所有参数作为实现中的字段，使用访问者模式......

但是我想从你们那里知道将每个可能的参数（而不是状态）放在一个对象中（我们称之为 MovePreferences）并让每个实现都获取它需要的东西的缺点是什么。当然，您可能需要另一个实现，它以您没想到的参数作为参数，您将需要更改 MovePreferences，但这听起来不错，因为您只会向其中添加方法，而不是重构任何现有方法。即使此 MovePreferences 不是我的域的对象，我仍然很想这样做。你怎么看？

（如果您对此问题有更好的解决方案，请随时将其添加到您的答案中。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:11:53.780

您要问的问题实际上是为什么根本没有接口，不，为什么没有任何上下文概念，而不是“我需要什么？” 我认为这个问题的答案非常简单：使用共享全局状态进行编程对您（程序员）来说很容易，并且一旦他们必须合并不同的功能、针对不同的客户、渲染增强等，很快就会变成其他所有人的漩涡。

现在，光谱的另一端是 DbC 论点：每个单独的接口都必须是一个高度约束的合约，它不仅将交换的知识保持在绝对最低限度，而且使混乱的可能性最小化。

坦率地说，这就是依赖注入会很快变成一团糟的原因之一：一旦出现这样的设计问题，人们就会开始注入更多的“对象”，通常只是为了访问一个属性，其范围可能不会与本次操作的范围相同。【不一样的噩梦。】

不幸的是，您的问题中几乎没有任何信息。我认为可以正确地模拟路线的概念吗？当然。这听起来不是很有挑战性。这里有一些想法：

创建一个名为 Route 的类，该类具有起点和终点。然后是遍历的集合。这里的想法是，路线可以完全忽略某人如何从 a 点到达 b 点的概念，其中遍历可能包含有关道路、交通、关闭等信息。然后你的模拟案例里面可能没有遍历。

另一种选择是使 Route 成为一个[Composite](http://en.wikipedia.org/wiki/Composite_pattern)，这样每次旅行都被视为各个部分的串连。这就是通常呈现路线的方式：在 2 South 行驶 2 英里，退出，在 Santa Monica Boulevard 向东行驶 3 英里，等等。在这种情况下，您可以只拥有没有子节点的 Routes。

最后，您可能需要创建模式。也许是[Builder](http://en.wikipedia.org/wiki/Builder_pattern)。这也简化了模拟事情，因为您可以只创建一个模拟构建器并让它构建包含您需要的任何内容的路由。

组合 Composite 和 Builder 的另一个优点是，您可以创建一个构建器，可以通过尝试仅改进令人不安的子段来从现有路由构建新 Route，例如，它获得的交通信息表明 2S 很慢，它可以替换那一段，并展示它的新路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T08:32:45.227

考虑一个例子，

假设 5 个参数被封装在一个对象中并传递给 3 个方法。

如果对象的结构发生变化，那么我们需要为所有 3 种方法运行测试用例。相反，如果该方法只接受它们需要的参数，则不需要对其进行测试。

我看到的唯一问题是**测试工作量的增加**

其次，如果您传递的参数多于方法实际需要的参数，您自然会违反单一职责原则 (SRP)。

# doctrine - Doctrine 2 - 如何使用 DQL 和分组进行搜索

> ID：13127298
> 
> 赞同：0
> 
> 时间：2012-10-29T18:10:09.900
> 
> 标签：doctrine, doctrine-orm, dql

我不知道如何**将我的 LIKE 搜索与按日期和 DQL 中的类别分组相结合**..

**解释：**

我有一个搜索功能，可以在体重后搜索我的事件。它看起来像这样：

```
SELECT e as event,
  (CASE
     (e.name LIKE :searchterm) THEN 10
      ELSE 0
   END) +
   (CASE
      WHEN (e.name LIKE :searchtermFull) THEN 5
      ELSE 0
    END)

 AS weight

FROM
  \Entities\Event e

WHERE
  e.name LIKE :searchterm OR
  e.name LIKE :searchtermFull

  ORDER BY weight DESC 
```

**这很好用，但现在我想让这些搜索结果按年份和日期（而不是时间）分组，所以我的项目分组如下**：

**1月27日：**

*   事件 1
*   事件 2

**1月28日：**

*   活动 3
*   活动 4

我还需要做的是把它归类到我的类别中，这样我最终将拥有：

**1月27日：**

*   第一类
    *   活动一
    *   活动 2
*   第 2 类
    *   活动 3

**我的数据库事件表：**

*   名称 varchar(255)
*   描述 varchar(255)
*   创建日期时间
*   place_id int(11)
*   事件日期日期时间
*   组织者ID int（11）
*   created_user_id int(11)
*   类别 int(11)

**我的数据库类别表**

*   id int(11)
*   名称 varchar(255)
*   描述 varchar(255)

我有一个事件实体和一个 EventCategory 实体，而 EventCategory 所做的只是将类别 ID 绑定到事件实体

--**更新 - 我的 sql 到目前为止**--

```
SELECT 
    c.name, 
    YEAR(e.eventdate) as year, 
    MONTH(e.eventdate) as month, 
    DAY(e.eventdate) as day, 
    count(*) as total 
FROM `events` as e, `eventCategories` as c 
WHERE
    e.category = c.id
GROUP BY 
    YEAR(e.eventdate),  
    MONTH(e.eventdate),
    DAY(e.eventdate)

ORDER BY eventdate ASC 
```

通过在自动加载器中写入以下内容来包含 DoctrineExtensions：

$classLoader = new Doctrine\Common\ClassLoader('DoctrineExtensions', ROOT.DS."library"); $classLoader->register();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-29T11:23:07.603

您无需编写自己的函数或安装第三方库。由于`datetime`存储为字符串，您可以使用[Doctrine 的函数](http://doctrine-orm.readthedocs.org/en/latest/reference/dql-doctrine-query-language.html#dql-functions) `SUBSTRING()`来提取某些部分并按其分组。

例如：

```
SELECT SUBSTRING(e.eventdate, 1, 4) AS year FROM … GROUP BY year; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:20:15.030

您需要使用日期函数 DAY、MONTH 或 YEAR（**Mysql**）Doctrine 不支持这些函数，因此您需要编写自己的（[DQL 函数](http://docs.doctrine-project.org/en/2.1/cookbook/dql-user-defined-functions.html)）或安装[此库](https://github.com/beberlei/DoctrineExtensions)

按年、月分组记录

```
WHERE ... GROUP BY YEAR(eventdate), MONTH(eventdate) ORDER BY eventdate ASC 
```

按年、月、日分组记录

```
WHERE ... GROUP BY YEAR(eventdate), MONTH(eventdate), DAY(eventdate) ORDER BY eventdate ASC 
```

# c# - 从 log4net 的配置文件中检索文件值

> ID：13127300
> 
> 赞同：0
> 
> 时间：2012-10-29T18:10:15.173
> 
> 标签：c#, logging, log4net, log4net-configuration

我陷入了一种情况，我认为我需要知道用户在 logging.xml 中指定的日志文件的名称。具体来说，我正在尝试检索元素中`value`属性的值`file`，如下所示（[取自 log4net 文档](http://logging.apache.org/log4net/release/config-examples.html#fileappender)）

> 有关完整的详细信息，请参阅 SDK 参考条目：log4net.Appender.FileAppender。
> 以下示例显示如何配置 FileAppender 以将消息写入文件。指定的文件是 log-file.txt。每次记录过程开始时，该文件将被附加而不是覆盖。

```
<appender name="FileAppender" type="log4net.Appender.FileAppender">
    <file value="log-file.txt" />
    <appendToFile value="true" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

当我使用以下代码遍历附加程序时：

```
log4net.Repository.ILoggerRepository repo = LogManager.GetRepository();
foreach (log4net.Appender.IAppender appender in repo.GetAppenders())
{
    FileAppender fa = appender as FileAppender;
} 
```

我无法在`fa`对象的任何地方找到值“log-file.txt”。也许我错过了它，因为调试器中暴露了很多成员和数据。

任何人都可以提出一种获得这个价值的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:21:56.887

`FileAppender`具有`File`包含将写入日志记录的文件的路径的属性。但在您开始寻找此属性之前，请验证`Name`appender - 您可以`FileAppenders`配置多个。

还要记住，`RollingFileAppender`也匹配条件`appender is FileAppender`，因为它是从`FileAppender`.

```
string file = repo.GetAppenders()
                  .OfType<FileAppender>()
                  .Where(fa => fa.Name == "FileAppender")
                  .Single()
                  .Name; 
```

# mysql - 选择当前时间距时间戳至少 60 分钟以上的 mysql 语句

> ID：13127301
> 
> 赞同：3
> 
> 时间：2012-10-29T18:10:14.987
> 
> 标签：mysql, select

我有一个带有名为 DATECREATED 的时间戳字段的数据库，我正在尝试运行一个 select 语句来检索当前时间距时间戳至少 60 分钟以上的所有记录

例如。

时间戳为 2012-10-29 12:08:11。

我只想从上面的时间戳记起 60 分钟后才检索记录。因此，如果时间是 13:09 或 15:09，则应该检索它。如果时间是 12:15，应该返回 0；

任何帮助将不胜感激，因为这里的其他答案到目前为止还没有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:11:37.217

```
select * from your_table
where DATECREATED - interval 60 minute <= now() 
```

看到[这个 SQLFiddle](http://sqlfiddle.com/#!2/d8f51/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T15:26:48.743

`CURRENT_TIMESTAMP - INTERVAL 60 MINUTE`返回 60 分钟前的时间。任何小于或等于该值的时间都应该最多 60 分钟。

```
SELECT *
FROM `table`
WHERE `datecreated` <= CURRENT_TIMESTAMP - INTERVAL 60 MINUTE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T01:00:58.273

```
...
where DATECREATED between subdate(timestamp, interval 60 minute) 
                      and adddate(timestamp, interval 60 minute) 
```

通过使用`between`带有两个常量值（每个查询计算一次）的类似这样的索引，`DATECREATED`将使用索引（如果存在）

# uml - 我可以在 UML 用例图中包含包含的内容吗？

> ID：13127304
> 
> 赞同：0
> 
> 时间：2012-10-29T18:10:23.390
> 
> 标签：uml, relationship, use-case

在[UML](http://en.wikipedia.org/wiki/Unified_Modeling_Language#Diagrams_overview)中，绘制[用例图](http://en.wikipedia.org/wiki/Use_case_diagram)的时候，可以包含已经包含的用例吗？（或者扩展已经扩展的用例？）

是否有意义？我有这样一种情况，我认为我可以在 A 中包含 B，在 B 中包含 C；其中 A、B、C 都是用例。

```
A ----------------> B ----------------> C
    <<include>>          <<include>> 
```

它在技术上有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:14:38.307

这取决于用例 A 是否直接从 C 调用，而不是在 B 的范围内。如果 C 直接使用 A，那么在 C 用例中绘制它并将 A 限定为包含是有意义的。否则你可以忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:18:29.997

从技术上讲，如果适合您的情况，可以执行您提到的操作。但请记住，通常使用“包含”从主要用例中抽象出有助于分析师避免重复的步骤序列。这意味着在您至少完成所有主要用例的第一个基本流程之后，它就会出现。主要目的是简化您的用例图，而不是使其复杂化。

# c# - onclick 第二次点击

> ID：13127307
> 
> 赞同：2
> 
> 时间：2012-10-29T18:10:51.490
> 
> 标签：c#, asp.net

asp.net 的新手，我在创建的网站上遇到问题，我正在使用母版页来构建我的页面。我正在尝试使用链接按钮中的 onclick 事件更改 li 标签的 css 类：

```
<asp:LinkButton runat="server" id="AboutButton" OnClick="about_click" PostBackUrl="about.aspx"><span>About</span></asp:LinkButton> 
```

此链接按钮调用母版页代码中的一个函数：

```
protected void about_click(object sender, EventArgs e)  
{  
    if(Page.IsPostBack)  
    {       
        about.Attributes.Add`enter code here`("class", "current");  
    }  
} 
```

这仅在加载页面并再次单击按钮时有效。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:18:17.750

通过添加：`if(Page.IsPostBack)`您明确告诉它在第一次加载页面时不要执行该代码，但您希望它在第一次加载页面时发生，通过问题的声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:29:31.070

你为什么加`if(Page.IsPostBack)`。尝试这个

```
protected void Page_Load(object sender, EventArgs e)  
{  
    if(!Page.IsPostBack)  
    {       
        about.Attributes.Add("class", "current"); //initial setting here 
    }  
}

protected void about_click(object sender, EventArgs e)  
{  
    about.Attributes.Add("class", "current");  
} 
```

# eclipse - JVM_SetNativeThreadName 无法位于动态链接库 jvm.dll 中

> ID：13127308
> 
> 赞同：2
> 
> 时间：2012-10-29T18:11:09.727
> 
> 标签：eclipse, jvm

我在启动 Eclipse 时开始出现此错误：

无法在动态链接库 jvm.dll 中找到过程入口点 JVM_SetNativeThreadName

我重新安装了 jre 并设置了类路径，然后重新安装了 eclipse 但无济于事。

请指导我解决此错误。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:29:37.987

看起来可能是这个[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7116189](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7116189)，在这种情况下我建议尝试 JVM 7u4 或更高版本（http://www.oracle.com/technetwork /java/javase/2col/7u4bugfixes-1579555.html）。

[跟进]

我在我自己的（不是 Eclipse 的）基于 Janel 项目的本机启动器中偶然发现了这个问题。我的特殊情况是由于卸载错误导致 jre/client/jvm.dll 落后。这个特定的 jvm.dll 没有 JVM_SetNativeThreadName，尽管 jre/server/jvm.dll 有。解决方案是删除旧的客户端目录并使用服务器 jvm.dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-10T14:41:00.393

对我来说，这很容易解决：

在我的“PATH”变量中只列出了 jre 而不是 jdk 路径。添加后它再次正常工作。

# c# - Abstract Class Call Generic Method with This - Won't Compile

> ID：13127315
> 
> 赞同：2
> 
> 时间：2012-10-29T18:11:36.603
> 
> 标签：c#, generics

I'm getting a compile-time error that my method call has some invalid arguments.

```
public abstract class EntityBase
{
    public virtual List<ValidationResult> Validate<T>()
    {
        // This line causes the error:
        var validationResults = this.ValidateEntity<T>(this, true).ToList();
    }

    protected IEnumerable<ValidationResult> ValidateEntity<T>(T entity, bool ignoreNullViolations)
    {
        // Code here
    }
} 
```

The class is abstract. That should be ok. I tried specifying the type of T in the method signature but that didn't help. Why won't this compile? I can't pass `this` to a method expecting a T parameter?

**EDIT** -- Possible solution:

```
public virtual List<ValidationResult> Validate<T>() where T : class
{
    var validationResults = this.ValidateEntity<T>(this as T, true).ToList();
} 
```

**EDIT 2**

Since T should only be a subclass, I think the class signature should change to be generic so that forces the subclass to set it. Then passing `this` wouldn't be such a hack.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:14:20.350

Your `ValidateEntity` method is declared such that the first parameter is of type `T`.

Now look how you're calling it:

```
var validationResults = this.ValidateEntity<T>(this, true).ToList(); 
```

You're trying to implicitly convert `this` to `T` - what makes you think that *should* work?

Suppose I called:

```
foo.Validate<string>(); 
```

That would try to pass `this` to a method effectively expecting a `string` - that's clearly not going to work, as `this` is a reference to an instance of some concrete subclass of `EntityBase` - *not* a reference to a string.

# java - 在android上捕获通知

> ID：13127319
> 
> 赞同：1
> 
> 时间：2012-10-29T18:11:40.447
> 
> 标签：java, android, notifications

我需要为android做一个简单的应用程序。

这个应用程序必须做这两件事：

*   捕捉任何传入的通知。

*   查看此通知的“目标应用程序”是什么。

目的是为每个通知点亮具有自定义颜色的灯。

示例：新 Facebook 通知 => 灯变蓝。新的 Gmail 通知 => 灯变红。

所以应用程序只需要查看是否有新的通知并且目标应用程序。

是否可以在手机上捕获任何应用程序的通知？还是android限制了这种可能性？

如果是的话，任何人都可以与我分享一个小片段吗？如果没有，任何人都可以建议我任何替代解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:40:51.270

这是一个*特点*。如果您可以捕获来自其他应用程序的通知，您可以想象绕过权限限制。

作为附加说明，我不确定彩色 LED 是否是 CDD 的一部分，因此并非所有用户都可以使用该功能。

# php - 显示带有 URL 参数的特定 SimpleXML 记录

> ID：13127324
> 
> 赞同：1
> 
> 时间：2012-10-29T18:11:49.527
> 
> 标签：php, html, simplexml

我有一个非常简单的 XML 文件，我想根据 URL 参数对其进行解析。到目前为止，我正在使用 PHP 获取 ID 参数，`$projid = $_GET["id"];`但是以一种有意义的方式使用它来仅显示具有该 ID 的特定匹配 XML 记录让我望而却步。

这是我的示例 XML 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<projects>
<project id="1">
    <id>1</id>
    <name>First project</name>
    <description>This is the description of the project</description>
</project>
<project id="2">
    <id>2</id>
    <name>Second project</name>
    <description>This is the description of the project</description>
</project>
</projects> 
```

到目前为止，我不确定我是否可以使用属性 id 或实际的子`<id></id>`字段访问特定的项目记录。我对任何一个都持开放态度，以最简单和更清洁的为准。

简而言之：通过访问 url.com/projects.php?id=1，页面将显示 XML 文件中项目 1 的内容。任何帮助都会很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:29:49.813

一个简单的 XPath 查询就可以完成这项工作：

```
$id = $_GET["id"];

$xmldoc = new DOMDocument();
$xmldoc->load('yourfile.xml');

$xpath = new Domxpath($xmldoc);
$queryResult = $xpath->query('//projects/project[@id = "$id"]');

foreach($queryResult as $result){
    echo $result->textContent;
} 
```

# sql - 在 where 子句中使用 Cast() 函数 - T-SQL

> ID：13127326
> 
> 赞同：2
> 
> 时间：2012-10-29T18:11:57.793
> 
> 标签：sql, tsql, casting, decimal

我正在尝试在查询的 where 子句中使用 CAST() 函数。基本上，我在 TableA 中有一个 FieldA，类型为 Decimal(10,0)，在 TableB 中有一个 FieldB，类型为 CHAR，我想在字段 A 和 B 相同的条件下加入这两个表。

我试过一个简单的

```
select FieldA , FieldB from tableA left join tableB 
on cast(FieldB as decimal(10,0))= FieldA 
```

但它返回一个错误

> CAST 子句中不允许的字符

编辑这是一个糟糕的法语翻译，正确的翻译似乎是

> 强制转换规范的无效字符值

（谢谢亚历克斯 K）

然后我尝试做类似的事情

```
select tableA.fieldA, tableC.fieldC
from tableA left join
(select cast(fieldB as decimal(10,0)) fieldC from tableB)
as tableC on fieldC=fieldA 
```

但是我返回了同样的错误

我真的不是 SQL 专家，基本上只是在这里和那里使用一些 SELECT，试图四处寻找类似的问题，但找不到与我的问题相匹配的答案。

有人有想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:08:10.187

好的，感谢评论，我知道我尝试将其转换为十进制的某些字段不是数字的——我只是将十进制字段转换为字符，这是可行的。

谢谢你的帮助

# c# - 树视图（剑道 UI）与 MVC4 中同一页面上的 TextBox 最佳实践？

> ID：13127329
> 
> 赞同：0
> 
> 时间：2012-10-29T18:12:13.967
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, telerik-mvc, kendo-ui

假设我有一个 Kendo 树视图绑定到远程数据源的视图。

```
@(Html.Kendo().TreeView()
    .Name("schemas")
    .DataTextField("name")
    .DataSource(dataSource => dataSource.Read(read => read.Action("Schemas", "Forms")))
    .Events(events => events
    .Select("onSelected"))) 
```

所以树视图只是调用`Schemas`我的动作`FormsController`

同样在同一页面上，我有一个表单，它只是文本框和一个提交表单的按钮

```
@using (Html.BeginForm("Load", "Forms", FormMethod.Post))
{   
    <div id="rootNode">
        @Html.TextBox("rootElementName")            
        @Html.Button("next")
    </div>
} 
```

所以我只是想知道处理用户输入并将其传递给`Load`操作的最佳方法是`FormsController`什么？用户应该选择树视图中的选项之一并将值输入到文本框中。或者我应该为我的视图创建某种视图模型，其中包含我的所有节点+文本框输入和选定节点的两个附加字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:00:47.403

我会取出表单元素，留下：

```
<div id="rootNode">
    @Html.TextBox("rootElementName")            
    @Html.Button("next")
</div> 
```

以下js，这将在选择时获取树项ID。第二个函数将使用参数调用您的表单控制器操作。

```
<script>
    var selectedNodeid;

    //get the tree selected item id
    function onSelected(e) {
        var data = $('#schemas).data('kendoTreeView').dataItem(e.node);
        selectedNodeid = data.id;
    }

    //button on click event
    $(document).ready(function () {
        $("#next")
        .bind("click", function () {  
           //get parameters then pa
           var id = selectedNodeid;
           var rootElementName = $('#rootElementName).val()
           $.ajax({ 
             url: "Form/Load", 
             data:{id:id,rootElementName:rootElementName},
             success: function () { } 
           });
        }
     })
</script> 
```

我还没有测试过这个，但它应该很接近。我期待有人添加更好的方法。

# mysql - 我们可以为auto_increment字段设置一个限制吗，Mysql

> ID：13127330
> 
> 赞同：0
> 
> 时间：2012-10-29T18:12:16.307
> 
> 标签：mysql

> **可能重复：**
> [MYSQL auto_increment_increment](https://stackoverflow.com/questions/11308438/mysql-auto-increment-increment)

我有一个字段**id、name**的表。其中**id**是自动递增字段。

我需要为 id 字段设置一个上限，（例如 100）。这可能吗？

另一个问题

目前 auto_increment 会将当前值加 1，我们可以将其更改为 2，

例如 1,3,5,7,9,11...

# apache-flex - Flex 缓动效果中的 easeOutExpo 等价物是什么？

> ID：13127333
> 
> 赞同：0
> 
> 时间：2012-10-29T18:12:26.907
> 
> 标签：apache-flex, air, flex4, flex-spark

在 Tweener 中有一个“easeOutExpo”类型的转换。Flex 缓动类中的等价物是什么 - 在此处列出 [1]？

**更多背景**：

这是 Tweener 代码：

```
Tweener.addTween(container, {width:w, height:h, time:0.25, transition:"easeOutExpo"}); 
```

这是我想要有 easeOutExpo 过渡类型的实例：

```
 <s:Scale 
                 scaleYFrom=".5" 
                  scaleYTo="1"
                  scaleXFrom=".5"
                  scaleXTo="1"
                  duration="250"
                  autoCenterTransform="true"
                  applyChangesPostLayout="true"
                  /> 
```

[1] [http://help.adobe.com/en_US/flex/using/WS91E85D63-A025-4c46-B758-A275D4D3B3FC.html](http://help.adobe.com/en_US/flex/using/WS91E85D63-A025-4c46-B758-A275D4D3B3FC.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:36:48.907

那将是[`Power`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/effects/easing/Power.html)宽松，[`easeInFraction`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/effects/easing/EaseInOutBase.html#easeInFraction)设置为`0`。如果您想匹配 Tweener 使用的算法，您需要通过反复试验找出正确的指数。

```
<fx:Declarations>
    <s:Power
        id='expoEaseOutEquivalent'
        easeInFraction='0'
        exponent='8' />

    <s:Scale
        easer='{expoEaseOutEquivalent}'
        scaleYFrom='.5' 
        scaleYTo='1'
        scaleXFrom='.5'
        scaleXTo='1'
        duration='250'
        autoCenterTransform='true'
        applyChangesPostLayout='true' />
</fx:Declarations> 
```

# php - 在 CakePHP 中路由到虚 url

> ID：13127337
> 
> 赞同：1
> 
> 时间：2012-10-29T18:12:33.813
> 
> 标签：php, cakephp, routing, routes, cakephp-2.1

我想知道是否有一种简单的最佳实践方法可以在 CakePHP（routes.php 文件）中创建路由以将用户 ID 映射到虚 url？

我的路线页面中有（可怕的方法）以下测试代码：

```
$users = array
(
    1 => 'firstname-lastname',
    2 => 'firstname2-lastname2'
);   

//profiles
foreach($users as $k => $v)
{
    // LESSONS (Profiles)
    Router::connect('/:user', array('controller' => 'teachers', 'action' => 'contentProfile', $k),
        array('user' => '(?i:'.$v.')'));
} 
```

上面的代码使用 conProfile 路由我的教师控制器作为来自以下的操作：

```
mydomain.com/teachers/contentProfile/1
to
mydomain.com/firstname-lastname 
```

我可以从路由页面连接到数据库吗？就性能而言，这不是一个好主意吗？让我知道最好的方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:40:41.570

您可以创建一个自定义路由类，它将在数据库中查找传递的 url 并将它们转换为正确的用户 ID。设置较长的缓存时间应该可以减轻命中数据库的任何性能影响。

[然而，这本书的文档](http://book.cakephp.org/2.0/en/development/routing.html#custom-route-classes)有点薄，但基本结构是这样的：

```
class TeachersRoute extends CakeRoute {

  /**
   * Modify incoming parameters so that controller receives the correct data
   */
  function parse($url) {
    $params = parent::parse($url);

    // Add / modify parameter information

    // The teacher id should be sent as the first value in the $params['pass'] array

    return $params;
    // Or return false if lookup failed
  }

  /**
   * Modify parameters so calls like HtmlHelper::url() output the correct value
   */
  function match($url) {
    // modify parameters

    // add $url['slug'] if only id provided

    return parent::match($url);
  } 
```

然后在您的路线中：

```
Router::connect(
  '/:slug', 
  array(
    'controller' => 'teachers', 
    'action' => 'contentProfile'
  ), 
  array(
    'slug' => '[a-zA-Z0-9_-]+'
    'routeClass' => 'TeachersRoute',
  )
); 
```

# android - android 4.1.1 自定义通知中的选框问题

> ID：13127341
> 
> 赞同：1
> 
> 时间：2012-10-29T18:12:54.767
> 
> 标签：android, android-layout, android-notifications, android-notification-bar

嗨，我的应用程序中有我的自定义通知，在 android 2.2 2.3 4.0 中完美运行，但在 4.1.1 jelly bean 中我试过但我无法在我的自定义通知中使用选框，这是我的代码 .xml：

```
<TextView
                    android:id="@+id/notification_title"
        style="@style/NotificationTitle"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:gravity="bottom"
            android:marqueeRepeatLimit="marquee_forever"
            android:scrollHorizontally="false"
            android:singleLine="true"
            android:textSize="20sp"
            android:textStyle="bold" >

            <requestFocus />
        </TextView>

        <TextView
                   android:id="@+id/notification_text"
        style="@style/NotificationText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/notification_title"
            android:layout_marginTop="3dp"
            android:textSize="15sp" >
        </TextView> 
```

我的通知代码：

```
 int NOTIFICATION_ID = 1;
            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
            int icon = R.drawable.notificacion;
            long when = System.currentTimeMillis();
            CharSequence tickerText = "Reproduciendo...";

            Notification notification = new Notification(icon, tickerText,
                    when);

            RemoteViews contentView = new RemoteViews(getPackageName(), R.layout.notification);
            contentView.setTextViewText(R.id.notification_title, txtMetaTitle.getText().toString());
            contentView.setTextViewText(R.id.notification_text, txtMetaUrl.getText().toString());
            notification.contentView = contentView;
            Intent notificationIntent = new Intent(AACPlayerActivity.this, Principal.class);
            PendingIntent contentIntent = PendingIntent.getActivity(AACPlayerActivity.this, 0, notificationIntent, 0);
            notification.contentIntent = contentIntent;
            notification.flags |= Notification.FLAG_ONGOING_EVENT;
            mNotificationManager.notify(NOTIFICATION_ID, notification);
        } 
```

我的应用程序运行良好，但字幕不启动不知道为什么在 4.1.1 中？我能做些什么来解决这个问题？

非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:38:20.023

请注意：`Notification`不推荐使用在其中构建通知，而赞成使用`Builder`子类。此外，为了获得跨平台的兼容性，您应该考虑使用`android.support.v4.app.NotificationCompat`. 您应该可以使用相同的`RemoteViews`；尝试切换到新的方式，看看会发生什么。

# .htaccess - Kohana 重写 .htaccess 中的 url 显示文件未找到消息

> ID：13127345
> 
> 赞同：1
> 
> 时间：2012-10-29T18:13:22.267
> 
> 标签：.htaccess, url-rewriting, kohana, kohana-3, kohana-3.2

我正在使用 Kohana 3.2 框架，我已将标准 .htaccess 文件放在应用程序的同一文件夹中。

我的 .htaccess 文件是

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /mysite/

# Protect hidden files from being viewed
<Files .*>
        Order Deny,Allow
        Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule ^(.*)$ /index.php/$0 [PT] 
```

我尝试将 las 线更改为

```
RewriteRule ^(.*)$ /index.php/$0
RewriteRule ^(.*)$ /index.php/$0 [PT,L]
RewriteRule ^(.*)$ /index.php/$0 [PT,L,QSA]
RewriteRule .* /index.php/$0 [PT]  -  [PT,L]  -  [PT,L,QSA] 
```

但它仍然显示

> 未找到
> 
> 在此服务器上找不到请求的 URL /index.php/login。

```
The complete path of the app is /var/www/es/ec/mysite

The complete working URL is http://10.0.0.1/ec/mysite/index.php/login

The complete NOT working URL is http://10.0.0.1/ec/mysite/login 
```

还...

```
Running in Apache 2.2.3 over CentOS 5 
```

任何想法？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:49:16.003

# 我知道了！！

当应用程序位于其他文件夹中时，这是如何完成的。

```
The complete path of the app is /var/www/es/ec/mysite

The complete working URL is http://10.0.0.1/ec/mysite/index.php/login

The complete NOT working URL was http://10.0.0.1/ec/mysite/login 
```

在 /var/www/es/ec/mysite/application/bootstrap.php 中 Kohana::init 保持这样

```
Kohana::init(array(
    'base_url'   => '/ec/mysite/',
    'index_file'   => FALSE,
    'charset' => 'ISO-8859-1',
)); 
```

像这样的 .htaccess

```
# Turn on URL rewriting
RewriteEngine On

# Installation directory
RewriteBase /

# Protect hidden files from being viewed
<Files .*>
    Order Deny,Allow
    Deny From All
</Files>

# Protect application and system files from being viewed
RewriteRule ^(?:application|modules|system)\b.* index.php/$0 [L]

# Allow any files or directories that exist to be displayed directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Rewrite all other URLs to index.php/URL
RewriteRule .* /ec/mysite/index.php/$0 
```

# 希望这对其他人有帮助！

# 干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:15:58.220

你可以试试我的 Kohana .htaccess 文件

```
# Set environment
SetEnv KOHANA_ENV "development"

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

我也使用 Kohana 3.2。这种重写往往适用于我的大多数项目。

让我知道它是如何工作的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T19:37:42.957

在 Kohana::init 内的 bootstrap.php 中设置 'index_file' => ''，

# c++ - 如何使用 alglib rmatrixinverse 获得逆矩阵

> ID：13127346
> 
> 赞同：2
> 
> 时间：2012-10-29T18:13:26.060
> 
> 标签：c++

我想问一个关于 alglib 的 rmatrixinverse() 的简单问题。我有一个名为 2D 双数组`M (matrix n*n)`，我想得到一个名为 的逆矩阵`invM`。对于这种情况，我使用 rmatrixinverse()，但结果是错误的。我也尝试了一些来自 alglib 的其他逆矩阵求解器，但在我看来，`rmatrixinverse()`它最适合，因为数据充满了双精度数。

如果有人遇到过这个问题并且有任何想法，我将非常感激。

```
alglib::real_2d_array invMalglib;
alglib::ae_int_t info;
alglib::matinvreport rep;
invMalglib.setlength(matrix_degree,matrix_degree);
for(int i = 0; i < matrix_degree; i++)
    for(int j = 0; j < matrix_degree; j++)
        invMalglib[i][j] = M[i][j];

vector_from_matrix_and_vector(F, X, FtX, small_length, matrix_degree);
alglib::rmatrixinverse(invMalglib, info, rep);
for(int i = 0; i < matrix_degree; i++)
    for(int j = 0; j < matrix_degree; j++)
        invM[i][j] = invMalglib[i][j]; 
```

# doctrine-orm - Doctrine 2.2 从关联中获取最大实体

> ID：13127349
> 
> 赞同：0
> 
> 时间：2012-10-29T18:13:57.293
> 
> 标签：doctrine-orm, subquery

我正在编写一个类似于论坛的小型应用程序（在 Symfony2 中），我遇到了以下问题：

我有两个实体：

```
class ForumThread {
  public $fourmThreadId;
  public $title;
  public $posts; // aggregation field -> ArrayCollection of ForumPost (can't be empty)
}

class ForumPost {
  public $content;
  public $timeCreated;
  public $thread; // aggregation field -> ForumThread (can't be null)
} 
```

我现在想获取所有论坛主题，包括每个主题的最新帖子。我想将它用于论坛概述：

```
-------------------------------------
| Thread                | Last Post |
-------------------------------------
| Name of Thread #1     |    ###    |
| Name of Thread #2     |    ###    |
| ...                   |    ...    |
------------------------------------- 
```

我想获取完整的`ForumPost`实体，而不仅仅是单个字段（如时间戳）。

它也应该是高性能的：理想情况下在 1-2 个查询中（我在使用 INNER JOIN 的原始 SQL 中找到了一些东西，但我想要在 DQL 中或理想情况下使用 QueryBuilder - 我尝试从 SQL 到 DQL 的翻译没有成功）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:06:47.140

好的，我找到了一个可行的解决方案，但不是最好的方法：

```
$where = "fp.timeCreated = (SELECT MAX(fpi.timeCreated) FROM ApfelboxGuildBundle:ForumPost fpi WHERE fpi.thread = ft)";

$query = $this->getRepository()->createQueryBuilder("ft")
        ->select("ft, fp")
        ->join("ft.posts", "fp")
        ->groupBy("ft.forumThreadId")
        ->addOrderBy("ft.isSticky", "desc")
        ->addOrderBy("fp.timeCreated", "desc")
        ->addOrderBy("ft.forumThreadId", "desc")
        ->setFirstResult($offset)
        ->setMaxResults(self::THREADS_PER_PAGE); 
```

注意`WHERE`子句中的子查询。这可行，但有一个缺陷：它使用时间戳字段连接（以防止额外的嵌套子查询 - 在 DQL 中总是会产生解析错误），即使对于给定的线程，它也可能不是唯一的。

# openssl - 如何检查 SSL/TLS 证书的主题备用名称？

> ID：13127352
> 
> 赞同：78
> 
> 时间：2012-10-29T18:14:20.040
> 
> 标签：openssl, certificate, ssl

有没有办法以编程方式检查 SAN SSL 证书的主题备用名称？

例如，使用以下命令我可以获得很多信息，但不是所有的 SAN：

```
openssl s_client -connect www.website.com:443 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-10-29T20:11:52.170

要获取证书的主题备用名称 (SAN)，请使用以下命令：

```
openssl s_client -connect website.com:443 </dev/null 2>/dev/null | openssl x509 -noout -text | grep DNS: 
```

* * *

首先，这个命令连接到我们想要的站点（website.com，端口 443 用于 SSL）：

`openssl s_client -connect website.com:443`

然后通过管道 ( `|`) 将其输入此命令：

`openssl x509 -noout -text`

这将获取证书文件并输出其所有详细信息。该`-noout`标志阻止它输出我们不需要的（base64 编码的）证书文件本身。该`-text`标志告诉它以文本形式输出证书详细信息。

通常有很多我们不关心的输出（签名、颁发者、扩展等），所以我们将其通过管道*传输*到一个简单的 grep 中：

`grep DNS:`

由于 SAN 条目以 this 开头，`DNS:`因此只返回包含该条目的行，剥离所有其他信息并为我们留下所需的信息。

您可能会注意到该命令没有干净地退出；`openssl s_client`实际上充当客户端并使连接保持打开状态，等待输入。如果您希望它立即退出（例如，在 shell 脚本中解析输出），只需通过管道`echo`输入：

```
echo | openssl s_client -connect website.com:443 | openssl x509 -noout -text | grep DNS: 
```

### 如何直接从文件中获取 SAN？

为此，您不需要该`openssl s_client`命令。只需添加命令并再次通过 grep 管道，例如`-in MyCertificate.crt`：`openssl x509`

```
openssl x509 -noout -text -in MyCertificate.crt | grep DNS: 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-18T09:56:55.483

如果您只想*查看*SAN，这`grep DNS:`是显而易见的解决方案。

如果你想有一个更清晰的列表来进一步处理，你可以使用这个 Perl 正则表达式来提取名称：`@names=/\sDNS:([^\s,]+)/g`

例如：

```
true | openssl s_client -connect example.com:443 2>/dev/null \
| openssl x509 -noout -text \
| perl -l -0777 -ne '@names=/\bDNS:([^\s,]+)/g; print join("\n", sort @names);' 
```

这将输出：

```
example.com
example.edu
example.net
example.org
www.example.com
www.example.edu
www.example.net
www.example.org 
```

因此，您可以将其通过管道传输到`while read name; do echo "do stuff with $name"; done`等。

或者对于一行上的逗号分隔列表，替换`join("\n",`为`join(",",`

（`-0777`perl 的开关使它一次读取整个输入，而不是逐行读取）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-06T12:39:18.397

也可以使用捆绑的 openssl 功能：

```
openssl s_client -connect website.com:443 </dev/null | openssl x509 -noout -ext subjectAltName 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-27T04:12:12.850

> 有没有办法以编程方式检查 SAN SSL 证书的备用名称？

X509 证书中可能有多个 SAN。以下内容来自[SSL/TLS 客户端](https://wiki.openssl.org/index.php/SSL/TLS_Client)的 OpenSSL wiki 。它遍历名称并打印它们。

您可以从 TLS 连接、内存或文件系统`X509*`等函数中获取。`SSL_get_peer_certificate``d2i_X509``PEM_read_bio_X509`

```
void print_san_name(const char* label, X509* const cert)
{
    int success = 0;
    GENERAL_NAMES* names = NULL;
    unsigned char* utf8 = NULL;

    do
    {
        if(!cert) break; /* failed */

        names = X509_get_ext_d2i(cert, NID_subject_alt_name, 0, 0 );
        if(!names) break;

        int i = 0, count = sk_GENERAL_NAME_num(names);
        if(!count) break; /* failed */

        for( i = 0; i < count; ++i )
        {
            GENERAL_NAME* entry = sk_GENERAL_NAME_value(names, i);
            if(!entry) continue;

            if(GEN_DNS == entry->type)
            {
                int len1 = 0, len2 = -1;

                len1 = ASN1_STRING_to_UTF8(&utf8, entry->d.dNSName);
                if(utf8) {
                    len2 = (int)strlen((const char*)utf8);
                }

                if(len1 != len2) {
                    fprintf(stderr, "  Strlen and ASN1_STRING size do not match (embedded null?): %d vs %d\n", len2, len1);
                }

                /* If there's a problem with string lengths, then     */
                /* we skip the candidate and move on to the next.     */
                /* Another policy would be to fails since it probably */
                /* indicates the client is under attack.              */
                if(utf8 && len1 && len2 && (len1 == len2)) {
                    fprintf(stdout, "  %s: %s\n", label, utf8);
                    success = 1;
                }

                if(utf8) {
                    OPENSSL_free(utf8), utf8 = NULL;
                }
            }
            else
            {
                fprintf(stderr, "  Unknown GENERAL_NAME type: %d\n", entry->type);
            }
        }

    } while (0);

    if(names)
        GENERAL_NAMES_free(names);

    if(utf8)
        OPENSSL_free(utf8);

    if(!success)
        fprintf(stdout, "  %s: <not available>\n", label);

} 
```

# python - Django中的if语句

> ID：13127353
> 
> 赞同：0
> 
> 时间：2012-10-29T18:14:20.470
> 
> 标签：python, django, if-statement

我正在我的电脑上使用 django 进行测试，如果我在没有 else 的情况下运行代码，则 if 语句为真并且 r1 变量是正确的。

```
def trovapernome(request, aggregatore, nome):
    url = urllib.urlopen("http://127.0.0.1:8000/media/%s.xml" % (aggregatore))
    richiesta = url.read()
    tree = ET.fromstring(richiesta)
    iterator = tree.getiterator("location")
    t = get_template('prova.xml')           
    for name in tree.iter('name'):
        if name.text.lower() == nome.lower():
            c = Context({'id' : name.text})
            r1 = HttpResponse(t.render(c), mimetype='application/xml')
            return r1 
```

否则这段代码：

```
def trovapernome(request, aggregatore, nome):
    url = urllib.urlopen("http://127.0.0.1:8000/media/%s.xml" % (aggregatore))
    richiesta = url.read()
    tree = ET.fromstring(richiesta)
    iterator = tree.getiterator("location")
    t = get_template('prova.xml')           
    for name in tree.iter('name'):
        if name.text.lower() == nome.lower():
            c = Context({'id' : name.text})
            r1 = HttpResponse(t.render(c), mimetype='application/xml')
        else:  r1 = HttpResponse(t.render(Context({'id' : 'prova'})), mimetype='application/xml')
    return r1 
```

总是返回 else 语句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:16:54.783

您正在遍历树中的多个元素。在您的第一个版本中，您在处理第一个元素时立即返回。在第二个版本中，您只有在处理完树中的*所有*元素后才返回。

从循环内返回或确定需要对多个匹配项执行什么操作：

```
for name in tree.iter('name'):
    if name.text.lower() == nome.lower():
        c = Context({'id' : name.text})
        r1 = HttpResponse(t.render(c), mimetype='application/xml')
    else:  r1 = HttpResponse(t.render(Context({'id' : 'prova'})), mimetype='application/xml')
    return r1  # return the *first* match. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:18:13.753

您没有在第一个代码块中循环，因为`return`没有正确缩进。

```
for name in tree.iter('name'):
    if name.text.lower() == nome.lower():
        c = Context({'id' : name.text})
        r1 = HttpResponse(t.render(c), mimetype='application/xml')
        return r1
 # move return indentation to match here, i.e after the for loop completes 
```

查看`return`使用时如何在第二个块中匹配`else`

```
for name in tree.iter('name'):
    if name.text.lower() == nome.lower():
        c = Context({'id' : name.text})
        r1 = HttpResponse(t.render(c), mimetype='application/xml')
    else:  r1 = HttpResponse(t.render(Context({'id' : 'prova'})), mimetype='application/xml')
return r1 
```

# clojure - Clojure 使用带有 map 的匿名函数的问题

> ID：13127355
> 
> 赞同：1
> 
> 时间：2012-10-29T18:14:27.967
> 
> 标签：clojure

我是 clojure 的新手，并且正在通过从 Practical Common Lisp 重新创建 cd 项目来学习。我在使用 where 'clause' 选择器实现更新功能时遇到了麻烦。执行 (update (where :artist "AC/DC") :rating 10) 导致我的数据库被炸毁，只返回一个空列表。这是我的代码：

```
(defn where [& {:keys [title artist genre rating]}]
(fn [cd]
    (and
        (if title (= (get cd :title) title) true)
        (if artist (= (get cd :artist) artist) true)
        (if genre (= (get cd :genre) genre) true)
        (if rating (= (get cd :rating) rating) true))))

(defn update [selector-fn & {:keys [title artist genre rating]}]
    (def ^:dynamic *db*
        (map (fn [row]
            (when (apply selector-fn row)
                    (if title (def row (assoc-in row [:title] title)))
                    (if artist (def row (assoc-in row [:artist] artist)))
                    (if genre (def row (assoc-in row [:genre] genre)))
                    (if rating (def row (assoc-in row [:rating] rating))))
            row)
        *db*))) 
```

我已将每张 CD 实现为哈希映射：

```
(defn make-cd [title artist genre rating]
{:title title
:artist artist
:genre genre
:rating rating
}) 
```

所以我认为我对 assoc-in 的使用是正确的。任何关于我做错了什么的想法将不胜感激。

谢谢...

美中

好的。根据 Arthur 的评论，我现在拥有的更新功能是：

```
(defn update [selector-fn & {:keys [title artist genre rating]}]
        (map (fn [row]
            (when (apply selector-fn row)
                (-> row
                    (#(if title (assoc-in % [:title] title) %))
                    (#(if artist (assoc-in % [:artist] artist) %))
                    (#(if genre (assoc-in % [:genre] genre) %))
                    (#(if rating (assoc-in % [:rating] rating) %)))))
        *db*)) 
```

我想我仍然需要`map`表单，因为我需要遍历`*db*`. 我不想只更改`*db*`艺术家为 AC/DC 的所有 CD 的评级。so`map`将遍历每个 cd （将其绑定到`row`），然后调用该`where`函数以查看标题是否匹配。如果是这样，那么它将返回 true 以允许更新评级。

不幸的是，这仍然不起作用。

```
ArityException Wrong number of args (4) passed to: core$where$fn  clojure.lang.AFn.throwArity (AFn.java:437) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:44:18.180

在函数中使用`def`很少有预期的结果（并且不是线程安全的）。因为每个操作都需要一个映射，对其进行更改并返回已更改的映射，因此您可以将每个操作线程化到下一个操作中，以便最后一个的返回值是所有更改的效果。这种模式在 Clojure 中非常常见，以至于有一个两个字符的宏可以非常方便地做到这一点：

```
user> (-> {:a {:k 1} :b {:k 2} :c {:k 3}} 
          (assoc-in [:a :k] 8) 
          (assoc-in [:b :k] 9))
{:a {:k 8}, :c {:k 3}, :b {:k 9}} 
```

“线程优先”maco`->`只是将每个表达式作为第一个参数插入到下一个。所以上面的表达式（带有一些艺术许可）扩展为：

```
(assoc-in (assoc-in {:a {:k 1} :b {:k 2} :c {:k 3}} [:a :k] 8) [:b :k] 9)) 
```

在您的上下文中，这可能看起来像这样：

```
(-> row
    (#(if title (assoc-in % [:title] title) %))
    (#(if artist (assoc-in % [:artist] artist) %))
    (#(if genre (assoc-in % [:genre] genre) %))
    (#(if rating (assoc-in % [:rating] rating) %))) 
```

每行创建一个函数，该函数要么返回其参数的更改版本，要么原样返回，然后调用它。参数将`row`插入到行尾的两个括号之间。如果这在视觉上不吸引人，您可以为函数命名`defn`并仅列出`->`调用中的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:40:09.247

在我看来，您正试图在更新函数中改变行，但您真正要做的是在每一步中重新定义它。

但是您的`map`函数没有返回新行。

我会`reduce`在指定时更改行本身的属性。

# asp.net - 应用风格 CSS3/JQM 酒吧

> ID：13127358
> 
> 赞同：0
> 
> 时间：2012-10-29T18:14:40.493
> 
> 标签：asp.net, css, web-applications, jquery-mobile

在过去的几天里，我一直在思考并尝试为我正在开发的 Web 平台的移动版本创建一个可扩展且干净的代码。

我正在尝试实现（最好使用 CSS3，但我并不反对 JQuery Mobile）iOS 风格的应用程序页脚栏，其图标/图像在移动设备（横向/纵向）和桌面上查看时可以正确缩放。

如果您从未见过应用程序栏，这里有一个链接：[http ://tinyurl.com/98ftqrr](http://tinyurl.com/98ftqrr)

我拼凑了一张我想要在移动平台上实现的快速图片（为我的 MSPaint 技能道歉）：

[http://imageshack.us/photo/my-images/854/mo​​bilei.png/](http://imageshack.us/photo/my-images/854/mobilei.png/)

应用栏上的磁贴内的方块代表图标（目前有 3-4 个的计划）

这是我从桌面/平板电脑的上下文中绘制的图像

[http://imageshack.us/photo/my-images/594/desktopog.png/](http://imageshack.us/photo/my-images/594/desktopog.png/)

现在，我知道向页脚添加一些样式相当容易，但这不是我似乎无法解决的问题。首先，让栏中的导航图标在所有分辨率下看起来都很清晰是一个挑战（主要是因为我似乎无法弄清楚如何正确地做到这一点）；此外，获得*确切的*iOS 外观 - 被证明是困难的。

任何人愿意为此提供的任何帮助都将不胜感激，我理解这个问题可能看起来有点基本和抽象。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:23:06.383

For an CSS cross devices iOS-style navbar (bottom only), use my [bartender CSS plugin](https://github.com/frequent/bartender).

To make this a sidebar, you will have to be creative... I gave it a few tries, but this is not easy just considering positioning of this element (there's much more). Your best chance might be the [popup sidepanel](http://jquerymobile.com/test/docs/pages/popup/popup-panels.html#&ui-state=dialog), which you'd have to config to hold the toolbar.

# regex - 1-15的正则表达式？

> ID：13127359
> 
> 赞同：1
> 
> 时间：2012-10-29T18:14:43.577
> 
> 标签：regex

我很难为 0-15 的数字输入组合一个正则表达式。

我试过这个表达：

```
^([9]{1,1}|[0-1][0-5])$   

<asp:FilteredTextBoxExtender ID="TMPFiltered" runat="server" FilterMode="ValidChars"
                                                FilterType="Custom" ValidChars^([9]{1,1}|[0-1][0-5])$" TargetControlID="txtTMP" /> 
```

但是它允许大于 15 的最大值。我的语法在哪里不正确？任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:24:27.127

尝试这个：

```
^([0]?[1-9]|1[0-5])$ 
```

或者如果你不想像“07”那样匹配，试试这个

```
^([1-9]|1[0-5])$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:16:22.443

正则表达式不是正确的解决方案，您应该尝试将字符串转换为 int，如果成功，请确保结果在您想要的范围内。

话虽这么说，这是一个应该起作用的正则表达式：

```
^(1[0-5]?|[2-9])$ 
```

当前正则表达式的主要问题是锚点仅应用于交替的左侧，因此您将匹配匹配`[0-1][0-5]`正则表达式中任何位置的字符串。您当前的正则表达式中也没有任何方法可以匹配从 2 到 8 的数字。

示例：[http ://www.rubular.com/r/HUNZZymzFW](http://www.rubular.com/r/HUNZZymzFW)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T18:23:50.683

你快到了

`^([1-9]|1[0-5])$`是你需要的

我在您的正则表达式`[9]{1,1}`中所做的唯一更改为`[1-9]`..不需要，`{1,1}`因为它已经匹配了 1 次`[9]`

# wordpress - Foreach 循环仅在 wordpress 循环内有效，但会回显 6 次。我可以在循环外使用它吗？

> ID：13127369
> 
> 赞同：2
> 
> 时间：2012-10-29T18:15:45.337
> 
> 标签：wordpress, foreach, custom-post-type

```
<?php $terms = wp_get_post_terms($post->ID,'category');  
            foreach ($terms as $term) {  
            $termcomp = $term->taxonomy . '_' . $term->term_id; } ?>

            <?php the_field('tagline' , $termcomp); ?> 
```

我如何在 wordpress 上使用此代码而不回显 6 次，因为我在该类别中有 6 个帖子..

[http://pastebin.com/ijqwA5SK](http://pastebin.com/ijqwA5SK)

整页模板在那里，foreach 也在底部，这个工作正常，只根据需要输出一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:25:55.297

使用高级自定义字段，您可以使用 获取类别分类自定义字段的字段`get_field('field', 'category_'.$cat_id)`，或者`the_field()`如果您想自动回显结果。在您的情况下，您首先需要确定当前的类别 ID，然后`the_field()`使用它调用您想要的字段名称，`tagline`. 这应该在外部加载`Loop`：

```
// only show on category pages
if(is_category()){
    global $wp_query;
    // get category id from query variables
    $cat_ID = get_query_var('cat');
    the_field('tagline', 'category_'.$cat_ID);
} 
```

# git - 仅将 git 命令代理到一个克隆

> ID：13127370
> 
> 赞同：0
> 
> 时间：2012-10-29T18:15:48.363
> 
> 标签：git, dvcs

我有几个使用相同 git 存储库的进程，但他们坚持将它们视为独立的事物。这导致我在不同的本地位置拥有多个相同存储库的克隆。

是否有任何现有的 git 包装器可以确保我只有一个带有硬链接的存储库？我期望它做的是：

*   On `clone`，`$GIT_CLONES_PATH`如果给定的 url 已经被签出，则签入。如果它不存在，请克隆到该位置，然后硬链接克隆到请求的路径。
*   上`pull`，先拉入`$GIT_CLONES_PATH`，再拉入本地。
*   上`push`，推送到远程`$GIT_CLONES_PATH`（防止本地推送后冲突），然后拉入公共位置`$GIT_CLONES_PATH`。

我想这里有数百个我没有考虑过的边缘案例，所以：有没有人知道一些现有的项目可以做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T19:26:05.323

克隆一个本地仓库。如果它是从本地完成的，您应该获得硬链接。

# sqlite - 如果我对自己有一个表的外键约束，删除整个表时是否需要小心？

> ID：13127376
> 
> 赞同：1
> 
> 时间：2012-10-29T18:16:07.950
> 
> 标签：sqlite, foreign-keys, referential-integrity

我有一个如下所示的 SQLite 表：

```
CREATE TABLE myTable (
    _id integer primary key autoincrement,
    ...
    ... /* some useful fields */
    ...
    parent integer,
    FOREIGN KEY (parent) REFERENCES myTable (_id)
); 
```

myTable 中的某些条目有父级，而其他条目则没有。业务逻辑确保没有“圈子”。我正在使用`PRAGMA foreign_keys = ON`，以便检测到外键违规。

问题：**如果我想删除整个表，执行是否足够`DELETE FROM myTable`？**还是我需要先删除“叶子”，然后再删除他们的父母等，以避免外键违规？

我已经对其进行了测试，并且`DELETE FROM myTable` *似乎可以正常*使用。但是，我想知道这只是巧合还是我可以依赖的东西（即记录和预期的行为）。

* * *

编辑：我没有`ON DELETE CASCADE`启用，这是故意的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:36:38.017

## 插入

通过指定[外键](http://www.sqlite.org/foreignkeys.html)和 with `PRAGMA foreign_keys = ON`，从空表开始，SQLite 将拒绝您输入任何数据（身份除外，其中`parent = _id`）并显示以下消息：

> 错误：外键约束失败。

因此，从一开始，您需要至少创建一个带有`PRAGMA foreign_keys = OFF`或“圆形”条目的条目。

## 删除特定条目

如果您不提供诸如[外键之类的](http://www.sqlite.org/foreignkeys.html)[操作](http://www.sqlite.org/foreignkeys.html#fk_actions)，则如果父项由于外键约束而有子项，SQLite 将拒绝删除“父项”。这是默认行为，相当于“NO ACTION”。`CASCADE`

## 删除所有条目

`DELETE FROM myTable`即使没有级联子句，也可以通过并且不应该触发同一张表上的外键约束来删除所有条目。我通过测试验证，它可能没有记录。

# c# - 跨浏览器 AJAX 和 setTimeout() 在 IE 中有效，但在 Chrome/Firefox 中失败

> ID：13127380
> 
> 赞同：0
> 
> 时间：2012-10-29T18:16:37.753
> 
> 标签：c#, javascript, jquery, cross-browser, settimeout

行。这几天让我很沮丧。我确定我是个白痴，我面前有一个解决方案，但这是我的问题。

当按下保存按钮时，我有一系列 AJAX 调用来处理和保存来自网页的数据。这已经在 IE 中工作了多年（在我被录用之前就已经设置好了）并且没有任何问题。我们现在需要支持多种浏览器，即 IE、Firefox、Chrome 和 Safari。

当我尝试在 Firebug 中按下保存按钮时，我看到的是我进行了第一个 AJAX 调用，我得到了 200OK 响应以及它花费的时间（毫秒），但是它一直在旋转：

![继续永远旋转](../Images/1b3926987338184de6c0567de5558c50.png)
17 秒是因为我单步执行了服务器端代码。

AJAX 成功处理程序方法永远不会被调用，整个事情就崩溃了。我尝试了几种不同的搜索方法，但它们似乎都没有太大的不同。~~这是原始代码。~~

编辑 5：这是更新的代码。我简化了它，去掉了 Step() 方法和所有的超时。这只是导致问题的 AJAX 调用。

```
 function SubmitForm() {
        $.blockUI({ message: waitMessage, css: { padding: 5} });

        var settingsXml = GetSettingsXml();
        ajaxParameters = "customerId:'" + customerId + "', connectionId:" + connectionId + ", settingsXml:'" + settingsXml + "', securityToken:'" + securityToken + "'";

        AjaxCall("EmailMarketingSettings.aspx", "Validate", ajaxParameters, function (result) {
            alert("It works!")
        }, function (result) {
            alert("It's broken!");
        });
    } 
```

`Validate()`将使其返回语句，但代码永远不会返回到客户端成功方法。

我错过了什么？

编辑：这是请求的 AjaxCall 方法。

```
function AjaxCall(pageName, methodName, parameters, onSuccessCallback, onFailureCallback) {
    $.ajax({
        type: "POST",
        url: pageName + "/" + methodName,
        data: "{" + parameters + "}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        timeout: 120000,
        success: function (resp) {
            result = resp.d;
            if (result.Success) {
                if (onSuccessCallback != null && typeof (onSuccessCallback) == "function") {
                    onSuccessCallback(result);
                } else {
                    $.unblockUI();
                }
            } else if (onFailureCallback != null && typeof (onFailureCallback) == "function") {
                onFailureCallback(result.Message);
            } else {
                alert(result.Message);
                $.unblockUI();
            }
        },
        error: function (req, errorType, errorThrown) {
            var errorMessage = "";
            if (errorType == "timeout") {
                errorMessage = "A timeout has occured"
            } else if (req.responseText.length > 0) {
                errorMessage = (req.responseText.substring(0, 1) == "{" ? eval("(" + req.responseText + ")").Message : req.responseText);
            } else {
                errorMessage = req.status;
            }
            if (onFailureCallback != null && typeof (onFailureCallback) == "function") {
                onFailureCallback(errorMessage);
            } else {
                alert("An error has occured: " + errorMessage);
                $.unblockUI();
            }
        }
    });
} 
```

编辑2：一旦发送请求，我就在服务器端代码返回任何内容之前点击了错误处理程序。AJAX 调用不等待返回任何内容，它只是以“error”的errorType 和errorThrown 的空字符串出错。

编辑 3：来自 Fiddler 的原始数据

火狐：

HTTP/1.1 200 OK Cache-Control: private, max-age=0 Content-Type: application/json; charset=utf-8 服务器：Microsoft-IIS/7.5 X-Powered-By：ASP.NET 日期：2012 年 10 月 31 日星期三 15:30:01 GMT 内容长度：178

{"d":{"__type":"CoreMotives.Web.MethodResult","Success":true,"Comments":"","Message":"","ElapsedMilliseconds":0,"SubTests":null, "NextStepAdditionalParameters":null,"Value":null}}

IE：

HTTP/1.1 200 OK Cache-Control: private, max-age=0 Content-Type: application/json; charset=utf-8 服务器：Microsoft-IIS/7.5 X-Powered-By：ASP.NET 日期：星期三，2012 年 10 月 31 日 15:29:53 GMT 内容长度：178

{"d":{"__type":"CoreMotives.Web.MethodResult","Success":true,"Comments":"","Message":"","ElapsedMilliseconds":0,"SubTests":null, "NextStepAdditionalParameters":null,"Value":null}}

再说一遍。AJAX 调用在服务器端代码返回任何内容之前命中错误处理程序。

编辑 4：从 Fiddler 链接到 .saz 文件。 [http://tinyurl.com/ckmatsk](http://tinyurl.com/ckmatsk)

那里应该只有2个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:29:04.783

哇...所有这些努力都是为了这么愚蠢的事情...

由于这个线程，我弄清楚了我的问题是什么：[JQuery Ajax Firefox Error](https://stackoverflow.com/questions/10027079/jquery-ajax-firefox-error)

SubmitForm() 方法没有返回 false，因此浏览器的默认行为正在接管。一旦我将 onclick 更改为：

onclick="return SubmitForm();"

从：

onclick="提交表单();"

并使 SubmitForm() 返回 false。它开始在 Chrome 和 Firefox 中运行。

感谢任何正在调查它的人。希望这对将来的某人有所帮助，尽管我怀疑有很多像我一样愚蠢的人...

# python - 改变 pymunk/Chipmunk 物理体的形状

> ID：13127381
> 
> 赞同：1
> 
> 时间：2012-10-29T18:16:39.667
> 
> 标签：python, chipmunk, pymunk

我刚刚开始使用 pymunk，我遇到了一个无法在文档中找到解决方案的问题。

我有一个在特定动画期间会改变形状的角色。我知道如何将形状附加到物理实体上，但如何更改它们？具体来说，我需要暂时将盒子更改为较小的盒子。

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:11:50.160

有几种不安全的方法可以修改形状。目前 (v3.0) pymunk 仅支持圆形和线段形状的更新。但是，我刚刚提交了一种更新 Poly 形状的方法，可在最新的 pymunk 主干中使用。

如果您不想运行最新的树干，我建议您只替换形状而不是修改它。无论如何，最终的结果都是一样的。

（不鼓励修改形状的原因是很难进行良好的模拟，调整大小在瞬间发生。例如，调整大小后的小对象之间的碰撞会在大对象内部得到解决？）

# wcf - WCF 流和 maxReceivedMessageSize

> ID：13127388
> 
> 赞同：10
> 
> 时间：2012-10-29T18:17:08.893
> 
> 标签：wcf, streaming, buffering, maxreceivedmessagesize

为什么在实现 WCF 流时 maxReceivedMessageSize 属性是相关的？既然缓冲和持久性是由流的消费者处理的，为什么 WCF 会关心单个服务操作可能需要多长时间或多长时间？

我正在开发一个可以处理从服务器到客户端并返回的大文件的项目。我认为 WCF 流是一个很好的选择，因为它应该允许处理理论上无限的文件大小。我的客户端和服务器都将 transportMode（在绑定上）设置为“Streamed”，并且消息设计为包含 Streams。然而，这还不够，因为我得到一个 CommunicationException 指示我需要增加 maxReceivedMessageSize 属性。按照异常的建议，神奇地增加属性可以让一切正常工作。

我担心 WCF 迫使我“限制”我的服务/客户端可以处理多少，即使流应该是“无限的”。如果出现的文件恰好比我的绑定配置大，则会发生相同的 CommunicationException。我不明白为什么 WCF 会任意限制我处理大文件的能力，我发送和存储这些文件的“时间”和“方式”现在是“我的”业务，因为我有一个可以随意使用的流。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T21:26:22.820

According to the documentation (at least what I've found), the reason you are "forced" to limit the size of your message is **security**, mostly to avoid DoS attacks, by sending too large messages and flooding the system.

> As a defense mechanism, maxReceivedMessageSize places a cap on the maximum allowable size of messages on receive. The default maxReceivedMessageSize is 64 KB, which is usually too low for streaming scenarios. [Source](http://msdn.microsoft.com/en-us/library/ms751463%28v=vs.100%29.aspx)

The max size for maxReceivedMessageSize is 9,223,372,036,854,775,807 bytes.

Hope this helps.

# sql - 来自同一数据表的 SQL 子查询

> ID：13127389
> 
> 赞同：1
> 
> 时间：2012-10-29T18:17:21.030
> 
> 标签：sql, join, subquery

我很难理解 MS SQL 中应该是一个非常简单的查询。我有两张桌子：`Employees`和`Departments`。

`Employees`由标准项目组成：`ID (pkey int)`, `FName`, `LName`, ... , `DepartmentID`.

`Departments`由`DepartmentID`, `DepartmentName`, ... ,`ManagerID`组成

从`Employees.DepartmentID`到有关系，和`Departments.DepartmentID`之间有关系。`Departments.ManagerID``Employees.EmployeeID`

换句话说，每个员工都有一个部门，每个部门都有一个经理，他也是一个员工。

我正在尝试创建一个显示员工姓名、...、部门和部门经理的视图。

使用此代码时，我不断收到一个错误，即返回了多个值：

```
SELECT
Employees_1.EmployeeID, Employees_1.FirstName, Employees_1.LastName, 
Departments_1.DepartmentName,
(SELECT
    dbo.Employees.LastName
    FROM dbo.Employees 
    INNER JOIN dbo.Departments
      ON dbo.Departments.DepartmentManager = dbo.Employees.EmployeeID
) AS ManagerName
FROM dbo.Employees AS Employees_1
INNER JOIN dbo.Departments AS Departments_1 
  ON Employees_1.Department = Departments_1.DepartmentID 
  AND Employees_1.EmployeeID = Departments_1.DepartmentManager 
```

关于如何根据第二个表的关系连接回同一个表（不同的行）的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:29:35.430

我建议不要使用子查询（它们要贵得多），而支持另一个联接。第二个连接将从 dept 表返回到 emp 表，在部门经理 ID 上再到员工的 Employee ID。

（为了清楚起见，我添加了列别名 - 它们根本不需要）

```
SELECT
    emp.EmployeeID          "EmpID",
    emp.FirstName           "EmpFirst",
    emp.LastName            "EmpLast",
    dept.DepartmentName     "DeptName",
    deptMgrEmp.FirstName    "MgrFirst",
    deptMgrEmp.LastName     "MgrLast"
FROM
    dbo.Employees as emp
    LEFT JOIN dbo.Departments as dept
    on emp.DepartmentID = dept.DepartmentID
    LEFT JOIN dbo.Employees as deptMgrEmp
    on dept.ManagerID = deptMgrEmp.EmployeeID 
```

这是一个讨论 JOIN 与子查询[链接](https://stackoverflow.com/questions/2577174/join-vs-subquery)的好帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:28:00.487

```
SELECT
  e.EmployeeId,
  e.FirstName,
  e.LastName,
  d.DepartmentName,
  m.EmployeeId as ManagerId
  m.FirstName as ManagerFirstName,
  m.LastName as ManagerLastName
FROM
  dbo.Employees e 
  JOIN dbo.Departments d
    ON d.DepartmentId = e.DepartmentId
  JOIN dbo.Employees m
    ON d.DepartmentManager = m.EmployeeID 
```

注意：未经测试的代码，但想法是您可以简单地将员工表别名为“m”（对于经理）并加入到它，键入经理的`EmployeeId`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:24:57.927

在您的选择子句中

(SELECT dbo.Employees.LastName FROM dbo.Employees INNER JOIN dbo.Departments ON dbo.Departments.DepartmentManager = dbo.Employees.EmployeeID)

您需要按部门 ID 过滤。

就目前而言，它将返回所有部门的所有经理？

# inno-setup - Inno Setup：卸载时有什么方法可以设置注册表项值？

> ID：13127390
> 
> 赞同：5
> 
> 时间：2012-10-29T18:17:24.033
> 
> 标签：inno-setup

我知道如何让 Inno Setup 在安装时创建/操作注册表项和/或值，并且我知道您可以在卸载时删除一个值、一个键等。但是有没有办法让 Inno Setup 在卸载过程完成后实际更改键的值？

我正在创建的设置将另一个应用程序使用的双字键的值更改为 1，表示它已安装，当此应用程序被删除时，我需要将该值恢复为 0，表示它已被删除。在不删除实际键/值的情况下，这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T20:23:12.697

您可以在with或`RegWrite`_ _`DWord``Binary``StringValue``procedure CurUninstallStepChanged(CurUninstallStep: TUninstallStep);``usPostUninstall``usDone`

```
procedure CurUninstallStepChanged(CurUninstallStep: TUninstallStep);
begin
  if CurUninstallStep = usPostUninstall then
    RegWriteStringValue(HKEY_CURRENT_USER, 'Software\My Company\My Program',
      'UserName', ExpandConstant('{sysuserinfoname}'));
end; 
```

# .net - fortify 软件是否与 Visual Studio 2012 兼容？

> ID：13127393
> 
> 赞同：3
> 
> 时间：2012-10-29T18:17:32.280
> 
> 标签：.net, visual-studio, fortify

我正在使用强化软件 v3.20，它似乎与 VS 2012 不兼容。

如果是，最新版本是否适用于 VS 2012？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T20:02:02.143

3.8 现已推出并支持 VS2012。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:19:14.673

SCA 3.7 及其审计和扫描插件支持 VS 2003、2005、2008 和 2010。没有特快版本！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T06:27:13.410

Fortify 3.7 不支持 VS .Net 2012 版。它支持 VS .Net 2003/5/8/10 版。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T14:47:53.700

Fortify SCA 的下一个版本（v3.7？）应该支持 VS2012。

# php - 需要来自 3 个不同表的 SQL 结果

> ID：13127395
> 
> 赞同：-1
> 
> 时间：2012-10-29T18:17:55.947
> 
> 标签：php, mysql, sql

**你好！**

对于 SQL 专家来说，这可能是一个简单的问题，这是我拥有的表：

```
**Table1 (Users):**
UserId -> 0,1,2...
UserName -> name1, name2, name3 ...

**Table2 (Actions):**
DealId -> 80,81,82...
BuyerId -> 0,1,2...
SellerId -> 2,3,4...
Amount -> 80,120,900...

**Table3 (Deals):**
DealId -> 80,81,82...
Dealname -> DealName1,DealName2...
UserId -> 0,1,2... 
```

**这是我需要的结果表（来自 3 个表）：**

```
Column 1: Buyer Name(Users.UserName) with (Actions.BuyerId -> Users.UserId)
Column 2: Seller Name(Users.UserName) with (Actions.SellerId -> Users.UserId)
column 3: Deal Name(Deals.DealName) with (Deals.DealId -> 80 [known number])
column 4: Amount (Actions.Amount) with (Deals.DealId -> 80 [known number]) 
```

当然，我**只**需要显示正确的 DealId (80) 的结果。任何人都可以帮忙吗？

我希望这很清楚..

**谢谢！！**

伊兰。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:38:22.907

```
 SELECT [Buyer].UserName, 
        [Seller].UserName, 
        [Deals].Dealname, 
        [Actions].Amount 
 FROM [Deals]
 LEFT JOIN [Actions] ON [Actions].DealID = [Deals].DealID
 LEFT JOIN [Users] AS [Seller] ON [Seller].UserID = [Actions].SellerID
 LEFT JOIN [Users] AS [Buyer] ON [Buyer].UserID = [Actions].BuyerId
 WHERE [Deals].DealID = 80 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:30:36.607

```
SELECT Buyer.UsernName, Seller.UserName, Deals.Dealname, Action.Amount FROM Deals
LEFT JOIN Actions ON Actions.DealID=Deals.DealID
LEFT JOIN Users AS Seller ON Seller.UserID=Actions.UserID
LEFT JOIN Users AS Buyer ON Buyer.UserID=Buyer.UserID
WHERE Deals.DealID=80 
```

# visual-studio-2010 - 在 cmake 中添加 Visual Studio .resx 文件

> ID：13127397
> 
> 赞同：3
> 
> 时间：2012-10-29T18:18:01.343
> 
> 标签：visual-studio-2010, cmake, visual-studio-2012, visual-studio-project

在 CMake 中，虽然它是一个出色的跨平台工具，但它也非常适合管理复杂的大型配置。我遇到的一个障碍是允许其他跨平台项目拥有特殊的“Visual Studio”项目。也就是说，在编译特定的 Visual Studio 项目时，我需要 CMake 的输出来拥有表单设计器 .resx 文件。这最终在一个标签中，如下所示：

```
<ItemGroup>
    <EmbeddedResource Include="Form1.resX">
      <DependentUpon>Form1.h</DependentUpon>
      <SubType>Designer</SubType>
    </EmbeddedResource>
</ItemGroup> 
```

如果我可以编写自定义规则、编写文本或以其他方式对 Visual Studio .vcxproj 文件中的内容进行更低级别的控制，我就可以做到这一点。

.vcxproj.filters 文件有一个对应的条目：

```
<ItemGroup>
    <EmbeddedResource Include="Form1.resX">
      <Filter>Resource Files</Filter>
    </EmbeddedResource>
</ItemGroup> 
```

还需要将资源文件添加到 .vcxproj：

```
<ItemGroup>
    <ResourceCompile Include="app.rc" />
</ItemGroup> 
```

对于 .vcxproj.filters：

```
<ItemGroup>
    <ResourceCompile Include="app.rc">
      <Filter>Resource Files</Filter>
    </ResourceCompile>
</ItemGroup> 
```

这是对 CMake 的代码更改还是可以添加的其他内容？如果是代码更改，请指出必须在哪里进行代码更改，我可以考虑进行必要的更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:45:18.917

因此，在 CMake 中似乎没有针对此问题的现有解决方案。我修改了 CMake 以允许它在 Visual Studio 解决方案文件中正确包含 .resX 文件。初步测试表明一切正常，但需要进行更多测试。代码更改很简单。然而，它提出的问题是手动管理 Visual Studio 的引用。CMake 确实有这方面的设施（尽管缺少文档）。问题主要是簿记，但是可以为参考、资源等配置许多选项，而 CMake 允许您添加到项目中，但配置并不好。我将试运行我的版本，如果一切顺利，请将其发送到 CMake 源代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T00:02:24.900

现在在 2018 年，我注意到有 CMake 源将 .resx 文件链接到标题。

```
if (this->ProjectType != csproj) {
    std::string hFileName = obj.substr(0, obj.find_last_of(".")) + ".h";
    this->WriteElem("DependentUpon", hFileName, 3);

    for (std::string const& i : this->Configurations) {
      this->WritePlatformConfigTag("LogicalName", i, 3);
      if (this->GeneratorTarget->GetProperty("VS_GLOBAL_ROOTNAMESPACE") ||
          // Handle variant of VS_GLOBAL_<variable> for RootNamespace.
          this->GeneratorTarget->GetProperty("VS_GLOBAL_RootNamespace")) {
        (*this->BuildFileStream) << "$(RootNamespace).";
      }
      (*this->BuildFileStream) << "%(Filename)";
      (*this->BuildFileStream) << ".resources";
      (*this->BuildFileStream) << "</LogicalName>\n";
    }
  } 
```

请注意，我`.resx`像其他来源一样添加了所有文件**以及 headers**。我还将`.resx`文件放在与标题相同的目录中。

```
file(GLOB mytarget_SOURCES
    *.h
    *.cpp
    *.resx
)
add_executable(mytarget WIN32 ${mytarget_SOURCES}) 
```

它在没有根命名空间时有效！

但是当文件位于某个命名空间下时，我会遇到麻烦，例如`test.vsgui.TestForm`. 添加命名空间会破坏系统。这是由于 .vcxproj 文件中的逻辑名称部分。

并`VS_GLOBAL_ROOTNAMESPACE`在那里救援。

```
set_target_properties(mytarget PROPERTIES VS_GLOBAL_ROOTNAMESPACE "test.vsgui") 
```

它修复了构建/可执行文件，并且资源正确链接。

现在要使设计器工作，Visual Studio 需要对 dot-net 库的引用。为此，我们需要设置`VS_DOTNET_REFERENCES`属性。

```
set_target_properties(mytarget VS_DOTNET_REFERENCES "System;System.Data;System.Drawing;System.Windows.Forms") 
```

[我从这里](https://stackoverflow.com/questions/12503229/c-cli-and-cmake)学到了这一点。仅此而已！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:38:16.480

您可以尝试创建源组：

```
source_group(Resources FILES Form1.resX) 
```

但这绝对无助于获得

```
<DependentUpon>Form1.h</DependentUpon>
<SubType>Designer</SubType> 
```

# javascript - 引用没有 ID 但有属性的元素 - 如何？

> ID：13127399
> 
> 赞同：1
> 
> 时间：2012-10-29T18:18:08.467
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery v1.3.2 按属性查找元素](https://stackoverflow.com/questions/696968/jquery-v1-3-2-find-element-by-attribute)
> [如果链接没有类或 ID，是否可以通过其 href 获取链接？](https://stackoverflow.com/questions/12823144/is-it-possible-to-grab-a-link-by-its-href-if-it-doesnt-have-a-class-or-id)

我的问题围绕着一个元素的属性（不能使用 ID，因为我可以确定它们是唯一的） -

例如，我有这个：

```
<a href="someurl.com">Link</a> 
```

但我可以动态注入，并且我可能有一种可行/快速/有效的方式在 dom 中引用它（请记住，会有很多这样的链接）。

```
<a href="someurl.com" data-access-label="000998">Link</a> 
```

所以，我将通过哈希重申并好奇这是否会快速/高效？

```
data = {
  '98789' : 'yeah',
  '871637':'cool',
  '00198789' : 'sure thing',
  '871609':'no way',
  '000998':'alright'
} 
```

因此，对我来说，我将 .each 通过所有链接然后找到数据访问标签值似乎效率低下，然后呢？我可以绑定那些href或其他东西，以便一旦我运行我的函数 - 它看起来像这样

```
 <div>
   <a href="someurl.com" data-access-label="000998">Link</a> alright
       <span> <a href="someurl.com" data-access-label="871637">Link</a> cool</span>
 </div> 
```

在任何给定时间，数据散列中只会有超过 40 个项目，所以也许我可以通过它“.each”，并将键与那些 data-access-label 中的值匹配？但我想要的可能是直接访问该项目，而不是通过 href 重申。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:21:28.077

使用 jQuery 的[属性选择器](http://api.jquery.com/category/selectors/attribute-selectors/)：

```
var link = $('[data-access-label*="' + identifier + '"]');

alert(link.text()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:26:33.713

$("a[数据访问标签]")

这将返回具有该属性的所有 a 元素的数组。

然后您可以调用 .each() 进行进一步处理。

[http://api.jquery.com/has-attribute-selector/](http://api.jquery.com/has-attribute-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:24:20.230

```
$("a").each(function(i) { 
    if (typeof $(this).attr('name') !== 'undefined' && $(this).attr('name') !== false) {
        // do work
    };
}) 
```

> 或者

```
$("a").each(function(i) { 
    if (typeof $(this).data('access-label') == "000998") {
        // do work
    };
}) 
```

> 或者

```
$('[data-access-label*="' + indexValue + '"]').click(function(e) { /* do work */ }); 
```

# java - Tomcat 6 的 JMS

> ID：13127404
> 
> 赞同：7
> 
> 时间：2012-10-29T18:18:20.957
> 
> 标签：java, tomcat, jms

我正在使用 Tomcat 6 java web 应用程序，我有一些需要通过 JMS（消息队列）来解决的要求，但需要一些方向来完成它。

我知道 Glassfish 或 JBoss 实现了他的 JMS 队列，但公司不想安装这些。

是否有任何可以在 tomcat 6 中部署的 JMS 实现的开源替代方案？

我[对此](http://openjms.sourceforge.net/)进行了研究，但在查看页面后，它看起来像是一个封闭的项目。谁能推荐其他课程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T18:20:19.333

您是否检查过 ActiveMQ 与 Tomcat 的集成

[教程](http://rocksolutions.wordpress.com/2010/12/03/configure-apache-activemq-with-tomcat-6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:09:30.007

我肯定会考虑 ActiveMQ。

它使用非常广泛，并且拥有非常活跃的用户社区。

它具有许多高级功能，甚至支持企业集成模式。

最后，它很好地集成到基于 Spring 的应用程序中。

[主动MQ](http://activemq.apache.org/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T19:48:31.943

通常，大多数 JMS 队列实现都是独立的应用程序。但是，您仍然可以在 Tomcat 中部署您的应用程序，或者直接向 JMS api 编写代码，或者使用 spring-jms 或 spring-integration 之类的东西来让自己更轻松。

正如人们所说，ActiveMQ 和 RabbitMQ 是 JMS 的两个非常好的选择。

# c# - 高度大于其 GridView 高度的 GridViewItem

> ID：13127406
> 
> 赞同：0
> 
> 时间：2012-10-29T18:18:23.890
> 
> 标签：c#, windows-runtime, winrt-xaml

我有固定宽度和高度的 GridView 项目。但我希望某些项目超过该固定高度以包含更多数据。[1](http://i.stack.imgur.com/gg02J.png) 我不想增加 GridView 的高度 - 这会导致 GridView 下的其他控件的触摸区域减少。

有什么解决办法吗？谢谢！

概念[一](http://i.stack.imgur.com/gg02J.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:30:42.817

我了解您希望网格视图中的大小可变的图块就像在开始屏幕中一样？如果是这样，那么这篇文章应该会有所帮助 [http://blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx](http://blogs.u2u.be/diederik/post/2012/03/07/Databinding-to-the-VariableSizedWrapGrid-in-Windows-8-Metro.aspx)

# pyqt - PyQT QWizard - QComboBox 的 userData 上的 registerField 而不是文本或索引？

> ID：13127407
> 
> 赞同：2
> 
> 时间：2012-10-29T18:18:26.213
> 
> 标签：pyqt, wizard, qcombobox

我正在创建一个 QWizard 并想要一个代表文件的组合框。组合框将显示文件名，但我需要整个路径，所以我将路径存储在组合框的 userData 中。为了访问另一个向导页面中的组合框数据，我使用了 registerField。组合框没有 currentData 方法，就像它有 currentIndex 或 currentText 一样，所以我创建了自己的组合框，它有一个 currentData 方法（在我的例子中，我总是返回一个 QString，所以我称之为 currentStringData）。当我将此新函数名称作为“属性”参数传递给 registerField 时，我没有得到任何结果。

谷歌搜索，我在 QtCentre 上遇到了其他人的问题——他们有同样的问题，但它是用 C++ 编写的，我很难从 C++ 示例转换为 python。[http://www.qtcentre.org/threads/13858-QWizard-QComboBox-and-registerField()-issue](http://www.qtcentre.org/threads/13858-QWizard-QComboBox-and-registerField()-issue)。我相信我的派生类缺少一个发射，但我不确定是否是这种情况或如何做到这一点。

任何人都知道如何在 Python 中做到这一点？

我创建了一个非常简单的 python 脚本来演示我的问题。

```
#!/usr/bin/env python

from PyQt4 import QtCore,QtGui

class QIComboBox(QtGui.QComboBox):
    def __init__(self,parent=None):
        super(QIComboBox, self).__init__(parent)

    def currentStringData(self):
        return self.itemData(self.currentIndex()).toString()

class VariantWizard(QtGui.QWizard):
    def __init__(self, parent=None):
        super(VariantWizard, self).__init__(parent)

        self.addPage(Page1())
        self.addPage(Page2())

        self.setWindowTitle("QVariant Test")
        self.resize(640,480)

class Page1(QtGui.QWizardPage):
    def __init__(self, parent=None):
        super(Page1, self).__init__(parent)

        self.version_combo = QIComboBox(self)
        self.version_combo.addItem("foo","/path/to/foo")
        self.version_combo.addItem("bar","/path/to/bar")

        self.registerField("version",self.version_combo,"currentStringData")

        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.version_combo)
        self.setLayout(layout)

class Page2(QtGui.QWizardPage):
    def __init__(self, parent=None):
        super(Page2, self).__init__(parent)

        path = self.field("version")
        label1 = QtGui.QLabel("raw path is '%s'" % path)
        label2 = QtGui.QLabel("string path is '%s'" % path.toString())

        layout = QtGui.QVBoxLayout()
        layout.addWidget(label1)
        layout.addWidget(label2)
        self.setLayout(layout)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    wizard = VariantWizard()
    wizard.show()
    sys.exit(app.exec_()) 
```

在此示例中，我希望第二页上的第一个标签是“原始路径是'/path/to/foo'”或“原始路径是'/path/to/bar'”，具体取决于哪个组合框项在第 1 页上被选中。我希望第二个标签是一个错误，因为 currentStringData 应该已经返回一个 QString。

相反，我得到“ `raw path is '<PyQt5.QtCore.QVariant object....>'`”和“ `string path is ''`”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T15:32:37.467

您在这里遗漏了几个重要的细节。首先，如果您不打算通过`field()`然后读取小部件现有属性，则必须定义自己的属性（`currentItemData`在这种情况下）。您可以按照[此处](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qt_properties.html)`@pyqtProperty`的说明通过装饰器进行操作。在您的情况下，应该在类中定义新属性。其次，当页面即将显示时，您必须调用其（重新实现的）方法，该方法将根据其他页面字段初始化页面内容（您可以[在此处](http://qt-project.org/doc/qt-4.8/qwizard.html)查看示例）。`QIComboBox``initializePage()`

您的代码的工作版本如下：

```
#!/usr/bin/env python

from PyQt4 import QtCore
from PyQt4 import QtGui
from PyQt4.QtCore import pyqtProperty

class QIComboBox(QtGui.QComboBox):
    def __init__(self,parent=None):
        super(QIComboBox, self).__init__(parent)

    @pyqtProperty(str)
    def currentItemData(self):
        return self.itemData(self.currentIndex()).toString()

class VariantWizard(QtGui.QWizard):
    def __init__(self, parent=None):
        super(VariantWizard, self).__init__(parent)
        self.addPage(Page1(self))
        self.addPage(Page2(self))
        self.setWindowTitle("QVariant Test")
        self.resize(640,480)

class Page1(QtGui.QWizardPage):
    def __init__(self, parent=None):
        super(Page1, self).__init__(parent)
        self.version_combo = QIComboBox(self)
        self.version_combo.addItem("filename1","/path/to/filename1")
        self.version_combo.addItem("filename2","/path/to/filename2")
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.version_combo)
        self.setLayout(layout)

        self.registerField("version",self.version_combo, "currentItemData")

class Page2(QtGui.QWizardPage):
    def __init__(self, parent=None):
        super(Page2, self).__init__(parent)
        self.label1 = QtGui.QLabel()
        self.label2 = QtGui.QLabel()
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.label1)
        layout.addWidget(self.label2)
        self.setLayout(layout)

    def initializePage(self):
        path = self.field("version")
        self.label1.setText("raw path is '%s'" % path.toString())
        self.label2.setText("string path is '%s'" % path)

if __name__ == '__main__':
    import sys
    app = QtGui.QApplication(sys.argv)
    wizard = VariantWizard()
    wizard.show()
    sys.exit(app.exec_()) 
```

# node.js - Node.io 抓取作业第二次失败

> ID：13127408
> 
> 赞同：0
> 
> 时间：2012-10-29T18:18:28.357
> 
> 标签：node.js, express, node.io

我本质上是在尝试即时抓取页面。当您点击此网址时，它会输出抓取作业的结果。第一次一切都很好。我第二次尝试它（通过 job.options.args 传递不同的参数）它甚至不会执行 node.io 作业的 run() 函数。`scrape_result`第二次返回空（我期望一个对象）。

有什么想法吗？如何确保第二次返回新结果？对于我的抓取工作，我几乎完全使用这里的示例 #3：[https ://github.com/chriso/node.io/wiki/Scraping](https://github.com/chriso/node.io/wiki/Scraping)

scraper.js 的摘录（其余部分类似于示例 #3：[https](https://github.com/chriso/node.io/wiki/Scraping) ://github.com/chriso/node.io/wiki/Scraping ）

```
run: function() {
    var book = this.options.args[0].book;
    var chapter = this.options.args[0].chapter;

    this.getHtml('http://www.url.com' + book + '/' + chapter + '?lang=eng', function(err, $) { 
```

然后我的 app.js

```
var scrip_scraper = require('./scraper.js');

app.get('/verses/:book/:chapter', function (req, res) {
    var params = {
        book: req.param('book'),
        chapter: req.param('chapter')
    }

    scrip_scraper.job.options.args[0] = params;
    //scrip_scraper.job.options.args.push(chapter);
    console.log(scrip_scraper.job.options.args);

    nodeio.start(scrip_scraper, function (err, scrape_result) {

        console.log(scrape_result);
    }, true);

}); //app.get('/verses/:book/:chapter') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:00:06.980

您可能会遇到范围界定问题，因为`options.args`在发出请求时可能会发生变化。尝试将输入作为函数参数传递给作业，以便其他请求无法更改它。这是一个示例，您可以根据自己的需要进行调整

*应用程序.js*

```
var express = require('express')
  , scraper = require('./scraper')
  , app = express();

app.get('/:keyword', function (request, response, next) {
    scraper(request.param('keyword'), function (err, result) {
        if (err) {
            return next(err);
        }
        response.send(result);
    });
});

app.listen(3000); 
```

*刮刀.js*

```
var nodeio = require('node.io');

module.exports = function (keyword, callback) {
    var job = new nodeio.Job({
        input: [ keyword ]
      , run: function (keyword) {
            //Make the request here..
            this.emit(keyword);
        }
    });
    nodeio.start(job, { silent: true }, callback, true);
}; 
```

# java - 如何在 intellij 中设置 android 源？

> ID：13127412
> 
> 赞同：1
> 
> 时间：2012-10-29T18:18:56.217
> 
> 标签：java, android, ide, intellij-idea, android-source

对于我的项目，我需要构建 Android 的自定义构建，并且我希望在 Intellij 中设置源代码。

源代码是从带有[这些说明的](http://source.android.com/source/downloading.html)[Android 开源项目](http://source.android.com/source/index.html)中获得的。我想修改一些基本模块（例如内容提供程序）的 Java 代码，并想在 Intellij 中执行此操作，因为这是我用于 android 开发的主要 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:17:46.913

如果您希望在 IntelliJ 中构建整个 AOSP，恐怕我无法帮助您 - 我认为您会在那里遭受很多折磨。

另一方面，如果您只想用它修改应用程序，那么我发现设置 IntelliJ 以在 Android 源代码上进行开发工作的最简单方法是将`.classpath`文件从 development/ide/eclipse 复制到根目录，然后让 IntelliJ 使用它的“构建现有的 eclipse 结构”功能 - 这需要很长时间，但我正在使用的所有应用程序似乎都可以加载依赖项等。

# codeigniter - 无法下载压缩图像。CRC32 总是 00000000

> ID：13127417
> 
> 赞同：1
> 
> 时间：2012-10-29T18:19:49.210
> 
> 标签：codeigniter, zip, crc32

我用 codeigniter 创建了一个简单的代码来下载压缩的图像文件。它似乎有效，但是当我尝试打开下载的 zip 文件时，crc32 始终为 00000000，并且无法提取文件/文件。我尝试对文本文件做同样的事情，效果很好。（crc32 不是 000000000）

代码：

```
$path = 'test/014.jpg';
$this->zip->read_file($path);
$this->zip->download('my_backup.zip'); 
```

我还尝试了以下方法：

```
$path = 'test';
$this->zip->read_dir($path);
$this->zip->download('my_backup.zip'); 
```

我按照以下用户指南中的说明进行操作：http: [//ellislab.com/codeigniter/user_guide/libraries/zip.html](http://ellislab.com/codeigniter/user_guide/libraries/zip.html)

在用户指南中给出的示例中，它压缩了一个 jpg 文件并下载它，这正是我想要做的。看起来这应该是非常直接的，但是它不起作用。

我尝试添加以下内容：

```
$this->zip->archive('my_backup.zip'); 
```

如此处所述：

[无法打开 zip 文件，codeigniter](https://stackoverflow.com/questions/12050441/unable-to-open-zip-file-codeigniter)

然而这并没有帮助

我在 Windows 7 上使用 WAMP，尝试了 firefox 和 chrome

非常感谢您对此的任何帮助谢谢

# android - 如何将列表视图内容保存到 SD 卡中的 .txt

> ID：13127418
> 
> 赞同：0
> 
> 时间：2012-10-29T18:19:59.410
> 
> 标签：android, listview

我正在开发一个应用程序来跟踪一些单圈时间，将它们保存到列表视图中，并将它们保存到 SD 卡中的 .txt 文件中。

我知道如何将文件保存到 SD，但我不知道如何获取列表视图的内容并将其转换为适当的格式以便我可以存储它。

任何人都可以帮助我吗？：） 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:33:33.380

> 将它们保存到列表视图中，但我不知道如何获取列表视图的内容

如果您在列表视图中显示数据，那么您也必须拥有数据。所以您不需要从列表视图中获取数据，只需从您正在使用的数组或数组列表中获取数据。

# javascript - 悬停时具有边框半径和不透明度的图像

> ID：13127420
> 
> 赞同：3
> 
> 时间：2012-10-29T18:20:04.830
> 
> 标签：javascript, jquery, google-chrome, css

我正在开发一个 jquery 插件。我需要在图像上制作蒙版效果。在 FF 上一切正常，但在 Chrome 和 Opera 中不起作用。

这里是html结构

```
<div id="container">
    <img src="http://lorempixel.com/300/200" />
</div> 
```

和CSS

```
#container, #container img { border-radius: 150em;}  
#container img:hover {opacity: 0.5; }
#container {
     overflow: hidden;
     background: #000;
     width: 200px;
     height: 200px;
} 
```

他是 jsfiddle [http://jsfiddle.net/geedmo/qQUfA/](http://jsfiddle.net/geedmo/qQUfA/)

Chrome 在悬停之前看起来还不错，但 Opera 的效果真的很差。是不是在不改变html结构的情况下实现遮罩效果？

更新：我需要裁剪图像

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:25:32.683

似乎工作正常： http: [//jsfiddle.net/qQUfA/4/](http://jsfiddle.net/qQUfA/4/)我必须为图像添加高度和宽度：

```
#container img {
    width: 100%;
    height: 100%;
} 
```

# django - 如何将'url'模板标签放入'with'

> ID：13127434
> 
> 赞同：1
> 
> 时间：2012-10-29T18:21:08.403
> 
> 标签：django, django-templates

我正在尝试将`{% url ..}`函数的返回值缓存到带有`with`模板标签的变量中。

这是我的代码： {% with path=url "show_cart" %} {% endwith %}

有了这段代码，我得到了这个异常：`TemplateSyntaxError` `u'with' received an invalid token: u'"show_cart"'`

是否可以将`url`函数的结果分配给变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:24:22.003

你可以这样做。不确定此语法需要什么 Django 版本：

```
{% url 'view' as the_url %}
{{ the_url }} 
```

[文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)在这里

# php - imagettftext（）不输出原始图像+水印

> ID：13127437
> 
> 赞同：0
> 
> 时间：2012-10-29T18:21:18.293
> 
> 标签：php, image, gd, imagettftext

使用作为 imagettftext() 变体来为带有自定义文本的图像加水印，但我必须在这里做错事......因为输出结果没有预期的水印。已经尝试了一些不同的方法，但我觉得问题可能出在创建水印的方式上......因为稍后在脚本中，当我应该使用其他一些功能时，我尝试使用 imagecreatefrompng()......

使用的辅助功能：

```
//ini_set('gd.jpeg_ignore_warning', 1);

function imagettftextSp($image, $size, $angle, $x, $y, $color, $font, $text, $spacing = 0){
if ($spacing == 0){
    imagettftext($image, $size, $angle, $x, $y, $color, $font, $text);
}else{
    $temp_x = $x;
    for ($i = 0; $i < strlen($text); $i++){
        $bbox = imagettftext($image, $size, $angle, $temp_x, $y, $color, $font, $text[$i]);
        $temp_x += $spacing + ($bbox[2] - $bbox[0]);
    }
}
}

function calculateTextDimensions($text, $font, $size, $angle, $spacing){
$rect = imagettfbbox($size, $angle, $font, $text);
$minX = min(array($rect[0],$rect[2],$rect[4],$rect[6]));
$maxX = max(array($rect[0],$rect[2],$rect[4],$rect[6]));
$minY = min(array($rect[1],$rect[3],$rect[5],$rect[7]));
$maxY = max(array($rect[1],$rect[3],$rect[5],$rect[7]));
$spacing = ($spacing*(strlen($text)+2));
return array(
 "left"   => abs($minX) - 1,
 "top"    => abs($minY) - 1,
 "width"  => ($maxX - $minX)+$spacing,
 "height" => $maxY - $minY,
 "box"    => $rect
);
} 
```

PHP 脚本：

```
$text = "C o p y r i  g  h  t   A f o n s o  G o m e s";
$font = "font/YanoneKaffeesatz-Bold-webfont.ttf";
$color = "0xFFFFFF";
$fundo = "0x779c4b";
$size = 13;
$angle = 0;
$padding = 4*5;
$spacing = 0;

$text_dimensions = calculateTextDimensions($text, $font, $size, $angle, $spacing);
$image_width = $text_dimensions["width"] + $padding;
$image_height = $text_dimensions["height"] + $padding;

$watermark = imagecreatetruecolor($image_width, $image_height);

ImageFill($watermark, 0, 0, $fundo);
imagesavealpha($watermark, true);
imagealphablending($watermark, true);
imagettftextSp($watermark,$size,$angle,$text_dimensions["left"]+($image_width/2)-($text_dimensions["width"]/2),$text_dimensions["top"]+($image_height/2)-($text_dimensions["height"]/2), $color, $font, $text, $spacing);
/* At this point the watermark is created */

$src = "TDJodmJXVXZhbUp0TDNCMVlteHBZMTlvZEcxc0wybHRZV2RsY3k5amIyNTBaWFZrYjNNdlNHVnlZbUZ5YVc4d055NXFjR2M9";
$src = base64_decode(base64_decode($src));
$marca = imagecreatefrompng($watermark); /* PROBLEM HERE? */
$imagem = imagecreatefromjpeg($src);

/* DIMENSIONS */
$mx = imagesx($marca);
$my = imagesy($marca);
$ix = imagesx($imagem);
$iy = imagesy($imagem);

/* POSITION */
$x = 0;
$y = $iy - $my - 0; 

imagecopy($imagem, $marca, $x, $y, 0, 0, $mx, $my); /* NEW IMAGE COMING OUT! */

header('Content-type: image/png');
imagepng($imagem);
imagedestroy($imagem); 
```

很抱歉粘贴了长代码......但这感觉有点超出我的技能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:53:00.173

问题解决了 ：）

删除了这一行

```
$marca = imagecreatefrompng($watermark); /* PROBLEM HERE? */ 
```

$mx 和 $my 成为

```
 $mx = $image_width;
    $my = $image_height; 
```

并且 imagecopy() 接收 $watermak 变量

```
imagecopy($imagem, $watermark, $x, $y, 0, 0, $mx, $my); /* NEW IMAGE COMING OUT! */ 
```

# xcode - xcode中架构x86_64的未定义符号

> ID：13127439
> 
> 赞同：0
> 
> 时间：2012-10-29T18:21:33.317
> 
> 标签：xcode, xcode4.2, linker-errors

编译时出现架构 x86_64 错误的未定义符号。

我构建了一个游戏树并使用函数检查树的哪些节点是空的`isEmpty()`。

虽然没有显示错误，但我不确定我将二维数组树传递给`isEmpty()`函数的方式。

```
#include <iostream>
#include <stdio.h>
#include <string.h>
#include <math.h>
//#include "header.h"
#define YES 10
#define NO 20

struct Node
{
    Node ** children;
    int     childCount;
    char name[1];
    int empty;//YES or NO
    int sequence;
    double  value;
};

using namespace std;

bool isEmpty(Node, int);

bool isEmpty(Node **ptr, int bsize) {    
    for (int i = 0; i<bsize; i++) {
        for (int j = 0; j < bsize; j++) {
            if((*(ptr+i)+j)->empty == YES){
                return true;
            }
        }
    }
    return false;
}

int main (int argc, const char * argv[])
{
    int size  = 4;
    Node tree[size][size];
// some stuff
    if (isEmpty(tree[size][size], size)) {
        cout<<"this is empty\n";
        return 0;
    }
    return 0;
} 
```

我该如何解决这个错误？任何帮助请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:26:40.323

您的函数原型与您的定义`isEmpty`不匹配。`isEmpty`

不幸的是，在将多维数组传递给函数时，C++ 并不是很友好。您的选择是：

1.  而是删除数组和用户指针。您必须改用动态分配。
2.  与其使用二维数组，不如使用 size 的一维数组`(length * width)`。
3.  为您的数组使用普遍固定的大小。

2 号可能是最简单的。代码：

```
#define YES 10
#define NO 20
using namespace std;
#include <iostream>

struct Node
{
    Node ** children;
    int     childCount;
    char name[1];
    int empty;//YES or NO
    int sequence;
    double  value;
};

using namespace std;

bool isEmpty(Node ptr[], int bsize) {    
    for (int i = 0; i<bsize; i++) {
        for (int j = 0; j < bsize; j++) {
            if(ptr[i * bsize + j].empty == YES){
                return true;
            }
        }
    }
    return false;
}

int main (int argc, const char * argv[])
{
    int size  = 4;
    Node tree[size * size];
// some stuff
    if (isEmpty(tree, size)) {
        cout<<"this is empty\n";
        return 0;
    }
    return 0;
} 
```

[方法 1](http://ideone.com/C1tg3B)
[的 Ideone 方法 3的 Ideone](http://ideone.com/Y80yZB)

# java - 如何在休眠注释中指定范围索引

> ID：13127441
> 
> 赞同：0
> 
> 时间：2012-10-29T18:21:54.113
> 
> 标签：java, hibernate, indexing, hibernate-annotations

是否可以通过 JPA 或 Hibernate 注释指定给定索引应使用具有范围能力的索引方法（例如 btree）？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T07:47:07.410

*   虽然 JPA 允许您对主键 (@Id) 和唯一约束 (@UniqueConstraint) 进行建模，但它不允许您对索引进行显式建模。JPA 标准中当然没有在索引范围或 btree 等处建模/提示的功能。JPA [2.0 Spec](http://jcp.org/aboutJava/communityprocess/final/jsr317/index.html)

*   Hibernate 通过@Index 支持索引建模。这是一个例子：

    @Entity
    @org.hibernate.annotations.Table(name="Forest", 索引 = { @Index(name="idx​​", columnNames = { "name", "length" } ) } )
    公共类 Forest { ... }

    或者对于单列索引：

    公共类树{

    ```
     @Index(name="story1index")
      public String getLeaf() {
         return leaf;
      } 
    ```

    }

    它不允许您指定“范围索引”、btree 等... [Hibernate Annotations 3.5](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)

    **如果**hibernate 生成数据库模式，那么它将创建索引。
    **但是**，在任何应用了合理 QA 的环境中，DB 模式通常由 DBA 单独创建和维护，而不是通过 hibernate 自动模式生成。这是更好的做法，因为它允许 DBA 完全根据需要定义所有物理属性 - 就像您在 Q 中要求的物理属性类型一样；-)。然后 Hibernate 使用 DBA 的强控制版本的模式。

*   无论索引是否由 Hibernate/JPA 建模，只需运行 DB 脚本，即可创建索引。（或者您可以将文本编辑应用到 Hibernate/JPA 生成的脚本）

*   对于 Oracle DB，默认索引类型已经是 B-Tree。在 MySQL 的情况下，默认索引类型是 B-Tree，但在内存存储引擎的情况下，默认是 HASH - 但在索引创建脚本中指定 B-Tree 很简单。[MySQL 5 - 创建索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

# algorithm - 最小生成树子图

> ID：13127446
> 
> 赞同：4
> 
> 时间：2012-10-29T18:22:11.927
> 
> 标签：algorithm, graph, tree, graph-theory, minimum-spanning-tree

我将在下周完成我书中的所有练习来修改课堂测试，我对这个子图问题感到非常困惑。

目前，我的想法使我相信，由于我们已经有一个最小生成树 G，因此由于我们在该最小生成树中存在子节点，因此 G' 必须存在。就条件而言，我有点茫然。

> 如果 X' 的节点集和边集分别是 X 的节点集和边集的子集，则图 X' 是图 X 的子图。让我们将 (V,T) 作为 G 的最小生成树，并且 G'=(V',E') 是 G 的连通子图。
> 
> (a)证明(V′,E′∩T)是G′的最小生成树的子图。
> 
> (b) 在什么条件下 (V′,E′∩T) 是 G′ 的最小生成树？证明你的主张。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:07:44.223

对于*（一）*

我真的不明白这个问题......你能解释一下吗？

对于*(b)*

我觉得如果

对于 if和then`e=(u,v)`中的每一个`T``u in V'``v in V'``e in E`

那么我们就有`(V′,E′∩T)`了 的最小生成树`G'`。

因为：

1.  如果 if和but not中`e`有一些，则 根本没有连接。它当然不可能是一棵生成树`e=(u,v)``T``u in V'``v in V'``in E'``(V′,E′∩T)``G'`
2.  如果条件成立，但`(V′,E′∩T)`不是 的生成树`G'`，则`G'`有一个成本较低的生成树，假设它是`Tg`。我们可以通过以下方式构建成本低于`T'`的生成树：（i）从（ii）添加每个中删除每个 。生成的图是 的生成树（因为它是连接的同时具有相同数量的边）并且成本低于。所以它永远不会发生，因为我们已经知道是 的最小生成树。`G``T``e=(u,v) , u in V' and v in V' and e in T``T``e=(u,v) , u in V' and v in V' and e in Tg``G``T``T``T``T`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T22:05:11.340

(a) 正如我在评论中提到的 (V', E' ∩ T) 可能包含多个组件。通常，G' 的最小生成树将需要更多边。问题是在 E' ∩ T 中是否已经给出了一些可以不用的边。因此，我们可以将问题改写为 G' 存在最小生成树 (V', T')，使得 E' ∩ T ⊂ T'。

[这是使用Kruskal 算法](http://en.wikipedia.org/wiki/Kruskals%27s_algorithm)的证明及其正确性证明。Kruskal 算法中按权重枚举边不是确定性的。尽管边是按权重排序的，但在权重相等的边上的枚举是不确定的。然而，对于每棵生成树，都有一些边的单调枚举产生最小生成树 (V,T)。令 E_x 为权重为 x 的所有边的集合。对于排序，选择任何顺序，使得 E_x ∩ T 中的所有边都排在 E_x \ T 中的边之前。E_x ∩ T 中的所有边都不会在 Kruskal 算法中检查它们的步骤中形成循环，因为它们出现在最终的最小生成树。它们出现的顺序也无关紧要，因为顺序不会改变循环的不存在。然后，E_x\T 中的所有边都被丢弃，因为它们会形成循环，

对于下一步，我们再次在 G' 上运行 Kruskal 算法，使用的排序将产生我们给定的 G 的最小生成树。将此树称为 (V', T')。这里的关键属性是，当我们这样做时，E' ∩ T 中的所有边都在任何其他边之前添加。相反，假设某个边 t ∈ E' ∩ T 在 G' 上的运行中会被拒绝，因为它形成了一个循环。这意味着某个链 C 已经在计算 (V,T) 时边 t 是第一个连接的两个组件之间形成了连接。如果是这样，同一条链将在原始运行中连接这些组件，而他们没有。现在考虑在将 E_x ∩ T 中的边添加到进行中的树之后立即在 G' 上的 Kruskal 算法的状态。克鲁斯卡尔的任何东西

(b) 这部分主要是 (a) 部分的推论，即观察到边集 E' ∩ T 在 Kruskal 算法运行的某个点始终是有效状态。因此，如果算法在该点完成，即边集已用尽，则 E' ∩ T 恰好是最小生成树的边。条件是算法在处于这种状态时结束，因此当 (V', E' ∩ T) 连接时，Kruskal 算法终止并且 (V', E' ∩ T) 是最小生成树。相反，如果 (V', E' ∩ T) 是最小生成树，那么它必然是连通的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T02:31:17.850

'a' 部分几乎立即从观察到最小生成树（例如`(V,T)`）确实是最小的！这是证明的一部分的草图：

假设矛盾`(V′,E′∩T)`不是最小的*。*这意味着`e in E′∩T`我们可以删除一些内容，同时仍保留其连接性。这意味着`e`也可以从 T 中删除，这显然不能，因为`T`它是最小的。

对于“b”部分，我认为 lavin 提供了一个不错的解决方案。希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T20:20:52.133

我为不耐烦的人提供了一个非正式的 tl;dr 版本 :) eh9 值得赏金

a - 存在由 T 与所有边 v' 可能具有的交点形成的 v' 的生成树。E' ∩ T 必然是这个的一个子集

b - 条件是 (V', E' ∩ T) 连接时。E'中的任何非最小边和环都被与T的交集丢弃，并且任何剩余的最小连通图都是MST

# .htaccess - http 不重定向到 https

> ID：13127448
> 
> 赞同：1
> 
> 时间：2012-10-29T18:22:24.687
> 
> 标签：.htaccess, https

我如何将 .htaccess 文件写入[https://www.domain.com](https://www.domain.com) 示例：

```
domain.com => https://www.domain.com
www.domain.com => https://www.domain.com
https://domain.com => https://www.domain.com
http://www.domain.com => https://www.domain.com 
```

这是我的 htaccess：

```
# Use PHP5.4 Single php.ini as default
AddHandler application/x-httpd-php54s .php
<IfModule mod_rewrite.c>
# For security reasons, Option followsymlinks cannot be overridden.
#  Options +FollowSymLinks
   Options +SymLinksIfOwnerMatch
   Options +Indexes
   RewriteEngine On
   RewriteCond %{http_host} ^mydomain\.com [NC]
   RewriteRule ^(.*)$ http://www.mydomain.com/$1 [R=301,NC]
   RewriteCond %{SCRIPT_FILENAME} !-d
   RewriteRule ^([^\.]+)$ $1.php [NC,L]
   RewriteCond %{REQUEST_FILENAME}.php -f
</IfModule>
# BEGIN WordPress

# END WordPress 
```

我添加下一个代码：

```
<IfModule mod_rewrite.c>
# add https to domain.
   RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</IfModule> 
```

但我的域仍然是 www.domain.com 而不是[https://www.domain.com](https://www.domain.com)。我应该改变什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:36:44.173

您应该做的就是将以下内容添加到`http.conf`或`.htaccess`：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} 
```

如果您进行编辑`http.conf`，您应该在之后重新启动 Apache：

```
service httpd restart 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:45:35.247

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} ^domain\.com$
RewriteRule ^ https://www.domain.com%{REQUEST_URI} [L,R=301] 
```

# c# - 事件处理程序列表

> ID：13127449
> 
> 赞同：0
> 
> 时间：2012-10-29T18:22:40.257
> 
> 标签：c#, .net-4.5

我想创建一个事件处理程序的字典，或者类似于带有键的方法字典

并在接受键的方法中使用它，当调用此函数时，我使用键搜索并触发事件或方法

任何的想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:18:08.457

您可以创建一个字典`EventHandler`：

```
Dictionary<string, EventHandler> eventHandlers   // using a string or whatever you like for a key 
```

并像这样调用：

```
eventHandlers[key].Invoke(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T16:26:44.523

它记录在 MSDN：[How to: Use a Dictionary to Store Event Instances (C# Programming Guide)](http://msdn.microsoft.com/en-US/library/z4ka55h8%28v=vs.80%29.aspx)上。

# vb.net - VB 中的动态 Web 服务应用程序

> ID：13127450
> 
> 赞同：0
> 
> 时间：2012-10-29T18:22:40.117
> 
> 标签：vb.net, web-services, web-config

我遇到的问题是，在使用不同的环境时，我无法让我的应用程序动态访问单独的应用程序 web 服务。我知道我需要使 url 动态化并更改配置文件中的信息。我不确定当 Web 服务是 Web 引用的服务引用时需要采取的步骤（有很多教程显示您可以右键单击 > 属性 > 并选择动态 URL 行为。这不适用于服务引用）如何我要在运行时配置它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:46:52.547

为什么不在代码中动态调用 Web 服务而不是使用静态引用？

我已经使用此代码很长时间了，但不记得我在哪里得到它：

```
 Friend Class WsProxy
    <SecurityPermissionAttribute(SecurityAction.Demand, Unrestricted:=True)> _
    Friend Shared Function CallWebService(ByVal webServiceAsmxUrl As String, ByVal serviceName As String, ByVal methodName As String, ByVal args As Object()) As Object
        ServicePointManager.ServerCertificateValidationCallback = New RemoteCertificateValidationCallback(AddressOf bypassAllCertificateStuff)
        Dim client As New System.Net.WebClient()

        ' Connect To the web service
        Dim stream As System.IO.Stream = client.OpenRead(webServiceAsmxUrl & "?wsdl")

        ' Now read the WSDL file describing a service.
        Dim description As ServiceDescription = ServiceDescription.Read(stream)

        '''// LOAD THE DOM /////////
        ' Initialize a service description importer.
        Dim importer As New ServiceDescriptionImporter()

        importer.ProtocolName = "Soap12"
        ' Use SOAP 1.2.
        importer.AddServiceDescription(description, Nothing, Nothing)
        ' Generate a proxy client.
        importer.Style = ServiceDescriptionImportStyle.Client
        ' Generate properties to represent primitive values.
        importer.CodeGenerationOptions = System.Xml.Serialization.CodeGenerationOptions.GenerateProperties

        ' Initialize a Code-DOM tree into which we will import the service.
        Dim nmspace As New CodeNamespace()
        Dim unit1 As New CodeCompileUnit()
        unit1.Namespaces.Add(nmspace)

        ' Import the service into the Code-DOM tree. This creates proxy code that uses the service.
        Dim warning As ServiceDescriptionImportWarnings = importer.Import(nmspace, unit1)
        If warning = 0 Then
            ' If zero then we are good to go
            ' Generate the proxy code
            Dim provider1 As CodeDomProvider = CodeDomProvider.CreateProvider("CSharp")

            ' Compile the assembly proxy with the appropriate references
            Dim assemblyReferences As String() = New String(4) {"System.dll", "System.Web.Services.dll", "System.Web.dll", "System.Xml.dll", "System.Data.dll"}
            Dim parms As New CompilerParameters(assemblyReferences)
            Dim results As CompilerResults = provider1.CompileAssemblyFromDom(parms, unit1)

            ' Check For Errors
            If results.Errors.Count > 0 Then
                For Each oops As CompilerError In results.Errors
                    System.Diagnostics.Debug.WriteLine("========Compiler error============")
                    System.Diagnostics.Debug.WriteLine(oops.ErrorText)
                Next
                Throw New System.Exception("Compile Error Occured calling webservice. Check Debug ouput window.")
            End If

            ' Finally, Invoke the web service method
            Dim wsvcClass As Object = results.CompiledAssembly.CreateInstance(serviceName)
            Dim mi As MethodInfo = wsvcClass.[GetType]().GetMethod(methodName)
            Return mi.Invoke(wsvcClass, args)
        Else
            Return Nothing
        End If
    End Function

    Private Shared Function bypassAllCertificateStuff(ByVal sender As Object, ByVal cert As X509Certificate, ByVal chain As X509Chain, ByVal [error] As System.Net.Security.SslPolicyErrors) As Boolean
        Return True
    End Function
End Class 
```

要使用它，只需使用以下参数创建一个 Object 类型的数组：

```
Dim vParams(1) As Object
vParams(0) = "Some param"  ' Some string parameter
vParams(1) = 12345  ' Some integer parameter 
```

然后使用对类的静态调用来调用：

```
WsProxy.CallWebService("http://yourserviceurlhere/", "WsNamespace", "MethodName", vParams) 
```

这将产生一个 Object 类型的响应，无论 Web 服务响应是什么。希望能帮助到你。

# java - Java中的打印对象

> ID：13127451
> 
> 赞同：5
> 
> 时间：2012-10-29T18:22:55.567
> 
> 标签：java, tostring

我运行了以下代码

```
String str = null;
System.out.println(str); 
```

输出为**null**。

起初，我以为`NullPointerException`打印对象隐式调用`toString`方法会被抛出。所以，我对输出感到惊讶。

然后我考虑了输出，并认为上面的 String 语句实际上没有创建任何对象，只创建了不指向任何对象的引用。所以这可能是这种输出的原因。

有人可以让我知道我的理解是否正确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T18:24:12.597

这些`print()`方法显式[检查](http://www.grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/io/PrintStream.java#PrintStream.print%28java.lang.String%29).`null`

```
public void print(String s) {
    if (s == null) {
        s = "null";
    }
    write(s);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:24:52.417

[`PrintStream.print`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#print%28java.lang.String%29)检查是否是`null`

```
 public void print(String s) {
   if (s == null) {
    s = "null";
   }
   write(s);
 } 
```

从 Javadoc[`PrintStream.print`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#print%28java.lang.String%29)检查它是否是`null`：

> 打印一个字符串。如果参数为空，则打印字符串“null”。否则，字符串的字符会根据平台默认的字符编码转换为字节，并且这些字节完全按照 write(int) 方法的方式写入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T18:25:23.550

`NullPointerException`仅当您使用引用指向`null`调用某些方法或访问某些值时才会发生。仅仅打印一个`null`值不会导致`NullPointerException`.

所以，在下面的代码中，你会得到`NPE`： -

```
String str = null;
System.out.println(str.length()); 
```

如果你看到[`PrintStream#print`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#print%28java.lang.String%29)方法的源代码，如下图所示：-

```
public void print(String s) {
    if (s == null) {
        s = "null";
    }
    write(s);
} 
```

因此，它会检查`null`值并相应地打印`"null"`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-29T18:25:52.537

`Print()`默认情况下检查`null`，但是当你这样做时

```
System.out.print(str.toString()); 
```

现在你会得到`NullPointerException`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T18:25:27.990

使用引用打印对象`null`应该不会给您带来问题。在引用（或指针，如果你愿意的话）上调用操作`null`应该会给你一个 NPE。尝试做一个

`System.out.println (str.toString())`

那应该给你一个很好的NPE

# ios - Facebook 移动应用安装广告错误 - 找不到您请求的页面

> ID：13127454
> 
> 赞同：17
> 
> 时间：2012-10-29T18:23:22.260
> 
> 标签：ios, facebook, ads

我正在尝试使用新的 facebook 移动应用安装。我在我的应用程序中集成了最新的 SDK 并按照本[教程](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)进行操作。

在文档中它说：“注意：要确认 SDK 已设置为进行测量，请转到应用程序摘要页面，并且有一个字段“上次报告的移动安装”提供您的应用程序上次报告安装的时间戳。”

我可以确认正在报告安装并且运行正常。

当我尝试制作广告并单击“预览”链接时，它没有转到 App Store，而是转到 facebook 错误页面，上面写着：“找不到您请求的页面。您可能单击了过期链接或输入错误地址。有些网址是区分大小写的。”

我可以看到实际的 URL 是`www.facebook.com/apps/application.php?id=MYAPPID`

所有的广告都会被自动拒绝，因为它们指向错误页面而不是应用商店。

在我的应用页面上，我已经填写了所需的信息，并且只将其设置为原生 iOS 应用（启用 Facebook 登录，启用深度链接）。我的应用商店 ID 在那里，如果我单击“转到 Itunes 商店”链接，它可以正常工作。

在“高级”设置下，我确保选择本机/桌面应用程序。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:03:39.537

为您的应用设置主页可能有助于解决问题。广告工具预览链接正在尝试重定向到您的应用页面，该页面可能尚不存在，因此会引发错误。

该页面必须与您的页面同名，并且您可以从您的应用设置页面将它们链接在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T19:19:06.520

1.  转到项目的根文件夹
2.  类型：grep -r 广告标识符。

这将递归检查每个文件，并为您提供违规库的名称

尝试新的 Facebook SDK 并添加框架 social.framework、adsupport.framework 和 accounts.framework 并将状态设为 as 选项

# c++ - 标准库对自移动分配有什么保证？

> ID：13127455
> 
> 赞同：50
> 
> 时间：2012-10-29T18:23:22.203
> 
> 标签：c++, stl, c++11, move-semantics

C++11 标准对与标准库相关的自移动赋值有什么看法？更具体地说，什么，如果有的话，保证什么`selfAssign`？

```
template<class T>
std::vector<T> selfAssign(std::vector<T> v) {
  v = std::move(v);
  return v;
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-29T18:55:59.147

17.6.4.9 函数参数 [res.on.arguments]

> 1 除非另有明确说明，否则以下各项均适用于 C++ 标准库中定义的函数的所有参数。
> 
> ...
> 
> *   如果函数参数绑定到右值引用参数，则实现可能假定此参数是对该参数的唯一引用。[ 注意：如果参数是 T&& 形式的泛型参数并且绑定了类型 A 的左值，则参数绑定到左值引用 (14.8.2.1)，因此上一句未涵盖。— end note ] [ 注意：如果程序将左值转换为 xvalue，同时将该左值传递给库函数（例如，通过使用参数 move(x) 调用函数），则程序实际上是在要求该函数处理该左值作为临时。如果参数是左值，则该实现可以免费优化别名检查，这可能需要。——尾注]

因此，`std::vector<T, A>::operator=(vector&& other)`允许的实现假定它`other`是一个prvalue。如果`other`是纯右值，则无法进行自移动分配。

可能发生的情况：

`v`将处于无资源状态（0 容量）。如果`v`已经有 0 容量，那么这将是一个空操作。

**更新**

最新的[工作草案 N4618](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/n4618.pdf)已被修改为在要求中明确说明`MoveAssignable`：

```
t = rv 
```

（其中`rv`是一个右值），如果并且不引用同一个对象，则只需是赋值之前`t`的等效值。无论如何，分配后的状态是未指定的。有一个附加说明需要进一步说明：`rv``t``rv``rv`

> `rv`必须仍然满足使用它的库组件的要求，无论是否引用同一个对象`t`。`rv`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-05T11:50:38.560

[Eric Niebler](https://ericniebler.com/2017/03/31/post-conditions-on-self-move/)有一个相关的帖子，其中包含多个链接，例如[Howard Hinnant 的这个答案](https://stackoverflow.com/a/9322542/767632)。

最新的С++20工作草案（N4861）在我看来仍然有点模棱两可。但是，最近有一个[图书馆工作组问题 2839](https://wg21.link/lwg2839)，它在以下位置添加了以下明确声明`[lib.types.movedfrom]/2`：

> C++ 标准库中定义的类型的对象可以移动分配（11.4.6 [class.copy.assign]）给它自己。除非另有说明，否则此类分配会将对象置于有效但未指定的状态。

它已经在 C++23 的 N4885 工作草案中。

因此，`selfAssign`保证不会导致未定义的行为，并且由于没有额外的保证`std::vector`，因此保持`v`在某些有效状态。

# android - 在 android 上查看时无法在 jquery 移动网站上嵌入 youtube 视频

> ID：13127456
> 
> 赞同：1
> 
> 时间：2012-10-29T18:23:23.173
> 
> 标签：android, mobile, jquery-mobile, youtube

好吧，问题实际上是在尝试通过菜单导航到不同的页面（页面 id）时。首先它要求“点击此处激活插件”，但这不是问题。激活插件后，视频似乎停留在屏幕上，同时导航到不同的页面。在galaxy s2上进行了测试。（它在 iphone 4 ios5 上运行良好）将不胜感激。这是链接，如果您不懂语言，请见谅：http: [//eiatmaor.co.il/mobile](http://einatmaor.co.il/mobile)

这是代码：

```
 <div data-role="page" id="page1">
          <div data-theme="d" data-role="header" data-position="fixed">
            <span class="ui-title">
             <img style="width: 100%; " src="images/logo.png" />
            </span>

            <div data-role="navbar" data-iconpos="top">
                <ul>
                    <li>
                        <a href="#page1" data-theme="a" data-icon="" data-transition="slide" class="ui-btn-active ui-state-persist">
                           בית
                        </a>
                    </li>
                    <li>
                        <a href="#page2" data-theme="a" data-icon="" data-transition="slide">
                            אודות
                        </a>
                    </li>
                    <li>
                        <a href="#page3" data-theme="a" data-icon="" data-transition="slide">
                            שרותים
                        </a>
                    </li>
                    <li>
                        <a href="#page4" data-theme="a" data-icon="" data-transition="slide" >
                             צור קשר 
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div data-role="content" style="margin:0 auto;padding:5px;text-align:center;padding-top:25px;">
       <iframe width="300" height="169" src="http://www.youtube.com/embed/F6P9rkh96jk?wmode=opaque" frameborder="0" allowfullscreen></iframe>
        </div>
    </div>        
 <!-- about -->
    <div data-role="page" id="page2">
        <div data-theme="d" data-role="header" data-position="fixed">
            <span class="ui-title">
             <img style="width: 100%;" src="images/logo.png" />
            </span>

            <div data-role="navbar" data-iconpos="top">
                <ul>
                    <li>
                        <a href="#page1" data-theme="a" data-icon="" data-transition="slide" >
                           בית
                        </a>
                    </li>
                    <li>
                        <a href="#page2" data-theme="a" data-icon="" data-transition="slide" class="ui-btn-active ui-state-persist">
                            אודות
                        </a>
                    </li>
                    <li>
                        <a href="#page3" data-theme="a" data-icon="" data-transition="slide">
                            שרותים
                        </a>
                    </li>
                    <li>
                        <a href="#page4" data-theme="a" data-icon="" data-transition="slide" >
                             צור קשר 
                        </a>
                    </li>
                </ul>
            </div>
        </div>
...and so on... 
```

# c++ - Haar-detector：rejectLevels 和 levelWeights 用于什么？

> ID：13127457
> 
> 赞同：8
> 
> 时间：2012-10-29T18:23:25.953
> 
> 标签：c++, opencv, face-detection

我试图在文档中找到`rejectLevels`and的用法，`levelWeights`但这些都没有记录。为什么可以`detectMultiScale()`退货？它们不是级联的恒定属性吗？

# html - iframe 宽度 100% 不是真正跨越页面

> ID：13127459
> 
> 赞同：1
> 
> 时间：2012-10-29T18:23:28.327
> 
> 标签：html, iframe, width, margin

我给我的`<iframe>`标签设置了一个样式`style="width:100%"`，它几乎跨越了页面，除了它在左侧和右侧留下了一个小边距。（我在 Firefox 和 Chrome 上都试过，结果是一样的。）这看起来没什么大不了的，但最好`iframe`不要留下左右边距。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:43:47.497

这个 CSS 在 Firefox 中对我有用：

```
body { margin:0px; }
iframe { width:100%; height:100%; border:none } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:38:06.000

`style="width:100%;margin:0 -10px 0 -10px;"`

或您认为将其带到边缘所需的任何数量。负数给它一个负边距，所以它应该延伸到外边缘，如果不是 -20px。

# mainframe - CICS 参数更新

> ID：13127462
> 
> 赞同：1
> 
> 时间：2012-10-29T18:23:37.197
> 
> 标签：mainframe, cics

我最近更新了用于覆盖默认参数的系统初始化参数文件。

所以我的问题是我是否需要重新启动我的 CICS 区域，或者当我现在连接到 CICS 区域时这些参数将自动获取。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T00:40:23.077

如果您只更改了 SYSIN 参数，那么您必须回收 CICS。但是，您可以通过 CEMT 事务动态地进行许多相同的更改。

您更改了哪些参数？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T15:49:34.090

这取决于....是的，您必须重新启动 CICS 才能从 SYSIN 覆盖中获取新参数，但是

根据参数，可以通过 CEMT 动态更改相同的参数。

你改变了哪些参数？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T14:56:17.960

如果 TCPIP 设置为 NO，而您现在将其设置为 YES，您将需要重新启动 CICS。您可以使用 CEMT 主控制台事务打开或关闭 TCPIP，但如果 CICS 以 TCPIP=NO 启动，则不会将必要的程序加载到系统中。

# jquery - 如何使用 Tinyscrollbar？

> ID：13127464
> 
> 赞同：0
> 
> 时间：2012-10-29T18:23:40.447
> 
> 标签：jquery, tinyscrollbar

我有点困惑如何使用 tinyscrollbar 插件，我尝试像这样使用它：

```
<div>
Lorem ipsum ...
</div>

$('div').tinyscrollbar();​ 
```

但有一个例外，请参阅这个小提琴：http: [//jsfiddle.net/timbuethe/Kgt7c/](http://jsfiddle.net/timbuethe/Kgt7c/)。源看起来找不到它按类搜索的视口对象：

```
oViewport   = { obj: $( '.viewport', root ) } 
```

而且我没有看到任何创建此元素的代码。我是否必须提供一堆元素（例如“视口”、“滚动条”等）才能使用这个插件？有人跑过这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:20:56.797

让它工作[http://jsfiddle.net/timbuethe/Kgt7c/25/](http://jsfiddle.net/timbuethe/Kgt7c/25/)你真的必须包括额外的标记......

```
 <div id="scrollbar1">
    <div class="scrollbar"><div class="track"><div class="thumb"><div class="end"></div></div>            </div></div>
    <div class="viewport">
        <div class="overview">
          (...)

        </div>
    </div>
  </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:19:56.570

您需要为滚动条、轨道和拇指包含 div，并在 css 中为它们提供高度属性。还包括视口和概览 div：

```
<div id="scroll">                                                                
    <div class="scrollbar">
        <div class="track">
            <div class="thumb">
                <div class="end"></div>
            </div>
        </div>
    </div> 
     <div class="viewport">                                                                                             </div>
         <div class="overview"> 
             Content here
         </div>
     </div>
</div> 
```

然后，调用：

```
 $('#scroll').tinyscrollbar(); 
```

# javascript - Javascript - 范围在回调中丢失

> ID：13127468
> 
> 赞同：4
> 
> 时间：2012-10-29T18:23:57.257
> 
> 标签：javascript

我有以下代码：

```
var myPage = {};
myPage.component = function(callback){

    var somethingHappened = true;

    if (somethingHappened){
        callback();
    }
};

myPage.main = function(){

    // Initialise.
    this.init = function(){

        // make an instance of my component
        this.component = new myPage.component( this.callback );

        // need my utility function here
        this.doSomethingUseful();
    };

    // Callback to be executed when something happs in the component.
    this.callback = function(){
        this.doSomethingUseful(); // doesn't work
    };

    // A useful utility that needs to be accessible from both the 
    // init() and callback() functions
    this.doSomethingUseful = function(){
        // some utility stuff
    };
};
new myPage.main().init(); 
```

当从组件执行回调函数时，确保 myPage.main 范围可用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T18:25:33.467

使用[绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
this.callback = function(){
    this.doSomethingUseful(); // doesn't work
}.bind(this); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:26:52.677

如果要提供范围，可以使用[`Function.prototype.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call).

```
var foo = 'bar';
function(){
  // this = 'bar';
}.call(foo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T16:24:23.153

使用此函数实例化对象：

```
function newClass(klass) {
    var obj = new klass;

    $.map(obj, function(value, key) {
        if (typeof  value == "function") {
            obj[key] = value.bind(obj);
        }
    });

    return obj;
} 
```

这将自动绑定所有函数，因此当对象内部的方法具有其对象的上下文时，您将以习惯 OOP 样式获取对象。

所以你实例化你的对象不是通过：

```
var obj = new myPage(); 
```

但：

```
var obj = newClass(myPage); 
```

# mysql - MATCH...AGAINST... 不返回预期结果

> ID：13127470
> 
> 赞同：1
> 
> 时间：2012-10-29T18:24:08.020
> 
> 标签：mysql, sql, match-against

我在表格中有这条记录：

> TAS1J0413031AB32-E14-0SKODAOctavia97-F

但是当我尝试这样搜索时：

```
SELECT *
FROM `cross_lists`
WHERE match (`cross_value`)
          against ("*1J0413031AB*" in boolean mode) 
```

我没有得到任何结果。

但是当我尝试使用它时`OX143D`，`OX143DAUDIA3/VWGolf-4/Bora1.9TDI` 它工作正常，`1J0513425`一切`107649=HP=1J0513425VWGolfIVRear` 都很好。

我究竟做错了什么？如何获得我需要的结果？

如何轻松找到出现在任何地方的字符串？

# css - 相对于兄弟的流体宽度 div

> ID：13127476
> 
> 赞同：2
> 
> 时间：2012-10-29T18:24:13.917
> 
> 标签：css, css-float, fluid-layout, flexbox

我怀疑这可能需要 Flexbox（或者更容易使用），但也许有人有想法/解决方法。我有这样的结构：

```
<section>
  <div>Some Text Here</div>
  <div></div>
</section> 
```

截面宽度：100%。我希望第一个 div（向左浮动）根据文本拉伸到不同的宽度，并且我希望第二个 div 占据部分剩余的任何百分比。每个 div 可能包含浮动在其中的各种其他 div（它们反过来将使用百分比作为宽度）。这可能吗？

编辑：好的，我认为更大的问题是，在第二个 div 中，我有一个宽度为 % 的浮动 div，但它的父级是宽度自动......所以它不会正常工作吗？[密码笔](http://codepen.io/anon/pen/oqFIK)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:33:19.087

您可以通过将一个 DIV 指定为左浮动，将另一个 DIV 指定为自动（因此它使用剩余的任何空间）来执行此操作

```
div:first-child { /* div on the left, width as per content */
    float: left;
    width: auto;
    background-color: #777;
}
div:last-child { /* div on the right, uses remaining width */
    background-color: #77f;
    width: auto;
} 
```

检查这个**演示**：http: [//jsfiddle.net/pQc3d/1/](http://jsfiddle.net/pQc3d/1/)

# android - Android 项目文件夹和“styles.xml”

> ID：13127482
> 
> 赞同：0
> 
> 时间：2012-10-29T18:24:38.607
> 
> 标签：android, xml, eclipse, android-theme

为什么我的 Android 项目（使用 Eclipse 创建）有三个`styles.xml`文件？这些文件位于以下文件夹中：

*   价值观
*   价值观-v11
*   价值观-v14

这些文件之间有什么区别？为什么会有三个值文件夹？

每个`styles.xml`文件中唯一的东西是 AppTheme 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:33:15.317

这些是不同 API 级别的值。文件夹 values 是（在这种情况下）API 级别 11< 的默认文件夹，文件夹 values-v11 用于 API 级别 >=11，values-v14 用于 API 级别 >=14。您需要这些，因为有时您需要某些 API 级别的不同值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:33:34.143

[http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)

这些文件夹使每个 API 级别使用不同的样式/主题，默认的 android 框架项目具有它们以确保 Holo 被用于支持它的 API 级别，而不是 OEM 皮肤。

# android - 使用 Handler.postDelayed 运行多个 Runnable

> ID：13127483
> 
> 赞同：0
> 
> 时间：2012-10-29T18:24:40.617
> 
> 标签：android, handler, runnable

我试图让一段代码定期运行。
这是我的代码：

```
int endTime = 52;
final double[] weights = new double[endTime];
for (int j = 0; j < endTime; j++) {
    final int k = j;
    newWeight = i.integrate(getCarbs(), getProt(), getFat(), newWeight,
            height, age, PAL, gender, 7);
    double percentChange = (newWeight - weight);
    percentChange = percentChange * 100 / weight;
    if(percentChange <-100){
        percentChange = -100;
    }
    weights[j] = percentChange;
    final DecimalFormat twoDForm = new DecimalFormat("0.00");
    final Handler h = new Handler();
    int time = 300*(j);
    Runnable r  = new Runnable() {
        public void run() {
            ((TextView) findViewById(R.id.weightGainNumbers))
                    .setText("Week:\t" + (k + 1) + "\nWeight Change:\t"
                        + twoDForm.format(weights[k]) + "%");
            animate(weights[Math.abs(k - 1)], weights[k], false);
        }
    };
    h.postDelayed(r, time);
} 
```

动画仅需 100 毫秒。但是，当我运行它时，应用程序挂起，并且只开始做它应该在 j = 15 左右做的事情。有人知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:44:56.173

您在循环的每次迭代中都在执行不必要的工作，例如在您可以简单地重用一个时创建新的 DecimalFormats。此外，您只需要一个处理程序，每个视图都已经有一个处理程序。所有这些都应该运行得更顺利。

**首先，**设置一些类变量：

```
final DecimalFormat twoDForm = new DecimalFormat("0.00");
TextView weightGainNumbers;
int weightGainIndex = 0;
final double[] weights;

Runnable r  = new Runnable() {
    public void run() {
        weightGainNumbers.setText("Week:\t" + (weightGainIndex + 1) + "\nWeight Change:\t"
                    + twoDForm.format(weights[weightGainIndex]) + "%");

        if(weightGainIndex > 0)
            animate(weights[Math.abs(weightGainIndex - 1)], weights[weightGainIndex], false);
        // This animation is a guess, but you get the idea...
        else
            animate(0, weights[weightGainIndex], false);

        weightGainIndex++;
        // Call the next animation or reset the index for next time
        if(weightGainIndex < weights.length)
            weightGainNumbers.postDelayed(r, 300);
        else
            weightGainIndex = 0;
    }
}; 
```

**接下来**`weightGainNumbers`，在`onCreate()`.

**最后，**使用这个：

```
int endTime = 52;
weights = new double[endTime];
for (int j = 0; j < endTime; j++) {
    newWeight = i.integrate(getCarbs(), getProt(), getFat(), newWeight,
            height, age, PAL, gender, 7);
    weights[j] = Math.max(percentChange * 100 / (newWeight - weight), -100);
}
weightGainNumbers.post(r); 
```

如果您有任何具体问题，请告诉我。

# asp.net - ASP.NET MVC 路由 - 带有可选参数和友好 url 的路由

> ID：13127487
> 
> 赞同：1
> 
> 时间：2012-10-29T18:24:57.887
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-routing

我有一个搜索操作方法，此时它接受 5 个可选参数作为其搜索条件。我的主页有一个快速搜索按钮，它向搜索操作方法提交 GET 请求。我一切正常，但是我的 url 是使用标准查询字符串语法 (?x=x&y=y) 生成的。

我想公开友好的 url，但我认为使用路由系统的唯一方法是添加每个可能的排列，因为所有参数都是可选的，这听起来不太优雅。

那么还有其他路线（没有双关语:)）我可以采取吗？可能的 URL 重写模块？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:51:31.727

**选项 1**：使用查询字符串。搜索页面上的友好 URL 并没有什么好处。

```
/search?q=url+routing 
```

**选项 2**：最多允许一个可选参数成为“友好”网址的一部分。任何附加参数都必须在查询字符串中传递。例如：

```
/search/query/url+routing (1 parameter)
/search/query/url+routing?tagged=asp.net (2 parameters)
/search/query/url+routing?tagged=asp.net&sort=date (3 parameters) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T21:03:18.530

如果您可以使用以下网址，则可以设置路线`http://mysite.com/search/{term-1}/{term-n}/{term-n+1}`：

```
routes.MapRoute(
    name: "SearchRoute",
    url: "search/{*terms}",
    defaults: new { controller = "MySearchController", action = "MySearchAction" }
); 
```

在您的操作中，您将接收一个字符串，该字符串将`/`与您的所有搜索词分隔。（该 URL 可能没有多大意义，但您可以使用它。）

```
public class SearchController : Controller
{
    public ActionResult SearchAction (string terms)
    {
        foreach (var term in terms.Split ('/'))
        {
            // Do something
        }
    }
} 
```

# vb.net - 使用 KeyUp 和 KeyDown Event VB .NET 调用事件

> ID：13127489
> 
> 赞同：1
> 
> 时间：2012-10-29T18:25:00.960
> 
> 标签：vb.net, keyboard

我已经使用控件的`KeyUp`和`KeyDown`事件开发了对事件的调用。

事件`KeyDown`和`KeyUp`控件被正确调用。

但是 RaiseEvent 指令不会引发事件。

代码不同部分的相同事件被正确调用。

有谁知道是否可以在一个`KeyUp`和事件中调用其他`KeyDown`事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:51:32.077

> 有谁知道是否可以在 KeyUp 和 KeyDown 事件中调用其他事件？

对的，这是可能的。

它被称为级联事件。这是一篇有趣的文章：[http ://martinfowler.com/eaaDev/EventCollaboration.html#eventcascade](http://martinfowler.com/eaaDev/EventCollaboration.html#eventcascade)

为了帮助我们更好地诊断您的问题，请提供一些代码示例。

# spreadsheetgear - 如何在 SpreadsheetGear 控件中的垂直滚动条上获取和设置值/位置

> ID：13127490
> 
> 赞同：4
> 
> 时间：2012-10-29T18:25:01.483
> 
> 标签：spreadsheetgear

我正在使用`SpreadsheetGear`控件。我希望能够获得垂直滚动条的位置，以便在刷新控件后，我可以将用户返回到他们在刷新之前查看的同一组行。

该`ScrollPositionChanged`事件运行良好，但我没有在`WorkbookView`对象或`ScrollPositionChangedEventArgs`对象中看到任何告诉我滚动条当前位置的信息。

我也没有看到任何方法可以在垂直滚动条上设置一个值以在刷新后重置它的位置。

我敢肯定我在这里很厚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T23:01:03.103

通过使用 WindowInfo 对象的 ScrollRow 属性，您可以在滚动时获取顶行的行位置。

```
int rowPosition = workbookView1.ActiveWorksheet.WindowInfo.ScrollRow; 
```

如果您希望 workbookView 返回到此位置，您可以在工作表单元格上使用 Activate() 方法。

```
workbookView1.ActiveWorksheet.Cells[rowPosition, 0].Activate(); 
```

# html - 停止文本移动html

> ID：13127493
> 
> 赞同：0
> 
> 时间：2012-10-29T18:25:16.483
> 
> 标签：html, css

我有用于重叠图像的 css 和 html 代码，它运行良好，直到我收到客户的投诉。当浏览器缩小时，重叠的文本会移动。我认为我的代码没有问题，研究证明是徒劳的。他说他希望尽快修复它，所以我向我的溢出者寻求帮助！
***CSS***

```
 p.contactInfo {
        position: absolute;
        top: 20px;
        right: 475px;
        width: 100%;
        z-index: 10;
    }
    p.contactInfo span {
        color: #D7D7D7;
        font-size:13px;
        letter-spacing: -1px;
        padding: 10px;
        float:right;
    } 
```

***HTML***

```
 <p class="contactInfo"><span>*******
                                                </span></p> 
```

***演示*** [http://jsfiddle.net/baGjv/](http://jsfiddle.net/baGjv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:46:28.900

当您使用诸如 20px 之类的设定数字时，它在屏幕上将是 20px，因为屏幕的大小不同，它会像这样......想象这个“$”是距离左侧 20px 的元素。（我正在使用左侧想象您的模板居中，此时我不能完全确定是否会这样）

```
large monitor
-----------------
  $

-----------------

small monitor
----------
  $

---------- 
```

从左边看是一样的，但如果你乱用 % 值，它会完全不同，并延伸到每台显示器。"$" 给予 20%。如果您的页面的其余部分是静态的（就像大多数是静态的）并且将与您的页面的其余部分保持一致，这将有所帮助。我并不是说`left:20%;`您需要的确切百分比，您需要更改它。

```
large monitor
-----------------
    $

-----------------

small monitor
----------
  $

---------- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:58:52.423

正如斯宾塞所提到的，问题在于您正在使用`right: 475px`您的定位。当您的客户将浏览器的大小调整为 -narrower- than`475px`时，您的项目实际上会从页面的左边缘消失，因为“`475px`从右侧”的位置现在不再位于浏览器的显示区域内。

我的猜测是您假设该页面将始终至少是`600px`宽的，即使在最小的可用浏览器上也会有人打开它。如果是这种情况，您可以纠正此问题的一种方法是将`body`标签设置为有一个`min-width`（`600px`或任何你的最小宽度）。通过这样做 - 当窗口变得太窄时，您将在浏览器中创建一个滚动条 - 但不会失去可见性。

但是，解决您的问题的可能更好的方法是*避免以这种方式使用绝对定位*。绝对定位通常最好*相*对于相对定位的元素使用。有关我所指内容的清晰解释，请参阅[本文。](http://css-tricks.com/absolute-positioning-inside-relative-positioning/ "本文")

# jquery - Flowplayer 5.1.1 视频宽度

> ID：13127497
> 
> 赞同：0
> 
> 时间：2012-10-29T18:25:29.710
> 
> 标签：jquery, html5-video, flowplayer

我已经下载并在我的网站中插入了 flowplayer 版本。5.1.1。

```
<script src="_scripts/flowplayer/flowplayer.min.js"></script>
<div class="flowplayer" data-swf="_scripts/flowplayer/flowplayer.swf" data-ratio="0.417">
   <video poster="files/poster.png">
       <source type="video/webm" src="files/video.webm"/>
       <source type="video/mp4" src="files/video.mp4"/>
       <source type="video/ogv" src="files/video.ogv"/>
   </video>
</div> 
```

播放器和视频都OK！如果我点击它，它会播放！唯一的问题是播放器比容器 div 大。

如何更改播放器宽度？我尝试使用 css 但没有结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:28:13.877

您可以在包含的 div 上指定它。

```
<div class="flowplayer" 
    data-swf="https://<?=$_SERVER['HTTP_HOST'];?>/flowplayer5/flowplayer.swf" 
    data-ratio="0.5265" 
    style="width:<?=$width;?>px;height:432px;"> 
```

# java - AppEngine BlobStore 是否支持上传的分块传输编码（状态 411：需要长度）？

> ID：13127500
> 
> 赞同：3
> 
> 时间：2012-10-29T18:25:50.517
> 
> 标签：java, google-app-engine, upload, blobstore, chunked-encoding

我很难找到关于 AppEngine 的一个非常基本的问题的文档：

BlobStore 是否支持上传的分块传输编码？

我在 Java 中使用带有 setChunkedStreamingMode 的 HttpURLConnection 对象，使用以下代码在 multipart/form-data 类型请求中上传文件来设置连接：

```
HttpURLConnection cxn = (HttpURLConnection) new URL(uploadUrl).openConnection();
cxn.setRequestMethod("POST");
cxn.setChunkedStreamingMode(9999);
cxn.setRequestProperty("Content-Type", "multipart/form-data; boundary=-");
cxn.setDoOutput(true);
cxn.connect(); 
```

开发服务器以状态 411 回答我的请求：需要长度。这是否意味着不支持分块传输模式，或者我是否错误地初始化了连接？生产服务器在这里的行为是否不同？这种行为是在生成上传 url 时指定最大上传大小的结果吗？

编辑：

如果我简单地注释掉该行`cxn.setChunkedStreamingMode(9999);`，一切正常，但我宁愿不这样做，所以我不必在发送请求之前缓冲数百 MB 的内存......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:47:33.440

以下是我对上述问题的测试结果：

1.  开发服务器不**支持**上传的分块传输编码。
2.  正如 Stuart 所指出的，生产服务器**确实支持它。**（呼）
3.  *我将报告对指定上传大小限制的任何依赖，但我怀疑它是否重要。*

不幸的是，我必须编写两个版本的代码，一个用于在开发服务器上进行测试，一个用于在生产服务器上运行，但这绝对是一个可以接受的场景。

# javascript - 将单元格设置为只读

> ID：13127501
> 
> 赞同：1
> 
> 时间：2012-10-29T18:25:52.293
> 
> 标签：javascript, jquery, jquery-plugins, handsontable

我正在使用 jquery-handsontable 创建数据网格。

如果我做

```
$("#example1grid").handsontable('setDataAtCell', 0, 0,"test")
$("#example1grid").handsontable("setCellReadOnly", 0, 0); 
```

它会更改文本，但是当我单击时，我可以对其进行编辑。为什么？

这是测试[http://jsfiddle.net/z9fYC/59/](http://jsfiddle.net/z9fYC/59/)。
无论如何，如果我想让所有列号 0 只读呢？​</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-29T19:46:24.580

它看起来确实像一个错误。根据文档，您所做的应该有效。

无论如何，要解决方法，您可以逐个单元格地定义只读行为，如下所示：

```
$("#example1grid").handsontable({
    rows: 5,
    cols: 6,
    minSpareCols: 1,
    //always keep at least 1 spare row at the right
    minSpareRows: 1,
    //always keep at least 1 spare row at the bottom
    contextMenu: true,
    cells: function(r,c, prop) {
        var cellProperties = {};
        if (r===0 && c===0) cellProperties.readOnly = true;
        return cellProperties;        
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T12:48:04.773

这确实是 Handsontable 中的一个错误。从 0.7.3 版本开始修复

# svg - SVG 缩放：在 IE9 中保持原始 .svg 高度的父容器

> ID：13127506
> 
> 赞同：1
> 
> 时间：2012-10-29T18:26:32.307
> 
> 标签：svg, image, responsive-design, scaling

```
**CSS**

.testSVG { background: gray; width: 50%; }
.testSVG img { margin: 10px; max-width: 100%; }

**HTML:** 

<div class="testSVG">
    <img src="http://www.html5rocks.com/static/demos/svgmobile_fundamentals/images/HTML5-  logo.svg" alt="html5">
</div> 
```

[SVG 缩放示例](http://jsfiddle.net/24FNE/)

在 Firefox 中，父 div（在此示例中为 .testSVG）使用缩放的 .svg 图像进行水平和垂直缩放。

然而，在 IE9 中，父 div 水平缩放，而 .svg 仍然水平和垂直缩放。

我也喜欢在 IE 中复制 Firefox 中发生的事情。有没有人有任何见解？

谢谢，Z

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T01:09:24.863

我有同样的问题，我在一个类似的问题中遵循了答案：

[在 ie9 中不遵守 img 元素比例中的 SVG](https://stackoverflow.com/questions/9777143/svg-in-img-element-proportions-not-respected-in-ie9)

基本上我从 svg 标签中删除了高度和宽度属性。

删除这些标签也恰好解决了 Safari 中引入额外间距的问题。

# meteor - 断开的流星应用程序

> ID：13127508
> 
> 赞同：8
> 
> 时间：2012-10-29T18:26:33.730
> 
> 标签：meteor, local-storage

我有兴趣使用`Meteor`将长时间（多个小时）与网络断开连接的框架创建应用程序。我相信流星将本地数据存储在 RAM 中的 mini-mongodb`js`结构中。如果用户关闭浏览器或刷新页面，所有本地更改都将丢失。如果将本地更改持久保存到磁盘（`localStorage`？？`indexedDB`），那就太好了。Meteor 有机会吗？

相关问题... Meteor 如何处理文档冲突？换句话说，如果 2 个用户编辑同一个 MongoDB JSON 文档，那么该冲突如何解决？乐观锁定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T03:45:40.150

冲突解决是“最后一位作家获胜”。

更具体地说，客户端上的每个 MongoDB 插入/更新/删除操作都映射到一个 RPC。来自给定客户端的 RPC 总是按顺序播放。来自不同客户端的 RPC 在服务器上交错，没有任何特定的顺序保证。

如果客户端在断开连接时尝试发出 RPC，这些 RPC 会排队等待客户端重新连接，然后按顺序播放到服务器。当多个客户端执行离线 RPC 时，它们最终在服务器上运行的顺序高度依赖于每个客户端重新连接的确切时间。

对于像 MongoDB 的一些离线突变`$inc`和`$addToSet`，这个模型工作得很好。但是许多常见的修饰符（例如`$set`）在长时间断开连接时表现不佳，因为突变可能会与来自其他客户端的干预更改发生冲突。

因此，构建“离线”应用程序不仅仅是持久化本地数据库。您还需要定义实现某种类型的冲突解决的 RPC。最终，我们希望有实现各种解决方案的交钥匙包。

# iphone - cocos2d中如何通过标题屏幕来移动对象

> ID：13127509
> 
> 赞同：0
> 
> 时间：2012-10-29T18:26:34.047
> 
> 标签：iphone, ios, cocos2d-iphone

我有他的代码，用于通过水平位置移动对象。

```
#define kAccelerationSpeed 10
#define kAccelerometerFrequency 200

-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{

    CGPoint pt =  thePlayer.position ;
    CGFloat accel = acceleration.x * kAccelerationSpeed;
    pt = [[CCDirector sharedDirector] convertToGL:pt];

        pt = ccp (pt.x+accel>0 , yLocationOfPlayer+accel<768 );

} 
```

在初始化语句中

```
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {
 [[UIAccelerometer sharedAccelerometer] setUpdateInterval:(1.0 / kAccelerometerFrequency)];
        [[UIAccelerometer sharedAccelerometer] setDelegate:self];
    } 
```

上面的代码有什么问题，它不起作用，当我倾斜屏幕时，它没有为“theplayer”对象做任何移动。请帮我这样做。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:05:40.513

您确定您的代表已设置为报告加速度计信息吗？您是否还在加速度计回调中分配了 thePlayer.position ？我不记得为什么，但我确实记得在回调中尝试分配，结果相当卡顿和有问题。对我来说，解决方案是有一个变量，加速度计委托调用将根据委托回调中的变量更新来修改并分配滴答脚本中 thePlayer 的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:32:28.383

你没有分配玩家精灵的位置。尝试这个：

```
NSLog(@"position before = %@", [NSValue valueWithCGPoint:thePlayer.position]);
thePlayer.position = ccp (pt.x+accel>0 , yLocationOfPlayer+accel<768 );     
NSLog(@"position after = %@", [NSValue valueWithCGPoint:thePlayer.position]); 
```

日志记录将帮助您确定 1) 委托方法是否被触发，以及 2) 位置是否符合您的预期。

# sql - 日期在不同服务器上显示不同

> ID：13127510
> 
> 赞同：4
> 
> 时间：2012-10-29T18:26:36.007
> 
> 标签：sql, oracle, oracle11g

当我在桌面上运行以下查询时

```
Select to_char(join_date, 'DD-MON-YYYY')
From students
group by to_char(join_date, 'DD-MON-YYYY'); 
```

我得到以下输出：

```
23-Oct-2012
25-Oct-2012
23-Oct-2012
23-Oct-2012
23-Oct-2012
26-Oct-2012
23-Oct-2012
24-Oct-2012
23-Oct-2012 
```

但是如果我在不同的服务器上运行它，输出结果如下：

```
23-Oct. -2012
25-Oct. -2012
23-Oct. -2012
23-Oct. -2012
23-Oct. -2012
26-Oct. -2012
23-Oct. -2012
24-Oct. -2012
23-Oct. -2012 
```

有什么想法可能导致这种情况吗？第二台服务器与我在不同的国家/地区运行，因此其区域设置可能不同。

更新：

NLS_DATE_FORMAT 在两台服务器上都是 DD-Mon-RRRR。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:05:36.777

当 oracle 从数据库中检索日期字段并将**其显示给您时，会进行隐式强制转换**。此转换的格式模式在 oracle 配置中设置。[引用 oracle 文档](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch4datetime.htm)：

> Oracle 日期值的默认日期格式源自 NLS_DATE_FORMAT 和 NLS_DATE_LANGUAGE 初始化参数

如果 NLS_DATE_FORMAT 在两台服务器上都是 DD-Mon-RRRR，**请检查 NLS_DATE_LANGUAGE**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T23:00:09.993

正如 danihp 所暗示的，差异可能取决于`NLS_LANGUAGE`设置，这可能源自更高的 NLS 参数。您可以覆盖它以获得一致的结果 - 尽管这不一定是一个好主意 - 如[全球化支持指南](http://docs.oracle.com/cd/E14072_01/server.112/e10729/ch3globenv.htm#sthref175)中所述。运行这些查询应该在两台服务器上产生一致的结果（根据您显示的数据猜测您的其中一台是法语）：

```
select to_char(join_date, 'DD-MON-YYYY', 'NLS_DATE_LANGUAGE=FRENCH')
from students ...;

select to_char(join_date, 'DD-MON-YYYY', 'NLS_DATE_LANGUAGE=ENGLISH')
from students ...; 
```

混乱的背后可能是您期望`MON`代表的内容。如[SQL 参考](http://docs.oracle.com/cd/E14072_01/server.112/e10592/sql_elements004.htm#sthref407)中所述，`MON`是“月份的缩写名称”；这意味着它不一定是三个字符的缩写。如何缩写完整的月份名称取决于 NLS 设置。

在英语中，所有月份名称都可以明确地缩写为三个字符：

```
select level as l,
    to_char(to_date(level, 'MM'), 'Month', 'NLS_DATE_LANGUAGE=ENGLISH'),
    to_char(to_date(level, 'MM'), 'Mon', 'NLS_DATE_LANGUAGE=ENGLISH')
from dual
connect by level <= 12
order by 1

         L TO_CHAR(TO_DATE(LEVEL,'MM'),'MONTH', TO_CHAR(TO_D
---------- ------------------------------------ ------------
         1 January                              Jan
         2 February                             Feb
         3 March                                Mar
         4 April                                Apr
         5 May                                  May
         6 June                                 Jun
         7 July                                 Jul
         8 August                               Aug
         9 September                            Sep
        10 October                              Oct
        11 November                             Nov
        12 December                             Dec 
```

在法语中，情况并非如此：

```
select level as l,
    to_char(to_date(level, 'MM'), 'Month', 'NLS_DATE_LANGUAGE=FRENCH'),
    to_char(to_date(level, 'MM'), 'Mon', 'NLS_DATE_LANGUAGE=FRENCH')
from dual
connect by level <= 12
order by 1;

         L TO_CHAR(TO_DATE(LEVEL,'MM'),'MONTH', TO_CHAR(TO_DATE(LEVE
---------- ------------------------------------ --------------------
         1 Janvier                              Janv.
         2 Février                              Févr.
         3 Mars                                 Mars
         4 Avril                                Avr.
         5 Mai                                  Mai
         6 Juin                                 Juin
         7 Juillet                              Juil.
         8 Août                                 Ao
         9 Septembre                            Sept.
        10 Octobre                              Oct.
        11 Novembre                             Nov.
        12 Décembre                             Déc. 
```

显然，使用三个字母的缩写会给 Juin 和 Juillet 带来困难。据推测，用句号表示缩写是一种文化现象，有些月份需要四个字符才能区分，这会将`MON`格式长度增加到五个字符。

格式模型将其保持为固定宽度可能有点令人惊讶，因此您在中间有一个空间用于较短的缩写，就像在您的原始数据中一样。我敢肯定，无论哪种方式都可以争论，而且似乎始终如一地应用。我不知道有任何方法可以自动停止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T23:06:25.503

您没有将代码错误输入为：

```
select to_char(join_date,'dd-mon.-yyyy') from students; 
```

这将给出结果：

```
23-Oct.-2012 
```

# java - 从 Java 中运行命令行操作

> ID：13127511
> 
> 赞同：6
> 
> 时间：2012-10-29T18:26:36.180
> 
> 标签：java, command-line

我构建了一个非常简单的程序来测试运行独立于 Java 的命令行操作。那就是：稍后我希望能够将此代码从使用“移动”修改为我可以在命令行中输入的任何其他命令（包括调用其他非 Java 软件）。

我确实搜索并阅读了大约两打答案，但他们都建议我正确地尝试了这个，与我的简单测试无关，或者提出了其他不起作用的解决方案（比如使用 .exec(String[]) 方法而不是 . exec(String) - 相同的结果！）。

这是我的代码：

```
import java.io.IOException;

public class RunCommand {

private static final String PATH_OUT = "C:\\Users\\me\\Desktop\\Temp\\out\\";
private static final String FILE = "sample.txt";
private static final String PATH_IN = "C:\\Users\\me\\Desktop\\Temp\\in\\";

public static void main(String[] args) {
    try {
        String command = "move "+PATH_IN+FILE+" "+PATH_OUT;
        System.out.println("Command: "+command);
        Runtime.getRuntime().exec(command);
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

这是我运行时看到的输出：

```
Command: move C:\Users\myingling\Desktop\CDS\Temp\in\sample.txt C:\Users\myingling\Desktop\CDS\Temp\out\
java.io.IOException: Cannot run program "move": CreateProcess error=2, The system cannot find the file specified
at java.lang.ProcessBuilder.start(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at java.lang.Runtime.exec(Unknown Source)
at RunCommand.main(RunCommand.java:13)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
at java.lang.ProcessImpl.create(Native Method)
at java.lang.ProcessImpl.<init>(Unknown Source)
at java.lang.ProcessImpl.start(Unknown Source)
... 5 more 
```

请注意，当我将命令复制/粘贴到命令提示符窗口时，文件会成功移动。

我错过了什么？我读过的所有其他问题似乎都表明这应该有效。

谢谢！

**编辑**现在工作，感谢大家的帮助！令人讨厌的是它隐藏的方式“移动”是cmd.exe的参数。我希望他们做到了，如果它在复制/粘贴时有效，那么当您调用 .exec() 方法时它就有效。那好吧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T18:28:39.487

“move”命令是 cmd.exe 解释器的一部分，它本身不是可执行文件。

这会起作用：

```
cmd.exe /c move file1 file2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:34:47.933

尝试这个：

```
 Runtime.getRuntime().exec("cmd.exe /c move "+PATH_IN+FILE+" "+PATH_OUT); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T18:29:28.207

在 Windows 中，与 UNIX 不同，move 不是一个单独的程序。您需要使用 move 作为参数来调用命令处理器 CMD。阅读 CMD 上的命令行帮助，您必须设置一个标志。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T18:33:56.857

`move`实际上不是一个程序，它是一个 shell 内置命令。使用类似的东西：

```
String command = PATH_TO_SYSTEM32 + "\\cmd.exe /c move \""+PATH_IN+FILE+"\" \""+PATH_OUT + "\""; 
```

好的做法是始终对外部程序使用绝对路径。（好吧，在这种情况下，好的做法是使用 Files.move 或等效的而不是依赖于平台的 shell 调用）

# jquery - 如何在 .ajax 请求中向 User-Agent 标头添加值？

> ID：13127522
> 
> 赞同：0
> 
> 时间：2012-10-29T18:27:09.127
> 
> 标签：jquery, ajax, google-chrome-extension, user-agent

我正在尝试为 Chrome 创建一个插件，在其中从多个页面检索信息，其中一些页面具有负载均衡器，并且需要特定的用户代理代码将我路由到正确的位置。

现在，我正在`.ajax()`打电话，我尝试了一些事情，例如：

```
$.ajaxSetup({
    beforeSend: function(request) {
        request.setRequestHeader("User-Agent","MyAgentCode");
    }
}); 
```

但**它不起作用**。

我也试过：

```
$.ajax({ 
    url: "http://blablabla.com/",
    dataType:'html', 
    beforeSend: function (req) {
        req.setRequestHeader('User-Agent', 'Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.83 Safari/537.1 MyAgentCode);
    },
    error: function() { alert("No data found");},
    success: parseResult
}); 
```

这也不起作用。

我只想添加一个值`User-Agent`（保持其余部分不变）。这将使我能够从正确的服务器获取正确的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T22:54:16.570

您可以使用 headers[]，这比使用 beforeSend 更容易。只需 Ctrl-F 'headers' [here](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T18:02:05.713

如果我理解正确您的问题，您可以使用 webRequest Chrome API。“使用 chrome.webRequest 模块拦截、阻止或修改正在进行的请求，并观察和分析流量。

[http://developer.chrome.com/trunk/extensions/webRequest.html](http://developer.chrome.com/trunk/extensions/webRequest.html)

有一个如何删除用户代理的示例。而不是删除，您可以使用您的值更改 requestHeader 的值。

```
 chrome.webRequest.onBeforeSendHeaders.addListener(
  function(details) {
    for (var i = 0; i < details.requestHeaders.length; ++i) {
      if (details.requestHeaders[i].name === 'User-Agent') {
        details.requestHeaders.splice(i, 1);
        break;
      }
    }
    return {requestHeaders: details.requestHeaders};
  },
  {urls: ["<all_urls>"]},
  ["blocking", "requestHeaders"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T19:38:14.177

注意事项：

*   你必须从网络服务器打开 html，而不是 file:/// 处理程序。
*   您必须确保您没有添加拼写错误，例如打开 User-Agent 字符串引号。
*   `type: "POST"`如果您想发出 GET 请求，请删除/编辑。

*   有 2 种方法来编辑标题，使用`BeforeSend`和使用`headers`. 它们都使用`$.ajax()`and`$.post()`方法。

示例 1：

```
$.post({
    url: "http://localhost:4000", 
    data: "we=1",
    headers: {"User-Agent": "user agent 1"}
    }); 
```

示例 2：

```
$.ajax({ 
    url: "http://localhost:4000",
    type: "POST",
    data: {we: "2"},
    dataType:'text', // case you wanna especify the return type
    headers: {"User-Agent": "user agent 2"}
}); 
```

使用 headers 似乎更容易，也许只是 BeforeSend 方法的一个捷径：

```
$.ajax({ 
    url: "http://localhost:4000",
    type: "POST",
    data: {we: "2"},
    dataType:'text',
    headers: {"User-Agent": "user agent 1"}
    beforeSend: function (req) {
        req.setRequestHeader('User-Agent', 'user agent changed to 2');
    }
}); 
```

如果你想检查结果......添加有点像这样：

```
error: function() { alert("No data found");},
success: function() { alert("uh yead");} 
```

但是使用 Firefox/Chrome 开发工具（f12 -> 网络选项卡）就足够了。在 zip 文件中，我包含了 PHP 服务器启动命令以及一个 index.php 文件来转储标题。

此处上传的完整工作示例文件集：[https ://files.fm/u/4x3fc8ru](https://files.fm/u/4x3fc8ru)

问候。

# hibernate - 地图上主键的注释问题

> ID：13127523
> 
> 赞同：1
> 
> 时间：2012-10-29T18:27:11.850
> 
> 标签：hibernate, jpa, map, primary-key

以下代码使用字段“Propriedade”和“doc_id”生成一个表，其中存在 PK 约束。

我想知道我可以用来指定 PK 的最合适的注释是什么？

```
 public class Documento {
        @Id
        @GeneratedValue(strategy=GenerationType.SEQUENCE)
        private long id;
        private String numero;
        private TipoDeMidia midia;
        private String nomeDoArquivo;
        @ElementCollection
        @MapKeyColumn(name="propriedade")
    @Column(name="valor")
        @CollectionTable(name="DOCINFO",joinColumns=@JoinColumn(name="doc_id"))
        private Map<String,String> informacoesDoDocumento= new HashMap<String, String>(); 
```

这是生成的SQL

```
CREATE TABLE docinfo
(
  doc_id bigint NOT NULL,
  valor character varying(255),
  propriedade character varying(255) NOT NULL,
  CONSTRAINT docinfo_pkey PRIMARY KEY (doc_id, propriedade),
  CONSTRAINT fk97c919c6e3b42d44 FOREIGN KEY (doc_id)
      REFERENCES documento (id) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
) 
```

# python - Django 查询优化 - 使用 Itertools

> ID：13127526
> 
> 赞同：0
> 
> 时间：2012-10-29T18:27:16.637
> 
> 标签：python, mysql, django, django-models

我有一个根据年级提供课程的教育网站。

1.  GradeLevel 表存储所有可能的 Grade Levels。然后我有 LessonCategories 和 LessonCurriculum 表。

2.  GradeLevel 表与课程表和类别表建立了反向关系。

3.  我遍历 GradeLevel 表中的每个等级（8 个等级），并沿途获取相应的课程和类别。

4.  完成后，我将所有收集到的课程和类别填充到一个列表中，并将其传递给我的模板。

现在，问题是 Django 至少对每个查询进行两次评估。一次用于初始请求，第二次用于我将其放入列表中。（我正在使用 itertools 来链接结果。Itertools 导致查询再次运行。）这会降低我的服务器速度到爬行的不利影响。

我的问题是，是否有人可以查看我的模型和查询，并就更好的查询方式提出建议，以避免和/或减轻这个主要的性能瓶颈。

**年级模型：**

```
class GradeLevel(models.Model):
    title = models.CharField('Grade',max_length=10, null=True, blank=True, db_index=True)
    fullname = models.CharField('Description',max_length=100, null=True, blank=True, db_index=True) 
```

**课程类别模型：**

```
class LessonCategory(models.Model):
    title = models.CharField(max_length=255, null=True, blank=True, db_index=True)
    ...
    gradelevel = models.ManyToManyField(GradeLevel, related_name='grade_cats', null=True, blank=True) 
```

**课程课程：**

```
class LessonCurriculum(models.Model):         
    title = models.CharField(max_length=255, null=True, blank=True, db_index=True)
    ...
    gradelevel = models.ManyToManyField(GradeLevel, related_name='grade_curriculum', null=True, blank=True) 
```

我的观点：

```
from itertools import chain
from operator import attrgetter

def my_view(request):
    grade_pk =  GradeLevel.objects.prefetch_related().get(title='pre-k')
    grade_pk_categories = grade_pk.grade_cats.filter(active=True,featured=True)
    grade_pk_galleries = grade_pk.grade_curriculum.filter(active=True,featured=True)

    grade_k =  GradeLevel.objects.prefetch_related().get(title='k')
    grade_k_categories = grade_k.grade_cats.filter(active=True,featured=True)
    grade_k_galleries = grade_k.grade_curriculum.filter(active=True,featured=True)

    grade_1 =  GradeLevel.objects.prefetch_related().get(title='1')
    grade_1_categories = grade_1.grade_cats.filter(active=True,featured=True)
    grade_1_galleries = grade_1.grade_curriculum.filter(active=True,featured=True)

    grade_2 =  GradeLevel.objects.prefetch_related().get(title='2')
    grade_2_categories = grade_2.grade_cats.filter(active=True,featured=True)
    grade_2_galleries = grade_2.grade_curriculum.filter(active=True,featured=True)

    grade_3 =  GradeLevel.objects.prefetch_related().get(title='3')
    grade_3_categories = grade_3.grade_cats.filter(active=True,featured=True)
    grade_3_galleries = grade_3.grade_curriculum.filter(active=True,featured=True)

    grade_4 =  GradeLevel.objects.prefetch_related().get(title='4')
    grade_4_categories = grade_4.grade_cats.filter(active=True,featured=True)
    grade_4_galleries = grade_4.grade_curriculum.filter(active=True,featured=True)

    grade_5 =  GradeLevel.objects.prefetch_related().get(title='5')
    grade_5_categories = grade_5.grade_cats.filter(active=True,featured=True)
    grade_5_galleries = grade_5.grade_curriculum.filter(active=True,featured=True)

    grade_6 =  GradeLevel.objects.prefetch_related().get(title='6')
    grade_6_categories = grade_6.grade_cats.filter(active=True,featured=True)
    grade_6_galleries = grade_6.grade_curriculum.filter(active=True,featured=True)

    grade_7 =  GradeLevel.objects.prefetch_related().get(title='7')
    grade_7_categories = grade_7.grade_cats.filter(active=True,featured=True)
    grade_7_galleries = grade_7.grade_curriculum.filter(active=True,featured=True)

    grade_8 =  GradeLevel.objects.prefetch_related().get(title='8')
    grade_8_categories = grade_8.grade_curriculum.filter(active=True,featured=True)
    grade_8_galleries = grade_8.grade_curriculum.filter(active=True,featured=True)

    gallery_list = list(set(sorted(chain(grade_pk_categories,grade_pk_galleries,grade_k_categories,grade_k_galleries,grade_1_categories,grade_1_galleries,grade_2_categories,grade_2_galleries,grade_3_categories,grade_3_galleries,grade_4_categories,grade_4_galleries,grade_5_categories,grade_5_galleries,grade_6_categories,grade_6_galleries,grade_7_categories,grade_7_galleries,grade_8_categories,grade_8_galleries), key=attrgetter('display_order')))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:07:21.333

我会进一步优化@NathanVillaescusa的答案

```
grade_titles = ['pre-k', 'k', '1', '2', '3', '4', '5', '6', '7', '8']

# Turn list into list of Q items
queries = [models.Q(title=grade_title) for grade_title in grade_titles]

# Take one item of the list
query = queries.pop()

# OR the Q objects with the ones remaining in the list
for item in queries:
    query |= item

grades = GradeLevel.objects.prefetch_related().filter(query)
# grades should have everything you need and operation is more CPU
# and less DB bound now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:38:16.883

您要使用的是[chain.from_iterable](http://docs.python.org/2/library/itertools.html#itertools.chain.from_iterable)。这将防止查询多次运行。

```
gallery_list = tuple(chain.from_iterable(grade_pk_categories,grade_pk_galleries,grade_k_categories,grade_k_galleries,grade_1_categories,grade_1_galleries,grade_2_categories,grade_2_galleries,grade_3_categories,grade_3_galleries,grade_4_categories,grade_4_galleries,grade_5_categories,grade_5_galleries,grade_6_categories,grade_6_galleries,grade_7_categories,grade_7_galleries,grade_8_categories,grade_8_galleries)) 
```

您还希望在通过 a 运行项目之后进行排序`set`，而不是之前。

```
gallery_list = list(sorted(frozenset(gallery_list), key=attrgetter('display_order'))) 
```

我会重新考虑您将如何获取所有这些数据。当您可能用一个或两个查询替换所有数据时，您正在为每个年级进行两次查询。

至少您可以使用 a`for loop`来减少您拥有的代码量：

```
grade_titles = ['pre-k', 'k', '1', '2', '3', '4', '5', '6', '7', '8']
gallery_list = []
for grade_title in grade_titles:
    grade = GradeLevel.objects.prefetch_related().get(title=grade_title)
    grade_categories = grade_pk.grade_cats.filter(active=True,featured=True)
    grade_galleries = grade_pk.grade_curriculum.filter(active=True,featured=True)
    gallery_list.extend(grade_categories)
    gallery_list.extend(grade_galleries)
gallery_list = list(sorted(frozenset(gallery_list), key=attrgetter('display_order'))) 
```

# java - 连接拒绝使用 RMI 托管

> ID：13127527
> 
> 赞同：1
> 
> 时间：2012-10-29T18:27:27.333
> 
> 标签：java

首先是我得到的例外：http: [//i.imgur.com/dE5Ou.png](http://i.imgur.com/dE5Ou.png)

只是为了提供一点背景知识，我正在尝试编写简单的 RMI 程序，该程序使用 java 的 RMI 连接两台远程计算机（客户端/服务器）。我已经启动并运行了我的服务器程序，但是当我运行我的客户端程序时，我得到了上面链接中显示的异常。既然我告诉它连接到 192.168.0.104，为什么它说“连接拒绝托管：127.0.1.1”？？？

**客户**

```
public class Client 
{
public static void main(String[] args)
{
ServerInterface server;     
Registry registry;

try
    {
    registry = LocateRegistry.getRegistry("192.168.0.104", (new Integer(1099)).intValue());         

    server = (ServerInterface)Naming.lookup("//192.168.0.104/ServerTest");

    String serverString = server.getAndSetMessage("Connecting");

    System.out.println("Reply from the server is: " + serverString);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    System.exit(1);
    }

}
} 
```

**服务器**

```
public class Server extends UnicastRemoteObject implements ServerInterface 
{

static String hostName = "192.168.0.104";
String name;

public Server(String name) throws RemoteException
{
    super();
    this.name = name;

}

public String getAndSetMessage(String message) throws RemoteException
{
    return("My name is " + name + " Thanks for message " + message);
}

public static void main(String args[]) 
{
    try
    {
        String objectname = "ServerTest";

        Server theServer = new Server(objectname);
        Naming.rebind("//"+hostName+"/"+objectname,theServer);

        System.out.println("//"+hostName+"/"+objectname);
        System.out.println("I am Registered");

    }
    catch (Exception ex)
    {
        System.out.println(ex);
        System.exit(1);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:56:53.030

您可以尝试将以下代码添加到服务器：

```
System.setProperty("java.rmi.server.hostname", "192.168.0.104"); 
```

# c# - 基于按钮单击将行复制并插入到gridview中

> ID：13127528
> 
> 赞同：0
> 
> 时间：2012-10-29T18:27:37.107
> 
> 标签：c#, gridview

我有一个从 SQL Server 存储过程获取数据的 GridView。网格中有项目模板以允许数据输入。我在每一行的末尾都有一个带有命令按钮的列。

我要完成的工作：如果用户单击按钮，则会插入一个新行，该行与前一行重复。场景：在进行数据输入时，一个项目有多个 bin 位置。通过复制该行，最终用户可以输入第二个 bin 位置，这两个记录都被转储到数据库中。

我一直在环顾四周，试图从我的研究中过滤掉*删除重复项。*这可以在不将 GridView 放入数据表并重新绑定的情况下完成吗？有没有更简单的方法来做服务器端？是否需要在页脚中添加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:38:17.070

不幸的是，您不能使用相同的行或相同的单元格，因为 DataGridView 只采用唯一的行和单元格。您必须获取该行的值并在新行中使用它们。我写了一点代码来做到这一点

```
string[] cells = (from c in datagridview.Rows[e.RowIndex].Cells.Cast<DataGridViewCell>()
                                    select c.Value.ToString()).ToArray();

DataGridViewRow row = new DataGridViewRow();
row.CreateCells(datagridview, cells);
datagridview.Rows.Add(row); 
```

我希望我理解你的问题是正确的。这只是让你开始的东西。我很确定它不会完全解决您的问题，但它是一些东西。

# ruby-on-rails - 如何配置 Ruby on Rails 应用程序以使用佛教日历？

> ID：13127529
> 
> 赞同：5
> 
> 时间：2012-10-29T18:27:41.337
> 
> 标签：ruby-on-rails, ruby, internationalization, rails-i18n

在佛教时代的日历中已经是2555年。使 Date.current 显示 2555 而不是 2012 的最简单方法是什么？

更新

我找到了这个特定任务的解决方案。只需使用标准导轨 i18n 即可轻松实现。

猫配置/语言环境/th.rb

```
{
  th: {
    date: {
      formats: {
        default: lambda { |date, _| "%d.%m.#{date.year + 543}" }
      }
    }
  }
} 
```

然后只需使用 I18n.l 方法：

```
ruby-1.9.3-p194 :032 > I18n.l(Date.current)
 => "30.10.2555" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:18:28.897

这可能是您正在寻找的。

[https://github.com/ai/r18n](https://github.com/ai/r18n)

```
R18n.set('th')
R18n.l Time.now, :full #=> "1 พฤศจิกายน, 2554 12:00" 
```

# asp.net - 从子页面访问 asp.net 母版页上的控制

> ID：13127531
> 
> 赞同：0
> 
> 时间：2012-10-29T18:27:46.053
> 
> 标签：asp.net

我想从子页面访问 asp.net 母版页上的跨度，所以我在该母版页上创建了一个公共属性-->

```
 public partial class Ui_MasterPage_UI : System.Web.UI.MasterPage
    {
        public int tax = 0;

        public string notification
        {
            set
            {
                (this.FindControl("notification") as HtmlAnchor).InnerText = value.ToString();
            }
        }
       ------------------//some code
    } 
```

现在想从子页面访问它以将一些文本设置到该 htmlanchor 标记中，

所以我写了一些脚本-->

**子页面**

```
public partial class Ui_ProductDetails : System.Web.UI.Page
{
protected void ListView_ProductDetails_itemcommand(object sender, ListViewCommandEventArgs e)
    {
        Master.notification = "some text";            ////////showing error
 ------------------//some code       
    }
------------------//some code       
} 
```

但是得到语法错误我认为上面的代码有问题，，，，，所以请检查一下......还有其他方法吗？thnku

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:34:59.133

您需要将 Page.Master 属性转换为母版页的类型。

```
((Ui_MasterPage_UI)Page.Master).Notification = "some text"; 
```

# javascript - 如何在javascript中获取堆栈跟踪回到触发事件的位置

> ID：13127532
> 
> 赞同：2
> 
> 时间：2012-10-29T18:27:49.930
> 
> 标签：javascript

在查看 javascript 中触发的某些事件的侦听器的堆栈跟踪时，它从事件的侦听器开始。

有没有办法找到触发事件的位置，即让跟踪到侦听器后面触发事件的位置/在其之上？似乎没有，但我想仔细检查一下。

# deployment - 暂存环境是否有规范定义？

> ID：13127534
> 
> 赞同：21
> 
> 时间：2012-10-29T18:27:55.507
> 
> 标签：deployment, staging

据我了解，登台服务器的（合法）目的是*测试部署**过程***，而不是代码的接受度或功能。但是，我*几乎*从来没有找到有这种理解的人，最常见的替代方案是登台服务器是 UAT 服务器的同义词。谷歌搜索答案，我发现暂存服务器定义为

*   UAT 服务器
*   质量检查服务器
*   集成服务器
*   内容服务器

我发现的最糟糕的定义很可能是在维基百科上，由于那里内容的短暂性，我将在这里引用它，而且阅读这个问题的人可能会修复维基百科并使我给它的任何链接变成一个反例而不是我正在谈论的例子：

> 登台站点，在网站设计中，是一个用于在其投入生产之前组装、测试和审查其新版本的网站。此阶段紧随开发阶段之后。软件生命周期的暂存阶段通常在反映生产环境中使用的硬件的硬件上进行测试。暂存站点通常与开发站点不同，并提供与开发或生产环境分开的 QA 区域。
> 
> 通常在将更新版本的软件部署到生产环境之前，更新已经在暂存环境中进行了测试。登台服务器将类似于客户端可以进行用户验收测试活动的生产环境。在将系统部署到实时服务器（即生产环境）之前，应通过暂存服务器/站点的测试。

事实上，（据我所知）正确使用该术语的唯一例子是 StackOverflow。比如[这个问题的主要答案](https://stackoverflow.com/questions/2391651/what-is-the-main-purpose-and-sense-to-have-staging-server-the-same-as-production)，还有[这个答案](https://stackoverflow.com/a/948182/241142)。

我想向我的同事证明（在那些知道的人中）分期与 UAT 和 QA 等不同。是否有一些规范的定义，例如在首次定义该术语的书中？显然，我发现的所有这些二手资料似乎都是常用用法的反映，但我认为常用用法主要是由那些更热衷于抛出流行语而不是仔细区分和精确使用单词的人塑造的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T07:23:33.473

这本关于[持续交付](http://continuousdelivery.com/)的书已成为该主题的*事实上的*规范文本。这与您对分期的理解一致。

> 暂存环境是与生产环境相同的测试环境（第 110 页）

它们确实意味着对部署过程的测试，因为书中有一个图 10.1，在 QA 和客户签字之后和运营签字之前进行登台。

# byte - 打包结构时处理字节对齐和字节序的好方法是什么？

> ID：13127535
> 
> 赞同：2
> 
> 时间：2012-10-29T18:27:58.003
> 
> 标签：byte, endianness, memory-alignment

我目前的设计涉及嵌入式系统和 PC 之间的通信，我总是被结构设计所困扰。

这两个系统有不同的字节顺序，我需要处理。但是，我发现我不能只为每 4 个字节做一个简单的字节顺序切换来解决问题。事实证明，这取决于结构。

例如，像这样的结构：

```
{
    uint16_t a;
    uint32_t b;
} 
```

将导致 a 和 b 之间的填充。最终，字节序切换必须特定于 a 和 b，因为存在填充字节。但它看起来很难看，因为每次更改结构内容时都需要更改字节序切换逻辑。

当填充出现时，在结构中排列元素的好策略是什么？我们是否应该尝试重新排列元素以使结构末尾只有填充字节？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:54:11.033

恐怕你需要做一些平台中立的序列化，因为不同的架构有不同的对齐要求。我认为没有一种**安全且通用**的方法来执行诸如抓取一块内存并将其发送到另一个架构，您只需将其放置在某个地址并从中读取（正确的数据）。只需一个接一个地转换和发送元素 - 您可以将值推送到缓冲区中，该缓冲区不会有任何填充，并且您会确切地知道在哪里。另外，您可以决定哪个部分将进行转换（通常 PC 有更多资源来执行此操作）。作为奖励，您可以校验和/签署通信以捕获错误/篡改。

顺便说一句，afaik 虽然编译器保持变量的顺序不变，但理论上它可以在它们之间添加一些额外的填充（例如出于性能原因），所以它不仅仅是与架构相关的东西。

# mysql - MySQL Workbench "fetching..." -- 无法浏览数据库

> ID：13127538
> 
> 赞同：8
> 
> 时间：2012-10-29T18:28:09.493
> 
> 标签：mysql, macos, xampp

我最近遇到了很多问题，基本上是自从我上次升级 XAMPP for OSX (v1.7.3) 和/或我的 MySQL GUI 工具以来。使用[MySQL Workbench](http://www.mysql.com/downloads/workbench/) (v5.2.44)，我可以很好地连接到在 XAMPP 中运行的数据库，但尝试浏览任何数据库，在表/视图/等下它只显示“Fetching...”，从不显示任何其他内容。我实际上可以查询表，这很有趣，但我实际上无法以任何有意义的方式管理数据库。

谷歌搜索，[其他人](http://engin.bzzzt.biz/2011/04/06/mysql-workbench-fetching-problem-solved/)报告说在命令行上运行很幸运`mysql_upgrade`，运行良好但没有解决我的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T18:41:57.410

以下命令在 Windows 上对我有用：

C:\Program Files\MySQL\MySQL Server 5.5\bin>mysql_upgrade.exe -u root -p --force

如果未设置 root 密码，您可能需要在运行上述命令之前执行此操作：

mysql> 为 'root'@'localhost' 设置密码 = PASSWORD('something');

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:28:09.493

上面的链接`mysql_upgrade`并没有直接解决我的问题，但它确实让我检查了我的 mysql 错误文件，最终让我找到了解决方案。我注意到错误文件中有几行这样的行（位于`[xampp root]/var/mysql/[dbname].err`）：

```
/Applications/XAMPP/xamppfiles/sbin/mysqld: Can't create/write to file 
    '/var/folders/y2/37h93r_931sdfpcr7vnc83380000gn/T/ibigNFFi' (Errcode: 13) 
```

这使我进入了 MySQL 文档中的[这个页面](http://dev.mysql.com/doc/refman/5.0/en/cannot-create.html)，该页面指出您应该为 MySQL 显式设置临时文件夹。我仔细检查了我的配置文件 ( `[xampp root]/etc/my.cnf`) 并看到了这个，看起来不错：

```
[mysqld]
tmpdir = /Applications/XAMPP/xamppfiles/temp/ 
```

但是，回顾错误日志，我也注意到了这一点：

```
Warning: World-writable config file '/Applications/XAMPP/xamppfiles/etc/my.cnf' is ignored 
```

呃。配置文件被忽略了，所以配置的临时文件夹没有被使用（我不知道为什么该文件是世界可写的......）。我编辑了`my.cnf`文件 777 的权限，并简单地删除了“Everyone|write”权限（现在是 775 / -rwxrwxr-x），重新加载了所有内容，现在一切正常。

对于最终修复而言，这不是一个非常直观的症状，因此希望这对其他人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-23T16:38:42.100

如果您使用 MAMP 而不是 XAMP，则上述解决方案将不适合您。打开 MAMP，然后在顶部菜单上转到工具->升级 MySQL 数据库。现在打开 Mysql Workbench 它应该正确列出所有表

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-22T11:25:01.837

如果您使用的是 linux 发行版，请运行以下命令：

```
mysql_upgrade -u root -p 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T14:41:14.227

我将具有所有权限的 Authenticated Users 设置为 var/folders/y2/ 对我来说工作正常；）

在此过程之前，我删除了经过身份验证的用户权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-04T03:58:17.183

关闭并重新打开工作台。它对我有用。

停止服务器。

关闭工作台窗口

启动服务器

打开工作台窗口

为我工作.. windows 64bit

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-12T21:56:20.167

我在 MySQL 8、win10 上遇到了这个错误。我注意到这一行[错误在哪里](https://i.stack.imgur.com/mBTiR.png)

导致另一个目录试图找到 my.ini 文件。寻找它，在那个目录中找到它，改变它。打开工作台，点击每一个灰色的项目，然后把它变成黑色，就是这样！！现在没事了！！

# model-view-controller - WinJS：MVVM、MVP 或 MVC 更适合它吗？

> ID：13127540
> 
> 赞同：2
> 
> 时间：2012-10-29T18:28:13.323
> 
> 标签：model-view-controller, mvvm, windows-8, mvp, winjs

我正在使用 Javascript (WinJS) 和 HTML 构建一个简单的 Windows 8 LOB 应用程序。在应用程序中，我不希望有任何第三方依赖项。在决定应用程序结构时，我正在讨论哪种模式最适合技术和 WinJS 框架。

我对使用这些模式的主要优点/缺点的初步想法如下。

**MVVM**

![MVVM](../Images/1efd826850e6fb7aaddcd238544cffd7.png)

*   优点：ViewModel 中业务逻辑的清晰分离，使 BL 的（单元）测试变得容易
*   缺点：WinJS 只有开箱即用的一次性和单向数据绑定，没有双向数据绑定和命令（绑定到事件）。这些必须以自定义方式实现（如果想要在视图上坚持主要是声明性语法，这可能会变得很棘手）。

**MVP**

![MVP](../Images/b1293c7d4c154137737d90fd71da0d36.png)

*   优点：presenter 仍然包含所有业务逻辑以及视图逻辑，并且可以自行（单元）测试。这种方法不需要数据绑定。
*   缺点：View 和 Presenter 代码都将比 MVVM 更冗长，因为它们现在必须在状态更改时相互通知。View 需要将事件转发给 Presenter，Presenter 必须在其状态发生变化时更新 View。

**MVC**

![MVC](../Images/ec2c05188863651c851786b0f04a33d4.png)

*   优点：视图非常轻量级，这种方法也不需要数据绑定。
*   缺点：控制器必须注册和处理输入事件（例如键盘和鼠标事件）以及包含业务逻辑。与 MVVM 中的 ViewModel 和 MVP 中的 Presenter 相比，这个类将是最臃肿且更难（单元）测试的。

基于这些，我会选择 MVP 来构建这个应用程序。你同意还是反对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T22:08:49.020

我会发布一些东西，因为我喜欢你解释不同设计模式和良好图形的方式（顺便说一句，你有这些的来源吗？你应该包括它）

MVVM 的缺点是双向更新必须以自定义方式实现。但是，对于 MVP 范式，您似乎无论如何都必须以自定义方式执行此操作。如果您使用 MVP，您是否根本不使用任何数据绑定？我想说，使用 MVVM 并找出解决 WinJS 问题的方法。我不熟悉 WinJS，但似乎您可以将其包装在自定义对象/属性中并触发更改的事件以以某种方式处理数据绑定。

# database - 尝试获取池连接失败。java.sql.SQLException：协议冲突

> ID：13127541
> 
> 赞同：2
> 
> 时间：2012-10-29T18:28:13.417
> 
> 标签：database, oracle, jdbc, multiple-databases

我正在管理一个基于 Web 的应用程序，该应用程序设置为从各种数据库中提取数据；SQL、Oracle、大型机等

我获得了访问 Oracle DB 的凭据，并且正在通过 JDBC 通过基于 Web 的应用服务器建立连接。JDBC 连接要求我为连接提供数据库 URL 和 JDBC 驱动程序。我还构建了一条 SQL 语句，仅将我需要的信息从 Oracle 数据库中提取到我的基于 Web 的应用程序中。

这种设置一切顺利，直到最近。我现在在尝试建立从基于 Web 的应用程序到 Oracle DB 的连接时收到以下错误：

```
Failure trying to get a pooled connection to 
[jdbc:oracle:thin:@<SERVER NAME>:1521:cqdb]java.sql.SQLException: Protocol violation 
```

与我一起工作的 Oracle DBA 在帮助我解决此问题方面没有多大帮助。没有他的帮助，我什至不知道从哪里开始进行故障排除。

关于从哪里开始的任何建议？如果需要，我可以提供更多信息。

*附加信息。这就是我的 STDOUT 文件中与错误相关的内容。我也可以继续挖掘：

```
07:31:08,565  WARN QuartzScheduler_Worker-5 WEB-APP.api.Aggregator:979 - Exception during aggregation. Reason: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation
WEB-APP.tools.GeneralException: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation
    at WEB-APP.api.Aggregator.aggregateAccounts(Aggregator.java:1897)
at WEB-APP.api.Aggregator.execute(Aggregator.java:1222)
at WEB-APP.task.ResourceIdentityScan.execute(ResourceIdentityScan.java:76)
at WEB-APP.api.TaskManager.runSync(TaskManager.java:643)
at WEB-APP.scheduler.JobAdapter.execute(JobAdapter.java:116)
at org.quartz.core.JobRunShell.run(JobRunShell.java:202)
at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:529)
Caused by: WEB-APP.connector.ConnectorException: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation
at WEB-APP.connector.JDBCConnector.getConnection(JDBCConnector.java:833)
at WEB-APP.connector.JDBCConnector.iterateObjects(JDBCConnector.java:649)
at WEB-APP.connector.JDBCConnector.iterateObjects(JDBCConnector.java:90)
at WEB-APP.connector.ConnectorProxy.iterateObjects(ConnectorProxy.java:109)
at WEB-APP.api.Aggregator.iterateObjects(Aggregator.java:2673)
at WEB-APP.api.Aggregator.aggregateAccounts(Aggregator.java:1818)
... 6 more
Caused by: WEB-APP.tools.GeneralException: Failure trying to get a pooled connection to [jdbc:oracle:thin:@SERVER-NAME:1521:cqdb]java.sql.SQLException: Protocol violation
    at WEB-APP.tools.JdbcUtil.getPooledConnection(JdbcUtil.java:1178)
    at WEB-APP.tools.JdbcUtil.getConnection(JdbcUtil.java:823)
at WEB-APP.connector.JDBCConnector.getConnection(JDBCConnector.java:830)
... 11 more
07:33:03,983 ERROR http-8080-2 WEB-APP.server.Authenticator:229 - WEB-APP.connector.AuthenticationFailedException: [LDAP: error code 49 - 80090308: LdapErr: DSID-0C090334, comment: AcceptSecurityContext error, data 52e, vece 
```

**附加信息：Oracle JDBC 驱动程序版本 14，JRE 版本 1.6.0_23-b05。我没有 Oracle DB 版本。等待我们的 Oracle DBA 的回复。

***附加信息：此问题已解决。我们的 Oracle DBA 做了一些事情来纠正连接问题。他还没有解释他做了什么。谢谢你的帮助。很抱歉没有提前为您提供所需的所有信息。

# javascript - 仅当存在查询字符串参数时才初始化媒体播放器

> ID：13127545
> 
> 赞同：0
> 
> 时间：2012-10-29T18:28:34.067
> 
> 标签：javascript, jquery, silverlight, sharepoint-2010

我有一个 SharePoint 页面，其中包含指向视频剪辑的超链接。单击该链接将在覆盖窗口中播放视频（使用 Silverlight）。如果 Silverlight 运行时不存在，它会显示“安装 Silverlight”提示。当使用`IsDlg=1`查询字符串调用页面时，超链接被隐藏（位于左侧导航栏中），并且仅显示主要内容页面。但我仍然收到“安装 Silverlight”提示。我想在出现时摆脱提示`IsDlg=1`。

以下是页面上的相关 javascript 代码。我对其进行了一些修改，以仅在`IsDlg=1`不存在时初始化媒体播放器。但它没有按预期工作。有任何想法吗？

```
// original code
 $(function () {
        mediaPlayer.createOverlayPlayer();
        mediaPlayer.attachToMediaLinks(document.getElementById('videoList'), ['wmv', 'avi', 'mp4']);
    });

// modified code
    $(function () {
        var field = 'IsDlg';
        var url = window.location.href;
        if (url.indexOf('?' + field + '=') != -1) {

        } else {
            mediaPlayer.createOverlayPlayer();
            mediaPlayer.attachToMediaLinks(document.getElementById('videoList'), ['wmv', 'avi', 'mp4']);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:02:59.063

您的代码*应该可以*工作，因此您可能需要调试其他可能的问题。

```
$(document).ready(function () {     // add explicit wait until dom ready
  console.log(window.location.search);   // just to check that the parameter is present
  if(window.location.search.indexOf("IsDlg=1") < 0){   // testing the query string part only
    mediaPlayer.createOverlayPlayer();
    mediaPlayer.attachToMediaLinks(document.getElementById('videoList'), ['wmv', 'avi', 'mp4']);
   }
}); 
```

试试看，看看你会怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:13:37.640

只要存在嵌入 Silverlight 控件的 HTML，它就会显示“安装 Silverlight”对话框。如果您不想显示对话框，则必须更改 HTML 源代码。您可以添加 JavaScript 代码以动态添加 HTML，以便仅在必要时显示。该答案将取决于您当前如何嵌入 Silverlight 控件。

编辑：您可以尝试这样的代码：

```
$(function () {
    if (window.location.search.indexOf('IsDlg=1') === -1) {
        $.getScript('/_layouts/mediaplayer.js', function () {
            mediaPlayer.createOverlayPlayer();
            mediaPlayer.attachToMediaLinks(document.getElementById('videoList'), ['wmv', 'avi', 'mp4']);
        });
    }
}); 
```

# javascript - 在jQuery中使用slidetoggle

> ID：13127548
> 
> 赞同：0
> 
> 时间：2012-10-29T18:28:37.603
> 
> 标签：javascript, jquery, html

当我尝试在 jquery 中使用 slidetoggle 属性时遇到了一些问题。我想要完成的是：

*   我有一个带有动态数量的子 div 的父 div。
*   当页面加载时，第一个 div 被切换（打开）。
*   我想当我单击其中一个子 div 时，我单击的那个应该打开，而其他任何打开的 div 都应该关闭。

我试过这个：

```
 $i++;
   $("#items"+ $i).click(function(){
            $("#items'.$i.'-submenu").slideToggle('slow', function() {
                 if ( $("#item'.$i.'s-submenu").is(":visible")) {
                      $("#items'.$i.'").css("border-right","none");
            }
            else
            {
                $("#items'.$i.'").css("border-style","solid solid solid solid");
                $("#items'.$i.'").css("border-right-width","1px");
            }
            });

            return false;
        }); 
```

后期编辑：

HTML 看起来像：

```
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
<div class="item">Click here </div>
<div class="content">There it goes the hidden content</div>
 ..................... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:58:31.787

> ***使用您的 HTML 更新***
> 
> 新的 jQuery

```
$(".item").click(function(e) {
    $(this).next(".content").slideToggle().siblings(".content").each(function(i) {
        if ($(this).is(":visible")) $(this).slideToggle();
    });
}); 
```

## [新的 jsFiddle 在这里](http://jsfiddle.net/SpYk3/jcMUA/5/)

* * *

你可以只使用[jQueryUI 手风琴](http://jqueryui.com/accordion/)，但是如果你想自己做，这并不难。

# [在这里查看 jsFiddle](http://jsfiddle.net/SpYk3/jcMUA)

代码如下：

> 基本 HTML 布局

```
<div class="item">
    <p class="clickable">Click Here</p>
    <div class="content">
        I'm open!
        <br />
        I'm open!
        <br />
        I'm open!
    </div>
</div>
<hr />
<div class="item">
    <p class="clickable">Click Here</p>
    <div class="content">
        I'm open!
        <br />
        I'm open!
        <br />
        I'm open!
    </div>
</div>
<hr />
<div class="item">
    <p class="clickable">Click Here</p>
    <div class="content">
        I'm open!
        <br />
        I'm open!
        <br />
        I'm open!
    </div>
</div>
<hr />
<div class="item">
    <p class="clickable">Click Here</p>
    <div class="content">
        I'm open!
        <br />
        I'm open!
        <br />
        I'm open!
    </div>
</div>
<hr />
<div class="item">
    <p class="clickable">Click Here</p>
    <div class="content">
        I'm open!
        <br />
        I'm open!
        <br />
        I'm open!
    </div>
</div>​ 
```

> 一个小 CSS

```
.content { display: none; }
.clickable { cursor: pointer; } 
```

> 最后一些 jQuery

```
$(".item").click(function(e) {
    $(this).siblings().each(function(i) {
        if ($(this).children(".content").is(":visible")) $(this).children(".content").slideToggle();
    });
    $(this).children(".content").slideToggle();
});​ 
```

​</p>

# com - 如何在 SSIS 包中使用 COM 引用？

> ID：13127549
> 
> 赞同：4
> 
> 时间：2012-10-29T18:28:37.940
> 
> 标签：com, ssis, gac

我正在尝试使用 SSIS 脚本任务中的`Microsoft Shell Controls And Automation`COM 对象库 ( *C:\Windows\System32\shell32.dll* ) 来操作 .zip 档案。

不幸的是，虽然我已经成功添加了相关的参考并且脚本任务编译正常。我正在使用 VB.NET，这是值得的。一旦我尝试创建在库中定义的任何对象，我就会收到以下运行时错误：

> 错误：存档文件中的 0x1：System.Reflection.TargetInvocationException：调用目标已引发异常。---> System.IO.FileNotFoundException：无法加载文件或程序集“Interop.Shell32，版本=1.0.0.0，文化=中性，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。文件名：ST_a2650b7f39504eaa8c80e37a6736d957.vbproj.ScriptMain.Main() 处的“Interop.Shell32，版本=1.0.0.0，文化=中性，PublicKeyToken=null”

我以为 Interop DLL 都会为我处理好——有人知道我错过了哪一步吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:44:53.067

SSIS 需要向 GAC 注册所有 .dll 引用，您是正确的。

关于将此 dll 安装到 GAC 中，您有不同的选择：

1.  将 .dll 拖放到**%windir%\assembly\**文件夹中。

2.  使用您正在考虑使用的**gacutil.exe**：关于使用 gacutil 安装到 GAC，这里有很多有用的信息：[**Global_Assembly_Cache**](http://en.wikipedia.org/wiki/Global_Assembly_Cache)。基本上，如果您安装了 .NET 框架（您使用的是 VB.NET，所以没有问题），您的 Microsoft.NET 文件夹中将有一个 gacutil.exe。

3.  （我通常在所有其他方法都失败时使用）在 Visual Studio 中创建一个 Windows MSI 项目，它会自动为您完成所有这些工作，*这里有有用的信息*：[**如何使用 MSI 在 GAC 中安装程序集**](http://forums.asp.net/t/1496141.aspx/1)

如果您在 GAC 中安装该 .dll 并且仍然遇到问题，则另一种选择是实际创建一个单独的 Visual Studio 项目，其中包含用于操作所需 zip 文件的逻辑构建它并使用**执行进程任务**从 SSIS 调用其 exe . 您可以传递 SSIS 包中指定的参数。不是很优雅，但如果您热衷于使用 SSIS，它可以完成工作。

* * *

### 更新：

这个问题中的解决方案解决了[SSIS Script Task COMException / FileNotFoundException error](https://stackoverflow.com/questions/12965210/ssis-script-task-comexception-filenotfoundexception-error?lq=1)的问题。问题在于添加 dll 的签名引用，这个答案为在 SSIS 脚本任务中添加 COM 引用提供了一个很好的分步解决方法。

# c# - 需要帮助在 GUI 中设置线程/后台工作人员

> ID：13127552
> 
> 赞同：0
> 
> 时间：2012-10-29T18:28:58.230
> 
> 标签：c#, multithreading, user-interface

我在 Visual Studio 2010 中使用 C# 和 Winforms

我有一个程序，我试图通过串行端口读取输出并将其打印到屏幕上。它最初是作为一个控制台程序开始的，但现在已经发展到我们希望将输出放在表单上的字段中。我有代码可以解析出我正在寻找的输出的串行端口写入和工作，我只需将 Console.WriteLine 更改为 label.text = "";，基本上。我已将侦听串行端口的函数合并到 GUI 代码中，因此所有内容都在同一个文件中。

不过，我对如何让函数写入标签感到困惑。它是静态的，所以我不能只说'label.text ='。我尝试在要使用的函数内创建一个新的表单对象，这允许我访问表单上的控件，但不会更新我在运行时看到的表单（我猜是因为我创建了表单的新实例而不是访问现有实例？）

我还需要让串行侦听器与 GUI 同时运行，因此 GUI 标签将更新为接近实时运行该函数所获得的结果，因此我尝试将其设置为线程化，GUI 是由 main() 启动的一个线程，而串行侦听器是另一个线程，当我单击按钮启动它时启动它。但是，我遇到了同样的问题，无法访问串行侦听器线程中的标签，因为它必须是静态的才能使用 system.threading 进行初始化。

我在想也许我需要为串行侦听器使用后台工作人员，但我对这些的经验绝对为零。后台工作人员能否实时更新 GUI 上的标签？

我不能发布特定的代码，但继承人的一般想法：

Main() 启动 GUIthread

GUI 具有启动串行侦听器的按钮 OnClick 按钮启动 ListenerThread ListenerThread 输出到控制台，希望输出到表单标签

无法访问 GUI.Label，因为侦听器是静态的，无需线程化 在侦听器中创建新的 GUI 实例允许我调用该实例的控件，但它们不会在运行时更新 GUI

确保标签是公开的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:03:33.017

这`BackgroundWorker`门课基本上就是为此而生的。

只需让该`DoWork`方法完成您的实际工作，并确保`ReportProgess`在工作时根据需要调用该方法。您可以将任何数据作为 a `string`（或其他任何数据，如果您愿意）传递，然后在`ProgressChanged`事件处理程序中使用该值，表单可以处理该值来更新其 UI。

请注意，`BackgroundWorker`将自动确保`ProgressChanged`和`RunWorkerCompleted`事件在 UI 线程中运行，因此您无需为此烦恼。

这是一个示例工人：

```
public class MyWorker//TODO give better name
{
    public void DoWork(BackgroundWorker worker)//TODO give better name
    {
        for (int i = 0; i < 100; i++)
        {
            Thread.Sleep(1000);//to mimic real work
            worker.ReportProgress(0, i.ToString());
        }
    }
} 
```

这是配置后台工作人员的示例。在这里，我使用 lambdas 是因为能够关闭变量很方便（即在每个匿名方法中使用变量），但是如果您愿意，可以将每个事件处理程序重构为方法。

```
private void button1_Click(object sender, EventArgs e)
{
    var bgw = new BackgroundWorker();
    MyWorker worker = new MyWorker();

    bgw.WorkerReportsProgress = true;
    bgw.DoWork += (s, args) => { worker.DoWork(bgw); };
    bgw.ProgressChanged += (s, data) =>
    {
        label1.Text = data.UserState.ToString();
    };
    bgw.RunWorkerCompleted += (s, args) =>
    {
        label1.Text = "All Done!";
    };

    bgw.RunWorkerAsync();//actually start the worker
} 
```

请注意，表单中的控件都不是公共的，它们都不是静态的，并且我没有在类之外传递对我的表单的任何引用。`Form`每个人都负责更新自己的控件被认为是最好的形式。您不应该允许其他任何人直接访问它们。与其允许其他工作人员类直接访问标签或修改其文本，工作人员只是简单地告诉表单，“嘿，我有一些数据，你可以根据这些值相应地更新自己。 " 然后是负责更新自身的表单。事件是您用来允许这些工作人员或其他类型的子元素（例如您创建的其他表单）通知“父”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:48:31.033

我认为您可以使用后台工作人员，它们非常易于使用。

为了使用 BackgroundWorker，您必须至少实现两个事件：

```
backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) 
```

在那里你读了你的输入。它被触发调用 backgroundWorker1.RunWorkerAsync(...)

```
backgroundWorker1_ProgressChanged(....) 
```

在那里你更新你的标签。也许您必须创建一个委托来更新它。

您还可以实现：

```
backgroundWorker1_RunWorkerCompleted(....) 
```

让你知道它什么时候停止...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:46:58.567

要写入任何 Windows 控件，您必须在 UI 线程上。如果您有一个在不同线程上运行的串行侦听器，那么您需要在更改窗口控件之前切换线程。BeginInvoke 可以很方便， http: [//msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)。

我要做的是向串行侦听器添加一个 Action，每当侦听器想要显示某些内容时就会调用它。然后这个 Action 会调用 BeginInvoke。

就像是：

```
static class SerialListner
{
    public Action<string> SomethingToDisplay;

    void GotSomethingToDisplay(string s)
    {
        SomethingToDisplay(s);
} 
```

然后在你的窗体中的某个地方

```
SerialListern.SomethingToDisplay = (s) => 
   label.BeginInvoke((Action) () => label.Text = s); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T19:18:37.213

继续您所说的静态侦听器方法并且它曾经是一个控制台应用程序，我认为一个相对较小的修改可能如下：

```
class Program
{
    static void Main(string[] args)
    {
        // Create a main window GUI
        Form1 form1 = new Form1();

        // Create a thread to listen concurrently to the GUI thread
        Thread listenerThread = new Thread(new ParameterizedThreadStart(Listener));
        listenerThread.IsBackground = true;
        listenerThread.Start(form1);

        // Run the form
        System.Windows.Forms.Application.Run(form1);
    }

    static void Listener(object formObject)
    {
        Form1 form = (Form1)formObject;

        // Do whatever we need to do
        while (true)
        {
            Thread.Sleep(1000);
            form.AddLineToTextBox("Hello");
        }
    }
} 
```

在这种情况下，`Form1`显然是表单类，并且`Listener`是监听方法。这里的关键是我将表单对象作为参数传递给 Listen 方法（通过 Thread.Start），以便侦听器可以访问 GUI 的非静态成员。请注意，我已将 Form1.AddLineToTextBox 定义为：

```
public void AddLineToTextBox(string line)
{
    if (textBox1.InvokeRequired)
        textBox1.Invoke(new Action(() => { textBox1.Text += line + Environment.NewLine; }));
    else
        textBox1.Text += line + Environment.NewLine;
} 
```

请特别注意，由于现在该`Listener`方法在单独的线程中运行，因此您需要使用`Invoke`GUI 控件上的方法进行更改。我在这里使用了一个 lambda 表达式，但是如果你的目标是 .net 的早期版本，你可以很容易地使用一个完整的方法。请注意，我的 textBox1 是一个`TextBox`设置`Multiline`为 true 并`ReadOnly`设置为 false 的（类似于标签）。

另一种可能需要更多工作但可能更优雅的架构是执行相反的依赖关系：您使用对 Listener*对象*的引用创建表单。侦听器随后将引发 GUI 订阅的事件，以更新其显示。

# html - 如何在没有 javascript 的情况下隐藏列表

> ID：13127554
> 
> 赞同：2
> 
> 时间：2012-10-29T18:29:04.063
> 
> 标签：html, wordpress

我有这段代码，我希望默认情况下折叠列表。[这](http://www.cssportal.com/css3-preview/demo/css-menu-ex1.html)就是它现在所做的。

```
<!DOCTYPE html>
<head>
   <title>menu mockup</title>
   <style type="text/css">
      .show {display: none; }
      .hide:focus + .show {display: inline; }
      .hide:focus { display: none; }
      .hide:focus ~ #list { display:none; }
      @media print { .hide, .show { display: none; } }
   </style>
</head>
<body>
   <p>Here's a list</p>
      <div>
         <a href="#" class="hide">[hide]</a>
         <a href="#" class="show">[show]</a>
         <ol id="list">
            <li>item 1</li>
            <li>item 2</li>
            <li>item 3</li>
         </ol>
      </div>
   <p>How about that?</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:43:32.337

为了在纯 CSS 中工作，需要对 HTML 进行更改（因为 CSS 只能针对出现在 DOM 中较晚的元素（作为后来的兄弟姐妹，或后代，或这两者的组合）而不是它们所在的元素重新设置样式。因此，HTML 现在是：

```
<p>Here's a list</p>
<div id="top">
    <ol id="list">
        <li>item 1</li>
        <li>item 2</li>
        <li>item 3</li>
    </ol>
    <a href="#top" class="hide">[hide]</a>
    <a href="#list" class="show">[show]</a>
</div>
<p>How about that?</p>​ 
```

另请注意，`div`现在有一个`id`以便允许*隐藏*列表（同样，仅使用 CSS 和基本 HTML）。

CSS 有点复杂，但通过以下方式解释`/* comments in the CSS itself */`：

```
.show,
.hide {
    /* allows for the links to be positioned 'ahead' of the list
       whose appearance they control */
    position: absolute;
    top: 0.1em;
    /* allows for an assigned width, height, etc... */
    display: inline-block;
    width: 5em;
    height: 2em;
    line-height: 2em;
    text-align: center;
}

.hide {
    left: 0;
}

.show {
    /* this is why we have an assigned width */
    left: 5.1em;
}

#list {
    /* hides on page-load */
    display: none;
}

#list:target {
    /* when clicking the 'show' link the #list is targeted
       and is shown */
    display: block;
}

#list:target ~ .show {
    /* reduces the opacity of the 'show' link, when
       the list is already shown */
    opacity: 0.3;
}

#list:target ~ .hide {
    /* when the list is shown, the 'hide' link is visible */
    opacity: 1;
}

#top {
    /* allows the links to be positioned visually ahead of,
       and relative to, the menu */
    position: relative;
    /* slightly greater than the defined height of
       the link elements */
    padding-top: 2.2em;
}

#top .hide,
#top:target  .hide {
    /* hides the 'hide' link when the list is, itself, hidden */
    opacity: 0.3;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/78QBU/)。

稍作修改（添加了另一个元素来包装链接）版本，以便更轻松地定位它们（​​而不是在设置`left`位置之前手动计算每个链接的宽度）：

```
<p>Here's a list</p>
<div id="top">
    <ol id="list">
        <li>item 1</li>
        <li>item 2</li>
        <li>item 3</li>
    </ol>
    <!-- could use a div, it doesn't matter -->
    <span id="controls">
        <a href="#top" class="hide">[hide]</a>
        <a href="#list" class="show">[show]</a>
    </span>
</div>
<p>How about that?</p>​ 
```

使用 CSS：

```
#controls {
    position: absolute;
    top: 0.1em;
    left: 0;
    height: 2em;
    line-height: 2em;
}

.show,
.hide {
    display: inline-block;
    width: 5em;
    text-align: center;
}

#list {
    display: none;
}

#top {
    position: relative;
    padding-top: 2.2em;
}

#list:target {
    display: block;
}

#list:target ~ #controls .hide {
    opacity: 1;
}

#list:target ~ #controls .show {
    opacity: 0.3;
}

#top #controls .hide {
    opacity: 0.3;
}
#top:target #controls .hide {
    opacity: 0.3;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/78QBU/1/)。

或者，改为使用[`visibility: hidden`/`visibility: visible;`](http://jsfiddle.net/davidThomas/78QBU/2/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-09T17:25:00.560

此 html 代码默认折叠列表

```
<!DOCTYPE html>
<head>
   <title>menu mockup</title>
   <style type="text/css">
      .show {display: inline; text-decoration: none;}
      .hide {display: none; text-decoration: none;}
      #list {display: none;}
      .show:focus + .hide {display: inline;}
      .hide:focus + #list { display:none;}
      .show:focus ~ #list { display:inline;}
      .show:focus { display:none;}

   </style>
</head>
<body>
   <p>Here's a list</p>
      <div>

         <a href="#" class="show">&#x25BC</a>
         <a href="#" class="hide">&#x25B2</a>
         <ol id="list">
            <li>item 1</li>
            <li>item 2</li>
            <li>item 3</li>
         </ol>

      </div>
  </body>
</html> 
```

# php - 让 PHP 等待 Matlab 脚本完成执行

> ID：13127555
> 
> 赞同：0
> 
> 时间：2012-10-29T18:29:08.653
> 
> 标签：php, matlab

> **可能重复：**
> [php exec 命令（或类似命令）不等待结果](https://stackoverflow.com/questions/3819398/php-exec-command-or-similar-to-not-wait-for-result)
> [exec() 等待 PHP 中的响应](https://stackoverflow.com/questions/7093510/exec-waiting-for-a-response-in-php)

我有一个调用和运行 Matlab 脚本的 php 脚本。Matlab 脚本的结果是一个 .png 图像，然后我想将其加载到 php 中并发送到网页。我拥有的php代码是：

```
$matlabExe = '"C:\\Program Files\\MATLAB\\R2012a\\bin\\matlab.exe"';
$mFile = "'C:\\processSatData.m'";
$combine = '"run(' . $mFile . ');"';
$command = $matlabExe . ' -nodisplay -nosplash -nodesktop -r ' . $combine;

passthru($command);

$im = file_get_contents('C:\\habitat.png');
header('Content-type:image/png');
echo $im; 
```

但是，似乎在发送“passthru”命令后，php 并没有等待 Matlab 脚本完成运行。因此，如果图像文件在运行 php 代码之前不存在，那么我会收到一条错误消息。

有没有办法让 php 代码在尝试加载图像文件之前等待 Matlab 脚本完成运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:07:46.467

`passthru`不是这里的主要问题..但我想一旦您收到命令的响应，图像不会立即写入，而是由第三个进程写入

`file_get_contents`在这种情况下也可能会失败，因为 .. 图像可能不会被写入一次或在写入过程中，这可能导致文件锁定 .. 在任何情况下，您都需要确保在发送输出之前拥有有效的图像；

```
set_time_limit(0);
$timeout = 30; // sec
$output = 'C:\\habitat.png';
$matlabExe = '"C:\\Program Files\\MATLAB\\R2012a\\bin\\matlab.exe"';
$mFile = "'C:\\processSatData.m'";
$combine = '"run(' . $mFile . ');"';
$command = $matlabExe . ' -nodisplay -nosplash -nodesktop -r ' . $combine;

try {
    if (! @unlink($output) && is_file($output))
        throw new Exception("Unable to remove old file");

    passthru($command);

    $start = time();
    while ( true ) {
        // Check if file is readable
        if (is_file($output) && is_readable($output)) {
            $img = @imagecreatefrompng($output);
            // Check if Math Lab is has finished writing to image
            if ($img !== false) {
                header('Content-type:image/png');
                imagepng($img);
                break;
            }
        }

        // Check Timeout
        if ((time() - $start) > $timeout) {
            throw new Exception("Timeout Reached");
            break;
        }
    }
} catch ( Exception $e ) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:45:04.823

我相信如果你改变`passthru`它`exec`会按预期工作。你也可以试试这个：

```
$matlabExe = '"C:\\Program Files\\MATLAB\\R2012a\\bin\\matlab.exe"';
$mFile = "'C:\\processSatData.m'";
$combine = '"run(' . $mFile . ');"';
$command = $matlabExe . ' -nodisplay -nosplash -nodesktop -r ' . $combine;

passthru($command);

// once a second, check for the file, up to 10 seconds
for ($i = 0; $i < 10; $i++) { 
    sleep(1);

    if (false !== ($im = @file_get_contents('C:\\habitat.png'))) {
        header('Content-type:image/png');
        echo $im;
        break;
    }

} 
```

# ios - 当我在 Xcode 中将按钮彼此非常靠近时出现错误

> ID：13127556
> 
> 赞同：0
> 
> 时间：2012-10-29T18:29:14.367
> 
> 标签：ios, xcode, button, location

在 Mainstoryboard（我不确定这是否也适用于早期版本）中，我想将两个按钮彼此非常靠近，并用一两个像素将它们分开。Mainstoryboard 允许这样做，但是当我在模拟器上运行它时，它会将一个按钮部分放在另一个按钮之上，即使它们应该是分开的。我认为这可能与双击按钮时出现在按钮周围的白色边框有关，但我找不到任何方法来更改此边框。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:16:53.070

所以问题是由于我使用的是 iPhone 4 模拟器和一个应该与 iPhone 5 一起使用的主故事板。所以它把按钮挤在一起并改变位置以适应较小的屏幕。我通过将模拟器更改为 4 英寸视网膜显示器来永久修复它。

# hibernate - 如何在 Hibernate (3.2) 中设置双向关系？

> ID：13127561
> 
> 赞同：0
> 
> 时间：2012-10-29T18:29:31.040
> 
> 标签：hibernate, bidirectional-relation

我在 Hibernate 中设置双向关系时遇到问题（v 3.2.1.ga - 现在无法升级）。我有一个对象 TrainingSession，它包含许多 TrainingLink 对象。所以我有

```
@Entity
@Table(name = "cb_pd_training_session",
    uniqueConstraints = {@UniqueConstraint(columnNames={"ORDER_NUMBER"})}
)
public class TrainingSession {
...    
    @OneToMany(cascade = CascadeType.ALL, mappedBy = "trainingSession")
    private Set<TrainingLink> links;
    …
    public void addTrainingLink(final TrainingLink link)
    {
        if (this.links == null)
        {
            this.links = new HashSet<TrainingLink>();
        }
        link.setTrainingSessionId(this);
        this.links.add(link);
    } 
```

和子实体……</p>

```
@Entity
@Table(name = "cb_training_link",
    uniqueConstraints = {@UniqueConstraint(columnNames={"LINK"})}
)
public class TrainingLink {
    …
    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "TRAINING_SESSION_ID")
    @NotNull
    private TrainingSession trainingSession; 
```

但是当我尝试创建一个父对象，添加一个子实体并保存时，我得到了一个错误。我还需要做什么才能正确设置它？

```
org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:249)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:235)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:139)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java   298)
    at org.hibernate.event.def.DefaultAutoFlushEventListener.onAutoFlush(DefaultAutoFlushEventListener.java:41)
    at org.hibernate.impl.SessionImpl.autoFlushIfRequired(SessionImpl.java:969)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1562)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:283)
    at org.hibernate.impl.CriteriaImpl.uniqueResult(CriteriaImpl.java:305)
    at org.mainco.subco.client.dao.myproject.AbstractHibernateDAO.findByUniqueConstraint(AbstractHibernateDAO.java:63)
    at org.mainco.subco.client.dao.myproject.TrainingSessionDAOImpl.findByOrderNumber(TrainingSessionDAOImpl.java:18)
    at org.mainco.subco.dao.TrainingSessionDAOTest.testSaveTrainingSessionTrainerAndLink(TrainingSessionDAOTest.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.sql.BatchUpdateException: Cannot add or update a child row: a foreign key constraint fails (`myproject`.`cb_training_link`, CONSTRAINT `FK1_CB_TRAINING_LINK` FOREIGN KEY (`TRAINING_SESSION_ID`) REFERENCES `CB_TRAINING_SESSION` (`ID`) ON DELETE CASCADE)
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:2024)
    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1449)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242)
    ... 36 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot add or update a child row: a foreign key constraint fails (`myproject`.`cb_training_link`, CONSTRAINT `FK1_CB_TRAINING_LINK` FOREIGN KEY (`TRAINING_SESSION_ID`) REFERENCES `CB_TRAINING_SESSION` (`ID`) ON DELETE CASCADE)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:407)
    at com.mysql.jdbc.Util.getInstance(Util.java:382)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1039)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3603)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3535)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1989)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2150)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2626)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2119)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2415)
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1976)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:49:03.630

原来问题是当我设置我的底层 MySQL 表（使用 v 5.5）时，我为一个不存在的表创建了一个外键。奇怪的是，当我最初创建表时 MySQL 没有警告我，但是哦，好吧。

# objective-c - 如何将 WSAssetPickerController 与 Appcelerator 集成

> ID：13127562
> 
> 赞同：1
> 
> 时间：2012-10-29T18:29:33.370
> 
> 标签：objective-c, ios, xcode, titanium, appcelerator

由于没有简单的方法在 Appcelerator 中添加多图像选择，我想将这个项目：WSAssetPickerController - [https://github.com/w5mith/WSAssetPickerController](https://github.com/w5mith/WSAssetPickerController)合并到我的 Appcelerator 项目中。

我能够在 XCode/ObjC 中创建一个简单的自定义模块，并从 Appcelerator 调用它，但我不确定如何调用具有诸如 WSAssetPickerController 之类的 UI 的代码。任何提示将不胜感激。

这是我现在正在工作的一些代码。这几乎是 ObjC 实现类中包含的样板 Appcelerator 自定义模块内容： [https ://gist.github.com/3976969](https://gist.github.com/3976969)

然后在我的 Appclerator 项目中，我像这样加载这个模块：

```
// in app.js
var myModule = require('com.example.test');
Ti.API.info("--->module loaded is ---> "+myModule);

// in testing.js
function createFoo() {          
   myModule.sayHello();             
} 
```

因此，有了这个，我就可以在 ObjC 中创建一个自定义模块，将它加载到 Appcelerator 并在其上调用一个方法。

我现在想要开源模块 WSAssetPickerController - 但是，这比我的 sayHello() 方法要复杂得多，因为它包含需要从 Appcelerator 加载和显示的用户界面视图。文档说要将“src”目录中的所有代码（我已经完成）包含到我的 ObjC 项目中，然后使用这样的代码来加载它：

```
WSAssetPickerController *controller = [[WSAssetPickerController alloc] initWithDelegate:self];
[self presentViewController:controller animated:YES completion:NULL]; 
```

但是，这对我不起作用。在 XCode 中，我在第一行收到编译器警告：“将 'ComExampleTestModule *' 发送到不兼容类型 'id 的参数

更新：经过一些更改后，我现在拥有：我将 ComExampleTestModule.h 中的 @interface 行修改为：

```
@interface ComExampleTestModule : TiModule <WSAssetPickerControllerDelegate> 
```

我添加了这个导入语句：

```
#import "WSAssetPicker/WSAssetPicker.h" 
```

但我仍然在我的 .m 文件中收到编译器警告，如下所示：“找不到实例方法'-dismissViewControllerAnimated:completion'（返回类型默认为'id'......。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:57:26.587

到目前为止你写了什么？你能把它贴在某个地方吗？？

也看看我在我的回购中的一些代码......它可能会让你开始

[http://blog.clearlyinnovative.com/post/27531529814/titanium-appcelerator-quickie-cardio-integration](http://blog.clearlyinnovative.com/post/27531529814/titanium-appcelerator-quickie-cardio-integration)

# powershell - 使用 PowerShell 将输出通过管道传输到剪贴板

> ID：13127578
> 
> 赞同：23
> 
> 时间：2012-10-29T18:30:46.360
> 
> 标签：powershell, clipboard

# **编辑：2020 年 10 月 23 日**

请参阅[postanote 的答案](https://stackoverflow.com/a/64473408/288393)。

# **编辑：2015 年 5 月 14 日**

3年后，我想我会分享我的`ClipboardModule`（我希望我被允许）：

```
Add-Type -AssemblyName System.Windows.Forms

Function Get-Clipboard {
    param([switch]$SplitLines)

    $text = [Windows.Forms.Clipboard]::GetText();

    if ($SplitLines) {
        $xs = $text -split [Environment]::NewLine
        if ($xs.Length -gt 1 -and -not($xs[-1])) {
            $xs[0..($xs.Length - 2)]
        } else {
            $xs
        }
    } else {
        $text
    }
}

function Set-Clipboard {
    $in = @($input)

    $out = 
        if ($in.Length -eq 1 -and $in[0] -is [string]) { $in[0] }
        else { $in | Out-String }

    if ($out) {
        [Windows.Forms.Clipboard]::SetText($out);
    } else {
        # input is nothing, therefore clear the clipboard
        [Windows.Forms.Clipboard]::Clear();
    }
}

function GetSet-Clipboard {
    param([switch]$SplitLines, [Parameter(ValueFromPipeLine=$true)]$ObjectSet)

    if ($input) {
        $ObjectSet = $input;
    }

    if ($ObjectSet) {
        $ObjectSet | Set-Clipboard
    } else {
        Get-Clipboard -SplitLines:$SplitLines
    }
}

Set-Alias cb GetSet-Clipboard

Export-ModuleMember -Function *-* -Alias * 
```

我通常使用`cb`别名（for `GetSet-Clipboard`），因为它有两种方式，即可以获取或设置剪贴板：

```
cb                # gets the contents of the clipboard
"john" | cb       # sets the clipboard to "john"
cb -s             # gets the clipboard and splits it into lines 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-02-05T17:39:02.780

如果您有 WMF 5.0，PowerShell 包含两个新的 cmdlet：

获取剪贴板和设置剪贴板

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T18:30:46.360

**编辑：请查看问题而不是解决方案。**

~~这是我的解决方案：~~

```
Add-Type -AssemblyName 'System.Windows.Forms'

filter Set-Clipboard {
    begin {
        $cp = @()
    }
    process {
        $_ | Tee-Object -Variable 'cp0'
        $cp = $cp + @($cp0);
    }
    end {
        $str = ($cp | Out-String).ToString();

        [Windows.Forms.Clipboard]::Clear();

        if ( ($str -ne $null) -and ($str -ne '') ) {
            [Windows.Forms.Clipboard]::SetText( $str )
        }

        $cp = @()
    }
} 
```

这收集了一个数组中的所有对象，`$cp`. 我们使用[Tee-Object](http://technet.microsoft.com/en-us/library/hh849937.aspx)将当前元素 重定向`$_`到下一个进程并将其存储在数组中`$cp`。最后，一旦该过程完成，我们将设置剪贴板的文本。

我以下列方式使用它：

```
dir -Recurse | Set-Clipboard | Select 'Name' 
```

它似乎有效。

要改用函数：

```
function Set-Clipboard-Func {
    $str = $input | Out-String

    [Windows.Forms.Clipboard]::Clear();

    if ( ($str -ne $null) -and ($str -ne '') ) {
        [Windows.Forms.Clipboard]::SetText( $str )
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-05T07:05:25.637

**Powershell 6.1 版**删除了这个命令行开关，因此它不再是内置的。

相反，您需要安装[ClipboardText 包](https://www.powershellgallery.com/packages/ClipboardText)。在 Powershell 的控制台类型中：

```
Install-Module -Name ClipboardText 
```

然后你可以使用：

```
 Set-ClipboardText "hello clipboard"
 Get-ClipboardText 
```

这是Powershell 的维护者重定向您使用 ClipboardText 包[的 github 问题。](https://github.com/PowerShell/PowerShell/issues/3618)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-22T00:07:42.740

PSv7 中的本机剪辑 cmdlet

```
$Host
# Results
<#
Name             : ConsoleHost
Version          : 7.0.3
InstanceId       : 54be9bfd-799d-4213-a13a-22403c1d9ed8
UI               : System.Management.Automation.Internal.Host.InternalHostUserInterface
CurrentCulture   : en-US
CurrentUICulture : en-US
PrivateData      : Microsoft.PowerShell.ConsoleHost+ConsoleColorProxy
DebuggerEnabled  : True
IsRunspacePushed : False
Runspace         : System.Management.Automation.Runspaces.LocalRunspace
#>

Get-Command -Name '*clip*'|Format-Table -a
# Results
<#
CommandType Name                         Version        Source
----------- ----                         -------        ------
Function    Get-Clipboard                1.3.6          PowerShellCookbook
Function    Set-Clipboard                1.3.6          PowerShellCookbook
Function    Start-ClipboardHistoryViewer 0.0            ModuleLibrary
Cmdlet      Get-Clipboard                7.0.0.0        Microsoft.PowerShell.Management
Cmdlet      Set-Clipboard                7.0.0.0        Microsoft.PowerShell.Management
Cmdlet      Set-UDClipboard              2.9.0          UniversalDashboard
Application clip.exe                     10.0.19041.1   C:\WINDOWS\system32\clip.exe
Application ClipRenew.exe                10.0.19041.1   C:\WINDOWS\system32\ClipRenew.exe
Application ClipUp.exe                   10.0.19041.488 C:\WINDOWS\system32\ClipUp.exe
Application rdpclip.exe                  10.0.19041.423 C:\WINDOWS\system32\rdpclip.exe
#> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-29T18:01:53.597

```
get-clipboard 
```

按顺序输入文本时跳过换行符。我用

```
[System.Windows.Forms.Clipboard]::GetText() 
```

像之前一样。

# html - iframe 无法获取内容

> ID：13127580
> 
> 赞同：1
> 
> 时间：2012-10-29T18:30:48.027
> 
> 标签：html, iframe

我把这个放在我的网页上：

```
<iframe src="http://www.google.com"></iframe> 
```

结果`<iframe>`是空白。查看 Google Chrome 开发者控制台，我看到了错误

```
GET http://www.google.com/ undefined (undefined) 
```

这个错误是什么意思？

# ruby-on-rails - Rails 重构：自定义方法和重视图

> ID：13127582
> 
> 赞同：0
> 
> 时间：2012-10-29T18:30:49.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, refactoring

我的代码当前工作得很好，但我可以说它可以做得更好。所以我想我会要求一些意见。

对于给定的费用，用户可以提交或取消提交。这会在费用审批表中创建一条记录，并将审批状态设置为 1 或 0。

当有人取消提交费用，然后又重新提交时，复杂性就来了，因为记录已经存在，我不得不输入处理它的逻辑，以及一个非常丑陋的视图。

我的直觉告诉我，我可以在模型和/或控制器中做一些事情来让这个更干净。

所以我的模型看起来像这样：

```
class Expense < ActiveRecord::Base
  attr_accessible :amount, :expense_date, :description

  has_one :expense_approval
end 
```

和

```
class ExpenseApproval < ActiveRecord::Base
  attr_accessible :approval_date, :approval_status, :approver_id, :expense_id

  belongs_to :expense, foreign_key: :expense_id

  validates_uniqueness_of :expense_id
end 
```

和控制器

```
def submit_expense
  @expense_list = Expense.all  
  expense = Expense.find(params[:id])

  if expense.expense_approval
    approval = ExpenseApproval.find(expense.expense_approval.id)
    approval.approval_status = 1
  else
    approval = ExpenseApproval.new(approval_status: "1", expense_id: expense.id)
  end

  if approval.save
    #flash[:success] = "You have added an submission."
    redirect_to expense_approvals_path
  else
    flash[:error] = "Error"    
    redirect_to expense_approvals_path
  end
end

def un_submit_expense
  @expense_list = Expense.all  
  @expense = ExpenseApproval.find(params[:id])
  @expense.approval_status = 0

  if @expense.save
    #flash[:success] = "You have un submitted."
    redirect_to expense_approvals_path
  else
    flash[:error] = "Unsubmit Error"    
    redirect_to expense_approvals_path
  end
end 
```

并查看

```
 <% if expense_item.expense_approval %>
              <%#=expense_item.expense_approval.approval_status%>

              <% if expense_item.expense_approval.approval_status == 1 %>
                        <%= link_to raw('<i class="icon-arrow-down icon-white"> </i>'), 
                              un_submit_expense_path(expense_item.expense_approval[:id]),
                              class: "btn btn-mini btn-warning", 
                              :confirm => "Are you sure you want to un submit this expense?" %>
              <% end %>

              <% if expense_item.expense_approval.approval_status == 0 %>
                        <%= link_to raw('<i class="icon-arrow-up icon-white"> </i>'), 
                              submit_expense_path(expense_item[:id]),
                              class: "btn btn-mini btn-info", 
                              :confirm => "Are you sure you want to submit this expense?" %>
              <% end %>

            <% else %>

             <%= link_to raw('<i class="icon-arrow-up icon-white"> </i>'), 
                              submit_expense_path(expense_item[:id]),
                              class: "btn btn-mini btn-info", 
                              :confirm => "Are you sure you want to submit this expense?" %>

            <% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:45:26.523

[您可以使用装饰器](http://railscasts.com/episodes/286-draper)清理视图。

此外，您在那里有一些代码重复，例如：

```
if @expense.save
  flash[:success] = "You have un submitted."
  redirect_to expense_approvals_path
else
  flash[:error] = "Unsubmit Error"    
  redirect_to expense_approvals_path
end 
```

与以下内容几乎相同：

```
if @expense.save
  flash[:success] = "You have un submitted."
else
  flash[:error] = "Unsubmit Error"    
end
redirect_to expense_approvals_path 
```

# jquery - 我们能否将返回的数据分配给通过 ajax 函数获取的变量？

> ID：13127584
> 
> 赞同：-3
> 
> 时间：2012-10-29T18:31:05.100
> 
> 标签：jquery

以下是我正在使用的功能。

我们可以这样分配吗？

```
<script language="javascript" type="text/javascript">
    function validation(){

    var flag

    $.ajax({
      url: 'ajax/test.php',
      success: function(data) {

       flag =data;

      }
    });

    alert(flag);

    }

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:32:10.947

分配没有问题，但是您在异步 ajax 调用返回之前调用 alert ，因此您的 alerting `undefined`.

你必须这样做：

```
$.ajax({
  url: 'ajax/test.php',
  success: function(data) {
     alert(data);
  }
}); 
```

如果您需要在另一个函数中使用标志，则必须确保在完成 ajax 调用之前不调用此函数。你可以这样做：

```
var flag;
function otherFunction() {
    alert(flag);
}  
$.ajax({
  url: 'ajax/test.php',
  success: function(data) {
     flag = data;
     otherFunction();
  }
}); 
```

在 javascript 中你需要了解的最基本的事情之一是你**必须**适应它的**异步**特性。

您可以通过提供回调来做到这一点

*   事件处理程序
*   所有资源获取函数的成功或错误处理函数

请注意，这比管理自己的主循环或许多线程要简单得多......

# c# - 字符串文字的正确方法

> ID：13127585
> 
> 赞同：1
> 
> 时间：2012-10-29T18:31:07.797
> 
> 标签：c#, .net, string

我的应用程序中有一些非常长的字符串文字。以如下方法定义它们是否不同：

```
public string DoSomething()
{
    string LongString = "...";
    // ...
} 
```

或作为`const`lass 中的一个字段，例如：

```
private const string LongString = "...";

public string DoSomething()
{
    // ...
} 
```

该`DoSomething()`方法会被多次调用，`LongString`如果我在方法内部定义它，是每次创建和销毁，还是编译器负责？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:37:24.927

字符串文字[由](http://msdn.microsoft.com/en-us/library/system.string.intern.aspx)CLR 执行。实际上意味着它们只会被创建一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:33:56.827

在您的第一个示例中，它仅在函数中可用。在您的第二个中，它将可用于同一类中的其他功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:37:19.040

两者没有区别，字符串不会在方法中多次创建和销毁。.NET 使用[string interning](http://en.wikipedia.org/wiki/String_interning)，因此不同的字符串文字只定义一次。

# perl - 从文件中复制特定字符串后的文本并在 perl 中附加到另一个

> ID：13127586
> 
> 赞同：0
> 
> 时间：2012-10-29T18:31:33.443
> 
> 标签：perl, copy, append

我想从一个文件中提取所需的信息并将其附加到另一个文件中。第一个文件包含一些行作为没有特定模式的标题，并且仅以“END OF HEADER”字符串结尾。我编写了以下代码来查找标题末尾的匹配行：

```
$find = "END OF HEADER";                     
open FILEHANDLE, $filename_path;      
while (<FILEHANDLE>) {

     my $line = $_;                                                
     if ($line =~ /$find/) {

         #??? what shall I do here???                                                                                      
     }
} 
```

，但我不知道如何获取文件的其余部分并将其附加到另一个文件中。

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:53:19.127

我想如果文件的内容不是很大，你可以将整个文件加载到一个标量中，然后用“END OF HEADER”分割它，然后在新文件中打印分割右侧的输出（附加)

```
open READHANDLE, 'readfile.txt' or die $!;
my $content = do { local $/; <READHANDLE> };
close READHANDLE;

my (undef,$restcontent) = split(/END OF HEADER/,$content);

open WRITEHANDLE, '>>writefile.txt' or die $!;
print WRITEHANDLE $restcontent;
close WRITEHANDLE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:45:49.977

此代码将从命令行获取文件名，打印`END OF HEADER`从第一个文件开始的所有文件，然后是第二个文件的所有行。请注意，输出将发送到 STDOUT，因此您必须重定向输出，如下所示：

```
perl program.pl headfile.txt mainfile.txt > newfile.txt 
```

**Update** Now 修改为打印所有第一个文件*之后*的行`END OF HEADER`，然后是所有第二个文件

```
use strict;
use warnings;

my ($header_file, $main_file) = @ARGV;

open my $fh, '<', $header_file or die $!;
my $print;
while (<$fh>) {
  print if $print;
  $print ||= /END OF HEADER/;
}

open $fh, '<', $main_file or die $!;
print while <$fh>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:52:35.057

```
use strict;
use warnings;

use File::Slurp;

my @lines = read_file('readfile.txt');

while ( my $line = shift @lines) {
  next unless ($line =~ m/END OF HEADER/);
  last;
}

append_file('writefile.txt', @lines); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T19:00:45.077

我相信这会满足您的需求：

```
use strict;
use warnings;

my $find = 'END OF HEADER';
my $fileContents;

{
    local $/;
    open my $fh_read, '<', 'theFile.txt' or die $!;
    $fileContents = <$fh_read>;
}

my ($restOfFile) = $fileContents =~ /$find(.+)/s;

open my $fh_write, '>>', 'theFileToAppend.txt' or die $!;

print $fh_write $restOfFile;

close $fh_write; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T18:36:22.410

```
my $status = 0;
my $find = "END OF HEADER";

open my $fh_write, '>', $file_write
    or die "Can't open file $file_write $!";

open my $fh_read, '<', $file_read
    or die "Can't open file $file_read $!";

LINE:
while (my $line = <$fh_read>) {

     if ($line =~ /$find/) {

         $status = 1;
         next LINE;
     }                       

     print $fh_write $line if $status;
}

close $fh_read;
close $fh_write; 
```

# javascript - 为什么我的 JavaScript 对象属性被其他实例覆盖？

> ID：13127589
> 
> 赞同：5
> 
> 时间：2012-10-29T18:31:56.573
> 
> 标签：javascript, oop, inheritance

我创建了一个如下所示的对象。

```
var BaseObject = function(){

var base = this;
base.prop;

base.setProp = function(val){
    base.prop = val;
}
} 
```

当我调用该`setProp`方法时，我得到以下信息。

```
var a = new BaseObject();
var b = new BaseObject();           

a.setProp("foo");
b.setProp("bar");

console.log(a.prop); // outputs 'foo'
console.log(b.prop); // outputs 'bar' 
```

然后我创建了另一个像这样继承的对象`BaseObject`。

```
var TestObject = function(){
    // do something
}

TestObject.prototype = new BaseObject(); 
```

当我做同样的事情时，我得到了一个我没有预料到的结果。

```
var a = new TestObject();
var b = new TestObject();

a.setProp("foo");
b.setProp("bar");

console.log(a.prop); // outputs 'bar'
console.log(b.prop); // outputs 'bar' 
```

我不知道为什么。最近我读了很多关于闭包和原型继承的文章，我怀疑我已经把它搞糊涂了。因此，任何有关此特定示例为何按其方式工作的指示都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:47:11.613

只有一个`BaseObject`实例可以从所有`TestObject`s 继承。不要使用实例来创建原型链！

你想要的是：

```
var TestObject = function(){
    BaseObject.call(this); // give this instance own properties from BaseObject
    // do something
}
TestObject.prototype = Object.create(BaseObject.prototype); 
```

有关. [_](https://stackoverflow.com/questions/13040684/javascript-inheritance-object-create-vs-new/13040858#13040858) _ [_](https://stackoverflow.com/questions/10898786/correct-javascript-inheritance/10898859#10898859) _ [_](https://stackoverflow.com/questions/12592913/what-is-the-reason-to-use-the-new-keyword-here/12593049#12593049) _ `new`还可以看看[Crockford 的原型继承 - 嵌套对象的问题](https://stackoverflow.com/q/10131052/1048572)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:36:31.627

将原型继承视为仅处理对象而没有类的概念。在您的代码中，您有一个`BaseObject`具有`prop`属性的对象。您有 2 个其他对象从该对象的 1 个实例扩展，但该属性属于原始对象。如果您需要每个对象都有自己的副本，则需要为它们提供一个为该对象初始化的不同变量（例如在它们的构造函数中）。

顺便说一句，Java 风格的访问器在 JavaScript 中是多余的（如果需要，您可以在本机拦截访问）并且可能会进一步混淆这些问题，因为它们的行为会有所不同。

# recursion - 新手在 Groovy/遍历树中使用递归？

> ID：13127591
> 
> 赞同：1
> 
> 时间：2012-10-29T18:32:05.077
> 
> 标签：recursion, groovy

在我们当前的应用程序中，我们需要遍历树并捕获特定设备（和子设备）上的所有运算符。一个设备可以有子设备，上面也有特定的操作符。

由于我是在 Groovy 中使用递归的新手，我想知道我做的事情是否正确..？有什么指针可以帮助我学习更好的做事方式吗？

```
def listOperators(device) {
    // list with all operator id's
    def results = []

    // closure to traverse down the tree
    def getAllOperators = { aDevice->
        if(aDevice) {
            aDevice.operators.each { it ->
                results << it.id
            }
        }
        if (aDevice?.children) {
            aDevice.children.each { child ->
                results << owner.call(child)
            }
        }
    }

    // call the closure with the given device
    getAllOperators(device)

    // return list with unique results
    return results.unique()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T22:42:43.323

有几点需要注意：

*   通过递归调用`owner`不是一个好主意。`owner`如果调用嵌套在另一个闭包中，则更改的定义。它容易出错，并且与仅使用名称相比没有任何优势。当闭包是一个局部变量时，将它的声明和闭包的定义分开，这样名称就在范围内。例如：

    `def getAllOperators`
    `getAllOperators = { ...`

*   您将运算符附加到递归闭包之外的结果列表。但是您还将每个递归调用的结果附加到同一个列表中。附加到列表*或*存储每个递归调用的结果，但不能同时存储两者。

这是一个更简单的替代方案：

```
def listOperators(device) {
    def results = []
    if (device) {
        results += device.operators*.id
        device.children?.each { child ->
            results += listOperators(child)
        }
    }
    results.unique()
} 
```

# c# - XML - 从 SQL Server 到 LINQ 再到 XML

> ID：13127597
> 
> 赞同：0
> 
> 时间：2012-10-29T18:32:31.587
> 
> 标签：c#, xml, linq-to-xml

**设置：**

我在数据库（SQL Server 2008 R2）中存储了一些 xml 数据，这些数据通过存储过程检索并放入 DataTable 中。DataTable 有 2 列：一个 DateTime“时间戳”和一个 XML“信息”。

从数据库中提取这些数据后，我想循环遍历每一行并使用 C# 中的 LINQ to XML 对数据进行操作。

```
public static void ParseDataTable(DataTable dataTable)
{
    for (int r = 0; r < dataTable.Rows.Count; r++)
    {
        // dataTable.Rows[r]["timestamp"].ToString() holds DateTime
        // dataTable.Rows[r]["info"].ToString() holds XML
    }
} 
```

**我的问题：**

将这些数据放入可以使用 LINQ 的对象中的最简单方法是什么？应该使用什么类型的对象？

**此外：**

*   请不要问为什么xml存储在数据库中，或者推荐不同的存储介质。不打算发动一场圣战。
*   如果 xml 应该作为不同的类型返回（例如，`CAST([info] AS VARCHAR(MAX))`），请告诉我。
*   我宁愿使用 LINQ 来解析对象，一旦我有它可用，所以请不要推荐其他方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:36:59.650

```
XDocument doc = XDocument.Parse(dataTable.Rows[r]["info"].ToString()); 
```

然后你可以[linq离开](https://stackoverflow.com/a/566180/1069200)

# javascript - 当多次使用该类时，jQuery hoverIntent 仅适用于一个 div 类

> ID：13127602
> 
> 赞同：0
> 
> 时间：2012-10-29T18:32:57.467
> 
> 标签：javascript, jquery, hoverintent

当另一个 div 悬停在上面时，我正在使用 jQuery hoverIntent 插件淡入一个 div。有 4 个元素共享一个类名，我只想淡入我悬停的元素的子元素，而不是每个共享类的子元素的 div。现在的问题是，如果我将鼠标悬停在一次潜水上，它会在所有 4 个子元素中消失。在我的代码中，我的代码哪里出错了？

这是html：

```
<div id="resources" class="faded">

<div class="resourcesHover"></div>

</div>

<div id="forBuilders" class="faded">

<div class="buildersHover"></div>

</div>

<div id="fam" class="faded">

<div class="famHover"></div>

</div>

<div id="homePlans" class="faded">

<div class="plansHover"></div>

</div> 
```

这是 jQuery

```
$(document).ready(function(){

$(".faded").hoverIntent({
    over:    fadeDivIn,
    timeout: 300,
    out:     fadeDivOut
});

function fadeDivIn() {
    var $kids = $('.faded').children();
    $($kids, this).fadeIn('slow');
}

function fadeDivOut() {
    var $kids = $('.faded').children();
    $($kids, this).fadeOut('slow');
}

}); 
```

**以防万一有人遇到类似问题，我想出了解决方案并将其发布在下面。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:20:49.950

刚刚想通了。我将 a 添加`this,`到将子项设置为变量的行中，并将其从 .fadeIn 和 .fadeOut 行中删除。

这是新的 jQuery：

```
$(document).ready(function(){

$(".faded").hoverIntent({
    over:    fadeDivIn,
    timeout: 300,
    out:     fadeDivOut
});

function fadeDivIn() {  
    var $kids = $(this,'.faded').children();
    $($kids).fadeIn('slow');
}

function fadeDivOut() {
    var $kids = $(this,'.faded').children();
    $($kids).fadeOut('slow');
}

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:37:36.637

更改您的`fadeDivIn`和`fadeDivOut`功能如下：

```
function fadeDivIn() {
    var $kids = $(this).children();
    $($kids).fadeIn('slow');
}

function fadeDivOut() {
    var $kids = $(this).children();
    $($kids).fadeOut('slow');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:39:00.693

在您的淡入和淡出功能中，您需要选择`this`而不是类的所有元素`faded`

```
$(document).ready(function(){

$(".faded").on('mouseover', function() {
    fadeDivIn(this);
});

$(".faded").on('mouseout', function() {
    fadeDivOut(this);
});

function fadeDivIn(hovered_over) {
    var $kids = $(hovered_over).children();
    $($kids).fadeIn('slow');
}

function fadeDivOut(hovered_over) {
    var $kids = $(hovered_over).children();
    $($kids).fadeOut('slow');
}

}); 
```

# php - 错误：未定义的变量

> ID：13127603
> 
> 赞同：0
> 
> 时间：2012-10-29T18:33:01.350
> 
> 标签：php

有谁知道我可以如何解决这个错误。

> 未定义变量：第 57 行 C:\wamp\www\Root\siginuppage.php 中的电子邮件

```
if (!preg_match(
        "/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i"
        , $email
)) { 
```

我正在尝试设置电子邮件验证表，但在输入任何数据之前发生此错误。未定义的变量是我可以假设的电子邮件，但我究竟如何定义它？

```
$email = "$email"  along with $username="" and $password=""    perhaps  ????? 
```

我对此非常陌生，所以非常感谢一个简单的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:35:08.530

首先，php 中的变量由前缀`$`符号表示。所以要定义一个变量`$email`，你需要做这样的事情，

```
 $email = "xyz@pqr.com"; //test email 
```

# parsing - 是否存在从 LL(*) 到 PEG 的明确且合理的转换？

> ID：13127605
> 
> 赞同：2
> 
> 时间：2012-10-29T18:33:06.567
> 
> 标签：parsing, ll, peg

我正在研究 PEG（解析表达式语法）解析器，我正在研究的主题之一是与其他解析技术的等效性。

[我在From Regular Expressions to Parsing Expression Grammars](http://www.lbd.dcc.ufmg.br/colecoes/sblp/2011/001.pdf)找到了一篇关于将正则表达式转换为等效 PEG 的好论文。

我希望为`LL(*)`解析器找到类似的处理方法，但仍然空手而归。在我看来，[1](http://www.lbd.dcc.ufmg.br/colecoes/sblp/2011/001.pdf)中描述的许多技术也将适用于`LL(*)`转换问题，但是我对形式主义的了解还不够，无法对自己的分析充满信心。

非常感谢您的集体帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:43:27.347

我认为关于 PEG 的维基百科文章说明了一切[。](http://en.wikipedia.org/wiki/Parsing_expression_grammar)PEG 通过使用子句排序来消除歧义，进行递归下降。理论上，可以递归下降解析的语言家族是LL家族，但是，由于PEG具有无限前瞻且没有歧义，该家族应该是一个更大的家族，可能是完整的CFG。

每个 LL(k) 语法都可以由具有 k 前瞻的递归下降解析器实现，因此每个 LL(k) 语法都可以通过对规则进行排序来转换为 PEG 语法，以便首先列出需要最长前瞻的那些。

这是一个 LL(k) 文法：

```
params = expr
params = expr ',' params 
```

要使其成为同一语言的 PEG 语法，必须重新排序规则：

```
params = expr ',' params
params = expr 
```

# ios - iOS 多任务处理中的启动画面

> ID：13127607
> 
> 赞同：2
> 
> 时间：2012-10-29T18:33:12.040
> 
> 标签：ios, cocoa-touch, ios5, ios4, uikit

在什么情况下，iOS 应用程序会显示启动画面，即默认图像（App Launch 除外）？

我强制视图控制器仅支持横向模式

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{ 
     return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft); 
} 
```

如果用户在此视图中并将应用程序推送到后台然后将其重新启动，则应用程序会显示启动屏幕< 1 秒..

在另一种情况下，如果我打开了 UIAlertView，将应用程序推到后台并重新启动，应用程序会显示一秒钟的初始屏幕。

我们在 UIKit 文档中对此是否有任何解释，以及在什么情况下 iOS 中的多任务处理会在短时间内向用户显示启动画面。

谢谢。

**用一个例子更新了问题：**

如果我们进入设置应用程序（第一次） -> iTunes 和应用商店 -> 点击 AppleId: 行 -> 您将看到一个 alertView -> 将应用程序带到后台的 Push Home 按钮 -> 将应用程序带回向上。您将观察 Default.png for Settings 应用程序 < 1 秒，然后您将看到您之前打开的屏幕。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T23:27:38.783

系统（SpringBoard）负责管理您的应用程序快照。当您离开您的应用程序时，快照会在内部写入为 png 文件`Library/Caches/Snapshots/com.yourcompany.yourapp/UIApplicationAutomaticSnapshotDefault-Portrait@2x.png`

当您重新启动您的应用程序时，SpringBoard 会尝试读取该文件并显示它，这样您就会觉得您的应用程序唤醒得非常快。如果它无法读取该快照文件，那么它将显示`Default.png`。

我注意到`Default.png`只有在您退出并快速重新启动您的应用程序时才会显示。如果您在重新启动应用程序之前等待一两秒钟，系统有时间写入快照并且`Default.png`不会显示。

由于系统进程正在管理快照的显示，因此您绝对无法在您的应用程序中执行任何操作来防止`Default.png`其短暂出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T20:18:27.803

只有在应用程序从头开始时才会显示 Default.png。这意味着第一次，或者自上次打开后完全关闭。

如果您只是运行一个标准应用程序，您只会在第一次启动时看到 Default.png，直到它从系统（因为内存太少）或通过多任务栏从用户关闭。

# assembly - 当汇编代码一直使用 %eax 和 %edx 时，不知道为什么要添加寄存器 %rdx 和 %rax

> ID：13127611
> 
> 赞同：12
> 
> 时间：2012-10-29T18:33:24.457
> 
> 标签：assembly, x86

你好，我需要一些帮助来理解这个汇编代码中发生了什么：

```
 .file   "mystery.c"

        .text

        .globl mystery

              .type mystery, @function

 mystery:
   pushq    %rbp
    movq    %rsp, %rbp

   movl %edi, -20(%rbp)
   movl $1, -16(%rbp)
   movl $0, -12(%rbp)
   movl $0, -8(%rbp)
   cmpl $2, -20(%rbp)
   jg   .L2
   movl $1, %eax
   jmp  .L3

  .L2:
movl    $2, -4(%rbp)
jmp .L4

  .L5:
movl    -12(%rbp), %eax
movl    -16(%rbp), %edx
leal    (%rdx,%rax), %eax
movl    %eax, -8(%rbp)
movl    -16(%rbp), %eax
movl    %eax, -12(%rbp)
movl    -8(%rbp), %eax
movl    %eax, -16(%rbp)
addl    $1, -4(%rbp)

.L4:
movl    -4(%rbp), %eax
cmpl    -20(%rbp), %eax
jle .L5
movl    -8(%rbp), %eax

.L3:
leave
ret 
```

我完全理解发生了什么，直到我到达 .L5，这里的命令`leal(%rdx, %rax)`, eax 让我感到困惑。到目前为止，我一直在将值移动到 eax 和 edx，现在我将值添加到 rdx 和 rax 中。rdx 和 rax 来自哪里，他们持有什么价值观？它们只是写 eax 和 edx 的另一种方式吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T18:38:05.673

请参阅[此](https://stackoverflow.com/a/228231/1167234)相关答案。它解释了不同的寄存器及其演变。在这种情况下，该`%rax`寄存器是一个 64 位寄存器。`%eax`是 32 位的，`%ax`将是 16 位。`%ah`指寄存器16位中的高8位，`%al`指低端。

这个小图表取自同一问题的另一个答案，但它很好地展示了它......

```
|63..32|31..16|15-8|7-0|
               |AH.|AL.|
               |AX.....|
       |EAX............|
|RAX...................| 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T18:36:50.897

这些是描述寄存器的“真的只是”其他方式。根据“前缀”，它们是 64、32、16 或 8 位：

*   `rax`- 64 位
*   `eax`- 32 位
*   `ax`- 16 位
*   `ah`- 高 8 位`ax`
*   `al`- 低 8 位`ax`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-29T18:37:05.940

因为在 64 位模式下，`lea`使用 64 位“地址”和 32 位目标是最短的编码。

使其成为 32 位地址不会影响结果，但会花费一个字节。

# c# - 归档到一个数组，然后汇总文件中的数字

> ID：13127619
> 
> 赞同：0
> 
> 时间：2012-10-29T18:34:35.330
> 
> 标签：c#

我正在尝试汇总文件中的数字。我很新，不明白如何做到这一点。这就是我到目前为止所拥有的。这要我进一步解释，但我不确定还有什么要放下的。我所知道的是我有一个文件，我把它放到一个数组中。文件中的数字需要在文本框中相加。已解决.....我添加了一个 for 循环并解决了问题。

这是代码。

```
 private void totalButton_Click(object sender, EventArgs e)
    {
        try
        {
            const int SIZE = 7;
            double[] numbers = new double [SIZE];
            double total = 0;
            int index = 0;

            StreamReader inputFile;

            inputFile = File.OpenText("Sales.txt");

                while (index < numbers.Length && !inputFile.EndOfStream)
                {
                    numbers[index] = double.Parse(inputFile.ReadLine());
                    index++;
                }
                for (index = 0; index < numbers.Length; index++)
                {
                    total += numbers[index];
                    totalTextBox.Text = total.ToString();
                }
            inputFile.Close();

            foreach (double value in numbers)
            {
                listBox1.Items.Add(value);

            }

    }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
}

    private void exitButton_Click(object sender, EventArgs e)
    {
        this.Close();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:39:14.893

使用更简单的方法`System.Linq`（`File.ReadAllLines(String)`因此您不必使用`while(){}`循环）：

```
// read the file in (broken apart by lines) in to an array:
String[] lines = File.ReadAllLines("Sales.txt");

// Try parsing them to Double values:
Double[] numbers = lines.Select(line => {
  Double val = 0;
  Double.TryParse(line, out val);
  return val;
});

// Sum then using .Sum
Double total = lines.Sum(); 
```

参考：

*   [`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)
*   [`Enumerable.Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)
*   [`Enumerable.Sum()`](http://msdn.microsoft.com/en-us/library/bb534734.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:37:45.573

在您的`while`陈述中，只需添加`total += numbers[index];`, 然后在最后，`myLabel.Text = total.ToString();`?

并且`index`会给你价值的计数。

# ember.js - 如何将属性传递给 Handlebars 助手

> ID：13127620
> 
> 赞同：3
> 
> 时间：2012-10-29T18:34:35.187
> 
> 标签：ember.js, handlebars.js

我正在尝试在我的 Ember.js 应用程序中注册一个 Handlebars.js 助手，这将允许我传入一个视图属性，该属性是一个简单的 html 字符串，可以在不被转义的情况下呈现。我的模板如下所示：

```
 <span class="add-on">{{log view.append}}{{safeMarkup view.append}}</span> 
```

在这种情况下，日志语句将 html 字符串正确输出到控制台，例如`<span>text</span>`.

我的助手 safeMarkup 如下：

```
Handlebars.registerHelper('safeMarkup', (string) ->
  return new Handlebars.SafeString(string)
) 
```

然而，渲染的不是`view.append`属性的值，而是字符串“view.append”本身！像这样：`<span class="add-on">view.append</span>`。任何想法这里出了什么问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:27:13.847

在车把中：

```
{{span 'className'}} 
```

在应用程序中：

```
Handlebars.registerHelper('span', function(className) {
  return new Handlebars.SafeString("<span class='"+Handlebars.Utils.escapeExpression(className)+"'></span>");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T08:49:24.667

您还可以使用三重胡须来避免转义 html 字符串... [http://jsbin.com/imafuq/8/edit](http://jsbin.com/imafuq/8/edit)

# sybase - sybase 查询计划 OPEN CURSOR

> ID：13127621
> 
> 赞同：0
> 
> 时间：2012-10-29T18:34:41.710
> 
> 标签：sybase

我们的系统被另一个访问我们的系统，它`MAX()`从一个连接几个大表但只返回几千行的视图中选择一列。

他们的查询很慢，但是当我们尝试时`sp_showplan`，只有“OPEN CURSOR”可见。

必须有一个连接顺序和索引使用（某处必须有一个完整的计划），但我们看不到它。

监视器表出现只是为了存储显示计划。

有任何想法的人吗？也许是某种 dbcc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T15:32:09.897

MDA 表是否安装在那里。如果是，您是否检查了表 monSysPlanText。

检查查询计划的其他方式，使用下面

设置 showplan on write Query go

还有其他选项也提供以下详细信息：-

set statistics time on set statistics io on set statistics plancost on

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-28T13:39:31.740

听起来客户端 JDBC/ODBC 设置可能具有“游标”而不是直接启用，它将游标包裹在所有查询周围。

在调查方面，您还可以在活动时检查该 spid 的系统锁，并根据其对象 ID 查看正在使用哪些锁，这将帮助您缩小正在使用的任何表和/或特定索引的范围。

如果您确实启用了 MDA，那么 monOpenObjectActivity 和 monProcessActivity 也会有所帮助。

# wcf - Silverlight 无法访问跨域 WCF 服务

> ID：13127622
> 
> 赞同：1
> 
> 时间：2012-10-29T18:34:42.913
> 
> 标签：wcf, silverlight

我有一个`Silverlight`托管在服务器 A 上的应用程序，以及一个`WCF`托管在 IIS 6 上的服务器 B 上的服务。服务器 B 不允许任何非 https 连接（并不是说它不会重写它们......它们只是失败了）。

在服务器 BI 的 wwwroot 中有一个`clientaccesspolicy.xml`文件

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>
  </allow-from>
  <grant-to>
    <resource path="/" include-subpaths="true"/>
  </grant-to>
</policy> 
```

查看代理流量，我现在可以看到 silverlight 应用程序请求 mydomain/clientaccesspolicy.xml 并返回带有内容的 HTTP 200，但是，silverlight 然后给出了安全异常。

我已经尝试了许多 clientaccesspolicy.xml 文件的变体，甚至在互联网上漂浮的 crossdomain.xml 示例都无济于事。

此外，如果我安装 SL 应用程序而不是通过浏览器运行它，它就可以工作。

我想知道这是否是 SL 5 错误？

请注意，这是我之前提出的原始问题的后续，我无法看到`clientaccesspolicy.xml`请求发出（但我现在可以看到它仍然不起作用）。

# debugging - 从安装在 Windows 中的 Netbeans 通过 vnc 服务器调试在 linux 中运行的 Java 应用程序

> ID：13127629
> 
> 赞同：1
> 
> 时间：2012-10-29T18:35:00.210
> 
> 标签：debugging, netbeans, vnc

我在 linux 系统中有我的 java 应用程序，我通过 VNC 服务器远程访问它。在我的本地桌面（Windows）上，我安装了 netbeans IDE。

我想调试我通过安装在我的 Windows 上的 Netbeans 使用 vnc 服务器访问的应用程序。请让我知道该怎么做。

谢谢，罗希特

# c++ - 无法将 `char (*)[((unsigned int)((int)Tlength))]' 转换为 `char**

> ID：13127635
> 
> 赞同：2
> 
> 时间：2012-10-29T18:35:27.887
> 
> 标签：c++, c, algorithm

> **可能重复：**
> [传递二维数组](https://stackoverflow.com/questions/3911400/passing-2d-arrays)

我的代码中有一个问题。谁能帮我？

```
void print(char S[], char * * path, int i, int j) {
    if (i == 0 || j == 0) return;
    if (path[i][j] == 'c') {
        print(S, path, i - 1, j - 1);
        cout << S[i];
    }
    else if (path[i][j] == 'u') print(S, path, i - 1, j);
    else print(S, path, i, j - 1);
}
int LongestCommonSubsequence(char S[], char T[]) {
    int Slength = strlen(S);
    int Tlength = strlen(T); /* Starting the index from 1 for our convinience (avoids handling special cases for negative indices) */
    int i, j;
    char path[Slength][Tlength];
    int common[Slength][Tlength];
    for (i = 0; i <= Tlength; i++) {
        common[0][i] = 0;
    } /*common[i][0]=0, for all i because there are no characters from string T*/
    for (i = 0; i <= Slength; i++) {
        common[i][0] = 0;
    }
    for (i = 1; i <= Slength; i++) {
        for (j = 1; j <= Tlength; j++) {
            if (S[i] == T[j]) {
                common[i][j] = common[i - 1][j - 1] + 1;
                path[i][j] = 'c';
            }
            else if (common[i - 1][j] >= common[i][j - 1]) {
                common[i][j] = common[i - 1][j];
                path[i][j] = 'u';
            }
            else {
                common[i][j] = common[i][j - 1];
                path[i][j] = 'l';
            }

        }
    }
    print(S, path, Slength, Tlength); // it gives an Error!!!!
    return common[Slength][Tlength];

} 
```

我的错误在于：

```
print(S,path,Slength,Tlength); 
```

它给出了：

> 无法将参数“2”的“char ( *)[((unsigned int)((int)Tlength))] `' to \``char**`”转换为“void print(char* ,char**,int,int)”

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:41:55.787

这是你的问题：

```
char path[Slength][Tlength];
int common[Slength][Tlength]; 
```

（其中`Slength`和`Tlength`是非常量表达式）

可变长度数组是非法的。C++ 标准要求声明中数组边界的*常量整数表达式*（在`new[]`表达式中，最外面的边界可以是变量）。

选民注意：OP 将他的问题标记为 C++，其他人更改了标签，不知道实际使用的是什么编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T10:03:15.673

正如**一些**评论者已经提到的`char [][]`（as `char[]`, or `char [][][]`, ... 也会）衰减到`char *`if 传递给一个函数。

因此，要实际**解决**您的代码问题，只需更改

```
void print(char S[], char * * path, int i, int j) 
```

成为

```
void print(char S[], char * path, int i, int j) 
```

# spring - java.lang.NoSuchMethodError：org.neo4j.kernel.impl.transaction.SpringTransactionManager。 (Lorg/neo4j/graphdb/GraphDatabaseService;)V

> ID：13127649
> 
> 赞同：0
> 
> 时间：2012-10-29T18:36:33.080
> 
> 标签：spring, neo4j, spring-data-neo4j

我开始学习了`spring-data-neo4j`

我正在运行但无法成功的非常基本的测试用例。错误是：`java.lang.IllegalStateException: Failed to load ApplicationContext`

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jRelationshipBacking' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.aspects.support.relationship.Neo4jRelationshipBacking org.springframework.data.neo4j.aspects.config.Neo4jAspectConfiguration.neo4jRelationshipBacking() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jTemplate' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.Neo4jTemplate org.springframework.data.neo4j.config.Neo4jConfiguration.neo4jTemplate() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mappingInfrastructure' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.data.neo4j.support.MappingInfrastructureFactoryBean org.springframework.data.neo4j.config.Neo4jConfiguration.mappingInfrastructure() throws java.lang.Exception] threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'neo4jTransactionManager' defined in class path resource [org/springframework/data/neo4j/aspects/config/Neo4jAspectConfiguration.class]: Instantiation of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Factory method [public org.springframework.transaction.PlatformTransactionManager org.springframework.data.neo4j.config.Neo4jConfiguration.neo4jTransactionManager()] threw exception; nested exception is java.lang.NoSuchMethodError: org.neo4j.kernel.impl.transaction.SpringTransactionManager.<init>(Lorg/neo4j/graphdb/GraphDatabaseService;)V 
```

`User.java`pojo 注释`@NodeEntity`

```
@NodeEntity
public class User {
    @GraphId
    private Long id;

    User(String name){
        this.name = name;
    }
    private String name;

    public Long getId() {
        return id;
    }

    public String getName() {
        return name;
    }

} 
```

**配置文件是：**

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:neo4j="http://www.springframework.org/schema/data/neo4j"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/data/neo4j http://www.springframework.org/schema/data/neo4j/spring-neo4j-2.0.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <context:annotation-config/>
    <context:spring-configured/>

    <neo4j:config  storeDirectory="D:/data/db"/>
    <tx:annotation-driven mode="proxy"/>
    <context:component-scan base-package="com.neo4j.model"/>
</beans> 
```

**JUnit 测试用例是**：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:/graph-test-context.xml"})
public class Neo4jUserTest {

    @Autowired
    Neo4jTemplate neo4jTemplate;
    @Test
    public void test() {
        User user = new User("test");
        neo4jTemplate.beginTx();
        neo4jTemplate.save(user);
    }
} 
```

**我已经从 Eclipse 构建路径手动添加了下面的 jar 文件：**

```
commons-logging-1.0.4.jar
log4j-1.2.15.jar
jta.jar
cglib-2.1.3.jar
validation-api-1.0.0.GA.jar
lucene-core-3.5.0.jar
servlet-api.jar
org.springframework.aop-3.1.2.RELEASE.jar
org.springframework.asm-3.1.2.RELEASE.jar
org.springframework.aspects-3.1.2.RELEASE.jar
org.springframework.beans-3.1.2.RELEASE.jar
org.springframework.context.support-3.1.2.RELEASE.jar
org.springframework.context-3.1.2.RELEASE.jar
org.springframework.core-3.1.2.RELEASE.jar
org.springframework.expression-3.1.2.RELEASE.jar
org.springframework.instrument.tomcat-3.1.2.RELEASE.jar
org.springframework.instrument-3.1.2.RELEASE.jar
org.springframework.jdbc-3.1.2.RELEASE.jar
org.springframework.jms-3.1.2.RELEASE.jar
org.springframework.orm-3.1.2.RELEASE.jar
org.springframework.oxm-3.1.2.RELEASE.jar
org.springframework.test-3.1.2.RELEASE.jar
org.springframework.transaction-3.1.2.RELEASE.jar
org.springframework.web.portlet-3.1.2.RELEASE.jar
org.springframework.web.servlet-3.1.2.RELEASE.jar
org.springframework.web.struts-3.1.2.RELEASE.jar
org.springframework.web-3.1.2.RELEASE.jar
D:\JUnit\junit-4.6.jar
com.springsource.org.aopalliance-1.0.0.jar
aspectjtools-1.6.0.jar
asm-attrs.jar
asm.jar
spring-data-neo4j-2.1.0.RC1.jar
spring-data-neo4j-aspects-2.1.0.RC1.jar
spring-data-neo4j-cross-store-2.1.0.RC1.jar
spring-data-neo4j-rest-2.1.0.RC1.jar
slf4j-api-1.6.1.jar
slf4j-log4j12-1.7.2.jar
geronimo-jta_1.1_spec-1.1.1.jar
lucene-core-3.5.0.jar
org.apache.servicemix.bundles.jline-0.9.94_1.jar
scala-library-2.9.0-1.jar
server-api-1.7.2.jar
spring-data-commons-core-1.3.1.RELEASE.jar
hamcrest-all-1.3.jar
neo4j-cypher-dsl-1.6.M02.jar
neo4j-cypher-1.9-20120912.103508-32.jar
neo4j-kernel-1.9-20120912.102607-33.jar
neo4j-lucene-index-1.9-20120912.103015-33.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T17:36:55.543

正如彼得所说，问题是您包含的 Neo4J 库版本与 Spring 预期的不同。**NoSuchMethodError**表示客户端正在调用不存在的方法。如果包含 Spring 正在使用的版本，则不会发生这种情况，因为如果 Spring 调用不存在的方法，则会出现编译错误。

你是如何构建你的项目的？如果它是一个 Maven 项目，请提供更多详细信息，例如 POM。

**更新：** org.neo4j.kernel.impl.transaction.SpringTransactionManager来自您的 Neo4J 安装，而不是您提供的 jar ***。***你运行的是什么版本的 Neo4J？它需要匹配 spring-data-neo4j 期望的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T21:33:36.590

看来您使用的是旧的 Neo4j 版本。您可以尝试使用对应的 Neo4j 版本，我认为是 1.8 而不是 1.7.2？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:21:59.133

最后我通过使用下面的 jar 文件解决了它：

```
aopalliance-1.0.jar
asm-3.1.jar
aspectjrt-1.6.12.jar
backport-util-concurrent-3.1.jar
cglib-2.2.jar
codegen-0.5.5.jar
commons-cli-1.0.jar
ecj-3.7.2.jar
guava-11.0.2.jar
hamcrest-core-1.3.jar
hamcrest-library-1.3.jar
jakarta-regexp-1.4.jar
javax.inject-1.jar
jcl-over-slf4j-1.7.1.jar
jsr305-1.3.9.jar
jta.jar
junit-3.8.1.jar
junit-dep-4.10.jar
logback-classic-1.0.6.jar
logback-core-1.0.6.jar
lucene-core-3.5.0.jar
lucene-queries-3.5.0.jar
mysema-commons-lang-0.2.4.jar
neo4j-1.8.jar
neo4j-cypher-1.8.jar
neo4j-cypher-dsl-1.8.jar
neo4j-graph-algo-1.8.jar
neo4j-graph-matching-1.8.jar
neo4j-jmx-1.8.jar
neo4j-kernel-1.8.jar
neo4j-lucene-index-1.8.jar
neo4j-udc-1.8.jar
plexus-compiler-api-1.9.1.jar
plexus-compiler-javac-1.9.1.jar
plexus-compiler-manager-1.9.1.jar
plexus-interactivity-api-1.0-alpha-4.jar
plexus-interpolation-1.11.jar
plexus-interpolation-1.13.jar
plexus-utils-1.5.15.jar
plexus-utils-2.0.5.jar
plexus-utils-3.0.jar
querydsl-apt-2.8.2.jar
querydsl-codegen-2.8.2.jar
querydsl-core-2.8.2.jar
querydsl-lucene-2.8.2.jar
scala-library-2.9.1-1.jar
slf4j-api-1.7.1.jar
spring-aop-3.2.0.M2.jar
spring-aspects-3.2.0.M2.jar
spring-beans-3.2.0.M2.jar
spring-context-3.2.0.M2.jar
spring-core-3.2.0.M2.jar
spring-data-commons-core-1.4.0.RELEASE.jar
spring-data-neo4j-2.1.0.RELEASE.jar
spring-expression-3.2.0.M2.jar
spring-jdbc-3.2.0.M2.jar
spring-orm-3.2.0.M2.jar
spring-test-3.2.0.M2.jar
spring-tx-3.2.0.M2.jar
validation-api-1.0.0.GA.jar 
```

# c# - 捕获显示信息的异常

> ID：13127650
> 
> 赞同：2
> 
> 时间：2012-10-29T18:36:34.640
> 
> 标签：c#, asp.net-mvc, exception, exception-handling

我已经进行了设置，因此如果`Exception`抛出 an ，我可以使用我的自定义错误页面显示它。但在某些情况下，我不想被导航到错误页面，而是希望它显示一个简单的对话窗口。

```
public ActionResult Page1()
{
    //The custom error page shows the exception, if one was thrown

    throw new Exception( "An exception was thrown" );

    return View();
}

public ActionResult Page2()
{
    //A dialog should show the exception, if one was thrown

    try
    {
        throw new Exception( "An exception was thrown" );
    }
    catch( Exception ex )
    {
        ViewData["exception"] = ex;
    }
    return View();
} 
```

是否可以使用 CustomAttribute 来处理在 Controller 操作中引发的异常？如果我添加`CatchException`到 Page2 中，我是否可以在`ViewData`每次抛出异常时自动将异常存储在 . 我对 CustomAttributes 没有太多经验，如果您能帮助我，我将不胜感激。

Page2 示例工作得非常好，我只是想让代码更干净，因为在每个操作（我想显示一个对话框）中都有尝试捕获并不是很漂亮。

我正在使用 .NET MVC 4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:47:38.540

您可以创建一个基本控制器来捕获异常并为您处理它。此外，看起来控制器已经有一种机制可以为您做到这一点。您必须覆盖控制器内的 OnException 方法。你可以在这里得到一个很好的例子： [Handling exception in ASP.NET MVC](http://www.devproconnections.com/article/aspnetmvc/aspnet-exception-141263)

此外，这里还有一个关于如何使用 OnException 的答案： [Using the OnException](https://stackoverflow.com/questions/6324368/asp-net-mvc-override-onexception-in-base-controller-keeps-propogating-to-applica)

通过使用它，你的代码会更干净，因为你不会做很多 try/catch 块。

您必须过滤要处理的异常。像这样：

```
protected override void OnException(ExceptionContext contextFilter)
{
    // Here you test if the exception is what you are expecting
    if (contextFilter.Exception is YourExpectedException)
    {
        // Switch to an error view
        ...
    }
    //Also, if you want to handle the exception based on the action called, you can do this:
    string actionName = contextFilter.RouteData.Values["action"];
    //If you also want the controller name (not needed in this case, but adding for knowledge)
    string controllerName = contextFilter.RouteData.Values["controller"];
    string[] actionsToHandle = {"ActionA", "ActionB", "ActionC" };

    if (actionsTohandle.Contains(actionName)) 
    {
         //Do your handling.
    }

    //Otherwise, let the base OnException method handle it.
    base.OnException(contextFilter);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:44:04.937

您可以创建 Exception 类的子类，并在您的 Page 2 中捕获它

```
internal class DialogException : Exception
{}

public ActionResult Page2()
{
    //This should a dialog if an exception was thrown

    try
    {
        //throw new Exception( "An exception was thrown, redirect" );
        throw new DialogException( "An exception was thrown, show dialog" );
    }
    catch( DialogException ex )
    {
        ViewData["exception"] = ex;
    }
    return View();
} 
```

# git - GitHub - 根据源计算机使用不同的用户名推送提交

> ID：13127651
> 
> 赞同：0
> 
> 时间：2012-10-29T18:36:35.657
> 
> 标签：git, github

我有 2 台计算机并在每台计算机上使用不同的用户帐户（就操作系统帐户而言，而不是 GitHub）。我在他们两个上都设置了 SSH 密钥，但如果我从一台计算机提交/推送，在 GitHub 项目的页面中，我可以看到“userA”是提交的作者。但是如果我从第二个提交/推送，操作系统用户帐户的名称将用作提交的作者。如何修复它并且只有一个提交的作者？

也许更好的是展示例子。[这](https://github.com/ladariha/synergy/commits/master)是一个提交列表，全部由我制作。“vriha”是不正确的，“ladariha”是正确的。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:40:14.780

如果您希望将两个用户名都超链接到您的 GitHub 帐户，那么您应该知道 GitHub 在 user.email 配置设置上消除了用户的歧义。因此，相应地更新两个存储库，它们随后将被超链接。来源：[https ://help.github.com/articles/setting-your-email-in-git](https://help.github.com/articles/setting-your-email-in-git)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:39:11.067

尝试`git config --global user.name "ladariha"`

# linq-to-entities - 这个 LINQ 查询的结果怎么可能是 IQueryable<> 类型而不是 IEnumerable<> 类型？

> ID：13127663
> 
> 赞同：1
> 
> 时间：2012-10-29T18:37:46.293
> 
> 标签：linq-to-entities, linq-to-objects, iqueryable

我知道下一个查询会引发异常，因为`IQueryable<>`提供程序不支持`Enumerable.TakeWhile`扩展方法。

```
 IQueryable<Contact> search = context.Contacts.TakeWhile(q => q.ContactID > 10);
        foreach(var q in search); // exception 
```

但是，如果我尝试从 C# 的角度理解前面的查询，就会感到困惑。

由于要在上面的链中调用的最后一个 Linq 方法是*Linq-to-Objects* `TakeWhile`，我希望`search`变量是 type `IEnumerable<T>`，但它是 IQueryable 类型（我知道`IQueryable<T>`查询被转换为*表达式树*，而*Linq-to-对象*查询本质上转换为延迟方法调用，因此尝试将*表达式树*（由创建`context.Contacts`）转换为方法调用是行不通的。如前所述，从 C# 的角度来看，这让我感到困惑）。

此外，`Queryable`运算符构建查询的方式是调用 on `IQueryProvider<T>.CreateQuery`，给定*表达式树*构建新`IQueryable<T>`对象。这是否意味着`IEnumerable<T>.TakeWhile`操作员必须知道以某种方式自己构建*表达式树*（它不知道）或必须能够调用`IQueryProvider<T>.CreateQuery`？

我很确定我的假设是错误的，所以有人可以解释一下前面的查询如何能够返回 type 的结果`IQueryable<T>`而不是`IEnumerable<T>`？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:06:40.040

[IQueryable<T>.TakeWhile()](http://msdn.microsoft.com/en-us/library/bb535033.aspx)返回 IQueryable<T>

[IEnumerable<T>.TakeWhile()](http://msdn.microsoft.com/en-us/library/bb535033.aspx)返回 IEnumerable<T>

```
[Test]
public void TakeWhileTest()
{
    List<int> ints = new List<int> {1, 2, 3, 4};
    var enumerable = ints.AsEnumerable().TakeWhile(x => x < 3);
    Assert.IsNotInstanceOf<IQueryable<int>>(enumerable);
    foreach (var i in enumerable)
    {

    }
    IQueryable<int> queryable = ints.AsQueryable().TakeWhile(x => x < 3);
    Assert.IsInstanceOf<IQueryable<int>>(queryable);
    foreach (var i in queryable)
    {

    }
} 
```

以上有效，我的猜测是您尝试从 aq 获取 q.ContactId 为空。你可以试试这个（并跳过 TakeWhile）：

```
foreach (var contact in context.Contacts)
{
    if (contact.ContactID > 10)
        break;
    //Do your stuff here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:07:10.667

有一个[Queryable.TakeWhile](http://msdn.microsoft.com/en-us/library/bb549146%28v=vs.90%29.aspx)和一个[Enumerable.TakeWhile](http://msdn.microsoft.com/en-us/library/bb534804%28v=vs.90%29.aspx)

# c# - 对象引用错误 - Struct @ WM_DEVICECHANGE

> ID：13127665
> 
> 赞同：0
> 
> 时间：2012-10-29T18:37:51.537
> 
> 标签：c#

我几乎准备好了我的程序，我认为它运行得非常顺利。我只是碰巧意识到，在检查 usb-arrival 时，很多“对象引用未设置为对象的实例”。在阅读应该与 winmsg 一起到达的结构时向我抛出。我在插入和拔出 USB 时收到 3-4 个 Nullreference 错误。

我究竟做错了什么？

```
public partial class Form1 : Form
{
    private const int WM_DEVICECHANGE = 0x0219;
    private const int DBT_DEVICEARRIVAL = 0x8000;
    private const int DBT_DEVICEREMOVALCOMPLETE = 0x8004;
    private const int DBT_DEVTYPVOLUME = 0x00000002;

    public Form1()
    {
        InitializeComponent();
    }

    protected override void WndProc(ref Message m)
    {

        if (m.Msg == WM_DEVICECHANGE)
        {
            try
            {
                Debug.WriteLine("trying");
                DEV_BROADCAST_VOLUME vol = (DEV_BROADCAST_VOLUME)Marshal.PtrToStructure(m.LParam, typeof(DEV_BROADCAST_VOLUME));

                if ((m.WParam.ToInt32() == DBT_DEVICEARRIVAL) && (vol.dbcv_devicetype == DBT_DEVTYPVOLUME))
                {
                    Debug.WriteLine("usb in");
                    //NewStickArrived(DriveMaskToLetter(vol.dbcv_unitmask).ToString());
                }
                if ((m.WParam.ToInt32() == DBT_DEVICEREMOVALCOMPLETE) && (vol.dbcv_devicetype == DBT_DEVTYPVOLUME))
                {
                    Debug.WriteLine("usb out");
                }
            }
            catch (Exception e)
            {
                Debug.WriteLine(e.Message);
            }
        }
        base.WndProc(ref m);
    }

    [StructLayout(LayoutKind.Sequential)] //Same layout in mem
    public struct DEV_BROADCAST_VOLUME
    {
        public int dbcv_size;
        public int dbcv_devicetype;
        public int dbcv_reserved;
        public int dbcv_unitmask;
    }

} 
```

}

您还需要以下内容来尝试此示例：

```
using System.Diagnostics;
using System.Runtime.InteropServices; 
```

我想它可能是在 1\. 我对结构做错了，因为我对它们还不太了解，或者 2\. 有时这个“[...]Marshal.PtrToStructure(m.LParam[...] “不适合结构...

谢谢

# node.js - 如何通过与 Node.js 的脆弱连接处理数据流？

> ID：13127667
> 
> 赞同：1
> 
> 时间：2012-10-29T18:37:54.263
> 
> 标签：node.js, mongodb

我想开始将 Node.js 用于我将从事的项目。

我在电动汽车中有流式位置信息，我想将其本地存储在汽车中的小型数据库中，并通过（脆弱的）3G 连接将其同步到具有大型数据库的服务器. 所以：

```
                     车载操作系统 3G 服务器操作系统
数据流 ---> ------ ---> ---------
                     节点.js 节点.js
                     MongoDB的
                     小数据库 大数据库

```

我担心的部分是如何通过非连续 3G 连接将本地数据库同步到服务器数据库。什么 Node.js 模块最适合这项工作？

感谢您的意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:56:26.380

我相信 CouchDB 将是完成这项工作的好工具。它具有内置同步功能，通常用于同步离线/在线 Web 应用程序和移动应用程序。我不确定它是否支持开箱即用的“big db”/“small db”架构。

来自[维基百科](https://en.wikipedia.org/wiki/CouchDB)：

> CouchDB 在设计时考虑了双向复制（或同步）和离线操作。这意味着多个副本可以拥有自己的相同数据副本，对其进行修改，然后在以后同步这些更改。

希望这可以帮助你一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:46:41.730

MongoDB 还具有数据库之间的内置复制功能。

与任何数据库一样，当一个成员长时间离线时，您需要确保数据（在无信号时间记录）能够同步。

[在 MongoDB 中，使用一个名为oplog](http://docs.mongodb.org/manual/reference/glossary/#term-oplog)的内部集合来存储逻辑写入的历史数据。

默认情况下，MongoDB 会将 5% 的可用磁盘空间分配给 oplog [[1]](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)。这意味着在服务器数据库上的最后一次操作时间和 Car DB 上的第一个同步启动服务器的时间之间，您将拥有这么多的 oplog '时间' 进行复制。

当然如果你想发送大量数据或者有很多车，你可以[改变 oplog 的大小](http://docs.mongodb.org/manual/tutorial/change-oplog-size/)。

因此，此选项意味着只要您的 mongodb 服务器可以相互连接，您只需向它们插入数据，它们就会为您进行同步。

根据您的要求，您可能不想让服务器数据库端口对世界开放。这意味着身份验证将到位或对主机名进行限制（使用动态 DNS）。

就此处有帮助的 Node 模块而言，我无能为力，只能尝试使用 [mongooplog](http://docs.mongodb.org/manual/reference/mongooplog/)命令。

请让我们知道您的项目进展如何，因为它看起来很有趣。

# iphone - 当我们在 ios5.1、ios6 等其他操作系统版本中拥有应用程序时，如何在 ios5 模拟器中启动应用程序？

> ID：13127668
> 
> 赞同：0
> 
> 时间：2012-10-29T18:37:58.497
> 
> 标签：iphone, cocoa-touch, ios5

我的模拟器 iOS5.0、iOS5.1 和 iOS6.0 中有 3 个操作系统。有没有办法在某个 iOS 版本中启动应用程序？

打开 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/Applications/iPhone\ Simulator.app 。

这没有多大帮助，并且总是在 iOS6 中启动。

*更新：我正在寻找一种以编程方式执行此操作的方法。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:39:53.060

你可以去 Xcode-->Preferences-->Downloads，你会得到一个像这样的屏幕：

![在此处输入图像描述](../Images/5a4166a7be7800184db1f475cad79849.png)

从那里您可以下载其他模拟器，然后您就可以选择它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:40:57.167

只需打开模拟器，更改 iOS 版本，然后在 XCode 中按运行。（你的部署目标必须是正确的）

# javascript - 为什么在 xmlhttp.responseText 之后没有设置变量？

> ID：13127675
> 
> 赞同：0
> 
> 时间：2012-10-29T18:38:19.680
> 
> 标签：javascript, ajax, variables, xmlhttprequest

在验证发送传真表单时，我正在检查是否已经使用我们的软件传真包发送了传真。这是一个由脚本执行的对表的简单查询，如果存在先前的传真，则返回一些文本，否则返回空白。

我发现 flag_stop_fax 变量仍然设置为零，即使我有一些响应文本（例如：“传真已经发送。”）。

```
flag_stop_fax = 0;
xmlhttp.onreadystatechange=function() 
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200) 
    {
        var response = xmlhttp.responseText;
        if (response!='')
        {
            flag_stop_fax = 1;
            alert(response);
        }
    }
}

xmlhttp.open('GET','/check_for_active_fax.php?fax_number=' + fax_number + '&t='+Math.random(),true);
xmlhttp.send();

alert(flag_stop_fax); // shows "0" even when I have a non-blank response from xmlhttp.responseText 
```

还有一些其他的验证位，但上面的脚本希望能说明这个问题。我不会将 't' 变量用于任何事情 - 这只是防止浏览器缓存的保护措施。

那么为什么我的 flag_stop_fax 没有设置为 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:42:44.110

首先您必须了解 AJAX 是异步的。当你执行时`xmlhttp.send();`，你的请求被发送并且代码继续执行，所以接下来要运行的是：

```
alert(flag_stop_fax); 
```

此时，`flag_stop_fax`仍然为零，因为请求还没有完成。

您指定的回调函数`xmlhttp.onreadystatechange`只会**在请求完成时**运行。这里的执行不是顺序的。它是这样的：

1.  `xmlhttp.send();`- 请求已经开始
2.  `alert(flag_stop_fax);`- 变量被警告

    ...
    ...
    （一段时间后，当服务器回答时）

    `xmlhttp.onreadystatechange`被执行，改变`flag_stop_fax`变量。

# ruby - Ruby Mechanize 与 http 身份验证有关的问题

> ID：13127678
> 
> 赞同：2
> 
> 时间：2012-10-29T18:38:48.880
> 
> 标签：ruby, mechanize, http-authentication, mechanize-ruby

我在绕过使用 http 身份验证的网站时遇到问题，我有一个网站列表，我做了一些废弃，但其中一些网站上有 http 身份验证。我不希望获得那些我希望能够确定它们是否受到 http auth 保护然后继续前进的网站的内容。例如，在下面的代码片段中，agent.get 永远不会返回，所以我无法处理它。我该如何处理这样的案件？

```
require 'mechanize'
agent = Mechanize.new
page = agent.get('http://freyalovesmusic.co.uk') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T20:28:28.380

您可以假设如果页面加载时间过长，则它正在使用 http 身份验证。显然不是 100% 准确，但可能对您的情况足够好？

您可以使用 Timeout 模块在一定时间后继续前进，即使 agent.get 永远不会返回：

```
require 'mechanize'
require 'timeout'

agent = Mechanize.new
begin
    Timeout::timeout(5) do
        page = agent.get('http://freyalovesmusic.co.uk')
    end
rescue Timeout::Error
    puts 'Page likely using http authentication'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T00:56:59.987

它应该提高 a`Mechanize::UnauthorizedError`但由于某种原因它行为不端。也许您应该在 mechanize github 问题表单上报告它。

# struts2 - 需要帮助解决 jquery 网格问题中的 struts2 下拉问题

> ID：13127685
> 
> 赞同：0
> 
> 时间：2012-10-29T18:39:20.130
> 
> 标签：struts2, struts2-jquery, jqgrid

[在我的编辑网格功能中，我的下拉菜单无法填充数据，即使我正在查看此线程http://www.trirand.com/blog/?p](http://www.trirand.com/blog/?p) .....-questions我仍然无法解决。所以我需要你的帮助，因为我是新手。基本上在我的动作课上

```
 public class CategoryAction extends ActionSupport {
private static final long serialVersionUID = 3643090482804105068L;
private List<String> category;    
public String execute() throws Exception{            
    generalDelegate util = new generalDelegate();    
    category = util.retrieveCategory();
    System.out.println("+++++++++");
    return "success";
}
public List<String> getCategory() {
    return category;
    }
   } 
```

该类别返回以下结果 [牙膏，沐浴露，洗发水，剃须膏，洗手液，洗面奶，美发] 在我的 Struts.xml

```
<action name="jsonCategoryAction" class="general.CategoryAction"> 
        <result type="json" name="success">Category.jsp</result> 
    </action> 
```

最后是我的 Main.jsp

```
 <s:url id="selectCategoryUrl" action="jsonCategoryAction" />
                                    <sjg:gridColumn 
                                        name="category1″ 
                                        index="category1″ 
                                        title="Item Category" 
                                        sortable="true"
                                        editable="true"
                                        edittype="select" 
                                        editoptions="{ dataUrl : '%{selectCategoryUrl}' }" /> 
```

请指导我哪里出错了…… 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:43:42.227

请阅读文档

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#editoptions)

```
dataUrl

    The data is obtained via an AJAX call and should be a valid HTML
    select element with the desired options <select><option
    value='1'>One</option>…&lt;/select>. You can use option group. 
```

所以你的 ajax 请求必须返回一个有效的 html 选择元素。

# iphone - 对象数组 每个对象都持有一个项目数组 想要将项目添加到数组中

> ID：13127687
> 
> 赞同：1
> 
> 时间：2012-10-29T18:39:33.323
> 
> 标签：iphone, ios, nsmutablearray

我正在为应用商店开发我的第一个应用。我以前做过编程，但这是我的第一个 iOS 应用程序。

我的问题需要解释一下：我得到了这个基于 tableviews 的应用程序。它由以下部分组成：我的主屏幕（屏幕 A）、添加项目屏幕（屏幕 B）、详细屏幕（屏幕 C）和最后一个添加详细项目屏幕（屏幕 D）。

我所有的屏幕都从屏幕 A 开始。屏幕 A 由一个带有对象的数组组成。每个对象都包含一个细节数组。当您触摸屏幕 A 中的行/对象时，您将转到屏幕 C，您可以在其中查看给定行/对象的所有详细信息。

我让我的代表在屏幕 A 和屏幕 B 之间工作。

但是让我头疼的是，当我想向屏幕 A 中的给定对象添加详细信息时。我希望能够向屏幕 A 中的对象添加详细信息对象，但是当对象数组已经在数组中时，如何访问它?

```
- (void)addBudgetViewController:(AddBudgetViewController *)controller didFinishAddingItem:(Budgets *)budget
{

int newRowIndex = [self.dataModel.budgetsList count];
[self.dataModel.budgetsList addObject:budget];

NSLog(@"Budget added");

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

[self dismissViewControllerAnimated:YES completion:nil]; 
```

}

下面是我如何将屏幕 B 中的项目添加到屏幕 A。我的 budgetsInList 是屏幕 A 中的一个可变预算数组。但是如果我想将项目添加到budgetsInList 数组中的对象数组中，代码看起来如何？

![屏幕](../Images/875a35b7e3352f6c82582adb5fee41f8.png)

![数组](../Images/4a04033af11b7329823d97d43b60ef1f.png)

数组 A 是您可以在屏幕 A 中看到的预算列表。数组 B 是数组 A 内的数组（也是可变的）。屏幕 B 和 D 是将预算添加到屏幕 A 并将项目添加到屏幕 C。

```
- (void)addItemViewController:(AddItemViewController *)controller didFinishAddingItem:(Item *)item
{
int newRowIndex = [self.budgets.items count];
[[self.dataModel.budgetsList objectAtIndex:newRowIndex] addObject:item];

NSLog(@"Item with name %@ added", item.name);

NSIndexPath *indexPath = [NSIndexPath indexPathForRow:newRowIndex inSection:0];
NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
[self.tableView insertRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];

[self dismissViewControllerAnimated:YES completion:nil]; 
```

}

这是我目前正在尝试的，但这不起作用，因为我将项目对象添加到预算数组的budgetsList 数组中。我想要的是将项目对象添加到项目数组（数组 B）中。但是我该怎么做呢？

希望这有助于一些图片。:-)

谢谢问候安德斯·H·奥普斯特鲁普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:20:07.917

如果数组 A 是一个数组数组，则 [arrayA objectAtIndex:0] 例如，将为您提供第一个数组（您的解释中的数组 B）。因此，要将对象添加到 arrayA 中的第一个数组，只需执行以下操作：

```
[[arrayA objectAtIndex:0] addObject:anObject]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:34:53.680

我不得不承认这很难理解你的问题，无论如何我试图回答一些似乎很清楚的问题：

> 但是，如果我想将项目添加到budgetsInList 数组中的对象数组中，代码看起来会是什么样子？

让我们有这两个数组：

> 数组 A 和数组 B，都是可变的。

如果我理解，您的情况或多或少是这样的：数组 B 是数组 A 中的一个对象（示例中的唯一一个），并且您想将一个对象添加到数组 B

```
[[arrayA objectAtIndex:index_of_array_b_in_a] addObject:the_object_you_want_add] 
```

让我知道这是否是您的问题。

# visual-studio-2012 - Visual Studio 2012 - silverlight - XAML 设计器 - 在之前/之后插入网格行

> ID：13127688
> 
> 赞同：4
> 
> 时间：2012-10-29T18:39:38.270
> 
> 标签：visual-studio-2012, silverlight-5.0, xaml-designer

刚刚切换到visual studio 2012，我不知道如何通过xaml 设计器将新行插入silverlight 网格。

在 Visual Studio 2010 中，我们可以通过*左键单击 > rows > insert before*轻松地将行和列插入到我们的 silverlight 网格中。当我们这样做时，它会自动重新编号所有其余控件的行号。

我不想手动重新编号每个控件，这个超级方便的功能从 2012 年开始删除了吗？还是有一些新的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T13:57:42.590

在这里找到答案：

[http://social.msdn.microsoft.com/Forums/en-US/silverlightdevtools/thread/0dc73921-c1bd-465e-b584-c14d7863fa73](http://social.msdn.microsoft.com/Forums/en-US/silverlightdevtools/thread/0dc73921-c1bd-465e-b584-c14d7863fa73)

“我找到了插入行/列。2012 年的新 UI 样式使得下拉菜单更难看到。如果您将鼠标悬停在网格的左边缘或上边缘，将弹出一个小的下拉箭头，其中的选项移动到那里而不是像 2010 年一样右键单击单元格。

此外，您现在可以从 Document 大纲中移动内容，所以我只需要 2012 年的行为支持，这样我就可以放弃 Blend。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:00:10.910

那是什么网格？，我知道：

```
<Grid x:Name="LayoutRoot" Background="White">
    <Grid.RowDefinitions>
        <RowDefinition Height="68*" />
        <RowDefinition Height="96*" />
        <RowDefinition Height="136*" />
    </Grid.RowDefinitions>
</Grid> 
```

使用此网格，我不会通过左键单击 VS 来插入行

# java - 在 Java 6 和 7 中处理安全可变参数，需要澄清

> ID：13127695
> 
> 赞同：6
> 
> 时间：2012-10-29T18:40:14.317
> 
> 标签：java

JDK 在处理安全 var args 方面的主要区别是什么？

![在此处输入图像描述](../Images/133958c15b05d676a12a323efde62c94.png)

以上在 JDK 1.6 中发出警告 -

> 类型安全：为可变参数创建 List 的通用数组

*   为什么会在此处看到此警告？
*   JDK1.7 做了什么来抑制它？

请帮我理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:53:30.250

JDK7 添加了[@SafeVarargs 注释](http://docs.oracle.com/javase/7/docs/api/java/lang/SafeVarargs.html)来说明泛型可变参数何时真正安全，并将该注释应用于例如`Collections.addAll`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:45:20.520

它是 Project Coin 的一部分。您可以在这里查看提案h​​ttp: [//mail.openjdk.java.net/pipermail/coin-dev/2009-March/000217.html](http://mail.openjdk.java.net/pipermail/coin-dev/2009-March/000217.html)

简而言之，此警告已移至方法声明而不是方法调用。对此有很好的评论：[https ://stackoverflow.com/a/3819038/891391](https://stackoverflow.com/a/3819038/891391)

# php - Yii 应用程序未激活触发器

> ID：13127700
> 
> 赞同：2
> 
> 时间：2012-10-29T18:40:19.180
> 
> 标签：php, mysql, pdo, yii

大家好 StackOverflow 的各位，我是本站的粉丝，帮我走出了无数的坑。但是这次我似乎在这里或其他任何地方都找不到答案，我的问题是：

我正在开发一个 Yii 框架应用程序来处理数据库中的数据，保持一致性和一切。基本上，我正在创建一个用于操作数据库信息的界面。我正在使用 MySQL 5.0（计划更新到 5.5）和 InnoDB。

我的开发将支持一个已经存在的模式（我称之为**main**），它有几个设计问题。我们的目标是用设计正确的新模式（我称之为**shadow**）替换旧模式。但与此同时，我们正在尝试将新模式实现为主要模式的影子模式，并通过触发器保持更改的一致性。

所有重要的更改都对影子模式进行，它使用触发器将其反映到主模式。两种模式都托管在同一台服务器中，每当通过命令行客户端或使用 MySQL Workbench 进行更改时，触发器都能很好地反映从影子到主的数据更改，但每当我使用 Yii 应用程序进行更改以隐藏数据时......仅对影子模式进行更改，而不会触发反映到主模式。

这是**shadow.tbl_device**描述并触发 DDL：

```
mysql> use shadow;
mysql> describe tbl_device;
+--------------+-------------+------+-----+-------------------+-----------------------------+
| Field        | Type        | Null | Key | Default           | Extra                       |
+--------------+-------------+------+-----+-------------------+-----------------------------+
| Id           | int(11)     | NO   | PRI | NULL              | auto_increment              |
| SerialNumber | varchar(40) | NO   |     | NULL              |                             |
| State        | varchar(20) | NO   | MUL | Recién Llegado    |                             |
| ProviderId   | int(11)     | NO   | MUL | NULL              |                             |
| OwnerId      | int(11)     | NO   | MUL | NULL              |                             |
| ProfileId    | int(11)     | YES  | MUL | NULL              |                             |
| ChipId       | int(11)     | YES  | UNI | NULL              |                             |
| IMEI         | varchar(15) | YES  |     | NULL              |                             |
| ModelNumber  | varchar(20) | YES  |     | NULL              |                             |
| FirstUsed    | date        | YES  |     | NULL              |                             |
| Brand        | varchar(45) | NO   | MUL | No Definida       |                             |
| Agreement    | varchar(20) | NO   | MUL | No Establecido    |                             |
| LastUpdated  | timestamp   | NO   |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
+--------------+-------------+------+-----+-------------------+-----------------------------+
13 rows in set (0.01 sec)

-- Trigger DDL Statements

USE `shadow`$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `shadow`.`trg_device_after_insert_produce_location_and_register_device`
AFTER INSERT ON `shadow`.`tbl_device`
FOR EACH ROW
BEGIN
    DECLARE NumCel VARCHAR(10) DEFAULT NULL;
    INSERT INTO tbl_location(DeviceId) values (New.Id);
    IF New.ChipId IS NOT NULL THEN
        SELECT CONCAT(AreaCode,Phone) INTO NumCel FROM tbl_chip WHERE Id = New.ChipId;
    END IF;

    IF New.Brand = 'Navcel' THEN
        INSERT INTO navcel.detalle_aplicacion(apId, pdRadioId, adActivo) values (1,CAST(New.SerialNumber as UNSIGNED), 1);
    END IF;
    IF New.Brand = 'Calamp' Then
        INSERT INTO main.equipos(eqId,eqNumCel,shadowDeviceId) values (CONV(SUBSTRING(New.SerialNumber,-6),16,10),NumCel,New.Id);
    ELSE
        INSERT INTO main.equipos(eqId,eqNumCel,shadowDeviceId) values (CAST(New.SerialNumber as UNSIGNED),NumCel,New.Id);
    END IF;
END$$

CREATE
DEFINER=`root`@`localhost`
TRIGGER `shadow`.`trg_device_after_update_reflect_changes`
AFTER UPDATE ON `shadow`.`tbl_device`
FOR EACH ROW
BEGIN
    DECLARE acuerdo TINYINT(4);
    DECLARE NumCel VARCHAR(10);
    DECLARE eqIdToUpdate INT;
    IF New.LastUpdated <> Old.LastUpdated THEN
        /* UPDATING THE REFLECTION OF THIS DEVICE IN THE main SCHEMA */
        IF New.Agreement = 'Renta' THEN set acuerdo := 1;
            ELSEIF New.Agreement = 'Venta' THEN set acuerdo := 2;
            ELSEIF New.Agreement = 'Prestamo' THEN set acuerdo := 3;
            ELSE set acuerdo := 0;
        END IF;
        IF New.ChipId IS NULL THEN 
            SET NumCel = NULL;
        ELSE 
            Select CONCAT(AreaCode,Phone) INTO NumCel FROM tbl_chip WHERE Id = New.ChipId;
        END IF;
        UPDATE main.equipos SET 
            eqId := New.SerialNumber,
            eqInstalado := 1,
            eqAcuerdo := acuerdo,
            eqNumCel := NumCel
        WHERE shadowDeviceId = New.id;
    END IF;
END$$ 
```

DDL 中的触发器是旨在反映对 main 的更改的触发器，这里是**main.equipos**描述（目前它不使用触发器）：

```
+-----------------------+------------------+------+-----+---------+-------+
| Field                 | Type             | Null | Key | Default | Extra |
+-----------------------+------------------+------+-----+---------+-------+
| eqId                  | int(10) unsigned | NO   | PRI | 0       |       |
| shadowDeviceId        | int(11)          | YES  | UNI | NULL    |       |
| eqNumCel              | varchar(20)      | YES  |     | NULL    |       |
| stId                  | int(10) unsigned | NO   |     | 0       |       |
| TIPO_EQUIPOS_tpId     | int(10) unsigned | YES  |     | NULL    |       |
| eqNombre              | varchar(100)     | YES  |     | NULL    |       |
| eqNUI                 | varchar(50)      | YES  |     | NULL    |       |
| eqModelo              | varchar(20)      | YES  |     | NULL    |       |
| eqPlacas              | varchar(20)      | YES  |     | NULL    |       |
| eqLatitud             | decimal(9,6)     | YES  |     | NULL    |       |
| eqLongitud            | decimal(9,6)     | YES  |     | NULL    |       |
| eqAltitud             | float            | YES  |     | NULL    |       |
| eqSatelite            | varchar(20)      | YES  |     | NULL    |       |
| eqFechaActEq          | datetime         | YES  |     | NULL    |       |
| eqFechaActSer         | datetime         | YES  |     | NULL    |       |
| eqNivelGPRS           | float            | YES  |     | NULL    |       |
| eqIcono               | varchar(200)     | YES  |     | NULL    |       |
| eqTiempoRep           | datetime         | YES  |     | NULL    |       |
| eqVersion             | varchar(20)      | YES  |     | NULL    |       |
| eqLatDinGeo           | float            | YES  |     | NULL    |       |
| eqLonDinGeo           | float            | YES  |     | NULL    |       |
| eqTiempoGeo           | datetime         | YES  |     | NULL    |       |
| eqNumEconomico        | varchar(20)      | YES  |     | NULL    |       |
| eqNumPedido           | varchar(20)      | YES  |     | NULL    |       |
| eqVelocidad           | int(10)          | YES  |     | NULL    |       |
| eqNumSerie            | varchar(45)      | YES  |     |         |       |
| EsGeocercaId          | int(10) unsigned | YES  |     | NULL    |       |
| eqPuntoCercano        | int(10)          | NO   |     | 1       |       |
| eqDistanciaCercano    | float            | NO   |     | 0       |       |
| eqIconoActual         | varchar(100)     | NO   |     | 0       |       |
| eqStatusDBS           | varchar(45)      | YES  |     |         |       |
| eqTieneDBS            | int(1)           | NO   |     | 1       |       |
| eqFechaDBS            | datetime         | YES  |     | NULL    |       |
| eqEnAlarma            | tinyint(1)       | NO   |     | 0       |       |
| eqTipoMascara         | int(11)          | NO   |     | 1       |       |
| eqAdvComunicacion     | int(11)          | NO   |     | 120     |       |
| eqFallaComunicacion   | int(11)          | NO   |     | 300     |       |
| eqStComs              | int(11)          | YES  |     | 0       |       |
| eqCiudadCercana       | int(11)          | YES  |     | NULL    |       |
| eqDistCiudadCercana   | float(11,0)      | YES  |     | NULL    |       |
| eqUsaGeocercaDinamica | int(1)           | NO   |     | 0       |       |
| eqUcStatus            | tinyint(4)       | NO   |     | 0       |       |
| eqOdometro            | float            | NO   |     | 0       |       |
| eqBoletin             | int(11)          | YES  |     | 0       |       |
| eqPaseSalida          | int(11)          | YES  |     | 0       |       |
| eqMedioTx             | varchar(20)      | YES  |     | 0       |       |
| eqDigInputs           | int(11)          | YES  |     | 0       |       |
| eqFechaActEqLocal     | datetime         | YES  |     | NULL    |       |
| eqLatitudCruda        | decimal(9,6)     | YES  |     | NULL    |       |
| eqLongitudCruda       | decimal(9,6)     | YES  |     | NULL    |       |
| eqVelocidadCruda      | int(11)          | YES  |     | NULL    |       |
| eqIconoWeb            | varchar(20)      | YES  |     | car     |       |
| eqUsaAnalogicas       | tinyint(4)       | NO   |     | 0       |       |
| eqInstalado           | tinyint(4)       | YES  |     | 0       |       |
| eqAcuerdo             | tinyint(4)       | YES  |     | NULL    |       |
| idEntidad             | int(11)          | YES  |     | NULL    |       |
| eqFallaECM            | tinyint(4)       | YES  |     | 0       |       |
+-----------------------+------------------+------+-----+---------+-------+ 
```

我认为这个表（由触发器引用）也可能是相关的：

```
mysql> describe shadow.tbl_chip;
+--------------+-------------+------+-----+---------+----------------+
| Field        | Type        | Null | Key | Default | Extra          |
+--------------+-------------+------+-----+---------+----------------+
| Id           | int(11)     | NO   | PRI | NULL    | auto_increment |
| ProviderId   | int(11)     | NO   | MUL | NULL    |                |
| OwnerId      | int(11)     | YES  | MUL | NULL    |                |
| ChipState    | varchar(15) | NO   | MUL | Nuevo   |                |
| AreaCode     | varchar(3)  | NO   |     | NULL    |                |
| Phone        | varchar(7)  | NO   |     | NULL    |                |
| SerialNumber | varchar(45) | NO   |     | NULL    |                |
| PIN          | varchar(4)  | YES  |     | NULL    |                |
| PUK          | varchar(45) | YES  |     | NULL    |                |
+--------------+-------------+------+-----+---------+----------------+
9 rows in set (0.02 sec) 
```

所以，基本上......只要通过命令行/mysql-workbench 发送查询，就会触发触发器，但不会在通过 yii（与两个数据库模式托管在同一服务器中）发送查询时触发。我看过以下内容：

根据[MySQL 5.0 文档](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)

> MySQL 触发器仅由 SQL 语句激活。它们不会被不将 SQL 语句传输到 MySQL 服务器的 API 对表所做的更改激活；特别是，它们不会被使用 NDB API 所做的更新激活。

非常感谢任何帮助或指导。提前致谢。

**编辑：** Yii 使用 PDO 执行插入/更新语句，插入反映成功，更新仍然失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T00:29:35.823

我正在使用的触发器`AFTER UPDATE`有一个子句，它以某种方式阻止在触发器内进行更改（实际上总是被触发），

```
CREATE
DEFINER=`root`@`localhost`
TRIGGER `shadow`.`trg_device_after_update_reflect_changes`
AFTER UPDATE ON `shadow`.`tbl_device`
FOR EACH ROW
BEGIN
    DECLARE acuerdo TINYINT(4);
    DECLARE NumCel VARCHAR(10);
    DECLARE eqIdToUpdate INT;
    IF New.LastUpdated <> Old.LastUpdated THEN
        ...
    END IF;
END$$ 
```

似乎`New.LastUpdated <> Old.LastUpdated`从 Yii 更新时为假，但从 CLI 或 WorkBench 更新时为真。因为在 Yii 应用程序上我没有收到 tbl_device.LastUpdated 的输入（我期待 MySQL 为我完成这项工作，现在我觉得有点愚蠢，我可以使用`beforeSave()`更新时间戳字段的方法来纠正它我正在使用验证是否确实对记录进行了更改...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:45:05.893

首先：尝试使用您的 yii 应用程序使用的相同 mysql 用户从控制台/工作台调试它。

Yii 仍然使用常规 SQL 语句，而不是您引用的文档中提到的 api 调用。

继续并放入你的 config/main.php 文件

组件/数据库部分：

```
'enableParamLogging' => true 
```

和组件/日志部分：

```
 'log' => array(
        'class' => 'CLogRouter',
        'routes' => array(
            array(
                'class'=>'CFileLogRoute',
                'levels'=>'trace,log',
                'categories' => 'system.db.CDbCommand',
                'logFile' => 'db.log',
            ),
        ),
    ), 
```

然后观察在 protected/runtime/db.log 中执行的 sql 命令：

```
$ tail -f db.log 
```

另外，您确定在更新主触发器更新影子触发器更新主触发器更新影子触发器时没有进入无限循环......？

# javascript - (function() {}) 做什么？

> ID：13127701
> 
> 赞同：-2
> 
> 时间：2012-10-29T18:40:19.330
> 
> 标签：javascript, function

下面的 () 是做什么的？似乎打印出 () 内的内容。

```
(function() {
    console.log("test");
}); 
```

ExtJS 4 是这样定义版本的：

```
(function() {

// Current core version
var version = '4.1.1', Version;
    Ext.Version = Version = Ext.extend(Object, {
    ...
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-29T18:44:40.620

我将不得不假设您错误地复制了代码。

[这无济于事]

```
(function() {
console.log("test");
}); 
```

[这会将“测试”写入控制台]

```
(function() {
console.log("test");
}()); 
```

您似乎在问的真正问题是，*为什么*。

`function () {...}`定义了一个新的匿名函数。

`function () {...}()`调用匿名函数

`(function () {...}());`parens 用于强制执行函数。如果没有某种运算符，JS 解释器会抛出一个 SyntaxError。

有人将[立即调用的函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)内联在某些代码中的原因是引入了一个新的变量范围。在 JavaScript 中，块没有作用域，这对于不了解该问题的新开发人员来说可能会导致一些非常混乱的错误。

此外，使用函数作为包装器可以防止`var`和`function`声明污染全局命名空间，而是在 IIFE 中私有地保存。这是*一件好事™*。

* * *

鉴于发布的附加信息 J Any：

[“这就是 ExtJS 4 定义版本的方式”]

```
(function() {

// Current core version
var version = '4.1.1', Version;
    Ext.Version = Version = Ext.extend(Object, {
    ...
}); 
```

发布的代码不完整。大括号和括号没有正确匹配。

结局***不***`});`属于。`Ext.extend(Object, {` *`(function () {`*

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-29T18:41:32.833

它什么也不做，因为匿名函数或其中的任何其他符号都没有公开，所以永远不会调用该代码。

如果`()`加到最后，就是一个自调用匿名函数，通常用于创建一些其他代码无法访问的局部变量

```
(function() {
console.log("test");
})(); 
```

Ext-JS 的代码之所以有意义，是因为它们通过调用使匿名函数内部的一些代码可供外部使用

```
Ext.Version = Version = Ext.extend(Object, ... 
```

而且您的示例 Ext-JS 代码中有错字。他们的代码实际上如下

```
(function() {
    // Current core version
    var version = '4.1.1', Version;
    // Exposes our local Version into the global Ext.Version object
    Ext.Version = Version = Ext.extend(Object, {
    //... More code
    });   
}()) // See the brackets after the function? That runs the code above immediately 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-29T18:42:50.950

实际上，仅凭这一点什么都做不了。它定义了一个匿名函数，以后永远无法引用或调用该函数。

然而，这：

```
(function() {
console.log("test");
})(); 
```

将定义一个匿名函数*并调用它*，将“test”打印到控制台。第一位与您在问题中的相同，最后一位`()`调用该函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T18:42:03.157

它什么也不做。它是一个用括号括起来的函数表达式。没有它们，你会得到一个错误。*

# firefox - 不同的 Firefox 安装接收不同的 cookie（来自同一页面）

> ID：13127702
> 
> 赞同：0
> 
> 时间：2012-10-29T18:40:28.543
> 
> 标签：firefox, cookies, missing-cookies

我想知道是否有人能想到为什么在不同机器上安装的两个新安装的 Firefox 在访问同一个站点时可能会收到截然不同数量的 cookie 的原因。我知道每个请求可以删除多少个 cookie 是有限制的，所以我实际上在同一个页面上点击了大约 10 次，同时累积了所有的 cookie。

我的两个 Firefox 安装**是**不同的版本（10 和 16），但我不确定这有多重要。我似乎在网络上找不到太多有用的信息，因为“Firefox 没有在我的机器上放置足够的 cookie”似乎不是一个流行的搜索。:) 两个 Firefox 安装都是全新的——我没有更改任何默认设置。

我已经要求我们的 IT-Ops 人员将盒子升级到 FF16，但这需要一些时间。我只是想，与此同时，也许有人可能知道一些与接受 cookie 或类似的东西有关的超级机密保修无效的“关于：配置”条目？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:13:41.233

Firefox 升级成功了。不确定这是否是由于 10 和 16 之间的默认安全设置差异，但我现在看到两台机器上的所有 cookie 一致。

# python - 制作一个大的预渲染地图并在 Pygame 中滚动它

> ID：13127706
> 
> 赞同：-1
> 
> 时间：2012-10-29T18:40:41.227
> 
> 标签：python, image, map, scroll, pygame

我想使用图像制作地图。它应该比游戏屏幕大，所以我需要一种在角色移动时滚动地图的方法。我该怎么做呢？

我查看了一些现有的游戏，但我对 Python 和一般编码仍然相当陌生，并且不太了解。

我正在使用 Python 3.2 和 Pygame 1.9.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:52:52.250

一个简单的方法可能是有一个`offset_x`和`offset_y`变量。这些变量存储屏幕左上角的位置。渲染图像时，请确保它的 x 位置是`x + offset_x`and `y + offset_y`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-15T16:20:48.443

关于偏移想法的一些额外细节：

如果您计划在地图中包含诸如树木之类的障碍物，则可以将树木作为单独的对象，然后将它们粘贴到地图表面。然后，您可以使用偏移量在更新之前将地图表面及其所有障碍物和播放器粘贴到显示器上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T20:58:11.447

我写了一个简单的滚动图块演示：[如何使用 pygame 将图像加载到网格中，而不仅仅是使用填充颜色？](https://stackoverflow.com/questions/12663764/how-to-load-an-image-to-a-grid-using-pygame-instead-of-just-using-a-fill-color/12665286#12665286)

随意拿代码。如果您想滚动单个图像而不是图块，则概念是相同的。您使用偏移量绘制，就像 RyladAlmanza 说的那样。

![瓦片集演示](../Images/086cd43fe41aa3daaafc68bfcf5eac15.png)

# python - 确定当前python安装父路径、python文件夹名称和完整路径

> ID：13127707
> 
> 赞同：0
> 
> 时间：2012-10-29T18:40:47.277
> 
> 标签：python, path, installation, cross-platform, instance

Windows 上的 sys.prefix 是 python 文件夹，但 linux 它通常指向 /usr，这意味着必须按名称搜索目录，除非有其他方法。

在那儿？

依赖文件夹名称也很混乱，'Python27'，'python2.7'只是命名频繁的。

这个脚本是不是有点矫枉过正？我这样做对吗？

os.environ 无能为力，因为可能没有 PYTHON_PATH，或者运行的内容可能不匹配

sys.executable 无济于事，因为它只适用于 Windows。

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-
# rev 0.0.0.1
import os, platform, sys
"""File: _python_pfn.py
Seems excessive...
3 imports, 3 functions, 30 lines just to 
determine current python installation parent path, python folder name, and full path
"""
def _python_parent():
    """assume linux, but if windows just return sys.prefix"""
    ret = os.path.join('{}'.format(sys.prefix), 'lib')
    if platform.uname()[0] == 'Windows':
        ret = '{}'.format(sys.prefix)
    return ret

def _python_name(path):#, major=None, minor=None
    """assume windows, but if not listdir and find"""
    ma, mi = (str(sys.version_info[0]), str(sys.version_info[1]))
    #if major is not None: ma = str(major)
    #if minor is not None: ma = str(minor)
    ret = os.path.split(path)[1]
    if platform.uname()[0] != 'Windows':
        ls = [k for k in os.listdir(path) if os.path.isdir(os.path.join(path, k)) ]
        for k in ls:
            if k.lower().find('python') != -1:
                if k.find(ma) != -1:
                    if k.find(mi) != -1:
                        ret = k
    return ret

def _python_path(path):
    """use as _python_path(_python_parent())"""
    return os.path.join(path, _python_name(path)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:52:25.233

获得路径还不够吗

```
>>> import os
>>> os.path.dirname(os.__file__)
'/usr/lib/python2.7' 
```

# python - 如何删除 .upload 文件

> ID：13127708
> 
> 赞同：0
> 
> 时间：2012-10-29T18:40:47.667
> 
> 标签：python, django, ubuntu

当我使用表单将大视频上传到服务器时，在 /tmp 目录中创建了一个 temp.upload。这个 .upload 是在哪里创建的？上传完成后可以删除吗？我在 ubuntun 上使用 Django 和 python。

我检查 Django 文档以进行文件上传。它说：

“如果上传的文件太大，Django 会将上传的文件写入存储在系统临时目录中的临时文件中。在类 Unix 平台上，这意味着您可以期望 Django 生成一个名为 /tmp/tmpzfp6I6 之类的文件。上传。如果上传足够大，您可以看到这个文件随着 Django 将数据流式传输到磁盘而增大。

上传完成后如何让Django自动删除这个文件？如何获取此临时 .upload 路径信息？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:01:56.167

如果文件大小大于 2.5MB，Django 将在保存之前将上传的文件写入 /tmp 目录（在 Linux 上）。上传完成后，您可以手动删除文件，也可以使用 cron 作业（或类似的东西）自动删除临时文件。

# php - CSV 导出和下载导致内部服务器错误

> ID：13127711
> 
> 赞同：0
> 
> 时间：2012-10-29T18:41:07.083
> 
> 标签：php, mysql, wordpress, csv

我有一个 php 脚本，它查询一个相当大的数据库并将结果存储到 CSV 中。尝试下载文件时，我不断收到 500 内部服务器错误。

我的预感是，由于它需要放入 CSV 中超过 2000 多行，所以它正在超时。我的代码在一个文本文件中。

我能做些什么来解决这个问题？这是需要在 php.ini 中完成的事情，还是我需要 SSH 并修改 mysql 超时？我只是把这一切都错了，我应该把它存储到服务器上吗？

只需要一点指导应该如何做到这一点。提前致谢。

[http://andreawin.ladev.co/csv-export.txt](http://andreawine.ladev.co/csv-export.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:43:33.733

您可以在 PHP 错误日志中检查 500 错误的具体原因，但如果实际上是脚本超时，则有多种方法可以设置超时限制。

您可以通过使用该函数来增加这个（并且只有这个）脚本允许运行的时间量`set_time_limit(TIMEOUT)`，假设您没有使用`safe mode`，其中`TIMEOUT`是最大秒数 - [http://php.net/manual/en/ function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

您可以通过将最大秒数设置`max_execution_time TIMEOUT`为更高的值来增加`php.ini`允许服务器上所有脚本运行的时间量- [http://www.php.net/manual/en/info.configuration。 php#ini.max-执行时间](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)`TIMEOUT`

`.htaccess`您可以通过使用`php_value max_execution_time TIMEOUT`where`TIMEOUT`是最大秒数来设置文件中的值来增加特定站点上或特定文件夹下的脚本可以运行的时间量。

# javascript - 无法在 jquery 的 .html 中使用定义的 javascript 变量

> ID：13127716
> 
> 赞同：1
> 
> 时间：2012-10-29T18:41:49.697
> 
> 标签：javascript, jquery, variables

我有点在 .html(); 中调用一个变量；但它不能正常工作。

```
var cap2 = "Here is a muddy truck.";
id = $(this).attr("id");
$("#caption").html("cap"+id); // this literally outputs "cap2" into my caption div 
```

显然这不是完整的代码，但我认为它足以让知识渊博的人指出我正确的方向。

我还应该注意最后一行何时看起来像这样

```
$("#caption").html(cap2); // this correctly outputs "Here is a muddy truck" 
```

一切都很好，但我需要数字槽是动态的。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:46:05.200

如果您的`cap2`变量是全局声明的，您可以使用：

```
$("#caption").html(window["cap"+id]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:45:04.890

您必须使用“邪恶”评估功能：

```
$("#caption").html(eval("cap"+id)); 
```

邪恶，因为它可以做各种危险的事情！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:45:13.923

在 javascript 中，'+' 用于连接字符串，并且由于函数接收字符串参数，因此您将其“cap2”作为字符串发送，而不是变量。
该`eval()`方法将获取您给它的字符串并像代码一样运行它，因此，将“cap2”变量发送给该`.html()`方法。

```
$("#caption").html(eval("cap"+id)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T18:46:24.387

javascript 函数`eval`接受一个字符串 a 将其评估为 javascript 变量、函数等。使用`.html(eval("cap"+id));`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T18:52:57.243

只是一个通常如何处理此类事情的示例：

```
<a href="#" id="a0"></a>
<a href="#" id="a1"></a>
<a href="#" id="a2"></a>
<a href="#" id="a3"></a> 
```

* * *

```
$('a').on('click', function(e) {
    e.preventDefault();
    var caps = [
                "Here is a muddy truck.",
                "Here is a strange duck",
                "Here is the proper code",
                "Here's Johnny"
                ],
         id = this.id.replace('a','');

    $("#caption").html(caps[id]);
}); 
```

最好在 click 函数之外声明数组，但这只是一个例子！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-29T18:53:47.807

Adeneo 的评论可能是迄今为止最有帮助的。如果您必须引用具有不同数字的变量，请按正确的顺序创建一个数组并调用索引：

```
var caption = $('#caption'), // no use writing a variable on each action
    caps = [
        "Here is a muddy truck.",
        "another caption"
    ]; // fill with your captions

$(document).on('click', 'a', function() {
    caption.html(caps[this.id]);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T19:20:30.643

为什么不把你的字符串粘贴到散列中呢？这样您就不必对 id 进行任何算术运算。

# javascript - 更改一组 var 值的最快方法

> ID：13127718
> 
> 赞同：-2
> 
> 时间：2012-10-29T18:41:55.013
> 
> 标签：javascript, variables

我有一堆变量的值是从数据库中获取的。它们是“真”或“假”的布尔值。将所有具有“true”值的变量更改为字符串值“yes”的最简单方法是什么，并且所有值为“false”的变量都将更改为“no”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:46:29.083

```
for (var i=0; i<myArray.length; i++) {
    myArray[i] = myArray[i]? "yes" : "no";
} 
```

# vba - 搜索所有打开的文档，查找文本，并删除到文档末尾 Word 宏

> ID：13127721
> 
> 赞同：3
> 
> 时间：2012-10-29T18:41:57.243
> 
> 标签：vba, loops, ms-word, documents

我正在尝试编写一个 vba word 宏来搜索所有打开的文档，找到所有出现的文本“DocumentEnd9999”，并删除每个文档中该文本下方的所有内容。

```
Sub deletion()

Dim endTerm As String
endTerm = "DocumentEnd9999"

'Loop Dim
Dim n, c As Integer
n = Application.Documents.Count

For c = 1 To n
    Set myRange = Application.Documents(c).StoryRanges
    For Each myRange In ActiveDocument.StoryRanges
        Selection.Find.ClearFormatting
        With Selection.Find
            .Text = endTerm
            .Replacement.Text = ""
            .Forward = True
            .Wrap = wdFindContinue
        End With
        Selection.Find.Execute
        Selection.Extend
        Selection.Find.ClearFormatting
        With myRange.Find
            myRange.Characters.Last.Select
            .Forward = True
            .Wrap = wdFindAsk
        End With
        Application.DisplayAlerts = False
        Selection.Find.Execute
        Selection.Delete
    Next myRange
Next c

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:09:39.917

以下代码应执行您在文档主体中查找的内容。不确定您使用 StoryRanges 的确切原因。我对那个集合不太熟悉，所以我没有包括它。

```
Sub deletion()

    Dim endTerm As String
    endTerm = "DocumentEnd9999"

    Dim n, c As Integer
    n = Application.Documents.Count
    c = 1

    Dim r As Range

    Windows(c).Activate

    Selection.Find.ClearFormatting
        With Selection.Find
            .Text = endTerm
            .Forward = True
            .Wrap = wdFindContinue
        End With

    Do

        Selection.Find.Execute    

        Set r = ActiveDocument.Range(Selection.Range.Start, ActiveDocument.Content.End)
        r.Delete

        c = c + 1

        On Error Resume Next
        Windows(c).Activate

    Loop Until c > n

End Sub 
```

# php - 我如何进行 ajax 实时搜索，使现有列表逐渐变细而不是拉新结果？

> ID：13127722
> 
> 赞同：0
> 
> 时间：2012-10-29T18:41:58.990
> 
> 标签：php, javascript, mysql, ajax

我需要构建一个 ajax 搜索功能，当用户键入时，它将缩小显示的列表以仅显示完全匹配。

我不是在找人为我做我的工作，但一些具体的提示将不胜感激。

具体来说：-我一直在尝试在线查找教程，但是我发现的所有示例都涉及在用户键入时拉取新的搜索结果，这并不是我想要的。有谁知道任何可以为我提供所需信息的资源？-此外，除了基本的 ajax 框架，比如构建 httprequest 对象，我必须做些什么来实现这样的东西的一般逻辑是什么？

详细地说，我有一个动态显示的数据库内容列表。我已将输出推送到一个数组中，该数组显示给用户。因此，我有我需要逐渐减少的内容列表。

所以我需要找到一种方法来缩小这个特定的输出数组作为用户类型。

抱歉，如果我不够具体，我正在尝试提供尽可能多的信息。

任何建议将被认真考虑！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:14:25.473

许多 JS typeahead 脚本都内置了此功能。您可以选择从 ajax 调用或预填充的数组/json 中提取数据。考虑[twitter bootstrap typeahead example](http://twitter.github.com/bootstrap/javascript.html#typeahead)，您可以提供`data-source`从中进行填充。

```
<input type="text" class="span3" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source="['Alabama','Alaska','Arizona']"> 
```

# c++ - 将字符串传递给 JNI 时访问冲突 ((0xc0000005))

> ID：13127723
> 
> 赞同：0
> 
> 时间：2012-10-29T18:42:02.177
> 
> 标签：c++, java-native-interface

我有一个简单的 java 类，它通过 JNI 调用一些用 C++ 实现的本机方法。

java代码看起来像这样

```
String in_test="./xml/input/imagen_0023.xml";
//String in_test="avc";
String out_test=acr.testString2(in_test);
System.out.println("test: " + out_test); 
```

testString2 的实现在一个 dll 中，由 java 程序直接调用。testString2 方法的定义如下。

```
JNIEXPORT jstring JNICALL Java_com_accsa_ocr_AutomaticCharacterRecognition_testString2(JNIEnv *env, jobject obj, jstring string) 
{
    const char *str = env->GetStringUTFChars(string, 0);

    //std::string s=amt_test_string(str);
    std::string s="hello: "+(std::string)str;
    env->ReleaseStringUTFChars(string, str);
    return env->NewStringUTF(s.c_str());
} 
```

调用的 amt_test_string 在别处定义（另一个 dll）：

```
std::string AMT_EXPORT amt_test_string(std::string in)
{
    std::string s="path: "+in;
    std::cout<<s<<std::endl;
    return s;
} 
```

如果我像这样运行它，它可以很好地工作，但是一旦我取消注释 std::string s=amt_test_string(str) 我就会收到如下访问冲突错误：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x77ae2cc7, pid=8072, tid=7328
#
# JRE version: 7.0_09-b05
# Java VM: Java HotSpot(TM) Client VM (23.5-b02 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [ntdll.dll+0x52cc7]  RtlFreeHeap+0xcd 
```

但这种行为在某种程度上是不稳定的。如果我减少输入参数的长度，即使用

```
//String in_test="avc"; 
```

该程序再次运行。根据我在谷歌上的学习，这与在释放堆栈分配的变量后使用它们有关，但我真的不知道如何调试它。

编辑 1：我正在使用 Visual Studio 2010 和 Oracle 的 JDK 1.7.09 在 windows 7 32 位上编译它

编辑 2： AMT_EXPORT 宏只是导出符号的便捷快捷方式。请参阅下面的定义：

```
#ifdef WIN32
    #ifdef AMT_EXPORTS
        #define AMT_EXPORT __declspec(dllexport)
    #else
        #define AMT_EXPORT __declspec(dllimport)
    #endif
#else
    #define AMT_EXPORT
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:11:36.500

我认为你不应该`const char *`投到`std::string`

```
std::string s="hello: "+(std::string)str; 
```

通过调用相应的 std::string 构造函数来替换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:54:25.713

对于调试 JNI 代码，[本文](http://www.codeproject.com/Articles/69965/Debugging-a-JNI-Application-using-Netbeans-and-Vis)中发布的一种方法可能很有用（它是关于使用 Netbeans 和 Visual Studio 调试 JNI）。这很简单 - 只需启动您的 Java 程序，然后在 Visual Studio 中选择 Debug -> Attach to process 并选择运行您的程序的 java.exe 进程。

当您向 C++ 代码添加断点时，Visual Studio 将在它们上中断。瞧：）

# php - 在构建网站时，php 和 javascript 代码之间是否存在“正确”平衡？

> ID：13127727
> 
> 赞同：0
> 
> 时间：2012-10-29T18:42:28.887
> 
> 标签：php, javascript, jquery

我想知道在编写 php 代码和 javascript 代码之间的网站时是否存在“正确”平衡。我的意思是必须使用 php 在服务器上编写代码的多少和哪些部分，以及网站的哪些部分必须是用javascript编写，以便它们可以在用户的​​网络浏览器上本地运行，并从服务器的肩上消除一些工作量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:44:03.873

这完全基于只有您知道的信息/知识。坐下来规划一下客户端可以做什么，比如验证代码。写下我必须在服务器端保留的内容（数据库调用等）。只有你才能真正确定这一点。

请记住，您即将编写的应用程序可能会被潜在用户使用，如果他们必须等待简单的事情，例如单击单选按钮（在服务器端完成），那么他们将非常失望。保持简单，旨在保持验证，以及客户端的小点击事件。将服务器端保留为数据库调用（更新等）。

# java - 如何从 HTML 下拉列表中的选定选项更新/插入 Oracle 数据库？

> ID：13127729
> 
> 赞同：0
> 
> 时间：2012-10-29T18:42:41.117
> 
> 标签：java, html, oracle, jsp, drop-down-menu

好的，首先，我对网页设计相当陌生。但是对于我的一个项目，我被要求创建一个页面，该页面根据多个数据库中的表填充多个下拉列表。而且我相信我已经让这部分工作了，看看我的代码到目前为止（一个jsp页面）：

**代码选择器.jsp**

```
<%@page import="java.sql.*"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
                <title>Codes Page</title>
        </head>
        <body>
            <form name = "codes" method = "POST" action="....." target="_self">
                <h1>Please select the applicable codes:</h1>
                <select name='code1' onchange="showState(this.value)">  
                <option value="none">Code One: None</option>  
                <%
                    String debug = "ON";

                    if(debug.equals("ON"))
                    {
                        System.out.println("***DEBUGGING IS TURNED ON!!!***");
                    }

                    //Pulls the ids and descriptions from the first codes table and stores them in the first drop down
                    try
                    {
                        String caseId = request.getParameter("caseID");
                        //caseId = "30";

                        if (caseId == null)
                        {
                            //debug
                            System.out.println("The caseID is NULL!");

                            Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();  
                            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@url:sid","username","password");  
                            Statement stmt = con.createStatement();  
                            ResultSet rs = stmt.executeQuery("select id, descr from case_codes");
                            String tempString;

                            while(rs.next())
                            {
                                //If the code description is more than 125 characters long, truncate the string and append "..." to the end of it.
                                if (rs.getString(2).length() > 125)
                                {
                                    tempString = rs.getString(2).substring(0, 125);
                                    %>
                                        <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=tempString%>...</option>  
                                    <%
                                }
                                //Else just insert the whole description into the option field.
                                else
                                {
                                    %>
                                        <option value="<%=rs.getString(1)%>"><%=rs.getString(1)%> <%=rs.getString(2)%></option>  
                                    <%
                                }

                            }

                            //Closes the database connection
                            stmt.close();
                            con.close();
                        }
                        else if (caseId != null)
                        {
                            if(debug.equals("ON"))
                            {
                                System.out.println("The caseID is NOT NULL!");
                            }

                            Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();  
                            Connection con = DriverManager.getConnection("jdbc:oracle:thin:@url:sid","username","password");  
                            Statement stmt = con.createStatement();

                            //Returns a list of all the tables and views in the database
                            if(debug.equals("ON"))
                            {
                                DatabaseMetaData meta = con.getMetaData();
                                ResultSet res = meta.getTables(null, null, null, new String[] {"TABLE"});

                                while (res.next()) 
                                {
                                    System.out.println(
                                        "   "+res.getString("TABLE_CAT") 
                                       + ", "+res.getString("TABLE_SCHEM")
                                       + ", "+res.getString("TABLE_NAME")
                                       + ", "+res.getString("TABLE_TYPE")
                                       + ", "+res.getString("REMARKS")); 
                                 }
                            }

                            if(debug.equals("ON"))
                            {
                                System.out.println("BEFORE SQL Statement: select id from cases");
                            }

                            //Returns a result set of all the ids in the cases table
                            ResultSet rs = stmt.executeQuery("select id from cases");

                            if(debug.equals("ON"))
                            {
                                System.out.println("AFTER SQL Statement: select id from cases");
                            }

                            while(rs.next())
                            {
                                if(debug.equals("ON"))
                                {
                                    System.out.println("The rs is: " + rs.getString(1));
                                }

                                if(rs.getString(1).equals(caseId))
                                {
                                    if(debug.equals("ON"))
                                    {
                                        System.out.println("Case ID Found!");
                                    }

                                    ResultSet rs2 = stmt.executeQuery("select rlawcd_id, display_seq from cs_rlawcd where cs_id = " + caseId);

                                    while(rs2.next())
                                    {
                                        if(debug.equals("ON"))
                                        {
                                            System.out.println("Inside rs2 while loop");

                                        }

                                        //If no values are returned in the rlawcd table, populate the drop down as you normally would
                                        if (rs2 == null)
                                        {
                                            if(debug.equals("ON"))
                                            {
                                                System.out.println("Inside rs2 IF");
                                                System.out.println("rs2 = null");
                                            }

                                            ResultSet rs3 = stmt.executeQuery("select id, descr from case_codes");
                                            String tempString;

                                            while(rs3.next())
                                            {
                                                //If the code description is more than 125 characters long, truncate the string and append "..." to the end of it.
                                                if (rs3.getString(2).length() > 125)
                                                {
                                                    tempString = rs3.getString(2).substring(0, 125);
                                                    %>
                                                        <option value="<%=rs3.getString(1)%>"><%=rs3.getString(1)%> <%=tempString%>...</option>  
                                                    <%
                                                }
                                                //Else just insert the whole description into the option field.
                                                else
                                                {
                                                    %>
                                                        <option value="<%=rs3.getString(1)%>"><%=rs3.getString(1)%> <%=rs3.getString(2)%></option>  
                                                    <%
                                                }

                                            }
                                        }
                                        //Else if the values are indeed returned and the display sequence equals 1
                                        //populate the drop downs normally but with the returned values set as the selected/default items
                                        else if(rs2.getString(2).equals("1"))
                                        {
                                            if(debug.equals("ON"))
                                            {
                                                System.out.println("Inside rs2 ELSE IF");
                                                System.out.println("The rs2 is NOT NULL!");
                                            }

                                            String codeID = rs2.getString(1);

                                            ResultSet rs3 = stmt.executeQuery("select id, descr from case_codes");
                                            String tempString;

                                            while(rs3.next())
                                            {
                                                if(debug.equals("ON"))
                                                {
                                                    System.out.println("Inside rs3 while loop");
                                                }

                                                if (rs3.getString(1).equals(codeID))
                                                {
                                                    if(debug.equals("ON"))
                                                    {
                                                        System.out.println("Inside rs3 IF");
                                                        System.out.println("A matching law code was found!");
                                                    }

                                                    //If the code description is more than 125 characters long, truncate the string and append "..." to the end of it.
                                                    if (rs3.getString(2).length() > 125)
                                                    {
                                                        tempString = rs3.getString(2).substring(0, 125);
                                                        %>
                                                            <option selected="<%=rs3.getString(1)%>"><%=rs3.getString(1)%> <%=tempString%>...</option>  
                                                        <%
                                                    }
                                                    //Else just insert the whole description into the default/selected option field.
                                                    else
                                                    {
                                                        %>
                                                            <option selected="<%=rs3.getString(1)%>"><%=rs3.getString(1)%> <%=rs3.getString(2)%></option>  
                                                        <%
                                                    }       
                                                }
                                                else
                                                {
                                                    //If the code description is more than 125 characters long, truncate the string and append "..." to the end of it.
                                                    if (rs3.getString(2).length() > 125)
                                                    {
                                                        tempString = rs3.getString(2).substring(0, 125);
                                                        %>
                                                            <option value="<%=rs3.getString(1)%>"><%=rs3.getString(1)%> <%=tempString%>...</option>  
                                                        <%
                                                    }
                                                    //Else just insert the whole description into the option field.
                                                    else
                                                    {
                                                        %>
                                                            <option value="<%=rs3.getString(1)%>"><%=rs3.getString(1)%> <%=rs3.getString(2)%></option>  
                                                        <%
                                                    }       
                                                }
                                            }
                                        }
                                        else
                                        {
                                            if(debug.equals("ON"))
                                            {
                                                System.out.println("Inside the rs2 ELSE");
                                                System.out.println("Something must have gone wrong.");
                                            }
                                        }
                                    }
                                }
                                else
                                {
                                    //do nothing...
                                }
                            }
                            //Closes the database connection
                            stmt.close();
                            con.close();
                        }
                        else
                        {
                            //debug
                            System.out.println("Something weird happened.");
                        }

                    }
                    catch (ClassNotFoundException e)
                    {
                        System.err.println("ClassNotFoundException: " + e.getMessage());
                    } 
                    catch (SQLException e)
                    {
                        System.err.println("SQLException: " + e.getMessage());
                    }
                    catch (Exception e)
                    {
                        System.err.println("Generic Exception: " + e.getMessage());
                    }       
                %>
                </select>
                <br>
                <br>
                <input type="submit" value="Submit">
              </form>
          </body> 
      </html> 
```

但是，现在我需要添加根据用户在上方下拉框中选择的内容使用更新和插入语句来更新数据库的功能。同样，对此相当陌生，我不确定这样做的最佳方法是什么？我在 google 上发现的很多内容表明此功能主要涉及这部分代码：

`<form name = "codes" method = "POST" action="...." target="_self">`

似乎很多在线示例都建议使用单独的 php 页面？但我并不真正了解两者如何相互链接，以及一个页面内容如何在另一页面和您要更新的数据库之间传输。任何有这方面经验的人都可以在这里提供一些建议或指出我下一步可能想要做什么的正确方向，以便能够在`submit`单击按钮时写入数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:12:34.527

嗯，第一件事是 HTTP 帖子。您将表单提交到一个特殊页面。您将在请求参数中获得所选项目。

所以你创建了一个`<form ... >...</form>`导致你的jsp的动作。现在您将在提交表单后获取参数。

动作应该是`action="./CodeSelector.jsp"`

现在一些批评者对您的代码：

1.  它太长了，我建议将行为拆分为某种 form.jsp 和另一个 store.jsp。您应该拆分您的代码，以便更好地了解您的代码。
2.  **NEVER**，在**NO CIRCUSTANCES**下采用 request-parameter 并将它们附加到查询中。这将导致严重的序列风险。只是不要从这个开始。始终使用[PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)并设置参数。这将导致在[SQL-injections](http://en.wikipedia.org/wiki/SQL_injection)方面的安全查询。
3.  考虑使用更现代的框架来创建 Java 支持的网站。我使用过[Java Server Faces](http://javaserverfaces.java.net/)和[GWT](https://developers.google.com/web-toolkit/)。你将有更多的东西要学，但对 Code 的理解却更少（我认为）。

单个 JSP 页面将导致一次不可测试的写入。永远不懂代码。使用现代框架，或 JSP 和[CDI](http://docs.oracle.com/javaee/6/tutorial/doc/gjbnz.html)，您可以将代码拆分为 gui (JSP) 和逻辑 (Java)

# php - php - Sql注入

> ID：13127731
> 
> 赞同：-3
> 
> 时间：2012-10-29T18:42:44.547
> 
> 标签：php, mysql, pdo

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我还在`mysql_`一个旧项目中使用 ext，那么`mysql_real_escape_string()`足以防止 sql 注入吗？或者我必须使用`expressions`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:45:00.150

这取决于您要参考的内容。`mysql_real_escape_string`如果值是`int`or ，您通常不会使用`double`。但是，如果它是一个字符串（并且您在插入可能被您以外的其他人操作的数据时要注意），您应该是安全的。

PDO 并不是注入的全部，但它确实让事情变得简单多了。但是，`mysql_*`已成功使用多年，并没有降低网站的安全性（仅取决于谁编写了该网站）。

# json - 使用 D3.json 函数导入 json 数据

> ID：13127734
> 
> 赞同：0
> 
> 时间：2012-10-29T18:43:18.180
> 
> 标签：json, d3.js

我目前正在尝试自定义这样的示例... [http://bl.ocks.org/1377729](http://bl.ocks.org/1377729)以使用 D3.json 函数获取 json 数据。

目前我一直在尝试这样做：

```
 d3.json("http:", function(json) { 

     var nodes = [];
     var labelAnchors = []; 
```

在这里我试图导入函数，但它没有做任何事情

```
 for(var i = 0; i < 30; i++) {

            var node = json;
            nodes.push(node);
            labelAnchors.push({
                node : node
            });
            labelAnchors.push({
                node : node
            });
        }; 
```

我也尝试将函数放入 .text 函数中

```
 anchorNode.append("svg:text")
            .text(function(d, i) {return i % 2 == 0 ? "" : d.node.json  })
            .style("fill", "#555")
            .style("font-family", "Arial")
            .style("font-size", 12); 
```

谁能告诉我我要去哪里错了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T00:15:16.700

首先通过逐步遍历您的 json 数组来构建节点数组和 labelAnchors 数组。

```
 for (var i = 0; i < json.length; i++) {
     var node = json[i];
     nodes.push(node);
     labelAnchors.push({
       node : node
     });
     labelAnchors.push({
       node : node
     });
   }; 
```

该示例依赖于具有名为 的键的对象`label`，而在您的情况下，该键被称为`Name`。因此，您需要将示例代码调整为：

```
anchorNode.append("svg:text")
    .text(function(d, i) {
      return i % 2 == 0 ? "" : d.node.Name;
    })
    .style("fill", "#555")
    .style("font-family", "Arial")
    .style("font-size", 12); 
```

# ruby-on-rails - rails 生成添加新页面的脚本？

> ID：13127740
> 
> 赞同：0
> 
> 时间：2012-10-29T18:43:44.193
> 
> 标签：ruby-on-rails, rails-generate

在 Rails 中创建一个新页面（在现有控制器中）是一个简单的 3 步过程；有什么方法可以自动化吗？创建执行以下操作的生成脚本：

1.  向控制器添加方法：

    def newPage 结束

2.  添加路线

    获取 'controller/newPage' 匹配 'url' => 'controller#newPage'

3.  在相应目录下创建 newPage.html.erb

我宁愿使用以下命令自动执行此操作：

```
rails g controller:add newPage 
```

我不确定从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:40:07.683

如果你使用命令

```
rails generate controller controller_name page_name 
```

它会创建

1.  控制器（如果尚未制作）以及其中的方法。
2.  routes.rb 中适当的 get 语句
3.  在控制器的视图目录（app/views/controller_name/page_name.html.erb）中生成视图页面
4.  适当的测试/helper/css/javascripts

# php - 使用奇数和偶数类交替注释颜色

> ID：13127742
> 
> 赞同：0
> 
> 时间：2012-10-29T18:43:51.267
> 
> 标签：php, css, wordpress, comments

我早些时候问过这个问题，但没有得到回应。:(

我有新的 WordPress 2.7 评论循环，我知道您可以简单地将 .odd 和 .even 添加到您的 CSS 以获得交替的评论颜色，我已经这样做了：

```
.odd { background: #ccc; color: #000; }
.even { background: #bbb; color: #000; } 
```

但是，我有两种不同的背景 - 浅色和深色 - 用户可以从选项面板中进行选择。因此，我需要两个不同版本的奇数类和偶数类，这样我就可以为每个类设置不同的颜色，因为上述背景颜色在浅色背景下看起来不错，但在深色背景下不太好。

但是使用 2.7 注释循环，奇数类和偶数类实际上并不存在于代码中。如果他们是，我会做这样的事情：

```
$background = get_option('mytheme_background');
if ($background== "option1") { echo '<div class="odd-dark">'; } 
if ($background== "option1") { echo '<div class="even-dark">'; }
if ($background== "option2") { echo '<div class="odd-light">'; } 
if ($background== "option2") { echo '<div class="even-light">'; } 
```

因此，由于 .odd 和 .even 实际上并不存在于代码中，我如何才能在 CSS 中拥有两个不同的 .odd 和 .even 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:51:02.937

**PHP**：

```
$background = get_option('mytheme_background');
// no more - between class names to use specializations of odd/even in CSS
if ($background== "option1") { echo '<div class="odd dark">'; } 
if ($background== "option1") { echo '<div class="even dark">'; }
if ($background== "option2") { echo '<div class="odd light">'; } 
if ($background== "option2") { echo '<div class="even light">'; } 
```

**和 CSS**：

```
/* now specialize 2 variants for each type odd/even * dark/light */
.odd.light { background: #ccc; color: #000; }
.even.light { background: #bbb; color: #000; }
.odd.dark { background: #ccc; color: #000; }
.even.dark { background: #bbb; color: #000; } 
```

**试试这个**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:58:29.267

您可以结合使用 CSS 类：

```
echo '<div class="even option1">';
echo '<div class="even option2">';
echo '<div class="odd option1">';
echo '<div class="odd option2">'; 
```

在 CSS 文件中，您指定：

```
.option1.even { background-color: #bbb; color: black; }
.option1.odd { background-color: #ccc; color: black; }
.option2.even { background-color: #222; color: snow; }
.option2.odd { background-color: #444; color: white; } 
```

或者，您可以将 CSS 类`option1`应用于您的`body`元素。如果您不得不用 标记许多元素，这将特别有用`class="option1 …"`：

```
<body class="option1">
    <div class="even">…&lt;/div>
</body> 
```

在 CSS 中：

```
body.option1 .even { /* … */ } 
```

等等。`option1`注意和之间有一个空格`.even`。

# google-chrome - chrome中输入的框阴影

> ID：13127748
> 
> 赞同：1
> 
> 时间：2012-10-29T18:44:18.107
> 
> 标签：google-chrome, focus, css

> **可能重复：**
> [如何阻止 Chrome 使我网站的输入框变黄？](https://stackoverflow.com/questions/175951/how-do-i-stop-chrome-from-yellowing-my-sites-input-boxes)

我遇到了一个我无法解决的小错误，基本上我有：

```
 input:focus {
        border: 1px solid #38a9f0;
        -webkit-box-shadow: 0px 0px 5px rgba(56, 169, 240, 0.75);
        -moz-box-shadow: 0px 0px 5px rgba(56, 169, 240, 0.75);
        box-shadow: 0px 0px 5px rgba(56, 169, 240, 0.75);
    } 
```

然而，当用户选择框时，chrome 已经有一个默认的焦点是黄色的，所以与上面的一样，它会变成一个非常暗和难看的绿色。有什么办法可以覆盖铬的默认颜色？

问候，卡尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:53:00.350

[正如这里 SO question](https://stackoverflow.com/questions/175951/how-do-i-stop-chrome-from-yellowing-my-sites-input-boxes)中所指出的，您可以简单地使用以下 CSS 来覆盖大纲，但请确保（如您所说）用一些焦点指示替换它。

```
input[type="text"], input[type="password"], textarea, select { 
  outline: none;
} 
```

`outline: none;`如果这就是你所需要的，你可以简单地使用这件作品，这只是覆盖所有潜在轮廓的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:50:30.617

尝试将 !important 放在 CSS 的行尾。这应该覆盖默认值。例如： box-shadow: 0px 0px 5px rgba(56, 169, 240, 0.75) !important;

# c# - 如何？类对象的 XML 序列化

> ID：13127749
> 
> 赞同：3
> 
> 时间：2012-10-29T18:44:17.823
> 
> 标签：c#, xml, serialization

我正在尝试序列化一个 Class 对象并将 xml 存储在一个字符串中，但每次我收到一条异常消息“生成 xml 文档时出错”

我试图序列化的类对象是类：

```
[XmlRoot("FlowOfTask")] 
public class Flow
{
    int _CurrHop = 0;

    [XmlElement("CurrentHop")]
    public int CurrentHop
    {
        get { return _CurrHop; }
        set { _CurrHop = value; }
    }

    int _TotalHops = 0;

    [XmlElement("TotalHops")]
    public int TotalHops
    {
        get { return _TotalHops; }
    }

    private List<tblTaskHop> _TaskHops;

    [System.Xml.Serialization.XmlArrayItemAttribute(ElementName = "Hop",
    IsNullable = false)]
    public List<tblTaskHop> TaskHops
    {
        get { return _TaskHops; }
    }
    public Flow()
    {

    }

    public Flow(Int64 TaskID, Int64 RoleID)
    {
        _TaskHops = HandleDB.tblTaskHopGetByTaskIDRoleID(TaskID, RoleID);
        _TotalHops = TaskHops.Count;
    }

} 
```

我正在使用此函数进行序列化。

```
public static string SerializeAnObject(object item)
{

    try
    {
        string xmlText;

        //Get the type of the object
        Type objectType = item.GetType();

        //create serializer object based on the object type
        XmlSerializer xmlSerializer = new XmlSerializer(objectType);

        //Create a memory stream handle the data
        MemoryStream memoryStream = new MemoryStream();

        //Create an XML Text writer to serialize data to
        using (XmlTextWriter xmlTextWriter =
            new XmlTextWriter(memoryStream, Encoding.UTF8) { Formatting = Formatting.Indented })
        {

            //convert the object to xml data
            xmlSerializer.Serialize(xmlTextWriter, item);

            //Get reference to memory stream
            memoryStream = (MemoryStream)xmlTextWriter.BaseStream;

            //Convert memory byte array into xml text
            xmlText = new UTF8Encoding().GetString(memoryStream.ToArray());

            //clean up memory stream
            memoryStream.Dispose();
            return xmlText;
        }
    }
    catch (Exception e)
    {
        MessageBox.Show(e.Message);
        return null;
    }
} 
```

谁能帮我为什么我不能序列化这个类对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:47:14.127

您的序列化方法应如下所示：

```
public static string SerializeAnObject(Object item) {
    if (item == null)
        return null;

    var stringBuilder = new StringBuilder();
    var itemType = item.GetType();

    new XmlSerializer(itemType).Serialize(new StringWriter(stringBuilder), item);

    return stringBuilder.ToString();
} 
```

当我像这样测试它时，上面的功能起作用：

```
var test = new Flow();
var xmlString = SerializeAnObject(test); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:56:50.903

XML 序列化程序要求公共属性是可获取和可设置的。TotalHops 和 TaskHops 确实符合这个标准。

尝试类似：

```
public class Flow
{
    public int CurrentHop { get; set; }
    public int TotalHops { get; set; }
    [XmlArrayItem(ElementName = "Hop", IsNullable = false)]
    public List<tblTaskHop> TaskHops { get; set; }
} 
```

另请注意，Type tblTask​​Hop 必须遵循相同的规则。

此外，@Yuck 具有更好的序列化器功能。

# javascript - ServiceNow 图表过滤

> ID：13127750
> 
> 赞同：1
> 
> 时间：2012-10-29T18:44:32.000
> 
> 标签：javascript, api, filter, servicenow, jchart2d

我们公司使用 ServiceNow 来跟踪用户报告的事件。为了密切关注呼叫解决率，我们的帮助台查看积压图表以关注趋势。积压图表使用与此处可用的相同代码生成： [http ://wiki.servicenow.com/index.php?title=Custom_Chart_Rendering](http://wiki.servicenow.com/index.php?title=Custom_Chart_Rendering)

我最近被要求研究按类别过滤此图表，以便我们可以专注于特定应用程序的事件。我尝试了一些选项，但找不到任何成功过滤数据的方法。我目前最好的选择是我需要将过滤器应用于摘要集，但即使具有管理员访问权限，我也无法编辑摘要集（我不能说这是我们的设置问题还是设计问题，因为我对这个系统没有太多经验/对这个 API 没有太多经验）。

提前感谢任何指针/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T06:17:37.073

Custom charts are great for rendering data that standard charts cannot, but you have to consider the data to be "cooked" once the summary set for that day (week/month/whatever) has been collected.

Meaning that you can't necessarily then break it down by category. To do so you would need to create additional summary sets for each category but the risk is then that someone will say "Hey, can you break that down by priority?"

Are you saying you cannot edit the summary set data or the generator? It makes sense that you can't hack the summary set data once it's cooked.

# c - 如何比较结构的两个实例

> ID：13127755
> 
> 赞同：0
> 
> 时间：2012-10-29T18:44:49.683
> 
> 标签：c, struct

> **可能重复：**
> [如何比较 C 中的结构是否相等？](https://stackoverflow.com/questions/141720/how-do-you-compare-structs-for-equality-in-c)

我在 C 中有一个结构：

```
typedef struct Value
{
    int value1;
    int value2;
    int value3;
}myValue;

myValue valueA;
myValue valueB;

valueA.value1 = 1;
valueA.value2 = 2;
valueA.value3 = 3;

valueB.value1 = 1;
valueB.value2 = 2;
valueB.value3 = 3; 
```

如何比较这些 valueA 和 valueB 是否相等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:45:58.200

您唯一安全的选择是逐个比较成员。

`memcmp`由于结构成员之间存在未指定值的填充， 您无法用于比较结构对象。

并且相等运算符`==`不适用于结构类型的操作数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:48:04.870

由于结构中的字段之间可能存在随机填充字符，因此您不能使用 memcmp 来比较结构是否相等。

```
// bad
  memcmp(&struct1, &struct2, sizeof(struct1)); 
```

对于这样的结构，上述内容将失败：

```
typedef struct Foo {
  char a;
  /* padding */
  double d;
  /* padding */
  char e;
  /* padding */
  int f;
} Foo ; 
```

为了安全起见，您必须使用成员比较。

# lua - Lua 脚本无法识别 self.id

> ID：13127756
> 
> 赞同：0
> 
> 时间：2012-10-29T18:44:52.520
> 
> 标签：lua, cryengine

我正在修改现有程序以实现新工具栏。该程序使用 Lua 脚本来处理 Flash 动画和命令的显示和处理。我可以调用 Flash 动画窗口，但添加命令侦听器的行失败。

HUD.AddFSCommandListener(self.file_SWF, self.id)

错误是：“错误的参数类型。函数 HUD.AddFSCommandListener(movie, entityId) 期望指针类型的参数 2（提供的类型为 Null）”。

我已经通过系统完成了，在下面和周围，我无法弄清楚我做错了什么，尽管我怀疑有某种注册步骤我没有正确执行。我正在开发的游戏使用了 CryEngine，我发现并没有很多人对此提出问题。然而，如果这个错误在另一个系统中有某种类似的东西，那么也许这可能会让我想到我需要做什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:29:15.017

您的问题很可能是您实际需要做的

```
HUD:AddFSCommandListener(self.file_SWF, self.id) 
```

问题不在于它无法识别 self.id，而是当您使用点表示法调用时，如果该函数本来是一个表函数，那么您传递的第一个参数将成为函数的“self”参数。所以它正在寻找的第二个参数实际上是 nil。

冒号函数符号是用于隐式传递 self 变量的语法糖，其中 self 成为表（在本例中为 HUD）。因此，大多数 lua 接口将从*第二个*参数开始计数。所以它所说的第二个实际上是第三个。

例子：

```
HUD = {}

function HUD:AddFSCommandListener(file, id)

end 
```

实际上等价于：

```
HUD = {}

HUD.AddFSCommandListener = function( self, file, id )

end 
```

因此，当您使用点而不是冒号调用时，您会将 file_swf 推入它最可能期望的 self 参数中。

# java - 杰克逊序列化包括嵌套集合的类型

> ID：13127758
> 
> 赞同：1
> 
> 时间：2012-10-29T18:44:57.950
> 
> 标签：java, jackson

我有以下代码

```
@org.junit.Test
public void test1() throws IOException {
    ObjectMapper objectMapper = new ObjectMapper();
    objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL, JsonTypeInfo.As.PROPERTY);

    Map<UUID, String> map = new HashMap<UUID, String>();
    map.put(new UUID(1,2), "value1");
    Set<Map<UUID, String>> set = new LinkedHashSet<Map<UUID,String>>();
    set.add(map);

    System.out.println(objectMapper.writeValueAsString(set));
} 
```

产生输出

```
["java.util.LinkedHashSet",[{"@class":"java.util.HashMap","00000000-0000-0001-0000-000000000002":"value1"}]] 
```

我试图让杰克逊为 UUID 和我在地图中拥有的字符串对象打印完全限定的 java 类。

# vba - VBA中GetKeyboardState键（0）之后的“键（0）”是什么？

> ID：13127762
> 
> 赞同：2
> 
> 时间：2012-10-29T18:45:13.017
> 
> 标签：vba, excel

我是在 VBA 中使用 Windows API 函数的新手，我找不到 keys(0) 的确切作用/含义。它也不在括号/括号中，所以我不明白它是如何工作的。提前致谢！

```
Private Declare PtrSafe Function GetKeyboardState Lib "user32" _
(pbKeyState As Byte) As Long

Property Get Value() As Boolean

    Dim keys(0 To 255) As Byte
    GetKeyboardState keys(0) '<< Can someone explain what this is doing?
    Value = keys(VK_NUMLOCK)

End Property 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:12:31.657

我假设您已经知道[GetKeyboardState](https://web.archive.org/web/20050301200651/http://ex-designz.net/apidetail.asp?api_id=143)用于获取键状态的数组。

当您传递 keys(0) 时，您实际上是在将数组的内存位置提供给 Win API 函数。通过这样做，您的数组通过引用传递给函数，并且您传递的数组被数据填充。

这是从我提供的链接页面复制的示例用法，只是因为它有很多评论：

```
' Display the key status of the Enter and Backspace keys
' Enter's virtual key code = 13; Backspace's virtual key code = 8
Dim keystat(0 To 255) As Byte ' receives key status information for all keys
Dim retval As Long ' return value of function

retval = GetKeyboardState(keystat(0)) ' In VB, the array is passed by referencing element #0.
' Display info about Enter
If (keystat(13) And &H01) = &H01 Then Debug.Print "Enter is being pressed."
If (keystat(13) And &H80) = &H80 Then Debug.Print "Enter is toggled."
' Display info about Backspace
If (keystat(8) And &H01) = &H01 Then Debug.Print "Backspace is being pressed."
If (keystat(8) And &H80) = &H80 Then Debug.Print "Backspace is toggled. 
```

# api - 访问 API 时 cURL 不起作用

> ID：13127773
> 
> 赞同：0
> 
> 时间：2012-10-29T18:45:46.437
> 
> 标签：api, curl

当我通过访问此文件并使用 cURL 访问 API 时，下面的代码不起作用，它给了我以下错误：

卷曲错误结果 HTTP/1.1 403 禁止 X-Mashery-Responder：mashery-web2-lax.mashery.com X-Mashery-Error-Code：ERR_403_DEVELOPER_INACTIVE 内容类型：文本/xml 接受范围：字节内容长度：31 服务器：Mashery 代理 日期：2012 年 10 月 29 日星期一 18:41:23 GMT 连接：keep-alive 403 Developer Inactive

当我通过它生成的链接直接访问它时它正在工作。有人可以告诉我使用 cURL 的方式是否有任何问题吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<?php

/**
 * Initialize the cURL session
 */
$ch = curl_init();

$city = 'Seattle';
$departure = '11/03/2012';
$arrival = '11/08/2012';
$citycode='US';
$apiKey='***************';
$cid='55505';
$locale='en_US';
$currencyCode='USD';
$minorRev='16';
$customerSessionId='0ABAA874-27EB-E913-A4E2-7B0946904C6D';
$customerIpAddress=$_SERVER['REMOTE_ADDR'];
$customerUserAgent=$_SERVER['HTTP_USER_AGENT'];

$customerUserAgent=urlencode($customerUserAgent);

$url='http://api.ean.com/ean-services/rs/hotel/v3/list?minorRev='.$minorRev.'&amp;cid='. $cid .'&amp;apiKey='. $apiKey.'&amp;customerUserAgent='.$customerUserAgent . '&amp;locale='.$locale.'&amp;currencyCode='.$currencyCode.'&_type=xml';

$xml='&lt;HotelListRequest&gt;&lt;city&gt;';
$xml .= $city;
$xml .='&lt;/city&gt;&lt;countryCode>';
$xml .= $citycode;
$xml .='&lt;/countryCode&gt;&lt;arrivalDate&gt;';
$xml .= $arrival;
$xml .='&lt;/arrivalDate&gt;&lt;departureDate&gt;';
$xml .= $departure;
$xml .='&lt;/departureDate&gt;&lt;/HotelListRequest&gt;';

$main = $url .'&xml='. $xml;
echo $main;
 /**
 * Set the URL of the page or file to download.
 */
 curl_setopt($ch, CURLOPT_URL, $main);

  curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 65000);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Accept: application/xml" ));
   curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

 /**
 * Ask cURL to return the contents in a variable instead of simply echoing them to  the browser.
 */
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

 /**
 * Execute the cURL session
 */
 $contents = curl_exec ($ch);

 /**
 * Close cURL session
 */
 curl_close ($ch);

 echo '<br /><br />Curl Error';
echo curl_error($ch);
echo '<br />Results <br />' . $contents;

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:30:45.053

在您的 $url 构造中，不要使用**&** **amp;** 每个参数之间。参数值（例如“xml”参数值）应该被编码，但是在 URI 中分隔每个 GET 请求参数的 & 符号不应该被编码。

因此，您的代码创建了这个**$main**值：

```
http://api.ean.com/ean-services/rs/hotel/v3/list?minorRev=16&amp;cid=55505&amp;apiKey=********&amp;customerUserAgent=&amp;locale=en_US&amp;currencyCode=USD&_type=xml&xml=&lt;HotelListRequest&gt;&lt;city&gt;Seattle&lt;/city&gt;&lt;countryCode>US&lt;/countryCode&gt;&lt;arrivalDate&gt;11/08/2012&lt;/arrivalDate&gt;&lt;departureDate&gt;11/03/2012&lt;/departureDate&gt;&lt;/HotelListRequest&gt; 
```

它应该是：

```
http://api.ean.com/ean-services/rs/hotel/v3/list?minorRev=16&cid=55505&apiKey=********&customerUserAgent=&locale=en_US&currencyCode=USD&_type=xml&xml=&lt;HotelListRequest&gt;&lt;city&gt;Seattle&lt;/city&gt;&lt;countryCode>US&lt;/countryCode&gt;&lt;arrivalDate&gt;11/08/2012&lt;/arrivalDate&gt;&lt;departureDate&gt;11/03/2012&lt;/departureDate&gt;&lt;/HotelListRequest&gt; 
```

保重，尼尔@Mashery

# asp.net - 对齐 DevExpress DockPanel 标题文本

> ID：13127774
> 
> 赞同：1
> 
> 时间：2012-10-29T18:45:48.043
> 
> 标签：asp.net, devexpress

我在 asp.net(aspx) 页面上加载了多个动态 DevExpress DockPanel。我想将 DockPanel 标题文本更改为居中对齐。我已经搜索了 DevExpress 文档，但找不到显示如何执行此操作的示例。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:58:10.910

检查这个[ASPxDocking](http://www.devexpress.com/Products/NET/Controls/ASP/Docking/index.xml)

> 可自定义的页眉和页脚内容。这两个元素都允许您显示字形和文本（或超链接）。请注意，您还可以使用模板进行更灵活的页眉和页脚内容自定义。

参考：[面板标题](http://documentation.devexpress.com/#AspNet/CustomDocument9794)

我建议您设置[ASPxPopupControlBase.HeaderTemplate 属性](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxPopupControlASPxPopupControlBase_HeaderTemplatetopic)或按照示例中的建议创建自定义标题模板。

代码片段：

```
<HeaderTemplate>
    <div style="text-align:right;">
    <input id="btn" type="button" value="close" onclick="
        if(document.getElementById('checkBox').checked)
            popupControl.Hide();
    "/>            
    </div>
</HeaderTemplate> 
```

希望这有帮助..

# mysql - Slave_IO_Running 和 Slave_SQL_Running 是 Yes 但复制不起作用

> ID：13127775
> 
> 赞同：1
> 
> 时间：2012-10-29T18:45:48.320
> 
> 标签：mysql, replication, mysql-5.5

我已经在两个具有完全相同特性的不同服务器中设置了主/从复制。MySQL 版本是 5.5，Slave 通过 VPN 连接连接到 Master。

我已经确认副本正在工作，当我在主服务器上创建一个新数据库时，我可以看到该数据库存在于从服务器中。问题是当我在做一些失败场景并关闭 VPN 时，Master 上的复制状态没有显示任何错误：

```
mysql> show slave status;

*************************** 1\. row ***************************
               Slave_IO_State: Waiting for master to send event
                  Master_Host: 10.0.0.2
                  Master_User: replication
                  Master_Port: 3306
                Connect_Retry: 60
              Master_Log_File: mysql-bin.000001
          Read_Master_Log_Pos: 52360
               Relay_Log_File: mysql-relay-log.000004
                Relay_Log_Pos: 441
        Relay_Master_Log_File: mysql-bin.000001
             Slave_IO_Running: Yes
            Slave_SQL_Running: Yes
              Replicate_Do_DB: 
          Replicate_Ignore_DB: 
           Replicate_Do_Table: 
       Replicate_Ignore_Table: 
      Replicate_Wild_Do_Table: 
  Replicate_Wild_Ignore_Table: 
                   Last_Errno: 0
                   Last_Error: 
                 Skip_Counter: 0
          Exec_Master_Log_Pos: 52360
              Relay_Log_Space: 597
              Until_Condition: None
               Until_Log_File: 
                Until_Log_Pos: 0
           Master_SSL_Allowed: No
           Master_SSL_CA_File: 
           Master_SSL_CA_Path: 
              Master_SSL_Cert: 
            Master_SSL_Cipher: 
               Master_SSL_Key: 
        Seconds_Behind_Master: 0
Master_SSL_Verify_Server_Cert: No
                Last_IO_Errno: 0
                Last_IO_Error: 
               Last_SQL_Errno: 0
               Last_SQL_Error: 
  Replicate_Ignore_Server_Ids: 
             Master_Server_Id: 1
""" 
```

据我所知，如果 Slave_IO_Running 和 Slave_SQL_Running 是 Yes，这表明复制正在工作，但这是不可能的，因为服务器之间没有网络连接。

如果我在从站中重新启动 mysql，那么我将看到连接错误并且复制状态将是准确的，如果我重新启用 VPN 而不在从站上重新启动 mysql，如果我创建新数据，复制将继续正常工作根据。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T18:52:05.763

也许你应该看看这个复制选项[http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html#option_mysqld_slave-net-timeout](http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html#option_mysqld_slave-net-timeout)

# prolog - 斐波那契递归函子

> ID：13127778
> 
> 赞同：3
> 
> 时间：2012-10-29T18:45:56.463
> 
> 标签：prolog, fibonacci

我是 Prolog 的初学者，我想帮助这个函子计算一个数字的斐波那契......第一次它添加 Y = 0 和 Z = 1 然后它调用自己与 Y = Z 和 Z = Y + Z 和每个它增加计数器 C 的值直到计数器等于 X 的时间.....问题是结果始终等于 1，因为即使 X 不等于 M，prolog 也永远不会执行第二个子句，但我不知道为什么......

X：要计算的斐波那契 Y：斐波那契数列中的第一个数字 Z：斐波那契数列中的第二个数 C：计数器，初始值为 0
T：Y + Z

```
predicates
fib_tail(integer,integer, integer,integer, real)
clauses
fib_tail(X,Y , Z,M, T):- X=M,T = Y + Z,!.
fib_tail(X,Y ,Z, C , T):-
  T = Y + Z,
  NY = Z,
  NZ = Y + Z,
  NC = C + 1,
  fib_tail(X, NY, NZ, NC, NT).

goal
fib_tail(5 ,0 ,1 ,0, T) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T21:57:58.100

您的第二个子句 fib_tail 有两个缺陷：

*   X 永远不会增加
*   NT 是一个单例，因此不会向调用者“传输”任何值。

**编辑**注释突出显示 X 不需要递增，与正确递增的 C 进行比较。

我认为您应该在尝试实现双递归定义之前，并在其工作时优化消除代价高昂的调用。

# asp.net-mvc - SqlQuery 针对未知（在编译时）类型

> ID：13127781
> 
> 赞同：1
> 
> 时间：2012-10-29T18:46:08.123
> 
> 标签：asp.net-mvc, entity-framework

我有一个应用程序，其中有一个要执行的数据库查询列表。

我知道它可以做类似的事情：

```
var results = _db.Contacts.SqlQuery( sQuery ); 
```

喜欢：

```
var results = _db.Database.SqlQuery<Contacts>( sQuery ); 
```

但在我的情况下，我只使用元数据。我该怎么做这样的事情：

```
string sBaseType = "Contacts";
var results = _db.Database.SqlQuery<sBaseType>( sQuery ); 
```

我取得了一些成功`<object>`......它返回了我期望它返回的所有行，但它不是一个非常可用的形式。处理这种动态查询的最佳方法是什么？

编辑——我希望找到的是一些类似这样的机制：

```
var results = _db.Database[sBaseType].SqlQuery( sQuery ); 
```

这样我就可以避免看起来像这样的结构：

```
if (sBaseType == "Contacts") {
    var results = _db.Contacts.SqlQuery( sQuery );
} else if  (sBaseType == "Buildings") {
    var results = _db.Buildings.SqlQuery( sQuery );
} else if  (sBaseType == "Rooms") {
    var results = _db.Rooms.SqlQuery( sQuery );
} else if  (sBaseType == "Equipment") {
    var results = _db.Equipment.SqlQuery( sQuery );
} 
```

我不需要任何特别花哨的东西......我只是希望节省建立一个 100 多个元素的 if-elseif 块......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T19:08:36.047

这似乎解决了我的主要问题::

```
string sQuery = vo.objReport.sQuery;
object[] aParams = {} ;  //loaded through some other, related, process...

var tt = Type.GetType("MyProject.DAL." + vo.objReport.sBaseView);
var result =_db.Database.SqlQuery(tt, sQuery, aParams); 
```

给定一堆关于要运行的查询的元数据，它能够执行查询并以可用格式返回数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:57:53.627

您可以尝试某种类型解析字典。

```
public abstract class MetadataQuery
{
  public abstract string Type { get; }
  public abstract string QueryString { get; }
}

public class ContactsQuery : MetadataQuery
{
  public override string Type { get { return "Contact"; } }
  public override string QueryString { get { return "select * from Contacts where is_deleted = 0"; } }
} 
```

为每种类型编写一个查询。

接下来，编译一个类型列表。大多数 IoC 容器都可以为您做到这一点。使用 Ninject，你会做这样的事情。动态类型使这变得更加微不足道。

```
kernel.Bind<MetadataQuery>().To<ContactsQuery>();
// keep doing this for all of your metadata queries. 
```

最后，当您准备好实际使用查询时。

```
public class MyClass
{
  private readonly IDbConnection db;
  private readonly IDictionary<string, MetadataQuery> queries;

  public MyClass(IDbConnection db, IEnumerable<MetadataQuery> queries)
  {
    this.db = db;
    this.queries = queries.ToDictionary(q => q.Type);
  }

  public IEnumerable<dynamic> ExecuteSQL(string type)
  {
    var query = queries[type];
    var result = db.Query(query.QueryString);
    return result;
  }
} 
```

如果您绝对**必须**有一个非动态类型，您将需要查看[MakeGenericType](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)，但这不会那么容易。

# c++ - 对“函数”的未定义引用——链接器问题？

> ID：13127786
> 
> 赞同：5
> 
> 时间：2012-10-29T18:46:26.170
> 
> 标签：c++, linker

我目前正在尝试在 linux 终端上编译和链接我的 C++ 文件。我运行的命令是：

```
g++ -o gameplay gamePlay.cpp player.cpp main.cpp display.cpp -lcurses 
```

该命令似乎可以完美地编译所有内容，但是一旦它尝试链接事物，我就会得到 2 个错误。

```
undefined reference to 'gamePlay::deal(std::vector<card, std::allocator<card> >, std::vector<player, std::alloator<player> >)'

undefined reference to 'gamePlay::score(player)' 
```

下面是我的 gamePlay.CPP 文件。我真的很迷茫，任何帮助将不胜感激！

```
#include "gamePlay.h"
#include <cstdlib>
#include <sstream>

int gamePlay::compareCenter(int leadplayer){
int highest = center[leadplayer].getCardNum();
if(center[leadplayer].getCardNum() == 1)
    highest = center[leadplayer].getCardNum() + 13;
int suit = center[leadplayer].getSuit();
int player = leadplayer;

for(int i = leadplayer+1; i < leadplayer+4; i++)
{
    if((suit != 1) && (center[i%4].getSuit() == 1))
    {
       player = i%4;
       suit = 1;
       highest = center[i%4].getCardNum();
    }
    else if(suit == center[i%4].getSuit())
        if(center[i].getCardNum() == 1){
            player = i % 4;
            highest = center[i].getCardNum() + 13;
        }
        if(highest < center[i%4].getCardNum())
        {
            player = i%4;
            highest = center[i%4].getCardNum();
        }

}
players.at(player).setTricksTaken(players.at(player).getTricksTaken()+1);
return player;
}

vector <card> createDeck() {
//Create the Deck and create each suit by calling define cards.
vector <card> deck;
for(int i = 1; i <= 4; i++){
    for(int j = 1; j <= 13; j++){
        card newCard (i,j);
        deck.push_back(newCard);
    }
}
random_shuffle (deck.begin(), deck.end());
return deck;
}

void gamePlay::deal(vector <card> &deck, vector <player> players){
for(int j = 0; j<4; j++){
    for(int i = 0; i<13; i++){
    players.at(j).addCard(deck.at(0));
    deck.erase(deck.begin());
    }
}
}

bool containSuit(card lead, player players){
bool suit = false;
for(int i = 0; i < players.getHand().size(); i++){
    if(lead.getSuit() == players.getHand().at(i).getSuit())
        suit = true;
}
return suit;
}

bool gamePlay::onlySpade(player play){
for(int i = 0; i<play.getHand().size(); i++){
    if(play.getHand().at(i).getSuit()!=1)
    return false;
}
return true;
}

int gamePlay::handCheck(int xevent, int yevent, vector <player> players, int     trickStart){
        for(int i = 1; i < 14; i++){
            if(xevent<(i*6) && yevent>17 && yevent<23 &&      players.at(0).getHand().at(i-1).getSuit() != 0 && players.at(0).getHand().at(i-  1).getCardNum() != 0){
                card playedCard = players.at(0).getHand().at(i-1);
                //first check to find card on display
                //check to see if leading or not
                //if leading use spadesBroken function
                //if not leading use contains suit function
                if(trickStart==0 && !getSpadesBroken()){
                    if(onlySpade(players.at(0)))
                        return i;
                    else if(playedCard.getSuit() != 1)
                        return i;
                    else
                        return NULL;
                }
                if(trickStart == 0 && getSpadesBroken())
                    return i;
                if(trickStart > 0 &&  containSuit(center[trickStart],players.at(0))){
                        if(playedCard.getSuit()==center[trickStart].getSuit())
                        return i;
                }
                if(trickStart > 0 &&    !containSuit(center[trickStart],players.at(0)))
                    return i;
                else
                    return NULL;
            }
        }
}

void gamePlay::displayHand(){
int offset = 0;
    for(int i =0; i<players.at(0).getHand().size(); i++){
        monitor.displayCard(offset, 18,     players.at(0).getHand().at(i).getSuit(), players.at(0).getHand().at(i).getCardNum(), 0);
        offset+=6;
    }
}
void gamePlay::humanPlay(int trickStart){
    int xevent, yevent;
    int key = monitor.captureInput();
    for(;;){
        mvprintw(8,26,"Please choose a card to play.");
        // if a mouse event occurred
        if (key == -1) {
            xevent = monitor.getMouseEventX();
            yevent = monitor.getMouseEventY();
            int handCh = handCheck(xevent, yevent, players,    trickStart);
            if(handCh != NULL){
                card played = players.at(0).getHand().at(handCh-1);
                players.at(0).getHand().at(handCh-1).setCardNum(0);
                players.at(0).getHand().at(handCh-1).setSuit(0);
                center[0]= played;
                monitor.displayCard(34, 11, center[0].getSuit(),   center[0].getCardNum(), 0);
                displayHand();
                break;
            }
        }
    }
}
void gamePlay::CPUplay(int trickStart, int CPU){
    bool goodCard = false;
    card playedCard =players.at(CPU).getHand().at(0);
    int i;
    for(i = 0; i < players.at(CPU).getHand().size(); i++){
             playedCard = players.at(CPU).getHand().at(i);
                //check to see if leading or not
                //if leading use spadesBroken function
                //if not leading use contains suit function
                if(trickStart==CPU && !getSpadesBroken()){
                    if(onlySpade(players.at(CPU)))
                        break;
                    if(playedCard.getSuit()!=1)
                        break;
                }
                if(trickStart == CPU && getSpadesBroken())
                    break;
                if(trickStart != CPU &&   containSuit(center[trickStart], players.at(CPU))){
                        if(playedCard.getSuit()==center[trickStart].getSuit())
                        break;
                }
                if(trickStart != CPU &&   !containSuit(center[trickStart], players.at(CPU)))
                    break;
    }
                players.at(CPU).getHand().at(i).setCardNum(0);
                players.at(CPU).getHand().at(i).setSuit(0);
                center[CPU]= playedCard;
                if(CPU==1)
                monitor.displayCard(29, 7, center[CPU].getSuit(),  center[CPU].getCardNum(), 0);
                if(CPU==2)
                monitor.displayCard(39, 2, center[CPU].getSuit(), center[CPU].getCardNum(), 0);
                if(CPU==3)
                monitor.displayCard(49, 7, center[CPU].getSuit(), center[CPU].getCardNum(), 0);
}

void gamePlay::score(player play){

int trickOver = play.getBid()-play.getTricksTaken(); // Calculate the difference   between bid and actually taken.

//Bidding Double Nil (if gets it 200 points other wise -200 points)
if(play.getDoubleNil()){
    if(play.getTricksTaken()==0) //player did get Double Nil successfully
        play.setScore(play.getScore()+200); // add 200 points
    else
        play.setScore(play.getScore()-200);
}
if(play.getBid()==0){ //Bidding Nil (if gets it 100 points other wise -100 points)
    if(play.getTricksTaken()==0) //player did get Nil successfully
        play.setScore(play.getScore()+100); //add 100 points
    else //player didnt get Nil
        play.setScore(play.getScore()-100); //take away 100 points
}
if(trickOver>0){ //player bids more than number of tricks won
    play.setScore((trickOver*-10));  //decrease score by 10 poitns for every   overtrick
}
if(trickOver<0){ //player bids less then number of tricks won
    play.setSandBag(play.getSandBag() + 1); //increase sandbag by 1
    play.setScore((trickOver*(-1))+(10*(play.getBid()))); //increase 10 points   per trick bid on and 1 point per trick over
}
if(play.getSandBag()>10){ //check for sandbagging
    play.setScore(play.getScore()-100);
}
play.setBid(NULL); //reset players bid to NULL
play.setDoubleNil(false); //Player has not yet bid double NILL.
}

void gamePlay::runGame(){

for(int i = 0; i<4; i++){ //Creates 4 players with hands included
    player play;
    players.push_back(play);
}

int count = 0;
int handStart = 0;
while(players.at(0).getScore()<500 || players.at(1).getScore()<500 ||   players.at(2).getScore()<500 || players.at(3).getScore()<500)
{
    int xevent;
    int yevent;
    for(;;){
        mvprintw(3,2,"Click here to bid Double Nil or type out your bid   now.");
        int key = monitor.captureInput();
        monitor.drawBox(7, 4, 3, 2, 0);
        monitor.drawBox(7, 4, 3, 2, 0);
        if (key == -1) {
            xevent = monitor.getMouseEventX();
            yevent = monitor.getMouseEventY();
            break;
        }
        if (key > 0){
        stringstream messageString;
        messageString.str("");
        messageString << "Your bid is now: " << key;
        monitor.bannerBottom(messageString.str());
        players.at(0).setBid(key);
        break;
        }
    }
    if((xevent>=7 && xevent<=10)&&(yevent>=4 && yevent <=6)){
        players.at(0).setDoubleNil(true);
    }

    vector <card> deck = createDeck();

    deal(deck, players);
    displayHand();
    int trickStart = handStart;
    int count = 0;
    while(count<13){
    switch (trickStart)
    {
    case 0: humanPlay(trickStart);
            CPUplay(trickStart,1);
            CPUplay(trickStart,2);
            CPUplay(trickStart,3);
    case 1: CPUplay(trickStart,3);
            humanPlay(trickStart);
            CPUplay(trickStart,1);
            CPUplay(trickStart,2);
    case 2: CPUplay(trickStart,2);
            CPUplay(trickStart,3);
            humanPlay(trickStart);
            CPUplay(trickStart,1);
    case 3: CPUplay(trickStart,1);
            CPUplay(trickStart,2);
            CPUplay(trickStart,3);
            humanPlay(trickStart);
    }
    trickStart = compareCenter(trickStart);
    }
    for(int n =0; n<4;n++)
        score(players.at(n));

    handStart = (handStart +1) % 4;
}
} 
```

这也是我的 card.h 文件

```
using namespace std;

class card { //Create cards for deck
int cardSuit;
int cardNum;
public:

    int getSuit() {return cardSuit;}
    int getCardNum() {return cardNum;}
    void setSuit(int a){ cardSuit = a;}
    void setCardNum(int a){cardNum = a;}
    card (int suit, int number){cardSuit = suit; cardNum = number;}
    card (void){cardSuit = 0; cardNum= 0;}
}; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T18:48:53.470

你已经定义了一个独立的函数

```
void deal(vector <card> &deck, vector <player> players){
for(int j = 0; j<4; j++){
    for(int i = 0; i<13; i++){
    players.at(j).addCard(deck.at(0));
    deck.erase(deck.begin());
    }
}
} 
```

而我想你的意思是定义成员函数`gameplay::deal`

```
void gameplay::deal(vector <card> &deck, vector <player> players){
//...   
} 
```

正如 jmp 在评论中正确注意到的那样，您的`score`函数也是如此。

另外，我会通过`players`引用传递，因为您似乎在播放器上调用 addCard() 这意味着（我想）您需要更改传递的参数。

# java - 如何使用 JasperFillManager.fillReportToStream？

> ID：13127789
> 
> 赞同：2
> 
> 时间：2012-10-29T18:46:33.003
> 
> 标签：java, jasper-reports

我有一个简单的*Java*程序，它接受一个*.jrxml*文件，编译它，然后填充它。报告的数据以*XML*文件的形式提供。填充完成后，数据导出为*PDF*。

```
// Parse input document
Document document = JRXmlUtils.parse(new File(xmlFile));

// Set it as the data source in the parameters
parameters.put(JRXPathQueryExecuterFactory.PARAMETER_XML_DATA_DOCUMENT, document);

// Create and set the virtualizer
JRFileVirtualizer virtualizer = new JRFileVirtualizer(2, "/tmp");
virtualizer.setReadOnly(true);
parameters.put(JRParameter.REPORT_VIRTUALIZER, virtualizer);

// Fill the report
String jasperFile = designFile.replaceAll(".jrxml",".jasper");
print = JasperFillManager.fillReport(jasperFile, parameters);

// Export the report to PDF
ArrayList<JasperPrint> jasperPrints = new ArrayList<JasperPrint>();
jasperPrints.add(print);
JRPdfExporter exp = new JRPdfExporter();
exp.setParameter (JRExporterParameter.JASPER_PRINT_LIST, jasperPrints);
exp.setParameter(JRExporterParameter.OUTPUT_FILE_NAME, outFileName );
exp.exportReport(); 
```

我的困惑是关于出口

上面的那条填充线非常适合小型报告，但是一旦我得到一个接近 1/2 MB 的*XML*源文件，它就会旋转一天以上，而不管设置文件*虚拟*器（我这样做）。

我看到还有另一种方法叫做`fillReportToSteam`. 我的困惑是`fillReport`，我必须做一个额外的步骤才能导出为 PDF。正在写入哪种流`fillReportToStream`，我该如何指定？会`fillReportToStream`写入PDF文件吗？

我找不到任何例子。我希望我可以利用流，以便我可以衡量进度并让这些*PDF*在正常的时间内完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T11:46:04.733

调用`fillReportToStream`仍然会产生一个`JasperPrint`对象，但它会直接将其写入输出流，而不是将其传回给您。不能以任何其他格式输出报告，因此`JasperFillManager`不能跳过导出步骤。要生成 PDF，您仍然需要`JRPdfExporter`从输出流写入的任何位置使用和读取填充的报告。

我认为这里的问题是您的文件虚拟器。您提到“无论设置文件虚拟器如何，它都会旋转一天以上”，但虚拟器实际上会使该过程花费*更长*的时间。这是避免内存不足错误的基本时间/内存权衡，但会使填充速度慢得多。在我见过的基准测试中，添加文件虚拟器使填充时间翻了*两番！*

如果您确实需要虚拟器，请尝试增加您传递的 maxSize 参数。2 看起来非常低。您也可以尝试切换到 a `JRSwapFileVirtualizer`，因为我听说它们的性能要好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-01T13:48:13.027

使用示例：

```
 public class ExporterReport {
    private byte[] report = null;
    private String reportName = "myreport";
    protected Collection<? extends Object> getData() {
        //TODO: return your collection
    }
    protected String getReportPath() {
        return "/report/myreport.jasper";
    }   
    public final void buildReportXLS() {        
        Map<String, Object> params = new HashMap<String, Object>();
        try {
            params.put("text", "sametext");
            String reportUrl = getReportPath();
            Collection<? extends Object> collection = getData();
            if (!collection.isEmpty()) {
                URL urlJasper  = FacesContext.getCurrentInstance().getExternalContext().getResource(reportUrl);
                JRDataSource data = new JRBeanCollectionDataSource(collection);
                JasperPrint jasperPrint = null;
                try {
                     jasperPrint = JasperFillManager.fillReport(urlJasper.getPath(), params, data);
                     if (jasperPrint != null) {
                        /**
                         * 1- export to PDF sample
                         */
                        //JasperExportManager.exportReportToPdfFile(jasperPrint, "C://sample_report.pdf");

                        /**
                         * 2- export to HTML Sample
                         */
                        //JasperExportManager.exportReportToHtmlFile(jasperPrint,"C://sample_report.html");

                        /**
                         * 3- export to Excel sheet
                         */
                        JRXlsExporter exporter = new JRXlsExporter();

                        ByteArrayOutputStream xlsReport = new ByteArrayOutputStream();
                        exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
                        exporter.setParameter(JRExporterParameter.OUTPUT_STREAM, xlsReport);
                        exporter.setParameter(JRXlsExporterParameter.IS_ONE_PAGE_PER_SHEET, Boolean.FALSE);
                        exporter.setParameter(JRXlsExporterParameter.IS_DETECT_CELL_TYPE, Boolean.TRUE);
                        exporter.setParameter(JRXlsExporterParameter.IS_WHITE_PAGE_BACKGROUND, Boolean.FALSE);
                        exporter.setParameter(JRXlsExporterParameter.IS_IGNORE_GRAPHICS,Boolean.FALSE);
                        exporter.setParameter(JRXlsExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS,Boolean.TRUE);
                        exporter.exportReport();
                        xlsReport.flush();
                        xlsReport.close();
                        this.setReport(xlsReport.toByteArray());
                     }
                  } catch (JRException e) {
                     e.printStackTrace();
                  }             

                if (log.isInfoEnabled()) {
                    log.info("Report build successful", reportName);
                }
        } catch (Exception e) {
                log.error("has a error {0} in {1}: {2} [{3}]", e, reportName, new Date(), e.getMessage(), "information");
        }
    }

    public void downloadReportXLS() {
        if (this.getReport() != null) {
            this.downloadFile(this.getReport(), reportName + ".xls");
        }
    }

    private void downloadFile(byte[] bytes, String fileName) {
        try {
            String contentType = null;
            FacesContext facesContext = FacesContext.getCurrentInstance();
            HttpServletResponse response = (HttpServletResponse) facesContext.getExternalContext().getResponse();

            if (fileName.lastIndexOf('.') != -1) {
                contentType = URLConnection.getFileNameMap().getContentTypeFor(fileName);
            }

            if (StringUtil.isStringEmpty(contentType)) {
                contentType = "application/octet-stream";
            }

            response.setContentType(contentType);
            response.addHeader("Content-Disposition", "attachment; filename=\"" + fileName + "\"");
            response.addHeader("Pragma", "no-cache");
            response.setDateHeader("Expires", 0);  
            response.setContentLength(bytes.length);

            ServletOutputStream os = response.getOutputStream();
            os.write(bytes);
            os.flush();
            os.close();
            facesContext.responseComplete();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }   
} 
```

在您的 xhtml 中，您可以输入以下内容：

```
<h:commandButton value="Export to sheet" actionListener="#{exportReport.buildReportXLS()}" action="#{exportReport.downloadReportXLS()}" /> 
```

# java - 使用 EJB 调度保持状态的无状态 EJB

> ID：13127790
> 
> 赞同：1
> 
> 时间：2012-10-29T18:46:44.377
> 
> 标签：java, jboss7.x, cdi, ejb-3.1

我在 EJB Stateless 上使用 JBoss AS 7 和 Schedule 方法。我的问题是即使 EJB 也是无状态的，它保持其状态，这给我带来了麻烦。这是示例：

计时器：

```
@Stateless
public class TestTimer {

    @Inject HelloWorldService helloWorld;

    @SuppressWarnings("unused")
    @Schedule(second="*/10", minute="*", hour="*", info="MyTimer")
    private void execute() {
        System.out.println(helloWorld.sayHello());
        System.out.println(this.toString() + " "+ helloWorld.toString());
    }
} 
```

注入的 HelloWorldService：

```
public class HelloWorldService {

    public String sayHello() {
        return "Hello World!";
    }
} 
```

我原以为`System.out.println(this.toString() + " "+ helloWorld.toString());`每次计时器运行时该行都会打印一次不同的时间，因为`TestTimer`每次都会是一个新实例，但我错了：

```
16:43:50,003 INFO  [stdout] (EJB default - 3) foo.service.TestTimer@4a56936f foo.service.HelloWorldService@79e98289
16:44:40,022 INFO  [stdout] (EJB default - 1) foo.service.TestTimer@4a56936f foo.service.HelloWorldService@79e98289 
```

我做错了什么，这是预期的行为，还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:51:19.197

EJB 规范没有声明无状态 bean在每次调用后*丢弃它们的状态。*它指出应用程序开发人员不能依赖 bean*来保持*其状态。有一个微妙但非常重要的区别。同一个bean实例可能会被多次使用；这并不能否定无状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T18:53:03.377

重要的是每个计时器都有一个查找，您可能会获得 bean 的不同实例
，但“可能”意味着您仍然可能获得相同的实例，因为它是从
容器为您管理的 bean 池中获得的。
使用相同的计时器对象没有任何问题，
只要它提供适当的功能即可。
这意味着，作为开发人员，您不能对 bean 的状态做出任何假设，无论它是否会在重新查找 bean 时恢复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-29T18:51:28.533

无状态 bean 可以根据需要多次使用。它们不是每次都被创造出来的。[您可以在http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html](http://docs.oracle.com/javaee/6/tutorial/doc/giplj.html)查看 EJB LifeCycle

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-29T18:52:27.833

这是预期的行为（根据 Java EE 规范），实际上比这要复杂一些。

应用服务器正在管理一个过期会话 bean 池，并使用该池中的实例来处理客户端请求。如果服务器上有一些负载，那么将从池中使用几个 bean，每个 bean 都有自己的状态。因此，在您的测试中，您有时会打印相同的字符串值，有时会打印另一个字符串值。

您不应将属性用于业务逻辑。但是，出于技术目的使用属性（例如，保留对数据库的引用）有时是一个好主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-29T18:52:29.423

容器有一个无状态会话 bean 池。它在容器内部处理活动实例的数量（据我所知）对于您的情况，计时器似乎调用了相同的实例。

# facebook - Facebook 画布应用程序 - 空白页

> ID：13127791
> 
> 赞同：0
> 
> 时间：2012-10-29T18:46:46.683
> 
> 标签：facebook, facebook-canvas

我在使用 Facebook 画布应用程序并单击应用程序请求通知时遇到了一个奇怪的问题。

基本上，如果您在应用程序中，并且其他人向您发送了对同一应用程序的应用程序请求，那么通知地球将显示该请求。如果您单击它，那么它只会显示正在加载“应用程序名称”的消息并变为空白。

如果您在不使用应用程序的情况下单击应用程序请求（例如在 facebook 主页上），则可以完美运行。

我尝试使用 js 开发人员工具，看起来 facebook 正在执行一个没有返回任何内容的 ajax 请求（因此我想是空白页）。ajax 请求的 url 是

**http://apps.facebook.com/ajax/canvas/storyboxfb_app_name=appId&_user=userId&_a=1 *_* _**

任何人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:20:35.157

好吧，在我提供了一个应用程序命名空间后，这个问题似乎已经消失了。似乎只有在您使用默认应用程序 ID 作为命名空间时才会发生这种情况。

# ios - 从 Xcode 在 iPhone4 上运行应用程序失败

> ID：13127796
> 
> 赞同：10
> 
> 时间：2012-10-29T18:47:23.813
> 
> 标签：ios, xcode, debugging

从 Xcode 在我的 iPhone 上运行我的应用程序时遇到问题。该应用程序在模拟器（iPhone、iPad 等）中运行（看起来）很好。它在 iPhone4 或 iPad2 上加载时也运行良好，只有在尝试从 Xcode（4.5 版）启动应用程序时，我才从 Xcode 收到以下消息：无法启动“”无法获取进程 1024 的任务“， Xcode 输出窗口中的唯一消息是：

```
error: failed to launch '/private/var/mobile/Applications/36159066-FEDB-4A26-A05D-E599F397074A/MetriScan.app' -- failed to get the task for process 1024` 
```

iPhone 上没有崩溃日志，但控制台日志包含以下内容（运行前清除）：

```
Oct 29 11:14:37 Bjarne mobile_house_arrest[1015] <Error>: Max open files: 125
��Oct 29 11:14:38 Bjarne installd[31] <Error>: 0x2fe93000 handle_install: Install of "/var/mobile/Media/PublicStaging/MetriScan.app" requested by mobile_installation_proxy
��Oct 29 11:14:38 Bjarne installd[31] <Error>: 0x2fe93000 MobileInstallationInstall_Server: Installing app Bjarne.Christensen.MetriScan
��Oct 29 11:14:39 Bjarne installd[31] <Error>: Oct 29 11:14:39  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]
��Oct 29 11:14:40 Bjarne SpringBoard[509] <Warning>: Killing Bjarne.Christensen.MetriScan for termination assertion
��Oct 29 11:14:40 Bjarne com.apple.launchd[1] (UIKitApplication:Bjarne.Christensen.MetriScan[0x89b7][792]) <Notice>: (UIKitApplication:Bjarne.Christensen.MetriScan[0x89b7]) Exited: Killed: 9
��Oct 29 11:14:40 Bjarne backboardd[52] <Warning>: Application 'UIKitApplication:Bjarne.Christensen.MetriScan[0x89b7]' exited abnormally with signal 9: Killed: 9
��Oct 29 11:14:40 Bjarne kernel[0] <Debug>: launchd[1018] Builtin profile: syncdefaultsd (sandbox)
��Oct 29 11:14:40 Bjarne installd[31] <Error>: 0x2fe93000 MobileInstallationInstall_Server: Staging: 0.43s; Waiting: 0.00s; Installation: 1.42s; LS Sync: 0.16s; Overall: 2.16s
��Oct 29 11:14:41 Bjarne installd[31] <Error>: 0x2fe93000 filter_attributes: Info.plist keys requested via MobileInstallationLookup/Browse in client Xcode (via mobile_installation_proxy) were not found in MobileInstallation's cache. Please file a bug requesting that these keys be added: <CFBasicHash 0x1cdaa9d0 [0x3ac39100]>{type = mutable set, count = 18,
    entries =>
        0 : <CFString 0x3ac259f4 [0x3ac39100]>{contents = "CFBundlePackageType"}
        1 : <CFString 0x1cdab130 [0x3ac39100]>{contents = "BuildMachineOSBuild"}
        2 : <CFString 0x3ac26a44 [0x3ac39100]>{contents = "CFBundleResourceSpecification"}
        3 : <CFString 0x1cda7440 [0x3ac39100]>{contents = "DTPlatformBuild"}
        4 : <CFString 0x3ac23794 [0x3ac39100]>{contents = "DTCompiler"}
        5 : <CFString 0x3ac25564 [0x3ac39100]>{contents = "CFBundleSignature"}
        6 : <CFString 0x3ac26224 [0x3ac39100]>{contents = "DTSDKName"}
        7 : <CFString 0x1cd7e720 [0x3ac39100]>{contents = "NSBundleResolvedPath"}
        8 : <CFString 0x3ac22eb4 [0x3ac39100]>{contents = "UISupportedInterfaceOrientations"}
        10 : <CFString 0x3ac2ae84 [0x3ac39100]>{contents = "DTXcode"}
        13 : <CFString 0x3ac2aeb4 [0x3ac39100]>{contents = "CFBundleInfoDictionaryVersion"}
        16 : <CFString 0x3ac28304 [0x3ac39100]>{contents = "CFBundleSupportedPlatforms"}
        17 : <CFString 0x1cd89710 [0x3ac39100]>{contents = "DTXcodeBuild"}
        18 : <CFString 0x1cdacc30 [0x3ac39100]>{contents = "UIStatusBarTintParameters"}
        19 : <CFString 0x3ac26e54 [0x3ac39100]>{contents = "DTPlatformVersion"}
        20 : <CFString 0x3ac29bf4 [0x3ac39100]>{contents = "DTPlatformName"}
        21 : <CFString 0x3ac2ac84 [0x3ac39100]>{contents = "CFBundleDevelopmentRegion"}
        22 : <CFString 0x1cda5800 [0x3ac39100]>{contents = "DTSDKBuild"}
    }
��Oct 29 11:14:42 Bjarne installd[31] <Error>: 0x2ffb5000 filter_attributes: Info.plist keys requested via MobileInstallationLookup/Browse in client Xcode (via mobile_installation_proxy) were not found in MobileInstallation's cache. Please file a bug requesting that these keys be added: <CFBasicHash 0x1cdaa9d0 [0x3ac39100]>{type = mutable set, count = 18,
    entries =>
        0 : <CFString 0x3ac259f4 [0x3ac39100]>{contents = "CFBundlePackageType"}
        1 : <CFString 0x1cd89710 [0x3ac39100]>{contents = "BuildMachineOSBuild"}
        2 : <CFString 0x3ac26a44 [0x3ac39100]>{contents = "CFBundleResourceSpecification"}
        3 : <CFString 0x1cdab130 [0x3ac39100]>{contents = "DTPlatformBuild"}
        4 : <CFString 0x3ac23794 [0x3ac39100]>{contents = "DTCompiler"}
        5 : <CFString 0x3ac25564 [0x3ac39100]>{contents = "CFBundleSignature"}
        6 : <CFString 0x3ac26224 [0x3ac39100]>{contents = "DTSDKName"}
        7 : <CFString 0x1cd9b540 [0x3ac39100]>{contents = "NSBundleResolvedPath"}
        8 : <CFString 0x3ac22eb4 [0x3ac39100]>{contents = "UISupportedInterfaceOrientations"}
        10 : <CFString 0x3ac2ae84 [0x3ac39100]>{contents = "DTXcode"}
        13 : <CFString 0x3ac2aeb4 [0x3ac39100]>{contents = "CFBundleInfoDictionaryVersion"}
        16 : <CFString 0x3ac28304 [0x3ac39100]>{contents = "CFBundleSupportedPlatforms"}
        17 : <CFString 0x1cd78400 [0x3ac39100]>{contents = "DTXcodeBuild"}
        18 : <CFString 0x1cd68ba0 [0x3ac39100]>{contents = "UIStatusBarTintParameters"}
        19 : <CFString 0x3ac26e54 [0x3ac39100]>{contents = "DTPlatformVersion"}
        20 : <CFString 0x3ac29bf4 [0x3ac39100]>{contents = "DTPlatformName"}
        21 : <CFString 0x3ac2ac84 [0x3ac39100]>{contents = "CFBundleDevelopmentRegion"}
        22 : <CFString 0x1cd9cee0 [0x3ac39100]>{contents = "DTSDKBuild"}
    }
��Oct 29 11:14:42 Bjarne com.apple.debugserver-189[1022] <Warning>: debugserver-189 for armv7.
��Oct 29 11:14:42 Bjarne com.apple.debugserver-189[1022] <Warning>: Connecting to com.apple.debugserver service...
��Oct 29 11:14:42 Bjarne kernel[0] <Debug>: lockbot[1013] Builtin profile: debugserver (sandbox)
��Oct 29 11:14:42 Bjarne com.apple.debugserver-189[1022] <Warning>: Got a connection, waiting for process information for launching or attaching.
��Oct 29 11:14:46 Bjarne com.apple.launchd[1] (UIKitApplication:Bjarne.Christensen.MetriScan[0x7faa][1024]) <Warning>: (UIKitApplication:Bjarne.Christensen.MetriScan[0x7faa]) Spawned and waiting for the debugger to attach before continuing...
��Oct 29 11:14:46 Bjarne amfid[1025] <Error>: Oct 29 11:14:46  SecTrustEvaluate  [leaf CriticalExtensions IssuerCommonName]
��Oct 29 11:14:47 Bjarne kernel[0] <Debug>: launchd[1024] Builtin profile: container (sandbox)
��Oct 29 11:14:47 Bjarne kernel[0] <Debug>: launchd[1024] Container: /private/var/mobile/Applications/36159066-FEDB-4A26-A05D-E599F397074A (sandbox)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 1 +0.000000 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 2 +0.105567 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 3 +0.101283 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 4 +0.102423 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 5 +0.100074 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 6 +0.102276 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:47 Bjarne com.apple.debugserver-189[1022] <Warning>: 7 +0.104515 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:48 Bjarne com.apple.debugserver-189[1022] <Warning>: 8 +0.118398 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:48 Bjarne com.apple.debugserver-189[1022] <Warning>: 9 +0.117044 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:48 Bjarne com.apple.debugserver-189[1022] <Warning>: 10 +0.100288 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:48 Bjarne com.apple.debugserver-189[1022] <Error>: error: MachTask::StartExceptionThread (): task invalid, exception thread start failed.
��Oct 29 11:14:48 Bjarne librariand[96] <Error>: client process 1024 does not have a valid com.apple.developer.ubiquity-container-identifiers entitlement
��Oct 29 11:14:48 Bjarne com.apple.debugserver-189[1022] <Warning>: 11 +0.477484 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:48 Bjarne com.apple.debugserver-189[1022] <Warning>: 12 +0.150354 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 13 +0.291521 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 14 +0.114934 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 15 +0.168568 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 16 +0.123600 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 17 +0.115101 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 18 +0.101293 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:49 Bjarne com.apple.debugserver-189[1022] <Warning>: 19 +0.101731 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:50 Bjarne com.apple.debugserver-189[1022] <Warning>: 20 +0.108046 sec [03fe/0303]: error: ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) err = ::task_for_pid ( target_tport = 0x0103, pid = 1024, &task ) => err = 0x00000005 ((os/kern) failure) (0x00000005)
��Oct 29 11:14:50 Bjarne com.apple.debugserver-189[1022] <Warning>: 21 +0.013752 sec [03fe/0303]: RNBRunLoopLaunchInferior DNBProcessLaunch() returned error: 'failed to get the task for process 1024'
��Oct 29 11:14:50 Bjarne com.apple.debugserver-189[1022] <Warning>: error: failed to launch process (null): failed to get the task for process 1024
Oct 29 11:14:50 Bjarne com.apple.debugserver-189[1022] <Warning>: 22 +0.002978 sec [03fe/1303]: error: ::read ( 5, 0x2fe80a0c, 1024 ) => -1 err = Bad file descriptor (0x00000009)
Oct 29 11:14:50 Bjarne com.apple.launchd[1] (UIKitApplication:Bjarne.Christensen.MetriScan[0x7faa][1024]) <Notice>: (UIKitApplication:Bjarne.Christensen.MetriScan[0x7faa]) Exited: Killed: 9
��Oct 29 11:14:50 Bjarne backboardd[52] <Warning>: Application 'UIKitApplication:Bjarne.Christensen.MetriScan[0x7faa]' exited abnormally with signal 9: Killed: 9
�� 
```

不幸的是，我没有从日志中得到太多信息 :) 但我很好奇关于 Max open files 的第一行，这是一个问题。

我感觉问题出在 Info.plist 上，但我不知道从哪里开始。

我应该提一下，直到大约一个月前，我最后一次工作备份之前，它都可以正常工作，而且我看不出那个和下一个非工作备份之间的代码有任何区别。我主要在模拟器中运行代码或通过 iTunes 直接加载到我的测试设备中，这就是为什么我花了这么长时间才发现问题的原因。从那时起我就一直致力于本地化，也许这就是问题出现的地方？

我用谷歌搜索了这个问题，但没有找到任何似乎适用的东西，我重新启动了 iPhone 和 iMac，当然在这期间从 iPhone 中删除了该应用程序。

任何帮助和指示将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-29T20:57:33.863

事实证明这是一个代码签名问题。不久前，我在将 iPad 3 添加到我的测试设备以进行 Adhoc 分发时遇到问题，我更改了代码登录以使其正常工作。那是一个 iOS 分发证书，我现在必须把它改回开发者证书才能从 Xcode 运行 iPhone。从中可以清楚地看出，我真的不完全了解整个代码签名和分发过程。

但它再次起作用，太棒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:12:23.207

我怀疑这也是进行分发构建的代码签名。它还带有一个 xcode 错误“没有可用的配置文件”，所以我将构建方案切换回“调试”，这似乎修复了它。

脚步：

1.  在xcode的左上角，点击“你的APP名称|你的IPAD”
2.  点击“编辑方案”
3.  从左栏中选择“运行 YOURAPP.app”并进入“信息”选项卡
4.  将“构建配置”设置回“调试”

希望这就是它的全部。我也不太了解代码签名。

# internet-explorer - 错误：达到 10 次 $digest() 迭代。中止！使用 httpInterceptor (iFrame) IE

> ID：13127802
> 
> 赞同：1
> 
> 时间：2012-10-29T18:48:17.057
> 
> 标签：internet-explorer, http, request, angularjs, digest

我正在使用 AngularJS，我在这里有一个小问题。我刚刚让我的 httpInterceptor 服务在执行 ajaxRequests 时在网页上显示一个微调器，但是当我使用 IE 在 iF​​rame 中运行它时出现这个错误；使用 Chrome、Firefox 不会发生这种情况。这是拦截器的代码：

```
.factory('httpInterceptor', function ($q, $rootScope) {
        return function (promise) {
            $rootScope.$$childHead.spinner += 1;
            return promise.then(function (response) {
                $rootScope.$$childHead.spinner -= 1;
                return response;
            }, function (response) {
                $rootScope.$$childHead.spinner -= 1;
                return $q.reject(response);
            });
        };
    }).config(function ($httpProvider) {
        $httpProvider.responseInterceptors.push('httpInterceptor');
        var spinnerFunction = function (data, headersGetter) {
            return data;
        };
        $httpProvider.defaults.transformRequest.push(spinnerFunction);
    }); 
```

出于某种原因，当我在 iFrame 中运行我的应用程序时，它会向我显示此错误：

```
Error: 10 $digest() iterations reached. Aborting!
Watchers fired in the last 5 iterations: 
```

我想知道这是因为在 iFrame 中运行它还是因为 promise 对象造成的。

我在使用 ng-repeat 时看到了这个错误，但我还没有找到原因。如果你有类似的问题，请给我一些建议。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:11:51.077

在引用 $rootScope.$$childHead 时，您似乎正在陷入角度。如果这是一个内部构造，那么这很可能是您的问题。你似乎在用角度来更新同一个字段。[看到这个解决方案](https://stackoverflow.com/questions/11863148/angularjs-post-receive-hook-or-similar/11870892#11870892)

# php - JOIN 查询语法错误

> ID：13127806
> 
> 赞同：-2
> 
> 时间：2012-10-29T18:48:24.577
> 
> 标签：php, mysql

大家好，我是 php 和 mysql 的初学者，我在这里加入了 3 个表，但我的查询没有运行，因为它不正确。thres 是其中的语法错误。请帮忙，我会很感激:)）

```
$result = mysql_query("SELECT   courses.id AS cid,
                                courses.title,
                                courses.subjectsid,
                                subjects.id AS sid,
                                subjects.subjectname,
                                requestrecord.status
                       FROM     courses,
                                subjects,
                                requestrecord
                       LEFTJOIN requestrecord
                         ON     courses.id = requestrecord.coursesid
                       WHERE   (courses.subjectsid = subjects.id )"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:53:22.277

除了 LEFT JOIN 问题之外，您还要加入 requestrecord 表两次（一次作为隐式笛卡尔连接）。尝试：

```
$result = mysql_query("SELECT courses.id AS cid, courses.title, courses.subjectsid,  subjects.id AS sid, subjects.subjectname, requestrecord.status FROM courses JOIN subjects ON courses.subjectsid = subjects.id LEFT JOIN requestrecord ON courses.id = requestrecord.coursesid"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T18:53:45.133

您有一个奇怪的隐式（WHERE 子句）和显式连接以及`LEFT JOIN`. 建议只选择显式连接。最终，您的方法会针对`requestrecord`.

```
SELECT
  courses.id AS cid, 
  courses.title, courses.subjectsid,  
  subjects.id AS sid, 
  subjects.subjectname, 
  requestrecord.status 
FROM 
  courses 
  /* Explicit inner join against `subjects` */
  JOIN subjects ON courses.subjectsid = subjects.id
  /* LEFT JOIN against requestrecord */
  LEFT JOIN requestrecord ON courses.id = requestrecord.coursesid 
```

# git - Git责备文件的所有版本

> ID：13127807
> 
> 赞同：1
> 
> 时间：2012-10-29T18:48:27.710
> 
> 标签：git, blame

我正在使用 Git 存储库，我需要获取文件的“责备”数据（例如 log-tree.c）。所以，我正在使用以下命令

```
git --git-dir=/home/gh/git/.git --work-tree=/home/gh/git blame log-tree.c 
```

但是，它只显示文件最后版本的数据，但我需要获取该文件每个版本的“责备”信息。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:03:09.380

`<rev>`您可以通过在命令行上指定 a 来指定您想要“责备”输出的修订版。例如：

```
git blame HEAD^ log-tree.c 
```

将显示上一个版本的责备输出。您可以使用此功能来获取文件的任何历史版本的责备输出。

# c - 在编译时在所有 .c 源文件中包含 #define

> ID：13127810
> 
> 赞同：10
> 
> 时间：2012-10-29T18:48:44.843
> 
> 标签：c, gcc

我需要`#define`在大约 300 个 .c 文件的顶部包含一个。我不希望更改代码，因为它是开源代码，但如果必须，我将只编写一个脚本来修改所有文件。有没有办法在编译期间使用 gcc 在`#define`每个源文件的顶部添加头文件或头文件？是这样的`#define`：

```
#define malloc MYmalloc 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-29T18:49:55.387

您可以传递`-Dmalloc=MYmalloc`给`gcc`选项。

有关该`-D`选项的更多信息：

[http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)

请注意，如果您想修改`malloc`函数的行为以进行调试，您可能还对`glibc` `malloc`钩子感兴趣：

[http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html](http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-29T18:51:54.157

gcc 选项`-D`：

```
-D name
    Predefine name as a macro, with definition 1.

-D name=definition
    .... 
```

所以，在你的情况下，`gcc ... -Dmalloc=MYmalloc`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T18:54:22.067

如果您努力将`malloc()`调用重定向到自定义函数，我宁愿建议通过在运行时预加载您的实现来提供您的自定义代码。有关详细信息，请参阅[此](https://stackoverflow.com/questions/262439/create-a-wrapper-function-for-malloc-and-free-in-c)问题。

# version-control - 我应该如何管理“恢复”使用 mercurial 中的书签完成的分支？

> ID：13127818
> 
> 赞同：4
> 
> 时间：2012-10-27T03:46:41.597
> 
> 标签：version-control, mercurial, dvcs

我有一个关于 bitbucket 的开源项目。最近，我一直在研究一个实验分支，我（无论出于何种原因）并没有为它创建一个实际的分支。相反，我所做的是使用书签。

所以我在同一个版本中做了两个书签

*   测试——我工作的新代码现在应该被放弃（由于实验失败）
*   main -- 稳定的旧代码

我在测试中工作。我还从测试推送到我的服务器，最终将`tip`标签切换到新的不稳定代码，而我真的希望它留在 main。`hg update main`我通过执行 a然后提交了一个微不足道的更改来“切换”回主书签。所以，我推动了这个，`hg push -f`现在我的源代码控制在服务器上是“正确的”。

我知道应该有一种更清洁的方式来“切换”分支。这种手术以后应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:15:16.080

`tip`在具有任何类型的分支的存储库中，它不是一个广泛有用的概念。无论您是使用书签、命名分支还是匿名分支，`tip`总是意味着任何分支上的最新提交，这很少是您关心的事情。解决问题的真正方法是停止担心`tip`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T09:32:21.553

我不太明白你的问题，因为你正在切换（不带引号）分支，即使它们没有命名分支，当你使用书签时它们仍然是分支。

你犯的错误是一个诚实的错误，我认为没有办法让 Mercurial 保护你免于使用书签再次这样做（用不同的书签标记相同的 rev 并使用错误的书签提交）。我可以告诉你的是如何**使用 Mercurial 进行私有本地分支**，这样你就可以避免产生刚刚产生的后果：

# 您使用命名的分支和阶段

**[Mercurial Phases](http://mercurial.selenic.com/wiki/Phases)**真的很甜蜜，让我快速解释一下。您可以将修订标记为三个称为阶段的特殊状态，它们是：秘密、草稿和公开。

1.  **秘诀**：不要被推。可以通过历史编辑进行修改。
2.  **草稿**：被推。可以通过历史编辑进行修改。这是任何修订的默认状态。
3.  **public**：被推送。在对它们使用历史编辑扩展（strip、rebase、histedit...）时会发出警告。

如前所述，默认情况下，所有本地修订都是***草稿*，当您推送它们时，它们会变为*public***。您可以使用该`hg phase`命令标记对特定阶段的修订，但如果您要从 #3 到 #2，或从 #2 到 #1（根据之前的编号），则需要 -f 参数来强制更改， 这是：

秘密-->草稿-->公开

要向左移动，您需要使用 --force 或 -f。

这是你要做的：

```
hg branch experiment
hg commit -m "Opening experimental branch" //say this creates revision 123
hg phase -sf tip                           //s is for secret, f is for force
//... hack hack hack
hg commit -m "Uh oh screwed up here"
hg push                                    //no secret revisions are pushed 
```

现在，您可以放弃该分支并保持原样，它永远不会被推送。忘记它，甚至关闭它，这样当你列出你的分支时它就不会打扰你。它不会被推送，也不会被列出，所以不要担心。

但是，如果您有强迫症，只需`hg strip`在打开分支的提交处剥离 () 分支，它就消失了：

```
hg strip 123 
```

如果您已经有一个现有的分支，您可以像这样一次分阶段进行多个修订：

```
hg phase <start revision>::<end revision> -sf 
```

要使您的秘密分支草稿或公开，只需将最新修订分阶段到这些阶段：

```
hg phase -d tip    //assuming you are in the experiment branch 
```

然后推送，分支就会公开。

Mercurial 在修改历史方面变得越来越好，而没有改变它不鼓励这样做的一般哲学。阶段旨在保护您免受意外的历史修改以及共享您不希望的内容。

# *我*如何使用书签

就个人而言，我使用书签进行调试以及当我想尝试两种不同的方式来做一件事时。**对我来说，当你想做匿名分支**（更新到以前的版本、提交和分叉历史）但又想让事情变得容易理解时，书签很有用。

# assembly - Howcome 程序集没有有符号和无符号的减法指令？

> ID：13127821
> 
> 赞同：1
> 
> 时间：2012-10-29T18:49:44.267
> 
> 标签：assembly, signed, unsigned-integer

我正在为它制作一个虚拟机和一个 C 编译器。我不明白的是大多数指令集如何具有 IMUL 和 IDIV，但没有 ISUB 和 IADD。由于 sub 通常是 unsigned sub 我怎么能在 x86 中做类似的事情

```
MOV EAX,1
MOV EDX,3
SUB EAX,EDX,EAX 
```

并得到-2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:52:35.747

每条指令只有一条指令，因为无论参数是有符号还是无符号，减法和加法都会产生相同的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T18:54:58.360

有符号加法总是产生与无符号加法相同的输出位模式——只是它们的解释不同——因此不需要为这两种情况提供单独的指令。减法也是一样。

一般的 ADD 和 SUB 指令设置两组条件标志，以便您稍后可以使用 ja/jb 进行无符号比较或使用 jg/jl 进行有符号比较来检查基于 SUB 的比较的结果。

（更准确地说：如果您已经有执行无符号加法/减法模 2^wordlen 的指令，那么它们产生的位模式对于每个 2 的补码有*符号*加法/减法都是正确的，其真实结果是可表示的。从数学上讲，这是因为无符号整数和2 的补码有符号整数只是残差类模 2^wordlength 的典型代表的不同选择）。

# ruby-on-rails - SSL、Github 和 Heroku——正在推动安全吗？

> ID：13127837
> 
> 赞同：2
> 
> 时间：2012-10-29T18:51:10.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ssl, heroku, github

我刚刚为 Heroku 部署的应用程序购买了 SSL 证书。按照[他们的指示](https://devcenter.heroku.com/articles/ssl-certificate)，我下载了证书和私钥，将它们保存在 server.crt 和 server.key 文件中（其中包含一些 RapidSSL CA 交易），现在正计划推送和部署。令人担心的是，我的 github 存储库是公开的，我觉得将我的“私有”密钥和证书推送到公共站点是个坏主意。有点违背 SSL 的目的，对吧？

但是，如果不发布此信息，我还能如何让它工作呢？我是 SSL 和编码的新手，我只是非常不想放弃我刚刚花了很多钱购买的安全性，因为我不明白这一切是如何运作的。

对不起，如果这个问题不是很编码。就是不知道去哪里问比较好。

编辑——我现在正在查看 Heroku 文档，说要添加一个 Heroku SSL 插件，然后只需键入

```
heroku certs:add server.crt server.key 
```

让 heroku 获取文件并使用 SSL 证书。但这并没有改变我的 PUBLIC 存储库中有两个带有 PRIVATE 安全信息的文件的问题。我只是将它们添加到 .gitignore 或其他东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T18:59:52.310

您不应将您为 SSL 创建的任何文件检查到源代码控制（server.crt、server.key 等）中，也不应将它们推送到 Heroku。正如 Heroku 的文档所述，一旦您添加了 SSL，您应该使用 certs 命令行来添加它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-29T19:07:00.060

Heroku 不需要您将这两个文件推送到您的存储库。您可以这样做`heroku certs`，它会从您的**本地文件夹**中挑选并上传它们。不涉及回购。

# javascript - OOP Javascript - 参考错误

> ID：13127842
> 
> 赞同：1
> 
> 时间：2012-10-29T18:51:31.190
> 
> 标签：javascript, jquery, oop

所以我试图将我的网络应用程序转换为基于 OOP 的，因为这就是我最初学习编程的方式。我已经定义了所有功能和所有内容，但我遇到了问题。

假设在 index.php 中我打开一个脚本标签并创建一个对象函数：

```
<script type="text/javascript">
function myObject(_string){
   this.string = _string;

   this.get_string = function(){
       return this.string;
   }
}
</script> 
```

没什么大不了的。

现在，如果我调用它，如果我这样做，它就可以正常工作：

```
var my_object = new myObject("this is a string");
console.log(my_object.get_string) // logs "this is a string" 
```

但如果我将它包装在 domReady 中，则永远不会创建对象，并且调用 my_object 会返回引用错误：

```
$(document).ready(function() {
     var my_object = new myObject("this is a string");
     console.log(my_object); // returns reference error
}); 
```

如果我在我的对象中嵌入一个函数并尝试调用它，我会遇到同样的问题：

```
<script type="text/javascript">
    function myObject(_string){
       this.string = _string;

       this.get_string = function(){
           return this.string;
       }

       this.set_string = function(new_string){
            this.string = new_string;
       }
    }

    my_object = new myObject("this is a string");
    my_object.set_string("this is a new string"); // returns reference error
    my_object.set_string() // Returns reference error
    my_object.set_string // returns a string containing the function
</script> 
```

对此感到非常困惑。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T18:55:03.047

无论您的代码放置在哪里，这都应该有效

```
function myObject(_string){
   this.string = _string;

   this.get_string = function(){
       return this.string;
   };

   this.set_string = function(new_string){
        this.string = new_string;
   };
} 
```

并调用类似：

```
var my_object = new myObject("this is a string");
console.log(my_object.get_string()) // will log "this is a string" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-29T18:55:36.037

您必须在类定义中正确启动您的函数：

```
this.get_string = function(){...} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-29T18:57:01.983

您的“方法”不是您对象的属性，您已将它们分配给（隐含）全局变量。采用

```
function myObject(_string) {
    this.string = _string;
    this.get_string = function() {
        return this.string;
    }
} 
```

顺便说一句，这个方法调用起来很方便`toString`，那么当对象被转换为字符串时也可以使用它。而且您可能想使用本地“私有”变量而不是公共属性`.string`，这使您的 getter 和 setter 变得非常多余：

```
function myObject(string) {
    // the parameter is like 
    // var string;
    this.toString = function() {
        return string;
    };
    this.setString = function(new_string) {
        string = new_string;
    };
} 
```

# html - @fontface otf 和 ttf 都不适用于 Firefox，但适用于 Chrome 和 Safari

> ID：13127845
> 
> 赞同：1
> 
> 时间：2012-10-29T18:51:37.833
> 
> 标签：html, firefox, css, font-face

我有这种字体，我想使用它。我将它上传到我的服务器，并使用 fontface 调用它。它们在 Chrome 和 Safari 上工作得很好，但在 FireFox 上就不行了。我尝试了 .otf 和 .ttf。它们都适用于 Chrome 和 Safari，但不适用于 FireFox。他们也可以与 jsfiddle.net 一起使用。我用谷歌搜索了为什么 FireFox 会这样做，人们说如果我将 .ttf 转换为 .otf，它应该可以工作。但它现在不起作用。有人可以告诉我它有什么问题吗？

```
 <!doctype html>
     <html>
      <head>
      <meta charset="UTF-8">
    <title>font-test</title>
    <style>
    @font-face {font-family:Hush;  src: local(Hush),       url('http://www.yifanchen.net/temp/Hush.otf') format('opentype');}
      @font-face {font-family:Hush2;  src: local(Hush2), url('http://www.yifanchen.net/temp/hush.ttf') format('truetype');}

   .test h1.otf {font-family:Hush; color:#000;} 
   .test h1.ttf {font-family:Hush2; color:red;}
   </style>
   </head>

   <body>
    <div class="test"> 
   <h1 class="otf">This is a test for Hush.otf.</h1>
   <h1 class="ttf">This is a test for Hush.ttf</h1>
   </div>
   </body> 
```

[http://jsfiddle.net/7537247/wUvqe/](http://jsfiddle.net/7537247/wUvqe/) 他们确实在 jsfddle 工作，如果你想在 FireFox 中测试它。您可能需要下载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T21:22:41.243

在 Firefox 中，路径必须在同一个域中。如果您将 src url 设置为另一个域，Firefox 无法找到任何字体。我更改了域，它可以在 FireFox 中使用，并且在 IE 中也可以使用。只是希望这个答案也能帮助其他用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:37:07.187

让字体在所有浏览器中都能正常工作非常繁琐，如果您还想支持 Internet Explorer，则需要一些额外的格式。[如果您可以在http://fontsquirrel.com](http://fontsquirrel.com)找到相同或相似的字体，他们有一个非常简单的“字体工具包”下载，您只需将其复制到您的站点中即可。或者您可以使用他们的模板作为指南，并替换您的字体。

# php - 数据未插入 CakePHP

> ID：13127847
> 
> 赞同：0
> 
> 时间：2012-10-29T18:51:39.180
> 
> 标签：php, mysql, cakephp

我目前正在尝试将来自 YouTube 的信息插入数据库以供将来使用。当插入完成并且闪存返回时，我没有收到任何错误，就好像数据已成功插入一样。问题是只有一列数据被插入到表中。这是我正在使用的代码。

**风景：**

```
<?php foreach ($videos->data->items as $video) : ?>
        <?php echo $this->Form->create('Youtube', array('action' => 'addNews')); ?>
        <tr>
            <td><?php echo $this->Html->image($video->thumbnail->hqDefault, array('width' => 72, 'height' => 56, 'alt' => 'image')); ?></td>
            <td><?php echo $this->Time->niceShort($video->uploaded); ?></td>
            <td><?php echo $video->category; ?></td>
            <td><?php echo $video->title; ?></td>
            <td><?php echo $this->Text->truncate($video->description, 50); ?></td>
            <td><?php echo $this->Number->precision($video->rating, 2); ?></td>
            <?php echo $this->Form->input('youtube_url', array('type' => 'hidden', 'value' => $video->id)); ?>
            <?php echo $this->Form->input('uploaded', array('type' => 'hidden', 'value' => $this->Time->format('Y-m-d H:i:s', $video->uploaded))); ?>
            <?php echo $this->Form->input('updated', array('type' => 'hidden', 'value' => $this->Time->format('Y-m-d H:i:s', $video->updated))); ?>
            <?php echo $this->Form->input('uploader', array('type' => 'hidden', 'value' => $video->uploader)); ?>
            <?php echo $this->Form->input('category', array('type' => 'hidden', 'value' => $video->category)); ?>
            <?php echo $this->Form->input('title', array('type' => 'hidden', 'value' => $video->title)); ?>
            <?php echo $this->Form->input('description', array('type' => 'hidden', 'value' => $video->description)); ?>
            <?php echo $this->Form->input('sqDefault', array('type' => 'hidden', 'value' => $video->thumbnail->sqDefault)); ?>
            <?php echo $this->Form->input('hqDefault', array('type' => 'hidden', 'value' => $video->thumbnail->hqDefault)); ?>
            <?php echo $this->Form->input('default_player', array('type' => 'hidden', 'value' => $video->player->default)); ?>
            <?php echo $this->Form->input('mobile_player', array('type' => 'hidden', 'value' => $video->player->mobile)); ?>
            <?php echo $this->Form->input('duration', array('type' => 'hidden', 'value' => $video->duration)); ?>
            <?php echo $this->Form->input('rating', array('type' => 'hidden', 'value' => $video->rating)); ?>
            <?php echo $this->Form->input('like_count', array('type' => 'hidden', 'value' => $video->likeCount)); ?>
            <?php echo $this->Form->input('view_count', array('type' => 'hidden', 'value' => $video->viewCount)); ?>
            <?php echo $this->Form->input('comment_count', array('type' => 'hidden', 'value' => $video->commentCount)); ?>
            <?php echo $this->Form->input('embed', array('type' => 'hidden', 'value' => $video->accessControl->embed)); ?>
            <td><?php echo $video->viewCount; ?></td>
            <td><?php echo $video->accessControl->embed; ?></td>
            <td><?php echo $this->Form->submit('Add News'); ?></td>
        </tr>
        <?php //echo $this->Form->end(); ?>
    <?php endforeach; ?> 
```

我想也许有更好的方法来显示项目并设置值，尽管我是蛋糕新手，所以我不确定我应该寻找什么来制作一个具有除表单之外的预设不可更改值的表单- >输入（类型=>隐藏）；

**控制器：**

```
if($this->request->is('post') || $this->request->is('put')) {

            //debug($this->request->data);
            if($this->Youtube->save($this->request-data)) {
                $this->Session->setFlash('Your post was added');
                $this->redirect($this->referer());
            }
        } 
```

我检查了我对表格等的命名，它们都是正确的。我不确定中断发生在哪里，或者我如何才能得到蛋糕来传递正在发生的任何 MySQL 错误。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:26:40.770

愚蠢让我在这方面做得最好......语法错字是阻止我在这里保存数据的原因：`if($this->Youtube->save($this->request-data))`应该是`if($this->Youtube->save($this->request->data))`. 错过了`>`...我想有一半的时间是手的问题...该死的错字！

# c# - 使用 C# 测试 REST 日志记录 Web 服务

> ID：13127851
> 
> 赞同：1
> 
> 时间：2012-10-29T18:51:50.157
> 
> 标签：c#, rest, testing

我使用 C# 在 VS2012 中创建了一个非常基本的 REST Web 服务。我采用的方法如下面的一个示例所示：

```
[OperationContract]
[WebInvoke(Method = "GET",
        ResponseFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "OpenSession/{key}/{source_userid}/{source_id}/{source_version}/{source_ip}")]
string OpenSession(string key, string source_userid, string source_id, string source_version, string source_ip); 
```

代码运行良好，服务已启动并正在运行。我得到响应，分发令牌等。我认为将数据包装在 URL 中就可以了，因为该服务是为日志记录而构建的，所以最后，调用将是（例如）：

www.service.site/service.svc/2/5/12/HELLO

（顺便说一句，如果有更好的方法可以做到这一点，同时保持 REST 服务，请告诉我）

我遇到的问题是......我如何正确测试这个？我需要为此服务模拟 1,000 次并发点击，并构建了一个自定义 C# Windows 应用程序来执行此操作，但我遇到了许多问题。

首先，我不知道如何使用 HttpWebRequest 和流读取器/写入器以可管理的格式正确发送/接收数据。我看到请求有 GET 和 PUT 方法等，但老实说，我似乎无法区分发布数据与 URL 信息的正面或反面。AFAIK 我并没有真正发布任何数据，因为我的所有数据都嵌入在 URL 请求本身中；这个对吗？

另外，我不知道将 HttpWebRequest 设置为什么“内容类型”以与我的操作合同兼容（我可以看到 JSON 的枚举，但“文本”应该是什么？）

最重要的是，HttpWebRequest 非常慢。当我直接打开服务的 URL 时（例如“http://localhost:51849/Scribe.svc”），它很快，但是第二次我尝试调用一个方法（例如“”http://localhost:51849/ Scribe.svc/GetStatus"），我得到了 1.5-2 秒的延迟（我已经完成了所有代理修复以确保它尽可能快）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:20:54.310

也许您应该考虑使用一些性能工具。有很多，它们应该很容易找到适合你的酒的。Jmeter 可能是一个不错的选择。

这是一个展示如何使用 Jmeter 测试 REST Web 服务的[**指南。**](http://www.youtube.com/watch?v=kfNn9OuuEyU)

希望它可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:13:23.707

我不知道你是否知道这个实用程序： [SoapUI](http://www.soapui.org/soapUI-in-the-news/using-soapui-for-testing-aspnet-soap-web-services.html)

您可以使用它来引用您的服务并生成请求以测试您的服务。

安装非常简单。安装后，您必须单击文件/新建 SoapUI 项目。然后，在弹出窗口中，使用服务的 wsdl 填写“Initial WSDL/WADL:”字段，如下所示：

```
http://localhost:51849/Scribe.svc?wsdl 
```

它将生成客户端以正确调用您的服务。使用soap ui，您甚至可以测试进行大量调用以强调您的服务。这是测试服务的好方法。

> AFAIK 我并没有真正发布任何数据，因为我的所有数据都嵌入在 URL 请求本身中；这个对吗？

是的。这就是 GET 请求的工作方式。数据通过您的网址传递。你应该只在不改变服务器上数据状态的时候使用 GET 请求，否则你应该使用 post.

当您想在服务器上创建/更新数据时将使用的 PUT 方法。

我希望它有所帮助。

问候，罗德里戈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T18:52:03.843

感谢您的回复！实际上，我现在的测试系统正在运行，并且可以通过数千个计时器控制的会话来猛击我的服务。解决 PUT 请求问题的关键是使用空设置：

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(url);
req.Method = "PUT";
req.ContentType = "application/json";
req.ContentLength = 0; 
```

我确实看过这些工具，但对于我的特定需求，我发现编写一个自定义的计时器控制应用程序是最好的方法。

我不确定延迟是否仍然存在问题，或者甚至可能与调试状态有关。一旦我将服务发布到 Azure 并对其进行远程测试，我会更好地了解基于服务的连接是否存在任何延迟问题......

# linux - mmap 的大小限制是多少

> ID：13127855
> 
> 赞同：5
> 
> 时间：2012-10-29T18:52:02.547
> 
> 标签：linux, mmap

我正在使用`mmap()`将共享内存对象映射到进程。我的问题有两个部分：

`mmap()`1） linux进程的大小限制是多少？（有这个限制吗？）

2）进程运行一段时间后，我认为进程虚拟内存地址空间会以某种方式碎片化。这会影响我`mmap()`在这个过程中可以做的最大尺寸吗？

使用的 linux 内核是`2.6.27`. 共享内存对象的大小约为 32MB。我正在尝试访问`mmap()`由于没有足够的虚拟地址空间而导致此类共享内存对象失败的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T15:01:11.183

大小没有限制，`mmap`但取决于给定进程使用的现有地址空间。但强烈建议您不要`mmap`使用大的连续虚拟地址空间。另一个建议是在`mmap`访问特定物理地址（或设备地址）并在完成后取消映射时使用“即时”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-28T07:54:19.637

**`/proc/sys/vm/overcommit_memory`控制 Linux 上的最大值**

我已经详细解释了这一点：[malloc 可以分配的最大内存](https://stackoverflow.com/questions/2798330/maximum-memory-which-malloc-can-allocate/57687432#57687432)

基本上， 的值`1`允许任意虚拟分配，而`0`和`2`具有更复杂的限制计算。

# java - 遍历 Java 集合以使这些球反弹，有什么提示吗？

> ID：13127858
> 
> 赞同：7
> 
> 时间：2012-10-29T18:52:12.730
> 
> 标签：java, bluej

如果问题不清楚，我深表歉意，但我想不出另一种表达方式。

这是我整个周末都在 BlueJ 工作的课堂作业。我必须更改一种方法（反弹），让用户选择应该反弹多少球。

其他要求是：球应具有不同的大小，并应在它们反弹之前沿屏幕顶部连续显示。

为了做到这一点，我必须使用一个集合（ArrayList、HashMap、HashSet）。到目前为止，我已经使用了 HashMap 并且已经能够让用户选择一些随机大小的“球”，它们将自己放置在屏幕上半部分的随机位置。

当我尝试让每个球从屏幕顶部的位置反弹时，在右侧结束时，我卡住了。我可以让代码画一个球，反弹它然后再画另一个球，反弹它等等，直到用户选择的球数循环。

还有另外两个类，一个用于绘制画布，一个用于绘制球并移动它们。这两个我都不允许碰。

我做错的事情可能就在我面前，但我一直盯着这段代码很久，我想我会问。

我当前版本的代码如下所示：

```
import java.awt.Color;
import java.util.HashMap;
import java.util.Random;
import java.util.Iterator;

public class BallDemo   
{
    private Canvas myCanvas;

    private HashMap<Integer, BouncingBall> ballMap;

    private int n;

    private int j;

    private BouncingBall ball;

    /**
     * Create a BallDemo object. Creates a fresh canvas and makes it visible.
     */
    public BallDemo()
    {
        myCanvas = new Canvas("Ball Demo", 600, 500);
    } 
```

我必须编辑以反弹球的方法：

```
 public void bounce(int numBalls)
    {
        ballMap = new HashMap<Integer, BouncingBall>();
        int ground = 400;   // position of the ground line
        Random randomD1 = new Random();
        Random xpos = new Random();

        myCanvas.setVisible(true);

        // draw the ground
        myCanvas.drawLine(50, ground, 550, ground);

        // add balls to HashMap
           for(n = 0; n < numBalls; n++) {
         ballMap.put(numBalls, (ball = new BouncingBall(xpos.nextInt(300), 50, randomD1.nextInt(200), Color.BLUE, ground, myCanvas)));
         //
            for(j= 0; j < ballMap.size(); j++) {
                ball.draw();
                boolean finished =  false;
                   while(!finished) {
                     myCanvas.wait(50);           // small delay
                     ball.move(); // bounce the ball

                        // stop once ball has travelled a certain distance on x axis
                          if(ball.getXPosition() >= 550) {
                                    finished = true;
                                }

                        }
            }

        }
       }
} 
```

我是否使用 HashMap 在正确的线路上？键、值的组合似乎是最好的方法。我想我需要以某种方式遍历集合中放置的项目，以使它们使用 move() 方法反弹。但首先我需要球保持在屏幕顶部的一排，无论用户定义了多少。

我是编程新手，我只是难过。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:28:58.007

@16dots 部分正确，除了`ballMap.put(numBalls, ball);`每次都会在哈希映射中覆盖相同的值，因为`numBalls`不会改变......

密钥应该是唯一的。

应该读...

```
for (int n; n < numBalls; n++) {
    BouncingBall ball = new BouncingBall(xpos.nextInt(300), 50,
            randomD1.
            nextInt(200), Color.BLUE, ground, myCanvas);
    ballMap.put(n, ball);
}

boolean finished = false;
while (!finished) {
    finished = true;
    for (int j = 0; j < ballMap.size(); j++) {
        BouncingBall selectedBall = ballMap.get(j);
        selectedBall.draw();
        // Only move the ball if it hasn't finished...
        if (selectedBall.getXPosition() < 550) {
            selectedBall.move(); // bounce the ball

            // stop once ball has travelled a certain distance on x axis
            if (selectedBall.getXPosition() < 550) {
                finished = false;
            }
        }
    }
    myCanvas.wait(50);           // small delay
} 
```

# jquery - 针对正文中的特定单词并对其应用样式？

> ID：13127877
> 
> 赞同：2
> 
> 时间：2012-10-29T18:53:10.940
> 
> 标签：jquery, word, target

目前我正在使用一个 Jquery 字符串来尝试在网站的整个正文中定位一个特定的单词并向它添加一个类。因此，例如每次出现“Nike”一词时，它都会使其变为红色并在其末尾附加一个 TM。

我一直在使用它，但它只替换了内容中第一次出现的 Nike 作品，我无法弄清楚为什么它没有替换所有这些。

这是示例：http: [//jsbin.com/ijufu3/21/](http://jsbin.com/ijufu3/21/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:10:07.670

试试这个`/Nike/g`

**.replace**只会在第一次出现时执行。要继续搜索，您需要进行全局搜索。

```
$('p:contains(Nike)').each(function(){
  $(this).html(
    $(this).html().replace(/Nike/g,'<span class="fancy">Nike</span>')
  );
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:07:38.283

我建议以下内容：

```
$('body').html(
    function(i,h){
        return h.replace(/(Nike)/g,'<span class="nike tm">$1</span>');
    });​ 
```

再加上以下CSS：

```
.tm::after {
    content: '™';
}

.nike {
    color: red;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9yRGj/1/)。

选择器被修改为您希望在其中找到单词的任何元素。

鉴于您可能需要定位不实现`::after`伪元素/CSS 生成内容的浏览器，那么还有以下选项：

```
$('body').html(
    function(i,h){
        return h.replace(/(Nike)/g,'<span class="nike">$1™&lt;/span>');
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9yRGj/2/)。

它省略了添加`tm`类并显式地将该字符添加到返回的 HTML 字符串中。

这些方法之所以有效，是因为正则表达式允许使用`g`（我认为是“全局”？）标志，它替换了*每次*出现的匹配项（括号内的字符串）。但是，因为您正在查看`html`内容，这会带来任何类名*本身*`nike`也会被替换的风险，因此请非常*非常*确定该字符串*不会*出现在意外的地方（替换会导致问题） ）。

# javascript - HTML5 从 DIV 拖放到 Canvas

> ID：13127878
> 
> 赞同：3
> 
> 时间：2012-10-29T18:53:14.290
> 
> 标签：javascript, html, canvas, multidimensional-array, drag-and-drop

我正在为我在大学的最后一年做一个音乐创作项目。我对如何处理它有一个粗略的想法，但我只需要指出正确的方向。

![图1](../Images/f4efa53eeb92f5d32822e954f7ece92d.png)

从上面的图片来看，这就是我的想法。画布被分成正方形并映射到一个 JavaScript 二维数组，存储 [FirstLine][FirstSquare] -> [FirstLine][SecondSquare] 等。直到它到达第二行，然后看起来像 [SecondLine][FirstSquare] 等。 ..你明白了。我遇到的问题是如何使用 HTML 拖放功能将右侧的 DIV 拖入方格中，并将该数组索引替换为 DIV 的 ID。我什至不确定这是否可能，但我想我会问。如果这是不可能的，那么另一个方法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T21:25:59.280

这绝对是可能的，也不需要太多代码。将“drop”事件侦听器添加到画布。事件回调函数将有一个参数，一个事件对象，其中包含属性“clientX”和“clientY”。这些是画布左上角鼠标光标的坐标。将这些坐标除以 10（或您选择的任何网格单元大小），整数部分将对应于 2d 数组中的索引。

另外，不要忘记添加其余的拖放代码。更多信息在这里：

[http://html5demos.com/drag](http://html5demos.com/drag)（查看源代码）

# python - 当我在 Pygame 中移动一个对象时，它会在其后面绘制一条 \ose 对象的路径

> ID：13127882
> 
> 赞同：0
> 
> 时间：2012-10-29T18:53:41.013
> 
> 标签：python, pygame

我认为这个错误是不言自明的，所以我只发布代码和发生的事情的屏幕截图

```
'''
Created on Oct 29, 2012

@author: pipsqueaker
'''
import pygame, sys, random
from pygame.locals import *

frapsClock = pygame.time.Clock()

class Alien:
    def __init__(self, arg1, arg2):
        self.x = arg1
        self.y = arg2
    def move(self, craftx, crafty):
        if self.x < craftx:
            self.x += 1
        elif self.x > craftx:
            self.x -= 1
    if self.y < crafty:
        self.y += 1
    elif self.y > crafty:
        self.y -= 1

class PlayShip():
    def __init__(self, ag1, ag2):
        self.x = ag1
        self.y = ag2

class mainLopp():
    Board = pygame.display.set_mode((650, 500))
    pygame.display.set_caption("This")
    pygame.init()

    player = PlayShip(random.randrange(1, 650), random.randrange(1, 500))
    alienList = [Alien(random.randrange(1, 650), random.randrange(1, 500))]

    while True:
        pygame.draw.rect(Board, (0, 0, 255), (player.x, player.y, 12, 12))

        for currAlien in alienList:
            currAlien.move(player.x, player.y)
            pygame.draw.rect(Board, (255, 0, 0), (currAlien.x, currAlien.y, 16, 16))

        for event in pygame.event.get():
            if event.type == QUIT:
                print(alienList)
                pygame.quit()
                sys.exit()
        pygame.display.update()  
        frapsClock.tick(100) 
```

move() 方法应该（随着时间的推移）将外星人（红色）移动到玩家（蓝色）。但是当该代码运行时，就会发生这种情况![它不应该像这样连续](../Images/9d673a479c1272b9581e87775cb323ef.png)

它不应该像那样连续。这引出了一个问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T18:59:38.120

快速修复：

在主循环之前预先创建一种颜色：

```
black = pygame.Color('black') 
```

在你的主循环中：

```
while True:
    Board.fill(black)
    pygame.draw.rect(Board, (0, 0, 255), (player.x, player.y, 12, 12)) 
```

这将在整个屏幕上涂黑，有效地擦除所有内容。这没关系，因为您在擦除后立即重新绘制所有内容。

在更高级的绘图代码中，您可以：

*   在旧精灵的顶部绘制一个黑色矩形
*   然后更新精灵的位置
*   然后重新绘制精灵。

# asp.net-mvc-3 - Dapper 为 SingleOrDefault(DATEDIFF(...)) 返回 null

> ID：13127886
> 
> 赞同：1
> 
> 时间：2012-10-29T18:53:54.227
> 
> 标签：asp.net-mvc-3, sql-server-2008, dapper

我有一个类似于以下的 SQL 语句：

`SELECT DATEDIFF(Day, startDate, endDate) FROM Data WHERE ProjectId=@id`

在`Data`没有任何记录的情况下`ProjectId`，SQL Server 返回 null。

在 Dapper 中，我通过以下方式执行此操作：

`value = conn.Query<int>("...").SingleOrDefault()`

在这种情况下，我希望 的语义`SingleOrDefault`意味着“如果这是 null，则返回零”。事实上，我的代码更加零友好：

```
int toReturn = 0;
using (var conn = ...) {
  toReturn = conn.Query<int>("SELECT DATEDIFF(...))");
}
return toReturn; 
```

当我调试并单步执行此代码时，我发现该行`yield return (T)func(reader)`正在引发空指针异常。

我在这里做错了什么，还是设计使然？

（仅供参考，解决方法是将我的选择包装在一个`ISNULL(..., 0)`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:21:52.147

> 如果 Data 没有 ProjectId 的任何记录，SQL Server 将返回 null。

在`Data`没有任何匹配记录的情况下，SQL Server 不会真正返回 null - 它不返回任何行。这种情况很好用：

```
var result = connection.Query<int>( // case with rows
 "select DATEDIFF(day, GETUTCDATE(), @date)", new { date = DateTime.UtcNow.AddDays(20) })
 .SingleOrDefault();
result.IsEqualTo(20);

result = connection.Query<int>( // case without rows
    "select DATEDIFF(day, GETUTCDATE(), @date) where 1 = 0", new { date = DateTime.UtcNow.AddDays(20) })
    .SingleOrDefault();
result.IsEqualTo(0); // zero rows; default of int over zero rows is zero 
```

两者都工作正常。您说`ISNULL`“修复”的事实意味着您正在谈论不同的场景 - “我返回行”场景。既然是这种情况，您的代码所说的是“取这个包含 null 的 1 个或多个整数，并将其映射为不可为 null 的 int” - 这*是不可能的*，并且映射器是正确的抛出一个例外。相反，你想要的是：

```
int? result = connection.Query<int?>(...).SingleOrDefault(); 
```

现在，如果有行，它会将值映射到`int?`，**然后**应用单或默认值。如果你想要它作为一个 int，那么也许：

```
int result = connection.Query<int?>(...).SingleOrDefault() ?? 0; 
```

如果您需要能够区分“零行”和“空结果”，那么我建议：

```
class NameMe {
    public int? Value {get;set;}
}
var row = connection.Query<NameMe>("select ... as [Value] ...", ...)
                    .SingleOrDefault();
if(row == null) {
   // no rows
} else if(row.Value == null) {
   // one row, null value
} else {
   // one row, non-null value
} 
```

或类似的东西

# html - 默认的 ``margin 是多宽？

> ID：13127887
> 
> 赞同：49
> 
> 时间：2012-10-29T18:53:55.593
> 
> 标签：html, css, margin

`margin`HTML 为其`<body>`标签设置的默认值是什么？我注意到有一些自动保证金，但我想知道是否有人知道它是多少（以及它是否在`px`or`%`等​​）。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-10-29T19:07:37.377

在大多数主流浏览器中，默认边距是`8px`在所有边上。它由`user-agent-stylesheet`您的浏览器提供的像素定义。

一些浏览器允许您创建和使用自己的`user-agent-stylesheet`，但如果您正在开发一个网站，我建议您不要更改此设置，因为您的用户很可能没有修改过的样式表，然后会看到与您不同的页面。

如果你想改变它，你可以这样做：

```
body {
  margin: 0px;
  padding: 0px;
  ...
} 
```

但是如果你有一个大型项目并且想要更完整，请使用[normalize.css](https://necolas.github.io/normalize.css/)。它重置了许多默认值以在浏览器之间保持一致。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-04T08:02:50.527

根据[W3School 的 CSS 参考，](https://www.w3schools.com/cssref/css_default_values.asp) body 标签的默认属性和值是，

```
body{ display : block; margin : 8px; } 
```

[通过访问Chrome 开发工具中](https://developers.google.com/web/tools/chrome-devtools/inspect-styles/#examine_and_edit_box_model_parameters)的计算窗格，可以快速获取任何元素的计算详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-29T05:57:37.050

css 默认值 [https://www.w3schools.com/cssref/css_default_values.asp](https://www.w3schools.com/cssref/css_default_values.asp)

```
body{ display : block; margin : 8px; } 
```

# c# - 连续2个c#程序游戏

> ID：13127898
> 
> 赞同：5
> 
> 时间：2012-10-29T18:54:51.137
> 
> 标签：c#, .net, winforms, algorithm

这是[游戏板](http://s1119.beta.photobucket.com/user/arled/media/Untitled-4.jpg.html)，只是为了让您了解它的外观（此板将扩展为 7x6）

我想要做的是在考虑到对角线连击的情况下，当 2 种颜色连续出现类似于游戏“连接四”时检测出获胜者。但是我想在不使用蛮力枚举的情况下做到这一点..

这是我制作的程序背后的代码我不是在寻求解决方案我只需要一些关于有效算法的帮助

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {

        private Button[] btns;
        private Button[] btns2;

        public Form1()
        {
            InitializeComponent();

            btns = new Button[] { button2, button3 };
            btns2 = new Button[] { button4, button5 };

        }

        private void Form1_Load(object sender, EventArgs e)
        {

            foreach (var btn in btns)
            {
                btn.Enabled = false;
                btn.BackColor = Color.LightCyan;
            }

            foreach (var btn in btns2)
            {
                btn.Enabled = false;
                btn.BackColor = Color.LightCyan;
            }
        }
        public int state;
        int cc = 0;
        private void button1_Click(object sender, EventArgs e)
        {
            foreach (var btn in btns)
            {
                  {
                    if (!btn.Enabled)
                    {
                        btn.Enabled = true;

                        if (cc == 0)
                        {
                            cc = 1;
                            btn.BackColor = Color.Red;
                        }
                        else
                        {
                            cc = 0;
                            btn.BackColor = Color.Yellow;
                        }
                        return;
                    }

                }
            }       
        }

        private void button6_Click(object sender, EventArgs e)
        {
            foreach (var btn in btns2)
            {
                if (!btn.Enabled)
                {
                    btn.Enabled = true;

                    if (cc == 0)
                    {
                        cc = 1;
                        btn.BackColor = Color.Red;
                    }
                    else
                    {
                        cc = 0;
                        btn.BackColor = Color.Yellow;

                    }

                    return;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-29T19:10:19.617

首先，为了效率和理智，我会将板子的状态保持在二维数组中。

其次，为了检测获胜状态，假设您以（*大概*）空棋盘开始游戏，您只能在按钮更改状态时*进入*获胜状态。如果按钮更改状态使您进入获胜状态，则该按钮必须参与该获胜状态（即它必须是您行的一部分）。

所以......你不需要蛮力整个董事会。您只需要确定刚刚更改状态的按钮是否是一行的一部分。换句话说，只查看上方、下方、左侧和右侧的按钮（也许是对角线，如果您包括对角线，您的问题就不清楚），看看它们是否与您更改的颜色相同. 如果其中任何一个是，那么这是一个胜利状态。这就是使用 2D 阵列将使您的生活更轻松的地方。*如果( x* , *y* )处的按钮发生变化，则只需检查 ( *x-1* , *y* )、( *x+1* , *y* )、( *x* , *y-1* ) 和 ( *x* , *y+1*），（可能还有对角线）当然要确保进行适当的边界检查。

将其扩展到连续 3 个、4 个或更多并不困难，除非您需要记住您可能位于一排的中间而不是一端或另一端。

连续 2 个未优化的伪代码（注意，我已切换到指南针点以避免左上、右上等，因为我觉得它有点笨拙）：

```
// cell is the cell that last changes, it has an x and y property and a color property
// board is a member variable, a 2D array of cells. Note [0,0] is the upper-left (NW) corner of the board.
// boardHeight and boardWidth are member variable with the dimensions of the board
// board[boardWidth-1, boardHeight-1] is the lower-right (SE) corner of the board
// returns true for a win, false otherwise
function checkWin(cell) returns bool {
    // check west
    if (cell.x > 0 && board[cell.x - 1, cell.y].color == cell.color)
        return true;
    // check northwest
    if (cell.x > 0 && cell.y > 0 && board[cell.x-1, cell.y-1].color == cell.color)
        return true;
    // check north
    if (cell.y > 0 && board[cell.x, cell.y-1].color == cell.color)
        return true;
    // check northeast
    if (cell.y > 0 && cell.x < boardWidth && board[cell.x+1, cell.y-1].color == cell.color)
        return true;
    // checking the other directions is left as an exercise for the reader, hopefully you get the point
    return false;
} 
```

如果你做的不止2个，我会考虑一个递归函数来计算左、右、上、下和诊断的匹配单元格的数量

```
// k is the number of cells in a row for a win
function checkWin(cell) returns bool {
    // check west / east
    int count = checkWest(cell);
    if (count > k)
         return true;
    count += checkEast(cell);
    if (count > k)
         return true;
    // check nw / se
    count = checkNW(cell);
    if (count > k)
         return true;
    count += checkSE(cell);
    if (count > k)
         return true;
    // and so on, checking N/S and NE/SW
    return false;
}

function checkWest(cell) returns int {
    // base case, check the boundaries!
    if (cell.x == 0)
        return 0;
    // base case, the cell next to this one doesn't match
    if (board[cell.x-1,cell.y].color != cell.color)
        return 0;
    // recursion, check the next cell in the line
    return 1 + checkWest(board[cell.x-1,cell.y]);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:10:53.233

对于一个`n by m`棋盘和一个连续的获胜组合`k`：

```
int n, m, k;
byte[,] color = new byte[n, m]; // for two colors, a 0 would correspond to blue, 1 would be red, or however you like

for (int i = 0; i <= n - k; i++) // don't check all the way to the right because there's no room to win
{
    for (int j = 0; j <= m - k; j++) // don't check all the way down because there's no room to win
    {
        // Check here for a win. Check for a win to the right, down right, and down
    }
} 
```

# apache-flex - 我的 mx:list 控件中的任意两个列表项之间存在巨大的多余空间

> ID：13127900
> 
> 赞同：0
> 
> 时间：2012-10-29T18:54:54.273
> 
> 标签：apache-flex, list, listitem

我有一个使用数组集合作为数据提供者的列表控件。数组集合在 actionscript 中初始化。该列表如下所示：

```
<mx:List  width="500" id="activeMessages" styleName="messages" variableRowHeight="true" verticalScrollPolicy="off" horizontalScrollPolicy="off" 
 dataProvider="{activeMessageTitles}"/> 
```

styleName .messages 是这样的：

```
.messages{
            border-style:solid;
            corner-radius:4;
            border-color:#cccccc;
            padding:0 0 0 0;
            background-color:#DCDCDC;
            margin-bottom:400px;
            padding-bottom:120px;
        } 
```

数组集合是动态加载数据并经过验证的，因此它确实具有必要的数据。必要的数据只是随机单词而不是句子，并且对于任何给定的数组不超过两个单词。

```
var activeMessageTitles:ArrayCollection = new ArrayCollection(); 
```

问题在于格式。dataProvider 确实检索了所有项目，并将它们呈现在列表中。唯一的问题是列表中任何两个行项目之间的空间很大，并且占用了任意数量的空间。我希望列表项在另一个之后立即呈现，而不是在中间有大量空间。

谁能说明这里到底出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T20:11:09.523

这个问题听起来像虚拟化。列表回收项目渲染器，仅用于显示屏幕上可见的内容。当您滚动时，flex 将使用刚刚离开视图的渲染器，并将其重新用于进入视图的渲染器。哦，根据回收渲染器中消息的大小，它仍然会保留那么大的高度......即使插入其中的新消息很小。

要解决此问题，请创建一个项目渲染器（那里有大量教程）并覆盖其 set data() 方法，以便您可以调整渲染器的大小以适应新内容。

有关完整详细信息，请参阅此链接：

[http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html)

# php - 计算加班时间

> ID：13127903
> 
> 赞同：-3
> 
> 时间：2012-10-29T18:55:01.457
> 
> 标签：php

这是我的代码。

```
<p>You worked <?php echo $hours ?>hour(s) this week.</p>
<p>Your pay for the week is: <?php  $wage  = $_GET["wage"] * ($hours > 40 ? $hours * 1.5 : $hours);
;echo number_format("$wage",2); ?></p> 
```

如果它工作超过 40+ 则按 1.5 计算。但我想要这样。假设你工作 41 小时。我希望 40 小时成为标准费率，1 小时乘以 1.5

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T18:57:25.153

更改 if 子句中的公式：

```
<p>Your pay for the week is: <?php  $wage  = $_GET["wage"] * ($hours > 40 ? ($hours-40) * 1.5 + 40: $hours); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T18:57:32.653

就像您在问题中所写的一样（而不是在您的代码中）：

```
$wage * ($hours > 40 ? 40 : $hours) + $wage * 1.5 * ($hours > 40 ? $hours - 40 : 0) 
```

或者，浓缩：

```
$wage * ($hours > 40 ? 40 + ($hours-40)*1.5 : $hours) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T19:06:57.257

我会按程序写出来，以便更清楚你在做什么：

```
<?php
$normal_wage  = $_GET["wage"];
$overtm_wage  = 1.5 * $normal_wage;

$normal_hours = min($hours, 40);
$overtm_hours = $hours - $normal_hours;

$total_pay    = ($normal_wage * $normal_hours) + ($overtm_wage * $overtm_hours);

echo "<p>You worked {$normal_hours} standard hour(s) and {$overtm_hours} overtime hour(s) this week (a total of {$hours} hours).</p>";

echo "<p>Your pay for the week is: £" . number_format($total_pay, 2) . "</p>";
?> 
```

### [现场演示](http://codepad.org/DRU74uvj)

在 PHP 中用尽可能少的字符编写代码并没有太大的好处，而且这样做实际上限制了可维护性。

# .net - 拉伸 WrapPanel 项目

> ID：13127905
> 
> 赞同：3
> 
> 时间：2012-10-29T18:55:15.787
> 
> 标签：.net, wpf, xaml, .net-4.5, wrappanel

我里面有 WrapPanel 和非常相似的项目。也许 WrapPanel 是一个错误的容器，只是描述了我所拥有的。

我希望所有项目都具有相同的宽度；最小宽度为 120。另外，我希望物品可以拉伸，这就是重点。

如果 WrapPanel 宽度为 150（小于 2*minimum），则为一列，项目的宽度为 150。

如果 WrapPanel 宽度为 350（小于 3*minimum），则将有两列，项目的宽度将为 175 (350/2)。

如果 WrapPanel 宽度为 370（小于 4*minimum），则将有三列，项目的宽度将为 123 (370/3)。也可以是 123 和 124 中的两项，无所谓。

问题是我怎样才能得到这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:35:12.853

C#代码：

```
public MainWindow()
{
    DataContext = this;
    SomeList.Add(new SomeType());
    SomeList.Add(new SomeType());
    SomeList.Add(new SomeType());
    SomeList.Add(new SomeType());
    SomeList.Add(new SomeType());
    InitializeComponent();
}
//SomeList Observable Collection
private ObservableCollection<SomeType> _someList =
    new ObservableCollection<SomeType>();
public ObservableCollection<SomeType> SomeList { get { return _someList; } }
private void UniformGrid_SizeChanged(object sender, SizeChangedEventArgs e)
{
    var grid = sender as UniformGrid;
    if (grid.ActualWidth > 370) grid.Columns = 3;
    else if (grid.ActualWidth > 150) grid.Columns = 2;
    else grid.Columns = 1;
}
public class SomeType : DependencyObject
{
    //Title Dependency Property
    public string Title
    {
        get { return (string)GetValue(TitleProperty); }
        set { SetValue(TitleProperty, value); }
    }
    public static readonly DependencyProperty TitleProperty =
        DependencyProperty.Register("Title", typeof(string), typeof(SomeType),
        new UIPropertyMetadata("unset yet"));
} 
```

XAML 代码：

```
<Window.Resources>
    <DataTemplate x:Key="SomeTemplate" DataType="{x:Type local:SomeType}">
        <Border BorderBrush="Black" BorderThickness="2" CornerRadius="4">
            <TextBlock Text="{Binding Title}"/>
        </Border>
    </DataTemplate>
</Window.Resources>
<ItemsControl
    ItemsSource="{Binding SomeList}"
    ItemTemplate="{StaticResource SomeTemplate}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid SizeChanged="UniformGrid_SizeChanged"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
</ItemsControl> 
```

# javascript - 在基于 Ext JS 的项目中使用非 ext java 脚本

> ID：13127907
> 
> 赞同：1
> 
> 时间：2012-10-29T18:55:25.277
> 
> 标签：javascript, extjs

我正在为我的项目使用 Ext JS。我从网上获得了一个示例 javascript 代码，我想尝试一下。我找不到从我拥有的基于 Ext JS 的代码中调用示例代码的正确方法。

有例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T21:59:44.593

不确定您所说的“调用”是什么意思。ExtJS 只是 javascript，您可以从中调用其他 javascript。

这是一个在 ExtJS 容器中运行的 JQuery 小部件：

[http://extjs-tutorials.blogspot.ca/2012/08/extjs-jquery-together-same.html](http://extjs-tutorials.blogspot.ca/2012/08/extjs-jquery-together-same.html)

# jquery - jQuery 多选和 .NET 复选框列表

> ID：13127912
> 
> 赞同：0
> 
> 时间：2012-10-29T18:55:41.747
> 
> 标签：jquery, .net, multi-select, checkboxlist

我的前端开发人员使用 jQuery 多选作为搜索结果页面的过滤器。多选中的数据是从数据库中动态填充的。

为了填充多选中的复选框列表，我做了类似的事情

```
<div id="multiselect">
   <asp:CheckboxList runat="server" id="chk"></asp:Checkboxlist>
</div> 
```

复选框列表是从数据库中动态填充的。按钮单击事件应该读取复选框列表的值，然后根据该值过滤搜索结果。这显示得很好，多选也能正常工作。但是在我做出选择并点击“过滤器”按钮后，后面代码中的复选框列表的扩展方法不会读取来自 asp 复选框列表的选择。

跳出来的直接问题是检查我已经完成的 !Page.IsPostBack 。但即使在修复之后，我也无法获取后面的代码来读取任何选定的值。

关于可能发生的事情有什么建议吗？我可能只是从头开始这种方法并采用其他方法，但想看看是否有什么可以做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T22:21:33.457

我不确定发生了什么，但我实施了另一个解决方案。我使用了一个隐藏字段来记录 jquery 多选上的任何更改，然后在后面的代码中读取该字段的值，一切都很好。

# ios - 是否可以使用 iOS 上的应用程序修改 CalDAV / CardDav 帐户？

> ID：13127913
> 
> 赞同：8
> 
> 时间：2012-10-29T18:55:43.930
> 
> 标签：ios, api, caldav, carddav

我想知道是否有用于修改 iOS 上的 CalDAV 和 CardDAV 帐户的 API。我正在开发一个应用程序，我希望用户能够简单地启用和禁用日历/联系人同步，而无需在 iOS 设置中手动设置。我知道我可以自带 CalDAV / CardDav 实现并使用 EventKit / 地址簿 api 进行同步，但我想避免这种实现，因为它会比使用默认的 CalDav / CardDAV 更加困难和容易出错iOS的实现。

非常感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T16:29:19.403

不完全确定您要做什么。

1.  创建新的 calDAV/cardDAV 帐户。- 服务器端操作。
2.  订阅现有的 calDAV/cardDAV 帐户 - 使用设备上的设置应用程序。
3.  使用订阅的帐户创建事件/人员 - 可以在您的应用程序中执行此操作。

从文档：

> Event Kit 提供对用户日历数据库的有限访问；它不包括实现功能齐全的日历或提醒应用程序所需的所有内容，例如添加与会者或帐户。

因此，这对 calDAV 来说是不行的。

AddressBook 的文档没有规定性，但是，知道 Apple 喜欢让用户最终控制帐户级别的任何内容的方式，我怀疑 cardDAV 是否​​也是如此。

但是，可以在设置应用程序中添加 calDAV 和 cardDAV 帐户。这似乎是您**订阅**新帐户的唯一选择。

# android - Android FOCUS_MODE_CONTINUOUS_VIDEO 和捕捉预览帧

> ID：13127914
> 
> 赞同：2
> 
> 时间：2012-10-29T18:55:50.760
> 
> 标签：android, video, camera, android-camera, autofocus

我正在开发一个图像识别应用程序，并希望相机始终自动对焦。ZXing 的人通过每隔几秒调用一次 autofocus() 解决了这个问题，但是在某些相机上，这不能顺利对焦，而是拉到一端并重新对焦。在我的 Alcatel 995、姜饼 2.3.3 API 级别 10 手机上，每次发生这种情况时，它实际上都会发出令人震惊的点击。

此手机不支持 FOCUS_MODE_CONTINUOUS_PICTURE。我尝试使用受支持的 FOCUS_MODE_CONTINUOUS_VIDEO，但它不起作用。我写了一个测试应用程序，通过回调正常捕获相机的每个预览帧，但它没有聚焦。我在应用程序中添加了录像机功能，在录制视频时，相机会一直自动对焦。但我认为，视频录制消除了在每一帧上获得回调的能力。已在 [https://stackoverflow.com/questions/9477042/extract-video-frames-while-recording-the-video-on-android?rq=1](https://stackoverflow.com/questions/9477042/extract-video-frames-while-recording-the-video-on-android?rq=1) 和 [如何在录制视频时显示实时过滤的相机预览进行了讨论？](https://stackoverflow.com/questions/12352615/how-to-show-real-time-filtered-camera-preview-while-recording-videos?rq=1)

这是一些测试代码：

```
public void surfaceCreated(SurfaceHolder holder) {
    mCamera = Camera.open();
    try {
        Camera.Parameters parameters = mCamera.getParameters();
        mCamera.setDisplayOrientation(90); // just get it right for testing
        mCamera.setParameters(parameters);
        mCamera.setPreviewDisplay(holder);
        mCamera.setPreviewCallback(new PreviewCallback() {
            public void onPreviewFrame(byte[] data, Camera arg1) {
                Log.d(TAG, String.format("Frame %d", mFrameNumber++)); // see the frames in the logcat
            }
        });
    } catch (IOException exception) {
        mCamera.release();
        mCamera = null;
        Log.d(TAG, "exception setting parameters");
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
// Now that the size is known, set up the camera parameters and begin
// the preview.
    Camera.Parameters parameters = mCamera.getParameters();
    List<Size> previewSizes = parameters.getSupportedPreviewSizes();
    Size previewSize = getOptimalPreviewSize(previewSizes, w, h);
    parameters.setPreviewSize(previewSize.width, previewSize.height);
    parameters.setFocusMode(Parameters.FOCUS_MODE_CONTINUOUS_VIDEO); 
    mCamera.setParameters(parameters);
    mCamera.startPreview();
    if (mRecordingVideo)
        startVideo(mCamera, holder);
}

// derived from http://developer.android.com/guide/topics/media/camera.html#capture-video
private void startVideo(Camera camera, SurfaceHolder holder) {
    camera.stopPreview(); // not specified in documentation but seems to be needed
    camera.unlock();
    mMediaRecorder = new MediaRecorder();
    mMediaRecorder.setCamera(camera);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA); // No audio is recorded
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
    mMediaRecorder.setOutputFile("/dev/null");
    try {
        mMediaRecorder.setPreviewDisplay(holder.getSurface());
        mMediaRecorder.prepare();
    } catch (IOException e) {
        camera.release();
        Log.d(TAG, "startVideo: Failed.");
        e.printStackTrace();
    }
    mMediaRecorder.start();
} 
```

如果我`mRecordingVideo`在上面的代码中设置启动录像机，我会获得自动对焦，但会丢失每个预览帧的回调。

Camera.Parameters类定义说[FOCUS_MODE_CONTINUOUS_VIDEO](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_CONTINUOUS_VIDEO)是“用于视频录制”，但并没有明确说明它不能正常工作。

1.  我还能做些什么来说服连续自动对焦在姜饼手机上工作而不录制视频？我错过了什么吗？
2.  这是手机专用的吗？其他手机是否在此模式下连续自动对焦而不录制视频？如果有人想在他们的手机上试用它，我会将完整的测试应用程序的源代码发布到[Github 。](https://github.com/emrys57/TestPreview2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:35:36.847

有人通过在另一个大陆的另一部手机上测试这个来帮助我。非常感谢，科林！

1.  上面的代码似乎是正确的，应该可以使相机正确对焦。

2.  此行为是特定于电话的。运行 2.3.6 的阿尔卡特 995 肯定不会在没有录像机运行的情况下在此模式下对焦。运行相同代码的三星 Galaxy Nexus（不确定是哪个操作系统）在没有运行录像机的情况下会聚焦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T09:23:59.180

尝试“setRecordingHint(true)”到相机参数

# jquery - 当 jquery 自动完成结果完成时，如何添加事件？

> ID：13127917
> 
> 赞同：0
> 
> 时间：2012-10-29T18:55:59.547
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我以这种方式使用 Jquery UI 自动完成插件

```
 $("#home_search_top").autocomplete({
                source: "/theme/site_theme/search.php",
                minLength: 2,
                parse: function() {
                    console.log("hello");
                return false;
                },
                select: function(event, ui) {
                    $('#state_id').val(ui.item.id);
                    $('#abbrev').val(ui.item.abbrev);
                }
            });

            $("#home_search_top").autocomplete({
                source: "/theme/site_theme/search.php",
                minLength: 2,
                loadingClass : "res-search"
            }); 
```

解析完成后如何显示或隐藏 someDiv？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T01:04:25.023

我认为您正在寻找该`response`事件（假设您使用的是 jQueryUI 1.9）。从文档中：

> 在搜索完成后、菜单显示之前触发。对于不需要自定义源选项回调的建议数据的本地操作很有用。搜索完成时始终触发此事件，即使由于没有结果或自动完成功能被禁用而不会显示菜单也是如此。

您应该点击此事件并隐藏`#someDiv`：

```
 $("#home_search_top").autocomplete({
     source: "/theme/site_theme/search.php",
     minLength: 2,
     select: function(event, ui) {
         $('#state_id').val(ui.item.id);
         $('#abbrev').val(ui.item.abbrev);
     },
     response: function () {
         $("#someDiv").hide();
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T20:01:47.673

```
select: function(event, ui) {
        $('#state_id').val(ui.item.id);
        $('#abbrev').val(ui.item.abbrev);

        // hide div:
        $("#MyDiv").hide();
    } 
```

# c++ - openGL 中的类似对象是否需要多个顶点缓冲区？

> ID：13127919
> 
> 赞同：1
> 
> 时间：2012-10-29T18:56:10.677
> 
> 标签：c++, opengl

例如，给定两个具有相似顶点的立方体，例如，

```
float pVerts[] = 
{
    0.0, 0.0, 0.0,
    1.0, 0.0, 0.0,
    ...
};
glGenBuffer(1, &mVertexBuffer);
glBindBuffer(...);
glBufferData(...); 
```

我可以缓存这组顶点以供以后使用吗？或者，换句话说，如果我想要第二个立方体（具有完全相同的顶点数据），我是否需要生成另一个顶点缓冲区？

对于着色器，同样适用吗？我可以使用相同的程序来绘制这些立方体吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:09:44.770

您可以使用相同的顶点缓冲区来绘制任意数量的对象（着色器与否）。如果要绘制第二个对象，只需更改模型矩阵并重新绘制即可。

着色器也是如此，您可以使用相同的着色器绘制任意数量的对象。只需绑定着色器，然后根据需要触发尽可能多的绘制调用。

# php - php替换正则表达式而不是字符串替换

> ID：13127924
> 
> 赞同：6
> 
> 时间：2012-10-29T18:56:41.550
> 
> 标签：php, regex

我试图让我的客户能够通过在他们的所见即所得编辑器中插入一个短代码来调用具有各种代码片段的函数。

例如，他们会写类似...

```
[getSnippet(1)] 
```

这将调用我的 getSnippet($id) php 函数并输出适当的“块”。

当我像这样对 $id 进行硬编码时，它会起作用......

```
echo str_replace('[getSnippet(1)]',getSnippet(1),$rowPage['sidebar_details']); 
```

但是，我真的想让“1”动态化。我有点走在正确的轨道上，比如......

```
function getSnippet($id) {
 if ($id == 1) {
  echo "car";
 }
}

$string = "This [getSnippet(1)] is a sentence.This is the next one.";
$regex = '#([getSnippet(\w)])#';
$string = preg_replace($regex, '. \1', $string);

//If you want to capture more than just periods, you can do:
echo preg_replace('#(\.|,|\?|!)(\w)#', '\1 \2', $string); 
```

不太工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:12:36.450

首先，在您的正则表达式中，您需要添加文字括号（您刚刚捕获`\w`但与括号本身不匹配的括号）：

```
$regex = '#(\[getSnippet\((\w)\)\])#'; 
```

我也转义了方括号，否则他们会打开一个字符类。另请注意，这仅捕获参数的一个字符！

但我建议你使用`preg_replace_callback`, 像这样的正则表达式：

```
function getSnippet($id) {
    if ($id == 1) {
        return "car";
    }
}

function replaceCallback($matches) {
    return getSnippet($matches[1]);
}

$string = preg_replace_callback(
    '#\[getSnippet\((\w+)\)\]#',
    'replaceCallback',
    $string
); 
```

请注意，我将您的`echo`in更改`getSnippet`为`return`.

在回调`$matches[1]`中将包含第一个捕获的组，在这种情况下是您的参数（现在允许多个字符）。当然，您也可以调整`getSnippet`函数以`id`从`$matches`数组中读取 ，而不是通过`replaceCallback`.

但是这里的这种方法稍微灵活一些，因为它允许您重定向到多个函数。举个例子，如果您将正则表达式更改为`#\[(getSnippet|otherFunction)\((\w+)\)\]#`then 您可以找到两个不同的函数，并且`replaceCallback`可以在其中找到函数的名称`$matches[1]`并使用参数调用该函数`$matches[2]`。像这样：

```
function getSnippet($id) {
   ...
}

function otherFunction($parameter) {
   ...
}

function replaceCallback($matches) {
    return $matches[1]($matches[2]);
}

$string = preg_replace_callback(
    '#\[(getSnippet|otherFunction)\((\w+)\)\]#',
    'replaceCallback',
    $string
); 
```

这真的取决于你想去哪里。重要的是，如果不使用 ，就无法处理替换中的任意参数`preg_replace_callback`。

# javascript - Kineticjs Dragend - 如何存储 getPosition() 的结果

> ID：13127926
> 
> 赞同：4
> 
> 时间：2012-10-29T18:56:49.157
> 
> 标签：javascript, kineticjs

我是 Kineticjs 的新手，并不是一个出色的 javascript 编码器，所以我希望能在这个例子中得到一些帮助。 [http://jsfiddle.net/pwM8M/](http://jsfiddle.net/pwM8M/)

我正在尝试将 x 轴存储在门上，因此当与门无关的重绘完成时，它们不会回到默认位置。（也有多种门窗）

每个表单元素可以有多个数量（多个门），所以我需要一种方法来存储/检索当前包含在 jsfiddle 上的警报中的数据。

我做了一些研究，但结果是空的。任何人都可以帮助我提供的东西吗？

```
 function OH(x,y,w,h) {
        var oh = new Kinetic.Text({
            x:x,
            y: y,
            width: w*scale,
            height: h*scale,
            stroke: wtc,
            strokeWidth: 1,
            fill: 'brown',
            fontSize: 6,
            fontFamily: 'Calibri',
            padding:4,
            text: w+' x '+h+' OH\n\n<- DRAG ->',
            align: 'center',
            textFill: 'white',
            draggable: true,
            dragConstraint:'horizontal',
            dragBounds: {
                left:xoffset, right: xoffset+width+length-(w*scale)
            }
        });
            oh.on('dragend', function(e) {
                alert(oh.getPosition().x);
            });
            window.south.add(oh);
    } 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-29T09:40:37.050

我在这里有固定大小的 40x40 矩形，我在其中使用拖动功能。尝试这个

```
 var box = new Kinetic.Rect({
                    x: parseFloat(area.size.x),
                    y: parseFloat(area.size.y),
                    width: 40, //parseFloat(area.size.width)
                    height: 40,
                    fill: area.color,
                    stroke: 'black',
                    strokeWidth: 1,
                    opacity: 0.6,
                    id : area.id + id,
                    draggable: true,
                    dragBoundFunc: function(pos) {
                        // x
                        var newX = pos.x < 0 ? 40 : pos.x;
                        var newX = newX > _self.canvasWidth - area.size.width ? _self.canvasWidth - area.size.width : newX;
                        // y
                        var newY = pos.y < 0 ? 40 : pos.y;
                        var newY = newY > _self.canvasHeight - area.size.height ? _self.canvasHeight - area.size.height : newY;

                        return {
                          x: newX,
                          y: newY
                        }; 
```

使用此功能

```
box.on('dragend', function() {
            _self.draw = false;
            _self.dragArea(area, box);
        }); 
```

并尝试使用 xy 坐标

```
dragArea: function(area, box){
        if(box){
            $$('#' + this.formId + ' [name="areas[' + area.id + '][size][x]"]').first().value = parseInt(box.attrs.x);
            $$('#' + this.formId + ' [name="areas[' + area.id + '][size][y]"]').first().value = parseInt(box.attrs.y);

            area.size.x = parseInt(box.attrs.x);
            area.size.y = parseInt(box.attrs.y);
        }
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:06:01.687

在函数之前创建一个新数组，如下所示：

```
 var xArray = new Array(); 
```

然后在你的函数里面

```
 oh.on('dragend', function(e) {
       alert(oh.getPosition().x);
       // ADD NEW ITEM TO ARRAY, STORE X POSITION
       xArray.push(oh.getPosition().x);
    }); 
```

所以所有的 x 值都存储在数组中。如果您需要清除数组，您可以简单地再次创建一个具有相同名称的新数组。如果需要，您可以使用循环遍历它。

更新：http: [//jsfiddle.net/pwM8M/2/](http://jsfiddle.net/pwM8M/2/)

# go - 在 go 的 while-equivalent 中分配和比较？

> ID：13127929
> 
> 赞同：22
> 
> 时间：2012-10-29T18:56:55.660
> 
> 标签：go

在 Go 中，您可以执行以下操作：

```
if foo := bar() ; foo != nil {
    ...
} 
```

在 C/C++ 中，您可以执行以下操作：

```
while ((foo = bar()) != NULL) {
    ...
} 
```

但是，Go 的语法似乎没有提供任何等效的方法来在 while 循环中进行分配和比较。Go 已替换为（例如，等效于）`while`的特定调用。简单地尝试使用版本语法会使解析器感到困惑，因为它预计会有第三条语句。`for``for a``for ; a ;``if`

我只能说：

```
for foo := bar() ; foo != nil ; foo = bar() {
    ....
} 
```

但在这种情况下，`bar()`调用相当长、复杂，而且不容易分解成自己的函数（虽然我可以做一些事情，比如声明一个本地`func`调用，但这仍然会降低代码的清晰度）。

现在我正在做：

```
for {
    foo := bar();
    if foo == nil { break; }
    ...
} 
```

但这似乎不干净，既因为它将循环条件与循环语句本身分开，又因为它依赖于`break`.

那么，在 Go 的 while 循环中是否有一种干净、惯用的方式来进行分配和比较？这是一个如此常见的用例，我无法想象没有办法做到这一点。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-29T19:27:30.787

不，Go 没有 while 语句，只有 for 语句的特殊形式——赋值是语句，而不是表达式。你的例子是恕我直言惯用的围棋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-19T21:18:49.473

您可以创建一个迭代器，类似于[bufio#Scanner.Scan](//golang.org/pkg/bufio#Scanner.Scan)：

```
package main

type bar struct { foo int }

func (b *bar) next() bool {
   b.foo++
   return b.foo < 10
}

func main() {
   var b bar
   for b.next() {
      println(b.foo)
   }
} 
```

然后在`Next`函数中，你可以把你需要的所有复杂的逻辑都放进去。

# php - 使用 AJAX 完成更新时自动刷新数据块

> ID：13127931
> 
> 赞同：0
> 
> 时间：2012-10-29T18:57:04.257
> 
> 标签：php, jquery, ajax, design-patterns

我只有一个页面，其中包含使用 AJAX 管理的不同部分。
在一个部分 (1) 中，我添加和编辑公司名称。
在下面的部分 (2) 中，我显示了这些公司名称。（请参阅附件）
当我在第 1 节中编辑了公司名称（已经编码）后，新的公司名称应在第 2 节中更新。

![在此处输入图像描述](../Images/2c4b995e2875f6e9ca58e8b8a041675b.png)

是否有任何 AJAX**模式或策略**来实现这一目标？我使用 jQuery 和 PHP...
THX.-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:06:54.260

模式是这样的，您传递一个使用返回结果的成功函数。：

```
$.post('your_update_company_url', function(data) {
    $('.company_name').text(data.company_name);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T18:21:25.957

我找到了一个使用我想分享的**发布者/订阅者设计模式的解决方案。**

我用一个例子来展示它，类似于我在这个问题中提出的问题：

1.- 通过 AJAX 更新数据：

```
$.post(window.location.href,
{
    action : 'update_product'
},
function(output) {
    if ( output.result === true ) {
        $.publish("/product/updated",
                {
                    new_name : output.new_name
                });
    }
}, 'json'); 
```

2.- 刷新页面另一部分的数据：

```
$.subscribe("/product/updated", function(e, data) {
    $("#product_name").html(data.new_name);
}); 
```

就这样。这种技术编码非常有趣，用户喜欢......

* * *

使用的工具：[jQuery Tiny Pub/Sub：一个非常非常非常小的 jQuery 发布/订阅实现。](https://gist.github.com/661855)
+信息：*Rebecca Murphey*在“[与 pubsub 插件的松散耦合](http://net.tutsplus.com/tutorials/javascript-ajax/loose-coupling-with-the-pubsub-plugin/)”中的精彩介绍

# regex - htaccess，使用正则表达式重定向：文件夹到变量

> ID：13127940
> 
> 赞同：2
> 
> 时间：2012-10-29T18:58:01.197
> 
> 标签：regex, .htaccess, variables, redirect, directory

我希望你能帮我解决我的小问题：

我有一个这样的网址：

```
www.blabla.com/images/q2uj89j2fq89hf943ghf74ßgq3789fg43/blue.jpg 
```

在“images”文件夹中，我有一个 PHP Skript，它应该获取字符串“images/”和以下“/”之间的所有内容作为 GET 变量。所以是这样的：

```
www.blabla/images/script.php?param=q2uj89j2fq89hf943ghf74ßgq3789fg43 
```

**目前我有以下 htaccess 文件：**

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule  ^(.*)$ script.php?param=$1 [QSA,L] 
```

但是有了这个，我得到了这样的东西：

```
www.blabla/images/script.php?param=q2uj89j2fq89hf943ghf74ßgq3789fg43/blue.jpg 
```

显然我只想得到一切，直到下一个/

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T19:27:15.543

`.`允许任何字符匹配并`$` **明确**表示您要一直匹配到字符串的末尾。

您可以使用否定字符类代替`.`并删除`$`. 否定字符类将匹配**除**斜杠以外的任何字符（`^`字符类否定的标记）：

```
RewriteRule  ^([^/]*) script.php?param=$1 [QSA,L] 
```

由于正则表达式重复默认是贪婪的，这将包含尽可能多的字符。这就是下一个斜线之前的一切。

# c# - 将相同的文件分组到一个目录中

> ID：13127941
> 
> 赞同：1
> 
> 时间：2012-10-29T18:58:02.443
> 
> 标签：c#, file, directory, equals, linq-group

我正在编写代码以使用该`hashCompute`方法对给定目录中的相同文件进行分组。我已经完成了大部分工作，但我似乎无法对我的文件进行分组。我希望将具有相同哈希值的文件组合在一起。

这是我的代码示例：

```
public static void myhashedfiles()
{
    string directory;
    Console.WriteLine("please enter a folder name:");
    directory = (Console.ReadLine());

    if (directory.Length < 1)
    {
        Console.WriteLine("enter a directory or folder name!");
        return;
    }

    DirectoryInfo dir = new DirectoryInfo(directory);
    try
    {
        FileInfo[] files = dir.GetFiles("*.*", System.IO.SearchOption.AllDirectories);

        HashAlgorithm hash = HashAlgorithm.Create();

        byte[] hashValue;

        foreach (FileInfo fInfo in files)
        {
            FileStream fileStream = fInfo.Open(FileMode.Open);
            fileStream.Position = 0;

            hashValue = hash.ComputeHash(fileStream);

            PrintByteArray(hashValue);
            Console.WriteLine(fInfo.Name);

            fileStream.Close();
        }
    }
    catch (DirectoryNotFoundException)
    {
        Console.WriteLine("Error: The directory specified could not be found.");
    }
    catch (IOException)
    {
        Console.WriteLine("Error: A file in the directory could not be accessed.");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T19:25:22.250

你可以这样做：

```
var groups = files
    .Select(file => new {
        fInfo = file,
        Hash = hash.ComputeHash(file.Open(FileMode.Open)) }
    ).GroupBy(item => item.Hash);

foreach (var grouping in groups)
{
    Console.WriteLine("Files with hash value: {0}", grouping.Key);
    foreach(var item in grouping)
        Console.WriteLine(item.fInfo);
} 
```

# java - 如何使 Ruby 程序与 Java 程序一起工作？

> ID：13127944
> 
> 赞同：2
> 
> 时间：2012-10-29T18:58:21.827
> 
> 标签：java, ruby-on-rails, ruby, jakarta-ee

这本身不是一个问题，而更像是我想知道的关于如何使 Ruby 程序与 Java 程序一起工作的列表。

事情是这样的：我们有两个团队。一个人在 Java 上工作并用 Java 实现他们的代码和模块。我们在 Ruby 中做同样的事情。我们应该有一组通用接口，并在我们的 Ruby 程序中使用他们的一些代码，他们将在他们的 Java 程序中使用我们的一些 Ruby 代码。

在连接这两个模块以提供一个通用模块时要记住哪些事项？我想这更像是一个指南或一套指南，而不是一个直接的答案。所以请耐心等待，不要报告或关闭这个问题。谢谢！

**更新：**

是的，我们将使用 RESTful 服务。我不想要任何形式的编码帮助。我想要的只是你的贡献，你可能会从用两种不同语言编写模块并将它们与一个通用接口互连的经验中获得。

这几乎就是我想知道的。虽然这确实是我的一个课堂项目，但我认为如果在某个地方有指导方针会更好，这样它也可以帮助其他人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T20:10:42.667

在您描述的情况下，我倾向于使用 JRuby，以便您的 Ruby 代码可以直接与 Java 互操作。您还可以使用 JSON 或其他方式让系统的 Ruby/Java 部分通过套接字进行通信，但这样做会带来性能成本*和*复杂性成本。（性能影响是否真的产生影响取决于 Ruby/Java 部分之间的接口有多“细粒度”——处理单个请求需要多少 Ruby-to-Java 或 Java-to-Ruby 调用。 )

在 JRuby 中，您可以加载 JAR 文件并使用其中定义的 (Java) 类，就好像它们是 Ruby 类一样。您也可以采用另一种方式——您可以在 Java 应用程序中像“库”一样使用 JRuby 来评估 Ruby 代码。

您可能应该 1) 用 Ja​​va 编写“主”应用程序，并将 Ruby 部分编写为主应用程序调用的“库”，或者 2) 用 Ruby 编写主应用程序，并将 Java 部分编写为库。如果你有从 Java 代码到 Ruby 以及从 Ruby 到 Java 的循环依赖，这将使你的代码库难以理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:25:06.557

这是一个大问题，所以我不打算具体说明这是如何完成的。我可以给你一个想法如何去做。假设您正在询问 Web 应用程序...

*   数据库端基于 Java 的 Web 应用程序
*   基于 Java 的 Web 应用程序实际上并没有客户端的“视图”。它不会生成常规的 css、html 视图。
*   相反，它基于 URL 创建 JSON 对象
*   Rails 使用 JSON 对象，就好像它是来自数据库的数据一样。它可以从中创建模型。
*   基本上，Rails 每次需要访问数据库时都会对基于 Java 的 Web 应用程序进行 API 调用。
*   最大的缺点是您不再可以使用 ActiveModel、ActiveRecords 等 Rails 附带的所有好东西
*   上行空间？对于复杂的数据库查询可能更快

这基本上是 Twitter 和 Amazon 等公司在说他们在后端使用 Java 而在前端使用 Rails 时所做的。但同样，这是一项巨大的努力，您肯定要考虑这样做的成本和收益。

# c# - 创建多个任务会创建相同数量的线程吗？

> ID：13127947
> 
> 赞同：2
> 
> 时间：2012-10-29T18:58:30.950
> 
> 标签：c#, task-parallel-library

当我创建这样的任务数组时：

```
 var taskArray = new Task<double>[]
            {
                Task.Factory.StartNew(() => new Random().NextDouble()),
                Task.Factory.StartNew(() => new Random().NextDouble()),
                Task.Factory.StartNew(() => new Random().NextDouble())
            }; 
```

这肯定会创建 3 个线程，还是由 CLR 来创建它认为合适的线程？

因此，如果我在 Web 请求中执行此操作，这意味着将创建至少 4 个线程来为请求提供正确的服务？（网络请求 + 每个任务 1）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-29T19:01:34.353

> 这肯定会创建 3 个线程，还是由 CLR 来创建它认为合适的线程？

后者。特别是，由于这些任务完成得如此之快，如果它们都在同一个线程上执行（尽管与调用的线程不同`StartNew`），我不会感到惊讶 - 特别是如果这是在一个“干净”的进程中并且线程池没有还没有启动许多线程。（IIRC，线程池仅每 0.5 秒启动一个新线程，这将为您的所有任务提供足够的时间在单个线程上执行。）

如果你真的想要，你可以使用你自己的自定义[`TaskScheduler`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.aspx)，但这会比较极端。

您应该阅读有关任务调度程序（包括默认的）[的 MSDN 文章以获取更多信息。](http://msdn.microsoft.com/en-us/library/dd997402.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:01:42.977

没有简单的答案。它取决于服务器上的可用资源。它将设置队列，如果服务器可以同时运行 3 个线程（它运行它），否则它将排队。

# linux - 如何遍历 Bash 中的所有 ASCII 字符？

> ID：13127950
> 
> 赞同：6
> 
> 时间：2012-10-29T18:58:55.920
> 
> 标签：linux, bash, ascii

我知道如何遍历字母：

```
for c in {a..z}; do ...; done 
```

但我不知道如何遍历所有 ASCII 字符。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T19:10:05.823

您可以做的是从 0 迭代到 127，然后将十进制值转换为其 ASCII 值（或返回）。

您可以使用[这些](http://mywiki.wooledge.org/BashFAQ/071)功能来做到这一点：

```
# POSIX
# chr() - converts decimal value to its ASCII character representation
# ord() - converts ASCII character to its decimal value

chr() {
  [ ${1} -lt 256 ] || return 1
  printf \\$(printf '%03o' $1)
}

# Another version doing the octal conversion with arithmetic
# faster as it avoids a subshell
chr () {
  [ ${1} -lt 256 ] || return 1
  printf \\$(($1/64*100+$1%64/8*10+$1%8))
}

# Another version using a temporary variable to avoid subshell.
# This one requires bash 3.1.
chr() {
  local tmp
  [ ${1} -lt 256 ] || return 1
  printf -v tmp '%03o' "$1"
  printf \\"$tmp"
}

ord() {
  LC_CTYPE=C printf '%d' "'$1"
}

# hex() - converts ASCII character to a hexadecimal value
# unhex() - converts a hexadecimal value to an ASCII character

hex() {
   LC_CTYPE=C printf '%x' "'$1"
}

unhex() {
   printf \\x"$1"
}

# examples:

chr $(ord A)    # -> A
ord $(chr 65)   # -> 65 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-29T22:32:08.220

`echo`仅使用s 八进制转义序列的可能性：

```
for n in {0..7}{0..7}{0..7}; do echo -ne "\\0$n"; done 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-21T17:38:51.770

这是我从 sampson-chen 和 mata 的答案中提取的单行代码：

```
for n in {0..127}; do awk '{ printf("%c", $0); }' <<< $n; done 
```

或者：

```
for n in {0..127}; do echo $n; done | awk '{ printf("%c", $0); }' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-29T19:09:56.417

以下是如何使用 打印整数作为其对应的 ascii 字符`awk`：

```
echo "65" | awk '{ printf("%c", $0); }' 
```

这将打印：

```
A 
```

以下是您可以通过这种方式遍历大写字母的方法：

```
# ascii for A starts at 65:
ascii=65
index=1
total=26
while [[ $total -ge $index ]]
do
    letter=$(echo "$ascii" | awk '{ printf("%c", $0); }')
    echo "The $index'th letter is $letter"

    # Increment the index counter as well as the ascii counter
    index=$((index+1))
    ascii=$((ascii+1))
done 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-29T19:32:24.727

嗯......如果你真的想要它们，并且你希望它像脚本一样，你可以这样做，我猜：

```
awk 'function utf32(i) {printf("%c%c%c%c",i%0x100,i/0x100%0x100,i/0x10000%0x100,i/0x1000000) } BEGIN{for(i=0;i<0x110000;i++){utf32(i);utf32(0xa)}}' | iconv --from-code=utf32 --to-code=utf8 | grep -a '[[:print:]]' 
```

但是这个列表非常庞大，而且不是很有用。awk 可能不是生成从 0 到 0x110000 的二进制整数的最优雅的方法 - 如果你找到它，可以替换一些更优雅的方法。

编辑：哦，我看到你只想要ascii。好吧，我会让这个答案留在这里，以防其他人真的想要所有 UTF 可打印字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-22T20:16:32.250

这取决于您所说的迭代。请注意，`NUL`不能分配或传递给命令。

这会生成所有 ascii 字符

```
seq 0 127 |\
 xargs printf '\\x%x ' |\
 xargs printf '%b ' 
```

*   `seq 0 127`生成 0 到 127 之间的所有整数
*   `xargs printf '\\x%x '`将其转换为十六进制，以空格分隔
*   `xargs printf '%b '`将十六进制转换为字节，以空格分隔

# reporting-services - SSRS 典型矩阵报告

> ID：13127951
> 
> 赞同：0
> 
> 时间：2012-10-29T18:58:56.867
> 
> 标签：reporting-services, matrix

我从我的客户那里得到了一个典型的矩阵报告要求。我需要你的建议/想法。

我有一个名为 Inventory 的表（参见图像“表”）

我需要 SSRS 报告中的以下格式

（参见图片“SSRS 报告” ![在此处输入图像描述](../Images/0bb224e456ba931b240384973894128b.png)） ![在此处输入图像描述](../Images/1809fd7bd554f7e3f24a5dd68722fbd8.png)

我试图通过仅将列与桶分组来使用矩阵报告来做到这一点，但它只显示了一行。未使用partyname、region、bill_to_country 分组。

请指教！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:30:13.643

尝试在行组中使用party_name、region、bill_to_country*和*bucket

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:38:00.790

我通过使用 SQL SERVER PIVOT 关系运算符解决了这个问题。

我没有在 SSRS 报告中进行分组，而是考虑从 SQL 查询中实现轮换逻辑（将行值转换为列名），它的工作原理就像魅力！

# sql - 如何在PostgreSQL中转置列和行（即如何切换行和列）？

> ID：13127953
> 
> 赞同：2
> 
> 时间：2012-10-29T18:59:14.280
> 
> 标签：sql, postgresql, pivot

> **可能重复：**
> [转置 sql 结果，使一列进入多列](https://stackoverflow.com/questions/8490478/transposing-an-sql-result-so-that-one-column-goes-onto-multiple-columns)

我想在我的 PSQL 数据库中进行一种行/列交换。这是我的示例数据库：

```
id  place   price   year
1   U.S.    80  2000
2   U.S.    60  2001
3   U.S.    40  2002    
4   U.K.    600 2000
5   U.K.    500 2001
6   U.K.    350 2002 
```

我想将该表转换为以下示例：

```
year    U.S.    U.K.
2000    80  600
2001    60  500
2002    40  350 
```

这在 PostgreSQL 中可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-29T19:06:28.157

您可以使用聚合函数和`CASE`语句轻松完成此操作：

```
select year,
  sum(case when place = 'U.S.' then price else 0 end) "U.S.",
  sum(case when place = 'U.K.' then price else 0 end) "U.K."
from yourtable
group by year 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/2066f/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:06:41.300

这被称为“枢轴”，postgres 中没有特殊的语法来支持它——你必须使用 SQL 对其进行编码，例如：

```
select
    year,
    us.price as us,
    uk.price as uk
from mytable us
left join mytable uk on us.year = uk.year 
```

# jquery-mobile - 如何设置在 jquerymobile 中作为禁用或只读？如何在 jquerymobile 中将选择标签设置为禁用或只读？http://jquerymobile.com/demos/1.0a4.1/docs/forms/forms-selects.html 查看此方法是否有助于禁用禁用选择。$('select').selectmenu('disable');

> ID：13127955
> 
> 赞同：0
> 
> 时间：2012-10-29T18:59:15.920
> 
> 标签：jquery-mobile

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:30:12.093

看看[这个](http://jquerymobile.com/demos/1.2.0/docs/forms/selects/methods.html)方法是否有帮助

> **disable**
> 禁用选择。
> `$('select').selectmenu('disable');`

# java - 跳转emacs中的java方法

> ID：13127959
> 
> 赞同：7
> 
> 时间：2012-10-29T18:59:54.080
> 
> 标签：java, emacs, navigation, keyboard-shortcuts, shortcuts

我想按方法跳过我的java 文件，例如当我找到我的任何地方时，执行单个键盘快捷键以跳转到方法的下一个结尾或方法的开头。

Emacs 使用 CMa 和 CMe 的“通过 defuns 移动”对 C 非常有用，并且完全符合我的要求。但显然在 Java 中，一个 defun 是一个完整的类。

通过 defuns 移动： [http ://www.gnu.org/software/emacs/manual/html_node/emacs/Moving-by-Defuns.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Moving-by-Defuns.html)

我发现我可以强迫 CMf 和 CMb 做我想做的事。它们在任何括号平衡的表达式上前后移动。问题是它们只有在从方法定义的左括号或右括号之外调用时才具有我正在寻找的功能，这是极其有限的。

带平衡括号的表达式：http: [//www.delorie.com/gnu/docs/emacs/emacs_282.html](http://www.delorie.com/gnu/docs/emacs/emacs_282.html)

欢迎任何想法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:57:42.763

[imenu](http://www.gnu.org/software/emacs/manual/html_node/emacs/Imenu.html)和[speedbar](http://www.gnu.org/software/emacs/manual/html_node/emacs/Speedbar.html)与您要查找的内容很接近。

否则你可以自己定义。你可以从这样的事情开始：

```
(defvar java-function-regexp
  (concat
   "^[ \t]*"                                   ; leading white space
   "\\(public\\|private\\|protected\\|"        ; some of these 8 keywords
   "abstract\\|final\\|static\\|"
   "synchronized\\|native"
   "\\|[ \t\n\r]\\)*"                          ; or whitespace
   "[a-zA-Z0-9_$]+"                            ; return type
   "[ \t\n\r]*[[]?[]]?"                        ; (could be array)
   "[ \t\n\r]+"                                ; whitespace
   "\\([a-zA-Z0-9_$]+\\)"                      ; the name we want!
   "[ \t\n\r]*"                                ; optional whitespace
   "("                                         ; open the param list
   "\\([ \t\n\r]*"                             ; optional whitespace
   "\\<[a-zA-Z0-9_$]+\\>"                      ; typename
   "[ \t\n\r]*[[]?[]]?"                        ; (could be array)
   "[ \t\n\r]+"                                ; whitespace
   "\\<[a-zA-Z0-9_$]+\\>"                      ; variable name
   "[ \t\n\r]*[[]?[]]?"                        ; (could be array)
   "[ \t\n\r]*,?\\)*"                          ; opt whitespace and comma
   "[ \t\n\r]*"                                ; optional whitespace
   ")"                                         ; end the param list
))

(defun my:next-java-method()
  (interactive)
  (re-search-forward java-function-regexp nil t)
)

(defun my:prev-java-method()
  (interactive)
  (re-search-backward java-function-regexp nil t)
) 
```

然后绑定`my:next-java-method`到`my:prev-java-method`你想去的任何键

# python - 西班牙语的 pyenchant

> ID：13127962
> 
> 赞同：4
> 
> 时间：2012-10-29T19:00:34.057
> 
> 标签：python, pyenchant

是否有西班牙语的 pyenchant 库。

我知道这可以帮助检查英语单词

```
enchant.Dict("en_US") 
```

但是你知道我可以使用西班牙语的任何图书馆吗

我正在使用 Python！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-28T01:07:10.170

## 这个答案适用于 OSX：

Enchant 可以用作 GNU Aspell 语言库的前端。您可以使用[homebrew使用](http://brew.sh)[GNU Aspell](http://aspell.net)安装其他语言。

```
brew remove aspell
brew install aspell --with-lang-es --with-lang-en 
```

您的 python 脚本现在可以访问`es`西班牙语了。其他语言可用，运行查看即可`brew info aspell`。

# c# - 编辑 machine.config 文件

> ID：13127963
> 
> 赞同：0
> 
> 时间：2012-10-29T19:00:36.387
> 
> 标签：c#, machine.config

我需要为机器上运行的所有应用程序集中一个库位置，因此我在 machine.config 文件中包含以下部分。根据评论，machine.config 应该只包含与其默认设置不同的设置。所以我删除了 machine.config 中的所有内容并将其包括在内：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="myAssembly" culture="neutral" publicKeyToken="fkjdkfjdfkdjfdkf"/>
        <codeBase version="1.2" href="file://C:/libs/myAssembly.dll"/>
     </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

当我将此部分包含在 app.config 文件中时，一切正常。但是当我将它移动到 machine.config 文件时，我在应用程序中收到以下错误 -

'...' 的类型初始值设定项引发了异常。这里可能是什么问题？这是编辑 machine.config 文件的正确方法吗？

# android - 活动堆栈未清除

> ID：13127964
> 
> 赞同：0
> 
> 时间：2012-10-29T19:00:40.453
> 
> 标签：android, xamarin.android

在我的应用程序中，当用户注销时，用户被发送到登录活动。但是当用户按下返回键时，用户被发送到主要活动。我怎样才能避免这种情况？

这是用户按下注销按钮时执行的代码。

```
button.Click += (sender, args) =>
                                {
                                    try
                                    {
                                        SetDriverStatues("Logoff");
                                    }
                                    catch
                                    {
                                        Android.Util.Log.Info("EXC_setdstat2", "set driver status failed");
                                        return;
                                    }
                                    session.logoutUser();
                                    var mact = new Intent(this, typeof(Activity1));
                                    mact.AddFlags(ActivityFlags.ClearTop);
                                    mact.SetFlags(ActivityFlags.NewTask);
                                    StartActivity(mact);
                                }; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-29T19:08:04.843

用于`finish()`关闭当前活动。

# android - 安卓字体更改

> ID：13127965
> 
> 赞同：2
> 
> 时间：2012-10-29T19:00:44.410
> 
> 标签：android, eclipse, fonts

我正在尝试创建一个 android 应用程序，只需按一下按钮即可更改字体。我在 Google 上搜索过 stackoverflow 和其他网站，但空手而归。我正在使用 Eclipse。目标是能够简单地触摸一个显示“times new roman”的按钮，然后将上面的文本更改为该字体。我发现有人试图更改 Eclipse 中的字体，或者只是他们应用程序的默认字体，但用户无法更改它。在找到一个改变背景颜色的应用程序后，我有了这个想法。有谁知道按钮需要什么代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:12:25.747

字体是您正在寻找的。

在按钮的*onclicklistener*中，尝试类似

```
TextView txt=(TextView)findViewById(...);
Typeface tf=Typeface.createFromAsset(...);
txt.setTypeface(tf); 
```

# javascript - js 函数在 aspx 中不起作用（表单验证）

> ID：13127973
> 
> 赞同：1
> 
> 时间：2012-10-29T19:00:59.570
> 
> 标签：javascript, html

我正在尝试在 aspx 页面中编写一个表单，包括提交按钮中的验证。即使我运行调试器单击提交也不会执行 Js 代码（或者可能存在语法问题，我不知道它是什么）。谁能帮我找出错误（脚本的语法或html中的东西）？非常感谢:) default.aspx 的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title>טופס הרשמה</title>
<link rel="Stylesheet" type="text/javascript" href="style.css" />
<script>
    var FinalMsg = "";
    function VerifyForm() {
        VerUser();
        VerPasses();
        VerGen();
        alert(FinalMsg);
    }        
    function VerUser(){
        var vus = document.getElementById("username").value;
        if(vus.length=0)
        {
            FinalMsg+="type username";
        }
    }
    function VerPasses(){
        var vpasfir = document.getElementById("pass1").value;
        var vpassec = document.getElementById("pass2").value;
        if(vpasfir.length=0)
        {
            FinalMsg+="type password";
        }
        if(vpassec.length=0)
        {
            FinalMsg+="type the secondary pass";
        }
        if (vpasfir.value != vpassec.value) 
        {
            FinalMsg+="passs aren't match";
        }
    }         
    function VerGen() {
        var vgen1 = document.getElementById("male").value;
        var vgen2 = document.getElementById("female").value;
        var vgen3 = document.getElementById("other").value;
        if ((vgen1.checked==false)&&(vgen2.checked==false)&&(vgen3.checked==false&&)){
            FinalMsg += "haven;t chosen gender";
        }
    }

</script>
</head>
<body dir="rtl">
<center>   <img src="Title.gif" width="500px"/></center> 
<form id="FormAboutYou" runat="server" method="post" onsubmit="validateForm()">
<table border="0">
    <tr>
        <td class="field">שם משתמש</td>
        <td><input type="text" name="username" id="username"/></td>
    </tr>
    <tr>
        <td class="field">סיסמה</td>
        <td><input type="password" name="pass1" id="pass1"/></td>
    </tr>
     <tr>
        <td class="field">סיסמה בשנית</td>
        <td><input type="password" name="pass2" id="pass2"/></td>
    </tr>
     <tr>
        <td class="field">כתובת דוא"ל</td>
        <td><input type="email" name="email" id="email"/></td>
    </tr>
    <tr>
        <td class="field">מזונות מועדפים</td>
        <td  Class="ChooseFrom">
            <input type="checkbox" name="food" value="Choclate" id="choc" /> שוקולד <br />
            <input type="checkbox" name="food" value="Fries" id="fries"/> צ'יפס <br />
            <input type="checkbox" name="food" value="Tomatoes and other vegetables" id="veg"/> ירקות ופירות <br />
            <input type="checkbox" name="food" value="Pasta" id="pasta"/> פסטה <br />
            <input type="checkbox" name="food" value="Cheese" id="che"/>גבינה <br />
        </td>
    </tr>
    <tr>
       <td class="field">מגדר</td>

       <td class="ChooseFrom">
            <input type="radio" name="gender" value="Male" id="male"/> זכר <br />
            <input type="radio" name="gender" value="Female" id="femle"/> נקבה <br />
            <input type="radio" name="gender" value="Unde" id="other"/> עדיין לא החלטתי/יש לי בעיה עם שדות בינארים <br />

        </td> 
    </tr>
    <tr>
        <td class="field">living in</td>
        <td>
            <select>
                <option value="TelAviv" id="ny">new york</option>
                <option value="PetaTikwa" id="rome">rome</option>
                <option value="QiryatOno" id="Paris">Paris</option>
                <option value="RamgatGan" id="lv">Las Vegas</option>
                <option value="Haifa" id="ln">London</option>
                <option value="Qraiot" id="bt">Bairut</option>
                <option value="Bash" id="bej">Beijing</option>
                <option value="Eilat" id="tk">Tokyo</option>
            </select>
        </td>
    </tr>
    <tr>
        <td>
            <input type="submit" name="submit" value="הזן נתוניך על פני המים" onsubmit="VerifyForm();"/>
        </td>
    </tr>
</table>
</form>
<hr />
<br /><br /><br /><br />  
<br /><br /><br /><br />
</body>
</html> 
```

再次感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:06:34.030

一个想法可能是`onsubmit()`从表单标签中取出。

然后为您的按钮更改`onSubmit`为`onclick='return verifyForm();`

在您的`verifyForm()`方法中，您需要返回`true`or `false`; 如果为 false，则表单不会提交。

所以，在你的 verifyForm() 结束时是这样的

```
if (FinalMsg == ""){
    return true;
  }else{
   return false;
 } 
```

# javascript - 在会话之间维护对客户端文件的引用

> ID：13127976
> 
> 赞同：0
> 
> 时间：2012-10-29T19:01:12.270
> 
> 标签：javascript, html, video, local-storage

我正在开发一个处理视频文件的网络应用程序——具体来说，我让用户通过表单输入“选择”他们的视频文件，然后我构建对该文件的 URL 引用，并将`<video>`源设置为该 URL。这使我可以处理用户提供的内容，而无需上传视频——这似乎是不必要的，并且会导致性能下降。

这是我现在非常简单的代码：

```
// within a change event for a file input
    var videoFile = e.currentTarget.files[0];
    var fileURL = URL.createObjectURL(videoFile);
    var videoNode.src = fileURL; 
```

这很好用。问题：它不允许我在用户会话之间存储对该视频的引用。我尝试将 fileURL 保存到 Mongo 文档中，然后重新加载该视频文件......虽然有时这有效，但它经常中断......没有明确的一致性。

有没有人有一个很好的解决方案来在用户会话之间存储对本地文件的引用？我必须使用 HTML5 Filesystem API 之类的东西吗？本地存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:59:55.063

我可能错过了你的意思，但听起来你只需要一块饼干。 [http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

您可以将所需的任何文件名保存在一个简单的 cookie 中，然后在他们下次访问该页面时，您可以回忆起他们想要的视频名称。

# mongodb - 安装后mongoctl在哪里？

> ID：13127977
> 
> 赞同：0
> 
> 时间：2012-10-29T19:01:16.803
> 
> 标签：mongodb, pip, mlab

我已经按照 Mongolab 的[简单说明](https://github.com/mongolab/mongoctl/blob/master/README.md#installation)安装了 mongoctl ，但是我无法对已安装的包[做任何事情](http://mongolab.org/#view=mongoctl)`which mongoctl`，因为什么也解决不了。

该站点使它看起来像是`pip`安装了某种命令行工具，但它似乎只是安装了 python 包，如果所有文档都没有被`mongoctl`视为命令行工具，那就没问题了。

这是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T19:54:36.163

您可以在安装命令中添加以下选项，以确保“mongoctl”exe 进入 /usr/local/bin

--install-option="--install-scripts=/usr/local/bin"

由于您的 Mac 上已经安装了 mongoctl，您可能需要添加 --upgrade 和 --force-reinstall

所以尝试以下

```
sudo pip install mongoctl --install-option="--install-scripts=/usr/local/bin" --upgrade --force-reinstall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:11:46.293

您使用的是什么操作系统？

'mongoctl' 应该在 /usr/local/bin 中。检查以确保该目录在您的 PATH 中

-将要

# c++ - If 语句 - 不正确的评估

> ID：13127979
> 
> 赞同：2
> 
> 时间：2012-10-29T19:01:36.163
> 
> 标签：c++, if-statement, evaluation

> **可能重复：**
> [我应该如何进行浮点比较？](https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison)

这是一段代码，我不知道它有什么问题。

if 语句正在错误地评估数字并转到“else”。

```
double m,k;

m = (y3-y1)/(x3-x1);
k = m*(-x1)+y1;

cout <<"\n\n"<< m <<"  "<< k << "\n";
cout <<"\n\n"<< ((-a)/b) <<"  "<< c/b << "\n";

if(m==((-a)/b) && k==c/b)
 {
  cout << "\nTaisne sakrīt ar kādu no trīsstūra malām!" << endl;
  goto beigas;
 }
  else
   cout << "\n\n WRONG \n\n"; 
```

用户输入值 x1,y1,x3,y3,a,b,c - 都是**double**。

它似乎只适用于“m”。奇怪的是，当我尝试以下操作时，if 语句在相同的值下为真：

```
if(m==((-a)/b) && k<c/b) 
```

这是解决整个问题的屏幕截图：

![http://i49.tinypic.com/307n88l.jpg](../Images/7fc4496eadb876103de7cacf7985bb6c.png)

代码在用户输入所有值后开始。

谢谢，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T19:07:42.033

当您想比较两个浮点时，请使用类似的阈值：

```
double m = a/b;

if (abs(m - (a/b)) < 0.0001)
{
    // execute code where m == a/b here
} 
```

所以基本上比较浮点/双减它们并确保结果小于某个阈值。

# grails - 在流范围内存储域类

> ID：13127989
> 
> 赞同：1
> 
> 时间：2012-10-29T19:02:20.157
> 
> 标签：grails, spring-webflow

在 Grails Web 流中，我将`List`以下对象中的一个存储在流范围内。

```
class ParsedBrochure implements Serializable {

    Brochure brochure
    transient MessageSource messageSource

    boolean hasVirtualOrderError = false
    boolean hasVirtualSubOrderError = false
    boolean hasStoreGroupsError = false
    boolean hasPdfError = false

    List<String> messages = []
} 
```

`Brochure`是一个`Serializable`域类，在将其存储到流范围之前进行验证。如果此验证产生如下错误：

```
parsedBrochure.brochure.hasErrors() == true 
```

当我从 GSP 中的流范围检索（反序列化）对象时，这些错误已经消失。因此，不知何故，在将对象存储到 web 流状态的流范围和从 GSP 的流范围中检索它之间，错误已经消失了。

我已经检查过所有内容都`Serializable`包括

*   `Brochure`本身
*   `Brochure.errors`
*   每个对象存储在`Brochure.errors.errors`

在这一点上，我完全没有想法......

# php - 我可以将 php 附加到一个类吗？

> ID：13127990
> 
> 赞同：0
> 
> 时间：2012-10-29T19:02:23.483
> 
> 标签：php, javascript, cookies

我的网站根据城市创建行程。我们将选择从一页带到下一页（使用 cookie）。我们希望根据上一页保存的 cookie 显示 php。例如，如果客户选择印度作为目的地，就会出现印度的信息。如果他们选择巴西，就会显示巴西的信息。

到目前为止，我有：

```
<select name="city">
<option class="level-0" value="india">India</option>
<option class="level-0" value="brazil">Brazil</option>
</select>

<script type="text/javascript">      
var city = getCookie("city");
document.getElementById("city_it").className = city.split(" ")[0];
</script> 
```

然后 div 给出一个所选城市的类，如下所示：

```
<div id="city_it" class="india"></div> 
```

如何将 php 附加到 div 的类？有没有更好的方法来根据客户选择填充信息？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:13:29.210

有多种方法可以做到这一点：

1.  PHP 可以通过 访问 cookie `$_COOKIE`，因此您可以根据所需 cookie 的值在应用程序端做出决定。
2.  使用 AJAX 请求传递调用 php 文件并让它返回您想要的内容。

比如一个带有 jquery 的例子：

```
$.get('processor.php?city=' + getCookie("city"), function(data) {
  $('.result').html(data);
}); 
```

最终，php 可以读取 DOM 元素的类的想法是不可能的，因为 PHP 在服务器上运行并且 DOM 树存在于浏览器中。您必须使用 Javascript、cookie 或会话来与 DOM 树进行交互或预测要在 DOM 树中进行哪些更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:15:16.697

当用户做出选择时，您将使用 javascript 将 AJAX 消息发送到服务器上的 PHP 脚本。AJAX 将包含一条消息，告诉服务器选择了哪个选项，PHP 脚本将返回一个响应，其中包含填充字段所需的所有信息。然后，javascript 会接受该响应，并使用它来修改 UI，并根据需要填充字段。

您将希望使用 JSON 之类的东西在页面上的 javascript 和服务器上的 PHP 脚本之间来回传输数据。

# java - 具有 3 列（int、String、String）的 Java 2D 列表

> ID：13127992
> 
> 赞同：2
> 
> 时间：2012-10-29T19:02:53.383
> 
> 标签：java, list, 2d

我是 Java 新手。我想知道用不同类型的数据存储二维数组的最佳选择是什么。

它将是一个国家表，每个国家都有资本并且在大陆。然后我必须以这种方式存储它：ContinentID | 国名 | 首都

选择什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T19:05:32.493

您可能需要考虑创建一个`Country`类来保存这些数据，然后维护一个此类实例的列表/数组。

```
public class Country {
    private int continentId;
    private String name;
    private String capital;

    public Country(int continentId, String name, String capital) {
        this.continentId = continentId;
        this.name = name;
        this.capital = capital;
    }

    // ...
} 
```

然后你会有一些类似的东西

```
List<Country> countries = new ArrayList<Country>();
countries.add(new Country(123, "USA", "Washington DC"));
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:07:41.650

创建一个具有所需属性的国家类，然后创建一个列表，将其键入为国家：

```
 list<Country> clist = new ArrayList<Country>(); 
```

或您想要的任何列表。现在只需将国家/地区对象存储在列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T19:08:35.737

如果大陆 id 只是一个序列并且没有添加任何特定含义，您可能需要考虑将`HashMap`键作为国家名称，将值作为大写字母。如果顺序很重要，请考虑使用`LinkedHashMap`.

如果大陆 id 确实具有意义，那么您可能需要考虑将所有变量移动到一个类中，例如`Country`并将其保存在一个列表中。如果您计划按 country name 而不是检索`iterate`，您可能需要考虑将对象存储在 Hashmap 中，并将 key 作为您的 country name 或大写字母或任何适合您需要的内容。使用 HashMap 而不是列表的原因是，与对 HashMap 的恒定时间访问相比，对 List 的成员资格检查提供了线性性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T19:09:28.883

`HashMap<Integer, HashMap<String, String>>();`

# python - 使用 trait 选项或 traitui.editor 工厂选项？

> ID：13127994
> 
> 赞同：1
> 
> 时间：2012-10-29T19:03:05.457
> 
> 标签：python, traits, traitsui

当 Trait 的选项在特征定义和该特征的 traitsui.DefaultEditor 中都可用时，建议使用哪个选项以及为什么？

例如 File trait 有一个过滤器的选项，它也可以在 traitsui.FileEditor() 中定义

# android - 自定义 ListView 上的 OnItemClick 问题

> ID：13127995
> 
> 赞同：0
> 
> 时间：2012-10-29T19:03:07.617
> 
> 标签：android, listview, android-arrayadapter, onitemclicklistener

我正在为我的自定义对象使用带有自定义 ArrayAdapter 的自定义 ListView。我用来自 xml 文件的解析数据填充我的 ListView。我可以用这些数据填充 ListView，但我想根据单击的项目切换到不同的活动。我可以展示

> 位置

单击了哪个项目，但我如何检索例如单击按钮的名称？

我的代码：

```
 /**
     * Setup
     * */ 
    @SuppressWarnings("unchecked")
    private void setup() throws IOException {

        device_array = new ArrayList<Device>();

        //-----------------ACTIONBAR------------------------------------
        //activates the default ActionBar
        ActionBar actionBar = getActionBar();
        actionBar.show();
        // set the app icon as an action to go home
        actionBar.setDisplayHomeAsUpEnabled(true);       

        //-------------------INTENT--------------------------------------
        //get data from Intent
        Intent intent = getIntent();
        Name = intent.getStringExtra("Projectname");
        IP = intent.getStringExtra("RouterIP");
        URL = intent.getStringExtra("URL");
        Port = intent.getStringExtra("Port");

        //-------------------TEXTVIEWS+LISTVIEW---------------------------------------
        nameproject = (TextView)findViewById(R.id.nameproject);
        nameproject.setText("Projektname: "+Name);
        routerip = (TextView)findViewById(R.id.routerip);
        routerip.setText("KNX/IP-Router-Adresse: "+IP);
        port = (TextView)findViewById(R.id.port);
        port.setText(":"+Port);
        url = (TextView)findViewById(R.id.url);
        url.setText("URL: "+URL);

        //Fill ListView
        display_listview();

        devices = (ListView)findViewById(R.id.deviceList);
        adapter = new DeviceAdapter(this, 
                R.layout.listviewitem_device, device_array);

        //add a view which is shown if the ListView is empty
        devices.setEmptyView(findViewById(R.id.empty_list_view));

        //Click on item in listview
        devices.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                      int position, long id) {

                Intent i = new Intent(ProjectView.this, OnOff.class);    
                i.putExtra("Uniqid","From_ProjectView_Activity");
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                startActivity(i);
            }   
        });
        devices.setAdapter(adapter); 

        //-------------------- READ ARRAYLIST-------------------------------
    }

 /**
     * Insert Controls
     * */ 
    @SuppressWarnings("unchecked")
    private void display_listview() {

        //------------------ READ ARRAYLIST--------------------------------
        //read ArrayList which is saved local
        //change path to non-root folder
        String filePath = context.getFilesDir().getPath().toString()+"/"+Name;
        Log.d("FilestreamfromFolder", "Filepath:"+filePath+ " Projektname:"+Name);
        File f = new File(filePath);
        try
        {
            FileInputStream fileIn = new FileInputStream(f);
            ObjectInputStream in = new ObjectInputStream(fileIn);
            XML = (ArrayList<Datapoint>) in.readObject();
            Log.d("XML",XML.toString());
            in.close();
            fileIn.close();
        } catch(IOException ioe)
        {
            ioe.printStackTrace();
            return;
        } catch(ClassNotFoundException c)
        {
            Log.d("FILESTREAM", ".Datapoint class not found.");
            c.printStackTrace();
            return;
        }

      //------------------ FILL DEVICE ARRAY FROM XML--------------------------------
        for (int i=0; i<XML.size(); i++) {  
            if (XML.get(i).getDptID().contains(ValueTemp)) {
                Datapoint d = XML.get(i);       
                device_array.add(new Device(d.getName().toString(), R.drawable.temperature_5));  
                Log.d("Temperature", d.getName().toString()+" added");
            }
        }
        for (int i=0; i<XML.size(); i++) {  
            if (XML.get(i).getDptID().contains(ValueLux)) {
                Datapoint d = XML.get(i);               
                device_array.add(new Device(d.getName().toString(), R.drawable.brightness));
                Log.d("Brightness", d.getName().toString()+" added");
            }
        }   
        for (int i=0; i<XML.size(); i++) {  
            if (XML.get(i).getDptID().contains(PercentScaling)) {
                Datapoint d = XML.get(i);           
                device_array.add(new Device(d.getName().toString(), R.drawable.lamp));
                Log.d("Dimmer", d.getName().toString()+" added");
            }
        }
        for (int i=0; i<XML.size(); i++) {
            //check XML file for datapoint 1.001 which demontrates a on/off switch
            if (XML.get(i).getDptID().contains(OnOff)) {
                Datapoint d = XML.get(i); 
                device_array.add(new Device(d.getName().toString(), R.drawable.lamp_switch)); 
                Log.d("OnOFF", d.getName().toString()+" added");
            }
        }
    } 
```

我的数据点类：

```
package XMLParser;

import java.io.Serializable;

public class Datapoint implements Serializable{

/**
* 
*/
private static final long serialVersionUID = 4917183601569112207L;

private String stateBased;
  private String name;
  private String priority;
  private String mainNumber;
  private String groupadress;
  private String dptID;

  public Datapoint(){
  }

  public String getMainNumber() {
    return mainNumber;
  }

  public void setMainNumber(String mainNumber) {
    this.mainNumber = mainNumber;
  }

  public String getName() {
    return name;
  }

  public void setName(String name) {
    this.name = name;
  }

  public String getStateBased() {
    return stateBased;
  }

  public void setStateBased(String stateBased) {
    this.stateBased = stateBased;
  }

  public String getPriority() {
    return priority;
  }

  public void setPriority(String priority) {
    this.priority = priority;
  }

  public String getGroupadress() {
    return groupadress;
  }

  public void setGroupadress(String group) {
    this.groupadress = convert_groupadress(group);
  }

  public String getDptID() {
    return dptID;
  }

  public void setDptID(String dptID) {
    this.dptID = dptID;
  }

  @Override
  public String toString() {
    return "[[" + this.stateBased + "] ["+ this.name + "] [" + this.mainNumber + "]" + " [" + this.dptID
        + "] [" + this.priority + "] [" + this.groupadress + " ]]";
  }

  public String convert_groupadress(String groupadress) {
    String groupaddress ="";
    int grpadr = Integer.parseInt(groupadress); 
    int first = grpadr / 2048;
    int first_res = grpadr-(first*2048);

    int second = first_res / 256;
    int second_res = first_res-(second*256);

    int third = second_res / 1; 
    //int third_res = second_res-(third*32);

    groupaddress = Integer.toString(first) +"/"+ Integer.toString(second) + "/"+ Integer.toString(third);

    return groupaddress;
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:14:15.217

在您的适配器上调用该`getItem(int position)`方法将获得该`DataPoint`位置，因此将您的`onItemClick`方法更改为：

```
@Override
public void onItemClick(AdapterView<?> parent, View view,
                      int position, long id) {

    DataPoint point = (DataPoint) parent.getAdapter().getItem(position);
    String pointName = point.getName();
    // TODO: Launch an activity with that name or something.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:23:15.183

我是这样解决的：

```
//Click on item in listview
        devices.setOnItemClickListener(new OnItemClickListener(){
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                      int position, long id) {

                if(device_array.get(position).getResImage()==R.drawable.brightness){
                    Intent i0 = new Intent(ProjectView.this, Brightness.class);    
                    i0.putExtra("Uniqid","From_ProjectView_Activity");
                    i0.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(i0);
                }

                if(device_array.get(position).getResImage()==R.drawable.temperature_5){
                    Intent i0 = new Intent(ProjectView.this, Temperature.class);    
                    i0.putExtra("Uniqid","From_ProjectView_Activity");
                    i0.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(i0);
                }

                if(device_array.get(position).getResImage()==R.drawable.lamp){
                    Intent i0 = new Intent(ProjectView.this, Dimmer.class);    
                    i0.putExtra("Uniqid","From_ProjectView_Activity");
                    i0.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(i0);
                }

                if(device_array.get(position).getResImage()==R.drawable.lamp_switch){
                    Intent i0 = new Intent(ProjectView.this, OnOff.class);    
                    i0.putExtra("Uniqid","From_ProjectView_Activity");
                    i0.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(i0);
                }
            }   
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-03T10:30:42.363

使用**视图**，您正在使用在列表视图中膨胀数据。因为我使用的是文本视图。

**这是我用的，**

```
TextView tv = (TextView) v.findViewById(R.id.contacts_name);
String savedname = tv.getText().toString(); 
```

这里 v 是我们在方法中得到的参数

```
public void onItemClick(AdapterView<?> arg0, View v, int position, long arg3)
{ // do something
} 
```

# php - 我如何在mysql中放置一个数组？

> ID：13127997
> 
> 赞同：1
> 
> 时间：2012-10-29T19:03:23.250
> 
> 标签：php, mysql, arrays, session

如何将会话数组放入 mysql 行？

使用时的会话数组输出`print_r($_SESSION['producten'])`：

```
Array
(
    [producten] => Array
        (

            [0] => Array
                (
                    [product_id] => 3
                    [aantal] => 2
                )

            [1] => Array
                (
                    [product_id] => 2
                    [aantal] => 1
                )

        )
) 
```

mysql：

```
$order_ins = "INSERT INTO orders_products (order_id,product_id,product_amount) VALUES
('".$_SESSION['order_id']."', '".$_SESSION['product_id']."','".$_SESSION['aantal']."' )";

mysql_query($order_ins) or die("Ehh..error!?" . mysql_error()); 
```

我想要的是“product_id”和“aantal”（意思是荷兰语的数量）将被插入到 mysql 行中。之后可以使用“order_id”过滤产品和金额

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T19:20:36.003

可以将会话信息存储在数据库中。我写了一个这样做的类。

看这里：

[sessionwrapper.php](http://pastebin.com/8rTmf3f2)

我在 PDO 周围使用了一个小包装器：

[数据库助手.php](http://pastebin.com/cdRWb2cH)

它非常易于使用：

代替：

```
session_start(); 
```

做：

```
require_once("sessionwrapper.php");

SessionWrapper::startGlobalSession(); 
```

表的 DDL：

```
CREATE TABLE user_session (
    session_id VARCHAR(64) PRIMARY KEY,
    last_request_time INTEGER,
    session_data TEXT
); 
```

它会自动跟踪您提供的 PDO 数据库连接中的会话信息。你不需要做任何不同的事情。只需将您的`$_SESSION`变量设置为正常即可。

```
if (isset($_SESSION['user_id']))
{
    echo "You are already logged in. <br />\n";
}
else
{
    printLoginForm();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T19:30:26.290

使用 PDO 和参数化语句要容易得多。没有 SQL 注入的风险，没有令人困惑的字符串连接，也不必担心您是否正确地转义了引号字符。

```
<?php

$sql = "INSERT INTO orders_products (order_id, product_id, product_amount)
        VALUES (:order_id, :product_id, :product_amount)";
$stmt = $pdo->prepare($sql);
$data = array("order_id" => $_SESSION["order_id"]);
foreach ((array) $_SESSION["producten"] as $order) {
    $data["product_id"]     = $order["product_id"];
    $data["product_amount"] = $order["aantal"];
    $stmt->execute($data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T19:15:01.410

这应该可行，但是要注意 SQL 注入的风险。

```
$sql = "INSERT INTO orders_products (order_id, product_id, product_amount) VALUES ";

$i = 1;

foreach($_SESSION[producten] as $innerArray) {
    $sql .= '(' . $_SESSION[order_id] . ', ' . $innerArray[product_id] . ', ' . $innerArray[aantal] . ')';

    if($i < count($_SESSION[producten])) $sql .= ', ';

    $i++;
}

mysql_query($sql) or die("Ehh..error!?" . mysql_error()); 
```

**结果**

的值`$sql`将是：

```
插入到 orders_products (order_id, product_id, product_amount) 值 (#, 3, 2), (#, 2, 1)
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T19:15:34.543

如果你先序列化它，你可以存储数组。这样，它将成为您可以保存的字符串。

对于搜索和统计，将购物车中的每个产品存储在表中自己的行中可能是有意义的。但要小心选择表中唯一的 id 列（如果有的话）。例如，购物车能否在购物车中有两次相同的产品（相同的 T 恤，一件红色，一件绿色）。