# StackOverflow 问答 14891000-14891999

# html - Twitter bootstrap：input-append中只有图标的按钮溢出输入

> ID：14891008
> 
> 赞同：0
> 
> 时间：2013-02-15T08:52:52.857
> 
> 标签：html, css, twitter-bootstrap

我无法清楚地弥补标题（请随意编辑）。

所以，我附上了一张图片来显示这个问题。

看到与`Google button`在同一水平`input`但`search button`正在溢出。

![看到搜索按钮溢出](../Images/0a2cbbfa589c2b0689301538ccaef251.png)

仅当我放置在`icon-search`里面时才会发生错误`button`。如果我用文本替换图标，它可以解决问题。当我将其更改为 时，它与它有关`font-size : 17.5px` ，它可以工作。我可以破解它，但我想要一个有效的方法。`.btn-large``font-size:16.5px`

[演示](http://jsfiddle.net/chne9/)

**标记：**

* * *

```
<form class="input-prepend input-append">
    <div class="btn-group"> <span class="btn btn-large dropdown-toggle" data-toggle="dropdown">Google <span class="caret"></span></span>
        <ul
        class="dropdown-menu">
            <li><a href="#">a</a>
            </li>
            <li><a href="#">b</a>
            </li>
            </ul>
    </div>
    <input type="text" class="input-xlarge" placeholder="Search">
    <button class="btn btn-large" type="submit"> <span class="icon icon-search"></span>

    </button>
</form> 
```

**CSS**

* * *

```
form .input-xlarge {
    padding: 11px 19px;
    /* equal to btn-large */
} 
```

**编辑：**

*遇到问题，*

Chrome 版本 24.0.1312.57 Firefox 18.0.1 Opera 12.14（全部在 Ubuntu 12.04 中运行）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T08:55:45.453

引导图标更常与`<i>`标签一起使用。

```
<i class="icon-search"></i> 
```

然而，我并不是说这会解决问题。这可能是特定于浏览器的问题。我知道我在使用 IE 时遇到了问题`input-append`，但这不是特定于浏览器的样式表无法解决的问题。

```
.input-append { height:19px; }
.input-append i { margin:0; padding:0; } 
```

编辑：这在 Chrome 上似乎不是问题。至少对于Bootstrap 站点上[给出的示例来说不是。](http://twitter.github.com/bootstrap/base-css.html#forms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T08:58:52.883

[http://jsfiddle.net/chne9/1/](http://jsfiddle.net/chne9/1/)

```
.btn-large [class^="icon-"], .btn-large [class*=" icon-"] {
    vertical-align:top;    
} 
```

默认情况下，这设置为`text-top`- 尝试设置`top`（编辑选择器以仅适合有问题的按钮 - 只是为了确保您不会破坏任何其他引导功能）。

# ruby-on-rails - Ruby on Rails 自定义 link_to

> ID：14891012
> 
> 赞同：0
> 
> 时间：2013-02-15T08:53:04.093
> 
> 标签：ruby-on-rails, link-to

我有一个帖子列表，点击它时应该显示`url`为`posts/this+is+the+title`. 这样做之后，我将如何在控制器中捕获它以从数据库中获取数据？

```
 <% @posts.each do |fq| %>
     <%= link_to fq.title,fq%>
     <p><%= fq.content %></p>
     <hr />
     <% end %> 
```

假设标题是 id =3 的“Ruby on Rails” 上面的代码会生成一个类似 'localhost:3000/posts/3' 的 url。但我希望链接是**'localhost:3000/posts/ruby+on+rails'**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:40:03.320

您正在寻找包含一些文本而不是 rails 生成的 id 的漂亮 url。然后你必须查看[friendly_id gem](https://github.com/norman/friendly_id)。有你会感兴趣的好[屏幕演员。](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

# c# - TransformManyBlock，是否需要显式处理返回空的 IEnumerable，以免它们保留在内存中？

> ID：14891023
> 
> 赞同：1
> 
> 时间：2013-02-15T08:53:45.617
> 
> 标签：c#, task-parallel-library, tpl-dataflow

我实现了一个，我想知道当我在块中`TransformManyBlock<Tin,Tout>`返回一个空时，该空会保留在系统中的任何位置，还是会被垃圾收集或丢弃？显然，如果我改用 a ，我需要自己处理这种情况，但我想知道这是否已经由.`IEnumerable``IEnumerable``IEnumerable``TransformBlock``TransformManyBlock`

我想我想知道的是 TPL 是否会为我处理那个空的 IEnumerable 的处理，或者我是否需要自己处理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:51:26.990

`IEnumerable<T>`没有实现`IDisposable`，并且大多数（如果不是全部）标准实现`IEnumerable<T>`也没有实现`IDisposable`。因此，如果您实际上返回需要处置的集合的实例，TPL 不会为您处置它。
但是，如果你想返回一个空的可枚举，这真的不应该是这样，因为在这种情况下你可以只返回`Enumerable.Empty<T>()`or `new T[0]`。

实际上，我认为您混淆了“处置”和“垃圾收集”。
一旦没有更多指向它的引用，空的可枚举将可用于垃圾收集。

因此，总结一下：您不必担心这一点，除非您想返回一个非常奇特的可枚举实现。

# jquery - jQuery 动态 css 变化

> ID：14891024
> 
> 赞同：1
> 
> 时间：2013-02-15T08:53:48.207
> 
> 标签：jquery, dynamic

为什么 jquery 在 Opera 和 Chrome 中不起作用？

```
 <script language="JavaScript">
     $('link[href="includes/styles.css"]').attr("href", "includes/new_styles.css");
     $('link[href="includes/jmesa/jmesa.css"]').attr("href", "includes/jmesa/new_jmesa.css");   
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:06:00.647

试试这个`doc ready`：http: [//jsfiddle.net/YRC4N/](http://jsfiddle.net/YRC4N/)

```
$(function(){
   $('link[href$="styles.css"]').attr("href", "includes/new_styles.css");
   $('link[href$="jmesa.css"]').attr("href", "includes/jmesa/new_jmesa.css");

   $('link').each(function () {
      console.log($(this).attr('href'));
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:01:28.933

尝试：

```
<script language="JavaScript">
 $('link[href*="includes/styles.css"]').attr("href", "includes/new_styles.css");
 $('link[href*="includes/jmesa/jmesa.css"]').attr("href", "includes/jmesa/new_jmesa.css");   
 </script> 
```

# android - 从列表视图中获取点击的项目

> ID：14891026
> 
> 赞同：11
> 
> 时间：2013-02-15T08:53:50.377
> 
> 标签：android, android-listview

我有问题。在修改我的 XML 文件之前，我的列表视图能够完美地工作。但是现在，在对 xml 进行一些修改后，它无法正常工作。我的列表视图是自定义的。所以，我创建了单独的 xml 来呈现列表视图中的每一行。

我的单**row.xml**代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:id="@+id/relativeLayoutSingleRowManageAddictions"
    android:layout_height="40dp"
    android:background="@drawable/box_midbg" >

    <TextView
        android:id="@+id/textViewSingleRowManageAddictions"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="17dp"
        android:text="TextView"
        android:textSize="20dp"
        android:textColor="#ffffff" />

    <ImageView
        android:id="@+id/imageViewSingleRowManageAddictions"
        android:layout_width="20dp"
        android:layout_height="20dp"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="18dp"
        android:src="@drawable/listing_arrow" />

</RelativeLayout> 
```

我的listview 所在的**main.xml代码：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/main_bg_edited" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        style="@style/top_bar_style" >

        <ImageView
            android:id="@+id/imageViewMAnageAddictionsBack"
            android:layout_width="30dp"
            android:layout_height="30dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:src="@drawable/back_arrow"
            android:clickable="true" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            style="@style/header_style"
            android:text="Manage Addictions" />

        <ImageView
            android:id="@+id/imageViewManageAddictionsAdd"
            android:layout_width="25dp"
            android:layout_height="20dp"
            android:layout_marginRight="3dp"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:src="@drawable/plus_nav"
            android:clickable="true" />

    </RelativeLayout>

    <ListView
        android:id="@+id/listViewManageAddictions"
        android:layout_width="290dp"
        android:layout_height="fill_parent"
        android:layout_below="@+id/relativeLayout1"
        android:layout_centerHorizontal="true"
        android:layout_centerInParent="true"
        android:layout_marginTop="12dp"
        android:divider="@android:color/transparent"
        android:dividerHeight="2dp" />

</RelativeLayout> 
```

还有我的java代码：

```
package com.addictioncounterapp;

import java.util.ArrayList;

import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

public class ManageAddictionList extends Activity {
  ImageView iv_manage_addictions_back, iv_manage_addictions_add;
  ListView listview;
  ArrayList < String > arraylist_manage_addiction;
  ArrayAdapter < String > arrayadapter_manage_addiction;
  SQLiteDatabase database;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_manage_addiction_list);

    loaddatabase();

    iv_manage_addictions_back = (ImageView) findViewById(R.id.imageViewMAnageAddictionsBack);
    iv_manage_addictions_back.setClickable(true);
    iv_manage_addictions_back.setOnClickListener(new OnClickListener() {@Override
      public void onClick(View v) {
        startActivity(new Intent(ManageAddictionList.this, Settings.class));
      }
    });

    iv_manage_addictions_add = (ImageView) findViewById(R.id.imageViewManageAddictionsAdd);
    iv_manage_addictions_add.setClickable(true);
    iv_manage_addictions_add.setOnClickListener(new OnClickListener() {@Override
      public void onClick(View v) {
        Intent intent = new Intent(ManageAddictionList.this, MainActivity.class);
        intent.putExtra("name", "");
        intent.putExtra("unit", "");
        intent.putExtra("attribute", "");
        intent.putExtra("limit", "");
        intent.putExtra("operation", "Add Addiction");
        startActivity(intent);
      }
    });

    arraylist_manage_addiction = new ArrayList < String > ();
    manageList();
    listview = (ListView) findViewById(R.id.listViewManageAddictions);

    if (arraylist_manage_addiction.isEmpty()) Toast.makeText(getBaseContext(), "No Addictions found to manage. Click on 'add' button to create new Addiction.", Toast.LENGTH_SHORT)
      .show();
    else listview.setAdapter(arrayadapter_manage_addiction);

    listview.setOnItemClickListener(new OnItemClickListener() {@Override
      public void onItemClick(AdapterView <? > arg0, View arg1, int arg2, long arg3) {
        String name = null, attribute = null, unit = null, limit = null;

        View parentView = (View) arg0.getParent();
        name = ((TextView) parentView.findViewById(R.id.textViewSingleRowManageAddictions))
          .getText() + "";

        Toast.makeText(getBaseContext(), name, Toast.LENGTH_SHORT)
          .show();

        int cat_id = 0;

        //--------Fetching cat_id through name from the list--------

        Cursor cursor;

        cursor = database.query("category", new String[] {
          "cat_id"
        }, new String("cat_name=?"), new String[] {
          name
        }, null, null, null);

        if (cursor.getCount() > 0) {
          while (cursor.moveToNext())
          cat_id = cursor.getInt(0);
          cursor.close();
        }

        //--------Fetching unit, attribute, limit through cat_id from the list--------

        cursor = database.query("category_attribute", new String[] {
          "cat_attribute_name", "cat_attribute_unit", "cat_limit"
        }, new String("cat_id=?"), new String[] {
          cat_id + ""
        }, null, null, null);

        if (cursor.getCount() > 0) {
          while (cursor.moveToNext()) {
            attribute = cursor.getString(0);
            unit = cursor.getString(1);
            limit = cursor.getString(2);
          }
          cursor.close();
        }

        Intent intent = new Intent(ManageAddictionList.this, MainActivity.class);
        intent.putExtra("name", name);
        intent.putExtra("unit", unit);
        intent.putExtra("attribute", attribute);
        intent.putExtra("limit", limit);
        intent.putExtra("cat_id", cat_id);
        intent.putExtra("operation", "Edit Addiction");
        startActivity(intent);
      }
    });
  }

  private void loaddatabase() {
    database = openOrCreateDatabase("AddictionCounter.db", SQLiteDatabase.OPEN_READONLY, null);
  }

  private void manageList() {
    String[] columns = {
      "cat_name"
    };
    Cursor cursor;

    cursor = database.query("category", columns, null, null, null, null, null);

    if (cursor.getCount() > 0) {
      while (cursor.moveToNext())
      arraylist_manage_addiction.add(cursor.getString(0));
      cursor.close();
    }

    arrayadapter_manage_addiction = new ArrayAdapter < String > (this, R.layout.single_row_manage_addictions, R.id.textViewSingleRowManageAddictions, arraylist_manage_addiction);
  }
} 
```

这背后的主要错误是，当我使用这个获得名称时：

```
View parentView = (View) arg0.getParent();
name = ((TextView) parentView.findViewById(R.id.textViewSingleRowManageAddictions)).getText()+""; 
```

任何记录的列表视图，它只给出第一条记录的名称。例如，如果我的第一行有名为“Gaming”的文本视图，当我单击任何行时，（出于调试目的，我使用`Toast.makeText(...))`它**Toasts** “Gaming”作为列表视图中每条记录的名称，尽管列表视图中的每条记录都是独一无二。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-02-15T09:04:59.780

```
lv.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

        // selected item
        String selected = ((TextView) view.findViewById(R.id.your_textView_item_id)).getText().toString();

        Toast toast = Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT);
        toast.show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-09T10:24:05.937

```
listView = (ListView)view.findViewById(R.id.list);
listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        String selected = ((TextView) view.findViewById(R.id.complaint)).getText().toString();
        Toast.makeText(context,selected,Toast.LENGTH_LONG).show();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T09:00:42.110

如果您只想要`onClickListener`，`TextView`最好`onClickListener`在适配器本身中定义。像

```
yourTextView.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        // showToast()
      }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-24T04:30:51.187

除了上述解决方案之外，这对我有用，我遇到了类似的情况，在添加以下内容后我能够解决它

> `android:descendantFocusability="blocksDescendants"`

到我的 xml 列表视图。它现在正在工作。对于真正好奇的用户，这里有更多关于 [http://developer.android.com/reference/android/R.attr.html#descendantFocusability的信息](http://developer.android.com/reference/android/R.attr.html#descendantFocusability)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-30T08:23:01.297

因为我没有足够的声誉来发表评论在这里我正在评论您对SKK答案的问题只需将if语句添加到您并执行不同的操作...

```
lv.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

    // selected item
    String selected = ((TextView) view.findViewById(R.id.your_textView_item_id)).getText().toString();

    if(selected.equals("Your comparing string, like Games"){                                               

    Toast toast = Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT);
    toast.show(); }                                                                                                                 

    else {                                            
    if(selected.equals("Your comparing string, like Games")){                                            
    Toast toast = Toast.makeText(getApplicationContext(), selected, Toast.LENGTH_SHORT);
    toast.show();}}

}}); 
```

# javascript - javascript更改函数参数变量名并返回其值

> ID：14891029
> 
> 赞同：-1
> 
> 时间：2013-02-15T08:54:00.220
> 
> 标签：javascript, function, variables, parameters

嗨，我有一个函数，我想返回带有附加值的函数参数。所以不要写这个：

```
function(response) {
    return response.links_1;
}

function(response) {
    return response.links_2;
}

function(response) {
    return response.links_3;
} 
```

我想制作一个循环并添加数字的for循环，如下所示：

```
function(response) {
    var counter = 3;
    for(var i = 0; i < counter; i++) {
        return response.links_ +i;
    }
} 
```

重要的是 response.link_ 不能是字符串！然后它会丢失函数参数值。

我尝试这样做：

```
function(response) {
    var i = 1,  
    resp = 'response.links_',
    endResp = resp + i;
    return endResp ;
    }
} 
```

和 console.log(endResp); 返回正确的字符串，但仅此而已，它是一个字符串.. 我想要**变量**response.links_1 的值而不是字符串值 response.links_1。

我刚刚尝试了以下方法，但没有任何运气：（解析：只是一种主干方法）

```
parse: function(response) {
    var counter = 3;
 for(var i = 0; i < counter; i++) {
   return response[links_ + i];
}
} 
```

欢迎任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:07:24.513

你应该试试 response["links_" + 3]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:19:03.723

要访问`JSON`哈希的键，有两种方法

```
// For the following object
var obj = {
  links_1: 'value1',
  links_2: 'value1',
  links_3: 'value1',
};

// key1 can be accessed like
console.log(obj.links_1);

// Or
console.log(obj['links_1']); 
```

所以，在你的情况下，你可以使用第二种方法

```
var counter = 3;
for(var i = 0; i < counter; i++) {
  return response['links_' + i];
} 
```

此外，您可以通过

```
var counter = Object.keys(response).length; 
```

而且，如果您不需要对`counter`变量执行任何其他操作，并且`response`对象仅包含链接，则可以使用类似

```
for (link in response) {
    return response[link];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:22:41.430

对象取消引用运算符`.`不适用于动态生成的属性名称，因此您必须改用数组取消引用运算符`[]`：

```
return response['links_' + i]; 
```

# android - android:parentActivityName 不起作用，尽管包含 android-support-v4.jar

> ID：14891032
> 
> 赞同：9
> 
> 时间：2013-02-15T08:54:08.297
> 
> 标签：android

我已经包含了 android-support-v4.jar 库以使用“android:parentActivityName="com.myApp.example.MainActivity”。它包含在“Android”依赖项和“引用库”中，但它仍然没有工作->

> 错误：在包“android”中找不到属性“parentActivityName”的资源标识符

有什么建议么？

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myApp.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-feature android:name="android.hardware.location.network" />
    <uses-feature android:name="android.hardware.location.gps" />
    <uses-feature android:name="android.hardware.wifi" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.myApp.example.MainActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:label="@string/app_name"
            android:uiOptions="splitActionBarWhenNarrow" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <action android:name="android.intent.action.SEARCH" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.myApp.example.AboutUsActivity"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:label="@string/AboutUs" 
            android:parentActivityName="com.myApp.example.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.myApp.example.MainActivity" />
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-12-19T09:40:20.077

正如@iargin 所说

> android:parentActivityName 在 API 16 中引入

这是真的，针对 api 级别 16 构建工作正常，但是[从官方文档](http://developer.android.com/training/implementing-navigation/ancestral.html)中等效的是使用 `meta-data`标签

```
 <activity
        android:name="com.dwaik.actionbar.LocationFound"
        android:label="@string/loc">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.dwaik.actionbar.MainActivity" />
    </activity> 
```

它适用于 api 级别 15

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-15T11:26:53.000

API 16 中引入了该属性`android:parentActivityName`。将项目的构建目标设置为 Android 4.1，然后您可以在 API 级别 14（您声明最低 sdk 级别为 14）或更高级别的设备上运行您的应用程序（如果包含 android 支持库）在项目的构建路径中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-11-14T16:09:26.990

您需要在每个活动子项中添加

```
 <application ... >
...
<!-- The main/home activity (has no parent activity) -->
<activity
    android:name="com.example.myfirstapp.MainActivity" ...>
    ...
</activity>
<!-- A child of the main activity -->
<activity
    android:name="com.example.myfirstapp.DisplayMessageActivity"
    android:label="@string/title_activity_display_message"
    android:parentActivityName="com.example.myfirstapp.MainActivity" >
    <!-- Parent activity meta-data to support API level 7+ -->
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.example.myfirstapp.MainActivity" />
</activity> 
```

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-26T17:15:59.010

for`android:value`也可以使用`android:value=".MainActivity"`because 声明包名。`package="com.myApp.example"`

```
 <manifest  ...
   package="com.myApp.example" > 

   ...

   <activity
        android:name=".AboutUsActivity"
        android:label="@string/AboutUs" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".MainActivity" />
   </activity>

   ...

</manifest> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-23T03:41:17.690

确保 android:value 设置为：

```
android:value="com.myApp.example.MainActivity" 
```

并不是：

```
android:value="MainActivity" 
```

这解决了我的问题。

# c# - 如何使用正则表达式验证日期格式？

> ID：14891037
> 
> 赞同：-4
> 
> 时间：2013-02-15T08:54:22.047
> 
> 标签：c#, regex

如何在c#中使用正则表达式验证以下格式..你能帮帮我吗..

```
Today's Date: 03:30 AM ET, 02/15/2013 
```

我使用了以下格式，但它不起作用..

```
@"^ Today's Date: (\d{2})(\:)(\d{2})$ AM ET, ^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\d\d$" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:19:24.307

看起来您的正则表达式存在 3 个问题：

*   `^`今天和*今天*之间有一个领先的`T`空间
**   用于匹配日期和月份的正则表达式部分的顺序错误*   表达式中间的`$`and`^`不应该在那里*

 *`(0[1-9]|[12][0-9]|3[01])`匹配 01 到 31 并`(0[1-9]|1[012])`匹配 01 到 12

制作更正的图案：

```
^Today's Date: (\d{2})(\:)(\d{2}) AM ET, (0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$ 
```

但正如[Rahul R.](https://stackoverflow.com/users/1421196/rahul-r)在评论中所说，使用适当的日期解析方法可能是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:29:54.777

用这个：

```
^Today's Date: ([01][0-9]|[2[0-3]):([0-5][0-9]) [AP]M ET, ((0[1-9]|[12][0-9]|3[01])/(?=(0[13578]|1[02]))(0[13578]|1[02])|(0[1-9]|[12][0-9]|30)/(?=(0[469]|11))(0[469]|11)|(0[1-9]|[12][0-9])/(?=(02))(02))/(0{3}[1-9]|((?!0{3}\d)\d{4}))$ 
```*

# javascript - 用点表示法创建对象

> ID：14891040
> 
> 赞同：6
> 
> 时间：2013-02-15T08:54:25.563
> 
> 标签：javascript, json

这是[这个问题的反向问题](https://stackoverflow.com/questions/10253307/setting-a-depth-in-an-object-literal-by-a-string-of-dot-notation)。

给定一个对象`x={a:1,b:2}`和一个字符串`c.d=3`，将对象 x 修改为以下内容：

```
{
  a:1,
  b:2,
  c:{
    d:3
  }
} 
```

我正在寻找一种不使用`eval`. 用例如下：

`x`作为一个配置对象，我们称之为： `config.set("music.shuffle",true)`

现在，`music.shuffle`必须以某种方式解析并添加到`x`config.set 函数内的内部对象中，这样 x 看起来像：

```
x={a:1,b:2,music:{shuffle:true}} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T09:11:39.287

我想你可以做这样的事情：

```
function addValueToObj(obj, newProp) {
    newProp = newProp.split("=");       // separate the "path" from the "value"

    var path = newProp[0].split("."),     // separate each step in the "path"
        val = newProp.slice(1).join("="); // allow for "=" in "value"

    for (var i = 0, tmp = obj; i < path.length - 1; i++) {
       tmp = tmp[path[i]] = {};     // loop through each part of the path adding to obj
    }
    tmp[path[i]] = val;             // at the end of the chain add the value in
}

var x = {a:1, b:2};
addValueToObj(x, "c.d=3");
// x is now {"a":1,"b":2,"c":{"d":"3"}}
addValueToObj(x, "e.f.g.h=9=9");
// x is now {"a":1,"b":2,"c":{"d":"3"},"e":{"f":{"g":{"h":"9=9"}}}} 
```

演示：http: [//jsfiddle.net/E8dMF/1/](http://jsfiddle.net/E8dMF/1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-07-06T23:09:00.717

你可以这样做[`lodash.set()`](https://lodash.com/docs#set)

```
> l=require('lodash')
> x={a:1,b:2};
{ a: 1, b: 2 }
> l.set(x, 'cd', 3)
{ a: 1, b: 2, c: { d: 3 } }

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T09:13:31.087

我相信 dojo 的 setObject 可以满足您的要求。如果您（可以理解）不想引入所有的 dojo，那么我建议您检查他们的（免费提供的）源或通过 AMD 仅加载基本（仅 4k）。它看起来像这样：

```
function setObject(name, value, context) {
    var parts=name.split("."), 
    p=parts.pop();
    for(var i=0, j; context && (j=parts[i]); i++){
        context = (j in context ? context[j] : context[j]={});
    }
    return context && p ? (context[p]=value) : undefined; // Object
} 
```

所以在你的情况下，你会这样做：

```
x={a:1,b:2};
setObject("c.d", 3, x); 
```

警告：除非您只处理琐碎的案例，否则我会敦促您继续检查完整的 dojo 实现，它处理没有提供上下文等的情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T09:28:32.297

这是一个评论较多的版本，应该很容易理解。

```
// stores the configured data
configStore = {};

config = {
  set: function(keyValueString) {

    // Split the string by the =
    var pair = keyValueString.split('=');

    // left of the = is the key path
    var keyPath = pair[0];

    // right of the = is the value to set
    var value = pair[1];

    // split keyPath into an array of keys
    var keys = keyPath.split('.');
    var key; // used in loop

    // the current level of object we are drilling into.
    // Starts as the main root config object.
    var currentObj = configStore;

    // Loop through all keys in the key path, except the last one (note the -1).
    // This creates the object structure implied by the key path.
    // We want to do something different on the last iteration.
    for (var i=0; i < keys.length-1; i++) {

      // Get the current key we are looping
      key = keys[i];

      // If the requested level on the current object doesn't exist,
      // make a blank object.
      if (typeof currentObj[key] === 'undefined') {
        currentObj[key] = {};
      }

      // Set the current object to the next level of the keypath,
      // allowing us to drill in.
      currentObj = currentObj[key];
    }

    // Our loop doesn't handle the last key, because that's when we
    // want to set the actual value. So find the last key in the path.
    var lastKey = keys[keys.length-1]

    // Set the property of the deepest object to the value.
    currentObj[lastKey] = value;
  }
};

// Do it.
config.set('omg.wtf.bbq=123')

// Check it.
alert(configStore.omg.wtf.bbq); // 123 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-13T01:55:18.200

今天不得不做类似的事情，这是另一个解决方案。绝对可以使用一些清理，但它的伎俩。如果输入有效，这将扩展现有对象并且不会擦除任何数据。

没有验证，所以如果你传递了错误的数据，你肯定可以覆盖密钥。

```
// @param object orig    the object to extend
// @param array keyParts the.key.path split by "." (expects an array, presplit)
// @param mixed value    the value to assign
// @param object scoped  used by the recursion, ignore or pass null
function unflatten(orig, keyParts, value, scoped) {
    if (!scoped) {
        scoped = orig;
    }

    var nextKey = keyParts.shift();

    if (keyParts.length === 0) {
        scoped[nextKey] = value;
        return orig;
    }

    if (!scoped[nextKey]) {
        scoped[nextKey] = {};
    }

    scoped = scoped[nextKey];
    return unflatten(orig, keyParts, value, scoped);
} 
```

函数原型可以改进，但可以满足我的需要。通过以下方式调用它：

```
var orig = { foo: 'hello world', bar: { baz: 'goodbye world' } };

// lets add the key "bar.cat.aww" with value "meow"
unflatten(orig, "bar.cat.aww".split("."), "meow");
/* 
  orig is { 
    foo: "hello world", 
    bar: { 
      baz: "goodbye world", 
      cat: { 
        aww: "meow" 
      } 
    } 
  }

*/

// we can keep calling it to add more keys
unflatten(orig, "some.nested.key".split("."), "weeee");

/* 
  orig is { 
    foo: "hello world", 
    bar: { 
      baz: "goodbye world", 
      cat: { 
        aww: "meow" 
      } 
    },
    some: {
      nested: {
        key: "weeee"
      }
    }
  }
*/ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-17T02:52:56.080

这个怎么样？

它将创建或复制/覆盖现有对象。

```
function expando(obj, base) {
    return Object.keys(obj)
      .reduce((clone, key) => {
        key.split('.').reduce((innerObj, innerKey, i, arr) => 
          innerObj[innerKey] = (i+1 === arr.length) ? obj[key] : innerObj[innerKey] || {}, clone)
        return clone;
    }, Object.assign({}, base));
}

console.log(expando({'a.b': 1})) // { a: { b : 1 }}
console.log(expando({'b.c': 2}, { a: 1 })) // { a: 1, b: { c: 2 }}
console.log(expando({'b.c.d': 2, 'e.f': 3}, { a: 1 })) // { a: 1, b: { c: { d: 2 } }, e: { f: 3}} 
```

注意：箭头函数和`Object.assign()`.

随意玩：

[https://jsbin.com/setazahuce/1/edit?js,console](https://jsbin.com/setazahuce/1/edit?js,console)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-31T03:20:28.010

那这个呢 ：

```
function setObj (str, value, obj) {
    var ref = obj, keys = str.split('.');
    while (keys.length) {
        var currentKey = keys.shift();
        ref[currentKey] = keys.length ? (ref[currentKey]  ? ref[currentKey] : {}) : value;
        ref = ref[currentKey];
    }
} 
```

使用输入对象的示例（可能是使用 $.serializeArray 提取的一些表单值）

```
var serializedInputs = [
    {name: 'fruits[1][name]', value: 'Banana'},
    {name: 'fruits[1][id]', value: '1'},
    {name: 'fruits[2][name]', value: 'Strawberry'},
    {name: 'fruits[2][id]', value: '2'},
    {name: 'fruits[3][name]', value: 'Raspberry'},
    {name: 'fruits[3][id]', value: '3'},
    {name: 'fruits[4][name]', value: 'Kiwi'},
    {name: 'fruits[4][id]', value: '4'},
    {name: 'fruits[5][name]', value: 'Mango'},
    {name: 'fruits[5][id]', value: '5'},
    {name: 'selected_fruit_id', value: '1'},
]
// This variable holds the result
var obj = {}
serializedInputs.forEach(function(item) {
    // Turning square brackets into dot notation
    setObj(item.name.replace(/\]/g, '').replace(/\[/g, '.'), item.value, obj);
}) 
```

结果

```
{
    "fruits": {
        "1": {
            "name": "Banana",
            "id": "1"
        },
        "2": {
            "name": "Strawberry",
            "id": "2"
        },
        "3": {
            "name": "Raspberry",
            "id": "3"
        },
        "4": {
            "name": "Kiwi",
            "id": "4"
        },
        "5": {
            "name": "Mango",
            "id": "5"
        }
    },
    "selected_fruit_id": "1"
} 
```

# c# - 如何使用实体框架获取 ms sql db 中现有项目的集合

> ID：14891042
> 
> 赞同：2
> 
> 时间：2013-02-15T08:54:35.790
> 
> 标签：c#, sql, entity-framework

我刚刚开始探索实体框架，它真的很棒！但现在我有疑问。在我的数据库“产品”中，我有表的产品、组件、产品组件（它是多对多连接）。我在我的 c# 项目中创建了一个 .edmx 文件并选择了这 3 个表。现在，我可以在表格的列表框项目中看到，例如，我可以看到 Products 表的所有行使用

```
ProductsEntities db = new ProductsEntities();
LstBox.ItemsSource = db.Product; 
```

但是所有的`Product`都有集合`Components`，我想绑定例如索引2中的集合。（表中的产品“cake”`Components`有s “suqar”、“salt”、“flour”）。我怎么能做这个东西？我试图按索引获取，但它不起作用。也许这是一个愚蠢的问题，对不起，但请帮忙。`Product``Product``Component``Product`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T08:58:26.883

为什么你不能从 Product --> Component 1xProduct-->Many Components 建立直接关系。为什么需要`Product_Component`. 如果你会像我说的那样做，你可以很容易地得到你想要的东西：

```
db.Products.First(e=>e.Id==2).Components.ToList(); 
```

将获得 id = 2 的产品组件列表；

编辑：

像这样使用

```
List<Component> components = new List<Component>();
db.Products.First(e=>e.Id==2).Product_Components.ToList().ForEach(e=>components.Add(e.Component)); 
```

向产品添加新组件：

```
Product someProduct = db.Product.First(e=>e.Name=="coolProduct")
Component component = db.Component.First(e=>e.Name=="Fish");
someProduct.Product_Component.Add(new Product_Component(){Component=component...});
db.SaveChanges(); 
```

向产品添加新组件的新方法：

```
Product someProduct = db.Product.First(e=>e.Name=="coolProduct")
Component component = db.Component.First(e=>e.Name=="Fish");
Component_Product component_product = new Component_Product(){Component = component, Product = product};
db.SaveChanges(); 
```

新-新解决方案：

```
Product someProduct = db.Product.First(e=>e.Name=="coolProduct")
Component component = db.Component.First(e=>e.Name=="Fish");
Component_Product component_product = new Component_Product(){Component = component, Product = product};
db.Component_Product.Add(component_product);
db.SaveChanges(); 
```

# windows-phone-7.1 - FlickrNet 和 Windows Phone 7.1

> ID：14891043
> 
> 赞同：0
> 
> 时间：2013-02-15T08:54:40.877
> 
> 标签：windows-phone-7.1, flickr

我正在尝试从运行 Win Phone 7.1的[http://flickrnet.codeplex.com](http://flickrnet.codeplex.com)`PhotosSearch()`获取示例代码，但该方法出现错误。我`FlickrNet`从`NuGet`. 我错过了什么吗？错误如下。

```
Flickr flickr = new Flickr("6317d8e0db3a555288202fe04b4f4972");
PhotoSearchOptions options = new PhotoSearchOptions();
options.BoundaryBox = new BoundaryBox(-1.7, 54.9, -1.4, 55.2); // Roughly Newcastle upon Type, England
PhotoCollection photos = flickr.PhotosSearch(options);
foreach(Photo photo in photos)
{
    Console.WriteLine(String.Format("Photo \"{0}\" is at {1},{2}", photo.Title, photo.Latitude, photo.Longitude));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:24:56.680

回答我自己的问题，我确实设法让它工作。我删除了所有库并添加了 Flickr.net 和 Flickrnet WP7，它工作正常。

# powershell - 哈希表和键顺序

> ID：14891044
> 
> 赞同：35
> 
> 时间：2013-02-15T08:54:41.510
> 
> 标签：powershell, sorting, hashtable, powershell-2.0

有没有办法在添加时保持哈希表中键的顺序？就像推送/弹出机制一样。

例子：

```
$hashtable = @{}

$hashtable.Add("Switzerland", "Bern")
$hashtable.Add("Spain", "Madrid")
$hashtable.Add("Italy", "Rome")
$hashtable.Add("Germany", "Berlin")
$hashtable 
```

我想保留将元素添加到哈希表的顺序。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-15T09:02:44.743

PowerShell V1 / V2 中没有内置解决方案。您将要使用 .NET [`System.Collections.Specialized.OrderedDictionary`](https://docs.microsoft.com/en-us/dotnet/api/system.collections.specialized.ordereddictionary)：

```
$order = New-Object System.Collections.Specialized.OrderedDictionary
$order.Add("Switzerland", "Bern")
$order.Add("Spain", "Madrid")
$order.Add("Italy", "Rome")
$order.Add("Germany", "Berlin")

PS> $order

Name                           Value
----                           -----
Switzerland                    Bern
Spain                          Madrid
Italy                          Rome
Germany                        Berlin 
```

在 PowerShell V3 中，您可以转换为 [ordered]：

```
PS> [ordered]@{"Switzerland"="Bern"; "Spain"="Madrid"; "Italy"="Rome"; "Germany"="Berlin"}

Name                           Value
----                           -----
Switzerland                    Bern
Spain                          Madrid
Italy                          Rome
Germany                        Berlin 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-15T09:01:11.297

您可以改用有序字典：

像这样：

```
$list = New-Object System.Collections.Specialized.OrderedDictionary
$list.Add("Switzerland", "Bern")
$list.Add("Spain", "Madrid")
$list.Add("Italy", "Rome")
$list.Add("Germany", "Berlin")
$list 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-10T00:52:22.263

您可以在添加元素时提供一个顺序键：

```
$hashtable = @{}
$hashtable[$hashtable.count] = @("Switzerland", "Bern")
$hashtable[$hashtable.count] = @("Spain", "Madrid")
$hashtable[$hashtable.count] = @("Italy", "Rome")
$hashtable[$hashtable.count] = @("Germany", "Berlin")
$hashtable 
```

然后，您可以获取按键排序的元素：

```
echo "`nHashtable keeping the order as they were added"
foreach($item in $hashtable.getEnumerator() | Sort Key)
{
    $item
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-01T11:33:29.053

PowerShell 1 的方式是添加一个哈希表成员来保留添加顺序。无需使用 System.Collections.Specialized.OrderedDictionary：

```
$Hash = New-Object PSObject                                       
$Hash | Add-Member -MemberType NoteProperty -Name key1 -Value val1
$Hash | Add-Member -MemberType NoteProperty -Name key2 -Value val2
$Hash | Add-Member -MemberType NoteProperty -Name key3 -Value val3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-24T15:32:44.400

为了与旧 PowerShell 版本兼容，您可以考虑使用此 cmdlet：

```
Function Order-Keys {
    param(
        [Parameter(Mandatory = $true, ValueFromPipeline = $true)][HashTable]$HashTable,
        [Parameter(Mandatory = $false, Position = 1)][ScriptBlock]$Function,
        [Switch]$Descending
    )
    $Keys = $HashTable.Keys | ForEach {$_} # Copy HashTable + KeyCollection
    For ($i = 0; $i -lt $Keys.Count - 1; $i++) {
        For ($j = $i + 1; $j -lt $Keys.Count; $j++) {
            $a = $Keys[$i]
            $b = $Keys[$j]
            If ($Function -is "ScriptBlock") {
                $a = $HashTable[$a] | ForEach $Function
                $b = $HashTable[$b] | ForEach $Function
            }
            If ($Descending) {
                $Swap = $a -lt $b
            }
            Else
            {
                $Swap = $a -gt $b
            }
            If ($Swap) {
                $Keys[$i], $Keys[$j] = $Keys[$j], $Keys[$i]
            }
        }
    }
    Return $Keys
} 
```

此 cmdlet 返回按函数定义排序的键列表：

按名称分类：

```
$HashTable | Order-Keys | ForEach {Write-Host $_ $HashTable[$_]}
Germany Berlin
Italy Rome
Spain Madrid
Switzerland Bern 
```

按值排序：

```
$HashTable | Order-Keys {$_} | ForEach {Write-Host $_ $HashTable[$_]}
Germany Berlin
Switzerland Bern
Spain Madrid
Italy Rome 
```

您也可以考虑嵌套哈希表：

```
$HashTable = @{
    Switzerland = @{Order = 1; Capital = "Berne"}
    Germany     = @{Order = 2; Capital = "Berlin"}
    Spain       = @{Order = 3; Capital = "Madrid"}
    Italy       = @{Order = 4; Capital = "Rome"}
} 
```

例如，按（散列）顺序属性排序并返回键（国家）：

```
$HashTable | Order-Keys {$_.Order} | ForEach {$_} 
```

或按预定义的大写排序（降序）：

```
$HashTable | Order-Keys {$_.Capital} -Descending | ForEach {$_} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-31T23:36:07.757

这是一个对我有用的简单例程。

```
function sortedKeys([hashtable]$ht) {
  $out = @()
  foreach($k in $ht.keys) {
    $out += $k
  }
  [Array]::sort($out)
  return ,$out
} 
```

以及使用它的调用

```
forEach($k in (& sortedKeys $ht)) {
  ...
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-08-30T22:42:04.550

```
function global:sortDictionaryByKey([hashtable]$dictionary)
{
    return $dictionary.GetEnumerator() | sort -Property name;
} 
```

# javascript - 如何用 JavaScript 加密，然后用 C# 解密

> ID：14891045
> 
> 赞同：0
> 
> 时间：2013-02-15T08:54:54.700
> 
> 标签：javascript, asp.net-mvc, encryption

我正在使用 ASP.NET MVC4，这就是我想要做的：

我有一个 Web API，它获取用户名、密码和序列号，并返回一个包含所需数据的 JSON 文件。但出于安全考虑，URL 中的密码不应该那么清晰，因此我将其实现更改为获取加密字符串的 Web API，稍后将对其进行解密以提取三个字段。

问题是在使用调用此 Web API 的视图时，我应该使用 JavaScript 加密用户输入的文本字段，对吗？所以这个用 JavaScript 加密应该对应用 C# 写的解密方法。有没有现有的方法可以做到这一点？还是我应该以不同的方式考虑这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:00:38.463

只需使用安全连接（`https://`ssl）。

*您可以在 JavaScript 中进行的任何*加密都可以被逆转，因为用于加密数据的代码可供使用它的任何人使用，并且可以轻松进行逆向工程。

# iphone - Iphone html 5 应用程序总是提示每个页面上的共享位置

> ID：14891049
> 
> 赞同：0
> 
> 时间：2013-02-15T08:55:17.580
> 
> 标签：iphone, ios, html, geolocation

我有一个 html 5 中的 iphone 应用程序。大多数页面需要知道应用程序的位置才能提供用户数据。即使用户允许共享位置，应用程序也会在每个页面上提示“共享位置”。一旦用户第二次打开同一页面，它将不会提示。为什么在应用程序访问的每个新页面上总是提示“共享位置”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:43:30.710

我在 safari iphone 4 版中看到的正好相反。一旦用户单击“共享位置”弹出窗口，它就会运行一次。下次用户回到它不共享的页面时，也没有弹出窗口，因此用户甚至无法选择共享。

我在 android 浏览器（三星 Galaxy 2）中对此进行了测试，并看到了类似的行为。我的解决方法是使用 android firefox 浏览器。它工作得很好，并将继续在页面的后续返回中分享。这是一个糟糕的解决方法，因为没有人使用 firefox android 版本。

# c++ - 这是什么 （（ ））？

> ID：14891052
> 
> 赞同：90
> 
> 时间：2013-02-15T08:55:29.483
> 
> 标签：c++, c

在浏览 gcc 编译器源代码 (gcc/c-family/c-pragma.c) 时，我看到：

```
typedef struct GTY(()) align_stack {
  int                  alignment;
  tree                 id;
  struct align_stack * prev;
} align_stack; 
```

并且不管在我身后有很多 C 编程年，这些位：`(())`我还完全不知道。有人可以解释一下他们的意思吗？谷歌似乎没有找到它。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-02-15T08:57:02.993

它们是 GCC 内部的“魔法”，即编译器实现本身的一部分。

请参阅[此页面](http://gcc.gnu.org/onlinedocs/gccint/Type-Information.html)，其中讨论了它们的使用。该宏用于标记用于垃圾收集目的的类型。也可以有参数，请参阅[此页面](http://gcc.gnu.org/onlinedocs/gccint/GTY-Options.html#GTY-Options)了解详细信息。

**更新:: 正如**[Drew Dorman](https://stackoverflow.com/users/16287/drew-dormann)在评论中指出的那样，实际的双括号不是 GNU 实现的“内部性”的一部分；当您想要将整个参数列表收集到被调用宏的单个参数中时，它们通常被使用。这有时在包装时也很有用`printf()`。[有关此技术的更多信息，请参阅此问题](https://stackoverflow.com/questions/5765175/macro-to-turn-off-printf-statements)。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-02-15T10:18:00.930

通常，它与宏一起使用以屏蔽逗号。鉴于`#define foo(a,b)`，宏调用`foo(1,2,3)`将是非法的。使用一对额外的括号来阐明哪个逗号被屏蔽：`foo((1,2),3)`与`foo(1,(2,3))`.

在这种情况下，`GTY`可以接受多个参数，以逗号分隔，但所有这些逗号必须被屏蔽。这就是为什么内部`()`围绕所有论点。

# javascript - backgroundColor 作为开关功能？

> ID：14891054
> 
> 赞同：0
> 
> 时间：2013-02-15T08:55:36.037
> 
> 标签：javascript

此代码没有显示错误但无法正常工作，任何人都可以看到原因吗？

```
function setStyles(){
    var ya
    styles=document.getElementById("back");
    switch (ya){
        case 1:styles.style.backgroundColor='#FF0000';
            break;
        case 2:styles.style.backgroundColor='#FF6600';
            break;
        case 3:styles.style.backgroundColor='#FFFF66';
            break;
        case 4:styles.style.backgroundColor='#669900';
            break;
        case 5:styles.style.backgroundColor='#000066';
            break;
        case 6:styles.style.backgroundColor='#660066';
            break;
    }
}

window.onload = setStyles; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:01:14.947

如果你定义你，它会起作用：

```
function setStyles(ya){
  var ya;

  styles=document.getElementById("back");

  switch (ya) {
    case 1:
      styles.style.backgroundColor='#FF0000';
    break;

    case 2:
      styles.style.backgroundColor='#FF6600';
    break;

    case 3:
      styles.style.backgroundColor='#FFFF66';
    break;

    case 4:
      styles.style.backgroundColor='#669900';
    break;

    case 5:
      styles.style.backgroundColor='#000066';
    break;

    case 6:
      styles.style.backgroundColor='#660066';
    break;
  }
}

window.onload = function() {
  setStyles(1);
}; 
```

[http://jsbin.com/agajen/1/edit](http://jsbin.com/agajen/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:02:16.537

`ya`由于未定义，所有 case 语句都不会匹配。尝试定义它（换句话说，给它一个值）：

```
var ya = 1; 
```

您还可以定义一个`default`案例，如果其他案例语句都不匹配，则将执行该案例：

```
...
...
case 6:
    styles.style.backgroundColor='#660066';
    break;
default:
    styles.style.backgroundColor='#000000';
... 
```

编辑：获得随机背景颜色：

```
var ya = Math.floor(Math.random() * 6) + 1; 
```

# oop - 当孩子具有不同的返回类型时无法实现继承

> ID：14891058
> 
> 赞同：2
> 
> 时间：2013-02-15T08:55:57.313
> 
> 标签：oop, design-patterns, architecture

在图表生成项目中，我有 2 个类。一种称为 BitmapChart，另一种称为 VectorChart。它们的所有属性都是相同的，并且它们具有相同的方法（尽管具有不同的实现）。有一个例外，那就是 Generate() 函数。对于 BitmapChart 对象，它返回一个 Stream，而对于 VectorChart 对象，它返回一个 XmlDocument。

起初我认为我应该使用继承，两者都是“图表”，它们共享相同的属性和方法。但后来我意识到由于返回类型不同，多态是不可能的。

是否有我缺少的 OO 原则或设计模式来使我的代码更优雅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:10:02.790

> 相同的方法（尽管有不同的实现）。

如果您希望能够将它们互换使用，请为这些方法创建一个**接口。**但是由于这些`Generate()`方法做不同的事情，所以不要将它们包含在接口中。您甚至可能应该将它们命名为不同的名称，即`GenerateStream()`和`GenerateXml()`

至于实现的交集（相同的属性，可能是部分方法），您应该尝试将逻辑和表示分离。所以这对你来说可能是一个更好的方法：

```
+--------+        +----------------------+
| Chart  |        |     <<interface>>    |
|--------|        |     ChartRenderer    |
|-data   |        |----------------------|
|-labels |        |+setChart(Chart chart)|
|- ...   |        |+...                  |
+--------+        +----------------------+
                        ^         ^
                        |         |
       +----------------+--+   +--+----------------+
       |BitmapChartRenderer|   |VectorChartRenderer|
       |-------------------|   |-------------------|
       |+generateStream()  |   |+generateXml()     |
       +-------------------+   +-------------------+ 
```

# java - 带有 Java、Spring MVC 和无数据库资源的 Grails

> ID：14891065
> 
> 赞同：0
> 
> 时间：2013-02-15T08:56:25.417
> 
> 标签：java, spring, grails, spring-mvc

我有一个在无法直接访问数据库的机器上运行的 Web 项目。我的目标是使用 Grails 提供的模板构建它（启用脚手架时），但我更喜欢我的代码在 java 中而不使用任何数据库资源。我在搜索引擎中寻找了几个小时来找到一个示例或教程，该示例或教程将使用 Grails + Spring MVC + JAVA 而不是数据库资源，同时将利用 grails 的脚手架模板，以便 HTML 的数量必须由我编写的代码实际上为零。任何有关如何适当处理此问题的想法建议或资源都将受到赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:56:50.243

不确定我是否能提供帮助，但我想到了我们刚刚发布的指南。它可能没有帮助......它基于您的需要。只是好奇，为什么不使用数据库呢？似乎云选项将使数据库可用性不再是问题。

无论如何，是不是有一些开源的东西可以`JDBC`连接到`CSVs`？我记得，我们可以将我们的应用程序连接到`CSV`我曾经使用的分析包之一。

# javascript - Javascript 在每次点击时添加 DIV

> ID：14891077
> 
> 赞同：0
> 
> 时间：2013-02-15T08:57:01.167
> 
> 标签：javascript, jquery, html, css

我有一个带有一个“添加更多亮点”文本链接的文本字段，我需要的是当我每次点击添加链接时，我应该能够在另一个下方显示 3 个 div。

下面给出我的 HTML 代码；

```
<input size="20" id="high_light" type="text" maxlength="30" placeholder="Highlights of this offer" /> 
 <span><a href="#" id="add"> + Add more highlights</a></span>
 <div id="highlight1" style="display:none;"><input class="word_count2" size="20" name="high_light2" id="high_light2" type="text" maxlength="30" /></div> 
<div id="highlight2" style="display:none;"><input class="word_count2" size="20" name="high_light2" id="high_light2" type="text" maxlength="30" /></div> 
<div id="highlight3" style="display:none;"><input class="word_count2" size="20" name="high_light2" id="high_light2" type="text" maxlength="30" /></div> 
```

谢谢阿吉什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:05:17.177

```
 <script type="text/javascript">
        $(function(){
            var count = 1;  
            $('#add').click(function(){
                if(count < 4){
                   $('body').append('<div id="highlight'+count+'"><input class="word_count2" size="20" name="high_light2" id="high_light2" type="text" maxlength="30" /></div> ');
                   if(count == 3){
                      $('#add').hide();
                   } 
                } else {
                   $('#add').hide();
                }
                count++;
            });

        });
        </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:03:36.037

纯JS版本：

```
<div id="divParent">
    <a onclick="createThreeDivs()">Click me!</a>
</div>

<script type="text/javascript">

function createThreeDivs() {
  for (var i=0; i<3; i++) {
   var div = document.createElement("div");
   var divText = document.createTextNode("Hello World");
   div.appendChild(divText);
   var divParent = document.getElementById("divParent");
   divParent.appendChild(div);
  }
}

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:01:15.677

我敢肯定有一种更优雅的方式来做这件事，但无论如何，这里有一些东西 -

```
$('#add').click(function() {
    var $additional_div = $('<div style="display:none;"><input class="word_count2" size="20" name="high_light2" id="high_light2" type="text" maxlength="30" /></div>');
    $('#container_div').append($additional_div)
                       .append($additional_div)
                       .append($additional_div);
} 
```

你必须对额外的 div id 做一些事情。他们是必需的吗？你要重复这个吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T09:08:12.683

```
var clickEle  = document.getElementById("high_light1");
clickEle.onclick = function() {
      var html   = "<div></div><div></div><div></div>";
      var parEle = document.getElementById("container_div");
      parEle.innerHTML += html;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:05:45.420

```
$("#add").click(function(){
  $(this).after('<div><input type=text></div>');
  $(this).after('<div><input type=text></div>');
  $(this).after('<div><input type=text></div>'); 
```

})

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T09:40:55.033

```
<script type="text/javascript">
  $(document).ready(function(){
    $('#add').bind('click', function(){
      for(var i=1; i<=3; i++) {
        var highlightId = "highlight"+i;
        var highlightDiv = '<div id="'+highlightId+'" style="display:none;"><input class="word_count2" size="20" name="high_light2" id="high_light2" type="text" maxlength="30" /></div>';
        $('#highlightsContainer').append(highlightDiv);
      }
    });
  });
</script>

<input size="20" id="high_light" type="text" maxlength="30" placeholder="Highlights of this offer" /> 
<span><a href="#" id="add"> + Add more highlights</a></span>
<div id="highlightsContainer"></div> 
```

# java - 如何从 log4j.properties 文件中获取选择性日志

> ID：14891080
> 
> 赞同：0
> 
> 时间：2013-02-15T08:57:05.917
> 
> 标签：java

我已经使用 Eclipse 创建了一个 java 项目。在那个项目中，我使用了 log4j.properties 文件。在项目中，在某些情况下，我使用了如下语句

```
logger.debug("This is from debug");
logger.info("This is from Info"); 
```

我的日志文件是

```
# Set root category priority to INFO and its only appender to CONSOLE.
#log4j.rootCategory=INFO, CONSOLE
#log4j.rootCategory=INFO, CONSOLE, LOGFILE

# Set the enterprise logger category to FATAL and its only appender to CONSOLE.
log4j.logger.org.apache.axis.enterprise=DEBUG, stdout

# Root logger option
 log4j.rootLogger=DEBUG,stdout
 log4j.appender.stdout=org.apache.log4j.ConsoleAppender
 log4j.appender.stdout.Threshold=DEBUG
 log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
 log4j.appender.stdout.layout.ConversionPattern=%-4r [%t] %-5p %c %x – %m%n 
```

现在，当我运行项目时，我得到了所有的日志语句。例如。我在我的项目中使用 Quartz 计时器，所以当我运行程序时，我得到了 Quartz 的默认语句，例如

```
16   [main] INFO  org.quartz.core.QuartzScheduler  ? Quartz Scheduler v.2.1.4 created. 
```

但我只想要自定义日志语句，即我编写的​​语句。如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:18:28.790

如果您只想要自定义日志语句，请关闭 rootLogger，并配置您的自定义日志记录，例如

```
log4j.rootLogger=OFF
log4j.logger.com.mycompany=DEBUG, CONSOLE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:14:03.713

您可以为您的包和类显式设置记录器，如下所示

```
log4j.logger.com.mycompany=INFO
log4j.logger.com.mycompany.MyClass=DEBUG 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T08:59:55.330

您可以如下实现类级别记录器

> log4j.logger.package.classes.classOne=信息，日志文件

确保删除其他 log4j 键（或注释它），以便只记录您的

# javascript - Phonegap 和 jQuery Mobile 架构问题

> ID：14891082
> 
> 赞同：1
> 
> 时间：2013-02-15T08:57:14.917
> 
> 标签：javascript, jquery, cordova, jquery-mobile

到目前为止，我正在构建我的第一个移动应用程序，但不知道我的解决方案是否好。

我使用了一个只有一个 data-role="page" 的模板（html 文件）。每个内容元素只是一个通过 javascript 隐藏或显示的 div。请检查以下代码以使其清楚。这也是我的应用程序的入口点。

```
 $(document).delegate("#index", "pageinit", function(event, ui) {
      initRotation();
      initNavigation();
      initImpressum();
      initService();
      cookie = null;
      ......
      isLoggedIn(); //returns cookie = true || false
      if (cookie == null) {
        $('#login').show();
        $('#home, #foot, #service').hide();
        initRegistration();
  } else {
      $('#login, #service').hide();
      $('#foot, #home').show();
      $('#naviHome').addClass("ui-btn-active"); // ui-state-persist?!
      createHomeContentFromServer();
  }
}); 
```

我现在有几个问题。

1.  该应用程序有点慢。
2.  Pageinit 事件被频繁触发。你能阻止它吗？
3.  由于我得到了大约 100 个外部 javascript 文件，因此该代码对于第三人来说不是很可读。（每次用户做某事约 500 个 div 被隐藏并显示 10 个）
4.  您是否有具有良好架构的应用程序的完整示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:55:00.000

您的应用程序很慢，因为它每次都加载一个大页面。页面初始化多次触发可能是因为您每次单击链接时都重新加载了一个大页面。

在 JQM 中，您有许多 data-role="page"，而不仅仅是一个。下面是 Dreamweaver CS6 生成的标准模板。它使用 JQ 和 JQM CDN，并被格式化为四页。它应该给你一个好的开始：

```
<!DOCTYPE html> 
<html>
<head>
<meta charset="utf-8">
<title>jQuery Mobile Web App</title>
<link href="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.css"     rel="stylesheet" type="text/css"/>
<script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js" type="text/javascript"></script>
</head> 
<body> 

<div data-role="page" id="page">
<div data-role="header">
    <h1>Page One</h1>
</div>
<div data-role="content">   
    <ul data-role="listview">
        <li><a href="#page2">Page Two</a></li>
        <li><a href="#page3">Page Three</a></li>
        <li><a href="#page4">Page Four</a></li>
    </ul>       
</div>
<div data-role="footer">
    <h4>Page Footer</h4>
</div>
</div>

<div data-role="page" id="page2">
<div data-role="header">
    <h1>Page Two</h1>
</div>
<div data-role="content">   
    Content     
</div>
<div data-role="footer">
    <h4>Page Footer</h4>
</div>
</div>

<div data-role="page" id="page3">
<div data-role="header">
    <h1>Page Three</h1>
</div>
<div data-role="content">   
    Content     
</div>
<div data-role="footer">
    <h4>Page Footer</h4>
</div>
</div>

<div data-role="page" id="page4">
<div data-role="header">
    <h1>Page Four</h1>
</div>
<div data-role="content">   
    Content     
</div>
<div data-role="footer">
    <h4>Page Footer</h4>
</div> 
```

# php - 访问 Google Api 以获取具有有效访问权限和刷新令牌的文件列表

> ID：14891088
> 
> 赞同：1
> 
> 时间：2013-02-15T08:57:29.350
> 
> 标签：php, get, google-api, oauth-2.0, google-drive-api

我正在为应用程序使用[Oauth 类](http://www.phpclasses.org/package/7700-PHP-Authorize-and-access-APIs-using-OAuth.html)来访问 Google 驱动器 API，我同时拥有刷新和访问令牌，现在我需要做的就是设置请求的参数。

我的问题是我似乎找不到获得适当响应所需的参数，我查看了 OAuth 游乐场，发送的请求有三个标头`Authorization`， `Host`并且`Content length`.

我正在使用的类应该正确处理这些标头，并且我很确定它正在做正确的事情，因为它实际上正确地接收了`code`and `access/refresh tokens`。

当我发送请求时，Google 会返回一个错误；

```
StdClass Object
(
[error] => stdClass Object
    (
        [errors] => Array
            (
                [0] => stdClass Object
                    (
                        [domain] => global
                        [reason] => authError
                        [message] => Invalid Credentials
                        [locationType] => header
                        [location] => Authorization
                    )
            )
        [code] => 401
        [message] => Invalid Credentials
    )
) 
```

这肯定表明凭据无效？但如果我刚刚收到“新”访问令牌和刷新令牌，这肯定没问题吗？这是我发送的请求（根据 OAuth 类方法）。

```
$row = $this->docs_auth->row();

$this->client                = new oauth_client_class;
$this->client->server        = 'Google';
$this->client->redirect_uri  = 'https://localhost/p4a/applications/reflex_application/index.php';
$this->client->debug         = true;
$this->client->client_id     = REFLEX_GOOGLE_CLIENT;
$this->client->client_secret = REFLEX_GOOGLE_SECRET;
$this->client->access_token  = $row['access_token'];
$this->client->refresh_token = $row['refresh_token'];

$url = 'https://www.googleapis.com/drive/v2/files';

$Values = array(
    'access_token'  => $this->client->access_token,
    'client_id'     => $this->client->client_id,
    'client_secret' => $this->client->client_secret
);
/*
 * Request: GET https://www.googleapis.com/drive/v2/files
 * $values = the values sent in the request
 * $folder = the response returned from Google.
 */

$this->client->callAPI($url, 'GET', $values, array(
    'FailOnAccessError' => false
), $folder);

$this->field->setValue(print_r($folder, true)); 
```

所以我的问题是，要发送给 Google 以获取文件夹和文件列表的正确参数是什么，以及请求所需的标头是什么（我不想过多地编辑类，但已经需要）。

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:18:06.750

查看您发布的链接以及原始类创建者编写的示例，您可以在调用 callAPI() 之前调用类的 Initialize()。

这是他使用的示例：

```
if(($success = $client->Initialize()))
{
    if(($success = $client->Process()))
    {
        if(strlen($client->authorization_error))
        {
            $client->error = $client->authorization_error;
            $success = false;
        }
        elseif(strlen($client->access_token))
        {
            $success = $client->CallAPI(
                'https://www.googleapis.com/oauth2/v1/userinfo',
                'GET', array(), array('FailOnAccessError'=>true), $user);
        }
    }
    $success = $client->Finalize($success);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T10:18:35.420

在离开这个几个月并回来之后，我终于得到了你正在寻找的方法，虽然我使用了谷歌自己的类：

方法大致相同；

首先调用类`$this->client = new Google_Client();`

然后设置获取特定客户端响应所需的所有元数据，设置范围并设置访问类型：

```
 // Get your credentials from the APIs Console
    $this->client->setClientId($this->client_id);
    $this->client->setClientSecret($this->client_secret);
    $this->client->setRedirectUri($this->redirect_uri);
    $this->client->setScopes(array('https://www.googleapis.com/auth/drive ','https://www.googleapis.com/auth/drive.file' ));
        $this->client->setAccessType("offline"); 
```

然后最后获取您存储的访问令牌（在数据库中或存储在会话中）并使用`Google_DriveService($this->client)`类中的这些函数来执行文件列表：

```
try{

            $json = json_encode($this->loadAccessTokenFromDB());

            $this->client->setAccessToken($json);
            $this->client->setUseObjects(true);
            $service = new Google_DriveService($this->client);

            $parameters = array();
            $parameters['q'] = " FullText contains '" . $searchString . "'";
            $files = $service->files->listFiles($parameters);
            $ourfiles = $files->getItems();

            $fileArray = array();

            foreach ( $ourfiles as $file )
            {
                $fileArray[] = array(
                        'title'          => $file->getTitle(),
                        'id'             => $file->getID(),
                        'created'        => $file->getCreatedDate(),
                        'embedlink'      => $file->getEmbedLink(),
                        'exportlinks'    => $file->getExportLinks(),
                        'thumblink'      => $file->getThumbnailLink(),
                        'mimeType'       => $file->getMimeType(),
                        'webContentLink' => $file->getWebContentLink(),
                        'alternateLink'  => $file->getAlternateLink(),
                        'permissions'    => $file->getUserPermission()
                );
            }
            //$this->mimeType = $file->getMimeType();
            $this->documents->load($fileArray);
            if ($fileArray["id"] !== "")
            {
                $this->documents->firstRow();

                return;
            }
        } catch(Google_AuthException $e) {
            print $e->getMessage();
        }
        return;
    } 
```

我还在对可以使用的搜索字符串进行测试，从我设法测试的内容来看，该字符串必须是一个没有中断的字符串，它将搜索包含该特定字符串的任何内容，例如

`foo`会给出包含以下词的文档：`foo` `foobar`等但不会找到`foo bar`所以你必须小心，理想情况下，如果它是用户或任何东西的特定文档，你应该寻找一个特定的唯一字符串来搜索，

再次感谢。

# c# - 通过 app.config 更改跟踪开关级别

> ID：14891089
> 
> 赞同：11
> 
> 时间：2013-02-15T08:57:33.810
> 
> 标签：c#, .net, logging, app-config

我有如下配置其跟踪源的应用程序：

```
 var traceSource = new TraceSource("MyTraceSource");
        traceSource.Switch = new SourceSwitch("MyTraceSwitch") { **Level = SourceLevels.Information** };

        var traceListener = new TextWriterTraceListener(logFilePath);
        traceListener.TraceOutputOptions = TraceOptions.DateTime;

        traceSource.Listeners.Clear();
        traceSource.Listeners.Add(traceListener);

        Trace.AutoFlush = true; 
```

应用程序始终使用此跟踪源来跟踪事件。请注意，SourceLevels.Information 在跟踪开关中是硬编码的。现在我需要将跟踪开关级别更改为详细。是否可以通过 app.config 文件完成？我尝试了许多 xml-configs 但失败了。注意我不能只更改 app.config 的源代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T08:13:28.160

我不确定您是否正在搜索类似的东西，但我曾经使用过以下 xml 配置：`change the trace switch level to Verbose.`（App-Config）

```
 <configuration>
        <system.diagnostics>
            <switches>
            <add name="AppTraceLevel" value="4" /> //4 = Verbose
            </switches>
            // Here would be the Trace Tag with the Listeners (not important for your question)
        </system.diagnostics>
    </configuration> 
```

也许它有帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T08:14:09.967

好吧 -[配置跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)明确指定：

```
 <sources>
        <source name="System.ServiceModel" 
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
        </source>
  </sources> 
```

*跟踪级别*部分描述了一些细节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T04:34:56.103

以上两个答案都有价值。这是完整的回复。将此部分添加到您的配置中：

```
<system.diagnostics>
<sources>
  <source name="MyTraceSource" switchValue="Information">
    <listeners>
      <add name="file" initializeData="c:\temp\logpath.txt" traceOutputOptions="DateTime" type="System.Diagnostics.TextWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />

    </listeners>
  </source>
</sources>
</system.diagnostics> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-19T18:32:42.580

在原始问题（vkrzv 的帖子）中，听众被删除是一个问题：

```
traceSource.Listeners.Clear(); 
```

在 app.config 中添加了监听器的原因（在 Glenn Ferries 精彩的解决方案中。我非常喜欢它。谢谢。）将被删除。

因此，完整的解决方案之一就在这里。您将在 c:\temp 文件夹中有 2 个日志文件：logcode.txt 和 logappconfig.txt

代码：

```
var traceSource = new TraceSource("MyTraceSource");

var traceListener = new TextWriterTraceListener(@"c:\temp\logcode.txt");
traceListener.TraceOutputOptions = TraceOptions.DateTime;

//traceSource.Listeners.Clear(); //we do not want to delete the listener
traceSource.Listeners.Add(traceListener);

Trace.AutoFlush = true; 
```

应用程序配置：

```
<system.diagnostics>
<sources>
  <source name="MyTraceSource" switchValue="Information">
    <listeners>
      <add name="file" initializeData="c:\temp\logappconfig.txt" traceOutputOptions="DateTime" type="System.Diagnostics.TextWriterTraceListener, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </listeners>
  </source>
</sources>
</system.diagnostics> 
```

# intellij-idea - Intellij IDEA 无法调试

> ID：14891090
> 
> 赞同：3
> 
> 时间：2013-02-15T08:57:41.757
> 
> 标签：intellij-idea, jboss7.x, jboss-weld

我在 IDEA 中调试时遇到问题。从我尝试在 JBoss AS7 上调试我的 web 应用程序的特定时刻开始

```
Starting weld service for deployment 
```

并且调试不会停止，但在此之后什么也得不到。

我怎样才能解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:55:06.067

我为我的问题找到了解决方案。

调试->查看断点->并删除方法断点

# jqgrid - 最后一个列应该如何占用jqgrid中的剩余空间

> ID：14891091
> 
> 赞同：0
> 
> 时间：2013-02-15T08:57:41.953
> 
> 标签：jqgrid

我有我`jqgrid`的`shrinkToFit: false`和`autowidth: true` 我想要的是列应该采用列模型中指定的各自宽度，并且确实如此。但是当列数较少且网格宽度较大时，在最后一列之后会留下大量空间。

我需要调整最后一列的大小以占用全部可用空间。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:19:56.303

你有非常特殊的要求。将最后一列调整为完整可用空间不是 jqGrid 的标准功能，因此您不能`autowidth: true`在这种情况下使用。

您可以做的是在创建网格**之前**生成jqGrid`width`的最后一列`colModel`的值和选项的值。它允许您实现您的自定义要求。`width`

# azure - Windows Azure 和 WCF 数据服务 V3

> ID：14891093
> 
> 赞同：3
> 
> 时间：2013-02-15T08:57:49.747
> 
> 标签：azure, wcf-data-services, azure-storage, azure-web-roles

我的问题是：
为什么`WCF Data Services 5.2.0`在 Azure 模拟器下工作而不是在 Azure 暂存/生产环境下工作？

我在服务器上收到此错误：

> 无法加载文件或程序集 Microsoft.Data.Services、Version=5.0.0.0、Culture=neutral、PublicKeyToken=31bf3856ad364e35 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

而不是在模拟器上它完美地工作..

我的项目参考程序集是：

*   Microsoft.Data.Services 5.2.0.0
*   Microsoft.Data.Services.Client 5.2.0.0
*   Microsoft.Data.OData 5.2.0.0
*   Microsoft.Data.Edm 5.2.0.0
*   System.Spatial 5.2.0.0
*   Microsoft.WindowsAzure.Storage 2.0.0.0

V3 在没有其他库的情况下以 JSON 格式显示数据非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:46:54.990

该问题可能与 .svc 文件中存在对 GACed 版本的硬编码引用有关：5.0.0.0

```
<%@ ServiceHost Language="C#" Factory="System.Data.Services.DataServiceHostFactory, Microsoft.Data.Services, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Service="Forward.TestService " %> 
```

如果您的 dll 将 Copy Local 属性设置为 true，您应该能够删除版本并解决问题

```
<%@ ServiceHost Language="C#" Factory="System.Data.Services.DataServiceHostFactory, Microsoft.Data.Services, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Service="Forward.TestService " %> 
```

# ajax - PhoneGap：JQuery Mobile ajax 因证书问题而失败

> ID：14891095
> 
> 赞同：1
> 
> 时间：2013-02-15T08:58:22.913
> 
> 标签：ajax, cordova, jquery-mobile, certificate

我正在尝试使用 jquery mobile 进行 ajax 调用并以证书问题结束。

进行 Ajax 调用的代码

```
$( document ).bind( "mobileinit", function() {
    $.mobile.allowCrossDomainPages = true;

    $.ajax({
        url : "https://test.stage.example.com/services.do?method=getDetails&ticket=" + window.context.getTicket(),
        success : function(data) {
            alert("success");
        },
        error : function(err, status) {
            alert("err");
        }
    });
}); 
```

收到以下错误消息

> 加载资源失败：此服务器的证书无效。您可能正在连接到伪装成“test.stage.example.com”的服务器，这可能会使您的机密信息面临风险。

**我需要 VPN 连接的 URL。而且，我已将证书添加到需要 VPN 连接的密钥链访问中。**

# javascript - 在Javascript中滑动以删除iOS的按钮？

> ID：14891108
> 
> 赞同：2
> 
> 时间：2013-02-15T08:59:44.890
> 
> 标签：javascript, jquery, html, ios, ajax

我只是在我的 iPod 上的 Safari 上的 Facebook 上，每当你在 Messenger 中并且你在任何消息上向右/向左滑动时，都会出现一个删除按钮。

有人可以指导我并可能告诉我它是如何在 html/JS/jQuery 中完成的吗？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:28:25.683

我不知道 jQuery mobile，这将是一种更简单的方法，但这里是你如何在普通的 ol JS 中做到这一点：

```
document.body.addEventListener('touchstart',function(e)
{
    e = e || window.event;//don't know how mobile browsers behave here
    var startCoordinates = {x:e.changedTouches[0].clientX,
                            y:e.changedTouches[0].clientY};
    var endHandler = function(e)
    {
        e = e || window.e;
        var xDiff = Math.abs(Math.abs(startCoordinates.x) - 
                             Math.abs(e.changedTouches[0].clientX));
        //unbind handler, avoid double listeners
        document.body.removeEventListener('touchend', endHandler, false);
        if (xDiff >= 50)
        {//assume small movement wasn't intended as swipe
            //here a swipe was detected
            if (confirm('Are you sure you want to delete X?'))
            {//perform xhr request here, or whatever
            }
        }
    };
    document.body.addEventListener('touchend',endHandler,false);
},false); 
```

jQmobile 可能会容易得多，但这是我认为的基本思想，它适用于我为（Android、iOS（4 到 6）编写脚本的所有移动浏览器，甚至支持触摸事件的开发模式下的 chrome 也适用像这样的代码）。

*更新：*
添加了专门处理滑动的代码：

```
(function(G,und)
{
    'use strict';
    var load = function()
    {
        var tStart, body = document.body;
        tStart = function(e)
        {
            e = e || G.event;
            var coords = e.changedTouches[0].clientX,
            tEnd = function(e)
            {
                e = e || G.event;
                var currentX = e.changedTouches[0].clientX;
                if (body.removeEventListener)
                {
                    body.removeEventListener('touchend',tEnd,false);
                }
                else
                {//shouldn't be possible, but I don't know all browsers, of course
                    body.detachEvent('ontouchend',tEnd);
                }
                if ((coords - currentX) <= 50)
                {//too little movement
                    /*console.log*/alert('moved, but no real swipe');
                }
                else
                {
                    /*console.log*/alert('SWIIIPEEE!');
                }
            };
            if (body.addEventListener)
            {
                return body.addEventListener('touchend',tEnd,false);
            }
            body.attachEvent('ontouchend',tEnd);
        };
        if (G.removeEventListener)
        {
            body.addEventListener('touchstart',tStart,false);
            return G.removeEventListener('load',load,false);
        }
        body.attachEvent('ontouchstart',tStart);
        return G.detachEvent('onload',load);
    };
    if (G.addEventListener)
    {
        return G.addEventListener('load',load,false);
    }
    return G.attachEvent('onload',load);
}(this)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T09:41:30.170

我创建了一个 Javascript 库来执行此操作 - 今天刚刚发布！[https://github.com/ankane/swipeout](https://github.com/ankane/swipeout)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T11:46:07.643

这将允许用户滑动和点击；

这与**bootstrap**一起用于绑定样式和剔除（但这是可选的，在此演示中未使用）。

**在iOS**和**Android**（Cordova 应用程序）上工作和测试。*由于我的数组包含重要信息，我决定滑动以显示删除按钮，然后允许用户单击此按钮。这将作为用户决定删除它。*

此外，我使用此代码不仅用于删除只是适当地设置插件按钮的样式（'btn-success' 等）。

所需的 jquery 库的扩展是“ **jquery.event.move** ”（[https://github.com/stephband/jquery.event.move](https://github.com/stephband/jquery.event.move)）

HTML：

```
<div class="col-xs-12 btn-group-vertical">
    <!-- ko foreach: Alert -->
      <a class="btn btn-lg btn-default mySwipe" role="button" style="height:45px;float:left;">This is also test</a>
      <button class="btn btn-lg btn-danger btn-addOn" style="width:0px;display:none;right:0px;height:45px;margin-top:0px;padding:10px;">Delete Alert</button>
    <!-- /ko -->
</div> 
```

JS：

每次数组更改时都会调用它 (swipeButton('.mySwipe');)

```
// THIS FUNCTION APPLIES THE SWIPE DELETE LOGIC TO LIST ITEMS (.btn)
function swipeButton(elementIdentifier) {
    $(elementIdentifier).on('movestart', function (e) {
        // If the movestart is heading off in an upwards or downwards 
        // direction, prevent it so that the browser scrolls normally.
        if ((e.distX > e.distY && e.distX < -e.distY) || (e.distX < e.distY && e.distX > -e.distY)) {
            e.preventDefault();
        }
        else {
            if (e.distX < 0) {
                // Left
                $(e.currentTarget).css('border-bottom-right-radius', '0px');
                $(e.currentTarget).css('border-top-right-radius', '0px');
            }
        }
    }).on('move', function (e) {
        var item = $(e.currentTarget);
        var total = item.parent().width();
        var btn = $(e.currentTarget.nextElementSibling);

        if (e.distX < 0) {
            // Left
            var distance = e.distX * -1;
            distance = distance > 120 ? 120 : distance;
            btn.show();
            // Move
            var itemWidth = total - distance;
            var btnWidth = distance < 35 ? 0 : distance;
            if (btnWidth == 0) {
                btn.hide();
                itemWidth = total;
            }
            item.css('width', itemWidth + 'px');
            btn.css('width', btnWidth + 'px');
        }
        else {
            //Right
            var distance = e.distX;
            distance = distance > 120 ? 120 : distance;
            var currentWidth = item.width();
            // Move
            var thisMove = e.deltaX == 0 ? distance : e.deltaX;
            var itemWidth = currentWidth + thisMove;
            itemWidth = itemWidth > total ? total : itemWidth;
            var btnWidth = total - itemWidth;
            btnWidth = btnWidth < 14 ? 0 : btnWidth;
            if (btnWidth == 0) {
                btn.hide();
                itemWidth = total;
            }
            item.css('width', itemWidth + 'px');
            btn.css('width', btnWidth + 'px');
        }
    }).on('moveend', function (e) {
        var total = $(e.currentTarget).parent().width();
        var itemWidth = $(e.currentTarget).width();
        if (itemWidth == total) {
            // End Right
            $(e.currentTarget).css('border-bottom-right-radius', '');
            $(e.currentTarget).css('border-top-right-radius', '');
            var btn = $(e.currentTarget.nextElementSibling);
            btn.hide();
        }
    });
} 
```

此代码的工作演示：http: [//jsfiddle.net/3d9n9cdo/5/](http://jsfiddle.net/3d9n9cdo/5/)

# objective-c - 在 tableself 目标 c 上显示 UIImageView 之类的书籍

> ID：14891110
> 
> 赞同：1
> 
> 时间：2013-02-15T09:00:00.313
> 
> 标签：objective-c

如何显示 UIImageView 就像在附加的链接图像中显示的那样。

[书架](http://sphotos-e.ak.fbcdn.net/hphotos-ak-snc7/307328_2857930102889_507159741_n.jpg "书架")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:25:51.837

如果我理解你的权利，你可以旋转你的 UIImageView 与`CATransform3DMakeRotation`. 并且不要忘记用 移动图像`CATransform3DMakeTranslation`，否则你会得到像[Rotate 3D 一样的效果，在 X 轴上有问题](https://stackoverflow.com/questions/7231572/rotate-3d-got-issue-in-x-axis/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:30:18.033

查看[iCarousel](https://github.com/nicklockwood/iCarousel)，完美解决您的问题。

# powershell - TeamCity 正在运行 Powershell 脚本，但无法执行批处理文件

> ID：14891111
> 
> 赞同：0
> 
> 时间：2013-02-15T09:00:14.697
> 
> 标签：powershell, deployment, teamcity

我目前正在使用 Teamcity 实施部署方法，该方法在我的 Build Agent 上运行 Powershell 脚本，然后配置我的生产环境等。

我对 Powershell 脚本有一个问题，因为它似乎无法从中运行批处理文件。

如果我手动运行该脚本会完美运行，它只会在通过 TeamCity 运行时失败。

在构建日志中，我收到错误：

```
'myBatchFile.bat' is not recognized as an internal or external command, operable program or batch file. 
```

批处理文件和powershell脚本在同一个目录下，批处理文件的调用方式如下：

```
cmd /c Deploy.bat 
```

我将我的 TeamCity 配置设置为将此构建步骤设置为：

*   脚本：文件
*   ScriptExecutionMode：使用 -File 参数执行脚本
*   脚本参数：无
*   附加 CMD 行参数：无

我最初没有使用 cmd 来尝试执行批处理文件，但是执行批处理文件`.\Deploy.bat`似乎也不起作用。

为了让批处理文件运行，我还需要设置什么额外的东西吗？脚本的其余部分运行良好，只是对批处理的调用没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:23:52.513

这有点疯狂，因为很难预测正在发生的事情，但从描述看来，脚本中的路径已被更改，并且它也是动态的，因为 TeamCity 创建了临时目录，但如果你替换：

```
cmd /c Deploy.bat 
```

和

```
cmd /c "$(Split-Path $myinvocation.MyCommand.Path)\Deploy.bat" 
```

那么我认为这将能够定位部署脚本。让我知道事情的后续。

# python - 如何提高内存缓存命中率？

> ID：14891112
> 
> 赞同：1
> 
> 时间：2013-02-15T09:00:18.203
> 
> 标签：python, google-app-engine, python-2.7, memcached

Memcache 报告 gae 的命中率为 32%。我不知道那有多好。我应该尝试改进还是如何衡量这个命中率是否合适？我想现在我看到 memcache 实际上确实会命中和未命中，我可以尝试提高命中率。

```
Statistics Hit count:   2490
Miss count:     5206
Hit ratio:  32%
Item count:     2006 item(s)
Total cache size:   3632355 byte(s)
Oldest item age:    6 hour(s) 4 min(s) 23 second(s) 
```

## 更新

经过仔细重构，我设法将命中率提高到 40%。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T12:52:46.517

鉴于您的缓存大小甚至不是 4MB，我建议您的缓存没有保存很多对象。可能是您的缓存仍在预热，或者您的缓存过期太快而无法生效。

您可以尝试增加缓存中项目的寿命，看看是否有帮助，尽管考虑到您的总体访问数量，我怀疑这只是 memcached 没有被要求做很多事情的情况。

# c# - 当记录插入数据库时 警告 wpf 应用程序

> ID：14891126
> 
> 赞同：0
> 
> 时间：2013-02-15T09:01:10.237
> 
> 标签：c#, sql-server, wpf, asp.net-mvc

我有一个 MVC 和一个 WPF 应用程序，基本上我希望能够在通过 MVC 应用程序将记录插入 SQL 数据库时提醒 WPF 应用程序。

我正在使用 EF 和 LINQ 在 MVC 应用程序中执行 CRUD，而 WPF 只是一个“侦听器”，它从 MVC 应用程序中检索插入的记录并将它们显示在 GUI 上。

因此，一旦将 MVC 应用程序中的记录插入数据库，我希望能够在 MVC 应用程序中获得弹出警报。

最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:16:45.410

您可以使用 StreamInsight 连接某些东西，具体取决于您拥有的 SQL 版本，但我只是让 WPF 应用程序轮询数据库以进行更改

# xml - 正则表达式 \p{L} 和 \p{N}

> ID：14891129
> 
> 赞同：156
> 
> 时间：2013-02-15T09:01:14.720
> 
> 标签：xml, regex, character-class

我是正则表达式的新手，并获得了以下正则表达式：

```
(\p{L}|\p{N}|_|-|\.)* 
```

我知道 * 是什么意思和 | 表示“或”，而 \ 转义。

但我不知道什么`\p{L}`和`\p{N}`意味着什么。我用谷歌搜索了它，没有结果......

有人能帮我吗？

* * *

## 回答 #1

> 赞同：221
> 
> 时间：2013-02-15T09:03:31.813

> `\p{L}`匹配“字母”类别中的单个代码点。
> `\p{N}`匹配任何脚本中的任何类型的数字字符。

来源：**[正则表达式.info](http://www.regular-expressions.info/unicode.html#prop)**

如果您要经常使用正则表达式，我建议您为该站点添加书签，这非常有用。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-02-15T09:06:16.313

这些是 Unicode 属性快捷方式（`\p{L}`用于 Unicode 字母，`\p{N}`用于 Unicode 数字）。.NET、Perl、Java、PCRE、XML、XPath、JGSoft、Ruby（1.9 及更高版本）和 PHP（[自 5.1.0 起](http://php.net/manual/en/regexp.reference.unicode.php)）支持它们

无论如何，这是一个非常奇怪的正则表达式。当字符类就足够时，您不应该使用交替：

```
[\p{L}\p{N}_.-]* 
```

# hadoop - 在最短的时间内处理多个文件

> ID：14891139
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:01:45.503
> 
> 标签：hadoop, mapreduce

我是hadoop的新手。基本上我正在编写一个程序，它需要两个 3+ GB 的 multifasta 文件（ref.fasta，query.fasta）.....

ref.fasta：

> gi|12345 ATATTATAGGACACCAATAAAATT..
> 
> gi|5253623 AATTATCGCAGCATTA...

..等等..

查询.fasta：

> 查询 ATTATTTAAATCTCACACCACATAATCAATACA AATCCCCACCACAGCACACGTGATATATACA CAGACACA...

现在对于每个映射器，我需要提供 ref 文件的一个部分和整个查询文件。IE

> gi|12345 ATATTATAGGACACCAATA....（来自 ref 文件的单个 fasta 序列）

和整个查询文件。因为我想在映射器中运行一个 exe，它将这两个作为输入。

所以我要在外面处理 ref.fasta，然后把它交给 mapper 吗？或者别的什么..？？我只需要花费最少时间的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:39:09.863

我遇到了类似的问题。

我建议您预处理您的 ref 文件并将其拆分为多个文件（每个序列一个）。然后将这些文件复制到 hdfs 上的文件夹，您将在 main 方法中将其设置为输入路径。然后实现自定义输入格式类和自定义记录读取器类。您的记录阅读器只会将本地文件拆分路径的名称（作为文本值）传递给 map 方法的 key 或 value 参数。

对于所有映射函数所需的查询文件，再次将您的查询文件添加到 hdfs，然后将其添加到 main 方法中的 DistributedCache。在您的 map 方法中，您将可以访问两个本地文件路径并将它们传递给您的 exe。

希望有帮助。

我遇到了类似的问题，最终重新实现了 blast exe 文件的功能，这样我就不需要在我的 map 方法中处理读取文件，而是可以处理整个 Java 对象（基因和基因组）从通过我的自定义记录阅读器输入文件，然后作为对象传递给我的地图函数。

干杯，韦恩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T22:01:25.933

您的用例的最佳方法可能是将查询文件放在[分布式缓存](http://bigdataspeak.wordpress.com/2012/12/27/what-is-distributed-cache-in-hadoop/)`configure()`中，并在/中准备好文件对象`setup()`以在`map()`. 并将 ref 文件作为正常输入。

您可以执行以下操作：

在您`run()`将查询文件添加到分布式缓存中：

```
DistributedCache.addCacheFile(new URI(queryFile-HDFS-Or-S3-Path), conf); 
```

现在有如下映射器类：

公共静态类 MapJob 扩展 MapReduceBase 实现 Mapper { 文件查询文件；

```
 @Override
    public void configure(JobConf job) {

        Path queryFilePath = DistributedCache.getLocalCacheFiles(job)[0];
                    queryFile = new File(queryFilePath.toString());
            }

            @Override
    public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, Reporter reporter)
            throws IOException {
            // Use the queryFile object and [key,value] from your ref file here to run the exe file as desired.
            }
} 
```

# mysql - 如何使用 HeidiSQL 复制数据库？

> ID：14891145
> 
> 赞同：18
> 
> 时间：2013-02-15T09:02:10.507
> 
> 标签：mysql, database, heidisql

我在 Windows XP 上本地安装了 MariaDB。
我创建了一个空数据库，我想用我从 MySQL 实例（使用 HeidiSQL）导出为转储文件`db_y`的数据库表填充该数据库。当我将转储文件 db_x.sql 导入 MariaDB 实例时：`db_x`

```
c:\ > mysql -u root -h localhost -p db_y < "X:/archive/db_x.sql" 
```

我得到以下信息：

```
- MariaDB-inst
    +db_x  
    +db_y 
```

`db_y`保持为空并`db_x`从转储文件中添加（db_x 是我导出的原始数据库的数据库名称）。

我必须做什么才能获得所需的数据库名称？
我以为我可以更改 db_x.sql 文件中的数据库名称，但我不想打开这么大的文件。
我可以更改上面的导入命令以更改数据库名称吗？
我也对这种解决方案感兴趣：

```
CREATE DATABASE y FROM DATABASE x 
```

这样的事情可能吗？
在网上我找到了不推荐的解决方案 RENAME DATABASE 和 ALTER DATABASE db_x UPGRADE DATA DIRECTORY NAME 但真诚地说，我更喜欢用新名称创建一个新数据库。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-05-30T04:17:53.547

假设您有两个数据库：`source_db`和`target_db`. 如果要将数据库内容从其中*复制*`source_db`到`target_db`您应该在 HeidiSQL 中执行以下操作：

1.  右键单击`source_db`然后选择：**Export database as SQL**。
2.  现在更改*Output*的值并选择**Database**。
3.  将出现一个选择框，选择即可`target_db`。

![在此处输入图像描述](../Images/a4f6c731bc63f29a3e23f39579516e41.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-21T06:40:40.363

有一种使用 HeidiSQL 将数据库从一个实例转移到另一个实例的简单方法：

1.  在实例 y 中创建数据库 db_y
2.  单击转储图标（或右键单击）。实例 y 应该被激活。
3.  在“输出”选项中选择数据库
4.  在“数据库”选项中选择 db_y
5.  选择左侧的实例 x 和数据库 x
6.  出口

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T15:36:36.050

试试 MySQL 工作台。它是由 MySQL 制作的，我发现它非常适合备份数据库并以不同的名称恢复它。

[http://dev.mysql.com/downloads/workbench/](http://dev.mysql.com/downloads/workbench/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-14T14:10:44.353

HeidiSQL 的导出对话框最近有了一个名为“Max INSERT size”的新选项。这控制批量/多个 INSERT 命令中的行数。

此外，还有此导出对话框的[文档](http://www.heidisql.com/help.php#sqlexport)。

# android - 当触摸超出其边界时，ViewPager 无法继续滚动

> ID：14891146
> 
> 赞同：0
> 
> 时间：2013-02-15T09:02:15.737
> 
> 标签：android, android-viewpager

我有一小块屏幕区域用于放置 ViewPager。当我从其区域内滚动 ViewPager 时，它工作正常。但是当我的手指超出界限时，滚动就会被拦截。这发生在低于 4.2 的 Android 版本上。在 Android 4.2 上，即使触摸超出 ViewPager 的范围，也会继续滚动。

我该如何修复这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:22:36.517

您可以覆盖 ViewPager 的触摸事件，并在 ACTION_DOWN 事件上调用`requestDisallowInterceptTouchEvent(true)`，然后在 ACTION_UP 上将其设置回 false。

这应该可以防止其他视图在您在 ViewPager 上启动触摸事件后拦截触摸事件。

# sql - 使用 FOR XML 路径的动态 sql 查询

> ID：14891147
> 
> 赞同：0
> 
> 时间：2013-02-15T09:02:16.030
> 
> 标签：sql, sql-server-2008, dynamic

我有以下 sql，当我运行它时，它的抛出错误

**`Incorrect syntax near '1'.`**

```
declare @sql      nvarchar(max)

 set @sql =N'SELECT PT.P_Name as Prisoner_Type,      
    PE.PID_No,PE.Jail_Code,PE.Entry_Year,Convert(varchar(10),PE.Admission_Date,103) Admission_Date,PE.JID_No,Convert(varchar(10),PE.Release_Date,103) Release_Date ,  
    PM.Prisoner_Name, SUBSTRING(PM.Father_Name, 0, 17)as Father_Name, PM.Mother_Name,PM.Spouse_Name,PM.Caste_Code,
    PM.Religion_Code,PM.Occupation_Code,PM.Qualification,PM.Tendency_Type,PM.Risk_Type,PM.Annual_Income_Code,PM.Marital_Status_Code,PM.Id_Mark,
    PM.Sex_Code,PM.Nationality_Code,PM.Off_Code,PM.Present_Add, Age as age ,PM.Permt_Add, LS.Location  AS Location 
    ,NT.Nation_Name , JT.Jail_Address
    ,OT.Offence_Name,QT.Qualification as quali ,IT.Annual_Income_Range,CT.Caste_Name
    ,RT.Religion_Name,MT.Marital_Status_Name,OFT.Occ_Name AS Occupation
    , STUFF((    SELECT '', '' + cc.Act_Sec AS [text()]

    FROM CourtCases cc
    WHERE
    cc.PID_NO = PE.PID_NO and ('','' + Replace(pe.Case_No,''$'','','') +'','' LIKE ''%,'' + CONVERT(VARCHAR, cc.Case_No) + '',%'') group by cc.Act_Sec
    FOR XML PATH('''')     ),'+ cast(1 as nvarchar(10))+', '+cast(1 as nvarchar(10))+', '''' )

    AS [Act_Sec]
    , STUFF((    SELECT '', '' + Convert(varchar(10),CC.Fir_Date,103) AS [text()]
    FROM CourtCases cc
    WHERE
    cc.PID_NO = PE.PID_NO and ('','' + Replace(pe.Case_No,''$'','','') +'','' LIKE ''%,'' + CONVERT(VARCHAR, cc.Case_No) + '',%'') group by  Convert(varchar(10),CC.Fir_Date,103) 
    FOR XML PATH('''')     ),'+ cast(1 as nvarchar(10))+', '+cast(1 as nvarchar(10))+', '''' )

    AS [Fir_Date]

    ,STUFF((    SELECT '', '' + FIR_No AS [text()]
    FROM CourtCases cc
    WHERE
    cc.PID_NO = PE.PID_NO and ('','' + Replace(pe.Case_No,''$'','','') +'','' LIKE ''%,'' + CONVERT(VARCHAR, cc.Case_No) + '',%'') group by FIR_No
    FOR XML PATH('''')     ),'+ cast(1 as nvarchar(10))+', '+cast(1 as nvarchar(10))+', '''' )

    AS [FIR_No]

    ,  STUFF((    SELECT '', '' + ct.Court_Name AS [text()]

    FROM CourtCases cc inner join Court_Tab as ct 
    ON cc.Court_Code=convert(nvarchar(50),ct.Court_Code)
    WHERE
    cc.PID_NO = PE.PID_NO and ('','' + Replace(pe.Case_No,''$'','','') +'','' LIKE ''%,'' + CONVERT(VARCHAR, cc.Case_No) + '',%'') group by  ct.Court_Name
    FOR XML PATH('''')     ),'+ cast(1 as nvarchar(10))+', '+cast(1 as nvarchar(10))+', '''' )
    AS [Court_Name]

    , STUFF((    SELECT '', '' + pt.PS_Name AS [text()]                      
    FROM CourtCases cc inner join PS_Tab as pt 
    ON convert(nvarchar(50),cc.PS_Code)=convert(nvarchar(50),pt.PS_Code)
    WHERE
    cc.PID_NO = PE.PID_NO and ('','' + Replace(pe.Case_No,''$'','','') +'','' LIKE ''%,'' + CONVERT(VARCHAR, cc.Case_No) + '',%'') group by pt.PS_Name
    FOR XML PATH('''')     ),'+ cast(1 as nvarchar(10))+', '+cast(1 as nvarchar(10))+', '''' )

    AS [PS_Name]

    FROM PrisonMaster AS PM 
    INNER  JOIN   PrisonerEntry     AS PE        ON PE.PID_No = PM.PID_No  AND   PE.Jail_Code='+cast(@JailCode as nvarchar) +

    'INNER   JOIN  Nation_Tab       AS NT        ON PM.Nationality_Code = NT.Nation_Code
    INNER JOIN  Sex_Tab         AS S         ON PM.Sex_Code = S.Sex_Code

    INNER  JOIN  Jail_Tab       AS JT        ON PE.Jail_Code = JT.Jail_Code
    INNER   JOIN  Prisoner_Tab   AS PT        ON PE.Prisoner_Type=PT.P_Type
    INNER  JOIN  Loc_Status     AS LS        ON PE.Location=LS.Loc_Status
    left JOIN   Offence_Tab AS    OT        ON OT.Offence_Code=PM.Occupation_Code
    left JOIN Qualification_Tab AS QT       ON QT.Q_Code=PM.Qualification
    left JOIN Income_Tab AS IT               ON IT.Annual_Income_Code=PM.Annual_Income_Code
    left JOIN Caste_Tab AS CT                ON CT.Caste_Code=PM.Caste_Code
    LEFT JOIN Religion_Tab AS RT             ON RT.Religion_Code=PM.Religion_Code
    LEFT JOIN Marital_Tab AS MT              ON MT.Marital_Status_Code=PM.Marital_Status_Code
    LEFT JOIN Occupation_Tab AS OFT          ON     OFT.Occ_Code=PM.Occupation_Code
    WHERE   

    PE.Admission_Date BETWEEN '+cast(@DATE1 as nvarchar(50))+' and '+ cast(@DATE2 as nvarchar(50))

    exec (@sql) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:37:58.247

这是什么……这是`+ cast(1 as nvarchar(10))+`什么？

只需将其添加到您的字符串中`+ '1' +`，甚至更好。`1`

# wso2 - WSO2 ESB ftp 到 SOAP

> ID：14891149
> 
> 赞同：1
> 
> 时间：2013-02-15T09:02:17.457
> 
> 标签：wso2, wso2esb

我们有一个遗留应用程序，它只能通过 ftp 协议上传文件。我们当前的应用程序具有用于类似文件提交的 SOAP 接口。有什么方法可以配置 WSO2 ESB 以将上传的文件通过 ftp 转换为 SOAP 请求以供我们当前的应用程序使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:54:36.193

是的，这是一种非常常见的方法。您可以创建一个从 FTP 读取的 VFS 代理。然后，您可以进行转换（取决于输入格式）（即 XSLT）以适合您的 SOAP 端点，然后简单地`<send>`对您的 WS 进行转换。

这是一个示例（仅伪代码 - 未经测试），但会给您一个很好的起点：

```
<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ftp_proxy_example" transports="vfs" startOnLoad="true" trace="disable">
    <parameter name="transport.PollInterval">10</parameter>
    <parameter name="transport.vfs.FileURI">vfs:ftp://user:password@server/path</parameter>
    <parameter name="transport.vfs.FileNamePattern">.*[.]xml</parameter>
    <parameter name="transport.vfs.ContentType">application/xml</parameter>
    <target faultSequence="errorSequence">
        <inSequence>
            <!-- maybe a transformation -->
            <!-- send to your WS endpoint -->
        </inSequence>
    </target>
</proxy> 
```

# html - CSS边距重叠而不是给出距离

> ID：14891152
> 
> 赞同：18
> 
> 时间：2013-02-15T09:02:43.193
> 
> 标签：html, css

最近我遇到了边距问题，但我无法解决它。我的 HTML 看起来像这样：

```
<div class="info-box">Some text</div>
<div class="form">...</div> 
```

CSS：

```
.info-box{
    border-radius: 5px;
    border: 1px solid red;
    margin-bottom: 20px;
}

.form{
    margin-top: 20px;
} 
```

问题是边距相互重叠，而不是在两个元素之间给出 40px 的距离。

我的问题是：为什么？我发现添加到 .info-box overflow:hidden 解决了这个问题，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-15T09:07:44.227

再次 - 您必须了解边距的解释方式。边距是指另一个元素的位置，**不包括**它的边距。您不能对边距求和。

![保证金如何运作](../Images/1b34ca6b17d8da839272442b057966bf.png)

# domain-driven-design - 在 DDD 中，任何不是实体或值对象的类都应该是服务吗？

> ID：14891154
> 
> 赞同：2
> 
> 时间：2013-02-15T09:02:48.897
> 
> 标签：domain-driven-design, naming-conventions, ddd-service

在 DDD 中，任何不是实体或值对象的类都应该是服务吗？

例如，在库中，一些类被命名`FileReader`（读取 File 对象），`Cache`由`MemcachedCache`or实现的接口`FileCache`，XXXManager，...

我理解在 DDD 之外，您可以随意命名您的课程。

但是在 DDD（以及相同的示例）中，我应该将我的类命名为、 、`FileReadingService`、等`CacheService`实现吗？`FileCacheService``XXXService`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:33:49.357

我认为这确实只与您的项目命名标准相关。DDD 没有规定那种详细程度。

我唯一的建议是确保将类似的东西`FileReader`与您的域明确隔离开来。可能在您的基础设施库中，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T23:17:44.867

DDD 中还有其他类型的对象，尽管它们的作用比实体、服务或值对象更多。诸如存储库和工厂之类的东西浮现在脑海中。但一般来说，诸如物理对象或问题描述中的名词之类的“真实”对象应该属于这些类别之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:49:00.430

好吧，我会说是的。即使您可能会遇到其他类型的对象，但毕竟这些对象可能会变成 VALUE 对象。我是这样想的：如果它不是需要存储的对象或由聚合根管理的对象，那么它必须是管理它们的服务。

# utf-8 - Unicode - 正确的做法

> ID：14891157
> 
> 赞同：0
> 
> 时间：2013-02-15T09:02:58.227
> 
> 标签：utf-8

我正在研究处理`UTF-8`编码的东西，我发现自己在问这个问题：

*   当我遇到一个从未在 `UTF-8`编码字符串中出现的字节时，我该怎么办？

IE`0x1111111X`

例如，我正在编写一小段代码，它查看字节流中的当前位置，并告诉您使用多少字节来表示流中该位置的代码点。

*   `0x0XXXXXXX`只有 1
*   `0x10XXXXXX`哎呀，我们在一个连续字节中，向后搜索以找到前导字节
*   `0x11XXXXXX`计算前导 1 的数量，这就是答案
*   `0x1111111X`错误，这是不可能的`UTF-8`！该怎么办！？！？

我正在考虑返回一个错误值，但想知道是否应该将其替换为一些更可预测的错误字形（我的意思是表示所述字形的代码点）。后来当我做一些更复杂的事情时，比如跳过字符串并发现前导字节后面没有正确数量的连续字节......我想我也应该“修复”它。

将错误编码的字符串破坏，或者更改它们并使其错误但至少玩得好，这是标准做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:37:53.627

最常见的方法是在输入不正确时抛出一个有意义的错误并停止。

这样做有很多充分的理由：

*   速度：如果您尝试修复错误，这通常会导致您的功能变慢，即使输入正确也是如此
*   简单：如果您尝试修复任何错误，您的代码可能会变得非常复杂
*   可维护性和正确性：只要输入与您正在使用的规范不匹配，当您停止时，更容易确保函数正常工作。因为您只需根据规范检查输入。
*   目的：任何时候你到了像这里这样的地步，你必须想一想：我的功能的目的是什么？为什么我想出了写它的想法？

    另外：修复 uft8 的函数**fixcode**也可以在其他地方使用，因此将修复分开是完全有意义的（目的、简单性、可维护性和正确性参数）。

    即使您预计会出现错误，我也更愿意将编码和**修复代码**分开，因为您可以在外部上下文中重用**修复代码。**

如果您真的在考虑在编码时修复 utf8 代码，我会使用这样的模式：

```
try {
  q = encode(s);
} catch(encodingerror) {
  log(encodingerror);
  t = fixcode(s);
  q = encode(t);
} 
```

# android - Android NDK，来自预建静态库的标头

> ID：14891158
> 
> 赞同：2
> 
> 时间：2013-02-15T09:02:58.590
> 
> 标签：android, android-ndk, static-libraries

当编译器正在寻找头文件时，我在使用预构建的静态库时遇到问题。

我有一个 .cpp 需要使用静态库中的头文件。我的 Android.mk 如下：

```
include $(CLEAR_VARS)
LOCAL_MODULE := LibA
LOCAL_SRC_FILES := libs/libA.a
include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := hello
LOCAL_SRC_FILES := hello.cpp 
LOCAL_STATIC_LIBRARIES :=  LibA 
include $(BUILD_SHARED_LIBRARY) 
```

hello.cpp 需要一个可以在静态库中找到的头文件，但编译器说它找不到。我是否必须将标题与该静态库分开？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:15:09.790

头文件不包含在静态库中。即使它们是，编译器也无法读取 .a 文件，只有链接器会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T09:30:43.510

在第二步中尝试“LOCAL_LDLIBS”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T23:08:16.430

我不是教授，但我了解到您*总是*需要包含相应的 .h 文件！在这些 .h 文件中，编译器获取“如何使用”这些库的信息，因为它们定义了库中的函数。

祝马丁好运

# asp.net-mvc - ASP MVC 3 呈现部分字符串

> ID：14891160
> 
> 赞同：0
> 
> 时间：2013-02-15T09:03:11.220
> 
> 标签：asp.net-mvc, partial-views, renderpartial

我正在尝试使用此方法将 .ascx 文件呈现为字符串

[如何将部分视图渲染成字符串](https://stackoverflow.com/questions/2537741/how-to-render-partial-view-into-a-string)

它工作正常。但是，如果我尝试渲染的 .ascx 文件包含另一个像这样渲染的 .ascx 文件

```
<%= Html.Partial("Picture/ProfilePicture", pictureThumb)%> 
```

我得到了例外

```
View cannot be null 
```

渲染 ProfilePicture.ascx 时

# tsql - 将 -TSQL 语句 "DATEADD(Day, 0, DATEDIFF(Day, 0, GETDATE()))" 转换为 C#

> ID：14891167
> 
> 赞同：0
> 
> 时间：2013-02-15T09:03:30.790
> 
> 标签：tsql, c#-4.0, linq-to-entities

如何将此 T-SQL 查询转换`DATEADD(Day, 0, DATEDIFF(Day, 0, GETDATE()))`为 C#？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:16:38.413

该 T-SQL 返回今天上午 12 点的日期。（其中[12:00 AM 被认为是午夜](http://en.wikipedia.org/wiki/12-hour_clock#Confusion_at_noon_and_midnight)）
因此一个非常简单的等价物是

```
 DateTime todayDate = DateTime.Today;
 Console.WriteLine(todayDate.ToString()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T09:07:26.340

您可以使用 AddDays 可以添加天数或减去天数

```
DateTime date = DateTime.Today.AddDays(-1).AddDays(+1); 
```

# c# - C++ 中 GUID 的用法：

> ID：14891169
> 
> 赞同：1
> 
> 时间：2013-02-15T09:03:31.593
> 
> 标签：c#, c++, winapi

我想问一下 C++ 中 GUID 的声明是否与 C# 不同。我在 C# 中遇到了这个：

```
GUID InterfaceClassGuid = {0x4d1e55b2, 0xf16f, 0x11cf, 0x88, 0xcb, 0x00, 0x11, 0x11, 0x00, 0x00, 0x30}; 
```

这在 C++ 中可行吗？如果不是，如何转换？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:10:16.207

`GUID`in的定义`<windows.h>`与此语法兼容。它也适用于 C。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:11:08.037

最简单（也很方便）的可能是利用特定于 MS 的[`__declspec(uuid(...))`](https://docs.microsoft.com/en-us/cpp/cpp/uuid-cpp)：

```
class __declspec(uuid("{C1F400A4-3F08-11D3-9F0B-006008039E37}")) NullRenderer;
GUID x = __uuidof(NullRenderer); 
```

这样，您甚至不必在源代码中拆分 GUID 组件，而是将其作为真正的 GUID 声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T09:07:49.547

标准 C++ 中没有定义 GUID 类型。但是，您可以（并且可能某些编译器供应商已经）定义`struct GUID`可以以相同方式初始化的 a。

**编辑**： [微软定义 GUID](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373931%28v=vs.85%29.aspx)如下：

```
typedef struct _GUID {
  DWORD Data1;
  WORD  Data2;
  WORD  Data3;
  BYTE  Data4[8];
} GUID; 
```

使用此定义，您的代码应该可以正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T09:10:36.840

GUID 结构不同于 C#。它被定义

```
typedef struct _GUID 
{  
   DWORD Data1;  
   WORD Data2;  
   WORD Data3;  
   BYTE Data[8];
} GUID; 
```

如果你想把它当作一个变量，你会这样做：

```
GUID guid = {0x4d1e55b2, 0xf16f, 0x11cf, {0x88, 0xcb, 0x00, 0x11, 0x11, 0x00, 0x00, 0x30}}; 
```

试试看，也看看这里：[所以](https://stackoverflow.com/questions/276524/why-is-the-guid-structure-declared-the-way-it-is)

# java - 用于文件创建检测的java代码

> ID：14891176
> 
> 赞同：-2
> 
> 时间：2013-02-15T09:03:56.410
> 
> 标签：java

有人可以帮我吗？

*   我需要一个 java 代码来监听（在运行状态）文件的创建或删除。
*   即，每当创建或删除文件时，运行代码应检测该事件并检索文件路径。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:07:50.640

阅读本教程：[查看更改目录](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)。它会让你开始。另请阅读以下内容：

*   [Java中的目录监听器](https://stackoverflow.com/questions/4941869/directory-listener-in-java)
*   [Java中的文件更改侦听器](https://stackoverflow.com/questions/494869/file-changed-listener-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:11:11.243

“监视注册对象的更改和事件的监视服务。例如，文件管理器可以使用监视服务监视目录的更改，以便在创建或删除文件时更新其文件列表的显示。”
见 [WatchService](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

```
 java.nio.file.FileSystems.getDefault().newWatchService() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:15:23.503

以下链接可能会帮助您满足您的需求：http:

[//jnotify.sourceforge.net/](http://jnotify.sourceforge.net/)

# wordpress - 将 wp_editor 添加到自定义 WP 小部件

> ID：14891177
> 
> 赞同：4
> 
> 时间：2013-02-15T09:03:57.090
> 
> 标签：wordpress, editor, tinymce

我想将带有 TinyMCE 的 WP 编辑器添加到我的自定义文本小部件中，但它不会显示 TinyMCE 按钮，它只显示 textarea。

当我在 page.php 上测试我的代码时，它运行良好 - 编辑器显示所有按钮和元框。

你能告诉我我做错了什么吗？

**编辑**
[小部件屏幕截图](http://cl.ly/image/2x431V3F1D2m)。
[page.php 截图中使用的相同代码](http://cl.ly/image/38240m372J0D)

我使用的代码：

```
$settings = array(
    'wpautop' => true,
    'media_buttons' =>  false,
    'textarea_name' => 'test-editor',
    'textarea_rows' => get_option('default_post_edit_rows', 10),
    'tabindex' => '',
    'editor_css' => '',
    'editor_class' => '',
    'teeny' => true,
    'dfw' => true,
    'tinymce' => array(
          'theme_advanced_buttons1' => 'bold,italic,underline' 
    ),
    'quicktags' => false
);
wp_editor( 'Text in editor', 'test-editor', $settings ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T21:42:55.573

看起来你需要找到另一个所见即所得的编辑器。[阅读 Codex](http://codex.wordpress.org/Function_Reference/wp_editor#Notes)，您的代码有两个问题：

1.  这`$editor_id`

    > 只能由小写字母组成。没有下划线，没有连字符。其他任何事情都会导致 WYSIWYG 编辑器出现故障。

2.  而这个阻止编辑器在元框中工作

    > 一旦实例化，所见即所得编辑器就不能在 DOM 中移动。实际上，这意味着您不能将其放入可以拖动并放置在页面其他位置的元框中。

# html - div设置高度相等

> ID：14891179
> 
> 赞同：0
> 
> 时间：2013-02-15T09:04:28.093
> 
> 标签：html, css

我有 3`div`秒。`div`如果其他高度调整，我怎样才能使它们相等。我希望我所有的`div`s 都调整它的高度，即使它们的内容更少。就像在图像中一样，即使`div`没有数据也必须等于其他数据，并将读取更多设置在底部。

***HTML：***

```
<div class="column-wrapper">
   <div class="column-small border  border-top"> 
      <h3>Features</h3>

      <ul>
         <li>Code blocking</li>
         <li>Code Wrapping</li>
         <li>Code Killing</li>
         <li>Code Sleeping</li>
      </ul>

      <span><a href="#">Read more</a></span>
   </div>

   <div class="column-small border  border-top"> 
      <h3>Modules</h3>

      <ul>
         <li>Barking Around The house</li>
         <li>Loving the Cats</li>
         <li>Floating The points</li>
         <li>Coding The Sleepers</li>
      </ul>

      <span><a href="#">Read more</a></span>
   </div>

   <div class="column-small border  border-top"> 
      <h3>Idont knows</h3>
      <span><a href="#">Read more</a></span>
   </div>
</div> 
```

***CSS：***

```
.column-wrapper {
   padding-top: 20px;
   text-align: center;
   vertical-align: middle;
   width: 100%;
}

.column-wrapper div {
    display: inline-table; 
    margin: 2px;
}

.column-small {
    padding: 10px;
    width: 30%; 
    min-width: 250px; 
    height: auto;
} 

.column-small span {
   float: right;
} 

.column-small ul {
    margin-top: -10px;
    width: 100%; 
    max-width: 240px;
}

.column-small ul li {
    text-align: left;  
}

.column-small li { 
    list-style: none;
    padding: 5px;
    text-indent: -30px;
    word-wrap: break-word;
} 
```

![截屏](../Images/6cf34765abc6642f3546c8d1a0130117.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:27:49.283

***CSS：***

```
.column-wrapper { overflow: hidden; }

.column-small {
   float: left;
   margin: 20px;
   background-color: red;
   padding-bottom: 1000px;
   margin-bottom: -1000px;
}

.column-small span { float: right; }

.column-small ul {
   margin-top: -10px;
   width: 100%;
   max-width: 240px;
}

.column-small ul li { text-align: left; }

.column-small li {
   list-style: none;
   padding: 5px;
   text-indent: -30px;
   word-wrap: break-word;
} 
```

***HTML：***

```
<div class="column-wrapper">
   <div class="column-small border  border-top"> 
      <h3>Features</h3>

      <ul>
         <li>Code blocking</li>
         <li>Code Wrapping</li>
         <li>Code Killing</li>
         <li>Code Sleeping</li>
      </ul>

      <span><a href="#">Read more</a></span>
   </div>

   <div class="column-small border  border-top"> 
      <h3>Modules</h3>

      <ul>
         <li>Barking Around The house</li>
         <li>Loving the Cats</li>
         <li>Floating The points</li>
         <li>Coding The Sleepers</li>
      </ul>

      <span><a href="#">Read more</a></span>
   </div>

   <div class="column-small border  border-top"> 
      <h3>Idont knows</h3>
      <span><a href="#">Read more</a></span>
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T12:28:29.467

第一部分看起来像来自[https://stackoverflow.com/a/10235116/1902425的副本](https://stackoverflow.com/a/10235116/1902425)

到你的第二部分：如果你用 js 做，你的高度是动态计算的，所以你可以发布你的“阅读更多”链接 wir`position: absolute`小例子：

```
<div class="column-small">
      <div class="column-content">
          <h3>Idont knows</h3>
          <p>Your content</p>
      </div>
      <div class="readmore"><a href="#">Read more</a></div>
 </div> 
```

CSS：

```
.column-small {
     position: relative;
     height: 240px;
}
.readmore {
    position: absolute;
    bottom: 10px;
    right: 10px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:07:53.117

设置高度`.column-small div`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:12:53.567

```
.column-small{
    height: inherit !important;
} 
```

# javascript - Javascript - JQuery：找不到 id 和 .html("") 或 getElementById 并设置 innerHTML

> ID：14891180
> 
> 赞同：0
> 
> 时间：2013-02-15T09:04:28.130
> 
> 标签：javascript, jquery, html, getelementbyid

我是 jQuery 新手，无法添加`innerhtml`到 div。

我也试过`getElementById`了`$('').html()`。

我的 javascript

```
var dishes = arg;

var starterDish = dishes[0];
var mainDish = dishes[1];
var dessertDish = dishes[2];

location.href=$('#finishButton').attr('href');
//The new HTML file

alert($('#starterDishName').html());
// will only return unidentified

$('#starterDishName').html(starterDish.name);
$('#starterDishPrep').html(starterDish.description);

$('#mainDishName').html(mainDish.name);
$('#mainDishPrep').html(mainDish.description);

$('#dessertDishName').html(dessertDish.name);
$('#dessertDishPrep').html(dessertDish.description);

run4 = false; 
```

和 finish.html 文件：

```
 </div>
    <div id="starterDishName" align="center"> <h3>blablabla</h3></div>
    <div id="starterDishPrep" align="center"> </div>
    <div id="mainDishName" align="center"> <h3></h3></div>
    <div id="mainDishProp" align="center">  </div>
    <div id="dessertDishName" align="center"> <h3> </h3></div>
    <div id="dessertDishProp" align="center">  </div>
</div> 
```

我认为问题出在：`location.href=$('#finishButton').attr('href');`

并且新的 html 文件不允许我使用 ID 获取？

**问题：** 如何获取新 html 文件的 id 并`innerhtml`从我的代码的角度更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:07:03.480

`var id = document.getElementById('id').innerHTML;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:15:21.660

我假设您在写的 JavaScript 文件中有这个：“*我的 .js* ”。如果您已将它包含在`head`HTML 的 - 部分中，则脚本会立即执行，并且选择器不会知道所有 HTML 元素。使用 jQuery，您可以简单地将所有内容包装到一个闭包中，因为这将在解析 DOM 后执行：

```
$(document).ready(function() {
    // your logic goes here
}); 
```

# python - 如何在浏览器中显示来自 linux 日志文件的行

> ID：14891190
> 
> 赞同：0
> 
> 时间：2013-02-15T09:05:03.457
> 
> 标签：python, linux, django

我从`linux`日志文件中获取行，并使用 django 在 Bowser 中显示。

1.  它们都显示为相同的 paragarah，但我想用新线显示它们
2.  如果我将它们扭曲，它们会显示在 nelwines 中，`<pre> lines </pre>`但是我的 html 标签没有正确呈现

有什么方法可以用正确的换行符和html标签以良好的格式显示它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:19:42.377

您可以使用内置模板标签：

```
{{ lines|linebreaks }} 
```

或者

```
{{ lines|linebreaksbr }} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:20:01.280

尝试使用`linebreaks`或`linebreakbr`过滤器。来自[django 参考](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaks)

```
linebreaks
Replaces line breaks in plain text with appropriate HTML; a single newline becomes an 
HTML line break (<br />) and a new line followed by a blank line becomes a paragraph 
break (</p>). 
```

例如：

```
{{ value|linebreaks }}
  If value is Joel\nis a slug, the output will be <p>Joel<br />is a slug</p>. 
```

你也可以使用`linenumbers`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:21:35.360

您可以尝试将换行符转换为`<br />`标签

有一个有用的 Django 过滤器[https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaks](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#linebreaks)

```
{{ value|linebreaks }} 
```

# c# - 在 Windows 窗体中将数据库列添加到组合框

> ID：14891192
> 
> 赞同：0
> 
> 时间：2013-02-15T09:05:05.873
> 
> 标签：c#, winforms, combobox

在我的 winodws 应用程序中，我想在组合框中添加表格的一列。

下面的代码从数据库中获取产品名称作为数据集。

```
public DataSet GetAllItems()
{
    DataSet dataSet = new DataSet();
    // Create connection object
    OleDbConnection oleConn = new OleDbConnection(connString);
    try
    {
        oleConn.Open();
        string sql = "SELECT [Product Name] FROM [Product]";
        OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
        dataAdapter.Fill(dataSet, "Product");
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
    }
    finally
    {
        oleConn.Close();
    }
    if (dataSet.Tables.Count <= 0)
        return null;
    else
        return dataSet;
} 
```

现在我如何将数据集中的这些项目添加到组合框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:12:08.950

尝试：

```
DataSet ds = GetAllItems();
YourcomboBox.DataSource = ds.Tables[0];
YourcomboBox.DisplayMember = "Product Name"; 
```

# c# - 刷新数组元素

> ID：14891195
> 
> 赞同：-3
> 
> 时间：2013-02-15T09:05:09.120
> 
> 标签：c#, .net

我正在使用数组控件，我在其中一一保存值。

现在我必须删除其中一个元素并同时刷新它。

例如....

```
string[] arr= new string(25);

arr[0]="A";
arr[1]="B";
arr[2]="C"; and so on.... 
```

现在通过删除第二个元素后`arr[1]=null;`

我想要如下所述的刷新数组...

```
arr[0]="A";
arr[1]="C"; and so on.... 
```

请帮忙...

提前致谢，，，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T09:07:07.533

听起来您应该使用 a`List<string>`而不是数组，这将提供您所描述的功能。

尽管可以调整数组的大小（感谢@Austin Brunkhorst），但这并不“便宜”，您需要自己移动所有东西。

应该注意的是，有大量的插入和删除列表会变得非常低效，所以你最好使用`LinkedList<string>`. 这些都有优点和缺点。谷歌`linked list`了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:07:25.210

如果要调整数组的大小，则必须创建一个新元素并将所有元素从旧元素复制到新元素。

```
arr = arr.Where(s => s != null).ToArray(); 
```

如果您要使用 a ，则`List<string>`可以使用[`List.Remove`](http://msdn.microsoft.com/en-us/library/vstudio/cd666k3e.aspx)or之类的方法[`List.RemoveAt`](http://msdn.microsoft.com/en-us/library/vstudio/5cw9x18z.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T09:08:54.667

当你有一个静态数据量时，你应该使用数组，但是当你有动态数据量时，你应该使用 List<>。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-15T09:08:36.570

如果您要在集合中的任意位置添加/删除条目很多，最好使用 a`LinkedList<string>`代替

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T09:10:27.533

您可以使用 List 而不是 Array

```
List<int> list = new List<int>();
list.Add(2);
list.Add(3);
list.Add(5);
list.Add(7); 
```

你会得到更多的选择，比如

[包含](http://www.dotnetperls.com/list-contains)

[存在](http://www.dotnetperls.com/list-exists)

[指数](http://www.dotnetperls.com/list-indexof)

[对于删除项目](http://www.dotnetperls.com/list)，您将获得以下功能

[删除](http://www.dotnetperls.com/list-remove) 前：dogs.Remove("bulldog"); // 移除斗牛犬

[RemoveAt](http://www.dotnetperls.com/removeat) 例如：list.RemoveAt(1);

[移除所有](http://www.dotnetperls.com/removeall)

# javascript - Jquery如何添加最后输入的字符

> ID：14891197
> 
> 赞同：8
> 
> 时间：2013-02-15T09:05:14.293
> 
> 标签：javascript, jquery, keydown

我做了这个代码：

```
$('.change').keydown(function(){
    var value = $(this).val();
    var id = $(this).attr('id');

    $('.'+id).text(value);
}); 
```

它工作正常，有 1 个缺陷。当我输入内容时，它不会更新我最后插入的字符。因此，当我开始输入“测试用例”时，尽管它以“测试用例”停止，但 div 填充得很好。如您所见，我缺少最后一个字符。

我怎样才能做到这一点，以便添加最后一个字符？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-15T09:06:37.423

您应该使用事件 keyup 而不是 keydown。

然后它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:10:38.390

将事件更改为`keyup`它将起作用...

```
$('.change').keyup(function(){
    var value = $(this).val();
    var id = $(this).attr('id');
    $('.'+id).text(value);
}); 
```

小提琴：http: [//jsfiddle.net/RYh7U/84/](http://jsfiddle.net/RYh7U/84/)

# php - 又一个奇怪的最大执行时间超过了 0 秒，而这次是 pg_query()

> ID：14891201
> 
> 赞同：3
> 
> 时间：2013-02-15T09:05:29.813
> 
> 标签：php, postgresql

我有一个 php 脚本处理数据库中的一些大数据。它从表中取出 N（尝试从 100 到 100000）行并将其插入其他表。`max_execution_time`设置为 0。每次迭代都包含在事务中。选择我使用的每个部分时`pg_query()`。但 1-2 小时后，我的脚本失败`Maximum execution time of 0 seconds exceeded`，错误消息指向`pg_query()`. 有人有这个问题吗？有什么治疗方法吗？

**更新**：

[尝试过这里](https://stackoverflow.com/questions/10853220/zend-lucene-fatal-error-maximum-execution-time)提出的答案——将 max_input_time 设置为 -1——仍然没有运气。错误从`pg_query`一行移动到另一行，这似乎是一个非常随机的错误。所以`pg_query`我想与那无关，以及`max_input_time`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:27:45.417

`max_execution_time = 0`意味着*永远运行*。

但是，可能还有其他事情可能会阻止您的脚本。例如 apache 的默认脚本执行超时时间为 5 分钟。

看到这个：[是 ini_set('max_execution_time', 0) 一个坏主意吗？](https://stackoverflow.com/questions/4306605/is-ini-setmax-execution-time-0-a-bad-idea)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-20T17:23:43.547

你从哪里得到这个设置？从 php.ini 文件？如果是这样，请在您的项目代码中搜索`ini_set`'，它们具有更高的优先级。我敢打赌，有一个默默地爬进来。

# asp.net - 在 Umbraco 网站中创建子域

> ID：14891206
> 
> 赞同：2
> 
> 时间：2013-02-15T09:05:48.870
> 
> 标签：asp.net, subdomain, umbraco, web-deployment

我的网站 URL 是这样的 www.mydomain.com。这个 URL 绑定到我的主节点。现在我有一个名为“test”的子节点。我希望这个节点的 url 像 www.test.mydomain.com。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:08:06.227

右键单击要为其分配 URL 的节点，然后选择“管理主机名”：

![在此处输入图像描述](../Images/4785162fa658fbb389629248a31d4758.png)

然后，使用弹出表单，输入您的 URL，选择一种语言并选择“添加新域”以保存更改：

![在此处输入图像描述](../Images/702cadf7edfdb58c16f4b1d2ec52e6c5.png)

[希望这些图像都出来了，因为我看不到它们。]

# c# - 在 WCF 应用程序中定义和使用全局通用列表

> ID：14891207
> 
> 赞同：0
> 
> 时间：2013-02-15T09:05:59.830
> 
> 标签：c#, asp.net, wcf

我正在从一个 asp.net 站点向我的 WCF 服务器发送一些单独的消息。

这些消息是单独发送的，我需要服务器来接收它们，并将它们“缝合”在一起。

我想要做的是将这些方法放在一个全局列表中，然后在不同的类中使用该列表来做我的竞标。

到目前为止，我已经...

`variables.cs`

```
class variables
{
    public static List<string> MessageStitches { get; set; } 
} 
```

`Program.cs`

```
if (!string.IsNullOrEmpty(node))
{
    variables.MessageStitches.Add(node);
} 
```

但我收到此错误：

`Object reference not set to an instance of an object.`

谁能看到我哪里出错了，以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:10:04.820

您尚未将该`variables.MessageStitches`属性设置为新列表。

您有多种选择，但对您来说最好的选择几乎肯定是 1 或 2。

1 - 在 的构造函数中分配一个新列表`variables`。但是，由于您的列表是静态的，这实际上对您没有帮助，因为您可能尚未实例化您的`variables`类，因此您的构造函数将不会运行。你可以有一个[静态构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)：

```
class variables
{
    public static List<string> MessageStitches { get; set; } 

    // Static constructor
    static variables()
    {
        MessageStitches = new List<string>();
    }
} 
```

2 - 不要使用自动属性。相反，为您的属性设置一个[支持字段](http://msdn.microsoft.com/en-gb/library/ms173118.aspx)，在初始化时为其分配一个值：

```
public class variables
{
    private static List<string> messageStitches = new List<string>();
    public static List<string> MessageStitches 
    { 
        get
        {
            return messageStitches;
        }
        set
        {
            messageStitches = value;
        } 
    } 
```

3 - 使用前检查列表以确保它不为空，如果是，则分配一个新列表。同样，这将不是线程安全的，除非您采取措施使其如此（例如，通过进入[临界区](http://en.wikipedia.org/wiki/Critical_section)）

```
if (!string.IsNullOrEmpty(node))
{
    if (variables.MessageStitches == null)
    {
        variables.MessageStitches = new List<string>();
    }
    variables.MessageStitches.Add(node);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:12:41.850

在 Variable.cs 中定义一个构造函数，例如：

```
public variables()
{
  MessageStitches = new List<string>();
} 
```

或者你可以这样做：

```
variables.MessageStitches = new List<string>();
variables.MessageStitches.Add(node); 
```

# jquery - Jquery Cookie 插件和重定向

> ID：14891209
> 
> 赞同：0
> 
> 时间：2013-02-15T09:06:03.830
> 
> 标签：jquery, cookies, jquery-cookie

我有以下代码可以正常工作但按预期执行：

```
$(".switch_org").click(function(e){

    var id = $(this).attr('id');        
    var orgID = id.split("_");

    e.preventDefault();

    $.cookie('current_organisation', orgID[1], { expires: 1, path: '/' });
    window.location.replace("index.php");

}); 
```

设置的**cookie 工作正常**，但页面**没有重定向到 index.php**，它只是重新加载同一页面。难道我做错了什么？我可以添加一个额外的步骤以便它重定向到 index.php 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:11:13.863

不要使用window.location.replace，直接赋值给

`window.location`

或者

```
windows.location.href 
```

# html - Html：在新窗口中打开页面。target="_blank" - 这是一个错字吗？

> ID：14891211
> 
> 赞同：2
> 
> 时间：2013-02-15T09:06:16.260
> 
> 标签：html, window, target

我找到了（带有字母**c**）

```
target="_blanck" 
```

而不是预期

```
target="_blank" 
```

在别人写的项目中。它可以工作并在新窗口中打开一个链接。这是一个错字还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:08:26.137

是的，这是一个错字

```
target="_blank" 
```

将在新窗口中打开

```
target="_blanck" 
```

将在名为blank的选项卡中打开，如果没有名为blank的选项卡，它将打开一个新选项卡。

我的猜测是，如果您单击该链接，它将在新窗口中打开，再次单击它，它将重新加载之前打开的相同选项卡

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:31:30.530

该`target`属性是指链接内容将在浏览器中加载的位置。浏览器会将页面内容放在具有该名称的窗口/框架内，只要它不是特殊值`_blank`、`_self`或. 请参阅 w3 规范中的[框架目标引用](http://www.w3.org/TR/html4/types.html#h-6.16)部分。`_top``_parent`

> 除了下面列出的保留名称外，帧目标名称（%FrameTarget；在 DTD 中）必须以字母字符 (a-zA-Z) 开头。用户代理应该忽略所有其他目标名称。
> 
> 以下目标名称是保留的并具有特殊含义。
> 
> **_blank**用户代理应该在一个新的、未命名的窗口中加载指定的文档。
> **_self**用户代理应该将文档加载到与引用此目标的元素相同的框架中。
> **_parent**用户代理应该将文档加载到当前框架的直接 FRAMESET 父级中。如果当前帧没有父帧，则此值等效于 _self。
> **_top**用户代理应该将文档加载到完整的原始窗口中（从而取消所有其他框架）。如果当前帧没有父帧，则此值等效于 _self。

所以，如果链接应该总是打开一个新窗口，它应该是`_blank`. 如果有多个相同的链接，`target=_blanck`如果它们应该总是替换同一个窗口的内容，那么可能是故意这样。

看到[这个小提琴](http://jsfiddle.net/Qypzz/1/)：

```
<a href="http://www.stackoverflow.com" target="_blank">This opens SO always in a new window</a>
<a href="http://www.google.com" target="_blanck">This opens google in a given window</a>
<a href="http://www.stackoverflow.com" target="_blanck">This opens SO in the same given window</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:10:12.430

正确的方法是： `<a href="/" target="_blank">Home</a>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T14:58:24.587

在 HTML 中提供超链接的主要方法是，

```
<a href="url" target="_blank">CLick Here ...</a> 
```

HTML标签和href在哪里，目标是属性。如果你写 target="_blanck" 这意味着你有一个名为 _blanck 的 HTML 页面，它会给你错误。

# delphi - 用户在运行时移动形状

> ID：14891214
> 
> 赞同：1
> 
> 时间：2013-02-15T09:06:19.757
> 
> 标签：delphi, delphi-xe2

我有一个名为 MachineShapes 的单元，上面有一个 TShape 类型。我正在尝试获取它，因此当用户单击形状时，他们可以移动它。我认为我很接近，但有点困惑。谢谢你的帮助

机器形状

```
 unit MachineShape;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, extctrls,myDataModule,Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls;

type

TMachine = class(TShape)
  private
    { Private declarations }
    FOnMouseDown : TNotifyEvent;
    FOnMouseUp: TNotifyEvent;
    FonMouseMove: TNotifyEvent;
    procedure ControlMouseDown(Sender: TObject;
                             Button: TMouseButton;
                             Shift: TShiftState;
                             X, Y: Integer);
    procedure ControlMouseMove(Sender: TObject;
                             Shift: TShiftState;
                             X, Y: Integer);
    procedure ControlMouseUp(Sender: TObject;
                           Button: TMouseButton;
                           Shift: TShiftState;
                           X, Y: Integer);

  private
    inReposition : boolean;
    oldPos : TPoint;
  Protected
      procedure DoMouseDown; virtual;
      procedure DoMouseUp; Virtual;
      procedure DoMouseMove; virtual;
  Published
      property OnMouseDown: TNotifyEvent Read FOnMouseDown Write fOnMouseDown;
      property OnMouseMove: TNotifyEvent Read FOnMouseMove write fOnMouseMove;
      Property onMouseUp : TNotifyEvent Read FOnMouseUp write FOnMouseUp;
  public
    { Public declarations }

  end;
implementation

uses
  deptlayout;

    procedure TMachine.ControlMouseMove(Sender: TObject; Shift: TShiftState; X: Integer; Y: Integer);
    const
        minWidth = 20;
        minHeight = 20;
    var
        newPos: TPoint;
        frmPoint : TPoint;
    begin
      if inReposition then
      begin
        with TWinControl(Sender) do
        begin
          GetCursorPos(newPos);
            Screen.Cursor := crSize;
            Left := Left - oldPos.X + newPos.X;
            Top := Top - oldPos.Y + newPos.Y;
            oldPos := newPos;
        end;
      end;
    end;

    procedure TMachine.ControlMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X: Integer; Y: Integer);
    begin
      if inReposition then
        begin
          Screen.Cursor := crDefault;
          ReleaseCapture;
          inReposition := False;
        end;

    end;

    procedure TMachine.ControlMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X: Integer; Y: Integer);
    begin
        inReposition:=True;
        SetCapture(TWinControl(Sender).Handle);
        GetCursorPos(oldPos);
    end;

    procedure tmachine.DoMouseDown;
    begin
        if assigned(fonmousedown) then
          fonmousedown(self);
    end;

    procedure tmachine.DoMouseUp;
    begin
        if assigned(fonmouseup) then
          fonmouseup(self);
    end;

    procedure tmachine.domousemove;
    begin
        if assigned(fonmousemove) then
          fonmousemove(self);
    end;

end. 
```

我怎么称呼它。。

```
 procedure TFGetZoneDept.CreateShape(Sender: TObject);
var
  machine : TMachine;
begin

  //creates the shape
        machine := MachineShape.TMachine.Create(fdeptlayout); //form to create shape on
        machine.Parent := fdeptlayout; //form to add shape to
        machine.OnMouseDown := machinemouseDown;
        machine.OnMouseUp := machinemouseUp;
        machine.OnMouseMove:= machinemouseMove;
end;

procedure TFGetZoneDept.MachineMouseDown(Sender: TObject);
var
  machine: TMachine;
begin
   machine := Sender as TMachine;
end;

procedure TFGetZoneDept.MachineMouseUp(Sender: TObject);
var
  machine: TMachine;
begin
  machine := Sender as TMachine;
end;

procedure TFGetZoneDept.machineMouseMove(Sender: TObject);
var
  machine: TMachine;
begin
  machine := sender as Tmachine;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:25:16.720

形状不是 Wincontrol，也没有句柄，你可以做类似的事情......

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls;

type

  TMachine=Class(TShape)
    private
    FX,FY:Integer;
    Procedure MyMouseDown(var msg:TWMLButtonDown);message WM_LButtonDown;
    Procedure MyMouseMove(var msg:TWMMouseMove);message WM_MouseMove;
  End;

  TForm1 = class(TForm)
    procedure FormCreate(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
    FX,FY:Integer;
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
{ TMachine }

procedure TMachine.MyMouseDown(var msg: TWMLButtonDown);
begin
   inherited;
   FX := msg.XPos;
   FY := msg.YPos;
end;

procedure TMachine.MyMouseMove(var msg: TWMMouseMove);
begin
   inherited;
   if ssLeft in KeysToShiftState(msg.Keys) then
    begin
      Left := Left+  msg.XPos -FX;
      Top := Top + msg.YPos -FY;
    end;

end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  With TMachine.Create(self) do
    begin
      Parent := Self;
      Width := 200;
      Height := 200;
    end;
end;

end. 
```

# mysql - 具有多个条件的左连接表

> ID：14891215
> 
> 赞同：3
> 
> 时间：2013-02-15T09:06:23.163
> 
> 标签：mysql, join

我正在为一个查询而苦苦挣扎。我需要`LEFT JOIN`两个表，其中特定 id 匹配且日期不同：

```
SELECT
    *
FROM
    u_data ud
JOIN
    u_contracts uc
ON
    uc.user_id = ud.id
LEFT JOIN
    u_transactions ut
ON
    ut.contract_id = uc.id
    /* AND DATE( ut.add_timestamp ) > DATE( ud.suspicious ) */
WHERE
    ud.suspicious > 0
    AND ud.suspicious != ''
    AND ud.suspicious IS NOT NULL
    AND uc._status = 6
GROUP BY
    ud.id; 
```

这给了我正确的行数，但我还需要检查交易日期是否大于第一个表中的可疑日期。一旦我添加了该条件（在开始时也尝试过），它就会消除所有没有交易日期的字段。

意思是，如果我`LEFT JOIN`是那些表，我会得到这样的结果：

```
+-----+----------+---------------+---------------+--------+
| row | original | ud.suspicious | add_timestamp | amount |
+-----+----------+---------------+---------------+--------+
|   1 |      100 | 10.01.2000    | 01.01.2000    |     50 |
|   2 |      100 | 10.01.2000    | NULL          | NULL   |
|   3 |      100 | 10.01.2000    | 12.01.2000    |     10 |
|   4 |      100 | 11.01.2000    | 12.01.2000    |     20 |
|   5 |      100 | 12.01.2000    | 12.01.2000    |     30 |
+-----+----------+---------------+---------------+--------+ 
```

现在，我基本上需要消除 的金额和日期`01.01.2000`，因为它比可疑日期更早，我不需要*额外*的金额，但我需要原来的。这是我需要得到的

```
+-----+----------+---------------+---------------+--------+
| row | original | ud.suspicious | add_timestamp | amount |
+-----+----------+---------------+---------------+--------+
|   1 |      100 | 10.01.2000    | NULL          | NULL   |
|   2 |      100 | 10.01.2000    | NULL          | NULL   |
|   3 |      100 | 10.01.2000    | 12.01.2000    |     10 |
|   4 |      100 | 11.01.2000    | 12.01.2000    |     20 |
|   5 |      100 | 12.01.2000    | 12.01.2000    |     30 |
+-----+----------+---------------+---------------+--------+ 
```

但是当我设置这个条件时，`DATE( ut.add_timestamp ) > DATE( ud.suspicious )`我得到了这个：

```
+-----+----------+---------------+---------------+--------+
| row | original | ud.suspicious | add_timestamp | amount |
+-----+----------+---------------+---------------+--------+
|   1 |      100 | 10.01.2000    | 12.01.2000    |     10 |
|   2 |      100 | 11.01.2000    | 12.01.2000    |     20 |
|   3 |      100 | 12.01.2000    | 12.01.2000    |     30 |
+-----+----------+---------------+---------------+--------+ 
```

为什么要删除条目，`LEFT JOIN`我该如何解决这个问题以获得我需要的正确数据？

* * *

***编辑：***完整的原始工作查询：

```
SELECT
    ud.Pcode AS pcode
    , CONCAT( ud.Name, ' ', ud.Surname ) AS name
    , CONCAT(
        ud.Da_CityName,
        IF ( ud.Da_Street != '', CONCAT( ', ', ud.Da_Street ), '' ),
        IF ( ud.Da_Housen != '', CONCAT( ', ', ud.Da_Housen ), '' ),
        IF ( ud.Da_Flatn != '', CONCAT( ', ', ud.Da_Flatn ), '' ),
        IF ( ud.Da_PostIndex != '', CONCAT( ', ', ud.Da_PostIndex ), '' )
    ) AS address
    , uc.id AS contract_id
    , uc.terminate_date AS terminate_date
    , FORMAT( IF ( (
        SELECT
            SUM( external_account )
        FROM
            u_transactions
        WHERE
            contract_id = uc.id 
            AND nulled = 0
            AND type in ( 'penalty', 'initial', 'comission', 'penalty2', 'penalty2_vat' )
            AND DATE( add_timestamp ) > DATE( ud.suspicious )
    ) IS NULL, uc.inkasso_debt, uc.inkasso_debt - (
        SELECT
            SUM( external_account )
        FROM
            u_transactions
        WHERE
            contract_id = uc.id 
            AND nulled = 0
            AND type in ( 'penalty', 'initial', 'comission', 'penalty2', 'penalty2_vat' )
            AND DATE( add_timestamp ) > DATE( ud.suspicious )
    ) ), 2 ) AS summ
FROM
    u_data ud
JOIN
    u_contracts uc
ON
    uc.user_id = ud.id
WHERE
    ud.suspicious > 0
    AND ud.suspicious != ''
    AND ud.suspicious IS NOT NULL
    AND uc._status = 6
    AND DATE( uc.terminate_date ) < ( NOW() - INTERVAL 45 DAY ) 
```

由于它太乱了，我试图摆脱两个子选择并加入它们以获得`SUM( external_account )`数量。也许这将有助于理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:24:52.197

我认为它在 u_transaction 和 amount 中给出了 NULL，因为您使用 AND 和 ON 条件，尝试将它放在 where 子句中，看看会发生什么。

尝试这个

```
SELECT
    *
FROM
    u_data ud
JOIN
    u_contracts uc
ON
    uc.user_id = ud.id
LEFT JOIN
    u_transactions ut
ON
    ut.contract_id = uc.id

WHERE
    ud.suspicious > 0
    AND ud.suspicious != ''
    AND ud.suspicious IS NOT NULL
    AND uc._status = 6
    AND DATE( ut.add_timestamp ) > DATE( ud.suspicious )
GROUP BY
    ud.id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:19:26.340

尝试：

```
SELECT
    row, original, ud.suspicious, isnull(u_transaction, '') as u_transaction, isnull(amount, '')
FROM
    u_data ud
JOIN
    u_contracts uc
ON
    uc.user_id = ud.id
LEFT JOIN
    u_transactions ut
ON
    ut.contract_id = uc.id
    AND DATE( ut.add_timestamp ) > DATE( ud.suspicious )
WHERE
    ud.suspicious > 0
    AND ud.suspicious != ''
    AND ud.suspicious IS NOT NULL
    AND uc._status = 6
GROUP BY
    ud.id; 
```

不确定它是否会起作用，没有时间尝试，但我记得有类似的问题并像那样解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:47:32.040

尝试

```
...
RIGHT JOIN u_transactions ut
ON ut.contract_id = uc.id
AND ( DATE( ut.add_timestamp ) > DATE( ud.suspicious )
      OR ut.add_timestamp IS NULL )
... 
```

在您的查询中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:46:34.917

如果您需要的是输出中的 NULL 字符串，请在您的 select 语句中添加一个 IF 语句。

```
SELECT
  IF(
     DATE( ut.add_timestamp ) < DATE( ud.suspicious ),
     'NULL',
     ud.add_timestamp
    ) AS add_timestamp
FROM
  -----Rest of the query----- 
```

根据您更新的帖子，以下是我的查询版本。如果此查询不能解决您的问题，如果您可以在 sqlfiddle.com 中创建表结构，这将非常有帮助。

```
SELECT  

  FORMAT(
     IF(                
            SUM(external_account) IS NULL,                                  
            uc.inkasso_debt,
            uc.inkasso_debt -  SUM( external_account)
    ), 2) AS summ

FROM
    u_data ud
    JOIN u_contracts uc ON uc.user_id = ud.id
    LEFT JOIN u_transactions ON (   
                               u_transactions.contract_id = uc.id                                                                        
                               AND nulled = 0                                                                          
                               AND (type in ( 'penalty', 'initial', 'comission', 'penalty2', 'penalty2_vat' ))
                               AND DATE(u_transactions.add_timestamp ) > DATE( ud.suspicious )                                                                  
                            )                                                                     

WHERE
  ud.suspicious > 0   
  AND uc._status = 6
  AND DATE( uc.terminate_date ) < ( NOW() - INTERVAL 45 DAY )

GROUP BY
  ud.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T22:13:33.353

您不能期望带有 OUTER 连接的 OR 条件返回正确的结果。由于您的比较列中有 NULL，因此对于任何比较它都不会返回“true”，因为它在技术上表示“无价值”。对于您的情况，您可能需要在评估连接条件之前将 NULL 替换为始终为 true 的值。像下面的东西..

LEFT JOIN u_transactions ut ON ut.contract_id = uc.id AND ( isnull(DATE(ut.add_timestamp),DATEADD(dd,1,DATE(ud.suspicious))) > DATE(ud.suspicious)

# javascript - 如何将数据表与动态创建的表一起使用

> ID：14891216
> 
> 赞同：5
> 
> 时间：2013-02-15T09:06:28.113
> 
> 标签：javascript, jsp, datatables

我有一个 jsp，它 onload 调用一个动态创建表的 js。情况是我之前从未在 jquery 上工作过，我只知道 javascript。

我做了两个场景：

案例一：当我在 jsp 页面本身上创建静态表时，它可以完美地工作。案例二：当我尝试加载由动态 javascript 创建的同一个表时，它失败了。

案例一工作代码

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JSP Page</title>
<script  src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/createDynamicTable.js"></script>
<script type="text/javascript" src="../js/jquery.dataTables.js"></script>

<script>
$(document).ready(function() {
$('#testTable').dataTable();
}); 

</script>
</head>
<body>

<div id="tableDataDiv">
<table id="testTable">
<thead>                   
<th>h1</th>
<th>h2</th>
<th>h3</th>                   
</thead>

<tbody>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>4</td>
<td>5</td>
<td>6</td>
</tr>
<tr>
<td>7</td>
<td>8</td>
<td>9</td>
</tr>
</tbody>
</table>
</div>
</body>
</html> 
```

案例二不工作代码

jsp代码

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JSP Page</title>
<script  src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/createDynamicTable.js"></script>
<script type="text/javascript" src="../js/jquery.dataTables.js"></script>

<script>
$(document).ready(function() {
$('#testTable').dataTable();
}); 

</script>
</head>
<body onload="getTableData();">

<div id="tableDataDiv">

</div>
</body>
</html>

js code

function getTableData(){

var tableDataDivObj = document.getElementById("tableDataDiv");

var tableObj = document.createElement("table");
tableObj.id = 'testTable';

// header
var theadObj = document.createElement("thead");

var thObj = document.createElement("th");
thObj.innerHTML = 'h1';
theadObj.appendChild(thObj);

thObj = document.createElement("th");
thObj.innerHTML = 'h2';
theadObj.appendChild(thObj);

thObj = document.createElement("th");
thObj.innerHTML = 'h3';
theadObj.appendChild(thObj);

tableObj.appendChild(theadObj);

// body
var tbodyObj;
var trObj;
var tdObj;
tbodyObj = document.createElement("tbody");

var count = 1;
for(i = 0; i < 3; i++){
trObj = document.createElement("tr");

for(j = 0; j < 3; j++){
tdObj = document.createElement("td");
tdObj.innerHTML = count;
trObj.appendChild(tdObj);
count++;
}

tbodyObj.appendChild(trObj);
}

tableObj.appendChild(tbodyObj);

tableDataDivObj.appendChild(tableObj);
} 
```

动态创建表后，我们将其附加到 jsp 页面上的 div 中。

请提出任何修改和建议，以便我可以使此代码正常工作。这只是我创建的真实应用程序的一个示例。其中涉及完整的 mvc，其中表数据是从服务方法和 dao 文件中检索的。我能够将数据放入表中（我确保在 jsp 页面上收到警报后）。我无法在表的 id 上使用数据表。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:13:21.740

当您的 dataTables 初始化运行时，该表不存在是的。`$('#testTable').dataTable();`您可以通过在表初始化后移动来修复。

```
$(tableObj).dataTable(); 
```

在`getTableData`函数的末尾（应该在你的`$(document).ready`回调中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T11:12:05.997

你可以在javascript中将数据表添加到您动态创建的表中。代码如下：

```
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/css/jquery.dataTables.css">
<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.2.min.js"></script>
<script type="text/javascript" charset="utf8" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.4/jquery.dataTables.min.js"></script>
function createTable(){

var myTableDiv = document.getElementById("box");
var table = document.createElement('TABLE');
table.id='tableId'
table.border='1';

var header = table.createTHead();
var row = header.insertRow(0);
var cell = row.insertCell(0);
var cell1 = row.insertCell(1);
var cell2 = row.insertCell(1);
var cell3 = row.insertCell(1);
cell.innerHTML = "<b>Name</b>";
cell1.innerHTML = "<b>Age</b>";
cell2.innerHTML = "<b>Email</b>";
cell3.innerHTML = "<b>address</b>";

var tableBody = document.createElement('TBODY');
table.appendChild(tableBody);

for (var i=0; i<3; i++){
var tr = document.createElement('TR');
tableBody.appendChild(tr);

for (var j=0; j<4; j++){
   var td = document.createElement('TD');
   td.width='75';
   td.appendChild(document.createTextNode("Cell " + i + "," + j));
   tr.appendChild(td);
}
}
myTableDiv.appendChild(table);
$("#tableId").dataTable();
}
</head>
<body>
<input type="button" onclick="createTable();" value="CreateTable" /></br>
<div id="box">
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:16:53.663

您可以在此处找到如何动态创建的示例：http: [//datatables.net/release-datatables/examples/data_sources/js_array.html](http://datatables.net/release-datatables/examples/data_sources/js_array.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:16:06.530

一旦您的表由动态 javascript 创建，请调用 jquery 方法。

# objective-c - Objective C 方法检索图像

> ID：14891218
> 
> 赞同：1
> 
> 时间：2013-02-15T09:06:33.557
> 
> 标签：objective-c, methods, uiimageview, uiimage

我很确定这是一个简单的解决方法，但它太具体了，我不知道在哪里可以找到答案……我想创建一个方法，从执行它的对象中检索和使用 UIImage。

这是调用以 imageView 作为对象的方法的行。

```
[self performSelector:@selector(method:) withObject:self.imageView afterDelay:0.0]; 
```

这就是方法...

```
- (void) method:(UIImage *) image {

if ([image isEqual:image1]){
    x = 1;
}
if ([image isEqual:image2]){
    x = 2;
}
if ([image isEqual:image3]){
    x = 3;
}
if ([image isEqual:image4]){
    x = 4;
}
if ([image isEqual:image5]){
    x = 5;
} 
```

...我是否以正确的方式解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:26:52.187

使用此方法

```
[self performSelector:@selector(method:) withObject:self.imageView.view afterDelay:0.0]; 
```

您`UIImageview`作为参数而不是传递`UIImage`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:28:23.813

要从 UIImageView 对象中检索 UIImage 你应该使用

```
[self.imageView image]; 
```

如果你想创建一个方法，从执行它的对象中检索和使用 UIImage。（我猜你正在使用 UIImageView 对象......）你应该继承或添加类别到 UIImageView 并向它添加这样的方法

```
- (void) method {
   UIImage* image = [self image];
   //do whatever you want with the image
   //...
} 
```

作为替代方案，您可以将 UIImageView 传递给该方法并让它检索图像，然后将其用于任何目的

```
- (void) method:(UIImageView*)imageView {
   UIImage* image = [imageView image];
   //do whatever you want with the image
   //...
} 
```

# c# - c# ReportView中的复杂图表

> ID：14891220
> 
> 赞同：1
> 
> 时间：2013-02-15T09:06:36.767
> 
> 标签：c#, charts, reporting

我需要像这样在**ReportView中制作****图表**：

 **![在此处输入图像描述](../Images/2d3bb56291c729faf81a6c84d1135bbf.png)

我需要在一张**图表中有****两条**不同**数据源**的线。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T09:43:50.840

Visifire 具有在报表视图中创建此复杂图表的功能。您可以尝试在报表视图中添加[Visifire图表。](http://www.visifire.com/wpf_charts.php)Chart 可以接受 N 个 DataSeries，其中每个 DataSeries 是一个线/样条图。可以为每个 DataSeries 设置 DataSource。

**例子：**

![在此处输入图像描述](../Images/055cb6be25792212d8b7f74130828be6.png)****

# xml - Magento - 产品评论未显示在 view.phtml 上

> ID：14891224
> 
> 赞同：0
> 
> 时间：2013-02-15T09:06:41.830
> 
> 标签：xml, magento, view, product, review

我正在尝试在产品视图页面 (view.phtml) 上显示产品评论和表单我查看了一些论坛帖子并尝试过：

在 catalog.xml 中查找

```
<catalog_product_view translate="label"> 
```

并寻找内容：

```
<reference name="content"> 
```

在这里，我输入了代码：

```
<block type="review/product_view_list" name="product.info.product_additional_data" as="reviews" template="review/product/view/list.phtml"/>

<block type="review/product_view_list" name="product.info.product_additional_data" as="product_additional_data" template="review/product/view/list.phtml">
                <block type="review/form" name="product.review.form" as="review_form">
                    <block type="page/html_wrapper" name="product.review.form.fields.before" as="form_fields_before" translate="label">
                        <label>Review Form Fields Before</label>
                        <action method="setMayBeInvisible"><value>1</value></action>
                    </block>
                </block>
 </block> 
```

在 view.phtml 我添加了

```
<?php echo $this->getChildHtml('product_additional_data') ?>
<?php echo $this->getChildHtml('reviews') ?> 
```

我得到一个空的地方，这是假设显示评论信息的地方。我有标签工作我想做的只是在该标签中显示评论表单和评论。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-08T14:33:45.883

我不确定为什么会这样，但我遇到了同样的问题。当我像这样在 catalog.xml 的产品视图部分中引用评论表单和评论时，它对我有用。

```
 <block type="review/product_view_list" name="review.product_view_list" as="product_view_list" template="review/product/view/list.phtml"/>
   <block type="review/form" name="product.review.form" as="review_form" /> 
```

我像这样从 view.phtml 调用它们

```
 <?php echo $this->getChildHtml('review_form') ?>
    <?php echo $this->getChildHtml('product_view_list') ?> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-28T10:40:36.010

编辑**local.xml**

```
<catalog_product_view>
    <reference name="content">
        <block type="review/product_view_list" name="review.product_view_list" as="product_view_list" template="review/product/view/list.phtml"/>
        <block type="review/form" name="product.review.form" as="review_form" />
    </reference>
</catalog_product_view> 
```

**视图.phtml**

```
<?php foreach ($this->getChildGroup('detailed_info', 'getChildHtml') as $alias => $html):?>
    <div class="box-collateral <?php echo "box-{$alias}"?>">
        <?php if ($title = $this->getChildData($alias, 'title')):?>
            <h2><?php echo $this->escapeHtml($title); ?></h2>
        <?php endif;?>
        <?php echo $html; ?>
    </div>
<?php endforeach;?> 
```

# json - 使用 IXmlSerializable 对对象进行 WCF JSON 序列化

> ID：14891226
> 
> 赞同：3
> 
> 时间：2013-02-15T09:06:46.227
> 
> 标签：json, wcf, serialization

我有结构 IntEx - 简而言之，它扩展了正常的 Int32 和已处理的操作。它看起来像这样：

```
[Serializable]
public struct IntEx
{
    private int internalValue;

    private IntEx(int value)
    {
        internalValue = value;
    }

    public static implicit operator int(IntEx value)
    {
        return value.internalValue;
    }

    public static implicit operator IntEx(int value)
    {
        return new IntEx(value);
    }
} 
```

如果我们通过 WCF 发送这个结构，它会使用 JSON 进行序列化，并且输出会“看起来很漂亮”。就像我们将使用下面的示例代码一样：

```
DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(TestClass));

using (MemoryStream stream = new MemoryStream())
{
    jsonSerializer.WriteObject(stream, testClass);

    string serializedString = Encoding.UTF8.GetString(stream.GetBuffer());

    Console.WriteLine("JSON: {0}", serializedString);
} 
```

```
public class TestClass
{
    public int I1 { get; set; }

    public IntEx I2 { get; set; }
} 
```

输出看起来像这样

```
JSON: {"I1":11,"I2":{"internalValue":22}} 
```

客户端和其他“第三方”程序使用这种格式（使用**internalValue**）。

使用 IntEx 在我的应用程序中被广泛使用。其中一个对象被序列化为 XML（某种设置）。该对象使用 IntEx 作为类型。所以我必须实现 IXmlSerializable 来构造 IntEx，因为没有这个属性会像空节点一样被序列化

```
XML: <TestClass><I1>11</I1><I2 /></TestClass> 
```

如果我将 IntEx 更改为使用 IXmlSerializable

```
[Serializable]
public struct IntEx : IXmlSerializable
{
    private int internalValue;

    private IntEx(int value)
    {
        internalValue = value;
    }

    public static implicit operator int(IntEx value)
    {
        return value.internalValue;
    }

    public static implicit operator IntEx(int value)
    {
        return new IntEx(value);
    }

    System.Xml.Schema.XmlSchema IXmlSerializable.GetSchema()
    {
        return null;
    }

    void IXmlSerializable.ReadXml(System.Xml.XmlReader reader)
    {
        throw new NotImplementedException();
    }

    void IXmlSerializable.WriteXml(System.Xml.XmlWriter writer)
    {
        writer.WriteValue(internalValue);
    }
} 
```

XML 输出看起来不错

```
XML: <TestClass><I1>11</I1><I2>22</I2></TestClass> 
```

但是我所有的服务都崩溃了，因为现在 JSON 看起来像这样：

```
JSON: {"I1":11,"I2":"<IntEx xmlns=\"http:\/\/schemas.datacontract.org\/2004\/07\/TestJSONSerialization\">22<\/IntEx>"} 
```

我读到，如果您使用 IXmlSerializable，JSON 序列化“认为”我负责序列化，所以把这个对象留给我......但是我怎样才能改回“原始”序列化。

所以现在我处于死胡同......我需要像以前一样的 JSON 输出，但我还需要一些如何强制在两个条件下将设置写入 XML：

1.  internalValue 应该保持私有 - 它不应该使用某些公共属性访问
2.  我不想重写一堆代码来更改（对 JSON 的属性使用装箱）或更改所有可能的属性或可以保存到 XML 文件的类。

那么谁能给我一些线索，我该如何解决这个问题？：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T03:03:08.880

您可以将 DataContractJsonSerializer 与 IDataContractSurrogate 一起使用。使用 IDataContractSurrogate 将“IntEx”转换为“IntExJson”，“IntExJson”不需要继承自 IXmlSerializable。

IDataContractSurrogate 可用于从对象中删除某些特征，并转换为相似对象。然后使用：

```
public DataContractJsonSerializer(Type type, IEnumerable<Type> knownTypes, int maxItemsInObjectGraph, bool ignoreExtensionDataObject, IDataContractSurrogate dataContractSurrogate, bool alwaysEmitTypeInformation); 
```

将对象序列化为 json。反序列化是相同的。

# android - 使用电话间隙从 Web 服务器加载 html 文件

> ID：14891228
> 
> 赞同：5
> 
> 时间：2013-02-15T09:06:54.460
> 
> 标签：android, iphone, cordova, jquery-mobile, app-store

我正计划使用电话间隙开发一个混合应用程序。我想从 Web 服务器下载 html 页面、图像和其他资源，而不是将其保存在电话间隙应用程序包中。

1.  可以这样做吗
2.  避免频繁更新App Store中的应用程序是正确的方法还是
3.  android, iPhone, windows会拒绝我们的申请吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T09:21:04.733

1.  是的，phonegap 是可能的，没有什么可以阻止您从远程源加载 html 文件。这是我对这个问题的另一个答案：[https ://stackoverflow.com/a/13996437/1848600](https://stackoverflow.com/a/13996437/1848600)

2.  很不幸的是，不行。虽然我们可以说这是真的，但每个错误都会破坏每个可用的应用程序版本，而如果您按版本创建版本，客户将始终能够使用以前的版本。苹果应用商店也将禁止此类应用。

3.  Android/Win7-8 应用程序不会被拒绝，iOS 将立即被拒绝。这是我对这个问题的另一个答案：[https](https://stackoverflow.com/a/14436328/1848600) ://stackoverflow.com/a/14436328/1848600 ，没有必要重复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:19:05.073

1.  是的，这是可能的。

    你有两个选择来实现它。简单的方法是从 Web 服务器 url 开始。但是，您需要包含与目标设备匹配的cordova 脚本文件的代码。

    另一种方法是检查和下载文件。在这种情况下，您需要编写一些 phonegap 代码来进行更新检查、下载内容和更改起始 URL。

2.  在您没有理由更改本机代码期间，我的答案是肯定的。

3.  确切地说，Apple 不允许在没有 AppStore 的情况下更新应用程序逻辑或在 Web 服务器中加载页面，但我不知道真的是这样。

# javascript - 由于 JavaScript 中的 StreamWrite 导致 WP8 应用程序行为异常

> ID：14891235
> 
> 赞同：1
> 
> 时间：2013-02-15T09:07:18.463
> 
> 标签：javascript

我想使用javascript将在html页面上计算的结果保存在**文本文件中。**

```
<script type="text/javascript">
 window.onload = function () {
     var sw : StreamWriter = new StreamWriter("HTML_Results.txt");
     sr.Write('xyz");

     *** calculations ******
     sr.Write (result);
 }
</script> 
```

通过这样做，***我的 WP8 应用程序***行为不端并且没有像往常一样显示图像。这个应用程序是一个图像推子（计算 FPS）。

**也试过：**

```
StreamWriter sr;
try {
    sr = new StreamWriter("\HTML5\HTMLResults.txt");
    sr.Write("xyz");
    File.SetAttributes("HTML5\HTMLResults.txt", FileAttributes.Hidden);
} catch(IOException ex) {
     console.write ("error writing"); //handling IO
} 
```

**目的是：**

1.  在一个文本文件中提取几个 html 页面的计算值（在一个一个加载后）。
2.  读取此文本文件并以表格格式显示结果的结果 HTML。

有没有更好的方法来完成这项工作或者上述可以纠正和使用？感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:16:54.460

也许我误解了您的代码，但看起来您正试图[在 JavaScript 脚本标签中编写 Java](https://stackoverflow.com/questions/245062/whats-the-difference-between-javascript-and-java)。您不能在 HTML 文档中编写 Java。据我所知，客户端 JavaScript（给定您的`<script>`标签，我猜您正在尝试编写）无法执行您在这里似乎想要的那种文件 I/O 操作。

你需要使用[Node JS](http://nodejs.org/)来使用 JavaScript 来做类似的事情，然后你说的是服务器端。最接近客户端的是使用`localStorage`HTML5 中的新功能（并非所有浏览器都支持）。

# c# - C#在锁定位置的表单中嵌入命令提示符

> ID：14891250
> 
> 赞同：6
> 
> 时间：2013-02-15T09:07:49.917
> 
> 标签：c#, winforms, cmd, pinvoke

我一直在研究如何将命令提示符窗口嵌入到 WinForm 中。

我从许多使用**pinvoke**的示例中都可以使用它，但我希望能够将命令提示符窗口锁定在 end_user 无法移动的表单内的严格位置。

这可能吗？

这样做的原因是因为我们在大型网络上使用远程工具，您可以在会话中同时打开许多这些工具。我想尽可能地将它们全部集中到一个空间中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:11:55.257

如果您想要的只是一个干净的界面，您可以在表单中使用几个文本框。在其中之一中，用户输入命令。然后将这些命令传递给 shell。第二个文本框是一个多行文本框，您可以在其中附加 shell 响应传递的命令的内容。通过这种方式，您可以更好地控制图形布局。

# android - 如何获取网站的url？

> ID：14891253
> 
> 赞同：0
> 
> 时间：2013-02-15T09:07:56.570
> 
> 标签：android

在我的 android 应用程序中，我打开了一些网站。我想通过我的应用程序在 facebbok 上分享网站的 url 链接。我该怎么做。我可以通过给定的代码分享到 facebook 的 url 链接。

```
 Intent share = new Intent(android.content.Intent.ACTION_SEND);
    share.setType("text/plain");
    share.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET); 

    // Add data to the intent, the receiving app will decide
    // what to do with it.
    share.putExtra(Intent.EXTRA_SUBJECT, "Title Of The Post");
    share.putExtra(Intent.EXTRA_TEXT, "url link");

    startActivity(Intent.createChooser(share, "Share link!")); 
```

但是如何获取我正在浏览的 url 链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:16:29.530

假设您[`WebView`](http://developer.android.com/reference/android/webkit/WebView.html)在您的应用程序中使用，那么您可以使用[`geUrl();`](http://developer.android.com/reference/android/webkit/WebView.html#getUrl%28%29)方法来获取当前页面的 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:13:16.307

您知道要在浏览器中点击的“url”吗？从你的 android 应用程序中，你肯定会给出一些 url 链接来浏览。只需将该 url 保存为字符串，您就可以轻松共享该字符串。否则，如果您在浏览器中或浏览 webview 内容意味着，您可以使用 webview.getUrl() 方法。假设这不是您要求的意思，请更新你的问题

# mysql - 为什么这些 MySQL 查询这么慢？

> ID：14891256
> 
> 赞同：2
> 
> 时间：2013-02-15T09:08:02.527
> 
> 标签：mysql, wordpress, mysql-slow-query-log

我不明白为什么以下查询出现在慢查询日志中，查询时间为 12 到 20 秒。

```
UPDATE `wp_postmeta` SET `meta_value` = '35' WHERE `post_id` = 1267 AND `meta_key` = 'views'
UPDATE `wp_postmeta` SET `meta_value` = '32' WHERE `post_id` = 874 AND `meta_key` = 'views'
UPDATE `wp_postmeta` SET `meta_value` = '122' WHERE `post_id` = 18557 AND `meta_key` = 'views'
UPDATE `wp_postmeta` SET `meta_value` = '3078' WHERE `post_id` = 21741 AND `meta_key` = 'views'
UPDATE `wp_postmeta` SET `meta_value` = '2657' WHERE `post_id` = 878 AND `meta_key` = 'views' 
```

它们对我来说看起来很正常，在 phpMyAdmin 中执行其中 1 个进行测试只需要 0.0056 秒。
这里的表格大小`wp_postmeta`是 77,996。

我想知道为什么上面的查询这么慢，如果有什么我可以做的来改进它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T09:14:33.770

比@Sandeep 建议使用的更好的索引是：

```
CREATE INDEX <some index name>
ON wp_postmeta (meta_key, post_id); 
```

该索引将捕获所有`WHERE`子句并使数据库引擎能够快速转到正确的行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T09:10:44.580

在“post_id”列上创建索引。它会解决你的问题。

当数据量很大时，索引在查询优化中发挥着重要作用。

# cxf - 从 org.apache.cxf.jaxrs.ext.RequestHandler handleRequest 方法抛出异常

> ID：14891258
> 
> 赞同：1
> 
> 时间：2013-02-15T09:08:05.683
> 
> 标签：cxf

我在使用 cxf 调度行为时遇到了这个问题。我开发了一个实现 org.apache.cxf.jaxrs.ext.RequestHandler 接口的拦截器。在它的“public Response handleRequest(Message m, ClassResourceInfo resourceClass)”方法中，我抛出了一个异常（例如一个WebServiceException）或一个故障。我没有明显的问题，但是在客户端，客户端收到一个不同的异常（ServerWebApplicationException），错误消息为空。

这里的代码：

服务器端：

```
 public class RestInterceptor implements RequestHandler {
       ......
       @Override
       public Response handleRequest(Message m, ClassResourceInfo resourceClass){
          .....
          throw new WebServiceException("Failure in the dispatching ws invocation!");
          .....
       }
    } 
```

在客户端收到 ServerWebApplicationException：

```
Status : 500
Headers : 
Content-Length : 0
Connection : close
Server : Jetty(7.x.y-SNAPSHOT)

cause=null
detailMessage=null
errorMessage=""
..... 
```

如果我抛出错误，我也会收到相同的异常。问题是什么？我必须使用另一个例外？为什么？非常感谢，

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T07:10:34.510

好的，我找到了解决方案。
我已经在调度程序上注册了一个 ExceptionMapper，并使用它来将异常封装在发送给客户端的 Response 中。为此，拦截器在 Web 服务发布时注册为提供者，并实现“ExceptionMapper”接口。在其“toResponse”方法中，它将异常封装在响应中。看代码：

```
 public static<T extends Throwable>  Response convertFaultToResponse(T ex, Message inMessage) {
        ExceptionMapper<T>  mapper = ProviderFactory.getInstance(inMessage).createExceptionMapper(ex.getClass(), inMessage);
        if (mapper != null) {
            try {
                return mapper.toResponse(ex);
            } catch (Exception mapperEx) {
                mapperEx.printStackTrace();
                return Response.serverError().build();
            }
        }
        return null;
    }

    @Override
    public Response toResponse(Exception arg0) {
        ResponseBuilder builder = Response.status(Response.Status.INTERNAL_SERVER_ERROR).type("application/xml");
        String message = arg0.toString();
        return builder.entity(message).build(); 
    } 
```

安德烈亚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:11:13.067

[使用@WebFault](http://docs.oracle.com/javaee/5/api/javax/xml/ws/WebFault.html)注释您的异常

例子 ：

```
@WebFault(name = "oauthFault")
public class OAuthException extends RuntimeException {
  ...
} 
```

# java - 如何使用 Jsoup 从网站获取内容

> ID：14891259
> 
> 赞同：0
> 
> 时间：2013-02-15T09:08:06.173
> 
> 标签：java, jsoup

我正在尝试从网站获取数据。使用此代码：

```
@WebServlet(description = "get content from teamforge", urlPatterns = { "/JsoupEx" })
public class JsoupEx extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private static final String URL = "http://www.moving.com/real-estate/city-profile/results.asp?Zip=60505";

    public JsoupEx() {
        super();
    }

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        Document doc = Jsoup.connect(URL).get();
        for (Element table : doc.select("table.DataTbl")) {
            for (Element row : table.select("tr")) {
                Elements tds = row.select("td");
                if (tds.size() > 1) {
                    System.out.println(tds.get(0).text() + ":"
                            + tds.get(2).text());
                }
            }
        }
    }
} 
```

我正在使用[jsoup](http://jsoup.org/)解析器。运行时，我没有收到任何错误，只是没有输出。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T10:51:27.323

使用以下代码

```
public class Tester {
    private static final String URL = "http://www.moving.com/real-estate/city-profile/results.asp?Zip=60505";

    public static void main(String[] args) throws IOException {
        Document doc = Jsoup.connect(URL).get();
        System.out.println(doc);

    }

} 
```

我得到一个 java.net.SocketTimeoutException：读取超时。我认为您尝试抓取的特定 URL 对于 Jsoup 来说太慢了。在欧洲，我的连接可能和你的一样慢。但是，您可能希望在 AS 的日志中检查此异常。

通过将超时设置为 10 秒，我能够下载并解析文档：

```
Connection connection = Jsoup.connect(URL);
connection.timeout(10000);
Document doc = connection.get();
System.out.println(doc); 
```

使用您的其余代码，我得到：

人口：78,413

自 1990 年以来的人口变化：53.00%

人口密度：6,897

男：41,137

女性：37,278

......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T05:08:29.983

thanx Julien，我尝试使用以下代码，得到 SocketTimeoutException。代码是

```
Connection connection=Jsoup.connect("http://www.moving.com/real-estate/city-   
profile/results.asp?Zip=60505");
connection.timeout(10000);
Document doc = connection.get();
System.out.println(doc); 
```

# json - 返回不带 {"d:" 元素的 JSON 的方法

> ID：14891265
> 
> 赞同：1
> 
> 时间：2013-02-15T09:08:21.730
> 
> 标签：json, webget

我目前有一个 WebGet 方法，它使用嵌套的 { d: } 元素正确返回 JSON，有没有办法删除它？

这是我的服务器端代码和定义 JSON 返回的类：

```
[OperationContract, WebGet(ResponseFormat = WebMessageFormat.Json)]
    public List<OpenOrderHeader> GetOpenOrders()
    {
        return (from OH in SCMENT.CustomerOrders
                select new OpenOrderHeader()
                {
                    CustomerID = OH.CustomerId,
                    OrderID = OH.CustomerOrderID,
                    OrderUniqueNumber = OH.CustomerOrderUniqueNumber,
                    OrderDateCreated = OH.CustomerOrderDateCreated,
                    OrderDateUpdated = OH.CustomerOrderDateUpdated,
                    OrderLocalOnline = OH.CustomerOrderOnlineOrLocal,
                    BranchID = (int)OH.CustomerOrderLocalBranchID,
                    OrderCurrency = OH.CustomerOrderCurrency,
                    OrderConversionRate = OH.CustomerOrderCurrencyConversionRate,
                    OrderStatus = OH.CustomerOrderStatus
                }
                ).ToList();
    } 
```

班上：

```
 public class OpenOrderHeader
{
    public int CustomerID { get; set; }
    public int OrderID { get; set; }
    public int OrderUniqueNumber { get; set; }
    public int NumberOfProductsOnOrder { get; set; }
    public DateTime OrderDateCreated { get; set; }
    public DateTime OrderDateUpdated { get; set; }
    public string OrderLocalOnline { get; set; }
    public int BranchID { get; set; }
    public string PaymentMethod { get; set; }
    public int OrderStatus { get; set; }
    public string OrderCurrency { get; set; }
    public decimal OrderConversionRate { get; set; }
    public decimal SubTotalInclTax { get; set; }
    public decimal SubTotalExclTax { get; set; }
    public decimal DiscountInclTax { get; set; }
    public decimal DiscountExclTax { get; set; }
    public decimal ShippingInclTax { get; set; }
    public decimal ShippingExclTax { get; set; }
    public decimal PaymentFeeInclTax { get; set; }
    public decimal PaymentFeeExclTax { get; set; }

} 
```

JSON：

```
{
"d": [
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359696634387+0200)/",
        "OrderDateUpdated": "/Date(1359703834253+0200)/",
        "OrderID": 1,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 10,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359712050660+0200)/",
        "OrderDateUpdated": "/Date(1359719250317+0200)/",
        "OrderID": 2,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 11,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359713291023+0200)/",
        "OrderDateUpdated": "/Date(1359720490673+0200)/",
        "OrderID": 3,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 12,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359947946093+0200)/",
        "OrderDateUpdated": "/Date(1359955145467+0200)/",
        "OrderID": 4,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 13,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359948641833+0200)/",
        "OrderDateUpdated": "/Date(1359955841153+0200)/",
        "OrderID": 5,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 14,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359948752250+0200)/",
        "OrderDateUpdated": "/Date(1359955951577+0200)/",
        "OrderID": 6,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 15,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359948895973+0200)/",
        "OrderDateUpdated": "/Date(1359956095290+0200)/",
        "OrderID": 7,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 16,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "ZAR",
        "OrderDateCreated": "/Date(1359949020693+0200)/",
        "OrderDateUpdated": "/Date(1359956220013+0200)/",
        "OrderID": 8,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 10,
        "OrderUniqueNumber": 17,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    },
    {
        "__type": "OpenOrderHeader:#POS.Tracntrace.Member_Only.DAL.Models.Order",
        "BranchID": -1,
        "CustomerID": -1,
        "DiscountExclTax": 0,
        "DiscountInclTax": 0,
        "NumberOfProductsOnOrder": 0,
        "OrderConversionRate": 1,
        "OrderCurrency": "USD",
        "OrderDateCreated": "/Date(1359957893433+0200)/",
        "OrderDateUpdated": "/Date(1359965238550+0200)/",
        "OrderID": 9,
        "OrderLocalOnline": "ONLINE",
        "OrderStatus": 40,
        "OrderUniqueNumber": 1,
        "PaymentFeeExclTax": 0,
        "PaymentFeeInclTax": 0,
        "PaymentMethod": null,
        "ShippingExclTax": 0,
        "ShippingInclTax": 0,
        "SubTotalExclTax": 0,
        "SubTotalInclTax": 0
    }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:32:09.357

从您所说的来看，我认为这样的事情应该可以解决您的问题：

```
JSONObject returnedObject = Your JSON data as returned from the server

JSONArray desiredArray = returnedObject.getJSONArray("d");

//retrieve the data and results from the JSONArray
for (int jsonCounter = 0; jsonCounter < desiredArray.length(); jsonCounter++) { 
    //Get the next object
    JSONObject nextobj = desiredArray.getJSONObject(jsonCounter);

    //Get the data
    item1= nextobj.getString("__type");
    item2= nextobj.getString("BranchID");
    etc......
} 
```

这就是您提取数据的基本结构。从您发布的代码中，我不确定这会去哪里，但它应该足以帮助您完成您的工作并提取您的数据。还要记住，上面的代码是使用包含的 JSON 解析器在 Android 中编写的，因此需要进行一些更改才能使其与不同的库一起使用

# c++ - 来自链表的稀疏矩阵打印

> ID：14891266
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:08:24.663
> 
> 标签：c++

我正在尝试从我的链表中打印出稀疏矩阵。看起来像这样：

```
0 0 0 0 0 0 
1 0 6 0 0 0 
4 0 0 0 6 0 
```

但为此，它只打印出 0 和里面的值。这是代码。

```
 while (temp != NULL)
{

    for (int i = 0; i < row; i++)
    {
        for (int j = 0; j < col; j++)
        {
            if ((row == (temp -> e).getRow()) && (col == (temp -> e).getCol()))
                cout << temp ->e.getValue();
            else
                cout << "0";
        }
            cout << endl;
    }

    temp = temp -> next;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:14:30.617

`i`并且`j`正在递增。这些是您需要检查的值。

您正在与哪些是最大值进行比较，`row`并且`col`永远不会达到。

# c# - 尝试通过代码加载外部 asp.mvc 网站时的内部服务器

> ID：14891269
> 
> 赞同：0
> 
> 时间：2013-02-15T09:08:33.020
> 
> 标签：c#, php, asp.net-mvc, curl, wget

我正在尝试帮助一位同事解决他遇到的问题。这意味着我没有所有可用的调试信息，但我想也许这里有人可以引导我们朝着正确的方向前进。

如标题所述，他试图通过代码加载外部网站的 html。他实际上正在使用 cUrl。我还使用 cUrl (php)、file_get_contents (php)、wget（终端）以及 WebClient 和 HttpWebRequest (c#) 进行了测试。结果是内部服务器错误消息。

```
[NullReferenceException: Object reference not set to an instance of an object.]
Innsyn.Controllers.BaseController.ExecuteCore() +673
System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +334
System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +61
System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +19
System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +53
System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +468
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +374 
```

如您所见，他试图加载的网站是一个 asp.mvc 应用程序：[http ://einnsyn.harstad.kommune.no/einnsyn](http://einnsyn.harstad.kommune.no/einnsyn)

使用浏览器查看网站时，该网站运行良好。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-07T22:14:41.440

您需要提供 http 标头。使用浏览器插件查看使用浏览器时发送到站点的标题，然后在您的工具中复制。我在 eInnsyn 上使用了这种方法，通过 wget 获取数据。

# sql - SQL Server 无效的列名错误，抱怨列早已不复存在

> ID：14891272
> 
> 赞同：1
> 
> 时间：2013-02-15T09:08:41.957
> 
> 标签：sql, sql-server, sql-server-2008

**编辑：在您决定阅读并尝试理解下面的文字之前，请先阅读下面的答案。当您看到发生的事情时，您可能会觉得不值得；）**

我有一个奇怪的问题：SQL Server 2008 R2 一直抱怨一个无效的列确实不再存在，但我也没有使用它！

我无法再从我自己的应用程序中更新该表中的任何行，在该应用程序中找不到对该列的引用，因为我现在总是收到此错误。然后我想直接在 SSMS 中更新作为测试，但是当我在那里编辑行时，我仍然收到此错误。

之前发生的事情：我创建了一个名为 CertcUL varchar(1) 的列，并且成功了。过了一会儿，我似乎需要它成为一个 varchar(30)，所以我编辑了表格设计并将它变成了一个 varchar(30)。

从那一刻起，我看到我只能在存储 1 个字符时更新此列。当我尝试存储更多内容时，我收到一个关于字符串或二进制截断的错误警告。所以不知何故，以前的 varchar(1) 信息仍然存在于数据库中。

当我将该列重命名为 CertcUL2 或 Cert_cUL 时，同样的事情不断发生！因此更改列名不会改变根本原因。此外，当只是尝试直接在 SSMS 中添加一些字符时。

当我删除该列并立即使用 varchar(30) 添加一个新列并调用“test”时，同样的问题仍然存在！此列仍然只允许我存储一个字符！该列是最后一列。使它成为最后一列也无济于事。只有在保留另一列的同时创建新列时，我才能拥有行为正常的列。

所以不知何故，SQL Server 会保存一些关于列的元数据，即使它已被删除。并且不看名称，而是看列的创建顺序。

有谁知道这是怎么发生的，除了（可能）删除和重新创建整个表之外，我还能如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:25:24.320

哦，我的上帝，我觉得自己太愚蠢了……这是一个仍然包含此列的触发器。我只是注意到它，因为在尝试使用更新语句进行更新时。只有这样我才能收到正确的错误消息，所以我现在知道发生了什么。太愚蠢了，我没有检查触发器！对于那个很抱歉！

更多信息：我在这个表 A 上有一个更新触发器，它将所有当前值复制到包含相同列的历史表 B。所以我确实更改了表 A 中 CertcUL 列的长度，但忘记了表 B。所以每次都弹出旧的列名，并且看到它符合字符串截断的要求，而我在表 A 中的列似乎很混乱正好。

再次抱歉 ：）

# php - 在 php 返回垃圾（HTTP 响应）中执行 exec('php -v') 时出错

> ID：14891273
> 
> 赞同：4
> 
> 时间：2013-02-15T09:08:53.797
> 
> 标签：php, linux, exec, shared-hosting

我有一个共享服务器 Linux，基于它我面临一个奇怪的问题。我正在尝试通过 PHP 执行以下命令，它运行正常；将 PHP 安装路径返回给我`/usr/bin/php`。

```
exec('which php');// This runs so exec is not disabled 
```

但是我尝试执行的任何命令都`exec('php ...');`无法随机返回一个包含 98 到 114 个元素的数组，几乎到处都是垃圾。我运行的命令示例是...

```
exec('php -v');
exec('php -i');
exec('/usr/bin/php -v'); 
```

以上都没有返回合理的东西。知道为什么 php 运行的任何命令都没有执行吗？

下面是返回给我`var_dump()`的数据数组。`exec()`

**编辑（经过更多 RND）**

我能够执行

```
exec('php -h') 
```

它以可读的格式返回给我以下数组。

```
string(9) "php -help"
string(47) "Usage: php [-q] [-h] [-s] [-v] [-i] [-f ]"
string(27) "       php  [args...]"
string(36) "  -a               Run interactively"
string(69) "  -b | Bind Path for external FASTCGI Server mode"
string(57) "  -C               Do not chdir to the script's directory"
string(58) "  -c | Look for php.ini file in this directory"
string(47) "  -n               No php.ini file will be used"
string(56) "  -d foo[=bar]     Define INI entry foo with value 'bar'"
string(70) "  -e               Generate extended information for debugger/profiler"
string(46) "  -f         Parse .  Implies `-q'"
string(28) "  -h               This help"
string(34) "  -i               PHP information"
string(43) "  -l               Syntax check only (lint)"
string(43) "  -m               Show compiled in modules"
string(60) "  -q               Quiet-mode.  Suppress HTTP Header output."
string(60) "  -s               Display colour syntax highlighted source."
string(33) "  -v               Version number"
string(72) "  -w               Display source with stripped comments and whitespace."
string(46) "  -z         Load Zend extension ."
string(75) "  -T        Measure execution time of script repeated  times."
This page was created in 0.055487155914307 seconds 
```

哦顺便说一句，我用来测试的脚本如下......

```
<?php
$mtime = microtime(); 
$mtime = explode(" ",$mtime); 
$mtime = $mtime[1] + $mtime[0]; 
$starttime = $mtime; 

if(!empty($_GET['p']) && $_GET['p'] == true){

    //$command = 'php -help'; //this works
    //$command = 'cat ' . getcwd() . '/dummy1.txt'; //this works echo's a simple text file

    //$command = 'php -q ' . getcwd() . '/dummy1.txt'; //NOT WORKING
    $command = 'php -m'; //NOT WORKING

    echo '<div><pre>';
    var_dump($command);
    echo '</pre></div>';

    exec($command, $output, $return);
    //passthru($command,$output);

    echo '<div><pre>';
    foreach($output as $key => $value){
        var_dump($output[$key]);
    }   
    echo '</pre></div>';
}

$mtime = microtime(); 
$mtime = explode(" ",$mtime); 
$mtime = $mtime[1] + $mtime[0]; 
$endtime = $mtime; 
$totaltime = ($endtime - $starttime); 
echo "This page was created in ".$totaltime." seconds";
?> 
```

[Pastebin.org 链接](http://pastebin.com/9RG0vLmZ)

![图片](../Images/45d190ffa9c4e6b9b02883e26344249e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-06T19:14:23.350

它的 PHP CGI 从环境中读取脚本名称，从而导致调用脚本运行多次或有时无限次。

解决方案是简单地使用命令 php-cli 而不是命令 php。

在您的代码上替换为行`$command = 'php -m';`，`$command = 'php-cli -m';`一切都会正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:29:15.120

鉴于数据似乎是 HTTP 响应，并且您`Content-Encoding: gzip`在其中，我将使用[`gzdecode()`](http://php.net/manual/en/function.gzdecode.php)字符串来解码“垃圾”。

# java - 找不到元素的声明（XML 模式）

> ID：14891282
> 
> 赞同：0
> 
> 时间：2013-02-15T09:09:52.433
> 
> 标签：java, xml, eclipse, schema

我不在线时通常会遇到这种错误：

```
org.xml.sax.SAXParseException; lineNumber: 55; columnNumber: 33; schema_reference.4: Failed to read schema document 'http://www.hazelcast.com/schema/spring/hazelcast-spring-2.1.xsd', 
because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.

Caused by: java.net.ConnectException: Connection timed out: connect

...no declaration can be found for element 'hz:hazelcast'. 
```

什么是解决方案，以便它不必每次都连接到互联网。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T13:42:47.917

您没有在问题中确切说明您是如何加载需要此模式的 XML 文件，但从其名称​​来看，它似乎与 Spring bean 配置有关。Spring 为组件提供了一种机制，这些组件提供了自己的模式，可以将这些模式捆绑到它们的 JAR 文件中，这样就不必从互联网上获取它们。这涉及在 JAR 文件中`java.util.Properties`命名的格式文件`META-INF/spring.schemas`，其中包含将 http URL 映射到本地路径（在 JAR 文件中）的行，例如

```
http\://www.hazelcast.com/schema/spring/hazelcast-spring-2.1.xsd=hazelcast-spring-2.1.xsd 
```

（从`hazelcast-spring-2.1.3.jar`）。

所以我怀疑这里发生的事情是你指的是与你实际使用的 hazelcast 版本不同的模式版本，这意味着你请求的模式没有列在`spring.schemas`目录中，因此它必须去互联网下载它。例如，如果您有，那么`hazelcast-spring-2.5.jar`您需要使用`http://www.hazelcast.com/schema/spring/hazelcast-spring-2.5.xsd`.`xsi:schemaLocation`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:21:59.247

下载 xsd 并将其保存在您的项目中。使用以下代码访问 xsd

```
JAXBContext context = JAXBContext.newInstance(<your>.class);
Unmarshaller jaxbUnMarshaller = context.createUnmarshaller();

SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
URL tmpurl = getClass().getClassLoader().getResource("file.xsd");
Schema s = schemaFactory.newSchema(tmpurl);
jaxbUnMarshaller.setSchema(s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:28:26.927

将该 XSD 复制到 WEB-INF/ 并将 uri 作为**/WEB-INF/** *xsdname* **.xsd**在您使用模式的 XML 文件中提供。

# wordpress - 多站点的wordpress重定向不起作用

> ID：14891283
> 
> 赞同：0
> 
> 时间：2013-02-15T09:09:54.170
> 
> 标签：wordpress, apache, redirect, wpmu

目标：将多站点 WordPress 安装移动到本地主机

环境：Ubuntu 10.4 上的 LAMPP。

我正在将一个多站点 wordpress 安装移动到本地主机。我已完成的步骤：

使用备份 sql 文件重新创建了 db。从服务器复制所有文件夹和文件并保存在 htdocs 下。现在使用新生成的 wp-config.php，当我尝试安装一个 mutlisite 时，我被要求将以下内容添加到 wp-config.php

```
define('MULTISITE', true);
define('SUBDOMAIN_INSTALL', false);
define('DOMAIN_CURRENT_SITE', 'localhost/wordpress');
define('PATH_CURRENT_SITE', '/wordpress/');
define('SITE_ID_CURRENT_SITE', 1);
define('BLOG_ID_CURRENT_SITE', 1); 
```

我还在 .htaccess 中添加了以下内容：

```
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]

# add a trailing slash to /wp-admin
RewriteRule ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(wp-(content|admin|includes).*) $2 [L]
RewriteRule ^([_0-9a-zA-Z-]+/)?(.*\.php)$ $2 [L]
RewriteRule . index.php [L] 
```

当我使用 url 访问我的网站时`http://localhost/wordpress`，我被带到`http://localhost/wordpress/wordpress/`并收到错误消息说明`Firefox has detected that the server is redirecting the request for this address in a way that will never complete`。

请帮我正确设置。

PS：我是 Wordpress 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:41:56.067

这些线

```
define('DOMAIN_CURRENT_SITE', 'localhost/wordpress');
define('PATH_CURRENT_SITE', '/wordpress/');` 
```

一定是：

```
define('DOMAIN_CURRENT_SITE', 'localhost');
define('PATH_CURRENT_SITE', '/wordpress/'); 
```

# ruby - 使用 Yardoc 记录 def_delegators

> ID：14891284
> 
> 赞同：9
> 
> 时间：2013-02-15T09:09:55.233
> 
> 标签：ruby, documentation, yard

我有一个使用[Forwardable](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/forwardable/rdoc/Forwardable.html)模块中的`def_delegators`方法的类。我还没有找到让[Yardoc](http://yardoc.org/)为其输出文档的方法。我尝试使用[宏](http://rubydoc.info/docs/yard/file/docs/Tags.md#macro)，但它不会为这些特定方法输出任何内容（文件中的其他所有内容都很好，并且没有错误），而且我有几个不同的长度。`def_delegators`

例如

```
class A
  extend Forwardable
  # other code…

  # @!macro
  #   @see Array#$1
  #   @see Array#$2
  #   @see Array#$3
  def_delegators :@xs, :size, :<<, :blah # … 
```

如果有人知道宝石或这样做的方法，这意味着我可以避免尝试编写 Yard 扩展来执行此操作，我将非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T09:35:34.033

经过更多的实验，我发现这非常有效：

```
 # @!method size
  #   @see Array#size
  # @!method <<
  #   @see Array#<<
  # @!method blah
  #   @see Array#blah
  def_delegators :@xs, :size, :<<, :blah # … 
```

很可能有一种方法可以用一两行代码做到这一点，但与编写扩展的工作相比，我觉得这非常可接受。

* * *

### 更新：

我刚刚发现这将更好地链接到委托方法的文档：

```
 # @!method size
  #   @return (see Array#size) 
```

这将从 Array#size 方法中获取已记录的返回值。我希望其他标签也会这样做。它仍然很冗长，但可以接受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-21T15:06:27.587

您需要将这两个概念结合起来。使用@!macro 产生一个@!method。

以下是我的解决方案版本。但对我来说问题是 OptParser 不包括在内，所以 See 也没有链接。第二个缺点是方法的签名、参数和返回值没有描述。第三个 ick 是字符串 OptParser 是固定的，但确实需要能够调整（参数化）。

如果它转发到项目中包含的方法，那么您可以使用（参见 Foo#method）（在这种情况下没有 @ 符号）并且 Foo#method 中的任何内容都将被复制到新源中。这可以通过在宏内部执行（参见 Foo#$2）来完成——包括括号。查看[YARD 的参考标签](http://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md#Reference_Tags%22Yard%20Reference%20Tags%22)

```
# @!macro [attach] def_delegators
#   @!method $2
#     Forwards to $1.
#     @see OptParser#$2
def_delegators :opt_parser, :order!
def_delegators :opt_parser, :on
def_delegators :opt_parser, :on_head
def_delegators :opt_parser, :on_tail
def_delegators :opt_parser, :help
def_delegators :opt_parser, :add_officious
def_delegators :opt_parser, :banner
def_delegators :opt_parser, :banner=
def_delegators :opt_parser, :program_name
def_delegators :opt_parser, :abort
def_delegators :opt_parser, :release
def_delegators :opt_parser, :release=
def_delegators :opt_parser, :version
def_delegators :opt_parser, :version= 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T10:51:05.100

这对我有用。

```
# @!method do_this
#   @return [mixed] See {Instance#do_this}.
# @!method do_that
#   @return [mixed] See {Instance#do_that}.
delegate *[
  :do_this,
  :do_that,
], to: :instance 
```

其他：

*   gem`yard-delegate`不适用于这种构造。不过它已经很旧了。
*   放在`# @!method`个人之上`:method`是行不通的（被 YARD 忽略）。
*   更好地指定实际的方法返回值，它会为读者生成一个更舒适的列表。

# ios - 如何使用 ShareKit 将带有文本的图像分享到 Facebook 时间线？

> ID：14891289
> 
> 赞同：1
> 
> 时间：2013-02-15T09:10:05.487
> 
> 标签：ios, facebook, ios6, sharekit, facebook-timeline

我正在使用 ShareKit 将项目共享到社交网络。我也遇到过这个问题。在**iOS5**中发布到 facebook 时，使用这样的代码：

```
SHKItem * post;
post = [SHKItem image:imageView.image title:labelText];
[SHKFacebook shareItem:post]; 
```

我在我的 Facebook 时间线和相册中收到一条带有照片及其描述的新消息。但在**iOS6**中，我只能在相册中获得带有描述的新照片。但我也需要将新消息发布到我的时间线。我应该怎么办？

# c# - 在 XAML ResourceDictionary 内绑定

> ID：14891291
> 
> 赞同：1
> 
> 时间：2013-02-15T09:10:14.893
> 
> 标签：c#, .net, wpf, caliburn.micro, multidatatrigger

我有一种可怕的感觉，我想做的事情无法完成，但就是这样。也许有更好的方法。

我在一个单独的文件中有一个 ResourceDictionary，被拉入一个 UserControl（视图）：

```
<UserControl.Resources>        
    <ResourceDictionary Source="..\Resources.xaml"/>
</UserControl.Resources> 
```

在 RD 中，我定义了一些按钮样式，其中一个包括条件，如果“IsCurrentFilter”转换器返回 True，则将前景设置为红色：

```
<Style x:Key="FilterButton" TargetType="Button" BasedOn="{StaticResource ButtonBase}">
    <Style.Triggers>
        <MultiDataTrigger>
            <MultiDataTrigger.Conditions>
                <Condition Binding="{Binding Converter={StaticResource IsCurrentFilter}}" Value="True"/>
            </MultiDataTrigger.Conditions>
            <Setter Property="Foreground" Value="Red" />
        </MultiDataTrigger>
    </Style.Triggers>
</Style> 
```

转换器在同一个 RD 中定义，进一步向上：

```
<util:IsCurrentFilterConverter x:Key="IsCurrentFilter" ViewModel="{Binding}"/> 
```

问题是转换器无法访问视图模型（它需要进行比较），并且该`ViewModel`属性只是拒绝绑定到任何东西。错误是...

```
System.Windows.Data Error: 2 : Cannot find governing FrameworkElement or FrameworkContentElement for target element. BindingExpression:(no path); DataItem=null; target element is 'IsCurrentFilterConverter' (HashCode=50804710); target property is 'ViewModel' (type 'Object') 
```

...这有点道理，因为我知道它不在视觉树中。

那么，我怎样才能绑定到这个 ResourceDictionary 中的视图模型呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:22:39.430

你这样做是错的。转换器不应以这种方式绑定到视图模型。它应仅取决于其输入值。以这样一种方式设置您的按钮，即视图模型是按钮的数据上下文，或者在逻辑树的可预测位置可用。然后您的绑定转换器可以将视图模型“转换”为布尔值。更好的是，添加一个 viewmodel 属性来提供所需的布尔值并绑定到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:44:56.513

以防万一有人偶然发现这一点，我选择了一种不同的技术来解决问题。但是，资源内部的绑定是在这里修复的：

[http://www.codeproject.com/Articles/27432/Artificial-Inheritance-Contexts-in-WPF](http://www.codeproject.com/Articles/27432/Artificial-Inheritance-Contexts-in-WPF)

# java - 我自己的正则表达式

> ID：14891294
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:10:22.943
> 
> 标签：java, regex

请我需要一些人来帮助我解决这个问题，我想使用正则表达式将 Dr、Rd 和 St 等字符替换为 Drive Road 和 Street，请问该怎么做？我已经尝试了很多方法，但我的结果是不正确的。例如，如果用户为变量 vaddress 提供此地址：13, Clinton str off allen rd queens dr。结果应该是 13 号，Clinton Street off allen Road Queens Drive。

这是我的代码示例：

```
 public void standardizeAddress(String vaddress){
        address = vaddress;//address is an instance variable
        String str1,str2;
       //Replace all instances of 'St,Rd,Dr' with 'Street,Road and Drive' Using

            String regex = "\\sSt\\s";
            Pattern pat = Pattern.compile(regex);
            Matcher match = pat.matcher(address);
            while(match.find())
             address = match.replaceAll(" Street ");
             System.out.println(address);
             str1 = address;

            regex = "\\sRd\\s";
            pat = Pattern.compile(regex);
            match = pat.matcher(str1);
            while(match.find())
            str1 = match.replaceAll(" Road ");
            System.out.println(str1);
            str2 = str1;

            regex = "\\sDr\\s";
            pat = Pattern.compile(regex);
            match = pat.matcher(str2);
            while(match.find())
            str2 = match.replaceAll(" Drive ");
            System.out.println(str2);    
        } 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:17:26.620

这应该有效：

```
String str = "Dr abc Rd def St ghi";
str = str.replaceAll("(\\s+|^)Dr(\\s+|$)", "$1Drive$2");
str = str.replaceAll("(\\s+|^)Rd(\\s+|$)", "$1Road$2");
str = str.replaceAll("(\\s+|^)St(\\s+|$)", "$1Street$2");

System.out.println(str); 
```

产量：

> 开车 abc 路 def 街 ghi

此代码也应在您要替换的单词之前保留空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:19:52.433

我认为如果您的情况非常简单并且您的场景很小（并且您不需要复杂的正则表达式），您可以简单地使用[String.replaceAll](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)或[String.replace](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:25:56.963

如果您想使用 Matcher，下面的代码示例将对您有所帮助:)

```
String address = "St number 9 and St number 99 and st number 999";       
String regex = "\\bSt\\b";
Pattern pat = Pattern.compile(regex);
Matcher match = pat.matcher(address);
address = match.replaceAll("Street");
System.out.println(address); 
```

输出结果：`Street number 9 and Street number 99 and st number 999`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:31:56.860

只是为了展示 Pattern 和 Matcher 的用法。我认为几个 replaceAll 的简单答案是最易读的。

```
 Map<String, String> replacements = new LinkedHashMap<>(); // Keep in order
    replacements.put("Dr", "Drive");
    replacements.put("Rd", "Road");
    replacements.put("St", "Street");

    StringBuilder regex = new StringBuilder();
    for (String abbrev : replacements.keySet()) {
        regex.append(regex.length() == 0? "\\b(" : "|");
        regex.append(Pattern.quote(abbrev));
    }
    regex.append(")\\b");
    Pattern abbrevPattern = Pattern.compile(regex.toString());
    Matcher m = abbrevPattern.matcher(vaddress);

    StringBuffer result = new StringBuffer();
    while (m.find()) {
        String outwritten = replacements.get(m.group(1));
        m.appendReplacement(result, outwritten);
    }
    m.appendTail(result);
    return result.toString(); 
```

# c++ - 在双向链表中排序插入

> ID：14891297
> 
> 赞同：1
> 
> 时间：2013-02-15T09:10:30.930
> 
> 标签：c++

`ListItem`我正在使用具有指针和 T 类型值的`prev`结构制作双向链表。`next`

我做对了吗？

当我运行主代码时，我只能在显示中看到 1、15 和 16。

```
template <class T>
void List<T>::insertSorted(T item)
{
    ListItem<T> *node=new ListItem<T>(item);
    if (head==NULL)
    {
         head=node;
    }          
    else if (head!=NULL)
    {
         T c,d;
         ListItem<T> *temp,*temp2;
         temp=head;
         c=temp->value;
         int count=0;
         while (temp->next!=NULL)
         {
               if (temp->prev!=NULL)
               temp2=temp->prev;

               if (c>item && item>temp2->value)
               {
                    if (temp->prev!=NULL)
                    {
                         temp2->next=node;
                         node->prev=temp2;
                         node->next=temp;
                         temp->prev=node;     
                         count++;
                    }  
                    else if (temp->prev==NULL)
                    {
                         head=node;
                         head->next=temp;
                         count++;
                    }              
               }
               temp=temp->next;
               c=temp->value;
         }
         if (temp->value<item)   //comparison with last temp
         {
             temp->next=node;
             node->prev=temp;
         }
         else if (temp->value>item)
         {
              temp2=temp->prev;
              temp2->next=node;
              node->prev=temp2;
              node->next=temp;
              temp->prev=node;
        }
    }        
}
int main()
{
    List<int> Mylist;
    for (int i=16;i>0;i--)
    {
        Mylist.insertSorted(i);  //insertion should be in ascending order according 
                                  //to my fnction
    }
    Mylist.printList();  //prints the whole linked list
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:24:01.797

不，你正在做的是UB。给定`head != NULL`and `head->next != NULL`，意味着您在列表中至少有两个项目：

```
 else if (head!=NULL)
 {
      T c,d;
      ListItem<T> *temp,*temp2; //temp2 points to nirvana
      temp=head;                //temp is head
      c=temp->value;            
      int count=0;
      while (temp->next!=NULL)  //head->next != NULL, so enter the loop
      {
            if (temp->prev!=NULL)  //head->prev is NULL...
              temp2=temp->prev;    //.. so temp2 continues to point into nirvana     

            if (c>item && item>temp2->value) //take nirvana's value. OUCH! 
```

重构你的代码。在纸上列出你的算法，看看它在不同情况下应该做什么（列表中没有元素，列表中有一个元素，两个或更多元素，项目较小，项目最大，或者项目介于两者之间）。如果你在纸上做对了，就把它写在代码中。

**编辑：**提示：我想列表是之前排序的。列表元素应该有什么属性，你想在它之前插入新项目？你怎么能找到它？

# java - Android：将int转换为字符串并传递给方法

> ID：14891302
> 
> 赞同：0
> 
> 时间：2013-02-15T09:10:51.500
> 
> 标签：java, android

嗨，我正在使用 android 轮并获取时间值如下

```
 //get values of the wheel
                   hourvalue = hours.getCurrentItem();
                   Log.d(TAG, "hour value" +hourvalue );

                   minutevalue = mins.getCurrentItem(); 
                   Log.d(TAG, "minute value" +minutevalue ); 
```

我想将它们作为字符串传递给一个方法，我该怎么做，我还要分别获取小时和分钟的值我想将小时和分钟存储在一个字符串变量anAndroid中：警报dailog中的numberpicker

```
private String getTraceId(String fbuserser,int hour) {
        String traceId = null;
        HttpClient client = new HttpClient();
        GetMethod get = null;
        try {

            get = new GetMethod("http://" + Constants.CLOUD_SERVER_URL
                    + Constants.facebookTrace);

                NameValuePair[] params = new NameValuePair[4];
            NameValuePair param = new NameValuePair();
            param.setName("gadget");
            param.setValue("gettraceid");

            params[0] = param;
            param = new NameValuePair();
                param.setName("fbuserid");
            param.setValue(fduserUser);
            params[1] = param;

            param = new NameValuePair();
            param.setName("expiry");
        ------------->  param.setValue(hour);
            params[2] = param;

            get.setQueryString(params);
            int statusCode = client.executeMethod(get);
            traceId = get.getResponseBodyAsString();

        } catch (Exception e) {
            Log.e(TAG, "For Facebook Trace Id:", e);

        } finally {
            get.releaseConnection();
            get = null;
        }
        return traceId; 
```

在上述方法中，我想`int hour`作为字符串传递。感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:13:26.670

我*怀疑*你正在寻找简单的东西：

```
param.setValue(String.valueOf(hour)); 
```

还有`Integer.toString(hour))`，但我喜欢这样一个事实，即我可以使用`String.valueOf`所有*类型*，而不用担心它:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:14:43.003

将您的 int 转换为字符串。

```
String h = String.valueOf(hour); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:41:58.463

您还可以连接：

```
String h = hour+""; 
```

# php - 使用格式化数字在 PHP 中对数据表进行排序

> ID：14891303
> 
> 赞同：0
> 
> 时间：2013-02-15T09:10:55.810
> 
> 标签：php, datatables

我有一个问题，找不到任何解决方案。我有一个数据库，从那里我选择了很多信息，然后计算这些数据。

```
 $table->td(              
            array($row->mailing_id, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array($row->mailing_unique_id, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array($row->mailing_name, "width=\"300\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array($row->campaign_id, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array($row->segment_name, "width=\"100\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""), 
            array($row->total_sent, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(@$viewSum[$row->mailing_unique_id], "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(@number_format((@$viewSum[$row->mailing_unique_id] * 100)/$row->total_sent,  2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(number_format(@$leadssum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(@number_format((@$leadssum[$row->mailing_unique_id]*100)/$row->total_sent,2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(@number_format((@$leadssum[$row->mailing_unique_id] * 100)/@$viewSum[$row->mailing_unique_id], 2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(number_format(@$crossviewSum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(number_format(@$crossleadsSum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(@number_format((@$crossleadsSum[$row->mailing_unique_id] * 100)/@$crossviewSum[$row->mailing_unique_id], 2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
            array(@number_format(((@$leadssum[$row->mailing_unique_id]+@$crossleadsSum[$row->mailing_unique_id])/$row->total_sent)*100, 2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\"")
           ); 
```

但是当我在 DataTables 中显示所有数据时，排序不正确。表认为 1.800 小于 999，但它是千位分隔符。数据是这样的：

```
999
888
5.656
4.655
322
2.333
122 
```

编辑 - - - - - - - - -

这是主要查询：

```
$query = sprintf("
           SELECT stat_mailings.mailing_id, stat_mailings.cat_id, stat_mailings.mailing_name, stat_mailings.mailing_unique_id, stat_mailings.segment_id,
            stat_mailings.campaign_id, stat_mailings.landing_page, stat_mailings.total_sent, pecumail_segments.segment_name, categories.category FROM `stat_mailings`
            JOIN pecumail_segments ON stat_mailings.segment_id=pecumail_segments.segment_id
            JOIN categories ON stat_mailings.cat_id=categories.id 
```

这是我的代码，我在其中打印所有数据：

```
 $table = new datatable("100%", "border=\"0\" cellpadding=\"0\" cellspacing=\"0\" style=\"margin-left: auto;margin-right: auto;margin-left: -135px;\""); 

   $table->th("Mailing ID", "Unique id", "Mailing", "UTM campaign", "Segment", "Vezonden", "Views", "CTR", "Leads", "STL","Conversie", "Crossviews", "Crossleads","Crossconv","STLa");

   $analyzedata = getAnalyze();
   $leads = getLeads();
   $views = getViews();
   $crossviews = getCrossViews();
   $crossleads = getCrossLeads();

      while ($row1 = $leads->fetch_object()) {  
        $leadsData = count($row1->pema_mid);        
        @$leadssum[$row1->pema_mid] += $leadsData; 
      } 

      while ($row2 = $views->fetch_object()) {
        $countedViews = count($row2->pema_mid);        
        @$viewSum[$row2->pema_mid] += $countedViews;
      }

      while ($row3 = $crossviews->fetch_object()) {
        $countedCrossViews = count($row3->pema_mid);        
        @$crossviewSum[$row3->pema_mid] += $countedCrossViews;
      }

       while ($row4 = $crossleads->fetch_object()) {
        $countedCrossLeads = count($row4->pema_mid);        
        @$crossleadsSum[$row4->pema_mid] += $countedCrossLeads;
      }

      while($row = $analyzedata->fetch_object()){

          $totalSent = number_format($row->total_sent, 0, '.', '.');

       $table->td(              
                array($row->mailing_id, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array($row->mailing_unique_id, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array($row->mailing_name, "width=\"300\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array($row->campaign_id, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array($row->segment_name, "width=\"100\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""), 
                array($totalSent, "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(number_format(@$viewSum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(@number_format((@$viewSum[$row->mailing_unique_id] * 100)/$row->total_sent,  2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(number_format(@$leadssum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(@number_format((@$leadssum[$row->mailing_unique_id]*100)/$row->total_sent,2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(@number_format((@$leadssum[$row->mailing_unique_id] * 100)/@$viewSum[$row->mailing_unique_id], 2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(number_format(@$crossviewSum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(number_format(@$crossleadsSum[$row->mailing_unique_id],0, '.', '.'), "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(@number_format((@$crossleadsSum[$row->mailing_unique_id] * 100)/@$crossviewSum[$row->mailing_unique_id], 2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\""),
                array(@number_format(((@$leadssum[$row->mailing_unique_id]+@$crossleadsSum[$row->mailing_unique_id])/$row->total_sent)*100, 2, '.', '.').'%', "width=\"20\" style=\" border-bottom-width: 1px; border-bottom-style: solid;\"")
               );

 }

  echo  $html = $table->getHTML(); 
```

这是我的 DataTable 脚本

```
$(document).ready(function() {
$('#example').dataTable( {
    "aoColumns": [
        null,
        null,
        null,
        { "sType": "numeric-comma" },
        { "sType": "numeric-comma" },
        { "sType": "string" },
        { "sType": "formated-num" },
        { "sType": "percent" },
        { "sType": "numeric-comma" },
        { "sType": "percent" },
        { "sType": "percent" },
        { "sType": "numeric-comma" },
        { "sType": "percent" },
        { "sType": "percent" },
        null
    ]
} ); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:57:33.460

您必须从数据库中对此进行排序。看着你的代码，

```
while ($row1 = $leads->fetch_object()) { } 
```

看起来它一次从表 1 中抓取一个对象或行。如果这样做了，那么您以后就无法对其进行排序。您要么必须从数据库中对其进行排序，要么从具有 fetch_object() 函数的类中对其进行排序-大概会循环遍历结果并将它们创建为对象？如果该类恰好是一个 Iterator 实现，那么您只能选择从数据库中对其进行排序。

在 PHP 中唯一可以排序的是将值作为键并按键对数组进行排序 - 但显然，如果您有 2 个或多个相同的值，因为它们会相互覆盖，这将不起作用。

# java - Android - 图像视图不显示照片

> ID：14891304
> 
> 赞同：1
> 
> 时间：2013-02-15T09:10:55.410
> 
> 标签：java, android, image

快速提问，这是我的布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/our_photo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/image_description"/>

<Button
    android:id="@+id/our_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/button_photo"
    android:onClick="TakePhoto" />

<Button
    android:id="@+id/load_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/show_photo"
    android:onClick="ShowPhoto" />

<TextView
    android:id="@+id/our_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/file_directory" />

 </LinearLayout> 
```

这是我的代码，我尝试显示从画廊加载的图像（图像刚刚创建，所以它确实存在，它加载它 - 在调试模式下我可以看到 myBitmap 对象不是空的）但它不显示任何事物。我试图创建一个黑色位图只是为了查看它是否是布局缺陷，但它显示它很好，它目前不适用于文件。

```
public void ShowPhoto(View v) {
    File imgFile = new  File(mCurrentPhotoPath);
    if(imgFile.exists()){
         //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        try {
            BitmapFactory.decodeStream(new FileInputStream    (imgFile),null,o);
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }

        //The new size we want to scale to
        final int REQUIRED_SIZE_X=240;
        final int REQUIRED_SIZE_Y=400;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE_X && o.outHeight/ scale/2>=REQUIRED_SIZE_Y)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        Bitmap myBitmap=null;
        try {
            myBitmap = BitmapFactory.decodeStream(new FileInputStream(imgFile), null, o2);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        Display display = getWindowManager().getDefaultDisplay();
        Point screenSize = new Point();
        display.getSize(screenSize);
        //imageView.setMinimumHeight(screenSize.y/2);
        //imageView.setMinimumWidth(screenSize.x/2);

        imageView.setImageBitmap(Bitmap.createScaledBitmap(myBitmap, screenSize.x/2, screenSize.y/2, false));
    } 
```

在调试模式下，没有异常等。一切顺利，没有结果。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:30:55.470

看起来您忘记引用您的`ImageView`.

```
ImageView imageView = (ImageView) findViewById(R.id.our_photo); 
```

# android - 无法启动活动 ComponentInfo - android.view.InflateException：二进制 XML 文件行 #25

> ID：14891309
> 
> 赞同：2
> 
> 时间：2013-02-15T09:11:11.637
> 
> 标签：android, android-intent, android-emulator

我正在制作一个应用程序，我在其中向用户提供首选项，在这里我给出了一个选项，即**About Floogoo App**。

现在我想每当用户点击**About Floogoo App**选项时，需要重定向到 WebURL，例如：www.floogoo.com

现在我想每当用户点击 About Floogoo App > 它调用 OpenURL 类

并且在 Manifest.xml 我给了 PreferenceWindow 类

出现类似错误：**不幸的是应用程序已停止**

*无法启动活动 ComponentInfo {com.chr.tatu.sample.friendslist/com.chr.tatu.sample.friendslist.contacts.PreferenceWindow}：android.view.InflateException：二进制 XML 文件第 25 行：膨胀类 com.chr 时出错.tatu.sample.friendslist.contacts.TimePickerPreferences*

ScreenShot 已使用此进行测试：

```
 <com.chr.tatu.sample.friendslist.contacts.TimePickerPreference
    android:defaultValue=""
    android:key="about"
    android:summary="Summar"
    android:title="About App" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:48:49.513

更改您的代码。

```
Intent browserIntent = 
    new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com"));
    startActivity(browserIntent); 
```

和

```
Uri uri = Uri.parse("http://www.google.com");
Intent browserIntent = new Intent(Intent.ACTION_VIEW, uri );
startActivity(browserIntent); 
```

让我知道。

# php - 强制代码在页面关闭后继续运行

> ID：14891311
> 
> 赞同：4
> 
> 时间：2013-02-15T09:11:21.083
> 
> 标签：php

我有一个运行几分钟的 While 循环（函数），有时可能需要 10 分钟，有时需要 30 分钟。

我不想让用户等待网页窗口打开 30 分钟，我想让用户关闭窗口并让循环自行继续。

我希望用户打开网页单击一个按钮以启动该功能，然后关闭该页面并让该功能自行工作。

有没有可能发生这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:16:45.260

你可以去看看[`fastcgi_finish_request()`](http://php-fpm.org/wiki/Features#fastcgi_finish_request.28.29)。它允许您的脚本继续运行，但“挂断”与浏览器的连接。当然应该小心使用它，否则您可能会冒许多进程在半后台运行的风险。

当然，这仅适用于 php-fpm。否则你会看到类似的东西[`gearman`](http://gearman.org/)，基本上是任何类型的任务调度程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:29:34.430

如果脚本超时（`max_execution_time`设置 in `php.ini`）对您来说没有问题，您可以使用**[`ignore_user_abort(true)`](http://php.net/manual/en/function.ignore-user-abort.php)**.

但通常此类任务的更好解决方案是在后台生成它们。您可能对Gearman**[扩展](http://php.net/gearman)**`exec`或.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:13:32.660

用户操作不会导致脚本停止。

脚本将继续运行，直到完成或超时（在大多数服务器上为 15 或 30 秒），因此如果您有自己的服务器或没有超时的私人服务器，您的脚本将运行 30 分钟，用户对其没有任何影响.

您应该关注的是 - 如果用户在时间范围内刷新页面或再次访问，则不要让脚本再次运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:19:48.173

```
function execInBackground($cmd) { 
    if (substr(php_uname(), 0, 7) == "Windows"){ 
        pclose(popen("start /B ". $cmd, "r"));  
    } 
    else { 
        exec($cmd . " > /dev/null &");   
    } 
} 
```

或 db + cron 解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T10:05:50.237

我过去做过类似的事情。

```
class Task {
  function add($command)
  function execute();
}

class TaskManager {
  function run(){
    $task->execute();
  }
} 
```

任务作为脚本或 shell 命令添加到队列（数据库、平面文件、刻在石头上的任何东西）中。然后 TaskManager 作为服务运行（在[http://php.net/manual/en/function.pcntl-fork.php](http://php.net/manual/en/function.pcntl-fork.php)有一些很好的评论）并不断从队列中取出第一项并执行它。

通过这种方式，您可以在后台为长时间运行的任务提供服务，并且您不会启动很多恶意进程。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T10:26:42.780

我认为您需要重新考虑为什么要像这样在前端运行如此长的进程。为什么不放置一个工作队列并让后台守护程序或服务进程尽可能快地运行。

如果太多人有打开的进程并且 php 无法启动任何新线程，目前会发生什么？

发生错误或需要重试处理时会发生什么？

# php - Codeigniter 表

> ID：14891319
> 
> 赞同：1
> 
> 时间：2013-02-15T09:11:51.127
> 
> 标签：php, codeigniter

我正在做一个项目，该项目需要我在一列中显示所有数据。该表应该是 2 列，向下 7 行，其中一列将包含来自数据库的数据，而其他列将具有要检查的复选框。

我怎样才能制作这样的桌子？我尝试在数组中使用模板，然后加载它：

```
$this->table->set_template($tmp1); 
```

但它不起作用，它仍然在一行中显示所有内容。

这是我的代码：

视图.php

```
<body> 
    <h1>Answer</h1>
    <div id="pagination">

<?php echo $this->table->generate($records);?>

<?php echo $this->pagination->create_links(); ?> 
```

控制器.php

```
 function index()
       {            
        $this->load->library('pagination');
        $this->load->library('table');          
        $config['base_url'] = 'http://localhost/admin/index.php/survey/index';
        $config['total_rows'] = $this->db->get('save_survey')->num_rows();

        $config['per_page'] = 1;
        $config['num_links'] = 10;
        $config['full_tag_open'] = '<div id="pagination">';
        $config['full_tag_close'] = '</div>';

        $this->pagination->initialize($config);
      //print_r($this->uri->segment());die;

        $data['records'] = $this->db->get('save_survey', $config['per_page'], $this->uri->segment(3, 0))->result_array();

        $data['pagination'] = $this->pagination->create_links();
        $this->load->view('survey_view', $data);

      }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:40:31.093

如果要创建包含复选框的自定义表格

最好的方法是手动生成表，您可以通过以下方式执行此操作

```
$data['records'] = $this->db->get('save_survay', $config['per_page'], $this->uri->segment(3, 0))->result_array();
foreach($data['records'] as  $record) 
{
    $this->table->add_row(
                 form_checkbox($data, $value),
                 $record['col1'],
                 $record['col2']
    )
} 
```

并且不要忘记自己设置标题

```
 $this->table->set_heading('h1','h2',...etc) 
```

# ios - 如何针对 iOS 4.2.1 和 iOS 6.1 使用 4" Retina 显示屏而不使用信箱

> ID：14891320
> 
> 赞同：2
> 
> 时间：2013-02-15T09:11:52.057
> 
> 标签：ios, retina-display

由于 Xcode 4.4 不支持带有 4" 视网膜显示屏的 iOS 6.1 设备，而 Xcode 4.6 不支持 ios 4.2 设备，我向 App Store 提交了两个不同的应用程序，一个用 4.4 编译，一个用 4.6 编译，因此我可以针对 3G 和无需在 iPhone 5 和最新的 iPod Touch 中使用信箱视图。质量保证已拒绝该应用程序为重复。解决此问题的最佳方法是什么？

# internet-explorer - 如何在 IE 中使用 CORS 从 https 调用 http？

> ID：14891325
> 
> 赞同：2
> 
> 时间：2013-02-15T09:12:28.740
> 
> 标签：internet-explorer, http, https, cors

我有一个 HTTPS 站点，需要使用 CORS 调用 HTTP 站点（提供 JSON REST 服务）。

使用 Chrome 和 Firefox 没有问题。

使用 IE（从 IE8 到 IE10 测试）时，我们有“访问被拒绝”。

我正在寻找一种绕过这种约束的方法。我不想使用 iframe 或小程序。有人知道使用 CORS 混合 HTTP/HTTPS 的方法吗？

是否有其他选择：

*   也许是 websockets（但我们至少需要 HTML5 / IE10）？
*   jsonp？
*   JSON请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:15:35.227

我不认为你可以在 IE8 或 IE9 中做到这一点。[请参阅此博客文章](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)中的第 7 点，“请求必须针对与托管页面相同的方案”

Websockets 可以帮助您使用 Firefox 和 IE10，但您可能希望查看通过 https 传输 http web 服务的服务器端代理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T13:54:20.647

您不能在 IE8/9 上拨打电话`http`，`https`但对于任何对此感兴趣的人来说，[此链接](http://www.webdbg.com/test/xdm/httptohttps.asp)显示了一个解决方法，说明您可以如何执行相反的操作，即`https`从`http`.

# asp.net-mvc - 导出 Orchard 1.6 中缺少自定义部件属性

> ID：14891326
> 
> 赞同：6
> 
> 时间：2013-02-15T09:12:33.627
> 
> 标签：asp.net-mvc, orchardcms, orchardcms-1.6

我在 Orchard 1.6 中的导入导出模块有问题：
我想导出一个自定义类型，其中包含一个具有属性的部分。导出的 XML 包含来自 TitlePart、CommonPart、BodyPart 和 AutoroutePart 的数据，但是我自己的部分的数据不存在。

有什么我应该做的，比如实现一个接口或覆盖我的某些东西，以便它包含在导出 XML 中？导出模块的扩展点是什么（如果有的话）？我有模块的来源，但找不到。

特定导出模块的 module.txt 为：
*名称：Import 导出
路径：ImportExport
AntiForgery：启用
作者：The Orchard Team
网站：[http](http://orchardproject.net)
://orchardproject.net 版本：1.6
OrchardVersion：1.4
描述：提供内容项数据导入和导出能力。
FeatureDescription：导入和导出内容项数据
类别：内容*

提前致谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T10:32:33.340

您需要覆盖内容部分驱动程序中的导出/导入方法。这是一个简单的例子`Orchard.Core.Title.Driver.TitlePartDriver`：

```
protected override void Importing(TitlePart part, ImportContentContext context) {
    var title = context.Attribute(part.PartDefinition.Name, "Title");
    if (title != null) {
        part.Title = title;
    }
}

protected override void Exporting(TitlePart part, ExportContentContext context) {
    context.Element(part.PartDefinition.Name).SetAttributeValue("Title", part.Title);
} 
```

该类`ImportExportContext`提供对用于生成输出文档的底层 XML 结构的访问，因此如果您习惯于使用 System.Xml.Linq、XDocument 等，那么它看起来都很熟悉。

`Orchard.Core.Common.Drivers.CommonPartDriver`在、`Orchard.Users.Drivers.UserPartDriver`和中还有其他一些用法示例`Orchard.Comments.Drivers.CommentPartDriver`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T16:11:40.430

您可以尝试使用反射：

```
 string[] notRequiredExportProperties = new string[] 
            {
                "Record", 
                "ContentItem", 
                "Zones", 
                "Id", 
                "TypeDefinition", 
                "TypePartDefinition",
                "PartDefinition", 
                "Settings", 
                "Fields"
            };

        protected override void Importing(ContactPart part, Orchard.ContentManagement.Handlers.ImportContentContext context)
        {
            var contactRecordType = part.Record.GetType();
            var allProps = contactRecordType.GetProperties();
            foreach (PropertyInfo p in allProps)
            {
                if (Array.FindIndex(notRequiredExportProperties, i => i == p.Name) > -1)
                    continue;

                var importValue = context.Attribute(part.PartDefinition.Name, p.Name);
                var import = Convert.ChangeType(importValue, p.PropertyType);
                if (p.PropertyType.IsSubclassOf(typeof(Enum)))
                    continue;
                p.SetValue(part.Record, import, null);
            }
        }

        protected override void Exporting(ContactPart part, Orchard.ContentManagement.Handlers.ExportContentContext context)
        {
            var contactPartType = part.GetType();
            var allProps = contactPartType.GetProperties();
            foreach(PropertyInfo p in allProps)
            {
                if (Array.FindIndex(notRequiredExportProperties, i => i == p.Name) > -1)
                    continue;

                var propVal = p.GetValue(part, null);
                context.Element(part.PartDefinition.Name).SetAttributeValue(p.Name, propVal);
            }
        } 
```

您可能需要做一些额外的工作才能使其支持 Enums 等。这可能应该在某种辅助类中。

# php - 跳过 Facebook 身份验证时，我不应该返回一个适当的值来指示用户的决定吗？

> ID：14891329
> 
> 赞同：9
> 
> 时间：2013-02-15T09:12:41.190
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

在我的应用程序中，我有以下代码：

```
$loginUrl = $facebook->getLoginUrl( array( 'scope' => 'publish_stream' ) );
header("Location: ".$loginUrl); 
```

它将用户带到 facebook 并询问他们：

```
'[oshirowanens app] would also like permission to:
Post on your behalf
This app may post on your behalf, including status updates, photos and more.
Allow - Skip 
```

如果单击`Skip`，我将被重定向回我的应用程序，我希望在其中看到以下 url 参数`error`，`error_reason`，以及`error_description`当我的用户无法登录其 Facebook 帐户时会发生什么情况？

> （可选）登录/授权过程完成后将用户重定向到的 URL。用户将在登录成功和失败时都被重定向到 URL，因此您必须按照身份验证文档中的说明检查 URL 中的错误参数。如果未指定此属性，则用户将被重定向到当前 URL（即调用此方法的页面的 URL，通常是用户浏览器中的当前 URL）。

来源：[https ://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

是否存在类似的跳过权限认证请求的东西`publish_stream`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:51:01.290

实际上，如果您从 FB 看到登录过程，这将是两步过程。

首先，您将被要求使用您的 FB 帐户登录，在同一页面上，您可以看到应用程序正在向用户寻求的“基本权限”列表。

在此步骤之后，您将看到另一个包含一组权限的对话框，这些权限称为“*接受*”和“*跳过”的*[**扩展权限**](http://developers.facebook.com/docs/reference/login/extended-permissions/)。扩展权限是用户可以决定跳过的权限，即使跳过后用户也可以访问应用程序。

 ****因此，当用户跳过扩展权限时，FB 不会将此视为错误，因此不会将任何内容返回给应用程序。**

尽管如此，如果您觉得您请求的权限对您的应用程序很重要，您可以在您即将执行与该权限相关的操作时询问他们。在您的情况下，当您要在用户的墙上发帖时，您可以请求该权限，然后执行操作。

请参阅[此处](https://developers.facebook.com/docs/facebook-login/permissions#handling)了解如何处理丢失的权限。

您还可以访问关于请求权限的[最佳实践的 FB 指南。](https://developers.facebook.com/docs/facebook-login/checklist)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T09:43:36.220

我不认为你能得到错误。

您可能需要通过调用来检查授予的权限`/me/permissions`。

> [https://graph.facebook.com/me/permissions?access_token=OAUTH_ACCESS_TOKEN_HERE](https://graph.facebook.com/me/permissions?access_token=OAUTH_ACCESS_TOKEN_HERE)

这将返回一个像这样的 json 对象：

```
{
  "data": [
    {
      "installed": 1, 
      "user_interests": 1
    }
  ], 
  "paging": {
    "next": "https://graph.facebook.com/SOME_USERID/permissions?limit=5000&offset=5000"
  }
} 
```

使用 facebook 的 php sdk 应该是这样的：

```
$permissions = $facebook->api("/me/permissions");
if( array_key_exists('publish_stream', $permissions['data'][0])) {
 // granted
} else {
 // skipped
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-15T09:17:00.283

## 试试这个 ！

```
$facebookUser = $facebook->getUser();

if ($facebookUser) {
    try {
// Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        print_r($e);
    }
} 
```

或者

[facebook 连接 api 回调 url](https://stackoverflow.com/questions/6158008/facebook-connect-api-callback-url)**

# ios - FFT 后的值

> ID：14891332
> 
> 赞同：2
> 
> 时间：2013-02-15T09:13:03.803
> 
> 标签：ios, objective-c, fft, accelerate-framework

我正在尝试创建一个音频可视化器。

我正在使用快速傅立叶变换来查找频率。

```
memset(_window, 0, sizeof(float)*_windowSize);
memset(_A.imagp, 0, nOver2 * sizeof(float));

vDSP_hann_window(_window, _windowSize, vDSP_HANN_NORM);

for (int i=0; i < _windowSize; i++) {
    if (player && ioData) {
        _inPutBuffer[i] = ((SInt16*) ioData->mBuffers[0].mData)[i];
    }
}

vDSP_vmul(_inPutBuffer, 1, _window, 1, _transferBuffer, 1, _windowSize);

vDSP_ctoz((COMPLEX*)_transferBuffer, 2, &(_A), 1, nOver2);

vDSP_fft_zrip(_fftSetup, &_A, stride, log2n, FFT_FORWARD);

vDSP_vsmul(_A.realp, 1, &_scale, _A.realp, 1, nOver2);
vDSP_vsmul(_A.imagp, 1, &_scale, _A.imagp, 1, nOver2);

_A.imagp[0] = 0.0f;

vDSP_zvmags(&_A, 1, _obtainedReal, 1, nOver2);

float frequencyArray[n];

for (int i=1; i <=kIndicatorsCount; i++ ) {
    float res = 0;
    for (int j=0; j <=32; j++) {
        res += _obtainedReal[i*32+j];
    }
    res = res / 32;
    OutputBuff[i] = res;
} 
```

但是输出的值却是非常不同的，例如，一种情况下输出值可以是0到1，另一种情况下输出值可以是0到5.0E+6。

是否可以将输出值带到一定的范围（例如0到1）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T14:09:17.297

由于这个原因，FFT 的幅度输出通常以[分贝为单位进行可视化。](http://en.wikipedia.org/wiki/Decibel)当存在大组件时，分贝允许仍然看到非常小的组件。转换很简单。由于`vDSP_zvmags`给出平方幅度，您可以使用以下方法转换为 dB：

```
dbval = 10 * log10(mag2val); 
```

或见`vDSP_vdbcon`。

这可以通过除以 dB 值的最大值在 0 和 1 之间进行归一化，但您可能不想动态更改此参考点，因为它会导致恒定幅度的可视化跳跃。最好只弄清楚哪些范围是典型的并将其标准化为该固定值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:42:39.297

问题应该是 vDSP_zvmags(&_A, 1, _obtainedReal, 1, nOver2);

根据 Apple 文档：vDSP_zvmags 计算复数向量 A 的平方幅度。

我的意思是幅度是根据 Pitagora 定理，你应该使用 vDSP_vpythg （矢量毕达哥拉斯；单精度。）

之后，您可以使用带有标志 __vDSP_F 的分贝转换 vDSP_vdbcon 到功率 (0) 或振幅 (1) 标志

希望这有帮助

# java - 在我的 android 应用程序中使用 ImageMagick

> ID：14891333
> 
> 赞同：6
> 
> 时间：2013-02-15T09:13:04.847
> 
> 标签：java, android, image-processing, imagemagick

我不知道如何在 Android 上使用 ImageMagick。请有人指导我如何开始？我应该下载什么或我应该做什么？我搜索了许多堆栈问题以及许多站点，但仍然不清楚该怎么做。

# javascript - 如何在 Magento 中将 CSS 文件添加到 CUSTOM WIDGET？

> ID：14891335
> 
> 赞同：5
> 
> 时间：2013-02-15T09:13:20.300
> 
> 标签：javascript, css, magento, widget

所以，我有Magento**的****自定义小部件**（如产品幻灯片）。

 **并希望将自定义**CSS / Javascript**添加到我的小部件。

我不想每次都显示（加载）CSS / JS 文件。

* * *

***我只想在 PAGE 包含自定义小部件时加载 JS/CSS。***

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-14T08:40:52.727

这取决于您是否已将小部件添加为小部件实例（CMS -> 小部件）或已将其包含在页面、静态块或电子邮件的内容区域中，如下所示：`{{widget type="blabla/carousel"}}`.

如果您已将其作为小部件实例包含在内，则可以像这样添加资产：

```
protected function _prepareLayout() {
    if ($head = $this->getLayout()->getBlock('head')) { 
        $head->addCss('myfile.css');
    }
    return parent::_prepareLayout();
} 
```

..在你的块中实现`Mage_Widget_Block_Interface`.

（见[http://www.magentocommerce.com/boards/viewthread/212110/](http://www.magentocommerce.com/boards/viewthread/212110/)）

AFAIK，当您将小部件内联作为模板指令包含时，不可能添加资产。这仅仅是因为 HTML 头已经输出了它的 HTML：在块的 _toHtml 阶段会注意到模板指令（例如`{{widget}}`or ）。`{{var}}`在已经渲染的块上调用任何方法都不会产生任何效果。

另请参阅方法中的`$processor->filter`调用`_toHtml``Mage_Cms_Block_Page`

```
protected function _toHtml()
{
    /* @var $helper Mage_Cms_Helper_Data */
    $helper = Mage::helper('cms');
    $processor = $helper->getPageTemplateProcessor();
    $html = $processor->filter($this->getPage()->getContent());
    $html = $this->getMessagesBlock()->toHtml() . $html;
    return $html;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-09T21:24:34.297

我知道这个问题已经相当老了，但是如果有人在寻找添加 CSS 或 javascript 的方法，只有在包含 magento 小部件时（不需要它是 Erfan 给出的答案中的“小部件实例”） ) 我建议在您的 phtml 模板文件中使用一个小的 ajax 脚本。如果您的设计包不使用 jQuery，那么您的代码可能会有所不同。

```
jQuery(document).ready(function(){
jQuery.when(
    jQuery.ajax({
        type: "GET",
        url: "<?php echo $this->getSkinUrl('css/myWidget.css');?>",
        success: function(data){
            jQuery("head").append("<style>" + data + "</style>");
        },
        dataType: "html",
        cache: false,
    }),
    jQuery.ajax({
        type: "GET",
        url: "<?php echo $this->getSkinUrl('js/myWidget.js');?>",
        dataType: "script",
        cache: false,
    })

).then(function(){
        myWidget.setupFunction();
    });   
}); 
```**

# jquery - Jquery自动完成一个输入更多的值

> ID：14891344
> 
> 赞同：0
> 
> 时间：2013-02-15T09:13:44.220
> 
> 标签：jquery, input

我的标题可能有点难以理解。我正在尝试使用 jquery 自动完成来执行以下操作：

看到这个小提琴：

[http://jsfiddle.net/96Y2y/](http://jsfiddle.net/96Y2y/)

如果用户键入“j”，他会得到 Jochen + John。到目前为止，一切都很好。假设他选择约翰。我想知道的是，在他选择了 John 之后，输入中的所有内容都被删除了，除了括号中的数字。结果应如下所示：

7、

在这个动作之后，用户应该能够在逗号之后再次开始写一个名字，假设他写了“克里斯”，在他选择之后，输入应该如下所示：

7、9

等等。这可能吗？

我认为第一步是检查“onfinishedselect”动作

```
select: function (event, ui){
alert("|" + $("#targetID").val() + "|1stAlert");
} 
```

就像在这篇文章中一样：[jQuery UI autocomplete 在选择一个项目后触发新事件](https://stackoverflow.com/questions/13843750/jquery-ui-autocomplete-fire-new-event-after-selecting-an-item)

亲切的问候，并感谢您的帮助，

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:54:30.347

您可以使用[多值演示](http://jqueryui.com/autocomplete/#multiple)的代码并使用正则表达式仅在括号之间插入数字：

```
function extractLast( term ) {
    return split( term ).pop();
}

function split( val ) {
    return val.split( /,\s*/ );
}

$(function() {
    var availableTags = [
        "Max (1)", 
        "Paul (3)",
        "John (7)",
        "Jochen (11)",
        "Chris (9)"
    ];
    $( "#tags" ) .autocomplete({
        minLength: 0,
        source: function( request, response ) {
            // We trim the search term before comparing to the source
            request.term = $.trim(request.term);
            // delegate back to autocomplete, but extract the last term
            response( $.ui.autocomplete.filter(
                availableTags, extractLast( request.term ) ) );
        },
        focus: function() {
            // prevent value inserted on focus
            return false;
        },
        select: function( event, ui ) {
            var terms = split( this.value );
            // remove the current input
            terms.pop();
            // add the number between parentheses for the selected item
            var num = ui.item.value.match(/\((\d+)\)/);
            var value = num[1];
            terms.push( value );
            // add placeholder to get the comma-and-space at the end
            terms.push( "" );
            this.value = terms.join( "," );
            return false;
        }
    });
}); 
```

在此处查看 jsFiddle：http: [//jsfiddle.net/96Y2y/2/](http://jsfiddle.net/96Y2y/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:28:23.400

也许最好的解决方案是将数字放在另一个不是自动完成的字段中。

您可以使用此插件的功能“onItemSelect”来做到这一点[https://github.com/dyve/jquery-autocomplete](https://github.com/dyve/jquery-autocomplete)

# visual-studio - 自动包含在 Visual Studio 之外创建的新文件

> ID：14891345
> 
> 赞同：2
> 
> 时间：2013-02-15T09:13:50.097
> 
> 标签：visual-studio, tfs, visual-studio-2012

**问题：**

如果我将图像保存在项目文件夹结构中的某个位置，我在 Visual Studio 之外创建的图像不会自动包含到我的项目中。

**问题：**

有没有办法自动包含添加到项目中任何文件夹的新文件？

我也使用源代码控制（团队基础服务器），如果新文件也被添加到它会很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T11:41:55.640

没有根据文件夹路径自动包含到可用的项目中。在 VS2012 中，团队资源管理器中有一个检测到的更改功能，您将在排除的更改下的检测到的链接中看到在 VS 之外添加/删除的任何文件。

对于源代码控制添加问题，您应该考虑使用具有 Windows 资源管理器扩展的 TFS 电动工具。使用它，您可以通过右键单击选项直接将新文件添加到 tfs。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T13:08:09.697

在项目文件中使用通配符。例如：

```
<Content Include="images\*" /> 
```

# android - 基于组件的安卓应用

> ID：14891346
> 
> 赞同：1
> 
> 时间：2013-02-15T09:13:58.327
> 
> 标签：android

这可能不是直接与编程相关的问题，而是基于架构的问题。我面临的挑战是将我的 android 应用程序分成几部分，因此它是高度可配置的。我想做这个来处理不同的客户需求，注意这个应用程序不应该在 Google Play 中发布。今天我的应用程序有一些组件将是标准的而不是可配置的组件。这些组件的示例是带有[Slidemenu](http://actionbarsherlock.com/)的[ActionbarSherlock](https://github.com/jfeinstein10/SlidingMenu)。下面的插图希望能给你这个想法

![在此处输入图像描述](../Images/b99efd48205265af5f3281562806a56a.png)

注意：`Workflow 2`并且`Workflow 3`具有完全不同的逻辑和布局。

我的一些逻辑已经处理，我有一个发送不同交易的方法。交易类型可以是 my`email`或 a`webservice`

我处理这个问题的方法是实现一个`interface`：

```
public interface ISender {
    public abstract int send(Context c, String attachmentPath, String identifier); 
} 
```

我有一个类`SenderFactory`，其方法的类型`ISender`将返回一个`ISender`对象：

```
public static ISender createSender(Context context) throws InvalidWorkflowException   {

  if(WorkflowChooser.GetWorkflow().equals("mail")) 
      return new MailSender();
  else if(WorkflowChooser.GetWorkflow().equals("webservice")) 
      return new WebserviceSender();
  else
    throw new InvalidWorkflowException("The Application doesn't support this way of transfering cases"); 

} 
```

这个方法是从我的`CreateTransaction`课上调用的

```
 public int createTransaction(String pcn, String fileName) throws MailException {

        try
        {
            ISender s = SenderFactory.createSender(context);
            sent = s.send(context, fileName, pcn); 
        } 
        catch(InvalidWorkflowException e) {
            _log.error(e.getMessage());
        }
        return sent;
    }
} 
```

这样，我的应用程序将根据`xml-file`我的构建中包含的事务来决定使用哪种类型的事务。

您可能已经知道，如果您阅读了这篇长文，我想将其应用到我的整个项目中，不仅适用于逻辑，还适用于`UI`, 以使其更加基于组件。我想知道什么是最佳实践，有什么推荐的方法吗？有人有以前项目的例子吗？

# symfony - IE8 网页调试工具栏和 CSS/JS

> ID：14891347
> 
> 赞同：0
> 
> 时间：2013-02-15T09:14:04.080
> 
> 标签：symfony

我正在使用 Symfony2 并使用 VMWare 模拟 IE8。我的 Web 调试工具栏及其显示有问题。

我不知道为什么工具栏不能正常工作。

也许有一些 JS 问题，但我什么也没找到。如果我点击任何项目，我会看到详细信息页面，但在那里，我有一个 JS 错误，这就是为什么我会为我的工具栏考虑一个 JS 错误。

![在此处输入图像描述](../Images/6545b560ab701d04773b46624068cbe8.png)

# java - 如何在 java 中对 url 字符串进行编码以不将 + 符号放在空格中？

> ID：14891350
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:14:06.437
> 
> 标签：java, json

我有一个 JSONParser 类，可以让我进行 HTTPRequests。所以这里是类

```
package com.thesis.menubook;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET mehtod
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);
                Log.d("URL",url);
                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }          

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line+ "n" );
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
            Log.e("JSON Parser", "json string :" +json);
        }

        // return JSON String
        return jObj;

    }
} 
```

我像这样访问它。

```
params.add(new BasicNameValuePair("category", "MAIN DISH"));
            JSONObject json = jsonParser.makeHttpRequest("http://"+ipaddress+"/MenuBook/selectMenu.php", "GET", params); 
```

我想保持参数的格式，MAIN DISH。但是当我查看我的 LogCat 时，它会返回一个这样形成的 url。

`http://192.168.10.149:80/MenuBook/selectMenu.php?category=MAIN+DISH`

然后导致我的应用程序失败并强制关闭，因为我没有像 MAIN+DISH 这样的类别

我希望我的 URL 是这样形成的。

`http://192.168.10.149:80/MenuBook/selectMenu.php?category='MAIN DISH'`

然后将返回正确的结果。我在网上四处搜索，只找到了制作空白的解决方案，`+`并且`%20`不会返回正确的结果。

您可以提出任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:16:53.767

你的问题体现了一个矛盾的术语。URL-encoding（实际上是form-encoding）已经定义好了，并且已经定义了用'+'替换空格，而不是引用相关的值元素。服务器端软件需要理解这一点并采取相应的行动。Java 提供的所有服务器端软件，例如 HttpServletRequest，已经这样做了。如果您的代码不符合 RFC，请修复它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T09:40:06.297

我通过硬编码解决了它`'MAIN+DISH'`

# ios - 如何使用 commitEditingStyle 从 plist 中删除数组？

> ID：14891351
> 
> 赞同：2
> 
> 时间：2013-02-15T09:14:06.310
> 
> 标签：ios, objective-c, uitableview, plist

我有一个 UITableView，它通过以下代码由 plist 中的数组键填充：

```
-(void)viewWillAppear:(BOOL)animated
{
    // get paths from root direcory
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];
    NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)plistPath];
    viewerKeys = [dictionary allKeys];

    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ViewerName"];

        UILabel *label = (UILabel *)[cell viewWithTag:1000];
        label.text = [viewerKeys objectAtIndex:indexPath.row];
        return cell;
} 
```

我正在尝试启用滑动以删除表格视图中的每一行，当然这意味着我必须删除该行以及 plist 中的数组。这是我迄今为止尝试过的：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];
    NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)plistPath];

    NSString *key = [viewerKeys objectAtIndex:indexPath.row];
    [dictionary removeObjectForKey:[NSString stringWithFormat:@"%@", key]];

    NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
    [tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

但是它没有将数据写回 plist 并且我收到此错误：

`Invalid update: invalid number of rows in section 0\. The number of rows contained in an existing section after the update (2) must be equal to the number of rows contained in that section before the update (2), plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out).`

这就是我的 plist 的样子：

```
<plist version="1.0">
<dict>
    <key>(null)</key>
    <array>
        <string>Username</string>
        <string>Password</string>
        <string>http://www.google.com</string>
        <string>/whatever</string>
    </array>
    <key>Hello</key>
    <array>
        <string>admin</string>
        <string></string>
        <string>https://www.whatever.com</string>
        <string>/things</string>
    </array>
</dict>
</plist> 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:24:40.460

您的问题是您仅从字典中删除该对象。您`viewerKeys`仍然持有已删除的对象键。您需要`viewerKeys`在调用之前更新`deleteRowsAtIndexPaths:`

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
 NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
// get documents path
NSString *documentsPath = [paths objectAtIndex:0];
// get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];
NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)plistPath];

NSString *key = [viewerKeys objectAtIndex:indexPath.row];
[dictionary removeObjectForKey:[NSString stringWithFormat:@"%@", key]];

 [dictionary writeToFile:plistPath atomically:YES];
 viewerKeys = [dictionary allKeys];

NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
[tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

}

# javascript - 如何在多选 onchange 事件中获取复选框值

> ID：14891355
> 
> 赞同：0
> 
> 时间：2013-02-15T09:14:22.393
> 
> 标签：javascript, jquery, jquery-ui, multi-select

我实现了 jquery multiselect 并且它现在可以正常工作我需要添加额外的功能，当用户在下拉列表中选择另一个选项（选中另一个复选框）时，我想获取相关选项的值

![在此处输入图像描述](../Images/e4a02e6980323a3bfde480ba6f038ee4.png)

在上面的图片中没有插入复选框，它是由 jquery 自动插入的，现在我想要如果我选择复选框 = 框，`XYZ`那么我想得到`XYZ`它的`id`值`XYZ`

这是我如何实现它

```
 <select multiple="multiple" id="CParent" name="parent" class="box2 required">
                        @foreach (var item in Model.Categories.OrderBy(c => c.Name))
                        {

                            if (Model.Coupon.Categoryid.Id == item.Id)
                            {   
                            <option  selected="selected" value="@item.Id">@item.Name</option>

                            }
                            else
                            {
                            <option  value="@item.Id">@item.Name</option>                                                                                  
                            }
                        }
                    </select> 
```

这是在浏览器源中渲染后的样子

![在此处输入图像描述](../Images/3e148854cbba6d6e94a0af2e23e37b37.png)

提前感谢您帮助我。

我尝试过的

```
 $('#CParent input:checked').change(function () {

        var parentid = $(this).val()+'';
        var array = parentid.split(",");
        alert(array);
        getchildcat(array[array.length -1]);
    });

}); 
```

**编辑**

初始化多选的代码

```
$("#CParent").multiselect({
    header: "Choose only THREE items!",
    click: function () {
        if ($(this).multiselect("widget").find("input:checked").length > 3) {
            $(warning).show();
            warning.addClass("error").removeClass("success").html("You can only check three checkboxes!");
            return false;
        }
        else if ($(this).multiselect("widget").find("input:checked").length <= 3) {

            if ($(warning).is(":visible")) {

                $(warning).hide();
            }

        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:16:30.990

试试这个

```
$('#CParent').val(); 
```

这将为您提供选择框值

**或者**

来自[文档](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

```
 var array_of_checked_values = $("#CParent").multiselect("getChecked").map(function(){
   return this.value;   
 }).get(); 
```

# android - 在自定义 SurfaceView 中添加自定义视图

> ID：14891357
> 
> 赞同：1
> 
> 时间：2013-02-15T09:14:25.217
> 
> 标签：android, view, surfaceview

我有一个自定义的表面视图，我使用线程、构造函数和 onDraw 方法绘制了背景位图，这里我需要将自定义视图添加到表面视图中，如果可以的话，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:30:03.913

`SurfaceView`不是它*不能*持有`ViewGroup`其他观点。不过你可以自己画。

# content-management-system - 在CQ中如何禁用标签的最顶层节点

> ID：14891360
> 
> 赞同：0
> 
> 时间：2013-02-15T09:14:32.930
> 
> 标签：content-management-system, aem

添加标签时，有什么方法可以禁用标签的最顶层节点。

就像假设我有一个对话框，其中有一个带有 xtype= 标签的字段，标签是 XYZ，其中 A、B、C 是子节点。

我希望作者只选择 A 或 B 或 C。他不能选择 XYZ。

我该如何实现这一点。在 tagging_field.js

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T06:25:58.767

很抱歉这么久才回复，这可能对其他人有帮助。这可以像这样实现，如果用户/作者选择 xyz 标记，则将值添加到标记字段中，您可以使用 getValue 方法获取添加到标记字段中的值数组，如果数组包含 xyz 值，则删除使用 setValue 方法将 value 和 setValue 返回到标记字段

这是标签字段的 API 文档的链接，供您参考。[标签字段 API 文档](http://dev.day.com/docs/en/cq/current/widgets-api/index.html?class=CQ.tagging.TagInputField)

问候， Yash Ahuja。

# git - 如何在 Sublime Text 编辑器中显示 git 作者姓名？

> ID：14891364
> 
> 赞同：36
> 
> 时间：2013-02-15T09:14:38.957
> 
> 标签：git, annotations, sublimetext

我正在使用带有 Sublime 文本编辑器的[GitGutter 。](http://www.jisaacks.com/gitgutter)

使用这个插件 Git > This file > blame 将打开一个带有注释的新选项卡。

有什么方法可以在同一编辑窗口中显示 Git 注释，可能就在行号之前

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-14T02:58:23.537

好的，这里有几件事。

首先，该`git blame`功能不是我的[**GitGutter**](https://github.com/jisaacks/GitGutter)插件的一部分，它是[**Git**](https://github.com/kemayo/sublime-text-2-git)插件的一部分。

其次，@skuroda 是正确的，您只能在排水沟中放置一个图标。

你可以做些什么来模拟这个：是使用拆分窗格**View > Layout > Columns: 2**并将 git blame 放在左窗格中，将实际文件放在右窗格中。您将要关闭自动换行**视图 > 自动换行**

这是一个屏幕截图： ![在此处输入图像描述](../Images/5103f2289a87747976429b91d5da22ec.png)

* * *

那么您唯一的问题是在滚动时保持 2 个视图同步。我还没有测试过，但看起来这个 sublime 插件可能会这样做：[glue views](https://bitbucket.org/theblacklion/sublime_plugins/commits/3ea0c9e35d2f/#chg-glue_views.py)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-10-21T11:39:16.570

## 使用 Sublime Text 包[Git](https://packagecontrol.io/packages/Git)和 Command `Git: Blame`。

### 安装[Git](https://packagecontrol.io/packages/Git)包：

`Shift`+ `Command`+`P`

`Package Control: Install Package`

[![包控制：安装包](../Images/7a0c771351148ec6544c7c209e01c80c.png)](https://i.stack.imgur.com/kjUTC.png)

### 使用`Git: Blame`命令：

`Shift`+ `Command`+`P`

`Git: Blame`

[![吉特：责备](../Images/213aa912e0782994d05acf41ec792150.png)](https://i.stack.imgur.com/Wk6Ua.png)

### 结果

[![在此处输入图像描述](../Images/10bd820fd79756b9091f8f26e8d701dd.png)](https://i.stack.imgur.com/XfCxn.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-01T21:18:29.227

Rubymine（可能还有 IntelliJ）有一个`annotate`看起来像这样的特性：

[![在此处输入图像描述](../Images/1dec33d810f3d441a731fe3ffd43712d.png)](https://i.stack.imgur.com/SfMSJ.png)

上面的 JD Isaacks 回答是我所见过的最接近的回答，但我认为 Sublime Text 3 没有很多摆弄（正如他所描述的那样）具有这样的功能。Vscode 有类似的东西，一个“注释”扩展。

# c++ - 如何指定对隐藏的受保护基类成员的访问权限？

> ID：14891367
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:14:47.287
> 
> 标签：c++, visual-studio-2010, visual-studio, migration

我正在将这样的代码从 MS VS6 迁移到 VS2010：

```
class A
{
protected:
    typedef void (A::*X_t)(int x);
    virtual void CallX(X_t x) {}
    virtual void X() {}
    virtual void X(int x) {}
};

class B: public A
{
protected:
    virtual void X()
    {
        this->CallX(&A::X);
    }    
}; 
```

这在 MS VS6 中编译，但在 VS2010 中失败

```
error C2248: 'A::X' : cannot access protected member declared in class 'A' 
```

有没有办法摆脱这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:04:23.830

如果你看一下标准，11.4/1，说实话，这种语言让我很困惑。但是这个例子很清楚：

```
class B {
protected:
    int i;
    static int j;
};

class D1 : public B {
};

class D2 : public B {
    friend void fr(B*,D1*,D2*);
    void mem(B*,D1*);
};

... irrelevant stuff snipped

void D2::mem(B* pb, D1* p1) {
    ...
    int B::* pmi_B = &B::i; // ill-formed  *****this*****
    int B::* pmi_B2 = &D2::i; // OK
    ...
} 
```

[这里](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Fcplr129.htm)的文字虽然不是直接来自标准，但更清楚。

> 如果在友元或派生类 B 的成员函数中引用基类 A 的受保护非静态成员 x，则必须通过指向 A 派生类的指针、引用或对象来访问 x。但是，如果您正在访问 x 以创建指向成员的指针，您必须使用命名派生类 B 的嵌套名称说明符限定 x。

所以，如果我的理解在这里是正确的，Visual Studio 拒绝这一点是正确的。

要修复它，我不确定这是否正确，但它似乎在 VS2012 中为我解决了这个问题：

```
 this->CallX(&B::A::X); 
```

但是，同样的事情似乎不适用于 clang。

# jquery - JQUERY：动态事件未按预期工作

> ID：14891370
> 
> 赞同：0
> 
> 时间：2013-02-15T09:15:01.023
> 
> 标签：jquery

我正在为标签编写 jquery 代码。但是我遇到了一个看起来很奇怪的麻烦。

据我所知， Function on() 动态绑定事件。但是，在新添加了 [a href] 之后，这不会像那样工作。

希望有人帮助我解决问题，并感谢您查看我的问题。

这是我正在编写的代码。

```
<script type="text/javascript">'
$(document).ready(function() {

$("#tab_pay a").on("click", function(event){

event.preventDefault();

var idx = $('#tab_pay li').index($(this).closest("li"));

var spanText = $("#tab_pay .tab_ov").find("span").text();

//Removing class and replacing with <a> tag.
$("#tab_pay .tab_ov").removeClass("tab_ov").find("span").replaceWith("<span><a href='#'>" + spanText + "</a></span>");

$(this).closest("ul").find("li:eq(" + idx + ")").addClass("tab_ov");

//Removing <a>
var aText = $(this).text();
$(this).replaceWith(aText);
});
}); 
```

```
<div id=tab_pay class="tab_pay">
<ul>
<li class="tab_ov"><span>1</span></li>
<li><span><a href="#">2</a></span></li>
<li><span><a href="#">3</a></span></li>
<li><span><a href="#">4</a></span></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:18:19.033

调用是动态绑定的`on`，但调用它的对象是静态的。

您想改为绑定父级

```
$("#tab_pay").on("click", "a", function(event){
    ...
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:18:26.180

将事件绑定到一些不会更改的父元素或记录并使用您的选择器作为[.on](http://api.jquery.com/on/)中的第二个参数：

```
$(document).on("click", "#tab_pay a", function(event){
  // ...
}); 
```

# .net - 洋葱架构中的依赖解析

> ID：14891371
> 
> 赞同：11
> 
> 时间：2013-02-15T09:15:08.133
> 
> 标签：.net, asp.net-mvc, dependency-injection, onion-architecture

[Onion 架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)是一种构建应用程序以保持关注点分离和松散耦合的方式（示例项目位于：http : [//onionarch.codeplex.com/](http://onionarch.codeplex.com/)）。依赖注入/解决是该架构的一个关键方面，因为它用于将所有层联系在一起。

上面的链接包含一个关于如何使用 Onion 分层构造 ASP.NET MVC 的示例应用程序。我真的很喜欢它，但是这些示例中的大多数都使用 Ninject（我们都知道它很慢）。我想知道是否有人可以详细说明如何将不同的 DI 工具（如 SimpleInjector、Unity 或 Autofac）集成到 Onion 项目中。

关键是所有层都只有1个依赖（包括MVC项目），即Core层。除了 Dependency Resolution 层，该层可以引用所有层。

我很难将 MVC 项目设置为启动项目，使用 DI，并且不包括在 MVC 层中对 DI 工具的引用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-04T11:01:10.030

你的问题是

> “如何将不同的 DI 工具（如 SimpleInjector、Unity 或 Autofac）集成到 Onion 项目中？”

我使用的是 StructureMap 而不是 Ninject，它的集成方式应该适用于任何其他 DI 框架。

正如你所说，只有依赖解析层应该引用所有其他层，它是洋葱架构的最外层。好吧，为此，我创建了一个名为*BootStrapper*的项目。这是我引用 StructureMap 程序集的唯一项目。在这个项目的**App_Start**文件夹中，我有一个名为*StructureMapMvc.cs*的文件，如下所示：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(XXXX.BootStrapper.App_Start.StructuremapMvc), "Start")]

namespace XXXX.BootStrapper.App_Start
{
    public static class StructuremapMvc
    {
        public static void Start()
        {
            IContainer container = IoC.Initialize();
            System.Web.Mvc.DependencyResolver.SetResolver(new StructureMapDependencyResolver(container));
            GlobalConfiguration.Configuration.DependencyResolver = new StructureMapHttpDependencyResolver(container);
            ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory());
        }
    }
} 
```

有趣的是：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(XXXX.BootStrapper.App_Start.StructuremapMvc), "Start")] 
```

根据 nugget 包的描述：

> WebActivator 是一个 NuGet 包，它允许其他包在 Web 应用程序中执行一些启动代码。

很酷吧？您必须完成的最后一件事是确保将*BootStrapper*项目程序集推送到您的 Web 应用程序的**/bin**文件夹（使用构建后操作或 OutputTo nugget 包轻松设置）。这将避免您在 MVC 项目中引用*BootStrapper*项目并打破洋葱架构原则。

因此，所有这些都到位后，它完全符合[组合根模式](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)，当您的应用程序启动时，模块将组合在一起。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T09:45:41.007

请注意，我认为 Onion 架构（或者至少是您指出的示例实现，正如 @MystereMan 在评论中正确指出的那样）有一个您应该注意的问题点。

尽管该架构似乎偏爱小型/集中接口（通常只有一个成员），但这些服务的命名似乎另有说明。例如，在参考架构中，有一个`IShippingService`类。它有一个成员，因此它遵守[接口隔离原则](https://en.wikipedia.org/wiki/Interface_segregation_principle)（这很好）。然而，“运输服务”这个名称表明它应该包含与运输相关的所有方法。那很容易有几十个。但是，向此接口添加成员会破坏接口隔离原则、[单一职责原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)(SRP) 和[开放关闭原则](https://en.wikipedia.org/wiki/Open/closed_principle)（OCP）。使用许多几乎没有关系（SRP）的方法，实现将变得又大又丑。实施新的运输要求意味着添加一个成员，这会破坏 OCP。接口有很多成员，而消费者通常只需要调用其中一个成员（低内聚度），这会使单元测试更加困难。

将其分解为所有成员的接口确实解决了部分问题（架构可能有这种意图），但这会给您留下大量彼此没有关系的接口，从而难以应用交叉-将关注点（日志记录、监控、审计跟踪、验证、事务、容错等）转移给他们。

这是否是一个问题取决于很多因素，但违反[SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则之一始终是需要提防的。

因此，作为 Onion 架构的补充，我建议您阅读[这篇文章](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)。它描述了这个可能的缺点的解决方案，它可以应用于 Onion 架构。

# c# - 在 windows phone 8 中的社交网站上共享图像

> ID：14891372
> 
> 赞同：0
> 
> 时间：2013-02-15T09:15:11.523
> 
> 标签：c#, windows-phone-8

我想在社交网站上分享编辑后的图像，以便我使用哪个 API 在 windows phone 8 中使用 c sharp 将图像分享到网页

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:32:29.047

您应该使用[`ShareMediaTask`](http://msdn.microsoft.com/library/windowsphone/develop/microsoft.phone.tasks.sharemediatask)：

```
ShareMediaTask smt = new ShareMediaTask();
smt.FilePath = "image.png";
smt.Show(); 
```

限制是出于安全原因，`ShareMediaTask`仅支持媒体库中的照片（如相机胶卷或保存的图片文件夹）。有关更多信息，请参阅此处的问题：[ShareMediaTask 的使用以及独立存储映像](https://stackoverflow.com/questions/13855377/usage-of-sharemediatask-along-with-isolated-storage-image)

# string - 将字符串输入数据更改为周/月格式

> ID：14891373
> 
> 赞同：0
> 
> 时间：2013-02-15T09:15:19.507
> 
> 标签：string, date, excel, excel-2007, vba

我不确定这是否可能，但我想我会问看看是否有人有解决方案。

问题：我有一个宏，用户在输入框中输入日期作为字符串（例如 021513）。它是字符串格式，因为它用于打开文件（文件名末尾的字符串）。

从这个字符串（例如 021513）我需要在两个单独的字段中派生以下内容：

*   周期间（例如周：11 日至 15 日）。
*   月份（例如二月）。

任何帮助或想法将不胜感激。

夏兰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:23:52.743

您需要`DateSerial`VBA 函数 - 它会使用`Mid`和其他文本函数从字符串部分返回实际的日期值。有了实际日期，您就可以使用`Month`函数返回例如月份。

`CInt`可能还需要使用将字符串部分转换为数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:27:50.907

您也可以使用 Excel 公式执行此操作：

假设您的字符串是单元格 A1，请使用以下公式：

*   B1（日期）：`=DATE(right(A1,2)+2000,LEFT(A1,2),MID(A1,3,2))`
*   C1 weekday: `=WEEKDAY(B1,2)`- 这将返回 1 表示周一，2 表示周二，以此类推。
*   D1 本周开始：`=B1-C1+1`
*   E1 周末：`=D1+4`
*   F1月：`=TEXT(B1,"MMMM")`

# c# - 从 C# 到 VB.NET 的 CRC8 校验和函数转换

> ID：14891376
> 
> 赞同：0
> 
> 时间：2013-02-15T09:15:20.537
> 
> 标签：c#, vb.net, crc

我在将以下代码从 C# 转换为 VB.NET 时遇到问题。

C# 代码

```
public static byte Crc8(byte[] data, int size) {
    byte checksum = 0;
    for (int i=0; i<=size; i++)
        checksum += data[i];

    return (byte)(-checksum);
} 
```

VB.NET 代码

```
Public Shared Function Crc8(ByVal data As Byte(), ByVal size As Integer) As Byte
    Dim checksum As Byte = 0
    For i As Integer = 0 To size - 1
        checksum += data(i)
    Next

    Return CByte(-checksum)
End Function 
```

问题是 VB 代码导致“算术运算导致溢出”。错误。

似乎“+=”运算符的操作方式不同。在 VB 中，它实际上是在创建一个总和 (100 + 200 = 300)，而在 C# 中，它是在对字节 (100 + 200 = 44) 执行某种操作。我似乎无法找到它在做什么操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:23:24.613

不同之处在于，默认情况下，C# 仅通过换行处理溢出 - 所以 255 + 1 最终会为 0。在 VB 中 - 默认情况下，再次 - 溢出会抛出`System.OverflowException`.

`checked`在 C# 中，您可以使用and`unchecked`关键字以细粒度的方式控制它。您还可以更改整个项目的默认值。例如，在 Noda Time 中，我打开了检查算术以发现溢出，但我故意通过使用块将其*关闭*以生成哈希码（溢出可能*且无害）。*`unchecked`

不幸的是，据我所知，VB 没有细粒度的控制。您可以使用“删除整数溢出检查”选项为整个项目关闭溢出检查，但不能仅对代码的某些部分执行此操作。

因此，在您的情况下，您*要么*需要将这段代码移动到另一个可以关闭溢出检查的项目，*要么*您需要为整个项目关闭溢出检查。

（顺便说一句，看起来这使得`GetHashCode`在 VB中[实现有点痛苦](https://stackoverflow.com/questions/4654227/overriding-gethashcode-in-vb-without-checked-unchecked-keyword-support)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:41:38.227

为了将来参考，解决方案是：

```
Public Shared Function Crc8(ByVal data As Byte(), ByVal size As Integer) As Byte
        Dim checksum As Byte = 0
        For i As Integer = 0 To size - 1
            checksum = (CInt(checksum) + data(i)) Mod 256
        Next
        If checksum = 0 Then
            Return 0
        Else
            Return CByte(256 - checksum)
        End If
    End Function 
```

# javascript - CSS 左滚动

> ID：14891380
> 
> 赞同：0
> 
> 时间：2013-02-15T09:15:33.107
> 
> 标签：javascript, jquery, html, css

![在此处输入图像描述](../Images/d8c128066b82b7a05651d995bda275d1.png)我有代码

```
<div class="slidermoveImgCont center float-left">
    <img id="SImg1"  src="img/nat1.jpg" alt="gg" class="first simg alwaysfirst" name="actualImage1">
    <img id="SImg2"  src="img/nat2.jpg" alt="gg" class="simg" name="actualImage2">
    <img id="SImg3"  src="img/nat3.jpg" alt="gg" class="simg" name="actualImage3">
    <img id="SImg4"  src="img/nat4.jpg" alt="gg" class="simg" name="actualImage4">
    <img id="SImg5"  src="img/nat5.jpg" alt="gg" class="simg" name="actualImage5">
    <img id="SImg6"  src="img/nat6.jpg" alt="gg" class="last simg" name="actualImage6">
    <img id="SImg7"  src="img/nat7.jpg" alt="gg" class="dns simg" name="actualImage7">
    <img id="SImg8"  src="img/nat8.jpg" alt="gg" class="dns simg" name="actualImage8">
    <img id="SImg9"  src="img/nat9.jpg" alt="gg" class="dns simg" name="actualImage9">
    <img id="SImg10" src="img/nat10.jpg" alt="gg" class="dns simg" name="actualImage10">
    <img id="SImg11" src="img/nat11.jpg" alt="gg" class="dns simg" name="actualImage11">
    <img id="SImg12" src="img/nat12.jpg" alt="gg" class="dns simg alwayslost" name="actualImage12">
</div> 
```

我总是一次显示六张图像，我计划在增加或减少左值时显示剩余的图像，如滑动。我如何实现它。我给包含的 div 和溢出：隐藏到包含的 div 然后我增加/减少图像的包含 div 的左侧，我无法看到剩余的图像。我打算自己尝试我的图像滑块。请帮助我。

更多信息：我添加了我想要实现的图像，在该图像中，仅显示 6 个图像，单击箭头按钮时，我想使用带有动画的左侧属性滚动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:05:40.127

我为你创建了一个 JSFiddle：http: [//jsfiddle.net/L4HRY/](http://jsfiddle.net/L4HRY/)

基本上，您在容器中嵌套了一个 div（固定为），其中所有图像都彼此相邻。您在容器上设置了溢出：隐藏，因此只有适合容器的图像可见：

```
<div class="slidermoveImgCont center float-left">
    <div>
        //snap images
    </div>
</div> 
```

CSS

```
.slidermoveImgCont
{
    height: 100px;
    width: 700px;
    position: relative;
    overflow: hidden;
}
.slidermoveImgCont div
{
    position: absolute;
    width: 1200px;
} 
```

`left`然后你用and移动你的内部 div`right`

就是*这个概念*

# cultureinfo - Sitefinity 5.3 在 URL 末尾显示文化信息

> ID：14891382
> 
> 赞同：0
> 
> 时间：2013-02-15T09:15:57.820
> 
> 标签：cultureinfo, sitefinity, sitefinity-5

我最近将一个网站升级到 Sitefinity 5.3。出于某种原因，当我尝试在后端编辑页面时，它会引发 ' **500 - Internal server error** ' 。仔细检查后，我发现文化出现在 URL 的末尾，而不是基本 URL 之后的通常位置。例如 URL 显示为

[http://www.mywebsite.com/my-page/Action/Edit/en](http://www.mywebsite.com/my-page/Action/Edit/en)

而不是通常的

[http://www.mywebsite.com/en/my-page/Action/Edit](http://www.mywebsite.com/en/my-page/Action/Edit)

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T13:29:10.073

据我所知，它一直在网址的末尾。当你把文化放在另一个位置时，它会起作用吗？

问候，丹尼尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T19:52:28.047

约瑟夫，

这只发生在后端。如果您加载已翻译的前端页面，您会注意到翻译出现在页面别名之前。

谢谢 - 克里斯

# javascript - 按名称获取嵌套对象属性的更优雅的方法？

> ID：14891383
> 
> 赞同：0
> 
> 时间：2013-02-15T09:16:03.513
> 
> 标签：javascript, node.js, underscore.js

我有这个*工作*代码，它从一个 JS 对象中检索对象属性的名称（不幸的是！）超出了我的范围。所以我不能改变这个对象的构建方式。但我想（并且确实）将标记为 的属性名称提取`true`为数组，以便能够更轻松地处理此对象。

目的：

```
{
    group1: {
        foo: true,
        itemFoo: "Name of foo", // This is what I want, because foo is true
        bar: false,
        itemBar: "Name of bar", // I dont want this, bar is false
        // ...
    },
    group2: {
        baz: true,
        itemBaz: "Name of baz", // I want this too
        // ...
    },
    uselessProp1: "not an object",
    // ...
} 
```

工作代码：

```
var items = [];

for (var m in obj) {
    if (typeof obj[m] == 'object') {
        for (var n in obj[m]) {
            if (obj[m][n] === true) {
                items.push(obj[m]['item' + (n.charAt(0).toUpperCase() + n.slice(1))]);
            }
        }
    }
} 
```

我的问题是：有人知道用 underscore.js 或普通 node.js 或任何其他库实现这种遍历的更优雅的方式吗？我对 进行了实验`_.filter`，但没有提出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:58:22.427

这是我到目前为止的解决方案：

[http://jsfiddle.net/kradmiy/28NZP/](http://jsfiddle.net/kradmiy/28NZP/)

```
var process = function (obj) {
var items = [];

var objectProperties = _(obj).each(function (rootProperty) {
    // exit from function in case if property is not an object
    if (!_(rootProperty).isObject()) return;

    _(rootProperty).each(function (value, key) {
        // proceed only if property is exactly true
        if (value !== true) return;
        var searchedKey = 'item' + (key.charAt(0).toUpperCase() + key.slice(1));
        // check that parent has this property...
        if (rootProperty.hasOwnProperty(searchedKey)) {
            // ...and push that to array
            items.push(rootProperty[searchedKey]);
        }
    });
});

  return items;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:37:39.017

像这样的东西？

```
var result = [];
_.chain(obj).filter(_.isObject).each(function(t) {
    _(t).each(function(val, key) {
        if(val === true)
            result.push(t['item' + key.charAt(0).toUpperCase() + key.substr(1)])
    })
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T11:22:48.733

我想指出一点：

```
Micha’s Golden Rule
Micha Gorelick, a data scientist in NYC, coined the following rule:
Do not store data in the keys of a JSON blob. 
```

你的 JSON 应该使用：

```
{//group1
  groupname:"group1",
  items :[
    {//item1
       itemcheck:true,
       itemname:'itemBar'
    },
    ...
  ]
},
... 
```

如果您将 itemname 存储在密钥中。遍历 JSON 时会遇到问题，因为您的“itemFoo”将使用“foo”（间接）来获取其值。您的数据结构是这里的问题。搜索您的 JSON 很棘手。一旦你遵循了规则，你的代码就会自动变得优雅。

# bash - 使用 grep/sed 解析 BASH 命令行参数

> ID：14891385
> 
> 赞同：0
> 
> 时间：2013-02-15T09:16:14.280
> 
> 标签：bash, grep

我有一个需要两个参数（文件名和 MD5hashval）的脚本。我可以使用 md5sum test.sh 提取 MD5sum 的十六进制输出 | grep -om1 '^[0-9a-f]*.' 出于某种原因，从脚本调用相同的 cmd 时会失败。检查传递给 Bash 脚本的命令行参数的最佳方法是什么？代码如下所示：

```
#!/bin/bash

while getopts ":f:s" opt; do
  case $opt in
    f)

      FILENAME=`echo $OPTARG | sed 's/[-a-zA-Z0-9]*=//'`
      echo ${FILENAME}
      ;;
    s)

       MD5SUM=`echo $OPTARG | grep -om1 '^[0-9a-f]*'` 
       echo $MD5SUM
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:27:06.817

由于该`s`选项需要一个参数，因此您需要在其后放置一个冒号。它应该是：

```
while getopts "f:s:" opt; do
... 
```

从`getopts`手册页：

> 如果一个字符后跟一个冒号，则该选项应该有一个参数，该参数应该用空格与它分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:20:04.540

我的第一个动作是在您的实际命令之前放置一个调试行：

```
echo "[$OPTARG]"
MD5SUM=`echo $OPTARG | grep -om1 '^[0-9a-f]*'` 
```

但它实际上与选项字符串`s`中没有后跟冒号的事实有关。`getopts`您应该`f:s:`改用：

> ... optstring 包含要识别的选项字符；如果一个字符**后跟**一个冒号，则该选项应该有一个参数，该参数应该用空格与它分开。

而且，顺便说一句，我认为您的错误行应该是`-$opt`而不是`-$OPTARG`.

# ios - UICollectionView 用于类似 Springboard 的文件夹

> ID：14891386
> 
> 赞同：35
> 
> 时间：2013-02-15T09:16:20.567
> 
> 标签：ios, xcode, cocoa-touch, ios6, uicollectionview

我试图达到以下效果：

A`UICollectionView`为父类对象（例如相册）显示单元格网格。当我点击其中一项时，我想将该元素滚动到屏幕顶部并从中打开类似 Springboard 的文件夹。在该文件夹区域内，应显示另一个集合，包括详细项目，即该相册的单张照片。点击剩余的“父”视图会再次关闭文件夹。请参阅此架构：

![在此处输入图像描述](../Images/941c4d8c4145fcec993f9f2e61e66153.png)

到目前为止，我所做的是专辑的常规收藏视图。当我选择一个时，它会滚动到顶部的选定项目，然后用于[`JWFolders`](https://github.com/jwilling/JWFolders)在该位置打开一个空文件夹。一旦显示出来，我就会触发周围环境`UINavigationController`来推动我的第二个视图控制器和细节项。那个是布局的，所以它在用户看来就好像它仍然是同一个视图。

这种方法有几个问题，我想知道如何更好地做到这一点：

1.  JWFolders 截取屏幕截图并向上/向下动画两半以实现打开效果。这没问题，但在 iPad3 上相当慢，因为它移动了很多像素，而 iPad3 的 GPU 不能完全胜任这项任务。

2.  第二个视图需要像素完美以匹配第一个视图。这很可能会意外中断。

3.  对于视图控制器转换可以使用哪些动画，我受到限制。默认`UINavigationController`从右侧推送不合适。我覆盖它以进行交叉溶解，但仍然远非理想。

我想获得有关如何以可维护的方式解决此问题的指示，这种方式不需要对框架的设计目的进行太多创造性的黑客攻击。我可能在这里遗漏了一些明显的东西，因此感谢您提供示例或一般建议。

**更新：**

我稍微改变了方法。现在我使用一个包含两个嵌入式集合视图控制器的容器视图控制器。一个用于“相册”，一个用于底部的“照片”部分。`UIImageView`在两者之间使用a ，我可以完成指向上方的三角形。从维护的角度来看，这也很好，因为这两个集合完全分开处理，使维护更容易。

该应用程序使用自动布局，因此我可以通过修改约束来更改两个嵌入视图中的每一个占用的空间量。这比使用 JWFolders 的基于屏幕截图的方法快得多，并且在 iPad3 上也能很好地工作。

这*几乎*可以让我到达我想去的地方。剩下的一件事是让开场动画正确。我想同时滚动相册集合，以便点击的项目转到顶部并展开照片集合，三角形指向相册单元格。

我可以通过布局约束以某种方式将下视图“连接”到该单元格，以便`scrollToItemAtIndexPath:atScrollPosition:animated:`调用将下视图拖开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T00:17:50.727

为了解决这个问题，我会丢失库并导致 iOS 在没有屏幕截图或其他技巧的情况下移动这些显示元素。在轻按时，使轻按的图标保持其正常外观，同时使所有其他图标变暗。从顶部到点击图标所在行的末尾查找集合视图的内容。创建两个新的集合视图 - 一个包含上半部分，包括您点击的图标，另一个包含下面的其余部分。将这些视图分开动画，为文件夹视图腾出空间。

文件夹视图是另一个 UICollectionView，它出现在创建的间隙中。在主视图中，根据抽屉是打开还是关闭，呈现一个或三个视图。我可能会考虑创建一个带有集合视图的视图控制器，并使用视图控制器包含来管理所有三个视图。您可以完全控制这些视图的呈现方式，因此您可以像 Springboard 一样同时上下动画顶部和底部视图以显示文件夹视图。

当这一切正常时，您可以概括并开始做一些事情，例如决定将点击的图标作为底部集合的一部分，如果图标在屏幕上较低，则文件夹显示在上方。

（我犹豫回答这个问题，因为有大量的赞成票但没有答案，所以我可能错过了一些东西——但这就是我开始尝试实现跳板效果的方式。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T18:33:19.310

要以相对简单的方式解决此问题，您可以尝试将文件夹设为简单的 UICollectionView 子类，然后在点击相册单元格时插入该单元格。在集合视图数据源中，您必须为文件夹单元格返回不同的大小等。在文件夹中，您必须创建文件夹集合视图，避免将文件夹单元格作为单元格文件夹集合视图的数据源。

# javascript - 画布乘以悬停效果

> ID：14891387
> 
> 赞同：1
> 
> 时间：2013-02-15T09:16:21.877
> 
> 标签：javascript, jquery, html, css

我正在尝试在图像上制作悬停乘法效果。我正在关注本教程：

**演示：** [http ://albertogasparin.it/demo/multiply-filter/](http://albertogasparin.it/demo/multiply-filter/)

[http://albertogasparin.it/articles/2011/05/html5-multiply-filter-canvas/](http://albertogasparin.it/articles/2011/05/html5-multiply-filter-canvas/)

我遇到的问题是我不知道如何传递给函数，因此它仅在将鼠标悬停在“id =”multiply_hover”上时起作用，因为现在乘法过滤器在页面加载后显示。

这是我的标记：

```
<div class="item">
    <img id="multiply_hover" src="img/coleccionesII_1.jpg" alt="coleccionesII_1" width="195" height="343">
    <div class="item_info">
        <div class="item_text">
            <a href="javascript:void(0)">SEDA BLOUSE BOLSILLOS</a>
            <a href="javascript:void(0)">CREP PANTALÓN</a>
            <a href="javascript:void(0)">Zapato Rojo</a>
        </div>
    </div>
</div> 
```

使用此脚本：

```
var multiplyFilter = (function() {
    //** private vars **//
    var multiplyColor,
        imageBottom, imageId,
        canvas;

    //** private functions **//
    function createCanvas() {
    canvas = document.createElement('canvas');
    canvas.width = imageBottom.width;
    canvas.height = imageBottom.height;
    imageBottom.parentNode.insertBefore(canvas, imageBottom);
    // no canvas support?
    if (!canvas.getContext) { return; }

    draw();
    }

    function draw() {
    var context, imgData, pix,
        w = imageBottom.width,
        h = imageBottom.height;
    // get 2d context
    context = canvas.getContext('2d');
    // draw the image on the canvas
    context.drawImage(imageBottom, 0, 0);
    // Get the CanvasPixelArray from the given coordinates and dimensions.
    imgData = context.getImageData(0, 0, w, h);
    pix = imgData.data;
    // Loop over each pixel and change the color.
    for (var i = 0, n = pix.length; i < n; i += 4) {
        pix[i ] = multiplyPixels(multiplyColor[0], pix[i ]); // red
        pix[i+1] = multiplyPixels(multiplyColor[1], pix[i+1]); // green
        pix[i+2] = multiplyPixels(multiplyColor[2], pix[i+2]); // blue
        // pix[i+3] is alpha channel (ignored)

        // another check to see if image is still empty
        if(i < 5 && !pix[i] && !pix[i+1] && !pix[i+2] && !pix[i+3]) {
        canvas.parentNode.removeChild(canvas);
        setTimeout(function() { multiplyFilter.init(imageId, multiplyColor); }, 500);
        return false;
        }
    }
    // Draw the result on the canvas
    context.putImageData(imgData, 0, 0);
    }

    //** helper function **//
    function multiplyPixels(topValue, bottomValue) {
    // the multiply formula
    return topValue * bottomValue / 255;
    }       

    //** public functions **//
    return {
    init : function(imgId, color) {
        imageId = imgId;
        imageBottom = document.getElementById(imageId);
        multiplyColor = color;

        // lauch the draw function as soon as the image is loaded
        if(imageBottom && imageBottom.clientWidth > 50) { // image loaded
        createCanvas();
        } else { // not yet ready
        setTimeout(function() { multiplyFilter.init(imageId, color); }, 1000);
        }
    }
    }
})();

multiplyFilter.init('multiply_hover', [0, 0, 210]); 
```

我尝试使用类似这样的东西，它在悬停时有效，但一点也不好，因为它在每次悬停时都会创建一个新的画布元素：

```
 // Hover effect
    $(".item").bind('mouseenter', function() {
        $(this).children(".item_info").fadeIn();
        multiplyFilter.init('multiply_hover', [0, 0, 210]);
    });

    $(".item").bind('mouseleave', function() {
        $(this).children(".item_info").fadeOut();
    }); 
```

关于如何在悬停时正确传递函数的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T14:55:32.797

你试试这个[http://api.jquery.com/hover/](http://api.jquery.com/hover/)吗？

您可以使用它向 $("#multiply_hover") 添加一个函数。Hover Jquery 有处理程序 IN 和 OUT

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:03:07.567

试试这个代码：

```
<!DOCTYPE html>
<html>
<body>
    <div class="item">
        <img id="multiply_hover" src="img/coleccionesII_1.jpg" alt="coleccionesII_1">
        <div class="item_info">
            <div class="item_text">
                <a href="javascript:void(0)">SEDA BLOUSE BOLSILLOS</a>
                <a href="javascript:void(0)">CREP PANTALÓN</a>
                <a href="javascript:void(0)">Zapato Rojo</a>
            </div>
        </div>
    </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script>

    var multiplyFilter = (function() {
        //** private vars **//
        var multiplyColor,
            imageBottom, imageId,
            canvas;

        //** private functions **//
        function createCanvas() {
        canvas = document.createElement('canvas');
        canvas.width = imageBottom.width;
        canvas.height = imageBottom.height;
        imageBottom.parentNode.insertBefore(canvas, imageBottom);
        // no canvas support?
        if (!canvas.getContext) { return; }

        draw();
        }

        function draw() {
        var context, imgData, pix,
            w = imageBottom.width,
            h = imageBottom.height;
        // get 2d context
        context = canvas.getContext('2d');
        // draw the image on the canvas
        context.drawImage(imageBottom, 0, 0);
        // Get the CanvasPixelArray from the given coordinates and dimensions.
        imgData = context.getImageData(0, 0, w, h);
        pix = imgData.data;
        // Loop over each pixel and change the color.
        for (var i = 0, n = pix.length; i < n; i += 4) {
            pix[i ] = multiplyPixels(multiplyColor[0], pix[i ]); // red
            pix[i+1] = multiplyPixels(multiplyColor[1], pix[i+1]); // green
            pix[i+2] = multiplyPixels(multiplyColor[2], pix[i+2]); // blue
            // pix[i+3] is alpha channel (ignored)

            // another check to see if image is still empty
            if(i < 5 && !pix[i] && !pix[i+1] && !pix[i+2] && !pix[i+3]) {
            canvas.parentNode.removeChild(canvas);
            setTimeout(function() { multiplyFilter.init(imageId, multiplyColor); }, 500);
            return false;
            }
        }
        // Draw the result on the canvas
        context.putImageData(imgData, 0, 0);
        }

        //** helper function **//
        function multiplyPixels(topValue, bottomValue) {
        // the multiply formula
        return topValue * bottomValue / 255;
        }       

        //** public functions **//
        return {
        init : function(imgId, color) {
            imageId = imgId;
            imageBottom = document.getElementById(imageId);
            multiplyColor = color;

            // lauch the draw function as soon as the image is loaded
            if(imageBottom && imageBottom.clientWidth > 50) { // image loaded
            createCanvas();
            } else { // not yet ready
            setTimeout(function() { multiplyFilter.init(imageId, color); }, 1000);
            }

            //Hide the original image
            $('#'+imgId).hide();
        }
        }
    })();

    // Hover effect
        $(".item").bind('mouseenter', function() {
            $(this).children(".item_info").fadeIn();
            multiplyFilter.init('multiply_hover', [0, 0, 210]);
        });

        $(".item").bind('mouseleave', function() {
            $(this).children(".item_info").fadeOut();
            $('canvas').hide(); //hide the canvas
            $('#multiply_hover').show(); //show the original image
        });

    </script>

</body>
</html> 
```

我修改了乘法脚本使其隐藏原始图像，以及悬停效果使其隐藏画布并显示原始图像

# ios - AFNetworking 超时

> ID：14891390
> 
> 赞同：5
> 
> 时间：2013-02-15T09:16:33.293
> 
> 标签：ios, timeout, httpclient, afnetworking, afjsonrequestoperation

我正在使用 AFJSONRequestOperation 上传图像。

在上传图片数量的情况下，一些请求因超时错误而失败。

我试过了

```
AFJSONRequestOperation *operation = ...
[operation start]; 
```

和

```
AFJSONRequestOperation *operation = ...
[operations addObject:operation];
...
[client enqueueBatchOfHTTPRequestOperations:operations progressBlock:nil completionBlock:nil]; 
```

但是，仍然没有运气。

我认为时间计数是在创建操作时开始的。

那么，我应该为自己的算法一一安排请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:10:56.403

值得注意的是，AFNetworking 将创建与系统资源一样多的 NSOperations 并同时运行它们。问题是应用程序/计算机只能同时建立这么多的网络连接。操作一开始就开始计数。出于所有实际目的，在 iPhone 上您可能看不到问题，因为运行多个操作的资源较少，但模拟器一次可以运行数百个线程（远远超过最大并发网络连接数）。

我的建议是将并发操作的数量（我认为位于 AFHTTPClient 中）限制为比`NSOperationQueueDefaultMaxConcurrentOperationCount`允许设备运行尽可能多的资源更合理的数量。

# android - 在 Ubuntu 终端中找不到 ndk-build 命令

> ID：14891399
> 
> 赞同：17
> 
> 时间：2013-02-15T09:17:03.433
> 
> 标签：android, linux, android-ndk

我已经使用 javah 成功生成了 .h 文件，现在我想构建我的 android-ndk hello world 项目。但它说找不到命令 nespl@nespl-pc:~$ ndk-build ndk-build: command not found

这是我的路

```
nespl@nespl-pc:~$ echo $PATH
/home/nespl/android-ndk-r8/ndk-build:/home/nespl/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/nespl/adt-bundle-linux-x86/sdk/tools:/home/nespl/adt-bundle-linux-x86/sdk/platform-tools:/home/nespl/gsutil 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-15T09:20:12.433

您的 PATH 应包含 NDK 的根目录：

```
export PATH=$PATH:/home/nespl/android-ndk-r8 
```

而不是您当前的：

```
export PATH=$PATH:/home/nespl/android-ndk-r8/ndk-build 
```

# css - Internet Explorer 8 忽略 CSS 中的字体粗细

> ID：14891410
> 
> 赞同：9
> 
> 时间：2013-02-15T09:17:31.863
> 
> 标签：css, internet-explorer, internet-explorer-8, font-face

所以我很难理解为什么 IE 在这里忽略了我的 CSS。我有这个代码：

```
<h2>Har du stadsnät eller kan du få det?</h2> 
```

即没有什么奇怪的或任何东西。这是生成的渲染：

![渲染 HTML](../Images/eafebdeee5076acbd36427a64012eead.png)

但这里是这个 HTML 的 CSS 代码：

```
.rubrik, h2 {
  font-family: Lato;
  font-size: 32px;
  font-weight: normal;
  line-height: 38px;
  font-variant: normal;
  font-style: normal;
  color: #969696; 
} 
```

这清楚地表明 H2 应该具有“正常”作为字体粗细，但渲染的文本显然是粗体，这是正确的渲染（来自 Safari）

![正确渲染](../Images/1806e261e795f8eb349749361f489c63.png)

因此，使用 Internet Explorer 8 中包含的开发人员工具，我检查了 CSS 解释，看起来像这样：

![CSS解释](../Images/99bc011081dfb8b692c1982b66d972a2.png)

据我了解，我在这里看到的是 IE8 对我的 CSS 的解释，并且可疑地缺少“正常”属性。IE 已将 CSS 转换为“字体”的单行版本，但不包含“正常”部分。现在，字体“Lato”是 font-face 字体，font-face CSS 在这里：

```
@font-face {
    font-family: Lato;
    src: url('/media/fonts/Lato.eot');
    src: local('nofont'), url('/media/fonts/Lato.ttf') format('truetype');
}
@font-face {
    font-family: Lato;
    src: url('/media/fonts/Lato-Bold.eot');
    src: local('nofont'), url('/media/fonts/Lato-Bold.ttf') format('truetype');
    font-weight: bold;
}
@font-face {
    font-family: Lato;
    src: url('/media/fonts/Lato-Bold-Italic.eot');
    src: local('nofont'), url('/media/fonts/Lato-Bold-Italic.ttf') format('truetype');
    font-weight: bold;
    font-style: italic;
}
@font-face {
    font-family: Lato;
    src: url('/media/fonts/Lato-Italic.eot');
    src: local('nofont'), url('/media/fonts/Lato-Italic.ttf') format('truetype');
    font-style: italic;
} 
```

即使在字体粗细的字体声明中指定“正常”，它也不起作用。所以我被困在这里，试图弄清楚我做错了什么，没有让 IE 在 H2 的声明中包含“font-weight：normal”......有什么猜测吗？提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:52:56.837

我认为您需要更改`font-family: Lato;`每个 fontface 属性的名称，因为 IE 可能会感到困惑。而是尝试 put`font-family: Lato-bold;`等`font-family: Lato-italic`。此外，如果字体具有粗体（如 Lato 那样，并且您已在 fontface 属性中引用），那么您不需要添加`font-weight: bold;`fontface 属性，因为字体已经是粗体并添加字体-weight 只会添加人造粗体并使其看起来很糟糕。

这意味着对于您的`h2`，您只需要 put`font-family: Lato;`如果您希望它是正常的非粗体版本。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-15T09:25:40.207

这可能是继承问题。您是否尝试过放置 !important 关键字。

```
font-weight: normal !important; 
```

# javascript - JQuery / Live 已被弃用，好吧……但没有被取代

> ID：14891412
> 
> 赞同：4
> 
> 时间：2013-02-15T09:17:41.273
> 
> 标签：javascript, jquery

***On***不能代替***live***；因为新的***ON***不适***用于***未来的元素。我的实现没有问题；我习惯于使用 live，我绝对知道 jquery 什么时候可以工作。

哈姆部分：

```
.field
        %label Select a file
        = file_field_tag 'post[image]', :class => :dashed
        %span.adder + add another file 
```

咖啡部分：

```
$("span.adder").on "click", (e) ->
    new_field = $(this).closest(".field").clone()
    $(new_field).insertAfter( $(this).closest(".field") ) 
```

为什么新添加的 span.adder 没有将 jquery 行为附加到他们的类？在这种情况下，像这样的东西应该起作用。

为什么 JQuery 家伙确实删除了它？我不明白。

* * *

更新

* * *

```
$("span.adder").on("click", function(){ }); 
```

不会像现场一样工作。

它一定要是

```
$(document).on("click", "span.adder", function(){ }); 
```

（感谢大家的回答。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T09:19:15.687

要使用未来的元素，您必须像这样在文档上使用

```
$(document).on('click', 'span.adder', function(){
       //Code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:24:54.173

在`.on()`出现之前，`.live()`已经被认为是处理事件绑定的一种低效方式，因为为了将来使用，您必须使用`.on()`

例如：-

```
$(document).on('click', '#yourElement', function() { 
  // your functions here
}); 
```

[这里](http://www.jquery4u.com/jquery-functions/on-vs-live-review/)有更好的解释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:19:19.087

这是一个替代品。直接翻译是：

```
$(document).on('click', '.my-selector', function() {}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:19:23.483

他们弃用并删除了它，因为他们有更好的实施。你看到的文档`.on()`

```
$(ancestor).on(event, element, function); 
```

您应该将其用作靠近该元素的祖先。存在一些性能问题。

也升级 jQuery 版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:20:56.580

`On` `works as`delegate`过去做的，不完全像.live；您必须在父级上使用它，然后指定事件和触发它的子级；就像是。

```
$(window).on("click", ".button", function(){ 
    alert("You clicked the button... and I hate alerts");
}); 
```

# php - 使用 array_combine 显示用户输入结果

> ID：14891414
> 
> 赞同：1
> 
> 时间：2013-02-15T09:17:48.657
> 
> 标签：php, arrays

我`array_combine`用来显示一些用户选择的结果。

这是我的循环：

```
<?php if(get_field('sizes')) { ?>
<?php while(the_repeater_field('sizes')) { ?>
    <?php echo the_sub_field('size'); ?>
    <input type="text" class="quantity" name="quantity[]" value="0">
    <input type="hidden" class="productinput" name="product[]" value="<?php echo the_title(); ?> - <?php echo the_sub_field('size'); ?>">
<?php } ?>
<?php } ?> 
```

这就是我输出结果的方式

```
$quantities = array_combine($_POST['product'], $_POST['quantity']);
foreach ($quantities as $product => $quantity) {
    if ($quantity > 0) {
        $productresults = "$quantity x $product";
    }
}
echo $productresults; 
```

目前它只输出最后输入的数量和产品名称。例如，如果我更改 5 个输入，那么它只显示第 5 个。

我缺少什么来显示所有已更改的输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:20:40.260

使用下面的代码，问题是您`$productresults`在`foreach`循环后输出，因此它会回显分配的最后一个值。

```
$productresults = "";
$quantities = array_combine($_POST['product'], $_POST['quantity']);
foreach ($quantities as $product => $quantity) {
    if ($quantity > 0) {
        $productresults .= "$quantity x $product ";
    }
}
echo $productresults; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:23:09.000

将结果保存在数组中。

```
 $quantities = array_combine($_POST['product'], $_POST['quantity']);
    foreach ($quantities as $product => $quantity) {
        if ($quantity > 0) {
            $productresults[] = "$quantity x $product";
        }
    }
    print_r($productresults); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:33:30.903

```
$quantities      = array_combine($_POST['product'], $_POST['quantity']);
$productresults  = array();
foreach ($quantities as $product => $quantity) {
    if ($quantity > 0) {
        $productresults[] = $quantity x $product;
    }
}

echo implode(",", $productresults); // implode it with any thing you need. 
```

# visual-studio - 在 Visual Studio 中从 GAC 引用 DLL

> ID：14891422
> 
> 赞同：10
> 
> 时间：2013-02-15T09:18:10.780
> 
> 标签：visual-studio, dll, gac

所以我环顾四周试图找到一些关于这个的帖子，有很多但没有一个可以解决我的具体问题（我可以找到）。

我正在尝试在我的项目中添加一些 DLL，但其中很少有来自：

```
C:\Windows\Microsoft.NET\Framework\v3.5\XXX.YYY.dll 
```

我期望这应该来自 GAC。

请建议我在 Visual Studio 中引用 Dll 的最佳实践。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-15T12:28:25.857

这不是它的工作方式。当您使用 Project + Add Reference 时，您总是添加一个*引用程序集*。这**绝不**是来自 GAC 的大会。GAC 是一个运行时实现细节，它只用于在程序执行时提供程序集，而不是在构建时提供程序集。

以这种方式工作非常重要，您机器上的 GAC 内容将与您用户机器上的 GAC 内容不匹配。许多 DLL Hell 对策已经到位，以确保当用户的机器未正确配置以执行您的程序时，您的参考程序集到用户的 GAC 内容的映射得到良好的诊断。

这也是使用 Explorer 导航到 c:\windows\assembly 时无法直接查看 GAC 文件夹的原因。shell 扩展处理程序隐藏细节以防止您犯错误，例如添加 GAC ed 程序集作为参考程序集。.NET 4 程序集没有安装相同的扩展处理程序，您可以查看 c:\windows\microsoft.net\assembly 并查看 GAC 的结构。不要假设现在可以从那里添加引用，引用程序集在 .NET 4 中更为重要，它们与运行时程序集完全不同。

所以看到存储在 C:\Windows\Microsoft.NET\Framework\v3.5 中的参考程序集是完全正常的，这是 .NET 3.5 特定参考程序集的主目录，如 System.Core.dll。对于 .NET 4 项目，引用程序集存储在 c:\program files\reference 程序集中，它们不应**引用**C:\Windows\Microsoft.NET\Framework\v4.0.30319。检查[这个答案](https://stackoverflow.com/questions/13748055/could-not-load-type-system-runtime-compilerservices-extensionattribute-from-as/13750130#13750130)，看看不使用正确的参考程序集会导致什么样的无法诊断的痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:33:20.733

这些程序集是 .NET Framework 3.5 的程序集。程序集缓存位于

```
%SystemRoot%\assembly 
```

您可以将[.NET Framework 3.5](http://www.microsoft.com/en-us/download/details.aspx?id=21)（滚动到页面末尾）与您的项目一起分发。Aso 如果您使用的是 VS Setup 项目，您可以简单地使用属性页来引用它。

要引用这些程序集，您可以轻松地右键单击“引用”>“添加引用”并从 .NET 选项卡中选择程序集。要引用 GAC 程序集，请参阅[此问题](https://stackoverflow.com/questions/444655/how-can-i-reference-a-dll-in-the-gac-from-visual-studio)。

# asp.net - 多个文本框中的重复值

> ID：14891428
> 
> 赞同：1
> 
> 时间：2013-02-15T09:18:39.053
> 
> 标签：asp.net, performance, duplicates

如何验证多个文本框中的文本是否彼此唯一。

它在 asp.net 中看起来像这样，但它不是有效的语法

```
bool hasNoDuplicate = (txtEmergencyName1.Text.Trim() <> txtEmergencyName2.Text.Trim() <> txtEmergencyName3.Text.Trim <> txtEmergencyName4.Text.Trim); 
```

我正在寻找一种有效的方法，一种 lambda 表达式或内置在 asp.net

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:26:06.740

由于您要求使用 lambda，因此这是一种 linq 方法。

```
var allTxt = new[] { txtEmergencyName1, txtEmergencyName2, txtEmergencyName3, txtEmergencyName4 };
var allText = allTxt.Select((txt, i) => new { Text = txt.Text.Trim(), Pos = i + 1 }).ToList();
bool hasNoDuplicate = !allText.Any(t => allText.Skip(t.Pos).Any(t2 => t.Text == t2.Text)); 
```

将所有相关的 TextBox 放在一个像数组一样的集合中，然后使用`Enumerable.Any`. 通过在当前文本框之前跳过所有内容，您可以避免两次检查文本框。

如果所有相关`TextBoxes`都在一个容器控件中，如 a `Panel`，您还可以使用`Enumerable.OfType`来查找它们：

```
IEnumerable<TextBox> allTxt = this.EmergencyPanel.Controls.OfType<TextBox>(); 
```

**旁注：**无论如何，寻找最有效的方法来验证某些控件是过早的优化。这不是你一直在做的事情，也从来没有数以百万计的控制。相反，您应该寻找最短或最易读的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:21:18.653

您可以相应地使用`and &&`or`or ||`运算符

```
bool isDuplicate=(txtEmergencyName1.Text.Trim() == txtEmergencyName2.Text.Trim() 
                       && txtEmergencyName2.Text.Trim() == txtEmergencyName3.Text.Trim); 
```

它将设置`true`或`false`在 isDuplicate 变量中。

## 编辑 1

```
 bool isDuplicate=(txtEmergencyName1.Text.Trim() == txtEmergencyName2.Text.Trim() 
                       && txtEmergencyName2.Text.Trim() == txtEmergencyName3.Text.Trim
                       && txtEmergencyName1.Text.Trim() == txtEmergencyName3.Text.Trim
                     ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:42:40.990

你也可以做类似的事情

```
 var test = new TextBox();
        var AlltBox = new List<TextBox>() { new TextBox() };

        for(int i=1; i == 5;i++)
        AlltBox.Add((TextBox)this.FindName("txtEmergencyName"+i));

        bool exist = AlltBox.Any(tb => ((tb.Text == test.Text)&& tb.Name != test.Name)); 
```

但我不知道性能

# c++ - wx dev-Cpp GDI plus问题

> ID：14891430
> 
> 赞同：2
> 
> 时间：2013-02-15T09:18:44.873
> 
> 标签：c++, gdi+, dev-c++

出于某种原因，我完全迷失在这个问题上，并且在没有任何帮助的情况下寻找了一个小时。

在 dev c++ 中，我不断收到此错误，它指向 [strong]bold[/strong] 中的行：

`"18 H:\Projects\Classic Lockdown\main.cpp`'(' token" 之前的预期构造函数、析构函数或类型转换

```
#define INFO_BUFFER_SIZE 32767
#include "iostream"
using namespace std; 
#include <windows.h>
#include <gdiplus.h>
//#include <GdiPlusGetEncoderClsid.h>

#include <stdio.h>
HINSTANCE G_HINS_hInstance = 0;
#include "sstream"
#include "..\PWS_DEV\PWS_DEV.h"

#pragma comment( lib, "gdiplus" )
using namespace Gdiplus;
//GdiplusStartupInput gdiplusStartupInput;
ULONG_PTR gdiplusToken;
Gdiplus::GdiplusStartupInput gdiplusStartupInput;

Gdiplus::GdiplusStartup(&m_gdiplusToken, &gdiplusStartupInput,NULL);

Bitmap *gdiBitmap = 0;

#include "procedures.h" 
```

为什么要这样做？

我也想看看我是否尝试过这个

...

`Gdiplus::GdiplusStartup = "";`

...

然后我得到了这个错误：

`"18 H:\Projects\Classic Lockdown\main.cpp expected constructor, destructor, or type conversion before '=' token"`

不管我用 GdiplusStartup 使用什么，它只是一遍又一遍地说。就像它不想与 GdiplusStartup 有任何关系

我非常坚持这一点。有人可以帮我解决这个问题吗？

如果您需要有关此或我正在从事的项目的更多信息，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T17:47:46.907

有几件事跳出来：

1.  你有 &m_gdiplusToken 而不是 &gdiplusToken （变量名不匹配）。

2.  我假设对 GdiplusStartup 的调用是在一个函数中，对吧？

如果我像这样重新排列，它可以很好地编译：`cl.exe /EHsc so_test.cpp`

注意我注释掉了我没有的标题。如果它仍然对你失败，你可能在标题中有错误的代码，或者你没有向我们展示一切。

```
#define INFO_BUFFER_SIZE 32767
#include "iostream"
using namespace std; 
#include <windows.h>
#include <gdiplus.h>
//#include <GdiPlusGetEncoderClsid.h>

#include <stdio.h>
HINSTANCE G_HINS_hInstance = 0;
#include "sstream"
// #include "..\PWS_DEV\PWS_DEV.h"

#pragma comment( lib, "gdiplus" )
using namespace Gdiplus;

//#include "procedures.h"

int main() 
{
//GdiplusStartupInput gdiplusStartupInput;
ULONG_PTR gdiplusToken;
Gdiplus::GdiplusStartupInput gdiplusStartupInput;
Gdiplus::GdiplusStartup(&gdiplusToken, &gdiplusStartupInput,NULL);
Bitmap *gdiBitmap = 0;

return 0;
} 
```

# jquery - 用于过滤的 jQuery 同位素不起作用

> ID：14891431
> 
> 赞同：4
> 
> 时间：2013-02-15T09:18:50.447
> 
> 标签：jquery, html, css, jquery-isotope

我在一个网站上工作，现在卡在 jQuery isotope 上，我需要一些帮助，请我使用 jquery isotope 过滤 div，但不知何故它不起作用

我的 HTML：

```
<center><a href="" class="filter" rel="all">show all</a> | <a href="" class="filter" rel="green">green</a> | <a href="" class="filter" rel="blue">blue</a> | <a href="" class="filter" rel="pink">pink</a></center>
<br>
<div class="wrap">
    <div class="box green"></div>
    <div class="box blue"></div>
    <div class="box pink"></div>
    <div class="box blue"></div>
    <div class="box pink"></div>
    <div class="box green"></div>
    <div class="box pink"></div>
    <div class="box green"></div>
    <div class="box blue"></div>

    <div class="clear"></div>
</div> 
```

我的 CSS：

```
.wrap{
    margin: auto;
    width: 660px;
    background: #ccc;
}
.clear{
    clear: both;
}
.box{
    float: left;
    width: 200px;
    height: 200px;
    margin: 10px 10px;
}
.green{
    background: green;
}
.blue{
    background: blue;
}
.pink{
    background: pink;
} 
```

我的Javascript：

```
$(document).ready(function() {
    $('.wrap').isotope({
        itemSelector: '.box'
    });

    $('a.filter').click(function() {
        var to_filter = $(this).attr('rel');
        if(to_filter == 'all') {
            $('.box').fadeIn();
        } else {
            $('.box').each(function() {
                if($(this).hasClass(to_filter)) {
                    $(this).fadeIn();
                } else {
                    $(this).fadeOut();
                }
            });
        }
        return false;
    });
}); 
```

或者您可以查看此链接：http: [//jsfiddle.net/wPdXF/](http://jsfiddle.net/wPdXF/)

**我的确切问题：** 单击过滤器链接后，div 不会随机播放/动画

谁能帮帮我？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:40:03.427

您遇到的问题（它“过滤”项目，但不重新定位它们，或动画重新定位）是因为您使用的是 jquery 的内置隐藏/显示而不是同位素的内置过滤机制。

```
$(document).ready(function() {
$('.wrap').isotope();

$('a.filter').click(function() {
    var to_filter = $(this).attr('rel');
    if(to_filter == 'all') {
        $('.wrap').isotope({filter: '.box'});
    } else {
        $('.wrap').isotope({filter: '.'+to_filter});
    }

});
}); 
```

工作小提琴：http: [//jsfiddle.net/yDPxK/1/](http://jsfiddle.net/yDPxK/1/)

您需要做的是为过滤器提供同位素（您从`rel`属性中匹配的类名。使用 jquery 的默认淡入/淡出只会改变它们的显示属性值，而不是改变它们在 DOM 中的位置。

过滤文档：http: [//isotope.metafizzy.co/docs/filtering.html](http://isotope.metafizzy.co/docs/filtering.html)

# android - 使用 View.BaseSavedState 覆盖 View.onSaveInstanceState() 和 View.onRestoreInstanceState()？

> ID：14891434
> 
> 赞同：18
> 
> 时间：2013-02-15T09:19:01.723
> 
> 标签：android, android-view, android-custom-view

假设你想从现有的 View 实现中派生出你自己的 View 类，增加一点价值，从而维护一些变量，以一种有意义的方式代表你的 View 的状态。

如果您的 View 能像其他人一样自动保存其状态（如果分配了 ID），那就太好了，这样您就想覆盖`onRestoreInstanceState()`and `onSaveInstanceState()`。

当然，你需要调用你的基类各自的方法，你需要将你的状态信息和你的基类的状态信息结合起来。

显然，这样做的唯一安全方法是将您的超类包装`Parcelable`在一个自己的中`Parcelable`，这样键就不会混淆。

现在有[`View.BaseSavedState`](http://developer.android.com/reference/android/view/View.BaseSavedState.html)它有趣的`getSuperState()`方法，但我不知何故无法理解这如何真正增加价值，只是将基类与派生视图的状态值一起存储`Parcelable`在 a 中并返回它。`Bundle`另一方面，也许其他一些系统组件会期望所有 InstanceState 信息都是类型的`View.AbsSavedState`（例如，`getSuperState()`可以调用的）？

你有什么愿意分享的经验吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-20T10:43:02.983

为了补充 James Chen 的回答，[这里](https://github.com/CharlesHarley/Example-Android-SavingInstanceState/blob/master/src/com/example/android/savinginstancestate/views/LockCombinationPicker.java)有一个完整的例子，说明如何使用这种方法，基于 Charles Harley 的博客[文章](http://www.charlesharley.com/2012/programming/views-saving-instance-state-in-android)。

来自链接的代码：

```
public class LockCombinationPicker extends LinearLayout {
    private NumberPicker numberPicker1;
    private NumberPicker numberPicker2;
    private NumberPicker numberPicker3;

    public LockCombinationPicker(Context context) {
        this(context, null);
    }

    public LockCombinationPicker(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public LockCombinationPicker(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        loadViews();
    }

    private void loadViews() {
        LayoutInflater.from(getContext()).inflate(R.layout.lock_combination_picker, this, true);
        numberPicker1 = (NumberPicker) findViewById(R.id.number1);
        numberPicker1.setMinValue(0);
        numberPicker1.setMaxValue(10);
        numberPicker2 = (NumberPicker) findViewById(R.id.number2);
        numberPicker2.setMinValue(0);
        numberPicker2.setMaxValue(10);
        numberPicker3 = (NumberPicker) findViewById(R.id.number3);
        numberPicker3.setMinValue(0);
        numberPicker3.setMaxValue(10);
    }

    @Override
    protected Parcelable onSaveInstanceState() {
        Parcelable superState = super.onSaveInstanceState();
        return new SavedState(superState, numberPicker1.getValue(), numberPicker2.getValue(), numberPicker3.getValue());
    }

    @Override
    protected void onRestoreInstanceState(Parcelable state) {
        SavedState savedState = (SavedState) state;
        super.onRestoreInstanceState(savedState.getSuperState());
        numberPicker1.setValue(savedState.getNumber1());
        numberPicker2.setValue(savedState.getNumber2());
        numberPicker3.setValue(savedState.getNumber3());
    }

    @Override
    protected void dispatchSaveInstanceState(SparseArray<Parcelable> container) {
        // As we save our own instance state, ensure our children don't save and restore their state as well.
        super.dispatchFreezeSelfOnly(container);
    }

    @Override
    protected void dispatchRestoreInstanceState(SparseArray<Parcelable> container) {
        /** See comment in {@link #dispatchSaveInstanceState(android.util.SparseArray)} */
        super.dispatchThawSelfOnly(container);
    }

    /**
     * Convenience class to save / restore the lock combination picker state. Looks clumsy but once created is easy to maintain and use.
     */
    protected static class SavedState extends BaseSavedState {
        private final int number1;
        private final int number2;
        private final int number3;

        private SavedState(Parcelable superState, int number1, int number2, int number3) {
            super(superState);
            this.number1 = number1;
            this.number2 = number2;
            this.number3 = number3;
        }

        private SavedState(Parcel in) {
            super(in);
            number1 = in.readInt();
            number2 = in.readInt();
            number3 = in.readInt();
        }

        public int getNumber1() {
            return number1;
        }

        public int getNumber2() {
            return number2;
        }

        public int getNumber3() {
            return number3;
        }

        @Override
        public void writeToParcel(Parcel destination, int flags) {
            super.writeToParcel(destination, flags);
            destination.writeInt(number1);
            destination.writeInt(number2);
            destination.writeInt(number3);
        }

        public static final Parcelable.Creator<SavedState> CREATOR = new Creator<SavedState>() {
            public SavedState createFromParcel(Parcel in) {
                return new SavedState(in);
            }

            public SavedState[] newArray(int size) {
                return new SavedState[size];
            }
        };
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-24T04:05:56.897

我认为设计需要我们，顾名思义，实现 View.BaseSavedState 的子类，通过覆盖 Parcelable 的接口来存储值。

TextView.SavedState 就是一个很好的例子

```
public static class SavedState extends BaseSavedState {
    int selStart;
    int selEnd;
    CharSequence text;
    boolean frozenWithFocus;
    CharSequence error;

    SavedState(Parcelable superState) {
        super(superState);
    }

    @Override
    public void writeToParcel(Parcel out, int flags) {
        super.writeToParcel(out, flags);
        out.writeInt(selStart);
        out.writeInt(selEnd);
        out.writeInt(frozenWithFocus ? 1 : 0);
        TextUtils.writeToParcel(text, out, flags);

        if (error == null) {
            out.writeInt(0);
        } else {
            out.writeInt(1);
            TextUtils.writeToParcel(error, out, flags);
        }
    }

    @Override
    public String toString() {
        String str = "TextView.SavedState{"
                + Integer.toHexString(System.identityHashCode(this))
                + " start=" + selStart + " end=" + selEnd;
        if (text != null) {
            str += " text=" + text;
        }
        return str + "}";
    }

    @SuppressWarnings("hiding")
    public static final Parcelable.Creator<SavedState> CREATOR
            = new Parcelable.Creator<SavedState>() {
        public SavedState createFromParcel(Parcel in) {
            return new SavedState(in);
        }

        public SavedState[] newArray(int size) {
            return new SavedState[size];
        }
    };

    private SavedState(Parcel in) {
        super(in);
        selStart = in.readInt();
        selEnd = in.readInt();
        frozenWithFocus = (in.readInt() != 0);
        text = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(in);

        if (in.readInt() != 0) {
            error = TextUtils.CHAR_SEQUENCE_CREATOR.createFromParcel(in);
        }
    }
} 
```

# java - Web 应用程序工作流中的控制器 Servlet

> ID：14891437
> 
> 赞同：1
> 
> 时间：2013-02-15T09:19:13.050
> 
> 标签：java, model-view-controller, web-applications, servlets, controller

我想知道部署在 JBoss/Weblogic/Webphere 上的任何 Web 应用程序的起点是什么。

例如，如果您采用基于 struts 的应用程序，则起点是 ActionServlets 扮演控制器的角色，它管理所有传入的请求。我确信控制器取决于框架。

如果是这样，请帮助我确定除 Struts、Flext 等之外的流行框架，我可以在其中假定 ActionServlet 作为我的控制器。

在我的脑海里仍然有一个问题，想知道 Application Server 有什么特定的吗？如果是这样，任何见解都将受到高度赞赏。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:13:06.593

在您澄清之后，我将尝试写下如何构建简单的 Web 应用程序（没有框架）

1.  一个启动 servlet，只初始化全局的东西并检查资源（db pools，jms）。只有它的 init() 方法实现并加载了订单 0。
2.  登录 servlet，以登录 jsp 作为其主视图。
3.  一组将用户重定向到登录 servlet 的欢迎页面（在 web.xml 中）
4.  一个仪表板 servlet，带有一个简单的 jsp 作为视图，可以插入菜单并为应用程序提供一个很好的起点。

在此之后，每个操作/菜单都将映射到一个或多个 servlet，执行所有免费活动并重定向到 jsp 视图。

通常我将每个请求管理到单个 servlet、doGet() 或 doPost() 方法中，但这不是强制性的，取决于我在做什么。

例如，如果您必须生成一个报告并且此生成需要时间，则 servlet 只需在某处（JMS 队列或启动 Quartz 任务）将一个报告请求加入队列，并通过一个说明请求已完成的礼貌页面将控制权交还给浏览器。排队。

在某些情况下，来自 Web UI 的单个请求在功能上会影响我的更多“servlet”，在这种情况下，我使用 RequestDispatcher 实用程序链接请求。

这样做可能会导致代码重复，因此良好的业务类树设计是必须的。servlet 之间共享的通用业务代码（充当用户输入、业务逻辑和数据逻辑之间的粘合剂 - 就像控制器 ^^）

# notifications - Titanium 是否有用于 Objective-C 的“didReceiveRemoteNotification”的方法？

> ID：14891447
> 
> 赞同：2
> 
> 时间：2013-02-15T09:19:30.467
> 
> 标签：notifications, titanium, push

我想在应用程序处于前台时接收远程推送通知。我想我可以在 Objective-C 中使用“didReceiveRemoteNotification”，但是在 Titanium 中呢？我一直在寻找解决方案，但找不到任何东西。有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:11:23.193

对不起，我上次错了。很难找到，但 Titanium 支持一种与 PushNotifications 交互的方式。请看一下[`Ti.Network.registerForPushNotifications`](http://urbanairship.com)。它提供了一个回调，当您收到推送通知时执行该回调。

下面发布的其他解决方案可能会为钛提供更好的集成，因此您可以自行决定使用什么。但这应该回答你原来的问题。

> 不幸的是，Titanium 仅支持 iOS 上的本地通知。如果您想支持远程通知，您可以使用
> 
> *   [城市飞艇](http://urbanairship.com)
> *   [ACS（Appcelerator 云服务）](http://www.titaniumtutorial.com/2012/07/appcelerator-cloud-push-notification-in.html)或
> *   您编写自己的模块，将“didReceiveRemoteNotifcation”作为应用事件提供给您的应用
> 
> 据我所知，默认情况下您只能收听[本地通知](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.iOS-event-notification)，但如果它对远程通知有反应，您可以尝试[此方法..](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.App.iOS-event-notification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:13:50.843

我相信 Titanium 目前只支持本地通知（默认情况下）。您可能想看看[AppCelerator](http://www.pushwoosh.com/programming-push-notification/appcelerator-titanium-push-notification/)作为解决方案。

# google-app-engine - appengine 玩具程序达到读写配额限制

> ID：14891451
> 
> 赞同：1
> 
> 时间：2013-02-15T09:19:45.610
> 
> 标签：google-app-engine, google-cloud-datastore, blobstore, gae-quotas

假设我想制作一个 appengine 应用程序，它可以存储 50,000 个单词的词典以及 10 种其他类似大小的语言的等效词典。

我在我的开发服务器上本地工作，但是当我将第一个字典加载到真正的应用服务器时，我立即超过了我每天的写入配额。我不知道有多少字典条目进入了数据存储区。所以，24 小时后，我去尝试批量下载字典，看看我实际有多少条目，但这样做我达到了每天的阅读量配额，但我的麻烦却一无所获。我尝试在设置每日最高 1.00 美元的情况下启用计费，并通过批量装载机达到该配额，但没有获得任何数据说明我的麻烦或我的 1.00 美元。

无论如何，所以我查看了我的数据存储查看器，它显示我的每个字典单词都需要 8 次写入数据存储。

那么，这是否意味着这种应用程序不适合 appengine 呢？我不应该尝试在其中存储字典吗？有没有更聪明的方法来做到这一点？例如，我可以以某种方式将字典以文件形式存储在 blob 存储中，然后从那里以编程方式对其进行处理吗？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:40:20.967

很可能你的阅读量要比写作少得多，所以问题在于获取数据，而不是阅读它。

因此，使用当前配置所需要做的就是降低写入速率。然后，大概您将通过它的 ID 获取每个单词（我希望是单词本身！），因此读取速度会很快而且很小，完全符合您的要求。

您可以这样做：将您的源数据切成每个字母 1 个文件。将这些文件与您的应用程序一起上传并创建一个任务来依次读取每个文件，然后将这些数据慢慢写入数据存储区。一旦该任务完成，它的最后一个动作就是调用下一个任务。

可能需要一周的时间才能完成，但一旦完成，它就会比你必须从 blob 存储中获取一个不透明的 blob 方便得多，为你真正感兴趣的每个 1 读取 N 个单词，然后解包并处理每一个字。

您也可以使用批量下载器上传数据！

# java - 我应该如何设计我的 Play2 java 应用程序以符合“Play2 思维”

> ID：14891460
> 
> 赞同：1
> 
> 时间：2013-02-15T09:20:20.217
> 
> 标签：java, playframework-2.1

我正在使用 Java 构建一个 Play2 应用程序，它将接收几个电话号码并将其发布到发送 SMS 的休息服务。

我创建了一个控制器，我认为控制器将处理请求，执行解组到 Java 列表。然后我正在考虑创建一个 SmsService 类来处理调用。我无法理解的是我应该如何以 Play2 方式实现这一点。

我是否在 Controller 中通过键入 new 来实例化 SmsService？还是我使用依赖注入？也许我会被我的 Spring 背景着色，忘记所有关于注入并在 Controller 中编写所有内容？也许将方法设为静态并使用 SmsService 之类的 SmsService.sendSms(numbers)

我已经检查了 Play2 的 2.1 文件夹后面的示例，但那里的示例不处理这种情况。我可能错过了文档中的某些内容。

你会怎么做？为什么？

**短信控制器：**

```
public class Sms extends Controller {

    private static final ObjectMapper mapper = new ObjectMapper();        

    @BodyParser.Of(value = BodyParser.Json.class)
    public static Result inviteToReview() {
        ObjectNode result = Json.newObject();

        JsonNode json = request().body().asJson();
        if(json == null) {
            result.put("status", "KO");
            result.put("message", "Missing phone number list [phone_numbers]");
            return badRequest(result);
        }

        List<String> numbers = new ArrayList<String>();    
        TypeReference collectionType = new TypeReference<ArrayList<String>>() {
        };
        try {
            numbers = mapper.readValue(json.get("phone_numbers"), collectionType);
        } catch (IOException e) {
            // handle error
        }

        SmsService smsService = new SmsService();
        result = smsService.sendSms(numbers);
        return ok(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T10:18:16.180

既然我现在得到了答案，我就这样做了。

全球的：

```
public class Global extends GlobalSettings {

    private static final Injector INJECTOR = createInjector();  

   /**
     * Need for injection.
     *
     * @param controllerClass
     * @param <A>
     * @return
     * @throws Exception
     */
    @Override
    public <A> A getControllerInstance(Class<A> controllerClass) throws Exception {
        return INJECTOR.getInstance(controllerClass);
    }

    private static Injector createInjector() {
        return Guice.createInjector();
    }
} 
```

控制器：

```
public class Sms extends Controller {

    private static final ObjectMapper mapper = new ObjectMapper();

    @Inject
    private SmsService smsService;

    @BodyParser.Of(value = BodyParser.Json.class)
    public Result invite(){
        ObjectNode result = Json.newObject();
        smsService.sendSms(new ArrayList<String>());
        result.put("status", "OK");
        //cool stuff ehere
        return ok(result);
    }
} 
```

路线：

```
GET /sms/invite    @controllers.Sms.invite() 
```

建造：

```
val appDependencies = Seq(
      javaCore,
    "com.google.inject" % "guice" % "3.0",    
  ) 
```

# highcharts - 如何在 Highcharts 中创建堆叠和分组的列？

> ID：14891461
> 
> 赞同：0
> 
> 时间：2013-02-15T09:20:40.323
> 
> 标签：highcharts, stacked

我想创建一个分组的堆积柱形图。每个区域（OECD、BRICS、...）应该有两列（2000、2050），并且每一列都有相同的多个类别。[到目前为止，这是](http://geodev.grid.unep.ch/megatrends/data/wasserbedarf.php)我想出的。

问题是我不知道如何显示“2000”和“2050”；以及如何避免类别在图例中显示两次。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T13:58:22.487

我通过摆弄`showInLegend`and解决了这个问题（部分）`legendItemClick`

看我的小提琴：http: [//jsfiddle.net/b72e0vh4/3/](http://jsfiddle.net/b72e0vh4/3/)

![在此处输入图像描述](../Images/acb48e9a3d343caf545f4c11121e1cb9.png)

# php - 如何修复多个文件中缺少单引号的关联数组键

> ID：14891464
> 
> 赞同：0
> 
> 时间：2013-02-15T09:20:47.017
> 
> 标签：php, regex, bash, sed, replace

我被分配了一个项目，该项目的关联数组到处都没有单引号。

例子：

```
$foo[bar] 
```

应该是：

```
$foo['bar'] 
```

这会生成一个 PHP 通知，这是非常糟糕的做法。

引用[PHP.net](http://www.php.net/manual/en/language.types.array.php)：

> 这是错误的，但它有效。原因是这段代码有一个未定义的常量（bar）而不是字符串（'bar' - 注意引号）。PHP 将来可能会定义常量，不幸的是，对于此类代码，这些常量具有相同的名称。它之所以有效，是因为 PHP 会自动将一个裸字符串（一个不与任何已知符号对应的未加引号的字符串）转换为包含该裸字符串的字符串。例如，如果没有定义名为 bar 的常量，那么 PHP 将替换字符串 'bar' 并使用它。

而且它对性能不利，因为它必须在使用之前搜索一个常数`'key'`

所以我想知道是否有人知道一个脚本可以实现这一点，而不必为每个文件一个一个地手动完成。

**更新：**

我使用 Vim 作为编辑器，我知道如何在单个文件中使用它的搜索和替换命令，但是我发现这有两个问题：

1.  我无法搜索和替换这样的东西，因为我认为它不支持正则表达式。

2.  它仅适用于当前打开的文件（据我所知）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:25:11.420

您的文本编辑器不支持使用正则表达式进行全局搜索和替换吗？

我可能会搜索类似的东西：

`(\$[a-zA-Z0-9]+\[)([^\]]+)\]`

并替换为

`\1'\2']`

正则表达式搜索+替换对于大量源文件的广泛更改非常有用。虽然确保在进行全局更改之前拍摄代码快照，然后验证您想要更改的所有内容都已更改，没有意外的副作用。

更新：

根据他/她正在使用 vim 的 OP 更新，请参阅此帖子的已接受答案：[Apply regular expression substitution global to many files with a script](https://stackoverflow.com/questions/3225477/apply-regular-expression-substitution-globally-to-many-files-with-a-script) ，该脚本描述在 vim 中的多个文件上使用正则表达式搜索/替换。

类似 sed 的语法向我表明，您正在寻找的命令（未经测试）是：

`:args **/*.php | argdo %s/(\$[a-zA-Z0-9]+\[)([^\]]+)\]/\1'\2'/ge | update`

您可能需要稍微调整一下，所以在修改所有文件之前进行备份。我建议您也尝试找到一个对用户更友好的 IDE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:25:34.663

您是否在 IDE 中进行搜索和替换？如果是这样使用它。这可能需要一些时间，但您需要小心一次性更改所有这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T08:20:45.473

这将是 vim 的另一种可能的解决方案：

```
:%s/\[\(\h*\)\]/\['\1'\]/gc 
```

这将改变以下所有实例：

```
[foo] 
```

到：

```
['foo'] 
```

并会提示确认。

以下示例将保持不变（应该如此）：

```
[$foo]
["foo"]
['foo']
[123] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:25:33.307

使用 IDE 对项目进行查找和替换。它们中的大多数都允许您在搜索字符串中放置一个正则表达式，因此只要它与模式匹配，请替换`[`为`['`和。`]``']`

# asp.net - 这个 Telerik.Web.UI.dll 可以免费使用吗？

> ID：14891469
> 
> 赞同：4
> 
> 时间：2013-02-15T09:21:12.780
> 
> 标签：asp.net, telerik-grid

我想使用 Telerik.Web.UI.dll 但我不知道它是免费的还是需要付费的，我可以下载它吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:23:49.873

您必须购买 Telerik Asp.net 组件才能使用它，所以不，它不是免费的。这是链接： [http ://www.telerik.com/purchase.aspx](http://www.telerik.com/purchase.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T07:06:21.183

您可以下载第一个试用版，如果您喜欢，请购买。您可以从以下链接下载试用版

[试用版](http://www.telerik.com/download.aspx)

# java - 打开 netbeans 时出现 JVM 创建失败消息

> ID：14891473
> 
> 赞同：4
> 
> 时间：2013-02-15T09:21:30.327
> 
> 标签：java, netbeans, netbeans-7, netbeans-platform

直到今天，我的 Netbeans 都能完美运行。但是今天早上尝试打开 net beans 时，它会给出**JVM 创建失败消息。**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-10T05:18:40.543

1.  打开 C:\Program Files\NetBeans\etc 下的 netbeans.conf 文件

2.  找到这一行：

`netbeans_default_options="-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true"`

3.  并替换为：添加**XX:MaxPermSize=128m**

`netbeans_default_options="-J-client -J-Xss2m -J-Xms32m -J-XX:PermSize=32m -J-XX:MaxPermSize=128m -J-Dapple.laf.useScreenMenuBar=true -J-Dapple.awt.graphics.UseQuartz=true -J-Dsun.java2d.noddraw=true"`

4.  重新启动 NetBeans。

# php - AJAX/PHP 自动显示更新值

> ID：14891477
> 
> 赞同：1
> 
> 时间：2013-02-15T09:21:38.250
> 
> 标签：php, mysql, ajax

我有一个简单的问题，我敢肯定。我只是不知道我应该在谷歌上搜索什么。我可能更容易解释：

例如，我有一个值为“是”的 mysql 字段

当值更改为“否”时，我如何使用 AJAX/PHP 继续查询该字段？

有人可以简单解释一下吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:27:52.197

首先创建一个 JavaScript 函数，该函数将执行 ajax 调用，然后将该函数放在 setInterval()

```
function ajaxcall(){

 // you ajax call;
}

 setInterval(ajaxcall, 10000);// change time by replacing 10000(time is in millisecond) 
```

这里将每 10 秒调用一次 ajaxcall。您可以在 ajaxcall 函数中执行任何操作，我的意思是通过 ajax 检查您的数据库值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:28:50.550

有两个功能会有所帮助。

```
setTimeout ( expression, timeout );
setInterval ( expression, interval );
```

其中`expression`是一个函数，`timeout`而区间是 中的整数`milliseconds`。`setTimeout`运行一次计时器并运行一次表达式，而`setInterval`每次间隔过去时都会运行表达式。

所以在你的情况下，它会像这样工作：

```
setInterval(function() {
    //call $.ajax here
    $.ajax({

        url         : URL,
        data        : passData,
        dataType    : 'json', //or html or xml
        beforeSend  : function()
        {
            //this will execute before request is send
        },
        success     : function(response)
        {
            //check for response if( response ) { } else {  }
        }

    });
}, 5000); //5 seconds
```

**现在后端 php 文件。**

```
<?php

$passedVar = $_REQUEST['passedData']; //get data that were passed in ajax call
//database connection
//query to check for status
if(query return true)
{
    echo json_encode(true);
    exit;
}
else
{
    echo json_encode(false);
    exit;
}
```

# mysql - 复杂的 SQL 语句让我越来越好

> ID：14891481
> 
> 赞同：0
> 
> 时间：2013-02-15T09:21:51.320
> 
> 标签：mysql

我知道我一定是非常愚蠢的，但我正在尝试使用相当复杂的语句（至少对我而言）查询数据库，并且我得到的行数比我预期的要多，有人知道如何“解决”这个问题吗？

我正在查询的表创建如下：

```
glycoPeptide | CREATE TABLE `glycoPeptide` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `protein` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1 |

run   | CREATE TABLE `run` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `glycoPeptide` int(11) NOT NULL,
  `run` enum('spectrum','chromatogram') NOT NULL,
  `glycoType` enum('N','O') DEFAULT NULL,
  `glycoSite` int(11) DEFAULT NULL,
  `pepMass` varchar(5) DEFAULT NULL,
  `pepSeq` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `glycoPeptide` (`glycoPeptide`),
  CONSTRAINT `run_ibfk_1` FOREIGN KEY (`glycoPeptide`) REFERENCES `glycoPeptide` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1 |

spectrum | CREATE TABLE `spectrum` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run` int(11) NOT NULL,
  `glycoform` varchar(255) DEFAULT NULL,
  `spectrum` enum('m/z','intensity') NOT NULL,
  PRIMARY KEY (`id`),
  KEY `run` (`run`),
  CONSTRAINT `spectrum_ibfk_1` FOREIGN KEY (`run`) REFERENCES `run` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=latin1 |

precursor | CREATE TABLE `precursor` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `run` int(11) NOT NULL,
  `retentionTime` time DEFAULT NULL,
  `mzValue` float DEFAULT NULL,
  `chargeState` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `run` (`run`),
  CONSTRAINT `precursor_ibfk_1` FOREIGN KEY (`run`) REFERENCES `run` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=latin1 |

binaryDataArray | CREATE TABLE `binaryDataArray` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `spectrum` int(11) NOT NULL,
  `arrayLength` int(11) NOT NULL,
  `EncodedLength` int(11) NOT NULL,
  `arrayData` text,
  PRIMARY KEY (`id`),
  KEY `spectrum` (`spectrum`),
  CONSTRAINT `binaryDataArray_ibfk_1` FOREIGN KEY (`spectrum`) REFERENCES `spectrum` (`id`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=latin1 | 
```

我有一些关于 2 种蛋白质（IgG 和 IgE）的测试数据。IgG 仅包含 1 次运行，仅包含 1 个糖位点，因此仅包含 1 个 binaryDataArrays 的“集合”。IgE 包含 3 个糖位点，因此有 3 次运行，每次运行可以包含多个光谱（每组 2 个 binaryDataArray）。

我使用以下查询（我知道使用 JOINS 会更漂亮）：

```
select
  precursor.mzValue,
  glycoPeptide.protein,
  binaryDataArray.arrayLength,
  binaryDataArray.encodedLength,
  precursor.chargeState,
  run.pepMass,
  run.PepSeq
from
  precursor,
  glycoPeptide,
  binaryDataArray,
  spectrum,
  run
where
  run.glycoPeptide = glycoPeptide.id AND
  spectrum.run = run.id AND
  precursor.run = run.id AND
  binaryDataArray.spectrum = spectrum.id AND
  spectrum.spectrum like 'm/z' AND
  precursor.mzValue like '1196.79' AND
  glycoPeptide.protein like 'IgE' AND
  run.glycoSite like '252' AND
  run.glycoType like 'N'; 
```

产生 IgG 的结果与我预期的一样：

```
+---------+---------+-------------+---------------+-------------+---------+-----------+
| mzValue | protein | arrayLength | encodedLength | chargeState | pepMass | PepSeq    |
+---------+---------+-------------+---------------+-------------+---------+-----------+
|   933.4 | IgG     |       10301 |         22912 |           3 | 1189\.   | EEQYNSTYR |
+---------+---------+-------------+---------------+-------------+---------+-----------+
1 row in set (0.00 sec) 
```

对于 IgE（使用上面的语句），我得到以下结果：

```
+---------+---------+-------------+---------------+-------------+---------+-----------+
| mzValue | protein | arrayLength | encodedLength | chargeState | pepMass | PepSeq    |
+---------+---------+-------------+---------------+-------------+---------+-----------+
| 1196.79 | IgE     |       10301 |        109880 |           3 | 1033\.   | GTVNLTWSR |
| 1196.79 | IgE     |       10301 |         54940 |           3 | 1033\.   | GTVNLTWSR |
| 1196.79 | IgE     |       10301 |         54940 |           3 | 1033\.   | GTVNLTWSR |
+---------+---------+-------------+---------------+-------------+---------+-----------+
3 rows in set (0.00 sec) 
```

虽然我希望这里只有 1 行，但我似乎无法理解它。

任何帮助将不胜感激

**-- 编辑 1 --**

据我所知，我编写 where 子句的方式应该与 join 完全一样，所以这不应该是问题......

**-- 编辑 2 --**

样本数据：

```
select * from glycoPeptide;
+----+---------+
| id | protein |
+----+---------+
|  1 | IgG     |
|  2 | IgE     |
+----+---------+
2 rows in set (0.00 sec)

mysql> select * from run;
+----+--------------+----------+-----------+-----------+---------+-----------------+
| id | glycoPeptide | run      | glycoType | glycoSite | pepMass | pepSeq          |
+----+--------------+----------+-----------+-----------+---------+-----------------+
|  1 |            1 | spectrum | N         |       297 | 1189\.   | EEQYNSTYR       |
|  2 |            2 | spectrum | N         |       275 | 1516\.   | NGTLTVTSTLPVGTR |
|  3 |            2 | spectrum | N         |       252 | 1033\.   | GTVNLTWSR       |
|  4 |            2 | spectrum | N         |        99 | 1556\.   | VAHTPSSTDWVDNK  |
+----+--------------+----------+-----------+-----------+---------+-----------------+
4 rows in set (0.00 sec)

select * from precursor;
+----+-----+---------------+---------+-------------+
| id | run | retentionTime | mzValue | chargeState |
+----+-----+---------------+---------+-------------+
|  1 |   1 | 00:13:32      |   933.4 |           3 |
|  2 |   2 | 00:00:00      |  965.55 |           2 |
|  3 |   2 | 00:00:00      | 912.036 |           2 |
|  4 |   2 | 00:00:00      | 1127.06 |           3 |
|  5 |   3 | 00:00:00      | 1099.97 |           2 |
|  6 |   3 | 00:00:00      |  1153.9 |           3 |
|  7 |   3 | 00:00:00      | 1196.79 |           3 |
|  8 |   4 | 00:00:00      |  1109.5 |           2 |
|  9 |   4 | 00:00:00      | 1157.66 |           2 |
| 10 |   4 | 00:00:00      | 1225.66 |           2 |
| 11 |   4 | 00:00:00      | 1206.47 |           3 |
| 12 |   4 | 00:00:00      | 1328.31 |           3 |
| 13 |   4 | 00:00:00      | 1304.09 |           3 |
| 14 |   4 | 00:00:00      | 1165.04 |           2 |
+----+-----+---------------+---------+-------------+
14 rows in set (0.00 sec)

mysql> select * from spectrum;
+----+-----+-----------+-----------+
| id | run | glycoform | spectrum  |
+----+-----+-----------+-----------+
|  1 |   1 | G1F       | m/z       |
|  2 |   1 | G1F       | intensity |
|  3 |   2 | NULL      | m/z       |
|  4 |   2 | NULL      | intensity |
|  5 |   2 | NULL      | m/z       |
|  6 |   2 | NULL      | intensity |
|  7 |   2 | NULL      | m/z       |
|  8 |   2 | NULL      | intensity |
|  9 |   3 | NULL      | m/z       |
| 10 |   3 | NULL      | intensity |
| 11 |   3 | NULL      | m/z       |
| 12 |   3 | NULL      | intensity |
| 13 |   3 | NULL      | m/z       |
| 14 |   3 | NULL      | intensity |
| 15 |   4 | NULL      | m/z       |
| 16 |   4 | NULL      | intensity |
| 17 |   4 | NULL      | m/z       |
| 18 |   4 | NULL      | intensity |
| 19 |   4 | NULL      | m/z       |
| 20 |   4 | NULL      | intensity |
| 21 |   4 | NULL      | m/z       |
| 22 |   4 | NULL      | intensity |
| 23 |   4 | NULL      | m/z       |
| 24 |   4 | NULL      | intensity |
| 25 |   4 | NULL      | m/z       |
| 26 |   4 | NULL      | intensity |
| 27 |   4 | NULL      | m/z       |
| 28 |   4 | NULL      | intensity |
+----+-----+-----------+-----------+
28 rows in set (0.00 sec)

mysql> select id, spectrum, arrayLength, encodedLength from binaryDataArray;
+----+----------+-------------+---------------+
| id | spectrum | arrayLength | encodedLength |
+----+----------+-------------+---------------+
|  1 |        1 |       10301 |         22912 |
|  2 |        2 |       10301 |          3092 |
|  3 |        3 |       10301 |         54940 |
|  4 |        4 |       10301 |        109880 |
|  5 |        5 |       10301 |         54940 |
|  6 |        6 |       10301 |        109880 |
|  7 |        7 |       10301 |        102408 |
|  8 |        8 |       10301 |        109880 |
|  9 |        9 |       10301 |        109880 |
| 10 |       10 |       10301 |         54940 |
| 11 |       11 |       10301 |         54940 |
| 12 |       12 |       10301 |        109880 |
| 13 |       13 |       10301 |         54940 |
| 14 |       14 |       10301 |        109880 |
| 15 |       15 |       10301 |        109880 |
| 16 |       16 |       10301 |         54940 |
| 17 |       17 |       10301 |         54940 |
| 18 |       18 |       10301 |        109880 |
| 19 |       19 |       10301 |        109880 |
| 20 |       20 |       10301 |         54940 |
| 21 |       21 |       10301 |        109880 |
| 22 |       22 |       10301 |         54940 |
| 23 |       23 |       10301 |         54940 |
| 24 |       24 |       10301 |        109880 |
| 25 |       25 |       10301 |         54940 |
| 26 |       26 |       10301 |        109880 |
| 27 |       27 |       10301 |        109880 |
| 28 |       28 |       10301 |         54940 |
+----+----------+-------------+---------------+
28 rows in set (0.00 sec) 
```

**-- 编辑 3 --**

当前所需的数据无法从数据库中收集，因为其中一个关系不存在（需要能够将光谱链接到前体）。我必须感谢 Radical 先生和 Jack 帮助发现了这个缺陷并接受了 Jack 的回答，因为他在查询中的连接表示法比我做的更容易阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:26:35.483

首先，我会像这样重写您的查询；更容易看到连接条件是什么，并且它保持 where 子句干净：

```
select
  precursor.mzValue,
  glycoPeptide.protein,
  binaryDataArray.arrayLength,
  binaryDataArray.encodedLength,
  precursor.chargeState,
  run.pepMass,
  run.PepSeq
from
  precursor
  inner join glycoPeptide on run.glycoPeptide = glycoPeptide.id
  inner join binaryDataArray on binaryDataArray.spectrum = spectrum.id
  inner join spectrum on spectrum.run = run.id
  inner join run on precursor.run = run.id
where
  spectrum.spectrum like 'm/z' AND
  precursor.mzValue like '1196.79' AND
  glycoPeptide.protein like 'IgE' AND
  run.glycoSite like '252' AND
  run.glycoType like 'N'; 
```

您的查询的问题在于`spectrum`表格。连接 from`run`产生三行，`spectrum.id`分别为 9、11 或 13。

```
|  9 |   3 | NULL      | m/z       |
| 11 |   3 | NULL      | m/z       |
| 13 |   3 | NULL      | m/z       | 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-15T09:30:33.273

MySql JOIN 会帮助你。你的问题太长了，所以我给你一个简单的 JOIN 例子

表引用可以使用 tbl_name AS alias_name 或 tbl_name alias_name 来别名：

```
SELECT t1.name, t2.salary
  FROM employee AS t1 INNER JOIN info AS t2 ON t1.name = t2.name;

SELECT t1.name, t2.salary
  FROM employee t1 INNER JOIN info t2 ON t1.name = t2.name; 
```

更多详情请访问： [http ://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

# c++ - 我无法使用 FindWindowEx() 来查找控件

> ID：14891486
> 
> 赞同：1
> 
> 时间：2013-02-15T09:22:12.733
> 
> 标签：c++, c, visual-c++, mfc, spy++

我想用 VC 打开 Microsoft Security Essential 程序并单击 Scan now 按钮。我可以找到窗口但找不到控件。这是我的代码，当我运行此代码时它显示 Control not found 。我尝试通过单击“运行”程序中的“浏览”按钮来测试此代码，它可以工作，但是当我尝试与 Microsoft Security Essential 一起使用时，它找不到控件。我不知道为什么这个控件可能在 Tab 中。如何使用 FindWindowEx() 单击 Microsoft Security Essential 中的立即扫描按钮？

```
int run_ms(){   

    ShellExecute(NULL, L"open", L"C:/Program Files/Microsoft Security Client/msseces.exe", NULL, NULL, SW_SHOWNORMAL);

        HWND w;
    w=FindWindow(NULL, L"Microsoft Security Essentials");

        if(w==NULL)
                MessageBox(NULL,L"Not found",L"",MB_OK);

        else{
                HWND cb;
                cb = FindWindowEx(w,NULL,NULL,_T("&Scan now"));     

            if(cb!=NULL)
            {
                SendMessage(cb,WM_LBUTTONDOWN, NULL,NULL);
                SendMessage(cb,WM_LBUTTONUP, NULL,NULL);
            }
            else
                MessageBox(NULL,L"Control not found",L"",MB_OK);
        }

            return 0;
} 
```

我在 Microsoft Security Essential 中使用带有按钮的 Spy++，它显示如下

```
Caption : &Scan now
Class : ALT:BUTTON
I use FindWindowEx() like this cb = FindWindowEx(w,NULL,NULL,_T("&Scan now")); 
```

但它没有找到控制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T18:29:55.373

该`FindWindowEx`函数不会“深入”到窗口层次结构中——它只会查看您要求它搜索的任何子窗口。话虽如此，并且通过快速查看 Microsoft Security Essentials 用户界面的屏幕截图，我 99% 确定您正在寻找的“立即扫描”按钮不是Microsoft Security Essentials 主窗口的*直接*子窗口。这就是你的`FindWindowEx`电话失败的原因。

我无权访问 Microsoft Security Essentials 软件，但通过访问`Spy++`它应该很容易找到“立即扫描”按钮的父级是谁：Microsoft Security Essentials 窗口或另一个窗口本身，即子窗口Microsoft Security Essentials 窗口的。

# asp.net - 如何计算图像的高度和宽度

> ID：14891488
> 
> 赞同：1
> 
> 时间：2013-02-15T09:22:16.750
> 
> 标签：asp.net, c#-4.0

我有服务器端图像控制：

```
 <img id="img" runat="server" style="padding-left:20px" 
       src="~/Images/2013-02-14_225913.png" /> 
```

我想计算它的高度和宽度。我这样做是：

```
int iWidth = (int)Math.Round((decimal)img.Width.Value);
int iHeight = (int)Math.Round((decimal)img.Height.Value); 
```

这将返回 -0，而不是实际参数。

如何获得图像控件的 H & W？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:35:22.270

```
Bitmap btmp;
string image = "~/Images/2013-02-14_225913.png";
myBitmap = new Bitmap(image);

int height= btmp.Height;
int weight = btmp.Width; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:58:49.500

你的问题不是很清楚，所以有两种情况：

1.  如果您指的是控件的属性，那么只有在`.aspx`/`.ascx`文件中实际分配控件的属性时才能获取大小。

    有两个单独的类被使用：

    ```
    <img id="img1" runat="server" 
        style="padding-left: 20px"
        src="meSepiaLarge.jpg" 
        width="100" height="100" />
    <asp:Image ID="img2" runat="server" 
        ImageUrl="~/meSepiaLarge.jpg"  
        Width="100px" Height="100px" /> 
    ```

    `img1`将`System.Web.UI.HtmlControls.HtmlImage`在服务器端实例化为 a ，而`img2`将是`System.Web.UI.WebControls.Image`. 以下是如何获得它们的尺寸。

    ```
    int i1Width = (int)Math.Round((decimal)img1.Width);
    int i1Height = (int)Math.Round((decimal)img1.Height);

    int i2Width = (int)Math.Round((decimal)img2.Width.Value);
    int i2Height = (int)Math.Round((decimal)img2.Height.Value); 
    ```

2.  如果您指的是源图像的大小，那么您可以查看[kad1r 的答案](https://stackoverflow.com/a/14891731/674700)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:49:30.633

您必须将其加载到内存中并计算高度和宽度

```
 Bitmap myBitmap = new Bitmap(Server.MapPath("~/images/lightbulb.png"));
        if (myBitmap != null)
        {
            Response.Write("Height:"+ myBitmap.Height + " & width:"+ myBitmap.Width);
        } 
```

# android - 在屏幕上设置动态壁纸时出现 OutOfMemoryError

> ID：14891489
> 
> 赞同：-5
> 
> 时间：2013-02-15T09:22:16.297
> 
> 标签：android, out-of-memory, live-wallpaper

```
02-15 09:10:02.196: E/dalvikvm-heap(881): Out of memory on a 2162176-byte allocation.
02-15 09:10:02.376: E/AndroidRuntime(881): FATAL EXCEPTION: main
02-15 09:10:02.376: E/AndroidRuntime(881): java.lang.OutOfMemoryError
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.graphics.BitmapFactory.decodeResource(BitmapFactory.java:378)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.plugai.android.livewallpapers.fishes.ClownFish.<init>(ClownFish.java:20)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.plugai.android.livewallpapers.Aquarium.addFishes(Aquarium.java:88)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.plugai.android.livewallpapers.Aquarium.initialize(Aquarium.java:81)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.plugai.android.livewallpapers.AquariumWallpaperService$AquariumWallpaperEngine.<init>(AquariumWallpaperService.java:20)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.plugai.android.livewallpapers.AquariumWallpaperService.onCreateEngine(AquariumWallpaperService.java:10)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.service.wallpaper.WallpaperService$IWallpaperEngineWrapper.executeMessage(WallpaperService.java:1034)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.android.internal.os.HandlerCaller$MyHandler.handleMessage(HandlerCaller.java:40)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.os.Looper.loop(Looper.java:137)
02-15 09:10:02.376: E/AndroidRuntime(881):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-15 09:10:02.376: E/AndroidRuntime(881):  at java.lang.reflect.Method.invokeNative(Native Method)
02-15 09:10:02.376: E/AndroidRuntime(881):  at java.lang.reflect.Method.invoke(Method.java:511)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-15 09:10:02.376: E/AndroidRuntime(881):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-15 09:10:02.376: E/AndroidRuntime(881):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:27:16.393

显然，动态壁纸需要的内存（RAM）比您拥有的更多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:28:06.213

您收到 OutOfMemory 异常。这意味着您的应用程序尝试在设备 RAM 中分配过多的内存。这通常是由于尝试加载大于所需的图像而引起的。

尝试缩小您在动态壁纸中使用的任何图形。

# xml - 为什么 XML 文字会在 Scala 中产生可变对象？

> ID：14891490
> 
> 赞同：6
> 
> 时间：2013-02-15T09:22:19.477
> 
> 标签：xml, scala, immutability

当在 Scala 中将节点序列声明为文字时，您会产生一个`scala.xml.NodeBuffer`可变的（它 extends `ArrayBuffer[scala.xml.Node]`which 反过来 extends `Seq[scala.xml.Node]`）：

```
scala> val xml = <a /><b />
xml: scala.xml.NodeBuffer = ArrayBuffer(<a></a>, <b></b>)

scala> xml += <c />
res46: xml.type = ArrayBuffer(<a></a>, <b></b>, <c></c>)

scala> xml
res47: scala.xml.NodeBuffer = ArrayBuffer(<a></a>, <b></b>, <c></c>) 
```

这与 Scala 使用不可变对象和函数式编程的理念相矛盾。为什么集合在默认情况下是不可变的，但在这种情况下 XML 文字（它们是一等公民）不是？

但是，是否可以通过使用 XML 文字安全地定义不可变节点序列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T10:15:45.253

似乎不可变的 XML 文字需要一个根节点（就像 XML 一样）。`scala.xml.Group`允许您使用`<xml:group />`.

这在 API 文档中被雄辩地描述为“将 XML 节点分组到一个节点中以进行输出的一种技巧”。

```
scala> val xml = <xml:group><a /><b /></xml:group>
xml: scala.xml.Group = <a></a><b></b> 
```

当您将此片段与其他 XML 组合时，组节点会消失：

```
scala> <foo>{xml}</foo>
res1: scala.xml.Elem = <foo><a></a><b></b></foo> 
```

# php - 密钥长度问题：phpseclib 上的 AES 加密和 PyCrypto 上的解密

> ID：14891492
> 
> 赞同：1
> 
> 时间：2013-02-15T09:22:24.283
> 
> 标签：php, python, aes, pycrypto, phpseclib

我正在从事一个数据密集型项目，我一直在使用 PHP 获取数据并使用 phpseclib 对其进行加密。大部分数据已使用 ECB 模式在 AES 中加密——但密钥长度仅为 10。我能够成功解密数据。

但是，我需要在项目的后期使用 Python，因此需要使用它来解密我的数据。我尝试使用 PyCrypto，但它告诉我密钥长度必须是 16、24 或 32 字节长，但事实并非如此。根据 phpseclib 文档，“键被空填充到最接近的有效大小”，但我不确定如何在 Python 中实现它。简单地用 6 个空格扩展字符串的长度是行不通的。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:17:40.747

我强烈建议您调整您的 PHP 代码以使用（至少）一个 16 字节的密钥，否则您的加密系统会比其他情况下要弱得多。

我还建议您切换到 CBC 模式，因为 ECB 模式可能会揭示您输入数据中的模式。确保每次使用密文加密和存储时都使用随机 IV。

最后，解决你原来的问题：

> 根据 phpseclib 文档，“键被空填充到最接近的有效大小”，但我不确定如何在 Python 中实现它。简单地用 6 个空格扩展字符串的长度是行不通的。

空格字符`0x20`与空字符不同`0x00`。

# java - java中字符串的语法匹配

> ID：14891498
> 
> 赞同：1
> 
> 时间：2013-02-15T09:22:57.407
> 
> 标签：java, string, syntax, string-matching

在 Java 中，我想编写一个语法匹配器。

为了`string1: a = a+b, and string2: c = c+d, syntax_matcher(string1,string2) = true.`

然而，`if string1 : a > 0; string2 : c == 0, syntax_matcher(string1,string2) = false.`

任何想法，如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:26:39.873

也许你可以做的是写一个`Stack`and 为第一个语句从左到右移动，推动像`VAR`then `ASSIGNMENT`， then `VAR`， then`OPERATOR`之类的值`VAR`。

一旦你有了它，你就可以从第二个表达式开始，**从右到左**移动，每次比较你有什么和你从堆栈中弹出的内容。

您正在阅读的内容与您弹出的内容之间的任何不匹配都会产生`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:28:47.473

使用[LR 解析器（维基百科）](https://en.wikipedia.org/wiki/LR_parser)解析表达式，因为它们可能是**上下文无关语言**。对于 Java，您可能想要使用例如[CUP 开源解析器生成器](http://www2.cs.tum.edu/projects/cup/)。

然后使用您最喜欢的树比较方法比较生成的[语法树（维基百科） 。](https://en.wikipedia.org/wiki/Abstract_syntax_tree)

有关常规语言和上下文无关语言的区别，请参见[Chomsky Hierarchy (Wikipedia)](https://en.wikipedia.org/wiki/Chomsky_hierarchy)。

# javascript - 无法在 javascript 中读取文件的全部内容

> ID：14891499
> 
> 赞同：0
> 
> 时间：2013-02-15T09:23:05.470
> 
> 标签：javascript, file-io

我有这段 javascript 代码

```
var file = Components.classes["@mozilla.org/file/local;1"]
           .createInstance(Components.interfaces.nsILocalFile);
file.initWithPath( this.savefile );
if ( file.exists() == false ) {
   return null;
}
var is = Components.classes["@mozilla.org/network/file-input-stream;1"]
           .createInstance( Components.interfaces.nsIFileInputStream );
is.init( file,0x01, 00004, null);
var sis = Components.classes["@mozilla.org/scriptableinputstream;1"]
           .createInstance( Components.interfaces.nsIScriptableInputStream );
sis.init( is );
output = sis.read( sis.available() );

sis.close();
is.close();
this.filterData = output;
return output; 
```

实际上我正在阅读的文件是一个二进制文件，可以说是 350 字节。现在 19 字节是“零”，所以在上面的代码中我只得到了 18 个字节的**输出**。

当我尝试调试**sis.available**时确实返回 350。但是**sis.read**只能读取到零字节。

我想要在输出中读取整个 350 字节的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:39:12.173

**编辑**

请参阅[https://developer.mozilla.org/en-US/docs/Reading_textual_data](https://developer.mozilla.org/en-US/docs/Reading_textual_data)

引用：

```
var charset = /* Need to find out what the character encoding is. Using UTF-8 for this example: */ "UTF-8";
var is = Components.classes["@mozilla.org/intl/converter-input-stream;1"]
               .createInstance(Components.interfaces.nsIConverterInputStream);
// This assumes that fis is the nsIInputStream you want to read from
is.init(fis, charset, 1024, 0xFFFD);
is.QueryInterface(Components.interfaces.nsIUnicharLineInputStream);

if (is instanceof Components.interfaces.nsIUnicharLineInputStream) {
  var line = {};
  var cont;
  do {
      cont = is.readLine(line);

      // Now you can do something with line.value
  } while (cont);
} 
```

这避免了空字节问题，是 unicode 安全的，并且适用于不太深奥的对象类型。

**原来的：**

根据我上面的评论，并根据您的编辑，

请参阅[https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIScriptableInputStream](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIScriptableInputStream)其中 read() 带有警告：如果数据包含空字节，则此方法将返回截断的字符串。您可能想改用 readBytes()。

或者，这是另一种方法：

```
var ph = Components.classes["@mozilla.org/network/protocol;1?name=file"]
          .createInstance(Components.interfaces.nsIFileProtocolHandler);

var file_to_read = ph.getURLSpecFromFile(file);

var req = new XMLHttpRequest();
req.onerror = function(e) {
        onError(e);
}

req.onreadystatechange = function() {
        if (log.readyState == 4) {
        //...
        }
}

req.open("GET", file_to_read, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:24:58.970

我可能错了，但是您是否尝试过发送一个简单的`GET`请求？在 AJAX 中？还是你严格地想使用 JS？

编辑：请参阅此 -[如何将文本文件的内容加载到 javascript 变量中？](https://stackoverflow.com/questions/196498/how-do-i-load-the-contents-of-a-text-file-into-a-javascript-variable)

# objective-c - Objective C：内存管理，释放具有多个引用的对象

> ID：14891501
> 
> 赞同：1
> 
> 时间：2013-02-15T09:23:14.097
> 
> 标签：objective-c

我想释放经销商中存在的汽车对象。我想知道什么是正确的做法。NSMutableArray Inventory 存储特定经销商的汽车。所以，现在我想向用户展示一个删除功能，因此，用户可以使用 Vin Number 选择汽车并将其删除。但是，如果我试图找到汽车并释放不起作用的参考。我需要从数组中删除对象然后释放引用吗？我对目标 c 和初始学习阶段相当陌生。谢谢你。

```
#import "Dealer.h"
#import "Address.h"
#import "PhoneNumber.h"

@implementation Dealer

static NSInteger dealerIdAllocater = 0;

-(id) init{
    self = [super init];
    self.dealerId = ++dealerIdAllocater;
    self.addressList = [[NSMutableArray alloc] init];
    self.inventory = [[NSMutableArray alloc] init];
    return self;
}

@synthesize dealerId, name, addressList, inventory;

-(void)addCarInInventory:(Car*)car{
    [self.inventory addObject: car];
}

-(void)displayAddresses{
    for(Address *address in self.addressList){
        NSLog(@"Street Address: %@", address.streetAddress);
        NSLog(@"City: %@", address.city);
        NSLog(@"State: %@", address.state);
        NSLog(@"Country: %@", address.country);
        for(int i=0; i<[address.phoneNumber count]; i++){
            PhoneNumber *phoneNumber = [address.phoneNumber objectAtIndex:i];
            NSLog(@"Phone Number %i, %@", i, phoneNumber.phoneNumber);
        }
        NSLog(@"--------------");
    }
}

-(void)displayInventory{
    for(Car *car in self.inventory){
        [car displayInformation];
    }
    NSLog(@"--------------");
}

-(Car *)findCarById:(NSString *)vinNumber{
    for(Car *car in self.inventory){
        if ([vinNumber isEqualToString:car.vinNumber]) {
            return car;
        }
    }
    return nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:01:39.650

> 我需要从数组中删除对象然后释放引用吗？

是的，像`NSMutableArray`s 这样的容器在添加对象时会将对象的保留计数增加 1。这是为了确保容器始终持有对对象的有效引用。当您从容器中移除一个对象时，保留计数将减 1。

# javascript - 如何在 javascript 中使用 json 值或在 json 对象中转换简单字符串？

> ID：14891515
> 
> 赞同：0
> 
> 时间：2013-02-15T09:23:56.217
> 
> 标签：javascript, ajax, json, jqplot

```
var data = [
  {label: "a Organinzation",data: 1},
  {label: "b pvt Ltd.",data: 2},
  {label: "d Organization",data: 10},
  {label: "Completed Organization",data: 15},
  {label: "Running Organization",data: 34}
]; 
```

我的 jsp 页面中有一个 jqplot 饼图，它采用上述格式获取数据。现在我的问题是它与静态数据一起工作得很好。但是当我想包含一些动态数据时。它显示空白图表，因为此数据变量无法解析我提供的字符串...
正在生成与上面代码片段中指定的相同的字符串，并具有以下内容

```
var total = rawdata.split(";");
var txt = null;

for (var i = 1; i < total.length - 1; i++) {
    if (i == 1) {
        txt = "{ label: \"" + total[i] + "\", data: " + total[i + 1] + "}";
    } else {
        txt = txt + ",  { label: \"" + total[i] + "\", data: " + total[i + 1] + "}";
    }
    i++;
}
alert(txt);

elem = $('#fl_3');

var data = [JSON.parse(txt)]; 
```

当我提醒 txt 变量时，它给了我以下模式，这与我最初给出的代码片段相同......

```
{ label: "Abc LTd.", data: 42},
{ label: "A org", data: 2},  
{ label: "B Org", data: 6},  
{ label: "c Org", data: 1},  
{ label: "dbc comp ltd", data: 1},  
{ label: "avc comp pvt. ltd", data: 1} 
```

那为什么它不能将其解析为json？在我的浏览器中，我收到了这个错误：

```
Error: SyntaxError: JSON.parse: expected property name or '}' 
```

如果我写`data=[txt];`，什么都不会出现。
如果我写`data = [JSON.parse(txt)];`然后我得到错误..

有人可以帮我吗？我怎样才能让这个运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:29:43.510

将字符串包裹`txt`在括号内

```
var data = JSON.parse('[' + txt + ']'); 
```

这将为您提供对象数组。

正如@guypursey 提到的，您还必须将标签用双引号括起来，请参阅[JSFiddle](http://jsfiddle.net/CSvgf/)

```
var txt = '{ "label": "Abc LTd.", "data": 42},\
{ "label": "A org", "data": 2},\
{ "label": "B Org", "data": 6},\
{ "label": "c Org", "data": 1},\
{ "label": "dbc comp ltd", "data": 1},\
{ "label": "avc comp pvt. ltd", "data": 1}';

var data = JSON.parse('[' + txt + ']');
console.log(data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:32:52.593

如果您已经在数组中有数据，为什么还要构建一个字符串然后将其解析回对象？也许你只需要以`total`某种方式重新格式化。不确定`total`数组的结构。玩这个：

```
var data = [];
for (var i = 0; i < total.length - 1; i = i + 2) {
    data.push({label: total[i], data: total[i + 1]});
} 
```

注意：我假设这里`rawdata`看起来像这个字符串：

```
"a Organinzation;1;b pvt Ltd.;2;Completed Organization;3"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T09:32:42.510

尝试将属性名称用双引号括起来，如[JSON 标准](http://www.json.org/)中指定的那样。例如：

```
txt= '{ "label": "' + total[i] + '", "data": ' + total[i+1] + '}'; 
```

通过使用单引号来包装您要连接的字符串部分，我不得不在这里为双引号使用反斜杠转义。只是不要忘记转义任何单引号。

并且不要忘记在您的数据数组的方括号周围加上单引号并将它们包含在解析中！

```
var data = JSON.parse('[' + txt +']'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T10:16:31.513

感谢您的回复..但我的问题通过以下方式解决

```
var data = eval(txt); 
```

我不知道..它只需要这个...感谢您的帮助..如果我错了请纠正我

# cakephp - CakePHP 2 动态树类别菜单

> ID：14891516
> 
> 赞同：2
> 
> 时间：2013-02-15T09:23:58.717
> 
> 标签：cakephp, cakephp-2.x

**对于 CakePHP 2**

我想创建一个类别菜单，列出我的产品类别。这是一个 3 级菜单。菜单中的每个类别都是一个链接，可打开一个页面，其中列出了属于它的所有产品。因此，如果类别是父类别，则应列出子类别中包含的所有产品，即 2 个子级别。此外，如果类别是儿童，它应该链接到属于它的产品的列表页面。

话虽如此，这就是我到目前为止所做的。

我根据 cake 的约定使用以下列创建了类别表：

id--parent_id--lft--rght--name

然后是我的产品表：

id--名称--slug--category_id

现在 Category.php 模型：

```
 <?php
class Category extends AppModel {

    public $name = 'Category';

    public $actsAs = array('Tree');

    public $belongsTo = array(
        'ParentCategory' => array(
            'className' => 'Category',
            'foreignKey' => 'parent_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
            )
        );

    public $hasMany = array(
        'ChildCategory' => array(
            'className' => 'Category',
            'foreignKey' => 'parent_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
            )
        );
} 
```

我正在使用 ProductsController 来呈现类别菜单，因为这是包含此类别菜单的页面：

```
 <?php
class ProductsController extends AppController{

    public $uses = array('Product');

    public function index(){ 
       $this->layout = 'products';
       $this->loadModel('Category'); 
       $this->set('data',$this->Category->generateTreeList()); 
    }
} 
```

和我的 index.ctp 视图：

```
<?php debug($categories); ?> 
```

我现在想要的是为我的类别构建一个嵌套的 ul-li 菜单，该菜单根据树链接到它们所属的产品页面。

```
<ul class="ulclass">
    <li class="liclass"><a href="category">category</a></li>
</ul> 
```

我只检查了这种教程，不幸的是我没有找到任何很好的解释，我确实找到了一个 TreeHelper 但我不知道如何使用它 >>>[来自 Github 的 TreeHelper](https://github.com/CakeDC/utils/blob/master/View/Helper/TreeHelper.php)

但是，我希望通过添加 css 类来控制我的类别的树形菜单。如果您认为这个助手可以为我提供这种结构，那很好。但我不知道如何使用它。更不用说我是 CakePHP 的新手 :( 但我想学习它，因为它是一个很棒的工具。

我忘记了一些关于我的数据库的事情，我是否必须在我的表中添加任何其他列才能使这个系统正常工作，或者它是否正确？

最后一件事，由于我在 CakePHP 2 中没有找到关于这个类别/产品动态树菜单的任何内容，我将在 Github 上分享整个代码，以便它可以帮助许多其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:49:24.523

好的。假设您使用我的[更新版本](https://github.com/dereuromark/tools/blob/master/View/Helper/TreeHelper.php)：

```
// in your controller
$categories = $this->Model->children($id);
// or
$categories = $this->Model->find('threaded', array(...)); 
```

然后将其传递给视图。

```
// in your view ctp
$categories = Hash::nest($categories); // optional, if you used find(all) instead of find(threaded) or children()

$treeOptions = array('id' => 'main-navigation', 'model' => 'Category', 'treePath' => $treePath, 'hideUnrelated' => true, 'element' => 'node', 'autoPath' => array($currentCategory['Category']['lft'], $currentCategory['Category']['rght']));

echo $this->Tree->generate($categories, $treeOptions); 
```

这里是 /Elements/node.ctp 中元素的示例：

```
$category = $data['Category'];
if (!$category['active'] || !empty($category['hide'])) { // You can do anything here depending on the record content
    return;
}
echo $this->Html->link($category['name'], array('action' => 'find', 'category_id' => $category['id'])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T01:43:55.047

这是一个简单的解决方案，在控制器中用于索引视图。稍后，您为每个`$posts`as`$post`和`foreach $post['Post']['children']`.

```
$posts = $this->Post->find('all', array('conditions' => array('parent_id'=>null)));
    foreach ($posts as $postKey => $post) {
        $posts[$postKey]['Post']['children'] = $this->Post->find('all', array('conditions' => array('parent_id'=>$post['Post']['id'])));
    }         
    $this->set('posts', $posts); 
```

# c# - 如何开始在 Windows CE 上开发应用程序？

> ID：14891523
> 
> 赞同：4
> 
> 时间：2013-02-15T09:24:38.313
> 
> 标签：c#, windows, visual-studio, windows-ce, motorola

我是 CE 环境的新手，我必须为使用 Windows CE 5.0（***摩托罗拉 mc3000***）的带有条形码扫描的移动计算机创建一个应用程序

我在想我应该使用 Visual Studio 2008，因为似乎 VS2010 和 VS2012 都不支持 Windows CE 5.0 : [ETA on Smart Device Projects for Visual Studio 2010](https://stackoverflow.com/questions/2775639/eta-on-smart-device-projects-for-visual-studio-2010)

我以前从未使用过 CE，并且我搜索了很多有用的教程来帮助我完成任务，但不幸的是没有结果。

有没有人知道任何好的教程来帮助我知道我正在使用 Windows 7 开始一个良好的开端？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:50:25.810

[Visual Studio 2003 教程](http://msdn.microsoft.com/en-us/library/aa446906.aspx)

本教程应该适用于 2003/2005。2008 可能支持 Windows 6.0 而不是 5.0 SDK 的文档应该包含有关访问摩托罗拉相机的信息。

# entity-framework - 来自带有参数的存储过程或表值函数的实体图

> ID：14891527
> 
> 赞同：2
> 
> 时间：2013-02-15T09:24:50.670
> 
> 标签：entity-framework, nhibernate, entity-framework-5

EF 或 NHibernate 都可以处理以下情况吗？

*   假设具有表 A 和 B 的数据模型，映射到实体 A* 和 B*
*   实体 A* 包含 0..n 个子实体 B*s
*   表 B 包含表 A 的 id 列的外键

到目前为止，这是 ORM 101，但现在变得更加棘手：

*   必须使用表值函数或存储过程来访问数据库
*   调用任何一个都必须包含两个附加参数
    *   例如假设一个整数和一个 datetime2

有没有办法传入两个额外的参数，以便 EF 或 NH 可以将它们依次添加到它为填充对象图而进行的调用中？可以根据需要修改 TVF 或存储过程的输出，所以我认为我问的问题与[这篇文章](https://stackoverflow.com/questions/7953855/mapping-select-stored-procedures-in-entity-framework)不同，但可能会出错。

这些工具中的任何一个都可以适应这种情况吗？最好不要手动组合对象图，这似乎是逻辑计划 B。

更新：jbl（谢谢）建议了这个[链接](http://ayende.com/blog/1720/using-sql-functions-in-nhibernate)，这让我们走到了一半。它展示了如何从参数化的 TVF 加载简单实体的集合。但是，我正在尝试做一些更复杂的事情。就我而言

(1) 我需要加载子实体和

(2) 子实体的query/TVF也需要传递相同的两个参数

我的问题的核心是“最好/正确的方法是什么？” 有没有办法配置这些工具中的任何一个来为我填充对象图，因为它们都可以在简单的基于查询的情况下执行？

# c# - 如何检索动态创建的文本框的文本并将其显示为wpf c#中动态创建的按钮的内容

> ID：14891530
> 
> 赞同：0
> 
> 时间：2013-02-15T09:24:54.047
> 
> 标签：c#, wpf

我正在尝试在列表视图中动态创建一个文本框和一个按钮，并且效果很好。我尝试的下一件事是获取动态创建的文本框中的文本，并在 button_click 事件上显示为按钮的内容。我很困惑，不知道如何在后面的代码中访问动态创建的按钮或文本“名称属性”对此无效。

欢迎任何建议......

XAML

```
<ListView Height="222" HorizontalAlignment="Left" Margin="341,24,0,0" Name="listView1" VerticalAlignment="Top" Width="290" Background="Green" 
              AllowDrop="True" 
              DragDrop.Drop="listview_drop" 
              DragDrop.DragEnter="treeview_dragenter" ItemsSource="{Binding XPath=self::*}"></pre>
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" x:Name="stc">
                    <TextBlock Text="{Binding Path=Name}" Margin="0,0,3,0"/>
                    <ComboBox Margin="0,0,3,0" x:Name="cbox1">
                        <ComboBoxItem Content="Less Than"/>
                        <ComboBoxItem Content="Greater Than"/>
                        <ComboBoxItem Content="Equals"/>
                    </ComboBox>
                    <TextBox Margin="0,0,3,0" Width="50" x:Name="textbox1" />
                    <Button x:Name="but1" Height="25" Width="35" Click="click" Content="gen" />
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

代码

```
private void click(object sender, RoutedEventArgs e)
{
    //Don`t know what do do here           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:17:56.970

您可以通过[FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname.aspx)方法获得命名的 TextBox：

```
private void click(object sender, RoutedEventArgs e)
{
    var button = sender as Button;
    var parent = button.Parent as FrameworkElement;
    var textBox = parent.FindName("textbox1") as TextBox;
    button.Content = textBox.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:19:03.580

在您的点击事件处理程序中，`sender`参数将是`Button`被点击的。因此，如果您将其转换为`Button`，您将获得可以使用的按钮对象。

但这只是给你按钮。如果您随后获得`Button`'s `DataContext`，则`DataTemplate`该按钮所在的对象被创建以显示。

通常此时我会`DataContext`通过数据绑定将模板中事物的文本与对象相关联，因此只需`DataContext`适当地操作对象，UI 就会自动更新。

如果你还没有这样做，那么`Button`你可以从 WPF 可视化树开始寻找模板中的其他控件，但是当你可以只使用数据绑定时，这通常比它的价值更麻烦。

# c# - FirstOrDefault/First 和 OrderByDescending 是否比 LastOrDefault/Last 和 OrderBy 快？

> ID：14891532
> 
> 赞同：15
> 
> 时间：2013-02-15T09:24:58.860
> 
> 标签：c#, performance, linq

我有一个 LINQ 问题，我想知道是否有人知道答案。

通常，如果我想查找按特定字段排序的记录，例如“最新添加的人”，我会写如下内容：

```
MyCollection.OrderByDescending(x => x.AddedDate).FirstOrDefault(); 
```

最近我从团队中另一个喜欢写作的 Dev 那里得到了一些工作：

```
MyCollection.OrderBy(x => x.AddedDate).LastOrDefault(); 
```

所以我的问题是，降序排序并选择第一个，比排序另一个方向并选择最后一个更快还是更慢？

我的想法是，首先会更快，因为它不需要在返回对象时“尽可能”地迭代集合，但这比其他任何事情都更加预感！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-15T09:29:15.380

如果您使用的是 LINQ-to-Objects，第一个会*稍微*快一些。这两种都将花费相同的时间*，但您认为这`FirstOrDefault`比`LastOrDefault`. 但是，与排序所需的时间相比，差异可以忽略不计。

（请注意，进行整体排序以仅获取顶部项目比使用`Last`over效率低得多`First`；考虑实现类似 MoreLINQ 的[`MaxBy`](http://code.google.com/p/morelinq/source/browse/MoreLinq/MaxBy.cs)函数来获取您想要的项目`O(n)`，而不是`O(n log n)`时间。）

如果您使用 LINQ 到其他东西（SQL、实体），它可能根本没有区别。

* 一般来说; 正如 RB 指出的那样，如果数据已经在某种程度上进行了排序，则情况可能并非如此。

# javascript - 过滤具有多个表单选择的 json 对象

> ID：14891535
> 
> 赞同：1
> 
> 时间：2013-02-15T09:25:05.290
> 
> 标签：javascript, jquery, json

我有一个像这样的 json 对象：

```
{"age":"18","50000": "641","100000": "1011","150000": "1391","gender":"female"},
{"age":"18","50000": "642","100000": "1012","150000": "1392","gender":"male"},
{"age":"20","50000": "643","100000": "1013","150000": "1393","gender":"male"} 
```

我正在尝试构建一个小型“计算器”来根据用户输入显示价格：

```
<label for="gender">Gender</label>
  <select id="gender" name="gender">
    <option value="Female">Female</option>
    <option value="Male">Male</option>
  </select>

<label for="amount">Amount</label>
  <select id="amount" name="amount">
    <option value="50000">500 00</option>
    <option value="100000">1 00000</option>
    <option value="150000">1 50000</option>
  </select> 

<label for="age">Age</label>
<input id="age" name="age" type="text" /> 
```

这是我尝试过的 javascript，但我似乎无法理解如何进行过滤并从表单中显示正确的值。

```
$(document).ready(function () {

    //JSON object
    var obj = {"data":
     [
      {"age":"18","50000": "641","100000": "1011","150000": "1391","gender":"female"},
      {"age":"18","50000": "642","100000": "1012","150000": "1392","gender":"male"},
      {"age":"20","50000": "643","100000": "1013","150000": "1393","gender":"male"}
     ]

    };

    //Find the value when form is submitted
    $('#target').submit(function() {

        obj.data = jQuery.grep(obj.data, function(element, index){
          return element.age && element.gender && element.amount; // retain appropriate elements

        });    

        //Empty the div
        $('#price-result').empty();

        //Show the result in div
        $("#price-result").append("Age: element.age, Gender: element.gender, Amount: element.amount, Price: element.price-from-json");

        return false;//Stop page from reloading

    });

}); 
```

任何人有任何提示我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:39:31.793

obj.data 中没有 element.amount。年龄和性别都在那里。

我正在迭代数据对象，检查是否有任何值匹配。我假设这些将是唯一记录，否则金额将被覆盖。

看这个[小提琴](http://jsfiddle.net/E65Vm/)

```
$(document).ready(function () {

//JSON object
var obj = {"data":
 [
  {"age":"18","50000": "641","100000": "1011","150000": "1391","gender":"female"},
  {"age":"18","50000": "642","100000": "1012","150000": "1392","gender":"male"},
  {"age":"20","50000": "643","100000": "1013","150000": "1393","gender":"male"}
 ]

};

//Find the value when form is submitted
$('#calc').click(function(e) {
    e.preventDefault();

    var data = jQuery.grep(obj.data, function(element, index){
      return element.age && element.gender; // retain appropriate elements

    });    

    var selectedGender = $('#gender').val().toString().toLowerCase();
    var selectedAmount= $('#amount').val().toString().toLowerCase();
    var selectedAge = $('#age').val().toString().toLowerCase();

    var amount = "";

    $.each(data,function(k, v){

        if( data[k].age.toString().toLowerCase() == selectedAge &&  
            data[k].gender.toString().toLowerCase() == selectedGender &&
            data[k][selectedAmount] != undefined){

            amount = data[k][selectedAmount];

        }

    });

    //Empty the div
    $('#price-result').empty();

    //Show the result in div
    var displayText = "Age: " + selectedAge + ", Gender: " + selectedGender + ", Amount: " + amount + ", Price: element.price-from-json";

    $("#price-result").append(amount == "" ? "No Results" : displayText);

    return false;//Stop page from reloading

});

}); 
```

# android - 使用缓存和 Phonegap 的 Android 离线和在线应用程序

> ID：14891537
> 
> 赞同：1
> 
> 时间：2013-02-15T09:25:13.187
> 
> 标签：android, cordova, mobile, browser-cache, offline-caching

我在 Android 中使用 Phonegap 进行缓存的经验。

```
 1\.  I want to create one app which should work online as well as offline. 
  2\.  If internet connectivity is there it should use otherwise use the history. 
```

现在它可以在线使用..但我也需要离线使用我的应用程序。检查网络连接：

```
 function onDeviceReady() {
    navigator.network.isReachable("phonegap.com", reachableCallback, {});
    navigator.notification.alert("Server Is Ready");

 }

       // Check network status
 //
 function reachableCallback(reachability) {
     // There is no consistency on the format of reachability
     var networkState = reachability.code || reachability;
     var states = {};
     states[NetworkStatus.NOT_REACHABLE]  = 'No network connection';
     states[NetworkStatus.REACHABLE_VIA_CARRIER_DATA_NETWORK] = 'Carrier data connection';
     states[NetworkStatus.REACHABLE_VIA_WIFI_NETWORK] = 'WiFi connection';

     alert('Connection type: ' + states[networkState]);
  } 
```

在没有任何 nwtwork 连接（离线）的情况下，谁能帮我访问我的应用程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:29:06.893

使用这个： `<html manifest="cache.manifest">`而不是`<html>`.

并在同一目录中创建一个名为`cache.manifest`.

该文件的内容应如下所示

缓存清单 index.html blabla.png

# java - Tomcat服务器远程重新部署

> ID：14891538
> 
> 赞同：0
> 
> 时间：2013-02-15T09:25:13.397
> 
> 标签：java, tomcat, jmx, shiro

我们有一个使用 Apache Shiro 来确保安全并部署在 Tomcat 7 服务器中的 Web 应用程序，以及一个使用 java swing 的管理应用程序。管理应用程序的目的之一是管理 Web 应用程序中用户的 url 访问权限。修改权限后，需要重新部署 Web 应用。我们已经在使用 JMX 在 Tomcat 中启动/停止/重新加载 Web 应用程序，但是有没有办法在每次更新 shiro.ini 文件时重新部署 Web 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:40:26.107

`shiro.ini`文件明显错误的地方（它在类路径根文件夹中）。我们刚刚尝试将其移动到 WEB-INF 文件夹，现在，我们不再需要手动重新部署。最终只需重新加载 Web 应用程序，就可以使用 JMX 来完成。

谢谢dinesh707，你的评论在某种程度上帮助了我们。

# c - 结构到结构分配后的奇怪错误

> ID：14891539
> 
> 赞同：1
> 
> 时间：2013-02-15T09:25:14.427
> 
> 标签：c, gcc, struct

我在我的程序中声明了以下类型和函数。

```
typedef char TYPE_name_type;
typedef char TYPE_name_category;
typedef struct {
   TYPE_name_category category;
   TYPE_name_type id;
} TYPE_cod_name;
typedef struct {
   TYPE_name_type name;
   TYPE_cod_name image;
} TYPE_beta_name;
typedef struct {
   TYPE_cod_name lefty;
   TYPE_cod_name righty;
} TYPE_codomain_pair;
typedef char TYPE_thread_ref;
typedef struct {
   TYPE_beta_name items[2];
   unsigned int length;
} TYPE_beta_env;
typedef struct {
   TYPE_thread_ref pid;
   TYPE_beta_env env;
} TYPE_thread_env;
typedef struct {
   TYPE_thread_env items[3];
   unsigned int length;
} TYPE_beta_type;

TYPE_beta_type FUNCTION_post_Reset
(TYPE_beta_type  V34,
 TYPE_thread_ref V35) {
  TYPE_beta_type result;
  TYPE_beta_type V78 = (TYPE__EMPTY_CONST_beta_type);
  TYPE_thread_env V79;
  TYPE_beta_type V79_cont;
  unsigned int V79_index;
  V79_cont = V34;
  V79_index = 0;
  V79 = V79_cont.items[0];
  if (V79_cont.length > 0) {
    while (1) {
      if (V79.pid == V35) {
         V78 = TYPE__OP_thread_env__CONCAT_OP__beta_type(V78, V79);
      }
      if(V79_index == (V79_cont.length - 1)) break;
      V79_index ++;
      V79 = V79_cont.items[V79_index];
      assert (V79.pid == V79_cont.items[V79_index].pid);
    }
  }
  return V78;
} 
```

我注意到程序有时会在前一行的结构到结构分配之后立即在函数末尾的断言处停止。我尝试了几个版本的 gcc。它适用于 4.3.6、4.7.2，但对于 4.6.3 总是失败。

我正在开发内核为 3.6.11 的 32 位 Fedora 16。

可能是由于 gcc 4.3.6 上的问题还是我忽略了某些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T19:58:18.107

这是人们在编程中可能犯的最严重错误之一的结果：使用固定缓冲区大小。几乎可以保证你迟早会遇到麻烦，因为需求会改变，而你固定的缓冲区大小是不够的。

这里的问题是项目的大小仅为 3，并且我确信您会在断言失败时发现 V79_index 为 3。

Ps：我知道全世界都使用固定的缓冲区大小。但是全世界都曾经使用过goto。我认为两者都是有害的。

# android - 在android中打开键盘时如何在视图中滚动？

> ID：14891542
> 
> 赞同：3
> 
> 时间：2013-02-15T09:25:28.343
> 
> 标签：android, android-layout, android-scrollview, android-keypad

我在滚动视图中有许多编辑文本，当它们超过屏幕容量时，当键盘打开时，很难执行平滑滚动。这是我的代码。

```
 <ScrollView 
   android:layout_width="match_parent"
   android:layout_height="match_parent"
    >
    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical"   
    >
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
        <EditText 
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            />
    </LinearLayout>
</ScrollView> 
```

请用一个很好的链接来指导我这个问题，或者如果有人知道，请回答同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:41:14.793

将`android:windowSoftInputMode="adjustResize"` 您的活动标签放在清单文件中。

它会起作用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:39:06.593

采用

```
 android:focusable="true" 
        android:focusableInTouchMode="true" 
```

在线性布局里面。

# html - HTML5 不在 IE 中呈现标题标签

> ID：14891543
> 
> 赞同：3
> 
> 时间：2013-02-15T09:25:28.760
> 
> 标签：html, internet-explorer, html5shiv

所以我使用了一个名为 Bonsai 的静态站点生成器，它使用了一些相互依赖关系，如把手、倾斜和液体模板。现在遵循最佳实践，我正在 HTML5 上构建它。我已经在 chrome、firefox 和 opera 上广泛测试了该格式。为最后一个 IE 保存最坏的情况。

首先在那些要给出明显解决方案的人之前，我已经在头部包含了 html5shiv 并且我已经在 css 中设置了：

```
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {
  display: block;
} 
```

我希望有 IE 8 和 9 支持真的我不太关心老年人。现在标题根本不呈现，当在 IE9 中查看控制台时，我可以看到甚至没有任何东西被通过。我认为这是因为它试图从在线资源中提取 shiv 文件，所以我下载了 html5shiv.js 文件并将其链接到头部并按如下方式调用它：

```
 <!--[if lte IE 9]>
    <script src="/js/html5shiv.js"></script>
  <![endif]-->

  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]--> 
```

并且什么都没有，就像测试一样，我通过删除上面链接中的 9 来打破 if 语句。刷新页面时，它现在显示标题块，上面有这个

```
<!--[if lt IE ]> <![endif]--> 
```

如果我让 if 语句查找 IE 而不是它不渲染的特定版本，如果我指定它不渲染的版本，如果我删除 if 语句并只在它不渲染的头部调用 html5shiv.js 文件。只有当我打破 if 语句时才会呈现它？抱歉，如果这是一个愚蠢的问题，这是我第一次尝试 HTML5，我错过了什么？

编辑：

所以是的，你可以去看看它的[网站](http://mpowered.site44.com)。对不起，伊恩我 stackoverflow 评论呈现 http:// 所以它就在那里它只是没有在评论中显示它。

我努力了

```
 <!--[if IE ]> <![endif]-->  //all versions of IE
 <!--[if lt IE 9]> <![endif]-->  //all versions of IE before 9
 <!--[if lte IE 9 ]> <![endif]--> // version 9 of IE 
```

没有一个工作..我所有的HTML都非常严格..在它遵守之前这就是它的样子

```
<header>
  {% include "shared/nav" %}
</header> 
```

我在上面提到的导航看起来像这样

```
<nav id="navigation">
  <div id="nav_div_home" class="nav_buttons"><a id="nav_home" class="left_nav" href="/">Home</a></div>
  <div id="nav_div_system" class="nav_buttons"><a id="nav_system" class="left_nav" href="/systems/">Systems</a></div>
  <div id="nav_div_studies" class="nav_buttons"><a id="nav_studies" class="left_nav" href="/studies/">Studies</a></div>
  <img id="nav_logo" src="/images/logo3.png" alt="Mpowered logo">
  <div id="nav_div_approach" class="nav_buttons"><a id="nav_approach" class="right_nav" href="/approach/">Approach</a></div>
  <div id="nav_div_about" class="nav_buttons"><a id="nav_about" class="right_nav" href="/about/">About</a></div>
  <div id="nav_div_contact" class="nav_buttons"><a id="nav_contact" class="right_nav" href="/contact/">Contact</a></div>
</nav> 
```

然后我在#navigation 标签上运行的唯一 CSS 是

```
#navigation {
 height: 150px;
 padding-top: 60px;
 margin: 0px auto;
 width: 960px;

} 
```

但我看不出这会如何破坏标题标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:39:04.190

除了我上面的评论，你不需要 IE9 的 html5shiv，我相信你知道。

其他地方可能存在一些 HTML 问题，因为 IE 不会像其他浏览器那样尝试为您解决问题。

`<!--[if lt IE ]> <![endif]-->`不起作用的原因是您需要删除 lt 以便它简单地读取`<!--[if IE]> <![endif]-->`

根据您上面关于 JS 文件的回复，我会尝试：

```
<!--[if lte IE 9]><script src="js/html5shiv.js"></script> <![endif]--> 
```

和

```
<!--[if IE]><script src="html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]--> 
```

是错的。您需要`http://`在`html5shiv`.

有问题的网站的链接将是理想的。

**更新** 我现在知道出了什么问题，您缺少文档类型！添加：

```
<!doctype html> 
```

到文件的顶部，它会没事的。

如果没有指定 doctype，IE 总是使用 Quirks 模式（这是你永远不想要的！）

您还有多个`<head>`错误的元素。一切都需要包含在一个`<html>`元素中。

实际上标记有很多问题，你甚至没有`<body>`元素！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-22T08:39:02.000

事实上，简单地创建元素而不将其添加到 DOM 将允许 IE（甚至 6）识别它。所以

```
<script type="text/javascript">
   document.createElement("'header'");
   document.createElement("'nav'");
   document.createElement("'article'");
   document.createElement("'section'");
   document.createElement("'footer'");
 </script> 
```

将解决您的问题。你可以把它减少到

```
'article aside footer header nav section time'.replace(/\w+/g,function(n){document.createElement(n)}) 
```

在这里找到：[http ://www.hagenburger.net/BLOG/Simple-HTML5-Fix-for-IE.html](http://www.hagenburger.net/BLOG/Simple-HTML5-Fix-for-IE.html)

# iphone - 如何阻止 UIWebView 立即加载 URL？

> ID：14891544
> 
> 赞同：1
> 
> 时间：2013-02-15T09:25:31.413
> 
> 标签：iphone, objective-c, uiwebview

我想停止 UIWebView 的网页加载，同时将另一个 URL 传递给加载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T09:32:28.733

你应该实现：

```
- (BOOL)webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType 
```

协议的方法`UIWebViewDelegate`并返回`NO`您不想加载的所有 url。

例子：

```
- (BOOL)webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
    if ([[inRequest URL] isEqual:someMyUrl]) {
        return YES;
    }
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:31:05.797

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"about:blank"]]]; 
```

# apache - 如何检测文件的 MIME 类型并使用 Apache 相应地提供它？

> ID：14891547
> 
> 赞同：1
> 
> 时间：2013-02-15T09:25:34.180
> 
> 标签：apache, mod-rewrite, apache2

用户可以将图像上传到我的站点并为其命名（通常没有 .png 或 .jpg 扩展名）。当图像由 IMG 标记提供时，此方法有效。显然不需要 MIME 类型。浏览器可以处理它，因为它们*知道*它必须是图像。但是，当直接查看图像时，Apache 将图像作为`text/plain`.

现在，我可以使用 mod_rewrite 来提供适当的 MIME 类型，但是如何编写规则来确定文件的 MIME 类型呢？

```
RewriteEngine on
RewriteCond something something involving grep, file, or whatever?
RewriteRule ^.* - [last,type=image/png] 
```

我当前的解决方案偶尔会提供错误的 MIME 类型（显然没有造成伤害）：

```
RewriteEngine on

# do nothing with .png, .jpg, .svgz, etc files                              
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .*\.....? - [last]

# add an image MIME type in order to force something other than text/plain  
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [last,type=image/png] 
```

# c# - .NET 控制台应用程序到 Web 服务

> ID：14891557
> 
> 赞同：1
> 
> 时间：2013-02-15T09:26:08.317
> 
> 标签：c#, .net, visual-studio-2010, web-services

我在 VS2010 中有一个使用第三方 ActiveX dll 的控制台应用程序。一切正常。但我想实现与 Web 服务相同的代码。

我尝试创建 WCF 服务，然后将所有代码复制到新项目中。但是在调用 dll 上的任何函数时出现错误。虽然我在 x86 平台下运行它，但它给了我“错误格式异常”。

有什么方法可以直接将控制台应用程序作为服务托管？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:08:15.780

您想要的称为“自托管”。来自“[基本的 Windows 通信基础概念](http://msdn.microsoft.com/en-us/library/ms731079.aspx)”：

> **自托管服务**
> 在开发人员创建的流程应用程序中运行的服务。开发人员控制其生命周期、设置服务的属性、打开服务（将其设置为侦听模式）并关闭服务。

# java - 如何在 Jsp 中使用会话 Bean？

> ID：14891564
> 
> 赞同：0
> 
> 时间：2013-02-15T09:26:27.237
> 
> 标签：java, jsp, javabeans

我是 JSP 的新手，我有一个问题。请回答我。

我的项目中有bean，bean的名称称为userBean，属性称为login为布尔值。

在我的 jsp 页面中，我的代码应该如下所示，

```
'<% if (login == true) { %>

'<% } else { %>

'<% } %> 
```

如何使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:34:35.720

例子：

假设这是你的 bean：

```
public class UserBean implements
{
   private String firstName = null;

   public UserBean() {
   }
   public String getFirstName(){
      return firstName;
   }       
   public void setFirstName(String firstName){
      this.firstName = firstName;
   }       
} 
```

您可以在 JSP 文件中访问它，例如：

```
<jsp:useBean id="UserBean" class="UserBean"> 

   <jsp:setProperty name="UserBean" property="firstName" value="Zara"/>

</jsp:useBean> 
```

# zend-framework2 - 在 skelton 应用程序中的 zend 框架中出现错误

> ID：14891570
> 
> 赞同：2
> 
> 时间：2013-02-15T09:26:46.307
> 
> 标签：zend-framework2

我正在使用 Zend Framework 2。我下载了 skelton 应用程序。并配置了apache。但我正在关注 ERRor ::

```
Fatal error: Declaration of Zend\Stdlib\ArrayObject::offsetGet() must be compatible with that of ArrayAccess::offsetGet() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T00:35:22.870

原因是 Zend\Stdlib\ArrayObject 目前正在使用 php 5.3.5 的功能，为 php 5.3.3 修复它这样做

把下面几行

```
$libDir = getenv('ZF2_PATH');
require $libDir . '/Zend/Stdlib/compatibility/autoload.php';
require $libDir . '/Zend/Session/compatibility/autoload.php'; 
```

在包含'init_autoloader.php'之后；index.php 文件中的行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T11:08:48.070

您的 PHP 版本和 Zend Framework 版本不兼容。我了解到 PHP 5.3.3 仅适用于 Zend 框架，最高版本为 2.2。

Zdenek 提到的修复无助于让更新的 Zend 框架（2.3 或 2.4）与 PHP 5.3.3 一起工作

# python - 使用递归的 Python 打印输出

> ID：14891578
> 
> 赞同：1
> 
> 时间：2013-02-15T09:27:10.450
> 
> 标签：python, recursion

我在下面的递归代码方面需要帮助。该代码假设为每个 n 打印出一个 * 后跟一个 i。我意识到我的基本情况可能不正确，这可能是输出中字符串引号的原因，但是当我尝试将基本情况设置为返回 0 或 n 时，我收到错误消息，指出我无法将整数转换为字符串隐式。

```
def printPattern(n):  

    if n == 0:
        return('')
    else:
        return('*' + printPattern(n-1) + 'i') 
```

我的输出：

```
>>> printPattern(3)  
'***iii' 
```

我需要的输出（没有字符串引号）：

```
>>> printPattern(3)  
***iii 
```

有任何想法吗？我在这里使用错误的逻辑吗？我应该使用我的代码采用不同的路径还是无论如何我可以格式化输出以删除字符串引号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:30:01.010

您可能看到引号只是因为交互式 shell 向您显示了一个`str`类型的东西。尝试

```
>>> print printPattern(3) 
```

它实际上将*打印*模式，而不仅仅是返回它（或者，在 python 3 中，`print(printPattern(3))`用作函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:31:31.870

您的函数正在构建一个字符串并返回它。当在交互式 shell 中运行并调用函数时，Python 将打印`repr`元素的表示 ( )。对于字符串，`repr`包括引号。

你只需要`print`结果。

相反，如果您希望您的函数进行打印，则必须对其进行修改。最简单的方法是使用内部私有函数来构建字符串，并在最后使用 print 语句。

```
def printPattern(n):
    def buildPattern(n):
        if n == 0:
            return('')
        else:
            return('*' + buildPattern(n-1) + 'i')
    print(buildPattern(n)) 
```

顺便说一句，您可能不想对该函数使用递归，因为 Python 不优化递归调用，并且递归限制非常低（调用堆栈默认限制为一千左右的高度）。

# php - 将表 1 数据添加到表 2 下拉列表

> ID：14891581
> 
> 赞同：0
> 
> 时间：2013-02-15T09:27:16.927
> 
> 标签：php, mysql, cakephp-2.2

**背景**

我正在编写一个应用程序，我需要在其中提取所有员工（表 1）并将它们添加到下拉列表中。然后将employee_id 保存在supervisors 表中（表2）。

**是）我有的**

我有两张桌子：

```
,------------,-----------,------------,--------------,
| Table_1_id | Name      | Surname    | Table_2_id   |
'------------'-----------'------------'--------------'

,------------,------------,
| Table_2_id | Table_1_id |
'------------'------------' 
```

**我试过什么**

我尝试了以下方法：

```
$hrEmployees = $this->HrEmployee->find('list',
    array(
        'fields' => array("id","fullname"),
        'order' => array('HrEmployee.name ASC','HrEmployee.surname ASC')
    )
);
$this->set(compact('hrEmployees')); 
```

这是在我的表 1 控制器中的编辑/添加功能下。

**问题**

我不知道该怎么做。我认为使用虚拟字段并将其传递给视图然后会用名称填充下拉列表，但显然我错了。如果我必须重新设计数据库结构，我会的，但我只需要它来工作！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:06:54.227

您不需要 table2_Id 在您的员工表中。您可以从员工数组中获取员工数组并将其传递给模板。当用户从下拉列表中选择员工时，您需要运行另一个查询以将所选员工 ID 插入到主管表中。

# java - 找不到符号错误，java似乎认为对象/方法不存在

> ID：14891582
> 
> 赞同：0
> 
> 时间：2013-02-15T09:27:36.510
> 
> 标签：java, object, methods, symbols

```
class Person{
private String navn;    //a Person class, "navn" means "name" in norwegian

Person(String s){
    navn = s;
    }

public String hentNavn(){ //returns the name of the person
    return navn;
    }
}

class PersonBeholder<Person>{   //a container using an own implementation of
    private Lelem forste;      //a linked list
    private int ant = 0;   //number of persons currently in the list

    private class Lelem{
        Lelem neste;
        Person personen;

        Lelem(Person p){
            personen = p;

            }

         public Person hentPerson(){ //returns the Person object
            return personen; //being pointed to
            }
        }

    public void settInnPerson(Person denne){  //this is the method for
        Lelem lel = new Lelem(denne);     //appending a Person to the list
        lel.neste = forste;
        forste = lel;
        **System.out.println(forste.hentPerson().hentNavn());**
                    /*this is where it goes wrong*/
        ant++;

    }
}
class TestPersoner2{
    public static void main (String [ ] args){
    PersonBeholder<Person> pl = new PersonBeholder<Person>();
    Person Emil = new Person("Emil");
    Person Nils = new Person("Nils");
    pl.settInnPerson(Emil);
    pl.settInnPerson(Nils);
    }
} 
```

# 输出

```
TestPersoner2.java:35: error: cannot find symbol
                       System.out.println(forste.hentPerson().hentNavn());
                                                             ^
 symbol:   method hentNavn()
 location: class Object
 1 error 
```

试图让 java 打印存储在容器中的人的姓名，该容器具有自己的链表数据结构实现。

我创建了一个自己的列表元素类，用于为每个元素创建指向列表中下一个元素的对象。Lelem（列表元素）类包含一个返回 Person 对象的方法，而 Person 类包含一个返回字符串“navn”的方法，该字符串是人名。

Java 似乎认为这个 hentNavn() 方法不存在，我不明白为什么。有人可以告诉我这只是一个愚蠢的错字吗？

乙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:32:48.480

问题是您创建了`PersonBeholder`一个泛型类，其*类型参数*为`Person`. 我怀疑您打算使用作为类型*参数来执行诸如**实现*通用接口之类的事情。`Person`

 *因此，在 中`PersonBeholder`，名称`Person`并不指代您的`Person`类 - 它指的是类型参数，编译器对此一无所知。

只需更改此：

```
class PersonBeholder<Person>{ 
```

至

```
class PersonBeholder { 
```

并从此更改您的实例化：

```
PersonBeholder<Person> pl = new PersonBeholder<Person>(); 
```

至：

```
PersonBeholder pl = new PersonBeholder(); 
```

一切都会好起来的。

如果您*真的*希望您的`PersonBeholder`类是通用的，请给它一个不同的类型参数名称。我怀疑你没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:31:22.557

您的通用参数`Person`隐藏了类名`Person`。更改通用参数名称。附带说明一下，这些是 IDE 将帮助快速查找和修复的错误类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:32:55.303

报错行`Person`表示泛型类的类型参数`PersonBeholder<Person>`，即未知类型，不是`Person`上面定义的特定类。您可以通过重命名泛型参数或重命名 class 来解决此问题`Person`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:35:20.477

您对[泛型](http://docs.oracle.com/javase/tutorial/java/generics/)的使用不正确。

无论如何，只需`Person`从`PersonBeholder`.

```
class PersonBeholder {   //a container using an own implementation of
    private Lelem forste;      //a linked list
    private int ant = 0;

    private class Lelem{
        Lelem neste;
        Person personen;

        Lelem(Person p){
            personen = p;

        }

        public Person hentPerson(){
            return personen;
        }
    }

    public void settInnPerson(Person denne){
        Lelem lel = new Lelem(denne);
        lel.neste = forste;
        forste = lel;
        System.out.println(forste.hentPerson().hentNavn());
        ant++;

    }
} 
```*

# c# - 使用 linq 检查树的长度

> ID：14891590
> 
> 赞同：5
> 
> 时间：2013-02-15T09:27:58.627
> 
> 标签：c#, linq, tree

嗨，可以说我有以下类型的树

```
public class Element
{
    public List<Element> element;
} 
```

可以说树的根是

```
Element root = GetTree(); 
```

我知道可以使用递归检查这棵树的长度，但是这可以使用 linq 检查这棵树的长度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:34:46.467

您可以编写一个扩展方法来递归检索所有元素。

```
var allElements = root.element.Traverse(el => el.element); 
```

例如：

```
public static IEnumerable<T> Traverse<T>(this IEnumerable<T> source, Func<T, IEnumerable<T>> fnRecurse)
{
    foreach (T item in source)
    {
        yield return item;

        IEnumerable<T> seqRecurse = fnRecurse(item);
        if (seqRecurse != null)
        {
            foreach (T itemRecurse in Traverse(seqRecurse, fnRecurse))
            {
                yield return itemRecurse;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:42:03.377

添加新的扩展方法；

```
 public static int CountX(this Element e)
    {
        int temp = 0;
        if (e.element != null)
        {
            temp = e.element.Count;
            e.element.ForEach(q => temp += q.CountX());
        }
        return temp;
    } 
```

并称之为;

```
int depthCount= a.CountX(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:46:49.503

据我所知，您不能使用递归 Linq，因为开箱即用的递归 lambda 是不可能的。

我能给出的最原始答案是基于基于可重用 Fixpoint 运算符的递归 lambda 表达式。你会发现大部分的 Linq 机制。但是恐怕fixpoint部分是没有纯Linq答案的原因。

```
public static class FixPoint
{
    // Reusable fixpoint operator
    public static Func<T, TResult> Fix<T, TResult>(Func<Func<T, TResult>, Func<T, TResult>> f)
    {
        return t => f(Fix<T, TResult>(f))(t);
    }
}

public class Element
{
    public List<Element> element;

    public int CalculateMaxDepth()
    {
        return FixPoint.Fix<List<Element>, int>(
            // recursive lambda
            f =>
            listElement => listElement == null || listElement.Count == 0 
                ? 0 
                : 1 + listElement.Select(e => f(e.element)).Max())
            (this.element);
    }

    [Test]
    public  void myTest()
    {
        var elt = new Element() { element = new List<Element> { new Element() { element = new List<Element> { new Element() { element = new List<Element> { new Element() } } } } } };
        Assert.AreEqual(3, elt.CalculateMaxDepth());
    }
} 
```

# android - Nexus 10 摄像头响应缓慢

> ID：14891591
> 
> 赞同：2
> 
> 时间：2013-02-15T09:27:59.840
> 
> 标签：android, actionscript-3, camera, nexus-10

我的 Air android 应用程序会简单检查相机是否存在，检查“Camera.names”的长度。它在大多数设备上都能正常工作，但 Nexus 10 需要 7-10 秒才能响应。然后，当我连接相机时，我会得到一个黑色的全屏。然后可以看到相机供稿。我已经通过 Flash Air for Android 界面在应用程序描述符文件中设置了相机权限。我正在使用 Air 3.5。我也尝试过使用 stageVideo 并得到同样的问题。需要很长时间才能从相机界面获得响应。

下面是我的代码：

```
if (Camera.names.length > 0)
{
    var cam:Camera = Camera.getCamera();
    var vid:Video = new Video;
    vid.attachCamera(camera);
    addChildAt(vid, 0);
} 
```

# java - 使用休眠导出 DML

> ID：14891593
> 
> 赞同：2
> 
> 时间：2013-02-15T09:28:06.277
> 
> 标签：java, hibernate, dml

我需要导出特定对象及其对 DML 的引用，然后另一个应用程序将使用 DML 获取文件并导入它。数据库模式当然是相同的。

是否有一些工具可以做到这一点，或者我必须使用带有选项的 mysql 转储？

我感谢所有的建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:26:13.657

您可以使用 Liquibase for DB Change 从一个数据库迁移到具有相同架构的另一个数据库。

它是维护数据库更改的非常棒的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T19:10:57.913

I know this doesn't directly answer you question, but given the fact that I don't think there is a reliable solution using your desired approach I'll post here.

Have you tried using MySql replication instead to allow the databases to synchronize themselves without having to worry about it at the application layer.

[http://dev.mysql.com/doc/refman/5.0/en/replication.html](http://dev.mysql.com/doc/refman/5.0/en/replication.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T20:04:33.053

请参阅[SchemaExport.execute](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/tool/hbm2ddl/SchemaExport.html#execute%28boolean,%20boolean,%20boolean,%20boolean%29)方法。设置输出文件并为除“justCreate”和“justDrop”之外的所有值传递“false”（假设您也对放置脚本感兴趣）。但是，这将为所有实体生成模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T21:43:33.450

你可以看看这个工具，看看它是否满足你的需求:) [http://www.ssmstoolspack.com/](http://www.ssmstoolspack.com/)

# php - 使用 PHP 将价格舍入到 10 美分

> ID：14891598
> 
> 赞同：0
> 
> 时间：2013-02-15T09:28:37.773
> 
> 标签：php, magento

我有以下代码将 Magento 产品四舍五入到最接近的 $x.90、$x.80、$x.85 等，但输入是手动的。我需要一个新功能，只需按一下按钮，即可将价格带到最接近的 10 美分。所以如果价格是 11.87 美元，我需要它是 11.90 美元，如果价格是 11.63 美元，我需要它是 11.60 美元。

我该怎么做呢？

```
protected function _round($price, $roundTo = 0.00, $type = 'normal')
{
    $roundTo = ltrim(number_format($roundTo, 2, '.', ''), '0');

    if ($type === 'normal') {
        return round($price);
    }

    $safety = 99999999;

    if ($type === 'up' || ($type === 'down' && $roundTo < $price)) {
        while(substr($price, -(strlen($roundTo))) != $roundTo) {

            if ($type === 'up') {
                $price += .01;
            }
            else {
                $price -= .01;
            }

            $price = number_format($price, 2, '.', '');

            if (--$safety < 1) {
                throw new Exception('Error');
            }
        }

        return $price;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:45:22.377

这个小功能会起作用。

```
function roundPrice($price){
    $rounded = round($price, 1);
    return number_format($rounded, 2);
}

$newprice = roundPrice($InputYourValueHere);

// Output the value for the purposes of the example
echo $newprice; 
```

# html - 在 HTML5 中使用 JavaScript 设置表单的 enctype 失败。只读？

> ID：14891605
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:28:53.607
> 
> 标签：html, file-upload, yui

我们已经更新了一个客户网站，其中有一个工作用户的文件上传，它是用 YAHOO 实现的！连接器。

当我们更改前端时，我们切换到 HTML5。现在上传不再起作用了。

我检查并发现表单没有`multipart/form-data`设置正确的enctype（），所以帖子中没有上传文件，只是文件名。

但它在以前的版本中有效。

我检查了雅虎的代码！连接器（connector-debug.js）并发现它试图将表单的enctype设置为适当的值`multipart/form-data`，但没有上传文件（我在Firefox的'Net'寄存器中检查了它）。

我的问题：
**HTML5 不再允许设置表单的 enctype 了吗？**

## 编辑

没有人试图回答我的问题。它是用**粗体字写的**

* * *

[http://developer.yahoo.com/yui/docs/connection.js.html](http://developer.yahoo.com/yui/docs/connection.js.html)

```
uploadEncoding = 'multipart/form-data'  
// ...  
this._formNode.setAttribute('enctype', uploadEncoding); // Line: 1181 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:18:49.287

我不确定您是如何实施的，但就`Yahoo API`我们必须检查用户代理而言。

```
if(YAHOO.env.ua.ie){
    // IE does not respect property enctype for HTML forms.
    // Instead it uses the property - "encoding".
    this._formNode.setAttribute('encoding', uploadEncoding);
} else {
    this._formNode.setAttribute('enctype', uploadEncoding);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:50:02.027

试试这个：

```
this._formNode.setAttribute("enctype", "multipart/form-data"); 
```

希望这可以帮助...

# python - 将函数集成到第一个变量以外的变量上，寻找 lambda 的替代方法

> ID：14891607
> 
> 赞同：2
> 
> 时间：2013-02-15T09:28:56.540
> 
> 标签：python, lambda, quad

除了使用 lambda 函数将 python 2.7 中的函数集成到两个变量中的第二个之外，还有其他方法吗？例如，我想在 x 上集成这个示例函数：

```
import numpy as np
from scipy.integrate import quad

def sqrfn(a,x):
    return a*np.square(x) 
```

这很容易通过以下方式实现：

```
quad(lambda x: sqrfn(2,x),0,10) 
```

我想知道是否有另一种方法可以做到这一点，例如使用类似的东西，我认为这更直观：

```
quad(sqrfn,0,10,args(a=2)) 
```

有人有替代解决方案吗？（是的，我可以将函数定义为`sqrfn(x,a)`并`quad(sqrfn,0,10,args(2,))`改为使用，但这不是重点）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:46:44.450

你可以用[`functools.partial()`](http://docs.python.org/2/library/functools.html#functools.partial)这个：

```
In [10]: f = functools.partial(sqrfn, 2) 
```

这`f(x)`相当于`sqrfn(2, x)`：

```
In [11]: map(f, range(5))
Out[11]: [0, 2, 8, 18, 32] 
```

您的示例将变为：

```
quad(functools.partial(sqrfn, 2), 0, 10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:48:31.593

```
import functools
quad(functools.partial(sqrfn, 2), 0, 10) 
```

# cuda - 检测指针是否指向 CUDA 中的设备或主机

> ID：14891610
> 
> 赞同：10
> 
> 时间：2013-02-15T09:29:01.020
> 
> 标签：cuda

在 CUDA 中有任何方法可以知道指针是指向设备还是主机上的内存。

一个这样的操作示例可能是：

```
int *dev_c, *host_c;
cudaMalloc( (void**)&dev_c, sizeof(int) );
host_c = (int*) malloc(sizeof(int)); 
```

我当然可以查看名称，但是有没有办法查看指针 dev_c 和 host_c 并说，host_c 指向主机，dev_c 指向设备。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-16T07:59:26.720

开始（我认为）CUDA 4 和 Fermi GPU。Nvidia 支持[UVA（统一虚拟地址空间）](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#unified-virtual-address-space)。函数[cudaPointerGetAttributes](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__UNIFIED_1gab5cad40942fd554556035741d3fe5a2)似乎完全符合您的要求。请注意，我相信它仅适用于使用 cudaHostAlloc（而不是 c malloc）分配的主机指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-15T08:01:05.733

这是一个小例子，展示了如何使用[统一虚拟寻址](http://docs.nvidia.com/cuda/cuda-runtime-api/group__CUDART__UNIFIED.html#group__CUDART__UNIFIED)来检测指针是否指向主机或设备内存空间。正如@PrzemyslawZych 所指出的，它仅适用于使用`cudaMallocHost`.

```
#include<stdio.h>

#include<cuda.h>   
#include<cuda_runtime.h>

#include<assert.h>
#include<conio.h>

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        getch();
        if (abort) { exit(code); getch(); }
    }
}

int main() {

    int* d_data;
    int* data; // = (int*)malloc(16*sizeof(int));
    cudaMallocHost((void **)&data,16*sizeof(int));

    gpuErrchk(cudaMalloc((void**)&d_data,16*sizeof(int)));

    cudaDeviceProp prop;
    gpuErrchk(cudaGetDeviceProperties(&prop,0));

    printf("Unified Virtual Addressing %i\n",prop.unifiedAddressing);

    cudaPointerAttributes attributes;
    gpuErrchk(cudaPointerGetAttributes (&attributes,d_data));
    printf("Memory type for d_data %i\n",attributes.memoryType);
    gpuErrchk(cudaPointerGetAttributes (&attributes,data));
    printf("Memory type for data %i\n",attributes.memoryType);

    getch();

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T11:35:43.907

不是直接的。一种方法是为设备指针编写一个封装类，以便绝对清楚设备和主机指针在您的代码中是不同的。[你可以在Thrust](http://thrust.github.com/)模板库中看到这个想法的模型，它有一个类型被调用`device_ptr`来清楚地描述设备和主机指针类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:55:48.223

我不认为这是可能的。指针指向内存中的某个地址，如果这是主机或设备内存，您现在不指向。当程序启动时，它可以（几乎）放入操作系统内存中的每个地址，因此您无法猜测。您应该注意变量名称。

# list - 在联系人列表中添加复选框以创建“邀请列表”

> ID：14891611
> 
> 赞同：1
> 
> 时间：2013-02-15T09:29:02.150
> 
> 标签：list, checkbox, contact

我只是一个 android 编程的菜鸟，所以请不要咬我！

我一直在使用一个应用程序，您可以从手机中获取联系人列表，然后使用复选框选择其中 N 个。稍后我想使用我选择的联系人邀请他们参加聚会。正如我所说，我是新来的，但这是我到目前为止所拥有的：

主.java：

```
package com.example.choosephoneactivity;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

    public class main extends Activity implements OnClickListener {
        private static final int REQUEST_CHOOSE_PHONE = 1;
        private TextView vPhone;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            vPhone = (TextView) findViewById(R.id.TextView01);
            findViewById(R.id.Button01).setOnClickListener(this);
            vPhone.setText("");
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            if ((requestCode == REQUEST_CHOOSE_PHONE)
                    && (resultCode == Activity.RESULT_OK)) {
                try {
                    String phone = data.getStringExtra("phone");
                    vPhone.setText(phone);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }

        public void onClick(View v) {
            Intent intent = new Intent("org.francho.CHOOSE_PHONE");
            startActivityForResult(intent, REQUEST_CHOOSE_PHONE);
        }
    } 
```

List.java（从手机获取联系人列表的 java 文件）

```
package com.example.choosephoneactivity;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract.Data;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.view.View;
import android.widget.ListAdapter;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.CheckBox;
import android.widget.SimpleCursorAdapter;

public class list extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);
        setTitle("Choose a phone");

        // Query: contacts with phone shorted by name
        Cursor mCursor = getContentResolver().query(
                Data.CONTENT_URI,
                new String[] { Data._ID, Data.DISPLAY_NAME, Phone.NUMBER,
                        Phone.TYPE },
                Data.MIMETYPE + "='" + Phone.CONTENT_ITEM_TYPE + "' AND "
                        + Phone.NUMBER + " IS NOT NULL", null,
                Data.DISPLAY_NAME + " ASC");

        startManagingCursor(mCursor);

        // Setup the list
        ListAdapter adapter = new SimpleCursorAdapter(this, // context
                android.R.layout.simple_list_item_2, // Layout for the rows
                mCursor, // cursor
                new String[] { Data.DISPLAY_NAME, Phone.NUMBER }, // cursor
                                                                    // fields
                new int[] { android.R.id.text1, android.R.id.text2 } // view
                                                                        // fields
        );
        setListAdapter(adapter);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        Intent result = new Intent();

        // Get the data
        Cursor c = (Cursor) getListAdapter().getItem(position);
        int colIdx = c.getColumnIndex(Phone.NUMBER);
        String phone = c.getString(colIdx);

        // Save the phone to return it to the caller
        result.putExtra("phone", phone);
        setResult(Activity.RESULT_OK, result);

        // Close this activity (return to caller)
        finish();
    }
} 
```

主要的.XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:gravity="center_vertical|center_horizontal">

<TextView 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:text="@+id/TextView01" 
    android:id="@+id/TextView01">
    /</TextView>

<Button 
    android:id="@+id/Button01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Invitar a Convivencia">

</Button>

</LinearLayout> 
```

列表.XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"    />

<TextView
    android:id="@android:id/empty"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:text="no se han encontrado registros"  />

<CheckBox android:text=""
                android:id="@+id/checkBox"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="25sp"/>

<CheckBox android:text=""
                android:id="@+id/checkBox2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="25sp"/>

<CheckBox android:text=""
                android:id="@+id/checkBox3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="25sp"/>
</LinearLayout> 
```

我知道，这有点“混乱”，但我不知道该怎么做。

现在的代码是从电话中获取联系人，但我想在列出的每个联系人旁边放置一个复选框以选择它们，并添加到“邀请列表”或类似的东西。

非常感谢小伙伴们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T04:39:04.323

如何使用复选框创建自定义联系人列表以从 android 列表中选择多个联系人

```
public class AddFromContacts extends Activity {
ArrayList<String> listname;
// ArrayList<String> list_no;
Context context;
LayoutInflater inflater;
ListView contactlistView;
String name;

@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.show);

contactlistView = (ListView) findViewById(R.id.ContactlistView);

listname = new ArrayList<String>();
// list_no = new ArrayList<String>();

ContentResolver cr = getContentResolver();
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
        null, null, null);
if (cur.getCount() > 0) {
    while (cur.moveToNext()) {
        String id = cur.getString(cur
                .getColumnIndex(ContactsContract.Contacts._ID));

        String name = cur
                .getString(cur
                                    .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        if (Integer
                .parseInt(cur.getString(cur
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {

            Cursor pCur = cr.query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null,
                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = ?", new String[] { id }, null);
            while (pCur.moveToNext()) {
                // Do something with phones
                String phoneNo = pCur
                        .getString(pCur
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                listname.add(name + "\n" + phoneNo);

                // list_no.add(phoneNo);

            }
            pCur.close();
        }
    }

}
contactlistView.setAdapter(new Contact(this));
}

class Contact extends BaseAdapter {
Context myContext;

public Contact(AddFromContacts contactActivity) {
    // TODO Auto-generated constructor stub
    this.myContext = contactActivity;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return listname.size();
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    if (convertView == null) {

        inflater = (LayoutInflater) myContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        convertView = inflater.inflate(R.layout.checkbox, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.text_name = (TextView) convertView
                .findViewById(R.id.name);
        viewHolder.id = (TextView) convertView.findViewById(R.id.id);
        viewHolder.checkBox = (CheckBox) convertView
                .findViewById(R.id.checkBox);

        convertView.setTag(viewHolder);
    }

    final ViewHolder holder = (ViewHolder) convertView.getTag();
    // holder.text_name.setText(list_no.get(position));
    holder.id.setText(listname.get(position));

    if (holder != null) {
        holder.checkBox
                .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                    public void onCheckedChanged(
                            CompoundButton buttonView, boolean isChecked) {
                        // TODO Auto-generated method stub

                        // Toast.makeText(myContext, name + "     Selected",
                        // Toast.LENGTH_LONG).show();
                    }
                });
    }
    return convertView;
}
}

class ViewHolder {
TextView text_name, id;
CheckBox checkBox;
    // EditText search;
}
} 
```

但是在从列表中选择联系人时，我遇到了这个问题，它从列表中选择了我没有选择的那些联系人

# php - CakePHP 调试设置为 0，但仍处于调试状态

> ID：14891612
> 
> 赞同：0
> 
> 时间：2013-02-15T09:29:05.817
> 
> 标签：php, debugging, cakephp

我的蛋糕设置已将调试设置为 0，但它仍在调试到 app/tmp/logs/debug.log。为了确保没有伏都教发生，我什至打印出 Configure::read('debug') 并吐出 0。有谁知道为什么会发生这种情况？这是此调试日志的重复日志结果：

```
2013-02-15 01:25:41 Notice: Strict (2048): Non-static method App::_loadVendor() should not be called statically in [/var/www/website/htdocs/lib/Cake/Core/App.php, line 614]
Trace:
App::_loadVendor() - CORE/Cake/Core/App.php, line 614
App::import() - CORE/Cake/Core/App.php, line 614
include - APP/View/Helper/AdHelper.php, line 3
App::load() - CORE/Cake/Core/App.php, line 497
spl_autoload_call - [internal], line ??
class_exists - [internal], line ??
HelperCollection::load() - CORE/Cake/View/HelperCollection.php, line 75
View::loadHelpers() - CORE/Cake/View/View.php, line 577
View::render() - CORE/Cake/View/View.php, line 359
Controller::render() - CORE/Cake/Controller/Controller.php, line 898
Dispatcher::_invoke() - CORE/Cake/Routing/Dispatcher.php, line 114
Dispatcher::dispatch() - CORE/Cake/Routing/Dispatcher.php, line 89
[main] - APP/webroot/index.php, line 96 
```

我也在使用 PHP 5.4，并且正在运行 CakePHP 2.3。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:40:30.313

确保您完全（对于每个控制器和操作）关闭您的调试模式。`core.php`在你的蛋糕文件中试试这个代码。

```
Configure::write('Error', array(
    'handler' => 'ErrorHandler::handleError',
    'level' => 0,
    'trace' => false
)); 
```

有关更多详细信息，请查看[此处](http://book.cakephp.org/2.0/en/development/errors.html#error-configuration)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T12:56:38.457

如果将 debug 设置为 0，对 debug() 或 Debugger::log 的任何调用都将写入 debug.log（除非您覆盖了默认值）。而当 debug 大于 0 时，对 debug() 的调用将在浏览器中显示为 flash 消息（如果从 Model 或 Controller 调用，则在视图顶部；如果从 View 调用，则在视图顶部）。

您可以在 bootstrap.php 中定义进入哪个日志的错误类型：

```
App::uses('CakeLog', 'Log');
CakeLog::config('debug', array(
    'engine' => 'FileLog',
    'types' => array('info', 'debug', 'notice'),
    'file' => 'debug',
));
CakeLog::config('error', array(
    'engine' => 'FileLog',
    'types' => array('warning', 'error', 'critical', 'alert', 'emergency'),
    'file' => 'error',
)); 
```

默认情况下，Cake 将“notice”放在“debug”CakeLog::config 的类型数组中，这意味着通知进入 debug.log。将“通知”复制到“错误”配置的类型数组中，它应该将通知放在 error.log 中。

# jquery - 使用 jquery 保存会话 var 似乎不起作用

> ID：14891615
> 
> 赞同：3
> 
> 时间：2013-02-15T09:29:11.743
> 
> 标签：jquery, session

我无法存储会话...

我正在使用的代码：

```
//save to session
    $.session("compareLeftContent","value");
    alert($.session("compareLeftContent")); 
```

[http://jsfiddle.net/dWsKJ/](http://jsfiddle.net/dWsKJ/)玩。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T09:33:23.540

在您提供的 jsfiddle 示例中，没有附加会话插件。`$.session`不包含在 jQuery 中。您需要使用此插件才能拥有此功能：[Jquery Session Plugin](https://github.com/AlexChittock/JQuery-Session-Plugin)

然后使用`$.session.set`和`$.session.get`方法来存储和读取会话密钥。

例子：

```
$.session.set("compareLeftContent","value");
alert($.session.get("compareLeftContent")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T09:31:11.003

你在使用 session.js 吗？

您需要使用以下方式设置会话`$.session.set`：

```
$.session.set("compareLeftContent", "value"); 
```

要检索会话值，请使用`$.session.get`：

```
alert($.session.get("compareLeftContent")); 
```

# java - PrimeFaces SelectOneMenu ajax 渲染

> ID：14891621
> 
> 赞同：1
> 
> 时间：2013-02-15T09:29:24.713
> 
> 标签：java, jsf, primefaces

我的程序出了什么问题？我认为一切都很好。我的`changeKeyValue`方法获取选定的值 'REFERENCE' 并将`true`布尔值设置为`showReference`. `h:panelGroup`但是，如果我使用`update="targetPanel"`in ，我的页面将无法呈现`p:ajax`。它可以`h:panelGroup`在我使用`update="entryForm"`.

**我错过了什么？**

我的页面.xhtml

```
<h:form id="entryForm">
        <p:selectOneMenu value="#{MyBean.keyFactorValue}" required="true" style="width:257px;" id="keyFactorValue">
            <f:selectItems value="#{MyBean.selectItemList}" var="type" itemLabel="#{type.label}" itemValue="#{type}"/>  
            <p:ajax listener="#{MyBean.changeKeyValue}" update="targetPanel" event="change"/>
        </p:selectOneMenu>

        <h:panelGroup id="targetPanel" rendered="#{MyBean.showReference}">
            .......
        </h:panelGroup>

</h:form> 
```

KeyFactorValue.java

```
public enum KeyFactorValue {
    REFERENCE("Reference"), FORM_TO("From-To"), FIXED("Fixed");

    private String label;

    private KeyFactorValue(String label) {
        this.label = label;
    }

    public String getLabel() {
        return label;
    }
} 
```

MyBean.java

```
@Scope(ScopeType.CONVERSATION)
@Name("MyBean")
public class MyBean {
    private boolean showReference;

    public boolean isShowReference() {
        return showReference;
    }

    public KeyFactorValue[] getSelectItemList() {
        return KeyFactorValue.values();
    }

    public void changeKeyValue(AjaxBehaviorEvent e) {
        KeyFactorValue type = keyFactor.getKeyFactorValue();
        System.out.println("Selected KeyFactorValue : " + type);
        switch(type) {
            case REFERENCE :{
                showReference = true;
                break;
            }
            default :{
                showReference = false;
                break;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:45:37.850

您不能对不是由 JSF 呈现的 HTML 中的元素进行 ajax 更新。JavaScript（ajax 背后的代码）无法找到它`document.getElementById()`以替换其内容。

您只能对始终由 JSF 呈现的 HTML 中的元素进行 ajax 更新。将有条件渲染的组件包装在另一个始终渲染的组件中，并改为使用 ajax 更新它。

```
<h:panelGroup id="targetPanel">
    <h:panelGroup rendered="#{MyBean.showReference}">
        ...
    </h:panelGroup>
</h:panelGroup> 
```

### 也可以看看：

*   [当我想对它进行 ajax 更新时，为什么需要在另一个组件中嵌套一个带有 render="#{some}" 的组件？](https://stackoverflow.com/questions/9010734/why-do-i-need-to-nest-a-component-with-rendered-some-in-another-component-w/9010771#9010771)

# java - 在 Java 中使用 MVC 模式

> ID：14891624
> 
> 赞同：1
> 
> 时间：2013-02-15T09:29:30.943
> 
> 标签：java, model-view-controller, design-patterns

我刚刚开始在我的 Java 应用程序中使用 MVC 模式。我以前在 CodeIgniter 中使用过一点 MVC，但我想确保我能做对。

*   视图是向控制器发送输入的 GUI 文件。

*   然后控制器接收这些输入，并最终将它们发送到模型。

在我的 CodeIgniter 应用程序中，我使用的所有模型都是与数据库相关的东西。例如，如果我需要验证电子邮件，我应该在 Controller 中还是在 Model 中进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:52:10.610

在哪里进行验证是一个在 MVC 模式中仍有待讨论的问题。

一些琐碎的验证可以而且应该在视图上完成。示例：采用数值的文本输入小部件甚至不应该允许用户输入字母。它不必咨询控制器或模型来做到这一点。

有人说控制器的工作是确保它不会向模型提供垃圾，因为决定什么是有效的，什么是无效的是业务逻辑的一部分。

有人说模型的工作是确保其自身的一致性，因此它应该验证来自控制器的所有内容并拒绝任何垃圾数据。

**tl;博士：**这取决于。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:55:38.743

客户端验证必须合并到 View 中，而服务器端验证与您的场景有关，Controller 最适合这项工作。模型必须仅用于执行一些业务逻辑和数据库流程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:55:31.360

从 MVC 模型

*   View 负责在您的应用程序和外部之间充当接口/端点，通常它是某种 GUI
*   控制器代表调度部分，应该保持轻量级
*   模型处理您的业务逻辑，与数据库对话等。

关于您关于电子邮件验证的问题，您应该在两个地方进行，通过 javascript 在 View/GUI 中进行，以确保在用户输入错误电子邮件地址的情况下获得快速而漂亮的反馈，并避免您遭受无用的点击。但除此之外，您还必须在服务器端的某个地方进行操作。实际的逻辑将在模型层中，类似 isValidEmail(String emailAddress) 的方法返回一个布尔值，并在模型中的某处声明并从控制器调用。我在想一些类似的东西：

```
 public void myAction() {
       //we are in the controller
       if(!Manager.isValidEmail(emailAddressAsString)) {
          dispatchBadEmailView(); //dispatch to a bad email address view
       }
    } 
```

这是我的意见，如果你还没有，尝试使用 Spring MVC 或类似的东西，它有很大帮助，在这里阅读更多：[http ://www.mkyong.com/tutorials/spring-mvc-tutorials/](http://www.mkyong.com/tutorials/spring-mvc-tutorials/)

# javascript - 将 JS 数组传递回控制器问题

> ID：14891627
> 
> 赞同：0
> 
> 时间：2013-02-15T09:29:34.413
> 
> 标签：javascript, asp.net-mvc-3

我认为：

```
 <% using (Html.BeginForm("SaveRecommendedUserDetails", "Recommend", FormMethod.Post, new { enctype = "multipart/form-data" }))
    { %>
     <% foreach (var group in Model.Results)
        { %>       
          <div id="group-select<%: group.GroupId %>" style="width:auto; height:50px; border:solid 1px black; margin:5px;" >
             <h3>&nbsp; &nbsp; <a href="javascript:OnGroupClicked(<%: group.GroupId %>)" id="changer<%: group.GroupId %>"><%: group.Name %></a></h3> 
          </div>
     <% } %>
    { 
```

JS：

```
 <script type="text/javascript">   
 function OnGroupClicked(groupId) {
  var groupIds = new Array();
  $("#changer" + groupId).on("click", function (e) {
    e.preventDefault();
    var body = $('#group-select' + groupId),
        green = "rgb(0, 128, 0)",
        white = "rgb(255, 255, 255)";

    if (body.css("backgroundColor") !== green) {
      groupIds.push(groupId);
      body.css("backgroundColor", green);
    } else {
      groupIds.pop(groupId);
      body.css("backgroundColor", white);
    }
  });
}
</script> 
```

我的控制器：

```
 [HttpPost]
    public ActionResult SaveRecommendedUserDetails(RecommendedUserDataModel model)
    {
      var userId = ZincService.GetUserIdByEmail(model.Email);
      model.UserId = userId;
      ZincService.SaveRecommendedUserDetails(model);
      return RedirectToAction("Index");
    } 
```

推荐用户数据模型

```
public class RecommendedUserDataModel
{
  public int UserId { get; set; }
  public string Email { get; set; }
  public string Firstname { get; set; }
  public string Surname { get; set; }
  public string Department { get; set; }
  public string JobTitle { get; set; }

  public IEnumerable<DataModels.Group.GroupDataModel> Groups { get; set; }
 } 
```

我的问题是，如果它被“选中”，我需要将 groupId 返回到控制器，因此单击它。请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:08:15.703

您可以通过将逗号分隔的组 ID 临时保存到隐藏字段中来传递它。这样做的步骤：

1.  向您的模型添加一个字符串属性，例如“hdnGroupIds”
2.  将隐藏字段放入表单下的视图中。
3.  在 document.ready 和 OnGroup Clicked 方法上保存来自 jvascript 的 hdnGroupIds 中逗号分隔的 groupID。

在上述步骤之后，您可以在您的发布操作中将 commaseprated GroupIds 放入您的控制器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T06:10:39.250

第三步：

```
 <script type="text/javascript">   
  function OnGroupClicked(groupId) {
  var groupIds = new Array();
  $("#changer" + groupId).on("click", function (e) {
      //Here is Step#3
      $('#hdnGroupId').val(groupId+','+$('#hdnGroupId').val());

    });
  }
  </script> 
```

# asp.net - 启用分页时如何获取 Gridview 的所有行？

> ID：14891632
> 
> 赞同：5
> 
> 时间：2013-02-15T09:29:54.040
> 
> 标签：asp.net

启用分页时如何获取所有gridview的行？

它允许仅获取当前获取行而不是整个 gridview 行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-08-21T19:40:00.260

您可以使用我在我的项目中使用它的下面的命令。它的逻辑非常简单，您浏览所有页面，并且在每个页面中您浏览所有行。您还可以在执行此操作之前获取当前页面，然后在循环所有内容后返回该页面；）

```
//Get Current Page Index so You can get back here after commands
                int a = GridView1.PageIndex;
    //Loop through All Pages
                for (int i = 0; i < GridView1.PageCount; i++)
                {
    //Set Page Index
                    GridView1.SetPageIndex(i);
    //After Setting Page Index Loop through its Rows
                    foreach (GridViewRow row in GridView1.Rows)
                    {
                        //Do Your Commands Here
                    }
                }
    //Getting Back to the First State
                GridView1.SetPageIndex(a); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-15T09:36:43.003

我们暂时禁用分页并将重新绑定网格，以便现在我们可以访问数据源中的所有记录，而不仅仅是当前页面记录。

一旦 gridview 与所有记录绑定，您就可以遍历 gridview 行。

完成任务后，我们重新启用分页并重新绑定网格。

以下是解决您的病情的方法：

```
protected void Page_Load(object sender, EventArgs e)
{
    GridView2.AllowPaging = false;
    GridView2.DataBind(); 

    // You can select some checkboxex on gridview over here..

    GridView2.AllowPaging = true;
    GridView2.DataBind(); 
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-15T09:41:09.587

使用以下代码并使 GridView 分页禁用

GridView1.AllowPaging = false; GridView1.DataBind();

在页面加载或您想要显示所有 Gridview 行的**其他事件上**

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-15T09:49:04.813

在从网格获取数据的功能之前只写

```
yourGridName.AllowPaging=false; 
```

并在获得数据写入后

```
yourGridName.AllowPaging=true; 
```

如果你的函数是 GetDataFromGrid() 那么你应该像这样

```
protected void Page_Load(object sender, EventArgs e)
{
yourGridName.AllowPaging=false;
GetDataFromGrid() 
yourGridName.AllowPaging=true;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-15T09:41:11.870

启用分页后，您无法显示所有行。但是您可以`Allowpaging=false;`在页面加载或某些事件中进行代码隐藏。

```
protected void Page_Load(object sender, EventArgs e)
{
Gridviewname.AllowPaging=false;
} 
```

或者

```
Protected Void some event(object sender,Eventargs e)
{
Gridviewname.AllowPaging=false;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-15T09:38:50.710

更好的方法是在页面顶部（gridview 之外）放置一个隐藏字段，然后单击复选框，您应该将相关的 id 或逗号分隔格式的某个值放在隐藏字段中。在提交表单时，您可以使用逗号作为分隔符拆分隐藏字段值字符串，然后就可以了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-17T10:34:30.977

使用以下代码获取`e.CommandArgument`. 我一定会解决你的问题！

```
 protected void GridViewID_RowCommand(object sender, GridViewCommandEventArgs e)
  {
         if (e.CommandName == "GetDetail")
         {
            int index = Convert.ToInt32(e.CommandArgument) % GridViewID.PageSize; // !Important

            GridViewRow row = GridViewID.Rows[index];
         }
 } 
```

# angularjs - AngularJS：ng-show元素在不满足条件时可见

> ID：14891637
> 
> 赞同：1
> 
> 时间：2013-02-15T09:30:08.157
> 
> 标签：angularjs

HTML：

```
<div ng-app ng-controller="AppController">
    boxWidth: {{boxWidth}}
    <div ng-show="activeWindow1" style="border:1px solid black; width: {{boxWidth}}px; height:20px;">
    </div>
    <div ng-show="activeWindow2" style="border:1px solid red; width: {{boxWidth}}px; height:20px;">
    </div>
</div> 
```

JS：

```
function AppController($scope) {
    $scope.getWidth = function() {
        return $(window).width();
    };
    $scope.$watch($scope.getWidth, function(newValue, oldValue) {
        $scope.boxWidth = newValue / 10;
        $scope.activeWindow2 = true;
    });
    window.onresize = function(){
        $scope.$apply();
    }
} 
```

JSFiddle：http: [//jsfiddle.net/fQgXQ/20/](http://jsfiddle.net/fQgXQ/20/)

请注意，activeWindow1 永远不会设置为 true，所以从技术上讲，我们应该永远不会看到黑框，对吧？尝试调整窗口大小，导致 $scope.apply(); 打电话看看会发生什么。

结果：两个框都可见（最近的 Chrome 浏览器）。

有一个简单的解决方法，就是将 ng-show 放到一个新的 div 中，使当前的 div 成为它的孩子。但是，我想了解为什么会发生这种情况，因为它看起来确实像是一个 Angular 错误。我怀疑我只是在使用 style="" 中的 {{boxWidth}} 做一些我不应该做的事情。如果是这样，什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:04:51.463

问题是 style 属性（来自两个框）在每个之后都被重新计算`$apply`（因为 Angular 必须从 插入值`{{boxWidth}}`），这将自动删除由指令`display: none`设置的属性（负责隐藏元素） 。`ng-show`

为避免这种情况，请使用该`ng-style`指令，如下所示：

```
<div ng-show="activeWindow1" style="border:1px solid black; height:20px;" ng-style="{width: boxWidth}"> 
```

# domain-driven-design - 将有界上下文实现到基于实体框架的基础设施

> ID：14891640
> 
> 赞同：8
> 
> 时间：2013-02-15T09:30:33.010
> 
> 标签：domain-driven-design, repository-pattern, entity-framework-5, unit-of-work, bounded-contexts

我已经为我们全新的 Intranet 项目创建了一个基础架构，并尝试遵循几乎所有的最佳实践。我还想提一下，这是我第一次从零开始创建架构。

目前我的基础设施的第一个版本已经准备好并且运行良好。但我想在下一个版本中实现有界上下文结构。

我试图在下面解释当前的情况。

**DbCore：**负责数据操作。Entity Framework 5 代码首次使用。只有一个 DbContext 类和其中定义的所有 DbSet。GenericRepository 模式和 Unit of Work 模式也是基于以下接口实现的。

**IGenericRepository**

```
public interface IGenericRepository<TEntity>
     where TEntity : class {
        void Delete(object id);
        void Delete(TEntity entityToDelete);
        System.Collections.Generic.IEnumerable<TEntity> Get(System.Linq.Expressions.Expression<Func<TEntity, bool>> filter = null, Func<System.Linq.IQueryable<TEntity>, System.Linq.IOrderedQueryable<TEntity>> orderBy = null, string includeProperties = "");
        System.Collections.Generic.IEnumerable<TEntity> GetAll();
        TEntity GetByID(object id);
        System.Collections.Generic.IEnumerable<TEntity> GetWithRawSql(string query, params object[] parameters);
        void Insert(TEntity entity);
        void Update(TEntity entityToUpdate);
    } 
```

**工作单位**

```
 public interface IUnitOfWork {
        void Dispose();
        IGenericRepository<Test> TestRepository {
            get;
        }
        IGenericRepository<Log> LogRepository {
            get;
        }
        void Save();
    } 
```

**Models：**负责存储 DbCore 和 Entity Framework **Domain 的实体模型：**表示业务逻辑层还存储存储在 Models 项目中的实体对象的 DTO。**当前业务逻辑存储在实现以下接口IService**的 Service 类中

 **```
public interface IService<TEntity> {

        IEnumerable<TEntity> Get();
        TEntity GetByID(int id);
        void Insert(TEntity entity);
    } 
```

该服务类通过 ctor 参数获取 UnitOfWork 并用于操作。Automapper 还实现了将实体对象转换为 DTO，反之亦然。从现在开始，所有上层不再对实体模型感兴趣，只使用 DTO。所以几乎所有的项目（包括 api 和 web ）都引用了这个项目。

**Common：**负责存储常用的库，如日志记录。

**WebCore：**负责存储 API 或 MVC 等基于 Web 的项目的常用库。还包含基于 MVC 的项目的扩展、处理程序和过滤器。

**Api：** ASP.Net MVC Web API 项目代表服务层。使用域层并服务于客户端。控制器获取 IService 接口作为 ctor 参数，并使用它通过域层访问数据层。

**Web：**基于 ASP.Net MVC 4 的 Web 项目，负责与用户交互。使用 Api 方法来访问数据。所有控制器都有一个名为 IConsumeRepository 的接口，它通过 HttpClient 连接 API。

```
 public interface IConsumeRepository<TEntity> {
        Task<TEntity> Create(TEntity TestInfo);
        Task Delete(int id);       
        Task<IEnumerable<TEntity>> Get();
        Task<TEntity> Get(int id);
        TEntity New();       
        Task<TEntity> Update(TEntity TestInfo, int entityId);
    } 
```

Autofac 负责所有项目的 IoC 和 DI。

现在这是我当前的基础设施，我想我解释了需要评估的所有内容。

现在我试图弄清楚以下事情，

**问题1：**有什么不能像我使用的那样被执行吗？

**问题 2：**实现限界上下文的最佳方法是什么？我最近观看了 Julie Lerman 的视频并查看了许多示例项目。我看到从 DbContext 派生 BC 的常见事情。但我不能确定。因为我认为 BC 应该在域（业务逻辑）层而不是 DbCore（数据访问）层。

**问题 3：**正如我上面提到的，我的 Api 和 Web 项目使用 DTO，因此它们都需要引用域层。但我不喜欢它，因为我使用 API 将业务层与 UI 分开，并为实体再次耦合它们。但我找不到比这更好的方法了。

这是一个很长的问题，但如果您与我分享您的想法以创建更好的架构，我将非常高兴。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-15T14:21:51.020

**问题 1**：假设您有一个复杂的业务领域和重要的业务逻辑，值得付出努力，因为您必须将您的领域层与基础设施问题隔离开来。然而，情况往往并非如此。如果您主要只是将数据从数据库移动到 UI 并再次返回，那么这就是过度工程，您应该寻求移动部件更少的东西。

**问题 2：**您有多少不同的领域模型（使用不同的通用语言）？一？二？三？对于每个模型，尽可能将其与其他模型和基础设施问题隔离开来。

Eric Evans 将有界上下文定义为主要是*语言*边界（引自他的书中）：

> **有界上下文界定了特定模型的适用性，**以便团队成员对什么必须一致以及它与其他上下文的关系有清晰的共同理解。在该 CONTEXT 中，努力保持模型在逻辑上的统一，但不要担心超出这些界限的适用性。在其他 CONTEXTS 中，其他模型适用，但在术语、概念和规则以及无处不在的语言方言方面存在差异。

DBContext 可能会为您指明正确的方向，但请记住，它是*基础设施*工件，*而不是*域概念。它“代表了工作单元和存储库模式的组合，使您能够查询数据库并将更改组合在一起，然后将这些更改作为一个单元写回存储区。”_（来自[MSDN Docs](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext(v=vs.103).aspx)）。

DDD 是关于领域建模：使用模型来解决复杂业务领域中的困难业务问题。从技术考虑中推导出模型边界感觉就像在摇尾巴一样。从概念上定义模型的边界，然后相应地调整您的技术基础设施。

**问题 3：** DTO 可能是强制执行上下文边界的好方法，例如对于 API。然后，该 API 可以作为其他模型的反腐败层。人们通常将它们用于 UI 的原因是避免将 UI 概念引入领域模型。

不要寻求完美的架构。并意识到“最佳实践”实际上只是基于特定情况的指导方针。遵循其他更有经验的人制定的指导方针，并了解您的情况可能略有不同。当您发现摩擦时，使用您的期望重构您的设计决策。例如，如果稍后您发现 UI 的 DTO 太过分了，则将其删除。尽可能简化。**

# unix - 如何在比较两条相似的线时找到差异

> ID：14891643
> 
> 赞同：1
> 
> 时间：2013-02-15T09:30:36.943
> 
> 标签：unix, grep

我有一个日志文件，其中包含以下日志语句

例如

```
Before starting transaction id = <unique number>
After starting transaction id = <unique number>

....

Before starting transaction id = <unique number>
After starting transaction id = <unique number> 
```

当我为“之前”执行简单的 grep 时，我看到 400 条语句，但是当我为“之后”执行简单的 grep 时，我看到 402 条语句。

如何找到这些语句不成对出现的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:34:32.507

提取`Before`和`After`id，然后对它们进行比较，如下所示：

```
$ diff -wb <(grep Before file | cut -d= -f2 | sort) <(grep After file | cut -d= -f2 | sort) 
```

如果您的 shell 不支持[进程替换](http://tldp.org/LDP/abs/html/process-sub.html)ie `<(...)`，则使用临时文件：

```
$ grep Before file | cut -d= -f2 | sort > before
$ grep After file | cut -d= -f2 | sort > after
$ diff -wb before after 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:42:53.787

如果前后配对应该相同`unique number`：

```
awk -F= '{a[$2]++;}END{for(i in a)if(a[i]!=2)print "id:"i}' file 
```

将打印那些未配对的 id。

例如：

```
kent$  cat file
Before starting transaction id = 1
After starting transaction id = 1
Before starting transaction id = 2
After starting transaction id = 2
Before starting transaction id = 3
Before starting transaction id = 4
After starting transaction id = 4
After starting transaction id = 5

kent$  awk -F= '{a[$2]++;}END{for(i in a)if(a[i]!=2)print "id:"i}' file
id: 3
id: 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:45:55.397

`grep`也不是最好的工作，因为它不能读取多行。您可以使用 -B1 成对阅读它们，但您仍然需要使用更强大的工具（例如或其他工具`sed`）来解析它们。`awk`

这是另一种方法，以防万一您在行前遇到外来线（在`echo`那里只是为了让您可以空运行它）：

```
$ echo 'Before starting transaction id = 123
After starting transaction id = 123
After starting transaction id = 54675
Before starting transaction id = 567
After starting transaction id = 567' | 
  sort -k6 | uniq -u -f5 # end cmd
After starting transaction id = 54675 
```

它通过仅检查唯一 ID 来工作。由于我不知道你在那里获得什么样的内容，也许它们是现有条目的重复，在这种情况下你必须以不同的方式做。这是更安全的方法，它捕获这两种情况并返回 ID 频率大于或小于 2 的事件：

```
$ echo 'Before starting transaction id = 123
After starting transaction id = 123
After starting transaction id = 567
Before starting transaction id = 567
After starting transaction id = 567' | 
  sort -k6 | uniq -c -f5 | grep -v "^[[:space:]]*2[[:space:]]"
3 After starting transaction id = 567 
```

# javascript - JQuery在快速悬停动作上取消下拉列表/向下滑动列表

> ID：14891650
> 
> 赞同：0
> 
> 时间：2013-02-15T09:30:50.073
> 
> 标签：javascript, jquery, html, css, html-lists

当鼠标只停留在悬停区域时，有什么方法可以取消下拉列表？

当鼠标在 UL 上大约一秒钟时，我想下拉/向下滑动列表。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:38:20.067

您最好在单击而不是悬停时切换下拉菜单。[这就](http://uxmovement.com/navigation/why-hover-menus-do-users-more-harm-than-good/)解释了为什么。

如果您必须在悬停时执行此操作，您可以简单地设置一个计时器。

```
$('.myElement').hover(function() {
    var myElement = $(this);
    setTimeout(function() {
        if(myElement.is(':hover'))
        {
            // Do drop down here
        }
    }, 1000);
}) 
```

编辑：这可能不适用于 jQuery 1.8，另一种方法是使用一个类：

```
$('.toggleDropdown').hover(function() {
    $('ul', this).addClass('hover');
    setTimeout(function() {
        $('.hover').stop().slideDown(500);
    }, 1000);
}, function() {
    $('ul', this).removeClass('hover');
}) 
```

像这样：[JSFiddle](http://jsfiddle.net/h3m4t/)。

# python - 剪刀石头布

> ID：14891660
> 
> 赞同：3
> 
> 时间：2013-02-15T09:31:17.330
> 
> 标签：python

我对我的 comp sci 课程进行了测试，其中一个问题是制作一个剪刀石头布游戏，如果玩家 1 获胜，它将返回 -1，如果玩家 2 获胜，它将返回 1，如果是平局，它将返回0\. 我制作了我的程序并运行它并且它工作但根据我的教授他说它没有。

```
def rps(x,y):
    player1 = -1
    player2 = 1
    tie = 0
    'R'>'S'
    'P'>'R'
    'S'>'P'
    if x>y:
        return player1
    if x<y:
        return player2
    else:
        return tie 
```

我看不出有什么问题？如果你执行 rps('R','P') 那么它将返回 -1，因为 x = player1 并且因为 Rock 击败了 Paper。谁能帮我看看我的代码是否错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:55:34.080

您可以执行以下操作：

```
def rps(p1,p2):
    retval= {
        'R':{'R': 0, 'S':-1, 'P': 1},
        'S':{'R': 1, 'S': 0, 'P':-1},
        'P':{'R':-1, 'S': 1, 'P': 0}
    }
    return retval[p1][p2] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:39:43.497

您的代码中存在一些问题：

1\. 以下几行不做任何事情。您不能*将*字符设置`R`为大于字符`S`：

```
'R' > 'S'
'P' > 'R'
'S' > 'P' 
```

2.第1节的原因，你`if x>y:`没有做你认为它做的事情。它只是检查字母表中的内容`x`是否在内容之前。`y`（假设`x`和的内容`y`是字符）

* * *

您的代码很难修复，我建议您从一个非常不同的角度解决这个问题。

这是一个与您的完全不同的解决方案，但这个解决方案有效。它只是使用许多`if`检查来获得您的结果。

```
def rps(p1, p2):
    if p1 == p2:
        return 0
    elif (p1 == "R" and p2 == "S")\
    or (p1 == "S" and p2 == "P")\
    or (p1 == "P" and p2 == "R"):
        return -1
    else:
        return 1 
```

我替换`x, y`为，`p1, p2`因为它们更能代表玩家的选择，但如果你必须使用`x`and `y`，只需将它们改回来。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T10:49:49.323

您问：

> 谁能帮我看看我的代码是否错误？

是的，这是错误的。这就是为什么。

如果你跑步`rps('R','S')`，你应该得到`1`，因为摇滚胜过纸。同样`rps('R','P')`应该给出`-1`，因为纸能打败岩石。这两种方法都适用于您的代码。

但是，如果您运行，`rps('S','P')`您应该得到`1`，因为剪刀比纸好，但您没有 - 您的代码返回`-1`，这是错误的。

正如 eumiro 在评论中指出的那样，这三行

```
'R'>'S'
'P'>'R'
'S'>'P' 
```

我假设您认为正在定义要使用的顺序，实际上不做任何事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-30T00:22:36.337

```
def rps(x,y):
    return [0, -1, 1]['RPS'.index(x) - 'RPS'.index(y)] 
```

或者，如果您想要一个交互式程序：

```
from random import randint
['Tie', 'I win', 'You win'][randint(0, 2) - 'RPS'.index(raw_input("Enter R, P, or S: "))] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:35:40.647

```
def rps(x,y):
    d = {'R': 1, 'S': 2, 'P': 3}
    return ((d[x] - d[y]) + 1) % 3 - 1

for p1 in 'RPS':
    for p2 in 'RPS':
        print p1, p2, rps(p1, p2) 
```

印刷

```
R R 0
R P 1
R S -1
P R -1
P P 0
P S 1
S R 1
S P -1
S S 0 
```

# xml - 在 xsd 架构中作为 IDREF 的 GUID 属性

> ID：14891669
> 
> 赞同：2
> 
> 时间：2013-02-15T09:31:59.480
> 
> 标签：xml, reference, xsd, guid

我为我的 xml 元素使用全局唯一标识符 (GUID)，架构如下所示：

```
<xs:simpleType name="guidType">
  <xs:restriction base="xs:string">
    <xs:pattern value="[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]
                       {4}-[a-fA-F0-9]{12}"/>
  </xs:restriction>
</xs:simpleType> 
```

和这样的xml元素：

```
<point guid="5C815FB2-0731-4E88-9885-CFC49B8E7B92" id="ABC" x="12" y="51" z="0"/> 
```

对应的xsd架构：

```
<xs:complexType name="pointType">
  <xs:attribute name="guid" type="guidType" use="required"/>
  <xs:attribute name="id" type="xs:token" use="required"/>
  <xs:attribute name="x" type="xs:double" use="required"/>
  <xs:attribute name="y" type="xs:double" use="required"/>
  <xs:attribute name="z" type="xs:double" use="required"/>
</xs:complexType> 
```

我想在另一个元素中引用我的点元素，例如：

```
<layer>
  <pointref guidref="5C815FB2-0731-4E88-9885-CFC49B8E7B92"/>
  <pointref guidref="4671EFD4-506F-4A61-BCF0-427875074115"/>
</layer> 
```

我可以使用 ID 和 IDREF 类型更改我在模式文件中的点类型定义来实现它：

```
<xs:attribute name="guid" type="xs:ID" use="required"/> 
```

**问题：**

有没有办法让 xs:ID 类型也成为 GUID 类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T23:45:56.447

简短的回答是否定的。ID 是[NCNAME](http://www.w3.org/TR/1999/REC-xml-names-19990114/#NT-NCName)，因此第一个位置带有数字的值会破坏它。虽然它可能看起来有点复杂，但使用 xsd:unique/xsd:key/xsd:keyref 被许多人认为是在使用 XSD 时实现您想要的最佳方式。

以防万一您可能需要参考，您可以从[这里开始 SO](https://stackoverflow.com/questions/13300291/specify-xsd-such-that-an-xml-element-must-have-the-value-of-another-xml-element/13300993#13300993)。

# mysql - 如何在各种表中查找列名

> ID：14891670
> 
> 赞同：2
> 
> 时间：2013-02-15T09:32:01.000
> 
> 标签：mysql

我想在名称类似的所有表中搜索表、列`%keyword%.`如何在 MySQL 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:33:49.260

检查 information_schema 数据库上的各种表（即 TABLES 和 COLUMNS 表）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:35:35.633

你可以这样做：

```
SELECT COLUMN_NAME, DATA_TYPE, IS_NULLABLE, COLUMN_DEFAULT
FROM INFORMATION_SCHEMA.COLUMNS
WHERE table_name LIKE %keyword% 
```

[http://dev.mysql.com/doc/refman/5.0/en/columns-table.html](http://dev.mysql.com/doc/refman/5.0/en/columns-table.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:34:47.427

在 SQL 下运行：

```
SELECT DISTINCT TABLE_NAME 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE COLUMN_NAME LIKE '%KEYWORD_TO_SEARCH%' 
AND TABLE_SCHEMA='YOUR_DATABASE_NAME'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:37:17.837

运行这个。希望这会有所帮助

```
SELECT DISTINCT TABLE_NAME 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE COLUMN_NAME LIKE '%keyword%' 
AND TABLE_SCHEMA='your_db'; 
```

# javascript - HTML 中动态创建的按钮的行为取决于第一个创建的按钮

> ID：14891673
> 
> 赞同：0
> 
> 时间：2013-02-15T09:32:17.593
> 
> 标签：javascript, html, loops

我是使用 javascripts 的新手。我有一个条件，根据条件将值分配给某个变量。这些值包含动态创建按钮并将其显示在 . 这是代码：

```
if (closure == "Closed") {
    newData = newData + "<br>" + (f + 1) + ". " + data[i + 10] + " - " + data[i] + "-" + data[i + 1] + " " + data[i + 4] + " at " + data[i + 3] + "<h3 align='right'><input type='button' value='Approve' class='button' onclick='conf(" + data[i + 11] + ")' /><br>DATE LAST UPDATED: " + data[1] + " <br>LAST UPDATED BY: " + data[i + 9] + " - " + data[i + 10] + "</h3>";
} else {
    newData = newData + "<br>" + (f + 1) + ". ";
} 
```

这是在一个while循环内。单击按钮后，它会向函数返回一个值。我的问题是，其中第一个创建的按钮的行为被其余按钮继承，所以当我删除第一个按钮时，其中的所有动态创建的按钮都被删除。

该代码运行良好，因为它仅更新我的数据库中的正确数据，但是，这些按钮的存在存在问题。

# c# - 如果条件由 && 运算符控制，则相关

> ID：14891693
> 
> 赞同：2
> 
> 时间：2013-02-15T09:33:14.790
> 
> 标签：c#, if-statement

我有一个 if 控制如下；

```
if (Directory.Exists(System.IO.Path.Combine(systemPath, "Reports", companyName))
    && Directory.GetFiles(System.IO.Path.Combine(systemPath, "Reports", companyName),
       "*.*", SearchOption.TopDirectoryOnly).Length > 0) 
```

控制的第一部分检查目录是否存在，第二部分用于控制目录中的文件数。

**由于该目录可能不存在，因此第二部分可以给出DirectoryNotFoundException**异常。我也不想嵌套 if 条件（第一个 if 用于目录，第二个 if 用于计算文件）

我的问题是；

尽管第一个条件不满足，“&&”运算符是否检查第二个条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:36:26.947

不，[这里看不到](http://msdn.microsoft.com/en-us/library/2a723cdk%28v=vs.71%29.aspx)

> 条件与运算符 (&&) 对其布尔操作数执行逻辑与，**但仅在必要时评估其第二个操作数。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:36:02.787

一旦一个条件为假，检查将被中止。但是，对于 DirectoryNotFoundException，您要么必须使用嵌套的 if，要么必须使用 try-catch-block。此外，您将增加可读性，并且您可以对不存在的目录做出反应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:45:45.920

该`&&`运算符称为*惰性*运算符，因为它只会评估（从左到右）得出结论所需的内容。非惰性对应物是`&`. `||`和 也是如此`|`。

```
void Test()
{
    bool r;
    r = F() && T();     // Prints "False", returns false
    r = T() && F();     // Prints "True False", returns false

    r = F() & T();      // Prints "False True", returns false
}

bool F()
{ Console.Write("False "); return false; }

bool T()
{ Console.Write("True "); return true; } 
```

# c# - 如何记住使用 http 请求和响应进行网络爬取的登录详细信息

> ID：14891694
> 
> 赞同：0
> 
> 时间：2013-02-15T09:33:16.083
> 
> 标签：c#, .net, httpwebrequest, web-scraping, web-crawler

我想废弃一个在登录时显示成员电子邮件的网页，使用两个 Webbrowser 控件，我能够使用一个用于登录，另一个 Web 浏览器用于我所需的页面。

因为我有 1000 个 url，所以我想使用 http 请求和响应并使用 regax 表达式来获得所需的输出。

无论如何，http请求是否会记住登录名并显示所有成员电子邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:18:54.500

这很简单，使用 WebBrowser 控件登录，完成后将 cookie 信息保存在容器中，如下所示：

```
 string[] array = webBrowser.Document.Cookie.Split(new char[]
                        {
                            ';'
                        });
                        for (int i = 0; i < array.Length; i++)
                        {
                            string cookie = array[i];
                            string name = cookie.Split(new char[]
                            {
                                '='
                            })[0];
                            string value = cookie.Substring(name.Length + 1);
                            string path = "/";
                            string domain = "abc.com";
                            yummycookies.Add(new Cookie(name.Trim(), value.Trim(), path, domain));
                        } 
```

现在您在容器中拥有 cookie，现在将 HttpWebRequest 与此 cookie 容器一起使用，就像您已经登录一样，因为您拥有登录 cookie。

```
 public  string getHtml(string url)
    {
        string responseData = "";
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Accept = "*/*";
            request.AllowAutoRedirect = true;
            request.UserAgent = "http_requester/0.1";
            request.Timeout = 60000;
            request.Method = "GET";
            request.CookieContainer=yummycookies;
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Stream responseStream = response.GetResponseStream();
                StreamReader myStreamReader = new StreamReader(responseStream);
                responseData = myStreamReader.ReadToEnd();
            }
            response.Close();
        }
        catch (Exception e)
        {
            responseData = "An error occurred: " + e.Message;
        }
        return responseData;
    } 
```

# c# - LINQ sum 日期不同的列表

> ID：14891697
> 
> 赞同：0
> 
> 时间：2013-02-15T09:33:17.280
> 
> 标签：c#, linq

我有一个元素列表，其中包含带有日期的值列表。我想将它减少到每个日期的一个列表总和值。

清单是这样的：

```
List
        {
            Values: List of items {
                Value: 1, Date: "2013-01-01"
                Value: 2, Date: "2013-01-02"
                Value: 1, Date: "2013-01-03"
                Value: 0, Date: "2013-01-04"
            }
        },
        {
            Values: List of items {
                Value: 1, Date: "2013-01-01"
                Value: 2, Date: "2013-01-02"
                Value: 1, Date: "2013-01-03"
                Value: 0, Date: "2013-01-04"
            }
        } 
```

所以我想要一个列表，其中包含每个日期的总和值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:58:00.927

好的，听起来你想要类似的东西：

```
var sums = from sublist in list
           from item in sublist
           group item by item.Date into g
           select new { Date = g.Key, Sum = g.Sum(x => x.Value) }; 
```

# objective-c - 升级到 Xcode 4.6 后应用程序崩溃

> ID：14891698
> 
> 赞同：1
> 
> 时间：2013-02-15T09:33:22.083
> 
> 标签：objective-c, xcode

所以我刚刚将我的 XCode 升级到 4.6 并尝试运行我的应用程序，它可以工作，直到我尝试打开这样的视图：

```
 problemView *cvc=[[problemView alloc] init];
 [self.navigationController pushViewController:cvc animated:YES]; 
```

在我的应用程序中，我使用了很多相同的调用，但没有问题，问题仅在于该视图。执行第二行后，我没有收到任何崩溃报告，它只是转到：

```
int main(int argc, char *argv[])
{
@autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
}
} 
```

当我调试时，我发现我的 init 方法被调用并且工作正常，但是我的 viewdidLoad 方法被调用了更新。我的 init 是 preaty 标准：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    self.title = @"Seznam";
    self.tabBarItem.image = [UIImage imageNamed:@"menu-skodnicentri.png"];
}
return self;
} 
```

有任何想法吗？就在昨天，它工作正常...

编辑：

```
 2/15/13 10:38:04.080 AM ZM[45906]: *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UITableViewController loadView] loaded the "CentriVC" nib but didn't get a UITableView.'
 *** First throw call stack: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:45:00.030

我找到了一个解决方案，我需要做的就是添加该功能：

```
- (void)loadView {
[super loadView];
} 
```

我在这里得到它：[加载了“PersonnalDetails”笔尖，但没有得到 UITableView](https://stackoverflow.com/questions/2633680/loaded-the-personnaldetails-nib-but-didnt-get-a-uitableview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:43:32.033

您的视图控制器是 type`UITableViewController`的，预计会`UITableView`在 loadView 中创建一个（即您的`view`属性必须是 type 的实例`UITableView`）。当你为你的视图控制器使用一个 nib 文件时，进入 Interface Builder 并确保`view`插座连接到一个`UITableView`（或一个子类`UITableView`）

# javascript - 在 Javascript 中监听 Android 中的后退按钮

> ID：14891700
> 
> 赞同：1
> 
> 时间：2013-02-15T09:33:30.430
> 
> 标签：javascript, android

我在 Android 中有一个 HTML5 应用程序。我想覆盖这个

```
@Override
public void onBackPressed() {
} 
```

因此，当用户点击 Android 中的后退按钮时，具有名为 back() 的方法的 js 文件可以“监听”，以便从 Android 中的 WebView 复制当前在 HTML5 中的应用程序中的导航行为。

我考虑过创建一个 JavaScriptInterface，但我真的不知道哪个可能是解决这个问题的通信过程。可能今天不是我的日子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:59:42.643

这会解决你的问题吗？

```
@Override
public void onBackPressed() {
    yourWebView.loadUrl("javascript:back()");
} 
```

当然你的网页应该有一个名为“back()”的javascript方法

另外：JavaScriptInterface 用于在另一个方向进行通信：如果您想从 WebView 的 javascript 调用 Java 方法。

# gwt - 如何在 gwt jsni 方法中使用 int 值

> ID：14891702
> 
> 赞同：0
> 
> 时间：2013-02-15T09:33:34.727
> 
> 标签：gwt

如何在 jsni 方法中使用 int 值？

```
public class Person extends JavaScriptObject{                                                                                                                     

   // some other methods

   public final native void setPoints(int i)/*-{
       this.points= this.points + i;
   }-*/;

   public final native int getPoints()/*-{
        return this.points;
   }-*/;                                                                                    
} 
```

我在结合 JsArray 的方法中使用它

```
public static boolean moreThanZeroPoints(JsArray<Person> arr, int index){
     if(arr.get(index).getPoints() > 0){
         return true;
     }
     return false;
} 
```

In`arr.get(index).getPoints()`给出以下错误消息：

```
 uncaught: Exception caught: Exception: caught: something other than an int was returned from JSNI method.
    package-path:: getPoints(): JS value of type undefined, expected int 
```

因为`arr.get(index).setPoints(1)`我得到了同样的错误信息。怎么了？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T11:40:59.853

因为`points`可能不存在，所以您必须强制`undefined`转换为 ; 中的某个整数值`getPoints()`。要么添加一个`hasPoints()`方法，要么只在定义 `getPoints()`时调用。`points`

```
// coerce undefined (or null, or 0) to 0
public final native int getPoints() /*-{
  return this.points || 0;
}-*/; 
```

或者

```
// coerce undefined or null to -1
public final native int getPoints() /*-{
  return (this.points != null) ? this.points : -1;
}-*/; 
```

对于`setPoints()`，你声明了一个返回类型，`int`但实际上从未`return`编辑过任何东西，这相当于`undefined`在 JS 中返回。qben 编辑了您的答案并通过将返回类型更改为`void`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:52:04.423

请注意，代码没有引用`JavaScript window object directly inside the method`. 访问浏览器的`window and document objects from JSNI`时，您必须分别将它们引用为`$wnd and $doc`。您编译的脚本在嵌套框架中运行，并且 $wnd 和 $doc 会自动初始化以正确引用`host page's window and document.`

```
public final native int setPoints(int i)/-{ 
    $wnd.points=  $wnd.points + i;
 }-/; 
```

并且应该如下所示：

```
public final native int getPoints()/*-{
    return  eval('$wnd.' + points);;

}-*/; 
```

# javascript - HTML 输入值属性 - 相同的输入，（显然）不同的结果

> ID：14891703
> 
> 赞同：8
> 
> 时间：2013-02-15T09:33:41.367
> 
> 标签：javascript, html, input

通过输入框编辑后，值属性如何作用于 html 输入标签？

例子：

```
<input type="text" name="test" id="test" value="Hello world" /> 
```

这将显示一个带有文本“Hello world”的输入框。如果我编辑它，将一个新字符串输入到呈现的文本框中（而不是通过原始代码），然后尝试像这样使用 js 获取他的值

```
alert(document.getElementById('test').value) 
```

我会正确地获得新的价值。但是，如果我通过 chrome 开发人员工具（或 firebug 或您喜欢的任何东西）检查元素，我会看到与开始时相同的“Hello world”字符串。

两者中哪一个是正确的？js 值还是 chrome 检查器？

这是[示例小提琴](http://jsfiddle.net/BwnEK/1/)，这是屏幕截图![在此处输入图像描述](../Images/ba2f1d6c907bca126dbb2950bbb86074.png)

我在试图找到解决此问题的方法时想到了这一点：经典商店情况，我有一张带有 X 输入标签的表格，用户可以在其中输入 X 商品的数量。我需要检查自每个输入的前一个值以来是否有一个或多个值发生了变化：如果 OLD 和 NEW val 之间的比较返回值已更改，我需要更新订单。否则无需保存/更新。

我以为我可以使用 attr。“值”来存储输入的“旧”值，但可能不是最佳选择..

谁能解释这种行为？这只是一个“刷新”问题还是背后有其他东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T09:35:50.023

两者都是对的，它们只是表现出不同的东西。

DOM`value` **属性**为您提供**当前**值。

HTML`value` **属性**为您提供**默认**值（与 DOM`defaultValue` **属性**相同）。

Chrome DOM 检查器会在 HTML 视图中显示属性值。您必须查看属性视图才能查看属性值。

![Chrome 属性视图的屏幕截图](../Images/4ed9fba111b9f661581a02166c9b765d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T09:42:20.657

[您可以在本文](http://www.willis-owen.co.uk/2012/04/jquery-changing-form-values-not-affecting-the-dom/)中找到信息。

在 html 中看到的值是表单加载的默认值。如果您希望 DOM 也更新，那么您必须使用 ele.setAttribute("value", "new value")

如果你想知道一个元素是否发生了变化，最好的方法是在输入元素上附加一个 onchange 事件，并在更改处理程序中标记一些标志，以了解表单是否发生了变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T09:39:58.023

您可以为输入分配一个所谓的专有属性；例如“oldval”，以便您以后可以将其与当前值进行比较

# error-handling - 如何处理antlr中的错误

> ID：14891706
> 
> 赞同：0
> 
> 时间：2013-02-15T09:33:50.700
> 
> 标签：error-handling, antlr

我是 antlr 的新手，但我已经写了我的第一个语法。我有词法分析器和解析器规则。我一直在测试我的语法，看起来它有效。但现在我想处理一些错误（例如，当它需要 int 但接收到 char 时）并打印一些错误消息。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:20:20.597

在 ANTLR wiki 上有一个广泛的文档页面，用于处理 ANTLR 中的各种错误处理技术：[http ://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery](http://www.antlr.org/wiki/display/ANTLR3/Error+reporting+and+recovery)

# c++ - Windows - 在 C++ 中读取鼠标的 dpi 设置

> ID：14891709
> 
> 赞同：2
> 
> 时间：2013-02-15T09:34:07.653
> 
> 标签：c++, windows, mouse, dpi, mousemove

有没有办法在 C++ 中获取当前鼠标 dpi 设置？

问题是向系统发送鼠标移动消息将导致光标位置不同，具体取决于鼠标的 dpi 分辨率。

**编辑：**

我找到了一个不需要鼠标设置 dpi 的解决方案。我使用 SystemParametersInfo 获得鼠标速度并通过以下方式计算移动距离：moveDistance.x * 5.0 / mouseSpeed。5.0 / mouseSpeed 是保证移动距离始终正确的幻数。

```
// get mouse speed
int mouseSpeed;
mouseSpeed = 0;
SystemParametersInfo(SPI_GETMOUSESPEED, 0, &mouseSpeed, 0);

// calculate distance to gaze position
POINT moveDistance;
moveDistance.x = m_lastEyeX - m_centerOfScreen.x;
moveDistance.y = m_lastEyeY - m_centerOfScreen.y;

// 5.0 / mouseSpeed -> magic numbers, this will halve the movedistance if mouseSpeed = 10, which is the default setting
// no need to get the dpi of the mouse, but all mouse acceleration has to be turned off
double xMove = moveDistance.x * 5.0 / static_cast<double>(mouseSpeed);
double yMove = moveDistance.y * 5.0 / static_cast<double>(mouseSpeed);

INPUT mouse;
memset(&mouse, 0, sizeof(INPUT));
mouse.type = INPUT_MOUSE;
// flag for the mouse hook to tell that it's a synthetic event.
mouse.mi.dwExtraInfo = 0x200;
mouse->mi.dx = static_cast<int>(xMove);
mouse->mi.dy = static_cast<int>(yMove);
mouse->mi.dwFlags = mouse->mi.dwFlags | MOUSEEVENTF_MOVE;
SendInput(1, &mouse, sizeof(mouse)); 
```

我希望这可以帮助别人 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:59:45.673

关于检索鼠标 dpi 的问题之前在这里被问过：[如何在 Windows 上获得“指针分辨率”（或鼠标 DPI）？](https://stackoverflow.com/questions/7182199/how-i-can-get-the-pointer-resolution-or-mouse-dpi-on-windows)- 那里的答案似乎表明这是不可能的，这是有道理的，因为它可能特定于正在使用的鼠标硬件/驱动程序。

就设置光标位置而言 - 如果您使用类似的函数[`SetCursorPos()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394(v=vs.85).aspx)，并且正在处理[`WM_MOUSEMOVE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645616(v=vs.85).aspx)消息，那么您正在使用的坐标是绝对的，而不是相对的，并且根本不应该依赖于鼠标的 dpi。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-22T15:17:23.437

```
INPUT mouse;
memset(&mouse, 0, sizeof(INPUT));
mouse.type = INPUT_MOUSE;
// flag for the mouse hook to tell that it's a synthetic event.
mouse.mi.dwExtraInfo = 0x200;
mouse->mi.dx = static_cast<int>(xMove);
mouse->mi.dy = static_cast<int>(yMove);
mouse->mi.dwFlags = mouse->mi.dwFlags | MOUSEEVENTF_MOVE;
SendInput(1, &mouse, sizeof(mouse)); 
```

而不是这个，你可以使用这个：

```
mouse_event(MOUSEEVENTF_MOVE, xMove , yMove , NULL, NULL); 
```

# java - 无法从下拉菜单中访问所选值

> ID：14891714
> 
> 赞同：0
> 
> 时间：2013-02-15T09:34:26.837
> 
> 标签：java, drop-down-menu, jspx

我的 jspx 页面上的下拉列表有问题。我看到页面上显示了变量值，但我无法获取所选值。输入字符串为空，所以我得到

```
java.lang.NumberFormatException: For input string: "" 
```

在这一行：

```
int idRoom = Integer.parseInt(requestInformation.getRequestParameter("idRoom")); 
```

这是我的 jspx 页面：

```
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"
version="2.0">
<jsp:directive.page contentType="text/html; charset=Utf-8"/>
<html>
    <head>
    <title><fmt:message bundle="${loc}" key="page.newOrders"/></title>
</head>
<body>
<jsp:directive.include file="/jsp/header.jspx"/>
<h2><fmt:message bundle="${loc}" key="label.greeting"/>, ${user.firstName} ${user.lastName}.</h2>
        <table cellspacing="15">
        <tr>                
        <td align="center"><b><fmt:message bundle="${loc}" key="field.idOrder"/>:</b></td>
        <td align="center"><b><fmt:message bundle="${loc}" key="field.availableRooms"/>:</b></td>
        </tr>
        <c:forEach items="${orderList}" var="cell">
        <tr>                                                
            <td align="center">${cell.id}</td>
                <c:choose>
                    <c:when test="${cell.roomList == null}">
                        <td align="center"><fmt:message bundle="${loc}" key="message.noRooms"/></td>
                    <td></td>                               
                </c:when>
                <c:otherwise>
                <form action="Controller" method="get" id="acceptForm">
                    <td align="center">
                            <select name="selectedRoom">
                            <c:forEach items="${cell.roomList}" var="room">
                            <option value="${room.id}">${room.id}</option>
                        </c:forEach>
                    </select>
                    </td>
                    <td align="center">
                        <fmt:message bundle="${loc}" key="button.accept" var="accept"/>
                    <a href="Controller?command=accept&amp;idOrder=${cell.id}&amp;idRoom=${selectedRoom}" onclick="document.getElementById('acceptForm').submit()">${accept}</a>                                  
                    </td>                                                   
                </form>                                                         
                </c:otherwise>
            </c:choose>          
                <td align="center">
                <fmt:message bundle="${loc}" key="message.rejectOrder" var="reject"/>
                    <c:url value="Controller" var="rejectUrl">
                        <c:param name="command" value="reject"/>
                    <c:param name="idOrder" value="${cell.id}"/>
                </c:url>
                    <a href="${rejectUrl}" onClick="return window.confirm('${reject}')">
                        <fmt:message bundle="${loc}" key="button.reject"/>
                    </a>
            </td>                               
            </tr>
            </c:forEach>
    </table>            
    <jsp:directive.include file="/jsp/footer.jspx"/>
    </body>
</html>
</jsp:root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:51:48.207

请尝试如下：

```
int idRoom = Integer.parseInt(requestInformation.getRequestParameter("idRoom").toString()); 
```

并告诉这是否解决了您的问题？

此外，查看您的异常，该参数似乎包含一个空字符串。要么你没有调用正确的参数，要么检查是否区分大小写......

或者使用 Firebug 确保请求包含名称为 idRoom 的参数

谢谢...

777先生

# iphone - 在 iPhone 中的 LinkedIn 集成中共享图像

> ID：14891716
> 
> 赞同：0
> 
> 时间：2013-02-15T09:34:33.433
> 
> 标签：iphone, ios, objective-c, xcode

**我们可以通过iPhone 应用程序**中的**LinkedIn 集成**来共享**消息**（文本） 。……

 ****但是有没有可能通过**iPhone 应用程序**中的**LinkedIn 集成来共享****本地图像**或**url 图像**......？

 ******提前谢谢**......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:47:55.857

**任何我如何得到一个相对的解决方案......**

**在 iPhone 中的 LinkedIn 集成中共享图像---->**

```
NSURL *url = [NSURL URLWithString:@"http://api.linkedin.com/v1/people/~/shares"];
OAMutableURLRequest *request = 
[[OAMutableURLRequest alloc] initWithURL:url
                                consumer:oAuthLoginView.consumer
                                   token:oAuthLoginView.accessToken
                                callback:nil
                       signatureProvider:nil];

NSDictionary *update = [[NSDictionary alloc] initWithObjectsAndKeys:
                        [[NSDictionary alloc] 
                         initWithObjectsAndKeys:
                         @"anyone",@"code",nil], @"visibility", 
                        statusTextView.text, @"comment",[[NSDictionary alloc]
                                                         initWithObjectsAndKeys:
                                                         @"description goes here",@"description",
                                                         @"www.google.com",@"submittedUrl",
                                                         @"title goes here",@"title",
                                                         @"http://economy.blog.ocregister.com/files/2009/01/linkedin-logo.jpg",@"submittedImageUrl",nil],@"content", nil];

[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
NSString *updateString = [update JSONString];

[request setHTTPBodyWithString:updateString];
[request setHTTPMethod:@"POST"];

OADataFetcher *fetcher = [[OADataFetcher alloc] init];
[fetcher fetchDataWithRequest:request
                     delegate:self
            didFinishSelector:@selector(postUpdateApiCallResult:didFinish:)
              didFailSelector:@selector(postUpdateApiCallResult:didFail:)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:54:31.170

我认为没有。我能够通过共享工具包向 LinkedIn 发送文本。但我无法将图片上传到 LinkedIn。所以，我认为这是不可能的。********

# java - 自定义异常类 - 从 Exception 或 Thowable 扩展？

> ID：14891717
> 
> 赞同：19
> 
> 时间：2013-02-15T09:34:35.037
> 
> 标签：java, exception-handling

我正在为我的应用程序设计一个自定义异常类。我有一个非常基本的问题。我应该从**Exception 类**还是**Thowable 类**扩展？有什么好处？

我打算从底层抛出这个并在顶级类中捕获它。它会影响我使用 Thowable 而不是 Exception 的决定吗？抓住 Thowable 从根本上说是正确的吗？

我已经浏览了这个论坛的一些其他主题。他们谈论在抛出堆栈跟踪时维护堆栈跟踪，而不是让它用于异常等。我知道有人说（[这里](https://stackoverflow.com/questions/498217/when-should-throwable-be-used-instead-of-new-exception)）Thowable 是异常的超类，我们不应该使用它。但是其他人（[这里](https://stackoverflow.com/questions/2129647/exception-vs-throwable-in-java)）说异常是针对“异常”情况的。

这个问题更像是讨论一个人比另一个人更好，而不是问如何。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T09:49:32.557

`Throwable`是一个针对所有可能出现的不良情况的类：错误和异常。

`Error`是什么，你**根本无法处理**: `OutOfMemoryError`, `VirtualMachineError`, 等等。

`Exception`是针对**特殊情况**的。

*例外*有两种情况：

1.  `RuntimeException`s。

    这些，你*不知道*: `NullPointerException`, `ClassCastException`, 等等。

2.  `Checked`例外。

    这些是您的代码*知道*并应明确捕获的异常 ( `... throws MyException`): `IOException`s 等。

如果您希望您的代码的用户明确地处理一些异常情况，最好只扩展`Exception`，而不是扩展`RuntimeException`. 没有必要扩展`Throwable`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T09:51:14.813

`Throwable`是`Error`&的超类`Exception`。

Like`Exception`也`Error`可以扔和处理。

但根据以下文档，这是不可取的：

> 您不需要捕获错误对象或错误子类型。你也可以自己抛出一个错误（尽管除了 AssertionError 你可能永远不会想要），你可以捕获一个，但同样，你可能不会。例如，如果您遇到 OutOfMemoryError，您实际上会怎么做？

牢记这个概念，`Throwable`如果你想投掷和/或抓住`Exception`两者`Error`，我建议扩展。`Exception`如果您只想投掷和/或接球，请延长`Exception`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T09:40:24.207

从根本上说，您应该在创建时扩展`Exception`类`Custom Exception`。`Exception`并且`Error`都扩展`Throwable`，扩展确实没有意义`Throwable`。

# c# - WCF Web 服务的 UNC FileShare 身份验证？

> ID：14891719
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:34:43.447
> 
> 标签：c#, wcf, authentication, .net-3.5

我们有一个 WCF 服务，它将分别上传和下载文件到 FileShare 和从 FileShare 下载文件。

客户端应用程序将在请求中传递 FileShareLocation 和 FileName。但是我们遇到了一些异常，并且无法得到响应。

FileSharePath 示例：`\\SERVERIP\SHAREDFOLDER`

> 注意：当我不使用网络文件共享时，该服务运行良好。

```
'. ---> System.Net.WebException: The remote server returned an error: (500) Internal Server Error.

   at System.Net.HttpWebRequest.GetResponse()

   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

   --- End of inner exception stack trace ---

Server stack trace: 

   at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException, ChannelBinding channelBinding)

   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)

   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)

   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)

   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)

   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)

   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 

   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)

   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)

   at wcfServiceTest.wcfService.ICommonService.UploadDocument(UploadDocumentRequest request)

   at wcfServiceTest.wcfService.CommonServiceClient.wcfServiceTest.wcfService.ICommonService.UploadDocument(UploadDocumentRequest request) in D:\Test\CMS\wcfServiceTest\wcfServiceTest\Service References\wcfService\Reference.cs:line 2309

   at wcfServiceTest.wcfService.CommonServiceClient.UploadDocument(RequestHeader UploadDocumentReqHdr, Byte[]& UploadDocumentContent) in D:\Test\CMS\wcfServiceTest\wcfServiceTest\Service References\wcfService\Reference.cs:line 2316

   at wcfServiceTest.frmMain.DocumentUpload_Click(Object sender, EventArgs e) in D:\Test\CMS\wcfServiceTest\wcfServiceTest\frmMain.cs:line 105 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:17:40.443

由我自己解决。

1.  在 IIS 中创建一个新的应用程序池
2.  将 AppPool 的身份更改为有权访问 FileShare 的用户
3.  将 WCF 服务应用程序池更改为新的应用程序池

# android - 如何在android中以字符串格式查找两个日期之间的差异

> ID：14891729
> 
> 赞同：1
> 
> 时间：2013-02-15T09:35:11.973
> 
> 标签：android, datetime

```
Calendar zCalendarL = Calendar.getInstance(); 
SimpleDateFormat zDateFormatL = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");

String DateTime="2013/02/15 15:05:01";
String zUpdatedDateTimeG =zDateFormatL.format(DateTime);

String zCurrentDateTimeL=zDateFormatL.format(zCalendarL.getTime()); 
```

我需要知道 zCurrentDateTimeL 和 zUpdatedDateTimeG 之间的日期时间

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:44:39.027

试试这个：我希望这对你有帮助这对我有用......

```
 private void getDifference(java.util.Date startTime,
            java.util.Date endTime, java.util.Date eartime,
            java.util.Date curtime) {

        Calendar startDateTime = Calendar.getInstance(TimeZone
                .getTimeZone("GMT-5:00"));
        startDateTime.setTime(startTime);
        Calendar endDateTime = Calendar.getInstance();
        endDateTime.setTime(endTime);           
        long milliseconds1 = startDateTime.getTimeInMillis();
        long milliseconds2 = endDateTime.getTimeInMillis();
        long diff = Math.abs(milliseconds1 - milliseconds2);
        long seconds = diff / (1000);

              } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:47:06.913

```
Calendar zCalendarL = Calendar.getInstance(); 
SimpleDateFormat zDateFormatL = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");

String DateTime="2013/02/15 15:05:01";

Date d = zDateFormatL.parse(DateTime);
long diff = System.currentTimeMillis() - d.getTime(); 
```

这将返回以毫秒为单位的差异

# mysql - 如何按点击状态对表格进行升序和降序排序？MYSQL/ColdFusion

> ID：14891737
> 
> 赞同：1
> 
> 时间：2013-02-15T09:35:53.817
> 
> 标签：mysql, coldfusion, html-table, click

我有一个表格，我可以在其中单击标题以按不同的列对整个表格进行排序。我想合并一些布尔状态，以便我可以单击一次以按该列升序对表格进行排序，然后再次单击以使其降序。

这是我的代码：

```
 <th><A HREF="thispage.cfm?sorter=creationDate">Creation Date</A> </th>

 <cfif IsDefined("URL.sorter")>

 <cfquery datasource="Pad"  name="One">
 select * from meeting
 ORDER BY #URL.sorter# DESC
 </cfquery>

<cfelse>
 <cfquery datasource="Pad" name="One">
select * from meeting
 ORDER BY contactName
 </cfquery>
</cfif> 
```

我相信它可以通过使用 cfset 创建一个布尔变量然后在单击表头时更改该变量状态并在第一个查询中将一个变量状态分配给 ASC 并将另一个变量状态分配给 DESC 来实现。我只是不确定如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:00:01.207

如果你愿意，你可以用 jQuery 插件/javascript 很好地做到这一点。请参阅：[选择 jQuery 数据网格插件？](https://stackoverflow.com/questions/5622716/choosing-a-jquery-datagrid-plugin)

但是要以老式方式进行操作，您需要将方向添加到您的`<th>`. 如果您只处理一个标题，您可以简单地执行以下操作：

```
<cfif structKeyExists(url, "sortOrder") and url.sortOrder eq "ASC">
    <url.sortOrder = "DESC"> 
<cfelse>
    <url.sortOrder = "ASC"> 
</cfif> 
<cfoutput>
    <A HREF="thispage.cfm?sorter=creationDate&sortOrder=#url.sortOrder#">Creation Date</A>
</cfoutput> 
```

如果您使用多个标题，则还需要检查当前列的方向。

```
<cfif (structKeyExists(url,"sorter") and url.sorter eq "{thisColumn}")>
  and (structKeyExists(url, "sortOrder") and url.sortOrder eq "ASC")>
    <url.sortOrder = "DESC">
<cfelse>
    <url.sortOrder = "ASC">
</cfif> 
```

您可能应该将其放入传递您正在检查的列的值的函数中，这样您就不会在每个`<th>`, DRY 之前一遍又一遍地拥有相同的东西（不要重复自己）。

```
<A HREF="thispage.cfm?sorter=creationDate&sortOrder=#sortMe({thisColumn})#">{thisColumn}</A> 
```

最后，将方向添加到您的查询中

```
<cfquery datasource="Pad"  name="One">
    select 
        columnName1
        , columnName2
        , columnName3
    from 
        meeting
    ORDER BY 
        #URL.sorter# <cfif structKeyExists(url,"sortOrder")>#url.sortOrder#</cfif>
 </cfquery> 
```

# android - Settings.Secure.ANDROID_ID 不唯一，如何解决？

> ID：14891738
> 
> 赞同：6
> 
> 时间：2013-02-15T09:36:00.223
> 
> 标签：android, security

我现在面临一个大问题。如在 Android 官方参考中找到：http: [//developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)

* * *

**公共静态最终字符串ANDROID_ID**

*在 API 级别 3 中添加

在设备首次启动时随机生成的 64 位数字（作为十六进制字符串），在设备的整个生命周期内应保持不变。（如果在设备上执行恢复出厂设置，该值可能会发生变化。） 常量值：“android_id”*

* * *

但是售出超过**500 台平板电脑**（A10 AllWinner）ANDROID_ID 并不是真正随机生成的，我看到（从我的网络服务日志中）几个**设备具有相同的编号**！

为什么？

我该如何解决这个问题？如何生成唯一 ID？假设所有设备的[序列号始终相同（几个android设备上的序列号相同。adb没用。我该如何更改序列号？](https://stackoverflow.com/questions/14334656/same-serial-number-on-all-android-devices-adb-is-useless-can-i-modify-the-seri)）并且MAC地址不能总是可用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-15T11:23:51.347

一般来说，这是 Android 的一个严重问题 - 看起来 Android ID 是最好的选择，但是您注意到几个重要的供应商已经把实现弄得一团糟。

面对类似的要求，我使用了这些值的哈希：

*   电话号码/SIM 卡号码（如果可用或仅使用零）
*   安卓ID
*   Mac 地址（如果可用或仅使用零）

根据我有限的经验（使用了数百台设备），这种组合足以实现您所需的独特性。

*从 Android 6更新 2017 年* ，出于安全原因，Mac 地址返回一个常量值 - 但是在几乎所有较新的 android 实现中，android ID 似乎都是可靠的唯一的，因此除非您针对的是旧版本，否则您没有使用此技术的动机。

# jsf - 在 Primefaces 中对树节点进行排序

> ID：14891739
> 
> 赞同：5
> 
> 时间：2013-02-15T09:36:01.197
> 
> 标签：jsf, jsf-2, primefaces

我正在使用 JSF 2.1 和 Primefaces 3.3。我正在使用 primefaces 树组件从数据库中创建树。我想在所有级别按字母顺序对树节点进行排序。请帮助我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-23T13:36:04.277

我们在排序时遇到了问题，`Comparator`并发现**已经提供了一个方便的****PrimeFaces [TreeUtils.sortNode(TreeNode, Comparator)](http://www.primefaces.org/docs/api/5.0/org/primefaces/util/TreeUtils.html#sortNode%28org.primefaces.model.TreeNode,%20java.util.Comparator%29)**类，它就像一个魅力:)

 *** * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-15T12:34:44.723

您必须使用Comparator 类对 ManagedBean`DefaultTreeNode`中的 Primefaces 对象进行排序。`Collections.sort`

```
public TreeNodeComparator() implements Comparator<TreeNode> {
  public int compare(TreeNode n1, TreeNode n2) {
    // This assumes the tree node data is a string
    return n1.getData().compareTo(n2.getData());
  }
} 
```

在您的托管 bean 中，您需要组装您的子列表而不添加他们的父母。那可以稍后来。现在为每个级别建立您的孩子列表并将其设置`parent`为`null`；

```
TreeNode node1 = new DefaultTreeNode("node1", null);
TreeNode node2 = new DefaultTreeNode("node2", null);
TreeNode child1node1 = new DefaultTreeNode("zgnagn", null);
TreeNode child2node1 = new DefaultTreeNode("vvnieeianag", null);
TreeNode child1node2 = new DefaultTreeNode("cajkgnagair", null);
TreeNode child2node2 = new DefaultTreeNode("ajaavnagwokd", null);
rootNodeChildren.add(node1);
rootNodeChildren.add(node2);
node1Children.add(child1node1);
node1Children.add(child2node1);
node2Children.add(child1node2);
node2Children.add(child2node2); 
```

我们将所有内容设置为 null 的原因是，当在 DefaultTreeNode 上设置父级时，它会添加到父级子列表中。设置节点父节点的顺序决定了它们在树组件中出现的顺序。

知道我们可以使用比较器对每个列表进行单独排序。

```
Collections.sort(rootNodeChildren, new TreeNodeComparator());
Collections.sort(node1Children, new TreeNodeComparator());
Collections.sort(node2Children, new TreeNodeComparator()); 
```

现在所有列表都已排序，因此我们可以一次循环遍历相应的父级列表。您可能可以编写一个算法来确定这一点，或者您可以保留一个单独的数据结构来构建树层次结构而不添加到列表中。

另一种方法，总体上可能更简单，就是重写 DefaultTreeNode 类并给它一个排序方法：

```
public SortableDefaultTreeNode extends DefaultTreeNode {

  public void sort() {
    TreeNodeComparator comparator = new TreeNodeComparator();
    Collections.sort(this.children, comparator);
    for (TreeNode child : children) {
      child.sort();
    }
  }
} 
```

现在您可以构建您的 TreeNodes，然后调用`root.sort()`它，它将递归地按字母顺序对每个级别的所有子节点进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-06T01:48:52.747

您还可以使用通用的可比较 TreeNode 方法，例如：

*Base 取自 primefaces `DefaultTreeNode`，未修改的更改被遗漏在下面的代码中。*

如果孩子的不应该限制在 T 上，可以使用`TreeNodeComparable<T extends Comparable<?>>`投到`Comparable`in`compareTo()`方法。

```
public class TreeNodeComparable<T extends Comparable<T>> implements TreeNode, Serializable,
    Comparable<TreeNodeComparable<T>>
{
    private static final long serialVersionUID = ...;

    private T data;

    private List<TreeNodeComparable<T>> children;

    public TreeNodeComparable(final String type, final T data, final TreeNodeComparable<T> parent)
    {
        this.type = type;
        this.data = data;
        this.children = (List) new TreeNodeChildren(this);
        if (parent != null)
            parent.getChildren().add(this);
    }

    /**
     * Comparison only depends on the underlying data
     * 
     * @see ObjectUtils#compare(Comparable, Comparable)
     */
    @Override
    public int compareTo(final TreeNodeComparable<T> node)
    {
        if (node == null)
            throw new NullPointerException("node");

        return ObjectUtils.compare((T) this.getData(), (T) node.getData());
    }

    /**
     * Recursively sorts the complete tree.
     */
    public void sort()
    {
        Collections.sort(this.children);
        for (final TreeNodeComparable<T> child : this.children)
        {
            child.sort();

            // must reset parent due to PF problems
            // http://forum.primefaces.org/posting.php?mode=reply&f=3&t=39752
            child.setParent(this);
        }
    }

    @SuppressWarnings("unchecked")
    @Override
    public boolean equals(final Object obj)
    {
        if (this == obj)
            return true;
        if (obj == null || this.getClass() != obj.getClass())
            return false;

        final TreeNodeComparable<T> other = (TreeNodeComparable<T>) obj;

        return ObjectUtils.equals(this.data, other.data);
    }

    @Override
    public int hashCode()
    {
        return new HashCodeBuilder().append(this.data).toHashCode();
    }

    public void setData(final Object data)
    {
        if (data != null && !(data instanceof Comparable))
            throw new IllegalArgumentException();
        this.data = (T) data;
    }

    @SuppressWarnings(
    {
        "unchecked", "rawtypes"
    })
    public List<TreeNode> getChildren()
    {
        return (List) this.children;
    }
} 
```**

# biztalk - Biztalk 的文本文件输出？

> ID：14891741
> 
> 赞同：1
> 
> 时间：2013-02-15T09:36:05.297
> 
> 标签：biztalk, biztalk-2009

我在 Biztalk 中有一个从外部 XML 模式到内部 XML 模式的映射。我希望映射到平面文件模式的内部模式。但这似乎是可能的。我无法选择平面文件架构作为目标架构。所以我想我需要在发送管道中使用平面文件汇编器？但是在平面文件汇编器的属性上，平面文件模式在文档模式下不可见。你知道怎么做吗？

我使用 Biztalk 2009

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T06:55:24.097

+1 杰伊所说的话。

此外，您应该在第 2 步之后执行以下操作：

2.1 创建引用源模式（外部模式）和目标模式（步骤 2 中创建的平面文件模式）的新 Map

然后您应该使用此映射将 XML 转换为平面文件。这应该使用配置了两件事的发送端口来完成：

*   管道（在 Jay 的回复中已经提到，#3）
*   出站地图，您可以在 BizTalk 管理控制台中的发送端口属性下找到它。您应该配置将您在步骤 2.1 中创建的地图添加到出站地图。

通常，您应该在接收位置接收 XML 文件。所以你需要做的是创建一个新的接收端口和一个接收位置。并在发送端口属性中（再次！）添加一个具有以下配置的新过滤器： BTS.ReceivePortName == XXXXX 其中 XXXXX 是接收端口名称。

这样，在接收端口 XXXXX 上接收到的任何消息都将被发送到已配置映射和管道的发送端口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T20:39:57.480

1.  创建一个示例平面文件，该文件具有您想要的输出格式
2.  使用平面文件架构向导创建平面文件架构。使用您的示例文件作为向导的输入。
3.  创建管道。将平面文件汇编器放入管道中。
4.  单击平面文件组装器形状并将文档架构设置为您创建的平面文件架构。这告诉它输出文件的格式。
5.  创建一个发送端口并使用您创建的管道。
6.  将您的数据发送到发送端口。

# php - 提取字符串中两个字符之间的子字符串 PHP

> ID：14891743
> 
> 赞同：44
> 
> 时间：2013-02-15T09:36:22.173
> 
> 标签：php, substr

是否有一个 PHP 函数可以在字符串中的 2 个不同字符之间提取一个短语？类似的东西`substr()`;

例子：

```
$String = "[modid=256]";

$First = "=";
$Second = "]";

$id = substr($string, $First, $Second); 
```

因此`$id`将是`256`

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-15T09:40:03.957

使用此代码

```
$input = "[modid=256]";
preg_match('~=(.*?)]~', $input, $output);
echo $output[1]; // 256 
```

工作示例[http://codepad.viper-7.com/0eD2ns](http://codepad.viper-7.com/0eD2ns)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-09-08T05:52:47.730

利用：

```
<?php

$str = "[modid=256]";
$from = "=";
$to = "]";

echo getStringBetween($str,$from,$to);

function getStringBetween($str,$from,$to)
{
    $sub = substr($str, strpos($str,$from)+strlen($from),strlen($str));
    return substr($sub,0,strpos($sub,$to));
}

?> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-15T09:41:52.870

```
$String = "[modid=256]";

$First = "=";
$Second = "]";

$Firstpos=strpos($String, $First);
$Secondpos=strpos($String, $Second);

$id = substr($String , $Firstpos, $Secondpos); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T11:09:18.870

如果您不想使用正则表达式，请使用[strstr](http://php.net/manual/en/function.strstr.php)、[trim](http://php.net/manual/en/function.trim.php)和[strrev](http://php.net/manual/en/function.strrev.php)函数：

```
// Require PHP 5.3 and higher
$id = trim(strstr(strstr($String, '='), ']', true), '=]');

// Any PHP version
$id = trim(strrev(strstr(strrev((strstr($String, '='))), ']')), '=]'); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-15T09:39:32.260

正则表达式是你的朋友。

```
preg_match("/=(\d+)\]/", $String, $matches);
var_dump($matches); 
```

这将匹配任何数字，对于其他值，您将不得不对其进行调整。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-15T09:41:40.553

您可以使用正则表达式：

```
<?php
$string = "[modid=256][modid=345]";
preg_match_all("/\[modid=([0-9]+)\]/", $string, $matches);

$modids = $matches[1];

foreach( $modids as $modid )
  echo "$modid\n"; 
```

[http://eval.in/9913](http://eval.in/9913)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-15T09:42:09.300

```
$str = "[modid=256]";
preg_match('/\[modid=(?P<modId>\d+)\]/', $str, $matches);

echo $matches['modId']; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-15T09:48:08.107

*（从评论中移出，因为在这里格式化更容易）*

可能是一种懒惰的方法，但在这种情况下，我通常会首先像这样爆炸我的字符串：

```
$string_array = explode("=",$String); 
```

在第二步中，我可能会通过 rtrim 摆脱那个“]”：

```
$id = rtrim($string_array[1], "]"); 
```

...但这**仅**在结构始终完全相同的情况下才有效...

-干杯-

ps：它实际上不应该是***$String = "[modid=256]";*** ?

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-15T09:48:51.047

尝试正则表达式

```
$String =" [modid=256]";
$result=preg_match_all('/(?<=(=))(\d+)/',$String,$matches);
print_r($matches[0]); 
```

**输出**

数组（ [0] => 256 ）

**[演示](http://codepad.viper-7.com/ar3KRl)**

**解释** 这里它在正则表达式中使用了正则表达式 (?<=) 后面的正向查找，例如 (?<=foo)bar 匹配 bar 前面有 foo 时，这里 (?<=(=))(\d+) 我们匹配 (\d+ ) 就在 '=' 符号之后。\d 匹配任何数字字符 (0-9)。+ 匹配 1 个或多个前面的令牌

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-08T13:19:39.917

我认为这是获取字符串的方法：

```
<?php
function get_string_between($string, $start, $end){
    $string = ' ' . $string;
    $ini = strpos($string, $start);
    if ($ini == 0) return '';
    $ini += strlen($start);
    $len = strpos($string, $end, $ini) - $ini;
    return substr($string, $ini, $len);
}

$fullstring = '.layout { 

color: {{ base_color }} 

}

li { 

color: {{ sub_color }} 

} 

.text { 

color: {{ txt_color }}

 }

 .btn { 

color: {{ btn_color }}

 }

.more_text{

color:{{more_color}}

}';

  $parsed = get_string_between($fullstring, '{{', '}}');
  echo $parsed;
?> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-15T09:51:52.947

您可以使用正则表达式，也可以试试这个：

```
$String = "[modid=256]";

$First = "=";
$Second = "]";
$posFirst = strpos($String, $First); //Only return first match
$posSecond = strpos($String, $Second); //Only return first match

if($posFirst !== false && $posSecond !== false && $posFirst < $posSecond){
    $id = substr($string, $First, $Second);
}else{
//Not match $First or $Second
} 
```

您应该阅读有关 substr 的信息。最好的方法是正则表达式。

# asp.net - TempData 实施更改 - 更改原因

> ID：14891744
> 
> 赞同：10
> 
> 时间：2013-02-15T09:36:24.823
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2, asp.net-mvc-4

在 ASP.NET MVC 2 中，条目的生命周期`TempDataDictionary`只是一个 HTTP 请求。

这转化为在一个请求中设置一个值、重定向并访问该行另一端的相同项目。在此之后，该条目将不再可用，无论您是否在行末从字典中读取该值。

自 ASP.NET MVC 3（我相信）以来，这个实现细节发生了相当大的变化。

中的条目`TempDataDictionary`现在只有在阅读后才会被删除。

**MVC 4**

```
public object this[string key]
    {
      get
      {
        object obj;
        if (!this.TryGetValue(key, out obj))
          return (object) null;
        this._initialKeys.Remove(key);
        return obj;
      }
    } 
```

和

```
public bool TryGetValue(string key, out object value)
    {
      this._initialKeys.Remove(key);
      return this._data.TryGetValue(key, out value);
    } 
```

**MVC 2：**

```
public object this[string key] {
            get {
                object value;
                if (TryGetValue(key, out value)) {
                    return value;
                }
                return null;
            } 
```

和

```
public bool TryGetValue(string key, out object value) {
            return _data.TryGetValue(key, out value);
        } 
```

由于大多数人似乎在一个请求中将项目放入`TempData`集合中，并在下一个请求中立即将它们读回，因此功能似乎大致相同。

在情况并非如此的情况下，例如希望在`TempData`重定向到一个位置时读取条目，并希望在请求其他资源并导航回来时将其删除，此更改会产生相当大的影响。

该条目不再可用于一个 http 请求，而是可用于许多 HTTP 请求，即使它仅可用于字典上的单个 get。

我想更多地了解这种实施变化，变化的原因是什么，这仅仅是为了迎合多个重定向还是有更深层次的好处？

其次，我很想知道是否有什么内置的东西现在可以像`TempData`过去一样满足单个 HTTP 请求共享数据的需求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:48:46.373

You're correct that `TempData` keys are only cleared if they’ve been read (or after the user’s session expires) but this has been the case since MVC2, ([http://forums.asp.net/post/3692286.aspx](http://forums.asp.net/post/3692286.aspx))

> I'd like to know more about this implimentation change, what were the reasons for the change, was this simply to cater for multiple redirects or are there deeper benefits?

This change prevented problems that arose in MVC 1, such as `TempData` keys being deleted before they were read. So yes, the primary benefit is in avoiding these problems when you have multiple re-directs, or interleaved requests. In addition, the `RedirectToRouteResult` or `RedirectResult` methods now automatically call `TempData.Keep()` to prevent clearing of keys, even after they've been read so keep that in mind as well.

> In scenarios where this is not the case such as wanting to read the TempData entry if redirected to one place, and expecting it to have been removed if requesting other resources and navigating back, this change has quite an impact.

You’re correct, if you've been coding under the assumption that the `TempData` keys are cleared automatically you could run into unexpected problems. You can call `TempData.Clear()` to manually remove all keys from the `TempDataDictionary`, or `TempData.Remove(key)` to remove a specific key. You can also use `TempData.Peek()` to read the value of a `TempData` key without flagging it for removal from the `TempDataDictionary`.

> Secondary to that, I'm intrigued to know if there's anything built in that now caters for single HTTP request sharing of data in the same way that TempData used to cater for?

I'm not aware of any new objects or functions that replicate the original implementation of TempData. Essentially we still use `TempData` but have to be mindful that the data persists until read and clear the dictionary manually if needed.

# c - 二进制的无效操作数 ==

> ID：14891746
> 
> 赞同：1
> 
> 时间：2013-02-15T09:36:35.247
> 
> 标签：c

我有一个我正在尝试编译的程序，但它向我显示了编译错误：在第 22 行：“二进制操作数无效 ==” 我搜索了各种可用的解决方案，但找不到我的问题的解决方案。代码如下：

```
 #include <stdio.h>

        typedef struct nx_string_t
        {
            char *buf;  
        }nx_string_t;

        typedef struct nx_value_t
        {
            union
                {
                nx_string_t strng;
                }
        } nx_value_t;

        void func(nx_value_t *vale);

        void func(nx_value_t *vale)
        {
             if(vale->strng == NULL) // Error occurs here.
             {
                  printf("its done");    
             }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:38:12.457

该成员`strng`的类型为`nx_string_t`，它不是指针。

您必须与内部的指针元素进行比较：

```
if(value->strng.buf == NULL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:38:00.133

比较应该是

```
if (vale->strng.buf == NULL) 
```

`vale->strng`是不是指针的类型`nx_string_t`，所以永远不可能`NULL`。然而，它确实有一个`buf`指针成员，它可以是`NULL`.

# java - Android - 2 小时后获取时间

> ID：14891747
> 
> 赞同：1
> 
> 时间：2013-02-15T09:36:38.820
> 
> 标签：java, android, time

在我的 Android 应用程序中。我每 2 小时运行一次任务。如何检查时间是否已超过 2 小时。

我尝试使用它，但它说已弃用

```
Date date = new Date();
date.setHours(date.getHours() + 2); 
```

我将不胜感激有关如何实现这一点的见解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T12:57:57.670

检查此链接

[http://www.dotnetexpertsforum.com/comparing-date-time-values-in-android-t1567.html](http://www.dotnetexpertsforum.com/comparing-date-time-values-in-android-t1567.html)

```
Calendar current_time = Calendar.getInstance ();
current_time.add(Calendar.YEAR, 0);
current_time.add(Calendar.DAY_OF_YEAR, 0);
current_time.set(Calendar.HOUR_OF_DAY, 
//Subtract 2 hours       
current_time.get(Calendar.HOUR_OF_DAY)-2);
current_time.set(Calendar.MINUTE, 0);
current_time.set(Calendar.SECOND, 0);

Calendar given_time = Calendar.getInstance ();
given_time.set(Calendar.YEAR, syear);
//Give the day sDay and hour shour
given_time.set(Calendar.DAY_OF_YEAR, sday);
given_time.set(Calendar.HOUR_OF_DAY, shour);
given_time.set(Calendar.MINUTE, 0 );
given_time.set(Calendar.SECOND, 0);

Date current_calendar = current_time.getTime();
Date given_calendar = given_time.getTime();

System.out.println("Current Calendar "+ current_calendar);
System.out.println("Given Calendar "+ given_calendar);

boolean v = current_calendar.after(given_calendar); 

if(v){

    return true;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:39:09.337

你应该使用这个`Calendar`类。

```
Calendar calendar=Calendar.getInstance();
calendar.set(Calendar.HOUR_OF_DAY, calendar.get(Calendar.HOUR_OF_DAY)+2);
calendar.getTime();//your date +2 hours 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T09:38:27.450

使用[**日历类**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)：

```
 Calendar cal = Calendar.getInstance();
    System.out.println(cal.get(Calendar.HOUR)>(cal.get(Calendar.HOUR)+2)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:43:49.423

如果您必须每两个小时重复一次该任务，您应该为此使用警报管理器服务。有关详细信息，请参阅下面的链接。

[http://www.javacodegeeks.com/2012/09/android-alarmmanager-tutorial.html](http://www.javacodegeeks.com/2012/09/android-alarmmanager-tutorial.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:38:44.547

`Date`已弃用。改为使用`Calendar`。

资料来源：[Java：为什么不推荐使用 Date 构造函数，而我改用什么？](https://stackoverflow.com/questions/5677470/java-why-is-date-deprecated-and-what-do-i-use-instead)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T09:38:58.697

两个小时是 2 * 60 分钟，是 2 * 60 * 60 秒，是 2 * 60 * 60 * 1000 毫秒。因此，您可以将此毫秒数添加到您的日期：

```
Date date = new Date ();
Date after2Hours = new Date (date.getTime () + 2L * 60L * 60L * 1000L); 
```

# azure - 本地调试 azure 模拟器

> ID：14891748
> 
> 赞同：7
> 
> 时间：2013-02-15T09:36:38.723
> 
> 标签：azure, visual-studio-2012, 64-bit, emulation, windows-7-x64

Windows 7，VS2012-Update1，x64。

如果我启动一个新的 MVC 项目，并将 Azure 项目添加到它。我无法在 azure 模拟器中本地调试它。

错误：

> 操作时间比预期的要长
> 
> 64 位调试操作花费的时间比预期的要长。这可能是由于与第 3 方网络软件不兼容造成的。[请参阅有关解决这些问题的帮助。](http://msdn.microsoft.com/en-us/library/ms184681.aspx)

当我终止该消息时（两次）：

> 适用于 Microsoft Visual Studio 的 Windows Azure 工具
> 
> 将调试器附加到角色实例 'deployment18(18).mvctest.Azure.Website_IN_0' 与 prces Id:'8752' 时出错。无法附加。Microsoft Visual Studio 远程调试监视器已在远程计算机上关闭。

第一条消息，我已经发现如果您将网站目标更改为 x86，这可以解决问题。（这解决了调试单元测试的问题）但是如果我将其更改为 x86，则会弹出 nex 消息：

> 适用于 Microsoft Visual Studio 的 Windows Azure 工具
> 
> 无法开始调试。该角色是为与 Windows azure 计算模拟器不兼容的平台构建的。在这个系统上，计算模拟器支持任何 CPU 和 x64。

如果我在没有调试的情况下启动（不是 x86），Windows 模拟器就会启动，网站也会打开。

有没有办法解决这个问题，我们可以在 azure 模拟器上调试 x64 网站？

谢谢。

## 问题解决了：

问题是，我们的普通帐户没有管理员权限，我们必须使用其他管理员用户的凭据才能在管理员模式下运行它。如果我使用该管理员用户登录并启动所有内容，则该用户也无法加载 azure 模拟器。每个共同开发者都有同样的问题。但是当普通帐户恢复管理员权限时，模拟器正常启动。所以我认为这些管理员帐户缺少一些东西（我不知道）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:00:12.843

确保远程调试服务和机器调试管理器（用于 x64）已正确安装和运行（自动中的服务，尤其是未禁用的服务）。

您也可以尝试按照[此处的说明下载并重新安装远程调试工具](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

即使它在同一台机器上，模拟器的调试也有可能通过远程调试路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T19:32:47.303

现在已经用谷歌搜索了一段时间，看起来问题与安装在 Windows 上的网络驱动程序有关。你有安装VPN吗？卸载它并重试。否则可能是某些网卡驱动程序。同样的，卸载重试。有些人通过升级视觉工作室解决了这个问题。

# jquery - 加载 jQuery UI 模板时令人讨厌的延迟

> ID：14891753
> 
> 赞同：1
> 
> 时间：2013-02-15T09:36:43.543
> 
> 标签：jquery, jquery-ui, layout

我有使用 jQuery UI 元素（主要是按钮）的 Web 服务。

我在 document.ready() 中编写所有代码部分代码是单独的 js 文件。当所有按钮都具有丑陋的 html 默认样式时，让我感到愤怒的是从开始加载页面到加载结束之间的 0.5 秒。我没有在其他网页上看到它，所以我认为我做错了什么......

如何防止这种情况？

```
$(document).ready(function() {

   $("#radio").buttonset();
   $("#mapcontrols").buttonset();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:38:41.350

您在 DOM 加载时隐藏它们，并在全部设置后显示它们。

```
$(window).load(function() { // will fire handler when all content on document is on position
   $(".radio, .mapcontrols").hide().buttonset(); // first hide and then apply method buttonset() to it
   $(".radio, .mapcontrols").fadeIn();
}); 
```

如果您有多个按钮，请使用类。

# wordpress - Wordpress 插件获取版本。我这样做正确吗？

> ID：14891756
> 
> 赞同：0
> 
> 时间：2013-02-15T09:37:12.897
> 
> 标签：wordpress

我想为我自己的所有基于 wordpress 的网站制作一个插件。这个想法很简单，我想通过使用 CURL 来获取这些站点的版本（可能还有其他信息）。现在，我有这样的代码：

```
<?php
/*
Plugin Name: Manage Site
Plugin URI: http://not-available-yet.com/
Description: A manage site plugin
Author: Go Frendi Gunawan
Version: 0.0
Author URI: http://not-available-yet.com/
*/

// this file is located on wp-content/plugins/manage_site

require_once '../../../wp-includes/version.php'; // do I need to include everything manually like this?

if(isset($_GET['key']))
{
    $key = $_GET['key'];
    if($key=='1234'){
        echo $wp_version;
    }
} 
```

我可以通过使用带有此地址的 CURL 访问它： [http ://my_domain.com/wordpress/wp-content/plugins/manage_site/manage_site.php?key=1234](http://my_domain.com/wordpress/wp-content/plugins/manage_site/manage_site.php?key=1234)

我会得到 wordpress 版本作为回应：

> 3.5.1

现在是工作。

但是，由于这是我第一次编写 wordpress 插件，我可能会做错事。那么，我做对了吗？或者有没有更好的方法来写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T23:27:33.543

我找到了答案。@kjetilh 和 @brasofilo 在“正常方式”访问 wordpress 插件的情况下都是正确的。由于我直接访问插件，因此没有加载 wordpress 引导程序。因此，我的第一种方法是部分正确的。但是加载 wp-load.php 更加优雅（并且简单且可用），因为它加载了所有内容，不仅是版本，而且访问“更多信息”会很有用：

```
<?php
/*
Plugin Name: Manage Site
Plugin URI: http://not-available-yet.com/
Description: A manage site plugin
Author: Go Frendi Gunawan
Version: 0.0
Author URI: http://not-available-yet.com/
*/

// this file is located on wp-content/plugins/manage_site

require_once '../../../wp-load.php';

if(isset($_GET['key']))
{
    $key = $_GET['key'];
    if($key=='1234'){
        echo $wp_version;
    }
} 
```

# c++ - 如何从这些输出中获取实际的函数名称

> ID：14891764
> 
> 赞同：8
> 
> 时间：2013-02-15T09:37:27.373
> 
> 标签：c++, gcov

我使用 boost test 进行单元测试，使用 gcov 和 lcov 来测量覆盖率。

Unfortuanlly genhtml 会为函数覆盖率生成类似的报告：

![功能覆盖](../Images/893b1de203b83f9f1d2b11f5c167dbf8.png)

我现在想知道这个功能`_ZN7UtilLib11ProgressBarC2EjdRSo`实际上是什么。

到目前为止，我无法将此函数与 ProgressBar 的任何类接口相关联：

```
class ProgressBar {
 public:
    explicit ProgressBar(
            unsigned int expected_count,
            double updateInterval = 30,
            std::ostream& os = std::cout);

    unsigned int operator+=(unsigned int increment);

    unsigned int operator++();

    unsigned int operator++(int i);
} 
```

任何人都可以帮助我如何使用 gcov 获得更好的函数名称，或者如何理解这些函数名称。

该应用程序使用 gcc4.7 编译，带有以下标志：`-g -g -save-temps=obj -Wall -Wextra -Wno-unused-parameter -Wno-error=unused-parameter -O0 -pedantic`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-15T09:44:11.867

这些是损坏的 C++ 符号，`c++filt`在 shell 中使用来对其进行解码：

```
> c++filt _ZN7UtilLib11ProgressBarC2EjdRSo
UtilLib::ProgressBar::ProgressBar(unsigned int, double, std::basic_ostream<char, std::char_traits<char> >&) 
```

此外，由于您似乎使用`genhtml`，请查看`--demangle-cpp`自动为您进行拆解的选项。

请注意，编译器为您编写的 ctor 发出两个实现，使用`--demangle-cpp`将隐藏仅在损坏的符号名称中可见的差异。要了解编译器在做什么，请查看[此处](https://stackoverflow.com/questions/6921295/dual-emission-of-constructor-symbols/6921467#6921467)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T09:44:55.373

使用`c++filt`，像这样：

```
 $c++filt -n _ZN7UtilLib11ProgressBarC2EjdRSo 
```

输出：

```
 UtilLib::ProgressBar::ProgressBar(unsigned int, double, std::basic_ostream<char, std::char_traits<char> >&) 
```

# jquery - 点击事件未触发

> ID：14891765
> 
> 赞同：0
> 
> 时间：2013-02-15T09:37:36.413
> 
> 标签：jquery, backbone.js, backbone-events

我的主干函数我想在条件下触发一个方法，该函数已经在对象中，在`events`声明中由用户单击添加，效果很好。但是根据条件，我的点击事件根本没有触发..

这是我的代码：

在视图部分：

```
 events:{
                        "click .mainMenu a":"listTrigger" // this is work on user click
                    },
        initialize:function(params){
                    _.bindAll(this);
                    var that = this;
                    this.listItems = ["projectName","assignedTo","projectName"];
                    this.classItems = ["projectName","assignedTo","sortBy"];
                    this.listCatch = [];this.boardCatch=[];
                    this.params = params,
                    this.filterState = false,
                    this.listTriggerElement = "";//i am initiating a element variable

                    for(var i=0;i<this.listItems.length; i+=1){
                        this.listCatch[i] = [];
                    }

                    this.collection = new singleton.collection;
        //          this.collection.on('reset', this.render);   
                    this.collection.on('add', this.render); 
                    this.collection.on('remove', this.render);  
                    var dataFetcher = function(){
                        that.collection.fetch({update:true,remove:true});
                        appDataFetcher = setTimeout(dataFetcher,10000);
                    };
                    var appDataFetcher = setTimeout(dataFetcher,0); 
                },
render:function(){
            this.listCollection     = this.collection;
            this.boardCollection    = this.collection;
            this.filterCollection   = this.collection;
            this.listCollect();
this.filterState != true ? this.boardViewSet() : this.listTriggerElement.trigger('click'); 
// checking by condition and triggering click.. not working
            },

    listTrigger:function(e){    //it should work by user click as well data udpate..    
                e.preventDefault();
                this.listTriggerElement = $(e.target);
                var filterKey = $(e.target).text();
                var category = $(e.target).parents('ul').prop('class');

                var collect = _.filter(this.filterCollection.models, function(model){
                    return model.get(category) === filterKey;
                });

                var newColl = new singleton.collection();
                newColl.reset(collect);

                this.boardCollection = newColl;
                this.boardViewSet();
                this.filterState = true;
            } 
```

我该如何解决这个问题..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:40:38.117

“.mainMenu a”元素是否在此视图的范围内？

如果不是，您需要将“el”对象设置为您的父容器，例如：

[http://jsfiddle.net/C9wew/4347/](http://jsfiddle.net/C9wew/4347/)

```
 myView = Backbone.View.extend({
     el: "#container",
    render: function(){
    },
    events: {
        "click button": "doSomething"  
    },
    doSomething: function( event ){
        console.log(345345);
    }
});

new myView(); 
```

然而，如果您没有定义“范围”（el），它将不起作用。

# javascript - 页面底部的空白

> ID：14891775
> 
> 赞同：0
> 
> 时间：2013-02-15T09:38:07.543
> 
> 标签：javascript, jquery, html, css

我遇到的问题是该网站一直在页面底部提供一个**很大的空白区域，知道为什么会这样吗？**

我在内容上有这个CSS：

```
 #content{
        width: 990px;
        margin: 0 auto;
        min-height: 100%;
        height: auto !important;
        height: 100%;
        margin: 0 auto -40px;
        position: relative;
    }

    .full-background {
        z-index: -999;
        min-height: 100%;
        min-width: 1024px;
        width: 100%;
        height: 100%;
        position: fixed;
        top: 0;
        left: 0;
    } 
```

我正在使用此脚本将背景图像适合窗口：

```
 function fittobox(){
        $('.fittobox').each(function(){
            $(this).fitToBox();
        })
    }
    $(window).bind({
        'load' : fittobox,
        'resize' : fittobox
    }) 
```

**用函数更新**

```
 // fitToBox
    jQuery.fn.fitToBox =
    function(){
        var div = this.parent();
        var img = this;
        var imAR = img.attr("height") / img.attr("width");
        var bgAR = div.height() / div.width();
        if(imAR >= bgAR){
            img.attr("width" , div.width());
            img.attr("height" , div.width() * imAR);
        }else{
            img.attr("height" , div.height());
            img.attr("width" , div.height() / imAR);
        }
        div.css({
            "position" : "absolute",
            "overflow" : "hidden"
        });
        img.css({
            "position" : "absolute",
            "left" : (div.width() - img.attr("width"))/2,
            "top" : (div.height() - img.attr("height"))/2
        });
        img.fadeIn();
    }; 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:46:24.313

如果您删除 body height:100% 并设置 #footer position:absolute ，则不会有间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T17:25:44.720

如果您要做的只是为背景制作全尺寸、可缩放的图像，请尝试使用以下代码。这是使用 CSS3 标准，它稍微优雅一些​​。然后，您可以使用 JavaScript 使其淡化等。但这基本上会为您的内容提供背景图像，它不会重复，它垂直和水平居中，以及固定在窗口中。背景尺寸**封面**将使这一切都可扩展/响应屏幕尺寸。

```
#content{
background: url(img/yourbackgroundimage.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
} 
```

在 ASPx 中使用 DropDownList 时，我也遇到了类似的问题。在具有隐藏溢出和最大高度的容器内的 DropDownList 上使用 position:relative 为我解决了这个问题。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:05:28.677

真的很好的照片顺便说一句:)

问题是绝对位置应用（由 jquery 可能因为它不在 css 中？）到全背景 div。您将其设置为绝对位置，位置为前 0。如果我在全背景 div 上禁用绝对位置，则间隙消失。

# android - 画廊图像从 android 画廊的中心开始

> ID：14891776
> 
> 赞同：0
> 
> 时间：2013-02-15T09:38:11.650
> 
> 标签：android, android-layout, android-relativelayout

![在此处输入图像描述](../Images/e5f5b9685c8733c97e5306f618b8b711.png)

我在两个按钮之间有一个画廊，如下面的 xml 文件所示。在图库中，图像从中心添加。

```
<RelativeLayout
      android:layout_height="80dp"
      android:layout_width="fill_parent"
      android:id="@+id/gal"
      android:layout_alignParentBottom="true"
      android:background="@drawable/backgroundblackwhite">
       <Button android:layout_height="wrap_content"
           android:layout_width="wrap_content"
           android:background="@drawable/backward"
           android:layout_alignParentLeft="true"/>
       <Button android:layout_height="wrap_content"
           android:layout_width="wrap_content"
           android:background="@drawable/forward"
           android:layout_alignParentRight="true"/>
      <Gallery 
          android:layout_height="100dp"
          android:layout_width="fill_parent"
          android:layout_alignParentBottom="true"
          android:id="@+id/gallary"
          android:layout_marginLeft="100dp"
          android:layout_marginRight="100dp"
          android:spacing="5dp"
          android:layout_marginBottom="10dp"
          android:background="@drawable/greypattren"/>  
   </RelativeLayout>

I want the images to start from Left of my Gallery. I used the below code to set the gallery images to start from the left of gallery view. 
```

DisplayMetrics 指标 = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics);

```
 Gallery g = (Gallery) findViewById(R.id.gallery);

            // set gallery to left side
            MarginLayoutParams mlp = (MarginLayoutParams) g.getLayoutParams();
            mlp.setMargins(-(metrics.widthPixels / 2 + (imageWidth/2)), mlp.topMargin,
                        mlp.rightMargin, mlp.bottomMargin); 
```

但是，我的画廊将走向最左边，即把我的按钮隐藏在左边（我应该用它来滚动画廊）

我正在发布这两个图像的屏幕截图，1）我想要的图库视图，并且我希望从屏幕左侧添加图像。2）使用指标添加上述代码（设置边距）后更改图库。

我需要更改 xml 或代码中的任何内容吗？

请帮助提前谢谢

![在此处输入图像描述](../Images/1c845a68bdb3374c618552a87566663b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:35:12.493

代替

```
 MarginLayoutParams mlp = (MarginLayoutParams) g.getLayoutParams();
 mlp.setMargins(-(metrics.widthPixels / 2 + (imageWidth/2)), mlp.topMargin,
 mlp.rightMargin, mlp.bottomMargin); 
```

至

```
mlp.setMargins((int) -(metrics.widthPixels/2.5), mlp.topMargin, mlp.rightMargin,                    mlp.bottomMargin); 
```

# python - Python，从另一个类调用一个类函数

> ID：14891782
> 
> 赞同：1
> 
> 时间：2013-02-15T09:38:23.977
> 
> 标签：python, class, call, twisted

任何人都可以帮我（菜鸟）在**类进程中**从类**BroadcastServerFactory调用****广播函数**，按照附加的代码

 ****我尝试了很多从另一个类调用函数的方法，但没有解决方案

```
import time, sys
from apscheduler.scheduler import Scheduler
import threading
import socket
from twisted.internet import reactor
from twisted.python import log
from twisted.web.server import Site
from twisted.web.static import File

from autobahn.websocket import WebSocketServerFactory, \
                               WebSocketServerProtocol, \
                               listenWS

class process(threading.Thread):
    def __init__(self, buffer3):
        threading.Thread.__init__(self)
        self.setDaemon(True)
        self.buffer3 = buffer3

    def run(self):
        factory.broadcast("I don't know what I'm doing!")

class BroadcastServerProtocol(WebSocketServerProtocol):

   def onOpen(self):
      self.factory.register(self)

   def onMessage(self, msg, binary):
      if not binary:
         self.factory.broadcast("'%s' from %s" % (msg, self.peerstr))

   def connectionLost(self, reason):
      WebSocketServerProtocol.connectionLost(self, reason)
      self.factory.unregister(self)

class BroadcastServerFactory(WebSocketServerFactory):
   """
   Simple broadcast server broadcasting any message it receives to all
   currently connected clients.
   """

   def __init__(self, url, debug = False, debugCodePaths = False):
      WebSocketServerFactory.__init__(self, url, debug = debug, debugCodePaths = debugCodePaths)
      self.clients = []
      self.tickcount = 0
      self.tick()

   def tick(self):
      self.tickcount += 1
      self.broadcast("'tick %d' from server" % self.tickcount)
      reactor.callLater(1, self.tick)

   def register(self, client):
      if not client in self.clients:
         print "registered client " + client.peerstr
         self.clients.append(client)

   def unregister(self, client):
      if client in self.clients:
         print "unregistered client " + client.peerstr
         self.clients.remove(client)

   def broadcast(self, msg):
      print "broadcasting message '%s' .." % msg
      for c in self.clients:
         c.sendMessage(msg)
         print "message sent to " + c.peerstr

class BroadcastPreparedServerFactory(BroadcastServerFactory):
   """
   Functionally same as above, but optimized broadcast using
   prepareMessage and sendPreparedMessage.
   """

   def broadcast(self, msg):
      print "broadcasting prepared message '%s' .." % msg
      preparedMsg = self.prepareMessage(msg)
      for c in self.clients:
         c.sendPreparedMessage(preparedMsg)
         print "prepared message sent to " + c.peerstr

def testing():
    buffer2 - "hello"
    myDisplay = process(buffer2)
    myDisplay.start()

if __name__ == '__main__':

   if len(sys.argv) > 1 and sys.argv[1] == 'debug':
      log.startLogging(sys.stdout)
      debug = True
   else:
      debug = False
   level_scheduler = Scheduler()
   level_scheduler.add_interval_job(testing, seconds=5)
   level_scheduler.start()
   #ServerFactory = BroadcastServerFactory
   ServerFactory = BroadcastPreparedServerFactory

   factory = ServerFactory("ws://localhost:9000",
                           debug = debug,
                           debugCodePaths = debug)

   factory.protocol = BroadcastServerProtocol
   factory.setProtocolOptions(allowHixie76 = True)
   listenWS(factory)

   webdir = File(".")
   web = Site(webdir)
   reactor.listenTCP(8080, web)

   reactor.run() 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:11:14.797

将要调用的类实例传递给在创建`BroadcastServerFactory`时调用它的类实例`process`

```
class process(threading.Thread):
    def __init__(self, buffer3m, broadcast_server_factory):
        threading.Thread.__init__(self)
        self.setDaemon(True)
        self.buffer3 = buffer3

        self.factory = broadcast_server_factory

    def run(self):
        self.factory.broadcast("I don't know what I'm doing!") 
```

然后调用它（它是`self.factory`在`run`语句中分配的。我看不到你在哪里创建一个`process`类，`__main__`但它会用类似的东西创建

```
 p = process(buffer, factory) 
```

另外：使用大写字母作为类名在python中被认为是好的形式`process -> Process`****

# parsing - 解析时如何修改Dijit模板化小部件dom结构？

> ID：14891784
> 
> 赞同：1
> 
> 时间：2013-02-15T09:38:35.750
> 
> 标签：parsing, dom, widget, dojo

我正在创建一个在 Html 中定义的 Dijit 模板化自定义小部件，如下所示：

```
<div data-dojo-type="widgets/Test">Bla bla bla</div> 
```

这被替换为模板。出于本示例的目的，假设它是一个简单的 div：

```
<div></div> 
```

现在我有一个问题。我似乎找不到在小部件中获取此“Bla bla bla”（换句话说，初始的 innerHTML）的方法，我需要它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:26:59.863

如果您希望在解析小部件时修改小部件的模板，您可以覆盖小部件的*markupFactory*函数。您可以在 CustomWidget.js 文件中执行此操作，如下所示：

```
var CustomWidget = declare('path/to/CustomWidget', [], {
   // Widget code here.
});

CustomWidget.markupFactory = function(props, node, clazz) {

  // Modify the props defined in data-dojo-props.
  // Modify the node that your widget is declared in.

  // Don't forget to actually return the instance of your custom Widget!
  return new clazz(props, node);  
} 
```

# java - 使多个 IDE 的代码格式化程序产生相同的结果

> ID：14891789
> 
> 赞同：2
> 
> 时间：2013-02-15T09:38:55.647
> 
> 标签：java, eclipse, netbeans, intellij-idea, code-formatting

大多数 IDE 提供某种代码格式化程序，使您的源代码在按键时变得漂亮且可读。它们可以或多或少地自由配置，但是如果两个代码格式化程序对某些代码应该如何包装或缩进有不同的看法，这可能会在差异中产生不必要的插入/删除以及在合并时产生不必要的问题。

是否有一种已知的方式，例如某些记录的配置设置，它导致 Eclipse、Netbeans 和 IntelliJ IDEA 的代码格式化程序在某些 java 代码上产生相同的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T09:44:28.883

有一个用于 maven 的插件，它将检查代码的样式，以确保提交给 SCM 的任何代码都符合指定的样式：[http](http://maven.apache.org/plugins/maven-checkstyle-plugin/) ://maven.apache.org/plugins/maven-checkstyle-plugin/ 。我不确定各个 IDE 中的样式设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:15:20.577

IntelliJ 有一个[插件](http://plugins.jetbrains.com/plugin/?id=6546)可以导入 eclipse 代码格式化设置：

# c# - 在 Asp.net WebControls、UserControls、Controls 上覆盖 Render 方法时的最佳实践

> ID：14891796
> 
> 赞同：5
> 
> 时间：2013-02-15T09:39:11.570
> 
> 标签：c#, asp.net, coding-style, overriding, web-controls

创建自定义`WebControl`, `UserControl`,`Control`并且需要覆盖各种 Render 方法时，主要有两种方法可以完成此操作：

又快又脏：

```
public override void RenderControl(HtmlTextWriter writer)
{
    writer.Write("<div class=\"{0}\"><a href={1}>{2}</a>", CssClass, "/someurl.aspx", LocalizedStrings.EditLinkText);
    base.RenderControl(writer);
    writer.Write("</div>");
} 
```

又长又干净：

```
public override void RenderControl(HtmlTextWriter writer)
{
    writer.WriteBeginTag(HtmlTextWriterTag.Div.ToString());
    writer.WriteAttribute(HtmlTextWriterAttribute.Class.ToString(), CssClass);
    writer.Write(HtmlTextWriter.TagRightChar);
    var link = new HtmlAnchor();
    link.HRef = "/someurl.aspx";
    link.Title = LocalizedStrings.EditLinkTitle;
    link.InnerText = LocalizedStrings.EditLinkText; ;
    link.Attributes.Add(HtmlTextWriterAttribute.Class.ToString(), "someclass");
    link.RenderControl(writer);
    base.RenderControl(writer);
    writer.WriteEndTag(HtmlTextWriterTag.Div.ToString());
} 
```

我想知道第二种方法是否值得。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T21:20:09.303

作为 Clean Code 的粉丝，我会选择第一种方法。即使第二种方法更“按部就班”，它也缺乏第一种方法的清晰性。

源代码应该始终以清晰的方式传达意图（嗯，它也应该起作用），所以在证明无效之前，我会使用第一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T17:17:05.203

我同意在这种情况下，第一种方法更干净，因此更适合简单的情况，但它确实传达了更多让输出正确的责任。例如，如果您必须使用链接目标 URL 的参数值而不是字符串文字，则需要确保在编写字符串时正确编码（转义字符等），而`HtmlAnchor`该类将处理你自动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-25T21:45:34.183

当我开发 Web 控件时，我曾经问过自己这个问题。为了解决这个问题，我反编译了一个[Telerik](http://www.telerik.com)库，然后我看到了它们是如何实现 Web 控件的。他们开发了许多组件并使用第二个近似值。

在我看来是最好的选择，因为如果控件很复杂，您的代码就会变成很多 string.format 或类似的东西，并且可能难以理解和修改。当然，第二个选项也可能不清楚，但使用很少的实用方法可以创建高度可维护的控件。

# iphone - 我们如何在小 UIImageview 上设置大 UIImage

> ID：14891801
> 
> 赞同：2
> 
> 时间：2013-02-15T09:39:17.990
> 
> 标签：iphone

我正在使用尺寸为 320X320 的 imagview 来显示大图像（350 X 783）。

将大图像放入图像视图时，图像看起来被挤压，压缩的东西不像质量。

我的问题是，如何将大图像制作成与原始图像一样质量的小图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T09:43:36.273

您可以将图像视图设置为适当的内容模式，就像这样

```
 imageView.contentMode = UIViewContentModeScaleAspectFit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:02:08.187

```
-(UIImage*)scaleToSize:(CGSize)size {
    // Create a bitmap graphics context
    // This will also set it as the current context
    UIGraphicsBeginImageContext(size);
    // Draw the scaled image in the current context
    [self drawInRect:CGRectMake(0, 0, size.width, size.height)];
    // Create a new image from current context
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();
    // Pop the current context from the stack
    UIGraphicsEndImageContext();
    // Return our new scaled image
    return scaledImage;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:54:58.253

你可以这样做，

```
 UIImage* sourceImage = "yourImage";
    CGSize newSize=CGSizeMake(80,80);
    UIGraphicsBeginImageContext( newSize );
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    yourImageView.image=newImage; 
```

# php - PHP展平具有重复值的数组

> ID：14891804
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:39:28.067
> 
> 标签：php, arrays, multidimensional-array

我正在尝试展平一个数组，以便删除重复项并保留唯一值。例如：

```
$places = array( 
   array("United Kingdom","London","Camden","1"), 
   array("United Kingdom","London","Camden","5"),
   array("United Kingdom","London","Camden","23"),
   array("United Kingdom","London","Camden","71") 
); 
```

会成为：

```
$places = array("United Kingdom","London","Camden","1,5,23,71"); 
```

或者

```
$places = array('Country' => 'United Kingdom',
                'County' => 'London',
                'City' => 'Camden',
                'Codes' => array(1,5,23,71)
          ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:45:10.770

由于数组项中的所有值都是字符串，为了方便起见，您可以将它们用作数组键的一部分。所以这是一个可能的解决方案：

```
$temp = array();
foreach($places as $items) {
    $id = array_pop($items);
    $key = serialize($items);
    $temp[$key][] = $id;
}

$result = array();
foreach($temp as $k => $ids) {
    $result[] = array_merge(unserialize($k), array($ids));
} 
```

它确实有利于方便而不是效率，但它很短。

**[看到它在行动](http://ideone.com/4BhaVe)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:42:13.807

分三步：

*   首先通过索引收集信息

*   然后`array_unique`用于唯一值

*   最后加入大一中的三个阵列。

**代码**

```
$places = array( 
   array("United Kingdom","London","Camden","1"), 
   array("United Kingdom","London","Camden","5"),
   array("United Kingdom","London","Camden","23"),
   array("United Kingdom","London","Camden","71") 
);

foreach ($places as $p) {
   for ($i=0; $i<count($p); $i++) {
        $t[$i][]=$p[$i];  
    }
}

for ($i=0; $i<count($t); $i++) {
    $new[$i]= implode(",", array_unique($t[$i]));
}

$result=array_merge($new); 
```

**例子**

```
print_r($result);

Array ( [0] => United Kingdom [1] => London [2] => Camden [3] => 1,5,23,71 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:43:27.620

使用 array_unique() 例如：

```
 $places = array( 
 array("United Kingdom","London","Camden","1"), 
 array("United Kingdom","London","Camden","5"),
 array("United Kingdom","London","Camden","23"),
 array("United Kingdom","London","Camden","71") 
 );

echo "<pre>";
print_r(array_unique($places));

o/p

Array
(
   [0] => Array
    (
        [0] => United Kingdom
        [1] => London
        [2] => Camden
        [3] => 1
    )
) 
```

希望会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:56:34.853

```
$places = array( 
   array("United Kingdom","London","Camden","1"), 
   array("United Kingdom","London","Camden","5"),
   array("United Kingdom","London","Camden","23"),
   array("United Kingdom","London","Camden","71") 
);

$result = array();
foreach($places as $val){
   $result['Country'][$val[0]]  = $val[0];
   $result['County'][$val[1]]  = $val[1];
   $result['City'][$val[2]]  = $val[2];
   $result['Codes'][$val[3]]  = $val[3];
}
$final   = array();
foreach($result as $key=>$value){
    $final[$key]  = implode(",",$value);
}

echo "<pre>";
print_r($final); 
```

输出 ：

```
Array
(
    [Country] => United Kingdom
    [County] => London
    [City] => Camden
    [Codes] => 1,5,23,71
) 
```

# jquery-easyui - 在组合框更改-easyui上设置文本字段的值

> ID：14891810
> 
> 赞同：2
> 
> 时间：2013-02-15T09:39:50.633
> 
> 标签：jquery-easyui

下面是我的行的一部分。更改组合框值时，我需要更改 BudgetLineItemCode 字段的值。

```
{ title: 'Index', field: 'RootLevel', width: 50, editor: { 'type': 'validatebox', 'options': { required: true}} },
            { field: 'PHeading', title: 'Heading', width: 240,
                formatter: function (value) {
                    for (var i = 0; i < CItems.length; i++) {

                        if (CItems[i].heading.toLowerCase() == value.toLowerCase()) {
                            return CItems[i].heading;
                    }
                    return value;
                },
                editor: {
                    type: 'combobox',
                    options: {
                        valueField: 'heading',
                        textField: 'heading',
                        data: CItems,
                        required: true
                        onSelect: function (record) {
                        var selrow = $('#trgrid').treegrid('getSelected');
                        var rowIndex = $('#trgrid').treegrid('find',row.BudgetDetailID)
                        var editors =$('#trgrid').treegrid('getEditors',selrow.BudgetDetailID);

                     var codeEditor = editors[2];

                     $(codeEditor.target).text('setValue', 'newval');

                    }
                }
            }{ title: 'Code', field: 'BudgetLineItemCode', width: 50, editor: { 'type': 'text'} } 
```

另外，还有一个问题。组合框没有 onChange 事件。我们有什么办法可以克服这个问题。我的意思是，当用户在组合框中键入时，我可能想检查代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:48:54.433

第一部分你可以做

```
$(codeEditor.target).val('newval'); 
```

因为 validatebox 的设置器是 .val()，

[文档在这里](http://jeasyui.com/documentation/index.php#)..

对于第二个easyui组合框，默认情况下会这样做..或者你可以使用`keyhandler`

```
editor: {
                type: 'combobox',
                options: {
                    valueField: 'heading',
                    textField: 'heading',
                    data: CItems,
                    required: true,
                    keyHandler: {
                    up: function(){},
                    down: function(){},
                    enter: function(){},
                    query: function(q){ console.log(q)} //<----here
                    },
                    onSelect: function (record) {
                    var selrow = $('#trgrid').treegrid('getSelected');
                    var rowIndex = $('#trgrid').treegrid('find',row.BudgetDetailID)
                    var editors =$('#trgrid').treegrid('getEditors',selrow.BudgetDetailID);

                 var codeEditor = editors[2];

                 $(codeEditor.target).text('setValue', 'newval');

                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T06:02:31.620

**代码：**

```
 onSelect: function(rec){
           var row = $('#tblCoursefaculty').datagrid('getSelected');
           var rowIndex = $('#tblCoursefaculty').datagrid('getRowIndex', row)
          var editors = $('#tblCoursefaculty').datagrid('getEditors', rowIndex);
              var ed_fc_co_section = editors[8];
                       $(ed_fc_co_section.target).val(rec.co_section);
                       var ed_fc_co_course_cr = editors[9];
                       $(ed_fc_co_course_cr.target).val(rec.co_course_cr);                              }                                                                      
 }               }">Course</th>
<th data-options="field:'fc_co_section',width:50,align:'left',editor:'text'">Section</th>
<th data-options="field:'fc_co_course_cr',width:50,align:'left',editor:'text'">Credit Hour</th> 
```

# ios - GPUImage 双通滤波器 - 第二个片段着色器永远不会运行？

> ID：14891812
> 
> 赞同：2
> 
> 时间：2013-02-15T09:39:53.843
> 
> 标签：ios, opengl-es, glsl, gpuimage

我的印象（[这个问题](https://stackoverflow.com/questions/14713645/what-does-twopassfilter-gpuimage-actually-do)的答案似乎证实了这一点）我可以从 GPUImageTwoPassFilter 子类化以有效地在图像上连续运行两个片段着色器，但将所有代码等限制在一个类中。然而，在我的实验中，似乎没有编译过第二个片段着色器，更不用说执行了。下面的示例可以毫无怨言地构建和运行。生成的图像看起来就像只有第一个片段着色器在单着色器类中运行一样。

这里可能出了什么问题？我可以在 GPUImage 代码库中找到的所有示例都没有帮助，即子类 GPUImageTwoPassFilter 只是对每个通道使用相同的片段着色器程序（如在 GPUImageGaussianBlurFilter 中）。

```
#import "BFTwoPassTest.h"

NSString *const kBFTwoPassTestFirstFragmentShaderString = SHADER_STRING
(
 varying highp vec2 textureCoordinate;
 uniform sampler2D inputImageTexture;

 void main()
 {
     lowp vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
     gl_FragColor = vec4(1.0, textureColor.g, textureColor.b, 1.0);
 }
 );

NSString *const kBFTwoPassTestSecondFragmentShaderString = SHADER_STRING
(
 varying highp vec2 textureCoordinate;
 uniform sampler2D inputImageTexture;

 void main()
 {
     This should be an obvious syntax error.
 }
 );

@implementation BFTwoPassTest

- (id)init {
    self = [self initWithFirstStageFragmentShaderFromString:kBFTwoPassTestFirstFragmentShaderString secondStageFragmentShaderFromString:kBFTwoPassTestSecondFragmentShaderString];
    if (self) {

    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T21:50:14.850

糟糕，GPUImageTwoPassFilter.m 的第 55 行有一个错误。以下行：

```
if (!(self = [self initWithFirstStageVertexShaderFromString:kGPUImageVertexShaderString firstStageFragmentShaderFromString:firstStageFragmentShaderString secondStageVertexShaderFromString:kGPUImageVertexShaderString secondStageFragmentShaderFromString:firstStageFragmentShaderString])) 
```

本来应该

```
if (!(self = [self initWithFirstStageVertexShaderFromString:kGPUImageVertexShaderString firstStageFragmentShaderFromString:firstStageFragmentShaderString secondStageVertexShaderFromString:kGPUImageVertexShaderString secondStageFragmentShaderFromString:secondStageFragmentShaderString])) 
```

感谢您指出这一点，现在应该在存储库中修复。但是，将来我是否可以建议将此类特定框架问题发布到[项目的 GitHub 问题页面](https://github.com/BradLarson/GPUImage/issues)而不是此处？

# c# - c#中的串行通信

> ID：14891819
> 
> 赞同：0
> 
> 时间：2013-02-15T09:40:19.483
> 
> 标签：c#

我用 ComboBox、TextBox 和两个按钮制作了一个简单的 Windows 窗体，以便用我的硬件设置串行协议。

但是，每当我发送一些东西时，我都会得到硬件的回复，但 C# 不会显示它。相反，它给出了一个异常，说明操作已超时。我什至用示波器检查我是否收到了一些东西，它是肯定的。但是 C# 并没有像前面所说的那样显示代码。

我在下面附上我的代码。欢迎任何帮助。提前致谢。

```
public partial class Form3 : Form
{
    string buffer;
    public SerialPort myComPort = new SerialPort();
    delegate void setTextCallback(string text);

    public Form3()
    {
        InitializeComponent();
    }

    private void Form3_Load(object sender, EventArgs e)
    {
        try
        {
            ManagementObjectSearcher searcher =
                new ManagementObjectSearcher("root\\CIMV2",
                "SELECT * FROM Win32_PnPEntity");

            foreach (ManagementObject queryObj in searcher.Get())
            {
                if (queryObj["Caption"].ToString().Contains("(COM"))
                {

                    comboBox1.Items.Add(queryObj["Caption"]);
                }
            }
            comboBox1.Text = comboBox1.Items[0].ToString();
        }
        catch (ManagementException ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void setText(string text)
    {
        if (textBox1.InvokeRequired)
        {
            setTextCallback tcb = new setTextCallback(setText);
            this.Invoke(tcb, new object[] { text });
        }
        else
        {
            textBox1.Text = text;
        }
    }

    void myComPort_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            string myString = myComPort.ReadLine();
            setText(myString);
        }
        catch (System.Exception ex)
        {
            MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Warning);
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        myComPort.Close();

          //  button1.Enabled = false;
            string name = comboBox1.Text;
            string[] words = name.Split('(', ')');
            myComPort.PortName = words[1];
            myComPort.ReadTimeout = 5000;
           // myComPort.WriteTimeout = 500;
            myComPort.BaudRate = 9600;
            myComPort.DataBits = 8;
            myComPort.StopBits = StopBits.One;
            myComPort.Parity = Parity.None;
            myComPort.DataReceived += new SerialDataReceivedEventHandler(myComPort_DataReceived);

            myComPort.Open();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        myComPort.WriteLine("?GV1\r");   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:15:12.147

> ## [它说](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)
> 
> ... DataReceived 事件不保证为收到的每个字节引发...

尝试类似：

```
 private static void DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        // prevent error with closed port to appears
        if (!_port.IsOpen)
            return;
        // read data
        if (_port.BytesToRead >= 1)
        {
            // ...
            // read data into a buffer _port.ReadByte()

            DataReceived(sender, e);
        }

        // ...
        // if buffer contains data, process them
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:18:19.163

看看这个网址：

[http://csharp.simpleserial.com/](http://csharp.simpleserial.com/)

而这个 WMI 的网址：

[http://www.codeproject.com/Articles/32330/A-Useful-WMI-Tool-How-To-Find-USB-to-Serial-Adapto](http://www.codeproject.com/Articles/32330/A-Useful-WMI-Tool-How-To-Find-USB-to-Serial-Adapto)

# sql-server-2008 - 如何在 SQL Server 中获取特定日期的任意三行

> ID：14891820
> 
> 赞同：2
> 
> 时间：2013-02-15T09:40:20.863
> 
> 标签：sql-server-2008, sql-server-2005

我陷入了一个 sql 查询。

我的表格格式如下：

```
Acct#     AdmitDate                  DOS                    ChargeAmount
12366 2011-12-07 00:00:00.000 2011-12-15 00:00:00.000 25.00
12366 2011-12-07 00:00:00.000 2011-12-16 00:00:00.000 30.00
12366 2011-12-07 00:00:00.000 2011-12-17 00:00:00.000 55.00
12366 2011-12-07 00:00:00.000 2011-12-18 00:00:00.000 48.00
12366 2011-12-07 00:00:00.000 2011-12-19 00:00:00.000 25.00
12366 2012-01-08 00:00:00.000 2012-01-08 00:00:00.000 58.00
12366 2012-01-08 00:00:00.000 2012-01-09 00:00:00.000 46.00
12366 2012-01-08 00:00:00.000 2012-01-10 00:00:00.000 90.00
12366 2012-01-08 00:00:00.000 2012-01-11 00:00:00.000 52.00
12366 2012-01-08 00:00:00.000 2012-01-12 00:00:00.000 95.00
12366 2012-01-08 00:00:00.000 2012-01-13 00:00:00.000 53.20

```

我只想要一个Admit **Date**和**ChargeAmount总和的前 3 个****DOS**。所有其他 DOS 都应该被忽略。我不知道该怎么做。我想要以下所需的输出。

 ****```
Acct#    AdmitDate                  ChargeAmount
12366 2011-12-07 00:00:00.000 128.00
12366 2012-01-08 00:00:00.000 200.00

```

只有 2011-12-17 到 2011-12-19 的录取日期 2011-12-07 需要求和，其他录取日期也一样。如果您有任何 sql 查询，请与我分享。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:42:33.023

尝试：

```
SELECT TOP 3 Acct, AdmitDate, SUM(ChargeAmount)
FROM YourTable
GROUP BY Acct, AdmitDate 
```

**编辑**

```
SELECT Acct, AdmitDate, SUM(ChargeAmount)
, RANK() OVER (PARTITION BY AdmitDate ORDER BY AdmitDate DESC)
FROM YourTable
GROUP BY Acct, AdmitDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:00:23.573

```
选择
帐户#,
录取日期，
sum(ChargeAmount) ChargeAmount
从
（选择
帐户#,
录取日期，
row_number() over(按 DOS desc 的 AdmitDate 顺序分区) RowNo,
收费金额
从表名
其中Acct# = @AcctNumber
) 作为 t

其中（行号 = 1 或行号 = 2 或行号 = 3）

按Acct#、AdmitDate分组

```

我找到了查询。这个查询对我来说很好。感谢您的努力。****

# tridion - 从 Tridion 5.3 将内容导入 Tridion 2011

> ID：14891825
> 
> 赞同：0
> 
> 时间：2013-02-15T09:40:31.600
> 
> 标签：tridion, tridion-2011

是否可以从 Tridion 5.3 导出内容并将其导入 Tridion 2011 sp1？如果是的话怎么办？我们在 Tridion 2011 SP1 服务器上安装了 SDL Content Porter 2009 SP1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:57:16.107

所以情况是：

*   您有一个 Tridion 2011 安装，其中包含您想要保留的一些内容的数据库

*   您有一个 Tridion 5.3 安装，其中包含您希望移植到 2011 实例的一些内容

一种可能的方法是：

*   使用标准升级工具将 5.3 数据库升级到 2011 并将其链接到您的 Tridion 2011 实例

*   将您的 2011 实例链接到此数据库（而不是您当前的 2011 数据库）

*   使用 Content Porter 导出您需要的项目

*   切换回原来的 2011 db

*   使用 Content Porter 再次导入项目

# java - 如何单击列表 selenium2 中的链接

> ID：14891829
> 
> 赞同：0
> 
> 时间：2013-02-15T09:40:48.443
> 
> 标签：java, webdriver, html-lists, selenium-webdriver

我正在使用 Selenium 2，我想单击 Name3 的“邀请”链接。我怎样才能做到这一点？

这是html代码：

```
<ul>
    <li>
        <label for="511565484">
        <img src="pic1">Name1</label>
        <a class="button_green sendInvite" href="javascript:;" title="Invite">Invite</a>
    </li>

    <li>
        <label for="535963597">
        <img src="pic2">Name2</label>
        <a class="button_green sendInvite" href="javascript:;" title="Invite">Invite</a>
    </li>

    <li>
        <label for="561708219">
        <img src="pic3">Name3</label>
        <a class="button_green sendInvite" href="javascript:;" title="Invite">Invite</a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:51:32.350

似乎只能使用 XPath 完成：

```
//label[text()='Name3']/following-sibling::a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T22:33:51.687

element2 = driver.findElement(By.xpath("//img[()text='Name3']/a")); element2.click();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T23:04:03.960

如果 XPATH 对你来说不是最有用的东西，你总是可以做这样的事情（Webdriver 的 Ruby 实现......但都是一样的）：

```
invite_links = driver.find_elements(:class_name, "sendInvite") 
```

邀请链接现在包含所有匹配的数组，因此您的下一步非常简单：

```
invite_links[2].click() 
```

或者我会这样做的方式：

```
driver.find_elements(:class_name, "sendInvite")[2].click 
```

这对我来说比 XPATH 更容易阅读，因为我不经常使用它。

# asp.net-mvc - Application_Start 不响应 RegisterAllAreas()

> ID：14891830
> 
> 赞同：3
> 
> 时间：2013-02-15T09:40:49.097
> 
> 标签：asp.net-mvc, asp.net-mvc-4, application-start

我是 MVC 应用程序的新手，请帮助我。

我在 Windows 7 电脑上使用 Framework 4.0 在 Visual Studio 2012 上有一个应用程序，我正在 IIS Express 中进行调试。

开始调试，我的应用程序没有响应：在文件中启动后`Application_Start`，`Global.asax`执行没有继续，浏览器没有从服务器（即 my `localhost`）获得任何答案或错误消息。

执行时`Application_Start`运行到指令`AreaRegistration.RegisterAllAreas()`，不再运行。调试不会停止，但也不会转到以下指令：

```
Sub Application_Start()
    Try
        RouteTable.Routes.MapHubs()             ' regularly executed
        AreaRegistration.RegisterAllAreas()     ' Break point: goes here and no more
        .............
    Catch ex As Exception
        Dim errorString As String = ex.Message  ' never goes here
    End Try
End Sub 
```

我注册的地方真的很少。有人可以帮我吗？提前致谢！

费德里科

**PS.：我解决了**，但我仍然无法理解我的错误原因。

`RouteTable.Routes.MapHubs()`我只是在之后立即写了指令`AreaRegistration.RegisterAllAreas()`。现在我的代码是：

```
Sub Application_Start()
    Try
        AreaRegistration.RegisterAllAreas()
        RouteTable.Routes.MapHubs()
        ..........
    Catch ex As Exception
        Dim errorString As String = ex.Message
    End Try
End Sub 
```

它有效。

尽管如此，我在使用 Hub for SignalR 时遇到很多问题，类似于[这个](https://stackoverflow.com/questions/11179644/signalr-connection-is-undefined)（但所有建议的解决方案都不适合我）。我是否`MapHubs`总是作为第一条指令执行`Application_Start`？谢谢！

费德里科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T17:41:47.417

据我所知，在注册其他路线之前，您必须先使用 MapHubs。

至于debug stop没有被命中，可能是因为你一般不能在Application_Start里面debug stop。[更多信息在这里](https://stackoverflow.com/questions/641148/application-start-not-firing)

# java - 对列表中的对象进行排名

> ID：14891839
> 
> 赞同：1
> 
> 时间：2013-02-15T09:41:19.587
> 
> 标签：java, list, collections, ranking

我有一个`List`对象，其中每个对象都有很多票，如下所示：

```
Object  Votes 
o1      5 
o2      4 
o3      3 
o4      3 
```

我想根据投票数对每个人进行排名（不仅仅是排序）并`Map`使用结果创建一个。所以结果是：

```
Object  Votes  Rank
o1      5      1
o2      4      2
o3      3      3
o4      3      3 
```

所以你可以看到 o3 和 o4 具有相同的排名，因为它们的票数相同。是否有一个快速的实现可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:43:29.513

首先 Collections.sort 列表，然后遍历列表。如果自上一个对象以来投票数发生了变化，请增加排名，如果投票数相同，则不要将对象/排名添加到您的地图中。

```
// Not tested, but it should give you the right idea.
Collections.sort(myList);  // you may need to use a comparator here if your objects don't implement Comparable
int rank = 0;
int lastVotes = -1;
for (MyObject o : list)
{
  if (o.getVotes() != lastVotes)
  {
    rank += 1;
  }
  myMap.put(o, rank);
  lastVotes = o.getVotes();
} 
```

# java - 动态空值检查

> ID：14891840
> 
> 赞同：0
> 
> 时间：2013-02-15T09:41:34.483
> 
> 标签：java

我打算在对任何对象进行一些工作之前对其进行通用动态空检查功能。

例如：

```
Class A{
 B b;

 // with getters and setters of b
}

class B{
C c;
//with getters and setters of c
}

class C{

  BigInteger d;

//with getters and setters of d
} 
```

现在，我想检查是否`objA.getB().getC().getD()`返回一些值或抛出`NullPointerException`？

通常，我的意思是我可以将任何类型的对象传递给它，例如下面的函数

```
CheckNull.checkingDynamicNull( "objA.getB().getC().getD()" ) 
```

将根据情况返回真或假。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:59:54.567

不幸的是，不可能将函数传递给 Java 中的方法（然而，Java 8 会）。此外，如果您将变量名称作为 String 传递，这将不起作用，因为接收方法无法知道什么 Object 映射到该变量（如果您忽略反射，但即使它是局部变量，您也会被搞砸）。

另一种方法是做这样的事情

```
boolean nullCheck(Object obj, String Methods) 
```

然后将字符串解析为方法并在对象上调用它们。但是，如果您有带参数的方法，那将不起作用。

简而言之：麻烦多于值得

在大多数情况下，您希望拥有这样的东西

```
if(object == null){
    //error behavior
} 
```

这假设您想要抛出某个异常，有办法在其他地方获取空对象的值，或者想要在抛出异常之前做一些事情。如果你只是想抛出一个异常（那不是 NullPointerException）

```
assert object != null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:45:43.637

那这个呢：

```
public boolean checkingDynamicNull(A objA) {
    try {
        objA.getB().getC().getD().toString();
    } catch(NullPointerException npe) {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T10:35:45.600

您可以通过使用反射来实现这一点，这是您的方法：

```
public boolean dynamicNullCheck(Object o, String path) throws SecurityException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
    Object object= o;
    for (String element : path.split("\\."))
    {
        Field field = object.getClass().getDeclaredField(element);
        field.setAccessible(true);
        Object fieldVal = field.get(object);

        if (fieldVal!=null)
        {
            field.setAccessible(true);
            object = fieldVal;
        }
        else
        {
            return true;
        }

    }
    return false;

} 
```

通过为每个对象提供根元素和路径来使用它，即`dynamicNullCheck(objA,"b.c.d")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:47:28.193

要知道语句是否会返回`null`，您必须先执行它。即使您以某种方式设法执行了在`String`您的方法中给出的语句，这也与运行它并检查结果是否为`null`. 或捕获`NullPointerException`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:50:55.620

您正在寻找即将成为 Java 8（或 9 或 10？）的一部分的东西。参照。[http://viralpatel.net/blogs/null-safe-type-java-7-nullpointerexception/](http://viralpatel.net/blogs/null-safe-type-java-7-nullpointerexception/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T10:34:16.960

通过反射，它可能是这样的：

```
nullCheck(objA, "getB", "getC", "getD" ); 
```

* * *

```
public static boolean nullCheck(Object obj, String... methods) {
    Object o = obj;
    Class<?> clazz = obj.getClass();
    Method method = null;
    try {
        for( String name : methods ) {
            method = clazz.getMethod( name, null );
            o = method.invoke( o, null );
            clazz = method.getReturnType();
        }
    } catch( NullPointerException e ) {
        System.err.println(clazz.getSimpleName()+"(null)."+method.getName());
        return false;
    } catch( NoSuchMethodException e ) {
        e.printStackTrace();
    } catch( SecurityException e ) {
        e.printStackTrace();
    } catch( IllegalAccessException e ) {
        e.printStackTrace();
    } catch( IllegalArgumentException e ) {
        e.printStackTrace();
    } catch( InvocationTargetException e ) {
        e.printStackTrace();
    }
    return true;
} 
```

* * *

```
System.out.println(nullCheck(GraphicsEnvironment.getLocalGraphicsEnvironment(), "getDefaultScreenDevice", "getDisplayMode", "toString"));
System.out.println(nullCheck(GraphicsEnvironment.getLocalGraphicsEnvironment(), "getDefaultScreenDevice", "getFullScreenWindow", "doLayout")); 
```

带来

```
true
false

'Window(null).doLayout' 
```

# c# - 实体框架包括不工作

> ID：14891845
> 
> 赞同：1
> 
> 时间：2013-02-15T09:41:46.223
> 
> 标签：c#, wpf, linq, entity-framework, datagrid

我的软件有一些问题。在我的实体设计器中，我有以下类：

**供应商**：
该类包含有关我的供应商的信息以及与我的品牌类的一对多关系。每个供应商可以拥有无​​限数量的品牌。

**Brand**
每个 Brand 都属于一个 Supplier，并且与 Product-class 具有一对多的关系。

**产品**
每个产品都属于一个品牌，与 StockInformation 是一对多的关系

**StockInformation**
此类保存有关产品是否有库存的信息。

在我的 WPF 窗口中，我有三个 DataGrid，所有数据都绑定到我的三个类。

对于 Products-datagrid，我使用以下代码检索所有产品：

```
public List<Supplier> GetSuppliers()
{
    return Container.Suppliers.Include("Brands").Include("Brands.Products").Include("Brands.Products.StockInformation").OrderBy(s => s.Name).ToList();
} 
```

另外，我有`Container.Configuration.LazyLoadingEnabled = false;`

但是，问题是我的数据网格告诉我每个品牌的第一个产品只有库存：（
我知道这是丹麦语，所以这里是翻译：
Navn = 每个产品的名称，
Listepris = 忽略这个，
Antal på lager = 当前有多少个库存，
品牌 = 品牌名称）

![在此处输入图像描述](../Images/06ac7a007edb45b1baf8f13a002d2368.png)

我知道这是不正确的，因为我的数据库另有说明。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:22:47.563

由于网格中的每一行都代表一个`Product`，我将在那里开始查询：

```
Container.Products.Include("Brand.Supplier").Include("StockInformation")
    .OrderB‌​y(s => s.Name).ToList() 
```

这当然会返回一个`List<Product>`.

显然，看到你的评论，它也解决了这个问题:)。

# objective-c - 重新加载没有动画的一行 (reloadRowsAtIndexPaths)。里面的图片

> ID：14891846
> 
> 赞同：1
> 
> 时间：2013-02-15T09:41:46.540
> 
> 标签：objective-c, uitableview

在我的示例中，我在开始时有 2 个部分和 1 行。如果有人单击某个部分的第一行，我会插入该部分的所有其他行：

```
[tableView insertRowsAtIndexPaths:indexArray withRowAnimation:UITableViewRowAnimationTop]; 
```

这工作正常，但我需要更新第一行的背景。这也有效，但我需要重新布局第一行。我已经尝试过 setNeedsDisplay 和 setNeedsLayout，但它不起作用。reloadDate 显示正确的背景，但它破坏了滑动效果。

我知道我可以使用以下之一更新 Row：

```
[tableView reloadRowsAtIndexPaths:indexArrayReload withRowAnimation:UITableViewRowAnimationFade];
[tableView reloadRowsAtIndexPaths:indexArrayReload withRowAnimation:UITableViewRowAnimationNone]; 
```

但他们暂时改变了行的高度。我需要一个真正的褪色效果或没有动画的重新加载。

这是情况的图片：

![在此处输入图像描述](../Images/2e4c1212effe0173a70c17ee44813968.png)

编辑：我制作了一个视频：

[这说明了问题！](http://vimeo.com/59985827)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:02:01.553

这是解决方案：

```
[tableView beginUpdates];
...
[tableView endUpdates]; 
```

[我喜欢它在另一个线程。](https://stackoverflow.com/a/8655310/1862913)

# python - Flask 中的 Web API

> ID：14891848
> 
> 赞同：4
> 
> 时间：2013-02-15T09:41:52.113
> 
> 标签：python, flask

我想使用 Flask 为我的应用程序创建一个 Web API，但是在让我的 Flask 应用程序知道我的其他对象时遇到了一些问题。

*   我想使用 Flask 以便能够通过 http 请求与我的应用程序交互。所以在我的例子中，整个烧瓶应用程序**只是一个外部 API**，并且依赖于一个核心应用程序。
*   假设我的烧瓶应用程序将不得不**执行数据库调用。**
*   为了在我的应用程序中管理数据库调用，我使用了一个连接到数据库的**对象，并且****实现了某种 Queue**。
*   这意味着我在后台运行的核心应用程序**引用了我的 db 对象**，以便进行 db 调用。
*   这是通过向这个核心应用程序提供对我的队列对象的引用来完成的。
*   现在**我也希望能够使用烧瓶应用程序对数据库执行操作**。

将此 Queue 对象的引用传递给我的 Flask 应用程序的正确方法是什么？

如果我在模块级别定义我的所有对象，之后我就无法与它们交互，不是吗？

Flask 应用程序的所有示例都使用 Flask 作为其系统的核心，并在模块级别定义其应用程序中的所有内容。如何让 Flask 成为我应用程序的一部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:22:54.050

我不确定你的意思

> 如果我在模块级别定义我的所有对象，之后我就无法与它们交互，不是吗？

但是不，您不必在模块级别定义对象 - 您的`Flask`实例、蓝图和您提供的任何对象都是如此。例如，您可以创建一个创建`AppBuilder`和配置`Flask`实例的类。

对于某些交互，[上下文本地人](http://werkzeug.pocoo.org/docs/local/)也是一个非常方便的工具。

如果您可以澄清问题，我将尝试扩展我的答案。

# c# - 如何检测鼠标点击绘制的图像？

> ID：14891851
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:41:57.120
> 
> 标签：c#, winforms

我是 c# Windows 窗体应用程序开发的新手。

我创建了一个带有面板的表单，用户可以在其中绘制图像。如何检查图片是否被点击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:52:05.553

在设计器模式下，右键单击面板，转到属性。在“属性”窗口中，选择“事件”（闪电图标）。双击 Click，然后将生成以下代码：

```
private void panel1_Click(object sender, EventArgs e)
    {
        //--what to do when user clicks on panel--
        MessageBox.Show("Clicked");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T09:44:31.377

只需双击表单的图像面板（或您希望检测点击事件的任何对象），Visual Studio 就会自动生成一个`OnClick()`事件。不用说，我说的是表单设计器，而不是您在测试代码时将看到的实际表单。

或者，您可以通过对象的属性设置要实现的事件。这样你也可以实现`OnKeyDown()`或`OnFocus()`或任何其他类型的事件。

**编辑：**如果图像没有覆盖整个面板，您必须检查鼠标位置是否在图像的尺寸内。假设图像绘制在位置`(imgOriginX, imgOriginY)`并且大小为`(imgWidth, imgHeight)`：

```
// Fires, when user clicks on panel
private void panel_Click(object sender, EventArgs e)
{
    // Cast to MouseEventArgs
    MouseEventArgs mouse = (MouseEventArgs)e;

    // If mouse is within image
    if (mouse.X >= imgOriginX && mouse.Y >= imgOriginY && mouse.X < imgOriginX + imgWidth && mouse.Y < imgOriginY + imgHeight)
    {
        // do something here
    }
} 
```

# javascript - 在边界线的位置插入空格

> ID：14891854
> 
> 赞同：5
> 
> 时间：2013-02-15T09:42:05.790
> 
> 标签：javascript, jquery, css

我正在使用 css 显示一条水平线：

```
.horizontalLineBottom {
    border-bottom:solid #6E6A6B;
    border-width:1px;
} 
```

我可以在这条线上插入一个特定的位置吗？

所以

```
______________________________________________ 
```

变成

```
______________________________             ___ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:01:02.087

另一种解决方案使用`border-width`：

```
.line {
    width: 20px;
    height: 1px;
    padding: 0;
    border-width: 0 100px 0 150px;
    border-style: solid;
    border-color: red;
} 
```

[http://jsfiddle.net/dfsq/Uttxy/1/](http://jsfiddle.net/dfsq/Uttxy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:46:17.057

`:after`或`:before`伪类可以帮助你。像这样[`Fiddle`](http://jsfiddle.net/nHGJL/)：

```
div {
    width:100px;
    height:100px;
    border:1px solid #000;
    margin:50px;
    background:yellow;
    position:relative;
}
div:after {
    content: '';
    height:60px;
    width:1px;
    position:absolute;
    top:20px;
    left:-1px;
    background:yellow;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:45:29.137

没有块中的边框（只是块的边框）。

如果适合您的需要，您可以添加背景图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:47:31.027

您无法通过 CSS 直接实现这一点。我建议 2 个解决方案 1）您可以使用 _ 字符并使其看起来像一条线并在您想要的任何位置插入空格并通过 CSS 提供颜色属性。2）使用两个元素，第一个元素有一些宽度和一些边距。边距权将为您提供所需的空间

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:54:44.203

您可以在元素上使用`background`渐变：http: [//jsfiddle.net/q652t/](http://jsfiddle.net/q652t/) 然后您可以创建任意数量的元素

```
.line {
    margin: 10px;
    height: 1px;
    width: 400px;
    background:  -webkit-linear-gradient(
        left, gray 10%, white 10%, white 40%, 
        gray 40%, gray 60%, 
        white 60%, white 80%,
        red 80%, red 100%);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T09:56:31.010

您不能直接执行此操作，而是使用伪元素的一个小解决方法。诀窍是创建一个与元素下方背景颜色相同的小叠加层。

```
.verticalLineBottom { 
  position: relative; 
  border-bottom: 1px solid #6E6A6B; 
}
.verticalLineBottom:after { 
  content: ""; 
  position: absolute; 
  right: 20px; 
  bottom: -1px; 
  width: 100px; 
  height: 1px; 
  background: #fff;
} 
```

示例：http: [//jsfiddle.net/zxdS7/](http://jsfiddle.net/zxdS7/)

不幸的是，如果元素后面的背景有图案，它就不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-15T09:57:14.010

我为您创建了此代码，这伪造了您正在寻找的结果。

```
.stopped-line {
  /* basic styles here */

  width: 100px; /* this is mandatory */
  position: relative;
}
.stopped-line:before {
  position: absolute;
  bottom: 0;
  display: block;
  width: 70%; /* width in percentage of the line */
  content: " ";
  height: 1px; /* thickness of the line */
  background: #000; /* color of the line */
}
.stopped-line:after {
  position: absolute;
  bottom: 0;
  left: 80%; /* Where should the second line start? */
  display: block;
  width: 20%; /* width in percentage of the line */
  content: " ";
  height: 1px; /* thickness of the line */
  background: #000; /* color of the line */
} 
```

JSBin：[点击](http://jsbin.com/ekagef/1/edit)

# mysql - 时间戳中的夏令时

> ID：14891856
> 
> 赞同：0
> 
> 时间：2013-02-15T09:42:09.530
> 
> 标签：mysql, matlab, timestamp, dst

我正在运行一个 matlab 函数 ( `fastinsert`) 将数据插入 MySQL。全年的结果都是正确的，除了 3 月的 1 小时，在夏令时期间。事实上，我似乎无法在当天凌晨 2:00 到 3:00 之间插入数据。

例如：

```
 ts =        2006           3          26           2          30           0 
```

在 matlab 函数中查看我发现问题在于：

```
 java.sql.Timestamp(ts(1)-1900,ts(2)-1,ts(3),ts(4),ts(5),secs,nanosecs) 
```

结果是：

```
 2006-03-26 03:30:00.0 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:22:11.550

我在很多场合都遇到过存储日期时间的类似问题。将值视为派生值似乎是最有意义的。换句话说，不是存储*本地时间*，而是将值存储为**GMT**和**Time Zone**。然后在查询数据时得出适当的值。

这还有一个额外的好处，那就是可以从多个位置存储值，而不必担心以后会出现混乱。

# asp.net-mvc - ASP.net MVC 获取键在数组/列表中的实体

> ID：14891861
> 
> 赞同：0
> 
> 时间：2013-02-15T09:42:28.410
> 
> 标签：asp.net-mvc, entity-framework, list, ienumerable

我有一个名为“提交”的表（DbSet）和一个列表（整数），其中包含从提交表中选择的主键。

如何过滤 DbSet 以为整数列表中具有主键的所有提交返回 IENumerable(Of Submission)？

如果我只想要一个提交，我会执行以下操作：

```
Dim db As New MyEntities
Dim result As Submission

result = db.Submission.Find(key)
Return result 
```

我真正需要的是这样的（显然不使用下面的代码，因为它不起作用）：

```
Dim db As New MyEntities
Dim keys As List(Of Integer)
Dim results As IENumerable(Of Submission)

results = db.Submission.Find(keys)
Return results 
```

非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:48:08.423

这是 C# 语法，但是：

```
result = db.Submission.Where(s => keys.Contains(s.Id)); 
```

# java - Android AnimationDrawable 内存管理

> ID：14891864
> 
> 赞同：1
> 
> 时间：2013-02-15T09:42:47.963
> 
> 标签：java, android

我正在创建一个 android 应用程序，它为每个活动都有背景动画。我曾经`AnimationDrawable` `setBackgroundResource(anim.xml)`运行动画 xml 文件并且工作正常。问题是，当我在设备上进行测试时，有些设备会`FATAL EXEPTION`告诉 我`bitmap size exeeds VM budget(out of memory)`。

所以我上网并找到了一些解决方案，比如`animation.setCallbacks(null)`在运行动画之前执行、[缩小位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)（以编程方式）和调整可绘制对象的大小。我试过了，但很少有低堆的设备仍然给出同样的错误。

所以我想知道我做错了什么还是错过了什么？他们还有其他解决这个问题的方法吗？

```
//animation
    private void animate() {
            imgView = (ImageView)findViewById(R.id.imageView1);
            imgView.setVisibility(ImageView.VISIBLE);
            imgView.setBackgroundResource(R.drawable.level_animation);

            frameAnimation =  (AnimationDrawable) imgView.getBackground();
            if (frameAnimation.isRunning()) {
               frameAnimation.stop();
            }
            else {
               frameAnimation.stop();
               frameAnimation.start();
            }
         } 

xml
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="true" >
       <item android:drawable="@drawable/top_anim1" android:duration="200" />
       <item android:drawable="@drawable/top_anim2" android:duration="200" />
       <item android:drawable="@drawable/top_anim3" android:duration="200" />
       <item android:drawable="@drawable/top_anim4" android:duration="200" />
       <item android:drawable="@drawable/top_anim5" android:duration="200" />
</animation-list> 
```

# uri - mailto URI 的本地部分中“@”的百分比编码

> ID：14891865
> 
> 赞同：1
> 
> 时间：2013-02-15T09:42:53.190
> 
> 标签：uri, mailto

我对 mailto URI (RFC 6068 / RFC 3986) 中电子邮件地址 (RFC 5322) 的百分比编码有疑问。

电子邮件地址可能包含 - 除了其他禁止的字符 -`local-part`如果它在双引号中，则在“@”（at 字符）中。那是，

```
<"not@me"@example.org> 
```

是一个有效的地址。（请注意，我使用尖括号作为分隔符——它们不是地址的一部分。）

这是我在 RFC6068 中找到的一个示例，根据它，相应的 mailto URI 是：

```
<mailto:%22not%40me%22@example.org>. 
```

但是，查看语法规则，我不清楚是否有必要对“@”进行百分比编码，或者以下 URI 是否也有效：

```
<mailto:%22not@me%22@example.org>. 
```

那就是：哪个规则需要`local-part`转义中的“@”？是因为我对 <"> 双引号进行了百分比编码，现在规则“@ 如果出现在`local-part`" 中，则必须用双引号括起来”不再适用？

# iphone - 如何在 UIPageViewController 中的一页设置文本和另一页的图像

> ID：14891867
> 
> 赞同：3
> 
> 时间：2013-02-15T09:42:58.260
> 
> 标签：iphone, ios, objective-c, ipad, uipageviewcontroller

在我的 iPad 应用程序中。我正在研究 UIPageViewController 我想在一个页面上设置文本并在另一页上设置图像。我已经尝试了很多并用谷歌搜索，但我没有找到任何解决方案。它正在消磨我的时间，所以如果有人对此进行了研究，请指导我并发布示例代码。

我已经使用了下面链接中的代码

[http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)

这是示例代码。我使用了内容视图控制器。

我想将两个视图控制器与 UIPageViewController 一起使用

```
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation

{

if(UIInterfaceOrientationIsPortrait(orientation))

{
    //Set the array with only 1 view controller
    UIViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:currentViewController];
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    //Important- Set the doubleSided property to NO.
    self.pageViewController.doubleSided = NO;
    //Return the spine location
    return UIPageViewControllerSpineLocationMin;

}
else
{
    NSArray *viewControllers = nil;
    ContentViewController *currentViewController = [self.pageViewController.viewControllers objectAtIndex:0];

    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentViewController *)currentViewController labelContents]];

     NSUInteger currentIndex2 = [self.imagesArray2 indexOfObject:[(ContentViewController *)currentViewController imageContents]];

    if(currentIndex == 0 || currentIndex %2 == 0 || currentIndex2 == 0||currentIndex2 %2 == 0)
    {
        UIViewController *nextViewController = [self pageViewController:self.pageViewController viewControllerAfterViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:currentViewController, nextViewController, nil];
    }
    else
    {
        UIViewController *previousViewController = [self pageViewController:self.pageViewController viewControllerBeforeViewController:currentViewController];
        viewControllers = [NSArray arrayWithObjects:previousViewController, currentViewController, nil];
    }
    //Now, set the viewControllers property of UIPageViewController
    [self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:NULL];

    return UIPageViewControllerSpineLocationMid;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:10:55.570

如果我理解得很好，那么在 ContentPageView.xib 文件中添加一个 imageView 并制作一个出口。将 ImageView 和标签设置为在所需页面上隐藏或可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:15:34.720

以下步骤可能会有所帮助

1.  在 ContentViewController 中保留 UILabel 和 UIImageView
2.  在 modelArray 中添加 UIImage 或 NSString。
3.  当您创建一个新的 ContantViewController 时，使用以下方法检查模型中的对象是图像还是字符串。 `if ([myObject class] == [UIImage class])
    {
    //HERE ASSIGN IT TO UIIMAGEVIEW.image
    }
    else
    {
    //HERE ASSIGN IT TO UILABEL.text
    }` 

如果您需要更多帮助，请发布....

对不起，如果这不是你要找的......

# ms-access - 那个 Access 宏在哪里调用？

> ID：14891868
> 
> 赞同：0
> 
> 时间：2013-02-15T09:42:59.750
> 
> 标签：ms-access, macros

我必须更新一个旧的大型 Access 应用程序，其中包含很多宏。 **我想确定是否使用了宏，以及从哪里调用它。**
我找不到解决方案。我安装了 MZ 工具和 CSD 工具，但这些似乎没有帮助。我还尝试使用内置文档将表单属性打印到 PDF，但这不包括控件属性和事件，因此也没有用。
有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T23:37:22.217

考虑使用内置的依赖选项。这意味着您必须启用曲目名称自动更正。但是，很少有人意识到您可以打开跟踪，但不必打开自动更正。

结果是给定对象的依赖关系的漂亮树视图。这是一个屏幕截图：

![在此处输入图像描述](../Images/41df2144294de950e1bd197dd4b3f051.png)

请注意，您可以通过这种方式深入了解并“浏览”应用程序。和 BOTH 对象都依赖于选定的对象，或者相反——选定的对象依赖于哪些对象。

并注意单击任何对象将如何在设计视图中打开它。我希望其他开发系统也有一个令人难以置信的功能。

请注意，如果您没有打开自动更正跟踪，那么第一次这可能会花费大量时间和处理，因为所有对象及其反向引用都会发生。然而，一旦为这个惊人的特性建立了索引，那么响应时间和这个特性的使用应该几乎是即时的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:19:08.077

感谢[这个链接](http://www.utteraccess.com/forum/lofiversion/index.php/t1860151.html)，我终于为这个问题编写了自己的快速工具：

```
Sub listControlEvents()
'by Patrick Honorez - www.idevlop.com --- 15-févr-2013
'Purpose   : list buttons calling macros + macro name

    Dim f As AccessObject, frm As Form, c As Control

    For Each f In CurrentProject.AllForms
        Debug.Print f.NAME
        DoCmd.OpenForm f.NAME, acDesign, , , , acHidden
        Set frm = Forms(f.NAME)
        For Each c In frm.Controls
            If c.ControlType = acCommandButton Then
                If c.Properties("OnCLick") <> "[Event Procedure]" Then
                    Debug.Print , c.NAME,
                    Debug.Print c.Properties("OnClick")
                End If
            End If
        Next c
        DoCmd.Close acForm, f.NAME, acSaveNo
    Next f
End Sub 
```

# visual-studio - Visual Studio：将图表导出为图像？

> ID：14891869
> 
> 赞同：1
> 
> 时间：2013-02-15T09:42:59.930
> 
> 标签：visual-studio, diagram

VS中有没有办法将图表设计器画布保存为图像？（假设它比屏幕大，否则屏幕截图就可以了）

特别是，我对导出配置部分设计器的图像感兴趣： ![在此处输入图像描述](../Images/e2f3e6c23332abebf44ea9d6299df53e.png)

...但看起来它使用与实体框架设计器相同的底层框架： ![在此处输入图像描述](../Images/123e1d616cb3e949873203c8c3e7fdca.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:53:04.047

我在项目的跟踪器中提交了一个[请求。](http://csd.codeplex.com/workitem/9936)如果其他人觉得这很有用，请投票！

# regex - Grep歧义嵌套方括号

> ID：14891871
> 
> 赞同：4
> 
> 时间：2013-02-15T09:43:26.430
> 
> 标签：regex, grep

`sample.txt`包含

```
abcde
abde 
```

任何人都可以解释以下命令的输出 -

1.  `grep '[[ab]]' sample.txt` - 没有输出
2.  `grep '[ab[]]' sample.txt` - 没有输出
3.  `grep '[ab[]' sample.txt` - 输出是`abcde`,`abde`
4.  `grep '[ab]]' sample.txt` - 没有输出

是什么`[(ab)]`意思`[^(ab)]`？`[ab]`和 和一样`[^ab]`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T09:52:19.830

首先要了解的是，在字符类中，正则表达式的元字符都没有任何特殊含义。它们在字面上是匹配的。例如，an`*`将匹配 a`*`并且不意味着`0 or 1`重复。同样，`()`将匹配`(`and `)`，并且不会创建`capture group`.

现在，如果`]`在字符类中找到 a，则会自动关闭字符类，并且进一步的字符将不是该字符类的一部分。现在，让我们了解上面发生的情况：

* * *

在`1`、`2`和`4`中，您的角色类在第一次结束时结束`]`。因此，最后一个右括号 -`]`不是字符类的一部分。它必须单独匹配。因此，您的模式将匹配如下内容：

```
'[[ab]]' is same as '([|a|b)(])'  // The last `]` has to match.
'[ab[]]' is same as '(a|b|[)(])'  // Again, the last `]` has to match.
'[ab]]'  is same as '(a|b|])(])'  // Same, the last `]` has to match.
    ^
    ^---- Character class closes here. 
```

现在，由于在两个字符串中，`]`最后都没有，因此找不到匹配项。

而在第三种模式中，您的角色类仅由最后一个`]`. 因此，一切都在字符类中。

```
'[ab[]' means match string that contains 'a', or 'b', or '[' 
```

这是完全有效的并且匹配两个字符串。

* * *

> 是什么`[(ab)]`意思`[^(ab)]`？

`[(ab)]`表示匹配任何`(`, `a`, `b`, `)`. 请记住，在字符类中，正则表达式的元字符没有任何特殊含义。因此，您不能在角色类中创建组。

`[^(ab)]`意味着与 完全相反`[(ab)]`。它匹配任何不包含任何指定字符的字符串。

* * *

> `[ab]`和 和一样`[^ab]`吗？

不，这两个不包括`(`和`)`。因此它们差别不大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T10:00:53.180

我试一试：

```
grep '[[ab]]' - match string  which has one of "[,a,b" and then a "]" char followed
grep '[ab[]]' - match string  which has one of "a,b,[" and then a "]" char followed
grep '[ab[]'  - match string  which has one of "a,b,["
grep '[ab]]'  - match string  which has one of "a,b" and then a "]" char followed
grep '[(ab)]' - match string  which has one of "(,a,b,)"
grep '[^(ab)]' - match string  which doesn't contain "(,a,b" and ")"
grep '[ab]'    - match string  which contains one of "a,b"
grep '[^ab]' - match string  which doesn't contain "a" and "b" 
```

您可以`grep`在此示例中浏览这些 cmd：

```
#create a file with below lines:
abcde
abde
[abcd
abcd]
abc[]foo
abc]bar
[ab]cdef
a(b)cde 
```

你会看到差异，并用我的评论/解释来思考它。

# objective-c - 格式指定类型“无符号整数”，但参数的类型为“id”

> ID：14891880
> 
> 赞同：-1
> 
> 时间：2013-02-15T09:43:36.260
> 
> 标签：objective-c, warnings

```
NSString *val = [NSString stringWithFormat:@"%u",[settingsMgr performSelector:NSSelectorFromString([[gets objectAtIndex:indexPath.section] objectAtIndex:indexPath.row])]]; 
```

在上面的代码中，我收到一个警告 where `settingsMgr`is object class 和`gets`is `NSMutableArray`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:15:13.380

`NSMutableArray`不能保存标准类型（int、float、BOOL 等），所以它们被包装（`NSNumber`大部分）存储。尝试更改`%u`为`%@`.

# ruby-on-rails - Rails 3控制器接收空参数，但仅有时，在ajax文件上传后

> ID：14891885
> 
> 赞同：3
> 
> 时间：2013-02-15T09:44:02.253
> 
> 标签：ruby-on-rails, forms, http, coffeescript

导轨 3.2.11

我需要将一大堆大文件上传到 Web 服务。我想把文件切成小块，一一上传，然后在服务器上重新组装。

Javascript（咖啡），正在进行中，但它确实发送了块

```
class ChunkUploader
  constructor: (@file) ->
    console.debug('wooo')
    @chunkSize = 1024 * 512

  startUpload: ->
    console.debug('startUpload')
    this.postChunk(0)

  postChunk: (index) ->
    that = this
    console.debug('postChunk')
    offset = index * @chunkSize

    blob = @file.slice(offset, offset + @chunkSize)

    formData = new FormData()
    formData.append('utf8','✓')
    formData.append('authenticity_token', AUTH_TOKEN)
    formData.append('index', index)
    formData.append('offset', offset)
    formData.append('chunk_size', @chunkSize)
    formData.append('chunk', blob)

    $.ajax
      contentType: false
      processData: false
      cache: false
      url: $('#drop_zone').attr('data-action')
      type: 'POST'
      data: formData
      error: ->
        console.debug('error')
      success: ->
        if blob.size < that.chunkSize
          console.debug("I think we're done")
          return true
        else
          that.postChunk(index + 1)

# and then

form = document.getElementById 'drop_zone'
form.addEventListener 'drop', (e) ->
  e.stopPropagation()
  e.preventDefault()

  files = e.dataTransfer.files
  cu = new ChunkUploader(files[0])
  cu.startUpload()
  return false 
```

到目前为止，接受请求的控制器相当简单：

```
def create
  head params[:chunk].nil? ? :internal_server_error : :ok
end 
```

我被卡住的部分是有时它有效，有时它只是没有。Chrome 中的检查员说表单已提交，但 Rails 拒绝给我表单数据。

然后日志（本地开发环境）看起来像这样（注意在第 2 次和第 4 次请求中参数似乎不存在）：

```
17:36:53 logger.1   | Started POST "/admin/products/testproduct/downloads" for 127.0.0.1 at 2013-02-15 17:36:53 +0800
17:36:53 logger.1   | Processing by Admin::DownloadsController#create as */*
17:36:53 logger.1   |   Parameters: {"utf8"=>"✓", "authenticity_token"=>"aQCyWZo3vADr5xUBNs1ECC8/bRPXtBxPCuMArXHbJVI=", "index"=>"3", "offset"=>"1572864", "chunk_size"=>"524288", "chunk"=>#<ActionDispatch::Http::UploadedFile:0x007fbedbfc2870 @original_filename="blob", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"chunk\"; filename=\"blob\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:/var/folders/t6/wbym5ghx3r3g3ch1wgl1fg640000gn/T/RackMultipart20130215-789-2ckjj9>>, "product_id"=>"testproduct"}
17:36:53 logger.1   | Completed 200 OK in 6ms
17:36:53 logger.1   | 
17:36:53 logger.1   | 
17:36:53 logger.1   | Started POST "/admin/products/testproduct/downloads" for 127.0.0.1 at 2013-02-15 17:36:53 +0800
17:36:53 logger.1   | Processing by Admin::DownloadsController#create as */*
17:36:53 logger.1   |   Parameters: {"product_id"=>"testproduct"}
17:36:53 logger.1   | Completed 500 Internal Server Error in 6ms
17:37:04 logger.1   | 
17:37:04 logger.1   | 
17:37:04 logger.1   | Started POST "/admin/products/testproduct/downloads" for 127.0.0.1 at 2013-02-15 17:37:04 +0800
17:37:04 logger.1   | Processing by Admin::DownloadsController#create as */*
17:37:04 logger.1   |   Parameters: {"utf8"=>"✓", "authenticity_token"=>"aQCyWZo3vADr5xUBNs1ECC8/bRPXtBxPCuMArXHbJVI=", "index"=>"0", "offset"=>"0", "chunk_size"=>"524288", "chunk"=>#<ActionDispatch::Http::UploadedFile:0x007fbedbfbe9a0 @original_filename="blob", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"chunk\"; filename=\"blob\"\r\nContent-Type: application/octet-stream\r\n", @tempfile=#<File:/var/folders/t6/wbym5ghx3r3g3ch1wgl1fg640000gn/T/RackMultipart20130215-789-154zeln>>, "product_id"=>"testproduct"}
17:37:04 logger.1   | Completed 200 OK in 6ms
17:37:04 logger.1   | 
17:37:04 logger.1   | 
17:37:04 logger.1   | Started POST "/admin/products/testproduct/downloads" for 127.0.0.1 at 2013-02-15 17:37:04 +0800
17:37:04 logger.1   | Processing by Admin::DownloadsController#create as */*
17:37:04 logger.1   |   Parameters: {"product_id"=>"testproduct"}
17:37:04 logger.1   | Completed 500 Internal Server Error in 6ms 
```

有时整个文件会上传。有时它会在第一段窒息。有时它会在两者之间中断。我不知道为什么会发生这种情况以及它在哪里中断。为什么我的表单有时看起来是空的，即使 Chrome 坚持所有表单数据都已创建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T15:48:32.323

如果你使用 pow 作为你的 web 服务器，你应该尝试使用 rails 的默认 web 服务器。或者，如果您的 pow 低于 0.4.0 版本，请将其升级到 0.4.0，然后再试一次。

# c# - 参数类型不可分配给参数类型

> ID：14891887
> 
> 赞同：1
> 
> 时间：2013-02-15T09:44:12.450
> 
> 标签：c#, .net, types

我有这样的代码：

```
List<Pair<string, string>> docs = new List<Pair<string, string>>(); 
iErr = ftpconnect.ListAllDocuments(docs, build.BuildId.ToString()); 
```

ListAllDocuments 的接口原型为：

```
Int32 ListAllDocuments(List<Pair<string, string>> DocList, string Path); 
```

我得到一个错误

> 错误 21：“OperatorPanelWrapper.FtpTransportLibWrapper.ListAllDocuments(System.Collections.Generic.List<OperatorPanel.Pair<string,string>>, string)”的最佳重载方法匹配有一些无效参数

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:59:20.573

在您发布的第一个代码 ( `new List<Pair<string, string>>()`) 中，尝试将光标放在`Pair`其中并查看 Visual Studio 认为它的定义位置。它应该显示`OperatorPanel.Pair<T1, T2>`. 如果它显示在`Pair`其他地方定义的类型的名称（或错误），那么您的类型是错误的。

有几种可能性：

*   您在某处定义了另一个`Pair`类（可能是无意的），它指的是错误的类。
*   您在顶部缺少一个[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)`Pair`来指定编译器应该在哪个命名空间中查找您的.
*   您有`using`一个不同名称空间的指令，其中包含一个[`Pair`不是您想要的](http://msdn.microsoft.com/en-us/library/system.web.ui.pair.aspx)名称（例如`using System.Web.UI`）。
*   您缺少对`Pair`定义您的 DLL 的引用。
*   你的`List<T>`参考是错误的（也许你定义了你自己的？）
*   （不太可能）您已经`ToString`在`BuildId`不返回`string`.

基本上，检查所有类型。首先在调用代码中：确实`List`引用了`System.Collections.Generic.List<T>`，确实`Pair`引用了泛型`OperatorPanel.Pair<T1, T2>`...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:47:32.133

尝试

```
List<OperatorPanel.Pair<string, string>> docs = new List<OperatorPanel.Pair<string, string>>(); 
```

# mysql - 在同一 SQL 查询中使用“IN”和“多个 OR”是否等效？

> ID：14891896
> 
> 赞同：2
> 
> 时间：2013-02-15T09:44:45.523
> 
> 标签：mysql, sql, database, performance

考虑以下两个查询：

**查询 1**

```
Select * from table where field = value1 OR field = value2 ... OR field = valueN 
```

**查询 2**

```
Select * from table where field IN (value1, value2 , .... , valueN) 
```

这两个查询对数据库有相同的影响吗？或者有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:46:25.187

没有不同！！

最后在数据库内部

这个查询

```
Select * from table where field IN (value1, value2 , .... , valueN) 
```

转换成

```
Select * from table where field = value1 OR field = value2 ... OR field = valueN 
```

# sockets - 每次使用 404 拒绝 SHOUTcast 获取请求

> ID：14891900
> 
> 赞同：1
> 
> 时间：2013-02-15T09:45:05.403
> 
> 标签：sockets, lua, shoutcast, luasocket

## 代码

```
function radiotest(host,port)
    local rstr="Online"
    local sock, err = socket.tcp()
    if not sock then
        return "Failed"
    end
    sock:settimeout(1)
    local res, err = sock:connect(host, port)
    if not res then
        return "offline"
    else
        sock:settimeout(1)
        sock:send("GET /index.html HTTP/1.0\r\n UserAgent: SHOUTcast Song Status \r\n Accept: */*\r\n\r\n")
        sock:settimeout(3)
        local data=sock:receive('*a')
        sock:close()
        print(data)
        -- Further processing content here
    end
end
print( radiotest( "10.*.*.*", 1234 ) ) 
```

上面的套接字连接返回给我：

```
ICY 404 Resource Not Found
icy-notice1:<BR>SHOUTcast Distributed Network Audio Server/win32 v1.9.7<BR>
icy-notice2:The resource requested was not found<BR> 
```

我认为问题出在我的标题列表中，但我无法追踪它。

该页面在所有浏览器中都可以正常打开（Opera 确实需要被屏蔽为另一个浏览器；否则它只会继续下载所有歌曲）。

我试过在里面使用以下字符串`sock:send()`

*   `GET /index.html HTTP/1.0\r\n UserAgent: SHOUTcast Song Status (Mozilla Compatible)\r\n\r\n`
*   `GET /index.html HTTP/1.0\r\n UserAgent: Opera/9.80 (Windows NT 6.1; Win64; x64) Presto/2.12.388 Version/12.12\r\n\r\n`
*   `GET /index.html HTTP/1.0\r\n UserAgent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17\r\n\r\n`

我完全被这部分困住了。如何使用 获取页面`socket.tcp()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:18:38.197

查看您的数据包捕获后，似乎实际上通过网络发送的内容是错误的。您的用户代理字符串没有成功：

```
> GET /index.html HTTP/1.0

< ICY 404 Resource Not Found
< icy-notice1:<BR>SHOUTcast Distributed Network Audio Server/win32 v1.9.7<BR>
< icy-notice2:The resource requested was not found<BR> 
```

如果您不指定包含 的用户代理`Mozilla`，您将无法访问管理界面或其任何部分。返回并再次检查您发送的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:27:02.363

@布拉德谢谢。您对 Wireshark 的帮助确实可行。`User-Agent`由于我在请求中提供了额外的空间，因此未将标头传递给服务器。

```
sock:send("GET /index.html HTTP/1.0\r\n UserAgent: SHOUTcast Song Status \r\n Accept: */*\r\n\r\n") 
```

`\r\n UserAgent: SHOUTcast Song Status`应该是：

```
\r\nUser-Agent: SHOUTcast Song Status 
```

它现在工作正常。

谢谢您的帮助。:D

过滤掉 HTML 后的函数结果如下：

> 在线（补品 - 如果你只能看到）
> 
> 在线（补品 - 如果你只能看到）流以 256 kbps 的速度上升，32 个听众中有 0 个（0 个唯一）

# c# - 如何从存储过程中读取 c# oracle XmlType

> ID：14891904
> 
> 赞同：0
> 
> 时间：2013-02-15T09:45:12.200
> 
> 标签：c#, stored-procedures, ado.net, plsql, xmltype

我正在尝试以这种方式在存储过程中创建 XML：

```
PROCEDURE DeviceSearched(
   xml_out OUT XMLTYPE
)
IS
BEGIN

    SELECT 
      XMLELEMENT("Values", 
          XMLFOREST(de_brand)
    ) 
    INTO xml_out
    FROM 
      tbldevice de 
    ;  

END DeviceSearched; 
```

我试图以`xml_out`这种方式在 c# 中阅读：

```
...
OracleCommand command = new OracleCommand(name, conn);
command.CommandType = CommandType.StoredProcedure;
command.BindByName = true;
...
command.Parameters.Add(new OracleParameter("xml_out", OracleDbType.XmlType, ParameterDirection.Output)); 
```

使用这种方法，问题有两个：

1.  Oracle 异常：“ORA-01422：精确提取返回的行数多于请求的行数”
2.  如果我修改查询以获取一行，则该过程是可以的（我认为），但在 c# 中我没有任何结果。

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:36:36.400

*   `SELECT XMLELEMENT("Values",XMLFOREST(de_brand)) FROM tbldevice de` 在 plsql 中运行**不会**产生单个值，因此尝试将结果提取到单个变量 ( `INTO xml_out`) 将导致运行时错误 ORA-01422

*   使用存储过程在 Oracle 中选择数据并不明显，它是一个 SQL Server 方法，为什么不使用简单的选择

*   [此处](http://docs.oracle.com/cd/B19306_01/win.102/b14307/featXML.htm)和[此处](http://docs.oracle.com/cd/B14117_01/appdev.101/b10790/xdb_odpnet.htm)的示例将展示 ODP.Net 如何与 XML 一起使用
    您可能需要混合使用 ref corsur 和 XMLType 来解决问题

# ruby-on-rails - Rails Hash.from_xml 没有给出预期的结果

> ID：14891912
> 
> 赞同：0
> 
> 时间：2013-02-15T09:45:38.433
> 
> 标签：ruby-on-rails, ruby, xml, nokogiri

试图处理一些来自名为 TeleForm 的应用程序的 XML。这是表单扫描软件，它抓取数据并将其放入 XML。这是 XML 的片段

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Records>
  <Record>
    <Field id="ImageFilename" type="string" length="14"><Value>00000022000000</Value></Field>
    <Field id="Criterion_1" type="number" length="2"><Value>3</Value></Field>
    <Field id="Withdrew" type="string" length="1"></Field>
  </Record>

  <Record>
    <Field id="ImageFilename" type="string" length="14"><Value>00000022000001</Value></Field>
    <Field id="Criterion_1" type="number" length="2"><Value>3</Value></Field>
    <Field id="Withdrew" type="string" length="1"></Field>
  </Record>
</Records> 
```

我已经在另一个系统中处理了这个问题，可能使用了我们编写的自定义解析器。我认为在 Rails 中不会有问题，但我错了。

用 Hash.from_xml 或 Nokogiri 解析它并没有给我预期的结果，我得到：

```
{"Records"=>{"Record"=>[{"Field"=>["", {"id"=>"Criterion_1", "type"=>"number", "length"=>"2", "Value"=>"3"}, ""]},
 {"Field"=>["", {"id"=>"Criterion_1", "type"=>"number", "length"=>"2", "Value"=>"3"}, ""]}]}} 
```

在花了太多时间在这之后，我发现如果我 gsub 出类型和长度属性，我得到了我所期望的（即使它是错误的！我只在第一个记录节点上删除了）。

```
{"Records"=>{"Record"=>[{"Field"=>[{"id"=>"ImageFilename", "Value"=>"00000022000000"}, 
{"id"=>"Criterion_1", "type"=>"number", "length"=>"2", "Value"=>"3"}, {"id"=>"Withdrew"}]}, 
{"Field"=>["", {"id"=>"Criterion_1", "type"=>"number", "length"=>"2", "Value"=>"3"}, ""]}]}} 
```

由于不精通 XML，我假设这种使用类型和长度属性的 XML 风格正在尝试转换为数据类型。在这种情况下，我可以理解为什么“Withdrew”属性显示为空，但不明白“ImageFilename”为什么为空——它是一个 14 个字符的字符串。

我已经解决了 gsub，但这是无效的 XML 吗？添加 DTD（TeleForm 应该提供的）会给我不同的结果吗？

编辑

我将使用一些代码作为编辑为我自己的问题提供一个可能的答案。该代码遵循了我从 Mark Thomas 那里收到的一个答案中的一些功能，但我决定反对 Nokogiri，原因如下：

*   xml 是一致的并且总是包含相同的标签（/Records/Record/Field）和属性。
*   每个 XML 文件中可能有数百条记录，Nokogiri 似乎有点慢，只有 26 条记录
*   我想出了如何让 Hash.from_xml 给我我期望的东西（不喜欢 type="string"，但只使用哈希来填充一个类。

具有一条完整记录的 XML 扩展版本

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Records>
  <Record>
    <Field id="ImageFilename" type="string" length="14"><Value>00000022000000</Value></Field>
    <Field id="DocID" type="string" length="15"><Value>731192AIINSC</Value></Field>
    <Field id="FormID" type="string" length="6"><Value>AIINSC</Value></Field>
    <Field id="Availability" type="string" length="18"><Value>M  T  W  H  F  S</Value></Field>
    <Field id="Criterion_1" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_2" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_3" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_4" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_5" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_6" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_7" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_8" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_9" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_10" type="number" length="2"><Value>3</Value></Field>
    <Field id="Criterion_11" type="number" length="2"><Value>0</Value></Field>
    <Field id="Criterion_12" type="number" length="2"><Value>0</Value></Field>
    <Field id="Criterion_13" type="number" length="2"><Value>0</Value></Field>
    <Field id="Criterion_14" type="number" length="2"><Value>0</Value></Field>
    <Field id="Criterion_15" type="number" length="2"><Value>0</Value></Field>
    <Field id="DayTraining" type="string" length="1"><Value>Y</Value></Field>
    <Field id="SaturdayTraining" type="string" length="1"></Field>
    <Field id="CitizenStageID" type="string" length="12"><Value>731192</Value></Field>
    <Field id="NoShow" type="string" length="1"></Field>
    <Field id="NightTraining" type="string" length="1"></Field>
    <Field id="Withdrew" type="string" length="1"></Field>
    <Field id="JobStageID" type="string" length="12"><Value>2292</Value></Field>
    <Field id="DirectHire" type="string" length="1"></Field>
  </Record>
</Records> 
```

我只是在尝试使用工作流原型来替换用 4D 和 Active4D 编写的老化系统。这个处理 TeleForms 数据的领域是作为批处理操作实现的，它仍然可以恢复到那个状态。我只是想在新的 Rails 实现中合并一些旧的可行概念。XML 文件位于共享服务器上，可能必须移动到 Web 根目录，然后设置一些触发器来处理文件。

我仍处于定义阶段，但我处理 InterviewForm 的模块/类看起来像这样并且可能会改变（几乎没有错误捕获，仍在尝试进行测试，并且我的 Ruby 在玩过之后并没有达到应有的水平Rails 大约 5 年！）：

```
module Teleform::InterviewForm

  class Form < Prawn::Document
    # Not relevant to this question, but this class generates the forms from a Fillable PDF template and 
    # relavant Model(s) data.
    # These forms, when completed are what is processsed by TeleForms and produces the xml.
  end

  class RateForms
    attr_accessor  :records, :results

    def initialize(xml_path)
      fields = []
      xml = File.read(xml_path)
      # Hash.from_xml does not like a type of "string"
      hash = Hash.from_xml(xml.gsub(/type="string"/,'type="text"'))
      hash["Records"]["Record"].each do |record|
        #extract the field form each record
        fields << record["Field"]
      end
      @records = []
      fields.each do |field|
        #build the records for the form
        @records << Record.new(field)
      end
      @results = rate_records
    end

    def rate_records
      # not relevant to the qustions but this is where the data is processed and a bunch of stuff takes place
      return "Any errors"
    end
  end

  class Record
    attr_accessor(*[:image_filename, :doc_id, :form_id, :availability, :criterion_1, :criterion_2, 
      :criterion_3, :criterion_4, :criterion_5, :criterion_6, :criterion_7, :criterion_8, 
      :criterion_9, :criterion_10, :criterion_11, :criterion_12, :criterion_13, :criterion_14, :criterion_15, 
      :day_training, :saturday_training, :citizen_stage_id, :no_show, :night_training, :withdrew, :job_stage_id, :direct_hire])

    def initialize(fields)
      fields.each do |field|
        if field["type"] == "number"
          try("#{field["id"].underscore.to_sym}=", field["Value"].to_i)
        else
          try("#{field["id"].underscore.to_sym}=", field["Value"])
        end
      end
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T01:17:01.640

感谢您添加附加信息，这是对受访者的评分。在您的代码中使用此域信息可能会改进它。您还没有发布任何代码，但通常使用域对象会导致更简洁和更具可读性的代码。我建议创建一个表示 的简单类`Rating`，而不是将数据从 XML 转换为数据结构。

```
class Rating
  attr_accessor :image_filename, :criterion_1, :withdrew
end 
```

使用上面的类，这是使用 Nokogiri 从 XML 中提取字段的一种方法。

```
doc = Nokogiri::XML(xml)
ratings = []

doc.xpath('//Record').each do |record|
    rating = Rating.new
    rating.image_filename = record.at('Field[@id="ImageFilename"]/Value/text()').to_s
    rating.criterion_1 = record.at('Field[@id="Criterion_1"]/Value/text()').to_s
    rating.withdrew = record.at('Field[@id="Withdrew"]/Value/text()').to_s
    ratings << rating
end 
```

现在，`ratings`是一个`Rating`对象列表，每个对象都有检索数据的方法。这比深入研究深层数据结构要干净得多。您甚至可以`Rating`进一步改进该类，例如创建一个`withdrew?`返回 true 或 false 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T23:20:36.313

看起来[XmlSimple](https://github.com/maik/xml-simple)（由 maik 编写）比不可靠且不一致的实现更适合此任务`Hash.from_xml`。

一个久经考验的同名 perl 模块的移植，它有几个显着的优点。

*   它是一致的，无论您发现一个节点出现一次还是多次
*   不会阻塞和混淆结果
*   能够区分属性和节点内容。

通过解析器运行上述相同的 xml 文档：

```
XmlSimple.xml_in xml 
```

会产生以下结果。

```
{"Record"=>
  [{"Field"=>
     [{"id"=>"ImageFilename", "type"=>"string", "length"=>"14", "Value"=>["00000022000000"]},
      {"id"=>"DocID", "type"=>"string", "length"=>"15", "Value"=>["731192AIINSC"]},
      {"id"=>"FormID", "type"=>"string", "length"=>"6", "Value"=>["AIINSC"]},
      {"id"=>"Availability", "type"=>"string", "length"=>"18", "Value"=>["M  T  W  H  F  S"]},
      {"id"=>"Criterion_1", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_2", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_3", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_4", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_5", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_6", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_7", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_8", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_9", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_10", "type"=>"number", "length"=>"2", "Value"=>["3"]},
      {"id"=>"Criterion_11", "type"=>"number", "length"=>"2", "Value"=>["0"]},
      {"id"=>"Criterion_12", "type"=>"number", "length"=>"2", "Value"=>["0"]},
      {"id"=>"Criterion_13", "type"=>"number", "length"=>"2", "Value"=>["0"]},
      {"id"=>"Criterion_14", "type"=>"number", "length"=>"2", "Value"=>["0"]},
      {"id"=>"Criterion_15", "type"=>"number", "length"=>"2", "Value"=>["0"]},
      {"id"=>"DayTraining", "type"=>"string", "length"=>"1", "Value"=>["Y"]},
      {"id"=>"SaturdayTraining", "type"=>"string", "length"=>"1"},
      {"id"=>"CitizenStageID", "type"=>"string", "length"=>"12", "Value"=>["731192"]},
      {"id"=>"NoShow", "type"=>"string", "length"=>"1"},
      {"id"=>"NightTraining", "type"=>"string", "length"=>"1"},
      {"id"=>"Withdrew", "type"=>"string", "length"=>"1"},
      {"id"=>"JobStageID", "type"=>"string", "lth"=>"12", "Value"=>["2292"]},
      {"id"=>"DirectHire", "type"=>"string", "length"=>"1"}]
  }]
} 
```

我正在考虑解决问题并为 Hash 提供一个可行的实现，`from_xml`并希望从其他得出相同结论的人那里找到一些反馈。当然，我们并不是唯一遭受这些挫折的人。

与此同时，我们可能会因为知道有比它更轻的东西`Nokogiri`及其完整的厨房水槽来完成这项任务而感到安慰。

开心！

# magento - Magento：删除产品图片和产品数据

> ID：14891914
> 
> 赞同：0
> 
> 时间：2013-02-15T09:45:41.080
> 
> 标签：magento

以下代码通过entit_id从magento商店中删除产品数据和图像。

```
$product_id = 22894; //use your own product id
$mediaApi = Mage::getModel("catalog/product_attribute_media_api");

try {
    $items = $mediaApi->items($product_id);
    foreach($items as $item) {
    $mediaApi->remove($product_id, $item['file']);
    Mage::getModel("catalog/product")->load( $product_id  )->delete();
    echo $product_id." >>> "." Product deleted Successfully";
    }
} catch (Exception $exception){
    var_dump($exception);
    die('Exception Thrown');
} 
```

此脚本删除所有产品数据和图像，但图像文件不会从文件夹中删除。如何从存储文件夹中删除文件。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:59:19.240

如果`$item['file']`是文件系统上文件的路径，您可以尝试使用

```
unlink($item['file']); 
```

删除产品数据后。

# delphi - 在 Delphi 中分配和取消分配动态列表的最佳方法？

> ID：14891919
> 
> 赞同：4
> 
> 时间：2013-02-15T09:46:05.370
> 
> 标签：delphi, dynamic-memory-allocation, tlist

我是 Delphi 的新手，并试图弄清楚如何处理内存管理。我有一个类 TFileData，它是动态分配的并放入一个列表中。每次我从文件中重新加载数据时，我都需要释放旧对象并分配新对象。

要分配我使用此功能：

```
function TImportXmlForm.GetLanguageFileData: TList<TFileData>;
begin
  if FAllFiles = nil then
    FAllFiles := TList<TFileData>.Create;
  Result := FAllFiles;
end{function}; 
```

解除分配：

```
if Assigned(FAllFiles) then
begin
  while FAllFiles.Count > 0 do
  begin
    FAllFiles.Items[0].Free;
    FAllFiles.Delete(0);
  end;
  FAllFiles.Free;
  FAllFiles := nil;
end{if}; 
```

这种编程模式的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T10:18:40.807

使用`TObjectList<T>`而不是`TList<T>`.

默认情况下`TObjectList<T>`，当您从列表中删除对象时将释放该对象，或者当您释放对象列表本身时释放所有对象。这`OwnsObjects`由默认情况下的构造函数参数控制`True`。

# c# - 将多个列表框项目添加到数据库

> ID：14891920
> 
> 赞同：2
> 
> 时间：2013-02-15T09:46:09.723
> 
> 标签：c#, winforms, listbox

![在此处输入图像描述](../Images/46f312fd678712111678d5d9978ca057.png)有什么简单的方法可以将列表框中的项目保存到数据库中。我正在使用 Windows 窗体的访问数据库，用户从组合框中选择项目并将其添加到列表框中。

现在我想将列表框中的所有项目添加到用逗号分隔的数据库中。我该怎么做？

这是该课程的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Data.OleDb;

namespace Purchase_Management
{
    public partial class Form1 : Form
    {

        string connString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\Amrit\\Desktop\\Database.accdb ;Persist Security Info=False;";
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            comboBox1.SelectedText = "Mr";
            comboBox1.Items.Add("Mr");
            comboBox1.Items.Add("Mrs");
            comboBox1.Items.Add("Miss");
            DataSet ds = GetAllItems();
            comboBox2.DataSource = ds.Tables[0];
            comboBox2.DisplayMember = "Product Name";

        }

        public DataSet GetAllItems()
        {
            DataSet dataSet = new DataSet();
            // Create connection object
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "SELECT [Product Name] FROM [Product]";
                OleDbDataAdapter dataAdapter = new OleDbDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Product");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables.Count <= 0)
                return null;
            else
                return dataSet;
        }

        public string InsertUser(string custName, string title, string cust, string phoneNumber, string address1, string address2, string city, string postCode, string country, string itemPurchased)
        {

            // Create connection object
            int ix = 0;
            string rTurn = "";
            OleDbConnection oleConn = new OleDbConnection(connString);
            try
            {
                oleConn.Open();
                string sql = "INSERT INTO [Customer]([Customer's Ebayname], [Title],  [Customer's Name], [Phone Number], [Address 1], [Address 2], [City], [Post Code], [Country] , [Item Purchased])" +
                         "VALUES ( @custName, @title, @cust, @phoneNumber, @address1, @address2, @city, @postCode, @country , @itemPurchased)";
                OleDbCommand oleComm = new OleDbCommand(sql, oleConn);

                oleComm.Parameters.Add("@custName", OleDbType.Char).Value = custName;
                oleComm.Parameters.Add("@title", OleDbType.Char).Value = title;
                oleComm.Parameters.Add("@cust", OleDbType.Char).Value = cust;
                oleComm.Parameters.Add("@phoneNumber", OleDbType.Char).Value = phoneNumber;
                oleComm.Parameters.Add("@address1", OleDbType.Char).Value = address1;
                oleComm.Parameters.Add("@address2", OleDbType.Char).Value = address2;
                oleComm.Parameters.Add("@city", OleDbType.Char).Value = city;
                oleComm.Parameters.Add("@postCode", OleDbType.Char).Value = postCode;
                oleComm.Parameters.Add("@country", OleDbType.Char).Value = country;
                oleComm.Parameters.Add("@itemPurchased", OleDbType.Char).Value = itemPurchased;

                ix = oleComm.ExecuteNonQuery();
                if (ix > 0)
                    rTurn = "User Added";
                else
                    rTurn = "Insert Failed";
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
                rTurn = ex.ToString();
            }
            finally
            {
                oleConn.Close();
            }
            return rTurn;
        }

        private void button1_Click(object sender, EventArgs e)
        {
            InsertUser(textBox1.Text, comboBox1.Text, textBox2.Text, textBox3.Text, textBox4.Text, textBox5.Text, textBox6.Text, textBox7.Text, textBox8.Text, comboBox2.Text);
            if (MessageBox.Show("Customer Details Saved Successfuly") == DialogResult.OK)
            {
                Form1.ActiveForm.Close();

            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            listBox1.Items.Add(comboBox2.Text);
        }

        private void button3_Click(object sender, EventArgs e)
        {
            if (this.listBox1.SelectedIndex >= 0)
                this.listBox1.Items.RemoveAt(this.listBox1.SelectedIndex);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:41:24.263

**步骤1**

连接 ListBox 中的所有项目。 [String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx "字符串连接")接受一个字符串值数组，并返回一个将它们连接在一起的字符串。考虑使用包含您添加的所有项目的[ListBox.Items 属性。](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)

**第2步**

将字符串插入您想要的任何数据库中。如果您在 Product 表中重用“itemPurchased”列，您将能够使用您从上面的步骤 1 中连接的字符串。

由于没有为您编写完整的代码，我不确定我们还能为您做些什么。

# android - 使用corodova向android发送消息时出现异常

> ID：14891923
> 
> 赞同：0
> 
> 时间：2013-02-15T09:46:21.597
> 
> 标签：android, cordova, push-notification

我按照[此链接](http://devgirl.org/2012/10/25/tutorial-android-push-notifications-with-phonegap/#comment-13282)中的教程进行操作。我可以成功地从 Google 取回 reg id。我从[这里](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)使用服务器端脚本 但是当我从服务器发送消息时，应用程序崩溃，请在此处找到我的日志

```
—–
02-14 17:36:13.684: E/AndroidRuntime(377): FATAL EXCEPTION: IntentService[GCMIntentService-GCMIntentService-2]
02-14 17:36:13.684: E/AndroidRuntime(377): java.lang.NullPointerException: println needs a message
02-14 17:36:13.684: E/AndroidRuntime(377): at android.util.Log.println_native(Native Method)
02-14 17:36:13.684: E/AndroidRuntime(377): at android.util.Log.v(Log.java:116)
02-14 17:36:13.684: E/AndroidRuntime(377): at com.cordova2.gcm.GCMIntentService.onMessage(GCMIntentService.java:63)
02-14 17:36:13.684: E/AndroidRuntime(377): at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:179)
02-14 17:36:13.684: E/AndroidRuntime(377): at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:59)
02-14 17:36:13.684: E/AndroidRuntime(377): at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 17:36:13.684: E/AndroidRuntime(377): at android.os.Looper.loop(Looper.java:130)
02-14 17:36:13.684: E/AndroidRuntime(377): at android.os.HandlerThread.run(HandlerThread.java:60)
02-14 17:36:13.757: D/DroidGap(377): Paused the application!
——- 
```

这个问题的原因可能是什么。请指教。问候， 维诺德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T06:36:36.747

这是我的一个错误。问题在于服务器脚本的变量名。

```
if (isset($_GET["regId"]) && isset($_GET["message"])) {
    $regId = $_GET["regId"];
    $message = $_GET["message"];

    include_once './GCM.php';

    $gcm = new GCM();

    $registatoin_ids = array($regId);
    $message = array("price" => $message);

    $result = $gcm->send_notification($registatoin_ids, $message);

    echo $result;
}     . The line $message = array("price" => $message); changed to   $message = array("message" => $message); Now I could get the push message on my android phone. 
```

# android - 当服务在后台运行时，异步任务无法正常工作（doInBackground 未执行），Android

> ID：14891927
> 
> 赞同：11
> 
> 时间：2013-02-15T09:46:32.977
> 
> 标签：android, multithreading, service, android-asynctask, intentservice

我注意到有时 Async 任务无法正常工作，实际上它的**doInBackground() 方法没有被调用**，这主要发生在任何服务在该活动的后台运行时。例如，当音乐在后台运行服务时，Async 任务不会在后台解析 XML，因为它的 doInBackground 在那段时间不起作用，并且进度对话框或进度条一直在旋转。

我在几篇文章中读到**AsyncTask.THREAD_POOL_EXECUTOR**可以帮助解决这些问题，例如：

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
    new Test().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    new Test().execute();
} 
```

但这对我**没有帮助**。在上述实施后有同样的问题。

在这里，我仅提供一些示例代码以了解我在做什么::

```
public class TestAct extends Activity {

    ImageButton play,forward,backward;  
    private ListView mList;
    // many more variables

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.test_layout);

        //binding the service here
        // start service is called

        init();
    }

    private void init(){

        play=(ImageButton)findViewById(R.id.playBtn);
        forward=(ImageButton)findViewById(R.id.forward);
        backward=(ImageButton)findViewById(R.id.backward);  
        mList=(ListView)findViewById(R.id.list);

        new GetData().execute();

        play.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // calling the play() method of ServiceConnection here
            }
        });

            // adding header to Listview
            // other code and click listeners

    }

    class GetData extends AsyncTask<Void, Void, Void>{

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            // starting the progress Bar
            // initializing the Arraylist,Maps etc
        }

        @Override
        protected Void doInBackground(Void... params) {
            //parsing the XML here
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);

            // stop the ProgressBar 
            // Updating my UI here
                    // setting Adapter for ListView 
        }   
    }
} 
```

这通常工作正常，但当服务在后台运行时挂起（我的意思是当音乐在后台播放时）。

我没有得到这个异步任务问题背后的确切原因。在这种情况下，手动线程实现会有所帮助吗...？？

**好吧，我认为问题是因为“服务在主线程中运行，所以当它运行时，它会阻止我的 AsyncTask 运行”......所以我认为如果我们可以在后台线程中运行服务，那么这会有所帮助。这就是为什么我尝试 IntentService 在单独的线程中运行服务，但我怀疑......如果 IntentService 可以像 Service 一样无限期运行......并且 IntentService 也会阻塞 AsyncTask 几次。所以我不认为它对这类问题的 100% 完美解决方案。**

谁能帮我解决这个问题并理解完整的场景。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:50:50.850

有时，您希望对服务的生命周期进行比 IntentService 提供的更多的控制，在这种情况下，您可以在服务中创建一个线程并在其中运行您的后台代码。实际上，更具体地说，创建一个包含 Looper 的 HandlerThread，以便您可以使用标准的 android 方法在主线程和后台线程之间进行通信（消息）。

[在这里回答](https://stackoverflow.com/questions/12940142/why-is-my-services-asynctask-blocking-asynctasks-from-the-main-activity)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T17:30:26.930

我认为问题是`GetData AsyncTask`在前一个完成之前开始另一个。在执行另一项任务之前，请确保前一项任务已完成。为此，请使用以下代码：

```
// make sure we don't collide with another pending AsyncTask
if (getDataTask == null || getDataTask.getStatus() == AsyncTask.Status.FINISHED || getDataTask.isCancelled()) {
    getDataTask= new GetData();
    getDataTask.execute();
} 
```

还要确保您有运行任务的参考。您可以`Application`在应用程序运行或覆盖时使用类的子类来执行此操作，`onSaveInstanceState(Bundle outState)` 并在`onCreate(Bundle savedInstanceState)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T11:19:52.210

阅读此处发布的所有问题和答案。如果我错了，请纠正我您的情况是您正在解析 xml 并获取歌曲列表，并且当用户选择您希望使用服务播放的任何歌曲时，对吗？

如果场景是正确的，那么我们可以以更简单的方式实现它。

1.  在Activity中，`onResume()`方法解析XML文件并获取歌曲列表并更新列表视图（这里不要启动任何与服务相关的东西）
2.  当用户点击歌曲然后将特定的键/字符串传递给服务并启动服务
3.  在服务的`OnStartCommand()`方法中获取标识符并像使用普通媒体 API 一样启动歌曲

这实际上会为您完成工作。

关于问题

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
    new Test().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    new Test().execute();
} 
```

这是针对不同`AsyncTask`版本的 Android 的不同行为。查看您的代码正在执行的操作是在您正在初始化服务的 Activity 中，因此该服务在后台运行而没有做任何有成效的事情。并且当用户单击播放时，您正在调用在此处创建问题的服务的播放功能。

所以要从 Activity 调用服务的功能，你应该对你没有提到的 AIDL。如果你写了，那么它应该是完美的。

但这里的建议是将歌曲 ID 传递给服务，它应该从服务中播放，而不应该在活动中调用服务的函数。

如果要更新活动的 onResume 中的歌曲列表，则必须编写 AIDL 并完成场景

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T18:46:44.427

> 我注意到有时 Async 任务无法正常工作，实际上它的 doInBackground() 方法没有被调用，这种情况大多发生

你知道一次可以执行的 AsyncTask 是有限制的吗？我曾经遇到过一个任务无法启动/正常工作的问题，这是因为我超过了这个数字。检查[Android AsyncTask 线程限制？](https://stackoverflow.com/questions/9654148/android-asynctask-threads-limits)有关该主题的更多信息。

> 当任何服务在该活动的后台运行时。例如，当音乐在后台使用服务运行时，Async 任务不会在后台解析 XML，因为它的 doInBackground 在那段时间不起作用，并且进度对话框或进度条一直在旋转。

您是否检查过死锁的可能性（特别是，如果您正在使用`wait()`and `notify()`）？

> 好吧，我认为问题是因为“服务在主线程中运行，所以当它运行时，它会阻止我的 AsyncTask 运行”......所以我认为如果我们可以在后台线程中运行服务，那么这会有所帮助。这就是为什么我

无论如何，您要在服务中执行的操作都应该在自己的线程中运行。这样你就可以确定没有任何东西会被阻止。例如，如果你有一些东西要填充，你可以使用接收器。

希望我能帮助一点...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T07:35:01.983

这是一个提示，我最终如何解决我的问题::

1）我使用**IntentService 而不是 Service**，因为 Service 在 mainThread 中运行，而 IntentService 在与 mainThread 不同的线程中运行，以确保我的后台 Service 不会影响我当前的任务。另外，我正在使用 AIDL 在我的 UI 和后台线程之间进行通信（这已经适用于 Service ，所以这部分没有什么新内容）。

2）我使用**无痛线程而不是 AsyncTask ，我在****onDestroy()**方法中中断线程以确保线程确实无限期地继续。

应用程序现在的性能似乎比早期要好得多。

希望这对其他人也有帮助:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-22T04:42:16.663

根据 Android Developer AsyncTask 文档的线程规则部分，`AsyncTask`必须在 UI 线程上创建和启动它，因此如果您从服务中的后台线程启动它，这将导致错误行为。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-02-22T09:04:54.013

[一般来说，你真的不应该使用 AsyncTasks :)这里](https://raw.github.com/octo-online/robospice/master/gfx/RoboSpice-InfoGraphics.png)有一个很好的解释。想想如果用户在你的任务运行时旋转设备会发生什么。Activity 被重新创建，但任务在后台运行并持有对“旧”活动的引用。有一些方法可以解决这个问题，而且在某些情况下，AsyncTasks 肯定是正确的方法。

但是，您真的应该考虑切换到装载机或（如果您喜欢冒险）尝试[RoboSpice](https://github.com/octo-online/robospice) :)

# jakarta-ee - 什么是企业应用程序？

> ID：14891929
> 
> 赞同：-3
> 
> 时间：2013-02-15T09:46:42.473
> 
> 标签：jakarta-ee

我是一名 Java 开发人员，对 Java EE 不熟悉。首先，我想了解为什么在我们已经拥有大量构建 Web 的框架时还需要所有企业应用程序。

我收集到 Java EE 是 Java 的基于 Web 的一面。那么，当有其他 Web 方法存在时，为什么 Java 需要一个呢？

我可能完全错了，这就是为什么我要求在这个领域开悟。对需要 Java EE 的场景的简单解释将澄清我的困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:06:20.710

Web 框架领域有许多竞争对手。Java，特别是 Java EE 只是其中之一。这是一个非常流行且众所周知的应用程序，但也有例如 ASP.NET/C# 可用于构建大致相同的（Web）应用程序，但有其他一些优点和缺点。

当你问的时候`why does Java need one when there are other web methods out there?`，你基本上是在问“为什么他们在这个世界上竞争”？

既然已经有其他汽车制造商，为什么欧宝需要制造汽车？

# perl - 来自 FTP 文件的输入中不存在换行符 (Perl)

> ID：14891930
> 
> 赞同：0
> 
> 时间：2013-02-15T09:46:42.177
> 
> 标签：perl, character-encoding, escaping

我使用 Net::FTP 下载了一个 csv 文件。当我在文本编辑器或 excel 中查看此文件时，甚至当我剪切/粘贴时，它都有换行符，看起来像这样：
000000000G911|06
0000000000CDR|25|123
0000000000EGP|19

当我在 Perl 中读取文件时，它会将整个文本视为一行，如下所示：

000000000G911|060000000000CDR|25|1230000000000EGP|19

我试过阅读它使用

```
tie @lines, 'Tie::File', "C:/Programs/myfile.csv", autochomp=>0  or die "Can't read file: $!\n";  
foreach $l (@lines1)  
    {print "$l\n";  
} 
```

和

```
open FILE, "`<`$filename" or die $!;    
my @lines=`<`FILE>;  
foreach $l (@lines)  
{print "$l\n";  
}  
close FILE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:57:36.723

该文件具有 Perl 无法识别的格式的换行符，因为它来自不同的操作系统。其他程序会自动检测不同的换行格式，但 Perl 不这样做。

如果您已[`Net::FTP`](http://perldoc.perl.org/Net/FTP.html)在 ASCII 模式下执行传输（例如`$ftp->ascii`启用此模式），则应注意并为您更正。

或者，您可以找出用于换行符的内容，然后将特殊`$/`变量设置为该值。

# c - 如何管理 Linux 加密 API 使用的 scatterlist？

> ID：14891934
> 
> 赞同：2
> 
> 时间：2013-02-15T09:46:49.290
> 
> 标签：c, memory-management, linux-kernel

我需要一次（解密）一些数据。可能必须在开始和结束时将额外的填充字节添加到目标数据字节。内置的加密 API 适用于`struct scatterlist`对象，正如您在分组密码的 encrypt 方法的定义中看到的那样：

```
int (*encrypt)(struct blkcipher_desc *desc, struct scatterlist *dst,
           struct scatterlist *src, unsigned int nbytes); 
```

现在我为加密操作遵循的程序：

1.  获取数据缓冲区*buf* (长度*L* )
2.  计算左填充和右填充字节（*rpad*和*lpad*）
3.  加密整个事情（*lpad*和*buf*和*rpad*）
4.  去掉结果中的填充字节

最简单和低效的解决方案是分配*L* + *rpad* + *lpad*字节并在这个新区域中适当地复制缓冲区的内容。但由于 API 使用了这些`scatterlist`对象，我想知道是否有办法避免这种纯粹的资源浪费。

我在 LWN 上阅读了几篇关于`scatterlist`链接的文章，但快速浏览头文件让我担心：看起来我必须*手动*设置整个事情，这是一个非常糟糕的做法......

关于如何`scatterlist`正确使用 API 的任何线索？理想情况下，我想做以下事情：

1.  为输入和输出的填充字节分配缓冲区
2.  分配一个仅存储“有用”加密字节的“有效负载”缓冲区
3.  创建`scatterlist`包含填充缓冲区和目标缓冲区的对象
4.  加密整体并将结果存储在输出填充缓冲区+输出“有效负载”缓冲区中
5.  丢弃输入和输出填充缓冲区
6.  将加密的“有效负载”缓冲区返回给用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:58:22.970

首先，对不起我的英语，我不是以英语为母语的人。我想你正在内核“blkcipher_walk_virt”中寻找这个api，你可以在ecb.c“crypto_ecb_crypt”中找到它的用法。你也可以看到 padlock_aes.c

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T13:06:24.720

在通过代码调查后，我找到了一个合适的解决方案。尽管存在一些细微的差异，但它很好地遵循了我在问题中列出的程序。

根据[JohnsonD](https://stackoverflow.com/users/2098847/johnsondiao) ​​iao 的建议，我深入研究了**scatterwalk.c**文件以了解 Crypto API 如何使用这些`scatterlist`对象。

出现的问题是两个后续`scatterlist`. 假设我有两个链式`scatterlist`. 第一个保存有关 12 字节缓冲区的信息，第二个保存有关 20 字节缓冲区的信息。我想使用 AES128-CTR 将两个缓冲区作为一个整体进行加密。在这种特殊情况下，API 将：

1.  加密第一个引用的缓冲区的 12 个字节`scatterlist`。
2.  增加计数器
3.  加密第二个 scatterlist 的前 16 个字节
4.  增加计数器
5.  加密最后剩余的 4 个字节

我期望的行为是：

1.  加密第一个缓冲区的 12 个字节 + 第二个缓冲区的 4 个第一个字节
2.  增加计数器
3.  加密第二个缓冲区的最后 16 个字节

因此，为了强制执行这一点，必须在模式中分配一个 16 字节对齐的填充缓冲区：

> 让*n[填充]*请求的加密所需的填充字节数。然后我们有：![缓冲区长度](../Images/748d81676c918fabe481abfa21600fa0.png)
> 
> 其中*l [buf]*是填充缓冲区的总长度。现在，最后的*l [buf] - n[填充]*字节必须用第一个输入数据字节填充。如果输入太短而无法确保完整副本，那没关系。
> 
> 因此，我们在填充缓冲区的偏移量*n* *[pad]*处复制第一个*l [cpy] = min(l [buf] - n [pad] , l [data] )字节*

简而言之，这是程序：

1.  *分配长度为l* *[buf]*的适当填充缓冲区
2.  在填充缓冲区中的偏移量*n* *[pad]*处复制有效负载缓冲区的前*l [cpy字节]*
3.  在 a 中引用填充缓冲区`scatterlist`
4.  引用另一个中的有效负载缓冲区`scatterlist`（使用*l [cpy]*移位）
5.  求密码
6.  提取填充缓冲区中存在的有效负载字节
7.  丢弃填充缓冲区

我对此进行了测试，它似乎工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T02:56:52.270

我也在学习这部分。这是我的分析：

如果您的加密设备一次需要加密 16 字节，则应将对齐设置为 (16-1)。就像 padlock_aes.c 一样，参见 ecb_aes_alg.cra_alignmask。内核将在 blkcipher_next_copy 和 blkcipher_next_slow 中处理这个问题。但我很困惑，在 aes_generic.c 中 alignmask 为 3，内核如何在没有 blkcipher_next_copy 的情况下处理这个问题？

# asp.net - 如何在asp.net中生成随机唯一的16位数字而不会发生冲突

> ID：14891942
> 
> 赞同：4
> 
> 时间：2013-02-15T09:47:08.650
> 
> 标签：asp.net, c#-4.0, random, guid

我如何在 c#asp.net 中生成 16 位唯一随机数而没有任何重复，因为我已经阅读了 GUID 的概念，它生成字符和数字但我不想要字符

请建议有什么方法可以实现它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T09:51:55.637

您可以使用 Random 类创建一个随机数：

```
private static Random RNG = new Random();

public string Create16DigitString()
{
  var builder = new StringBuilder();
  while (builder.Length < 16) 
  {
    builder.Append(RNG.Next(10).ToString());
  }
  return builder.ToString();
} 
```

确保没有冲突需要您跟踪之前返回的所有结果，这实际上是内存泄漏（注意我不建议您使用它 - 跟踪所有以前的结果是一个坏主意，依赖最多 16 个字符的随机字符串的熵，如果您想要更多的唯一性，请增加熵，但我将包括它以说明如何*完成*）：

```
private static HashSet<string> Results = new HashSet<string>();

public string CreateUnique16DigitString()
{
  var result = Create16DigitString();
  while (!Results.Add(result))
  {
    result = Create16DigitString();
  }

  return result;
} 
```

# jquery - 由于某些 jquery 验证脚本而没有获取表单值

> ID：14891944
> 
> 赞同：0
> 
> 时间：2013-02-15T09:47:24.090
> 
> 标签：jquery, jquery-validate

如果数据有效，我在表单验证文件中编写了一些 jQuery 脚本来禁用提交按钮。

```
$(document).ready(function()
{   
    jQuery("#frmAddEditForm").validate({
        errorElement:'div',
        rules: {
            fname: {
                required: true
            }
        },

        messages: {
            fname: {
                required: "Please enter name"
            }
        }
    });

    $('#frmAddEditForm').submit(function(){
        if ($(this).valid()) {
          $('#submit').attr('disabled', 'disabled');
        }
    });

}); 
```

并检查提交

```
if(strlen($this->input->post('submit'))>0)
{ 
  // Insert form data
} 
```

我也试过

```
if($this->input->post('submit'))
{ 
      // Insert form data
} 
```

但没有任何效果。

如果我改变

```
$('#submit').attr('disabled', 'disabled'); 
```

到

```
$('#submit').css('display', 'none'); 
```

然后它工作，但我想提交被禁用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T09:55:44.177

如果您访问错误的参数，即

```
 if($this->input->post('submit')) 
```

submit 是一个按钮，在 if中使用**fname**

```
 if($this->input->post('fname')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:07:23.487

禁用的输入不会被发布。解决方法：

创建一个隐藏字段并检查它是否被发布：

```
<input type="hidden" name="posted" /> 
```

然后在 PHP

```
if($this->input->post('posted')) 
```

或者使用您已经拥有的任何其他非禁用输入`fname`。应该管用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:49:19.353

请编辑如下

//设置按钮禁用

```
 $("input[type=submit]").attr("disabled", "disabled"); 
```

# wordpress - 如何在 WP 厚盒中使用 jQuery

> ID：14891946
> 
> 赞同：1
> 
> 时间：2013-02-15T09:47:26.523
> 
> 标签：wordpress, jquery, plugins, thickbox

我正在创建一个 Wordpress 插件，它添加了一个元框来发布编辑页面。在此元框中，有一个链接可在本机厚框中打开页面（ajax 内容而不是 iframe）

在这个打开的内容中，我想使用'父'页面（WP管理页面）的jQuery，但我得到一个“jQuery未定义”......

任何的想法 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:02:59.407

试试这个

```
var $j = jQuery.noConflict(); 
```

...而 $j 是您的 jQuery 对象

# android - ViewPager 和 Activity 重新创建/在活动 onDestroy-onCreate 后将数据保存在片段中

> ID：14891947
> 
> 赞同：0
> 
> 时间：2013-02-15T09:47:27.803
> 
> 标签：android, android-fragments, android-viewpager

我用 写了一个活动`ViewPager`，它在 an`AsyncTask`执行后被填充。每个`TestDataObject`都与相关的`TestFragment`. 当屏幕旋转时，应用程序由于`NullPointerException`内部`onCreateView`方法而崩溃。我相信这是因为`ViewPager`/Adapter`onSaveInstanceState`方法，当数据尚不可用时，`onCreateView`尝试在数据加载之前恢复数据。`AsyncTask`

我可以只`if`使用 onCreateView 代码，但我觉得它不是一个正确的解决方案，因为 ViewPager 中的片段数量可能会有所不同，因此它最终可能会做不必要的工作：恢复更改后的 viewpager 内容，然后替换为初始内容。在这种情况下，onSaveInstanceState 似乎过于有害。据推测，我可以扩展 ViewPager 或 Adapter 以取消保存过程——我也觉得这很奇怪。

你有什么更好的建议可以提供吗？

```
public class MainActivity extends LoggerActivity {

    private ArrayList<TestDataObject> mDataObjects = new ArrayList<MainActivity.TestDataObject>();

    private ViewPager mViewPager;
    private TestFragmentAdapter mViewPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPagerAdapter = new TestFragmentAdapter(
                getSupportFragmentManager(), mDataObjects);
        mViewPager.setAdapter(mViewPagerAdapter);
        new TestAsyncTask().execute();
    }

    private class TestAsyncTask extends AsyncTask<Void, Void, Void> {
        @Override
        protected Void doInBackground(Void... params) {
            try {
                TimeUnit.SECONDS.sleep(3);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            super.onPostExecute(result);
            mDataObjects.add(new TestDataObject());
            mDataObjects.add(new TestDataObject());
            mDataObjects.add(new TestDataObject());
            mViewPagerAdapter.notifyDataSetChanged();

        }
    }

    public static class TestFragment extends Fragment {

        private TestDataObject mDataObject;

        public static TestFragment getInstance(TestDataObject obj) {
            TestFragment f = new TestFragment();
            f.mDataObject = obj;
            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // layout.find...
            mDataObject.toString();
            return inflater.inflate(R.layout.fragment_test, null, false);
        }

    }

    public static class TestFragmentAdapter extends FragmentStatePagerAdapter {

        private List<TestDataObject> mDataObjects;

        public TestFragmentAdapter(FragmentManager fm, List<TestDataObject> objs) {
            super(fm);
            mDataObjects = objs;
        }

        @Override
        public Fragment getItem(int position) {
            return TestFragment.getInstance(mDataObjects.get(position));
        }

        @Override
        public int getCount() {
            return mDataObjects == null ? 0 : mDataObjects.size();
        }

    }

    public static class TestDataObject {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:56:04.633

> 我相信这是因为 ViewPager/Adapter onSaveInstanceState 方法。当数据尚不可用时，onCreateView 会尝试在异步任务数据加载之前恢复数据。

这不是正在发生的事情（我假设你在 处得到异常`mDataObject.toString();`），即使`AsyncTask`它会立即完成它的工作，异常仍然会被抛出。应用程序第一次运行后，其中`ViewPager`将包含三个片段。当您转动手机时，`Activity`它将被销毁并重新创建。将`ViewPager`尝试重新创建其中的片段，但这次它将使用默认的空构造函数来完成（这就是为什么你不应该使用非空构造函数来传递数据）。如您所见，第一次`Fragment`由适配器创建时，它将由您传递对象的`getInstance`方法（这也是您初始化的唯一点）创建。当重新初始化其片段时，该字段将`mDataObject``TestDataObject``ViewPager`**也不会**被初始化。

如果`TestDataObject`可以放入，`Bundle`那么您可以简单地调整您的`getInstance`方法以将一些参数传递给您的片段（因此数据字段将在`ViewPager`重新创建它们时被初始化）。我相信你已经看到了：

```
public static TestFragment getInstance(TestDataObject obj) {
      TestFragment f = new TestFragment();
      // f.mDataObject = obj; <- don't do this
      // if possible
      Bundle args = new Bundle();
      args.put("data", obj); // only if obj can be put in a Bundle
      f.setArguments(args); 
      return f;
}

private TestDataObject mDataObject; 

@Override
public void onCreate(Bundle savedInstance) {
     mDataObject = getArguments().get("data"); // again, depends on your TestDataObject 
} 
```

另一种方法是将最少量的数据传递给`Fragment`（如上），以便它有足够的信息来在重新创建数据时重新创建它的数据。

# extjs - Extjs 如何停止重新加载商店

> ID：14891956
> 
> 赞同：6
> 
> 时间：2013-02-15T09:47:55.803
> 
> 标签：extjs, extjs-mvc

我正在使用 Ext Js MVC 方法构建一个应用程序。

我有几个关于绑定到一个商店的不同视图的组合。存储设置为 query:remote 和 autoLoad:false 并从服务器加载其数据。

每次我更改视图（旧视图被销毁）并展开组合时都会出现问题，商店将重新加载其数据。有没有办法强制商店只加载一次数据？商店一旦加载，即使绑定的组合被破坏，也不会再次重新加载。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-15T10:05:44.317

有一些方法可以在组合框本身上执行此操作，但我认为最简单的方法是订阅商店的加载事件并检查商店是否包含记录，如果是则中止加载。

```
store.on('beforeload', function(s){
    return !s.count() > 0;
}); 
```

# performance - 帮助检测 ASP.Net 应用程序中执行缓慢的所有页面的工具

> ID：14891960
> 
> 赞同：0
> 
> 时间：2013-02-15T09:48:08.890
> 
> 标签：performance

帮助检测 ASP.Net 应用程序中执行缓慢的所有页面的工具，而无需测量每个单独页面的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T11:40:33.630

如果您只对服务器时间感兴趣，请将 time-taken 添加到 IIS 日志（[http://support.microsoft.com/kb/944884](http://support.microsoft.com/kb/944884)），然后使用分析工具（例如 R）构建响应时间的直方图每一页。

如果您想跟踪用户浏览器中的实际加载时间，您将需要一个真实用户监控 (RUM) 工具 - 基本上从 Navigation Timing API 收集时间信息并将其发送到中央服务器。

# html - 使用firefox时在mp3旁边使用其他音效源

> ID：14891961
> 
> 赞同：0
> 
> 时间：2013-02-15T09:48:10.947
> 
> 标签：html, firefox, audio, mp3

我试图在用户点击后制作一个有声音的菜单。它适用于 Chrome、safari 甚至 IE，但不适用于 Mozilla Firefox。我将 mp3 文件用于无法在 Firefox 上运行的声音。这是代码

```
function loadSound (src) { 
    var sound = document.createElement("audio"); 
    if ("src" in sound) { 
        sound.autoPlay = false; 
    } 
    else { 
        sound = document.createElement("bgsound"); 
        sound.volume = -10000; 
        sound.play = function () { 
            this.src = src; 
            this.volume = 0; 
        } 
    } 
    sound.src = src; 
    document.body.appendChild(sound); 
    return sound; 
} 

$(document).ready(function () {
    var sound = loadSound("<?=base_url()?>sound/testing.mp3");  //  preload
    $(".main_nav a").click(function(){
        var ids = $(this).attr("id").split("-");
        var url = ids[2];
        sound.play();
        setTimeout (function(){window.location = url;}, 2000);
        return false;
    });
}); 
```

什么类型的音频文件可以在 Firefox 中使用？用户使用 firefox 时如何更改源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:01:06.827

好的，我了解您的问题，我有一个解决方案。您可以使用我制作的此功能：

```
function getSupportedAudio(){
    var testEl = document.createElement( "audio" ), mp3, ogg;
    if ( testEl.canPlayType ) {
        mp3 = "" !== testEl.canPlayType( 'audio/mpeg;' );
        ogg = "" !== testEl.canPlayType( 'audio/ogg' );
    }

    if(mp3){
        return ".mp3";
    }
    else{
        return ".ogg";
    }
} 
```

在你的函数 loadSound(src) 中使用这个：

```
sound.src = src+getSupportedAudio();
document.body.appendChild(sound); 
```

并且在调用 loadSound 函数时，不要在参数中发送音频格式（但您需要将 ogg 和 mp3 这两个文件放在同一个文件夹中并具有相同的名称）：

```
var sound = loadSound("<?=base_url()?>sound/testing");  //  preload 
```

# php - 如何显示我所有的 Twitter 朋友？

> ID：14891962
> 
> 赞同：0
> 
> 时间：2013-02-15T09:48:16.897
> 
> 标签：php, twitter

这个脚本不太好用。

```
<?php
//include twitter class
require('classes/twitter.php');

$twitter = new Twitter('custToken', 'custSecret');

// set tokens
$twitter->setOAuthToken('blah blah');
$twitter->setOAuthTokenSecret('blah blah');

//$tweet = "This tweet was posted from a custom php script.";
//$twitter->statusesUpdate($tweet); // <-- this works!

$friends = $twitter->friendsList('tynamite');
foreach ($friends as $friend){
    print_r($friend);
    echo "<hr>";
}
?> 
```

我想在列表中显示我所有的 Twitter 朋友（我关注的每个人）。我得到的结果是这样的。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T15:14:01.143

你应该传递一个游标。您可以使用类似下面的代码（未经测试，只是伪代码）：

```
while($count == 20) {
 $friends = $twitter->friendsList('tynamite', $cursor);
 $count = count($friends);
 $cursor++;

 .. your code ..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:51:46.467

twitter 使用 json 来返回结果。您需要解析返回的结果并提取您需要的信息。查看此[博客](http://nitschinger.at/Handling-JSON-like-a-boss-in-PHP)以获取有关如何使用 php 解析 json 的示例

# unit-testing - 了解存根、伪造品和模拟物。

> ID：14891967
> 
> 赞同：9
> 
> 时间：2013-02-15T09:48:35.463
> 
> 标签：unit-testing, mocking, tdd, stubs

我刚刚开始阅读[使用 C# 进行专业测试驱动开发：使用 TDD 开发真实世界应用程序](https://rads.stackoverflow.com/amzn/click/com/047064320X)

我很难理解存根、假货和模拟。据我目前了解，它们是用于对项目进行单元测试的假对象，并且模拟是一个带有条件逻辑的存根。

我想我已经了解到的另一件事是，模拟与依赖注入有某种关系，这是我昨天才设法理解的概念。

我不明白为什么我会实际使用它们。我似乎无法在网上找到任何能正确解释它们的具体例子。

谁能给我解释一下这个概念？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-15T10:07:43.103

正如我过去所读到的，这就是我认为每个术语所代表的含义

**存根**

在这里，您将方法的结果存根到已知值，只是为了让代码运行没有问题。例如，假设您有以下内容：

```
public int CalculateDiskSize(string networkShareName)
{
    // This method does things on a network drive.
} 
```

你不关心这个方法的返回值是什么，它不相关。另外，如果网络驱动器不可用，则执行时可能会导致异常。因此，您将结果存根以避免该方法的潜在执行问题。

所以你最终会做类似的事情：

```
sut.WhenCalled(() => sut.CalculateDiskSize()).Returns(10); 
```

**伪造的**

使用假货，您将返回假数据，或创建对象的假实例。一个经典的例子是存储库类。采取这种方法：

```
public int CalculateTotalSalary(IList<Employee> employees) { } 
```

通常，上述方法将传递从数据库中读取的员工集合。但是，在您的单元测试中，您不想访问数据库。因此，您创建了一个虚假的员工列表：

```
IList<Employee> fakeEmployees = new List<Employee>(); 
```

然后，您可以将项目添加到 fakeEmployees 并断言预期结果，在本例中为总工资。

**模拟**

使用模拟对象时，您打算在这些模拟对象上验证某些行为或数据。例子：

您想验证在测试运行期间是否执行了特定方法，这是使用 Moq 模拟框架的通用示例：

```
public void Test()
{
    // Arrange.
    var mock = new Mock<ISomething>();

    mock.Expect(m => m.MethodToCheckIfCalled()).Verifiable();

    var sut = new ThingToTest();

    // Act.
    sut.DoSomething(mock.Object);

    // Assert
    mock.Verify(m => m.MethodToCheckIfCalled());
} 
```

希望以上内容有助于澄清一些事情。

编辑：Roy Osherove 是测试驱动开发的知名倡导者，他有一些关于该主题的非常好的信息。您可能会发现它非常有用：

[http://artofunittesting.com/](http://artofunittesting.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T15:24:40.143

它们都是测试替身的变体。这是一个很好的参考，解释了它们之间的区别：http: [//xunitpatterns.com/Test%20Double.html](http://xunitpatterns.com/Test%20Double.html)

此外，来自 Martin Fowler 的帖子：[http ://martinfowler.com/articles/mocksArentStubs.html](http://martinfowler.com/articles/mocksArentStubs.html)

> Meszaros 使用术语 Test Double 作为通用术语，用于代替真实对象用于测试目的的任何类型的假装对象。这个名字来源于电影中特技替身的概念。（他的目标之一是避免使用任何已经被广泛使用的名称。）Meszaros 然后定义了四种特殊类型的双精度：
> 
> 1.  虚拟对象：被传递但从未实际使用过。通常它们仅用于填充参数列表。
> 2.  假对象实际上有工作实现，但通常采取一些捷径，这使得它们不适合生产（内存数据库就是一个很好的例子）。
> 3.  存根为测试期间拨打的电话提供预设答案，通常根本不响应任何超出测试程序的内容。存根还可以记录有关呼叫的信息，例如记住它“发送”的消息的电子邮件网关存根，或者可能只记录它“发送”的消息的数量。
> 4.  模拟就是我们在这里讨论的内容：预先编程的对象具有期望，这些期望形成了它们期望接收的调用的规范。
> 
> 在这些类型的替身中，只有模拟坚持行为验证。其他双打可以并且通常会使用状态验证。在练习阶段，Mocks 实际上确实表现得像其他替身，因为他们需要让 SUT 相信它正在与其真正的合作者交谈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-16T01:26:55.463

这个 PHP 单元的手册作为介绍帮助了我很多：

“有时很难测试被测系统 (SUT)，因为它依赖于无法在测试环境中使用的其他组件。这可能是因为它们不可用，它们不会返回所需的结果“测试或因为执行它们会产生不良的副作用。在其他情况下，我们的测试策略要求我们对 SUT 的内部行为有更多的控制或可见性。” 更多：[https ://phpunit.de/manual/current/en/test-doubles.html](https://phpunit.de/manual/current/en/test-doubles.html)

在寻找“**测试替身**”时，我发现更好的“介绍”，因为模拟、假货、存根和其他都是众所周知的。

# jquery - Jquery 下拉组

> ID：14891975
> 
> 赞同：0
> 
> 时间：2013-02-15T09:48:53.320
> 
> 标签：jquery, select, drop-down-menu, multiple-select

我的选择（下拉）框有问题...

问题是我有一组下拉菜单，每个下拉菜单都有一组下拉菜单..

在更改下拉列表时，所有子下拉列表都由更改的值选择

* * *

请帮我

以下代码具有下拉框

当父下拉列表更改时，所有子下拉列表将由该更改的值选择

```
 <table>
      <tr>
         <th>Parent DropDown</th>
        <th colspan="3">Child Dropdowns</th>
      </tr>
 <tr>
<td>
<select name="class_1" id="class_1">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_1" class="select_1">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_2" class="select_1">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_3" class="select_1">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
</tr>

<tr>
<td>
<select name="class_2" id="class_2">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_1" class="select_2">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_2" class="select_2">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_3" class="select_2">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
</tr>

<tr>
<td>
<select name="class_3" id="class_3">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_1" class="select_3">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_2" class="select_3">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
<td>
<select name="subClass_3" class="select_3">
<option value="First">First</option>
<option value="Second">Second</option>
</select>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:37:03.657

据我了解，它是下拉菜单之间的父子关系。当父下拉列表的值改变时，子下拉列表中的值也应该改变。

这些场景经常出现在国家、州、城市选择中。

如果是这种情况，那么您需要处理下拉菜单的 onchange 事件。

```
$(element).change(function(){
    //coding for the same..................
}); 
```

# symfony - Symfony2：翻译消息中的 HTML

> ID：14891977
> 
> 赞同：35
> 
> 时间：2013-02-15T09:48:55.627
> 
> 标签：symfony

中`messages.en.yml`，我有

```
confirmed: Congrats %username%, your account is now activated. 
```

但是我想以“粗体”用户名为例……我该怎么做？

```
confirmed: Congrats <span class='bold'>%username%</span>, your account is now activated. 
```

当然我可以在这个例子中使用两个句子，比如

```
first: Congrats
second: , your account ... 
```

并且在树枝内部使用 html 标签，但这看起来很脏。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-15T10:02:27.283

## 更新 2

在这种情况下，我开始这样使用：

```
confirmed: Congrats %start_link%%username%%end_link%, your account is now activated 
```

由于维护[了关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)，因此强烈推荐这种方式。

* * *

## 更新

在 YAML 中，我使用这样的翻译没有任何问题：

```
trans.key: click <a href="%url%">here</a> to continue 
```

* * *

尽管翻译和设计应该保持分离，但在某些情况下，您必须在翻译文件中使用 html 标签，这在 Facebook 和 Twitter 等大型项目中也可以看到。

在这种情况下，您可以使用Symfony[推荐的 XLIFF 格式。](http://symfony.com/doc/current/book/translation.html)内部翻译文件：

```
<trans-unit id="1">
   <source>confirmed</source>
   <target>Congrats <![CDATA[<span class='bold'>%username%</span>]]> , your account is now activated.</target>
</trans-unit> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-09T02:18:29.203

## Twig 的原始过滤器

我不知道这是否是 2013 年的一个选项，但是在使用翻译时，您可以应用具有此翻译字符串的**raw** twig 过滤器：

```
confirmed: Congrats <span class='bold'>%username%</span>, 
           your account is now activated. 
```

并像这样在树枝中使用它：

```
 {{ 'confirmed'|trans|raw }} 
```

这不会转义字符串中的 html，并将用户名显示为粗体。

**更新**：我第一次没有看到评论，但 Rvanlaak 首先提出了原始过滤器解决方案。

## 安全问题

请注意，这些翻译字符串的内容不得由用户提供，因为它可能会使您的应用程序受到[XSS 攻击](https://en.wikipedia.org/wiki/Cross-site_scripting)。如果恶意用户能够将自定义数据输入翻译字符串（例如基于社区的翻译），则使用原始过滤器允许执行 JavaScript

## 关注点分离

使用原始过滤器不符合关注点分离，因为内容和样式绑定在一起。正如 Ferhad 提到的，使用他的方法，将保持关注点分离。但就我而言，我更喜欢使用简单的原始过滤器。我觉得就我的情况而言，Ferhad 的方法对我来说有点矫枉过正，尽管更推荐他的方法

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-04-04T09:25:13.660

我的方法虽然仍然丑陋，但至少尊重了关注点的分离。转义过滤器用于转义变量，使最终结果对 XSS 非常安全，因为所有其他来源都被认为是硬编码的。

*   翻译.yml

    ```
    points: You have %num% points left. 
    ```

*   模板.html.twig

    ```
    {% set pointsFormatted = '<span class="points">' ~ num | escape ~ '</span>' %}
    {{ 'pages.score.points' | trans({'%num%' : pointsFormatted}) | raw }} 
    ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-11-03T17:58:46.080

我刚刚发现了一些东西，你可以在你的 YAML 文件中使用它：

```
 mind: >
        <i>Mind is a nice thing to have</i> 
```

所以第一行中的这个“>”符号实现了它。我认为这将是首选方式，比在 TWIG 中处理转义等更好。

我现在查了一下，它实际上是一个 YAML 功能。 [在这里检查](http://www.yaml.org/spec/1.2/spec.html#id2760844):)

此外，还有一个类似主题的较早问题：[如何让 YAML 忽略同一文件中的原始 HTML](https://stackoverflow.com/questions/7006551/how-can-i-get-yaml-to-ignore-raw-html-in-same-file)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-22T18:47:22.367

一些yml：

```
dashboard:
    hello: Hello <b>%username%</b> 
```

+

```
{{ 'dashboard.hello'|trans({'%username%': app.user.username}, 'General') | raw }} 
```

这个**| 原始**部分对我有用

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-29T16:00:21.097

在我看来，这是今天最好的解决方案：

```
'key'|trans({'%username%': '<strong>' ~ suspiciousVar|escape ~ '</strong>'})|raw 
```

这里唯一的风险是将 XSS 存储在您的翻译文件中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-24T08:27:55.793

在翻译中保留 HTML 内容是错误的，因为翻译人员通常会破坏它。但如果你*真的*需要它：

枝条：

```
{% trans %}confirmed{% endtrans %} 
```

Yaml 翻译文件：

```
confirmed: 'Congrats <span class="bold">%username%</span>, your account is now activated.' 
```

关于这个的讨论： [https ://github.com/symfony/symfony/issues/2713](https://github.com/symfony/symfony/issues/2713)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-17T23:33:06.427

如果情况需要大量格式差异，我们可以为不同的语言使用单独的树枝片段。[我为此写了一个小博客。](https://kkl.tips/formatting-translation-messages-with-twig-xlf-symfony)

```
{# templates/translations/user_message.pl.html.twig #}
{{ 'msg.my_favourite_language_is' }}<b>{{ 'langnames.elfic_language' | trans | lower }}</b>!

{# templates/translations/user_message.en.html.twig #}
{{ 'msg.my_favourite_language_is' }}<i>{{ 'langnames.elfic_language' | trans | ucfirst }}</i>!

{# templates/pages/index.html.twig #}
{% set locale=app.request.locale[:2] %}
{% include 'translations/calculator_message.' ~ locale ~ '.html.twig' %} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-15T09:52:11.100

翻译文件用于翻译，设计和布局是视图层的一部分（即：模板引擎（twig））。您可以将其拆分为两部分：`congrats`和`account.activated`.

# c++ - 无法执行 imwrite 可以使用 imshow 看到的图像

> ID：14891981
> 
> 赞同：0
> 
> 时间：2013-02-15T09:49:09.427
> 
> 标签：c++, opencv

我正在使用 opencv，并且我有一个可以使用 imshow() 看到的框架，但是当我使用 imwrite 将其保存在磁盘上时，我得到了一个黑色图像。

```
 ......  
// frame *= 1/255; even converting the color before writing it didn't help
cv::sqrt(frame,frame);
cv::imwrite("name.tif",frame);
frame *=1/15.96;
imshow("frame",frame); //it works fine 
................ 
```

知道为什么它不起作用。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-18T06:58:33.950

您在这里所做的是执行了 imwrite()，然后对帧执行了数学运算，然后执行了 imshow()。

因此，您正在编写和查看 2 个不同版本的 Mat 框架。如果您已验证 .tiff 扩展名有效，则 sqrt() 可能会导致黑框。尝试：

```
cv::sqrt(frame,frame);

frame *=1/15.96;

cv::imwrite("name.tif",frame);
imshow("frame",frame); 
```

现在你可以确定你正在写你所看到的。如果两者之间仍然存在差异，请尝试对其他图像格式执行相同操作

# asp.net - 双表单提交 - 服务器端的选项

> ID：14891982
> 
> 赞同：1
> 
> 时间：2013-02-15T09:49:17.960
> 
> 标签：asp.net, double-submit-prevention

在我的 ASP.NET 应用程序中...

我正在寻找通过在隐藏字段中与服务器上的值进行比较的令牌来阻止用户双重提交表单。

就在服务器端存储令牌而言，我没有使用会话状态，唯一的另一个地方是我宁愿避免使用的数据库。还有其他地方可以存放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:59:05.607

您可以使用 `UseSubmitBehavior="false"`来防止重复提交表单。一个按钮的例子：

```
<asp:Button ID="bt" runat="server" UseSubmitBehavior="false" 
       OnClientClick="this.disabled=true;"  OnClick="bt_Click" /> 
```

# c++ - 与对象创建混淆

> ID：14891983
> 
> 赞同：0
> 
> 时间：2013-02-15T09:49:17.747
> 
> 标签：c++, object

我只是在阅读一篇文章并通过以下代码

```
int var  = int(); 
```

谁能告诉我遵循上述概念而不是使用 new 运算符或通用堆栈对象创建对象的重要性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T09:50:12.063

该语法还会对变量进行**值初始化**。相当于写`int var = 0;`。

一个简单的`int var;`不会这样做（在大多数情况下） - 它会使变量未初始化。

`new`将动态分配对象，并且只应在真正需要时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:52:28.217

这行代码避免了收到“未启动值”之类的警告或获得默认的 NULL 值。这就像给你一个保证，你没有在一个根本不存在的变量上工作。

# random - nVidia CG语言着色器中的随机值（Unity）

> ID：14891985
> 
> 赞同：0
> 
> 时间：2013-02-15T09:49:20.400
> 
> 标签：random, unity3d, shader, cg

我正在研究 CG 着色器。我正在烘焙一个需要一个随机常数的顶点着色器（在开始时只计算一次）。我知道在 Unity 中将值从脚本传递到着色器非常容易，但我想知道是否有任何方法可以让*着色器*为我创建这个随机常量。到目前为止，搜索这个对我没有多大帮助。所以感谢您的帮助！

牛扒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T05:37:12.480

并不真地。您可以使用其他一些参数（如模型的时间或 x 位置）并运行 frac() 或其他东西来获得 cgheesy 随机值，但在着色器中没有直接的方法（这是远程有效的）。

# javascript - JavaScript 中的“这个”。引用工厂内的对象

> ID：14891992
> 
> 赞同：2
> 
> 时间：2013-02-15T09:50:16.273
> 
> 标签：javascript, oop, reference, this

我用 javascript 编写了一些类，并为它们编写了一些 FunctionFactories。但我认为我做错了一些事情。

我重命名了我的代码中的一些内容，以便您更好地理解它。

所以第一类是“根”类。这个班有孩子，我稍后会添加。

```
function templateRoot(){
    this.id = "root";
    this.parent = null;
    this.children = [];

    this.editable = true; // bla

    this.render = function(){
        $.each(this.children,function(i,obj){
            this.children[i].render();
            var baseButtons = this.getBaseButtons();
            $('#'+this.id).append(baseButtons);
        });
    };
    this.addBase = addBaseFactory(this);
}; 
```

属性“addBase”获取一个由 addBaseFactory 提供的函数...

```
function addBaseFactory(that){
    return function(){
        var newBase = new base(that.children.length, that.id);
        that.children.push(newBase);
    };
} 
```

...并且用于在“addBase”中生成对象的基类如下所示：

```
function base(count, parent){
    this.id = parent+"_base"+count;
    this.parent = parent;
    this.children = [];
    this.remove = function (){
        $('#'+this.id).remove();        
    };
    this.render = baseRenderFactory(this);
    this.addChild = addChildFactory(this);
    this.getBaseButtons = function(){
        var addAttributeButton = new $("<button>+ Attribute</button>").button();
        var addTextButton = new $("<button>+ Text</button>").button();
        return [addAttributeButton, addTextButton];
    };
} 
```

现在的问题是。当我调试代码并在根对象的“渲染”函数中设置断点时。然后我可以看到，“this”不是根，而是“基础”对象。而且我不知道为什么会这样，因为“根”对象是这个函数的所有者，而我的基础有一个自己的渲染函数，它没有直接在那里调用。

所以即使是行中的“this”

```
$.each(this.children,function(i,obj){ 
```

指“基础”对象。但是“this”在“root”对象中......

希望你能帮我 ：-）

* * *

**编辑：**

*让它运行的代码：*

```
var test = new templateRoot();
test.addBase();
test.render(); 
```

* * *

**编辑2：**

“addBaseFactory”中的“that”指的是正确的“base”对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:59:38.827

我发现你的解释很混乱，所以我可能误解了你想要做的事情，但我*认为*你在嵌套函数中期望与外部函数中的`this`对象相同。这不是JavaScript 的工作方式。嵌套函数与包含函数的继承不同——每个函数都有自己的对象，该对象根据函数的调用方式进行设置。`this``templateRoot()``this``this``this`

这是一种可能的解决方案，它使用嵌套函数可以从其包含函数中看到变量的事实：

```
function templateRoot(){
    var self = this; // save a reference to this for use in nested functions
    this.id = "root";
    this.parent = null;
    this.children = [];

    this.editable = true; // bla

    this.render = function(){
        $.each(self.children,function(i,obj){
            self.children[i].render();
            var baseButtons = this.getBaseButtons();
            $('#'+self.id).append(baseButtons);
        });
    };
    this.addBase = addBaseFactory(this);
}; 
```

`this`可以在[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)中找到有关 JS 工作原理的详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:01:57.433

这不会呈现它的childerens孩子，因为jquery会这样发送每个孩子吗？

```
this.render = function(){
    $.each(this.children,function(i,obj){
        this.children[i].render();
        var baseButtons = this.getBaseButtons();
        $('#'+this.id).append(baseButtons);
    });
}; 
```

顺便说一句，addBaseFactory 在什么范围内被调用？因为我认为基础中的“this”将指代那个范围。

# java - 处理线程池并等待 notifyALL()

> ID：14891994
> 
> 赞同：0
> 
> 时间：2013-02-15T09:50:28.897
> 
> 标签：java, multithreading, concurrency, queue

如何处理一个正在轮询而另一个应在处理后更新新传入数据的线程池。程序执行存在于具有 main 方法和线程池的控制器类中：

主类控制器

```
 public static void main(String[] args) throws InterruptedException {
    RunnableController controller = new RunnableController();
    Accumulator acque = new Accumulator();
        controller.initializeDb();
        controller.initialiseThreads(acque);
        controller.initialUpdate(acque);    

} 
```

Polling 类的 Run 方法：

```
 public void run() {
    int seqId = 0;
    List<KpiMessage> list = null;
    while(true) {
        try{
            list = fullPoll(seqId);
            if (!list.isEmpty()) {
            accumulator.manageIngoing(list);            
            }
        } catch (Exception e){
            e.printStackTrace();                
        }
    }
}

  public List<KpiMessage> fullPoll(int lastSeq) throws Exception {
    Statement st = dbConnection.createStatement();
    System.out.println("Polling");
 ResultSet rs = st.executeQuery("Select * from msg_new_to_bde where ACTION = 804 and SEQ >" + 
   lastSeq + "order by SEQ DESC");  

    return pojoCol;
} 
```

运行方法处理：

```
 public void run() {

    try {
        generate(accumulator.outgoingQueue);
        accumulator.manageOutgoing(accumulator.outgoingQueue, dbConnection);
         } catch (Exception e) {
        e.printStackTrace();
    }
   }
  } 
```

更新到数据库的方法

```
 public void updateDb(Collection<KpiMessage> updatedQueue, Connection dbConnection) throws  
  SQLException{ 
    for(KpiMessage pojoClass : updatedQueue){
            Statement stmtupd = dbConnection.createStatement();
        System.out.println("Updating");
    String query = "UPDATE msg_new_to_bde SET KEYINFO1= 'Processed', KEYINFO2 = 'Updated'
   WHERE ACTION = 804"; 

           stmtupd.executeUpdate(query);**My Execution stops here** 
```

最后是一个用于维护所有这些队列的累加器类：

```
 public boolean isUsed = false;
    public synchronized void manageIngoing(List<KpiMessage> list){

    if(this.isUsed){                
        try {
            wait(); 
            System.out.println("first wait");
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
    System.out.println("recived pass after update");
    this.getIncomingQueue().addAll(list);
     //incoming queue copied to outgoing queue
    this.setOutgoingQueue(this.getIncomingQueue());             
    System.out.println("waiting");
    System.out.println("new incoming message");
    this.isUsed = false;
    notifyAll();

}

/**
 * Method which handles synchronization using wait and notify for outgoing messages after   
  polling
 * @param outgoingQueue
 * @param dbConnection 
 */

  public synchronized void manageOutgoing(Collection<KpiMessage> outgoingQueue, Connection 
dbConnection){
    if(!this.isUsed)
    {
        try {
            System.out.println("second wait");
            wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
    this.isUsed = true;
        DBhandler dbhandler = new DBhandler();
    try {
        dbhandler.updateDb(getOutgoingQueue(), dbConnection);
    } catch (SQLException e) {
        e.printStackTrace();
    }
    notifyAll();
}
 } 
```

**我的任务和问题是：**

1.控制器应该同时处理线程轮询器和处理器以及累加器处理传入和传出队列，最后在处理后馈入更新队列以更新数据库

2.我这里的班级只轮询一次，无法更新，执行停止在

3.我的wait(), notifyALL() 句柄在这里是否正确。

**这里如何实现重复轮询和更新？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:49:36.290

很有可能，在这个有五个不同问题的复杂环境中，所有事情都没有完整的答案。在等待这些时，您应该阅读 java.util.concurrent 必须提供的内容，尤其是支持阻塞读取和写入的并发集合。仅当 JDK 类对您来说不够用时，才使用`wait()`and 。`notify()`

# php - Google Playstore 向 Web 服务器发送数据

> ID：14891997
> 
> 赞同：1
> 
> 时间：2013-02-15T09:50:45.240
> 
> 标签：php, android

我们有一个使用我们的网络服务器检查版本的应用程序，如果我们的 android 应用程序与当前的网络服务器版本不匹配，我们将提醒用户更新到 google playstore。问题是每次我们更改应用程序版本时，我们也需要更改服务器版本，如果我们第一次上传服务器版本，没有人可以玩，因为该应用程序在 google playstore 上尚不可用。现在我的问题是，如果我们已上传的新版本在市场上可用，谷歌是否可以将数据发送到我们的服务器，因为如果您在 Playstore 上上传您的应用程序，则需要更多时间发布才能将其发布到市场上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:07:43.370

当您的更新可用时，无法获得通知。此外，这不是一个全有或全无的问题 - 更新在不同地理区域的不同时间也可用。

本质上，对您的应用程序的更新不具有事务完整性。

# php - WordPress $wpdb->insert() 在服务器上不起作用

> ID：14891998
> 
> 赞同：0
> 
> 时间：2013-02-15T09:50:48.083
> 
> 标签：php, wordpress

我有以下代码在本地主机上工作但不在真实服务器上工作。

```
include_once('/home/engforum/public_html/wp-load.php');
global $wpdb, $table_prefix;

$table = $table_prefix . 'users';
$wpdb->insert($table, array(
    'user_login'=>$Fields['Name'], 
    'user_email'=>$Fields['Email'], 
    'user_pass'=>  md5($Fields['Password']), 
    'user_nicename'=>$Fields['Name'], 
    'user_registered'=>$Fields['DateInserted'], 
    'display_name'=>$Fields['Name']
));

$getRegisterID = $wpdb->insert_id;
$my_user = new WP_User($getRegisterID);
$my_user->set_role("subscriber");

// Update User Meta
update_user_meta($getRegisterID, 'rich_editing', 'true');
update_user_meta($getRegisterID, 'show_admin_bar_front', 'true');
update_user_meta($getRegisterID, 'admin_color', 'fresh');
update_user_meta($getRegisterID, 'nickname', $Fields['Name']);
update_user_meta($getRegisterID, 'first_name', $Fields['Name']); 
```

我也尝试检查错误`exit( var_dump( $wpdb->last_query ) );`但没有帮助。谁能帮我解决。

**更新：**我试图用

```
// display fileds value
 echo "<pre>";
 print_r($Fields);
 echo "</pre>";
 exit();
require_once('/home/engforum/public_html/wp-load.php');
global $wpdb, $table_prefix; 
```

但

```
// Not display fileds value
require_once('/home/engforum/public_html/wp-load.php');
global $wpdb, $table_prefix;

echo "<pre>";
print_r($Fields);
echo "</pre>";
exit();
    ...... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:25:13.693

问题可能是全局 $wpdb, $table_prefix; 正在重置您的 $fields 尝试更改您的 $fields 变量。

# php - 来自 PHP 的 Ajax 多重回显

> ID：14891999
> 
> 赞同：1
> 
> 时间：2013-02-15T09:50:52.063
> 
> 标签：php, jquery, ajax

说，我有一个这样的 php 文件：

```
<?php 
echo 1;
//some functions
echo 2;
//more code to execute
echo 3;
?> 
```

我有一个 html 表单。所以我想要在这个表单中打印一些文本字段中的回声，而 PHP 脚本正在执行，AJAX 和 JQuery 是否可能？

我想要的是用户进入 HTML 页面，按下某个按钮，这个按钮运行 PHP 脚本，每次脚本到达 echo 他可以在文本字段中看到这个 echo。一旦脚本结束 - 我想做一些 JQuery 操作，例如隐藏按钮。是否可以？概述算法是什么？谢谢！

**更新**：
当用户按下按钮时，我需要运行此脚本一次，但每次脚本到达下一个回声时更新文本字段，以便用户按下按钮一次，然后他将在文本字段中看到“1”，一秒钟后他将看到“2” ，再过几秒钟 - “3”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T09:53:14.823

不幸的是，由于只有在请求**完成后**才会调用`success`处理程序，因此您**无法**进行“实时更新”.. :(`.ajax()`

 ****您真正能做的就是将当前状态保存在会话中，在每次回显时结束脚本并重新请求页面继续。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T10:16:16.983

您可以使用两种方式将响应返回为`json`

```
$values = array();
$values['first'] => 1;
$values['second'] => 2;
$values['third'] => 3;
print json_encode($values); 
```

并在客户端 jquery`success`处理程序中

```
$.ajax({
    url: 'yoururl',
    type:'POST',
    data :'{ if any }'
    dataType:'json', /*most important**/ 
    success:function(data){
      console.log(data.first); //first value..etc
    }
    }); 
```

第二种方法

在服务器端追加返回数据

```
$return= '';
$return.=1."||";
$return.=2."||";
$return.=3;
echo $return;exit; 
```

并在 ajax

```
$.ajax({
    url: 'yoururl',
    type:'POST',
    data :'{ if any }'
    success:function(data){
      console.log(data.split("||")[0]); //first value..etc
    }
    }); 
```

});

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T10:01:16.960

您可以返回 PHP 为您创建的 JSON 字符串：

```
$values = array();
$values['first'] => 1;
$values['second'] => 2;
$values['third'] => 3;
print json_encode( values ); 
```

然后将此响应存储在 JavaScript 变量中，并使用它的值在特定时间进行更新：

```
var obj = jQuery.parseJSON( response );
// as an example - to see where this goes
setTimeout(function() { $('#example').html(obj.first); }, 1000); 
```

更多信息：

*   [PHP json_encode](http://php.net/manual/de/function.json-encode.php)
*   [jQuery jQuery.parseJSON((](http://api.jquery.com/jQuery.parseJSON/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T15:58:14.930

使用两个`php`脚本的另一种解决方案：

*   第一个是您的实际数据，它将在会话中存储数据而不是回显它们
*   第二个脚本只会回显存储在会话中的数据

您的客户端`javascript`将调用第一个脚本来启动主要作业。然后调用第二个脚本来检查并显示进度。

检查会话的第二个脚本可以用两种方式编写：

*   只检查并直接返回，有或没有新数据（你每秒调用一次）
*   如果有数据直接返回，否则等待数据（或超时），当脚本返回时你只需调用他

第二种解决方案更接近“实时”，并且会进行更少的`ajax`调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-15T09:56:41.560

一个选项是使用[WebSockets](http://en.wikipedia.org/wiki/WebSocket)，它将允许您的 PHP 和 Javascript 之间的“实时”通信。

本机 WebSockets 仅受较新版本的现代浏览器支持，但旧浏览器有一些方法可以模拟这一点，使用 ajax/iframe/flash

例如，[socket.io](http://socket.io/)客户端可以与 Internet Explorer 5.5 一起使用。****