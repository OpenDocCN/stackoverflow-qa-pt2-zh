# StackOverflow 问答 14879000-14879999

# c# - 碰撞检测在 Arkanoid 风格的游戏中奇怪地工作

> ID：14879002
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:36.333
> 
> 标签：c#, windows-phone-7, xna, collision-detection

这是我在打砖块中的球碰撞代码：

```
Rectangle intersection = Rectangle.Intersect(block.Rect2D, ball.BallRec);

if (intersection.Width > intersection.Height)
{
    ball.yVel = -ball.yVel;
}
else if (intersection.Width < intersection.Height)
{
    ball.xVel = -ball.xVel;
}
else
{
    ball.xVel = -ball.xVel;
    ball.yVel = -ball.yVel;
} 
```

不幸的是，球有时会“融化”到积木中并奇怪地弹跳，尤其是在高速时。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:25:15.797

当检测到碰撞时，仅仅改变球的方向是不够的，你还需要改变位置。如果球移动了 20 个像素，现在是 5 个像素进入块，那么您需要将球移动 5 个像素远离块。

您还需要检查您正在检测碰撞的块是否*在*球的旧位置和新位置之间。

# android - 有没有办法启动股票 Home Launcher（即使它当前未设置为“默认”）？

> ID：14879006
> 
> 赞同：0
> 
> 时间：2013-02-14T16:06:42.420
> 
> 标签：android

我很好奇如果设备具有已被选为默认的备用 Home 应用程序，如何启动股票 Android Home Launcher。

目前我使用

```
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

但这仅在默认启动器是 Android 启动器时才有效。我需要的是一种启动 Android 启动器的方法，而不管用户将什么应用程序设置为他们的本地主页。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:21:55.157

没有人插话，但这是我发现的一种解决方案。

唯一的问题是您需要指定您正在查找的包名称的某些部分（因为当有多个应用程序将自己注册为 HOME 时，您可能会这样做）。

所以下面的代码处理了我测试过的所有设备，但显然绝不是未来的证明。

```
 void getDefaultLauncher() {    

        final Intent intent = new Intent(Intent.ACTION_MAIN); 
        intent.addCategory(Intent.CATEGORY_HOME); 
        final List<ResolveInfo> list = ((PackageManager)getPackageManager()).queryIntentActivities(intent, 0);      

        //String className = null;
        for(ResolveInfo ri : list){
            Log(TAG,"FOUND NATIVE LAUNCH ACTIVITY " + ri.activityInfo.packageName);

                 if(ri.activityInfo.packageName.contains("com.lge") ||
                 ri.activityInfo.packageName.contains("android") || 
                 ri.activityInfo.packageName.contains("motorola.homescreen")  || 
                 ri.activityInfo.packageName.contains("htc.launcher") ){

                startSpecificActivity(ri);
                return;
            }
        }

        Log(TAG,"DIDN'T FIND MATCHING HOME APP");       
    }

 public void startSpecificActivity(ResolveInfo launchable) {

     ActivityInfo activity=launchable.activityInfo;

     ComponentName name=new ComponentName(activity.applicationInfo.packageName,   activity.name);

    Intent i=new Intent(Intent.ACTION_MAIN);
    i.addCategory(Intent.CATEGORY_LAUNCHER);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                    Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
    i.setComponent(name);
    startActivity(i);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T18:57:15.433

```
private void goHome() {
try {   
    PackageManager pm = getPackageManager();
    Intent i = new Intent("android.intent.action.MAIN");
    i.addCategory("android.intent.category.HOME");
    List<ResolveInfo> lst = pm.queryIntentActivities(i, 0);
    if (!lst.isEmpty()) {
       for (ResolveInfo resolveInfo : lst) {
           if ("com.my.package".equals(resolveInfo.activityInfo.packageName)) continue; 
           Intent intent = new Intent();
           intent.setClassName(resolveInfo.activityInfo.packageName, resolveInfo.activityInfo.name);
           intent.addCategory(Intent.CATEGORY_LAUNCHER);
           startActivity(intent);         
           }
    }       
} catch (Throwable t) {
    L.g().log(t);
}
} 
```

# python - python：可以修改单个“主”对象属性的多个对象

> ID：14879008
> 
> 赞同：1
> 
> 时间：2013-02-14T16:06:43.393
> 
> 标签：python, class, oop, pointers, attributes

`master`假设我有一个包含一组参数的对象的单个实例，然后`slave`是应该能够访问和修改主属性的多个对象实例。在我的特定情况下，从属是`wxPython`GUI 对象，其中可能有多个 GUI 控件可以修改相同的参数。

显然，如果我明确提到`master.parameter`从站想要更新它的时间，这是微不足道的。但是我真的不想这样做，因为它需要我编写不同的函数来处理来自每个从属对象的事件。

我目前正在做这样的事情，每个属性`master`都有单独的`get_value`和`set_value`方法：

```
class Master(object):
    def __init__(self):
        self.value = 0

    def get_value(self):
        return self.value

    def set_value(self,value):
        self.value = value

class Slave(object):
    def __init__(self,getfunc,setfunc):
        self.getfunc = getfunc
        self.setfunc = setfunc

    def update(self,value):
        self.setfunc(value)

def run():
    master = Master()
    slave = Slave(master.get_value,master.set_value)

    print "\nMaster: %i\nSlave: %i" %(master.value,slave.getfunc())

    slave.update(1)
    print "\nMaster: %i\nSlave: %i" %(master.value,slave.getfunc())

if __name__ == "__main__":
    run() 
```

我真正想要做的是设置类似 的东西`slave.bound_value`，它的行为就像一个指向 的指针`master.value`，这样当任何`slave`修改它时`bound_value`，相应的属性`master`就会更新。我完全知道 Python 不支持指针，但我想知道是否有一种很好的 Pythonic 方法来实现相同的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:20:29.957

`bound_value`您可以通过制作一个包装对主人和方法的调用的[属性](http://docs.python.org/2/library/functions.html#property)来完成您的要求。这将使它看起来只是类的成员变量。`get_value``set_value``bound_value``Slave`

```
class Slave(object):
    def __init__(self,getfunc,setfunc):
        self.getfunc = getfunc
        self.setfunc = setfunc
    @property
    def bound_value(self):
        return self.getfunc()

    @bound_value.setter
    def bound_value(self, value):
        self.setfunc(value) 
```

`slave.bound_value`然后，您可以在想要获取或设置值时简单地引用它，就像它是一个成员变量一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T18:03:07.603

感谢 bogatron 让我走上了正确的道路——这就是我最终选择的：

```
class Master(object):
    value = 0

class Slave(object):
    def __init__(self,master,attrname):
        self._master = master
        self._attrname = attrname
    @property
    def value(self):
        return self._master.__getattribute__(self._attrname)
    @value.setter
    def value(self,newvalue):
        self._master.__setattr__(self._attrname,newvalue)

def run():
    master = Master()
    slave = Slave(master,'value')

    print master.value,slave.value
    slave.value = 2
    print master.value,slave.value

if __name__ == "__main__":
    run() 
```

# visual-studio - 如何在 VisualStudio 中通过代码块导航/移动光标

> ID：14879009
> 
> 赞同：4
> 
> 时间：2013-02-14T16:06:48.453
> 
> 标签：visual-studio, visual-studio-2012, keyboard-shortcuts

我希望能够通过按or将文本编辑器中**的光标** *（不移动代码行）*向上移动一个块或向下移动一个块。在 jEdit、Leafpad 等中，这只是开箱即用。我不想一次移动整个页面，只需转到我碰巧所在的文本块的开头或结尾即可。`<ctrl>+<uparrow>``<ctrl>+<downarrow>`

具体来说，我想要这个，但对于 VS 2012（不再有宏）： [在 VS2008 中从一个代码块移动到另一个代码块的键盘快捷键](https://stackoverflow.com/questions/9743888/keyboard-shortcut-to-move-from-one-code-block-to-another-in-vs2008)

我看过这些帖子，但它们**不是**我想要的；我不想移动代码，我想将光标移动到我碰巧所在的块的顶部或底部。 [Visual Studio：向上/向下移动行和浏览最近更改的热键](https://stackoverflow.com/questions/313462/visual-studio-hotkeys-to-move-line-up-down-and-move-through-recent-changes/314064#314064) [Visual Studio - 滚动和移动光标](https://stackoverflow.com/questions/11588127/visual-studio-scroll-and-move-cursor)

我也检查了 ReSharper，但似乎无法在那里找到答案。

有谁知道提供此功能的加载项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:09:08.840

将它们绑定到`Edit.PreviousMethod`Options- `Edit.NextMethod`>Environment->Keyboard?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:01:31.417

我删除了绑定到这些快捷方式的所有内容，然后将其绑定到 Edit.PreviousMethod 和 Edit.NextMethod。这将焦点放在编辑器中的方法框上，但是您必须按 Enter 键才能导航到该方法。

我能找到的最好的方法是使用 ReSharper，这是我试图避免的。然而，我是一个极简主义者，ReSharper 挡住了我的路，我几乎一直把它关掉，所以我把它卸载了。

我相信它是 ReSharper.MoveToNextMethod 或 .NavigateToNextMethod，但我已经卸载了它，所以我要继续记忆了。使用它，它会跳到上一个或下一个方法的开头，这不是我想要的，但总比没有好。

**编辑：**我放弃了。我将 c# 代码移至 .Net Core，并在 Code 之外进行所有编辑，使用的文本编辑器采用 Geany、jEdit 等常用键盘快捷键。

# php - Drupal 功能模块路径

> ID：14879010
> 
> 赞同：1
> 
> 时间：2013-02-14T16:06:58.983
> 
> 标签：php, git, drupal, drupal-7

我正在尝试使用 GIT 进行版本控制，并且正在尝试找出功能模块。Drupal 配置的所有模块都存储在它所属的站点中。

谷歌地图前：

```
sites/theme/modules/googlemaps 
```

但我一直将这些功能保存在默认的所有目录中。前任：

```
sites/all/modules/googlemaps 
```

googlemaps 功能和模块是否应该存储在同一路径中？我问是因为我注意到某些东西在推拉时似乎没有被反映。有没有关于如何使用 git 功能的好教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:17:15.753

Drupal 最佳实践鼓励将所有非核心模块存储在“sites/all/modules”中

仅当您进行多站点安装并希望将特定代码段添加到其中一个站点时，您才应将某些内容存储在“sites/sitename.com/modules”中。

就功能而言，模块目录并不关心您如何嵌套模块，只要它们位于“sites/all/modules”目录下即可。所以你想创建 4 个单独的目录来存储你的模块：

“sites/all/modules/contrib”——存储所有下载的社区模块
“sites/all/modules/custom”——存储你的自定义模块“ sites
/all/modules/features”——存储所有生成的功能
/all/modules/patched" - 如果由于某种原因您需要修补贡献模块，请将其与补丁和一些注释放在此处，以便您知道以后如何更新模块。

所以直接回答你的问题。您应该将功能存储在“sites/all/modules”目录中。

编辑：这个问题启发我在我的公司博客上写了一篇博文，进一步阐述上述策略。在[clikfocus.com上查看](http://clikfocus.com/blog/drupal-developer-tip-where-add-drupal-modules)

# sql - 从数据不包含字符串的表中选择非唯一字段

> ID：14879012
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:00.937
> 
> 标签：sql, oracle, select

首先，这就是表格的样子：

```
Checkpoint
==========
trans_id
checkpoint_id

Checkpoint_Data
===============
checkpoint_id
data 
```

`trans_id`不是唯一的`checkpoint`。`checkpoint_id`是唯一的`checkpoint`以及`checkpoint_data`。`Checkpoint_id`链接`checkpoint`和`checkpoint_data`

我想`trans_id`从`checkpoint`关联`data`的`checkpoint_data`不包含某些字符串的地方选择所有的。

我基本上想颠倒这个说法：

```
SELECT ch.trans_id
FROM   checkpoint ch,
       checkpoint_data chd
WHERE  ch.checkpoint_id = chd.checkpoint_id
     AND Upper(chd.data)LIKE Upper('%Example String%') 
```

一个简单的 NOT LIKE 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:34:35.710

或类似的东西......

```
SELECT ch.trans_id
FROM   checkpoint ch
except
SELECT ch.trans_id
FROM   checkpoint ch,
   checkpoint_data chd
WHERE  ch.checkpoint_id = chd.checkpoint_id
 AND Upper(chd.data)LIKE Upper('%Example String%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:28:44.793

像这样的东西？

```
SELECT ch.trans_id
FROM   checkpoint ch
WHERE not exists ( select * from checkpoint_data chd
                   where ch.checkpoint_id = chd.checkpoint_id 
                   AND Upper(chd.data) LIKE Upper('%Example String%')
                  ) 
```

# javascript - Ember.js 数组作为模型的属性

> ID：14879013
> 
> 赞同：19
> 
> 时间：2013-02-14T16:07:09.657
> 
> 标签：javascript, ember.js, ember-data

干杯! 我有一些模型，它的一个属性是一个数组，但由于某些原因（我在服务器上使用 mongoDB，它是嵌入式模型和 ember-data 的问题）我不能做这样的事情：

```
App.Foo = DS.Model.extend({
  ...
  numbers: DS.hasMany('App.Bar')
)};

App.Bar = DS.Model.extend({
  ...
  number: DS.attr('number')
}); 
```

我需要这样的东西：

```
App.Bar = DS.Model.extend({
  numbers: DS.attr('array')
}); 
```

但是ember-data中没有数组类型的属性，怎么办？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-09-29T19:59:05.677

我发现实际上你可以通过不指定类型来开箱即用的数组属性。

```
#coffeescript

AskuWhiteLabel.SomeModel = DS.Model.extend
    some_ids: DS.attr() 
```

我正在使用这个，当我这样做时

```
myModel.set('some_ids', [1,2,3])
myModel.save() 
```

服务器的有效负载确实是我的阵列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-15T11:27:36.720

对于那些和我有同样问题的人：看看这个答案：

> [https://stackoverflow.com/a/13884238/1662820](https://stackoverflow.com/a/13884238/1662820)

或者，您可以传递具有 hasMany 关系的嵌入式模型，并在适配器中为嵌入式模型设置自定义主键（在我的情况下为“数字”）。看看这个测试：

> [https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_without_ids_test.js](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_without_ids_test.js)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-09T19:19:21.623

```
anArrayAttr: DS.attr('raw', { defaultValue: function() { return []; } }) 
```

来自我很棒的同事“Theron Humiston”

# sql - SQL DB2：使用 min(date) 的意外结果

> ID：14879016
> 
> 赞同：1
> 
> 时间：2013-02-14T16:07:21.847
> 
> 标签：sql, db2

这是有问题的脚本：

```
select distinct person, min(pdate) as min_date from db
where ptype like 'A1%'
or (ptype like 'B1%'
and (pdate between '2000-01-01' and '2001-01-01'))
group by person 
```

问题

检索的 min_date 还包括我指定的日期之外的那些。但是，当我取出其中一种 ptype 时，我有：

```
select distinct person, min(pdate) as min_date from db
where ptype like 'A1%'
and (pdate between '2000-01-01' and '2001-01-01')
group by person 
```

然后这个问题就消失了。为什么引入第二个 ptype 会重新调整我指定的更新之外的实例？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:19:22.990

这是因为您现有的查询是以下形式：

```
IF A or (B and D) 
```

- 所以如果 A 为真，则 D 被忽略。您实际上需要以下形式的查询：

```
IF (A or B) and D 
```

像这样：

```
select distinct person, min(pdate) as min_date from db
where (ptype like 'A1%' or ptype like 'B1%') and 
      pdate between '2000-01-01' and '2001-01-01'
group by person 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:14:16.403

```
select distinct person, min(pdate) as min_date from db
where (      ptype like 'A1%'
         or (ptype like 'B1%'))
and (pdate between '2000-01-01' and '2001-01-01')
group by person 
```

一）是假的？

# primefaces - 单击 dataTable 1 中的一行时，如何将行加载到 dataTable 2 中？

> ID：14879017
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:24.017
> 
> 标签：primefaces, datatable

我有一个带有面板和两个数据表的表单。下面的代码已经删除了大部分列，以便于理解。

```
<h:form id="invoiceLookUp"> 
<p:panel>                 
    <f:facet name="header">
        <p:column style="font-weight: bold;">
                        Invoice Selection Criteria
                    </p:column>                    
            </f:facet>
            <h:outputText value="Seq ID"/>
            <p:inputText
                id="invoice_header_seq_id" styleClass="field" size="10"
                value="#{invoiceBean.invoice_header_seq_id}"
            />
            <p:commandButton
                update="invoicesTable" value="Look Up"
                action="#{invoiceBean.addInvoices()}"
            />                
</p:panel>
<p:dataTable
    id="invoicesTable" var="invoice" rows="15" lazy="true" selectionMode="single" 
    value="#{invoiceBean.invoiceList}"
    rowKey="#{invoice.invoiceHeader.invoiceHeaderSeqId}"                
    selection="#{invoiceBean.selectedInvoice}"
>
    <p:ajax event="rowSelect" update=":invoiceLookUp:invoiceLinesTable"/>
    <f:facet name="header"><h:outputText value="Invoice Headers" /></f:facet>
    <p:column sortBy="#{invoice.invoiceHeader.invoiceHeaderSeqId}" id="invoiceSeqId">
        <f:facet name="header">
        <h:outputText value="Seq ID" title="Invoice Header Seq ID"/>
        </f:facet>
        <h:outputText value="#{invoice.invoiceHeader.invoiceHeaderSeqId}" />
    </p:column>
</p:dataTable> 
<p:dataTable
    id="invoiceLinesTable" var="invoiceLine" rows="15" lazy="true" selectionMode="single"
    value="#{invoiceBean.selectedInvoice.invoiceLines}"
    rowKey="#{invoiceLine.invoiceLineSeqId}"                
    selection="#{invoiceBean.selectedInvoiceLine}"
        >
    <f:facet name="header"><h:outputText value="Invoice Lines" /></f:facet>
    <p:column sortBy="#{invoiceLine.invoiceLineSeqId}" id="invoiceLineSeqId">  
        <f:facet name="header"><h:outputText value="Line Seq ID"/></f:facet>
        <h:outputText value="#{invoiceLine.invoiceLineSeqId}"/>
    </p:column>
</p:dataTable>
</h:form> 
```

当您输入 Seq ID 并单击 Look Up 时，表格将按预期填充。当我在 invoicesTable 中选择一行时，出现以下错误：javax.faces.FacesException：找不到标识符为“:invoiceLookUp:invoiceLinesTable”的组件，该标识符引用自“form:invoiceLookUp:invoicesTable”。

谁能告诉我我做错了什么？

# xml - 是否可以通过 XPath 查询 Scala xml.Node？

> ID：14879018
> 
> 赞同：2
> 
> 时间：2013-02-14T16:07:24.913
> 
> 标签：xml, scala, xpath

我需要在 scala 上使用一些复杂的 XPath 查询。

是否有可以在 Scala XML 节点上执行 XPath 查询的库？

像这样的东西：

```
val node: xml.Node = ...;
val result = TheXPathLibrary.query(node, "//a[2]/b[@type='c']/c"); 
```

我已经尝试过使用 scala-xml-jaxen，但我无法编译它。（我最近发布了[这个问题](http://code.google.com/p/scala-xml-jaxen/issues/detail?id=3&thanks=3&ts=1360857501)。）

* * *

我知道您可以在 Scala 中实现与 XPath 查询相同的功能，而无需使用 XPath。但是，这个问题是关于找出一个允许执行 XPath 查询的库。

# php - 通过查询活动链接生成电子邮件

> ID：14879021
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:27.907
> 
> 标签：php, hyperlink

```
$result = mysql_query("SELECT * FROM my_table ORDER BY company_name");

echo "<center><table border='1px' style='font-size: 12px;'>
<center><tr>
<th>Contact Email</th>
</tr></center>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['contact_email'] . "</td>";
  echo "</tr>";
  }
echo "</table></center>"; 
```

我需要将电子邮件地址打印为链接，以便用户只需单击电子邮件地址即可开始发送电子邮件。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:08:55.903

你可以这样做

```
echo  "<td><a href='mailto:".$row['contact_email']."'>".$row['contact_email'] ."</a></td>"; 
```

**笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:09:15.323

没什么神奇的...

```
echo <<< EOL
<td><a href="mailto:{$row['contact_email']}">{$row['contact_email']}</a></td>

EOL; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:09:51.793

那将是这样的：

```
echo "<td><a href='mailto:" . htmlspecialchars($row['contact_email']) . "'>" . htmlspecialchars($row['contact_email']) . "</a></td>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T16:09:31.547

做就是了：

```
echo '<td><a href="mailto:' . $row['contact_email'] . '">' . $row['contact_email'] . '</a></td>'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T16:09:40.753

这是一个电子邮件链接：

```
<a href="mailto:someone@example.com?Subject=Hello%20again"> 
```

# python - 在 python 脚本中使用 argparse 执行 python 脚本

> ID：14879025
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:36.117
> 
> 标签：python, argparse, execfile

我有两个不同的 python 脚本，第一个是使用 argparse 来获取一些额外的参数（我称之为 arg.py），第二个是我的主脚本（main.py）。
我想在 main.py 中调用 arg.py 但我不知道该怎么做。我看了一下命令 execfile 但我没有设法让它工作。
我尝试放入
`execfile('arg.py -h')`
main.py 但 python 尝试查找不存在的文件 'arg.py -h'。有谁知道这是怎么做到的吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:09:25.823

`subprocess.call`您可以使用或将其作为单独的进程运行`subprocess.Popen`。如果您不想将其作为子进程运行，那么它开始变得更加复杂（取决于您的`arg.py`脚本的结构。

`execfile`获取您传递给它的文件并将其包含在当前脚本中——很像`#include`c/c++ 中的预处理器指令（尽管这是动态完成的）。一个非常丑陋的选择`execfile`是：

```
#completely untested.
import sys
def run_script(script_name,*args):
    _argv = sys.argv[:]
    sys.argv = list(args)
    execfile(script_name)
    sys.argv = _argv 
```

# ios - 显示 alertView 后禁止 localNotification

> ID：14879026
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:38.190
> 
> 标签：ios, objective-c, uialertview, uilocalnotification

在我的应用程序中，观看了由用户设置的距离。当距离被覆盖时，会显示一个 AlertView 对话框并播放声音。通过点击 OK 按钮，alertView 消失并且声音停止。当应用程序移动到后台时，方法 UILocalNotification 会处理声音和消息。这工作正常。但...

当应用程序处于前台并且显示和关闭 AlertView 时，UILocalNotification 方法保持活动状态。因此，当应用程序移至后台时，它会（再次）“播放”带有声音的本地通知。

我怎样才能避免这种行为？

我希望消息播放一次。在前台或在后台。不是都。我试图用 if() 语句解决这个问题，但这给了我意想不到的结果。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:22:54.453

打电话

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

当用户在前台关闭警报时。

如果您需要激活其他本地通知，只需取消相关通知即可。

# css - SVG 过滤器，在 Firefox 中过渡

> ID：14879027
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:38.363
> 
> 标签：css, cross-browser, css-transitions, svg-filters

我正在处理一个网页，如果您将鼠标悬停在图像上，它会去饱和。它适用于 Chrome 和 IE。但是，我无法过渡到在 FF 中工作，并且它在 Opera 中根本没有去饱和。

这是我的代码：

```
<!DOCTYPE html>

<head>      
<style type="text/css">
    img:hover {         
        filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'saturate\' values=\'0.0\'/></filter></svg>#grayscale"); /* Firefox */
        filter: gray; /* IE */
        -moz-filter: grayscale(100%);
        -o-filter: grayscale(100%);
        -webkit-filter: grayscale(1); /* Webkit */}

    img {           
        -webkit-filter: grayscale(0);
        -moz-filter: grayscale(0);
        -o-filter: grayscale(0);
        filter: none;
        filter: grayscale(0);}

    img.transition {
        -moz-transition: all 0.5s ease-in-out; /* FF */
        -o-transition: all 0.5s ease-in-out; /* Opera 10.5 */
        -webkit-transition: all 0.5s ease-in-out; /* Webkit */
        transition: all 0.5s ease-in-out;}
</style>
</head>

<html>
<body>
    <img src="http://www.wallpapershd.biz/wallpapers/2012/12/Cardinal-Bird-1024x1280.jpg" width="500" class="transition" />
</body>
</html> 
```

我见过类似的问题，但我是初学者，所以答案有点抽象；您不必自己向我提供代码，而是向我指出一个我可以理解的详细答案。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:56:26.900

为什么不使用从红色到灰色的简单颜色过渡？

# wpf - WPF 捕获窗口内的用户控件引发的异常

> ID：14879028
> 
> 赞同：0
> 
> 时间：2013-02-14T16:07:41.110
> 
> 标签：wpf, exception-handling, event-handling, wpf-controls

我在 WPF 窗口对话框中有几个自定义用户控件，它们可以引发异常。我想要做的是在这些用户控件之一引发异常时仅清除该窗口对话框。但是，这些控件处理它们自己的点击事件，所以我找不到任何地方可以从窗口本身将它们包装到 try-catch 中。

我能想到的唯一可能的解决方法是在我的用户控件中实现一个事件 SomethingWentWrong，并在我的 WPF 窗口中订阅它。但是，在我看来，这似乎是一种非常丑陋的做事方式。

有没有更好的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:10:22.400

没有全局方法可以轻松地在单个`Window`.

您可以潜在地订阅[`Application.DispatcherUnhandledException`](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)，这将为您提供一种捕获发生在`Dispatcher`. 这将处理最典型的用户界面“事件”，但在应用程序范围内。

# hibernate - Hibernate 4.1.1 多租户 CurrentTenantIdentifierResolver 方法，任何示例

> ID：14879030
> 
> 赞同：5
> 
> 时间：2013-02-14T16:07:46.457
> 
> 标签：hibernate, multi-tenant

Hibernate 4.1.1 多租户 CurrentTenantIdentifierResolver 方法，任何示例。我关心的是当我们切换模式/租户时如何更新休眠缓存。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T20:09:11.613

根据[关于多租户的 Hibernate 文档](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch16.html)：

> # 16.3.3\. 缓存
> 
> Hibernate 中的多租户支持与 Hibernate 二级缓存无缝协作。用于缓存数据的键对租户标识符进行编码。

这基本上意味着 Hibernate 不是使用实体的 UID，而是使用返回的标识符`CurrentTenantIdentifierResolver.resolveCurrentTenantIdentifier()`加上实体 UID。这意味着缓存中的每个实体对其模式都是唯一的。

# javascript - 为什么存储对函数的引用然后调用该函数会导致“this”具有窗口上下文？

> ID：14879037
> 
> 赞同：1
> 
> 时间：2013-02-14T16:07:58.930
> 
> 标签：javascript

我正在阅读教程，以便了解 _.bind 和 _bindAll：[http ://blog.bigbinary.com/2011/08/18/understanding-bind-and-bindall-in-backbone.html](http://blog.bigbinary.com/2011/08/18/understanding-bind-and-bindall-in-backbone.html)

该网站有以下代码

```
function Developer(skill) {
  this.skill = skill;
  this.says = function(){
    alert(this.skill + ' rocks!');
  }
}
var john = new Developer('Ruby');
john.says(); //Ruby rocks! 
```

对比

```
function Developer(skill) {
  this.skill = skill;
  this.says = function(){
    alert(this.skill + ' rocks!');
  }
}
var john = new Developer('Ruby');
var func = john.says;
func();// undefined rocks! 
```

为什么存储对函数的引用然后调用该函数会导致 this 具有窗口上下文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:09:45.830

当你执行

```
a.b(); 
```

then`a`是`b`( `this`inside `b`) 的执行上下文，除非`b`是绑定函数。

如果你没有`a`，那就是如果你有

```
b(); 
```

那么它和

```
window.b(); 
```

`window`执行的上下文也是如此`b`。

另请注意

```
a.b(); 
```

是相同的

```
b.call(a); 
```

和

```
b(); 
```

是相同的

```
b.call(); // call replaces its first argument by the global object if it's null or undefined 
```

如果你想绑定上下文，那么你可以（在现代浏览器上）

```
var func = john.says.bind(john);
func(); 
```

或者（更经典地）使用闭包：

```
var func = function(){john.says()};
func(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:17:14.027

### 因为“this”关键字是在*调用*时绑定的，而不是*定义*时。

当你打电话`john.says()`时，就像在做`john.says.apply(john)`.

当你打电话`func()`时，就像在做`func.apply()`.

Yehuda Katz 对“ [JavaScript 函数调用和`this`](http://yehudakatz.com/2011/08/11/understanding-javascript-function-invocation-and-this/)”有很好的解释。

# ruby-on-rails-3.2 - Rails 3.2 wicked_pdf 图像不工作

> ID：14879040
> 
> 赞同：4
> 
> 时间：2013-02-14T16:08:07.727
> 
> 标签：ruby-on-rails-3.2

我正在使用 Rails 3.2 和 wicked_pdf + wkhtmltopdf-binary gem，我试图在 pdf 中渲染图像，但它不起作用，

我试过了

```
<%= image_tag "image.png" %> 
```

和

```
<img src="/assets/images/image.png">
<img src="/public/image.png"> 
```

没有成功。

除了图像之外，pdf 的其余部分渲染得很好，我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T16:15:19.083

wkhtmltopdf 需要知道图像文件的完整路径，并且您要提供相对文件。要么更新它们以使用完整的 URL，要么尝试使用`wicked_pdf_image_tag`帮助程序。我没有尝试过后一种路线，但它应该可以解决你想要做的事情。

这是一个关于它的[GH问题](https://github.com/mileszs/wicked_pdf/issues/36)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-27T12:43:31.817

我以前处理过这个问题。我找到的解决方案是使用请求协议和主机返回图像位置，这样：

```
%img{src: "#{request.protocol}#{request.host_with_port}#{asset_path('image.png')}" } 
```

`%img`我使用的图像标签 ( ) 是带有[haml](http://haml.info/)语法的标签，这里的关键是图像的路径路径，与 html 或 haml 标签无关：

```
"#{request.protocol}#{request.host_with_port}#{asset_path('image.png')}" 
```

wkhtmltopdf 就像一个外部代理：需要绝对路径。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-17T16:51:08.077

我有同样的问题图像没有在 pdf 中呈现，我发现`wkhtmltopdf 0.12.6`引入了一项重大更改，从现在开始，默认情况下本地文件访问将被阻止，并且要启用它，我们必须明确添加`enable_local_file_access: true`我们的 pdf 正在呈现的位置. [您可以按照此处](https://github.com/mileszs/wicked_pdf#advanced-usage-with-all-available-options)的预先使用说明进行操作。

# android - 在android中使用多项选择列表进行联系人选择如何一键选择所有联系人

> ID：14879045
> 
> 赞同：0
> 
> 时间：2013-02-14T16:08:33.040
> 
> 标签：android, list, android-listview, multiple-choice

嗨，我正在使用多项选择列表，谁能告诉我应该如何在任何按钮单击事件中选择所有项目，或者如何在按钮单击事件中取消选择所有项目

我的代码在这里

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contact_list);

    findViewsById();
    PhoneContacts pc = new PhoneContacts(ContactList.this);
    pc.readContacts();

    for (int i = 0; i < pc.allPhoneNumbers.size(); i++) {

        _allNumberAndNameMergeList.add(pc.allContactName.get(i) + "\n"
                + pc.allPhoneNumbers.get(i));
    }
    adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice,
            _allNumberAndNameMergeList);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    listView.setAdapter(adapter);

    button.setOnClickListener(this);
}

private void findViewsById() {
    listView = (ListView) findViewById(R.id.list);
    button = (Button) findViewById(R.id.testbutton);
}

public void onClick(View v) {
    SparseBooleanArray checked = listView.getCheckedItemPositions();
    ArrayList<String> selectedItems = new ArrayList<String>();
    for (int i = 0; i < checked.size(); i++) {
        // Item position in adapter
        int position = checked.keyAt(i);
        // Add sport if it is checked i.e.) == TRUE!
        if (checked.valueAt(i))
            selectedItems.add(adapter.getItem(position));
    }

    String[] outputStrArr = new String[selectedItems.size()];

    for (int i = 0; i < selectedItems.size(); i++) {
        outputStrArr[i] = selectedItems.get(i);
    }

} 
```

}

嗨，我正在使用多项选择列表，谁能告诉我应该如何在任何按钮单击事件中选择所有项目，或者如何在按钮单击事件中取消选择所有项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:38:10.277

我将创建扩展 ArrayAdapter 和 ListView 项目的自定义适配器，其中将包含例如 CheckBox。比内部适配器类 getView() 方法处理选定项目的位置以获取当前位置的对象，您可以做任何您想做的事情。你可以看看这个教程 - 12.在ListView中选择多个项目

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# sql - 如果大多数列包含相同的数据，除了两个交替为空的数据，则合并表中的两个不同行

> ID：14879046
> 
> 赞同：0
> 
> 时间：2013-02-14T16:08:35.043
> 
> 标签：sql, select

我有下表：

```
Id      Included    Excluded
13235   null        B,D
13235   E           null    
13236   null        D
13237   null        B,D 
```

包含列和排除列将仅交替填充。结果，我希望看到包含和排除列合并到 Id 13235 的一行中。我的结果应该如下所示：

```
Id      Included    Excluded
13235   E           B,D 
13236   null        D
13237   null        B,D 
```

如何在 SQL 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:09:58.320

尝试使用`MAX`

```
SELECT  ID, 
        MAX(Included) Included,
        MAX(Excluded) Excluded
FROM    TableName
GROUP   BY ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b3d972/1)

# powershell - psexec 参数不正确

> ID：14879050
> 
> 赞同：0
> 
> 时间：2013-02-14T16:08:38.630
> 
> 标签：powershell, psexec

我正在使用 psexec 在系统上执行 .bat。这将对系统进行指纹识别并将信息返回给我。我使用的命令是：

```
psexec \\server -u username -p password -s -i -c .\fingerprint.bat 
```

这适用于大多数服务器，但其中一些不适用于 -i 开关。有没有办法说，如果失败，请尝试在没有 -i 的情况下再做一次？我正在使用 powershell 来执行脚本。

```
$servers = get-content .\input.txt

foreach($server in $servers) {
   psexec \\$server -u username -p password -s -i -c .\fingerprint.bat 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:06:19.040

检查 $LastExitCode 自动变量。这在 PowerShell 调用 EXE 时设置。无论 EXE 返回的退出代码都放在 $LastExitCode 中。我很确定 psexec 返回 0 表示成功，其他任何内容都意味着失败，例如：

```
foreach($server in $servers) {
   psexec \\$server -u username -p password -s -i -c .\fingerprint.bat 
   if ($LastExitCode) {
       psexec \\$server -u username -p password -s -c .\fingerprint.bat 
   }
} 
```

这是使用 PowerShell 技巧，`if ($LastExitCode)`如果 $LastExitCode 不是 0，则计算结果为 true。

# jquery-ui - jQuery UI 透传官方示例：ui is not defined

> ID：14879053
> 
> 赞同：1
> 
> 时间：2013-02-14T16:08:42.453
> 
> 标签：jquery-ui, angularjs, angular-ui

我将 jQuery 直通示例从这里[http://angular-ui.github.com](http://angular-ui.github.com)复制到这个小提琴[http://jsfiddle.net/ilyaD/Xe48t/3/](http://jsfiddle.net/ilyaD/Xe48t/3/)并且它不起作用。我正进入（状态`ui is not defined`

这是JS：

```
angular.module('ui.config', []).value('ui.config', {
   // The ui-jq directive namespace
   jq: {
      // The Tooltip namespace
      tooltip: {
         // Tooltip options. This object will be used as the defaults
         placement: 'right'
      }
   }
}); 
```

我错过了什么？

更新：

我添加`ui`到`angular.module('ui.config', ['ui']).value('ui.config', {`但仍然无法正常工作[http://jsfiddle.net/Xe48t/9/](http://jsfiddle.net/Xe48t/9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:49:24.870

实际上，您不应该在`ui.config`模块上声明值。您在自己的应用程序上声明它，它将优先：

```
angular.module('myApp', ['ui']).value('ui.config', {
  jq: {
    // whatever
  }
}); 
```

请注意，这是在`myApp`

如果您：

*   在正确的地方运行你的 JS（头）
*   让 AngularJS 正确初始化（使用`ng-app`）
*   并加载引导库和 css

[http://jsfiddle.net/Xe48t/12/](http://jsfiddle.net/Xe48t/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:14:52.660

确保包含 AngularUI javascript 文件，然后要使用字符串“ui”。

```
angular.module('ui.config', ['ui']) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:16:19.537

您错过了 ui 依赖项：

```
angular.module('ui.config', ['ui']).value('ui.config', { 
```

[http://jsfiddle.net/Xe48t/4/](http://jsfiddle.net/Xe48t/4/)

# sas - 批量加载 w/Proc Append

> ID：14879058
> 
> 赞同：0
> 
> 时间：2013-02-14T16:09:04.130
> 
> 标签：sas

SAS 相对较新，希望将数据（管道分隔的 .dlm）批量加载到 MySQL 数据库中。无论如何，我已经确定了基础知识，但是我对如何告诉 SAS 数据行的开头和结尾感到困惑。当前语法...

```
proc append base=abc.metrics (bulkload=yes 
                                                            bl_delimter='|'
                                                            bl_options='errors=0' 
                                                            bl_delete_datafile=no)
data=abc_metrics_&jid;
run; 
```

任何想法、指导和评论将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:24:51.570

我认为您不能直接为 MySQL 执行此操作：http: [//support.sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a002938849.htm](http://support.sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a002938849.htm) [http://support。 sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a001752476.htm](http://support.sas.com/documentation/cdl/en/acreldb/63647/HTML/default/viewer.htm#a001752476.htm)

但是，您可以自己写出文件。将 sashelp.class 更改为您的数据集，文件“\server\yourfile.dlm”，如果需要 | 在〜之前的最后一条记录之后，删除+（-1）。

```
data _null_;
set sashelp.class;
file "c:\temp\test.dat" dlm='|' lrecl=32767;
put "!" @;
put name $ age height weight @;
put +(-1) "~";
run; 
```

然后你可以像往常一样调用 MYSQL 的批量加载工具（不管是什么）；您可以使用直通连接，即

```
proc sql;
connect to odbc (connection-information);
execute ("load file.dlm into table") by odbc;
quit; 
```

（显然那里的 sql 语法很糟糕，但这就是概念——“”中的任何内容都直接在 MySQL 机器上作为 MySQL 代码执行，就好像您直接在 DB 的界面中一样）。

或者，如果 MySQL 有类似 Oracle 的 SQL*Loader 之类的东西，您可以使用“x”命令从命令行调用它，假设您可以访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:05:27.123

据我所知，您不能直接从 SAS“批量加载”到 MySQL，请参阅SAS Access 手册中的[**此说明**](http://support.sas.com/documentation/cdl/en/acreldb/65247/HTML/default/viewer.htm#p0141j0b5j68k0n1m2eryhu0u1in.htm)。

因此，最好的办法是创建一个分隔文本文件（可能使用`PROC EXPORT`）并使用 mysql 实用程序。这是[**以前的 SO question**](https://stackoverflow.com/q/1626059/1275871)，其中包含各种解决方案，尤其是关于`load data local infile`命令的问题。

# java - eclipse 创建新的 .properties 文件

> ID：14879084
> 
> 赞同：0
> 
> 时间：2013-02-14T16:10:12.940
> 
> 标签：java, eclipse, svn

我需要创建一个新的 .properties 文件，当我创建一个新文件然后将其名称更改为 .properties 时，它在文件旁边显示一个问号。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:14:37.730

由于你的项目是由 SVN 控制的，所以会出现问号，因为它是一个新文件，需要提交，所以它就像一个警报，让用户说*，嘿，不要忘记提交这个新文件*。

不用担心标记，您可以根据需要编辑文件。

当您将文件提交到存储库时，该标记将消失。然后，如果您修改文件，文件中会出现一个星号 (*) 标记，说“*嘿，不要忘记我已被修改，您应该提交我”*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:15:43.783

我假设这个问号来自您的修订控制系统。（如颠覆）

在这种情况下，您可以打开该文件中的上下文菜单，然后单击 Team/Add to repository。

# php - 将 PHP 变量传递到 SQL 选择查询中

> ID：14879087
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:10:18.513
> 
> 标签：php, mysql

好的，所以我有一些 PHP 将变量传递到页面的 URL。PHP 页面选择名为“item1”的变量，然后在变量前面添加一个字符串，如下所示（例如，假设变量为 10）：

```
$v1 = $_GET['item1'];
echo "$v1"; 
$v2 = 'table-';
$v3 = $v2.$v1;
echo "$v3"; 
```

这会在网页上打印“table-10”。杰出的。

现在我想将它传递给 MySQL 选择语句，以便它可以查询名为“table-10”的表：

```
$sql = "select * from $v3"; 
       $result = mysql_query ($sql); 
```

但是，这不起作用。我在这里做了什么很愚蠢的事情吗？任何帮助表示赞赏。

编辑：

感谢所有帮助人员，关于 SQLi 注入，您的评论表示赞赏，但是这是一个仅限本地的系统，没有外部暴露，因此任何漏洞利用都相当不重要。这个系统只是一个概念证明，所以当我真正构建完整的系统时，我会确保它不包含任何漏洞。问题已通过使用反引号解决，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:11:47.890

使用如下查询

```
$sql = "select * from '$v3'"; 
       $result = mysql_query ($sql); 
```

并且不要使用 mysql_* [https://wiki.php.net/rfc/mysql_deprecation](https://wiki.php.net/rfc/mysql_deprecation)。改用 mysqli_*

用它作为

```
 $sql = "select * from '$v3'"; 
           $result = mysqli_query ($sql); 
```

但它仍然容易受到 sql 注入的影响。

采用

```
mysqli_real_escape_string

$v3= $mysqli->real_escape_string($v3);

   //Now this is the string with special chars escaped 
```

现在在查询中使用它作为

```
$sql = "select * from '$v3'"; 
           $result = mysqli_query ($sql); 
```

[simonwhatley](http://www.simonwhatley.co.uk/how-to-fix-a-sql-injection-attack)博客上的一篇文章解释了它和处理它的措施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:12:20.497

试试这个：

```
$result = mysql_query ($sql) or die(mysql_error()); 
```

顺便说一句，您的代码容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。使用 PDO 扩展而不是 mysql_* 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:33:52.260

1.  因为表名中有一个连字符，所以您需要在 SQL 字符串中用反引号字符将其包装起来，以便 mySQL 识别它。例如：

    ```
    SELECT * FROM `table-10` 
    ```

2.  因为您接受表名的一部分作为`$_GET`变量，所以它容易受到 SQL 注入攻击。这意味着黑客可以发布一个`$_GET['item1']`包含其他 SQL 命令的值，并在您不知情的情况下执行这些命令。通过这样做，可以从您的数据库中找出他想要的任何数据，也可以修改数据。

    为避免这种情况，您需要“清理”输入。在您的情况下，由于您知道该值应该始终是一个数字，因此将其强制为整数就足够了，因此它会丢弃黑客可能传递的任何偷偷摸摸的额外查询数据。例如：

    ```
    $v1 = (int)$_GET['item1']; 
    ```

    （另请注意，如果`item1`根本没有通过，那么当您尝试引用它时，PHP 会抛出一条警告消息。我现在将忽略它，但您也应该修复它）

3.  您没有提供太多关于您的数据库结构的信息，但是您提供的代码中给出的提示指向一个非常糟糕的数据库设计。因为这是一个很大的话题，所以我不会在这里详细介绍，但可以说动态表名通常是一个坏主意，就像没有`WHERE`子句的 select 一样。并且`SELECT *`在某些圈子中也不受欢迎，因为最好明确指定字段（尽管`*`如果您有很多字段，这可能是一个有用的快捷方式）。

4.  最后，请避免使用旧`mysql`功能。它们已经过时了。该`mysqli`库非常相似且易于切换。（如果您正在阅读基于旧`mysql`功能的教程，那么您应该找到一些更好的教程！）

# azure - 当文件名以问号结尾时，无法从 Windows azure 存储中删除 blob

> ID：14879089
> 
> 赞同：1
> 
> 时间：2013-02-14T16:10:26.733
> 
> 标签：azure, azure-storage, azure-blob-storage

我试图从 Windows azure 管理门户中删除一些以 .jpg?12312223 和 .jpg?zz=23 （随机数）结尾的文件，但它永远不会起作用。我还尝试从 CloudBerry Explorer for Azure Blob Storage 中删除它们并收到错误消息。

有什么办法可以删除这些文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:48:26.343

如果您正在寻找其他工具来执行此操作，我建议您尝试Cerebrata ( [http://www.cerebrata.com](http://www.cerebrata.com) )的**Azure Management Studio 。**该工具目前处于公测阶段，可以从 Cerebrata 的网站主页下载（披露：我是 Cerebrata 团队的一员）。

如果您尝试通过存储客户端库执行此操作，则可以尝试以下操作：

```
 CloudStorageAccount storageAccount = CloudStorageAccount.DevelopmentStorageAccount;
        CloudBlobContainer blobContainer = storageAccount.CreateCloudBlobClient().GetContainerReference("images");
        CloudBlockBlob blobWithSpecialCharacters = blobContainer.GetBlockBlobReference("filename.txt?j=123123");
        using (MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes("This is sample text")))
        {
            blobWithSpecialCharacters.UploadFromStream(ms);
        }
        blobWithSpecialCharacters.Delete(); 
```

# asp.net - 为什么表单身份验证不会阻止 css 在生产中加载？

> ID：14879097
> 
> 赞同：0
> 
> 时间：2013-02-14T16:10:51.960
> 
> 标签：asp.net, .net, forms-authentication

我在这里发现了几个不同的问题，解释了如何确保 CSS 在没有用户登录的情况下正确加载：[CSS not being applied on non authenticated ASP.NET page](https://stackoverflow.com/questions/55594/css-not-being-applied-on-non-authenticated-asp-net-page)。

为什么这个问题只发生在开发环境，而不是生产环境？如果问题是 web.config 说未经身份验证的用户无法访问 css 文件，那么为什么它在生产中可以正常工作？似乎在 web.config 中应该阻止在生产和开发中的访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:44:14.433

答案很简单。

在您的开发环境中，这是一个提供所有静态和动态内容的 asp.net 引擎。因此，授权规则适用于两者。

在您的产品中，iis 将动态请求路由到 asp.net 页面处理程序，但对静态内容的请求由 iis 处理。因此，授权不适用，因为 asp.net 不涉及对 jpg、csses 和其他静态资产的请求。

如果您想要环境之间的统一语义，则必须为所有请求打开运行所有托管模块，这是您的 asp.net Web 应用程序的设置。它通过 asp.net 路由所有请求，这导致引擎为所有请求应用所有模块（包括 url 授权模块）。

# c# - Jquery datepicker在第一次点击时不弹出，但在第二次点击时弹出

> ID：14879098
> 
> 赞同：0
> 
> 时间：2013-02-14T16:10:54.037
> 
> 标签：c#, javascript, jquery, asp.net, datepicker

我遇到了 jquery datepicker 的问题。

我将 jquery datepicker 附加到 javascript 函数中动态生成的文本框。

问题是日期选择器在第一次单击时不会弹出，如果我在 javascript 函数中放置断点或警报，那么日期选择器会在第一次单击时弹出。

这是我正在使用的 JavaScript 函数：

```
function CalendarPopUpOnClick(TextBoxId, HiddenFieldId) {
    if (TextBoxId != undefined) {
        $('#' + serverIdPrefix + TextBoxId).keypress(function (event) {
            event.preventDefault();
        });
        var dateTimeDueDate = $('#' + serverIdPrefix + HiddenFieldId).val();
        var dateTimeArrDueDate = dateTimeDueDate.split(" ");
        var dateOnlyDueDate = dateTimeArrDueDate[0];
        $('#' + serverIdPrefix + TextBoxId).val(dateOnlyDueDate);

        setTimeSpanBeginInput = function () {
            var dateTime = $('#' + serverIdPrefix + HiddenFieldId).val();
            var dateTimeArr = dateTime.split(" ");
            var dateOnly = dateTimeArr[0];
            $('#' + serverIdPrefix + TextBoxId).val(dateOnly);
        }
        $('#' + serverIdPrefix + TextBoxId).datepicker({
            dateFormat: 'yy-mm-dd',
            onSelect: function (dateText) {
                $('#' + serverIdPrefix + HiddenFieldId).val(dateText + ' 12:00:00 PM');
            },
            onClose: setTimeSpanBeginInput
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T07:51:19.213

谢谢你们，

抱歉更新晚了。

我已经使用以下代码进行了此操作。

正如@adeneo 指出的那样，我正在使用 C# 和 Asp.Net。

我正在从后面的 C# 代码创建两个动态文本框，并将 javascript 函数添加到文本框的 onclik 事件中，如下所示：

```
 DeliveryDateTextBox.Attributes.Add("onClick", "javascript:CalendarPopUpOnClick('" + DeliveryDateTextBox.ClientID + "','" + Hiddenfield_DeliveryDateTextBox.ClientID + "');");

DueDateTextBox.Attributes.Add("onClick", "javascript:CalendarPopUpOnClick('" + DueDateTextBox.ClientID + "','" + Hiddenfield_DueDateTextBox.ClientID + "');"); 
```

并在 Javascript 文件中添加以下代码：

```
$(document).ready(function()
{
/* Get id prefixes for checkboxes, checkbox control elements */
var exampleId = $("input[use='proprietary']").attr("id");
var serverIdPrefixEndPos = exampleId.indexOf("exampleID");
serverIdPrefix = exampleId.substring(0,serverIdPrefixEndPos);

/* Datepicker BEGIN */
setTimeSpanBeginInput = function(){
                                var dateTime = $('#'+ serverIdPrefix +'timeSpanFromDeliveryDateHiddenField').val();
                                var dateTimeArr = dateTime.split(" ");
                                var dateOnly = dateTimeArr[0];
                                $('#'+ serverIdPrefix +'timeSpanFromDeliveryDate').val(dateOnly);
                            } //when calendar closed, copy hidden field value to main date field
$('#'+ serverIdPrefix +'timeSpanFromDeliveryDate').datepicker({dateFormat: 'yy-mm-dd', onSelect: function(dateText){ $('#'+ serverIdPrefix +'timeSpanFromDeliveryDateHiddenField').val(dateText + ' 12:00:00 PM'); }, onClose: setTimeSpanBeginInput});

setTimeSpanEndInput = function(){
                                var dateTime = $('#'+ serverIdPrefix +'timeSpanToDateHiddenField').val();
                                var dateTimeArr = dateTime.split(" ");
                                var dateOnly = dateTimeArr[0];
                                $('#'+ serverIdPrefix +'timeSpanToDeliveryDate').val(dateOnly);
                            } //when calendar closed, copy hidden field value to main date field
$('#'+ serverIdPrefix +'timeSpanToDeliveryDate').datepicker({dateFormat: 'yy-mm-dd', onSelect: function(dateText){ $('#'+ serverIdPrefix +'timeSpanToDateHiddenField').val(dateText + ' 12:00:00 PM'); }, onClose: setTimeSpanEndInput});

/* Datepicker END */

});//end document ready 
function CalendarPopUpOnClick(TextBoxId, HiddenFieldId) 
{

    if (TextBoxId) {
        var textBox     = $('#' + serverIdPrefix + TextBoxId),
            hiddenField = $('#' + serverIdPrefix + HiddenFieldId);

        textBox.focus();

         $(":input").bind('paste', function(e) {
        setTimeout(function() {
         var dateval =hiddenField.val();
              if(dateval.indexOf('0001-01-01')==-1)
                textBox.val(  hiddenField.val().split(" ")[0]  );
              else
                textBox.val('');  
        }, 100);
        });            

        textBox.keypress(function(event) {event.preventDefault();});
        hiddenField.keypress(function(event) {event.preventDefault();});
        var dateTime = hiddenField.val();
        var dateTimeArr = dateTime.split(" ");
        var dateOnly = dateTimeArr[0];
        textBox.datepicker({
            dateFormat: 'yy-mm-dd',
            onSelect: function (dateOnly) {
                hiddenField.val(dateOnly + ' 12:00:00 PM');
            },
            onClose: function() {
              var dateval =hiddenField.val();
              if(dateval.indexOf('0001-01-01')==-1)
                textBox.val(  hiddenField.val().split(" ")[0]  );
            }
        });
       textBox.datepicker().datepicker('show');
    }
} 
```

# windows - windows %PATH% 变量 - 如何在 ';' 上拆分 再次在 CMD shell 中

> ID：14879105
> 
> 赞同：9
> 
> 时间：2013-02-14T16:11:33.577
> 
> 标签：windows, for-loop, batch-file, path, cmd

我刚刚检查了似乎很有帮助并且在 Windows XP 上运行良好的[stackoverflow 。](https://stackoverflow.com/questions/5471556/pretty-print-windows-path-variable-how-to-split-on-in-cmd-shell)但使用 Windows 7 时，由于某些不明原因，它不起作用。

`PATH`变量看起来像这样

```
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\QuickTime\QTSystem\ 
```

它显然包含 \ 以及我用来拆分包含此 FOR 循环的批次的分号：

```
 FOR /F "delims=;" %%A IN ("%PATH%") DO (
      echo %%A
   ) 
```

执行不会导致任何错误，但它只提供一个（第一个）令牌

```
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common 
```

我不知道为什么 FOR 终止并尝试了一些在网上建议的变体，但没有一个能奏效。

任何帮助将不胜感激。

基督教

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-14T16:23:50.347

你可以这样做。

```
for %%A in ("%path:;=";"%") do (
    echo %%~A
) 
```

（[来源](https://stackoverflow.com/questions/5471556/)）

您拥有它的方式的问题在于，使用`for /F`开关 `%%A`仅指定第一个令牌。你必须这样做`for /f "tokens=1-9 delims=;" %%A in ("%PATH%")`并`%%A`通过`%%I`这种方式阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-19T16:09:38.693

结合在此页面和其他各种 stackoverflow 页面上学到的东西，OP 可以扩展到：

**如何确保 PATH 变量具有唯一值？**

可以使用数组变量以这种方式完成：

```
REM usage: call :make_path_unique VARNAME "%VARNAME%"
REM 1: splits VARNAME on ';' and builds an array of unique values (case insensitive)
REM 2: glues the array back into a single variable
REM 3: set the VARNAME to this newly unique-ified collection.
REM
REM From: various StackOverflow pages:
REM     http://stackoverflow.com/questions/5471556/pretty-print-windows-path-variable-how-to-split-on-in-cmd-shell
REM     http://stackoverflow.com/questions/3262287/make-an-environment-variable-survive-endlocal
REM     http://stackoverflow.com/questions/14879105/windows-path-variable-how-to-split-on-in-cmd-shell-again
REM
:make_path_unique
  setlocal EnableDelayedExpansion
  set VNAME=%~1
  set VPATH=%~2
  set I=0
  for %%A in ("%VPATH:;=";"%") do (
    set FOUND=NO
    for /L %%B in (1,1,!I!) do (
        if /I "%%~A"=="!L[%%B]!" set FOUND=YES
    )
    if NO==!FOUND! (
        set /A I+=1
        set L[!I!]=%%~A
    )
  )
  set FINAL=!L[1]!
  for /L %%n in (2,1,!I!) do (
    set FINAL=!FINAL!;!L[%%n]!
    set L[%%n]=
  )
  for %%P in ("!FINAL!") do (
    endlocal
    set %VNAME%=%%~P
  )
  exit /b 0 
```

步骤总结：

1.  for循环在';'处拆分PATH 并妥善管理报价
    1.  for 循环查看所有先前存储的路径
    2.  如果这是要添加的新路径，则仅扩展数组
2.  将数组包粘合在一起，边走边清除数组变量
3.  替换路径并清除临时变量
4.  从函数返回，没有错误。

调用，当然，与：

```
set PATH=%PATH%;%MY_PATH_ADDITIONS%
call :make_path_unique PATH "%PATH%" 
```

# php - PHP“占位符”结果 - 选项卡

> ID：14879107
> 
> 赞同：1
> 
> 时间：2013-02-14T16:11:41.190
> 
> 标签：php, tabs, html-lists

构建一个为患者查询光学图像数据库的应用程序。结果按日期排序并组织到选项卡中。每个患者都可以根据他们的就诊历史拥有任意数量的标签。我的标签在页面顶部水平组织。当只有一行结果选项卡（无论有多少）时，页面看起来不错。但是，如果选项卡的数量超过了第一行中可以包含的数量（大约 10 个），则开始第二行。`div`这会在我的结果选项卡和保存其内容的选项卡之间产生差距。

我想知道的是是否可以创建额外的“占位符”选项卡来填充这个空白空间，以及我将如何去做。显然每个病人的结果都是不同的，所以我需要制作足够多的额外标签来填补任何大小的空白。

**代码：**

```
<ul class="tabs" id="results">
    <?php
    if(isset($_GET['id']) && $_GET['id'] != '')
    {
      $id = $_GET['id'];

      $query = "select * from SHOT join VISIT on VISIT.ID=SHOT.VISIT_ID JOIN PATIENT ON SHOT.PATIENT_ID=PATIENT.ID where SHOT.PATIENT_ID=
            " . $id . " order by VISIT.VISIT_DATE DESC;";

      $res = mysql_query($query);
      //Here we count the number of returned rows. If it returned nothing then it will store 0.
      $count = mysql_num_rows($res);
      $i = 0;
      $j = 1;
      if($count > 0)
      {
            $previous_vdate = '';
            while($row = mysql_fetch_array($res))
            {
                    $id = $row['ID'];
                    $vdate = $row['VISIT_DATE']; 
                    $img = $row['IMG_FILENAME'];
                    $subdir = $row['SUBDIR'];
                    $subsubdir = $row['SUBSUBDIR'];

                    if ( strcmp("$vdate", "$previous_vdate") != 0)
                            {

                                    $formatted_vdate = explode(" ", $vdate);
                                    $formatted_vdate = explode("-", $formatted_vdate[0]);
                                    $visit_date = $formatted_vdate[1] . "-" . $formatted_vdate[2] . "-" . $formatted_vdate[0];

                                    if ($j == 1)
                                    {
                                            echo "<li class='active' rel='tab" . $j . "'>" . $visit_date . "</li>";
                                    }
                                    else
                                    {
                                            echo "<li rel='tab" . $j . "'>" . $visit_date . "</li>";
                                    }
                                    $previous_vdate = $vdate;
                                    $j++;
                            }
                    $i++;
            }
      }
      else
      {
            echo "<div id='no_result'>No result found !</div>";
      }
      echo "<li rel='tab" . $j . "'>All Dates Combined</li>";
    }
    else
    {
            echo "<p>Something's Broke</p>";
    }
    ?> 
```

感谢所有帮助。如果有任何其他信息可以添加，请告诉我...接下来的几个小时我会在电脑前检查/刷新此页面。

**生成的 HTML：**

```
<ul id="results" class="tabs"><li class="active" rel="tab1">
  04-23-2012
</li><li rel="tab2">
  04-10-2012
</li><li rel="tab3">
  03-05-2012
</li><li rel="tab4">
  06-06-2011
</li><li rel="tab5">
  12-14-2010
</li><li rel="tab6">
  12-14-2009
</li><li rel="tab7">
  12-15-2008
</li><li rel="tab8">
  12-12-2007
</li><li rel="tab9">
  02-07-2007
</li><li rel="tab10">
  11-01-2006
</li><li rel="tab11">
  11-03-2005
</li><li rel="tab12">
  03-13-2002
</li><li rel="tab13">
   All Dates Combined
</li><li> 
```

这是屏幕截图：http: [//imgur.com/5lYpj5Y](http://imgur.com/5lYpj5Y)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:45:00.967

如果您被允许使用 Javascript，我可以建议您使用自动调整：

演示： [http](http://pmbennett.net/demos/autofit-tabs.html) ://pmbennett.net/demos/autofit-tabs.html （通过更改浏览器窗口的大小来尝试）

资料来源： http: [//pmbennett.net/2010/03/26/auto-fit-tabs/](http://pmbennett.net/2010/03/26/auto-fit-tabs/)

缺点：不是纯 CSS 的解决方案

我个人认为一个没有功能的标签，只是为了填补空白，会让用户感到困惑。我认为用户会点击它，什么都不会发生。也许给空白空间一个更轻的（灰色？）背景也更容易。

# android - 如何无限循环 AsyncTask

> ID：14879111
> 
> 赞同：0
> 
> 时间：2013-02-14T16:12:00.017
> 
> 标签：android, android-listview, android-asynctask, runnable

我有以下类型的应用程序

*   从提要中拉低数据价格
*   处理它们并将它们放入我的自定义适配器中
*   在 ListView 中显示价格（所以我调用 setAdapter）。
*   现在最后阶段是以 5 秒的间隔无限重复此操作。

所以我有 AsyncTask 来处理数据下载和 onPostExecute 我更新适配器并显示。

但是我怎样才能以 5 秒的间隔循环整个活动呢？

我是否需要创建一个调用此异步任务的线程并在线程中使用 5 秒睡眠的循环？

谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:23:01.570

您可以使用下载数据的`TimerTask`类及其`scheduleAtFixedRate()`方法，然后使用视图的方法更新您的界面，`post()`从而完全避免 AsyncTask。有更多方法可以做到这一点，我应该知道，因为你想每 5 秒下载一次

问题可能是当数据下载失败或挂起超过 5 秒时该怎么办。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T20:34:01.953

```
 myTimer = new Timer();

     myTimer.schedule(new TimerTask() {
                     @Override
                     public void run() {
                         TimerMethod();
                     }

                 }, 0, 10000); 
             }

     private void TimerMethod()
         {

             getActivity().runOnUiThread(Timer_Tick);

         } 

         private Runnable Timer_Tick = new Runnable() {
             public void run() {

                 new AsyncTask().execute();

             }
         }; 
```

# ios - 使用关联引用在 Objective-C 类别中伪造实例变量 - 错误“使用未声明的标识符 'OBJC_ASSOCIATION_RETAIN”

> ID：14879115
> 
> 赞同：5
> 
> 时间：2013-02-14T16:12:07.817
> 
> 标签：ios, objective-c, cocoa-touch, ios6, automatic-ref-counting

我正在尝试使用`objc_setAssociatedObject`本文中描述的[方法](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)在类别中创建“假”实例变量。

但是，我在 iOS 6.1 中使用 ARC 时收到以下错误：`Use of undeclared identifier 'OBJC_ASSOCIATION_RETAIN`对于以下代码片段：

```
- (void)setStyleName:(NSString *)styleName
{
   objc_setAssociatedObject(self, kDHStyleKey, styleName,
   OBJC_ASSOCIATION_RETAIN);
} 
```

iOS 6.1 有什么变化吗？

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:19:02.507

看来我没有导入：`#import <objc/runtime.h>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-04T09:28:13.223

您必须导入`#import <objc/runtime.h>`才能使用 objc-runtime 提供的关联对象，以便能够伪造类别中的实例变量或属性。

另外我想指出的是，在类别中使用实例变量会给出编译时警告，指出类别中不允许使用 iVar，但如果您使用 @dynamic 类别中的属性，则不会在编译时警告您。相反，当您尝试在类中设置该属性时，它会导致您在运行时崩溃。

# oracle - 如何将 Oracle Advanced Queue 与 Websphere 7.0 集成

> ID：14879117
> 
> 赞同：0
> 
> 时间：2013-02-14T16:12:23.503
> 
> 标签：oracle, jms, websphere, jca

IBM Websphere 文档说可以使用第三方 jms 提供程序：[http ://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc% 2Finfo%2Fae%2Fae%2Ftmj_instp.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.nd.doc%2Finfo%2Fae%2Fae%2Ftmj_instp.html)

在 oracle 文件夹中我找到了资源适配器 ojms.rar，但是如何使用它呢？也许有人将 WAS7 与 AQ 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T23:06:24.847

我自己没有使用过 OracleAQ，但这里是文档的链接；由于 AQ 与 JCA 兼容，您可以从使用[第三方 JCA 1.5 兼容消息提供程序管理消息](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tmp_ep_ra.html)开始。此配置的第一步是[安装资源适配器](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tdat_crtresadp.html)（ojms.rar）。

另外，为了完整起见，让我补充一点，您也可以使用[WebSphere Adapters](http://www-01.ibm.com/software/integration/wbiadapters/index.html?S_TACT=105AD02W&S_CMP=campaign&)访问 AQ 。在这种情况下，您没有将 AQ 配置为 JMS 提供者，而是使用 IBM 提供的适配器来访问 AQ，它充当 AQ 的客户端，并以符合 JCA 的方式向您的应用程序公开 AQ 服务。[您可以在WebSphere Adapter for Oracle E-Business Suite](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.wa_v7/wa/7.0/Oracle.html)的教育助理中找到有关此替代方案的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T10:11:18.760

我最近尝试将 Websphere 与 Oracle AQ 集成，并找到了一种可行的解决方案。我已经在博客中解释了如何做到这一点。[http://itsolutionsarchitect.blogspot.com/](http://itsolutionsarchitect.blogspot.com/)

如果您仍在尝试使其正常工作，请告诉我这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T06:23:47.873

如果您仍在寻找答案，请按照以下步骤安装资源适配器，使用`ojms.rar`

遗憾的是`ojms.rar` 不包含安装所需的类。

下载`mqjra.rar`，解压并`gjra.jar`从提取的文件中取出。

放在`gjra.jar`你的`<WAS installation directory>\lib`

尝试安装资源适配器`with ojms.rar`

它会被安装。如果您遇到问题，请恢复。

# windows - 如何以管理员身份在 rake 任务中运行 shell 命令？

> ID：14879120
> 
> 赞同：3
> 
> 时间：2013-02-14T16:12:30.950
> 
> 标签：windows, shell, rake

我有一个简短的 .cmd 文件，我想在部署过程中运行它。不幸的是，.cmd 文件需要管理员权限。是否可以从 rake 中获得管理员权限，还是需要以管理员身份启动 shell？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T18:16:43.183

你可以试试这个[`runas`](http://ss64.com/nt/runas.html)命令。我不知道您的 rake 任务是什么样的，但是如果您正在运行`Kernel#system`，请尝试

```
task :foo do 
  system "runas /profile /user:#{ENV["COMPUTERNAME"]}/Administrator mybatchfile.cmd"
end 
```

唯一的麻烦是，`runas`在 shell 中提示输入凭据。所以，你必须是互动的。

> irb > system "runas ..."
> 输入 FOOBAR/Administrator 的密码：

关于 SO 的另一个问题有[这个令人讨厌的批处理/WSH 答案](https://stackoverflow.com/a/5969764/3619)。我不知道你把命令放在哪里，这看起来也是交互式的。

您可以尝试`Start-Process`支持显示 UAC 提示的 PowerShell cmdlet。

```
PS> Start-Process mybatchfile.cmd -Verb runas 
```

或者，在瑞克

```
task :foo do
  system "powershell -NoProfile -NonInteractive -ExecutionPolicy Bypass -command \"Start-Process mybatchfile.cmd -Verb runas\""
end 
```

但这也会启动一个 UAC 对话框。整个过程需要互动。您不能拥有交互式构建脚本。您唯一的选择是允许您的构建服务器在 UAC 关闭的情况下运行...然后，您无需执行任何操作，因为默认情况下您的所有提示都是管理员。

# java - 如何使用 xuggle 在 java 中读取实时网络流？（我可以在 ffmpeg 中做到这一点，只是不能 xuggle）

> ID：14879121
> 
> 赞同：8
> 
> 时间：2013-02-14T16:12:34.697
> 
> 标签：java, ffmpeg, live-streaming, xuggle

所以如果我运行：

```
ffmpeg -t 10 -re -i "rtmp://170.93.143.150/rtplive/ app=rtplive/ playpath=e000990f025f0075004d823633235daa swfUrl=http://www.chart.state.md.us/video/mediaplayer/player.swf pageUrl=http://www.chart.state.md.us/video/video.asp?feed=e000990f025f0075004d823633235daa stop=5000 flashver=`LNX 11,2,202,262` live=true" test.flv -report 
```

它给了我一个 5 秒的来自该网络流的视频快照，该视频被放入 test.flv。现在我想在 java 中使用 xuggle 做同样的事情，除了每次我尝试打开容器时它都会出错并将 x 设置为 -1：

```
 public IMediaReader grabStream(IMediaReader reader) throws IOException
  {
    String rtmp = "rtmp://170.93.143.150/rtplive/";
    rtmp = rtmp + " app=rtplive/";
    rtmp = rtmp + " playpath=e000990f025f0075004d823633235daa";
    rtmp = rtmp + " swfUrl=http://www.chart.state.md.us/video/mediaplayer/player.swf";
    rtmp = rtmp + " pageUrl=http://www.chart.state.md.us/video/video.asp?feed=e000990f025f0075004d823633235daa";
    rtmp = rtmp + " flashver=`LNX 11,2,202,262`";
    rtmp = rtmp + " live=true";

    IContainer container = IContainer.make();
    IMediaReader newReader = ToolFactory.makeReader(container);

    int x = container.open(rtmp, IContainer.Type.READ, null, true, false);

    if (x < 0)
    {
      IError ie = IError.make(x);
      System.out.println("Open error: " + ie.getType().toString());
      throw new RuntimeException("failed to open with error" + x);
    }

    return newReader;
  } 
```

也许最好的方法是使用 inputstream 以某种方式将 ffmpeg 流式传输到 xuggle 容器？或者也许还有另一种方法可以将 webstream 流式传输到 java？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T17:44:27.477

rtmp 源字符串应采用以下格式

```
String rtmpSourceUrl = "rtmp://hostname/appName/streamName"; 
```

然后我建议像下面这样创建阅读器

```
IContainerFormat inFormat = IContainerFormat.make();
inFormat.setInputFormat("flv"); // set the input format to avoid FFMPEG
                                    // probing
IMediaReader reader = ToolFactory.makeReader(rtmpSourceUrl);
reader.setQueryMetaData(false);
reader.setBufferedImageTypeToGenerate(-1);
reader.getContainer().setForcedVideoCodec(ID.CODEC_ID_FLV1);
reader.getContainer().open(rtmpSourceUrl , IContainer.Type.READ, inFormat,
            true, false); 
```

这能解决你的问题吗？

# c++ - set 和 compering/sorting functor 或 less 运算符

> ID：14879123
> 
> 赞同：0
> 
> 时间：2013-02-14T16:12:35.617
> 
> 标签：c++, stl, set, functor

我的设置有问题。我不知道我做错了什么。也许你们中的某个人可以帮助我。所以让我们开始吧，我的程序的输出应该是：

```
Iksinski Adam, Kowalski Jan, Nowak Adam, Nowak Jan, 
```

所以它按第一个字符串排序。

这是我的程序：

```
#include <set>
#include <iterator>
#include <algorithm>
#include <string>
#include <iostream>
using namespace std;
class Person{
public:
Person(){}
Person(string v , string v1):nazw(v),imie(v1){}
bool operator<(const Person & K) const
{
    return ((this->getN()>K.getN())?0:1);
    //return ((this->getN()<K.getN())?1:0);
}
string getN()const
{
    return nazw;
}
/*
bool operator()(Person & K, Person & K1)
{
    return ((K->getN()<K1.getN())?1:0);
}
*/
friend ostream& operator<<(ostream & o , const Person&K)
{
    o << K.nazw << " " << K.imie;
    return o;
}
private:
string nazw,imie;
};
struct cmp
{
    bool operator()(const Person &K , const Person &K1)
    {
        return ((K.getN()<K.getN())?1:0);
    }
};
int main()
{
//typedef set<Person> kontener_typ;
typedef set<Person,cmp> kontener_typ;
kontener_typ c;
c.insert(Person("Nowak","Jan"));
c.insert(Person("Nowak","Adam"));
c.insert(Person("Kowalski","Jan"));
c.insert(Person("Nowak","Adam"));
c.insert(Person("Iksinski","Adam"));
std::copy (c.begin(), c.end(), ostream_iterator<Person>(cout, " ,"));
std::cout << std::endl;
} 
```

好的，所以在 main 我只能编辑 typdef 和复制功能（但我需要用它来输出集合）。就像你看到的那样，我试图在 Person 中重载 operator<（因为将 Person 设置为 Person），但它不起作用。我也尝试使用仿函数，但它的输出看起来像

```
Iksinski Adam ,Nowak Adam ,Kowalski Jan ,Nowak Adam ,Nowak Jan , 
```

所以第二个字符串应该被删除。

祝你好运 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:16:01.270

您的代码正在使用您的比较器`cmp`函子对象。它有一个错误：

```
struct cmp
{
    bool operator()(const Person &K , const Person &K1)
    {
        // one of these _should_ be K1
        return ((K.getN()<K.getN())?1:0);
    }
}; 
```

我喜欢以一种可以清楚地比较它们的方式来命名我的变量*，*例如：

```
struct cmp
{
    bool operator()(const Person &left , const Person &right)
    {
        return left.getN() < right.getN();
    }
}; 
```

这澄清了（至少对我而言）运营商正在像这样进行比较： `left < right`.

但是，您还需要按“名字”作为次要条件进行排序，这将使函数看起来像这样：

```
struct cmp
{
    bool operator()(const Person &left , const Person &right)
    {
        if(left.getN() < right.getN())
           return true;
        else if(left.getN() > right.getN())
           return false;
        // assuming the getI() function returns the first name,
        // just as the getN() function returns the last name
        else if(left.getI() < right.getI())  
           return true;
        else
           return false;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:36:01.993

您必须同时按姓氏和名字进行比较：

```
bool operator<(const Person & other) const
{
    if ( getN() < other.getN() )
      return true;
    if ( other.getN() < getN() )
      return false;
    if ( imie < other.imie() )
      return true;
    return false;
} 
```

或者，如果您想使用`struct cmp`：

```
struct cmp
{
    bool operator()(const Person &K , const Person &K1)
    {
      if (K.getN() < K1.getN())
        return true;
      if(K1.getN() < K.getN())
        return false;
      if(K.imie < K1.imie) // will need a friend declaration or a getter() func
        return true;
      return false;
    }
} 
```

如果你有 C++'s `std::tie`，那么任何一个函数的内容都会变得更简单：

```
return std::tie(nazw, imie) < std::tie(other.nazw, other.imie);
return std::tie(K.nazw, K.imie) < std::tie(K1.nazw, K1.imie); 
```

# c - 关于系统例程：unix文件系统的OPEN

> ID：14879127
> 
> 赞同：1
> 
> 时间：2013-02-14T16:12:47.403
> 
> 标签：c, unix

如果我做：

```
fd2 = open ("file", O_RDONLY); 
```

进而

```
fd1 = open ("file", O_RDONLY); 
```

在相同的过程中。我得到两个不同的文件指针吗？我的意思是，我可以用 fd2 将“光标”移动 100 个字节，而 fd1 的光标将保持为零吗？

此外，即使我同时打开 READONLY .. 文件系统是否会在 File 表中创建两个条目？还是只有一个？（不是索引节点表）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:31:12.817

**注意：**初始版本有一个影响结果的复制和粘贴错误。现在修好了。

在试一试的基础上，我写了

```
#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>

int main(int argc, char *argv[]){
  int fd1 = open("/etc/passwd",O_RDONLY);
  int fd2 = open("/etc/passwd",O_RDONLY);
  printf("%d %d\n",fd1,fd2);
  printf("FD1 position = %d\n", lseek(fd1,0,SEEK_CUR));
  printf("FD2 position = %d\n", lseek(fd2,0,SEEK_END));
  printf("FD1 position = %d\n", lseek(fd1,0,SEEK_CUR));
} 
```

哪个返回

```
$ ./a.out 
3 4
FD1 position = 0
FD2 position = 2888
FD1 position = 0 
```

在我的 Mac OS 10.5 机器上和在 Scientific Linux 机器上功能相同的东西（仅在大小上有所不同`/etc/passwd`）。

你会注意到你得到了数字不同`fd`的 s，它们每个都有自己的位置光标。

# rally - 具有多个 OR 子句的 Rally 中的自定义网格查询

> ID：14879131
> 
> 赞同：0
> 
> 时间：2013-02-14T16:12:54.943
> 
> 标签：rally

我正在尝试在 Rally 中编写一个查询，它将向我展示几个项目的所有缺陷，但每次我保存查询时，我都会收到消息“无法解析：解析表达式错误 - 预期的”）”但看到“或“ 反而。”

这是实际的查询：

```
((((Project.Name = "Project A") OR (Project.Name = "Project B")) OR (Project.Name = "Project C")) OR (Project.Name = "Project D")) 
```

我检查了 Rally 的所谓帮助，在我看来一切都设置正确，但也许我遗漏了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:28:30.143

您的查询语法和括号分组看起来不错。我在自定义网格中测试了您上面的确切字符串，它解析得很好 - 没有“无法解析...”错误。也许将您使用的确切查询与上面的示例进行比较？复杂的 AND 和 OR 肯定会令人沮丧。如果您错过了运算符周围的括号或空格，查询引擎会抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T21:26:41.540

仅供参考，我刚刚发现在浏览器中重新加载页面会强制评估更改后的查询表达式，而简单地保存修改后的查询并*不能*可靠地重新评估更改后的查询。

我观察到的症状是查询结果继续抱怨*以前*的查询字符串，即使我已经用不同的命名字段等替换了部分查询。这让我怀疑浏览器缓存，当刷新缓存没有帮助时，然后我浏览器页面是否重新加载，效果很好。

因此，如果您的浏览器页面在您遇到问题和稍后开始工作之间重新加载，那么这可能可以解释原因。

来自关于链接：Rally Build：master-9274，浏览器类型：firefox/19.0，rv：19.0

# bash - 货币换算

> ID：14879133
> 
> 赞同：0
> 
> 时间：2013-02-14T16:12:56.023
> 
> 标签：bash

我被困在这个美元到瑞典克朗的货币转换器和第 12 行的空行上。当前的转换是 1 瑞典克朗 = 0.158193 美元 1 美元 = 6.32138 瑞典克朗。

第 12 行将有类似 SEK="(?(USD) )?" 的内容

我不知道在问号中输入什么。

```
#!/bin/bash

shopt -s -o nounset
declare -i USD # USD
declare -i SEK # SEK
# Title
printf "%s\n" "USD-SEK Currency Convertor"
printf "\n"
# Get the value to convert
read -p "Enter a USD: " USD
# Do the conversion

printf "You will get SEK %d\n" "$SEK"
exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:15:54.937

您可以使用以下方法进行浮点运算`bc`：

```
SEK=$( echo " 6.32138 * $USD " | bc -l ) 
```

***解释：***

Bash 没有构建对*浮点*运算的支持。因此，我们通常使用程序来处理这些操作`bc`。`bc`从标准输入读取算术表达式作为字符串，并将结果打印到标准输出。请注意，该`-l`选项对于保留表达式的小数部分是必需的。

为了从 中获取结果`bc`并将其存储在变量中，我们使用*命令重定向*，即`$(` `)`. `=`请注意，上一个表达式中的前后没有空格。

***完整示例***

```
#!/bin/bash
printf "%s\n" "USD-SEK Currency Convertor"
# Get the value to convert
read -p "Enter a USD: " USD
SEK=$(echo " 6.32138 * $USD " | bc -l )
printf "You will get SEK %s\n" "$SEK"  ;#  NOTE THAT I CHANGED THIS TO %s FROM %f DUE TO THE LOCALE SETTINGS 
```

***输出***

```
$ ./converter.sh 
USD-SEK Currency Convertor
Enter a USD: 10
You will get SEK 63.213800 
```

*请注意，我`declare -i SEK`从脚本中删除了，因为`SEK`变量**不是**整数*

~~的危害`declare -i`。此代码产生：~~

 ~~```
#!/bin/bash
declare -i SEK     ;#    WOOOPS I FORGOT THE declare -i
printf "%s\n" "USD-SEK Currency Convertor"
# Get the value to convert
read -p "Enter a USD: " USD
SEK=$(echo " 6.32138 * $USD " | bc -l )
printf "You will get SEK %s\n" "$SEK" 
```~~ 

这个输出：

```
$ ./converter.sh 
USD-SEK Currency Convertor
Enter a USD: 10
./converter.sh: line 6: 63.21380: syntax error: invalid arithmetic operator (error token is ".21380")
You will get SEK 0.000000 
```

# java - 如何实现扩展类的构造函数

> ID：14879134
> 
> 赞同：1
> 
> 时间：2013-02-14T16:13:02.850
> 
> 标签：java, interface, constructor, extends, implements

这有效：

```
class ABean implements A {
  protected String field1;
  ...
  protected String fieldn;

  public String getField1() {
   return field1;
  }
  ...
}

class BBean extends ABean {
  public BBean(A a) {
    super();
    this.field1=a.getField1();
    ...
    this.fieldn=a.getFieldn();
  }
} 
```

但是编写这个构造函数`B(A a)`很麻烦，不是很实用，而且容易出错，因为如果我`A`在`A`.

我想我可以为 ABean 实现克隆，但这会有类似的问题（因为当我添加/删除字段时需要更新克隆实现）并且这也不允许我有一个`BBean(A a)`构造函数；只有一个`BBean(ABean a)`构造函数，除非我也制作`clone()`了接口的一部分。

那么......*有没有更清洁，更好的实施方式`BBean(A a)`*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:17:42.250

尝试使用组合，而不是使用继承。也就是说，而不是`BBean extends ABean`让你`BBean`有一个构造函数`BBean(ABean a)`。这样，您就可以避免所有关于如何构造新`ABean`in`BBean`代码的细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:22:05.780

如何在您的 ABean 上实现“A”构造函数（复制构造函数），如下所示：

```
class ABean implements A {
    protected String field1;
    ...
    protected String fieldn;

    public String getField1() {
        return field1;
    }
    ...
    public ABean(A other) {
        this.field1=other.getField1();
        ...
        this.fieldn=other.getFieldn();
    }
}

class BBean extends ABean {
    public BBean(A a) {
        super(a);
    }
} 
```

这样，您的 A 的“复制构造函数”映射都在您的 ABean 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:44:03.177

你可以使用反射：

```
class A {}

class B {
public B(A a) {
    String methodName = null;
    try {
        Field[] fields = a.getClass().getDeclaredFields();
        for (Field field : fields) {
            methodName = field.getName().substring(0, 1).toUpperCase()
                    + field.getName()
                            .substring(1, field.getName().length());
            field.get(a);
            this.getClass().getMethod("set" + methodName, field.getClass()).invoke(a, field.get(a));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

# ios - iOS：如何确定 iCloud 中哪个文件更新（版本与上次修改日期）？

> ID：14879135
> 
> 赞同：1
> 
> 时间：2013-02-14T16:13:06.810
> 
> 标签：ios, icloud

我知道我可以获得有关 iCloud 文件的两条信息：版本和上次修改日期。问题是，当我处理两个具有相同名称的 iCloud 文件时，使用版本或上次修改日期来确定哪个更新会更好吗？

在我看来，上次修改日期理论上会更准确，但我看到很多教程说该版本应该用于比较两个文件以确定哪个文件更新。

我想知道更好的做法是什么，以及为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:31:46.307

如果您在单台计算机上并且系统时间一致，则上次修改日期很好。当您使用 iCloud 时，您至少要考虑三个系统时间——至少两个用户设备上的本地时间，再加上 iCloud 服务器认为的时间。即使使用 NTP，也不能保证绝对同步。

`NSFileVersion`存在来解决这个问题 - 你可以向它询问文件的最新版本，它应该找到正确的。它可能有自己的错误会影响结果的准确性，但它至少旨在为您提供正确的答案，而不管时间同步如何。

# objective-c - drawRect 真的会改变 NSView 的背景颜色吗？

> ID：14879138
> 
> 赞同：0
> 
> 时间：2013-02-14T16:13:24.220
> 
> 标签：objective-c, cocoa

在互联网上的任何地方，我都可以读到要更改 NSView 的背景颜色，您可以像这样覆盖它的方法 drawRect ：

```
- (void)drawRect:(NSRect)rect
{
    [[NSColor yellowColor] set];
    NSRectFill(rect);
} 
```

例如[这里](https://stackoverflow.com/questions/2962790/best-way-to-change-the-background-color-for-an-nsview)。

但是，在我的情况下，颜色是在视图顶部绘制的（我再也看不到内容了），这对我来说很合乎逻辑。DrawRect 应该绘制视图，而不仅仅是它的背景。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:19:31.510

您应该`[super drawRect:rect]`在填充背景后调用。否则，您只是替换了超类的实现将绘制的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:17:06.940

您引用的示例是在背景上方显示视图的子视图。

# php - fgetcsv() 不适用于 $_POST 中的变量 $delimiter

> ID：14879142
> 
> 赞同：2
> 
> 时间：2013-02-14T16:13:33.377
> 
> 标签：php, fgetcsv

我无法`fgetcsv()`使用来自的变量`$_POST`

```
(  delimiter = (string)$_POST['delimiter'];) 
```

如果我指定，我会工作：`$delimiter = "\t";`

但不是当我使用： `$delimiter = (string)$_POST['delimiter'];`

1.  HTML

    ```
    <html>
    <body>
    <form enctype="multipart/form-data" action="upload.php" method="post">
            1) Select a delimiter.<br />
            <input type="radio" name="delimiter" value="\t"checked="yes" /> Tab<br />
            <input type="radio" name="delimiter" value=" "/> Space<br />
            <input type="radio" name="delimiter" value=","/> Comma<br />
            <input type="radio" name="delimiter" value=";"/> Semicolon<br /><br />
            <input type="hidden" name="MAX_FILE_SIZE" value="1000">
            2) Send this file: <input name="userfile" type="file"><br /><br />
            3) <input type="submit" value="Send Info">
    </form>
    <br />
    </body>
    </html> 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:16:01.957

Already `$_POST` is a string. Why do you need `(string)` in front of the `$_POST`? Just remove it. Just have:

```
delimiter = $_POST['delimiter']; 
```

This should work.

* * *

Also, you should not use `fgetcsv`, as you aren't fetching a file. You need [`str_getcsv`](http://php.net/manual/en/function.str-getcsv.php).

```
str_getcsv($_POST["csv"], $_POST['delimiter']); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:19:23.647

为什么不让它像这样万无一失：

```
 $options = array(0=> "\t", 1 => "\n");
 $delimiter = $options[ (int) $_POST['delimiter'] ]; 
```

并使用您的选项的键而不是分隔符本身。更加安全和万无一失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-23T00:51:17.210

我遇到了这个问题并通过以下代码解决了它：

```
$delimiter = $_POST['delimiter'];
$delimiter = str_replace("\\t","\t",$delimiter); 
```

很晚了，但希望它可以帮助那些为这个谜团疯狂的人。

# asp.net-mvc - 显示有关身份验证的视图？

> ID：14879143
> 
> 赞同：0
> 
> 时间：2013-02-14T16:13:39.303
> 
> 标签：asp.net-mvc, authentication

在显示有关身份验证的视图时（显示的视图取决于访问者是否是用户）。我面临很多选择。所以我需要你的帮助来告诉我如何处理这种情况：

*   使用 2 个视图（一个用于用户，另一个用于访问者），或者只使用一个视图。
*   使用 2 个动作（一个带有授权过滤器，另一个没有），或者只使用一个动作。

为什么你建议的选择更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:39:26.980

您不必不使用`Authorize`属性。它的主要功能是`User`在上下文中设置，然后默认情况下，它还会检查他们是否已登录。但是，最后一部分也可以通过使用`AllowAnonymous`属性来覆盖：

```
[Authorize]
[AllowAnonymous]
public ActionResult SomeView()
{
    ...
} 
```

因此，现在您的视图将可以`User`使用，并且您可以使用基于身份验证状态的视图动态呈现视图的不同部分：

```
@if (User.IsAuthenticated)
{
    <p>Logged in</p>
}
else
{
    <p>Anonymous</p>
} 
```

**编辑（澄清）**

该`Authorize`属性实际上为您做了两件不同的事情。首先，它设置了识别用户的所有机制：读取 cookie 或其他任何东西，检查身份验证状态，提取用户信息，如果他们通过身份验证，等等。其次，它验证用户实际上已登录。使用`AllowAnonymous`跳过第二部分并允许任何人，无论是否登录，都可以访问该视图，但是这是关键，您仍然需要第一部分来了解您是否有经过身份验证的用户等信息。

因此，简单地说，同时使用`Authorize`和`AllowAnonymous`属性本质上意味着“查看用户是否已登录，但不需要它访问此视图”。这允许匿名用户仍然可以访问该页面，但使您仍然可以向实际登录的用户提供独特或不同的内容。

# continuous-integration - 使用 CruiseControl.Net 发布特定修订

> ID：14879144
> 
> 赞同：0
> 
> 时间：2013-02-14T16:13:39.540
> 
> 标签：continuous-integration, cruisecontrol.net, publishing

我正在设置 CruiseControl.Net 服务器。到目前为止，它只构建了一个项目（.Net 网站），并且我有点知道如何设置单元测试、代码覆盖率等。

我很快需要的是：

*   开发人员不断地向 SVN 提交更改，因此 CCNet 经常构建。
*   CCNet 将在提交验证后立即将最新版本发布到开发服务器（通过单元测试等）。
*   项目经理验证特定版本，以便将其发布到预生产服务器，并从此版本创建 SVN 标签。

最后一点是我的问题所在：我如何准确地进行设置，以便项目经理可以浏览到 CCNet Web 仪表板，选择*以前*的特定构建，然后说“这是我要发布的构建” ?

我相信我的想法在某个地方有缺陷，但我不能指望它。也许 CCNet 不适合进行这些操作？

在我看来，我可以使用 CCNet 创建一个 SVN 标签，并且大部分时间都在主干上工作，但也许我不能？也许是反过来，每次在 SVN 下创建标签时我都应该添加一个 CCNet 项目？

最终目标是我想自动化发布过程：zip 创建（用于归档）、web.config 修改（例如使用 Nant）和网站发布（使用 FTP）。
在所有这些步骤中，我想最大限度地限制手动干预。如果我可以避免每次在 SVN 中创建标签或分支时都向 CCNet 添加一个新项目，那就太好了。

感谢您的帮助，如果它不是很容易阅读，很抱歉，但我的脑海中也不是很清楚......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:52:48.567

由于您可以创建任何任务，因此您应该能够实现目标，但不幸的是不是开箱即用的。

由于您使用 SVN，这一切实际上都取决于修订。我想我会为您的第三个场景创建一个单独的项目，并添加一个PM 将提供修订号的[参数。](http://cruisecontrolnet.org/projects/ccnet/wiki/Parameters)然后基于此，我会在自己的任务中标记来源等。

关于其他点，我认为这是相似的。最近对于 Web 项目，我们开始使用 MSDeploy，并且在每个构建阶段都创建了 MSDeploy 包。然后有一个名为 Deploy 的单独构建，当强制执行时，我们可以选择要使用 MSDeploy 部署的包。

然而，拥有多个环境开始有点像使用 CCNet 进行管理有点矫枉过正，我将在某个时间研究[kwakee](http://www.kwatee.net/)。

# java - Java - 套接字有时只连接 Android

> ID：14879147
> 
> 赞同：0
> 
> 时间：2013-02-14T16:13:55.157
> 
> 标签：java, android, sockets

这真让我抓狂。我知道不允许在 UI Thread 中创建套接字连接，所以我先创建一个单独的线程并尝试连接到本地服务器。在我的 Acer Iconia 选项卡 A500 上的 5 次调试中，有 3 次我看不到从设备传出到本地服务器的单个数据包。（带线鲨）

为什么会这样？这是我的代码：

```
public class MainActivity extends Activity {
  @Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

Thread t= new Thread(){
public void run(){

Socket sck;

try {   

sck = new Socket("192.168.1.96", 7777); 

} catch (Exception e) {

}

}
};

    t.start();
}

} 
```

# google-app-engine - Google App Engine 到 MongoLab 的安全性

> ID：14879148
> 
> 赞同：0
> 
> 时间：2013-02-14T16:14:01.490
> 
> 标签：google-app-engine, servlets, httprequest, mlab

我以以下形式从 GAE 向 MongoLab 发送 HTTP 请求：

```
https://api.mongolab.com/api/1/databases/rival_testdb/collections/testCollection?apiKey=someKey 
```

如果这个请求直接来自客户端，我会非常担心。但是由于这个请求来自 GAE 中的一个 servlet 内部，这是一个安全问题吗？如果可能的话，我怎样才能使它更安全？

如果可能的话，我想使用 MongoLab，但他们的 API 只允许将 API 密钥直接放在请求的 URL 中。因此，对于所有 API 请求，我都无法使用上述 URL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T04:57:24.083

只要您可以保护服务器上的 API 密钥，您就应该很好。您不必担心它会在网络上被嗅探，因为所有通信都是通过 HTTPS 进行的，因此会加密请求字符串和 apiKey。

-将要

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T09:42:27.147

对于大多数公共服务来说，这是一个合理的问题。

专门针对 MongoLab，此讨论在此处进行：https: [//support.mongolab.com/entries/20269612-REST-api-permissions-and-security-best-practice](https://support.mongolab.com/entries/20269612-REST-api-permissions-and-security-best-practice)并且看起来不像它们的安全添加谈论已公开发布。

请查看链接。

话虽如此，我假设您访问 Mongolab API 的唯一方法是从您的 GAE 应用程序中？这至少让任何人都更难从您的应用程序中嗅出 url。

一个好的解决方案是 MongoLab 允许在您进行 REST 调用之前插入 HTTP 标头。在这里，您将有一些标识它是您的 GAE 应用程序的 ID。然后 MongoLab 应该在允许调用执行其工作之前对此进行检查。

# multithreading - 池化：清理池

> ID：14879150
> 
> 赞同：0
> 
> 时间：2013-02-14T16:14:08.247
> 
> 标签：multithreading, atomic, pool, resource-cleanup

我有一个文件服务器连接池。（缓存连接的文件服务器）现在，如果池中有 100 个打开的连接，我想在一段时间后进行清理。

我会在 15 分钟后进行清理。（例如在 15 分钟不活动后关闭 20% 的活动连接）

为此，我需要记住最后一个传入请求的时间戳。（作为静态变量）

```
static DateTime s_lastUse;

//...
UseFileServer()
{
s_lastUse = DateTime.Now;
}
//...
CreateNewConnection()
{
if((DateTime.Now - s_lastUse) > TimeSpan.FromSeconds(900))
{
//do cleanup....
}
} 
```

这在多线程架构中可能吗？也许，如果两个写操作同时发生，则变量中的值已损坏。

.Net 是否确保此写入操作是原子的？

```
s_lastUse = DateTime.Now; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:05:30.293

似乎是原子的：http: [//msdn.microsoft.com/en-us/library/aa691278%28VS.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa691278%28VS.71%29.aspx)

[http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf)

CLI 规范的第 I 部分第 12.6.6 节指出：“当对一个位置的所有写访问大小相同时，符合标准的 CLI 应保证对不大于本机字大小的正确对齐的内存位置的读写访问是原子的。”

# php - 在分叉的孩子上调用 rand/mt_rand 会产生相同的结果

> ID：14879151
> 
> 赞同：4
> 
> 时间：2013-02-14T16:14:08.803
> 
> 标签：php, random, fork

我正在编写一个需要在 PHP 中执行并发任务的脚本。

我做了一个小测试，结果很奇怪。我正在使用 pcntl_fork 生成一个孩子。父进程什么也不做，只是等待子进程完成。

我正在生成 5 个孩子，每个孩子都运行一个函数，该函数生成一个随机数（秒数）并睡眠这么长时间。出于某种原因 - 所有孩子都生成相同的数字。

这是一个代码示例：

```
private $_child_count = 0;

private function _fork_and_exec($func)
{
    $cid = ++$this->_child_count;
    $pid = pcntl_fork();
    if ($pid){  // parent
        return $pid;
    } else {    // child
        $func($cid);
        //pcntl_waitpid(-1, $status);
        exit;
    }
}
public function parallel_test()
{
    $func = function($id){
        echo 'child ' . $id . ' starts'."\n";
        $wait_time = mt_rand(1,4);
        echo 'sleeping for '.$wait_time."\n";
        sleep($wait_time);
        echo 'child ' . $id . ' ends'."\n";
    };
    $children = [];
    for ($i=0; $i<5; $i++){
        $children[] = $this->_fork_and_exec($func) ."\n";
    }
    pcntl_wait($status);
    echo 'done' ."\n";
    exit;
} 
```

示例输出：

```
child 1 starts
sleeping for 1
child 2 starts
sleeping for 1
child 3 starts
sleeping for 1
child 4 starts
sleeping for 1
child 5 starts
sleeping for 1
child 1 ends
child 2 ends
child 3 ends
child 4 ends
child 5 ends
done 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:17:14.837

这是因为所有子节点都以相同的状态开始（fork() 复制了代码和数据段）。而且由于 rand 和 mt_rand 是[伪随机](http://en.wikipedia.org/wiki/PRNG)生成器，它们都会生成相同的序列。

您将不得不重新初始化随机生成器，例如使用进程/线程 ID 或从 /dev/urandom 读取几个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:31:05.230

我真的认为你应该看看[`pthreads`](https://github.com/krakjoe/pthreads)哪个提供了与基于 Posix Threads 的 PHP 兼容的多线程。

简单如

```
class AsyncOperation extends Thread {
    public function __construct($arg) {
        $this->arg = $arg;
    }
    public function run() {
        if ($this->arg) {
            echo 'child ' . $this->arg . ' starts' . "\n";
            $wait_time = mt_rand(1, 4);
            echo 'sleeping for ' . $wait_time . "\n";
            sleep($wait_time);
            echo 'child ' . $this->arg . ' ends' . "\n";
        }
    }
}
$t = microtime(true);
$g = array();
foreach(range("A","D") as $i) {
    $g[] = new AsyncOperation($i);
}
foreach ( $g as $t ) {
    $t->start();
} 
```

输出

```
child B starts
sleeping for 3
child B ends
child C starts
sleeping for 3
child C ends
child A starts
sleeping for 4
child A ends
child D starts
sleeping for 4
child D ends 
```

# azure - 如何将 VM 上传到 Azure

> ID：14879157
> 
> 赞同：0
> 
> 时间：2013-02-14T16:14:25.830
> 
> 标签：azure, virtual, blob

我看到很多关于如何连接到 Azure 和上传 VM 的困惑。它涉及使用 创建管理证书`makecert`并使用 上传`csupload`，并且有很多标志会出错。所以我想我会问这个问题并回答它以节省一些麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:03:28.587

^([（从最初的问题中剪切并粘贴为答案）])

* * *

**基本原则**

1.  您必须安装 Visual Studio 和 Azure SDK。

2.  要连接到 Azure，您需要在本地计算机上创建一个安全证书来识别您。然后转到 Azure 并导入证书。现在，您的本地计算机和 Azure 可以安全地相互通信了。出于这个原因，您不能在一台机器上开始工作并在另一台机器上完成它。在一台机器上工作。

3.  您必须在当前用户证书存储中拥有该证书，**并且**还必须导出到您的硬盘驱动器。您需要硬盘驱动器上的副本才能上传到 Azure，并且需要在证书存储中使用它，因为当您连接到 Azure 时，它​​会在其中查找它。您可以在硬盘驱动器上创建它并导入它，也可以在证书存储中创建它并导出它。以下说明向您展示如何执行后者。

**创建证书**

1.  以管理员身份打开 Visual Studio 命令提示符。（右键单击菜单项，然后单击“以管理员身份运行”。

2.  复制/粘贴以下内容：

    makecert -sky exchange -r -n "CN=MyCertificateName" -pe -a sha256 -len 2048 -ss My "MyCertificateName.cer"

    这将创建证书并将其安装在您的当前用户证书存储中。它不会在您的硬盘驱动器上创建副本。是“我的”关键字导致证书存储在您当前帐户的证书存储中。

3.  通过在开始菜单命令中键入 certmgr 打开证书管理器。您应该在顶部看到证书 - 当前用户。打开 Personal/Certificates，您应该会看到刚刚创建的证书。

4.  右键单击证书，然后单击所有任务、导出。点击下一步。选择否不导出私钥。点击下一步。选择 DER 编码格式。点击下一步。将证书保存在硬盘驱动器上的某个位置，名称与您创建它时使用的名称相同（不必相同，但可以避免混淆）。

**将证书导入 Azure**

1.  登录到 Azure。

2.  单击设置，然后单击管理证书，然后单击上传。

3.  浏览到您刚刚导出并保存的管理证书，然后上传。

4.  从上传的证书中复制订阅标识符和指纹并将它们粘贴到文本文件中。将文件保存在本地硬盘上。您需要这些数字方便下一步。

5.  如果您想安全，请删除您导出到硬盘的证书。你不再需要它了。当 Azure 向您授权时，它将在您的证书存储中查找证书，而不是在您的硬盘驱动器上。

此时，您可以在您的计算机/帐户和 Azure 之间建立安全连接。您现在将使用此安全连接上传您的虚拟机。

**上传您的虚拟机**

1.  首先建立与 Azure 的安全连接。以管理员身份打开 Azure 命令提示符并输入以下内容：

    csupload Set-Connection "SubscriptionId=YourSubscriptionIdGoesHere;CertificateThumbprint=YourCertificateThumbPrintGoesHere;ServiceManagementEndpoint= [https://management.core.windows.net](https://management.core.windows.net) "

2.  最后是上传文件的时候了。打开 Azure 门户，选择您的存储帐户并复制 Blob 服务终结点 URL。在与上述相同的 Azure 命令提示符处输入以下内容：

    csupload Add-PersistentVMImage -Destination "YourBlobServiceEndPointUrlGoesHere/vhds/YourVhdNameGoesHere" -Label YourVhdNameGoesHere-LiteralPath "ThePathToYourVhdOnTheLocalComputerGoesHere" -OS Windows

VHD 应该开始上传。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T15:36:07.643

这是一种更简单的方法，您需要：
[Windows Azure PowerShell](https://github.com/WindowsAzure/azure-sdk-tools/wiki/Downloads)

1.  打开“Windows Azure PowerShell”
    - 或 - 打开 PS 提示符并运行：
    Set-ExecutionPolicy RemoteSigned
    Import-Module "C:\Program Files (x86)\Microsoft SDKs\Windows Azure\PowerShell\Azure\Azure.psd1"

2.Get-AzurePublishSettingsFile
（会提示你保存下一步需要的.publishsettings文件）

3\. 导入-AzurePublishSettingsFile "C:\Temp\Windows Azure...credentials.publishsettings"

4\. add-azurevhd -destination "https://.blob.core.windows.net/vhds/File.vhd" -localfilepath "C:\Users\Public\Documents\Hyper-V\Virtual hard disks\File.vhd "

有关详细信息，请参阅：
[Windows Azure Cmdlet 入门](http://msdn.microsoft.com/en-us/library/windowsazure/jj554332.aspx)

# c# - 在事件中使用“this”

> ID：14879164
> 
> 赞同：0
> 
> 时间：2013-02-14T16:14:49.117
> 
> 标签：c#, silverlight, events, this, audio

我需要检索在此上下文中触发事件的元素的某些属性：

```
 SoundEffect alarm;
 public MainPage()
    {
        InitializeComponent();

        Pad1.MouseLeftButtonUp += new MouseButtonEventHandler(makeasound);
        Pad2.MouseLeftButtonUp += new MouseButtonEventHandler(makeasound);
        Pad3.MouseLeftButtonUp += new MouseButtonEventHandler(makeasound);

     } 
```

Pad1,2 和 3 是我的 xaml 中一些椭圆的名称。现在，如果我尝试在事件执行的代码中执行此操作（在上面的示例代码之后立即声明）：

```
private void makeasound(object sender, MouseButtonEventArgs e)
    {
        string text = this.Name;
        textBlock1.Text = text;
    } 
```

文本块变为空，所以我猜触发元素的名称永远不会到达那里。

现在，如果我试图检索名为“Son”的“pads”的自定义属性，使用依赖方法声明，它是一个字符串，就像这样：

```
private void makeasound(object sender, MouseButtonEventArgs e)
        {
            string text = this.Son;
            textBlock1.Text = text;
        } 
```

VS 报错：

“PhoneApplication.MainPage”不包含“Son”的定义，并且找不到接受“PhoneApplication.MainPage”类型的第一个参数的扩展方法“Son”（您是否缺少 using 指令或程序集引用？）

其中 Phoneapplication 是应用程序的名称和后面代码的主命名空间。好像还不够简单，我想做的是：

自定义属性实际上是一个 INT。我知道我声明了依赖权，因为 VS 让我编译。每个 Pad 都有这个存储一个 int 的自定义属性，我需要检索它来访问一个数组元素。触发的函数是这样的：

```
private void makeasound(object sender, MouseButtonEventArgs e)
    {
        int x = this.Son;
        var sons = new[] { "sons/firstsound.wav", "sons/secondsound.wav", "sons/thirdsound.wav" };
        string target = sons[x];
        StreamResourceInfo info = Application.GetResourceStream(
        new Uri(target, UriKind.Relative));
        alarm = SoundEffect.FromStream(info.Stream);
        Microsoft.Xna.Framework.FrameworkDispatcher.Update();
        alarm.Play();
    } 
```

因此，我声明了一个数组，用于存储我想播放的声音的 URI（“儿子”在法语中表示声音，我来自比利时）。然后我使用与触发元素关联的 INT 来访问声音的 URI，然后播放这个声音。

我这样做的原因是因为我想让用户更改每个打击垫的 INT 值，从而选择每个打击垫播放的声音。我似乎别无选择，只能在每次调用函数时声明这个数组（否则它不在上下文中）不是很优雅，但我想我可以忍受（数组中将有 50-60 个元素）

所以，对于那些读到这里的人，我的问题是使用触发事件的属性，当它是自定义属性时，这似乎更难。我把其余的逻辑放在一边，以防有人有建议。

我感谢任何阅读此消息并可能帮助我解决此问题的人。我阅读了在线文档，并且有两本不错的 c# 书籍，但我还没有找到适合我的解决方案。祝你今天过得愉快。

**编辑：**其他一些人愿意提供帮助，所以这里是依赖属性的声明（对不起，丹尼尔，没有看到你评论我的原始帖子）

```
namespace MyNamespace
{

    public static class MyClass
    {

        public static readonly DependencyProperty SonProperty = DependencyProperty.RegisterAttached("Son",
            typeof(string), typeof(MyClass), new PropertyMetadata(null));

        public static string GetSon(UIElement element)
        {
            if (element == null)
                throw new ArgumentNullException("element");
            return (string)element.GetValue(SonProperty);
        }
        public static void SetSon(UIElement element, string value)
        {
            if (element == null)
                throw new ArgumentNullException("element");
            element.SetValue(SonProperty, value);
        }
    } 
```

`Mynamespace`嵌套在主命名空间内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:16:16.053

`this`指的是 的当前实例`MainPage`。不是被点击的垫子。那是`sender`：

```
var pad = (Pad)sender;
var text = pad.Name;
textBlock1.Text = text; 
```

`Son`是附加属性，而不是普通属性。你可以像这样得到它的值：

```
var pad = (Pad)sender;
var son = MyClass.GetSon(pad); 
```

请注意，您已将其声明为`string`. 看到你想如何使用它，将它声明为`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:17:41.673

`this`指在其中定义方法的类型的实例，在本例中为`MainPage`. 如果您想获取触发事件的类型的实例，这就是`sender`参数中的内容：

```
private void makeasound(object sender, MouseButtonEventArgs e)
{
    textBlock1.Text = ((Pad)sender).Name;
} 
```

# jquery - $(document).on('click', '#id', function() {}) 与 $('#id').on('click', function(){})

> ID：14879168
> 
> 赞同：85
> 
> 时间：2013-02-14T16:14:59.900
> 
> 标签：jquery, syntax

我试图找出两者之间的区别

```
$(document).on('click', '#id', function(){}); 
```

和

```
$('#id').on('click', function(){}); 
```

我无法找到有关两者之间是否存在任何差异以及如果存在差异可能是什么的任何信息。

有人可以解释一下是否有任何区别吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-14T16:17:01.370

第一个示例演示了*事件委托*。事件处理程序绑定到 DOM 树更高的元素（在本例中`document`为

这是可能的，因为大多数 DOM 事件从源点开始向上*冒泡。*如果单击`#id`元素，则会生成一个单击事件，该事件将在所有祖先元素中冒泡（*旁注：实际上在此之前有一个阶段，称为“捕获阶段”，当事件从树向下传递到目标*）。您可以在这些祖先中的任何一个上捕获事件。

第二个示例将事件处理程序直接绑定到元素。该事件仍然会冒泡（除非您在处理程序中阻止它），但由于处理程序绑定到目标，您将看不到此过程的效果。

通过委派事件处理程序，您可以确保对绑定时 DOM 中不存在的元素执行它。如果您的`#id`元素是在第二个示例之后创建的，则您的处理程序将永远不会执行。通过绑定到在执行时您知道肯定在 DOM 中的元素，您可以确保您的处理程序实际上会附加到某些东西，并且可以在以后适当地执行。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-14T16:24:20.683

考虑以下代码

```
<ul id="myTask">
  <li>Coding</li>
  <li>Answering</li>
  <li>Getting Paid</li>
</ul> 
```

现在，这里有区别

```
// Remove the myTask item when clicked.
$('#myTask').children().click(function () {
  $(this).remove()
}); 
```

现在，如果我们再次添加一个 myTask 会怎样？

```
$('#myTask').append('<li>Answer this question on SO</li>'); 
```

单击此 myTask 项不会将其从列表中删除，因为它没有绑定任何事件处理程序。相反，如果我们使用`.on`，新项目将无需我们付出任何额外的努力即可工作。以下是 .on 版本的外观：

```
$('#myTask').on('click', 'li', function (event) {
  $(event.target).remove()
}); 
```

**概括：**

The difference between `.on()` and `.click()` would be that `.click()` may not work when the DOM elements associated with the `.click()` event are added dynamically at a later point while `.on()` can be used in situations where the DOM elements associated with the `.on()` call may be generated dynamically at a later point.

# c - 配置文件 MEX - C 文件

> ID：14879169
> 
> 赞同：2
> 
> 时间：2013-02-14T16:15:00.193
> 
> 标签：c, performance, matlab, profiling, mex

我是 C/C++ 和 MEX 函数的新手。我创建了以下函数，我想优化它（性能方面）：

```
#include "math.h"

double GW(double i1, double i2, double h0, double C1, double C2, double C3, double m, double b, double zc, double hg)
{
double y0, g;

g = 9.81;

if (i1 >= i2) {

    y0 = zc + h0;

    if (i1 - zc < 0) {
        return 9999999;
    } else if ((i1 - y0 < 0) && (y0 > zc)) {
        return 8888888;
    } else {
        double ft, Qt, fg, hp, theta, phi, psi, Qg;

        if ((i2-zc)/(i1-zc) > 0.91+0.09*m) {
            ft = (1-(i2-zc)/(i1-zc))/((1-m)*0.3);
        } else if ((i2-zc)/(i1-zc) >= m) {
            ft = pow((1-(i2-zc)/(i1-zc))/(1-m),0.5);
        } else {
            ft = 1;
        }
        Qt = 0.5*C1*b*sqrt(g)*sqrt((i1-zc)*(i1-zc)*(i1-zc))*ft;

        if ((i2-y0)/(i1-y0) > 0.91+0.09*m) {
            fg = (1-(i2-y0)/(i1-y0))/((1-m)*0.3);
        } else if ((i2-y0)/(i1-y0) >= m) {
            fg = pow((1-(i2-y0)/(i1-y0))/(1-m),0.5);
        } else {
            fg = 1;
        }
        hp = (i1-y0)/(y0 - zc);
        theta = 57.3*asin((y0-zc)/hg);
        phi = (theta-30)/60;
        if (theta >= 30) {
            psi = 0.711*(1-phi)+0.58*phi*(1+0.13*hp);
        } else {
            psi = 0.711;
        }
        Qg = C2*b*pow(g,0.5)*psi*sqrt((i1-y0)*(i1-y0)*(i1-y0))*fg;

        if (Qt < Qg) {
            return Qt;
        } else {
            return Qg;
        }
    }
} else if (i1 < i2) {
    y0 = zc + h0;
    if (i2 - zc < 0) {
        return 77777;
    } else if ((i2 - y0 < 0) && (y0 > zc)) {
        return 666666;
    } else {
        double theta, psi;
        theta = 57.3*asin((y0-zc)/hg);
        if (theta < 22) {
            psi = 0.611*theta/22+0.466*(1-theta/22);
        } else {
            psi = 0.611;
        }
        if ((i2-y0)/(i1-y0) < m) {
            return -C3*b*pow(g,0.5)*psi*sqrt((i2-y0)*(i2-y0)*(i2-y0));
        } else if ((i2-y0)/(i1-y0) > m) {
            double fg;
            if ((i1-y0)/(i2-y0) > 0.91 + 0.09*m) {
                fg = (1-(i1-y0)/(i2-y0))/((1-m)*0.3);
            } else if ((i1-y0)/(i2-y0) > m) {
                fg = pow((1-(i1-y0)/(i2-y0))/(1-m),0.5);
            } else {
                fg = 1;
            }
            return -fg*C3*b*pow(g,0.5)*psi*sqrt((i2-y0)*(i2-y0)*(i2-y0));
        }
    }
} 
```

}

我听说在 MEX 中进行分析非常困难，所以我使用 Microsoft Visual C++ 2010 Express 创建了一个 Win32 控制台项目，它调用了函数 GW：

```
#include <stdio.h>
#include <iostream>

/* Number of tests. */
 #define N 10000

 #define input1 35
 #define input2 34
 #define input3 2

 #define input4 1
 #define input5 1
 #define input6 1

 #define input7 1
 #define input8 4
 #define input9 30
 #define input10 8

int main() {
    //std::cout << "Geactiveerd!";
int i;
//char holdExecutionWindowOpen;

//std::cin >> holdExecutionWindowOpen;

 for (i = 0; i < N; ++i)
 {
     GW(input1, input2, input3, input4, input5, input6, input7, input8, input9, input10);
 }
return 0;
} 
```

但是，接下来呢？推荐使用哪个（免费）分析器来优化功能 GW？我尝试使用“非常困 v0.82”，但没有得到任何结果。可能有一些明显的我做错了......

提前致谢！

# magento - 本地 XML 覆盖 Magento 扩展的默认配置

> ID：14879170
> 
> 赞同：2
> 
> 时间：2013-02-14T16:15:00.270
> 
> 标签：magento, configuration

首先，如果我在 Magento 白话方面犯了任何错误，请原谅，这是我在平台上的第一个项目。

我正在开发 Magento 1.7 的扩展，它将每晚从 FTP 站点（在同一台服务器上）导入数据。我没有将 FTP 目录的路径硬编码到我的模块中，而是将以下内容添加到 app/code/local/CompanyName/ModuleName/etc/config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <default>
    <ftp_server_path>/home/ftpuser/</ftp_server_path>
  </default>
  ... other module configuration...
</config> 
```

我可以使用`Mage::getStoreConfig( 'ftp_server_path' )`.

现在我想做的是`ftp_server_path`基于每个环境（我的本地机器、登台等）覆盖该值。我的第一个想法是 app/etc/local.xml，但我 a) 不确定这是否是适当的位置，并且 b) 无法找到存储在 app/etc/local.xml 中的特定于环境的扩展配置的好例子。

您可以在此问题上提供的任何指导将不胜感激。先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:50:05.990

为什么不能只使用 system.xml 文件将此 ftp 路径存储在数据库中的后端可编辑字段中？

然后你只需要在每个后端更改它以获得本地/开发/实时版本。

在模块的 etc 目录中创建一个 system.xml 文件并将其放入其中：

```
<?xml version="1.0"?>
<config>
<sections>
    <ftppath translate="label" module="yourmodule">
        <label>Manage </label>
        <tab>general</tab>
        <sort_order>50</sort_order>
        <show_in_default>1</show_in_default>
        <show_in_website>1</show_in_website>
        <show_in_store>1</show_in_store>
        <groups>
            <general translate="label">
                <label>General</label>
                <frontend_type>text</frontend_type>
                <sort_order>10</sort_order>
                <show_in_default>1</show_in_default>
                <show_in_website>1</show_in_website>
                <show_in_store>1</show_in_store>
                <fields>
                    <path translate="label">
                        <label>Path to FTP Server</label>
                        <frontend_type>text</frontend_type>
                        <sort_order>1</sort_order>
                        <show_in_default>1</show_in_default>
                        <show_in_website>1</show_in_website>
                        <show_in_store>1</show_in_store>
                    </path>
                </fields>
            </general>
        </groups>
    </ftppath>
</sections> 
```

您可以通过执行 Mage::getStoreConfig('ftppath/general/path'); 来获取此值

如果您需要此部分仅供特定用户组的管理员查看，请在 adminhtml.xml 文件中创建 acl（仍在模块的 etc 目录中）

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
<acl>
    <resources>
        <admin>
            <children>
                <system>
                    <children>
                        <config>
                            <children>
                                <ftppath translate="title" module="yourmodule">
                                    <title>Manage FTP</title>
                                    <sort_order>50</sort_order>
                                </ftppath>
                            </children>
                        </config>
                    </children>
                </system>
            </children>
        </admin>
    </resources>
</acl> 
```

PS：我曾经在 app/etc/local.xml 文件中制作过类似的东西，但从 1.7 开始它不再工作了:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-19T11:09:03.580

接受的 SO 答案中的信息虽然是一个很好的起点，但缺少在管理面板中添加自定义配置部分需要做的很多事情。

尽管@SteveGrunwell（[此处](http://alanstorm.com/custom_magento_system_configuration)）在接受的答案中给出的文章有点过时，但它对我使其正常工作很有帮助。它非常详细且切中要害。

过时的一点似乎是从 1.4 及更高版本开始，ACL 部分假设位于模块的 /etc/ 文件夹中的 adminhtml.xml 文件中。

[在magento 网站](http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/xml_structure_for_admin_configurations)上帮助我的另一个链接

# python - python中大多数非贪婪的正则表达式匹配（或者只是一般的正则表达式

> ID：14879172
> 
> 赞同：0
> 
> 时间：2013-02-14T16:15:05.050
> 
> 标签：python, regex, pattern-matching, non-greedy

我有一个问题，我的正则表达式匹配太多。我已经尝试让它尽可能不贪婪。我的RE是：

```
 define host( |\t)*{(.*\n)*?( |\t)*host_name( |\t)*HOST_B(.*\n)*?( |\t)*} 
```

意义

> “定义主机”后跟任何空格或制表符，后跟“{”。任何文本和换行符，直到任意数量的空格或制表符后跟“host_name”，然后是任意数量的空格或制表符，后跟“HOST_B”。任何文本加上换行符，直到任何空格或制表符后跟“}”

我的文字是

```
define host{
    field stuff
        }

define timeperiod{
        sunday          00:00-03:00,07:00-24:00
        }

define stuff{
        hostgroup_name                  things
        service_description             load
        dependent_service_description   cpu_util
        execution_failure_criteria      n
        notification_failure_criteria   w,u,c
        }

define host{
        use                     things
        host_name               HOST_A
        0alias                  stuff 
       }

define host{
        use                     things
        host_name               HOST_B
        alias                   ughj
        address                 1.6.7.6
       }

define host{
        use                     things
        host_name               HOST_C
       } 
```

匹配从第一个定义到 host_b 的结束括号。它没有得到 host_c 的组（它不应该得到 host_c），但是我只想要主机 b 的组而不是整个事情。

有什么帮助吗？我的正则表达式生锈了。您可以在[http://regexpal.com/上进行测试](http://regexpal.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:00:58.697

这与您要求的有点不同，但我认为您可能会喜欢结果。这将解析所有结构并将它们加载到 python 字典中。从那里开始，操作对您来说应该非常好和容易。

```
mDefHost = re.findall(r"\define host{(.*?)\}",a,re.S)
mInHost  = re.compile("(\S+)\s+(\S+)")
hostDefs = []

for item in mDefHost:
    hostDefs.append( dict(mInHost.findall(item)) ) 
```

前输出

```
>>> m = re.findall(r"define host\{(.*?)\}",a,re.S)
>>> m
['\n        use                     things\n        host_name               HOST_B\n            alias                   ughj\n        address                 1.6.7.6\n       ']
>>> item = m[0]
>>> item
'\n        use                     things\n        host_name               HOST_B\n            alias                   ughj\n        address                 1.6.7.6\n       '
>>> results = re.findall("(\S+)\s+(\S+)",item)
>>> results
[('use', 'things'), ('host_name', 'HOST_B'), ('alias', 'ughj'), ('address', '1.6.7.6')]
>>> dict(results)
{'alias': 'ughj', 'use': 'things', 'host_name': 'HOST_B', 'address': '1.6.7.6'} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:18:41.867

问题是您正在使用正则表达式搜索整个字符串，但您试图找到一个子字符串，该子字符串的开头与整个字符串的开头无法区分。你不能使用*非贪心匹配*来确保你的*起点*尽可能晚；非贪婪修饰符*仅*影响*正*则表达式引擎寻找匹配项的距离。

您需要确保在您的`define host`和您的`HOST_B`. 试试这个（未经测试）：

`define host\s*{[^}]HOST_B.*?}`

（确保使用标志来允许`.`匹配换行符。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:19:29.383

我还没有测试过，但我想你需要用 [^{]* 删除 .*。这样你的正则表达式就不会吃下一个“{”。

这对我来说看起来很奇怪：`(.*\n)*?` 看看 DOTALL：如果你设置这个标志，点就会吃换行符。

# bash - 在同一文件夹终端脚本中复制多个同名文件

> ID：14879174
> 
> 赞同：6
> 
> 时间：2013-02-14T16:15:07.113
> 
> 标签：bash, scripting, copy, rename

我有很多同名的文件，目录结构（简化）如下：

```
 ../foo1/bar1/dir/file_1.ps  
 ../foo1/bar2/dir/file_1.ps  
 ../foo2/bar1/dir/file_1.ps
 .... and many more 
```

由于通过转到相应目录来查看所有这些 ps 文件效率极低，我想将它们全部复制到另一个目录中，但包括前两个目录的名称（这与我的目的相关）在文件名中。

我以前试过这样，但我无法得到哪个文件来自哪里，因为它们都是连续命名的：

```
#!/bin/bash -xv

cp -v --backup=numbered {} */*/dir/file* ../plots/; 
```

`../plots`我复制它们的文件夹在哪里。但是，它们现在的格式为 file.ps.~x~（x 是一个数字），所以我去掉了“.ps.~*~”，只留下 ps 扩展名：

```
rename 's/\.ps.~*~//g' *;
rename 's/\~/.ps/g' *; 
```

然后，由于ps文件有时有数百个点并且需要很长时间才能打开，所以我将它们转换为jpg。

```
for file in * ; do convert -density 150 -quality 70 "$file" "${file/.ps/}".jpg; done; 
```

这不是一个真正有效的 bash 脚本，因为我必须手动更改目录。

我想最好的方法是从复制文件名中包含的前两个目录的名称开始复制文件。

我该怎么做这最后一件事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T17:04:56.430

如果你只有两级目录，你可以使用

```
for file in */*/*.ps
do 
    ln "$file" "${file//\//_}"
done 
```

这会遍历每个 ps 文件，并将它们硬链接到当前目录，并将`/`s 替换为`_`. 如果您打算编辑文件但不想更新原始文件，请使用`cp`而不是。`ln`

对于任意目录级别，您可以使用 bash 特定的

```
shopt -s globstar
for file in **/*.ps
do 
    ln "$file" "${file//\//_}"
done 
```

但是您确定需要将它们全部复制到一个目录吗？您可能可以使用 将它们全部打开`yourreader */*/*.ps`，这取决于您的读者可能会在仍然看到完整路径的同时逐个浏览它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:00:25.157

您应该运行 find 命令并首先打印名称，例如

```
find . -name "file_1.ps" -print 
```

然后遍历它们中的每一个，并将字符串替换`/`为 '-' 或任何其他字符，如

```
${filename/\//-} 
```

一般语法是`${string/substring/replacement}`. 然后您可以将其复制到所需的目录。完整的脚本可以写成如下。尚未对其进行测试（目前不在 linux 上），因此如果您遇到任何语法错误，您可能需要调整代码；）

```
for filename in `find . -name "file_1.ps" -print`
do
     newFileName=${filename/\//-}
     cp $filename YourNewDirectory/$newFileName
done 
```

如果要将上述脚本放在其他目录中，则需要将脚本放在同一根目录中或更改 find 命令以查找特定目录。

参考

*   [bash 中的字符串操作](http://tldp.org/ldp/abs/html/string-manipulation.html)
*   [查找手册页](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)

# windows - 在网页上列出远程 PC 上安装的所有应用程序

> ID：14879175
> 
> 赞同：0
> 
> 时间：2013-02-14T16:15:11.957
> 
> 标签：windows, powershell, web, batch-file, vbscript

我想创建一个网页，可以列出远程PC上安装的所有应用程序，然后我可以选择悄悄卸载哪个应用程序。我应该从哪里开始？有什么建议么？现在我只使用

* * *

psexec.exe -cd \computername "path\MsiZap.exe" TW {要删除的程序的 GUID}

* * *

卸载，但只能从[程序和功能]中删除条目，该软件仍在PC上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:19:16.973

```
wmic /node:computername /user:adminuser /password:password /output:"path\to\index.html" product list /format:HTABLE 
```

将生成一个漂亮的 HTML 页面，显示已安装的应用程序。

```
wmic /node:computername /user:adminuser /password:password product where name="name of program" call uninstall 
```

将调用卸载程序的程序。

我把它留给你从A点到B点。:)

对于它的价值，我真诚地怀疑您是否能够从网页启动卸载程序，因为浏览器安全性通常对试图在查看者计算机上运行命令的网页皱眉。

# sed - 如何将一行（空格分隔）和一个文件（每行一个值）合并为一个？

> ID：14879177
> 
> 赞同：1
> 
> 时间：2013-02-14T16:15:14.513
> 
> 标签：sed, awk

给定一条线

```
 100  90  80  70  60  50  40  30  20  10   0 
```

和一个文件

```
1
2
3
4
5
6
7
8
9
10
11 
```

如何将这两者合并到一个文件中

```
100 1
90  2
80  3
70  4
60  5
50  6
40  7
30  8
20  9
10  10
0  11 
```

我猜`sed`和`awk`是我的朋友，但没有与他们的经验......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:20:57.157

或使用`tr`and `paste`：

```
$ tr ' ' '\n' < file1 | paste - file2
100     1
90      2
80      3
70      4
60      5
50      6
40      7
30      8
20      9
10      10
0       11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:19:12.960

```
$ cat file2
1
2
3
4
5
6
7
8
9
10
11
$
$ cat file1
100    90        80  70      60 50 40 30 20 10 0
$
$ $ gawk '!NF{next} NR==FNR{a[++nr1]=$0;next} {print $0,a[++nr2]}' file2 RS="[[:space:]]+" file1
100 1
90 2
80 3
70 4
60 5
50 6
40 7
30 8
20 9
10 10
0 11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:27:53.310

尝试这样做：

```
paste <(printf '%s\n' 100 90 80 70 60 50 40 30 20 10 0) file.txt 
```

在这张照片中`paste`，*流程替代*&`printf`是你的朋友 =)

## 输出

```
100     1
90      2
80      3
70      4
60      5
50      6
40      7
30      8
20      9
10      10
0       11 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T22:10:55.467

另一个awk：

```
awk '{if(NR==1) split($0,N); else print N[FNR], $0}' file1 file2 
```

# android - 如何异步绑定 ArrayList to a ListView? I'm trying to bind some data to a ListView but instead of being data direct from the tables of a database I have already worked data. So what happens is that I do a query, do some calculations and 问问题 问问题 2013-02-14T16:15:19.960 96 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm trying to bind some data to a ListView but instead of being data direct from the tables of a database I have already worked data. So what happens is that I do a query, do some calculations and populate an ArrayList and then need to have this data binded to an ListView. What I thought at first was having this query and calculations inside the onCreateLoader so every time my database changed it would be notified and my array would be repopulated followed by the refresh of the ListView. My problem is being the implementation of the necessary changes in the Loader and the ArrayAdapter. The Loader I'm used to is the CursorLoader + a SimpleCursorAdapter so I can only use Cursors Objects. How can I proceed? Where should I look for a solution of this kind? Thanks If your path has spaces, you will need to encapsulate the path in double quotes quotes. You may need to put a double quote before StartupPath and after .rpt androidandroid-adapterandroid-loader 4 0 回答 0 Related 7 php - Select 语句中的会话变量 1 c# - 为什么 C# 中需要“new”关键字 2 iphone - Xcode 突然没有将图像加载到我的故事板中（蓝色问号） 1 java - 如果不知道容器类型中元素的类型，如何实现迭代器？ 1 linux - 在 VM 上设置 2 节点 Hadoop 集群 1 xcode - Lion 中使用 Xcode 4.5 生成的文件在哪里？ 0 java - 带有算法的 Neo4j 1 android - 带有自定义列表视图和非列表视图项目的导航抽屉 3 logging - 写入 Splunk 排水管时出现“错误 L10（输出缓冲区溢出）” 1 objective-c - 使用 XML 快速修复？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14879179
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android, android-adapter, android-loader

I'm trying to bind some data to a ListView but instead of being data direct from the tables of a database I have already worked data. So what happens is that I do a query, do some calculations and populate an ArrayList and then need to have this data binded to an ListView.

What I thought at first was having this query and calculations inside the onCreateLoader so every time my database changed it would be notified and my array would be repopulated followed by the refresh of the ListView.

My problem is being the implementation of the necessary changes in the Loader and the ArrayAdapter. The Loader I'm used to is the CursorLoader + a SimpleCursorAdapter so I can only use Cursors Objects.

How can I proceed? Where should I look for a solution of this kind?

Thanks

# node.js - Test for expected failure in Mocha

> ID：14879181
> 
> 赞同：20
> 
> 时间：2013-02-14T16:15:24.733
> 
> 标签：node.js, unit-testing, mocha.js

Using Mocha, I am attempting to test whether a constructor throws an error. I haven't been able to do this using the expect syntax, so I'd like to do the following:

```
it('should throw exception when instantiated', function() {
  try {
    new ErrorThrowingObject();
    // Force the test to fail since error wasn't thrown
  }
  catch (error) {
   // Constructor threw Error, so test succeeded.
  }
} 
```

Is this possible?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-15T08:43:04.873

# 应该.js

将[should.js](https://github.com/visionmedia/should.js/)库与**should.fail一起使用**

```
var should = require('should')
it('should fail', function(done) {
  try {
      new ErrorThrowingObject();
      // Force the test to fail since error wasn't thrown
       should.fail('no error was thrown when it should have been')
  }
  catch (error) {
   // Constructor threw Error, so test succeeded.
   done();
  }
}); 
```

或者你可以使用应该[throwError](https://github.com/visionmedia/should.js/#throwerror)

```
(function(){
  throw new Error('failed to baz');
}).should.throwError(/^fail.*/) 
```

# 柴

和 chai 一起使用[throw](http://chaijs.com/api/bdd/#throw) api

```
var expect = require('chai').expect
it('should fail', function(done) {
  function throwsWithNoArgs() {
     var args {} // optional arguments here
     new ErrorThrowingObject(args)
  }
  expect(throwsWithNoArgs).to.throw
  done()
}); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-14T16:45:40.463

您可以尝试使用[Chai 的](http://chaijs.com/api/bdd/) `throw`构造。例如：

```
expect(Constructor).to.throw(Error); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-22T19:28:45.333

柴现在有

`should.fail()`和`expect.fail()`

[https://github.com/chaijs/chai/releases/tag/2.1.0](https://github.com/chaijs/chai/releases/tag/2.1.0)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-07-06T11:30:27.393

**如果您需要使用异步代码执行此操作，请在 2017 年回答**：使用 await**而不需要任何其他库**。

```
it('Returns a correct error response when making a broken order', async function(){
  this.timeout(5 * 1000);
  var badOrder = {}
  try {
    var result = await foo.newOrder(badOrder)
    // The line will only be hit if no error is thrown above!
    throw new Error(`Expected an error and didn't get one!`)
  } catch(err) {
    var expected = `Missing required field`
    assert.equal(err.message, expected)
  }
}); 
```

请注意，张贴者只是在做同步代码，但我希望很多使用异步的人都会被问题标题引导到这里！

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-10-23T12:18:17.703

Mocha 默认使用来自 node.js ( [https://nodejs.org/api/assert.html](https://nodejs.org/api/assert.html) )的**Assert 。**您不需要任何外部库来检查方法是否引发错误。

Assert 有一个方法 - `assert.throws`，它有三个参数，但这里只有两个真正重要：

*   function - 这里传递函数，**而不是函数调用**
*   错误 - 这里传递或对象构造函数或函数用于检查错误

假设您有一个调用的函数`sendMessage(message)`，当未设置消息参数时会引发错误。功能代码：

```
function sendMessage(message) {
  if (!message || typeof message !== 'string') {
     throw new Error('Wrong message');
  }
  // rest of function
} 
```

好的，所以为了测试它，你需要额外的函数来覆盖输入。为什么？因为`assert.throws`没有给任何机会将参数传递给要测试的函数。

所以而不是

```
// WRONG
assert.throws(sendMessage, Error); // THIS IS WRONG! NO POSSIBILITY TO PASS ANYTHING 
```

您需要创建匿名函数：

```
// CORRECT
assert.throws(() => {
  sendMessage(12);  // usage of wanted function with test parameters
}, Error) 
```

你能看到区别么？我没有直接传递函数，而是将函数调用放在匿名函数中，目的是使用准备好的输入调用它。

第二个参数呢。这取决于应该抛出什么样的错误，在上面的示例`Error`中抛出了对象，所以我不得不放在那里`Error`。在此操作的结果中，`assert.throws`比较抛出的对象是否是相同类型的对象。如果不是`Error`抛出不同的东西，那么这部分需要改变。例如，`Error`我将抛出一个类型的值而不是`String`。

```
function sendMessage(message) {
  if (!message || typeof message !== 'string') {
     throw 'Wrong message'; // change to String
  }
  // rest of function
} 
```

现在测试调用

```
assert.throws(() => {
  sendMessage(12); // usage of wanted function with test parameters
}, (err) => err === 'Wrong message') 
```

而不是`Error`在第二个参数中，我使用了比较函数来比较抛出的错误和期望。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-03-13T20:35:33.647

MarkJ 接受的答案是比其他人更简单的方法。让我展示现实世界中的例子：

```
function fn(arg) {
  if (typeof arg !== 'string')
    throw TypeError('Must be an string')

  return { arg: arg }
}

describe('#fn', function () {
  it('empty arg throw error', function () {
    expect(function () {
      new fn()
    }).to.throw(TypeError)
  })

  it('non-string arg throw error', function () {
    expect(function () {
      new fn(2)
    }).to.throw(TypeError)
  })

  it('string arg return instance { arg: <arg> }', function () {
    expect(new fn('str').arg).to.be.equal('str')
  })
}) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-14T19:53:56.010

如果您不想将大量源代码包装到`expect`参数中，或者如果您有很多参数要传递并且它变得丑陋，您仍然可以通过利用`done`提供的参数来使用原始语法来做到这一点（但最初被忽略）：

```
it('should throw exception when instantiated', function(done: Done) {
  try {
    new ErrorThrowingObject();
    done(new Error(`Force the test to fail since error wasn't thrown`));
  }
  catch (error) {
    // Constructor threw Error, so test succeeded.
    done();
  }
} 
```

因为您在`done`此处使用，它允许您在 中执行任意代码`try`，然后在源代码中准确指定您希望记录失败的位置。

通常，有人可能会尝试使用`throw`or ，`assert(false)`但这些都会被确定您的测试失败。那只是一团糟。`catch``try`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-14T16:53:25.023

如果您使用的是[should.js](https://github.com/visionmedia/should.js/)，您可以这样做`(new ErrorThrowingObject).should.throw('Option Error Text or Regular Expression here')`

如果您不想使用单独的库，也可以执行以下操作：

```
it('should do whatever', function(done) {
    try {
        ...
    } catch(error) {
        done();
    }
} 
```

这样，您就知道如果测试完成，错误就会被捕获。否则，您将收到超时错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-04T13:00:54.047

与**柴** `throw`（ES2016）

[http://chaijs.com/api/bdd/#method_throw](http://chaijs.com/api/bdd/#method_throw)

为了清楚起见......这有效

```
it('Should fail if ...', done => {
    let ret = () => {
        MyModule.myFunction(myArg);
    };
    expect(ret).to.throw();
    done();
}); 
```

这不起作用

```
it('Should fail if ...', done => {
    let ret = MyModule.myFunction(myArg);
    expect(ret).to.throw();
    done();
}); 
```

# javascript - Cross browser compatibility web app bug trapping?

> ID：14879185
> 
> 赞同：2
> 
> 时间：2013-02-14T16:15:38.710
> 
> 标签：javascript, jquery, html, css, cross-browser

I have a complex UI interface developed and working successfully on Firefox. It uses jQuery 1.8.+ and CSS2.

Now I need it to be compatible with the latest versions of Chrome and IE. Is there any solution that helps track *what* is wrong with the application in other browsers? I'm not asking for how it *looks* on another browser (I know there are many sites out there that help), but how it *works* and why things *don't* work on another browser. Basically I'm looking for the quickest problem tracker for any code on a browser. Because my otherwise useful application crashes significantly in Chrome and especially IE, and with so many plugins and thousands of LOC (and a deadline looming right ahead) I have no idea where to start debugging or seeing what's wrong.

Is there any manual technique or automatic tool that you know of that really helps out efficiently in this situation? If you have any personal techniques, please do share. One reason I don't know where to start is that if I use the developer mode in Chrome, it doesn't show any errors and yet doesn't work.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T02:11:44.807

可能帮助不大，但我记得 IE 中有两个奇怪的错误。如果您在`document.ready()`某处有两个块，则后者将被忽略，因此代码将无法运行。第二个与声明变量有关，在某些情况下，如果省略 'var' 前缀显然会被忽略。

此外，如果没有指定 DOCTYPE 声明，或者它之前有白色（或就此而言，任何）字符，IE 会导致错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:35:51.720

如果您想检查应用程序的各个方面，我更喜欢使用[dynaTrace](http://www.compuware.com/application-performance-management/ajax-performance-testing.html)。它在 IE 和 Mozilla 中运行良好。事实上，根据他的一篇博客文章，这是 John Resig 最喜欢的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:19:12.727

使用 Firefox 错误控制台。这将报告任何 JavaScript 错误，并且相同的错误会影响 Chrome，因为它们非常相似，即：Mozilla 浏览器。除了确保代码在 Firefox 中运行时没有错误外，您对 IE 无能为力。

# jquery - jquery - 在某些页面上的 IE 中拒绝 iframe 访问

> ID：14879192
> 
> 赞同：13
> 
> 时间：2013-02-14T16:16:03.700
> 
> 标签：jquery, iframe, printing, printthis

我是 printThis 的作者，这是一个用于打印的 jquery 插件。

[https://github.com/jasonday/printThis](https://github.com/jasonday/printThis)

我有一个用户提出了一个问题，我无法破解，不幸的是，我无法共享页面（隐私问题）。

在用户的站点上，问题出现在 IE 中的某些页面上，但在其他页面上没有。打印失败，因为 iframe 仍然是空的。

IE 中的错误在 jQuery 中：

```
contents: function (a) {
            return f.nodeName(a,
                "iframe") ? a.contentDocument || a.contentWindow.document : f.makeArray(a.childNodes)
        } 
```

使用日志记录，我能够确定它在这条线上失败了：

```
var $doc = $("#" + strFrameName).contents(); 
```

但同样，这只发生在某些页面上，我无法在该用户站点之外的任何情况下重新创建。

我的问题：这里有更好的方法吗？还是一种使`$doc`物体更防弹的方法？

* * *

```
// -----------------------------------------------------------------------
// printThis v1.1
// Printing plug-in for jQuery
//
// Resources (based on) :
//              jPrintArea: http://plugins.jquery.com/project/jPrintArea
//              jqPrint: https://github.com/permanenttourist/jquery.jqprint
//              Ben Nadal: http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm
//
// Dual licensed under the MIT and GPL licenses:
//              http://www.opensource.org/licenses/mit-license.php
//              http://www.gnu.org/licenses/gpl.html
//
// (c) Jason Day 2012
//
// Usage:
//
// $("#mySelector").printThis({
//      debug: false, //show the iframe for debugging
//      importCSS: true, // import page CSS
//      printContainer: true, // grab outer container as well as the contents of the selector
//      loadCSS: "path/to/my.css" //path to additional css file
//  });
//
// Notes:
//  - the loadCSS option does not need @media print
//------------------------------------------------------------------------

(function($) {
    var opt;

    $.fn.printThis = function (options) {
        opt = $.extend({}, $.fn.printThis.defaults, options);

        var $element = (this instanceof jQuery) ? this : $(this);

    // if Opera, open a new tab
        if ($.browser.opera)
        {
            var tab = window.open("","Print Preview");
            tab.document.open();

        }
    // add dynamic iframe to DOM
        else
        {
        var strFrameName = ("printThis-" + (new Date()).getTime());

            var $iframe = $("<iframe id='" + strFrameName +"' src='about:blank'/>");

            if (!opt.debug) { $iframe.css({ position: "absolute", width: "0px", height: "0px", left: "-600px", top: "-600px" }); }

            $iframe.appendTo("body");

        }
    // allow iframe to fully render before action
    setTimeout ( function () {

        if ($.browser.opera)
            {
        var $doc = tab.document;
        } else
        {
        var $doc = $("#" + strFrameName).contents();
        }

        // import page css
        if (opt.importCSS)
        {
                $("link[rel=stylesheet]").each(function(){
                var href = $(this).attr('href');
                if(href){
                        var media = $(this).attr('media') || 'all';
                        $doc.find("head").append("<link type='text/css' rel='stylesheet' href='" + href + "' media='"+media+"'>");
                    }
        });
        }

        // add another stylesheet
        if (opt.loadCSS)
        {
        $doc.find("head").append("<link type='text/css' rel='stylesheet' href='" + opt.loadCSS + "'>");

        }

        //add title of the page
        if (opt.titlePage)
        {
        $doc.find("head").append('<title>'+opt.titlePage+'</title>');
        } 
        //grab outer container
        if (opt.printContainer) { $doc.find("body").append($element.outer()); }
        else { $element.each( function() { $doc.find("body").append($(this).html()); }); }

        //$doc.close();
        // print
        ($.browser.opera ? tab : $iframe[0].contentWindow).focus();
        setTimeout( function() { ($.browser.opera ? tab : $iframe[0].contentWindow).print(); if (tab) { tab.close(); } }, 1000);

        //removed iframe after 60 seconds
        setTimeout(
        function(){
        $iframe.remove();
        },
        (60 * 1000)
        );
    }, 333 );
    }

    $.fn.printThis.defaults = {
        debug: false, //show the iframe for debugging
        importCSS: true, // import page CSS
        printContainer: true, // grab outer container as well as the contents of the selector
        loadCSS: "", //path to additional css file
        titlePage: "" //add title to print page
    };

    jQuery.fn.outer = function() {
      return $($('<div></div>').html(this.clone())).html();
    }
})(jQuery); 
```

**更新**

问题由于`document.domain`

此类页面已`document.domain`设置且 IE 不`document.domain`从父级继承。

为了修复该部分，我将 iframe 创建更改为标准 javascript，并将源设置为在 iframe 创建时写入`document.domain`。

```
 var printI= document.createElement('iframe');

    printI.name = "printIframe";

    printI.id = strFrameName;

    document.body.appendChild(printI);

    printI.src = "javascript:document.write('<head><script>document.domain=\"mydomain.com\";</script></head><body></body>')";

   var $iframe = $("#" + strFrameName); 
```

所以这修复了访问被拒绝，但是现在框架不会打印。我已经尝试了很多不同的方法来访问该对象，但是它们都不起作用。

A）在这种情况下您将如何访问框架（我已经尝试过 SO 中概述的大多数方法）以使 IE 识别和打印

或者

B) 谁能想到一个更好的方法来让 document.domain 在使用 jQuery 创建时进入 iframe？（以后不能，因为会出现访问被拒绝的问题）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T17:23:33.197

在您的代码中，您`setTimeout`用于在 iframe 加载后执行您的函数。

```
// allow iframe to fully render before action
setTimeout ( function () {
...
}, 333 );  //333ms 
```

但这是一个错误，因为您不知道给定的时间是否足以加载 iframe。Javascript 执行是异步的，因此无法保证`setTimeout`在 iframe 加载之前会抵消函数的执行。由于不同页面的加载时间不同。有些无法正确执行代码，指向您发现导致错误的行。

```
var $doc = $("#" + strFrameName).contents();  //only after loading 
```

正确的方法是使用事件`load`或`onload`了解 DOM 对象是否正确加载。

```
<script>
document.getElementById("myframe").onload = function() {
  alert("myframe is loaded");
};
</script>
//or
<iframe id="myFrame" onload="myFunction();"></iframe> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T19:45:22.307

只要您设置 iframe src，就必须针对父元素验证相同的来源，即使您将其设置为“about:blank”也是如此。我猜 IE 无法正确检查，或者某些 javascript 运行并将 document.location 设置为与创建 iframe 不同的位置。

像下面这样根本不设置 src 怎么样？它仍然应该工作。

```
var $iframe = $("<iframe id='" + strFrameName +"'/>");
$iframe.appendTo("body");
var $iframeDoc = $iframe[0].contentWindow.document;

$iframeDoc.open();
$iframeDoc.write("foo");
$iframeDoc.close(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-04T20:09:34.417

问题是由于 IE 没有继承父 document.domain。

不幸的是，一旦您进入这个阴暗的区域，就需要一些特定的技巧才能使其正常工作。

基本上检查是否显式设置了 document.domain 并且浏览器是 IE。

完整更新的插件：

[https://github.com/jasonday/printThis](https://github.com/jasonday/printThis)

```
(function ($) {
    var opt;
    $.fn.printThis = function (options) {
        opt = $.extend({}, $.fn.printThis.defaults, options);
        var $element = this instanceof jQuery ? this : $(this);

            var strFrameName = "printThis-" + (new Date()).getTime();

            if(window.location.hostname !== document.domain && navigator.userAgent.match(/msie/i)){
                // Ugly IE hacks due to IE not inheriting document.domain from parent
                // checks if document.domain is set by comparing the host name against document.domain
                var iframeSrc = "javascript:document.write(\"<head><script>document.domain=\\\"" + document.domain + "\\\";</script></head><body></body>\")";
                var printI= document.createElement('iframe');
                printI.name = "printIframe";
                printI.id = strFrameName;
                printI.className = "MSIE";
                document.body.appendChild(printI);
                printI.src = iframeSrc;

            } else {
                 // other browsers inherit document.domain, and IE works if document.domain is not explicitly set
                var $frame = $("<iframe id='" + strFrameName +"' name='printIframe' />");
                $frame.appendTo("body");
            }

            var $iframe = $("#" + strFrameName);

            // show frame if in debug mode
            if (!opt.debug) $iframe.css({
                position: "absolute",
                width: "0px",
                height: "0px",
                left: "-600px",
                top: "-600px"
            });

        // $iframe.ready() and $iframe.load were inconsistent between browsers    
        setTimeout ( function () {

            var $doc = $iframe.contents();

            // import page stylesheets
            if (opt.importCSS) $("link[rel=stylesheet]").each(function () {
                var href = $(this).attr("href");
                if (href) {
                    var media = $(this).attr("media") || "all";
                    $doc.find("head").append("<link type='text/css' rel='stylesheet' href='" + href + "' media='" + media + "'>")
                }
            });

            //add title to iframe
            if (opt.pageTitle) $doc.find("head").append("<title>" + opt.pageTitle + "</title>");

            // import additional stylesheet
            if (opt.loadCSS) $doc.find("head").append("<link type='text/css' rel='stylesheet' href='" + opt.loadCSS + "'>");

            // grab $.selector as container
            if (opt.printContainer) $doc.find("body").append($element.outer());

            // otherwise just print interior elements of container
            else $element.each(function () {
                $doc.find("body").append($(this).html())
            });

            if($iframe.hasClass("MSIE")){
                // check if the iframe was created with the ugly hack
                // and perform another ugly hack out of neccessity
                window.frames["printIframe"].focus();
                setTimeout(function () {
                   $doc.find("head").append("<script>  window.print(); </script>");
                }, 500 );
            } else {
                // proper method
                $iframe[0].contentWindow.focus();
                $iframe[0].contentWindow.print();  
            }

             //remove iframe after print
            if (!opt.debug) {
                setTimeout(function () {
                    $iframe.remove();
                }, 1000);
            }

        }, 333 );

    };

    // defaults
    $.fn.printThis.defaults = {
        debug: false,           // show the iframe for debugging
        importCSS: true,        // import parent page css
        printContainer: true,   // print outer container/$.selector
        loadCSS: "",            // load an additional css file
        pageTitle: ""           // add title to print page
    };

    // $.selector container
    jQuery.fn.outer = function () {
        return $($("<div></div>").html(this.clone())).html()
    }
})(jQuery); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-21T17:06:10.467

IE 与所有其他浏览器一样与 iframe 一起使用（至少对于主要功能而言）。你只需要遵守一套规则：

*   在 iframe 中加载任何 javascript（需要了解 iframe 父级的 js 部分）之前，请确保父级已更改 document.domain。
*   加载所有 iframe 资源后，将 document.domain 更改为与 parent 中定义的相同。（您需要稍后再执行此操作，因为设置域会导致 iframe 资源的请求失败）

*   现在你可以为父窗口做一个参考： var winn = window.parent

*   现在您可以引用父 HTML，以便对其进行操作： var parentContent = $('html', winn.document)
*   此时您应该可以访问 IE 父窗口/文档，并且可以随意更改它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-05T18:42:14.097

这个答案已经在原始问题 UPDATE 中说明，但我想为与绕过 SCRIPT70 Permission denied 错误相关的原始问题添加一个更简洁的答案（我在 IE11/Win7 上使用 JQuery 3.2.1 遇到了这个问题）。

代替`$('<iframe .../>').appendTo($('body'))`

做这个：

```
var $iframe = $('<iframe .../>');
document.body.appendChild($iframe[0]); 
```

答案取自这里：[https ://bugs.jquery.com/ticket/13936#comment:28](https://bugs.jquery.com/ticket/13936#comment:28)

# jsf - Primefaces: Exclude column from row selection in p:dataTable

> ID：14879193
> 
> 赞同：7
> 
> 时间：2013-02-14T16:16:12.237
> 
> 标签：jsf, primefaces, datatable, spring-webflow

I've got problem with `p:dataTable` and excluding a column from single row selection.

I have 4 columns in my dataTable. First 3 are needed to display fileId, fileName and uploadDate. In 4th column there is a command button for each row that start action of file processing. But also there is row selection (with ajax action on event) that navigates to file details page. Now, when I click on the anywhere on the row (including the button) it navigates me to details page.

There's my current code:

```
<h:form>
    <p:dataTable id="billingFiles" value="#{billingFiles}"
        var="billingFile"
        rowKey="#{billingFile.billingFile.idBillingFile}"
        filteredValue="#{billingService.filteredBillingFileDataModels}"
        selectionMode="single" paginator="true" rows="10">

        <p:ajax event="rowSelect" listener="#{billingService.selectBillingFileRow}" />

        <p:column sortBy="#{billingFile.id}"
            filterBy="#{billingFile.id}" id="idFile"
            headerText="#{msg['billing.file.id']}"
            filterMatchMode="contains">
            <h:outputText value="#{billingFile.id}" />
        </p:column>

        <p:column sortBy="#{billingFile.uploadDate}"
            filterBy="#{billingFile.uploadDate}" id="uploadDate"
            headerText="#{msg['billing.file.upload_date']}"
            filterMatchMode="contains">
            <h:outputText value="#{billingFile.uploadDate}" />
        </p:column>

        <p:column sortBy="#{billingFile.fileName}"
            filterBy="#{billingFile.fileName}" id="fileName"
            headerText="#{msg['billing.file.file_name']}"
            filterMatchMode="contains">
            <h:outputText value="#{billingFile.fileName}" />
        </p:column>

        <p:column id="loadBillingFile">
            <p:commandButton id="loadBillingFileButton"
                rendered="#{billingFile.fileStatus.equals('UPLOADED')}"
                value="#{msg['billing.load_billing_file']}"
                action="#{billingService.loadBillingFile(billingFile.billingFile)}"
                update=":form" />
        </p:column>
    </p:dataTable>
</h:form> 
```

And there is the method that navigates to file details page:

```
public void selectBillingFileRow(SelectEvent event) {
    BillingFileDataModel billingFileDataModel = (BillingFileDataModel) event.getObject();
    if (billingFileDataModel != null) {
        selectedBillingFile = billingFileDAO.findBillingFileById(billingFileDataModel.getBillingFile().getIdBillingFile());
        FacesContext.getCurrentInstance().getExternalContext()
        .getRequestMap().put(JsfView.EVENT_KEY, "viewBillingFile");
    }
} 
```

Is there any way to exclude column with the button from row selection? I need it only to start processing the file, without navigating me to other page.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T11:34:33.047

我找到了解决问题的部分方法。当事件发生时，我阻止了`rowSelect`ajax 动作的执行。`onClick`

我将此行添加到`p:commandButton`：

```
onclick="event.stopPropagation();" 
```

我说它部分工作，因为单击带有按钮的列，而不是按钮本身，仍然执行`rowSelect`操作。

# css - Font tag and word spacing issue

> ID：14879194
> 
> 赞同：-1
> 
> 时间：2013-02-14T16:16:11.033
> 
> 标签：css

To start: I 100% understand that the font tag is depresiated and should not be used. I'd love to meet the terrible person who did this to me, trust me :)

I have a large CMS system with custom entries that use:

```
<span>
    <font size="5">
        This is the long sentence that gives me a problem every time.
    </font>
</span> 
```

Now what is happening is I'm getting random spacing between words (like between This and Is, it's twice as big as the space between gives and me). I've tried using letter-spacing -0.1em, but that really screws up other areas of the site. I would love to use text-align to fix it, but it's not working.

How can I control the word spacing/alignment for JUST the font tag. Messing with the span tags, unless there's a way that won't mess with my grandfathered content, isn't an option it appears.

Thanks a ton

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:20:33.010

尝试重置排版样式：

```
font {
    padding: 0;
    letter-spacing: 1px;
    display: block;
} 
```

`display`默认情况下不继承该属性。您需要明确设置它。

# c# - LINQ query — Data aggregation (Group Adjacent)

> ID：14879197
> 
> 赞同：20
> 
> 时间：2013-02-14T16:16:28.980
> 
> 标签：c#, linq, grouping

Let's take a class called `Cls`:

```
public class Cls
{
    public int SequenceNumber { get; set; }
    public int Value { get; set; }
} 
```

Now, let's populate some collection with following elements:

```
Sequence
Number      Value
========    =====
1           9
2           9
3           15
4           15
5           15
6           30
7           9

```

What I need to do, is to enumerate over Sequence Numbers and check if the next element has the same value. If yes, values are aggregated and so, desired output is as following:

```
Sequence    Sequence
Number      Number
From        To          Value
========    ========    =====
1           2           9
3           5           15
6           6           30
7           7           9

```

How can I perform this operation using LINQ query?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T16:32:51.847

您可以在修改后的版本中使用 Linq `GroupBy`，该版本仅在两个项目相邻时才分组，那么它很简单：

```
var result = classes
    .GroupAdjacent(c => c.Value)
    .Select(g => new { 
        SequenceNumFrom = g.Min(c => c.SequenceNumber),
        SequenceNumTo = g.Max(c => c.SequenceNumber),  
        Value = g.Key
    });

foreach (var x in result)
    Console.WriteLine("SequenceNumFrom:{0} SequenceNumTo:{1} Value:{2}", x.SequenceNumFrom, x.SequenceNumTo, x.Value); 
```

[**演示**](http://ideone.com/elughG)

结果：

```
SequenceNumFrom:1  SequenceNumTo:2  Value:9
SequenceNumFrom:3  SequenceNumTo:5  Value:15
SequenceNumFrom:6  SequenceNumTo:6  Value:30
SequenceNumFrom:7  SequenceNumTo:7  Value:9 
```

这是对相邻项目进行分组的扩展方法：

```
public static IEnumerable<IGrouping<TKey, TSource>> GroupAdjacent<TSource, TKey>(
        this IEnumerable<TSource> source,
        Func<TSource, TKey> keySelector)
    {
        TKey last = default(TKey);
        bool haveLast = false;
        List<TSource> list = new List<TSource>();
        foreach (TSource s in source)
        {
            TKey k = keySelector(s);
            if (haveLast)
            {
                if (!k.Equals(last))
                {
                    yield return new GroupOfAdjacent<TSource, TKey>(list, last);
                    list = new List<TSource>();
                    list.Add(s);
                    last = k;
                }
                else
                {
                    list.Add(s);
                    last = k;
                }
            }
            else
            {
                list.Add(s);
                last = k;
                haveLast = true;
            }
        }
        if (haveLast)
            yield return new GroupOfAdjacent<TSource, TKey>(list, last);
    }
} 
```

和使用的类：

```
public class GroupOfAdjacent<TSource, TKey> : IEnumerable<TSource>, IGrouping<TKey, TSource>
{
    public TKey Key { get; set; }
    private List<TSource> GroupList { get; set; }
    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return ((System.Collections.Generic.IEnumerable<TSource>)this).GetEnumerator();
    }
    System.Collections.Generic.IEnumerator<TSource> System.Collections.Generic.IEnumerable<TSource>.GetEnumerator()
    {
        foreach (var s in GroupList)
            yield return s;
    }
    public GroupOfAdjacent(List<TSource> source, TKey key)
    {
        GroupList = source;
        Key = key;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:17:29.117

您可以使用此 linq 查询

[演示](http://ideone.com/Cd78qv)

```
var values = (new[] { 9, 9, 15, 15, 15, 30, 9 }).Select((x, i) => new { x, i });

var query = from v in values
            let firstNonValue = values.Where(v2 => v2.i >= v.i && v2.x != v.x).FirstOrDefault()
            let grouping = firstNonValue == null ? int.MaxValue : firstNonValue.i
            group v by grouping into v
            select new
            {
              From = v.Min(y => y.i) + 1,
              To = v.Max(y => y.i) + 1,
              Value = v.Min(y => y.x)
            }; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-24T06:12:28.970

## [MoreLinq 开箱即用地](https://github.com/morelinq/MoreLINQ)提供了此功能

它被调用`GroupAdjacent`并作为扩展方法实现`IEnumerable`：

> 根据指定的键选择器函数对序列的相邻元素进行分组。

```
enumerable.GroupAdjacent(e => e.Key) 
```

如果您不想引入额外的[二进制 Nuget 包](https://www.nuget.org/packages/morelinq/1.1.0)，甚至还有一个仅包含该方法的[Nuget“源”](https://www.nuget.org/packages/MoreLinq.Source.MoreEnumerable.GroupAdjacent/)包。

该方法返回一个`IEnumerable<IGrouping<TKey, TValue>>`，因此可以以与输出相同的方式处理其输出`GroupBy`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T16:32:31.887

你可以这样做：

```
var all = new [] {
    new Cls(1, 9)
,   new Cls(2, 9)
,   new Cls(3, 15)
,   new Cls(4, 15)
,   new Cls(5, 15)
,   new Cls(6, 30)
,   new Cls(7, 9)
};
var f = all.First();
var res = all.Skip(1).Aggregate(
    new List<Run> {new Run {From = f.SequenceNumber, To = f.SequenceNumber, Value = f.Value} }
,   (p, v) => {
    if (v.Value == p.Last().Value) {
        p.Last().To = v.SequenceNumber;
    } else {
        p.Add(new Run {From = v.SequenceNumber, To = v.SequenceNumber, Value = v.Value});
    }
    return p;
});
foreach (var r in res) {
    Console.WriteLine("{0} - {1} : {2}", r.From, r.To, r.Value);
} 
```

这个想法是`Aggregate`创造性地使用：从一个由单个 组成的列表开始`Run`，检查到目前为止我们在聚合的每个阶段获得的列表的内容（`if`lambda 中的语句）。根据最后一个值，要么继续旧运行，要么开始新运行。

这是[关于 ideone 的演示](http://ideone.com/NJzZC4)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T16:38:42.023

我能够通过创建自定义扩展方法来完成它。

```
static class Extensions {
  internal static IEnumerable<Tuple<int, int, int>> GroupAdj(this IEnumerable<Cls> enumerable) {
    Cls start = null;
    Cls end = null;
    int value = Int32.MinValue;

    foreach (Cls cls in enumerable) {
      if (start == null) {
        start = cls;
        end = cls;
        continue;
      }

      if (start.Value == cls.Value) {
        end = cls;
        continue;
      }

      yield return Tuple.Create(start.SequenceNumber, end.SequenceNumber, start.Value);
      start = cls;
      end = cls;
    }

    yield return Tuple.Create(start.SequenceNumber, end.SequenceNumber, start.Value);
  }
} 
```

这是实现：

```
static void Main() {
  List<Cls> items = new List<Cls> {
    new Cls { SequenceNumber = 1, Value = 9 },
    new Cls { SequenceNumber = 2, Value = 9 },
    new Cls { SequenceNumber = 3, Value = 15 },
    new Cls { SequenceNumber = 4, Value = 15 },
    new Cls { SequenceNumber = 5, Value = 15 },
    new Cls { SequenceNumber = 6, Value = 30 },
    new Cls { SequenceNumber = 7, Value = 9 }
  };

  Console.WriteLine("From  To    Value");
  Console.WriteLine("===== ===== =====");
  foreach (var item in items.OrderBy(i => i.SequenceNumber).GroupAdj()) {
    Console.WriteLine("{0,-5} {1,-5} {2,-5}", item.Item1, item.Item2, item.Item3);
  }
} 
```

和预期的输出：

```
From  To    Value
===== ===== =====
1     2     9
3     5     15
6     6     30
7     7     9 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-14T17:24:04.847

这是一个没有任何辅助方法的实现：

```
var grp = 0;
var results =
from i
in
input.Zip(
    input.Skip(1).Concat(new [] {input.Last ()}),
    (n1, n2) => Tuple.Create(
        n1, (n2.Value == n1.Value) ? grp : grp++
    )
)
group i by i.Item2 into gp
select new {SequenceNumFrom = gp.Min(x => x.Item1.SequenceNumber),SequenceNumTo = gp.Max(x => x.Item1.SequenceNumber), Value = gp.Min(x => x.Item1.Value)}; 
```

这个想法是：

*   跟踪您自己的分组指标 grp。
*   将集合中的每个项目连接到集合中的下一个项目（通过 Skip(1) 和 Zip）。
*   如果值匹配，则它们在同一组中；否则，递增 grp 以指示下一组的开始。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-14T16:51:18.960

未经测试的黑魔法随之而来。在这种情况下，命令式版本似乎会更容易。

```
IEnumerable<Cls> data = ...;
var query = data
    .GroupBy(x => x.Value)
    .Select(g => new
    {
        Value = g.Key,
        Sequences = g
            .OrderBy(x => x.SequenceNumber)
            .Select((x,i) => new
            {
                x.SequenceNumber,
                OffsetSequenceNumber = x.SequenceNumber - i
            })
            .GroupBy(x => x.OffsetSequenceNumber)
            .Select(g => g
                .Select(x => x.SequenceNumber)
                .OrderBy(x => x)
                .ToList())
            .ToList()
    })
    .SelectMany(x => x.Sequences
        .Select(s => new { First = s.First(), Last = s.Last(), x.Value }))
    .OrderBy(x => x.First)
    .ToList(); 
```

# javascript - 在执行之前从站点中删除脚本

> ID：14879198
> 
> 赞同：3
> 
> 时间：2013-02-14T16:16:30.067
> 
> 标签：javascript, dom, removechild

我有一个通过 iframe 加载的网站，它位于同一台服务器上。在加载 iframe 内的页面之前，我需要删除某个脚本标记。换句话说，在执行之前拦截并删除脚本。

我试过了

```
var x = doc.getElementsByTagName('script');
doc.getElementsByTagName('head').removeChild(x); 
```

但这似乎无法在脚本执行之前捕获它。实现这一目标还有哪些其他方法或选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:57:50.390

我认为您无法阻止它在您描述的设置中加载。

但是，您可以将 iframe 指向您自己的服务器端脚本（例如 perl、php），该脚本会检索 URL 并删除脚本，然后返回其他所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:48:35.203

```
<script type="text/plain">
    alert('foo')
</script> 
```

# c# - 初始化编号字符串列表的快速方法？

> ID：14879199
> 
> 赞同：5
> 
> 时间：2013-02-14T16:16:34.893
> 
> 标签：c#, string, list, numbers, initialization

如何快速创建带有编号字符串的字符串列表？

现在我正在使用：

```
var str = new List<string>();

for (int i = 1; i <= 10; i++)
{
    str.Add("This is string number " + i);
} 
```

这行得通，但是我想知道是否有更快的方法来初始化这样的字符串列表，可能在一两行中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:17:51.547

您可以使用 LINQ：

```
Enumerable.Range(1, 10).Select(i => "This is string number " + i).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:18:41.473

```
var str = Enumerable.Range(1, 10).Select(i => "This is string number " + i).ToList(); 
```

* * *

# php - 无法使用 PHP 和 PDO 运行整个存储过程

> ID：14879203
> 
> 赞同：1
> 
> 时间：2013-02-14T16:16:38.117
> 
> 标签：php, sql-server, stored-procedures, pdo

我正在尝试使用 PHP 和 PDO 运行存储过程，但遇到了一个问题，即并非 SP 中的所有语句都运行。对于我的示例，我尝试执行 320 条简单的插入语句，而 PDO 仅通过其中的 317 条。

这是SP：

```
CREATE  PROCEDURE TestSP
AS 
BEGIN 
insert into TestTable values (1)
-- ~314 rows later...
insert into TestTable values (316)
insert into TestTable values (317)
-- PDO stops here
insert into TestTable values (318)
insert into TestTable values (319)
insert into TestTable values (320)
END 
```

这是PHP代码：

```
$connection = new PDO(
  "sqlsrv:server=localhost ; Database=TestDb",
  "username",
  "password"
);
$stmt = $connection->prepare('EXEC TestSP');
$stmt->execute(); 
```

当我使用 MSSQL 连接运行相同的 EXEC 语句时，整个 SP 都会运行。

有谁知道这里发生了什么？如果我需要提供更多信息，请提出问题。

仅供参考，我确实尝试过“调用 TestSP”，但它根本不起作用。

**编辑：**尝试了一个带有循环的脚本（我对使用 SQL 编写脚本很陌生）

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

IF EXISTS (SELECT *
           FROM   sys.objects
           WHERE  object_id = Object_id(N'TestSP')
                  AND type IN ( N'P', N'PC' ))
  DROP PROCEDURE TestSP
GO

CREATE  PROCEDURE TestSP
AS 
BEGIN 
DECLARE
    @counter int

SET @counter = 1
WHILE (@counter <= 500)
    BEGIN
        insert into TestTable values (@counter)
        set @counter = @counter + 1
    END
END
GO 
```

使它更容易测试。有趣的是，我只从 PDO 中获得了 108 行，仍然从 MSSQL 中获得了全部内容。

# r - 如何逃避R中的反斜杠？

> ID：14879204
> 
> 赞同：27
> 
> 时间：2013-02-14T16:16:47.450
> 
> 标签：r, backslash, stringr

我在 R 中工作并且在逃避反斜杠时遇到了麻烦。我正在使用图书馆`stringr`。

```
install.packages("stringr", repos='http://cran.us.r-project.org')
library("stringr") 
```

我想要做`str = str_replace_all(str, "\", "")`

所以我尝试`str = str_replace_all(str, "\\", "")`了，但它不会工作。

我该怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-14T16:23:54.123

我找到了一个可行的解决方案

```
str = gsub("([\\])","", str) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T21:41:42.183

使用`Hmisc::escapeRegex`and `Hmisc::escapeBS`which 会自动转义反斜杠和其他正则表达式特殊字符。

# python - Python TKInter：AttributeError：“NoneType”对象没有属性“create_image”

> ID：14879205
> 
> 赞同：4
> 
> 时间：2013-02-14T16:16:48.503
> 
> 标签：python, tkinter

我正在尝试创建 Tkinter GUI，但在尝试将 gif 图像放在画布上时出现属性错误。

```
canvas_1 = Canvas(width = 800, height = 450, bg = "blue").pack()
gif = PhotoImage(file = "C:\\Users\\Luke\\Desktop\\fb.gif")
canvas_1.create_image(0, 0, image = gif, anchor = NW) 
```

这是我得到的错误

```
 canvas_1.create_image(0, 0, image = gif, anchor = NW)
AttributeError: 'NoneType' object has no attribute 'create_image' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:17:43.530

在`Tkinter`，方法`.pack`和`.grid`返回`None`。他们不返回`Widget`.

修复很简单。将其拆分为 2 行：

```
canvas_1 = Canvas(width = 800, height = 450, bg = "blue")
canvas_1.pack() 
```

# python - 延迟加载/配置要继承的类

> ID：14879206
> 
> 赞同：2
> 
> 时间：2013-02-14T16:16:50.393
> 
> 标签：python, python-2.7, lazy-loading, multiple-inheritance

我创建了一个带有可选部分/类的 Python 包。当我使用这个可选部分（OptClass）时，我必须更改一个类（ExampleClass）的继承。现在我使用这段代码：

```
if use_option :
    _opt_class =  __import__('package.my_module', globals(), locals(), ['OptClass']).OptClass
else :
    _opt_class = object # do not use the optional class

....

class ExampleClass(base_module.BaseHandler, _opt_class):

    .... 
```

是否有另一种 Pythonic 方法来解决这个问题？例如使用动态继承或延迟加载，或者......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:37:13.753

我可能会使用类装饰器：

```
def optional_inherit(cls):
    if use_option:
        from package.my_module import OptClass
        class ExampleClassWithOptClass(cls, OptClass):
            pass
        return ExampleClassWithOptClass
    else:
        return cls

...

@optional_inherit
class ExampleClass(base_module.BaseHandler):
    ... 
```

如果你经常这样做，你可以写信`optional_inherit`接受论点；在这种情况下，`@optional_inherit(use_option, 'package.mymodule.OptClass')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:56:52.780

I'd consider modeling this modularity explicitly. You mention OAuth2, so for the sake of the example I'll assume the functionality you want to add is authentication using that protocol.

Then you'd have files like:

### `authmodule.py`

```
import oauth2client
# ...

class OAuth2Module(object):
    # ... 
```

### `exampleclass.py`

```
class ExampleClass(base_module.BaseHandler):
    def __init__(self, auth_module, ...):
        self.auth_module = auth_module
        # ...

    def foo(self):
        if self.auth_module:
            self.auth_module.bar() 
```

### `main.py`

```
# this is where ExampleClass is created
if use_option:
    # the optional dependency only really gets pulled in here
    from authmodule import AuthModule
    example_obj = ExampleClass(AuthModule())
else:
    example_obj = ExampleClass(None)

# ...
example_obj.foo() 
```

Obviously this can be implemented a little differently, like moving the boilerplate from `ExampleClass` into a `DummyAuthModule`. (Can't really tell for sure seeing as it's not certain how the maybe-inherited class is used.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T17:30:46.333

看起来你想添加一些额外的行为到`ExampleClass`based on `use_option`。我只会编写两个类（一个派生自另一个并添加了额外的行为），然后使用通用名称指向其中一个类，具体取决于`use_option`：

```
from package.my_module import OptClass

class SimpleExampleClass(base_module.BaseHandler):
    pass

class ExtendedExampleClass(SimpleExampleClass, OptClass):
    pass

ExampleClass = ExtendedExampleClass if use_option else SimpleExampleClass 
```

这样，您甚至不需要在 中添加额外的功能`ExtendedExampleClass`：它`OptClass`已经全部完成了。

（也许这就是 Milloose 提到的策略模式；我真的不知道。）

# android - 在可扩展列表中以编程方式扩展组行

> ID：14879207
> 
> 赞同：8
> 
> 时间：2013-02-14T16:16:53.117
> 
> 标签：android

我正在使用可扩展列表视图。当单击内部图像时，无论如何我可以展开组行吗？我知道要让图像响应点击，我必须设置它的焦点。现在，一旦此图像响应单击（在我的客户适配器内），我如何以编程方式展开/折叠它所属的特定组行？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T17:22:55.017

在适配器中

```
private OnItemSelectedListener onItemSelectedCallback;

public interface OnItemsSelectedListener {
    public void onImageSelected(int groupPos);
}

public YourAdapter(Context context) {
    try {
        this.onItemSelectedCallback = (OnItemSelectedListener ) context;
    }
    catch (ClassCastException e) {
        throw new ClassCastException(context.toString() + " must implement OnItemSelectedListener ");
    }
} 
```

在 getView() 中添加这个

```
ImageView imageView = new ImageView();
imageView.setTag(R.id.tagGroupPosition, groupPosition);
imageView.setOnClickListener(onClickListener); 
```

在 OnClickListener 中添加这个

```
OnClickListener onClickListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        int groupPos = ((ImageView) v).getTagId(R.id.tagGroupPosition);
        onItemSelectedCallback.onImageSelected(groupPos);
    }
} 
```

然后在活动中你必须实现 YourAdapter.OnItemsSelectedListener 覆盖 onImageSelected

```
@Override
public void onImageSelected(int groupPos){
    if(expandableList.isGroupExpanded(groupPos)){
        expandableList.collapseGroup(groupPos);
    }else{
        expandableList.expandGroup(groupPos);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-26T09:37:41.227

更简单的方法：

1.  `ExpandableListView`在适配器构造函数中传递对 的引用；
2.  在您需要的按钮上`getGroupView`添加一个`OnClickListener`并简单地调用`listView.expandGroup(position);`

例子：

```
public class YourAdapter extends BaseExpandableListAdapter {

private ExpandableListView listView;

public ReportsAdapter(ExpandableListView listView) {
    this.listView = listView;
}

//...

@Override
public View getGroupView(final int position, boolean isExpanded, View convertView, ViewGroup parent) {
    ParentViewHolder holder;

    if (convertView == null) {
        convertView = LayoutInflater.from(parent.getContext())
                .inflate(R.layout.your_item, parent, false);

        holder = new ParentViewHolder();

        //... holder logic

        holder.btnExpand = convertView.findViewById(R.id.btn_expand);

        convertView.setTag(holder);
    } else {
        holder = (ParentViewHolder) convertView.getTag();
    }

    //..holder logic

    holder.btnExpand.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            listView.expandGroup(position);
        }
    });

    return convertView;
} 
```

在您的 Activity`onCreate()`或 Fragment`onCreateView()`中有

```
ExpandableListView listView = (ExpandableListView) view.findViewById(R.id.expandable_list_view);
    mAdapter = new YourAdapter(listView);
    listView.setAdapter(mAdapter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-18T13:36:04.860

这不会回答来自 OP 的问题，但我最终在这里寻找一种仅在适配器加载项目后以编程方式扩展组的方法，这是我的修复：

```
MyAdapter adapter = new MyAdapter(this, viewModel);

adapter.registerDataSetObserver(new DataSetObserver() {
     @Override
     public void onChanged() {
          super.onChanged();
          if (adapter.getGroupCount()>0) {
               binding.expandableListView.expandGroup(0);
          }
        }
    });
binding.expandableListView.setAdapter(adapter); 
```

# html - 包括一个带有 knitr 的交互式 3D 人物

> ID：14879210
> 
> 赞同：41
> 
> 时间：2013-02-14T16:16:58.280
> 
> 标签：html, r, knitr, rgl, r-markdown

使用`knitr`它可以将`rgl`3D 图形嵌入到来自`Rmarkdown`源文件的 html 文档中：

```
```{r setup}
library(rgl)
knit_hooks$set(rgl = hook_rgl)
x <- sort(rnorm(1000))
y <- rnorm(1000)
z <- rnorm(1000) + atan2(x,y)
```

```{r, rgl=TRUE}
plot3d(x, y, z, col=rainbow(1000))
``` 
```

但是 3D 图形在 html 文档中不是交互式的。是否有可能获得交互式 3D 图形？包的`writeWebGL()`功能是`rgl`创建一个带有交互式 3D 图形的 html 文件，有没有办法用 Rmarkdown 直接包含这个 html 代码？否则如何手动包含此 html 代码？

## 2013 年 6 月 24 日更新

这是一个今天不起作用的示例（Chrome 中没有出现 3D 图形）：

*   Rmd[源文件](https://gist.github.com/stla/5870638)，这是非常基本的：

    ```
    ```{r setup}
    library(rgl)
    knit_hooks$set(webgl = hook_webgl)
    ```
    ```{r, webgl=TRUE}
    M <- rbind(
      c(0,0,0),
      c(-1,4,0),
      c(4,9,0),
      c(6,3,0)
      )
      points3d(M,col='red')
    ```
    ```{r}
    sessionInfo()
    ``` 
    ```

    我在两种情况下使用不同版本的`rgl`和`knitr`包的 RStudio“编织”按钮编织了这个文件（但这肯定是由于`rgl`包的原因，因为函数的输出出现了问题`writeWebGL`）：

*   带有 R-2.15.2 的旧版本：[源文件](https://gist.github.com/stla/5870681)和[html 渲染](http://pagist.github.io/?5870681)。[以及rgl_0.93.928](https://gist.github.com/stla/5871039)生成的[html 文件`writeWebGL`](https://gist.github.com/stla/5871039)。对我来说效果很好（3D 图中只有 4 个红点……在我的脏屏幕上不容易看到，但我看到了）。

*   R-2.15.3 的最新版本：[源文件](https://gist.github.com/stla/5870653)和[html 渲染](http://pagist.github.io/?5870653)。[以及用 rgl_0.93.935](https://gist.github.com/stla/5871051)生成的[html 文件`writeWebGL`](https://gist.github.com/stla/5871051)。对我来说它不起作用：3D 绘图不可见。我使用的是 Windows 7，它不适用于 Chrome，也不适用于 Firefox。

## 编辑 28/06/2013

24/06 更新引发的问题与`knitr`. 我在这篇文章中对其进行了重新表述：[WebGL rendering with rgl 0.93.935 R package](https://stackoverflow.com/q/17365709/1100107)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-15T05:36:56.547

我在**knitr中**[添加](https://github.com/yihui/knitr/commit/1f18ebbd22266fe988c05dff0ccad440e7f7442c)了一个新的钩子，后来被合并到**rgl**中。这是一个例子：`hook_webgl()`

 ****```
```{r setup}
library(knitr)
library(rgl)
knit_hooks$set(webgl = hook_webgl)
```

```{r testgl, webgl=TRUE}
x <- sort(rnorm(1000))
y <- rnorm(1000)
z <- rnorm(1000) + atan2(x,y)
plot3d(x, y, z, col=rainbow(1000))
``` 
```****

# javascript - javascript alert 消息没有弹出，为什么？

> ID：14879214
> 
> 赞同：1
> 
> 时间：2013-02-14T16:17:01.547
> 
> 标签：javascript

这应该可行，我只是想联系一个节点并找出它的价值。

```
<html>
    <head></head>
    <body>
        <script type="text/javascript">
            function nadfunc() {
                var demoList = document.getElementById('eventsList');
                alert(var);
            }
            nadfunc();
        </script>

        <ul id="eventsList">
            <li>List</li>
            <li>List</li>
            <li>
                <a id="linkedItem" href="http://www.google.com">Linked List Item</a>
            </li>
            <li>List</li>
        </ul>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T16:18:27.197

写

```
alert(demoList); 
```

`var`只是一个关键字，你必须使用实际的变量名。

此外，您的脚本块应在关闭正文标记之前放置在页面末尾：

```
<html>
    <head></head>
    <body>    
        <ul id="eventsList">
            <li>List</li>
            <li>List</li>
            <li><a id="linkedItem" href="http://www.google.com">Linked List Item</a></li>
            <li>List</li>
        </ul>

        <script type="text/javascript">
            function nadfunc() {
                var demoList = document.getElementById('eventsList');
                alert(demoList);
            }
            nadfunc();
        </script>
    </body>
</html> 
```

# powershell - 从生成的字符串（不是文件）中剥离 BOM

> ID：14879216
> 
> 赞同：2
> 
> 时间：2013-02-14T16:16:59.800
> 
> 标签：powershell, byte-order-mark

我正在处理看起来像是 MS Office 文档的字符串。请注意，在此示例中，有两个 BOM“字符”，一个位于字符串的开头，一个位于正文中。有时有几个字符，有时没有。在 Powershell 控制台中，它们打印为 ?

```
ï»¿<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" xmlns:m="http://schemas.microsoft.com/office/2004/12/omml" xmlns="http://www.w3.org/TR/REC-html40"><head><meta http-equiv=Content-Type content="text/html; charset=unicode"><meta name=Generator content="Microsoft Word 14 (filtered medium)"><style><!--
/* Font Definitions */
@font-face
    {font-family:Calibri;
    panose-1:2 15 5 2 2 2 4 3 2 4;}
/* Style Definitions */
    <snip - bunch of style defs>
--></style></head><body lang=EN-US link=blue vlink=purple><div class=WordSection1>
<p class=MsoNormal style='text-autospace:none'>
 <span style='font-size:10.0pt;font-family:"Tahoma","sans-serif"'>ï»¿</span>
 <span style='font-size:12.0pt;font-family:"Times New Roman","serif"'>Testing <o:p></o:p></span>
</p></div></body></html> 
```

字符串来自一个对象，所以我不能简单地使用 Get-Content 强制 UTF8 编码。我还能如何剥离它们？我不担心这是有损的，因为这只是通过管道传输到显示器，因此希望去除多余的字符。我还将剥离 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:49:19.513

如果字符串中可能有其他实际的 UTF8 字符，另一种方法是走这条路线。它假设字节顺序标记字符位于每个字符串的开头：

```
$bytes = @()
$strs | Foreach {$bytes += [byte[]][char[]]$_}

$memStream = new-object system.io.memorystream
$memStream.Write($bytes, 0, $bytes.Length)
$memStream.Position = 0

$reader = new-object system.io.streamreader($memStream, [System.Text.Encoding]::UTF8)
$reader.ReadToEnd()
$reader.Dispose() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:57:55.730

You should include the code you use to get your output when you ask for help. Does this work?

```
$s = #your code that gets the output#
$s -replace "ï»¿"  #returns output without the characters 
```

Or

```
( code that creates output ) -replace "ï»¿" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T18:20:14.023

这是我用来从源文件中删除嵌入的 UTF-8 BOM 字符的 PowerShell 脚本：

```
$files=get-childitem -Path . -Include @("*.h","*.cpp") -Recurse
foreach ($f in $files)
{
(Get-Content $f.PSPath) | 
Foreach-Object {$_ -replace "\xEF\xBB\xBF", ""} | 
Set-Content $f.PSPath
} 
```

# asp.net - ASP.NET MVC 错误中的自定义成员资格

> ID：14879225
> 
> 赞同：-4
> 
> 时间：2013-02-14T16:17:28.663
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-membership, membership-provider

我试图通过从基类继承来在 asp.net mvc 中实现自己的成员资格。

```
public override void CreateUser(string username, string password)
    {
        this.repository.CreateUser(username, password);
    } 
```

但是，当我尝试构建应用程序时，出现以下错误。

```
Membership.CreateUser(string, string)': no suitable method found to override    
Membership does not implement inherited abstract member 'System.Web.Security.MembershipProvider.CreateUser(string, string, string, string, string, bool, object, out System.Web.Security.MembershipCreateStatus)' 
```

我试图更改原始函数中的参数，但我得到了同样的错误。请指导我，我是 ASP.NET 和 C# 的新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T04:17:53.557

你可以试试这个

```
public void CreateUser(string username, string password)
        {
            this.repository.CreateUser(username, password);
        } 
```

或者这个

```
public override MembershipUser CreateUser(string username, string password, string email, out MembershipCreateStatus status) 
```

这是一个[教程](http://msdn.microsoft.com/en-us/library/ms366730.aspx)，将指导您如何：实现自定义会员用户

# magento - Magento 观察者似乎没有捕捉到事件

> ID：14879236
> 
> 赞同：0
> 
> 时间：2013-02-14T16:17:56.270
> 
> 标签：magento

我遵循了一个教程，但我的观察者没有捕捉到事件。我知道事件正在触发，因为我正在记录它们。我在我的代码中找不到错误。

/local/Package/MODULE/etc/config.xml

```
<config>
<modules>
    <Package_MODULE>
        <version>0.1.0</version>
    </Package_MODULE>
</modules>

<global>
    <models>
        <module>
            <class>Package_MODULE_Model</class>
        </module>
    </models>
    <events>
            <catalog_product_gallery_upload_image_after>
                    <observers>
                            <module_model_upload>
                                    <type>model</type>
                                    <class>module/observer</class>
                                    <method>printTestMessage</method>
                            </module_model_upload>
                    </observers>
            </catalog_product_gallery_upload_image_after>
    </events>

</global>
</config> 
```

/local/Package/MODULE/Model/Observer.php

```
<?php

class Package_MODULE_Model_Observer{
    public function printTestMessage(Varien_Event_Observer $observer){
             Mage::log("TESTING ", null, 'events.log');  //<--same log statement I'm using to test the events firing
    }
} 
```

/etc/modules/Package_MODULE.xml

```
<config>
<modules>
    <Package_MODULE>
        <active>true</active>
        <codePool>local</codePool>
    </Package_MODULE>
</modules>
</config> 
```

EDIT2：此错误出现在 system.log 中：

```
2013-02-14T17:10:21+00:00 ERR (3): Notice: Uninitialized string offset: 3  in /opt/bitnami/apps/magento/htdocs/includes/src/Varien_File_Uploader.php on line 538
2013-02-14T17:10:21+00:00 ERR (3): Warning: include(/opt/bitnami/apps/magento/htdocs/includes/src/Package_MODULE_Model_Observer.php): failed to open stream: No such file or directory  in /opt/bitnami/apps/magento/htdocs/includes/src/Varien_Autoload.php on line 93
2013-02-14T17:10:21+00:00 ERR (3): Warning: include(): Failed opening '/opt/bitnami/apps/magento/htdocs/includes/src/Package_MODULE_Model_Observer.php' for inclusion (include_path='/opt/bitnami/apps/magento/htdocs/includes/src:.:/opt/bitnami/php/lib/php')  in /opt/bitnami/apps/magento/htdocs/includes/src/Varien_Autoload.php on line 93 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T17:34:21.247

检查包含警告...这是由于启用了编译器但您的类尚未编译。

我回答这个问题的次数可能比我数[的要多：禁用编译器或重新编译](https://stackoverflow.com/questions/11611433/magento-unable-to-load-the-observe-class/11611769#11611769)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:23:57.053

您的观察者的配置中有错误的类名。`<class>module_model/observer</class>`不希望 _model 在里面。模型的类别名`Package_MODULE_Model_Observer`是`module/observer`。

# google-places-api - 如何让 Google Places API 返回包含两个或多个关键字的结果？

> ID：14879239
> 
> 赞同：0
> 
> 时间：2013-02-14T16:18:02.690
> 
> 标签：google-places-api

我正在尝试查询 Google Places API，向其传递原点位置和半径以及一些关键字。这曾经奏效！直到最近我才注意到结果的质量变得更差了，从我的研究来看，如果我在搜索框中提供两个或更多单词，似乎没有返回任何结果。

我准备了一个示例 HTML 文件来演示该问题。我们正在美国印第安纳州印第安纳波利斯附近进行搜索，以查看有什么问题，在搜索框中键入*Indiana ，然后单击“搜索”。*这应该返回一些结果。其中之一是印第安纳州立博物馆。让我们缩小搜索范围，输入*Indiana State*，我们应该会在结果列表中看到 Indiana State Museum，好吧……哇！它去哪儿了？:( 谷歌以这种方式返回 ZERO_RESULTS。我做错了什么还是他们的 API 发生了变化，变得几乎没用了？

下面是我的代码，如果你喜欢，你也可以[抓住要点。](https://gist.github.com/pkrakowiak/4953833)

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=places&amp;sensor=false"></script>
    </head>
    <body>
        <input type="text" id="search" style="width: 300px;" /><input type="button" id="searchBtn" value="Search"/><br/>
        <div id="map" style="width: 300px; height: 300px;"></div>
        <div id="results" style="width: 600px;height: 600px;background-color:gray;color:white;"></div>
        <script type="text/javascript">
            $(function(){
                var indy = new google.maps.LatLng(39.7685825,-86.1579557);

                var map = new google.maps.Map(document.getElementById('map'), {
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: indy,
                    zoom: 10
                });

                var service = new google.maps.places.PlacesService(map);

                $('#searchBtn').click(function() {
                    $('#results').empty();
                    var request = {
                        location: indy,
                        radius: 5000,
                        /*types: ['geocode'],*/
                        name: $('#search').val()
                    };
                    service.nearbySearch(request, function(results, status) {
                        if (status == google.maps.places.PlacesServiceStatus.OK) {
                            printLocationName($.map(results, function (item) {
                                return {
                                    reference: item.reference,
                                    label: item.formatted_address,
                                    value: item.name,
                                    latitude: item.geometry.location.lat(),
                                    longitude: item.geometry.location.lng()
                                };
                            }));
                        }
                        if (status == google.maps.places.PlacesServiceStatus.ZERO_RESULTS) {
                            $('#results').append('<span>No results.</span><img src="http://i474.photobucket.com/albums/rr104/gio_dim/AVerySadPanda.png"/>')
                        }
                    });
                });

                function printLocationName(places) {
                    for (var i = 0; i < places.length; i++) {
                        $('#results').append('<span>' + places[i].value + '</span><br/>');
                    }
                }
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T05:41:02.540

'name' 参数用于非常具体的搜索。只需将“名称”更改为“关键字”即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T14:13:20.410

看起来这是API中的一个错误。:(

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4845](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4845)

[http://code.google.com/p/gmaps-api-issues/issues/detail?id=4933](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4933)

# php - 正则表达式失败，我不明白为什么

> ID：14879243
> 
> 赞同：0
> 
> 时间：2013-02-14T16:18:07.887
> 
> 标签：php, regex

我想我已经看这个太久了。我似乎无法让这个正则表达式工作。

代码：

```
$pattern='/([0-9A-Z\-])*(#)(\s*)/i'; 

if (preg_match($pattern,'B-25-1abc-SW-19# ',$matches) )  {
    echo $matches[0];
} 
```

（来自评论）：
我期待它打印出`B-25-1abc-SW-19#`文本，但它没有打印任何内容，因为它没有进入 if 语句的真实部分。

我还尝试将模式更改为：

```
$pattern='/^$([0-9A-Z\-])*(#)(\s*)/i'; 
```

但这也没有解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:44:39.497

我在 phpfiddle 上也试过了，它确实返回了结果。我还对您的正则表达式进行了一些编辑。

[http://phpfiddle.org/main/code/3x6-6w2](http://phpfiddle.org/main/code/3x6-6w2)

也许您正在处理的字符串有问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:21:59.617

您可能放错了量词（尽管它仍应与整个字符串匹配）：

```
$pattern='/([0-9A-Z\-])*(#)(\s*)/i'; 
```

应该：

```
$pattern='/([0-9A-Z\-]*)(#)(\s*)/i'; 
```

如果它真的只是`matches[0]`你所追求的，你应该检查你的原始字符串，也许你有一些 utf8 字符`-`，而不是你的模式中的减号字符（或相反）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:24:41.473

星星在第一个 ) 之后，而不是 ] :)

```
 $pattern='/([0-9A-Z\-]*)(#)(\s*)/i'; 

            $matches= array();
            if (preg_match($pattern,'B-25-1abc-SW-19# ',$matches) )  {
               print_r($matches);
            }   

//N.B.
//http://php.net/manual/en/function.preg-match.php
//If matches is provided, then it is filled with the results of search. $matches[0] will contain the text that matched the full pattern, $matches[1] will have the text that matched the first captured parenthesized subpattern, and so on. 
```

# c++ - 检查两个 QSharedPointer 是否有相等的数据

> ID：14879250
> 
> 赞同：2
> 
> 时间：2013-02-14T16:18:23.980
> 
> 标签：c++, qt, pointers, qsharedpointer

我有两个 QSharedPointer，我可以像这样使用**operator==**检查它们是否指向同一个对象

```
QSharedPointer1 == QSharedPointer2 
```

或者我必须写

```
QSharedPointer1.data() == QSharedPointer2.data() 
```

存储在指针中的对象具有重载的 operator==。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:25:01.470

你应该使用`operator==`：

> **bool operator== ( const QSharedPointer & ptr1, const QSharedPointer & ptr2 )**
> 
> 如果 ptr1 引用的指针与 ptr2 引用的指针相同，则返回 true。如果 ptr2 的模板参数与 ptr1 的不同，QSharedPointer 将尝试执行自动 static_cast 以确保被比较的指针相等。如果 ptr2 的模板参数不是 ptr1 的基类型或派生类型，则会出现编译器错误。

因此，无需通过`data()`方法获取指针，+ 它将尝试`static_cast`匹配模板参数。

另外，请注意，存储在指针中的对象是否已重载并不重要`operator==`——您只是在此处比较指针，并且`operator==`是为指针类型定义的。如果要比较指针所指的对象，则需要取消引用指针并比较对对象的引用（这将调用`T::operator==`方法）：

```
if(*ptr1 == *ptr2)
   // ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:23:44.757

从[QSharedPointer 类参考](http://doc.qt.digia.com/4.7-snapshot/qsharedpointer.html)：

> `bool operator==(const QSharedPointer<T>& ptr1, const QSharedPointer<X>& ptr2)`
> 
> 如果 ptr1 引用的指针与 ptr2 引用的指针相同，则返回 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:23:43.523

第一个版本应该可以与[这里相关](http://doc.qt.digia.com/4.7-snapshot/qsharedpointer.html#operator-eq-eq-19)

> `bool operator== ( const QSharedPointer<T> & ptr1, const QSharedPointer<X> & ptr2 )`
> 
> 如果 ptr1 引用的指针与 ptr2 引用的指针相同，则返回 true。

# java - 无法从 Jython 模块导入 Java 类

> ID：14879255
> 
> 赞同：13
> 
> 时间：2013-02-14T16:18:38.567
> 
> 标签：java, python, import, jython

**注意：**我找到了解决方案并回答了自己。不过，我不知道为什么该设置是错误的并导致了问题。我仍然有兴趣对 Jython 导入系统的工作原理进行很好的解释；如果有人想获得赏金，请回答。

* * *

我正在处理一个需要在 Python 中进行计算的现有 Java EE 项目。我正处于集成测试的第一阶段，但我已经面临一个问题。我阅读[了 Jython 书的第 10 章，](http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html)但仍然找不到解决方案。我还阅读了[第 8 章](http://www.jython.org/jythonbook/en/1.0/ModulesPackages.html)（代码重用的模块和包），但对我来说还不清楚。

非常感谢您解释 Jython 导入系统的工作原理以及如何配置它。

**问题：**

```
$ jython -v
import: 'exceptions' as org.python.core.exceptions in builtin modules
Jython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:54:35) 
[Java HotSpot(TM) Server VM (Oracle Corporation)] on java1.7.0_10
import: import site # precompiled from /home/me/jython/2.5.3/Lib/site$py.class
import: 'sys' as sys in builtin modules
import: import os # precompiled from /home/me/jython/2.5.3/Lib/os$py.class
import: 'errno' as org.python.modules.errno in builtin modules
import: 'posix' as org.python.modules.posix.PosixModule in builtin modules
import: import posixpath # precompiled from /home/me/jython/2.5.3/Lib/posixpath$py.class
import: import stat # precompiled from /home/me/jython/2.5.3/Lib/stat$py.class
import: 'java' as java package
import: 'File' as java class
import: 'IOException' as java class
import: 'org' as java package
import: 'Py' as java class
Type "help", "copyright", "credits" or "license" for more information.

>>> import pendulum.generator.BuildingType
import: import pendulum # precompiled from /path/to/project/build/classes/pendulum/__init__$py.class
import: import pendulum.generator # precompiled from /path/to/project/build/classes/pendulum/generator/__init__$py.class
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named BuildingType 
```

我的问题是：我做错了什么以及如何解决问题以成功导入 BuildingType 接口？也许问题出在 CLASSPATH 中，但我不知道哪个值可能合适。

* * *

**代码组织：**

```
$ tree build/classes/pendulum/generator/ src/pendulum/generator/
build/classes/pendulum/generator/
├── BuildingType.class
├── __init__.py
└── __init__$py.class

src/pendulum/generator/
├── BuildingType.java
└── __init__.py 
```

**[由私有 Jython 注册表文件](http://wiki.python.org/jython/JythonFaq/InstallingJython#Where.27s_the_registry_file)定义的导入路径：**

```
$ cat ~/.jython 
python.path=\
/path/to/project/build/classes:\
/path/to/project/src:\
/home/me/jdevel/extras/2.5.3/Lib:\
/home/me/jdevel/extras/2.5.3/Lib/site-packages 
```

我确信 Jython 会选择路径，因为我`sys.path`在 Jython 提示符处检查了它。

**建筑类型.java**

```
package pendulum.generator;

public interface BuildingType {
    public String getBuildingName();
    public String getBuildingAddress();
    public String getBuildingId();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:04:06.907

在尝试/捕获方法浪费了很多时间之后，我自己找到了答案。

.jython*必须*看起来像这样：

```
python.path=\
/path/to/project/build:\
/path/to/project/src:\
/home/me/jdevel/extras/2.5.3/Lib:\
/home/me/jdevel/extras/2.5.3/Lib/site-packages 
```

不是这个：

```
python.path=\
/path/to/project/build/classes:\
/path/to/project/src:\
/home/me/jdevel/extras/2.5.3/Lib:\
/home/me/jdevel/extras/2.5.3/Lib/site-packages 
```

特别是，**添加`/path/to/project/build/classes`到导入路径是错误的**（即使它反映了文件系统层次结构），而`/path/to/project/build`正确并解决了问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T20:20:41.203

您需要设置 CLASSPATH 以及 python.path。

使用相同的目录布局，这对我有用：

```
jython10$ CLASSPATH=build/classes/  jython -v Building.py
import: 'exceptions' as org.python.core.exceptions in builtin modules
import: import site # precompiled from /usr/local/Java/jython2.5.3/Lib/site$py.class
import: 'sys' as sys in builtin modules
import: import os # precompiled from /usr/local/Java/jython2.5.3/Lib/os$py.class
import: 'errno' as org.python.modules.errno in builtin modules
import: 'posix' as org.python.modules.posix.PosixModule in builtin modules
import: import posixpath # precompiled from /usr/local/Java/jython2.5.3/Lib/posixpath$py.class
import: import stat # precompiled from /usr/local/Java/jython2.5.3/Lib/stat$py.class
import: java package as '/Users/sdm7g/jaxp/jython10/build/classes/pendulum'
import: 'pendulum' as java package
import: 'pendulum' as java package
import: java package as '/Users/sdm7g/jaxp/jython10/build/classes/pendulum/generator'
import: 'pendulum.generator' as java package
import: 'BuildingType' as java class 
```

参考：[使用 CLASSPATH](http://www.jython.org/jythonbook/en/1.0/appendixB.html#working-with-classpath)（Jython Book）。

# macos - DTrace：在 OS X 上跟踪用户堆栈大小？(curthread->t_procp->p_stksize?)

> ID：14879256
> 
> 赞同：3
> 
> 时间：2013-02-14T16:18:39.240
> 
> 标签：macos, stack-trace, callstack, dtrace

我遇到了这个用于跟踪用户堆栈大小的简单 DTrace 脚本，但它在 OS X Mountain Lion 上不起作用：

```
dtrace -n 'sched:::on-cpu { @[execname] = max(curthread->t_procp->p_stksize);}' 
```

（来自： http: [//www.solarisinternals.com/wiki/index.php/DTrace_Topics_One_Liners](http://www.solarisinternals.com/wiki/index.php/DTrace_Topics_One_Liners)）

在 OS X 上返回的错误是：

```
dtrace: invalid probe specifier sched:::on-cpu { @[execname] =
  max(curthread->t_procp->p_stksize);}: in action list:
  t_procp is not a member of struct thread 
```

确实，我很难弄清楚 OS X 上“curthread”的有效成员是什么。是否有等效的方法可以深入了解线程的当前用户堆栈大小？或者“curthread”只是 OS X 上的一个不透明指针，仅可用于线程识别？请注意，如果有帮助的话，我很乐意通过“pid”提供程序进行此跟踪。

谢谢！

# java - Hibernate 集合集列作为索引

> ID：14879259
> 
> 赞同：0
> 
> 时间：2013-02-14T16:18:45.193
> 
> 标签：java, hibernate, collections, indexing

我查看了[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-indexed)(hibernate 4.1) 。而且我有点困惑，我希望能够`@OrderColumn(name="orders_index")`在我的`set Collection`（出于设计目的）中使用注释。现在，我实际上是在我的手动添加一个orders_index，但它在***`PersonnalTaskMacro`中变得很痛苦（我需要重构它......）。我遇到了，但这并不是我真正想要的。我怎样才能做到这一点？*`@MapKeyColumn(name="orders_number")`*

 *```
@Entity
@Table(name = "PERS_TASK_MACRO_PARAMETER")
public class PersonnalTaskMacroParameter extends Parameter {

    /* .... */

    @OneToMany(cascade = { CascadeType.ALL } , fetch = FetchType.LAZY)
    @JoinTable(name = "PERS_TASK_MACRO_JOIN", 
    joinColumns = { @JoinColumn(name = "MODULE_PARAMETER_ID") }, 
    inverseJoinColumns = { @JoinColumn(name = "PERS_TASK_MACRO_ID") })
    @ForeignKey(name="FK_PERS_TASK_MACRO_PARAM_ID", inverseName="FK_PERS_TASK_MACRO_ID")
    private Set<PersonnalTaskMacro> personnalTaskMacroSet = new HashSet<PersonnalTaskMacro>();

/* .... */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:59:43.780

Set 不是有序集合。[您引用](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-indexed)的文档指出了正确的方向：更改

```
Set<PersonnalTaskMacro> personnalTaskMacroSet ... 
```

到

```
List<PersonnalTaskMacro> personnalTaskMacros ... 
```

您也可以使用 SortedSets 来做[类似的事情](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-sorted)，但这取决于排序键是您所拥有的实体的一部分。*

# php - addHTMLImage 不起作用

> ID：14879266
> 
> 赞同：2
> 
> 时间：2013-02-14T16:19:22.533
> 
> 标签：php, html, email, pear, mime-mail

我正在开发一个项目，该项目在填写论坛后向人们发送 HTML 电子邮件，我已经让代码的 HTML 部分工作，但由于某种原因，在将图像嵌入时无法让横幅图像出现在顶部我的代码。在我使用最新版本的 PHP 之前，我可以使用它，但必须降级到 PHP 5.3 才能让我的脚本在我们的服务器上运行。从那以后，我使用了相同的代码，结果失败了。我尝试了许多不同的方法，但没有一种被证明是有效的。这是我的代码

```
 require_once('Mail.php');
    require_once('Mail/mime.php');

    $smtp_credentials = array('host' => 'smtp.postmarkapp.com', 'port' => 25, 'auth' =>          TRUE, 'username' => '*', 'password' => '*'); 

    $headers = array('From' => '*', 'To' => $email, 'Subject' => $subject);

    $mime = new Mail_mime(array('eol' => PHP_EOL));

    $file = '/*/*/*/dls.jpg';
    $mime->addHTMLImage(file_get_contents($file),'image/jpeg',basename($file),false, "blackstone");                   

    #I used this code to fish out the cid out of mime I tried echoing this out and 
    # it returned blackstone which I defined as the 5th parameter of addHTMLImage which
    # sets the cid. 
    $cid=$mime->_html_images[count($mime->_html_images)-1]['cid'];

    $banner = '<span style="color:#1f497d">
    <img width = "623" height = "85" src = "cid:' . $cid . '" />
    </span>';

    $message_text = $banner;

    $mime->setHTMLBody($message_text);

    $mime->setTXTBody($body_text);

    $mail = Mail::factory('smtp', $smtp_credentials);

    try {
    $send = $mail->send($email, $mime->headers($headers), $mime->get());

    } catch (Exception $e) {

    echo $e->getMessage(); die;
    }

    echo 'mail sent!'; 
```

我尝试了许多不同的方法，比如根本不使用 cid，因为许多邮件客户端不能很好地使用 cid，但在 PEAR 手册中建议在 src 属性中使用 cid。我正在使用 gmail，但我认为这不是问题，因为它在我运行较新版本的 php 时有效。每当我打开电子邮件时，它的 html 部分都会起作用。图像应该在的地方有一个小图像图标，但没有显示图像。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T15:19:30.220

图像 url 应该是**绝对 url** .. 不是路径（相对或绝对）.. 它不能是路径，它必须是图像的完整 url。

因此，您需要使用有效的 url，如下所示。

`http://www.example.com/images/image-name.jpg`

像下面这样的东西是行不通的。

`../path/to/images/image-name.jpg`

下面也是如此（它不起作用）：

`/root/public/path/to/images/image-name.jpg`

因此，请确保您为图像指定了有效的 url。

# java - Java 怎么知道 RuntimeExceptions 没有被检查？

> ID：14879268
> 
> 赞同：4
> 
> 时间：2013-02-14T16:19:23.263
> 
> 标签：java, exception-handling

Java 编译器如何知道它`java.lang.RuntimeException`及其子类是未经检查的，因为它们继承自`java.lang.Exception`，这是一个检查异常？我查看了代码，在类中似乎没有任何东西可以告诉编译器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T16:23:37.290

因为它[在语言# 11.1.1 的规范中](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html#jls-11.1.1-300)是这样定义的：

> *   未经检查的异常类是运行时异常类和错误类。
> *   已检查异常类是除未检查异常类之外的所有异常类。也就是说，检查的异常类都是 Throwable 的子类，除了 RuntimeException 及其子类和 Error 及其子类。

所以它不是各种异常类代码的一部分，它只是语言定义的约定，编译器必须实现才能兼容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:21:03.287

它扩展的事实`RuntimeException`就足够了。在编译期间，它知道类层次结构是什么，因此如果它包含`RuntimeException`，则未选中。否则，它会被检查。请记住，checked/unchecked 是编译器约束，而不是运行时约束，有一些方法可以让 Java 抛出从未被捕获的已检查异常。例如，使用`Proxy`：

```
public class ExceptionalInvocationHandler implements InvocationHandler {

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        throw new IOException("Take that, checked exceptions!");
    }
} 
```

还有一个界面：

```
public interface Example {
    public void doSomething();
} 
```

并创建一个代理并调用它：

```
 Example ex = (Example) Proxy.newProxyInstance(Example.class.getClassLoader(),
     new Class[] { Example.class },
     new ExceptionalInvocationHandler());
 ex.doSomething(); // Throws IOException even though it's not declared. 
```

# listbox - ZK Listbox onselect 问题

> ID：14879269
> 
> 赞同：0
> 
> 时间：2013-02-14T16:19:21.887
> 
> 标签：listbox, zk, zul

我在我的应用程序中使用 Zk6.4 我在列表框组件中遇到了一个奇怪的问题......你可以 [在这里查看](http://zkfiddle.org/sample/6i5g90/35-Onselect)

如何重现问题？

1-运行上面给出的小提琴代码链接

![在此处输入图像描述](../Images/18ecc142e0a419b5dd543f3181598ca5.png)

2-单击任何项​​目

![在此处输入图像描述](../Images/880271507e373c016f4ae0d039b51766.png)

3 单击模型窗口的选择按钮 - 一个新选项卡将打开此选项卡，其中包含一个**列表框**，现在此**列表框** **onselect**或单项选择不起作用。 ![在此处输入图像描述](../Images/a0bcd20e89a6abe594c75ea52cc3875f.png)

4-现在新选项卡现在将打开 Listbox OnSelect 不起作用 ![在此处输入图像描述](../Images/46d42935ecbe68594a1a1a0ab07d767f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:49:44.287

我认为这不是问题，您的 tab2.zul 中没有任何 onClick 或 onSelect 属性。

tab1.zul:

```
<listitem onClick="@command('doPickDocument',documentRSN=each.documentRSN)">
    <listcell label="@load(each.documentRSN)" />
    <listcell label="@load(each.documentDesc)" />
    <listcell label="@load(each.documentOrder)" />
</listitem> 
```

tab2.zul:

```
<listitem >
   <listcell label="@load(each.documentRSN)" />
       <listcell label="@load(each.documentDesc)" />
   <listcell label="@load(each.documentOrder)" />
</listitem> 
```

**编辑第一条评论：**

我的错。

对 popup_window.zul 窗口使用 mode="overlapped"。因为它是模态的，所以在关闭模态窗口之前，您无法与其他组件（窗口）进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:12:29.780

正如 schroet 所提到的，这是由模态窗口引起的，请参阅[ZK Window Javadoc](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zul/Window.html#MODAL)

作为一种解决方法，您可以修改 PopUpViewModel.java 中的 doPickDocumentRSN 方法，如下所示：

```
 public void doPickDocumentRSN(@ContextParam(ContextType.VIEW) Component comp) {
        Map maps = new HashMap();
        maps.put("PARENT_VIEW", comp);
        maps.put("peopleTabArg", new TabArguement(TabArguement.TabMode.PICK));

        UserInterfaceViewModel.addAnyTab(maps, "Tab2", "tab2.zul");
        comp.setVisible(false);
    } 
```

# ios - 如果 sqlite3_prepare_v2() 返回错误代码，我如何获取错误代码？

> ID：14879279
> 
> 赞同：7
> 
> 时间：2013-02-14T16:19:43.777
> 
> 标签：ios, objective-c, c, error-handling, sqlite

在很大程度上遵循[Ray Wenderlich 的 SQLite 教程](http://www.raywenderlich.com/913/sqlite-101-for-iphone-developers-making-our-app)，我正在编写一个相当简单的应用程序，它显示从服务器下拉的信息。我的 SQLite 查询（到本地数据库，而不是服务器）的基本结构如下：

```
{
    NSMutableArray *list = [[NSMutableArray alloc] init];
    NSString *query = @"SELECT _id, type FROM table ORDER BY type"; // As appropriate.
    sqlite3_stmt *statement;

    if (sqlite3_prepare_v2(_db, [query UTF8String], -1, &statement, nil) == SQLITE_OK) {
        while (sqlite3_step(statement) == SQLITE_ROW) {
            // Process the returned values...
            int rowNumber = sqlite3_column_int(statement, 0);

            // Initialize the object.
            // Push the object onto the array.
        }
        sqlite3_finalize(statement);
    } else {
        // Log the error.
    }
    return list;
} 
```

我的问题是，如果**语句返回 false** **，检查错误的最佳方法是什么？`if`**对我来说最简单的解决方案似乎将返回值存储`sqlite3_prepare_v2()`为 an`int`并*对照*`SQLITE_OK`. 打电话`sqlite_errmsg()`呢？

我确实调查过，`sqlite_exec()`但我没有任何运气来尝试编译，而且我对自己理解 C 中的回调以正确维护使用它们的代码没有足够的信心。它传递了一个错误的参数，这就是让我首先研究它的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:31:01.350

如果您想收到错误消息，您确实必须调用`sqlite3_errmsg`.

`sqlite3_exec`会给你相同的字符串。

# sql - 检查字段更新 SQL

> ID：14879286
> 
> 赞同：1
> 
> 时间：2013-02-14T16:20:23.083
> 
> 标签：sql, sql-server

我有一张类似于这张的桌子：

```
StockId | Dispatched
--------------------    
1234    | 0
1234    | 1 
```

直到`dispatched = 0`有一个库存项目的订单进入，然后它变为`= 1`。

这适用于为今天的股票生成结果，因为您可以进行查询以显示 where `dispatched ='0'`。但是，对于较旧的数据，我想查看某个日期的库存，即`01/01/2010`. 是否有捷径可寻？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:22:31.380

无需以这种方式使用 bit 或 int 标志，只需将 dispatched 更改为日期或日期时间（可为空 - null 将等同于您当前的 0）。然后您可以查询您想要的任何日期比较。

虽然对代码的更改应该相当简单，但如果您无法更改已调度的列，则有一些不太吸引人的替代方案：

*   添加另一个可为空的列来跟踪日期时间。
*   添加一个 DispatchedAt 表，其中包含一个非空日期时间和一个引用当前表的外键约束（经典 1NF）。
*   添加一个包含系统生成的日期时间的“存档表”，用主表上的触发器填充它。
*   以您喜欢的方式创建一个新表，并创建一个模仿旧表（具有相同名称）的可更新视图以“欺骗”您的应用程序。

如果这不仅仅是一个新功能，而且历史数据非常重要（监管审计？），您可能会检查您的事务日志或备份以查看何时进行了更改，但这样的解决方案将属于 DBA.SE。

# ios - 使用 RESTKit 发出 POST 请求

> ID：14879290
> 
> 赞同：1
> 
> 时间：2013-02-14T16:20:31.067
> 
> 标签：ios, objective-c, post, restkit

我正在尝试使用 restKit 发出 POST 请求，但我不能。

我的代码是这样的：

```
 NSString *urlAddTask;
    urlAddTask = [NSString stringWithFormat:@"some URL"];

    RKObjectManager* mgr = [RKObjectManager sharedManager];

    mgr.serializationMIMEType = RKMIMETypeJSON;

    RKObjectMapping* mapping = [RKObjectMapping mappingForClass:[NSMutableDictionary class]];
    [mapping mapKeyPath: @"name"       toAttribute:@"name"         ];

    RKObjectMapping* mappingForSerialization = [mapping inverseMapping];

    [mgr.mappingProvider setSerializationMapping:mappingForSerialization forClass:[NSManagedObject class]];

    [mgr.router routeClass:[NSManagedObject class] toResourcePath:urlAddTask forMethod:RKRequestMethodPOST];

    Task *t=[[Task alloc]init];
    t.name=@"One name";

    [[RKObjectManager sharedManager].router routeClass:[Task class] toResourcePath:@"/tasks" forMethod:RKRequestMethodPOST];

    [mgr postObject:t delegate:nil/*self*/]; 
```

当我执行此代码时，我收到此错误：

```
 *** Assertion failure in -[RKObjectLoader prepareURLRequest], /myAppRoute/Libraries/RestKit/Code/ObjectMapping/RKObjectLoader.m:304
2013-02-14 17:12:25.202 Aplication[1929:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'You must provide a serialization mapping for objects of type 'Task'' 
```

我觉得我做了很多坏事。我正在寻找一个关于如何发布帖子的好例子，但我没有找到任何可以帮助我完成请求的帖子。

你能帮我写代码吗，或者给我一个很好的例子来说明如何做到这一点？

谢谢！

* * *

## 更新

我像你说的那样更新了序列化行。然后我有这个错误：

```
2013-02-15 10:16:45.009 myApp[829:c07] W restkit.network:RKObjectLoader.m:241 Unable to find parser for MIME Type 'text/html'
2013-02-15 10:16:45.009 myApp[829:c07] W restkit.network:RKObjectLoader.m:262 Encountered unexpected response with status code: 200 (MIME Type: text/html) 
```

然后我尝试使用以下行将我的 serializationMIMEType 从 RKMIMETypeJSON 更改为 RKMIMETypeXML：

```
mgr.serializationMIMEType = RKMIMETypeXML; 
```

现在错误是这样的：

```
2013-02-15 10:20:01.315 myApp[873:c07] -[RKXMLParserLibXML stringFromObject:error:]: unrecognized selector sent to instance 0x86ae910
2013-02-15 10:20:01.316 myApp[873:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[RKXMLParserLibXML stringFromObject:error:]: unrecognized selector sent to instance 0x86ae910' 
```

我怎么说我确定我做了很多坏事。我很迷茫。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:25:20.607

我不能谈论其他错误，但正如异常消息所示，`Task`该类缺少您的序列化映射。你可能应该改变

```
[mgr.mappingProvider setSerializationMapping:mappingForSerialization forClass:[NSManagedObject class]]; 
```

至

```
[mgr.mappingProvider setSerializationMapping:mappingForSerialization forClass:[Task class]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T20:32:25.690

好吧，您的代码似乎有点混乱，有些事情是错误的。

```
// Set url of webservice
NSURL *taskURL = [NSURL URLWithString:@"http://demopath.com"];   

// Set object manager with base url
RKObjectManager *objectManager = [[RKObjectManager alloc] init];
objectManager = [RKObjectManager managerWithBaseURL:taskURL];

// Set accepted data type
[objectManager setSerializationMIMEType:@"application/json"];
[objectManager setAcceptMIMEType:@"application/json"];
// [objectManager.client setValue:@"application/json" forHTTPHeaderField:@"Content-Type"]; // Optional

// Set store 
RKManagedObjectStore* objectStore = [RKManagedObjectStore objectStoreWithStoreFilename:@"yourFileName.xml"];
objectManager.objectStore = objectStore;

// Set route
[objectManager.router routeClass:[Task class] toResourcePath:@"/tasks" forMethod:RKRequestMethodPOST]; // Set path for posting objects

// Set mapping
RKObjectMapping *mapping = [RKObjectMapping mappingForClass:[Task class]];
[mapping mapKeyKath:@"nameServer" toAttribute:@"nameClient"]; // If webservice and local attributes got different names, first is the receiving one, second the local one

// Init your new object
Task *task = [Task new];
task.nameClient = @"Hello world";

// Send post request to webservice
[objectManager.mappingProvider setSerializationMapping:[mapping inverseMapping] forClass:[Task class]]; // Set inverse mapping on post reques   
[objectManager postObject:task usingBlock:^(RKObjectLoader *loader)
 {
     loader.backgroundPolicy = RKRequestBackgroundPolicyContinue; // Continues request when app is moving to background
     // loader.resourcePath = @"/tasks"; // // Optional, because it has been configured in the routing
     // loader.objectMapping = [objectManager.mappingProvider objectMappingForClass:[Task class]]; // Optional, because it has been configured before
     loader.delegate = self;

     loader.onDidLoadObjects = ^(NSArray *objects) {
      NSLog(@"It Worked: %@", objects);
  };
     loader.onDidFailWithError = ^(NSError *error) {
      NSLog(@"It Failed: %@", error);
  };
 }]; 
```

当您的 web 服务返回`200`并且 MIME 类型`text/html`时，您似乎在尝试调用需要授权的 web 服务（因为 web 服务返回登录页面）。如果您的请求需要授权，请在发布请求之前添加以下方法。

```
// Set authorization
objectManager.client.username = @"yourUsername";
objectManager.client.password = @"yourPassword";
objectManager.client.authenticationType = RKRequestAuthenticationTypeHTTPBasic; // Change like you need it 
```

希望你能让事情顺利进行。

# php - 全局访问 Phalcon 中的某些组件

> ID：14879293
> 
> 赞同：1
> 
> 时间：2013-02-14T16:20:39.813
> 
> 标签：php, registry, global, phalcon

如何使某些类和对象可从所有 MVC 层访问？

例如，我想`config.ini`全局访问当前用户的个人资料和文件。

在 Zend Framework 1.x 中，我为此使用 Zend_Registery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:42:51.913

您可以为此使用[DI 容器](http://docs.phalconphp.com/en/latest/reference/di.html)。

访问配置的一种简单方法是在引导程序中创建一个 lambda 函数，如下所示：

```
$configFile  = require(ROOT_PATH . '/web/config/global.php');

// Create the new object
$config = new \Phalcon\Config($configFile);

// Store it in the Di container
$this->di['config'] = $config; 
```

从控制器访问这个对象很简单：

```
$config = $this->config; 
```

从应用程序的任何其他部分，您始终可以获取 Di 容器并从那里访问它，如下所示：

```
$di = \Phalcon\DI\FactoryDefault::getDefault();
$config = $di->config; 
```

[在这里](https://github.com/phalcon/website/blob/master/app/library/Ph/Bootstrap.php)查看一个引导示例。它展示了服务是如何在 Di 容器中注册的。

根据当前用户配置文件，您始终可以使用 Session 组件以与上述配置相同的方式存储该信息并随意检索它。

最后，您可以在 Phalcon 中注册您自己的 Registry 服务。如果你有兴趣，我[这里](https://gist.github.com/niden/3033673)有一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-16T03:33:12.837

我为一些 phalcon 问题构建了一个扩展的骨架。这是其中之一。

在此处查看项目：[https ://github.com/alanbarber111/cloud-phalcon-skeleton](https://github.com/alanbarber111/cloud-phalcon-skeleton)

但是，基本上`Cloud::app()->getPhalconDi()`or `Cloud::app()->getPhalconRouter()`or`Cloud::app()->getPhalconApplication()`可以从应用程序的任何地方调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T02:54:39.330

值得一提的是，Phalcon 包含一个内置的注册表服务，我发现它很有帮助：

[https://docs.phalconphp.com/en/latest/api/Phalcon_Registry.html](https://docs.phalconphp.com/en/latest/api/Phalcon_Registry.html)

# javascript - 使用 Dustjs 遍历对象数组

> ID：14879298
> 
> 赞同：1
> 
> 时间：2013-02-14T16:20:46.657
> 
> 标签：javascript, json, dust.js

在 JSONP 调用后，我返回：

```
[
    {
        "text": "yo whats up?",
        "id": 1
    },
    {
        "text": "hey man!",
        "id": 2
    },
    {
        "text": "dude.",
        "id": 3
    }
] 
```

下面是实际的 API 调用：
[http ://api.twitter.com/1/statuses/user_timeline/codinghorror.json](http://api.twitter.com/1/statuses/user_timeline/codinghorror.json)

使用 Dust.js 我会做类似的事情：

```
<ul>
{#myPosts}
  <li>{text}, {id}{~n}</li>
{:else}
  <p>Humm...</p>
{/myPosts}
</ul> 
```

但是响应中没有关键的“myPosts”。那就是问题所在。检查 API 调用，看看 JSON 是如何返回的，也许我解释错了。

我将在 Dust.js 中使用什么语法来遍历该数组中的每个对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T20:25:08.167

您可以使用“当前上下文”快捷方式。

```
{#.}
  {text} - {id}<br />
{/.} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:36:03.217

我会说，从[dustjs {guide}开始，您的示例应该已经遍历数组。](http://akdubya.github.com/dustjs/#guide)你只需要它

```
{
    myPosts: [
        {
            "text": "yo whats up?",
            "id": 1
        },
        {
            "text": "hey man!",
            "id": 2
        },
        {
            "text": "dude.",
            "id": 3
        }
    ]
} 
```

从 开始[`Dust Tutorial - Dust under the covers`](https://github.com/linkedin/dustjs/wiki/Dust-Tutorial)，我已经构建了这个[JSFiddle](http://jsfiddle.net/rYMQL/)。忽略样板文件，归结为在收到的 JSONP 数组前面加上`myPosts`自己的前缀并将其传递给dustjs

```
var jsonp = [...];
dust.render('template', { myPosts: jsonp }, function (err, out) {
...
}); 
```

要访问模板中的任何内容，您必须为其命名。没有其他办法，AFAICS。

# android - tabHost 中带有 ActivityGroup 的嵌套 FragmentActivity

> ID：14879300
> 
> 赞同：0
> 
> 时间：2013-02-14T16:20:52.877
> 
> 标签：android, android-fragmentactivity, activitygroup, android-tabactivity, fragment-tab-host

我在我的应用程序中使用 FragmentActivities 并且需要使用可以在彼此之间切换的嵌套活动来实现 TabHost。我为此目的使用 ActivityGroup：

```
 public class CustomActivityGroup extends ActivityGroup {

View rootView;

public static CustomActivityGroup group;

private ArrayList<View> history;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.history = new ArrayList<View>(); 
    group = this;

      View view = getLocalActivityManager().startActivity("RegisterActivity", new Intent(this,RegisterActivity.class))
      .getDecorView();
      replaceView(view);
}

public void replaceView(View v) {

    history.add(v);

    setContentView(v);
}

public void back() {
    try {
        if (history.size() > 0) {
        history.remove(history.size() - 1);
        if (history.size() > 0) {
            setContentView(history.get(history.size() - 1));
        } else {
            finish();
        }
    } else {
        finish();
    }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

public int getHistorySize() {
    return history.size();
}

@Override
public void onBackPressed() {
    try {
        CustomActivityGroup.group.back();
    } catch (Exception ex) {

    }
    return;
}
} 
```

我像这样切换另一个 FragmentActivity：

```
Intent i = new Intent(this, RegisterActivityCompl.class);

        View view = CustomActivityGroup.group.getLocalActivityManager()  
        .startActivity("RegisterActivityCompl", i  
        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))  
        .getDecorView();  

        // Again, replace the view  
        CustomActivityGroup.group.replaceView(view); 
```

另一个 Activity 切换成功，但随后立即切换到初始状态。这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:41:39.433

[我使用本](http://ericharlow.blogspot.com/2010/09/experience-multiple-android-activities.html)教程解决了我的问题

# tomcat - 在tomcat上配置虚拟主机

> ID：14879302
> 
> 赞同：3
> 
> 时间：2013-02-14T16:20:59.533
> 
> 标签：tomcat, virtualhost

我可以在 tomcat 上运行我的应用程序，其 url 为`http://localhost:8080/pfaf/test.html`.

在我的应用程序中，我以 /styles/abc.css 的形式访问样式。打开应用程序时，我在控制台中发现它正在查看 css `http://localhost:8080/styles`。当这个应用程序在 WAS 中运行时（它有一个虚拟主机），它工作得很好。

所以有人可以帮我在tomcat上创建一个虚拟主机，这样URL就变成了`http://pfaf.localhost:8080/test.html`

提前致谢，

-Ritesh

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T20:37:13.943

**在大多数版本的 Tomcat 中，包括 Tomcat6 和 Tomcat7，您可以通过将Host**元素添加到server.xml 文件中的**Engine**元素来添加虚拟主机

[http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/virtual-hosting-howto.html)

例子：

```
 <Host name="pfaf.localhost" appBase="pfaf_webapps"   
        unpackWARs="true" autoDeploy="true"/> 
```

要将 war 文件部署到这个新的虚拟主机中，请将其放入**$CATALINA_HOME/pfaf_webapps**中。

# sql-server - Microsoft Sync 框架是否支持这种情况？（按文件同步）

> ID：14879306
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:21:04.893
> 
> 标签：sql-server, synchronization, sync, microsoft-sync-framework

我已经完全离线了两个 Ms sql 服务器。我需要通过文件交换来同步它们。这是唯一可行的方法。也就是说框架的同步会话变成文件？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:00:12.510

如果您询问是否可以通过文件发送更改，答案是否定的。

最好的解决方法是同步到 SQL CE 数据库，然后在数据库之间来回发送和同步 SQL CE 数据库。

# java - 在 Tuckey Url 重写中转义问号 (XML/Regex)

> ID：14879308
> 
> 赞同：0
> 
> 时间：2013-02-14T16:21:10.993
> 
> 标签：java, regex, url-rewriting, tuckey-urlrewrite-filter

我想永久重定向

```
/?industry_id=3 to /industry/3/athletics 
```

我尝试了规则：

```
 <rule>
    <from>/?industry_id=3$</from>
    <to type="permanent-redirect" last="true">/industry/3/athletics</to>
 </rule>

 <rule>
    <from>/&#63;industry_id=3$</from>
    <to type="permanent-redirect" last="true">/industry/3/athletics</to>
 </rule>

 <rule>
    <from>/\\?industry_id=3$</from>
    <to type="permanent-redirect" last="true">/industry/3/athletics</to>
 </rule>

 <rule>
    <from>/\?industry_id=3$</from>
    <to type="permanent-redirect" last="true">/industry/3/athletics</to>
 </rule> 
```

但没有成功。

我试过这个：

```
 <rule match-type="regex">
    <note>Request page is deprecated</note>
    <condition type="query-string">industry_id=3</condition>
    <from>/</from>
    <to type="permanent-redirect" last="true">/industry/3/athletics</to>
 </rule> 
```

这适用于重写，但是由于我猜的其他规则，我得到了“重定向太多”，即使设置了参数 last="true"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T05:44:08.767

这似乎很奇怪。以下对我有用：

```
<rule>
  <condition type="query-string">page=download</condition>
  <from>/</from>
  <to type="permanent-redirect" last="true">/downloads</to>
</rule> 
```

正如您还提到的，您必须有其他一些干扰规则。

# javascript - 如何在没有 js 的情况下编写 designMode = 'on'

> ID：14879311
> 
> 赞同：0
> 
> 时间：2013-02-14T16:21:15.373
> 
> 标签：javascript, html

`designmode`是否可以在没有 JavaScript的情况下将 iFrame 设置为？或者在没有 Javascript 的情况下在里面写一些东西？

```
<iframe designmode="on">

</iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:30:43.737

是：安装 Firebug 之类的工具或使用 Chrome，检查框架并更改其属性。这样，您可以在没有 JavaScript 的情况下对网页进行任何更改。

问题是这不会有太大的效果：更改只会在您的 Web 浏览器窗口中进行本地更改。因此，如果页面显示来自远程服务器的某些内容，那么服务器不会注意到您正在处理它之前发送给您的 HTML。

可行的方法是询问运行聊天系统的公司是否有 API 可用于从计算机程序发布消息。许多 Web 服务侦听 JSON 或 XML 消息。

# jquery - 如何确定是否在 jquery 滑块中触发了幻灯片

> ID：14879317
> 
> 赞同：0
> 
> 时间：2013-02-14T16:21:33.373
> 
> 标签：jquery, jquery-slider

[http://basic-slider.com/](http://basic-slider.com/)

我想知道如何确定对象是否在基本滑块中滑动？如果出现滑块，我想暂停视频但不知道如何确定滑块是否发生？

更新：

下面的代码显示了我如何在 Galleria 滑块中显示 jwplayer。但问题是它只显示一个黑色方块。没有出现滑块或视频播放器，我确实想为此使用 jwplayer：

```
<?php
                        //start:procedure video

     if(count($arrVideoFile[$key]) > 1){
    ?>

    <style>
        #galleriavideo_<?php echo $key; ?>{ width: 500px; height: 300px; background: #000 }
    </style>

     <div id="galleriavideo_<?php echo $key; ?>">
    <?php
    foreach ($arrVideoFile[$key] as $v) { ?>
    <div id="myElement-<?php echo $key.'-'.$i; ?>">Loading the player...

    <script type="text/javascript">

    jwplayer("myElement-<?php echo $key.'-'.$i; ?>").setup({
        file: "<?php echo 'VideoFiles/'.$v; ?>",
        width: 480,
        height: 270
    });

    <?php $i++; ?>
    </script>

    </div>
    <?php } ?>
    </div>

             <script type="text/javascript">

                Galleria.loadTheme('jquery/classic/galleria.classic.min.js');
                Galleria.run('#galleriavideo_<?php echo $key; ?>');

              </script>

    <?php

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:54:21.233

您选择的滑块似乎无法处理事件。也许你应该选择另一个插件？例如， [Galleria](http://galleria.io/ "画廊")就有这种可能性。检查`Documentation => Events`，特别是`image`。

如果您想保留基本滑块，您可以更改代码以在显示幻灯片时添加您想要的内容。更多信息：[当 div 可见时触发操作的 jQuery 事件](https://stackoverflow.com/questions/1225102/jquery-event-to-trigger-action-when-a-div-is-made-visible)

另一种解决方案是使用[jQuery Watch 插件](http://darcyclarke.me/dev/watch/)并检测`display`属性何时更改。

就个人而言，我认为第一个解决方案是最简单的:)

# com - 在 Open Office Basic 中使用 COM 对象时出现问题

> ID：14879323
> 
> 赞同：0
> 
> 时间：2013-02-14T16:21:33.207
> 
> 标签：com, openoffice.org, openoffice-calc, openoffice-basic

我正在考虑从 Excel 切换到 Open Office（实际上是 Lotus Symphony）。
我有许多带有 VBA 宏的 Excel 文件，它们连接到 CAD、CAM 和其他应用程序以及我自己的 COM 对象。
该函数`GetObject`在 Open Office Basic 中不存在，但我能够创建一个使用`GetObject`脚本对象函数的函数。

问题是我可以访问该对象的某些属性/方法，但不能访问其他对象。

下面有一个示例，它连接到 Excel，获取`ExcelApp.Workbooks.Count`属性，并在尝试获取`ExcelApp.Workbooks(I).Name`属性时崩溃。在此示例中，我使用 Excel 作为外部应用程序，只是因为它很常见且易于理解。

我注意到 Open Office VBA IDE 比 Excel VBA IDE 更差：无法更改变量的值、计算表达式、更改当前语句、没有智能感知等。
难道因为它是 Lotus Symphony 就这么简单吗？安装另一个版本的 Open Office 会变得更好吗？
是不是因为它是 VBA 就这么简单，并且使用像 Python 这样的另一种语言会变得更好？

这是代码：

代码：

```
Public ExcelApp As Object 

Sub Test 
  GetRunningExcel 
  If ExcelApp Is Nothing Then 
    MsgBox "Excel is not running" 
  Else 
    Dim S As String, I As Integer, N As Integer 
    N = ExcelApp.Workbooks.Count 
    For I = 1 To N 
      S = S & Chr(10) & ExcelApp.Workbooks(I).Name 
    Next I 
    S = "Excel has " & N & " open documents" & S 
    MsgBox S 
  End If 
End Sub 

Function GetRunningExcel() 
  Dim oleService 
  Dim VBScript 
  Dim S as string 
  oleService = createUnoService("com.sun.star.bridge.OleObjectFactory") 
  VBScript= oleService.createInstance("MSScriptControl.ScriptControl") 
  VBScript.Language = "VBScript" 
  S = S + "Public O" + Chr(10) 
  S = S + "Set O = GetObject(, ""Excel.Application"")" + Chr(10) 
  On Error Resume Next 
  VBScript.ExecuteStatement(S) 
  Set ExcelApp = VBScript.CodeObject.O 
  On Error Goto 0 
End Function 
```

# xml - 按名称/位置遍历 XML 节点，无需检查边界

> ID：14879325
> 
> 赞同：1
> 
> 时间：2013-02-14T16:21:51.217
> 
> 标签：xml, scala

我使用 scala 内置的 xml 功能来遍历节点，它通常足以满足我的需要。

但是，如何在 scala 中实现这个简单的单行 xpath 查询？

```
//a[2]/b[2]/c[2]/d 
```

我没有在 scala 中找到一种简单的方法来执行此操作，而无需编写代码来检查每个节点序列是否至少有 2 个项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:46:12.413

我会使用 for 理解来做到这一点。首先，在可选的按索引获取元素中添加一些内容：

```
implicit class At[T](val s: Seq[T]) extends AnyVal {
  def at(n: Int) = (s drop n).headOption
} 
```

现在，

```
def findIt(n: xml.Node) = for {
  a2 <- n \\ "a" at 1 // 0-based
  b2 <- a2 \ "b" at 1
  c2 <- b2 \ "c" at 1
} yield c2 \ "d" 
```

利用：

```
scala> findIt(<root><a/><a><b/><b><c/><c><d>e</d></c></b></a></root>)
res16: Option[scala.xml.NodeSeq] = Some(<d>e</d>)

scala> findIt(<root><a/><a><b/><b><c><d>e</d></c></b></a></root>)
res17: Option[scala.xml.NodeSeq] = None 
```

# javascript - HTML5/JS 不在画布中呈现图像。

> ID：14879326
> 
> 赞同：2
> 
> 时间：2013-02-14T16:21:55.883
> 
> 标签：javascript, html

我在一个网络开发实验室工作，但我的形象没有出现。引用图像时我做错了什么吗？这是图像本身的链接：http: [//tuftsdev.github.com/WebProgramming/assignments/pacman10-hp-sprite.png](http://tuftsdev.github.com/WebProgramming/assignments/pacman10-hp-sprite.png)

注意：我将图像复制到本地目录中，所以我知道引用是正确的。

```
 <!DOCTYPE html>
 <html>
 <head>
     <title>Ms. Pacman</title>
     <script>
         function draw() {
             canvas = document.getElementById('simple');

             // Check if canvas is supported on browser
             if (canvas.getContext) {
                ctx = canvas.getContext('2d');
                var img = new Image();
                img.src = '"pacman10-hp-sprite.png';
                ctx.drawImage(img, 10, 10);
             }
             else {
                alert('Sorry, canvas is not supported on your browser!');
             }
       }
     </script>
  </head>

 <body onload="draw();">
     <canvas id="simple" width="800" height="800"></canvas>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:25:48.103

实际加载图像后，您需要设置回调并将图像绘制到画布上：

```
function draw() {
    canvas = document.getElementById('simple');

    // Check if canvas is supported on browser
    if (canvas.getContext) {
        ctx = canvas.getContext('2d');
        var img = new Image();

        // If you don't set this callback before you assign
        // the img.src, the call ctx.drawImage will have 
        // a null img element. That's why it was failing before
        img.onload = function(){
            ctx.drawImage(this, 10, 10);
        };

        img.src = "pacman10-hp-sprite.png";
    } else {
        alert('Sorry, canvas is not supported on your browser!');
    }
} 
```

# haskell - 实例声明上的模式匹配错误

> ID：14879328
> 
> 赞同：2
> 
> 时间：2013-02-14T16:22:04.207
> 
> 标签：haskell, instance, monads

我需要为特定数据类型声明一个 Monad 实例：

```
data M m a = Mk (m (Maybe a))

instance (Monad m) => Monad (M m) where
  return x = Mk (m (Just x))
  Mk (m (Nothing)) >>= f = Mk (m (Nothing))
  Mk (m (Just x)) >>= f = f x 
```

但我得到：

```
test.hs:6:7: Parse error in pattern: m
Failed, modules loaded: none. 
```

这可能很简单，但我无法弄清楚！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:27:51.747

类型变量`m`不是您可以进行模式匹配的东西，尤其是不能区分`Just`and `Nothing`。想一想它对于代替-- 在`m`许多情况下使用的不同可能类型意味着什么，这样的模式匹配是完全不可能的。

要编写该实例，您需要以下内容：

```
instance (Monad m) => Monad (M m) where
  return x = Mk (return (Just x))
  Mk mx >>= f = -- ?? 
```

请注意，`return`用于创建类型的值`m (Maybe a)`- 由于`Monad m`约束，这是可能的，并且在一般情况下（根本没有约束）没有办法创建这样的值。

要实现`(>>=)`你需要做一些类似的事情，`(>>=)`同样`Monad`使用`m`.

顺便说一句，您应该考虑使用`newtype`for `M`，除非您有特定的需要`data`。大多数时候，如果你*可以*使用`newtype`，你应该。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:40:19.517

您只能在构造函数上进行模式匹配，而不能在其他任何东西上进行模式匹配。您必须使用 m 的 Monad 实例才能访问其中的 Maybe 数据。我不是 100% 确定这是否具有您想要的行为，但它会进行类型检查。

```
data M m a = Mk (m (Maybe a))

instance (Monad m) => Monad (M m) where
  return x = Mk (return (Just x))
  Mk m >>= f = Mk (m >>= go)
    where go (Just x) = let Mk x' = f x in x'
          go _        = return Nothing 
```

# c# - XmlDocument.Load 替换“>”

> ID：14879330
> 
> 赞同：2
> 
> 时间：2013-02-14T16:22:07.603
> 
> 标签：c#, xml

运行以下代码时：

```
 static void Main(string[] args)
    {
        var xmlDoc = new XmlDocument();

        var fileReader = new BinaryReader(File.Open(@"C:\Users\username\Desktop\doc.xlf",FileMode.Open,FileAccess.Read,FileShare.Read));
        var sourceStream = new MemoryStream(fileReader.ReadBytes((int)fileReader.BaseStream.Length));
        xmlDoc.Load(sourceStream);
    } 
```

在具有如下所示节点的文件上：

```
<source xml:lang="en-us">
        &lt;b>This text is displayed in Bold.&lt;/b>&lt;br>
        &lt;i>This text is displayed in italics.&lt;/i>
</source> 
```

读入时，节点将转换为以下内容：

```
<source xml:lang="en-us">
        &lt;b&gt;This text is displayed in Bold.&lt;/b&gt;&lt;br&gt;
        &lt;i&gt;This text is displayed in italics.&lt;/i&gt;
</source> 
```

换句话说，所有`>`都被替换为`&gt;`

通常这是可以的（我什至认为它在技术上是合法的，即使是不好的做法），但在这种情况下，节点在读**入时绝对**不能改变。任何想法（ 1）如何读取 xml 以允许`>`或（2）如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:23:55.483

尽管右尖括号在 XML 中是合法的，但没有选项`XmlDocument`可以避免将其更改为相应的实体。

您可以改用 CDATA 部分：

```
<source xml:lang="en-us">
    <![CDATA[&lt;b>This text is displayed in Bold.&lt;/b>&lt;br>
&lt;i>This text is displayed in italics.&lt;/i>]]>
</source> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:42:44.177

`&gt;`文本节点之间和`>`文本节点的值之间的 XML 没有区别。因此，XML 解析器/DOM 可以自由地以它认为合适的任何一种形式来表示值。

请注意，XML 中还有其他规范化（空白和新行）几乎可以保证保存的 XML 不会与源 XML 逐字节相同。

如果您确实需要保持`>`完整，请尝试使用 CDATA，即使这样也可以保证不会触及文本 - 某些解析器可能会让您保留`>`而不是转换为`&gt;`保存时。

真正的解决方案是接受这样一个事实，即某些字符将在保存时被编码（包括非 ASCII 字符，如果使用不直接支持的编码保存）以生成有效的 XML。

# css - :hover 似乎不适用于自定义按钮

> ID：14879336
> 
> 赞同：11
> 
> 时间：2013-02-14T16:22:28.073
> 
> 标签：css, hover

我有几个自定义按钮正在工作并且看起来很好，除了悬停停止工作（应该在悬停时改变颜色。它在我第一次编码时工作但在某些时候它停止了。我不确定它什么时候停止，或者为什么。它不能在 chrome、firefox 或 IE8 中工作。显然我搞砸了一些东西，但我还没有找到它。我会继续寻找和研究，但如果你有任何想法，非常感谢。

html:

```
<input class="left-menu-button" type="button" value="Search" />
<input class="left-menu-button" type="button" value="View Detail" /> 
```

CSS：

```
.left-menu-button
{
    width: 200px;
    height: 60px;
    color: #fff;
    background-color: #631127;
    border: none;
    margin: 20px 40px 0 0;
    font-size: 1.2em;
    float: right;
}

.left-menu-button:hover
 {
       background-color: #A3143A !important;
 } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T16:33:59.340

**1) 在谷歌浏览器**中打开您的页面；
2）按**F12**打开“开发者工具”；
3）选择你有问题的输入；
4）在右边你有应用的样式；
5) 在“**样式**”选项卡上，单击**第二个图标**，即虚线矩形内的光标；
6) 选择**":hover"**，这样您就可以看到当您的输入被悬停时发生了什么并找到问题！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-04-13T02:35:25.610

我遇到过同样的问题。我尝试使用 Chrome 中的开发人员工具，但无济于事。最后，我发现我需要删除 ID 选择器和 :hover 属性之间的多余空格。例如，

```
#button :hover {
  background-color: #7e7ecc;
}
```

上面的代码片段不起作用，但下面的代码片段起作用了

```
#button:hover {
  background-color: #7e7ecc;
}
```

当我弄清楚的那一刻，我知道这是导致问题的原因，但万一其他人被卡住了，那就去吧

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-01T17:08:55.093

我知道这是一个旧帖子，但如果有人遇到与我相同的问题，我将发布。

对我来说，解决方案是不显示 :hover CSS 的按钮具有通过元素 ID 设置的自定义背景。我将它切换到一个类，然后能够看到 :hover 样式。我猜 ID 背景样式优先于 :hover 通过元素标签名称设置的样式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-08T07:53:21.763

以防万一它有帮助，我在这个 css 上遇到了同样的问题；在 css 上没有任何其他内容，在测试页面中；junt 只有两种 css 样式。

对于下一个 css，悬停不起作用（请参阅声明在声明`:hover`之前`background-color`）：

```
button:hover{
  background-color:#DDDDDD;
}
button.myButton{
  background-color:transparent;
} 
```

我只是通过以不同的顺序编写css来解决（请参阅现在`:hover`声明在`background-color`声明之后）：

```
button.myButton{
  background-color:transparent;
}
button:hover{
  background-color:#DDDDDD;
} 
```

这个“命令”`:hover`再次起作用，所以在解决问题`:hover`后声明。`background-color`

为什么这个“顺序”会影响？，我不知道，声明顺序可能会影响是不合逻辑的，但会影响（至少在 FireFox 版本 70.0.1 上）；也许这在网络浏览器上是一个糟糕的实现！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-14T16:29:24.567

这篇文章可能会回答您的问题： [IE 8 CSS hover over input element issue](https://stackoverflow.com/questions/5138481/ie-8-css-hover-over-input-element-issue)

该页面可能会强制浏览器进入怪癖模式。

# ios - IOS，为什么有些开发者在模拟中创建带下划线的变量（_variable）

> ID：14879337
> 
> 赞同：0
> 
> 时间：2013-02-14T16:22:29.243
> 
> 标签：ios, objective-c, class, variables

我正在尝试理解我拥有的一些示例代码。在 .h 文件中，变量以下列方式声明

```
@property (readonly, nonatomic) NSString *username;
@property (readonly, nonatomic, unsafe_unretained) NSURL *avatarImageURL; 
```

在实现文件中

```
 @private
        NSString *_avatarImageURLString;
    }
   @synthesize username = _username;
- (id)initWithAttributes:(NSDictionary *)attributes {
    self = [super init];
    if (!self) {
        return nil;
    }
    _username = [attributes valueForKeyPath:@"username"];
    _avatarImageURLString = [attributes valueForKeyPath:@"avatar_image.url"];
    return self;
}

- (NSURL *)avatarImageURL {
    return [NSURL URLWithString:_avatarImageURLString];
} 
```

我知道 _variable 是类中变量的约定，但我真的不明白为什么要这样做。为什么不直接使用用户名？为什么要创建另一个变量。此外，_avatarImageURLString 让我更加困惑，为什么还要创建一个名为 avatarImageURL 的属性，如果您要创建另一个名为 _avatarImageURLString ....

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:36:22.500

这只不过是一种常见的约定，而是一种有用的约定。

然而现在，有了自动合成属性，它就不再需要了。Xcode 在幕后合成了一个 @property xxxx 和一个名为 _xxxx 的 ivar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:43:27.727

人们这样做是为了使他们创建的变量与 xcode 的变量不同，并使它们更简单、更容易处理......

但它不再像以前那样有用了，因为现在 xCode 会以这种方式自动合成变量。

例子：

`variable`当自动合成成为`_variable`

# asp.net - 在asp.net mvc 3中实现FilterAttribute，IActionFilter和从ActionFilterAttribute继承有什么区别？

> ID：14879340
> 
> 赞同：37
> 
> 时间：2013-02-14T16:22:35.030
> 
> 标签：asp.net, asp.net-mvc-3, filter, attributes, custom-attributes

我看到在一种情况下，我们可以像这样覆盖`OnActionExecuting`或`OnActionExecuted`继承自`ActionFilterAttribute`类的方法：

```
public class MyFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(ActionExecutedContext filterContext)
    { // bla bla }
} 
```

`IActionFilter`在其他情况下，我们也可以`FilterAttribute`像这样实现：

```
public class MySecondFilterAttribute : FilterAttribute, IActionFilter 
{ 
    public void OnActionExecuted(ActionExecutingContext filterContext) {}
} 
```

那么，这两种方法之间是否有任何区别，也许在任何特定情况下，最好使用其中一种而不是另一种？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-14T22:32:53.650

基本上，FilterAttribute 提供了 MVC 属性的最低级别的行为，并实现了提供 Order 和 AllowMultiple 属性的 IMvcFilter。

ActionFilterAttribute 是过滤动作和结果的基础，因为它是 IActionFilter、IResultFilter 的实现，并继承自 FilterAttribute。

您的 MySecondFilterAttribute 实现导致 ActionFilterAttribute 没有 IResultFilter 功能（OnResultExecuting 和 OnResultExecuted）。

# php - 如何为mysql中的2列组合创建唯一的

> ID：14879341
> 
> 赞同：0
> 
> 时间：2013-02-14T16:22:41.130
> 
> 标签：php, mysql, unique

我有一个包含名字、姓氏、密码、电子邮件、电话等的人员表

我想创建一个独特的约束，其中许多人可以有相同的名字或多个人可以有相同的电子邮件地址（如果家庭只使用一个）但没有两个人可以同时有相同的名字和电子邮件地址

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:24:31.100

执行此 DDL 语句。

```
ALTER TABLE myTable ADD CONSTRAINT tb_UQ UNIQUE(firstname, email) 
```

# mysql - 我可以对父查询中嵌入查询的结果进行数学运算吗？

> ID：14879342
> 
> 赞同：0
> 
> 时间：2013-02-14T16:22:44.500
> 
> 标签：mysql, sql

考虑以下查询：

```
SELECT n.nid, 
    (select count(*) as count from view_log where id = n.nid) AS the_count,
    (the_count + 1) as the_bumped_count
   FROM node n 
```

当我运行它时，我得到`Unknown column 'the_count' in 'field list'`. 有没有办法解决？似乎`the_count`应该在查询中可见并且可以使用，但显然不是。顺便说一句，我也试过`SUM(the_count, 1)`，但也失败了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:23:27.667

您不能使用在`ALIAS`您想要对其进行计算的同一级别上定义的。

```
SELECT n.nid, 
    (select count(*) as count from view_log where id = n.nid) AS the_count,
    ((select count(*) as count from view_log where id = n.nid) + 1) as the_bumped_count
   FROM node n 
```

或者更好地使用子查询，

```
SELECT  nid, 
        the_count, 
        the_count + 1 AS the_bumped_count
FROM
(   
    SELECT n.nid, 
            (select count(*) as count from view_log where id = n.nid) AS the_count
    FROM node n
) s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:26:10.153

我认为这也可以，并且只需要您计算一次：

```
SELECT nid, the_count, the_count+1 as the_bumped_count
FROM (
    SELECT n.nid,
        COUNT(v.*) the_count, 
    FROM node n
       LEFT JOIN view_log v on n.nid = v.id
    GROUP BY n.nid
) t 
```

或者回到你的语法：

```
SELECT nid, the_count, the_count+1 as the_bumped_count
FROM (
    SELECT n.nid,
        (select count(*) as count from view_log where id = n.nid) AS the_count
    FROM node n
) t 
```

祝你好运。

# javascript - 检查文件是否存在，根据消息显示，jQuery

> ID：14879343
> 
> 赞同：2
> 
> 时间：2013-02-14T16:22:46.793
> 
> 标签：javascript, jquery

我需要一个检查文件是否存在的全局函数。我需要为几种方法重用该函数，所以我只希望它返回 true 或 false。我试图让它异步，但我无法让它工作。这是功能：

```
 function checkIndex(){
      $.ajax({
          url:'upload/_3.fdt',
          type:'HEAD',
          async: false,
          error: function(){
                return false;   
          },
          success: function(){
                return true;
          }
      });
} 
```

这是调用 checkIndex() 的函数之一

```
$(function(){
    $(document).ready( function(){

        if(checkIndex() == false)
            $('#check').html('<td><img src="img/cross.gif" /></td><td>No index present</td>');
        else
            $('#check').html('<td><img src="img/check.gif" /></td><td>Index is present</td>');

    });
   }); 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:31:11.077

我会从 ajax 函数返回延迟对象，然后根据 ajax 函数是否失败来插入 html：

```
function checkIndex(file){
    return $.ajax({
        url : file,
        type:'HEAD'
    });
}

$(function(){
    checkIndex('upload/_3.fdt').done(function() {
        $('#check').html('<td><img src="img/check.gif" /></td><td>Index is present</td>');
    }).fail(function() {
        $('#check').html('<td><img src="img/cross.gif" /></td><td>No index present</td>');     
    });
}); 
```

如果您将文件名传递给函数检查，它也非常可重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:30:53.880

一般来说，如果你发现自己在使用`async: false`，那么你做错了。

您可以利用`$.ajax`返回`Deferred`可以与之交互的对象的事实来解决此问题，如下所示：

```
function checkIndex(){
    return $.ajax({
        url:'upload/_3.fdt',
        type:'HEAD'
    });
}

checkIndex().done(function () {
    $('#check').html('<td><img src="img/check.gif" /></td><td>Index is present</td>');
}).fail(function () {
    $('#check').html('<td><img src="img/cross.gif" /></td><td>No index present</td>');
}); 
```

有关更多信息，请参阅有关[jQuery Deferred Objects](http://api.jquery.com/category/deferred-object/)的文档。

# drop-down-menu - 中继器内的用户控件中的下拉列表

> ID：14879345
> 
> 赞同：0
> 
> 时间：2013-02-14T16:22:54.923
> 
> 标签：drop-down-menu, user-controls, repeater

我有用户控件 - 'HolidayPackage.ascx' （它有一个 'List Destinations' 并绑定到一个下拉列表 - 'HolidayDestinations' 和 'AutoPostBack = true'） - DropdownList 的选择保持在 ControlState 中，我正在绑定“预渲染”上的下拉列表。我有另一个控件 - 'Holidays.ascx'（我有一个中继器，它将根据可用包的数量多次显示 'HolidayPackage.ascx' 控件）现在我有一个页面说'test.aspx'，它将显示'Holiday.ascx' 控件 - 将显示 3 个假期包（比如说 3 个 'HolidayPackage.ascx' 实例）

现在，当我在一个下拉列表（在一个控件中）中选择某些内容时，它会重置其他用户控件中的其他两个下拉列表....假设我在第一个控件下拉列表中选择了某些内容...页面回发和第一个控件选择保持不变...但其他两个下拉列表会丢失他们选择的项目......并且选择更改为索引0......有什么建议吗？？？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:16:37.623

> 我正在绑定“PreRender”上的下拉列表

这就是错误所在。为了保持状态，您应该在 Init 阶段（页面/控件的`OnInit()`事件）重新添加动态控件。

# spring - Atomikos + Spring + JMS 以事务方式批量读取消息

> ID：14879346
> 
> 赞同：0
> 
> 时间：2013-02-14T16:22:58.597
> 
> 标签：spring, transactions, jms, jta, atomikos

我正在尝试使用 spring + atomikos 设计一个应用程序，该应用程序读取一批 N 消息并将它们保存到单个事务中的数据库中。它必须是一批消息，因为数据只有在成批时才是一致的，即单个消息不足以进行一致的事务。此外，每条消息都有一个事务绝对会影响我的表现。这不是典型的 JMS + DB 应用程序，因此我很难在网上找到示例（我尝试使用 atomikos 网站上建议的 MessageListener ，但每条消息创建一个事务）。使用 Spring 实现这一目标的最佳方法是什么？谢谢

乔瓦尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T14:31:36.250

我认为您的问题与 Spring 或 Atomikos 无关。这更像是一个设计问题。

如果您需要在单个事务中提交所有消息，请在将完整消息发送到持久层之前将它们全部合并到一个更大的结构中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:01:00.353

弄清楚我需要做什么。在我的spring配置文件中，我需要配置以下内容：

*   注入“transactionManager”和“userTransaction”依赖项的类实例`org.springframework.transaction.jta.JtaTransactionManager`（例如配置为使用atomikos），例如，带有类的实例`com.atomikos.icatch.jta.UserTransactionManager`和`com.atomikos.icatch.jta.UserTransactionImp`；
*   在`<tx:annotation-driven transaction-manager="txManager">`客户端代码中使用注释驱动事务的标签；
*   向事务管理器注册 JMS 连接工厂，例如，通过创建`com.atomikos.jms.AtomikosConnectionFactoryBean`;
*   队列对象，例如，`com.tibco.tibjms.TibjmsQueue`或类似的实例；
*   一个带有依赖“defaultDestination”的 JmsTemplate 注入了先前创建的队列；
*   向事务管理器注册数据库，例如，通过创建一个实例`com.atomikos.jdbc.AtomikosDataSourceBean`（或`com.atomikos.jdbc.nonxa.AtomikosNonXADataSourceBean`为最后一个资源策略场景）；
*   一个或多个 SqlUpdate（或 BatchSqlUpdate 或 JdbcTemplate）实例（每个数据源一个），每个实例都具有注入先前定义的数据源的“dataSource”属性；
*   一个自定义 DAO 类的实例，其中注入了先前定义的 JmsTemplate 和 SqlUpdate 对象：此类将具有一个或多个带注释`@Transactional`的方法，这些方法将使用 JmsTemplate 执行事务以接收消息，并使用 SqlUpdate(s) 将它们持久保存在数据库中，例如，它可能是一个如下所示的类：

    ```
    public class MyDao{        
      JmsTemplate jmsTemplate; // getter/setter omitted for clarity
      BatchSqlUpdate sqlUpdate; // getter/setter omitted for clarity

      @Transactional
      public void persistMessages(int n){
        // map used for the sqlUpdate object
        Map<String, Object> params = new HashMap<>();
        // need to reset this since it's being reused
        sqlUpdate.reset();
        for(int i=0;i<n;i++){
          // retrieve a message synchronously
          Message msg = jmsTemplate.receive();
          // transform the message
          doSomeMagic(msg,params);
          // set parameters in the SQL
          sqlUpdate.updateByNamedParam(params);
        }
        // now the batch can be flushed
        sqlUpdate.flush();
      }

      private void doSomeMagic(Message msg, Map<String,Object> params){
        // implementation is application-dependent!
        // the only assumption is that somehow the
        // message can be used to set the named
        // parameters in the sqlUpdate object
      }
    } 
    ```

唯一值得注意的是DAO**必须**是spring管理的，因为使用注解需要spring创建代理。

# xpages - 将名称选择器的结果放入只读控件

> ID：14879348
> 
> 赞同：2
> 
> 时间：2013-02-14T16:22:59.307
> 
> 标签：xpages, xpages-extlib

我在 XPages 中使用扩展库中的名称选择器，并将结果放入多行编辑框中。

如何将编辑框设为只读，以便最终用户无法编辑选定的名称，除非使用名称选择器？

我尝试设置只读属性，但这也隐藏了控件。

我还尝试将结果放入隐藏字段，然后使用换行符作为分隔符在计算字段中显示结果，但是使目标控件不可见也会使控件不可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T19:08:16.213

您可以将 namePicker 与扩展库中的 djextNameTextBox 控件结合使用。这个控件只允许用户删除一个名字（而不是编辑它）。

```
<xe:djextNameTextBox id="testField" value="#{document.TestField}"></xe:djextNameTextBox>
<xe:namePicker id="namePicker1" for="testField" dialogTitle="Pick a name">
    <xe:this.dataProvider>
        <xe:dominoNABNamePicker addressBookSel="all-public" nameList="people"></xe:dominoNABNamePicker>
    </xe:this.dataProvider>
</xe:namePicker> 
```

我了解您是否想使用编辑框而不是 djextNameTextBox 因为它的外观。如果是这种情况，那么一点点自定义 CSS 可能会对您有所帮助 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:40:50.803

使用 maxlength 属性。这将阻止人们直接在该字段中输入

```
<xp:inputText id="inputText1"
value="#{viewScope.adminOwner_Tx}" maxlength="0"
style="width:300px">
</xp:inputText> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:37:32.257

感谢您的回复。我在这里和 XPages Lotus 论坛中使用了一些响应。

1.  我创建了 dojo Names PIcker 并将其指向一个名为 Approvers 的文本控件，并在 Approvers Control 中将 MultipleSeparator 设置为 ","
2.  添加一个我称为 ApproversDisplay 的多行文本框，将其设置为只读并且不要将其绑定到数据对象和默认值

    ```
    var Rel = getComponent('Approvers').getValue();
    return @Implode(Rel,"\n") 
    ```

    它用新行分隔每个值。

3.  在 Approvers 控件上设置 onchange 事件以在 ApproverDisplay 上执行部分刷新。
4.  在源代码中，我设置了样式属性 display:none 这不会像 visible 属性那样隐藏名称选择器。

我对 XPages 很陌生，所以有些人可能会认为有更好的方法，但经过比我真正想要的时间更长的时间！它有效！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T17:16:54.943

我使用使用隐藏字段`<xp:hidden>`和计算字段的解决方法。我在我的博客[http://naveegator.blogspot.com/2012/06/displaying-common-names-of-user-with.html](http://naveegator.blogspot.com/2012/06/displaying-common-names-of-user-with.html)上对此进行了描述。

下面是代码片段：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xe="http://www.ibm.com/xsp/coreex">
    <xe:namePicker id="npUserNames" for="hdnUserNames">
        <xe:this.dataProvider>
            <xe:dominoNABNamePicker addressBookDb="names.nsf"></xe:dominoNABNamePicker>
        </xe:this.dataProvider>
    </xe:namePicker>
    <xp:inputHidden id="hdnUserNames" multipleTrim="true">
        <xp:this.multipleSeparator><![CDATA[#{javascript:","}]]></xp:this.multipleSeparator>
        <xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="cfUserNames"></xp:eventHandler>
    </xp:inputHidden>
    <xp:text escape="true" id="cfUserNames">
        <xp:this.value><![CDATA[#{javascript:@Name("[CN]", getComponent("hdnUserNames").getValue())}]]></xp:this.value>
    </xp:text>
</xp:view> 
```

[您还可以在“未提交 Xpage 中的只读字段](https://stackoverflow.com/questions/14637693/readonly-field-in-xpage-not-submitted)”这个问题中查看 Sven 的回答，了解如何制作只读字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-29T06:59:59.133

对于这些情况，我倾向于使用一种解决方法，类似于 Bill F 和 Naveen（但可能更干净一些）：
将您的选择器目标字段包含在一个 div 中，并通过应用“display:none”作为样式来隐藏它。这样，它会呈现在页面上，使其可访问，但不可见。
为了显示选择器对此字段所做的任何更改，我添加了一个 onchange 事件来刷新包含计算字段的面板。此外，您可以根据需要设置计算字段中名称的显示样式（代码中有两个示例）。

```
<xp:div style="display:none;">
    <xp:inputText id="yourfield" value="#{yourdocument.yourfield}" multipleSeparator=";">
        <xp:eventHandler event="onchange" submit="true" refreshMode="partial" refreshId="surroundingpanel"></xp:eventHandler>
    </xp:inputText>
</xp:div>

<xp:panel id="surroundingpanel">

    <!-- displaying names abbreviated, separated by default multi-separator , -->
    <xp:text escape="true" id="computedFieldExample1" value="#{yourdocument.yourfield}">
        <xp:this.converter> <!-- converter is optional -->
            <xp:customConverter>
                <xp:this.getAsString><![CDATA[#{javascript:@Name("[ABBREVIATE]", value)}]]></xp:this.getAsString>
                <xp:this.getAsObject><![CDATA[#{javascript:@Name("[CANONICALIZE]", value)}]]></xp:this.getAsObject>
            </xp:customConverter>
        </xp:this.converter>
    </xp:text>

    <!-- displaying names abbreviated one below each other -->
    <xp:text escape="false" id="computedFieldExample2">
        <xp:this.value><![CDATA[#{javascript:@Implode(@Name("[ABBREVIATE]", yourdocument.getItemValue("yourfield")), "<br />")}]]></xp:this.value>
    </xp:text>

    <xe:namePicker id="namepicker1" for="yourfield">
        <xe:this.dataProvider>
            <xe:dominoNABNamePicker nameList="peopleByLastName"></xe:dominoNABNamePicker>
        </xe:this.dataProvider>
    </xe:namePicker>
</xp:panel> 
```

# php - microtime() 和浮点运算

> ID：14879352
> 
> 赞同：6
> 
> 时间：2013-02-14T16:23:10.730
> 
> 标签：php, mysql, performance, apache

我创建了一个简单的网站，它从 MySQL 数据库中获取文章。我使用 PHP`microtime(true)`函数来计算解释的时间。在我使用的 PHP 脚本的顶部：

```
$time = microtime(true); 
```

在页面底部，我使用了以下代码：

```
echo microtime(true) - $time; 
```

当我用脚本顶部和底部的这些语句刷新我的网页时。它总是在 ( `0.0355005264282`; 只是一个实例) 周围回显一个值。那是解释我的 PHP 页面所花费的时间。

正如 PHP 手册所说（[http://php.net/manual/en/function.microtime.php](http://php.net/manual/en/function.microtime.php)），`microtime(true)`以微秒为单位返回当前的 unix 时间戳。一微秒`is one millionth of`一秒。所以，

（例如）：

```
0.03 microseconds = 1/1,000,000 * 0.03 seconds
0.03 microseconds = 0.000,000,03 seconds 
```

因此，解释一个使用 MySQL 的 PHP 网页所花费的时间大约是`0.000,000,03`几秒钟。

**我的问题是：** 这`microtime(true)`是在说解释时间的真相吗？如果是真的，那就太好了，因为我再也不用太担心性能了。

*我在 Windows 上使用 XAMPP*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T16:30:32.110

> microtime — 返回当前的 Unix 时间戳，以微秒为单位
> 
> 混合微时间 ([ bool $get_as_float = false ] )

改为：

```
$time = microtime(true);
echo microtime(true) - $time; 
```

结果将在几秒钟内。检查这个（手动）：

> 'time1' => 浮动 1360860136.6731
> 
> 'time2' => 浮动 1360860136.6732 和
> 
> 'time2' - 'time1' = 9.9897384643555E-5 即 0.000099897384643555（不是 0.0001）

PHP 通常使用 IEEE 754 双精度格式。可以精确表示为以 10 为底的浮点数的有理数，如 0.1 或 0.7，没有精确表示为以 2 为底的浮点数

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T16:38:54.113

它以`$get_as_float`秒为单位返回时间，精确到微秒。所以你有`0.0355005264282`几秒钟，而不是微秒。

从您的链接：

> 如果 get_as_float 设置为 TRUE，则 microtime() 返回一个浮点数，它表示自 Unix 纪元以来的当前时间，以秒为单位，精确到最接近的微秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T16:31:13.200

默认情况下，[`microtime`](http://php.net/manual/en/function.microtime.php)返回格式为“msec sec”的**字符串**。您正在从一个字符串中减去一个字符串，这会产生无意义的结果。

尝试添加`get_as_float`参数，然后重试。

# gwt - CellTable 中的 Colspan 和 Rowspan

> ID：14879353
> 
> 赞同：1
> 
> 时间：2013-02-14T16:23:11.940
> 
> 标签：gwt, celltable

我正在实现一个同时具有 colspan 和 rowspan 单元格的表。我以前使用过 FlexTable，但后来决定使用 CellTable。但看起来 CellTable 不支持添加样式，而 FlexTable 支持...请查看图片以了解我要做什么：

![](../Images/0e9c3e70e6b645443f478fb4738e2b59.png)

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:53:29.527

您可以使用[AbstractCellTableBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/AbstractCellTableBuilder.html)来呈现您自己的结构。
看看[Custom DataGrid 展示](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCustomDataGrid)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-08-28T10:11:38.113

```
;
    FlexTable table = new FlexTable();
    FlexTable.FlexCellFormatter flexCellFormatter =table.getFlexCellFormatter();
    flexCellFormatter.setColSpan(3,0,2);
    final TextBox textBox = new TextBox();
    Label label = new Label();
    label.setText("Name");
    table.setWidget(0, 0, label);
    table.setWidget(0, 1, textBox);
    final TextBox textBox1 = new TextBox();
    Label label1 = new Label();
    label1.setText("Surname");
    table.setWidget(1,0,label1);
    table.setWidget(1, 1, textBox1);
    final TextBox textBox2 = new TextBox();
    Label label2 = new Label();
    label2.setText("e-mail");
    table.setWidget(2,0, label2);
    table.setWidget(2, 1, textBox2);

    Button button = new Button("apply", new ClickHandler() {
        @Override``
        public void onClick(ClickEvent event) {
            String name = textBox.getText();
            String surname = textBox1.getText();
            Window.alert("Your name is " + name + "Your surname is " + surname);
        }
    });
    table.setWidget(3, 0, button);//Write this code, then run, you can answer! goodLuck :-)) 
```

# ruby-on-rails - engineyard-local 和开发工作流程

> ID：14879354
> 
> 赞同：0
> 
> 时间：2013-02-14T16:23:12.193
> 
> 标签：ruby-on-rails, ruby, deployment, vagrant, engineyard

我正在将我的 Rails 应用程序从 Dreamhost 移动到 EngineYard，然后我正在测试 engineyard-local 工具..

所以，我真的很困惑，有我的问题：

*   我会在虚拟机里面开发吗？使用`ey-local ssh`命令；

*   有必要使用RVM吗？

*   EngineYard Local 是关于“Devops Thing”的？

任何人都可以解释他自己的工作流程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:50:00.223

Engine Yard Local 旨在作为开发和测试将部署到 Engine Yard Cloud 的应用程序的环境。它还提供了一种简单的方法来测试您可能编写的任何自定义 Chef 食谱。

您可以完全在虚拟机中进行开发，也可以在外部仅将其用于测试目的。使用 Engine Yard Local 的最大好处之一是开发团队成员都将拥有相同的环境。

如果使用 Engine Yard Local 进行开发，您不需要使用 RVM 的更高级功能（gemsets 等），并且应该能够启动盒子并开始工作。在团队环境中进行外部开发将根据您团队的要求进行更多定制。

DevOps 几乎是一个流行词，实际上意味着开发和运营团队之间的协作。互联网上有很多关于 DevOps 的信息。

在工作流程方面，通常我会像往常一样在本地开发应用程序，然后在部署到 Engine Yard Cloud 之前启动 Engine Yard Local 框。但如前所述，您实际上可以完全在虚拟机中进行开发。

这能回答你的问题吗？

——埃文

# java - 如何循环整数以找到特定数量的倍数？

> ID：14879357
> 
> 赞同：-3
> 
> 时间：2013-02-14T16:23:21.897
> 
> 标签：java, loops

所以我试图创建一个程序来获取输入，然后找到用户想要的特定数量的倍数。例如，我们可以说用户输入 4，并且想要 6 个它的倍数。我遇到的最大问题就是刚刚开始！我知道这将涉及循环，但是如果用户想要 100 或其他东西，我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:31:42.203

解决此类问题的最佳方法是拿出一张纸和钢笔/铅笔，用手做几个例子。假设您的程序名为 Foo，如果您运行：

```
Foo 2 6 
```

您会期望得到 2 的 6 个倍数（前 6 个？）作为输出，它们是：

```
2, 4, 6, 8, 10, 12 
```

如果你跑：

```
Foo 3 10 
```

您会期望 3 的 10 倍数作为输出，它们是：

```
3, 6, 9, 12 , 15, 18, 21, 24, 27, 30 
```

您应该能够看到这两个调用及其输出之间的模式。第一个倍数*始终*是数字本身，最后一个倍数*始终*是您传递给的两个参数的乘积`Foo`。从这里您应该可以轻松地在该范围内创建一个循环。（即从 2 到 12 或从 3 到 30）

# actionscript-3 - AS3 - 使用结构信息解压缩格式

> ID：14879358
> 
> 赞同：0
> 
> 时间：2013-02-14T16:23:24.733
> 
> 标签：actionscript-3, struct, byte, compression

我想知道，是否可以在 AS3 中使用[这种信息来解压缩格式？](http://wiki.multimedia.cx/index.php?title=BLB)我见过人们使用 C++ 来解压缩类似的格式，但由于我精通 AS3，我想知道是否可以使用我的 ActionScript 知识来做同样的事情。

这可能很明显，但我对 ByteArrays 的工作并不多，而且对操纵字节也很缺乏经验。不过我愿意学习。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:52:54.700

这使用方法非常简单[`IDataInput`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/IDataInput.html)——您可以直接从 FileStream 或 Socket 中读取，也可以处理 ByteArray。Adobe 有[一个 ZIP 文件示例，](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7d53.html)与您的用例基本相同。您确实需要知道该结构的每个成员占用了多少字节（即，DWORD 通常是 32 位无符号位）。

对于您的示例：

```
struct BLBHeader                    class Header 
{                                   {    
    char    szID[4];                    public var szID:ByteArray;
    BYTE    bID;                        public var bID:uint;
    BYTE    bUnknown;                   public var bUnknwon:uint;
    WORD    wDataSize;                  public var wDataSize:uint;
    DWORD dwFileSize;                   public var dwFileSize:uint;
    DWORD dwNumber;                     public var dwNumber:uint;
};                                  }

function readHeader(input:IDataInput):Header {
    var header:Header = new Header();

    // ByteArrays have to be pre-allocated
    header.szID      = new ByteArray();
    input.readBytes(header.szID, 0, 4);

    // primitives just get read in
    header.bID       = input.readUnsignedByte();  // 8 bits
    header.bUnknown  = input.readUnsignedByte();
    header.wDataSize = input.readUnsignedShort(); // 16 bits
    DWORD dwFileSize = input.readUnsignedInt();   // 32 bits
    DWORD dwNumber   = input.readUnsignedInt(); 
}; 
```

如果您希望 szID 改为字符串，则可以使用

```
header.szID = input.readMultiByte(4, 'us-ascii'); // one byte per char 
```

要使用：

```
var header:Header = readHeader(input);
var fileIDs:Array = [];
for (var i:int = 0; i < header.dwNumber; ++i) {
    fileIDs.push( readFileID(input) );
}
... // continue with readDirEntry(input), readDataSection(input), ... 
```

# sql - 导致 ORA-01790 的联合：表达式必须具有与相应表达式相同的数据类型

> ID：14879364
> 
> 赞同：1
> 
> 时间：2013-02-14T16:23:38.027
> 
> 标签：sql, oracle, collections, oracle10g, oracle11g

以以下查询为例：

```
 select p.product_id, p.product_name, 
     product_type as product_type,
      from products
    group by p.product_id, p.product_name
  union
    select p.product_id, p.product_name, 
     cast(collect(coalesce(product_type, decode(product_description,null,'DESCR' || '-' product_description) as my_type) as product_type,
    from products
    group by p.product_id, p.product_name 
```

第一个查询中的 select 语句将 product_type 作为 varchar 返回，而在第二个查询中 product_type 的类型为 my_type。这导致 ORA-01790: 表达式必须具有与相应表达式相同的数据类型，因为数据类型不相同。

是否可以将第一个查询中的 product_type 转换为 my_type 类型？

我尝试更改第一个查询，如下所示，但没有运气。

```
select p.product_id, p.product_name, 
     cast(product_type as my_type) as product_type,
     decode(product_source_location, null, 'NO_SOURCE', product_source_location)
    from products
    group by p.product_id, p.product_name 
```

## 编辑

my_type 定义为`'TYPE "my_type" AS TABLE OF varchar2(4000)'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:37:54.907

我认为你不能在 SQL 中进行这种转换。但在 PL/SQL 中，您可以：

```
CREATE OR REPLACE TYPE STRARRAY AS TABLE OF VARCHAR2 (255)
/

DECLARE
  tab STRARRAY;
  cnt NUMBER:= 0;
BEGIN
 SELECT COUNT(*)
  INTO cnt
   FROM TABLE(CAST(tab AS strarray));
  dbms_output.put_line(cnt);
END;
/ 
```

我认为我上面的假设是错误的。我没有删除它，因为它仍然是有效的例子。下面的示例使用 COLLECT 将现有表列（emp 表）转换为 table_type 类型：

```
CREATE OR REPLACE TYPE varchar2_ntt AS TABLE OF VARCHAR2(4000);
/

SELECT deptno
    , CAST(COLLECT(ename) AS varchar2_ntt) AS emps
  FROM   scott.emp
GROUP  BY deptno
/

-- This is dumb but works:

SELECT deptno
     , CAST(COLLECT(ename) AS varchar2_ntt) AS emps
  FROM   scott.emp
 GROUP  BY deptno
 UNION ALL
 SELECT deptno
     , CAST(COLLECT(ename) AS varchar2_ntt) AS emps
   FROM   scott.emp
  GROUP  BY deptno
 / 
```

# wpf - 如何在 WPF 的堆栈面板中设置文本框的宽度？

> ID：14879366
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:23:43.007
> 
> 标签：wpf, textbox

我在 WPF 的 StackPanel 中放置了一个 TextBox。如果我在 TextBox 上设置 Width 或 MaxWidth 属性，它的宽度不会改变。

我可以设置 StackPanel 的宽度，但它会切断 TextBox 而不是改变宽度。

我是否必须设置不同的属性或将 TextBox 放在不同的容器中才能更改其宽度？

下面测试 Xaml：

```
<StackPanel Orientation="Horizontal">
    <Label Content="Service: "/>
    <TextBox Width="50"/>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:45:20.010

在 TextBox 上设置 Width 和 MinWidth 属性解决了这个问题。

# asp.net - 向 ASP.net 中继器的 NamingContainer 添加扩展方法

> ID：14879369
> 
> 赞同：0
> 
> 时间：2013-02-14T16:23:45.263
> 
> 标签：asp.net, extension-methods, asprepeater

我正在尝试为 asp.net 转发器控件编写一个扩展方法，该方法允许我在转发器模板中调用以下代码。这就是说我想在中继器上调用我自己的 Eval 方法。

```
<%# UmbracoEval("propertyName") %> 
```

我已经尝试将 Repeater 控件本身以及 NamingContainer 定位，但我看到容器受到保护时出现可访问性错误。

这甚至可能吗？我从来没有从标记中调用扩展方法，所以我不确定。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:03:08.273

您仍然需要 Eval 或 Bind - `UmbracoEval(Eval("propertyName"))`或`UmbracoEval(Bind("propertyName"))`.

Eval 和 Bind 都返回一个对象，因此对象的扩展方法不是一个好主意。

`UmbracoEval`但是，您可以在后面的代码中创建它并从 aspx 调用它。

```
protected string UmbracoEval(object eval)
{
    return eval.ToString() + " abc"; // do something
} 
```

# java - 如何在 IntelliJ 中使用命令行参数构建 java 项目

> ID：14879371
> 
> 赞同：1
> 
> 时间：2013-02-14T16:23:53.483
> 
> 标签：java, build, compilation, intellij-idea, javac

我有一个 java 测试项目，它有两个二进制字段。当我想在 IntelliJ 中编译项目时，它抱怨我应该在编译时使用 -source 7 而不是 -source 1.6。我的 JDK 是最新的。我不知道如何解决这个问题。

示例代码：

```
public class BitWiseTest {
    static int val1 = 0b01110;//compile-time error
    static int val2 = 0b11011;//compile-time error
    public static void main()
    {
        System.out.println(val1 & val2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T17:00:05.267

该问题主要是由于项目语言级别集的配置不正确造成的。因此，尽管您可能使用的是 java 7，但由于项目语言级别配置不正确，它使用仅在该语言级别有效的构造。因此您会收到错误。要修复它，请按照以下步骤操作：

转到文件->项目结构->项目并将项目语言级别更改为 7.0 并将项目 SDK 更改为 1.7

# mysql - 使用 net/ssh/gateway 建立到 mysql 的 ssh 隧道

> ID：14879375
> 
> 赞同：1
> 
> 时间：2013-02-14T16:23:55.963
> 
> 标签：mysql, ruby, tunnel, net-ssh

我正在尝试通过 ssh 建立到远程服务器的隧道，然后使用转发端口访问 MySQL。

**我目前正在使用它**

```
$gateway = Net::SSH::Gateway.new('target.server', 'user')

def with_gateway
  $gateway.open("target.server", 3306) do |port|
    yield port
  end
end 
```

在我看来，这将与此类似...

```
`ssh -L #{port}:localhost:3306 -N user@target.server` 
```

**然后当我尝试使用它并做这样的事情时。**

```
with_gateway do |port|
  puts `mysql -u user -ppass -h 127.0.0.1 -P #{port} -e SHOW\ DATABASES\;`
end 
```

**它给了我这个错误信息..**

```
ERROR 2013 (HY000): Lost connection to MySQL server at 'reading initial communication packet', system error: 0 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:17:15.573

`$gateway.open("target.server", 3306) do |port|`

更等价于，在这种情况下，

`ssh -L #{port}:target.server:3306 -N user@target.server`

如果您的 mysql 服务器仅侦听 127.0.0.1 （或内部 IP 地址，或防火墙仅允许通过内部网络进行连接，所有这些都是合理且正常的配置），这很可能会失败。

可能你想要：

`$gateway.open("127.0.0.1", 3306) do |port|`

而在这种情况下。

# javascript - 仅当页面注入到 dom 准备好通过回调时才添加内容

> ID：14879376
> 
> 赞同：0
> 
> 时间：2013-02-14T16:24:08.030
> 
> 标签：javascript, events, cordova, jquery-mobile

我正在使用 JQM + Phonegap 开发一个应用程序。

为了避免设备减速和应用程序崩溃，我使用 JQM 单页导航模型，因为它允许自动 DOM 大小管理。

当用户导航时，我使用 href="page.html" 将页面动态注入到 DOM 中，并手动使用 changePage('page.html') 来处理用户交互。

因此，据我所知，在那些使用服务器数据的页面上，我需要：

1.  将新页面加载（注入）到 DOM 以访问目标 div/容器
2.  动态放置新数据（追加）

请查看此示例以进行说明：

```
 function loadData (myJSONObject){

    // inject page
    $.mobile.changePage('page2.html');

    //load data
    for(var i=0; i<myJSONObject.data.length;i++){
    name = myJSONObject.data[i].name;
    link = myJSONObject.data[i].description;

    // #listData is the target container from page2.html                    
    $("<a />",{
        text: name,
        href: link
        }).appendTo(                                                
            $("<li />",{
            id: name,
            }).appendTo('#listData'));
    } 
```

此代码导致一个空列表，因为由于 javascript 异步行为，JQM 页面注入函数比加载数据花费的时间更长

**注意：

*   使用多页模型和 changePage('#target') 作品
*   使用 setTimeOut() 进行测试并强制数据加载循环等待也可以，但我认为这不是最佳的，也不是一个好的开发实践

问题：只有当新页面完全注入 DOM 时，是否有回调或方法开始加载数据，所以目标容器的可用性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:46:29.457

事实上，我正在开发一个连接到网络服务的复杂应用程序。它是网络应用程序的移动版本。

我正在模拟一个 MVC 模型，所以每个页面都有自己的 controller.js、model.js、view.js 和一个 html5 页面（单页文档）。这就是为什么我使用 changePage('page2.html') 将页面注入 DOM，让 JQM 框架处理 DOM、后退按钮功能、转换......

当用户浏览页面时，显示、隐藏或注入取决于是否需要新数据，或者它只是显示来自 DOM（隐藏->显示）的页面，其中包含最后一个数据和“刷新”按钮或向下滚动加载新-数据功能。

请看一下这个例子：

想象一个用 3 页发现新餐厅的应用程序。主页（显示您订阅的餐厅的最新消息）、餐厅（所有可用餐厅的列表）和 RestaurantProfile（信息和订阅/取消订阅按钮）。

因此，当用户单击列表中的餐厅时，我需要从服务器获取数据并从 RestaurantProfile.html 放入不同的目标包装器中，但首先必须将该页面注入 DOM，因为它无法加载将数据放入隔离页面，然后将其注入 DOM。那是不可能的。

我什至不知道该页面是否已经进入 DOM 或已被删除。这取决于 JQM 框架（如果需要，changePage() 会在之前执行 loadPage()）。我只需要知道需要哪个页面并传递相应的数据。就这样。

现在，增加用户、用户个人资料、用户提要和评论，增加这种复杂性……它可以很容易地变成一个 10 页的应用程序。

这就是我决定使用单页文档的原因，以保持“干净”的应用程序结构，以便将来轻松添加新功能。

pageinit 事件 - 它必须放在相应的页面中，并且总是会触发一个函数。但是，正如我之前所说，有时这是一个简单的导航情况（直到 JQM navBar），有时我管理请愿，这就是我需要添加数据表单服务器的时候。

障碍。如何知道我们处于什么情况？

$.mobile.changePage('to', options) function - 让我们看看我的问题是否可以通过使用这个函数和 pageload 事件来解决（如果你可以使用相同的 options 参数，我在文档中找不到pageinit 事件）...

reloadPage > 可以在需要新数据时设置为 true，尽管我不知道 JQM 框架还会做什么，即使它在功能方面意味着什么......

数据 > 我真的需要能够将其设置为 json 对象。但我还没有完成这项工作......

我希望我要解决的问题现在已经很清楚了。

问题 ：

1) pageinit 事件是否处理与 pageload 事件相同的“选项”参数？

2）如何将“选项>数据”参数设置为json对象并在页面加载事件中正确访问其内容？

3) reloadPage = true 究竟需要什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:29:33.967

有几个 pageLoad 事件在从一页转换到下一页的不同阶段触发。这一切都很好地记录在这里：http: [//jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

我相信在你的情况下，你所追求的事件就是`pageinit`事件。

# mysql - 在一个查询/事务中更新三个类别表并设置与 MySQL 的类别映射

> ID：14879380
> 
> 赞同：1
> 
> 时间：2013-02-14T16:24:19.023
> 
> 标签：mysql, vb.net, sql-update, insert-update

我有三张桌子；

```
masterCat
category
subCat 
```

猫大师只有两列`id`，`name`

随后的表格有三列`id`，`name`和`mapsTo`

很明显，表`mapsTo`中的列`category`表示`masterCat`该类别属于哪个类别，从而创建了一个层次类别结构

我正在尝试编写一个脚本，使用户能够更新和修改他们的类别，包括添加新的类别。

因此，如果创建了一个新结构：

```
newMasterCat > newCategory > newSubCategory 
```

在没有那么多代码行的情况下，如何在 MySQL 中编写它，这就是它需要做的：

1.  在每个表中创建新行（3 个插入作为一个事务，没问题）
2.  回顾那些行，找出分配给`masterCat`和`category`表修改的 ID。
3.  使用在其父表中创建的记录的 ID`category`更新新行`subCat`

我可以分三个阶段做到这一点，但有更快的方法吗？

（在 VB.net 中使用 MySQL 数据库和 MySQL 驱动程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:38:17.337

您可以使用该`LAST_INSERT_ID()`功能来完成此操作： http: [//dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

此函数的结果仅限于当前连接，不会受到其他并发插入的影响。所以你的插入看起来像：

```
INSERT INTO masterCat (name) VALUES ('masterCat1');

INSERT INTO category (name, mapsTo) VALUES ('Cat1', LAST_INSERT_ID()); 
```

最后你可以以同样的方式第三次链接它：

```
INSERT INTO subCat (name, mapsTo) VALUES ('SubCat1', LAST_INSERT_ID()); 
```

有人可以评论如何在 VB.NET 中执行这些语句，但您*可能*必须创建一个存储过程才能在单个调用中执行单独的语句 - 即您可能无法在调用中将这些语句链接到类似`ExecuteNonQuery()`.

顺便说一句，我要指出-很多人花费大量时间担心防止多次数据库往返，而这不是他们应该关注的瓶颈。

# java - 长时间运行的 CallableStatement 无需等待即可执行

> ID：14879384
> 
> 赞同：3
> 
> 时间：2013-02-14T16:24:31.457
> 
> 标签：java, oracle, jdbc

我有存储过程，需要约 3 小时才能执行。而且我不想等到`procedure`返回值或等到 CallableStatement`execute()`方法被执行。JDBC中有这种可能性吗？或者我应该在新线程中使用触发器或执行等方法？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:41:33.737

一切都准备好回复了，但我想我会检查是否有欺骗性并发现：[异步 jdbc 调用是否可能？](https://stackoverflow.com/questions/4087696/is-asynchronous-jdbc-call-possible)

这个答案提供了很多推荐的模式来解决这个“限制”。对我来说，我已经准备好建议您看一下线程解决方案，如果您需要多次 IO 绑定调用（尽管您需要警惕堵塞数据库会话） ，也许可以使用[ThreadPoolExecutor 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

# python - 发布到页面时的不同响应

> ID：14879388
> 
> 赞同：1
> 
> 时间：2013-02-14T16:24:41.167
> 
> 标签：python, facebook, facebook-graph-api, facebook-timeline

我有一个应用程序，其部分功能是代表客户发布到客户的 Facebook 页面。客户授权应用程序，我生成扩展的用户访问令牌和页面访问令牌，并根据需要发布到他们的页面。直到最近一切都很好。该应用程序发布到客户的页面没有造成滋扰，只有照片帖子从未出现在他们的时间线上。

我复制、比较并缩小了错误行为的范围，但我不知道如何解决它。当我使用以下功能将照片发布到 Facebook 时：

```
def post_photo(graph_api, post, post_message, target_page, **kwargs):
    """Posts a photo to wall."""
    img_fp = urlopen(post['image'])
    if img_fp.getcode() != 200:
        raise ValueError('Image request failed. Returned code: %s' % img_fp.getcode())

    return graph_api.put_photo(img_fp, post_message, profile_id=target_page, **kwargs) 
```

响应通常（总是？）包含两个值：`id`和`post_id`, while`post_id`在从未出现过的帖子的响应中丢失。

页面或应用程序的设置是否需要更改（不同的 Facebook 应用程序发布到不同的页面）？隐私设置，额外权限，什么？我已经没有想法了。访问令牌调试器没有显示任何异常，页面设置也没有。

# cakephp - 通过 And don't work + cakephp 查找条件

> ID：14879391
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:24:51.273
> 
> 标签：cakephp, cakephp-1.3

此功能在 OR 条件下工作。我需要这个来处理 AND 条件。任何帮助：

```
$ands = array();
foreach ($array_training_id as $id) {
        $ands[] = array('TrainingsUser.training_id' => $id);
}
$conditions = array('AND' => $ands);
$users = $this->TrainingsUser->find('all', array('conditions' => $conditions)); 
```

我想写一个这样的查询和条件：

```
SELECT user_id FROM trainings_users WHERE training_id = 172 AND training_id = 174 
```

此查询在获取第一个 ID 时有效。
表说明：我有 3 个表 Training - User - Training_users ... **Training_users 表有 traing_id 和 user_id**我想要的是这样的东西： `SELECT user_id FROM Training_users WHERE training_id = 172 AND training_id = 174`...即使在 SqlMyadmin 中它也不起作用

![在此处输入图像描述](../Images/f83ab3006909bbf79ca4cc209dc832c8.png)

当我给 training_id 172 和 training_id 174 时我需要什么，它只需要返回用户 150

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T17:35:25.710

为什么你的 $array_project_id 首先是一个字符串（除了命名冲突^^）？它应该是一个 id 数组，并且 cake 将自动能够开箱即用地使用它。

好吧，无论如何：

```
$ids = explode(',', $array_project_id);
// now its a clean array

$users = $this->Training->find('all', array('conditions' => 
    array('Training.Project_id' => $ids)
)); 
```

在您发表评论后，我仍然看不到在此处使用 AND 的价值。但到底是什么，给你：

```
$ands = array();
foreach ($ids as $id) {
    $ands[] = array('Training.Project_id' => $id);
}
$conditions = array('AND' => $ands);
$users = $this->Training->find('all', array('conditions' => $conditions)); 
```

瞧。但是，它仍然永远不会起作用。

看来您正在使用一些 HABTM 关系（您应该在一开始就提供这条重要的信息！）。然后，您需要查询中间模型/关系，以便在此处有两个 belongsTo-relations（= 左连接）。

您真正需要的是（再次：为什么您现在才发布相关关系和有关 Training_users 的信息？）是查询中间表“Training_users”，其中包含一个包含在 belongsTo 方向（左连接到用户）。最重要的事实：使用 OR 而不是 AND。这将得到你想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:36:37.213

最简单的方法是创建一个 habtm 关系。

然后你可以这样做：

```
$users = $this->User->Training->find('all', array('conditions' => array('User.id =' => $ids))); 
```

这会找到所有 User.id = $id

使用您的 AND 条件，它将是：

```
 $users = $this->User->Training->find('all', array('conditions' => 
'AND' => array('User.id =' => $ids['n'], 'User.id =' => $ids['n'])
)); 
```

# java - Android 从 Web 获取文本

> ID：14879393
> 
> 赞同：0
> 
> 时间：2013-02-14T16:24:53.830
> 
> 标签：java, android, text, web, get

我从网页获取文本时遇到问题，例如我正在使用此代码的[测试页面](http://ps-bred02.eu/ip.php)

```
private String getTextFromWWW(String URLin) {
    try {
        URL url = new URL(URLin);
        URLConnection connection = url.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
        String text = in.readLine();            
        in.close();

        return text;

    } catch (Exception e) {
        return "Error > " + e.getMessage();

    }
} 
```

我添加了权限`<uses-permission android:name="android.permission.INTERNET"/>` 当我启动这个脚本时，我总是得到“错误> null”......我在普通的Java应用程序中使用了这个函数，它工作正常。

# android - API 8 的 getNumColumns()

> ID：14879394
> 
> 赞同：1
> 
> 时间：2013-02-14T16:24:54.563
> 
> 标签：android, gridview

`getNumColumns()`for`GridView`从 API 11 开始可用，有什么方法可以在 API 8 中获取此方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-12T09:46:34.413

在这个[重复的帖子](https://stackoverflow.com/questions/12231835/how-to-get-the-number-of-rows-of-a-gridview)中，有人提出了适用于 API 8 的答案：

```
private int getNumColumnsCompat() {
    if (Build.VERSION.SDK_INT >= 11) {
        return getNumColumnsCompat11();

    } else {
        int columns = 0;
        int children = getChildCount();
        if (children > 0) {
            int width = getChildAt(0).getMeasuredWidth();
            if (width > 0) {
                columns = getWidth() / width;
            }
        }
        return columns > 0 ? columns : AUTO_FIT;
    }
}

@TargetApi(Build.VERSION_CODES.HONEYCOMB)
private int getNumColumnsCompat11() {
    return getNumColumns();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-14T19:52:15.553

我在我的一个自定义 GridView 子类上添加了这个实现，它按预期工作。我检查了 GridView 类的声明字段，至少在 API 8 上，它们确实已经有一个名为的字段`mNumColumns`（这是 API 18 返回的内容`getNumColumns()`）。他们可能没有将字段名称更改为其他名称，然后又在 API 8 和 18 之间更改，但我没有检查。

```
@Override
public int getNumColumns() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        return super.getNumColumns();
    } else {
        try {
            Field numColumns = getClass().getSuperclass().getDeclaredField("mNumColumns");
            numColumns.setAccessible(true);
            return numColumns.getInt(this);
        } catch (Exception e) {
            return 1;
        }
    }
} 
```

@Override 不会导致任何错误，因为它只是一个安全检查注释 AFAIK。

我也不知道是否有任何反对建议这样做而不是使用单独的`getNumColumnsCompat()`方法（如@elgui 回答），但我发现它像这样非常整洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:30:19.727

这可能不是您想听到的答案，但您必须创建一个自定义`GridView`' ，它的 API 11 功能与 API 8 中可用的功能相匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-23T23:06:00.850

加入最佳答案，然后沸腾：

```
@SuppressLint("NewApi")
@Override
public int getNumColumns() {
   if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) 
      return super.getNumColumns();

   try {
      Field numColumns = getClass().getSuperclass().getDeclaredField("mNumColumns");
      numColumns.setAccessible(true);
      return numColumns.getInt(this);
   }
   catch (Exception e) {}

   int columns = AUTO_FIT;
   if (getChildCount() > 0) {
      int width = getChildAt(0).getMeasuredWidth();
      if (width > 0) columns = getWidth() / width;
   }
   return columns;
} 
```

:D

# flv - Flash 播放器不适用于 mediaelement.js 和 FLV 文件

> ID：14879397
> 
> 赞同：0
> 
> 时间：2013-02-14T16:25:15.407
> 
> 标签：flv, mediaelement.js, flvplayback, flvplayer

我有一个很棒的带有 .FLV 文件的回声系统，需要播放它，但我的播放器无法正常工作。

```
<script src="mediaelement/build/mediaelement-and-player.min.js"></script>
<link rel="stylesheet" href="mediaelement/build/mediaelementplayer.min.css" />

<video width="640" height="480" id="player2" poster="myposters/flv-video-poster.jpg" controls="controls" preload="none">

    <object width="640" height="480" type="application/x-shockwave-flash" data="mediaelement/build/flashmediaelement.swf">
        <param name="movie" value="mediaelement/build/flashmediaelement.swf" /> 
        <param name="flashvars" value="controls=true&poster=myposters/flv-video-poster.jpg&file=medias/my-video-flv.flv" />
        <!-- Image fall back for non-HTML5 browser with JavaScript turned off and no Flash player installed -->
        <img src="myposters/flv-video-poster.jpg" width="640" height="480" alt="Here we are" title="No video playback capabilities" />
    </object>

</video> 
```

我在 Chrome、Firefox 和 Internet Explorer 10、9 中对其进行了测试，但无法正常工作......在 IE 7 和 8 上它崩溃了......并且浏览器重新启动......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:00:56.137

现在正在工作：

我已经关注了这个线程并且它现在正在工作：[Mediaelement.js故障在IE中，没有闪回工作](https://stackoverflow.com/questions/6190831/mediaelement-js-malfunction-in-ie-no-flashback-works)，除了IE8（浏览器崩溃）。

在 IE9 和 IE10 中 - 在 IE 7 中工作 HTML5 - 在 IE 8 中工作后备 SWF - 浏览器崩溃

对我来说很好，因为它是一个私人应用程序，只会使用 google chrome 或 safari。如果有客户需要使用 IE 将使用 9 或更高版本。

谢谢你们

# ruby-on-rails - 更新到 gem 1.8.7 时出现 ruby onrails 错误

> ID：14879399
> 
> 赞同：0
> 
> 时间：2013-02-14T16:25:24.940
> 
> 标签：ruby-on-rails

我正在使用 ruby​​ 1.8.6，我想更新。我所在的服务器公司说要运行命令：

```
gem update rails 
```

错误：安装导轨时出错：

```
activesupport reqiores Ruby version >= 1.8.7. 
```

我也在公司的现场工作，感谢您对此事的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:36:45.447

您可以通过以下方式更新您的红宝石：

```
sudo apt-get install ruby1.9.3 
```

但我真的建议您改用 RVM（Ruby 版本管理器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:35:00.937

使用此命令更新 ruby​​ gem -

```
gem update --system 
```

用于`gem update`将所有已安装的 gem 更新到最新版本。

另一种选择是手动安装 ruby​​ -

检查此链接以获取进一步的过程[http://docs.rubygems.org/read/chapter/3#page13](http://docs.rubygems.org/read/chapter/3#page13)

# ios - NSJSONSerialization Json 格式化

> ID：14879403
> 
> 赞同：2
> 
> 时间：2013-02-14T16:25:35.887
> 
> 标签：ios, nsjsonserialization

所以我有一个要转换为 nsdictionary 的数组。我的过程效果很好，但我想在 json 字符串中添加一个标题。

```
NSArray *showarray = [[MMIStore defaultStore] loadAllShows ];
NSMutableArray* jsonArray = [[NSMutableArray alloc] init];

for (Show* show in showarray) {
    NSMutableDictionary* showDictionary = [[NSMutableDictionary alloc] init];
    [showDictionary setObject:show.showid forKey:@"Showid"];
    [jsonArray addObject:showDictionary];
}  
NSData* nsdata = [NSJSONSerialization dataWithJSONObject:jsonArrayoptions:NSJSONReadingMutableContainers error:nil];
NSString* jsonString =[[NSString alloc] initWithData:nsdata encoding:NSUTF8StringEncoding];
NSLog(@"%@", jsonString); 
```

下面的输出：

```
{[
  {
    "Showid" : "10027"
  },
  {
    "Showid" : "10707"
  },
  {
    "Showid" : "10759"
  }.....

] 
```

我怎样才能让它看起来像这样

```
{
    "Shows":[
  {
    "Showid" : "10027"
  },
  {
    "Showid" : "10707"
  },
  {
    "Showid" : "10759"
  }....
]
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:31:43.787

```
NSMutableString *jsonString1 = [[@"{Shows:[" stringByAppendingString:jsonString] stringByAppendingString:@"]}"]; 
```

由于您的 jsonstring 是一个字符串，因此您可以更改它。

希望这可以帮助..

编辑：

```
NSString *jsonString1 = [NSString stringWithFormat:@"{"Shows":%@}",jsonString]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:00:13.410

只需使用正确的键将您的数组添加到字典中。

```
NSArray *showarray = [[MMIStore defaultStore] loadAllShows];
NSMutableArray* jsonShowsArray = [[NSMutableArray alloc] init];

for (Show* show in showarray) {
    NSMutableDictionary* showDictionary = [[NSMutableDictionary alloc] init];
    [showDictionary setObject:show.showid forKey:@"Showid"];
    [jsonShowsArray addObject:showDictionary];
}  

NSDictionary* jsonDictionary = [NSDictionary dictionaryWithObject:jsonShowsArray 
                                                           forKey:@"Shows"]

NSData* nsdata = [NSJSONSerialization dataWithJSONObject:jsonDictionary 
                                                 options:NSJSONReadingMutableContainers 
                                                 error:nil]; 
```

# powershell - 解析文件名，创建文件夹结构

> ID：14879404
> 
> 赞同：1
> 
> 时间：2013-02-14T16:25:36.943
> 
> 标签：powershell, powershell-2.0

我有一个由于沟通不畅需要更改的脚本：我们在生产车间有工作站，它们创建具有以下结构的文件 - 04_R_____"109402"0076_9999992_35_401_"01_20121107"_134029_0667.I00.asd（文件名的引号部分是必须解析的部分。

我已经使用文件名的第一部分创建了一个数组，并且 powershell 程序能够解析该数据；然而，在文件名的第二部分，必须有一个文件夹结构，由零件号、测试台号（01、02、03 等）和日期创建。如果文件夹不存在，则仅在匹配时创建文件夹。

我当前的脚本按前缀过滤（这是错误的）并每天创建所有文件夹（不是通过匹配）。我想使用一个子字符串来排除这么多字符来捕获 01、02、03 等。是否可以不重新创建轮子并使用我当前的代码进行一些更改？我所有的测试代码都包括在内，任何帮助都将不胜感激或修改！

*   109402 = 零件清单
*   01-试验台机
*   20121107 - 日期

代码：

```
$source ="\\127.0.0.1\baunhof\*"
$archive = "\\127.0.0.1\error\\"
#$past=(Get-date).AddDays(-2)

$destination ="\\127.0.0.1\TestFolder1\\"
$destination1="\\127.0.0.1\TestFolder2\\"
$destination2="\\127.0.0.1\TestFolder3\\"
$destination3="\\127.0.0.1\TestFolder4\\"
#array for all destinations
$destination_array=@("$destination", "$destination1", "$destination2", "$destination3")

#creates folder yyyy/mm/dd
#$today = (Get-date -format yyyy/MM/dd)
#new-item -type directory ($today)
$DTS = ( get-date ).ToString('yyyy/MM/dd')

#array for file prefix
$File_Array_8HP70=@("*108701*")
$File_Array_8HP70X=@("*108702*")
$File_Array_9HP48=@("*109401*", "*1094080*", "*1094090*")
$File_Array_9HP48X=@("*109402*", "*1094091*", "*1094082*", "*1094092*")

#test bench number array filter
$test_bench_01=@("*_01_*")
$test_bench_02=@("*_02_*")
$test_bench_03=@("*_03_*")
$test_bench_04=@("*_04_*")

#Error log function: will write to application on server
function Write-EventLog {
  param([string]$msg = "Default Message", [string]$type="Information")
  $log = New-Object System.Diagnostics.EventLog
  $log.set_log("Application")
  $log.set_source("PSscript")
  $log.WriteEntry($msg,$type)
}

Write-Eventlog "Acoustic file parse program has started"

# if statement checks if $destination_array[0] is false then new item
$destination_array[0] = "\\127.0.0.1\TestFolder1\today\" 
If (!(Test-Path -path $destination_array[0])) {
  new-item -type directory "\\127.0.0.1\TestFolder1\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder1\P01\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder1\P02\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder1\P03\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder1\P04\$DTS"
}

$destination_array[1] = "\\127.0.0.1\TestFolder2\today\"
If (!(Test-Path -path $destination_array[1])) {
  new-item -type directory "\\127.0.0.1\TestFolder2\$DTS\"
  new-item -type directory "\\127.0.0.1\TestFolder2\P01\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder2\P02\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder2\P03\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder2\P04\$DTS"
}

$destination_array[2] = "\\127.0.0.1\TestFolder3\today\"
If (!(Test-Path -path $destination_array[2])) {
  new-item -type directory "\\127.0.0.1\TestFolder3\$DTS\"
  new-item -type directory "\\127.0.0.1\TestFolder3\P01\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder3\P02\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder3\P03\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder3\P04\$DTS"
}

$destination_array[3] = "\\127.0.0.1\TestFolder4\today\"
If (!(Test-Path -path $destination_array[3])) {
  new-item -type directory "\\127.0.0.1\TestFolder4\$DTS\"
  new-item -type directory "\\127.0.0.1\TestFolder4\P01\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder4\P02\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder4\P03\$DTS"
  new-item -type directory "\\127.0.0.1\TestFolder4\P04\$DTS"
}

$destination="\\127.0.0.1\TestFolder1\$DTS"
$destination1="\\127.0.0.1\TestFolder2\$DTS"
$destination2="\\127.0.0.1\TestFolder3\$DTS"
$destination3="\\127.0.0.1\TestFolder4\$DTS"
$destination_array=@  ("$destination", "$destination1", "$destination2", "$destination3")

# filter works below - need to use array

#$files = get-childitem $source -filter "108701*" -recurse
#foreach ($file in $files)
#{move-item $file.fullname $destination_array[0] -force}

$File_Array_8HP70_start = $File_Array_8HP70 | % {$_+"*"} 
$files = get-childitem $source -include $File_Array_8HP70_start -recurse
foreach ($file in $files) {
  move-item $file.fullname $destination_array[0] -force
}
#filter test bench
$files01 = gci $destination_array[0] -filter "01_*" -recurse
$files02 = gci $destination_array[0] -filter "02_*" -recurse
$files03 = gci $destination_array[0] -filter "03_*" -recurse          
$files04 = gci $destination_array[0] -filter "04_*" -recurse

$destination_array[0]="\\127.0.0.1\TestFolder1\P01\$DTS"
foreach ($file in $files01) {
  move-item $file.fullname $destination_array[0] -force
}
$destination_array[0]="\\127.0.0.1\TestFolder1\P02\$DTS"
foreach ($file in $files02) {
  move-item $file.fullname $destination_array[0] -force
}
$destination_array[0]="\\127.0.0.1\TestFolder1\P03\$DTS"
foreach ($file in $files03) {
  move-item $file.fullname $destination_array[0] -force
}
$destination_array[0]="\\127.0.0.1\TestFolder1\P04\$DTS"
foreach ($file in $files04) {
  move-item $file.fullname $destination_array[0] -force
}

$File_Array_8HP70X_start = $File_Array_8HP70X | % {$_+"*"}
$files = get-childitem $source -include $File_Array_8HP70X_start -recurse
foreach ($file in $files) {
  move-item $file.fullname $destination_array[1] -force
}
#$files02 = gci $destination_array[1] -filter "02_*" -recurse
$files01 = gci $destination_array[1] -filter "01_*" -recurse
$files02 = gci $destination_array[1] -filter "02_*" -recurse
$files03 = gci $destination_array[1] -filter "03_*" -recurse          
$files04 = gci $destination_array[1] -filter "04_*" -recurse

$destination_array[1]="\\127.0.0.1\TestFolder2\P01\$DTS"
foreach ($file in $files01) {
  move-item $file.fullname $destination_array[1] -force
}
$destination_array[1]="\\127.0.0.1\TestFolder2\P02\$DTS"
foreach ($file in $files02) {
  move-item $file.fullname $destination_array[1] -force
}
$destination_array[1]="\\127.0.0.1\TestFolder2\P03\$DTS"
foreach ($file in $files03) {
  move-item $file.fullname $destination_array[1] -force
}
$destination_array[1]="\\127.0.0.1\TestFolder2\P04\$DTS"
foreach ($file in $files04) {
  move-item $file.fullname $destination_array[1] -force
}

$File_Array_9HP48_start = $File_Array_9HP48 | % {$_+"*"}
$files = get-childitem $source -include $File_Array_9HP48_start -recurse
foreach ($file in $files) {
  move-item $file.fullname $destination_array[2] -force
}
#$files03 = gci $destination_array[2] -filter "03_*" -recurse
$files01 = gci $destination_array[2] -filter "01_*" -recurse
$files02 = gci $destination_array[2] -filter "02_*" -recurse
$files03 = gci $destination_array[2] -filter "03_*" -recurse
$files04 = gci $destination_array[2] -filter "04_*" -recurse

$destination_array[2]="\\127.0.0.1\TestFolder3\P01\$DTS"
foreach ($file in $files01) {
  move-item $file.fullname $destination_array[2] -force
}
$destination_array[2]="\\127.0.0.1\TestFolder3\P02\$DTS"
foreach ($file in $files02) {
  move-item $file.fullname $destination_array[2] -force
}
$destination_array[2]="\\127.0.0.1\TestFolder3\P03\$DTS"
foreach ($file in $files03) {
  move-item $file.fullname $destination_array[2] -force
}
$destination_array[2]="\\127.0.0.1\TestFolder3\P04\$DTS"
foreach ($file in $files04) {
  move-item $file.fullname $destination_array[2] -force
}

$File_Array_9HP48X_start = $File_Array_9HP48X | % {$_+"*"}
$files = get-childitem $source -include $File_Array_9HP48X_start -recurse
foreach ($file in $files) {
  move-item $file.fullname $destination_array[3] -force
}
#$files04 = gci $destination_array[3] -filter "04_*" -recurse
$files01 = gci $destination_array[3] -filter "01_*" -recurse
$files02 = gci $destination_array[3] -filter "02_*" -recurse
$files03 = gci $destination_array[3] -filter "03_*" -recurse
$files04 = gci $destination_array[3] -filter "04_*" -recurse

$destination_array[3]="\\127.0.0.1\TestFolder4\P01\$DTS"
foreach ($file in $files01) {
  move-item $file.fullname $destination_array[3] -force
}
$destination_array[3]="\\127.0.0.1\TestFolder4\P02\$DTS"
foreach ($file in $files02) {
  move-item $file.fullname $destination_array[3] -force
}
$destination_array[3]="\\127.0.0.1\TestFolder4\P03\$DTS"
foreach ($file in $files03) {
  move-item $file.fullname $destination_array[3] -force
}
$destination_array[3]="\\127.0.0.1\TestFolder4\P04\$DTS"
foreach ($file in $files04) {
  move-item $file.fullname $destination_array[3] -force
}
#move files to c:\Error if older than 2 days
$file_2 = gci $source -recurse|where {$_.LastWriteTime -lt (get-date).AddDays(-2)}
foreach ($file in $file_2) {
  move-item $file.fullname $archive -force
}

Write-Eventlog "Acoustic file parse program has completed" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:11:03.067

您正在尝试手动完成所有操作。不。

让 PowerShell 为您完成工作：

```
$DTS = (Get-Date).FormatDate('yyyy/MM/dd')

$parts_lists = @(
  @("108701"),
  @("108702"),
  @("109401", "1094080", "1094090"),
  @("109402", "1094091", "1094082", "1094092")
)

$destination_dirs = @(
  "\\127.0.0.1\TestFolder1",
  "\\127.0.0.1\TestFolder2",
  "\\127.0.0.1\TestFolder3",
  "\\127.0.0.1\TestFolder4"
)

# The following regular expression defines 2 sub-matches for parts list
# and test bench.
$re = "^\d{2}_[A-Z]___(\d{6})\d{4}_\d{7}_\d{2}_\d{3}_(\d{2})_\d{8}_\d{6}_\d{4}\.[A-Z]\d{2}\.asd$"

Get-ChildItem $source -Recurse | ? { $_.Name -match $re } | % {
  # process only files that match the given regular expression

  # iterate over all 4 parts lists
  for ($i = 0; $i -le 3; $i++) {
    if ( $parts_lists[$i] -contains $matches[1] ) {
      # if the first sub-match (the parts list number) is found in the current
      # parts list, construct a destination path from the corresponding base
      # directory, the test bench number and the date.
      $dest = Join-Path $destination_dirs[$i] -ChildPath "P$($matches[2])\$DTS"

      # Create the destination if it doesn't exist. Creating it here ensures
      # that a destination folder is only created when there's actually a
      # file going into it.
      if ( -not (Test-Path -LiteralPath $dest) ) {
        New-Item -Type Directory $dest
      }

      # Move the file ...
      Move-Item $_.FullName $dest -Force
      # ... end exit from the for-loop (no need to check other parts lists
      # once we found a match).
      break
    }
  }
} 
```

我不确定我是否完全理解了您的代码，因此我的示例代码可能需要一些调整，但它应该可以为您提供大致的思路。

您需要注意的一件事是，日期格式`yyyy/MM/dd`将使用区域日期分隔符为您提供日期字符串，即在具有美国语言环境的系统上，它将生成日期字符串`2013/02/15`，而在具有德语语言环境的系统上，日期字符串将是`2013.02.15`. 如果您希望日期部分由正斜杠分隔（当您在路径中使用该日期时，PowerShell 会将其解释为路径分隔符），您需要转义格式字符串中的正斜杠：`yyyy\/MM\/dd`.

**编辑：**正则表达式有两个目的：

*   将处理限制为仅与模式匹配的那些文件，以及
*   授予访问部件列表和测试台部件的文件名。

该模式源自您提供的示例文件名：

> 04_R___ **109402** 0076_9999992_35_401_ **01_20121107** _134029_0667.I00.asd

*   `^`: 字符串的开头。
*   `\d{2}_`: 2 位数字后跟一个下划线。
*   `[A-Z]___`: 一个大写字母后跟 3 个下划线。
*   `(\d{6})`：一组6位数字（代表零件清单编号）。稍后可以通过 访问该组`$matches[1]`。
*   `\d{4}_`: 4 位数字后跟一个下划线。
*   `\d{7}_`: 7 位数字后跟一个下划线。
*   `\d{2}_`: 2 位数字后跟一个下划线。
*   `\d{3}_`: 3 位数字后跟一个下划线。
*   `(\d{2})_`: 一组 2 位数字（代表测试台机器编号），后跟一个下划线。稍后可以通过 访问该组`$matches[2]`。
*   `\d{8}_`: 8 位数字（日期），后跟下划线。
*   `\d{6}_`: 6 位数字后跟一个下划线。
*   `\d{4}\.`: 4 位数字后跟一个点。
*   `[A-Z]\d{2}`: 一个大写字母后跟 2 位数字。
*   `\.asd`: 一个点，后跟小写字母`a`,`s`和`d`（扩展名）。
*   `$`: 字符串的结尾。

# ios - 用 CoreGraphics 动态绘制一条线

> ID：14879406
> 
> 赞同：2
> 
> 时间：2013-02-14T16:25:37.823
> 
> 标签：ios, xcode

我正在使用以下方法绘制一条线：

```
- (void)drawLineWithColor:(UIColor *)color andRect: (CGRect)rect{

if (uploadButtonHidden == 2) {
    uploadPhotoButton.hidden = NO;
}

UIGraphicsBeginImageContext(rect.size);
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextTranslateCTM(context, 15, 110);

// set the stroke color and width
CGContextSetStrokeColorWithColor(context, [color CGColor]);
CGContextSetLineWidth(context, 6.0);

// move to your first point
CGContextMoveToPoint(context, 455, coords.y - 140);

// add a line to your second point
CGContextAddLineToPoint(context, coordsFinal.x, coordsFinal.y);

// tell the context to draw the stroked line
CGContextStrokePath(context);

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// Draw image on view
[image drawAtPoint:CGPointZero];
} 
```

如您所见， coords.y 设置了我的行的起点。更改 coords.y 点以更新我的线路时有什么办法吗？例如，如果我有一个每 0.5 秒向 coords.y 添加 50 的方法，我如何在不重绘的情况下更新该行（以防止内存崩溃）？

编辑：

这个方法是这样调用的：

```
UIGraphicsBeginImageContext(self.view.frame.size); 
[self drawLineWithColor:[UIColor   blackColor] andRect:CGRectMake(20, 30, 1476, 1965)]; 
UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
imageViewForArrows = [[UIImageView alloc] initWithImage:image];  
[imageArrowsArray addObject:imageViewForArrows]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:03:27.930

不要绘制到图像中，而是直接绘制到上下文中。我假设这个方法是从你的`drawRect`方法中调用的，在这种情况下已经有一个 value `CGContextRef`。你只需要得到它并吸引它。确保在应用变换或剪辑时使用`CGContextSaveGState`和。`CGContextRestoreGState`

```
- (void)drawLineWithColor:(UIColor *)color andRect: (CGRect)rect{
    CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSaveGState(context);
    CGContextTranslateCTM(context, 15, 110);

    // set the stroke color and width
    CGContextSetStrokeColorWithColor(context, [color CGColor]);
    CGContextSetLineWidth(context, 6.0);

    // move to your first point
    CGContextMoveToPoint(context, 455, coords.y - 140);

    // add a line to your second point
    CGContextAddLineToPoint(context, coordsFinal.x, coordsFinal.y);

    // tell the context to draw the stroked line
    CGContextStrokePath(context);
    CGContextRestoreGState(context);
} 
```

# entity-framework - 我可以在实体框架从数据库加载数据时拦截它吗？

> ID：14879410
> 
> 赞同：0
> 
> 时间：2013-02-14T16:25:52.263
> 
> 标签：entity-framework

我们有一个多层应用程序，其中所有存储库都基于（本土）GenericRepository 基类（其中 T 是模型中的实体），它公开了 GetContext()、GetObjectSet() 等方法. 我们允许从这里继承的存储库访问上下文，因为它们需要调用 Include()，因为我们通过 WCF 服务向上传递数据，因此需要急切地加载所有相关实体。

我们所有的实体都实现了一个具有 Active bool 属性的接口，我们想要做的是拦截查询的执行，并对 Active 属性进行过滤，以便任何查询只返回设置为 true 的实体。

这可以做到吗？在基于 EF 构建的 Lightswitch 中，您可以捕获一个事件，该事件在查询执行的深度被触发，并允许您执行此类过滤。我在 EF 本身中找不到任何允许这样做的东西。

有人有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:39:56.457

我能想到的最好方法是让您的存储库方法接受一个表达式（即`Expression<Func<T, bool>> predicate`）。这样，您可以在实际存储库本身中执行所有查询（因此不允许客户端代码以任何方式访问您的数据层逻辑），您可以`Where`在从存储库方法返回之前添加是活跃的。

我使用的这种风格的一个例子如下：

```
 public IQueryable<T> Grab(Expression<Func<T, bool>> predicate)
   {
     return DbSet.Where(predicate);
   } 
```

其中 DbSet 是您尝试查询的实际表。这样，您可以添加`.Where(x => x.Active)`到它的末尾，让它尚未对数据库执行（谢谢，延迟执行！），但仍然可以获得您正在寻找的确切记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:51:09.377

在 EF 5 中，`Include`是 上的扩展方法`IQueryable`，因此您可以这样做：

```
var query = dbSet.Where( o => o.IsActive ).Include( ... ) 
```

这意味着，您不必`DbSet<T>`从通用存储库中返回 a - 应该可以返回`IQueryable<T>`.

如果这符合您的要求，您可以`Where`在通用存储库方法中添加一个子句：

```
partial class GenericRepository<T>
{
  public IQueryable<T> Query( bool includeInactive = false )
  {
    return ctx.Set<T>().Where( o => includeInactive || o.IsActive );
  }
} 
```

# wix - WiX ICE 验证错误

> ID：14879411
> 
> 赞同：67
> 
> 时间：2013-02-14T16:25:52.013
> 
> 标签：wix, ice-validation

我在本地机器上遇到了一些奇怪的 WiX 问题。问题是间歇性的，但在对解决方案进行了几次重建后，WiX 项目开始引发 ICE 验证错误。

如果我进入我的`AppData\Local\Temp`文件夹并删除所有包含 MSI 的临时文件夹，则解决方案会再次编译。不久之后，问题又开始发生了。必须不断清理临时文件夹不是一个可持续或令人满意的解决方案。

有没有其他人遇到过这个问题？验证错误代码似乎总是 ICE30、ICE38、ICE64 和 ICE91 的组合

更新：

根据要求，以下是最近失败的条目：

> 错误 LGHT0204：ICE38：ICE 内部错误 1002。返回的 API：1615。
> 错误 LGHT0204：ICE38：错误 2235：/OU.AppFramework.Includes.msi，_Profile，UPDATE `Directory`SET `_Profile`= 0
> 错误 LGHT0204：ICE64：ICE 内部错误 1001。返回的 API ：1615。
> 错误 LGHT0204：ICE64：错误 2242：OU.AppFramework.Includes.msi，_Profile，ALTER TABLE `Directory`ADD `_Profile`SHORT TEMPORARY HOLD
> 错误 LGHT0204：ICE91：ICE 内部错误 1001。API 返回：1615。
> 错误 LGHT0204：ICE91：错误 2242： OU.AppFramework.Includes.msi, _Profile, ALTER TABLE `Directory`ADD `_Profile`SHORT TEMPORARY HOLD

有趣的是，这个失败发生在我昨晚离开办公室之前，今天早上我进来的时候解决方案编译OK。由于它似乎集中在由 WiX 构建 MSI 的临时目录上，它可能是锁定文件的构建过程吗？

更新 2：

现在我们又回到了 600 多个错误，大部分是这个错误的重复：

> 错误 LGHT0204：ICE30：ICE 内部错误 100。返回的 API：1615。
> 错误 LGHT0204：ICE30：错误 2235：AppFramework.Includes.msi, _ICE30SFN, SELECT `Directory_Parent`, `Directory`, `DefaultDir`, `_ICE30SFN`, `_ICE30LFN`FROM `Directory`WHERE `Directory`。`Directory`=？和`Directory_Parent`<>？

更新 3：

即使尝试了@limpan 的建议，问题仍然存在。当 light 尝试访问 MSI 时，由于 MSI 输出文件夹被锁定，light 会发出一些警告：

> 警告 549 目录 '\AppData\Local\Temp\2opu3hxf' 正在使用中，无法删除。灯光.exe

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2014-03-12T10:18:14.180

尝试添加`<RunWixToolsOutOfProc>true</RunWixToolsOutOfProc>`到您的 WiX 项目文件。

我们有一段时间遇到同样的问题，并尝试了各种解决方法，包括删除临时文件和设置 msbuild 环境变量。这些似乎都工作了一段时间，但最终（有时几天后）问题会再次出现。

我注意到在我的机器上 devenv.exe 是锁定 light.exe 试图删除的文件的进程。我还偶然发现了一个不相关的[线程](https://stackoverflow.com/questions/16212773/uunable-to-see-wix-project-type-in-visual-studio-2008-2010)，其中提到了这个项目设置，以使 WiX 工具耗尽进程。我认为这值得一试，它似乎已经为我们解决了这个问题（到目前为止......）

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-08-06T10:26:46.147

我也遇到了这个问题，并在我的环境中解决了它。

**简短的回答：**

添加环境变量`MSBUILDDISABLENODEREUSE=1`并重新启动 Visual Studio

**长答案：**

在构建过程中出现了一个警告，因为我太专注于错误，所以我第一次没有看到：

> 删除临时目录失败：C:\Users[username]\AppData\Local\Temp\5[uniqueFolderName] light.exe

我试图手动删除该文件夹，但它正在被另一个进程使用。

事实证明，很多 MSBuild.exe 进程在构建期间启动，然后没有再次关闭。*[您可以在 Stack Overflow 问题msbuild.exe保持打开，锁定文件](https://stackoverflow.com/questions/3919892)*中阅读更多关于原因以及如何改变这种行为的信息。

这个线程：它和这个线程中的解决方案：

我希望这个答案可以帮助别人。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-03-14T15:57:30.200

对于*ICE30: ICE Internal Error 100\. API Returned: 1615*，请试试这个，看看它是否有效：

1.  关闭 Visual Studio 的所有实例（可能只是一个重要的实例，但以防万一）
2.  去`C:\Documents and Settings\\****user id****\\Local Settings\Temp\`。
3.  清除所有看起来像这样的文件夹.. 's12qgaks'。基本上它包含[MSI](http://en.wikipedia.org/wiki/Windows_Installer)文件
4.  打开解决方案并重新编译。

祝你好运！

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-20T23:21:38.857

我也遇到过同样的问题。在项目属性中，转到*Tool Settings*并单击*Suppress ICE validation*。

![在此处输入图像描述](../Images/3f594f3fd33106d8ab2704e28ff2d21c.png)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-23T15:39:17.507

对我来说 MSBUILDDISABLENODEREUSE=1 （或命令行上的 /nr:false ）没有解决问题。但是 <RunWixToolsOutOfProc>true</RunWixToolsOutOfProc> 完成了它的工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-04T17:54:49.247

我遇到过同样的问题。原来是我的防病毒软件（防毒墙网络版）它锁定了由 Light.exe 创建的中间文件，验证过程失败。从病毒扫描中排除临时文件夹或关闭 ICE 验证不是可接受的解决方案。

如果有人有更好的解决方案。我想知道。

# java - 正确的 Java 类结构

> ID：14879414
> 
> 赞同：0
> 
> 时间：2013-02-14T16:25:54.820
> 
> 标签：java, coding-style, refactoring, conventions

我目前正在清理一个大型 Java 代码库，我想知道 Java 类的正确（标准？）结构/顺序是什么。

我的意思是：

*   字段应该`public static final`在类的字段中排在第一位吗？
*   静态初始化器应该在哪里？
*   `private static`辅助方法应该在哪里？

`PrepareStatement`另外，作为一个附带问题：在代码中对 s 进行大型硬编码 SQL 查询是个好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:30:00.910

您应该更担心命名约定、清晰的代码文档和程序的整体正确性（即没有错误），之后您可以担心定义变量、方法等的顺序

[这是 Java 的代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

回答（一些）你的观点：

*   `static initializer`通常出现在课程的开头，如果它恰好出现在变量之后。
*   `private methods`可以到类的末尾（如果变量在末尾，则在变量之前），但这是偏好问题，因为通常阅读代码的人更关心`public methods`类暴露给程序其余部分的内容
*   将 SQL 语句放在程序内部还是存储在外部（例如属性文件）取决于它们更改的频率；但只要你在使用`PreparedStatement`你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:32:45.787

好吧，在这里你会找到 Java 代码约定：[Java 代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)

我真的不喜欢硬编码的 SQL 语句。但是，有时它们是必要的。看看你是否可以将它封装在一个库中（比如hibernate或其他东西），或者至少你可以把它分解成小的sql代码。

**添加**

我还想看看：[How to Write Doc Comments for the Javadoc Tool](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)以维护您的代码有据可查。

# asp.net - 将数据插入到 XML 数据类型的列中

> ID：14879423
> 
> 赞同：2
> 
> 时间：2013-02-14T16:26:21.143
> 
> 标签：asp.net, sql-server, xml

我有一个带有类型列的 SQL Server 数据库`XML`。我一直在寻找使用`INSERT`来自 asp.net 的查询/存储过程来填充它的方法。

到目前为止，我能找到的只是获取 ( `SELECT`) XML 数据并执行`SqlDataReader`/的方法`XMLReader`（例如[这个](http://msdn.microsoft.com/en-ie/library/zh9a9y6s.aspx)例子）

如何从 ASP.NET 填充列？xml 将如下所示：

```
<remarks>
    <remark>
        <author>...</author>
        <date>...</date>
        <content>...</content>
    </remark>
    <remark>
        <author>...</author>
        <date>...</date>
        <content>...</content>
    </remark>
</remarks> 
```

“内容”将由用户在文本框中输入，其他列将使用`DateTime.Now()`和填充`User.Identity.Name`。

我希望能够：

1.  在空的 XML 列中输入第一个备注。
2.  稍后输入其他备注。

这可以做到吗？我无法找到有关此的任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:41:39.577

这应该可以解决 INSERT

```
INSERT INTO YourTable(idCol,xmlCol)
values(1,'<?xml version="1.0" encoding="utf-8"?>
<remarks>
    <remark>
        <author>...</author>
        <date>...</date>
        <content>...</content>
    </remark>
    <remark>
        <author>...</author>
        <date>...</date>
        <content>...</content>
    </remark>
</remarks>') 
```

对于更新，我不会给出比[https://stackoverflow.com/a/1440688/1236044更好的答案](https://stackoverflow.com/a/1440688/1236044)

# java - 获取更新的 JTable 值

> ID：14879426
> 
> 赞同：1
> 
> 时间：2013-02-14T16:26:28.347
> 
> 标签：java, swing, jtable, tablecelleditor, defaulttablemodel

我正在尝试使用 JTable 来更新 Java SWING 应用程序中的用户，目前当我编辑一个单元格时，只有单击另一个单元格从而触发 tableModelListener 才能获得编辑结果。我希望能够在不单击其他单元格的情况下在按钮事件上获取这些更改的值。

我的表定义：

```
DefaultTableModel tableModel = new DefaultTableModel();

table = new JTable(tableModel);

tableModel.addColumn("Key");
tableModel.addColumn("Value");

if (PatientView.getSelected() != null){
    tableModel.addRow(new Object[]{"Name", PatientView.getSelected().getName()});
    tableModel.addRow(new Object[]{"Age", PatientView.getSelected().getAge()});
    tableModel.addRow(new Object[]{"Height", PatientView.getSelected().getHeight()});
    tableModel.addRow(new Object[]{"Weight", PatientView.getSelected().getWeight()});
    tableModel.addRow(new Object[]{"BMI", PatientView.getSelected().getCalculatedBMI()});

} 
```

表监听器

```
tableModel.addTableModelListener(new TableModelListener(){
            @Override
            public void tableChanged(TableModelEvent arg0) {
                int row = arg0.getFirstRow();
                int column = arg0.getColumn();
                Object data = tableModel.getValueAt(0, 1);
                System.out.println(data);
            }
        }); 
```

按钮动作监听器

```
okButton.addActionListener(new ActionListener() {
                    public void actionPerformed(ActionEvent arg0) {
                        Vector data = tableModel.getDataVector();
                        System.out.println(table.getValueAt(0, 1));
                        System.out.println(data);
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:28:27.990

> 我希望能够在不单击其他单元格的情况下在按钮事件上获取这些更改的值。

请参阅[表格停止编辑](http://tips4java.wordpress.com/2008/12/12/table-stop-editing/)。

# python - python csv扭曲告诉

> ID：14879428
> 
> 赞同：2
> 
> 时间：2013-02-14T16:26:34.210
> 
> 标签：python, csv, tell

我试图在阅读 csv 文件时找到我所在位置的百分比。我知道如何使用带有文件对象的 tell() 来执行此操作，但是当我使用 csv.reader 读取该文件对象时，然后在我的阅读器对象中的行上执行 for 循环，tell() 函数总是返回，好像它位于文件的末尾，无论我在循环中的哪个位置。我怎样才能找到我在哪里？

当前代码：

```
with open(FILE_PERSON, 'rb') as csvfile:
    spamreader = csv.reader(csvfile)
    justtesting = csvfile.tell()
    size = os.fstat(csvfile.fileno()).st_size
    for row in spamreader:
        pos = csvfile.tell()
        print pos, "of", size, "|", justtesting 
```

我在那里扔了“justtesting”只是为了证明tell()在我开始我的for循环之前确实返回0。

这将为我的 csv 文件中的每一行返回相同的内容：579 of 579 | 0

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:33:19.840

该`csv`库在读取文件时会使用缓冲区，因此文件指针会跳转到更大的块中。它不会*逐行*读取您的文件。

它以更大的块读取数据以使解析更容易，并且由于换行符可以嵌入引号中，因此无法逐行读取 CSV 数据。

如果你*必须*给出进度报告，那么你需要预先计算行数。仅当您的输入 CSV 文件未在列值中嵌入换行符时，以下内容才有效：

```
with open(FILE_PERSON, 'rb') as csvfile:
    linecount = sum(1 for _ in csvfile)
    csvfile.seek(0)
    spamreader = csv.reader(csvfile)
    for line, row in enumerate(spamreader):
        print '{} of {}'.format(line, linecount) 
```

还有其他计算行数的方法（请参阅[如何在 Python 中廉价地获取行数？](https://stackoverflow.com/questions/845058/how-to-get-line-count-cheaply-in-python)*）*，但由于您将读取文件以将其作为 CSV 进行处理，因此您不妨使用打开的文件为此。我不确定将文件作为内存映射打开，然后再次将其作为普通文件读取是否会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:42:45.190

`csvreader`文档说：

> ... csvfile 可以是任何支持迭代器协议并在每次调用其 next() 方法时返回一个字符串的对象...

因此，对 OP 的原始代码进行了小改动：

```
import csv
import os
filename = "tar.data"
with open(filename, 'rb') as csvfile:
    spamreader = csv.reader(csvfile)
    justtesting = csvfile.tell()
    size = os.fstat(csvfile.fileno()).st_size
    for row in spamreader:
        pos = csvfile.tell()
        print pos, "of", size, "|", justtesting
###############################################
def generator(csvfile):
    # readline seems to be the key
    while True:
        line = csvfile.readline()
        if not line:
            break
        yield line
###############################################
print
with open(filename, 'rb', 0) as csvfile:
    spamreader = csv.reader(generator(csvfile))
    justtesting = csvfile.tell()
    size = os.fstat(csvfile.fileno()).st_size
    for row in spamreader:
        pos = csvfile.tell()
        print pos, "of", size, "-", justtesting 
```

对我的测试数据运行它会得到以下结果，表明两种不同的方法会产生不同的结果。

```
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0
224 of 224 | 0

16 of 224 - 0
32 of 224 - 0
48 of 224 - 0
64 of 224 - 0
80 of 224 - 0
96 of 224 - 0
112 of 224 - 0
128 of 224 - 0
144 of 224 - 0
160 of 224 - 0
176 of 224 - 0
192 of 224 - 0
208 of 224 - 0
224 of 224 - 0 
```

我在上设置了零缓冲，`open`但没有任何区别，事情`readline`在生成器中。

# eclipse - 如何让 eclipse xsd/xml 内容辅助显示来自 xsd 的注释？

> ID：14879429
> 
> 赞同：2
> 
> 时间：2013-02-14T16:26:36.780
> 
> 标签：eclipse, xsd, content-assist

XML 验证得很好。Content Assist 显示有效元素。问题是我想记录每个元素/属性，但是内容辅助中没有显示注释。这可能吗，还是我应该依靠我的梦想来提供我正在寻找的满足感？

# sql - 在 SQL Server 上创建的主键未识别

> ID：14879431
> 
> 赞同：1
> 
> 时间：2013-02-14T16:26:47.537
> 
> 标签：sql, sql-server, database, create-table

```
CREATE TABLE sampProduct
(
    Product_ID   VARCHAR(15) NOT NULL,
    Supplier_ID  INT NOT NULL,
    Category_ID  INT NOT NULL,
    Unit_Price   DECIMAL(10, 2)
    PRIMARY KEY(Product_ID)
)
CREATE TABLE sampMachine
(
    M_Product_ID   VARCHAR(15) NOT NULL,
    Serial_No      VARCHAR(15) NOT NULL,
    Machine_Model  VARCHAR(20),
    PRIMARY KEY(M_Product_ID, Serial_No),
    FOREIGN KEY(M_Product_ID) REFERENCES sampProduct(Product_ID)
)
CREATE TABLE sampService
(
    Service_ID  VARCHAR(15) NOT NULL,
    Serial_No   VARCHAR(15) NOT NULL,
    Complaint   VARCHAR(40) NOT NULL,
    PRIMARY KEY(Service_ID),
    FOREIGN KEY(Serial_No) REFERENCES sampMachine(Serial_No)
) 
```

机器是产品的子类型。M_ProductID 通过该键引用父表 Product 的主键。Serial_No 用于唯一标识一台机器。问题是，我想从 Serial_No 创建一个外键到服务表中，因为我想跟踪机器的序列号（这是因为，例如，我们可以为每个型号或类型拥有很多机器，但每个其中有其唯一的序列号），但创建时出错。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:37:43.190

创建外键的要求之一是您引用的表必须在要引用的列上具有唯一键。因此，在您的示例中，为了使其正常工作，您需要 sampMachine (Serial_No) 上的唯一键，以便您可以仅使用 Serial_No 为其创建外键。您现在拥有它的方式需要在表 sampService 中使用 M_Product_Id 并将其添加到外键定义中。

```
create table sampService(

M_Product_ID varchar(15) not null,
Service_ID varchar(15) not null,
Serial_No varchar(15) not null,
Complaint varchar(40) not null,
primary key (Service_ID),
foreign key (Serial_No) references sampMachine(m_Product_Id, Serial_No)
) 
```

# c++ - GDB 报告崩溃但程序运行正常

> ID：14879432
> 
> 赞同：3
> 
> 时间：2013-02-14T16:26:53.563
> 
> 标签：c++, linux, gdb

我有一个程序，当我从终端（没有 GDB）运行时会打印一些输出。假设输出看起来像

```
welcome to CMP simulator
initializing
finish initialization
now run
goodbye 
```

现在，当我想使用 GDB 时，程序会给出一个 PID，然后我用它来附加到 GDB。假设程序的输出现在看起来像

```
welcome to CMP simulator
gdb - 5932    (Run this command on another terminal and type "continue" at GDB prompt) 
```

当程序等待 SIGCONT 时，我`gdb - 5932`在另一个终端上运行。当我输入“继续”时，GDB 报告如下崩溃：

```
Loaded symbols for /home/mahmood/results/temp/libCMP_iface_gcc.so
0x00007fd3a499fb7b in raise (sig=<optimized out>) at ../nptl/sysdeps/unix/sysv/linux/pt-raise.c:42
42      ../nptl/sysdeps/unix/sysv/linux/pt-raise.c: No such file or directory.
(gdb) c
Continuing.

Program received signal SIGSTOP, Stopped (signal).
[Switching to Thread 0x7fd3a343f700 (LWP 21014)]
0x00007fd3a408e303 in __GI___poll (fds=<optimized out>, nfds=<optimized out>, timeout=<optimized out>)
     at ../sysdeps/unix/sysv/linux/poll.c:87
87      ../sysdeps/unix/sysv/linux/poll.c: No such file or directory.
(gdb) bt
#0  0x00007fd3a408e303 in __GI___poll (fds=<optimized out>, nfds=<optimized out>, timeout=<optimized out>)
     at ../sysdeps/unix/sysv/linux/poll.c:87
#1  0x00007fd3a4c0fc4c in ?? () from /home/mahmood/simics-3.0.31/amd64-linux/bin/libsimics-common.so
#2  0x00007fd3a4997e9a in start_thread (arg=0x7fd3a343f700) at pthread_create.c:308
#3  0x00007fd3a4099cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#4  0x0000000000000000 in ?? ()
(gdb) 
```

此时，程序仍在等待SIGCONT。

回溯是什么意思？正如您在没有 GDB 的情况下看到的那样，程序在输出上打印更多行。但是 GDB 显示崩溃。我的猜测是创建线程存在问题。

任何反馈表示赞赏。

更新：

如果我再次运行“继续”，我会在 GDB 上看到相同的输出

```
 (gdb) c
 Continuing.

 Program received signal SIGSTOP, Stopped (signal).
 0x00007f09b653c303 in __GI___poll (fds=<optimized out>, nfds=<optimized out>,  timeout=      <optimized out>)
    at ../sysdeps/unix/sysv/linux/poll.c:87
 87      in ../sysdeps/unix/sysv/linux/poll.c
 (gdb) bt
 #0  0x00007f09b653c303 in __GI___poll (fds=<optimized out>, nfds=<optimized out>, timeout=<optimized out>)
     at ../sysdeps/unix/sysv/linux/poll.c:87
 #1  0x00007f09b70bdc4c in ?? () from /home/mahmood/simics-3.0.31/amd64-linux/bin/libsimics-common.so
 #2  0x00007f09b6e45e9a in start_thread (arg=0x7f09b58ed700) at pthread_create.c:308
 #3  0x00007f09b6547cbd in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
 #4  0x0000000000000000 in ?? ()
 (gdb) 
```

系统是ubuntu 12.04 amd64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:09:12.420

GDB 没有显示崩溃，SIGSTOP 只是意味着程序已停止，您只需要使用 gdb 命令“继续”继续它，或者只是要求 GDB 使用“sig SIGCONT”发送信号

我希望我能帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T12:45:26.453

> pt-raise.c：没有这样的文件或目录

可以通过从源重建 gdb 来修复此错误

# asp.net - 将 Web 应用程序部署到我的本地 IIS 时出错

> ID：14879434
> 
> 赞同：4
> 
> 时间：2013-02-14T16:27:05.123
> 
> 标签：asp.net, visual-studio-2010, iis, iis-7, web-deployment

我正在将我的应用程序发布到本地**IIS**，但在浏览器中出现错误：

**暂停服务**

http错误503服务不可用。

我去了我的**IIS**并注意到“ **DefaultAppPool** ”停止，再次重新启动并尝试再次访问该应用程序并出现同样的错误并且应用程序池再次停止。

然后我去了**事件查看器**，我收到了这个错误：

应用程序池“DefaultAppPool”的工作进程在尝试从文件“\?\C:\Windows\Microsoft.NET\Framework\v4.0.30319\CONFIG\ 读取配置数据时遇到错误“由于权限不足而无法读取配置文件” machine.config'，行号'0'。数据字段包含错误代码。

有什么帮助吗？？

# css - CSS在html元素和固定元素上滚动最小宽度

> ID：14879435
> 
> 赞同：0
> 
> 时间：2013-02-14T16:27:06.283
> 
> 标签：css, position, fixed

试试下面的代码：

```
<!DOCTYPE html>
<html style="min-width:600px; overflow:auto;">
        <body style="background:grey; padding:0px; margin:0px;">
                <div style="text-align:right;">
                     this is some text
                </div>
            <div id="footer" style="
                    background:yellow;
                    position:fixed;
                    height: 100px;
                    width:100%;
                    min-width: 600px;
                    text-align:right;
                    bottom:0px;
                    ">
                    footer text
            </div>
        </body>
</html> 
```

所以当我让浏览器窗口的宽度小于 600px 时，如预期的那样，窗口底部会出现一个水平滚动条。当我向右滚动时，“这是一些文本”这句话会滚动到视图中，这很棒。但是，短语“页脚文本”不会滚动到视图中，这就是问题所在。

当我将窗口滚动条向右拖动时，如何让“页脚文本”和“这是一些文本”滚动到视图中？黄色页脚必须始终出现在网站底部。

我更喜欢一个干净的 CSS 解决方案。如果绝对必要，我会接受 javascript 解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:32:25.830

这是因为对于`fixed`元素，包含块不是 en 元素而是视口（参见[http://www.w3.org/TR/CSS2/visuren.html#fixed-positioning](http://www.w3.org/TR/CSS2/visuren.html#fixed-positioning)）

您应该尝试这里描述的使用`absolute`定位的方法：http: [//alistapart.com/article/footers](http://alistapart.com/article/footers)

OP 说：
谢谢。我用jquery做`$(window).scroll(function(){$('#footer').css('left', parseInt(-1*$(window).scrollLeft();)+'px');});`我想这很容易

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:55:09.410

取出第二个 div 的最小宽度。无论视口的大小如何，这将允许页脚文本始终显示。

# hash - 在节点定义中使用哈希并传递给模板

> ID：14879437
> 
> 赞同：1
> 
> 时间：2013-02-14T16:27:17.867
> 
> 标签：hash, puppet

我正在努力使它正常工作并且不明白我要去哪里错了，有人可以指导我如何纠正吗？

基本上我想在我的nodes.pp中获取一个数组，然后我的模板文件通过循环遍历它并编写每个元素的一行来使用它：

```
nodes.pp:
    node test{
        net::addr { 'routing':
          $routes = {
            route1 => {
                address => '172.29.54.70',
                netmask => '255.255.255.0',
                gateway => '172.29.54.65',
                dev     => 'eth0',
            },
            route2 => {
                address => '192.168.1.3',
                netmask => '255.255.255.0',
                gateway => '192.168.1.1',
                dev     => 'eth3',
            },
          }
        }
} 
```

当我运行 puppet 客户端时，我不断收到以下信息：

错误：无法从远程服务器检索目录：服务器上的错误 400：无法解析环境生产：“=”处的语法错误；预期在节点 test.myincorp.net 上的 /etc/puppet/manifests/nodes/test.pp:3 处的“}”

地址.pp

```
define net::addr (
  $address='',
  $netmask='',
  $gateway='',
  $dev='',
) {

  file { "route-${name}":
    ensure  => 'present',
    mode    => '0644',
    owner   => 'root',
    group   => 'root',
    path    => "/etc/sysconfig/network-scripts/route-${name}",
    content => template('network/addr.erb'),
}
} 
```

模板：addr.erb：

```
<% routes.each do |route| -%>
  <%= route['address'] %>  <%= route['netmask'] %> <%= route['gateway'] %> <%= route['dev'] %>
<% end -%>
<% end -%>
<% end -%> 
```

有人可以帮我解决上述问题吗？

谢谢丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T00:47:14.263

我相信这里的实际问题是在资源定义中使用变量 ( `$routes`)：`$routes = { ... }`您必须在资源定义中设置键/值对，而不是使用`routes => { ... }`.

但实际上我会完全推荐一条不同的路线：你见过[puppet-network](https://github.com/razorsedge/puppet-network)模块吗？它会自动为您创建静态路由文件，因此您不必自己实现任何此功能。例如，puppet-network 使用以下代码实现了这一点：

```
network::route { "eth0":
  address => [ "192.168.2.0", "10.0.0.0", ],
  netmask => [ "255.255.255.0", "255.0.0.0", ],
  gateway => [ "192.168.1.1", "10.0.0.1", ],
} 
```

[在GitHub](https://github.com/razorsedge/puppet-network)或[PuppetForge](https://forge.puppetlabs.com/razorsedge/network)上查看更多详细信息

# android - Android Phonegap 2.2 网络连接：找不到类

> ID：14879438
> 
> 赞同：2
> 
> 时间：2013-02-14T16:27:20.353
> 
> 标签：android, cordova, classnotfound

我最近将我的应用程序从 Phonegap 1.6 升级到了 2.2。我已经重构了所有东西（例如`Plugin`--> `CordovaPlugin`）并且我也在使用新的`config.xml`.

该应用程序可以编译和构建，但是我经常在 logcat 中遇到错误和错误对话框。对话框说`[ERROR] Error initializing Cordova: Class not found`。

logcat 错误是： `Line 6048 : Error initializing Network Connection: Class not found`

我会错过什么？该问题发生在多个设备上。

**更新**

我已经将网络状态插件的 config.xml 从`Network Status`更改为`NetworkStatus`. 上面写着：`<plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T00:35:01.557

我遇到了这个问题，并通过将以下内容添加到`config.xml`：

```
<plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/> 
```

并将其添加到清单文件中：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

我最初把它们拿出来是因为我“知道”我的应用程序不会使用任何通信。我忘记了模拟器与 ADK 的“通信”。

当我将项目转换为“生产”时，我会去掉这两条线，以便应用程序为 Google Play 做好准备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T23:37:08.683

我在使用 phonegap 3.x 时遇到了这个问题，问题原来是 phonegap 没有正确安装插件，或者他们只是在路上搞砸了。基本上，当您安装插件并为平台构建时，它会从 plugins/org.apache.cordova.core.specific-plugin/www 获取 javascript 文件，并将它们放在 platform/android/assets/www/plugins/org.apache 中。 cordova.core.specific-plugin/www 然后它获取Java文件（或iOS的目标C）并将它们放入platforms/android/src/org/apache/cordova/specificplugin

所有这些都由 plugins/org.apache.cordova.core.specific-plugin/plugin.xml 指定。如果您查看 plugins.xml，您应该会看到如下内容：

```
<source-file src="src/android/NetworkManager.java" target-dir="src/org/apache/cordova/networkinformation" /> 
```

所以这告诉你，在platforms/android/src/org/apache/cordova/networkinformation中，应该有NetworkManager.java。并且可以从 plugins/org.apache.cordova.core.network-information/src/android/NetworkManager.java 复制该文件

现在所有这些都应该自动发生，而无需触及平台文件夹。但是，如果它搞砸了，您可以通过将正确的 java 文件复制到正确的文件夹中来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T03:16:42.507

config.xml 中的以下行适用于`cordova 6.2`android

```
<plugin name="cordova-plugin-network-information" value="org.apache.cordova.networkinformation"/> 
```

该名称应与您的插件包含的名称相同。您可以在以下路径的项目文件夹中找到它`plugins/name-of-the-plugin/package.json`。该值应该是插件的包名称，可以在本机实现文件中找到。

# android - 通过支持库渲染脚本

> ID：14879439
> 
> 赞同：11
> 
> 时间：2013-02-14T16:27:20.800
> 
> 标签：android, android-support-library, renderscript

在我看来，android 有一个包含 Renderscript 支持的 android.support.v8 包。问题是，这似乎没有在任何地方记录 -[支持库文档](http://developer.android.com/tools/extras/support-library.html)没有说明 v8 包，只有 v4 和 v13。

该软件包是否在所有 API 级别 8 及以上的设备上都支持，并且可以在生产中安全使用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T16:54:06.283

它还没有生产质量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-10-22T18:42:28.033

我的 Android 工具包含以下文件：

```
./build-tools/18.1.0/renderscript/lib/renderscript-v8.jar
./build-tools/18.1.1/renderscript/lib/renderscript-v8.jar 
```

将它们放在项目的 libs/ 目录中将导致在 Eclipse 和 ant 中构建工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-09-27T13:22:58.443

面向 Google 员工的 PSA：[RenderScript 现在是 Android 支持库的一部分](http://android-developers.blogspot.com/2013/09/renderscript-in-android-support-library.html)。您可以在 Android 2.2+ 上使用它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-08T06:19:41.393

我有 eclipse、android sdk 工具 22.6.3、android 平台工具 19.0.1，我将这两个项目都设置为 API 19 android 4.4.2。

我能够编译并运行 hellocompute（来自 android 19 的示例）并希望将其更改为 android support v8 的东西。

以下步骤对我有用：

1.将android构建目标设置为4.4.2 api 19。

2.将“rendersrcipt-v8.jar”添加到android构建路径中的库

3.在 project.properties 中设置类似的东西

```
"target=android-19
 renderscript.target=19
 renderscript.support.mode=true
 sdk.buildtools=19.0.3" 
```

4.注释掉以下导入行：

```
import android.renderscript.RenderScript;
import android.renderscript.Allocation; 
```

并导入

```
import android.support.v8.renderscript.*; 
```

5.清理项目并重建。

# sql - 无法在 MS Visual Studio 2010 中执行 ConnectionString

> ID：14879441
> 
> 赞同：0
> 
> 时间：2013-02-14T16:27:27.493
> 
> 标签：sql, sql-server, vb.net, web-config, connection-string

过去一周我一直坚持这一点，如果你们能提供帮助，我会很高兴。

我正在使用 MS Visual Studio 2010 开发 vb。我目前在名为“app_data”的 asp.net 文件夹下有一个数据库。

我正在尝试通过 web.config 文件执行 connectionString 命令。

网络配置：

```
<connectionStrings>
    <add name="mysqlcon" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\public.mdf;Integrated Security=True;User Instance=True"
      providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

主要代码：

```
 Dim a As String = ConfigurationManager.ConnectionStrings("mysqlcon").ConnectionString
        Dim conn As New MySqlConnection(a)

        Try

            conn.Open()
            MsgBox("good")

            conn.Close()
        Catch ex As MySqlException
            MsgBox(ex.Message)
        Finally
            conn.Dispose()

        End Try 
```

我收到以下错误（第 10 行突出显示）：

```
Server Error in '/MP' Application.

Keyword not supported.

Parameter name: attachdbfilename

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentException: Keyword not supported.
Parameter name: attachdbfilename

Source Error:

Line 8:      Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
Line 9:          Dim a As String = ConfigurationManager.ConnectionStrings("mysqlcon").ConnectionString
Line 10:         Dim conn As New MySqlConnection(a)
Line 11: 
Line 12: 

Stack Trace:

[ArgumentException: Keyword not supported.
Parameter name: attachdbfilename]
   MySql.Data.MySqlClient.MySqlConnectionStringBuilder.ValidateKeyword(String keyword) +108
   MySql.Data.MySqlClient.MySqlConnectionStringBuilder.set_Item(String keyword, Object value) +18
   System.Data.Common.DbConnectionStringBuilder.set_ConnectionString(String value) +185
   MySql.Data.MySqlClient.MySqlConnection.set_ConnectionString(String value) +289
   MySql.Data.MySqlClient.MySqlConnection..ctor(String connectionString) +26
   test.Button1_Click(Object sender, EventArgs e) in C:\Users\God\Desktop\VB\MP\test.aspx.vb:10
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

如果你们能提供帮助会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:30:38.440

user2072778，试试这个，它可能会工作：

```
<add name="mysqlcon" connectionString="Data Source=|DataDirectory|public.mdf" providerName="System.Data.SqlClient" /> 
```

这是搜索此主题的好页面：http: [//www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-13T08:55:40.650

您正在尝试使用**MySQL**连接对象进行连接：

> Dim conn 作为新的 MySqlConnection(a)

使用**Microsoft SQL Server**连接字符串：

> ```
> <add name="mysqlcon" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\public.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient" /> 
> ```

他们只是不匹配。如果要连接到 MySQL 数据库，请相应地更改连接字符串。

# intuit-partner-platform - 为 JournalEntry 或 Invoice 设置 ID

> ID：14879442
> 
> 赞同：1
> 
> 时间：2013-02-14T16:27:29.693
> 
> 标签：intuit-partner-platform

我正在尝试使用 IPP.Net 插入发票、贷项通知单和发票。我如何知道 AccountID、ClassID 或 EntityID 是什么？当我使用 Web 连接器编写以前的接口时，我能够通过 FullName 指定这些东西。我是否需要进行某种类型的查询以获取所有 ID 以供将来使用？如果我这样做，ID 是否会通过任何过程（例如重新索引）更改，还是 ID 是永久性的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:25:46.767

**如果您正在与 QuickBooks Online 集成：**

是的，QuickBooks Online 的 IPP API 只接受 Id 值。您将必须[查询对象](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/0100_Calling_Data_Services/0030_Retrieving_Objects)，以便获取它们的 Id 值，以便在未来的发票/贷项通知单添加请求中使用它们。

**如果您正在与 Windows 版 QuickBooks 集成：**

适用于 Windows 的 QuickBooks 桌面的 IPP API 可以接受名称值或 ID 值。因此，您可以[查询](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0500_QuickBooks_Windows/0100_Calling_Data_Services/0015_Retrieving_Objects)以获取 Id 值，也可以像在 SDK 中那样使用名称。

**有几点值得注意：**

Intuit 发布的下一个版本的数据服务 (v3) 可能会在 2013 年夏季/秋季发布。v3 数据服务将*只接受 Id 值*，就像 QuickBooks Online 在 v2 中所做的那样。因此，如果您想提前计划未来，请开始查询。:-)

关于这一点：

> 如果我这样做，ID 是否会通过任何过程（例如重新索引）更改，还是 ID 是永久性的？

Id 值是永久的——它们永远不应该改变。*唯一的例外*是，如果 Intuit 端的某些事情变得非常糟糕，并且他们重​​置了某人的同步管理器以强制 QuickBooks 同步到新的在线领域。但这通常不应该在生产中发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:04:51.247

我尝试了几件事，我似乎找到了答案。Id 属性不会通过 gridview 的 Autogenerate 自行绑定。这似乎是因为它是一个类而不是一个简单的属性。您必须专门绑定 Id.value。

# cloud9-ide - Cloud9“本地”和“云”代码完成不同。

> ID：14879443
> 
> 赞同：2
> 
> 时间：2013-02-14T16:27:26.690
> 
> 标签：cloud9-ide

当我在 c9.io 使用 Cloud9 的在线版本时，我可以看到 Node.js api 和其他带有文档的 javascript 的“智能和性感”上下文完成。但是，如果我从 github.com/ajaxorg/cloud9 在本地安装 cloud9，我只会简单地建议使用过的单词。

智能完成是专有在线版本的功能还是我的本地安装有问题？

# jquery - 如何禁用对一列的过滤并将其保留用于 jQuery 数据表中的其他列？

> ID：14879444
> 
> 赞同：11
> 
> 时间：2013-02-14T16:27:33.670
> 
> 标签：jquery, filter, datatables

我是 jQuery 新手，我需要知道是否有任何方法可以禁用对 jQuery 数据表中的一列的过滤？我的数据表有 5 列，我需要禁用最后一列的过滤。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-14T16:56:45.977

[使用`bSearchable`标志](http://datatables.net/usage/columns#bSearchable)。从文档：

```
// Using aoColumnDefs
$(document).ready( function() {
  $('#example').dataTable( {
    "aoColumnDefs": [
      { "bSearchable": false, "aTargets": [ 0 ] }
    ] } );
} );

// Using aoColumns
$(document).ready( function() {
  $('#example').dataTable( {
    "aoColumns": [
      { "bSearchable": false },
      null,
      null,
      null,
      null
    ] } );
} ); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-02T20:31:13.680

你也可以这样做：

```
 $('#ProductsTable').dataTable({
        "lengthMenu": [[20, 50, -1], [20, 50, "All"]],
        "pageLength": 20,
        "columnDefs": [
          { "orderable": false, "targets": [-1, 1] },
          { "searchable": false, "targets": [-1, 1] }
        ]
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-13T15:35:07.843

```
 var mSortingString = [];
var disableSortingColumn = 4; 
mSortingString.push({ "bSortable": false, "aTargets": [disableSortingColumn] });

    $(document).ready(function () {
        var table = $('#table').dataTable({
            "paging": false,
            "ordering": true,
            "info": false,
            "aaSorting": [],
            "orderMulti": true,
            "aoColumnDefs": mSortingString

        });
     }); 
```

我花了很长时间试图弄清楚这应该是一项简单的任务，因此对于仍在寻找的人来说，只需添加前 3 行并引用您要禁用的列，我的是第 5 列。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-01-12T13:50:24.800

以下是如何使用[Datatable ColumnDef](https://datatables.net/reference/option/columnDefs)禁用多列的全局搜索过滤。

```
var datatable = $('#datatable').DataTable({
    "deferRender": true,

    "columnDefs": [ 
        { targets: 0, searchable: true },
        { targets: [1,2], searchable: true },
        { targets: '_all', searchable: false }
    ]
}); 
```

这将启用对第 0、1 和 2 列索引的搜索，并禁用其余所有列。规则自上而下优先适用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-11T21:54:41.783

这也有效。只需将数字 4 更改为您想要的列号：

```
 var table = $('#mytable').DataTable(
        {
            initComplete: function () {
                this.api().columns().every(function () {
                    var column = this;
                    if (column[0][0] == 4) {
                        console.log(column);
                        $(column.footer()).html('');
                    }
                });
            },
        }
    ); 
```

# ms-access - 获取从 URL 到 MS Access 的 Dynamics CRM 联系人链接

> ID：14879451
> 
> 赞同：1
> 
> 时间：2013-02-14T16:27:53.163
> 
> 标签：ms-access, dynamics-crm-2011, dynamics-crm

我正在尝试找到一种方法来匹配 MS Access 表和 Dynamics CRM 帐户列表中的帐户名称，并将帐户下列出的联系人拉到 MSAccess 中。

例如

MS 访问表：**AccountContacts**

```
CompanyName      Contact   CRMLink
TavernCompany    --         -- 
```

CRM 账户实体

```
 Account Name: Tavern Company
 Contact1:      Chad M Last
 Contact2:      Miller L Light 
```

所以我试图拉出 Contact1 的链接，因此生成的访问表将是

```
CompanyName      Contact           CRMLink
TavernCompany    Chad M Last       http://Somethinghered&pagetype=entityrecord 
```

想法是 Access 的用户必须能够单击链接并在 Dynamics CRM 中查看联系人

任何有关将 Access 与 CRM 连接的信息都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T19:45:32.660

根据 MSDN，格式为：

```
http://myhost.com/ORGNAME/main.aspx?etn={ENTITYNAME}&pagetype=entityrecord&id={ENTITYGUID} 
```

用值替换`{ENTITYNAME}`和`{ENTITYGUID}`。

# maven - 创建 Maven Archetype：有没有办法指定默认的 groupId

> ID：14879455
> 
> 赞同：5
> 
> 时间：2013-02-14T16:28:13.647
> 
> 标签：maven, maven-3, maven-archetype

我创建了一个使用`create-from-project`. 有没有办法指定默认值`groupId`？

此原型仅供内部使用，默认`groupId`会节省一些击键。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:36:10.643

您可以通过指定一个[`propertyFile`](http://maven.apache.org/archetype/maven-archetype-plugin/create-from-project-mojo.html#propertyFile)

此属性文件可能包含一些属性，包括默认 groupId。所以像这样（在一个名为 something.properties 的文件中）：

```
groupId=com.company 
```

并创建原型

```
mvn archetype:create-from-project -Darchetype.properties=../something.properties 
```

[这里的](http://maven.apache.org/archetype/maven-archetype-plugin/examples/create-with-property-file.html)另一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-25T06:44:05.393

如果由于公司约定而想使用“默认” groupId，您可以直接在 archetype-resources 目录的 pom.xml 中定义它（只需将 ${groupId} 替换为您想要的值。所以没关系原型的用户指定了什么。

# c - 将结构传递给函数并添加元素

> ID：14879468
> 
> 赞同：1
> 
> 时间：2013-02-14T16:28:40.800
> 
> 标签：c, struct

我是 C 新手。我正在尝试将结构列表传递给函数，并在该函数中填充列表。代码如下：

```
#include <stdio.h>
#include <stdlib.h>

struct Abc {
    int test;
    struct Abc *next;
};

void demo_fill(struct Abc *data);

int main(int argc, char **argv) {
    struct Abc *db = NULL;
    demo_fill(db);
    printf("%d\n",db->test);
    return 0;
}

void demo_fill(struct Abc *data) {
    int i;
    for( i = 0; i < 5; i++ ) {
       struct Abc *new;
       new = malloc(sizeof(struct Abc));
       new->test = i;
       new->next = data;
       data = new;
   }  
} 
```

运行此操作时，会发生“分段错误（核心转储）”错误，因为当我尝试打印第一个元素时结构仍然为 NULL。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:29:55.247

您正在按值传递指针。如果要更改调用者指针的值，则需要将指针传递给指针：

```
int main(int argc, char **argv) {
    struct Abc *db = NULL;
    demo_fill(&db);
    printf("%d\n",db->test);
    return 0;
}

void demo_fill(struct Abc **data) {
    int i;
    for( i = 0; i < 5; i++ ) {
       struct Abc *new;
       new = malloc(sizeof(struct Abc));
       new->test = i;
       new->next = *data;
       *data = new;
   }  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:29:59.493

将数据分配给 new 将无效。`data`是指针的本地副本。传递一个双指针来解决这个问题。像这样的东西：

```
void demo_fill(struct Abc** data) {
    int i;
    for( i = 0; i < 5; i++ ) {
       struct Abc *new;
       new = malloc(sizeof(struct Abc));
       new->test = i;
       new->next = *data;
       *data = new;
   }  
} 
```

当然，您必须在 main 中传递指向 db 的指针：

```
demo_fill(&db) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:36:27.130

您可以像其他两个答案所说的那样将指针传递给指针，所以我只是指出您可能还会考虑的**另**一种选择：您可以将一个结构用于列表，另一个用于入口链接，而不是使用单个结构：

```
struct link {
    int test;
    struct link* next;
};
struct list {
    struct link* first;
};

void demo_fill(struct list* data); 
```

然后，您可以修改列表的第一个条目而无需考虑`**`语法。

# ssis - 如何在开发机器上使用生产连接字符串模拟 SSIS

> ID：14879474
> 
> 赞同：0
> 
> 时间：2013-02-14T16:28:54.483
> 
> 标签：ssis, database-connection

设想 ：

生产中的 SSIS 使用 SQL Server 的生产连接和实例名称。

一旦我在我的机器上打开相同的 SSIS，连接就会中断，因为我们无权访问 prod。

我显然可以更改连接并使用我的本地开发人员，但这意味着每当我部署到生产环境时，我都必须要求我的网络人员打开 SSIS 并将连接从我的本地更改回生产环境，对于每个 SQL 也是如此任务。

有没有办法让我在我的开发设备上模拟生产连接，这样我就不必触摸来自 prod 的连接字符串，也可以进行调试/修改并将其上传回生产环境？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:35:05.783

您需要使用 SSIS **`Package Configurations`**，它允许您将所有可配置值存储在以下选项之一中：

*   *XML 配置文件*
*   *环境变量*
*   *注册表项*
*   *父包变量*
*   *SQL Server 表*

在 MSDN 上阅读有关包配置的更多信息，以下文档链接参考*`SSIS 2012`*.

[*包配置*](http://msdn.microsoft.com/en-us/library/ms141682.aspx)

我更喜欢*`SQL Server table`*它，因为它提供了使用 T-SQL 查询轻松更新值的灵活性。开发包时，您将选择您认为可能需要跨环境不同值的连接管理器和变量。创建包配置后，您可以移动包并简单地修改包配置 XML 文件或 SQL Server 表中的值，而无需接触包 ( *`.dtsx`*)

有关如何使用包配置的详细步骤，请参阅以下 SO 问题的答案：

*[使用 2 种不同的配置运行 SSIS 包](https://stackoverflow.com/questions/10177578/run-ssis-package-with-2-different-configurations)*

# javascript - Javascript 成语： if (x === +x) 做什么？

> ID：14879479
> 
> 赞同：4
> 
> 时间：2013-02-14T16:29:03.207
> 
> 标签：javascript, arrays, idioms, triple-equals

阅读`underscore.js`我的源代码偶然发现了[以下行](https://github.com/documentcloud/underscore/blob/0ab5bdccd41e55fb02331ec7d2d0053e0bdac9e3/underscore.js#L79)：

```
... if (obj.length === +obj.length) { ... 
```

这对我来说有点令人困惑。这里实际比较的是什么？我相信它与检测原生数组有关，但无法弄清楚实际发生了什么。做什么的`+`？为什么使用`===`而不是`==`？这种风格的性能优势是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:31:21.163

将`+`值强制为数字（很像`!!`将其强制为布尔值）。

```
if (x === +x) 
```

...可用于确认其`x`本身包含一个整数值。在这种情况下，可能要确保 的长度属性`obj`是一个整数并且没有被字符串值覆盖，因为如果`obj`将其视为数组，这可能会破坏迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:30:07.530

这是检查是否`obj.length`是[Number](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)的愚蠢（IMO）方式。这个更好：

```
typeof obj.length == "number" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:33:38.737

+ 将右侧的内容结合为数字。

在这种情况下，如果长度不是对象 undefined 的属性，则将返回。`+ undefined`将产生`Nan`，这个评估是错误的。

如果字符串可以结合成一个数字，那么它将是.. 例如 `+ '1'`将产生`1`，`Number`这在处理字符串形式的十六进制值时尤其重要，例如`+'0x7070'`产生`28784`

# java - 数据结构（大数据）的最佳设计

> ID：14879481
> 
> 赞同：0
> 
> 时间：2013-02-14T16:29:05.677
> 
> 标签：java, hadoop, bigdata

我有很多页面（5.000.000.000+），我需要建立一个反向链接结构。对于每个页面，我需要提取所有出站链接。

例如原始数据。

```
www.mypage1.com = outbound1, outbound2, outbound3
www.mypage2.com = ouput4, outbound2, outbound1 
```

预期结果。

```
outbound1=www.mypage1.com,www.mypage2.com
outbound2=www.mypage1.com,www.mypage2.com
outbound3=www.mypage1.com
outbound4=www.mypage2.com 
```

实际上，我正在使用 hadoop 进行 map-reduce 并且工作正常。但经过一些分析后，我意识到一些 url 至少有 500mb 的入站链接信息。

5.000.0000.000 页乘以 500 mb 是很多数据......

每个 url 的长度为 100 字节，所以我的第一个提示是进行某种散列以减小每个 url 的大小。但这会给流程增加一些开销，因为我们需要一个服务来检索给定 url 的哈希值，反之亦然。

那么，您认为最好的方法是什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:37:42.987

尽管单人团队的任务不切实际，但我可以建议：

1.  根据“power low”，500mb 将只有很少的链接，其中大部分将有一小部分链接。所以你应该重新估计你的链接分布。
2.  要压缩链接，您可以在恢复的链接（即 com.google.mail）上使用 trie。

# regex - 正则表达式 \x96 -like 字符

> ID：14879482
> 
> 赞同：5
> 
> 时间：2013-02-14T16:29:07.120
> 
> 标签：regex, r, special-characters

我在包含字符的数据集中有一些字符串

```
\x96
\x92 
```

和别的。

我不知道如何在 R 中为它们 grep。
我尝试过使用

```
pattern="\x96"
pattern="\\x96"
pattern="x96" 
```

但无济于事。

是否有处理此类字符的特定方法，特别是在 R.

* * *

** 更新 ** 根据评论中的建议，`perl=TRUE`允许 grep 工作

任何人都可以对正在发生的事情提供一个可靠的解释吗？

*会话信息，如果相关*

```
> sessionInfo()
R version 2.15.2 (2012-10-26)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8 LC_NUMERIC=C         LC_TIME=C            LC_COLLATE=C         LC_MONETARY=C        LC_MESSAGES=C        LC_PAPER=C           LC_NAME=C            LC_ADDRESS=C        
[10] LC_TELEPHONE=C       LC_MEASUREMENT=C     LC_IDENTIFICATION=C 

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.9.3    RMySQL_0.9-3     DBI_0.2-5        stringr_0.6.1    data.table_1.8.6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:47:56.173

R 支持几种不同类型的正则表达式。默认为 POSIX ERE（*扩展正则表达式*），这是 grep 和其他标准 posix 工具中的默认值。但是 R 中的 POSIX ERE 引擎目前不支持转义十六进制字符代码：

> 使用反斜杠转义非元字符取决于实现。当前实现将 \a 解释为 BEL，\e 解释为 ESC，\f 解释为 FF，\n 解释为 LF，\r 解释为 CR，\t 解释为 TAB。（请注意，这些将由 R 的解析器以文字字符串解释。）

请参阅[R 中使用的正则表达式](http://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html)。

设置 perl=TRUE 将 R 用于处理正则表达式的引擎更改为 PCRE（*与 perl 兼容的正则表达式*）。PCRE 支持转义的十六进制字符代码——瞧，你的正则表达式现在可以工作了。

# ios - 如何从视图控制器访问内存中的自定义对象？

> ID：14879486
> 
> 赞同：1
> 
> 时间：2013-02-14T16:29:13.363
> 
> 标签：ios, custom-object

在我的应用程序中，我获取一个核心数据库并将结果放入一个名为 self.stores 的数组中。我将这些商店位置转换为具有距离属性的 MyLocation 对象。我像这样绘制 MyLocation 对象：

```
- (void)plotStorePositions:(NSString *)responseString {

    for (id<MKAnnotation> annotation in _mapView.annotations) {
        [_mapView removeAnnotation:annotation];
    }
    //CYCLE THRU STORE OBJECTS
    for (Store * storeObject in self.stores) {

        NSString * latitude = storeObject.latitude;
        NSString * longitude = storeObject.longitude;
        NSString * storeDescription = storeObject.name;
        NSString * address = storeObject.address;

        //CREATE MYLOCATION OBJECTS
        CLLocationCoordinate2D coordinate;
        coordinate.latitude = latitude.doubleValue;
        coordinate.longitude = longitude.doubleValue;
        MyLocation *annotation = [[MyLocation alloc] initWithName:storeDescription address:address coordinate:coordinate distance:0];

        //CREATE A PIN FOR EACH MYLOCATION ANNOTATION
        CLLocation *pinLocation = [[CLLocation alloc] initWithLatitude:annotation.coordinate.latitude longitude:annotation.coordinate.longitude];

        //SET USERLOCATION (Must move this code out)
        self.userLocation = [[CLLocation alloc] initWithLatitude:self._mapView.userLocation.coordinate.latitude longitude:self._mapView.userLocation.coordinate.longitude];

        //SET USERLOCATION TO APPDELEGATE (Must move this code out)
        AppDelegate *myDelegate = [[UIApplication sharedApplication] delegate];
        myDelegate.userLocation = self.userLocation;

        //CALCULATE DISTANCE AND SET ITS THAT MYLOCATION's DISTANCE PROPERTY
        CLLocationDistance calculatedDistance = [pinLocation distanceFromLocation:userLocation];
        annotation.distance = calculatedDistance/1000;        

        [_mapView addAnnotation:annotation];

    }

} 
```

这是在地图视图中。然后我有一个表格视图，我在其中获取相同的核心数据库并再次获取 self.stores。然后我循环遍历 self.stores 数组以创建 STORE storeObjects 以放入我的 tableview 单元格。但我想对这些细胞进行分类。如何获取应该在内存中的 MyLocation 对象？我需要将它们传递给 appDelegate 还是 tableview 控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:06:48.550

当您使用 Core Data 时，您最好的选择是使用 a`NSFetchedResultsController`来填充您的表格视图。

然后，您需要的只是托管对象上下文，来自另一个控制器或应用程序委托。

# asp.net-mvc - asp.net MVC 4 EntityType：EntitySet 没有定义键

> ID：14879488
> 
> 赞同：0
> 
> 时间：2013-02-14T16:29:12.130
> 
> 标签：asp.net-mvc, entity-framework-4

我是 MVC 新手，所以请放轻松。

尝试添加迁移时出现两个错误。它们如下：

EntityType 'Icon' 没有定义键。定义此 EntityType 的键。

EntityType：EntitySet 'Icons' 基于没有定义键的类型'Icon'。

我将图标包含在另一个模型中，如下所示：

```
public class Icon
        {
            public string IconName { get; set; }
            public string IconColor { get; set; }
            public int BackgroundXPos { get; set; }
            public int BackgroundYPos { get; set; }
            public string IconColorHover { get; set; }
            public int BackgroundHoverXPos { get; set; }
            public int BackgroundHoverYPos { get; set; }
        }

public class GalleryThumbnail : CSSBoxModel
    {

        [DisplayName("Thumbnail Image Outline Color")]
        public string ThumbnailImageOutlineColor { get; set; }

        [DisplayName("Thumbnail Menu Font")]
        public CSSFont ThumbnailMenuFont { get; set; }

        [DisplayName("Thumbnail Icon Color")]
        public Icon ThumbnailIconColor { get; set; }

    } 
```

这个地址类下面的任何不同的工作如何：

```
public class Address
    {
        public String Adress1 { get; set; }
        public String Adress2 { get; set; }
        public String Adress3 { get; set; }
        public String City { get; set; }
        public String County { get; set; }
        public String State { get; set; }
        public String Zip { get; set; }
        public String Country { get; set; }

    }

 [Table("UserProfile")] //Could be PP empolyee, Subscriber or Subscriber's customer
    public class UserProfile
    {

        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }

        public bool? Gender { get; set; }

        public Address Address { get; set; } //billing address

        public Address ShipAddress { get; set; }

    } 
```

我没有在 Icon 或 Address 类中添加键，因为我无意在我的数据库中存储特定数据。它们只能在其他类中使用。那么为什么一个需要身份证而另一个不需要呢？

我还没有创建公共 DbSet Icons { get; 放; 在我的数据库上下文中。

您还可以告诉我当您在另一个（或这些示例中的类中的类的实例）中使用一个类时它被称为什么？

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T12:47:40.873

您可以在[System.ComponentModel.DataAnnotations.Schema](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.aspx)命名空间中使用[[NotMapped]](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.notmappedattribute.aspx)属性： `EntityFramework.dll`

```
using System.ComponentModel.DataAnnotations.Schema;
...

[NotMapped]
public Address Address { get; set; } //billing address

[NotMapped]
public Address ShipAddress { get; set; } 
```

关于命名，AFAIK 这些也称为公共属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T14:27:44.397

由于地址实体没有定义任何键，因此实体框架假定它是一个复杂属性，并且您的 UserProfile 表将使用名为 Addres_Address1、Address_Address2、Address_Address3、Address_City 等的列呈现...

即使您没有在上下文类上声明 EntitySetIcons DbSet，它仍然会被隐式添加，因为您在某处的其他类之一定义了 ICollection 或 IEnumerable 属性。

此处有关代码约定的更多信息：http: [//msdn.microsoft.com/en-us/data/jj679962.aspx](http://msdn.microsoft.com/en-us/data/jj679962.aspx)

因此，要么像@Kamyar 所说的那样将集合装饰为 NotMapped，要么只是从任何已经声明为 DbSet 的类中删除引用。

# asp.net - ASP.NET 控件生命周期。控制属性更改仅在下次加载时可用

> ID：14879489
> 
> 赞同：2
> 
> 时间：2013-02-14T16:29:22.623
> 
> 标签：asp.net

我已经构建了一个具有各种属性的寻呼机控件，例如`Start`指示应该呈现的第一条记录。这嵌入在另一个实际呈现记录列表的控件中。属性的 getter 和 setter 使用 ViewState 来持久化和检索值。

寻呼机中的链接是在 page_load 期间动态创建的。在每个链接上，anchor.ServerClick 委托都连接到一个 lambda，该 lambda 设置寻呼机控件上的 Start 属性。

当我调试页面时，我可以看到 Start 属性确实更新了，但是更改的值只有在我下次加载页面时才可用，大概是通过 ViewState 机制持久化的。

这在实践中意味着嵌入控件没有及时看到这些属性的更新值来呈现正确的列表。如何让访问者的点击在它们被使用之前而不是之后更新寻呼机属性？

编辑：添加一些代码

从主控件的 Page_Load 调用，我有一个引用寻呼机属性的循环。此循环确定将显示的项目，如果此时控件属性已更新，它将显示正确的记录，但事实并非如此。

```
for (int i = pager.Start - 1 ; 
          i < queryResults.Count() && i <= (pager.Start + pager.PageSize); i++) { 
```

在寻呼机控件（也从 Page_Load 调用）中，有这样的代码，它添加子控件并连接委托。

```
HtmlAnchor a = new HtmlAnchor();
a.HRef = "#";
a.InnerText = page.ToString();
newStartNumber = ((page - 1) * this.PageSize) + 1;
a.Attributes["data-start"] = newStartNumber.ToString();
a.ServerClick += (sender, e) => 
      { this.Start = int.Parse(((HtmlAnchor)sender).Attributes["data-start"]); };
li.Controls.Add(a);
ul.Controls.Add(li); 
```

所以当这些锚点被点击时，寻呼机的 Start 属性会更新，但为时已晚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:17:10.570

据我所知，这些代码部分似乎没问题，前提是：

您的 Page 属性如下所示：

```
public int Page
{
    get { return ViewState["Page"] == null ? 0: (int)ViewState["Page"]; }
    set { ViewState["Page"] = value; }
} 
```

和这个 ：

```
for (int i = pager.Start - 1 ; 
          i < queryResults.Count() && i <= (pager.Start + pager.PageSize); i++) { 
```

在您的父控件的 preRender 中。

和这个 ：

```
HtmlAnchor a = new HtmlAnchor();
a.HRef = "#";
a.InnerText = page.ToString();
newStartNumber = ((page - 1) * this.PageSize) + 1;
a.ServerClick += (sender, e) => { this.Start = newStartNumber; };
li.Controls.Add(a);
ul.Controls.Add(li); 
```

位于寻呼机控件的页面加载（或初始化）中。（也许你不需要 data-start 属性）

您应该为您的 HtmlAnchors 提供 Id。

# objective-c - Objective-C 连续格式说明符打印 0

> ID：14879490
> 
> 赞同：0
> 
> 时间：2013-02-14T16:29:25.263
> 
> 标签：objective-c, primitive-types, format-specifiers

这是我遇到的一个小问题，虽然它看起来很简单，但我找不到它，这里是代码：

```
int main (int argc, const char * argv[]) {
    unsigned long long ep  = 2292674165ul;
    unsigned long long ep2 = 2487148347ul;
    NSLog(@"%u", ep );
    NSLog(@"%u", ep2);
    NSLog(@"%u %u", ep , ep2);
    // a last try..
    NSLog(@"%@",[NSString stringWithFormat:@"%u %u", ep , ep2]);
} 
```

它的输出：

```
2013-02-14 13:26:15.968 FTPTests[5274:1307] 2292674165
2013-02-14 13:26:15.970 FTPTests[5274:1307] 2487148347
2013-02-14 13:26:15.971 FTPTests[5274:1307] 2292674165 0
2013-02-14 13:26:15.972 FTPTests[5274:1307] 2292674165 0 
```

有人能告诉我为什么第二个说明符打印 0 吗？我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:39:43.367

我相信您使用的格式说明符不正确，请尝试使用`%llu`. 当你编译它时，编译器会警告你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:40:44.350

尝试使用`%llu`而不是`%u`.

# spring - Mule 3.3 忽略资源未找到

> ID：14879494
> 
> 赞同：1
> 
> 时间：2013-02-14T16:29:27.980
> 
> 标签：spring, properties, mule

我正在使用 Mule Studio 1.3.2，我相信它对应于 Mule 3.3。

我正在使用属性占位符元素。我想使用[此处](http://www.mulesoft.org/documentation/display/current/Using+Parameters+in+Your+Configuration+Files)描述的具有可选覆盖文件的技术。但是，ignore-resource-not-found 属性在 Mule Studio 中被标记为错误： **Attribute ignore-resource-not-found is not defined as a valid property of property-placeholder**

```
<context:property-placeholder location="classpath:config.properties" ignore-resource-not-found="true" /> 
```

这是坏了还是我在做傻事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:41:54.653

`Mule 3.3`使用[Spring 上下文 3.1 模式](http://www.springframework.org/schema/context/spring-context-3.1.xsd)

支持`ignore-resource-not-found`属性

```
<xsd:complexType name="propertyPlaceholder">
   <xsd:attribute name="location" type="xsd:string">...</xsd:attribute>
   <xsd:attribute name="properties-ref" type="xsd:string">...</xsd:attribute>
   <xsd:attribute name="file-encoding" type="xsd:string">...</xsd:attribute>
   <xsd:attribute name="order" type="xsd:integer">...</xsd:attribute>
   <xsd:attribute name="ignore-resource-not-found" type="xsd:boolean" default="false">
      <xsd:annotation>
         <xsd:documentation><![CDATA[Specifies if failure to find the property resource location should be ignored. Default is "false", meaning that if there is no file in the location specified an exception will be raised at runtime.]]>
         </xsd:documentation>
      </xsd:annotation>
   </xsd:attribute>
   <xsd:attribute name="ignore-unresolvable" type="xsd:boolean" default="false">...         </xsd:attribute>
   <xsd:attribute name="local-override" type="xsd:boolean" default="false">...</xsd:attribute>
</xsd:complexType> 
```

所以，你做对了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T19:36:01.950

在**窗口 -> 首选项 -> Mule Studio -> 在 XML 编辑器中关闭错误报告**

这也可能会导致有效错误，但在我的情况下，我在验证一切正常后将其打开。一直烦我，那些“红色标记”。

但是，当您修改流程时，请不要忘记将其关闭。

# iis - HTTPS 加载其他网站内容

> ID：14879498
> 
> 赞同：0
> 
> 时间：2013-02-14T16:29:35.120
> 
> 标签：iis

在我的 Windows 2003 服务器上，我有两个网站：2send.co.il 和 oferavnir.co.il

对于 2send.co.il，我安装了 SSL。

当我将 Https 添加到 oferavnir.co.il（没有 SSL 的站点）时，会显示其他站点内容 -

（[https://oferavnir.co.il](https://oferavnir.co.il)显示来自 2send.co.il 的内容）

两个站点的主机标头似乎都可以。

会是什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:29:30.267

默认情况下，SSL 证书可能绑定到服务器上的所有 IP 地址。如果每个站点都有单独的 IP，则可以更新绑定以仅侦听 2send.co.il 的 IP。如果您使用主机标头和单个 IP，2send.co.il 站点将响应所有 https 请求。您可以使用 ISAPI Rewrite 之类的产品来检查用于 HTTPS 请求的 URL，并确保它与 2send.co.il 匹配，或者将其路由到 URL 的相应 http 站点

[http://forums.iis.net/t/1195794.aspx/1?HTTPS+displays+other+site+contnet](http://forums.iis.net/t/1195794.aspx/1?HTTPS+displays+other+site+contnet)

# c# - 从 C# 中的线程更新非活动的 form.text

> ID：14879499
> 
> 赞同：0
> 
> 时间：2013-02-14T16:29:38.413
> 
> 标签：c#

我正在尝试从线程更新 form.text 。基本上线程需要用当前时间更新form.text。我的代码如下所示

```
UpdateText("My Monitor (Last Updated " + DateTime.Now.ToString("HH:mm:ss tt") + ")", Form1.ActiveForm); 
```

方法如下

```
 void UpdateText(String s, Control c)
    {
        if (c.InvokeRequired)
        {

            this.BeginInvoke(new MethodInvoker(() => UpdateText(s, c)));

        }
        else
        {
            c.Text = s;
        }
    } 
```

只要主应用程序窗口处于活动状态，代码就可以工作。如果应用程序变为非活动状态，则会收到错误消息“对象引用未设置为对象的实例”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:33:00.873

你在打电话`Form1.ActiveForm`。

> [ActiveForm](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activeform.aspx)：表示当前活动表单的表单，如果没有活动表单，则为 null。

如果`Form`不活动，自然会是`null`。对您的表单使用不同的引用。如果您从表单中调用它，请使用`this`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:37:26.707

将引用保存`ActiveForm`在私有字段中，并在`Thread`

```
Control activeControl;
private void start_new_thread()
{
    active = Form1.ActiveForm;
    // start work under thread
}

private void work_under_thread(object state)
{

    //blocking works
    // update here
    UpdateText("My Monitor (Last Updated " + DateTime.Now.ToString("HH:mm:ss tt") + ")", activeControl);

} 
```

# c# - 你能给我一个关于 LINQ/lambda 代码练习的资源吗？

> ID：14879500
> 
> 赞同：6
> 
> 时间：2013-02-14T16:29:42.270
> 
> 标签：c#, linq, generics, lambda

你能给我一个简单的 C# LINQ/lambda-expressions 代码练习的资源吗？

可取但非强制性：在线，免费，有答案，一步一步，最简单快捷，学习语法但不复杂的谜题或世界问题。

我不认为它与

*   [通过练习、问题和谜题学习 C#](https://stackoverflow.com/questions/3311205/learning-c-sharp-with-exercises-questions-and-puzzles)

因为它是 2 多年前的，所以可能已经过时了，而且它没有包含任何好的参考资料（浏览了所有这些资料）。

我设法找到的最好的谷歌搜索结果是：

*   [C#练习与解答-C#变量和数据类型](http://www.worldbestlearningcenter.com/index_files/csharp-variables-exercises.htm)

虽然我不满意。

**更新**：
类似于[LINQ Quiz](http://www.albahari.com/nutshell/linqquiz.aspx)的东西，这对我来说是目前我能找到的最佳参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:34:41.713

一个非常好的 LINQ 资源是 Jon Skeet 的博客“Reimplementing `LINQ`to Objects”。他一步一步地重新实现了整个 LINQ 功能，提供了关于内部工作的出色见解。

[重新实现 LINQ to Objects](http://msmvps.com/blogs/jon_skeet/archive/2011/02/23/reimplementing-linq-to-objects-part-45-conclusion-and-list-of-posts.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T16:34:18.660

这不是这样的教程，但我发现它对 linq 方面非常有用......

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

# c++ - FlasCC：Vector 之间的互操作。 和双[]

> ID：14879502
> 
> 赞同：1
> 
> 时间：2013-02-14T16:29:44.717
> 
> 标签：c++, actionscript-3, apache-flex, adobe, flascc

假设我是 AS3 和 FlasCC 的新手，并尝试将一些遗留 C++ 代码移植到 Flash。我所拥有的是一些数字运算例程，它需要一个类型`double`的数组（数组是固定大小的）。C ++原型是，比如说：

```
double doNumberCrunching(double input[512]); 
```

现在我想构建一个 SWC，然后`doNumberCrunching()`从 AS3 调用。SWIG 将 AS3 接口生成为：

```
doNumberCrunching(var _input:*):Number; 
```

但是，我不知道如何在`Vector.<Number>(512)`不处理原始字节的情况下提供它。

我的问题是：如何巧妙地解决它？你知道访问`double*`底层的廉价方法`Vector.<Number>`吗？或者更好的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:33:35.163

如果只有您的数字运算功能在整数上运行！然后，您将能够使用*CModule.writeIntVector*将向量内容写入 DomainMemory 并传递指向 C++ 代码的指针。

但由于它是双精度数，您将不得不遍历 Vector 并使用*CModule.writeDouble*将每个元素从 AS3 Number 转换为 C++ 双精度数。然后，您可以使用接受 DomainMemory 指针的接口手动将您的函数公开给 AS3：

```
void doNumberCrunchingAS() __attribute__((used,
  annotate("as3sig:public function doNumberCrunching(inputPtr:int):Number"),
  annotate("as3package:mypackage"))
));

double doNumberCrunching( double* input )
{
  // Actual implementation here
  return 0;
}

void doNumberCrunchingAS()
{
  // Read the AS3 argument and convert it to a convenient C++ form.
  int memoryOffset = 0;
  AS3_GetScalarFromVar(memoryOffset, inputPtr);
  double* inputPtr = reinterpret_cast<double*>( memoryOffset );

  // Call an implementation routine.
  double result = doNumberCrunching( inputPtr );

  // Return result to AS3 code.
  AS3_Return( result );
} 
```

AS3 代码：

```
package
{
  using mypackage.doNumberCrunching;

  function testNumberCrunching():void
  {
    var ptr:int = CModule.malloc(blobSize);

    // a loop of writeDouble should be here

    doNumberCrunching(ptr);

    CModule.free(ptr);
  }
} 
```

# php - 我们可以从 jquery 打印 php var 吗？

> ID：14879507
> 
> 赞同：0
> 
> 时间：2013-02-14T16:30:04.940
> 
> 标签：php, javascript, jquery, wordpress

在php中我有这个：

```
'posts_per_page' => 6, 
```

我需要能够`6`从 jquery 生成该数字。从字面上看，基于屏幕分辨率，我需要生成要显示的帖子数量。我知道我可以用 jquery 检查屏幕分辨率和大小，但是我如何输出一个变量让`<?php $postNumber ?>`我们说一个 jquery 变量？这样我就可以拥有

```
'posts_per_page' => <?php echo $postNumber ?>, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:33:09.767

您需要使用 jQuery 获取屏幕分辨率并将其传递给 PHP？如果是，您将需要使用 Ajax。jQuery 示例：

```
$.ajax({
    type: 'POST',
    url: 'page.php',
    data: {screenSize: 6},
}).done(function(data){

}).fail(function(error){

}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T16:33:41.527

你不能这样。Javascript 在客户端浏览器上执行，而 php 在服务器机器上执行。要在客户端和服务器之间进行通信，您应该发出 ajax 请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T16:46:31.477

您可以在 jquery 中获取屏幕分辨率，如下所示：

```
var browserWidth = $(window).width();
var browserHeight = $(window).height(); 
```

您可以根据分辨率设置帖子数量。假设帖子数量为6。

```
var noOfPosts=6; 
```

现在，您需要使用 AJAx 将此数据发布到 php 页面，如下所示

```
 $.ajax({
  type: 'POST',
  url: page.php,//the page to which you want to send data
  data: postNumber=noOfPosts,
  success: function(){print("success");}
}); 
```

您可以在 php pagee 上检索此数字 6，如下所示：

```
 $postNumber= $_POST["postNumber"]; 
```

然后根据需要使用它。

**编辑**：

因此，您必须保持完整，如下所示：

```
var browserWidth = $(window).width();
var browserHeight = $(window).height();
var noOfPosts=0;//Default no of posts you want to have
if(browserWidth<960)
{
    noOfPosts=3;
} 
```

AJAX 调用将是相同的，但它将在此代码块之后。

：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T16:35:50.903

据你说，你的第一个代码块*是*PHP。因此，无需使用 PHP 嵌入标签 切换到 PHP 模式，也无需`<?php`回显（如您的第二个代码块所示）。

如果`$postNumber`包含您想要的值，则

```
'posts_per_page' => 6, 
```

简单地变成

```
'posts_per_page' => $postNumber, 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T16:32:05.810

您可以使用 php 编写包含所需变量的 javascript。

# vb.net - WCF 服务已知类型对象不会返回已知类型的属性

> ID：14879511
> 
> 赞同：2
> 
> 时间：2013-02-14T16:30:11.937
> 
> 标签：vb.net, wcf, object, known-types

我创建了一个 WCF 服务并有两个特定的对象，Contact 和 Driver。驱动程序继承联系人。Contact 对象是更大的 Member 对象的一部分。在代码中，我有以下内容：

```
<DataContract()>
Public Class Contact
    <DataMember()>
    Public Name As String
    <DataMember()>
    Public HomePhone As String
    ... etc.
End Class

<DataContract()>
Public Class Driver
    Inherits Contact
    <DataMember()>
    Public LicenseNum As String
    <DataMember()>
    Public LicenseState As String
    ... etc.
End Class

<DataContract(), KnownType(GetType(Driver))>
Public Class Member
    <DataMember()>
    Public Info As Contact
    <DataMember()>
    Public PrimaryStore As Store
    ... etc.
End Class 
```

因为我在 datacontract 行上有 knowntype，所以我可以创建一个带有 Info 属性的 Member 对象作为 Driver 而不是 Contact，这样我就可以保存他们的许可证信息。

我的问题是，当我创建一个测试项目来查看返回的数据时，我调用 Info 属性时无法获取许可证信息。

```
Dim svc as New Service.RetrieveService
Dim sMember as Member
Dim memNum as String = "ABC123"
sMember = svc.GetMember(memNum)
Console.WriteLine("LicenseNumber" & sMember.Info...PROBLEM!!!) 
```

sMember.Info 只给我属于联系人的属性（姓名、家庭电话等），而没有属于司机的属性（LicenseNum、LicenseState 等）我如何访问此信息？

我已经尝试将 ServiceKnownType 添加到我的 OperationContract 中，如下所示：

```
<ServiceContract()>
Public Interface RetrieveMember
    <OperationContract(), ServiceKnownType(GetType(Driver))>
    Function GetMember(ByVal memberNumber as String) As Member
End Interface 
```

但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:43:15.223

那是因为`Member.Info`属性被定义为`Contact`类型。这意味着，即使它引用了一个`Driver`对象，它仍然会被转换为一个`Contact`对象，因此只有那些基础成员是可见的。这是一个与 WCF 无关的问题。例如，即使从情况中删除 WCF，您仍然会遇到同样的问题：

```
Dim m As New Member()
m.Info = New Driver()
Console.WriteLine(m.Contact.LicenseNum)  ' Won't compile! 
```

因此，如果该`Info`属性正在引用一个`Driver`对象，则必须先将其转换为该类型，然后才能访问任何`Driver`成员：

```
Dim m As Member
' ...
If TypeOf m.Info Is Driver Then
    Dim d As Driver = CType(m.Info, Driver)
    Console.WriteLine(d.LicenseNum)  ' Works fine
End if 
```

# ajax - 将图形元素与流媒体协调

> ID：14879517
> 
> 赞同：0
> 
> 时间：2013-02-14T16:30:32.357
> 
> 标签：ajax, graphics, media, live-streaming, multimedia

如果您正在观看国情咨文 ( [http://www.whitehouse.gov/state-of-the-union-2013](http://www.whitehouse.gov/state-of-the-union-2013) )，您会看到出现在总统视频流旁边的图形补充说明他的要点。

网站上的视频是这个的合成，但在直播期间，这些是分开处理的。

我的问题是：这样做的最佳方法是什么？尤其是如果想要对图形的外观进行非常严格的控制（即在提出观点的时候，而不是之前和之后不久）。

我想知道是否有任何工具可以促进这一点？我一直在搜索谷歌，但我认为我没有正确的技术词汇来描述我所描述的内容，因为我是空白的。

我想 AJAX 将是一个很好的起点，但我不确定如何达到他们所拥有的控制水平，或者如何处理后端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:08:05.340

对于可能遇到此挑战的任何人，我们设计了两种解决方法：

**第一个**是有点米老鼠：它要求您事先知道要使用多少张图像等（在大多数情况下您会这样做）。我们编写了一个脚本来重复请求图像并将其插入页面，并在找到图像时请求链中的下一个图像。

IE。显示默认图像 -> 请求图像 1
然后显示图像 1 -> 请求图像 2
等

当您准备好将图像放入服务器时，您可以简单地将图像放入服务器上的文件夹中。这样做的一个优点是图像可以是交互式的，带有指向其他内容的链接等。

当然，最大的缺点是对您的页面有很多不必要的请求。在我们的案例中，我们预计有足够的流量，这似乎并不明智。此外，有很多错误的机会，并且取决于您的计时器触发的频率，可能存在时间差异。

**第二个**是花钱的：我们找到了 Ustream (http://www.ustream.tv/producer) 程序，它允许我们在时间方面进行所需的所有图像控制，并具有支持媒体剪辑等的优势。它允许您可以记录流式传输的所有内容。

缺点是用户看到的是您网站上的集成视频，因此您必须单独处理相关内容的链接并提供图像（如果您希望您的用户可以访问它们）。

**希望这对某人有用**

我仍然欢迎有关如何使第一种方法更有效的任何建议

# c - PIC18F45K22 EUSART1 接收并在超级终端上显示

> ID：14879519
> 
> 赞同：2
> 
> 时间：2013-02-14T16:30:32.770
> 
> 标签：c, pic18, mplab, usart

```
#include <p18f45k22.h>
#include <usart.h>

char uart_rd;

void main(void)
{

ANSELC = 0;

Open1USART(USART_TX_INT_ON &             // disables transmission interrupt     
           USART_RX_INT_OFF &// disables reception interrupt                            
           USART_ASYNCH_MODE & // sets USART to asynchronous mode  
           USART_EIGHT_BIT&  // sets USART to use 8-bit data mode 
           USART_CONT_RX &   // sets the port in continues receive mode 
           USART_BRGH_HIGH,   // uses the low speed Baud rate formula 
          52 // sets Baud to 9600 BPS using 8MHz in calculation (actual baud rate is 9600.614)
            );  

while (1) 
{ 
putrs1USART ("Hello world!\n"); 
} 

} 
```

我没有在超级终端上得到任何东西。我是否需要从代码中添加或删除任何内容。

帮助表示赞赏。

干杯

# android - 当按下“结束”按钮从 GPS 设置返回时，应用程序也会终止

> ID：14879521
> 
> 赞同：0
> 
> 时间：2013-02-14T16:30:36.227
> 
> 标签：android, android-intent, android-activity

我想在这里找到一些方向。我在一个应用程序中有 3 个活动，即 MainActivity、MapViewActivity 和 DbActivity。我通过从一项活动转到另一项活动。意图。每个意图的代码是：

```
 Intent intent = new Intent(this, ActivityName.class);
    startActivity(intent); 
```

我用过

> 机器人：noHistory =“真”

在所有这些活动中，因此当按下移动“结束”按钮时，应用程序会停止。否则应用程序正在返回.....尽管停止了应用程序现在的问题是：**当应用程序在发现 GPS 服务关闭后进行 GPS 设置时，用户打开 GPS 并按下移动“结束”按钮返回到应用程序。但应用程序也会停止。**所以用户再次启动应用程序并进入 MapViewActivity。如果我从 MapViewActivity 中删除 android:noHistory="true"，问题也会再次出现。那么有没有其他解决方案。请指导我，如果有什么方法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:41:27.060

我不认为你的意思是“结束”。您的意思可能是“后退”。如果您不希望用户在用户单击“返回”时返回活动，那么只需`finish()`在您开始下一个活动后调用。像这样：

```
Intent intent = new Intent(this, ActivityName.class);
startActivity(intent);
// finish this activity so that the user doesn't come back to it
finish(); 
```

请`android:noHistory="true"`从清单中取出，这可能不是您想要的。

# perl - Perl 在嵌套散列中打印二级散列键

> ID：14879522
> 
> 赞同：1
> 
> 时间：2013-02-14T16:30:32.253
> 
> 标签：perl, hash, printing, nested

给定这样的哈希值，如何打印我的所有二级哈希键（sig_qtr、日期、范围等）：

```
my $xml = XMLin("./${spec_file}", ForceArray => ['range', 'constant', 'question', 'date', 'sig_yr', 'sig_qtr', 'sig_mth'], KeyAttr => {});

print Dumper $xml->{entities}; 
```

打印散列的转储器输出：

```
$VAR1 = {
          'sig_qtr' => [
                       {
                         'name' => 'q1',
                         'label' => 'q1'
                       },
                       {
                         'name' => 'q4',
                         'label' => 'q4'
                       }
                     ],
          'date' => [
                    {
                      'name' => 'y2_mth',
                      'label' => 'pryr_mth_curr'
                    },
                    {
                      'name' => 'y3_pod6_qtr4',
                      'label' => 'curr_qtd4'
                    }
                  ],
          'range' => [
                       {
                         'name' => 'y0_jun',
                         'end' => '20100631',
                         'start' => '20100601'
                       },
                       {
                         'name' => 'y3_oct',
                         'end' => '20131031',
                         'start' => '20131001'
                       }
                     ],
          'constant' => [
                        {
                          'spec' => '99999999 and 99999999',
                          'name' => 'none_sixmth'
                        }
                      ],
          'sig_yr' => [
                      {
                        'name' => 'y1_sig',
                        'label' => 'ye11'
                      },
                      {
                        'name' => 'y3_sig',
                        'label' => 'ytd'
                      }
                    ],
          'sig_mth' => [
                       {
                         'name' => 'y3_nov',
                         'label' => 'nov12'
                       },
                       {
                         'name' => 'y3_oct',
                         'label' => 'oct13'
                       }
                     ],
          'question' => [
                        {
                          'name' => 'ltrq',
                          'label' => 'q9'
                        },
                        {
                          'name' => 'nextprod',
                          'label' => 'q12a'
                        }
                      ],
          'backfill' => {
                        'label' => 'bf_period'
                      },
          'year' => {
                      'current' => '2013'
                    }
        }; 
```

如果将键放入数组中会更好。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:35:58.677

```
print "$_\n" for keys %{ $xml->entities }; 
```

要将它们放入数组中，

```
my @keys = keys %{ $xml->entities }; 
```

# c - mariadb c api windows undefined reference to

> ID：14879524
> 
> 赞同：1
> 
> 时间：2013-02-14T16:30:41.897
> 
> 标签：c, api, windows-8, codeblocks, undefined-reference

我正在尝试使用 C API [https://downloads.mariadb.org/client-native/1.0.0/](https://downloads.mariadb.org/client-native/1.0.0/)连接到 mariaDB 我在 Windows 8 上并且正在使用 Code::Blocks 12.11 来编译和编写代码。

*   我已将带有 .h 文件的文件夹放在**D:\Programmering\biblotek\C\mariaDB-API\include**
*   以及**D:\Programmering\biblotek\C\mariaDB-API\lib中带有 .lib 文件的文件夹**

所以：

```
\include has all the .h files

\lib     has all the .lib files 
```

**链接：**我做了以下链接库：

- 链接设置中的**\include**文件夹**--> 编译器.. --> 搜索目录 -->*编译器***

- 链接设置中的**\lib**文件夹**--> 编译器.. --> 搜索目录 -->*链接器***

**-**在设置中链接libmariadb.lib **--> 编译器.. --> 链接器设置**

暂停...

- 项目中链接的**\include**文件夹**--> 构建选项... --> 搜索目录 -->*编译器***

- 项目中链接的**\lib**文件夹**--> 构建选项... --> 搜索目录 -->*链接器***

- 项目中的**链接 libmariadb.lib** -- **> 构建选项... --> 链接器设置**

在**Project --> Build Option...**我选择了 compiler **"GNU GCC Compiler"**。

编译器标志：-g

这是代码：

```
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <C:\MinaProgram\Libs\sqlclientC\include\mysql.h>
#include <my_global.h>
#include <mysql.h>

int main(void) {

MYSQL mysql;
MYSQL_ROW row;
const char *aQuery = "SELECT * from livedata";

if(mysql_library_init(0, NULL, NULL)) { //Initiera bibliotek
fprintf(stderr, "could not initialize MySQL library\n");
exit(1);
}
printf("AH!\n");
MYSQL mysql;
mysql_init(&mysql);

if(!mysql_real_connect(&mysql,"localhost","root","ooops","firsttest",0,NULL,0)) { //Anslut till databas, error meddelande om fel.
fprintf(stderr, "Failed to connect to server!\n");
}

/*GO CODE*/
if(!mysql_real_query(&mysql, aQuery, strlen(aQuery))) {
fprintf(stderr, "Query error, kinda'\n");
}

//mysql_fetch_row()

/*CLOSURE */
mysql_close(&mysql);
mysql_library_end();

return EXIT_SUCCESS;
} 
```

我编译，这是构建日志中的响应：

```
 ||=== test, Release ===|
obj\Release\main.o:main.c:(.text.startup+0x32)||undefined reference to `mysql_library_init'|
obj\Release\main.o:main.c:(.text.startup+0x54)||undefined reference to `mysql_init@4'|
obj\Release\main.o:main.c:(.text.startup+0x95)||undefined reference to `mysql_real_connect@32'|
obj\Release\main.o:main.c:(.text.startup+0xb4)||undefined reference to `mysql_real_query@12'|
obj\Release\main.o:main.c:(.text.startup+0xeb)||undefined reference to `mysql_close@4'|
obj\Release\main.o:main.c:(.text.startup+0xf1)||undefined reference to `mysql_library_end'|
||=== Build finished: 6 errors, 0 warnings (0 minutes, 3 seconds) ===| 
```

我搜索了 stackoverflow 和 google 并没有发现任何对我有用的东西，所以我决定详细发布我做错了什么。

任何想法如何使用 C 连接到 mariaDB？（如何使这个 porgram 工作）

亲切的问候！

> 地球生命周期的提示：不要获得Windows 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:57:25.620

在 Project --> Build Options... --> Linker Settings 中链接完整路径 D:\Programmering\biblotek\C\mariaDB-API\lib\libmariadb.lib。

我不确定链接器“搜索目录”是否有效，我无法让它们正常工作

或者，您可以使用 CMake 生成 Code::Blocks 项目

# python - pymongo 的安装工作但在 python3 中导入失败

> ID：14879527
> 
> 赞同：5
> 
> 时间：2013-02-14T16:30:57.153
> 
> 标签：python, ubuntu, python-3.x, pymongo

我目前正在运行 Ubuntu 12.10 并试图让 pymongo 在 python3 下正常工作。我尝试过的事情：

```
1\. apt-get install python-pymongo
2\. python setup.py install #from git source
3\. easy_install pymongo
4\. easy_install pymongo3
5\. pip install pymongo
6\. pip install pymongo3 #needed a fix in the download script 
```

我还尽可能地在安装之间移除和清洁。

如果我导入 pymongo：

```
In [1]: import pymongo
---------------------------------------------------------------------------
NameError                                 Traceback (most recent call last)
<ipython-input-1-ec8fdd1cd630> in <module>()
----> 1 import pymongo

/usr/local/lib/python3.2/dist-packages/pymongo-2.4.2_-py3.2-linux-x86_64.egg/pymongo/__init__.py in <module>()
     55     return '.'.join(map(str, version_tuple))
     56 
---> 57 version = get_version_string()
     58 """Current version of PyMongo."""
     59 

/usr/local/lib/python3.2/dist-packages/pymongo-2.4.2_-py3.2-linux-x86_64.egg/pymongo/__init__.py in get_version_string()
     51 
     52 def get_version_string():
---> 53     if isinstance(version_tuple[-1], basestring):
     54         return '.'.join(map(str, version_tuple[:-1])) + version_tuple[-1]
     55     return '.'.join(map(str, version_tuple))

NameError: global name 'basestring' is not defined 
```

[该错误与pymongo FAQ](http://api.mongodb.org/python/current/python3.html#why-do-i-get-a-syntax-error-importing-pymongo-after-installing-from-source)相同，但对我来说，我所在的位置并不重要。

我的理论是pymongo的python2版本误加了python3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T21:23:38.953

以防我将来需要它。

python3在ubuntu13中安装pymongo

(1)不要直接在ubuntu软件中心安装pymongo；它们适用于旧版本的 python（版本 3 之前） ![在此处输入图像描述](../Images/46dad2f74d65ae35b2f0eecf764abac2.png)

如果你安装它，你将无法在 python3 中使用 pymongo： ![在此处输入图像描述](../Images/5a6c0377499b579e798b0c66bfe66371.png)

(2)你应该为python 3安装一个特定的python包安装程序：python3-pip ![在此处输入图像描述](../Images/7fe8e23d7d939b0ee862cfa14a93ff03.png)

(3)使用提供的pip-3.3命令python3-pip包，在unbuntu终端运行以下命令安装pymongo：

```
pip-3.3 install pymongo 
```

如果您没有超级用户权限，请使用 sudo 运行它

```
sudo pip-3.3 install pymongo 
```

(4)那么你安装pymongo应该没有什么困难了，它可以在python3中使用。要验证它，请输入 IDLE：

![在此处输入图像描述](../Images/178e3ab06542f445ef02eabdc7ea1bf8.png)

(5)您也可以在终端中毫无困难地安装pymongo3：

```
pip-3.3 install pymongo3 
```

但是没有必要安装它，因为它的所有功能现在都包含在当前的 pymongo 包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T13:18:04.880

使用 pip3 安装对我有用

```
sudo pip3 install pymongo 
```

要使用 pip3，作为先决条件，必须安装 pip 的 Python 3 副本，可以按如下方式完成

```
sudo apt-get install python3-pip 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-08T11:13:29.113

1.  *[从https://pypi.python.org/pypi/pymongo#downloads](https://pypi.python.org/pypi/pymongo#downloads)*下载最新的 pymongo(3.4.0)

2.  解压文件：*tar -zxvf pymongo-3.4.0.tar.gz*

3.  通过触发运行安装：*python3 setup.py install*

**注意：**当然，您需要在提取的 pymongo 目录中触发上述命令。您可能还需要以 root 身份运行它，否则您将遇到写权限问题。我正在使用 CentOS 7，它的工作就像微风一样！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T09:38:34.320

它应该与

```
sudo python3.2 setup.py install 
```

但它不是出于某种原因

最好通过以下方式下载分布式和 pip 的源代码（并按此顺序安装它们）

```
sudo python3 setup.py install #distributed
sudo python3 setup.py install #pip
sudo pip-3.2 install pymongo 
```

# java - 准备好的语句只在不调试时抛出异常

> ID：14879537
> 
> 赞同：7
> 
> 时间：2013-02-14T16:31:21.670
> 
> 标签：java, eclipse

我使用这段代码将一些数据插入数据库：

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con=DriverManager.getConnection("jdbc:odbc:war_odbc");
PreparedStatement st =
   con.prepareStatement(
      "INSERT INTO Actors(FirstName,LastName,Age) VALUES(?,?,?)" );
st.setString(1, "Robert");
st.setString(2, "de Niro");
st.setInt(3,45);
st.executeUpdate();     
con.close(); 
```

如果我使用调试器并一次执行一行，一切都会顺利进行。如果我不使用它而只运行应用程序，我会得到这个异常：

```
 [Microsoft][ODBC Driver Manager] Invalid string or buffer length
    at sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbc.SQLGetDataString(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getDataString(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcResultSet.getString(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.buildTypeInfo(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcConnection.initialize(Unknown Source)
    at sun.jdbc.odbc.JdbcOdbcDriver.connect(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source)
    at java.sql.DriverManager.getConnection(Unknown Source) 
```

我正在使用 Windows 7 64 位。我去了管理工具，数据源（ODBC），我成功地测试了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:32:46.703

替换`st.setInt(2, "de Niro");`为`st.setString(2, "de Niro");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:17:27.707

关于提供的代码片段只有几点。

1.  st.setInt(2, "德尼罗");
    在这里，您将“字符串”设置为查询的第二个参数，但您使用了 setInt() 方法，这是不正确的。

2.  它与您的操作系统有关吗？我的意思是你使用 64 位寡妇操作系统和 32 位连接器。不过我不确定。

检查此链接。 [“[Microsoft][ODBC Driver Manager] 无效的字符串或缓冲区长度”错误](https://stackoverflow.com/questions/8187827/microsoftodbc-driver-manager-invalid-string-or-buffer-length-error)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:03:09.480

最好的解决方案是停止使用包中的此类`sun`（[Why Developers Should Not Write Programs That Call 'sun' Packages](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)）。此外，这个驱动程序真的很老，它是一个类型 1 驱动程序，可以将 JDBC 调用转换为 ODBC 调用。

现在几乎所有的 DB 厂商都实现了 type 4 驱动。此驱动程序实现将 JDBC 调用直接转换为特定于供应商的数据库协议。

同样根据这个[文档](http://docs.oracle.com/javase/7/docs/technotes/guides/jdbc/bridge.html)，这个桥将在 JDK8 中被删除，所以如果你想要一个可移植/适应性强的解决方案，使用它是个坏主意。

# c++ - 输入错误/无效输入时如何设置默认值？

> ID：14879545
> 
> 赞同：0
> 
> 时间：2013-02-14T16:31:41.587
> 
> 标签：c++, default

该项目的方向如下：

“对于活动级别，如果输入无效，则打印一条消息并告诉用户您假设他们是久坐的。”</p>

以下是我当前的代码，我正在尝试将其设置为`"Sedentary"`用户可以输入为 SA 或 sa 的默认值。无效输入的默认设置应该使程序默认为久坐，我有点困惑我是否在正确的轨道上。

```
else if (gender == 'F' || gender == 'f') {
    cout << "Please enter your Height in inches. (You may include a decimal) ";
    cin  >> height;

    cout << "Please enter your Weight in pounds as a whole number. ";
    cin  >> weight;

    cout << "Please enter your Age in years. ";
    cin  >> age;
    cout << endl;

    if (activity_level = 'SA' || activity_level = 'sa' || activity_level = 'LA' || activity_level = 'la' || 
        activity_level = 'MA' || activity_level = 'ma' || activity_level = 'VA' || activity_level = 'va') {
        cout << "Please enter your activity level." << endl << endl;
        cout << "You may enter one of the following choices." << endl << endl;
        cout << "Sedentary (Little or no exercise)   \"SA\" or \"sa\" " << endl;
        cout << "Lightly Active (Light exercise/sports 1-3 days a week)   \"LA\" or \"la\" " << endl;
        cout << "Moderately Active (Moderate exercise/sports 3-5 days a week)   \"MA\" or \"ma\" " << endl;
        cout << "Very Active (Hard exercise/sports 6-7 days a week)   \"VA\" or \"va\" " << endl << endl;
        cout << "Enter your activity level now. ";
        cin  >> activity_level;
        cout << endl;
    }
    // Output for the  message to defualt to Sedentary if you do not select activity level throught he proper input.
    else {
        activity_level =
        cout << "I'm sorry I did not recogonize that activity level. We will assume a sedentary amount of exercise. "
    }
} 
```

基本上我想知道，如果我在做什么；在语句中使用另一个 if 语句`else if`将起作用，我想知道我目前设置它的方式是否会产生所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:37:54.283

您必须在变量“activity_level”被赋值*后检查它。*您还应该使用 == 进行比较。你可以使用！运算符来否定条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:38:34.903

如果你想默认，`SA`那么你可以这样做：

```
 //Assume activity_level has had something assigned to it, to compare to.

    if (activity_level == "SA" || activity_level == "sa" || activity_level == "LA" || activity_level == "la" || 
        activity_level == "MA" || activity_level == "ma" || activity_level == "VA" || activity_level == "va")
    {
        //Do stuff if input is valid
    }
    // Output for the  message to defualt to Sedentary if you do not select activity level throught he proper input.
    else
    {
        activity_level = "SA";
        std::cout << "I'm sorry I did not recogonize that activity level. We will assume a sedentary amount of exercise.";
    } 
```

单引号也只能是一个单引号`char`，其他任何东西都需要双引号，因为它是一个字符串。

# java - 当值在地图中时，Map.containsValue() 返回 false

> ID：14879555
> 
> 赞同：2
> 
> 时间：2013-02-14T16:32:12.013
> 
> 标签：java, map

我正在尝试检查地图中的值何时出现，但我不知道为什么`containsValue()`没有正确检查它。

这是我的代码：

```
 Map<String, String> usersMap = userAPI.getBuyersFromBUUPToRootMap(getParentBusinessUnitId());
    //usersMap's [STDOUT] {super, root (rootSuper) - [EZMRootCmp]=3008, user, buyer A (buyer1) - [EZMBuyer]=1007, user, Obsvr (observer) - [EZMBuyer]=1006, user, Root (rootTest) - [EZMRootCmp]=3001, user, Test (test) - [EZMBuyer]=1001, zabuhab, Miguel (buyerAdmin1) - [EZMBuyer]=1008}

    System.out.println(usersMap.values()); 
    //[STDOUT] [3008, 1007, 1006, 3001, 1001, 1008]

    System.out.println(usersMap.containsValue(getUserProfile().getUserId())); //[STDOUT] false
    //getUserProfile().getUserId() [STDOUT] 1008 
```

如您所见，`getUserProfile().getUserId()`其值`1008`在 Map 中，但它返回`false`。

你知道为什么会这样吗？我该如何解决这种情况？我试图添加一个`Long.valueOf(getUserProfile().getUserId())`；但它不断返回`false`

PS：我在 SO 中搜索了这样的问题[，](https://stackoverflow.com/questions/2538011/hashmap-containsvalue-whats-the-point)但对于这种情况并没有帮助

**下面是我的完整代码：**

```
 UserAPI userAPI = ServiceLocator.getService(UserAPI.class);
    Map<String, String> usersMap = userAPI.getBuyersFromBUUPToRootMap(getParentBusinessUnitId());
    System.out.println(usersMap);
    System.out.println("#######################");
    System.out.println(usersMap.values());
    System.out.println("##########valor para getAuctionHeaderDO().getPrimaryContact().getId() #############");
    System.out.println(usersMap.containsValue(getAuctionHeaderDO().getPrimaryContact().getId()));
    System.out.println("##########valor para getUserProfile().getUserId()#############");
    System.out.println(getUserProfile().getUserId());
    System.out.println(usersMap.containsValue(getUserProfile().getUserId())); 
```

**结果：**

```
[STDOUT] {super, root (rootSuper) - [EZMRootCmp]=3008, user, buyer A (buyer1) - [EZMBuyer]=1007, user, Obsvr (observer) - [EZMBuyer]=1006, user, Root (rootTest) - [EZMRootCmp]=3001, user, Test (test) - [EZMBuyer]=1001, zabuhab, Miguel (buyerAdmin1) - [EZMBuyer]=1008}

[STDOUT] #######################

[STDOUT] [3008, 1007, 1006, 3001, 1001, 1008]

[STDOUT] ##########valor para getAuctionHeaderDO().getPrimaryContact().getId() #############

[STDOUT] false

[STDOUT] ##########valor para getUserProfile().getUserId()#############

[STDOUT] 1008

[STDOUT] false 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T16:36:29.573

`usersMap<String,String>`是字符串键和字符串值的映射。我认为`getAuctionHeaderDO().getPrimaryContact().getId()`返回`integer`或`long`。`Map#containsValue(Object)`接受任何`object`值但无法找到它，因为值在同一类型中不可用。

* * *

一个小小的推导——

```
Map<String,String> map= new HashMap<String, String>();
map.put("10", "1000");
map.put("11", "1001");
map.put("12", "1002");
map.put("13", "1003");
System.out.println(map.containsValue(1002)); 
```

它打印`false`。

* * *

您应该找到字符串的值，然后您将能够获得所需的结果。

```
System.out.println(map.containsValue(String.valueOf(1002))); 
```

它将打印`true`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T16:40:06.720

您的地图被声明为

```
Map<String, String> usersMap = ...; 
```

所以值必须是 a `String`。然后，我猜`getUserProfile().getUserId()`返回一个`Integer`或一个`int`。尝试`String`从该值构建 a 并再次检查该`contains`方法。

# c++ - Boost：Bootstrap.bat 编译失败，无法构建 bjam

> ID：14879563
> 
> 赞同：4
> 
> 时间：2013-02-14T16:32:38.317
> 
> 标签：c++, windows, boost, codeblocks, bjam

我想使用 Boost Filesystem 库。我正在使用 CodeBolcks 在 Windows 上进行开发。我正在关注“Windows 入门”。[http://www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html#install-boost-build](http://www.boost.org/doc/libs/1_53_0/more/getting_started/windows.html#install-boost-build)。我做了以下：

1) 我下载并提取 boost 到：d:\boost_1_53_0

2）我执行了这个：

```
D:\boost_1_53_0\tools\build\v2>bootstrap.bat gcc
Bootstrapping the build engine

Failed to bootstrap the build engine
Please consult bootstrap.log for furter diagnostics. 
```

日志文件包含：

```
###
### Using 'gcc' toolset.
###

D:\boost_1_53_0\tools\build\v2\engine>if exist bootstrap rd /S /Q bootstrap 

D:\boost_1_53_0\tools\build\v2\engine>md bootstrap 

D:\boost_1_53_0\tools\build\v2\engine>gcc -DNT -o bootstrap\jam0.exe  command.c compile.c constants.c debug.c execnt.c filent.c function.c glob.c hash.c hdrmacro.c headers.c jam.c jambase.c jamgram.c lists.c make.c make1.c object.c option.c output.c parse.c pathunix.c regexp.c rules.c scan.c search.c subst.c timestamp.c variable.c modules.c strings.c filesys.c builtins.c md5.c pwd.c class.c w32_getreg.c native.c modules/set.c modules/path.c modules/regex.c modules/property-set.c modules/sequence.c modules/order.c 

D:\boost_1_53_0\tools\build\v2\engine>.\bootstrap\jam0 -f build.jam --toolset=gcc "--toolset-root= "  clean 
...found 1 target...
...updating 1 target...
...updated 1 target...

D:\boost_1_53_0\tools\build\v2\engine>.\bootstrap\jam0 -f build.jam --toolset=gcc "--toolset-root= "  
...found 50 targets...
...updating 2 targets...
[COMPILE] bin.ntx86\b2.exe

"gcc"   -o bin.ntx86\b2.exe "-DNDEBUG" "-DOPT_HEADER_CACHE_EXT" "-DOPT_GRAPH_DEBUG_EXT" "-DOPT_SEMAPHORE" "-DOPT_AT_FILES" "-DOPT_DEBUG_PROFILE" "-DOPT_FIX_TARGET_VARIABLES_EXT" "-DOPT_IMPROVED_PATIENCE_EXT" "-DNT" "-DYYSTACKSIZE=5000" "-pedantic" "-fno-strict-aliasing" "-s" "-O3" "-Wno-long-long" "command.c" "compile.c" "constants.c" "debug.c" "function.c" "glob.c" "hash.c" "hcache.c" "headers.c" "hdrmacro.c" "jam.c" "jambase.c" "jamgram.c" "lists.c" "make.c" "make1.c" "mem.c" "object.c" "option.c" "output.c" "parse.c" "regexp.c" "rules.c" "scan.c" "search.c" "subst.c" "w32_getreg.c" "timestamp.c" "variable.c" "modules.c" "strings.c" "filesys.c" "builtins.c" "pwd.c" "class.c" "native.c" "md5.c" "modules/set.c" "modules/path.c" "modules/regex.c" "modules/property-set.c" "modules/sequence.c" "modules/order.c" "execnt.c" "filent.c" "pathunix.c" 

...failed [COMPILE] bin.ntx86\b2.exe...
...removing bin.ntx86\b2.exe
...skipped bjam.exe for lack of b2.exe...
...failed updating 1 target...
...skipped 1 target... 
```

如我们所见，编译失败。我不知道为什么。如何成功安装boost库？

注意："gcc --version" 返回 gcc 的版本

谢谢你。

编辑：我设法通过执行创建 b2.exe

```
"gcc"   -o bin.ntx86\b2.exe "-DNDEBUG" "-DOPT_HEADER_CACHE_EXT" "-DOPT_GRAPH_DEBUG_EXT" "-DOPT_SEMAPHORE" "-DOPT_AT_FILES" "-DOPT_DEBUG_PROFILE" "-DOPT_FIX_TARGET_VARIABLES_EXT" "-DOPT_IMPROVED_PATIENCE_EXT" "-DNT" "-DYYSTACKSIZE=5000" "-pedantic" "-fno-strict-aliasing" "-s" "-O3" "-Wno-long-long" "command.c" "compile.c" "constants.c" "debug.c" "function.c" "glob.c" "hash.c" "hcache.c" "headers.c" "hdrmacro.c" "jam.c" "jambase.c" "jamgram.c" "lists.c" "make.c" "make1.c" "mem.c" "object.c" "option.c" "output.c" "parse.c" "regexp.c" "rules.c" "scan.c" "search.c" "subst.c" "w32_getreg.c" "timestamp.c" "variable.c" "modules.c" "strings.c" "filesys.c" "builtins.c" "pwd.c" "class.c" "native.c" "md5.c" "modules/set.c" "modules/path.c" "modules/regex.c" "modules/property-set.c" "modules/sequence.c" "modules/order.c" "execnt.c" "filent.c" "pathunix.c" 
```

我继续指南中的下一步。现在，我得到一个参数错误。你怎么看？

```
D:\boost_1_53_0\tools\build\v2\engine\bin.ntx86>b2 --toolset=gcc "--prefix=D:\Program Files\CodeBlocks" install

notice: could not find main target install
notice: assuming it is a name of file to create.
D:/boost_1_53_0/tools/build/v2/build\project.jam:753: in attribute
warning: rulename $($(project).attributes).get expands to empty string
D:/boost_1_53_0/tools/build/v2/build\project.jam:765: in project.target
D:/boost_1_53_0/tools/build/v2\build-system.jam:708: in load
D:\boost_1_53_0\tools\build\v2\kernel\modules.jam:283: in import
D:\boost_1_53_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-build
D:\boost_1_53_0\tools\build\v2\boost-build.jam:8: in module scope
D:/boost_1_53_0/tools/build/v2/build\project.jam:753: in project.attribute
warning: rulename $($(project).attributes).get expands to empty string
D:/boost_1_53_0/tools/build/v2/build\targets.jam:206: in object(project-target)@
45.__init__
D:/boost_1_53_0/tools/build/v2/kernel\class.jam:88: in new
D:/boost_1_53_0/tools/build/v2/build\project.jam:765: in project.target
D:/boost_1_53_0/tools/build/v2\build-system.jam:708: in load
D:\boost_1_53_0\tools\build\v2\kernel\modules.jam:283: in import
D:\boost_1_53_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-build
D:\boost_1_53_0\tools\build\v2\boost-build.jam:8: in module scope
D:/boost_1_53_0/tools/build/v2/build\project.jam:753: in project.attribute
warning: rulename $($(project).attributes).get expands to empty string
D:/boost_1_53_0/tools/build/v2/build\targets.jam:226: in object(project-target)@45.get
D:/boost_1_53_0/tools/build/v2\build-system.jam:721: in load
D:\boost_1_53_0\tools\build\v2\kernel\modules.jam:283: in import
D:\boost_1_53_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-build
D:\boost_1_53_0\tools\build\v2\boost-build.jam:8: in module scope
D:/boost_1_53_0/tools/build/v2\build-system.jam:722: in load
*** argument error
* rule project.load ( jamfile-location )
* called with: (  )
* missing argument jamfile-location
D:/boost_1_53_0/tools/build/v2/build\project.jam:53:see definition of rule 'project.load' being called
D:\boost_1_53_0\tools\build\v2\kernel\modules.jam:283: in import
D:\boost_1_53_0\tools\build\v2\kernel\bootstrap.jam:142: in boost-build
D:\boost_1_53_0\tools\build\v2\boost-build.jam:8: in module scope 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T17:55:20.760

为了使用文件系统，我使用了另一台计算机，并执行了以下步骤，它工作了：

```
1) Installed MinGW and added this enviroment variable => C:\MinGW\bin
2) Expanded boost_1_53_0 to c:\
3) cd c:\boost_1_53_0\tools\build\v2
4) bootstrap.bat gcc
5) b2 install --prefix="C:\Boostbuild" --toolset=gcc
6) Added this enviroment variable => C:\Boostbuild\bin
7) cd c:\boost_1_53_0
8) b2 --build-dir="C:\Boostbuild" toolset=gcc --build-type=complete stage
9) Installed CodeBlocks without MinGW
CodeBlocks:
10) Settings->Global variables: current variable => boost, Base => C:\boost_1_53_0, include => C:\boost_1_53_0\stage\lib
11) Create a new C++ console project, and right click on it:
Build Options->Choose Project Name on the left -> search directories
On compiler tab, press Add and type: $(#boost)
On linker tab, press Add and type: $(#boost.lib)
12) Right click on the C++ console project:
Build Options->Choose Project Name on the left -> linker settings
Add the following link libraries:
..\..\boost_1_53_0\stage\lib\libboost_filesystem-mgw46-mt-1_53.a
..\..\boost_1_53_0\stage\lib\libboost_system-mgw46-mt-1_53.a 
```

谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-19T05:23:22.417

尝试安装 c++ 包和 Windows 10 SDK。 [https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk](https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk)

# javascript - N ajax 调用的 Javascript 函数

> ID：14879566
> 
> 赞同：0
> 
> 时间：2013-02-14T16:32:48.167
> 
> 标签：javascript, ajax

在加载了两到五个中等大小的数据文件之后，我经常需要在网页上加载一个函数。假设最多 3MB 的数据拆分为最多五个文件。

我尝试通过同时进行所有 AJAX 调用并在它们全部加载后加载 initialize() 函数来优化加载时间，如下所示：

```
var data1, data2;
$(document).ajaxStop(function() {
  $(this).unbind("ajaxStop"); //prevent running again when other calls finish
  initialize();
});

$.ajax({
    url: url_to_data_1,
    success: function (d) {
       data1 = d;
    }
});

$.ajax({
    url: url_to_data_2,
    success: function (d) {
       data2 = d;
    }
});

function initialize() { /* do something with data1 and data2 */ } 
```

但是我厌倦了每次都粘贴这个，所以我想要一个这样的函数：

```
function multi_Ajax(urls, callback) {
    var data = {};

    //call init() after both the list of prayers and the word concordance index load
    $(document).ajaxStop(function() {
      $(this).unbind("ajaxStop"); //prevent running again when other calls finish
      callback(data);
    });

    for (var c = 0; c < urls.length; c += 1) {
        //data files
        $.ajax({
          url: urls[c],
          dataType: "json",
          success: function (d) {
            data[urls[c]] = d; console.log("Loaded " + urls[c]);
          }
        });
    }    
} 
```

当然，这不起作用，因为 ajax 调用不存在供 ajaxStop 捕获。但我不明白 ajaxStop 是如何工作得足够好来进一步发展的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:47:52.583

我不确定为什么您的第二次尝试不起作用。根据文档，每当 ajax 请求完成时，jquery 将检查是否还有其他未完成的请求，如果没有则触发 ajaxStop。据我所知，循环调用`$.ajax`与对每个调用进行硬编码应该没有什么不同。

但是，正如 Barmar 在评论中所建议的那样，这`$.when`似乎是一种更清洁的方式来做你想做的事情。这是一个如何将数组（您可以在循环中填充）传递给的示例`$.when`：[将延迟数组传递给 $.when()](https://stackoverflow.com/questions/5627284/pass-in-an-array-of-deferreds-to-when)

使用`$.when`似乎比`$.ajaxStop`因为如果有人后来出现并在您的循环之前或之后的某个地方添加了一个不相关的 ajax 请求，那将干扰 ajaxStop 触发的时间。`$.when`允许您明确说明要等待哪些 ajax 请求。

编辑：这是一个显示 ajaxStop 为循环发出的多个调用工作的小提琴：http: [//jsfiddle.net/zYk5W/](http://jsfiddle.net/zYk5W/)

看起来这对您不起作用的原因与 .ajax 或 .ajaxStop 无关；相反，这是您的成功回调中的范围问题。您的成功回调关闭`c`，但这`c`与外部（循环）范围使用的相同。当任何成功回调运行时，for 循环已完成并`c`已递增到`urls.length`. 因此，每次成功回调运行时，`urls[c]`都是未定义的。请参阅我链接的小提琴或[循环内的 JavaScript 闭包——简单实用](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)的示例，了解如何`c`在与循环的`c`.

# c# - 64 位 Windows 上的气球工具提示

> ID：14879568
> 
> 赞同：1
> 
> 时间：2013-02-14T16:32:56.447
> 
> 标签：c#, .net, winforms, 64-bit

在我自己的程序中，我尝试在这里使用此代码将工具提示气球窗口添加到我的应用程序中：http: [//www.codeproject.com/Articles/4991/Balloon-Tips-Galore](http://www.codeproject.com/Articles/4991/Balloon-Tips-Galore)（此处提供源代码）

我尝试编译演示程序，它在 32 位 Windows 7 上运行良好，但是当我尝试在 64 位 Windows 7 上使用它时，程序崩溃了。如果我尝试在 VS2010 中调试崩溃，我会收到以下消息：

![在此处输入图像描述](../Images/7c301f063e71745f132a1c34a1a93d7c.png)

调试器位于源代码不可用的某些区域，它说`Call stack location: ntdll.dll!0000000076fe40f2()`

我该如何解决这个问题，使其不会在 64 位上崩溃？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T19:11:16.983

我无法在 Windows Server 2003 x64（这是我目前使用的唯一 64 位环境）上使 C# 演示崩溃，但代码有问题，因此您看到意外行为是有道理的。

***编辑：****使用原始代码重现了 Windows Server 2008 R2 x64 中的崩溃，并验证了修复的有效性。*

[正如 Christian.K 所指出的](https://stackoverflow.com/questions/14879568/balloon-tooltips-on-64-bit-windows#comment20867076_14879568)，这个问题[之前已经注意到了](http://www.codeproject.com/Messages/3326161/Re-Crash-on-Windows-7-64bit.aspx)。调用该方法时，*仅*当指定的内存块不包含有效数据时才`Marshal.StructureToPtr`应传递`true`第三个`fDeleteOld`参数。[这在文档](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.structuretoptr.aspx)中非常明确地指出，所以我不确定原作者是如何弄错的。

 *在这种情况下，由于数据只是通过调用前一行分配的`Marshal.AllocHGlobal`，它不包含有效数据，不应该被删除/释放。更改很简单：将第三个参数更改`true`为`false`. 不幸的是，由于互操作代码分散在示例项目中的三个不同类中，您必须在多个地方进行更改。您正在寻找的模式是这样的：

```
IntPtr ptrStruct = Marshal.AllocHGlobal(Marshal.SizeOf(ti));
Marshal.StructureToPtr(ti, ptrStruct, false /* <-- change this from true to false */); 
```

正如一般观察：代码尝试手动处理许多互操作内容（通过使用`Marshal`类的方法），而不是让 CLR 自动处理它。我*更*喜欢后一种方法。尽管我完全了解如何手动完成所有互操作，但让系统为我管理它可以减少我犯的错误数量和导致堆损坏的次数。

[RhysW](https://stackoverflow.com/questions/14879568/balloon-tooltips-on-64-bit-windows#comment20863319_14879568)说他以前从未遇到过堆损坏，但是当您开始在 .NET 代码和 Win32 API 之间进行互操作时，它变得非常普遍。.NET Framework 不再保护您。

对于我的意思的一个例子，请注意该`FMSBalloonTip.SetToolTip`方法使用该`Marshal.StringToHGlobalAuto`方法来编组包含工具提示标题的字符串作为指针。`SendMessage`虽然这确实有效（谢天谢地，作者在完成后很小心地释放了指针），但声明接受`string`对象作为第四个参数的函数的重载会容易得多，也不容易出错。这样，框架将为您透明地处理所有必要的互操作内容。

当然，真正的问题是为什么你需要这段代码。***使用从一开始*****就可用的内置[类](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)*[`ToolTip`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.aspx)****要容易得多。我不确定您是否只是没有提及您需要的某些`ToolTip`未提供的功能，或者您只是不知道，但我强烈建议您重新考虑您的设计，以便您可以使用内置类并让微软程序员处理所有互操作的东西。*

 *如果它是您要查找的*气球*部分，请确保设置类的[`IsBalloon`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.tooltip.isballoon.aspx)`ToolTip`。这直到 .NET 2.0 才引入，但这与示例项目的目标版本相同。**

# java - 从 android 客户端将图像上传到 servlet 会导致文件损坏

> ID：14879570
> 
> 赞同：0
> 
> 时间：2013-02-14T16:33:00.883
> 
> 标签：java, android, image, servlets

我正在尝试从我的 android 客户端将图像上传到 servlet。代码执行良好，但是当我尝试打开发送的图像时，它似乎已损坏。你知道为什么吗？

代码如下：

安卓客户端：

```
 ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG, 90, stream);//compress to which format you want.
            byte [] byte_arr = stream.toByteArray();
            String image_str = Base64.encodeToString(byte_arr, 0); 
```

image_str 是我发送给 servlet 的内容：

```
 byte[] imageByteArray = Base64.decode(message);
        FileOutputStream f = new FileOutputStream("/path/IMG/pruebaaaa.jpg");
        f.write(imageByteArray);
        f.close(); 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T00:07:37.090

尝试将 flush() 放在 close() 上方，如下所示。

```
f.write(imageByteArray);
f.flush();
f.close(); 
```

# java - Java：从类 B 中访问在类 A 中创建的对象

> ID：14879576
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:33:14.530
> 
> 标签：java, object, reference

我正在努力访问一个对象及其来自另一个类的方法。我写了一些代码来说明我的问题

注意：以下代码不可编译或不可运行，只是为了解释我的问题。

```
class MainClass {
    public static void(String[] args) {
        Run r = new Run();
    }
}

class Run {

    Run() {
        Brand cola = new Brand("Coca Cola");
        Brand pepsi = new Brand("Pepsi");

        // Creates the container object "con1" and adds brands to container.
        Container con1 = new Container();
        con1.addToList(cola);
        con1.addToList(pepsi);
    }

}

class Brand {
// In this class I have a method which needs to accsess the con1 object
 containing all the brands and I need to access the method

    public void brandMethod() {
        if(con1.methodExample) {        **// Error here. Can't find "con1".**
            System.out.println("Method example returned true.");
        }
    }

}

class Container {
    // This class is a container-list containing all brands brands

    public boolean methodExample(){
    }
} 
```

我正在努力从 Brand 类中访问“con1”对象。如何访问“con1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:36:27.597

我会打电话`Brand`给集合，例如

```
brand.addTo(collection); 
```

例如

```
public class Brand {
   private Container container;
   public void addTo(Container c) {
      c.addToList(this);
      container = c;
   }
} 
```

然后，品牌可以添加自己，并持有对该系列的引用。这确实意味着该品牌引用了单个系列，我不确定这是否真的是您想要的。

稍微好一点的解决方案是在构造 时提供容器`Brand`，`Brand`然后只将自身添加到集合中一次，并且从一开始就具有对集合的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:37:05.440

您必须使用对 a`Container`对象的引用，并对其进行初始化。在错误行之前：

```
 Container con1 = new Container();  <-- the inicialization by creating a new object.

               ^
               |
               |
       the reference/variable 
```

更新答案评论：您必须通过实例；通常作为方法的参数。我担心你对Java基础的研究太少了，这个问题有很多地方错了。

搜索以下概念：

*   变量及其作用域。
*   局部变量 vs 实例变量 vs 静态变量。
*   方法参数。

# sql - 带有 SELECT、COUNT 和子查询连接的 SQL 查询不返回行

> ID：14879582
> 
> 赞同：1
> 
> 时间：2013-02-14T16:33:40.420
> 
> 标签：sql, oracle, select, count, subquery

我有以下选择查询，它返回以下数据：

询问：

```
SELECT DISTINCT ALLVW.GP_PAYGROUP,
                ALLVW.PRD_END_DT,
                TMP.PRD_END_DT
FROM PS_AZ_DFN_ALPRD_VW ALLVW,
     PS_AZ_DFMPRP_TMP4 TMP
WHERE ALLVW.GP_PAYGROUP = TMP.GP_PAYGROUP
  AND ALLVW.PRD_END_DT < TMP.PRD_END_DT 
```

结果：

```
PAYGROUP    PRD_END_DT      PRD_END_DT_1

AMZ_PG_T1   31-JAN-12   31-DEC-12
AMZ_PG_T1   29-FEB-12   31-DEC-12
AMZ_PG_T1   31-MAR-12   31-DEC-12
AMZ_PG_T1   30-NOV-12   31-DEC-12
AMZ_PG_T2   31-JAN-12   31-OCT-12
AMZ_PG_T2   30-SEP-12   31-OCT-12
AMZ_PG_T2   31-MAR-12   31-OCT-12
AMZ_PG_T2   30-APR-12   31-OCT-12 
```

所以现在，我想要`PRD_END_DT`for each`PAYGROUP`之前的“x”个周期`PRD_END_DT_1`，例如 x = 1，我的查询应该返回：

```
 PAYGROUP    PRD_END_DT      PRD_END_DT_1
 AMZ_PG_T1   30-NOV-12       31-DEC-12
 AMZ_PG_T2   30-SEP-12       31-OCT-12 
```

我厌倦了以下操作，但无济于事：

```
SELECT DISTINCT ALLVW.GP_PAYGROUP,
                ALLVW.PRD_END_DT,
                TMP.PRD_END_DT
FROM PS_AZ_DFN_ALPRD_VW ALLVW,
     PS_AZ_DFMPRP_TMP4 TMP
WHERE ALLVW.GP_PAYGROUP = TMP.GP_PAYGROUP
  AND ALLVW.PRD_END_DT < TMP.PRD_END_DT
  AND 1 =
    (SELECT COUNT(XVW.PRD_END_DT)
     FROM PS_AZ_DFN_ALPRD_VW XVW
     WHERE XVW.GP_PAYGROUP = TMP.GP_PAYGROUP
       AND XVW.PRD_END_DT < TMP.PRD_END_DT) 
```

你能建议可能的方法吗？感谢您的投入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T07:15:07.880

试用和使用`dense_rank`功能：

例如

```
Select a, b, c
From ( select a, b, c, dense_rank() over (partition by a order by b desc) r
       from table)
Where r < :x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:40:14.787

```
SELECT * FROM (
  your original SELECT DISTINCT... query
) t where datediff(month, PRD_END_DT, PRD_END_DT_1) = x 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:40:37.190

```
SELECT DISTINCT ALLVW.GP_PAYGROUP, ALLVW.PRD_END_DT, TMP.PRD_END_DT
FROM PS_AZ_DFN_ALPRD_VW ALLVW
JOIN PS_AZ_DFMPRP_TMP4 TMP ON ALLVW.GP_PAYGROUP = TMP.GP_PAYGROUP
WHERE ALLVW.PRD_END_DT < TMP.PRD_END_DT
  AND add_months(trunc(ALLVW.PRD_END_DT, 'month'), 1) >= trunc(TMP.PRD_END_DT, 'month') 
```

# function - 如何从具有 $.ajax 调用的函数返回结果

> ID：14879583
> 
> 赞同：0
> 
> 时间：2013-02-14T16:33:37.083
> 
> 标签：function, jquery, return-value

我会马上说[这个问题](https://stackoverflow.com/questions/12550002/how-to-return-the-value-of-a-function-after-the-result-of-an-ajax-call-has-come)似乎解决了同样的情况，但对于我的生活，我没有看到解决方案/答案是什么。也许有人只需要为我更清楚地“拼出来”！

我有以下功能：

```
function CheckIfUrlExists(checkUrl) {
    var exists = '';
    $.ajax({
        type: 'POST',
        url: '../scripts/branchAdmin.php',
        data: {checkUrl: checkUrl},
        cache: false,
        success: function(response) {
            console.log('response: ' + response);
            if (response === 'true') {
                exists = 'true';
            } else if (response === 'false') {
                exists = 'false';
            }
        },
        error: function(response) {
            // return false and display error(s) from server
            exists = 'false';
        }
    });

    console.log('exists: ' + exists); // always displays empty string, regardless of what the php script returns

    return exists;
} 
```

我用这个来称呼它：

```
var exists = CheckIfUrlExists($tr.find('input.editUrl').val());

if (exists === 'false') {
    //if (!CheckIfUrlExists($tr.find('input.editUrl').val())) {
    // New URL entered, verify user want to save it
    $('#confirmAddNewUrlDialog').data('row', $tr).dialog('open');
    ... // code to handle result
} 
```

如何让“CheckIfUrlExist() 函数返回 true 或 false（或任何值），以便我可以在上面的代码中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:44:51.163

将 ajax 调用异步选项设置为 false。然后你会得到结果。查看链接[https://stackoverflow.com/a/1531710/399414](https://stackoverflow.com/a/1531710/399414)

```
$.ajax({
        type: 'POST',
        async: false,
        url: '../scripts/branchAdmin.php',
... 
```

# jquery - 如何使用 jQuery UI 对话框在点击时打开一个新的浏览器窗口？

> ID：14879585
> 
> 赞同：1
> 
> 时间：2013-02-14T16:33:43.837
> 
> 标签：jquery, jquery-ui

我正在使用 jquery UI 对话框，并且有一些单选按钮和一个提交按钮。

如果选择了第一个按钮，并且用户单击了该按钮，我希望打开一个新窗口，就像有一个 href 标记一样：

```
<a href="http://www.example.com" target="_blank">Click</a> 
```

因此，到目前为止，在单击事件中，我处于：

```
$(this).click(function (e) {
   e.preventDefault();
}); 
```

是否有可能做到这一点？（必须在 IE 中工作）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:41:56.833

这应该会有所帮助。看小提琴：http: [//jsfiddle.net/pcDbX/](http://jsfiddle.net/pcDbX/)

```
$('#link').click(function () {

     window.open('http://www.example.com','mywindow','width=400,height=200')

}); 
```

此链接还将向您展示您可以使用哪些参数：http: [//www.pageresource.com/jscript/jwinopen.htm](http://www.pageresource.com/jscript/jwinopen.htm)

以下是一些要传递给的常用属性`window.open()`：

> 1.  width=300 使用它来定义新窗口的宽度。
>     
>     
> 2.  height=200 使用它来定义新窗口的高度。
>     
>     
> 3.  resizable=yes 或 no 使用它来控制您是否希望用户能够调整窗口大小。
>     
>     
> 4.  scrollbars=yes or no 这让你决定是否在窗口上有滚动条。
>     
>     
> 5.  toolbar=yes 或 no 新窗口是否应该在顶部有浏览器导航栏（后退、前进、停止按钮等）。
>     
>     
> 6.  location=yes 或 no 您是否希望显示带有当前 url 的位置框（输入地址的位置）。
>     
>     
> 7.  directory=yes 或 no 窗口是否应该显示额外的按钮。（什么很酷，个人按钮等......）。
>     
>     
> 8.  status=yes or no 是否在窗口底部显示窗口状态栏。
>     
>     
> 9.  menubar=yes 或 no 是否在窗口顶部显示菜单（文件、编辑等）。
>     
>     
> 10.  copyhistory=yes or no 是否将旧浏览器窗口的历史列表复制到新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:42:22.197

尝试

```
 $('#buttonid').click(function(){

      window.open('http://www.google.com', '_blank');

   }); 
```

# java - 反编译用launch4j打包的Java应用程序

> ID：14879586
> 
> 赞同：3
> 
> 时间：2013-02-14T16:33:48.550
> 
> 标签：java, class, decompiler, launch4j

我有一个使用launch4j 转换为.exe 的Java 应用程序。出于几个原因，我需要访问应用程序的类文件。

我尝试的第一件事是用 7zip 解压 exe。这样我得到了一些类文件，但肯定不是整个应用程序都打包在 exe 中（类文件似乎属于 launch4j）。

还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:42:57.657

您可以使用类似这样的方法从 Launch4j 可执行文件中提取 JAR：

[http://www.nirsoft.net/utils/resources_extract.html](http://www.nirsoft.net/utils/resources_extract.html)

通常，可执行文件将所需的 JAR 打包为可执行资源，然后在执行路径上查找 JDK。

获得 JAR 文件后，您应该能够对其进行反编译。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-14T17:09:43.417

您无法访问类文件。创建了 Exes，因此没有人可以访问您的代码。如果不知何故，您能够访问 jar 文件，那么您可以反编译它们以获取代码并进行更改。

# asp.net - 为什么 Web 请求内容被截断

> ID：14879598
> 
> 赞同：1
> 
> 时间：2013-02-14T16:34:27.837
> 
> 标签：asp.net, web-services

我有一个 Web 服务，它正在对 aspx 网站进行一些屏幕抓取。

我可以让它成功登录，但是当我提交请求时，它返回服务器错误。当我使用 Fiddler 进行检查时，它显示内容（查询字符串）被截断，因此并未全部提交。内容相当长，超过 3600 个字符。（不是我的选择，这只是网站的创建方式和预期。）

```
HttpWebRequest webRequest = WebRequest.Create(REQUESTUSAGE) as HttpWebRequest;
webRequest.CookieContainer = this.Cookies;
webRequest.Method = "POST";
webRequest.ContentType = "application/x-www-form-urlencoded";

StreamWriter requestWriter = new StreamWriter(webRequest.GetRequestStream());
requestWriter.Write(GetPostDataForRequest());

WebResponse response = null;

try
{
    response = webRequest.GetResponse();
}
catch (Exception ex)
{} 
```

GetPostDataForRequest 返回内容，但就像我说的，Fiddler 显示它缺少最后 600 个字符左右，没有明显的原因。调试器显示字符串按预期返回，但不知何故没有正确写入。

那么如何让它提交完整的字符串呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:47:24.663

好的，我解决了这个问题。我没有关闭 requestWriter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:49:17.160

请求大小通常有限制 - 看看[HTTP GET 请求的最大长度？](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request)

您似乎遇到了浏览器问题，而不是服务器问题。您可以使用命令行工具（例如 wget 之类的工具）发出请求，以验证它不是服务器的问题吗？

您也可以尝试不同的浏览器，它可能有不同的限制。

# java - 为什么这个方法返回一个空字符串？

> ID：14879599
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:34:34.370
> 
> 标签：java, class, methods, jtextfield

我有这两个类来制作一个简单的计算器，但是当我尝试使用它时，我得到了错误 java.lang.NumberFormatException，这里是源代码：

SimpleCalc 类的：

```
//Imports are listed in full to show what's being used
//could just import javax.swing.* and java.awt.* etc..

import java.awt.GridLayout;
import java.awt.BorderLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.Container;

public class SimpleCalc implements ActionListener{

    public static final SimpleCalc instance = new SimpleCalc();

    JFrame guiFrame;
    JPanel buttonPanel;
    JTextField numberCalc;
    int calcOperation = 0;
    int currentCalc;
    int operatorAction;

    //Note: Typically the main method will be in a
    //separate class. As this is a simple one class
    //example it's all in the one class.

    public SimpleCalc()
    {
        guiFrame = new JFrame();

        //make sure the program exits when the frame closes
        guiFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        guiFrame.setTitle("Simple Calculator");
        guiFrame.setSize(300,300);

        //This will center the JFrame in the middle of the screen
        guiFrame.setLocationRelativeTo(null);

        numberCalc = new JTextField();
        numberCalc.setHorizontalAlignment(JTextField.RIGHT);
        numberCalc.setEditable(false);

        guiFrame.add(numberCalc, BorderLayout.NORTH);

        buttonPanel = new JPanel();

        //Make a Grid that has three rows and four columns
        buttonPanel.setLayout(new GridLayout(4,3));   
        guiFrame.add(buttonPanel, BorderLayout.CENTER);

        //Add the number buttons
        for (int i=1;i<10;i++)
        {
            addButton(buttonPanel, String.valueOf(i));
        }

        JButton addButton = new JButton("+");
        addButton.setActionCommand("+");

        OperatorAction subAction = new OperatorAction(1);
        addButton.addActionListener(subAction);

        JButton subButton = new JButton("-");
        subButton.setActionCommand("-");

        OperatorAction addAction = new OperatorAction(2);
        subButton.addActionListener(addAction);

        JButton equalsButton = new JButton("=");
        equalsButton.setActionCommand("=");
        equalsButton.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent event)
            {
                if (!numberCalc.getText().isEmpty())
                {
                    int number = Integer.parseInt(numberCalc.getText()); 
                    if (calcOperation == 1)
                    {
                        int calculate = currentCalc  + number;
                        numberCalc.setText(Integer.toString(calculate));
                    }
                    else if (calcOperation == 2)
                    {
                        int calculate = currentCalc  - number;
                        numberCalc.setText(Integer.toString(calculate));
                    }
                }
            }
        });

        buttonPanel.add(addButton);
        buttonPanel.add(subButton);
        buttonPanel.add(equalsButton);
        guiFrame.setVisible(true);  
    }

    //All the buttons are following the same pattern
    //so create them all in one place.
    private void addButton(Container parent, String name)
    {
        JButton but = new JButton(name);
        but.setActionCommand(name);
        but.addActionListener(this);
        parent.add(but);
    }

    //As all the buttons are doing the same thing it's
    //easier to make the class implement the ActionListener
    //interface and control the button clicks from one place
    @Override
    public void actionPerformed(ActionEvent event)
    {
        //get the Action Command text from the button
        String action = event.getActionCommand();

        //set the text using the Action Command text
        numberCalc.setText(action);       
    }

    public String getText() {
        return numberCalc.getText();
    }

} 
```

这是另一个类 OperatorAction：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JTextField;

    public class OperatorAction implements ActionListener
    {
        int calcOperation = 0;
        int currentCalc;
        private int operator;
        // How to make 

        public OperatorAction(int operation)
        {
            operator = operation;
        }

        public void actionPerformed(ActionEvent event)
        {
            currentCalc =   Integer.parseInt(SimpleCalc.instance.getText()); 
            calcOperation = operator;
        }
    } 
```

所以我确实知道这是我的 getText 方法失败了，但是为什么呢？我真的不明白为什么这不起作用：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:12:53.210

只需将您的操作类更改为：

```
public class OperatorAction implements ActionListener
{
    int calcOperation = 0;
    int currentCalc;
    private int operator;
    // How to make 

    public OperatorAction(int operation)
    {
        operator = operation;
    }

    public void actionPerformed(ActionEvent event)
    {
        String text = SimpleCalc.instance.getText();
        try {
            currentCalc = Integer.parseInt(text); 
        } catch (NumberFormatException e) {
            currentCalc = 0;
        }
        calcOperation = operator;
    }
} 
```

或者，如果您确定没有人将除数字之外的任何内容放入 SimpleCalc.instance，则只能测试空值。

```
public class OperatorAction implements ActionListener
{
    int calcOperation = 0;
    int currentCalc;
    private int operator;
    // How to make 

    public OperatorAction(int operation)
    {
        operator = operation;
    }

    public void actionPerformed(ActionEvent event)
    {
        String text = SimpleCalc.instance.getText();
        currentCalc = text != null ? Integer.parseInt(text) : 0; 
        calcOperation = operator;
    }
} 
```

还要记住，没有一个解决方案对于良好的架构来说是理想的，因为它们依赖于这些数字的不可靠信息源，但这应该可以解决您所询问的特定问题。

对于一个好的解决方案，您需要重新设计整个解决方案，但我认为您的任务不需要这样做。

# ruby-on-rails - 从多台 PC 将 Rails 应用程序部署到 heroku

> ID：14879601
> 
> 赞同：0
> 
> 时间：2013-02-14T16:34:34.910
> 
> 标签：ruby-on-rails, heroku, github

我是 Rails 新手，正在学习构建 Rails 应用程序。我第一次从我的家用 PC 部署，然后一切都很好，然后我想在应用程序上工作并从我的笔记本电脑和工作 PC 部署，但事实证明我无法部署我的更新代码。每次我推送到 github 时都可以正常工作，但是当我想推送到 heroku 时，它并没有部署我的代码。我打开了我的heroku应用程序，它显然已经过时了

```
$ git push

Counting objects: 26, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (13/13), done.
Writing objects: 100% (14/14), 1.22 KiB, done.
Total 14 (delta 9), reused 0 (delta 0)
To git@github.com:myprofile/myapp.git
bb15762..94d0674  master -> master

$ git push heroku master

Everything up-to-date 
```

我在 virtualBox 上使用 Linux，并为每台 PC 克隆它，所以我相信它们都有相同的 ID 和 MAC。我做了所有必要`git remote add heroku`的事情，最后 heroku 只是忽略了我的更新代码并且永远不会重新运行构建。

我也尝试运行此命令`$ heroku rollback` `$ heroku restart --app MyApp`以将我的更新代码推送到 heroku 仍然无法正常工作。当我运行`$ heroku info --app MyApp`它时，会提供我所有的应用信息

```
=== my-app
Addons:        heroku-postgresql:dev
Git URL:       git@heroku.com:my-app.git
Owner Email:   myemail@gmail.com
Repo Size:     13M
Slug Size:     17M
Stack:         cedar
Web URL:       http://my-app.herokuapp.com/ 
```

我只是想知道会发生什么，只使用我的家用电脑推送到 heroku 对我来说有点烦人，因为如果可能的话，我需要在任何地方工作。感谢您未来的所有答案！

当我调用这个命令`git remote -v`时，它给了我这些：

```
all git@github.com:myprofile/my-aap.git (fetch)
all git@github.com:myprofile/my-aap.git (push)
github  git@github.com:myprofile/my-aap.git (fetch)
github  git@github.com:myprofile/my-aap.git (push)
heroku  git@github.com:myprofile/my-aap.git (fetch)
heroku  git@github.com:myprofile/my-aap.git (push)
origin  git@github.com:myprofile/my-aap.git (fetch)
origin  git@github.com:myprofile/my-aap.git (push) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T14:35:51.353

我解决了这个问题。@phoet - 谢谢你的提示。我向 heroku 添加了错误的远程主机，这就是我的推送没有通过的原因。

所以我删除了所有现有的遥控器并再次添加。现在一切正常，几乎没有调整。

# android - 如何检测拨出电话中的应答或拒绝状态

> ID：14879603
> 
> 赞同：5
> 
> 时间：2013-02-14T16:34:42.390
> 
> 标签：android, broadcastreceiver, call, telephonymanager, phone-state-listener

我尝试为android编写一个程序。我想用我的程序拨打电话，然后识别通话状态。使用流动功能，我可以识别挂出状态，而对于应答状态，它不起作用。我尝试了这个功能，但它也不起作用

```
private class PhoneCallListener extends PhoneStateListener {

    private boolean isPhoneCalling = false;

    String LOG_TAG = "LOGGING 123";

    @Override
    public void onCallStateChanged(int state, String incomingNumber) {

        if (TelephonyManager.CALL_STATE_RINGING == state) {
            // phone ringing
            Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
        }

        if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
            // active
            Log.i(LOG_TAG, "OFFHOOK");

            isPhoneCalling = true;
        }

        if (TelephonyManager.CALL_STATE_IDLE == state) {
            // run when class initial and phone call ended, need detect flag
            // from CALL_STATE_OFFHOOK
            Log.i(LOG_TAG, "IDLE");

            if (isPhoneCalling) {

                Log.i(LOG_TAG, "restart app");

                // restart app
                Intent i = getBaseContext().getPackageManager()
                        .getLaunchIntentForPackage(
                                getBaseContext().getPackageName());
                i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);

                isPhoneCalling = false;
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-14T16:41:36.153

你不能用 CALL_STATE_IDLE 和 CALL_STATE_OFFHOOK 做到这一点。您必须以编程方式检测传出铃声的结束...

# .net - 与 MemoryMappedFile 的不可靠连接

> ID：14879604
> 
> 赞同：2
> 
> 时间：2013-02-14T16:34:45.010
> 
> 标签：.net, .net-4.0, memory-mapped-files

我有两个 .NET 4.0 WinForms 应用程序，它们（主要）从共享的 MemoryMappedFiles 读取地理数据。最终用户可以自由地启动其中一个或另一个应用程序，或者同时运行这两个应用程序。打开的第一个应用程序创建名为 MemoryMapFile-s，第二个应用程序打开已经存在的应用程序。**但是，打开现有的命名 MemoryMappedFile 似乎是不可靠**的。它在大约 80% 的情况下有效，但在大约 20% 的情况下它因 FileNotFoundException 而失败。**症状不能安全地重现**，当它失败和成功时，它似乎是纯粹的运气。

这是两个应用程序用来获取 MemoryMappedFiles 的代码：

```
private static MemoryMappedFile GetMemoryMappedFile(string filePath)
{
    string mapName = filePath; // I have also tried here @"Global\myfile", no difference
    MemoryMappedFile mmf = null;
    try 
    { 
        // When the first app executes this step, it always succeeds.
        // When the second app comes here, it fails as it should.
        mmf = MemoryMappedFile.CreateFromFile(filePath, FileMode.OpenOrCreate,
                              mapName, HundredMB, MemoryMappedFileAccess.ReadWrite); 
    }
    catch (IOException)
    {
        try 
        { 
            // Opening the already existing named MemoryMappedFile by the SECOND app.
            // This line fails about 20% of the time.
            mmf = MemoryMappedFile.OpenExisting(mapName, 
                                   MemoryMappedFileRights.ReadWrite); 
        } 
        catch (FileNotFoundException ex)
        {
            Console.WriteLine("Yet again, could not open MMF. Life sux.");
        }
    }
    return mmf;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:40:22.480

你所描述的似乎是一个完全可能的情况。你所拥有的是一个竞争条件。例如，引发异常的代码`CreateFromFile`告诉您文件存在。然后另一个进程在此代码到达`OpenExisting`. `OpenExisting`然后调用并失败，因为该文件不再存在。这是您需要为其编写代码的有效案例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T19:29:41.593

```
 string mapName = filePath; 
```

这看起来很可疑。*filePath*字符串应始终引用文件的绝对*路径*名。像“c:\foo\bar\baz.bin”，绝不是相对文件名，如“baz.bin”。像“Global\myfile”这样的名称不是路径名称，而是内存映射名称。这是另一个进程用来打开映射的内容，它不知道也不关心充当映射后备存储的实际文件。

这将失败的一种非常常见的方式是当您的程序的工作目录（Environment.CurrentDirectory）未设置在您希望设置的位置时。除了突然看到 CreateFromFile() 调用失败之外，它具有在您没有意识到的情况下进行更改的诀窍。

因此，通过选择一个高度特定于您的应用程序的唯一地图名称来解决您的问题。以及您选择的具有完整路径名的文件。通常存储在 AppData 中，这是一个无需 UAC 提升即可写入访问的文件夹。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T19:09:17.290

翻转逻辑怎么样？由于 MMF 的创建应该是一次性的，但现有的打开应该是更常见的情况，也许这会起作用？

```
private static MemoryMappedFile GetMemoryMappedFile(string filePath)
{
    var mapName = filePath; // I have also tried here @"Global\myfile", no difference
    MemoryMappedFile mmf = null;

    try
    {
        // When the first app executes this step, it fails as it should.
        // Opening the already existing named MemoryMappedFile by the SECOND app.
        mmf = MemoryMappedFile.OpenExisting(mapName, MemoryMappedFileRights.ReadWrite);
    }
    catch (FileNotFoundException)
    {
        try
        {
            // When the first app executes this step, it always succeeds.
            mmf = MemoryMappedFile.CreateFromFile(
                filePath,
                FileMode.OpenOrCreate,
                mapName,
                HundredMB,
                MemoryMappedFileAccess.ReadWrite);
        }
        catch (IOException ex)
        {
            Console.Error.WriteLine("Yet again, could not open MMF. Life sux: " + ex);
        }
    }

    return mmf;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T10:43:21.303

*我是这个问题的作者，我是个傻瓜。*MMF 按预期工作。失败是由第二种方法（很久以前由我编写的）引起的，我在其中创建了 MMF-s，但我在那里应用了不同的 MMF 命名约定。问题中的代码失败（正确），因为某些 MMF-s 是在我的第二种方法中以错误的名称创建的。

*我不会删除这个问题，因为仍然有有价值的答案*可能对后来的读者有所帮助。非常感谢大家，谁花时间回答。

# php - 使用 php 从 html 解析并处理大量数据到 sqlite

> ID：14879605
> 
> 赞同：1
> 
> 时间：2013-02-14T16:34:47.710
> 
> 标签：php, android, performance, sqlite

我有一个适用于当地交通时间的 android 应用程序，例如公共巴士、渡轮和地铁，需要在线和离线工作。

当应用程序需要离线工作时，我需要不断更新其数据库。但是，我无法从市政府访问任何类型的网络服务或数据库。因此，我准备了一个 PHP 脚本，它将解析市政网页中的 html 内容，并提取每个公共巴士数量、每个地下组合（从哪里到哪里）和每个轮渡组合（类似于地下.)。但是，我的问题是从这里开始的。解析所有这些数据大约 100k 条记录并将它们处理到 sqlite 数据库的工作非常慢。

我是处理大量数据和 php 的新手。所以我可以接受任何建议。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T20:49:12.097

您的服务器不能进行此处理并集中缓存数据库。然后，Android 应用程序所要做的就是下载数据库的压缩版本，以供离线时在本地使用。当应用程序再次在线时，它可以与您的服务器同步以检索最新数据。您甚至可以分批发送数据。然后你可以让这个 php 脚本每天抓取和抓取你的数据。

# c# - 最大化窗体后，一半的窗口丢失，并且在某些屏幕上超出窗口

> ID：14879606
> 
> 赞同：0
> 
> 时间：2013-02-14T16:34:47.707
> 
> 标签：c#, windows, winforms

所以这是我的表单 onstartUp 事件代码：

```
 int height = Screen.PrimaryScreen.Bounds.Height;
        int width = Screen.PrimaryScreen.Bounds.Width;
        this.StartPosition = FormStartPosition.Manual;
        this.Size = new Size(width, height);
        this.WindowState = FormWindowState.Maximized; 
```

代码工作正常，表单启动最大化。在将应用程序分发给用户之后。一位用户抱怨并发送了一个屏幕截图，其中 RHS 上的表单按钮没有出现在屏幕上！！！

我想出了问题所在，但我不知道如何解决它。问题在于开发机器上的windows字体，控制面板\外观和个性化\显示\字体大小很小，在客户上它是中等的。

如何在代码中适应这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:20:59.383

> 问题出在windows字体上

不完全是。这不是您要更改的字体大小，而是视频适配器的每英寸点数 (DPI) 设置。传统设置是 96 dpi，从 Vista 开始，更改此设置变得容易得多。常见的其他选择是 120 dpi (125%) 和 144 dpi (150%)，它们可以通过单选按钮从显示小程序直接访问。

显示器分辨率已经停滞了很长时间，已经避开摩尔定律长达 30 年。这种情况终于改变了，这在很大程度上要归功于苹果公司对“视网膜”显示器的推动。最新的 MacBook Pro 在 13 英寸屏幕上具有 2560 x 1600 像素，大约 230 dpi。

这确实带来了一个问题，例如，任何创建 1024x768 窗口的程序都会在这样的显示器上将其 UI 变成邮票。如果没有放大镜，用户界面就会变得无法使用。这样的程序需要知道视频 DPI 设置并创建一个*更大的*窗口，与窗口最初设计的方式相比，DPI 设置的增加成比例地更大。

这在 WPF 和 Winforms 中都是自动的。WPF 默认获取它，因为它的所有位置和大小都以英寸表示，单位为 1/96"。Winforms 仍然适用于像素，但它通过其 AutoScaleMode 属性内置了自动缩放。

这就是该用户机器上发生的情况，他的视频 DPI 设置值比您的机器大。但是，他的屏幕上也没有更多可用的像素。有视力障碍的人通常会选择，增加 DPI 设置的副作用是字体变大，因此更容易阅读。但是不可避免的问题是，您放置在窗口右侧和底部边缘附近的任何控件都会脱落，因此屏幕不够大。

您可以通过调整窗口布局来解决此类问题。或者换句话说，通过使您的 UI 设计适用于任何窗口大小。Windows 程序的一个非常常见的功能。只需在 Visual Studio 上尝试一下。拖动右下角的窗口，观察它如何处理可用空间较少但仍然可用的情况。许多 Winforms 功能可以帮助您执行此操作，例如 Control.Anchor 和 Dock 属性、FlowLayoutPanel 和 TableLayoutPanel 控件、用于棘手情况的 Resize 事件。

对此的 Q&D 修复是 Form.AutoScroll 属性。将其设置为 True 以允许 UI 仍然可用，滚动条允许用户仍然可以访问窗口外的控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:44:20.800

您发布的代码与问题无关。您以比用户的屏幕分辨率更高的屏幕分辨率设计了表单，并且没有考虑在表单内停靠/锚定控件。

# objective-c - dateFromString 在 setLocale 之后返回了错误的日期

> ID：14879607
> 
> 赞同：0
> 
> 时间：2013-02-14T16:34:53.093
> 
> 标签：objective-c, nsdate, nslocale

我有以下代码：

```
NSDate *今天 = [NSDate 日期]；

    NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
    NSLocale *zh_CN = [[NSLocale alloc]initWithLocaleIdentifier:@"zh_CN"];
    [格式化setLocale:zh_CN];
    [格式化程序 setDateStyle:NSDateFormatterFullStyle];
    [格式化程序设置时间样式：NSDateFormatterNoStyle]；

    NSDateFormatter *newFormatter = [[NSDateFormatter alloc]init];
    NSLocale *en_US = [[NSLocale alloc]initWithLocaleIdentifier:@"en_US"];
    [newFormatter setLocale:en_US];
    [newFormatter setDateStyle:NSDateFormatterFullStyle];
    [newFormatter setTimeStyle:NSDateFormatterNoStyle];

    NSLog(@"今天: %@", 今天);

    NSString *todayString = [格式化字符串从日期：今天]；
    NSLog(@"zh_CN todayString: %@", todayString);
    NSDate *backToDate = [格式化程序 dateFromString:todayString];
    NSLog(@"zh_CN backToDate: %@", backToDate);

    NSString *newTodayString = [newFormatter stringFromDate:today];
    NSLog(@"en_US newTodayString: %@", newTodayString);
    NSDate *newBackToDate = [newFormatter dateFromString:newTodayString];
    NSLog(@"en_US newBackToDate: %@", newBackToDate);

```

我期待 backToDate = newBackToDate = 今天，但日志显示不同：

```
2013-02-15 00:18:12.594 TestNSDate[16637:11303] 今天：2013-02-14 16:18:12 +0000
2013-02-15 00:18:12.595 TestNSDate[16637:11303] zh_CN todayString: 2013 年 2 月 15 日星期五
2013-02-15 00:18:12.596 TestNSDate[16637:11303] zh_CN backToDate: 1999-12-30 16:00:00 +0000
2013-02-15 00:18:12.619 TestNSDate[16637:11303] en_US newTodayString：2013 年 2 月 15 日，星期五
2013-02-15 00:18:12.620 TestNSDate[16637:11303] en_US newBackToDate: 2013-02-14 16:00:00 +0000

```

这里我们可以看到backToDate变成了1999-12-30，为什么会这样呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:11:02.060

`dateFromString:`不能保证甚至不应该解析来自`stringFromDate:`. 典型的使用场景是显式设置 NSDateFormatter 的格式，并期望日期字符串是这种格式。

要解析网络协议中的标头中的日期等互联网日期，最好将格式化程序的语言环境设置为`en_US_POSIX`，因为默认情况下将使用用户的当前语言环境。

# android - 创建一个全球唯一的 Android 标识符

> ID：14879608
> 
> 赞同：6
> 
> 时间：2013-02-14T16:34:57.687
> 
> 标签：android, guid, uniqueidentifier

在谈到唯一的 Android ID 时，我相信每个人都已经看到[了这一点](https://stackoverflow.com/questions/2785485/is-there-a-unique-android-device-id)，但是我也在尝试提出一个解决方案来唯一地识别任何 Android 设备。我很乐意使用公开发布的课程，但我还没有找到。

在我的情况下，要求是能够唯一识别任何具有某种形式的互联网连接（例如 GPRS 或 Wi-Fi）并在 API 级别 8（v2.2 Froyo）上运行的设备。我不知道任何没有 Wi-Fi 或 SIM 卡的设备，所以如果有的话请告诉我！

我们在 iOS 中通过使用 Wi-Fi mac 地址的哈希解决了这个问题，因为所有 iOS 设备*都应该*有这个。但是对于 Android，技术（例如上面引用的 SO 帖子的答案）是指`TelephonyManager`可以返回的类`null`（例如当设备没有 SIM 连接时，例如 Nexus 7）或者`getContext().getContentResolver(), Secure.ANDROID_ID`根据[这里](http://android-developers.blogspot.co.uk/2011/03/identifying-app-installations.html)是在 Froyo 之前的版本上不是 100% 可靠的（这对我来说是幸运的）。然而，它并没有说明 Froyo 之后的任何问题，所以如果有任何问题，请告诉我！我也读过这个可以返回`null`。根据[这里](http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID)它可以在恢复出厂设置时改变，但这不是一个主要问题。

所以我把它放在一起来生成一个希望唯一的GUID：[**这个方法不完整！**]

```
public static String GetDeviceId(Context context)
{
    // Custom String Hash 1
    StringBuilder stringBuilder = new StringBuilder();
    stringBuilder.append("someRandomData"); // Not really needed, but means the stringBuilders value won't ever be null

    // TM Device String
    final TelephonyManager tm = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
    String tmDeviceId = tm.getDeviceId(); // Could well be set to null!
    LogMsg.Tmp("TM Device String [" + tmDeviceId + "]");

    // Custom String Hash 2
    stringBuilder.append(tmDeviceId);
    int customHash = stringBuilder.toString().hashCode();
    LogMsg.Tmp("Custom String hash [" + customHash + "]");

    // Device ID String
    String androidIDString = android.provider.Settings.Secure.getString(context.getContentResolver(), android.provider.Settings.Secure.ANDROID_ID);
    LogMsg.Tmp("Device ID String [" + androidIDString + "]");

    // Combined hashes as GUID
    UUID deviceUuid = new UUID(androidIDString.hashCode(), ((long)customHash << 32));
    LogMsg.Tmp("Combined hashes as GUID [" + deviceUuid.toString() + "]");

    return deviceUuid.toString();
} 
```

因此，您可能会发现`tmDeviceId`设置为`null`，在这种情况下，`customHash`无论设备如何，都将是相同的，但是结合起来`androidIDString`应该是全局唯一的。我认为。`tmDeviceId`显然，如果AND不可用，我将需要解决`androidIDString`并在那里抛出异常。

所以……这是不是矫枉过正？如果是这样，只使用它是否安全`context.getContentResolver(), android.provider.Settings.Secure.ANDROID_ID`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T13:58:57.480

为什么不像在 iOS 中那样获取设备的 MAC 地址？这也可以在 Android 设备中执行。

我将给出一个获取设备mac地址的代码片段..

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class HardwareUtil {

    public static String getMacAddress()
    {
        try{
            Process process = Runtime.getRuntime().exec("cat /sys/class/net/eth0/address");
            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
            int read;
            char[] buffer = new char[4096];
            StringBuffer output = new StringBuffer();
            while ((read = reader.read(buffer)) > 0){
                output.append(buffer, 0, read);
            }
            reader.close();
            process.waitFor();
            String hwaddr = output.toString();
            return hwaddr;
        }catch (IOException e) {
            e.printstacktrace();
        }catch (InterruptedException e){
            e.printstacktrace();
        }
    }

} 
```

`HardwareUtil.getMacAddress()`将返回设备的mac地址。

**编辑：如果 mac 地址不适合您的情况。关注会很有用！**

```
public static String getDeviceId(Context context) {
    final String deviceId = ((TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE)).getDeviceId();
    if (deviceId != null) {
        return deviceId;
    } else {
        return android.os.Build.SERIAL;
    }
} 
```

`AndoridManifest.xml`如果您使用`getDeviceId`方法，请不要忘记为您的文件添加以下权限。

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# scala - 无法在 shell 中使用 sbt 运行基于命名空间的特定测试规范

> ID：14879611
> 
> 赞同：2
> 
> 时间：2013-02-14T16:35:08.860
> 
> 标签：scala, sbt, scalatest, specs2

作为 CI 构建的一部分，我正在尝试从 shell 运行我的 specs2 测试。当我在本地 Windows 机器上运行以下命令时，它会运行适当的规范：在 Unit 命名空间中定义的规范。

```
sbt test:compile "test-only Unit.*" 
```

但是，在我的构建机器（ubuntu）上，它似乎忽略了仅测试的命名空间参数，因此运行了所有测试。单引号似乎没有什么区别。当我进入 sbt 控制台然后执行命令（仅测试单元。*）时，它按预期工作。

任何建议，将不胜感激。

# java - Java当服务器状态布尔值为false时如何执行批处理文件？

> ID：14879616
> 
> 赞同：-1
> 
> 时间：2013-02-14T16:35:17.173
> 
> 标签：java, batch-file, status

目标：我想制作一个包含布尔值的 java 程序，它每 5 分钟检查一次以查看我的游戏服务器是否 (cloudnine1999.no-ip.org:port 43594)

目的：在我的游戏服务器崩溃时重新启动它

问题：不确定如何使用 java 检查服务器是否在线。

程序功能：如果布尔返回false（意味着服务器离线）我希望java程序打开一个特定的批处理文件以便服务器启动（以防服务器崩溃）

我试图在谷歌上找到一些东西，但我没有找到任何有用的东西，而且我的编码员还不够先进，无法自己解决这个问题，我需要的只是有人指导我/指出我正确的编码方向一个带有 java 的服务器状态检查器，我可以从那里完成其余的工作。

在美国和加拿大中部时区下午 4 点左右之前，我可能无法回复您的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:49:07.920

Shell脚本解决方案：

我假设服务器是 Java EE 服务器。服务器由 Windows 上的“bat”或 Linux/Unix 上的“shell”脚本启动。对于 UNIX/LINUX：最简单的解决方案是在服务器启动的 SHELL 脚本中编写一个逻辑，以便在服务器启动时将 JVM 的 PID 记录在一个文件中。然后编写一个简单的 shell 脚本来监控使用命令“ps -aef | grep”记录的 PID。如果 PID 不存在，则启动服务器。您应该以在其原始位置启动服务器的同一用户身份运行此脚本。第二种解决方案是“ps auxww | grep java”。请注意标识您的服务器的服务器变量。如果你运行命令，你就会知道。

Java解决方案：

每个服务器都有一个可以使用 HTTP URL 监控的管理端口。哦，你也可以点击应用程序网址。使用 Java 程序，您可以测试连接。如果 HTTP 响应代码是 200 - 你很好，如果它不是 200 像 - 500 / 400 ，服务器可能会被认为是死的。然后你需要启动服务器启动脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:51:57.613

用于`Socket`检查服务器是否启动（如果它可以连接到 IP 和端口而不抛出异常）。小心，有些服务器不喜欢这些“空”连接。

```
try{
    new Socket("cloudnine1999.no-ip.org", 43594).close();
}catch(IOException ex){
    // Server probably down, restart it...
}catch(Exception ex){
    // Some  other problem, likely DNS or security related.
} 
```

用于`ProcessBuilder`重新启动它。

# data-visualization - 使用点语言在 Graphviz 中分层

> ID：14879617
> 
> 赞同：1
> 
> 时间：2013-02-14T16:35:21.513
> 
> 标签：data-visualization, graphviz, dot

我正在处理一个点文件来呈现节点的分层。

我手上的图就是这个。（对不起，我没有足够的声誉来发布图片..） [http://www.flickr.com/photos/40328682@N03/8473003861/in/photostream/lightbox/](http://www.flickr.com/photos/40328682@N03/8473003861/in/photostream/lightbox/)

但是，我希望树（蓝色节点）不被压缩并且每棵树只占用一层。我通过添加不可见节点和更多边缘来绘制示例，如下所示： [http ://www.flickr.com/photos/40328682@N03/8474093000/in/photostream/lightbox/](http://www.flickr.com/photos/40328682@N03/8474093000/in/photostream/lightbox/)

我尝试 $ rank = same $ 使黄色节点和蓝色节点（顶部）处于同一级别，但如果不插入不可见节点，我无法添加更多层。

有什么方法可以在**不添加不可见节点**的情况下在不同等级之间添加更多层？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-23T13:21:50.447

如果子图之间没有连接，则无法控制它们的定位。`rank=same`在左侧的图例中使用是一种常见的方法，以及不可见的节点来强制结构进入布局。

如果您只需要在两个节点之间添加最小量的空间，那么您可以使用`minlen =`隐藏边上的属性来强制进行所需的分离。这也在[dot 中的子图集群排名中](https://stackoverflow.com/questions/2499032/subgraph-cluster-ranking-in-dot/3329126#3329126)得到了解释。

这体现在：

```
digraph {
    node [label = ""];

    A; B; C; D;
    E [style = invis];

    {   node [shape = box, label = ""];

        1 -> 2;
        3 -> { 4; 5; 6; 7; 8; 9; 10; 11; 12; }; 5 -> 13; 7 -> 14; 10 -> 15; 12 -> { 16; 17; }; 16 -> 18;
        19 -> { 34; 35; 36; 37; 38; 39; 40; 41; }; 35 -> 42; 36 -> 43; 40 -> { 45; 46; }; 41 -> 44;
        20 -> { 21; 22; 23};
    }

    {   edge [weight = 10];
        A -> B [minlen = 2];
        B -> C [minlen = 3];
        C -> D [minlen = 3];
        D -> E [style = invis];
    }

    {   rank = same; A -> 1; }
    {   rank = same; B -> 3; }
    {   rank = same; C -> 19; }
    {   rank = same; D -> 20; }
} 
```

最后一棵树（引用 from`D`将落在左侧的椭圆下而没有 hidden `E`。如果这是不可接受的，则需要将来自上面树中的一个节点的隐藏边连接到 node `20`。

椭圆之间的间距可以通过`minlen =`属性进行调整。

# matlab - Matlab 3D插值

> ID：14879618
> 
> 赞同：2
> 
> 时间：2013-02-14T16:35:23.980
> 
> 标签：matlab, matrix, interpolation

我有 3 个矩阵（129x129）对应于 x、y 和 z 坐标。我使用了功能网格

```
mesh(x,y,z); 
```

绘制相应的图形。结果是一个球体。现在，我有另一组 x、y、z（又是 129），它给出了一个不同的球体。我想要的是在 MATLAB 中使用插值来获得介于两者之间的数字。我查看了[`interp3`](http://www.mathworks.com/help/matlab/ref/interp3.html)MATLAB 中的函数，但不知道如何处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:44:48.480

您似乎对表面从一个表面到另一个表面的*演变*感兴趣。我会建议以下过程`z(x,y)``z0``z1`

```
 T = 5; % number of "time steps" from z0 to z1
 t = linspace( 0, 1, T );
 for ii = 1 : T
     zt = t(ii).*z1 + (1-t(ii)).*z0;
     mesh( x, y, zt ); title( sprintf( 'time %d', ii ) );
     drawnow;
     pause(1); wait a sec
 end 
```

# ruby - Ruby 程序中的文件比较

> ID：14879631
> 
> 赞同：2
> 
> 时间：2013-02-14T16:36:09.590
> 
> 标签：ruby, rubygems, ruby-1.9, ruby-1.9.3

是否有一个插件/gem 可用于比较 Ruby 代码中的两个文件并返回差异？或者是否有一些工具可以与 Ruby 集成并调用 ruby​​ 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:54:46.467

我相信你可以使用这个库：[https ://github.com/samg/diffy](https://github.com/samg/diffy)

# php - Drupal 6 Multistep Forms：form_state 值在提交时为空

> ID：14879639
> 
> 赞同：1
> 
> 时间：2013-02-14T16:36:34.850
> 
> 标签：php, forms, drupal

我无法从多步表单中获取值以插入数据库。我得到的只是每个字段的空值。

这是代码：

```
 function multistep_profile_menu() {
  $items['multistep_profile'] = array(
 'title' => t('Multistep Profile'),
 'page callback' => 'drupal_get_form',
 'page arguments' => array('multistep_profile'),
 'type' => MENU_NORMAL_ITEM,
 'access arguments' => array('access content'),
 );
 return $items;
 }

 function multistep_profile(&$form_state) {
 // $form_state['storage']['step'] keeps track of what page we're on.
 if (!isset($form_state['storage']['step'])) {
 $form_state['storage']['step'] = 1;
 }

 //stores form data and carries it between steps
 $default_value = '';
 if (isset($form_state['storage']['values'][$form_state['storage']['step']])) {
  $default_value = $form_state['storage']['values'][$form_state['storage']['step']];
 }

 switch ($form_state['storage']['step']) {
 // Step 1 of Form
 case 1:
  $form['step_one'] = array(
    '#title' => t('Step 1'),
    '#type' => 'fieldset',
    '#description' => t('Just getting started.'),

  );
  // Full Name
  $form['step_one']['full_name'] = array(
    '#title' => t('Full Name'),
    '#type' => 'textfield',
    '#description' => t('Please enter your name.'),
    '#required' => TRUE,
    '#default_value' => isset($default_value['full_name']) ? $default_value['full_name'] :       '',

  );

  // College/University/Organization
  $form['step_one']['college'] = array(
    '#type' => 'textfield',
    '#title' => t('College/University/Organization'),
    '#default_value' => isset($default_value['college']) ? $default_value['college'] : '',
  );

  // Academic Disciplines
  $form['step_one']['academic'] = array(
    '#type' => 'textfield',
    '#title' => t('Academic Disciplines'),
    '#default_value' => isset($default_value['academic']) ? $default_value['academic'] : '',
    );
  break;

// Step 2 of Form
case 2:
  $form['step_two'] = array(
    '#title' => t('Step 2'),
    '#type' => 'fieldset',
    '#description' => t('Almost done.'),
  );

  // Job Title
  $form['step_two']['job_title'] = array(
    '#title' => t('Job Title'),
    '#type' => 'textfield',
    '#description' => t('Please enter your job title.'),
    '#default_value' => isset($default_value['job_title']) ? $default_value['job_title'] : '',
  );

  // Department
  $form['step_two']['department'] = array(
    '#type' => 'textfield',
    '#title' => t('Department'),
    '#default_value' => isset($default_value['department']) ? $default_value['department'] : '',
  );
  break;
// Step 3 of Form  
case 3:
  $form['step_three'] = array(
    '#title' => t('Step 3'),
    '#type' => 'fieldset',
    '#description' => t('Almost done, part 3.')
  );
  // Q1
  $form['step_three']['q1'] = array(
    '#title' => t('Why do you want to develop a globally networked course?'),
    '#type' => 'textarea',
    '#description' => t(''),

  );
  break;
//Confirmation  
case 4:
  $form['thanks'] = array(
    '#value' => '<p>'. t('Your Profile is complete.') .'</p>',
  );
  break;
  }

  //programmatically display buttons
 if ($form_state['storage']['step'] > 1) {
  $form['previous'] = array(
  '#type' => 'submit',
  '#value' => t('<< Previous'),
  );
 }
 if ($form_state['storage']['step'] != 4) {
 $form['next'] = array(
  '#type' => 'submit',
  '#value' => t('Continue >>'),
 );
 }
 else {
 $form['finish'] = array(
  '#type' => 'submit',
  '#value' => t('Finish'),
 );
 }
  return $form;
  }

 function multistep_profile_submit($form, &$form_state) {
 //Save the values for the current step into the storage array.
 $form_state['storage']['values'][$form_state['storage']['step']] = $form_state['values'];

 //Check the button that was clicked and change the step.
 if ($form_state['clicked_button']['#id'] == 'edit-previous') {
 $form_state['storage']['step']--;
  }
 elseif ($form_state['clicked_button']['#id'] == 'edit-next') {
 $form_state['storage']['step']++;
  }
 elseif ($form_state['clicked_button']['#id'] == 'edit-finish') {
//You should store the values from the form in the database here.

 dpm($form_state);
 // INSERT into DB

 $full_name = $form_state['values']['full_name'];
 $college = $form_state['values']['college']; 
 $academic = $form_state['values']['academic']; 
 $job_title = $form_state['values']['job_title'];
 $department = $form_state['values']['department'];
 $q1 = $form_state['values']['q1'];

 db_query("INSERT INTO {multistep_profile} (full_name, college, academic, job_title,    department, q1, created) VALUES
    ('%s', '%s', '%s', '%s', '%s', '%s', %d)", $full_name, $college, $academic, $job_title, $department, $q1, time());
  drupal_set_message(t('Your profile has been saved.'));

unset($form_state['storage']);

//Go to this page after completing the form.
//$form_state['redirect'] = 'node';
 }
 } 
```

使其进入数据库的唯一值是“创建”日期时间戳。

我运行了一个 DPM 来检查这些值是否在表单步骤之间传递，它们是，我只是不知道如何让它们插入到数据库中。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:37:01.167

查看您的提交功能，您（正确地）将在不同步骤中收集的值存储在`$form_state['storage']['values'][<step_number>]`. 这与您发布的 DPM 输出相匹配，即值显示在`$form_state['storage']['values'][1]...`、`$form_state['storage']['values'][2]...`等下方。

但是在您的最终提交处理中，您尝试在 下访问它们`$form_state['values'][...]`，就像这是一个单步表单一样。由于您的最后一步没有发布任何值，因此您不会在那里找到任何东西。

所以看起来你只需要改变你的最终值收集逻辑来从你之前放置它们的存储（子）数组中获取值:)

例如：

```
$full_name = $form_state['values']['full_name']; 
```

需要是

```
$full_name = $form_state['storage']['values'][1]['full_name']; 
```

对于其他值，依此类推。

# javascript - 与 Node.js 的双向通信

> ID：14879640
> 
> 赞同：0
> 
> 时间：2013-02-14T16:36:36.627
> 
> 标签：javascript, jquery, node.js, ajax, bidirectional

我想通过 jQuery 和 Ajax 将 JSON 数据从客户端发送到我的 Node.js 服务器（不可能使用 websockets）并返回 JSON 响应。我会通过 POST 来做到这一点，但由于 Node.js 服务器与 Apache 服务器（它提供我的客户端网站）分开运行，jQuery 由于同源策略而回退到 GET 消息。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-30T09:42:38.907

要启用 CORS，请添加`cors`node.js 文件：

```
var cors = require('cors');
app.use(cors()); 
```

# javascript - 在 Lab、Hcl 或任何感知均匀的颜色系统中改变色调和亮度

> ID：14879643
> 
> 赞同：9
> 
> 时间：2013-02-14T16:36:50.183
> 
> 标签：javascript, math, language-agnostic, colors, color-picker

如果很容易改变 HSL 颜色空间中的色调、饱和度和亮度。例如，请参阅[此 javascript 实现](https://github.com/harthur/color)。

生成配色方案也很容易，例如：类比、单色、三色、四色等。请参阅[此 javascript 实现](http://bgrins.github.com/TinyColor/)。

问题在于 HSL 颜色系统在感知上并不统一。
实际上这是一个真正的问题。

如果你不知道我在说什么，没关系。阅读它：[这里](http://boronine.com/2012/03/26/Color-Spaces-for-Human-Beings/)和[这里](http://vis4.net/blog/posts/avoid-equidistant-hsv-colors/)。（这两篇文章很短但很有价值，你真的应该阅读它们）。

解决方案是使用感知一致的色彩空间，例如：CieLab、CieLuv 或 Hcl。

问题是这些色彩空间也有超出色域的颜色（无法显示的颜色）。

要在 javascript 中使用不同的颜色空间，请查看[chroma.js](https://github.com/gka/chroma.js)或[chromatist](https://github.com/jrus/chromatist)。

在这个小介绍之后是我的实际问题：

我想生成感知上统一的配色方案（类似的、三色的、四色的、互补的等）。正如我在 Hsl 中提到的那样，它很简单：例如，要生成一个三元组方案，我只需将 HUE 旋转 120，然后使用 240，我就有一个三元组方案。

好吧，在 CieLab、Hcl 或 CieLuv 中，这并不是那么简单。在 Hcl（色相、色度、亮度）中，如果我在不改变色度和亮度的情况下将色相旋转 120 级，则生成的颜色可能无法显示（将在 RGB 空间之外）。

让我们总结一下这个问题：

**如何在感知一致的颜色系统（如 CieLab、Hcl、CieLuv 或任何其他感知一致的颜色空间）中生成配色方案？**

我想在javascript中实现这个，但基本上我想找到方法，所以问题是语言无关的。

我希望我们能一起找到一个聪明的方法:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:18:10.800

最后我基于HUSL（Human Friendly HSL）色彩空间解决了这个问题。这个色彩空间在感知上并不完全一致，但非常接近。

您可以在此处了解更多信息：

[http://boronine.com/husl/](http://boronine.com/husl/)

# ld - 我可以欺骗 libc (GLIBC_2.13) 加载它没有的符号（来自 GLIBC_2.15）吗？

> ID：14879644
> 
> 赞同：17
> 
> 时间：2013-02-14T16:36:50.497
> 
> 标签：ld, glibc, dynamic-linking, fortify-source

在我尝试让“Steam for Linux”在 Debian 上运行时，我遇到了一个问题。`libcef`（Chromium Embedded Framework）可以很好地使用`GLIBC_2.13`（Debian 测试中的 eglibc 可以提供），但需要一个讨厌的额外功能`GLIBC_2.15`（eglibc 无法提供）：

```
$ readelf -s libcef.so | grep -E "@GLIBC_2\.1[4567]"
1037: 00000000     0 FUNC    GLOBAL DEFAULT  UND __fdelt_chk@GLIBC_2.15 (49)
2733: 00000000     0 FUNC    GLOBAL DEFAULT  UND __fdelt_chk@@GLIBC_2.15 
```

我的攻击计划是`LD_PRELOAD`创建一个仅提供这些功能的 shim 库。这似乎不起作用。我真的很想避免安装`GLIBC_2.17`（因为它在 Debian 实验中；即使 Debian sid 仍然有`GLIBC_2.13`）。

* * *

这是我尝试过的。

`fdelt_chk.c`基本上是[从 GNU C 库](http://repo.or.cz/w/glibc.git/blob/a0f33f996f7986dbf37631a4577f8565b42df29e:/debug/fdelt_chk.c)中偷来的：

```
#include <sys/select.h>

# define strong_alias(name, aliasname) _strong_alias(name, aliasname)
# define _strong_alias(name, aliasname) \
  extern __typeof (name) aliasname __attribute__ ((alias (#name)));

unsigned long int
__fdelt_chk (unsigned long int d)
{
  if (d >= FD_SETSIZE)
    __chk_fail ();

  return d / __NFDBITS;
}
strong_alias (__fdelt_chk, __fdelt_warn) 
```

我的`Versions`脚本如下所示：

```
GLIBC_2.15 {
    __fdelt_chk; __fdelt_warn;
}; 
```

然后我按如下方式构建库：

```
$ gcc -m32 -c -fPIC fdelt_chk.c -o fdelt_chk.o
$ gcc -m32 -shared -nostartfiles -Wl,-s -Wl,--version-script Versions -o fdelt_chk.so fdelt_chk.o 
```

但是，如果我然后运行 ​​Steam（首先使用一堆额外的东西让它工作），加载器仍然拒绝找到符号：

```
% LD_LIBRARY_PATH="/home/tinctorius/.local/share/Steam/ubuntu12_32" LD_PRELOAD=./fdelt_chk.so:./steamui.so ./steam 
./steam: /lib/i386-linux-gnu/i686/cmov/libc.so.6: version `GLIBC_2.15' not found (required by /home/tinctorius/.local/share/Steam/ubuntu12_32/libcef.so) 
```

`.so`但是，我刚刚构建的版本也提供了版本符号：

```
% readelf -s fdelt_chk.so

Symbol table '.dynsym' contains 8 entries:
   Num:    Value  Size Type    Bind   Vis      Ndx Name
     0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND 
     1: 00000000     0 FUNC    GLOBAL DEFAULT  UND __chk_fail@GLIBC_2.3.4 (3)
     2: 0000146c     0 NOTYPE  GLOBAL DEFAULT  ABS _edata
     3: 0000146c     0 NOTYPE  GLOBAL DEFAULT  ABS _end
     4: 00000310    44 FUNC    GLOBAL DEFAULT   11 __fdelt_warn@@GLIBC_2.15
     5: 00000310    44 FUNC    GLOBAL DEFAULT   11 __fdelt_chk@@GLIBC_2.15
     6: 00000000     0 OBJECT  GLOBAL DEFAULT  ABS GLIBC_2.15
     7: 0000146c     0 NOTYPE  GLOBAL DEFAULT  ABS __bss_start 
```

在这一点上，我不知道我能做些什么来欺骗加载程序（谁？）选择我的符号。我是否朝着正确的方向前进？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T04:02:45.227

我遇到了同样的问题，尽管 Steam 没有。当我`2.15`的`fdelt_chk`系统有`2.14`. 我为像我们这样的简单案例找到了一个解决方案，我们可以轻松地为缺少的功能提供我们自己的实现。

我从您尝试实现功能并`LD_PRELOAD`对其进行编程的解决方案开始。使用`LD_DEBUG=all`（如 osgx 所建议的那样）表明链接器仍在寻找`2.15`，因此仅具有正确的符号是不够的，并且在某处还有一些其他版本控制机制。我注意到这两个`objdump -p`都`readelf -V`显示了对的引用`2.15`，因此我查找了 ELF 的文档并找到[了有关版本要求](http://refspecs.linuxfoundation.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/symversion.html)的信息。

所以我的新目标是将引用转换`2.15`为对其他事物的引用。我可以用引用一些较低版本的结构覆盖引用`2.15`的结构，例如`2.1`. 最后，经过一些试验和错误，我发现只需编辑正确的`Elfxx_Vernaux`（es？）`.gnu.version_r`就足够了，但我猜要警告黑客。

该`.gnu.version_r`部分是 16-byte`Elfxx_Verneed`和 16-byte的列表`Elfxx_Vernaux`。每个`Elfxx_Verneed`条目后跟相关的`Elfxx_Vernaux`es。据我所知，`vn_file`实际上有多少相关联`Elfxx_Vernaux`的 es，即使文档说`number of associated verneed array entries`. 不过，这可能只是我的一个误解。

因此，要开始进行编辑，让我们看一下来自`readelf -V`. 我剪掉了我们不关心的部分。

```
$ readelf -V mybinary
<snip stuff before .gnu.version_r>
Version needs section '.gnu.version_r' contains 5 entries:
 Addr: 0x00000000000021ac  Offset: 0x0021ac  Link: 4 (.dynstr)
<snip libraries that don't refer to GLIBC_2.15>
  0x00c0: Version: 1  File: libc.so.6  Cnt: 10
  0x00d0:   Name: GLIBC_2.3  Flags: none  Version: 19
  0x00e0:   Name: GLIBC_2.7  Flags: none  Version: 16
  0x00f0:   Name: GLIBC_2.2  Flags: none  Version: 15
  0x0100:   Name: GLIBC_2.2.4  Flags: none  Version: 14
  0x0110:   Name: GLIBC_2.1.3  Flags: none  Version: 13
  0x0120:   Name: GLIBC_2.15  Flags: none  Version: 12
  0x0130:   Name: GLIBC_2.4  Flags: none  Version: 10
  0x0140:   Name: GLIBC_2.1  Flags: none  Version: 9
  0x0150:   Name: GLIBC_2.3.4  Flags: none  Version: 4
  0x0160:   Name: GLIBC_2.0  Flags: none  Version: 2 
```

从这里我们看到该部分从 开始`0x21ac`。列出的每个文件将有一个`Elfxx_Verneed`后跟`Elfxx_Vernaux`每个子条目的 （如`GLIBC_2.3`）。我假设输出中信息的顺序将始终与文件中的顺序匹配，因为`readelf`只是转储结构。这是我的*整个* `.gnu.version_r`部分。

```
000021A0                                          01 00 02 00
000021B0   A3 0C 00 00  10 00 00 00  30 00 00 00  11 69 69 0D
000021C0   00 00 11 00  32 0D 00 00  10 00 00 00  10 69 69 0D
000021D0   00 00 0B 00  3C 0D 00 00  00 00 00 00  01 00 02 00
000021E0   BE 0C 00 00  10 00 00 00  30 00 00 00  13 69 69 0D
000021F0   00 00 08 00  46 0D 00 00  10 00 00 00  10 69 69 0D
00002200   00 00 07 00  3C 0D 00 00  00 00 00 00  01 00 02 00
00002210   99 0C 00 00  10 00 00 00  30 00 00 00  11 69 69 0D
00002220   00 00 06 00  32 0D 00 00  10 00 00 00  10 69 69 0D
00002230   00 00 05 00  3C 0D 00 00  00 00 00 00  01 00 02 00
00002240   AE 0C 00 00  10 00 00 00  30 00 00 00  11 69 69 0D
00002250   00 00 12 00  32 0D 00 00  10 00 00 00  10 69 69 0D
00002260   00 00 03 00  3C 0D 00 00  00 00 00 00  01 00 0A 00
00002270   FF 0C 00 00  10 00 00 00  00 00 00 00  13 69 69 0D
00002280   00 00 13 00  46 0D 00 00  10 00 00 00  17 69 69 0D
00002290   00 00 10 00  50 0D 00 00  10 00 00 00  12 69 69 0D
000022A0   00 00 0F 00  5A 0D 00 00  10 00 00 00  74 1A 69 09
000022B0   00 00 0E 00  64 0D 00 00  10 00 00 00  73 1F 69 09
000022C0   00 00 0D 00  70 0D 00 00  10 00 00 00  95 91 96 06
000022D0   00 00 0C 00  7C 0D 00 00  10 00 00 00  14 69 69 0D
000022E0   00 00 0A 00  87 0D 00 00  10 00 00 00  11 69 69 0D
000022F0   00 00 09 00  32 0D 00 00  10 00 00 00  74 19 69 09
00002300   00 00 04 00  91 0D 00 00  10 00 00 00  10 69 69 0D
00002310   00 00 02 00  3C 0D 00 00  00 00 00 00 
```

在这里简单谈谈结构，它以`Elfxx_Verneed`. 根据文档，我们可以看到会有 2 个`Elfxx_Vernaux`es，一个偏移 16 字节，下一个`Elfxx_Verneed`偏移 48 字节。这些偏移量来自当前结构的开头。从技术上讲，关联的`Elfxx_Vernaux`es 在当前之后可能并不相邻，`Elfxx_Verneed`但实际上在我浏览的所有文件中都是如此。

从这里我们可以通过几种不同的方式找到我们想要的文件（libc.so.6）。交叉引用字符串（我不会进入），找到`Elfxx_Verneed`计数为`0A 00`（10，与我们上面的输出匹配`readelf`），或者找到最后一个，`Elfxx_Verneed`因为它是最后一个`readelf`输出。无论如何，我的文件的正确位置是`0x226C`. 它的第一个`Elfxx_Vernaux`开始于`0x227C`.

我们想要找到`Elfxx_Vernaux`版本为`0C 00`（12，再次匹配我们`readelf`上面的输出）的 。我们看到`Elfxx_Vernaux`匹配的是 at`0x22CC`并且整个结构是`95 91 96 06 00 00 0C 00 7C 0D 00 00 10 00 00 00`。我们将覆盖前 12 个字节，以便单独保留偏移量。毕竟，我们只是在修改数据，而不是在结构中移动。

要选择要覆盖的数据，我们只需从不同`Elfxx_Vernaux`的 glibc 版本中复制它即可满足我们的要求。我选择了一个 for `2.1`，它`0x22EC`在我的文件中，带有 data `11 69 69 0D 00 00 09 00 32 0D 00 00 10 00 00 00`。因此，从中取出前 12 个字节并覆盖上面的前 12 个字节，这就是十六进制编辑。

当然，您可能需要处理多个引用。您的程序可能有多个要编辑的二进制文件。

此时，我们的程序仍然无法运行。但与其被告知类似的事情`GLIBC_2.15 not found`，不如抱怨失踪`__fdelt_chk`。现在我们执行问题中描述的 shim 和`LD_PRELOAD`ing，除了不是将我们的实现版本化为`2.15`，我们使用我们在十六进制编辑时选择的版本。此时程序应该运行。

此方法取决于能够为缺少的任何内容提供实现。我们`__fdelt_chk`非常简单，但我不怀疑在某些情况下提供实现可能比仅仅升级系统的 libc 更困难。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-06T15:20:16.953

值得一提的是，__fdelt_chk 函数与 glibc 2.15 中添加的 FORTIFY_SOURCE 功能有关。它启用了缓冲区溢出的编译时和运行时检查。

如果您能够使用添加的以下 CFLAGS 重新编译，它将构建一个向后兼容的二进制文件，而无需额外检查：

```
-U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=0 
```

# ios - 无法访问资源文件

> ID：14879649
> 
> 赞同：1
> 
> 时间：2013-02-14T16:37:10.240
> 
> 标签：ios, objective-c, embedded-resource

我正在开发一个 iOS 应用程序，我想将两个 CSV 文件加载到我的应用程序中。

如下图所示，这些文件位于*Resources*组中：

![在此处输入图像描述](../Images/40395e94db5428c36fcebba11cc6b284.png)

我用它来获取它的文件路径：

`filePath = [[NSBundle mainBundle] pathForResource:@"Familias" ofType:@"txt"];`

这是代码`Util readTitleFromCSV:`

```
+(void)readTitleFromCSV:(NSString*)path Entity:(NSString*)entityName
{
    AppDelegate* appDelegate =
        (AppDelegate*)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];

    NSString *fileDataString =
        [NSString stringWithContentsOfFile:path
                                  encoding:NSUTF8StringEncoding
                                     error:nil];

    NSArray *linesArray = [fileDataString componentsSeparatedByString:@"\n"];

    [ ... ]

} 
```

但是`fileDataString`为零，我没有收到任何错误。

**我究竟做错了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:43:33.383

将 an 传递`NSError`到您的文件中并检查呼叫失败的原因。可能存在一些编码问题。

在此之前，通过转到目标构建阶段窗格检查文件是否包含在您的应用程序包中（请参阅下图以获取指导）

![在此处输入图像描述](../Images/c0ba3e3be6d6f2e15640d53200b7fe74.png)

# excel - 选择B列中的最小值以获得A列excel中的相同值？

> ID：14879653
> 
> 赞同：2
> 
> 时间：2013-02-14T16:37:29.333
> 
> 标签：excel

我想从 column2 中获取例如最小值或最大值，以获得 column1 中的相同值。在我的示例中，我希望 column2 中的最大值为值 A（column1），即 18，而 B 为 27。

我已经尝试过使用数组功能，但我无法让它正常工作。

Tnx 获取任何提示或解决方案。

例子：

```
Column1 Column2 Max_value

A       1       18
A       5       18
A       18      18
A       3       18
A       4       18
B       2       27
B       5       27
B       18      27
B       27      27
B       5       27
B       3       27 
```

抱歉举个例子不好，但我无法发布图片，我的排名不够高:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:43:10.043

C2 的标准“数组公式”是这样的

`=MAX(IF(A$2:A$100=A2,B$2:B$100))`

确认`CTRL+SHIFT+ENTER`并向下复制列 - 根据需要调整范围

将**MAX**替换为**MIN**以获取下一列中的最小值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T17:13:29.810

这是带有数据透视表的小菜一碟。这是一种方法。

![Excel 数据透视表](../Images/f93044a06bc946b70fc37a13547a9ee2.png)

# php - 在执行 PHP rawurlencode() 之前用空格替换 %20 的目的是什么？

> ID：14879654
> 
> 赞同：3
> 
> 时间：2013-02-14T16:37:30.760
> 
> 标签：php, urlencode

这是一个非常愚蠢的问题，对不起。有一个很大且相当复杂的系统有一个错误，我设法将其追踪到这一部分

```
return str_replace('%2F', '/', rawurlencode(str_replace('%20', ' ', $key))); 
```

有一条注释解释了为什么要替换斜线 - 以保留路径结构，例如编码 1/编码 2/等。但是，没有任何解释为什么 %20 被空格替换，而这部分是错误的直接原因。我很想删除 str_replace() 但看起来它是出于某种原因放在那里的，我觉得这样做会破坏其他东西。有没有人遇到过类似的事情？也许这是对某些 PHP 错误的肮脏修复？任何猜测和见解都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:44:32.443

这样做会阻止`%20`（编码空间）被编码为`%2F20`. 但是，它仅用于防止双重转义空格；其他特殊字符仍会被双重编码。

这是错误代码的标志；首先不应允许传递给此函数的字符串具有编码字符。

我建议创建涵盖所有引用代码的单元测试，然后重构此函数以删除`str_replace()`以确保它不会破坏测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:38:35.440

首先想到的是作为一种针对双重编码的缓解技术。

并不是说我会建议以这种方式做这样的事情，因为它会很快变得非常混乱（而且人们已经想知道为什么只有那个实体，也许“他们”从未与任何其他实体发生过问题......但是）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:39:17.680

这可能是对`rawurlencode()`vs误解的结果`urlencode()`

`urlencode()``+`用符号替换空格

如果原作者认为`rawurlencode()`做同样的事情，他们会尝试对空格进行预编码，这样它们就不会变成`+`s

# svn - 如何检查从哪里引用文件/目录（svn：externals）

> ID：14879656
> 
> 赞同：1
> 
> 时间：2013-02-14T16:37:41.713
> 
> 标签：svn, svn-externals

我的问题涉及 Subversion VCS 和 svn:externals 的特性。我想**找出 externals 引用文件或目录的位置**。

不要被误解，我不想获得在我的工作目录中定义的外部列表，而是**当前存储库中的目录列表，其中选定的文件或目录由 svn:externals 属性引用。**

问题是，当项目 B 和 C 引用项目 A 时，似乎只有 B 和 C 知道这个事实，而 A 不知道。但是，当我更改项目 A 并重新编译它时，我想更新并重新编译所有其他依赖它的项目，以使它们保持最新。这就是我问的原因。

我的想法是创建一个 Windows 批处理文件，获取完整的外部列表，然后按文件或目录名称对其进行过滤，但这太可怕了，而且会永远持续下去！

```
set /p filter="File or directory name: "
svn propget svn:externals -R my_repository_address | find "%filter%" /I
pause 
```

谢谢！

# android - 在 Ubuntu 12.04 上安装 android-sdk 或 adt-bundle

> ID：14879657
> 
> 赞同：0
> 
> 时间：2013-02-14T16:37:38.370
> 
> 标签：android, linux, ubuntu

因此，在我以前的笔记本电脑上，我已经单独安装了`android-sdk-linux`and而没有，没有任何问题。另外，我将它安装在我的目录下。`Eclipse``adt-bundle``home`

现在我有了一台新的笔记本电脑（干净的石板），我想尝试将 adt-bundle 安装到正确/传统的目录中（我理解的是`/usr/local/`）。

但是在将捆绑包解压缩后，`/usr/local/`我遇到了一些奇怪的问题，比如`adb`不是可执行文件等。打开 Eclipse 会产生很多关于`SDK`、`ADT`和`adb`.

这样做的正确方法是什么？将不胜感激逐步或以其他方式全面的方法集。

另外，有什么理由我应该考虑单独安装`android-sdk-linux`而`Eclipse`不是使用`adt-bundle`?

提前致谢 ：）。这也将帮助我了解更多关于 Linux 文件系统和管理的知识！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:57:38.970

似乎问题出在您文件夹的 Linux 文件系统权限中。如果是主目录，则文件的所有者是您的用户，如果`/usr/local/`所有者是 root。您应该尝试更改文件夹的所有者：

```
chown -R <owner_name>:<owner_group> <your_dir> 
```

至于为什么要单独安装 sdk 和 Eclipse，我想你不会找到关键的。使用 bundle 可以更轻松地安装所有内容以与 Android 一起使用（我认为在这种情况下 Eclipse 已经配置，但是我不确切知道，因为我从未使用过这种方法）。

# javascript - 为表'tbody'生成水平滚动

> ID：14879660
> 
> 赞同：0
> 
> 时间：2013-02-14T16:37:48.520
> 
> 标签：javascript, jquery, html, css, tablesorter

我有一张带有thead、tbody 等的传统桌子。这对于 tablesorter.js 是必需的。

我有的：

```
<div id="tableWrapper">
  <div id="tableContainer" class="tableContainer">
    <table id="scrollTable">

      <thead class="fixedHeader">
        <tr class="tableHeader even">
          <th class="header">
            <span>Name</span>
          </th>
          <th class="header">
            <span>Address</span>
          </th>
        </tr>
      </thead>
      <tbody class="scrollContent">
        <tr class="tableRow">
          <td class="td_0">
            <span>
              Doe, John
            </span>
          </td>
          <td class="td_0">
            <span>
              Memory Lane
            </span>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div> 
```

CSS：

```
#tableWrapper tbody{
  color:#00467f;
  font-weight:500;
  position:absolute;
  overflow-y: auto;
  overflow-x: scroll;
  height:300px;
  width:300px;
}

#tableWrapper #tableContainer{
  width: 1100px;
  overflow: hidden;
}

#tableWrapper tbody>tr{
  width: 1200px;
} 
```

我保持表头部分垂直固定，因此 tbody 位置是绝对的，以将表头保持在 tbody 垂直滚动事件之外。我尝试将 tbody>tr 的宽度设置为高于 tbody 但没有运气。

tbody>tr 宽度自动缩小到 tbody 的大小。

问题：如果不水平滚动整个表格，我无法让 tbody 水平滚动条滚动，（因此垂直滚动条会消失在溢出中：隐藏）。我只想水平滚动 tbody，然后我有一些 jquery 将该事件绑定到标题。所以那里没有问题。只是试图让水平滚动条仅滚动 tbody 。

我可以让 tbody overflow-y:auto 工作，但不能让 overflow-x:auto 工作。有没有办法让 tr 更宽以使 tbody 左右滚动？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:52:02.470

啊，我想通了。

我添加了浮动：左；和 display:block 到 tbody>tr。

CSS：

```
 #tableWrapper tbody>tr{
  display:block;
  float:left;
   width: 1200px; /*desired width*/ 
  } 
```

# excel - 指向一个单元格，其中单元格名称由 2 个不同单元格的内容组成

> ID：14879665
> 
> 赞同：0
> 
> 时间：2013-02-14T16:38:01.010
> 
> 标签：excel, vba

在单元格 A2 中我有值 F，在 B2 中我有内容“4”，然后是指向 F4 单元格值的宏。我已经编写了以下代码，但它给出了对象错误。请帮忙

```
Sub TransferValues()

Dim rngA As Range
Dim rngB As Range
Dim srcAddress As Range
Dim destAddress As Range
Dim r As Long   'row iterator
VarW1 = "a.xlsx"
Sht1 = "Sheet1"
Set rngA = Range("H2", Range("H2").End(xlDown))
Set rngB = rngA.Offset(0, 1)

For r = 1 To rngA.Rows.Count
Set srcAddress = Range(rngA(r).Value & Range("H2").Value).Value
Set destAddress = Range(rngB(r).Value & Range("I2").Value).Value
destAddress.Value = srcAddress.Value
Next

End Sub) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:38:39.697

如果您不熟悉VBA - 您可以使用它`EVALUATE`：`INDIRECT`

```
x = Range(Range("A2").Value & Range("B2").Value).Value 
```

您也可以使用`Cells(row, column)`语法在单元格之间循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:45:00.500

试试这个公式：`=INDIRECT(A2&B2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:45:19.717

使用间接公式。对于您的示例， =indirect(A2&B2) 将为您提供 F4 中的值。

[这是一篇很好的](http://www.cpearson.com/excel/indirect.htm)文章，介绍了您可以使用间接方式做什么。

# python - 为什么使用 pop 填充列表会改变整个列表？

> ID：14879666
> 
> 赞同：0
> 
> 时间：2013-02-14T16:38:01.883
> 
> 标签：python, list

我有一个包含 16 个字符的列表。我想使用这个列表来填充一个包含 4 个子列表的新列表。这是我所拥有的：

```
alist = ['H', 'e', 'l', 'l', 'o', ',', ' ', 'w', 'o', 'r', 'l', 'd', '!', ' ', '1', '2']

list4x4 = [[None]*4]*4

for i in range(4):
    for j in range(4):
        list4x4[i][j] = alist.pop(0)

print list4x4 
```

这给了我

```
[['!', ' ', '1', '2'], ['!', ' ', '1', '2'], ['!', ' ', '1', '2'], ['!', ' ', '1', '2']] 
```

而我想要的结果是

```
[['H', 'e', 'l', 'l'], ['o', ',', ' ', 'w'], ['o', 'r', 'l', 'd'], ['!', ' ', '1', '2']] 
```

有人可以解释这里发生了什么吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:39:29.760

按照您构建列表的方式，您最终会用对同一内部列表的引用填充外部列表。例如：

```
>>> l = [[None]*4]*4
>>> print [ id(x) for x in l ]
[39323552, 39323552, 39323552, 39323552] 
```

所以你可以看到每个内部列表都有相同的ID——换句话说，它们都是同一个列表。

尝试：

```
list4x4 = [[None]*4 for _ in range(4)] 
```

# javascript - 优化 css ：包含表的许多表

> ID：14879669
> 
> 赞同：0
> 
> 时间：2013-02-14T16:38:08.020
> 
> 标签：javascript, jquery, css, twitter-bootstrap, datatables

我必须使用 jquery 插件 Datatables 和 twitter bootstrap css 渲染多达 1500 行。在每一行中，有一个表，最多可包含 50 行。

使用chrome开发者工具分析器和测试，渲染是一个真正的问题。例如，我有 250 个项目显示 219861 选择器匹配 .table th、.table td。

我该如何优化呢？

[我从bootstrapcdn](http://www.bootstrapcdn.com/)检索 twitter 引导程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:51:08.367

我是一名框架开发人员，我可以分享一些我在这一刻遇到并记得的事情

1.  在表格布局中写入表格时，不要使用

    ```
     'box-sizing:border-box' 
    ```

    而是使用“内容框”，否则如果您指定或未指定边框，它将在行之间而不是列之间产生间隙。没有样式可以帮助您删除它。这在实现嵌套表格布局时非常重要

2.  即使您使用带有表格布局的 DIV，请注意“最大宽度”在某些 mozilla 版本中无法正常工作，因为您可能必须维护一个占据 100% 宽度和 100% 高度的“包装器”DIV细胞。

3.  维护单元格内的块杠杆包装器，如果它是表格，则对其应用皮肤，因为悬停和焦点将无法正确应用。示例：在某些现代浏览器中也观察到半填充悬停皮肤。

4.  虽然动态嵌入这些元素而不是动态创建元素并附加、准备 HTML 字符串并附加它，但它确实表现得非常好......我已经观察到这一点。但是修改 html 渲染器可能看起来很脏，但我们需要的只是性能

这些是我在这个时候记得的一些事情。如果我在某个地方错了，请纠正我..

*建议*如果您也针对移动浏览器，那么请使用表格布局，直到您在处理 div 布局方面具有良好的专业知识。`Floats`在某些移动设备中无法正常工作。并且表格也可以通过移动设备中的媒体查询正确缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T11:42:59.743

我最近遇到了类似的情况，表格数据太多，不得不通过分页来解决。HTML 必须在开始渲染之前提取所有这些信息并构建那个巨大的表格，因此速度非常慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:13:34.550

最后，我将显示的最大行数限制为 200。不允许“显示所有内容”。

我也会尝试优化css。似乎有很多我不使用的引导 css 的定义。

# maven - 如何使用 maven 从命令行运行 grails generate-controller？

> ID：14879672
> 
> 赞同：2
> 
> 时间：2013-02-14T16:38:20.883
> 
> 标签：maven, grails

我正在寻找一种从命令行为 mavenized grails 2.1.0 项目（即 grails-maven-plugin 2.1.0）运行“生成控制器”的方法。我尝试了以下方法：

*   `mvn grails:generate-controller`- 运行此程序时，我收到一条错误消息“java.lang.IllegalStateException：未启用用户输入，无法获取输入流”。由于某种原因，grails 似乎无法从控制台读取（以获取域类的名称）。
    *   [http://jira.grails.org/browse/MAVEN-172](http://jira.grails.org/browse/MAVEN-172)描述了这个错误；我尝试了这里提到的两种解决方案（删除 grails 项目缓存并运行 mvn clean），但都没有解决问题
*   `mvn grails:exec "grails:generate-controller"`- 这导致`org.codehaus.groovy.grails.cli.ScriptNotFoundException`

**有没有办法通过命令行参数指定域类的名称**- 即。像`mvn generate-controller -DclassName=my.domain.class.name`什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:49:19.923

它不一定直观，但通常*mvn grails:help*很有用。

**有关创建域类和控制器的帮助**

```
mvn grails:help -Ddetail=true -Dgoal=generate-controller
mvn grails:help -Ddetail=true -Dgoal=create-domain-class 
```

**示例域类和控制器**

**根据收到的评论更新**：如果您碰巧使用 MS Windows，请引用

*-DdomainClassName*参数值如下。

```
mvn grails:create-domain-class -DdomainClassName=com.example.Test
mvn grails:generate-controller -DdomainClassName=com.example.Test 
```

[更新]

明目张胆的广告，但我将很快为 Maven 和 Grails 集成制作第二个视频，因为您不是唯一一个有类似问题的人。第一个可以在[这里](http://www.youtube.com/watch?v=tqGN61hiciE)找到，非常通用，适合初学者。

希望能帮助到你。

# mysql - 获取最后三个用户的所有操作

> ID：14879676
> 
> 赞同：1
> 
> 时间：2013-02-14T16:38:31.790
> 
> 标签：mysql, sql

我有一个历史记录表，其中存储用户在延期帖子上所做的所有操作

```
 id     | post_id | action    |  user_id
    1      |  5      | 1         |  3
    2      |  6      | 4         |  1
    3      |  6      | 4         |  4
    4      |  7      | 2         |  6
    5      |  7      | 3         |  2
    6      |  5      | 2         |  3
    7      |  4      | 5         |  3 
```

我想要的是让最后三个用户完成所有操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:41:11.027

假设`ID`是一`AUTO_INCREMENT`列，

```
SELECT  a.user_ID, a.action
FROM    tableName a
        INNER JOIN
        (
            SELECT  DISTINCT user_ID
            FROM    tableName   
            ORDER   BY ID DESC
            LIMIT   3
        ) b ON user_ID = b.user_ID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/7d153/3)

# red5 - red5 0.8 申请录音

> ID：14879679
> 
> 赞同：0
> 
> 时间：2013-02-14T16:38:39.777
> 
> 标签：red5

我可以在哪里下载用于在 red5 0.8 中录制的应用程序。我使用 0.8 版本，因为 1.0.1 有问题，例如，如果我录制一个 60 秒的新流，录制的文件大约是 40 秒。

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:51:24.420

问题是你用什么来“记录”。有不同的方法，基于客户端的 NetStream.publish("stramname", "record") 或服务器端流记录。但是使用 Red5 0.8 根本不会改善录音，无论您使用哪种录音功能。服务器端录制更复杂，但它创建的视频质量要好得多，因为您可以更好地控制录制过程。所以如果你有一些Java背景，你应该这样做。我最近与另一位用户讨论过这个问题：[Red5 视频流录制正在中断](https://stackoverflow.com/q/12845920/1448704)

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T12:36:38.190

如需录制，请查看已修补的 Red5 1.0.2 [，网址为：现在可以使用 Red5 通过慢速连接录制高质量 (HD) 视频](http://nusofthq.com/blog/recording-high-quality-hd-video-over-slow-connections-with-red5-is-now-possible/)

[该补丁还应用于 Red5 在 GitHub 上的源代码，](https://github.com/Red5/red5-server/commit/7e4253f577a88d50613900986a46e5a915859123)它将包含在下一个正式版本（1.0.3）中。

我是那个补丁的作者，我做了它来修复延迟写入记录机制 Red5。它效果很好，我们将它用于我们的[高清视频录制演示](http://hdfvr.com/demo/hdlauncher)，您可以在其中查看它是如何工作的。

# java - 使用 ActionBarSherlock 自定义布局

> ID：14879684
> 
> 赞同：0
> 
> 时间：2013-02-14T16:38:49.340
> 
> 标签：java, android, actionbarsherlock

这是我想在 ActionBar 中显示的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/etSearch"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1.0"
        android:singleLine="true" />

    <ImageButton
        android:id="@+id/btnSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0"
        android:src="@drawable/ic_magnifying_glass" />

</LinearLayout> 
```

下面是设置 ActionBar 的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.content_frame);
        View customNav = LayoutInflater.from(this).inflate(R.layout.custom_action_bar, null);
        getSupportActionBar().setCustomView(customNav);
        getSupportActionBar().setDisplayShowCustomEnabled(true);
        getSupportActionBar().setDisplayShowTitleEnabled(false);
} 
```

我希望 TextView 填充 ActionBar。但是，它看起来像这样：

![在此处输入图像描述](../Images/e689e3a8866c00538bb14a32dbb6db10.png)

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:00:27.323

您尝试过吗：在 EditText 中：android:weight=80

在 ImageButton 中：android:weight=20

无论如何，RelativeLayout 在 ActionBarSherlock 中不起作用？更好

# java - 验证 LDAP 用户并检查他们是否属于某个组

> ID：14879686
> 
> 赞同：-1
> 
> 时间：2013-02-14T16:38:57.427
> 
> 标签：java, ldap

使用以下代码，我可以使用我的本地 LDAP 服务器绑定/验证`testu`带有密码的用户。`testp`在我的 DIT 中，这个用户也属于一个组，比如说`Administrators`。如何获取他所属组的名称，反之亦然检查该用户是否属于该组？

```
public static void main(String[] args) 
{
    Properties properties = new Properties();
    properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory" );
    properties.put(Context.PROVIDER_URL, "ldap://localhost:10389");

    // set properties for authentication
    properties.put(Context.SECURITY_AUTHENTICATION, "simple");
    properties.put(Context.SECURITY_PRINCIPAL, "cn=testu,ou=users,ou=system");
    properties.put(Context.SECURITY_CREDENTIALS, "testp");

    try {
        InitialLdapContext ctx = new InitialLdapContext(properties, null);          
    } catch (NamingException e) {
        e.printStackTrace();
    }
} 
```

在我的 LDAP 浏览器中，在树结构中，我有用户`testu`

```
cn=testu,ou=users,ou=system 
```

当`Administrators`小组在

```
cn=Administrators,ou=groups,ou=system 
```

现在我什至不认为我已经获得了该组中的用户，但假设我做了你会如何寻找它？我基本上是在询问如何通过 LDAP 相对于经过身份验证的用户进行搜索查询。

给定以下组：

```
cn=operations,ou=groups,ou=system
objectClass:groupOfNames (structural)
objectClass:top (abstract)
cn:operations
member:cn=soto,ou=users,ou=system
member:cn=testu,ou=users,ou=system 
```

而这个用户：

```
cn=testu,ou=users,ou=system
objectClass:organizationalPerson (structural)
objectClass:person (structural)
objectClass:top (abstract)
cn:testu
sn:some name
userPassword:SHA hashed password    [testp] 
```

我将如何从该用户那里获得组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:20:24.537

如果您执行了绑定，那么您知道用户的 DN，您可以执行如下搜索请求：

基础搜索 DN：ou=system

```
(member=cn=testu,ou=users,ou=system) 
```

如果您有权限，这将返回用户是 DIRECT 成员的所有组。它不包括任何嵌套的组成员身份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:18:27.213

据我所知，LDAP 不会将有关当前登录的用户的任何组信息附加到上下文中。您只能通过哪些行为有效和哪些无效行为来间接了解他/她的权力 - 确保您不打算那样做。

如果要检查用户是否在某个组中，或者通常要发送任何不应该从刚刚登录（或未登录）的用户的有限角度查看世界的查询，我会在ldap（该应用程序的“应用程序连接”用户），然后通过连接到该用户来提交查询。（这与大多数 SQL Server 类似，您拥有可以执行所有操作的 DB Admin 帐户，但是如果您有一个应用程序，您不会使用 Admin 帐户连接到 DB，而是为该应用程序创建一个特殊用户，该用户只能读写它需要的数据库/表）。

这很可能是您已经想到的解决方案，所以这篇文章的实际“答案”部分是据我所知没有其他方法。

# c# - 使用覆盖初始化对象

> ID：14879687
> 
> 赞同：1
> 
> 时间：2013-02-14T16:39:09.900
> 
> 标签：c#

是否可以用一些等效于 override 来代替 new 运算符来初始化一个对象？

假设我有一些对象，我想将它转换为一些派生类型。让我们称它们为 objBase 和 objDerived。

所以假设这个 objDerived 类型有一个在 objBase 方法上使用 new 修饰符的方法，但我想将新方法与我的强制转换 objBase 对象一起使用。有什么方法可以说相当于：

```
objBase myObjB = new objBase();
myObjB = *override* objDervied(); 
```

也许想要这样做是没有意义的，或者我缺少一些非常简单的替代方案？我很确定一些人为的例子可能会显示它可能有用的一些时间......我实际上并不需要这样做，但我只是想知道它的最后几天，因为我了解了新的修饰符关键字方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:44:29.877

在这种情况下，无需覆盖。您始终可以直接将派生对象引用分配给基类变量：

```
objBase myObjB = new objDerived(); 
```

请注意，创建实例然后立即重新分配也不是好习惯：

```
// Don't instantiate an object in the first line here, 
// since you're going to assign it in the next line
objBase myObjB;  //= new objBase();
myObjB = new objDervied(); 
```

至于：

> 所以假设这个 objDerived 类型有一个在 objBase 方法上使用 new 修饰符的方法，但我想将新方法与我的强制转换 objBase 对象一起使用。

您只能`new`通过分配或转换回派生类来调用隐藏基类方法的方法：

```
objBase myObjB = new objDerived();
((objDerived)myObjB).Method(); // Will call objDerived.Method 
```

`myObjB`如果实际上没有引用`objDerived`实例，这将在运行时失败。

这里的另一个选择是使用`dynamic`. 使用`dynamic`for 您的变量将导致发生动态调度，这将使变量有效地表现得好像它始终是“最衍生”的类型，并调用您的新方法。这实际上很有用，因为您可以在 C# 中有效地进行[多次调度](http://en.wikipedia.org/wiki/Multiple_dispatch)，即使它通常是静态类型的。这是一个完整的工作示例：

```
void Main()
{
    Base b = new Derived();  
    dynamic d = b;
    Console.WriteLine(d.Output());//This prints "Derived"
}

public class Base {
public string Output() {
        return "Base";
}
}

public class Derived:  Base {
    public new string Output() {
        return "Derived";
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:46:01.237

没门！

您不能在运行时覆盖成员。

这将是动态语言的更多功能，而不是像 C# 这样的静态类型和编译语言。例如，您可以在 JavaScript 中执行此操作，因为您可以在运行时重用标识符：

```
var someJsObject = { myMethod: function() { } };
someJsObject.myMethod = function() { alert("hey, I did it!"); }; 
```

顺便说一句，我觉得这不是一个好习惯，因为一件事是使用动态语言（*鸭子打字*），另一件事是“嘿，我是鸭子，我曾经说*嘎嘎嘎嘎*，但现在我在吠叫鸭！”。这是可悲的。

## 更新

*嗯......*事实上，你可以使用 C# 和 an 来做这样的事情`ExpandoObject`：

```
dynamic expando = new ExpandoObject();
expando.MyMethod = new Func<bool>(() => true);

dynamic expando2 = new ExpandoObject();
expando.MyMethod = new Func<string>(() => "What? I've changed!");

expando.MyMethod = expando2.MyMethod;

// This will set "What? I've changed!"
string result = expando.MyMethod(); 
```

但这仍然是一个不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:48:37.623

> 所以假设这个 objDerived 类型有一个在 objBase 方法上使用 new 修饰符的方法，但我想将新方法与我的 cast objBase 对象一起使用

你要的是这样的东西，我想：

```
public class Base {
   public string Write() {
        return "Base";
   }
}

public class Derived:  Base {

    public new string Write() { //HIDES BASE CLASS METHOD
        return "Derived";
   }
}

void Main()
{
    Base b = new Derived();  
    b.Write();//THIS WILL RETURN "BASE"

    Derived d = new Derived();  
    d.Write();//THIS WILL RETURN "DERIVED"
} 
```

你**不能**这样做，因为`new`派生类的成员只覆盖*了*具体的对象*类型*。

要以您希望的方式工作，因此仅使用基本类型，您需要使用基本的 OOP 概念，例如`inheritance`和`virtual/absrtact`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T16:41:41.720

```
objBase myObjB = new objDervied(); 
```

# c - strtol 中的别名参数

> ID：14879690
> 
> 赞同：6
> 
> 时间：2013-02-14T16:39:18.080
> 
> 标签：c, restrict-qualifier, strtol

以下是`strtol`必须根据`§ 7.22.1.4`C11 (n1570) 声明的方式：

```
#include <stdlib.h>

long int strtol (const char *restrict nptr,
                 char **restrict endptr,
                 int base); 
```

据我所知，`restrict`关键字意味着左值引用的对象`*nptr`只能用它或直接从它派生的值来访问。

然而，很多程序员，甚至是有经验的程序员，都是`strtol`这样使用的：

```
#include <stdlib.h>

strtol (p, &p, 10); 
```

在这种情况下`**endptr == **&p == *p == *nptr`， 和行为未定义。这样对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T16:47:37.880

不，没有任何东西可以通过`**endptr`in访问`strtol`。只有`*endptr`，一个完全独立的对象，被访问。

# javascript - 使用 JavaScript 获取位数

> ID：14879691
> 
> 赞同：158
> 
> 时间：2013-02-14T16:39:18.250
> 
> 标签：javascript, count, digits

正如我的帖子标题所示，我想知道`var number`有多少位数。例如：如果`number = 15;`我的函数应该返回`2`. 目前，它看起来像这样：

```
function getlength(number) {
  return number.toString().length();
} 
```

但 Safari 表示由于以下原因无法正常工作`TypeError`：

```
'2' is not a function (evaluating 'number.toString().length()') 
```

如您所见，`'2'`实际上是正确的解决方案。但这是为什么呢`not a function`？

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2013-02-14T16:39:43.913

`length`是属性，不是方法。你不能调用它，因此你不需要括号`()`：

```
function getlength(number) {
    return number.toString().length;
} 
```

**更新：**如评论中所述，上述示例不适用于浮点数。为了使其正常工作，我们可以用 去掉句点`String(number).replace('.', '').length`，或者用正则表达式计算数字：`String(number).match(/\d/g).length`。

就速度而言，获得给定数字中位数的最快方法可能是数学计算。对于*正整数*，有一个很棒的算法`log10`：

```
var length = Math.log(number) * Math.LOG10E + 1 | 0;  // for positive integers 
```

对于所有类型的整数（包括负数），[@Mwr247](https://stackoverflow.com/a/28203456/1249581)提供了一个出色的优化解决方案，但使用时要小心`Math.log10`，因为许多旧版浏览器不支持它。所以替换`Math.log10(x)`为`Math.log(x) * Math.LOG10E`将解决兼容性问题。

[由于浮点数学的众所周知的行为，](https://stackoverflow.com/q/588004/1249581)为十进制数创建快速数学解决方案并不容易，因此强制转换为字符串的方法将更加简单和万无一失。正如[@streetlogics](https://stackoverflow.com/a/23416775/1249581)所提到的，可以使用简单的数字到字符串连接来完成快速转换，从而将*替换*解决方案转换为：

```
var length = (number + '').replace('.', '').length;  // for floats 
```

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2015-01-28T22:14:30.197

这是一个数学答案（也适用于负数）：

```
function numDigits(x) {
  return Math.max(Math.floor(Math.log10(Math.abs(x))), 0) + 1;
} 
```

以及上述的优化版本（更有效的按位运算）：*

```
function numDigits(x) {
  return (Math.log10((x ^ (x >> 31)) - (x >> 31)) | 0) + 1;
} 
```

本质上，我们首先获取输入的绝对值，以允许负值正常工作。然后我们运行 log10 运算，得到输入的 10 的幂（如果您在另一个底数中工作，您将使用该底数的对数），即位数。然后我们将输出降低到只获取整数部分。最后，我们使用 max 函数来固定十进制值（0 到 1 之间的任何小数值都只返回 1，而不是负数），并将最终输出加 1 以获取计数。

以上假设（基于您的示例输入）您希望计算整数的位数（因此 12345 = 5，因此 12345.678 = 5 也是如此）。如果您想计算值中的总位数（因此 12345.678 = 8），请在上述任一函数的“返回”之前添加：

```
x = Number(String(x).replace(/[^0-9]/g, '')); 
```

* * *

* 请注意，JavaScript 中的按位运算仅适用于 32 位值（因此最大值为 2,147,483,647）。因此，如果您期望数字大于该数字，请不要使用按位版本，否则它根本行不通。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-05-01T21:17:09.893

由于这是在 Google 搜索“javascript get number of digits”时出现的，我想把它扔在那里，有一个更短的替代方案，它依赖于为您完成的内部转换：

```
var int_number = 254;
var int_length = (''+int_number).length;

var dec_number = 2.12;
var dec_length = (''+dec_number).length;

console.log(int_length, dec_length); 
```

产量

```
3 4 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-11-22T04:42:52.133

得到长度很简单

```
 `${NUM}`.length 
```

其中 NUM 是获取长度的数字

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-11-04T17:35:17.217

我还在学习 Javascript，但不久前我在 C 中提出了这个函数，它使用数学和 while 循环而不是字符串，所以我为 Javascript 重新编写了它。也许这可以以某种方式递归地完成，但我仍然没有真正掌握这个概念:(这是我能想到的最好的。我不确定它可以处理多大的数字，当我输入一百位数。

```
function count_digits(n) {
    numDigits = 0;
    integers = Math.abs(n);

    while (integers > 0) {
        integers = (integers - integers % 10) / 10;
        numDigits++;
    }
    return numDigits;
} 
```

编辑：仅适用于整数值

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-12-26T15:48:35.390

你可以在这个技巧中使用：

```
(''+number).length 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-05-22T12:01:07.547

```
var i = 1;
while( ( n /= 10 ) >= 1 ){ i++ } 
```

```
23432          i = 1
 2343.2        i = 2
  234.32       i = 3
   23.432      i = 4
    2.3432     i = 5
    0.23432 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-12T07:59:22.397

如果您需要数字（在分隔符之后），您可以简单地拆分数字和计算长度第二部分（在点之后）。

```
function countDigits(number) {
    var sp = (number + '').split('.');
    if (sp[1] !== undefined) {
        return sp[1].length;
    } else {
        return 0;
    }
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-07-28T09:17:31.690

请使用以下表达式获取数字的长度。

```
length = variableName.toString().length 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-08T13:09:57.207

**注意：**此功能将**忽略***小数点*后的数字，如果你想用小数计数，请删除`Math.floor()`. 直接点看这个！

```
function digitCount ( num )
{
     return Math.floor( num.toString()).length;
}

 digitCount(2343) ; 
```

// **ES5+**

```
 const digitCount2 = num => String( Math.floor( Math.abs(num) ) ).length;

 console.log(digitCount2(3343)) 
```

**基本上**这里发生了什么。`toString()`以及`String()`用于将数字转换为字符串的相同内置函数，一旦我们转换，我们将通过内置函数找到字符串的长度`length`。

**警告：**但是这个函数对于负数不能正常工作，如果你想玩负数然后[检查这个答案](https://stackoverflow.com/questions/14879691/get-number-of-digits-with-javascript/28203456#28203456)或者简单地把`Math.abs()`它;

为你加油！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-03-12T14:21:53.713

```
`You can do it by simple loop using Math.trunc() function. if in interview interviewer ask to do it without converting it into string`
    let num = 555194154234 ;
    let len = 0 ;
    const numLen = (num) => {
     for(let i = 0; i < num ||  num == 1 ; i++){
        num = Math.trunc(num/10);
        len++ ;
     }
      return len + 1 ;
    }
    console.log(numLen(num)); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-03-18T22:10:14.427

虽然没有从技术上回答这个问题，但如果您正在寻找数字小数部分的长度（例如`1.35 => 2`或`1 => 0`），这可能会对您有所帮助：

```
function fractionalDigitLength(num) {
  if (Number.isInteger(num)) return 0;
  return String(num).split('.')[1].length;
} 
```

注意：我在这里发布的原因是因为我认为人们在谷歌上搜索这个答案可能还需要一个解决方案来获取数字的小数长度。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-19T10:56:35.030

对于整数位，我们还可以实现连续除以 10 ：

```
var getNumberOfDigits = function(num){
    var count = 1;
    while(Math.floor(num/10) >= 1){
        num = Math.floor(num/10);
        ++count;
    }
    return count;
}

console.log(getNumberOfDigits(1))
console.log(getNumberOfDigits(12))
console.log(getNumberOfDigits(123))
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-13T16:01:16.280

一种同时适用于负数和浮点数的解决方案，并且不调用任何昂贵的字符串操作函数：

```
function getDigits(n) {
   var a = Math.abs(n);            // take care of the sign
   var b = a << 0;                 // truncate the number
   if(b - a !== 0) {               // if the number is a float
       return ("" + a).length - 1; // return the amount of digits & account for the dot
   } else {
       return ("" + a).length;     // return the amount of digits
   }
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-06-05T10:17:18.447

两位数：如果您需要 ECMAScript 6 (ES6) 中的两位或更多位数字的简单功能：

```
const zeroDigit = num => num.toString().length === 1 ? `0${num}` : num; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-10-14T07:21:31.227

这是我的解决方案。它适用于正数和负数。希望这可以帮助

```
function findDigitAmount(num) {

   var positiveNumber = Math.sign(num) * num;
   var lengthNumber = positiveNumber.toString();

 return lengthNumber.length;
}

(findDigitAmount(-96456431);    // 8
(findDigitAmount(1524):         // 4 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-08-17T10:00:30.003

问题陈述：**计数数字/字符串不使用 string.length()** jsfunction。解决方案：我们可以通过 Forloop 来做到这一点。例如

```
for (x=0; y>=1 ; y=y/=10){
  x++;
}

if (x <= 10) {
  this.y = this.number;                
}   

else{
  this.number = this.y;
} 
```

}

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-10-24T07:09:48.630

您可以使用 Math.abs 函数将负数变为正数并保持正数不变。然后您可以将数字转换为字符串并提供长度。

```
Math.abs(num).toString().length; 
```

我发现这种方法最简单，而且效果很好。但是如果你确定你会得到正数，你可以把它变成字符串，然后使用长度。

```
num.toString().length 
```

* * *

## 回答 #19

> 赞同：-7
> 
> 时间：2016-06-02T06:23:53.160

length 属性返回字符串的长度（字符数）。

空字符串的长度为 0。

```
var str = "Hello World!";
var n = str.length; 
```

**n 的结果将是：12**

```
 var str = "";
    var n = str.length; 
```

**n 的结果将是：0**

* * *

> **数组长度属性：**

* * *

length 属性设置或返回数组中元素的数量。

```
var fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.length; 
```

**结果将是：4**

***句法：***

返回数组的长度：

```
array.length 
```

设置数组的长度：

```
array.length=number 
```

# c# - 使用 R.Net 从 R 评估中检索结果

> ID：14879697
> 
> 赞同：6
> 
> 时间：2013-02-14T16:39:37.140
> 
> 标签：c#, r, r.net

我正在使用 R.Net 1.5 尝试使用 ARIMA 进行简单的预测。我尝试过使用 R 2.14 和 R 2.15。我使用的是 Visual Studio 2012 目标 .NET 4，尽管我也尝试过 .NET 4.5 和 Visual Studio 2010。

这是我写的一段代码：

```
string rhome = System.Environment.GetEnvironmentVariable("R_HOME");
        if (string.IsNullOrEmpty(rhome))
            rhome = @"C:\Program Files\R\R-2.14.0";

        System.Environment.SetEnvironmentVariable("R_HOME", rhome);
        System.Environment.SetEnvironmentVariable("PATH", System.Environment.GetEnvironmentVariable("PATH") + ";" + rhome + @"\bin\x64");
        using (REngine engine = REngine.CreateInstance("RDotNet"))
        {

            engine.Initialize();

            NumericVector testGroup = engine.CreateNumericVector(submissions);
            engine.SetSymbol("testGroup", testGroup);
            engine.Evaluate("testTs <- c(testGroup)");
            NumericVector ts = engine.GetSymbol("testTs").AsNumeric();

            engine.Evaluate("tsValue <- ts(testTs, frequency=1, start=c(2010, 1, 1))");
            engine.Evaluate("library(forecast)");
            engine.Evaluate("arimaFit <- auto.arima(tsValue)");
            engine.Evaluate("fcast <- forecast(tsValue, h=36)");
            engine.Evaluate("plot(fcast)");

            NumericVector nv = engine.GetSymbol("fcast").AsNumeric(); 
```

当我尝试检索数字向量时它失败了。TI 在这里遇到一些错误。第一个是“错误：对象不能被强制输入'double'”，第二个是“错误：捕获访问冲突 - 继续小心”

如果我将预测检索为 GenericVector，我会得到一个 RDotNet.SymbolicExpressions 列表。我已经遍历了这些以查看它们包含的内容，它似乎确实与 ARIMA 函数有关，但我无法找到实际的预测输出。我可以找到输入和其他相关值以及一堆我无法确定它们是什么的数字列表。

如果我在 Revolution 中运行脚本，我可以看到输出应该是什么，这就是我确定 R.Net 的输出是否准确的方式。我想 R.Net 执行预测的方式可能与 Revolution 不同（尽管我认为不太可能），并且 genericvector 中的输出之一确实是正确的输出。

这是 GenericVector 初始化。我进行了全面的尝试，仅出于调试目的而捕获：在 DynamicVector 内部是我可以实际检查细节的地方。

```
GenericVector newVector = engine.GetSymbol("fcast").AsList();

            foreach (var vector in newVector)
            {
                try
                {
                    DynamicVector dv = vector.AsVector();
                }
                catch (Exception)
                {
                } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T17:41:27.387

这不是 R.Net 问题，您只是尝试运行错误的脚本。让我们在纯 R 上运行您的代码：

```
> testTs <- c(1, 2, 3)
> tsValue <- ts(testTs, frequency=1, start=c(2010, 1, 1))
> library("forecast")
> arimaFit <- auto.arima(tsValue)
> fcast <- forecast(tsValue, h=36)
> plot(fcast) 
```

现在`class(fcast)`等于`forecast`：

```
> class(fcast)
[1] "forecast"
> as.numeric(fcast)
Error: (list) object cannot be coerced to type 'double' 
```

fcast结构：

```
> str(fcast)
List of 11
 $ method   : chr "Mean"
 $ level    : num [1:2] 80 95
 $ x        : Time-Series [1:3] from 2010 to 2012: 1 2 3
 $ xname    : chr "object"
 $ mean     : Time-Series [1:36] from 2013 to 2048: 2 2 2 2 2 2 2 2 2 2 ...
 $ lower    : mts [1:36, 1:2] -0.177 -0.177 -0.177 -0.177 -0.177 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "80%" "95%"
  ..- attr(*, "tsp")= num [1:3] 2013 2048 1
  ..- attr(*, "class")= chr [1:2] "mts" "ts"
 $ upper    : mts [1:36, 1:2] 4.18 4.18 4.18 4.18 4.18 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : NULL
  .. ..$ : chr [1:2] "80%" "95%"
  ..- attr(*, "tsp")= num [1:3] 2013 2048 1
  ..- attr(*, "class")= chr [1:2] "mts" "ts"
 $ model    :List of 4
  ..$ mu   : num 2
  ..$ mu.se: num 0.577
  ..$ sd   : num 1
  ..$ call : language meanf(x = object, h = h, level = level, fan = fan)
 $ lambda   : NULL
 $ fitted   : Time-Series [1:3] from 2010 to 2012: NA 1 1.5
 $ residuals: Time-Series [1:3] from 2010 to 2012: NA 1 1.5
 - attr(*, "class")= chr "forecast" 
```

# ssis - 调试时如何查看平面文件连接的 ConnectionString 值？

> ID：14879698
> 
> 赞同：2
> 
> 时间：2013-02-14T16:39:39.403
> 
> 标签：ssis, connection-string, flat-file

似乎有两种方法可以在`FlatFile`连接属性中设置连接字符串：

1.  使用`ConnectionString`属性
2.  使用`ConnectionString`表达式

将使用哪一个？有没有办法在调试过程中看到这个值，或者打印出来（添加一个新任务，“在文件中打印”，一个合理的解决方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:41:12.120

与 SSIS 中的所有内容一样，表达式用于覆盖属性的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:48:01.937

***`ConnectionString`***属性将用于评估*平面文件连接管理器上平面文件*的路径。正如[@Dominic Goulet](https://stackoverflow.com/users/452792/dominic-goulet)所说，***`Expressions`***允许您在运行时覆盖任何属性。

执行包时，该值*`ConnectionString`*将显示在*Business Intelligence Development Studio (BIDS)**`Progress`*的/*`Execution Results`*选项卡上。是运行时的选项卡名称，然后在 BIDS 中停止调试后更改为。**`Progress`**`Execution Results`**

 *如果您启用包日志记录并捕获*`OnInformation`*事件消息，您将在日志数据中看到相同的信息。

### 在信息事件期间发出的平面文件连接的 ConnectionString 值。

![连接字符串](../Images/e52774cd097f18614932184faad0ed40.png)*

# html - 没有 Preserve-3d 就不会渲染 TranslateZ()

> ID：14879702
> 
> 赞同：0
> 
> 时间：2013-02-14T16:39:49.530
> 
> 标签：html, css, transform

根据这个[http://jsfiddle.net/4ESUW/3/](http://jsfiddle.net/4ESUW/3/)示例，我正在尝试调整 Z 轴位置，`translateZ()`但它的行为很奇怪。

我不想使用`preserve-3d`，因为它会影响 div 位置，我需要它来进行进一步的交互。

任何人都有想法或线索如何在`translateZ()`没有的情况下使用`preserve-3d`

我在 Chrome 版本 19.0.1084.56 上运行此示例。不幸的是，它似乎也不适用于 Firefox。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:03:57.930

在我看来，你在你的陈述中自相矛盾：你想使用翻译但不想影响 div 的位置？？？

尽管如此，它也不能没有`preserve-3d`，因为`transform-style`属性的定义是子元素是存在于它们自己的 3d 空间 ( `preserve-3d`) 中还是被展平并被限制在父元素 ( `transform-style:flat`)的平面上默认（不可继承）值。

所以如果你想使用任何涉及 z 轴的变换（例如 translateZ 和 rotateX/Y），你总是必须设置`transform-style:preserve-3d`. 否则，它们将绑定到其父元素的 z 平面。

有关更多信息，请查看[MDN 文章](https://developer.mozilla.org/en-US/docs/CSS/transform-style)。

# java - 我不断收到“非法的表达开始”，我不知道为什么

> ID：14879707
> 
> 赞同：2
> 
> 时间：2013-02-14T16:40:00.010
> 
> 标签：java, netbeans

正如标题中所说，我在方程式部分的代码中得到了非法的表达式开头。我确实相信我把一切都做对了，但我仍然有一个非法的表达开始。

```
public class FacebookUsers 
{

  public static void main(String[] args)
  {
      int  months = 1;

      for ( int people = 500000000; people < 2000000000; months ++)
      {
          people = (peoplestart) * ((1.05)**(months));
      }

      System.out.println("It took "+months+" to reach one billion users on "
              + "facebook at the rate of 5% growth.");
      months = 1;
      for ( int people = 500000000; people < 2000000000; months ++)
      {
          people = people * ((1.05)**(months));
      }
      System.out.println("It took "+months+" to reach two billion users on "
            + "facebook at the rate of 5% growth.");

   }

} 
```

任何帮助表示赞赏，并提前感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T16:41:27.870

Java 没有`**`运算符。使用`java.lang.Math.pow`.

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

# javascript - 仅当模式可见时，ESC 才触发后退事件？

> ID：14879714
> 
> 赞同：1
> 
> 时间：2013-02-14T16:40:11.483
> 
> 标签：javascript, html, css, onkeydown

所以，我有一个我很满意的纯 CSS 模态窗口；它很轻而且很快。但是，我想添加一些我认为只能使用 javascript 才能完成的特定功能——即，我希望转义键触发模态框的消失并单击叠加层来执行相同的操作。

作为一个纯 css 模式，它依赖于 :target 伪属性，因此依赖于 url。所以，我决定试试这个：

```
document.onkeydown = function(evt) {
evt = evt || window.event;
if (evt.keyCode == 27) {
history.go(-1);
}
}; 
```

但是，通过在我的文档头中加载它，无论模式是否在屏幕上，ESC 都会触发返回事件。如果在模态可见时按下，我只希望 ESC 触发后退事件。 *我该如何做到这一点？*

顺便说一句，模态的 css 将容器`display`属性从更改`none`为`block`。

```
.modalWrap {
    display:none;
    z-index:40001;
}
    #dbw.modalWrap:target {
        display: block;
    } 
```

的HTML：

```
<div class="modalWrap" id="dbw">
    content
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:43:48.180

```
document.onkeydown = function (evt) {
    if (document.getElementById(modal_id).style.display != 'none') {
        evt = evt || window.event;
        if (evt.keyCode == 27) {
            history.go(-1);
        }
    }
}; 
```

`Modal`参考其`display`属性评估 是否在屏幕上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:28:04.797

不知何故，我实际上设法找到了解决方案：

```
window.document.onkeydown = function (e)
    {
        if (!e) e = event;
        if (e.keyCode == 27)
          var elem = document.getElementById("dbw");
            if (elem.currentStyle) {
                var displayStyle = elem.currentStyle.display;
            } else if (window.getComputedStyle) {
                var displayStyle = window.getComputedStyle(elem, null).getPropertyValue("display");
            }
        if (displayStyle != 'none') {
            history.go(-1);
        }
    } 
```

ESC 按下时，检索 id 为“dbw”的 div 的显示样式，如果不等于`none`，则触发返回事件。经过测试并完美运行。

如果有人确实提供了更简洁、更短的代码，那么我会将他们的答案标记为已接受。

# javascript - 如何使用javascript根据特定日期和时间刷新页面？

> ID：14879715
> 
> 赞同：0
> 
> 时间：2013-02-14T16:40:19.007
> 
> 标签：javascript

我有一个提供应用程序链接的网页（在我们的 Intranet 上）。但是，每个星期三都有一份工作。在 1000 小时。我想做的是在达到所述时间时禁用页面上的链接，并在 30 分钟左右后启用。

我已经创建了一个基于刷新来监控时间的函数。我想消除刷新并在后台监控时间，可以这么说（触发器）然后调用例程来禁用链接。完成后，重新激活链接。

这如何在javascript中完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:43:36.640

如果您采用 JavaScript 方法，如果用户的浏览器 JavaScript 被禁用，它将失败，如果需要，将维护状态保存在您的数据库中，即使我也这样做，当用户登陆我的网站时，我使用的第一个功能是检查维护状态，如果它在将他重定向到维护页面。

再次每 30 秒刷新一次维护页面并检查状态，如果显示维护状态，将用户重定向回主页

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:43:41.497

尽管您应该使用服务器端逻辑来防止在维护期间访问这些资源，但您可以通过使用计时器来提供帮助（例如`setTimeout`每秒调用一次）：

这是我刚刚敲出的一个程序，它似乎可以按要求工作：

```
(function() {

    var state = null;

    (function loop() {
        var now = new Date();
        var day = now.getDay();
        var min = 60 * now.getHour() + now.getMinutes();

        var disable = (day === 3 && (min >= 600 && min < 630));
        if (disable !== state) {
             if (disable) {
                 // call your disable code
             } else {
                 // call your enable code
             }
        }
        state = disable;
        setTimeout(loop, 1000);
    })();

})(); 
```

该`state`变量旨在确保它不会每秒钟*重复调用您的禁用/启用代码 - 仅当状态发生转换时。*

有关每 10 秒切换一次状态的运行示例，请参见[http://jsfiddle.net/alnitak/B8u6f/](http://jsfiddle.net/alnitak/B8u6f/)，仅用于测试目的。

# vba - 设置 UserForm 元素以进行唯一验证

> ID：14879717
> 
> 赞同：1
> 
> 时间：2013-02-14T16:40:25.267
> 
> 标签：vba, excel

这是上一个关于 Excel UseForm 中文本框特定验证的问题的延续。[**Sorceri**](https://stackoverflow.com/users/1586390/sorceri)在获取此代码方面帮助了我很多，但我现在需要一些微调。我需要在不同的文本框中进行不同的验证。我已经通过“工具箱”中的“控件”构建了文本框。他们按顺序命名；“info1”、“info2”、“info3”等等。

大多数文本框的验证如下所示（“1-5”、“88”和“99”）。但是，其中两个文本框需要进行不同的验证（“1-3”和“88”）。除此之外，还需要为第三组文本框（“0-10”和“88”）设置第三个验证集。总的来说，我对 VBA 和编程还很陌生，但我学得很快。任何帮助将不胜感激。

为了澄清，我在 Sorceri 旁边的括号中添加了我自己的评论。再次感谢大家。

```
Private Sub cmdEnter_Click()
Dim ctl As Control
For Each ctl In Me.Controls
    'check to see if it is a textbox (I'm guessing I could specify which textboxes here, but I'm unsure)
    If TypeOf ctl Is MSForms.TextBox Then
        Dim tBox As MSForms.TextBox
        Set tBox = ctl
        'we have a textbox so validate the entry (Again, I'm hoping to make this into, "We found textbox variant A and so will validate its entry with validation A, etc)
        If validateTextBox(tBox) Then
            'did not validate so set focus on the control
            MsgBox "Invalid Entry!", vbCritical, "Invalid!"
            ctl.SetFocus
            'release the object
            Set tBox = Nothing
            Exit Sub
        End If
        Set tBox = Nothing
    End If
Next
End Sub

'validate a textbox's value and return true or false
Private Function validateTextBox(tb As MSForms.TextBox) As Boolean
    Dim sValue As String
    Dim bInvalid As Boolean
    bInvalid = True
    sValue = Trim(tb.Text)
    If sValue = "1" Or sValue = "2" Or sValue = "3" Or sValue = "4" Or sValue = "5" Or sValue = "99" Or sValue = "88" Then
        bInvalid = False
    End If
    'return the results
    validateTextBox = bInvalid
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:20:08.160

试试下面的。

我根据文本框的名称在您的函数中放置了一些选择案例。

为简单起见，我假设您将根据验证分组（重新）命名您的文本框。但是，您可以将每个单独的文本框名称放在`Case Is =`语句中并去掉语句中的`Left`函数`Select Case`。

我还更改了`tb.Value`to`Integer`以使 If 语句更易于编写/阅读。

这并不是一个完整的答案，而是提供一个清晰的结构来构建您的答案。

```
Function validateTextBox(tb As MSForms.TextBox) As Boolean

    Dim iValue As Integer, sName As String, bInvalid As Boolean

    bInvalid = True

    sName = tb.Name
    iValue = CInt(Trim(tb.Text))

    If iValue = 88 Then 'because this is common among all the groups check for it first

        bInvalid = False

    Else

        Select Case Left(sName, "4")

            Case Is = "grp1"

                If (iValue > 1 And iValue <= 5) Or iValue = 99 Then bInvalid = False

            Case Is = "grp2"

                If (iValue > 1 And iValue <= 3) Then bInvalid = False

            Case Is = "grp3"

                If (iValue > 1 And iValue <= 10) Then bInvalid = False

        End Select

    End If

    'return the results
    validateTextBox = bInvalid

End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:28:03.040

将您的验证值放在每个文本框的`Tag`属性中，例如“1-30,88,89”（尽管没有引号）可能还想稍微整理一下这些变量声明。

```
Function ValidateTextBox(tb As MSForms.TextBox) As Boolean
    Dim sTag, i, arr, arrVal, min, max, v, tbVal, ok As Boolean

    tbVal = Trim(tb.Value)

    If IsNumeric(tbVal) Then

        sTag = Replace(tb.Tag, " ", "") 'remove any spaces from tb Tag

        v = CInt(tbVal) 'convert the textbox value to integer

        If sTag <> "" Then
            arr = Split(sTag, ",")
            For i = LBound(arr) To UBound(arr)
                arrVal = Trim(arr(i))
                If InStr(arrVal, "-") > 0 Then
                    'check against a range
                    min = CInt(Split(arrVal, "-")(0))
                    max = CInt(Split(arrVal, "-")(1))
                    If v >= min And v <= max Then
                        ok = True
                        Exit For
                    End If
                Else
                   'just a single value to check against
                   If v = CInt(arr(i)) Then
                        ok = True
                        Exit For
                   End If
                End If
            Next i
        Else
            MsgBox "No rule for this textbox: " & tb.Name
        End If

    End If

    ValidateTextBox = ok

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T03:44:50.127

所以真正的问题是你的文本框元素是如何分组的。需要有某种方法来区分需要验证的三个不同组。最简单的方法可能是将命名约定附加到每个文本框的名称当前名称（除非您可以使用分组控件 IE 框架）。您可以使用 ABC 或任何其他命名方案。在这个例子中，我将使用 ABC。

A 组验证（“1-5”、“88”和“99”）

B 组验证（“1-3”和“88”）

C组验证（“0-10”和“88”）

现在在每个文本框的末尾添加一个 A、B 或 C 来区分文本框所属的组。您声明您的文本框元素遵循以下命名方案：“info1”、“info2”、“info3”、

所以我们现在应该有“info1A”、“info2A”、“info3C”、“info4B”、“info5C”......“info30A”，

有了这个，我们现在为每个组添加一个枚举类型

```
Private Enum ValidationGroup
NONE
A 
B
C
End Enum 
```

'我们将在获取组的方法中添加一个switch语句

```
Private Sub cmdEnter_Click()
Dim ctl As Control
For Each ctl In Me.Controls
    'check to see if it is a textbox
    If TypeOf ctl Is MSForms.TextBox Then
        Dim tBox As MSForms.TextBox
        Dim tbGroup As ValidationGroup

        Set tBox = ctl
        'we have a textbox so check the group and validate the entry
        'get the group to validate against
        tbGroup = Switch(Right(tBox.Name, 1) = "A", ValidationGroup.A, _
        Right(tBox.Name, 1) = "B", ValidationGroup.B, _
        Right(tBox.Name, 1) = "C", ValidationGroup.C, _
        Right(tBox.Name, 1) <> "*", ValidationGroup.NONE) 'default value of none

        If validateTextBox(tBox, tbGroup ) Then
            'did not validate so set focus on the control
            MsgBox "Invalid Entry!", vbCritical, "Invalid!"
            ctl.SetFocus
            'release the object
            Set tBox = Nothing
            Exit Sub
        End If
        Set tBox = Nothing 
    End If
Next
End Sub 
```

更改 validateTextBox 以包含枚举

**作为旁注，可以对这种方法进行大修以提高效率

```
'validate a textbox's value and return true or false
Private Function validateTextBox(tb As MSForms.TextBox, vg As ValidationGroup) As Boolean
    Dim sValue As String
    Dim bInvalid As Boolean
    bInvalid = True
    sValue = Trim(tb.Text)t
    'check the validation group then check the values
    If vg = ValidationGroup.A Then
        If sValue = "1" Or sValue = "2" Or sValue = "3" Or sValue = "4" Or sValue = "5" Or sValue = "99" Or sValue = "88" Then
            bInvalid = False
        End If
    ElseIf vg = ValidationGroup.B Then
        If sValue = "1" Or sValue = "2" Or sValue = "3" Or sValue = "88" Then
            bInvalid = False
        End If
    ElseIf vg = ValidationGroup.C Then
        If sValue = "0" Or sValue = "1" Or sValue = "2" Or sValue = "3" Or sValue = "4" Or sValue = "5" Or _
        sValue = "6" Or sValue = "7" Or sValue = "8" Or sValue = "9" Or sValue = "10" Or sValue = "88" Then
            bInvalid = False
        End If
    End If
    'return the results
    validateTextBox = bInvalid
End Function 
```

# java - 记录由未知参数引起的异常的最佳实践

> ID：14879720
> 
> 赞同：1
> 
> 时间：2013-02-14T16:40:38.970
> 
> 标签：java, javadoc

这更像是一个最佳实践问题。我希望在这里问这个问题是可以的。我正在创建一个接口，该接口将用作我们 API 的一部分。我有一个名为的方法`getSomeObject()`，它在幕后有一个复杂的逻辑并返回`SomeObject`。在幕后我正在调用抛出的方法`IllegalArgumentException`，所以我的可能`getSomeObject()`方法可能会抛出此异常。我遇到的问题是 API 的用户不熟悉 API 的内部工作原理，也不明白为什么会抛出异常。由于该参数是在我的方法中创建的，而用户甚至不知道该参数的存在。我试图记录它，但这个异常的原因会使 API 的用户感到困惑。所以我的问题是，解决这种情况的最佳方法是什么？记录此异常的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T16:44:02.757

从不带任何参数的方法中抛出一个`IllegalArgumentException`确实很令人困惑。

我想如果`getSomeObject`没有正确定义外部的东西，你会得到那个例外。所以你可能会抛出一个`IllegalStateException`, 并在你的 javadoc 中用一个解释来记录它：

```
@throws IllegalStateException If member variable xyz is not initialised.  
                              This can happen if method `init()` has not been   
                              called before `getSomeObject`. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:46:57.830

当您说您的内部代码有可能抛出 IllegalArgumentException 时，您是如何处理的？
是用户输入错误造成的吗？
如果不是，那么您应该抓住它并处理它，如果仍然必须抛出它，则必须将其转换为用户可以理解的异常，
或者这种情况发生的可能性不大并且纯粹是理论上的？
如果这是一个用户应该处理的有效异常场景，你应该抛出一个适当的检查异常并在你的界面中声明它

# javascript - Javascript 中 HTML 标记中的哈希/磅 # 符号

> ID：14879721
> 
> 赞同：0
> 
> 时间：2013-02-14T16:40:42.587
> 
> 标签：javascript, html, object, kendo-ui

我正在使用 Kendo UI 上的论坛帖子将我的 kendo 列表视图连接到 php 数据源。

1.  它有效，但您能否解释一下他们使用# 符号的最后一行。
2.  那么 :data.Name 呢？我知道我正在从 php 文件中输出 JSON 字符串，例如 {"data":[{"Name":"Cindy"}])。但是从 Javascript 的上下文来看，Kendo 在这里使用 JSON 字符串中的“数据”实际上做了什么？它是具有属性“名称”的对象（在某些数据结构中吗？）？为什么有分号？

我在 JavaScript 方面没有很好的背景，并且发现使用 #/hash 作为关键字很难进行搜索。

```
 $("#listView").kendoListView({
    dataSource: {
        transport: {
            read: "list_users.php",
        },
        schema: {
            data: "data"
        }
    },
    template:"<li>#:data.Name#</li>"

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:49:05.367

对于 Javascript，它根本没有任何特殊含义。这只是一个字符串。

在 Kendo 模板中使用时，该标记`#: #`将替换为 HTML 编码值。（标签`#= #`被替换为没有 HTML 编码的值。）

直接在代码中使用模板，它看起来像这样：

```
var template = kendo.template("<li>#:data.Name#</li>");

var html = template({ data: { Name: 'Me!<o>' } }); 
```

该变量`html`现在将包含字符串`<li>Me!&lt;o&gt;</li>`。请注意名称中的`<`和是如何`>`进行 HTML 编码的。

# r - 为矩阵的每一行计算外积的有效方法

> ID：14879723
> 
> 赞同：2
> 
> 时间：2013-02-14T16:40:44.930
> 
> 标签：r

我需要帮助来找到一种计算矩阵每一**行****外积的***有效方法。*

 ****到目前为止我已经尝试过

```
X <- matrix(1:100, ncol=4)
lapply(1:i, function(i) tcrossprod(X[i,])) 
```

这让我毛骨悚然，因为它在应用于“现实生活”（又名“大”）矩阵时相当缓慢且繁琐。

结果的类型是数组还是列表都没有关系。

有任何想法吗？`plyr`和朋友的方式也很慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T05:12:24.143

下面的代码是否为您提供了所需的输出？如果是这样，您的数据是否足够快？

```
library(data.table)

# Example matrix
m <- matrix(1:100, ncol=4)

# Convert to data.table
X <- as.data.table(m)

# Add row numbers
X[,row:=1:nrow(X)]

# Reshape to long format
X.long<-data.table(reshape(X, direction="long", varying=list(rev(rev(names(X))[-1])), v.names="value", idvar="row", timevar="col", times=1:(ncol(X)-1)),key="row")

# Join the long data.table to itself, perform the products, and then reshape back to wide format
reshape(X.long[X.long,list(col=i.col, col.old=col, prod=value*i.value)], direction="wide", idvar=c("row","col"), timevar="col.old")

##     row col prod.1 prod.2 prod.3 prod.4
##  1:   1   1      1     26     51     76
##  2:   1   2     26    676   1326   1976
##  3:   1   3     51   1326   2601   3876
##  4:   1   4     76   1976   3876   5776
##  5:   2   1      4     54    104    154
##  6:   2   2     54    729   1404   2079
##  7:   2   3    104   1404   2704   4004
##  8:   2   4    154   2079   4004   5929
##  ... etc 
```****

# http - lighttpd 中的输入解压支持

> ID：14879725
> 
> 赞同：1
> 
> 时间：2013-02-14T16:40:55.770
> 
> 标签：http, curl, lighttpd

我正在尝试向我的 lighttpd 服务器发送一个 http PUT 请求，其正文中有一个压缩文件 abc.xml.gz。通过使用 curl 中的`--compressed`选项使用 curl 命令并`-H "Content-Encoding: gzip"`指示编码格式。

我的问题有两个方面：

1.  我的 curl 命令中还需要包含其他内容吗？
2.  如果有的话，我应该在服务器的 lighttpd.conf 中使用什么选项来支持输入解压缩，即解压缩请求对象？

据我所知，lighttpd 中的 mod_compress 仅支持压缩响应内容，不支持解压缩请求。

# jquery - 停用下拉效果

> ID：14879729
> 
> 赞同：0
> 
> 时间：2013-02-14T16:40:59.450
> 
> 标签：jquery

我只想查看父项，而不是菜单中的子类别。当您在此处单击“信息”时，您可以看到下拉效果：http: [//ntm.at/r0sa/](http://ntm.at/r0sa/) 我只想看到“信息”，而不是子类别。我该如何禁用它？我的侧边栏的代码是：

```
<div id="left-col">

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>

<script type="text/javascript" src="http://ntm.at/r0sa/wp-content/plugins/nextgen-gallery/js/ngg.slideshow.min.js?ver=1.06"></script>

<script type="text/javascript">

$(document).ready(function(){
  $("#ngg-slideshow-1-116-1").nggSlideshow( {id: 1,fx:"fade",width:320,height:240,domain: "http://ntm.at/r0sa/",timeout:10000});
  $("li.page_item").click(function(evt){ // trigger

      if($(evt.target).parent().children('ul').size() == 0) 
         return true;

      $(this).children("ul").slideToggle("fast"); // blendet beim Klick auf "dt" die nächste "dd" ein.
      $(this).children("a").toggleClass("closed open"); // wechselt beim Klick auf "dt" die Klasse des enthaltenen a-Tags von "closed" zu "open".
      evt.preventDefault();
      evt.stopPropagation();
  });
});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:57:32.257

这是给你的代码

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>

<script type="text/javascript" src="http://ntm.at/r0sa/wp-content/plugins/nextgen-gallery/js/ngg.slideshow.min.js?ver=1.06"></script>

<script type="text/javascript">

$(document).ready(function(){
  $("#ngg-slideshow-1-116-1").nggSlideshow( {id: 1,fx:"fade",width:320,height:240,domain: "http://ntm.at/r0sa/",timeout:10000});
});

</script> 
```

# jquery - Cucumber/Capybara 测试无法区分 Jquery 自动完成表单

> ID：14879730
> 
> 赞同：0
> 
> 时间：2013-02-14T16:40:56.523
> 
> 标签：jquery, ruby-on-rails-3, cucumber, capybara

我的页面看起来像这样：

```
#reserve_new
= text_field_tag :autocomplete, '', :id => "agency_autocomplete", :class => [:title, :focus, :string, :required], placeholder: "agency name or ID", data: { search_type: "active_agency", selector: "#pre_executed_bond_number_set_agency_id"}
#results

#lookup_existing
= text_field_tag :autocomplete, '', :id => "agency_autocomplete", :class => [:title, :string, :required], placeholder: "agency name or ID", data: {selector: "#lookup_agency_id", results: "#results2"}
#results2 
```

我有一个看起来像这样的测试：

```
when /^I look up pre\-executed numbers for that agency$/ do
  within "#lookup_existing" do
    autocomplete_selector = "#{agency.name} (#{agency.id}) :: #{agency.city}, #{agency.state}"
    step "I choose the \"#{autocomplete_selector}\" autocomplete option"
    click_button "Find"
  end
end 
```

调用

```
When /^I choose the "(.*?)" autocomplete option$/ do |text|
  step "the page should not be an error page"
  find('ul.ui-autocomplete').should have_content(text)

  case Capybara.javascript_driver
  when :selenium
    find('.ui-menu-item a', text: /^#{Regexp.escape(text)}/).click
  when :webkit
    page.execute_script %Q{$('.ui-menu-item:contains("#{text}")').first().find('a').trigger('mouseenter').click();}
  end
end 
```

当我注释掉 #reserve_new 或 #lookup_existing 时，测试通过了，因为水豚不会感到困惑。但是，当我将两者都放在同一页面上时，测试会失败。

我试过像

```
within("#reserve_new") do
  find('ul.ui-autocomplete').should have_content(text)
end 
```

和`find("#reserve_new").find('ul.ui-autocomplete').should have_content(text)`

所有示例都导致失败，因为水豚/黄瓜在错误的自动完成上运行。

当我尝试找到 id 并在其中执行它时，它说它找不到 id。

关于尝试的任何想法或可能有助于使其正常工作的技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:21:37.707

当您多次定义 ID 时，它不是有效的 html！

`:id => "agency_autocomplete"`必须只出现一次。

我想这就是导致水豚失败的原因。

# jquery - 谷歌地图 api v3 标记列表和 jQuery

> ID：14879746
> 
> 赞同：0
> 
> 时间：2013-02-14T16:41:54.917
> 
> 标签：jquery, google-maps-api-3

我正在使用 Google Maps API v3，它运行良好，但是当我将鼠标悬停在我的标记列表上时我想添加一个类，但我似乎无法通过 jQuery 访问它。无论如何我可以解决这个问题吗？

我的 jQuery：

```
$('ul#marker_list li').hover(function(){
   $(this).addClass('selected');
}, function(){
   $(this).removeClass('selected');
}); 
```

谷歌地图api代码

```
side_bar_html += '<li><a href="javascript:myclick(' + (gmarkers.length-1) + ')" ref="' + (gmarkers.length-1) + '">' + name + '<\/a></li>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:46:48.833

为什么不在`:hover`CSS 中使用选择器？

```
ul#marker_list li:hover {
    // whatever style you want a hovered over marker to look like
} 
```

# asp.net - 停止在 Excel 中跨多个单元格显示 Div

> ID：14879747
> 
> 赞同：0
> 
> 时间：2013-02-14T16:41:53.967
> 
> 标签：asp.net, html, excel

我正在下载一个 html 文档并在 excel 中打开它，以便通过将内容类型更改为从网页上的表格创建电子表格

```
System.Web.HttpContext.Current.Response.ContentType = "application/vnd.ms-excel"
System.Web.HttpContext.Current.Response.AddHeader("Content-Disposition", "attachment;filename="excel.xls") 
```

但我发现我的 excel 中的某些行分布在多行中，因为行本身的 html（例如换行符和 div）[该表是由中继器创建的，并且有一些交互式组件允许编辑等] 我在这里找到了[http://www.bennadel.com/blog/1095-Maintaining-Line-Breaks-In-An-HTML-Excel-File.htm](http://www.bennadel.com/blog/1095-Maintaining-Line-Breaks-In-An-HTML-Excel-File.htm)如何阻止换行符拆分多行，但在实施后，excel中仍然出现换行符。

下面是导致分裂的 td 单元格。我认为是导致分裂的标签是否正确？是否有阻止标签拆分的等效解决方案，或者只有两个不同的部分会更简单，一个用于在 UI 中，一个用于在 excel 中？

```
 <ItemTemplate>
                <asp:CheckBox id="cbAdjust" runat="server" visible="false" /><br style="mso-data-placement:same-cell;"/>
                <div id="divAdjustments" runat="server" >
                    <div id="divLicAdjust" runat="server" style="mso-data-placement:same-cell;" >
                        License: <asp:Label id="lblAdjustLic" runat="server" text='1' />
                    </div>
                    <div id="divSaasAdjust" runat="server" style="mso-data-placement:same-cell;">
                        Saas: <asp:Label ID="lblAdjustFyr" runat="server" text='2' />
                    </div>
                    <a id="aEditAdjust" runat="server" href="javascript:void(0)" style="height:auto" class="dashboardButton">Edit</a>
                </div>
                <a id="aSaveAdjust" runat="server" href="javascript:void(0)" class="dashboardButton TextBoxBtn">Save</a>               
            </ItemTemplate> 
```

# informix - Informix 4GL 后场

> ID：14879750
> 
> 赞同：1
> 
> 时间：2013-02-14T16:41:58.047
> 
> 标签：informix, 4gl

嗨，我想添加一个后字段逻辑，我有 4 个复选框（check1、check2、check3 和 check4）。当我在 check2、check3 和 check4 上打上复选标记时，我想自动在 check1 上打上复选标记。任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:41:09.767

AFTER FIELD 的弱点是它要求您在触发之前离开该区域。

对于 Genero，当我们多年前添加 ON CHANGE 语法时，它的实现方式是，如果小部件是 GUI 小部件，例如 CHECKBOX、RADIOGROUP、COMBOBOX，则在进行更改时将触发 ON CHANGE，而不是在获得焦点时触发离开了球场。

我们还添加了 UNBUFFERED 输入模式，这样您的代码就不需要所有分散在各处的 DISPLAY。

您没有说明您正在使用的 Informix 4gl 版本，但如果您使用的是 Four Js Genero 或 IBM Informix Genero（正如您所说的复选框，那么您可能是），那么答案可能是......

```
INPUT ... ATTRIBUTES(UNBUFFERED)
...
    ON CHANGE check2
        LET rec.check1 = "Y"

    ON CHANGE check3
        LET rec.check1 = "Y"

    ON CHANGE check4
        LET rec.check1 = "Y" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:46:18.307

```
AFTER FIELD check2
    LET rec.check1 = 'Y'
    DISPLAY rec.check1 TO check1 
```

冲洗并重复。我假设输入变量位于`rec`名称`check1`通过`check4`. 关键是赋值和显示的双重操作；你需要两个 AFAICR 或者它不“工作”。我可以`DISPLAY BY NAME rec.check1`在这里使用，但我通常不使用`DISPLAY BY NAME`; 我可能也会在其中包含屏幕记录`DISPLAY`。不过，在合理的假设下，我写的内容可能会奏效。

# javascript - 重命名颜色框弹出确认按钮

> ID：14879754
> 
> 赞同：0
> 
> 时间：2013-02-14T16:42:09.363
> 
> 标签：javascript, dialog, popup, colorbox

我正在使用颜色框弹出。并在关闭确认框触发“你确定要退出吗？”，它显示，确定和取消作为默认按钮。

我的问题是你能重命名这些按钮，比如“是，关闭”和“否”

```
var response;
response = confirm('Do you want to close this window? All your changes will not be saved');
if (!response) {
    return
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:47:59.113

不，这是不可能的，因为这些字符串与您在 SO/Browser 中使用的语言有关。一种方法是用`confirm()`模态 HTML/JS 弹出窗口替换本机弹出窗口，然后您将获得所需的灵活性。

示例：[jQuery UI 对话框](http://jqueryui.com/dialog/)

# c++ - 使用带有继承类的容器

> ID：14879756
> 
> 赞同：2
> 
> 时间：2013-02-14T16:42:22.347
> 
> 标签：c++, inheritance, stl, polymorphism

所以，我在大约 3 年里没有过多地使用 C++，现在我在将继承的类与 STL 容器一起使用时遇到了一些麻烦。我已经看到这种问题被问了几次，但无法准确理解正在做什么，或者当我的代码与答案非常相似时为什么我的代码不起作用。

基本上我有两个类，R 和 RD，R 是基类，RD 是派生类。每个元素都有它的邻居，有点像一个图，所以元素 r1 的邻居可以是 R 类或 RD 类。我以为我已经通过在 R 中创建一个私有双端队列来解决这个问题，但是每当我访问所述双端队列中的元素时，它们永远不是 RD，只有 R。我的代码有点像这样：

```
class R {
public:
    R();
    ~R();

    inline void queue(R* r) { neighbours.push_back(r); }
    inline R& getFirstNeighbour() { return neighbours.top(); }

    virtual void printSomething() { cout << "R" << endl; }
protected:
    deque<R*> neighbours;
}

class RD: public R {
public:
    RD();
    ~RD();

    void printSomething() { cout << "RD" << endl; }
    void doSomethingElse();
} 
```

每当我得到一个元素的第一个邻居并调用 printSomething 时，我总是得到 R。我在这里做错了什么？这应该怎么做？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T16:40:12.823

您的代码有效，但有一些错误（构造函数和析构函数缺少“{ }”，这是一些有效代码（我在这里使用 std::deque 所以我用 front() 替换了 top() 函数）

```
#include <deque>
#include <iostream>

using namespace std;

class R {
public:
    R(){};
    ~R(){};
inline void queue(R* r) { neighbours.push_back(r); }

//Here is your error, look at the return : you need to dereference your neighbours.front():
inline R& getFirstNeighbour() { return *neighbours.front(); }

virtual void printSomething() { cout << "R" << endl; }
protected:
    deque<R*> neighbours;
};

class RD: public R {
public:
    RD(){};
    ~RD(){};

    void printSomething() { cout << "RD" << endl; }
    void doSomethingElse();
};

int main()
{
R r;
//R with 3 neighbors
r.queue(new RD());

r.getFirstNeighbour().printSomething(); // Printing RD :)

return 0;
} 
```

# memory - 星号内存交换？

> ID：14879771
> 
> 赞同：-2
> 
> 时间：2013-02-14T16:43:31.020
> 
> 标签：memory, cpu, asterisk

我有一个只做 ASTERISK 的专用服务器，但是，当 asterisk 运行时，我的 cpu 立即达到最大值，但内存仍然相同。无论如何我可以让星号使用一些内存而不是CPU吗？

这是我看到的：

```
top - 08:40:36 up 26 days, 15:39,  2 users,  load average: 2.16, 2.16, 2.38
Tasks: 137 total,   3 running, 132 sleeping,   2 stopped,   0 zombie
Cpu(s): 99.7%us,  0.2%sy,  0.0%ni,  0.0%id,  0.0%wa,  0.0%hi,  0.2%si,  0.0%st
Mem:   3922684k total,  1643672k used,  2279012k free,   123968k buffers
Swap:  4063224k total,    31788k used,  4031436k free,   847928k cached 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T16:53:57.253

要查看占用 cpu 的内容，请使用 ps xau | sort -n -k3 要查看占用内存的内容，请使用 ps xau | 排序 -n -k3

对于我精简的 vps，我执行了以下操作，这是针对 vps 而不是服务器，因此您可能需要一些服务。

见 [http://forums.asterisk.org/viewtopic.php?f=13&t=87399](http://forums.asterisk.org/viewtopic.php?f=13&t=87399)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T00:05:18.270

您已经重写了您的控制应用程序以使用更少的 i/o 和 cpu，但很可能它不会对您有很大帮助。Asterisk 是网络/CPU 应用程序。

# apache - 子域的重写规则

> ID：14879775
> 
> 赞同：0
> 
> 时间：2013-02-14T16:43:36.770
> 
> 标签：apache, mod-rewrite

所以我试图在我的家庭服务器上设置一个名为“maps”的子域

我想要

*.TLD.com 和 www.TLD.com 照常处理

但是 maps.TLD.com

实际指向不同端口上的本地服务器（同一个盒子上的 MapServer）（为了参数，假设为 8080，我还没有安装它）

真的很挣扎，我尝试的一切要么把所有东西都推到这个端口，要么破坏 httpd.conf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:49:07.820

想出了如何去做需要的是

```
NameVirtualHost *:80

<VirtualHost>
    ServerName www.TLD.com
    ServerAlias TLD.com

    DocumentRoot C:/public_html
    <Directory>
        ...
    </Directory>
</VirtualHost>

<VirtualHost>
    ServerName maps.TLD.com 

    DocumentRoot C:/maps
    <Directory>
        ...
    </Directory>
</VirtualHost> 
```

# java - java并发、生产者（代理）和消费者

> ID：14879783
> 
> 赞同：0
> 
> 时间：2013-02-14T16:43:47.037
> 
> 标签：java, multithreading, concurrency

我需要有关使用并发的 java 分配的帮助。我遇到的问题出在`get`方法上，我找不到任何问题。但是，感觉它没有被正确访问，或者它没有做它应该做的事情。总而言之，问题是我得到了所有的金属，但我没有给消费者任何东西，我不知道这是怎么回事。如果我需要提供任何其他信息，请告诉我。

每个经纪人都持有所有三种金属的库存，但只是其中一种金属的“供应商”，称为“专业”。精炼厂不时将一批精炼金属交付给作为其供应商的经纪人。例如，精炼厂可能向黄金供应商提供 30 盎司黄金。消费者定期向经纪人下订单。每个订单指定每种金属的盎司数。它可以与任何经纪人一起放置。如果可能，经纪人将从自己的股票中完成订单。如果金属 M 的供应商因为手头没有足够的 M 而无法完成订单，它就会等到从精炼商那里得到更多。但是，如果它做空了某种其他金属，它会试图通过与该金属的供应商进行交易来获得它。为了简单起见，我们会假设，有点不切实际，盎司的黄金、铂金或铀都具有同等价值。也就是说，三盎司黄金可以换成三盎司铀或三盎司铂金。

抱歉，我无法显示使用 BrokerImplementation 的类。我不能，因为它们都是 .class 文件，并且认为上传位代码没有任何帮助。

提前感谢您提供的任何帮助。

```
// This class overrides all it's methods from the Broker interface
public class BrokerImplementation implements Broker, IBM {

int specialty;
int[] metals = {0, 0, 0};

/**
 * The constructor takes a single integer parameter, the code for the metal
 * which this broker supplies.
 *
 * @param specialty
 */
public BrokerImplementation(int specialty) {
    this.specialty = specialty;
}

/**
 * This method is used by Project2.main to audit the global state when the
 * system shuts down. The Broker should fill in result with the amount of
 * each metal it has on hand. 
 *
 * @param result
 */
@Override
public void getAmountOnHand(int[] result) {

    //GOLD, PLATINUM, URANIUM are are constants in the IBM interface
    //which correspond to the indexes {0, 1, 2} 
    result[GOLD] = metals[GOLD];
    result[PLATINUM] = metals[PLATINUM];
    result[URANIUM] = metals[URANIUM];
}

/**
 * A consumer calls this method to place an order. The argument is a
 * three-element array indicating the number of ounces of gold, platinum,
 * and uranium desired. It should return only when the order has been
 * filled.
 *
 * @param metals
 */
@Override
public void get(int[] order) {

    for(int i = 0; i < 3; i++){
    if (metals[i] > order[i]) {
        metals[i] -= order[i];
    } else {
        this.swap(i, order[i] - metals[i]);
        this.get(order);
        try {
            wait();
        } catch (InterruptedException ex) {
            Logger.getLogger(BrokerImplementation.class.getName()).log(Level.SEVERE, null, ex);
        }
        notifyAll();
    }
    }
}

/**
 * Another broker calls this method to swap one metal for another. The what
 * argument indicates one of the metals; the other one is the metal in which
 * this broker specializes. The ounces argument indicates how many ounces to
 * swap.
 *
 * @param what
 * @param ounces
 */
@Override
public void swap(int what, int ounces) {

    synchronized (this) {
        if (metals[specialty] >= ounces) {

            metals[specialty] -= ounces;
            metals[what] += ounces;

        } else {
            notifyAll();
            try {
                wait();
            } catch (InterruptedException ex) {
                Logger.getLogger(BrokerImplementation.class.getName()).log(Level.SEVERE, null, ex);
            }

        }
    }
}

/**
 * The refiner calls this method to deliver a load of metal to the broker.
 * The argument ounces is a number of ounces. The metal is the one this
 * broker supplies.
 *
 * @param ounces
 */
@Override
public void deliver(final int ounces) {
    System.out.println("available " + metals[specialty]);
    metals[specialty] += ounces;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:21:29.070

具体来看该`get(int[] order)`方法，有几件事您没有考虑过。由于您在问题中提到了多线程，我假设多个线程可以同时调用此方法。鉴于这一事实，您没有考虑对共享资源的同步访问`metals[]`。该操作`-=`不是线程安全的，您对该数组的迭代也不是。此外，当您添加同步时，如果您担心性能，请尽量减少同步内容，因为同步大块`this`可能会对性能产生影响。

**编辑**：我还建议（尽管您没有要求这样做）您的同步块中没有 wait() 。这将导致死锁，因为同步块中的线程将`metals[]`在等待时阻塞。

# sql - SELECT 返回一行中的所有项目

> ID：14879784
> 
> 赞同：0
> 
> 时间：2013-02-14T16:43:59.290
> 
> 标签：sql, sql-server, tsql

项目表

```
ID    item_id     item
------------------------
1     44          shoe 
2     44          boat
3     44          car
4     82          truck
5     82          shirt
6     82          tree
7     99          egg
8     99          carrot
9     99          penguin 
```

所以我这样做：

```
SELECT item 
FROM items 
WHERE item_id = 82 
```

我在不同的行上得到以下信息：

```
 truck
 shirt
 tree 
```

是否有一个 SELECT 将返回一行中的所有项目，可能由一些分隔符分隔：

```
truck,shirt,tree 
```

我知道如何做到这一点，但是有一个简单的选择来做同样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:48:04.523

```
SELECT
     [item_id],
     STUFF(
         (SELECT ',' + [item]
          FROM TableName
          WHERE [item_id] = a.[item_id] AND item_id = 82
          FOR XML PATH (''))
          , 1, 1, '')  AS NamesList
FROM TableName AS a
WHERE item_id = 82
GROUP BY [item_id] 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/9a43f/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:48:18.923

您可以使用`CROSS APPLY`和`FOR XML PATH`：

```
SELECT distinct t1.item_id,
  LEFT(itemList , LEN(itemList)-1) itemList 
FROM items t1
CROSS APPLY
(
  SELECT t2.item + ', '
  FROM items t2
  where t1.item_id = t2.item_id
  FOR XML PATH('')
) m (itemList)
where t1.item_id = 82 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4ef43/2)

# mysql - 如何为每个业务选择最近的三个评论？

> ID：14879785
> 
> 赞同：0
> 
> 时间：2013-02-14T16:43:59.237
> 
> 标签：mysql, sql, greatest-n-per-group

```
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| businees_id | varchar(500) | YES  |     | NULL    |                |
| rating      | int(11)      | YES  |     | NULL    |                |
| author_name | varchar(60)  | YES  |     | NULL    |                |
| author_url  | varchar(100) | YES  |     | NULL    |                |
| review      | text         | YES  |     | NULL    |                |
| review_date | datetime     | NO   |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+ 
```

这是我的查询：

```
Select * from mytable limit 0,3 
```

以上是我的表的结构。我需要为所有企业选择最后三个评论。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:47:29.520

这个查询应该这样做。`table_name`是您的表的名称。`ORDER BY review_date DESC`指示 MySQL 按日期最新-> 最旧排序。`LIMIT 3`将结果截断为前三个。

`SELECT * FROM table_name ORDER BY review_date DESC LIMIT 3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T07:55:37.457

请参阅[如何在 SQL 中选择每个组的第一行/最少行/最多行](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

```
set @num := 0, @businees_id := '';

select type, variety, price
from (
   select id, businees_id, rating,  author_name, author_url, review, review_date,
      @num := if(@businees_id = businees_id, @num + 1, 1) as row_number,
      @businees_id := businees_id as dummy
  from mytable
  order by businees_id, review_date DESC
) as x where x.row_number <= 3; 
```

# python - 作业编排

> ID：14879789
> 
> 赞同：7
> 
> 时间：2013-02-14T16:44:13.353
> 
> 标签：python, scheduled-tasks, orchestration

我目前正在重做我们所有的数据库编排工作（ETL、备份、日常任务、报告编译等）

为此，我需要一个任务/作业编排器，我可以在其中定义任务依赖性、基于时间的任务、异步任务等。

我正在研究 celery 和基于流的编程技术，但我不确定这些是否适合我的用例。

我更多地关注一个可以支持所有这些东西的框架。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-02T14:13:22.893

可能为时已晚，但我想为可能遇到此问题的其他人提及[Job runner](https://github.com/spilgames/job-runner/)。

从他们的 GitHub 存储库 README.rst 中：

Job-Runner 是一个类似 crontab 的工具，有一个很好的 web 前端用于管理和（实时）监控当前状态。

特征：

*   安排重复作业
*   作业链
*   通过将工作人员放入池中来负载平衡工作人员
*   安排作业在池中的所有工作人员上运行
*   实时仪表板（带有终止运行和临时计划的选项）
*   多个项目和每个项目的权限管理

# mysql - 乘以列值

> ID：14879792
> 
> 赞同：0
> 
> 时间：2013-02-14T16:44:23.327
> 
> 标签：mysql, math

在 mysql 中，如果一个人有一个数字（整数、小数或浮点数）列，他可以使用以下`sum`函数将所有值相加：

> ```
> select sum(mycolumn) from mytable where condition; 
> ```

假设我对列中值的*乘积感兴趣。*例如，给定

> ```
> +----------+
> | mycolumn |
> +----------+
> |        1 |
> |        2 |
> |        1 |
> |        3 |
> +----------+ 
> ```

，我想`select fcn(mycolumn) from mytable`返回`6`（对于某些功能`fcn`）。我该怎么做？请记住，可能有很多行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:26:25.810

适用于零以及正数和负数：

```
select 
case 
when sum(case when mycolumn = 0 then 1 else 0 end) > 0 then 0 
else
 case when mod(sum(case when mycolumn < 0 then 1 else 0 end),2) = 0 then 1 
 else -1 
 end * exp(sum(log(coalesce(mycolumn,1)))) 
end as product
from mytable
where condition; 
```

这看起来很丑陋，因此可能值得将全部内容放入[用户定义的函数](http://dev.mysql.com/doc/refman/5.6/en/create-function-udf.html)中，以防止每次都必须挖掘查询。

# html - CSS 表格重塑为 2 列

> ID：14879797
> 
> 赞同：1
> 
> 时间：2013-02-14T16:44:43.363
> 
> 标签：html, css, html-table

我有一个 html 表格，其中包含以下结构化数据：

```
<table>
  <tr><td>label1</td><td>value1</td></tr>
  <tr><td>label2</td><td>value2</td></tr>
  <tr><td>label3</td><td>value3</td></tr>
  ...
</table> 
```

这是一个很长的清单。我希望能够在第 n 行旁边的每个 n+1 行，如下所示：

```
<table>
  <tr><td>label1</td><td>value1</td></tr><tr><td>label2</td><td>value2</td></tr>
  <tr><td>label3</td><td>value3</td></tr><tr><td>label4</td><td>value4</td></tr>
  ...
</table> 
```

所以结构保持不变，但 CSS 布局会注意将第二行放在右侧，因此用户会在一行中看到 2 列（字段，值）。

有什么提示吗？

更新：

这个技巧可以做到，但会破坏表格布局，因此不可用。

```
TABLE TR
{
    float:left;
}
TABLE TR:nth-child(2n+1)
{
    float:left;
    clear:both;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:24:21.313

试一试，让知道是你想要的吗？

## 你的 HTML

```
<table>
  <tr><td>label1</td><td>value1</td></tr>
  <tr><td>label2</td><td>value2</td></tr>
  <tr><td>label3</td><td>value3</td></tr>
  <tr><td>label4</td><td>value4</td></tr>
  <!-- more stuff here -->
</table> 
```

## CSS：

```
tr {
  float: left;
}

tr:nth-child(2n+1) {
  clear: left;
  padding-right: 10px; /* You can edit this line and add as per your style */
} 
```

在 Chrome、Safari、Firefox 中运行良好。没有在 IE 中检查

[**例子**](http://jsfiddle.net/Sriganesh/mMnLT/3/)

# jquery - CLASSIC ASP 相当于 jQuery 中的 jQuery.param？

> ID：14879798
> 
> 赞同：0
> 
> 时间：2013-02-14T16:44:45.350
> 
> 标签：jquery, asp-classic

我想知道是否有任何 ASP 资源可以实现与 jQuery.param 相同的功能。我正在 ASP 上创建 JSON 响应，对于某些字符（例如：“/”），我收到了类似“Uncaught SyntaxError: Unexpected token h jquery-1.8.3.min.js:2 v.extend.parseJSON jquery-”之类的错误1.8.3.min.js:2”，同时尝试“jQuery.parseJSON”响应。所以，我想，我需要用“%5C”替换“/”等等。无论如何“response.write”它而不处理我需要手动替换的所有字符？

我会非常感谢任何帮助。

[http://jsonlint.com/](http://jsonlint.com/)：

```
 {
     "Name": "hmp",
     "URL": """    
 } 
```

第 3 行解析错误：

```
..."hmp",    "URL": """         }
----------------------^ 
```

期待 '}'、':'、','、']'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:12:10.113

你必须编写自己的函数来做这个经典的asp没有这样的功能。为了逃避“你必须使用另一个”这样的（带有vbscript的经典asp）：

```
dim jsonStr

jsonStr = "{" &_
          "     ""Name"": ""hmp""," &_
          "     ""URL"": """" &_
          "}"

response.write jsonStr 
```

您不必在经典 asp 中使用 vbscript 转义 \ 或 /

[这是一个在生成 json 时实现一些有用功能的类](http://www.webdevbros.net/2007/04/26/generate-json-from-asp-datatypes/)

# ruby-on-rails-3.2 - sidekiq 忽略池大小设置

> ID：14879804
> 
> 赞同：3
> 
> 时间：2013-02-14T16:44:56.097
> 
> 标签：ruby-on-rails-3.2, sidekiq

无论我尝试什么，我似乎都无法让 Sidekiq 遵守我的最大池大小设置。我试过了：

*   在我的数据库中设置池：

```
production:
  adapter: mysql2
  encoding: utf8
  database: database
  username: username
  password: password
  host: host
  reconnect: true
  pool: 10 
```

*   在我的 sidekiq 初始化程序中对其进行硬编码（无论是否断开连接！以及在配置服务器块的内部和外部）：

```
Sidekiq.configure_server do |config|
  ActiveRecord::Base.connection.disconnect!
  ActiveRecord::Base.configurations['production']['pool'] = 50
  ActiveRecord::Base.establish_connection
end 
```

*   使用 DATABASE_URL env var 设置它（是的，我确保使用[https://github.com/glenngillen/rails-database-url](https://github.com/glenngillen/rails-database-url)设置了 DATABASE_URL ）：

```
database_url = ENV['DATABASE_URL']
if(database_url)
  ENV['DATABASE_URL'] = "#{database_url}?pool=25"
  ActiveRecord::Base.establish_connection
end 
```

我不知道为什么这些都不起作用。有任何想法吗？

如果它是相关的：

*   导轨 3.2.12
*   Sidekiq 2.6.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T11:41:20.487

确保您没有在任何工作人员或工作人员执行的任何代码中手动建立连接。这将增加每个工作人员从池中签出的连接数（不必要地），并导致您的 Universe 崩溃。

# php - Mysql计数左行

> ID：14879807
> 
> 赞同：0
> 
> 时间：2013-02-14T16:45:02.180
> 
> 标签：php, sql, database

我有一个键的数据库表，假设表中有大约 200 个键。

表键：id | 钥匙 | 发送

每次发送密钥时，发送的密钥所在的行将等于 true。

我想做一个检查表的查询。如果表键还剩下 10% 的键，则会向我的老板发送一封电子邮件，让他在数据库中放入更多键。

我是 sql 的新手。我应该查询联接表还是计数行？

有什么帮助或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:47:00.883

```
SELECT COUNT(id) AS total_keys, SUM(IF(sent, 1, 0)) AS used_keys
FROM yourtable 
```

# php - PHP字符编码问题

> ID：14879809
> 
> 赞同：0
> 
> 时间：2013-02-14T16:45:09.987
> 
> 标签：php, wordpress, character-encoding

当我以代码形式从 Word Press 帖子中获取标题并将它们作为电子邮件传递时，标点符号有点混乱。

例如`"TAMAGOTCHI P’S LOVE & MELODY SET"`出来为`"TAMAGOTCHI P&#8217;S LOVE &#038; MELODY SET"`.

任何想法我如何防止这种情况？

如果您需要查看我当前使用的特定代码，请告诉我。（我不确定这是 WordPress 问题还是 PHP 问题。

**编辑** 会发生什么是这个标题通过查询字符串传递给表单。然后，当提交表单时，我从表单字段中获取字符串并通过电子邮件发送。

因此，我想我需要在将 html 传递到表单字段之前或通过电子邮件发送之前对其进行解码。

**编辑 2** 很奇怪，所以我仔细查看了代码，在将值传递到表单字段之前，我已经在进行 urldecode

```
jQuery('#product_name').val("<?php echo urldecode(strip_tags($_GET['pname'])); ?> 
```

序列化时是否发生了一些默认编码（对于 ajax 表单处理程序）

```
 var dataString = $(this).serialize(); 
```

**EDIT 3** OK 结果证明代码更复杂。标题在表单出现之前也会传递给某种类型的 wordpress 会话。我会弄清楚我需要将urldecode放在哪里。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:51:55.843

这是我可以做的一个 WordPress“功能”。

这是一种替换花哨的引号（或其他实体）的方法：

```
$title = get_the_title( get_the_ID() );
$title = str_replace( '&#8217', "'", $title );
echo $title; 
```

`the_title`如果您想在整个站点中使用相同的实体功能，我们可以通过挂钩来更深入地集成。此代码块将属于您的主题`functions.php`文件。

```
function reform_title($title, $id) {
    $title = str_replace( '&#8217', "'", $title );
    return $title;
}
add_filter('the_title', 'reform_title', 10, 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:52:23.380

我不太确定 wordpress，但问题本身就是文本以 URLENCODE 而不是 UTF-8 或其他编码的形式出现。

你有两个选择

1.  当您收到文本时，您永远不会将其恢复为正常编码（这很奇怪，因为当您访问 $_GET 或 $_POST 变量时，通常会被 php 解编码）

2.  您正在使用 urlencode() 函数解析消息。

# windows - 在 Windows 中显示 PDF 和网站

> ID：14879810
> 
> 赞同：1
> 
> 时间：2013-02-14T16:45:14.593
> 
> 标签：windows, api, winapi, pdf, browser

在 Windows 中，是否有显示 PDF 文件和简单网站的本地方式？

在 Mac 上，这两个任务都非常简单：

```
[[PDFView ...] setDocument:[PDFDocument ...]];

[[[WebView ...] mainFrame] loadRequest:[NSURLRequest ...]]; 
```

Windows上有什么可比的吗？来自哪个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:16:22.583

Windows 中没有任何用于在应用程序中嵌入 PDF 文档的本机功能。您必须托管第三方 ActiveX/COM 容器，例如来自 Adob​​e Acrobat 的容器来处理它。

对于网页，您可以在您的应用程序中[托管 Internet Explorer 的 WebBrowser 控件](http://msdn.microsoft.com/en-us/library/aa752038.aspx)。某些第三方浏览器，例如 Mozilla 和 FireFox，也支持在应用程序中托管。

或者，您可以使用该[`ShellExecute()`](http://msdn.microsoft.com/en-us/library/bb762153.aspx)函数在其默认外部应用程序中打开给定的文档/url，而不是将其托管在您自己的应用程序中。

# jquery - Hoverintent 在 jquery1.8.3 中工作但不在 1.9.0 中工作？

> ID：14879813
> 
> 赞同：1
> 
> 时间：2013-02-14T16:45:31.773
> 
> 标签：jquery, jquery-ui

我正在使用 jquery-ui 网站上的手风琴，但即使是简单的演示也不适合我。我将错误追溯到 jquery-1.9.1.js 不支持悬停意图，但在 1.8.3.js 中有效。

您可以在此处复制可用的脚本（查看源代码），[http://jqueryui.com/accordion/#hoverintent](http://jqueryui.com/accordion/#hoverintent)。改成这样，

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

它会停止工作。

关于我应该如何解决它的任何建议？我的代码的所有其他部分都与 jquery-1.9.1.js 兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:53:54.197

在 jQuery 1.9.x 中测试代码时，请同时使用 migrate-js。

在 1.9.x 中删除了许多已弃用的功能，并且 migrate-js 包含已删除的功能，并通过控制台消息向您显示它们是什么。

在您的情况下，根据 migrate-js 消息，hoverintent 似乎正在使用已删除的功能：

```
JQMIGRATE: jQuery.event.handle is undocumented and deprecated 
```

除了 1.9.x 之外，添加 migrate-js 文件引用使其再次工作。

但是，正如[**Kevin B**](https://stackoverflow.com/users/400654/kevin-b)在原始帖子的评论中所提到的，代码是一个示例，因此您需要自己升级代码或在应用程序中保留 migrate-js 文件引用，尽管不建议将其作为永久解决方案.

* * *

[**DEMO**](http://jsfiddle.net/8LYL3/) - 使用 1.9.1 + migrate-js 进行 Hoverintent

* * *

* * *

### 1.9.x 的有用资源

* * *

*   [**jQuery 1.9.1 发行说明**](http://blog.jquery.com/2013/02/04/jquery-1-9-1-released/)
*   [**jQuery Migrate 1.1.0 发布**](http://blog.jquery.com/2013/01/31/jquery-migrate-1-1-0-released/)
*   [**jQuery 1.9 RC1 和 Migrate RC1 发布**](http://blog.jquery.com/2013/01/09/jquery-1-9-rc1-and-migrate-rc1-released/)

他们的博客上有更多内容，非常好读

# android - 读取和修改整个 TCP/IP 协议栈的参数

> ID：14879814
> 
> 赞同：1
> 
> 时间：2013-02-14T16:45:31.483
> 
> 标签：android, tcp, parameters

我正在尝试从 Android 设备的 TCP/IP 协议栈中提取一些参数。参数有：k时刻802.11竞争窗口*的值，* *k*时刻TCP拥塞窗口的值等等。

 *您对如何阅读这些参数有任何建议、链接或指南吗？我需要在内核级别操作吗？*

# android - 是否可以同时将文件添加到多个 git 存储库？

> ID：14879815
> 
> 赞同：3
> 
> 时间：2013-02-14T16:45:39.313
> 
> 标签：android, git, actionbarsherlock

我已经在 Android 应用程序上工作了一段时间。我经常遇到的一个问题是新人很难跟上图书馆项目的所有依赖关系。在我的最新项目中，事情变得越来越糟，我们使用了 7 个库（其中 2 个是内部开发的，还有很多开源的）。现在我们同时使用 Bitbucket 和 Github 作为我们的解决方案。

是否可以将所有项目合并到一个 Git 存储库下？因此，我们可以克隆一个并立即开始工作，同时保持与这些开源项目的原始存储库的连接。

例如，它使用 ActionBarSherlock、FacebookSDK、SlideMenu 等。

如果没有，Maven会解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:54:05.317

[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)是解决这个问题的方法。

您可以将这些库的存储库作为子模块添加到应用程序的存储库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T17:14:55.207

是的。假设您已经设置了“主”项目，并且设置了本地 reg 和 EGit。

1.  Eclipse->右键单击库项目-> Team -> SharePrject-> git-> 将 Reg 设置为包含您的 main 的那个。如果它是一个库，那么我建议单独保留“reg 内的路径”。->完成。
2.  你会得到一堆错误。这是因为该项目的实际位置已移至 reg。修复依赖项->重新链接库（ex support-v4）-> 读取库项目-> 提交。

当然，在做任何事情之前不要忘记备份。

# php - CakePHP 重定向 404s

> ID：14879817
> 
> 赞同：0
> 
> 时间：2013-02-14T16:45:39.720
> 
> 标签：php, cakephp, mod-rewrite, http-status-code-404

我第一次尝试学习 CakePHP（我通常只是直接编写 PHP 代码），我从他们主持的“官方”博客教程开始：http: [//book.cakephp.org/1.3/en/The -Manual/Tutorials-Examples/Blog.html](http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Blog.html)

到目前为止，我已经设置了一个虚拟主机（在 OS X 10.8.2 上），并使用 CakePHP 的默认索引页面来确保它正确地从数据库中读取，app/tmp 文件夹对于 Apache 等是递归可写的。

当我在设置初始帖子视图后立即尝试关注博客时遇到问题，它说您现在可以在（将“www.example.com”调整为我的本地服务器名称）“cakeblog/posts/index”查看帖子'。我很确定我遇到了某种 mod_rewrite 问题，但我不知道是什么问题。每当发生这种情况时，我的 Apache 错误日志是：

```
[Thu Feb 14 09:18:10 2013] [error] [client 127.0.0.1] File does not exist: /Users/bailey/Sites/cakeblog/posts

[Thu Feb 14 09:18:10 2013] [error] [client 127.0.0.1] File does not exist: /Users/bailey/Sites/cakeblog/favicon.ico 
```

我知道网站图标存在于 /Users/bailey/Sites/cascade/extranet-cake/app/webroot 的 webroot 文件夹中。如果我理解路由权，cakeblog/posts/index*应该*是 Post PostsController 的控制器，/index 应该是 PostsController“index()”中的操作/方法。所以它似乎没有识别控制器？

我按照博客教程设置的代码是：

（应用程序/模型/Post.php）：

```
<?php

    /*
        Model: represents a data model (object).
            Examples -> a blog, a post, a comment on a post
    */
    class Post extends AppModel
    {

    }

?> 
```

（应用程序/控制器/PostsController.php）：

```
<?php
    /*
        Plays with Posts Model and gets work done.

        - function "foo()" means that the function is accessed by
            going to DOMAIN/posts/foo
    */
    class PostsController extends AppController
    {
        public $helpers = array('Html', 'Form');

        // An action!
            // www.example.com/posts/index => listing of all posts
        /*
            Sets the view variable called ‘posts’ equal to the return 
            value of the find('all') method of the Post model.
        */
        public function index()
        {
            $this->set('posts', $this->Post->find('all'));
        }
    }

?> 
```

（应用程序/视图/帖子/index.ctp）：

```
<!-- /app/View/Posts/index.ctp -->

    <h2> Blog Posts </h2>
    <table>
        <tr>
            <th> ID </th>
            <th> Title </th>
            <th> Date Created </th>
        </tr>
        <!-- Output the actual posts -->
        <?php
            foreach ($posts as $post)
            {
                /* Data ~ $post[ModelName][VariableName] */
                $id = $post['Post']['id'];
                /*
                    "$this->Html" ~ a Helper
                        link() generates an HTML link with given title and URL
                */
                $titleLink = 
                    $this->Html->link($post['Post']['title'],
                                        array('controller' => 'posts', 'action' => 'view', $post['Post']['id']));

                $dateCreated = $post['Post']['created'];

                $out = "<tr>
                            <td>$id</td>
                            <td>
                                $titleLink
                            </td>
                            <td>$dateCreated</td>
                        </tr>";

                echo $out;
            }

            unset($post);
        ?>
    </table> 
```

这是我第一次真正看到 CakePHP，除了怀疑 mod_rewrite 问题的间接原因外，我在其他任何帖子中都找不到解决方案。有人对我缺少的东西有想法吗？我也可以根据要求发布我的 httpd.conf 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:45:56.153

[解决了]

愚蠢的错误——原来我使用的是除 app/webroot 以外的子文件夹作为 webroot。一旦我改变了它，它工作得很好。

JeremyHarris 在上面的评论中给出了一个替代方案，如果我想使用不同于默认的 webroot 并在 CakePHP 文档中得到支持：

[http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html](http://book.cakephp.org/1.3/en/The-Manual/Developing-with-CakePHP/Installation.html)

谢谢大家的帮助！

# c# - 将键盘活动重定向到特定控件

> ID：14879818
> 
> 赞同：1
> 
> 时间：2013-02-14T16:45:44.667
> 
> 标签：c#, winforms

我有一个 C# WinForm 应用程序。在主窗体上，我有一个用户控件。我想要做的是，每当在键盘上按下一个键时，我想让我的用户控件接收键盘输入，以便与键盘相关的事件（KeyDown、KeyUp 和 KeyPress）都在其中触发特定的用户控制。

我希望表单上的实际主表单和任何其他用户控件忽略按键。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:51:40.303

您可以通过确保您的控件始终具有焦点来做到这一点。一个简单的方法是在 Control.LostFocus 事件中重新设置焦点。UserControls 基类不太适合接收焦点，因此您可能希望在用户控件中选择一个控件以始终拥有焦点并接收事件。

# mongodb - 使用 MongoDB 进行消息传递有哪些注意事项？

> ID：14879821
> 
> 赞同：1
> 
> 时间：2013-02-14T16:45:50.507
> 
> 标签：mongodb, message-queue, message-passing

MongoDB 可用于实时消息传递，方法是使用可尾游标来尾随有上限的集合。

为此目的使用 MongoDB 有哪些注意事项？一个明显的问题是没有内存中的集合，因此当不需要持久性时，消息可能会写入磁盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:05:53.140

一个警告是，如果你有一个副本集，那么只有一台 Mongo 机器可以接受写入。这将限制您可以为队列执行的写入次数。

另一个明显的警告是，对于有上限的集合，您显然必须在消息开始退出集合之前阅读/使用这些消息。如果消费者失败了——而你没有足够快地抓住它——你就会丢失消息。

我对你的最后一句话感到困惑。=（我敢肯定你知道 Mongo 尽最大努力将所有内容保存在 RAM 中[。http://docs.mongodb.org/manual/core/capped-collections/](http://docs.mongodb.org/manual/core/capped-collections/)他们没有提到上限集合不会在 RAM 中（除非您的工作集对于 RAM 来说太大了）。

# extjs - 如果我将选择和拖放都添加到 ExtJS 网格中，如何在拖动时取消选择？

> ID：14879822
> 
> 赞同：0
> 
> 时间：2013-02-14T16:45:58.573
> 
> 标签：extjs

当我制作这样的网格时：

```
 Ext.create('Ext.grid.Panel', {
        title: 'Simpsons',
        store: Ext.data.StoreManager.lookup('simpsonsStore'),
        columns: [
            { text: 'Name',  dataIndex: 'name' },
            { text: 'Email', dataIndex: 'email', flex: 1 },
            { text: 'Phone', dataIndex: 'phone' }
        ],
        height: 200,
        width: 400,
        selType: 'checkboxmodel',
        selModel: {
            injectCheckbox: 1,
            mode: 'SIMPLE'
        },
        viewConfig: {
            plugins: [
                { ptype: 'gridviewdragdrop' }
            ]
        },
    }) 
```

我不想在拖动时选中复选框，因为：

1.  我只想一次拖动一个项目，
2.  我希望能够多选其他操作。

我可以在删除后添加一个侦听器来取消选择，但是：

1.  如果我开始拖动但改变主意，这会使项目处于选中状态
2.  这意味着我无法停止拖动多个项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:21:40.637

在我看来，您应该将网格默认选择模型与 extjs 库提供的 ux 'checkcolumn' 一起使用。这将使您能够选择行进行重新排序，而与行的复选框选择无关。

# xml - 如何强制对 Web 文档进行 XHTML5 解释？

> ID：14879823
> 
> 赞同：4
> 
> 时间：2013-02-14T16:45:54.890
> 
> 标签：xml, html

有没有办法通知Web 浏览器文档是用XHTML5 编码的，即HTML5 的XML 序列化？这个问题并不像第一印象所暗示的那样明显——符合标准的 XHTML5 标头与用于 XHTML 1.0 的标头相同，因此我的浏览器（Mozilla Firefox 18）将 XHTML5 视为 XHTML 1.0，因此抱怨以前不可用的所有内容XHTML5 出现了。

根据[W3C HTML5 Candidate Recomendation](http://www.w3.org/TR/html5/)，DOCTYPE 标头是可选的（对于有效的 XML 甚至是错误的），html 命名空间与 XHTML 1.0 完全相同。那么我们如何知道如何对下面的代码进行分类呢？而浏览器又是如何区分这两种标准的呢？

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-GB">
    <head>
        <title>A questioning document</title>
    </head>
    <body>
        XHTML5 or XHTML 1.0 — that is the question...
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:46:29.873

`<iframe>`在 XHTML5 中（即 XML 模式）在 Firefox 中运行良好。但是您需要用`id`属性而不是`name`属性来识别 iframe。

另一方面，对于 IE9，您需要使用`name`属性而不是`id`属性。

最好的方法是同时使用两者，设置为相同的值。

有关示例，请参见[http://www.alohci.net/application/xhtml+xml/iframe-in-xml.htm.ashx 。](http://www.alohci.net/application/xhtml+xml/iframe-in-xml.htm.ashx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:17:48.260

请查看这些关于 XHTML 未来的链接以及为什么您可能只看到支持的 XHTML 1.0 验证：

[http://www.w3.org/2009/06/xhtml-faq.html](http://www.w3.org/2009/06/xhtml-faq.html)

[https://softwareengineering.stackexchange.com/questions/149839/is-xhtml5-dead-or-is-it-just-an-synonym-of-html5](https://softwareengineering.stackexchange.com/questions/149839/is-xhtml5-dead-or-is-it-just-an-synonym-of-html5)

# python - Python 序列语法

> ID：14879825
> 
> 赞同：1
> 
> 时间：2013-02-14T16:46:06.130
> 
> 标签：python, plugins, sublimetext2, sequences

我是 python 新手，正在阅读 Sublime Text 插件的一些代码，遇到了一些我不熟悉的代码。

```
views = [v for v in sublime.active_window().views()] 
```

这是我不明白的“[v for v”部分。这段代码到底在做什么？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T16:47:40.733

这是一个列表理解。它等效于（但比）：

```
views = []
for v in sublime.active_window().views():
    views.append(v) 
```

请注意，在这种情况下，他们应该刚刚使用`list`：

```
views = list(sublime.active_window().views()) 
```

在 python2.7 中还引入了其他类型的推导：

集合理解：

```
{x for x in iterable} 
```

和听写理解：

```
{k:v for k,v in iterable_that_yields_2_tuples} 
```

因此，这是创建所有值为 1 的字典的低效方法：

```
{k:1 for k in ("foo","bar","baz")} 
```

最后，python 还支持[生成器表达式](http://docs.python.org/2/reference/expressions.html#generator-expressions)（它们至少在 python2.6 中可用——我不确定它们是什么时候引入的）：

```
(x for x in iterable) 
```

这类似于列表推导式，但它返回一个可迭代对象。在您实际迭代它们之前，生成器并不是特别有用。优点是生成器会即时计算值（而不是将值存储在列表中，然后您可以稍后对其进行迭代）。它们的内存效率更高，但在某些情况下它们的执行速度比 list-comps 慢 - 在其他情况下，它们比 list-comprehensions 更出色，因为它很容易说 - 请给我前 3 个元素 - 而使用列表理解，您必须预先计算所有元素，这有时是一个昂贵的过程。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T16:50:22.037

这是一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。它有点像带有内联 for 循环的表达式，用于动态创建快速列表。在这种情况下，它正在创建由`sublime.active_window().views()`.

当您需要转换每个值时，列表推导式真的很出色。例如，这里有一个快速的列表理解来获得前十个完美的正方形：

```
[x*x for x in range(1,11)] 
```

# hex - 将波形文件转换为十六进制文件，用于对闪存芯片进行编程

> ID：14879829
> 
> 赞同：1
> 
> 时间：2013-02-14T16:46:14.570
> 
> 标签：hex, wav, waveform, wave, hexagonal-tiles

我需要将一些 PCM 波形文件转换为 HEX 文件，以便对内存芯片进行编程。正确的做法是什么？

我找不到简单地进行转换的实用程序。我知道像[hexedit](http://www.catch22.net/software/hexedit)这样的软件可以编辑十六进制格式的文件，但是如何将文件转换为可编程的十六进制格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:58:33.400

谷歌是你的朋友...

尝试搜索“bin2hex”或“bin2asm”或“bin2c”

# linq-to-xml - Linq to XML 问题

> ID：14879834
> 
> 赞同：0
> 
> 时间：2013-02-14T16:46:29.073
> 
> 标签：linq-to-xml

男孩，我在 Linq 上很密集吗？尤其是 Linq to XML。我正在努力扭转这个...

```
<?xml version="1.0"?>
<Template>
    <TemplateData>
        <Data>
            <ACTIVE>A</ACTIVE>
            <FIRST_NAME> JASON</FIRST_NAME>
            <LAST_NAME>ABATE</LAST_NAME>
            <DOB>2/11/2013 12:01:36 PM</DOB>
            <PHONE/>
                </Data>
         </TemplateData>
</Template> 
```

进入这个...

```
IEnumerable<DatModel> 
```

DatModel 等于这个...

```
public class DatModel{
        public int ACTIVE{ get; set; }
        public int FIRST_NAME{ get; set; }
        public int LAST_NAME{ get; set; }
        public int DOB{ get; set; }
        public string PHONE{ get; set; }
} 
```

这就是我想要做的......

```
 IEnumerable<DatModel> templates = (IEnumerable<DatModel>)
                            from templatesList in xDocument.Descendants("Template")
                            select new TemplateModel{
    Template = (
                                from template in templatesList.Element("TemplateData").Elements("Data")
    select new DataModel{
    ACTIVE = template.Element("ACTIVE").Value,
)}.ToList()
}; 
```

我的清单一直是空的。我不确定为什么会这样。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:11:39.560

稍微清理一下您的代码以使其编译并添加一些 ToList()，它似乎可以工作。（我使用匿名类）

```
private static String s = @"<?xml version=""1.0""?>
    <Template>
    <TemplateData>
    <Data>
        <ACTIVE>A</ACTIVE>
        <FIRST_NAME> JASON</FIRST_NAME>
        <LAST_NAME>ABATE</LAST_NAME>
        <DOB>2/11/2013 12:01:36 PM</DOB>
        <PHONE/>
            </Data>
        </TemplateData>
    </Template>";

[Test]
public void myTest()
{

    XDocument xDocument = XDocument.Parse(s);

    var t = (from templatesList in xDocument.Descendants("Template")
            select new
                {
                    Template = (from template in templatesList.Element("TemplateData").Elements("Data")
                                select new
                                    {
                                        ACTIVE = template.Element("ACTIVE").Value
                                    }).ToList()
                }).ToList();

    Assert.AreEqual("A",t[0].Template[0].ACTIVE); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:56:35.010

您的模型定义不正确（数据类型错误）。还要使用正确的命名对话。

尝试这个：

```
public class DatModel
{
    public string Active { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime Dob { get; set; }
    public string Phone { get; set; }
}

string xml = @"<?xml version=""1.0""?>
                <Template>
                    <TemplateData>
                        <Data>
                            <ACTIVE>A</ACTIVE>
                            <FIRST_NAME> JASON</FIRST_NAME>
                            <LAST_NAME>ABATE</LAST_NAME>
                            <DOB>2/11/2013 12:01:36 PM</DOB>
                            <PHONE/>
                                </Data>
                            </TemplateData>
                </Template>";

XDocument doc = XDocument.Parse(xml);
IEnumerable<DatModel> datModels =
    doc.Descendants("Data").Select(d => new DatModel
    {
        Active = (string) d.Element("ACTIVE"),
        FirstName = (string) d.Element("FIRST_NAME"),
        LastName = (string)d.Element("LAST_NAME"),
        Dob = (DateTime) d.Element("DOB"),
        Phone = (string)d.Element("PHONE"),
    }); 
```

# haskell - 在 Haskell 中，当你只传递一个列表时，map 函数意味着什么？

> ID：14879836
> 
> 赞同：3
> 
> 时间：2013-02-14T16:46:32.853
> 
> 标签：haskell, map, parameters, pointfree, partial-application

在我要调试的 Haskell 项目中，代码中有一些实例`map`仅与一个参数一起使用 - 一个列表 - 被传递。

例如

```
printReports :: [Report] -> IO ()
printReports = putStrLn . unlines . map show 
```

和

```
printRuns' :: [Run] -> IO ()
printRuns' = putStrLn . unlines . map showRecipes' 
```

在这种情况下是什么`map`意思/做什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T16:53:14.007

地图类型：

```
map :: (a -> b) -> [a] -> [b] 
```

所以你必须提供一个函数 from `a`to`b`和一个 type 列表`a`。

在您的示例中，该函数已经给出（`show`和`showRecipes'`），因此，您只需提供`printReports`和`printRuns'`一个列表。

那里发生的事情称为***部分应用功能***，请参见此处 [http://www.haskell.org/haskellwiki/Partial_application](http://www.haskell.org/haskellwiki/Partial_application)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-14T17:09:48.347

正如其他人所说，`map show`这是一个部分应用的功能，阅读它是一个好主意。但是您给出的代码也是无[点](http://www.haskell.org/haskellwiki/Pointfree)编程风格的示例，您可能更容易理解它。该函数`printReports`也可以写成

```
printReports xs = (putStrLn . unlines . map show) xs 
```

或者，等效地，

```
printReports xs = putStrLn . unlines . map show $ xs 
```

一般来说，以下所有内容都是等价的：

```
myFunction x y z = someExpression x y z
myFunction x y = someExpression x y
myFunction x = someExpression x
myFunction = someExpression 
```

这有点过于简单化了，但它会让你开始。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T07:55:04.343

根据经验，如果你有这样的事情......

```
foo = bar . foobar . blafasel 
```

...您可以在心理上替换点`$`并在两侧添加一个变量

```
foo x = bar $ foobar $ blafasel x 
```

为什么这个工作已经在其他答案中进行了解释，但是这个技巧可以帮助我阅读无点风格而不需要太多思考。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T17:17:57.390

在此上下文地图中，将显示功能应用于列表中的每个报告。结果应类似于 [show report0, show report1,... ,show reportn]

换句话说，你传递一个报表列表和函数映射，**映射**列表中每个报表类型的项目显示函数。

您的功能的构建方式对应于无[点样式](http://en.wikipedia.org/wiki/Point-free_programming)。

# ruby-on-rails - 允许本地 Web 服务使用 CanCan 和 Devise 更新 Rails 数据

> ID：14879837
> 
> 赞同：0
> 
> 时间：2013-02-14T16:46:38.377
> 
> 标签：ruby-on-rails, web-services, devise, cancan

我有一个本地网络服务正在运行，它需要将数据发布到 Rails 以更新和添加记录。我应该如何在我的 CanCan/Devise 身份验证/授权中使用它？有没有办法允许仅本地主机访问授权，或创建与其他服务的持久会话？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:57:45.393

如果您想在本地授予访问权限，

```
# application_controller.rb
def current_ability
   @current_ability ||= Ability.new(current_user, request.local?)
end

# ability.rb
class Ability
  include CanCan::Ability
  def initialize(user, local)
    can(:manage, :all) if local
    ...
  end
end 
```

# css - 垂直对齐的 Div

> ID：14879849
> 
> 赞同：0
> 
> 时间：2013-02-14T16:47:08.270
> 
> 标签：css, html, center

无论用户的屏幕分辨率或窗口大小如何，这里有没有人知道如何使 div 进入页面中心（垂直）？例如，Instagram 的登录页面。如果你让你的窗口更小，div 会一直浮动在中心，直到它到达顶部。我做到了，但问题是当用户不断缩小窗口时，div 实际上正在离开用户窗口（到顶部）。

这是该示例的 Instagram 登录页面： [https ://instagram.com/accounts/login/](https://instagram.com/accounts/login/)

这是我的另一个例子的页面：http: [//www.farespr.com](http://www.farespr.com)

将不胜感激=）

编辑：这是我的主要 div 代码：

```
#wrapper2{
    width: 960px;
    height: 530px;
    top: 50%;
    margin-top: -280px;
    margin-right: auto;
    margin-left: auto;
    position: fixed;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    border: 1px solid #dcdcdc;
    box-shadow: 0px 0px 5px 3px #f0f0f0;
    background: -webkit-gradient(linear, left top, left bottom, from(#fafafa), to(#efefef));
    background: -moz-linear-gradient(top,  #fafafa,  #efefef);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa', endColorstr='#efefef');
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T16:52:51.177

这适用于任何大小的 div。

**演示：http: [//jsfiddle.net/BxLhz/](http://jsfiddle.net/BxLhz/)**

HTML：

```
<div></div> 
```

CSS：

```
div {
    width: 100px;
    height: 100px;
    background-color: #cc333;

    position: absolute;
    top:0;
    bottom: 0;
    left: 0;
    right: 0;

    margin: auto;
} 
```

**更新：**

**演示：http: [//jsfiddle.net/Ha4PU/](http://jsfiddle.net/Ha4PU/)**

CSS：

```
#wrapper {
    width: 200px;
    height: 200px;
    background-color: #ccc333;

    position: absolute;
    top:0;
    bottom: 0;
    left: 0;
    right: 0;

    margin: auto;
}

@media only screen and (max-height : 200px) {
    #wrapper {
        position: relative;
    }
} 
```

其中`max-height`= 高度`.wrapper`

# windows-8 - windows 手机 8 和 windows 8 平板电脑

> ID：14879850
> 
> 赞同：2
> 
> 时间：2013-02-14T16:47:12.620
> 
> 标签：windows-8, windows-phone-8

我想知道如何为 Windows Phone 8 和 Windows 8 平板电脑开发应用程序？在 Visual Studio 中创建新的 Windows Phone 项目时，我看不到任何像 Xcode 中那样针对手机和平板电脑设备的选项。是否有关于如何为两种设备创建相同应用程序的指南或教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:55:02.433

尽管它们使用相同的内核，但 Windows 8 (RT) 和 Windows Phone 8 是不同的操作系统。这与运行 iOS 的 iPhone/iPad 不同。

您将需要为 Windows Phone 8 和 Windows RT 创建单独的项目。如果您使用 C#/XAML 进行编码，则代码应该在两个平台之间具有相当的可移植性。这是 Build 会议上关于[如何在 Windows 8 和 Windows Phone 8 中利用您的代码](http://channel9.msdn.com/Events/Build/2012/3-043)的精彩会议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T12:13:47.407

如前所述，您需要创建两个单独的项目。

可以创建一个名为 Portable Class Library 的库，您可以在其中放置可在 Windows Phone 8 应用程序和 Windows Store 应用程序之间共享的代码。请参阅[最大化 Windows Phone 8 和 Windows 8 之间的代码重用](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj681693%28v=vs.105%29.aspx "最大化 Windows Phone 8 和 Windows 8 之间的代码重用")

文章中提到的另一种技术是使用 MVVM 能够将 UI（平台之间差异更大）与逻辑（更易于共享）分离。

# html - 如何缩小内容和标题之间的差距？

> ID：14879851
> 
> 赞同：0
> 
> 时间：2013-02-14T16:47:10.533
> 
> 标签：html, css

这是问题的 js 小提琴：http: [//bit.ly/Zd8JAU](http://bit.ly/Zd8JAU)

我正在尝试在页面顶部放置带有徽标和居中标题的标题。这个想法是将标题置于页面本身的中心，而不是在徽标右侧的间隙内，如果这有意义吗？

所以我将标志漂浮在标题的顶部，然后改变标志的位置向上移动（否则它坚持在标题下方）。问题是这会产生一个间隙，它会沿着页面向下延伸，我必须以某种方式将所有内容都移到徽标的高度，我真的不想这样做。

那么有没有更好的方法让我的徽标位于标题的左侧，而不会在任何地方造成间隙，也不会导致标题中的文本出现偏移？

编辑：更新小提琴以更清楚我想要实现的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:25:54.453

Yes, consider using a CSS background for your logo as part of your NAV element, which makes it easier to pad your text and position the image without interference.

# sql-server - 将日期值格式化为 YYYYMM00

> ID：14879852
> 
> 赞同：0
> 
> 时间：2013-02-14T16:47:20.827
> 
> 标签：sql-server, tsql

我想`yyyymm00`在目标表（`20091000`）中以这种格式保存它。我正在使用这个

```
REPLACE(CAST(LEFT((invoice_date), 8) AS Nvarchar(20)), '-', '') 
```

但它没有得到我想要的它给我的东西`oct 1 2`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:50:17.620

您可以使用以下内容：

```
Convert( Int, Convert( Varchar(6), invoice_date, 112 ) ) + '00' 
```

此外，使用：

```
Convert( Int, Convert( Varchar(8), invoice_date, 112 ) ) 
```

返回：YYYMMDD。

# r - R相当于initcap？

> ID：14879861
> 
> 赞同：0
> 
> 时间：2013-02-14T16:47:35.893
> 
> 标签：r

在 Oracle 中工作时，我非常喜欢函数 initcap()，因为有些数据字段是全大写的。在这些列上使用 initcap 会使报表在视觉上更具吸引力。

该函数的目的是遍历字符串向量并确保每个单词的第一个字母大写。是否存在与 initcap 等效的 R？

# html - MVC/Razor：条件嵌套 html 标签

> ID：14879864
> 
> 赞同：20
> 
> 时间：2013-02-14T16:47:40.540
> 
> 标签：html, asp.net-mvc, razor

我想要这个 html 代码，其中条件（“myBool”）为真：

```
<div>
  <fieldset>
    <legend>
      @sometext
    </legend>
    ... other stuffs
  </fieldset>
<div> 
```

而这个是假的：

```
<div>
  <b>
    @sometext
  </b>
  ... other stuffs
<div> 
```

我不想写两次相同的代码（“其他东西”）所以我尝试了这个：

```
<div>
@if(myBool)
{
  <fieldset>
    <legend>
}
else
{
  <b>
}
@sometext
if (myBool)
{
  </legend>
}
else
{
  </b>
}
...other stuff
if (myBool)
{
  </fieldset>
}
</div> 
```

但我得到编译错误。

你知道我怎么能做我想做的事而不必做这样的事情：

```
@if(myBool)
{
  <div>
    <fieldset>
      <legend>
        @sometext
      </legend>
      ... other stuffs
    </fieldset>
  <div>
}
else
{
  <div>
    <b>
      @sometext
    </b>
    ... other stuffs
  <div>
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-14T17:22:58.293

以下可能使用`@:`运算符工作。当您在代码块中时，无论是因为控制结构（如下面给出的示例）还是因为您明确定义了一个，您可以通过在前面加上 @-character 后跟 :（冒号）来输出纯文本特点。

```
<div>
    @if (someCondition)
    {
        @:<fieldset>
            @:<legend>
    }
    else
    {
        @:<b>
    }

    @sometext

    if (someCondition)
    {
        @:</legend>
    }
    else
    {
        @:</b>
    }

    ... other stuffs

    @if (someCondition)
    {
        @:</fieldset>
    }
</div> 
```

或者您也可以尝试以下方法：

```
<div>
    @Html.Raw(someCondition ? "<fieldset><legend>" : "<b>")
    @sometext
    @Html.Raw(someCondition ? "</legend>" : "</b>")

    ... other stuffs  

    @if (someCondition)
    {
        @:</fieldset>
    }  
</div> 
```

# jquery - Javascript模板函数替换字符串并且不处理空格

> ID：14879866
> 
> 赞同：0
> 
> 时间：2013-02-14T16:47:49.140
> 
> 标签：jquery, regex, replace, template-engine, str-replace

几天前我写了一个简单的模板函数，现在的问题是空格会杀死*标签*。因此，当我输入这样的内容时：`<div id="str">#{my} #{name} #{is} #{#{a}}</div>`效果很好，但是以下内容却不行：`<div id="str">#{my} #{name} #{is} #{ #{a} }</div>`.

这是我到目前为止所做的：

```
$.tmpl = function(str, obj) {
    do {
        var beforeReplace = str;
        for(var key in obj) {
            str = str.replace("#{" + key + "}", obj[key]);
        }
        var afterReplace = str !== beforeReplace;
    } while (afterReplace);

    return str;
};

var map = {
    my: "Am",
    name: "I",
    is: "<a href='#'>awesome</a>",
    a: "#{b}",
    b: "c",
    c: "?"
};

$("#str").html(function(index, oldhtml) {
    $(this).html( $.tmpl(oldhtml, map) );
}); 
```

`#{a}`如果我使用and ，我怎样才能让它工作`#{ #{a} }`。我知道，这是可能的，甚至很简单，但是我不是正则表达式专家。

这**[行得通](http://fiddle.jshell.net/LYgW2/3/)**。

这**[失败了](http://fiddle.jshell.net/LYgW2/4/)**。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:09:05.803

您需要从要替换的键中修剪空格。为此，您可以使用函数作为 String.replace() 函数的第二个参数。您还可以使用这样的函数一次替换每次传递的所有匹配项。因此，请尝试以下操作：

```
$.tmpl = function(str, obj) {
    do {
        var beforeReplace = str;
        str = str.replace(/#{([^}]+)}/g, function(wholeMatch, key) {
            var substitution = obj[$.trim(key)];
            return (substitution === undefined ? wholeMatch : substitution);
        });
        var afterReplace = str !== beforeReplace;
    } while (afterReplace);

    return str;
}; 
```

正则表达式 /#{([^}]+)}/g 查找以“#{”开头的任何字符串的所有出现（“g”表示“全局”），然后至少有一个字符不是“}”，然后以“}”结尾。括号只是用于将键本身分组，以便正则表达式引擎将它作为函数的参数为​​我们提取出来。

另一个正则表达式替换 (/^\s+|\s+$/g) 只是修剪字符串。它找到所有前导和尾随空格并将其删除。在 ECMAScript 5 中，有一个 String.trim() 函数提供了内置的这个功能，但它还不够广泛，无法可靠地使用它。有关详细信息，请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)。

但是，我不确定像这样进行多次传球是否明智。您介绍了无限循环的可能性：

```
var map = {
    a: "#{b}",
    b: "#{a}"
};

$.tmpl("#{a}", map); 
```

您还介绍了地图中的值可能意外包含 #{...} 并在您无意中扩展的可能性。如果这些值是由用户输入的，这尤其令人担忧。在这种情况下，您刚刚让他可以让您的应用程序无限循环或公开其他键的值。大多数模板引擎不提供以这种方式重复替换参数的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-28T09:39:13.080

```
(function($) {
  $.fn.tmpl = function(obj) {
    var _this = this,
      el = $(this);

    return (function() {
      var original = el.html();

      el.html(el.html().replace(/{{([^}}]+)}}/g, function(wholeMatch, key) {
        var substitution = obj[$.trim(key)];

        return typeof substitution == 'undefined' ? wholeMatch : substitution;
      }));

      return el.html() == original ? _this : $(el).tmpl(obj);
    })();
  };
})(jQuery);

$($('#template').html())
  .tmpl({
    greeting: 'Hello',
    wish: 'everyone a wonderful day'
  })
  .appendTo($('#results'));
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<div id="results"></div>

<template id="template">
  <p>{{greeting}}, I just wanted to wish <b>{{wish}}</b>!</p>
</template>
```

# perl - 无法获得正确的 viewbox SVG

> ID：14879867
> 
> 赞同：0
> 
> 时间：2013-02-14T16:47:51.147
> 
> 标签：perl, svg, viewbox

我正在尝试用 svg 绘制一些点。它们是小范围的 x,y 坐标：

```
57.206116   -6.223032
57.2225 -6.2441702
57.233299   -6.1833301
57.246666   -6.210278
57.208561   -6.2244201 
```

当它们被绘制时，它们在屏幕上显然非常小。这是我的视图框命令：

```
print qq(
<svg width="20cm" height="20cm" viewBox="57 -7 3 3">); 
```

我如何改进它，以便在 20 x 20 厘米的盒子内清楚地显示它们。

```
#!/usr/bin/perl
use DBI;
use CGI::Carp qw(fatalsToBrowser);

#Set content type
print "Content-Type: image/svg-xml\n\n";

#Establish connection to database
$dbh = DBI->connect ('dbi:Oracle:geosgen','user','pass')
|| die "Man down! Man down!: $DBI::errstr";

#Send SQL query for finds
$sth1 = $dbh->prepare("select table_alias.mot.sdo_point.X, table_alias.mot.sdo_point.Y 
from   x.mounts table_alias");

$sth1->execute;

#Set content type
print qq(<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN" 
"http://www.w3.org/TR/2000/CR-SVG-20001102/DTD/svg-20001102.dtd">);

print qq(<svg width="20cm" height="20cm" viewBox="57 -7 3 3">);

while (@data = $sth1->fetchrow_array()) {
print qq(
<g transform="scale(1,-1)">
<circle cx="$data[0]" cy="$data[1]" r="0.01" fill="green">
</circle>   
</g>
       );   
  } 
```

打印 qq();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:53:46.780

我对您的代码进行了一些尝试。

```
<?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN" "http://www.w3.org/TR/2000/CR-SVG-20001102/DTD/svg-20001102.dtd">

<body>  
<div id="test">
<svg width="20cm" height="20cm" viewBox="57 -7 3 3" >

<rect x="57" y="-7" width="3" height="3" fill="none" stroke="black" stroke-width="0.01px" />

<g >

<circle cx="57.206116" cy="-6.223032" r="0.01" fill="green"></circle>   
<circle cx="57.2225" cy="-6.2441702" r="0.01" fill="red"></circle>   
<circle cx="57.233299" cy="-6.1833301" r="0.01" fill="blue"></circle>   
</g>

</svg>

</div>
</body> 
```

我删除了比例并添加了一个矩形来查看我们在哪里。

这就是我的结果： ![在此处输入图像描述](../Images/5ecbbef7960f4dacb557a21b7f30d1c4.png)

# mysql - 在 mySQL 中选择不匹配的字段

> ID：14879869
> 
> 赞同：1
> 
> 时间：2013-02-14T16:47:54.943
> 
> 标签：mysql

我有如下三个表：Contact、Custom_Field、Custom_Field_Value。

每个联系人可以为每个 Custom_Field 拥有一个 Custom_Field_Value 记录。因此，Contact 和 Custom_Field_Value 之间存在 1:many 关系，但并不是那么简单。

一切正常 - 除了一种边缘情况，我需要选择未设置特定 Custom_Field 的联系人（即不存在链接到联系人和 Custom_Field 的相应 Custom_Field_Value 记录）。这出乎意料地困难。我不能只使用普通的“左连接并查找 NULL”方法，因为它们可能有不同的自定义字段——但不是我要找的那个。我需要说“Custom_Field_ID=10”，但我不能说，因为我要找的东西不存在。

我的思路是朝着这个方向前进，但我现在只是在纠结：

```
Select ID, First_Name, Last_Name, CF_ID  From 

(

(Select Contact.ID, First_Name, Last_Name, Custom_Field_Value.ID as CFV_ID, Custom_Field_Value.CustomFieldID as CF_ID, TextValue 
From Contact Inner Join Custom_Field_Value on Contact.ID = Custom_Field_Value.ContactID 
Where Custom_Field_Value.CustomFieldID=23 Order By Contact.ID)

UNION

(Select Contact.ID, First_Name, Last_Name, Custom_Field_Value.ID as CFV_ID, Custom_Field_Value.CustomFieldID as CF_ID, TextValue 
From Contact LEFT Join Custom_Field_Value on Contact.ID = Custom_Field_Value.ContactID 
Order by Contact.ID)

) as A

Group BY `ID`, CF_ID ASC 
```

我不想为每种可能性创建空白记录，因为可能有数百万条记录，并且每次有人添加自定义字段时，数据库都必须插入数百万条相应的空白记录。

如果我们能做到这一点，那就太好了：

```
Select ID From thingy 
EXCLUDE
Select * From thingy Where x = true 
```

这是一个讨厌的，但我知道会有人会喜欢它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:58:09.540

好吧，我想我现在有了更好的理解。我试图在没有子查询的情况下完成它，但我不确定是否可以。

你能试一下吗

```
Select Contact.ID, First_Name, Last_Name, Custom_Field_Value.ID as CFV_ID, Custom_Field_Value.CustomFieldID as CF_ID, TextValue 
From Contact LEFT Join Custom_Field_Value on Contact.ID = Custom_Field_Value.ContactID 
WHERE NOT EXISTS(SELECT * FROM Custom_Field_Value cfv2 WHERE cfv2.ContactID = Contact.ID AND cfv2.CustomFieldID=23)
Order by Contact.ID 
```

NOT EXISTS 子查询应该只返回联系人对该字段没有值的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:44:10.867

这是我最终得到的疯狂 SQL - 由用户动态创建。只是发布它以防它对任何人有用。（非常欢迎任何关于优化的提示！）：

问题是我不仅必须选择丢失的动态记录，而且还必须将左连接查询连接到一个结果中。

```
SELECT * FROM (
    (SELECT * FROM Contact 
        WHERE (...some dynamic stuff...) 
    ) 
    UNION All 
   (SELECT Contact.* FROM Contact Inner Join Contact_Campaign_Link ON Contact.ID=Contact_Campaign_Link.Contact_ID 
       WHERE ((Campaign_ID=31))
   ) 
UNION All 
    (SELECT * FROM Contact 
        WHERE (CustomerID=3) 
        AND (NOT EXISTS 
            (SELECT * FROM Custom_Field_Value cfv2 
                WHERE (cfv2.ContactID = Contact.ID) 
                AND (cfv2.CustomFieldID =27) )) ORDER BY Contact.ID)
            ) As tbl 

GROUP BY tbl.ID HAVING COUNT(*)=3 Order by ID 
```

# sql - 为 SQL Server 中的存档表节省空间

> ID：14879871
> 
> 赞同：2
> 
> 时间：2013-02-14T16:47:58.810
> 
> 标签：sql, sql-server, database, database-design, archiving

我有一个 SQL 2008 表，表中有 773,705,261 行。我想创建一个存档表来存档数据，但我想减少这些数据所需的空间量。访问存档数据的速度不是主要问题，但始终是需要的。

当前的表定义是这样的：

```
TableID     (PK)    BIGINT      NOT NULL
DocumentID  (FK)    BIGINT      NOT NULL
StatusID    (FK)    INT         NOT NULL
RowCreateDate       DATETIME    NOT NULL 
```

根据我的计算，当前表在表中每行使用 28 个字节。问题在于，对于每个 DocumentID，它在此表中可能有 6 到 10 行（每个 DocumentID 的行数将来也可能会增加），具体取决于系统处理的状态数量。

我减少存储这些数据所需空间量的第一个想法是为每个 DocumentID 设置 1 行，并拥有一个 XML 字段，其中包含所有 StatusID 和它们发生的时间。像这样的东西：

```
TableID     (PK)    BIGINT      NOT NULL
DocumentID  (FK)    BIGINT      NOT NULL
Statuses            XML         NOT NULL 
```

有人对我有什么建议吗？有什么方法可以研究？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:59:18.077

将存档表设置为使用页面压缩。

来自 BOL

```
CREATE TABLE dbo.T1 
(c1 int, c2 nvarchar(200) )
WITH (DATA_COMPRESSION = PAGE); 
```

如果您不希望从存档表中进行任何更新或删除（以及不在表两端的删除），那么我还将使用 100% 的填充因子创建聚集索引。这样一来，每一页都不会留下任何空间。

当然，在实际应用任何东西之前，我都会在 BOL 中查看两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:53:18.487

您可能能够将`INT`数据类型用于 TableID 和 DocumentID，`SMALLINT`或`TINYINT`用于 StatusID。根据 RowCreateDate 列所需的精度，您可以使用`SMALLDATETIME`或`DATE`。这些数据类型使用较少的磁盘空间，并会在 775,000,000 行中为您节省数 GB。

Kenneth 关于使用页面压缩和 FILLFACTOR = 100 的建议绝对值得考虑。

# jquery - 查询。将链接属性复制到 div 中的动态元素

> ID：14879875
> 
> 赞同：0
> 
> 时间：2013-02-14T16:48:09.027
> 
> 标签：jquery, append, href, attr

我仍在学习 jQuery，我一直试图让每个动态生成的链接与 Div 中的前一个静态链接具有相同的 URL。该代码似乎将相同的 URL (#1) 应用于所有生成的链接，而在第二个 Div 上我需要它是#2。

代码：

```
$(document).ready(function() {
$('.sorter > div p').append('<a class="rdm">Read More</a>');
$('a.rdm').each(function() {
    var lnk = $('.sorter > div').find('a').attr('href');
    $(this).attr('href', '' + lnk);
});
}); 
```

HTML：

```
<div class="sorter">
<div><a href="#1">link A</a><p>some text </p></div><br /><br />
<div><a href="#2">link B</a><p>some text </p></div>
</div> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:02:13.790

使用范围选择器可以帮助您单独处理每个 div。这是一个带有工作解决方案的 jsfiddle：http: [//jsfiddle.net/tuAUb/](http://jsfiddle.net/tuAUb/)

```
$(document).ready(function() {
    $('.sorter > div').each(function() {
        $('p', this).append('<a class="rdm">Read More</a>');
        var lnk = $(this).find('a').attr('href');
        $('a.rdm', this).attr('href', lnk);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:54:11.953

尝试这个。当你这样做时，`each`我使用锚的索引来生成它`href`：

```
$(document).ready(function() {
    $('.sorter > div p').append('<a class="rdm">Read More</a>');
    $('a.rdm').each(function(i) {
        $(this).attr('href', '#' + (i + 1));
    });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T16:52:06.823

哦，我想你需要这个：http: [//jsfiddle.net/GSgz5/](http://jsfiddle.net/GSgz5/)

```
 var lnk = $(this).parent().siblings('a').attr('href'); //<--get href this way
 $(this).attr('href', lnk); 
```

# c - 如何在 json_tokener_parse() 之后获取 json 值？

> ID：14879876
> 
> 赞同：3
> 
> 时间：2013-02-14T16:48:13.587
> 
> 标签：c, json, libjson

我有以下代码

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
#include <string.h>

#include <json/json.h>

int main(int argc, char **argv)
{
      json_object *new_obj;
      char buf[] = "{ \"foo\": \"bar\", \"foo2\": \"bar2\", \"foo3\": \"bar3\" }"
      new_obj = json_tokener_parse(buf);
      printf("The value of foo is %s" /*What I have to put here?*/);
      printf("The value of foo2 is %s" /*What I have to put here?*/);
      printf("The value of foo3 is %s" /*What I have to put here?*/);
      json_object_put(new_obj);
} 
```

我知道我们必须用来`json_tokener_parse()`解析 json 字符串，但是我不知道如何从 json_object 中提取值，`new_obj`如上面代码中的注释所示

之后如何获取json值 `json_tokener_parse()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T17:19:40.453

首先，您需要获取`json_object`特定节点：

```
json_object *obj_foo = json_object_object_get(new_obj, "foo"); 
```

...然后您可以使用适当的 getter 来获取特定类型的节点的值：

```
char *foo_val = json_object_get_string(obj_foo2); 
```

所以，简而言之，你可以这样做：

```
printf("The value of foo is %s", 
    json_object_get_string(json_object_object_get(new_obj, "foo"))
); 
```

显然，最好分多个步骤进行，这样您就可以检查错误（在这种情况下：空指针）并防止未定义的行为等。

您可以[在此处找到 JSON C API 文档](http://json-c.github.io/json-c/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-21T02:58:20.873

接受的答案显示了如何使用`json_object_object_get`现在已弃用的功能。

`json_object_object_get_ex`应改为使用。

```
const char *json = "{ \"Name\": \"xxxxx\", \"Id\": 101, \"Voting_eligible\": true }";
json_object *root_obj = json_tokener_parse(json);

json_object *tmp;
if (json_object_object_get_ex(root_obj, "Name", &tmp){
    // Key Name exists
    printf("Name: %s\n", json_object_get_string(tmp));
    // Name: xxxxx
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-10T10:55:30.693

您好，请查看此示例（已测试）。复制并粘贴到您的 IDE

```
#include <stdio.h>
#include <json/json.h>

int main()
{
  /*Declaring the json data's in json format*/
  char buf[] = "{ \"Name\": \"xxxxx\", \"Id\": 101, \"Voting_eligible\": true }";

  /*Declaring the Json_object.To pass the Json string to the newly created Json_object*/
  json_object *new_obj = json_tokener_parse(buf);

  /*To get the data's then we have to get to the specific node by using the below function*/

  json_object *obj_Name;//Declaring the object to get  store the value of the Name
  obj_Name = json_object_object_get(new_obj,"Name");//This in-built func used to traverse through specific node

  json_object *obj_Id;//Declaring the object to get  store the value of the  Id
  obj_Id = json_object_object_get(new_obj,"Id");//This in-built func used to traverse through specific node

  json_object *obj_Vote;//Declaring the object to get  store the value of the  Vote
  obj_Vote = json_object_object_get(new_obj,"Voting_eligible");//This in-built func used to traverse through specific node

  /* To store the values we use temp char */
  char *Name = json_object_get_string(obj_Name);// This is in-built func to get the string(value) from "json_object_object_get()"
  char *Id = json_object_get_string(obj_Id);
  char *Vote = json_object_get_string(obj_Vote);

  /* we can also use like this statement directly to reduce the pgm size */
  //  printf("Name : %s\n",json_object_get_string(json_object_object_get(new_obj, "Name")));
  //  printf("Id : %s\n",json_object_get_string(json_object_object_get(new_obj, "Id")));
  //  printf("Voting_eligible : %s\n",json_object_get_string(json_object_object_get(new_obj, "Voting_eligible")));

  printf("Name : %s\n",Name);
  printf("Id : %s\n",Id);
  printf("Voting_eligible : %s\n",Vote);

  json_object_put(new_obj);// to return the pointer to its originalobjects

} 
```

# java - 使用 Date Param Java 从 URL 使用 Restful 方法

> ID：14879878
> 
> 赞同：15
> 
> 时间：2013-02-14T16:48:23.737
> 
> 标签：java, web-services, rest, jakarta-ee, jax-rs

我有一个像这样的宁静的网络服务方法：

```
@GET
@Path("/generateInfo")
@Produces(MediaType.APPLICATION_JSON)
public String generateInfo(
        @QueryParam("a") String a,
        @QueryParam("b") String b, 
        @QueryParam("date") Date date) {
    // ...business code...
    return "hello world";
} 
```

如何从 WebBrowser 调用该方法？问题是`Date`当我尝试时给我的参数是`404`找不到或`500`内部服务器错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-14T17:00:06.047

我建议接受日期作为 a`String`并自己解析它。像这样：

```
@GET
@Path("/generateInfo")
@Produces(MediaType.APPLICATION_JSON)
public String generateInfo(
        @QueryParam("a") String a,
        @QueryParam("b") String b, 
        @QueryParam("date") String date) {

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
    Date dateObj = sdf.parse(date);

    return "hello world";
}
```

通过浏览器发出此请求的方法是：

```
http://localhost/your_service/generateInfo?date=2013-02-14
```

解析日期时要考虑的事项：

*   `SimpleDateFormat`解析不同的日期格式非常灵活。日期字符串的[ISO 标准是：](http://en.wikipedia.org/wiki/ISO_8601)`yyyy-MM-dd`

*   [Joda Java 日期 API](http://joda-time.sourceforge.net/)被认为是更完整的日期/时间实现，[一些人认为它比 Java 的本地日期 API 更优化，](http://mike-java.blogspot.co.uk/2008/02/java-date-time-api-vs-joda.html)特别是在解析日期方面。

*   提供日期作为纪元时间戳通常会更好，尤其是当您的应用程序在不同时区运行时。但是，在接受纪元时间戳时，您必须注意 HTTP 缓存问题（例如，如果您的客户端没有截断纪元时间戳，那么您将获得大量缓存未命中）。我会参考[ISO-8601](http://en.wikipedia.org/wiki/ISO_8601)，因为格式化的日期更容易被 HTTP 缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:07:01.050

这取决于 URL 中日期的格式。根据[这个问题](https://stackoverflow.com/questions/583973/jax-rs-jersey-how-to-customize-error-handling)，构造函数`Date(String)`可以处理的任何格式都应该有效。如果您的日期格式不同并且您无法更改它，您将不得不使用pestrella 的解决方案并将日期作为字符串接收并自行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-28T10:39:37.157

```
@GET
@Path("/generateInfo")
@Produces(MediaType.APPLICATION_JSON)

public String generateInfo(
 @QueryParam("a") String a,   
 @QueryParam("b") String b, 
 @QueryParam("date") String str_date) {

 SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd");

 Date date = df.parse(str_date);
 return "hello world";
} 
```

# c# - 为什么我使用的每个程序的磁带备份尺寸都会改变？

> ID：14879879
> 
> 赞同：0
> 
> 时间：2013-02-14T16:48:24.533
> 
> 标签：c#, backup

我正在使用本文中包含的类在 C# 中编写一个小磁带写入器应用程序：http: [//www.codeproject.com/Articles/15487/Magnetic-Tape-Data-Storage-Part-1-Tape-Drive-IO -钴](http://www.codeproject.com/Articles/15487/Magnetic-Tape-Data-Storage-Part-1-Tape-Drive-IO-Co)

这很好用，但在磁带上写入的数据比原始文件数据多得多。

实际示例：我的测试文件为 160mb。写入磁带会占用大约 300mb 的空间。启用硬件压缩大约需要 250mb。

如果我从磁带读取刚刚写入的原始数据，我会得到一个大约 170mb 的文件（可以接受 witch），并且备份的文件总是运行良好。

我尝试使用其他程序，Microsoft NTBackup 仅使用 170mb (!!) 启用压缩，其他商业和免费程序使用 200 到 300mb

但是所有程序都可以正确读取备份（恢复文件上的 md5 和 sha1 相同！）

这是怎么回事？如何改进我的应用程序？我真的无法理解这一点。

我添加了我的“写入”函数，该函数在类中使用了修改后的写入（仅当您编写单个文件时才有效）：

```
private void Write(string path)
{

    int BlockCounter = 0;
    int BytesRead = 0;
    Byte[] Temp = new Byte[BUFFER_SIZE];

    using (System.IO.FileStream InputStream = System.IO.File.OpenRead(path))
    {
        TapeOperator TapeOp = new TapeOperator();
        TapeOp.Load("\\\\.\\Tape0", 0);
        TapeOp.SetTapePosition(0);
        BytesRead = InputStream.Read(Temp, 0, BUFFER_SIZE);
        while (BytesRead > 0)
        {
            TapeOp.Write(BlockCounter, Temp);
            BlockCounter++;
            BytesRead = InputStream.Read(Temp, 0, BUFFER_SIZE);
        } 
        TapeOp.TapeMark(1, 1, 1); //TapeMark is a custom function to write a FileMark
        BlockCounter++;

        TapeOp.Close();
    }            

} 
```

从类修改写入：

```
public void Write(long startPos, byte[] stream)
{
    m_stream.Write(stream, 0, stream.Length);
    m_stream.Flush();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T06:06:41.980

我的看法是磁带的块大小大于您的 BUFFER_SIZE。您没有一直填充磁带块。

# python - Python 说：“IndexError：字符串索引超出范围。”

> ID：14879881
> 
> 赞同：0
> 
> 时间：2013-02-14T16:48:28.380
> 
> 标签：python, python-3.3

我正在为类似于棋盘游戏 MasterMind 的游戏编写一些练习代码——它不断出现这个错误，我不知道为什么会这样。这是代码：

```
def Guess_Almost (Guess, Answer):
    a = ''.join([str(v) for v in Answer])
    g = str(Guess)
    n = 0
    am = 0
    while n < 5:
        if g[n] == a[0]:
            am = am + 1
        if g[n] == a[2]:
            am = am + 1
        if g[n] == a[3]:
            am = am + 1
        if g[n] == a[3]:
            am = am + 1
        n = n + 1
    return(am) 
```

好的，Guess 指定为 4 个整数，Answer 是一个包含 4 个数字的列表。它们在代码后都有相同的“len”，所以我不知道。

这段代码的重点是将答案转换为一个由 4 个数字组成的字符串，并查看这些数字中是否有任何数字与猜测的匹配，并返回总共有多少匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:59:15.540

看看这是否有帮助

```
def Guess_Almost (Guess, Answer):

   a = ''.join([str(v) for v in Answer])
   g = str(Guess)
   n = 0
   am = 0
   if len(g) >= 5 and len(a) >=4:
     while n < 5:
        if g[n] == a[0]:
           am = am + 1
        if g[n] == a[2]:
           am = am + 1
        if g[n] == a[3]:
            am = am + 1
        if g[n] == a[3]:
          am = am + 1
         n = n + 1
  return(am) 
```

# java - Java Bytebuffer 覆盖字节

> ID：14879882
> 
> 赞同：1
> 
> 时间：2013-02-14T16:48:34.923
> 
> 标签：java, buffer, byte

我有一个`ByteBuffer`包含 1024 字节的。

我需要在关键时刻以某个偏移量覆盖缓冲区内的短路。

我知道 ByteBuffer 类有`putShort()`，但这不会覆盖数据，它只是将其添加进去，这会导致缓冲区溢出。

我猜没有使用 的直接方法可以做到这一点`ByteBuffer`，有人可能会建议一种方法来做到这一点吗？

谢谢

感谢所有回复的人，似乎可以做到我只是使用了错误版本的 putShort()。我想这就是当你盯着同一段代码六个小时时会发生的事情。

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:54:39.457

无法重现问题，一切正常

```
 ByteBuffer bb = ByteBuffer.allocate(20);
    bb.putShort(10, (short)0xffff);
    System.out.println(Arrays.toString(bb.array())); 
```

印刷

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -1, -1, 0, 0, 0, 0, 0, 0, 0, 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:53:29.017

对于您的特殊情况，您可以`backing array`使用[array()](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html#array%28%29)方法直接修改。

然后只需在正确的索引处插入两个字节：

```
if(myBuffer.hasArray()) {
    byte[] array = myBuffer.array();
    array[index] = (byte) (myShort & 0xff);
    array[index + 1] = (byte) ((myShort >> 8) & 0xff);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T16:54:10.090

```
int p = b.position();
b.position( ZePlace );
p.putShort( ZeValue );
b.position( p ); 
```

[http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html#position%28%29](http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html#position%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:54:39.007

我认为您可以调用此版本的[putShort()](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/ByteBuffer.html#putShort%28int,%20short%29)接受位置索引。

# android - 异步任务中progressDialog上的错误窗口令牌

> ID：14879891
> 
> 赞同：0
> 
> 时间：2013-02-14T16:49:04.737
> 
> 标签：android, android-progressbar, android-context

所以我正在尝试从异步任务启动进度对话框。

在我的主要活动中，我正在调用异步任务，如下所示：

```
new OCRScanAsyncTask(getApplication().getApplicationContext()).execute(); 
```

也试过：

```
new OCRScanAsyncTask(getBaseContext()).execute(); 
```

我的 asyncTask 看起来像这样：

```
public class OCRScanAsyncTask extends AsyncTask<String, Integer, Boolean> {

    /* (non-Javadoc)
     * @see android.os.AsyncTask#doInBackground(Params[])
     */
    private ProgressDialog progressDialog;
    private String TAG ="OCRAsyncTask";
    private String IMAGE_PATH = Environment.getExternalStorageDirectory() + "/bcCardReader/tmp/tmpCrd.jpg";
    public static final String DATA_PATH = Environment
            .getExternalStorageDirectory().toString() +"/bcCardReader/tmp/";

    private String lang = "eng";
    private Context context;

    public OCRScanAsyncTask(Context c){
       Log.v(TAG, "*****************CONSTRUCTING");
        context = c;
        progressDialog = new ProgressDialog(context);
    }
    @Override
    protected void onPreExecute(){

        super.onPreExecute();
        Log.v(TAG, "pre exe");
        progressDialog.setTitle("Please Wait");
        progressDialog.setMessage("Performing Character Recognition");
        progressDialog.setIndeterminate(false);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        progressDialog.setCancelable(false);
        progressDialog.show();

    }
............ 
```

我的错误如下所示： ![在此处输入图像描述](../Images/c9366f9c96b6f33fcae68d24f8d59b05.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:15:34.283

> 异步任务中progressDialog上的错误窗口令牌

很可能是`Context`变量的问题。所以我的第一个建议是更换你的线路

```
new OCRScanAsyncTask(getApplication().getApplicationContext()).execute(); 
```

和

```
new OCRScanAsyncTask(YourActivityName.this).execute(); 
```

**注意：**我建议您`progressDialog`在开始之前显示`AsyncTask`。

```
ProgressDialog pd = new ProgressDialog(this); // or YourActivityName.this
pd.setMessage("some message");
pd.show();
AsyncWorker w = new AsyncWorker();
w.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:52:11.107

看起来通过构造函数传递的上下文似乎是 ApplicationContext ...

# android - 从我的活动内部，我如何知道我的 XML 何时完成膨胀

> ID：14879892
> 
> 赞同：0
> 
> 时间：2013-02-14T16:49:08.237
> 
> 标签：android

我正在尝试将一些对象添加到 ScrollView 但我得到一个 NULL POINTER EXCEPTION 因为我相信尚未从方法调用 setContentView 创建对象，我假设该方法调用会启动一些新线程来完成任务。从活动的角度来看，我如何知道通货膨胀何时完成。我不想扩展 ScrollView 并覆盖它的 onFinishInflation 方法。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ScrollView v = (ScrollView)super.findViewById(R.id.scrollview);

    for(int i=0;i<20;i++)
    {
        TextView tv = new TextView(this);
        tv.setText("Blah");
        v.addView(tv);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:58:51.150

一旦对 setContentView 的调用退出，就会创建您的视图。您的代码中还有另一个错误导致您看到的问题。也许您的 id 或布局是错误的。

# ruby - 在 `require` 和 `File.expand_path` 中加载 Ruby 文件

> ID：14879899
> 
> 赞同：0
> 
> 时间：2013-02-14T16:49:21.257
> 
> 标签：ruby

我正在阅读 gemspec 文件，目录看起来像

```
gem/
  lib/
  a.rb
  gem.gemspec 
```

在 gemspec 中有一行

```
$:.push File.expand_path('../lib', __FILE__) 
```

我想这意味着将`lib`文件夹添加到 Ruby 的加载路径中，这样你就可以在其中进行`require`填充。

但为什么`../lib`不简单`lib`呢？

使用与上面相同的示例，如果您想将代码加载到 中`a.rb`，您不只是做`require 'a'`而不是`require '../a'`吗？

注意两者`lib`并`a.rb`具有相同的相对位置`gemspec`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:36:56.537

使用 require 时，您只需添加所需的文件，例如：

```
require 'yourfile' 
```

对于上面的示例，您只需要将所需的文件放在您正在处理的文件夹中即可。如果是 a`gem`也没关系，只要加上 require 语句即可。您所看到的是 gem 如何知道包含在 require 中而无需指定文件夹。当您使用 a 时`gem`，您通常会安装它，然后需要它，而无需指定从何处获取它。

另一种选择是将所需文件放在另一个文件夹中，然后指定该文件/文件夹的路径：

```
require './yourfolder/yourfile' 
```

# performance - ADODB.Connection with Excel to Access 数据库性能提升

> ID：14879902
> 
> 赞同：1
> 
> 时间：2013-02-14T16:49:34.260
> 
> 标签：performance, excel, ms-access, adodb, recordset

我们创建了一个访问数据库，一位开发人员在 excel 中创建了一个函数来访问该数据库中的数据。连接是通过 ADDB.Connection 完成的。该公式返回 1 个数字，该数字是 Access 数据库中考虑到某些参数的总和。当我们在一个单元格中运行公式时，它可以完美运行，但由于我们的报告包含多个具有此公式的单元格（大约 160 个单元格）。报告运行速度真的很慢。

我们的一位 Access 专家检查了数据库，他没有发现它的构建方式有任何错误。

有人知道如何排序吗？我们应该在 Excel 中打勾以使其正常工作的库呢？我们今天在 MS Excel 和 Access 2003 上工作（我知道我们已经过时了），但我将有机会升级到 Excel 和 Access 2007（多么进步;-)），这有帮助吗？

这是我们在 Excel 中的 vba 代码的详细信息

```
'The function is called GetMarketData
Function GetMarketData(Optional ProductLine As String, Optional country As String, Optional CountryGroup As String, Optional Market As String, Optional startMonth As Long, Optional endMonth As Long, Optional Brand As String, Optional Model As String, Optional Segment As String, Optional EngineSegment As String)

'This is the declaration of variables
Dim con As ADODB.Connection
Dim rsQuery As ADODB.Recordset
Dim i As Integer
Dim iCount As Integer
Dim resVar As Integer
Dim query1 As String, query2 As String, query3 As String, query4 As String
Dim parametres As String, param1 As String, param2 As String, param3 As String, param4     As String, param5 As String, param6 As String, param7 As String, param8 As String, param9 As String, param10 As String

' Query cut in 3 parts (will be regrouped later on)
query1 = "SELECT Sum(T_MARKET.Volume) "
query2 = "FROM T_COUNTRY_GROUP INNER JOIN (T_TIME_PERIOD INNER JOIN (T_SELECTED_MARKET INNER JOIN (T_SEGMENT INNER JOIN (T_PRODUCT_LINE INNER JOIN ((T_BRAND INNER JOIN T_MODEL ON T_BRAND.ID_Brand = T_MODEL.FK_Brand) INNER JOIN ((T_COUNTRY INNER JOIN T_MARKET ON T_COUNTRY.ID_Country = T_MARKET.FK_Country) INNER JOIN ((T_ENGINE_SEGMENT INNER JOIN T_PRODUCT ON T_ENGINE_SEGMENT.ID_Engine_Segment = T_PRODUCT.FK_Engine_Segment) " _
         & "INNER JOIN T_SEGMENT_FINAL ON T_ENGINE_SEGMENT.ID_Engine_Segment = T_SEGMENT_FINAL.FK_Engine_Segment) ON (T_PRODUCT.ID_Product = T_MARKET.FK_Product) AND (T_COUNTRY.ID_Country = T_SEGMENT_FINAL.FK_Country)) ON T_MODEL.ID_Model = T_PRODUCT.FK_Model) ON T_PRODUCT_LINE.ID_Product_Line = T_SEGMENT_FINAL.FK_Product_Line) ON (T_SEGMENT.ID_Segment = T_SEGMENT_FINAL.FK_Segment) AND (T_SEGMENT.ID_Segment = T_PRODUCT.FK_Segment)) ON T_SELECTED_MARKET.ID_Selected_Market = T_SEGMENT_FINAL.FK_Selected_Market) ON T_TIME_PERIOD.ID_Period = T_MARKET.FK_Time_period) ON T_COUNTRY_GROUP.ID_Country_Groupe = T_COUNTRY.FK_Country_Group "
query3 = "WHERE ("

    param1 = "((T_PRODUCT_LINE.Product_Line)='" & ProductLine & "')"
    param2 = " AND ((T_COUNTRY.Country)='" & country & "')"
    param3 = " AND ((T_COUNTRY_GROUP.Country_Group)='" & CountryGroup & "')"
    param4 = " AND ((T_SELECTED_MARKET.Selected_Market)='" & Market & "')"
    param5 = " AND ((T_TIME_PERIOD.Cal_FullDate)>=" & startMonth & ")"
    param6 = " AND ((T_TIME_PERIOD.Cal_FullDate)<=" & endMonth & ")"
    param7 = " AND ((T_BRAND.Brand)='" & Brand & "')"
    param8 = " AND ((T_MODEL.Model)='" & Model & "')"
    param9 = " AND ((T_SEGMENT.Segment)='" & Segment & "')"
    param10 = " AND ((T_ENGINE_SEGMENT.Engine_Segment)='" & EngineSegment & "')"

    parametres = param1

    If country <> "" Then
        parametres = parametres & param2
    End If
    If CountryGroup <> "" Then
        parametres = parametres & param3
    End If
    If Market <> "" Then
        parametres = parametres & param4
    End If
    If startMonth <> 0 Then
        parametres = parametres & param5
    End If
    If endMonth <> 0 Then
        parametres = parametres & param6
    End If
    If Brand <> "" Then
        parametres = parametres & param7
    End If
    If Model <> "" Then
        parametres = parametres & param8
    End If
    If Segment <> "" Then
        parametres = parametres & param9
    End If
    If EngineSegment <> "" Then
        parametres = parametres & param10
    End If

query4 = ");"

'Connexion with the Access database
Set con = New ADODB.Connection
con.Open "Provider=Microsoft.Jet.OLEDB.4.0;" & "Data Source=" & URL_Base & ";"

'Open a recordset based on the query
Set rsQuery = New ADODB.Recordset
Set rsQuery.ActiveConnection = con
rsQuery.Open query1 & query2 & query3 & parametres & query4

' Give back the value from the query
GetMarketData = rsQuery.Fields(0).Value

'Clear variables
rsQuery.Close
Set rsQuery = Nothing
con.Close
Set con = Nothing 
```

结束功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T17:40:49.483

在大多数情况下，DAO 比与 MS Access 一起使用的 ADODB 快得多。这是在 Excel 中测试的。请注意，`Like *`不包括 Null，因此这只是一个示例。您还可以在 VBA 中构建临时查询并为其分配参数，但它们可能比存储查询慢。

```
Function DAOMarket(Optional ProductLine As String, Optional country As String, _
Optional CountryGroup As String, Optional Market As String, Optional startMonth As Long, _
Optional endMonth As Long, Optional Brand As String, _
Optional Model As String, Optional Segment As String, Optional EngineSegment As String)

'Reference: Microsoft Office x.x Access Database Engine Object Library
Dim ws As DAO.Workspace
Dim db As DAO.Database
Dim sDb As String
Dim sSQL As String
Dim qdf As QueryDef
Dim rs As DAO.Recordset

sDb = "Z:\Docs\Test.accdb"

Set ws = DBEngine.Workspaces(0)
Set db = ws.OpenDatabase(sDb)

''A stored query, see below
Set qdf = db.QueryDefs("GetMarket")

qdf.Parameters![@ProductLine] = IIf(ProductLine & "" = "", "*", ProductLine)
qdf.Parameters![@Country] = IIf(country & "" = "", "*", country)
qdf.Parameters![@Country_Group] = IIf(CountryGroup & "" = "", "*", CountryGroup)
qdf.Parameters![@Selected_market] = IIf(Market & "" = "", "*", Market)
qdf.Parameters![@CalStart] = IIf(startMonth & "" = "", 1, startMonth)
qdf.Parameters![@CalEnd] = IIf(endMonth & "" = "", 12, endMonth)
qdf.Parameters![@Brand] = IIf(Brand & "" = "", "*", Brand)
qdf.Parameters![@Model] = IIf(Model & "" = "", "*", Model)
qdf.Parameters![@Segment] = IIf(Segment & "" = "", "*", Segment)
qdf.Parameters![@Engine_Segment] = IIf(EngineSegment & "" = "", "*", EngineSegment)
Set rs = qdf.OpenRecordset(dbOpenSnapshot)
DAOMarket = rs.Fields(0)
End Function 
```

SQL

```
SELECT SUM([t_market].[volume]) AS MarketVolume
FROM   ((t_selected_market
         INNER JOIN (t_product_line
                     INNER JOIN ((t_brand
                                  INNER JOIN t_model
                                          ON t_brand.id_brand =
                                 t_model.fk_brand)
                                 INNER JOIN ((t_engine_segment
                                              INNER JOIN t_product
                                                      ON
                                              t_engine_segment.id_engine_segment
                                              =
                                              t_product.fk_engine_segment)
                                             INNER JOIN t_segment_final
                                                     ON
                                             t_engine_segment.id_engine_segment
                                             =
                                             t_segment_final.fk_engine_segment)
                                         ON t_model.id_model =
                                            t_product.fk_model)
                             ON t_product_line.id_product_line =
                                t_segment_final.fk_product_line)
                 ON t_selected_market.id_selected_market =
                    t_segment_final.fk_selected_market)
        INNER JOIN t_segment
                ON t_segment_final.fk_segment = t_segment.id_segment)
       INNER JOIN (t_country_group
                   INNER JOIN (t_time_period
                               INNER JOIN (t_country
                                           INNER JOIN t_market
                                                   ON t_country.id_country =
                                                      t_market.fk_country)
                                       ON t_time_period.id_period =
                                          t_market.fk_time_period)
                           ON t_country_group.id_country_groupe =
                              t_country.fk_country_group)
               ON t_product.id_product = t_market.fk_product
WHERE  ( ( ( t_product_line.product_line ) LIKE [@productline] )
         AND ( ( t_country.country ) LIKE [@country] )
         AND ( ( t_country_group.country_group ) LIKE [@country_group] )
         AND ( ( t_selected_market.selected_market ) LIKE [@selected_market] )
         AND ( ( t_time_period.cal_fulldate ) BETWEEN [@calstart] AND [@calend]
             )
         AND ( ( t_brand.brand ) LIKE [@brand] )
         AND ( ( t_model.model ) LIKE [@model] )
         AND ( ( t_segment.segment ) LIKE [@segment] )
         AND ( ( t_engine_segment.engine_segment ) LIKE [@engine_segment] ) ); 
```

# jquery - 这在 jquery 函数中不起作用

> ID：14879903
> 
> 赞同：0
> 
> 时间：2013-02-14T16:49:41.367
> 
> 标签：jquery, overlay, this

我的页面上有某些项目。当有人悬停一个项目时，我想要一个覆盖该项目的 div。如果我使用没有 的函数，这是有效的`$(this)`，但是它会覆盖所有项目。我只想覆盖我当时悬停的项目。

我的代码：

jQuery：

```
<script>
  $(document).on("mouseenter", ".item" , function() {
    $(this).('.item-overlay').stop().fadeTo(250, 1);
  });
  $(document).on("mouseleave", ".item" , function() {
    $(this).('.item-overlay').stop().fadeTo(250, 0);
  });
</script> 
```

HTML：

```
<div class="item">
  <a href="#"><img src="<?=$row['item_pic']?>" class="item-img"></a>
  <div class="item-overlay" style="background:#999; display: none; position:absolute; top:0px; left: 0px; width:400px; height:200px; z-index:900;">test</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:50:44.577

这个：

```
$(this).('.item-overlay') 
```

无效，应该是：

```
$(this).find('.item-overlay') 
```

总共：

```
<script type="text/javascript">
$(function() {
    $(document).on({
        mouseenter: function() {
            $(this).find('.item-overlay').stop().fadeTo(250, 1);
        },    
        mouseleave: function() {
            $(this).find('.item-overlay').stop().fadeTo(250, 0);
        }
    }, '.item');
});
</script> 
```

只是为了好玩，这是一个较短的版本：

```
$(function() {
  $(this).on('mouseenter mouseleave', '.item', function(e) {
    $(this).find('.item-overlay')[e.type=='mouseenter'?'fadeIn':'fadeOut'](250);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:55:14.917

试试这个脚本：

```
$(document).on("mouseenter", ".item" , function() {
    $('.item-overlay').stop().fadeTo(250, 1);
});

$(document).on("mouseleave", ".item" , function() {
    $('.item-overlay').stop().fadeTo(250, 0);
}); 
```

**我刚刚删除了 $(this)**

**希望它有所帮助**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:53:59.973

```
 $(function() {
$(document).on("mouseenter", ".item" , function() {
    $(this).children('.item-overlay').stop().fadeTo(250, 1);
});

$(document).on("mouseleave", ".item" , function() {
    $(this).children('.item-overlay').stop().fadeTo(250, 0);
}); 
```

});

需要“孩子”

# c# - Devexpress XtraList 使子节点成为父节点？

> ID：14879908
> 
> 赞同：0
> 
> 时间：2013-02-14T16:50:10.383
> 
> 标签：c#, devexpress, xtratreelist

我有一个带有多个父节点的 XtraTreeList，每个父节点都附加了几个子节点。

我想从父节点中提取所有子节点，删除父节点，然后将所有这些子节点绑定为父节点。简而言之，我想删除父节点并将所有子节点设为父节点。

我尝试了几种方法，例如使用 TreeList.MoveNode() 但这对我不起作用。

编辑：

我已经删除了我之前的答案并添加了新的答案，效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T11:03:30.820

我所做的工作是我从代码中选择了所有节点，并调用了 DeleteSelectedNodes()，这是代码：

```
 List<int> nodeIdsToMove = new List<int>();
        List<int> nodeIdsToRemove = new List<int>();

        if (comboBox_GroupBy.SelectedItem.ToString() == "None")
        {
            /* Parent nodes */
            foreach(TreeListNode parentNode in treeList_Links.Nodes)
            {
                nodeIdsToRemove.Add(parentNode.Id);
                if (parentNode.HasChildren)
                {
                    /* Child nodes */
                    foreach (TreeListNode childNode in parentNode.Nodes)
                        nodeIdsToMove.Add(childNode.Id);
                }
            }

            MoveNodes(nodeIdsToMove);
            RemoveNode(nodeIdsToRemove); 
```

这是 MoveNode 和 RemoveNode 的实现：

```
 private void MoveNodes(List<int> nodeIdsToMove)
    {
        foreach (int nodeId in nodeIdsToMove)
            treeList_Links.MoveNode(treeList_Links.FindNodeByID(nodeId), null);
    } 
```

private void RemoveNode(List nodeIdsToRemove) { /* 启用多选 */ treeList_Links.OptionsSelection.MultiSelect = true;

```
 /* Get nodes to select */
        ArrayList nodesToSelect = new ArrayList();
        foreach (int nodeId in nodeIdsToRemove)
            nodesToSelect.Add(treeList_Links.FindNodeByID(nodeId));

        /* Select nodes */
        treeList_Links.Selection.Set(nodesToSelect);

        /* Delete selected nodes */
        treeList_Links.DeleteSelectedNodes();

        /* Disable multiselect */
        treeList_Links.OptionsSelection.MultiSelect = false;
    } 
```

# ios - iOS - 如何从 commitEditingStyle 获取表格行的标签

> ID：14879912
> 
> 赞同：1
> 
> 时间：2013-02-14T16:50:34.267
> 
> 标签：ios, objective-c, arrays, plist, nsmutabledictionary

我有一个 UITableView，它由 NSMutableDictionary 中的数组键填充。

为了能够删除这些数组，我需要能够以某种方式获取密钥。我的想法是最简单的就是从行的标签中得到它。

我正在使用此代码加载字典：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
// get documents path
NSString *documentsPath = [paths objectAtIndex:0];
// get the path to our Data/plist file
NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];
NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)plistPath]; 
```

这从字典中删除数组：

```
[dictionary removeObjectForKey:]; 
```

但显然我错过了它们的关键，因为我不知道如何以编程方式获取它。有小费吗？

干杯，

克里斯

```
<plist version="1.0">
<dict>
    <key>(null)</key>
    <array>
        <string>Username</string>
        <string>Password</string>
        <string>http://www.google.com</string>
        <string>/whatever</string>
    </array>
    <key>Hello</key>
    <array>
        <string>admin</string>
        <string></string>
        <string>https://www.whatever.com</string>
        <string>/things</string>
    </array>
</dict>
</plist> 
```

cellForRowAtIndexPath：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ViewerName"];

        UILabel *label = (UILabel *)[cell viewWithTag:1000];
        label.text = [viewerKeys objectAtIndex:indexPath.row];
        return cell;
} 
```

删除代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES);
    // get documents path
    NSString *documentsPath = [paths objectAtIndex:0];
    // get the path to our Data/plist file
    NSString *plistPath = [documentsPath stringByAppendingPathComponent:@"Data.plist"];
    NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithContentsOfFile:(NSString *)plistPath];
    NSString *key = [viewerKeys objectAtIndex:indexPath.row];
    [dictionary removeObjectForKey:[NSString stringWithFormat:@"%@", key]];

    [self.tableView reloadData];

    NSArray *indexPaths = [NSArray arrayWithObject:indexPath];
    [tableView deleteRowsAtIndexPaths:indexPaths withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:03:02.953

永远不要从表格单元格中获取数据。您已经拥有用于填充表格单元格的数据结构，从这些相同的数据结构中获取数据。

您必须有某种数组，以便您可以为每个单元格获取正确的数据。使用相同的数组来获取被删除行的数据。

如果您为您的`cellForRowAtIndexPath:`方法显示一些代码，则可以给出更具体的答案。但它基本上是相同的代码来获取基于`indexPath`.

您到目前为止发布的代码仅显示字典。字典不是表格等基于行的结构的良好基础。

**更新**：根据您的代码`cellForRowAtIndexPath:`，您只需要：

```
NSString *key = [viewerKeys objectAtIndex:indexPath.row]; 
```

**更新 2**：为什么要在`commitEditingStyle`方法中再次加载文件？您需要修改已为表加载的现有数据结构。就目前而言，您拥有表使用的数据结构。然后在 中`commitEditingStyle`，再次加载数据，从该临时数据中删除一个条目，然后告诉表重新加载。重新加载将使用原始数据结构，而不是这个临时数据。

另外，不要同时调用`reloadData`and `deleteRowsAtIndexPaths:`。只需调用一个或另一个。

而这一行：

```
[dictionary removeObjectForKey:[NSString stringWithFormat:@"%@", key]]; 
```

应该：

```
[dictionary removeObjectForKey:key]; 
```

`stringWithFormat`除非您确实有要格式化的字符串，否则请勿使用。

# python - Python tkinter：使任何输出出现在 GUI 上的文本框中，而不是在 shell 中

> ID：14879916
> 
> 赞同：12
> 
> 时间：2013-02-14T16:50:42.817
> 
> 标签：python, tkinter

我正在使用 python 和 tkinter 制作一个 GUI，只是想知道是否有任何输出文本出现在 GUI 的窗口中而不是解释器/shell 上？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T18:29:35.217

如果，正如 Bryan Oakley 的评论中所建议的那样，您想“在 GUI 中打印 'foo'，但让它神奇地出现在文本小部件中”，请参阅上一个问题[Python：Converting CLI to GUI](https://stackoverflow.com/questions/12351786)中的答案。这个答案解决了如何在文本框中产生输出的简单问题。要生成一个滚动文本窗口，创建并放置或打包一个文本小部件（我们称之为它`mtb`），然后使用诸如`mtb.insert(Tkinter.END, ms)`将字符串添加`ms`到文本框之`mtb`类的命令，以及`mtb.see(Tkinter.END)`使框滚动。（有关详细信息，请参阅“<a href="http://effbot.org/tkinterbook/text.htm" rel="nofollow noreferrer">The Tkinter Text Widget”文档。）例如：

```
#!/usr/bin/env python
import Tkinter as tk

def cbc(id, tex):
    return lambda : callback(id, tex)

def callback(id, tex):
    s = 'At {} f is {}\n'.format(id, id**id/0.987)
    tex.insert(tk.END, s)
    tex.see(tk.END)             # Scroll if necessary

top = tk.Tk()
tex = tk.Text(master=top)
tex.pack(side=tk.RIGHT)
bop = tk.Frame()
bop.pack(side=tk.LEFT)
for k in range(1,10):
    tv = 'Say {}'.format(k)
    b = tk.Button(bop, text=tv, command=cbc(k, tex))
    b.pack()

tk.Button(bop, text='Exit', command=top.destroy).pack()
top.mainloop() 
```

请注意，如果您希望文本窗口长时间保持打开状态和/或累积千兆字节的文本，则可能要跟踪文本框中的数据量，并`delete`每隔一段时间使用该方法来限制它。

# javascript - 使用 jQuery 解析 XML 文件的一部分

> ID：14879918
> 
> 赞同：0
> 
> 时间：2013-02-14T16:50:44.070
> 
> 标签：javascript, jquery, xml, xml-parsing

`<product>`从文本输入中接收“天”后，如何`<availabilities>`使用 jQuery 仅从同一日期显示？也许使用`.siblings()`?

```
<?xml version='1.0' encoding='iso-8859-15'?>
<timetable>
  <date>
    <day>22-01-2013</day>
    <availabilities>
      <availability>
        <starttime>10:00</starttime>
        <endtime>13:00</endtime>
        <startplace>Funchal</startplace>
        <endplace>Funchal</endplace>
        <resource>Excursões na Madeira</resource>
        <idstartplace>18</idstartplace>
        <idendplace>18</idendplace>
        <idperiodoconsumo>13289</idperiodoconsumo>
        <idproduct>23</idproduct>
        <product>EXC_SANT</product>
        <idtimeperiod>11523</idtimeperiod>
        <idavailability>3561</idavailability>
      </availability>
      <availability>
        <starttime>10:00</starttime>
        <endtime>13:00</endtime>
        <startplace>Funchal</startplace>
        <endplace>Funchal</endplace>
        <resource>Excursões na Madeira</resource>
        <idstartplace>18</idstartplace>
        <idendplace>18</idendplace>
        <idperiodoconsumo>13290</idperiodoconsumo>
        <idproduct>33</idproduct>
        <product>foot</product>
        <idtimeperiod>11524</idtimeperiod>
        <idavailability>3593</idavailability>
      </availability>
      <availability>
        <starttime>10:00</starttime>
        <endtime>13:00</endtime>
        <startplace>Funchal</startplace>
        <endplace>Funchal</endplace>
        <resource>Excursões na Madeira</resource>
        <idstartplace>18</idstartplace>
        <idendplace>18</idendplace>
        <idperiodoconsumo>13289</idperiodoconsumo>
        <idproduct>22</idproduct>
        <product>VLT_ILHA</product>
        <idtimeperiod>11523</idtimeperiod>
        <idavailability>3561</idavailability>
      </availability>
    </availabilities>
  </date>
  <date>
      ...
      </date> 
... 
```

这是我的成功：功能：

```
function parseStuff(data){
    $(data).find('date').each(function(){
        var day = $(this).find('day').text();

        if (day==decodeURI(iHash[3])){
            alert('Date matches!');
        }
    });
} 
```

我会很感激一些帮助，我不知道该怎么做.. :|

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:08:07.093

试试这个：

```
var product = $(this).find('product').text(); 
```

我想你必须把这个放在这里：

```
if (day==decodeURI(iHash[3])){
  var product = $(this).find('product').text();
  alert('Date matches!');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:27:05.643

这应该适合你：

```
function parseStuff(data,toBeMatchedDate){

    productList=array();

    $(data).find('date').each(function(){

        var day = $(this).find('day').text();

        if (day==decodeURI(iHash[3]) && day==toBeMatchedDate)   //if date is matched
        {

             xmlProdcutList=$(this).find('product'); //all the products associated with this date

             $.each(function(i,thisProduct){
                         productList.push(thisProduct.text()); //store in the main array
               });

return productList;

        }
    });
} 
```

# jquery - Jquery树遍历不起作用

> ID：14879921
> 
> 赞同：0
> 
> 时间：2013-02-14T16:50:50.900
> 
> 标签：jquery, jquery-traversing

通过树遍历，我试图捕获单击项目的直接子菜单。我已经使用 .parent().siblings() 来获取元素。但不知何故，它不起作用。请帮我解决问题。这是html标记。

```
<ul class="menu">
<li class="1"><a href="#" class="menu-item">Link1</a></li>
<ul class="subMenu">
<li>Sublink11</li>
<li>Sublink12</li>
<li>Sublink13</li>
</ul>
<li class="2"><a href="#" class="menu-item">Link2</a></li>
<ul class="subMenu">
<li>Sublink21</li>
<li>Sublink22</li>
<li>Sublink23</li>
</ul>
<li class="3"><a href="#" class="menu-item">Link3</a></li>
<ul class="subMenu">
<li>Sublink31</li>
<li>Sublink32</li>
<li>Sublink33</li>
</ul>                    
</ul> 
```

这是我用来捕获列表的 javascript 代码。

```
var menuItems = $('.menu-item');
    var icon = "<i class='icon icon-collapse'></i>";
    var innerMenu;
    $.each(menuItems, function(){
        $(this).append(icon);
        $(this).on('click', function(){
            console.log($(this).parent().closest('ul.subMenu'));
            //$(this).closest('ul.subMenu').show();
        });

    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:05:06.953

您的 HTML 无效。有效的 HTML 将是：

```
<ul class="menu">
   <li class="1">
      <a href="#" class="menu-item">Link1</a>
      <ul class="subMenu">
         <li>Sublink11</li>
         <li>Sublink12</li>
         <li>Sublink13</li>
      </ul>
   </li>
   <li class="2">
      <a href="#" class="menu-item">Link2</a>
      <ul class="subMenu">
         <li>Sublink21</li>
         <li>Sublink22</li>
         <li>Sublink23</li>
      </ul>
   </li>
   <li class="3">
      <a href="#" class="menu-item">Link3</a>
      <ul class="subMenu">
         <li>Sublink31</li>
         <li>Sublink32</li>
         <li>Sublink33</li>
      </ul>
   </li>
</ul> 
```

jQuery：

```
$(".menu-item").click(function(){
   var closestMenu = $(this).next();
   console.log(closestMenu);
   return false;
}); 
```

# knockout.js - 淘汰赛 JS - 复选框数据绑定

> ID：14879922
> 
> 赞同：1
> 
> 时间：2013-02-14T16:51:04.517
> 
> 标签：knockout.js

我正在创建一个绑定到属性的复选框，如下所示：

```
<input type="checkbox" data-bind="checked: hasSurname, enable: verified()"/> 
```

这很好用。我的问题是我还希望在未验证用户时取消选中该复选框，因此我执行以下操作：

```
 <input type="checkbox" data-bind="checked: hasSurname && verified(), enable: verified()"/> 
```

此选项具有正确的行为，但 hasSurname 属性永远不会更改保持为假。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:17:22.723

如果表达式评估为具有“写入”行为的可观察对象，则与值和检查的绑定仅在小部件更改状态时更新可观察对象。

如果你想使用一个复杂的表达式来读取（*hasSurname() && verify()*）并改变一个简单的值（只有*hasSurname*），你需要使用“write”回调创建一个计算的 observable - 参见[http://knockoutjs。 com/documentation/computedObservables.html](http://knockoutjs.com/documentation/computedObservables.html) - 特别是关于可写计算 observables 的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:53:02.693

尝试在数据绑定中使用 && 时，我的结果好坏参半。如果我需要这样的逻辑，我将它封装在一个计算的 observable 中。

```
this.validate1And2 = ko.computed(function () {
    var result;
    result = this.hasSurname() && this.verified();
    return result;
}, this); 
```

请参阅此 jsFiddle 示例（我相信这是您正在寻找的行为）。

[http://jsfiddle.net/FwUzc/](http://jsfiddle.net/FwUzc/)

更新：我更改了示例，因此它只有 2 个复选框，并且当验证值更改时，hasSurname 值会更新。 [http://jsfiddle.net/FwUzc/2/](http://jsfiddle.net/FwUzc/2/)

# kineticjs - KineticJS：按类型选择元素

> ID：14879928
> 
> 赞同：0
> 
> 时间：2013-02-14T16:51:30.140
> 
> 标签：kineticjs

我使用 KineticJS 和 HTML5 迭代地绘制圆圈。我想在任何圆圈上检测 mousemove 并获取所选圆圈的 ID。我知道您可以按名称或 ID 选择元素，但是如何按类型（圆圈）选择元素？使用下面的代码，它只响应最后一个圆圈（因为它是最后一个声明的“圆圈”），但我不确定如何更改它以响应所有圆圈。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script src="jquery.js" type="text/javascript"></script>
    <link rel="stylesheet" href="style.css" type="text/css">
</head>

    <div id="container"></div>
        <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
        <script>
            var startX = 200;
            var startY = 100;
            var radius = 10;

            var stage = new Kinetic.Stage({
                container: 'container',
                width:400,
                height:500
            });

            for(i=0; i<10; i++){
                window['circle'+i];
            }

            var layer = new Kinetic.Layer();

            for (i=0; i<10;i++){
                var circle = new Kinetic.Circle({
                    x: startX,
                    y: startY,
                    radius: radius,
                    fill: '#CCCCCC',
                    stroke: '#999',
                    strokeWidth: 4,
                    name: 'step'+i
                });

                layer.add(circle);

                var stepName = new Kinetic.Text({
                    x: startX + radius*2.5,
                    y: startY-7.5,
                    text: "circle"+i,
                    fontSize: 15,
                    fontFamily: 'Calibri',
                    fill: 'black'
                });

                layer.add(stepName);
                stage.add(layer);

                startY = startY + radius*3.5;
            }

            circle.on('mousemove', function(){
                var shapeName = this.getName();
                console.log(shapeName);
            })

        </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:06:36.267

我通过将所有圆圈元素的名称设置为“圆圈”来解决这个问题，然后做了

```
var shapes = stage.get('.circle')
for(i=0;i<shapes.length;i++){
console.log(shapes[i].getId());
} 
```

# c# - 操作 WriteableBitmap 像素

> ID：14879929
> 
> 赞同：1
> 
> 时间：2013-02-14T16:51:33.533
> 
> 标签：c#, windows-runtime, writeablebitmap, writeablebitmapex

我正在尝试将两个图像合并为 WriteableBitmaps。我想对每个像素值求平方，将其添加到另一个图像，然后取第二个根（+ 检查，如果值高于 255）。由于我没有运气使用 WriteableBitmapEx 和 ForEach() （[Sobel 运算符和带有 WriteableBitmapEx 的卷积](https://stackoverflow.com/questions/14836299/sobel-operator-convolution-with-writeablebitmapex)）（这似乎也很慢）我尝试使用 BitmapDecoder 直接操作像素。不幸的是，我似乎无法将 Pixelstream 写回 WriteableBitmap，因为我得到了错误：

> “Windows.Storage.Streams.IBuffer”不包含“AsStream”的定义，并且最佳扩展方法重载“System.IO.WindowsRuntimeStreamExtensions.AsStream(Windows.Storage.Streams.IRandomAccessStream)”有一些无效参数

和

> 实例参数：无法从“Windows.Storage.Streams.IBuffer”转换为“Windows.Storage.Streams.IRandomAccessStream”

对于这些行

```
using (Stream stream = bmp.PixelBuffer.AsStream())
{
   await stream.WriteAsync(pixels1, 0, pixels1.Length);
} 
```

这可能是被 WriteableBitmapEx 库破坏的东西吗？

此外，我想知道如何将我的 WriteableBitmaps 放入 BitmapDecoders。我从一本 Win8 Coding 书中获取了这段代码。

到目前为止，这是我的完整代码：

```
 async Task SobelCombine(BitmapDecoder decoder1, BitmapDecoder decoder2)
    {
        PixelDataProvider provider1 = await decoder1.GetPixelDataAsync(
            BitmapPixelFormat.Bgra8, BitmapAlphaMode.Straight, new BitmapTransform(),
            ExifOrientationMode.RespectExifOrientation, ColorManagementMode.ColorManageToSRgb);
        byte[] pixels1 = provider1.DetachPixelData();
        PixelDataProvider provider2 = await decoder1.GetPixelDataAsync(
            BitmapPixelFormat.Bgra8, BitmapAlphaMode.Straight, new BitmapTransform(),
            ExifOrientationMode.RespectExifOrientation, ColorManagementMode.ColorManageToSRgb);
        byte[] pixels2 = provider1.DetachPixelData();

        for (int i = 0; i < pixels1.Length; i += 4){
            pixels1[i]      = (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i], 2) + Math.Pow(pixels2[i], 2))) % byte.MaxValue);
            pixels1[i + 1] =  (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i + 1], 2) + Math.Pow(pixels2[i + 1], 2))) % byte.MaxValue);
            pixels1[i + 2] =  (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i + 2], 2) + Math.Pow(pixels2[i + 2], 2))) % byte.MaxValue);
        }

        WriteableBitmap bmp = new WriteableBitmap((int)decoder1.OrientedPixelWidth, (int)decoder1.OrientedPixelHeight);

        using (Stream stream = bmp.PixelBuffer.AsStream())
        {
            await stream.WriteAsync(pixels1, 0, pixels1.Length);
        }

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T04:25:24.700

`IBuffer.AsStream()`是一种扩展方法。如果要使用它，则需要包含定义它的命名空间：

```
using System.Runtime.InteropServices.WindowsRuntime; 
```

**更新：** 正如我在下面的评论中提到的，我在可写位图方面做得并不多。但是，您的代码没有设置透明度值。这可能至少是问题的一部分：

```
for (int i = 0; i < pixels1.Length; i += 4){
    pixels1[i]      = (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i], 2) + Math.Pow(pixels2[i], 2))) % byte.MaxValue);
    pixels1[i + 1] =  (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i + 1], 2) + Math.Pow(pixels2[i + 1], 2))) % byte.MaxValue);
    pixels1[i + 2] =  (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i + 2], 2) + Math.Pow(pixels2[i + 2], 2))) % byte.MaxValue);
} 
```

应该：

```
for (int i = 0; i < pixels1.Length; i += 4){
    pixels1[i]      = (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i], 2) + Math.Pow(pixels2[i], 2))) % byte.MaxValue);
    pixels1[i + 1] =  (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i + 1], 2) + Math.Pow(pixels2[i + 1], 2))) % byte.MaxValue);
    pixels1[i + 2] =  (byte)((byte)Math.Sqrt((Math.Pow(pixels1[i + 2], 2) + Math.Pow(pixels2[i + 2], 2))) % byte.MaxValue);
    pixels1[i + 3] = 255; // or some combination of the source data. 0 == completely transparent.
} 
```

# php - PHP RegEx：“一个句号，或至少一个破折号”

> ID：14879932
> 
> 赞同：0
> 
> 时间：2013-02-14T16:51:40.943
> 
> 标签：php, regex

我在通过正则表达式制定这个简单的事情时遇到了麻烦，希望能得到一些建议。

这个微小的模式说，“要么一个句号，要么一个破折号”：

```
[.-] 
```

我正在寻找的模式会改为“一个句号，或者**一个或多个**破折号”。

这怎么表达？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:53:23.060

只需使用管道将它们分开：

```
[.]|-+ 
```

# python - [:] 在 python 中是什么意思？

> ID：14879933
> 
> 赞同：3
> 
> 时间：2013-02-14T16:51:43.483
> 
> 标签：python, syntax

例如 if`tableState`是一个元组，我们声明一个变量：

```
x = tableState[1][:] 
```

这`[:]`意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:52:09.720

它采用元组的*副本*，而不是对元组本身的引用。

语法是一个具有默认开始和结束值（0 和列表长度）的`[:]`切片，返回一个带有这些索引的新元组，因此实际上是内容的精确副本。

对于元组，这没有多大意义，因为元组是不可变的。您可以安全地传递对元组的引用，而无需更改其索引所指的内容。

不过，它对列表的工作方式相同。您经常需要创建列表的副本才能修改内容，并且使用默认的“所有元素”切片是一种不错、简洁且快速的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:56:44.347

`[:]`它类似于`[0:]`从 0 索引到末尾的拆分。它返回一个新的 List 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:54:50.950

通常，您正在提取元组的*副本*。请记住，尽管元组是不可变的，因此获取元组的副本并没有什么好处——它对列表更有用。

# ruby-on-rails-3 - Rails 只选择数组中的第一个条目

> ID：14879936
> 
> 赞同：0
> 
> 时间：2013-02-14T16:51:53.953
> 
> 标签：ruby-on-rails-3

我正在尝试从祖先 gem 表中填充 jquery jstree。我正在使用 jbuilder 为 jstree 创建 json 输入。

jstree 要求 json 数据以 [ 开头

所以，我正在使用

```
json.array!(@locations) do |location| 
```

但是，我正在遍历孩子，所以我只需要数组中的第一个位置。我尝试了以下方法，但似乎不起作用：

```
json.array!(@locations).first(1) do |location|
  json.label location.name
  json.children location.children do |child|
    json.label child.name 
```

更新

这也不起作用：

```
json.array!(@locations.first) do |location| 
```

UDPATE2

这有效，除了它以 { 开头并且它必须以 [ 开头

这就是我尝试数组的原因。我该如何解决？

（我知道我还需要处理循环逻辑）

```
json.id @location.id
json.label @location.name
json.children @location.children do |child|
 json.id child.id
 json.label child.name
 json.children child.children do |child2|
   json.id child2.id
   json.label child2.name
   json.children child2.children do |child3|
     json.id child3.id
     json.label child3.name
   end
 end
end 
```

结果是：

```
{
   id: 1,
   label: "First in Tree"
  - children: [
    - {
        id: 2,
        label: "Child of 1" 
```

...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:33:44.560

数组中的第一个位置就是

```
location = json.array!(@locations).first 
```

# asp.net - 使用局部视图的对象引用错误

> ID：14879940
> 
> 赞同：0
> 
> 时间：2013-02-14T16:51:56.847
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我收到普遍存在的“对象引用”错误，不知道如何解决。我相信这与调用局部视图有关。我正在使用 jquery 向导，因此部分视图是向导中显示的“步骤”。

在我的主要`.cshtml`观点中，我这样做（我省略了 HTML）：

```
@using MyNamespace.Models
@using MyNamespace.ViewModels
@model MyViewModel
...
...
using (Html.BeginForm())
{
    ...
    // this works inside MAIN view (at least it goes through 
    // before I get my error)
    if (Model.MyModel.MyDropDown == DropDownChoice.One)
    {
         //display something
    }
    ...
    // here i call a partial view, and in the partial view (see
    // below) I get the error
    @{ Html.RenderPartial("_MyPartialView"); }
    ...
} 
```

以上工作（至少在我遇到错误之前它会通过）。

这是我的部分观点（同样，省略了 HTML）：

```
@using MyNamespace.Models
@using MyNamespace.ViewModels
@model MyViewModel
....
// I get the object reference error here
@if (Model.MyModel.MyRadioButton == RadioButtonChoice.One)
{
    // display something
}
.... 
```

我很困惑，因为除了`@if`vs.之外`if`，它基本上是相同的代码。我不知道我做错了什么，或者如何解决。

对于上下文，这里是`MyViewModel`：

```
public class MyViewModel
{
    public MyModel MyModel { get; set; }
} 
```

而`MyDropDown`and`MyRadioButton`正在这样使用`enums`：

```
public enum DropDownChoice { One, Two, Three }
public enum RadioButtonChoice { One, Two, Three }

public DropDownChoice? MyDropDown { get; set; }
public RadioButtonChoice? MyRadioButton { get; set; } 
```

我的控制器只有主窗体的动作，而局部视图没有动作：

```
public ActionResult Form()
{
    return View("Form");
}

[HttpPost]
public ActionResult Form(MyViewModel model)
{
    if (ModelState.IsValid)
    {
        return View("Submitted", model);
    }
    return View("Form", model);
} 
```

有什么想法吗？`ActionResult`即使没有直接调用它（除了作为向导中的局部视图），我是否必须为该局部视图创建一个？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T17:01:52.453

您的部分需要一个模型

```
@model MyViewModel 
```

你要么需要传递一个模型

```
@{ Html.RenderPartial("_MyPartialView", MyViewModel); 
```

或使用子操作并使用

```
@Action("_MyPartialView"); 
```

有相应的动作

```
 public ActionResult _MyPartialView()
    {

        MyViewModel model = new MyViewModel();
        return View(model)
    } 
```

# mysql - 不在 SQL 查询集中

> ID：14879953
> 
> 赞同：0
> 
> 时间：2013-02-14T16:52:30.770
> 
> 标签：mysql, join

```
###user_name      mobile     product_type###
aaa 12345   1

aaa 12345   2

bbb 56789   2

ccc 23456   2

bbb 56789   1

ccc 23456   1

ddd 11111   1

eee 22222   2 
```

我的 db.table 采用上述格式.....其中 2 代表 1 的副本（移动设备和名称都应该是唯一的）它必须具有原始 product_type 1 ....我想要 ##eee 22222 2## 的记录..如果你注意到它没有product_type 1 ..希望你明白......我试过了

```
SELECT * FROM `applications` a where a.product_type=2 and user_name in (select user_name from `partners_applications` where user_name=a.user_name) order by a.user_name 
```

我知道这是错误的，你们能帮我解决...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:02:34.743

你可以试试这个：

```
SELECT *
  FROM (SELECT *, count(*) AS counter
          FROM applications
        GROUP BY user_name, mobile) aView
 WHERE product_type = 2 AND counter = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:02:42.867

我想你在找这个

```
 SELECT * FROM `applications` a 
     INNER JOIN `partners_applications` pa ON pa.user_name=a.user_name 
     WHERE a.product_type=2 
     GROUP BY a.user_name
     ORDER BY a.user_name 
```

编辑

由于您的错字在这里我更新了答案

```
 SELECT * FROM `partners_applications` a 
   where a.product_type=2 
   and a.user_name not in (select user_name from partners_applications
                    where product_type = 1)
   group by a.user_name
   order by a.user_name 
```

[**SQL 演示在这里**](http://sqlfiddle.com/#!2/e61745/10)

编辑2。

好吧，如果你有不同电话号码的用户名，那么你可以试试这个

```
 SELECT * FROM `partners_applications` a 
   where a.product_type=2 
   and a.user_name not in (select user_name from partners_applications
                    where product_type = 1)

   order by a.user_name ; 
```

[**演示 SQL 小提琴**](http://sqlfiddle.com/#!2/392c6/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T17:21:11.497

让我看看我是否做对了。您想查看只有一种产品类型等于 2 的所有 user_name|mobile 对（否则您会显示 username `ddd`，对吗？）。

这是为您执行此操作的查询。

```
select user_name, mobile, max(product_type) product_type
from table1
group by user_name, mobile
having count(distinct product_type) = 1 and sum(product_type = 2) = 1 
```

演示[在这里](http://www.sqlfiddle.com/#!2/17648/1)。

注意：我注意到您还想在结果中查看产品类型。但是，这应该是不必要的，因为初始条件是结果只有 product_type = 2 记录。无论如何，我添加了一个`max`函数来避免不必要的和昂贵的连接或子查询。

# svn - 在 CentOS 6.3 上使用 svn:// 协议时获取 E210007 无法协商身份验证机制

> ID：14879955
> 
> 赞同：0
> 
> 时间：2013-02-14T16:52:31.567
> 
> 标签：svn, centos, kerberos

我的项目需要以编程方式从 svn 签出代码，我们使用 svn 协议，因为我们对 Active Directory 使用 kerberos 身份验证机制。但是，当我运行测试时，我得到了错误。所以我尝试在命令行检查它只是为了确认我是否得到了同样的错误，我确实得到了同样的错误。我错过了什么？我确保我安装了`mod_dav_svn`, `subversion & cyrus-sasl-md5`,`cyrus-sasl-gssapi`包，但仍然收到此错误：

```
svn: E210007: Unable to connect to a repository at URL: ...  
svn: E210007: Cannot negotiate authentication mechanism 
```

有任何想法吗？我缺少任何软件包/配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T17:59:47.760

问题是 kerberos 密钥被设置为 root 用户，在执行时需要密码。改成普通用户！

# asp.net - div background_image 中的 onclick 事件，其中图像在某个位置是 pad_left？

> ID：14879956
> 
> 赞同：0
> 
> 时间：2013-02-14T16:52:38.673
> 
> 标签：asp.net, html, css

我对 div 不是很擅长，任何帮助都会非常感谢。

我的 div 代码示例

```
<div class="width" style="background-image: url('someImage.jpg');padding-left:200px;background-repeat:no-repeat;height: 200px;" > 
```

类宽度只需将 div 宽度设置为 1000px

我的目标是让图像只能点击，然后将用户重定向到另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:56:28.083

为什么不使用带有图像的 < a > 标签。

```
<a href="someURL.com">
   <img src="someImage.jpg" />
</a> 
```

# asp.net - Webview windows 8 嵌入式浏览器的键盘不随页面滚动。触摸板

> ID：14879959
> 
> 赞同：0
> 
> 时间：2013-02-14T16:52:45.153
> 
> 标签：asp.net, windows-8, webview, microsoft-metro

我正在使用带有嵌入式浏览器的 Windows 8 Metro 应用程序。在此浏览器中，我加载了一个 asp.net Web 应用程序。问题出现在像注册页面这样的页面上，我有许多文本字段。当用户进入最后几个字段时，键盘会阻止这些字段。

在任何其他浏览器上，键盘会将 Web 表单推送到键盘上方，但不会推送到嵌入式门户中。它只是隐藏了字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:32:00.250

WebView 有自己的窗口句柄，因此 XAML 背景再次出现“空域”问题。为了处理这些问题，您需要确定诸如键盘或 AppBar 之类的东西何时会遮挡 WebView 并手动修改其位置。[您可以在此示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)中看到一个示例，其中他们将动画和转换应用于 WebView 以处理 AppBar 的显示和隐藏。

您需要对键盘执行相同的操作。[您可以使用InputPane 类](http://msdn.microsoft.com/en-us/library/windows/apps/br242255.aspx)确定输入窗格（软键盘）何时显示或隐藏以及屏幕的多少。

# python - 我可以像这样创建从元类派生的子类吗？

> ID：14879960
> 
> 赞同：0
> 
> 时间：2013-02-14T16:52:49.203
> 
> 标签：python

我试图创建一个继承自超类中声明的元类的类，我确实这样做了：

```
from sqlalchemy import Column, String, create_engine
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

class Database(object):
    """
        Class that holds all data models classes and functions
    """
    def __init__(self, wenDbPath = "test.db"):
        self.engine = create_engine('sqlite:///' + "c:/"+wenDbPath, echo=False)
        self.Session = sessionmaker(bind=self.engine)
        **self.Base** = declarative_base() # This returns a metaclass.
        self.Base.metadata.create_all(self.engine)
        self.session = self.Session()

    class Element(**self.Base**):
        __tablename__ = 'elements'
        idNumber = Column(String(255), primary_key=True)
        smallDiscription = Column(String(50), nullable=False)
        longDiscription = Column(String())
        webLink = Column(String())

        def __init__(self, idNumber, smallDiscription, longDiscription, webLink):
            self.idNumber = idNumber
            self.longDiscription = longDiscription
            self.smallDiscription = smallDiscription
            self.webLink = webLink
        def __repr__(self):
            return "<Element ('%s : %s')>" % (self.idNumber, self.smallDiscription) 
```

Python给了我以下信息

> 类元素（self.Base）：NameError：名称'self'未定义

我怎么能做这样的事情？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:58:16.087

`__init__`在运行之前评估类主体。由于`Base`不依赖于`__init__`参数，您可以在类评估时对其进行评估：

```
class Database(object):
    ...
    Base = declarative_base() # This returns a metaclass.
    class Element(Base):
        ... 
```

请注意，您使用`Base`的是超类，而不是元类；元类语法是`__metaclass__ = Base`或`(metaclass=Base)`取决于版本。请参阅[Python 中的元类是什么？](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)

# regex - 用逗号分隔的许多 ip 的正则表达式

> ID：14879964
> 
> 赞同：2
> 
> 时间：2013-02-14T16:52:53.923
> 
> 标签：regex

我打算构建一个正则表达式，它将与一个用逗号分隔的 ips 块匹配。就我而言，是 ips 的正则表达式和一个逗号，后跟一个断线字符，但我需要设置这个条件：

如果 threre 是最后一行（没有断线字符），逗号是可选的，如果还有其他内容，则必须是逗号后跟断线。

你能帮我完成正则表达式吗？

这是我正在构建的正则表达式

```
((25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)(,\n)?)* 
```

这是测试块

```
192.168.1.1,
192.56.3.23,
189.35.2.2,
198.23.45.56
192.168.3.24 
```

198.23.45.56 不应该是有效的，因为它不是最后一行，并且行尾没有逗号。

我正在使用此验证器在线[http://regexpal.com/](http://regexpal.com/)来测试正则表达式。

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:57:30.283

尝试这个：

```
((25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)(,\n|,?$)) 
```

[并使用“g”标志包含多个匹配项（ http://regexpal.com](http://regexpal.com)中的“点匹配所有”复选框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:59:15.597

如果您使用如此严格的方案，为什么还要使用正则表达式。试试 myIpList = myIpString.split(',\n')

# php - 简单的安全登录 php / javascript

> ID：14879965
> 
> 赞同：4
> 
> 时间：2013-02-14T16:53:01.110
> 
> 标签：php, javascript, security, sha1

我想创建一个安全登录，所以我想在将密码作为 POST 参数发送之前对其进行加密。我正在使用 SHA1 javascript 函数进行操作。

然后我意识到如果有人截获了加密密码，他可以立即使用它。将其作为 post 参数发送到相同的 URL。

如何确定密码来自登录输入字段？也许有一个 PHP 会话？我还不想使用安全 http。任何人都有一个简单的选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T16:56:23.920

> 如何确定密码来自登录输入字段？

你不能。

与此最接近的是针对[CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))的通常防御措施……但这只会阻止人们欺骗用户将数据从他们的站点提交到您的站点。它不会保护密码。

> 我还不想使用安全 http。任何人都有一个简单的选择？

HTTPS**是**一个简单的选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T17:14:05.087

唯一可能对您有所帮助的是为每个会话创建临时盐，然后在客户端加密密码，然后使用保存在服务器端的相同盐解密密码，该方法就像用于的唯一令牌防止 CRSF，因为即使是中间人也捕获了他/她无法解密的密码。

最后，您需要创建另一个（不同的算法）来将密码保存在数据库中，上面的概念思想是用于保护客户端和服务器之间的密码。

解释：

客户端 -> 请求 -> 服务器

服务器 -> 响应（发送唯一的盐或用于 JavaScript，如 session_id()） -> 客户端

客户端 -> JavaScript 执行 -> 使用唯一盐加密密码

客户端 -> POST -> 服务器

服务器 -> 使用保存的盐解密密码 -> 提取密码

如果上面的想法是错误的，我希望有人纠正我！

注意：AES 可用于 JS 和 PHP

盐=钥匙

可用工具：

[AES 高级加密标准](http://www.movable-type.co.uk/scripts/aes.html)

[jsaes：JavaScript 中的 AES](http://point-at-infinity.org/jsaes/)

[PHP AES DEC/ENC](https://stackoverflow.com/questions/3422759/php-aes-encrypt-decrypt)

[phpAES](http://www.phpaes.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T17:00:33.003

通过网络将 SHA1 密码发送到您的服务器可以有效地使 SHA1 哈希成为真正的密码。

除了没有优势之外，您实际上正在使您的安全性变得更糟；如果我用 SHA1 哈希窃取你的数据库，我现在可以直接使用这些登录，甚至无需暴力破解哈希来获取“真实”密码。

HTTPS 是保护密码不以纯文本形式发送的唯一真正方法。当您传输到 HTTPS 时，请确保将这些 SHA1 哈希值更改为 bcrypt。

如果您担心额外的 SSL 证书费用，您也可以生成自签名证书，如果您不担心浏览器错误或愿意将证书添加到受信任列表 ( [http://resources.arcgis.com ) /en/help/main/10.1/index.html#//0154000005q6000000](http://resources.arcgis.com/en/help/main/10.1/index.html#//0154000005q6000000)）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-07T19:11:27.123

请帮全世界和您的所有客户一个忙，并继续加密密码，然后再通过未加密的 HTTP 发送密码。

这个问题有两个方面，在这种情况下，两个方面是您自己和您所服务的客户。不幸的是，大多数人在许多网站上使用相同的密码，事实是我们没有存储容量来处理我们使用数百个密码登录的数百个网站，我们作为最终用户选择两个或三个并继续我们的生活。如果您通过 HTTP 向您的客户发送密码而不首先对其进行加密，那么您肯定是做错了，事实上您会有所收获。相信您的客户，他们的密码（可能与他们登录银行时使用的密码相同）不会落入黑客之手，更重要的是，不会落入与网站开发相关的任何人之手，因为，

我不愿意想到有多少 Web 开发人员阅读了这篇文章并决定在客户端加密，这应该是我们要做的第一件事，这是对用户的保护，而不是你自己......可以保护你的数据库有大量的程序，每个安全分析师都有自己的看法，不管该做什么或不该做什么。不应讨论客户端加密。

# android - RadioButton 行为不可预测

> ID：14879970
> 
> 赞同：0
> 
> 时间：2013-02-14T16:53:12.200
> 
> 标签：android, android-button

我有两个`RadioGroup`必须相互关联的 s。当我检查第一组上的按钮时，我需要禁用另一组上的相应按钮，如果已选中，也需要取消选中。

我试图通过在单击第一组中的按钮时 `RadioButton.setEnabled(false)`使用相应的按钮以及`RadioButton.setChecked(false)`是否也选中它来实现此目的。

但是在这些操作之后，当我使用时`RadioGroup.getCheckedRadioButtonId()`，它没有`-1`按预期返回（[这里](http://developer.android.com/reference/android/widget/RadioGroup.html#getCheckedRadioButtonId%28%29)），但它仍然返回我未选中和禁用的按钮的 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:53:12.200

我找到了一个解决方案，`RadioGroup.clearCheck()`而不是手动取消选中我想要的按钮，但我仍然想知道为什么 Android 会这样。我的意思是，为什么要调用一个方法，`setChecked()`如果它似乎没有按应有的方式工作，至少在将`false`参数传递给它时？

# c# - 反射获取基本类型

> ID：14879973
> 
> 赞同：-1
> 
> 时间：2013-02-14T16:53:20.510
> 
> 标签：c#, reflection, primitive, primitive-types

寻找一种在**不**使用 IsPrimitive 和一堆“||”的情况下在 c# 中获取基本/核心类型的方法。基本上我希望包含小数、日期时间、字符串，但我不想专门寻找它们。

我记得看到检查对象的基本类型的效果，看看它是否从对象继承。

有人能指出我正确的方向吗？

此外，此方法如何对原始可空对象进行分类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:09:07.603

如果您想获取所有基本数据类型的列表（一开始并不是那么基本，与其他结构相比，它们的行为略有不同），您将不得不使用`IsPrimitive`. 我可以理解不想使用`||`，但`IsPrimitive`对我来说很有意义。

此外，`DateTime`没有充分的理由被认为是基本的/原始的。`DateTime`只是你的常规结构。

这是我能想到的最好的方法：

```
List<Type> types = typeof(string).Assembly.GetTypes()
                   .Where(t => t.IsPrimitive).ToList();
types.Add(typeof(string));
types.Add(typeof(decimal)); 
```

这将在 mscorlib ( `typeof(string).Assembly`) 中搜索任何类型，并且只选择原语（`System.DateTime`不在列表中，但您可以根据需要添加它）。包括`string`and`decimal`类型是因为它们*可以*被认为是基本类型。

# java - 使用安全 SSL 连接保留会话

> ID：14879975
> 
> 赞同：0
> 
> 时间：2013-02-14T16:53:19.383
> 
> 标签：java, android, session, ssl, https

在那里我连接到授权页面，进入帐户并加载主页。如何在不丢失连接的情况下下载帐户中的其他页面？对吗？

主类：

```
HttpParams httpParameters = new BasicHttpParams();
int timeoutConnection = 10000;
HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
int timeoutSocket = 10000;
HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

HttpClient client = new MyHttpClient(httpParameters, getApplicationContext());
HttpPost request = new HttpPost("https://some.com/Login.aspx");

BufferedReader in = null;
try {

    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("uname", "name"));
    nameValuePairs.add(new BasicNameValuePair("upass", "pass"));
    request.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    HttpResponse response = client.execute(request);
    in = new BufferedReader(new InputStreamReader(response.getEntity() .getContent()));

    StringBuffer sb = new StringBuffer("");
    String line = "";
    String NL = System.getProperty("line.separator");
    while ((line = in.readLine()) != null) {
        sb.append(line + NL);
    }
    in.close();
    String page = sb.toString();

    textview.setText(page);

} catch (ClientProtocolException e) {...} 
```

和 MyHttpClient 类：

```
public class MyHttpClient extends DefaultHttpClient 
{    
  final Context context;
  public MyHttpClient(HttpParams hparms, Context context)
  {
    super(hparms);
    this.context = context;     
  }

  @Override
  protected ClientConnectionManager createClientConnectionManager() {
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    registry.register(new Scheme("https", new EasySSLSocketFactory(), 443));
    return new SingleClientConnManager(getParams(), registry);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:59:56.267

使用相同的请求对象（HttpPost），它应该使用相同的连接，除非您显式调用它的 releaseconnection。参考[http://hc.apache.org/httpcomponents-client-ga/quickstart.html](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)

# scripting - 将文件发送到 FTP 服务器的批处理文件

> ID：14879977
> 
> 赞同：1
> 
> 时间：2013-02-14T16:53:27.883
> 
> 标签：scripting, ftp, batch-file, cmd, windows-server-2003

我有一个批处理文件（ftp.bat），看起来像：

```
@echo off
echo user etm124> ftpcmd.dat
echo testing123>> ftpcmd.dat
echo put %1>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat ftp.DriveHQ.com
del ftpcmd.dat 
```

该文件位于`C:\`. 该目录中还有一个名为`remote.txt`. 在`C:\`目录中运行它时，它只是挂起：

`C:\>ftp.bat c:\remote.txt`

如果我查看`C:\`，我可以看到`ftpcmd.dat`文件已创建，但我的脚本只是挂起。

**当我在我的机器上本地运行它时，我可以很好地发送文件。但是，如果我尝试在我的一台 Windows Server 2003 机器上运行它，它就会挂起。**

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:13:08.920

似乎脚本会触发无限循环，导致脚本永远不会停止。尝试从您的脚本中省略*@echo*以查看这种情况。尝试重命名批处理文件，为 ftp 命令 (ftp.exe) 添加扩展名，甚至提供可执行文件的完整路径以使其工作。

# matlab - 三个直方图，三种不同颜色，一张图：matlab

> ID：14879981
> 
> 赞同：1
> 
> 时间：2013-02-14T16:53:31.550
> 
> 标签：matlab, histogram

我正在尝试绘制图像中不同颜色像素的频率。我可以在三个单独的数字上绘制三个单独的直方图，但我想将它们全部绘制在同一个数字上，红色代表红色，绿色代表绿色等。从我在这个和其他网站上的答案中可以看出，以下应该工作，但它没有，只有第二个出现。我究竟做错了什么？

```
hold on;

x = 0:1:255;
figure ('name', 'red') ;
red = (newImg(:,:,1));
r = red(:)';
r = cast(r,'double');
[graph1,graph2] = hist (r,x);
bar(graph2,graph1, 'FaceColor', 'r','EdgeColor','r')
alpha(0.3);

green = (newImg(:,:,2));
g = green(:)';
g = cast(g,'double');
[graph1,graph2] = hist (g,x);
bar(graph2,graph1, 'FaceColor', 'b','EdgeColor','b')

hold off; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:07:47.663

您可以以更简单的方式绘制所有直方图（RGB 通道），例如：

```
hist(reshape(newImg,[],3),x);
colormap([1 0 0 ; 0 1 0; 0 0 1]); %RGB 
```

在这里，我将其重塑`newImg`为 Nx3 矩阵，相当于`[r; g ;b]`您创建的矩阵。然后一个人`hist`可以处理它们，并使用自定义颜色图，用它代表的正确颜色绘制每个通道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-05T06:42:04.963

这里有一些关于如何用透明度叠加几个直方图的很好的解释，我认为它会对你有所帮助： [http ://desk.stinkpot.org:8080/tricks/index.php/2006/07/how-to-make-a -matlab中的透明直方图/](http://desk.stinkpot.org:8080/tricks/index.php/2006/07/how-to-make-a-transparent-histogram-in-matlab/)

```
figure;
hist(data1,20);
h = findobj(gca,’Type’,'patch’);
set(h,’FaceColor’,'r’,'EdgeColor’,'w’,'facealpha’,0.75);
hold on
hist(data2,20);
h = findobj(gca,’Type’,'patch’);
set(h,’facealpha’,0.75); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:59:44.973

已修复，在绘制第一张图后需要“等待”；我以为这是一个切换开关-您打开“按住”并一直按住直到您将其关闭，显然不是...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T18:06:39.707

您需要在调用之前创建一个新图形（和/或轴）`hold on`，因为保持状态适用于每个轴，并且该命令`hold on`适用于当前轴。如果您想更精确地控制保持状态，请修改`NextPlot`轴的属性。

此外，要绘制多个直方图，来自 File Exchange 的[distributionPlot](http://www.mathworks.com/matlabcentral/fileexchange/23661-violin-plots-for-plotting-multiple-distributions-distributionplot-m)可能很有用；在您的情况下，例如＃7。

# web-services - 禁用会话时的 CSRF 预防

> ID：14879982
> 
> 赞同：2
> 
> 时间：2013-02-14T16:53:38.767
> 
> 标签：web-services, csrf, session-less

我们想为启用 AJAX 的 Web 服务添加 CSRF 保护。但是一些 Web 服务已经禁用了 Session 状态。那么如何处理呢？

无[会话 CSRF 保护（双重提交 cookie）](https://stackoverflow.com/questions/9676837/sesionless-csrf-protection-double-submit-cookies)后讨论了这一点，并指出使用 cookie。但是作为这篇文章[Anti-CSRF cookie？](https://stackoverflow.com/questions/8253396/anti-csrf-cookie?rq=1)点，使用cookie可能不是一个好主意。

有人可以指出我去这里的正确方式吗？

提前致谢！

# for-loop - 使用 forvalues 语法的反向循环失败

> ID：14879983
> 
> 赞同：1
> 
> 时间：2013-02-14T16:53:46.053
> 
> 标签：for-loop, foreach, stata

为什么我不能使用`forvalues`语法反向循环？我*可以*使用`foreach of numlist`语法反向循环，但我很困惑为什么下面的示例在等效示例工作`forvalues`时静默失败。`foreach of numlist`

```
* both fail silently
forvalues j = 5/4 {
    display `j'
}

forvalues j = 5(1)4 {
    display `j'
}

* both work
foreach j of numlist 5/4 {
    display `j'
}

foreach j of numlist 5(1)4 {
    display `j'
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T18:19:43.390

玫瑰是红色的，

紫罗兰是蓝色的。

试试`5(-1)4`。

希望对你有效。

需要一些额外的字符来发布，因此是诗歌。

# linux - 此设置的 Linux nat/iptables 配置

> ID：14879988
> 
> 赞同：8
> 
> 时间：2013-02-14T16:53:59.127
> 
> 标签：linux, routing, iptables, nat

我有 4 台 linux (CentOS) 机器的实验设置：

![在此处输入图像描述](../Images/37dd5bb61d88ad76f645b755662916e3.png)

所有 4 台机器都使用不同的网络在内部连接，并且可以相互 ping 对方直接连接的接口。但是只有 PC4 可以访问互联网。

我正在尝试设置允许 PC1 能够通过 PC4 访问 Internet 的 iptable 规则，但我不知道该怎么做。

我尝试在 PC2、PC3 和 PC4 的传出接口上添加 NAT：

```
iptables -t nat -F POSTROUTING
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE 
```

但是，这不起作用，你能告诉我如何在这样的设置中让 PC1 访问 10.0.0.1 网络吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T16:56:32.810

启用 IP 转发。

```
echo 1 > /proc/sys/net/ipv4/ip_forward 
```

永久设置编辑`/etc/sysctl.conf`并设置`0`为`1`

```
net.ipv4.ip_forward = 1 
```

要启用在 sysctl.conf 中所做的更改，您需要运行命令

```
sysctl -p /etc/sysctl.conf 
```

NAT 的 iptables 规则

```
# /sbin/iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
# /sbin/iptables -A FORWARD -i eth0 -o eth1 -m state --state RELATED,ESTABLISHED -j ACCEPT
# /sbin/iptables -A FORWARD -i eth1 -o eth0 -j ACCEPT 
```

# c - 如何释放 json_object？

> ID：14879994
> 
> 赞同：11
> 
> 时间：2013-02-14T16:54:10.720
> 
> 标签：c, json, libjson

我有以下代码

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
#include <string.h>

#include <json/json.h>

int main(int argc, char **argv)
{
      json_object *new_obj;
      char buf[] = "{ \"foo\": \"bar\", \"foo2\": \"bar2\", \"foo3\": \"bar3\" }";
      new_obj = json_tokener_parse(buf);
      .....
      json_object_put(new_obj);
} 
```

是否`json_object_put(new_obj)`释放所有相关的内存`new_obj`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T16:56:48.987

从文档中：

```
void json_object_put    (struct json_object *this) 
```

> 减少 json_object 的引用计数，如果达到零则释放

来源： http: [//oss.metaparadigm.com/json-c/doc/html/json__object_8h.html](http://oss.metaparadigm.com/json-c/doc/html/json__object_8h.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-08-06T18:47:00.680

您必须了解图书馆的工作原理。

`json_tokener_parse()`是第一个，它创建了一个对象，该对象将充当内存管理父对象，从它创建的所有对象都使用该对象来访问它们定义的数据。

因此，如果您一直为字符串字段创建 char *str，则该字段实际上并不存储字符串，而是从返回的原始对象`json_tokener_parse()`。

这就是您不能只使用普通的 free() 并期望事情像 char 数组或其他东西一样工作的原因。

为了安全起见，不要使用该`json_tokener_parse_ex()`函数，因为您还必须释放作为标记器的对象，而`json_tokener_parse()`您不需要该参数。

除此之外，要安全地关闭所有内容，只需执行以下操作：

```
while (json_object_put(orig_object) != 1) {
  // keep freeing
} 
```

你应该只需要这样做一次，但库可能会改变。