# StackOverflow 问答 15705000-15705999

# c - 年轻画面的编程

> ID：15705001
> 
> 赞同：17
> 
> 时间：2013-03-29T14:13:12.657
> 
> 标签：c, prolog, diagram, constraint-programming, clpfd

一个奇怪的问题接踵而至：
我在我的学校做一个解决问题的比赛，他们允许我们使用电脑。因为我是比赛中唯一知道如何编码的人，所以我使用 C 和 Pascal 程序来更快地解决问题。我已经通过伪代码到代码的练习、算法、Collat​​z 猜想验证等来做到这一点。
现在，昨天我正在为下一个挑战（4 月 18 日）进行训练，我看到了一个关于 Young 画面的练习。措辞是这样的（我会尽力从意大利语翻译）：
“费雷尔图是分布在一个或多个水平行中的 N 个框的配置，左对齐并配置为使每一行包含的框数与其上的行相同或更少。这些配置也可以通过以下列表来描述盒子的编号，如下图所示：（[来源：][[olimpiadiproblemsolving.it](http://olimpiadiproblemsolving.it/immagini_test/mate/finale_2011_m_07a_400.jpg)][）] Young tableau 是 N 个盒子的 Ferrers 图，其中填充了从 1 到 N 的整数。示例：（[来源：][[olimpiadiproblemsolving.it](http://olimpiadiproblemsolving.it/immagini_test/mate/finale_2011_s_03b_400.jpg)][）]
[![费勒图](../Images/1ebb469d81f4ecab4fdd9151a1f56bd6.png)](https://i.stack.imgur.com/HT3s6.jpg)

[![年轻的画面](../Images/a61f759d89c536b59620e0ce5493bb94.png)](https://i.stack.imgur.com/eOY6I.jpg)

如果框中的数字按行和列按升序排序，则该表是“标准”表（例如：第一、第三和第五表）。在标准表格中，第一行的第一个框始终包含 1。N 始终位于图表其中一行的最左边的框中。

问题

考虑一个 [6,3,2,1,1,1] 费雷尔图：
1）如果 6 固定在第一行的第 6 个盒子上，而 11 固定在第一列的最后一个盒子里，有多少种方法可以您以标准方式完成图表？

2) 如果 7 固定在第 1 行的第 6 个盒子上，而 11 固定在第 1 列的最后一个盒子上，你可以用几种方式以标准方式完成图表？

3）如果8固定在第一行的第6个盒子上，11固定在第一列的最后一个盒子上，你可以用多少种方式以标准方式完成图表？”

我试图编写一个解决方案用一个填充了这些数字的矩阵，并用“-1”作为“行结束字符”，但我被卡住了。我该如何编码“以各种可能的方式填充它，以便画面是标准的？”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T23:45:34.683

这是使用 SWI-Prolog 解决第一个问题的示例解决方案：

```
:- use_module(library(clpfd)).

tableau(Ts) :-
        Ts = [[A,B,C,_,_,F],
              [G,H,I],
              [J,K],
              [L],
              [M],
              [N]],
        A = 1,
        maplist(ascending, Ts),
        ascending([A,G,J,L,M,N]),
        ascending([B,H,K]),
        C #< I,
        append(Ts, Vs),
        all_different(Vs),
        Vs ins 1..14,
        F = 6,
        N = 11,
        label(Vs).

ascending(Vs) :- chain(Vs, #<). 
```

答案是完成画面有两种方式：

```
?- tableau(Ts), maplist(writeln, Ts).
[1,2,3,4,5,6]
[7,12,13]
[8,14]
[9]
[10]
[11]
    Ts = [[1, 2, 3, 4, 5, 6], [7, 12, 13], [8, 14], [9], [10], [11]] ;
[1,2,3,4,5,6]
[7,12,14]
[8,13]
[9]
[10]
[11]
    Ts = [[1, 2, 3, 4, 5, 6], [7, 12, 14], [8, 13], [9], [10], [11]] ;
false. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T07:53:02.247

为了解决这个问题，我会使用约束编程（CP）。Young 画面实际上是我在学习新的 CP 系统时尝试解决的标准问题之一。这是迄今为止的实现列表：http: [//hakank.org/common_cp_models/#youngtableaux](http://hakank.org/common_cp_models/#youngtableaux)。

我已经更改了“普通”MiniZinc 模型，并针对您的特定问题添加了一些额外的限制。在此处查看完整模型： [http ://www.hakank.org/minizinc/young_tableaux_stack_overflow.mzn](http://www.hakank.org/minizinc/young_tableaux_stack_overflow.mzn)

（MiniZinc 水平非常高，很容易解决此类问题。）

关于模型中的表示的简短说明：对于大小为 n（n 的分区）的问题，框表示为一个网格（“x”，大小为 n 乘以 n），其值为 1 到 n+1，其中每一行和列按升序排序；所以 n+1 排在最后，并作为一个空值。然后处理分区结构（“p”）以符合 Young/Ferrer 结构（详见模型）。

这三个问题中的每一个都有两个额外的约束（与问题的标准表述相比）：

*   一定的数字应该在第一行的第 6 个框中添加的约束是 x[1,6] = 6 % or 7 or 8

*   和 11 应该在第一列的最后一个框中这有点棘手，但我的方式是这样，即在第一列中，11 应该是小于 n+1 的值的最后一个，即列中的所有值是 n+1：

    ```
     exists(j in 1..n) (
          x[j,1] = 11 /\ forall(k in j+1..n) (x[k,1] = n+1)
     ) 
    ```

所以，如果我正确理解了这些问题，答案是：1）2 个解决方案 2）10 个解决方案 3）30 个解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:58:42.887

在不使用程序的情况下，我相信 1) 的答案是 2。手动推导它可能会导致某人找到算法解决方案。

第一行以 1 开头，以 6 结尾。因此，可以进入第 1 行的数字必须满足这个条件：1 < x < 6。在可以进入这个画面的 14 个数字中，只有 4 个满足该条件，并且它们是：2 3 4 5。这意味着第 1 行必须是：1 2 3 4 5 6。

第一列以 1 开头，以 11 结尾。可以进入第一列的数字必须满足类似的条件：1 < y < 11。其余未分配的数字中，只有 4 个满足此条件：7 8 9 10。这导致第一列是：1 7 8 9 10 11。

现在只剩下 3 个数字：12 13 14。在画面的剩余 3 个单元格中只有两种排列方式。他们可以安排：

12 13

14

- 或者 -

12 14

13

试图在代码中解决这个问题，可以走蛮力路线，或者研究约束传播和回溯技术。这就是为什么有人早些时候建议使用 Prolog 的原因。另一种要研究的语言是 Python。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:49:01.547

这是一个约束逻辑编程问题。使用编程语言 Prolog。带有 clpfd 库的 Sicstus 序言。

考虑这样的布局：

```
ABCDEF
GHI
JK
L
M
N 
```

- 代码 -

```
use_module(library(clpfd)).

all_different([A,B,C,D,E,F,G,H,I,J,K,L,M,N]),
domain([A,B,C,D,E,F,G,H,I,J,K,L,M,N],1,14),
B #> A, C #> B, D #> C, E #> D, F #> E,
G #> A, H #> B, H #> G, I #> G, I #> H,  I #> C,
J #> A, J #> G, 
L #> A, L #> G, L #> J,
M #> A, M #> G, M #> J, M #> L,
N #> A, N #> G, N #> J, N #> L, N #> M.

A=1
F=6
N=11 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-23T09:14:02.977

这是著名的 Cormen 书中的一个练习。我发现[这个资源](https://www.gyanblog.com/gyan/coding-interview/young-tableau-implementation/)有助于学习这个问题，制作这种结构，提取最小元素，并保持数据结构不变。

# django - 在 FormWizard 步骤中显示两个模型的组合表单

> ID：15705002
> 
> 赞同：0
> 
> 时间：2013-03-29T14:13:13.563
> 
> 标签：django, django-forms, formwizard

我有 User、Profile、PhysParams 模型。Profile 和 PhysParams 与 User 具有 OneToOne 关系。

我正在尝试显示与登录用户相关的上述两个表单。

我遇到过 FormSet、ModelFormSet 和 InlineFormSet，但我不确定要使用哪一个。

试

```
JoinedFormSet = inlineformset_factory(User, Profile, PhysicalParams) 
```

生产

```
KeyError at /registration_form/ u'__module__' Request Method:   GET
Request URL:    http://hostname:8000/registration_form/ Django
Version:    1.5 Exception Type: KeyError Exception Value:    u'__module__' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:30:29.160

您需要创建它们并将它们呈现为 UI 上的单独表单。

您需要将 request.POST 传递到每个表单中，以便它们获取各自的字段，您可以验证并保存它们。

# c++ - 当我调用它时功能不起作用

> ID：15705007
> 
> 赞同：-1
> 
> 时间：2013-03-29T14:13:29.300
> 
> 标签：c++, random

我对实际程序有疑问。在用户选择 1 或 2 与计算机或人类对战后，显示的下一行是“它是平局”，它会跳过整个游戏。我不知道为什么，因为我在 while 循环开始时将 turnNum 设置为 0 并增加 1，如果 turnNum 等于 10，它应该只是一个平局游戏。我的代码不正确吗？

```
/*
   Template for TicTacToe.cpp (CS-509 Assignment 5)

   Fill in the rest of this comment block.
*/

#include<iostream>
using namespace std;

/*
   Game status enumeration
*/
enum Status { WIN, DRAW, CONTINUE, QUIT };

/*
   Function prototypes
*/
// showBoard: Show current state of board
void showBoard( const char board[], int boardSize );
// checkGameState: Returns WIN or CONTINUE
Status checkGameState( const char board[] );
int getHumanSquare( const char board[] );
int getComputerSquare( const char board[] );
// checkBadSquare: Checks to see if a chosen square is already taken; returns
//                 true if already taken; used by getHumanSquare and
//                 getComputerSquare functions above.
bool checkBadSquare( const char board[], int squareNum );
int getrandint( int min, int max );

int main()
{
    char board[] = "123456789";   // 10 element char board
    const int boardSize = 10;
    Status gameState = CONTINUE;
    int gametype, squareChoice, turnNum = 0;
    char currentSymbol;           // 'o' or 'x'

    cout << "\n This is a Tic Tac Toe program. Choose the type of game: "
         << "\n (1) human o vs. human x    (2) human o vs. dumb computer x"
         << "\n\n -> ";
    cin  >> gametype;

    /* Show the current state of Tic Tac Toe board. */
    cout << gameState;

    /*
       Main game loop
    */
    while ( gameState == CONTINUE )
    {

        /* Increment turnNum by 1\. */
        turnNum++;
        /* If turnNum equal to 10
              Set gameState to DRAW.
              Break out of while loop. */
        if ( turnNum = 10 )
        {
            gameState = DRAW;
            break;
        }
        /* If we are on an odd-numbered turn
              Print "It's o's turn."
              Set currentSymbol to 'o'.
              Call getHumanSquare function to get squareChoice.*/
        if ( turnNum%2 != 0)
{
            cout << "It's o's turn.";
            currentSymbol = 'o';

            int getHumanSquare();

            return boardSize;
}

        /* Else (we are on an even-numbered turn)
            Print "It's x's turn."
            Set currentSymbol to 'x'. */
        else
        {
            cout << "It's x's turn.";
            currentSymbol = 'x';
        }

        /*   If the gametype is 1 (human vs. human)
              Call getHumanSquare function to get squareChoice.*/
        if ( gametype == 1 )
{
            int getHumanSquare();

                return boardSize;
}

        /* Else (gametype is 2 (human vs. computer))
           Call getComputerSquare function to get squareChoice. */
        else

            int getComputerSquare();
            {
                return boardSize;
            }

        /* If squareChoice is -1 (human player quit)
              Set gameState to QUIT.*/
        if ( squareChoice == -1 )
        {
            gameState = QUIT;
        }

        /* Else
           Insert currentSymbol into board at (squareChoice - 1).
           Show the current state of the Tic Tac Toe board.
           Call checkGameState function to determine the gameState. */
        else
{
            bool checkBadSquare();
                return boardSize;

            Status checkGameState();
}
    }

    // end while

    /* If gameState is WIN
          print "Player " currentSymbol " is the winner." */
    if ( gameState == WIN)
        cout << "Player " << currentSymbol << " is the winnter.";

    /* If gameState is DRAW
          print "It's a draw." */
    if ( gameState == DRAW )
        cout << "It's a draw.";

    return 0;
}

/////////////////////////////////////////////////////////////////////

void showBoard( const char board [], int size )
{
    cout << endl;

    for ( int i = 0; i < size ; i++ )
    {
        cout << board[ i ] << " ";
        if ( ( i + 1 ) % 3 == 0 )
            cout << endl;
    }

    cout << endl;
}

/////////////////////////////////////////////////////////////////////

Status checkGameState( const char board[] )
{
    // Board       Array
    //
    // 1 2 3       0 1 2
    // 4 5 6  -->  3 4 5
    // 7 8 9       6 7 8
    //
    // Diagonal winners
    if ( board[ 0 ] == board[ 4 ] && board[ 0 ] == board[ 8 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 4 ] && board[ 4 ] == board[ 6 ] )
        return WIN;
    // Horizontal winners
    else if ( board[ 0 ] == board[ 1 ] && board[ 1 ] == board[ 2 ] )
        return WIN;
    else if ( board[ 3 ] == board[ 4 ] && board[ 4 ] == board[ 5 ] )
        return WIN;
    else if ( board[ 6 ] == board[ 7 ] && board[ 7 ] == board[ 8 ] )
        return WIN;
    // Vertical winners
    else if ( board[ 0 ] == board[ 3 ] && board[ 3 ] == board[ 6 ] )
        return WIN;
    else if ( board[ 1 ] == board[ 4 ] && board[ 4 ] == board[ 7 ] )
        return WIN;
    else if ( board[ 2 ] == board[ 5 ] && board[ 5 ] == board[ 8 ] )
        return WIN;
    else
        // No one has won yet
        return CONTINUE;
}

/////////////////////////////////////////////////////////////////////

int getHumanSquare( const char board[] )
{
    int squareNum;

    cout << "\n Input the number of an empty square: (-1 to quit) ";
    cin  >> squareNum;

    while ( checkBadSquare( board, squareNum ) == true )
    {
        cout << "\n Bad input. Choose another square: ";
        cin >> squareNum;
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

int getComputerSquare( const char board[] )
{
    int squareNum;

    squareNum = getrandint( 1, 9 );

    while ( checkBadSquare( board, squareNum ) == true )
    {
        squareNum = getrandint( 1, 9 );
    }

    return squareNum;
}

/////////////////////////////////////////////////////////////////////

bool checkBadSquare( const char board[], int squareNum )
{
    int realSquareNum = squareNum - 1; // count from 0

    if ( squareNum == -1 )
        return false;  // Let quit code pass as a valid square
    else if ( squareNum > 9 )
        return true;   // Square numbers out of range are invalid
    else if ( board[ realSquareNum ] == 'o' || board[ realSquareNum ] == 'x' )
        return true;   // Already taken squares are invalid
    else
        return false;  // Valid square number
}

/////////////////////////////////////////////////////////////////////

int getrandint( int min, int max )
{

    int scale, shift;
    scale = max - min + 1;
    shift = min;
    return rand() % scale + shift;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:14:47.267

你可以输入

```
#include <stdlib.h> 
```

或者

```
#include <cstdlib> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:18:28.737

添加到代码的顶部`#include<cstdlib>` rand() 在该库文件中定义。

[http://www.cplusplus.com/reference/cstdlib/rand/](http://www.cplusplus.com/reference/cstdlib/rand/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:02:38.687

通过在评论中回复您的问题：

您的代码有几个主要问题： 1\. 枚举元素索引从 0 开始，因此 CONTINUE 实际上是 2\. 如果您输入 gameType=1，则`while`循环将永远不会执行。所以你有`It is a DRAW`。

1.  几个语法错误：

    ```
    int getHumanSquare(); //are you calling a function or declaring a function?
    return boardSize;

    if ( gametype == 1 )
    {
        int getHumanSquare();  //^^^^^^same issues

            return boardSize;
    }
    else //missing { and } here

        int getComputerSquare();
        {
            return boardSize;
        } 
    ```

以下几个相同类型的错误：

```
 bool checkBadSquare();  //same here
     return boardSize;

     Status checkGameState();//same here 
```

# javascript - JavaScript clearTimeout 返回未定义

> ID：15705011
> 
> 赞同：0
> 
> 时间：2013-03-29T14:13:40.527
> 
> 标签：javascript, jquery, ajax, settimeout, onkeyup

有人可以向我解释我下面的代码有什么问题吗？我正在声明一个公共变量并将其设置为 setTimeout，如果不为空，则在再次设置之前清除超时。当我尝试清除超时时，我得到未定义，因此超时继续运行。

```
var usernameCheckTimeout = null;

$(document).ready(function(){
    $("#username").on("keyup", function(e){ 
        if($(this).val().length >= 6)
        {
            if(usernameCheckTimeout != null)
            {
                clearTimeout(usernameCheckTimeout);
            }
            usernameCheckTimeout = setTimeout(isUsernameAvailable($(this).val()), 1000);
        }
    });
});

function isUsernameAvailable(username)
{
    $.ajax({
        url : "/account/username-check",
        method : "POST",
        dataType : 'json',
        data : {
            'username' : username
        }
    }).done(function(data) {
        console.log(data);
    });
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:20:55.067

您不需要进行 null 检查，也需要在 周围创建一个闭包`this`，否则`this`将指代不是您认为`this`的实际情况。

```
var usernameCheckTimeout;
$("#username").on("keyup", function (e) {
    if ($(this).val().length >= 6) {
        clearTimeout(usernameCheckTimeout);
        var that = this;
        usernameCheckTimeout = setTimeout(function () {
            isUsernameAvailable($(that).val();
        }, 1000);
    }
}); 
```

像往常一样喜欢一些[jsfiddle 。](http://jsfiddle.net/markcoleman/8xHKw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:19:02.817

正在清除超时。问题是您立即调用函数而不是将函数传递给`setTimeout`.

```
setTimeout(isUsernameAvailable($(this).val()), 1000); 
```

`isUsernameAvailable($(this).val())`将被调用并且此调用的结果将被传递给`setTimeout`.

您应该传递一个调用此函数的函数：

编辑：正如@Mark 所说，你还需要处理`this`不是你所期望的：

```
var value = $(this).val();

setTimeout(function(){
    isUsernameAvailable(value)
}, 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:22:05.283

你有几个问题。第一个很大的问题是您正在立即**执行** `isUsernameAvailable($(this).val())`并将返回值传递给`setTimeout`-您需要将其移动到匿名函数中，以便在超时调用匿名函数之前它不会执行：

```
usernameCheckTimeout = setTimeout(function () {
    isUsernameAvailable($(this).val());
}, 1000); 
```

javascript 超时函数依赖于数字 ID 来运行。您应该避免测试`null`or`undefined`或其他任何东西，而是测试一个数字：

```
// leave it as undefined
var usernameCheckTimeout;

...

if (typeof usernameCheckTimeout === 'number') {
    clearTimeout(usernameCheckTimeout);
} 
```

# definition - 如何隐藏不需要的措施

> ID：15705012
> 
> 赞同：1
> 
> 时间：2013-03-29T14:13:52.533
> 
> 标签：definition, cube, activepivot, measures

AP 4.4.3，APL 2.7.0

你好，

在定义后处理度量时，我们最终会在 Active Pivot Live 中获得两个可用的度量。例如，下面的定义将为我们提供度量“Yield Curve.SUM”和“Yield Curve.TenorDetail”。由于我们有很多这样的措施，我们最终会得到很多无用的 SUM 措施，使界面变得混乱。

那么，既然我们只需要“Yield Curve.TenorDetail”，我们可以以某种方式隐藏“Yield Curve.SUM”吗？

```
<measure name="Yield Curve" aggregationFunctions="SUM" >
        <postProcessor pluginKey="TenorDetail" >
            <properties>
                <entry key="id" value="TenorDetail" />
                <entry key="vectorMeasure" value="Yield Curve.SUM" />
                <entry key="analysisDimensionName" value="Tenor" />             
            </properties>
        </postProcessor>
    </measure> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:44:32.760

您可以通过在多维数据集定义的共享上下文中定义子多维数据集属性来实现此行为，并明确列出您希望对用户可用的所有度量

例如，下面的定义将仅显示 Yield Curve.TenorDetail 而没有其他度量：

```
 <sharedContexts>
       <subCubeProperties isAccessGranted="true">
          <grantedMeasures>
             <measure>Yield Curve.TenorDetail</measure>
          </grantedMeasures>
        </subCubeProperties>
    </sharedContexts> 
```

# java - 带复合键的多对一-外键必须具有与他引用的 PK 相同的列数

> ID：15705016
> 
> 赞同：0
> 
> 时间：2013-03-29T14:14:07.347
> 
> 标签：java, hibernate, hibernate-mapping, composite-key, many-to-one

**问题总结**

我正在尝试使用复合键映射多对一。到目前为止，我还没有找到另一个有帮助的问题。我知道如何一对一映射到复合键，但它不允许我映射多对一。

下面你会看到 bhrvJournalDAO 有一个 store_nbr 列，它映射到 transAcctgBuTxtDAO acctg_bu_id。如何点击复合键并告诉它只使用 acctgBuId？我没有国家代码（这是复合键的第二部分）。

**从这里**

```
<hibernate-mapping>
<class name="com.acctg.BhrvJournalDAO" table="transpo_acctg:bhrv_journal">
    <id name="jeId" column="je_id">
        <generator class="native"/>
    </id>
    <property name="bhrvInvoiceId" column="bhrv_invoice_id"/>
    <property name="storeNbr" column="store_nbr"/>
    <property name="loadId" column="load_id"/>

  <many-to-one name="transAcctgBuTxt" class="TransAcctgBuTxtDAO" insert="false" update="false" cascade="all">
              <column name="store_nbr"></column>
  </many-to-one>
</class> 
```

**到这里**

```
<hibernate-mapping>
<class name="TransAcctgBuTxtDAO"    table="transpo_acctg:trans_acctg_bu_txt">
    <composite-id name="transAcctgBuTxtPKDAO"   class="TransAcctgBuTxtPKDAO">
        <key-property name="acctgBuId" column="acctg_bu_id"/>
        <key-property name="languageCode" column="language_code"/>
    </composite-id>
    <property name="acctgBuAbbr" type="java.lang.String">
        <column name="acctg_bu_abbr" />
    </property>
    <property name="acctgBuDesc" type="java.lang.String">
        <column name="acctg_bu_desc" />
    </property>
    <many-to-one name="transAcctgBuDAO"  class="TransAcctgBuDAO" not-null="false" 
        insert="false" update="false" not-found="ignore" fetch="select">
        <column name="acctg_bu_id" />
    </many-to-one>
 </class> 
```

**映射**

```
 <many-to-one name="transAcctgBuTxt" class="TransAcctgBuTxtDAO" 
        insert="false" update="false" cascade="all">
              <column name="store_nbr"></column>
  </many-to-one> 
```

**复合键示例**

```
 <one-to-one name="transAcctgBuTxt" class="TransAcctgBuTxtDAO" property-
       ref="transAcctgBuTxtPKDAO.acctgBuId"> 
        <column name = "store_nbr">
 </one-to-one> 
```

**错误**

```
Foreign key (FK47A121BB6617227C:transpo_acct:bhrv_journal [store_nbr])) 
must have same number of columns as the referenced primary 
key (transpo_acct:trans_acctg_bu_txt [acctg_bu_id,language_code]) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:52:42.403

由于 TransAcctgBuTxtDAO 具有 2 列的复合 id，因此您需要提供这两个值来唯一标识一个实体，周期。也许您可以重新考虑 BhrvJournalDAO 和 TransAcctgBuTxtDAO 之间是否真的是多对一的关系。Mabye 它实际上是多对多的。

# c# - 使用 RedGate .Net Reflector 反编译程序集

> ID：15705017
> 
> 赞同：2
> 
> 时间：2013-03-29T14:14:08.020
> 
> 标签：c#, .net

最近我们接到了客户的一个任务。他有一个非常旧的 Web 应用程序（已编译），但他丢失了它的源代码。他想在其中做一点点改变。只需删除几行即可。由于我们只有 dll，我下载了 RedGate 的 .Net Reflector 8 和 Reflexil。但是我们都不知道如何更改 dll 中的代码并将其作为新的 dll 再次保存。我知道它必须非常简单，但我之前从未做过类似的事情。任何帮助将不胜感激。谢谢。

# java - 将图像保存到 Web 应用程序的项目文件夹中

> ID：15705018
> 
> 赞同：0
> 
> 时间：2013-03-29T14:14:11.863
> 
> 标签：java

我需要将图像保存到项目文件夹中。这是一个网络应用程序。我无法弄清楚如何找到要保存图像的文件夹的绝对路径。当我尝试创建空文件夹并获取其绝对路径时，我正在获取 Eclipse 路径。

谁能帮我解决这个问题？

这是我试图保存图像的一些代码：

```
public void saveCustomsLabel(byte[] array, Obj1, String str) throws userException {
    byte[] array2 = null;

    try {

       imageInByte = array;

        OutputStream bos = new ByteArrayOutputStream();
        InputStream bis = new ByteArrayInputStream(imageInByte);
        BufferedImage bImageFromConvert = ImageIO.read(bis);
        File path = new File("Templates/Images/Image.bmp")
        ImageIO.write(bImageFromConvert, "bmp", path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-28T05:50:07.153

也许您应该尝试部署您的项目。在本地机器上，文件转到 eclipse 路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:54:57.207

将文件位置用作“/Templates/Images/Image.bmp”，此位置应位于运行服务器的同一驱动器中（在 Windows 的情况下）。在 linux 上，它将来自根目录。

```
File path = new File("/Templates/Images/Image.bmp") 
```

此[链接](https://stackoverflow.com/questions/10897221/how-to-save-the-the-image-in-folder-on-disk-using-java)可能对您有所帮助

像这样试试

```
File file = new File("/opt/image.png");

    if(!file.exists()) {
        try {
            file.mkdirs();
            file.createNewFile();

            BufferedImage image = new BufferedImage(100,100,1);

             ImageIO.write(image, "JPG", file); 

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

# c++ - 返回函数的 C++ 函数，xmemory 和 xrefwrap 中的错误 C2440、C2100

> ID：15705021
> 
> 赞同：1
> 
> 时间：2013-03-29T14:14:28.647
> 
> 标签：c++, visual-c++, function-pointers

我收到如下错误：

```
Error   24  error C2440: 'initializing' : cannot convert from 'std::_List_const_iterator<_Mylist>' to 'AttrValue'   c:\program files (x86)\microsoft visual studio 10.0\vc\include\xmemory  208
Error   25  error C2100: illegal indirection    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xrefwrap 49
Error   26  error C2296: '.*' : illegal, left operand has type 'AttrValue'  c:\program files (x86)\microsoft visual studio 10.0\vc\include\xrefwrap 49
Error   37  error C2440: 'initializing' : cannot convert from 'std::_List_const_iterator<_Mylist>' to 'AttrValue'   c:\program files (x86)\microsoft visual studio 10.0\vc\include\xmemory  208
Error   38  error C2100: illegal indirection    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xrefwrap 49
Error   39  error C2296: '.*' : illegal, left operand has type 'AttrValue'  c:\program files (x86)\microsoft visual studio 10.0\vc\include\xrefwrap 49 
```

它没有指向我的代码，所以我不知道出了什么问题。但是查看 MSDN 文档，我认为问题可能是由以下原因引起的：

```
function<bool(AttrValue)> QueryEvaluatorPrivate::getClausePredicate(Relation clauseType, int preferedIndex) {
    switch (clauseType) {
    case UsesRelation:
        if (preferedIndex == 0)
            return &QueryEvaluatorPrivate::hasVarsUsed;
        return &QueryEvaluatorPrivate::hasStmtsUsing;
    case UsesPRelation:
        if (preferedIndex == 0)
            return &QueryEvaluatorPrivate::hasVarsUsedInProc;
        return &QueryEvaluatorPrivate::hasProcsUsing;
    }
} 
```

`hasVarsUsed`和其他`has*`函数只是返回 a 的函数`bool`。这有什么问题吗？

**更新**

在@Cameron 的评论之后，在输出窗口中是**[output](http://pastie.org/7161975)**。我认为违规行是`output.insert(x)`（最后一行）：

```
 ... 
    function<bool(AttrValue)> clausePredicate = getClausePredicate(cl.type, prefered);
    unordered_set<AttrValue> output;
    if (prefered == pos) {
        for (auto x = input.begin(); x != input.end(); ++x) 
            if (clausePredicate(*x)) 
                output.insert(x);
    ... 
```

但那有什么问题呢？也许我看错地方了？

**更新 2**

修复了第一个问题`output.insert(x)`应该是`output.insert(*x)`......但我有

```
Error   6   error C2100: illegal indirection    c:\program files (x86)\microsoft visual studio 10.0\vc\include\xrefwrap 49 
```

我认为违规行是：

```
return &QueryEvaluatorPrivate::hasVarsUsed; 
```

我可能错误地返回函数？

```
// function declaration
bool QueryEvaluatorPrivate::hasVarsUsed(StmtNum s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:31:03.130

x = input.begin() -> 看起来 x 是某种迭代器

也许你应该这样做：

```
output.insert(*x) 
```

代替

```
output.insert(x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:04:37.817

看起来您正在尝试使用具有错误签名的函数，可能`StmtNum`是因为派生类是`AttrValue`? 下面是一个例子来解释：

```
#include <functional>

struct A {};
struct B : A {};

void fa( A ) {}
void fb( B ) {}

int main()
{
  std::function<void(A)> f1( &fa ); // OK
  std::function<void(A)> f2( &fb ); // fails
} 
```

在您的代码中，我看到`function<bool(AttrValue)>`了，但功能是

```
bool QueryEvaluatorPrivate::hasVarsUsed(StmtNum s); 
```

此外，此函数必须是静态的，因为在传递指向它们的指针时，您不能简单地将自由（或静态）函数与成员函数混合使用。

# vim - VIM GTK-UI 字体

> ID：15705022
> 
> 赞同：6
> 
> 时间：2013-03-29T14:14:32.943
> 
> 标签：vim, fonts

vim 手册指出：

```
 On systems where 'guifontset' is supported (X11) and 'guifontset' is
not empty, then 'guifont' is not used.

Spaces after a comma are ignored.  To include a comma in a font name
precede it with a backslash.  Setting an option requires an extra
backslash before a space and a backslash.  See also
|option-backslash|.  For example: >
    :set guifont=Screen15,\ 7x13,font\\,with\\,commas
will make Vim try to use the font "Screen15" first, and if it fails it
will try to use "7x13" and then "font,with,commas" instead. 
```

所以，我想做以下事情：

```
if has("gui_running")
  if has("gui_gtk2")
       set guifont=Droid\ Sans\ Mono,Inconsolata,Monospace
  elseif has("gui_win32")
    set guifont=Droid\ Sans\ Mono:h10,Consolas:h11:cANSI
  endif
endif 
```

麻烦的是它对我不起作用...我已经在 CentOS6.3 和 Debian Wheey 上尝试了几个小时，但是当我像这样编写这个命令时，VIM 只会以 Sans 字体开始。难道我做错了什么？您如何巧妙地检测系统上有哪些字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:13:50.277

好的，我知道这可能不是正确的方法，但它确实有效。所以，这是我为 VIM-GTK 设置后备字体的方法：

```
if has("gui_running")
   if has("gui_gtk2")
        let dsm=system('fc-list | grep -c Droid\ Sans\ Mono')
        let cons=system('fc-list | grep -c Inconsola')
        if ( dsm > 0)
           set gfn=Droid\ Sans\ Mono\ 10
        elseif ( cons > 0)
           set gfn=Inconsolata\ 12
        else 
           set gfn=Monospace\ 10
        endif
   elseif has("gui_win32")
      set guifont=Droid\ Sans\ Mono:h10,Consolas:h11:cANSI
   endif
endif 
```

此代码段将检查是否`Droid Sans Mono`已安装，以及是否`Inconsolata`已安装。如果第一个是安装的，UI 字体会是`Droid Sans Mono`，否则会被设置为`Inconsolata`，最后会被设置为`Monospace`。在 Windows 7 上，逗号分隔的列表可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-11T13:35:22.430

I ran into the same issue. The problem here is that when Vim calls `gui_init_font` ([code](https://github.com/vim/vim/blame/071d4279d6ab81b7187b48f3a0fc61e587b6db6c/src/gui.c#L623)) it expects if `gui_mch_get_font` ([code](https://github.com/vim/vim/blame/071d4279d6ab81b7187b48f3a0fc61e587b6db6c/src/gui_gtk_x11.c#L4678)) fails it can move on to the next font in the comma-separated list. But in GTK `gui_mch_get_font` calls `pango_font_description_from_string` ([code](https://github.com/vim/vim/blame/071d4279d6ab81b7187b48f3a0fc61e587b6db6c/src/gui_gtk_x11.c#L4658)) which will never fail, it'll just return a default.

But `pango_font_description_from_string` itself takes a comma-separated list of families followed by style options, size and variations and has its own fallback logic ([doc](https://developer.gnome.org/pango/stable/pango-Fonts.html#pango-font-description-from-string)) withe the following format: `[FAMILY-LIST] [STYLE-OPTIONS] [SIZE] [VARIATIONS]`. Thus escape your list as follows:

```
if has("gui_running")
  if has("gui_gtk2") || has("gui_gtk3")
    set guifont=Droid\ Sans\ Mono\\,Inconsolata\\,Monospace 10
  elseif has("gui_win32")
    set guifont=Droid\ Sans\ Mono:h10,Consolas:h11:cANSI
  endif
endif 
```

Then Pango will do the fallback work and pick the right font for you. On GTK it seems to be best to fully escape your string and let GTK do the logic.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T17:52:35.207

我要么未能将[Oz123 的答案](https://stackoverflow.com/a/15706027/519360)正确抽象为函数，要么无法在我的系统上运行。由于实际使用了两个用户（一个沙盒网络用户和我的主帐户），我遇到了其他问题；执行时出现问题`fc-list`）。

我的解决方法是重新分配 Monospace 字体的别名，**这会影响我的所有应用程序**（如果您只希望它在 gvim 中工作，请不要使用此技术）。

这种变化进入`~/.config/fontconfig/fonts.conf`：

```
<?xml version='1.0'?>
<!DOCTYPE fontconfig SYSTEM 'fonts.dtd'>
<fontconfig>
  <alias>
    <family>monospace</family>
    <prefer><family>Panic Sans</family></prefer>
  </alias>
</fontconfig> 
```

我选择了[Panic Sans](http://blog.cbowns.com/2007/11/panic-sans-a-monospaced-font/)（[这里非官方托管](https://github.com/chrissimpkins/codeface/tree/master/fonts/panic-sans)），它是一种[非常流行](https://www.slant.co/topics/67/viewpoints/4/~best-programming-fonts~dejavu-sans-mono)的免费[DejaVu Sans Mono](https://en.wikipedia.org/wiki/DejaVu_fonts)字体的变体，因为它特别擅长渲染代码（它还解决了 DejaVu 中的下划线和破折号问题）。字体文件本身位于我的`~/.fonts/Panic_Sans`目录中。

以这种方式安装它可以让我`~/.vimrc`在系统之间共享我的，而不必担心是否在它们上安装了 Panic Sans。

这意味着 my `~/.vimrc`now 仅包含：

```
if has("gui_running")
  if has("gui_gtk2")
    set guifont=Monospace\ 7
  endif
  " … 
```

这是因为 fontconfig 别名正确地将 Monospace 与 Panic Sans 匹配：

```
$ fc-match Monospace
PanicSans.ttf: "Panic Sans" "Regular" 
```

# django - 当 Debug=False 时，Django 应用程序总是返回 404

> ID：15705024
> 
> 赞同：1
> 
> 时间：2013-03-29T14:14:40.383
> 
> 标签：django, django-1.4

我正在尝试部署一个 django 应用程序，它基本上是托管在我的服务器中的[readthedocs实例。](http://readthedocs.org)根据文档建议，它配置为 gunicorn + nginx，但我发现了一个小问题：无论我在 URL 中输入什么，应用程序都会**始终返回 404 错误。**我尝试了一些实验，我发现如果我设置`DEBUG = True`，`settings.py`那么一切正常。我找不到任何给我相关信息的日志文件，到目前为止我搜索的所有内容都表明问题通常出在**静态文件**上，而不是模块上。我的问题是整个模块。

如何检查应用程序出了什么问题？我应该从哪里开始？

这是相关的配置文件：

```
import os
import djcelery
djcelery.setup_loader()

_ = gettext = lambda s: s

DEBUG = False
TEMPLATE_DEBUG = DEBUG
TASTYPIE_FULL_DEBUG = True

PRODUCTION_DOMAIN = 'readthedocs.org'
USE_SUBDOMAIN = False

ADMINS = (
    ('Charlie Leifer', 'coleifer@gmail.com'),
    ('Eric Holscher', 'eric@ericholscher.com'),
)

MANAGERS = ADMINS

SITE_ROOT = '/'.join(os.path.dirname(__file__).split('/')[0:-2])
DOCROOT = os.path.join(SITE_ROOT, 'user_builds')
UPLOAD_ROOT = os.path.join(SITE_ROOT, 'user_uploads')
CNAME_ROOT = os.path.join(SITE_ROOT, 'cnames')
LOGS_ROOT = os.path.join(SITE_ROOT, 'logs')

MEDIA_ROOT = '%s/media/' % (SITE_ROOT)
MEDIA_URL = '/media/'
ADMIN_MEDIA_PREFIX = '/media/admin/'
# For 1.4
STATIC_ROOT = os.path.join(SITE_ROOT, 'media/static/')
STATIC_URL = '/static/'
#STATICFILES_DIRS = ()
#STATICFILES_FINDERS = ()

CACHES = {
    'default': {
        'BACKEND': 'django.core.cache.backends.dummy.DummyCache',
        'PREFIX': 'docs',
    }
}

CACHE_MIDDLEWARE_SECONDS = 60

LOGIN_REDIRECT_URL = '/dashboard/'
FORCE_WWW = False
#APPEND_SLASH = False

TIME_ZONE = 'America/Chicago'
LANGUAGE_CODE = 'en-us'
LANGUAGES = (
    ('en', gettext('English')),
    ('nb', gettext('Norwegian')),
    ('fr', gettext('French')),
)

USE_I18N = True
USE_L10N = True
SITE_ID = 1
SECRET_KEY = 'asciidick'

ACCOUNT_ACTIVATION_DAYS = 7

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.middleware.common.CommonMiddleware',
    'djangosecure.middleware.SecurityMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'pagination.middleware.PaginationMiddleware',
    # Hack
    'core.underscore_middleware.UnderscoreMiddleware',
    'core.middleware.SubdomainMiddleware',
    #'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware',
)

ROOT_URLCONF = 'urls'

TEMPLATE_DIRS = (
    '%s/readthedocs/templates/' % SITE_ROOT,
)

TEMPLATE_CONTEXT_PROCESSORS = (
    "django.contrib.auth.context_processors.auth",
    "django.core.context_processors.debug",
    "django.core.context_processors.i18n",
    "django.core.context_processors.media",
    "django.core.context_processors.request",
    "core.context_processors.readthedocs_processor",
)

INSTALLED_APPS = [
    'django.contrib.auth',
    'django.contrib.admin',
    'django.contrib.contenttypes',
    'django.contrib.markup',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.staticfiles',

    # third party apps
    'pagination',
    'registration',
    'profiles',
    'taggit',
    'south',
    'basic.flagging',
    'djangosecure',
    'guardian',
    'django_gravatar',

    # Celery bits
    'djcelery',
    'celery_haystack',

    # daniellindsleyrocksdahouse
    'haystack',
    'tastypie',

    # our apps
    'projects',
    'builds',
    'core',
    'rtd_tests',
]

if DEBUG:
    INSTALLED_APPS.append('django_extensions')

#CARROT_BACKEND = "ghettoq.taproot.Database"
CELERY_ALWAYS_EAGER = True
CELERYD_TASK_TIME_LIMIT = 60*60 #60 minutes
CELERY_SEND_TASK_ERROR_EMAILS = True

CELERY_ROUTES = {
        'celery_haystack.tasks.CeleryHaystackSignalHandler': {
            'queue': 'celery_haystack',
        },
        'projects.tasks.fileify': {
            'queue': 'celery_haystack',
        },
}

DEFAULT_FROM_EMAIL = "no-reply@readthedocs.org"
SESSION_COOKIE_DOMAIN = 'readthedocs.org'

HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.simple_backend.SimpleEngine',
    },
}

AUTH_PROFILE_MODULE = "core.UserProfile"
SOUTH_TESTS_MIGRATE = False

ABSOLUTE_URL_OVERRIDES = {
    'auth.user': lambda o: "/profiles/%s/" % o.username
}

INTERNAL_IPS = ('127.0.0.1',)

IMPORT_EXTERNAL_DATA = True

backup_count = 1000
if DEBUG:
    backup_count = 2

# Guardian Settings
GUARDIAN_RAISE_403 = True
ANONYMOUS_USER_ID = -1

# RTD Settings
REPO_LOCK_SECONDS = 30
ALLOW_PRIVATE_REPOS = False

LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'standard': {
            'format' : "[%(asctime)s] %(levelname)s [%(name)s:%(lineno)s] %(message)s",
            'datefmt' : "%d/%b/%Y %H:%M:%S"
        },
    },
    'handlers': {
        'null': {
            'level':'DEBUG',
            'class':'django.utils.log.NullHandler',
        },
        'logfile': {
            'level':'DEBUG',
            'class':'logging.handlers.RotatingFileHandler',
            'filename': os.path.join(LOGS_ROOT, "rtd.log"),
            'maxBytes': 50000,
            'backupCount': backup_count,
            'formatter': 'standard',
        },
        'errorlog': {
            'level':'DEBUG',
            'class':'logging.handlers.RotatingFileHandler',
            'filename': os.path.join(LOGS_ROOT, "rtd.log"),
            'maxBytes': 50000,
            'backupCount': backup_count,
            'formatter': 'standard',
        },
        'db': {
            'level':'DEBUG',
            'class':'logging.handlers.RotatingFileHandler',
            'filename': os.path.join(LOGS_ROOT, "db.log"),
            'maxBytes': 50000,
            'backupCount': backup_count,
            'formatter': 'standard',
        },
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler',
        },
        'console':{
            'level':'DEBUG',
            'class':'logging.StreamHandler',
            'formatter': 'standard'
        },
    },
    'loggers': {
        'django': {
            'handlers':['console', 'errorlog'],
            'propagate': True,
            'level':'WARN',
        },
        'django.db.backends': {
            'handlers': ['db'],
            'level': 'DEBUG',
            'propagate': False,
        },
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': False,
        },
        #Default handler for everything that we're doing. Hopefully this doesn't double-print
        #the Django things as well. Not 100% sure how logging works :)
        '': {
            'handlers': ['console', 'logfile'],
            'level': 'DEBUG',
        },
    }
} 
```

# regex - 在特定文本之后匹配 URL 中的数字序列

> ID：15705029
> 
> 赞同：1
> 
> 时间：2013-03-29T14:14:53.400
> 
> 标签：regex, .htaccess

我正在尝试匹配“job =”之后出现的一系列数字，同时忽略它之前和之后的内容，例如“list.php?job=11534&name”

下面我发布了到目前为止的内容，这似乎对 URL 没有影响。此外，如果规则匹配或无论如何， [L] 是否只会停止重写引擎？

在此先感谢您的帮助。

当前规则：

```
 RewriteEngine On
    RewriteCond %{QUERY_STRING} (?:^|&)job=([^&]+)
    RewriteRule ^([0-9]+)$ /positions/job/$1 [L]

    # Removes index.php from ExpressionEngine URLs
    RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:23:31.103

`RewriteRule ^([0-9]+)$` 将匹配仅包含数字 ( `/4666`) 的请求，此正则表达式应放在 RewriteCond 中，`%1`将引用它，并且尾随 ? 在 rewriterule 中，从新 url 中排除查询字符串（这是你想要的吗？）。

`L`仅当规则匹配时才会停止当前 url 的重写引擎。

```
RewriteCond %{QUERY_STRING} (?:^|&)job=([0-9]+)
RewriteRule ^.+$ /positions/job/%1? [L] 
```

如果您想将用户重定向到新 URL，请将 R 添加到 rewriterule 选项 ( `[L,R=301]`)，

请注意，这些指令会将查询字符串匹配的任何 url 重定向`job=([0-9]+)`到新 url，如果您想将重定向限制为某些请求（如`/folder/list.php?job=qsd&name=qsd`），请务必将它们包含在重写规则中，因此指令将是：

```
RewriteCond %{QUERY_STRING} (?:^|&)job=([0-9]+)
RewriteRule ^folder/list\.php$ /positions/job/%1? [L] 
```

# mysql - Sysdate 作为字符串

> ID：15705030
> 
> 赞同：1
> 
> 时间：2013-03-29T14:14:56.430
> 
> 标签：mysql, jsp, prepared-statement, sysdate

`sysdate()`我正在从 android 设备发送到服务器字符串。问题是代码没有向 mysql 数据库插入任何内容。列`first`是`DATETIME`。我正在使用 mysql 工作台，当我输入`INSERT INTO test (first) VALUES (sysdate());`工作台时，它可以工作。

```
<%
     String t = request.getParameter("time");
            Connection connection = null;
            PreparedStatement pstatement = null;
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            int updateQuery = 0;
            if (t != null) {
                if (t != "" ) {
                    try {
                        connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");
                        Statement st = connection.createStatement();
                        String queryString1 = "INSERT INTO test (first) VALUES (?)";
                        pstatement = connection.prepareStatement(queryString1);
                        pstatement.setString(1, t);
                        updateQuery = pstatement.executeUpdate();
                        if (updateQuery != 0) {
                            response.setStatus(400);
                        }
                    } catch (Exception ex) {
                        out.println(ex);

                    } finally {
                        pstatement.close();
                        connection.close();
                    }
                } 
            } 
        %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:02:39.383

我的 Java 非常生锈，但没有其他人参与，所以我会尝试一下。我记得日期对于 JDBC 来说很棘手。

这是两次尝试，但请注意它们未经测试，因为我现在没有设置来测试它们。

**方法 #1**：将日期作为字符串传递并让 MySQL 对其进行转换。而不是这个你的`INSERT`陈述：

```
String queryString1 = "INSERT INTO test (first) VALUES (?)"; 
```

... 试试这个：

```
String queryString1 = "INSERT INTO test (first) VALUES (str_to_date(?, '%Y-%m-%d %H:%i:%s'))"; 
```

* * *

**方法#2**：使用`PreparedStatement.setDate`而不是`PreparedStatement.setString`. *请注意，这使用您的原始 INSERT 语句，而不是方法 1 中建议的语句*。这意味着将字符串 date 转换`t`为 a`java.util.Date`然后再转换为 a `java.sql.date`。

而不是这个为你的`set`：

```
pstatement.setString(1, t); 
```

... 试试这个：

```
// Change string to java.util.Date
java.util.Date dt = new java.text.SimpleDateFormat(
    "yyyy-MM-dd HH:mm:ss", java.util.Locale.ENGLISH).parse(t);

// Change java.util.Date to java.sql.Date
java.sql.Date sqlDt = new java.sql.Date(dt.getTime());

// Set parameter as a date
pstatement.setDate(1, sqlDt); 
```

# python-2.7 - 从数据框中选择列

> ID：15705032
> 
> 赞同：2
> 
> 时间：2013-03-29T14:14:59.597
> 
> 标签：python-2.7, pandas

我有一个包含许多列的数据框。我想将此数据框减少为一个仅包含我需要的列的数据框。

而不是使用

```
del df['column_name'] 
```

对于我不需要的所有列，有没有办法选择我需要的列并创建一个新的数据框？我试过了：

```
df1['column_name'] = df['column_name'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:17:14.033

您可以选择列表中的列：

```
cols = ['col1', 'col2']
df[cols] 
```

# c# - 允许用户输入以确定 SQL Server 连接字符串

> ID：15705033
> 
> 赞同：0
> 
> 时间：2013-03-29T14:15:00.337
> 
> 标签：c#, sql, sql-server, winforms

由于我正在开发的应用程序需要访问多个服务器，因此我希望允许用户从下拉列表中选择他们希望访问的“站点”，并相应地更新连接字符串。

我有两个想法（伪代码）；

```
IF (drop-down value = Site2)
{string connectionString = "Server=server2; Database=db......"}

ELSE IF(drop-down value = Site3..... 
```

或者;

```
string @server = drop-down value;

string connectionString = "Server=@server; Database=db......"
"pass connection variable??" 
```

这些方法中哪个最好？还是有更有效的选择？

我不确定如何将变量传递给连接字符串（选项 2）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:26:07.270

看看[SqlConnectionStringBuilder 类](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx)。

例如

```
var builder = new SqlConnectionStringBuilder();
builder.DataSource = /* your server here */;
builder.InitialCatalog = "db";
/* etc.... */
var connString = builder.ConnectionString; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:27:45.387

```
 string ConnectionString;
    switch (comboBox1.SelectedIndex)
    {
        case 0:
            ConnectionString = "Data Source=server1;Initial Catalog=database1;User ID=user1;Password=password1";
            break;
        case 1:
            ConnectionString = "Data Source=server2;Initial Catalog=database2;User ID=user1;Password=password2";
            break;
        case 3:
            ConnectionString = "Data Source=server3;Initial Catalog=database3;User ID=user1;Password=password3";
            break;
    }
    SqlConnection Con = new SqlConnection(ConnectionString);
    Con.Open(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:36:43.147

如果您需要“超级动态”，那么 Davio 有正确的选择。

如果您需要“我有 N 个数据库，可能会不时更改”，那么我建议：

以下是典型的 Dot Net 2.0 及以上配置。

```
<connectionStrings>
<add name="EastCoastConnectionString" connectionString="server=server01;database=myDb;uid=myUser;password=myPass;" />
<add name="WestCoastConnectionString" connectionString="server=server02;database=myDb;uid=myUser;password=myPass;" />
</connectionStrings> 
```

然后创建一个自定义配置部分，将“友好名称”映射到连接字符串。

查找此代码： [如何在 ConfigurationSection 中包含简单集合](https://stackoverflow.com/questions/2699047/how-to-include-simple-collections-in-configurationsection/3366402#3366402)

```
 <TransformationToDirectoryMappingsSection>
    <TransformationToDirectoryMappings>
      <add FriendlyName="NY Giants" PickupFolder="EastCoastConnectionString" />
      <add FriendlyName="NE Patriots" PickupFolder="EastCoastConnectionString" />
      <add FriendlyName="Carolina Panthers" PickupFolder="EastCoastConnectionString" />

      <add FriendlyName="San Francisco 49ers" PickupFolder="WestCoastConnectionString" / >
      <add FriendlyName="Seattle Seahawks" PickupFolder="WestCoastConnectionString" />
      <add FriendlyName="Arizona Cardinals" PickupFolder="WestCoastConnectionString" />
    </TransformationToDirectoryMappings>
  </TransformationToDirectoryMappingsSection>
</configuration > 
```

然后用所有“FriendlyName”填充一个下拉框......然后您可以将其映射回连接字符串。

现在，您可以使用连接字符串的名称填充下拉列表......但我不喜欢这个想法......我更喜欢“友好名称”到“实际名称”的映射。

* * *

至少，在您的配置文件中设置连接字符串.....，并使用以下内容填充您的下拉列表：

[http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.connectionstrings.aspx)

```
 ConnectionStringSettingsCollection connections = ConfigurationManager.ConnectionStrings;

    foreach (ConnectionStringSettings connection in connections)
    {
      string name = connection.Name;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:36:58.180

除了使用 SqlConnectionStringBuilder 之外，我还将显示名称和连接字符串包装在表单中的嵌套类中。像这样（在表单/用户控件中）：

```
 private void PopulateComboBox(ComboBox comboBox)
    {
        var items = new[]
            {
                new ConnectionListItem {DisplayName = "Site 1", ConnectionString = new SqlConnectionStringBuilder("Server=...")},
                new ConnectionListItem {DisplayName = "Site 2", ConnectionString = new SqlConnectionStringBuilder("Server=...")},
            };

        comboBox.Items.AddRange(items);

    }

    class ConnectionListItem
    {
        public string DisplayName { get; set; }
        public SqlConnectionStringBuilder ConnectionString { get; set; }

        public override string ToString()
        {
            return DisplayName;
        }
    } 
```

# sql - 我的选择语句有什么问题？

> ID：15705038
> 
> 赞同：0
> 
> 时间：2013-03-29T14:15:21.187
> 
> 标签：sql, oracle

这是问题，请记住我使用的是 SQL developer 3 ....

学生服务部想知道每位教员在向课外学生提供建议时的参与程度。提供教员 ID 列表和教员建议的学生人数。将教师 ID 的输出列命名为“Faculty ID”，将学生计数的输出列命名为“NumStuds”。仅当教员 ID 小于 100 并且学生在姓或名字段中输入了值时才生成输出。按教员 ID 升序显示输出

这就是我得到的...

```
SELECT F_ID AS "Falculty ID" , COUNT S_ID AS "NumStud" FROM student
WHERE ( s_first, s_last, f_id ) IS NOT NULL
AND IS <= 100
ORDER BY F_ID ACD 
```

然后我在命令的第 329 行开始出现错误错误：

```
SELECT F_ID AS "Falculty ID" , COUNT S_ID AS "NumStud" FROM student
WHERE ( s_first, s_last, f_id ) IS NOT NULL
AND IS <= 100
ORDER BY F_ID ACD 
```

> 命令行错误：329 列：42 错误报告：SQL 错误：ORA-00923：在预期的位置找不到 FROM 关键字 00923。00000 -“在预期的位置找不到 FROM 关键字”

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:04:43.890

尝试：

```
SELECT F_ID AS "Faculty ID" , COUNT(S_ID) AS "NumStud" 
FROM student
WHERE COALESCE( s_first, s_last ) IS NOT NULL AND F_ID < 100
GROUP BY F_ID 
ORDER BY F_ID ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:17:06.953

您不能这样做，因为您正在测试*空*值。应该手动测试。

```
SELECT F_ID AS "Falculty ID" , COUNT(S_ID) AS "NumStud" 
FROM student 
WHERE   (
            s_first IS NOT NULL OR 
            s_last IS NOT NULL OR
            f_id  IS NOT NULL
        ) AND IS <= 100 
ORDER BY F_ID ASC 
```

二、应该`ASC`为*升序*不`ACD`

# sql - 两个以上的表使用连接

> ID：15705039
> 
> 赞同：-3
> 
> 时间：2013-03-29T14:15:22.307
> 
> 标签：sql, join

**主表**

```
ID Column1         TableA.fK TableB.fk
1  some-value        1          null
2  some-value        1          1
3  some-value        null       2 
```

**表A**

```
TableA.pk  Column1
1          some-value 
```

**表B**

```
TableB.pk Column1
1         some-value
2         some-value 
```

```
Select  Main.ID,Main.Column1 ,A.Column1,B.Column1
FROM    MainTable main
LEFT JOIN
        Table A
ON      Main.TableA.fk = A.TableA.pk
LEFT JOIN
        TableB b
ON      Main.TableB.fk =B.TableB.fk
WHERE   Main.ID =1 
```

方法

**结果是**

```
 ID  Column1     A.Column1  B.Column1
  1   some-value   some-value  null 
```

**期望输出**

```
 ID    column1         A.Column1
 1     some-value     some-value 
```

**不应显示 B.column1**

当 tableA 外键值不为空时，如果上面使用的 SELECT 查询在此处
使用 RDBMS Microsoft Sql Server 2008 ，它应该从 TableA 获取所有详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:21:05.037

~~我不明白这里的问题。如果您不希望它显示`B.Column1`，请`B.Column1`从您的`Select`声明中删除。~~

~~你现在有~~

~~选择 Main.ID、A.Column1、B.Column1~~

~~将其更改为~~

~~选择 Main.ID、A.Column1~~

根据您在下面的评论，您似乎正在寻找`Coalesce`or `IsNull`，具体取决于您使用的 DBMS（您也没有在问题中告诉我们）。

像这样的东西应该工作：

```
SELECT  
  Main.ID, Coalesce(A.Column1, B.Column1) as Column1
FROM    
  MainTable main
LEFT JOIN
  Table A
ON      
  Main.TableA.fk = A.TableA.pk
LEFT JOIN
  TableB b
ON
  Main.TableB.fk = B.TableB.fk
WHERE   
  Main.ID = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:21:11.147

只是不要将此列放入`SELECT`列表中：

```
SELECT  Main.ID, A.Column1
FROM    MainTable main
LEFT JOIN
        Table A
ON      Main.TableA.fk = A.TableA.pk
LEFT JOIN
        TableB b
ON      Main.TableB.fk = B.TableB.fk
WHERE   Main.ID = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:21:16.710

从查询中删除 B.Column1

```
Select Main.ID,A.Column1 FROM MainTable main LEFT JOIN Table A ON Main.TableA.fk=A.TableA.pk LEFT JOIN TableB b ON Main.TableB.fk =B.TableB.fk WHERE Main.ID =1 
```

# c# - 替代日期时间。现在只有时间 (21:10)

> ID：15705041
> 
> 赞同：0
> 
> 时间：2013-03-29T14:15:26.350
> 
> 标签：c#, datetime

我想知道是否有一种方法或任何东西可以为我提供没有日期的当前系统时间。我需要在公式中使用它，如果我想使用它，我`DateTime.Now`必须先将它转换为.`String.Split``string``Int`

示例：现在是下午 5 点

**我想要**：

```
'17:00', '5:00', '1700', '500' 
```

**不是**：

```
'17:00 PM 29/03/2013' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T14:18:45.370

DateTime 将小时和分钟保存为属性。

```
var now = DateTime.Now;
var minutes = now.Minute;
var hours = now.Hour; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T14:19:23.477

为什么你不能简单地格式化你的日期，即

```
 string CurrentTime = DateTime.Now.ToString("hh:mm:ttt"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:19:02.200

我想您正在寻找的是如何`DateTime`正确格式化 a 。查看[此处](http://www.csharp-examples.net/string-format-datetime/)或[此处](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)了解这是如何完成的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T14:21:59.067

你可以使用`TimeOfDay`. 基本上**它提取 a 的时间部分`DateTime`**：

```
DateTime now = DateTime.Now;
TimeSpan time = now.TimeOfDay; 
```

请注意，与`DateTime.Date`属性不同，它`DateTime.TimeOfDay`返回 a `Timespan`，而不是 a `DateTime`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T14:21:22.290

使用[DateTime.ToString](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)方法：

```
DateTime dt = DateTime.Now; // Suppose it is currently 5pm

dt.ToString("HH:mm"); // 17:00 
dt.ToString("h:mm"); // 5:00 
dt.ToString("HHmm"); // 1700 
dt.ToString("hmm"); // 500 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T14:21:45.707

对于“1700”：

```
date.ToString('HHMM'); 
```

# opengl - 2d 阴影映射

> ID：15705042
> 
> 赞同：3
> 
> 时间：2013-03-29T14:15:33.417
> 
> 标签：opengl, 2d, shadow-mapping

我一直想知道如何用openGL实现它：

![例子](../Images/fb22aaabfacaa558348bd67e90882cb4.png)

1.  我有一张地图，有平坦的地板和墙壁。这里的一切都是 2d 的，没有 3d 几何，只有 2d 组成地图的 poligons。

2.  使用我投射阴影的多边形的顶点来定义可视区域。

3.  阴影定义了视野，但由于有墙壁的单元格挡住了视野，它们也变暗了。我可以在阴影顶部绘制墙壁，但这样做会在视野之外显示均匀的墙壁。

有人建议我用阴影贴图来解决这个问题。我应该将 2D 场景渲染为 4 个不同的 1D 纹理，这些纹理保持到第一个碰撞表面的距离深度。问题是我不知道如何将 2d 场景的投影渲染到 1D 纹理中。例如，如果我使用： gluLookAt (x, y, 0.0, 0.0, x , y+1, 0.0, 0.0, 1.0);

要渲染顶视图，结果仍然是 2D。此外，由于所有顶点都位于同一平面上，因此不会渲染任何内容，因此所有表面都将与相机正交。

您对如何进行这些 2D 到 1D 投影有任何提示或想法吗？我一直在用谷歌搜索像这样的场景，但它们都在 3D 环境中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:39:03.837

阴影贴图假定为定向光或聚光灯，并且您有一个点光源。但是由于您只需要地板上的阴影，您可以将其建模为一个聚光灯，它悬停在地板上方 2 m 处并指向下方。所有墙壁必须至少有 2 m 高。在第一个阴影贴图通道中，您可以将地板和所有墙壁渲染到阴影缓冲区中。

但是，我不会使用阴影贴图，而是使用体积阴影。如果从 3D 转到 2D，则 3D 体积变成 2D 多边形。

假设所有的墙壁都在一个规则的网格上，我们可以计算从玩家位置 P 到墙壁所有角落的视野光线。对于每个角落，存储相邻的墙壁，并忽略所有背对玩家的墙壁。然后将光线从 P 投射到每个角，将光线转换为极坐标，并按角度对它们进行排序，比如逆时针方向。现在以扫动的方式浏览这个排序列表，并构建阴影多边形。

阴影多边形由这个列表中的角点组成，或者由 a) 一条平行于墙壁的线和 b) 一条穿过 P 的线和一个角之间的交点组成。唯一让这有点复杂的是你必须找到接收阴影的墙。由于输入是如此之小，我可能会从蛮力开始（检查每面墙的角落），看看它有多慢。请注意，只有面向玩家的墙壁可以投射阴影。另请注意，离玩家最近的点不需要可见。

一个移动的角色可能看起来真的很酷。

# c# - 将泛型类型参数转换为数组

> ID：15705043
> 
> 赞同：6
> 
> 时间：2013-03-29T14:15:34.743
> 
> 标签：c#, c#-4.0

如果我知道某个泛型类型参数是一个数组，我如何将它转换为一个数组或一个`IEnumerable`以便我可以看到它的项目？例如

```
public class Foo<T>
{
  public T Value { get; set; }

  public void Print()
  {
    if (Value.GetType().IsArray)
      foreach (var item in Value /*How do I cast this to Array or IEnumerable*/)
        Console.WriteLine(item);
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T14:17:39.610

尝试这样的事情：

```
public void Print()
{
    var array = Value as Array;
    if (array != null)
        foreach (var item in array)
            Console.WriteLine(item);
} 
```

[as](http://msdn.microsoft.com/en-us/library/vstudio/cscsdfbt.aspx)关键字：

> as 运算符类似于强制转换操作。但是，如果无法进行转换，则 as 返回 null 而不是引发异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T14:22:57.437

或者你可以限制你的类型参数

```
public class Foo<T> where T : IEnumerable
{
  public T Value { get; set; }

  public void Print()
  {
      foreach (var item in Value)
        Console.WriteLine(item);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T14:17:26.130

尝试

```
foreach (var item in (object []) Value) 
```

但是，由于您只能利用可以枚举的事实，因此`Value`您可能更喜欢

```
var e = Value as IEnumerable;
if (e == null) return;
foreach (var item in e) Console.WriteLine (item); 
```

这改进了封装，并且在您切换时无需更改代码，例如从数组切换到列表。

# javascript - phonegap 每次运行后都会更改错误类型

> ID：15705045
> 
> 赞同：0
> 
> 时间：2013-03-29T14:15:39.710
> 
> 标签：javascript, html, cordova

为什么每次编译后电话间隙更改错误。有时它运行时没有任何错误，然后相同的代码会给出愚蠢的错误，例如尽管没有对代码进行任何更改，但找不到函数的解析错误。

这是在每次编译时给出不同错误的代码

* * *

```
 <html>
<head>
<link href="index.css" rel="stylesheet" type="text/css">
<link href="wrapper.css" rel="stylesheet" type="text/css">
<link href="natiweb.css" rel="stylesheet" type="text/css">
    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
    <script src="jquery.mobile/jquery-1.7.2.min.js"></script>
    <script src="jquery.mobile/jquery.mobile-1.1.0.min.js"></script>

<script type="text/javascript" charset="utf-8"> 
function loadcontact()
{
    alert('load');
    //  navigator.contacts.find("*",contactSuccess, contactError);
    // find all contacts with 'Bob' in any name field
    var options = new ContactFindOptions();
    options.filter="Bob";
    options.multiple=true; 
    var fields = ["displayName", "name"];
**navigator.contacts.find(fields, contactSuccess onError, options);**
    window.location = "download.html";
}

function contactSuccess(contacts)
{
    alert('success');
        for (var i=0; i<contacts.length; i++) 
        {
            console.log("Display Name = " + contacts[i].displayName);
        }
}
function contactError(error) 
{
    alert('error');
}

</script>
</head>
<body class="index">
<p></p>
<h1 class="natiweb">NatiWeb</h1>
<form name ="choicepage" id="wrapper" >
<table id="wrapper" >
<tr><td>
<table align="center">
<tr></tr>

<p><b>Select Upload/Download</b></p>
<select name="upload/download">
<option selected >Upload</option>
<option>Download</option>
</select>
</td>
</tr>
<tr>
<td><img src="images/contact-icon.png" height="15"> Contacts </td>
<td><input name="opt" type="checkbox" value="Contacts"></td>
</tr>

<tr>
<td><input type="button" value="Back"></td>
<td><input type="submit" value="Next1" onclick="loadcontact();"></td>
</tr>
</table>
</table>
</form>
</body>
</html> 
```

* * *

错误 1:SyntaxError: Parse error at file:///android_asset/www/choice.html:22 这里第 22 行标记为粗体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:32:30.437

您在该行缺少逗号。

还有一件事，您应该在收到成功/错误回调之后重定向用户，而不是之前。

```
function loadcontact()
{
    alert('load');
    //  navigator.contacts.find("*",contactSuccess, contactError);
    // find all contacts with 'Bob' in any name field
    var options = new ContactFindOptions();
    options.filter="Bob";
    options.multiple=true; 
    var fields = ["displayName", "name"];
    navigator.contacts.find(fields, contactSuccess, onError, options);

}

function contactSuccess(contacts)
{
    alert('success');
        for (var i=0; i<contacts.length; i++) 
        {
            console.log("Display Name = " + contacts[i].displayName);
        }
    window.location = "download.html";
}
function contactError(error) 
{
    alert('error');
    window.location = "download.html";
} 
```

# silverlight - Silverlight 5 域模型事件处理程序被增量调用

> ID：15705046
> 
> 赞同：0
> 
> 时间：2013-03-29T14:15:48.297
> 
> 标签：silverlight, events, event-handling, domain-model

好的...下一个问题。我正在使用 Silverlight 5 `C#`2012 并且已经到了可以使用一点帮助的地步。我正在使用域模型调用方法来返回信息，我发现如果我多次点击同一个按钮，方法调用会逐渐发生。第一次点击一次，第二次点击两次，第三次点击三次，以此类推。

请查看下面的简单代码，如果您能提供任何关于为什么会发生这种情况的见解，我将不胜感激。

在服务层：

界面：

```
[OperationContract]
string GetEnteredString(string strText); 
```

班级：

```
public string GetEnteredString(string strText)
{
    return "You entered: " + strText;
} 
```

在 Silverlight 应用程序中：

```
private void btnGetText_Click(object sender, RoutedEventArgs e)
{
    service.GetEnteredStringCompleted += new EventHandler<CARE_WCF.GetEnteredStringCompletedEventArgs>(service_GetEnteredStringCompleted);
    service.GetEnteredStringAsync(txtTester.Text);
}

private void service_GetEnteredStringCompleted(object sender, CARE_WCF.GetEnteredStringCompletedEventArgs e)
{
    MessageBox.Show(e.Result.ToString());       
} 
```

乍一看，这似乎很直接，但对 GetEnteredString 方法的调用只是不断堆叠在自身之上。我认为这是因为 Click 事件中的 += 但我可能是错的。

提前感谢您的任何见解！对此，我真的非常感激。埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:47:43.113

您必须取消订阅 Completed 函数中的事件，例如：

```
service.GetEnteredStringCompleted -= service_GetEnteredStringCompleted; 
```

# javascript - Connect to standard socket using WebSocket

> ID：15705049
> 
> 赞同：6
> 
> 时间：2013-03-29T14:15:52.640
> 
> 标签：javascript, html, google-chrome, websocket

I have a client interface to a hardware device that communicates over a standard TCP socket. Is it possible to connect to this using WebSocket in a browser like Chrome? Here's the code I am using to connect:

```
var ws = new WebSocket("ws://127.0.0.1:13854");
ws.onopen = function() ... 
```

The client just fails so far on the first line. Is the problem that WebSockets use their own protocol which a standard local socket would be unfamiliar with? I have tried specifying other protocols ('http://...' and 'tcp://...') but this has not worked.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T14:14:36.100

正如[thejh](https://stackoverflow.com/users/492364/thejh)已经解释的那样，WebSockets 不会在您提供数据时传输数据，而是向数据流添加框架和掩码。因此，不可能使用 websocket 与未实现 WebSocket 协议的应用程序进行通信。

But there is a workaround: A [Websockify](https://github.com/kanaka/websockify) server can be used as a proxy to bridge between a websocket client and a non-websocket server. The client doesn't communicate with the application directly, but with a websockify server instead. Websockify unpacks the Websocket data stream and relays it to the server. The response from the server is then packed into WebSocket frames and sent to the client.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T14:19:35.963

Web Sockets 使用一种特殊的协议。例如，任何 websocket 连接都以 HTTP 连接开始，并在双方同意通过 HTTP 更改为 websocket 协议后更改为 websocket 连接。抱歉，您不能使用 websocket 与任意 TCP 服务器通信。如果您想做类似的事情，您可能必须使用 Flash 或 Java 小程序。

# java - 在两个 internalFrames 中打开一个图像，将一个更改为灰度

> ID：15705053
> 
> 赞同：0
> 
> 时间：2013-03-29T14:16:03.793
> 
> 标签：java, swing, desktop-application, jinternalframe, grayscale

我创建了一个桌面应用程序，我可以在其中打开相同的图像在两个`internalFrame`s 中。我需要在应用程序中将其中一张图像更改为灰度。

我的尝试如下所示。当我单击文件菜单中的按钮时，我需要一张内部帧图像作为原始图像，另一张是灰度图像。

```
GuiPanelImage(File fileName) {
     width = GuiPanelImage.WINDOW_WIDTH;

     height = GuiPanelImage.WINDOW_HEIGHT;

    try {
        BufferedImage inputImage = ImageIO.read(fileName); 

        outputImage = new BufferedImage(inputImage.getWidth(),
          inputImage.getHeight(), BufferedImage.TYPE_INT_ARGB);
// I can replace .TYPE_INT_ARGB with .TYPE_BYTE_GRAY to convert to grayscale

        picture = new ImageIcon(fileName.getPath());

        Graphics2D g2d = ( Graphics2D) outputImage.createGraphics();

        g2d.drawImage(inputImage, 0, 0, null); 
    } 
    catch (IOException ex) {
        Logger.getLogger(GuiPanelImage.class.getName()).log(Level.SEVERE,
          null, ex);
    }             
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:23:05.010

为什么你不能只做以下事情？

```
outputImage1 = new BufferedImage(inputImage.getWidth(), inputImage.getHeight(), BufferedImage.TYPE_INT_ARGB);
outputImage2 = new BufferedImage(inputImage.getWidth(), inputImage.getHeight(), BufferedImage.TYPE_BYTE_GRAY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:30:50.043

[`PictureFrame`](https://stackoverflow.com/a/8090328/230513)说明如何在`JInternalFrame`.

![内部框架](../Images/fd0bc25e46539257ae514b2d6e6b3e38.png)

[`ColorConvertOp`](http://docs.oracle.com/javase/7/docs/api/java/awt/image/ColorConvertOp.html)[在这里](https://stackoverflow.com/a/12228640/230513)进行了说明，并与此处的禁用图像进行了[比较](https://stackoverflow.com/a/14360103/230513)。

![灰色图标](../Images/d5b31743d3c340437df9eb70123bfafd.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:06:28.380

尝试使用光栅函数扫描输入并为其创建和输出目录

# ruby-on-rails - Ruby + Action Web 服务 + SOAP

> ID：15705055
> 
> 赞同：0
> 
> 时间：2013-03-29T14:16:07.137
> 
> 标签：ruby-on-rails, ruby, soap, actionwebservice

我的任务是使用 AWS 和 SOAP 开发 Web 服务。但是现在这两个似乎都被弃用了。我只找到了一份符合我要求的指南 - [http://www.ibm.com/developerworks/opensource/library/os-ws-rubyrails/index.html](http://www.ibm.com/developerworks/opensource/library/os-ws-rubyrails/index.html)，但它是在 2008 年编写的，从那时起情况发生了很大变化.

那么谁能给我一个包含 AWS 和 SOAP 的教程的链接？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T10:12:43.557

好的，所以我想出了这个问题，这就是答案：您需要降级到 Rails 1.xx 并按照教程进行操作。不幸的是，我在这个月的搜索中没有找到关于 AWS 在 Rails 2 或 Rails 3 上工作的结果。

# word-wrap - LyX 的自动换行

> ID：15705058
> 
> 赞同：0
> 
> 时间：2013-03-29T14:16:13.827
> 
> 标签：word-wrap, lyx

有人知道 LyX 源代码的哪一部分与 CJK 语言的自动换行有关吗？似乎这个[错误/缺陷](http://www.lyx.org/trac/ticket/4635)已被识别超过 5 年，但仍未解决。想知道我是否可以自己修复它，但被困在查找自动换行的源文件中......

# php - 即使 strlen 在可接受的范围内，此正则表达式也会切断字符串中的最后一个单词

> ID：15705059
> 
> 赞同：2
> 
> 时间：2013-03-29T14:16:17.010
> 
> 标签：php, regex, preg-replace, substr

```
$theExcerpt = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis'

$theExcerptAppend = (strlen($theExcerpt) > 156) ? '...' : '';
$theExcerpt = preg_replace('/\s+?(\S+)?$/', '', substr($theExcerpt, 0, 156));
$theExcerpt .= $theExcerptAppend; 
```

只要输入短语长度超过 156 个字符，脚本就可以正常工作。但是，当长度小于 156 时（就像这里的 154 一样），被丢弃的最后一个单词，即使包括单词在内的字符串仍然小于 156。

**注意**：我不希望字符串在单词中间终止，但是如果包含的单词不超过strlen值156，则应该包含。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:31:51.717

使用`substr`和`strrpos`

```
if (strlen($theExcerpt) > 156) {
    $theExceprt = substr($theExcerpt, 0, 156);
    $theExcerpt = substr($theExcerpt, 0, strrpos($theExcerpt, ' '));        
    $theExcerpt .= '...';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:27:16.427

我认为有人发布了指向副本的链接。接受的解决方案是：

```
/^.{1,156}\b/ 
```

现在，这总是少于 156 个字符。如果第 156 个字符在一个单词的中间，它将剪切最后一个单词。但是，可以进行一些更改以产生相反的效果。

注意：只需使用此正则表达式将 preg_match 应用于您的字符串。

**编辑：**
相反的效果（超过 156 个字符才能得到最后一个字）：

```
/^.{1,155}(.)?(?(1).*?\b)/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:23:06.087

怎么样 ：

```
$theExcerpt = preg_replace('/(?=.{156})\s+?(\S+)?$/', '', substr($theExcerpt, 0, 156)); 
```

仅当句子长度超过 156 个字符时才会处理该句子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:26:28.677

尝试以下操作：

```
$string = 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus egestas, lacus non dapibus placerat, justo mi adipiscing libero, id ultrices neque metus nec lorem. Quisque vitae dui facilisis ligula tristique dapibus. Ut egestas ligula in tortor facilisis pharetra id vitae eros. Donec commodo laoreet nisi porttitor tincidunt. Donec tortor enim, pharetra in accumsan sit amet, scelerisque ac massa. Morbi massa erat, mattis non faucibus a, feugiat imperdiet lectus. Praesent tincidunt libero id enim cursus non sagittis nisl accumsan. Maecenas massa lorem, consectetur ut rhoncus ac, ullamcorper a tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque sit amet eros.';

$limit = 156;
$output = preg_replace('/^(.{'.$limit.'})(\S|\s|\w+)(.*)/', '$1$2 ...', $string);

echo $output; 
```

# android - ImageButton 在按下和单击事件时更改

> ID：15705062
> 
> 赞同：0
> 
> 时间：2013-03-29T14:16:37.550
> 
> 标签：android, android-imageview

我想在我的 ImageButton 上进行这样的设计......

ImageView1->Pressed->ImageView2->left->ImageView3->pressed->ImageView4->Left->ImageView1

我尝试了专注和按下的各种组合，但没有成功。谁能帮我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:34:05.643

```
img.setOnTouchListener(new OnTouchListener(){
public boolean onTouch(View v, MotionEvent event) {
   if(flag==0){
       switch(event.getAction())
       {
           case MotionEvent.ACTION_DOWN :
             img.setBackgroundResource(R.drawable.Image2);
             break;
           case MotionEvent.ACTION_UP :
             flag=1;
             img.setBackgroundResource(R.drawable.Image3);
             break;
       }
    }else if(flag==1){
         switch(event.getAction())
         {
             case MotionEvent.ACTION_DOWN :
                img.setBackgroundResource(R.drawable.Image4);
                break;
             case MotionEvent.ACTION_UP :
                flag=0;
                img.setBackgroundResource(R.drawable.Image1);
         }
    }
  return false; 
```

} });

# java - 点击图片的一部分找到匹配的图片

> ID：15705063
> 
> 赞同：0
> 
> 时间：2013-03-29T14:16:46.127
> 
> 标签：java, javascript, jquery

我正在寻找一种通过单击图像部分来查找匹配图像（从存储的图像集中）的最佳方法。

例如，如果我有拿着笔的人的图像，如果我单击图像的笔部分，我应该能够从预定义的图像集中检索笔图像，在这种情况下，如果存在，我应该能够检索笔图像。

我愿意知道什么基于 java/javascript 的框架适合这个和最好的方法。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:26:06.503

[区域标签](https://developer.mozilla.org/en-US/docs/HTML/Element/area)是为这样的项目设计的。您可以使用 area 标签指定图像的区域，单击该区域将转到链接或运行 javascript 函数以显示特定图像。这是一个[例子](http://www.suu.edu/campmap/campus.html)。

# css - CSS 选择 ul 的顶层

> ID：15705064
> 
> 赞同：13
> 
> 时间：2013-03-29T14:16:48.410
> 
> 标签：css, css-selectors

`li > ul > li`选择`li`比 a 的第一层更深的所有元素`ul`。

`li`选择所有 li 元素

`li:not(li > ul > li)`应该选择`li`不比 a 的第一级更深的所有元素`ul`——也就是说，只有第一级元素——但它没有。为什么？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T14:26:00.597

原因`li:not(li > ul > li)`不起作用是因为这`li > ul > li`不是一个简单的选择器（正如 Felix Kling 在对您问题的评论中指出的那样）。

获得顶层的最简单方法是给最外层一个类或 id `ul`，然后执行以下操作：

```
.ulClassNameOrID > li {} 
```

但是，以下内容也可以满足您的要求（[请参见小提琴](http://jsfiddle.net/GyLtC/6/)），因为它不会选择任何`ul`前一个的直接子级`li`（因此不是外部列表的子列表）：

```
:not(li) > ul > li {} 
```

# jquery - Select2 - 动态加载数据

> ID：15705074
> 
> 赞同：0
> 
> 时间：2013-03-29T14:17:05.827
> 
> 标签：jquery, jquery-select2

我正在使用**select2**插件。我正在尝试根据第二个选择框从数组区域中“加载”数据。这是我的代码：

```
var regions = [{"first":["City1", "City2"],"second":["City3", "City4"]}];
$('#e2').select2().on('change', function() {
    $.each(regions[($("#e2").val())], function(key,value) {
        $("#e3").append("<option value='"+value+"'>"+value+"</option>");
    });
}).trigger('change'); 
```

编辑：每次更改`#e2`' 值时，我得到的错误是：`Uncaught TypeError: Cannot read property 'length' of undefined`

我究竟做错了什么？

谢谢！:)

编辑2：

```
$('#e2').select2().on('change', function() {
    $.each(region[$("#e2").select2("val")], function(key,value) {
        alert(region[$("#e2").select2("val")]);
        $("#e3").append("<option value='"+value+"'>"+value+"</option>");
    });
}).trigger('change'); 
```

这是建议的......它仍然给出了以前的错误（Uncaught TypeError）。然而，警报返回：未定义

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:21:16.220

这：`$("#e2").val()`应该改为：`$("#e2").select2("val")`

# excel - 如何从一个工作表提交数据以更新单独的工作表？

> ID：15705075
> 
> 赞同：-2
> 
> 时间：2013-03-29T14:17:05.800
> 
> 标签：excel, vba, controls, stock

我正在尝试开发一个库存控制系统（在 Microsoft Excel 2010 上），但我遇到了一个问题，希望有人可以帮助我！

我有一个零件传入工作表和每个存储位置的单独工作表。（其中 5 个）

在零件进货页面上，您输入零件名称、数量、一个复选框以说明该零件的发票是否已添加到会计文件中以及选择零件的存储位置（即存储位置）作为下拉列表可选列表。

**我想在数据输入表（零件传入表）上创建一个提交按钮，该按钮将更新相关工作表（用户选择的存储位置）并将提交的详细信息添加到该工作表。我知道如何添加详细信息（我认为），但我的问题是如何让它将详细信息添加到选定的存储位置/工作表？**

到目前为止，我只真正使用过宏并且对 VBA 的了解相当有限，但我愿意尝试任何你认为可以让它工作的东西。我希望这是有道理的。任何帮助将不胜感激！谢谢托比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:29:47.430

这应该可以帮助您入门，一些简单的示例将单元格值或单元格范围从一张纸转移到另一张纸。

在工作表上创建一个 commandButton，并将此宏附加到它：

```
Sub TransferData() 
    Dim sht1 as Worksheet
    Dim sht2 as Worksheet

    Set sht1 = ThisWorkbook.Sheets("Parts Incoming")  '<-- modify as needed'
    Set sht2 = ThisWOrkbook.Sheets("Storage Location") '<-- modify as needed'

    'Example of placing cell value from B16 on Parts Incoming in the cell A1 on the storage location sheet.'
    sht2.Range("A1") = sht1.Range("B16") 

    'Example of transfering data from a Range of cells to another range of cells on a different worksheet:'
    sht2.Range("A1:A50") = sht1.Range("E50:E100")

    ' you will need to modify or add to this to transfer data from different places '

End Sub 
```

# asp.net-mvc-3 - ASP.NET MVC：调用位于同一项目中的 Web 服务

> ID：15705077
> 
> 赞同：0
> 
> 时间：2013-03-29T14:17:10.707
> 
> 标签：asp.net-mvc-3

我正在开发一个 ASP.NET MVC 应用程序。在同一个项目中，有一个 asmx Web 服务。我被要求创建一个新页面，其中我有调用 Web 服务的按钮。Web 服务调用从其中一个表中删除数据的存储过程。此存储过程位于应用程序连接到的同一数据库中。

我最初的解决方案是简单地绕过 Web 服务调用并简单地调用存储过程，因为它存在于 DMBL 文件中，我可以使用数据上下文来引用它。

但我被告知要确保按钮调用 Web 服务。我发现这更复杂，性能更差。我的方式性能更好，更容易实现。

如果可以选择，你们中的任何一个人会以哪种方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:30:15.033

您必须对项目中的 Web 服务有一个引用。通常您必须添加它，但由于 Web 服务位于同一个项目中，您可能可以跳过添加引用。

获得 Web 服务参考后，您可以这样调用它：

```
protected void ConvertButton_Click(object sender, EventArgs e)
{
    localhost.Convert wsConvert = new localhost.Convert();
    double temperature =
        System.Convert.ToDouble(TemperatureTextbox.Text);
    FahrenheitLabel.Text = "Fahrenheit To Celsius = " +
        wsConvert.FahrenheitToCelsius(temperature).ToString();
    CelsiusLabel.Text = "Celsius To Fahrenheit = " +
        wsConvert.CelsiusToFahrenheit(temperature).ToString();
} 
```

快乐编码。

# visual-studio - 向 ENVDTE.Project 添加属性

> ID：15705080
> 
> 赞同：3
> 
> 时间：2013-03-29T14:17:14.410
> 
> 标签：visual-studio, envdte, visual-studio-sdk

我正在尝试使用 Visual Studio 扩展，该扩展需要添加一个持久化到当前 csproj 文件的属性，如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <MyProperty Condition="$(MyProperty) == '' Or $(MyProperty) == '*Undefined*'">MyPropertyValue</MyProperty> 
```

我有一个 ENVDTE.Project 实例，但似乎无法在 API 中找到任何地方来为项目添加新属性。

我可以通过将其转换为 MSBuild 项目并以这种方式添加属性来解决此问题，但这种方法会导致用户收到提示，提示 csproj 文件已在 IDE 之外进行了修改并要求他们重新加载，这是我不想要的。

如何使用 ENVDTE.Project 实例添加属性，或防止“在环境外修改”提示以其他方式显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:45:50.353

使用 MSBuild 项目解决方法解决了我的问题。

导致用户收到项目文件已更改提示的问题是我在我的 MSBuild 项目对象上调用 .Save()，而不是我的 ENVDTE 项目对象。

# php - 在 laravel 4 上验证指定的图像

> ID：15705086
> 
> 赞同：0
> 
> 时间：2013-03-29T14:17:27.083
> 
> 标签：php, laravel, laravel-4

我如何验证图像（不在 $_FILES 中）

这是行不通的

```
$input = array('image' => 'image.txt');
$rules = array('image' => array('Image'));

$validator = Validator::make($input, $rules);

if($validator->fails()){
    return $validator->messages();
} else {
            return true
    } 
```

总是返回真

有 Laravel 验证图像方法

```
/**
 * Validate the MIME type of a file is an image MIME type.
 *
 * @param  string  $attribute
 * @param  mixed   $value
 * @return bool
 */
protected function validateImage($attribute, $value)
{
    return $this->validateMimes($attribute, $value, array('jpeg', 'png', 'gif', 'bmp'));
}

/**
 * Validate the MIME type of a file upload attribute is in a set of MIME types.
 *
 * @param  string  $attribute
 * @param  array   $value
 * @param  array   $parameters
 * @return bool
 */
protected function validateMimes($attribute, $value, $parameters)
{
    if ( ! $value instanceof File or $value->getPath() == '')
    {
        return true;
    }

    // The Symfony File class should do a decent job of guessing the extension
    // based on the true MIME type so we'll just loop through the array of
    // extensions and compare it to the guessed extension of the files.
    foreach ($parameters as $extension)
    {
        if ($value->guessExtension() == $extension)
        {
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:53:19.493

要验证文件，您必须将`$_FILES['fileName']`数组传递给验证器。

```
$input = array('image' => Input::file('image')); 
```

而且我很确定您的验证规则必须是小写的。

```
$rules = array(
    'image' => 'image'
); 
```

请注意，我已从值中删除了数组。

有关更多信息，请查看[验证文档](http://four.laravel.com/docs/validation#rule-image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T19:59:46.833

还要确保您打开文件的表格！

确保它`enctype="multipart/form-data"`在 from 标记中具有该属性。

# wix - 查询 reg msiexec 静默安装

> ID：15705087
> 
> 赞同：1
> 
> 时间：2013-03-29T14:17:32.270
> 
> 标签：wix, wix3.5, windows-installer

当我们执行 msiexec.exe /i myApp.msi /q

我知道我们最终会进行静默安装，但是安装程序从哪里获得必须填充和安装所需的字段的值。例如，可能有一些字段或参数，如用户名、密码等，我们可能会在常规安装期间从用户那里获得。

在静默安装中，安装程序从输入文件中获取这些信息。这个输入文件存储在哪里？或者它是如何获得这些值的？

我正在尝试进行静默安装并面临问题，因为它为特定属性选择了错误的值......我不知道它是如何选择的。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:39:24.330

您引用的参数在 Windows Installer 中称为“属性”。因此，如果您静默运行，属性将具有其默认值。`Property`如果您在将要使用的元素中指定一个值。如果您有`SetProperty`或其他`CustomAction`元素可以更改属性的值。您还可以在命令行上为安装提供属性，如下所示：

```
msiexec /i path\to\your.msi /q PROPERTY1=value PROPERTY2="my other value" PROPERTY3=2 
```

还需要注意的是，Windows 安装程序不存储在安装过程中更改的属性值。你会想要查看[Remember Property Pattern](http://robmensching.com/blog/posts/2010/5/2/the-wix-toolsets-remember-property-pattern)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:40:09.353

MSI 本身并不使用输入文件来获取值。如果那是您的故事，您必须实施自定义操作才能实现。

通常，您会使用在命令行中传递的安全自定义属性（SecureCustomProperties 属性中列出的公共属性，其中公共属性是所有 CAPS 中的一个。）。

```
msiexec /i foo.msi /qn USERNAME=Bob PASSWORD=1Password 
```

通常，您在 UI 和执行序列中有自定义对话框、控件和自定义操作来处理输入验证。

# c# - HttpClient 和 HttpClientHandler 是否必须在请求之间进行处理？

> ID：15705092
> 
> 赞同：384
> 
> 时间：2013-03-29T14:17:56.770
> 
> 标签：c#, .net-4.5, idisposable, using, dotnet-httpclient

[.NET Framework 4.5 中的System.Net.Http.HttpClient](http://msdn.microsoft.com/en-us/library/hh193681.aspx)和[System.Net.Http.HttpClientHandler](http://msdn.microsoft.com/en-us/library/system.net.http.httpclienthandler.aspx)实现 IDisposable（通过[System.Net.Http.HttpMessageInvoker](http://msdn.microsoft.com/en-us/library/system.net.http.httpmessageinvoker.aspx)）。

`using`声明文件说：

> 通常，当您使用 IDisposable 对象时，您应该在 using 语句中声明和实例化它。

[这个答案](https://stackoverflow.com/a/12374486/376366)使用这种模式：

```
var baseAddress = new Uri("http://example.com");
var cookieContainer = new CookieContainer();
using (var handler = new HttpClientHandler() { CookieContainer = cookieContainer })
using (var client = new HttpClient(handler) { BaseAddress = baseAddress })
{
    var content = new FormUrlEncodedContent(new[]
    {
        new KeyValuePair<string, string>("foo", "bar"),
        new KeyValuePair<string, string>("baz", "bazinga"),
    });
    cookieContainer.Add(baseAddress, new Cookie("CookieName", "cookie_value"));
    var result = client.PostAsync("/test", content).Result;
    result.EnsureSuccessStatusCode();
} 
```

但是微软最明显的例子并没有`Dispose()`显式或隐式调用。例如：

*   宣布发布 HttpClient的[原始博客文章。](http://blogs.msdn.com/b/henrikn/archive/2012/02/16/httpclient-is-here.aspx)
*   HttpClient的实际[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)。
*   [必应翻译示例](http://aspnet.codeplex.com/SourceControl/changeset/view/9cb7243bd9fe3b2df484bf2409af943f39533588#Samples/HttpClient/BingTranslateSample/Program.cs)
*   [谷歌地图示例](http://aspnet.codeplex.com/SourceControl/changeset/view/9cb7243bd9fe3b2df484bf2409af943f39533588#Samples/HttpClient/GoogleMapsSample/Program.cs)
*   [世界银行样本](http://aspnet.codeplex.com/SourceControl/changeset/view/9cb7243bd9fe3b2df484bf2409af943f39533588#Samples/HttpClient/WorldBankSample/Net45/Program.cs)

在[公告](http://blogs.msdn.com/b/henrikn/archive/2012/02/16/httpclient-is-here.aspx)的评论中，有人问微软员工：

> 检查您的示例后，我发现您没有对 HttpClient 实例执行 dispose 操作。我已经在我的应用程序上使用了带有 using 语句的 HttpClient 的所有实例，并且我认为这是正确的方法，因为 HttpClient 实现了 IDisposable 接口。我在正确的道路上吗？

他的回答是：

> 通常这是正确的，尽管您必须小心“使用”和异步，因为它们不会真正混合在 .Net 4 中，在 .Net 4.5 中，您可以在“使用”语句中使用“等待”。
> 
> 顺便说一句，您可以根据自己的喜好多次重复使用相同的 HttpClient，因此通常您不会一直创建/处置它们。

第二段对于这个问题是多余的，它不是关心你可以使用多少次 HttpClient 实例，而是关心在你不再需要它之后是否有必要将其丢弃。

（更新：事实上，第二段是答案的关键，@DPeden 在下面提供。）

所以我的问题是：

1.  考虑到当前的实现（.NET Framework 4.5），是否有必要在 HttpClient 和 HttpClientHandler 实例上调用 Dispose() ？澄清：“必要”是指不处置是否有任何负面后果，例如资源泄漏或数据损坏风险。

2.  如果没有必要，这是否是一个“好习惯”，因为他们实现了 IDisposable？

3.  如果有必要（或推荐），上面提到的[这段代码](https://stackoverflow.com/a/12374486/376366)是否安全地实现它（对于 .NET Framework 4.5）？

4.  如果这些类不需要调用 Dispose()，为什么它们被实现为 IDisposable？

5.  如果他们需要，或者如果这是推荐的做法，Microsoft 示例是否具有误导性或不安全？

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2013-03-29T17:49:38.927

普遍的共识是您不需要（不应该）处理 HttpClient。

许多密切参与其工作方式的人都说过这一点。

请参阅[Darrel Miller 的博客文章](http://www.bizcoder.com/httpclient-it-lives-and-it-is-glorious)和相关的 SO 文章：[HttpClient crawling results in memory leak](https://stackoverflow.com/questions/14075026/httpclient-crawling-results-in-memory-leak)以供参考。

我还强烈建议您阅读[*Designing Evolvable Web APIs with ASP.NET*](http://web.archive.org/web/20180116003143/http://chimera.labs.oreilly.com:80/books/1234000001708/ch14.html)[中的 HttpClient 章节，了解](http://web.archive.org/web/20180116003143/http://chimera.labs.oreilly.com:80/books/1234000001708/ch14.html)*幕后情况，特别是此处引用的“生命周期”部分：*

 *> 尽管 HttpClient 确实间接实现了 IDisposable 接口，但 HttpClient 的标准用法并不是在每次请求后都将其丢弃。只要您的应用程序需要发出 HTTP 请求，HttpClient 对象就会一直存在。让一个对象存在于多个请求中可以设置 DefaultRequestHeaders 并防止您必须在每个请求上重新指定诸如 HttpWebRequest 所必需的 CredentialCache 和 CookieContainer 之类的东西。

甚至打开 DotPeek。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2017-07-06T21:46:03.893

当前的答案有点令人困惑和误导，并且缺少一些重要的 DNS 含义。我将尝试清楚地总结情况。

1.  一般来说，理想情况下，大多数`IDisposable`对象**应该在您使用完它们后进行处置**，尤其是那些[拥有命名/共享操作系统资源](https://blogs.msdn.microsoft.com/kimhamil/2008/11/06/when-to-call-dispose/)的对象。`HttpClient`也不例外，因为正如[Darrel Miller](http://byterot.blogspot.com/2016/07/singleton-httpclient-dns.html?showComment=1472494802315#c4936062004437927573)指出的那样，它分配取消令牌，并且请求/响应主体可以是非托管流。
2.  但是，[HttpClient 的最佳实践是](https://www.asp.net/web-api/overview/advanced/calling-a-web-api-from-a-net-client)您应该创建一个实例并尽可能地重用它（在多线程场景中使用它的[线程安全成员）。](https://www.asp.net/web-api/overview/advanced/calling-a-web-api-from-a-net-client)因此，在大多数情况下**，您永远不会仅仅因为您将一直需要它而丢弃它**。
3.  “永远”重复使用同一个 HttpClient 的问题在于[，无论 DNS 更改如何，底层 HTTP 连接可能对最初的 DNS 解析 IP 保持打开状态](http://byterot.blogspot.co.il/2016/07/singleton-httpclient-dns.html)。**在蓝/绿部署和基于 DNS 的故障转移**等场景中，这可能是一个问题。有多种方法可以解决此问题，最可靠的方法是`Connection:close`在 DNS 更改发生后服务器发送标头。另一种可能性涉及`HttpClient`在客户端回收，定期或通过一些了解 DNS 更改的机制。有关更多信息，请参阅[https://github.com/dotnet/corefx/issues/11224](https://github.com/dotnet/corefx/issues/11224)（我建议在盲目使用链接博客文章中建议的代码之前仔细阅读它）。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-07-08T05:14:41.027

由于似乎没有人在这里提到它，因此在 .NET Core >=2.1 和 .NET 5.0+ 中管理 HttpClient 和 HttpClientHandler 的最佳新方法是使用[HttpClientFactory](https://docs.microsoft.com/en-us/dotnet/standard/microservices-architecture/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests)。

它以一种干净且易于使用的方式解决了大部分上述问题和陷阱。来自[Steve Gordon 的精彩博文](https://www.stevejgordon.co.uk/introduction-to-httpclientfactory-aspnetcore)：

将以下包添加到您的 .Net Core（2.1.1 或更高版本）项目中：

```
Microsoft.AspNetCore.All
Microsoft.Extensions.Http 
```

将此添加到 Startup.cs：

```
services.AddHttpClient(); 
```

注入和使用：

```
[Route("api/[controller]")]
public class ValuesController : Controller
{
    private readonly IHttpClientFactory _httpClientFactory;

    public ValuesController(IHttpClientFactory httpClientFactory)
    {
        _httpClientFactory = httpClientFactory;
    }

    [HttpGet]
    public async Task<ActionResult> Get()
    {
        var client = _httpClientFactory.CreateClient();
        var result = await client.GetStringAsync("http://www.google.com");
        return Ok(result);
    }
} 
```

探索 Steve 博客中的系列文章，了解更多功能。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-29T14:52:09.040

`Dispose()`据我了解，只有在锁定您以后需要的资源（例如特定连接）时才需要调用。始终**建议**释放您不再使用的资源，即使您不再需要它们，仅仅是因为您*通常*不应该持有您不使用的资源（双关语）。

微软的例子不一定是不正确的。当应用程序退出时，所有使用的资源都将被释放。在该示例中，这几乎`HttpClient`是在使用完成后立即发生的。在类似的情况下，显式调用`Dispose()`有点多余。

但是，一般来说，当一个类实现时`IDisposable`，理解是，`Dispose()`一旦你完全准备好并且有能力，就应该立即获取它的实例。我认为在`HttpClient`没有明确记录资源或连接是否被保留/打开的情况下尤其如此。在 [很快] 将再次重用连接的情况下，您会想要放弃`Dipose()`它——在这种情况下，您还没有“完全准备好”。

另请参阅： [IDisposable.Dispose 方法](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)和[何时调用 Dispose](http://blogs.msdn.com/b/kimhamil/archive/2008/11/05/when-to-call-dispose.aspx)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2018-05-31T20:19:22.057

**简短回答：不，当前接受的答案中的陈述不准确**：“普遍的共识是您不需要（不应该）处理 HttpClient”。

**长答案**：以下两个陈述都是真实的并且可以同时实现：

1.  “HttpClient 旨在实例化一次并在应用程序的整个生命周期中重复使用”，引用自[官方文档](https://msdn.microsoft.com/en-us/library/system.net.http.httpclient(v=vs.110).aspx#Remarks)。
2.  `IDisposable`应该/建议处置一个对象。

他们不一定会相互冲突。这只是您如何组织代码以重用`HttpClient`AND 仍然正确处理它的问题。

[从我的另一个答案](https://softwareengineering.stackexchange.com/a/370742)中引用的**更长**的答案：

[在一些博客文章](https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/)中看到人们指责`HttpClient`'s `IDisposable`interface 如何使他们倾向于使用该`using (var client = new HttpClient()) {...}`模式，然后导致耗尽套接字处理程序问题，这并非巧合。

我相信这归结为一个不言而喻的（错误？）概念： [“一个 IDisposable 对象预计是短暂的”](https://softwareengineering.stackexchange.com/questions/330364/correct-way-of-using-httpclient#comment703575_330446)。

然而，当我们以这种风格编写代码时，它看起来确实是一件昙花一现的事情：

```
using (var foo = new SomeDisposableObject())
{
    ...
} 
```

[IDisposable](https://msdn.microsoft.com/en-us/library/system.idisposable(v=vs.110).aspx)的官方文档 从未提到`IDisposable`对象必须是短暂的。根据定义，IDisposable 只是一种允许您释放非托管资源的机制。而已。从这个意义上说，预计您最终会触发处置，但这并不要求您以短暂的方式这样做。

因此，您的工作是根据真实对象的生命周期要求正确选择何时触发处置。没有什么可以阻止您长期使用 IDisposable：

```
using System;
namespace HelloWorld
{
    class Hello
    {
        static void Main()
        {
            Console.WriteLine("Hello World!");

            using (var client = new HttpClient())
            {
                for (...) { ... }  // A really long loop

                // Or you may even somehow start a daemon here

            }

            // Keep the console window open in debug mode.
            Console.WriteLine("Press any key to exit.");
            Console.ReadKey();
        }
    }
} 
```

有了这个新的理解，现在我们重新访问[该博客文章](https://aspnetmonsters.com/2016/08/2016-08-27-httpclientwrong/)，我们可以清楚地注意到“修复”初始化了`HttpClient`一次但从不释放它，这就是为什么我们可以从它的 netstat 输出中看到，连接保持在 ESTABLISHED 状态，这意味着它已经未正确关闭。如果它被关闭，它的状态将改为 TIME_WAIT。实际上，在整个程序结束后仅泄漏一个打开的连接并不是什么大问题，并且博客发布者在修复后仍然看到性能提升；但是，归咎于 IDisposable 并选择不处置它在概念上是不正确的。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-10-26T22:49:51.623

Dispose() 调用下面的代码，关闭由 HttpClient 实例打开的连接。该代码是通过使用 dotPeek 反编译创建的。

HttpClientHandler.cs - 处置

```
ServicePointManager.CloseConnectionGroups(this.connectionGroupName); 
```

如果您不调用 dispose，则由计时器运行的 ServicePointManager.MaxServicePointIdleTime 将关闭 http 连接。默认值为 100 秒。

服务点管理器.cs

```
internal static readonly TimerThread.Callback s_IdleServicePointTimeoutDelegate = new TimerThread.Callback(ServicePointManager.IdleServicePointTimeoutCallback);
private static volatile TimerThread.Queue s_ServicePointIdlingQueue = TimerThread.GetOrCreateQueue(100000);

private static void IdleServicePointTimeoutCallback(TimerThread.Timer timer, int timeNoticed, object context)
{
  ServicePoint servicePoint = (ServicePoint) context;
  if (Logging.On)
    Logging.PrintInfo(Logging.Web, SR.GetString("net_log_closed_idle", (object) "ServicePoint", (object) servicePoint.GetHashCode()));
  lock (ServicePointManager.s_ServicePointTable)
    ServicePointManager.s_ServicePointTable.Remove((object) servicePoint.LookupString);
  servicePoint.ReleaseAllConnectionGroups();
} 
```

如果您没有将空闲时间设置为无限，那么不调用 dispose 并让空闲连接计时器启动并为您关闭连接似乎是安全的，尽管如果您在 using 语句中调用 dispose 会更好你知道你已经完成了一个 HttpClient 实例并更快地释放资源。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-04-26T14:06:31.437

就我而言，我在一个实际执行服务调用的方法中创建了一个 HttpClient 。就像是：

```
public void DoServiceCall() {
  var client = new HttpClient();
  await client.PostAsync();
} 
```

在 Azure 辅助角色中，在反复调用此方法（不释放 HttpClient）后，它最终会失败`SocketException`（连接尝试失败）。

我将 HttpClient 设为实例变量（在类级别处理它），问题就消失了。所以我会说，是的，处置 HttpClient，假设它是安全的（你没有未完成的异步调用）这样做。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-12-26T15:14:07.650

在典型用法（响应<2GB）中，不需要处理 HttpResponseMessages。

如果 HttpClient 方法的流内容未完全读取，则其返回类型应为 Disposed。否则，CLR 无法知道这些流可以关闭，直到它们被垃圾收集。

*   如果您正在将数据读入 byte[]（例如 GetByteArrayAsync）或字符串，则所有数据都会被读取，因此无需处理。
*   其他重载将默认读取最大 2GB 的 Stream（HttpCompletionOption 为 ResponseContentRead，HttpClient.MaxResponseContentBufferSize 默认为 2GB）

如果将 HttpCompletionOption 设置为 ResponseHeadersRead 或响应大于 2GB，则应进行清理。这可以通过在 HttpResponseMessage 上调用 Dispose 或通过在从 HttpResonseMessage 内容获得的 Stream 上调用 Dispose/Close 或通过完全读取内容来完成。

是否在 HttpClient 上调用 Dispose 取决于您是否要取消挂起的请求。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-12-08T20:22:53.343

如果要处理 HttpClient，则可以将其设置为资源池。在您的应用程序结束时，您将处置您的资源池。

代码：

```
// Notice that IDisposable is not implemented here!
public interface HttpClientHandle
{
    HttpRequestHeaders DefaultRequestHeaders { get; }
    Uri BaseAddress { get; set; }
    // ...
    // All the other methods from peeking at HttpClient
}

public class HttpClientHander : HttpClient, HttpClientHandle, IDisposable
{
    public static ConditionalWeakTable<Uri, HttpClientHander> _httpClientsPool;
    public static HashSet<Uri> _uris;

    static HttpClientHander()
    {
        _httpClientsPool = new ConditionalWeakTable<Uri, HttpClientHander>();
        _uris = new HashSet<Uri>();
        SetupGlobalPoolFinalizer();
    }

    private DateTime _delayFinalization = DateTime.MinValue;
    private bool _isDisposed = false;

    public static HttpClientHandle GetHttpClientHandle(Uri baseUrl)
    {
        HttpClientHander httpClient = _httpClientsPool.GetOrCreateValue(baseUrl);
        _uris.Add(baseUrl);
        httpClient._delayFinalization = DateTime.MinValue;
        httpClient.BaseAddress = baseUrl;

        return httpClient;
    }

    void IDisposable.Dispose()
    {
        _isDisposed = true;
        GC.SuppressFinalize(this);

        base.Dispose();
    }

    ~HttpClientHander()
    {
        if (_delayFinalization == DateTime.MinValue)
            _delayFinalization = DateTime.UtcNow;
        if (DateTime.UtcNow.Subtract(_delayFinalization) < base.Timeout)
            GC.ReRegisterForFinalize(this);
    }

    private static void SetupGlobalPoolFinalizer()
    {
        AppDomain.CurrentDomain.ProcessExit +=
            (sender, eventArgs) => { FinalizeGlobalPool(); };
    }

    private static void FinalizeGlobalPool()
    {
        foreach (var key in _uris)
        {
            HttpClientHander value = null;
            if (_httpClientsPool.TryGetValue(key, out value))
                try { value.Dispose(); } catch { }
        }

        _uris.Clear();
        _httpClientsPool = null;
    }
} 
```

var handler = HttpClientHander.GetHttpClientHandle(new Uri("base url")).

*   HttpClient 作为一个接口，不能调用 Dispose()。
*   垃圾收集器将延迟调用 Dispose()。或者当程序通过其析构函数清理对象时。
*   使用弱引用 + 延迟清理逻辑，因此只要经常重用，它就会一直使用。
*   它只为传递给它的每个基本 URL 分配一个新的 HttpClient。Ohad Schneider 解释的原因如下。更改基本网址时的不良行为。
*   HttpClientHandle 允许在测试中模拟

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-05-08T17:37:16.930

在构造函数中使用依赖注入可以`HttpClient`更轻松地管理生命周期 - 将生命周期管理器置于需要它的代码之外，并使其在以后易于更改。

我目前的偏好是创建一个单独的 http 客户端类，该类从**每个目标端点域****继承`HttpClient`**一次，然后使用依赖注入使其成为单例。`public class ExampleHttpClient : HttpClient { ... }`

然后，我在需要访问该 API 的服务类中对自定义 http 客户端进行构造函数依赖。这解决了生命周期问题，并且在连接池方面具有优势。

[您可以在https://stackoverflow.com/a/50238944/3140853](https://stackoverflow.com/a/50238944/3140853)的相关答案中看到一个工作示例

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-15T21:25:16.853

请阅读我对下面发布的一个非常相似的问题的回答。应该清楚的是，您应该将`HttpClient`实例视为单例并跨请求重用。

[在 WebAPI 客户端中每次调用创建一个新的 HttpClient 的开销是多少？](https://stackoverflow.com/questions/22560971/what-is-the-overhead-of-creating-a-new-httpclient-per-call-in-a-webapi-client/35045301#35045301)

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-10-04T12:37:54.087

我认为应该使用单例模式来避免必须创建 HttpClient 的实例并一直关闭它。如果您使用的是 .Net 4.0，您可以使用如下示例代码。有关单例模式检查的更多信息，请[点击此处](http://csharpindepth.com/articles/general/singleton.aspx)。

```
class HttpClientSingletonWrapper : HttpClient
{
    private static readonly Lazy<HttpClientSingletonWrapper> Lazy= new Lazy<HttpClientSingletonWrapper>(()=>new HttpClientSingletonWrapper()); 

    public static HttpClientSingletonWrapper Instance {get { return Lazy.Value; }}

    private HttpClientSingletonWrapper()
    {
    }
} 
```

使用如下代码。

```
var client = HttpClientSingletonWrapper.Instance; 
```*

# javascript - 使用 Javascript 在网页上显示另一台计算机的时间？

> ID：15705097
> 
> 赞同：5
> 
> 时间：2013-03-29T14:18:04.553
> 
> 标签：javascript, jquery, time, setinterval

我正在开发一个对时间非常敏感的 Web 应用程序。给我的业务规则之一是应用程序的行为必须始终取决于 Web 服务器上的时间，而不管客户端时钟上的时间。为了让用户清楚这一点，我被要求在 Web 应用程序中显示服务器的时间。

为此，我编写了以下 Javascript 代码：

```
clock = (function () {
var hours, minutes, seconds;

function setupClock(updateDisplayCallback) {
    getTimeAsync(getTimeCallback);

    function getTimeCallback(p_hours, p_minutes, p_seconds) {
        hours = p_hours;
        minutes = p_minutes;
        seconds = p_seconds;
        setInterval(incrementSecondsAndDisplay, 1000);
    }

    function incrementSecondsAndDisplay() {
        seconds++;
        if (seconds === 60) {
            seconds = 0;
            minutes++;
            if (minutes === 60) {
                minutes = 0;
                hours++;
                if (hours === 24) {
                    hours = 0;
                }
            }
        }
        updateDisplayCallback(hours, minutes, seconds);
    }
}

// a function that makes an AJAX call and invokes callback, passing hours, minutes, and seconds.
function getTimeAsync(callback) {
    $.ajax({
        type: "POST",
        url: "Default.aspx/GetLocalTime",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            var date, serverHours, serverMinutes, serverSeconds;
            date = GetDateFromResponse(response);
            serverHours = date.getHours();
            serverMinutes = date.getMinutes();
            serverSeconds = date.getSeconds();
            callback(serverHours, serverMinutes, serverSeconds);
        }     
    })
}

return {
    setup: setupClock
};
})(); 
```

传入的函数`updateDisplayCallback`是一个在网页上显示日期的简单函数。

基本思想是Javascript进行异步调用以查找服务器的时间，将其存储在客户端上，然后每秒更新一次。

起初，这似乎可行，但随着时间的推移，显示的时间每分钟落后几秒钟。我让它通宵运行，当我第二天早上进来时，它已经关闭了一个多小时！这是完全不可接受的，因为 Web 应用程序可能一次保持打开数天。

如何修改此代码，以便网络浏览器连续准确地显示服务器的时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T14:26:19.863

Javascript 的 setInterval 不够准确，无法让您保持这样的时间。

我的解决方案是：

1.  以毫秒为单位定期获取服务器的时间（不需要非常频繁，因为两个时钟几乎不会偏离那么多）
2.  以毫秒为单位获取客户端时间
3.  计算服务器和客户端之间的时钟偏差（client-server）
4.  通过获取客户端时间并添加时钟偏差来定期更新时钟的显示

编辑：为了更准确，您可以测量服务器请求的往返时间，将其除以 2 并将延迟计入时钟偏差。假设往返行程的持续时间是对称的，这将给出更准确的计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:21:55.393

`setInterval`不是安排时间关键事件的可靠方法。`1000ms`根据当前 JavaScript 的繁忙程度，运行回调可能需要更少或更多时间。

更好的方法是采取更短的间隔并用于`new Date().getTime()`检查是否已经过了一秒。

浏览器允许的最小时间间隔一样高`10`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T16:40:22.093

感谢您的回答。只要它们包含有用的信息，我对这两个答案都投了赞成票。但是，我没有使用任何一个答案中规定的确切答案。

我最终决定的有点不同。

[我在我的个人网页上](http://danielsadventure.info/javascripttime "个人网页")写下了我学到的东西。

首先，我现在明白了，`setInterval(..., 1000)`长时间每秒做一次事情还不够好。但是，以更短的间隔“轮询”时间以寻找第二个更改对我来说似乎效率很低。

我认为跟踪服务器时间和客户端时间之间的“偏移量”确实有意义。

我的最终解决方案是执行以下操作：

(1) 对服务器进行 AJAX 调用以获取时间。该函数还检查客户端时间并计算服务器时间和客户端时间之间的差异，以毫秒为单位。由于网络延迟和其他因素，此初始提取可能会延迟几秒钟。就我的目的而言，这没关系。

(2) 执行一个`tick`函数。每次`tick`执行时，它都会检查自上次`tick`执行以来已经过去了多长时间。它将使用此时间来计算要传递给的参数，`setTimeout`以便时间显示大约每秒更新一次。

(3) 每次`tick`函数计算要显示的时间时，它都会占用客户端时间并加上在步骤 (1) 中计算的差值。这样，我不依赖于客户来正确设置时间，但我确实依赖于客户来准确测量经过的时间。就我的目的而言，这没关系。最重要的是，无论多么`setTimeout`不准确或被其他进程（例如模态对话框）打断，显示的时间都应该始终准确。

# calendar - Cognos 计算两天之间的工作日

> ID：15705102
> 
> 赞同：0
> 
> 时间：2013-03-29T14:18:17.647
> 
> 标签：calendar, cognos-8

在一个包中，我有两个名称空间，其结构如下：

```
NamespaceA -> work_id, start_date, end_date 
NamespaceB -> calender_date, is_holiday 
```

我想计算`start_date`每个`end_date`.`work_id`

我尝试使用如下表达式创建一个新数据项：

```
= 
[calender_date] between [start_date] and [end_date] 
and 
is_holiday = 'N' 
= 
```

上面的表达式返回 true 或 false，表示两个给定日期之间是否有工作日。

但我想要的是两个给定日期之间的工作日数。我尝试在上面使用计数，但它不起作用。

您能否让我知道如何更改上述表达式以产生计数或任何其他方式我可以获得所需的结果（即，使用上述命名空间的每个 work_id 的两个给定日期之间的工作日数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:43:02.290

要计算两个日期之间的工作日，您应该需要使用 DIFFDATE 函数并在 Where 子句中放置您的条件......在这种情况下，您将在两个工作日之间获得所需的工作日。

例如：

SELECT DATEDIFF(day,'start_date','end_date') AS WorkingDays FROM NamespaceA a

INNER JOIN NamespaceB b ON b.calender_date BETWEEN a.start_date AND a.end_date

WHERE
b.[calender_date] 在 a.[start_date] 和 a.[end_date] 和 b.is_holiday = 'N' 之间

# android - 键入时将输入框保持在 android 设备键盘上方

> ID：15705104
> 
> 赞同：3
> 
> 时间：2013-03-29T14:18:26.080
> 
> 标签：android, html, twitter-bootstrap, angularjs

我使用 HTML5、Bootstrap、CSS 和 Angular JS 专门为移动设备创建了一个页面。我试图在页脚处保留一个带有一个输入字段和一个按钮（用于在页面上发布消息）的表单，该页脚使用 CSS 修复 -

```
position: fixed;
right: 0;
bottom: 0;
left: 0;
margin-bottom: 0; 
```

并且此规则适用于表单的包装器 div。

```
<div class="navbar navbar-fixed-bottom">
                <div class="navbar-inner">
                    <div class="row">
                        <a class="pull-right switch-venue" target="blank" ng-href="#" href="#">
                            <img alt="Switch Venue" height="25px" src="images/swithc-venue.png"> 
                        </a>
                        <div class="span12 powered-by">
                            Powered by <img alt="" title="" width="70px" src="images/footer_logo.png">
                        </div>
                    </div>
                </div>
            </div> 
```

但是这里的问题是，当我尝试在我的移动设备三星 Galaxy Y ST5360 上访问页面（带有网址 URL）时，当我尝试在输入文本框中输入一些文本时，出现了 android 设备的键盘，在这后面整个页脚区域（具有输入字段和按钮的表单）正在隐藏。

虽然这在其他一些 Android 设备三星 Galaxy S III 上运行良好，但运行良好，这意味着在输入文本字段中键入时，页脚区域（其中包含表单）没有隐藏在设备键盘后面。

抱歉，如果我无法提供有关该问题的更多说明。请帮助解决这个头发拉扯问题。

提前感谢。

# asp.net - 链接按钮单击事件未在选项卡面板中触发

> ID：15705108
> 
> 赞同：0
> 
> 时间：2013-03-29T14:18:40.817
> 
> 标签：asp.net, modalpopupextender, linkbutton

我在显示 ModalPopupExtender 的选项卡面板上有一个链接按钮。问题是它的 onclick 事件没有被触发。每当单击链接按钮时，都会显示模式弹出窗口（应该会发生），但不会触发单击事件

```
<asp:LinkButton ID="lnkAddNewAddress" runat="server" OnClick="lnkAddNewAddress_Click">Click Here To Add New Address</asp:LinkButton>
                                            <asp:ModalPopupExtender ID="lnkAddNewAddress_ModalPopupExtender" runat="server" BackgroundCssClass="modalBackground"
                                                DynamicServicePath="" Enabled="True" PopupControlID="pnlMyAddressBook" TargetControlID="lnkAddNewAddress"
                                                ViewStateMode="Enabled">
                                            </asp:ModalPopupExtender>

 protected void lnkAddNewAddress_Click(object sender, EventArgs e)
    {
        GetCountryInLightBox();
        GetStateInLightBox();
        //lnkAddNewAddress_ModalPopupExtender.Show();
        ClearTextBoxes();
        ViewState["Click"] = "Add";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:25:30.487

这`asp:ModalPopupExtender`是防止帖子退回 - 否则您永远不会看到弹出窗口打开。

为了能够看到 javascript 弹出窗口，必须保留来自链接的回发操作。如果您让帖子返回发生，并且您的代码运行，您将永远看不到对话框。

# python - 从 python 中的 pandas Series 和 DataFrames 获取字符串？

> ID：15705111
> 
> 赞同：16
> 
> 时间：2013-03-29T14:18:55.607
> 
> 标签：python, pandas

我在熊猫中有这个数据框：

```
d=pandas.DataFrame([{"a": 1, "b": 1}, {"c": 2, "b": 4}])
d["name"] = ["Hello", "World"] 
```

我想根据“名称”列中的字符串值选择一个元素，然后将值作为字符串获取。要选择元素：

```
d[d["name"] == "World"]["name"]
Out:
1    World
Name: name 
```

问题是它没有给出一个简单的字符串，而是一个系列。转换为字符串无济于事——我怎样才能从中`"World"`取出字符串？这是唯一的方法吗？

```
d[d["name"] == "World"]["name"].values[0] 
```

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-12-25T07:38:03.943

有一种没有人提到的方法可能值得注意。这是我在进行多项标准检查并取回单个项目系列（基本上是唯一的行结果）时遇到的问题。如果您在系列中有一个项目并且只需要该项目或知道您要收集的特定项目的索引，只需执行以下操作：

```
d[d["name"] == "World"].tolist()[0] 
```

对于单个项目系列中的第一个（也是唯一一个）项目。

或这个：

```
d[d["name"] == "World"].tolist()[index] 
```

`index`您在系列中查找的项目的索引在哪里。

如果您希望将其作为字符串，如果默认情况下尚未字符串化，则可能必须将其转换为字符串。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-29T15:36:39.647

正如@DSM 指出的那样，通常可能有很多行带有 name `'World'`，所以我们需要在某个地方选择一个。

一种看起来不错的方法是使用`where`（然后[`max`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.max.html)）：

```
In [11]: d.name.where(d.name == 'World', np.nan)
Out[11]: 
0      NaN
1    World
Name: name, dtype: object

In [12]: d.name.where(d.name == 'World', np.nan).max()
Out[12]: 'World' 
```

*注意：如果没有名称为“World”的行，这将返回 NaN。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-12T05:19:25.357

更新：不推荐，因为它会截断长文本，除非使用 pandas > 1.0（未测试）

不确定这适用于哪些版本的 Pandas，但它是另一种选择：

```
d[d["name"] == "World"].to_string(index=False) 
```

如果不止一行，还有其他选项：

```
 max_rows      int, optional 
```

截断前显示的最大行数。如果没有，则显示全部。

```
 min_rows      int, optional 
```

在截断的 repr 中显示的行数（当行数高于 max_rows 时）。

# javascript - Rails：如何编写一个测试来确保几个字段在关闭时隐藏但可见，并且在打开时具有正确的值？

> ID：15705114
> 
> 赞同：0
> 
> 时间：2013-03-29T14:19:02.967
> 
> 标签：javascript, ruby-on-rails, rspec, capybara

我如何编写一个测试来确保几个字段在关闭时隐藏但在打开时可见？

我目前的测试正在通过不应该的地方。正如您在下面看到的，我已经尝试使用 have_field 和 xpath 变体来测试 Capybara。（也尝试了have_css，那里也没有运气。我也在尝试测试可见性，因为测试一直在通过，所以似乎没有测试过。）

我正在做 TDD，所以需要我的测试在通过之前失败，所以我想指出 JavaScript 还没有完成。完成后，需要将“结束时间”字段中显示的时间调整为开始时间 + 2 小时 (@default_finish_time)。目前它只显示与开始时间相同的时间。

因此，“结束时间”字段是否显示 @default_finish_time 的测试应该失败，但不是。有人知道发生了什么吗？

将不胜感激，它目前正在我的脑海中。

```
 describe "toggling the 'Add finish time?' toggle on", :js => true do

            before {
                @default_finish_time = starts.change(:hour => 2)
                click_link "Add finish time?"               
            }

            # Tests to ensure that toggling this on, with only a start date entered, means the 
            # finish date field inherits whatever's in the start date field and the finish time
            # field inherits whatever's in the start time field + 2 hours (default event length).

            it { should have_css("#end_datetime_fields", 
                            visible: true) }

            it { should have_field("End dates", 
                            with: "#{starts.to_formatted_s(:formfield_date)}") }

            it { should have_field("End time", 
                            with: "#{starts.to_formatted_s(:formfield_time)}") }

            it { should have_field("End time", 
                            with: "#{@default_finish_time.to_formatted_s(:formfield_time)}", 
                            visible: true) }

            it { should have_xpath("//input[@value='#{starts.to_formatted_s(:formfield_time)}']") }

            it { should have_xpath("//input[@value='#{starts.change(:hour => 2).to_formatted_s(:formfield_time)}']") } 
```

我的观点：

```
<div class="control-group">
    <div class="controls span12">
        <%  # If JS is enabled, end date & time fields are hidden for progressive-disclosure 
            # purposes and we need a toggle to display them upon user request.
        %>
        <%= link_to("Add finish time?", {}, id: "specify_end_time") %>
    </div>
</div>

<div class="control-group" id="end_datetime_fields">
    <div class="controls span2">
        <%= f.input :end_date_text, as: :string, 
                    :default => @event.end_date_text,
                    :input_html => { class: "date-field" },
                    :label => "End date" %>
    </div>
    <div class="controls span2">
        <%= f.input :end_time_text, as: :string, 
                    :default => @event.end_time_text,
                    :input_html => { class: "time-field" },
                    :label => "End time" %>
    </div>
    <div class="controls span2">
        <%= link_to("Remove finish time", {}, id: "remove_end_time") %>
    </div>
</div> 
```

还有我的 JavaScript：

```
<script>
$(document).ready(function(){

    // Hide end date/time fields by default and display them
    // only on user's request (when an end date or time need to be recorded).
    if ( $("#event_end_date_text").val == "" ) {
        $("#end_datetime_fields").hide();
    }

    $("#specify_end_time").click(function(){
        // Load up fields using data from start date/time fields (if filled out)
        $('#event_end_date_text').val(
            $('#event_start_date_text').val()
        );
        $('#event_end_time_text').val(
            // TODO: Add two hours to it before assigning the value to the field
            $('#event_start_time_text').val()
        );

        // Show fields (ie., show the container they're in)
        $("div#end_datetime_fields").show();

        // Hide toggle
        $("#specify_end_time").hide();

        return false;
    });

    $("#remove_end_time").click(function(){
        // Empty field contents
        $("#event_end_date_text").val("");
        $("#event_end_time_text").val("");

        // Hide fields (ie., hide the container they're in)
        $("div#end_datetime_fields").hide();

        // Show toggle
        $("#specify_end_time").show();

        return false;
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:36:28.137

因为这些更改是受 Javascript 影响的，Capybara/RSpec 将无法获取它们。

如果你想测试 Javascript 逻辑，你会想要研究 Selenium 或 Jasime 之类的东西

# ruby-on-rails-3 - 使用 Rails 的 url 中的参数错误

> ID：15705117
> 
> 赞同：0
> 
> 时间：2013-03-29T14:19:05.120
> 
> 标签：ruby-on-rails-3, params

这是我的网址：`/creations/stock?id=3`

当我点击我的链接时，`creations_stock_path(:id => creation.id)`我有一个错误`Couldn't find Creation with id=stock`。我真的不明白这个问题，我对另一个对象（产品）也有同样的问题，它可以工作。

当我检查我的参数发送的内容时，我有

```
>> params
=> {"id"=>"stock", "action"=>"show", "controller"=>"creations"} 
```

为什么 ？？？在我的控制器中，我写道：

```
def stock
  @creation = Creation.find(params[:id])
end 
```

所以我首先不明白为什么 rails 想要使用 Show 动作以及为什么我的参数是错误的......

任何想法 ？

编辑：我的 routes.rb 文件：

```
get "creations/stock"
get "products/stock" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:28:37.280

该错误意味着`Creation`数据库中没有 id 等于 的记录`params[:id]`。检查您的数据库以查看记录是否存在。此异常在生产模式下运行时或至少在`config.consider_all_requests_local`为 false 时显示 404 页面。

如果您不希望它引发异常，请尝试在未找到记录时`find_by_id`返回。`nil`

# ios - iOS 和 Cocos2d：收到内存不足警告，仅分配 20 MB 且没有其他应用程序运行

> ID：15705121
> 
> 赞同：2
> 
> 时间：2013-03-29T14:19:15.123
> 
> 标签：ios, memory-management, memory-leaks, cocos2d-iphone, low-memory

即使我的应用程序仅分配 20 MB 内存并且显然没有泄漏，我也会收到内存不足警告（见下图）。我想知道这是否是由于我正在使用的某个 iOS 版本（部署目标 iOS 5.0 并在 iPod touch 第 4 代版本 5.0.1 (9A405) 上运行）。

![内存不足警告](../Images/a9cfe281ad934525116e048d7a2c425c.png)

在模拟器中，这似乎没有出现。

有什么建议吗？

编辑：这是我发现但未使用 Cocos2D[的类似问题。](https://stackoverflow.com/questions/13028427/ipad-low-memory-warning-although-no-other-apps-are-running-and-my-app-allocate)迄今为止，这个问题还没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:01:34.767

从屏幕截图中可以清楚地看出，分配显着增加，我会说是 5 倍或更多。这意味着您的应用程序在短时间内使用了 100+ MB 的内存，而大多数时候它可能只使用了 20 MB。

单击其中一个峰值上方的时间图，查看当时的内存使用情况，以及哪些对象使用的内存最多。内存警告可能比峰值稍晚一些，因此不要依赖它们的确切时间，但您可以看到警报发生在内存使用峰值之后不久。

[阅读这篇文章](http://www.learn-cocos2d.com/2012/11/optimize-memory-usage-bundle-size-cocos2d-app/)，了解一些减少内存使用高峰的技巧。像使用 .pvr.ccz 图像文件格式一样，按从大到小的顺序专门加载纹理会有所帮助。避免使用 JPG 图像，它们在加载时会增加大量内存开销（因此加载速度也比其他格式慢很多）。

# linq - “分组依据”如何在 LINQ 中工作？错误“'object'不包含'type'的定义”

> ID：15705125
> 
> 赞同：3
> 
> 时间：2013-03-29T14:19:27.577
> 
> 标签：linq, entity-framework, asp.net-mvc-4

我只是不明白为什么它会起作用。我有这个错误

> “对象”不包含“类型”的定义

这是因为我返回了一个匿名类型：

```
Connection db = new Connection();

public ActionResult Index()
{
    ViewBag.query = from input in db.field
                    where input.ID_FIELD == 1
                    select new 
                    {
                        type = input.FIELD_TYPE
                    };

    return View();
}

 @foreach (var item in ViewBag.query)
 {
     @item.type // Error here: 'object' does not contain a definition for 'type',
 } 
```

所以我添加了一个类来获取类型

```
public class Types
{
    public string type {get; set;}

    // And bla blab bla
} 
```

很好，没问题。但现在我需要一个小组，但我不知道该怎么做。

例如，请参阅此[链接](http://href=%22http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)的示例 2 。正如你所看到的，一切都很好，但在这里他不必指定类型，它工作正常。

以下是我的例子。如何在LINQ中使用*Group By ？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:37:23.057

`group x by x.PropertyName into g`将导致`g`成为`x`具有属性的对象集合，该属性`Key`将返回用于对对象`x.PropertyName`进行分组的值`x`

```
 ViewBag.query = from input in db.field
                        where input.ID_FIELD == 1
                        group input by input.FIELD_TYPE into g
                        select new {
                            FieldType = g.Key,
                            Fields = g
                        }; 
```

# iphone - 使用 AVPlayer 播放时如何静音

> ID：15705127
> 
> 赞同：1
> 
> 时间：2013-03-29T14:19:33.483
> 
> 标签：iphone, ios, objective-c, avaudioplayer, avplayer

我正在使用以下代码播放音频文件。

```
 -(IBAction)hearAudioMessage:(id)sender
{
ChatObject * obj = [chatArray objectAtIndex:rowIndexInt];
 NSString *str=[NSString stringWithFormat:@"http://www.myserver.com/files/%@",obj.voiceFileString];
    self.palyer=[[AVPlayer alloc] initWithURL:[NSURL URLWithString:str]];
    [self.palyer play];
} 
```

现在，我想在播放时静音。

我使用了下面的代码，但是它对我不起作用

```
NSArray *audioTracks = [asset tracksWithMediaType:AVMediaTypeAudio];

NSMutableArray *allAudioParams = [NSMutableArray array];
for (AVAssetTrack *track in audioTracks) {
    AVMutableAudioMixInputParameters *audioInputParams =
    [AVMutableAudioMixInputParameters audioMixInputParameters];
    [audioInputParams setVolume:0.0 atTime:kCMTimeZero];
    [audioInputParams setTrackID:[track trackID]];
    [allAudioParams addObject:audioInputParams];
}
AVMutableAudioMix *audioMix = [AVMutableAudioMix audioMix];
[audioMix setInputParameters:allAudioParams];

AVPlayerItem *playerItem = [AVPlayerItem playerItemWithAsset:asset];
[playerItem setAudioMix:audioMix]; 
```

请提出任何替代方案？或者当我们使用 AVPlayer 播放时如何静音

提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-29T14:44:33.037

使用以下行将您的音频静音

[玩家暂停]；

# asp.net - 质量中心授权之上的 ASP.net 自定义会员资格

> ID：15705130
> 
> 赞同：0
> 
> 时间：2013-03-29T14:19:44.453
> 
> 标签：asp.net, custom-membershipprovider

我对 asp.net 中的授权/会员资格相对较新，所以如果我问任何愚蠢的问题，请原谅。我一直在查看许多示例以在 .net 中实现自定义成员资格提供程序（在 stackoverflow、codeproject、devX 和 www.asp.net 中）并基于此进行编码，但不知何故无法使其正常工作。

我的要求 - 我们的组织大量使用惠普的质量中心（QC），我正在开发一个 asp.net 应用程序，它的登录页面将使用 QC'a API 来验证用户。我还有一个 SQL 数据库，我将在其中存储已注册到我的应用程序的 QC 用户（只需将 QC 用户 ID 存储在 DB 中，而不是密码，就像我说的，密码验证是使用 QC API 完成的）。我的数据库中将有一个用户角色表来定义注册用户的角色。

为什么要使用“会员资格”而不是一些简单的“表单身份验证”——因为也许将来我想解耦 QC 身份验证。
因此，我从第一步开始 - 开发自定义成员资格类（名为 AutoCenterMembershipProvider）和登录页面。我只需要 validateuser 方法。以下是我开始使用的方法：
1\. 向用户询问 QC 用户 ID/密码，用户单击“验证”按钮
2\. 登录页面背后的代码 -“验证”按钮的 onClick 方法 - 检查是否在 SQL 数据库中找到用户并如果找到，则使用 QC API 验证用户 id-password
3\. 登录页面上的第二组控件已启用 - 要求用户选择要登录的 QC 域和项目用户。域和项目下拉列表的选项也可以在验证用户后使用 QC API 获得。用户选择这些并单击登录按钮
4\. 在登录按钮单击 - 调用 Membership.ValidateUser(objQCSession.UserName, objQCSession.Password)。由于用户已经使用 QC api 进行了验证，为简单起见，我只从 Membership.ValidateUser 的自定义实现中返回“true”。然后我调用 -`FormsAuthentication.RedirectFromLoginPage(obj_ACUser.QCSession.UserName, True)`将用户引导到 web.config 中提供的应用程序默认页面 - app_FAs.aspx。

问题是 - 在用户被重定向到 app_FAs.aspx 页面后，它会将用户引导回登录页面。我试图找出错误或丢失的部分。

Web.config 如下所示：

```
<authentication mode="Forms">
  <forms loginUrl="~\Pages\Login.aspx" defaultUrl="App_FAs.aspx"></forms>
</authentication>
<authorization>
  <deny users="?"/>
</authorization>
<membership defaultProvider="AutoCenterMembershipProvider">
  <providers>
    <clear/>
    <add name="AutoCenterMembershipProvider" 
         type="CustomMembership.Models.AutoCenterMembershipProvider"
         enablePasswordRetrieval="false"   enablePasswordReset="false" 
         requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="100"  minRequiredPasswordLength="100"
         minRequiredNonalphanumericCharacters="0" 
         passwordAttemptWindow="100"   applicationName="/" />
  </providers>
</membership> 
```

和 customMembership 类就像：

```
Public Class AutoCenterMembershipProvider
    Inherits System.Web.Security.MembershipProvider

    Public Overrides Function ValidateUser(ByVal username As String, ByVal password As String) As Boolean
        Return True
    End Function 
```

其余所有成员都“未实施”

任何帮助，指向缺失部分的指针，非常感谢错误，在此先感谢

验证按钮点击代码

```
Private Sub btn_Authenticate_Click(ByVal sender as Object, ByVal e As   System.Web.UI.ImageClickEventArgs) Handles btn_Authenticate.click
   objQCSession = Session("QCUserSession")
   If Membership.ValidateUser(objQCSession.UserName, objQCSession.Password) then
     FormaAuthentication.RedirectFromLoginPage(objQCSession.UserName, True)
   End if
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:29:01.227

当前，第二步 -`btn_Authenticate_Click`方法 1 - 只是分配`FormAuthenticationTicket`给 cookie，并将用户重定向到`app_FAs.aspx`页面。它并不真正需要自定义会员提供者的功能。

如果我正确理解你的问题，我会改变这样的逻辑。

1）在为QC验证用户后，`FormAuthenticationTicket`以相同的方法创建。

```
FormsAuthentication.SetAuthCookie("UserName", true|false); 
```

2）`btn_Authenticate_Click`（做某事并）将用户重定向到`app_FAs.aspx`

您甚至不需要自定义成员资格提供程序。如果您想使用自定义成员资格提供程序，您可以在第一步中实施（不是在第二步中）。

# sql-server - Win8 - 部署到 IIS 时，带有 SQL Server DB 的 WCF/Entity Framework 不起作用

> ID：15705139
> 
> 赞同：0
> 
> 时间：2013-03-29T14:20:36.123
> 
> 标签：sql-server, wcf, entity-framework

我有一个与[WCF/Entity Framework 类似的问题，当部署到 IIS 时，外部 SQL Server DB 不起作用，](https://stackoverflow.com/questions/8448160/wcf-entity-framework-with-external-sql-server-db-does-not-work-when-deployed-to)除了这是在 Windows 8 上并且数据库服务器不是远程的。它在同一台机器上，并且没有域。脚本的第一部分有效，但没有用户 IIS APPPOOL\ASP.NET 4.0 帐户。Windows 8 上有像 .NET 4.5 这样的应用程序池，它似乎很喜欢，但这仍然不起作用。我知道这是某种权限问题。任何人都可以帮助编写脚本或答案，这样可以吗？我必须能够使用 EF 创建 WCF 服务。谢谢。

我尝试了第一个主题的修改脚本：

```
USE [master]
GO
CREATE LOGIN [sgentile-hp\sgentile] FROM WINDOWS WITH DEFAULT_DATABASE=[master]
GO
USE [AdventureWorks2012]
GO
CREATE USER [sgentile-hp\sgentile] FOR LOGIN [sgentile-hp\sgentile]
GO
USE [AdventureWorks2012]
GO
EXEC sp_addrolemember N'db_datareader', N'sgentile-hp\sgentile'
GO
USE [AdventureWorks2012]
GO
EXEC sp_addrolemember N'db_datawriter', N'sgentile-hp\sgentile'
GO 
```

这产生了：

```
Msg 15025, Level 16, State 2, Line 1
The server principal 'sgentile-hp\sgentile' already exists.
Msg 15063, Level 16, State 1, Line 1
The login already has an account under a different user name.
Msg 15410, Level 11, State 1, Procedure sp_addrolemember, Line 35
User or role 'sgentile-hp\sgentile' does not exist in this database.
Msg 15410, Level 11, State 1, Procedure sp_addrolemember, Line 35
User or role 'sgentile-hp\sgentile' does not exist in this database. 
```

我还尝试创建一个经过 SQL 身份验证的用户并在连接字符串中使用其名称和密码，但仍然无法正常工作。必须有一种与用户一起运行应用程序池的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:26:41.607

我会采取一些小步骤。首先，您应该在服务器登录名下找到**登录**名 [sgentile-hp\sgentile]（为了清楚起见，在 Management Studio 中进入 Security/Logins 下，您应该在这里找到您的用户）。如果您找到它，“创建登录”语句运行良好。然后在 Management Studio 对象资源管理器中的 AdventureWorks2012 数据库下，进入 Security/Users 下，您应该在其中找到**数据库用户**[sgentile-hp\sgentile]；删除它并运行语句：

```
USE [AdventureWorks2012]
GO
CREATE USER [sgentile-hp\sgentile] FOR LOGIN [sgentile-hp\sgentile]
GO 
```

再次。这应该正确地将服务器登录名映射到数据库中的相应用户。然后，您可以为该用户分配 db_datareader 和 db_datawriter 数据库角色。在 IIS 端，使**windows 用户**[sgentile-hp\sgentile] 成为 IIS_IUSRS 本地组的成员，然后配置您的 IIS 应用程序池以便在该用户的上下文中启动；指定

```
Integrated Security=SSPI 
```

在您的服务的连接字符串中：现在在此应用程序池下运行的 WCF 服务应该能够正确连接到您的数据库。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:09:17.970

我通过添加 SQL Authenticated User 并将该名称和密码放入 web.config 来修复它。错误日志显示“用户 'Indigo' 登录失败。原因：必须更改帐户密码。” 我一改，就成功了！

# exchangewebservices - PHP-EWS 未收到数据消息

> ID：15705141
> 
> 赞同：0
> 
> 时间：2013-03-29T14:20:52.663
> 
> 标签：exchangewebservices, php-ews

我刚刚下载了 PHP-EWS，按照 README 说明安装，然后编写了一个脚本来测试它的功能。当我尝试在浏览器中运行脚本时，我收到以下消息： ![在此处输入图像描述](../Images/008f3f2352d2c548b668f722456e40b8.png)

当我提供我知道无效的登录名时，我收到相同的消息。我似乎正在连接到我的 Exchange 服务器，但它无法识别我提供的凭据。

这是我正在使用的脚本

```
<?php
function __autoload($className)
{
    $className = str_replace('_','/', $className);
    $sFileName = $className . '.php';

    if (file_exists($sFileName) && !class_exists($className))
    {
        require_once $sFileName;
    }
    // If the above if fails, you're program will terminate, there is no way to catch this.
}

include("ExchangeWebServices.php");

$host = "https://myexchange/EWS/Services.wsdl";
$username = "myusername@mydomain.com";
$password = "mypassword";

$ews = new ExchangeWebServices($host, $username, $password);

$request = new EWSType_FindItemType();

$request->ItemShape = new EWSType_ItemResponseShapeType();
$request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::DEFAULT_PROPERTIES;

$request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;

$request->ParentFolderIds = new EWSType_NonEmptyArrayOfBaseFolderIdsType();
$request->ParentFolderIds->DistinguishedFolderId = new EWSType_DistinguishedFolderIdType();
$request->ParentFolderIds->DistinguishedFolderId->Id = EWSType_DistinguishedFolderIdNameType::INBOX;

// sort order
$request->SortOrder = new EWSType_NonEmptyArrayOfFieldOrdersType();
$request->SortOrder->FieldOrder = array();
$order = new EWSType_FieldOrderType();
// sorts mails so that oldest appear first
// more field uri definitions can be found from types.xsd (look for UnindexedFieldURIType)
$order->FieldURI->FieldURI = 'item:DateTimeReceived'; 
$order->Order = 'Ascending'; 
$request->SortOrder->FieldOrder[] = $order;

$response = $ews->FindItem($request);
echo '<pre>'.print_r($response, true).'</pre>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T22:40:51.197

尝试通过以下方式测试您的访问权限：

直接点击服务器 url：https: `YOUREXCHANGESERVER`///EWS/Services.wsdl

应提示您输入凭据。输入凭据后，您将看到 WSDL 定义。如果它没有向您提供类似于以下示例的 WSDL 定义，请与您的管理员核实凭据，或者是否设置了任何防火墙块。

示例（部分回复）：

`<wsdl:definitions targetNamespace="http://schemas.microsoft.com/exchange/services /2006/messages"><wsdl:types><xs:schema><xs:import namespace="http://schemas.microsoft.com/exchange/services/2006/messages" schemaLocation="messages.xsd"/></xs:schema></wsdl:types>`

我在分析 Web 服务时使用的一个很棒的工具是：SmartBear[的 SOAP-UI](http://www.soapui.org)

# javascript - node.js 如何使用 json 对象数组发送响应？

> ID：15705148
> 
> 赞同：0
> 
> 时间：2013-03-29T14:21:04.193
> 
> 标签：javascript, json, node.js, module, pivotaltracker

我想使用`pivotal-node`node.js 的模块返回完成的关键故事数组。

```
app.get('/delivered_stories', function(request, response) {             
  pivotal.useToken("my_token");
  pivotal.getProjects(function (err, data) {
    var project_ids = data.project.map(function(x) { return parseInt(x.id); });
    console.log('Retrived project ids: '.blue + project_ids);

    project_ids.forEach(function(id) {
      pivotal.getStories(id, { filter: "state:finished" }, function(err, story) {
        response.send(story);
      });
    });
    response.end(); // End the JSON array and response.
  });
}); 
```

我做错了什么？以及如何解决？我收到一个错误：

```
http.js:708
    throw new Error('Can\'t set headers after they are sent.');
          ^
Error: Can't set headers after they are sent. 
```

完整代码：[https ://gist.github.com/regedarek/30b2f35e92a7f98f4e20](https://gist.github.com/regedarek/30b2f35e92a7f98f4e20)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:22:20.907

`pivotal.getStories()`是**异步**的。

它的回调（因此）将在您的其余代码（包括）**之后**`response.send()`运行一段时间**`response.end()`**

 **事实上，你根本不应该打电话`response.end()`。`response.send()`为你做。

您也不能`response.send()`多次调用；您需要将所有结果组合到一个数组中并发送。
这并不容易做到；考虑使用 async.js 或 Promise。**

# android - 无法执行 DX - IntelliJ Idea (Android + Maven)

> ID：15705150
> 
> 赞同：0
> 
> 时间：2013-03-29T14:21:10.763
> 
> 标签：android, git, maven, intellij-idea, dex

从**git**导入项目后，它成功下载了所有库。但是当我尝试**重建项目**时，它会抛出这个错误，我在互联网上的任何地方都找不到。

```
Android Dex: [name_of_project] Unable to execute DX
Android Dex: [name_of_project] java.io.FileNotFoundException: C:\Windows\System32\config\systemprofile\.IdeaIC12\system\compile-server\name_of_project\android\intermediate_artifacts\name_of_project\classes.dex (System cant find the specified path.) 
```

我尝试重新安装maven，intellij idea，在系统变量中再次设置所有路径等，重新安装android sdks ...，尝试在IntelliJ Idea 12.0.4中设置一些设置，重写idea.properties中的一些选项等等开，但它仍然会引发此错误。有什么建议么？

我忘了写，当我尝试使用 ,,mvn clean install" 在手机上编译和安装项目时，它可以工作。只有使用 IIdea，它崩溃了。我使用 JDK 1.6，Android 4.2，IIdea 12.0.4，Windows 7 x64 和 Maven 的最后一个版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:36:23.480

您的系统启用了配置文件重定向，并且您受到[Java Bug](http://bugs.sun.com/view_bug.do?bug_id=4787931)的影响。

查看[此 KB 文档](http://intellij-support.jetbrains.com/entries/23348963)以获取解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T10:10:21.183

就我而言，问题出在模块 sdk 版本中。我将它从 2.2 更改为 4.4，问题就解决了。

# jquery - 如何将 Rx.js 订阅与 Jquery Promise 结合起来？

> ID：15705159
> 
> 赞同：0
> 
> 时间：2013-03-29T14:21:34.120
> 
> 标签：jquery, promise, reactive-extensions-js

我使用 Rx.js 和 JqueryPromises 我遇到了一种情况，我调用一个方法来处理由 Rx 发布的事件。但是，此方法返回一个承诺。

```
eventStream.Subscribe(function(e) { methodThatReturnsPromise(e);}); 
```

问题是事件的处理不再是确定性的。由于 methodThatReturnsPromise 在延迟处理时立即返回。

我的问题:) 有没有办法“等待”承诺？Rx 是否有任何钩子来使用承诺，即将返回的订阅承诺链接到下一个返回的订阅承诺，所以消息仍然按顺序处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:48:01.827

这段代码似乎对其他感兴趣的人有用。我只需要链接延迟退货。

[在这里提琴](http://jsfiddle.net/AdamMills/GegeV/9/)

```
var seed = $.Deferred();
seed.resolve();
observable.aggregate(seed, function(chain, n){
    return chain.then(function(){
        console.log("Starting on Event " + n);
        return process(n);
    });
}).subscribe(); 
```

# sql - 从数据库中获取最近和以前的条目

> ID：15705160
> 
> 赞同：0
> 
> 时间：2013-03-29T14:21:36.557
> 
> 标签：sql, join, timestamp

该站点已经有一些关于从具有时间戳列的数据库表中为每个给定键选择最新条目的问题和答案。这是[一个例子](https://stackoverflow.com/questions/4090789/sql-how-to-select-the-most-recent-date-item)。我一直在使用类似这样的代码：

```
SELECT DISTINCT t1.FooId, t1.BarId, t1.Status, t1.ChangeDate
FROM FooBarStatusUpdate t1
INNER JOIN (SELECT FooId, BarId, MAX(ChangeDate) AS latest
        FROM FooBarStatusUpdate
        GROUP BY FooId, BarId) AS t2
ON t1.FooId = t2.FooId
AND t1.BarId = t2.BarId
AND t1.ChangeDate = t2.latest 
```

有问题的表包含 Foo 和 Bar 之间的多对多映射，以及 Foo 在 Bar 中的状态，以及状态更改的日期。从 Bar 首次分配给 Foo 开始，此表中的每个状态更改都有一个条目。

前几天，我需要[问一只鸭子](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)，如何不仅选择最近的项目，还选择同一键的前一个条目。在这种情况下，它是用于显示过去一个月发生了什么变化的报告，并且不仅需要显示更改*为 的*内容，还需要显示*从*更改的内容。我如何修改上面的查询，我问鸭子，以获得我的客户迫切需要的这份报告的结果？

好吧，鸭子给了我我需要的东西，所以我在下面的回答是为了帮助社区。

**编辑（根据 JW 的要求）：**

假设这是我的原始数据：

```
FooId      BarId       Status     ChangeDate
  2          5          New       03/27/2012
  2          5          Commit    05/04/2012
  2          5          Complete  07/20/2012
  3          8          New       06/18/2012
  3          8          Commit    08/12/2012 
```

然后我的第一个查询（上面）将返回：

```
FooId      BarId       Status     ChangeDate
  2          5          Complete  07/20/2012
  3          8          Commit    08/12/2012 
```

我希望我的新查询执行的操作（以及我的回答实际上执行的操作）是返回：

```
FooId      BarId       Status     Change Date   Prior Status
  2          5          Complete  07/20/2012      Commit
  3          8          Commit    08/12/2012      New 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:22:50.250

鸭子：

```
SELECT DISTINCT t1.FooId, t1.BarId, t1.Status, t1.ChangeDate,
t3.Status as formerStatus
FROM FooBarStatusUpdate t1

INNER JOIN (SELECT FooId, BarId, MAX(ChangeDate) AS latest
        FROM FooBarStatusUpdate
        GROUP BY FooId, BarId) AS t2
ON t1.FooId = t2.FooId
AND t1.BarId = t2.BarId
AND t1.ChangeDate = t2.latest

LEFT JOIN (SELECT FooId, BarId, Status, MAX(ChangeDate) AS nextlatest
        FROM FooBarStatusUpdate
        GROUP BY FooId, BarId, Status
        ) AS t3
ON t2.FooId = t3.FooId
AND t2.BarId = t3.BarId
AND DATEDIFF(DAY, nextlatest, t2.latest) > 0 
```

# sql - 插入时循环/迭代日期范围

> ID：15705169
> 
> 赞同：2
> 
> 时间：2013-03-29T14:22:06.817
> 
> 标签：sql, sql-server, triggers

因此，我将数据导入到以下格式的表中（我们称之为 RAWDATA）：

```
EMPID  | STARTDATE  | ENDDATE    | TOTALHOURS | TOTALWAGES
ABC123 | 01-01-2013 | 01-28-2013 | 160.0      | 1800.00
XYZ987 | 01-01-2013 | 01-31-2013 | 200.0      | 2500.00 
```

我需要获取该数据，并将其以下列格式放入不同的表 (EMPDATA) 中：

```
EMPID | 日期 | 小时 | 工资
ABC123 | 01-01-2013 | 5.71 | 64.29
ABC123 | 01-02-2013 | 5.71 | 64.29
ABC123 | 01-03-2013 | 5.71 | 64.29
...... | .......... | .... | ......
XYZ987 | 01-01-2013 | 6.45 | 80.66
XYZ987 | 01-02-2013 | 6.45 | 80.66
XYZ987 | 01-03-2013 | 6.45 | 80.66
...... | .......... | .... | ......

```

我的想法是在 STARTDATE 和 ENDDATE 之间做一个 DATEDIFF 来计算多少天（在这种情况下：28）来分配小时数和工资，然后对于每一天，插入一行包含每天工作的平均小时数和工资. 这一切都将通过 RAWDATA 表上的触发器来完成。我只是不确定如何在触发器中从 STARTDATE 迭代到 ENDDATE。

编辑：我还应该声明，导入的数据并不总是每行都有相同的开始/结束日期。我已经更新了第一个表格示例以表明这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:23:52.320

1.  创建一个`date`表并使用`JOIN`.
2.  计算和之间`startdate`的天数`enddate`
3.  除以计算的天数`totalhours`。`totalwages`

这是我的解决方案：

```
SELECT a.empid, b.dd AS date, 
  CAST(a.totalhours AS decimal) / (DATEDIFF(day, startdate, enddate) + 1) AS hours,
  CAST(a.totalwages AS decimal) / (DATEDIFF(day, startdate, enddate) + 1) AS wages
FROM wages a
INNER JOIN dates b ON dd BETWEEN a.startdate AND a.enddate 
```

**结果**

```
| EMPID | 日期 | 小时 | 工资 |
-------------------------------------------------- ------
| ABC123 | 2013-01-01 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-02 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-03 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-04 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-05 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-06 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-07 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-08 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-09 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-10 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-11 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-12 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-13 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-14 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-15 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-16 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-17 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-18 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-19 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-20 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-21 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-22 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-23 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-24 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-25 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-26 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-27 | 5.71428571428 | 64.28571428571 |
| ABC123 | 2013-01-28 | 5.71428571428 | 64.28571428571 |
```

[查看演示](http://sqlfiddle.com/#!3/115b9/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:32:52.777

假设您使用的是 SQL Server 2005 及更高版本，您可以`Recursive CTE`为此使用 a 创建动态日期范围（与使用查找表相比）。这用于`GROUP BY`empid 字段并假设每个 empid 有一行：

```
WITH RecCTE AS (
  SELECT empid, startdate
  FROM rawdata
  UNION ALL
  SELECT R.empid, DATEADD(day,1,R.startdate)
  FROM RecCTE R JOIN rawdata RD ON R.startdate < RD.enddate
  )
INSERT INTO EMPDATA 
SELECT R.EmpId, R.StartDate, T.TotalHours/R2.cnt, T.TotalWages/R2.cnt
FROM RecCTE R
  JOIN (SELECT empid, totalhours, totalwages
        FROM rawdata
       ) T ON R.empid = T.empid
  JOIN (SELECT EmpID, COUNT(*) cnt 
        FROM RecCTE 
        GROUP BY EmpID) R2 ON R.EmpID=R2.EmpId 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/8d3ca/2)

可能有一种方法可以提高效率，但这应该会让你朝着正确的方向前进。例如，您可以使用`COUNT` `OVER`函数返回计数与子查询：

```
WITH RecCTE AS (
  SELECT empid, startdate
  FROM rawdata
  UNION ALL
  SELECT R.empid, DATEADD(day,1,R.startdate)
  FROM RecCTE R JOIN rawdata RD ON R.startdate < RD.enddate
  )
INSERT INTO EMPDATA 
SELECT R.EmpId, R.StartDate, 
    T.TotalHours/COUNT(1) OVER (PARTITION BY R.EmpId), 
    T.TotalWages/COUNT(1) OVER (PARTITION BY R.EmpId)
FROM RecCTE R
  JOIN (SELECT empid, totalhours, totalwages
        FROM rawdata
       ) T ON R.empid = T.empid
ORDER BY R.StartDate 
```

# html - 在每页上打印页眉/页脚的打印机友好 HTML 页面？

> ID：15705171
> 
> 赞同：2
> 
> 时间：2013-03-29T14:22:12.160
> 
> 标签：html, css, printing

我正在编写一个在特定文档结构中动态生成 HTML 页面的实用程序。正文由许多`div`相互堆叠的 ' 组成，每个都包含某些内容（作为一种列表）。这些内容中`div`的每一个都可能是可变高度，特别是取决于打印机页面的宽度。

这是生成的 HTML 的示例：

```
<html>
<head>
  <title>Page Title</title>
  <style>
    (Dynamically generated styles)
  </style>
</head>
<body>
  <div id="divMain">
    <div id="divHeader">
      <div id="divTitle">Page Title</div>
      <div id="divSubTitle">Subtitle</div>
    </div>
    <div id="divContent">
      (Dynamically generated content div's)
    </div>
  </div>
</body>
</html> 
```

此页面只是带有 CSS 的纯 HTML，当用户在自己的计算机上双击此 HTML 文件时需要工作，而不是从站点托管。因此，此页面中没有脚本。

现在，一旦我生成了这个 HTML，我的意图就是打印它（或另存为 PDF）。打印时，每个打印页面都需要插入自定义页眉和页脚。如上所述，每个内容`div`可以是任何可变高度，并且可以随着打印宽度的变化而改变。

如何在每个打印页面中插入我自己的页眉/页脚？

# file-upload - 删除选择按钮上的加号图标 素面组件

> ID：15705173
> 
> 赞同：2
> 
> 时间：2013-03-29T14:22:21.550
> 
> 标签：file-upload, primefaces

有没有办法删除 primefaces 组件中选择按钮上的加号图标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T08:53:40.457

我尝试了@Darka 的方法，但在 Primefaces 3.5.10 中失败了。

这对我有用。

```
 .ui-fileupload-choose .ui-icon {
         visibility: hidden !important;
     }
     .ui-fileupload-upload .ui-icon {
         visibility: hidden !important;
     }
     .ui-fileupload-cancel .ui-icon {
         visibility: hidden !important;
     } 
```

我希望它也有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:43:57.443

如果仍然没有运气。您可以将此 css 代码（已测试）删除图标：

```
 .fileupload-buttonbar .fileinput-button .ui-icon-plusthick{
         display: none !important;
 } 
```

并且此代码向左移动选择更多：

```
 .fileupload-buttonbar .fileinput-button  .ui-button-text{
     padding-left: 1em!important;
 } 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T09:16:00.600

在 Primefaces 5.3 中使用：

```
span.ui-fileupload-choose > span.ui-icon-plusthick{
    display: none !important;
}
span.ui-fileupload-choose > span.ui-button-text{
    padding-left: 1em !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-08T16:52:54.260

在 Primefaces 6.1 中使用：

```
.ui-fileupload-simple .ui-icon-plusthick {
    display: none !important;
}

.ui-fileupload-simple .ui-button-text{
    padding-left: 1em !important;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-10T11:56:56.090

对于高级模式下的文件上传（在 PrimeFaces 6+ 上测试）：

```
.ui-fileupload .ui-icon-plusthick {
  display: none !important;
}

.ui-fileupload .ui-icon-arrowreturnthick-1-n {
  display: none !important;
}

.ui-fileupload .ui-icon-cancel {
  display: none !important;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-26T01:40:30.537

文件 primeicons.css 包含所有图标类。用相应选择的图标代码覆盖属性*内容值。*

例如，如果要替换回形针的图标：

```
/* \e97b is the papper-clip code found in primeicons.css */
    .pi-plus:before {
        content: "\e97b"; 
      } 
```

# google-chrome - 强制 Chrome 缩放到 100%

> ID：15705177
> 
> 赞同：3
> 
> 时间：2013-03-29T14:22:31.897
> 
> 标签：google-chrome, zooming

在我们正在创建的产品中，有一个功能在 Chrome 中无法完美运行，除非您使用 100% 缩放。Chrome 不是我们产品的主要目标，我们预计不到 5% 的用户会使用它，因此我们无法分配大量时间来修复缩放 Chrome 的此功能（我们预计会非常低Cusers 用户的百分比）。

该功能是一个滚动小部件，一次向他们显示项目列表的有限视图。在 FF、IE 和 100% 缩放的 Chrome 中，每次单击左箭头或右箭头都会滚动一个项目。在不是 100% 缩放的 Chrome 中，每次点击它会滚动 0.5 到 1.5 个项目。

我们还在 Chrome 中发现了一些小的图形故障，其缩放级别不同于 100%。

在我们的测试中，我们发现 Chrome 有时会在进入我们的网站时更改缩放级别，似乎是自动的。在去我们的测试站点之前，我们会确保缩放为 100%，但是当我们到达测试站点时，缩放变为 90%。

**有没有办法以编程方式强制 Chrome 100% 缩放？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-21T19:43:53.273

JS：

```
$(document).ready(function () {
    document.body.style.transform = "scale(" + (window.innerWidth) / (window.outerWidth) + ")";
    document.body.style.width = 100 * (window.outerWidth) / (window.innerWidth) + "%";
});

$(window).resize(function () {
    document.body.style.transform = "scale(" + (window.innerWidth) / (window.outerWidth) + ")";
    document.body.style.width = 100 * (window.outerWidth) / (window.innerWidth) + "%";
}); 
```

CSS：

```
body{
  transform-origin:0 0;
  position:absolute;
  top:0;
  left:0;
  right:0;
  margin:0;
  padding:0;
} 
```

身体：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
body body body body... 
```

更新：

如果您的网页内容在左侧，请使用 transform-origin: 0 0; 如果它在正确的使用 transform-origin: 100% 0; 如果它在中心使用 transform-origin: center 0; 如果您在几个地方有内容或从左/顶部有 x 像素，而不是单独缩放身体缩放每个 div 并将变换原点适合它的位置，而不是像这样调整它的宽度和高度：

```
document.getElementById("id").style.width = document.getElementById("id").style.width * (window.outerWidth) / (window.innerWidth) + "px";
document.getElementById("id").style.height = document.getElementById("id").style.height * (window.outerWidth) / (window.innerWidth) + "px"; 
```

# javascript - Kendo UI Treeview sprite 在拖放后消失

> ID：15705178
> 
> 赞同：0
> 
> 时间：2013-03-29T14:22:32.357
> 
> 标签：javascript, kendo-ui, kendo-treeview

我正在尝试生成 Kendo UI 树视图标记并使用拖放节点。问题是，在我将一个节点放到另一个节点上之后，精灵 span 元素消失了。

初始 HTML 标记：

```
<li>
   <span class='k-sprite'></span>
   <span class='node-text'>Node1</span>
</li> 
```

这是拖放后节点的样子：

```
<li role="treeitem" class="k-item k-last" data-uid="054713f5-5ba3-444e-a322-72bf86d53ad5" aria-selected="true">
   <div class="k-bot">
     <span class="k-in k-state-selected">Node4</span>
   </div>
</li> 
```

这是一个小提琴：http: [//jsfiddle.net/BX4VC/](http://jsfiddle.net/BX4VC/)

关于如何帮助 Kendo 正确解析 HTML 以便在拖动元素后保留节点内的元素的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:13:43.873

`k-sprite`由于它与`spriteCssClass`树视图项的字段有关，因此对类进行了特殊处理。如果您设置图标类，跨度将被持久化，如[更新后的 fiddle](http://jsfiddle.net/BX4VC/1/)所示。

# java - 在 jpa 中使用多对多关系时为空表

> ID：15705190
> 
> 赞同：2
> 
> 时间：2013-03-29T14:23:12.720
> 
> 标签：java, jpa, many-to-many

当我想更新 jpa 中的列表时，表格保持为空。完全没有错误。存在获取器和设置器，只是未在此处列出。

这是我的课：

```
public class User implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
private int id;

@ManyToMany
private List<Course> courses;

}

public class Course implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
private int id;

@ManyToMany(mappedBy="courses")
private List<User> users;
} 
```

这里是我保存对象的方法：

```
public boolean addCourse(User user, Course course){

    List<User> cas = new ArrayList<User>();
    cas.add(user);

    EntityManager em = getEntityManager();
    try{
        em.getTransaction().begin();
        course.setUsers(cas);
        em.getTransaction().commit();
        em.clear();
        return true;
    } catch(Exception e) {
        em.getTransaction().rollback();
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:27:03.410

代码应该添加一个`@JoinTable`注释来定义拥有实体上的多对多关系，在这种情况下是`User`因为`mappedBy`元素指向`courses`字段 on `User`。`@JoinTable`注释指定数据库中使用的和`joinColumns`关系`inverseJoinColumns`。您还应该在关系上指定一个`cascade`元素。`@ManyToMany`

**这是一个例子。请注意，我假设了您的一些列名，并且数据库中存在一个联结表。**

```
public class User implements Serializable {

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue
private int id;

@ManyToMany(cascade={CascadeType.ALL})
@JoinTable(name="USER_COURSE", joinColumns={@JoinColumn(name="USER_ID", referencedColumnName="USER_ID")},
inverseJoinColumns={@JoinColumn(name="COURSE_ID", referencedColumnName="COURSE_ID")})
private List<Course> courses;

} 
```

**此示例假定您的数据库包含下表**

```
create table USER_COURSE(
   USER_ID integer,
   COURSE_ID integer
) 
```

[你也可以访问我的博客，我在这篇文章](http://tothought.cloudfoundry.com/post/10)中介绍了这个主题。

# android - 如何阻止 admob 向我的 logcat 发送垃圾邮件？

> ID：15705195
> 
> 赞同：0
> 
> 时间：2013-03-29T14:23:42.307
> 
> 标签：android, admob

我添加的广告输出了这么多数据到`logcat`. 如何阻止广告打印到`logcat`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:29:48.863

我发现在 Eclipse 中最适合过滤掉不需要的消息的过滤器，即使是由应用程序生成的消息是：

```
^(?!.*(text_to_filter_out_here)).*$ 
```

希望这可以帮助。

# java - 分布式映射条目的 Hazelcast 分区重新洗牌

> ID：15705199
> 
> 赞同：0
> 
> 时间：2013-03-29T14:23:45.613
> 
> 标签：java, datagrid, cluster-computing, hazelcast

当新成员加入集群时，Hazelcast 将通过重新分配分布式映射的条目来打乱分区。无论如何，我们可以被告知这种“入境迁移”吗？

就像我们可以让本地条目监听器知道本地条目的添加和删除一样。任何此类通知入境迁移的方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:55:50.887

好吧，经过更多的谷歌搜索，我找到了答案。

[这个链接在这里](http://code.google.com/p/hazelcast/issues/detail?id=609#makechanges)提出了一个非常重要的观点。*本地侦听器是一个 EntryListener，它只通知本地/拥有的条目的地图事件。Map 事件是关于 IMap 操作的，例如“put”、“remove”。*

这意味着，我们不能期望在由于迁移而添加新的本地条目时触发本地条目添加事件。这动摇了我的信念！我仍然强烈同意这个问题的创建者，它应该。

存在解决方法，[如此邮件列表条目](http://groups.google.com/group/hazelcast/browse_thread/thread/2e35f7813a3dbadb)中所述，使用此分区服务和迁移侦听器技巧。

# javascript - 通过下拉更改复选框颜色

> ID：15705202
> 
> 赞同：0
> 
> 时间：2013-03-29T14:23:56.177
> 
> 标签：javascript, html, drop-down-menu

我有一个下拉html代码。我需要在下拉菜单上定位一个单击事件，如果按下某个值，某些复选框的颜色应该会改变。

```
 <select>
        <option value="calculate">calculate</option>
        <option value="identification">identification</option>
        <option value="longInputs">longInputs</option>
</select> 
```

我想知道如何针对下拉列表中的值定位点击事件。一个例子：如果有人点击了标识行，那么一些复选框会变成红色。

我已经搜索了一路，找不到如何做到这一点。希望能得到一点帮助

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:25:12.950

jQuery 这里会是你的朋友，你可以使用 change 事件

```
$('.target').change(function() {
  alert('Handler for .change() called.');
}); 
```

# ruby - mongoid TypeError：键必须是字符串或符号

> ID：15705204
> 
> 赞同：1
> 
> 时间：2013-03-29T14:24:11.113
> 
> 标签：ruby, mongodb, mongoid

当我在 Rails 控制台中运行此查询时：

```
1.9.3p286 :118 > cs = Conference.any_of({:schedule_cache => { :$elemMatch => { :start_date.gte => Date.parse('7 Mar 2013'), :end_date.lte => Date.parse('8 Mar 2013')}}})
1.9.3p286 :118 > cs.count 
```

我得到：

```
TypeError: keys must be strings or symbols 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:55:48.343

您是否尝试过使用字符串键？

```
cs = Conference.any_of({'schedule_cache' => { '$elemMatch' => { 'start_date.gte' => Date.parse('7 Mar 2013'), 'end_date.lte' => Date.parse('8 Mar 2013')}}}) 
```

# c# - 处理没有模型的帖子消息

> ID：15705210
> 
> 赞同：0
> 
> 时间：2013-03-29T14:24:29.610
> 
> 标签：c#, asp.net-mvc, razor

我想知道是否有可能在没有模型的情况下捕获 Post 动作。我需要这个，因为我希望管理员将用户角色分配给特定用户。这发生在每个角色都有复选框的视图中（因为可能有多个角色）

我可以轻松地制作一个将所有角色作为布尔值的模型，然后让它发挥作用。但我宁愿根据可用的角色自动生成。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:39:58.860

您可以在 Action 中接受两个变量，一个用于 UserName 的字符串，以及一个表示要分配的 Role 枚举标识符或名称的 List。

例如：

```
public ActionResult AssignRoles(string UserName, List<int> Roles)
{  } 
```

您需要确保视图使用其中一种收集技巧来标记复选框名称，Phil Haack 有一篇关于此的优秀文章。

[http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)

# php - 如何使用大量正则表达式将函数从 php 重写为 JS

> ID：15705212
> 
> 赞同：0
> 
> 时间：2013-03-29T14:24:47.210
> 
> 标签：php, javascript, regex, url-rewriting

我在 php 中有一个函数可以创建网络友好的链接。现在我想在 JS 中编写相同的函数，这样我就可以即时制作友好的 url。这是功能：

```
<?php 
function clearText($s)
{

  $s = trim($s);
  $s = strtr($s, 'ĘÓĄŚŁŻŹŃęóąśłżźćń', 'EOASLZZCNeoaslzzcn');
  $s = preg_replace("/[^0-9a-zA-Z\s]/", "", $s);
  $s = preg_replace("/\s[\s]+/", " ", $s);
  $s = preg_replace("/\s/", "_", $s);
  $s = strtolower($s);

  return $s;
}

function imageReplace($s)
{
  $s = clearText($s);
  $s = substr($s, 0, 64);
  return $s;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:46:35.683

如果您关心正则表达式，那么它们不应该是。Javascript 正则表达式引擎将与 php 一样完成这项工作，只是语法略有不同。例如，在您第一次替换时，而不是：

```
$s = preg_replace("/[^0-9a-zA-Z\s]/", "", $s); 
```

你将会拥有

```
s = s.replace(/[^0-9a-zA-Z\s]/, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:45:48.307

试试这个：

```
function clearText(s)
{
  s = trim(s);
  s = strtr(s);   //follow this link http://obvcode.blogspot.in/2008/05/strtr-for-javascript.html
  var re = /[^0-9a-zA-Z\s]/;
  s = s.replace(re,"");
  s = s.replace(/\s[\s]+/, " ");
  s = s.replace(/\s/, "_");
  s = s.toLowerCase();

  return s;

}

function trim(str)
{
    var str2 = str.replace(/^\s+|\s+$/g,'');
    return str2;
} 
```

# javascript - 如何在 Extjs 中捕获脚本错误？

> ID：15705218
> 
> 赞同：1
> 
> 时间：2013-03-29T14:25:02.490
> 
> 标签：javascript, extjs4.1

我有一个应用程序有一个选项卡面板，我们可以在其中编写 Extjs 代码，并且通过单击按钮，代码的 o/p 应该显示在预览中。为此，我有一个 iFrame，并且正在通过 document.write(content) 方法更新 iframe，其中 content 是一个包含 Extjs 代码的变量。

我的要求是，如果运行 js 代码时出现任何错误，系统将捕获该错误并显示在预览区域（iframe）中。

任何人都可以知道如何在 Button click 上捕获错误吗？

我已经完成了 w3school 的 try/catch/finally 教程，但它没有帮助，因为我还需要捕获控制台错误。

谢谢塔帕斯维尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:23:29.123

我得到了解决方案。当然我们不能在 Extjs 中实现这一点。我们可以在简单的 Javascript window.onerror 事件中实现这一点。

示例代码：

```
window.onerror = function(message, url, linenumber) {
        var errorbox = document.createElement('div'); 
        errorbox.innerHTML = '<font color = red >'+message+'<br> At line number  :  '+linenumber+'</font>'; 
        document.body.appendChild(errorbox); 
        return ;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T14:05:49.247

```
var varMessage = Ext.MessageBox.show({
    msg: 'Initiating, please wait...',
    //title: 'Please wait',
    progressText: 'Saving...',
    animateTarget: 'btn1',
    progress: true,
    closable: false,
    width: 50,
    wait: true,
    waitConfig: {
        interval: 400,
        duration: 2000,
        //increment: 2,
        text: 'Initiating...',
        scope: this,
        fn: function() {
            //Code for ajax request
            Ext.Ajax.request({
                url: 'url',
                async: false,
                //Code for if url successfully done
                success: function(response, opts) {
                    var obj = (response.responseText);
                    Ext.MessageBox.hide();
                    //Code for error handling
                    try {
                        Ext.Msg.alert('Status', 'Request successfully done .');
                    } catch(err) {
                        Ext.Msg.alert('Error', 'Some error occured during execution.<br/></br>' + err);
                    } finally {}
                    //Code for error handling
                    },
                //Code for if any error occured during execution
                failure: function(response, opts) {
                    Ext.MessageBox.hide();
                    Ext.Msg.alert("Error", "Some issue occured during execution on server !");
                }
            });
        }
    }
}); 
```

# ios - 检查是否允许访问照片 [Phonegap]

> ID：15705220
> 
> 赞同：1
> 
> 时间：2013-03-29T14:25:05.343
> 
> 标签：ios, cordova

您知道如何使用 Phonegap/Cordova 检查 iOS 中是否允许访问照片吗？我正在使用 FilterImage 插件，当将照片保存到照片库时，无法检查是否允许访问照片。我想在设备设置中禁用访问照片时向用户显示一条消息。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T14:18:55.380

SDK 不提供直接检查特定权限的方法，但您可以通过检查 Graph API 中用户对象的权限连接来检查用户是否已授予您的应用程序权限

```
[facebook requestWithGraphPath:@"me/permissions" andDelegate:self]; 
```

或获取[https://graph.facebook.com/me/permissions](https://graph.facebook.com/me/permissions)

# php - 修复在将用户重定向到 getLoginURL() 提供的 URL 时在 IE 上收到的 HTTP 错误代码 500

> ID：15705221
> 
> 赞同：1
> 
> 时间：2013-03-29T14:25:07.233
> 
> 标签：php, facebook, facebook-php-sdk

所以，我有这个 PHP 应用程序，它使用 FB Connect 来验证它的用户。Chrome 和 Firefox 中的一切看起来都不错，据我所知，它之前在 IE 上确实有效。

现在有几天我无法让它在 IE 中工作了，即使我没有改变任何东西。

这个想法很简单。当用户访问时，`http://myapp.com/login`我们将他（使用`header('location:'.$facebook->getLoginURL());`命令）重定向到 FB PHP SDK 提供的 URL，即`getLoginURL()`.

现在，正如我所说，在 Chrome 和 Firefox 中，它看起来和工作正常，并且用户会看到 FB 的登录表单。但在 IE 中，我们得到的只是一条消息，`The website cannot display the page`它的 HTTP 响应代码设置为 500。

知道那可能是什么吗？

**稍后编辑**

我们发现在某些计算机上它也可以在 IE 上运行。所以这更让人沮丧。在同一 WiFi 网络上的 Windows 8 上运行 IE10 的 2 台不同计算机有什么不同？

**另一个更新**

所以我们比较了`getLoginURL()`在 Chrome 和 IE10 中返回的 URL，它们看起来像这样：

*IE10*：

[https://www.facebook.com/dialog/oauth?client_id=1234567890&redirect_uri=http%3A%2F%2Fdev.puzzled.by%2Flogin%2Fpopup&state=80c85248af70ed5b0a1826e4e1662b79](https://www.facebook.com/dialog/oauth?client_id=1234567890&redirect_uri=http%3A%2F%2Fdev.puzzled.by%2Flogin%2Fpopup&state=80c85248af70ed5b0a1826e4e1662b79)

*铬*：

[https://www.facebook.com/dialog/oauth?client_id=1234567890&redirect_uri=http%3A%2F%2Fdev.puzzled.by%2Flogin%2Fpopup&state=0172ab20d05eeab382cd5a0f4340fedd](https://www.facebook.com/dialog/oauth?client_id=1234567890&redirect_uri=http%3A%2F%2Fdev.puzzled.by%2Flogin%2Fpopup&state=0172ab20d05eeab382cd5a0f4340fedd)

所以它们看起来一样。但是 IE10 只是返回一个 HTTP 500 错误代码。

PS：请记住，实物`client_id`是不同的。出于安全原因，我们只是在这篇文章中更改了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:21:31.383

我们至少已经“解决”了这个问题......我们不知道我们的用户是否有同样的问题，如果他们有这有点难过，因为我们无法帮助他们:)

我们所做的是从 IE 中删除所有已保存的 cookie，它就这样工作了…… 疯了？

# php - PHP Regexp - 如果自定义标点符号并排，则正则表达式不匹配

> ID：15705223
> 
> 赞同：0
> 
> 时间：2013-03-29T14:25:13.023
> 
> 标签：php, regex, utf-8, numbers, punctuation

## 我的正则表达式

**`/^[\p{L}\p{N}][\p{L}\p{N} \.,;:\?!-“”‘’&quot;']+$/u`**

## 正则表达式的目的

允许`utf-8`字符、数字、空格和自定义标点符号来验证文章标题

下面的这些输入不匹配，但如果标点符号并排，我也想要匹配？你能告诉我我的正则表达式的正确形式吗？注意：点和问号前面的反斜杠用于转义尝试。我也尝试过不逃跑。我不擅长正则表达式。我只能找到子部分然后尝试组合。谢谢。BR

## 输入不匹配

1.  “塞利姆”！'"':?-
2.  "'
3.  '"
4.  ？！
5.  我还发现我不能以标点符号开头标题。示例**“标题”日期**不匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:39:04.530

更改为：

```
/^[\p{L}\p{N}“”‘’"'][\p{L}\p{N} .,;:?!\-“”‘’"']*$/u 
```

NB: `-` must be escaped if it isn't in the first or last position within the character class. But `.` and `?` doesn't need.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:45:50.500

Are the square brackets within the regex characters you accept? If so, they need to be escaped.

```
/^[\p{L}\p{N}\]\[\p{L}\p{N} \.,;:\?!-“”‘’"']+$/u 
```

If not, then you need to include the punctuation you'll allow inside the first character class.

# c# - User.Identity.Name 被模拟后返回 null

> ID：15705224
> 
> 赞同：2
> 
> 时间：2013-03-29T14:25:29.480
> 
> 标签：c#, unit-testing, asp.net-web-api, moq

我在试图弄清楚为什么我的模拟 User.Identity.Name 在我运行测试时返回 null 时遇到了一些困难。我有一种感觉，当我调用我的 controller.ControllerContext 时我可能搞砸了，因为我当时正在设置一些路由，但我不确定如何调整以返回分配对象，就像我在之前的测试中所做的那样。我将 Moq 与 MSTest 一起使用。这是我的测试：

```
[TestMethod]
    public void Leave_Request_Process_Approved()
    {
        var routes = new RouteCollection();
        routes.MapHttpRoute(name: "myAPI", routeTemplate: "api/myFolder/{controller}/{id}", defaults: new { id = RouteParameter.Optional });
        RouteConfig.RegisterRoutes(routes);

        var controllerContext = new Mock<ControllerContext>();
        var session = new Mock<HttpSessionStateBase>();
        session.SetupGet(s => s["altUser"]).Returns("Mod");
        controllerContext.Setup(p => p.HttpContext.Session).Returns(session.Object);
        controllerContext.Setup(p => p.HttpContext.User.Identity.Name).Returns("User");
        controllerContext.Setup(p => p.HttpContext.Request.UserHostAddress).Returns("127.0.0.1");

        var request = new Mock<HttpRequestBase>();
        request.Setup(x => x.ApplicationPath).Returns("/");
        request.Setup(x => x.Url).Returns(new Uri("http://temp-removed"));
        request.Setup(x => x.ServerVariables).Returns(new System.Collections.Specialized.NameValueCollection());

        var context = new Mock<HttpContextBase>();
        context.SetupGet(x => x.Request).Returns(request.Object);

        var response = new Mock<HttpResponseBase>();
        response.Setup(x => x.ApplyAppPathModifier(It.IsAny<string>())).Returns<string>(x => x);
        context.Setup(x => x.Response).Returns(response.Object);

        var controller = new myController();
        controller.ControllerContext = new ControllerContext(context.Object, new RouteData(), controller);
        controller.Url = new UrlHelper(new RequestContext(context.Object, new RouteData()), routes);

        Assert.IsNotNull(controller.Process(5058, "A", ""));

    } 
```

对于我过去构建的测试，我通常有我的控制器.ControllerContext：

```
controller.ControllerContext = controllerContext.Object; 
```

我试图查看是否有任何我可以使用的 controllerContext.Setup 选项或 context.Setup 选项，但 Intellisense 没有为我提供任何我可以看到能够替换我在路由信息中调用的位置的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:12:07.433

而不是`ControllerContext`模拟 ，您应该能够为 设置一个模拟`HttpContextBase.User`：

```
context.SetupGet(c => c.User.Identity.Name).Returns("user"); 
```

然后将模拟的 Http 上下文传递给`ControllerContext`ctor。

# php - 执行 PHP 的 CRON 作业不能需要另一个文件

> ID：15705231
> 
> 赞同：1
> 
> 时间：2013-03-29T14:26:01.110
> 
> 标签：php, cron, require

我有一个运行 php 文件的 cron 作业。在 php 文件中，它需要另一个文件。对于由 cron 运行的其他 php 文件，我执行相同的 require 文件，它仅适用于文件。我已将所有涉及的文件的权限更改为 777（用于测试），但问题仍然存在。当我从命令行执行文件时，它运行得很好。

**为什么该文件不允许此 1 php 文件的权限？**

这是我从 cron 收到的错误：

```
[Fri Mar 29 00:05:01 2013] [warn-phpd] mmap cache can't open /home/rpn/public_html/admin/admin_functions.php - Permission denied (pid 29776)
PHP Warning:  require(/home/rpn/public_html/admin/admin_functions.php): failed to open stream: Permission denied in /home/rp/public_html/cron/cron-boxscores.php on line 6

Warning: require(/home/rpn/public_html/admin/admin_functions.php): failed to open stream: Permission denied in /home/rp/public_html/cron/cron-boxscores.php on line 6
PHP Fatal error:  require(): Failed opening required '/home/rpn/public_html/admin/admin_functions.php' (include_path='.:/usr/lib/php:/usr/local/lib/php:/home/rp/php') in /home/rp/public_html/cron/cron-scrape-boxscores.php on line 6

Fatal error: require(): Failed opening required '/home/rpn/public_html/admin/admin_functions.php' (include_path='.:/usr/lib/php:/usr/local/lib/php:/home/rp/php') in /home/rp/public_html/cron/cron-boxscores.php on line 6 
```

这是第 6 行：

```
require('/home/rpn/public_html/admin/admin_functions.php'); 
```

这是显示文件和权限设置的目录：

```
root@host [/home/rpn/public_html/admin]# ls -l admin*
-rw-r--r-- 1 nobody nobody 19022 Mar  8 14:18 admin_functions.php 
```

nobody:nobody 是 Apache 设置运行的对象。

# javascript - 关于原型链、原语和对象的混淆

> ID：15705232
> 
> 赞同：1
> 
> 时间：2013-03-29T14:26:05.873
> 
> 标签：javascript, prototype, primitive

在萤火虫控制台中：

```
>>> a=12 
12
>>> a.__proto__
Number {}
>>> (12).__proto__
Number {}
>>> a.constructor.prototype === (12).__proto__
true
>>> a.constructor.prototype.isPrototypeOf(a)
false 
```

与其他行相比，最后一行让我很困惑。还看到[Constructor.prototype 不在原型链中？](https://stackoverflow.com/questions/15704682/constructor-prototype-not-in-the-prototype-chain/15704778#comment22302585_15704778)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:27:25.740

当您将`.`运算符与原语一起使用时，语言会使用适当的对象类型（在本例中为数字）自动将其装箱。那是因为 JavaScript 中的简单原始类型实际上不是 Object 实例。

因此，实际的左侧

```
a.__proto__ 
```

不是数量`12`而是本质上`new Number(12)`。但是，变量“a”仍然是简单的数值`12`。

*编辑*——[规范的第 8.7 节](http://www.ecma-international.org/ecma-262/5.1/#sec-8.7)用典型的 ECMA 262 月球语言“解释”了这一点。我找不到清晰的段落来描述原始*baseValue*被视为数字、布尔值或字符串实例的方式，但该部分直接暗示了这一点。我认为因为那些非原始的合成值是短暂的（它们只是在评估`.`or`[]`表达式时才是“真实的”），所以规范只是谈论行为而没有明确要求构造一个实际的 Number。不过我猜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:37:14.870

@Pointy 已经很好地解释了它。基本上，如果你希望你的最后一个陈述是真实的，你必须这样写：

```
a.constructor.prototype.isPrototypeOf(new Number(a)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:40:37.503

在 JavaScript 中，原语没有原型链。只有对象可以。原始值包括：

1.  布尔值
2.  数字
3.  字符串
4.  空值
5.  不明确的

因此，如果您`isPrototypeOf`使用原始值调用，那么它将始终返回`false`。

如果您尝试使用布尔值、数字或字符串作为对象，那么 JavaScript 会自动将其强制转换为您的对象。因此`a.constructor`评估到`new Number(a).constructor`幕后。这就是您可以将原始值用作对象的原因。

如果您希望经常使用将原始值存储为对象的变量，那么最好明确地将其设为对象。例如，在您的情况下，最好将其定义`a`为`new Number(12)`. 优点是：

1.  JavaScript doesn't need to coerce the primitive to an object every time you try to use it as an object. You only create the object once. Hence it's performance efficient.
2.  The `isPrototypeOf` method in your case will return `true` as `a` will be an instance of `Number`. Hence it will have `Number.prototype` in its prototype chain.

# apache - 重定向 - 带有 get 和空格的 url

> ID：15705237
> 
> 赞同：0
> 
> 时间：2013-03-29T14:26:10.797
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, url-rewriting

我的老板让我将旧网址重定向到新网址。但我不能为这样的网址做到这一点：

```
RewriteRule search.php?rub=r24&mc=hello there  http://testv3.vintageandco.com/liste.chateau-mouton-rothschild.html [L,R=301] 
```

我试过`Redirect permanent`了，但它不起作用。

有人能帮助我吗？

想想你（对不起那个英语，它不是我的母语）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:28:59.387

URL 不能有空格，请改用 %20

# php - 用于下载结果的简单 PHP 脚本

> ID：15705238
> 
> 赞同：0
> 
> 时间：2013-03-29T14:26:17.507
> 
> 标签：php, asp.net, html

我需要使用 for 循环从网站下载结果来编译它们。

（请注意，这是一个 ASP 请求，它显示带有这些参数的网页）

我写了下面的代码来得到这个：

```
<?php
for ($i=10; $i<500; $i++) {
$m = $i*10;

$dl = $query;
$text = file_get_contents($dl);
$doc = new DOMDocument('1.0');
$doc->loadHTML($text);
$aObj = $doc->find('Academic');
if (count($aObj) > 0)
{
   echo "<h4>Found</h4>";
   //Don't download this
}
else
{
   echo "<h4>Not found</h4>";
   //Download this
}
}
?> 
```

但它返回几个错误。显然它不能将 ASPX 文件复制到 HTML DOM。我该怎么做呢？另外，如何下载/保存找不到字符串“下载”的页面？

我还认为我在文档中查找“下载”的方法不起作用。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:08:40.303

您尝试解析的网站包含很多错误，因此您将无法使用标准 DOMDocument 对象。您可以尝试使用 SimpleHTMLDOM ( [http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/) ) 或 phpQuery ( [https://code.google.com/p/phpquery/](https://code.google.com/p/phpquery/) ) 等库，并希望这些库足以解析格式错误的文档。

[如果您只需要一些信息，使用正则表达式和 preg_match_all ( http://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php) ) 来查找每次出现的“学术”可能会更容易例如。

*Note, usually it is not very advisable to use regular expression when working with structured documents such as HTML since you wont be able to take advantage of the structure, but since those documents seem to contain over 300 errors and differ from each other it might be the only way.*

# c# - C# 正则表达式端口验证 49152 到 65535

> ID：15705242
> 
> 赞同：2
> 
> 时间：2013-03-29T14:26:26.577
> 
> 标签：c#

在阅读了有关端口和建议端口的信息后，我发现要遵守 Internet 编号分配机构 (IANA) 对私有端口的建议，您应该只使用 49152 到 65535 之间的端口。因此，我尝试使用正则表达式模式来检查用户是否输入了该范围内的端口。我把这个拼凑在一起，头疼得厉害，我不得不阅读很多教程才能得到这么远的正则表达式模式真的不是人类友好的。基本上我正在寻找比我知识更多的人来验证它是否正确。我的测试似乎表明了这一点，但也许我遗漏了一些我只是想确定的东西。

```
string pattern = @"^(6553[0-5]|655[0-2]\d|65[0-4]\d\d|6[0-4]\d{3}|5\d{4}|49[2-9]\d\d|491[6-9]\d|4915[2-9])$"; 
```

问候！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T14:29:52.873

为什么要使用正则表达式？

```
string input = "51204";
int portNumber;
if (int.TryParse(input, out portNumber) 
    && portNumber >= 49152 
    && portNumber <= 65535)
{
    // Valid value...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:29:59.833

```
 int port;
        bool InRange = Int32.TryParse(StrPort, out port) && port >= 49152 && port <= 65535; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:30:35.010

使用[int.TryParse()](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)，然后将结果整数验证为边界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:34:43.427

这可能不是您问题的答案，但您可以使用：

```
int port = Convert.ToInt32(input);
if (port >= 49152 && port <= 65535) {
  //port is valid
} 
```

# sql - 比较两个不同表中的列

> ID：15705244
> 
> 赞同：3
> 
> 时间：2013-03-29T14:26:29.613
> 
> 标签：sql, oracle

假设我有两个表，表 A 和表 B，我想比较某个列。

例如，

表 A 包含以下列：IP、主机、应用程序

表 B 包含以下列：IP、数据中心、服务器、型号、Last_Updated

如何比较两个表之间的 IP 列以获取差异？

我知道表是否具有相同的列，我可以使用联合和“减号”来获取差异，但如果表具有不同的列，我无法弄清楚。

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-29T14:29:01.593

```
SELECT  *
FROM    A
FULL JOIN
        B
ON      a.IP = b.IP
WHERE   a.IP IS NULL OR b.IP IS NULL 
```

这将输出两个表中不匹配行的所有列，两边都有 NULL。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-24T10:07:57.687

```
select distinct column_A FROM table_1 where column_A not in (SELECT column_A FROM table_2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T14:28:36.700

你的意思是你想获得表A中所有不在表B中的IP？

```
select IP from table A
MINUS
select IP from table B 
```

我是否正确理解了这个问题？

# objective-c - 如何追踪错误“发送到实例的无法识别的选择器”

> ID：15705249
> 
> 赞同：0
> 
> 时间：2013-03-29T14:27:04.433
> 
> 标签：objective-c, ios5

我收到以下错误：

```
-[__NSCFBoolean isEqualToString:]: unrecognized selector sent to instance 0x56bb95c 
```

是否可以追踪导致此错误的变量是什么？在这种情况下，堆栈调用对我没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:28:39.760

`BOOL`当您将其视为`NSString`并尝试与其他字符串进行比较时，您有一个类型`isEqualToString:`

```
 [__NSCFBoolean isEqualToString:]
  ....^^^^^^^^^ 
```

# jquery - ruby on rails 客户端验证自定义样式

> ID：15705255
> 
> 赞同：0
> 
> 时间：2013-03-29T14:27:20.410
> 
> 标签：jquery, ruby-on-rails, client-side-validation

我正在为我的 rails 项目使用 client_side_validation gem，并且我正在尝试重新设置错误消息的样式以适应标准的基础 4 样式。我正确应用了错误样式，但我无法将消息转置到模板

client_side_validations.rb

```
ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|
   unless html_tag =~ /^<label/
     %{<div class="error">#{html_tag}<small id="#{instance.send(:tag_id)}" class="error">#{instance.error_message.first}</small></div>}.html_safe
   else
     %{<div class="error">#{html_tag}</div>}.html_safe
   end
end 
```

rails.validations.js

```
window.ClientSideValidations.formBuilders = {
    'ActionView::Helpers::FormBuilder': {
      add: function(element, settings, message) {
        var form, inputErrorField, label, labelErrorField;
        form = $(element[0].form);
        if (element.data('valid') !== false && !(form.find("small.error[id='" + (element.attr('id')) + "']")[0] != null)) {
          inputErrorField = jQuery(settings.input_tag);
          labelErrorField = jQuery(settings.label_tag);
          label = form.find("label[for='" + (element.attr('id')) + "']:not(.error)");
          if (element.attr('autofocus')) {
            element.attr('autofocus', false);
          }
          element.before(inputErrorField);
          inputErrorField.find('span#input_tag').replaceWith(element);
          inputErrorField.find('label.error').attr('for', element.attr('id'));
          labelErrorField.find('label.error').attr('for', element.attr('id'));
          labelErrorField.insertAfter(label);
          labelErrorField.find('label#label_tag').replaceWith(label);
        }
        return form.find("small.error[id='" + (element.attr('id')) + "']").text(message);
      },
      remove: function(element, settings) {
        var errorFieldClass, form, inputErrorField, label, labelErrorField;
        form = $(element[0].form);
        errorFieldClass = jQuery(settings.input_tag).attr('class');
        inputErrorField = element.closest("." + (errorFieldClass.replace(" ", ".")));
        label = form.find("label[for='" + (element.attr('id')) + "']:not(.error)");
        labelErrorField = label.closest("." + errorFieldClass);
        if (inputErrorField[0]) {
          inputErrorField.find("#" + (element.attr('id'))).detach();
          inputErrorField.replaceWith(element);
          label.detach();
          return labelErrorField.replaceWith(label);
        }
      }
    }
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T03:23:25.863

更改了以下代码，现在所有似乎都在基础上正常工作

```
window.ClientSideValidations.formBuilders = {
'ActionView::Helpers::FormBuilder': {
  add: function(element, settings, message) {
    var form, inputErrorField, label, labelErrorField;
    form = $(element[0].form);
    if (element.data('valid') !== false && !(form.find("small.error[id='" + (element.attr('id')) + "']")[0] != null)) {
      inputErrorField = jQuery(settings.input_tag);
      labelErrorField = jQuery(settings.label_tag);
      label = form.find("label[for='" + (element.attr('id')) + "']:not(.error)");
      if (element.attr('autofocus')) {
        element.attr('autofocus', false);
      }
      element.before(inputErrorField);
      inputErrorField.find('span#input_tag').replaceWith(element);
      inputErrorField.find('small.error').attr('id', element.attr('id'));
      labelErrorField.find('small.error').attr('id', element.attr('id'));
      labelErrorField.insertAfter(label);
      labelErrorField.find('label#label_tag').replaceWith(label);
    }
    return form.find("small.error[id='" + (element.attr('id')) + "']").text(message);
  },
  remove: function(element, settings) {
    var errorFieldClass, form, inputErrorField, label, labelErrorField;
    form = $(element[0].form);
    errorFieldClass = jQuery(settings.input_tag).attr('class');
    inputErrorField = element.closest("." + (errorFieldClass.replace(" ", ".")));
    label = form.find("label[for='" + (element.attr('id')) + "']:not(.error)");
    labelErrorField = label.closest("." + errorFieldClass);
    if (inputErrorField[0]) {
      inputErrorField.find("#" + (element.attr('id'))).detach();
      inputErrorField.replaceWith(element);
      label.detach();
      return labelErrorField.replaceWith(label);
    }
  }
}
  }; 
```

# windows-8 - ml64.exe 在 Windows8 x64 机器上失败

> ID：15705261
> 
> 赞同：0
> 
> 时间：2013-03-29T14:27:30.320
> 
> 标签：windows-8, build, compilation, 64-bit

有用于使用 Visual Studio 2005 编译 x64 程序集的构建规则（如下）。它运行良好，但问题出现在 Windows8 机器上。编译器触发下一个错误：

```
1>Assembling x64...
1>Project : error PRJ0003 : Error spawning 'cmd.exe'. 
```

而 32bin 程序集构建成功。任何想法如何解决它？

该规则位于“C:\Program Files (x86)\Microsoft Visual Studio 8\VC\VCProjectDefaults”目录中，ml64.exe 位于“C:\Program Files (x86)\Microsoft Visual Studio 8\VC\bin\amd64 ”和“C:\Program Files (x86)\Microsoft Visual Studio 8\VC\bin\x86_amd64”。

> < ?xml version="1.0" encoding="utf-8"?>
> <VisualStudioToolFile Name="Microsoft Macro Assembler x64" Version="8.00">
> 
> ```
>  <Properties>
>             <BooleanProperty
>                 Name="NoLogo"
>                 DisplayName="Suppress Startup Banner"
>                 Description="Suppress the display of the startup banner and information messages.     (/nologo)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/nologo"
>                 DefaultValue="true"
>             />
>             <BooleanProperty
>                 Name="TinyMemoryModelSupport"
>                 DisplayName="Tiny Memory Model Support"
>                 PropertyPageName="Advanced"
>                 Description="Enables tiny-memory-model support. Note that this is not equivalent to the .MODEL TINY directive.     (/AT)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/AT"
>             />
>             <StringProperty
>                 Name="ObjectFileName"
>                 DisplayName="Object File Name"
>                 PropertyPageName="Object File"
>                 Description="Specifies the name of the output object file.     (/Fo:[file])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Fo&quot;[value]&quot;"
>                 DefaultValue="$(IntDir)\$(InputName).obj"
>             />
>             <EnumProperty
>                 Name="PreserveIdentifierCase"
>                 DisplayName="Preserve Identifier Case"
>                 Description="Specifies preservation of case of user identifiers.     (/Cp, /Cu, /Cx)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 DefaultValue="0"
> 
>                 <Values>
>                     <EnumValue
>                         Value="0"
>                         DisplayName="Default"
>                     />
>                     <EnumValue
>                         Value="1"
>                         Switch="/Cp"
>                         DisplayName="Preserves Identifier Case (/Cp)"
>                     />
>                     <EnumValue
>                         Value="2"
>                         Switch="/Cu"
>                         DisplayName="Maps all identifiers to upper case. (/Cu)"
>                     />
>                     <EnumValue
>                         Value="3"
>                         Switch="/Cx"
>                         DisplayName="Preserves case in public and extern symbols. (/Cx)"
>                     />
>                 </Values>
>             </EnumProperty>
>             <StringProperty
>                 Name="PreprocessorDefinitions"
>                 DisplayName="Preprocessor Definitions"
>                 Description="Defines a text macro with the given name.     (/D[symbol])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/D&quot;[value]&quot;"
>                 Delimited="true"
>                 Inheritable="true"
>             />
>             <BooleanProperty
>                 Name="GeneratePreprocessedSourceListing"
>                 DisplayName="Generate Preprocessed Source Listing"
>                 PropertyPageName="Listing File"
>                 Description="Generates a preprocessed source listing to the Output Window.     (/EP)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/EP"
>             />
>             <StringProperty
>                 Name="AssembledCodeListingFile"
>                 DisplayName="Assembled Code Listing File"
>                 PropertyPageName="Listing File"
>                 Description="Generates an assembled code listing file.     (/Fl[file])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Fl&quot;[value]&quot;"
>             />
>             <StringProperty
>                 Name="SourceListingLineWidth"
>                 DisplayName="Source Listing Line Width"
>                 PropertyPageName="Listing File"
>                 Description="Sets the line width of source listing in characters per line. Range is 60 to 255\. Same as PAGE width.     (/Sl [width])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sl [value]"
>             />
>             <StringProperty
>                 Name="SourceListingPageLength"
>                 DisplayName="Source Listing Page Length"
>                 PropertyPageName="Listing File"
>                 Description="Sets the page length of source listing in lines per page. Range is 10 to 255\. Same as PAGE length.     (/Sp [length])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sp [value]"
>             />
>             <StringProperty
>                 Name="IncludePaths"
>                 DisplayName="Include Paths"
>                 Description="Sets path for include file. A maximum of 10 /I options is allowed.     (/I [path])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/I &quot;[value]&quot;"
>                 Delimited="true"
>                 Inheritable="true"
>             />
>             <BooleanProperty
>                 Name="ListAllAvailableInformation"
>                 DisplayName="List All Available Information"
>                 PropertyPageName="Listing File"
>                 Description="Turns on listing of all available information.     (/Sa)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sa"
>             />
>             <BooleanProperty
>                 Name="UseSafeExceptionHandlers"
>                 DisplayName="Use Safe Exception Handlers"
>                 PropertyPageName="Advanced"
>                 Description="Marks the object as either containing no exception handlers or containing exception handlers that are all declared with .SAFESEH.     (/safeseh)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/safeseh"
>             />
>             <BooleanProperty
>                 Name="AddFirstPassListing"
>                 DisplayName="Add First Pass Listing"
>                 PropertyPageName="Listing File"
>                 Description="Adds first-pass listing to listing file.     (/Sf)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sf"
>             />
>             <BooleanProperty
>                 Name="EnableAssemblyGeneratedCodeListing"
>                 DisplayName="Enable Assembly Generated Code Listing"
>                 PropertyPageName="Listing File"
>                 Description="Turns on listing of assembly-generated code.     (/Sg)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sg"
>             />
>             <BooleanProperty
>                 Name="DisableSymbolTable"
>                 DisplayName="Disable Symbol Table"
>                 PropertyPageName="Listing File"
>                 Description="Turns off symbol table when producing a listing.     (/Sn)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sn"
>             />
>             <StringProperty
>                 Name="SourceListingSubTitle"
>                 DisplayName="Source Listing Subtitle"
>                 PropertyPageName="Listing File"
>                 Description="Specifies subtitle text for source listing. Same as SUBTITLE text.     (/Ss [subtitle])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Ss [value]"
>             />
>             <StringProperty
>                 Name="SourceListingTitle"
>                 DisplayName="Source Listing Title"
>                 PropertyPageName="Listing File"
>                 Description="Specifies title for source listing. Same as TITLE text.     (/St [title])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/St [value]"
>             />
>             <BooleanProperty
>                 Name="EnableFalseConditionalsInListing"
>                 DisplayName="Enable False Conditionals In Listing"
>                 PropertyPageName="Listing File"
>                 Description="Turns on false conditionals in listing.     (/Sx)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Sx"
>             />
>             <EnumProperty
>                 Name="WarningLevel"
>                 DisplayName="Warning Level"
>                 Description="Sets the warning level, where level = 0, 1, 2, or 3\.    (/W0, /W1, /W2, /W3)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 DefaultValue="3"
> 
>                 <Values>
>                     <EnumValue
>                         Value="0"
>                         Switch="/W0"
>                         DisplayName="Warning Level 0 (/W0)"
>                     />
>                     <EnumValue
>                         Value="1"
>                         Switch="/W1"
>                         DisplayName="Warning Level 1 (/W1)"
>                     />
>                     <EnumValue
>                         Value="2"
>                         Switch="/W2"
>                         DisplayName="Warning Level 2 (/W2)"
>                     />
>                     <EnumValue
>                         Value="3"
>                         Switch="/W3"
>                         DisplayName="Warning Level 3 (/W3)"
>                     />
>                 </Values>
>             </EnumProperty>
>             <BooleanProperty
>                 Name="TreatWarningsAsErrors"
>                 DisplayName="Treat Warnings As Errors"
>                 Description="Returns an error code if warnings are generated.     (/WX)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/WX"
>             />
>             <BooleanProperty
>                 Name="MakeAllSymbolsPublic"
>                 DisplayName="Make All Symbols Public"
>                 PropertyPageName="Object File"
>                 Description="Makes all symbols public.     (/Zf)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Zf"
>             />
>             <BooleanProperty
>                 Name="GenerateDebugInformation"
>                 DisplayName="Generate Debug Information"
>                 Description="Generates Debug Information.     (/Zi)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Zi"
>                 DefaultValue="true"
>             />
>             <BooleanProperty
>                 Name="EnableMASM51Compatibility"
>                 DisplayName="Enable MASM 5.1 Compatibility"
>                 Description="Enables M510 option for maximum compatibility with MASM 5.1\.     (/Zm)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Zm"
>             />
>             <EnumProperty
>                 Name="PackAlignmentBoundary"
>                 DisplayName="Pack Alignment Boundary"
>                 PropertyPageName="Advanced"
>                 Description="Packs structures on the specified byte boundary. The alignment can be 1, 2, 4, 8 or 16\.     (/Zp1, /Zp2, /Zp4, /Zp8, /Zp16)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
> 
>                 <Values>
>                     <EnumValue
>                         Value="0"
>                         DisplayName="Default"
>                     />
>                     <EnumValue
>                         Value="1"
>                         Switch="/Zp1"
>                         DisplayName="One Byte Boundary (/Zp1)"
>                     />
>                     <EnumValue
>                         Value="2"
>                         Switch="/Zp2"
>                         DisplayName="Two Byte Boundary (/Zp2)"
>                     />
>                     <EnumValue
>                         Value="3"
>                         Switch="/Zp4"
>                         DisplayName="Four Byte Boundary (/Zp4)"
>                     />
>                     <EnumValue
>                         Value="4"
>                         Switch="/Zp8"
>                         DisplayName="Eight Byte Boundary (/Zp8)"
>                     />
>                     <EnumValue
>                         Value="5"
>                         Switch="/Zp16"
>                         DisplayName="Sixteen Byte Boundary (/Zp16)"
>                     />
>                 </Values>
>             </EnumProperty>
>             <BooleanProperty
>                 Name="PerformSyntaxCheckOnly"
>                 DisplayName="Perform Syntax Check Only"
>                 Description="Performs a syntax check only.     (/Zs)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/Zs"
>             />
>             <EnumProperty
>                 Name="CallingConvention"
>                 DisplayName="Calling Convention"
>                 PropertyPageName="Advanced"
>                 Description="Selects calling convention for your application.     (/Gc, /Gd. /Gz)"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
> 
>                 <Values>
>                     <EnumValue
>                         Value="0"
>                         DisplayName="Default"
>                     />
>                     <EnumValue
>                         Value="1"
>                         Switch="/Gd"
>                         DisplayName="Use C-style Calling Convention (/Gd)"
>                     />
>                     <EnumValue
>                         Value="2"
>                         Switch="/Gz"
>                         DisplayName="Use stdcall Calling Convention (/Gz)"
>                     />
>                     <EnumValue
>                         Value="3"
>                         Switch="/Gc"
>                         DisplayName="Use Pascal Calling Convention (/Gc)"
>                     />
>                 </Values>
>             </EnumProperty>
>             <EnumProperty
>                 Name="ErrorReporting"
>                 DisplayName="Error Reporting"
>                 PropertyPageName="Advanced"
>                 Description="Reports internal assembler errors to Microsoft.     (/errorReport:[method])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
> 
>                 <Values>
>                     <EnumValue
>                         Value="0"
>                         Switch="/errorReport:prompt"
>                         DisplayName="Prompt to send report immediately (/errorReport:prompt)"
>                     />
>                     <EnumValue
>                         Value="1"
>                         Switch="/errorReport:queue"
>                         DisplayName="Prompt to send report at the next logon (/errorReport:queue)"
>                     />
>                     <EnumValue
>                         Value="2"
>                         Switch="/errorReport:send"
>                         DisplayName="Automatically send report (/errorReport:send)"
>                     />
>                     <EnumValue
>                         Value="3"
>                         Switch="/errorReport:none"
>                         DisplayName="Do not send report (/errorReport:none)"
>                     />
>                 </Values>
>             </EnumProperty>
>             <StringProperty
>                 Name="BrowseFile"
>                 DisplayName="Generate Browse Information File"
>                 PropertyPageName="Advanced"
>                 Description="Specifies whether to generate browse information file and its optional name or location of the browse information file.     (/FR[name])"
>                 HelpURL="http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vcmasm/html/vclrfml.asp"
>                 Switch="/FR&quot;[value]&quot;"
>                 Delimited="true"
>                 Inheritable="true"
>             />
>         </Properties>
>     </CustomBuildRule>
> </Rules> 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:38:36.907

> 生成“cmd.exe”时出错。

您的机器非常混乱，Visual Studio 无法启动命令处理器。首先您需要检查是否`cmd.exe`仍然位于 c:\windows\system32 目录中。接下来，您需要检查您的环境变量是否仍然正确。这是更典型的事故，卸载程序往往会搞砸。

开始 + 控制面板、系统、高级、环境变量按钮。查看那里显示的系统变量。ComSpec 变量需要指向 c:\windows\system32\cmd.exe。Path 环境变量需要以 c:\windows\system32;c:\windows 开头。我使用这些目录的默认名称，它们在您的机器上不同的可能性很小。注销并重新登录以使更改生效。

# javascript - 为 Indesign JavaScript 创建安装包

> ID：15705269
> 
> 赞同：0
> 
> 时间：2013-03-29T14:28:05.507
> 
> 标签：javascript, adobe-indesign

不确定标题是否足够清晰，可以满足我的要求。但这里是解释：

我有一个 .jsx 文件，它可以做一些事情。我想为 mac 和 pc 创建一个安装文件，就像我们有`.jar, .exe, .dmg`. 当用户安装这个包时，我的脚本`abc.jsx`应该自动放在`Adobe InDesign CS5/Scripts/Scripts Panel`文件夹中，但是用户应该永远无法查看代码`abc.jsx`（显然因为如果他们这样做，那么我的脚本不再是我自己的工作，而是可供所有人使用利用）。

我已经看到您可以为您的 Java 程序创建设置文件，但是有没有办法`.jsx`为主要是 `Adobe ID Scripts`. 我更像是一个网络人，有一些 ID 技能，所以我不知道该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:48:43.707

为了保护您的源代码 - 将其编译为 .jsxbin 文件。一旦你有一个 .jsxbin 一个简单的 bat 文件（或 Mac 上的任何等效文件），就可以简单地将 .jsxbin 复制/粘贴到正确的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T04:22:55.603

如果你想要一个可安装的设置，你需要使用[像 Inno 这样的设置编译器](https://www.kymoto.org/products/inno-script-studio)，它是免费的而且很棒。

我建议您让安装程序将您的脚本安装到用户的 InDesign 漫游目录，例如： `C:\Users\someuser\AppData\Roaming\Adobe\InDesign\Version 7.0\en_US\Scripts\Scripts Panel`

要混淆代码，请按照 Anna Forrest 的建议进行操作并将其编译为 .jsxbin。

# batch-file - 批处理文件错误，“此时意外”

> ID：15705270
> 
> 赞同：1
> 
> 时间：2013-03-29T14:28:05.873
> 
> 标签：batch-file, dos

在 DOS 的 Windows 批处理文件中，我收到以下错误：

```
45.0.31322.0 unexpected at this time. 
```

数字`45.0.31322.0`是`AgtVersion`变量的内容。

这是代码：

```
if agentVersion: 45.0.31322.0==agentVersion: 45.0.31322.0 set AgtVersion=45.0.31322.0

:: Identify HPSA Agent Version
for /f "delims=" %%x in ('get_info.bat ^| find /i "agentVersion: 4"') do @set hpsaAGT=%%x

:: Checks agent version and store in new variable
if %hpsaAGT%==agentVersion: 45.0.31322.0 set AgtVersion=45.0.31322.0

:: THE ERROR HAPPENS HERE:
:: the above line throws a: "45.0.31322.0 unexpected at this time."

if %hpsaAGT%==agentVersion: 40.0.0.1.106 set AgtVersion=40.0.0.1.106
if agentVersion: 45.0.31322.0==agentVersion: 45.0.31322.0 set AgtVersion=45.0.31322.0

:: Display HPSA Agent Version and store in txt file
echo %AgtVersion%> c:\temp\hpsa_agent\hpsaAGT.txt
echo Current HPSA Core : %AgtVersion% 
```

这个错误信息是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:56:51.797

您正在将变量与带有空格的未引用字符串进行比较。DOS 将`agentVersion:`and解释`45.0.31322.0`为两个不同的标记。第二个令牌是意外的。

```
if %hpsaAGT%==agentVersion: 45.0.31322.0 
```

应该：

```
if "%hpsaAGT%"=="agentVersion: 45.0.31322.0" 
```

# c++ - 无法访问属性 c++

> ID：15705274
> 
> 赞同：0
> 
> 时间：2013-03-29T14:28:24.977
> 
> 标签：c++, ios, pointers, cocos2d-x

这应该是特定于 C++ 的。

我在头文件中有一个属性**m9ReloadAnim**，我可以从构造函数访问它，但是当我尝试从其他函数访问它时，我收到一个错误，例如：EXC_BAD_ACCESS 或类似：“地址不包含对象”。

我有一个像这样的标题类：

```
#ifndef __SWAT__Weapon__

#define __SWAT__Weapon__

#include "cocos2d.h"

class Weapon : public cocos2d::CCSprite
{
private:
    cocos2d::CCAnimation *m9ReloadAnim = cocos2d::CCAnimation::create();
public:
    Weapon();
    ~Weapon();
    void reloadM9();
};

#endif 
```

还有一个像这样的cpp文件：

```
enter code here
#include "Weapon.h"
#include "cocos2d.h"

Weapon::Weapon(){ 
 m9ReloadAnim->setDelayPerUnit(1.1f);
}

Weapon::~Weapon(){
}

void Weapon::reloadM9(){
    m9ReloadAnim->setDelayPerUnit(1.1f);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:35:29.183

您不能像这样初始化变量：

```
cocos2d::CCAnimation *m9ReloadAnim = cocos2d::CCAnimation::create(); 
```

只能`static const int`在类声明中初始化。

将此初始化移动到您的 ctor：

```
Weapon::Weapon()
  : m9ReloadAnim(cocos2d::CCAnimation::create())
{
    m9ReloadAnim->setDelayPerUnit(1.1f);
} 
```

或者

```
Weapon::Weapon()
{
    m9ReloadAnim = cocos2d::CCAnimation::create();
    m9ReloadAnim->setDelayPerUnit(1.1f);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:45:35.840

有时会损坏，因此您无法判断错误的来源。我建议在每个方法的入口点放置一个断点，并逐行执行代码以确保它在 reloadM9 方法中触发。检查 m9ReloadAnim 是否为 NULL，或者它是否指向在初始化时创建的对象。此外，您需要检查您是否正确使用了该库。

# javascript - 如何停止在注入时触发加载事件的空 iframe？

> ID：15705284
> 
> 赞同：5
> 
> 时间：2013-03-29T14:28:39.463
> 
> 标签：javascript, html, dom, javascript-events

我正在[使用一个空框架来处理伪异步表单提交](http://css-tricks.com/snippets/html/post-data-to-an-iframe/)。对于那些不熟悉该技术的人来说，这个想法是`name`在表单的属性中引用框架的属性，以便表单的`target`URI`action`在框架中解析，并且不会中断用户体验。

为了向用户反馈，我需要使用脚本来监听表单上的`load`or`error`事件，因为这有效地使整个 UX 脚本依赖，我只注入框架并通过脚本添加表单的目标引用。

问题是框​​架一旦被注入页面就会触发加载事件：[默认行为](http://jsfiddle.net/barney/NcZrA/)。

我可以使用 jQuery 的`one`方法和`e.stopImmediatePropagation()`（[这里](http://jsfiddle.net/barney/GvvTZ/)）来缓解这种情况，或者我可以注入框架*然后*绑定事件（[这里](http://jsfiddle.net/barney/NcZrA/)）。但是这两个选项都非常违反直觉——代码当然需要注释以避免看起来像一个错误。

**TL;DR：有什么方法可以修改或限定 iframe 以阻止它在注入时触发错误的加载事件？**

我试过的

1.  无`src`属性
2.  `src`设置为`about:blank`（上面是隐含的）
3.  `src`调成`#`
4.  `src`调成`javascript:void 0`
5.  `src`设置为空数据 URI`data:text/plain;base64,;`
6.  `srcdoc`设置为空或接近空的字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:31:55.213

[先将 iframe 放入文档中，然后注册监听器：](http://jsfiddle.net/EYu2q/)

```
var e = $('<iframe>');
e.appendTo('body');
e.on('load', function(){
  alert('Loaded!')
}); 
```

# graphics - 从顶点缓冲区句柄获取顶点

> ID：15705288
> 
> 赞同：0
> 
> 时间：2013-03-29T14:28:55.090
> 
> 标签：graphics, opengl-es, opengl-es-2.0

是否有可能以某种方式从 Vertex Buffer Handle 检索对象的顶点？我正在使用 OpenGL。

如果可能的话，这是如何做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:38:50.527

在桌面 OpenGL 应用程序中，您可以使用 glMapBuffer 来检索指向存储在 vbo 中的顶点的指针。但是，根据 ES 2.0 规范，第 2.9 节，此方法不是必需的。

# java - 如何执行 2 个列表的联合？

> ID：15705289
> 
> 赞同：3
> 
> 时间：2013-03-29T14:28:58.113
> 
> 标签：java, data-structures, collections, arraylist

我有两个 ArrayLists ar1 和 ar2。

`ArrayList ar1`包含一个对象列表，每个对象都具有属性 ID、NAME 和 STATUS。 `ArrayList ar2`包含一个对象列表，每个对象都具有属性 ID、NAME 和 SUBJECT。ar1 和 ar2 的大小相同。

有什么方法可以将这两个列表合并到一个新列表 ar3 中，其中包含一个对象列表，每个对象都具有属性 ID、NAME、STATUS 和 SUBJECT？

**更新**：两个列表中的 ID 和 NAME 相同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:43:35.190

```
public static void main(String[] args) throws Exception {

    List<String> list1 = new ArrayList<String>(Arrays.asList("A", "B", "C"));
    List<String> list2 = new ArrayList<String>(Arrays.asList("B", "C", "D",
            "E", "F"));
    List<String> result = new ArrayList<String>();
    result = union(list1, list2);

    System.out.println(result);
}

public static List<String> union(List<String> list1, List<String> list2) {
    HashSet<String> set = new HashSet<String>();

    set.addAll(list1);
    set.addAll(list2);

    return new ArrayList<String>(set);
} 
```

输出：

```
[D, E, F, A, B, C] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:40:16.537

```
Map<String, Target> map = new HashMap<>();

for (TypeWithStatus item : typesWithStatus) {
   map.put(item.getId()+item.getName(), createTypeWithStatusAndSubject(item));
}

for (TypeWithSubject item : typesWithSubject) {
   map.get(item.getId()+item.getName()).setSubject(item.getSubject());
} 
```

这个想法是将第一个列表中的所有元素存储在地图中，并在第二次运行中更新地图值。这仅在两个列表都包含 id+name 方面的“相同”项目时才有效。如果没有，您将不得不添加空检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:48:40.340

所以，如果我理解正确，你有一个`A`s 列表和一个`B`相同大小的 s 列表，并且你想要一个`C`s 列表，其中第 n 个元素是列表 a 的第 n 个元素和列表 B 的第 n 个元素的并集.

好吧，首先你需要定义你的联合类：

```
class C {
    Integer id;
    String name;
    String status;
    String subject;

    C(A a, B b) {
        this.id = a.id;
        this.name = a.name;
        this.status = a.status;
        this.subject = b.subject;
    }
} 
```

然后，您可以使用迭代器：

```
Iterator<A> aIterator = aList.iterator();
Iterator<B> bIterator = bList.iterator();
List<C> cList = new ArrayList(aList.size());
while (aIterator.hasNext() && bIterator.hasNext()) {
    A a = aIterator.next();
    B b = bIterator.next();
    cList.add(new C(a, b));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:55:02.353

使用带有比较器 C 的搜索功能。

定义比较器如下

```
if(obja.id==objb.id & obja.name=objb.name) return (a==b); 
```

因此，对于 listA 中的每个元素，在 listB 中找到该元素，然后您将新对象框起来并添加

列表C中的那个。

# ios - 如何在 Flash CS6 中设计一个同时使用纵向和横向的 iPhone 应用程序

> ID：15705296
> 
> 赞同：0
> 
> 时间：2013-03-29T14:29:23.827
> 
> 标签：ios, actionscript-3, flash, screen-orientation, flash-cs6

因此，我创建了一个应用程序，它在纵向放置时具有不同的菜单，但在横向放置时会发生变化。我可以让导航工作，但是我不确定如何在 Flash 中设计横向页面？

我的舞台设置为 iOS 的标准 640x960 air，这给了我完美的纵向页面，但是当我将手机倾斜到横向时，屏幕明显发生了变化，看起来很奇怪。我希望有人能告诉我如何在 Flash 中获得这个视图，同时仍然拥有纵向屏幕？

我想在同一个应用程序中同时拥有纵向和横向，目前我很困惑如何在 Flash 中设计这个？

我希望这是有道理的，并且有人可以帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:25:31.973

这并不容易，但你可以做到。首先，您必须等到阶段初始化并将其缩放属性设置为无缩放（这将停止调整页面大小以填充屏幕）。然后您必须聆听舞台的大小调整（每次旋转 iPhone 时都会触发）并在侦听器处理程序中以适当的方式移动/缩放显示对象。

```
addEventListener(Event.ADDED_TO_STAGE, init); //Wait for stage initialization

private function init(e:Event):void { //init handler
   removeEventListener(Event.ADDED_TO_STAGE, init); //remove listener, which won't be used more

   stage.scaleMode = StageScaleMode.NO_SCALE; //set null scaling and top-left align
   stage.align = StageAlign.TOP_LEFT;

   stage.addEventListener(Event.RESIZE, resize); //add handler for resizing
}

private function resize(e:Event):void { //triggers every time iPhone being rotated
   //Move/scale your objects here
} 
```

# java - zk Listbox ListCell 文本框密码 getValue

> ID：15705297
> 
> 赞同：0
> 
> 时间：2013-03-29T14:29:26.653
> 
> 标签：java, textbox, zk

你好我有一个像这样的祖尔

```
<listcell sclass="textColumn"><textbox type="password" value="*+*+*+*+"/></listcell>
<listcell sclass="textColumn"><textbox type="password" value="*+*+*+*+"/></listcell> 
```

如您所见，我正在为来自数据库的记录设置文本框 value="++++" 的值，但我有一个按钮使用此代码在其上设置新记录

```
model.add(clazz); 
```

当然，在渲染之后，我将两个输入值都清除为 null。[添加新记录时]

当我尝试将记录保存在 DB 上时，我正在检查 zul 2 个输入的值，并且我得到了用户输入值的正确值，但是当我在 Java 代码中获得 listBox 时，我仍然在“++++”上两个输入都让我发疯

这是我的代码

```
(Textbox)((Listcell)(item.getChildren().get(5))).getFirstChild()).getValue();
(Textbox)((Listcell)(item.getChildren().get(6))).getFirstChild()).getValue(); 
```

另一方面，两者都返回“++++”，我可以修改以前从数据库中添加的项目，并且我可以看到新值当我将新项目设置为空时出现问题我的问题是

```
((Textbox)((Listcell)(item.getChildren().get(5))).getFirstChild()).setValue(null);      
((Textbox)((Listcell)(item.getChildren().get(6))).getFirstChild()).setValue(null); 
```

如果这不起作用，为什么我要在 afterRender 上检查空值。

这是我收到的值

```
onAfterRender:start[after set the values to null both empty this is in .zul]

onAfterRender:end

onBeforeSend:start[after the inputs of the user before going to Controller this is in .zul].
qwerty qwerty
onBeforeSend:end

inJava:start[the values i am receiving in the listbox before going to save them in this is in .Java]
*+*+*+*+<--Java-->*+*+*+*+ 
inJava:end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:25:10.540

你为什么使用 MVC ？您可以很容易地在 MVVM 中执行此操作查看此 [ZK 列表框](http://zkframeworkhint.blogspot.in/2013/02/zk-set-desire-selection-in-listbox-model.html)可能会帮助您使用 MVVM 渲染项目您可以查看此示例[ZK 列表框 ItemRendered 示例](http://zkframeworkhint.blogspot.in/)

# javascript - jqPlot：从x轴删除小数

> ID：15705298
> 
> 赞同：1
> 
> 时间：2013-03-29T14:29:28.877
> 
> 标签：javascript, jquery, jqplot

如何使 x 轴仅在 jqPlot 上显示整数？

目前它是这样写的：

```
0.5, 1, 1.5, 2, 2.5, etc. 
```

我想强制它只在 x 轴标签中显示整数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T14:32:16.667

您可能需要指定格式字符串：

```
 axes: {
  xaxis: {
    tickOptions: {
      formatString: "%d"
    }
  }
} 
```

# jsp - 如何在 Adob e Day CQ 5.5 中配置 web.xml 属性文件？

> ID：15705300
> 
> 赞同：1
> 
> 时间：2013-03-29T14:29:32.987
> 
> 标签：jsp, jstl, aem, jsessionid, sling

我使用 CMS Adob​​e Day CQ 5.5。当我使用 jstl 标签 c:url 并同时在浏览器中关闭 cookie 时，jsessionid 参数会添加到链接中。缓存页面时，调度程序端存在问题。上网我找到了如何防止这种行为的解决方案。对于 Tomcat 7，我必须在 web.xml 文件中添加设置。

```
<session-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

在 CQ 5.4 中，此文件位于`/crx-quickstart/server/etc/web.xml`路径上。但在 CQ 5.5 中它不再存在。有谁知道我如何在 CQ 5.5 中配置这个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T09:16:18.760

我观看了此文档[CQ 5.5 Release: Changes in Installation & Configuraton](http://helpx.adobe.com/cq/kb/cq55prerelease-installandconfigchanges.html)（“如何将 WAR 部署作为发布实例启动？”部分），据我所知，您应该有一个用于 Web 应用程序服务器部署的**WAR文件，而不是 JAR。**

[升级到 CQ 5.5](http://dev.day.com/docs/en/cq/5-5/deploying/upgrading.html)页面上还提到了各种版本的文件（JAR 和 WAR）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T08:38:38.823

如果您从其 Quickstart 可运行 jar 文件运行 CQ5.5 及更高版本，它使用自己的 CQSE servlet 引擎通过`cqse-httpservice`OSGi 包提供 OSGi HttpService。

该 HTTP 服务可通过 OSGi 控制台 (config PID= `org.apache.felix.http`) 进行配置，但我认为它不提供会话跟踪选项。如果你真的需要这个，你可能需要在 Tomcat 下将 CQ 作为 war 文件运行，或者询问你的技术支持联系人是否有其他方法。

请注意，Sling 和 CQ 通常不需要使用 HTTP 会话，除非旧系统需要它们。

# r - 画一头优秀的牛

> ID：15705301
> 
> 赞同：27
> 
> 时间：2013-03-29T14:29:39.630
> 
> 标签：r, ggplot2

我在一个大农场做统计学家，我的主人让我画一些东西来提醒他的童年。这对我来说并不容易，因为有一个很大的限制：只使用 R 来做所有事情。我就是这样做的。你能这么好心，帮我画出更好的牛吗？

```
library(ggplot2)

sim=function(xy){
  xx=xy[,"x"]*(-1)
  yy=xy[,"y"]
  gg=xy[,"gr"]
  xy=rbind(xy,cbind(xx,yy,gg))
  return(as.data.frame(xy))
}

circleFun <- function(center = c(0,0),diameter = 1, npoints = 100){
  r = diameter / 2
  tt <- seq(0,2*pi,length.out = npoints)
  xx <- center[1] + r * cos(tt)
  yy <- center[2] + r * sin(tt)
  return(data.frame(x = xx, y = yy))
}

n=100 

akys <- circleFun(c(1,5),1.5,npoints = n)
akys=as.matrix(cbind(akys,gr=4))
akys=sim(akys)

akys21 <- circleFun(c(1,4.5),0.5,npoints = n)
akys21=as.matrix(cbind(akys21,gr=5))

akys22 <- circleFun(c(-1,5.3),0.7,npoints = n)
akys22=as.matrix(cbind(akys22,gr=5))

nosis=circleFun(c(0.6,1),0.6,npoints = n)
nosis=as.matrix(cbind(nosis,gr=6))
nosis=sim(nosis)

x=c(0,1,3,3,2,0,0,1,1,0,3,5,2)
y=c(0,0,4,6,7,7,0,0,2,2,6,10,7)
gr=c(2,2,2,2,2,2,3,3,3,3,1,1,1)
xy=cbind(x=x,y=y,gr=gr)

data=sim(xy)
data=rbind(data,akys,akys21,akys22,nosis)

ggplot()+geom_polygon(data=data,mapping=aes(x=x,y=y,fill=factor(gr),group=gr), linetype=0, colour="black")+theme_bw()+
  scale_fill_manual(values=c("cornsilk2","chocolate4","lightpink","white","black","maroon4"))+
  theme(axis.line=element_blank(),axis.ticks=element_blank(),axis.text=element_blank(),legend.position="none",panel.grid=element_blank(),panel.border=element_blank())+xlab("")+ylab("")+
  ggtitle("Crazy Cow Wishing You Happy Easter!!!") 
```

[![在此处输入图像描述](../Images/70710edcdb1a2a6fc0d5e6d7542eb471.png)](https://i.stack.imgur.com/tYNtj.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-29T14:46:35.133

如果您在 Linux 上并已`cowsay`安装该解决方案，则相当简单：

```
> system("cowsay I quit")
 ________
< I quit >
 --------
    \   ^__^
     \  (oo)\_______
        (__)\       )\/\
            ||----w |
            ||     || 
```

# mysql - mysql没有看到数据文件夹

> ID：15705302
> 
> 赞同：0
> 
> 时间：2013-03-29T14:29:42.263
> 
> 标签：mysql

我对 mysql 很陌生，我需要用现有数据库设置一个新盒子。

我在 Windows 上新安装了 mysql 5.6。

我有我感兴趣的 db 的数据文件夹的备份（data/abc 文件夹）

我将它解压缩到新安装的 mysql 的数据文件夹中。现在data下多了一个abc文件夹。但是，我似乎无法在 mysql 中看到要查询的数据库。

我错过了什么步骤？

# wso2 - 如何在 WSO2 CEP 中跟踪 CEP 处理？

> ID：15705303
> 
> 赞同：0
> 
> 时间：2013-03-29T14:29:44.457
> 
> 标签：wso2, complex-event-processing

我正在尝试使用我自己的存储桶和输入流来模拟构建分析器示例。我相信我已经正确设置了所有内容，但是当我运行测试数据时，我没有得到任何结果。

整个日志输出是

[2013-03-29 08:57:16,988] 信息 {org.wso2.carbon.databridge.core.DataBridge} - 管理员连接

当然，这在生产环境中运行时是有道理的，但我无法弄清楚如何提高日志级别，最好是某种跟踪模式，所以我可以看到发生了什么。

有很多地方可以增加日志级别，但除非我知道要增加哪些日志级别，否则我所要做的就是添加噪音。如何打开适当的日志记录以了解发生了什么？

顺便说一句，在我的理想世界中，管理控制台中会有一个位置：1）所有流和进程都被映射（并验证）；2）可以选中一个框来开始跟踪任何流。

TIA,

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:03:31.673

Build Analyzer 示例基本上与 REST 传输和电子邮件代理有关。该示例的结果是向您在存储桶配置中提供的电子邮件帐户发送电子邮件。要查看流定义，您可以通过 CEP 管理控制台中提供的注册表。我们提供了一个图形窗口来查看即将进入 CEP 的事件，在我们的文档 [1] 中提供了有关此的详细信息。（要以图形方式查看事件，您必须为存储桶提供正确的输入映射。

是的，我同意你关于日志记录的看法。我们正在开发 CEP，以便在我们未来的版本中为用户提供更多的用户友好性。感谢您的想法，我们会考虑这些想法。

[1] [http://docs.wso2.org/wiki/display/CEP210/CEP+Server+Statistics](http://docs.wso2.org/wiki/display/CEP210/CEP+Server+Statistics)

干杯，

莫汉

# django - django-cache-machine 和 Redis

> ID：15705305
> 
> 赞同：3
> 
> 时间：2013-03-29T14:29:46.873
> 
> 标签：django, django-cache, django-cache-machine

我正在尝试使用 django-cache-machine 在我的应用程序中缓存查询，但我想使用 Redis 作为后端。[文档](http://jbalogh.me/projects/cache-machine/)并没有真正解释如何做到这一点，但是[存储库](https://github.com/jbalogh/django-cache-machine)中充满了 Redis 引用，所以我很确定这是可能的。我想确保我做对了，所以我想知道是否有人有配置这个的经验，也许更重要的是，知道是否有任何警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-22T03:49:22.123

在您的设置集中：

CACHE_MACHINE_USE_REDIS = 真

REDIS_BACKEND = redis://127.0.0.1:6379?socket_timeout=0.1

[https://github.com/jbalogh/django-cache-machine/blob/master/caching/invalidation.py#L187](https://github.com/jbalogh/django-cache-machine/blob/master/caching/invalidation.py#L187) [https://github.com/jbalogh/django-cache-machine/blob/master/caching/invalidation .py#L213](https://github.com/jbalogh/django-cache-machine/blob/master/caching/invalidation.py#L213)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-23T15:40:00.457

我的项目有一点经验，一个从大约 5000 万条记录生成表格的报表系统。

数据库是**Mysql**，我可以显示我的设置和模型仅供参考。

设置：

```
 # cache machine
CACHES = {
    'default': {
        'BACKEND': 'caching.backends.memcached.MemcachedCache',
        'LOCATION': [
            '127.0.0.1:11211',
        ],
        'PREFIX': 'report:',
    },
}
CACHE_COUNT_TIMEOUT = 60 * 24  # one day
CACHE_EMPTY_QUERYSETS = True 
```

楷模：

```
class App(**CachingMixin**, models.Model):
    **objects = CachingManager()**

    name = models.CharField(max_length=64,
                            default='') 
```

**请注意，**对于 query_set，cache-machine 可以正常工作。*filter*和*count*，不适合 query_set。*注释*或*聚合*。当然不要忘记先启动你的 memcache 客户端。

运行时，您可以在 django*.log 中看到缓存机器日志，告诉您命中或未命中缓存。

# jboss - JBoss AS7 管理控制台不显示

> ID：15705306
> 
> 赞同：2
> 
> 时间：2013-03-29T14:29:47.750
> 
> 标签：jboss, fedora

我已经在 Fedora 上安装了 JBoss AS7 并且可以通过执行来运行服务器

`sudo /usr/share/jboss-as/bin/standalone.sh`

并成功启动。

参观`http://127.0.0.1:8080/`收益：

> 欢迎使用 AS 7 您的 JBoss Application Server 7 正在运行。

但是访问`http://127.0.0.1:9990/console`会产生一个空白页面。

在`sudo /usr/share/jboss-as/bin/standalone.sh`我可以看到的输出中

```
14:25:53,744 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015951: Admin console listening on http://127.0.0.1:9990 
```

有没有人知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T08:56:23.243

我在使用 JBoss 7.1.1 时遇到了同样的问题。我可以确定两个原因 -

1.  我在 Linux 服务器上托管 AS7.1，并试图从单独的 Win PC 访问。正如预期的那样，IP 地址不同。`127.0.0.1`仅适用于系统。所以，我不得不更改文件中的 IP 地址`jboss-as-7.1.1.Final/standalone/configuration/standalone.xml`
2.  端口号`9990`被阻止。所以，不得不改变Linux的防火墙设置。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:39:55.140

没有使用这种类型的JBoss。但是，我的预感是您没有访问控制台的已部署战争文件：我认为您应该尝试这样的事情：`127.0.0.1:9990/console`或`127.0.0.1:9990/webconsole`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-26T20:08:51.490

将页面添加到受信任的站点。尝试重新打开页面，然后您将收到登录提示。

还要确保您已使用 adduser 命令为 ManagementRealm 创建了用户名和密码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-15T08:16:21.213

对我来说，打开管理控制台时 localhost 显示一个空白页面，但 127.0.0.1 工作得很好。我所做的只是删除浏览器缓存和数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-20T17:57:09.987

我通过禁用公司端点防病毒软件的协议过滤器解决了这个问题。尝试查看您是否有任何网络威胁过滤器或任何协议过滤器并禁用它/它们。希望对你有效。

# webdav - MarkLogic WebDav 文档创建为二进制而不是 xml

> ID：15705308
> 
> 赞同：1
> 
> 时间：2013-03-29T14:29:49.190
> 
> 标签：webdav, marklogic

我正在尝试使用 MarkLogic 和 xQuery 作为服务器端语言创建一个动态网站。

我已经创建了一个 WebDav 服务器，并正在使用 Windows 资源管理器在数据库中创建 xml 文档，其中的内容用作一些页面内容。

当我在 Windows 资源管理器中创建 xml 文档时，MarkLogic 将它们作为二进制文档而不是 xml 文档插入，因此我的 xquery 不起作用。有什么办法可以改变它，即 MarkLogic 中的设置？

如果我`xdmp:document-insert("/example.xml", <a/>)`在 cq 中这样做，它确实会创建一个 xml 文档。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:08:58.787

检查管理控制台中的 mimetypes：http: [//docs.marklogic.com/guide/ingestion/formats](http://docs.marklogic.com/guide/ingestion/formats)有更多关于该主题的信息。

# git - 可以做目录差异的git客户端

> ID：15705313
> 
> 赞同：3
> 
> 时间：2013-03-29T14:30:06.543
> 
> 标签：git, tortoisegit, git-extensions, gitk, smartgit

我知道最新的 git 可以使用这个命令来**区分**两个版本：

`git difftool -d <sha1> <sha1>`

但我找不到任何可以完成这项工作的git 客户端（ **GUI ）。**

我试过了 `tortoisegit` `smartgit` `git-cola` `git-extentions` `github` `gitk`

他们都没有这个功能，谁能推荐任何可以做到这一点的git客户端（在windows xp上运行）？

我不知道是否`sourcetree`可以这样做，因为我没有win7或mac。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:01:53.373

如果您将标准 Windows git 客户端[msysgit](https://code.google.com/p/msysgit/downloads/list)配置为使用[Beyond Compare 3](http://www.scootersoftware.com/download.php)（非免费）作为差异工具，则可以执行此操作。

[你可以这样](http://theo.im/blog/2012/10/27/directory-comparison-for-git-difftool/)设置：

```
git config --global diff.tool bc3
git config --global difftool.bc3.cmd "\"c:/Program Files/Beyond Compare 3/BCompare.exe\" \"$LOCAL\" \"$REMOTE\""
git config --global difftool.prompt false 
```

编辑：实际上 kdiff3 也这样做，并且是免费的。[在这里设置](http://www.gitshah.com/2010/12/how-to-setup-kdiff-as-diff-tool-for-git.html)：

```
[diff]
    tool = kdiff3

[merge]
    tool = kdiff3

[mergetool "kdiff3"]
    path = C:/YourPathToBinaryHere/KDiff3/kdiff3.exe
    keepBackup = false
    trustExitCode = false

[difftool "kdiff3"]
    path = C:/YourPathToBinaryHere/KDiff3/kdiff3.exe
    keepBackup = false
    trustExitCode = false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-28T09:51:52.497

在乌龟 git 中：

*   打开“git日志”
*   标记两个提交
*   右键点击
*   比较这些修订

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T22:09:55.460

只需使用 gitk。右键单击提交 -> `mark this commit`。右键单击另一个提交 -> `diff this -> marked commit`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T17:27:06.640

在 SmartGit/Hg 中，您可以配置外部文件比较工具：转到**Edit|Preferences并在****Tools** - **File Comparators**中配置它们。

您可以从日志中区分两个提交：只需在**图形**视图中选择它们（在 Windows 上按住 Control 键单击），您将在**文件**视图中看到所有更改。在这里，您只需双击即可使用外部比较工具调查单个文件。

# python - 保存函数返回的空列表

> ID：15705318
> 
> 赞同：-3
> 
> 时间：2013-03-29T14:30:36.787
> 
> 标签：python

这是我要求做的：

> `save_friends(filename, friends_list)`获取文件名和好友列表，并将该列表以正确的格式写入文件。因此，例如， save_friends('friends.csv', load_friends('friends.csv')) 应该用完全相同的内容覆盖friends 文件。

这是我的代码：

```
def save_friends(filename, friends_list): 
    """
    take a file name and a friends list and wrients that list
    to the file in the correct format

    save_friend(file, list) -> list
    """
    friends_list = []
    f = open(filename, 'w')
    for friend in friends_list:
        f.write(friend+ '\n')
    return friends_list 
    f.close() 
```

问题是当我运行文本代码（由学校提供的代码进行一些简单测试）时，它告诉我

```
>>>save_friends('friends_output.csv', d)
[ ]

Traceback (most recent call last):
  File "E:\study\Yr 1\Semister1\CSSE1001\Assignment\sample_tests.py", line 84, in <module>
    assert res == None, "save_friends didn't return None"
AssertionError: save_friends didn't return None 
```

那么，当输入不是真正的列表时，我怎样才能返回“无”（就像在这种情况下输入“d”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:33:05.990

您将`friends_list`参数替换为函数顶部的空列表：

```
friends_list = [] 
```

删除该行。

此外，您的函数不应返回任何内容；您还需要删除该`return`行以通过函数预期的分配测试`None`（这是默认设置）。

请注意，通过提前返回，您也永远不会调用`.close()`文件。

# sql-server - 连接字符串名称和实体框架

> ID：15705319
> 
> 赞同：6
> 
> 时间：2013-03-29T14:30:37.347
> 
> 标签：sql-server, asp.net-mvc, entity-framework

所以我一直在使用 Entity Framework 一段时间（在我的主要项目的 v5 上）。我一直有一个问题，但永远找不到明确的答案 - 我的连接字符串的名称是否必须与我的 DbContext 的名称匹配才能使 EF 正常工作？

看起来是这样（而且我从未做过任何不同的事情），但我宁愿不必在我的 Web.config 中提供“魔术字符串”以使 EF 正常工作。在我看来，保留 DefaultConnection 作为名称并 EF 以其他方式连接会更好。

这是来自我的 Web.config 的引用（一些名称已更改）：

```
<connectionStrings>
    <add name="MyContext" connectionString="Data Source=|DataDirectory|MyDatabase.sdf" providerName="System.Data.SqlServerCe.4.0" />
</connectionStrings> 
```

……还有……再往下……

```
<entityFramework>
    <contexts>
      <context type="MyProject.Path.To.MyContext, MyProject.Path.To, Version=1.0.0.0, Culture=neutral">
        <databaseInitializer type="MyProject.Path.To.MyInitializer, MyProject" />
      </context>
    </contexts>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="v11.0" />
      </parameters>
    </defaultConnectionFactory>
</entityFramework> 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T15:20:57.367

> 我一直有一个问题，但永远找不到明确的答案 - 我的连接字符串的名称是否必须与我的 DbContext 的名称匹配才能使 EF 正常工作？

不，您可以将连接字符串名称传递给 DbContext 的基本构造函数，即

```
public class MyDbContext : DbContext
{
    public MyDbContext()
      : base("MyConnectionStringName")
    {

    }
} 
```

如果您更愿意自己创建连接，那么还有一个构造函数`DbContext`需要一个参数。`DbConnection`

最后，您可以提供自己的实现`IDbConnectionFactory`并使用它，而不是`LocalDbConnectionFactory`在`app.config`. 您可以在配置中更改它，或者在运行时设置它，如下所示：

`Database.DefaultConnectionFactory = new MyCustomConnectionFactory();`

# c++ - 将文件读入向量时遇到问题

> ID：15705320
> 
> 赞同：3
> 
> 时间：2013-03-29T14:30:38.450
> 
> 标签：c++

我有一个在三行上有三个整数的文件。它看起来像这样：

> 000
> 001
> 010

我正在尝试将每个整数读入向量位置，但我不知道我是否做得对。这是我的代码：

```
#include <fstream>
#include <iterator>
#include <vector>

int main()
{
   std::vector<int> numbers;
   std::fstream out("out.txt");

   std::copy(std::ostreambuf_iterator<int>(out.rdbuf()),
             std::ostreambuf_iterator<int>(), std::back_inserter(numbers));
} 
```

我在这里做错了什么？我在进行复制的那一行出现“没有匹配的函数调用”错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T14:37:23.953

### 您使用了错误的迭代器。

你需要`istreambuf_iterator`，而不是`ostreambuf_iterator`：

```
 std::copy(std::istreambuf_iterator<int>(out.rdbuf()),
           std::istreambuf_iterator<int>(), std::back_inserter(numbers)); 
```

请注意，这`ostreambuf_iterator`是一个输出迭代器。它是用来*写*的，不是用来*读*的。您要做的是，*阅读*您需要的内容`istreambuf_iterator`。

### 可是等等！上面的代码也不行，为什么？

因为您正在使用`istreambuf_iterator`并传递`int`给它。将数据作为或类型的*未格式化缓冲区*`istreambuf_iterator`读取。的模板参数可以是或。*`char*``wchar_t*``istreambuf_iterator``char``wchar_t`*

 *您实际需要的是`istream_iterator`读取给定类型的*格式化数据：*

```
std::copy(std::istream_iterator<int>(out), //changed here also!
          std::istream_iterator<int>(), std::back_inserter(numbers)); 
```

这现在会很好用。

请注意，您可以避免使用`std::copy`，并将其`std::vector`自身的构造函数用作：

```
std::fstream in("out.txt");

std::vector<int> numbers((std::istream_iterator<int>(in)), //extra braces
                         std::istream_iterator<int>()); 
```

请注意第一个参数周围的额外花括号，用于避免在 C++ 中进行*令人烦恼的解析。*

如果已经创建了矢量对象（并且可以选择其中包含一些元素），那么您*仍然*可以避免`std::copy`：

```
numbers.insert(numbers.end(), 
               std::istream_iterator<int>(in), //no extra braces
               std::istream_iterator<int>()); 
```

在这种情况下不需要额外的大括号。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:37:54.423

Read the Book 'C++ How To Program' by Dietal & Dietal, The chapter on Vectors. I assure you, all your problems will be solved. You have opened the text file for output instead of input. Instead of using this function I would suggest that you should read-in strings and copy them into your vector using iterators until EOF is encountered in the file. EDIT: This way is more natural and easy to read and understand if you are new to Vectors.*

# scala - 来自 reactivemongo 演示应用程序 GridFS 的图像下拉列表

> ID：15705325
> 
> 赞同：0
> 
> 时间：2013-03-29T14:31:04.683
> 
> 标签：scala, playframework-2.1

...对于每篇文章。

获取图像名称和图像（reactivemongo.bson.BSONValue）并将其放入表单中选择？

[https://github.com/sgodbillon/reactivemongo-demo-app](https://github.com/sgodbillon/reactivemongo-demo-app)

有谁知道如何做到这一点？

该应用程序基于 Play 2.1

# php - 单元测试模拟 - 对我来说没有意义

> ID：15705328
> 
> 赞同：0
> 
> 时间：2013-03-29T14:31:14.383
> 
> 标签：php, unit-testing, junit, mocking, phpunit

我正在尝试学习单元测试并且遇到以下情况，我无法理解：

1.  我有一个模型：SalesOrder - 为电子商务商店中的订单建模
2.  SalesOrder 有一个名为 gift_message_id 的属性
3.  礼物消息 id 是一个整数值，是 GiftMessage 模型的外键
4.  GiftMessage 模型有一个方法可以采用订单模型并根据 SalesOrder 正确加载 GiftMessage 实例。

我正在尝试编写一个准确测试此行为的测试，但我最终得到了 2 个模拟：1 个用于 SalesOrder，1 个用于 GiftMessage，它没有意义。我在这里做错了什么？

我尝试测试的方法如下所示：

```
public function loadGiftMessageByOrderModel(SalesOrder $order)
{
    $giftMessageId = $order->getGiftMessageId();

    //if the order has a gift message id then load the gift message model and return it
    if ($giftMessageId !== false) {
        return new GiftMessage($giftMessageId);
    }
    return false;
} 
```

如何进行单元测试，记住订单和礼品消息数据存储在数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:27:53.560

任何时候你有一个调用构造函数的方法并且在构造函数中完成了重要的工作，你就有麻烦了。我从上面看到的最好的选择是让上面的类持有一个`GiftMessageFactory`实例。然后，您可以模拟工厂以验证是否使用适当的值和适当的时间调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T18:46:13.087

当您编写`loadGiftMessageByOrderModel`函数并解释了 GiftMessage 构造函数时，我认为您不能轻松地对这段代码进行单元测试。为了干净地测试它，您需要以**不是**构造函数的方法从数据库加载 GiftMessage。您的构造函数不应调用与数据库交互的方法。另一个类或方法应该执行该加载，然后调用构造函数。大致是这样的：

```
public function loadGiftMessageByOrderModel(SalesOrder $order)
{
    $giftMessageId = $order->getGiftMessageId();

    //if the order has a gift message id then load the gift message model and return it
    if ($giftMessageId !== false) {
        // $giftMessageLoader handles loading from the DB; it doesn't create a GiftMessage object
        $giftMessageRecord = $giftMessageLoader.loadById( $giftMessageId );
        // $giftMessageFactory actually calls the constructor to create a GiftMessage
        return $giftMessageFactory.createFromRecord( $giftMessageRecord );
    }
    return false;
} 
```

然后，您可以模拟`$giftMessageLoader.loadById`调用，以便控制从数据库返回的内容。您还可以测试是否正确`$giftMessageFactory`调用了`GiftMessage`构造函数并创建了正确的对象。

这里的总体教训是构造函数应该很简单。他们可以验证参数以便正确构造对象，但他们可能不应该调用应用程序的其他重要部分。

# windows - Facebook 页面选项卡未在 PC 上显示

> ID：15705329
> 
> 赞同：0
> 
> 时间：2013-03-29T14:31:15.463
> 
> 标签：windows, facebook, tabs

我创建了几个应用程序来显示在我公司的 Facebook 页面上。我已经在我的 mac 上测试了每个浏览器，一切都按预期工作。但是，它不适用于 Windows 机器上的任何浏览器。我已经输入了页面标签 url 以及安全页面标签 url，所以我很困惑为什么它不会出现在 PC 上。

这是我的一个页面选项卡的想法：

[https://www.facebook.com/pages/Atria-Senior-Living/208728162501220?id=208728162501220&sk=app_131012823749816](https://www.facebook.com/pages/Atria-Senior-Living/208728162501220?id=208728162501220&sk=app_131012823749816)

我已经搜索了所有内容，但找不到任何解决此问题的方法。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:50:35.913

我已经弄清楚发生了什么。我没有在“https://”之后列出“www”。无论出于何种原因，Windows 机器都不喜欢那样。

# xcode - 我怎样才能只显示选择器并隐藏键盘？？？

> ID：15705331
> 
> 赞同：0
> 
> 时间：2013-03-29T14:31:23.860
> 
> 标签：xcode, hide, uitoolbar

我试图只显示选择器并隐藏键盘，但它只适用于第一个文本字段。

我得到了一个我制作的文本字段，当我点击第一个文本字段时，选择器弹出，但是当我点击另一个文本字段时，键盘弹出。

我怎样才能只显示选择器？

------------ 我的代码 --------

视图控制器.h

```
interface ViewController : UIViewController <UITextFieldDelegate >{

IBOutlet UIDatePicker *myDatePicker;
UITextField* myTextField;

int x ; int y ; int w ; int h ;  int moretext ;   }   @end 
```

视图控制器.m

```
- (void)viewDidLoad {

 myTextField.delegate = self;    

[super viewDidLoad]; 
```

# 杂注标记 - myTextField

```
x = 36;  y = 50;   w = 36;   h = 25 ;  moretext = 0 ;

for (moretext=0; moretext<7; moretext ++) {

    myTextField = [[UITextField alloc]initWithFrame:CGRectMake(x, y, w, h)];
    myTextField.textAlignment = NSTextAlignmentCenter;
    myTextField.backgroundColor = [UIColor grayColor];
    myTextField.font = [UIFont fontWithName:@"Helvetica" size:(17)];
    myTextField.layer.borderWidth = 0.70 ;
    myTextField.layer.borderColor =[ UIColor orangeColor].CGColor ;
    myTextField.returnKeyType = UIReturnKeyDone;

          x+=36 ;

    [self.view addSubview:myTextField];

} 
```

# 杂注标记 - myDatePicker

```
myDatePicker.date = [NSDate date];

[myDatePicker addTarget:self action:@selector(pickerChanged:)    forControlEvents:UIControlEventValueChanged];

myTextField.inputView = myDatePicker;   //link text filed with picker 
```

# 杂注标记 - UIToolbar

```
UIToolbar* toolBar = [[UIToolbar alloc] init];
toolBar.barStyle = UIBarStyleBlack;
toolBar.translucent = YES;
toolBar.tintColor = nil;
[toolBar sizeToFit];

UIBarButtonItem* doneButton = [[[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                style:UIBarButtonItemStyleBordered target:self
                                                               action:@selector(pickerHide:)] autorelease];

[toolBar setItems:[NSArray arrayWithObjects:doneButton, nil]];

myTextField.inputAccessoryView = toolBar; 

[toolBar release];    } 
```

# 杂注标记 - datePickerChanged

```
 - (void)pickerChanged:(id)sender{

 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];

 [formatter setDateFormat:@"h:mm"];

 NSString* myDate = [formatter stringFromDate:myDatePicker.date];

 NSLog(@"date is: %@", myDate);

 myTextField.text = myDate;

 [formatter release];     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:59:29.150

我发现我需要的只是将 myDatePicker 和我的 toolBar 放入循环中，仅此而已。跳我对我的问题的回答帮助别人。

# jquery - jQuery 从所有元素中删除样式属性

> ID：15705332
> 
> 赞同：17
> 
> 时间：2013-03-29T14:31:26.040
> 
> 标签：jquery, html

我知道如何从单个元素中删除属性，已经有一些关于此的帖子：

```
$("div.preview").removeAttr("style"); 
```

这是html代码：

```
<div class="preview" style="background-color:white">
   <p>Some text<span style="font-size:15px;">some text</span></p>
   some more code
</div> 
```

问题是这只会从预览 div 中删除样式属性。我想从该 div 内的所有元素中删除。这只是一个例子，在实际场景中会有更广泛的html。

有什么捷径可以做到吗？

更新：太好了，我现在知道该怎么做了。但是，如果将 html 作为存储在变量中的字符串发送给函数会怎样。所以而不是

```
$("div.preview") 
```

我有

```
var string = '<div class="preview"><p style='font-size:15px;'>....</p><div>' 
```

有没有办法在下面说类似的话？

```
$(string).find(*).removeAttr("style"); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-29T14:32:47.373

您可以使用通配符选择器`*`来选择下面的所有内容`div.preview`。

[jsFiddle](http://jsfiddle.net/WhZst/)

```
$('div.preview *').removeAttr('style'); 
```

## 更新

RE：您的相关问题，如果我们有一个字符串而不是 DOM 元素。我们可以将它们转换为 jQuery 对象，删除上面的属性，然后将它们转换回来（如果需要）。

[jsFiddle](http://jsfiddle.net/Z2eMA/)

```
// jQuery extension to get an element's outer HTML
// http://stackoverflow.com/a/2419877/1156119
jQuery.fn.outerHTML = function(s) {
    return s
        ? this.before(s).remove()
        : jQuery("<p>").append(this.eq(0).clone()).html();
};

var string = '<div class="preview"><p style="font-size:15px;">....</p><div>'
var elements = $(string);
elements.find('*').removeAttr('style');

var withoutStyles = elements.outerHTML();
alert(withoutStyles); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T14:32:57.900

尝试：`$("div.preview").children().removeAttr("style");`

或：`$("div.preview").find("*").removeAttr("style");`也得到孙子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:33:01.153

`$("div.preview,div.preview *")).removeAttr("style")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:33:16.553

```
$("div.preview, div.preview *").removeAttr("style"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T14:35:10.070

选择 div，选择它的子项，然后将 div 添加回集合并删除类。

```
$('div.preview').find('[style]').addBack().removeAttr('style')
// replace addBack with andSelf for older jQuery
// if you don't want to remove it from the preview div, just leave addBack off. 
```

但是，从长远来看，修复编辑器可能比修复结果更好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T14:35:38.597

你可以试试这个

```
$("div.preview").find('*').removeAttr("style"); 
```

从所有子元素中删除样式`div.preview`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-05-28T05:19:54.480

尝试这样做

```
$("#frameDemo").contents().find("#div_id").parent('div').removeAttr('onclick');
$("#frameDemo").contents().find("#div_id").children('div').removeAttr('onclick'); 
```

# windows-8 - 在 WinRT 中访问网络共享路径

> ID：15705334
> 
> 赞同：1
> 
> 时间：2013-03-29T14:31:29.710
> 
> 标签：windows-8, windows-runtime

有没有办法访问任意网络共享路径并在 WinRT 中读取它们的内容？以编程方式，我想从 WinRT 应用程序中的网络共享路径中读取。我收到拒绝访问错误。

有人告诉我，如果应用程序请求许可，则可以使用文件选择器访问网络共享路径。

但就我而言，我无权访问文件选择器。相反，如果有路径，则在解析我的模型时，我需要从该路径中读取内容。如果该路径是网络共享路径，它将失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T07:21:06.093

没有用户的明确许可（通过文件选择器），您将无法访问任意文件。

如果应用程序的清单包含相关的声明，则可以读取一些众所周知的位置，例如音乐和图片库，但除此之外，所有应用程序无需用户授予权限（至少一次）即可访问的是其[本地应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:09:19.007

看看这个问题：[Windows 8 Metro App File Share Access](https://stackoverflow.com/questions/15280599/windows-8-metro-app-file-share-access)

您可以通过使用有权访问文件共享的 Web 服务来解决此限制。;)

# iphone - iPhone SDK - 另一个控件内的相对位置？

> ID：15705335
> 
> 赞同：1
> 
> 时间：2013-03-29T14:31:35.033
> 
> 标签：iphone, ios, objective-c, ipad

如何判断 UIImageView B 的相对位置（x 和 y）（或 UIImageView B 的“内部”位置？？）？

![例子](../Images/64a63d8b5811963e6bf935b9eda96eac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:38:27.577

要了解视图相对于另一个用途的位置`[aView convertPoint:toView:]`，您可以在[此处](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/convertPoint%3atoView%3a)和[此处](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/convertRect%3atoView%3a)`[aView convertRect:toView:]`找到此功能的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:34:17.463

frame 是您正在寻找的属性，它为您提供视图的原点和大小，相对于其父视图

```
UIView *a = //outer view
UIView *b = //inner view
[a addSubview:b];

CGRect bFrame = b.frame; 
NSLog(@"%@", NSStrinFromCGRect(bFrame)); //will be something like (100, 100, 40, 20) 
```

编辑：我没有意识到它们不是子视图（我不使用 IB），因此您需要转换为 a 的坐标系统：

```
 CGRect bFrame = [a convertRect:b.frame fromView:b.superView]; 
```

# php - 标题位置将我发送到空白页面

> ID：15705342
> 
> 赞同：3
> 
> 时间：2013-03-29T14:31:57.150
> 
> 标签：php

标头将我发送到与正确页面相同的地址，但为空（全白）。我已经尝试了一些东西来破解并且运行良好（比如更改文本）。问题是它不会把我送到谷歌。

```
$insert = 'INSERT into appusers(appname, email, password, month) 
          VALUES("'.$appname.'","'.$email.'","'.$password.'","'.$monthpay.'")';  
mysql_query($insert);
session_start();
$_SESSION['id'] = $data['id']; 
header("Location: http://www.google.com/"); 
exit; 
```

我试图添加 ob_start(); 一开始，它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:37:30.400

代替

```
header("Location: http://www.google.com/"); 
```

和

```
if( !headers_sent() ){
  header("Location: http://www.google.com/");
}else{
  ?>
  <script type="text/javascript">
  document.location.href="http://www.google.com/";
  </script>
  Redirecting to <a href="http://www.google.com/">http://www.google.com/</a>
  <?php
}
die(); 
```

这样，即使在重定向之前有输出，它应该仍然可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T14:34:39.977

您的脚本之前可能有一些空白

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:38:03.810

如果您向浏览器回显了任何内容，那么您的标头重定向将不起作用。这很可能是问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-10T02:49:49.650

首先，您可以重定向到 about:blank ，而不是重定向到[http://google.com/ 。](http://google.com/)

`header("Location: about:blank");`

这将向查看者显示一个空白页面，就好像他们在浏览器中打开了一个新选项卡一样。

编辑：这适用于边缘，但不适用于 Firefox 或 chrome，它们分别抛出“损坏的内容”和“ERR_UNSAFE_REDIRECT”错误。

我发现这`header("refresh:0;url=about:blank" );`将绕过这个限制并几乎立即重定向用户！

# jquery - 使用带有magento的延迟加载jquery插件（mika tuupola），淡入淡出效果动画闪烁

> ID：15705345
> 
> 赞同：2
> 
> 时间：2013-03-29T14:32:16.780
> 
> 标签：jquery, magento, twitter-bootstrap, lazy-loading

我将 Mika Tuupola 的 jquery 插件与 Magento CE 1.7.x 一起使用。我在产品图像上使用淡入淡出动画效果，通过将类设置为图像的惰性，然后调用 $jq191(img.lazy).lazyload();。另外，我使用 var $jq191= jQuery.noConflict() 的 jquery 无冲突模式。我不知道问题出在哪里，或者在这个问题中粘贴什么代码。我希望有人遇到过这个问题，也许可以从他们的经验中得到启发。图像位于嵌套在 li 标记中的锚点内，该 li 标记嵌套在 ul 标记中。我也在使用 twitter 引导程序。我已经尝试了仅使用引导程序的插件，并且效果很好。但是当我将 magento 添加到混合物中时，它会导致 google chrome 和 firefox 闪烁。它在 Internet Explorer 中运行良好，但即使在 Internet Explorer 中，

**解决方案！** 好的，在查看了可能导致问题的 magento 中加载了哪些脚本之后。看起来 script.aculo.us effects.js 与 jquery 延迟加载插件冲突。我不明白为什么会这样，因为延迟加载插件是自包含的，有自己的范围，所以它不会污染全局命名空间。我删除了 effects.js，闪烁停止了。我必须查看lazyload，为什么要这样做。如果有人想解释，我很感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T15:22:14.587

这是由于`lazyload`内部使用`appear`事件和`Effect.Appear`from之间的冲突`scriptaculous`。

它可以通过用脚本中`"appear"`的另一个自由值（例如`"lazyappear"`）替换所有出现的 来解决。`lazyload`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T13:03:13.163

上面的答案修复了一些问题，但并不完全。此问题与此有关：[https ://bugs.chromium.org/p/chromium/issues/detail?id=580634](https://bugs.chromium.org/p/chromium/issues/detail?id=580634)

# android - 如何使用滚动视图进行复杂布局

> ID：15705346
> 
> 赞同：0
> 
> 时间：2013-03-29T14:32:18.087
> 
> 标签：android, layout, scrollview

我需要执行此布局：

参见图片来自： [https ://lh3.googleusercontent.com/-_uW9jKzUY_M/UVWlL2SnNBI/AAAAAAAAAOw/geY-Q-vTsqY/s540/myImage+%283%29.png](https://lh3.googleusercontent.com/-_uW9jKzUY_M/UVWlL2SnNBI/AAAAAAAAAOw/geY-Q-vTsqY/s540/myImage+%283%29.png)

*   区域 1 是线性/相对布局的复杂叠合
*   区域 2 也很复杂，但会包含在滚动视图中
*   区域 3 包含 2 个垂直线性布局的按钮

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:39:01.193

那这个呢？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.33"
        android:orientation="vertical" >
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />
    </LinearLayout>
    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.33" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="TextView" />
    </ScrollView>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.25"
        android:orientation="vertical" >
        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:21:26.813

我自己找到了答案。

我必须使用layout_above 属性和一个主要的RelativeLayout。

看这个例子：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/footer"
        android:layout_gravity="top"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView1" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:text="TextView2" />

        </LinearLayout>   
    </ScrollView>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/footer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button2" />
    </LinearLayout>

</RelativeLayout> 
```

# cakephp - cakephp 从模型调用控制器动作

> ID：15705353
> 
> 赞同：0
> 
> 时间：2013-03-29T14:32:37.677
> 
> 标签：cakephp

我有一个购物车网站，成功购买后，我需要发送一封邮件，其中包含订单中的所有产品详细信息作为附件。我使用了胖模型瘦控制器方法，我所有的功能都在模型中。我有一个控制器操作，它将通过将订单 ID 与视图一起传递来提供订单详细信息。使用 dompdf 我可以将此 html 转换为 pdf 并可以创建一个文件。因此，为了创建附件，我可以通过传递一些参数来使用相同的功能。我的邮件发送代码在模型中。从这里我需要调用控制器操作并需要获取刚刚创建的 pdf 文件名。我知道从模型中调用控制器操作是违反 MVC 架构的。但是我怎样才能实现这个功能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:46:17.483

'胖'模型是一件好事，但是，尽量不要把不应该放在 Model 中的东西放在*Model 中*。在 MVC 中，模型应该处理与*数据*相关的所有事情。

## 胖模特

**“胖”模型的概念是通过将与数据相关**的代码移动到模型中来减少控制器中的代码量。例如：

取而代之的是；（在您的控制器中）：

```
public function view($id)
{
    $this->request->data = $this->SomeModel->find('first', array(
        'fields' => array(
            // list of fields to retrieve
        ),
        'conditions' => array(
            // conditions
        ),
        // etc.
    ); 
} 
```

将查找指令移动到模型中的方法并使用它：

```
public function view($id)
{
    $this->request->data = $this->SomeModel->someMethod($id);
} 
```

## 放置代码的其他位置

**与 data 无关的**代码也可以移到您的 Controller 之外（使其“瘦”）。CakePHP 提供了将代码移动到的其他位置，例如在[**组件内部**](http://book.cakephp.org/2.0/en/controllers/components.html)

然后在你的控制器里面；

这：

```
public function view($id)
{
    $this->request->data = $this->SomeModel->someMethod($id);

    // use functionality of a component
    $this->SomeComponent->doSomething();
} 
```

## 通过事件触发功能

为了将代码和逻辑保留在控制器之外，CakePHP 2.x 现在提供了一个“事件”系统。这允许您在发生特定事件时执行代码。您可以通过事件传递附加信息（事件将成为通过您的应用程序的“通信渠道”）。

为某些事件发送电子邮件就是一个很好的例子。CakePHP 还使用发送邮件来说明 CakePHP 中的事件系统；这可能是您正在寻找的：

[调度事件 - 发送电子邮件](http://book.cakephp.org/2.0/en/core-libraries/events.html#dispatching-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:14:53.623

让您的模型方法返回数据，以便您将其保存在控制器中，并将其与您的 pdf 相关数据一起传递给其他模型函数。

# javascript - 使用 javascript 在 IE 10 中更改背景图像

> ID：15705362
> 
> 赞同：0
> 
> 时间：2013-03-29T14:33:03.780
> 
> 标签：javascript, html, internet-explorer-10

这些天我正在开发一个网站，我为我的网站开发了一个选项，以便用户可以更改背景图像。

我以前使用 Windows 7 和 XP，更改背景图像在 win 7 和 XP 的 Internet Explorer 上都有效，但最近我移至 IE 10 附带的 Windows 8，当我使用 IE 10 测试我的网站时，更改背景图像不起作用。

为什么这些人要改变这些东西？我什至不应该关心这件事，但仍然有人使用 IE。:(

这是我的代码

```
 var body = document.getElementsByTagName("body")[0];
 body.style.backgroundImage = "url(" + picurl + ")"; 
```

知道如何使用 IE 10 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:37:12.703

如果图像是事先已知的，那么如果您在 CSS 文件的类中指定它并简单地添加一个新类，则会减少维护。在 jQuery 中：

```
$(body).addClass('my-bgd-class'); 
```

但是，由于您使用的是变量，因此您可以：

```
$(body).css('background-image', 'url("' + picurl + '")'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:41:14.383

您提供的代码在 IE10 中为我工作。万一您的网址有空格字符，试试这个

```
body.style.backgroundImage = "url('" + picurl + "')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:43:31.993

您引用的代码对我来说很好。

我已经做了一个 jsFiddle 来证明它——http: [//jsfiddle.net/Ryavz/](http://jsfiddle.net/Ryavz/)

```
var picurl = "http://static.travelblog.org/Wallpaper/pix/waterfall_desktop_background-1600x1200.jpg";  //just a random image I found on the web
var body = document.getElementsByTagName("body")[0];
body.style.backgroundImage = "url("+picurl+")"; 
```

上面的代码在 IE10 和其他浏览器中对我来说是一样的。

如果您的网站在 IE10 中存在特定问题，则与您引用的代码无关。

您可能应该在`url()`样式参数中添加引号，以防 URL 中有空格或括号或类似的东西，但除此之外，您的代码很好，它适用于所有带或不带引号的浏览器.

# iphone - iOS SDK - 部分截图？

> ID：15705371
> 
> 赞同：0
> 
> 时间：2013-03-29T14:34:34.420
> 
> 标签：iphone, objective-c, ipad

如何截取 iPad/iPhone 应用程序的屏幕截图并将其限制在“UIImageView A”范围内，但还要让屏幕截图包含恰好位于“UIImageView A”顶部的任何控件（UIImageView 或 UILabels）？当标准显示与视网膜显示时，它会搞砸吗？

提前致谢！

![例子](../Images/bac7cd1af9cb4b153752227339c362be.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:39:00.887

另一个想法是简单地以老式方式截取屏幕截图，例如[查看此相关问题中的答案，](https://stackoverflow.com/questions/2200736/how-to-take-a-screenshot-programmatically)然后将其裁剪到“A”UIView 的框架矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:06:43.517

你需要一个封闭的视图，因为 UIImageView 不打算有子视图。将您想要捕获的所有内容放在该封闭视图中（一个简单的 UIView 就可以了）。下面是一个非常简单的实现，它忽略了视图转换之类的东西：

```
// Helper function, calls drawRect: recursively
void drawViewAndSubviews (UIView* view) {
  [view drawRect:view.bounds];
  CGContextRef ctx = UIGraphicsGetCurrentContext();
  for (UIView* subview in view.subviews) {
    CGPoint origin = subview.frame.origin;
    CGContextTranslateCTM(ctx, origin.x, origin.y);
    drawViewAndSubviews(subview);
    CGContextTranslateCTM(ctx, -origin.x, -origin.y);
  }
}

- (void)takeScreenshot:(UIView *)view {
  UIGraphicsBeginImageContext(view.bounds.size);
  drawViewAndSubviews(view);
  UIImage* image = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  // Now 'image' has a snapshot of 'view' and its subviews
} 
```

# java - NoRouteToHost Exception

> ID：15705373
> 
> 赞同：0
> 
> 时间：2013-03-29T14:34:42.683
> 
> 标签：java, sockets, socketexception

I can SSH and PING a machine running Fedora 18, but whenever I try connect to it using Sockets, I get NoRouteToHostException (I tried Java and C++, and I get the same error).

Any ideas? I have looked around but could not find a solution that works.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:43:16.347

If you're not trying to connect to the same port that ssh(1) uses (port 22) then the problem could be that a firewall exists between you and the destination and it doesn't allow your packets through. You can test this by having your code try to connect to port 22 on the destination host. If you don't get the same exception, then this is the likely cause.

You should also verify that your code is OK by having it try to connect to the local host (i.e., the computer on which it's running). You should not get the no-route-to-host exception (unless the firewall on the local host is doing something odd)

# sql - 无法弄清楚 Access SQL 语法错误

> ID：15705375
> 
> 赞同：2
> 
> 时间：2013-03-29T14:34:43.787
> 
> 标签：sql, ms-access

我正在尝试在 Microsoft Access SQL 中编写此查询，并且我一生都无法弄清楚代码中的语法错误。

```
SELECT base.study_group, base.NPI,inv.log_date AS invite_date, rec.log_date as
recieved_date, rej.log_date as reject_date
FROM CODAAC_master AS base
LEFT JOIN Pre_Log AS inv ON base.NPI = inv.NPI AND inv.tracking_event='INVA'
LEFT JOIN Pre_Log AS rec ON base.NPI = rec.NPI AND rec.tracking_event='RECA'
LEFT JOIN Pre_Log AS rej ON base.NPI = rej.NPI AND rej.tracking_event='REJA'
WHERE base.study_year = '2013'
ORDER BY base.study_group, base.NPI; 
```

我回来的错误是：

```
"Syntax error (missing operator) in query expression" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:36:47.653

MS Access 需要围绕多个连接的括号：

```
SELECT base.study_group, 
  base.NPI,
  inv.log_date AS invite_date, 
  rec.log_date as recieved_date, 
  rej.log_date as reject_date
FROM ((CODAAC_master AS base
LEFT JOIN Pre_Log AS inv 
  ON base.NPI = inv.NPI AND inv.tracking_event='INVA')
LEFT JOIN Pre_Log AS rec 
  ON base.NPI = rec.NPI AND rec.tracking_event='RECA')
LEFT JOIN Pre_Log AS rej 
  ON base.NPI = rej.NPI AND rej.tracking_event='REJA'
WHERE base.study_year = '2013'
ORDER BY base.study_group, base.NPI; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T14:36:48.570

您需要在连接之间添加括号，因为它在 MS Access 中是必不可少的。（*这在其他 RDBMS 上是可选的*）

```
SELECT  base.study_group, 
        base.NPI,
        inv.log_date AS invite_date, 
        rec.log_date as recieved_date, 
        rej.log_date as reject_date
FROM  ((CODAAC_master AS base LEFT JOIN Pre_Log AS inv 
            ON base.NPI = inv.NPI AND inv.tracking_event='INVA')
        LEFT JOIN Pre_Log AS rec 
            ON base.NPI = rec.NPI AND rec.tracking_event='RECA')
        LEFT JOIN Pre_Log AS rej 
            ON base.NPI = rej.NPI AND rej.tracking_event='REJA'
WHERE base.study_year = '2013'
ORDER BY base.study_group, base.NPI; 
```

*   [额外来源：**MS Access 中的多个 LEFT JOIN**](http://nm1m.blogspot.com/2007/10/multiple-left-joins-in-ms-access.html)

# java - 使用 App 引擎配置 Restlet

> ID：15705377
> 
> 赞同：0
> 
> 时间：2013-03-29T14:34:51.080
> 
> 标签：java, google-app-engine, web.xml, restlet, restlet-2.0

我正在使用谷歌应用引擎来开发我的软件后端，使用 java 和 Restlet 框架。我的war目录下有index.jsp，当有人访问我的网站（例如example.com）时，我想将其视为默认页面。所以我已经在 web.xml 的 Welcome-file-list 部分提到了它。

```
<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

另外，我将我的 Restlet servlet 映射到 web.xml 中的“/*”。

```
<servlet-mapping>
    <servlet-name>RestletServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

但是问题出现在这里，因为即使是对默认页面（即 example.com）的调用，也会转到显然在其路由器中找不到映射的 restlet。所以我决定将restlet servlet映射到“/restlet/*”。

```
<servlet-mapping>
    <servlet-name>RestletServlet</servlet-name>
    <url-pattern>/restlet/*</url-pattern>
</servlet-mapping> 
```

但是有了这个我得到了 HTTP 404 错误，因为即使 web.xml 成功地将调用路由到 restlet，但是在这种情况下，restlet 在其路由器对象中找不到映射。我显然已经更改了restlet路由器中的映射以匹配新模式“restlet/*”。

```
router.attach("/restlet/doSomething",DoSomething.class); 
```

如果有人可以帮助我，那就太好了。以下是我完整的 web.xml：

```
<servlet>
    <servlet-name>RestletServlet</servlet-name>
    <servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
    <init-param>
        <param-name>org.restlet.application</param-name>
        <param-value>com.mWallet.loyaltyCardCase.LoyaltyCardCaseWebService
        </param-value>
    </init-param>
</servlet>

<!-- Catch all requests -->
<servlet-mapping>
    <servlet-name>RestletServlet</servlet-name>
    <url-pattern>/restlet/*</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

谢谢！

玛纳斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:27:38.320

您无需更改restlet 路由器中的映射以匹配新模式“restlet/*”，因为restlet 路由器现在将“example.com/restlet/”视为基本url。

So, if you change the router to match "/restlet/doSomething", your actual url will be "example.com/restlet/restlet/doSomething", which obviously will not work.

So, change your restlet routing to:

```
router.attach("/doSomething",DoSomething.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:09:58.820

我在我的项目及其工作中做到了。我想你**忘了****在 web.xml**中写下面的代码

 **```
<servlet>
<servlet-name>RestletServlet</servlet-name>
<servlet-class>org.restlet.ext.servlet.ServerServlet</servlet-class>
 <init-param>
    <param-name>org.restlet.application</param-name>
    <param-value>com.wa.gwtamazon.server.RestApi</param-value>
 </init-param>

  <!-- Catch all requests -->
<servlet-mapping>
<servlet-name>RestletServlet</servlet-name>
<url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我已经在此链接中回答了[Restlet API 示例](https://stackoverflow.com/questions/14890143/restlet-api-example/14893293#14893293)可能会对您有所帮助。**

# android - 03-29 15:21:21.400: E/AndroidRuntime(6203): android.database.StaleDataException: 访问关闭游标

> ID：15705379
> 
> 赞同：0
> 
> 时间：2013-03-29T14:34:55.763
> 
> 标签：android, listview, simplecursoradapter

在一个片段中，当我删除它以打开另一个片段时，我收到以下错误

> 03-29 15:21:21.400: E/AndroidRuntime(6203): android.database.StaleDataException: 访问关闭游标

`SimpleCursorAdapter`当我使用 a打开新片段删除包含列表视图的当前片段时，会发生此错误。

我仅在 Android 2.x 和兼容性库上遇到此问题。

您是否有避免使应用程序崩溃的解决方法:)？

# ruby-on-rails - 如何从命令行退出 IRB？（在 mac 上使用终端）

> ID：15705383
> 
> 赞同：27
> 
> 时间：2013-03-29T14:35:03.083
> 
> 标签：ruby-on-rails, terminal, irb

基本上，我在终端中输入得很好，使用 IRB 运行 ruby​​ 命令：

```
2.0.0-p0 :014 > bank_account.withdraw(2222)
 => -1222 
```

但有时我不小心漏掉了一个引号。

```
2.0.0-p0 :020 > BankAccount.create_for("Jim","Johnson)
2.0.0-p0 :021"> bank_account.withdraw(333) 
```

如果你仔细看，你会发现我错过的语音标记出现在左侧行号旁边，补丁版本旁边。

从现在开始，每次我运行命令时都会出现该语音标记！它会停止命令的工作：

```
2.0.0-p0 :021"> BankAccount.create_for("Julian","Hurley")
2.0.0-p0 :022"> BankAccount.create_for("Katt","Smith")
2.0.0-p0 :023"> exec($0) 
```

我想知道的是，如何去掉那个引号？或者从命令行退出 IRB 以重置它？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-29T14:40:11.370

如果您还没有关闭报价，只需输入报价并点击返回。

可以通过键入 exit 来退出控制台，但在这种情况下，您需要按 Control - C

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-01-17T04:49:12.270

Control - C 后跟 Control - Z。希望对您有所帮助！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-08T23:05:45.927

我遇到了同样的问题。`irb`要在终端内退出，请键入`exit`。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-16T14:55:49.430

使用**Ctrl-D**，它是 irb 的输入结束。如果您正在执行某个命令，请先使用 Ctrl-C 终止该命令的输入。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-26T03:44:33.317

键入`quit()`并点击`Enter`退出 ruby​​。

# c++ - 在 C++ 中使用指针时的内存管理

> ID：15705385
> 
> 赞同：0
> 
> 时间：2013-03-29T14:35:16.090
> 
> 标签：c++, arrays, pointers, memory-management

我有这些情况，我想知道我是否正确管理我的记忆。当我启动可执行文件时，我在任务管理器中观察内存消耗，并查看内存如何没有弹回初始数量，这让我怀疑我没有在需要的地方清除内存。因此，在第一种情况下，我有一个向动态数组添加新元素的函数：

```
struct Color {
    int R;
    int G;
    int B;
}

int TotalColors;
Color* Rainbow;

void AddColor(Color NewColor) {
    // So, I create a new array of size TotalColors+1
    Color* NewRainbow = new Color[TotalColors+1];
    // Now I add the existing elements
    for (int i=0; i<TotalColors; i++) {
        NewRainbow[i] = Rainbow[i];
    }
    // And lastly, I add the new element
    NewRainbow[TotalColors] = NewColor;
    // Now, I assign the NewRainbow to Rainbow (I don't know if it's correct)
    Rainbow = NewRainbow;
} 
```

那么，在这种情况下，你认为我错过了什么吗？这是可行的，但我想确保从内存中删除未使用的东西。我还有一个删除元素的功能，如下所示：

```
void RemoveColor(Color Removable) {
    // Again, I create a new array of size TotalColors-1
    Color* NewRainbow = new Color[TotalColors-1];
    // I scan the list and add only those elements which are not 'Removable'
    for (int i=0; i<TotalColors; i++) {
        // Let's suppose that Removable exists in the list
        if (Rainbow[i].R != Removable.R && Raibow[i].G != Removable.G && ... {
            NewRainbow [i] = Rainbow[i];
        }
    }
    // Again, the same operation as above
    NewRainbow[TotalColors] = NewColor;
    Rainbow = NewRainbow;
} 
```

在这种情况下，我不知道 Rainbow[Removable] 会发生什么，我的意思是，被删除的数组元素。最后一种情况是，我尝试将元素的指针从数组发送到函数。

```
Color* GetColor(int Index) {
    Color* FoundColor;
    // Scan the array
    for (int i=0; i<TotalColors; i++) {
        if (i == Index) FoundColor = &Rainbow[i];
    }
    return FoundColor;
}

// And I use it like this
void ChangeColor(int Index) {
    Color* Changeable;
    Changeable = GetColor(Index);
    SetRGB(Changeable, 100, 100, 100);
}

// And this is what changes the value
void SetRGB(Color* OldRGB, int R, int G, int B) {
    (*oldRGB).R = R;
    (*oldRGB).G = G;
    (*oldRGB).B = B;
} 
```

就是这样。所以，这行得通，但我不确定是否有这么多指针我没有忘记删除一些东西。例如，当我`RemoveColor`没有看到内存发生变化时（也许某些字节不会产生影响），我只想让专业人士告诉我是否遗漏了什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:39:48.800

在第一个函数`AddColor()`中，您不会删除先前分配的内存。

```
Rainbow = NewRainbow; // leaking the memory Rainbow was previously pointing to. 
```

将最后一行更改为：

```
delete[] Rainbow;
Rainbow = NewRainbow; 
```

同样的事情`RemoveColor()`

任何时候使用`new`操作符都需要有一个对应的`delete`. 此外，如果您`new[]`在您的情况下使用 as 分配一个数组，它必须有一个对应的`delete[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:39:14.810

为了不担心您是否忘记删除指针，您不应该使用普通指针。相反，请使用智能指针，例如

```
std::shared_ptr
std::unique_ptr
etc. 
```

或者，如果您还没有 C++11，请使用

```
boost::shared_ptr
boost::scoped_ptr 
```

有关智能指针的更多信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Smart_pointer#C.2B.2B_smart_pointers)和特定文档。

# javascript - 如何根据链接 URL 激活我的 jquery tabber

> ID：15705391
> 
> 赞同：2
> 
> 时间：2013-03-29T14:35:27.993
> 
> 标签：javascript, jquery

我对 jquery 很陌生，我决定构建一个 jquery tabber。到目前为止一切顺利，但我有一个小问题！！！我看不到如何根据 URL 激活 tabber。例如，当链接为 时`www.myweb.com#tab2`，第二个选项卡将被激活。我的jquery如下。现在我知道 jquery 有它自己的 tabber 脚本，但我不想使用它。所以请其他人帮我完成这个

**Javascript**

```
$(document).ready(function() {

    var hash = location.hash;
    var link1 = ("ul#tabs li a[href='" + hash + "']")
    var link2 = ("ul.tabs li a[href='" + hash + "']")
    var link3 = ("ul#tabs li[href='" + hash + "']")

    $(".tab_content").hide(); //Hide all content
    if ((link3.length)(link2.length)(link1.length))

            { //check if such link exists
                      $(link3, link2, link1).parent().addClass("active"); //Activate tab
                      $(hash).show();
    }

    else {
      $("ul.tabs li a:first, ul#tabs li:first, ul#tabs li a:first").addClass('active');
      $(".tab_content:first").show()

        // On Click Event
        $("ul.tabs li").click(function() {
            $("ul.tabs li").removeClass("active"); //Remove any "active" class
            $(this).addClass("active"); //Add "active" class to selected tab
            $(".tab_content").hide(); //Hide all tab content

            var activeTab = $(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
            $(activeTab).fadeIn(); //Fade in the active ID content
            return false;
        });

}); 
```

**HTML**

```
<ul class="tabs">
    <li><a href="#tab1">Design Team</a></li>
    <li><a href="#tab2">Publications</a></li>
    <li><a href="#tab3">Awards &amp; Recognitions</a></li>
    <li><a href="#tab4">Our Mission</a></li>
    <li class="last-item"><a href="#tab1">Company Profile</a></li>
</ul> 
```

这就是我已经走了多远。由于我有 3 个选择器，jquery 代码奇怪地不起作用我如何实现这一点，所以 tabber 是基于 URL 激活的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:42:52.883

看看 JQueryUI，他们有这样的预构建组件。具体来说：http: [//jqueryui.com/tabs/](http://jqueryui.com/tabs/)

**编辑：**

或者他们是您构建自己的特定原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:11:57.143

您可以使用以下设置选定的选项卡：

```
$(document).ready(function() {

    $('#tabs').tabs(); // make jquery tabs

    $("#tabs").tabs("select", window.location.hash);
}); 
```

函数的第二个参数`$.tabs`接受索引或选择器。

# java - Java 中的文件传输无法正常工作

> ID：15705394
> 
> 赞同：0
> 
> 时间：2013-03-29T14:35:38.520
> 
> 标签：java, file, file-transfer

我试图编写简单的“FTP”程序，但突然出现错误。所以这是一个有客户端和服务器的网络，服务器存储从客户端上传的文件，也有可能从服务器下载文件。但是当我上传文件时它作为一个空文件保存在服务器目录中，有人会帮我找到代码中的错误吗？

这里是客户

```
String nameOfFileToUp = fileFromFileChooser.getName();
System.out.println("fileChooserfile name= " + fileFromFileChooser.getName());
System.out.println("File path= " + fileFromFileChooser.getPath());
pw.println(nameOfFileToUp);
File sendFile = new File(fileFromFileChooser.getPath());
FileInputStream fis = new FileInputStream(sendFile);
int size =(int) fileFromFileChooser.length();
byte[] buffer = new byte[size+1];
int bytes = 0;
while((bytes = fis.read(buffer)) != -1)
{
    out.write(buffer,0,bytes);
}
fis.close(); 
```

其中 pw 是 PrintWriter，

和服务器

```
FileOutputStream fos = new FileOutputStream(f);
DataOutputStream dops = new DataOutputStream(fos);

while(done)
{
    fc = in.readLine();
    if(fc == null)
    {
        done = false;
    }
    else
    {
        dops.writeChars(fc);
    }
 }
fos.close(); 
```

任何人都可以帮忙吗？请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:45:05.570

您需要刷新/关闭输出流。

此外，您的服务器不应按“行”读取，而应读取字节（就像您的客户端代码一样）。

# python - Pyramid 中带有斜杠的路线

> ID：15705399
> 
> 赞同：7
> 
> 时间：2013-03-29T14:35:41.447
> 
> 标签：python, url-routing, pyramid

假设我有一条路线“/foo/bar/baz”。我还想有另一个对应于“/foo”或“/foo/”的视图。但我不想系统地为其他路线附加斜杠，只为 /foo 和其他一些路线（/buz 但不是 /biz）

从我所见，我不能简单地定义具有相同 route_name 的两条路线。我目前这样做：

```
config.add_route('foo', '/foo')
config.add_route('foo_slash', '/foo/')
config.add_view(lambda _,__: HTTPFound('/foo'), route_name='foo_slash') 
```

Pyramid 中是否有更优雅的东西可以做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T18:00:11.437

Pyramid 有一种方法让`HTTPNotFound`视图**自动附加斜线**并再次测试路由以进行匹配（Django 的`APPEND_SLASH=True`工作方式）。看一眼：

**[http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/urldispatch.html#redirecting-to-slash-appended-routes](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/urldispatch.html#redirecting-to-slash-appended-routes)**

As per this example, you can use `config.add_notfound_view(notfound, append_slash=True)`, where `notfound` is a function that defines your `HTTPNotFound` view. If a view is not found (because it didn't match due to a missing slash), the `HTTPNotFound` view will append a slash and try again. The example shown in the link above is pretty informative, but let me know if you have any additional questions.

Also, heed the warning that this should not be used with POST requests.

There are also many ways to skin a cat in Pyramid, so you can play around and achieve this in different ways too, but you have the concept now.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T14:58:15.803

当我为我的项目寻找相同的东西时找到了这个解决方案

```
def add_auto_route(config,name, pattern, **kw):
    config.add_route(name, pattern, **kw)
    if not pattern.endswith('/'):
        config.add_route(name + '_auto', pattern + '/')
        def redirector(request):
            return HTTPMovedPermanently(request.route_url(name))
        config.add_view(redirector, route_name=name + '_auto') 
```

然后在路由配置过程中，

```
add_auto_route(config,'events','/events') 
```

而不是做`config.add_route('events','/events')`

基本上它是你的方法的混合体。定义了一个名称以 结尾的新路由，`_auto`其视图重定向到原始路由。

**编辑**

该解决方案不考虑动态 URL 组件和 GET 参数。对于像这样的 URL `/abc/{def}?m=aasa`，使用`add_auto_route()`会抛出一个关键错误，因为该`redirector`函数没有考虑到`request.matchdict`。下面的代码就是这样做的。要访问 GET 参数，它还使用`_query=request.GET`

```
def add_auto_route(config,name, pattern, **kw):
    config.add_route(name, pattern, **kw)
    if not pattern.endswith('/'):
        config.add_route(name + '_auto', pattern + '/')
        def redirector(request):
            return HTTPMovedPermanently(request.route_url(name,_query=request.GET,**request.matchdict))
        config.add_view(redirector, route_name=name + '_auto') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:47:19.953

我找到了另一个解决方案。看起来我们可以链接两个@view_config。所以这个解决方案是可能的：

```
@view_config(route_name='foo_slash', renderer='myproject:templates/foo.mako')    
@view_config(route_name='foo', renderer='myproject:templates/foo.mako')
def foo(request):
   #do something 
```

它的行为也与问题不同。该问题的解决方案执行重定向，因此浏览器中的 url 会发生变化。在第二种形式中，/foo 和 /foo/ 都可以出现在浏览器中，具体取决于用户输入的内容。我并不介意，但重复渲染器路径也很尴尬。

# javascript - 在画布上绘制的 Javascript 循环中的错误

> ID：15705402
> 
> 赞同：0
> 
> 时间：2013-03-29T14:36:07.170
> 
> 标签：javascript, loops, if-statement, for-loop

一直把我的头撞在墙上。

我有一张画布

```
<canvas id="myCanvas" onclick=point_it(event) width=1450 height=1100 style="border:1px solid #000000;"> 
```

我有我的观点...

```
points1 = [
{x: 138, y: 34},
{x: 22, y: 119},
{x: 189, y: 144},
{x: 138, y: 34},
];
points2 = [
{x: 98, y: 185},
{x: 39, y: 268},
{x: 183, y: 301},
{x: 98, y: 185},
{x: 150, y: 115},
];

pointsArray = [points1,points2]; 
```

我正在尝试使用 moveTo、关闭和填充来绘制它们。我需要重复可变次数，但我无法让这个循环正常工作......

```
for (var i = 0; i < pointsArray.length; i++) {
    for (var p = 0; p+1 <= pointsArray[i].length; p++)  {
        if (p<1)    {
        var c2 = myCanvas.getContext('2d');
        c2.beginPath();
        c2.fillStyle = '#'+Math.floor(Math.random()*16777215).toString(16);
        }
        if (p<=pointsArray[i].length)   {
        c2.moveTo(pointsArray[i][p].x, pointsArray[i][p].y);
        }
        if (p=pointsArray[i].length)    {
        c2.closePath();
        c2.fill();
        }
    }
} 
```

我是新来的。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:37:47.690

`=`应该在这里`==`：

```
if (p==pointsArray[i].length)    {
     ^^ 
```

# php - 按 PHP 数组的内行排序

> ID：15705404
> 
> 赞同：1
> 
> 时间：2013-03-29T14:36:20.317
> 
> 标签：php, sorting

我有一个具有以下结构的数组：

```
for ($i = 0; $i < SOME_NUMBER; $i++) {
   $arr[$i][] = $info_1;
   $arr[$i][] = $info_2;
   $arr[$i][] = $info_3;
   $arr[$i][] = $DATE;
   $arr[$i][] = $info_4;
} 
```

我需要这个数组按`$DATE`. 现在我不能改变数组的结构，我不能改变键。是否可以`$arr`排序`$DATE`

例子：

```
 after running the loop for 2 times $arr is equal to:

 $arr[0][0] = 'Some Info 1.1';
 $arr[0][1] = 'Some Info 1.2';
 $arr[0][2] = 'Some Info 1.3';
 $arr[0][3] = '05-08-2010';
 $arr[0][4] = 'Some Info 1.4';

 $arr[1][0] = 'Some Info 2.1';
 $arr[1][1] = 'Some Info 2.2';
 $arr[1][2] = 'Some Info 2.3';
 $arr[1][3] = '01-08-2011';
 $arr[1][4] = 'Some Info 2.4'; 
```

预期的输出将是：

```
 $arr[0][0] = 'Some Info 2.1';
 $arr[0][1] = 'Some Info 2.2';
 $arr[0][2] = 'Some Info 2.3';
 $arr[0][3] = '01-08-2011';
 $arr[0][4] = 'Some Info 2.4';

 $arr[1][0] = 'Some Info 1.1';
 $arr[1][1] = 'Some Info 1.2';
 $arr[1][2] = 'Some Info 1.3';
 $arr[1][3] = '05-08-2010';
 $arr[1][4] = 'Some Info 1.4'; 
```

使用`array_sort`没用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:46:07.433

Sorting on the fourth index of each array item, based on a `strtotime()` comparison:

```
uasort($arr, function($a, $b) {
    return strtotime($a[3]) - strtotime($b[3]);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:45:00.690

`usort()`您应该使用使用自定义函数对数组进行排序的php函数。这是一目了然的方法。

**初始化你的数组：**

```
 $arr[0][0] = 'Some Info 1.1';
 $arr[0][1] = 'Some Info 1.2';
 $arr[0][2] = 'Some Info 1.3';
 $arr[0][3] = '05-08-2010';
 $arr[0][4] = 'Some Info 1.4';

 $arr[1][0] = 'Some Info 2.1';
 $arr[1][1] = 'Some Info 2.2';
 $arr[1][2] = 'Some Info 2.3';
 $arr[1][3] = '01-08-2011';
 $arr[1][4] = 'Some Info 2.4'; 
```

**声明比较两个日期的比较函数：**

```
function cmp($a,$b){
 $d1 = date_parse($a[3]);
 $d2 = date_parse($b[3]);
 return  ($d1 < $d2) ? 1 : -1;
} 
```

**最后`usort()`使用您的比较功能调用。**

```
usort($arr,"cmp"); 
```

Please note that the mentioned comparison function assumes that the date is always at the **3rd** index. If you want more flexibility, customize the comparison function to find the date index before the actual comparison. Good luck!

* * *

## More info:

*   [usort()](http://www.php.net/manual/en/function.usort.php)
*   [date_parse()](http://php.net/manual/en/function.date-parse.php)

# php - 存储个人信息的 Web 应用程序的安全性

> ID：15705410
> 
> 赞同：4
> 
> 时间：2013-03-29T14:36:34.240
> 
> 标签：php, postgresql, web-applications, security

我正在开发一个带有前端和后端的 Web 应用程序。公众可以在前端存储信息，某些人可以管理插入的详细信息并进行编辑。

由于应用程序的个人信息安全性非常重要。我想知道我为确保信息安全而采取的措施是否充分。

**1 - “低”级安全**
域有自己的 SSL 证书和 DNSSEC。应用程序在私有 VPS 上运行；所有密码（unix 用户、数据库用户等）都非常强大。

**2 - 目录结构**

```
 /data
    |- lib                   // store php classes and runtime information
    |    |- constants.php    // stores, among others, the private key
    |- cnt                   // logical content
    |- public                // the public root where nginx directs to
    |      |- img            // images
    |      |- res            // other resources
    |      |- index.php      // only contains include('../private.php');
    |- private.php           // the real webapplication root 
```

因此，如果 PHP 出现问题导致代码吐出并损害目录结构；唯一可以通过 NGINX 网络服务器看到的是公共文件夹。

**3 - 数据库**
存储在 postgreSQL 中的信息使用 openssl_encrypt 加密，并`SHA_256_AES`使用存储在 php 文件中的私钥加密（请参阅目录结构`/data/lib/constants.php`）因此，如果数据库遭到破坏/被盗，则没有私钥，数据将无法读取。

**4 - 管理用户**
登录用户获得存储在 cookie 中的 sha1 会话 ID；服务器上存储的会话的登录状态。获取会话（ID）可以通过表单完成；它仅通过 javascript 在 Internet 上发送 sha1 编码的密码哈希。当然密码是加盐的并且有一定的规则（长度> 8，特殊字符等）

**5 - XSS、CSRF、$_POST**
每个用户输入都被过滤；服务器上的更改只能通过后请求进行。每个表单都有一个随机生成的 CSRF 安全令牌。

我唯一不满意的是私钥在服务器上可用，尽管不在公共 webroot 中。这是以某种方式未完成还是有其他方法可以做到这一点？

我错过了什么吗？

# javascript - 在 Ember 中同时存在同一个控制器的多个实例

> ID：15705411
> 
> 赞同：6
> 
> 时间：2013-03-29T14:36:38.213
> 
> 标签：javascript, model-view-controller, controller, ember.js

刚刚在看 Ember Peepcode 视频。它让我明白的一件事是控制器是单例的，因此每个控制器的单个实例是在运行时创建的，并且控制器的数据属性根据需要换入/换出。

但是，当您需要在屏幕上显示同一控制器的多个版本并同时处于活动状态时会发生什么。如果我有多个`example.handlebars`模板，每个模板都需要同时由其自己的`ExampleController`屏幕版本支持，会发生什么？

**Ember 如何处理这种情况？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:52:30.873

有几种方法可以处理（在我[之前的回答](https://stackoverflow.com/a/15702960/1765925)中提到）。

方法一：

`{{render}}`使用模型（需要最新的 Ember.js 构建）：

```
{{render "example" example1}}
{{render "example" example2}} 
```

方法二：

### 2014 年 7 月 7 日更新：`{{control}}` 已从 Ember >= 1.0 中删除。

`{{control}}`（它仍然是越野车，所以如果可以的话，请避免）

```
{{control "example"}} 
```

但首先您需要启用标志：`ENV.EXPERIMENTAL_CONTROL_HELPER = true`在加载 ember.js 文件之前。

还有一个错误，您需要通过以下方式修复：

```
App.register('controller:example', App.ExampleController, {singleton: false } 
```

方法三：

与. `{{each}}`_`itemController`

```
{{#each controller itemController="example"}}
  {{view "example"}}
{{/each}} 
```

这些中的每一个每次都会创建一个新的单独实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T21:12:45.023

我发现，如果您覆盖控制器的 init 方法并将内容设置为新对象（或您正在使用的任何对象），您可以拥有多个独立实例。

```
App.MyMultipleController = Ember.ObjectController.extend({
    content: {},

    init: function(){
        this.set('content', {});
        return this._super.call(this, arguments);
    }
}); 
```

这是一个JSFiddle。出于我自己的目的，它正在使用`ObjectProxy`，但`ObjectController`如果你愿意，你可以使用：http: [//jsfiddle.net/jgillick/D83d8/](http://jsfiddle.net/jgillick/D83d8/)

# windows-8 - Visual Studio 2012 - Windows 8 中的英文错误消息

> ID：15705412
> 
> 赞同：5
> 
> 时间：2013-03-29T14:36:39.203
> 
> 标签：windows-8, visual-studio-2012

已在 Windows 8 Pro（丹麦语）上安装了 Visual Studio 2012 Pro。

问题是现在所有的错误信息都是丹麦语！我记得之前我应该​​只是删除丹麦.net框架语言包，但是现在没有这样的包了！（如[配置 Visual Studio 以显示英文错误消息](https://stackoverflow.com/questions/852569/configure-visual-studio-to-show-error-messages-in-english)）。

那么我现在如何再次获得英文错误消息？

# c# - Gridview DataSource 有行，但 GridView 没有

> ID：15705418
> 
> 赞同：2
> 
> 时间：2013-03-29T14:36:53.980
> 
> 标签：c#, .net

我第一次加载 GridView 很好。然后我对一列进行排序，GridView 返回没有行。调试器显示 DataSource 表中有行，但 GridView 本身没有。（请注意，我正在动态创建 GridView，但据我所知，这并不重要。）

这些是代码行：

```
gv.DataSource = dv;    
gv.DataBind(); 
```

没什么特别的。

这些是调试器在单步执行代码时显示的值。

在第一行之前：

```
dv.Table.Rows.Count 23

((System.Data.DataView)(gv.DataSource)).Table.Rows.Count    '((System.Data.DataView)(((System.Web.UI.WebControls.BaseDataBoundControl)(gv)).DataSource))' is null

gv.Rows.Count   0 
```

在第一行之后：

```
dv.Table.Rows.Count 23

((System.Data.DataView)(gv.DataSource)).Table.Rows.Count    23

gv.Rows.Count   0 
```

在第二行代码之后：

```
dv.Table.Rows.Count 23

((System.Data.DataView)(gv.DataSource)).Table.Rows.Count    23

gv.Rows.Count   0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:49:36.313

也许[这些是您正在寻找的机器人](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sorting.aspx)。

提示：这是手动处理`Sorting`事件的MSDN文章，如果手动绑定DataSource，则需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T16:23:15.940

对于也遇到此问题的任何人，我的原因不同。在 DataTable 上**使用 a后，`DataView`****到 GridView 控件的数据绑定无法在 DataTable 中显示所有结果。**

我将 DataTable 加载到会话变量中。我使用该会话变量绑定 GridView `DataTable table = Session["mytable"] as DataTable`。

一旦我创建了`DefaultView`DataTable 对象，并在任何控件上执行了 .DataBind()，GridView 在 DataBind() 上没有显示任何结果，但是 DataTable 中实际上有数据。

**解决方案**是将DataTable 的副本创建到局部变量中，以显示该单个 web 控件 (DropDownList) 中数据的 DefaultView。

**代码：**

```
DropDownList ddl = ((DropDownList)grvTasks.Rows[e.NewEditIndex].FindControl("cmb_TaskStartsAfter"));
DataTable copytable = LoadedTasks.Copy();
DataView v = copytable.DefaultView;
v.RowFilter = "TSK_ID  " + r["TSK_ID"];
ddl.DataSource = v; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T10:19:53.687

已解决：对于可能遇到此问题的任何人，我不知道为什么会导致问题，但是当您动态创建 GridView 列时，您需要在回发时重新创建它们。在那次游戏中，对于这个特定的负载，我总是将它设置为排序 ASC（然后它会第二次点击排序例程并正确排序）。返回以对数据进行排序时，我对 ASC 的手动设置与切换到 DESC 的默认行为相冲突，并且无论出于何种原因，都会导致从 DataBind 上的 GridView 中删除所有行，即使它是 DataSource 的 DataView 有数据。虽然这不应该造成问题，但确实如此。一旦我删除了 PageLoad 中的手动排序，它就起作用了（我没有真正做到，但这已经进入了我的应用程序的杂草）。

# c# - 传递参数表达式会导致奇怪的错误

> ID：15705419
> 
> 赞同：4
> 
> 时间：2013-03-29T14:36:55.993
> 
> 标签：c#, asp.net, asp.net-mvc-4, expression, ormlite-servicestack

我有一个模型调用地址，使用该模型我创建了一些 crud 操作，在执行此操作的过程中，我想要一种可以基于任意数量的属性创建查询的方法：

```
public static IEnumerable<address> GetByParams(Expression<Func<address, bool>> predicate, int? pageNumber, int? pageSize)
    {
        using (IDbConnection db = DbFactory.OpenDbConnection())
        {
            if ((pageNumber != null) && (pageSize != null))
            {
                var data = db.Where<address>(predicate).Skip((int) pageNumber).Take((int) pageSize).ToList();
                if (data.Any())
                {
                    data[0].TotalCount = data.Count();
                    data[0].TotalPages = (int) (data.Count()/pageSize);
                }
                return data;
            }
            //this is the code that creates the error
            return db.Where<address>(predicate);
        }
    } 
```

然后我尝试使用以下方法测试此代码：

```
ViewBag.PossibleBilling = new SelectList(address.GetByParams(x=> x.AddressType == 2,null,null),0); 
```

然而，这导致了有史以来最奇怪的错误：（错误不是来自 selectList ）

```
The given key was not present in the dictionary. 
```

我试图用谷歌搜索这个，但结果比实际错误更复杂。我想这与我没有将谓词设置为正确的类型有关，或者在我将谓词传递到 where 之前，谓词必须发生某些事情。

谓词的原因是我有一个为我生成所有这些的 TT 文件，所以我不知道属性名称并且需要保持异常。

编辑：

为了清楚地了解未来的阅读：我对 servicestack.ormlite 使用它：[https ://github.com/ServiceStack/ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)

我正在尝试创建一个 TT 文件来使用我的模型构建一些基本的 crud 方法，我在 ormlite 中找到了这段代码：

```
System.Collections.Generic.List<T> Where<T>(this System.Data.IDbConnection dbConn, object anonType) Member of ServiceStack.OrmLite.OrmLiteReadConnectionExtensions 
```

其中对象 anonType 可以是我自己的查询/谓词

分页代码是错误的，但这不是错误的过程，drax 解决的问题是我使用了 Where，而我只需要一个带参数的选择。

此改进将代码的使用更改为以下过程：

```
public static List<T> Select<T>(this IDbConnection dbConn, Expression<Func<T, bool>> predicate) 
```

此过程接受表达式并消除错误

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:52:20.173

我认为您应该使用 Select 而不是 Where 扩展方法。所以你的例子可以写成：

```
public static IEnumerable<address> GetByParams(Expression<Func<address, bool>> predicate, int? pageNumber, int? pageSize)
{
    using (IDbConnection db = DbFactory.OpenDbConnection())
    {
        if ((pageNumber != null) && (pageSize != null))
        {
            var data = db.Select<address>(predicate).Skip((int) pageNumber).Take((int) pageSize).ToList();
            if (data.Any())
            {
                data[0].TotalCount = data.Count();
                data[0].TotalPages = (int) (data.Count()/pageSize);
            }
            return data;
        }
        //this is the code that creates the error
        return db.Select<address>(predicate);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:44:17.510

我的猜测是该`address.GetByParams(...)`部分返回一个空集，因此 SelectList 的默认选择不能设置为第 0 个元素（它没有）。

检查您是否真的通过 GetByParams 从数据库中获得结果。是否存在任何 AddressType 等于 2 的地址？

# python - 二十一点，不会在python中重新启动游戏

> ID：15705434
> 
> 赞同：1
> 
> 时间：2013-03-29T14:37:49.987
> 
> 标签：python, python-3.x

现在我在重新启动代码时遇到问题。它重新启动，但它不会回到开始。它只是一直问我是否要重新启动。

例如它说

```
The player has cards [number, number, number, number, number] with a total value of (whatever the numbers add up too.)

--> Player is busted!

Start over? Y/N 
```

我输入`Y`，它一直在说

```
The player has cards [number, number, number, number, number] with a total value of (whatever the numbers add up too.)

--> Player is busted!

Start over? Y/N 
```

任何人都可以请修复它，以便它重新启动。- 或者告诉我如何我的代码如下。

```
from random import choice as rc
def playAgain():
# This function returns True if the player wants to play again, otherwise it returns False.
print('Do you want to play again? (yes or no)')
return input().lower().startswith('y')
def total(hand):
# how many aces in the hand
aces = hand.count(11)
t = sum(hand)
# you have gone over 21 but there is an ace
if t > 21 and aces > 0:
    while aces > 0 and t > 21:
        # this will switch the ace from 11 to 1
        t -= 10
        aces -= 1
return t
cards = [2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11]
c2win = 0 # computer2 win
cwin = 0  # computer win 
pwin = 0  # player win 
while True:
player = []
player.append(rc(cards))
player.append(rc(cards))
pbust = False  # player busted 
cbust = False  # computer busted
c2bust = False # computer2 busted
while True:
    tp = total(player)
    print ("The player has cards %s with a total value of %d" % (player, tp))
    if tp > 21:
        print ("--> Player is busted!")
        pbust = True
        print('Start over? Y/N')
        answer = input()
        if answer == 'n':
            done = True
            break
    elif tp == 21:
        print ("\a BLACKJACK!!!")
        print("do you want to play again?")
        answer = input()
        if answer == 'y':
            done = False
        else:
            break
    else:
        hs = input("Hit or Stand/Done (h or s): ").lower()
        if 'h' in hs:
            player.append(rc(cards))
        if 's' in hs:
            player.append(rc(cards))
while True:
    comp = []
    comp.append(rc(cards))
    comp.append(rc(cards))
while True:
    comp2 = []
    comp.append(rc(cards))
    comp.append(rc(cards))
    while True:
        tc = total(comp)                
        if tc < 18:
            comp.append(rc(cards))
        else:
            break
    print ("the computer has %s for a total of %d" % (comp, tc))
    if tc > 21:
        print ("--> Computer is busted!")
        cbust = True
        if pbust == False:
            print ("Player wins!")
            pwin += 1
            print('Start over? Y/N')
        answer = input()
        if answer == 'y':
            playAgain()  
        if answer == 'n':
            done = True
    elif tc > tp:
        print ("Computer wins!")
        cwin += 1
    elif tc == tp:
        print ("It's a draw!")
    elif tp > tc:
        if pbust == False:
            print ("Player wins!")
            pwin += 1
        elif cbust == False:
            print ("Computer wins!")
            cwin += 1
    break
print
print ("Wins, player = %d  computer = %d" % (pwin, cwin))
exit = input("Press Enter (q to quit): ").lower()
if 'q' in exit:
    break
print
print
print ("Thanks for playing blackjack with the computer!") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:48:43.340

有趣的小游戏，为了简单起见，我删除了第二个庄家，但它应该很容易重新添加。我将输入更改为 raw_input，这样您就可以在不输入引号的情况下从中获取字符串。在这里和那里稍微修改了逻辑，重新格式化并添加了评论。

```
from random import choice as rc

def play_again():
    """This function returns True if the player wants to play again,
    otherwise it returns False."""
    return raw_input('Do you want to play again? (yes or no)').lower().startswith('y')

def total(hand):
    """totals the hand"""
    #special ace dual value thing
    aces = hand.count(11)
    t = sum(hand)
    # you have gone over 21 but there is an ace
    while aces > 0 and t > 21:
        # this will switch the ace from 11 to 1
        t -= 10
        aces -= 1
    return t

cards = [2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11]
cwin = 0  # computer win
pwin = 0  # player win
while True:
    # Main Game Loop (multiple hands)
    pbust = False  # player busted
    cbust = False  # computer busted
    # player's hand
    player = []
    player.append(rc(cards))
    player.append(rc(cards))
    pbust = False  # player busted
    cbust = False  # computer busted
    while True:
        # Player Game Loop (per hand)
        tp = total(player)
        print ("The player has cards %s with a total value of %d" % (player, tp))
        if tp > 21:
            print ("--> Player is busted!")
            pbust = True
            break
        elif tp == 21:
            print ("\a BLACKJACK!!!")
            break
        else:
            hs = raw_input("Hit or Stand/Done (h or s): ").lower()
            if hs.startswith('h'):
                player.append(rc(cards))
            else:
                break
    #Dealers Hand
    comp = []
    comp.append(rc(cards))
    comp.append(rc(cards))
    tc = total(comp)
    while tc < 18:
        # Dealer Hand Loop
        comp.append(rc(cards))
        tc = total(comp)
    print ("the computer has %s for a total of %d" % (comp, tc))
    if tc > 21:
        print ("--> Computer is busted!")
        cbust = True

    # Time to figure out who won
    if cbust or pbust:
        if cbust and pbust:
            print ("both busted, draw")
        elif cbust:
            print ("Player wins!")
            pwin += 1
        else:
            print ("Computer wins!")
            cwin += 1
    elif tc < tp:
        print ("Player wins!")
        pwin += 1
    elif tc == tp:
        print ("It's a draw!")
    else:
        print ("Computer wins!")
        cwin += 1

    # Hand over, play again?
    print ("\nWins, player = %d  computer = %d" % (pwin, cwin))
    exit = raw_input("Press Enter (q to quit): ").lower()
    if 'q' in exit:
       break

print ("\n\nThanks for playing blackjack with the computer!") 
```

# c# - 首先在 EF 代码中混合 Fluent API 和 DataAnnotations

> ID：15705435
> 
> 赞同：11
> 
> 时间：2013-03-29T14:37:51.943
> 
> 标签：c#, entity-framework, ef-code-first, data-annotations, entity-framework-4.3

虽然我们主要对代码优先的 POCO 使用流畅的配置，但我们发现对表名、PK 等内容使用数据注释很有用，因为它使没有参考的非 EF 组件更容易到 ObjectContext 以与这些实体进行交互。

根据我们的经验，这两种配置风格似乎可以自由混合，流畅的配置覆盖 DataAnnotations。这在任何地方都有记录吗？做这种混合配置有什么风险吗？

我们目前使用的是 EF 4.3.1

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2017-12-15T18:03:11.627

您可以同时使用 Data Annotation 属性和 Fluent API。Entity Framework 优先于 Fluent API 而非 Data Annotations 属性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-29T16:14:17.730

我个人没有遇到混合代码优先流利的 api 和数据注释的任何问题。我还想知道是否会有任何交叉疼痛，老实说，我还没有找到。这里有一些关于这个主题的案例研究的参考资料，可以让你放松一下。

（直接来自 EF 团队） [http://msdn.microsoft.com/en-us/data/jj591583.aspx](http://msdn.microsoft.com/en-us/data/jj591583.aspx)

（第 1 部分） [http://www.codeproject.com/Articles/476966/FluentplusAPIplusvsplusDataplusAnnotations-plusWor](http://www.codeproject.com/Articles/476966/FluentplusAPIplusvsplusDataplusAnnotations-plusWor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T12:01:06.483

我不认为这是一种风险——因为这两种东西在大多数情况下都有相当的对应物。

但是，就我个人而言，当我在构建我的实体时遇到某种问题时——我要做的第一件事就是删除任何注释——然后让所有的东西变得流畅。

随着时间的推移，这导致我使用了非常流畅的配置（也让我的对象与 Db 的“心态”有任何联系）......

> IMO 它“更安全”，但只有在某种程度上，您可以做更多事情并完全按照您的意愿控制事情。还有助于使事情保持一致并集中在一个地方。

# neo4j - neo4j 重建自动索引

> ID：15705437
> 
> 赞同：0
> 
> 时间：2013-03-29T14:37:52.617
> 
> 标签：neo4j

我从这里的文档和帖子中了解到，在为 neo4j 中的节点属性启用自动索引后，必须为每个节点再次设置属性才能将属性添加到索引中。

Neo4j 版本 1.9.M05

使用 DrWho 数据库，这个 groovy 代码旨在通过设置属性将 Doctor 字符添加到自动索引字符属性中。此代码不起作用。运行后自动节点索引为空

你能看到我做错了什么吗？

```
import org.neo4j.graphdb.*
import org.neo4j.graphdb.factory.*
import org.neo4j.graphdb.index.*

db_path = '/Users/mike/Documents/code/neo4j/dbs/drwho.db'

// use Builder to initialize settings for embedded db
// include autoindexing
GraphDatabaseService graphDb = new GraphDatabaseFactory().newEmbeddedDatabaseBuilder( db_path ).
  setConfig(GraphDatabaseSettings.node_auto_indexing, "true" ).
  setConfig(GraphDatabaseSettings.node_keys_indexable, "character" ).
  newGraphDatabase()

DoctorKey="character"
DoctorValue="Doctor"
Node Doctor = graphDb.getNodeById( 1 )
assert Doctor.hasProperty( DoctorKey )
assert Doctor.getProperty( DoctorKey ).equals( DoctorValue )

// drop and add character property to add it to auto_index
Transaction tx = graphDb.beginTx()
try
{
  Doctor.removeProperty( DoctorKey )
  Doctor.setProperty( DoctoryKey, DoctorValue )
  tx.success()
} catch ( Exception e ) { tx.failure()
} finally               { tx.finish() }

assert Doctor.hasProperty( DoctorKey )
assert Doctor.getProperty( DoctorKey ).equals( DoctorValue )

// query index
ReadableIndex<Node> autoNodeIndex = graphDb.index().
  getNodeAutoIndexer().
  getAutoIndex()

// DoctorAgain is NULL
Node DoctorAgain =  autoNodeIndex.get( DoctorKey , DoctorValue ).getSingle()
assert DoctorAgain == Doctor

addShutdownHook {
  graphDb.shutdown()
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T18:20:57.410

这不是与 Neo4j 相关的问题，只是代码中有错字。如果你更换

```
Doctor.setProperty( DoctoryKey, DoctorValue ) 
```

和

```
Doctor.setProperty( DoctorKey, DoctorValue ) 
```

有用。

# python - 在 Python 中删除某些操作的 root 权限

> ID：15705439
> 
> 赞同：10
> 
> 时间：2013-03-29T14:37:56.860
> 
> 标签：python, linux, root, sudo, privileges

在我的 Python 脚本中，我执行了一些需要 root 权限的操作。我还创建和写入我不希望由 root 独占但由运行我的脚本的用户拥有的文件。

通常，我使用`sudo`. 有没有办法做到以上几点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T16:16:06.897

您可以在 uid 之间切换使用`os.seteuid()`. 这与`os.setuid()`您可以在需要时返回获取 root 权限不同。

例如，以 root 身份运行以下命令：

```
import os

open('file1', 'wc')

# switch to userid 501
os.seteuid(501)
open('file2', 'wc')

# switch back to root
os.seteuid(0)
open('file3', 'wc') 
```

这将创建`file1`并`file3`作为 root，但`file2`作为具有 uid 501 的用户。

如果您想确定哪个用户正在调用您的脚本，请`sudo`设置两个环境变量：

```
SUDO_USER
SUDO_UID 
```

分别是调用的用户的用户名和uid `sudo`。所以你可以`int(os.environ['SUDO_UID'])`使用 with `os.seteuid()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:04:00.733

[http://linux.die.net/man/8/sudo](http://linux.die.net/man/8/sudo)引用：
设置真实有效的uid和gid以匹配目标用户

因此，知道使用哪个用户的唯一选择是从配置文件或 cmdline 选项中读取目标用户，或者以某种方式进行启发式猜测。

一个好主意是所谓的权利脱落：从 root 权限开始，然后按照你的要求去做。然后成为特权较低的用户。
您将为此使用 os 模块：http: [//docs.python.org/2/library/os.html#os.setuid](http://docs.python.org/2/library/os.html#os.setuid)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-14T09:28:36.190

我发现使用 os.seteuid 和 os.setegid 实际上并没有放弃 root 权限。在打电话给他们之后，我仍然能够做需要 root 权限的事情。我发现可行的解决方案是改用 os.setresuid 和 os.setresgid ：

```
sudo_uid = int(os.getenv("SUDO_UID"))
sudo_gid = int(os.getenv("SUDO_GID"))

# drop root privileges
os.setresgid(sudo_gid, sudo_gid, -1)
os.setresuid(sudo_uid, sudo_uid, -1)

subprocess.call("mkdir /foo1", shell = True) # should fail

# regain root privileges
os.setresgid(0, 0, -1)
os.setresuid(0, 0, -1)

subprocess.call("mkdir /foo2", shell = True) # should succeed 
```

# json - mootools 嵌套对象过滤

> ID：15705440
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:02.470
> 
> 标签：json, filter, nested, mootools

我有一个 JSON 字符串：

```
var data  = {"categories":
                        [
                             {"id":1,"parent":0,"name":"Category A","description":"Category description","products":"11","subcategories":[]},
                             {"id":2,"parent":0,"name":"Category B","description":"Category description","products":"11","subcategories":
                                    [
                                        {"id":6,"parent":2,"name":"Subcategory F","description":"Category description", "products":"2","subcategories":[]},
                                        {"id":7,"parent":2,"name":"Subcategory G","description":"Category description","products":"7","subcategories":[]}
                                    ]
                             },
                             {"id":3,"parent":0,"name":"Category C","description":"Category description","products":"4","subcategories":
                                    [
                                        {"id":8,"parent":3,"name":"Subcategory H","description":"Category description","products":"8","subcategories":[]}
                                    ]
                             },
                             {"id":4,"parent":0,"name":"Category D","description":"Category description","products":"45","subcategories":
                                    [
                                        {"id":9,"parent":4,"name":"Subcategory I","description":"Category description","products":"2","subcategories":
                                            [
                                                {"id":10,"parent":9,"name":"Subcategory J","description":"Category description","products":"54","subcategories":[]}
                                            ]
                                        }
                                    ]
                            },{"id":5,"parent":0,"name":"Category E","description":"Category description","products":"89","subcategories":[]}
                        ]
                }; 
```

如何通过 id 访问数据？例如我需要得到这个 id = 10 的 sub_object：

```
var requested = request(data, 10);

function request (data, id) {

var output = {};

...code

output = {"id":10,"parent":9,"name":"Subcategory J","description":"Category description","products":"54","subcategories":[]}

return output;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:00:32.417

基本上你可以通过一个简单的递归来做到这一点：http: [//jsfiddle.net/99UYU/](http://jsfiddle.net/99UYU/)

```
var data  = {"categories":
                        [
                             {"id":1,"parent":0,"name":"Category A","description":"Category description","products":"11","subcategories":[]},
                             {"id":2,"parent":0,"name":"Category B","description":"Category description","products":"11","subcategories":
                                    [
                                        {"id":6,"parent":2,"name":"Subcategory F","description":"Category description", "products":"2","subcategories":[]},
                                        {"id":7,"parent":2,"name":"Subcategory G","description":"Category description","products":"7","subcategories":[]}
                                    ]
                             },
                             {"id":3,"parent":0,"name":"Category C","description":"Category description","products":"4","subcategories":
                                    [
                                        {"id":8,"parent":3,"name":"Subcategory H","description":"Category description","products":"8","subcategories":[]}
                                    ]
                             },
                             {"id":4,"parent":0,"name":"Category D","description":"Category description","products":"45","subcategories":
                                    [
                                        {"id":9,"parent":4,"name":"Subcategory I","description":"Category description","products":"2","subcategories":
                                            [
                                                {"id":10,"parent":9,"name":"Subcategory J","description":"Category description","products":"54","subcategories":[]}
                                            ]
                                        }
                                    ]
                            },{"id":5,"parent":0,"name":"Category E","description":"Category description","products":"89","subcategories":[]}
                        ]
                };

function recurseArr(arr,id){

    for(var i=0;i<arr.length;i++){
        var item = arr[i];   
        if(item.id == id){
             return item;   
        }
        var subcategories = item.subcategories;
        var ret_val = recurseArr(subcategories,id);
        if(ret_val){
             return ret_val;   
        }
    }

    return null;
}

console.log(recurseArr(data.categories,10)); 
```

但是您可以更有效地保存数据，因为无论如何您都在使用 id - 所以数组使用对象（映射）：

```
var data  = {"categories":
                     {
                        "1":{"parent":0,"name":"Category A","description":"Category description","products":"11","subcategories":{}},
                        "2":{"parent":0,"name":"Category B","description":"Category description","products":"11","subcategories":{
                                "6":{"parent":2,"name":"Subcategory F","description":"Category description", "products":"2","subcategories":{}},
                                "7":{"parent":2,"name":"Subcategory G","description":"Category description","products":"7","subcategories":{}}
                               }
                        }
                     }
}; 
```

那么您可以更轻松地访问您的数据。

# css - 引导带无法正确跨越

> ID：15705441
> 
> 赞同：1
> 
> 时间：2013-03-29T14:38:03.277
> 
> 标签：css, twitter-bootstrap, responsive-design, html

我一直在构建一个以引导程序为框架的网站，由于某种原因，在一个部分中它不会一直跨越整个屏幕。

下面是它的外观： ![在此处输入图像描述](../Images/18fbc5cf3077b1bece65ccbbce4c9576.png)

和

![在此处输入图像描述](../Images/cb148008e16b48113597fe54ff85727c.png)

这是我一直在使用的代码：

```
<section class="section_area">
            <div class="container">
                <div class="row-fluid">

                   <!-- Title-->
                   <div class="span4 title">
                        <span class="arrow_left"></span>
                        <h3>What we do</h3>
                        <h1>simplify your business processes</h1>
                        <p>Sollemnes wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip consequat.</p>
                    </div>
                     <!-- End Title-->

                    <!-- Services-->
                    <div class="span8 services">
                        <!-- Row-->
                        <div class="row-fluid">
                            <!-- Item Service-->
                            <div class="span6">
                                <h4 class="text_right">Responsive Desing</h4>
                                <div class="item_service">
                                    <div class="image_service">
                                        <img src="img/1.png" alt="Image">
                                    </div>
                                    <div class="info_service">
                                        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada.</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <!-- End Item Service-->  

                           <!-- Item Service-->
                            <div class="span6">
                                <h4>Retina Desing</h4>
                                <div class="item_service_right">
                                    <div class="image_service">
                                        <img src="img/2.png" alt="Image">
                                    </div>
                                    <div class="info_service">
                                        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada.</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <!-- End Item Service-->                   
                        </div>
                        <!-- End Row-->

                         <!-- Row-->
                        <div class="row-fluid">
                            <!-- Item Service-->
                            <div class="span6">
                                <h4 class="text_right">Full Validated</h4>
                                <div class="item_service">
                                    <div class="image_service">
                                        <img src="img/3.png" alt="Image">
                                    </div>
                                    <div class="info_service">
                                        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada.</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <!-- End Item Service-->  

                           <!-- Item Service-->
                            <div class="span6">
                                <h4>Social Media</h4>
                                <div class="item_service_right">
                                    <div class="image_service">
                                        <img src="img/4.png" alt="Image">
                                    </div>
                                    <div class="info_service">
                                        <p>Pellentesque habitant morbi tristique senectus et netus et malesuada.</p>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                            <!-- End Item Service-->                   
                        </div>
                        <!-- End Row-->
                    </div>
                    <!-- End Services-->
                </div>
            </div>
        </section>
        <!-- End section area-->

        <!-- section area-->
        <section class="section_area content_resalt">
            <div class="container">
                <div class="row-fluid">
                    <!-- Tabs-->
                    <div class="span12">
                        <!-- Nav Tabs-->

                        <!-- End Nav Tabs-->

                        <div class="clearfix"></div>

                        <div class="switcher-panel"></div>    

                        <!-- 1-content -->
                        <div id="1-content" class="switcher-content set2 show">

                            <!-- Features -->
                            <div class="span8">

                                <h2>Windows Solutions</h2>
                                <div class="row-fluid feature">
                                    <div class="span4">
                                        <h3>Features</h3>
                                    </div>
                                    <div class="span4">
                                        <h3> Account free </h3>
                                    </div>
                                    <div class="span4">
                                        <h3>Account Premium</h3>
                                    </div>
                                </div>  

                                <div class="row-fluid feature">
                                    <div class="span5">
                                        <p>Complete Social Marketing Suite</p>
                                    </div>
                                    <div class="span3">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                    <div class="span3 premium">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                </div> 

                                <div class="row-fluid feature">
                                    <div class="span5">
                                        <p>Social Network</p>
                                    </div>
                                    <div class="span3">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                    <div class="span3 premium">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                </div> 

                                <div class="row-fluid feature">
                                    <div class="span5">
                                        <p>Full Responsive Web  Desing</p>
                                    </div>
                                    <div class="span3">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                    <div class="span3 premium">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                </div> 

                                <div class="row-fluid feature">
                                    <div class="span5">
                                        <p>Retina Desing</p>
                                    </div>
                                    <div class="span3">
                                        <img src="img/icons/error.png" alt="Image">
                                    </div>
                                    <div class="span3 premium">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                </div> 

                                <div class="row-fluid feature">
                                    <div class="span5">
                                        <p>Python And Django</p>
                                    </div>
                                    <div class="span3">
                                        <img src="img/icons/error.png" alt="Image">
                                    </div>
                                    <div class="span3 premium">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                </div> 

                                <div class="row-fluid feature">
                                    <div class="span5">
                                        <p>Full Documentation And Support</p>
                                    </div>
                                    <div class="span3">
                                        <img src="img/icons/error.png" alt="Image">
                                    </div>
                                    <div class="span3 premium">
                                        <img src="img/icons/ok.png" alt="Image">
                                    </div>
                                </div> 
                            </div>
                            <!-- End Features -->

                            <!-- Title -->
                            <div class="span4 title_right">                                
                                <span class="arrow_right"></span>
                                <h3>Get started</h3>
                                <h1>today witha a free trial!</h1>
                                <h5>30 days free trial | No credit card required | $13/mo after end of trial period.</h5>
                                <div class="clearfix padding_top_mini"></div>
                                <a href="#" class="button big">Try Free</a>
                                <a href="#" class="button big">Buy Now</a>
                            </div>
                            <!-- End Title -->

                        </div>
                        <!-- End 1-content -->

                    </div>
                    <!-- End Tabs-->                    

                </div>
            </div>
        </section>
        <!-- End section area--> 
```

现场版[也在这里](http://divisionforty.com)

希望有人可以帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:46:47.610

您正在使用来自设置`.container`的属性。这只是导致一切都被挤压。`bootstrap-responsive.css``max-width: 680px`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:46:38.470

删除`<div class="container">`里面的那个`.section_area`

# maps - 谷歌地图信息窗口标注有几个像素

> ID：15705444
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:09.507
> 
> 标签：maps, infowindow, callout

这是我第一次在 stackoverflow 上发帖。（有点紧张）

我在谷歌地图的信息窗口标注框周围遇到问题，如下图所示：信息 [窗口标注](http://imgur.com/TnY2scU)

大约有 2-3 像素的标注指针从信息框底部伸出。

我之前确实遇到了渲染问题，并且已经通过将“max-width:none”应用于地图 div 来解决。没有改变其他任何东西。

如果我能得到一些帮助来解决这个问题，那就太棒了......在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T21:54:01.720

这有点老了，但我遇到了同样的问题，因为没有答案，我会发布我的修复。

在我的 CSS 中，我正在重置所有元素的 box-sizing 属性

```
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; } 
```

为了解决这个问题，我将一个类应用于`div`包装 Google Map 并将 box-sizing 属性设置回`initial`状态。

```
.google-maps * { -moz-box-sizing: initial; -webkit-box-sizing: initial; box-sizing: initial; } 
```

# php - 警告：在第 111 行的 C:\xampp\htdocs\glasanje\index.php 中为 foreach() 提供的参数无效

> ID：15705445
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:11.433
> 
> 标签：php

```
<?php

    foreach (iscupaj_viceve() as $id => $glasanje){

        $result = mysql_query("SELECT * FROM vicevi WHERE id = $id");
        while ($row = mysql_fetch_array($query)) {
            echo    "<h2><center>".$row['Title']."</h2>";
            echo    "<div id='linkovi1'>" .nl2br($row["VicText"]). "<br></div>";
        }
?>
    <p>

            <a href="?glasanje=gore&id=<?php echo $id; ?>"><img src="../images/plus_sign.png" width="29" height="29"></a>
            <a href="?glasanje=dolje&id=<?php echo $id; ?>"><img src="../images/minus_sign.png" width="29" height="29"></a>
        Ukupno glasova : [
        <?php
            include 'core/db/connect.php';
            // Check connection
            $result = mysql_query("SELECT glasanje FROM vicevi WHERE id = $id");

            while($row = mysql_fetch_array($result))
            {
            echo nl2br($row['glasanje']);
            }
        ?>]
    </p>
<?php

    }

?> 
```

这是我的功能

```
function iscupaj_viceve(){

$sql = "SELECT id, VicText, glasanje FROM vicevi ORDER BY id DESC LIMIT 0, 10";

$rezultati = mysql_query($sql);
$glasanje = array();

while (($row = mysql_fetch_assoc($rezultati)) !== false){
    $rezultati[$row['id']] = $row['VicText'];
}
return $rezultati; 
```

}

浏览器打印此错误消息：

警告：在第 111 行的 C:\xampp\htdocs\glasanje\index.php 中为 foreach() 提供的参数无效

但我似乎找不到解决这个问题的方法：S 帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:44:35.413

您的功能正在覆盖`$rezultati`。我建议将其重写为：

```
function iscupaj_viceve() {

    $rows = array();

    $sql = "SELECT id, VicText, glasanje FROM vicevi ORDER BY id DESC LIMIT 0, 10";

    $rezultati = mysql_query($sql);

    while (($row = mysql_fetch_assoc($rezultati)) !== false) {
        $rows[$row['id']] = $row['VicText'];
    }

    return $rows;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:43:38.790

iscupaj_viceve() 并不总是返回一个数组。

```
$glasanje = array(); 
```

应该

```
$rezultati = array(); 
```

# c# - NHibernate 事务在 Postgres 上无法正常工作

> ID：15705447
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:20.983
> 
> 标签：c#, postgresql, nhibernate, transactions

我有桌面应用程序和 Web 应用程序引用的通用 dll。其中一种方法创建 3 个对象并将它们插入到事务中的 DB 中。

但是，当我从 Web 应用程序和桌面应用程序同时调用此方法时，对象不会 3by3 插入......它们的顺序是混合的（1 个来自桌面应用程序，然后是 1 个来自 Web 应用程序等）。

我的代码还可以吗？有什么关系映射，或者 nhibernate cfg 吗？非常感谢您提前。

```
 Notifications not = new Notifications();
               not.Notes = applicationName;
               not.GeneratedTime = DateTime.Now;
               using (var session = SessionManager.OpenSession())
               using (var transaction = session.BeginTransaction())
               {
                   // do what you need to do with the session
                   session.Save(not);

               not = new Notifications();
               not.Notes = applicationName;
               not.GeneratedTime = DateTime.Now;

                   session.Save(not);

               not = new Notifications();
               not.Notes = applicationName;
               not.GeneratedTime = DateTime.Now;

                   // do what you need to do with the session
                   session.Save(not);
                   transaction.Commit();
               } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:10:32.150

您错误地假设在一个事务中执行插入将阻止在其他并发事务中发生插入。

这是不正确的（除非您使用某些特定的事务隔离级别，专门锁定整个表等......但我们只是说这不是真的）

# asp.net - 在页面加载时访问网络服务

> ID：15705449
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:27.327
> 
> 标签：asp.net, vb.net, visual-studio-2010, web-services

我正在 VB.Net，Visual Studio 2010 中开发一个网站，该网站需要访问 Web 服务来访问用户的登录信息。

他们通过单独的页面登录，当他们重定向到我的页面时，我通过网络服务访问他们的凭据，然后通过我自己的脚本处理会话。

我需要知道的是：

如果不满足条件，是否可以在页面加载时检查 Web 服务？

我以前没有使用过 web 服务，也不知道如何添加参数或如何从中获取值。是否可以添加对我的登录类（或一般类）的引用？

我通过视觉工作室添加了一个参考：网站 - >添加网络参考

但这只是生成了一堆文件，我在网上找不到关于如何使用生成的引用/文件的好教程。

我认为它应该生成一些类文件，但是它添加了一个具有以下类型的文件夹（.discomap）：

*   。迪斯科
*   .wsdl
*   .xsd

最后，我可以在我的本地主机上测试这个 web 服务（在线并运行）吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:44:02.237

听起来您想从后面的代码中调用这些服务。

当您添加一个 Web 引用时，它应该已经生成了一堆类文件，您可以使用它们来调用服务方法。您应该可以从 localhost 执行此操作。

来自后面代码的 WCF 服务调用看起来像这样

```
ServiceReference1.Service1Client client = new
    ServiceReference1.Service1Client();
string returnString;

returnString = client.GetData(Param);
label1.Text = returnString; 
```

# php - 将多个数组组合成一个关联数组php

> ID：15705454
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:48.970
> 
> 标签：php, multidimensional-array

我想将多个数组组合成一个关联数组

喜欢

```
$big=array(
1=>$simpleArray1,
2=>$simpleArray2,
3=>$singleArray3
); 
```

我知道上述分配方式是错误的，它实际上并没有包含数组。请推荐我最好的方法。谢谢 ：）

**编辑**

**所有这些数组都有相同的 keys**，所以在这种情况下我应该如何继续。我知道钥匙应该是相同的，但我现在该怎么办！我很困惑，因为我需要`n`在每个数组中包含不同数据量的数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:47:10.243

你想合并数组吗？

```
<?php
$array1 = array("color" => "red", 2, 4);
$array2 = array("a", "b", "color" => "green", "shape" => "trapezoid", 4);
$result = array_merge($array1, $array2);
print_r($result);
?> 
```

结果：

```
Array
(
    [color] => green
    [0] => 2
    [1] => 4
    [2] => a
    [3] => b
    [shape] => trapezoid
    [4] => 4
) 
```

[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

**编辑**

> 所有这些数组都有相同的键，所以在这种情况下我应该如何继续。我知道钥匙应该是相同的，但我现在该怎么办！我很困惑，因为我需要在每个数组中包含 n 个具有不同数据量的数组

那么你希望它看起来如何？

你也可以

```
$all = array();
$all[] = $firstarray;
$all[] = $secondarray;
$all[] = $thirdarray;

but than you must do twice foreach, and you cannot search by id
foreach($all as $arr){
 foreach($arr as $item){
  echo $item["name"];
 }
} 
```

主要问题是，你想用聚合数组做什么。如果您不关心钥匙，最坏的情况是

```
$arr = array();
foreach($arr1 as $v){$arr[] = $v;}
foreach($arr2 as $v){$arr[] = $v;}
foreach($arr3 as $v){$arr[] = $v;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:49:33.583

您可以使用`array_merge($arr1, $arr2, ...)`. 请参阅[此处](http://php.net/manual/en/function.array-merge.php)并注意相同的密钥将被最新的密钥覆盖。

# jquery - 如何将 jstree 树加载到特定位置？

> ID：15705457
> 
> 赞同：0
> 
> 时间：2013-03-29T14:38:51.833
> 
> 标签：jquery, jstree

这是我的jstree设置：

```
 $("#treeFile1").jstree({
                             "html_data" : {
                                              "ajax" : {
                                                          "url" : "treeFile1.txt"
                                                       },
                                              "data" : function(data)
                                                       {
                                                          $("#ul_1-li_1").html(data);
                                                       }
                                           }
                         }); 
```

有人可以告诉我如何使用上面的代码将treeFile1.txt中的ul html内容加载到以下位置，我尝试不使用回调数据：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:46:28.493

[在这里](http://www.jstree.com/documentation/html_data)检查：

> 数据
> 
> > 一个 HTML 字符串（如果不使用，则为 false）。默认为假。指定要加载到容器中并转换为树的内容。

您没有`data`正确使用该选项。

# java - 在 JList 中呈现图标和文本的最佳方式

> ID：15705462
> 
> 赞同：1
> 
> 时间：2013-03-29T14:39:03.330
> 
> 标签：java, swing, jbutton, jlist

我创建了一个用我自己的 AbstractListModel 子类构建的 JList，模型存储 Action 类的实例，我将 getElementAt() 定义为

```
public final Object getElementAt(final int index)
        {
            return ((Action) actionList.get(index)).getValue(Action.NAME);
        } 
```

我的 JList 显示一个动作名称列表，这没关系。

但是这些动作也定义了一个图标，所以如果我这样做

```
 public final Object getElementAt(final int index)
        {
            return ((Action) actionList.get(index)).getValue(Action.SMALL_ICON)
            );
        } 
```

它现在改为显示图标。

但我都想要，所以我尝试了

```
 public final Object getElementAt(final int index)
        {
            return new JButton(
                    (String)((Action) actionList.get(index)).getValue(Action.NAME),
                    (Icon)((Action) actionList.get(index)).getValue(Action.SMALL_ICON)
            );
        } 
```

现在它只输出按钮的属性而不是怎么来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:53:38.140

没关系阅读 javadoc 帮助！

getElementAt() 应该只是

```
public final Object getElementAt(final int index)
        {
            return actionList.get(index);
        } 
```

然后我在javadoc中查看渲染并修改如下：

```
class MyCellRenderer extends JLabel implements ListCellRenderer {
         ImageIcon longIcon = new ImageIcon("long.gif");
         ImageIcon shortIcon = new ImageIcon("short.gif");

        // This is the only method defined by ListCellRenderer.
        // We just reconfigure the JLabel each time we're called.

        public Component getListCellRendererComponent(
                JList list,              // the list
                Object value,            // value to display
                int index,               // cell index
                boolean isSelected,      // is the cell selected
                boolean cellHasFocus)    // does the cell have focus
        {
            Action action = (Action)value;
            setText((String)action.getValue(Action.NAME));
            setIcon((Icon)action.getValue(Action.SMALL_ICON));
            if (isSelected) {
                setBackground(list.getSelectionBackground());
                setForeground(list.getSelectionForeground());
            } else {
                setBackground(list.getBackground());
                setForeground(list.getForeground());
            }
            setEnabled(list.isEnabled());
            setFont(list.getFont());
            setOpaque(true);
            return this;
        }
    } 
```

然后设置为 Jlists 渲染器

```
availableList.setCellRenderer(new MyCellRenderer()); 
```

它有效。

# wcf - 类型对象属性的 WCF 反序列化

> ID：15705470
> 
> 赞同：1
> 
> 时间：2013-03-29T14:39:16.187
> 
> 标签：wcf, deserialization, soapui

我无法实现以下场景。

我们目前有一个方法，它需要一个“上下文”键值对列表。然而，该值可以是任何类型。

目标是使用 WCF 使此方法可用。所以我创建了一个

```
public List<Element> Transform(List<Element> elements)
{
... Transformation of elements takes place
}

[DataContract(Namespace = Constants.NAMESPACE)]
public struct Element
{
    [DataMember(Order = 0, IsRequired = true)]
    public string Key;
    [DataMember(Order = 1, IsRequired = true)]
    public object Value;
} 
```

当我使用 .Net 测试项目时，一切正常。

但是，当我使用 SOAP UI 调用此服务时，我收到一条错误消息：

> 格式化程序在尝试反序列化消息时抛出异常：尝试反序列化参数元素时出错。InnerException 消息是“元素值不能将子内容反序列化为对象。请使用 XmlNode[] 反序列化这种 XML 模式。'。

我很难弄清楚该怎么做。任何帮助表示赞赏。

我使用的xml是这样的：

```
 <ws:Transform>
     <ws:elements>
           <ws:Element>
              <ws:Key>Key1</ws:Key>
              <ws:Value>A</ws:Value>
           </ws:Element>
           <ws:Element>
              <ws:Key>Key2</ws:Key>
              <ws:Value>B</ws:Value>
           </ws:Element>
        <ws:ScriptName>SetVariable</ws:ScriptName>
     </ws:elements>
  </ws:Transform> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:01:45.350

在这种情况下，SoapUI 使用 .Net 技术，该技术不了解对象的目标类型。

发送对象并非在所有平台上都有效。事实上，您也可能会在使用 .Net 客户端时遇到错误。你最好的选择是创建一个通用的 xml 表示值，并让所有客户端从 xml 中膨胀对象

# magento - Magento 在注册面板上添加新文件

> ID：15705471
> 
> 赞同：0
> 
> 时间：2013-03-29T14:39:17.263
> 
> 标签：magento, core

大家好，我正在尝试在 magento 注册面板中添加一个名为**医院地址**的新字段，我需要添加更多字段...我已经在 magento 核心文件中进行了一些更改，例如**register.phtml AccountController.php config.xml Grid.php Account.php CustomerController.php edit.phtml** 一切正常，但最后我发现管理员可以编辑**医院地址**，但客户在登录帐户编辑页面时无法编辑这个是这里的任何人都知道这一点问题并有解决方案？这是完整的脚本[http://goo.gl/EBMzM](http://goo.gl/EBMzM)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T15:32:10.173

由于magento是基于实体属性模型的。您不能直接管理注册字段的属性。如果您是软件开发人员，您可以在数据库中创建属性并以相同的方式更改您的代码。如果您不是软件开发人员，您可以安装一个模块来管理您的抵抗页面。您可以通过关键字“magento注册字段管理器”在谷歌上搜索，并找到用于注册字段管理的verious模块。

# iphone - 为什么苹果这样做：MKMapRectIntersection(boundingMapRect, worldRect)？

> ID：15705473
> 
> 赞同：0
> 
> 时间：2013-03-29T14:39:37.950
> 
> 标签：iphone, ios, mapkit, mkoverlay

我只是覆盖了 MKOverlay，所以我正在寻找 Apple 开发人员示例代码中的良好实践......当我看到这个时：

```
 // bite off up to 1/4 of the world to draw into.
    MKMapPoint origin = points[0];
    origin.x -= MKMapSizeWorld.width / 8.0;
    origin.y -= MKMapSizeWorld.height / 8.0;
    MKMapSize size = MKMapSizeWorld;
    size.width /= 4.0;
    size.height /= 4.0;
    boundingMapRect = (MKMapRect) { origin, size };
    MKMapRect worldRect = MKMapRectMake(0, 0, MKMapSizeWorld.width, MKMapSizeWorld.height);
    boundingMapRect = MKMapRectIntersection(boundingMapRect, worldRect); 
```

## 许多问题

*   为什么苹果在计算好的 boundingMapRect 后会与 worldRect 相交？
*   通过安全？
*   boundingMapRect inter worldRect 并不总是 boundingMapRect ？
*   如果我有两个 MKMapPoint 代表我的 CGRect，我不必这样做，对吗？

问候，

* * *

编辑

所以我必须这样做？

```
// set the smallest rectangle which able to contain this overlay
MKMapPoint leftTopPoint = MKMapPointForCoordinate(leftTopCorner);
MKMapPoint rightBottomPoint = MKMapPointForCoordinate([self bottomRightCoord]);

boundingMapRect = MKMapRectMake(leftTopPoint.x, leftTopPoint.y,
                                fabs(leftTopPoint.x - rightBottomPoint.x),
                                fabs(leftTopPoint.y - rightBottomPoint.y)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:33:17.350

该代码来自 Breadcrumb 示例，与大多数叠加层相比，它可能有点不寻常，因为它是动态更新的。他们实际上将边界区域设置为世界区域的四分之一，这本身有点不寻常，通常你会期望它要小得多。我认为交集只是为了确保生成的矩形绝对在整个世界矩形内。我不确定我是否会推荐此代码作为最佳实践，除非您正在做类似的事情（即创建动态覆盖）。如果您在不间断地环游世界，或者甚至只是穿越国际日期变更线时运行面包屑应用程序，大概甚至可能会发现这段代码......

# java - 从java中的控制台读取一个整数

> ID：15705475
> 
> 赞同：2
> 
> 时间：2013-03-29T14:39:44.730
> 
> 标签：java, io

如何在java中读取整数输入..我尝试了缓冲阅读器和扫描仪..但它没有输出任何东西..我正在使用eclipse indigo..它会影响输出..

示例代码：

```
public static void main(String[] args) 
{
    int a;
    try {
      Scanner sc = new Scanner (System.in);     
      a = sc.nextInt();
    } catch (NumberFormatException ex) {
      System.err.println("Not a valid number: " + ex);
      return;
    }
    System.out.println("I read this number: " + a);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:50:02.857

我想我知道您要做什么：您什么也看不到，因为 Eclipse 提示您输入整数，所以当您在 Eclipse 控制台中看到光标时，只需输入一个数字，您就会看到输出。新的 Scanner(System.in) 实际上会等待您输入一个 int

# vb.net - 如何在 vb net 中处理键盘？

> ID：15705476
> 
> 赞同：0
> 
> 时间：2013-03-29T14:39:46.267
> 
> 标签：vb.net, keyboard, vb.net-2010, handle, createfile

这是我的键盘：

```
-----------------------------------
Win32_Keyboard instance
-----------------------------------
Availability:
Caption: Enhanced (101- or 102-key)
ConfigManagerErrorCode: 0
ConfigManagerUserConfig: False
CreationClassName: Win32_Keyboard
Description: Standard PS/2 Keyboard
DeviceID: ACPI\PNP0303\4&844A824&0
ErrorCleared:
ErrorDescription:
InstallDate:
IsLocked:
LastErrorCode:
Layout: 00000409
Name: Enhanced (101- or 102-key)
NumberOfFunctionKeys: 12
Password:
PNPDeviceID: ACPI\PNP0303\4&844A824&0
PowerManagementCapabilities:
PowerManagementSupported: False
Status: OK
StatusInfo:
SystemCreationClassName: Win32_ComputerSystem 
```

我正在尝试使用适用于磁盘并且也适用于键盘的“CreateFile”来获取句柄。到目前为止还没有运气。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:42:00.543

你只想要把手吗？

Private Sub TextBox1_KeyDown(sender As Object, e As KeyEventArgs) 处理 TextBox1.KeyDown

```
 Dim hnd As IntPtr = sender.handle()

End Sub 
```

# php - Android PHP Base64 解码结果不同

> ID：15705478
> 
> 赞同：2
> 
> 时间：2013-03-29T14:39:53.587
> 
> 标签：php, android, base64

我有一个大问题：如果我做 base64_decode($string); 我没有相同的结果 在 php 中或者如果我做 Base64.decode(string); 在安卓。

示例：使用此字符串：WWhiZWWSZpNlaGSTnpljZQ==

在 php 中，结果是 Yhbee'f“ehd”ž™ce 。

在 android 中，结果是 Yhbee�f�ehd�ce

我认为存在编码问题，但我不知道在哪里，我的 PHP 服务器的输出是 ISO-8859-1，我不知道如何告诉 Base64.decode 使用这种类型的编码。

你能帮我吗。谢谢回答。

PS：我无法触摸 PHP 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-10-17T19:59:17.457

我认为这会对你有所帮助，不要使用`.toString()`use this 代替

```
var str = "WWhiZWWSZpNlaGSTnpljZQ=="
var decoded = String(Base64.decode(str, Base64.NO_WRAP)) 
```

我知道这个回答太晚了:-D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:42:05.107

我认为解码很好，但 Android 没有应用正确的编码（可能是 utf-8）。

此内容是否出现在 HTML 页面上？如果是这样，您是否正确执行`ISO-8859-1`编码？

或者，您也可以切换到 UTF-8。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:52:31.690

你应该试试这个：

```
 Base64.decode(content.getBytes("ISO-8859-1"), Base64.DEFAULT); 
```

通过这个，您将输入字符串转换为`content`将从`ISO-8859-1`base64 解码的编码字节流。

# windows-phone-8 - 适用于 Windows Phone 8 的中等磁贴大小的 Metro 图 标

> ID：15705479
> 
> 赞同：-3
> 
> 时间：2013-03-29T14:39:54.157
> 
> 标签：windows-phone-8

我想要中等大小的地铁图标**（appbar.edit.png，appbar.add.png）**。
这是windows phone 8的标准图标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:40:26.837

如果您已安装 SDK，您将在“C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Icons\Dark\”中找到提供的应用栏图标。
这些仅以适合在应用栏中使用的大小（76x76 像素）提供，因为这就是它们的用途。

如果您正在寻找用于应用程序栏或应用程序中任何其他位置的图标，包括磁贴，请查看这些源（其中大部分包括随 SDK 提供的图像的可缩放版本）：

[Metro Studio 2](http://www.syncfusion.com/downloads/metrostudio) (By SyncFusion)
[The Noun Project](http://thenounproject.com/)
[Modern UI Icons](http://modernuiicons.com/)
[iconmonstr](http://iconmonstr.com/)

# asp.net-mvc-4 - 如何处理 Textarea 中的编码数据

> ID：15705489
> 
> 赞同：1
> 
> 时间：2013-03-29T14:40:18.940
> 
> 标签：asp.net-mvc-4, antixsslibrary

使用**Antixss 库**，我对文本进行了编码并存储在 DB 中。我的问题是当我从 DB 获取数据以在 TextArea 中显示时，它显示为编码文本。ASP.Net-MVC4 中的这个问题。我如何解码数据并在 textarea 中显示。任何人都可以帮助这个。如何使用 antixss 库解码文本。或任何其他方式来解码文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T05:40:03.537

使用 @Html.Raw(data) 这将显示您的数据而不对其进行编码。

# c++ - 在c ++中找到二维数组中的最大区域

> ID：15705490
> 
> 赞同：8
> 
> 时间：2013-03-29T14:40:19.463
> 
> 标签：c++, arrays, 2d, area

我需要在 C++ 中编写递归函数，在仅包含 1 或 0 的二维数组中找到数字“1”的最大区域。

例子：

```
int Arr[5][8] =
{
{ 0, 0, 0, 0, 1, 1, 0, 0, },
{ 1, 0, 0, 1, 1, 1, 0, 0, },
{ 1, 1, 0, 1, 0, 1, 1, 0, },
{ 0, 0, 0, 1, 1, 1, 1, 0, },
{ 0, 1, 1, 0, 0, 0, 0, 0, },
}; 
```

视觉示例：[http ://s23.postimg.org/yabwp6h23/find_largest.png](http://s23.postimg.org/yabwp6h23/find_largest.png)

这个数组的最大面积是 12，第二大是 3，第三大是 2。

我想用类似于洪水填充算法的东西来做到这一点，但就是不知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:21:44.153

```
bool visited[5][8];
int i,j;
// variables for the area:
int current_area = 0, max_area = 0;
int Arr[5][8]={ // type your map of values here
}

// functions

void prepare_visited_map() {
    for(i=0;i<5;i++) {
        for(j=0;j<8;j++) visited[i][j] = false;
    }
}

// recursive function to calculate the area around (x,y)
void calculate_largest_area(int x, int y) {
    if(visited[x][y]) return;
    // check if out of boundaries
    if(x<0 || y<0 || x>=5 || y>=8) return;
    // check if the cell is 0
    if(!Arr[x][y]) {
        visited[x][y] = true;
        return;
    }

    // found a propper cell, proceed
    current_area++;
    visited[x][y] = true;
    // call recursive function for the adjacent cells (north, east, south, west)
    calculate_largest_area(x,y-1);
    calculate_largest_area(x+1,y);
    calculate_largest_area(x,y+1);
    calculate_largest_area(x-1,y);
    // by the end of the recursion current_area will hold the area around the initial    cell
}

// main procedure where the above functions are used
int mian() {
    // calculate the sorrounding area of each cell, and pick up the largest of all results
    for(i=0;i<5;i++) {
        for(j=0;j<8;j++) {
            prepare_visited_map();
            calculate_largest_area(i,j);
            if(current_area > max_area)   max_area = current_area;
        }
    }
    printf("Max area is %d",max_area");
} 
```

希望这有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:43:21.813

> 我想用类似于洪水填充算法的东西来做到这一点

我认为这是一个很好的方法。将洪水填充应用于 any `1`，计算一个并用零替换它们。

重复直到网格完全由零组成。

以下将不按特定顺序打印出连接组件的大小：

```
#include <iostream>

constexpr int N = 5;
constexpr int M = 8;

int arr[N][M] =
{
{ 0, 0, 0, 0, 1, 1, 0, 0, },
{ 1, 0, 0, 1, 1, 1, 0, 0, },
{ 1, 1, 0, 1, 0, 1, 1, 0, },
{ 0, 0, 0, 1, 1, 1, 1, 0, },
{ 0, 1, 1, 0, 0, 0, 0, 0, },
};

int fill(int arr[N][M], int r, int c) {
  int count = 0;
  if (r < N && arr[r][c]) {
    for (int i = c; i >= 0 && arr[r][i]; --i) {
      arr[r][i] = 0;
      count += fill(arr, r + 1, i) + 1;
    }
    for (int i = c + 1; i < M && arr[r][i]; ++i) {
      arr[r][i] = 0;
      count += fill(arr, r + 1, i) + 1;
    }
  }
  return count;
}

int print_components(int arr[N][M]) {
  for (int r = 0; r < N; ++r) {
    for (int c = 0; c < M; ++c) {
      if (arr[r][c]) {
        std::cout << fill(arr, r, c) << std::endl;
      }
    }
  }
}

int main() {
  print_components(arr);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:53:23.123

就像是，

```
int max_area = 0;

foreach y
    foreach x
        if (pos[y][x] == 1  &&  !visited[y][x])
        {
            int area = 0;
            Queue queue = new Queue();
            queue.push(new Point(x, y));
            visited[y][x] = true;

            while (!queue.empty())
            {
                Point pt = queue.pop();
                area++;

                foreach neightboor of pt (pt.x±1, pt.y±1)
                    if (pos[neightboor.y][neightboor.x] == 1  &&  !visited[neightboor.y][neightboor.x])
                    {
                        visited[neightboor.y][neightboor.x] = true;
                        queue.push(new Point(neightboor.x, neightboor.y));
                    }
            }

            if (area > max_area)
                max_area = area;
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T15:05:46.427

快速方法，但我不知道是否有办法以理智的方式做到这一点（每个元素的递归调用不适用于 C++，因为调用堆栈是有限的）

```
int maxy = 5
int maxx = 8

int areasize(int x, int y) {
    if (x < 0 || y < 0 || x > maxx || y > maxy || !Arr[y][x])
        return 0;

    Arr[y][x] = 0;

    return 1
           + areasize(x + 1, y)
           + areasize(x - 1, y)
           + areasize(x, y + 1)
           + areasize(x, y - 1);
}

maxarea = 0;

for (int y = 0; y < maxy; y++) {
    for (int x = 0; x < maxx; x++) {
        maxarea = std::max(maxarea, areasize(x, y));
    }
} 
```

# python - python Tkinter：滚动条未添加到文本区域

> ID：15705491
> 
> 赞同：1
> 
> 时间：2013-03-29T14:40:23.080
> 
> 标签：python, tkinter

单独文件中的以下代码工作正常。它正在创建一个文本区域并向其添加滚动条。

```
root = Tkinter.Tk()
text=Text(root,height=10,width=50,background='pink')
scroll=Scrollbar(root)
text.configure(yscrollcommand=scroll.set)
scroll.config(command=text.yview)
text.pack(side=LEFT)
scroll.pack(side=RIGHT,fill=Y) 
```

**但是当它与其他代码（ main.py**）合并时，完全相同的代码不会工作

```
//================ other code
root = Tkinter.Tk()
root.geometry("800x600+100+0") # width, height, x ,y
button_1 =  Button(root,text="iphone file")
button_1.pack()
button_1.grid(row=0, column=0)
button_1.configure(command=openFile)

//------------------ following is the same code
text=Text(root,height=10,width=50,background='pink')
scroll=Scrollbar(root)
text.configure(yscrollcommand=scroll.set)
scroll.config(command=text.yview)
text.pack(side=LEFT)
scroll.pack(side=RIGHT,fill=Y) 
```

当我从 cmd 提示符运行 main.py 文件时，它只是挂起。这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T12:19:38.103

您正在尝试同时使用`grid`和`pack`用于相同的包含小部件。你不能这样做。您要么需要使用`grid`文本和滚动条，要么需要使用`pack`按钮。

# node.js - Node.js 中 JSON 的性能缓慢

> ID：15705494
> 
> 赞同：0
> 
> 时间：2013-03-29T14:40:28.427
> 
> 标签：node.js, yql

我是 node.js（和一般的 javascript）的新手，所以我想我会通过使用 YQL 创建一个简单的天气应用程序来学习。总体而言，该应用程序正在运行，但请求非常缓慢。返回 json 大约需要 6 秒。另一方面，我使用 jQuery(getJSON) 创建了相同的应用程序，并且几乎立即得到结果。

这是从 node.js 中的 url 解析 json 的最佳方法吗？

```
var request = require('request');

var url = 'http://query.yahooapis.com/v1/public/yql?q=SELECT%20*%20FROM%20weather.forecast%20WHERE%20location%3D96720&format=json&diagnostics=true&callback='

request(url, function (error, response, body) {
    console.log(body);
}) 
```

我将不胜感激任何反馈和/或建议。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T21:23:49.930

我只是试图在我的浏览器中打开该 url，超过 10 秒后，它仍在加载。（更新：它超时了。）

我的猜测是，雅虎正在设置您的浏览器尊重的缓存标头，因此您的第一个请求可能已被缓存，然后几乎立即从您的浏览器缓存中加载每个 jQuery 请求。`request()`没有本地缓存​​，因此每次都下载一个新副本，这需要更长的时间。

尝试清除您的浏览器缓存，看看它是否运行得一样快 - 如果第一个请求很慢，那么这将证实我的怀疑。

更新：这里有一些关于请求速度的更多信息：

*   我的家庭互联网连接：主要是超时。（Time Werner Cable / Road Runner；俄亥俄州西部）
*   我在加利福尼亚的 prgmr.com 服务器：快速 - 在 node.js 中第一个请求花费了 1.151 秒，之后每个请求都小于 0.1 秒。节点 v0.8.21
*   在 heroku 上运行的 node.js Web 代理：快速 - 0.28 秒，包括将其代理回我的笔记本电脑的时间 - [http://www.nodeunblocker.com/proxy/http://query.yahooapis.com/v1/public/ yql?q=SELECT%20](http://www.nodeunblocker.com/proxy/http://query.yahooapis.com/v1/public/yql?q=SELECT%20) *%20FROM%20weather.forecast%20WHERE%20location%3D96720&format=json

所以，我开始认为它可能取决于位置，并且至少可以说该节点并不慢。如果不出意外，您可以随意通过我的 heroku 服务器代理请求。请注意，它是一个免费帐户，因此当 heroku “闲置”它时，下一个请求会很慢或有时会出错。

# java - 如何使用 ValueProvider 向图表添加一般垂直轴

> ID：15705496
> 
> 赞同：0
> 
> 时间：2013-03-29T14:40:35.603
> 
> 标签：java, gwt, gxt

这就是我目前在图表中添加线条的方式。这是我要显示的任意函数的抽象类：

```
public abstract class ArbitraryFunction implements
    ValueProvider<ArbitraryFunctionData, Double> {

  private String field;

  public abstract Double f(Double x);

  /**
   * Constructor
   */
  public ArbitraryFunction(String field) {
    this.field = field;
  }

  @Override
  public Double getValue(ArbitraryFunctionData object) {
    return object.get(field);
  }

  @Override
  public void setValue(ArbitraryFunctionData object, Double value) {
    object.put(field, value);
  }

  @Override
  public String getPath() {
    return field;
  }
} 
```

这是创建图表的方式：

```
ArbitraryFunction f1 = new ArbitraryFunction("f1") {
      @Override
      public Double f(Double x) {
        return Math.sin(x);
      }
    };

functionMap.put(f1.getPath(), f1);

// collects the data of the functions and adds them to the store
for (Double x = 0.0; x <= 2 * Math.PI; x = x + 0.1) {
  ArbitraryFunctionData d = new ArbitraryFunctionData();
  d.setName("" + x);
  for (Map.Entry<String, ArbitraryFunction> entry : functionMap.entrySet()) {
    ArbitraryFunction tmp = entry.getValue();
    d.put(tmp.getPath(), tmp.f(x));
  }
  store.add(d);
}

chart.setStore(store);

verticalAxis.setPosition(Position.LEFT);
verticalAxis.addField(f1);
verticalAxis.setSteps(2);
verticalAxis.setMinorTickSteps(5);
chart.addAxis(verticalAxis); 
```

这可以按预期工作。该图显示了我应该做的线条，并且垂直轴也是正确的。但是我在绘制水平轴时遇到了问题，因为我不知道我需要给出什么`horizontalAxis.addField( ??? )`。我尝试了几件事，但没有任何效果。

有谁知道我需要如何设置水平轴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:25:09.323

您希望水平轴值是多少？它是另一个 NumericAxis - 每个数据点是否都有一个`x`应该绘制的值？循环中的每个`d`都有一个字符串`name`和一些值——也许你想要一个`CategoryAxis<ArbitraryFunctionData, String>`只绘制这些`name`值的？

* * *

看起来我之前误解了 - 您的 Function 对象仅用于设置，而不是更改您绘制数据的方式

我仍然不确定你在追求什么，但听起来你最想绘制一些线条。每个数据点 (ArbitraryFunctionData?) 似乎对每个正在使用的函数都有 Y 值，还有一个标题，但没有 X 值，所以没有办法用两个数字轴将每个点绘制为 (X,Y)，就像 ( name, Y) 使用 CategoryAxis 和 NumericAxis。这或多或少会像这个示例一样结束：[http](http://www.sencha.com/examples/#ExamplePlace:linechart) ://www.sencha.com/examples/#ExamplePlace:linechart - 底部为字符串，侧面为数字。

这是一个，主要建立在你已经拥有的想法/结构之上：

```
public class FunctionPlotter implements EntryPoint {
  public static class ArbitraryFunctionData {
    private double xValue;
    private Map<String, Double> yValues = new HashMap<String, Double>();
    public double get(String key) {
      return yValues.get(key);
    }
    public void put(String key, double yValue) {
      yValues.put(key, yValue);
    }
    public double getXValue() {
      return xValue;
    }
    public void setxValue(double xValue) {
      this.xValue = xValue;
    }
  }
  public interface AFDProperties extends PropertyAccess<ArbitraryFunctionData> {
    //xvalue is unique, key off of that
    @Path("xValue")
    ModelKeyProvider<ArbitraryFunctionData> key();

    //automatic ValueProvider generation for the get/setXValue methods
    ValueProvider<ArbitraryFunctionData, Double> xValue();
  }

  /** 
   * This is really doing two different jobs at once - wasn't quite was I was trying to suggest in 
   * that other question. See the second version of this for clarification...
   */
  public static abstract class ArbitraryFunction implements ValueProvider<ArbitraryFunctionData, Double> {
    private final String field;

    public ArbitraryFunction(String field) {
      this.field = field;
    }

    public abstract Double f(Double x);

    @Override
    public Double getValue(ArbitraryFunctionData object) {
      return object.get(field);
    }

    @Override
    public void setValue(ArbitraryFunctionData object, Double value) {
      object.put(field, value);
    }

    @Override
    public String getPath() {
      return field;
    }
  }

  @Override
  public void onModuleLoad() {
    Viewport vp = new Viewport();

    Set<ArbitraryFunction> functions = new HashSet<ArbitraryFunction>();
    ArbitraryFunction f1 = new ArbitraryFunction("f1") {
      @Override
      public Double f(Double x) {
        return Math.sin(x);
      }
    };
    functions.add(f1);

    AFDProperties props = GWT.create(AFDProperties.class);
    ListStore<ArbitraryFunctionData> store = new ListStore<ArbitraryFunctionData>(props.key());
    // collects the data of the functions and adds them to the store
    for (Double x = 0.0; x <= 2 * Math.PI; x = x + 0.1) {
      // Create one data object, and set the X value, since that is the same for all Y values
      ArbitraryFunctionData d = new ArbitraryFunctionData();
      d.setxValue(x);

      // For each function, set the corresponding Y value
      for (ArbitraryFunction func : functions) {
        d.put(func.getPath(), func.f(x));
      }
      store.add(d);
    }

    Chart<ArbitraryFunctionData> chart = new Chart<ArbitraryFunctionData>();
    chart.setStore(store);

    //Y-axis
    NumericAxis<ArbitraryFunctionData> verticalAxis = new NumericAxis<ArbitraryFunctionData>();
    verticalAxis.setPosition(Position.LEFT);
    verticalAxis.addField(f1);//needs to know this field to properly set the range of values
    //f2, f3, etc
    verticalAxis.setSteps(2);
    verticalAxis.setMinorTickSteps(5);
    chart.addAxis(verticalAxis);

    // X-Axis, this time reading from the xValue, not the series of ValueProviders
    NumericAxis<ArbitraryFunctionData> horizAxis = new NumericAxis<ArbitraryFunctionData>();
    horizAxis.setPosition(Position.BOTTOM);
    horizAxis.addField(props.xValue());//same value for all
    horizAxis.setSteps(2);
    horizAxis.setMinorTickSteps(5);
    chart.addAxis(horizAxis);

    for (ArbitraryFunction func : functions) {
      LineSeries<ArbitraryFunctionData> line = new LineSeries<ArbitraryFunctionData>();
      // configure x axis
      line.setXAxisPosition(Position.BOTTOM);//where is it
      line.setXField(props.xValue());//what value do i use
      // configure y axis
      line.setYAxisPosition(Position.LEFT);//where is it
      line.setYField(func);//what value do i use

      //probably want to customized per func
      line.setStroke(RGB.GRAY);
      line.setStrokeWidth(2);

      chart.addSeries(line);
    }

    vp.setWidget(chart);
    RootPanel.get().add(vp);
  }
} 
```

这里有两个，这次使用更简单的数据，实际上使函数成为自己的 ValueProvider，并保持数据简单 - 只是一个两倍！请注意，ValueProvider*是*函数，我们从不自己调用 getValue，我们让轴/系列为我们做这件事！在此处添加了第二个函数以证明它确实有效。

```
public class FunctionPlotter implements EntryPoint {

  /**
   * Where did everything go? We're just making a ValueProvider now that can handle 
   * each number as a value, and working out the details from there
   *
   * For fun, added per-function coloring too
   */
  public abstract static class Function implements ValueProvider<Double, Double> {
    private final String name;
    private final Color color;
    public Function(String name, Color color) {
      this.name = name;
      this.color = color;
    }
    @Override
    public abstract Double getValue(Double object);

    @Override
    public String getPath() {
      return name;
    }
    @Override
    public void setValue(Double object, Double value) {
      //no-op
    }
    public Color getColor() {
      return color;
    }
  }

  @Override
  public void onModuleLoad() {
    Viewport vp = new Viewport();

    Set<Function> functions = new HashSet<Function>();
    Function f1 = new Function("f1", RGB.RED) {
      @Override
      public Double getValue(Double x) {
        return Math.sin(x);
      }
    };
    functions.add(f1);
    Function f2 = new Function("f2", RGB.BLACK) {
      @Override
      public Double getValue(Double x) {
        return Math.cos(x);
      }
    };
    functions.add(f2);

    //Turns out Stores can hold any objects - should probably factor out this key provider for reuse...
    ListStore<Double> store = new ListStore<Double>(new ModelKeyProvider<Double>() {
      @Override
      public String getKey(Double item) {
        return item.toString();
      }
    });
    // collects the data of the functions and adds them to the store
    for (Double x = 0.0; x <= 2 * Math.PI; x = x + 0.1) {
      store.add(x);
    }

    Chart<Double> chart = new Chart<Double>();
    chart.setStore(store);

    //Y-axis
    NumericAxis<Double> verticalAxis = new NumericAxis<Double>();
    verticalAxis.setPosition(Position.LEFT);
    for (Function func : functions) {
      verticalAxis.addField(func);//needs to know this field to properly set the range of values
    }
    verticalAxis.setSteps(2);
    verticalAxis.setMinorTickSteps(5);
    chart.addAxis(verticalAxis);

    // X-Axis, this time reading from the xValue, not the series of ValueProviders
    NumericAxis<Double> horizAxis = new NumericAxis<Double>();
    horizAxis.setPosition(Position.BOTTOM);
    horizAxis.addField(new IdentityValueProvider<Double>());//magic value provider that returns the same string
    horizAxis.setSteps(2);
    horizAxis.setMinorTickSteps(5);
    chart.addAxis(horizAxis);

    for (Function func : functions) {
      LineSeries<Double> line = new LineSeries<Double>();
      // configure x axis
      line.setXAxisPosition(Position.BOTTOM);//where is it
      line.setXField(new IdentityValueProvider<Double>());//what value do i use
      // configure y axis
      line.setYAxisPosition(Position.LEFT);//where is it
      line.setYField(func);//what value do i use

      //probably want to customized per func
      line.setStroke(func.getColor());
      line.setStrokeWidth(2);

      chart.addSeries(line);
    }

    vp.setWidget(chart);
    RootPanel.get().add(vp);
  }
} 
```

# facebook - 我应该在 iOS 5 中使用哪个 FB SDK 版本？

> ID：15705500
> 
> 赞同：0
> 
> 时间：2013-03-29T14:40:44.817
> 
> 标签：facebook, ios5, version

我的项目在这个版本中使用了 iOS 5.1 + Xcode 4.5。我现在真正想做的就是阅读来自 Facebook 的帖子（见下面的链接）。我暂时不会使用 iOS 6。

在开始使用 Facebook SDK 之前，我需要了解几件事；

1.  我应该与 iOS 5.1 一起使用哪个版本的 FB SDK？
2.  与 iOS 5.1 一起使用时，最新的 FB SDK 是否“正常降级”？
3.  开始阅读 FB 内容的基础知识有什么好的例子吗？（除了 FB Dev 示例）

另见：[只想看脸书墙，需要安装FB SDK吗？](https://stackoverflow.com/questions/15702754/just-want-to-read-a-facebook-wall-do-i-need-to-install-fb-sdk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T13:52:13.237

使用 facebook sdk 3.1 或 > 3.1。因为 FBconnect 在最新版本（ios5 或更高版本）中不工作

在这里试试这个[FB](https://github.com/facebook/facebook-ios-sdk/downloads)

# meta-tags - 根目录中的 Robots.txt 会覆盖 Meta 标签还是 Meta 标签会覆盖 robots.txt 文件？

> ID：15705501
> 
> 赞同：1
> 
> 时间：2013-03-29T14:40:56.067
> 
> 标签：meta-tags, robots.txt, meta

我不希望任何搜索引擎索引我的网站，所以我将 robots.txt 放在根目录中；这会覆盖 Meta 标签还是 Meta 标签会覆盖 robots.txt 文件？

问这个问题的原因是某些页面可能有 Meta 标签告诉机器人索引，跟随，但是我已经将网站移动到一个子域名女巫我仍在调整网站之前它上线替换旧的网站，我不想删除所有告诉机器人索引的元标记，然后当网站准备好时，必须替换告诉机器人索引的元标记，所以我认为 robots.txt 是除了告诉机器人不要索引之外，最快，最简单且不会更改站点，如果那是我在文本文件中的内容，请遵循。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:07:08.270

好吧，如果 robots.txt 不允许抓取包含该文档的目录，那么他们可能永远无法访问该文档，所以没有问题。

如果 HTML 链接中有“follow”属性，机器人会将这些 URL 排队等待抓取，但是当它实际尝试抓取时，它会在 robots.txt 中看到该块而不是抓取。

简短的回答是：robots.txt 将阻止行为良好的爬虫跟踪链接，无论它从何处获得该链接或在找到该链接时与该链接相关联的属性如何。

# javascript - 通过ajax在谷歌地图中显示附加标记

> ID：15705510
> 
> 赞同：0
> 
> 时间：2013-03-29T14:41:16.617
> 
> 标签：javascript, google-maps, google-maps-api-3

我使用“maps.googleapis.com/maps/api/js?v=3”创建了一个谷歌地图。在该地图中，我显示了不同位置的标记，效果很好。下面是我使用的代码。

```
google.maps.event.addDomListener(window, 'load', function() {
                var map = new google.maps.Map(document.getElementById('map1'), {
                      zoom: 10,
                      center: new google.maps.LatLng(latitude, longitude),
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                });
                var marker = new google.maps.Marker({
                                map: map,
                                position: new google.maps.LatLng(23.42323, -45.47653),

                            });
}); 
```

现在我想在 Ajax 中添加更多位置标记。例如：我将从下拉列表中添加位置名称，它会对服务器端进行 ajax 调用。拉出位置经纬度，会显示在地图上。我怎样才能实现它。

我已经编写了一个单独的 js 函数来执行 ajax 调用，但是在里面的代码没有得到'map'实例。这里我只使用了这段代码

```
 new google.maps.Marker({
    map: map,
    position: new google.maps.LatLng(23.42323, -45.47653),
}); 
```

这里我不再初始化地图。所以它没有得到地图实例并抛出错误。如何修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:15:07.593

地图的范围仅限于事件句柄内部。尝试这个：

```
var map, markerCollection;

google.maps.event.addDomListener(window, 'load', function() {
    map = new google.maps.Map(document.getElementById('map1'), {
        zoom: 10,
        center: new google.maps.LatLng(latitude, longitude),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
});

function addMarker(lat, lng){
    var marker = new google.maps.Marker({
        map: map,
        position: new google.maps.LatLng(lat, lng),
    });
    markerCollection.push(marker);
} 
```

注意： 1) 定义地图中心时，请填写“纬度”和“经度”的值。否则，您只会显示地图。2) 我知道将标记添加到数组中可能不是最佳做法，但我发现这比后者更容易访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:14:10.940

由于`map`不是全局变量，因此它正在被取消引用。使`map`对象成为全局对象或在存储所有代码的容器函数中。

### 全局 JS 示例

```
//now it's global
var map;
google.maps.event.addDomListener(window, 'load', function () {
    map = new google.maps.Map(document.getElementById('map1'), {
        zoom: 10,
        center: new google.maps.LatLng(latitude, longitude),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    });
    var marker = new google.maps.Marker({
        map: map,
        position: new google.maps.LatLng(23.42323, -45.47653),
    });
}); 
```

# python - SQLAlchemy ORM：修改 WHERE 子句

> ID：15705511
> 
> 赞同：2
> 
> 时间：2013-03-29T14:41:18.487
> 
> 标签：python, orm, sqlalchemy, where-clause

如果我得到了一个我没有构造的 Query 对象，有没有办法直接修改它的 WHERE 子句？我真的希望能够删除一些 AND 语句或替换查询的整个 FROM 子句，而不是从头开始。

我知道以下修改 SELECT 子句的方法：

Query.with_entities()、Query.add_entities()、Query.add_columns()、Query.select_from()

我认为这也会修改 FROM。而且我看到我可以使用 Query.whereclause 查看 WHERE 子句，但文档说它是只读的。

我意识到我在用 SQL 术语思考，但此时我比 ORM 更熟悉这些概念。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:13:36.433

您可以直接修改 query._whereclause ，但我会设法找到一种方法来解决这个问题 - 无论生成查询的地方是什么，都应该考虑到非 whereclause 版本可用。

# mediaelement.js - MediaElement.js 覆盖按钮

> ID：15705512
> 
> 赞同：3
> 
> 时间：2013-03-29T14:41:25.260
> 
> 标签：mediaelement.js

我正在使用 MediaElement.js 在 Youtube 视频上构建我自己的 HTML5 视频播放器。我目前只使用 MediaElement 对象，没有 MediaElementPlayer 库。我想知道是否有任何方法可以仅使用对象获得覆盖开始按钮（或模拟它）。

对于我正在谈论的叠加层示例，我指的是带有圆圈的白色箭头：http: [//mediaelementjs.com/examples/ ?name=youtube](http://mediaelementjs.com/examples/?name=youtube)

# php - 使用带有绝对链接的 dompdf

> ID：15705513
> 
> 赞同：1
> 
> 时间：2013-03-29T14:41:33.240
> 
> 标签：php, pdf-generation, dompdf

我正在使用标准 DOMPDF 代码来呈现现有网页（例如[1](http://jasss.soc.surrey.ac.uk/16/2/1.html)）：

```
$dompdf = new DOMPDF();
$dompdf->set_base_path($artpath);
$dompdf->load_html_file($artpath);
$dompdf->render();
$dompdf->stream($pdfpath); 
```

其中`$artpath`' 是 HTML 代码的路径，`$pdfpath`是 PDF 的名称。

但是，该网页同时包含相对链接（正确遵循）和绝对链接（例如`/gifs/bullet.gif`），但未找到。这可能是因为 DOMPDF 代码正在[http://www.epress.ac.uk/src/xtra/makeapdf.php](http://www.epress.ac.uk/src/xtra/makeapdf.php)执行，`www.epress.ac.uk`它是我服务器上的一个虚拟域，它也托管虚拟域`jasss.soc.surrey.ac.uk`（即域在**同一**台服务器上）。似乎 DOMPDF 正在使用 的文档根目录`www.epress.ac.uk`，而它应该使用`jasss.surrey.ac.uk`.

有没有办法解决这个问题？我曾尝试重置`$_SERVER['DOCUMENT_ROOT']`为`jasss.soc.surrey.ac.uk`before call的文档根目录`new DOMPDF()`，但这似乎并不能解决问题。我收到以下错误：

```
file_get_contents(/styles/jasssarticle.css) [function.file-get-contents]: failed to open stream: No such file or directory

Unable to load css file /styles/jasssarticle.css 
```

根据 www validator.w3.org，该网页是有效的 HTML

谢谢你的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-31T01:39:44.543

You're loading a file via the file system. That means all references to external files that don't include a domain part in the path are rendered relative to the file system. You can reference files in three ways:

*   Full URL (including domain), e.g. `http://example.com/image.png`. These are always read from the URL specified.
*   Absolute path, e.g. `/file/path/image.png`. This is read relative to the root of the *file system*, not the root of the web site, or the user's home directory (in the case of shared hosting).
*   Relative path (no leading slash), e.g. `file/path/image.png`. This is read relative to the HTML file. So in your case the file would be read from `/Volumes/Documents/VirtualSites/jasss/16/2/file/path/image.png`.

Calling `$dompdf->set_base_path()` only affects the relative path.

You'll have to modify the absolute file references to include the path to the website root, e.g. `/Volumes/Documents/VirtualSites/jasss/styles/jasssarticle.css`, or load the file via the website, e.g. `http://jasss.soc.surrey.ac.uk/16/2/1.html`.

# ios - 在最新的 XCode 中合成

> ID：15705514
> 
> 赞同：1
> 
> 时间：2013-02-07T09:16:38.500
> 
> 标签：ios, xcode

我是第一次学习 XCode 和 iOS。当使用鼠标和 Ctrl 键创建插座时，@synthesize 会发生什么？在我正在观看的教程中，它是自动创建的，但我在 Xcode 中看不到它。我正在运行最新的 OS X 和最新的 Xcode。

如果它不是自动创建的，我们还能覆盖 getter 和 setter 吗？

说这样的话：

```
@synthesize topSpeed = _topSpeed;

(void)setTopSpeed:(double)speed
{
    if((speed < 1) && (speed > 0) _topSpeed = speed;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T09:53:40.857

由于您拥有最新的 OS X (!0.8) 和 Xcode (4.6)，因此您无需为在 @interface 中声明的每个属性显式指定 @synthesize — 除非您要同时覆盖 setter 和 getter，或者如果您想要使用您的示例中突出显示的其他名称

```
@synthesize topSpeed = _topSpeed; 
```

您还可以覆盖 getter 和 setter（如果 property 属性不是只读的）作为您的代码

```
(void)setTopSpeed:(double)speed
{
    if((speed < 1) && (speed > 0) _topSpeed = speed;
} 
```

显示。

# ruby-on-rails - 为什么我会收到“%-m%d%Y”的“无效日期”错误？

> ID：15705517
> 
> 赞同：0
> 
> 时间：2013-03-29T14:41:38.553
> 
> 标签：ruby-on-rails, ruby, date

有人可以用以下行解释为什么我会收到无效的日期错误吗？

```
Date.strptime("3082013",'%-m%d%Y') 
```

据我了解，`%-m`应该找一个月没有领先`0`。但是，执行此代码会返回

```
ArgumentError: invalid date 
```

假设我无法更改传入日期的格式，那么处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:44:35.257

在左边加一个零：

```
Date.strptime("3082013".rjust(8,'0'),'%-m%d%Y') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:48:30.673

问题是它`strptime`不支持减号 (-) 标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:44:11.580

您需要在月/日/年之间添加某种分隔符。否则 Ruby 怎么知道“3082013”​​是 3/08/2013 还是 30/8/2013？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T16:40:04.593

有时你必须降低一点，然后做`Date.strptime`对你有用的事情：

```
"3082013".scan(/(\d+) (\d{2}) (\d{4})/x).first
=> ["3", "08", "2013"] 
```

如果`"308213"`是`MMDDYYYY`格式：

```
mon, day, year = "03082013".scan(/(\d+) (\d{2}) (\d{4})/x).first.map(&:to_i)
=> [3, 8, 2013] 
```

Or, if you know that it's in `DDMMYYYY` format, switch `mon` and `day`:

```
day, mon, year = "03082013".scan(/(\d+) (\d{2}) (\d{4})/x).first.map(&:to_i)
=> [3, 8, 2013] 
```

Then you can create a Date object:

```
Date.new(year, mon, day)
=> #<Date: 2013-03-08 ((2456360j,0s,0n),+0s,2299161j)> 
```

# vb.net - 协会奇怪的行为

> ID：15705518
> 
> 赞同：1
> 
> 时间：2013-03-29T14:41:41.197
> 
> 标签：vb.net, entity-framework, entity-framework-5, model-associations, ef-model-first

我在 Model First 方法中发现了关于在 .NET 4.0 下运行的 EF5 的以下问题：我有以下自动生成的实体：

```
Partial Public Class Notice

    Private _id As Integer
    Public Property id As Integer
        Get
            Return _id
        End Get
        Friend Set(ByVal value As Integer)
            _id = value
        End Set
    End Property
    Public Property order_id As Integer
    Public Property employee_id As Integer
    Public Property sysdate As Datetime
    Public Property content As String

    Public Overridable Property order As Order
    Public Overridable Property employee As Employee

End Class 
```

通知实体与订单实体和员工实体通过1（订单，员工）对多（通知）的关系关联。

之后，Order 实体也与 Employee 实体有关联：many (Order) to 1 (Employee) 关系。

然后，我预计以下单元测试会失败，因为通知实体与员工实体违规的关系（我没有分配 notice1.employee 导航属性）：

```
<TestMethod()>
    <ExpectedException(GetType(DbUpdateException))>
    Public Sub ShouldNotAllowSaveNoticeWithoutAssignedEmployee()

        Dim notice1 = CreateNewNotice() ' returned entity has not set any relation
        notice1.order= CreateNewOrderWithAllRequiredAndRelatedEntities()

        DbContext.noticeSet.Add(notice1)
        DbContext.SaveChanges()

    End Sub 
```

但在结果测试中通过了。在数据库中，Notice->employee_id 值等于 Order->employee_id 值，这是意料之外的，因为这些外键可能指向不同的 Employee 对象。`DbUpdateException`我希望我必须自己设置 notice1.employee 导航属性，如果我忘记这样做，我想获得例外。

这种奇怪的 EF5 行为的原因是什么？

*更新：*

`CreateNewNotice()`和`CreateNewOrderWithAllRequiredAndRelatedEntities()`实施：

```
 Protected Function CreateNewNotice(Optional ByVal suffix As Int32 = 1) As Notice

        Dim notice1 = New Notice() With {
            .sysdate = DateTime.Now,
            .content = Description & suffix ' Description is constant, for testing purposes
        }

        Return notice1 

    End Function

Protected Function CreateNewOrderWithAllRequiredAndRelatedEntities(Optional ByVal suffix As Int32 = 1) As Order

        Dim order1 = CreateNewOrder(suffix) ' returned entity has not set any relation
        order1.employee = CreateNewEmployee(suffix)
        order1.customer = CreateNewCustomerWithAllRequiredRelatedEntities(suffix)
        order1.seller = CreateNewSeller(suffix)

        For i As Integer = 1 To 3
            order1.notices.Add(CreateNewNotice(i)) ' created notices have not initialized relations
        Next

        Return order1

    End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:44:07.020

我已经认识到这个问题，并且看起来 EF5 的行为不同，具体取决于我们使用的是“外键关联”还是“独立关联”（有关 EF 中关系的一些信息：[Relationships and Navigation Properties](http://msdn.microsoft.com/en-us/data/jj713564)）

假设我们使用 EF5 模型优先方法（使用 .NET 4.5）。让我们考虑自动生成的实体类，与主题问题中显示的示例相关：

```
Partial Public Class Employee
    Public Property id As Integer
    Public Property firstname As String
    Public Property lastname As String

    Public Overridable Property Notices As ICollection(Of Notice) = New HashSet(Of Notice)
    Public Overridable Property Orders As ICollection(Of Order) = New HashSet(Of Order)

End Class

Partial Public Class Order
    Public Property id As Integer
    Public Property Employee_id As Integer
    Public Property article As String

    Public Overridable Property Notices As ICollection(Of Notice) = New HashSet(Of Notice)
    Public Overridable Property Employee As Employee

End Class

Partial Public Class Notice
    Public Property id As Integer
    Public Property Employee_id As Integer
    Public Property Order_id As Integer
    Public Property sysdate As Date
    Public Property content As String

    Public Overridable Property Employee As Employee
    Public Overridable Property Order As Order

End Class 
```

该实体类使用“外键关联”和“独立关联”。然后，我们有以下单元测试类：

```
<TestClass()>
Public Class UnitTests

    Protected DbContext As DbModelContext

    <TestInitialize()>
    Public Sub TestInitialize()

        Thread.CurrentThread.CurrentUICulture = New CultureInfo("en-us")
        DbContext = New DbModelContext()

    End Sub

    <TestCleanup()>
    Public Sub TestCleanup()

        DbContext.Dispose()

    End Sub

    <TestMethod()>
    Public Sub Test1()

        Dim notice1 = CreateNewNotice()
        notice1.Order = CreateNewOrderWithAllRequiredAndRelatedEntities()

        DbContext.NoticeSet.Add(notice1)
        DbContext.SaveChanges() ' no DbUpdateException exception

        Assert.AreEqual(notice1.Employee.id, notice1.Order.Employee.id)
        Assert.AreEqual(notice1.Employee.id, notice1.Order.Notices.First().Employee.id)

    End Sub

    <TestMethod()>
    Public Sub Test2()

        Dim notice1 = CreateNewNotice()
        notice1.Order = CreateNewOrderWithAllRequiredAndRelatedEntities()

        DbContext.NoticeSet.Add(notice1)

        Dim employee2 = CreateNewEmployee()

        DbContext.EmployeeSet.Add(employee2)

        DbContext.SaveChanges() 'DbUpdateException exception

    End Sub

    ''' <summary>
    ''' Create new Order object along with required associated objects,
    ''' however related Notice objects do not have assigned required associated objects
    ''' </summary>
    Protected Function CreateNewOrderWithAllRequiredAndRelatedEntities(Optional ByVal suffix As Int32 = 1) As Order

        Dim order1 = CreateNewOrder(suffix)
        order1.Employee = CreateNewEmployee(suffix)

        For i = suffix To suffix + 2

            order1.Notices.Add(CreateNewNotice(i))

        Next

        Return order1

    End Function

    ''' <summary>
    ''' Create new Order object without required associated objects
    ''' </summary>
    Protected Function CreateNewOrder(Optional ByVal suffix As Int32 = 1) As Order

        Dim order1 = New Order() With {
                .article = "article" & suffix
            }

        Return order1

    End Function

    ''' <summary>
    ''' Create new Employee object required without associated objects
    ''' </summary>
    Protected Function CreateNewEmployee(Optional ByVal suffix As Int32 = 1) As Employee

        Dim employee1 = New Employee() With {
                .firstname = "firstname" & suffix,
                .lastname = "lastname" & suffix
            }

        Return employee1

    End Function

    ''' <summary>
    ''' Create new Notice object without associated objects
    ''' </summary>
    Protected Function CreateNewNotice(Optional ByVal suffix As Int32 = 1) As Notice

        Dim notice1 = New Notice() With {
            .sysdate = DateTime.Now,
            .content = "Description" & suffix
        }

        Return notice1

    End Function

End Class 
```

如果我们运行测试，`Test1()`通过，但`Test2()`异常失败：

**System.Data.Entity.Infrastructure.DbUpdateException**：无法确定“Model1.NoticeEmployee”关系的主体端。多个添加的实体可能具有相同的主键。---> System.Data.UpdateException：无法确定“Model1.NoticeEmployee”关系的主体端。多个添加的实体可能具有相同的主键。

结论：

里面`Test1()`只有一个`Employee`对象和一个`Order`对象`DbContext`。代码中未设置的关系 ( `Notice.Employee`, ) 由 EF 在语句`Notice.Order`内自动设置。`DbContext.SaveChanges()`里面`Test2()`有两个`Employee`对象`DbContext`，所以`Notice.Employee`没有自动赋值。

奇怪的是，如果我们从模型实体中删除外键属性，以便仅具有“独立关联”功能，则两个测试都会失败，并出现相同的**System.Data.Entity.Infrastructure.DbUpdateException**异常。

同样，如果我们从模型实体中删除导航属性，以便仅具有“外键关联”功能，则两个测试都会失败并出现相同的异常。

# cocoa - 防止沙盒应用程序中出现 Cmd+Shift+Q 警报

> ID：15705523
> 
> 赞同：1
> 
> 时间：2013-03-29T14:42:26.997
> 
> 标签：cocoa, sandbox, hotkeys

我在我的应用程序中用自己的窗口挡住了屏幕。我需要防止出现这个由++系统热键调用`Cmd`的警报`Shift`。`Q`

[![在此处输入图像描述](../Images/dfd70112a38ef02bfb47d662d77dbe5b.png)](https://i.stack.imgur.com/RjpaC.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:56:28.403

您要查找的内容称为[kiosk mode](http://developer.apple.com/library/mac/technotes/KioskMode/)。您可能想要阻止几件事，包括“会话终止”（注销命令等）、应用程序切换和 Exposé，以及 Apple 菜单；该文档描述了如何阻止您想要阻止的任何项目。

# iphone - 函数ios中的多个字符串变量

> ID：15705525
> 
> 赞同：-1
> 
> 时间：2013-03-29T14:42:36.020
> 
> 标签：iphone, ios, objective-c

我对 ios 真的很陌生，我正在尝试编写一个接收 4 个字符串的函数，这是我尝试的方法：这是在我的 h 文件中：

```
-(BOOL)validate:(NSString*)fullname:(NSString*)email: NSString username:(NSString*)password 
```

这是在我的 m 文件中：

```
-(BOOL)validate:(NSString*)fullname:(NSString*)email: NSString username:(NSString*)password
{
    NSString *emailRegex = @"[A-Z0-9A-z._%+- ]+@[A-Za-z0-0.-]+\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@",emailRegex];
    return YES;
} 
```

错误是我在 emailRegex 和 emaitTest 上使用了未声明的标识符

基本上我要做的就是声明一个接收4个字符串的方法：全名电子邮件用户名密码

并实施。

任何帮助都会很好。

再会。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:46:17.360

它应该是：

```
-(BOOL)validateFullName:(NSString*)fullName email:(NSString*)email userName:(NSString*)username withPassword:(NSString*)password; 
```

为了更好的可读性：

```
-(BOOL)validateFullName:(NSString*)fullName
                  email:(NSString*)email
               userName:(NSString*)username
               password:(NSString*)password; 
```

**编辑：命名约定不是最好的，所以重命名。*

# java - 验证重载的方法调用

> ID：15705526
> 
> 赞同：1
> 
> 时间：2013-03-29T14:42:37.337
> 
> 标签：java, mockito

我正在尝试使用 Mockito`verify`功能验证一个方法是否被多次调用。但是，我遇到的问题是该方法已重载，因此它声称该方法未被调用。要将扳手添加到组合中，我还希望捕获传递给此方法的参数是什么。这是我到目前为止所拥有的：

```
@Test
public void simpleTest() throws IOException {
    FlumeAppender mockAppender = Mockito.mock(FlumeAppender.class);
    ArgumentCaptor<LoggingEvent> arguments = ArgumentCaptor.forClass(LoggingEvent.class);

    // Load the message that should be sent to the class being tested
    InputStream in = this.getClass().getResourceAsStream("/testMessage.xml");
    StringWriter writer = new StringWriter();
    IOUtils.copy(in, writer, "UTF-8");
    String testMessage = writer.toString();

    // Send a message to the class being tested. This class will 
    // (hopefully) call the function I am listening to below
    eventSubscriber.handleMessage(testMessage);

    // Verify that the append method was called twice
    Mockito.verify(mockAppender, Mockito.times(2)).append(
            arguments.capture());

    // Do something with the arguments
} 
```

就像我说的那样，我试图验证（追加）的功能已重载。是否可以在仍捕获参数的同时指定我要求验证的附加函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:36:05.580

令人尴尬的是，我发现我的问题的解决方案是一个简单错误的结果。我将发布答案以供参考。

创建 ArgumentCaptor 时，请使用泛型指定您期望的参数类型。我已经这样做了，但遗憾的是，我使用了我不希望被调用的方法的其他版本之一中的类型。简单的错误。

```
// This declaration
ArgumentCaptor<LoggingEvent> arguments = ArgumentCaptor.forClass(LoggingEvent.class);

// Should have been:
ArgumentCaptor<Event> arguments = ArgumentCaptor.forClass(Event.class); 
```

一旦这是正确的，验证函数应该按预期工作，使用 ArgumentCaptor 中的类型来确定要查看的方法。

很近...

# d3.js - 图表放大 D3

> ID：15705527
> 
> 赞同：16
> 
> 时间：2013-03-29T14:42:39.067
> 
> 标签：d3.js, zooming

这是我绘制具有缩放功能的折线图的代码。但是问题是，当我放大光标时，光标不会停留在同一点上。我想放大鼠标光标所在的位置（我希望我足够清楚）。

这是jsfiddle：http: [//jsfiddle.net/KSAbK/](http://jsfiddle.net/KSAbK/)

```
width = 400 - margin.left - margin.right;
height = 200 - margin.top - margin.bottom;

var x = d3.time.scale()
    .domain(d3.extent(data, function (d) {
    return d.date;
}))
    .range([0, width]);

var y = d3.scale.linear()
    .domain(d3.extent(data, function (d) {
    return d.value;
}))
    .range([height, 0]);

var line = d3.svg.line()
    .x(function (d) {
    return x(d.date);
})
    .y(function (d) {
    return y(d.value);
});

var zoom = d3.behavior.zoom()
    .x(x)
    .y(y)
    .on("zoom", zoomed);

svg = d3.select('#chart')
    .append("svg:svg")
    .attr('width', width + margin.left + margin.right)
    .attr('height', height + margin.top + margin.bottom)
    .call(zoom)
    .append("svg:g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var make_x_axis = function () {
    return d3.svg.axis()
        .scale(x)
        .orient("bottom")
        .ticks(5);
};

var make_y_axis = function () {
    return d3.svg.axis()
        .scale(y)
        .orient("left")
        .ticks(5);
};

var xAxis = make_x_axis();

svg.append("svg:g")
    .attr("class", "x axis")
    .attr("transform", "translate(0, " + height + ")")
    .call(xAxis);

var yAxis = make_y_axis();

svg.append("g")
    .attr("class", "y axis")
    .call(yAxis);

svg.append("g")
    .attr("class", "x grid")
    .attr("transform", "translate(0," + height + ")")
    .call(make_x_axis()
    .tickSize(-height, 0, 0)
    .tickFormat(""));

svg.append("g")
    .attr("class", "y grid")
    .call(make_y_axis()
    .tickSize(-width, 0, 0)
    .tickFormat(""));

var clip = svg.append("svg:clipPath")
    .attr("id", "clip")
    .append("svg:rect")
    .attr("x", 0)
    .attr("y", 0)
    .attr("width", width)
    .attr("height", height);

var chartBody = svg.append("g")
    .attr("clip-path", "url(#clip)");

chartBody.append("svg:path")
    .datum(data)
    .attr("class", "line")
    .attr("d", line);

function zoomed() {
    console.log(d3.event.translate);
    console.log(d3.event.scale);
    svg.select(".x.axis").call(xAxis);
    svg.select(".y.axis").call(yAxis);
    svg.select(".x.grid")
        .call(make_x_axis()
        .tickSize(-height, 0, 0)
        .tickFormat(""));
    svg.select(".y.grid")
        .call(make_y_axis()
        .tickSize(-width, 0, 0)
        .tickFormat(""));
    svg.select(".line")
        .attr("class", "line")
        .attr("d", line);
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-04T12:45:06.923

弄清楚了。我必须`.call(zoom)`在`g`元素上使用，并且我还添加了另一个矩形，以便在鼠标光标位于图表区域的任何位置时触发缩放。

[http://jsfiddle.net/KSAbK/1/](http://jsfiddle.net/KSAbK/1/)

```
svg = d3.select('#chart')
    .append("svg:svg")
    .attr('width', width + margin.left + margin.right)
    .attr('height', height + margin.top + margin.bottom)
    .append("svg:g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .call(zoom);

svg.append("svg:rect")
    .attr("width", width)
    .attr("height", height)
    .attr("class", "plot"); 
```

# joomla - joomla 的轻量级讨论板

> ID：15705531
> 
> 赞同：-1
> 
> 时间：2013-03-29T14:42:56.460
> 
> 标签：joomla

我需要一个非常轻量级的 joomla 3.0 讨论板。您应该能够输入主题、名称和消息。我希望人们也能够对这些主题发表评论。我不想要一个成熟的论坛，只是非常基础。

我发现的扩展都太高级了。

我正在考虑两种方法来做到这一点。通过提交允许评论的文章的自定义表单，然后我将它们显示在类别列表中。那会很棒，但我不确定从哪里开始实现这一点。如果需要，我有一些基本的编程技能。

我认为另一种方式是使用内容创建扩展？但由于我看过的那些要花钱，所以我不能只测试它们，看看它是否有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:07:55.333

一个论坛对于你需要的东西来说绝对是太重了。您最好查看Joomla 扩展目录上的[博客类别。](http://extensions.joomla.org/extensions/authoring-a-content/blog)当您使用 Joomla 3.0 时，您可以使用的扩展程序会受到更多限制，但是仍然有一些：

商业的：

1.  [易博客](http://extensions.joomla.org/extensions/authoring-a-content/blog/12630)
2.  [回复博客](http://extensions.joomla.org/extensions/authoring-a-content/blog/14679)

非商业：

1.  [CjBlog](http://extensions.joomla.org/extensions/authoring-a-content/blog/22885)
2.  [JUBlog](http://extensions.joomla.org/extensions/authoring-a-content/blog/19861)

作为第二个资源，您可以尝试使用[Komento](http://extensions.joomla.org/extensions/contacts-and-feedback/articles-comments/20527)

希望这可以帮助

# angularjs - AngularJS：包含和范围继承=损坏的绑定？

> ID：15705532
> 
> 赞同：2
> 
> 时间：2013-03-29T14:42:59.230
> 
> 标签：angularjs

为了清理我的部分内容，我最近将一些全局菜单移到了单独的模板中，现在我将这些模板包含在需要它们的视图中。由于菜单（包括搜索栏）是全局的，我创建了一个服务来跟踪菜单的状态等。

问题是在我开始包含之后发生了一些有趣的事情。

**视图的 HTML (Jade)**

```
div(ng-controller='HeroUnitCtrl', ng-include src='heroTemplate')
div(ng-controller='MainSearchBarCtrl', ng-include src='searchBarTemplate')

div.row-fluid
    div.span12
        table.table.table-striped.table-bordered
            tr
                th
                    a(ng-click='setOrder("id")') ID#
                th
                    a(ng-click='setOrder("client.name")') Kunde
                th
                    a(ng-click='setOrder("technician.name")') Tekniker
                th
                    a(ng-click='setOrder("createdAt")') Opprettet
                th
                    a(ng-click='setOrder("statusString")') Status

            tr(ng-repeat='record in records | orderBy:orderProp | filter:searchBar')
                td
                    a(ng-href='#/records/show/{{record.id}}') {{record.id}}
                td {{record.client.name}}
                td {{record.technician.name}}
                td {{record.createdAt}}
                td {{record.statusString}} 
```

**HTML (Jade) 搜索栏模板**

```
input#searchField.input-xxlarge(type='text', placeholder='placeholder', ng-change='searchBarUpdated()', ng-model='searchBar') 
```

*到现在有点看不懂了*

**MainSearchBarCtrl**

```
function MainSearchBarCtrl(MainSearchBarService, $scope, $location) {
    $scope.searchBarTemplate = 'partials/main-searchbar';
    $scope.searchBar = 'Hello World!';

    $scope.searchBarUpdated = function() {
        console.log('Search bar update: ' + $scope.searchBar);
        MainSearchBarService.searchBarUpdated($scope.searchBar);
    }   
} 
```

最初，*searchBar*的值与预期的一样是“Hello World”。但是，如果我附加任何文本，它仍然只打印“Hello World”。或者，如果我替换它打印未定义的文本。所以看起来绑定被打破了，但我真的不明白为什么会这样。值得一提的是，在我将搜索栏移到单独的模板中之前，情况并非如此。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-29T15:41:35.583

正如上面评论中所讨论的，`ng-include`创建一个新的子范围。因此，在您的 searchBarTemplate 中，使用`ng-model="searchBar"`结果会在子范围内创建一个新`searchBar`属性，该属性会隐藏/隐藏`searchBar`同名的父属性。

在控制器中，定义一个对象：

```
$scope.obj = {searchBar: 'Hello World!}; 
```

然后使用

```
ng-model="obj.searchBar" 
```

in your template. When objects are used (instead of primitives), the child scope does not create a new property. Rather, due to the way [JavaScript prototypal inheritance works](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482), the child scope will find the property on the parent scope.

See also [https://stackoverflow.com/a/14146317/215945](https://stackoverflow.com/a/14146317/215945) which has a picture showing the child and parent scopes and how the child property hides/shadows the parent property if a primitive is used.

Note that using `$parent` is another option, but it is not "best practice".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:30:19.540

Try using $parent instead of $scope in your included template

# drools - 为什么规则 1 的后果不影响规则 2 的行为？

> ID：15705540
> 
> 赞同：0
> 
> 时间：2013-03-29T14:43:36.743
> 
> 标签：drools

作为自学流口水的练习，我正在研究桥牌游戏中的竞标规则。规则彼此独立工作（通过在规则中使用 drools.halt() 强制执行）但是当我尝试通过删除 halt() 调用来扩展示例时，我得到了我没想到的行为。在下面的示例中，我将注释掉第一条规则中的 halt()，并将 size() 条件添加到第二条规则以替换它，以防止触发第二条规则。我不希望第二条规则触发，因为第一条规则的结果为拍卖的集合增加了一个出价，因此随后在规则 2 中计数不应该为零。我尝试在第一条规则中明确添加“更新”或“修改”指令，但这没有任何区别。

```
rule "rule1"
salience 100
    when
        $auction : Auction( $currentBidder : currentBidder != null )
        $hand : Hand( owner.equals($currentBidder), getTotalPoints(getLongestSuit()) >= 13 )
    then
        $auction.bid($currentBidder, new Bid(1, $hand.getLongestSuit()));
        //drools.halt();
end

rule "rule2"
salience 1
    when
        $auction : Auction( $currentBidder : currentBidder != null, getPlayerBids().size() == 0 )
        Hand(owner.equals($currentBidder))
    then
        $auction.bid($currentBidder, new Pass());
        drools.halt();
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:14:37.917

When you change an object, you need to tell the engine you updated it. So try adding update($action); at the end of the first rule.

# c++ - windows服务和客户端教程？

> ID：15705544
> 
> 赞同：0
> 
> 时间：2013-03-29T14:43:52.237
> 
> 标签：c++, visual-studio, service, client

我正在尝试创建一个可以作为服务运行的应用程序和另一个与之通信的程序（客户端）

我可以找到大量有关服务的示例代码，但没有找到与服务交互的程序

有人可以链接一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:24:17.953

听起来您可以并且也许应该使用 TCP 套接字。或者至少那将是最简单和最直接的。

或者，因为听起来客户端和服务都在同一台计算机上，您可以使用某种形式的 IPC（进程间通信）。因此，根据您的操作系统，您可能会决定改用 IPC。

# python - 如何搜索字符串以查看我是否可以拼写单词

> ID：15705546
> 
> 赞同：0
> 
> 时间：2013-03-29T14:43:59.980
> 
> 标签：python, string, itertools

例如我有

```
x = "dsjcosnag"
y = "dog"

print(checkYinX(y,x))
>>true 
```

所以我想我需要使用一个while循环作为y中每个字母的计数器，然后我可以使用itetools循环遍历每个x，每个循环它会检查x == y，如果它是否会删除它，然后检查 o 中的下一个字母。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T14:47:49.810

用于[`collections.Counter()`](http://docs.python.org/2/library/collections.html#collections.Counter)转换`x`和`y`到多组，然后减去以查看是否所有`y`的字母都可以在 中找到`x`：

```
from collections import Counter

def checkYinX(y, x):
    return not (Counter(y) - Counter(x)) 
```

减去多重集会在字符数降至 0 时*删除*`False`字符。如果这导致多重集为空，则它会变成布尔上下文，就像所有“空”python 类型一样。`not`如果是这样`True`的话。

演示：

```
>>> x = "dsjcosnag"
>>> y = "dog"
>>> print(checkYinX(y,x))
True
>>> print(checkYinX('cat',x))
False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T23:22:55.477

`collections.Counter`根据聊天中的要求，这是一种不带 的方法：

```
def countLetters(word):
    d = {}
    for l in word:
        d[l] = d.get(l,0) + 1
    return d

def checkSubset(answer,letters):
    a, l = countLetters(answer), countLetters(letters)
    return all(l.get(x,0) >= a.get(x) for x in a.keys())

print(checkSubset('dog','odr')) 
```

# java - 基于 Java 的 JSON 操作

> ID：15705549
> 
> 赞同：4
> 
> 时间：2013-03-29T14:44:08.817
> 
> 标签：java, json, xpath, jsonpath

有人知道允许数据操作的 JSON-XPath 样式库吗？更新、删除、创建等...

```
JsonPath.write(json, "$.store.book[*].author", value); 
```

我查看了以下内容，但没有一个允许更改内容。

[路径](http://code.google.com/p/json-path/)

[JSON查询](http://www.sitepen.com/blog/2008/07/16/jsonquery-data-querying-beyond-jsonpath/)

[JSONiJ](http://projects.plural.cc/projects/jsonij/wiki/JPath)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-21T12:34:03.550

[JsonPath](https://github.com/jayway/JsonPath)（我使用 2.2.0）现在允许操作 JSON 数据。例如

```
 String jsonData = "{\"drink\":\"juice\"}";
    JsonPath.parse(jsonData).set("$.drink", "beer").jsonString(); 
```

结果是`{"drink":"beer"}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T17:05:32.230

JSON 并不意味着是一个数据库。

如果您想以 JSON 格式存储数据；

*   将 JSON 记录读入您的 Java 应用程序并创建数据对象。
*   修改 Java 应用程序中的数据对象。
*   当应用程序关闭时，将 JSON 记录写回。

您最好使用实际的数据库、关系或 NoSQL 来存储您的数据，并在需要时编写 JSON 记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T09:18:23.720

您可能想看看我开发的这个库，以便能够使用 XML 库来操作 JSON：[https ://github.com/bhabegger/json-n-xml/](https://github.com/bhabegger/json-n-xml/)

它将 JSON 解析为 DOM 结构，您可以使用标准 XML 工具对其进行操作，然后允许您序列化回 json。

（JSON 可能并不意味着是一个数据库，但您确实有需要简单修改的​​情况。）

希望能帮助到你。

# iphone - UIViewController 类在 viewDidLoad 中做了什么？

> ID：15705552
> 
> 赞同：5
> 
> 时间：2013-03-29T14:44:18.220
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uikit

如标题所示，我想知道 in 的“默认”实现是`viewDidLoad`什么`UIViewController`？它真的有什么作用吗？如果在我的`UIViewController's`子类中我写也有关系

```
-(void)viewDidLoad{
  [super viewDidLoad];
  /*custom code here*/
} 
```

或者

```
-(void)viewDidLoad{
  /*custom code here*/
  [super viewDidLoad];
} 
```

?

PS 这不是重复的，在其他问题中人们问他们何时应该调用 [super viewDidLoad]，而我主要关心的是 UIViewController 的实现如何处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:50:25.403

该实现什么也不做，如果您在视图加载后没有设置要做，则可以安全地删除。但是，在这里没有自定义设置是相当罕见的。这是您的视图控制器告诉您其所有 UI 对象都可用于自定义数据的地方。它包含在模板中，并带有一个空实现作为提醒：这里是执行此操作的位置。

至于什么时候调用`super`：一般的期望是setup或initialization方法`super`在工作之前调用，而teardown方法`super`在工作之后调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:03:05.487

`ViewDidLoad`方法 在控制器的视图加载到内存后调用。这是您想要实例化任何实例变量并构建在此视图控制器的整个生命周期中存在的任何视图的地方。但是，此时视图通常还不可见

无论视图层次结构是从 nib 文件加载还是在 loadView 方法中以编程方式创建，都会调用此方法。您通常覆盖此方法以对从 nib 文件加载的视图执行额外的初始化。

[详细信息](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/viewDidLoad)

# ios - 访问容器视图控制器

> ID：15705555
> 
> 赞同：6
> 
> 时间：2013-03-29T14:44:24.703
> 
> 标签：ios, cocoa-touch

我有一个简单的 ViewController，它有一个带有 TableViewController 的容器视图。在 ViewController 我从外部 API 加载数据和其中一部分数据，我需要传递到容器中的 TableViewController。

有什么办法吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T15:17:36.123

容器视图中包含的控制器可以通过 self.childViewControllers 从父控制器访问。如果你只有一个，那么它将位于 self.childViewControllers[0]。

* * *

注意：关于 RD 的优秀技术**在下面的评论中解释**；这是一个典型的例子，经过测试和工作：这只是在整个场景的 VC 中。只需单击 segue 本身（即连接箭头中间的小符号）即可设置文本标识符。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
    if ([segue.identifier isEqualToString:@"containerLogin"])
        self.vcLogin = (LoginVC *)segue.destinationViewController;

    if ([segue.identifier isEqualToString:@"containerStartNew"])
        self.vcStartNew = (StartNewVC *)segue.destinationViewController;

    } 
```

以下是如何在 Swift 中执行此操作：（您必须小心解包器）

```
override func prepareForSegue(segue:(UIStoryboardSegue!), sender:AnyObject!)
    {
    if (segue.identifier == "feedContainer")
        {
        feed = segue!.destinationViewController as! Feed
        feed.someFunction()
        }
    } 
```

# php - 如何在php中保存文件，以希腊语输出文件名

> ID：15705556
> 
> 赞同：1
> 
> 时间：2013-03-29T14:44:24.643
> 
> 标签：php

在 PHP 中，我想将文件输出到目录，但文件名包含希腊字符，因此输出是乱码。

```
$imagename = $ti[$img_index].'.jpg';
$filepathname = $dirpath ."/".$imagename;
$savefile = fopen($filepathname, 'w'); 
```

我尝试执行以下操作但没有成功：

`$filepathname = mb_convert_encoding($filepathname, 'utf8', 'iso-8859-1');`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:52:39.047

您需要将文件名转换为 ascii 字符集或操作系统支持的其他字符集

```
<?php
$imagename = $ti[$img_index].'.jpg'; 
$imagename = @iconv("utf-8","ascii//TRANSLIT//IGNORE",$imagename);
$filepathname = $dirpath ."/".$imagename; 
$savefile = fopen($filepathname, 'w');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:54:19.533

您不应依赖文件名中的特殊字符。您应该更改您的应用程序逻辑（随机构建图像名称或基于其他数据，将字符转换为 ascii - 例如，西里尔字母对于每个 chacater od 字符对都有相应的 ASCII 字符，也许这种情况在希腊语等中类似）。我看不到 url 中特殊字符的任何利润。

请记住，图像应该由 URL 引用，因此这需要使用 urlencoding 进行额外的工作。

考虑任何迁移（服务器、操作系统、配置等）可能出现的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:54:25.657

操作系统存在非 ascii 字符的问题，编码无关紧要。

您可以将文件名编码为仅包含安全范围内的字符。我使用的编码方案是[Quoted-printable](http://en.wikipedia.org/wiki/Quoted-printable)。它可以支持任何编码的字符（甚至是 UTF-16 和 UTF-32），因为它是一种二进制编码。

如果您提供文件以供下载，您当然必须撤消编码。

# sql-server - Sql Server，使用子查询在一个表中查找不在另一个表中的值

> ID：15705562
> 
> 赞同：0
> 
> 时间：2013-03-29T14:44:41.290
> 
> 标签：sql-server

我正在将 SQL Server 中的原始表与更新表进行比较。我试图找出有多少“第一个数字”发生了变化。因为他们确实在这个系统中发生了变化。但是，这个查询似乎带回了等于两个表的“第一个数字”。我究竟做错了什么？

```
select *
from   
    tblBlue
where  
    Exists (Select 'x'
            From tblRed
            Where tblRed.FirstNumber != tblBlue.FirstNumber 
              and tblRed.ID = tblBlue.ID) 
```

示例数据：

```
tblRed
ID  FirstNumber
1   10 
2   20
3   30
4   40

tblBlue
1   5
2   20
3   35
4   40 
```

我希望看到：

```
1   5
3   35 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:52:47.093

您的查询应该可以工作（参见[SQL Fiddle 中的示例](http://sqlfiddle.com/#!3/9066c/2/0)。）您能否发布返回错误结果的示例数据？

更清晰的写法：

```
select  *
from    tblBlue new
join    tblRed old
on      new.ID = red.ID
where   new.FirstNumber <> old.FirstNumber 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:53:46.157

更简单的解决方案：使用左连接

```
SELECT r.*
FROM tblRed r
LEFT JOIN tblBlue b ON b.ID = r.ID AND b.FirstNumber = r.FirstNumber
WHERE b.ID IS NULL 
```

This will return records in `tblRed` that satisfy one of two conditions: 1) the `ID` isn't even found in `tblBlue`, i.e. a new record. or 2) the IDs were found, but the numbers have changed. Because if both the `ID` is the same and the `FirsTNumber` is the same, then `b.ID` will not be NULL, thus a match, and you can exclude it from the resultset of different values.

# asp.net-mvc - 路由约束中断授权属性过滤器 - MVC 4

> ID：15705566
> 
> 赞同：4
> 
> 时间：2013-03-29T14:44:51.883
> 
> 标签：asp.net-mvc, asp.net-mvc-4, forms-authentication, asp.net-mvc-routing

添加路由约束后，我注意到当导航到应用此路由约束的 URL 时，我的应用程序不再执行我的授权属性过滤器。

**过滤器配置文件**

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new AuthorizeAttribute());
} 
```

**项目控制器.cs**

```
public class ProjectsController : Controller
{
    private IRepository<Project> repository;

    public ProjectsController()
    {
        repository = new Repository<Project>();
    }

    public ActionResult Edit(int id)
    {
        Project project = repository.FindById(id);

        if (project == null)
            return HttpNotFound();

        ProjectsEditViewModel projectVM = new ProjectsEditViewModel(project);

        return View("Edit", projectVM);
    }
} 
```

**路由配置.cs**

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "ProjectEdit",
            url: "Projects/Edit/{id}",
            defaults: new { controller = "Projects", action = "Edit" },
            constraints: new { id = new IsValidProjectConstraint() }
        );
    }
} 
```

**IsValidProjectConstraint.cs**

```
public class IsValidProjectConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        IRepository<Project> projectsRepository = new Repository<Project>();

        try
        {
            int iProjectId;
            Project project;

            // Check for valid id
            if (int.TryParse(values["id"].ToString(), out iProjectId))
            {
                project = projectsRepository.FindById(iProjectId);

                // Check if this project exists
                if (project == null)
                {
                    return false;
                }
            }
            else
            {
                return false;
            }

            // If we made it here everything is good
            return true;
        }
        catch (Exception ex)
        {
            Log.WriteLine(ex.ToString());
            return false;
        }
    }
} 
```

**网络配置**

```
<authentication mode="Forms">
  <forms loginUrl="~/SAML/saml2" timeout="2880" />
</authentication> 
```

添加此路由约束后，`http://myurl/Projects/Edit/1`在新浏览器中导航实际上会呈现页面，就好像我已经通过身份验证一样。但是，当删除路由约束然后导航到`http://myurl/Projects/Edit/1`时，我会按预期重定向到我的登录操作。

似乎任何路由约束，无论是我的自定义路由约束还是简单的正则表达式，都会导致这个问题。

有什么我在这里想念的吗？

**编辑：** 我想我应该提到我是如何发布我的 FormsAuthentication cookie的。我的应用程序充当 SAML 服务提供者，其中来自身份提供者的 SAML 响应被发送到我的断言消费者服务。acs 解析 SAML 响应并对其进行验证，然后通过以下代码发出身份验证票证：

```
private void IssueAuthTicket(User userData)
{
    FormsAuthenticationTicket ticket =
        new FormsAuthenticationTicket(1, userData.UserName,
            DateTime.Now, DateTime.Now.AddMinutes(30),
            rememberMe, userData.Id.ToString());

    string ticketString = FormsAuthentication.Encrypt(ticket);

    HttpCookie cookie =
        new HttpCookie(FormsAuthentication.FormsCookieName, ticketString);

    HttpContext.Response.Cookies.Add(cookie);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T15:46:25.373

这里的问题是 MVC 将在您的授权属性之前执行您的路由约束。我在这里面临的问题是我的路线定义为：

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        name: "ProjectEdit",
        url: "Projects/Edit/{id}",
        defaults: new { controller = "Projects", action = "Edit" },
        constraints: new { id = new IsValidProjectConstraint() }
    );

    routes.MapRoute(
        name: "Default",
        url: "{controller}/{action}",
        defaults: new { controller = "Home", action = "Index" }
    );

    routes.MapRoute(
        name: "404-PageNotFound",
        url: "{*url}",
        defaults: new { controller = "Errors", action = "NotFound" }
    );
} 
```

so if the routing constraint `IsValidProjectConstraint()` returned false then action `NotFound` of controller `Errors` would execute. In this case it was always returning false because an error was caught when my `User` object was null. Unfortunately I had `[AllowAnonymous]` attribute on my `Errors` controller which allowed for an error page to render, so it seemed as if MVC was not executing my `AuthorizeAttribute` filter.

# jquery - 无法遍历 Jquery 中的元素

> ID：15705567
> 
> 赞同：0
> 
> 时间：2013-03-29T14:44:52.553
> 
> 标签：jquery, iteration

我有功能：

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#myTab a').click(function (e) {
            e.preventDefault();
            if ($(this).attr('href') === ('#' + $('#myTabContent').children('div').attr('id'))) {
                alert($(this).attr('href'));
            }
        });
    });
</script> 
```

和标记：

```
 <ul id="myTab" class="nav nav-tabs">
    <li><a href="#vergiSK" data-toggle="tab">
        </a></li>
    <li><a href="#spkSK" data-toggle="tab">
        </a></li>
    <li><a href="#hukukSK" data-toggle="tab">
       </a></li>
</ul>
<div id="myTabContent" class="tab-content">
    <div class="tab-pane fade" id="vergiSK">
     <ul>
        <li></li>
        <li></li> 
     </ul>
   </div>
    <div class="tab-pane fade" id="spkSK">
      <ul>
        <li></li>
        <li></li> 
     </ul>
    </div>
    <div class="tab-pane fade" id="hukukSK">
      <ul>
        <li></li>
        <li></li> 
     </ul>
    </div>
 </div> 
```

问题是，当我单击“ **a** ”元素之一时，我只得到具有第一个 ID 的元素。如何获得所有匹配的“ **href** ”和“ **id** ”的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:47:25.127

如果您尝试获取`div`与您单击的锚点相关的内容，则：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#myTab a').click(function (e) {
            var $div = $($(this).attr("href"));
            // Do something with the div
        });
    });
</script> 
```

之所以有效，是因为`href`您正在使用的 (`#vergiSK`等) 的值是一个有效的 ID 选择器，因此您可以将其直接传递`$()`给以获取一个包裹在具有该 ID 的元素周围的 jQuery 对象。请注意，我使用`$(this).attr("href")`的是获取`href`而不是仅获取`this.href`，这将被扩展（因此会有完整的 URL，而不仅仅是`href`属性的实际内容）。

[实时示例](http://jsbin.com/atuwoz/1)（单击相应链接时，div 会短暂变为红色）| [来源](http://jsbin.com/atuwoz/1/edit)

但是，如果出于其他原因您想遍历 的`#tab-content`子元素的元素，则可以使用[`each`](http://api.jquery.com/each).

```
$('#myTabContent').children('div').each(function() {
    // Raw DOM element for each child `div` is `this`
}); 
```

# c# - 为什么在使用 Where 或 OfType 运算符时引发异常后反应式扩展停止调用订阅者？

> ID：15705571
> 
> 赞同：4
> 
> 时间：2013-03-29T14:45:02.630
> 
> 标签：c#, system.reactive

测试 1 通过。为什么 Test2 和 Test3 失败？我正在使用 .NET 4.0 和 Rx 2.0。

```
[TestClass]
public class RxQuestion
{
   private Subject<string> sequence;
   [TestInitialize] public void Intialize() { sequence = new Subject<string>(); }
   [TestMethod] public void Test1() { Test(sequence); }
   [TestMethod] public void Test2() { Test(sequence.Where(s => true)); }
   [TestMethod] public void Test3() { Test(sequence.OfType<string>()); }
   private void Test(IObservable<string> observable)
   {
      var observed = string.Empty;
      observable.Subscribe(s => { observed = s; if (s == "a") throw new Exception(); });
      try { sequence.OnNext("a"); } catch { }
      sequence.OnNext("b");
      Assert.AreEqual("b", observed);
   }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T09:52:50.900

对我来说真正的问题是为什么 Test1 通过？对我来说，该类型似乎与`Subject<T>`所有其他实现的规则不同`IObservable<T>`。

在更深入的检查（实际上是很好的反射）中，您可以将`Subject<T>`DotPeek/Reflector 中的类型分开，并看到在进行`OnNext(T)`调用时，它被直接委托给它的`_observer`实例。在任何订阅之前，这只是一个 NullObject/NopObserver。订阅后（通常），观察者是一个`Observer<T>`实现。这个实现实际上是`IObserver<T>`接口的复合模式实现，它只调用`OnNext(T)`它的每个实例。

此外，如果我们考虑使用仅接受 OnNext 处理程序的 Subscribe 的扩展方法，我们现在知道我们对 the 的真正实现`IObserver<T>`是一个`AnonymousObserver<T>`. 打开它，我们看到任何对的调用在`OnNext(T)`很大程度上是不受保护的。

现在让我们将其与or运算符的`IObservable<T>`实现进行比较。这两种扩展方法都会返回一个扩展类的实现。当订阅这些可观察序列之一时，订阅观察者被一个实现包装。**这是关键的区别**。`Where``Cast``IObservable<T>``Producer<T>``SafeObserver<T>`

 **如果我们查看这个实现，我们会看到对于我们的代码路径，我们拥有的匿名观察者将调用其 MakeSafe 方法。这现在用 try/finally 包装对 OnNext 的任何调用。

```
public void OnNext(T value)
{
    if(this.isStopped!=0)
        return;
    bool flag = true;
    try
    {
        this._onNext(value);
        flag=true;        //Flag only set if OnNext doesn't throw!!
    }
    finally
    {
        if(!flag)
            this._disposable.Dispose();
    }
} 
```

请注意，一旦我们有一个如上所述的安全观察者，如果任何`OnNext`处理程序抛出，那么`flag`将不会设置为 true 并且`_disposable`实例被释放。在这种情况下，`_disposable`实例代表订阅。

因此，您可以解释为什么 raw`Subject`通过测试以及看似无害的操作员在哪里导致行为改变。

As to why `Subject<T>` does not behave like this by default, I imagine this is due to the performance improvements that were made in the 2.0 release. I get the feeling that subjects are tuned for raw performance and take the assumption that if you are brave enough to be using them, then you know what you are doing (i.e. not throwing in your `OnNext` handlers!). I base this assumption that they also removed the concurrency safety from subjects by default and you have to turn it on with the `Synchronize()` extension method, maybe they also thought all of those extra try/finally calls should only be paid for if you opt in. One way of opting in to these safety features is to do what you have done above `Where(_=>true)` or more commonly `AsObservable()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:36:41.640

根据定义， an`IObservable<T>`不应**在**`OnError`an或 an之后发出任何通知`OnCompleted`。因此，当您打电话时，`sequence.OnNext("b");`您实际上违反了`IObservable<T>`应遵守的隐含合同。

这样做的原因`Where`和`OfType`行为是因为它们（适当地）在`OnError`您生成之后忽略任何通知。**

# python - 删除矩阵子视图中的第一个元素

> ID：15705577
> 
> 赞同：6
> 
> 时间：2013-03-29T14:45:15.707
> 
> 标签：python, numpy

我有一个这样的数据集：

```
[[0,1],
 [0,2],
 [0,3],
 [0,4],
 [1,5],
 [1,6],
 [1,7],
 [2,8],
 [2,9]] 
```

我需要删除第一列定义的数据的每个子视图的第一个元素。因此，首先我获取第一列中所有为 0 的元素，然后删除第一行：[0,1]。然后我在第一列中获取元素为 1 并删除第一行 [1,5]，下一步我删除 [2,8] 等等。最后，我想要一个这样的数据集：

```
[[0,2],
 [0,3],
 [0,4],
 [1,6],
 [1,7],
 [2,9]] 
```

* * *

编辑：这可以在 numpy 中完成吗？我的数据集非常大，因此所有元素的 for 循环至少需要 4 分钟才能完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:22:17.643

根据要求，`numpy`解决方案：

```
import numpy as np
a = np.array([[0,1], [0,2], [0,3], [0,4], [1,5], [1,6], [1,7], [2,8], [2,9]])
_,i = np.unique(a[:,0], return_index=True)

b = np.delete(a, i, axis=0) 
```

* * *

（上面被编辑以合并@Jaime的解决方案，这是我为后代着想的原始掩蔽解决方案）

```
m = np.ones(len(a), dtype=bool)
m[i] = False
b = a[m] 
```

* * *

有趣的是，面具似乎更快：

```
In [225]: def rem_del(a):
   .....:     _,i = np.unique(a[:,0], return_index=True)
   .....:     return np.delete(a, i, axis = 0)
   .....: 

In [226]: def rem_mask(a):
   .....:     _,i = np.unique(a[:,0], return_index=True)
   .....:     m = np.ones(len(a), dtype=bool)
   .....:     m[i] = False
   .....:     return a[m]
   .....: 

In [227]: timeit rem_del(a)
10000 loops, best of 3: 181 us per loop

In [228]: timeit rem_mask(a)
10000 loops, best of 3: 59 us per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:09:38.550

传入您的列表和要检查值的键。

```
def getsubset(set, index):
    hash = {}
    for list in set:
        if not list[index] in hash:
            set.remove(list)
            hash[list[index]]  = list

    return set 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T14:54:10.740

您想使用[`itertools.groupby()`](http://docs.python.org/2/library/itertools.html#itertools.groupby)一些[`itertools.islice()`](http://docs.python.org/2/library/itertools.html#itertools.islice)and [`itertools.chain`](http://docs.python.org/2/library/itertools.html#itertools.chain)：

```
from itertools import islice, chain, groupby
from operator import itemgetter

list(chain.from_iterable(islice(group, 1, None)
                         for key, group in groupby(inputlist, key=itemgetter(0)))) 
```

*   该`groupby()`调用将输入列表分组为第一项相同的块（`itemgetter(0)`是分组键）。
*   该`islice(group, 1, None)`调用将组转换为将跳过*第一个*元素的可迭代对象。
*   该`chain.from_iterable()`调用获取每个`islice()`结果并将它们链接在一起成为一个新的可迭代对象，该可迭代对象`list()`又变成一个列表。

演示：

```
>>> list(chain.from_iterable(islice(group, 1, None) for key, group in groupby(inputlist, key=itemgetter(0))))
[[0, 2], [0, 3], [0, 4], [1, 6], [1, 7], [2, 9]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T14:54:32.813

```
a = [[0,1],
 [0,2],
 [0,3],
 [0,4],
 [1,5],
 [1,6],
 [1,7],
 [2,8],
 [2,9]]

a = [y for x in itertools.groupby(a, lambda x: x[0]) for y in list(x[1])[1:]]

print a 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T15:01:02.533

我的回答是：

```
from operator import itemgetter
sorted(l, key=itemgetter(1))  # fist sort by fist element of inner list 
nl = []
[[0, 1], [0, 2], [0, 3], [0, 4], [1, 5], [1, 6], [1, 7], [2, 8], [2, 9]]
j = 0;
for i in range(len(l)): 
    if(j == l[i][0]):
        j = j + 1   # skip element 
    else:
        nl.append(l[i])  # otherwise append  in new list 
```

输出是：

```
>>> nl
[[0, 2], [0, 3], [0, 4], [1, 6], [1, 7], [2, 9]] 
```

# c++ - cocos2d-x 在 vi sit() 调用期间崩溃

> ID：15705579
> 
> 赞同：0
> 
> 时间：2013-03-29T14:45:27.527
> 
> 标签：c++, ios, xcode, cocos2d-x

我的 cocos2d-x 应用程序一次又一次地崩溃。崩溃发生在随机情况下，即使在空闲状态下——我可以将应用程序留在模拟器中，2-5 分钟后它可能会在没有用户交互的情况下崩溃。可悲的是——它也在生产中崩溃了。我使用 Crittercism 崩溃报告 SDK，它显示了相同的堆栈。更多，我尝试了与 cocos SDK 捆绑的 cocos2d-x 示例，它们以同样的方式崩溃。在这里，我包含了一些屏幕截图来显示堆栈：

[https://dl.dropbox.com/u/5480488/cocos2dxcrash1.png](https://dl.dropbox.com/u/5480488/cocos2dxcrash1.png) [https://dl.dropbox.com/u/5480488/cocos2dxcrash2.png](https://dl.dropbox.com/u/5480488/cocos2dxcrash2.png)

+cocos2dxcrash3.png

是的，它影响（几乎？）所有可用版本的 Cocos 和 iOS。目前它在最新的 cocos2d-x 和 iOS 6.1.3 中崩溃。

求救，请！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:39:13.470

我打赌你正在模拟器上运行你的应用程序。在设备上运行将解决它。:P 以为我不知道确切的原因。我以前遇到过同样的问题。

# eclipse - Eclipse 中的哪些文件包含代码模板和键盘绑定？

> ID：15705583
> 
> 赞同：0
> 
> 时间：2013-03-29T14:45:40.460
> 
> 标签：eclipse, templates, configuration, backup, configuration-files

我有三个使用`Eclipse`IDE 的常见工作场所。

使用多个常见工作场所时的一个好技巧是将某些配置文件复制到 Dropbox，并在原始配置位置链接到它们。这样，所有设置和更改都可以立即在您的其他工作场所使用。

您`workspace`拥有高达 100 兆字节的文件。您已经拥有`.eclipse`接近 200 兆字节的数据。

我想知道哪些特定文件包含我的自定义 javascript 代码模板，哪些包含我的键盘快捷键，所以我可以通过 Dropbox 与我自己共享这些，并且只有这些。

理想情况下，我想要一份特定设置及其位置的列表，以便我可以选择分享更多内容。但是我在谷歌上没有找到类似的东西。

为什么我不只是共享我的整个工作区和配置目录？嗯，首先，它太疯狂了。其次，Eclipse 是模块化的。在某些地方，我使用了在其他地方不使用的某些模块。你们都知道模块/插件是乱七八糟的文件和配置，无法逃脱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:19:38.537

您可以尝试从一个工作区导出 Eclipse 首选项并将它们导出到另一个工作区。如果它不适合您，请针对相应的 Eclipse 项目输入一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T06:25:21.750

我想到了。

您可以将您的复制`~/workspace/eclipse/.metadata`到某个地方。更改首选项，并将您的工作区同步到您的备份，以找出更改了哪些文件。

你会发现很多设置都在`~/workspace/eclipse/.metadata/.plugins/org.eclipse.core.runtime/.settings/`. javascript 模板和其他 javascript 选项位于`~/workspace/eclipse/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.wst.jsdt.ui.prefs`

*   org.eclipse.wst.jsdt.ui.prefs = 代码模板
*   org.eclipse.jdt.ui.prefs = 语法着色
*   org.eclipse.ui.editors.prefs = 文本编辑器

# c# - 我应该使我的自定义单元测试断言类非静态吗？

> ID：15705584
> 
> 赞同：1
> 
> 时间：2013-03-29T14:45:42.977
> 
> 标签：c#, unit-testing, c#-4.0, dynamics-crm-2011, vs-unit-testing-framework

我使用内置的 Visual Studio 单元测试工具对 CRM 2011 执行单元测试。很多测试都在断言创建实体。

```
Assert.IsNull(service.GetFirstOrDefault<Contact>(contact.Id)); 
```

（GetFirstOrDefault 是一个扩展方法，它尝试通过 id 从 CRM 中检索联系人，如果没有找到则返回 null）

我想创建自己的 Assert 方法，该方法的运行方式如下：

```
CrmAssert.Exists(service, contact); 
```

起初我认为继承 from 是个好主意`Assert`，但可惜它是一个静态类。然后我创建了一个新的静态类，如下所示：

```
public static class AssertCrm
{
    public static void Exists<T>(IOrganizationService service, T entity) where T : Entity
    {
        Exists(service, entity, null, null);
    }
    public static void Exists<T>(IOrganizationService service, T entity, string message) where T : Entity
    {
        Exists(service, entity, message, null);
    }

    public static void Exists<T>(IOrganizationService service, T entity, string message, params object[] parameters) where T: Entity
    {
        if (service.GetFirstOrDefault<T>(entity.Id) == null)
        {
            throw new AssertFailedException(message == null ? String.Format(message, parameters));
        }
    }
} 
```

像这样调用：

```
AssertCrm.Exists(service, contact); 
```

这很好，除了我真的应该能够设置服务一次，而不必每次都调用它：

```
AssertCrm.Service = service;
AssertCrm.Exists(contact);
AssertCrm.Exists(campaign);
AssertCrm.Exists(etc...); 
```

但我相信 Visual Studio 会尝试多线程运行测试，这意味着当我设置`Service`静态属性时，它可能会被不同测试中的不同服务覆盖（并且`IOrganizationService`不是线程安全的）。

我是否需要使我的 AssertCrm 类为非静态类，这样我就不必担心多线程？有没有我错过的更简单的技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:12:43.537

您可以将 AssertCrm 设为单例，然后您可以将其实例化一次，所有其他调用都将使用相同的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T19:19:54.203

我个人更喜欢使用内置断言库的第一个选项。我看不出尝试将其包装在扩展方法或“帮助程序”中会带来什么好处。

如果你真的想走这条路，你可以创建一组扩展方法`IOrganizationService`来消除继续传递它的需要。让它更干净一些，但我仍然支持第一个。

```
crmService.AssertExists(contact); 
```

顺便说一句，您为什么要在“单元”测试中使用真正的 CRM 实例？`IOrganizationService`在您的测试中针对模拟进行验证会更快、更易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T16:36:27.543

经过一些额外的研究，我没有找到任何理由认为它应该（必须）是一个静态类，并且已经将它创建为一个非静态类。

给其他想做类似事情的人的一个注意事项：为所有实例方法创建静态方法重载，因为`ClassName.AssertMethod()`在大多数情况下确实更有意义`new ClassName().AssertMethod()`

# scala - 如何增加传递给Scala函数的整数变量？

> ID：15705585
> 
> 赞同：7
> 
> 时间：2013-03-29T14:45:44.387
> 
> 标签：scala, parameter-passing, immutability

我在函数外部声明了一个变量，如下所示：

```
var s: Int = 0 
```

像这样通过它：

```
def function(s: Int): Boolean={

   s += 1

   return true

} 
```

但在我的一生中，错误行不会在“s + =”下消失。我什么都试过了。顺便说一句，我是 Scala 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:04:15.917

首先，我要重复我的警告：**下面的解决方案既晦涩又低效**，如果可能的话，尽量坚持使用`val`ues。

```
implicit class MutableInt(var value: Int) {
  def inc() = { value+=1 } 
}

def function(s: MutableInt): Boolean={
   s.inc() // parentheses here to denote that method has side effects
   return true
} 
```

下面是实际代码：

```
scala> val x: MutableInt = 0 
x: MutableInt = MutableInt@44e70ff

scala> function(x)
res0: Boolean = true

scala> x.value
res1: Int = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T19:11:39.887

如果您只想不断增加整数，则可以使用 Stream。

```
val numberStream = Stream.iterate(0)(_ + 1).iterator 
```

这会在从零开始的永无止境的数字流上创建一个迭代器。然后，要获取下一个号码，请致电

```
val number: Int = numberStream.next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-05T16:44:05.200

我也刚刚开始使用 Scala，这是我的工作。

```
var s: Int = 0 
```

* * *

```
def function(s: Int): Boolean={

   var newS = s
   newS = newS + 1 
   s = newS
   return true

} 
```

从我读到的内容中，您没有将相同的“s”传递到您的函数中，因为在其余代码中。我相信有更好的方法，但这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:00:43.300

你没有。

A`var`是一个名称，它引用可能会更改的引用。当你调用一个函数时，你传递了引用本身，一个新的名字被绑定到它上面。

因此，要更改名称指向的引用，您需要对包含该名称的任何内容的引用。如果它是一个对象，那就很容易了。如果它是一个局部变量，那么它是不可能的。

另请参阅通过引用调用，尽管我认为这个问题不是真正的重复。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-22T16:21:14.217

如果你只想增加一个从 3 开始的变量

val nextId = { var i = 3; () => { i += 1; 一世 } }

然后调用它：

下一个 ID()

# sql-server - 用行号更新表

> ID：15705593
> 
> 赞同：0
> 
> 时间：2013-03-29T14:46:10.597
> 
> 标签：sql-server, stored-procedures

显然我上次没有正确地问我的问题。

我需要用另一个表中的变量和数据更新一个表。同时，我想添加一个升序的行号。这可能吗？

这是创建表的代码：

```
 CREATE TABLE [dbo].[SC_Data](
[Rownumber]int IDENTITY(1,1)NOT FOR REPLICATION NOT NULL,
[Division]varchar(50)null,
[Vendor]varchar(50)null,
[ID]varchar(50)null,
[ItemNumber]varchar(50)null,
[ProductName]varchar(50)null,
[BrandClass]varchar(50)null,
[WebID]varchar(50)null,
[Brand]varchar(50)null,
[MktDescription]varchar(500)null,
[MktCopy]varchar(500)null,
[B1]varchar(50)null,
[B2]varchar(50)null,
[B3]varchar(50)null,
[B4]varchar(50)null,
[B5]varchar(50)null,
[B6]varchar(50)null,
[B7]varchar(50)null,
[B8]varchar(50)null,
[B9]varchar(50)null,
[B10]varchar(50)null,
[Notes]varchar(255)null,
[PrimaryFileName]varchar(100)null,
[Color]varchar(40)null,
[LiveDate]date null,
[SampleType]varchar(50)null,
[User]varchar(100)null,
[FileName]text null
Constraint[PK_SC_Data]primary key clustered
(
        [Rownumber]ASC
)with(pad_index=off,statistics_norecompute=off,ignore_dup_key=off,
allow_row_locks=on,allow_page_locks=on)
)on[Primary] 
```

我有一个从没有字段 [FileName] 和 [Rownumber] 的导入创建的类似表。我想将所有其他数据从该表复制到该表中，并使用变量 @FileName 更新 [FileName]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:00:41.560

只需从另一个表中选择到该表中，不包括“Rownumber”字段，并使用@FileName 作为“FileName”列的源：

```
INSERT [dbo].[SC_Data](
    [Division],[Vendor],[ID],[ItemNumber],[ProductName],[BrandClass],[WebID]
    ,[Brand],[MktDescription],[MktCopy],[B1],[B2],[B3],[B4],[B5],[B6],[B7]
    ,[B8],[B9],[B10],[Notes],[PrimaryFileName,[Color],[LiveDate],[SampleType]
    ,[USER],[FileName]
)
SELECT   [Division],[Vendor],[ID],[ItemNumber],[ProductName],[BrandClass],[WebID]
    ,[Brand],[MktDescription],[MktCopy],[B1],[B2],[B3],[B4],[B5],[B6],[B7]
    ,[B8],[B9],[B10],[Notes],[PrimaryFileName,[Color],[LiveDate],[SampleType]
    ,[USER],@FileName
FROM dbo.OtherTable; 
```

# sql - SQL 语句作为参数

> ID：15705596
> 
> 赞同：1
> 
> 时间：2013-03-29T14:46:17.743
> 
> 标签：sql

是否可以在 SQL 中做类似的事情？

```
DECLARE @t Nvarchar(50)

SET @t = 'SELECT * FROM KIN_PHON'

execute @t  --?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:59:35.073

使用`exec`：

```
DECLARE @t Nvarchar(50)
SET @t = 'SELECT * FROM KIN_PHON'
exec (@t) 
```

或使用参数`sp_executesql`：

```
declare @sql nvarchar(max)
set @sql = 'select * from YourTable where ID = @ID'
execute sp_executesql @sql, N'@ID int', @ID = 42; 
```

# ruby - 红宝石返回方法

> ID：15705605
> 
> 赞同：0
> 
> 时间：2013-03-29T14:46:57.737
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2

之间有什么区别吗？

```
def some_method
  some_instructions and return
end 
```

和：

```
def some_method
  return some_instructions
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:49:47.697

是的，有：如果返回值为真，则第一个返回`nil`，如果返回值为`some_instructions`假，则`some_instructions`返回`some_instructions`。第二个总是返回的返回值`some_instructions`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T14:49:32.773

有。

```
def some_method
  some_instructions and return
end 
```

返回`nil`。**更新：**正如 Arie Shaw 指出的那样，Jorg 的回答是，如果`some_instructions`为 false（或 nil），则该方法将返回 false（或 nil）并且不会运行`return`

```
def some_method
  return some_instructions
end 
```

返回由返回的值`some_instructions`

# ruby-on-rails - 如何在rails上的选择框中使用表格列？

> ID：15705609
> 
> 赞同：2
> 
> 时间：2013-03-29T14:47:03.920
> 
> 标签：ruby-on-rails, select

我正在尝试创建一个从我的数据库中获取数据的选择框。我在设置时遇到了麻烦。我试过这段代码：

```
<%= f.fields_for :unit do |u| %>
  <%= u.label :name %>
  <%= u.select :name, :class => "ingredient_unit", :prompt => "Please Select" %>
<% end %> 
```

但我错过了选择的一部分，我不知道如何将它们从数据库中提取出来。我尝试使用collection_select，它起作用了，但是类选项不起作用......collection_select是这样的：

```
<%= u.collection_select :unit, Unit.all, :id, :name, :class => "ingredient_unit", :prompt => "Please Select" %> 
```

我也不明白第一个符号是什么意思（：unit），它似乎是在设置 html id 和 name，所以这可以是我想要的任何东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:57:31.173

您应该查看[collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)和[select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-select)的文档。但是要回答您的问题，对于选择部分，您忘记传递可供选择的选项列表。您还需要交换订单`prompt`，`class`因为`prompt`它是帮助程序的一个选项，并且`class`是一个 html 选项

```
<%= u.select :unit_id, Unit.all.map { |u| [u.name, u.id] }, { :prompt => "Please Select" }, { :class => "ingredient_unit" } %> 
```

对于集合选择

```
<%= u.collection_select :unit_id, Unit.all, :id, :name, { :prompt => "Please Select" }, { :class => "ingredient_unit" } %> 
```

传递给这两个助手的第一个参数是您希望保存所选答案的列名。上面的 2 个代码仅显示了生成相同选择标签的 2 种不同方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:50:16.803

第一个符号告诉它使用从用户选择返回的 id 填充哪个字段。

此外，您应该将类​​部分包装在 {}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T14:51:30.723

`:unit`指您用于选择元素的模型属性。是的，它将设置元素的名称/ID（名称对于参数哈希来说是最重要的）。

要在 collection_select 中设置一个类，请将其指定为哈希，因为该助手将其作为 html_option。

```
<%= u.collection_select :unit, Unit.all, :id, :name, { :prompt => "Please Select" }, { :class => "ingredient_unit" } %> 
```

# macos - 通过正在运行的进程获取使用的库列表（OS X）

> ID：15705611
> 
> 赞同：0
> 
> 时间：2013-03-29T14:47:05.803
> 
> 标签：macos, terminal

类似于这个问题，但对于 OS X：[Getting a list of used libraries by a running process (unix)](https://stackoverflow.com/questions/2184775/getting-a-list-of-used-libraries-by-a-running-process-unix)

我想看看特定进程为 OS X 使用了哪些链接库。有没有`pldd`等价的？

以下是有关上下文的更多信息： [https ://github.com/pry/pry/issues/863#issuecomment-15618268](https://github.com/pry/pry/issues/863#issuecomment-15618268)

# eclipse - 我可以在资源管理器中启动tomcat，但不能在eclipse中

> ID：15705617
> 
> 赞同：0
> 
> 时间：2013-03-29T14:47:26.253
> 
> 标签：eclipse, tomcat

操作系统：win7 64位；Eclipse Java EE 4.2；雄猫 7.0.39

异常堆栈：

```
SEVERE: Error reading request, ignored
java.lang.ClassFormatError: Unknown constant tag 0 in class file sun/nio/cs/IBM775
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at sun.nio.cs.FastCharsetProvider.lookup(Unknown Source)
at sun.nio.cs.FastCharsetProvider.access$100(Unknown Source)
at sun.nio.cs.FastCharsetProvider$1.next(Unknown Source)
at sun.nio.cs.FastCharsetProvider$1.next(Unknown Source)
at java.nio.charset.Charset.put(Unknown Source)
at java.nio.charset.Charset.access$300(Unknown Source)
at java.nio.charset.Charset$4.run(Unknown Source)
at java.nio.charset.Charset$4.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.nio.charset.Charset.availableCharsets(Unknown Source)
at org.apache.tomcat.util.buf.B2CConverter.<clinit>(B2CConverter.java:51)
at org.apache.tomcat.util.buf.ByteChunk.<clinit>(ByteChunk.java:102)
at org.apache.tomcat.util.buf.MessageBytes.<init>(MessageBytes.java:58)
at org.apache.tomcat.util.buf.MessageBytes.<init>(MessageBytes.java:36)
at org.apache.tomcat.util.buf.MessageBytes$MessageBytesFactory.newInstance(MessageBytes.java:685)
at org.apache.tomcat.util.buf.MessageBytes.newInstance(MessageBytes.java:78)
at org.apache.coyote.Request.<init>(Request.java:83)
at org.apache.coyote.AbstractProcessor.<init>(AbstractProcessor.java:53)
at org.apache.coyote.http11.AbstractHttp11Processor.<init>(AbstractHttp11Processor.java:265)
at org.apache.coyote.http11.Http11Processor.<init>(Http11Processor.java:55)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.createProcessor(Http11Protocol.java:165)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.createProcessor(Http11Protocol.java:103)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:569)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)

Exception in thread "http-bio-8080-exec-1" java.lang.NullPointerException
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.release(Http11Protocol.java:140)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:654)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:59:38.647

尝试手动启动 Tomcat，然后在 eclipse 中运行您的程序。这对我有用。

# javascript - ExpressJS 应用程序生成器无法识别其标志

> ID：15705618
> 
> 赞同：0
> 
> 时间：2013-03-29T14:47:29.620
> 
> 标签：javascript, node.js, express

我无法运行带有标志的快速应用程序生成器。
请参见下面的示例。我运行`express --version`并将 --version 部分解释为目标目录并在那里创建应用程序。在 Windows XP SP3 中。
难道我做错了什么？我的知识真的很有限。

```
X:\server>node --version
v0.8.6   

X:\server>express --version

   create : .
   create : ./package.json
   create : ./app.js
   create : ./public
   create : ./public/javascripts
   create : ./public/images
   create : ./public/stylesheets
   create : ./public/stylesheets/style.css
   create : ./routes
   create : ./routes/index.js
   create : ./routes/user.js
   create : ./views
   create : ./views/layout.jade
   create : ./views/index.jade 

   install dependencies:
     $ cd . && npm install

   run the app:
     $ node app

X:\server\--version> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:25:07.497

相同的代码在 WinXP Windows Shell 中运行良好。这是在cygwin还是windows shell中？

# ember.js - Ember.js 中的“动态段”？

> ID：15705621
> 
> 赞同：3
> 
> 时间：2013-03-29T14:47:45.977
> 
> 标签：ember.js, ember-router

在整个 Ember.js 文档中，您会发现[在很多地方](https://www.google.de/search?q=site%3Aemberjs.com+%22dynamic+segment%22)都提到了**动态段**的概念。这是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:22:55.177

使用适当的样本进行更新：[演示](http://jsfiddle.net/schawaska/ZRaxz/show)| [来源](http://jsfiddle.net/schawaska/ZRaxz/)

**由于评论中的问题而编辑：**

在 Ember 中，将`Router`机制视为状态机：每个`Route`都可以视为一个状态。有时，一个状态可以有它自己的小状态机。话虽如此：A`resource`是一个状态，你有可能的子状态。A`PersonRoute`可以定义为回调中的a `resource`our a ；这真的取决于你的最终目标。例如，如果我们考虑基于人员模型的人员列表的资源，我们可能会有列出所有记录的路线。`route``<Application>.Router.map`

```
App.Router.map(function() {
    this.resource('people');
}); 
```

通过这张地图，我告诉我的应用程序它需要一个人员模板（可能还有一个视图）、一个人员控制器和一条人员路线。还假定资源具有索引路由，这是隐含的，您不必对其进行编码，但如果需要，`PeopleIndexRoute`按照约定，它会在资源本身的名称之后。

现在我可以（a）`person`在资源下创建一条路线`people`作为人员记录的单一状态；`person`或 (b) 我可以在资源下创建`people`资源，因此我将在`person`资源下有更多选项（编辑、详细信息、删除）；或 (c) 我可以为 person 创建一个单独的资源，如果我愿意，可以使用路径覆盖 url。

我有时会选择选项c：

```
App.Router.map(function() {
    this.resource('people');
    this.resource('person', {path: 'person/:person_id'}, function() {
        this.route('edit');
        this.route('delete');
    });
}); 
```

这是有道理的，`edit`因为它没有子状态，只有兄弟姐妹（删除）和父母（人）。记录的 url 是这样的：) `~/#/person/3/edit`。

路由，当没有定义为资源时，不会有任何子路由/状态，所以你没有 person.edit.index 就像你有 person.index 一样，换句话说，路由没有子，只有兄弟姐妹和资源可以同时拥有。

目前，[路由指南](http://emberjs.com/guides/routing/)是我们拥有的最可靠的文档。我强烈推荐它。

* * *

动态段是路由 URL 的一部分，它根据使用的资源而变化。考虑以下：

```
App.Router.map(function() {
    this.resource('products', function() {
        this.route('product', { path: ':product_id' })
    }
}); 
```

在上面的存根中，行：

```
this.resource('products', function() { 
```

将产生网址

> ~/#/产品

以下行将产生

> ~/#/products/:product_id

替换动态部分，你可以有一个这样的网址

> ~/#/products/3

这`:product_id`就是使这条路线充满活力的原因。路由器会将资源（例如`Product`模型）的 id 序列化为 URL，并将该 id 用于`find`您的`DS.Store`. 您经常会在如下路线中看到这一点：

```
App.ProductRoute = Em.Route.extend({
    model: function(params) {
        return App.Product.find(params.product_id);
    }
}); 
```

因此，对于本示例，如果您访问`~/#/products/3`，应用程序将尝试从您的商店加载 Product 模型的实例或尝试从您的后端 API 获取。

[你可以在这里](http://fiddle.jshell.net/schawaska/bw45L/show)看到一个说明这一点的小提琴| [来源这里](http://fiddle.jshell.net/schawaska/bw45L)

我还推荐[Tom Dale 的这个截屏视频](http://www.youtube.com/watch?v=Ga99hMi7wfY&list=PLLUBPLc28H8c8ihVHkYeRHe8OiB8P5WL0&index=13)，他用 Ember.js 构建了一个博客阅读器应用程序，使用路由器和 ember-data API 根据 URL 的动态部分加载博客记录。

# qt - 将 OpenCV IplImage 渲染到 QGLWidget

> ID：15705627
> 
> 赞同：2
> 
> 时间：2013-03-29T14:47:57.640
> 
> 标签：qt, opengl, opencv, qglwidget

我在渲染 OpenGL 场景时遇到问题。

背景是我想在预览窗口中显示来自视频捕获设备的帧。我正在使用 OpenCV 和 Qt。为了测试我从我的 MacBook 网络摄像头捕获。预览窗口为 200x200，捕获的帧为 640x480。我不担心保持纵横比。

来自 IplImage 结构的其他信息：

> *   调试：通道：3
> *   调试：深度：8
> *   调试：dataOrder：0
> *   调试：对齐：4。对齐图像行 4 或 8
> *   调试：原点：0。0=左上角，1=左下角
> *   调试：宽度步长：2560。
> *   调试：colorModel：RGB

所以这张图片显示了当前的状况。

[当前捕获 http://clinsoftsolutions.com/fgvc4.png](http://clinsoftsolutions.com/fgvc4.png)

我从使用 glDrawPixels 开始，但效果不佳。我得到了输出，但没有缩放。

目前我正在尝试使用纹理，这是我用于 GL 交互的代码

```
void VideoCaptureWidget::initializeGL()
{
    qDebug("initializeGL called");
    qglClearColor(QColor::fromRgb(0,0,0));      // set clear colur to black
    glDisable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, this->width(), this->height(), 0.0f, 0.0f, 1.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glEnable(GL_TEXTURE_2D);
    glGenTextures(3, &m_texture);
    glBindTexture(GL_TEXTURE_2D, m_texture);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
    glBindTexture(GL_TEXTURE_2D,m_texture);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,this->width(),this->height(),0,GL_BGR,GL_UNSIGNED_BYTE,NULL);
    glDisable(GL_TEXTURE_2D);
}

void VideoCaptureWidget::paintGL()
{    
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glDisable(GL_DEPTH_TEST);

    glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0.0f,this->width(),this->height(),0.0f,0.0f,1.0f);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D,m_texture);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,m_image->width,m_image->height,0,GL_BGR_EXT,GL_UNSIGNED_BYTE,m_image->imageData);
    glBegin(GL_QUADS);
    glTexCoord2i(0,1); glVertex2i(0,this->height());
    glTexCoord2i(0,0); glVertex2i(0,0);
    glTexCoord2i(1,0); glVertex2i(this->width(),0);
    glTexCoord2i(1,1); glVertex2i(this->width(),this->height());
    glEnd();
    glFlush();

}

void VideoCaptureWidget::resizeGL(int width,int height)
{
    qDebug("reszieGL called");

    glViewport(0,0,this->width(),this->height());
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0.0f,this->width(),this->height(),0.0f,0.0f,1.0f);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
 } 
```

图像是在定时器槽中捕获的，m_image 是一个 _IplImage 指针

```
void VideoCaptureWidget::_captureFrame() {
    m_image = cvQueryFrame(m_capture);
    if(!m_image) {
        qDebug("VideoCaptureWidget::_captureFrame(): Error capturing a frame...");
    }

    //Draw the scene
    glDraw();
} 
```

我真的希望有人以前见过这种扭曲的图像并知道问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:42:59.007

另一种方法是将**BGR**帧转换为**RGBA**，然后再使用`glTexImage2D()`. [我在我的存储库](https://github.com/karlphillip/GraphicsProgramming)中上传了一个完整的演示，检查[cvQTcameraGL](https://github.com/karlphillip/GraphicsProgramming/tree/master/cvQTcameraGL)。

以下是相关代码：

```
// Note: trying to retrieve more frames than the camera can give you
// will make the output video blink a lot.
cv_capture >> cv_frame;
if (cv_frame.empty())
{
    std::cout << "GLWidget::paintGL: !!! Failed to retrieve frame" << std::endl;
    return;
}
cv::cvtColor(cv_frame, cv_frame, CV_BGR2RGBA);

glEnable(GL_TEXTURE_RECTANGLE_ARB);

// Typical texture generation using data from the bitmap
glBindTexture(GL_TEXTURE_RECTANGLE_ARB, _texture);

// Transfer image data to the GPU
glTexImage2D(GL_TEXTURE_RECTANGLE_ARB, 0,
             GL_RGBA, cv_frame.cols, cv_frame.rows, 0,
             GL_RGBA, GL_UNSIGNED_BYTE, cv_frame.data);
if (glGetError() != GL_NO_ERROR)
{
    std::cout << "GLWidget::paintGL: !!! Failed glTexImage2D" << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:35:49.070

多思考并查看图像，我认为这一定是字节/通道对齐问题。所以更多的谷歌搜索指向 mt 的方向

```
glPixelStorei with GL_UNPACK_ALIGNMENT and then also GL_UNPACK_ROW_LENGTH 
```

现在工作的最终代码是：

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 4 );
glPixelStorei(GL_UNPACK_ROW_LENGTH, m_image->widthStep/m_image->nChannels); 
```

这需要添加到 glTexImage2D 调用之上。

这是一种奇怪的图像数据格式。但这是您从 Apple iSight 内置网络摄像头获得的输出。希望这对其他人有帮助。

# css - 触摸设备禁用元素悬停

> ID：15705628
> 
> 赞同：0
> 
> 时间：2013-03-29T14:47:57.563
> 
> 标签：css, mobile

这可能是一个有点奇怪的问题。当我在移动设备上悬停时，它会保持悬停状态，直到我单击另一个项目，我想在一段时间后或页面滚动时删除悬停。任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:59:10.417

在这种情况下，您可以使用媒体查询。如果要在桌面上定位用户：

```
@media screen { /* hover styles here */ } 
```

如果你想定位移动设备，例如 ipad，你可以使用这个：

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* non-hover styles here */
} 
```

# c - 奇怪的链接行为和未定义的符号

> ID：15705629
> 
> 赞同：6
> 
> 时间：2013-03-29T14:47:59.990
> 
> 标签：c, linux, icc, nm

我正在链接一个外部库（通过奇怪的进程，mpicc + Cython + 等），但我有一个链接过程的奇怪行为。

有两个 .o 文件，libpetsc4py.o 和 PETSc.o，它们链接到一个 .so 文件 PETSc.so

一个包含未定义的符号`__pyx_tp_new_8petsc4py_5PETSc_Object`

```
[zheltkov@compiler-2 src]$ nm libpetsc4py.o | grep __pyx_tp_new_8petsc4py_5PETSc_Object
                       U __pyx_tp_new_8petsc4py_5PETSc_Object 
```

它在另一个 .o 文件中定义：

```
[zheltkov@compiler-2 src]$ nm PETSc.o | grep __pyx_tp_new_8petsc4py_5PETSc_Object
00000000001b92f0 t __pyx_tp_new_8petsc4py_5PETSc_Object 
```

然后，链接完成（编译行很奇怪，对不起）

```
mpicc -pthread -fPIC -wd1572 -g -shared -fno-strict-aliasing -g -O2 -DNDEBUG -O2 -g
build/temp.linux-x86_64-2.7/arch-linux2-c-debug/src/PETSc.o build/temp.linux-x86_64-
2.7/arch-    linux2-c-debug/src/libpetsc4py.o -L/home/users/zheltkov/tmp/petsc-3.3/arch
-linux2-c-debug/lib -L/home/users/zheltkov/ivan/soft/epd7.2/lib 
-Wl,rpath,/home/users/zheltkov/tmp/petsc-3.3/arch-linux2-c-debug/lib 
-Wl,-rpath,/home/users/zheltkov/ivan/soft/epd7.2/lib -lpetsc -lpython2.7 -o
build/lib.linux-x86_64-2.7/petsc4py/lib/a    rch-linux2-c-debug/PETSc.so -lX11 -Wl,
-rpath,/home/users/zheltkov/tmp/petsc-3.3/arch-linux2-c-debug/lib 
-L/home/users/zheltkov/tmp/petsc-3.3/arch-linux2-c-debug/lib -lfftw3_mpi -lfftw3 -lHYPRE 
-Wl,-rpath,/opt/intel/impi/4.1.0.030/intel64/lib 
-L/opt/intel/impi/4.1.0.030/intel64/lib -Wl,
-rpath,/opt/intel/composer_xe_2013.2.146/mkl/lib/intel64 
-L/opt/intel/composer_xe_2013.2.146/mkl/lib/intel64 
-Wl,-rpath,/opt/intel/composer_xe_2013.2.146/compiler/lib/intel64 
-L/opt/intel/composer_xe_2013.2.146/compiler/lib/intel64 -Wl,
-rpath,/usr/lib/gcc/x86_64-redhat-linux/4.4.6 -L/usr/lib/gcc/x86_64-redhat-linux/4.4.6 
-Wl,- rpath,/mnt/data/users/dm4/vol9/zheltkov/tmp/petsc-3.3/-Xlinker -lmpigc4 
-Wl,-rpath,/opt/intel/mpi-rt/4.1 -lml -lpthread -Wl,-rpath,
/opt/intel/composer_xe_2013/mkl/lib/intel64 
-L/opt/intel/composer_xe_2013/mkl/lib/intel64 -lmkl_intel_lp64 -lmkl_intel_thread
-lmkl_core -liomp5 -lifport -lifcore -lm -ldl -lmpigf -lmpi_dbg -lmpigi -lrt 
-limf -lsvml -lirng -lipgo -ldecimal -lcilkrts -lstdc++     -lgcc_s -lirc -lirc_s 
```

但最后，生成的文件有两个同名的符号，其中一个是未定义的，一切都不起作用：

```
[zheltkov@compiler-2 arch-linux2-c-debug]$ nm PETSc.so | grep __pyx_tp_new_8petsc4py_5PETSc_Object
0000000000200d20 t __pyx_tp_new_8petsc4py_5PETSc_Object
                 U __pyx_tp_new_8petsc4py_5PETSc_Object 
```

我究竟做错了什么？为什么有两个同名的符号？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T15:22:56.567

在一个目标文件`t`中表示该函数具有内部链接（即声明为`static`），而在另一个文件中`U`表示该函数被引用，但未定义。外部函数用 表示`T`。

当您链接以创建共享库时，链接器不会抱怨未解析的引用，因此它包括静态函数（仅在定义它的文件中可用）和标记为未定义的外部符号。

这是一个更简单的例子。两个文件：

foo.c

```
#include <stdio.h>

static void hello(void)
{
    printf("Hello\n");
} 
```

酒吧.c

```
void sayhello(void)
{
    hello();
} 
```

编译两个：

```
$ gcc -c -fPIC foo.c
$ gcc -c -fPIC bar.c
$ nm foo.o
0000000000000000 t hello
$ nm bar.o
                 U hello
0000000000000000 T sayhello 
```

现在创建一个共享库

```
$ gcc -shared -o libhello.so foo.o bar.o
$ nm libhello.so
0000000000000700 t hello
                 U hello 
```

这样做的结果是，如果我定义一个函数`hello`并链接到该库以创建一个可执行文件，该库将调用我的函数`sayhello`——而不是静态函数。如果我不定义它，链接器将给出未定义的符号错误。

# python - 使用 groupby 获取组中具有最大值的行

> ID：15705630
> 
> 赞同：365
> 
> 时间：2013-03-29T14:48:13.023
> 
> 标签：python, pandas, max, pandas-groupby

`count`在按列分组后，如何在 pandas 数据框中找到列的最大值的所有行`['Sp','Mt']`？

**示例 1：**以下数据帧，我将其分组`['Sp','Mt']`：

```
 Sp   Mt Value   count
0  MM1  S1   a     **3**
1  MM1  S1   n       2
2  MM1  S3   cb    **5**
3  MM2  S3   mk    **8**
4  MM2  S4   bg    **10**
5  MM2  S4   dgd     1
6  MM4  S2   rd      2
7  MM4  S2   cb      2
8  MM4  S2   uyi   **7** 
```

预期输出：获取组间计数最大的结果行，例如：

```
0  MM1  S1   a      **3**
2  MM1  S3   cb     **5**
3  MM2  S3   mk     **8**
4  MM2  S4   bg     **10** 
8  MM4  S2   uyi    **7** 
```

**示例 2：**这个数据框，我按以下方式分组`['Sp','Mt']`：

```
 Sp   Mt   Value  count
4  MM2  S4   bg     10
5  MM2  S4   dgd    1
6  MM4  S2   rd     2
7  MM4  S2   cb     8
8  MM4  S2   uyi    8 
```

对于上面的示例，我想在每个组中获取等于 max的**所有**行，例如：`count`

```
MM2  S4   bg     10
MM4  S2   cb     8
MM4  S2   uyi    8 
```

* * *

## 回答 #1

> 赞同：490
> 
> 时间：2013-03-29T15:09:40.397

```
In [1]: df
Out[1]:
    Sp  Mt Value  count
0  MM1  S1     a      3
1  MM1  S1     n      2
2  MM1  S3    cb      5
3  MM2  S3    mk      8
4  MM2  S4    bg     10
5  MM2  S4   dgd      1
6  MM4  S2    rd      2
7  MM4  S2    cb      2
8  MM4  S2   uyi      7

In [2]: df.groupby(['Mt'], sort=False)['count'].max()
Out[2]:
Mt
S1     3
S3     8
S4    10
S2     7
Name: count 
```

要获取原始 DF 的索引，您可以执行以下操作：

```
In [3]: idx = df.groupby(['Mt'])['count'].transform(max) == df['count']

In [4]: df[idx]
Out[4]:
    Sp  Mt Value  count
0  MM1  S1     a      3
3  MM2  S3    mk      8
4  MM2  S4    bg     10
8  MM4  S2   uyi      7 
```

请注意，如果每个组有多个最大值，则将全部返回。

**更新**

万岁，这就是 OP 所要求的：

```
In [5]: df['count_max'] = df.groupby(['Mt'])['count'].transform(max)

In [6]: df
Out[6]:
    Sp  Mt Value  count  count_max
0  MM1  S1     a      3          3
1  MM1  S1     n      2          3
2  MM1  S3    cb      5          8
3  MM2  S3    mk      8          8
4  MM2  S4    bg     10         10
5  MM2  S4   dgd      1         10
6  MM4  S2    rd      2          7
7  MM4  S2    cb      2          7
8  MM4  S2   uyi      7          7 
```

* * *

## 回答 #2

> 赞同：240
> 
> 时间：2016-11-16T10:14:22.037

您可以按计数对数据帧进行排序，然后删除重复项。我认为这更容易：

```
df.sort_values('count', ascending=False).drop_duplicates(['Sp','Mt']) 
```

* * *

## 回答 #3

> 赞同：89
> 
> 时间：2017-07-07T00:40:35.037

简单的解决方案是应用该`idxmax()`函数来获取具有最大值的行的索引。这将过滤掉组中具有最大值的所有行。

```
In [365]: import pandas as pd

In [366]: df = pd.DataFrame({
'sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4','MM4'],
'mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
'val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
'count' : [3,2,5,8,10,1,2,2,7]
})

In [367]: df                                                                                                       
Out[367]: 
   count  mt   sp  val
0      3  S1  MM1    a
1      2  S1  MM1    n
2      5  S3  MM1   cb
3      8  S3  MM2   mk
4     10  S4  MM2   bg
5      1  S4  MM2  dgb
6      2  S2  MM4   rd
7      2  S2  MM4   cb
8      7  S2  MM4  uyi

### Apply idxmax() and use .loc() on dataframe to filter the rows with max values:
In [368]: df.loc[df.groupby(["sp", "mt"])["count"].idxmax()]                                                       
Out[368]: 
   count  mt   sp  val
0      3  S1  MM1    a
2      5  S3  MM1   cb
3      8  S3  MM2   mk
4     10  S4  MM2   bg
8      7  S2  MM4  uyi

### Just to show what values are returned by .idxmax() above:
In [369]: df.groupby(["sp", "mt"])["count"].idxmax().values                                                        
Out[369]: array([0, 2, 3, 4, 8]) 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2019-01-04T14:55:23.820

您可能不需要 group by ，使用`sort_values`+`drop_duplicates`

```
df.sort_values('count').drop_duplicates(['Sp','Mt'],keep='last')
Out[190]: 
    Sp  Mt Value  count
0  MM1  S1     a      3
2  MM1  S3    cb      5
8  MM4  S2   uyi      7
3  MM2  S3    mk      8
4  MM2  S4    bg     10 
```

通过使用也几乎相同的逻辑`tail`

```
df.sort_values('count').groupby(['Sp', 'Mt']).tail(1)
Out[52]: 
    Sp  Mt Value  count
0  MM1  S1     a      3
2  MM1  S3    cb      5
8  MM4  S2   uyi      7
3  MM2  S3    mk      8
4  MM2  S4    bg     10 
```

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2014-02-11T17:54:50.960

在相对较大的 DataFrame（约 400k 行）上尝试了 Zelazny 建议的解决方案后，我发现它非常慢。这是我发现在我的数据集上运行速度快几个数量级的替代方案。

```
df = pd.DataFrame({
    'sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4', 'MM4'],
    'mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
    'val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
    'count' : [3,2,5,8,10,1,2,2,7]
    })

df_grouped = df.groupby(['sp', 'mt']).agg({'count':'max'})

df_grouped = df_grouped.reset_index()

df_grouped = df_grouped.rename(columns={'count':'count_max'})

df = pd.merge(df, df_grouped, how='left', on=['sp', 'mt'])

df = df[df['count'] == df['count_max']] 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2018-07-24T10:45:21.283

用途`groupby`及`idxmax`方法：

1.  将 col 转移`date`到`datetime`：

    ```
    df['date']=pd.to_datetime(df['date']) 
    ```

2.  获取`max`列的索引`date`，之后`groupyby ad_id`：

    ```
    idx=df.groupby(by='ad_id')['date'].idxmax() 
    ```

3.  获取想要的数据：

    ```
    df_max=df.loc[idx,] 
    ```

出[54]：

```
ad_id  price       date
7     22      2 2018-06-11
6     23      2 2018-06-22
2     24      2 2018-06-30
3     28      5 2018-06-22 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-07-02T12:52:33.373

对我来说，最简单的解决方案是在计数等于最大值时保持值。因此，以下一行命令就足够了：

```
df[df['count'] == df.groupby(['Mt'])['count'].transform(max)] 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-07-08T16:37:59.253

尝试在 groupby 对象上使用“nlargest”。使用 nlargest 的优点是它返回从中获取“nlargest item(s)”的行的索引。注意：我们对索引的第二个（1）元素进行切片，因为在这种情况下我们的索引由元组组成（例如（s1，0））。

```
df = pd.DataFrame({
'sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4','MM4'],
'mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
'val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
'count' : [3,2,5,8,10,1,2,2,7]
})

d = df.groupby('mt')['count'].nlargest(1) # pass 1 since we want the max

df.iloc[[i[1] for i in d.index], :] # pass the index of d as list comprehension 
```

[在此处输入图像描述](https://i.stack.imgur.com/F2h7N.png)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2021-03-02T11:42:36.020

总结一下，方法有很多，但是哪一种更快呢？

```
import pandas as pd
import numpy as np
import time

df = pd.DataFrame(np.random.randint(1,10,size=(1000000, 2)), columns=list('AB'))

start_time = time.time()
df1idx = df.groupby(['A'])['B'].transform(max) == df['B']
df1 = df[df1idx]
print("---1 ) %s seconds ---" % (time.time() - start_time))

start_time = time.time()
df2 = df.sort_values('B').groupby(['A']).tail(1)
print("---2 ) %s seconds ---" % (time.time() - start_time))

start_time = time.time()
df3 = df.sort_values('B').drop_duplicates(['A'],keep='last')
print("---3 ) %s seconds ---" % (time.time() - start_time))

start_time = time.time()
df3b = df.sort_values('B', ascending=False).drop_duplicates(['A'])
print("---3b) %s seconds ---" % (time.time() - start_time))

start_time = time.time()
df4 = df[df['B'] == df.groupby(['A'])['B'].transform(max)]
print("---4 ) %s seconds ---" % (time.time() - start_time))

start_time = time.time()
d = df.groupby('A')['B'].nlargest(1)
df5 = df.iloc[[i[1] for i in d.index], :]
print("---5 ) %s seconds ---" % (time.time() - start_time)) 
```

最终获胜者是...

*   --1) 0.03337574005126953 秒 ---
*   --2 ) 0.1346898078918457 秒 ---
*   --3 ) 0.10243558883666992 秒 ---
*   --3b) 0.1004343032836914 秒 ---
*   --4 ) 0.028397560119628906 秒 ---
*   --5 ) 0.07552886009216309 秒 ---

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-04-10T02:38:11.853

意识到对**groupby 对象****“应用”“nlargest”**同样有效：

 **额外的优势 -如果需要，**还可以获取** **前 n 个值**：

```
In [85]: import pandas as pd

In [86]: df = pd.DataFrame({
    ...: 'sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4','MM4'],
    ...: 'mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
    ...: 'val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
    ...: 'count' : [3,2,5,8,10,1,2,2,7]
    ...: })

## Apply nlargest(1) to find the max val df, and nlargest(n) gives top n values for df:
In [87]: df.groupby(["sp", "mt"]).apply(lambda x: x.nlargest(1, "count")).reset_index(drop=True)
Out[87]:
   count  mt   sp  val
0      3  S1  MM1    a
1      5  S3  MM1   cb
2      8  S3  MM2   mk
3     10  S4  MM2   bg
4      7  S2  MM4  uyi 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-08-08T18:25:07.800

```
df = pd.DataFrame({
'sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4','MM4'],
'mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
'val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
'count' : [3,2,5,8,10,1,2,2,7]
})

df.groupby(['sp', 'mt']).apply(lambda grp: grp.nlargest(1, 'count')) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-04-20T21:51:53.867

如果您对 DataFrame 进行排序，则排序将保留在 groupby 中。然后，您可以抓取第一个或最后一个元素并重置索引。

```
df = pd.DataFrame({
    'sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4','MM4'],
    'mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
    'val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
    'count' : [3,2,5,8,10,1,2,2,7]
})

df.sort_values("count", ascending=False).groupby(["sp", "mt"]).first().reset_index() 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-14T10:03:03.247

我一直在将这种功能样式用于许多组操作：

```
df = pd.DataFrame({
   'Sp' : ['MM1', 'MM1', 'MM1', 'MM2', 'MM2', 'MM2', 'MM4', 'MM4', 'MM4'],
   'Mt' : ['S1', 'S1', 'S3', 'S3', 'S4', 'S4', 'S2', 'S2', 'S2'],
   'Val' : ['a', 'n', 'cb', 'mk', 'bg', 'dgb', 'rd', 'cb', 'uyi'],
   'Count' : [3,2,5,8,10,1,2,2,7]
})

df.groupby('Mt')\
  .apply(lambda group: group[group.Count == group.Count.max()])\
  .reset_index(drop=True)

    sp  mt  val  count
0  MM1  S1    a      3
1  MM4  S2  uyi      7
2  MM2  S3   mk      8
3  MM2  S4   bg     10 
```

`.reset_index(drop=True)`通过删除组索引让您回到原始索引。**

# c#-3.0 - ReportViewer：使用页面宽度缩放模式在打印布局中显示报表

> ID：15705632
> 
> 赞同：5
> 
> 时间：2013-03-29T14:48:14.663
> 
> 标签：c#-3.0, reportviewer, report-viewer2010, reportviewer2008

我正在使用 C# winform reportviewer 2010。

我使用 SetDisplayMode() 将查看报告的默认选项更改为打印布局（整页）。但是，由于整页是打印布局的默认缩放选项，即使我在设计器中将 ZoomMode 设置为 PageWidth，当报表加载时，它也会重置为整页。设置 displayMode 后是否可以通过编程将 ZoomMode 设置为页面宽度？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-08-18T15:24:09.773

reportViewer1.SetDisplayMode(Microsoft.Reporting.WinForms.DisplayMode.PrintLayout);

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T14:54:39.443

没关系，我想 zoomMode 可以这样设置：

this.reportViewer1.ZoomMode = Microsoft.Reporting.WinForms.ZoomMode.PageWidth;

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-01T04:36:31.973

也许你可以这样做：

1.  填写所有报告参数

2.  然后刷新报告以显示数据

    `myReport.RefreshReport();`

3.  最后设置这个属性

    `myReport.ZoomMode = ZoomMode.Percent; myReport.ZoomPercent = 100;`

我希望它对你有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-25T10:26:22.877

刷新你的 rdlc 报告后写

```
my_Report.ZoomMode = ZoomMode.PageWidth;
my_Report.ZoomMode = ZoomMode.FullPage;
my_Report.ZoomMode = ZoomMode.Percent; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-26T09:50:11.787

**在** reportViewer1.RefreshReport() 之后； **你可以加**

reportViewer1.SetDisplayMode(Microsoft.Reporting.WinForms.DisplayMode.PrintLayout); reportViewer1.ZoomMode=ZoomMode.PageWidth;

# php - 检索另一个网站的内容

> ID：15705633
> 
> 赞同：0
> 
> 时间：2013-03-29T14:48:23.303
> 
> 标签：php, curl, fopen, file-get-contents

我想获取另一个页面的内容。背景是我想发出 AJAX 请求，但由于`Same Origin Policy`我不能这样做。现在我想编写一个自己的 PHP 脚本，在该脚本上发出 AJAX 请求。URL 如下所示：

> [http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9[参数]=1&tx_manager_pi9[类别]=test&tx_manager_pi9[动作]=getInfos&tx_manager_pi9[控制器]=Finder&cHash=123456789001233455332](http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9[parameter]=1&tx_manager_pi9[category]=test&tx_manager_pi9[action]=getInfos&tx_manager_pi9[controller]=Finder&cHash=123456789001233455332)

我用`fopen`,`curl`和试过了`file_get_contents`。作品中没有任何东西。问题是如果我将 URL 作为字符串输入

```
$results = file_get_contents('http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9[parameter]=1&tx_manager_pi9[category]=test&tx_manager_pi9[action]=getInfos&tx_manager_pi9[controller]=Finder&cHash=123456789001233455332'); 
```

它确实有效。如果我输入一个变量

```
$url = 'http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9[parameter]=1&tx_manager_pi9[category]=test&tx_manager_pi9[action]=getInfos&tx_manager_pi9[controller]=Finder&cHash=123456789001233455332';
$results = file_get_contents($url); 
```

我来错页了。使用特定参数，我得到一个结果。如果参数没有正确给出，我似乎来到了一个默认页面。我无法理解它。

相同的`curl`：

```
$curlSession = curl_init();
$options = array
(
    CURLOPT_URL=>$url,
    CURLOPT_HEADER=>false,
    CURLOPT_RETURNTRANSFER=>true,
    CURLOPT_FOLLOWLOCATION=>true
);
curl_setopt_array($curlSession,$options);
$results = curl_exec($curlSession); 
```

这行不通。如果我将 URL 作为字符串而不是变量输入，我会得到一些结果！我认为和号`&`或方括号`[]`是问题，但我不能这么说。`&`应该保留，`[]`并且不是正确的 URL 参数。但是为什么直接输入起作用而不是变量呢？

`str_replace`我使用了该变量，因为我在使查询更灵活的地方进行了一些替换。

我在这里看到了类似的问题（[cURL 函数不起作用](https://stackoverflow.com/questions/13004417/curl-function-not-working)，[curl_setopt 不适用于 url 作为变量](https://stackoverflow.com/questions/12056286/curl-setopt-doesnt-work-with-url-as-a-variable)），但从未发布过真正的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:51:57.833

您的第二个代码块中有 a`,`而不是 a `;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T14:59:46.920

您是否需要“登录”到您正在访问的网站？这可以解释为什么它在您的浏览器中运行，而不是通过您的服务器脚本。

如果其他一切都相同，您的浏览器和您列出的 PHP 函数应该返回相同的结果。

您能否提供实际的 URL 供我们测试？

**编辑：**根据您提供的 URL，它对我来说工作正常：

```
php > $test = file_get_contents("http://www.domain.com/user/user_neu/index.php?id=16518&tx_stusermanager_pi9%5Bindications%5D=1&tx_stusermanager_pi9%5Bcategory%5D=cure&tx_stusermanager_pi9%5Baction%5D=getHousesByIndications&tx_stusermanager_pi9%5Bcontroller%5D=HouseFinder&cHash=88230660f01ads34d73a199b82e976");
php > var_dump($test);
string(29) "16,15,14,13,12,11,17,19,22" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:39:17.193

我的问题是我使用编码的 URL 作为起点。例如

[http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9%5Bparameter%5D=%23%23%23param1%23%23%23&tx_manager_pi9%5Bcategory%5D=%23%23%23param2%23% 23%23&tx_manager_pi9%5Baction%5D=getInfos&tx_manager_pi9%5Bcontroller%5D=Finder&cHash=123456789001233455332](http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9%5Bparameter%5D=%23%23%23param1%23%23%23&tx_manager_pi9%5Bcategory%5D=%23%23%23param2%23%23%23&tx_manager_pi9%5Baction%5D=getInfos&tx_manager_pi9%5Bcontroller%5D=Finder&cHash=123456789001233455332)

我做了`str_replace`一个 URL 编码的字符串。即使`urldecode`之后使用，也没有为`curl`, `file_get_contents`, ...正确生成 URL

正确的 URL 应该是这样的

http://domain.com/subfolder/another_subfolder/index.php?id=1234&tx_manager_pi9[参数]=###param1###&tx_manager_pi9[类别]=###param2###&&tx_manager_pi9[动作]=getInfos&tx_manager_pi9[控制器]=Finder&&cHash=123456789001233455332

即没有`&amp;`, `%23`, `%5B`,`%5D`

# arm - linkscript - 不同的链接地址和加载地址

> ID：15705636
> 
> 赞同：4
> 
> 时间：2013-03-29T14:48:28.133
> 
> 标签：arm, ld, raspberry-pi, mmu

我正在为我的树莓派开发一个玩具操作系统并尝试设置 MMU。我想在 3G:1G 之间分割虚拟内存，所以我认为我的代码应该链接在 0xC0008000，而在执行时加载到 0x8000。（0x8000 是当前引导加载程序期望找到内核的地址——因为它们是为 linux 构建的）。

我认为通过使用 objdump 来设置一切都很好，但它不起作用。在使用 qemu 进行一些调试后，我认为引导加载程序根本找不到我的代码。

我相信问题出在我的链接脚本上，因为如果我将起始代码移动到它自己的部分，该部分既链接又加载在 0x8000 处，内核就可以正常启动。

我已经提取了脚本和最少的代码。如下，

```
$ cat kernel.ld 
ENTRY(_start)

SECTIONS
{
    /* must == KERNLINK */
    .  = 0xC0008000;

    .text : AT(0x8000) {
        *(.text)
    }

    .bss : {
        *(.bss)
    }

    .data : {
        *(.data)
    }

    .rodata : {
        *(.rodata)
    }
} 
```

-

```
$ cat source/entry.S 
#include "mem.h"

.globl _start
_start = V2P(entry)

.globl entry
entry:
    loop$:
    b loop$ 
```

（“b loop$”不起作用，因为它是作为“b·c0008000”而不是使用相对分支生成的。但不要介意那部分，问题是它永远不会到达入口）。

```
$ cat source/mem.h 
#define KERNLOAD 0x8000

#define KERNBASE 0xC0000000
#define KERNLINK (KERNBASE+KERNLOAD)

#define V2P(va) ((va) - KERNBASE) 
```

这些是仅有的三个源文件。Makefile 中应该没有什么有趣的东西，但是 make 的输出是，

```
$ make
arm-none-eabi-gcc -g -Wall -c -o build/entry.o source/entry.S
arm-none-eabi-ld --no-undefined -T kernel.ld build/entry.o  -Map kernel.map -o build/output.elf
arm-none-eabi-objcopy build/output.elf -O binary kernel.img 
```

和 objdump，

```
$ arm-none-eabi-objdump -h build/output.elf  

build/output.elf:     file format elf32-littlearm

Sections:
Idx Name          Size      VMA       LMA       File off  Algn
  0 .text         00000004  c0008000  00008000  00008000  2**0
                  CONTENTS, ALLOC, LOAD, READONLY, CODE
  1 .ARM.attributes 00000014  00000000  00000000  00008004  2**0
                  CONTENTS, READONLY
  2 .debug_line   0000003c  00000000  00000000  00008018  2**0
                  CONTENTS, READONLY, DEBUGGING
  3 .debug_info   00000054  00000000  00000000  00008054  2**0
                  CONTENTS, READONLY, DEBUGGING
  4 .debug_abbrev 00000014  00000000  00000000  000080a8  2**0
                  CONTENTS, READONLY, DEBUGGING
  5 .debug_aranges 00000020  00000000  00000000  000080c0  2**3
                  CONTENTS, READONLY, DEBUGGING 
```

我开始相信我忽略了一些明显但珍贵的细节。

==== 更新 ====

正如我在下面的回答中所指出的，混淆是由 qemu 中的调试引起的。断点由虚拟地址设置。“b entry”不起作用，因为 gdb 正在考虑虚拟地址，而 MMU 尚未启用并且我们正在通过物理地址运行。

所以在启用 MMU 之前，我们必须使用“b *0x8000”。这会设置一个正确命中的断点。不过 GDB 似乎仍然很困惑，因为它没有显示任何调试信息（没有源代码，如`0x00008004 in ?? ()`）。这不是一个大问题，因为我有“objdump -D”生成的列表。

在启用 MMU 并且我们分支到 main 之后，gdb 可以正常工作。关键是使用绝对分支跳转到虚拟地址。`b/bl`会发出相对跳跃。所以我用`ldr pc =main`. `bx`也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:16:49.480

终于解决了...

代码和链接脚本没有问题。只是在我使用的 qemu 上似乎无法调试。当 VMA==LMA 时它确实有效，但在这种情况下内核已经运行并且 qemu 不知道它。或者，断点丢失并且从未被 gdb 捕获。

无论如何，通过重新开始并逐位添加，我让它在我的 rpi（真实硬件）上运行，然后它也可以在 qemu 上运行（gdb 仍然不会捕获断点）。

所以我的问题应该是如何使用 qemu/gdb 调试这样的场景。

（我最初的问题是通过将“域”权限更改为“经理”而不是使用“客户端”来解决的。是的，我知道这可能是暂时的，我应该在其他地方设置一个变量）。

# c# - 使用用户提供的命名空间和节点值修改 XML 节点

> ID：15705639
> 
> 赞同：1
> 
> 时间：2013-03-29T14:48:36.347
> 
> 标签：c#, xml

花了一段时间，但我终于能够根据用户输入的命名空间和节点名称修改 XML 文档：

```
string nodeName = "DefinitionName"; // this is really provided by the user
string namespace = "http://schemas.datacontract.org/2004/07/Xxx.Session";  // also user-provided

XmlDocument xmlDocument = new XmlDocument();
xmlDocument.Load(taskResolved.XmlPathAndFileName);
XmlElement rootElement = xmlDocument.DocumentElement;
XmlNamespaceManager namespaceManager = new XmlNamespaceManager(xmlDocument.NameTable);
namespaceManager.AddNamespace("snuh", namespace);  // hard-coded prefix, grrr...

XmlNodeList xmlNodes;

xmlNodes = rootElement.SelectNodes("//snuh:" + nodeName, namespaceManager); 
```

我觉得我做错了什么，因为我必须硬编码一个前缀（snuh）。我可以尝试选择一个前缀，比如 snuh，我希望它永远不会出现在文档中，但这并不是万无一失的。另一种选择是使用 GUID 作为前缀，但这似乎是一种 hack 解决方法。**我错过了什么吗？有没有更好的办法？**

XML 文档的顶部如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<SessionStateInfo xmlns:i="http://www.w3.org/2001/XMLSchema-instance" z:Id="1"
    z:Type="Xxx.SessionStateInfo"
    z:Assembly="Xxx.Common, Version=6.2.0.0, Culture=neutral, PublicKeyToken=null"
    xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/"
    xmlns="http://schemas.datacontract.org/2004/07/Xxx.Session">
      <CoaterNumber>25</CoaterNumber>
      <DefinitionName z:Id="2">TwoLineMarkerDefinition</DefinitionName>
      <EnableManualMode>true</EnableManualMode> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:11:49.497

If you want to simply select the first DefinitionName node.

You may write

```
XmlNode node = rootElement[nodeName, namespace]; 
```

and if you want the whole list:

```
XmlNodeList nodeList = rootElement.GetElementsByTagName(nodeName, namespace); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:05:00.267

使用 XPath`local-name()`和`namespace-uri()`函数怎么样？

```
string xpath = string.Format("//*[local-name()='{0}' and namespace-uri()='{1}']", nodeName, namespace);
xmlNodes = rootElement.SelectNodes(xpath); 
```

不知道是否支持这些功能`XmlDocument`，还没有测试过。

# html - 在 xsl 中编码部分 url

> ID：15705646
> 
> 赞同：0
> 
> 时间：2013-03-29T14:49:10.183
> 
> 标签：html, xml, xslt

我是 xsl 的新手，所以我什至不确定这是可能的。此代码用于构建一个回发到同一页面的菜单，以便在构建订单时可以从查询字符串中提取 ITEMNMBR 并添加到网格中。某些项目编号中有特殊字符。

我有以下代码，需要对此 URL 的 ITEMNMBR 部分进行编码，以便在选择超链接时不会发生任何事情。

```
<xsl:for-each select="MenuItem">
    <li><a href="OrderEntry.aspx?ITEMNMBR={ITEMNMBR}"><xsl:value-of select="ITEMNMBR"/></a></li>  <!-- Inventory items -->  <!-- need only encode itemnmbr -->
</xsl:for-each> 
```

我是否正朝着正确的方向前进？有人可以为我指出如何编码的正确方向吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:41:42.090

如果您使用的是 XSLT 2.0，则可以直接使用**encode-for-uri**

```
<a href="OrderEntry.aspx?ITEMNMBR={encode-for-uri(ITEMNMBR)}"> 
```

如果您使用的是 XSLT 1.0，您可以使用某种形式的扩展功能来实现，但这取决于您使用的平台。如果您使用的是 Mircosoft 技术，它提供了**[msxsl:script](http://msdn.microsoft.com/en-us/library/ms256042.aspx)**元素，您可以使用它直接调用 JavaScript 函数。例如

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
     xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
     xmlns:js="madeup.uri" exclude-result-prefixes="msxsl js">

   <xsl:output method="html"/>

   <msxsl:script language="javascript" implements-prefix="js">
   function uriencode(string) 
   {
      return encodeURIComponent(string);
   } 
   </msxsl:script>

   <xsl:template match="/">
      <xsl:for-each select="MenuItem">
         <li>
            <a href="OrderEntry.aspx?ITEMNMBR={js:uriencode(string(ITEMNMBR))}">
               <xsl:value-of select="ITEMNMBR"/>
            </a>
         </li>
      </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```

# android - 前面没有\的撇号

> ID：15705647
> 
> 赞同：78
> 
> 时间：2013-03-29T14:49:13.363
> 
> 标签：android, xml-parsing

我在 android 应用程序中定义了一个字符串：

`<string name="search_occurs">'{string}' occurs {times}</string>`

这给出了错误：撇号前面没有\（在'{string}'发生{times}）

我已经尝试了很多方法来解决这个问题：

```
<string name="search_occurs">\'{string}\' occurs {times}</string>
<string name="search_occurs">&apos;{string}&apos; occurs {times}</string>
<string name="search_occurs"><![CDATA['{string}' occurs {times}]]></string>
<string name="search_occurs"><![CDATA[\'{string}\' occurs {times}]]></string> 
```

我无法摆脱错误。我错过了什么？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-03-29T14:52:33.053

这些都应该根据[http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)工作：

```
<string name="search_occurs">\'{string}\' occurs {times}</string>
<string name="search_occurs">"'{string}' occurs {times}"</string> 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-06-24T06:06:00.490

只需将 \ 放在字符串中的 ' 之前 这是 FALSE 它是 TRUE :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T14:52:21.157

为什么不提供`'`替换它的字符串？

你也知道这样的结构吗？

```
<string name="profile_age_range_text_between">between %1$d and %2$d</string>
<string name="unit_height_inches">%1$d\'%2$d ft</string>
<string name="unit_distance_miles">%s mi</string> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-08T06:56:24.827

Replace Your apostrophe (**'**) with (**\'**) or add \ before every (')

note: copy only inside () text

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-28T09:06:18.113

Make sure that you are editing the correct file. As [this answer](https://stackoverflow.com/a/39904775/3681880) states, when you get the error, Android Studio opens a `values.xml` file, which looks similar to your original file. You have to add the `\` in the original `strings.xml` file (or wherever the offending character is). Otherwise it will just keep repeating the error.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-26T14:22:54.343

In answer to [https://stackoverflow.com/users/3339394/the-martian](https://stackoverflow.com/users/3339394/the-martian) There is general solution for replacing ' by \' you have to copy the text into a word editor(like Notepad ++) and then by using the "replace" option in the program replace whole 's with \' . (cause I've not enough reputation i had to write it in an answer sorry!)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-20T07:16:11.730

This Error Is Caused By An Apostrophe Used In String

Replace Apostrophe With \' Thats All

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-21T07:27:42.670

I got the solution based on my scenario.

1.  select your string.xml file
2.  Right click and open show in explorer
3.  Edit the line from the string.xml file and save the code.
4.  Reopen Android studio and refresh the solution.

Now the code will run.

**Note:** I got the error in using Apostrophe on **can't**. so i change into **Cannot**. Now my scenario will works.

# kdb - KDB'.' 操作员

> ID：15705648
> 
> 赞同：3
> 
> 时间：2013-03-29T14:49:24.950
> 
> 标签：kdb

[。](http://code.kx.com/wiki/Reference/DotSymbol) _ 最简单形式的运算符用于索引列表。你会如何解释它在这段代码中的英文用法？

```
if[x~"last";upd:{[t;x].[t;();,;r::select by sym from x]}] 
```

我也不理解这一行中的空列表和 :: 运算符，但也许一旦 . 被清除。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T10:31:34.137

用简单的英语，我将其解释为：通过应用带有值 r 的附加/逗号函数，在所有 () 索引处修改表 t。

首先考虑几个简单的@情况：

```
q)l:3 5 7 9
q)l:1.1 2.2 3.3
q)@[l; 0 2; +; 10]
11.1 2.2 13.3

q)d:`p`o`i!4.4 5.5 6.6
q)@[d; `p`i; -; 10]
p| -5.6
o| 5.5
i| -3.4 
```

如您所见，格式为 **@[dataStructure; 指数；功能; y-arg]**

对索引处的 dataStructure 表示应用具有给定 y 参数的函数。注意列表 l 索引 0 2 表示最顶层的索引 0 和 2。没有办法使用 @ 进行深度索引。例如，给定矩阵 m:(1 2 3; 4 5 6; 7 8 9) 我们如何使用这种格式只修改值 4 和 6？

```
q)/ @ indexes repeatedly at topmost level
q)/ definitely not what we want
q)@[m;(1;0 2);+;100]
101 102 103
104 105 106
107 108 109

q)/ **. indexes into the data structure**

q).[m;1 2;+;100]
1 2 3
4 5 106
7 8 9

q).[m;(1;0 2);+;100]
1   2 3
104 5 106
7   8 9 
```

最后，空列表 () 是一种简短的说法，适用于所有索引：

```
q).[m;();+;100]
101 102 103
104 105 106
107 108 109 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:22:54.310

`.`在这种情况下，意味着适用`,`于`t`和`r`。`r`在每次调用时全局更新，并包含 . 收到的最后一个值`sym`。`::`在大多数情况下分配给全局。

[code.kx.com](http://code.kx.com/q/)详细描述`.`功能

# sml - 在 SML 中插入 EQUALOP 错误

> ID：15705652
> 
> 赞同：0
> 
> 时间：2013-03-29T14:49:36.147
> 
> 标签：sml, smlnj

我正在尝试交换 ML 列表中的元素。我的交换函数返回插入 EQUALOP 的错误。

```
fun swap(n:int, i:int, deck:card list) =
                local
                    val card1_removed = nth(deck,i)
                    val card2_removed = nth(deck,n)
                in
                    val deck = remove(deck,i)
                    val deck = remove(deck,n)
                    val deck = insert_at(deck,n,card1_removed)
                    val deck = insert_at(deck,i,card2_removed)
                    print_cards(deck);
                end; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:18:33.950

您的代码存在一些问题。

首先，您不能在这样的函数定义中使用本地声明。函数的主体必须是一个表达式，并且`local ... in .. end`是一个声明。在这种情况下，您必须使用`let ... in .. end`，这是一个表达式。

请注意，您不能在`in ... end`let 表达式的部分中声明值。在这里，您必须将`let ... in`部件中的所有值声明向上移动。

更清楚一点， let 和 local 的形式是：

```
<atexp> ::= let <dec> in <exp_1> ; ... ; <exp_n> end 

<dec>   ::= local <dec_1> in <dec_2> end 
```

因此，通常本地是这样使用的

```
local 
  fun foo ...
  val ....
in 
  fun swap ...
end 
```

像这样使用 let 的地方

```
fun swap ...
  let
    val ...
  in
    ..
  end 
```

# javascript - Backbone - IE10 页面每次滚动到顶部

> ID：15705654
> 
> 赞同：0
> 
> 时间：2013-03-29T14:49:41.980
> 
> 标签：javascript, jquery, internet-explorer, backbone.js, internet-explorer-9

我在页面中有这样的 div

```
<div class="test">Click here</div> 
```

和关于它的事件

```
events: {
    'click .test': 'myFunc',
}, 
```

它打开对话窗口，但在 Internet Explorer v9 和 v10 下，页面滚动到顶部。调试后我无法跟踪问题。

我还尝试在点击时滚动到链接，这是代码：

```
var x = (window.pageXOffset !== undefined) ? window.pageXOffset : (document.documentElement || document.body).scrollLeft,
    y = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body).scrollTop; 
```

这也没有奏效。有任何想法吗？

**更新**

问题不在于 Backbone，问题在于扩展的 jQuery 焦点功能。请看一下：

```
var originalFocus = $.fn.focus;
$.fn.focus = function () {
    if (this.hasClass('no-scroll')) {
        var x = (window.pageXOffset !== undefined) ? window.pageXOffset : (document.documentElement || document.body).scrollLeft,
            y = (window.pageYOffset !== undefined) ? window.pageYOffset : (document.documentElement || document.body).scrollTop;

        originalFocus.apply(this, arguments);
        window.scrollTo(x, y);

    } else {
        return originalFocus.apply(this, arguments);
    }
}; 
```

在其他浏览器中效果很好，但在 IE 中不行，似乎在应用 IE 后无法滚动到 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:25:51.817

我认为这可能是一个比你想象的更简单的问题。如果您在上面发布的代码就是一切，那么我可以指出一个问题。

在您的事件对象中，如果一行后面没有任何内容，则不能在一行后面加上逗号。所以去掉多余的逗号，

```
events: {
    'click .test': 'myFunc'
} 
```

同样，您可能已经减去了代码，所以我的观点是无效的，但建议这些东西总是安全的！

# html - 即使存在 Flash 播放器，也会加载对象标记 html 后备

> ID：15705655
> 
> 赞同：0
> 
> 时间：2013-03-29T14:49:45.693
> 
> 标签：html, flash, fallback

防止 html5 后备代码与 flash swf 一起加载的最佳方法是什么？我认为只有在不存在 Flash 播放器时才会加载后备代码，但它似乎不仅会加载后备 html，而且会先加载它，并且在 IE10 中将 swf 文件标记为待处理（如在提琴手中看到的那样），直到？后备？iframe 完全加载？
在这种情况下，它是一个 Flash 交互式动画横幅，Adobe Edge html5 后备加载在 iframe 标记中，放置在 Flash 对象标记的后备区域中。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>ad_750x220_comm_noCTA</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">
        html, body { height:100%; background-color: #ffffff;}
        body { margin:0; padding:0; overflow:hidden; }
        #flashContent { width:100%; height:100%; }
        </style>
    </head>
    <body>
        <div id="flashContent">
            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="750" height="220" id="ad_750x220_comm_noCTA" align="top">
                <param name="movie" value="ad_750x220_comm_noCTA.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#ffffff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="noscale" />
                <param name="menu" value="false" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="ad_750x220_comm_noCTA.swf" width="750" height="220">
                    <param name="movie" value="ad_750x220_comm_noCTA.swf" />
                    <param name="quality" value="high" />
                    <param name="bgcolor" value="#ffffff" />
                    <param name="play" value="true" />
                    <param name="loop" value="true" />
                    <param name="wmode" value="window" />
                    <param name="scale" value="noscale" />
                    <param name="menu" value="false" />
                    <param name="devicefont" value="false" />
                    <param name="salign" value="" />
                    <param name="allowScriptAccess" value="sameDomain" />
                <!--<![endif]-->
                    <iframe width="750" height="220" frameborder="0" scrolling="no" src="750x220.html"></iframe>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>
    </body>
</html> 
```

...现在 iframe 标签在加载它的内容之前优先于主 swf 文件，即使安装了 Flash 播放器也是如此。

# jquery - 从 ASP.NET 到 jquery 的序列化字符串

> ID：15705661
> 
> 赞同：0
> 
> 时间：2013-03-29T14:50:20.100
> 
> 标签：jquery, asp.net, serialization, deserialization

我需要使用隐藏字段将图像路径从 asp.net 传递给 jquery
我想序列化像“www.asd.com/asd.png ||| www.asd.com/asd2.png”这样的路径

并像在 jquery 中一样到达他们

var 路径字符串；

var blabla = pathStrings[i];

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:55:12.573

听起来这就是你要找的东西

```
var hiddenFieldVal = $('#HiddenFieldID').val();
var pathStrings = hiddenFieldVal.split(' ||| ');
var blabla = pathStrings[i]; 
```

# android - Android 如何获取给定 JSONObject 的“last_page”对象

> ID：15705664
> 
> 赞同：-7
> 
> 时间：2013-03-29T14:50:28.380
> 
> 标签：android, json

```
[{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29213","post_id":"29213","9":"Flower holder vase","post_title":"Flower holder vase","10":"Hand painted Chinese vase with silk flowers","post_des":"Hand painted Chinese vase with silk flowers","11":"2013-03-15 10:03:07","post_date":"2013-03-15 10:03:07","12":"2013-03-15 10:03:07","edit_date":"2013-03-15 10:03:07","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"1000","post_price":"1000","19":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29213\/1363325588-flower-holder-vase-lmf-com-pk.jpg","post_img":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29213\/1363325588-flower-holder-vase-lmf-com-pk.jpg","20":"1","post_country_id":"1","21":"4","post_state_id":"4","22":"23","post_city_id":"23","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29243","post_id":"29243","9":"fast stitching","post_title":"fast stitching","10":"we can provide all kind of stitching at lowest possible price and on time. We are also available for stitching botique dresses.","post_des":"we can provide all kind of stitching at lowest possible price and on time. We are also available for stitching botique dresses.","11":"2013-03-15 10:03:27","post_date":"2013-03-15 10:03:27","12":"2013-03-15 10:03:27","edit_date":"2013-03-15 10:03:27","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"","post_price":"","19":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29243\/1363325668-fast-stitching-lmf-com-pk.jpg","post_img":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29243\/1363325668-fast-stitching-lmf-com-pk.jpg","20":"1","post_country_id":"1","21":"4","post_state_id":"4","22":"23","post_city_id":"23","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29249","post_id":"29249","9":"water colour painting","post_title":"water colour painting","10":"water colour and more available.","post_des":"water colour and more available.","11":"2013-03-15 10:03:43","post_date":"2013-03-15 10:03:43","12":"2013-03-15 10:03:43","edit_date":"2013-03-15 10:03:43","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"3200","post_price":"3200","19":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29249\/1363325685-water-colour-painting-lmf-com-pk.jpg","post_img":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29249\/1363325685-water-colour-painting-lmf-com-pk.jpg","20":"1","post_country_id":"1","21":"5","post_state_id":"5","22":"44","post_city_id":"44","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29298","post_id":"29298","9":"House","post_title":"House","10":"Very beautiful","post_des":"Very beautiful","11":"2013-03-15 10:03:49","post_date":"2013-03-15 10:03:49","12":"2013-03-15 10:03:49","edit_date":"2013-03-15 10:03:49","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"25000","post_price":"25000","19":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29298\/1363325810-house-lmf-com-pk.jpg","post_img":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29298\/1363325810-house-lmf-com-pk.jpg","20":"1","post_country_id":"1","21":"7","post_state_id":"7","22":"83","post_city_id":"83","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29374","post_id":"29374","9":"Rana Atiq Amaizing Art Gallery Work","post_title":"Rana Atiq Amaizing Art Gallery Work","10":"Handmade Art,Paintings & Antique Items.......Art Calligrapher All Kind Of Paintings.Handmade Frames.Advertiser Advertising.Home Decoration Service Avalible.Please Visit.............Shop # 20, Lane # 8,Deffence Bazar DHA ,Karachi&Toheed Commercial Street NO # 33Near Abdullah Photo State.Mobile : 03412030283 ,03002315193","post_des":"Handmade Art,Paintings & Antique Items.......Art Calligrapher All Kind Of Paintings.Handmade Frames.Advertiser Advertising.Home Decoration Service Avalible.Please Visit.............Shop # 20, Lane # 8,Deffence Bazar DHA ,Karachi&Toheed Commercial Street NO # 33Near Abdullah Photo State.Mobile : 03412030283 ,03002315193","11":"2013-03-15 10:03:39","post_date":"2013-03-15 10:03:39","12":"2013-03-15 10:03:39","edit_date":"2013-03-15 10:03:39","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"","post_price":"","19":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29374\/1363325988-rana-atiq-amaizing-art-gallery-work-lmf-com-pk.jpg","post_img":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29374\/1363325988-rana-atiq-amaizing-art-gallery-work-lmf-com-pk.jpg","20":"1","post_country_id":"1","21":"8","post_state_id":"8","22":"107","post_city_id":"107","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29430","post_id":"29430","9":"Original paintings 2013......","post_title":"Original paintings 2013......","10":"ORIGINAL PAINTINGS HANDMADEacrylic on canvas1&2\u00a0 30x243&4\u00a0 24x24price: 30000\/= to 45000\/=cell: 03082905258","post_des":"ORIGINAL PAINTINGS HANDMADEacrylic on canvas1&2\u00a0 30x243&4\u00a0 24x24price: 30000\/= to 45000\/=cell: 03082905258","11":"2013-03-15 14:03:25","post_date":"2013-03-15 14:03:25","12":"2013-03-15 14:03:25","edit_date":"2013-03-15 14:03:25","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"","post_price":"","19":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29430\/1363340006-original-paintings-2013-lmf-com-pk.jpg","post_img":".\/uploads\/lmf-classifieds-pk\/folder1\/2013-03-15\/29430\/1363340006-original-paintings-2013-lmf-com-pk.jpg","20":"1","post_country_id":"1","21":"8","post_state_id":"8","22":"107","post_city_id":"107","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29620","post_id":"29620","9":"studio166 oil paintings","post_title":"studio166 oil paintings","10":"artist in oil paintings figure lanscaping forests birds peacock peagens lions animals parrats. poet writen saairah happy birthday critical.","post_des":"artist in oil paintings figure lanscaping forests birds peacock peagens lions animals parrats. poet writen saairah happy birthday critical.","11":"2013-03-15 14:03:35","post_date":"2013-03-15 14:03:35","12":"2013-03-15 14:03:35","edit_date":"2013-03-15 14:03:35","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"","post_price":"","19":"uploads\/no_image.jpg","post_img":"uploads\/no_image.jpg","20":"1","post_country_id":"1","21":"7","post_state_id":"7","22":"83","post_city_id":"83","23":"olx","post_ref":"olx"},{"0":"2","sub_cat_id":"2","1":"1","cat_id":"1","2":"Art - Collectibles","sub_cat_title":"Art - Collectibles","3":"Art - Collectibles","sub_cat_des":"Art - Collectibles","4":"1","sub_cat_status":"1","5":"1","temp_id":"1","6":"Type","type\/make":"Type","7":"normal","is_important":"normal","8":"29722","post_id":"29722","9":"Services","post_title":"Services","10":"OUR BRIEF INTRODUCTIONDear Sir,We are pleased to introduce ourselves as a Leading Importers,\u00a0Exporters.& Genereal Order Suppliers for Used Earth Moving Equipments\u00a0(Buldozers, Wheel Loaders), Used Construction Machinery (Excavator),\u00a0Used Road Construction Machinery (Motor Graders, Road Rollers,\u00a0Asphalt Finishers), Lifting Equipments ( Cranes & Fork Lifters)Brands We Deal:-Komatsu, Caterpillar, Toyota, TCM, Kato, Tadano, P&H, Kobelco, Hitachi, Daewoo, Solar, Samsung, Volvo, Groove, Furukawa, Mitsubishi, Dynapac, Sakai, Ingersoll Rand, Hyster, Nissan, Nigata, JCB, Halla, Helli,\u00a0Product we Deals :-FORK LIFTERS, CRANES, BULDOZERS, MOTOR GRADERS, WHEEL LOADERS, ASPHALT FINISHERS, EXCAVATORS, WHEEL EXCAVATORS, ROAD ROLLERS.
\nWe are regularly importing All the above mentioned units alongwith Fork Lifters & Cranes.
\nIf you have some inquiry for Purchase or you have some units for Sale, please feel free to contact us.
\nShall be looking forward to have your quick & positive Response.Thanks & Best RegardsA.H. Shaikh0320-5013123
\nA.R. Puri0333-4350628
\nMubashar Mehmood0333-4547077
\nA. A Construction & MachineryDEALS IN USED & NEW CONSTRUCTION MACHINERY, EARTH MOVING EQUIPMENTS,\u00a0LIFTING EQUIPMENTS, FORK LIFTERS, TRUCKS, CRANES, NEW & USED SPARE\u00a0PARTS.","post_des":"OUR BRIEF INTRODUCTIONDear Sir,We are pleased to introduce ourselves as a Leading Importers,\u00a0Exporters.& Genereal Order Suppliers for Used Earth Moving Equipments\u00a0(Buldozers, Wheel Loaders), Used Construction Machinery (Excavator),\u00a0Used Road Construction Machinery (Motor Graders, Road Rollers,\u00a0Asphalt Finishers), Lifting Equipments ( Cranes & Fork Lifters)Brands We Deal:-Komatsu, Caterpillar, Toyota, TCM, Kato, Tadano, P&H, Kobelco, Hitachi, Daewoo, Solar, Samsung, Volvo, Groove, Furukawa, Mitsubishi, Dynapac, Sakai, Ingersoll Rand, Hyster, Nissan, Nigata, JCB, Halla, Helli,\u00a0Product we Deals :-FORK LIFTERS, CRANES, BULDOZERS, MOTOR GRADERS, WHEEL LOADERS, ASPHALT FINISHERS, EXCAVATORS, WHEEL EXCAVATORS, ROAD ROLLERS.
\nWe are regularly importing All the above mentioned units alongwith Fork Lifters & Cranes.
\nIf you have some inquiry for Purchase or you have some units for Sale, please feel free to contact us.
\nShall be looking forward to have your quick & positive Response.Thanks & Best RegardsA.H. Shaikh0320-5013123
\nA.R. Puri0333-4350628
\nMubashar Mehmood0333-4547077
\nA. A Construction & MachineryDEALS IN USED & NEW CONSTRUCTION MACHINERY, EARTH MOVING EQUIPMENTS,\u00a0LIFTING EQUIPMENTS, FORK LIFTERS, TRUCKS, CRANES, NEW & USED SPARE\u00a0PARTS.","11":"2013-03-15 17:03:02","post_date":"2013-03-15 17:03:02","12":"2013-03-15 17:03:02","edit_date":"2013-03-15 17:03:02","13":"1","post_status":"1","14":"5","user_id":"5","15":"0","featuered":"0","16":"2","17":"1","18":"Free","post_price":"Free","19":"uploads\/no_image.jpg","post_img":"uploads\/no_image.jpg","20":"1","post_country_id":"1","21":"7","post_state_id":"7","22":"83","post_city_id":"83","23":"olx","post_ref":"olx"}]{"last_page":8} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:52:58.903

使用众多现有 JSON 库之一，解析字符串并使用库提供的 API？请参阅[http://json.org/](http://json.org/)，有一个您可以使用的库列表。

# ios - 如何从 Mac 中彻底、可靠地删除配置文件？

> ID：15705666
> 
> 赞同：5
> 
> 时间：2013-03-29T14:50:39.797
> 
> 标签：ios, xcode, continuous-integration, provisioning-profile

好的，所以我正在尝试设置 iOS 应用程序的自动构建和签名/打包（持续集成，你知道）。我们的测试人员池（即 UDID）不是很稳定，因此我们的配置文件往往会经常更改。为了完全确定我使用最新的配置文件进行构建（并避免常见的缓存陷阱），我想在每次构建之前清理所有以前配置文件的构建框并从 Apple 配置门户下载新的配置文件。我似乎无法确定地迈出第一步。我清理`~/Library/MobileDevice/Provisioning Profiles/`了，但 XCode 仍在从某个地方获取配置文件。我清理了库中的 XCode Organizer 以及所有当前连接的设备。请注意，我需要避免此步骤，除非有已知的方法可以从命令行执行此操作！尽管如此，XCode 仍然在愉快地签名。无奈之下，我做到了`find / -name "*.mobileprovision"`并在不少于 3 个临时位置找到副本：

*   `~/Library/Developer/XCode/DerivedData/[ProjectName]-[hash]/`
*   `~/Library/Developer/XCode/Archives/[date]/[Projectname].xcarchive/Products/Applications/[Projectname].app/`
*   `/private/var/folders/k_/[hash]/T/[UUID]/[Projectname].app/`

在删除所有这些之后，XCode 最终承认没有配置文件（只是将证书列为可以理解的“没有配置文件的身份”）并且签名失败。

清洁中有确定性吗？我也许能够找出前两条路径，但第三条路径没有机会，其中有两个随机序列。我错过了什么？如果我只是从中删除旧的配置文件，我可以依赖 XCode 使用新的配置文件`~/Library/MobileDevice/Provisioning Profiles/`吗？我想避免每次都剥离一个全新的 MacOS VM，只是为了确定这一点:)

为了完整起见，我们使用 XCode 4.3 和 4.5 之间的任何版本，如果有影响，可以在最新的 4.6 上同步。但我对此表示怀疑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-16T10:06:45.757

删除整个`~/Library/Developer/XCode`文件夹为我完成了这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T02:56:43.030

删除

> **~/Macintosh HD/User/home/Library/MobileDevice/Provisioning Profiles**

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-04-06T06:50:46.840

```
~/Library/MobileDevice/Provisioning Profiles 
```

这可以帮助您删除所有配置文件或选定的配置文件

# c# - mvvm-light 视图模型没有跨多个程序集完全数据绑定

> ID：15705667
> 
> 赞同：0
> 
> 时间：2013-03-29T14:50:40.280
> 
> 标签：c#, wpf, mvvm, mvvm-light, inotifypropertychanged

我们有一个项目，它有这个项目组装结构：

*   训练模型
*   通过 mvvm 灯光视图模型/定位器将数据绑定到模型的 XAML 表单

这一切都很好。

在加载事件中，我们有效地重新分配模型：

```
ViewModelLocator.Main.Training = new Training(); 
```

这工作正常，模型仍然全部绑定并更新以在表单上显示新数据。

为了整洁，我们想将 ViewModel 移到它自己的项目/程序集中。即实现这个结构：

*   训练模型
*   XAML 表单
*   mvvm 灯光视图模型/定位器

这是视图模型：

```
public class MainViewModel : ViewModelBase
{
    private Training training;

    /// <summary>
    /// Initializes a new instance of the MainViewModel class.
    /// </summary>
    public MainViewModel()
    {
        this.training = new Training();
    }

    public Training Training
    {
        get
        {
            return this.training;
        }
        set
        {
            this.training = value;
        }
    }
} 
```

ViewModel 有一个默认定位器：

```
public class ViewModelLocator
{
    /// <summary>
    /// Initializes a new instance of the ViewModelLocator class.
    /// </summary>
    public ViewModelLocator()
    {
        ServiceLocator.SetLocatorProvider(() => SimpleIoc.Default);

        SimpleIoc.Default.Register<MainViewModel>();
    }

    public static MainViewModel Main
    {
        get
        {
            return ServiceLocator.Current.GetInstance<MainViewModel>();
        }
    }

    public static void Cleanup()
    {
        // TODO Clear the ViewModels
    }
} 
```

当我将 ViewModel 移动到它自己的程序集中并运行项目时，在初始运行时，XAML 是正确绑定到模型实例的数据。如上所示，在分配新的培训对象时，表单不会更新。

考虑到唯一不同的是 mvvw-light 视图模型在另一个程序集中，可能导致这种情况的原因是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:30:33.063

您需要将您的`Training`财产更改为：

```
public Training Training
{
    get
    {
        return this.training;
    }
    set
    {
        Set(()=>Training, ref this.training, value);
    }
} 
```

以便引发属性更改通知。

# javascript - 在闭包中究竟是如何完成绑定的？

> ID：15705672
> 
> 赞同：4
> 
> 时间：2013-03-29T14:51:10.943
> 
> 标签：javascript, closures, symbol-table, name-binding

```
function f() { return s; } // works fine though no `s` is defined yet !

var s=1;
f(); // 1

delete s;

var s=2;
f(); // 2 

(function() {
var s=3;
f(); // 2 and not 3 which means lexical scoping is at play (?)
})(); 
```

首先，您可以关闭`s`尚未定义的变量 ( )。如果使用词法（静态）作用域，这怎么可能？

第二，删除原来的`s`，`f()`可以找到新的`s`。这是否意味着闭包绑定到变量名而不是引用或符号表索引或更机器级别的东西？我希望从 e 词法作用域闭包中抛出一个错误，因为原来`s`的被删除了。新的`s`只是重用了这个名字，和原来的没有任何关系`s`。

第三，`s`匿名函数作用域内部不被 使用`f()`，这是否意味着词法作用域确实在起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:00:35.953

> 首先，您可以关闭尚未定义的变量...如果使用词法（静态）范围，这怎么可能？

参考[吊装](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)

> 其次，删除原来的s后，f()可以找到新的s。这是否意味着闭包绑定到变量名而不是引用或符号表索引或更机器级别的东西？我希望 e 词法作用域闭包会引发错误，因为原始 s 已被删除。新的s只是重用了名字，和原来的s没有任何关系。

没有 new s，所有声明都被提升了。最后只有一个s。吊装仍然适用。

> 第三，匿名函数范围内的 s 不被 f() 使用，这是否意味着词法范围确实在起作用？

是的，匿名函数内部的 s 对它来说是本地的，在这种情况下，闭包是在全局 s 上形成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T14:58:00.883

这个例子等价于

```
var s;
function f() { return s; } // works fine though no `s` is defined yet !

s=1;
f(); // 1

delete s;

s=2;
f(); // 2 

(function() {
var s=3;
f(); // 2 and not 3 which means lexical scoping is at play (?)
})(); 
```

Javascript 变量声明被提升到其范围的顶部，然后被声明。然后在用户设置它们的位置定义它们。因此，您可以在函数范围内声明它之前引用一个 javascript 变量。

另请注意，delete 通常用于对象的属性，而不是用 var 声明的对象。在这种情况下删除无效，无论是否关闭。在这里看小提琴：[jsfiddle](http://jsfiddle.net/F5xDz/)

# php - 如何使用 PHP DOMDocument 从 HTML 字符串中删除不需要的样式属性

> ID：15705673
> 
> 赞同：1
> 
> 时间：2013-03-29T14:51:18.910
> 
> 标签：php, xss, domdocument

我准备了一个允许样式的白名单，我想从 HTML 字符串的白名单中删除所有样式

```
$allowed_styles = array('font-size','color','font-family','text-align','margin-left');
$html = 'xyz html';
$html_string = '<bdoy>' . $html . '<body>';
$dom = new DOMDocument();
$dom->loadHTML($html_string);
$elements = $dom->getElementsByTagName('body');
foreach($elements as $element) {

foreach($element->childNodes as $child) {

if($child->hasAttribute('style')) {

$style = strtolower(trim($child->getAttribute('style')));

//match and get only the CSS Property name
preg_match_all('/(?<names>[a-z\-]+):/', $style, $matches);

for($i=0;$i<sizeof($matches["names"]);$i++) {

  $style_property = $matches["names"][$i];

  // if the css-property is not in allowed styles array
  // then remove the whole style tag from this child

  if(!in_array($style_property,$allowed_styles)) {

   $child->removeAttribute('style');
   continue;

   }

}

    }
  }
}

$dom->saveHTML();
$html_output = $dom->getElementsByTagName('body'); 
```

我已经测试了这么多的 html 字符串，它在任何地方都可以正常工作。但是当我试图过滤这个 html 字符串时

```
$html_string = ​'<div style="font-style: italic; text-align: center; 
background-color: red;">On The Contrary</div><span 
style="font-style: italic; background-color: rgb(244, 249, 255); 
font-size: 32px;"><b style="text-align: center; 
background-color: rgb(255, 255, 255);">This is USA</b></span>'; 
```

除此行外，所有其他不允许的样式都从此字符串中删除

```
<b style="text-align: center; background-color: rgb(255, 255, 255);"> 
```

有人可以告诉我除白名单以外的任何其他有效且强大的删除样式的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:08:56.030

对于这个（和其他嵌套的）html，你必须使用这样的递归函数：

```
$html = 'your html';
$allowed_styles = array('font-size','color','font-family','text-align','margin-left');
$html_string = '<body>' . $html . '</body>';
$dom = new DOMDocument();
$dom->loadHTML($html_string);
$elements = $dom->getElementsByTagName('body');
foreach ($elements as $element)
    clearHtml($element, $allowed_styles);
$html_output = $dom->saveHTML(); 

function clearHtml($tree, $allowed_styles) {
    if ($tree->nodeType != XML_TEXT_NODE) {
        if ($tree->hasAttribute('style')) {
            $style = strtolower(trim($tree->getAttribute('style')));
            preg_match_all('/(?<names>[a-z\-]+):/', $style, $matches);
            for($i = 0; $i < sizeof($matches['names']); $i++) {
                $style_property = $matches['names'][$i];
                if(!in_array($style_property, $allowed_styles)) {
                    $tree->removeAttribute('style');
                    continue;
                }
            }
        }
        if ($tree->childNodes)
            foreach ($tree->childNodes as $child)
                clearHtml($child, $allowed_styles);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-29T15:18:27.590

与 Oleja 解决方案类似，但此解决方案仅删除不允许的属性，而不是整个样式属性。

```
//$this->removeStylesheet($doc, ['color','font-weight']);

function removeStylesheet($tree, $allowed_styles) {
    if ($tree->nodeType != XML_TEXT_NODE) {
        if ($tree->hasAttribute('style')) {
            $style = strtolower(trim($tree->getAttribute('style')));
            preg_match_all('/(?<names>[a-z\-]+) *:(?<values>[^\'";]+)/', $style, $matches);
            $new_styles = array();
            for ($i=0; $i<sizeof($matches['names']); $i++) {
                if(in_array($matches['names'][$i], $allowed_styles)) {
                    $new_styles[] = $matches['names'][$i].':'.$matches['values'][$i];
                }
            }
            if ($new_styles)
                $tree->setAttribute('style', implode(';', $new_styles));
            else
                $tree->removeAttribute('style');
        }
        if ($tree->childNodes) {
            foreach ($tree->childNodes as $child) {
                $this->removeStylesheet($child, $allowed_styles);
            }
        }
    }
} 
```

# jquery - 使用 JQuery 解析 XML

> ID：15705675
> 
> 赞同：2
> 
> 时间：2013-03-29T14:51:39.243
> 
> 标签：jquery, xml, xml-parsing

我正在尝试使用 JQuery 来解析 XML，这样我就可以将内容从 RSS Feed 发布到我的网站。但是，我被卡住了。我不确定如何使用 JQuery 加载 XML 文件。我在下面的链接中创建了一个示例。谢谢

[http://jsfiddle.net/deadendstreet/DytGM/1/](http://jsfiddle.net/deadendstreet/DytGM/1/)

```
var xml;
$.get("http://straight2jackie.blogspot.com//feeds/posts/default?alt=rss", function(data) {
    xml = data;
});,
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find( "title" );

/* append "RSS Title" to #someElement */
$( "#someElement" ).append( $title.text() );

/* change the title to "XML Title" */
$title.text( "XML Title" );

/* append "XML Title" to #anotherElement */
$( "#anotherElement" ).append( $title.text() ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T14:59:06.273

如果您`$.get`使用`dataType`参数 (ie `dataType:'xml'`) 调用，您将自动进行 xml 解析。

顺便说一句，我认为您在这里面临另一个问题：您无法从外部（子）域加载 ajax 资源：检查[这里](https://stackoverflow.com/questions/3506208/jquery-ajax-cross-domain)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:58:30.917

您可以尝试[jQuery.parseXML()](http://api.jquery.com/jQuery.parseXML/)和类似的代码：

```
<script>
    var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find( "title" );
    /* append "RSS Title" to #someElement */
    $( "#someElement" ).append( $title.text() );
    /* change the title to "XML Title" */
    $title.text( "XML Title" );
    /* append "XML Title" to #anotherElement */
    $( "#anotherElement" ).append( $title.text() );
</script> 
```

# c# - C# 和 PHP 中不同的 MD5 文件哈希

> ID：15705676
> 
> 赞同：4
> 
> 时间：2013-03-29T14:51:42.810
> 
> 标签：c#, php, encoding, md5, checksum

我在检查 C# 和 PHP 中文件的 MD5 校验和时遇到了一个小问题。PHP 脚本计算的哈希值与 C# 计算的哈希值不同。

```
libcurl.dll C#   = c3506360ce8f42f10dc844e3ff6ed999
libcurl.dll PHP  = f02b47e41e9fa77909031bdef07532af 
```

在 PHP 中我使用`md5_file`函数，我的 C# 代码是：

```
protected string GetFileMD5(string fileName)
{
    FileStream file = new FileStream(fileName, FileMode.Open);
    MD5 md5 = new MD5CryptoServiceProvider();
    byte[] retVal = md5.ComputeHash(file);
    file.Close();

    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < retVal.Length; i++)
    {
        sb.Append(retVal[i].ToString("x2"));
    }
    return sb.ToString();
} 
```

任何想法如何计算相同的哈希？我认为这可能与编码有关。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:08:02.187

我的 C# 生锈了，但会：

```
byte[] retVal = md5.ComputeHash(file); 
```

实际读取整个文件？我认为它只是散列流对象。我相信您需要阅读流，然后对整个文件内容进行哈希处理？

```
 int length = (int)file.Length;  // get file length
  buffer = new byte[length];      // create buffer
  int count;                      // actual number of bytes read
  int sum = 0;                    // total number of bytes read

  // read until Read method returns 0 (end of the stream has been reached)
  while ((count = file.Read(buffer, sum, length - sum)) > 0)
      sum += count;  // sum is a buffer offset for next reading
  byte[] retVal = md5.ComputeHash(buffer); 
```

我不确定这是否真的按原样运行，但我认为需要一些类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:59:53.137

我用这个：

我还没有比较 php md5 和 c# md5 的任何问题

```
System.Text.UTF8Encoding text = new System.Text.UTF8Encoding();
System.Security.Cryptography.MD5CryptoServiceProvider md5 = new System.Security.Cryptography.MD5CryptoServiceProvider();                
Convert2.ToBase16(md5.ComputeHash(text.GetBytes(encPassString + sess)));

class Convert2
{
   public static string ToBase16(byte[] input)
   {
      return string.Concat((from x in input select x.ToString("x2")).ToArray());
   }
} 
```

# python - 为什么进程不加入并且不运行？

> ID：15705678
> 
> 赞同：9
> 
> 时间：2013-03-29T14:51:44.257
> 
> 标签：python, macos, python-3.x, parallel-processing, multiprocessing

如果我观看 python 多处理教程，我有一个简单的问题要解决（或多或少）
，我发现一个进程应该或多或少地像这样启动：

```
from multiprocessing import *

def u(m):
    print(m)
    return

A=Process(target=u,args=(0,))
A.start()
A.join() 
```

它应该打印一个 0 但没有打印任何内容。相反，它永远挂在`A.join()`.

如果我手动启动功能你这样做

```
A.run() 
```

它实际上在外壳上打印 0 但它不能同时工作
，例如以下代码的输出：

```
from multiprocessing import *
from time import sleep

def u(m):
    sleep(1)
    print(m)
    return

A=Process(target=u,args=(1,))
A.start()
print(0) 
```

应该是
0
1

但实际上是
0

如果我在最后一行之前添加

```
A.run() 
```

然后输出变为
1
0

这对我来说似乎很困惑......

如果我尝试加入该过程，它将永远等待。

但是，如果它可以帮助我回答
我的操作系统是 Mac os x 10.6.8
使用的 python 版本是 3.1 和 3.3
我的电脑有 1 个英特尔核心 i3 处理器

--更新--
我注意到这种奇怪的行为只有在从 IDLE 启动程序时才会出现，如果我从终端运行程序，一切都按预期工作，所以这个问题必须与一些 IDLE 错误有关。
但是从终端运行程序更奇怪：使用 range(100000000) 之类的东西会激活我所有计算机的内存，直到程序结束；如果我记得很清楚，这不应该发生在 python 3 中，只发生在较旧的 python 版本中。我希望这些新信息能帮助你给出答案

--更新 2--
即使我不从我的进程执行输出，也会出现错误，因为设置了这个：

```
def u():
    return 
```

作为进程的目标然后启动它，如果我尝试加入进程，空闲等待永远

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-08T05:39:16.083

正如[这里](http://bugs.python.org/issue13220)和[这里](https://stackoverflow.com/questions/2774585/child-processes-created-with-python-multiprocessing-module-wont-print/2774623#2774623)所建议的那样，问题在于 IDLE 覆盖`sys.stdin`并且`sys.stdout`以一些奇怪的方式，它们不会干净地传播到您从中产生的进程（它们不是真正的文件句柄）。

第一个链接还表明它不太可能很快得到修复（他们说，“可能是一个'无法修复'的问题”）。

所以不幸的是，我可以建议的唯一解决方案是不要对这个脚本使用 IDLE ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T03:39:35.717

您是否尝试过无缓冲输出？尝试导入 sys 模块并更改打印语句：

```
print >> sys.stderr, m 
```

这对行为有何影响？我和其他怀疑 IDLE 与 stdio 混在一起的人在一起。. .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T17:31:44.580

您是否尝试过添加`A.join()`到您的程序中？我猜你的主进程在子进程打印之前退出，这导致输出被隐藏。如果你告诉主进程等待子进程（`A.join()`），我敢打赌你会看到你期望的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T03:36:16.353

鉴于它只发生在 IDLE 中，我怀疑问题与两个进程使用的标准输出有关。也许它是一些类似文件的对象，从两个不同的进程中使用是不安全的。

如果您没有子进程写入标准输出，我怀疑它会完成并正确加入。例如，您可以改为将其写入文件。或者你可以在父母和孩子之间建立一个管道。

# java - 巴比伦数字表示

> ID：15705693
> 
> 赞同：-2
> 
> 时间：2013-03-29T14:52:40.743
> 
> 标签：java, multidimensional-array

我是 Java 新手，并已收到以下任务，需要在接下来的 2 周内完成。任何有关如何开始的指针将不胜感激：

> 编写一个 Java 类，其实例代表巴比伦数字。您的课程至少应提供以下方法：

1.  一个以巴比伦形式表示的数字作为输入的构造函数（`String`例如`"34,45,2"`or`"1,23,4,59,55"`等​​）
2.  一种将当前巴比伦数字的值作为整数返回的方法；
3.  一种将巴比伦数字转换为字符串形式的方法；
4.  一种将两个巴比伦数字相加以产生新巴比伦数字的方法；
5.  一种从当前巴比伦数中减去传递的巴比伦数以产生新巴比伦数的方法；

> 如果您的班级可以表示的数字的大小受到限制，请说出这些限制是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:59:31.763

您将在下面找到一组可能对您有所帮助的方法：

```
/**
 * A representation of a Babylonina number.
 * <p>
 * TODO some examples/explanations of what Babyloninan numbers
 */
class Babylonian
{
  /**
   * Constructs a Babylonina number from a string.
   */
  public Babylonian(String number)
  {
  }

  /**
   * Returns the value of this Babyloninan number as an {@code int}.
   *
   * @return the value of this Babylonian number (as an int)
   */
  public int getBabylonian()
  {
  }

  /**
   * Returns the value of this Babyloninan number as a {@code String}.
   *
   * @return the value of this Babylonian number (as a String)
   */
  public String toString()
  {
  }

  /**
   * Adds the Babylonian number {@code x} to this number.
   *
   * @param x the Babylonian number to add
   */
  public void add(Babylonian x)
  {
  }

  /**
   * Substracts the Babylonian number {@code x} to this number.
   *
   * @param x the Babylonian number to substract
   */
  public void subtract(Babylonian x)
  {
  }
} 
```

# c# - 使用 http 处理程序输出图像

> ID：15705697
> 
> 赞同：0
> 
> 时间：2013-03-29T14:52:47.477
> 
> 标签：c#, httphandler

我的处理程序有以下代码，我已经对其进行了调试，我可以看到我的图像变量 b 具有我需要的实际图像，但是我无法在浏览器中显示它。当我运行它时，我只是在屏幕上而不是图像上得到 System.Drawing.Bitmap。我不确定如何将其写入浏览器。任何想法将不胜感激，谢谢。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://myaddress");
request.Credentials = new NetworkCredential("username", "password");
request.Method = "GET";
request.Accept = "image/jpeg";

HttpWebResponse response = (HttpWebResponse)request.GetResponse();
Stream s = response.GetResponseStream();
System.Drawing.Image b = System.Drawing.Image.FromStream(s);
context.Response.ContentType = "image/jpeg";
context.Response.Write(b); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:55:12.307

将其写入输出流：

```
b.Save(context.Response.OutputStream, ImageFormat.Jpeg); 
```

# php - 管理已读/未读项目 (NoSQL/SQL) 的最佳方式是什么？

> ID：15705705
> 
> 赞同：0
> 
> 时间：2013-03-29T14:53:18.950
> 
> 标签：php, sql, symfony, nosql

我要构建一个 Symfony 2.1 应用程序，它需要知道项目的状态（已读/未读），是否有任何有效的方法来保存项目状态（有很多项目）？使用 SQL 关系表留最佳选择？或者也许像 MongoDB 这样的 NoSQL 数据库是处理已读/未读状态的更好主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:57:27.147

准确管理这一点（即不走捷径）的最佳方法是关联表。假设您的数据库包含**items**和**users**，请按如下方式构建另一个表：

```
item_users (id, user_id, item_id, time_added) 
```

那里存在的任何字段（用户和项目的组合）都被视为“用户已阅读此内容”。这将生成大量数据，但可以通过巧妙的索引/分片轻松处理。例如：

*   如果你有很多用户和很多项目，用户分片可能是最好的
*   如果你经常对谁读过某个帖子感兴趣，那么按项目分片也是值得的
*   考虑分别索引 user_id 和 index_id（INDEX + FOREIGN KEY 和 UPDATE 和 DELETE 级联）

这将允许您非常轻松地查询表。请记住，如果您有很多用户和帖子，您的数据可能会变得很大，此时分片确实变得很有必要。

# ios - 离线时如何使用 NSURLCache 返回缓存的 API 响应（iOS 应用）

> ID：15705709
> 
> 赞同：13
> 
> 时间：2013-03-29T14:53:34.500
> 
> 标签：ios, objective-c, afnetworking, nsurlcache

我希望有人可以对我一直在研究但没有取得太大进展的一些事情有所了解。

我想利用 NSURLCache 为我在 iOS 应用程序中进行的 API 调用返回缓存的响应。当设备在线时，如果它足够新，我想返回缓存的响应，否则从远程获取。当设备离线时，我想立即返回缓存的响应（如果有的话），不管它的年龄。

我正在使用`AFNetworking`. 我正在进行的 API 调用是针对我控制的服务器的。协议是 HTTPS。响应标`Cache-Control`头当前为`"max-age=0, public"`. 我目前没有设置与缓存相关的请求标头（应该吗？）。我将请求的缓存策略设置为`NSURLRequestReturnCacheDataDontLoad`离线时，在线时使用默认值`NSURLRequestUseProtocolCachePolicy`。`Cache.db`我可以在磁盘上的默认值中看到请求及其响应。但是，当我离线时，所有请求都失败（没有缓存的响应（尽管似乎已被缓存）正在使用/返回。

根据[http://nshipster.com/nsurlcache/](http://nshipster.com/nsurlcache/)我初始化一个`sharedURLCache`in`didFinishLaunchingWithOptions`并将 AFNetworking`setCacheResponse`块设置为如下所示：

```
NSMutableDictionary *mutableUserInfo = [[cachedResponse userInfo] mutableCopy];
NSMutableData *mutableData = [[cachedResponse 数据] mutableCopy];
NSURLCacheStoragePolicy storagePolicy = NSURLCacheStorageAllowed;
return [[NSCachedURLResponse alloc] initWithResponse:[cachedResponse response] data:mutableData userInfo:mutableUserInfo storagePolicy:storagePolicy];

```

我已经阅读了有关该主题的这些和其他帖子：

[http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/](http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/) [http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html](http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html)

我想知道是否有人在使用标准之前成功实现了此功能`NSURLCache`（也对成功案例感兴趣，`SDURLCache`但 Peter S. 说从 iOS5 开始支持磁盘缓存，因此`SDURLCache`不再需要，即我想使用默认内置缓存）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-13T02:58:27.427

你看到这个帖子了吗？

[AFNetworking (AFHttpClient) 离线模式不适用于 NSURLRequestReturnCacheDataDontLoad 策略](https://stackoverflow.com/questions/14002422/afnetworking-afhttpclient-offline-mode-not-working-with-nsurlrequestreturncach)

看起来这可能是 iOS 6 的一个错误。这是毛泽东在帖子中所说的：

> 一个总结的解决方法是从缓存中读取响应，而不是使用 NSURLRequestReturnCacheDataDontLoad 策略：

```
NSCachedURLResponse *cachedResponse = [[NSURLCache sharedURLCache]     cachedResponseForRequest:request];
if (cachedResponse != nil &&
    [[cachedResponse data] length] > 0)
{
    // Get cached data
    ....
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-29T17:45:00.823

除非您的所有调用都是 100% GET 并且没有副作用或时间依赖性，否则这是危险的。

# .net - .NET 中的 Oracle 列默认值

> ID：15705711
> 
> 赞同：0
> 
> 时间：2013-03-29T14:53:40.517
> 
> 标签：.net, oracle

当我在 Oracle 中运行以下 SQL 时，会正确报告列默认值（“测试”）。当我在 .NET 中运行相同的 SQL 时，报告的默认值为 NULL：

```
SELECT column_name, data_default FROM user_tab_columns WHERE table_name='MYTABLENAME' 
```

有问题的列是 Varchar2。我还测试了一个数字列 - 同样的问题。

数据库版本是 Oracle Database 11g Express Edition Release 11.2.0.2.0 - Production

.NET 连接器是 ODP.NET

操作系统是 Windows 7 / 64

我从 all_tab_columns 得到相同的结果（NULL）

.NET 代码：

```
Dim provider As DbProviderFactory = DbProviderFactories.GetFactory("Oracle.DataAccess.Client")
Using connection As DbConnection = provider.CreateConnection
  connection.ConnectionString = "Data Source=localhost; User Id=userid; Password=password"
  connection.Open
  Using dt As New DataTable
    Using command As DbCommand = provider.CreateCommand
      command.CommandText = "SELECT column_name, data_default FROM user_tab_columns WHERE table_name='MYTABLENAME'"
      command.Connection = connection
      Using da As DbDataAdapter = provider.CreateDataAdapter
        da.SelectCommand = command
        da.Fill(dt)
      End Using
    End Using
    For Each row As DataRow in dt.Rows
      Response.Write(row("COLUMN_NAME") & " " & row("DATA_DEFAULT") & "<br>")
    Next
  End Using
End Using 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T16:15:49.183

data_default 是 Oracle 类型的 LONG。通过本文档[http://docs.oracle.com/html/B14164_01/featData.htm#i1007197](http://docs.oracle.com/html/B14164_01/featData.htm#i1007197)看来您需要做一些特殊的工作来检索 LONG 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T21:00:35.227

我最终创建了一个 Oracle 函数来处理这个问题：

```
CREATE OR REPLACE 
  FUNCTION GetColumnDefaultValue(
    TableName IN varchar2,
    ColumnName IN varchar2
  )
  RETURN varchar2
    AS ddLong long; 
    BEGIN
      SELECT data_default
      INTO ddLong
      FROM user_tab_columns
      WHERE table_name = TableName
        AND column_name = ColumnName;
    RETURN
      substr(ddLong,0,255);
    END; 
```

The default value is retrieved using:

```
SELECT GetColumnDefaultValue('TABLENAME','FIELDNAME') FROM dual 
```

Note that this retrieves only the first byte of the default value. Modify `substr(ddLong,0,255);` to return more.

# c# - 自定义验证器无法获取组合框 ID

> ID：15705714
> 
> 赞同：0
> 
> 时间：2013-03-29T14:53:48.320
> 
> 标签：c#, ajax, combobox, customvalidator

我使用自定义验证器作为 Ajax 组合框的必需字段验证器失败，但我无法为组合框解决它，但是当我在自定义验证器控件中传递另一个文本框的 ID 以验证选项时，它工作正常.

以下是我的代码：已**更新**

```
<ajax:ComboBox ID="Cmbx" runat="server" Width="100px" CssClass="AquaStyle textfont"
                                                AutoPostBack="true" DropDownStyle="DropDown" AutoCompleteMode="SuggestAppend"
                                                CaseSensitive="false" ItemInsertLocation="Append"
                                                ValidationGroup="Validate" CausesValidation="true" /> 
```

```
<asp:CustomValidator ID="cvRequired" ControlToValidate="InstCmbx$TextBox" runat="server"
                                            ClientValidationFunction="validate" Display="None" ValidationGroup="Validate"/> 
```

这不起作用，我也检查了 Ajax 站点上的问题跟踪器，但他们说我必须在 Id 中附加“$TextBox”，它会起作用，但它也不起作用。

我无法从相同的地方调用一个简单的 javascript 函数：

```
 function validate(sender, args) {
       alert("gasfkgsjkds");
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:54:01.480

好吧，有一种方法可以做到这一点，因为这不能直接用于 Ajax 组合框。我们需要从 Ajax Combobox 中提取 Text Box 控件，然后在其“OnBlur”客户端事件上调用一个函数。

# asp.net - ASP.Net MVC 从 AJAX 帖子中获取新添加记录的 ID

> ID：15705716
> 
> 赞同：0
> 
> 时间：2013-03-29T14:53:56.313
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, jquery

在以下 JQuery/Ajax 发布到以下模型后，如何从以下模型中检索**ID ：**

查询：

```
 $.ajax({
            type: 'POST',
            url: '/api/searchapi/Post',
            contentType: 'application/json; charset=utf-8',
            data: toSend,
        }).done(function (msg) {
                alert( "Data Saved: " + msg );
        }); 
```

控制器：

```
 // POST api/searchapi
    public Void Post(Booking booking)
    {
        if (ModelState.IsValid)
        {
            tblCustomerBooking cust = new tblCustomerBooking();
            cust.customer_email = booking.Email;
            cust.customer_name = booking.Name;
            cust.customer_tel = booking.Tel;

            bc.tblCustomerBookings.Add(cust);
            bc.SaveChanges();

            long ID = cust.customer_id;

            Return ID;   <-- what do I enter here?
         }

         Return "Error";  <-- and here?
     } 
```

如何将 ID 取回 jQuery 脚本，如果模型无效，如何将错误返回给 jQuery？

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:59:15.840

你可以返回一个 JsonResult

```
[HttpPost]
public ActionResult Post(Booking booking)
{
    if (ModelState.IsValid)
    {
        tblCustomerBooking cust = new tblCustomerBooking();
        cust.customer_email = booking.Email;
        cust.customer_name = booking.Name;
        cust.customer_tel = booking.Tel;

        bc.tblCustomerBookings.Add(cust);
        bc.SaveChanges();

        return Json(new { id = cust.customer_id });
     }

     return HttpNotFound();
 } 
```

然后在客户端简单地：

```
$.ajax({
    type: 'POST',
    url: '/api/searchapi/Post',
    contentType: 'application/json; charset=utf-8',
    data: toSend,
}).done(function (msg) {
    alert('Customer id: ' + msg.id);
}).error(function(){
    // do something if the request failed
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T15:01:22.833

一种方法是这样的：

在您的控制器中：

```
 public Void Post(Booking booking)
    {

         //if valid
         return Json(new {Success = true, Id = 5}); //5 as an example

         // if there's an error
         return Json(new {Success = false, Message = "your error message"}); //5 as an example
     } 
```

在您的 ajax 帖子中：

```
$.ajax({
        type: 'POST',
        url: '/api/searchapi/Post',
        contentType: 'application/json; charset=utf-8',
        data: toSend,
        success: function(result) {
          if (result.Success) {
            alert(result.Id);
          }
          else {
            alert(result.Message);
          }
        }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:01:13.440

返回 void 不是一个好主意，使用 JsonResult

因为您使用的是 JavaScript，所以我建议使用 JSON。

```
return this.Json(new { customerId = cust.customer_id}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:00:04.047

为了接收返回值，控制器方法必须返回 void 以外的内容。

你的控制器编译了吗？您的 post 方法具有 void 返回类型，因此当它看到返回 ID 并返回“错误”命令时，它应该无法编译

# paypal - PayPal REST API：请求 oauth 令牌返回 500

> ID：15705718
> 
> 赞同：3
> 
> 时间：2013-03-29T14:54:14.117
> 
> 标签：paypal

两天前，我们的贝宝集成出现了问题。不幸的是，尝试联系贝宝支持已被证明无济于事（2 天内没有回复），所以我会在这里试试运气。

请求令牌（curl [https://api.paypal.com/v1/oauth2/token](https://api.paypal.com/v1/oauth2/token) -H "Accept: application/json" -H "Accept-Language: en_US" -u "****:**** " -d "grant_type=client_credentials") 开始总是返回一个空响应，以及一个 500 错误。

请注意，同样适用于 api.sandbox.paypal.com 和沙箱凭据。

我仔细检查了我们的凭据，它们很好。还要注意，我使用什么凭据并不重要，它总是返回相同的 - 500。

这是 curl ... -v; 的输出。看起来您有内部服务器错误，如 500 所示：

```
* About to connect() to api.paypal.com port 443 (#0)
* Trying 173.0.88.98...
* connected
* Connected to api.paypal.com (173.0.88.98) port 443 (#0)
* successfully set certificate verify locations:
* CAfile: /usr/ssl/certs/ca-bundle.crt
CApath: none
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Request CERT (13):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using DES-CBC3-SHA
* Server certificate:
* subject: C=US; ST=California; L=San Jose; O=PayPal, Inc.; OU=PayPal Production; CN=api.paypal.com
* start date: 201
* expire date: 201
* subjectAltName: api.paypal.com matched
* issuer: C=U
* SSL certificate verify ok.
* Server auth using Basic with user '****'
> POST /v1/oauth2/token HTTP/1.1
> Authorization: Basic ****
> User-Agent: curl/7.27.0
> Host: api.paypal.com
> Accept: application/json
> Accept-Language: en_US
> Content-Length: 29
> Content-Type: application/x-www-form-urlencoded
>
* upload completely sent off: 29 out of 29 bytes
* additional stuff not fine /usr/src/ports/curl/curl-7.27.0-1/src/curl-7.27.0/lib/transfer.c:1037: 0 0
* HTTP 1.1 or later with persistent connection, pipelining supported
< HTTP/1.1 500 Internal Server Error
< Server: Apache-Coyote/1.1
< Date: Thu, 28 Mar 2013 15:59:53 GMT
< Content-Length: 0
< Connection: close
<
* Closing connection #0
* SSLv3, TLS alert, Client hello (1): 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:43:07.797

这是目前正在调查的事情。如果您尚未使用 PayPal MTS 开票，我建议您通过[Technical Support](https://www.paypal.com/mts)开票，以便您的问题可以添加到示例中。一旦问题得到解决，您也会收到通知。

**编辑：**这已在格林威治标准时间上午 04:12（2013 年 3 月 31 日）得到解决。

# python - lxml.etree 中未解决的导入 tostring

> ID：15705719
> 
> 赞同：0
> 
> 时间：2013-03-29T14:54:14.710
> 
> 标签：python, lxml

我在 Mac 上安装了 lxml 并尝试在我的代码中使用它，但在导入 tostring 和 tounicode 时出现错误。Python 根本看不到它。任何想法我做错了什么？

这是导致问题的代码 -

```
from lxml.etree import tostring
from lxml.etree import tounicode 
```

我收到未解决的导入错误

我的 IDE (eclipse) 也能够看到 lxml.etree 模块的**init** .py 文件。这是它所看到的——

```
# this is a package

def get_include():
    """
    Returns a list of header include paths (for lxml itself, libxml2
    and libxslt) needed to compile C code against lxml if it was built
    with statically linked libraries.
    """
    import os
    lxml_path = __path__[0]
    include_path = os.path.join(lxml_path, 'includes')
    includes = [include_path, lxml_path]

    for name in os.listdir(include_path):
        path = os.path.join(include_path, name)
        if os.path.isdir(path):
            includes.append(path)

    return includes 
```

谢谢你的帮助。

编辑：
我看到的唯一日志是 Unresolved import: tostring Unresolved import: tounicode

当我在导入 tostring 之前添加以下行时，它不会出现错误 - 从 lxml 导入 etree

也给你一些关于我正在尝试做的事情的背景。我从这里（[https://github.com/buriy/python-readability](https://github.com/buriy/python-readability)）获得了可读性代码，并尝试在我的项目中使用它。

EDIT2：我解决了这个问题，但仍然不明白为什么。我想直接使用可读性项目中的代码，而不使用 easy_install 安装包。这个想法是进入代码，以便我了解它在做什么。但是当我将代码复制到我的项目中时，我在可读性代码中得到了上述错误。如果我使用 easy_install 安装包，那么我可以简单地导入通过可读性导出的类并使用它。

那么有人能告诉我直接使用代码和安装包之间有什么区别吗？什么是 .egg 文件？如何创建一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-08T04:00:25.247

在 lxml 的代码中，它动态加载模块。这使得 IDE 无法分析引用，因为 IDE 仅分析原始代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T13:41:17.010

`etree`在我的 Intellij IDEA Python 项目中尝试解析资源和导入时，我发现此解决方案非常有用：

看看建议这个解决方案的[lxml 教程：](http://lxml.de/tutorial.html)

```
try:
    from lxml import etree
    print("running with lxml.etree")
except ImportError:
    try:
        # Python 2.5
        import xml.etree.cElementTree as etree
        print("running with cElementTree on Python 2.5+")
    except ImportError:
        try:
            # Python 2.5
            import xml.etree.ElementTree as etree
            print("running with ElementTree on Python 2.5+")
        except ImportError:
            try:
                # normal cElementTree install
                import cElementTree as etree
                print("running with cElementTree")
            except ImportError:
                try:
                    # normal ElementTree install
                    import elementtree.ElementTree as etree
                    print("running with ElementTree")
                except ImportError:
                    print("Failed to import ElementTree from any known place") 
```

# unicorn - 流浪汉中的独角兽/ kgio LoadError

> ID：15705721
> 
> 赞同：2
> 
> 时间：2013-03-29T14:54:23.067
> 
> 标签：unicorn, vagrant

我正在学习有关独角兽和 nginx 的 railscasts 教程（[http://railscasts.com/episodes/293-nginx-unicorn](http://railscasts.com/episodes/293-nginx-unicorn)），在 vagrant 中使用 lucid32 框。我的操作系统是山狮。我正在使用 rbenv 和 ruby​​ 1.9.2p290。将独角兽添加到我的 Gemfile 并运行捆绑包后，我运行：

```
bundle exec unicorn -c config/unicorn.rb -D 
```

这是结果：

```
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/kgio-2.8.0/lib/kgio.rb:21:in `require': /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/kgio-2.8.0/lib/kgio_ext.so: undefined symbol: rb_prohibit_interrupt - /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/kgio-2.8.0/lib/kgio_ext.so (LoadError)
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/kgio-2.8.0/lib/kgio.rb:21:in `<top (required)>'
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/unicorn-4.6.0/lib/unicorn.rb:6:in `require'
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/unicorn-4.6.0/lib/unicorn.rb:6:in `<top (required)>'
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/unicorn-4.6.0/lib/unicorn/launcher.rb:9:in `require'
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/unicorn-4.6.0/lib/unicorn/launcher.rb:9:in `<top (required)>'
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/unicorn-4.6.0/bin/unicorn:3:in `require'
from /opt/vagrant_ruby/lib/ruby/gems/1.8/gems/unicorn-4.6.0/bin/unicorn:3:in `<top (required)>'
from /opt/vagrant_ruby/bin/unicorn:19:in `load'
from /opt/vagrant_ruby/bin/unicorn:19:in `<main>' 
```

有小费吗？

# ios - Xcode4.3 UIActionSheet 导致错误消息

> ID：15705723
> 
> 赞同：2
> 
> 时间：2013-03-29T14:54:29.813
> 
> 标签：ios, xcode, uiactionsheet

该应用程序在测试时运行良好，但在`delegate:self`我旁边...

> 将“ViewController *const __strong”发送到不兼容类型“id<UIActionSheetDelegate>”的参数

非常感谢您对此的任何帮助，因为我已经为此工作了好几天！

我的 Viewcontroller.h 是...

```
#import <UIKit/UIKit.h>
#import <Social/Social.h>

#import "Accounts/Accounts.h"
#import <MessageUI/MessageUI.h>

@interface ViewController : UIViewController<MFMailComposeViewControllerDelegate>

{
    UIAlertView *objresponseAlert;
}
@property (weak, nonatomic) IBOutlet UITextView *myTextView;

- (IBAction)emailButton:(id)sender;
@end 
```

在我的 ViewController.m 我有....

```
- (IBAction)emailButton:(id)sender {    
    UIActionSheet *actionsheet = [[UIActionSheet alloc]
                                  initWithTitle:@"Title"
                                  delegate:self
                                  cancelButtonTitle:@"Cancel"
                                  destructiveButtonTitle:nil
                                  otherButtonTitles:@"Email", nil];
    [actionsheet showInView:self.view];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-04T14:41:05.043

这很完美！

```
// Make Class conform to UIActionSheet delegate
@interface ViewController : UIViewController<MFMailComposeViewControllerDelegate,UIActionSheetDelegate> 
```

# actionscript-3 - 外部 swf 应在到达最后一帧时卸载

> ID：15705724
> 
> 赞同：0
> 
> 时间：2013-03-29T14:54:30.490
> 
> 标签：actionscript-3, flash, external

我有一个 swf 文件加载到主电影中。当孩子玩完，即到达最后一帧时，我想卸载 swf。谁能告诉我我可以在这段代码中添加哪些位？

```
//start button

start_button_aboriginal.addEventListener(MouseEvent.CLICK, fl_ClickToLoadUnloadSWF_3,false,0,true);

import fl.display.ProLoader;
var fl_ProLoader_3:ProLoader;

var fl_ToLoad_3:Boolean = true;

function fl_ClickToLoadUnloadSWF_3(event:MouseEvent):void
{
//ADDED APR02 START
    fl_ProLoader_3.contentLoaderInfo.addEventListener(Event.INIT, childInitHandler);
    fl_ProLoader_3.load(new URLRequest("myths/myth_aboriginal.swf"));
//ADDED APR02 END

if(fl_ToLoad_3)
{
    fl_ProLoader_3 = new ProLoader();
    fl_ProLoader_3.load(new URLRequest("myths/myth_aboriginal.swf"));
    addChild(fl_ProLoader_3);
    fl_ProLoader_3.x = 114;
    fl_ProLoader_3.y = 41;
}
else
{
removeChild(fl_ProLoader_3);
fl_ProLoader_3.unloadAndStop();
fl_ProLoader_3 = null;
}
// Toggle whether you want to load or unload the SWF
fl_ToLoad_3 = !fl_ToLoad_3;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:36:03.540

你可以

1) 使用 MovieClip 类中定义的未记录的 addFrameScript 函数在子 SWF 的最后一帧上放置回调。如果您无法控制加载的 SWF 中的代码，这很有用。

addFrameScript() 具有以下签名：

```
addFrameScript(frameNumber, callback); //frameNumber is zero-based (unlike in the Flash authoring suite, here you would enter 0 to refer to the first frame, and 1 for the second.) 
```

在父 SWF 中，添加以下内容：

```
function fl_ClickToLoadUnloadSWF_3(event:MouseEvent):void {
    ...
    fl_ProLoader_3.contentLoaderInfo.addEventListener(Event.INIT, childInitHandler);
    fl_ProLoader_3.load(new URLRequest("myths/myth_aboriginal.swf"));
    ...
}

function childInitHandler(event:Event):void {
    MovieClip(fl_ProLoader_3.content).addFrameScript(MovieClip(fl_ProLoader_3.content).totalFrames-1, unloadChild);
}

function unloadChild() {
    fl_ProLoader_3.unloadAndStop();
} 
```

如果您担心 addFrameScript 消失 - 不要担心。当您将代码放在时间轴上时，所有这些代码实际上都会编译到文档类中的函数中，并通过 addFrameScript 添加帧侦听器。

请记住定义函数*unloadChild()*。

```
function unloadChild():void {
    fl_ProLoader_3.unloadAndStop();
} 
```

-或者-

2) 当它到达最后一帧时，从加载的 SWF 中调度一个事件。

在子 SWF 的最后一帧中：

```
this.dispatchEvent(new Event("lastFrameReached")); 
```

在父 SWF 中，添加以下内容：

```
fl_ProLoader_3.content.addEventListener("lastFrameReached", unloadChild); 
```

-或者-

3) 订阅孩子的 ENTER_FRAME 事件并检查孩子是否在最后一帧。

在父 SWF 中，添加以下内容：

```
fl_ProLoader_3.content.addEventListener(Event.ENTER_FRAME, checkIfEnded);

function checkIfEnded(event:Event):void {
    if (fl_ProLoader_3.content.currentFrame == fl_ProLoader_3.content.totalFrames) {
        unloadChild();
    }
} 
```

我个人更喜欢 addFrameScript - 在我看来是一个更干净的解决方案。回调运行一次，您无需轮询，也无需修改子 SWF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:08:19.950

有很多方法可以解决这个问题，并且已经被问过很多次......

*   [在子 swf 的最后一帧卸载子 swf](https://stackoverflow.com/questions/4115373/unload-child-swf-on-last-frame-of-child-swf)
*   [当外部 SWF 到达第 X 帧时，如何卸载它？](https://stackoverflow.com/questions/3668630/when-external-swf-has-reached-frame-x-how-do-i-unload-it?rq=1)

也就是说，您无需在子 swf 上创建事件侦听器即可解决此问题的一种方法是定期检查子 swf 的当前帧。如果它是 swf 上的最后一个，则调用 unload 方法。

```
// once every second, indefinitely.
var tick:Timer = new Timer(1000, 0);
tick.addEventListener(TimerEvent.TIMER, checkSWF);
tick.start();

//Load something to the stage.
var loader:Loader = new Loader();
loader.load(new URLRequest("child.swf")); 
addChild(loader);

function checkSWF(e:Event):void {
    if (loader.content.currentFrame == loader.content.totalFrames) {
        tick.stop(); // stop the timer
        loader.unloadAndStop();
    }
} 
```

# .net - .NET 4 是否更改了证书请求帧在 TLS 中的回答方式

> ID：15705726
> 
> 赞同：2
> 
> 时间：2013-03-29T14:54:35.693
> 
> 标签：.net, ssl, .net-4.0

我正在连接到托管在 Win2008 (IIS7) 中的 Web 服务，需要基于证书的相互身份验证。当在 .NET 2.0 运行时上运行的客户端调用该服务时，操作会失败并显示 403。如果我在wireshark 中检查请求，我看到客户端正在使用证书帧响应**证书****请求**帧，但没有证书在该框架中指定。**查看证书请求**中服务器提供的 CA 证书列表****客户端证书使用的 CA 不存在。这似乎是有道理的，因为如果服务不信任它，发送证书的意义何在。但是，当我使用针对 .NET 4.0 运行时重新编译的工具进行同样的调用时，行为是不同的。客户端的**证书**框架确实包含它配置使用的证书。我在[MSDN](http://msdn.microsoft.com/en-us/library/ms171868%28v=vs.100%29.aspx#networking)上看到对 SslStream 进行了更改，这就是我遇到的问题吗？不同的运行时版本对同一个服务端点的行为不同，这是相当令人不安的。****

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T19:46:36.617

是的，运行时的两个版本之间的行为确实发生了变化。细微的变化在于客户端处理证书请求帧的方式。[我们遇到的问题是，由于根证书更新错误](http://blogs.technet.com/b/windowsserver/archive/2013/01/12/fix-available-for-root-certificate-update-issue-on-windows-server.aspx)，服务器在其受信任的根存储中拥有过多的 CA问题。这导致在证书请求帧的证书数组中返回可信 CA 的子集。由于返回 CA 列表是一个适当的子集，它包括在某些请求中而不是在其他请求中签署客户端证书的根。.NET 2.0 客户端通过不包含服务器提供的受信任权限集之外的证书来正确遵守 TLS 规范。.NET 4.0 客户端尊重它的配置方式，并提供了通过 WCF 配置指定的客户端证书。****

# java - 调用persist（）时：“未初始化的代理传递给persist（）”

> ID：15705729
> 
> 赞同：2
> 
> 时间：2013-03-29T14:54:42.600
> 
> 标签：java, hibernate, jpa

调用 EntityManager.persist() 时，出现错误：

```
javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: uninitialized proxy passed to persist()
        at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:630)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:219)
        at fr.u2m.dao.jpa.GenericDaoJPAImpl.persist(GenericDaoJPAImpl.java:60)
        at fr.u2m.exposium.cms.service.dao.AdminServiceDAO.creerSiteProd(AdminServiceDAO.java:1047)
        at fr.u2m.exposium.cms.service.AdminService.enregistrerSiteProd(AdminService.java:731)
        at fr.u2m.exposium.cms.action.AdminAction.sauverPublication(AdminAction.java:673)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:270)
        at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:187)
        at fr.u2m.exposium.cms.action.AdminAction.execute(AdminAction.java:1458)
        at fr.u2m.struts.OpenViewRequestProcessor.processJpaActionPerform(OpenViewRequestProcessor.java:270)
        at fr.u2m.struts.OpenViewRequestProcessor.processActionPerform(OpenViewRequestProcessor.java:115)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
        at fr.u2m.struts.OpenViewRequestProcessor.process(OpenViewRequestProcessor.java:230)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.filter.MultiTabSessionFilter.doFilter(MultiTabSessionFilter.java:75)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.filter.MonitoringFilter.doFilter(MonitoringFilter.java:54)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.util.auditing.AuditingFilter.doFilter(AuditingFilter.java:44)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.util.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:71)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.PersistentObjectException: uninitialized proxy passed to persist()
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:609)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:601)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:431)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:265)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:131)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:87)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:609)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:601)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:296)
        at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:242)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:219)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:456)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:334)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:131)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:87)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:609)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:601)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:431)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:265)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:131)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:87)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:38)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:618)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:592)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:596)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:213)
        ... 59 more
javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: uninitialized proxy passed to persist()
        at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:630)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:219)
        at fr.u2m.dao.jpa.GenericDaoJPAImpl.persist(GenericDaoJPAImpl.java:60)
        at fr.u2m.exposium.cms.service.dao.AdminServiceDAO.creerSiteProd(AdminServiceDAO.java:1047)
        at fr.u2m.exposium.cms.service.AdminService.enregistrerSiteProd(AdminService.java:731)
        at fr.u2m.exposium.cms.action.AdminAction.sauverPublication(AdminAction.java:673)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:270)
        at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:187)
        at fr.u2m.exposium.cms.action.AdminAction.execute(AdminAction.java:1458)
        at fr.u2m.struts.OpenViewRequestProcessor.processJpaActionPerform(OpenViewRequestProcessor.java:270)
        at fr.u2m.struts.OpenViewRequestProcessor.processActionPerform(OpenViewRequestProcessor.java:115)
        at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
        at fr.u2m.struts.OpenViewRequestProcessor.process(OpenViewRequestProcessor.java:230)
        at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
        at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.filter.MultiTabSessionFilter.doFilter(MultiTabSessionFilter.java:75)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.filter.MonitoringFilter.doFilter(MonitoringFilter.java:54)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.viparis.cms.util.auditing.AuditingFilter.doFilter(AuditingFilter.java:44)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at fr.u2m.util.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:71)
        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.PersistentObjectException: uninitialized proxy passed to persist()
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:609)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:601)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:431)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:265)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:131)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:87)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:609)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:601)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascadeCollectionElements(Cascade.java:296)
        at org.hibernate.engine.Cascade.cascadeCollection(Cascade.java:242)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:219)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:456)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:334)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:131)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:87)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:609)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:601)
        at org.hibernate.engine.EJB3CascadingAction$1.cascade(EJB3CascadingAction.java:30)
        at org.hibernate.engine.Cascade.cascadeToOne(Cascade.java:268)
        at org.hibernate.engine.Cascade.cascadeAssociation(Cascade.java:216)
        at org.hibernate.engine.Cascade.cascadeProperty(Cascade.java:169)
        at org.hibernate.engine.Cascade.cascade(Cascade.java:130)
        at org.hibernate.event.def.AbstractSaveEventListener.cascadeBeforeSave(AbstractSaveEventListener.java:431)
        at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:265)
        at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:181)
        at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:121)
        at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
        at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:131)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:87)
        at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:38)
        at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:618)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:592)
        at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:596)
        at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:213)
        ... 59 more 
```

显然，在`DefaultPersistEventListener.onPersist()`. 我坚持一个网站实体，如果与实体关联的 LazyInitializer 未初始化，则会引发此异常。

[http://www.jarvana.com/jarvana/view/org/hibernate/hibernate/3.1/hibernate-3.1-sources.jar!/org/hibernate/event/def/DefaultPersistEventListener.java?format=ok](http://www.jarvana.com/jarvana/view/org/hibernate/hibernate/3.1/hibernate-3.1-sources.jar!/org/hibernate/event/def/DefaultPersistEventListener.java?format=ok)

我不知道为什么会这样。任何的想法？

编辑：

在我的 web.xml 中，我有一个 hibernateFilter：

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>sessionFactoryAdmin</param-value>
    </init-param>
    <init-param>
        <param-name>flushMode</param-name>
        <param-value>AUTO</param-value>
    </init-param>
</filter>

<filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:30:17.333

尝试在您的 web.xml 中添加来自 spring 的 OpenEntityManagerInViewFilter

```
<filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>
        org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
    <init-param>
        <param-name>entityManagerFactoryBeanName</param-name>
        <param-value>entityManagerFactory</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/services/*</url-pattern>
</filter-mapping> 
```

# jquery - 如何使用 jQuery 制作 CSS3 动画？

> ID：15705730
> 
> 赞同：-3
> 
> 时间：2013-03-29T14:54:43.600
> 
> 标签：jquery, css, animation

我有简单的 css3 动画：

```
@keyframes vlogo {
    0% {
        transform: rotateX(90deg);
    }
    50%{
        transform: rotateX(200deg)
    }
    100% {
        transform: rotateX(360deg);
    }
} 
```

如何用 jquery animate() 运行它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:56:37.217

jQuery`animate`不使用 CSS 动画。如果要使用 jQuery 应用 CSS 动画，则需要在元素上切换类，其中类是用动画定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:56:57.060

jQuery 动画与 CSS 动画完全不同。您所要做的就是为元素添加 CSS 属性，因此您应该这样做：

`$(".myelement").css('animation','vlogo 5s');`

# asp.net - 当两台计算机上的 SQL Server Express 实例不同时，在连接字符串中定义数据源

> ID：15705731
> 
> 赞同：0
> 
> 时间：2013-03-29T14:54:46.393
> 
> 标签：asp.net, sql-server, asp.net-mvc, sql-server-express

我和我的同事一起研究 ASP.NET MVC 解决方案。每个人都在自己的电脑上工作。我的 SQL Server Express 实例称为`SQLEXPRESS`，而他的实例是默认（本地）实例。

我的连接字符串`web.config`是这样的：

```
<add name="Prog.Models.BreezeContext" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=Prog;Integrated Security=True"/> 
```

这时候我同事需要把连接字符串改成这样：

```
<add name="Prog.Models.BreezeContext" providerName="System.Data.SqlClient" connectionString="Data Source=(local);Initial Catalog=Prog;Integrated Security=True"/> 
```

您会注意到数据源中的差异：`.\SQLEXPRESS`<>`(local)`

**我的问题**：我们如何才能避免在每次运行应用程序时更改连接字符串？我不想卸载/重新安装我的 SQL Server Express 以获得本地实例。我想知道是否还有其他选择。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T17:58:44.143

您可以创建两个特定于每台机器的配置文件，并使用预构建脚本来确定使用哪一个。

例如，您可以有两个connectionstrings.config 文件，connectionstrings.bronzato.config 和connectionstrings.colleague.config，每个都有特定于环境的设置。

在预构建脚本中，您可以查找机器名称环境变量并将文件复制到 connectionstrings.config。这样，您可以拥有多个配置文件，系统将根据环境使用正确的配置文件。

您还可以创建单独的配置设置并使用它来确定在预构建脚本中使用哪个文件。

# asp.net-mvc - 将 MVC 路径映射到根 .cshtml 文件

> ID：15705732
> 
> 赞同：0
> 
> 时间：2013-03-29T14:54:46.877
> 
> 标签：asp.net-mvc, asp.net-mvc-4, single-page-application

我正在使用 MVC+ServiceStack 开发单页应用程序。我想要做的是实现一个“管理”站点，它使用与主站点不同的一组资源和主题。（我猜这是一个两页的应用程序）

我想要做的是使用 index.cshtml 作为主站点，这已经完成了。我想做的第二件事是在根文件夹中有一个 admin.cshtml 文件，并将站点路径“~/admin.cshtml”映射到它。

这可以做到吗？

约束：

*   没有一个 cshtml 页面有控制器
*   两者都位于根文件夹中
*   映射路径不应包含文件扩展名，例如它应该是[http://mysite.com/admin](http://mysite.com/admin)，而不是[http://mysite.com/admin.cshtml](http://mysite.com/admin.cshtml)

谢谢

# asp.net - 如何检测浏览器是否以兼容模式打开？

> ID：15705733
> 
> 赞同：-2
> 
> 时间：2013-03-29T14:54:49.477
> 
> 标签：asp.net, html, css, ie-compatibility-mode

如何检测浏览器是否以兼容模式打开？我必须使用不同的 css 来实现兼容性和非兼容模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:00:56.623

是的，通常你必须为你的css中的不同浏览器编写不同的代码。例如，如果它适用于 Mozilla，它可能不一定适用于 Internet Explorer。

试试看这个：[浏览器兼容性问题。在 Google Chrome 中看起来不错，但在 IE 或 Mozilla 中看起来不好](https://stackoverflow.com/questions/4121243/broswser-compatibility-problems-looks-good-in-google-chrome-but-not-in-ie-or-mo)

# jquery - 为什么此 slideToggle 需要单击 2 次才能激活？

> ID：15705735
> 
> 赞同：0
> 
> 时间：2013-03-29T14:54:59.020
> 
> 标签：jquery

我试图在单击#jump 时使此导航栏滑出，但我必须单击它两次才能使其工作。我尝试在不改变高度的情况下使用 slideToggle，但 display: hidden 出于某种原因在#nav a 上不起作用。

```
$(document).ready(function () {
            $('#jump').click(function(){
                $('nav a').slideToggle(function () {
                    $(this).height("63px");
                });
            });
        }); 
```

# wcf - WCF REST 自托管 400 错误请求

> ID：15705744
> 
> 赞同：1
> 
> 时间：2013-03-29T14:55:34.320
> 
> 标签：wcf, rest, self-hosting

我在使用自托管 WCF REST 服务时遇到问题。

当我尝试通过浏览器或 Fiddler 发出 GET 时，我收到 400 Bad Request。跟踪正在报告 XmlException 的内部异常“无法读取消息正文，因为它是空的。”

我在 app.config 中没有任何配置（我需要任何配置吗？）。我试过把WebServiceHost改成ServiceHost，返回WSDL，但是操作还是返回400。

我在这里想念什么？

```
// Add Reference to System.ServiceModel and System.ServiceModel.Web
using System;
using System.Diagnostics;
using System.ServiceModel;
using System.ServiceModel.Description;
using System.ServiceModel.Web;

namespace WCFRESTTest
{
    class Program
    {
        static void Main(string[] args)
        {
            var baseAddress = new Uri("http://localhost:8000/");
            var host = new WebServiceHost(typeof(RestService), baseAddress);

            try
            {
                host.AddServiceEndpoint(typeof(IRestService), new WSHttpBinding(), "RestService");

                var smb = new ServiceMetadataBehavior();
                smb.HttpGetEnabled = true;
                host.Description.Behaviors.Add(smb);

                host.Open();
                Console.WriteLine("Service Running.  Press any key to stop.");
                Console.ReadKey();
            }
            catch(CommunicationException ce)
            {
                host.Abort();
                throw;
            }
        }
    }

    [ServiceContract]
    public interface IRestService
    {
        [OperationContract]
        [WebGet(UriTemplate = "Test")]
        bool Test();
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class RestService : IRestService
    {
        public bool Test()
        {
            Debug.WriteLine("Test Called.");
            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:27:56.403

当您使用 时`WebServiceHost`，您通常不需要添加服务端点 - 它会添加一个具有使其成为“Web HTTP”（又名 REST）端点（即不使用 SOAP 和您可以使用 Fiddler 等工具轻松消费，这似乎是您想要的）。此外，[Web HTTP 端点未在 WSDL 中公开](http://blogs.msdn.com/b/carlosfigueira/archive/2012/03/26/mixing-add-service-reference-and-wcf-web-http-a-k-a-rest-endpoint-does-not-work.aspx)，因此您无需添加`ServiceMetadataBehavior`任何一个。

现在解释为什么它不起作用 - 发送一个 GET 请求`http://localhost:8000/Test`应该起作用 - 在下面的代码中它确实起作用。尝试运行此代码，并使用 Fiddler 发送您之前发送的请求，以查看差异。那应该指出你有什么问题。

```
public class StackOverflow_15705744
{
    [ServiceContract]
    public interface IRestService
    {
        [OperationContract]
        [WebGet(UriTemplate = "Test")]
        bool Test();
    }

    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class RestService : IRestService
    {
        public bool Test()
        {
            Debug.WriteLine("Test Called.");
            return true;
        }
    }

    public static void Test()
    {
        var baseAddress = new Uri("http://localhost:8000/");
        var host = new WebServiceHost(typeof(RestService), baseAddress);

        // host.AddServiceEndpoint(typeof(IRestService), new WSHttpBinding(), "RestService");

        // var smb = new ServiceMetadataBehavior();
        // smb.HttpGetEnabled = true;
        // host.Description.Behaviors.Add(smb);

        host.Open();

        WebClient c = new WebClient();
        Console.WriteLine(c.DownloadString(baseAddress.ToString().TrimEnd('/') + "/Test"));

        Console.WriteLine("Service Running.  Press any key to stop.");
        Console.ReadKey();
    }
} 
```

# python - 如何使 Tkinter 列表框适合内容

> ID：15705745
> 
> 赞同：6
> 
> 时间：2013-03-29T14:55:45.373
> 
> 标签：python, listbox, tkinter

我正在使用下面的代码将字符串添加到列表框中。当我运行代码并打开窗口时，由于窗口不够大，较长的字符串会被剪掉（见截图）。我曾尝试使窗口可调整大小并添加滚动条，但我想知道是否有一种方法可以自动调整大小以适应内容。

```
master = tk.Tk()
listbox = tk.Listbox(master, selectmode=tk.SINGLE)

games = ["Garry's Mod", "Mount and Blade: Warband", "Tekkit"]
for game in sorted(games):
    listbox.insert(tk.END, game)

button = tk.Button(master, text="Execute", command=execute)

listbox.pack()
button.pack()
tk.mainloop() 
```

![剪辑列表框示例](../Images/2ddb37a1668ba60b43ce5c4beb7daafc.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-10-22T09:21:29.260

重置列表框宽度对我有用。我使用了遗忘的答案，并注意到宽度始终为零。

```
listbox = tk.Listbox(master, selectmode=tk.SINGLE)
listbox.config(width=0) 
```

我还建议在重新加载列表内容后重置根窗口几何图形。否则，如果用户手动扩展窗口，窗口将停止适应其内容的大小。

```
root.winfo_toplevel().wm_geometry("") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-12T07:01:31.450

只需给出宽度和高度 0 如下

```
listbox.config(width=0,height=0) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T22:03:55.190

[`tkListAutoWidth.py`](https://web.archive.org/web/20170207151435id_/http://svn.effbot.org/public/stuff/sandbox/tkinter/tkListAutoWidth.py)展示了一种方法。

编辑：

所以你可能有一些类似的东西，

```
import tkinter as tk
from tkinter import font

class NewListbox(tk.Listbox):

    def autowidth(self, maxwidth=100)
        autowidth(self, maxwidth)

def autowidth(list, maxwidth=100):
    f = font.Font(font=list.cget("font"))
    pixels = 0
    for item in list.get(0, "end"):
        pixels = max(pixels, f.measure(item))
    # bump listbox size until all entries fit
    pixels = pixels + 10
    width = int(list.cget("width"))
    for w in range(0, maxwidth+1, 5):
        if list.winfo_reqwidth() >= pixels:
            break
        list.config(width=width+w)

if __name__ == "__main__":

    master = tk.Tk()
    listbox = NewListbox(master, selectmode=tk.SINGLE)

    # ...
    # ...
    keys = serverDict.keys()
    for key in sorted(keys):
        listbox.insert("end", key)

    listbox.pack()

    button = tk.Button(master, text="Execute", command=execute)
    button.pack()

    listbox.autowidth()

    master.mainloop() 
```

# apache - 用于匹配不以特定前缀开头的 URL 的 RewriteRule

> ID：15705749
> 
> 赞同：1
> 
> 时间：2013-03-29T14:55:48.900
> 
> 标签：apache, .htaccess

我有以下`.htaccess`代码：

```
RewriteCond %{QUERY_STRING} (^|&)tmpl=(component|system) [NC]
RewriteRule .* - [L]
RewriteCond %{QUERY_STRING} (^|&)t(p|emplate|mpl)= [NC]
RewriteRule .* - [F] 
```

当我访问时，`/administrator/index.phpoption=com_component&task=ajax&format=raw&template=something`我收到 403 错误。

我应该如何重构这 4 行以满足第二个条件（在所有 URL 中阻止`?tp=`等`?template=`，但以 开头`/administrator`？）

所以`/administrator/index.php?option=com_component&task=ajax&format=raw&template=something`应该可以访问，`/index.php?option=com_component&template=something`不应该。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:09:56.870

您可以在最后一条规则中使用否定的[前瞻性断言：](http://www.regular-expressions.info/lookaround.html)

```
RewriteCond %{QUERY_STRING} (^|&)tmpl=(component|system) [NC]
RewriteRule .* - [L]
RewriteCond %{QUERY_STRING} (^|&)t(p|emplate|mpl)= [NC]
RewriteRule ^(?!administrator/).+ - [F] 
```

# c# - 多线程并行编程示例

> ID：15705752
> 
> 赞同：4
> 
> 时间：2013-03-29T14:56:00.733
> 
> 标签：c#, multithreading, parallel-processing

所以我想我理解并行编程和多线程的概述概念，但我想知道是否可以实现多进程多线程应用程序。如果这是有道理的，那么在查看多线程的一些描述时，它可以在一个处理器上运行，但是如果您可以使用并行处理多个内核，您还可以在多个内核上进行多线程处理吗？如果可以的话，有人可以给我看一个简单的例子`for loop`吗？

多线程示例：

```
public class Test
{
    static void Main()
    {
        Counter foo = new Counter();
        ThreadStart job = new ThreadStart(foo.Count);
        Thread thread = new Thread(job);
        thread.Start();

        for (int i=0; i < 5; i++)
        {
            Console.WriteLine ("Main thread: {0}", i);
            Thread.Sleep(1000);
        }
    }
}

public class Counter
{
    public void Count()
    {
        for (int i=0; i < 10; i++)
        {
            Console.WriteLine ("Other thread: {0}", i);
            Thread.Sleep(500);
        }
    }
} 
```

并行示例：

```
int n = ...
Parallel.For(0, n, i =>
{
   // ... 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T14:58:48.973

Distribution of tasks to available logical CPUs is the task of the operating system. If you write a multithreaded application the OS will manage distributing the various threads to the hardware processors in the system. There is nothing you have to do as a programmer to make this happen.

You can, however, manage this directly - associating a specific thread to run on a specific core or subset of logical processors, but generally this is less efficient than allowing the OS to manage hardware allocation since it has broader awareness of all processes running on the system and in most all cases handles the allocation in the most efficient way.

In brief, if your application is multithreaded then it *will* run on as many available cores as the system provides.

# extjs - 子窗口打开时禁用父窗口extjs 4

> ID：15705753
> 
> 赞同：1
> 
> 时间：2013-03-29T14:56:21.027
> 
> 标签：extjs, parent-child

在我的应用程序中，我有一个带有打开另一个窗口的按钮的主窗口。如何在子窗口打开之前禁用父窗口？

点击监听器中的代码：

```
var editWindow = new Ext.Window({
                            id: 'editWindow',
                            width: 400,
                            layout: {
                                type: 'vbox',
                                align: 'stretch'
                            },
                            items: [ editPanel ],
                        });
                        editWindow.show(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:22:46.653

使用对象`modal: true`上的配置`Ext.Window`。

如果您尝试完全禁用父窗口，则可以`disable()`在父视图上使用方法。

# linux - 无法启动声纳 2.8（执行包装器的权限被拒绝）

> ID：15705755
> 
> 赞同：1
> 
> 时间：2013-03-29T14:56:28.373
> 
> 标签：linux, sonarqube, hp-ux

我是 Sonar 的新手，我试图在我的服务器上安装 Sonar 2.8（HP-UX 上的 Linux 64）

当我尝试启动它（sonar.sh start）时，我收到以下消息

```
[myHomeDirectory]/sonar/2.8/bin/linux-x86-64/./wrapper: Execute permission denied. 
```

让我发疯的是我已经把整个包放在 777 权限上，所以我真的不明白到底发生了什么。

有人可以帮忙吗？

提前致谢 ！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-05-26T12:24:33.540

我遇到了类似的问题，因此我来这篇文章。我试图在 Docker 容器中安装 SonarQube 的扫描仪，但是当我运行它时，我得到了以下内容：

```
/root/sonar-scanner-2.6.1/bin//sonar-scanner: 103: exec: : Permission denied 
```

我已经为整个 /root/ 文件夹授予了所有权限，所以我对被拒绝的权限感到好奇。最后对我来说，这与权限无关。我只需要 RTFM。

Sonar-scanner 需要 JRE 才能运行，而我的 Docker 容器没有安装。因此，如果其他人与我做同样的事情，我希望这可以为您节省几分钟的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:04:51.267

不太相信您启动它的方式。为了让 Sonar 运行，我建议在 tomcat 上运行它，前提是您只想使用 Sonar 附带的默认数据库。步骤是：

*   安装 Tomcat

*   导航到`/war`声纳实例中的目录并运行命令：`$] ./build-war.sh`.

完成后，您应该会在同一目录中看到一个 sonar.war 文件。

*   重命名战争文件 ROOT.war 而不是 sonar.war：`$] mv sonar.war ROOT.war`

这确保了声纳在 tomcat 的默认端口上运行。

*   将 war 文件移动到 tomcat webapps 目录中：`$] mv ROOT.war /tomcathome/webapps`

*   导航到 tomcat`/bin`文件夹并运行命令`$] ./catalina.sh start`

*   在您的浏览器中输入您的服务器主机名，最后使用端口：8080，您应该会看到声纳正在运行。

不过，这些步骤将使声纳在默认数据库上运行。如果您想要一个 MySQL 数据库，我会查看有关如何执行此操作的声纳教程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:26:59.977

我终于得出结论，二进制文件（包装器）根本没有编译为在 HP-UX 下运行

`file`在Linux 下在包装器上启动命令时，我得到：这与在 Itanium 处理器上运行的 HP-UX 所需的`<ELF-64 executable object file>`不匹配`<ELF-64 executable object file - IA64>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-22T10:21:50.577

请检查您的机器上是否安装了java。在运行 sonar-runner 之前，应该在机器上安装 Java。

使用它来检查 java：java -version

# javascript - Node.js 中的函数参数对象与 Chrome 的 JavaScript 不同

> ID：15705756
> 
> 赞同：7
> 
> 时间：2013-03-29T14:56:35.763
> 
> 标签：javascript, node.js, function

我对 Node.js 函数参数对象感到困惑。

假设我有以下代码：

```
function x() {
  return arguments;
}

console.log(x(1, 2, 3)); 
```

在 chrome 开发人员工具中，它以数组形式返回：

```
[1, 2, 3] 
```

但是我在 node.js 中得到了不同的结果：

```
{ '0': 1, '1': 2, '2': 3 } 
```

怎么会？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T15:08:35.393

您会看到在 Chrome 中既不是在 Node 中也不是在一般的 javascript 中的数组的对象的不同表示形式。

如果你想要一个数组，你可以这样做：

```
var args = Array.prototype.slice.call(arguments, 0); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-29T15:01:01.560

`arguments`是一个实际上不是数组的魔法变量。它的行为类似于 Array，但它没有 Array 所具有的所有功能。

例如，像这样的其他对象`NodeList`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T15:03:41.353

console.log 不是 javascript 的一部分，也不是 v8 的一部分。这就是为什么 chrome 和 node.js 都有自己的 console.log 实现。他们有类似的api，但不一样。节点的 console.log 的文档在这里：[http ://nodejs.org/api/stdio.html](http://nodejs.org/api/stdio.html)

# iphone - 如何检测包含目标操作的“viewcontroller”文件，对应于按钮单击？

> ID：15705759
> 
> 赞同：0
> 
> 时间：2013-03-29T14:56:39.190
> 
> 标签：iphone, ios, objective-c, ipad

在一个 ios 项目中，有很多 viewcontroller 文件，我的很多人开发了一段时间。我启动了模拟器，并导航到各种屏幕。在导航的中间，我想找到在屏幕上按下按钮时将调用哪个操作方法。如何在不分析项目和不使用断点的情况下轻松找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:18:55.170

创建 UIButton 类别并确保它包含在您的目标中：

**UIButton+actionsFinder.h**

```
#import <UIKit/UIKit.h>

@interface UIButton (actionsFinder)

@end 
```

**UIButton+actionsFinder.m**

```
#import "UIButton+actionsFinder.h"

@implementation UIButton (actionsFinder)

-(void)sendAction:(SEL)action to:(id)target forEvent:(UIEvent *)event {
    NSLog(@"%s %d %s %@ %@\n %@\n %@", __FILE__, __LINE__, __PRETTY_FUNCTION__, @"Button clicked!\n", NSStringFromSelector(action), [target description], [event description]);
    [super sendAction:action to:target forEvent:event];
}

@end 
```

当任何按钮发送任何操作时，您将在控制台中看到如下内容：

```
/Users/username/appname/targetname/UIButton+actionsFinder.m 15 -[UIButton(actionsFinder) sendAction:to:forEvent:] Button clicked!

onButton:

<MCViewController: 0x715e280>

<UITouchesEvent: 0x7639f40> timestamp: 23516.9 touches: {( <UITouch: 0x7169240> phase: Ended tap count: 1 window: <UIWindow: 0x754e6d0; frame = (0 0; 320 568); autoresize = W+H; layer = <UIWindowLayer: 0x754e7d0>> view: <UIRoundedRectButton: 0x7161290; frame = (123.5 38; 73 44); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x71613b0>> location in window: {149, 81.5} previous location in window: {149, 81.5} location in view: {25.5, 23.5} previous location in view: {25.5, 23.5} 
```

请注意，您将获得以下信息：

*   目标类**onButton 的选择器名称：**我已声明并链接到按钮 onTouchUpInside 事件操作，实际方法签名看起来像

    `-(IBAction)onButton:(id)button;`

*   显示目标类的目标描述： **MCViewController**

*   触发动作的事件的描述

我正在使用`__FILE_`_, `__LINE__`, `__PRETTY_FUNCTION__`macros' 来查看 NSLog 消息的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:59:49.607

您可以右键单击按钮查看： ![在此处输入图像描述](../Images/460b1d660277a6b0bc43c4c9cbf7555c.png)

哪个选择器被添加到特定的触摸事件。

或`NSLog(@"%s", __PRETTY_FUNCTION__);`在每个函数上打印，因此该日志将在调用该函数时打印函数名称。

# apache-pig - 猪：每行在一个袋子内分组

> ID：15705764
> 
> 赞同：0
> 
> 时间：2013-03-29T14:57:13.613
> 
> 标签：apache-pig

在猪中，我有以下结构：

(1, {(2), (2), (3), (12)})

我想把它变成：

(1, {(2,2), (3,1), (12,1)})

这只是包内的分组和计数：（group_key，count）

我已经通过嵌套在 foreach 中尝试了一些 group，但它不起作用。

我怎么能用猪拉丁做呢？或者我应该自己写一个UDF？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:17:01.490

您可以直接`FLATTEN`拿出袋子，然后重新分组。如果您有很多行，每行都有一个小袋子，这可能会很浪费。在这种情况下，我会推荐一个 UDF。这应该对你有用（未经测试）：

```
DUMP A;
(1, {(2), (2), (3), (12)})
DESCRIBE A;
(x:int, y:bag{})

B = FOREACH A GENERATE x, FLATTEN(y) AS z;
C = GROUP B BY (x, z);
D = FOREACH C GENERATE group.x, group.z, COUNT(B) AS ct;
E = GROUP D BY x;
F = FOREACH E GENERATE group, D.(z,ct); 
```

F 应该是你要找的。

# c - 局部变量 auto int a 和 int a 有什么区别？

> ID：15705771
> 
> 赞同：12
> 
> 时间：2013-03-29T14:57:45.983
> 
> 标签：c

存储类标识符 auto 的用例？我知道默认情况下所有局部变量都是自动的。但是通过显式编写 auto int a 有什么不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T14:58:51.493

严格来说没有区别。

```
{
   auto int a;
   /* ... */
} 
```

和

```
{
   int a;
   /* ... */   
} 
```

是等价的。

通常的做法是不放置说明`auto`符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:01:36.670

有两种可能的情况：

1.  `auto`是默认值，显式添加关键字没有任何作用
2.  `auto`不允许（例如，在全局变量上），在这种情况下添加会`auto`阻止代码编译

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T15:13:37.483

在现代 C（C89、C99、C11）中，`auto`关键字是多余的。除了明确意图（“这是一个非静态变量，我是认真的！”）之外，它不再有任何用途。它是 C 历史的残余，从 B 继承而来，但很像`entry`关键字实际上已经过时了。

我一生中使用过一次。它与隐式 int 一起位于 IOCCC 条目中：

```
 drive () { auto motive; ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-13T06:30:19.570

局部变量和自动变量之间有一点点区别。

> 我们可以`int a=20;`为任何存储类变量创建局部变量，例如`auto int a=20;`or`static int a=20;`但是一旦我们将任何变量指定为 auto ，`auto int a=20;`那么它将永远不会变成其他存储类，例如`static`or`register`等​​等。我们不能像这样写。`static auto int a=20;`其他事情完全一样，就像两者都有内存一样堆栈段。下面是生成相同输出的自动变量的示例。

用于自动变量。

```
#include<stdio.h>
int fun()
{
        auto int a=20;
        printf("%d\n",a);
        a++;
        return 0;
}
int main()
{       
        fun();
        fun();
        return 0;
} 
```

对于局部变量。

```
#include<stdio.h>
int fun()
{
        int a=20;
        printf("%d\n",a);
        a++;
        return 0;
}
int main()
{       
        fun();
        fun();
        return 0;
} 
```

# xml - 记录自定义元素 Zend Log Formatter XML

> ID：15705773
> 
> 赞同：2
> 
> 时间：2013-03-29T14:57:55.430
> 
> 标签：xml, logging, zend-framework2, zend-log

我正在尝试获取有关请求的一些信息，结果应该放在 XML 文件中。我正在使用以下元素：

*   logEntry（根）（默认）
    *   时间戳（默认）（字符串）时间戳
    *   优先级（默认）（字符串）优先级
    *   priorityName (default) (string) 优先级名称
    *   消息（默认）（字符串）消息
    *   uniqueId (new) (string) 唯一 ID
    *   方法（新）（字符串）命名空间\类：：方法名（）
    *   args (new) (string) base64 编码，序列化 func_get_args();

应该：

```
<logEntry><timestamp>2013-03-29T15:47:41+01:00</timestamp><priority>6</priority><priorityName>INFO</priorityName><message>Called</message><uniqueId>564fg56d4g5d4fg5f4g56fg465dfg</uniqueId><method>\Namespace\Controller::methodName</method><args>aa5abc8d6efeabcd7f67cb6a7df6bac5ba7a5fd7a5d6bac67a5bf6abcbb408f098=</args></logEntry> 
```

我读过的文档：http: [//zf2.readthedocs.org/en/latest/modules/zend.log.formatters.html](http://zf2.readthedocs.org/en/latest/modules/zend.log.formatters.html)

不工作的代码：

```
$writer    = new \Zend\Log\Writer\Stream(getenv('LOG_FILE_LOCATION'));
$formatter = new \Zend\Log\Formatter\Xml('logEntry', array(
    'timestamp'    => 'timestamp',
    'priority'     => 'priority',
    'priorityName' => 'priorityName',
    'message'      => 'message',
    'uniqueId'     => 'uniqueId',
    'method'       => 'method',
    'args'         => 'args',
));
$writer->setFormatter($formatter);
$logger = new \Zend\Log\Logger();
$logger->addWriter($writer);

$logger->info('Started', array(
    'uniqueId' => $this->createGuid(),
    'method'   => __METHOD__,
    'args'     => serialize(array(get_class($e))), 
)); 
```

错误：注意：未定义的索引：第 168 行 /var/www/library/Zend/Log/Formatter/Xml.php 中的 uniqueId

Xml.php 的代码 [https://github.com/zendframework/zf2/blob/master/library/Zend/Log/Formatter/Xml.php#L168](https://github.com/zendframework/zf2/blob/master/library/Zend/Log/Formatter/Xml.php#L168)

$event[$fieldKey] 是问题所在。$fieldKey 仅存在于 $event['extra'][$fieldKey] 中。$this->elementMap 是扁平的（没有添加额外的额外数组）。

```
Array
(
    [timestamp] => timestamp
    [priority] => priority
    [priorityName] => priorityName
    [message] => message
    [uniqueId] => uniqueId
    [method] => method
    [args] => args
) 
```

我究竟做错了什么？

我在想这是一个 ZF2 错误...在阅读 Github 上的代码时，我无法找到并检测到额外的字段和键...你们怎么看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T16:08:39.800

问题是 Xml 格式化程序忽略了`extra`传递给记录器的数据（记录器希望它是一个数组，格式化程序隐式忽略任何不是空字符串、具有 __toString() 方法或标量的对象。解决方案似乎是编写您自己的处理器以将额外数据与从记录器传递的常规事件数据合并。

这是一个非常简单的示例，尽管您可能希望对在您自己的函数中的额外数据数组中传递的允许键值进行一些检查，但这将用于演示目的。（你也可以为这个班级想一个更好的名字：D）

```
<?php
namespace Application\Log\Processor;

use Zend\Log\Processor\ProcessorInterface;

class Merger implements ProcessorInterface
{

    /**
     * Merge extra data into the event data
     * @param array $event event data
     * @return array event data
     */
    public function process(array $event)
    {
        if (!isset($event['extra'])) {
            $event['extra'] = array();
        }
        return array_merge($event, $event['extra']);
    }
} 
```

要实现，请按照您在第一个非工作代码示例中所做的操作，但只需传入您要使用的根元素名称

```
$writer    = new \Zend\Log\Writer\Stream(getenv('LOG_FILE_LOCATION'));
$formatter = new \Zend\Log\Formatter\Xml('logEntry');
$writer->setFormatter($formatter);
$logger = new \Zend\Log\Logger();
$logger->addWriter($writer);

// add the processor into the mix
$processor = new \Application\Log\Processor\Merger;
$logger->addProcessor($processor);

$data = array(
    'uniqueId' => $this->createGuid(),
    'method'   => __METHOD__,
    'args'     => serialize(func_get_args()), 
);
$logger->info('Testing', $data); 
```

# kinect - 使用 kinect 骨架 - 对 wpf 绘图不感兴趣

> ID：15705775
> 
> 赞同：-1
> 
> 时间：2013-03-29T14:58:09.710
> 
> 标签：kinect

再会，

我想借此机会向 stackoverflow.com 的人们表示衷心的感谢。

在过去的一年里，我一直是编码 .net 的新手，我一直发现 stakoverflow 是学习知识的绝佳基础。在过去的几周里，我深入研究了一个语音识别项目，我将在即将发布的媒体浏览器 3 中使用它。最初，我的想法是构建一个识别器并让它控制媒体。然而，当我通过不同的命名空间进行语音识别时，它把我带入了 Microsoft Kinect 传感器的领域。我使用 kinect 设备的次数越多，我就越想使用它提供的一些骨骼跟踪功能。这引出了我的问题。

我对构建一个显示 kinect 所看到内容的窗口的 WPF 应用程序不感兴趣。这是表单应用程序的一部分，我想在其中只支持三个手势中的两个。

这个想法是让它观察三个手势并模拟键盘上的按键。所以首先我在识别器的音频之前启用骨架框架，因为我在这里读到过在音频由于某种原因取消音频后启用骨架。

然后我将一些事件处理程序添加到我的表单中。

我添加了skeletonFrameReady 事件。
我想我的主要问题是，我在骨骼跟踪方面是否走在正确的轨道上？是否可以在不尝试绘制骨架的情况下从表单应用程序中执行此操作？

再次感谢您，我希望我有道理，对不起我的无知。

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:22:44.177

这当然是可能的。对于手势识别，您可以比较关节的位置（在`skeletonFrameReady`事件调用的方法中，每秒调用几次）。

如果你想识别复杂的手势（比如挥手），我建议你看看这个页面[http://blogs.msdn.com/b/mcsuksoldev/archive/2011/08/08/writing-a-gesture -service-with-the-kinect-for-windows-sdk.aspx](http://blogs.msdn.com/b/mcsuksoldev/archive/2011/08/08/writing-a-gesture-service-with-the-kinect-for-windows-sdk.aspx)并在那里下载示例代码。（隐藏在最后一段中：）

主要思想是检查具有正确顺序的预定义手势段（如果段1成功，查看段2。如果段2暂停，再次查看段2，直到成功或失败）。

希望这可以帮助。

# .htaccess - 重写掩码子域

> ID：15705776
> 
> 赞同：0
> 
> 时间：2013-03-29T14:58:12.270
> 
> 标签：.htaccess, domain-masking

我有一个`CNAME`向外部站点添加域掩码的条目。

`CNAME`掩码映射到我的`member.mydomain.com`域。

在`member.mydomain.com`有一个我想重写的子文件夹。

所以问题是我该如何`member.mydomain.com/subfolder`重写`mydomain.com/subfolder`？

我已经尝试了很多变化，但绝对没有运气。我想知道这是否是一个问题，因为它针对的是屏蔽域。

任何人都可以提供的任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:07:15.567

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^member\.(mydomain\.com)$ [NC]
RewriteRule ^(subfolder)(/.*|)$ http://%1/$1$2 [NC,R=301,L] 
```

# bash - AWK：变量错误

> ID：15705779
> 
> 赞同：0
> 
> 时间：2013-03-29T14:58:20.440
> 
> 标签：bash, variables, awk

我正在编写一个 bash 脚本，并且有一些我想传递给 awk 调用的变量。终端响应消息“awk：第 1 行：< 处或附近的语法错误”我有另一个变量与这个类似，我不确定失败这个失败但另一个没问题

这是失败的变量：

```
helpInsert="\
\t<help name=\"vsss.status\"><![CDATA[Displays the active configuration.]]></help>\n\
\t<help name=\"vsss.general\"><![CDATA[Allows configuration of general video server parameters. <br />\n\
\t\tPressing restore defaults will reset the working configuration, but will not affect the active configuration. <br />\n\
\t\tPressing activate will make your working configuration into the active configuration. ]]></help>\n\
\t<help name=\"vsss.conf2\"><![CDATA[Allows editing of the working configuration. <br />\n\
\t\tSettings are not saved unless submit button is pressed]]></help>\
" 
```

这是一个通过的变量样本，其余的类似：

```
menuInsert="\
\t<subpageLvl1>\n\
\t\t<name>VSSS</name>\n\
\t\t<php></php>\n\
\t\t<login>0</login>\n\
\t\t<subpagesLvl2>\n\
\t\t\t<subpageLvl2>\n\
\t\t\t\t<name>Status</name>\n\
\t\t\t\t<php>vsss.status</php>\n\
\t\t\t\t<xml>vsss.xml</xml>\n\
\t\t\t\t<xsd>vsss.xsd</xsd>\n\
\t\t\t\t<login>0</login>\n\
\t\t\t</subpageLvl2>\n\
\t</subpageLvl1>\
" 
```

这是电话：

```
awk -v appName=$appName -v insert=$helpInsert 'awk script here' filename 
```

我知道问题出在变量而不是 awk 脚本上。我可能在某个地方错过了逃生机会，但我似乎找不到。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:08:44.500

您需要使用双引号来保护变量不被 shell 扩展：

```
awk -v appName="$appName" -v insert="$helpInsert" 'awk script here' filename 
```

# regex - 斜线之间所有内容的正则表达式第一个实例

> ID：15705781
> 
> 赞同：-5
> 
> 时间：2013-03-29T14:58:22.550
> 
> 标签：regex

**/猪/拉丁/**

这是它的上下文： [http ://www.mysite.com/pig/latin/](http://www.mysite.com/pig/latin/)

我有一个包含 /pig/latin/ 的值，或者它可能是 /pig/latin/is/great

我只需要猪的部分。这是怎么做到的？你能解释一下这个模式吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:02:52.643

这应该与斜杠之间的第一个文本实例相匹配，假设问题没有问题：

```
(?<=\/)[^\/]+(?=\/) 
```

您的正则表达式解析器应该在您的字符串中从左到右移动，并且假设没有标志可以匹配所提供模式的所有实例，则仅匹配第一个实例。前瞻`(?<=...)`和后瞻`(?=...)`符号将匹配提供的字符，但不会在匹配的组中返回它们。的字符类匹配将匹配*除 之外*`[^\/]+`的任何字符的一个或多个实例。 *`/`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:08:13.210

假设只有小写字母，这将提供第一部分。

```
^/([a-z]+)/.* 
```

*   方括号创建一个字符类，其中允许从 a 到 z 的字母范围。
*   之后的 + 表示该类必须有一个或多个实例。
*   圆括号的意思是“捕获这个组”，即这是你想要返回的位。
*   斜杠是您的文字斜杠，有助于将正则表达式定位在您的字符串中。
*   尾随点表示任何字符，其后的星号表示零个或多个前面的表达式......即零个或多个任何字符。
*   开头的 ^ 将正则表达式锚定到字符串的开头...因此，如果此字符串可以出现在字符串中的任何位置，而不仅仅是在开头，则应该删除该位。

根据您的编程语言，可能还需要某种分隔符来表示表达式的开始和结束。

如果您需要除小写字母之外的字符，请将它们添加到字符类中，例如：`^/([a-zA-Z0-9]+)/.*`也允许大写字母和数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T15:08:59.323

假设您匹配以匹配以 / 开头的字符串的第一部分，并将内容拉到下一个 / 那么这应该有效

```
^/([^/]++)/.*+$ 
```

java中的概念证明

```
public static void main(String[] args) {
    final String s = "/pig/latin/";
    final Pattern p = Pattern.compile("^/([^/]++)/.*+$");
    final Matcher m = p.matcher(s);
    m.find();
    System.out.println(m.group(1));
} 
```

输出

```
pig 
```

您可能需要转义其他语言的正斜杠。*

# jquery - HTML5 Drag-And-Drop DataTransfer：有时在文件中有时在项目中拖动数据

> ID：15705785
> 
> 赞同：2
> 
> 时间：2013-03-29T14:58:33.397
> 
> 标签：jquery, html, jsf, primefaces, drag-and-drop

我编写了一个脚本和 html 页面来测试一些拖放功能，其中将文件系统中的文件拖放到我定义的浏览器放置目标中。

在这种环境下，我总是能够访问`event.dataTransfer.files`

然而，我已经将它集成到一个 JSF servlet 中，突然间行为变得不那么一致了。

我现在看到，在 dragover 事件中，文件列在下面`event.dataTransfer.items`但`event.dataTransfer.files`为空。`DataTransferItem`object 似乎引用了 mimeType 但不是数据本身，也不是像 a`File`那样的文件名。然而在 drop 事件中，`event.dataTransfer.files`包含文件。

此外，所有 getAs 方法`DataTransferItem`都返回 null。我可以解决一些问题，因为我只是真的想在 dragover 事件中找出文件类型，但我至少想弄清楚这些特殊行为。

我不确定这种变化是由什么引起的。实际的脚本没有改变，相关的标记都是纯 HTML 而不是 JSF 组件。为什么行为发生了变化？

编辑：可能值得注意的是，我使用的 JSF 实现是 Primefaces，它包含一个 jQuery 版本，它可能比我本周从 jQuery 网站上提取的最新版本更旧。

JS：

```
var CSVParser = (function($) {
  "use strict";

  var module = {

    /**
     * Inspects the file's name and mime-type to determine if it is a CSV file. Does not inspect
     * contents.
     * supports any mime type that contains csv, is comma-separated-values, or is application/vnd.ms-excel
     * @param file - javascript file
     */
    isCSV: function(file) {
      if(file) {
        var mimeType = file.type;
        var name = file.name || ".csv";  //Deal with possibly getting a DataTransferItem instead of File object. Just assume .csv

        var matchStandardMime = mimeType.match(/.*\/csv.*/) !== null || mimeType.match(/comma-separated-values/) !== null;
        var matchExcelMime = mimeType.match(/application\/vnd.ms-excel/) !== null;
        matchExcelMime = matchExcelMime && name.match(/.*\.csv/) !== null;

        return matchStandardMime || matchExcelMime;
      }
    }
  };

  return module;

}(jQuery));

(function($){

  /* Deal with drop-files */

  function getDropbox() {
    return $('.csvDropTarget');
  }

  function getEventFiles(e) {
    var files = e.originalEvent.dataTransfer.files || [];  //jQuery seems to wrap the original event
    var items = e.originalEvent.dataTransfer.items || [];  //jQuery seems to wrap the original event
    e.originalEvent.dataTransfer.dropEffect = 'copy';

    if(files.length > 0) {
        return files;
    } else if (items.length > 0) {
        return items;
    }

    return files;
  }

  function onDragEnter(e) {
    e.stopPropagation();
    e.preventDefault();
  }

  function onDragOver(e) {
    var files = getEventFiles(e);
    var validDrop = false;

    e.stopPropagation();
    e.preventDefault();

    for(var i = 0; i < files.length; i++) {
      if(files[i] && CSVParser.isCSV(files[i])) {
        validDrop = true;
      } else {
        validDrop = false;
        break;
      }
    }
  }

  function onDragLeave(e) { 
    e.stopPropagation();
    e.preventDefault();
  }

  function onDrop(e) {
    var files = getEventFiles(e);
    var file = null;

    e.stopPropagation();
    e.preventDefault();

    // Loop through list of files user dropped.
    for (var i = 0; i < files.length; i++) {
      file = files[i];
      console.log("File type: " + file.type);

      console.log("Is CSV: " + CSVParser.isCSV(file));
    }
  }

  /* Register events and determine functionality */

  $(document).ready(function() {
    var dropbox = getDropbox();

    dropbox.bind("dragenter", onDragEnter);
    dropbox.bind("dragover", onDragOver);
    dropbox.bind("dragleave", onDragLeave);
    dropbox.bind("drop", onDrop);
  });

}(jQuery)); 
```

HTML 片段：

```
<div class="csvDropTarget mainDropTarget">
  <span class="dragDropText">${resourceBundle.csv_drag_prompt}</span>
  <span class="validDropText hidden">${resourceBundle.csv_valid_drag}</span>
  <span class="invalidDropText hidden">${resourceBundle.csv_invalid_drag}</span>
</div> 
```

# c# - 如何在剃刀中转义花括号（例如定义数组）

> ID：15705789
> 
> 赞同：2
> 
> 时间：2013-03-29T14:58:45.287
> 
> 标签：c#, asp.net-mvc, arrays, razor, curly-braces

在 Razor 视图中，我可以轻松定义一个数组

```
@{  
    ViewBag.Title = "_Navigation";
    var foo = new string[0];
} 
```

但是如果我想定义字符串的元素，自然的方式是

```
@{  
    ViewBag.Title = "_Navigation";
    var foo = new string[]{"foo", "bar"};
} 
```

后者不起作用。你能告诉我为什么以及如何正确定义我的 foo-array 吗？

============ 编辑 ============

你是绝对正确的，没有错。我实际使用的代码是

```
@{  
    ViewBag.Title = "_Navigation";
    var action = @ViewContext.RouteData.GetRequiredString("action");  
    var foo = new string[]{"foo", "bar"};
} 
```

不知何故，我有问题的行之前的@符号引起了编译器的抱怨。我不知道为什么 @ 在那里 - 代码不是来自我......好的，它现在可以工作了。

不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:07:46.880

您定义数组的方式没有任何问题。

```
@{
    ViewBag.Title = "_Navigation";
    var foo = new string[]{"foo", "bar"};
}
...
@foreach(var f in foo)
{
    <span>@f</span>
} 
```

印刷

```
<span>foo</span><span>bar</span> 
```

# jenkins - Jenkins - 无法下载升级/插件 - 代理已设置 - 能够在 IE 中通过 http 访问 .hpi

> ID：15705794
> 
> 赞同：7
> 
> 时间：2013-03-29T14:58:55.400
> 
> 标签：jenkins, jenkins-plugins

我从 Jenkins 站点获得了 Windows Native .zip，并将 Jenkins 作为 Windows 服务安装在我的机器（Win 7）上。

漂亮的仪表板已经启动，现在我想下载一些插件/甚至升级版本（第一个），因为几周前我得到了 .zip。

当我尝试升级/下载插件（在管理 Jenkins 下）时，我收到以下错误消息，知道我可能会丢失什么。

在插件的高级选项卡下，我提供了代理服务器和端口。另一点我注意到，当我下载一个显示插件 .hpi 文件链接的插件（并且它失败）时，如果我在 Internet Explorer 中使用该“http://../../.hpi”，它弹出很好（告诉我打开/保存等），所以从某种意义上说，我可以直接访问 .hpi 文件。我可以手动下载 .hpi 文件并将其放在 Jenkins 安装/..各自/../../文件夹下，并在每次安装新/替换现有 .hpi 时重新启动 Jenkins 服务，但我不想这样做那。

**安装插件/升级**

```
Preparation 

    Checking internet connectivity
    Checking update center connectivity
    java.net.ConnectException: Connection refused: connect at java.net.PlainSocketImpl.socketConnect(Native Method) at java.net.PlainSocketImpl.doConnect(Unknown Source) at java.net.PlainSocketImpl.connectToAddress(Unknown Source) at java.net.PlainSocketImpl.connect(Unknown Source) at java.net.SocksSocketImpl.connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at java.net.Socket.connect(Unknown Source) at sun.net.NetworkClient.doConnect(Unknown Source) at sun.net.www.http.HttpClient.openServer(Unknown Source) at sun.net.www.http.HttpClient.openServer(Unknown Source) at sun.net.www.http.HttpClient.(Unknown Source) at sun.net.www.http.HttpClient.New(Unknown Source) at sun.net.www.http.HttpClient.New(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at hudson.model.UpdateCenter$UpdateCenterConfiguration.testConnection(UpdateCenter.java:860) at hudson.model.UpdateCenter$UpdateCenterConfiguration.checkUpdateCenter(UpdateCenter.java:709) at hudson.model.UpdateCenter$ConnectionCheckJob.run(UpdateCenter.java:1030) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) 

jenkins.war 
Failure -

hudson.util.IOException2: Failed to download from http://updates.jenkins-ci.org/download/war/1.508/jenkins.war
    at hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:782)
    at hudson.model.UpdateCenter$DownloadJob._run(UpdateCenter.java:1123)
    at hudson.model.UpdateCenter$DownloadJob.run(UpdateCenter.java:1101)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.net.ConnectException: Connection refused: connect
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:752)
    ... 8 more
Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at sun.net.NetworkClient.doConnect(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.openServer(Unknown Source)
    at sun.net.www.http.HttpClient.<init>(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.http.HttpClient.New(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getHeaderField(Unknown Source)
    at java.net.URLConnection.getHeaderFieldInt(Unknown Source)
    at java.net.URLConnection.getContentLength(Unknown Source)
    at hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:751)
    ... 8 more

Preparation 

    Checking internet connectivity
    Checking update center connectivity
    java.io.IOException: Server returned HTTP response code: 403 for URL: http://updates.jenkins-ci.org/update-center.json?uctest at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) at hudson.model.UpdateCenter$UpdateCenterConfiguration.testConnection(UpdateCenter.java:860) at hudson.model.UpdateCenter$UpdateCenterConfiguration.checkUpdateCenter(UpdateCenter.java:709) at hudson.model.UpdateCenter$ConnectionCheckJob.run(UpdateCenter.java:1030) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) 

Timestamper 
Failure -

hudson.util.IOException2: Failed to download from http://updates.jenkins-ci.org/download/plugins/timestamper/1.5.3/timestamper.hpi
    at hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:782)
    at hudson.model.UpdateCenter$DownloadJob._run(UpdateCenter.java:1123)
    at hudson.model.UpdateCenter$InstallationJob._run(UpdateCenter.java:1285)
    at hudson.model.UpdateCenter$DownloadJob.run(UpdateCenter.java:1101)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: http://updates.jenkins-ci.org/download/plugins/timestamper/1.5.3/timestamper.hpi
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:752)
    ... 9 more
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: http://updates.jenkins-ci.org/download/plugins/timestamper/1.5.3/timestamper.hpi
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getHeaderField(Unknown Source)
    at java.net.URLConnection.getHeaderFieldInt(Unknown Source)
    at java.net.URLConnection.getContentLength(Unknown Source)
    at hudson.model.UpdateCenter$UpdateCenterConfiguration.download(UpdateCenter.java:751)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T07:54:31.747

由于我们的更新中心服务器不进行任何身份验证，因此从不返回 403，因此 403 错误很可能是由您的 HTTP 代理返回的。如果我是你，我会检查代理用户名和密码。

我们可能应该在您输入代理详细信息的配置页面中添加一个连接检查按钮。[如果您愿意在https://issues.jenkins-ci.org/](https://issues.jenkins-ci.org/)中将此作为票证提交，我将很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T17:08:18.840

谢谢小介。问题是我使用带有[http://proxyservername.com](http://proxyservername.com)的代理主机名。

当我输入“proxyservername.com”时，它起作用了。我将打开一张票以获取“测试”代理连接按钮。如果（？）显示一个示例会很好，但我的不好。

# php - 使用 php 的 AJAX 请求的 responseText 为空

> ID：15705795
> 
> 赞同：1
> 
> 时间：2013-03-29T14:58:55.880
> 
> 标签：php, ajax, responsetext

我对 AJAX 请求和 PHP 非常陌生，我有一个问题：我正在尝试对我的 wamp 服务器上的 php 文件发出 GET 请求，但它的 responseText 保持空白，当我在 readyState 为 4 时检查状态代码时，它是 0。

当我在浏览器中执行 php 文件时，它会返回我的期望：一个带有 JSON 对象的数组。

有人知道答案吗？

Javascript代码：

```
this.getCars = function(id) {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
    }
    else {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    var that = this;
    xmlhttp.onreadystatechange=function()
    {

        if (xmlhttp.readyState==4)
        {
            alert(xmlhttp.status);
            //that.lastTableCars = JSON.parse(xmlhttp.responseText);

        }
    }
    xmlhttp.open("GET","http://localhost/getCars.php?q="+id,true);
    xmlhttp.send(null);
} 
```

PHP：

```
<?php
$q=$_GET["q"];
$con = mysql_connect('127.0.0.1', 'root', 'root');
if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("autobay", $con);

$sql= "SELECT * FROM autoos WHERE id = '".$q."'";

$result = mysql_query($sql);
$info = [];
while( $row = mysql_fetch_assoc( $result)){
    $info[] = $row; 
}

echo json_encode($info);

mysql_free_result($result);
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:06:54.940

一方面，使用 jQuery 来帮助解决问题。它会让你的生活变得更轻松。即使您最终想要使用原始 xmlhttprequest，我建议您引入 jQuery 以排除代码中的 xmlhttprequest 问题，并更快地解决实际问题。

*翻译：我对原始的 xmlhttprequest 不满意，所以为了帮助您，让我们切换到 jQuery。问题解决后您可以返回！=)*

```
this.getCars = function(id) {
   $.get("/getCars.php?q="+id, function(data) {
      alert("response from server: " + data);
   });
} 
```

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

还要确保您使用 Chrome 开发工具或 Firebug 来检查服务器的响应，它可能在那里失败。

**更新：**

确保您的 HTML 页面（即进行 ajax 调用）和 PHP 脚本在同一个域 (localhost) 上运行。我注意到您`http://localhost`在 ajax 调用中指定了完整的 URL。Ajax 不能跨域工作（虽然有一些变通方法，如果你真的需要跨域，请查看 JSONP）。最好的办法是从与 PHP 脚本相同的域加载您的 HTML 页面。

**更新 2：**

Actual issue was that the OP was loading the HTML from a folder on his computer (not via `http://localhost`) and trying to make an ajax call to `http://localhost`. The ajax call was failing since this is technically cross domain.

# sql - 即使表达式值为空，如何强制 xmlforest 创建元素？

> ID：15705800
> 
> 赞同：4
> 
> 时间：2013-03-29T14:59:27.960
> 
> 标签：sql, xml, oracle

我想使用 oracle`XMLFOREST`功能。（[定义链接](http://psoug.org/definition/XMLFOREST.htm)）

示例语法：

> ```
> XMLFOREST( [value expression AS alias], [...]) 
> ```

我的问题是，如果值表达式为 NULL，则不会为该值表达式创建任何元素。

如何强制它添加一个空的 XML 片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T16:02:56.157

您可以使用[`XMLFOREST`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions244.htm#i1172404)：

> 如果 value_expr 为 null，则不会为该 value_expr 创建任何元素。

也没有类似的[`XMLCOLATTVAL`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions238.htm#i1129374)功能：

> 您必须为 value_expr 指定一个值。如果 value_expr 为 null，则不返回任何元素。

[`XMLELEMENT`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions242.htm#i1129193)另一方面，根据要求返回一个空元素：

```
SQL> select xmlelement("EMP", xmlelement("ENAME", ename), 
  2                           xmlelement("JOB", job),
  3                           xmlelement("MGR", mgr)
  4         ).getclobval() xml
  5    from scott.emp;

XML
----------------------------------------------------------------
<EMP><ENAME>KING</ENAME><JOB>PRESIDENT</JOB><MGR></MGR></EMP>
<EMP><ENAME>BLAKE</ENAME><JOB>MANAGER</JOB><MGR>7839</MGR></EMP>
... 
```

* * *

为了完整起见，还可以使用另外两个 Oracle 工具（灵感来自[OTN 论坛上的这篇文章](https://forums.oracle.com/forums/thread.jspa?messageID=9390037)）。首先，您可以使用[`XMLQUERY`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions249.htm#CIHHFFGG)（在 11.2？）：

```
SQL> select
  2    xmlquery(
  3     '(#ora:view_on_null empty #) {
  4      <EMPS> {
  5          for $c in fn:collection("oradb:/SCOTT/EMP")/ROW
  6          return element EMP {
  7            $c/ENAME
  8          , $c/JOB
  9          , $c/MGR
 10       }
 11      }</EMPS>
 12     }'
 13    passing cast(10 as number) as "mid"
 14    returning content
 15  ).getClobval() as result
 16  from dual;

RESULT 
----------------------------------------------------------------------
<EMPS>
   <EMP><ENAME>KING</ENAME><JOB>PRESIDENT</JOB><MGR></MGR></EMP>
   <EMP><ENAME>BLAKE</ENAME>... 
```

您还可以使用该[`DBMS_XMLGEN`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_xmlgen.htm#i1012053)软件包：

```
SQL> DECLARE
  2    ctx    dbms_xmlgen.ctxHandle;
  3    sqlstr varchar2(4000)
  4       := 'SELECT ename, job, mgr FROM scott.emp WHERE ename=''KING''';
  5    res    clob;
  6  BEGIN
  7    ctx := dbms_xmlgen.newContext(sqlstr);
  8    dbms_xmlgen.setNullHandling(ctx, dbms_xmlgen.EMPTY_TAG);
  9    res := dbms_xmlgen.getXML(ctx);
 10    dbms_xmlgen.closeContext(ctx);
 11    dbms_output.put_line(res);
 12  END;
 13  /

<?xml version="1.0"?>
<ROWSET>
 <ROW>
  <ENAME>KING</ENAME>
  <JOB>PRESIDENT</JOB>
  <MGR/>
 </ROW>
</ROWSET> 
```

# javascript - 在 ember.js 中使用容器视图 - 如何从子视图访问父变量

> ID：15705805
> 
> 赞同：1
> 
> 时间：2013-03-29T14:59:42.060
> 
> 标签：javascript, ember.js

我正在尝试从容器视图、子视图访问父视图数据，但没有成功。

这是一个[提琴手](http://jsfiddle.net/simonweil/hPtNe/1/)。

**这样做的正确方法是什么？**

使用：ember-1.0.0-rc.1.js

Javascript代码：

```
App = Ember.Application.create({
    rootElement: '#app',
    name: 'My app',
    ready: function(){
        console.log('ready');
    },
});

App.mod = Ember.Object.extend({
    value: null,

    computed: function(value) {
        return 'computed';
    }.property()
});

App.MyController = Ember.ArrayController.create({
    content: [],
    init: function(){
        // create an instance of the model
        var item = App.mod.create({
            value: 'somevalue'
        });
        this.pushObject(item);
    }
});

App.SecondView = Ember.View.extend({
    tagName: 'span',
    classNames: ['second'],
    template: Ember.Handlebars.compile("second view with values: '{{value}}' & '{{computed}}'"),
});

App.FirstView = Ember.View.extend({
    tagName: 'span',
    classNames: ['first'],
    template: Ember.Handlebars.compile("first view"),
});

App.ViewsContainer = Ember.ContainerView.create({
    tagName: 'span',
    classNames: ['Container'],
    childViews: ['first_v', 'second_v'],
    first_v: App.FirstView,
    second_v: App.SecondView
}); 
```

和模板：

```
<div id="app">
    <script type="text/x-handlebars">
        Test <b>{{App.name}}</b><br><br>
        {{#each App.MyController.content}}
               this should be printed: "{{value}}" & "{{computed}}"<br><br>
            {{view App.ViewsContainer}}
        {{/each}}
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-30T01:02:26.960

有趣的是你正在尝试做的事情。但我确实找到了实现它的方法。这是小提琴：http: [//jsfiddle.net/Sq2Dt/](http://jsfiddle.net/Sq2Dt/)

您只需爬上视图的层次结构，然后像这样访问上下文：

```
{{view.parentView.context.value}} and {{view.parentView.context.computed}} 
```

ContainerView 中视图的上下文是 ApplicationController 而它的父视图的上下文是 MyController，这似乎有点奇怪。去搞清楚。

希望有帮助:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-14T21:14:57.233

是的，我也被这件事难住了。该线程帮助我走上了这条路，但就我而言，这就是解决方案。

```
// I use the #which command to preserve access to the outer context once inside the #each
{{#with view as myOuterView}}
  {{#each myInnerArray}}
    //here, i get my 'name' property from the *controller* of myOuterView
    {{myOuterView.controller.name}}
    // stuff i did in inner array
  {{/each}
{{/with} 
```

我不确定为什么有时会使用控制器，而有时会使用控制器，似乎是访问它的上下文，但我想我会分享我的工作方式。

# asp.net-mvc-3 - 如何遍历 lambda 表达式返回的列表？

> ID：15705808
> 
> 赞同：0
> 
> 时间：2013-03-29T14:59:51.830
> 
> 标签：asp.net-mvc-3, linq-to-sql, razor

这是我的控制器代码：

```
 var myquery = mycontext.Websites.Select(x => new {x.pagetype,x.website1,x.creationdate,x.expirationdate,x.domainregistrar,x.area,x.pin
                    ,x.city, age = DateTime.Now.Subtract(x.expirationdate ?? DateTime.Today)
                });

return View(myquery); 
```

这是我的视图代码：

```
@foreach (var item in Model)
    {
        <tr>
            <td>
                <span>@item.pagetype </span>

</td>

</tr>

} 
```

它怎么给我错误：对象在遍历foreach循环时不包含页面类型的定义？

我想知道为什么？

编辑：

我尝试更改代码如下：

控制器：

```
 CRMDataContext mycontext = new CRMDataContext();
                var myquery = mycontext.Websites.Select(x => new WebsiteViewModel
                {
                    pagetype = x.pagetype,
                    site = x.site,
                    creationdate = x.creationdate ?? DateTime.Today,
                    expirationdate = x.expirationdate ?? DateTime.Today,
                    domain_registrar = x.domainregistrar,
                    Area = x.area,
                    pin = x.pin,
                    City = x.city,
                   difference = DateTime.Now.Subtract(x.expirationdate ?? DateTime.Today).ToString()
                }).ToList();

     return View(myquery); 
```

但我得到了例外：

**操作可能会在运行时破坏操作。确保您的应用程序没有加载两个冲突版本的类库**

我能想到的..是 linq 为网站表生成的类，我的 Websiteview 模型是冲突的。但我不明白为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:28:33.340

要详细说明上面 MarcinJuraszek 的评论，您需要创建一个视图模型类来保存这些属性。

**视图模型类**

```
public class MyViewModel{
   public string Pagetype {get;set;}
   public string Website1 {get;set;}
   public DateTime Creationdate {get;set;}
   public DateTime Expirationdate {get;set;}
   public string Domainregistrar {get;set;}
   public string Area {get;set;}
   public string Pin {get;set;}
   public string City {get;set;}
   public int Age {get;set;}
} 
```

现在，在您的查询中，选择 ViewModel 类

```
var model = mycontext.Websites.Select(x => new MyViewModel{
                  PageType = x.pagetype
                  WebSite1 = x.website1
                  CreationDate = x.creationdate
                  ExpirationDate = x.expirationdate
                  DomainRegistrar = x.domainregistrar
                  Area = x.area
                  Pin = x.pin
                  City = x.city,
                  Age =DateTime.Now.Subtract(x.expirationdate ?? DateTime.Today)
               }).ToList();

return View(model); 
```

现在，您需要强烈键入您的视图，然后您就可以开始了！

```
@model IEnumerable<MyViewModel>

@foreach (var item in Model)
    {
        <tr>
            <td>
                <span>@item.Pagetype </span>

</td>

</tr>

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T11:04:44.567

一整天后，我可以像下面这样解决它：

```
public WebSiteViewModel
{
     string PageType { get; set;}
     string WebSite { get; set;}
     DateTime CreationDate { get; set;}
     DateTime ExpirationDate { get; set;}
     string DomainRegistrar { get; set;}
     string Area { get; set;}
     string Pin  { get; set;}
     string City { get; set;}
     DateTime Age {get; set;}

     //Constructor
     public WebSiteViewModel(YourWebSiteEntity w)
     {
             PageType = w.pagetype;
             WebSite = w.website1;
             CreationDate = w.creationdate;
             ExpirationDate = x.expirationdate;
             DomainRegistrar = x.domainregistrar;
             Area = x.area;
             Pin = x.pin;
             City = x.city;
             Age = DateTime.Now.Subtract(x.expirationdate ?? DateTime.Today);
     }
} 
```

控制器：

```
public ActionResult Index()
        {
            CRMDataContext mycontext = new CRMDataContext();

            var myquery = mycontext.Websites.Select(x => new WebsiteViewModel(x.pagetype,
               x.site, x.creationdate ?? DateTime.Today, x.expirationdate ?? DateTime.Today, x.domainregistrar, x.pin, x.area, x.city, "Abc")).ToList();

            return View(myquery);
        } 
```

看法：

```
@model IEnumerable<ImportFromExcel.Model.WebsiteViewModel>
@{
    ViewBag.Title = "Index";
}
<h2>
    Index</h2>
<table>
    <tr>
        <th>
            Page type
        </th>
        <th>
            Website
        </th>
        <th>
            Creation date
        </th>
        <th>
            Expiration Date
        </th>
        <th>
        difference
        </th>
        <th>
            Domain Registrar
        </th>
        <th>
            Pin
        </th>
        <th>
            Area
        </th>
        <th>
            City
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                <span>@item.pagetype </span>
            </td>
            <td>
                <span>@item.site </span>
            </td>
..so on
        </tr>

    }
</table> 
```

希望其他机构也能发现它有用。问题是我没有使用 WebsiteViewModel 构造函数来初始化模型对象。这终于解决了我的问题。:)

# excel - VBA 创建备份

> ID：15705812
> 
> 赞同：-3
> 
> 时间：2013-03-29T15:00:16.313
> 
> 标签：excel, vba

我对这里的宏观事件有疑问。下面是我的代码。这将执行以下操作'

```
Private Sub SaveAsTabDelimited(ByVal sFileName As String)

  With ActiveWorkbook

    .SaveAs Filename:=sFileName, FileFormat:=xlText, CreateBackup:=True

  End With

End Sub

Public Sub test()

  SaveAsTabDelimited "C:\Users\te160772\Desktop\Toad Test\Testsanthu.txt"

  ActiveWorkbook.Close savechanges:=True

End Sub 
```

1.  它将excel文件转换为制表符分隔的txt文件
2.  它创建了 excel 文件的备份副本，我希望每天执行此操作，以便每天将 excel 文件上传到 Oracle 表。将 excel 电子表格转换为制表符分隔的 txt 文件的原因是为了保留格式（以防止在将其导出到 oracle 时删除前导零）

但现在我正在尝试增强此代码，以便执行以下操作而不会出现任何故障。我试图以所有可能的方式做到这一点。因为我对编程很陌生，所以我无法做到这一点。

1.  该代码应将 excel 文件转换为在我的桌面上以制表符分隔的保存（希望我当前的代码足以执行此操作）
2.  它应该在名为“Repository”（桌面中的文件夹）的文件夹中创建一个备份副本。如果可能，对我的工作簿的每次更改都应生成带有版本历史记录的备份副本（文件名中的日期和时间戳）
3.  与我的代码相关的最大问题是，在关闭时，会出现三个单独的对话框 - 一个询问我是否要保存，另一个询问我是否要保留我在剪贴板中复制的内容，另一个是替换现有的保存在文件夹中的文本文件有没有办法从宏中回答这些对话框（或抑制它们），所以我不需要每次运行宏时手动单击是或否？
4.  我已将我的宏附加到 excel 中的“形状”，但我的首要任务是在关闭我的工作簿时运行我的宏。每次当我的工作簿发生任何更改并保存工作簿时，它都应该创建一个制表符分隔的文本文件，该文件应该替换现有的 Txt 文件，而无需任何确认对话框。

请帮助我。这对我来说非常需要

一百万谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:26:58.263

> 该代码应将 excel 文件转换为在我的桌面上以制表符分隔的保存（希望我当前的代码足以执行此操作）

是的，您可以硬编码桌面路径或使用此代码自动获取桌面路径

```
Sub GetDesktopPath()
    Dim oWS As Object
    Dim DskTopPath As String

    Set oWS = CreateObject("WScript.Shell")

    DskTopPath = oWS.SpecialFolders("Desktop")

    Debug.Print DskTopPath

    Set oWS = Nothing
End Sub 
```

* * *

> 它应该在名为“Repository”（桌面中的文件夹）的文件夹中创建一个备份副本。如果可能，对我的工作簿的每次更改都应生成带有版本历史记录的备份副本（文件名中的日期和时间戳）

您可以使用该`Workbook_BeforeSave`事件来创建现有工作簿的副本。

```
Private Sub Workbook_BeforeSave(ByVal SaveAsUI As Boolean, Cancel As Boolean)

End Sub 
```

您可能想要探索`ThisWorkbook.SaveCopyAs`查看 Excel 帮助以获取更多信息。

* * *

> 与我的代码相关的最大问题是，在关闭时，会出现三个单独的对话框 - 一个询问我是否要保存，另一个询问我是否要保留我在剪贴板中复制的内容，另一个是替换现有的保存在文件夹中的文本文件有没有办法从宏中回答这些对话框（或抑制它们），所以我不需要每次运行宏时手动单击是或否？

您可以通过简单地将代码夹在中间来摆脱这些警报

```
Application.DisplayAlerts = False
'~~> Your Code
Application.DisplayAlerts = True 
```

如果您经常使用剪贴板，那么您可能还想通过使用来清除它

```
Application.CutCopyMode = False 
```

* * *

> 我已将我的宏附加到 excel 中的“形状”，但我的首要任务是在关闭我的工作簿时运行我的宏。每次当我的工作簿发生任何更改并保存工作簿时，它都应该创建一个制表符分隔的文本文件，该文件应该替换现有的 Txt 文件，而无需任何确认对话框。

您可以使用该`Workbook_BeforeClose`事件来运行您的相关代码

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)

End Sub 
```

关于警报，我已经在上一节中解释过。

希望这能让你走上正确的道路。

# php - 如何在 MYSQL 中创建将在 30 分钟或关闭浏览器后删除的临时记录？

> ID：15705813
> 
> 赞同：-6
> 
> 时间：2013-03-29T15:00:20.627
> 
> 标签：php, mysql

我正在构建一个 Web 应用程序，该应用程序需要我为客户保留 30 分钟的座位或在删除预订之前关闭浏览器。有什么建议最好的方法吗？

我想在 MYSQL 中添加一条记录并运行一个 cron 作业，但这不会为用户提供最新的结果。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T15:03:05.540

写一个有有效期的记录。编写查询时使用该到期日期。经常清理过期的记录。

然而，关闭浏览器更加复杂且不可靠。在 http 中与服务器的连接是无状态的，因此您真的不知道浏览器何时关闭。当不再有任何轮询更新时，您可以使用 ajax 定期轮询并删除记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:04:59.313

这个问题实际上是2个问题：

*   你如何清理旧记录

和

*   你如何*忽略*过期的记录。

`expire_time`在您的预订表中添加一个字段。您可能有一些逻辑来查看仍有多少座位可用，将其添加`expire_time`到该逻辑以便忽略过期记录。

然后编写一个定期调用的脚本或函数（cron 有效，也是如此`register_shutdown_handler()`）来清理过期的记录。

这样，如果您的 cron 因某种原因失败或变慢，您就不会意外阻止新的预订。您甚至可以完全跳过清理步骤并受到（次要）性能影响。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T15:04:17.950

我相信它应该通过会话解决，而不是 mysql。

但是如果你坚持，你应该在每次页面被点击时更新项目，你也可以做一些清理

**编辑** 是的，当然。预订系统必须是多用户的。如果一位用户进行预订，则另一位用户一定无法获得座位。

是的，简单的解决方法就是在其中添加一个名为 reserved 的新列，该列将指定直到它被保留的时间。

为什么你需要 cron 呢？

顺便说一句：会话存储在服务器而不是客户端上。cookie 存储在客户端而不是服务器中。

# css - 表格单元格中不需要的底部填充

> ID：15705815
> 
> 赞同：0
> 
> 时间：2013-03-29T15:00:36.703
> 
> 标签：css

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8"/>
    <title>Moravský kras</title>
</head>
<body>
    <table style="border-spacing: 0px">
    <tr>
        <td style="padding: 0px"><img src="http://placehold.it/150x150"></td>
    </tr>
    </table>
</body>
</html> 
```

使用这个简单的代码，我在图像下方的表格单元格中得到了一些底部填充（至少在 firefox/chrome 中）。请告诉我如何摆脱它。这是一个[小提琴](http://jsfiddle.net/ZWwTu/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:03:11.233

这是因为自然而然的`img`存在`inline`。让它`block`。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8"/>
    <title>Moravský kras</title>
</head>
<body>
    <table style="border-spacing: 0px">
    <tr>
        <td style="padding: 0px"><img src="http://placehold.it/150x150" style="display: block;"></td>
    </tr>
    </table>
</body>
</html> 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/ZWwTu/1/](http://jsfiddle.net/praveenscience/ZWwTu/1/)

* * *

### 解释

图像元素就是这样一种元素，它既具有出现的性质，又`inline`具有盒子模型。所以，这与`vertical-align`精神有关。当你给`block`显示时，它被当作一个普通的盒子模型。这只是我的看法。

# c# - IIS 模拟返回应用程序池用户

> ID：15705817
> 
> 赞同：0
> 
> 时间：2013-03-29T15:00:37.640
> 
> 标签：c#, vb.net, iis, iis-6, impersonation

我正在编写一个应用程序，允许用户管理 Active Directory 中的组。我想使用当前登录用户的身份，这样他们就不必登录应用程序。该应用程序远程工作没有问题，但在部署到测试服务器（Windows 2008R2 IIS6）后，它试图使用 IIS APPPOOL 身份而不是我的身份。

相关的 web.config 设置：

```
<authentication mode="Windows"></authentication>
<identity impersonate="true" /> 
```

验证身份的代码：

```
Session("Username") = ActiveDirectory.GetUsername( _
    WindowsIdentity.GetCurrent.User.Translate(GetType(NTAccount)).Value _
) 
```

ActiveDirectory 是一类辅助函数，不包含任何模拟逻辑。

如何获取访问应用程序的用户而不是 IIS APPPOOL 用户的身份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:17:04.060

我相信应用程序将以应用程序池的身份运行。为了以不同的身份运行，您需要模拟用户。[MSDN](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx)有一篇关于它的文章。这是我根据帮助我完成类似事情的文章编写的课程。

```
class Impersonator : IDisposable
  {
      [DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
      private static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword,
          int dwLogonType, int dwLogonProvider, out SafeTokenHandle phToken);

      [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
      private extern static bool CloseHandle(IntPtr handle);

      WindowsIdentity newId;
      WindowsImpersonationContext impersonatedUser;
      private bool isDisposed;

      public Impersonator(string user, string password, string domain)
      {
          SafeTokenHandle safeTokenHandle;
          const int LOGON32_PROVIDER_DEFAULT = 0;
          //This parameter causes LogonUser to create a primary token. 
          const int LOGON32_LOGON_INTERACTIVE = 2;

          // Call LogonUser to obtain a handle to an access token. 
          bool returnValue = LogonUser(user, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, out safeTokenHandle);

          newId = new WindowsIdentity(safeTokenHandle.DangerousGetHandle());
          impersonatedUser = newId.Impersonate();
      }

      public void Dispose()
      {

          this.Dispose(true);
          GC.SuppressFinalize(this);
      }

      public void Dispose(bool disposing)
      {
          if (!this.isDisposed)
          {
              if (disposing)
              {
                  if (impersonatedUser != null)
                  {
                      this.impersonatedUser.Dispose();
                  }

                  if (newId != null)
                  {
                      this.newId.Dispose();
                  }
              }
          }

          this.isDisposed = true;
      }

      ~Impersonator()
      {
          Dispose(false);
      }

      private sealed class SafeTokenHandle : SafeHandleZeroOrMinusOneIsInvalid
      {
          private SafeTokenHandle()
              : base(true)
          {
          }

          [DllImport("kernel32.dll")]
          [ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)]
          [SuppressUnmanagedCodeSecurity]
          [return: MarshalAs(UnmanagedType.Bool)]
          private static extern bool CloseHandle(IntPtr handle);

          protected override bool ReleaseHandle()
          {
              return CloseHandle(handle);
          }
      }
  } 
```

当您想模拟用户并在完成后处理该类时，基本上创建一个类的新实例。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:12:27.200

我不确定这是否符合您正在尝试做的事情。但是要检索用户，您将使用以下内容：

```
WindowsIdentity user = WindowsIdentity.GetCurrent();
WindowsPrincipal role = new WindowsPrincipal(user); 
```

使用上述解决方案，您实际上也可以检查角色，或定义`Identity.Name`为您提供信息。

另一种解决方案：

```
Environment.UserName;
Environment.GetEnvironmentVariable("USERNAME"); 
```

现在我知道`WindowsIdentity`将跨越一个*域*，但其他人我不确定他们将如何处理*Active Directory*。因此，您可能必须对*Domain Context*做一些事情。

```
// Define Context
PrincipalContext context = new PrincipalContext(ContextType.Domain);

// Find User
UserPrincipal user = UserPrincipal.Current;

// Check User
if (user != null)
{
    string loginName = user.SamAccountName; // Whatever "Login Name Means"
} 
```

这里也有很好的资源：

[管理目录安全：](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)

[MSDN 帐户管理文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

不确定这是否正是您的意思，但希望对您有所帮助。

# windows-8 - Win8：OblyTile 和 Modern Tile Maker 等程序如何将图块分配给非 Metro 应用程序快捷方式？

> ID：15705821
> 
> 赞同：6
> 
> 时间：2013-03-29T15:00:45.207
> 
> 标签：windows-8, live-tile

我们有一个在 Visual Studio 2010 中构建的 .NET 但非 Metro 应用程序。我们希望在桌面上为我们的应用程序显示一个漂亮的 512x512（或其他）图像。*我们不需要 Live Tile 功能，我们只需要一个显示漂亮 Metro 尺寸图像的快捷方式*。OblyTile和[Modern Tile Maker](http://www.thewindowsclub.com/modern-tile-maker-windows-8)[程序](http://forum.xda-developers.com/showthread.php?t=1899865)可以做到这一点，但目前尚不清楚如何做到这一点。他们是否以编程方式创建 LNK 快捷方式？还是它们实际上是自己的快捷方式（Metro 应用程序），然后启动您的旧应用程序？

如果是前者，那么显然可以为非 Win8 应用程序创建 Metro 尺寸桌面图标。**我们如何编写这样一个快捷方式的创建脚本？**我们不关心我们需要使用哪种语言（JScript、C++、C# 等等），只需要指出正确的方向。我们使用 WiX，因此我们在安装脚本方面有很大的灵活性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-31T17:37:20.410

这里发生了一些事情：

1）您可以通过下载ILSpy来查看OblyApp的源代码：http: [//ilspy.net/](http://ilspy.net/)

2) OblyApp 创建一个运行 VBS 文件 (Launcher.vbs) 的磁贴，该文件启动指定的应用程序。OblyApp 为每个图块创建一个新的唯一的 launcher.vbs 文件，并且还保存它在下创建的每个图块的图像`c:\Program Files\OblyTile\<Folder like 00000001>`。vbs 文件的文本：

```
On Error Resume Next
Set objShell = CreateObject("Wscript.Shell")
Set objFSO = CreateObject("Scripting.FileSystemObject")
strApp = "<path to executable>"

arrPath = Split(strApp, "\")

For i = 0 to Ubound(arrPath) - 1
    strAppPath = strAppPath & arrPath(i) & "\"
Next 

objShell.CurrentDirectory = strAppPath
objShell.Run """<path to executable>""" & ""
If Err.Number <> 0 Then
  If InStr(1, strApp, "/") > 0 then
  Else
      If InStr(1, strApp, "www.") > 0 then
      Else
          If InStr(1, strApp, "shell:") > 0 then
          Else
              If objFSO.folderExists(strApp) Then
              Else
                  If objFSO.FileExists(strApp) Then
                  Else
                      MsgBox strApp & " not found", 16, "OblyTile"
                  End If
              End If
          End If
      End If
  End If
Err.Clear
End If 
```

3)*我相信*他们正在复制现有的 .lnk 文件并以二进制形式更改其相关信息。与此相关的代码位于 CreaRisorce() 和 CreateShortcutWinAppClick() 方法中。这里有 .lnk 文件的官方文件格式：http: [//download.microsoft.com/download/9/5/E/95EF66AF-9026-4BB0-A41D-A4F81802D92C/ [MS-SHLLINK].pdf](http://download.microsoft.com/download/9/5/E/95EF66AF-9026-4BB0-A41D-A4F81802D92C/[MS-SHLLINK].pdf)

# c# - 如果断言失败，自定义断言类应该做什么？

> ID：15705827
> 
> 赞同：4
> 
> 时间：2013-03-29T15:01:01.770
> 
> 标签：c#, unit-testing, c#-4.0, vs-unit-testing-framework

我为单元测试创​​建了一个自定义 Assert 类，当我想通知测试失败时我不确定该怎么做：

```
public static class MyAssert
{
    public static void Contains(File file, string text){
        if(!ContainText(file, text)){
            // what to do here?
        }
    }
} 
```

我反映了这个`Microsoft.VisualStudio.TestTools.UnitTesting.Assert`类，并注意到它调用了 HandleFail：

```
internal static void HandleFail(string assertionName, string message, params object[] parameters)
{
  string str = string.Empty;
  if (!string.IsNullOrEmpty(message))
    str = parameters != null ? string.Format((IFormatProvider) CultureInfo.CurrentCulture, Assert.ReplaceNulls((object) message), parameters) : Assert.ReplaceNulls((object) message);
  if (Assert.AssertionFailure != null)
    Assert.AssertionFailure((object) null, EventArgs.Empty);
  throw new AssertFailedException((string) FrameworkMessages.AssertionFailed((object) assertionName, (object) str));
} 
```

但这是一种内部方法。我可以使用反射来调用它，或者抛出 AssertFailedException 可能更有意义？我还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T12:16:38.300

为了使自定义 Assert 方法的操作与标准断言方法完全相同，您必须抛出一个新的`AssertFailedException`. 起初我真的不喜欢这样，因为调试器在`AssertFailedException`throw 语句上停止，而不是在实际的 assert 语句上。经过更多研究，我发现了`DebuggerHidden`方法属性和中提琴，我的断言按预期执行。

```
[DebuggerHidden]
public static void Contains(File file, string text){
    if(!ContainText(file, text)){
        HandleFail("MyAssert.Contains", null, null);
    }
}

[DebuggerHidden]
private static void HandleFail(string assertName, string message, params object[] parameters )
{
    message = message ?? String.Empty;
    if (parameters == null)
    {
        throw new AssertFailedException(String.Format("{0} failed. {1}", assertName, message));
    }
    else
    {
        throw new AssertFailedException(String.Format("{0} failed. {1}", assertName, String.Format(message, parameters)));
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T23:54:45.663

只需从您的自定义标准中调用一个标准`Assert`。

# c# - 忽略虚拟属性

> ID：15705830
> 
> 赞同：13
> 
> 时间：2013-03-29T15:01:11.440
> 
> 标签：c#, autofixture

我们有用于存储的实体框架的 MVC4 项目。对于我们的测试，我们最近开始使用 Autofixture，它真的很棒。

我们的模型图非常深，通常通过 AutoFixture 创建一个对象会创建整个图：*人员 -> 团队 -> 部门 -> 公司 -> 合同 -> ....*等。

这个问题是时间。**对象创建最多需要一秒钟**。这会导致测试缓慢。

我发现自己经常做的是这样的事情：

```
 var contract = fixture.Build<PersonContract>()
            .Without(c => c.Person)
            .Without(c => c.PersonContractTemplate)
            .Without(c => c.Occupation)
            .Without(c => c.EmploymentCompany)
            .Create<PersonContract>(); 
```

这很有效，而且速度很快。但是这种过度规范使测试难以阅读，有时我会丢失一些重要的细节，比如`.With(c => c.PersonId, 42)`在 unimportant 列表中`.Without()`。

所有这些被忽略的对象都是 Entity Framework 的导航属性，并且都是虚拟的。

**有没有一种全局方法来告诉 AutoFixture 忽略虚拟成员？**

我尝试过创建`ISpecimentBuilder`，但没有运气：

```
public class IgnoreVirtualMembers : ISpecimenBuilder
{
    public object Create(object request, ISpecimenContext context)
    {

        if (request.GetType().IsVirtual // ?? this does not exist )
        {
             return null;
        }
    }
} 
```

我似乎无法找到一种方法`ISpecimenBuilder`来检测我们正在构建的对象是另一个类中的虚拟成员。可能`ISpecimenBuilder`这不是执行此操作的正确位置。还有其他想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-29T16:34:18.560

在马克的博客上阅读更多内容（[特别是这个](http://blog.ploeh.dk/2010/10/19/Convention-basedCustomizationswithAutoFixture/)）我找到了做我想做的事情的方法：

```
/// <summary>
/// Customisation to ignore the virtual members in the class - helps ignoring the navigational 
/// properties and makes it quicker to generate objects when you don't care about these
/// </summary>
public class IgnoreVirtualMembers : ISpecimenBuilder
{
    public object Create(object request, ISpecimenContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("context");
        }

        var pi = request as PropertyInfo;
        if (pi == null)
        {
            return new NoSpecimen(request);
        }

        if (pi.GetGetMethod().IsVirtual)
        {
            return null;
        }
        return new NoSpecimen(request);
    }
} 
```

您可以将这些包装到自定义中：

```
public class IgnoreVirtualMembersCustomisation : ICustomization
{
    public void Customize(IFixture fixture)
    {
        fixture.Customizations.Add(new IgnoreVirtualMembers());
    }
} 
```

因此，在您的测试中，您只需执行以下操作：

```
var fixture = new Fixture().Customize(new IgnoreVirtualMembersCustomisation()); 
```

然后去创建你的复杂模型。

享受！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-24T08:50:53.853

我遇到了同样的问题，并决定更进一步，为延迟加载导航属性创建自定义。该项目位于[Github](https://github.com/alexfoxgill/AutoFixture.AutoEntityFramework)和[NuGet](http://nugetmusthaves.com/Package/AutoFixture.AutoEF)上。

考虑下面的简单对象图，它具有循环依赖：

```
class Foo
{
    public int Id { get; set; }
    public int BarId { get; set; }
    public virtual Bar Bar { get; set; }
}

class Bar
{
    public int Id { get; set; }
    public int FooId { get; set; }
    public virtual Foo Foo { get; set; }
} 
```

通过这种定制，调用`var foo = fixture.Create<Foo>()`将创建一个类型为 的对象`Foo`。调用`foo.Bar`getter 将使用 DynamicProxy 和 AutoFixture 动态创建一个实例`Bar`并将其分配给该属性。后续调用`foo.Bar`返回相同的对象。

注意自定义设置不够智能`foo.Bar.Foo = foo`- 如果需要，必须手动完成

# android - 每行具有不同布局膨胀的列表视图

> ID：15705832
> 
> 赞同：6
> 
> 时间：2013-03-29T15:01:14.177
> 
> 标签：android, user-interface, android-listview

我对在 Android 中设计 UI 很陌生（对 Android 开发也很陌生）。我目前正在开发一个 Android 应用程序，它看起来很像 Google+ 的“All Circles”页面和 Facebook 的用户主页，您可以在其中查看朋友分享的内容。

为了让事情更清楚，请查看以下截取自 Google+ 的 Android 应用程序的屏幕截图：

![在此处输入图像描述](../Images/5e3e943ec640fe8ea84c2efad1dc6f5e.png)

如您所见，Paul Harper 的帖子在一个小框架中，而“Android and me”的帖子在另一个框架中。向下滚动的次数越多，您看到的共享内容就越多，每个内容都在自己的“框架”中。

我真的不确定如何实现这个结果（我确定它涉及一个 ListView 组件），所以有人可以告诉我我应该使用哪些 UI 组件来实现它吗？

万分感谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T15:16:32.150

你应该看看链接中的视频。

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

```
private static final int TYPE_ITEM1 = 0;
private static final int TYPE_ITEM2 = 1;
private static final int TYPE_ITEM3 = 2; 
```

整数类型；

```
@Override
public int getItemViewType(int position) {

    if (position== 0){
        type = TYPE_ITEM1;
    } else if  (position == 1){
        type = TYPE_ITEM2;
    }
    return type;
}

@Override  
public View getView(int position, View convertView, ViewGroup parent) {
View row = convertView;
LayoutInflater inflater = null;
int type = getItemViewType(position);
   if (row  == null) {
    if (type == TYPE_ITEM1) {
                 //infalte layout of type1
      }
    if (type == TYPE_ITEM2) {
                 //infalte layout of type2
    }  else {
                 //infalte layout of normaltype
 }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T15:21:51.790

你说的对。对于列表，您需要查找的关键字是“ListView”、“ListFragment”、“ListActivity”。要为您的列表（项目）提供自定义外观，您需要为列表行定义自己的布局，然后可以包含多个子视图。要使用内容填充行（及其子视图），您需要定义您在列表中设置的自定义适配器。寻找（例如）“ArrayAdapter”、“SimpleCursorAdapter”。

尝试谷歌搜索“android 列表自定义布局”和“android 列表适配器”。

最好的问候，塞巴斯蒂安

# node.js - 如何在 Ubuntu 服务器上创建运行我的 Node.js 应用程序的“服务”

> ID：15705835
> 
> 赞同：9
> 
> 时间：2013-03-29T15:01:18.640
> 
> 标签：node.js, ubuntu

我不知道在 Ubuntu Server 上应该如何称呼它，但大多数时候我在 Windows 上工作时，它被称为在后台运行应用程序的服务。

我基于 Node.js 构建我的 Web 服务器，因此要将其部署在 Ubuntu 服务器上，我需要一个运行 Node.js 的“服务”，我想要“服务”：

1.  在后台运行
2.  如果我的 Web 服务器崩溃 Node.js，能够自动启动 Node.js

通常，我通过打开终端并运行 js 文件来运行 Node.js 应用程序。但据我了解，这更多是出于测试目的，因为终端无法保证在失败后启动 Node.js。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T15:57:22.137

许多人永远使用[https://github.com/nodejitsu/forever](https://github.com/nodejitsu/forever)，这已成为行业标准。

如果你在 Ubuntu 上，你也可以使用初始化脚本（google 'ubuntu upstart'），它会做同样的事情，并且保证如果服务器重新启动。

这是我的新贵脚本，例如[https://gist.github.com/qbert65536/5271721](https://gist.github.com/qbert65536/5271721)。

它在服务器启动时运行，您还可以使用

start myapp, stop myapp, restart myapp ，其中 myapp.conf 是 upstart 脚本的名称。

# sql - Postgresql 9.1 中已经存在关系“pk”

> ID：15705838
> 
> 赞同：1
> 
> 时间：2013-03-29T15:01:26.280
> 
> 标签：sql, postgresql, postgis, postgresql-9.1, psql

我是 Postgres/PostGIS 的新手，目前正在阅读 PostGIS 书籍。当我尝试他们的示例查询之一时，我收到以下错误，指出`relation "pk" already exists`. 这是否意味着 2 个表不能具有相同名称的约束？

**询问：**

```
CREATE TABLE roads(gid serial PRIMARY KEY, road_name character varying(100));
SELECT AddGeometryColumn('public', 'roads', 'geom', 4269, 'LINESTRING',2);

CREATE TABLE roads_NE(CONSTRAINT pk PRIMARY KEY (gid))
INHERITS (roads);

ALTER TABLE roads_NE
ADD CONSTRAINT chk CHECK (state
IN ('MA', 'ME', 'NH', 'VT', 'CT', 'RI'));

CREATE TABLE roads_SW(CONSTRAINT pk PRIMARY KEY (gid))
INHERITS (roads);

ALTER TABLE roads_SW
ADD CONSTRAINT chk CHECK (state IN ('AZ', 'NM', 'NV')); 
```

**错误：**

```
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "pk" for table "roads_sw"

ERROR:  relation "pk" already exists

********** Error **********

ERROR: relation "pk" already exists
SQL state: 42P07 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:07:15.083

是的。您需要在数据库中使用不同的名称

# maven - 如何在 Maven 中包含来自另一个 maven 项目的 JAR

> ID：15705841
> 
> 赞同：0
> 
> 时间：2013-03-29T15:01:54.120
> 
> 标签：maven, module, dependencies, pom.xml

我有一个相当大的项目，名为：ProjectX。在这个 ProjectX 文件夹中，我们有一个用于项目其余部分的父 POM。项目 X 有 2 个模块：ModuleA 和 ModuleB。

ModuleB 也是另外两个模块的父模块：SubModuleA 和 SubModuleB。

我遇到的问题是 SubModuleB 需要通过在 ModuleA 上执行“mvn install”生成的 JAR，但我无法弄清楚如何在 POM 中以编程方式执行此操作，而无需将 JAR 从 ModuleA 复制/粘贴到 SubModuleB 的资源中文件夹。

基本上，我希望能够直接进入 ProjectX 的基本目录并键入“mvn install”，它会通过并生成适当的 JAR，然后我可以将它们加载到 Geronimo 或其他任何东西中，而无需移动任何东西。我问的是不可能的吗？

注意我尝试过使用依赖，但它似乎没有将 JAR 移动到目录中。除非它确实按照我的要求进行并且我没有看到它。:)

供参考（视觉）：

```
ProjectX - ModuleA
         \ ModuleB - SubModuleA
                   \ SubModuleB 
```

编辑：事实证明，如果我从 ProjectX 目录运行“mvn install”，它确实会在 M2_REPO 位置复制/创建 JAR。然后当我运行“mvn eclipse:eclipse”时，我可以看到在 SubModuleB 中为我正确设置了依赖项。

我希望这对未来的 mvn 菜鸟有所帮助。

当我被允许时，我会将其设置为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:29:40.777

事实证明，如果我从 ProjectX 目录运行“mvn install”，它确实会在 M2_REPO 位置复制/创建 JAR。然后当我运行“mvn eclipse:eclipse”时，我可以看到在 SubModuleB 中为我正确设置了依赖项。

我希望这对未来的 mvn 菜鸟有所帮助。

# java - 如何最好地从方法中的匿名类返回值？

> ID：15705843
> 
> 赞同：2
> 
> 时间：2013-03-29T15:02:03.207
> 
> 标签：java, user-interface, anonymous-class

如果我有一个方法需要返回一些东西，并且它需要在 UI 上显示一些东西来做到这一点（例如问用户一个问题），我`java.awt.EventQueue.invokeLater(new Runnable() {...});`会在 UI 线程上运行它（Android 使用类似的东西`runOnUiThread()`） . 我如何从中返回一些东西`Runnable`？例如：

```
public String askQuestion()
{
    java.awt.EventQueue.invokeLater(new Runnable() {
        @Override
        public void run() {
            String response = JOptionPane.showInputDialog(null, "What is 2+2?");
            //how do I return this response object to the method?
        }
    });
} 
```

我不能使用最终的局部变量，因为编译不允许我分配给它。我可以使用一个类变量并使用它来访问它，`Class.this.<variable>`但这是实现这一目标的最佳/唯一方法吗？

编辑：我需要返回其他东西`String`，这只是一个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:03:17.333

您可以进行如下操作：

```
public String askQuestion()throws Exception
   {
    final StringBuilder sBuilder = new StringBuilder();
    java.awt.EventQueue.invokeAndWait(new Runnable() {
        @Override
        public void run() {
            String response = JOptionPane.showInputDialog(null, "What is 2+2?");
            sBuilder.append(response);
        }
    });
   return sBuilder.toString();
} 
```

这也可以通过以下方式解决：

```
String sResponse;//make sResponse a field of class xyz
public String askQuestion()throws Exception
 {
    java.awt.EventQueue.invokeAndWait(new Runnable() {
        @Override
        public void run() {
            String response = JOptionPane.showInputDialog(null, "What is 2+2?");
            sResponse = response;
        }
    });
   return sResopnse;
} 
```

# android - 如何在同一目录中创建一个新文件，如existFileName(1).pdf

> ID：15705844
> 
> 赞同：0
> 
> 时间：2013-03-29T15:02:06.477
> 
> 标签：android

如何使用数字创建新文件（如果创建新文件，则增加）。现在我有一个名为“29-03-2013.pdf”的文件。如果再次创建，我想创建一个名为“29-03-2013(1).pdf”的新文件，依此类推。

**我的代码：**

```
String finalResponse="";
String pdfnameDate=selectedFromDate+"_"+selectedToDate;

Document doc = new Document(PageSize.A4.rotate(), 50, 10, 10, 10);

try {
    File alertsFiledir = new File(Environment.getExternalStorageDirectory(), "/RAMAPP/ALERTS");
    if (!alertsFiledir.exists()) {
        if (!alertsFiledir.mkdirs()) {
            finalResponse="failed";
            Log.i("alertsavepdf","directory not created");
            return finalResponse;
        }
    }
    File alertsFile = new File(alertsFiledir,pdfnameDate+".pdf");

    if (!alertsFile.exists()) {
        try {
            boolean fileExist = alertsFile.createNewFile();
            if(!fileExist)
            {
                finalResponse="failed";
                return finalResponse;
            }
        } catch (IOException e) {
            e.printStackTrace();
            finalResponse="failed";
            return finalResponse;
        }
    }
    else
    {
        **//here how to Create a new File like pdfnameDate(1) or pdfnameDate(2).Here pdfnameDate is exist file name**

    }
    PdfWriter.getInstance(doc, new FileOutputStream(alertsFile));
    doc.open();
    Log.i("alertsavepdf","pdf file created");
} catch (FileNotFoundException e) {
    e.printStackTrace();
    finalResponse="failed";
    Log.i("alertsavepdf","savepdf error->"+e.toString());
    return finalResponse;
} catch (DocumentException e) {
    e.printStackTrace();
    finalResponse="failed";
    Log.i("alertsavepdf","savepdf error->"+e.toString());
    return finalResponse;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:08:03.280

一个循环在这里看起来很完美：

```
int count = 0;
do {
    count++;
    alertsFile = new File(alertsFiledir,pdfnameDate + "(" + count + ").pdf");
} while(alertFile.exists()); 
// Make the file 
```

`+`（如果您痴迷于速度，则StringBuilder 将比将 String 与 连接稍快。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:12:54.033

它写得很快，并没有检查是否一切正常。它显示了这个想法。您可以使用一种正则表达式模式对其进行优化，甚至可以不使用正则表达式进行优化。

```
void method() {
// ... your code
    if (file.exists()) {
        final int number = getFileNumber(file);
        file = new File(getFilePathWithoutExtAndNumber(file) + "(" + (number + 1) + ")" + getFileExt(file));
    }
}

private int getFileNumber(File file) {
    final Pattern p = Pattern.compile(".*\\((\\d+)\\)\\..*$");
    final Matcher m = p.matcher(file.getName);

    if (!m.matches()) {
        return 0;
    }
    return Integer.parseInt(m.group(1));
}

private String getFilePathWithoutExtAndNumber(File file) {
    final Pattern p = Pattern.compile("(.*)\\((\\d+)\\)\\..*$");
    final Matcher m = p.matcher(file.getName);

    if(!m.matches()) {
        getFilePathWidthoutExt(file);
    }

    return m.group(1)

}

private String getFilePathWidthoutExt(File file) {
    //not in scope of this question
}

private String getFileExt(File file) {
    // not in scope of this question
} 
```

# c# - 如何使用反射从自定义类型的方法中获取返回值？

> ID：15705850
> 
> 赞同：1
> 
> 时间：2013-03-29T15:02:21.620
> 
> 标签：c#, reflection

我在类中有一个返回自定义类型的方法。我正在使用反射来调用此方法，但无法获得响应。

注意：我无法将返回值转换为自定义类型，因为我无法在我的项目中引用 dll。

```
Response = method.Invoke(instance, new[] { parameter}); 
```

`Response`现在为空。此方法调用应返回自定义类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:05:10.370

您将收到以下响应`System.Object`：

```
object response = method.Invoke(instance, new[] { parameter }); 
```

您仍然可以获得`null`响应的多种原因，包括方法本身返回`null`或它是一种`void`方法。

# iphone - 向多个用户 IOS 发送 Facebook 请求时出错

> ID：15705851
> 
> 赞同：2
> 
> 时间：2013-03-29T15:02:25.880
> 
> 标签：iphone, ios6, facebook-ios-sdk

我无法向多个用户发送 FB 请求，不断收到“发生错误，请稍后再试”。

代码看起来像这样，当只尝试发送给单个用户时它工作得很好。

```
- (void)sendRequest:(NSArray *) targeted {

NSMutableDictionary* params =
[[NSMutableDictionary alloc]init];

if (targeted != nil && [targeted count] > 0) {
    NSString *selectIDsStr = [targeted componentsJoinedByString:@","];
    [params setObject:selectIDsStr forKey:@"to"];
}

// Display the requests dialog
[FBWebDialogs
 presentRequestsDialogModallyWithSession:nil
 message:@"Learn how to make your iOS apps social."
 title:nil
 parameters:params
 handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
     if (error) {
         // Error launching the dialog or sending request.
         NSLog(@"Error sending request.");
     } else {
         if (result == FBWebDialogResultDialogNotCompleted) {
             // User clicked the "x" icon
             NSLog(@"User canceled request.");
         } else {
             // Handle the send request callback
             NSDictionary *urlParams = [self parseURLParams:[resultURL query]];
             if (![urlParams valueForKey:@"request"]) {
                 // User clicked the Cancel button
                 NSLog(@"User canceled request.");
             } else {
                 // User clicked the Send button
                 NSString *requestID = [urlParams valueForKey:@"request"];
                 NSLog(@"Request ID: %@", requestID);
             }
         }
     }
 }]; 
```

}

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T02:53:54.400

试试这个

```
presentRequestsDialogModallyWithSession:[FBSession activeSession] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T18:25:31.067

那里有一个非常愚蠢的错误导致了这个。我将 FB 用户 ID 存储为整数，这显然不是一个好主意，因为 ID 可能非常大。

如果 id 正确，它就可以正常工作。

# jquery - jQuery Preload 没有消失

> ID：15705852
> 
> 赞同：0
> 
> 时间：2013-03-29T15:02:30.333
> 
> 标签：jquery, preloader, preload

我在这个网站上有一个预加载器：[http](http://exit.santamartastudio.es/) ://exit.santamartastudio.es/有时它会隐藏预加载器，有些则不会。我一直在寻找它，但不知道为什么它失败了。

更新（这是代码）：

```
$(document).ready(function(){
  setLoader();
  Here I load the rest of jquery
});

$(window).load(function () {
  hideloader();
}); 
```

功能：

```
// Setloader
function setLoader() {
  disable_scroll();
  $('body').css('overflow', 'hidden');
}
// Hideloader
function hideLoader() {
  var windowWidth = $(window).width(); //retrieve current window width

  $('#loader img').animate({
    left: '+=' + ((windowWidth/2) + 100)
  }, 1000, 'easeOutExpo');

  $('#loader span').animate({
    left: '-=' + ((windowWidth/2) + 100)
  }, 1000, 'easeOutExpo');
  setTimeout(function () {
    $('#loader').fadeOut(800, 'linear', function(){
      enable_scroll();
      $('body').css('overflow', 'visible');
      $(this).hide();
    });
  }, 200);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T10:44:52.707

问题是您`hideLoader()`没有正确触发。如果我在 Safari 上的控制台中输入这个；

```
hideLoader(); 
```

..一切都刚刚发生，这意味着实际实施没有任何问题。

这里的问题是代码“为时已晚”。你必须优先考虑一件事等待另一件事。现代浏览器加载脚本的速度非常快。加载可能比要加载的函数更早。我主要获取`0.0ms`和`0.1ms`加载 DOM 事件的时间。

您可以尝试将函数代码放在 jQuery 函数中，并确保尝试将函数放在就绪状态绑定（函数）之前。

除了触发就绪状态太快之外，似乎没有其他解释。尝试在页面中使用大图进行测试，以便您的就绪状态需要更长的时间，在这种情况下您可能永远不会收到错误，因为就绪状态需要更长的时间才能完成。

# angularjs - Jade、Angular 和 ngSwitch

> ID：15705855
> 
> 赞同：2
> 
> 时间：2013-03-29T15:02:51.617
> 
> 标签：angularjs, pug, angular-ui

`ng-switch`由于某种原因，即使模型更新，视图也不会切换，我有一个问题。它始终显示默认视图（仅用于测试），一切都应该在完整的 html 中正常工作，如此处测试[http://plnkr.co/edit/fKlPKy?p=preview](http://plnkr.co/edit/fKlPKy?p=preview)所以我想它来自玉：

```
 .btn-group(data-toggle='buttons-radio', style='float:right; margin-right:20px;')
      .btn(ng-model='displayType', btn-radio="'grid'")
        i.icon-th
      .btn(ng-model='displayType', btn-radio="'list'")
        i.icon-align-justify

  .switch(ng-switch, on='displayType')
    .switch(ng-switch-when='grid')
      include gridView
    .switch(ng-switch-when='list')
      include listView
    pre(ng-switch-default) {{displayType}} 
```

我可以在默认视图中看到`displayType`根据所选收音机正确更新为“网格”或“列表”

更新了该区域的完整 HTML：

```
<div ng-controller="cardCtrl" class="container ng-scope">
  <div class="card-list-header">
    <div class="card-search">
      <div align="center" class="input-append">
        <input type="text" ng-model="searchterm" placeholder="Type in filter criteria and press Enter..." ui-keypress="{13:'keypressCallback($event)'}" class="input-xxlarge ng-valid ng-dirty"><span ng-click="addCard()" class="add-on">+</span>
      </div>
    </div>
    <div data-toggle="buttons-radio" style="float:right; margin-right:20px;" class="btn-group">
      <div ng-model="displayType" btn-radio="'grid'" class="btn ng-pristine ng-valid active"><i class="icon-th"></i></div>
      <div ng-model="displayType" btn-radio="'list'" class="btn ng-pristine ng-valid"><i class="icon-align-justify"></i></div>
    </div>
  </div>
  <div ng-switch="ng-switch" on="displayType" class="switch">
    <!-- ngSwitchWhen: grid -->
    <!-- ngSwitchWhen: list -->
    <!-- ngSwitchDefault: ng-switch-default -->
    <pre ng-switch-default="ng-switch-default" class="ng-scope ng-binding">grid</pre>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T16:22:22.583

正如上面评论中所讨论的，`ng-switch="ng-switch"`正在搞乱 ng-switch 指令处理。`ng-switch="displayType"`有效，所以这个 Jade 语法应该有效：

```
.switch(ng-switch='displayType') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-04T16:16:18.717

我遇到了同样的问题——我的第一个解决方法是在 .jade 中用引号将“ng-switch on”括起来，以便将其视为单个属性——否则它会转换为两个单独的 html 属性。生产

```
<div ng-switch on="displayType" class="switch"> 
```

你会用

```
.switch("ng-switch on"="displayType") 
```

但由于 on 无论如何都是可选的（有人可能会争辩说文档中的示例会误导包含它），更好的方法是完全省略有问题的“on”（就像之前的答案一样），如下所示：

```
.switch(ng-switch="displayType") 
```

[你可以用一个在线的jade to html工具](http://html2jade.org/)来调试这种东西

# python - mpi4py 返回排名差异

> ID：15705859
> 
> 赞同：4
> 
> 时间：2013-03-29T15:03:13.803
> 
> 标签：python, linux, macos, mpi

我想从 python 脚本启动并行进程（并且，为了测试，交互式，但不是从 ipython），跨两个不同版本的 python，并从`mpi4py`. 这两个版本是（分别适用于 2 核和 8 核）：

```
Python 2.7.2 |EPD 7.2-2 (64-bit)| (default, Sep  7 2011, 16:31:15) 
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin 
```

和

```
Python 2.6.5 (r265:79063, Apr 16 2010, 13:57:41) 
[GCC 4.4.3] on linux2 
```

在第一个（学习绳索）上，交互式地我得到：

```
from mpi4py import MPI
import sys
size = MPI.COMM_WORLD.Get_size()
print size 
```

1

```
rank = MPI.COMM_WORLD.Get_rank()
print rank 
```

0

这不是我想要的（并且做`mpirun`/`mpiexec python`只是似乎挂起/什么都不做）。但如果我这样做：

```
mpiexec -n 5 python helloworld.py 
```

在

```
#!/usr/bin/env python

from mpi4py import MPI
import sys

size = MPI.COMM_WORLD.Get_size()
rank = MPI.COMM_WORLD.Get_rank()
name = MPI.Get_processor_name()

sys.stdout.write(
    "Hello, World! I am process %d of %d on %s.\n"
    % (rank, size, name)) 
```

我明白了

```
Hello, World! I am process 0 of 5 on localhost.

Hello, World! I am process 1 of 5 on localhost.

Hello, World! I am process 2 of 5 on localhost.

Hello, World! I am process 3 of 5 on localhost.

Hello, World! I am process 4 of 5 on localhost. 
```

`size`交互式启动python时如何获得> 0？

顺便说一句，做`./helloworld.py`而不是`python helloworld.py`不起作用：

```
localhost:demo jtlz2$ mpiexec -n 5 ./helloworld.py
--------------------------------------------------------------------------
Failed to find or execute the following executable:

Host:       localhost
Executable: ./helloworld.py

Cannot continue.
-------------------------------------------------------------------------- 
```

任何想法为什么？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T11:00:43.183

如果不是从`mpirun`/启动`mpiexec`，MPI 可执行文件会形成[单例](https://stackoverflow.com/questions/15578009/difference-between-running-a-program-with-and-without-mpirun/15581481#15581481)，这就是为什么`MPI_COMM_WORLD`总是大小为 1。

至于`mpiexec`找不到可执行文件，后者必须设置其“可执行”位，例如通过

```
$ chmod +x helloworld.py 
```

交互式运行 MPI 作业很棘手。大多数 MPI 实现对所有进程执行输出重定向，这就是您可以看到组合输出的原因，但输入重定向并非如此。只有等级 0 能够接收交互式输入。不过，您可以做几件事：

*   Run rank 0 interactively and let other ranks execute scripts. This would allow you to explore communication with other ranks:

    `$ mpiexec -np 1 python : -np 4 python script.py`

    This will start one copy of the interpreter in interactive mode as rank 0 and then four copies of `script.py` as ranks 1 to 4.

*   Run interactively with each rank in its own graphical terminal emulator, e.g. `xterm`:

    `$ mpiexec -np 5 xterm -e python`

    This will start 5 xterms and a separate copy of the Python interpreter in all of them. This approach requires that each `xterm` is able to talk to your X11 display server, which means that you might have to explicitly pass the value of the `DISPLAY` environment variable, e.g. using `-x DISPLAY` for Open MPI or `-genv DISPLAY` for MPICH-derived implementations.

# javascript - 被拖动时从可拖动对象中删除- jquery

> ID：15705863
> 
> 赞同：2
> 
> 时间：2013-03-29T15:03:23.620
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:11:36.923

当它们被拖动时，设置一个单击处理程序以防止默认操作，如下所示：

```
ui.draggable.find('a').click(function(e) { e.preventDefault(); }); 
```

正如我所说，当它们被拖动时执行它，以防在 drop 事件中执行它时为时已晚。

**更新：**

```
$('.draggable').draggable({ 
  start: function( event, ui ) {
    $('#dropdownAddTile').slideDown();
    ui.draggable.find('a').click(function(e) { 
      e.preventDefault(); 
    });
  },  
  stop: function() {
    $('#dropdownAddTile').slideUp();
  }, 
  containment: '#container', 
  snap:'.droppable', 
  snapMode:'inner', 
  revert:'invalid',
  snapTolerance: 32
}); 
```

所以你可以打电话`ui.draggable.find('a').click(function(e) { e.preventDefault();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:16:35.197

该问题在 Chrome、Firefox 或 IE10 中没有出现，但在 IE9 及更低版本中确实发生了。

我的建议是参加`preventDefault`这个活动。使用您的代码，

```
function handleDropEvent( event, ui ) {
    event.preventDefault();
    var draggable = ui.draggable;
    var droppable = $(this);
    var droppableId = $(this).attr("id");
    var draggableId = ui.draggable.attr("id");
    $('.draggable').draggable({containment: '#container', snap:'.droppable', snapMode:'inner', revert:'invalid',snapTolerance: 32});
    $('.droppable').droppable({drop: handleDropEvent, accept: function(e){if(e.hasClass('draggable')) { if (!$(this).hasClass('occupied')) {return true; }}}});
    var initPosit = ui.draggable.parent().attr('id');

    $.post("tiles/updateTilePosition", { draggableId:draggableId, droppableId: droppableId }).done(function(data) {

    })
    $(this).addClass('occupied');
    ui.draggable.parent().removeClass('occupied');
    if($(ui.draggable).parent() !==$(this)){
        $(ui.draggable).appendTo($( this ));
    }
} 
```

此外，如果您查看源代码，所有内容都已编码（撇号、引号等）。不确定这是如何发生的，但我会修复它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T15:06:09.143

尝试将 onclick 设置为返回 false；

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2019-01-22T20:17:22.957

如果我理解正确，您只是希望链接不能被拖动，对吗？做这个：

```
<a href="#test" draggable="false">Test</a> 
```

这基本上就是你如何禁用拖动功能 idk 为什么每个人都为此编写这么长的代码......

# ruby - 为什么我会得到“main:Object 的未定义方法 'insertsaying'”？

> ID：15705866
> 
> 赞同：0
> 
> 时间：2013-03-29T15:03:43.860
> 
> 标签：ruby, methods, datamapper

我正在使用 DataMapper 在 MySQL 中创建行。为了在我的“Ryne”表中创建一个新行，我这样做：

```
a = {:saying, "Ppffftt..!"}
Ryne.create a 
```

所以我对自己说，“既然我一直都在使用它，为什么不做一个更“巧妙”的方法来做到这一点……”：

```
def insertsaying(x)
    h = {:saying, x}
    Ryne.create h 
end 
```

但是，我在 IRB 中的输出`insert saying("Pffffft..")`是：

```
NoMethodError: undefined method `insertsaying' for main:Object
from (irb):2 
```

该方法本身是在一个 .rb 文件中定义的，我目前在 IRB 中需要该文件。除了`DataMapper.setup`调用之外，.rb 文件的其余部分如下所示：

```
DataMapper::Logger.new($stdout, :debug)
dm = DataMapper.setup :default, "mysql://php:phpwebsite@xxx.xxx.xxx.xxx/visit"
dm.resource_naming_convention = DataMapper::NamingConventions::Resource::Underscored

class Ryne
    include DataMapper::Resource
    is :reflective
    reflect /.*/
end

DataMapper.auto_upgrade!

def insertsaying(x)
    h = {:saying, x}
    Ryne.create h 
end 
```

我不确定我做错了什么，但我认为这是一个范围问题。我需要在方法中要求其他东西吗？

# ipad - iPad iOS6 是否可以使视图“轻按”，同时保持该视图上的手势识别器处于活动状态？

> ID：15705869
> 
> 赞同：0
> 
> 时间：2013-03-29T15:04:08.950
> 
> 标签：ipad, uiview, ios6, uitapgesturerecognizer, user-interaction

我正在尝试在我的一个应用程序的屏幕上创建一个覆盖。理想情况下，叠加层将接收轻击手势，同时仍允许用户与叠加层下的视图进行交互。

我知道可以通过将视图的属性设置为 NO**来“点击”视图。**`userInteractionEnabled`这允许用户与相关视图下方的视图进行交互：

```
self.overlay.userInteractionEnabled = NO; 
```

但是，我注意到这似乎也禁用了覆盖视图上的点击手势。我在某处读到，从 iOS5 开始，可以在视图之间传递触摸。这让我相信可以在覆盖视图上捕获手势，对其进行处理，然后将它们传递给覆盖层下方的视图，从而产生“轻敲”覆盖层的印象。

**有人可以指出手势识别器与 iOS5 中的视图共享触摸的方向，或者像我描述的类似覆盖的控制器吗？**

如果有实现我所描述的替代方法，很高兴知道。

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T21:15:00.740

将以下内容添加到您的手势识别器中：

`[recognizer setCancelsTouchesInView:NO]`

"*一个布尔值，影响在识别手势时是否将触摸传递到视图。* "

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T04:20:42.227

我最终只是浏览了我所有的容器视图，确定点击是否发生在它们的一个框架内，并处理这种触摸。这不是一个非常有效的解决方案，但它确实有效。

```
for(UIView* container in self.view.subviews)
{

    location = [gestureRecognizer locationInView:container];

    frame = container.frame;
    location = [gestureRecognizer locationInView:container.dummyZoomView];
    foundTappableObject = CGRectContainsPoint(frame, location);
   //do whatever with the view which was tapped

 } 
```

# python - django-vinaigrette - pip 安装错误

> ID：15705874
> 
> 赞同：0
> 
> 时间：2013-03-29T15:04:28.910
> 
> 标签：python, django, pip

我正在尝试使用 pip安装这个[小应用程序](https://github.com/ecometrica/django-vinaigrette)

```
$ sudo pip install django-vinaigrette 
```

我收到此错误

> 下载/解压 django-
> vinaigrette 下载 django-vinaigrette-0.1.1.tar.gz
> 运行 setup.py egg_info 以获取包 django-vinaigrette
> Traceback（最近一次调用最后）：
> 文件“”，第 14 行，在
> 文件“/home/me /my_proj/build/django-vinaigrette/setup.py”，第 28 行，在 long_description = read('README.rst')，文件“/home/me/my_proj/django-vinaigrette/setup.py”，第 5 行，在读取
> 返回打开（os.path.join（os.path.dirname（**文件**），fname））.read（）
> IOError：[Errno 2]没有这样的文件或目录：'/home/me/my_proj/build/django -vinaigrette/README.rst'
> 命令 python setup.py egg_info 的完整输出：
> 回溯（最近一次通话最后）：
> 
> 文件“”，第 14 行，在
> 
> 文件“/home/me/my_proj/build/django-vinaigrette/setup.py”，第 28 行，在
> 
> ```
> long_description = read('README.rst'), 
> ```
> 
> 文件“/home/me/my_proj/build/django-vinaigrette/setup.py”，第 5 行，读取
> 
> ```
> return open(os.path.join(os.path.dirname(__file__), fname)).read() 
> ```
> 
> IOError：[Errno 2] 没有这样的文件或目录：'/home/me/my_proj/build/django-vinaigrette/README.rst'

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:08:21.767

你没有做错什么。问题是 pypi 上的包没有所需的 README.rst 文件。

# php - Mysql从具有相同结构的两个不同表中选择

> ID：15705877
> 
> 赞同：0
> 
> 时间：2013-03-29T15:04:45.953
> 
> 标签：php, mysql

你能提供给我一些东西吗，如何推送两个不同但结构相同的表，我的意思是所有信息都是一样的，只是表名不同，`mailings`而且`mailings_archive`。一张桌子没问题

```
$query = sprintf("SELECT * FROM %smailings  WHERE hidden=0 AND draft=1 %sORDER BY category_id, mailing_segment", $this->dbprefix, $language);

$this->mailings[] = array('id' => $row->id,
                                      'mailing_naam' => $row->mailing_naam,
                                      'mailing_subject' => $row->mailing_subject,
                                      'mailing_from_name' => $row->mailing_from_name,
                                      'mailing_bounceaddress' => $row->mailing_bounceaddress,
                                      'mailing_body' => $row->mailing_body,
                                      'mailing_status' => $row->mailing_status,
                                      'mailing_segment' => $row->mailing_segment,
                                      'mailing_total_subscribers' => $row->mailing_total_subscribers,
                                      'mailing_total_sent' => $row->mailing_total_sent,
                                      'category_id' => $row->category_id,
                                      'utm_campaign' => $row->utm_campaign,
                                      'language' => $row->language);
        } 
```

现在看起来是这样的，如何放入这个数组，另一个表数据？别忘了，每个字段都是一样的，只是表名不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:07:14.997

```
(SELECT * FROM %smailings  WHERE hidden=0 AND draft=1 %sORDER BY category_id, mailing_segment)
UNION
(SELECT * FROM another_table WHERE hidden=0 AND draft=1 %sORDER BY category_id, mailing_segment)

(select * from table1)
union
(select * from table2) 
```

但这将导致一个无序的结果集，即使您在每个请求中放置“order by”，但这可能是最快的。

如果您需要在表 (1....8) 之间对所有内容进行排序，那么这是一种语法：

```
select * from table1
union
select * from table2 order by id 
```

如果您想要两个单独的订单（例如一张桌子的 4...8，另一张桌子的 1..4）：

```
select * from 
(select * from test1 order by id asc) as t1
union all
(select * from test2 order by id asc); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:07:42.463

使用联合方法..

尝试查询：select 1 union select 2

# android - 如何从 Sherlock 操作栏菜单项中移除蓝光？

> ID：15705878
> 
> 赞同：2
> 
> 时间：2013-03-29T15:04:48.007
> 
> 标签：android, actionbarsherlock

有人知道如何消除围绕按下的操作栏菜单项的烦人的蓝色光芒吗？

![在此处输入图像描述](../Images/683d30d5cd17c6b3f8961a48111d790f.png)

谢谢，姆拉乔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T15:13:56.823

是的，您可以覆盖...

```
android:actionBarItemBackground 
```

...为每个操作项的背景定义一个可绘制资源。例如

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarItemBackground">@drawable/ab_item_background</item>
</style> 
```

[在此处](http://developer.android.com/guide/topics/ui/actionbar.html)查看文档。

注意：如果您想支持 API 级别低于 14 的 Android 版本，您必须在您的应用中包含[支持包](http://developer.android.com/tools/extras/support-library.html)和[ActionBarSherlock](http://actionbarsherlock.com/) (ABS)。之后，您需要为 Android 标准和 ABS 设置背景：

```
<style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
    <item name="android:actionBarItemBackground">@drawable/ab_item_background</item>
    <item name="actionBarItemBackground">@drawable/ab_item_background</item>
</style> 
```

除了可绘制对象，您还可以使用颜色，例如：

```
 <item name="actionBarItemBackground">@color/myColorDefinition</item> 
```

**ps** ...或者最好，使用可绘制的状态：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

  <item android:drawable="@drawable/button_pressed"
        android:state_pressed="true" />

  <item android:drawable="@drawable/button_default" />

</selector> 
```

# c# - UnauthorizedAccessException 与 IOException

> ID：15705880
> 
> 赞同：4
> 
> 时间：2013-03-29T15:04:53.720
> 
> 标签：c#, .net-3.5

我列出了来自 Nas 共享的一些文件夹，获取文件夹属性并列出子文件夹。对于我没有访问权限的文件夹，我得到两个不同的例外

1.  `System.UnauthorizedAccessException`: 拒绝访问路径“Z:\info”。
2.  `System.IO.IOException`： 找不到网络路径。

第二个需要很长时间才能被捕获，这会减慢应用程序

我的问题是为什么对于某些共享我找不到网络路径而其他共享访问被拒绝？有什么不同？以及如何避免需要时间的第二个异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:09:08.527

> 我的问题是为什么对于某些共享我找不到网络路径而其他共享访问被拒绝？有什么不同？

如果快速找到路径，但您没有权限，您将很快收到`UnauthorizedAccessException`。

但是，如果系统试图发现网络共享是否有效，这可能需要一段时间。在确定网络路径根本无效之前，它需要进行相当多的网络访问，这可能需要一些时间。

> 以及如何避免需要时间的第二个异常。

做到这一点的唯一真正方法是不访问不存在的共享。这并不总是可行的 - 如果您需要在运行时确定它们是否存在，您只需要围绕这可能很慢的事实进行设计。

There are many ways to improve this, however - if you're checking against multiple shares, you could do these checks in parallel. Given that this is really IO bound, threading could make a huge difference in overall responsiveness of your application as you can check all of the shares at the same time, instead of sequentially.

# javascript - Jquery 表单验证脚本

> ID：15705882
> 
> 赞同：1
> 
> 时间：2013-03-29T15:04:56.447
> 
> 标签：javascript, jquery, validation

我想编写自己的 JQUERY 表单验证脚本，而不是使用 JQUERY 验证插件。我对 JQUERY 还比较陌生，所以我的脚本可能不是最精简的。

我编写了以下脚本，它似乎根本不起作用，但从我的研究和阅读来看，一切似乎都还可以。

所以如果有人有时间用专业的眼光看一下下面的脚本，看看我是否在做一些愚蠢的事情

干杯

```
$(document).ready(function(){

var form = $("#SignupForm");
var email1 = $("#email1");
var email2 = $("#email2");
var firstname = $("#firstname");
var surname = $("#surname");

var firstname_valid_prompt = $("#firstname_valid_prompt");
var firstname_correct_image = $("#firstname_correct_image");
var surname_valid_prompt = $("#surname_valid_prompt");
var surname_correct_image = $("#surname_correct_image");
var email1_valid_prompt = $("#email1_valid_prompt");
var email1_correct_image = $("#email1_correct_image");
var email2_valid_prompt = $("#email2_valid_prompt");
var email2_correct_image = $("#email2_correct_image");

var lettersReg = /^([a-zA-Z,-]|\s)*$/;
var emailReg = /^(\S+@\S+(\.\S+)*\.(\S{2,4}))?$/i.test(f.val()) && !/[\(\)\<\>\,\;\:\\\"\[\]]/;

email1.keyup(validateEmail1);
email2.keyup(validateEmail2);
firstname.keyup(validateFirstname);
surname.keyup(validateSurname);

form.submit(function(){
    if (validateEmail1() & validateEmail2() & validateFirstname() & validateSurname()){
    return true ;
    }       
    else {
    return false;   
    }

});

function validateEmail1(){
    if (email1.val().length == 0){
    email1.addClass("error");
    email1_valid_prompt.removeClass("correct");
    email1_valid_prompt.text("You Must Enter Your E-mail Address");
    email1_correct_image.removeClass("correct");
    email1_valid_prompt.addClass("error");
    return false;   
    } 
    else{
        if(!emailReg.test(email1.val())) {
        email1.addClass("error");
        email1_valid_prompt.removeClass("correct");
        email1_valid_prompt.text("Please Enter a Valid E-mail Address");
        email1_correct_image.removeClass("correct");
        email1_valid_prompt.addClass("error");
        return false;
        }
        else {
        email1.removeClass("error");    
        email1_valid_prompt.text("");
        email1_correct_image.addClass("correct");
        email1_valid_prompt.removeClass("error");
        return true;
        }
    }
} // Email Function End

function validateEmail2(){
    if (email2.val().length == 0){
    email2.addClass("error");
    email2_valid_prompt.removeClass("correct");
    email2_valid_prompt.text("You Must Confirm Your E-mail Address");
    email2_correct_image.removeClass("correct");
    email2_valid_prompt.addClass("error");
    return false;   
    } 
    else{
        if(!emailReg.test(email2.val())) {
        email2.addClass("error");
        email2_valid_prompt.removeClass("correct");
        email2_valid_prompt.text("Please Enter a Valid E-mail Address");
        email2_correct_image.removeClass("correct");
        email2_valid_prompt.addClass("error");
        return false;   
        }
        else{
            if($("#email1").val() != $("#email2").val()){
            email2.addClass("error");
            email2_valid_prompt.removeClass("correct");
            email2_valid_prompt.text("Your E-mail Addresses Do Not Match");
            email2_correct_image.removeClass("correct");
            email2_valid_prompt.addClass("error");
            return false;   
            }
            else {
            email2.removeClass("error");    
            email2_valid_prompt.text("");
            email2_correct_image.addClass("correct");
            email2_valid_prompt.removeClass("error");
            return true;
            }
            }
        }
} // Email 2 Function End

function validateFirstname(){
    if (firstname.val().length == 0){
    firstname.addClass("error");
    firstname_valid_prompt.removeClass("correct");
    firstname_valid_prompt.text("You Must Enter Your Firstname");
    firstname_correct_image.removeClass("correct");
    firstname_valid_prompt.addClass("error");
    return false;   
    } 
    else{
         if(!lettersReg.test(firstname.val())) {
        firstname.addClass("error");
        firstname_valid_prompt.removeClass("correct");
        firstname_valid_prompt.text("Please Only Use Letters");
        firstname_correct_image.removeClass("correct");
        firstname_valid_prompt.addClass("error");
        return false;   
        }
        else {
        firstname.removeClass("error"); 
        firstname_valid_prompt.text("");
        firstname_correct_image.addClass("correct");
        firstname_valid_prompt.removeClass("error");
        return true;
        }
        }
} // Firstname Function End

function validateSurname(){
    if (surname.val().length == 0){
    surname.addClass("error");
    surname_valid_prompt.removeClass("correct");
    surname_valid_prompt.text("You Must Enter Your Surname");
    surname_correct_image.removeClass("correct");
    surname_valid_prompt.addClass("error");
    return false;   
    } 
    else{
        if(!lettersReg.test(surname.val())) {
        surname.addClass("error");
        surname_valid_prompt.removeClass("correct");
        surname_valid_prompt.text("Please Only Use Letters");
        surname_correct_image.removeClass("correct");
        surname_valid_prompt.addClass("error");
        return false;   
        }
        else {
        surname.removeClass("error");   
        surname_valid_prompt.text("");
        surname_correct_image.addClass("correct");
        surname_valid_prompt.removeClass("error");
        return true;
        }
    }
} // Surname Function End

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:22:33.137

您有 2 个错误。修复它们，您的脚本将起作用。

**错误 #1**代码：

```
if (validateEmail1() & validateEmail2() & validateFirstname() & validateSurname()) { 
```

一定是

```
if (validateEmail1() && validateEmail2() && validateFirstname() && validateSurname()) { 
```

[在此处](https://stackoverflow.com/a/7310120/949476)阅读逻辑运算符`&&`和位运算符之间的区别。`&`

**错误 #2**。电子邮件正则表达式不正确，应该只是：

```
var emailReg = /^(\S+@\S+(\.\S+)*\.(\S{2,4}))?$/i; 
```

工作演示：http: [//jsfiddle.net/76HYV/](http://jsfiddle.net/76HYV/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T23:23:39.167

除了 dfsq 的回答之外，在表单中显示错误消息的一种更有效的方式是通过 jQuery 对象完成的:)

```
//create an "error message" div, and insert it after the form field
$("<div/>",{
    class: 'errorDiv',
    id: 'errorDiv1'
}).insertAfter("#field1");
$("#errorDiv1").html("an error message"); 
```

这样，您不需要为每个字段添加/删除类:)

示例：http: [//jsfiddle.net/9BsFH/1/](http://jsfiddle.net/9BsFH/1/)

# windows - Windows Github 基础知识和冲突处理（如 VSS）

> ID：15705883
> 
> 赞同：3
> 
> 时间：2013-03-29T15:04:56.907
> 
> 标签：windows, github, conflict, rollback, merge-conflict-resolution

我是 Git / GitHub 的新手（过去使用过 VSS）。根据我的[SO Post](https://stackoverflow.com/questions/10722989)，我使用的是**[Windows GitHub](http://windows.github.com/)**，与基于命令提示符的 Git bash 内容相比，它的用户友好。特别是同步功能，不用担心SSH等......

我试图了解 VSS 方面的流程（至少基本签入/签出和回滚）。我的理解 -

> 1.  最初，在本地**克隆**一个远程存储库（可能就像在 VSS 中检出整个项目，但在 Git 中它是一个单独的克隆副本）
> 2.  稍后我只需要**拉**取（比如获取最新的 VSS）。进行更改、**提交**（全部在本地克隆分支上完成）——比如登台签入
> 3.  最后，将提交（分阶段更改）**推**送到远程存储库（如 VSS 中的最终签入）。

**该工具可以检测/处理冲突吗？** 我找到了一个***很好的[SO Post](https://stackoverflow.com/questions/13210706/github-conflict-resolving)***，但需要确认。我相信我会在推送时收到冲突消息。然后我将不得不手动更改文件（合并更改），然后再次推送它（就像我们在 VSS 中合并）。我必须使用命令行还是可以在工具中使用？

以及如何从 Git bash 或工具**回滚到上一个版本**？

* * *

我还找到了一些 VS.Net 源代码控制**[提供程序](https://stackoverflow.com/questions/507343/using-git-with-visual-studio)**和**[扩展](http://code.google.com/p/gitextensions/)**，但有些让我回到了旧的 SSH 和其他复杂的东西。我想保持简单，并尽量减少复杂性以鼓励我的团队......如果你明白我的意思。VSS 使用或学习并不痛苦 :-)

参考

*   [好胜 Github 文章](http://arstechnica.com/information-technology/2012/05/hands-on-github-for-windows-takes-the-pain-out-of-using-git/)
*   [git 概念的酷指南](http://rogerdudler.github.com/git-guide/)
*   [Git 工具](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T01:15:43.320

> 该工具可以检测/处理冲突吗？

是的，但仍建议使用命令行：更多详细信息请参阅“[关于冲突，Windows 的 GitHub 将我置于“变基”状态，如何从那里开始？](https://stackoverflow.com/questions/15149953/on-conflict-github-for-windows-puts-me-in-rebasing-state-how-to-go-from-ther) ”

> 我可以从 Git bash 或工具回滚到以前的版本吗？

GitHub for Windows 提供了不同的选项（回滚、还原、丢弃），您[现在甚至可以撤消这些操作](https://stackoverflow.com/a/15545060/6309)。

# java - WS-Addressing 的目的是什么？

> ID：15705892
> 
> 赞同：8
> 
> 时间：2013-03-29T15:05:46.677
> 
> 标签：java, web-services, soap, jax-ws, ws-addressing

我只是对ws-addressing感到困惑。

维基百科说它是一种传输中立机制的规范，允许网络服务“交流寻址信息”。

传达寻址信息？难道 SOAP Web 服务一开始就没有这种能力，否则它们将如何进行通信？

鉴于它似乎提供了核心功能，它提供了什么价值，为什么不是默认内容的一部分？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-29T15:32:54.567

**WS-Addressing在***通过不同协议进行**异步*通信的上下文中最有用。它用于标记消息，以便稍后可以相互协调请求和延迟响应，而不管它是通过哪个协议发送的。

 *如果您一直使用 HTTP，则不需要 WS-Addressing，这就是默认情况下关闭它的原因。但是，我们倾向于假设 SOAP 只能通过 HTTP 传输，而实际上它可以通过其他方式传输，例如**SMTP**或**JMS**。他是一个说明这一点的例证。

![在此处输入图像描述](../Images/f8dba95b4cfe6ecdc7ecd45296239a52.png)

使用**WS-Addressing**，特定于传输的数据被复制到 SOAP 标头。这将*地址*数据从协议中解耦到 SOAP 消息本身，实现了 Wikipedia 所谈论的“传输中立性”。

![在此处输入图像描述](../Images/b562e043cf4e9f16fc96f5e685713384.png)

WS-Addressing 在 WS* 规范组（即 WS-Security、WS-ReliableMessaging、WS-Coordination）中扮演着重要角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T19:15:21.163

根据[W3C 组织的 WS-Addressing 规范](https://www.w3.org/Submission/ws-addressing/)：

> /wsa:MessageID
> 此可选元素（类型为 xs:anyURI）传达 [message id] 属性。如果存在 wsa:ReplyTo 或 wsa:FaultTo，则必须存在此元素。
> 
> /wsa:ReplyTo
> 此可选元素（类型为 wsa:EndpointReferenceType）提供 [reply endpoint] 属性的值。如果需要回复，则必须存在此元素。如果存在此元素，则必须存在 wsa:MessageID。
> 
> /wsa:FaultTo
> 此可选元素（类型为 wsa:EndpointReferenceType）提供 [故障端点] 属性的值。如果存在此元素，则必须存在 wsa:MessageID。*

# c# - default(T) 带有空集合而不是 null

> ID：15705895
> 
> 赞同：16
> 
> 时间：2013-03-29T15:05:53.273
> 
> 标签：c#, .net

我想要一个通用方法，它返回传递类型的默认值，但对于集合类型，我想获得空集合而不是 null，例如：

```
GetDefault<int[]>(); // returns empty array of int's
GetDefault<int>(); // returns 0
GetDefault<object>(); // returns null
GetDefault<IList<object>>(); // returns empty list of objects 
```

我开始写的方法如下：

```
public static T GetDefault<T>()
{
   var type = typeof(T);
   if(type.GetInterface("IEnumerable") != null))
   {
      //return empty collection
   }
   return default(T);   
} 
```

如何完成它？

**编辑：** 如果有人想获得某种类型的默认值，基于*类型实例*而不是*类型标识符*，可以使用下面的这种构造，即：

```
typeof(int[]).GetDefault(); 
```

该实现在内部基于@280Z28 答案：

```
public static class TypeExtensions
{
    public static object GetDefault(this Type t)
    {
        var type = typeof(Default<>).MakeGenericType(t);
        var property = type.GetProperty("Value", BindingFlags.Static | BindingFlags.Public);
        var getaccessor = property.GetGetMethod();
        return getaccessor.Invoke(null, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-29T15:23:09.107

您可以使用静态构造函数的魔力来有效地做到这一点。要在代码中使用默认值，只需使用`Default<T>.Value`. `T`在您的申请期间，该值只会针对任何给定类型评估一次。

```
public static class Default<T>
{
    private static readonly T _value;

    static Default()
    {
        if (typeof(T).IsArray)
        {
            if (typeof(T).GetArrayRank() > 1)
                _value = (T)(object)Array.CreateInstance(typeof(T).GetElementType(), new int[typeof(T).GetArrayRank()]);
            else
                _value = (T)(object)Array.CreateInstance(typeof(T).GetElementType(), 0);
            return;
        }

        if (typeof(T) == typeof(string))
        {
            // string is IEnumerable<char>, but don't want to treat it like a collection
            _value = default(T);
            return;
        }

        if (typeof(IEnumerable).IsAssignableFrom(typeof(T)))
        {
            // check if an empty array is an instance of T
            if (typeof(T).IsAssignableFrom(typeof(object[])))
            {
                _value = (T)(object)new object[0];
                return;
            }

            if (typeof(T).IsGenericType && typeof(T).GetGenericArguments().Length == 1)
            {
                Type elementType = typeof(T).GetGenericArguments()[0];
                if (typeof(T).IsAssignableFrom(elementType.MakeArrayType()))
                {
                    _value = (T)(object)Array.CreateInstance(elementType, 0);
                    return;
                }
            }

            throw new NotImplementedException("No default value is implemented for type " + typeof(T).FullName);
        }

        _value = default(T);
    }

    public static T Value
    {
        get
        {
            return _value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-29T15:12:10.217

`IList<object>`不是集合类型，它是一个接口。您可以返回*几十个可能的课程。*

如果你传入一个实际的集合类型，你可以这样做：

```
public static T GetDefault<T>() where T : new
{
   if (typeof(IEnumerable).IsAssignableFrom(typeof(T)))
   {
      return new T();
   }
   return default(T);   
}

GetDefault<List<object>>(); 
```

要在没有默认构造函数的情况下处理*空集合*和`null`类型值，您可以这样做：

```
public static T GetDefault<T>()
{
   if (typeof(IEnumerable).IsAssignableFrom(typeof(T)))
   {
            if (typeof(T).IsGenericType)
            {
                Type T_template = typeof(T).GetGenericTypeDefinition();
                if (T_template == typeof(IEnumerable<>))
                {
                    return (T)Activator.CreateInstance(typeof(Enumerable).MakeGenericType(typeof(T).GetGenericArguments()));
                }
                if (T_template == typeof(IList<>))
                {
                    return (T)Activator.CreateInstance(typeof(List<>).MakeGenericType(typeof(T).GetGenericArguments()));
                }
            }

      try {
          return Activator.CreateInstance<T>();
      }
      catch (MissingMethodException) {} // no default exists for this type, fall-through to returning null
   }
   return default(T);   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-30T08:37:17.330

从 C# 9 开始，您可以使用构造函数省略类型名称。也许这对您的情况很有用。

> ```
> int[] array = new(); 
> ```

> ```
> var list = MyList?.Select(o => o.Id).ToList() ?? new (); 
> ```

# javascript - 启用硬键 (ENTER) 以使用 JavaScript 模拟按钮单击

> ID：15705900
> 
> 赞同：6
> 
> 时间：2013-03-29T15:06:22.047
> 
> 标签：javascript

我们有一个 HTML 应用程序，它在配送中心收集交易数据（拣货、入库、补货等）。我们想使用带有 WinMobile 6.5 和浏览器的 Intermec CK71 作为数据收集设备。目前我们的用户扫描/键入数据输入字段，然后单击“下一步”按钮在服务器上输入数据。

有没有办法使用 JavaScript 来启用硬键 (ENTER) 来模拟 NEXT 按钮上的光标点击？我们可以使用 Intermec 的板载键盘重新映射实用程序获取 CK71 的 ENTER 键扫描码。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:09:25.863

使*“下一步”*按钮成为一个按钮，`type="submit"`以便`onsubmit`在表单上触发。

按下`enter`与“单击”按钮相同，它也会导致`onsubmit`触发。

这也需要你有一个`<form>`环绕的按钮。你可以有没有表单的按钮，我认为这是糟糕的设计。

如果这个解决方案对你有用，你会很高兴，因为你不需要陷入任何 JavaScript 的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:09:38.530

你需要做的是为键盘添加一个事件监听器，像这样

```
element.addEventListener("keydown", keyfield, false); 
```

然后设置一个函数来获取密钥

```
function keyfield (e) {
    var keyCode = e.keyCode;
} 
```

获取回车键的键码 (13)

做

```
function keyfield (e) {
    var keyCode = e.keyCode;
    if(keycode==13){
    form.submit(); //or button.click()
     }
} 
```

# python - 在python中复制文件

> ID：15705902
> 
> 赞同：0
> 
> 时间：2013-03-29T15:06:32.453
> 
> 标签：python

```
#!/usr/bin/env python

from os import path, access, R_OK  # W_OK for write permission.
import os`enter code here`
import shutil
import sys
import glob

PATH = 'C:\Windows\PsExec.exe'
PATH2 = 'C:\Windows'
SHARE_PATH = '\\\\blue\\install$\\Tools\\Library'
dirList=os.listdir(SHARE_PATH)

if path.exists(PATH) and path.isfile(PATH) and access(PATH, R_OK):
    print ("File exists and is readable")
elif path.exists(SHARE_PATH) and access(SHARE_PATH, R_OK):
    shutil.copyfile(SHARE_PATH, PATH2)
    print ("Copying File") 
```

我可以在没有错误的情况下运行此脚本，但由于某种原因，我无法从
共享驱动器复制文件......现在当我尝试运行该文件时，出现以下错误。

```
Traceback (most recent call last):
  File ".\file_reader3.py", line 18, in <module>
    shutil.copyfile(SHARE_PATH, PATH2)
  File "C:\Python33\lib\shutil.py", line 109, in copyfile
    with open(src, 'rb') as fsrc:
PermissionError: [Errno 13] Permission denied: '\\\\blue\\install$\\Tools\\Library' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:24:20.900

```
from os import path, access, R_OK  # W_OK for write permission.
import os
import shutil
import sys
import glob

PATH = 'C:\Windows\PsExec.exe'
SHARE_PATH = '\\\\blue\\sol\\Tools\\Library\\PsExec.exe'

#This part Will check if the file Exist
if path.exists(PATH) and path.isfile(PATH) and access(PATH, R_OK):
    print ("File exists and is readable")
#This part will Check if the file exist on the server, and copy to the local machine
elif path.exists(SHARE_PATH) and \
     path.isfile(SHARE_PATH) and \
     access(SHARE_PATH, R_OK):
    shutil.copy(SHARE_PATH, PATH)
    print ("Copying File") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:40:03.040

看起来“shutil.copyfile(SHARE_PATH, PATH2)”行正在尝试将一个目录“\\blue\install$\Tools\Library”复制到另一个目录“C:\Windows”。copyfile 仅用于文件。

同样根据文档（[http://docs.python.org/2/library/shutil.html](http://docs.python.org/2/library/shutil.html)），您需要指定完整的文件路径和名称。因此，假设 '\\blue\install$\Tools\Library' 是一个文件（尽管我认为它是一个目录），它会尝试将其复制到一个名为“c:\windows”的文件中，而不是复制到该目录中。所以你需要指定“c:\windows\filename”作为第二个参数。

如果您尝试复制整个目录，请尝试 shutil.copytree。

此外，最好尝试打开文件并捕获异常，而不是先测试权限。见[http://docs.python.org/2/library/os.html#files-and-directories](http://docs.python.org/2/library/os.html#files-and-directories)

# jquery - jQuery：在选择器中使用变量

> ID：15705904
> 
> 赞同：0
> 
> 时间：2013-03-29T15:06:43.833
> 
> 标签：jquery

请注意，我不是 jQuery 大师，只是还在学习。

我有这个 looong 功能：

`$('.client1 > *:first-of-type, .client2 > *:first-of-type, .client3 > *:first-of-type, .client4 > *:first-of-type, .client5 > *:first-of-type').append('<span class="jsi"/>');`

它确实有效，是的，但我知道它效率不高且不易扩展，因为每次我必须添加一个新的“客户端”时，我都必须将它添加到选择器列表中。

所以我知道我可以为零件使用（一个）变量`> *:first-of-type`，也可以为零件使用“数组”（我不知道我说得对不对）`.clientX`。

老实说，这有点超出我的想象。

这是我尝试过的，但当然不起作用：

```
var fot = "> *:first-of-type";
$('.client1' + fot, '.client2' + fot, '.client3' + fot, '.client4' + fot, '.client5' + fot).append('<span class="jsi"/>'); 
```

发生的事情不仅是我不想重复自己，而且能够更有效地扩展它，因为需要将新客户添加到该功能中。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:09:51.163

只需添加一个额外的类，就像`client`您不再需要所有这些东西一样。

```
<div class="client client1">..</div>
<div class="client client2">..</div> 
```

所以你可以选择所有带有 class 的元素`client`。

```
$('.client > *:first-of-type').each(function() {
    $(this).append('<span class="jsi" />');
}); 
```

# html - 突出显示选定的菜单项

> ID：15705908
> 
> 赞同：0
> 
> 时间：2013-03-29T15:06:59.363
> 
> 标签：html, css, menu, highlighting

我有这个菜单：

```
<ul class="semiopaquemenu">
  <li><a href="http://www.artoparadosikilkis.gr/home/">home</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/proionta/">products</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/paraggeleies/">orders</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/location/"class="selected">location</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/about-us/">about-us</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/contact-us/">contact</a></li>
</ul> 
```

这是一个水平菜单，在鼠标悬停时突出显示，当前页面也在单击时突出显示我的问题是如何修改我的代码，以便我只能放置一次。该示例突出显示位置选项卡，代码位于位置页面上，我想要的是类似于

```
<ul class="semiopaquemenu">
  <li><a href="http://www.artoparadosikilkis.gr/home/"if selected=true then class="selected">home</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/proionta/"if selected=true then class="selected">products</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/paraggeleies/"if selected=true then class="selected">orders</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/location/"if selected=true then class="selected">location</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/about-us/"if selected=true then class="selected">about-us</a></li>
  <li><a href="http://www.artoparadosikilkis.gr/contact-us/"if selected=true then class="selected">contact</a></li>
</ul> 
```

# c# - 设计 - C# 日期格式说明符中的约定

> ID：15705909
> 
> 赞同：2
> 
> 时间：2013-03-29T15:07:07.133
> 
> 标签：c#, .net, datetime

我有一个问题，在 C# 中的 ParseExact、TryParseExact 等方法中指定日期格式。 `yy-year` `dd-date` `MM-month` `mm-minutes` `ss-seconds`ETC

很明显，只需查看文档以了解格式，但只是好奇是否有任何设计理念以这种方式命名它们代表什么。我希望使用大写字母和小写时间指定日期。只是想知道，假设您将来正在开发 .Net 10.0 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:11:24.960

我认为，就像所有这些事情一样，这可能是过去遗留下来的约定。

他们可能从 hh:mm 开始，然后想“等一下，我们还有一个 m！”

我同意本可以决定只对所有日期部分设置上限，但也许他们决定尽可能不使用不必要的上限。

# spring - apache shiro：如何使用 spring applicationcontext 设置 authenticationStrategy？

> ID：15705910
> 
> 赞同：3
> 
> 时间：2013-03-29T15:07:07.277
> 
> 标签：spring, jakarta-ee, web, shiro, realm

在基于 Spring 的 Web 应用程序中，我一直在努力使用 shiro 1.2.1 进行 authenticationStrategy 设置。我有2个领域。一个针对 ldap 进行身份验证`database`，一个针对 ldap。两者`realms`都工作正常，只是我想要一个`FirstSuccessfulStrategy`，但似乎两个领域仍在被调用。这是我的安全应用程序上下文：

```
<bean id="passwordService" class="org.apache.shiro.authc.credential.DefaultPasswordService">
    <property name="hashService" ref="hashService" />

</bean>

<bean id="hashService" class="org.apache.shiro.crypto.hash.DefaultHashService">
    <property name="hashAlgorithmName" value="SHA-512" />
    <property name="hashIterations" value="500000" />
</bean>

<bean id="SaltedSha512JPARealm" class="bla.bla.webapp.security.SaltedSha512JPARealm">
    <property name="credentialsMatcher">
        <bean class="org.apache.shiro.authc.credential.PasswordMatcher">
            <property name="passwordService" ref="passwordService"/>
        </bean>
    </property>

</bean>

<bean id="ldapContextFactory" class="org.apache.shiro.realm.ldap.JndiLdapContextFactory">
    <property name="url" value="${user.ldap.connection.url}"/>
    <property name="authenticationMechanism" value="${user.ldap.connection.auth_mecanism}"/>
</bean>

<bean id="ldapRealm" class="bla.bla.webapp.security.LDAPRealm">
    <property name="userDnTemplate" value="${user.ldap.connection.userDnTemplate}"/>
    <property name="contextFactory" ref="ldapContextFactory" />

</bean>

<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager" depends-on="roleRepository,roleRightRepository,rightRepository,userRepository">

    <property name="realms">
        <list>
            <ref local="ldapRealm"/>
            <ref local="SaltedSha512JPARealm"/>
        </list>
    </property>
    <property name="authenticator.authenticationStrategy">
        <bean class="org.apache.shiro.authc.pam.FirstSuccessfulStrategy"/>
    </property>

</bean> 
```

有什么我做得不好的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T12:59:31.323

`FirstSuccessfulStrategy`意味着您的身份验证器将尝试所有领域来验证用户身份，直到第一次成功。您的领域已按顺序配置：`ldapRealm`, `SaltedSha512JPARealm`。因此，如果`lapRealm`将失败验证器将尝试第二个。为了解决这个问题，您可以尝试将最成功或最快的领域配置为第一个，例如，您可以将领域顺序更改为`SaltedSha512JPARealm`, `ldapRealm`：

```
<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager" depends-on="roleRepository,roleRightRepository,rightRepository,userRepository">

    <property name="realms">
        <list>
            <ref local="SaltedSha512JPARealm"/>
            <ref local="ldapRealm"/>
        </list>
    </property>
    <property name="authenticator.authenticationStrategy">
        <bean class="org.apache.shiro.authc.pam.FirstSuccessfulStrategy"/>
    </property>

</bean> 
```

但是你应该明白，对于这个配置如果`SaltedSha512JPARealm`会失败，authenticator 会尝试`ldapRealm`。

或者您可以尝试为此领域使用不​​同的令牌类。但只有当您对它们中的每一个都有不同的身份验证入口点时，它才会起作用。

**UPD**

似乎`ModularRealmAuthenticator`是这样设计的，它总是会尝试通过所有领域对用户进行身份验证。`FirstSuccessfulStrategy`只能影响认证结果。它将首先返回成功`AuthenticationInfo`。为了实现您的目标，您需要覆盖`ModularRealmAuthenticator#doMultiRealmAuthentication`方法。它看起来像这样：

```
protected AuthenticationInfo doMultiRealmAuthentication(Collection<Realm> realms, AuthenticationToken token) {
    AuthenticationStrategy strategy = getAuthenticationStrategy();
    AuthenticationInfo aggregate = strategy.beforeAllAttempts(realms, token);
    if (log.isTraceEnabled()) {
        log.trace("Iterating through {} realms for PAM authentication", realms.size());
    }
    for (Realm realm : realms) {
        aggregate = strategy.beforeAttempt(realm, token, aggregate);
        if (realm.supports(token)) {
            log.trace("Attempting to authenticate token [{}] using realm [{}]", token, realm);
            AuthenticationInfo info = null;
            Throwable t = null;
            try {
                info = realm.getAuthenticationInfo(token);
            } catch (Throwable throwable) {
                t = throwable;
                if (log.isDebugEnabled()) {
                    String msg = "Realm [" + realm + "] threw an exception during a multi-realm authentication attempt:";
                    log.debug(msg, t);
                }
            }
            aggregate = strategy.afterAttempt(realm, token, info, aggregate, t);
            // dirty dirty hack
            if (aggregate != null && !CollectionUtils.isEmpty(aggregate.getPrincipals())) {
                return aggregate;
            }
            // end dirty dirty hack
        } else {
            log.debug("Realm [{}] does not support token {}.  Skipping realm.", realm, token);
        }
    }
    aggregate = strategy.afterAllAttempts(token, aggregate);
    return aggregate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T12:35:04.697

```
<property name="authenticator.authenticationStrategy">
    <bean class="org.apache.shiro.authc.pam.FirstSuccessfulStrategy"/>
</property> 
```

上面的定义是错误的。定义如下

```
<property name="authenticator.authenticationStrategy" ref="authcStrategy"/> 
```

并分别定义下面的bean定义

```
<bean id="authcStrategy"     class="org.apache.shiro.authc.pam.FirstSuccessfulStrategy"/> 
```

然后它将按预期工作

# java - 如何将包含双引号的行分配给Java中的字符串变量？

> ID：15705914
> 
> 赞同：1
> 
> 时间：2013-03-29T15:07:18.920
> 
> 标签：java

对不起，如果这是一个愚蠢的问题。这是我的问题。我有一个字符串变量 a。我需要将以下行分配给：

```
<td align="center" width="20%" ><a href="/listen/asid/ 
```

但是当我使用以下语法时：

```
a="<td align="center" width="20%" ><a href="/listen/asid/" 
```

它不起作用，因为 Java 将行内的双引号混淆为开始和结束双引号。我怎样才能正确地做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:09:01.923

```
String a = "<td align=\"center\" width=\"20%\" ><a href=\"/listen/asid/"; 
```

\" 此时在文本中插入双引号字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:08:07.550

转义特殊字符：

```
String a = "<td align=\"center\" width=\"20%\" ><a href=\"/listen/asid/"
System.out.println(a); 
```

结果将是

```
<td align="center" width="20%" ><a href="/listen/asid/ 
```

[阅读更多](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:08:58.467

您应该对引号使用转义字符 - `\"`，这将评估为字符串中的引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:10:11.490

您需要“逃避”`"`使用`\`

[http://docs.oracle.com/javase/tutorial/java/data/characters.html](http://docs.oracle.com/javase/tutorial/java/data/characters.html)

`a="<td align=\"center\" width=\"20%\" ><a href=\"/listen/asid/"`

# java - 是否可以在 webdefault.xml 的 :8888 内运行主 Servlet 和 ProxyServlet？

> ID：15705919
> 
> 赞同：3
> 
> 时间：2013-03-29T15:07:47.390
> 
> 标签：java, servlets, jetty, embedded-jetty, jetty-8

我有一个在码头 servlet 中运行的 webapp。

当它启动时，它在 localhost:8888/ 上运行

我正在使用单独的 Ruby / Sinatra 进程来管理我的资产（js、css、图像）。这在 localhost:3000/ 上运行

理想情况下，我想要一个 Jetty ProxyServlet，它将任何请求从 localhost:8888/assets/* 发送到 localhost:3000/assets/* 以避免跨域错误。

这只是在开发中，我的生产资产将在其他地方提供服务，所以不要在可扩展性或其他问题的背景下回答。

另外，我需要这两个“Servlet”在同一个 PORT 8888 中并排运行吗？

再说一遍……所有对 localhost:8888/* 的请求（除了 /assets/ *）都将路由到主 webapp servlet。所有对 localhost:8888/assets/ 的请求*都会路由到 ruby​​ / sinatra 服务器 localhost:3000/assets/*

**我当前的 webdefault.xml：**

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<web-app
  xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  metadata-complete="true"
  version="2.5"
>

  <description>
    Default web.xml file.  
    This file is applied to a Web application before it's own WEB_INF/web.xml file
  </description>
<filter>
    <filter-name>UrlRewriteFilter</filter-name>
    <filter-class>org.tuckey.web.filters.urlrewrite.UrlRewriteFilter</filter-class>

    <init-param>
        <param-name>confPath</param-name>
        <param-value>/urlrewrite.xml</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>UrlRewriteFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping>

  <listener>
   <listener-class>org.eclipse.jetty.servlet.listener.ELContextCleaner</listener-class>
  </listener>

  <listener>
   <listener-class>org.eclipse.jetty.servlet.listener.IntrospectorCleaner</listener-class>
  </listener>

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  -->
  <servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.eclipse.jetty.servlet.DefaultServlet</servlet-class>
    <init-param>
      <param-name>aliases</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>acceptRanges</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>dirAllowed</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>welcomeServlets</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>redirectWelcome</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>maxCacheSize</param-name>
      <param-value>0</param-value>
    </init-param>
    <init-param>
      <param-name>maxCachedFileSize</param-name>
      <param-value>0</param-value>
    </init-param>
    <init-param>
      <param-name>maxCachedFiles</param-name>
      <param-value>2048</param-value>
    </init-param>
    <init-param>
      <param-name>gzip</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>useFileMappedBuffer</param-name>
      <param-value>false</param-value>
    </init-param>
    <!--
    <init-param>
      <param-name>resourceCache</param-name>
      <param-value>resourceCache</param-value>
    </init-param>
    -->
    <!--
    <init-param>
      <param-name>cacheControl</param-name>
      <param-value>max-age=3600,public</param-value>
    </init-param>
    -->
    <load-on-startup>0</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <!-- ********************************************************************* -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!-- Railo -->

  <servlet id="Railo">
    <description>Railo CFML Engine</description>
    <servlet-name>CFMLServlet</servlet-name>    
    <servlet-class>railo.loader.servlet.CFMLServlet</servlet-class>
    <!--
    <init-param>
      <param-name>railo-server-root</param-name>
      <param-value>/var/Railo/config/server/</param-value>
      <description>Railo Server configuration directory (for Server-wide configurations, settings, and libraries)</description>
    </init-param>
    !-->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <!--
    <init-param>
      <param-name>railo-web-directory</param-name>
      <param-value>/var/Railo/config/web/{web-context-label}/</param-value> 
      <description>Railo Web Directory (for Website-specific configurations, settings, and libraries)</description>
    </init-param>
    !-->
    <load-on-startup>2</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>CFMLServlet</servlet-name>
    <url-pattern>*.cfc</url-pattern>
    <url-pattern>*.cfm</url-pattern>
    <url-pattern>*.cfml</url-pattern>   
    <url-pattern>/index.cfc/*</url-pattern>
    <url-pattern>/index.cfm/*</url-pattern>
    <url-pattern>/admin/index.cfm/*</url-pattern>
    <url-pattern>/lms/index.cfm/*</url-pattern>
    <url-pattern>/index.cfml/*</url-pattern>
  </servlet-mapping>

  <!-- ===================================================================== -->
  <!-- Railo REST Servlet - handles Railo's RESTful web services             -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <servlet id="RESTServlet">
    <description>Railo Servlet for RESTful services</description>
    <servlet-name>RESTServlet</servlet-name>    
    <servlet-class>railo.loader.servlet.RestServlet</servlet-class>
    <load-on-startup>3</load-on-startup>
  </servlet>  

  <servlet-mapping>
    <servlet-name>RESTServlet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>

  <!-- ===================================================================== -->
  <!-- Railo MessageBroker Servlet - Flex Gateway                            -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <servlet id="MessageBrokerServlet">
    <description>Railo Servlet for Flex Gateway</description>
    <servlet-name>MessageBrokerServlet</servlet-name>
    <servlet-class>flex.messaging.MessageBrokerServlet</servlet-class>
    <!-- init-param>
      <param-name>services.configuration.file</param-name>
      <param-value>/WEB-INF/flex/services-config.xml</param-value>
    </init-param !-->
    <!-- init-param>
      <param-name>messageBrokerId</param-name>
      <param-value>_default_</param-value>
    </init-param !-->
    <!-- load-on-startup>2</load-on-startup !-->
  </servlet>

  <servlet-mapping>
    <servlet-name>MessageBrokerServlet</servlet-name>
    <url-pattern>/flex2gateway/*</url-pattern>
    <url-pattern>/flashservices/gateway/*</url-pattern>
    <url-pattern>/messagebroker/*</url-pattern>
  </servlet-mapping>

  <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
  <!--                                                 Railo Definitions End -->  
  <!-- ===================================================================== -->
  <!-- _____________________________________________________________________ -->

  <!-- ==================================================================== -->
  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>

  <!-- ==================================================================== -->
  <welcome-file-list>
    <welcome-file>index.cfm</welcome-file>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <!-- welcome-file>index.jsp</welcome-file !-->
  </welcome-file-list>

  <!-- ==================================================================== -->
  <locale-encoding-mapping-list>
    <locale-encoding-mapping><locale>ar</locale><encoding>ISO-8859-6</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>be</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>bg</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>ca</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>cs</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>da</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>de</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>el</locale><encoding>ISO-8859-7</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>en</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>es</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>et</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>fi</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>fr</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>hr</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>hu</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>is</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>it</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>iw</locale><encoding>ISO-8859-8</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>ja</locale><encoding>Shift_JIS</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>ko</locale><encoding>EUC-KR</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>lt</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>lv</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>mk</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>nl</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>no</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>pl</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>pt</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>ro</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>ru</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>sh</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>sk</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>sl</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>sq</locale><encoding>ISO-8859-2</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>sr</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>sv</locale><encoding>ISO-8859-1</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>tr</locale><encoding>ISO-8859-9</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>uk</locale><encoding>ISO-8859-5</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>zh</locale><encoding>GB2312</encoding></locale-encoding-mapping>
    <locale-encoding-mapping><locale>zh_TW</locale><encoding>Big5</encoding></locale-encoding-mapping>
  </locale-encoding-mapping-list>

  <security-constraint>
    <web-resource-collection>
      <web-resource-name>Disable TRACE</web-resource-name>
      <url-pattern>/</url-pattern>
      <http-method>TRACE</http-method>
    </web-resource-collection>
    <auth-constraint/>
  </security-constraint>

</web-app> 
```

我在想这样的事情？但这只会导致`503 Service Unavailable`

```
<servlet>
    <servlet-name>JettyProxy</servlet-name>
    <servlet-class>org.mortbay.servlet.ProxyServlet$Transparent</servlet-class>
    <init-param>
     <!-- This points to the actual server where requests are proxied to -->
     <param-name>ProxyTo</param-name>
     <param-value>http://localhost:3000/</param-value>
    </init-param>
    <init-param>
     <!-- This will be stripped off the client request URL -->
     <param-name>Prefix</param-name>
     <param-value>/</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

 <servlet-mapping>
  <servlet-name>JettyProxy</servlet-name>
  <url-pattern>/assets/*</url-pattern>
 </servlet-mapping> 
```

这可能吗？如果是这样，它将如何实施？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:46:41.197

您的标签说您正在使用**jetty-8**，但您的代理 servlet 类指示**jetty-6**（该`org.mortbay.servlet.ProxyServlet`）。在 jetty-8 上，您应该使用的 ProxyServlet 是`org.eclipse.jetty.servlets.ProxyServlet`，是的，这听起来像是一个完全正常的用例。

# java - 我的程序告诉我我的方法未针对我的类型定义这是什么意思？

> ID：15705922
> 
> 赞同：1
> 
> 时间：2013-03-29T15:07:54.287
> 
> 标签：java, compiler-errors

我编写了一个代码，该代码应该采用一个数组并将其从最小值到最大值进行排序，但出现错误。这是代码

```
public class minHeapify{
    public static void exchange(int a[],int i,int j) {
        int temp = a[i];
        a[i] = a[j];
        a[j] = temp;
    }
    public static int parent(int i) {
        return (int) Math.floor((i - 1)/2);
    }
    public static int left(int i) {
        return 2*i + 1;
    }
    public static int right(int i) {
        return 2*(i+1);
    }
    public minHeapify(int a[], int start,int end) {
        int l = left(start); int r = right(start);
        int smallest;
        if(l >= end){
            smallest = (a[l] < a[start])? l: start;
        }
        if(r >= end){
            smallest = (a[r] < a[smallest])? r: smallest;
        }
        if(smallest != start) {
            exchange(a,start,smallest);
            minHeapify(a,smallest,end);
        }
    }
} 
```

我得到的错误是“方法 minHeapify(int[], int, int) 对于 minHeapify 类型是未定义的”，我不确定这意味着什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:11:10.847

问题是该方法与类同名并且没有返回类型。因此，从编译器的角度来看，它是一个构造函数，而不是一个普通的方法。并且构造函数不能以您的方法尝试的方式调用自己。

重命名方法并添加返回类型。如果需要在构造时自动调用该方法，只需从构造函数中调用它即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:12:05.680

Java thinks that `public minHeapify(int a[], int start,int end)` is a constructor, not a normal method. You can fix it by respecting the convention that class names are uppercase: `public class MinHeapify`.

# bash - 将历史命令转换为 shell 脚本

> ID：15705929
> 
> 赞同：2
> 
> 时间：2013-03-29T15:08:03.250
> 
> 标签：bash, shell, unix, zsh

这是我认为很多人会经常使用的东西之一，但我似乎找不到任何写过这类东西的人。

我发现很多时候我在命令行单行程序上进行了很多迭代，当我最终经常使用它，或者预计将来想要使用它，或者当它变得很麻烦时一行，通常最好将单行代码转换为 shell 脚本并将其粘贴在合理且易于访问的位置，例如`~/bin`.

使用任何涉及文本编辑器的迂回方法来完成这项工作显然太麻烦了，而且可以简单地在 shell 上完成，例如在 zsh 输入中

```
echo "#!/usr/bin/env sh" > ~/bin/command_from_history_number_523.sh && echo !523 >> ~/bin/command_from_history_number_523.sh 
```

然后按下`Tab`以注入`!523`rd 命令并以某种方式将其硬塞到要保存的可接受字符串中。

这特别麻烦，至少有三个问题：

*   不能在 bash 中工作，因为它不能完成`!523`
*   需要一些人工检查和弦擒纵机构
*   需要输入太多诸如脚本名称必须输入两次

所以看起来我需要在这里做一些元 shell 脚本。

我认为一个好的解决方案可以在 bash 和 zsh 下运行，它可能应该通过使用两个参数来工作，一个整数作为历史命令编号，一个 shell 脚本的名称在包含该命令的硬编码目录中弹出。此外，在 bash 下，多行命令似乎被视为单独的命令，但我愿意假设我们在这里只关心单行命令，并且此时我只使用 zsh。

这里的绊脚石是我认为即使在使用 zsh 时我仍然会通过 bash 运行 shell 脚本，因此它不太可能能够解析 zsh 的历史文件。我可能需要把它做成两个单独的程序。

**更新**：我同意@Floris 的评论，即直接使用 !! 尽管我不确定如何进行这项工作，但会有所帮助。假设我的用法是

```
mkscript command_number_24 !24 
```

这是不够的，因为`mkscript`将接收第 24 条命令的扩展内容。如果第 24 条命令包含任何文件 glob 或类似文件，它们将已经被扩展。这很糟糕，我基本上想要历史文件的内容，即原始命令字符串。我想这可以通过在此处手动实现这些快捷方式来解决。或者只是把它搞砸，只取一个整数参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:54:02.323

```
function mkscript() { 
    echo '#!/bin/bash' > ~/bin/$2
    history -p '!'$1 >> ~/bin/$2
} 
```

仅在 Bash 中测试。

来自 OP 的更新：在 zsh 中，我可以使用`fc -l $2 $2`

# highcharts - 事件 afterSetExtremes 在 Highstock 1.3.0 中重复触发

> ID：15705933
> 
> 赞同：0
> 
> 时间：2013-03-29T15:08:18.320
> 
> 标签：highcharts

我刚刚升级了我的应用程序以使用 Highstock 1.3.0。

在升级之前，xAxis.events.afterSetExtremes 事件仅在用户停止滑动或调整 x 轴范围滑块后触发一次。

现在，该事件反复触发。这种行为改变是有意的吗？如果是这样，是否有最佳实践方法来限制或知道用户活动何时停止？

ps “之前” ===> Highstock JS v1.2.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T18:10:55.073

经过调查（查看了最新的异步加载演示），我发现了一个可以在新图表的选项中设置的属性，似乎可以解决这个问题：

```
scrollbar: {
    liveRedraw: false
}, 
```

# java - Android GC 行为

> ID：15705939
> 
> 赞同：0
> 
> 时间：2013-03-29T15:08:44.193
> 
> 标签：java, android, garbage-collection, android-logcat

我试图理解为什么 android GC 的行为方式，

*   虚拟机堆设置为 512 MB
*   `Runtime.getRuntime maxMemory`为 512 MB
*   `Runtime.getRuntime totalMemory`为 13 MB
*   `Runtime.getRuntime freeMemory`是 3 MB

我总是在这些值的 +/- 2-3 MB 范围内。

我的代码是功能性的，所以我使用了很多对象，但我没有接近 512 MB，但我经常在我的 logcat 中看到 GC 调用，尤其是在紧密循环中。为什么不让堆增长？和小增量的 GC，而不是每次暂停我的应用程序 300 毫秒。

有什么办法让我对垃圾收集过程有更多的控制权（这不会是一个市场应用程序，我安装自定义 rom 没有问题。）除了股票答案是改变你的编码风格不要创建一个很多对象，因为我在真实设备上看到了类似的行为（当没有其他应用程序运行时，一台 1,2 ghz 的四核机器和 2 GB 内存，拥有一台功能如此强大但无法编码的机器有点烦人我喜欢的方式。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:14:01.287

主要问题是应用程序在 VM 中运行，并且每个 VM 都有其限制。只要您不使用本机 (NDK)，您就必须使用 VM 获得的少量 RAM。

> 我对安装自定义 rom 没有任何问题。

如果您想构建自己的 ROM（或搜索具有可配置设置的 ROM），请增加每个 VM 的大小并对此感到满意。

> 我的代码是功能性的，所以我使用了很多对象

好吧，“使用大量对象”和“使用大量生命周期短的对象”是有区别的。但因为你不想听到它...

# python - python socketserver超时

> ID：15705948
> 
> 赞同：1
> 
> 时间：2013-03-29T15:09:14.217
> 
> 标签：python, sockets, socketserver

我正在实现一个简单的服务器，如果 3 秒内没有收到任何消息，它应该打印一条消息。

**处理程序**

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    def handle(self):
        while True:
            message = self.rfile.readline().strip()
            print message 
```

**服务器**

```
class SimpleServer(SocketServer.TCPServer):
    timeout = 3

    def handle_timeout(self):
        print "Timeout"

    def __init__(self, server_address, RequestHandlerClass):
        SocketServer.TCPServer.__init__(self, server_address, RequestHandlerClass) 
```

在这里，我扩展了`TCPServer`用于测试超时方法。我已将属性设置`timeout`为`3`. 根据文档，如果该时间过去并且没有消息发送到客户端`handle_timeout()`，则调用它，在我的情况下，它只会打印“超时”。

> BaseServer.timeout
> 
> 超时持续时间，以秒为单位，如果不需要超时，则为 None。如果handle_request() 在超时时间内没有收到传入请求，则调用handle_timeout() 方法。

我启动服务器，并观察它的输出。当我连接到它并发送一些消息时，它们通常会被打印出来。但是，如果我在 3 秒或更长时间内没有发送任何内容，则不会发生任何事情。好像`timeout`and`handle_timeout()`还没有实现。

这种行为的根源可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-14T23:38:05.663

您不得为应用程序循环调用 server_forever() 方法。试试这个：

```
while True:
  self.handle_request() 
```

然后，handle_timeout() 对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T15:18:35.500

您可以尝试在`self.timeout`（即使其成为实例字段而不是类变量吗？）

编辑（这里是代码）

```
def handle_request(self):
           """Handle one request, possibly blocking.

          Respects self.timeout.
          """
          # Support people who used socket.settimeout() to escape
          # handle_request before self.timeout was available.
          timeout = self.socket.gettimeout()
          if timeout is None:
               timeout = self.timeout
           elif self.timeout is not None:
               timeout = min(timeout, self.timeout)
           fd_sets = select.select([self], [], [], timeout)
           if not fd_sets[0]:
               self.handle_timeout()
               return
           self._handle_request_noblock() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-07T23:43:20.103

这是[serve_forever()](https://docs.python.org/2/library/socketserver.html#SocketServer.BaseServer.serve_forever)的文档：

> 处理请求，直到一个明确的 shutdown() 请求。每 poll_interval 秒轮询一次关机。**忽略self.timeout。**如果您需要执行周期性任务，请在另一个线程中执行

所以`serve_forever()`只会检查是否`shutdown()`被调用`poll_interval`，默认值为 0.5 秒。并且只`handle_request()`关心`timeout`.

这是[serve_forever()](https://hg.python.org/cpython/file/2.7/Lib/SocketServer.py#l221)和[handle_request()](https://hg.python.org/cpython/file/2.7/Lib/SocketServer.py#l264)的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-08T07:48:36.673

最后，我放弃了`socketserver`模块并直接使用`socket`模块，其中超时工作。

```
TIMEOUT = 3
HOST = '192.0.0.202'              
PORT = 2000             

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((HOST, PORT))
s.listen(1)

while 1:
    conn, addr = s.accept()
    conn.settimeout(TIMEOUT)
    while 1:
        try:
            data = conn.recv(1024)
            #Do things

        except socket.timeout:
            #Timeout occurred, do things

        if not data or P=='end':
            print 'Connection lost. Listening for a new controller.' 
            break

conn.close() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-02T17:44:26.383

首先，“如果 3 秒内没有收到任何内容，[服务器] 应该打印一条消息”是什么意思？

你的意思是服务器应该...

1.  如果在特定时间段内没有任何新请求，则关闭？
2.  如果在某个时间段内未完成连接，请关闭连接？

In the first case you can use `BaseServer.timeout` but you would also have to use `BaseServer.handle_request()` instead of `BaseServer.server_forever()`.

In the second case you should have set the timeout for the `SingleTCPHandler`:

```
class SingleTCPHandler(SocketServer.StreamRequestHandler):
    timeout = 3
    def handle(self):
        while True:
            message = self.rfile.readline().strip()
            print message 
```

For people who want to use their own implementation of `BaseRequestHandler`:

```
class MyRequestHandler(SocketServer.BaseRequestHandler):
    def handle(self):
        self.request.settimeout(3) 
```

# php - 始终在电子邮件上显示图像

> ID：15705960
> 
> 赞同：0
> 
> 时间：2013-03-29T15:09:43.190
> 
> 标签：php, html, css

我已经建立了一个电子邮件系统，当你在数据库中为用户发送电子邮件时，问题是图像不会显示，但必须指定它必须像爱一样向前出现看这里的图片：

[http://billedeupload.dk/images/TaWuJ.png](http://billedeupload.dk/images/TaWuJ.png)

我就像所有可能的其他网站一样，例如 Facebook，他们的徽标一直都在那里。我只是喜欢在没有用户做任何事情的情况下始终显示图像的相同方式。

我已经这样做了：

```
<div style="background:#666; color:#FFF; margin:0 auto; width: 960px;">
 <img src="http://www.blabla.dk/indhold/img/banner-2.png"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:13:22.627

您编写的代码完全正确。在许多邮件客户端（如 GMail、ThunderBird 等）中，默认情况下不显示图像。您需要单击“[显示图像”](https://stackoverflow.com/questions/15705960/displaying-the-image-on-the-e-mail-is-always/15706019#15706019)链接。这个过程不能自动化。这是防止CSRF的安全措施。

**部分参考如下：**

[生活黑客](http://lifehacker.com/5319455/gmail-now-automatically-displays-images-in-messages-from-contacts)：

> 默认情况下，Gmail 会尝试通过阻止电子邮件中的图像来保护您的电子邮件免受垃圾邮件发送者的侵害，直到您告诉它显示它们。这很好，但是当您想查看联系人中的图像时有点烦人。

[Gmail 现在不会在我的电子邮件中显示图片。- 谷歌组](http://productforums.google.com/forum/#!topic/gmail/gqbHJIi-A8o%5B1-25-false%5D)

> 更改为默认使用 HTTPS 后，您与 Gmail 的连接将通过 HTTPS 进行加密。但是，您可能收到的某些消息（例如广告和简报）可能包含不是通过 HTTPS 发送的图像，而是通过 HTTP 发送的。
> 
> 诸如 Internet Explorer 之类的浏览器会通过弹出窗口警告您，表明您在通过 HTTPS 连接到 Gmail 时可能正在尝试访问通过 HTTP 发送的内容。这就是为什么为 Internet Explorer 启用混合内容的显示对你们中的一些人有所帮助。但是，在启用 HTTP 内容显示时请务必小心，因为某些网站可能包含浏览器设置试图保护您免受风险或恶意内容的影响。

[为什么电子邮件不直接加载图像](https://stackoverflow.com/questions/3607518/why-do-emails-not-load-images-directly)

> Gmail、yahoo、hotmail 等电子邮件提供商不会直接在电子邮件中加载图像。这些服务要求您允许加载图像。他们为什么这样做呢？是为了防止 XSS/CSRF 吗？
> 
> 两个原因 - 隐私和 CSRF。
> 
> **隐私**
> 
> *它允许发件人在我不知情*的情况下确定我是否打开了电子邮件。垃圾邮件发送者可以弄清楚他们的“营销”活动是否产生了任何影响。
> 
> **CSRF**
> 
> 要使 CSRF 工作，受害者必须单击链接或访问攻击者页面。如果电子邮件客户端要自动显示图像，只需打开一封电子邮件就足以发起 CSRF 攻击。
> 
> 例如，假设 paypal 有一个 csrf 漏洞。还假设用户已登录到贝宝。现在，攻击者向用户发送一封带有`<img src="http://paypal.com/transferfunds?fromAccount=victim&toAccount=attacker"/>`. 一旦用户打开电子邮件，资金就会被转移。

# bash - && 和 || 的方式有区别吗？在 Debian 和 Ubuntu 之间使用

> ID：15705962
> 
> 赞同：1
> 
> 时间：2013-03-29T15:09:45.357
> 
> 标签：bash, ubuntu, debian, wget

以下从 Debian 挤压中运行良好，但在 Ubuntu 12.04 中始终返回“聚合实例已关闭”，无论实例是启动还是关闭。

```
wget -O/dev/null -q https://myhost:8443/inst/openid_login.html && echo Aggregate instance is UP || echo Aggregate instance is DOWN 
```

我在 Debian 中编写并测试了脚本，但也需要它在 Ubuntu 上工作。我假设我需要做一些简单的替代品，但不确定是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:52:41.693

通过指定 SSL 版本来解决它，如下所示：

`wget -O/dev/null --secure-protocol=sslv3 https://myHost:8443/inst/openid_login.html && echo Aggregate instance is UP || echo Aggregate instance is DOWN`

# python - 在 Python/dateutil 中将两个时间跨度除以彼此

> ID：15705963
> 
> 赞同：2
> 
> 时间：2013-03-29T15:09:45.730
> 
> 标签：python, python-dateutil

请考虑这个问题：

我有一个过去的日期，我从那里开始添加句点。当添加这些期间导致日期大于今天时，我想停下来检查最后一个日期是什么。

这是计算会员借记日期的功能。一个成员加入，比如说，2007-01-31。他每个月都会被扣款。假设今天是 2013-03-29（实际上是 atm）。所以我需要从 2007 年 1 月 31 日开始计算月份，当我超过今天的日期时，我需要停止。然后我可以看到下一个借记日期是 2013-03-31。

我正在使用 dateutil 库来实现这一点，在 while 循环中添加 relativedelta，直到我超过当前日期。（我知道这可能不是最好的方法，但我对 Python 还是很陌生，这是一个概念验证）。问题是当我在 2007-01-31 中添加一个月时，下一个日期是 2007-02-28，这是正确的。但是下一次迭代的日期是 2007-03-28，因为 dateutil 不将 28 日识别为该月的最后一天，以保持其完整并迭代到 3 月的最后一天。当然，这是一个完全有效的实现。然后我尝试了 dateutils rrule 对象，但它具有相同的原理。它输出日期列表，但它只是跳过没有足够天数的月份。

```
period = rrule(MONTHLY, interval=1, dtstart=datetime.date(2012, 5, 31), until=datetime.date(2013, 3, 29))
print(list(period)) 
```

然后我想到了另一种方法：

如果我可以计算 2007 年 1 月 31 日到 2013 年 3 月 29 日期间的时间段数，我可以将这些时间段数添加到开始日期，并且 dateutil 将返回正确的日期。
问题是这个时期并不总是一个月。例如，也可以是四个星期、一个季度或一年。

我找不到一种方法来获取一个 relativedelta 并将它与另一个 relativedelta 相除，以获得后者进入第一个的次数。

如果有人能指出我正确的方向，我将不胜感激。例如，是否有一个库可以做到这一点（相互划分时间跨度，并在给定的时间块内输出结果，如几个月或几周）？是否有一个 datediff 函数可以接受一个句点作为输入（例如，我知道[在 vbscript 中，您可以在任何您想要的时间段内获得两个日期之间的差异，无论](http://www.w3schools.com/vbscript/func_datediff.asp)是几周、几个月、几天等等）。可能有完全不同的解决方案吗？

为了完整起见，我将包含代码，但我认为文本已经解释了这一切：

```
def calculate(self, testdate=datetime.date.today()):
    self._testdate = testdate

    while self.next < self._testdate:
        self.next += self._ddinterval
    self.previous = self.next - self._ddinterval
    return self.next 
```

谢谢，

埃里克

**编辑**：我现在有一个解决方案可以做它应该做的，但它几乎不是 Pythonic、优雅或快速的。所以问题仍然是一样的，如果有人能提出更好的解决方案，请这样做。这是我想出的：

```
def calculate(self, testdate=datetime.date.today()):
    self._testdate = testdate

    start = self.next
    count = 0
    while self.next < self._testdate:
        count += 1
        self.next = start + (count * self._ddinterval)
    self.previous = self.next - self._ddinterval
    return self.next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:55:08.180

在添加周期作为下一个循环的起点后，不要使用新值，而是创建一个不断增加的*增量*：

```
today = datetime.date.today()
start = datetime.date(2007, 1, 31)
period = relativedelta(months=1)

delta = period
while start + delta < today:
    delta += period

next = start + delta 
```

这导致：

```
>>> import datetime
>>> from dateutil.relativedelta import relativedelta
>>> today = datetime.date.today()
>>> start = datetime.date(2007, 1, 31)
>>> period = relativedelta(months=1)
>>> delta = period
>>> while start + delta < today:
...     delta += period
... 
>>> delta
relativedelta(years=+6, months=+3)
>>> start + delta
datetime.date(2013, 4, 30) 
```

这适用于任何可变的期间长度，包括季度和年份。对于以精确的几周或几天为单位的时间段，您也可以使用一个`timedelta()`对象，但这是一个通用的解决方案。

当使用可变宽度的时间段（例如月份和季度）时，您不能“划分”时间段。对于以整天为单位测量的时间段，您可以简单地将两个日期之间的差异转换为天数（来自 timedelta），然后获取模数：

```
period = datetime.timedelta(days=28)  # 4 weeks
delta = today - start
remainder = delta.days % period.days
end = today + datetime.timedelta(days=remainder) 
```

这使：

```
>>> period = datetime.timedelta(days=28)  # 4 weeks
>>> delta = today - start
>>> remainder = delta.days % period.days
>>> today + datetime.timedelta(days=remainder)
datetime.date(2013, 4, 17) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:30:46.800

如果您的增量相对于基准时间是可变的（即，1 个月可能意味着 28-31 天中的任何一天），那么您就会陷入循环。

但是，如果 delta 是一个恒定的天数，您可以通过转换为整数并进行模运算来回避迭代。

# encryption - 如果我使用 SSL，加密会带来任何好处吗？

> ID：15705964
> 
> 赞同：0
> 
> 时间：2013-03-29T15:09:48.470
> 
> 标签：encryption, ssl

我最近偶然发现了[这篇](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)关于保护 Web API 端点的文章。

如果我使用 SSL，加密标头中的用户字符串有什么好处吗？如果我将用户密钥 (Id) 包含为明文而不是密文，会有什么风险？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:31:03.957

TLS 是传输级安全性。即，在数据到达传输之前和之后，数据不受 TLS 保护。如果您的数据是长期的和/或您将它们保存在传输会话期间以外的其他地方，那么将它们加密（然后尽可能加密传输）可能是有意义的。如果您的数据生命周期很短并且数据仅在传输会话期间才有意义，那么除了 TLS 之外加密数据没有多大意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:10:48.270

这篇文章的作者基本上是将用户标识符和用户机密的概念结合到一个单一的密码令牌中。如果您选择以明文形式发送用户标识符，则该用户标识符必须保密（就像令牌必须保密一样）。只要保持这种保密性，使用令牌就没有任何优势。

请注意，该系统似乎并不像所展示的那样非常安全。如果攻击者可以猜出一个有效的用户标识符，那么他们就可以生成一个有效的令牌。作者基本上是在使用 RSA 作为美化的哈希函数。我建议您寻找其他参考。

# c++ - 如何删除在函数中创建的指针并作为返回值

> ID：15705966
> 
> 赞同：3
> 
> 时间：2013-03-29T15:09:51.580
> 
> 标签：c++, pointers

```
class AAA{
}

class BBB{
public:
   AAA* doSomething(){
      return new AAA();
   }
} 
```

我在 BBB 类的函数中创建并返回了一个带有 NEW 的指针，我想知道是否应该在某处删除它。如果我应该，那么我该如何实现呢？我有一些Java经验，但我是C++的新手，请帮助我。

对不起，我想我没有很好地描述我的问题。假设我必须编写一个连接两个 char[sizeA] 和 char[sizeB] 的函数。所以我想我应该做这样的事情：

```
char* concatenate(char* str1, char* str2, int sizeA, int sizeB){
   char* temp = new char[sizeA + sizeB - 1];
   ...
   return temp;
} 
```

这就是我在 Java 中会做的事情，但我不知道如何在 C 中做到这一点。我不知道谁会使用这个返回的 char[]，所以我不知道在哪里编写“删除”代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T15:10:52.600

你不需要指针，那么为什么要使用指针呢？有什么问题

```
AAA doSomething()
{
   return AAA();
} 
```

如果必须，返回一个`std::unique_ptr`.

如果您真的想使用原始指针，只需`delete`使用结果即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:11:41.817

删除指针的方法是使用`delete`：

```
BBB b;
AAA *a = b.doSomething();

// ...

delete a; 
```

但是如果你想让它更安全使用可以使用`unique_ptr`或`shared_ptr`。

但是在 C++ 中，您不必将`new`变量作为指针。您可以创建一个对象并返回它：

```
class BBB{
public:
    AAA doSomething() { 
       return AAA();
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:14:34.920

因为你的背景是java。请按值、按引用和按指针阅读参数。

```
AAA doSomething()
{
   return AAA();
} 
```

您可以在 B 类中创建此函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T15:39:22.597

如果您不知道谁将使用您创建的指针，最好的方法是将指针的所有权（以及删除它的责任）转移给您的类的客户端。

There are several way to do so. The simplest one is to use `std::auto_ptr`. This way, the code using your function will gain the pointer ownership upon using your function and the destruction of the `std::auto_ptr` variable on the client code side will lead to the deletion of the pointer you created.

# c# - 我可以从另一个类调用 sql 命令参数吗？

> ID：15705969
> 
> 赞同：0
> 
> 时间：2013-03-29T15:09:57.813
> 
> 标签：c#, ms-access

我有14个表，有常用的sql常用命令参数，insert，update等。初学者和我一样，都会有主类中的所有方法，像这样...

```
namespace TestApp
{
 public partial class TestNamTxt : Form
 {
    private OleDbConnection myCon;

    public TestNamTxt()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
      myCon = new OleDbConnection();
      myCon.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C\:... 
                                 Database2.mdb")

      myCon.Open();
      ds1 = new DataSet();
      string sql = "SELECT * FROM Table1";
      da = new System.Data.OleDb.OleDbDataAdapter(sql,myCon);
      da.Fill(ds1, "Foo");
      myCon.Close();
   };

   private void Insertbtn_Click(object sender, EventArgs e)
   {
     OleDbCommand cmd = new OleDbCommand();
     cmd.CommandType = CommandType.Text;
     cmd.CommandText = "INSERT INTO Table1 (ID, Name)";
     cmd.Parameters.AddWithValue("@ID", IDTxt.Text);
     cmd.Parameters.AddWithValue("@Name", NameTxt.Text);
     cmd.Connection=myCon;   
     myCon.Open();
     cmd.ExecuteNonQuery();
     myCon.Close();
  }
} 
```

我可以将上面的代码放在另一个类中，并在 Insertbtn 方法中使用这个方法吗？是否有任何教程或者也许有人可以演示如何做到**这一点？**我不确定我在这里给出的描述中叫什么？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:14:54.570

你当然可以。您可以将 GetConnection 和 Insert 放入单独的类中（甚至留在 Form 中，但我不推荐这样做）并按如下方式使用它们：

```
 public static OleDbConnection GetConnection()
    {
        var myCon = new OleDbConnection();
        myCon.ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C\:... Database2.mdb";

        return myCon;
    }
    public static void Insert(string id, string name)
    {
        var con = GetConnection();
        OleDbCommand cmd = new OleDbCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = "INSERT INTO Table1 (ID, Name)";
        cmd.Parameters.AddWithValue("@ID", id);
        cmd.Parameters.AddWithValue("@Name", name);
        cmd.Connection = con;
        con.Open();
        cmd.ExecuteNonQuery();
        con.Close();
    }

    private void Insertbtn_Click(object sender, EventArgs e)
    {
        Insert(IDTxt.Text, NameTxt.Text);
    } 
```

如果需要，您还可以将表名称指定为方法参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:16:07.030

如果我正确理解了您的问题，
那么您可以这样做。基本上你正在尝试使用 DAL（数据访问层）这个术语，

很简单，将上面的代码放到另一个类中，然后在这个类中创建该类的一个对象并使用它。

```
public class DataClass
{
  public static bool AddEmp(string id, string name)
   {
     bool result;
     OleDbCommand cmd = new OleDbCommand();
     cmd.CommandType = CommandType.Text;
     cmd.CommandText = "INSERT INTO Table1 (ID, Name)";
     cmd.Parameters.AddWithValue("@ID", id);
     cmd.Parameters.AddWithValue("@name", name);
     cmd.Connection=myCon;   

     try
      {
        myCon.Open();
        cmd.ExecuteNonQuery();
        result = true;
      }
     catch
      {
         result = false;
      }

  myCon.Close();
  return result;  
} 
```

然后在插入功能中这样做

```
private void Insertbtn_Click(object sender, EventArgs e)
 {
    DataClass ob = new DataClass();
    bool returnResult = ob.AddEmp(IDtxt.txt, NameTxt.text)
    if(bool) // if result == true
     //dosomething
    else
    // do something
} 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:20:41.000

您的 TestNam 类派生自 Form 类。您要定义的任何表单事件处理程序都必须是 TestNam 的成员函数，但在此函数中您可以做任何您想做的事情，包括传递对表单活动实例的引用。

如果您的函数特定于表单类，请将它们放在类中，如果它们是共享的，您可以将 htem 放在另一个对象中。

# mysql - mysql索引性能

> ID：15705971
> 
> 赞同：2
> 
> 时间：2013-03-29T15:10:24.600
> 
> 标签：mysql, performance, indexing

我一直在努力寻找以下问题的简明答案，并且我已经阅读了很多，但我仍然不确定。也许没有简单的答案，因为场景可能如此不同。

但这里有几个问题：

**1) 我应该索引一个所有记录都是 0 或 1 的 tinyint 列吗？**

示例查询，其中 postActive 列的每条记录都为 0 或 1：

```
SELECT postId, postName, postTitle
FROM postTable
WHERE postDate > Now()
AND postActive = 1 
```

**2) 我是否应该索引一个 int 列，其中所有记录都为 0，除了具有在表中唯一的备用 int 值的记录？**

对于此示例，列 orderProcessingId 将在表中 100% 唯一（除了零），并且绝大多数记录的 orderProcessingId 为 0。

```
SELECT orderId, orderInformation, orderData, orderStuff
FROM orderTable
WHERE orderProcessingId = 38457237 
```

在这两个表中都有数十万条记录。

我想我质疑的原因是因为索引似乎依赖于相对分布的值频率来提高性能。但是在示例 1 中，两个（并且只有两个）值的频率都非常高，而在示例 2 中，一个值 (0) 的频率非常高，并且没有例外的重复频率。

但我的想法几乎都是基于猜想......所以。你能告诉我什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T15:24:28.473

> 我想我质疑的原因是因为索引似乎依赖于相对分布的值频率来提高性能。

不必要。

> 我应该索引一个所有记录都是 0 或 1 的 tinyint 列吗？

取决于 - 取决于这些值的分布是否基本相等，如果不是，您是否最感兴趣的是显着减少的值。

> 我是否应该索引一个所有记录都为 0 的 int 列，除了具有在表中唯一的备用 int 值的记录？

由于您正在尝试寻找其中一种稀有且独特的价值——是的。

（我希望你不会混淆`0`，`NULL`顺便说一句。因为如果你的整数类型条目是唯一的，除了那些具有 value 的条目`0`，你不能在这里使用 UNIQUE 索引。）

# android - java.lang.String 类型为 6 的 JSON 错误值无法转换为 JSONObject

> ID：15705972
> 
> 赞同：0
> 
> 时间：2013-03-29T15:10:30.003
> 
> 标签：android, json

我看不出我的 JSON 有什么问题，我收到无法将其转换为 JSONObject 的错误。我在论坛上搜索，但我找不到答案。

代码（解析）：

```
JSONObject json = new JSONObject(result.toString().replace("\\", " "));
                    JSONArray jArray = json.getJSONArray("timetable");

                    for(int i = 0; i < jArray.length(); i++) {
                        JSONObject json_data = jArray.getJSONObject(i);
                        String class_school = json_data.getString("class");
                        String teacher = json_data.getString("teacher");
                        String subject = json_data.getString("subject");
                        String room = json_data.getString("room");
                        timetList.add(new TimeTable(subject, class_school + " " + teacher + " " + " " + room));
                    } 
```

JSON：

```
{"timetable":[{"teacher":"Woh","subject":"BVH","room":"017","change":"no"},{"teacher":"Rrl","subject":"BI","room":"045","change":"no"},{"teacher":"Ajg","subject":"WI","room":"019","change":"no"},{"teacher":"Sgh","subject":"NE","room":"119","change":"no"},{"teacher":"Rom","subject":"FA","room":"116","change":"no"},{"teacher":"Her","subject":"GS","room":"127","change":"no"},"free","free"]} 
```

日志猫：

```
03-29 15:06:11.356: E/error(822): Value free at 6 of type java.lang.String cannot be converted to JSONObject 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:27:13.527

在我看来，您正在尝试将最后两个条目（“免费”，“免费”）解析为 JSONObject。如果由于某种原因您需要添加空条目，请使用 {}。

考虑使用 optString 而不是 getString （或使用 try catch 语句来处理异常）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:29:05.253

问题在`String`. 你的`JSON`字符串坏了，这是

> java.lang.String 类型为 6 的自由值无法转换为 JSONObject

看看你的字符串：

```
{
  "timetable": [
                {"teacher":"Woh","subject":"BVH","room":"017","change":"no"},
                {"teacher":"Rrl","subject":"BI","room":"045","change":"no"},
                {"teacher":"Ajg","subject":"WI","room":"019","change":"no"},
                {"teacher":"Sgh","subject":"NE","room":"119","change":"no"},
                {"teacher":"Rom","subject":"FA","room":"116","change":"no"},
                {"teacher":"Her","subject":"GS","room":"127","change":"no"},

                "free","free"
              ]
} 
```

您需要删除此意外序列：

```
"free","free" 
```

最后一个逗号`JSONObject`加上教师的价值`Her`，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:20:00.580

您的字符串是有效的 JSON；然而

```
JSONObject json_data = jArray.getJSONObject(i); 
```

假设数组位置的实体`i`是 JSON 对象。“free”是一个字符串，它不是 JSON 中的对象类型（不被 {} 包围），`getJSONObject(i)`当您尝试从字符串中创建对象时会引发此异常。

可以使用 提取字符串`jArray.getString(i)`，但真正的技巧是确定 position 实体的类型`i`。您可以尝试使用泛型`jArray.get(i)`，然后自省返回值以确定其类型。

# java - java泛型：运行时类型检查以确定策略

> ID：15705973
> 
> 赞同：1
> 
> 时间：2013-03-29T15:10:33.660
> 
> 标签：java, generics, types

如何根据通用类型选择不同的方法？

简单地说，我有一个用泛型类型参数化的类，我必须根据 T 类型选择正确的 PreparedStatement 设置器：

```
Class CustomFieldsTypeManager<T> {
   ArrayList<T> data;

   public void setUpStatement(PreparedStatement st){
      ...
      if ( **T==String** ){
         st.setString(index, (String) data<T>.get(dt_index);
      } else if ( **T==Integer** ){
         st.setInt(index, (String) data<T>.get(dt_index);
      }
      ...
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T15:14:14.210

由于类型擦除，泛型信息在运行时丢失。您应该通过提供类的特化来尝试以不同的方式利用参数多态性：

```
class CustomFieldsTypeManager<T> {
   ArrayList<T> data;

   abstract void setUpStatement(PreparedStatement st);
}

class StringCustomFieldsTypeManager extends CustomFieldsTypeManager<String> {
   void setUpStatement(PreparedStatement st) {
     st.setString(index, data.get(dt_index)); // data it's already an ArrayList<String>
   }
} 
```

还有一些方法可以在运行时检查它，但这有点违背泛型继承的优点，即使它们与此解决方案一样安全（必须正确编写它们）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:13:04.820

您正在寻找`instanceof`：

```
if ( data.get(dt_index) instanceof String ) {
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:14:24.023

你不能。但你可以做的是：

```
class CustomFieldsTypeManager<T> {
    private Class<T> type;
    public CustomFieldsTypeManager(Class<T> type) {
        this.type = type;
    }
} 
```

然后：

```
CustomFieldsTypeManager<String> m = new CustomFieldsTypeManager<String>(String.class); 
```

最后：

```
public void setUpStatement(PreparedStatement st) {
    if (type.equals(String.class)){
        st.setString(index, (String) data<T>.get(dt_index);
    } else if (type.equals(Integer.class)){
        st.setInt(index, (String) data<T>.get(dt_index);
    }
} 
```

或者，只需使用该`PreparedStatement#setObject`方法而不是您正在使用的方法。

# php - 如何改进我的 youtube 搜索功能？

> ID：15705979
> 
> 赞同：0
> 
> 时间：2013-03-29T15:10:56.923
> 
> 标签：php, sql, search, youtube

我正在尝试根据数据库中的数据进行简单的 youtube 搜索。数据正在被放入一个表中，我希望将歌曲名称作为指向该歌曲的 youtube 搜索的链接。这个想法是将艺术家姓名和歌曲名称添加到 youtube 搜索 URL 的末尾。

问题是当艺术家姓名或歌曲名称超过一个单词时，搜索只包括第一个单词。我现在正在使用以下代码：

```
<table class="table table-striped table-hover table-bordered">
    <th>Song Name</th>
    <th>Artist</th>
<?php
// Create connection
$con=mysqli_connect("localhost","root","checkout","Music Database");

// Check connection
if (mysqli_connect_errno($con))
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT * FROM MusicDB");

while($row = mysqli_fetch_array($result))
  {
    echo "<tr><td><a href=https://www.youtube.com/results?hl=en&q=".$row['Song']."+".$row['Artist'].">".$row['Song']."</a></td>";
    echo "<td>".$row['Artist']."</td>"."</tr>";
  }

mysqli_close($con);

?>
</table> 
```

例如，如果歌曲是“Michael Jackson”的“Beat It”，它只会在搜索中添加“beat”。

如果歌曲是“Thriller”，则会添加“Thriller+Michael”。

如果我添加“Maclemore”的歌曲“Thrift Shop”，它只会在搜索中添加“thrift”。

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:24:31.740

用于`urlencode`对查询字符串中的值进行编码。

```
"<tr><td><a href=https://www.youtube.com/results?hl=en&q=". urlencode($row['Song'] . " " . $row['Artist']).">".$row['Song']."</a></td>"; 
```

您也可以使用`http_build_query`.

```
"<tr><td><a href=https://www.youtube.com/results?" . http_build_query(array(
  "hl" => "en",
  "q" => $row['Song'] . " " . $row['Artist']
)).">".$row['Song']."</a></td>"; 
```

# linux - 配备内核 3.2.0-29 的 Ubuntu 12.04 是否支持 cgroup？

> ID：15705980
> 
> 赞同：0
> 
> 时间：2013-03-29T15:11:01.193
> 
> 标签：linux, ubuntu, kernel

我想使用控制组（cgroup）来控制和管理我的集群的计算资源。我已经对 cgroup 本身进行了一些调查工作，无论是命令行工具还是 linux 内核源代码。但是当我打算用cgroup实现一个hello world程序时，我发现头文件

```
#include <linux/cgroup.h> 
```

`/usr/include/linux/cgroup.h`在我的带有 Linux 内核版本 3.2.0-29 的 Ubuntu Server 12.04 LTS x86_64中不存在。

但是我从 下载了内核源文件`kernel.org`，并在正确的文件夹中找到了该头文件。

我也`apt-get install libcgroup-dev`发现了一些东西`/usr/include/libcgroup/`，但那些不是我想要的。

我开始怀疑 Ubuntu 是否禁用了 cgroup 功能或从默认路径迁移它？我怎样才能像 RedHat 人那样编程？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T20:40:45.790

我也安装了 ubuntu 12.04 并且已经使用 cgroups 有一段时间了。

尝试这个：

1.  `apt-get install libcgroup`
2.  使用`#include <libcgroup.h>`而不是`#include <linux/cgroup.h>`.

# sql-server - 如何更改 SQL Server 的默认语言？

> ID：15705983
> 
> 赞同：28
> 
> 时间：2013-03-29T15:11:11.860
> 
> 标签：sql-server, tsql

现在当我查询

```
SELECT @@language 
```

它得到'us_english'。但我需要俄语。

我不能`SET LANGUAGE russian`用于每个查询。

我需要默认设置它（对于所有新会话）。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-29T15:15:23.173

**使用 SQL Server Management Studio**

配置默认语言选项

1.  在对象资源管理器中，右键单击服务器并选择属性。
2.  单击其他服务器设置节点。
3.  在用户的默认语言框中，选择 Microsoft SQL Server 显示系统消息时应使用的语言。默认语言是`English`.

**使用 Transact-SQL**

配置默认语言选项

1.  连接到数据库引擎。
2.  在标准栏中，单击新建查询。
3.  将以下示例复制并粘贴到查询窗口中，然后单击执行。

此示例说明如何使用 sp_configure 将默认语言选项配置为*法语*

```
USE AdventureWorks2012 ;
GO
EXEC sp_configure 'default language', 2 ;
GO
RECONFIGURE ;
GO 
```

*   [配置默认语言服务器配置选项](http://msdn.microsoft.com/en-us/library/ms190682.aspx#TsqlProcedure)

**SQL Server 的 33 种语言**

```
| LANGID |        ALIAS        |
|--------|---------------------|
|    0   | English             |
|    1   | German              |
|    2   | French              |
|    3   | Japanese            |
|    4   | Danish              |
|    5   | Spanish             |
|    6   | Italian             |
|    7   | Dutch               |
|    8   | Norwegian           |
|    9   | Portuguese          |
|   10   | Finnish             |
|   11   | Swedish             |
|   12   | Czech               |
|   13   | Hungarian           |
|   14   | Polish              |
|   15   | Romanian            |
|   16   | Croatian            |
|   17   | Slovak              |
|   18   | Slovenian           |
|   19   | Greek               |
|   20   | Bulgarian           |
|   21   | Russian             |
|   22   | Turkish             |
|   23   | British English     |
|   24   | Estonian            |
|   25   | Latvian             |
|   26   | Lithuanian          |
|   27   | Brazilian           |
|   28   | Traditional Chinese |
|   29   | Korean              |
|   30   | Simplified Chinese  |
|   31   | Arabic              |
|   32   | Thai                |
|   33   | Bokmål              | 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-07-29T02:19:36.113

@John Woo 接受的答案有一些您应该注意的警告：

1.  会话的默认语言设置由用户登录的默认语言设置控制，而不是您用于创建会话的语言设置。SQL Server 实例级别设置不会影响会话的默认语言。
2.  在 SQL Server 实例级别更改默认语言设置不会影响现有 SQL Server 登录名的默认语言设置。它*只能*由您在更改实例级别设置后创建的新用户登录名继承。

因此，在您的 SQL Server 实例和会话之间有一个中间级别，您可以使用它来控制会话的默认语言设置 - 登录级别。

`SQL Server Instance level setting`-> `User login level setting`->`Query Session level setting`

如果您想设置仅属于某个特定用户的所有*新会话的默认语言，这可以为您提供帮助。*

只需根据[此](https://docs.microsoft.com/en-us/sql/t-sql/statements/alter-login-transact-sql)链接更改目标用户登录的默认语言设置即可。您也可以从 SQL Server Management Studio (SSMS) UI 执行此操作。`sa`下面您可以在 SQL Server的用户属性窗口中看到默认语言设置：

[![在此处输入图像描述](../Images/318985a266564a14c994547749c1c1d5.png)](https://i.stack.imgur.com/8p3tf.png)

**注意**：此外，重要的是要知道更改设置不会影响来自该用户登录的已活动会话的默认语言。它只会影响更改设置后创建的*新会话。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-13T20:43:50.003

请尝试以下：

```
DECLARE @Today DATETIME;  
SET @Today = '12/5/2007';  

SET LANGUAGE Italian;  
SELECT DATENAME(month, @Today) AS 'Month Name';  

SET LANGUAGE us_english;  
SELECT DATENAME(month, @Today) AS 'Month Name' ;  
GO 
```

参考：

[https://docs.microsoft.com/en-us/sql/t-sql/statements/set-language-transact-sql](https://docs.microsoft.com/en-us/sql/t-sql/statements/set-language-transact-sql)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-18T11:25:36.980

如果要更改 MSSQL 服务器语言，可以使用以下 QUERY：

```
EXEC sp_configure 'default language', 'British English'; 
```

# python - Python Tkinter Calculator 不会评估来自条目小部件的文本

> ID：15705984
> 
> 赞同：1
> 
> 时间：2013-03-29T15:11:15.440
> 
> 标签：python, tkinter, eval, calculator

我正在尝试使用 tkinter 制作一个简单的计算器应用程序，但是每次运行下面的代码时，我都会收到一条错误消息

```
Traceback (most recent call last):
  File "C:\Python33\Lib\site-packages\pythonwin\pywin\framework\scriptutils.py", line 326, in RunScript
    exec(codeObject, __main__.__dict__)
  File "C:\Users\csp\Python\Calculator App.py", line 17, in <module>
    solved = eval(expression)
  File "<string>", line 0

   ^
SyntaxError: unexpected EOF while parsing 
```

代码：

```
from tkinter import *
tk = Tk()
tk.title('Calculator')
inp = Entry(tk,text="Enter Expression Here",width=20)
inp.pack()
exit = False
def exitbtn():
    global exit
    exit = True
    return exit
btn = Button(tk,text="Quit?",command=exitbtn)
btn.pack
canvas = Canvas(tk,width=200,height=200)
canvas.pack()
while not exit:
    expression = inp.get()
    solved = eval(expression)
    canvas.create_text(100,100,text=expression,font=('Times', 15))
    canvas.create_text(100,150,text=solved,font=('Times', 15))
    if exit == True:
        break
tk.destroy() 
```

我对 Python 很陌生，不明白为什么“solved = eval(expression)”行不起作用。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:51:12.520

所以，不工作的原因`eval`是因为当你第一次启动你的程序时，`expression`它只是一个空字符串。如果你进入 python shell，然后输入`eval('')`，你会看到同样的错误出现。

一种解决方案是检查是否`expression`为空字符串，然后执行以下操作：

```
expression = inp.get()
if expression != '':
    solved = eval(expression)
else:
    solved = '?' 
```

但是，即使您应用了此修复程序，由于不相关的原因，您的程序也无法运行。主要原因是你从不打电话`tk.mainloop()`（或不管它叫什么），所以窗口不会出现。

这是因为您的`while`循环 - 您想要做的是不断检查输入字段并在运行后获得新输入时更新您的画布`eval`。

然而，一般来说，GUI 程序不会以这种方式工作，并且在编写它们时需要不同的思维方式和方法。您无需编写循环来检查和更新程序状态，而是编写将在程序状态更改时自动调用的函数（称为事件）。一开始会感觉有点倒退，但随着时间的推移，它会帮助你的代码更清晰、更容易管理。

您实际上已经在您的程序的一部分中执行此操作 - 使用您的`exitbtn`函数。现在，您只需要将`while`循环转换为类似的函数并将其绑定到`Entry`对象。

**编辑：**

这是一些示例代码，可以满足您的要求：

```
import sys
from tkinter import *

# Create the GUI
tk = Tk()
tk.title('Calculator')

inp = Entry(tk, text="Enter Expression Here", width=20)
inp.pack()

btn = Button(tk, text="Quit?")
btn.pack()

canvas = Canvas(tk, width=200, height=200)
canvas.pack()

# Create callback functions
def end_program(event):
    '''Destroys the window and ends the program without needing
    to use global variables or a while loop'''
    tk.destroy()
    sys.exit() # Automatically ends any Python program

def update_canvas(event):
    '''Gets the input, tries to eval it, and displays it to the canvas'''
    expression = inp.get()
    try:
        solved = eval(expression)
    except SyntaxError: 
        # The expression wasn't valid, (for example, try typing in "2 +")
        # so I defaulted to something else.
        solved = '??'

    canvas.delete('all') # remove old text to avoid overlapping
    canvas.create_text(100, 100, text=expression,font=('Times', 15))
    canvas.create_text(100, 150, text=solved,font=('Times', 15))

# Bind callbacks to GUI elements
btn.bind('<Button-1>', end_program)
inp.bind('<KeyRelease>', update_canvas)

# Run the program
tk.mainloop() 
```

需要注意的一些事项：

*   我将您用于检查`inp`和写入画布的代码移至该`update_canvas`函数，并摆脱了`while`循环。
*   只要有人在输入对象（事件） `update_canvas`时松开键，就会自动调用该函数。`inp``<KeyRelease>`
    *   这可能会导致一些问题——这意味着您的`update_canvas`函数将在用户在您的计算器中输入文本的过程中被调用。例如，如果用户输入`2 + 2 *`怎么办？它不是一个完整的表达式，所以不能被`eval`.
    *   为了解决这个问题，我只是包装`eval`了一个 try-except 以防止任何错误的输入破坏程序。
*   同样，每当有人左键单击对象（事件）`end_program`时都会调用。`btn``<Button-1>`

# jquery - jQuery取消绑定或删除fadeIn淡出？

> ID：15705990
> 
> 赞同：-1
> 
> 时间：2013-03-29T15:11:41.190
> 
> 标签：jquery

当窗口已调整为特定大小（低于 960 像素宽度）时，我试图让 div 淡入或淡出，并且用户单击显示另一个 div 的按钮，以便它们不会在低屏幕上重叠尺寸。这是有效的：

```
jQuery(window).resize(function() {
    if ( jQuery(window).width() < 960) {
        jQuery(".main").animate({"top":"22%"});

        jQuery('#tblcontents').toggle(function() {
            jQuery(".main").fadeOut(1000);
        }, function(){ 
            jQuery(".main").fadeIn(1000);
            jQuery(".main").animate({"top":"22%"});
        });
    }
});

jQuery(window).resize(function() {
    if (jQuery(window).width() > 960) {
        jQuery(".main").stop(true, true);
    }
}); 
```

但是当用户将窗口大小重新调整到 960 像素以上时，我的问题就出现了，fadeIn 和 fadeOut 仍然处于活动状态，我该如何解决这个问题？我已经尝试了上面的例子：

```
jQuery(window).resize(function() {
    if ( jQuery(window).width() < 960) {
        jQuery(".main").animate({"top":"22%"});

        jQuery('#tblcontents').toggle(function(){
            jQuery(".main").fadeOut(1000);
        }, function(){ 
            jQuery(".main").fadeIn(1000);
            jQuery(".main").animate({"top":"22%"});
        });
    } else {
        jQuery(".main").stop(true, true);
    }

}); 
```

还有这个：

```
jQuery(window).resize(function() {
    if ( jQuery(window).width() < 960) {
        jQuery(".main").animate({"top":"22%"});

        jQuery('#tblcontents').toggle(function(){
            jQuery(".main").fadeOut(1000);
        }, function(){ 
            jQuery(".main").fadeIn(1000);
            jQuery(".main").animate({"top":"22%"});
        });
    } else {
        jQuery(".main").finish();
    }
}); 
```

除此之外：

```
jQuery(window).resize(function() {
    if (jQuery(window).width() < 960) {
        jQuery(".main").animate({"top":"22%"});

        jQuery('#tblcontents').toggle(function(){
            jQuery(".main").fadeOut(1000);
        }, function(){ 
            jQuery(".main").fadeIn(1000);
            jQuery(".main").animate({"top":"22%"});
        });
    } else {
        jQuery(".main").unbind();
    }
}); 
```

似乎没有任何工作，感谢您抽出宝贵的时间。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T22:39:20.377

这是我为解决它所做的：

```
 var main = $(".main"),
   sbContainer = $("#sb-container"),
   sbContainerDiv = sbContainer.find("div");
   tblcontents = $('#tblcontents');
   tblcontentstwo = $('#tblcontents_2')

  function animate() { 
   sbContainerDiv.css({ 
       "transform": "rotate(0deg)",
           "-webkit-transform": "rotate(0deg)",
           "-ms-transform": "rotate(0deg)",
           "-moz-transform": "rotate(0deg)",
           "-o-transform": "rotate(0deg)"
   });

   main.animate({
       "right": "1%"
   }, "slow");
}

   function toggletwo() {

   var toggleStatetwo = true;
   $(tblcontents).on("click", function () {
       if (toggleStatetwo) {
           animate({
               "top": "15%"
           });
           main.fadeOut(1000);
       } else {
           animate();
           main.fadeIn(1000);
       }
       toggleStatetwo = !toggleStatetwo;
   });

 }

 function toggleone() {
   $(tblcontents).on("click", function () {
       animate({
           "top": "1%"
       });
       main.stop(true, true);
   });

 }

 $(window).resize(function () {
   if ($(window).width() < 960) {
       toggletwo();
       animate();
   } else {
       toggleone();
   }
 });

 if ($(window).width() < 960) {
   toggletwo();
 } else {
   toggleone();
}

 $(window).scroll(function () {
   if ($(this).scrollTop() > 20) {
       toggleone();
       animate();
   } else {

   }
 });
 var toggleState = true;
$('.toggle_div').on("click", function () {
   if (toggleState) {
       main.animate({
           "right": "50%"
       }, "slow");
   } else {
       main.animate({
           "right": "1%"
       }, "slow");
   }
   toggleState = !toggleState;
 }); 
```

希望这对任何人都有帮助...

# css - 固定右下角但左上角将在同一轴上

> ID：15705994
> 
> 赞同：3
> 
> 时间：2013-03-29T15:11:55.370
> 
> 标签：css, position, fixed

我想制作一个固定在底部和右侧的 div，但上边距和左边距始终是浏览器的 100 像素！我知道这很奇怪，但我做不到。也许它需要一个javascript？或者我可以用css做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T15:24:43.323

这是一个解决方案，只需设置`left`并设置`top`到您需要的边距。

[jsFiddle](http://jsfiddle.net/BLfXU/)

**JS**

```
<div class="fixed"></div> 
```

**CSS**

```
.fixed {
    position:fixed;
    left:100px;
    top:100px;
    right:0;
    bottom:0;
    background-color:#F00;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T15:27:57.580

媒体查询。学会使用并爱上它们。

```
@media all and (max-width: 600px) {
    div {
        left: 0;
        margin-left: 100px;
    }
}
@media all and (max-height: 300px) {
    div {
        top: 0;
        margin-top: 100px;
    }
} 
```

[http://jsfiddle.net/L35cE/](http://jsfiddle.net/L35cE/)