# StackOverflow 问答 15982000-15982999

# javascript - 当多个元素具有相同的 id 时如何输出错误？

> ID：15982000
> 
> 赞同：2
> 
> 时间：2013-04-12T22:42:10.080
> 
> 标签：javascript, html

因为我对 div、span 和输入没有严格的命名约定，所以我经常不小心给多个输入提供相同的 id，这当然会导致 jQuery/javascript 代码无法工作。

不允许给多个元素提供相同的 id，但是当它发生时我在任何地方都看不到任何类型的错误消息，所以当我这样做时，有时需要很长时间才能意识到“哦，duh”时刻我做了什么。

有没有办法知道多个元素何时具有相同的 id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:45:14.363

这将是您将通过一遍又一遍地编写 HTML 来学习的标准实践！避免使用重复 ID 的一个好方法是使用更少的 ID，并可能使用类来代替它们。

仅将 ID 用于您网站上的重要/结构元素，例如`#header`, `#footer`, `#main`, `#slideshow`, `#content`,`#sidebar`等。

如果你在一个页面上一遍又一遍地重复 ID，也许你应该使用类。任何将被多次重用的元素/样式模块都应该使用一个类来标识。

此外，一些 IDE 将执行一些特殊的语法突出显示/文本修饰，让您知道正在发生一些时髦的事情。立即想到的两个是 SublimeText2 和 Visual Studio。

这是一个 jQuery 片段，您可以运行它来检查页面上的重复 ID。如果页面上有任何重复项，它将在您的控制台（F12 开发人员工具/Firebug）中通知您。

```
(function () {  
    var found = false;  
    $('[id]').each(function () {  
        var ids = $('[id=' + this.id + ']');  
        if (ids.length > 1 && ids[0] === this) {  
            console.warn('ID used more than once: ' + this.id, ids);  
            found = true;  
        }  
    });  
    if (!found) {  
        console.log('No duplicate IDs found');  
    }  
})(); 
```

你可以把它放在你的全局页脚中，让它在每一页上运行，只要确保在投入生产之前把它拿出来。

这是一个 JSFiddle：http: [//jsfiddle.net/A7h75/](http://jsfiddle.net/A7h75/)

[从这里得到脚本](http://bsdev.blogspot.com/2011/02/check-for-duplicate-dom-ids-with-simple.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:44:13.223

一个好的 IDE 会为您解决这个问题。我使用 Zend Studio（本质上是[Eclipse](http://www.eclipse.org/)的 PHP 特定版本），它会在您编写代码时为您捕捉到这一点。那是你能抓住它的时候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T22:45:19.410

[您可以通过W3C Validator Service](http://validator.w3.org/)检查您的 HTML 是否有效

这将向您显示 HTML 中的所有错误，并且建议您检查您的 HTML 是否存在可能导致跨浏览器呈现问题的错误

Firefox 和 Chrome 存在各种扩展来检查您的 HTML，而无需“手动”访问 Validator 服务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T23:08:50.173

您可以利用此功能检查重复项

```
function getDuplicateIds(){
    var dups = [];
    $('[id]').each(function(){
        if($('[id="'+$(this).attr('id')+'"]').length > 1) dups.push($(this).attr('id'));
    })
    return $.unique(dups);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T22:44:37.507

没有办法为此打开错误，但在特定情况下：

```
$('[id={elementId}]').length > 1 
```

应该做的伎俩。

编辑：感谢您的更正。

# logging - 是什么导致我的记录器每分钟“重新配置”属性？闪电战4j。

> ID：15982002
> 
> 赞同：1
> 
> 时间：2013-04-12T22:42:14.033
> 
> 标签：logging, netflix

我目前正在试用 netflix 的 Blitz4j。一切似乎都运行良好，但由于某种原因，我在日志文件中看到 log4j 不断尝试配置属性（每分钟）。

以下是我对 log4j 的配置：

```
# logging properties
## root logger options
log4j.rootCategory=OFF
log4j.rootLogger=INFO, stdout, LOGTXT
## stdout, logs show on console
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.Target=System.out
log4j.appender.stdout.layout=com.netflix.logging.log4jAdapter.NFPatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n
## LOGTXT, logs to a file
log4j.appender.LOGTXT=org.apache.log4j.DailyRollingFileAppender
log4j.appender.LOGTXT.File=./log/log.txt
log4j.appender.LOGTXT.Append=true
log4j.appender.LOGTXT.Threshold=DEBUG
log4j.appender.LOGTXT.DatePattern='-' yyyy-MM-dd
log4j.appender.LOGTXT.layout=com.netflix.logging.log4jAdapter.NFPatternLayout
log4j.appender.LOGTXT.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n
log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT 
```

在控制台/标准输出中，每分钟我都会看到：

```
2013-04-12 06:36:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Configuring log4j dynamically
2013-04-12 06:36:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Updated properties is :{log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT}
2013-04-12 06:36:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] The root category for log4j.rootCategory now is OFF
2013-04-12 06:36:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] The root category for log4j.rootLogger now is INFO, stdout, LOGTXT
2013-04-12 06:36:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Configuring log4j with properties :{log4j.appender.stdout=org.apache.log4j.ConsoleAppender, log4j.appender.LOGTXT.Append=true, log4j.rootLogger=INFO, stdout, LOGTXT, log4j.appender.LOGTXT.File=./log/log.txt, log4j.appender.LOGTXT=org.apache.log4j.DailyRollingFileAppender, log4j.appender.LOGTXT.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n, log4j.appender.LOGTXT.layout=com.netflix.logging.log4jAdapter.NFPatternLayout, log4j.appender.LOGTXT.Threshold=DEBUG, log4j.loggerFactory=com.netflix.blitz4j.NFCategoryFactory, log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT, log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n, log4j.appender.LOGTXT.DatePattern='.' yyyy-MM-dd, log4j.appender.stdout.layout=com.netflix.logging.log4jAdapter.NFPatternLayout, log4j.appender.stdout.Target=System.out, log4j.rootCategory=OFF}
log4j: Parsing for [root] with value=[INFO, stdout, LOGTXT].
log4j: Level token is [INFO].
log4j: Category root set to INFO
log4j: Parsing appender named "stdout".
log4j: Parsing layout options for "stdout".
log4j: Setting property [conversionPattern] to [%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n].
log4j: End of parsing for "stdout".
log4j: Setting property [target] to [System.out].
log4j: Parsed "stdout" options.
log4j: Parsing appender named "LOGTXT".
log4j: Parsing layout options for "LOGTXT".
log4j: Setting property [conversionPattern] to [%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n].
log4j: End of parsing for "LOGTXT".
log4j: Setting property [append] to [true].
log4j: Setting property [file] to [./log/log.txt].
log4j: Setting property [threshold] to [DEBUG].
log4j: Setting property [datePattern] to ['.' yyyy-MM-dd].
log4j: setFile called: ./log/log.txt, true
log4j: setFile ended
log4j: Appender [LOGTXT] to be rolled at midnight.
log4j: Parsed "LOGTXT" options.
log4j: Setting category factory to [com.netflix.blitz4j.NFCategoryFactory].
log4j: Parsing for [com.otcmarkets.mfa.common.util.logging.MfaLogFactory] with value=[INFO, stdout, LOGTXT].
log4j: Level token is [INFO].
log4j: Category com.otcmarkets.mfa.common.util.logging.MfaLogFactory set to INFO
log4j: Parsing appender named "stdout".
log4j: Appender "stdout" was already parsed.
log4j: Parsing appender named "LOGTXT".
log4j: Appender "LOGTXT" was already parsed.
log4j: Handling log4j.additivity.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=[null]
log4j: Finished configuring. 
```

在 log.txt 文件中，每分钟我都会看到：

```
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Configuring log4j dynamically
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Updated properties is :{log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT}
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] The root category for log4j.rootCategory now is OFF
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] The root category for log4j.rootLogger now is INFO, stdout, LOGTXT
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Configuring log4j with properties :{log4j.appender.stdout=org.apache.log4j.ConsoleAppender, log4j.appender.LOGTXT.Append=true, log4j.rootLogger=INFO, stdout, LOGTXT, log4j.appender.LOGTXT.File=./log/log.txt, log4j.appender.LOGTXT=org.apache.log4j.DailyRollingFileAppender, log4j.appender.LOGTXT.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n, log4j.appender.LOGTXT.layout=com.netflix.logging.log4jAdapter.NFPatternLayout, log4j.appender.LOGTXT.Threshold=DEBUG, log4j.loggerFactory=com.netflix.blitz4j.NFCategoryFactory, log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT, log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n, log4j.appender.LOGTXT.DatePattern='.' yyyy-MM-dd, log4j.appender.stdout.layout=com.netflix.logging.log4jAdapter.NFPatternLayout, log4j.appender.stdout.Target=System.out, log4j.rootCategory=OFF}
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Configuring log4j dynamically
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Updated properties is :{log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT}
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] The root category for log4j.rootCategory now is OFF
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] The root category for log4j.rootLogger now is INFO, stdout, LOGTXT
2013-04-12 06:38:36  INFO [ com.netflix.blitz4j.LoggingConfiguration ] Configuring log4j with properties :{log4j.appender.stdout=org.apache.log4j.ConsoleAppender, log4j.appender.LOGTXT.Append=true, log4j.rootLogger=INFO, stdout, LOGTXT, log4j.appender.LOGTXT.File=./log/log.txt, log4j.appender.LOGTXT=org.apache.log4j.DailyRollingFileAppender, log4j.appender.LOGTXT.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n, log4j.appender.LOGTXT.layout=com.netflix.logging.log4jAdapter.NFPatternLayout, log4j.appender.LOGTXT.Threshold=DEBUG, log4j.loggerFactory=com.netflix.blitz4j.NFCategoryFactory, log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory=INFO, stdout, LOGTXT, log4j.appender.stdout.layout.ConversionPattern=%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n, log4j.appender.LOGTXT.DatePattern='.' yyyy-MM-dd, log4j.appender.stdout.layout=com.netflix.logging.log4jAdapter.NFPatternLayout, log4j.appender.stdout.Target=System.out, log4j.rootCategory=OFF} 
```

不知何故，它在文件中记录了两次配置内容。

这是我的“日志工厂”：

```
public class MyLogFactory {
    // init the logging configuration instance
    private final static LoggingConfiguration logConfig = LoggingConfiguration.getInstance();

    static {
        /*  set up the properties for logging
            we will use two forms of logging
                1\. stdout
                2\. log file, rollover is every midnight
        */
        Properties props = new Properties();
        System.out.println("configuring properties for log4j");
        // root logger options
        props.setProperty("log4j.rootCategory", "OFF");
        props.setProperty("log4j.rootLogger", "INFO, stdout, LOGTXT");
        // direct log messages to stdout
        props.setProperty("log4j.appender.stdout", "org.apache.log4j.ConsoleAppender");
        props.setProperty("log4j.appender.stdout.Target", "System.out");
        props.setProperty("log4j.appender.stdout.layout", "com.netflix.logging.log4jAdapter.NFPatternLayout");
        props.setProperty("log4j.appender.stdout.layout.ConversionPattern", "%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n");
        // direct log messages to log file
        props.setProperty("log4j.appender.LOGTXT", "org.apache.log4j.DailyRollingFileAppender");
        props.setProperty("log4j.appender.LOGTXT.File", "./log/log.txt");
        props.setProperty("log4j.appender.LOGTXT.Append", "true");
        props.setProperty("log4j.appender.LOGTXT.Threshold", "DEBUG");
        props.setProperty("log4j.appender.LOGTXT.DatePattern", "'.' yyyy-MM-dd");
        props.setProperty("log4j.appender.LOGTXT.layout", "com.netflix.logging.log4jAdapter.NFPatternLayout");
        props.setProperty("log4j.appender.LOGTXT.layout.ConversionPattern", "%d{yyyy-MM-dd hh:mm:ss} %5p [ %c ] %m%n");
        props.setProperty("log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory", "INFO,stdout,LOGTXT");

        logConfig.configure(props);
        System.out.println("finished configuring properties for log4j");
    }

    public static Logger getLogger(Class clazz)
    {
        return LoggerFactory.getLogger(clazz);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T21:44:11.157

这是由于 Archaius 的默认行为（blitz4j 在后台使用的）。基本上，存在一个问题，即 Archaius 每次轮询（默认情况下每分钟）时检测定义记录器的属性已更改，而不管该属性是否实际已更改。

因此，在您的情况下，Archaius 每分钟都在检测 log4j.logger.com.otcmarkets.mfa.common.util.logging.MfaLogFactory 属性已更改，然后通过 blitz4j 触发 log4j 的重新配置。

有关更多信息，请参阅 Archaius 的 github 上的以下问题：[Github 问题](https://github.com/Netflix/archaius/issues/101)

# ios - iOS：ViewController 标题恢复为原始

> ID：15982005
> 
> 赞同：0
> 
> 时间：2013-04-12T22:42:29.680
> 
> 标签：ios

我在为 iOS 提供的视图控制器（例如 ABPersonViewController 和 EKEventViewController）自定义导航栏项目（标题、自定义栏按钮）时遇到了一些问题，其中我的自定义项目消失了，而原始项目又回来了。

在下面的示例中，我有一个 ABPersonViewController 的子类，它有一个自定义标题“我的标题！”：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"My Title!";
} 
```

![](https://i.stack.imgur.com/KkxeQ.png)

标题按预期显示，但在与此视图控制器交互一段时间后（例如单击编辑以编辑联系信息并按完成，甚至多次上下滚动视图）标题恢复为原始的“信息”。我怎样才能确保不会发生这种情况？

这发生在 iOS 6.x 上，并且也发生在我在导航栏上添加的自定义按钮上。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:48:06.947

`self.navigationItem.title`除了你正在做的事情之外，还要设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T22:52:04.203

我不确定是什么原因造成的，但您可以稍后尝试设置标题，例如在`viewWillAppear:`.

# jquery - jquery - 将文本插入输入时显示隐藏图像

> ID：15982010
> 
> 赞同：0
> 
> 时间：2013-04-12T22:42:57.140
> 
> 标签：jquery, input, show

我有一个简单的输入字段

```
<input id="pass" name="pass" value="" size="12" type="password" /> 
```

和同一页面上的隐藏图像

```
<img src="./magnifier.png" id="show" alt="" style="display:none;"/> 
```

当我将文本插入输入（id="pass"）时，是否可以显示图像（id="show"）？

空输入 = 没有图像，输入内的文本 = 图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:45:43.070

我建议以下内容：

```
$('#pass').keyup(function(){
    var hasValue = this.value.length > 0;
    $('#show')[hasValue ? 'show' : 'hide']();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s66cM/)。

或者没有（可能过于复杂）对三元运算符的依赖：

```
$('#pass').keyup(function(){
    var hasValue = this.value.length > 0;
    $('#show').toggle(hasValue);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s66cM/1/)。

为了在页面加载时显示图片（假设`#pass`有一个值）：

```
$('#show').toggle($('#pass').val().length > 0);

$('#pass').keyup(function(){
    var hasValue = this.value.length > 0;
    $('#show').toggle(hasValue);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/s66cM/2/)。

参考：

*   [`hide()`](http://api.jquery.com/hide/).
*   [`show()`](http://api.jquery.com/show/).
*   [`toggle()`](http://api.jquery.com/toggle/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:57:09.137

```
$('#pass').keyup(function () {
        var value=$('#pass').val();
        if (value != "") {
            $("#show").css("display", "block");
        }
        else {
            $("#show").css("display", "none");
        }

    }); 
```

如果我错了，请纠正。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T22:45:55.150

```
 $('#pass').keypress(function(){
        if($(this).val()!='')
        $('#show').show() //or may be with an effect
            else
        $('#show').hide()
    }); 
```

# c# - 在 C# 中尽早终止 Roslyn 脚本

> ID：15982013
> 
> 赞同：2
> 
> 时间：2013-04-12T22:43:12.463
> 
> 标签：c#, .net, roslyn

我正在加载和调用一个 csx 文件，如下所示：

```
BaseScript = new ScriptBase(); // My own type
var session = engine.CreateSession(BaseScript, typeof(ScriptBase));
BaseScript.Session = session;
//...
var script = File.ReadAllText(file);
BaseScript.Session.Execute(script); 
```

该脚本旨在无限期运行，并且基本上有一个`while (true);`。有没有办法让我过早地停止它？

另外，我正在考虑迁移到 Mono.Csharp，这可以让我这样做吗？总体而言，也许这是一个更好的选择，想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:12:25.030

所以答案是这样的：Roslyn 不解释 C#，它编译它。当您调用时`Execute(string)`，它实际上会立即执行它。我将调用放在一个新线程中，并在需要时 Abort() 对其进行了处理，这并不是特别优雅，但我不确定还能做什么。

# android - Cocos2dx : 移动平台游戏需要的帮助

> ID：15982018
> 
> 赞同：0
> 
> 时间：2013-04-12T22:43:46.763
> 
> 标签：android, windows, cocos2d-iphone, box2d, cocos2d-x

我正在尝试制作一个平台游戏，其中平台从屏幕右侧移动到屏幕左侧。并且在屏幕中间初始化了英雄。

平台是 b2_kinematicBody，而英雄是 b2_dynamic body。一旦我跳上平台，英雄就开始随着平台移动到屏幕的左侧。

我的问题是：如何防止英雄移动到屏幕左侧？我想让英雄始终保持在屏幕中间，给人一种他正在行走的印象，因为所有平台都在他身后向左移动。

请帮忙。任何指导将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:12:19.427

您的所有场景平台/对象可能都有一个主要空白`CCNode`，其中也将是您的 hero `CCSprite`。

然后，您只需要`CCNode`根据英雄的移动移动虚空，这样英雄精灵将始终位于中心（而您没有到达场景边缘），而场景将移动。像这样的东西。-

```
float positionX = heroSprite->getPosition().x;
if (positionX > 0) {
    float offset = positionX;
    voidNode->setPosition(ccp(MAX(-offset, -TOTAL_LEVEL_WIDTH + CANVAS_WIDTH), voidNode->getPosition().y));
} 
```

希望能帮助到你。

注意：此代码假设屏幕中心位于点 (0, 0)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:47:25.637

您需要 2 个`CCLayer`，一个作为整个场景的容器，另一个作为英雄和其他团队成员（如果存在）的容器。

您必须计算场景图层的边界是否超出屏幕。如果它到达屏幕边界，请移动你的英雄。否则将英雄保持在角色层的中心并移动场景层。

不要把人物和场景放在同一层，这样计算起来会复杂很多。

# xml - 从 GData Youtube 错误解析 XML

> ID：15982020
> 
> 赞同：0
> 
> 时间：2013-04-12T22:43:56.503
> 
> 标签：xml, api, parsing, gdata

从 gdata api 解析数据时，我遇到了一个非常烦人的错误，我真的不明白为什么这里会出现错误。xml 直接来自 gdata api。

```
 Dim Document As XDocument = XDocument.Parse(Response.Html) 
```

错误是：'=' 是一个意外的标记。预期的标记是';'。第 1 行，位置 1142。

这是输入的 XML

```
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:openSearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:gd="http://schemas.google.com/g/2005" xmlns:yt="http://gdata.youtube.com/schemas/2007" gd:etag="W/&quot;DEMHQXg5cSp7I2A9WhBWGE0.&quot;">
    <id>tag:youtube.com,2008:video:OtyPaMYuC0Q:comments</id>
    <updated>2013-04-12T22:40:30.629Z</updated>
    <category scheme="http://schemas.google.com/g/2005#kind" term="http://gdata.youtube.com/schemas/2007#comment" />
    <logo>http://www.youtube.com/img/pic_youtubelogo_123x63.gif</logo>
    <link rel="http://schemas.google.com/g/2005#feed" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments" />
    <link rel="http://schemas.google.com/g/2005#post" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments" />
    <link rel="http://schemas.google.com/g/2005#batch" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments/batch" />
    <link rel="self" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments?start-index=1&amp;max-results=1" />
    <link rel="service" type="application/atomsvc+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments?alt=atom-service" />
    <link rel="next" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments?start-index=2&amp;max-results=1" />
    <author>
        <name>YouTube</name>
        <uri>http://www.youtube.com/</uri>
    </author>
    <generator version="2.1" uri="http://gdata.youtube.com">YouTube data API</generator>
    <openSearch:totalResults>9284</openSearch:totalResults>
    <openSearch:startIndex>1</openSearch:startIndex>
    <openSearch:itemsPerPage>1</openSearch:itemsPerPage>
    <entry gd:etag="W/&quot;DkQNRn47eCp7I2A9WhBWGE0.&quot;">
        <id>tag:youtube.com,2008:video:OtyPaMYuC0Q:comment:pGfDzo6Y7ksUb5ICc3XxO4jP7npln-jyFXhsyFfp3H8</id>
        <published>2013-04-12T22:06:37.000Z</published>
        <updated>2013-04-12T22:06:37.000Z</updated>
        <category scheme="http://schemas.google.com/g/2005#kind" term="http://gdata.youtube.com/schemas/2007#comment" />
        <title>No Scrubs, What You ...</title>
        <content>No Scrubs, What You Know, Say My Name, Sweet Dreams... etc.  I wrote some crap for Michael &amp; Janet Jackson, Rihanna, Chris Brown, etc.  I've worked with a lot of people who were once famous, or who may still be famous.  I'm very proud if someone started off with me and went on to achieve great things.  Because it's always good because﻿ then I can count on them, possibly in the future.  I wrote most of the first Lady Gaga album, beats and lyrics.  I was very proud of those songs.</content>
        <link rel="related" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q" />
        <link rel="alternate" type="text/html" href="https://www.youtube.com/watch?v=OtyPaMYuC0Q" />
        <link rel="self" type="application/atom+xml" href="https://gdata.youtube.com/feeds/api/videos/OtyPaMYuC0Q/comments/pGfDzo6Y7ksUb5ICc3XxO4jP7npln-jyFXhsyFfp3H8" />
        <author>
            <name>nameless777</name>
            <uri>https://gdata.youtube.com/feeds/api/users/nameless777</uri>
            <yt:userId>vBwfm3xuTJYlHobnMa0Oaw</yt:userId>
        </author>
        <yt:videoid>OtyPaMYuC0Q</yt:videoid>
    </entry>
</feed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:52:43.510

没关系，由于某种原因，我不得不使用流加载。

# .net - 多个线程调用 UI 线程：表单数据需要锁定？

> ID：15982027
> 
> 赞同：1
> 
> 时间：2013-04-12T22:44:32.980
> 
> 标签：.net, multithreading, winforms, locking, begininvoke

我没有问题（还），因为我的应用程序可以工作，但我想了解发生了什么，所以我以后不会遇到麻烦。（我主要是数据库/Web 应用程序程序员，所以线程通常不是我的事！）

**简短版：当多个线程更新表单数据时，UI 是否需要锁定表单数据？**

我有一个简单的 Winforms 应用程序（使用 DataGridViews），它扫描文件中的某些内容并将结果显示给用户。起初我在 UI 线程中完成了这一切，但了解到这不是一个好主意，并决定将 ThreadPool.QueueUserWorkItem 用于 [ProcessorCount] 项目集合。这很好用，使用委托和 BeginInvoke 功能在找到结果时将结果发送到 UI。（虽然有时结果太多，用户界面仍然滞后，但这是另一个问题。）

工作线程是完全隔离的，做自己的事情。我了解多线程的概念，并且需要注意同时访问共享数据。然而，我不完全清楚的是，当各种线程调用 UI 线程来更新它时会发生什么。只有 UI 会更新控件（和表单级变量），但由于调用来自其他线程，这将如何发挥作用？例如，如果我将项目添加到 List 或增加计数器，来自一个工作线程的调用可以中断另一个工作线程吗？每个 BeginInvoke 都是它自己的调用，但修改数据似乎仍然是一个问题。

我发现的 BeginInvoke 示例都没有提到任何需要锁定 UI。这两个主题是相关的，但仍然没有给出我正在寻找的确切答案：

[使用 Control.Invoke() 代替 lock(Control)](https://stackoverflow.com/questions/7587132/using-control-invoke-in-place-of-lockcontrol)

[Invoke() 和 BeginInvoke() 有什么区别](https://stackoverflow.com/questions/229554/whats-the-difference-between-invoke-and-begininvoke)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:09:07.527

> 例如，如果我将项目添加到 List 或增加计数器，来自一个工作线程的调用可以中断另一个工作线程吗？每个 BeginInvoke 都是它自己的调用，但修改数据似乎仍然是一个问题。

不，调用调用不能被另一个这样的调用中断。事实上，它不能被UI 线程上的*任何其他操作中断。*这就是如果你让你的 UI 线程工作 UI 本身“挂起”的原因（输入和绘制消息排队等待处理，但它们不能中断你正在做的工作）。

但是，向 a 添加项目`List<T>`（您的意思是这样吗？）或增加一个计数器不是 UI 操作。你为什么在 UI 线程上做这些？

确实，在 UI 线程上调用此类操作会给您带来线程安全锁定的副作用，但它并不是真正免费的：它比在工作线程上执行简单的操作*要*昂贵得多。`lock`

您应该考虑改用这种方法，这也将解决您的“更新太多 = 滞后”问题：

*   数据变量（列表、计数器等）由工作线程直接操作。使用适当的锁定结构（[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)、[`Interlocked`](http://msdn.microsoft.com/en-us/library/5kczs5b5.aspx)方法、[并发集合](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)等）来提供线程安全。
*   每当工作线程修改数据变量时，它也会将全局`modified`标志设置为`true`.
*   *没有任何东西*被编组到 UI 线程（调用）。
*   同时，UI 线程设置一个定时器，例如每半秒触发一次。每当计时器触发时，UI 线程都会检查 的值`modified`并将其重置为`false`（您可以使用 无锁执行此操作[`Interlocked.CompareExchange`](http://msdn.microsoft.com/en-us/library/system.threading.interlocked.compareexchange.aspx)）。
*   如果 UI 线程发现数据已被修改，它会锁定所有数据变量并根据需要重新绘制 UI。

这样，您最多只能在每个计时器滴答声中获得一次（昂贵的！）UI 更新，并且无论从工作线程传入多少数据，UI 都不会滞后。另外，您可以根据自己的喜好选择计时器间隔。

# c# - 切换到 VS 2012，现在表单无法正确调整大小？

> ID：15982028
> 
> 赞同：6
> 
> 时间：2013-04-12T22:44:35.547
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio-2012

我昨天从 VS 2010 切换到 VS 2012，除此之外一切似乎都很顺利。

我的表单上有一个按钮，按下时会扩展表单的宽度以显示其他控件。再次按下按钮，它会减小隐藏这些控件的宽度。现在所有这些在 VS 2010 中运行良好，并且在我在 VS 2012 中调试时也运行良好，但是一旦我发布或编译项目并在您单击按钮时打开 .exe 时，它​​会将宽度添加为 5 而不是100+ 它需要。我再次单击它，然后它会像它应该的那样将其更改为 372 并显示我的所有控件。我再次单击它以隐藏控件，它隐藏了部分控件（转到 188 + 神秘的 5）我希望所有这些都有意义，并希望有更好的方法来运行我需要的过程。

这是我目前正在使用的代码，在从 2010 年切换到 2012 年之间我没有进行任何更改。事实上，如果我在 2010 年打开相同的解决方案并发布一切正常。

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (this.Width == 188)
        {
            this.Width = 372;
            this.Height = 540;
            progressBar.Value = 100;
            copied_status.Text = ("Output View Enabled");
        }
        else
        {
            progressBar.Value = 100;
            copied_status.Text = ("Output View Disabled");
            this.Width = 188;
            this.Height = 540;
        }

        if (this.Width == 372)
        {
            button1.Text = "<<";
        }
        else
            button1.Text = ">>";

    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-13T01:08:26.703

您的表单宽度已经很久没有达到 188 像素了。现在有了 VS2012，Windows 终于不再撒谎了。

有争议的是 Aero 中的胖窗口边框。当在 Vista 中引入该功能时，它们是一个极端的 appcompat 问题。非常必要，因为这两个像素很难用鼠标击中。但与应用程序创建窗口的方式完全不兼容。它要求 CreateWindow() 函数的特定窗口大小、外部大小、nWidth 和 nHeight 参数。但真正重要的是客户区的大小，即边框内的窗口部分。如果 Microsoft 对此不采取任何措施，那么旧的应用程序最终会导致客户区太小。这看起来很糟糕，窗口内容不再适合。例如，表单底部或右侧的控件不会完全显示。

所以，偷偷摸摸地，Aero 使窗口变大了胖边框的额外宽度。当应用程序询问窗口大小时，它偷偷说它小了相同的添加宽度。该应用程序不知道比它仍然以与 XP 上相同的窗口大小运行更好。这工作得很好，但并不完全理想。例如，很难让窗口边缘与那个谎言正确对齐。

Aero 是否会谎报窗口大小取决于 EXE 标头中记录的目标操作系统。当它看到比 6.00 更早的版本，即 Vista 版本号时，它会假定您的 EXE 是一个不知道粗边框功能的遗留程序。所以需要被骗。您已经将目标版本号设置为 4.00 运行了很长时间，它是由 .NET 编译器在构建程序时编写的。你可以看到它`dumpbin.exe /headers yourapp.exe`。

这最终在 VS2012 和 .NET 4.5 中改变了。这是一个在 XP 中不可用的 .NET 版本。编译器最终可以硬性假设 XP 已成为历史，并且您将在支持 Aero 的 Windows 版本上运行。因此它将 EXE 标头中的目标 Windows 版本设置为 6.00。相应地，Aero 现在将不再对窗口大小撒谎。你得到的是真正的，而不是假的。

因此，快速解决方法是将目标 .NET 框架版本更改为 4.0。这在 XP 上可用，所以你会再次被骗。

当然，最好修复您的代码。永远不要使用 Size、Width 或 Height 属性，它们将不可避免地取决于边框和标题的大小。请改用 ClientSize 属性，这是稳定的属性，也是您真正关心的属性。但也要小心该属性，当表单在其视频适配器设置为每英寸超过 96 个点的机器上运行时，它可能会重新缩放。在 Vista 及更高版本中非常易于访问的另一个功能。重新缩放会按 DPI 设置按比例更改 ClientSize。

真正的解决方法是使用 bool 字段来跟踪窗口状态。并根据要隐藏或显示的控件的位置设置 ClientSize 属性。大致如此：

```
private bool enlarged;

private void button1_Click(object sender, EventArgs e)
{
    enlarged = !enlarged;
    int width = someControl.Left - 5;
    if (enlarged) width = someControl.Right + 5;
    this.ClientSize = new Size(width, this.ClientSize.Height);
} 
```

将此代码中的 someControl 替换为您的控件的名称。

# java - 需要特定的 JRE 版本

> ID：15982038
> 
> 赞同：0
> 
> 时间：2013-04-12T22:45:36.900
> 
> 标签：java

所以我的程序使用仅在 Java 7 中的 API。我怎样才能做到，所以如果有人没有 Java 7，我可以让它告诉他们他们需要它，而不是抛出 unsupprotedClassVersionError。这也需要是多平台的！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:50:01.340

您可以在引导过程中检查该`java.version`属性（在加载程序中`main()`或作为加载程序的一部分）。

[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

不过，我注意到许多具有特定 JRE 版本要求的应用程序倾向于将 JRE 作为安装的一部分进行分发。

# javascript - Javascript如果满足某些条件，如何连接两个数组元素

> ID：15982043
> 
> 赞同：0
> 
> 时间：2013-04-12T22:46:15.043
> 
> 标签：javascript, arrays, concatenation

我正在研究一个可以解决基本代数的javascript函数。（例如 x +5 +x +2 = 11）。我拆分了等号所在的字符串。一切都打印到控制台进行测试。

```
> [x +5 +x +2]
  11 
```

在我拆分之后，我再次拆分它（带有变量的数组，我得到

```
> ["x", "+5", "+x", "+2"]
  11 
```

现在我需要以某种方式连接数组的可变部分。我打算使用 .join() 但这会加入整个数组，而我只想将数组中的元素与其中的变量连接起来。这就是我需要的：

```
> ["x+x", "+5", "+2"]
  11 
```

`array.join()`将返回“x+5+x+2”

# android - 在 android API 级别 8 中获取活动背景颜色

> ID：15982044
> 
> 赞同：0
> 
> 时间：2013-04-12T22:46:19.307
> 
> 标签：android

怎么做？在 API 级别 17 中，我使用了：

```
int color = ((ColorDrawable) activityLayout.getBackground()).getColor(); 
```

但是在 API 级别 11 中添加了`ColorDrawable`方法`getColor()`，所以我不能使用这个方法。

对不起我的英语不好。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T22:55:41.373

这可能看起来很愚蠢，但我建议绘制并使用位图`ColorDrawable`中`1 pixel dimension bitmap`的像素颜色`bitmap.getPixel(0, 0);`

// 示例代码

```
 ColorDrawable colorDrawable=((ColorDrawable) activityLayout.getBackground());

  Bitmap bitmap= Bitmap.createBitmap(1, 1, Config.ARGB_4444);
  Canvas canvas= new Canvas(bitmap);
  colorDrawable.draw(canvas);   
  int pix = bitmap.getPixel(0, 0);
  bitmap.recycle(); 
```

# asp.net-mvc-4 - @using(Html.BeginForm()) 返回格式异常 mvc4

> ID：15982049
> 
> 赞同：2
> 
> 时间：2013-04-12T22:46:45.617
> 
> 标签：asp.net-mvc-4, web-config, iis-7.5

我有一个 MVC4 Web 应用程序在我的开发机器上运行，没有任何问题，但是一旦我将它部署到主机服务器，我就会抛出以下异常`@using(Html.BeginForm())`。

```
        字符串未被识别为有效的布尔值。

    说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

    异常详细信息：System.FormatException：字符串未被识别为有效的布尔值。

    源错误：

    第 4 行：  
    第 5 行：  
    第 6 行：@using(Html.BeginForm(new { returnurl = ViewBag.Returnurl }))
    第 7 行：{
    第 8 行：@Html.AntiForgeryToken()

    源文件：e:\Sites\familybook\Views\Login\Login.cshtml 行：6

    堆栈跟踪：

    [FormatException：字符串未被识别为有效的布尔值。]
       System.Boolean.Parse（字符串值）+12636900
       System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider) +12819466
       System.Web.Mvc.ViewContext.ScopeGet(IDictionary`2 scope, String name, TValue defaultValue) +89
       System.Web.Mvc.ScopeCache..ctor(IDictionary`2 范围) +48
       System.Web.Mvc.ScopeCache.Get(IDictionary`2 范围，HttpContextBase httpContext) +282
       System.Web.Mvc.ViewContext.GetClientValidationEnabled（IDictionary`2 范围，HttpContextBase httpContext）+9
       System.Web.Mvc.Html.FormExtensions.FormHelper(HtmlHelper htmlHelper, String formAction, FormMethod 方法, IDictionary`2 htmlAttributes) +162
       System.Web.Mvc.Html.FormExtensions.BeginForm（HtmlHelper htmlHelper，对象 routeValues）+192
       ASP._Page_Views_Login_Login_cshtml.Execute() 在 e:\Sites\familybook\Views\Login\Login.cshtml:6
       System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +280
       System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +125
       System.Web.WebPages.StartPage.ExecutePageHierarchy() +143
       System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +181
       System.Web.Mvc.ViewResultBase.ExecuteResult（ControllerContext 上下文）+380
       System.Web.Mvc.c__DisplayClass1a.b__17() +33
       System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter（IResultFilter 过滤器，ResultExecutingContext preContext，Func`1 延续）+613
       System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 过滤器, ActionResult actionResult) +263
       System.Web.Mvc.Async.c__DisplayClass25.b__22(IAsyncResult asyncResult) +230
       System.Web.Mvc.c__DisplayClass1d.b__18(IAsyncResult asyncResult) +28
       System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +20
       System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +53
       System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +20
       System.Web.Mvc.c__DisplayClass8.b__3(IAsyncResult asyncResult) +42
       System.Web.Mvc.Async.c__DisplayClass4.b__3(IAsyncResult ar) +20
       System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +469
       System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +375

    版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.272

```

主机服务器是 Windows server 2008 R2 64 位，带有 IIS 7.5 和最新的 OS 更新和 .NET 4 框架安装在上面。

有趣的是，当我在使用 Windows 更新更新服务器之前，我在部署之前没有收到此错误。我注意到的另一件事是，如果我将发布类型设置为调试应用程序没有任何问题，而发布发布类型则没有。

我也尝试部署到我的开发机器上的本地文件夹，然后将内容复制到主机服务器，但得到了相同的最终结果。

编辑：

```
 @model FamilyBook.Models.Account.LoginUserModel

@Scripts.Render("~/bundles/jqueryval")

<section>
    @using(Html.BeginForm(new { returnurl = ViewBag.Returnurl }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)

        <fieldset>
            <legend>Login with local account</legend>

            <div class="editor-label">
                @Html.LabelFor(model => model.Username)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Username)
                @Html.ValidationMessageFor(model => model.Username)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Password)
            </div>
            <div class="editor-field">
                @Html.PasswordFor(model => model.Password)
                @Html.ValidationMessageFor(model => model.Password)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.RememberMe)
            </div>
            <div class="editor-field">
                @Html.CheckBoxFor(model => model.RememberMe)
            </div>

            <p>
                <input type="submit" value="Login" />
            </p>

        </fieldset>
    }
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-28T21:37:10.443

问题的根本原因是，当对自定义键的 appSettings 执行 web.conf 转换时，它们用与第一个自定义键相同的值覆盖了所有其他键。所以对 -> 进行简单的更改就解决了这个问题。这可以在堆栈跟踪中看到，当调用 MVC System.Web.Mvc.ViewContext.GetClientValidationEnabled 中的此函数以检查 clientSideValidation 是否启用时，应用程序崩溃。更多信息可以在这个线程中找到[http://forums.asp.net/t/1924833.aspx/1?Format+exception+on+Html+BeginForm+String+was+not+recognized+as+a+valid+布尔值](http://forums.asp.net/t/1924833.aspx/1?Format+exception+on+Html+BeginForm+String+was+not+recognized+as+a+valid+boolean)

# mysql - 如何以可扩展的方式使一个 MySQL 表与任何其他表相关？

> ID：15982053
> 
> 赞同：3
> 
> 时间：2013-04-12T22:47:36.980
> 
> 标签：mysql

我有一张名为“评论”的表格。我希望该表能够与数据库中的任何其他表相关联。例如，假设我有“用户”、“项目”和“任务”表。我希望能够将评论与任何这些表中的任何行相关联。

我当前的解决方案是一个名为“comments_relations”的表，它有 4 列：“id”、“comment_id”、“foreign_table”和“foreign_table_id”。这很好用，但有一个严重的问题：“comments”表*实际上*与任何其他表都不相关，所以我没有得到外键的任何优点。删除项目时，我希望也删除所有相关评论，用户和任务以及我添加的任何未来表也是如此。

根据我的经验，我只能描绘出两个真正的解决方案（在我看来，两者都很糟糕）：

1.  为每个相关表的“comments”表添加一个可为空的列，例如“user_id”、“project_id”和“task_id”。我可以在所有这些列上定义一个外键并获得我想要的行为。但是，当我有 10 个需要评论的表的那一天呢？然后是20？我不认为这是一个非常可扩展的解决方案。
2.  为每个相关表添加另一个表，例如将每个表链接到评论表的“users_comments”、“projects_comments”等。这使“评论”表保持干净，但同样，这将使我的数据库中的表数量几乎翻倍。如果我添加另一个应该与其他表相关的表怎么办？这不成比例。

一个理想的解决方案是我目前正在使用的解决方案，但不知何故增强了我的外键功能。

## 总结的问题：

定义可以与*任何数量*的其他表相关的表的最具可扩展性的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:03:57.450

只是大声思考并假设您要维护 1 个评论表，但是如何为每个表分配一个 ID。像这样的东西：

```
ID  |  table_name
-----------------
 1  |  users
 2  |  projects
 3  |  tasks 
```

然后在您的评论表中，您只有一个表 ID 列，然后是用户/项目/任务数据的特定行 ID：

```
ID  |  table_id  |  data_id  |  comment
---------------------------------------------------
 1  |     1      |    468    |  yadda yadda yadda
 2  |     2      |    915    |  yadda yadda yadda
 3  |     1      |    195    |  yadda yadda yadda
 4  |     3      |    731    |  yadda yadda yadda
 5  |     1      |     5     |  yadda yadda yadda 
```

设置初始关联表会有一些开销，但我认为这并不可怕，因为表的添加/删除往往不是动态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:05:19.717

规范化与非规范化。

正常化：基本上你说的一切。

*   每个表 1 个注释表，使用 FK 引用
*   优点：又快又干净
*   缺点：桌子维护可能吗？很多桌子。但是有一个好的发电机应该没问题。你决定。

非规范化：（部分元建模）

*   1 个表`commentable_object`: `id`, `name`(task/project/user..expandable in 1 insert。这是您定义接受评论的对象类型的表。体积很小，只有几个插入，因为它包括线性化您的旧 DDL )
*   1 个表`commentable_object_instance`: `id`, `object_name`(task/project/user), `otherpropsofyourchoice`- 这是您的实际任务、用户等的表。
*   1 个表`comment`: `id`, `text`, # `id_commentable_object_instance`(fk to previous table)
*   优点：在主`commentable_object`表中插入一个，您就完成了模型升级
*   缺点：性能低于标准化模型

# java - 弹跳线碰撞

> ID：15982056
> 
> 赞同：0
> 
> 时间：2013-04-12T22:47:45.260
> 
> 标签：java, awt, line, collision-detection, bounce

```
 import java.awt.Color;
    import java.awt.Graphics2D;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.util.Random;

    import javax.swing.Timer;

    public class BouncingLinesWithSound implements ActionListener
    {
      private Random rand = new Random();
      private Timer myTimer;
      private Picture myPic;

      //TODO: Changed form Graphics
      private Graphics2D canvas;

      //TODO: Requires SoundPlayer.java to be in same project src folder as this file
      private SoundPlayer boinkSound;

      private static final int DRAW_WIDTH = 600;
      private static final int DRAW_HEIGHT = 600;

      private int x1, y1, x2, y2;
      private int x3, y3, x4, y4;
      private int speedX1, speedX2, speedY1, speedY2;
      private int speedX3, speedX4, speedY3, speedY4;

      //////////////////////////////////////////////////////////////////////
      // BouncingLine Constructor. This constructor:
      // 1) Creates an empty Picture Frame
      // 2) Sets the initial location, and speed of each end point of a line.
      // 3) Start the timer.
      /////////////////////////////////////////////////////////////////////
      public BouncingLinesWithSound() 
      {
        myPic = new Picture(DRAW_WIDTH, DRAW_HEIGHT);

    //TODO
    //If you want a Graphics2D rather than a graphics, just cast 
    //  the value returned by myPic.getOffScreenGraphics()
    canvas = (Graphics2D)myPic.getOffScreenGraphics();

    canvas.setColor(Color.WHITE);
    canvas.fillRect(0, 0, DRAW_WIDTH, DRAW_HEIGHT);

    myPic.setTitle("Bouncing Line");

    x1 = rand.nextInt(DRAW_WIDTH);
    y1 = rand.nextInt(DRAW_HEIGHT);
    x2 = rand.nextInt(DRAW_WIDTH);
    y2 = rand.nextInt(DRAW_HEIGHT);
    x3 = rand.nextInt(DRAW_WIDTH);
    y3 = rand.nextInt(DRAW_HEIGHT);
    x4 = rand.nextInt(DRAW_WIDTH);
    y4 = rand.nextInt(DRAW_HEIGHT);

    speedX1 = rand.nextInt(25)-12;
    speedY1 = rand.nextInt(25)-12;
    speedX2 = rand.nextInt(25)-12;
    speedY2 = rand.nextInt(25)-12;
    speedX3 = rand.nextInt(25)-12;
    speedY3 = rand.nextInt(25)-12;
    speedX4 = rand.nextInt(25)-12;
    speedY4 = rand.nextInt(25)-12;

    ////////////////////////////////////////////
    try
    {
      boinkSound = new SoundPlayer();
    }
    catch (Exception e)
    {
      System.out.println("BouncingLinesWithSound():: "+e.getMessage());
      System.exit(0);
    }

    myTimer = new Timer(30, this); // miliseconds
    myTimer.start();

  }

  ///////////////////////////////////////////////////////////////////////
  // Called each time the timer fires.
  // 1) Erase the current line
  // 2) Move the two end points of the line.
  // 3) Check to see if either end point moved outside the frame. If so,
  //    give that end point a random speed in the direction away from 
  //    the edge it moved off.
  // 4) Draw the line in its new location.
  ////////////////////////////////////////////////////////////////////////
  public void actionPerformed(ActionEvent arg0)
  {

    //Erase Line in its current location
    canvas.setColor(Color.WHITE);
    canvas.drawLine(x1, y1, x2, y2);
    canvas.drawLine(x3, y3, x4, y4);

    x1 += speedX1;
    y1 += speedY1;

    x2 += speedX2;
    y2 += speedY2;

    x3 += speedX3;
    y3 += speedY3;

    x4 += speedX4;
    y4 += speedY4;

    boolean hit = false;
    if (x1 < 0) 
    { speedX1 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (x1 > DRAW_WIDTH) 
    {
      speedX1 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (y1 < 0) 
    { speedY1 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (y1 > DRAW_HEIGHT)
    { speedY1 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (x2 < 0) 
    { speedX2 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (x2 > DRAW_WIDTH) 
    {
      speedX2 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (y2 < 0) 
    { speedY2 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (y2 > DRAW_HEIGHT)
    { speedY2 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (x3 < 0) 
    { speedX3 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (x3 > DRAW_WIDTH) 
    {
      speedX3 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (y3 < 0) 
    { speedY3 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (y3 > DRAW_WIDTH) 
    {
      speedY3 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (x4 < 0) 
    { speedX4 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (x4 > DRAW_WIDTH) 
    {
      speedX4 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (y4 < 0) 
    { speedY4 = rand.nextInt(12)+1;
      hit = true;
    }
    else if (y4 > DRAW_WIDTH) 
    {
      speedY4 = -(rand.nextInt(12)+1);
      hit = true;
    }

    if (hit) boinkSound.play();

    //Draw Line in new location
    canvas.setColor(Color.RED);
    canvas.drawLine(x1, y1, x2, y2);
    canvas.drawLine(x3, y3, x4, y4);
    myPic.repaint();

  }

  /////////////////////////////////////////////////////////////////////
  // Create and run BouncingLinesWithSound
  /////////////////////////////////////////////////////////////////////
  public static void main(String[] args)
  {
    new BouncingLinesWithSound();   
  }
} 
```

嗨，我有一些代码，当它们到达屏幕边缘时，两条线会在周围弹跳并从墙壁上弹起甚至开始

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T22:58:36.233

一个基本的“线-线碰撞检测”算法将起作用。请参阅[如何检测 2D 在线碰撞？](https://gamedev.stackexchange.com/questions/26004/how-to-detect-2d-line-on-line-collision)和[Line-line Intersection](http://en.wikipedia.org/wiki/Line-line_intersection)。您还需要使用点/线*列表*，而不是 Xn .. Yn 变量名称。

# php - 应该使用哪个 PHP 函数来打开服务器上的文件？

> ID：15982059
> 
> 赞同：3
> 
> 时间：2013-04-12T22:48:14.993
> 
> 标签：php, file, fopen, readfile

我想在远程服务器上打开一个文件（例如`http://example.org/script.php?param=000001`）。PHP 提供了其中几种方法，我想知道我应该采用哪种方法，为什么？有什么优点/缺点吗？

到目前为止，我使用`fopen()`了 ，但是在几次读取操作之后，服务器没有响应我的请求并且 fopen() 失败了。后来我试过`file_get_contents()`了，也失败了。

我认为可能是服务器阻止了我的 IP，因为我打开了许多流。**这也会发生`file_get_contents()`吗？**

当我想在服务器上打开许多文件时，我应该使用哪种方法？

**`fopen()`和之间的技术区别是什么`file_get_contents()`？**为什么服务器要阻止我的IP？（例如，服务器的打开文件流数量有限，...或者 fopen 需要更多资源）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:51:47.810

[`file_get_contents()`](http://www.php.net/manual/en/function.file-get-contents.php)是要走的路

如果您有特殊的 HTTP 标头要求，请使用[上下文参数](http://php.net/manual/en/context.http.php)

更新：

我看到你已经稍微编辑了这个问题。`fopen`请注意，和之间的区别`file_get_contents`仅在于后者将打开文件，读取内容，关闭文件，返回第一个刚刚打开文件的内容。*打开*的过程是一样的。

# php - MongoDB：选择特定的子文档

> ID：15982065
> 
> 赞同：0
> 
> 时间：2013-04-12T22:48:56.127
> 
> 标签：php, mongodb

这是 products 集合中的文档示例。

```
object(MongoId)#8 (1) {
  ["$id"]=>
  string(24) "5165b2c8ac951ab812000001"
}
int(0)
array(7) {
  [0]=>
  array(2) {
    ["sValue"]=>
    string(10) "1223828372"
    ["iPosX"]=>
    int(0)
  }
  [1]=>
  array(2) {
    ["sValue"]=>
    string(12) "Epson EB-S11"
    ["iPosX"]=>
    int(1)
  }
  [2]=>
  array(2) {
    ["sValue"]=>
    string(6) "Beamer"
    ["iPosX"]=>
    int(2)
  }
  [3]=>
  array(2) {
    ["sValue"]=>
    string(48) "TV>>Beamer & Projektoren|Epson EB-S11-1300742000"
    ["iPosX"]=>
    int(3)
  }
  [4]=>
  array(2) {
    ["sValue"]=>
    string(6) "398.00"
    ["iPosX"]=>
    int(4)
  }
  [5]=>
  array(2) {
    ["sValue"]=>
    string(85) "http://www.myshop.com/product-1223828372.html"
    ["iPosX"]=>
    int(5)
  }
  [6]=>
  array(2) {
    ["sValue"]=>
    string(5) "Epson"
    ["iPosX"]=>
    int(6)
  }
} 
```

我想选择此集合中的产品，但不是所有子文档。例如：我只想从这个文档中获取 iPosX 为 1、2 或 4 的子文档。

具体来说：我需要此产品的所有信息以及 iPosX 字段为 1、2 或 4 的子文档。

我怎样才能做到这一点？

提前致谢。最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:19:14.360

您最好的方法是使用MongoDB 2.2+ 中的[聚合框架：](http://docs.mongodb.org/manual/core/aggregation/)

```
db.products.aggregate(
    // Optional: could include a $match to limit the matching documents

    // Create a stream of documents from the products array
    { $unwind: "$products" },

    // Filter the matching products
    { $match: {
        "products.iPosX": { $in: [1,2,4] }
    }},

    // Reshape output so matched products are at top level of results
    { $project: {
        _id: 0,
        sValue: "$products.sValue",
        iPosX:  "$products.iPosX",
    }}
) 
```

示例输出：

```
{
    "result" : [
        {
            "sValue" : "Epson EB-S11",
            "iPosX" : 1
        },
        {
            "sValue" : "Beamer",
            "iPosX" : 2
        },
        {
            "sValue" : "398.00",
            "iPosX" : 4
        }
    ],
    "ok" : 1
} 
```

# c++ - 查询Dll布局信息

> ID：15982068
> 
> 赞同：-2
> 
> 时间：2013-04-12T22:49:28.067
> 
> 标签：c++, windows, dll, portable-executable, dllmain

我想从内存中的 DLL 中查询以下信息：

*   入口点的确切地址（DllMain？！）
*   Dll代码段的地址和大小
*   每个 EXPORTED 函数的入口点地址

我使用`GetModuleInformation()`了从 PSAPI 函数来查询入口点。但根据 MSDN “这不是`DllMain`函数的地址”。

是否有任何库/API 可以查询这些信息？

我需要一种通用的方法来查询这些信息，它不依赖于硬编码的字符串或其他东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:05:53.300

入口点将由`GetModuleInformation()`.

如果`DllMain`是导出的，请使用`GetProcAddress()`.

根据您拒绝的答案，我或多或少对您实际尝试做的事情感到不知所措。如果你解释你想要完成的事情，你更有可能得到有意义的帮助。

# ios - 如何显示这种接收到的 NSXMLParser 数据

> ID：15982071
> 
> 赞同：1
> 
> 时间：2013-04-12T22:49:51.837
> 
> 标签：ios, xcode, uitextview, nsxmlparser

这是一个xml代码示例：

```
<content:encoded><![CDATA[<p style="direction: rtl">בפייסבוק הישראלי תמצאו, לצד תמונות החתולים והסרטונים הוויראליים גם אינספור תלונות, טרוניות וביקורת נגד חברות ומותגים שונים. חלק מהפרסומים מוצדקים, וזוכים לשיתופים לייקים ולעתים אף למענה של המותג נגדו מתלוננים הגולשים, וחלק קטנוניים עד כדי גיחוך וסביר יותר שהם פשוט בדיחות על חשבון התלונות הרבות שמתפרסמות להן בפייסבוק בקצב די מסחרר.</p><p><a class="bannerlink" rel="nofollow" href="http://www.b144.co.il/products/%d7%9e%d7%94%d7%a0%d7%93%d7%a1%d7%99_%d7%91%d7%a0%d7%99%d7%99%d7%9f.aspx?sitecode=60&subsitecode=368&site=WEB 3.0   pareto" target="_blank" onclick="_gaq.push(['_trackEvent', 'b144_8', 'post', 'BannerLink']);">כל מהנדסי הבניין באתר b144</a></p>
<p style="direction: rtl">היום נתקלנו בסיפור קורע לב (אבל לא באמת) מצד הגולשת תמר צ&#8217;קרטש לוי <a href="https://www.facebook.com/photo.php?fbid=10151371867297006&amp;set=o.128891317150327&amp;type=1&amp;theater" target="_blank">שהתלוננה בפירוט ובאריכות בדף של גלידות נסטלה על בעיה רצינית אליה יש להתייחס בכובד ראש</a>: מיעוט סוכריות הגומי בשלגוני &quot;גומיגם&quot; שמשווקים על-ידי החברה. צ&#8217;קרטש לוי כתבה:</p>
<p style="direction: rtl">&quot;בסך הכל אני מרוצה מהמוצרים שלכם וקונה הרבה מהם, אך יש משהו אחד שחוזר על עצמו ושמתי לב אליו כבר לפני זמן רב והחלטתי להצטרף גם למהלך החברתי החדש ולכתוב לכם פה.   <br />במוצר המצליח שלכם, ״גומיגם״, גלידת סורבה בטעם פירות המשלב בתוכו סוכריות גומי, אין יותר מ-3 סוכריות גומי. מסקר נרחב שערכתי בקרב חתך אוכלוסייה רחב, מרבית האנשים רוכשים מוצר זה בשל סוכריות הגומי המוצפנות בתוכו, ומתאכזבים כל פעם מחדש מכך שאין יותר מ-3 סוכריות.    <br />כל פעם מחדש אני מרגישה מרומה.    <br />תודה רבה על ההקשבה, אשמח אם תיקחו זאת לתשומת ליבכם ותטפלו בבעיה.&quot;</p>
<p style="direction: rtl"><a href="http://www.holesinthenet.co.il/archives/87871/gumigam" rel="attachment wp-att-87872"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; border-top: 0px; border-right: 0px; padding-top: 0px" class="aligncenter size-full wp-image-87872" border="0" alt="gumigam" src="http://www.holesinthenet.co.il/wp-content/uploads/2013/04/gumigam.png" width="560" height="330" /></a></p>
<p style="direction: rtl">הפוסט זכה לאלפי לייקים ומאות שיתופים, ובתגובות הצטרפו רבים לתלונתה של תמר:</p>
<p style="direction: rtl">הבלוגר עמרי חיון כתב: &quot;אני איתך אחותי! המחאה הכי צודקת מאז קיץ 2011&quot; ועמו הסכימה גם סיון סגל שציינה ש:&quot;מעולם לא היה פוסט חשוב יותר מזה בפייסבוק&quot;.</p>
<p style="direction: rtl">עורכת הדין רות גדרון תהתה: &quot;מי אמר שצריכים להיות יותר מ3 ?!?!?&quot; ומארק שפילמן הציע להחליף את שם המוצר ל&quot;זובי גם&quot; בגלל האכזבה הקשה שבמיעוט סוכריות הגומי.&quot; גם לאיתי סבח היו תלונות על שם המוצר וההטעיה שהוא יוצר. &quot;הכי הזוי שקוראים לזה גומיגם ספארי.. אני עוד לא ראיתי ספארי עם שלוש חיות. בפארק ליד הבית שלי יש יותר משלוש חיות וזה לא כולל את הערסים!&quot;</p>
<p style="direction: rtl">כמובן שחלק מהמגיבים החליטו שמדובר בתלונה רצינית והטיחו במפרסמת הפוסט שהיא מתעלמת מהבעיות הקשות במדינה, כמו ניצולי השואה ונגע האלימות, ומתעסקת בתפל. לכם, קוראים יקרים, אנחנו לא צריכים להסביר שהתעסקות בתפל, קטנוניות ובזבוז זמן הם מהשימושים הנפוצים בישראל לרשת פייסבוק, פרט אולי למשחקים בה ותמונות חיות המחמד לאימוץ. סטטוס התלונה הזה הוא לא יותר מהקצנה סטירית.</p>
<p style="direction: rtl">למרות זאת, הצלחנו לאתר בסבך 800 התגובות לפוסט את התגובה של חברת נסטלה, שהגיבה באופן הכי צפוי ומשעמם: ביקשה את פרטיה של המתלוננת בשביל ליצור עמה קשר לבירור פרטי התלונה ואולי גם ייתנו פיצוי. חבל, אנחנו דווקא היינו שמחים לראות אותם משחקים יחד עם שאר הטרולים בשרשור וכותבים משהו כמו &quot;צמצמנו את מספר חיות הגומי בשלגונים בגלל עלות המחייה ובניסיון לצמצם את מפגת ההשמנה והסכרת בקרב ילדים&quot;.</p>
<p style="direction: rtl"><a href="http://www.holesinthenet.co.il/archives/87871/nestle" rel="attachment wp-att-87873"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; border-top: 0px; border-right: 0px; padding-top: 0px" class="aligncenter size-full wp-image-87873" border="0" alt="nestle" src="http://www.holesinthenet.co.il/wp-content/uploads/2013/04/nestle.png" width="395" height="187" /></a></p>
<p style="direction: rtl">
<p style="direction: rtl">(תודה למוטי פנחסי ששלח)</p>
<img src="http://feeds.feedburner.com/~r/holes/~4/8a7HU6h5VbA" height="1" width="1"/>]]></content:encoded> 
```

我想知道如何在这张图片中显示该 xml，并带有链接：

![示例图片](https://i.stack.imgur.com/QsGY1.png)

我应该以某种方式使用 UIwebview 吗？还是有另一种方法？提前致谢！（对不起语言）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:56:29.203

是的，UIWebView 是一种方法。您可以将 Web 视图的 URL 指定为以下文件：a) 预安装在 iPhone 上或 b) 通过 Internet 加载。

另一种选择是使用 UITextView。您可以通过将内容分配给`text`属性来指定文本视图的内容。

[编辑] 如果您的“xml 代码”是在 iOS 设备上运行的解析器的结果，则将解析后的输出写入文件，然后创建 UIWebView 以引用该文件。喜欢：

```
[myWebView loadRequest:
       [NSURLRequest requestWithURL:[NSURL URLWithString:@"file://<path-to-file>"]]]; 
```

或者，我相信，将“xml 代码”保留为字符串并尝试：

```
[myWebView loadHTMLString: <the-xml-code-as-a-string> baseURL: ...] 
```

[编辑]

我对此进行了测试，并且有效。这是我的 iOS 模拟器显示的内容： ![在此处输入图像描述](https://i.stack.imgur.com/yV1TM.png)

这是代码：

```
static NSString *message = @"<p style=\"direction: rtl\">בפייסבוק הישראלי תמצאו, לצד תמונות החתולים והסרטונים הוויראליים גם אינספור תלונות, טרוניות וביקורת נגד חברות ומותגים שונים. חלק מהפרסומים מוצדקים, וזוכים לשיתופים לייקים ולעתים אף למענה של המותג נגדו מתלוננים הגולשים, וחלק קטנוניים עד כדי גיחוך וסביר יותר שהם פשוט בדיחות על חשבון התלונות הרבות שמתפרסמות להן בפייסבוק בקצב די מסחרר.</p><p><a class=\"bannerlink\" rel=\"nofollow\" href=\"http://www.b144.co.il/products/%d7%9e%d7%94%d7%a0%d7%93%d7%a1%d7%99_%d7%91%d7%a0%d7%99%d7%99%d7%9f.aspx?sitecode=60&subsitecode=368&site=WEB 3.0   pareto\" target=\"_blank\" onclick=\"_gaq.push(['_trackEvent', 'b144_8', 'post', 'BannerLink']);\">כל מהנדסי הבניין באתר b144</a></p>\n\
<p style=\"direction: rtl\">היום נתקלנו בסיפור קורע לב (אבל לא באמת) מצד הגולשת תמר צ&#8217;קרטש לוי <a href=\"https://www.facebook.com/photo.php?fbid=10151371867297006&amp;set=o.128891317150327&amp;type=1&amp;theater\" target=\"_blank\">שהתלוננה בפירוט ובאריכות בדף של גלידות נסטלה על בעיה רצינית אליה יש להתייחס בכובד ראש</a>: מיעוט סוכריות הגומי בשלגוני &quot;גומיגם&quot; שמשווקים על-ידי החברה. צ&#8217;קרטש לוי כתבה:</p>\n\
<p style=\"direction: rtl\">&quot;בסך הכל אני מרוצה מהמוצרים שלכם וקונה הרבה מהם, אך יש משהו אחד שחוזר על עצמו ושמתי לב אליו כבר לפני זמן רב והחלטתי להצטרף גם למהלך החברתי החדש ולכתוב לכם פה.   <br />במוצר המצליח שלכם, ״גומיגם״, גלידת סורבה בטעם פירות המשלב בתוכו סוכריות גומי, אין יותר מ-3 סוכריות גומי. מסקר נרחב שערכתי בקרב חתך אוכלוסייה רחב, מרבית האנשים רוכשים מוצר זה בשל סוכריות הגומי המוצפנות בתוכו, ומתאכזבים כל פעם מחדש מכך שאין יותר מ-3 סוכריות.    <br />כל פעם מחדש אני מרגישה מרומה.    <br />תודה רבה על ההקשבה, אשמח אם תיקחו זאת לתשומת ליבכם ותטפלו בבעיה.&quot;</p>\n\
<p style=\"direction: rtl\"><a href=\"http://www.holesinthenet.co.il/archives/87871/gumigam\" rel=\"attachment wp-att-87872\"><img style=\"background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; border-top: 0px; border-right: 0px; padding-top: 0px\" class=\"aligncenter size-full wp-image-87872\" border=\"0\" alt=\"gumigam\" src=\"http://www.holesinthenet.co.il/wp-content/uploads/2013/04/gumigam.png\" width=\"560\" height=\"330\" /></a></p>\n\
<p style=\"direction: rtl\">הפוסט זכה לאלפי לייקים ומאות שיתופים, ובתגובות הצטרפו רבים לתלונתה של תמר:</p>\n\
<p style=\"direction: rtl\">הבלוגר עמרי חיון כתב: &quot;אני איתך אחותי! המחאה הכי צודקת מאז קיץ 2011&quot; ועמו הסכימה גם סיון סגל שציינה ש:&quot;מעולם לא היה פוסט חשוב יותר מזה בפייסבוק&quot;.</p>\n\
<p style=\"direction: rtl\">עורכת הדין רות גדרון תהתה: &quot;מי אמר שצריכים להיות יותר מ3 ?!?!?&quot; ומארק שפילמן הציע להחליף את שם המוצר ל&quot;זובי גם&quot; בגלל האכזבה הקשה שבמיעוט סוכריות הגומי.&quot; גם לאיתי סבח היו תלונות על שם המוצר וההטעיה שהוא יוצר. &quot;הכי הזוי שקוראים לזה גומיגם ספארי.. אני עוד לא ראיתי ספארי עם שלוש חיות. בפארק ליד הבית שלי יש יותר משלוש חיות וזה לא כולל את הערסים!&quot;</p>\n\
<p style=\"direction: rtl\">כמובן שחלק מהמגיבים החליטו שמדובר בתלונה רצינית והטיחו במפרסמת הפוסט שהיא מתעלמת מהבעיות הקשות במדינה, כמו ניצולי השואה ונגע האלימות, ומתעסקת בתפל. לכם, קוראים יקרים, אנחנו לא צריכים להסביר שהתעסקות בתפל, קטנוניות ובזבוז זמן הם מהשימושים הנפוצים בישראל לרשת פייסבוק, פרט אולי למשחקים בה ותמונות חיות המחמד לאימוץ. סטטוס התלונה הזה הוא לא יותר מהקצנה סטירית.</p>\n\
<p style=\"direction: rtl\">למרות זאת, הצלחנו לאתר בסבך 800 התגובות לפוסט את התגובה של חברת נסטלה, שהגיבה באופן הכי צפוי ומשעמם: ביקשה את פרטיה של המתלוננת בשביל ליצור עמה קשר לבירור פרטי התלונה ואולי גם ייתנו פיצוי. חבל, אנחנו דווקא היינו שמחים לראות אותם משחקים יחד עם שאר הטרולים בשרשור וכותבים משהו כמו &quot;צמצמנו את מספר חיות הגומי בשלגונים בגלל עלות המחייה ובניסיון לצמצם את מפגת ההשמנה והסכרת בקרב ילדים&quot;.</p>\n\
<p style=\"direction: rtl\"><a href=\"http://www.holesinthenet.co.il/archives/87871/nestle\" rel=\"attachment wp-att-87873\"><img style=\"background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; border-top: 0px; border-right: 0px; padding-top: 0px\" class=\"aligncenter size-full wp-image-87873\" border=\"0\" alt=\"nestle\" src=\"http://www.holesinthenet.co.il/wp-content/uploads/2013/04/nestle.png\" width=\"395\" height=\"187\" /></a></p>\n\
<p style=\"direction: rtl\">\n\
<p style=\"direction: rtl\">(תודה למוטי פנחסי ששלח)</p>";

- (void) viewWillAppear:(BOOL)animated
{
  [self.webView loadHTMLString: message
                       baseURL: [[NSURL alloc] init]];
} 
```

# java - Google GSON 不解析从 C# 网站中的 WebMethod 检索到的 Java 中的 JSON

> ID：15982073
> 
> 赞同：1
> 
> 时间：2013-04-12T22:49:57.133
> 
> 标签：java, android, json, gson, webmethod

我有一个 ASP.NET 网站，它使用 C# 通过 WebMethod 创建 JSON，然后通过 http post 从 Java android 应用程序调用 webmethod。我为 webmethod 提供了一个页面 id，它返回页面内容，在这种情况下，它返回错误页面的内容。

这是 web 方法返回的 JSON：

```
D/WebInterface( 2353): {"d":[{"intId":2418,"strName":"Error 404","strTitle":"Ooo
ps, I couldn\u0027t find that!","strSummary":"Error 404, I couldn\u0027t find th
e page you\u0027re looking for.","strBody":"\u003cp\u003eYou could try browsing
the website or checking that you typed the URL correctly, if you came to this pa
ge from another site, please let me know and thanks for visiting.\u003c/p\u003e"
,"strUpdateDate":null,"strCreateDate":null}]} 
```

我在我的 Android 应用程序中使用 Google GSON 从 JSON 创建一个对象，但无论我做什么，它都会返回 null。这是我的谷歌 GSON 方法：

```
public static Containerdata resultsFromJson(String json)
{
    try
    {
        GsonBuilder gsonBuilder = new GsonBuilder();
        Gson gson = gsonBuilder.create();

        Containerdata results = gson.fromJson(json, Containerdata.class);

        Log.d("WebInterface", "RETURNING OBJECT FROM JSON");

        return results;
    }
    catch(Exception e)
    {
        Log.d("WebInterface", "Error: Malformed JSON.");
        return null;
    }
} 
```

此方法返回 Containerdata，如下所示：

```
public class Containerdata {
    public List<Containerdata.Node> d;

    public class Node
    {
        int intId;
        String strName;
        String strTitle;
        String strSummary;
        String strBody;
        String strUpdateDate;
        String strCreatedate;
    }
} 
```

无论我对 webmethod 返回的 json 做什么，resultsFromJson 返回的 Containerdata 始终为空，我不知道为什么。这是从我的 WebMethod 获取我的 JSON 的方法：

```
// Gets json in the form of a string from a web service
public static String dataFromWeb(String url, String postData)
{
    Log.d("WebInterface", "Loading from web");
    try
    {
        HttpURLConnection httpcon = (HttpURLConnection) ((new URL(url).openConnection()));
        httpcon.setDoOutput(true);
        httpcon.setRequestProperty("Content-Type", "application/json");
        httpcon.setRequestProperty("Accept", "application/json");
        httpcon.setRequestMethod("POST");
        httpcon.connect();

        byte[] outputBytes = postData.getBytes("UTF-8");
        OutputStream os = httpcon.getOutputStream();
        os.write(outputBytes);

        os.close();

        InputStream response = httpcon.getInputStream();

        Log.d("WebInterface", Helpers.convertStreamToString(response));

        return Helpers.convertStreamToString(response);
    }
    catch(Exception e)
    {
        Log.d("WebInterface", "failed from web... " + e.toString());

        return "";
    }
} 
```

任何人都可以帮助并指出正确的方向，我会非常感激。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:55:32.887

问题出在以下代码中...

```
InputStream response = httpcon.getInputStream();

Log.d("WebInterface", Helpers.convertStreamToString(response));

return Helpers.convertStreamToString(response); 
```

您基本上是在尝试阅读`InputStream`两次。第一次是您记录响应时，第二次是您尝试`return`响应时。问题是您无法读取已经读取的流（好的，您*可以*，但这需要不同的代码）。

如果要记录响应，请在本地读取字符串，然后记录并返回...

```
InputStream response = httpcon.getInputStream();

String responseString = Helpers.convertStreamToString(response);
Log.d("WebInterface", responseString);

return responseString; 
```

# vb.net - Quality of TIFF image opened on Win XP machine is poor

> ID：15982075
> 
> 赞同：1
> 
> 时间：2013-04-12T22:49:59.020
> 
> 标签：vb.net, picturebox, tiff

I've searched lots of webpages, forums and other resources over the web and these two simple lines of code still drive me crazy:

```
Dim ImageFile As FileStream = File.Open("C:\Programowanie\Indeksowanie\01.tif", FileMode.Open, FileAccess.ReadWrite, FileShare.ReadWrite)
ImageBox.Image = CType(Bitmap.FromStream(ImageFile), Bitmap) 
```

When run on Win 7 or 8 it works perfectly fine. The picture box displays full 32bit colors. When run on Win XP the image quality goes dramatically down (only black and white) what is unacceptable. Any ideas for workaround? I cannot convert to jpegs as I need to handle multipage scanned document (business requirement).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:49:43.297

Eventually I've got it. The results are not 100% what I expected but are acceptable and the effect displayed on the screen is much more better than previously. Here's a piece of code:

```
 Dim fs As FileStream = File.Open("C:\Programowanie\Indeksowanie\01.tif", FileMode.Open, FileAccess.Read)
    Dim bm As Bitmap = CType(Bitmap.FromStream(fs), Bitmap)
    Dim temp As New Bitmap(bm.Width, bm.Height)
    Dim g As Graphics = Graphics.FromImage(temp)
    Dim ScaledWidth As Integer = CInt(Math.Round((ImageBox.Height / bm.Height) * bm.Width))

    g.InterpolationMode = InterpolationMode.HighQualityBicubic
    g.CompositingQuality = CompositingQuality.HighQuality
    g.DrawImage(bm, 0, 0, ScaledWidth, ImageBox.Height)
    ImageBox.Image = temp 
```

# python - 在 Python 中，所有文字值都会导致对象的创建

> ID：15982078
> 
> 赞同：2
> 
> 时间：2013-04-12T22:50:08.447
> 
> 标签：python

这是什么意思“在 Python 中，所有文字值都会导致对象的创建”？

我正在学习 Python，并从这里得到这句话：http: [//python4java.necaiseweb.org/Fundamentals/FunctionsAndMethods](http://python4java.necaiseweb.org/Fundamentals/FunctionsAndMethods)

但我并不真正理解它的含义。

首先，什么是“字面价值”？

其次，请解释一下这句话。

如果你能举一些例子，那会很有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T22:52:59.813

Python 实际上在不同的上下文中对“文字”有一些定义，但如果您只想要基本概念： 数字`123`和字符串之类`"abc"`是文字；像`123 + 456`不是这样的表达。

在 Java 中，当您编写 时`123`，这不是对 Java 对象的引用，它是一个“本机”整数。在 Python 中，它*是*对 Python 对象的引用。

因为在 Python 中一切都是对象，整数有方法，可以卡在集合中，等等。任何地方都没有“装箱”和“拆箱”。如果我想坚持`123`一个列表，我就这样做：

```
>>> my_list = list()
>>> my_list.append(123)
>>> my_list
[123] 
```

如果我想将列表中的值用作整数，我就这样做：

```
>>> my_list[0] - 120
3 
```

就此而言，我可以像其他对象一样使用文字来编写一个列表显示：

```
>>> my_other_list = [my_list, 2] 
```

（只是不要问列表显示是否也是文字，因为那是“不同上下文的不同定义”真正重要的时候......）

* * *

值得指出的是，“所有文字值都会导致对象的创建”并不是真的。文字*可能*是一个新对象，但它也可能是对现有对象的引用，具有相同的值。例如：

```
>>> a = 3
>>> b = 3
>>> a is b
True
>>> id(a) == id(b)
True 
```

（语言不*保证*这是真的，但它通常会出现在大多数 Python 实现中。）

因此，`b = 3`并没有导致对象的创建，只是对`a = 3`. （事实上​​，这`3`很可能在查看您的代码之前就已经由解释器预先构建和预先缓存了。）

但是你不需要关心这个，因为`3`它是不可变的。如果你得到相同的对象或不同的对象并不重要，`3`因为缺少`is`and `id`，没有办法区分。字符串、浮点数等也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:53:24.403

以下是文字值的示例

```
>>> 0
0
>>> 'a'
'a'
>>> 1.9
1.9
>>> 'foo'
'foo' 
```

一切都是对象，甚至是`int`s，如下图可以看到的方法`0`：

```
>>> dir(0)
['__abs__', '__add__', '__and__', '__class__', '__cmp__', '__coerce__', '__delattr__', '__div__', '__divmod__', '__doc__', '__float__', '__floordiv__', '__format__', '__getattribute__', '__getnewargs__', '__hash__', '__hex__', '__index__', '__init__', '__int__', '__invert__', '__long__', '__lshift__', '__mod__', '__mul__', '__neg__', '__new__', '__nonzero__', '__oct__', '__or__', '__pos__', '__pow__', '__radd__', '__rand__', '__rdiv__', '__rdivmod__', '__reduce__', '__reduce_ex__', '__repr__', '__rfloordiv__', '__rlshift__', '__rmod__', '__rmul__', '__ror__', '__rpow__', '__rrshift__', '__rshift__', '__rsub__', '__rtruediv__', '__rxor__', '__setattr__', '__sizeof__', '__str__', '__sub__', '__subclasshook__', '__truediv__', '__trunc__', '__xor__', 'bit_length', 'conjugate', 'denominator', 'imag', 'numerator', 'real'] 
```

如果我愿意，我可以致电：

```
>>> (-1).__abs__() # abs(-1) is better but this is just to show it's an object
1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T22:53:41.850

这意味着当您键入任何值（如`1234`、`67.2`或`"this is a string"`）时，它将作为对象处理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T23:01:48.470

学习 Python 的一个非常好的方法是使用交互式解释器（通常通过`Python`在 shell 中键入来找到。）

完成此操作后，使用`_`、`type`、`dir`和`help`来查看对象类型和信息，如下所示：

```
>>> 4             # a literal 4
4
>>> type(_)       # what is the type of the last object?
<type 'int'>      # int
>>> dir(int)      # what methods does it have?
['__abs__', '__add__', '__and__', '__class__', '__cmp__', '__coerce__', '__delattr__', '__div__', '__divmod__', '__doc__', '__float__', '__floordiv__', '__format__', '__getattribute__', '__getnewargs__', '__hash__', '__hex__', '__index__', '__init__', '__int__', '__invert__', '__long__', '__lshift__', '__mod__', '__mul__', '__neg__', '__new__', '__nonzero__', '__oct__', '__or__', '__pos__', '__pow__', '__radd__', '__rand__', '__rdiv__', '__rdivmod__', '__reduce__', '__reduce_ex__', '__repr__', '__rfloordiv__', '__rlshift__', '__rmod__', '__rmul__', '__ror__', '__rpow__', '__rrshift__', '__rshift__', '__rsub__', '__rtruediv__', '__rxor__', '__setattr__', '__sizeof__', '__str__', '__sub__', '__subclasshook__', '__truediv__', '__trunc__', '__xor__', 'bit_length', 'conjugate', 'denominator', 'imag', 'numerator', 'real']
>>> help(int)
... bunch of help text on int class ...

>>> type(4.4)
<type 'float'>
# do the same interview of Python to tell you about the float class... 
```

# ruby-on-rails - 由于设计管理员用户，Rails 单元测试失败

> ID：15982079
> 
> 赞同：3
> 
> 时间：2013-04-12T22:50:13.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个简单的单元测试：

```
def test_conversation_without_a_name_is_invalid
    conversation = Conversation.new
    assert conversation.name.blank?
    assert !conversation.valid?
end 
```

这是失败的：

> 1) 错误：test_conversation_without_a_name_is_invalid(ConversationTest): ActiveRecord::RecordNotUnique: PG::Error: 错误：重复的键值违反了唯一约束“index_admins_on_email”详细信息：键（电子邮件）=（）已经存在。

似乎由于某种原因，测试试图创建一个 Devise 管理员用户并且失败了，但我不知道它为什么首先尝试这样做，甚至不知道如何纠正它。

我在 Rails 控制台中运行了相同的测试，它运行良好，非常困惑。

有没有人遇到过这种情况或知道发生了什么？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:57:29.687

追踪到`fixtures:all`我的 test_helper.rb 中的一个语句，仍在 Rails 中学习我的方式，但感谢 Alfonso 的伟大建议。

# python - 在 Django 中向长时间运行的方法发送信号

> ID：15982080
> 
> 赞同：2
> 
> 时间：2013-04-12T22:50:24.263
> 
> 标签：python, django, signals, celery

我想向 Celery 中长时间运行的任务发送“暂停”信号，我正在尝试找出最好的方法。在视图中，我可以从数据库中提取对象的一个​​实例并告诉它保存，但它与 Celery 中的对象实例不同。该对象不会检查它是否已暂停。

从长期运行的类和任务中轮询数据库感觉很奇怪且不切实际，因此我正在考虑向我的实例发送消息。我看过使用 pubsub，但我更喜欢使用 Django 信号，因为它已经是一个 Django 项目。我可能以错误的方式处理这个问题。

这是一个不起作用的示例：

模型.py

```
class LongRunningClass(models.Model):
    is_paused = models.BooleanField(default=False)
    processed_files = models.IntegerField(default=0)
    total_files = models.IntegerField(default=100)

    def long_task(self):
        remaining_files = self.total_files - self.processed_files
        for i in xrange(remaining_files):
            if not self.is_paused:
                self.processed_files += 1
                time.sleep(1)

        # Task complete, let's save.
        self.save() 
```

视图.py

```
def pause_task(self, pk):
     lrc = LongRunningClass.objects.get(pk=pk)
     lrc.is_paused = True
     lrc.save()
     return HttpResponse(json.dumps({'is_paused': lrc.is_paused}))

def resume_task(self, pk):
    lrc = LongRunningClass.objects.get(pk=pk)
    lrc.is_paused = False
    lrc.save()

    # Pretend this is a Celery task
    lrc.long_task() 
```

因此，如果我修改 models.py 以使用信号，我可以添加这些行，但它仍然不能正常工作：

```
pause_signal = django.dispatch.Signal(providing_args=['is_paused'])

@django.dispatch.receiver(pause_signal)
def pause_callback(sender, **kwargs):
    if 'is_paused' in kwargs:
        sender.is_paused = kwargs['is_paused']
        sender.save() 
```

这也不影响已经在运行的实例化类。如何告诉在任务中运行的模型实例暂停？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:48:03.013

Celery 任务是一个单独的进程。Django 信号是标准的“观察者”模式，它在一个线程中工作，因此无法使用信号来组织线程之间的通信。您需要从数据库加载对象以了解其属性是否已更改。

```
class LongRunningClass(models.Model):
    is_paused = models.BooleanField(default=False)
    processed_files = models.IntegerField(default=0)
    total_files = models.IntegerField(default=100)

    def get_is_paused(self):
        db_obj = LongRunningClass.objects.get(pk=self.pk)
        return db_obj.is_paused

    def long_task(self):
        remaining_files = self.total_files - self.processed_files
        for i in xrange(remaining_files):
            if not self.get_is_paused:
                self.processed_files += 1
                time.sleep(1)

    # Task complete, let's save.
    self.save() 
```

设计不是很好 - 你最好搬到`long_task`其他地方，并使用新加载`LongRunningClass`的实例进行操作，但它会完成这项工作。您可以在此处添加一些内存缓存 - 如果您不想经常打扰您的数据库。

顺便说一句：我不是 100% 确定，但您可能在这里遇到另一个设计问题。当您在这种循环中运行非常长时间的任务时，这种情况相当罕见。考虑从你的程序中删除循环（你有队列！）。看一看：

```
@celery.task(run_every=2minutes)  # adding XX files for processing every XX minutes
def scheduled_task(lr_pk):
    lr = LongRunningClass.objects.get(pk=lr_pk)
    if not lr.is paused:
        remaining_files = self.total_files - self.processed_files
        for i in xrange(lr.files_per_iteration):
            process_file.delay(lr.pk,i)

@celery.task(rate=1/m,queue='process_file')  # processing each file
def process_file(lr_pk,i):
    #  do somthing with i
    lr = LongRunningClass.objects.get(pk=lr_pk)
    lr.processed_files += 1
    lr.save() 
```

您必须设置 celerybeat，并为此类任务创建单独的队列，才能实现此解决方案。但结果是，您将对程序速度、并行执行有很多控制权，而且您的代码不会因为`sleep(1)`. 如果您为每个文件创建另一个模型，您可以控制哪些文件被处理，哪些不是，处理错误等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T17:26:44.083

看看 celery.contrib.abortable - 这是 Celery 任务的替代基类，它实现调用者和任务之间的信号以处理终止，也可以用来实现“暂停”。

当调用者调用`abort()`时，后端会标记一个状态。任务调用`self.is_aborted()`以查看是否已设置该特殊状态；然后执行任何适当的操作（终止、暂停、忽略等）。动作在任务的控制之下；这不是自动任务终止。

如果特定任务将 ABORT 信号解释为暂停请求是明智的，则可以按原样使用它。或者您可以扩展该类以提供更多信号，而不仅仅是现有的 ABORT。

# java - 独立于平台的文件存储 Java

> ID：15982088
> 
> 赞同：0
> 
> 时间：2013-04-12T22:51:25.963
> 
> 标签：java, cross-platform, persistence, file-storage

我正在制作一个将选项和 LWJGL jar 存储在标准应用程序数据存储目录中的 Java 游戏（我认为这是 Windows 上的 C:\Users\user\AppData\roaming\application、Linux 上的 ~/.application 和 ~/Library /Mac 上的首选项）。目前我只使用 System.getProperty(os.name) 并有一个 if-else 来选择正确的文件路径（它使用 system.getProperty(user.home) 并附加正确的文件路径）。但是，这可能不适用于某些奇怪的操作系统，因为 if-else 不会在操作系统名称中找到 Windows、Mac 或 Linux，而且这似乎也是一种非常糟糕的方法（也是 if-如果不是 Windows 或 Mac，则假定操作系统是 Linux）。我尝试反编译 Minecraft，它将应用程序数据和 LWJGL jar 存储在正确的路径中，但代码被混淆了。有没有更好的方法让我做到这一点，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:02:50.787

**[Java Preferences API](http://docs.oracle.com/javase/7/docs/technotes/guides/preferences/overview.html)就是专门为此目的而创建的。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:09:24.390

对于配置首选项，有 Java Preferences API。

对于其他文件，我还没有找到解决方案。目前，最好的解决方案可能是在 OS 类型上调度，并基于`user.home`属性进行回退。

在 Linux/Unix（不是 Mac）上，您可能希望遵守[XDG Base Directory 规范](http://standards.freedesktop.org/basedir-spec/basedir-spec-0.6.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:55:54.600

像这样的路径不应该无处不在，即没有if-else-if：

```
String userHome = System.getProperty("user.home");
if (!userHome.endsWith("/")) {
  userHome += "/";
}

String targetPath = userHome + ".myapp/settings.properties"; 
```

# javascript - 如何验证 HTML 表单？

> ID：15982090
> 
> 赞同：0
> 
> 时间：2013-04-12T22:51:34.677
> 
> 标签：javascript, html, forms, validation

我有一个 HTML 表单和一个按钮，当用户单击时，它将检查表单是否已填写。帐单地址的详细信息是使用 php 从数据库中输入的

```
<button id="btnConfirm" type="submit" onclick="validate()"style="float: right" value="Confirm Payment" >Confirm Payment</button>
<form id="au" name="paymentform" method="post" action="" >
<fieldset class="billing">
<legend>Billing Details</legend>
<br />
<label class="reglabel" for="fname">First Name:</label>
<input id="fname" name="billingfname" required="" type="text" value="<?php echo $fname ?>" /><br />
<label class="reglabel" for="lname">Last Name:</label>
<input id="lname" name="billinglname" required="" type="text" value="<?php echo $lname ?>" /><br />
<label class="reglabel" for="address">Address:</label>
<input id="address" name="billingaddress" required="" type="text" value="<?php echo $address ?>" /><br />
<label class="reglabel" for="town">Town:</label>
<input id="town" name="billingtown" required="" type="text" value="<?php echo $town ?>" /><br />
<label class="reglabel" for="postcode">Post Code:</label>
<input id="postcode" name="billingpostcode" required="" type="text" value="<?php echo $postcode ?>" /><br />
<label class="reglabel" for="phone">Phone:</label>
<input id="phone" name="billingphone" required="" type="text" value="<?php echo $phone ?>" /><br />
<label id="EmailLabel" class="reglabel" for="email">E-mail:</label>
<input id="email" name="billingemail" required="" type="email" value="<?php echo $email ?>" /><br />
</fieldset> 
<fieldset class="shipping">
<legend>Shipping Details</legend>
<br />
<input name="shippingsame" onclick="fillShipping(this.form)" type="checkbox">Check 
    this box if billing address and shipping address are the same <br />
<label class="reglabel" for="fname">First Name:</label>
<input id="fname" name="shippingfname" placeholder="Required" required="" type="text" /><br />
<label class="reglabel" for="lname">Last Name:</label>
<input id="lname" name="shippinglname" placeholder="Required" required="" type="text" /><br />
<label class="reglabel" for="address">Address:</label>
<input id="address" name="shippingaddress" placeholder="Required" required="" type="text" /><br />
<label class="reglabel" for="town">Town:</label>
<input id="town" name="shippingtown" placeholder="Required" required="" type="text" /><br />
<label class="reglabel" for="postcode">Post Code:</label>
<input id="postcode" name="shippingpostcode" placeholder="Required" required="" type="text" /><br />
<label class="reglabel" for="phone">Phone:</label>
<input id="phone" name="shippingphone" placeholder="Required" required="" type="text" /><br />
<label id="EmailLabel" class="reglabel" for="email">E-mail:</label>
<input id="email" name="shippingemail" placeholder="Required" required="" type="email" /><br />
</fieldset> 
   </form> 
```

这是我试图检查他的字段是否为空的代码，但它似乎不起作用。它提醒未定义

```
function validate()
{
var firstname = document.getElementsByName("shippingfname").value;
if (firstname == "")
{
    alert('empty'); 
}   
else
{
    alert(firstname);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T22:58:22.700

或者您可以轻松使用 jquery 验证插件。它非常适合客户端验证[http://docs.jquery.com/Plugins/validation](http://docs.jquery.com/Plugins/validation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T22:54:59.313

该函数`document.getElementsByName`返回一个数组，所以你应该试试这个：

```
function validate()
{
var firstname = document.getElementsByName("shippingfname")[0].value;
if (firstname == "")
{
    alert('empty'); 
}   
else
{
    alert(firstname);
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T22:54:17.320

`getElementsByName()`返回一个数组。不是单个元素。在您的示例中，您将希望使用 ID 属性来访问各个元素。

```
<input name="shippingsame" id="shippingsame" onclick="fillShipping(this.form)" type="checkbox">

function validate()
{
  var firstname = document.getElementByID("shippingfname").value;
  if (firstname == "")
  {
      alert('empty'); 
  }   
  else
  {
      alert(firstname);
  }
} 
```

# java - Jsoup获取标签的价值

> ID：15982094
> 
> 赞同：2
> 
> 时间：2013-04-12T22:51:48.140
> 
> 标签：java, html, parsing, jsoup

我正在使用 Jsoup 尝试读取 html 中的所有元素，并根据元素的类型循环并执行操作。

我没有运气，我找不到检查每个元素值的正确方法。

有什么建议么？

这是我最近的尝试：

```
 Elements a = doc.getAllElements();

    for(Element e: a)
    {
        if( e.val().equals("td"))
        {
            System.out.println("TD");
        }
        else if(e.equals("tr"))
        {
            System.out.println("TR");
        }
    } 
```

这不会打印任何东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:37:56.033

试试这个：

```
Elements tdElements = doc.getElementsByTag("td");

for(Element element : tdElements )
{
     //Print the value of the element
     System.out.println(element.text());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:13:39.073

最好通过标签选择每个元素：

```
Elements tdTags = doc.select("td");
Elements trTags = doc.select("tr");

// Loop over all tdTags - you can do the same with trTags
for( Element element : tdTags )
{
    System.out.println(element); // print the element
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T15:25:47.970

e.tag() 会这样做

```
Elements tdElements = doc.getElementsByTag("td");

for(Element element : tdElements )
{
    //Print the value of the element
    System.out.println(element.tag());
} 
```

# c - 没有分配任何内存的内存泄漏

> ID：15982097
> 
> 赞同：1
> 
> 时间：2013-04-12T22:51:51.437
> 
> 标签：c, memory, valgrind

我只是在测试我正在编写的一些 c 代码，我发现我有很多内存泄漏，所以我想看看它们是从哪里来的。我所有的代码是：

```
int main() {
    return 0;
} 
```

只是一个简单的 main 什么也没做，我有所有这些内存泄漏：

```
==38882== HEAP SUMMARY:
==38882==     in use at exit: 58,678 bytes in 363 blocks
==38882==   total heap usage: 514 allocs, 151 frees, 62,544 bytes allocated
==38882== 
==38882== LEAK SUMMARY:
==38882==    definitely lost: 8,624 bytes in 14 blocks
==38882==    indirectly lost: 1,168 bytes in 5 blocks
==38882==      possibly lost: 4,925 bytes in 68 blocks
==38882==    still reachable: 43,961 bytes in 276 blocks
==38882==         suppressed: 0 bytes in 0 blocks
==38882== Rerun with --leak-check=full to see details of leaked memory
==38882== 
==38882== For counts of detected and suppressed errors, rerun with: -v
==38882== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

当我在我大学的计算机上运行此代码时，我没有内存泄漏。我的本地机器上是否有什么东西导致了这么多内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:05:16.400

没事。您的程序使用运行时库（即`libc`或等效的）并且该库为自己的需要分配一些内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:01:02.073

我在我的 Mac 上遇到同样的错误。这要么是 valgrind 问题，要么（更有可能）是 Mac 上的库问题。我建议仅在 Linux 上使用 valgrind。

# cruisecontrol.net - 如何在 CCNet 中设置定义多个参数？

> ID：15982101
> 
> 赞同：2
> 
> 时间：2013-04-12T22:52:04.683
> 
> 标签：cruisecontrol.net, ccnet-config

我在 CCNet 1.4 版中工作，我很难以干净的方式获得我想要定义的参数。在我的示例中，我想要 6 个总项目（2 个分支中的 3 个解决方案）。我定义了一个通用项目，它可以基于 8 个变量的选择包含所有 6 种可能性。当它是一个主干项目时，其中 4 个变量应该是一回事。当它是一个分支项目时，4 个变量应该是另一回事。其他 4 个变量取决于我要构建的解决方案。

在下面的尝试中，我将 4 个主干变量放在一个定义块中，将 4 个发布变量放在另一个块中。我也有每个解决方案的定义块。

```
<cb:define name="ProductBuildProject">
  <project name="$(ProjectName)" queue="Common">
    <category>Main Builds</category>
    <sourcecontrol type="multi">
      <sourceControls>
        <cb:svn-sourcebuild-checkout BranchPath="$(BranchPath)" MainSourcePath="$(MainSourcePath)"  />
      </sourceControls>
    </sourcecontrol>
    <modificationDelaySeconds>10</modificationDelaySeconds>
    <labeller type="defaultlabeller">
      <prefix><cb:LabelPrefix/></prefix>
      <incrementOnFailure>true</incrementOnFailure>
    </labeller>
    <triggers>
      <intervalTrigger name="continuous" seconds="900" buildCondition="IfModificationExists"/>
    </triggers>
    <tasks>
      <nant>
        <executable>&nant-path;</executable>
        <baseDirectory><cb:LocalKeywordLabPath/>\<cb:MainSourcePath/></baseDirectory>
        <buildArgs>-v -D:deployServer=<cb:DeployServer/></buildArgs>
        <buildFile><cb:BuildFileName/></buildFile>
        <targetList>
          <target><cb:BuildTargetName/></target>
        </targetList>
        <buildTimeoutSeconds>600</buildTimeoutSeconds>
      </nant>
    </tasks>
    <publishers>
      <merge>
        <files>
          <file><cb:LocalKeywordLabPath/>\<cb:MainSourcePath/>\<cb:UnitTestOutputPath/></file>
        </files>
      </merge>
      &publishers-common-block;
    </publishers>
    <externalLinks/>
  </project>
</cb:define>

<cb:define name="TrunkBuildParameters">
  <cb:define name="LocalKeywordLabPath"><cb:keywordlab-trunk-local/></cb:define>
  <cb:define name="BranchPath"><cb:trunk-path/></cb:define>
  <cb:define name="LabelPrefix">1.1.0.</cb:define>
  <cb:define name="DeployServer">smwtlkwlab01n</cb:define>
</cb:define>

<cb:define name="ReleaseBranchBuildParameters">
  <cb:define name="LocalKeywordLabPath"><cb:keywordlab-release-local/></cb:define>
  <cb:define name="BranchPath"><cb:releaseBranch-path/></cb:define>
  <cb:define name="LabelPrefix">1.1.100.</cb:define>
  <cb:define name="DeployServer">smwdvkwlab03n</cb:define>
</cb:define>

<cb:define name="KeywordLabWebParameters">
  <cb:define name="MainSourcePath">Source\Presentation</cb:define>
  <cb:define name="BuildFileName">KeywordLab.Web.build</cb:define>
  <cb:define name="BuildTargetName">automated-with-webdeploy</cb:define>
  <cb:define name="UnitTestOutputPath">KeywordLab.Web.UnitTest\bin\Release\KeywordLab.Web.UnitTest.trx</cb:define>
</cb:define>

<cb:define name="KeywordLabWebMvcParameters">
  <cb:define name="MainSourcePath">Source\UI</cb:define>
  <cb:define name="BuildFileName">KeywordLab.Web.Mvc.build</cb:define>
  <cb:define name="BuildTargetName">automated-with-webdeploy</cb:define>
  <cb:define name="UnitTestOutputPath">KeywordLab.Web.Mvc.Tests\bin\Release\KeywordLab.Web.Mvc.Tests.trx</cb:define>
</cb:define>

<cb:define name="KeywordLabServiceParameters">
  <cb:define name="MainSourcePath">Source\Service</cb:define>
  <cb:define name="BuildFileName">KeywordLab.build</cb:define>
  <cb:define name="BuildTargetName">automated</cb:define>
  <cb:define name="UnitTestOutputPath">KeywordLab.UnitTest\bin\Release\KeywordLab.UnitTest.trx</cb:define>
</cb:define> 
```

最后，我尝试通过引用主干或发布版本的定义块和解决方案的正确定义块来定义 6 个项目。

```
<!--KeywordLab Web-->
<cb:ProductBuildProject>
  <cb:define name="ProjectName">KeywordLab Web (1N)</cb:define>
  <cb:TrunkBuildParameters/>
  <cb:KeywordLabWebParameters/>
</cb:ProductBuildProject>

<!--KeywordLab Web Mvc-->
<cb:ProductBuildProject>
  <cb:define name="ProjectName">KeywordLab Web Mvc (1N)</cb:define>
  <cb:TrunkBuildParameters/>
  <cb:KeywordLabWebMvcParameters/>
</cb:ProductBuildProject>

<!--KeywordLab Service-->
<cb:ProductBuildProject>
  <cb:define name="ProjectName">KeywordLab Service (1N)</cb:define>
  <cb:TrunkBuildParameters/>
  <cb:KeywordLabServiceParameters/>
</cb:ProductBuildProject>

<!--KeywordLab Web-->
<cb:ProductBuildProject>
  <cb:define name="ProjectName">Release Branch (3N) - KeywordLab Web</cb:define>
  <cb:ReleaseBranchBuildParameters/>
  <cb:KeywordLabWebParameters/>
</cb:ProductBuildProject>

<!--KeywordLab Web Mvc-->
<cb:ProductBuildProject>
  <cb:define name="ProjectName">Release Branch (3N) - KeywordLab Web Mvc</cb:define>
  <cb:ReleaseBranchBuildParameters/>
  <cb:KeywordLabWebMvcParameters/>
</cb:ProductBuildProject>

<!--KeywordLab Service-->
<cb:ProductBuildProject>
  <cb:define name="ProjectName">Release Branch (3N) - KeywordLab Service</cb:define>
  <cb:ReleaseBranchBuildParameters/>
  <cb:KeywordLabServiceParameters/>
</cb:ProductBuildProject> 
```

这不起作用，我希望有人能指出我做错了什么。当我尝试加载此配置时，我收到的错误是：

```
[CCNet Server:ERROR] INTERNAL ERROR: Reference to unknown symbol LabelPrefix 
```

正如您在 TrunkBuildParameters 和 ReleaseBranchBuildParameters 中看到的那样，我在两者中都定义了 LabelPrefix，并且所有 6 个项目都引用了这些定义块中的一个或另一个。然后我尝试在项目的块中引用它。这显然不是定义项目使用的变量的有效方式。有人可以告诉我我做错了什么，或者可能是更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:38:46.210

我建议使用 Cruisecontrol 提供的验证器来查看最终解析的配置文件是什么，以检查您是否遗漏了任何内容。

话虽如此，我通常做的是相反的事情。我定义了常用的配置块，然后只用几行写出项目配置。也许您会认为足够干净？

# iphone - 无法在带有元标记的 Safari Mobile 中获取加号 (+) 按钮

> ID：15982106
> 
> 赞同：0
> 
> 时间：2013-04-12T22:52:49.663
> 
> 标签：iphone, html, mobile-safari, meta

好的，这看起来应该很简单。

我有一个网络应用程序：

[http://cloudmusiccompany.appspot.com/](http://cloudmusiccompany.appspot.com/)

它有 META 标签：

<meta name="apple-mobile-web-app-capable" content="yes" />

我知道只有当用户单击屏幕底部的“+”，然后启动快捷方式时，它才会全屏显示。

但我从来没能让它向我显示“+”按钮。我看到另一个，分享按钮。

正如您从源代码中看到的那样，我有一个启动画面和一个图标。

我尝试将元和链接标签以不同的顺序放置。似乎没有什么能给我“+”按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:14:49.610

你是正确的，`plus`按钮在 iOS 4.2 中被替换为`share`按钮。

* * *

要设置主屏幕图标，请使用此元标记：

```
<link rel="apple-touch-icon-precomposed" href="icon.png"/> 
```

或者，如果您想将光泽添加到图标中，则为这个：

```
<link rel="apple-touch-icon" href="icon.png"/> 
```

要设置启动画面，请使用：

```
<link rel="apple-touch-startup-image" href="splash.png" /> 
```

# sql - SQL：获取父母和祖父母（CTE 或派生表）？

> ID：15982107
> 
> 赞同：0
> 
> 时间：2013-04-12T22:52:56.830
> 
> 标签：sql, sql-server, tsql

我有两个表要加入：tb_assets 和 tb_locations。位置是位置的层次结构。因此，可以将资产分配给“A 楼”，其父位置可能为“旧金山”，其父位置可能为“美国”

当我查询资产时，我想获取父名称以及该位置的父名称。

这是表格布局：

![表布局](https://i.imgur.com/nAUHWQG.png)

因此，使用以下内容，我可以轻松获取当前资产的父名称，但我已经使用了派生表和 CTE，但我似乎无法围绕正确的方法来完成此操作。

```
SELECT f_assetname, f_locationname
FROM tb_assets
LEFT JOIN tb_locations on f_assetlocationID = f_locationID 
```

这是一些示例数据

**tb_assets**

```
f_assetID        f_assetname        f_assetlocationID
------------------------------------------------------
1                Building A         1
2                Building B         2 
```

**tb_locations**

```
f_locationID     f_locationname     f_locationparentID
------------------------------------------------------
101              United States      NULL
102              San Francisco      101 
```

使用上面的 SQL，我们返回以下内容：

```
f_assetname      f_locationname
----------------------------------------
Building A       San Francisco
Building B       San Francisco 
```

我想要的输出是：

```
f_assetname      f_locationname         f_locationparentname
--------------------------------------------------------------
Building A       San Francisco          United States
Building B       San Francisco          United States 
```

真诚地提前感谢任何帮助。

谢谢，比姆斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T22:58:27.327

只需添加另一个联接

```
SELECT a.f_assetname, p.f_locationname as parent, gp.f_locationname as grandparent
FROM tb_assets a
LEFT JOIN tb_locations p on a.f_assetlocationID = p.f_locationID
left join tb_locations gp on gp.f_locationID = p.f_locationparentID 
```

[SQLFiddle](http://www.sqlfiddle.com/#!6/6353f/3/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T22:59:50.637

使用自联接

```
Select a.f_assetname asset, p.f_locationname parent,
     gp.f_locationname grandParent
From tb_assets a
   Left Join tb_locations p 
       On  p.locationID = a_assetlocationID
   Left Join tb_locations gp 
       On  gp.locationID = p.f_locationParentId 
```

# rspec-rails - Rails 4 数据库清理器

> ID：15982114
> 
> 赞同：3
> 
> 时间：2013-04-12T22:53:48.880
> 
> 标签：rspec-rails, ruby-on-rails-4, database-cleaner

我正在尝试为 rails 4 应用程序完成一些测试，但我一直遇到 database_cleaner 的问题。问题是数据库没有被清理并且警告不断出现：

```
DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
.DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
WARNING:  there is already a transaction in progress
WARNING:  there is already a transaction in progress
.FFFFDEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
.DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
WARNING:  there is already a transaction in progress
.DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
WARNING:  there is already a transaction in progress
.WARNING:  there is already a transaction in progress
DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
.DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
WARNING:  there is already a transaction in progress
.DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
WARNING:  there is already a transaction in progress
.DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from block (3 levels) in <top (required)> at /Users/davidhahn/Dev/cta-projects/user-management2/spec/spec_helper.rb:49)
WARNING:  there is already a transaction in progress
WARNING:  there is already a transaction in progress 
```

我在规范助手中设置的配置是：

```
require 'rubygems'
require 'spork'
#uncomment the following line to use spork with the debugger
#require 'spork/ext/ruby-debug'

Spork.prefork do
  # Loading more in this block will cause your tests to run faster. However,
  # if you change any configuration or code from libraries loaded here, you'll
  # need to restart spork for it take effect.

  # This file is copied to spec/ when you run 'rails generate rspec:install'
  ENV["RAILS_ENV"] ||= 'test'
  require File.expand_path("../../config/environment", __FILE__)
  # require 'rspec/rails'
  require 'rspec/autorun'
  require 'capybara/rspec'
  require 'database_cleaner'

  # Requires supporting ruby files with custom matchers and macros, etc,
  # in spec/support/ and its subdirectories.
  Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

  RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr
  config.mock_with :rspec

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  # config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.filter_run focus: true
  config.run_all_when_everything_filtered = true

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  # config.use_transactional_fixtures = false

  config.before :each do
    if Capybara.current_driver == :rack_test
      DatabaseCleaner.strategy = :transaction
    else
      DatabaseCleaner.strategy = :truncation
    end
    DatabaseCleaner.start
  end

  config.after do
    DatabaseCleaner.clean
  end

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  # config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
  end
end 
```

最后这是我的 gemfile

```
source 'https://rubygems.org'

# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'
gem 'rails', '4.0.0.beta1'

gem 'pg'
gem 'haml-rails', '~> 0.4'
gem 'twitter-bootstrap-rails', '~> 2.2.0'
gem 'annotate', '~> 2.5.0'
group :test do
  gem 'rspec', '~> 2.13.0'
  gem 'rspec-rails', '~> 2.13.0'
  gem 'guard-rspec', '~> 1.2.1'
  gem 'guard-spork', '~> 1.4.2'
  gem 'capybara', '~> 2.0.2'
  gem 'spork', '~> 0.9.2'
  gem 'factory_girl_rails', '~> 4.1.0'
  gem 'shoulda-matchers', '~> 1.4.2'
  gem 'database_cleaner', '~> 0.9.1'
  gem 'launchy', '~> 2.2.0'
  gem 'rb-fsevent', '~> 0.9.2'
  gem 'growl', '~> 1.0.3'
end

group :development do
  gem 'better_errors' ,'~> 0.6.0'
  gem 'binding_of_caller', '~> 0.7.1'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 4.0.0.beta1'
  gem 'coffee-rails', '~> 4.0.0.beta1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', platforms: :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks
gem 'turbolinks'

# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder
gem 'jbuilder', '~> 1.0.1' 
```

在这个问题上的任何帮助都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T03:18:44.760

看起来这已由 database_cleaner 的 1.0.0 RC1 版本修复。在你的 Gemfile 中试试这个：

```
gem "database_cleaner", '1.0.0.RC1' 
```

# python - 多核批处理

> ID：15982128
> 
> 赞同：5
> 
> 时间：2013-04-12T22:54:49.387
> 
> 标签：python, python-2.7, multiprocessing

我想对多个核心上的文件进行批处理。我有以下情况：

1.  我有 20 个文件。
2.  我有一个函数，它接受一个文件名，处理它并产生一个整数结果。我想将该函数应用于所有 20 个文件，计算每个文件的整数输出，最后将各个输出相加并打印总结果。
3.  由于我有 4 个内核，我一次只能处理 4 个文件。因此，我想一次运行 5 轮处理 4 个文件（4 * 5 = 20）。
4.  也就是说，我想创建 4 个进程，每个进程一个接一个地处理 5 个文件（第一个进程处理文件 0、4、8、12、16，第二个进程处理文件 1、5、9、13、17 等）。

我如何实现这一目标？我对`multiprocessing.Pool()`,`multiprocessing.Process()`和其他各种选项感到困惑。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T23:03:09.367

为了演示`Pool`，我将假设您的工作函数（它使用一个文件名并产生一个数字）被命名`work`，并且 20 个文件被标记为`1.txt`,... `20.txt`。一种设置方法如下，

```
from multiprocessing import Pool

pool = Pool(processes=4)
result = pool.map_async(work, ("%d.txt"%n for n in xrange(1,21)))
print sum(result.get()) 
```

此方法将为您完成步骤 3 和 4 的工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T23:06:48.927

这很简单。

```
from multiprocessing import Pool

def process_file(filename):
    return filename

if __name__ == '__main__':
    pool = Pool()
    files = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

    results = pool.imap(process_file, files)

    for result in results:
        print result 
```

`Pool`自动默认为您拥有的处理器内核数。此外，请确保您的处理函数可以从文件中导入，并且您的多处理代码位于`if __name__ == '__main__':`. 如果没有，您将制造一个叉子炸弹并锁定您的计算机。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T23:18:15.740

尽管 Jared 的回答很棒，但我个人会使用模块中的 a `ProcessPoolExecutor`，[`futures`](http://docs.python.org/3/library/concurrent.futures.html)甚至不用担心`multiprocessing`：

```
with ProcessPoolExecutor(max_workers=4) as executor:
    result = sum(executor.map(process_file, files)) 
```

当它变得更复杂一点时，与等价物相比，`future`对象 or`futures.as_completed`可能真的很漂亮。`multiprocessing`当它变得更复杂时，它会变得`multiprocessing`更加灵活和强大。但是，当它是如此微不足道时，真的，几乎很难区分。

# java - Java中连续复杂图像的动画绘制

> ID：15982135
> 
> 赞同：0
> 
> 时间：2013-04-12T22:55:43.370
> 
> 标签：java, swing, drawing, jpanel, java-2d

我正在尝试在需要数千次计算的 JPanel 上绘制图像，并且我想为绘图的进程设置动画。即，我不想一次完成所有 100K 次绘图迭代，然后重新绘制 JPanel，而是希望在每次迭代后重新绘制，然后暂停几分之一秒，以便用户看到图像逐渐出现。但是，每次刷新 JPanel 都会擦除以前的绘图，所以我的方法不起作用。如何在不复制第 N 次迭代的所有 (1..N-1) 计算的情况下做到这一点？

考虑这个例子：我希望“雪”逐渐出现在屏幕上。但是，此代码将仅显示第 100,000 个“雪花”，因为每次调用 repaint() 时都会删除所有先前的“雪花”。

```
import javax.swing.*;
import java.awt.*;
import java.util.Random;

class spanel extends JPanel{    
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawLine(snow.x, snow.y, snow.x, snow.y);
    }
}

class snow extends Thread {

    static int x,y;
    Random r = new Random();

    public void run(){

        JFrame sboard = new JFrame();
        sboard.setSize(600,600);
        sboard.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        spanel mypanel = new spanel();
        sboard.add(mypanel);
        sboard.setVisible(true);

        for (int i=0;i<100000;i++){
            x=r.nextInt(600);
            y=r.nextInt(600);

            sboard.repaint();    
            try {
                snow.sleep((long)10);
            } catch (InterruptedException e) {}; 
        } 
    }
}

public class SnowAnim {    
    public static void main(String[] args) {
        (new snow()).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:20:00.923

[自定义绘画方法](http://tips4java.wordpress.com/2009/05/08/custom-painting-approaches/)展示了如何在 BufferedImage 上绘画。论坛里还有很多其他的例子。

此外，在制作动画时，您应该使用 Swing Timer 来安排动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:11:15.070

> 如何在不复制第 N 次迭代的所有 (1..N-1) 计算的情况下做到这一点？

`BufferedImage`如[本例](https://stackoverflow.com/a/10628553/418556)所示，将它们添加到 a中。

![](https://i.stack.imgur.com/eAgUn.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:03:50.870

您可能应该在缓冲区上进行绘画，然后在 paintComponent(); 中绘制缓冲区的当前状态；

您也可以跳过对 的调用`super.paintComponent(g);`，但是您将不得不担心其他元素会在视觉上“卡住”在您的面板中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T17:20:27.873

谢谢大家！我想到了。BufferedImage 解决了它。作为记录，这是我更新的代码。它还实现了 camickr 的建议，即使用 Swing 计时器而不是线程来安排动画。我还做了一些美学上的改变，使输出看起来更像雪 :-) 再次感谢！

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;
import java.util.Random;
import java.awt.event.*;

class spanel extends JPanel{
    int x,y,rad,i;
    static Random r = new Random();
    BufferedImage image;
    Graphics2D g2d;
    Timer timer;

    spanel(){
        image = new BufferedImage(600, 600, BufferedImage.TYPE_INT_ARGB);
        g2d = (Graphics2D)image.getGraphics();
        setBackground(Color.black);
        g2d.setColor(Color.white);
        i=0;
        ActionListener listener = new ActionListener() {
            public void actionPerformed(ActionEvent ae) {
                iterate();
            }
        };
        timer = new Timer(10, listener);
        timer.start();
    }
    public void iterate(){
        x=r.nextInt(600);
        y=r.nextInt(600);
        rad=r.nextInt(5)+5;
        g2d.fillOval(x, y, rad, rad);
        repaint();    
        i++;
        if (i==1000){timer.stop();}
    }
    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(image,0,0,null);
        }
    }

public class SnowAnim {    
    public static void main(String[] args) {
        JFrame sboard = new JFrame();
        sboard.setSize(600,600);
        sboard.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        spanel mypanel = new spanel();
        sboard.add(mypanel);
        sboard.setVisible(true);
    }
} 
```

# c# - 无法使用 0000-00-00 00:00:00 值将 MySQL.DateTime 转换为 System.DateTime

> ID：15982137
> 
> 赞同：3
> 
> 时间：2013-04-12T22:55:46.183
> 
> 标签：c#, mysql, datetime

我正在开发一个 C# 项目，但我遇到了一个问题。该程序允许用户连接到 MySQL 数据库并从每个选定的表中检索信息并将数据写入文件。问题是因为我不知道架构会是什么样子或者它会包含什么值。

如果时间戳列包含日期 0000-00-00 00:00:00 我会收到转换错误，无论我尝试什么它都不会起作用。我尝试转换为字符串 我尝试转换为 DateTime 但我总是得到错误。

以下是我目前尝试获取数据的方式：

```
using (ConnectMySQLDB db = new ConnectMySQLDB(databaseSettings))
{
   string query = string.Format("SELECT * FROM {0}.{1}", database, table);
   Console.WriteLine("Query: {0}", query);
   using (MySqlCommand cmd = new MySqlCommand(query, db.conn))
   {
      using (MySqlDataReader reader = cmd.ExecuteReader())
      {
         int i = 1;
         while (reader.Read())
         {
            Console.WriteLine("ID: {0}", i);
            fieldsAndValues = new Dictionary<string, string>();
            foreach (ColumnDataTypes fieldAndType in fieldsAndTypes)
            {
               Console.WriteLine("Column: {0} Type: {1}", fieldAndType.field, fieldAndType.dataType);
               string formattedValue = "";
               if (fieldAndType.dataType == "timestamp")
               {
                  DateTime date = DateTime.Parse(reader.GetDateTime(fieldAndType.field).ToString());
                  formattedValue = date.ToString("yyyyMMdd");
               }

               else
               {
                  formattedValue = getDBFormattedValue(reader.GetString(fieldAndType.field), fieldAndType.dataType);
                  fieldsAndValues.Add(fieldAndType.field, formattedValue);
               }
            }
            rows.Add(fieldsAndValues);
            i++;
         }
      }
   }
} 
```

我还在连接器字符串中添加了允许零日期和 convertzerodate to null 选项，如下所示：

```
connString = "server=" + server + ";uid=" + username + ";pwd=" + password + ";port=" + port + ";Allow Zero Datetime=true;zeroDateTimeBehavior=convertToNull;Convert Zero Datetime=true"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T23:06:22.993

查看[此文档](http://dev.mysql.com/doc/connector-net/en/connector-net-connection-options.html)，您似乎指定了两个相互矛盾的选项（`AllowZeroDateTime=true`和`ConvertZeroDateTime=true`）和一个似乎未列出的选项（`ZeroDateTimeBehavior=ConvertToNull`）。

我建议除非您有`DateTime.MinValue`不想与“零”值混淆的实际数据，否则您*只需*指定`ConvertZeroDateTime=true`并检测结果是否为`DateTime.MinValue`. 您绝对*不应该*调用`reader.GetDateTime()`，然后将结果转换为字符串，然后再转换回 a `DateTime`- 您应该尽可能避免字符串转换，因为它们很容易为您搞砸。

对于这些“零”值，您想要什么字符串值并不是很清楚，但是您应该能够`DateTime.MinValue`相当容易地对它们进行特殊处理。就我个人而言，我实际上会尝试尽可能地将数据保持在其“本机”形式中，而不是将所有内容都转换为字符串，但这是一场不同的战斗。

# java - Java JFrame 循环更新

> ID：15982139
> 
> 赞同：0
> 
> 时间：2013-04-12T22:56:01.403
> 
> 标签：java, swing, concurrency, jframe, event-dispatch-thread

在来这里之前，我已经在网上搜索并阅读了几十个谈论这个的话题，但我无法解决我的问题。

我想显示上传的进度。在下面的代码中，一切正常，除了我的 JFrame 没有更新。我正在使用我在另一个主题上找到的技术，但它似乎不起作用。我认为如果您查看我的代码会更简单（我删除了与问题无关的说明）。

```
/*
 * Correct imports have been done
 */

class GUI extends JFrame {
    public JPanel pan;

    public GUI(JPanel panel) {
        super("Uploading...");
        setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));
        setPreferredSize(new Dimension(600, 500));
        setMinimumSize(new Dimension(600, 500));
        setMaximumSize(new Dimension(600, 500));
        setDefaultCloseOperation(this.DO_NOTHING_ON_CLOSE);
        setLocationRelativeTo(null);

        pan = panel;
        pan.setLayout(new BoxLayout(pan, BoxLayout.Y_AXIS));

        setContentPane(pan);
        setVisible(true);   
    }
}

public class GUIUpload {
    private static GUI ui;

    public static void main(String args[]) {
        JPanel main = new JPanel();
        ui = new GUI(main); // create and display GUI        
        uploadLoop(args, main); // start the upload loop

        /*
         * After upload is finished
         */
            JButton jb = new JButton("Ok");
        jb.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                ui.setVisible(false);               
            }
        });

        ui.getContentPane().add(jb);
        ui.getContentPane().repaint();
    }

    private static void uploadLoop(String[] paths, JPanel monitor) {
        /*
         * Upload starts here
         */
        long transfered;
        long size;
        InputStream inputStream;        

        FTPClient ftpClient = new FTPClient();
        try {
        ftpClient.connect("xxxxxx", 21);
            boolean success = ftpClient.login("xxxxxx", "xxxxxx");
            /*
             * Sending
             */
            for (int i = 0; i < 4; i++){
                if (paths[i] != null){
                    File localFile = new File(paths[i]);
                    String remoteFile = "/public_html/papers/" + i + ".pdf";
                    JLabel label = new JLabel("Uploading...");
                    ui.getContentPane().add(label);
                    ui.repaint();

                    inputStream = new FileInputStream(localFile);   
                    // Monitoring misc
                    size = localFile.length();
                    transfered = 0;
                    int percentage = 0;
                                    // Progress bar
                    JProgressBar pgb = new JProgressBar();
                    pgb.setValue(0);
                    ui.getContentPane().add(pgb);
                    ui.repaint();
                    // Upload routine
                    OutputStream outputStream = ftpClient.storeFileStream(remoteFile);;
                    byte[] bytesIn = new byte[4096];
                    int read = 0;
                    while ((read = inputStream.read(bytesIn)) != -1) {
                        outputStream.write(bytesIn, 0, read);
                        transfered += read;
                        percentage = (int)(transfered * 100.0 / size + 0.5);
                        System.out.println(percentage);
                        pgb.setValue(percentage);
                        ui.repaint();
                    }
                    inputStream.close();
                    outputStream.close();
                    boolean completed = ftpClient.completePendingCommand();
                    /*
                     * End of upload
                     */ 
                }   
            }
        } // end try
        catch (Exception e){
            // Do nothing}
        } // end catch
    } // end upload method
} 
```

百分比工作正常。文件传输工作正常。GUI 框架仅在我在 GUIUpload 类的主要方法中重新绘制后更新。重新绘制时，我可以看到所有标签和进度条都已正确添加和更新（进度条显示最大值。

所以..我一直在寻找如何做到这一点已经有一段时间了，我尝试过使用线程，我尝试了很多东西，但都没有奏效（或者我在尝试它们时做错了）。

非常感谢任何能够帮助我的人。

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:17:54.517

*   Swing 是单线程的。当您执行资源繁重的任务（例如文件下载）时，您会阻止 Swing 重新绘制。
*   `Threads`由于 Swing 拥有自己的[并发特性](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)，这些特性提供了一种处理耗时的后台任务的方法，因此 raw 无法正常工作也就不足为奇了。`Threads`不是为与摆动组件交互而设计的。
*   使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

# arrays - 无法在 C++ 中打开文件到数组

> ID：15982142
> 
> 赞同：1
> 
> 时间：2013-04-12T22:56:08.757
> 
> 标签：arrays, io

我正在尝试打开一个文件并将内容读入几个数组。我找不到我做错了什么。我正在使用绝对路径。输入文件如下所示：

```
Sam     100    23   210
Bob     1     2    12
Ted     300   300   100
Bill    223   300   221
James   234   123   212
Luke    123   222   111
Seth    1     2     3
Tim     222   300   180
Dan     222   111   211
Ben     100   100     2 
```

这是我的代码：

```
#include "stdafx.h"
#include <fstream>
#include <iostream>
#include <string>

using namespace std;

int main()
{
string name;
ifstream inFile;
string bowlerNames[10];
int bowlerScores[10][3] = {0};

inFile.open("C:\\Users\Seth\Documents\bowlingData.txt");

if (inFile.is_open()) //Checking if the file can be opened
{

for (int i = 0; i < 10; i++)
{
    inFile  >> bowlerNames[i] 
            >> bowlerScores[i][0]
            >> bowlerScores[i][1]
            >> bowlerScores[i][2];
}

for (int i = 0; i < 10; i++)
{
    cout    << bowlerNames[i] 
            << bowlerScores[i][0]
            << bowlerScores[i][1]
            << bowlerScores[i][2];
}
}
else cout << "Unable to open file..." <<endl; //Gives that sentence if the file can't be opened

inFile.close();

cout << endl; //spacing
system("Pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T22:58:45.053

所有的反斜杠都必须是双反斜杠！

```
inFile.open("C:\\Users\\Seth\\Documents\\bowlingData.txt"); 
```

通过执行以下操作自己确认这一点：

```
string fileName = "C:\\Users\\Seth\\Documents\\bowlingData.txt");
cout << fileName << endl; 
```

# mysql - MariaDB 客户端默认使用 UTF-8

> ID：15982145
> 
> 赞同：3
> 
> 时间：2013-04-12T22:56:30.647
> 
> 标签：mysql, mariadb

如何让 MariaDB 客户端使用 UTF-8？我对等效版本的 MySQL 没有这个问题。 **我正在尝试在不`SET NAMES`通过客户端发布的情况下执行此操作。** 我使用 cmd 行客户端和 php 的 mysqli 驱动程序获得 latin1。

PHP mysqli_get_charset：

```
print_r(mysqli_get_charset($link));
stdClass Object
(
    [charset] => latin1
    [collation] => latin1_swedish_ci
    [dir] => 
    [min_length] => 1
    [max_length] => 1
    [number] => 8
    [state] => 1
    [comment] => 
) 
```

这是命令行客户端的输出：

```
echo "show variables like 'char%';" | mysql -u root -p

Variable_name   Value
character_set_client    utf8
character_set_connection        utf8
character_set_database  latin1
character_set_filesystem        binary
character_set_results   utf8
character_set_server    latin1
character_set_system    utf8
character_sets_dir      /usr/share/mysql/charsets/ 
```

这是我的 my.cnf 文件。

```
[client]
port            = 3306
socket          = /var/run/mysqld/mysqld.sock
default-character-set=utf8
[mysqld_safe]
socket          = /var/run/mysqld/mysqld.sock
nice            = 0
default-character-set=utf8
[mysqld]
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
lc-messages-dir = /usr/share/mysql
skip-external-locking
default-character-set  = utf8
default-collation      = utf8_general_ci
character_set_server   = utf8
collation_server       = utf8_general_ci
init_connect='SET NAMES utf8'
key_buffer              = 512M
max_allowed_packet      = 64M
thread_stack            = 192K
thread_cache_size       = 8
myisam-recover         = BACKUP
query_cache_limit       = 4M
query_cache_size        = 64M
expire_logs_days        = 10
max_binlog_size         = 100M
[mysqldump]
quick
quote-names
max_allowed_packet      = 64M
default-character-set=utf8
[mysql]
no-auto-rehash  # faster start of mysql but no tab completition
default_character_set=utf8
[isamchk]
key_buffer              = 128M
[client-server]
default-character-set=utf8
[client-mariadb]
default-character-set=utf8
!includedir /etc/mysql/conf.d/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T15:33:22.793

我解决了这个问题。我使用他们的 repo 和 apt-get 安装了 mariadb。一切似乎都很顺利。我使用命令`service mysql restart`和编码问题进行了这些非常慢的重启。我注意到有 2 个 mysqld 实例，我继续发送了一个 kill 命令，我不推荐 kill -9，常规 kill 工作得很好。然后做了一个`service mysql restart`，它开始很快，字符编码按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T05:40:33.937

问题是，**无论如何****你都不应该通过客户端发布。`SET NAMES`**
因为这个命令是不够的，除了服务器你还必须设置客户端编码。这只能通过使用 API 函数来完成。`SET NAMES`因此，您应该在 PHP 脚本中通过`msql(i)_set_charset()`函数或 DSN设置客户端编码，而不是发出查询。

因此，请记住 - 更改默认编码不会使您摆脱在 PHP 中设置编码的必要性。

然而，`utf-8`作为默认值比`latin1`. `my.ini`因此，在`[mysqld]`部分下添加以下行

```
init-connect='SET NAMES utf8' 
```

# highcharts - HighCharts - 显示比率图表

> ID：15982147
> 
> 赞同：0
> 
> 时间：2013-04-12T22:56:46.890
> 
> 标签：highcharts

我想创建一个类似于[http://www.highcharts.com/demo/column-negative](http://www.highcharts.com/demo/column-negative)的图表， 但不是 0 我想使用 1 作为镜像来显示较低的值（如负值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:58:06.607

**阈值**可以解决问题。就像在这个例子中：http: [//jsfiddle.net/n96Kc/](http://jsfiddle.net/n96Kc/)

```
series: {
            allowPointSelect: true,
            threshold: 100,
        } 
```

在您的情况下，阈值当然需要设置为 1。

# angularjs - 将对象传递给模板并在当前视图上渲染

> ID：15982148
> 
> 赞同：2
> 
> 时间：2013-04-12T22:56:48.837
> 
> 标签：angularjs, angular-template

有一个从 api 加载的用户列表

```
<div ng:controller="UserController">
    <li ng-repeat="user in users">
         <a ng:click="select(user)">
            {{user.first_name}} {{user.last_name}}
         </a>
    </li>
</div> 
```

单击用户时，我想打开一个额外的视图，显示用户的一些详细信息。想象一下这样的景色

![在此处输入图像描述](https://i.stack.imgur.com/1VJlJ.png)

蓝色的小区域是选定的用户，蓝色的大区域是显示详细用户信息的容器。

```
function UserController($scope){
    $scope.select = function(user){
        console.log(user);
    }
} 
```

因此，当单击用户时，我可以记录用户对象。它一直有效。但我绝对不知道如何打开装满用户数据的额外容器。

有没有办法简单地从文件系统加载模板，传递对象并将整个内容附加到当前视图？我将如何使用 angular.js 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:00:44.023

无需加载模板或任何东西。只需将数据放在范围内，并在大蓝色部分中使用引用数据的表达式。Angular will handle changing the displayed content when the selection is changed. 您可以使用 ng-show 隐藏相关部分，直到数据被选中。

这是一个[小提琴示例](http://jsfiddle.net/h4MXZ/2/)。

```
function UserController($scope){
    $scope.users = [{name:'me',email:'mine'}, {name:'you',email:'yours'}];
    $scope.selectedUser = null;
    $scope.select = function(user){
        $scope.selectedUser = user;
    }
} 
```

和

```
<div ng-controller="UserController">
<button class="btn" ng-click="select(users[0])">User 1</button>
<button class="btn" ng-click="select(users[1])">User 2</button>
<hr>
<div ng-show="selectedUser != null">
    <div>{{selectedUser.name}}</div> 
    <div>{{selectedUser.email}}</div> 
</div> 
```

您可以使用类似的 ng-class 或 ng-style 属性突出显示相应的蓝色小框（例如 ng-class="{active: selectedUser == user}"）。请参阅[有条件地申请课程的最佳方式是什么？](https://stackoverflow.com/questions/7792652/what-is-the-best-way-to-conditionally-apply-a-class-with-angularjs)

# ruby-on-rails - ActiveRecord::RecordNotFound in Controller#destroy

> ID：15982150
> 
> 赞同：1
> 
> 时间：2013-04-12T22:57:03.470
> 
> 标签：ruby-on-rails, ruby, omniauth

我试图让控制器的“破坏”正常工作，我想知道正确的设置应该是什么。

我得到的错误是

```
ActiveRecord::RecordNotFound in AuthenticationsController#destroy
Couldn't find Authentication without an ID 
```

我的控制器看起来像

```
class AuthenticationsController < InheritedResources::Base
def destroy
    @authentication = current_user.authentications.find(params[:id])
    @authentication.destroy
    redirect_to(:back)
end 
```

数据库表

```
 create_table "authentications", :force => true do |t|
    t.integer  "user_id"
    t.string   "provider"
    t.string   "uid"
    t.string   "secret"
    t.string   "token"
  end 
```

我尝试过其他参数，例如 :user_id 如何让用户销毁他们的令牌？（可以选择稍后重新进行身份验证）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:52:13.773

您没有将 id 传递给控制器

尝试

```
<%= link_to "Disconnect Your Authentication", {:controller=>'authentications', :action=>'destroy', :id=>current_user.authentication_id} %> 
```

或使用带有@autentication 参数的路径助手作为选项。

（您将需要编辑您的路线文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:04:01.730

如果您想销毁用户的所有身份验证，您当然可以将控制器的销毁方法更改为：

```
def destroy
  current_user.authentications.destroy_all
end 
```

更传统的方法是破坏特定的身份验证。在这种情况下，该`link_to`方法需要一个包含 id 参数的路径（最终将作为您`params[:id]`在控制器中的值）。您可以想象一个如下所示的视图片段，它显示所有用户的身份验证，每个身份验证都有一个销毁链接：

```
<ul>
<% current_user.authentications.each do |a| %>
  <li>
    <%= a.provider %>
    - 
    <%= link_to 'Disconnect Your Authentication', authentication_path(a), :method => :delete %>
  </li>
<% end %>
</ul> 
```

这假设 current_user 是一个助手，并且您的路由是在您的身份验证模型上设置的。`authentication_path`助手使用身份`a`验证实例生成路径，并带有 id 参数。

# php - 如果 else 语句，如何在 page.php 中显示帖子类别？

> ID：15982152
> 
> 赞同：1
> 
> 时间：2013-04-12T22:57:33.017
> 
> 标签：php, wordpress

我已经设置了几个类别，并希望显示基于`is_page()`.

在里面`page.php`，我创建了一个`if..else`检查页面名称并打印出特定类别的语句。我目前的问题是，`the_title`整个帖子不仅仅是被打印出来，而是被打印出来。

我哪里错了？

```
<?php while ( have_posts() ) : the_post(); ?>
<?php get_template_part( 'content', 'page' ); ?>
<?php if ( is_page( 'Greywater Recycling' ) ) { ?>
<div class="col">
    <?php query_posts( 'category_name=Greywater Recycling&posts_per_page=5'); if (have_posts()) : while (have_posts()) : the_post(); ?>
     <h2><?php the_title(); ?></h2>

    <?php endwhile; endif; ?>
</div>
<?php } else if ( is_page( 'Stormwater Management' ) ) { ?>
<div class="col">
    <?php query_posts( 'category_name=Stormwater Management&posts_per_page=5'); if (have_posts()) : while (have_posts()) : the_post(); ?>
     <h2><?php the_title(); ?></h2>

    <?php endwhile; endif; ?>
</div>
<?php } else if ( is_page( 'Rainwater Harvesting' ) ) { ?>
<div class="col">
    <?php query_posts( 'category_name=Rainwater Harvesting&posts_per_page=5'); if (have_posts()) : while (have_posts()) : the_post(); ?>
     <h2><?php the_title(); ?></h2>

    <?php endwhile; endif; ?>
</div>
<?php } ?>
<?php endwhile; // end of the loop. ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:01:02.180

*你的代码有很多*问题。一方面，在循环内[*不起作用。*](http://codex.wordpress.org/Function_Reference/is_page)**`is_page`**[](http://codex.wordpress.org/Function_Reference/is_page)

 *其次，不要混淆`query_posts`：[什么时候应该使用 WP_Query、query_posts() 和 get_posts()？](https://wordpress.stackexchange.com/q/1753/12615). 真的，忘记它的辅助循环。

您的代码可以简化为以下内容。在`functions.php`中，我们删除了一个函数来通过其名称获取类别 ID。另一个使用 ID 进行二次循环。然后，在`page.php`对这些函数的简单调用中。

**文档：[Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)。**

### `page.php`

^(*请注意，您不需要在每一行都打开 PHP 标记，这使得代码非常难以阅读。
仅用于在 PHP 和 HTML 之间交换*)

```
<?php 
get_template_part( 'content', 'page' ); 

// This page title
$the_title = get_the_title(); 

// Search for category with the same name of the page
$category = brsfl_get_category_id( $the_title );

// Category found, go to the secondary loop
if( $category ) {
    brsfl_check_print_categories( $category );
} 
```

### `functions.php`

^(*始终在您的函数名称前加上一些独特的东西，以避免可能导致站点关闭的冲突。*)

```
/**
 * Get the category ID based on its name
 */ 
function brsfl_get_category_id( $cat_name )
{
    $term = get_term_by( 'name', $cat_name, 'category' );

    // term found, return its ID
    if( $term ) {
        return $term->term_id;
    }

    // not found
    return false;
}

/**
 * Print a loop based on a category ID
 */     
function brsfl_check_print_categories( $cat_id )
{
    $args = array(
        'post_type' => 'post',
        'cat' => $cat_id,
        'posts_per_page' => 5
    );
    $the_query = new WP_Query( $args );

    if ( $the_query->have_posts() ) 
    { 
        while ( $the_query->have_posts() ) :
            $the_query->the_post();
            echo '<h2>' . get_the_title() . '</h2>';
        endwhile;
    } 
    else
    {
        echo 'No posts found...';
    } 
} 
```

* * *

尽管我已在建议的范围内回答，但我认为对此有更好的解决方案，例如：

*   一个[简码](http://codex.wordpress.org/Shortcode_API)，只需调整功能。

*   使用[高级自定义字段](http://www.advancedcustomfields.com/)显示一个元框，您可以在其中选择一个非常具体的类别（不要依赖页面和类别名称）并仅使用该`WP_Query`功能在模板中将其打印出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T15:56:50.670

我认为最好通过 slug 名称来获取类别。我已经尝试过您的解决方案，它工作正常，但在我的类别之一的名称带有特殊 html 字符（如撇号或引号）的情况下，它没有。

这是从您的解决方案中编辑的一段代码：

**在你的functions.php中**

```
 function brsfl_get_category_id($cat_name){
      $term = get_term_by( 'slug', $cat_name, 'category' );
      if( $term ) {
        return $term->term_id;
      }
      return false;
    } 
```

**在你的 page.php**

```
 $the_slug = get_post(get_the_ID())->post_name;
    $category = brsfl_get_category_id( $the_slug );
    if( $category ) {
      brsfl_check_print_categories( $category );
    } 
```*

# ios - FlyoutNavigation 子视图控制器无法在主控制器上执行 segue？

> ID：15982155
> 
> 赞同：0
> 
> 时间：2013-04-12T22:57:44.133
> 
> 标签：ios, xamarin.ios, segue, xamarin

在 James Clancey 的 monotouch 上使用弹出导航。无法让子视图控制器优雅地在主包含控制器上执行 segue？

```
 NavigationRoot = new RootElement ("Navigation") {
            new Section ("Menu") {
                new StringElement ("Mapview Controller"),
                new StringElement ("Another View Controller"),
            }
        },

        ViewControllers = new [] {

      // mapview is a view inside this viewcontroller and able to perform segues
            new UIViewController { View = mapView },

      // this is a seperate viewcontroller but is embedded inside the flyoutNavigation
     // AnotherViewController cant seem to call the root navigation controller (<-- actually a uiNav inside a tab bar nav) so i can perform a segue movement just like the above mapViewController??
            this.Storyboard.InstantiateViewController("AnotherViewController") as AnotherViewController,

        },

    // sub viewcontroller i.e. AnotherViewController trying to move mainViewController to perform a segue..
    // throws error: Receiver (<FlyoutNavigation.FlyoutNavigationController: 0x14360600>) has no segue with identifier 'segueTest'

   this.ParentViewController.PerformSegue("segueTest", this); 
```

***更新：我放弃了 segue。我没有使用额外的视图控制器，而是依赖于视图，但我的一个视图是静态单元表格视图，不知道如何将其添加到上面的代码中，所以：

```
 ViewControllers = new [] {
            new UIViewController { View = mapView },
            new UIViewController { View = myTableView } // doesnt work - tried with 'new UITableViewController' which also fails 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T11:00:26.210

您可以为此使用导航..

```
 ViewControllers = new [] {

new UINavigationController (this.Storyboard.InstantiateViewController("profileViewController") as ProfileViewController),
} 
```

# ruby - Ruby 阻止评论和个人资料问题

> ID：15982157
> 
> 赞同：0
> 
> 时间：2013-04-12T22:58:05.047
> 
> 标签：ruby, profile, block-comments

我编写了 Erik Demaine (MIT) docdist8.py 的 Ruby 版本。这在 github 上作为[docdist-v3.rb 可用](https://gist.github.com/mh-github/5375512)。我遇到了两种奇怪的情况：

1) 在函数 inner_product 中有一个块注释：

```
Inner product between two vectors, where vectors
are repeated as dictionaries of (word, freq) pairs.
Example : inner_product({"and":3, "of":2, "the":5},
                        {"and":4, "in":1, "of":1, "this":2}) = 14.0 
```

如果我用 =begin 和 =end 包裹它，没有问题，但如果我用三个双引号 """ 包裹它，我会收到如下错误：

```
./docdist-v3.rb:71: syntax error, unexpected tIDENTIFIER, expecting kEND
    Example : inner_product({"and":3, "of":2, "the":5},
                                         ^
./docdist-v3.rb:71: syntax error, unexpected tIDENTIFIER, expecting kEND
    Example : inner_product({"and":3, "of":2, "the":5},
                                                  ^
./docdist-v3.rb:72: syntax error, unexpected kIN, expecting kEND
...                 {"and":4, "in":1, "of":1, "this":2}) = 14.0
                              ^
./docdist-v3.rb:72: syntax error, unexpected tIDENTIFIER, expecting kEND
...         {"and":4, "in":1, "of":1, "this":2}) = 14.0
                              ^
./docdist-v3.rb:72: syntax error, unexpected tIDENTIFIER, expecting kEND
..."and":4, "in":1, "of":1, "this":2}) = 14.0
                          ^ 
```

是否存在与 =begin 和 =end 不同的“””规则/允许条目？

2）当我使用 time 命令运行我的程序时，它会在大约 0.3 秒内执行。但是，如果我输入 require 'profile' ，则相比之下所需的时间会变得非常高 - 30 秒。因此我根本没有得到正确的输出。原始 Python 版本似乎并非如此，它只需要一点额外的时间来分析。如何在 Ruby 中运行相同的配置文件？

注意：我用来运行 Ruby 程序的两个文件是 t2.bobsey.txt 和 t3.lewis.txt。它们可在[http://ocw.mit.edu/ans7870/6/6.006/s08/lecturenotes/dd_data.htm获得](http://ocw.mit.edu/ans7870/6/6.006/s08/lecturenotes/dd_data.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:33:59.893

1) 块注释始终具有以下形式：

```
=begin
Comment
=end 
```

您实际上是在创建一个从未使用过的字符串：

```
"""
Not a comment
"""
# => "\nNot a comment\n" 
```

这就是添加另一个引号时出现错误的原因，这就是语法突出显示将它们呈现为字符串的原因。

2）使用探查器速度较慢，但​​我得到相同的结果：

```
ruby docdist-v3.rb t2.bobsey.txt t3.lewis.txt
File t2.bobsey.txt:262111 lines,49785 words,3354 distinct words
File t3.lewis.txt:1015474 lines,182355 words,8530 distinct words
The distance between the documents is: 0.574160 (radians) 
```

# ruby-on-rails - 使用 STI 查询数据库的效率

> ID：15982158
> 
> 赞同：1
> 
> 时间：2013-04-12T22:58:14.163
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, indexing, single-table-inheritance

我很好奇 rails 如何查询使用 STI 的表。例如，如果我的父类是`Book`并且我有两个子类`ComicBook`，并且`Novel`如果我做类似的事情

```
Novel.all.each 
```

因为只有一张桌子，服务器是否也会切换所有漫画书？是否会自动添加适当的索引来防止这种情况？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:17:47.250

好吧，你不能这样做`Novel.each`，`each`没有在模型类上定义。但是，您可以执行`Novel.all.each ...`where `...`is some block。

至于查询是如何工作的，只需调用`to_sql`任何 ARel 表达式即可。`Novel.all`将返回模型集合本身，因此您需要更进一步以确保通过调用返回有效的 ARel 表达式`scoped`。

```
[1] pry(main)> Novel.scoped.to_sql
=> "SELECT \"books\".* FROM \"books\" WHERE \"books\".\"type\" IN ('Novel')" 
```

对大多数经常查询的列进行索引是一件值得考虑的事情。是的，如果没有索引，您的 rdbms 将不得不查看表中的所有记录作为上述条件检查的一部分。

# iis - 如何模拟 ScriptingContext 的“ASPTypeLibrary.Application”对象

> ID：15982159
> 
> 赞同：2
> 
> 时间：2013-04-12T22:58:22.620
> 
> 标签：iis, vb6, activex

我的任务是修改一些用 Visual Basic 6 编写的旧 ActiveX DLL。我需要做的一件事是模拟“ScriptingContext”对象，（这样我们就可以支持运行 IIS 以外的其他机制，而无需重写大块代码）。

让我有些悲伤的是“ASPTypeLibrary.Application”对象，它有两种非常不同的方式来访问其存储的值，例如：

```
 .Application("KeyName") 
```

或者

```
 .Application.Value("KeyName") 
```

如何创建自己的支持这两种访问机制的 VB6 类？我可以做一个或另一个，但不能两者都做？

（一个简单的代码示例将非常感谢，我不是 VB6 程序员）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:22:38.190

我找到了一种方法来做到这一点，请参阅下面从两个类“clsContext”和“clsContextApp”中获取的代码片段。后者实现“.Value”功能，前者具有“.Application”属性...

我现在发现了一个更困难的问题。ScriptingContext 的“ASPTypeLibrary.Request”对象具有**三种**不同的方式来访问其“.Request.QueryString”属性：

.Request.QueryString("KeyName")
或
.Request.QueryString.Value("KeyName")
或
.Request.QueryString

最后一个方法返回一个字符串，该字符串由所有由“&”字符连接的键/值对组成。我不知道如何实现这个？

```
' clsContext
Public ContextApp As clsContextApp

Public Property Get Application(Optional ByRef Key As Variant = Nothing) As Variant
 If (Key Is Nothing) Then
  Set Application = ContextApp
 Else
  If (Not ContextApp.p_Application.Exists(Key)) Then
   Application = ""
  Else
   Application = ContextApp.p_Application.Item(Key)
  End If
 End If
End Property

Public Property Let Application(ByRef Key As Variant, ByVal Value As Variant)
 If (VarType(Key) = vbString) Then
  If (VarType(Value) = vbString) Then
   If (Not ContextApp.p_Application.Exists(Key)) Then
    ContextApp.p_Application.Add Key, Value
   Else
    ContextApp.p_Application.Item(Key) = Value
   End If
  End If
 End If
End Property

' clContextApp
Public p_Application As Scripting.Dictionary

Public Property Get Value(Key As String) As String
 If (Not p_Application.Exists(Key)) Then
  Value = ""
 Else
  Value = p_Application.Item(Key)
 End If
End Property

Public Property Let Value(Key As String, Value As String)
 If (Not p_Application.Exists(Key)) Then
  p_Application.Add Key, Value
 Else
  p_Application.Item(Key) = Value
 End If
End Property 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:39:08.623

好吧，我已经设法回答了有关 ScriptingContext 的“ASPTypeLibrary.Request”对象的附加问题，该对象具有**三种**不同的方式来访问其“.Request.QueryString”属性。

我在下面包含了一个代码片段，该代码片段基于我之前对“ASPTypeLibrary.Application”对象的回答中的代码。如果我向“clsContextApp”类添加一个新属性并将其设置为该类的**默认属性**，那么它将在调用“.Application”属性时调用，而无需任何限定，例如：

MyString = Context.Application

在 VB6 中将特定属性设置为默认属性有点晦涩难懂，但我按照我在[**此处**](http://www.tech-archive.net/Archive/VB/microsoft.public.vb.general.discussion/2005-07/msg00281.html)找到的说明进行了操作。

```
' clsContextApp Default Property
Property Get Values(Optional ByVal Index As Integer = -1) As String  ' This is the Default Value for clsContextApp
Attribute Values.VB_UserMemId = 0
 Dim KeyName As String, Value As String

 Values = ""

 If (Index < 0) Then
  For Index = 0 To p_Application.Count - 1
   KeyName = p_Application.Keys(Index)
   Value = p_Application.Item(KeyName)
   If (Index > 1) Then
    Values = Values + "&"
   End If
   Values = Values + KeyName + "=" + Value
  Next Index
 Else
  If (Index < p_Application.Count) Then
   KeyName = p_Application.Keys(Index)
   Value = p_Application.Item(KeyName)
   Values = KeyName + "=" + Value
  End If
 End If
End Property 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T13:04:33.340

添加对 Microsoft Active Server Pages 对象库和 COM+ 服务类型库的引用，然后使用对象浏览器显示您似乎缺少的一些基本内容。

`GetObjectContext`是 COMSVCSLib 中的全局方法，没有用于检索当前 ObjectContext 作为其返回值的参数。

`ObjectContext`是一个类。它有一个名为 Item 的只读*默认属性*，它接受一个 String 参数并且是 Variant 类型。

`"Application"`作为参数传递以`Item`返回应用程序类的当前实例。

`ScriptingContext`是一个类。它已经过时了。

`Application`是另一个类。它有一个名为 Value 的*默认属性*，它接受一个 String 参数并且是 Variant 类型。

`Value`是应用程序类的属性，并提供对读写键/值对存储的访问，其中键始终是字符串。由于它是 Variant 类型，因此您可以存储对象以及各种类型的简单值和数组。

在 VB6 中复制这些看起来并不困难。键/值存储可以是 Collection 或 Scripting.Dictionary。

# xcode - 英特尔 C++ 编译器，无法在 OS X 上打开 stdarg.h

> ID：15982167
> 
> 赞同：1
> 
> 时间：2013-04-12T22:58:52.903
> 
> 标签：xcode, macos, compiler-construction, compiler-errors, icc

OS X 10.6.8、XCode 3.2.6、基础 SDK 10.5、英特尔编译器 11.1

当我尝试编译时收到一条奇怪的消息：

`catastrophic error: could not open source file "stdarg.h"`

我正在使用 PCH，我确实发现：[Xcode Intel compiler icc cannot find #include <algorithm>](https://stackoverflow.com/questions/4244727/xcode-intel-compiler-icc-cannot-find-include-algorithm)

这是一个类似的问题，我认为源文件类型设置为`.c.c`而不是`.c`

从我可以看到 stdarg.h 是：

```
/* This file is public domain.  */
/* GCC uses its own copy of this header */
#if defined(__GNUC__)
    #include_next <stdarg.h>
#elif defined(__MWERKS__)
    #include "mw_stdarg.h"
#else
    #error "This header only supports __MWERKS__."
#endif 
```

*显然， GNUC*必须是这样定义的。

任何人都可以帮我弄清楚如何更好地编译，因为这无需更改 GCC 4.0 就可以工作吗？是否有一种全局方式可以让 XCode 重新评估源文件类型，`.c.c`或者`.cpp.cpp`我什至不确定这会如何发生。

此外，如果需要`#define`，我是否可以检查英特尔编译器是否用于制作特殊情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:27:50.343

我查看了构建结果中引用的一些文件，并查看了 XCode 中的源文件类型，它显示为 source.cc，我认为如果我将其更改为 source.c，编译器错误就会消失。

# c - C 如何制作消息列表？

> ID：15982170
> 
> 赞同：1
> 
> 时间：2013-04-12T22:59:06.917
> 
> 标签：c, list

我想列出一个我通过索引号调用的消息列表。所以我会得到输入 13，然后应该打印消息 13。我的问题是我需要很多这些消息并且它们需要多行，这将占用我的主文件中的大量空间。所以我的问题是如何存储所有这些消息并在需要时调用它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:02:04.923

我会将它们存储在一个单独的源文件中，以`char*`. 该数字可以简单地成为数组的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:11:01.280

根据我对你的问题的理解。您应该使用字符串数组。因为数组是存储和检索数据的最快方式。你可以像下面这样使用：

```
char a[2][1000];
strcpy(a[0], "I hello how r u");
strcpy(a[1], "i m fine"); 
```

您可以通过数组索引访问消息。如果您想访问第一条消息，那么您将获得 a[0]，对于第二条消息 a[1]，对于第三条消息 a[2]，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:12:01.183

一个简单的方法

```
char const * getMessageByIndex( int const index ) {

    static char const * const messages[] = {
        "I am message 0",
        "I am message 1",
        // ...
    };

    int const numMessages = sizeof messages / sizeof messages[ 0 ];
    if( (index < 0) || (numMessages <= index) {
        // error handling
        return "index out of bound";
    }

    return messages[ index ];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T11:33:31.387

制作索引文件和消息文件。和索引文件读取的消息。

例如）*错误处理被省略。

制作索引和消息文件：

```
#include <stdio.h>

const char* message[] = {
    "1st message",
    "2nd message\ninclude newline",
    "3rd message"
    //...
};

int main(){
    FILE *indexFile, *textFile;
    long loc=0;
    int i, size, len;

    size=sizeof(message)/sizeof(char*);
    indexFile=fopen("index.dat", "wb");
    textFile=fopen("message.dat", "wb");

    for(i=0;i<size;++i){
        loc = ftell(textFile);
        fwrite(message[i], sizeof(char), len=strlen(message[i]), textFile);
        fwrite(&loc, sizeof(long), 1, indexFile);
        fwrite(&len, sizeof(int),  1, indexFile);
    }

    fclose(textFile);
    fclose(indexFile);
    return 0;
} 
```

使用示例：

```
#include <stdio.h>
#include <stdlib.h>

char* readMessage(int n){
    char *message;
    FILE *indexFile, *textFile;
    long loc;
    int i, size, len;
    int recordSize = sizeof(long) + sizeof(int);

    indexFile=fopen("index.dat", "rb");
    textFile=fopen("message.dat", "rb");

    loc = recordSize * n;
    fseek(indexFile, loc, SEEK_SET);
    fread(&loc, sizeof(long), 1, indexFile);
    fread(&len, sizeof(int ), 1, indexFile);
    message=(char*)malloc(sizeof(char)*(len+1));
    fseek(textFile, loc, SEEK_SET);
    fread(message, sizeof(char), len, textFile);
    message[len]='\0';

    fclose(textFile);
    fclose(indexFile);
    return message;
}

int main(){
    char *mes;
    int n;
    n =1;
    mes = readMessage(n);//zero origin
    printf("message %d is \"%s\"\n", n, mes);
    free(mes);

    return 0;
} 
```

# c# - 拼接图像 Emgu.cv 异常

> ID：15982176
> 
> 赞同：0
> 
> 时间：2013-04-12T23:00:38.777
> 
> 标签：c#, emgucv

我正在做一个项目，其中一部分是使用 Emgu.cv 拼接图像；要求用户导入图像。一旦用户按下“拼接”按钮，图像必须使用图片框拼接并显示为一个图像，但不是这样，而是出现了错误：

[错误图像](http://img203.imageshack.us/img203/9943/77522160.png)

我按照本教程尝试使用 Vb 而不是 c#：[http](http://www.youtube.com/watch?v=Lk37LR50viw) ://www.youtube.com/watch?v=Lk37LR50viw 但该项目未构建。

按钮中的 c# 代码：

```
 Stitcher x = new Stitcher(false);

        Image<Bgr, Byte> result = x.Stitch(images);
        imageBox.Image = result.ToBitmap(); 
```

虽然图像是：

```
 Image<Bgr, Byte>[] images = new Image<Bgr, Byte>[9]; 
```

存储所有导入的图像：

```
 private void importbuofd_FileOk(object sender, CancelEventArgs e)
    {

        switch (x)
        {
            case 1: pictureBox1.ImageLocation = importbuofd.FileName; x = x + 1; images[0] = new Image<Bgr, Byte>(new Bitmap(pictureBox1.Image)); count++; break;
            case 2:  pictureBox2.ImageLocation = importbuofd.FileName; x = x + 1; images[1] = new Image<Bgr, Byte>(new Bitmap(pictureBox2.Image)); count++; break;
            case 3: pictureBox3.ImageLocation = importbuofd.FileName; x = x + 1; images[2] = new Image<Bgr, Byte>(new Bitmap(pictureBox3.Image)); count++; break;
            case 4: pictureBox4.ImageLocation = importbuofd.FileName; x = x + 1; images[3] = new Image<Bgr, Byte>(new Bitmap(pictureBox4.Image)); count++; break;
            case 5: pictureBox5.ImageLocation = importbuofd.FileName; x = x + 1; images[4] = new Image<Bgr, Byte>(new Bitmap(pictureBox5.Image)); count++; break;
            case 6: pictureBox6.ImageLocation = importbuofd.FileName; x = x + 1; images[5] = new Image<Bgr, Byte>(new Bitmap(pictureBox6.Image)); count++; break;
            case 7: pictureBox7.ImageLocation = importbuofd.FileName; x = x + 1; images[6] = new Image<Bgr, Byte>(new Bitmap(pictureBox7.Image)); count++; break;
            case 8:pictureBox8.ImageLocation = importbuofd.FileName; x = x + 1; images[7] = new Image<Bgr, Byte>(new Bitmap(pictureBox8.Image)); count++; break;
            case 9: pictureBox9.ImageLocation = importbuofd.FileName; x = x + 1; images[8] = new Image<Bgr, Byte>(new Bitmap(pictureBox9.Image)); count++; break;
            default: MessageBox.Show("Sorry, This is the maximum number You can import"); break;

        }
    } 
```

我该怎么办？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T16:54:45.453

尝试这个：

```
Image<Bgr, Byte> cam1 = _capture1.QueryFrame();
Image<Bgr, Byte> cam2 = _capture2.QueryFrame();

Image<Bgr, Byte> convert1 = new Image<Bgr, byte>(Change_Im_Size(cam1.ToBitmap(), 270, 190));
Image<Bgr, Byte> convert2 = new Image<Bgr, byte>(Change_Im_Size(cam2.ToBitmap(), 270, 190));

pictureBox1.Image = cam1.ToBitmap();
pictureBox2.Image = cam2.ToBitmap();

Image<Bgr, Byte>[] frameArray = new Image<Bgr, Byte>[2];

frameArray[0] = convert1;
frameArray[1] = convert2;

using (Stitcher stitcher = new Stitcher(false))
{
    try
    {
        Image<Bgr, Byte> result = stitcher.Stitch(frameArray);
        pictureBox3.Image = result.ToBitmap();
    }
    catch { }
} 
```

# ios - Kiwi iOS 上下文块的奇怪排序

> ID：15982178
> 
> 赞同：3
> 
> 时间：2013-04-12T23:00:42.417
> 
> 标签：ios, objective-c, bdd, objective-c-blocks, kiwi

我有一个看起来像这样的 Kiwi 规范文件：

```
#import "Kiwi.h"
#import "MyCollection.h"

SPEC_BEGIN(CollectionSpec)

describe(@"Collection starting with no objects", ^{
    MyCollection *collection = [MyCollection new];

    context(@"then adding 1 object", ^{
        MyObject *object = [MyObject new];
        [collection addObject:object];
        it(@"has 1 object", ^{
            [collection shouldNotBeNil];
            [collection.objects shouldNotBeNil];
            [[theValue(collection.objects.count) should] equal:theValue(1)]; //failing test
        });

        context(@"then removing 1 object", ^{
            [collection removeObject:object];
            it(@"has 0 objects", ^{
                [[theValue(collection.objects.count) should] equal:theValue(0)]; //passing test
            });
        });
    });
});

SPEC_END 
```

运行规范会导致这行代码出现一次失败`[[theValue(collection.objects.count) should] equal:theValue(1)];`

这是奇怪的部分 - 如果我从规范中删除整个`context(@"then removing 1 object", ^{...})`块，则上述测试通过。

这让我相信这`[collection removeObject:object]`条线在测试失败之前就被执行了。我有一种感觉，我可能误解了块的执行顺序。

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T22:50:54.473

你是正确的，`[collection removeObject:object]`在失败的测试之前被执行。将 Kiwi 测试视为分两次运行：

1.  设置：测试文件中的代码从上到下执行以设置测试上下文和期望
2.  执行：运行每个单元测试，基本上每个`it`/`specify`语句一个，为每个测试重复正确的设置/拆卸代码

请注意，Kiwi 测试文件中的大部分代码都指定为发送到 Kiwi 函数的一系列块。任何不遵循 Kiwi 块模式的代码，例如初始化/修改`collection`变量的代码，都可能因此在意外时间执行。在这种情况下，所有的集合修改代码都在设置测试的第一遍期间执行，*然后*运行您的测试。

### 解决方案

`collection`使用`__block`修饰符声明，并用于`beforeEach`实例化和修改`collection`对象：

```
describe(@"Collection starting with no objects", ^{
    __block MyCollection *collection;
    beforeEach(^{
        collection = [MyCollection new];
    });

    context(@"then adding 1 object", ^{
        beforeEach(^{
            MyObject *object = [MyObject new];
            [collection addObject:object];
        });
        it(@"has 1 object", ^{
            ...
        });

        context(@"then removing 1 object", ^{
            beforeEach(^{
                [collection removeObject:object];
            });
            it(@"has 0 objects", ^{
                ... 
```

这些`beforeEach`块告诉 Kiwi 在每个单元测试中专门运行一次给定的代码，并且使用嵌套上下文，这些块将根据需要按顺序执行。所以 Kiwi 会做这样的事情：

```
// run beforeEach "Collection starting with no objects"
collection = [MyCollection new]
// run beforeEach "then adding 1 object"
MyObject *object = [MyObject new]
[collection addObject:object]
// execute test "has 1 object"
[collection shouldNotBeNil]
[collection.objects shouldNotBeNil]
[[theValue(collection.objects.count) should] equal:theValue(1)]

// run beforeEach "Collection starting with no objects"
collection = [MyCollection new]
// run beforeEach "then adding 1 object"
MyObject *object = [MyObject new]
[collection addObject:object]
// run beforeEach "then removing 1 object"
[collection removeObject:object]
// execute test "has 0 objects"
[[theValue(collection.objects.count) should] equal:theValue(0)] 
```

修改器将`__block`确保`collection`可以通过所有这些块函数正确保留和修改对象引用。

# php - 在 wordpress 的某个类别中列出某个帖子的标签

> ID：15982179
> 
> 赞同：0
> 
> 时间：2013-04-12T23:01:01.203
> 
> 标签：php, wordpress, post, tags

这是问题所在，我有一个 wordpress 网站，其中有一些类别，比如 NY & NV & CA。每个类别中都有可能具有相同标题的帖子。但是每个帖子都有不同的标签。

现在我想在另一个页面中查询帖子的标签，只显示我想要获取的非常确定的帖子。

这是我正在使用的代码：

```
 <?php
$args = array(
    'posts_per_page' => -1,
    'Name' => 'Las Vegas',
    'category_name' => 'NY', 'NV', 'CA');

$lastposts = get_posts( $args );
foreach($lastposts as $post) : ?>
<?php 

$posttags = get_the_tags($post->ID);
    if ($posttags) {
      foreach($posttags as $tag) {
        echo $tag->name . '<br/>';
      }
    }
 ?>
<?php endforeach; ?> 
```

但问题是当我运行查询时列出所有类别中的所有标签，或者一旦找到“las vegas”就停止列出，这可能是另一个类别中的错误“las vegas”。我什至尝试仅添加 NV 作为类别查询，但仍然列出相同的结果。

# ruby - 我可以在开始救援结束块内断言吗？

> ID：15982184
> 
> 赞同：1
> 
> 时间：2013-04-12T23:01:43.110
> 
> 标签：ruby, unit-testing, rescue

我有一些我正在测试的东西，如果它失败了，我会知道它的工作原理。有没有比我在下面的示例中更好的方法来使用测试单元在 ruby​​ 中进行编码？

```
begin 
  x = Method.shouldFail
  assert_true(false)
rescue Test::Unit::AssertionFailedError
  assert_true(false) #stop test, this is a failure
rescue => e
  assert_equal(400, e.code)
end 
```

这似乎很笨拙，有没有更好的方法来写这个？我希望 Method.shouldFail 总是会失败，但它可能不会。我会假设在最后一个救援块中 e.code 应该总是 400 但它可能是别的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:06:14.800

您可以使用[`assert_raise`](http://apidock.com/ruby/Test/Unit/Assertions/assert_raise)来测试是否抛出了特定的异常。

# java - 将大量双精度值从 Servlet 发送到 JSP

> ID：15982185
> 
> 赞同：1
> 
> 时间：2013-04-12T23:01:47.853
> 
> 标签：java, jsp, servlets, service, web

我想将一个包含大量值的双数组从 servlet 发送到 jsp 页面，问题是这个数组没有一定的大小，大小是用户的 inpt，所以有时它可能包含 500.000、720.000 等和用户可以将其作为数组大小的值输入的最大值为 1,000,000。

我正在使用以下内容，并且可以正常工作：

(servlt) RequestDispatcher disp;

```
 request.setAttribute("vValues", V_Array);

     disp = getServletContext().getRequestDispatcher("/index.jsp");

     disp.forward(request, response); 
```

(jsp)

```
 <% double[] V_Values =(double[]) request.getAttribute("vValues"); %> 
```

但是当我尝试从 servlet 向 jsp 页面发送超过 100.000 个值时出现问题，页面加载了一段时间，然后它因以下错误而崩溃：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

javax.xml.ws.WebServiceException: Could not send Message.
    org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:144)
    sun.proxy.$Proxy64.getSVData(Unknown Source)
    SMC.client.SMCService.doGet(SMCService.java:68)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.net.SocketTimeoutException: SocketTimeoutException invoking http://localhost:8080/SMC/services/SMPort: Read timed out 
```

你能帮帮我吗，我需要解决这个问题才能继续。

提前致谢;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:11:08.030

您不应该将大量数据从 servlet 推送到 jsp。页面不应填充 100.000 或任何大量值。从观众的角度来看，这只是不可用：

*   用户永远不想读取这么多的数据
*   用户永远不会手动输入这么多数字

如果您需要向用户接收或发送该大小的数组，则需要采用不同的方法：将该数据存储在文件中（想到 csv），然后发送。同样，对于输入，用户会希望将数据作为文件发送，因此制作临时表单来上传文件。

如果您需要预处理该数组以仅显示几个值，请在 servlet 中进行预处理，而不是在 jsp 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:29:54.410

抱歉，也许我的解释不太好，我的意思是

用户将要求程序生成随机值，因此用户只需输入（我的程序希望随机生成多少值）.. 结果将是图形表示 -</p>

# android - 我想为 android 和 ios 构建一个视频游戏应用程序，但我担心从哪里开始

> ID：15982187
> 
> 赞同：3
> 
> 时间：2013-04-12T23:01:49.640
> 
> 标签：android, ios, objective-c, qt, game-physics

我尝试研究这些主题，但我有点不知道从哪里开始。

1：我的母语是 c++，所以我考虑使用 Qt，但我担心我无法实现像 Android 键盘或 iOS 游戏中心这样使用成就和商店应用购买等的东西。

2：我希望它是一个带有滚动背景的 2D 游戏，它使用触摸和拖动控制（有点像愤怒的小鸟）、成就、排行榜、店内购买，并且能够通过广告支持使其免费。

3：我读了几本朋友的 iOS 编程书籍，所以我也了解了 Objective C。

4：我可能很容易学会java。

5：我读过一些关于 javascript 编程的文章，但没有做任何编程。

6：我看了一些 Qt 教程，但似乎没有一个涵盖游戏开发。

因此，如果我在 Qt 中制作它，我仍然可以使用上述元素吗？（游戏中心等）

如果我在虚拟机上的目标 C 中制作它，我是否能够以任何可能的方式将其移植到 android 上？

什么是/是一个很好的教程，让我开始学习如何用这些元素制作这样的游戏？（无论是在 Qt 还是更好的东西）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:14:38.850

如果您不知道从哪里开始，我强烈建议您在 iOS 或 Android 中使用本机。让游戏在其中任何一个上表现良好，你就可以拥有一个成功的应用程序。很多人试图做一些通用的跨平台的东西，最终得到的东西真的很平庸或更糟。

如果你的游戏是成功的，那么它会通过你或其他人在这些平台上工作而进入其他平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T23:15:33.380

如果您想在这方面进行投资，我可能会指导您查看 Unity 引擎，该引擎在其他设备中支持 Android。

我提到这一点是因为您提出了将游戏从 iOS 移植到 iOS 的问题。Unity 引擎支持多个平台，如果您最终尝试在所有移动平台上部署游戏，这将使您的生活更轻松。

如果您有兴趣，它有一个免费版本可以试用。然而，android 和 ios 插件会花费你更多。

[http://unity3d.com/](http://unity3d.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T23:19:17.617

看看 Cocos2d-X。它是 Cocos 2D 的 C++ 端口，支持 iOS、Android、Windows Phone 和其他几个平台。我们在 Bionic Panda Games 上使用它并取得了不错的效果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T23:09:45.780

Qt for android 具有软件键盘功能。我建议您从 Qt 5.1 或 necessitas（适用于 android）开始。可以使用 Objective-C++ 访问游戏中心。

# ubuntu - 在 Ubuntu 中编译 LESS Twitter Bootstrap 文件

> ID：15982195
> 
> 赞同：0
> 
> 时间：2013-04-12T23:02:29.950
> 
> 标签：ubuntu, twitter-bootstrap, less

我下载了 twitter 引导程序[https://github.com/twbs/bootstrap](https://github.com/twbs/bootstrap)

我正在尝试编译较少的文件，但它给了我一个 NameError

**lessc wells.less test.css**

错误

```
NameError: .border-radius is undefined in /var/www/2.6.0/assets/less/wells.less:13:2
12   border: 1px solid darken(@wellBackground, 7%);
13   .border-radius(@baseBorderRadius);
14   .box-shadow(inset 0 1px 1px rgba(0,0,0,.05)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:48:51.060

我不知道`lessc`命令现在在 v2.3.1 中是否仍然有效，但您应该编译该`bootstrap.less`文件。该文件将编译 Bootstrap 中包含的所有文件（响应式较少文件除外）。该文件的内容是：

```
@import "variables"
@import "scaffolding"
...
@import "hero-unit.less"; 
```

所以像：

```
lessc ./bootstrap.less > bootstrap.css 
```

应该可以，但我不能向你保证，因为我测试的最后一个版本是 2.1。

无论如何，有一些说明可以使用 makefile 编译他们的代码，或者只是使用 a`less.js`来避免编译。您可以[从他们的官方页面](http://twitter.github.io/bootstrap/extend.html#compiling)和[github 项目](https://github.com/twitter/bootstrap)的 README 中查看文档中的说明。

# sql - 您如何通过 ORM 访问父子关系，条件是存在记录子项的父项？

> ID：15982199
> 
> 赞同：1
> 
> 时间：2013-04-12T23:02:53.617
> 
> 标签：sql, django, orm, django-models

我正在尝试通过直接连接的 Django ORM 创建查询。我正在尝试仅从父表中提取在子表中有条目的记录，此外，我想在父表上添加一个条件。

以下是示例模型：

```
class Reporter(models.Model):    
    first_name = models.CharField(max_length=64)
    last_name = models.CharField(max_length=64)

class Article(models.Model):
    pub_date = models.DateField()
    headline = models.CharField(max_length=200)
    content = models.TextField()
    reporter = models.ForeignKey(Reporter) 
```

SQL 如下所示：

```
Select * from Reporter 
JOIN Article ON Article.reporter_id = Reporter.id 
where Reporter.last_name="Jones" 
```

如何使用 Django ORM 构造上面的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:11:46.363

这将执行内部连接并返回记者：

```
Reporter.objects.filter(last_name='Jones', article__isnull=False) 
```

（它也会增加一个无害`article.id IS NOT NULL`的`WHERE`）

# android - 将 Android 连接到 Oracle

> ID：15982200
> 
> 赞同：-1
> 
> 时间：2013-04-12T23:02:54.493
> 
> 标签：android

我是新手，正在尝试将 android 应用程序连接到我的 oracle 数据库。我当前的代码抛出错误：

> android.os.NetworkOnMainThreadException ...

我的连接代码如下：

```
public class ConnectOra {

    public String driver, url, ip, bd, usr, pass;
    public Connection conexion;

    public ConnectOra(String ip, String bd, String usr, String pass) {

        driver = "oracle.jdbc.driver.OracleDriver";
        this.bd = bd;
        this.usr = usr;
        this.pass = pass;
        url = new String("jdbc:oracle:thin:@" + ip + ":1521:" + bd);

        try {

            Class.forName(driver).newInstance();
            conexion = DriverManager.getConnection(url, usr, pass);

            // revisan el log para ver que tira....
            System.out.println("Conexion a Base de Datos " + bd + " Exitosa");
        } catch (Exception exc) {
            System.out.println("Error al tratar de abrir la base de Datos "
                                 + bd + " : " + exc + "ricardo");

        }
}

public Connection getConexion() {
    return conexion;
}

public Connection CerrarConexion() throws SQLException {
    conexion.close();
    conexion = null;
    return conexion;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:04:23.310

正如错误提示的那样，你不能在主线程上进行网络连接......所以把它放在一个单独的线程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T22:27:36.237

你应该实现 AsyncTask 并添加：到你的 android mainfest。

无论如何，从任何本地客户端到远程数据库的直接连接在安全方面是一个非常糟糕的做法，该模型几年前出于很好的原因而消失了，在这种情况下，在 Android 中，如果你有 apk 文件，你可以解压缩它，然后反编译 java 源文件以获取数据库凭据并获得对数据库的完全访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:42:42.063

您必须使用另一个线程来执行网络任务。

我建议您使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# c# - 如何从下拉选择中填充数据库信息？

> ID：15982207
> 
> 赞同：0
> 
> 时间：2013-04-12T23:03:30.907
> 
> 标签：c#, asp.net, sql, sql-server-2008

我有一个学生表、一个课程表和一个学生/课程表来显示参加课程的学生。该表位于 SQL Server 2008 中，前端位于 C# 和 Asp.net 中。

在学生/课程表中，我希望能够有一个下拉菜单，允许我选择存储在数据库中的学生 ID，然后在文本框或标签中填充学生的姓名、姓氏和中间名首字母。

我怎么可能做到这一点？有什么例子吗？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T05:29:55.333

您可以使用 ADO.net，如果不熟悉的话

页面加载事件

```
 SqlCommand cmd = new SqlCommand();
    cmd.Connection= new Class1().getconnection();
    cmd.CommandText = "SELECT * FROM Profile";
    cmd.Connection.Open();
    SqlDataReader dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        DropDownList1.Items.Add(dr["YahooId"].ToString());
    } 
```

在“cmd.CommandText”而不是“Profile”中使用你的表名，在“while(dr.read())”下使用你的列名而不是“YahooId”

# linq-to-entities - Linq 到任何返回错误的实体

> ID：15982212
> 
> 赞同：1
> 
> 时间：2013-04-12T23:04:08.637
> 
> 标签：linq-to-entities, entity-framework-5

我在 MVC 应用程序中使用 Entity Framework 5。我保存了一个匹配列表，在进行实际更新之前，我想将所有发布的匹配加载到 EF 内存中。

我有以下代码（有效）。_context 是我的 EfDbContext：

```
public bool UpdateMatches(IEnumerable<Match> matchesToUpdate, int userID)
{
    matchesToUpdate = matchesToUpdate as List<Match> ?? matchesToUpdate.ToList();
    var matchIDs = matchesToUpdate.Select(m => m.ID).ToArray();

    _context.Matches.Where(x => matchIDs.Contains(x.ID)).Load();
} 
```

但我真正想要的是这样的：

```
public bool UpdateMatches(IEnumerable<Match> matchesToUpdate, int userID)
{
    _context.Matches.Where(m => matchesToUpdate.Any(x => x.ID == m.ID)).Load();
} 
```

但我得到了错误

> “无法创建‘匹配’类型的常量值。在此上下文中仅支持原始类型或枚举类型。”

我也尝试使用包含，但没有运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T06:38:23.283

`ID`从您的`matchesToUpdate`收藏中获取列表并使用`Contains`，而不是`Any`：

```
public bool UpdateMatches(IEnumerable<Match> matchesToUpdate, int userID)
{
    var ids = matchesToUpdate.Select(x => x.ID).ToList();
    _context.Matches.Where(m => ids.Contains(m.ID)).Load();
} 
```

它将导致`IN`生成的 SQL 查询中的语句。

# php - 使用 TIMESTAMPDIFF 获取 mysql 中两个时间戳之间的微小差异

> ID：15982213
> 
> 赞同：5
> 
> 时间：2013-04-12T23:04:16.417
> 
> 标签：php, mysql

我有这样的 SQL 语句，试图获得大于 10 分钟的 2 个时间戳的差异。“时间戳”是 MYSQL 中的一列，我持有一个时间戳，例如“1365793346”

```
SELECT * FROM table WHERE TIMESTAMPDIFF(MINUTE,timestamp,NOW()) AS thisisit 
```

我不确定使用“AS thisisit”是否是 TIMESTAMPDIFF 的当前功能，但我能够找到一些旧帖子，说明它是如何使用的。我不确定它是否不再受支持，因为我在“AS thisisit”处出现语法错误

我也尝试过使用

```
SELECT * FROM table WHERE TIMESTAMPDIFF(MINUTE,timestamp,NOW()) > 10 
```

我不确定发生了什么首先是我的语法正确，其次是如何将此查询与标签相关联，以便我可以回显它。我的完整 PhP 代码如下所示

```
SELECT * FROM table WHERE TIMESTAMPDIFF(MINUTE,timestamp,NOW()) > 10
$result = mysql_query($sql);
while($row = mysql_fetch_array($result)) {
echo $row[0];
} 
```

我假设我可以使用这样的东西来回显结果，但屏幕上什么也没有。谁能指出我正确的方向？

```
echo $row[0]; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T23:10:05.447

`AS thisisit`在这种情况下，必须使用为您的列设置别名。

因此，您应该使用以下内容：

```
SELECT timestamp AS 'thisisit'
    FROM table
WHERE TIMESTAMPDIFF(MINUTE, timestamp, NOW()) > 10; 
```

# firebase - Firebase - 计算在线用户

> ID：15982215
> 
> 赞同：19
> 
> 时间：2013-04-12T23:04:26.277
> 
> 标签：firebase

我尝试使用[`presence`](https://www.firebase.com/docs/managing-presence.html)它来显示元素中的连接用户总数。我真的不知道在哪里看。我做了类似的事情：

```
var dataUlist = new Firebase('https://<url>.firebaseio.com/.info/connected');
dataUlist.on('value', function(snap) {
    console.log(snap);
}); 
```

尝试看看我是否可以在那里找到任何有用的东西，但是（我有点期待）我无法理解这些数据。

有什么方法可以帮我做我所追求的吗？获取连接用户的总数，例如。在控制台或元素中回显它？或者也许如何获取授权用户和非授权用户的列表？

编辑：我想保持我的英文拼写，我不是美国人。谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-12T23:47:23.083

`.info/connected`只会返回有关当前客户端是否已连接的信息。为了维护存在计数，您需要通过存储每个用户的存在信息并利用`setOnDisconnect()`. 例如：

```
var listRef = new Firebase("https://<url>.firebaseio.com/presence/");
var userRef = listRef.push();

// Add ourselves to presence list when online.
var presenceRef = new Firebase("https://<url>.firebaseio.com/.info/connected");
presenceRef.on("value", function(snap) {
  if (snap.val()) {
    // Remove ourselves when we disconnect.
    userRef.onDisconnect().remove();

    userRef.set(true);
  }
});

// Number of online users is the number of objects in the presence list.
listRef.on("value", function(snap) {
  console.log("# of online users = " + snap.numChildren());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-08T02:45:04.070

这是为 Android 格式化的 Anant 代码

```
public void getDbCount() {

    Firebase listRef = new Firebase("https://<your-firebase-database>.firebaseio.com/presence/");
    final Firebase userRef = listRef.push();

    // Add ourselves to presence list when online.
    Firebase presenceRef = new Firebase("https://<your-firebase-database>.firebaseio.com/.info/connected");

    ValueEventListener myPresence = new ValueEventListener() {
        @Override
        public void onDataChange(DataSnapshot snapshot) {
            // Remove ourselves when we disconnect.
            userRef.onDisconnect().removeValue();
            userRef.setValue(true);
        }

        @Override
        public void onCancelled(FirebaseError firebaseError) {
            Log.e("DBCount", "The read failed: " + firebaseError.getMessage());
        }
    };

    presenceRef.addValueEventListener(myPresence);

    // Number of online users is the number of objects in the presence list.
    ValueEventListener myList = new ValueEventListener() {
        @Override
        public void onDataChange(DataSnapshot snapshot) {
            // Remove ourselves when we disconnect.
            Log.i("DBCount", "# of online users = " + String.valueOf(snapshot.getChildrenCount()));
        }

        @Override
        public void onCancelled(FirebaseError firebaseError) {
            Log.e("DBCount", "The read failed: " + firebaseError.getMessage());
        }
    };

    listRef.addValueEventListener(myList);
} 
```

# version-control - bzr 可以指定主要和次要版本号吗？

> ID：15982226
> 
> 赞同：0
> 
> 时间：2013-04-12T23:05:39.323
> 
> 标签：version-control, bazaar

至少在默认情况下，提交的版本号是单个数字，增量为 1。提交时可以指定版本号为major.minor吗？还是我忽略了另一种机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:12:02.560

分支中的每次提交都会自动增加修订号，因此它们是整数。

当您将另一个分支合并到当前分支时，该分支的修订版将使用点分符号重命名，格式`BASE.BRANCH.REV`为 ，您可以在 Bazaar 项目本身中观察到：

```
bzr log --line -n0 -r6572..6573 lp:bzr 
```

这种虚线表示法与主要-次要版本号无关。您可以在文档中阅读更多相关信息：http: [//doc.bazaar.canonical.com/beta/en/user-guide/zen.html](http://doc.bazaar.canonical.com/beta/en/user-guide/zen.html)

另一方面，您可以为修订号分配标签，这些标签正是为此目的而设计的，用于标记版本号。例如，在我的一个项目中，我有以下标签：

```
$ bzr tags
1.1              159
1.3              188 
```

这意味着我（过去）将标签“1.1”分配给修订版 159，将标签“1.3”分配给修订版 188。“1.1”和“1.3”确实打算作为主要-次要版本号。

标签的工作方式类似于修订的别名。这些命令是等效的：

```
bzr log -r revno:159
bzr log -r tag:1.1 
```

（事实上​​，即使我去掉了`revno:`and`tag:`前缀，Bazaar 也很聪明，可以找出正确的方法）

您可以使用创建标签`bzr tag`，您可以将标签分配给最新修订或任何过去的修订。详情请参阅`bzr tag --help`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:34:14.807

它不是版本号，也不是产品的版本号。这是一个修订号——您可以将其视为对您的项目所做的更改的数量。

# javascript - 如何在javascript中暂停UI线程

> ID：15982228
> 
> 赞同：1
> 
> 时间：2013-04-12T23:06:02.867
> 
> 标签：javascript

我想知道在javascript中暂停UI线程的干净方法是什么？就几秒钟，我有一个很好的理由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:08:13.057

旋转等待。

```
while(Date.now() < some_target_time) {} 
```

享受来自您的用户和其他开发人员的无限仇恨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:27:06.620

正如马特所提到的，“spinwait”几乎是唯一的解决方案。这是一个工作代码示例，将 1000 更改为您希望浏览器无所事事地令人不快地磨掉的毫秒数。

```
for (var wait = + new Date() + 1000; + new Date() < wait;); 
```

# search - 用于在 github 中搜索项目的查询工具

> ID：15982231
> 
> 赞同：2
> 
> 时间：2013-04-12T23:06:24.570
> 
> 标签：search, github

我正在寻找 github 的高级查询工具。github 的高级搜索是不够的，因为它不允许您搜索这样的示例：

给我所有使用库（例如 qunit）并且至少有 100 个已关闭问题的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:30:55.533

这样的高级搜索只能使用[GitHub API](http://developer.github.com/)。

但是，所有[问题 API](http://developer.github.com/v3/issues/)都没有公开*所有*repos 的已关闭问题。
它只查找特定 repo 或特定用户的已关闭问题，这意味着您必须首先列出*所有*repo，然后对每个 repo 进行查询。

所以现在，搜索仍在进行中，并且在 2013 年有了很多改进（请参阅“[在 Github 项目中搜索代码](https://stackoverflow.com/questions/3616221/search-code-inside-a-github-project/3616259#3616259)”），但它还没有达到您所追求的水平。

# html - Twitter Bootstrap .btn 的微调器

> ID：15982233
> 
> 赞同：13
> 
> 时间：2013-04-12T23:06:48.177
> 
> 标签：html, css, twitter-bootstrap, css-transitions

我正在尝试为 Twitter Bootstrap 按钮创建微调器。Spinners 应该指出一些正在进行的工作（即 ajax 请求）。

这是一个小例子：http: [//jsfiddle.net/AndrewDryga/zcX4h/1/](http://jsfiddle.net/AndrewDryga/zcX4h/1/)

HTML（完整的 jsfiddle）：

```
Unknown element (no animation here!):
<p>
  <button class="btn-success has-spinner">
    <span class="spinner"><i class="icon-spin icon-refresh"></i></span>
    Foo
  </button>
</p>

Works when width is defined:
<p>
  <a class="btn btn-success has-spinner">
    <span class="spinner"><i class="icon-spin icon-refresh"></i></span>
    Foo
  </a>
</p> 
```

CSS：

```
.spinner {
  display: inline-block;
  opacity: 0;
  width: 0;

  -webkit-transition: opacity 0.25s, width 0.25s;
  -moz-transition: opacity 0.25s, width 0.25s;
  -o-transition: opacity 0.25s, width 0.25s;
  transition: opacity 0.25s, width 0.25s;
}

/* ... */

.has-spinner.active .spinner {
  opacity: 1;
  width: auto; /* This doesn't work, just fix for unkown width elements */
}

/* ... */

.has-spinner.btn.active .spinner {
    width: 16px;
}

.has-spinner.btn-large.active .spinner {
    width: 19px;
} 
```

交易是css“margin：auto”不会产生预期的动画，所有元素的微调器宽度应该通过css定义。有什么办法可以解决这个问题吗？另外，也许有更好的方法来对齐/显示微调器？

我是否应该使用按钮填充并在按钮宽度不变的情况下进行调整，当显示微调器或改变宽度的按钮可以？（如果生病把它作为片段放在某处）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-13T14:24:37.067

I was able to fix this problem by using max-width istead of width. Also this is pure CSS solution, so it can be used pretty much everywhere (for example show X mark on tags, when user hover mouse over it, etc).

Demo: [http://jsfiddle.net/AndrewDryga/GY6LC/](http://jsfiddle.net/AndrewDryga/GY6LC/)

New CSS:

```
.spinner {
  display: inline-block;
  opacity: 0;
  max-width: 0;

  -webkit-transition: opacity 0.25s, max-width 0.45s; 
  -moz-transition: opacity 0.25s, max-width 0.45s;
  -o-transition: opacity 0.25s, max-width 0.45s;
  transition: opacity 0.25s, max-width 0.45s; /* Duration fixed since we animate additional hidden width */
}

/* ... */

.has-spinner.active .spinner {
  opacity: 1;
  max-width: 50px; /* More than it will ever come, notice that this affects on animation duration */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-03T11:16:36.563

我已经更新了[@andrew-dryga](https://stackoverflow.com/a/15988830/4647743)解决方案以使用当前最新的 Bootstrap (3.3.5)、font-awesome (4.3.0)、jQuery (2.1.3) 并稍微修改了它。

这里是：

```
 <button class="btn btn-success has-spinner">
    <i class="fa fa-spinner fa-spin"></i>
    Foo
 </button>

 $('a.has-spinner, button.has-spinner').click(function() {
     $(this).toggleClass('active');
 }); 
```

此外，您需要适当的 CSS 修改 ( [JSFiddle](http://jsfiddle.net/oshybystyi/v04ag5ch/4/) )。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T14:41:35.660

我发现您的代码非常有用。我知道已经一年了，但我已经改进了代码。我不喜欢手动将 span 和 i 标签添加到每个元素。我调整了 JavaScript 代码以自动添加这些标签。因此，将微调器添加到按钮/链接所需要做的就是向其添加 has-spinner 类并为其提供 data-spinner="[left|right]" 标记（确定按钮文本的哪一侧是微调器应放置）。

这是修改后的 JavaScript：

```
$(function(){

var spinnerHTML = "<span class='spinner'><i class='fa fa-refresh fa-spin'></i></span>",
    spinnerObjects = $(".has-spinner");

spinnerObjects.filter("[data-spinner=left]").prepend(spinnerHTML + "&nbsp;")
spinnerObjects.filter("[data-spinner=right]").append("&nbsp;" + spinnerHTML)
spinnerObjects.click(function() {
    $(this).toggleClass('active');
}); 
```

});

这是指向所有更改（CSS，HTML）的小提琴的链接：

[http://jsfiddle.net/codyschouten/QKefn/2/](http://jsfiddle.net/codyschouten/QKefn/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-25T04:07:12.733

对我有用的非常简单的解决方案是将元素从

```
<i></i>  
with
<em></em> 
```

这是我做的唯一改变。

# model-view-controller - MVC Multi Tennat 应用程序如何添加子站点

> ID：15982235
> 
> 赞同：0
> 
> 时间：2013-04-12T23:06:57.807
> 
> 标签：model-view-controller, multi-tenant

我有一个内部网应用程序，其 URL 如下

http:\\ServerName]\RunLog\

我正在添加另一个部门/租户/用户组，它们将使用相同的应用程序实例和相同的数据库。他们的数据将不同于现有用户。我打算在每个表中添加新的列外键来标识特定的租户。我对用户进行 Windows 身份验证。我认为对应用程序的访问如下

http:\[服务器名称]\Platform1\RunLog

http:\[服务器名称]\Platform2\RunLog

那么对于上面的 URL，我该如何在应用程序中实现呢？我知道如何在 SQL 服务器中更改表、更新实体、更新控制器中的 linq 代码以提取相应的租户数据。任何让我开始的帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T10:59:36.270

请注意，正如您在帖子中给出的那样，可以根据他们的 URL 来识别租户。包含租户详细信息的表也将包含他们的 url。因此，您将根据 URL 识别租户。识别出租户后，我们可以使用找到的租户 id/租户代码对用户进行身份验证，使用相同的租户 id/租户代码获取租户的配置或设置。

我希望您可以将应用程序的所有其他实体都包含一个名为 的列`TenantId`。这将帮助您根据租户获取数据。您唯一的更改将在数据访问层中，您将在其中过滤从数据库中检索的数据。

如果您对此实现的其他细节有任何其他说明，请告诉我。

# blockui - blockUI - 更改字体系列并删除覆盖上的填充区域？

> ID：15982239
> 
> 赞同：1
> 
> 时间：2013-04-12T23:07:13.630
> 
> 标签：blockui, jquery-blockui

使用 blockUI。我查看了文档中的选项，插件本身，甚至在stackoverflow上，我找不到为此更改字体系列声明的位置。它似乎默认使用 Times。此外，字体显示在填充区域上。有没有办法可以删除填充区域部分，我只想要变暗屏幕顶部的文本。谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-13T06:10:03.373

为此使用消息选项。

在此处记录[http://jquery.malsup.com/block/#options](http://jquery.malsup.com/block/#options)

# c# - 设置默认值内联添加 Jqgrid

> ID：15982243
> 
> 赞同：2
> 
> 时间：2013-04-12T23:07:32.850
> 
> 标签：c#, asp.net-mvc-3, jqgrid, jqgrid-inlinenav

目前我在一个系统中有一个要求，我需要从输入的最后一行重复大部分数据。实际上这是我的网格：

```
$('#list').jqGrid({
        colNames: ['VendedorId', 'Vendedor', 'Especie', 'Cabezas', 'Kilos', 'Precio', 'Guías Venta', 'Vencimiento'],
        colModel: [
            { hidden: true, name: 'VendedorId' },
            { editable: true, width: 160, edittype: 'select', editoptions: { dataUrl: '/Clientes/CmbClientes' }, editrules: { required: true }, name: 'Vendedor' },
            { editable: true, width: 70, edittype: 'select', editoptions: { dataUrl: '/Especies/CmbEspecie' }, editrules: { required: true }, name: 'Especie' },
            { align: 'right', width: 50, editable: true, editoptions: { size: 3, maxlength: 3 }, editrules: { number: true }, formatter: 'number', formatoptions: { decimalPlaces: 0 }, name: 'Cabezas' },
            { align: 'right', width: 50, editable: true, editrules: { number: true }, formatter: 'number', formatoptions: { decimalPlaces: 0 }, name: 'Kilos' },
            { align: 'right', width: 50, editable: true, editrules: { number: true, required: true }, formatter: 'currency', formatoptions: { prefix: '$',decimalPlaces: 2  }, name: 'Precio' },
            { editable: true, width: 50, editoptions: { maxlength: 20 }, name: 'GuiasVenta' },
            { align: 'right', width: 70, editable: true, editoptions: { size: 3, maxlength: 3 }, editrules: { number: true, required: true }, formatter: 'number', formatoptions: { decimalPlaces: 0 }, name: 'Vencimiento' }
        ],
        url: '@Url.Action("ListVendedores")',
        datatype: 'json',
        editurl: '@Url.Action("SaveVendedor")',
        mtype: 'POST',
        pager: '#vendedoresPager',
        prmNames: { id: 'RemateId' },
        rowList: [5, 10, 15, 20],
        sortname: 'FeriaId',
        viewrecords: true,
        width: 850
    }).jqGrid('navGrid', '#vendedoresPager', { add: false, edit: false, del:true ), search: false },{},{},{ url: '/Remates/BorrarVendedor' }).
        jqGrid('inlineNav', '#vendedoresPager',
            {
                add : true,
                edit : true,
                save : true,
                addParams: {
                    addRowParams: {
                        position: "afterSelected",
                        keys: true,
                        extraparam: {
                            ...
                        }
                    }
                },
                editParams: {
                    keys: true,
                    extraparam: {
                        ...
                    }
                }
            }); 
```

添加第一行时没有默认数据，但随后字段 Vendor、Especie、Guías Venta 和 Vencimiento 应重复最后输入的数据。

在这种情况下，我设想了两种可能的解决方案，一种是使用事件 jqGridInlineEditRow，另一种是使用自动完成。已阅读[有关 qGridInlineEditRow 的此问题](https://stackoverflow.com/questions/8872863/how-to-set-default-values-if-row-is-added-using-inline-add-button-in-jqgrid)。但在这种情况下，我可以从网格的最后一行获取数据，以及它应该如何将数据加载到新行中。并阅读这个[关于自动完成](https://stackoverflow.com/questions/12790123/jqgrid-inline-edit-odd-behavior-with-an-autocomplete-column)的问题。

也许还有其他解决方案可以读取以获得更好的解决方案近似值。

任何人都可以帮忙吗？

**2013 年 15 月 4 日更新**

我将添加按钮替换为自定义按钮，这是代码：

```
 $("#Agregar").click(function () {
    var parameters =
        {
            initdata: {},
            position: "first",
            useDefValues: true,
            useFormatter: false,
            addRowParams: {
                keys: true,
                extraparam: {
                    ...
                },
                aftersavefunc: function (rowid) {
                    var grid = jQuery('#vendedores');
                    lastSavedAddData = grid.jqGrid("getRowData", rowid);
                },
                oneditfunc: function (rowid) {
                    var name;
                    var grid = jQuery('#vendedores');
                    for (name in lastSavedAddData) {
                        if (lastSavedAddData.hasOwnProperty(name)) {
                            $('#' + rowid +"_"+  name).val(lastSavedAddData[name]);
                        }
                    }
                }
            }
        };
    jQuery("#vendedores").jqGrid('addRow', parameters);
}); 
```

但这仅适用于文本框，但不适用于组合

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T13:42:24.023

如果我正确理解您的问题，那么 jQuery UI 自动完成的使用独立于在开始下一个喜欢添加期间最后添加的行的输入字段的初始填充。

在我看来，您可以保存在`aftersavefunc`定义的回调内最后添加的行中保存的数据`addRowParams`（或者使用`jqGridInlineAfterSaveRow`事件）。您可以使用`oneditfunc`在新的like 中设置最后输入的值。例如，您可以使用

```
addRowParams: {
    position: "afterSelected",
    keys: true,
    extraparam: {
        ...
    },
    aftersavefunc: function (rowid) {
        lastSavedAddData = $(this).jqGrid("getRowData", rowid);
    },
    oneditfunc: function (rowid) {
        var name;
        for (name in lastSavedAddData) {
            if (lastSavedAddData.hasOwnProperty(name)) {
                $("#" + $.jgrid.jqID(rowid + "_" + name)).val(lastSavedAddData[name]);
            }
        }
    }
} 
```

where`lastSavedAddData`应该在一些外部范围内定义。它不是经过测试的代码。我只是想展示主要思想。您可以扩展代码`oneditfunc`以支持您在编辑行中使用的更多不同控件。

# database - Web 应用程序、用户和权限（以及安全性）

> ID：15982244
> 
> 赞同：3
> 
> 时间：2013-04-12T23:07:37.637
> 
> 标签：database, security, web-applications, permissions

我正在设计一个 Web 应用程序，这是我的第一个严肃的 Web 应用程序。它会有一些具有不同权限的用户（RBAC/ACL）。可以想象，我有点担心权限管理和安全性

这就是为什么我想知道为什么在 Web 应用程序中，用户通常存储在数据库中而不是数据库用户（例如 Joomla！）。我觉得这是一种不安全的身份验证方法：数据库连接总是使用对 db 具有完全或非常高权限的 db 用户来完成，所以可以做和不能做的事情由 Web 应用程序通过编写 RBAC/ACL 授权来管理层（所以我在数据库中有一堆表，其中包含用户、权限级别等）。

从概念的角度来看，我认为更好的方法是使用更多的数据库用户（每个权限级别至少一个，或者每个 Web 应用程序的用户更好）以保护数据库中的数据（如果我存在安全漏洞并且攻击者发现了数据库的连接信息，他的权限将受到被黑用户帐户权限的限制）。

我看到这种方法实施起来相当笨拙，但另一方面它更安全。

为什么不使用这种方法？这只是为了方便起见，还是在安全性和易于编码之间寻求正确的权衡？或者，也许我只是把两个不同的东西（数据库和应用程序用户）混在一起，这意味着两个不同的范围。

抱歉，如果这个问题很愚蠢，但是在学习时您会了解数据库用户和权限，并且当您看到真正的软件时（显然）是以不同的方式完成的。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:28:39.430

这种方法听起来确实更安全，但它是实现的噩梦，当您开始考虑扩展到一百万以上用户时更是如此：-O

最好的方法（从安全角度和可行性角度来看）是为数据库设置两个用户帐户。一种具有只读权限，另一种具有读/写权限。 *仅当您需要添加用户或更改密码时才使用读/写凭据。* 不要对这些凭据感到愚蠢。永远不要让他们以客户端代码或注释的形式进入客户端（我在 HTML 注释中看到了 DB 凭据 *sigh*）。

如果您的应用程序/用户群非常小并且总是如此，那么也许您可以为每个用户帐户分配一个沙盒数据库帐户。那会更安全。但是，我永远不会假设您的用户群总是很小。你永远不知道未来会带来什么，而不得不重新实现它会很*糟糕。*

# tsql - TSQL 位运算：如何找出常见的值分组？

> ID：15982246
> 
> 赞同：0
> 
> 时间：2013-04-12T23:08:01.810
> 
> 标签：tsql, statistics, bitwise-operators

背景：我正在考虑整合应用程序的安全角色。有 20 个角色可以应用于五个访问级别（如区、县、州）中的一个或多个。大多数用户在每个访问级别都有多个角色，因此我想按访问级别获取有关用户最常见分组的统计信息。

**编辑：**业务用户对进入系统的人员的工作角色和使用系统的人员的安全角色感到困惑。工作角色和安全角色之间存在直接映射。企业所有者发现他们不想管理可能分配给用户的角色数量的安全性。

我为角色创建了等效的标志枚举（Id 是角色的主键，标志是我的 flay 值）：

```
DECLARE @flags table(Id int,Flag int);
insert into @flags
values (1 , 1),
(2 , 2), 
(4 , 4),  
(5 , 8),  
(6 , 16), 
(7 , 32), 
(8 , 64), 
(9 , 128), 
(10 , 256), 
(11 , 512), 
(12 , 1024), 
(13 , 2048), 
(14 , 4096), 
(15 , 8192), 
(16 , 16384), 
(17 , 32768), 
(18 , 65536), 
(19 , 131072),
(20 , 262144),
(21 , 524288) 
```

我已经查询了系统中按访问级别分组的每个用户的用户角色总和，并想查询用户群体最常见的角色分组是什么，这样我就可以确保我不会新角色设置太笼统。

```
UserName        Roles   AccessLevel
User1@test.edu  8192    County
User1@test.edu  262400  District 
```

任何指向正确方向的指针都会很好。我不是很精通统计，所以如果我使用的整个方法不好，请告诉我。

# symfony - 将变量传递到模板名称中包含变量的包含的树枝模板中

> ID：15982247
> 
> 赞同：24
> 
> 时间：2013-04-12T23:08:02.483
> 
> 标签：symfony, twig

是否可以将变量传递到包含的树枝模板中，其中模板名称本身就是一个变量？

```
{% include('MyMainBundle:MyEntity:' ~ entity.templateName) %} 
```

有效，但是当我尝试将变量也传递到此模板时，twig 会引发语法错误。

```
{% include('MyMainBundle:MyEntity:' ~ entity.templateName, {'name' : myName} ) %} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-12T23:25:30.017

我明白我做错了什么。我结合了两个不同版本的 include，一个使用 {{，另一个使用 {%，因为 symfony 和 twig 文档显示了包含模板的不同方式。这就像从我的初始代码中删除括号并在定义参数之前插入一个 with 一样简单。

[您可以根据http://symfony.com/doc/current/book/templating.html#include-other-templates](http://symfony.com/doc/current/book/templating.html#including-other-templates)包含这样的模板

```
{{ include('AcmeArticleBundle:Article:articleDetails.html.twig', {'article': article}) }} 
```

或者像这样每[http://twig.sensiolabs.org/doc/tags/include.html](http://twig.sensiolabs.org/doc/tags/include.html)

```
{% include 'template.html' with {'foo': 'bar'} %} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-17T10:28:18.110

对于作为变量的模板名称，我必须使用以下格式：

```
{% include 'AcmeCalendarBundle:Default:cal_event_' ~ day.item.type ~ '.html.twig' with {'item': day.item} %} 
```

使用

```
{{ include 'AcmeCalendarBundle:Default:cal_event_' ~ day.item.type ~ '.html.twig', {'item': day.item} }} 
```

不工作。

# database - 在 Cygwin 上安装 PostgreSQL 作为服务

> ID：15982248
> 
> 赞同：1
> 
> 时间：2013-04-12T23:08:05.037
> 
> 标签：database, postgresql, cygwin, database-connection, daemon

我是一个新手，试图在 Cygwin 上安装 Postgresql 作为服务。我一直在遵循此 URL 中列出的步骤：[http ://www.smartpixie.com/wiki/Tech/CygwinPostgreSQL.twiki.html](http://www.smartpixie.com/wiki/Tech/CygwinPostgreSQL.twiki.html)

一切正常，直到我必须为自己创建一个用户和一个数据库的步骤，在我的 /usr/sbin 目录中，“createuser”文件存在，但“createdb”文件不存在。因此，按照这些步骤的建议，我尝试以 SYSTEM 用户身份连接到数据库，然后稍后创建数据库/用户角色。但是，每当我尝试连接到数据库时都会遇到此错误。

```
$ psql -U SYSTEM postgres
psql: could not connect to server: No such file or directory
        Is the server running locally and accepting
        connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T04:54:36.100

首先，我建议不要在 Cygwin 上运行 PostgreSQL。我看不到真正的用例，因为现在有一个本机端口，而 Cygwin 最终为 IPC 调用之类的事情增加了相当多的开销。您不会从中获得良好的性能，而且我实际上无法想到 cygwin 比 mingw 更适合 c 语言存储过程的任何情况。因此，请质疑这是否真的是一项要求，并首先探索其他选择。

现在如果你仍然需要这样做，这个过程并不容易，但记录在[http://www.postgresql.org/message-id/3DC76EA4.7090503@usa.net](http://www.postgresql.org/message-id/3DC76EA4.7090503@usa.net)

基本上你必须先安装 ipc 服务，然后使用 cygrunsrv 为依赖它的 PostgreSQL 创建一个 Windows 服务。然后你可以运行`net start ipc-daemon`然后`net start postgresql`

# sql - 使用 AS 的 SQL 查询

> ID：15982255
> 
> 赞同：0
> 
> 时间：2013-04-12T23:08:32.323
> 
> 标签：sql, sqlite

我正在尝试创建一个处理两个表的查询：

表：地区

```
Column Name     Type      Constraint
REGION_Cd       Number    Primary Key
REGION_Desc     String 
```

表：统计

```
Column Name     Type      Constraint
AGE             Number    Primary Key
REGION          Number    Foreign Key to REGION (REGION_Cd)
POPULATION      Number 
```

我如何创建一个查询，以便它找到两个年龄组（0-15、16-30）的人口并以以下格式显示：

```
Region_Desc    AgeGroup     Population
South          0‐15         11253
South          16‐30       235234 
```

由于 AgeGroup 列实际上不是表中的列，我应该使用 AS 语句，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:17:09.947

也许像......但它假设你想要年龄组/地区的人口总和。根据人口在数据库中的工作方式，这可能正确也可能不正确

```
Select Region_Desc, case when age between 0 and 15 then '0-15' 
  when age between 16 and 30 then '16-30' 
  else 'over 30' end as AgeGroup, 
sum(Population) as Population
FROM Region INNER JOIN STATS on region_Cd = Region
GROUP BY Region_DESC, AgeGroup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:19:26.707

```
SELECT Region_DESC, AgeGroup, Population
FROM
(select REGION, sum(POPULATION) as Population, '0-15' AS AgeGroup
from STATS
Where Age between 0 and 15
group by REGION
union
Select REGION, SUM(POPULATION) as Population, '16-30' As AgeGroup
from STATS
Where Age between 16 and 30
group by REGION) s
join REGION on REGION_CD = REGION 
```

# jquery-mobile - 如果我使用带有 data-ajax=true 的链接进入表单页面，jQuery 移动表单验证不起作用

> ID：15982257
> 
> 赞同：0
> 
> 时间：2013-04-12T23:08:41.027
> 
> 标签：jquery-mobile

我正在学习 jQuery Mobile 构建最简单的单页模板应用程序：主页和一个小表单。在此表单中，我有一个需要的文本字段。

这是我到表单页面的链接：

```
<a href="form.html">Form</a> 
```

在表单页面中，我拥有所有关键元素：jquery 验证插件（当然还有之前的 jquery）、验证脚本、必填字段和提交按钮：

```
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script>
$(document).ready(function(){
$("#field").validate();
});
</script>
<input type="text" id="field" name="field" class="required" required>
<input id="submit" class="submit" type="submit" value="Inserisci" data-theme="a"/> 
```

如果我使用普通链接进入表单页面，则不会发生验证（简单的页面重新加载，因为我的表单操作尚未设置）。如果我将表单链接更改为：

```
<a href="form.html" data-ajax=false>Form</a> 
```

验证有效，并告诉我将我的数据插入必填字段。但是，即使插入数据，它也会不断要求我插入而不提交表单。

我真的无法理解我做错了什么......

在第一个建议之后，我一直在阅读，并用这个例子更新了我的代码：http: [//jquery.bassistance.de/validate/demo/jquerymobile.html](http://jquery.bassistance.de/validate/demo/jquerymobile.html)现在的问题是我不得不刷新表单页面以查看验证工作。如果我在引导我进入表单的链接上使用 data-ajax=false ，那么验证总是完美的。

**更新：** 为了确保一切都尽可能“普通”，我从 jquery 文档中获取了主模板作为起始页面，即我的 index.html：

```
<!DOCTYPE html>
<html>
<head>
        <title>My Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>
</head>
        <body>
                <div data-role="page" id="cruscotto">
                        <div data-role="header" id="header">
                                <h1>page</h1>
                        </div><!-- /header -->
                        <div data-role="content">
                                <ul data-role="listview" data-inset="true" data-theme="a">
                                        <li>
                                                <a href="inserisci_clienti.html">Inserimento clienti</a>
                                        </li>
                                        <li>
                                                <a href="ricerca_clienti.html">Ricerca clienti</a>
                                        </li>
                                        <li>
                                                <a href="about.html">Gestione pagamenti</a>
                                        </li>
                                </ul>
                        </div><!-- /content -->
                          <div data-role="footer" data-theme="a">
            <div class="ui-bar">
             <a href="" data-role="button" data-icon="arrow-u" data-theme="a" style="float:right;" class="returnTopAction">Torna su</a>
           </div>
          </div>
                </div>
        </body>
</html> 
```

然后我从教程中得到了一个完美的工作表单，我的 inserisci_clienti.html 页面：

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0-beta.1/jquery.mobile-1.3.0-beta.1.min.js"></script>

  <style type='text/css'>
    label.error {
    color: red;
    font-size: 16px;
    font-weight: normal;
    line-height: 1.4;
    margin-top: 0.5em;
    width: 100%;
    float: none;
}

@media screen and (orientation: portrait){
    label.error { margin-left: 0; display: block; }
}

@media screen and (orientation: landscape){
    label.error { display: inline-block; margin-left: 22%; }
}

em { color: red; font-weight: bold; padding-right: .25em; }

  </style>

<script type='text/javascript'>//<![CDATA[
$(window).load(function(){
$( "#frmLogin" ).validate({
    submitHandler: function( form ) {
        alert( "Call Login Action" );
    }
});

});//]]>

</script>

</head>
<body>
  <meta name="viewport" content="width=device-width, initial-scale=1">

<div data-role="page" id="login">

    <div data-role="header">
        <h1>Acme Corporation</h1>
    </div>

    <div data-role="content">

        <form id="frmLogin" class="validate">
            <div data-role="fieldcontain">
                <label for="email"><em>* </em> Email: </label>
                <input type="text" id="email" name="email"
                    class="required email" />
            </div>

            <div data-role="fieldcontain">
                <label for="password"><em>* </em>Password: </label>
                <input type="password" id="password" name="password"
                    class="required" />
            </div>
            <div class="ui-body ui-body-b">
                <button class="btnLogin" type="submit"
                    data-theme="a">Login</button>
            </div>
        </form>
    </div>
</div>
</body>
</html> 
```

不用说，*只有*当我在加载表单页面后重新加载表单页面或者我将 data-ajax=false OR rel="external" 放在导致表单的链接上（丢失 jQuery 动画）时它才有效，我快疯了:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T09:40:50.843

这是在 jQuery Mobile 中正确使用 jQuery.validate。

```
$(document).on('pageinit', function () {
 $(form).validate({ // or form #id
  rules: {
   field: "required" // field name not #id and has class="required
   },
   submitHandler: function (form) {
    alert('data submitted');
    return false;
   }
 });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:41:45.403

验证应应用于不在输入中的**表单。请尝试以下操作：**

```
<script type="text/javascript" src="js/jquery.validate.min.js"></script>
<script>
$(document).ready(function(){
$("#myForm").validate(); // applying the validation on myForm
});
</script>
<form id="myForm">
<input type="text" id="field" name="field" class="required" required>
<input id="submit" class="submit" type="submit" value="Inserisci" data-theme="a"/>
<form> 
```

更多信息：[http ://docs.jquery.com/Plugins/validation](http://docs.jquery.com/Plugins/validation)

# c# - ANTLR 语法的运行时“智能感知”

> ID：15982262
> 
> 赞同：1
> 
> 时间：2013-04-12T23:09:24.780
> 
> 标签：c#, wpf, autocomplete, antlr

我今天大部分时间都在尝试为 SQL 'where' 子句创建语法。然后我在这里找到了一篇有用的文章[Search for Oracle SQL grammar](https://stackoverflow.com/questions/11346235/search-for-oracle-sql-grammar)应该可以解决我的这部分任务。

所以这就引出了我的问题——

给定一个 ANTLR 语法和一个用户正在输入的 WPF 文本框，是否有可能有一个类似 VS 的 Intellisense 来“提示”用户可以输入的可能值，而不会“破坏”当前输入的表达式?

一个非常简单的例子是，如果我将一个语法定义为 '[columnName]' 运算符值，一旦用户键入列名的最后一个字符和一个空格，就会弹出语法中定义的运算符列表。

对不起，如果这令人困惑。谢谢你。

# ios6 - 获取触摸对象的标签号

> ID：15982265
> 
> 赞同：0
> 
> 时间：2013-04-12T23:09:38.793
> 
> 标签：ios6, tags, addsubview

我有一个按钮。每次用户点击它时，应用程序都会实例化**UIImageView**（imageview），为其标签分配一个唯一编号。

```
- (IBAction)buttonClicked:(id)sender {
    imageview = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 300, 240)];
    NSUInteger currentag = [self UniqueNum]; // Assigning a unique number to the tag variable
    [self.view addSubview:imageview];
    imageview.backgroundColor = [UIColor blueColor];
    imageview.userInteractionEnabled = YES;
    imageview.tag = currentag;
} 
```

我的目标是获取用户触摸的 UIImageView 副本的标签号。使用下面的代码，我实际得到的是应用程序最后创建的 UIImageView 副本的标签号。如何改进它以便应用程序指向被触摸对象的标签号？

```
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
    UITouch *touch = [[event allTouches] anyObject];
    if([touch view] == imageview) {
        NSLog(@"Tag: %i",imageview.tag);
    }    
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:24:57.410

如果您需要交互，我建议在这里使用带有自定义图像的 UIButtons 而不是 UIImageViews。

添加按钮时添加：

```
 [imageview addTarget:self action:@selector(someMethod:) forControlEvents:UIControlEventAllTouchEvents]; 
```

然后只需将`sender`in `someMethod`（您的声明）转换为 UIView 即可获取其标签。

顺便说一句， someMethod 的方法签名是这样的：

```
-(void) someMethod:(id)sender 
```

您还可以选择添加一个事件参数，但这里似乎不需要。

# bash - Bash 脚本 - 更改为 root 然后退出 root

> ID：15982273
> 
> 赞同：0
> 
> 时间：2013-04-12T23:10:31.157
> 
> 标签：bash, root, sudo

如果我正在运行 bash 脚本，有没有办法切换到 root 用户，处理命令，然后退出 root 模式？例如，我想在 bash 脚本中间包含这些命令：

```
sudo su
umount /home/user/myMount
exit 
```

问题是在第一行运行后，shell 进入 root 模式，但随后停止执行。当然，此时我可以创建并执行第二个脚本，但这违背了编写脚本的目的，因为我可以自己键入命令。

另一个明显的想法是从一开始就使用 root 用户运行脚本。但是，如果我是 root 用户，此脚本中的其他一些命令会失败，因为它们会暴露出具有这么多访问权限的安全漏洞。

所以，我需要一种进入根目录然后退出的方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:15:58.147

## 指定命令

*sudo*命令可以采用命令和可选参数。例如：

```
sudo umount /home/user/myMount 
```

这将仅以 root 身份运行指定的命令及其参数。如果要以其他用户身份运行命令，可以使用 -u 标志。例如，要以 Fred身份运行*umount ，您可以使用：*

```
sudo -u fred umount /home/user/myMount 
```

虽然肯定有其他方法可以解决这个问题，但这是迄今为止最简单和最常见的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:13:59.590

为了以`umount`root 身份执行，请使用

```
sudo umount /home/user/myMount 
```

# smalltalk - pharo - 服务器启动时运行代码

> ID：15982274
> 
> 赞同：3
> 
> 时间：2013-04-12T23:10:38.153
> 
> 标签：smalltalk, seaside

我正在使用 ZnZincServerAdapter 并有一个 Web 服务器。我现在想确保当我启动这个服务器时应该有一段代码被执行。如何才能做到这一点 ？

基本上我在 smalltalk 中有一个网络应用程序，所以当我转到那个 URL 时，我希望在我启动服务器时而不是在我加载页面时执行之前的繁重代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T11:45:30.490

您可以从图像中或启动它时执行此操作。在图片中看看

> Smalltalk>>#addToStartUpList:

这注册了一个将在图像启动时执行的类。您需要在您的类中实现方法 startUp: 和 shutdown:。这些将在图像的开始/停止时被调用。

或者您可以在启动映像时执行此操作。如果您为作为文件的图像提供参数（需要是第一个参数）（需要绝对路径），图像将读取文件并执行它

# php - 多个相互依赖的 SQL 查询

> ID：15982277
> 
> 赞同：0
> 
> 时间：2013-04-12T23:10:50.717
> 
> 标签：php, mysql

我正在尝试运行多个相互依赖的 SQL 查询。

我现在拥有的东西不起作用，所以我将展示我现在拥有的东西，并解释它需要做什么。

```
SET @sub_cat_id = SELECT MAX(category_id) FROM exp_br_product_category WHERE product_id = '1234';
SET @prim_cat_id = SELECT parent_id FROM exp_br_category WHERE category_id = @sub_cat_id;
SET @prim_cat_title = SELECT url_title FROM exp_br_category WHERE category_id = @prim_cat_id; 
SET @sub_cat_title = SELECT url_title FROM exp_br_category WHERE category_id = @sub_cat_id;
$title1 = SELECT @prim_cat_title;
$title2 = SELECT @sub_cat_title; 
```

预期的输出应该是 $title1 = maincat 和 $title2 = subcat。这样我们就可以从这两个最终变量构建一个 URL。

我研究过stackoverflow，但似乎找不到任何与我正在做的事情接近的东西。有人可以帮我制作一个可以正常工作的查询吗？

在此先感谢您的帮助！

**编辑**

这两个表是 exp_br_product_category 和 exp_br_category，它存储有关产品及其各自类别的信息和 exp_br_category，它存储来自站点的所有类别信息（包括类别的父 ID 和 url 标题）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:58:34.053

这可能是通过在查询中进行连接来检索数据的更好方法，即在单个查询中连接多个表：

```
SELECT
    prim_cat.url_title as prim_cat_title, sub_cat.url_title as sub_cat_title
FROM
    exp_br_product_category prod_cat,
    exp_br_category prim_cat,
    exp_br_category sub_cat
WHERE
    prod_cat.product_id = 1234 and
    prod_cat.category_id = sub_cat.category_id and
    prim_cat.category_id = sub_cat.parent_id
ORDER BY
    prod_cat.category_id desc
LIMIT 1 
```

（我没有使用 max() 聚合函数，而是按降序对结果进行了排序，并将查询限制为一个应该得到相同结果的结果。）

也许您可以[在此处](http://www.sitepoint.com/understanding-sql-joins-mysql-database/)或[此处](https://stackoverflow.com/questions/6294778/mysql-quick-breakdown-of-the-types-of-joins)阅读有关连接的内容。

但是，无论查询是如何形成的，它都不应该是 500 错误的原因。这很可能是网络服务器配置错误，也可能是您的`.htaccess`文件中的错误，或者不太可能是特定的 PHP 和网络服务器配置，只是您的 PHP 文件中的语法错误。

# php - 带有 strpos 的 URL 的 if / 和语句

> ID：15982279
> 
> 赞同：0
> 
> 时间：2013-04-12T23:11:02.563
> 
> 标签：php, strpos

我有以下三个可能的网址..

*   www.mydomain.com/445/loggedin/?status=empty
*   www.mydomain.com/445/loggedin/?status=complete
*   www.mydomain.com/445/loggedin/

www.mydomain.com/445 部分是动态生成的，并且每次都不同，所以我无法进行完全匹配，我该如何检测以下内容......

*   如果 $url 包含登录但不包含 /?status=empty 或 /?status=complete

我尝试的一切都失败了，因为无论如何它总是会检测到登录的部分..

```
if(strpos($referrer, '?status=empty')) {
echo 'The status is empty';
}
elseif(strpos($referrer, '?status=complete')) {
echo 'The status is complete';
}
elseif(strpos($referrer, '/loggedin/')) {
echo 'The status is loggedin';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:36:06.220

将 URL 分割成段

```
$path = explode('/',$referrer);
$path = array_slice($path,1); 
```

然后只需在该数组上使用您的逻辑，您包含的第一个 URL 将返回：

```
Array ( [0] => 445 [1] => loggedin [2] => ?status=empty ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:45:14.063

你可以这样做：

```
$referrer = 'www.mydomain.com/445/loggedin/?status=empty';

// turn the referrer into an array, delimited by the /
$url = explode('/', $referrer);

// the statuses we check against as an array
$statuses = array('?status=complete', '?status=empty');

// If "loggedin" is found in the url, and count the array_intersect matches, if the matches = 0, none of the statuses you specified where found
if( in_array('loggedin', $url) && count(array_intersect($url, $statuses)) == 0 )
{
    echo 'The user is logged in';
}
// if the complete status exists in the url
else if( in_array('?status=complete', $url) )
{
    echo 'The status is complete';
}
// if the empty status exists in the url
else if( in_array('?status=empty', $url) )
{
    echo 'The status is empty';
} 
```

推荐看看[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)，挺好用的。

希望它有所帮助，不确定这是否是最好的方法，但可能会激发您的想象力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:09:21.610

Strpos 可能不是您想要使用的。你可以用 stristr 做到这一点：

```
 if($test_str = stristr($referrer, '/loggedin/')) 
    {
        if(stristr($test_str, '?status=empty')) 
        {
            echo 'empty';
        }
        elseif (stristr($test_str, '?status=complete')) 
        {
            echo 'complete';
        } else {
            echo 'logged in';
        }
    } 
```

但是使用正则表达式可能更容易/更好：

```
if(preg_match('/\/loggedin\/(\?status=(.+))?$/', $referrer, $match)) 
{
    if(count($match)==2) echo "The status is ".$match[2];
    else echo "The status is logged in";
} 
```

# ruby - 如何检查 Ruby 文件是否为空？

> ID：15982281
> 
> 赞同：38
> 
> 时间：2013-04-12T23:11:27.157
> 
> 标签：ruby

例如，我有一个文本文件。在 Ruby 中检查文件是否为空的最佳方法是什么？ `File.size('test.rb') == 0`看起来很丑。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-04-12T23:14:05.067

您可以使用以下[`zero?`](http://ruby-doc.org/core-2.0/File.html#method-c-zero-3F)方法：

```
File.zero?("test.rb") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-16T17:50:21.563

`File.size?('test.rb')`评估`nil`文件是否为空`or`，它不存在。 `File.zero?('test.rb')`如果文件为空，则返回 true，但如果找不到文件，则返回 false。根据您的特定需求，您应该小心使用正确的方法。

作为主题创建者问题中的一个示例，他们特别提出了“在 Ruby 中检查文件是否为空的最佳方法是什么？” 接受的答案正确执行此操作，`No such file or directory`如果文件不存在，将引发错误消息。

在某些情况下，我们可能会认为缺少文件与空文件“等价”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-27T11:59:22.473

从 Ruby 2.4.0 开始，还有[File.empty？](https://ruby-doc.org/core-2.4.0/File.html#method-c-empty-3F).

（请注意，`false`如果您将目录传递给它，它总是返回，无论该目录是否为空：`File.empty?('/') # => false`. 所以使用[Dir.empty?](https://ruby-doc.org/core-2.4.0/Dir.html#method-c-empty-3F)代替，或[Pathname#empty?](https://ruby-doc.org/stdlib-2.4.0/libdoc/pathname/rdoc/Pathname.html#method-i-empty-3F)对文件和目录都有效。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-12T23:17:33.983

一种不同的方法是遍历每一行并为每次迭代做一些事情。0 行 = 0 次迭代 = 不需要额外的代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-02T14:06:25.283

我认为应该像这样检查：

```
def file_empty?(file_path) 
  !(File.file?(file_path) && !File.zero?(file_path))
end 
```

所以我们不需要担心文件是否存在。

File.zero?('test.rb') 如果文件不存在则返回 false

# javascript - 包含 JS 文件时声明 MIME 类型是否重要？

> ID：15982289
> 
> 赞同：5
> 
> 时间：2013-04-12T23:12:18.427
> 
> 标签：javascript, html, dom, mime

我发现自己包含了越来越多来自 CDN 网站等的外部 JS 文件。当您复制带有标签的 HTML 代码时，我总是看到有些网站包含 MIME 类型，`<script>`而有些则没有。包含 MIME 类型的重要性是什么？是否存在不支持没有 MIME 类型的脚本的浏览器？

此外，我听说 JavaScript 的“官方”MIME 类型是`application/javascript`，但似乎每个人都使用`text/javascript`. 使用其中任何一种都有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:14:00.090

在基于 HTML5 的网站中实际上没有必要。如果您使用的是 HTML5 文档类型，`<!DOCTYPE html>`则不需要包含指定类型[，因为它现在是默认](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element)类型。

随着 HTML5 的出现，您的脚本标签只需要`<script src="myScript.js"></script>`. 如果您对两者之间的差异有更多兴趣，`application/javascript`请`text/javascript`查看[这篇文章](https://stackoverflow.com/questions/6122905/whats-is-difference-between-text-javascript-and-application-javascript)。

# c++ - 链接器错误“... .obj：错误 LNK2019：函数中引用的未解析的外部符号”

> ID：15982291
> 
> 赞同：1
> 
> 时间：2013-04-12T23:12:30.553
> 
> 标签：c++, linker

对于同一个链接器问题，我已阅读所有先前的回复或解决方案。我了解链接器无法访问已定义函数的库文件，但我仍然无法解决它！

错误：

```
1>trial_12th.obj : error LNK2019: unresolved external symbol _viStatusDesc@12 referenced in function _main
1>trial_12th.obj : error LNK2019: unresolved external symbol _viClose@4 referenced in function _main
1>trial_12th.obj : error LNK2019: unresolved external symbol _viRead@16 referenced in function _main
1>trial_12th.obj : error LNK2019: unresolved external symbol _viWrite@16 referenced in function _main
1>trial_12th.obj : error LNK2019: unresolved external symbol _viOpen@20 referenced in function _main
1>trial_12th.obj : error LNK2019: unresolved external symbol _viOpenDefaultRM@4 referenced in function _main
1>C:\Users\41kchoudhary\Documents\Visual Studio 2010\Projects\trial_12th\Debug\trial_12th.exe : fatal error LNK1120: 6 unresolved externals 
```

我正在尝试从混合信号示波器发送和接收数据。在这样做时，我需要使用使用 Microsoft Visual Studio C++ 定义的预定义命令/函数来编写一个 .cpp 文件。我已经阅读了使用这些命令的用户手册，并且我还拥有实现它所需的头文件和库。

我正在使用以下代码：

```
#include <visa.h>
#include "stdafx.h"
#include <stdio.h>
#include <memory.h>

int main(int argc, char* argv[])
{
     ViSession rm = VI_NULL, vi = VI_NULL;
     ViStatus status;
     ViChar buffer[256];
     ViUInt32 retCnt;

     // Open a default session
     status = viOpenDefaultRM(&rm);
     if (status < VI_SUCCESS) goto error;

     // Open the GPIB device at primary address 1, GPIB board 8
     status = viOpen(rm, "USB::0x0699::0x0377::C011104::INSTR", VI_NULL, VI_NULL,
     &vi);
     if (status < VI_SUCCESS) goto error;

     // Send an ID query.
     status = viWrite(vi, (ViBuf) "*idn?", 5, &retCnt);
     if (status < VI_SUCCESS) goto error;

     // Clear the buffer and read the response
     memset(buffer, 0, sizeof(buffer));
     status = viRead(vi, (ViBuf) buffer, sizeof(buffer), &retCnt);
     if (status < VI_SUCCESS) goto error;

     // Print the response
     printf("id: %s\n", buffer);

     // Clean up
     viClose(vi); // Not needed, but makes things a bit more

     // understandable
     viClose(rm); // Closes resource manager and any sessions

     // opened with it
     return 0;

     error:
         // Report error and clean up
             viStatusDesc(vi, status, buffer);
             fprintf(stderr, "failure: %s\n", buffer);
             if (rm != VI_NULL) {
                 viClose(rm);
             }
             return 1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:19:45.113

您需要将 visa32.lib 或 visa64.lib 添加到链接器设置中。

一种方法是在编译器源文件中使用编译指示：

```
#pragma comment(lib,"visa32.lib") 
```

如果仍未找到，则在 IDE 中调整 lib 路径或在编译指示中包含完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-10T04:26:47.920

我遇到过同样的问题。我发现您必须在项目的链接器属性下的附加依赖项中添加 visa32.lib

去你的

> 项目属性->链接器->附加依赖项->单击向下箭头->“编辑->键入visa32.lib

> 点击确定，确定

# html - 有谁知道如何在 google adsense 广告下放一张图片？

> ID：15982299
> 
> 赞同：1
> 
> 时间：2013-04-12T23:13:26.383
> 
> 标签：html, css, adsense, adblock

我试图在我的网站上的 Google Adsense 广告下方放置一张图片，但我无法让它工作。可能是我对 CSS 很烂，但我想知道是否有人知道如何在它下面放一张图片。我正在这样做，所以如果有人有广告拦截器，那里会有图片，而不是说广告支持我们，请禁用你的广告拦截器。这是我的测试广告的代码。

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-9190588463236669";
/* herp */
google_ad_slot = "8389049989";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:20:55.037

我认为您的意思是隐藏在 Google AdSense 块下方，以便用户只有在不允许投放 AdSense 广告时才能看到它？

我想不出任何方法可以使用 HTML 和 CSS 做到这一点。相反，如果由于脚本被禁用而无法执行 AdSense JavaScript 块，您可以尝试使用 noscript 元素来告诉您的网页如何呈现。

例如：

```
<script type="text/javascript">
    <!-- AdSense code goes here as normal -->
</script>
<noscript>
    <img src="images/ads-support-this-site.jpg" width="750" height="75" alt="Ads support this site. Please do not use plugins to disable ads." />
</noscript> 
```

如果脚本块没有运行，这应该允许您显示选择的 JPEG 图像（和/或其他 HTML 标记）。

有关详细信息，请参阅[W3 站点上的 HTML5 noscript 元素定义](http://www.w3.org/TR/html5/scripting-1.html#the-noscript-element)。

我已经很久没有阅读 Google AdSense 条款和条件了，而且 Google 一直对对其代码所做的更改很挑剔。因此，您可能需要联系 Google 并与他们核实他们的条款和条件是否允许使用 noscript 块，以避免惹恼他们并被踢出计划。

# javascript - 在数字之前使用 JavaScript 按字母顺序对 JSON 进行排序

> ID：15982302
> 
> 赞同：3
> 
> 时间：2013-04-12T23:13:47.840
> 
> 标签：javascript, jsonp, sorting

所以我有一些我在 JS 中编写的排序代码，但它在字母之前对数字进行排序，我希望它在数字之前按字母排序。这是它的一个[JSfiddle](http://jsfiddle.net/pbpyrojust/4LBvh/)。

```
 var sort_by = function(field, reverse, primer){
var key = function(x) {return primer ? primer(x[field]) : x[field]};
return function(a,b) {
    var A = key(a), B = key(b);
    return ((A < B) ? -1 : (A > B) ? +1 : 0) * [-1,1][+!!reverse];
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:35:59.170

```
var sort_by = function(field, reverse, primer){
    var key = function(x) {return primer ? primer(x[field]) : x[field]};
    var isNotNumber = function (x) { try {return isNaN(x.substr(0,1)); }catch(e){return false    ;}}
    var sorter = function(a,b) {
        var A = key(a), B = key(b);
        if ( !isNotNumber(A) && isNotNumber(B)) return -1;
        if ( isNotNumber(A) && !isNotNumber(B)) return +1;
        return ((A < B) ? -1 : (A > B) ? +1 : 0) * [-1,1][+!!reverse];
    }
    return sorter;
} 
```

# java - 模式匹配限定符

> ID：15982307
> 
> 赞同：-2
> 
> 时间：2013-04-12T23:14:08.190
> 
> 标签：java, regex, pattern-matching

`((?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})`

有人可以简要解释一下这些限定词。

我从 [http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/得到了这个模式](http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/)

点是什么意思

当必须至少出现一次时，为什么不使用 + 限定符

还有什么限定词应该使用零次或多次。

我是java中这种模式匹配的新手，有点难以掌握

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:19:47.147

好的，让我们把它分解一下：首先，' `.`' =任何东西

```
( 
```

`(?=.*\d)`--- ' `?=`' 是正则表达式 'look-ahead' - 这表明字符串中某处有一个 \d （数字）

`(?=.*[a-z])`--- 'look-ahead' 再次断言字符串中某处有一个 [az]（小写字母）

`(?=.*[A-Z])`--- 'look-ahead' 再次 - 这断言在字符串的某处有一个 [AZ]（大写字母）

`(?=.*[@#$%])`---- 又一个'look-ahead' - 断言至少有一个字符类被定义为@,#,$,%

`.{6,20}`- 这断言字符串必须包含 6 到 20 个“任何东西”符号，即“。”

```
) 
```

希望能帮助到你！如果还有什么不清楚的，请直说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:24:03.843

您不需要`+`量词，因为您只是向前看以看到所有事物中的“至少一个”。（一个数字、一个小写字母、一个大写字母、一个符号和至少六到二十个总字符）

意思是“`.`任何东西”。匹配任何字符，除了换行符（通常）。

# python - Python 模块中的命名空间与 Flask 冲突

> ID：15982312
> 
> 赞同：1
> 
> 时间：2013-04-12T23:14:51.977
> 
> 标签：python, flask

我在 my_module.py 中有我的应用程序，并且在 posts/ 中有请求处理程序。帖子里面有几个不同的python文件。

我的应用程序结构如下所示：

```
./
    my_module.py
    posts/
        __init__.py
        post1.py
        post2.py
        post3.py 
```

所以在 post1、post2 和 post3 中，有 2 个函数：添加和删除。

在 my_module 中，我像这样导入 post1-3：

```
import posts.post1
import posts.post2
import posts.post3 
```

我在 my_module 中有指向添加和删除函数的路由，就像 view_functions 一样：

```
app.add_url_rule('/post1_add', methods=['POST'], view_func=posts.post1.add)
app.add_url_rule('/post1_delete', methods=['POST'], view_func=posts.post1.delete)

app.add_url_rule('/post2_add', methods=['POST'], view_func=posts.post2.add)
app.add_url_rule('/post2_delete', methods=['POST'], view_func=posts.post2.delete)

app.add_url_rule('/post3_add', methods=['POST'], view_func=posts.post3.add)
app.add_url_rule('/post3_delete', methods=['POST'], view_func=posts.post3.delete) 
```

出于某种原因，当我向上面添加的任何 URL 发出 post 请求时，它们都会向最后添加的 URL 的成员发出请求。在这种情况下是posts.post3。

当我将成员函数名称更改为唯一时，如 中`post1_add`，应用程序使用其 view_function 正确发出请求。

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:28:05.107

`add_url_rule`使用 .`__name__`作为默认端点名称，端点名称必须在一定程度上唯一标识端点。

将端点名称传递给`add_url_rule`喜欢：

```
app.add_url_rule('/posts1_add', methods['POST'], 'posts1_add', posts.post1.add) 
```

但是对于这种设计模式，我认为您可能应该使用[蓝图。](http://flask.pocoo.org/docs/blueprints/)

# java - android字符串方程到java代码

> ID：15982313
> 
> 赞同：-2
> 
> 时间：2013-04-12T23:14:53.610
> 
> 标签：java, android

如何将字符串语句解析为代码？

例如：

```
 boolean isOnline = true;
    boolean isConnected = true;
    String statement = "isOnline && isConnected";

    if(statement) // do something 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:07:04.747

尝试这个：

```
 boolean isOnline = true;
   boolean isConnected = true;
   String statement = "isOnline && isConnected";
   String[] split = statement .split(" && ");

   if(split.lenght > split[0].equals("isOnline") && split[1].equals("isConnected")){
       // do something
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T08:17:22.563

我会建议以下策略，具体取决于您对字符串表达式的结构方式的了解。

**1-开发自己的解析器。**

你将不得不发展自己的语法。android 上有一个 ANTLR 端口：[ANTLR 和 Android](https://stackoverflow.com/questions/7596609/antlr-and-android)

> 即，你会得到你的表达（“isOnline”&&“isConnected”）

**2-使用自反性/内省**

解析字符串后，您可以使用自反性将字段或方法表达式转换为字段或方法。

> 即，您会将“isOnline”翻译为 isOnline，将“isConnected”翻译为 isConnected

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T08:19:23.430

原始 Java 有一个内置的[JavaCompiler 类](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)，它允许您编译和加载形成完整有效 .java 文件的代码。

安卓没有这个。

您可以尝试使用一些用 Java 编写的 JavaScript 引擎（参见，例如，[Android 利用 V8 without WebView](https://stackoverflow.com/questions/6880778/android-utilize-v8-without-webview)）。

但是，这仍然不允许您访问在 Java 函数中声明的局部变量。（使用[反射 API](http://developer.android.com/reference/java/lang/reflect/package-summary.html)，您将能够读取类字段的值。）

# java - android 处理：AssetManager 和 list() 不起作用

> ID：15982320
> 
> 赞同：1
> 
> 时间：2013-04-12T23:16:31.083
> 
> 标签：java, android, processing

我一直在使用处理为 android 开发，但是当我想检索给定目录中的文件列表时，我停止了。下面是我一直在尝试的代码的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/jCmGZ.png)

我尝试了不同的变体（例如 getbaseContext().getAssets();），但似乎没有任何效果。每当代码尝试执行 list() 部分时，它都会出错，并且“fileNames”中没有任何内容。

我错过了什么吗？这是处理的问题吗？

谢谢

编辑：我试图访问的方向是“assets/Levels/”，我可以从 Eclipse 中的项目视图中看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-04T16:53:27.027

我遇到了类似的问题，因为我使用了带有尾随 / 字符的文件夹名称。

因此，对于遇到此问题的其他人，您需要确保您使用的文件夹名称只是没有尾随 / 的文件夹名称（因此“电影”而不是“电影/”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T12:53:59.040

**注意：单个文件夹不应为空。对于没有文件的文件夹，它将返回零。**

```
void getFolderDetais(String folder_name)
    {

        // pass folder_name empty to get detail of root that means assets folder details
        String[] filelistInSubfolder = assetManager.list(folder_name);
        Log.v("Floder Details ----- >", " Length --- "
                + filelistInSubfolder.length);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:29:23.203

您不需要任何其他权限即可运行您拥有的代码。我刚刚在我的设备上编译它，它工作正常。您提到您正在尝试列出给定目录中的文件。您正在做的是列出 Levels 文件夹中的文件，该文件夹应该是资产的子文件夹。您将得到的是该文件夹中所有文件名的数组。

如果您实际上是想从给定目录中获取文件列表，则它与资产文件夹无关，我建议您查看有关 Android 外部和内部存储的教程。直接在android页面上的信息对我很有帮助。

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

如果那不是您想要的，我建议您重新措辞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T23:48:18.203

所以我开始工作了！原来这是我放置'String [] fileNames;'的位置的问题 在尝试将数据放入其中之前编写代码。下面的代码工作正常：

![在此处输入图像描述](https://i.stack.imgur.com/GsQeT.png)

谢谢您的帮助！

# c# - COSM 触发器使用 C# 从 HTTP Post 中提取 JSON 值

> ID：15982323
> 
> 赞同：-2
> 
> 时间：2013-04-12T23:16:56.633
> 
> 标签：c#, json, triggers, cosm

尝试通过 C# RESTful 服务接收 COSM Trigger HTTP Post，但未收到警报。我从一个测试客户端获取了 COSM API JSON 有效负载并使用它——这很有效。当我设置我的提要并尝试调试触发器测试，或者只是强制触发器正常触发时，我的 REST 服务不会被调用。如果我尝试任何形式的测试客户端，服务处理 JSON POST 就好了。

C# 服务在这里：

```
 [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "cosm", 
        RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string CosmAlert(CosmTrigger data); 
```

其中 CosmTrigger 是我的班级镜像[COSM 触发器字段](https://cosm.com/docs/v2/trigger/)。

我的 COSM 提要在[这里](https://cosm.com/feeds/123312)。

我从 COSM 门户开始触发触发器，基于 Twitter 的触发器工作正常，到我的 URL 的 HTTP Post 不是。如何调试这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T10:04:09.683

Cosm 触发器当前不将触发器作为 JSON 主体发送，它实际上发送一个 URL 编码请求，并将 JSON 触发器主体编码为称为“body”的参数。

在测试触发器上使用[http://requestb.in](http://requestb.in)，并查看原始输出，这显示基本请求如下所示：

```
POST /103s0dh1 HTTP/1.1
X-Request-Id: e05e9d699edbd5f584fc491cf9416df747be4df4
User-Agent: Cosm Deliverator (Axino/0.3.02) - https://cosm.com
Host: requestb.in
Content-Type: application/x-www-form-urlencoded
Content-Length: 918
Connection: close

body=%7B%22id%22%3A7443%2C%22url%22%3A%22http%3A%2F%2Fapi.cosm.com%2Fv2%2Ftriggers%2F7443%22%2C%22type%22%3A%22lt%22%2C%22threshold_value%22%3A%2220%22%2C%22timestamp%22%3A%222013-04-14T09%3A50%3A47.590044Z%22%2C%22environment%22%3A%7B%22id%22%3A57346%2C%22feed%22%3A%22http%3A%2F%2Fapi.cosm.com%2Fv2%2Ffeeds%2F57346%22%2C%22title%22%3A%22Macbook+Battery+Level%22%2C%22description%22%3A%22%22%2C%22private%22%3Afalse%2C%22location%22%3A%7B%22lat%22%3Anull%2C%22lon%22%3Anull%2C%22name%22%3A%22%22%7D%7D%2C%22triggering_datastream%22%3A%7B%22id%22%3A%22battery%22%2C%22url%22%3A%22http%3A%2F%2Fapi.cosm.com%2Fv2%2Ffeeds%2F57346%2Fdatastreams%2Fbattery%22%2C%22at%22%3A%222013-04-14T09%3A50%3A02.406927Z%22%2C%22value%22%3A%7B%22max_value%22%3A1724.0%2C%22min_value%22%3A0.0%2C%22value%22%3A%2226.28%22%7D%2C%22units%22%3A%7B%22type%22%3Anull%2C%22symbol%22%3A%22%25%22%2C%22label%22%3Anull%7D%7D%2C%22debug%22%3Atrue%7D 
```

不幸的是，我不是 C# 专家，但我怀疑问题与未配置为从标准 urlencoded 请求正文中提取 JSON 正文的服务有关，但也许这可能为如何弄清楚发生了什么提供了线索对于知道 C# 的人来说是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T22:21:13.413

经过测试和工作的代码 -

```
[OperationContract]  
[WebInvoke(Method = "POST",  
BodyStyle = WebMessageBodyStyle.WrappedRequest,  
UriTemplate = "cosm")]  
string cosmStream(Stream body); 
```

# java - 如何在我的工作区中导入 astyanax 客户端示例代码

> ID：15982325
> 
> 赞同：0
> 
> 时间：2013-04-12T23:17:02.163
> 
> 标签：java, cassandra, astyanax

我最近开始使用 Cassandra 数据库，我正在考虑使用`Netflix client astyanax`. 我进入了这个页面-

[https://github.com/Netflix/astyanax](https://github.com/Netflix/astyanax)

我想在克隆 git 存储库后，我可以简单地导入 maven 项目。

**但是在克隆了上面的存储库之后，我找不到任何 pom.xml 文件吗？我是不是看错地方了？**如果没有，那么我应该如何将所有 astyanax 客户端示例导入我的工作区并使用它。

基本上，我只是在尝试使用 astyanax 示例并学习如何使用 astyanax 客户端。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:03:45.810

那是因为他们使用[Gradle](http://www.gradle.org/)来构建他们的项目。您应该下载该工具并查看其文档，它甚至比 Maven 更简单。

Eclipse 有 Gradle - 如果您使用的是 Eclipse。甚至是用于 Eclipse 的 Springsource Tool Suite (STS)。这样，您应该能够在不进行任何修改的情况下导入项目。

# html - 将 div 中的图像垂直和水平居中

> ID：15982327
> 
> 赞同：0
> 
> 时间：2013-04-12T23:17:07.637
> 
> 标签：html, css

我想在一个 div 中垂直和水平居中一个图像，可以是各种大小。所有图像都适合 div，但是它们的大小不同。

我该怎么做？

CSS：

```
.item-image-box {
    width: 48px;
    height: 48px;
    background-color: black;
    border-style: solid;
    border-color: #382418;
    border-width: 2px;
    border-right: 0;
    position: relative;
    float: left;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:42:42.820

只需使用背景定位和内联样式的力量。

JSfiddle：http: [//jsfiddle.net/F6PBJ/](http://jsfiddle.net/F6PBJ/)

## HTML

```
<div style="background-image:url(http://placekitten.com/90/40)"></div>
<div style="background-image:url(http://placekitten.com/40/40)"></div>
<div style="background-image:url(http://placekitten.com/40/90)"></div>
<div style="background-image:url(http://placekitten.com/60/80)"></div> 
```

## CSS

```
div {
    width: 100px;
    height: 100px;
    background-color: black;
    background-position:center;
    background-repeat:no-repeat;
    border-style: solid;
    border-color: #382418;
    border-width: 2px;
    border-right: 0;
    float: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:22:27.760

对于`div`：

```
text-align: center;
line-height: /*height of your div*/ 
```

对于`img`：

```
margin: auto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:27:12.947

背景

```
div {
       background: url(/path/to/img.png) no-repeat center center;
    } 
```

显示：表格单元格和垂直对齐：中间方法

您也可以使用垂直对齐：中间。

```
div {
   display: table-cell;
   vertical-align: middle;
   text-align: center;
} 
```

[http://jsfiddle.net/alexdickson/Vt5ed/](http://jsfiddle.net/alexdickson/Vt5ed/)

取自 CSS 技巧：

[http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

[http://jsfiddle.net/chriscoyier/hJtpF/](http://jsfiddle.net/chriscoyier/hJtpF/)

# svn - 如何将SVN从主干合并到一个范围内的分支

> ID：15982330
> 
> 赞同：3
> 
> 时间：2013-04-12T23:17:22.890
> 
> 标签：svn, merge

假设我检查了主干，并且我是本地计算机中主干目录的根目录，并且我想将对主干（范围 62-65）所做的更改合并到一个分支。我检查了主干并`svn up`运行了这个合并 cmd。

```
svn merge -r 62-65 svn+ssh://url/to/branch 
```

它运行正常，但结果错误。我运行 svn diff 查看这些更改并发现一个日志说我指定的范围已应用于分支。

```
Merged /trunk/MyApp:r12-15
Merged /branch:r62-65 
```

我试图做的是从我目前在本地机器中的 62-65 范围内的主干中获取这些更改，并将这些更改应用于我指定的分支。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-21T10:23:47.987

```
1) use svn switch to go to branch
2) svn mergeinfo --show-revs eligible "url_to_trunk"  (it will show eligible revisions)
3) svn merge --dry-run -r 74299:74493 "url_to_trunk" (dry run is used to see what will happen after marge i.e., if any conflict or not. here merged from rev 74299 to rev 74493)
4) svn merge -r 74299:74493 "url_to_trunk" (finally merge)
5) svn commit (if expected result, commit merged files to branch) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T03:35:44.773

要将一系列修订从*主干*合并到一个*分支*，您需要签出*分支，而不是**主干*。

从你的工作副本的根目录做这样的事情：

```
svn sw url/to/branches/branch
svn merge -r 62:65 url/to/trunk 
```

...然后修复任何合并冲突，如果您满意，请查看并提交。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T17:22:18.820

1.  查看您的分支的工作副本

    svn co url/到/分支

2.  输入工作副本根目录

3.  合并主干中的相关变更集并解决所有冲突

    svn 合并 - r 63:65 ^/trunk

4.  验证所有内容是否已正确合并并提交分支。

# linux - 用于 linux 的 wsadmin 脚本

> ID：15982346
> 
> 赞同：1
> 
> 时间：2013-04-12T23:18:31.693
> 
> 标签：linux, websphere, jython, wsadmin

我需要适用于 OS Linux 的功能性 wsadmin 脚本。我想将我的应用程序从 linux 部署到远程 WAS 服务器。我到处寻找，但我发现了同样的错误脚本。

我当前的脚本以异常结尾：

```
 [exec] Exception in thread "main" java.lang.NoClassDefFoundError: com/ibm/ws/scripting/WasxShell
     [exec] Caused by: java.lang.ClassNotFoundException: com.ibm.ws.scripting.WasxShell
     [exec]     at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
     [exec]     at java.security.AccessController.doPrivileged(Native Method)
     [exec]     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
     [exec]     at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
     [exec]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
     [exec]     at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
     [exec] Could not find the main class: com.ibm.ws.scripting.WasxShell.  Program will exit. 
```

提前致谢

# c# - T4 模板：在宿主程序集中导入命名空间

> ID：15982351
> 
> 赞同：6
> 
> 时间：2013-04-12T23:19:14.593
> 
> 标签：c#, t4

全部，

我有一个 T4 模板

```
<#@ template debug="true" hostSpecific="true" #>
<#@ output extension=".cs" #>
<#@ Assembly Name="System.Core" #>
<#@ Assembly Name="System.Windows.Forms" #>
<#@ import namespace="System" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="System.Diagnostics" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Collections" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="MyLibrarysRootNameSpace.SomeNamespace" #>
/*Rest of template follows*/ 
```

我正在尝试导入最后一行，以便我可以轻松地在其他项目中重用此模板，但我似乎遗漏了一些东西。我正在尝试做的事情可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T17:17:55.883

导入只是添加了一个 using 语句，它不引用程序集。T4 的引用装配集与承载模板的项目完全分离。

如果您想引入托管项目的程序集，那么您需要一个程序集指令来执行此操作。类似于以下内容：

<#@ 程序集名称="$(TargetPath)" #>

请注意，您在这里引入了构建循环，因此项目将需要手动干预才能构建，直到它生成了一次 DLL，因此请确保您只生成可选的部分或始终可以使用先前签入的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:36:59.070

如果我正确理解了您的问题：

[从那里](http://t4-editor.tangible-engineering.com/blog/walking-the-visual-studio-code-model-with-t4-template.html)复制粘贴前 2 个片段以获得包含 T4 的项目的 EnvDTE 对象模型：

```
<#@ assembly name="EnvDte" #>
<#
    var visualStudio = ( this.Host as IServiceProvider )
        .GetService( typeof( EnvDTE.DTE ) ) as EnvDTE.DTE;
    var project = visualStudio.Solution
        .FindProjectItem( this.Host.TemplateFile )
        .ContainingProject as EnvDTE.Project;
#> 
```

然后，使用[那里的方法](http://fabianfernandezdotnet.blogspot.com/2011/09/envdte-project-get-default-namespace.html)获取该项目的默认命名空间：

```
// project is of type: EnvDTE.Project
string strDefaultNamespace = project.Properties.Item( "DefaultNamespace" )
    .Value.ToString(); 
```

然后，随心所欲地`strDefaultNamespace`使用价值。

# vb.net - 如何在 VB.NET Newtonsoft 中解析 Json 子项

> ID：15982358
> 
> 赞同：6
> 
> 时间：2013-04-12T23:19:36.947
> 
> 标签：vb.net, json, json.net

我正在使用 Newtonsoft Json.Net 库使用 VB.NET 解析 Json

```
 Json Data
    ---------
    {
        "CC": "sample.cc@emailDomain.com",
        "CcFull": [
            {
                "Email": "sample.cc@emailDomain.com",
                "Name": "John Sample"
            },
            {
                "Email": "another.cc@emailDomain.com",
                "Name": "Mike Sample"
            }
        ],
        "FromFull" : {
            "Email": "myUser@theirDomain.com",
            "Name": "John Doe"
         }
    } 
```

因此，我可以得到一个有效的 JObject：

```
 Dim o As JObject = JObject.Parse(strJson) 
```

然后我可以获取 JToken 列表并遍历它们并轻松获取根项值 - 但是如何获取 CcFull 的子记录？

```
 Dim results As List(Of JToken) = o.Children().ToList
    For Each item As JProperty In results
        item.CreateReader()
        Select Case item.Name
            Case "CC"
                dim strCC = item.Value.ToString
            Case "CcFull"
                'This has children (Email and Name)

        End Select
     Next 
```

似乎我可以使用 JArray 或解析 item.value - 但语法让我难以理解。

我不想在 VB 中设置一个完整的强类型模型并进行自动反序列化 - 更喜欢在 C# 中执行它的动态方式 - 或者最好只为 CcFull 节点迭代 n 个子节点并取出电子邮件的值并命名并将它们放在通用列表中。

似乎 SO 或谷歌搜索没有好的 VB.NET 示例。

C# 有完全简单的方法来做到这一点 - 但我被困在这个项目的 VB.NET 中。

谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:01:53.793

我不是 JSON.Net 中的 Linq to JSON 实现方面的专家，但这对我有用。

你几乎一直在那里。您需要做的就是在对象模型中再深入一点。

```
Dim results As List(Of JToken) = o.Children().ToList
For Each item As JProperty In results
    item.CreateReader()
    Select Case item.Name
        Case "CC"
            Dim strCC = item.Value.ToString
        Case "CcFull"
            Dim strEmail As String
            Dim strName As String

            For Each subitem As JObject In item.Values
                strEmail = subitem("Email")
                strName = subitem("Name")
            Next
    End Select
Next 
```

正如您所指出的，您从结果列表中获得的项目具有子项目。该子项具有一系列值 - JSON 字符串中括号表示的数组。该`Values`方法是一个 IEnumerable，因此我们可以对其进行迭代，从每次迭代中接收一个 JObject。该对象表示 CcFull 数组中的单个条目。然后，您可以使用属性名称作为索引来检索该属性的值。

# python-3.x - 如何获得不重复的随机整数

> ID：15982361
> 
> 赞同：1
> 
> 时间：2013-04-12T23:20:00.820
> 
> 标签：python-3.x

我正在尝试将 0 到 25 之间的数字分配给列表中的 26 个事物，但不能重复我假设您会使用 if 和 else 语句，但这是我到目前为止所拥有的

```
def f():
    a=[0]*26
    for x in a:
        b=randrange(0,26)
        a[b]=randrange(0,26)
    return(a)
print(f()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:21:41.367

制作一个数字列表`0..25`并随机播放：

```
>>> import random
>>> a = list(range(26))
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 2
2, 23, 24, 25]
>>> random.shuffle(a)
>>> a
[11, 3, 17, 0, 20, 13, 24, 21, 4, 12, 14, 1, 22, 18, 5, 8, 6, 10, 9, 25, 23, 19,
 16, 7, 2, 15] 
```

# python - Python 和函数式语言互操作

> ID：15982362
> 
> 赞同：8
> 
> 时间：2013-04-12T23:20:01.213
> 
> 标签：python, functional-programming, interop

我目前的主要编程语言是 python。我喜欢它的很多地方，但我也喜欢函数式语言。不足以在其中做一个完整的程序，但对于某些功能来说绝对是，这很适合功能模具。

当然 .NET 在这方面是惊人的，同时拥有 ironpython 和 F#。但考虑到 Ironpython 对科学 Python 生态系统的支持在我上次检查时仍然不可靠，.NET 对我来说不是一个选择。我对明显缺乏促进 cpython 和 Haskell 之间互操作的工具感到有点震惊。它们都是拥有大型社区的成熟语言，这对我来说似乎很合适。

他们的架构是否有一些东西让他们不兼容而我错过了，或者这只是一些很棒的东西仍在等待发生？

澄清; 那里有一些半生不熟的项目，但我在想一些与 Weave、pycuda 或 boost 的令人敬畏相似的东西。只需几个注释即可自动化互操作中固有的所有管道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-25T17:28:32.383

另一种方法是使用 unix 管道，只需编写一个 Haskell 程序，还编写一个 Python 程序，让它们通过文本进行通信。Haskell 和 Python 甚至共享相同的列表语法，因此很容易将数据从一个管道传输到另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T00:30:57.647

我认为，如果不考虑面向对象和命令式语言相对于函数式语言的惯性，对这个问题的任何回答都是疏忽的。考虑以下情况，首先是函数式语言的教授频率几乎没有中学、大学或研究生阶段的面向对象或命令式语言的频率。正如用户所提到的，作为程序员，在选择语言方面有很大的动力。例如，在一所四年制大学的典型 CS 学位课程中，一个人可能会学习几种语言，而且很可能没有一种是函数式语言。然后这个典型的毕业生将继续在工业界工作，在每周为工作编程 40 多个小时之后，很难再花时间去，不仅要学习一门全新的语言，还要学习一种与现有语言完全不同的语言。除此之外，还有一个缺点是函数式语言在工业中的用处不如面向对象或命令式语言那么有用。可以看出，鉴于目前的状态，Python 和 Haskell 之间的互操作性并不是某些程序员所希望的，这是可以理解的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T15:50:58.693

如果你要使用 Haskell 到 Python 的绑定，你会在每种语言中做什么？

例如，如果您考虑绑定 C 和 Python，那么当您需要提高速度时使用 C，或者当您需要推送位时使用 C，并且当您想要表达和简洁时使用 Python。通常你有两种语言，一种用于大多数逻辑，另一种可以为了速度*而降级*，但要以清晰为代价。语言之间的差距越大，您从切换中获得的收益就越多。

如果我们要绑定 Haskell 和 Python，那么你会从中得到什么就不太清楚了。我不会仅仅为了速度而从 Python 掉入 Haskell，因为 Haskell 虽然速度快，但不如 C 快。但是如果我使用 Haskell，我什么时候会使用 Python？Python 并不比 Haskell 更具表现力，不像比较 C 和 Python。

我认为大多数时候，只使用`import` [functools](http://docs.python.org/3.4/library/functools.html)并在 Python 中进行功能编程会更容易，而不必将对象转换为一些 Haskell 表示，做一些工作，然后再将其转换回来。

不过，如果你真的想要它，Cython 会让编写 Haskell 的 FFI 可以使用的函数变得容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T18:39:46.540

参考：

> 他们的架构是否有一些东西让他们不兼容而我错过了，或者这只是一些很棒的东西仍在等待发生？

我认为这是关于使用这些语言的人：

想要同时做 Haskell 和 Python 的人并不多。

1.  要同时使用两种语言（如 Haskell 和 Python），您可以通过 C 接口或创建两种语言都可以使用的协议。

    两者都相当先进，限制了能够做到这一点的人数。当然，也会有一些折衷，这使得很难使用两种语言的全部功能。

2.  我正在使用 Python，虽然我知道一些 Haskell，但我不会对其进行编程。我有点陷入面向对象的困境，告诉我有一天一个问题会决定我在 Haskell 中比在 python 中更好地解决它。这个问题还没有出现，因为我的第一个想法是：我知道如何在 Python 中做到这一点。我认为其他“专家”也面临这个问题。

3.  你开始用一种语言思考。我认为 Haskell 的功能风格完全不同，没有副作用。要进入这种想法，我需要忘记或不使用我的 Python 知识。在这两种思维方式之间切换需要一些力量。

总结一下：因为这两种语言不是那么接近，它们分开。两者都很难，也没有很多或简单的方法来练习两者。

# c++ - 为类似股票的整数加法分配内存

> ID：15982363
> 
> 赞同：0
> 
> 时间：2013-04-12T23:20:04.883
> 
> 标签：c++, c

我有两个知道数组 - 每个数组的元素都包含一个数字，它们都变成一个数字。我必须添加这两个数字并在同一设计中创建结果数组。

现在，我该如何添加这些数字？好吧，就像在堆栈中一样，我从这两个数组中取出第一个元素，将它们相加，然后保存到结果 [0] 中。

然后我取出这两个数组的下一个第一个元素（我删除了前面的元素 - 从堆栈中取出它），添加它们，然后放入结果数组的顶部。

如果发生溢出（x > 9），我删除最后一个数字，并将其放在顶部。

这样我应该得到正确的结果。

* * *

在我向您解释了我的酷项目之后，是时候解决实际问题了 - 我如何为结果数组分配内存？

我的意思是，我真的不知道会有多少溢出（==我要放大多少次 results 数组），我不知道两个 XX 数字相加的结果是 XXX 还是 XX 数字， ETC...

这个问题我想了很久，也想不出来。好吧，也许除了分配诸如 sizeof(int)*999 之类的东西以确保 100% 确定：D ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:23:00.357

既然你已经标记了这个[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")，我会建议[`std::vector`](http://www.cplusplus.com/reference/vector/vector/)和[`std::stack`](http://www.cplusplus.com/reference/stack/stack/).

溢出的数量最多为数组中的位数。因此，对于[c](/questions/tagged/c "显示标记为“c”的问题")，我会说分配 array1 和 array2 的最大大小加 1。

# factory-bot - Rails 4、Rspec、FactoryGirl

> ID：15982366
> 
> 赞同：1
> 
> 时间：2013-04-12T23:21:06.800
> 
> 标签：factory-bot, rspec-rails, ruby-on-rails-4

我在不是 rails automagic 的数据库中有一个 id 列时遇到问题。基本上情况是用户表必须在 5000 到 7000 之间，并且还有其他外部规定不允许它自动递增这是迁移（在控制台中神奇地工作）：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users, id: false do |t|
      t.integer :id, null: false
      t.string :firstname, null: false
      t.string :lastname, null: false
      t.string :username, null: false
      t.boolean :active, null: false, default: true
      t.date :hiredate, null: false
      t.date :termdate

      t.timestamps
    end

    add_index :users, [:id], :unique => true

    execute "ALTER TABLE users ADD PRIMARY KEY (id);"
  end
end 
```

我遇到的问题是为了在工厂创建用户而进行测试，我必须有一个开始救援块。第一次失败，第二次完美运行。我不知道为什么会这样。这是 users_spec.rb 的第一部分：

```
describe User do
    before(:all)do
        begin 
            @user = FactoryGirl.create(:user)
        rescue
            @user = FactoryGirl.create(:user)
        end
    end
end 
```

我正在考虑让 id 列在 rails 应用程序中按应有的方式执行并制作一个新的扩展列，但我希望有人能帮助我解决这个问题。感谢您的帮助！

# ios - 如何为 Java 和 Objective C 获得相同的毫秒数

> ID：15982371
> 
> 赞同：1
> 
> 时间：2013-04-12T23:21:25.577
> 
> 标签：ios, date

我可以通过以下方式在 Java 中获得毫秒数：

```
Date date=new Date() ;  
System.out.println("Today is " +date.getTime()); 
```

如何在目标 C 中获得毫秒？我必须对两个代码都有相同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:41:47.473

Java Date.getTime() 的文档是：

> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。

对于 Objective-C，类似的方法是：

```
- (NSTimeInterval)timeIntervalSince1970 
```

> 返回值：接收方与参考日期 1970 年 1 月 1 日格林威治标准时间之间的时间间隔。

NSTimeInterval`double`以秒为单位。所以，这样做：

```
 llrint (1000.0 * [date timeIntervalSince1970]); 
```

给你一个`long`（正如Java产生的）。

注意：“重复”答案不会`long`像 Java 接口那样产生 a；他们产生一个`double`.

# jsf - JSF 中的 URL 管理

> ID：15982373
> 
> 赞同：0
> 
> 时间：2013-04-12T23:21:27.580
> 
> 标签：jsf, jsf-2, glassfish

我正在使用 JSF 为项目创建网站，并使用子目录来管理哪些用户能够访问哪些页面。

我的 WAR 项目组织如下：

```
+Web Pages
    +User
        movies.xhtml
    +WEB-INF
        //beans, faces-config, glassfish-web, and web.xml here
    +images
    +resources
        +css
            header.css
    +templates
        header.xhtml
    index.xhtml
    //other views 
```

我的导航规则如下

```
<navigation-rule> 
<from-view-id>/login.xhtml</from-view-id> 
<navigation-case> 
  <from-outcome>movies</from-outcome> 
  <to-view-id>/User/movies.xhtml</to-view-id> 
</navigation-case>
<navigation-case> 
<from-view-id>*</from-view-id>  
  <from-outcome>index</from-outcome>
  <to-view-id>/index.xhtml</to-view-id>
  <from-outcome>create</from-outcome>
  <to-view-id>/create.xhtml</to-view-id>
  <from-outcome>help</from-outcome>
  <to-view-id>/help.xhtml</to-view-id>
  <from-outcome>login</from-outcome>
  <to-view-id>/login.xhtml</to-view-id>
  <from-outcome>search</from-outcome>
  <to-view-id>/search.xhtml</to-view-id>
</navigation-case> 
```

我的 web.xml servlet 映射如下：

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<!-- Faces Servlet Mapping -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/vd/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>vd/index.xhtml</welcome-file>
</welcome-file-list> 
```

现在，我对将我带到 /User/movies.xhtml 的导航规则没有任何问题。但是，一旦我进入 /User/movies.xhtml，JSF 就找不到我的任何页面（IE.index.xhtml）。但是，它仍然可以找到movies.xhtml 使用的模板。

为什么 JSF 找不到其他视图在哪里？我应该如何更改我的导航规则以便它可以找到它们？

我在 Glassfish v3.1.2 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:56:48.490

我弄清楚了问题所在。我停止使用导航案例并使用 JSF 2 的隐式导航，一切都按原样工作。

# android - 如何更改 Sherlock 操作栏中搜索视图的关闭（主页）按钮？

> ID：15982383
> 
> 赞同：4
> 
> 时间：2013-04-12T23:23:09.740
> 
> 标签：android, actionbarsherlock

当您使用操作栏进入 searchview 模式时，由于某种原因，主页按钮更改为清单 android:icon drawable。有没有办法保持不变或将其改回 android:logo drawable？

这就是我正在做的事情：

```
@Override
public void onCreateOptionsMenu(final Menu menu, MenuInflater inflater) 
{
    getSherlockActivity().getSupportMenuInflater().inflate(R.menu.places_menu, menu);

    SearchManager searchManager = (SearchManager) getSherlockActivity().getSystemService(Context.SEARCH_SERVICE);
    final SearchView searchView = (SearchView) menu.findItem(R.id.item_menu_search).getActionView();

    SearchView.OnQueryTextListener queryTextListener = new SearchView.OnQueryTextListener() 
    {
        public boolean onQueryTextChange(String newText) 
        {
            // this is your adapter that will be filtered
            mAdapter.getFilter().filter(newText);
            return true;
        }

        public boolean onQueryTextSubmit(String query) 
        {
            // this is your adapter that will be filtered
            mAdapter.getFilter().filter(query);
            return true;
        }
    };

    if (null != searchView )
    {
        searchView.setSearchableInfo(searchManager.getSearchableInfo(getSherlockActivity().getComponentName()));
        searchView.setIconifiedByDefault(false);  
        searchView.setOnQueryTextListener(queryTextListener);

        // CLOSE SEARCH WHEN SOFT KEYBOARD DISSMISSES
        searchView.setOnQueryTextFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View view, boolean queryTextFocused) {
                if(!queryTextFocused) {
                    menu.findItem(R.id.item_menu_search).collapseActionView();
                    searchView.setQuery("", false);
                }
            }
        });
    }

    super.onCreateOptionsMenu(menu, inflater);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T12:20:01.930

`setIcon()`通过使用徽标调用似乎是可能的。

```
ActionBar actionBar = getActionBar();
actionBar.setLogo(R.drawable.ab_logo);
actionBar.setIcon(R.drawable.ab_logo); 
```

# xml - 标签之外的 XML 字符数据的好处

> ID：15982386
> 
> 赞同：0
> 
> 时间：2013-04-12T23:24:07.660
> 
> 标签：xml

这个问题是基于我[之前的一个](https://stackoverflow.com/questions/15967880/why-this-xml-is-valid)问题。

我相信我们都习惯了 xml 中的数据位于标签之间，例如：

```
<root>
  <tag>useful text</tag>
</root> 
```

但以下 xml 也是有效的：

```
<root>
  <tag>useful text</tag> more text
</root> 
```

通常，您在现实生活中不会经常看到这种情况。你能给我几个这个 xml 特性提供的用法和好处的例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:30:33.557

没有这些东西，比如[XHTML](http://en.wikipedia.org/wiki/XHTML)是不可能的。

一个完整的有效 XHTML 示例：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
   <head><title>Zebra</title></head>
   <body>
     <div><h1><em>useful</em> text more text</h1></div>
   </body>
 </html> 
```

# android - 在今天（2013 年）的实践中，跨平台移动开发是如何完成的？

> ID：15982388
> 
> 赞同：5
> 
> 时间：2013-04-12T23:24:25.487
> 
> 标签：android, ios, cross-platform

我是一名 .NET 开发人员（现在已经 6 年多了），并且刚刚开始学习移动/智能手机/平板电脑开发。从逻辑上讲，我（可能还有其他所有人）希望我们创建的应用程序能够在所有智能手机平台上运行。从普通用户（外行）的角度来看，如果它是一个“移动应用程序”，它应该在移动设备上运行，这感觉很自然。如果我拥有 iPhone 或 Android 并不重要，移动应用程序就是移动应用程序。注意：我说的是原生平台开发，而不是可以从浏览器中使用的 HTML/Web 应用程序。

所以这只是一个高层次的概述问题......目前（2013 年）处理这个问题的策略是什么？我想象的移动跨平台开发工作方式可能是有一个通用代码库来实现应用程序的业务逻辑，然后对于每个目标平台，我们需要分别开发 GUI 部分。这在实践中与事实相去甚远？

以流行游戏“愤怒的小鸟”为例。我在 iPhone、Android 甚至 Windows 桌面上的 Chrome 浏览器上玩过它（可能是 Flash 或 HTML5 游戏），每个版本在玩时都有几乎相同的感觉。他们是怎么做到的？我想他们将游戏引擎作为通用代码，但可以用什么语言编写？据我所知，没有一种通用的编程语言可以提供单一的源代码文件，它可以编译成适用于 ios/android/win8 手机的本机二进制文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T23:45:17.387

不幸的是，没有办法开发一个跨平台的应用程序，它具有真正的原生外观和所有平台共享相同的代码。虽然可以在某些平台上共享一些代码（例如，您可以在 iOS 和 Android 上使用 C/C++），但仅限于应用程序的逻辑部分。要获得本机 UI，您将被迫使用本机 API。如果您的应用程序不涉及一些复杂的数据处理，那么这种方法可能比真正帮助您有更多的缺点。

您可以使用 PhoneGap 或 Titanium 等混合应用程序平台获得相当好的平台独立性，但这涉及 HTML/Javascript 开发，这可能需要花费大量时间和精力才能使用户体验与原生应用程序的体验有些相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T23:33:47.180

由于您是 .NET 开发人员，因此一个合乎逻辑的解决方案是使用 Xamarin 的产品。( [http://xamarin.com/](http://xamarin.com/) ) 它们允许您开发一次后端逻辑，然后将其编译到所有三个主要移动平台 (iPhone/Android/WP) 中。然后，您可以使用此后端逻辑项目为每个特定平台编写 UI 层。

开发人员的另一个选择是使用类似于[PhoneGap](http://phonegap.com/)的 javascript/html 路由。虽然我最近没有看过这个，但在使用 JS/HTML 路线时，曾经有一些性能下降和硬件可用性差距。现在这可能已经得到改善。

编辑：因为你特别提到了像愤怒的小鸟这样的游戏。如果您需要 3D ，[Unity](http://unity3d.com/unity/multiplatform/)平台为与大多数设备兼容的开发提供了非常好的支持。

特别是对于愤怒的小鸟......他们使用[Box2D](http://box2d.org/)进行物理，我不是 100%，但它看起来像 Cocos2d 来绘制元素。

如果您正在寻找构建游戏并喜欢 Xamarin 的想法，那么请看一看[MonoGame](http://monogame.codeplex.com/releases/view/102870)，它基本上看起来像是 Mono 框架的 XNA 端口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T23:52:03.460

除了 Jared 的回答，今天下午我测试了 Xamarin。

您是 .Net 开发人员，如果您已经在使用 Visual Studio，那么您真是太幸运了。因为 Xamarin 有一个`extension for Visual Studio`

我只是想给xamarin一个不好的印象，到时候你可以测试好的，用户界面是在基于xml的文件中创建的并且没有自动完成，所以你必须编写整个代码或使用属性窗口。但我认为到时候它会更好。不错的编码

# mysql - 双重排序 SQL 语句

> ID：15982391
> 
> 赞同：0
> 
> 时间：2013-04-12T23:24:38.153
> 
> 标签：mysql

我有一个 MySQL 表，它的字段之一是状态。该行是带有州名的字段，除了少数被标记为国际而不是州名的字段。

我基本上想要做的是选择所有不同的州，按字母顺序排列，然后最后选择“国际”

国际可能并不总是在那里，所以我不想只是硬编码它。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:33:57.057

```
SELECT state, IF(state LIKE 'international', 'zz', SUBSTRING(state,1,1)) AS order_by 
FROM `states`
order by order_by asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:34:26.833

谢谢吉列尔莫……不知道为什么我不考虑工会。估计我用的不够。这似乎让我得到了我所需要的：

```
SELECT DISTINCT state FROM stationslist order by state) UNION (SELECT DISTINCT state FROM stationslist WHERE state = 'International' 
```

# javascript - 在 Javascript 中同时做两件事

> ID：15982392
> 
> 赞同：2
> 
> 时间：2013-04-12T23:24:38.387
> 
> 标签：javascript, jquery, multithreading, loops

假设我有一个无限的 javascript 循环，它增加一个数字并将其显示在屏幕上。我在屏幕上还有一个暂停计时器的按钮。

如果javascript正在经历这个无限循环，我怎样才能让暂停按钮停止循环？这是否需要某种“线程”？我正在考虑将一个`$('#pause').click()`跳跳虎连接到计数器对象上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:27:40.640

在客户端 JavaScript 中，您永远不应该陷入无限循环。通常计数到无穷大是使用[`setInterval`](https://developer.mozilla.org/en/docs/DOM/window.setInterval)or完成的[`setTimeout`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)，它允许其他代码（例如单击处理程序）在计时器滴答之间运行。

如果客户端浏览器支持它们，您确实可以使用[网络工作者](http://en.wikipedia.org/wiki/Web_worker)（即多线程 JavaScript），但您不需要它只是为了无限计数器。

# android - 首选项布局被透支

> ID：15982401
> 
> 赞同：0
> 
> 时间：2013-04-12T23:25:23.220
> 
> 标签：android, android-layout

有没有人见过这样的事情？

我找不到任何参考，LogCat 没有给出任何指示。

这个问题只是在我将大部分 Lint 建议应用于我完成的（所以我认为）应用程序之后才开始的。但我认为这不是问题，因为：

LDPI：2.2.2 - 问题

MDPI：2.3.6 - 问题

HDPI：（无测试设备）

XHDPI：4.1.2 - 没问题

===

我的偏好在一个老式的 TabActivity 中；

当你到达那里时，它应该是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/RsMBM.gif)

但是如果你等待 3-5 秒，它就会变成这样；

![在此处输入图像描述](https://i.stack.imgur.com/DvG0i.gif)

看到更强的箭头图形了吗？也看看文字。此视图已被覆盖；（与自身？？）。

如果我在第一个默认选项卡上花费了几秒钟，然后单击了 Preferences 选项卡，这就是我可能期望看到的：

![在此处输入图像描述](https://i.stack.imgur.com/EusFA.gif)

第一个选项卡（这是一个@list）的布局已经透支了首选项。

我不能给出任何代码示例，因为没有代码改变；就这样发生了。

会对任何答案感兴趣。

这是我的偏好布局：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<PreferenceCategory android:title="Sleep Setup" >
    <ListPreference
        android:defaultValue="1"
        android:dialogTitle="Don&apos;t record sleep data if I press to wake within"
        android:entries="@array/sleepNullRecordName"
        android:entryValues="@array/sleepNullRecordValue"
        android:key="sleepNullRecord"
        android:summary="I press to wake within..."
        android:title="Ignore sleep data if" />

    <co.uk.FibroApp.customDialogs.PreferenceTimePickerDialog
        android:defaultValue="23:00"
        android:key="sleepPeriodStart"
        android:showDefault="true"
        android:summary="For charting / summaries"
        android:title="Usual sleep time" />
    <co.uk.FibroApp.customDialogs.PreferenceTimePickerDialog
        android:defaultValue="08:00"
        android:key="sleepPeriodEnd"
        android:showDefault="true"
        android:summary="For charting / summaries"
        android:title="Usual wake time" />
</PreferenceCategory>
<PreferenceCategory android:title="Alarm" >
    <RingtonePreference
        android:key="prfRingtone"
        android:ringtoneType="alarm"
        android:showDefault="true"
        android:showSilent="true"
        android:summary="Pick a tone for your alarm"
        android:title="Alarm tone" />
</PreferenceCategory>
<PreferenceCategory android:title="Phone Setup" >
    <CheckBoxPreference
        android:defaultValue="false"
        android:key="chkAutoFlight"
        android:summary="Ignore calls whilst you sleep"
        android:title="Auto Flight Mode" />
</PreferenceCategory>
<PreferenceCategory android:title="Reports" >
    <EditTextPreference
        android:defaultValue=""
        android:key="prfMyName"
        android:title="Your name" />
    <EditTextPreference
        android:defaultValue=""
        android:key="prfGPName"
        android:title="Your GP name" />
</PreferenceCategory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:14:09.767

好的，所以我不知道这是否是在 TabActivity 中包含首选项活动的效果，但我发现如果我在 xml 文件中注释掉所有首选项，那么来自相邻选项卡的布局将显示为偏好活动的背景。

在没有 PreferenceScreen 的“背景”xml 元素的情况下，我创建了一个黑色背景的新主题，并将该主题应用于我在 Manifest 中的偏好活动。

显示问题已解决。

# java - 多线程同步在 Java 中不起作用

> ID：15982403
> 
> 赞同：0
> 
> 时间：2013-04-12T23:25:45.173
> 
> 标签：java, multithreading

我正在尝试java中的多线程示例。Java Complete reference 7th Edition 中有一个关于多线程同步的示例。该示例工作正常。但是当我稍微添加一行来创建同一类的另一个线程时，这不起作用。有人可以让我知道为什么会这样。示例如下。下面的代码是生产者和消费者的经典例子。如果有一个生产者，当我有 2 个生产者时它工作正常，那么它将失败。它直到 15 点才停止。

```
class Q {

    int n;
    boolean valueSet = false;

    synchronized int get() {
        while (!valueSet) {
            try {
                wait();
            } catch (InterruptedException e) {
                System.out.println("InterruptedException caught");
            }
        }
        System.out.println("Got: " + n);
        valueSet = false;
        notify();
        return n;
    }

    synchronized void put(int n) {
        while (valueSet) {
            try {
                wait();
            } catch (InterruptedException e) {
                System.out.println("InterruptedException caught");
            }
        }
        this.n = n;
        valueSet = true;
        System.out.println("Put: " + n);
        notify();
    }
}

class Producer implements Runnable {

    Q q;

    Producer(Q q) {
        this.q = q;
        new Thread(this, "Producer").start();
        //new Thread(this, "Producer2").start();
    }

    public void run() {
        int i = 0;
        while (true) {
            q.put(i++);
        }
    }
}

class Consumer implements Runnable {

    Q q;

    Consumer(Q q) {
        this.q = q;
        new Thread(this, "Consumer").start();
    }

    @Override
    public void run() {
        while (true) {
            q.get();
        }
    }
}

public class PCFixed {

    public static void main(String[] args) {
        Q q = new Q();
        Producer P1 = new Producer(q);
        new Consumer(q);
        Producer P2 = new Producer(q);
        System.out.println("Press Control-C to stop.");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:35:02.630

Q 被写入一次只接受一个值。您需要更改`put`为布尔方法 - 如果 valueset 为 true 则返回 true 然后正常进行，如果 valueset 为 false 则返回 false 并且不执行任何操作返回。然后调用的方法`put`将需要不断重试，直到它们得到真正的响应。这样，多个消费者可以使用同一个 Q 对象而不会相互干扰。

如果您使用多个生产者，更好的解决方案是使用[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)，它是一个线程安全队列。生产者将`offer`整数加入队列，消费者将`poll`整数加入队列。多个生产者可以同时`offer`整数互不干扰，多个消费者可以同时`poll`整数互不干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:39:51.170

用 替换每个出现`notify`的`notifyAll`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:04:24.907

您提供的并发示例使用单个`boolean`标志来检查是否有信号。

所以这更像是一种`Semaphore`安排，而不是生产者消费者安排。处理任意数量的`Thread`s 太简单了。

如果您真的想使用生产者消费者，您将需要一个包含多个项目的队列。

```
static final AtomicBoolean run = new AtomicBoolean(true);

static class Producer implements Runnable {

    final BlockingQueue<String> blockingQueue;

    public Producer(BlockingQueue<String> blockingQueue) {
        this.blockingQueue = blockingQueue;
    }

    @Override
    public void run() {
        while (run.get()) {
            blockingQueue.add("Value from " + Thread.currentThread().getName());
            try {
                Thread.sleep(100);
            } catch (InterruptedException ex) {
                //doesn't matter.
            }
        }
    }
}

static class Consumer implements Runnable {

    final BlockingQueue<String> blockingQueue;

    public Consumer(BlockingQueue<String> blockingQueue) {
        this.blockingQueue = blockingQueue;
    }

    @Override
    public void run() {
        while (run.get()) {
            final String item;
            try {
                item = blockingQueue.take();
            } catch (InterruptedException ex) {
                return;
            }
            System.out.println(item);
        }
    }
}

public static void main(String[] args) throws InterruptedException {
    final LinkedBlockingQueue<String> lbq = new LinkedBlockingQueue<>();
    final ExecutorService executorService = Executors.newCachedThreadPool();
    executorService.submit(new Consumer(lbq));
    for (int i = 0; i < 10; ++i) {
        executorService.submit(new Producer(lbq));
    }
    Thread.sleep(10000);
    run.set(false);
    executorService.shutdownNow();
} 
```

这个简单的例子使用 a`LinkedBlockingQueue`来发布事件和从中读取事件。

`Producer`puts`String`以自己的名字进入队列（`Thread`它们每 100 毫秒执行一次）。`Consumer`从队列中取出并打印`String`.

队列是一个`BlockingQueue`，因此`take`如果队列为空，该方法将阻塞。

您可以通过更改将项目添加`Producer`到. 实验，看看它是如何工作的。`Consumer``ExecutorService`

该`AtomicBoolean`标志允许程序关闭所有产生的子进程。

# java - 无法执行dex

> ID：15982412
> 
> 赞同：1
> 
> 时间：2013-04-12T23:27:11.947
> 
> 标签：java, android, eclipse

将 .jar 文件添加到我的 android 项目后，我遇到了以下问题：

“转换为 Dalvik 格式失败：无法执行 dex：Java 堆空间”

在我将 eclipse.ini 文件更改为以下内容后。正如在这篇文章中：

[无法执行 dex：Eclipse 中超出了 GC 开销限制](https://stackoverflow.com/questions/9471194/unable-to-execute-dex-gc-overhead-limit-exceeded?lq=1)

我收到以下错误：

--无法执行dex：无法将新索引65662合并到非巨型指令中！

--转换为Dalvik格式失败：无法执行dex：无法将新索引65662合并到非巨型指令中

请有人可以帮我解决这个问题或遇到类似的问题吗？

任何帮助表示赞赏。

谢谢

这是我现在的 eclipse.ini 文件：

```
-startup
plugins/org.eclipse.equinox.launcher_1.1.1.R36x_v20101122_1400.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.1.2.R36x_v20101222
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
512m
--launcher.defaultAction
openFile
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
512M
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx512m 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:34:04.360

添加 `dex.force.jumbo=true` 到我的 project.properties 中就可以了。（确保你有 ADTv21+，你还需要清理一次项目。）

# c++ - 当从凸轮检测到运动时，OpenCv C++ 录制视频

> ID：15982415
> 
> 赞同：2
> 
> 时间：2013-04-12T23:27:25.017
> 
> 标签：c++, opencv

我正在尝试使用简单的运动检测代码来检测相机的运动。我正在使用 OpenCV 库，并且我有一些代码可以利用两帧之间的差异来检测变化。

我的差异框架工作得很好，没有运动时它是黑色的。

问题是我现在如何能够检测到停止记录的黑暗或开始记录帧的黑暗。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:41:04.550

一个非常简单的事情是将整个差异图像相加成一个整数。如果该总和高于阈值，则您有运动。然后你可以使用第二个阈值，当总和低于该限制时，你就停止了运动。

您还可以使阈值仅在自上一个阈值后经过一段时间后才更改程序状态。即在检测到移动后，您不会在 10 秒内检查是否缺少移动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:41:20.817

如何在内部存储一个黑框并使用相同的比较代码？如果您的新帧与全黑帧不同（超过阈值），请开始录制。

这似乎是最直接的，因为您已经掌握了图像处理算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T15:44:23.260

看看自由软件[运动](http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome)的代码以获得鼓舞人心的想法。

对于可靠的运动检测，有很多事情需要牢记。例如，容忍太阳自转的缓慢变化。或者接受可能来自最便宜的相机的瞬间图像故障。

从我的一个小经验来看，我认为比仅仅将所有差异相加更好，计算变化超过某个阈值的像素数量会更好。

Motion 还提供了遮罩，例如可以让您忽略附近道路上的运动。

# php - PHP 脚本在 oci_execute 处停止

> ID：15982416
> 
> 赞同：0
> 
> 时间：2013-04-12T23:27:25.057
> 
> 标签：php, oracle10g

我有一个包含以下代码的脚本，用于将数据插入到 Oracle 表中：

```
$sql = "INSERT INTO EXAMPLE_TABLE (ID, FIELD, VAL) VALUES (:id, :test, :ok)"; 

$stid = oci_parse($conn, $sql);
//die("parsed ok");

oci_bind_by_name($stid, ":id", $id);
oci_bind_by_name($stid, ":test", $test);
oci_bind_by_name($stid, ":ok", $ok);

//die("params bound");

$result =@oci_execute($stid);

if(!$result)
{               
   $err = oci_error($stid);
   $error = $err['message']; 
   echo $error; die('end error');
}

echo oci_num_rows($stid) . " rows inserted.<br />";
die("inserted"); 
```

脚本运行良好，然后就停止了。我投入了一些死亡语句来查找脚本停止的位置。我能到达的最后一个地方是“die(“params bound”)”。

我已验证变量是否正常并且数据库连接有效。我还使用sqldeveloper手动连接到数据库，没有问题。

为什么这个脚本突然停止了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:33:45.833

正如经常发生的那样，我在发布这个问题后立即有一个想法。我检查了我在 GUI 中打开了多少个连接，然后关闭了这些连接。

事实证明，我在 GUI 中手动运行的一些查询中进行了一些未提交的更改，我认为这会使脚本在 oci_execute 处停滞。回滚更改并重新启动连接后，脚本现在可以正常工作。

# java - 如何阻止 UML Lab 在类图中灰显私有变量？

> ID：15982424
> 
> 赞同：2
> 
> 时间：2013-04-12T23:28:31.077
> 
> 标签：java, uml

我正在尝试使用 Eclipse（在 OS X 上）和 UML Lab 生成一个类图（从源代码进行逆向工程），并且由于某种原因，一些变量是灰色的。这是一个例子：

[http://i.imgur.com/Rj8Guhz.png](http://i.imgur.com/Rj8Guhz.png)

但是，有些类的所有变量都是灰色的。我没有看到任何模式，有些是在声明时启动的，有些不是。所有这些都被使用。当整个列表变灰时，很难阅读名称，尤其是当我将图像复制到 Word 文档中时。

我检查了首选项，使用了一些设置，但没有任何改变。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:19:31.857

查看示例图像，我会说它仅使私有变量（标有“-”）变灰。您是否根据变量的可见性检查了颜色设置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:02:18.953

UML Lab 使用灰色来标记“遗留”样式元素。“旧版”是指用于为这些元素生成/导入代码的模板集（或 CodeStyle）。此选项在包含“传统”代码样式/原型的配置文件中定义。我不确定您是否可以轻松编辑它。但是，如果您关闭自动约束验证（就在 UML 实验室的主要首选项中）并重新打开图表，您可以摆脱所有这些突出显示。

# enums - 枚举器赋值

> ID：15982425
> 
> 赞同：0
> 
> 时间：2013-04-12T23:28:36.940
> 
> 标签：enums, enumerator, enumerate

我必须使用枚举器将传递给构造函数的浮点数转换为基于浮点数（称为 R）的字符串。它看起来像这样：

```
static void Main(string[] args)
    {
      float R = 1;
      <name of class> <object> = new <name of class> (R);
    }

 public class <name of class>
 {
   enum <name of enum> {value1 = 1, value2 = 2, value3 = 3}
   float storeR;
   public <name of class>(float R)
 {
   storeR = R;
 } 
```

}

我该怎么做呢？我应该将枚举放在其他地方吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:32:19.547

这是C#吗？.net 框架 4.5？是的，您将在此类之外声明枚举，然后通过`Enum.TryParse()`

请参阅[http://msdn.microsoft.com/en-us/library/dd783499.aspx](http://msdn.microsoft.com/en-us/library/dd783499.aspx)

# java - Java Swing：透明PNG永久捕获原始背景

> ID：15982431
> 
> 赞同：0
> 
> 时间：2013-04-12T23:29:35.150
> 
> 标签：java, swing

我有以下代码：

```
import javax.swing.JWindow;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.Toolkit;

public class sutff extends JWindow
{
    //Get transparent image that will be use as splash screen image.
    Image bi=Toolkit.getDefaultToolkit().getImage("window.png");
    ImageIcon ii=new ImageIcon(bi);
    public sutff()
    {
        try
        {
            setSize(ii.getIconWidth(),ii.getIconHeight());
            setLocationRelativeTo(null);
            show();
            //Thread.sleep(10000);
            //dispose();
            //JOptionPane.showMessageDialog(null,"This program will exit !!!","<>",JOptionPane.INFORMATION_MESSAGE);
        }
        catch(Exception exception)
        {
            exception.printStackTrace();
        }
    }
    //Paint transparent image onto JWindow
    public void paint(Graphics g)
    {
        g.drawImage(bi,0,0,this);
    }
    public static void main(String[]args)
    {
        sutff tss=new sutff();
    }
} 
```

目的是创建一个半透明的窗口，类似于 Windows Aero 风格的玻璃。我正在使用以下透明 png：http: [//i.imgur.com/5UNGbsr.png](https://i.imgur.com/5UNGbsr.png)

问题是由于它是透明的，它应该显示窗户后面的东西，对吧？这就是它第一次执行时所做的事情，除了第一次启动时这个“透明窗口”后面的任何窗口，程序都会以某种方式创建一个“图像”并将其永久附加到窗口中。因此，即使我将这个“透明窗口”后面的窗口最小化，第一个背景窗口的图像仍然存在。

这是一个屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/IHlAz.png)

当我拍摄这个屏幕截图时，我已经最小化了可以在后台看到的命令提示符和 IDE，但它仍然保留在窗口的背景中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:14:57.463

不要覆盖顶级容器的paint() 方法，尤其是当您不调用super.paint() 时。这将导致绘画问题。如果您确实需要进行自定义绘画，那么您应该覆盖 JPanel（或 JComponent）的 paintComponent() 方法，然后将面板添加到窗口/框架。阅读自定义绘画的 Swing 教程。这个建议每天都会给出，我不知道为什么人们仍然试图覆盖paint()？？？

然而，这只是你的问题之一。更好的解决方案是将图像添加到 JLabel，然后将标签添加到窗口。您还需要使窗口背景透明：

```
import javax.swing.*;
import javax.swing.ImageIcon;
import javax.swing.JOptionPane;
import java.awt.*;
import java.awt.Image;
import java.awt.Toolkit;

public class Stuff extends JWindow
{
    //Get transparent image that will be use as splash screen image.
    Image bi=Toolkit.getDefaultToolkit().getImage("transparent.png");
    ImageIcon ii=new ImageIcon(bi);
    public Stuff()
    {
        try
        {
            setBackground( new Color(0, 0, 0, 0) );
            setSize(ii.getIconWidth(),ii.getIconHeight());
            setLocationRelativeTo(null);
            JLabel label = new JLabel(ii);
            add(label);
            show();
            //Thread.sleep(10000);
            //dispose();
            //JOptionPane.showMessageDialog(null,"This program will exit !!!","<>",JOptionPane.INFORMATION_MESSAGE);
        }
        catch(Exception exception)
        {
            exception.printStackTrace();
        }
    }

/*
    //Paint transparent image onto JWindow
    public void paint(Graphics g)
    {
        super.paint(g);
        g.drawImage(bi,0,0,this);
    }
*/
    public static void main(String[]args)
    {
        Stuff tss=new Stuff();
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T02:56:02.657

问题是，你的窗口实际上是透明的。Java 仍然认为窗口不透明，因此不会更新图形以显示实际背后的内容。

自 Java 1.6.10 以来，在 Java 中创建透明窗口相对简单（我认为）

下面是一个非常简单的示例，使用半透明的绘制效果，这将允许任何落在窗口下方的东西继续正确绘制。

```
import com.sun.awt.AWTUtilities;
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Shape;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.geom.RoundRectangle2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TransaprentBlur {

    public static void main(String[] args) {
        new TransaprentBlur();
    }

    public TransaprentBlur() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setUndecorated(true);
                frame.setBackground(new Color(0, 0, 0, 0));
//                Java 6...
//                AWTUtilities.setWindowOpaque(frame, true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setOpaque(false);

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (e.getClickCount() == 2) {
                        System.exit(0);
                    }
                }
            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Shape shape = new RoundRectangle2D.Float(0, 0, getWidth() - 1, getHeight() - 1, 20, 20);
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.setColor(new Color(225, 225, 225, 128));
            g2d.fill(shape);
            g2d.setColor(Color.GRAY);
            g2d.draw(shape);
            g2d.dispose();
        }

    }

} 
```

**使用图像示例更新**

屏幕截图显示窗户被移到窗户后面......

![在此处输入图像描述](https://i.stack.imgur.com/dYuIv.png)![在此处输入图像描述](https://i.stack.imgur.com/313YN.png)

基本上，您需要做的就是将图像渲染代码`paintComponent`放在`TestPane`

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TransaprentBlur {

    public static void main(String[] args) {
        new TransaprentBlur();
    }

    public TransaprentBlur() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setUndecorated(true);
                frame.setBackground(new Color(0, 0, 0, 0));
//                Java 6...
//                AWTUtilities.setWindowOpaque(frame, true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private BufferedImage image;

        public TestPane() {

            try {
                image = ImageIO.read(getClass().getResource("/5UNGbsr.png"));
            } catch (IOException ex) {
            }
            setOpaque(false);

            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseClicked(MouseEvent e) {
                    if (e.getClickCount() == 2) {
                        System.exit(0);
                    }
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return image == null ? super.getPreferredSize() : new Dimension(image.getWidth(), image.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (image != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                int x = (getWidth() - image.getWidth()) / 2;
                int y = (getHeight() - image.getHeight()) / 2;
                g2d.drawImage(image, x, y, this);
                g2d.dispose();
            }
        }

    }

} 
```

# jquery - wordpress 中的 Galleria 插件在 ie 或 chrome 中不起作用

> ID：15982432
> 
> 赞同：0
> 
> 时间：2013-04-12T23:29:35.200
> 
> 标签：jquery, wordpress, function, galleria

我昨天和今天的大部分时间都在寻找解决方案，但没有提出任何建议。我正在为客户创建一个文字新闻网站。我使用 Galleria 作为主页滑块。我没有使用 wordpress 插件版本，而是使用可从网站下载的 jQuery 版本。

从视觉上看，它在 FF 和移动设备中运行良好。然而，在 FF 错误控制台中，它说 scriptaulous 需要原型 1.6 或更高版本。在 Chrome 中，无论是否有效，它都是 50/50 的镜头，而在 IE 9 和 IE 10 中，它似乎要么在舞台的左上角制作一个小图像，要么在右下角截断一个大图像，是的，仍然有过渡。我还收到消息说它不会加载到其他人的机器上。

我试图链接到prototype.js 文件以及添加jQuery.noConflict() 但没有运气。

我还尝试编辑将 Galleria 初始化为 jQuery 而不是 $ 和其他一些变体的代码。下面是网站和代码片段。

www.penandpixelmedia.com/Zareh

```
 <script>
      Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
        $("div.slide").galleria({
           width:1400,
            height:620,
            transition: 'fade',
            showInfo: false,
            autoplay: 4000,
            lightbox:true,
            showImagenav:false,
            imageCrop:'landscape',
           thumbnails:false
        });

        </script> 
```

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:16:09.483

在控制台中，我收到以下错误：

**未捕获的类型错误：对象 [对象对象] 没有方法“画廊”**

这个错误让我相信你错误地初始化了 Galleria 插件。在您的代码中，您使用以下内容：

```
$("div.slide").galleria(); 
```

我跳到他们的网站，看了看他们的[文档](http://galleria.io/docs/getting_started/beginners_guide/)。他们似乎建议您执行以下操作来初始化 Galleria。

`Galleria.run('#galleria');`或者在你的情况下`Galleria.run('div.slide');`

另一方面，我注意到您的网站上包含了三个独立的 JavaScript 库/框架（Prototype、Scriptaculous 和 jQuery）。这可能会导致库之间出现一些问题/冲突。

此外，您可以在初始化此插件时单独指定选项。这是初始化插件并根据需要进行配置所需的代码：

```
var jQ = jQuery.noConflict();
jQ(function(){
    Galleria.loadTheme('galleria/themes/classic/galleria.classic.min.js');
    Galleria.run('div.slide');
    Galleria.configure({
        width:1400,
        height:620,
        transition: 'fade',
        showInfo: false,
        autoplay: 4000,
        lightbox:true,
        showImagenav:false,
        imageCrop:'landscape',
        thumbnails:false
    });
}); 
```

# php - 一英里长的“包含”文件是否会降低页面速度？

> ID：15982435
> 
> 赞同：2
> 
> 时间：2013-04-12T23:30:05.773
> 
> 标签：php, performance

我一直在寻找可以改善网站页面加载时间的方法（一开始还不错），而且我是 PHP 和高级编码实践的新手，所以我提出了一个非常独特的问题；

如果我正在构建一个页面（或站点）并且我正在使用包含，并且在模板的开头是对一个文件的调用，该文件包含整个站点使用的许多功能，我想知道这个页面是否有一段时间列出了我网站的所有功能正在减慢页面加载速度？

在我看来，每次加载页面时浏览器都必须读取所有内容？？

在我看来，我担心页面速度会变慢，但我又知道什么？

我非常新手，不知道计算机可以“读取”所有这些内容的速度有多快，如果有人不介意分享他们对此的想法，我当然欢迎您的意见，并提前感谢您。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:38:08.173

它绝对会减慢页面加载速度。但是，如果您在本网站中使用 Javascript，那么您可以对代码进行 AJAX 加载。在 jQuery 中，您可以执行以下操作：

```
$(document).ready(function() {
    $.get('myURL.php', function(data) {
        $("#myDiv").html(data);
    });
}); 
```

这段代码所做的是等到文档完全加载（`$(document).ready()`）然后它向指定的 URL 发出 AJAX 'GET' 请求并返回在该 URL 处输出的数据，所有这些都在后台完全没有其余的 HTML 呈现屏幕上。使用 AJAX 的好处是它会在您告诉它时触发，因此页面前端的加载不会在该`include('myURL.php')`调用上“挂起”。

此解决方案允许您在屏幕上呈现 HTML，而无需用户坐在白色屏幕上等待`include()`调用发生。相反，他们可以查看网站并与之交互，然后在呈现所有内容后在后台加载脚本。如果你想让人们知道信息正在后台加载，那么可以在页面的那个位置包含一个 AJAX 加载器图形。

# css - CSS3 背景大小似乎不起作用

> ID：15982437
> 
> 赞同：1
> 
> 时间：2013-04-12T23:30:09.473
> 
> 标签：css, background, linear-gradients

我正在努力让 CSS3 渐变的大小正常工作。我已经设置了一个`background-size:800px;`，如下面的 jsfiddle 所示，它肯定不是 800px。我对物业有误解吗？它似乎在不同情况下的工作方式不同；当不使用其他标题时，背景会随浏览器调整大小，当包含在 H5BP 中时，它不会调整大小，但高度太短。

我非常非常困惑！我到底如何创建特定大小的重复背景渐变？

```
body {
  background: #0d1a2d;
  background-image: -webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, #1b355a), color-stop(50%, #000000), color-stop(100%, #1b355a));
  background-image: -webkit-linear-gradient(#1b355a, #000000 50%, #1b355a);
  background-image: -moz-linear-gradient(#1b355a, #000000 50%, #1b355a);
  background-image: -o-linear-gradient(#1b355a, #000000 50%, #1b355a);
  background-image: linear-gradient(#1b355a, #000000 50%, #1b355a);
  background-size: 800px;
} 
```

jsfiddle：[背景大小示例](http://jsfiddle.net/wright_jamie/SsVCb/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:32:30.127

您需要指定 x 和 y 方向的大小，如下所示：

```
background-size: 800px 800px; 
```

[**在 JSFiddle 上查看**](http://jsfiddle.net/QVXsj/)

话虽如此，您所做的是符合[CSS3 规范的](http://www.w3.org/TR/css3-background/#the-background-size)。然而，根据[MDN](https://developer.mozilla.org/en-US/docs/CSS/background-size) ——以及我们可以从您的实验中收集到的信息——浏览器对本规范的遵从性是不一致且不可靠的。所以，就目前而言，最好明确定义两个方向。

一旦浏览器的行为符合规范，设置一个值会将另一个设置为`auto`.

# windows - 使用 Clang++ 构建共享库

> ID：15982440
> 
> 赞同：6
> 
> 时间：2013-04-12T23:30:24.663
> 
> 标签：windows, dllexport, clang++

我正在尝试使用 Clang++ 构建一个共享库（Windows 的 dll）。

我已经运行了以下命令：

```
clang++ -c -o hello.o hello.cpp
clang++ -shared -v -o hello.dll hello.o 
```

第一个命令可以正常工作，但是当我尝试构建 dll 时出现此错误：

```
clang version 3.2 (tags/RELEASE_32/final)
Target: i686-pc-mingw32
Thread model: posix
 "c:/MinGW/bin/g++.exe" -shared -v -m32 -o worker.dll worker.o
Using built-in specs.
COLLECT_GCC=c:/MinGW/bin/g++.exe
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/lto-wrapper.exe
Target: mingw32
Configured with: ../gcc-4.6.2/configure --enable-languages=c,c++,ada,fortran,objc,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgomp --disable-win32-registry --enable-libstdcxx-debug --enable-version-specific-runtime-libs --build=mingw32 --prefix=/mingw
Thread model: win32
gcc version 4.6.2 (GCC)
COMPILER_PATH=c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/;c:/mingw/bin/../libexec/gcc/;c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/bin/
LIBRARY_PATH=c:/mingw/bin/../lib/gcc/mingw32/4.6.2/;c:/mingw/bin/../lib/gcc/;c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/lib/;c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../;/mingw/lib/
COLLECT_GCC_OPTIONS='-shared' '-v' '-m32' '-o' 'worker.dll' '-shared-libgcc' '-mtune=i386' '-march=i386'
 c:/mingw/bin/../libexec/gcc/mingw32/4.6.2/collect2.exe --shared -Bdynamic -e _DllMainCRTStartup@12 --enable-auto-image-base -u ___register_frame_info -u ___deregister_frame_info -o worker.dll c:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../dllcrt2.o c:/mingw/bin/../lib/gcc/mingw32/4.6.2/crtbegin.o -Lc:/mingw/bin/../lib/gcc/mingw32/4.6.2 -Lc:/mingw/bin/../lib/gcc -Lc:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../../../mingw32/lib -Lc:/mingw/bin/../lib/gcc/mingw32/4.6.2/../../.. -L/mingw/lib worker.o -lstdc++ -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt -ladvapi32 -lshell32 -luser32 -lkernel32 -lmingw32 -lgcc_s -lgcc -lmoldname -lmingwex -lmsvcrt c:/mingw/bin/../lib/gcc/mingw32/4.6.2/crtend.o
Cannot export _hello: symbol not found
collect2: ld returned 1 exit status
clang++: error: linker (via gcc) command failed with exit code 1 (use -v to see invocation) 
```

这是我正在编译的文件：

```
// hello.cpp
#include <iostream>

#if defined(_WIN32)
  #define LIBRARY_API __declspec(dllexport)
#else
  #define LIBRARY_API
#endif

extern "C" void LIBRARY_API hello();

void hello()
{
  std::cout << "Hello, World!" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-11T14:01:57.350

对这个重要问题的跟进是，从 clang++ 6.0 版开始，由 clang 编译 DLL 就可以了。用于 MSVC 和 CLang 的 C++ 中 C++ 函数的名称修饰存在差异，这可能会影响 DLL 在混合环境中的使用，但这些差异很容易发现和纠正。

# c# - 使用 Show() 显示来自另一个类的数据

> ID：15982442
> 
> 赞同：1
> 
> 时间：2013-04-12T23:30:34.727
> 
> 标签：c#

我知道如何在 C++ 中创建程序，但对 C# 非常陌生，所以请耐心等待，但我有一个问题，我一生都无法在谷歌或 stackoverflow 搜索中找到它（也许不知道一个好方法措辞）。我的表单上有两个函数： A`NumericUpDown`和 a `Button`。单击按钮时，我想从中获取数据`NumericUpDown`，并将`.Show()`其放在消息框中。这是我目前拥有的。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void StatBox_ValueChanged(object sender, EventArgs e)
    {
        //decimal Stat = StatBox.Value;
        //string StatStr = Stat.ToString();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(StatBox.Value);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:37:04.180

与 C++ 一样，C# 是一种强类型语言。这意味着如果您尝试将 a 传递`int`给接受 a 的函数，则会收到编译时错误`string`，反之亦然。这就是发生在你身上的事情。

[MessageBox.Show 函数的最简单重载](http://msdn.microsoft.com/en-us/library/519bytz3.aspx)接受单个`string`参数，但您已向它传递了一个`decimal`（的结果[`StatBox.Value`](http://msdn.microsoft.com/en-us/library/system.windows.forms.numericupdown.value.aspx)）：

```
MessageBox.Show(StatBox.Value); 
```

解决方法很简单：将 转换`decimal`为`string`. 所有 .NET 对象都提供了一个`ToString`成员函数，可用于获取对象的字符串表示形式。所以像这样重写你的代码：

```
MessageBox.Show(StatBox.Value.ToString()); 
```

调用此函数时，您甚至可以将多个子字符串连接在一起，就像使用 C++`string`类型和 I/O 流一样。例如，您可以编写以下代码：

```
MessageBox.Show("The result is: " + StatBox.Value.ToString()); 
```

或者使用[`String.Format`方法](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)，有点类似于C`printf`函数。然后，您可以指定[标准](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)或[自定义](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)数字格式并避免`ToString`显式调用该函数。例如，以下代码将以定点表示法显示 up-down 控件中的数字，精确到小数点后两位：

```
MessageBox.Show(String.Format("The result is: {0:F2}", StatBox.Value.ToString())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T23:36:16.987

这应该为你做：

```
public partial class Form1 : Form
{
   public Form1()
   {
       InitializeComponent();
   }

   private void StatBox_ValueChanged(object sender, EventArgs e)
   {
       //decimal Stat = StatBox.Value;
       //string StatStr = Stat.ToString();
   }

   private void button1_Click(object sender, EventArgs e)
   {
       MessageBox.Show(StatBox.Value.ToString());
   }
} 
```

由于您使用的`MessageBox`是`.Show()`数据，因此您需要`.ToString()`在`StatBox.Value`.

PS - 欢迎来到 SO！你会喜欢这里的。

# opengl - 使用 OpenGL 程序打开命令提示符

> ID：15982443
> 
> 赞同：0
> 
> 时间：2013-04-12T23:30:51.497
> 
> 标签：opengl, cmd, command-prompt

为什么每次运行 OpenGL 程序时都会打开 Windows 命令提示符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:58:21.267

这与 OpenGL 无关，但与您使用的框架有关。您很可能正在使用 GLUT，教程为此使用了程序入口函数`main`。使用的程序的默认子系统`main`（与 相比`WinMain`）在启动时会打开一个控制台窗口。[您可以使用我在https://stackoverflow.com/a/6882500/524368](https://stackoverflow.com/a/6882500/524368)中显示的方法摆脱它

* * *

如果您在项目构建链接器选项集中使用 Visual C++

```
/SUBSYSTEM:windows
/ENTRY:mainCRTStartup 
```

或者在源文件中使用以下*#pragma*`int main(...)`

```
#pragma comment(linker, "/SUBSYSTEM:windows /ENTRY:mainCRTStartup") 
```

如果使用 GNU 工具链，请使用以下附加链接器标志来设置子系统。无需更改入口功能。

```
LDFLAGS += --subsystem windows 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:47:28.710

这是一个可以修改的 Visual Studio 链接器配置设置。

要在应用程序运行时禁止控制台窗口出现，请执行以下操作：

1.  右键单击项目
2.  转到属性 -> 链接器 -> 系统 -> 子系统设置
3.  确保选择“Windows”而不是“控制台”。

# javascript - 为 javascript 数组赋值

> ID：15982448
> 
> 赞同：0
> 
> 时间：2013-04-12T23:31:26.353
> 
> 标签：javascript, arrays

我试图在“向下钻取”中给出“数据”一些值。但我不断收到一条错误消息，提示“data.drilldown”未定义”。我在做什么？这与下面代码中最后一行的语法有关。我尝试了十几种不同的选项来定义data.drilldown.data 但我找不到正确的解决方案。

请给我一些帮助:)

兄弟。

```
<script type="text/javascript">
$(document).ready(function() {

        var colors = Highcharts.getOptions().colors,
            categories = ['MSIE', 'Firefox', 'Chrome', 'Safari', 'Opera'],
            name = 'Browser brands',
            data = [

                {
                    y: 55.11,
                    color: colors[0],
                    drilldown: {
                        name: 'MSIE versions',
                        categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],
                        data: [{}],
                        color: colors[0]
                    }
                },

                {
                    y: 55.11,
                    color: colors[0],
                    drilldown: {
                        name: 'MSIE versions',
                        categories: ['MSIE 6.0', 'MSIE 7.0', 'MSIE 8.0', 'MSIE 9.0'],
                        data: [{}],
                        color: colors[0]
                    }
                }

                ];

    var url =  "php/live-server-data.php?callback=?";
    $.getJSON(url,  function(data) {

    *data.drilldown.data = data;*

    });
.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:32:42.877

数据是一个数组。

您需要访问数组中的第一个元素：

```
data[0].drilldown 
```

也就是说，如果您在代码的第一部分中引用该对象。如果您真的在查看从服务返回的数据，那么我们现在无法做到，因为那是返回的数据，它可能是任何东西

# javascript - JavaScript 匿名函数和输入参数

> ID：15982450
> 
> 赞同：0
> 
> 时间：2013-04-12T23:31:31.413
> 
> 标签：javascript, jquery

我试图了解如何正确地将参数传递给匿名函数。似乎我的“这个”并没有指向我希望它会去的地方。我究竟做错了什么？

JSfiddle：http: [//jsfiddle.net/Chiliyago/NvGs8/3/](http://jsfiddle.net/Chiliyago/NvGs8/3/)

```
function initUTCDate() {
    var $date = new Date();
    var $dateUTC = new Date($date.getUTCFullYear(), $date.getUTCMonth(), $date.getUTCDate(), $date.getUTCHours(), $date.getUTCMinutes(), $date.getUTCSeconds());
    return $dateUTC;
}

$(function () {

    var setUTCDateTime = function (timeType) {

        var $input = $(this);

        var $d = initUTCDate();

        if (timeType == "GMT") {
            $input.val($d.toGMTString());
        } else {
            $input.val("false");
        }
    };

    $('input[data-ucw-currDateTime]').each(setUTCDateTime("GMT"));

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:35:44.717

尝试使用：

```
$(function () {
    var setUTCDateTime = function (timeType) {
        return function () {
            var $input = $(this);

            var $d = initUTCDate();

            if (timeType == "GMT") {
                $input.val($d.toGMTString());
            } else {
                $input.val("false");
            }
        };
    };

    $('input[data-ucw-currDateTime]').each(setUTCDateTime("GMT"));
}); 
```

**演示：http:** [//jsfiddle.net/NvGs8/4/](http://jsfiddle.net/NvGs8/4/)

# sql - 具有升序/降序输出的 SQL 查询

> ID：15982462
> 
> 赞同：0
> 
> 时间：2013-04-12T23:33:19.737
> 
> 标签：sql, sql-order-by

我有以下表格，我想对其进行查询：

表STATE_STATS：

```
Column Name    Type     Constraint
STNAME         String
BIRTHS2010     Number
DEATHS2010     Number
REGION         Number   Foreign Key 
```

我想查询该表以查找出生人数（BIRTHS2010）多于死亡人数（DEATHS2010）的所有州。我想按地区的升序列出所有州，如果统计数据具有相同的地区，则按 BIRTHS2010 的降序对它们进行排序。任何人都可以提出任何建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:38:49.960

大概是这样的吧？

```
SELECT *
FROM STATE_STATS
WHERE BIRTHS2010 > DEATHS2010
ORDER BY REGION, BIRTHS2010 DESC 
```

# php - 将sql插入数据库未正确插入

> ID：15982463
> 
> 赞同：-1
> 
> 时间：2013-04-12T23:33:32.253
> 
> 标签：php, mysql, cart, sql-insert

我想将我的数据插入数据库，但是，它不能正常工作，例如，当我将 4 个产品添加到购物车时，它只会插入四个中的两个。并且小计显示它捕获产品的第一数量作为我的小计，然后它显示整个产品的总量。而且我的数量没有插入我的数据库中。

```
 <table>
    <tr>
        <th>Name</th>
        <th>Quantity</th>
        <th>Price per item</th>
        <th>Total cost</th>
    </tr>

    <?php
    $sql = "SELECT * FROM productsc WHERE id_product IN (";
    foreach ($_SESSION['cartCity'] as $id => $value) {
        $sql .= $id . ",";
    }
    $sql = substr($sql, 0, -1) . ") ORDER BY name ASC";
    $query = mysql_query($sql);
    $total_price = 0;
    if (!empty($query)) {
        while ($row = mysql_fetch_assoc($query)) {
            $subtotal = $_SESSION['cartCity'][$row['id_product']]['quantity'] * $row['price'];
            $total_price += $subtotal;
            ?>
            <tr>
                <td><?php echo $row['name']; ?></td>
                <td><input type="text" name="quantity-<?php echo $row['id_product']; ?>" size="5" value="<?php echo $_SESSION['cartCity'][$row['id_product']]['quantity']; ?>" /></td>
                <td><?php echo "$" . $row['price']; ?></td>
                <td><?php echo"$" . $_SESSION['cartCity'][$row['id_product']]['quantity'] * $row['price']; ?></td>
            </tr>
            <?php
            if ($row = mysql_fetch_assoc($query)) {
                $sql2 = "INSERT INTO order_details (name,quantity,price,subtotal) VALUES ('" . $row['name'] . "','" . $quantity . "','" . $row['price'] . "','" . $total_price . "')";
                $query2 = mysql_query($sql2) or die(mysql_error());
            }
        }
    }
    ?>

    <tr>
        <td></td>
        <td></td>
        <td>Total price:</td>
        <td><?php echo"$" . $total_price; ?></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:37:39.723

可能是因为你在循环内调用 $row = mysql_fetch_assoc($query) 做同样的事情，这意味着外部循环只会运行一半的时间，你只会输入其他所有项目

尝试

```
 while ($row = mysql_fetch_assoc($query)) {
        $subtotal = $_SESSION['cartCity'][$row['id_product']]['quantity'] * $row['price'];
        $total_price += $subtotal;
        ?>
        <tr>
            <td><?php echo $row['name']; ?></td>
            <td><input type="text" name="quantity-<?php echo $row['id_product']; ?>" size="5" value="<?php echo $_SESSION['cartCity'][$row['id_product']]['quantity']; ?>" /></td>
            <td><?php echo "$" . $row['price']; ?></td>
            <td><?php echo"$" . $_SESSION['cartCity'][$row['id_product']]['quantity'] * $row['price']; ?></td>
        </tr>
        <?php
        $sql2 = "INSERT INTO order_details (name,quantity,price,subtotal) VALUES ('" . $row['name'] . "','" . $quantity . "','" . $row['price'] . "','" . $total_price . "')";
        $query2 = mysql_query($sql2) or die(mysql_error());

    } 
```

# css - 溢出隐藏和孩子的背面可见性变得疯狂

> ID：15982464
> 
> 赞同：3
> 
> 时间：2013-04-12T23:33:39.673
> 
> 标签：css, overflow

问题是第二篇文章（.settings）应该旋转360°，所以应该显示它的背面。（如果我删除 .flip 中的溢出，这甚至可以工作）我唯一能看到的是前端在 Y 轴上翻转了 180

可能是chrome中的错误？

PS：是的，我想要“真的很长的文本节点显示？” 看到它根本没有转动。

HTML：

```
<article class="flip fliped anim" style="min-height: 308px;">

    <article class="settings fliped">
        "Text longer than 2nd article"
    </article>

    <article>
        ...
    </article>

</article> 
```

CSS：

```
.flip article{
    overflow: hidden;
    -webkit-backface-visibility: hidden;
}

.fliped{
    -webkit-transform: rotateY(180deg);
} 
```

[http://jsfiddle.net/LatpP/1/](http://jsfiddle.net/LatpP/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:27:18.747

我很难修复你的代码，我还发现了一些重复的属性，所以我决定从头开始重写它，因为我认为我得到了你想要实现的目标。

基本上你不需要从 360 到 180，你可以从 180 到 0，如果你需要从 0 到 -180 的另一个旋转；）
当你在父子 div 上放置具有 180 度旋转的同一个类时，如下所示：

```
<article class="flip fliped anim" style="min-height: 308px;">
<article class="settings fliped">

.fliped {
-webkit-transform: rotateY(180deg);} 
```

你得到的是度数的总和，即360等于0！此外，您不必总是指定 div 何时为 0deg，因为这是默认设置。

所以[**这是我编写的代码**](http://jsfiddle.net/sFV22/3/)，悬停时触发动画（我评论了涉及的类）。
我还添加了另一个包装器以使透视图更真实，如果您不喜欢它，只需删除第一个类即可。
如果您只想查看静态背面（如您所问），您只需将`.hover`类添加到`.flip-container`div 而不会弄乱您的 css，如下所示：

```
<div class="flip-container hover" > 
```

**编辑**
我忘记了溢出问题，通过将`overflow:hidden;`属性直接应用于标记的最后一个容器很容易解决。在我的情况下，直接到`.front`或`.back`divs （或两者）。这是根据您的需要更新[**的最终小提琴。**](http://jsfiddle.net/sFV22/5/)

# javascript - 如何让 soundcloud 文件与 Sound Manager 2 一起使用？

> ID：15982465
> 
> 赞同：0
> 
> 时间：2013-04-12T23:33:40.610
> 
> 标签：javascript, html, audio-streaming, soundmanager2

我当前使用声音管理器的设置适用于我的所有 mp3 链接，但带有 soundcloud 源的链接除外。不知道我做错了什么，有人看到我的代码有问题吗？

```
<!-- Page player core CSS -->
<link rel="stylesheet" type="text/css" href="soundmanager2/page-player.css" />

<!-- soundManager.useFlashBlock: related CSS -->
<link rel="stylesheet" type="text/css" href="soundmanager2/flashblock.css" />

<!-- optional: annotations/sub-tracks/notes, and alternate themes -->
<link rel="stylesheet" type="text/css" href="soundmanager2/optional-annotations.css" />
<link rel="stylesheet" type="text/css" href="soundmanager2/optional-themes.css" />

<!-- soundManager API -->
<script src="soundmanager2/soundmanager2.js"></script>

<script>

soundManager.setup({
  flashVersion: 9,
  preferFlash: true, // for visualization effects
  useHighPerformance: true, // keep flash on screen, boost performance
  wmode: 'transparent', // transparent SWF, if possible
  url: 'soundmanager2/'
});

// custom page player configuration

var PP_CONFIG = {
  autoStart: false,      // begin playing first sound when page loads
  playNext: true,        // stop after one sound, or play through list until end
  useThrottling: false,  // try to rate-limit potentially-expensive calls (eg. dragging position around)</span>
  usePeakData: true,     // [Flash 9 only] whether or not to show peak data (left/right channel values) - nor noticable on CPU
  useWaveformData: false,// [Flash 9 only] show raw waveform data - WARNING: LIKELY VERY CPU-HEAVY
  useEQData: false,      // [Flash 9 only] show EQ (frequency spectrum) data
  useFavIcon: false     // try to apply peakData to address bar (Firefox + Opera) - performance note: appears to make Firefox 3 do some temporary, heavy disk access/swapping/garbage collection at first(?) - may be too heavy on CPU
}

</script>

<!-- Page player main script -->
<script src="soundmanager2/page-player.js"></script> 
```

然后我在这里用它在我的身体里

```
<div>

 <ul class="playlist">

 <li> <a href="http://api.soundcloud.com/tracks/63928998/stream?client_id=bcc10d97babdd9960f823530831e0eb9d&q">SongName</a></li>

 </ul>

 <div id="control-template">
  <!-- control markup inserted dynamically after each link -->
  <div class="controls">
   <div class="statusbar">
    <div class="loading"></div>
     <div class="position"></div>
   </div>
  </div>
  <div class="timing">
   <div id="sm2_timing" class="timing-data">
    <span class="sm2_position">%s1</span> / <span class="sm2_total">%s2</span></div>
  </div>
  <div class="peak">
   <div class="peak-box"><span class="l"></span><span class="r"></span>
   </div>
  </div>
 </div>

 <div id="spectrum-container" class="spectrum-container">
  <div class="spectrum-box">
   <div class="spectrum"></div>
  </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:12:46.947

简而言之，您的 SoundCloud 链接不是指向 .mp3 文件的直接链接，而是指向其 API 的链接，然后返回文件的一次性链接。

它类似于文件共享网站上的文件链接，您会获得一个网页链接，该链接会生成文件的一次性链接以防止热链接。

因此，您当前的设置无法直接在浏览器中播放 SoundCloud 链接。

# opengl - 哪个更好？开始使用 Allegro 或 OpenGL

> ID：15982470
> 
> 赞同：2
> 
> 时间：2013-04-12T23:34:04.257
> 
> 标签：opengl, directx, allegro

我希望你帮我解决一个决策问题。

我是一个新手视频游戏程序员。我可以开发 Flash、Unity、Android 游戏，并且我知道一点 CryEngine。另外，我想在未来开发 3D 视频游戏。

所以，我决定学习一个可以使用 C/C++ 的视频游戏库。但是我应该学习 Allegro 或 OpenGL 还是其他库？还是我应该直接开始学习 DirectX 编程？学习 Allegro 编程是有用的（良好的基础）还是只是浪费时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:04:49.410

> 但是我应该学习 Allegro 或 OpenGL 还是其他库？

首先也是最重要的：*OpenGL 不是一个库！*它的“L”曾经表示库，但最好将其反称为“层”，因为这就是如今 OpenGL 的真正含义：程序和图形硬件之间的层。

OpenGL 不是游戏引擎，也不是游戏图形库。*OpenGL 是一个低级的绘图 API。*你可以用它以花哨的方式绘制点、线和三角形。但是OpenGL中没有场景，没有对象等。这一切都必须由游戏引擎来实现。编写游戏引擎是一项非常艰苦的工作。如果你真的想这么做，我建议你看一下一年前发布的 Doom3 的源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T00:04:57.417

Allegro 几乎与 OpenGL 无关。

Allegro 是一个用于简单游戏开发的基本框架，提供基本的 2D 图形基元、用户输入、文本、声音、计时器等......您可以在 Allegro 下使用 OpenGL，但没有紧密和专门的集成。

OpenGL 是一个低级 API，专门用于图形。

如果您已经了解 Unity 和 CryEngine，请坚持使用它们。自己使用 OpenGL 来实现它们的一小部分功能将是一个巨大的困难。这并不意味着你不应该学习一些 OpenGL，即使是为了好奇和了解底层是如何工作的。

DirectX 受平台限制，虽然大多数游戏平台确实支持 DX，但 ARM 移动平台正在崛起，但 DirectX 无法在其上运行。OpenGL 几乎可以匹配 D3D 提供的所有东西，而且它更便携，所以它是更值得投资的 API，除非你只专注于 Windows 游戏。那么学习D3D就有意义了，它更容易使用。

许多游戏引擎，包括 Unity，将从图形 API 中抽象出来，并使用目标平台提供的最佳功能。

另外，请记住 OpenGL 在 Windows 8 的“metro”模式下不可用，因此如果您想要在 Metro 模式下使用高级图形，则必须使用 D3D，或者使用 ANGLE 并坚持使用模拟的 OpenGL 的更基本子集在 D3D 上使用 ANGLE。

# c - C - 需要帮助交换红色和绿色组件

> ID：15982474
> 
> 赞同：-3
> 
> 时间：2013-04-12T23:34:53.797
> 
> 标签：c, struct, ppm

这段代码（我从以前的 Stack Overflow 问题中找到的代码编辑）能够接受 ppm 图像的输入并输出相同的图像，但所有颜色都是互补的。在我的作业中，我被要求这样做，然后交换红色和绿色组件（基本上将 img->data[i].red 变成 img->data[i].green ，反之亦然）。但是，我不确定如何去做。我不能只做两个相等的陈述，因为第一个基本上会使第二个无效。我唯一能想到的就是创建一个 PPMImage 类型的临时数组（之前创建的一个结构）。但是，我有点不确定代码和逻辑是如何工作的。

这是代码。changecolorPPM 函数中的“for”循环是补色的地方，我很确定需要进行交换。

```
#include<stdio.h>
#include<stdlib.h>

typedef struct {
     unsigned char red,green,blue;
} pixel_t;

typedef struct {
     int x, y;
     pixel_t *data;
} PPMImage;

#define CREATOR "RPFELGUEIRAS"
#define RGB_COMPONENT_COLOR 255

static PPMImage *readPPM(const char *filename)
{
         char buff[16];
         PPMImage *img;
         FILE *fp;
         int c, rgb_comp_color;
         //open PPM file for reading
         fp = fopen(filename, "rb");
          if (!fp) {
              fprintf(stderr, "Unable to open file '%s'\n", filename);
              exit(1);
         }

     //read image format
     if (!fgets(buff, sizeof(buff), fp)) {
          perror(filename);
          exit(1);
     }

//check the image format
if (buff[0] != 'P' || buff[1] != '6') {
     fprintf(stderr, "Invalid image format (must be 'P6')\n");
     exit(1);
}

//alloc memory form image
img = (PPMImage *)malloc(sizeof(PPMImage));
if (!img) {
     fprintf(stderr, "Unable to allocate memory\n");
     exit(1);
}

//check for comments
c = getc(fp);
while (c == '#') {
while (getc(fp) != '\n') ;
     c = getc(fp);
}

ungetc(c, fp);
//read image size information
if (fscanf(fp, "%d %d", &img->x, &img->y) != 2) {
     fprintf(stderr, "Invalid image size (error loading '%s')\n", filename);
     exit(1);
}

//read rgb component
if (fscanf(fp, "%d", &rgb_comp_color) != 1) {
     fprintf(stderr, "Invalid rgb component (error loading '%s')\n", filename);
     exit(1);
}

//check rgb component depth
if (rgb_comp_color!= RGB_COMPONENT_COLOR) {
     fprintf(stderr, "'%s' does not have 8-bits components\n", filename);
     exit(1);
}

while (fgetc(fp) != '\n') ;
//memory allocation for pixel data
img->data = (pixel_t*)malloc(img->x * img->y * sizeof(pixel_t));

if (!img) {
     fprintf(stderr, "Unable to allocate memory\n");
     exit(1);
}

//read pixel data from file
if (fread(img->data, 3 * img->x, img->y, fp) != img->y) {
     fprintf(stderr, "Error loading image '%s'\n", filename);
     exit(1);
}

fclose(fp);
return img;
}
 void writePPM(const char *filename, PPMImage *img)
{
FILE *fp;
//open file for output
fp = fopen(filename, "wb");
if (!fp) {
     fprintf(stderr, "Unable to open file '%s'\n", filename);
     exit(1);
}

//write the header file
//image format
fprintf(fp, "P6\n");

//comments
fprintf(fp, "# Created by %s\n",CREATOR);

//image size
fprintf(fp, "%d %d\n",img->x,img->y);

// rgb component depth
fprintf(fp, "%d\n",RGB_COMPONENT_COLOR);

// pixel data
fwrite(img->data, 3 * img->x, img->y, fp);
fclose(fp);
}

void changeColorPPM(PPMImage *img)
{
int i;

if(img){

     for(i=0;i<img->x*img->y;i++){
          img->data[i].red=RGB_COMPONENT_COLOR-img->data[i].red;
          img->data[i].green=RGB_COMPONENT_COLOR-img->data[i].green;
          img->data[i].blue=RGB_COMPONENT_COLOR-img->data[i].blue;
     }
}
}

int main(int argc, char* argv[]){
PPMImage *image;
char* filename = argv[1];
image = readPPM(filename);
changeColorPPM(image);
writePPM("OutputFile.ppm",image);
printf("Press Enter");
getchar();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:42:28.853

根据您的问题，我相信您正在寻找一个`swap`可以轻松实现的功能

```
img->data[i].red = img->data[i].red + img->data[i].green;
img->data[i].green = img->data[i].red - img->data[i].green;
img->data[i].red = img->data[i].red - img->data[i].green; 
```

**更新：**

如果加法操作没有溢出，则此部分很好。但是，**如果目标的精度不足以容纳这些位，则可能会丢失数据**。因此，在这些情况下，正如 Mats 和其他专家所建议的那样，传统的临时变量方法将是最好的方法

```
temp = img->data[i].red;
img->data[i].red = img->data[i].green;
img->data[i].green = temp; 
```

**笔记：**

如果您从事图像处理，那么从视觉角度来看，这种交换可能并不令人愉快。通常，绿色包含最大强度，即与红色和蓝色相比的亮度信息量，人眼可以很容易地捕捉到强度的变化。检查交换后最终图片的样子会很有趣。

# r - 为多项式回归重塑数据

> ID：15982480
> 
> 赞同：0
> 
> 时间：2013-04-12T16:15:34.073
> 
> 标签：r, categorical-data, multinomial

我目前正在学习多项式 logit 估计器，我想用它来估计包中的`R`模型`mlogit`。在广泛阅读该主题之后，很明显该过程中的一个重要步骤是使用该`mlogit.data()`函数重塑数据。我的数据框包含以下信息：

1.  `satisfaction`：这是一个从 1（非常不满意）到 5（非常满意）的分类变量。
2.  `education`: 个人受教育年限
3.  `country`: 这是个人的原籍国
4.  `average_income`: 这个国家的平均收入

这是数据框的可视化表示：

```
> dat
   country satisfaction education income
1        1            3        12    750
2        1            5        13    750
3        1            2        10    750
4        3            4        13    675
5        3            5        14    675
6        3            4        11    675
7        3            1        14    675
8        2            1        11    820
9        2            5        14    820
10       2            3        12    820 
```

该`mlogit()`功能似乎不喜欢这种形式。我试图用`satisfaction`作为因变量和`education`自变量来估计模型。

我怎样才能重塑它以使其发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T21:47:02.420

我将包含一个 alt 变量，该变量将指示 1 到 5 的替代值。您的因变量是“模式”变量，它应该是`TRUE`或者`FALSE`在您将数据重新整形为`mlogit`格式之后。

# bash - 重命名子目录和文件

> ID：15982483
> 
> 赞同：1
> 
> 时间：2013-04-12T23:35:48.813
> 
> 标签：bash, unix, directory

我有一个使用 for 循环的脚本，可以重命名文件夹和文件。该脚本将获取文件和文件夹列表并有条件地重命名它们。我将使用以下命令调用该文件：

```
find test/* -exec ./replace.sh {} \; 
```

我的 replace.sh 脚本将包含类似于：

```
for i in $@
mv $OLDFILE $NEWFILE
done 
```

$OLDFILE 和 $NEWFILE 之前已经设置好了，我相信它们不会出现任何问题。

当我遇到子目录时，我的问题就出现了。最初，我会有如下文件夹：

```
folder_1

 -file1

 -file2 
```

当我的脚本将 folder_1 更改为 folderX1 时，下一个参数 folder_1/file1 将无效，因为更改后的路径将是 folderX1/file1。我想我可以创建一个包含正在更改的文件夹列表的堆栈，然后将它们弹出以重命名文件，但这在 bash 上似乎很难。我缺少更好的方法吗？

PS 我可以多次运行程序来遍历所有子目录，但这似乎效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:41:25.370

您可以添加`-depth`到 find 命令。这将在目录本身之前处理目录的文件。详情请参阅[`man find`](http://linux.die.net/man/1/find)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:17:30.230

你的`find`使用有问题。第一个选项是搜索的*开始位置*，因此您不想在那里使用 glob。如果您只想要其中的文件`test/`而不想要其任何子目录，请`-depth`按照 Olaf 的建议使用该选项。

您实际上不需要使用单独的脚本来处理此重命名。`find`如果你不介意有点乱，它可以在命令行中完成。

要仅处理顶级文件，您可以这样做：

```
$ touch foo.txt bar.txt baz.ext
$ find test -depth 1 -type f -name \*.txt -exec bash -c 'f="{}"; mv -v "{}" "${f/.txt/.csv}"' \;
./foo.txt -> ./foo.csv
./bar.txt -> ./bar.csv
$ 
```

但是您的担忧是有效的——`find`将建立一个匹配列表，如果您`-exec`从 under 更改列表`find`，一些重命名将失败。

我怀疑您最快的解决方案是分两个阶段（不是几个阶段）执行此操作：一个用于文件，然后一个用于目录。（或者更改顺序，我认为这无关紧要。）

```
$ mkdir foo_1; touch red_2 foo_1/blue_3
$ find . -type f -name \*_\* -exec bash -c 'f="{}"; mv -v "{}" "${f%_?}X${f##*_}"' \;
./foo_1/blue_3 -> ./foo_1/blueX3
./red_2 -> ./redX2
$ find . -type d -name \*_\* -exec bash -c 'f="{}"; mv -v "{}" "${f%_?}X${f##*_}"' \;
./foo_1 -> ./fooX1 
```

Bash 参数扩展将使您走得更远。

另一个选项，取决于您的实现`find`，是`-d`选项：

```
 -d      Cause find to perform a depth-first traversal, i.e., directories
         are visited in post-order and all entries in a directory will be
         acted on before the directory itself.  By default, find visits
         directories in pre-order, i.e., before their contents.  Note, the
         default is not a breadth-first traversal. 
```

所以：

```
$ mkdir -p foo_1/bar_2; touch red_3 foo_1/blue_4 foo_1/bar_2/green_5
$ find . -d -name \*_\* -exec bash -c 'f="{}"; mv -v "{}" "${f%_?}X${f##*_}"' \;
./foo_1/bar_2/green_5 -> ./foo_1/bar_2/greenX5
./foo_1/bar_2 -> ./foo_1/barX2
./foo_1/blue_4 -> ./foo_1/blueX4
./foo_1 -> ./fooX1
./red_3 -> ./redX3
$ 
```

# c# - 从两个大整数中获得精确的百分比

> ID：15982484
> 
> 赞同：2
> 
> 时间：2013-04-12T23:35:51.900
> 
> 标签：c#, math, biginteger

这显然是行不通的。

```
BigInteger Total = 1000000000000000000000000000000000000000000000000000022234235423534543;
BigInteger Actual = 83450348250384508349058934085;
string Percent = ((Decimal)100.0/Total*Actual).ToString()+"%"; 
```

问题是，我如何得到我的精确百分比？

目前我用..

```
 string sTotal = (task.End - task.Start).ToString();
        BigInteger current = task.End;

                string sCurrent = (task.End-current).ToString().PadLeft(sTotal.Length, '0');
                Int32 maxLength = sCurrent.Length;
                if (maxLength > Int64.MaxValue.ToString().Length - 1)
                    maxLength = Int64.MaxValue.ToString().Length - 1;

                UInt64 currentI = Convert.ToUInt64(sCurrent.Substring(0, maxLength));
                UInt64 totalI = Convert.ToUInt64(sTotal.Substring(0, maxLength));

                Percent = (Decimal)100.0 / totalI
                    * currentI; 
```

你能提出更好的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:49:51.987

您正在计算一个有理数，而不是整数，因此您应该安装 Solver Foundation：

[http://msdn.microsoft.com/en-us/library/ff524509(v=VS.93).aspx](http://msdn.microsoft.com/en-us/library/ff524509(v=VS.93).aspx)

并使用 Rational 而不是 BigInteger：

[http://msdn.microsoft.com/en-us/library/ff526610(v=vs.93).aspx](http://msdn.microsoft.com/en-us/library/ff526610(v=vs.93).aspx)

然后，如果您想将有理数作为最接近的双精度数，则可以调用 ToDouble。

> 我需要精确到小数点后 56 位

好的，这是一个荒谬的精确度，但我会相信你的话。

由于双精度只有 15 位小数，而小数只有 29，所以不能使用双精度或小数。您将不得不自己编写代码来进行除法。

这里有两种方法：

首先，编写一个模拟长除法的算法。你可以用手来做，所以你可以写一个计算机程序来做。继续进行，直到生成所需的精度位数。

第二：WOLOG 假设有理数是正数，形式为`x`/ `y`where`x`和`y`大整数。假设`b`为 10 ^p以获得所需的精度`p`。您希望找到`a`具有以下属性的大整数：

```
a * y < b * x 
```

和

```
b * x < (a + 1) * y 
```

要么 要么`a/b`是`(a+1)/b`p 位最接近 的小数部分`x/y`。

说得通？

您可以`a`通过对一组非负 BigInteger 进行二进制搜索来找到 的值。

要进行二分搜索，首先您必须找到上限和下限。降低很容易；你知道 0 是一个下限，因为假设分数`x/y`是正数。要找到上界，请尝试`1/b`, `10/b`, `100/b`... 等等，直到找到大于 的值`x/y`。现在您有了一个上限和下限，您可以对结果空间进行二分搜索以找到`a`使不等式成立的确切值。

# akka - Akka 日志记录在关机期间重置

> ID：15982488
> 
> 赞同：0
> 
> 时间：2013-04-12T23:36:07.923
> 
> 标签：akka

在 Akka 2.10 下，我的日志配置在关机期间被重置……导致潜在的重要消息被写入标准输出而不是日志机制。

例如，这段代码：

```
String settings =
        "akka.event-handlers = [\"akka.event.slf4j.Slf4jEventHandler\"]\n" +
        "akka.actor.provider = \"akka.cluster.ClusterActorRefProvider\"";
Config config = ConfigFactory.parseString(settings);
ActorSystem system = ActorSystem.create("testing", config);
LoggingAdapter log = Logging.getLogger(system, new Object());
log.info("Via SlF4J");
system.shutdown();
Thread.sleep(1000);
log.info("After shutdown"); 
```

产生这个输出：

```
17:24:11.999 [testing-akka.actor.default-dispatcher-4] INFO  akka.event.slf4j.Slf4jEventHandler - Slf4jEventHandler started
17:24:12.151 [testing-akka.actor.default-dispatcher-4] INFO  N.168.1.106:2552) - RemoteServerStarted@akka://testing@192.168.1.106:2552
17:24:12.155 [testing-akka.actor.default-dispatcher-4] INFO  java.lang.Object - Via SlF4J
[INFO] [04/12/2013 17:24:12.218] [testing-akka.actor.default-dispatcher-4] [NettyRemoteTransport(akka://testing@192.168.1.106:2552)] RemoteServerShutdown@akka://testing@192.168.1.106:2552
[INFO] [04/12/2013 17:24:13.156] [main] [Object(akka://testing)] After shutdown 
```

前三行输出是通过 SLF4J（我配置的记录器），而最后两行是通过`akka.event.Logging$StandardOutLogger`-- 这意味着在关闭期间记录的异常（在某些情况下我看到一些）正在丢失到记录器。

（当然，看到 RemoteServerShutdown 消息正确记录也很高兴。）

有人对这种行为有任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:16:19.310

Akka 的日志记录是建立在 Actor 之上的，由于所有 Actor 在此期间都被关闭，`ActorSystem.shutdown()`因此它必须在某个时候停止工作。回退到控制台日志记录已经到位，因此非常晚记录的消息仍然没有完全丢失。

您所看到的是，您`log.info`有时会在关闭日志记录的时间点之前和有时之后进入，因为`ActorSystem.shutdown()`只是启动关闭然后异步进行。

因此，结论是通过参与者系统进行日志记录应该只在参与者系统内完成，因为这样可以确保事情仍然正常运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:36:29.823

这个问题似乎可以通过升级到 Akka 2.10-2.1.2 来解决。

# java - 如何创建 Jaxb java 类来处理类似的元素

> ID：15982494
> 
> 赞同：0
> 
> 时间：2013-04-12T23:37:12.250
> 
> 标签：java, jaxb

我有一个架构：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="get_item">
    <xs:complexType>
      <xs:sequence>
        <xs:element type="xs:anyURI" name="imgpurl1"/>
        <xs:element type="xs:anyURI" name="imgurl1"/>
        <xs:element type="xs:string" name="imgcap1"/>
        <xs:element type="xs:anyURI" name="imgpurl2"/>
        <xs:element type="xs:anyURI" name="imgurl2"/>
        <xs:element type="xs:string" name="imgcap2"/>
        <xs:element type="xs:anyURI" name="imgpurlN"/>
        <xs:element type="xs:anyURI" name="imgurlN"/>
        <xs:element type="xs:string" name="imgcapN"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

用于此的 xml 如下所示：

```
<?xml version=“1.0”?>
<get_item>
 .......snip.......
<imgpurl1></imgpurl1>
<imgurl1></imgurl1>
<imgcap1></imgcap1>
…
<imgpurlN></imgpurlN>
<imgurlN></imgurlN>
<imgcapN></imgcapXN>
</get_item> 
```

imgurl1...N 可以有任意数量的元素。我不知道 N 可以/将会是什么，所以我希望能够将它作为参数传递并自动正确创建它。

显然，从模式生成的 Eclipse 不提供此功能，那么如何修改创建的类以便它们处理 N 个元素？

有没有办法做一个自定义的 jaxb 适配器来按照我需要的方式编组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T23:51:30.323

你能不能试试这样的东西：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"  
xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="get_item">
<xs:complexType>
   <xs:sequence>
      <xs:element type="xs:anyURI" name="imgpurl" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element type="xs:anyURI" name="imgurl" minOccurs="0" maxOccurs="unbounded"/>
      <xs:element type="xs:string" name="imgcap" minOccurs="0" maxOccurs="unbounded"/>
   </xs:sequence>
</xs:complexType>
</xs:element>
</xs:schema> 
```

# php - Facebook 连接相似服务设计实践

> ID：15982496
> 
> 赞同：1
> 
> 时间：2013-04-12T23:37:31.727
> 
> 标签：php, javascript

关于这个有几个线程，但我只需要知道如何从 sitea.com 上的 siteb.com 读取 cookie，它在 iframe 上打开 siteb.com，**如果**这确实是推荐的方式。

根据[这篇](http://nfriedly.com/techblog/2010/08/how-facebook-sets-and-uses-cross-domain-cookies/)文章，作者说：

> 如果 Cookie 设置在 iframe 之外，则可以在 iframe 中读取它们

但我不知道如何实现这一目标。让我更多地解释一下我试图设计的东西，所以也许你可以指出我正确的方向。

siteb.com 是我的网站，用户在这里登录和注册，每次他们这样做时，都会像许多普通的身份验证系统一样设置一个 cookie。

sitea.com 是一个通用站点，我可以在其中插入 html 和 javascript 代码，从我需要的站点（如果存在）读取站点的登录 cookie。我认为 sitea 加载 siteb 上的 iframe 可以解决问题，但同样，我不知道如何访问 iframe 内的 cookie。是否有捷径可寻？

我正在考虑的另一种方法是使用跨域 iframe 通信技术，但它们并不优雅，方式复杂，其中一些在某些浏览器中失败，最强大的那些使用 jquery，但我不想在 sitea 上插入 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T01:04:09.570

这是您需要的：[http](http://easyxdm.net/) : //easyxdm.net/ - 在 sitea.com 和 siteb.com iframe 上加载此库。它使用每个浏览器中可用的最快方法使跨域父 iframe 通信在每个浏览器中“正常工作”。（另外，作者[https://stackoverflow.com/users/128035/sean-kinsey](https://stackoverflow.com/users/128035/sean-kinsey)在帮助任何在图书馆遇到问题的人方面做得非常出色 - 只需检查邮件列表档案）

然后向您的 siteb.com iframe 添加一点点 JavaScript 来读取 cookie 并将它们传递给 easyxdm，然后向 sitea.com 添加一点 JavaScript 以设置 easyxdm（我认为包括创建 iframe）并接收 cookie 值从中。网站上有很多示例可以帮助您入门。

# c# - 如何将 C# 字符串中的 UTF-8 字节存储在 SQL Server 2000 TEXT 列中

> ID：15982499
> 
> 赞同：3
> 
> 时间：2013-04-12T23:37:56.097
> 
> 标签：c#, unicode, sql-server-2000

我有一个现有的 SQL Server 2000 数据库，它将 UTF-8 表示的文本存储在 TEXT 列中。我没有修改列类型的选项，并且必须能够将来自 C# 程序的非 ASCII Unicode 数据存储到该列中。

这是代码：

```
sqlcmd.CommandText =
    "INSERT INTO Notes " +
    "(UserID, LocationID, Note) " +
    "VALUES (" +
        Note.UserId.ToString() + ", " +
        Note.LocationID.ToString() + ", " +
        "@note); " +
    "SELECT CAST(SCOPE_IDENTITY() AS BIGINT) ";

SqlParameter noteparam = new SqlParameter( "@note", System.Data.SqlDbType.Text, int.MaxValue ); 
```

在这一点上，我尝试了几种不同的方法来将我的 UTF-8 数据放入参数中。例如：

```
// METHOD ONE
byte[] bytes = (byte[]) Encoding.UTF8.GetBytes( Note.Note );
char[] characters = bytes.Select( b => (char) b ).ToArray();
noteparam.Value = new String( characters ); 
```

我也试过简单

```
// METHOD TWO
noteparam.Value = Note.Note; 
```

和

```
// METHOD THREE
byte[] bytes = (byte[]) Encoding.UTF8.GetBytes( Note.Note );
noteparam.Value = bytes; 
```

继续，这是其余的代码：

```
sqlcmd.Parameters.Add( noteparam );
sqlcmd.Prepare();

try
    {
    Note.RecordId = (Int64) sqlcmd.ExecuteScalar();
    }
catch
    {
    return false;
    } 
```

方法一（将 UTF8 字节转换为字符串）做了一些奇怪的事情——我认为这是对字符串第二次进行 UTF-8 编码。

方法二存储垃圾。

方法三在 ExecuteScalar() 中引发异常，声称无法将参数转换为字符串。

我已经知道的事情，所以不需要告诉我：

*   SQL Server 2000 已过/即将停产
*   TEXT 列不适用于 Unicode 文本
*   说真的，SQL Server 2000 已经过时了。你需要升级。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T03:21:59.840

如果您的数据库排序规则是 SQL_Latin1_General_CP1（美国版 SQL Server 2000 的默认值），那么您可以使用以下技巧将 Unicode 文本作为 UTF-8 存储在`char`、`varchar`或`text`列中：

```
byte[] bytes = Encoding.UTF8.GetBytes(Note.Note);
noteparam.Value = Encoding.GetEncoding(1252).GetString(bytes); 
```

稍后，当您想回读文本时，请反转该过程：

```
SqlDataReader reader;
// ...
byte[] bytes = Encoding.GetEncoding(1252).GetBytes((string)reader["Note"]);
string note = Encoding.UTF8.GetString(bytes); 
```

如果您的数据库排序规则*不是*SQL_Latin1_General_CP1，那么您需要将 1252 替换为正确的[代码页](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)。

**注意：**如果您查看企业管理器或查询分析器中存储的文本，您会看到奇怪的字符代替非 ASCII 文本，就像您在不支持 Unicode 的文本编辑器中打开 UTF-8 文档一样.

**工作原理：**在非 Unicode 列中存储 Unicode 文本时，SQL Server 自动将文本从 Unicode 转换为数据库排序规则指定的代码页。目标代码页中不存在的任何 Unicode 字符都将被不可逆转地损坏，这就是前两种方法不起作用的原因。

但是您使用方法一走在正确的轨道上。缺少的步骤是通过使用 Windows-1252 代码页将原始 UTF-8 字节转换为 Unicode 来“保护”原始 UTF-8 字节。现在，当 SQL Server 执行从 Unicode 到 Windows-1252 的自动转换时，它会恢复原样的原始 UTF-8 字节。

# javascript - 任何基于 JavaScript/jQuery 的 html 数据处理器/美化器？

> ID：15982500
> 
> 赞同：4
> 
> 时间：2013-04-12T23:38:01.170
> 
> 标签：javascript, jquery, html, node.js, dom

我需要在服务器端处理“脏”的 html 数据。当我**在服务器端使用 Node.JS 和 jQuery 时**，我可以使用 JS 和 jQuery DOM-parser 的所有功能来处理我的 html 内容。

“脏”数据意味着以下内容：

```
<br ><br />Home <a href="http://habrahabr.ru/post/169139/"> gamy code </ a> 
<br>
Technique: <a href="http://habrahabr.ru/post/173903/"> Preparation methods </ a> <br>
<br>
In continuation, the technique based on the book Refactoring Refactoring <a href="http://www.ozon.ru/context/detail/id/1308678/">. Improvement of existing code by Martin Fowler. </ A> <br>
  <a href="http://habrahabr.ru/post/174779/#habracut"> Read more → </ a> 
```

因此，它可能在开头/中间有几个 br，空 p 等。我尝试使用

```
$('*:empty').remove(); 
```

但是，如果帖子开始形成

```
Home <a href="http://habrahabr.ru/post/169139/"> gamy code </ a> <br> 
```

"<a href="http://habrahabr..." 之前的所有内容都被删除。

**那么，是否有任何可靠的生产就绪的基于 JS/jQuery 的解决方案来美化 html 数据以删除开头的空标签/中间的双 br/p 等？**

ps 不想使用简单的正则表达式，因为在如此肮脏的内容中可能会发生很多不同的情况

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:49:03.250

有一个名为 jQuery-Clean 的插件在这种情况下可能会有所帮助：[https ://code.google.com/p/jquery-clean/](https://code.google.com/p/jquery-clean/)

该插件执行以下操作：

*   修复自闭标签
*   小写标签
*   移除非标准属性
*   删除内联样式属性
*   删除内联事件属性
*   可选地删除其他属性
*   整理不必要的空白和新行
*   删除评论
*   删除专有的文字格式标签
*   替换标签，例如 i=>em
*   可选地保留 css 类
*   html格式和缩进

不幸的是，我找不到其他任何东西。我觉得我必须说可能有必要编写一些正则表达式来完成您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:45:28.247

总的来说，这里有一个叫做[js-beautify](https://github.com/einars/js-beautify)。这将美化 Javascript、HTML、CSS 和 JSON。

# javascript - 如何旋转已生成或生成的六边形点，以使第一个点位于中心顶部？

> ID：15982502
> 
> 赞同：0
> 
> 时间：2013-04-12T23:38:18.577
> 
> 标签：javascript, math, geometry

所以我有这个代码：

```
var points = 6;
var width = w;
var height = h;
var angle = ((2 * Math.PI) / points);
var hexagon = [];

for (i = 0; i < points; i++) {
    hexagon.push({
        x: width * Math.cos(angle * i), 
        y: height * Math.sin(angle * i)
    })
} 
```

这将产生 6 个点/位置，如果我在它们之间画一条线，我会得到一个六边形，但我想旋转这些点或生成不同的点，以便第一个点始终位于中心顶部，如下所示：

![六边形](https://i.stack.imgur.com/X4VuM.png) 我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:29:36.400

你可以交换`sin`和`cos`.

# python - Cython 的意外输出和返回值

> ID：15982503
> 
> 赞同：3
> 
> 时间：2013-04-12T23:38:18.567
> 
> 标签：python, python-2.7, cython

首先，我将 Cython 0.18 与 Python 2.7.4 一起使用。我遇到了一个相当奇怪的错误，我不知道为什么。这是玩具代码：

```
from cpython cimport bool

cpdef unsigned int func(char *seq1, char *seq2, bool case_sensitive=True):
        print 'seq1', seq1, len(seq1)
        print 'seq2', seq2, len(seq2)
        print

        #take care of case sensitivity
        if not case_sensitive:
                #this is kinda hacky, but I've gotta assign the lowercased string to a Python object before assigning it back to char *
                #see http://docs.cython.org/src/userguide/language_basics.html#caveats-when-using-a-python-string-in-a-c-context
                temp = seq1.lower()
                seq1 = temp

                temp = seq2.lower()
                seq2 = temp

        print 'seq1', seq1, len(seq1)
        print 'seq2', seq2, len(seq2)
        print

        #trim common characters at the beginning of the words
        while len(seq1) > 0 and len(seq2) > 0 and seq1[0] == seq2[0]:
                temp = seq1[1:]
                seq1 = temp

                temp = seq2[1:]
                seq2 = temp

        print 'seq1', seq1, len(seq1)
        print 'seq2', seq2, len(seq2)
        print

        #handle degenerate cases
        if not seq1:
                return len(seq2)
        if not seq2:
                return len(seq1) 
```

这是一个示例调用：

```
>>> from func import func
>>> print func('TUESDAYs', 'tuesday', False) 
```

现在，我希望看到以下内容：

```
seq1 TUESDAYs 8
seq2 tuesday 7

seq1 tuesdays 8
seq2 tuesday 7

seq1 s 1
seq2  0

1 
```

但我实际看到的是这样的：

```
seq1 TUESDAYs 8
seq2 tuesday 7

seq1 tuesdays 8
seq2 tuesday 7

seq1 stdout 6
seq2 tuesday 7

0 
```

这到底是怎么回事？首先，为什么要`stdout`输出？为什么我没有得到我应该得到的输出？这是 Cython 错误，还是我只是在这里遗漏了一些微不足道的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:17:03.877

在所有情况下，问题都是这样的：

```
temp = seq1.lower()
seq1 = temp

temp = seq2.lower() 
```

你需要做这个舞蹈而不是仅仅- 正如`seq1 = seq1.lower()`你在你的问题中指出的那样 - 是因为[在 C 上下文中使用 Python 字符串时的注意事项](http://docs.cython.org/src/userguide/language_basics.html#caveats-when-using-a-python-string-in-a-c-context)。

但是你所做的并不正确，它足以让 Cython*认为*它是正确的并编译垃圾。

让我们逐行浏览：

```
temp = seq1.lower() 
```

这会创建一个`str`out of `seq1`，调用它的`lower()`，并将结果存储在`temp`.

```
seq1 = temp 
```

这会`seq1`变成一个指向 中`str`对象的内部缓冲区的指针`temp`。正如文档特别说的：

> 然后，您有责任在必要时保留参考 p。

```
temp = seq2.lower() 
```

这个 yadda-yadda-yaddas，并将结果存储在`temp`. 结果，它释放了 的旧值`temp`。这是您对此的唯一参考`str`。因此，GC 可以自由地收集它，并且会立即收集。这意味着`seq1`现在指向已释放对象的内部缓冲区。

前两次，您显然很幸运，并且该缓冲区没有被重用。但最终，在`while`循环中，它失败了，缓冲区被重用，你最终得到一个指向其他字符串缓冲区的指针。

* * *

那么，你如何解决这个问题？

好吧，只要需要，您就可以保留所有这些中间引用。

但实际上，你为什么需要`seq1`并`seq2`成为`char*`价值观呢？您不会从中获得任何性能优势。事实上，您会从中获得额外的性能*成本*。每次使用`seq1`as a`str`时，它都会从该缓冲区中创建一个新`str`对象（并复制缓冲区），即使您已经拥有一个非常好的对象，如果您没有欺骗 Cython，您可以保留它。

因此，最简单的解决方法是将第一行替换为：

```
cpdef unsigned int func(char *sequence1, char *sequence2, bool case_sensitive=True):
    seq1, seq2 = str(sequence1), str(sequence2) 
```

（你真的不需要`str`那里的电话；你没有`cdef`变量的事实应该足够了。但我认为这使意图更清楚。）

# javascript - 将 javascript 变量传递给 gsp g:link 标记

> ID：15982504
> 
> 赞同：0
> 
> 时间：2013-04-12T23:38:19.567
> 
> 标签：javascript, grails, gsp

我希望在 ag:link gsp 标记的 id 字段中传递一个 javascript 变量，但不知道该怎么做。如果我以错误的方式解决这个问题，请告诉我。

这是我所拥有的：

*   每行都有我想在 g:link 中传递的 id 的表
*   javascript 表行的 onClick 设置了一个带有行 id 值的 javascript 变量

```
 <r:script disposition="head">
      var data = -1;
      $(document).ready(function () {
        $('#${tableId} tr').click(function (event) {
          data = $(this).attr('id');
        });
      });
    </r:script> 
```

*   然后我想将 javascript`data`变量传递给 ag:link

```
 <li><g:link controller="filterIntraday" action="show" id="??????">View</g:link></li> 
```

我不能让它工作。如何在 gsp 标签中设置 javascript 变量。或者在 g:link 标签中传递客户端变量的另一种方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T02:21:16.793

您无法在 gsp 标签中设置 id，因为该标签已被处理。您可以做的是更改`href`生成的 html 的。为此，您需要为`<a>`元素分配一个 id。

```
<li><g:link controller="filterIntraday" action="show" elementId="linkToFilter">View</g:link></li> 
```

这将创建如下内容：

```
<li>a<a href='yourapp/filterIntraday/show' id="linkToFilter" /></li> 
```

然后在你的javascript中你可以改变href：

```
data = $(this).attr('id');
$link = $('#linkToFilter');
$link.attr('href', $link.attr('href')+'/'+data); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T00:30:41.200

如何在事件函数中更改“href”属性：

```
function (event) {
    data = $(this).attr('id');
    $("link-selector").attr("href", "${createLink(controller: 'filterIntraday', action: 'show')}/" + data);
} 
```

# android - 将 Android Button 设置为另一个按钮高度的一半

> ID：15982507
> 
> 赞同：0
> 
> 时间：2013-04-12T23:38:55.937
> 
> 标签：android, android-layout, android-xml

我想完成的事情我确信可以通过代码来完成，但我需要（如果可能的话）通过声明性 XML 来完成。我想将一个按钮设置为另一个按钮高度的一半。

我在 ViewGroup 文档中发现您可以参考其他组件，它甚至说了这么多：

> 这也可能是对包含此类型值的资源（形式为“@[package:]type:name”）或主题属性（形式为“?[package:][type:]name”）的引用.

但是，我不确定如何将其转换为我需要的。

我的活动xml的基本布局如下：

< 相对布局 ... >

```
<LinearLayout ... >

    <fragment ... />

    <LinearLayout ... >

        <ImageButton
            ...
            android:id="@+id/userButton"
            android:layout_height=" *tag_button:layout_height / 2? "
            ... />

        <ImageButton
            ...
            android:id="@+id/searchButton"
            android:layout_height=" *tag_button:layout_height / 2? "
            ... />
    </LinearLayout>
</LinearLayout>

<Button
    android:id="@+id/tag_button"
    android:layout_height="wrap_content"
    ... /> 
```

< /相对布局>

> 我真正想要的只是将 userButton:layout_height 和 searchButton:layout_height 设置为 tag_button:layout_height 的一半

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:45:50.267

如果要将两个按钮都放在线性布局中，则可以使用布局权重

```
<LinearLayout ... >

    <ImageButton
        ...
        android:id="@+id/userButton"
        android:layout_height="0dip"
        android:layout_weight="1"
        ... />

    <ImageButton
        ...
        android:id="@+id/searchButton"
        android:layout_height="0dip"
        android:layout_weight="2"
        ... />
</LinearLayout> 
```

我不确定是否有办法直接引用 XML 中另一个元素的宽度。但是您可以让布局为您完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:49:51.970

您可以像这样使用重量原则：

```
<LinearLayout android:layout_height="match_parent"
   android:layout_width="match_parent"
   android:orientation="vertical" >

<Button android:id="@+id/btnUser"
   android:layout_width="wrap_content"
   android:layout_height="0dp"
   android:layout_weight="1" >

<Button android:id="@+id/btnSearch"
   android:layout_width="wrap_content"
   android:layout_height="0dp"
   android:layout_weight="1" >

<Button android:id="@+id/btnTag"
   android:layout_width="wrap_content"
   android:layout_height="0dp"
   android:layout_weight="2" >

</LinearLayout> 
```

这样，您的按钮（搜索和用户）将是按钮标签高度的一半。

**注意：权重的概念仅在 中可用`LinearLayout`，因此如果您有 a `RelativeLayout`，请尝试在其中添加 type 的子布局`LinearLayout`，然后，您可以使用`android:layout_weight`**

# javascript - 函数中函数的参数的初始值是多少？

> ID：15982508
> 
> 赞同：0
> 
> 时间：2013-04-12T23:39:03.177
> 
> 标签：javascript, function, arguments

使用下面的代码：

```
 function makeAddFunction(amount) {
     function add(number) {
         return number + amount;
     }
     return add;
 }

 var addTwo = makeAddFunction(2);
 var addFive = makeAddFunction(5);
 console.log(addTwo(1) + addFive(1)); 
```

控制台打印出 9。我假设 add 函数中的“数字”为零，但为什么“数字”的值最初为 0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:41:58.513

关于这个没有“最初的0”。

您首先返回一个将数字加 2 的函数，然后创建一个将数字加 5 的函数。

因此，您已经有效地编写了：

`console.log((2 + 1) + (5 + 1));`

3 + 6 是 9。

addTwo 本质上是：

```
var addTwo = function (number) {
     return number + 2;
 } 
```

添加 addFive 是：

```
var addFive = function (number) {
     return number + 5;
 } 
```

因为您将其用作[闭包](http://web.archive.org/web/20080209105120/http://blog.morrisjohns.com/javascript_closures_for_dummies)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:45:04.510

当您调用 时`makeAddFunction`，它会获取您传入的参数`amount`，然后返回该内部函数。

因此，当您传入 2 时，它会返回：

```
 function add(number) {
     return number + 2;
 } 
```

然后，您将该代码设置为`addTwo`变量。所以当你`addTwo`用参数1调用时，它返回1+2（3）

# ruby - 为什么 puts() 不在一行中打印？

> ID：15982510
> 
> 赞同：3
> 
> 时间：2013-04-12T23:39:10.580
> 
> 标签：ruby

这是一段代码：

```
def add(a, b) 
  a + b;
end

print "Tell number 1 : "
number1 = gets.to_f

print "and number 2 : "
number2 = gets.to_f

puts "#{number1}+#{number2} = " , add(number1, number2) , "\n"` 
```

当我运行它时，我的结果分布在几行：

```
C:\Users\Filip>ruby ext1.rb
告诉数字 1 : 2
和数字 2 : 3
3.0+3.0 =
5.0

C:\用户\菲利普>

```

为什么不`puts()`打印在一行中，如何将输出保持在一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T23:43:21.927

~~`gets()`包括换行符。将其替换为`gets.strip`。~~（*更新：*你更新了你的代码，所以如果你喜欢使用浮动，这不再相关。）

[puts()](http://ruby-doc.org/core-2.0/IO.html#method-i-puts)为尚未以换行符结尾的每个参数添加一个换行符。您的代码相当于：

```
print "#{number1}+#{number2} = ", "\n",
      add(number1, number2) , "\n",
      "\n" 
```

您可以替换`puts`为`print`：

```
print "#{number1}+#{number2} = " , add(number1, number2) , "\n"` 
```

或更好：

```
puts "#{number1}+#{number2} = #{add(number1, number2)}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T23:42:22.603

因为`puts`打印一个字符串，后跟一个换行符。如果您不想要换行符，请`print`改用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T23:42:25.267

Puts 在输出的末尾添加一个换行符。打印没有。尝试打印。

[http://ruby-doc.org/core-2.0/IO.html#method-i-puts](http://ruby-doc.org/core-2.0/IO.html#method-i-puts)

您可能还想替换`gets`为`gets.chomp`.

```
puts "After entering something, you can see the the 'New Line': "
a = gets
print a

puts "After entering something, you can't see the the 'New Line': "
a = gets.chomp
print a 
```

# android - 即使我关闭设备，如何保持应用程序会话打开？

> ID：15982512
> 
> 赞同：1
> 
> 时间：2013-04-12T23:39:31.640
> 
> 标签：android, session, login

我想制作一个需要登录服务器的应用程序，并且即使我重新启动设备（例如 Facebook 应用程序），我也想保持会话打开。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:55:25.120

您将需要通过服务器进行身份验证，然后在设备上存储用户身份验证令牌。一旦将其本地存储在设备上，您就可以在下次访问服务器时使用它进行身份验证，而不是第一次使用的查询/响应。

# python - (Python) Selenium Webdriver 在获取新 url 后返回旧元素

> ID：15982515
> 
> 赞同：2
> 
> 时间：2013-04-12T23:40:02.117
> 
> 标签：python, selenium, webdriver, web-scraping

我有一个非常简单的过程，在循环中，我得到一个 url，等待某些元素使用 WebDriverWait 加载，然后开始处理页面源。

我遇到的问题是，如果我没有在 driver.get(url) 之间添加明确的等待时间，webdriver 可以从旧页面而不是最新页面返回元素。如果我添加显式（例如 3 秒）或调用 driver.get(url) 两次，问题就会得到解决。

有没有人遇到过这个问题或知道如何解决它？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-07T11:13:09.743

实际上，我在 Firefox 上使用 geckodriver 遇到过这种情况，这是因为您通过单击旧元素加载了另一个页面。该驱动程序对象需要刷新。重新加载需要遍历的页面对我有用，等待没有帮助。

```
driver.get(driver.current_url) 
```

编辑：Chrome 似乎没有这个问题，驱动程序可以直接从点击的页面访问元素。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-13T15:08:22.800

这似乎是网络浏览器的问题。这就是为什么在`driver.get(url)`我通常检查之后，如果`driver.get()`成功：

```
driver.get(url)
sleep(n_seconds) #that is not necessary.
if driver.current_url == url:
    #do something
else:
    #try again to get the page or wait more. 
```

# matlab - 在 Matlab 中使用 SPMD 发送数据

> ID：15982516
> 
> 赞同：3
> 
> 时间：2013-04-12T23:40:07.553
> 
> 标签：matlab, parallel-processing

在 Matlab (2012b) 中，有没有办法在 SPMD 创建的一个线程发送数据之前停止它？因为线程 2 只有有限大小的缓冲区来接收来自线程 1 的数据，并且根据 matlab，labSend() 将在数据传输完成之前返回，这意味着理论上线程 1 可以继续向线程 2 发送数据，直到系统运行记不清：

我想做的是这样的：

```
 spmd (2)

  if labindex==1
    %...
    if (BufferAtLab2isNotFull)
        labSend(data, 2);
    end
    %...
  elseif labindex==2
    if (BufferNotFull)
      labReceive(data, 1);
    end
    %...

  end
 end 
```

在 C/C++ 中，使用共享内存多线程很容易做到这一点，但在 matlab 中似乎很难，因为没有可检查的共享资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T23:06:25.210

如果您希望 lab 1 在每个之后等待，`labSend`直到 lab 2 完成它`labRecieve`，然后简单地将 a 添加`labBarrier`到每个中，这将导致 lab 1 等待，直到所有线程都到达该点。

```
spmd (2)
  if labindex==1
    %...
    if (BufferAtLab2isNotFull)
      labSend(data, 2);
    end
    labBarrier;
    %...
  elseif labindex==2
    labSend(bufSize,1);
    %...
    if (BufferNotFull)
      labReceive(data, 1);
    end
    labBarrier;
    %...
  end
end 
```

如果您担心 Lab 1 在单个 labSend 中发送过多，您总是可以让 lab 2 先发送它的缓冲区大小。

# c - char *derp[20] 是什么意思？

> ID：15982517
> 
> 赞同：2
> 
> 时间：2013-04-12T23:40:14.053
> 
> 标签：c, arrays, string, pointers

另外：这段代码有意义吗？（我是C新手，所以不确定）

```
char*s1 = derp[0]; 
char*s2 = derp[1]; 
```

我觉得derp是一个指向字符的指针数组（即一个字符串数组），我试图从数组中取出两个字符串。但是，当我尝试将这两个 char* 传递给一个函数（其原型是 FindMaxOverlap(char*long, char*short) 时，编译器会向我抛出一个错误，指出存在 FindMaxOverlap 函数的隐式定义）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:42:07.247

```
 char *derp[20]: 
```

声明为指向 的指针`derp`数组。`20``char`

```
char*s1 = derp[0]; 
```

声明`s1`一个指针，用指向元素的`char`第一个指针进行初始化。只要 的第一个元素已正确分配，例如使用.`char``derp``derp``malloc`

您可以将`s1`and传递`s2`给您的`FindMaxOverlap`函数，但`derp[0]`必须`derp[1]`指向有效对象。

当您调用`FindMaxOverlap`函数时，`FindMaxOverlap`必须在源文件中声明，例如使用包含文件或通过在文件范围内声明原型。

另请注意，`long`and`short`是 C 中的关键字，您不能将它们用作函数参数的标识符。

# objective-c - 在 UITextView 中标记文本，如 Facebook 标记位置

> ID：15982520
> 
> 赞同：1
> 
> 时间：2013-04-12T23:40:36.510
> 
> 标签：objective-c, uitextview, core-text, nsattributedstring, catextlayer

我有一个签到屏幕，用户可以在其中添加评论和位置。它与 Facebook 的状态更新屏幕非常相似。

脸书截图：[http ://d.pr/i/Mz9U](http://d.pr/i/Mz9U)

我在将位置名称添加为文本字段中的不可编辑文本时遇到了麻烦（参考 Facebook 截图中的钻石区）。我试过玩 NSMutableAttributedString 但无济于事。

使用 NSMutableAttributedString 只是帮助我将格式化的属性字符串添加到 UITextView （并使其看起来像 facebook 显示的那样），*但我如何注意添加到它的属性字符串不可编辑但可点击（可能再次加载位置）。*

我的应用截图：[http ://d.pr/i/MpUe](http://d.pr/i/MpUe)

提前致谢 ：-）

# ios - 将多边形组合在一起

> ID：15982521
> 
> 赞同：1
> 
> 时间：2013-04-12T23:40:57.377
> 
> 标签：ios, pdf, core-graphics, cgpdfcontext

# 如何消除三角形之间的边界？

![带有白色边界的黑色三角形](https://i.stack.imgur.com/ds3AH.png)

我正在我的[三角形绘图应用程序](http://triangledraw.com/)中实现导出到 pdf 。上图显示了 pdf 输出的样子。到处都有白色边界，宽度小于 1 像素。

三角形可以有任何颜色。

* * *

我绘制每个三角形，如下所示：

```
CGContextBeginPath(context);
CGContextMoveToPoint(context, x0, y0);
CGContextAddLineToPoint(context, x1, y1);
CGContextAddLineToPoint(context, x2, y2);
CGContextClosePath(context);
CGContextFillPath(context); 
```

重要的是黑白三角形具有相同的大小。

* * *

## 方法

### 方法 1 - 中风

在所有三角形周围画一个 1 像素粗的笔划。

### 方法 2 - 挤出

将所有三角形拉伸 2 个像素，使三角形重叠。

### 方法 3 - 结合

将接触的三角形组合成一个多边形。

### 方法 4 - PDF 重叠设置

也许 PDF 具有消除边界的设置。不知道。

### 方法 5 - 后处理

创建一个过滤器来检测边界像素并消除它们。这对我不起作用，它需要保存为 PDF。iOS、AFAIK 上的 PDF 不支持着色器代码。

### 方法 X - 更智能的方法

有没有更好的方法将三角形拼接在一起？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:42:12.980

您的坐标（`x0`、`y0`、`x1`、`y1`等）是否为整数点值？人们犯这种错误很常见，因为他们习惯于将视图的框架设置在整个点的边界上。CoreGraphics 使用以您提供的坐标*为中心*绘制的一点线进行绘制。我怀疑在所有情况下，您都可以通过将坐标调整 0.5 点来消除伪影：

```
CGContextBeginPath(context);
CGContextMoveToPoint(context, x0 + 0.5, y0 + 0.5);
CGContextAddLineToPoint(context, x1 + 0.5, y1 + 0.5);
CGContextAddLineToPoint(context, x2 + 0.5, y2 + 0.5);
CGContextClosePath(context);
CGContextFillPath(context); 
```

**编辑：实际上我认为这不会奏效。这是另一个建议：**

我将留下我之前的评论，因为我认为我所说的关于 CoreGraphics 坐标的内容是正确的，但是我尝试了一些你描述的设置的实验，并且将所有内容转移并没有消除那些边界伪影。但是添加此行确实：

```
CGContextSetAllowsAntialiasing(context, false); 
```

（我不知道为什么`CGContextSetAllowsAntialiasing`声明采用 stdbool 风格的 bool，但这就是为什么我使用这里`false`而不是`NO`这里，而不是它有所作为。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T15:39:10.553

便宜/简单的解决方案是绘制每个三角形两次。这将减少抗锯齿，但会提高边缘的覆盖率。如果颜色都相同，则渲染为单个路径也应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T20:01:54.243

# 方法 3 - 结合

我正在使用[GPC – General Polygon Clipper 库](http://www.cs.man.ac.uk/%7Etoby/gpc/)，它几乎可以按要求工作。

我一次运行一个三角形的 UNION 操作。直到所有三角形都被合并到结果中。

下面是 GPC 的输出。看不到白边。

![使用 GPC 时的输出。](https://i.stack.imgur.com/xULju.png)

* * *

我也尝试使用[Angus Johnson 的 Clipper 库](http://www.angusj.com/delphi/clipper.php)，但无法通过一次 UNIONing 一个三角形来构建多边形。它只删除了三角形之间的一些白色边缘。尽管 Clipper 似乎比 GPC 更强大。

下面是 Clipper 的输出，它显示了白色边缘。 ![使用 Clipper 时的输出，有白边](https://i.stack.imgur.com/j5hyF.png)

# command-line - 显示来自 Graphviz 的图像而不创建中间文件？

> ID：15982522
> 
> 赞同：14
> 
> 时间：2013-04-12T23:40:58.043
> 
> 标签：command-line, graphviz

我想在不先写入文件的情况下显示图表。

假设我有一个`foo`在标准输出上产生这个的命令：

```
digraph foogrph {
   a -> b;
   a -> c;
} 
```

我想做的是通过管道`foo`输入`dot`，然后将结果输入一个命令，该命令将在图形环境中显示图像。

```
foo | dot -Tpng | <display command> 
```

我找到了一种涉及临时文件的解决方法。在 OSX 中，我可以执行以下操作：

```
foo | dot -Tpng > temp && open temp 
```

但我仍然必须从文件系统中删除文件。

如何显示正在写入标准输出的图像？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T00:19:49.673

使用 ImageMagick 的 display 命令，这些可以在 Ubuntu 12.10（以及很可能其他操作系统）上运行：

```
dot abac.dot -Tsvg | display
dot abac.dot -Tpng | display 
```

SVG 具有随窗口平滑缩放的优点（如果这是您想要的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-20T01:03:03.033

在 OSX 和 iTerm2 上，您可以执行以下操作（假设安装了[imgcat](https://www.iterm2.com/documentation-images.html)）

```
dot abac.dot -Tpng | imgcat 
```

[![在此处输入图像描述](https://i.stack.imgur.com/JPsiH.png)](https://i.stack.imgur.com/JPsiH.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-14T04:17:47.117

在 Linux 上，您也可以只使用`-Tx11:cairo`来显示直接 X11 窗口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-23T14:08:27.677

要完成已接受的答案（完全可以），如果还想避免使用`.dot`文件：

`echo 'digraph { a -> b }' | dot -Tpng | display`

（这仅适用于linux，我也第一次尝试`eog`似乎不接受通过管道的png）

改编自 rom 的graphviz 命令行使用[文档](https://www.graphviz.org/doc/info/command.html)。

# codeigniter - CI Helpers 中 $this->_ci_cached_vars 的等效函数

> ID：15982524
> 
> 赞同：2
> 
> 时间：2013-04-12T23:41:07.730
> 
> 标签：codeigniter, codeigniter-helpers

我正在codeigniter 中创建一个自定义助手。有一个实例，我检查是否将某些参数传递给视图。

在视图中，我可以使用此函数获取所有传递的变量：

```
$this->_ci_cached_vars 
```

但在自定义助手中使用时它返回空白。

有没有可以在助手中使用的等效功能？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:01:37.087

`_ci_cached_vars`是`Loader`类的属性。所以这样的事情应该可以工作（未经测试）：

```
$CI =& get_instance();
$vars = $CI->load->_ci_cached_vars; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T18:03:02.260

您可以`$GLOBALS['CI']->load->get_var('your_key_here')`在 CI 2.1.2 中使用经过测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T14:30:56.003

我不确定旧版本的 CodeIgniter 是否支持这一点，但在 v3 版本中，Loader 类有一个公共方法[`get_vars()`](https://github.com/bcit-ci/CodeIgniter/blob/develop/system/core/Loader.php#L535)，允许您读取`_ci_cached_vars`.

虽然这个问题已经很老了，但它是我在搜索这个问题时发现的第一个谷歌。我希望这篇文章能帮助那些在谷歌上和我走同样道路的人！:)

# scala - Scala 将单独的 List[Map[String,Any]] 组合成一个列表并连接 Maps

> ID：15982526
> 
> 赞同：1
> 
> 时间：2013-04-12T23:41:15.403
> 
> 标签：scala, scalaz

我有两个列表，`List[Map[String,String]]`其中第二个 Maps 列表的键“stringKey”与第一个 Maps 列表中的单个“stringKey”匹配。我需要将两个列表合并为一个，并将第二个 Map 的值附加到第一个中。

问题是第二个 Maps 列表可能与第一个列表有重复的键，但可以丢弃这些键。我正在考虑为此使用 scalaz 子组，但在丢弃重复项时迷失了方向。以下是以下两种类型地图的示例：

**第一个列表中的地图 1**：`List(Map("stringKey" -> "a0sd8fa0s8df", "name" -> "#hashtag", "updated" -> "88493048"))`

**第二个列表中的地图 2**：`List(Map("stringKey" -> "a0sd8fa0s8df", "points" -> "1000", "updated" -> "88773055"))`

结果将是`List(Map("stringKey" -> "a0sd8fa0s8df", "name" -> "#hashtag", "points" -> "1000"))`

我猜合并这两个列表将是一个开始。有什么想法吗？谢谢！

## 更新

到目前为止我已经得到了这个，但它给了我一个`List[Option[String],List[Map[String,String]]]`

```
l1 ++ l2 groupBy ( _.get("stringKey") ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:40:42.963

听起来列表中的每个地图都代表一个独特的对象。我会将第一个地图列表转换为地图地图，其中键是“stringKey”的值（对我来说听起来像是唯一的 id）。

拥有至少一个这样的 Map 您可以简单地遍历另一个列表，通过 stringKey 在列表中快速找到子映射并更新它们。

如果需要 - 您可以将地图转换回地图列表。

对于 List2 上的 foldLeft，所有这些 BTW 听起来都不错

更新：这是我到目前为止想出的..似乎可以满足您的需要。

```
val lst1 = List(Map("stringKey" -> "a0sd8fa0s8df", "name" -> "#hashtag", "updated" -> "88493048"))
val lst2 = List(Map("stringKey" -> "a0sd8fa0s8df", "points" -> "1000", "updated" -> "88773055"))

val result = lst2.foldLeft( lst1.map( x => (x("stringKey") -> x ) ).toMap) { (m,v) =>
    val id = v("stringKey")
    m + ( id -> ( m.getOrElse( id, Map()) ++ v) )
 }.values.toList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T02:00:41.963

```
val listA = List(Map("stringKey" -> "a0sd8fa0s8df", "name" -> "#hashtag", "updated" -> "88493048"))
val listB = List(Map("stringKey" -> "a0sd8fa0s8df", "points" -> "1000", "updated" -> "88773055"))

List((listA ++ listB).flatMap(a=>a).toMap) 
```

Res7: List[scala.collection.immutable.Map[String,String]] = List(Map(stringKey -> a0sd8fa0s8df, name -> #hashtag, update -> 88773055, points -> 1000))

如果您只想要唯一的键值对：

```
val a = (listA ++ listB).flatMap(a=>a)
List(a.filter( s => a.distinct.count( t => t._1 == s._1 ) <= 1 ).distinct.toMap) 
```

res20: List[scala.collection.immutable.Map[String,String]] = List(Map(stringKey -> a0sd8fa0s8df, name -> #hashtag, point s -> 1000))

# python - Python 标头——$（美元符号）封装的目的是什么？

> ID：15982529
> 
> 赞同：5
> 
> 时间：2013-04-12T23:41:36.300
> 
> 标签：python, code-documentation

提前道歉，这是我真的认为我可以在网上找到的东西，但我遇到了麻烦。

在 Python 中，在标题部分，我看到有时人们会用美元符号 ( $ ) 包装他们的文字。从示例来看，似乎这是一个用于填写自动更新信息的指针（可能是通过源代码管理？），但我不明白它是如何工作的。

例如：

```
__version__ = '$Revision: 4799 $'.split()[1]
__date__ = '$Date: 2006-09-25 11:09:02 -0400 (Mon, 25 Sep 2006) $'.split()[1]
__author__ = 'John Doe FIX: put in the authors name' 
```

是我在（ [Python 示例文档模板](http://vislab-ccom.unh.edu/~schwehr/Classes/2006/2006Oct-python/template.py) ）中找到的一个示例。所以 $ 包裹在版本（会随着时间而改变）和日期（也会改变）周围。假设它是某种指针，可以始终捕获有关版本、日期等的最新信息，有人可以指出它是如何工作的吗？哪个源代码控制软件使用这种语法？跨语言是一样的吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:46:59.713

这不是 Python 特有的，它是源代码控制系统使用的东西，可以追溯到 RCS 和 CVS。

有关 CVS 语法的列表，请参阅[CVS 关键字](http://www.badgertronics.com/writings/cvs/keywords.html)。虽然现在很少有人使用 CVS，但人们*确实*使用的许多源代码控制系统（最值得注意的是，颠覆）处理 CVS 语法或它的轻微变体。（而且有些人还创建了在构建时而不是签入时执行类似替换的构建脚本。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T23:45:45.483

这是[subversion 的关键字替换](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)（最初是 CVS）的结果。是的，它适用于所有文件，而不仅仅是 python 源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T23:46:00.003

这称为“关键字替换”，这种想法的变体在许多版本控制系统中实现，例如 RCS、CVS 和 Subversion。鉴于此，您现在可以轻松地在网络上搜索详细信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T23:46:04.690

它不是特定于 python 的。

一些版本控制系统（至少是 RCS、CVS 和 SVN）使用这些特殊变量自动插入文件的修订号和最后修改日期。

# python - 定义适用于多个数据帧的运算符

> ID：15982536
> 
> 赞同：2
> 
> 时间：2013-04-12T23:42:07.487
> 
> 标签：python, pandas

假设我有两个数据框：`pd1`和`pd2`

```
pd1 = 
       A      B      C
1  hello    foo  hello
2    foo    bar  hello
3  world    bar  world
4  world    bar  world 
```

和

```
pd2 = 

   A  B  C
1  8  0  3
2  8  5  2
3  4  7  0
4  4  1  3 
```

并说我想做一些事情，比如创建第三个数据框，结果如下

```
 A         B      C
1  hello;8    foo;0  hello;3
2    foo;8    bar;5  hello;2
3  world;4    bar;7  world;2
4  world;4    bar;1  world;0 
```

虽然我可以遍历每个位置，索引两个数据帧并将结果连接到第三个数据帧，但我想知道我是否可以做得更好。

阅读有关[`applymap`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.applymap.html#pandas.DataFrame.applymap)我想知道是否有类似的方法来定义和应用适用于数据帧对的运算符。例如，对于上面的问题，我可以定义以下运算符：

```
def f(x,y):    
    return str(x)  + ';' + str(y) 
```

where`f(x,y)`是一个按元素操作的函数。

这个想法可以扩展到多个数据帧（超过 2 个）。Pandas 中是否有任何内容支持定义此类多数据帧运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:39:08.773

您已经可以做到这一点，只需使用 applymap 进行字符串化；'+' 连接

```
In [14]: df1.applymap(str) + df2.applymap(lambda x: ';%s' % x)
Out[14]: 
     A
0  0;0
1  1;2
2  2;4
3  3;6
4  4;8 
```

可能效率不高，也许你应该只创建你想要的列然后 to_csv 用 sep ';'？

# javascript - Highcharts 气泡与文本

> ID：15982537
> 
> 赞同：0
> 
> 时间：2013-04-12T23:42:09.827
> 
> 标签：javascript, charts, highcharts

我可以制作这样的气泡图吗？

![](https://i.stack.imgur.com/1R2Vw.png)

我试试这个：[Highcharts命名单个气泡](https://stackoverflow.com/questions/15307600/highcharts-naming-of-individual-bubbles)但不起作用：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T12:21:21.640

是的，你可以，你提到的所有帖子都表明了这一点。基础是您需要数据中的标签文本，并且您需要自定义标签格式化程序。例如

```
 series: [{
        dataLabels: {
            enabled: true,
            x:40,
            formatter:function() {
                return this.point.name;
            },
            style:{color:"black"}
        },
        data: [{
            "x": 23,
            "y": 22,
            "z": 200,
            "name":"point1"
        }, {
            "x": 43,
            "y": 12,
            "z": 100,
            "name":"point2"
        }]
    }] 
```

[http://jsfiddle.net/tqVF8/](http://jsfiddle.net/tqVF8/)

dataLabel 中的“x”参数定义了标签相对于点的放置位置的偏移量。您还可以指定一个“y”选项来向上或向下移动它。这些数字可能是负数。

要改变点颜色，您可以为数据中的每个点对象设置一个“颜色”属性。

# mysql - MySQL：跨多个表选择不同并按日期时间排序

> ID：15982538
> 
> 赞同：0
> 
> 时间：2013-04-12T23:42:21.027
> 
> 标签：mysql, distinct

这是一个很难解释的问题，让我们看看我是否可以。

我正在 mysql 中寻找一种方法，通过三个表中的***不同***pid选择最新的 5 个条目（按日期时间 desc 排序） 。

下面是一个例子。

**TABLE1**
*请注意，表 1 中的列 id 需要替换为 pid 以匹配其他表（选择 id 作为 pid）。

```
 id*   datetime
|-----|------------|
|  1  |  1/1/2000  |
|  2  |  2/1/2000  |
|  3  |  3/1/2000  | ← two
|  4  |  1/3/2000  | ← five
|  5  |  1/3/2000  | 
```

**表2**

```
 id    pid    datetime
|-----|-----|------------|
|  1  |  1  |  1/2/2000  |
|  2  |  1  |  1/2/2000  |
|  3  |  2  |  2/2/2000  | ← three
|  4  |  3  |  1/2/2000  |
|  5  |  5  |  1/4/2000  | ← four 
```

**表3**

```
 id    pid    datetime
|-----|-----|------------|
|  1  |  1  |  6/1/2000  | ← one
|  2  |  1  |  1/1/2000  |
|  3  |  1  |  1/1/2000  |
|  4  |  2  |  1/1/2000  |
|  5  |  3  |  1/1/2000  | 
```

**结果将是**

```
 pid    datetime
|-----|------------|
|  1  |  6/1/2000  | ← one
|  3  |  3/1/2000  | ← two
|  2  |  2/2/2000  | ← three
|  5  |  1/4/2000  | ← four
|  4  |  1/3/2000  | ← five 
```

我对mysql很陌生。我四处搜寻，这是迄今为止我想出的最好的，但这是完全错误的。谢谢您的帮助。

```
SELECT DISTINCT pid, datetime 
   from (SELECT id AS pid, datetime FROM table1
         UNION
         SELECT pid, datetime FROM table2
         UNION
         SELECT pid, datetime from table3) t
   ORDER BY datetime DESC
   LIMIT 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T23:49:54.163

您可以选择每个 pid 的最大日期

```
SELECT pid, max(`datetime`) as `datetime`
from (SELECT id AS pid, `datetime` FROM table1
      UNION
      SELECT pid, `datetime` FROM table2
      UNION
      SELECT pid, `datetime` from table3) t
group by pid
ORDER BY max(`datetime`) DESC
LIMIT 5 
```

# c++ - 熊猫 3d Collada 帮助 c++

> ID：15982553
> 
> 赞同：0
> 
> 时间：2013-04-12T23:43:38.657
> 
> 标签：c++, textures, lighting, collada, panda3d

所以我是 C++ 中 Panda 3D 的新手，我创建了 collada 文件或 dae 文件以在 panda 3d 中显示。当我在 pview 中查看它们时，它们显示时没有颜色或纹理。所以如果我按下 L 热键，颜色和纹理就会出现。我知道这与照明有关。这同样适用于我进行 dae2egg 转换之后。当我将模型加载到我的实际程序中时，它是没有颜色的白色。形状是它应该的样子。如果我使用 set_color(...)，颜色会出现，但只有我定义的纯色，当然。所以我很好奇如何纠正这个没有颜色的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T23:05:01.003

您的对象可能具有材料。如果您有材质，则需要在场景图中添加一个或多个光源才能显示出来；这就是它的工作原理。或者，删除材料或使用禁用它`set_material_off(1)`。

# matlab - matlab中的Vertcat错误

> ID：15982554
> 
> 赞同：0
> 
> 时间：2013-04-12T23:44:18.580
> 
> 标签：matlab

当我运行代码时，它在标记行中使用 vertcat 显示错误。它是什么意思以及如何改变它？

```
f = [-10 -20 -40 -10 -10 80 70 90];  
A = [ 1 1 2 1 3 0 0 0 -----> vertcat error
      2 1 3 2 2 0 0 0 
      1 2 1 1 0 0 0 0
     -1 0 0 0 0 1 1 1 
      0-1 0 0 0 1 1 1
      0 0-1 0 0 1 0 0 
      0 0 0-1 0 0 1 0
      0 0 0 0-1 0 0 1];

b  = [800 600 900 0 0 0 0 0]; 
ub = [inf inf inf inf inf 90 57 93]; 
lb = zeros(8,1); 
[x fval]=linprog(-f,A,b,[],[],lb,ub); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:54:38.647

`A`缺少一些空格。这应该有效：

```
A = [ 1 1 2 1 3 0 0 0;
      2 1 3 2 2 0 0 0;
      1 2 1 1 0 0 0 0;
      -1 0 0 0 0 1 1 1;
      0 -1 0 0 0 1 1 1;
      0 0 -1 0 0 1 0 0;
      0 0 0 -1 0 0 1 0;
      0 0 0 0 -1 0 0 1]

A =

     1     1     2     1     3     0     0     0
     2     1     3     2     2     0     0     0
     1     2     1     1     0     0     0     0
    -1     0     0     0     0     1     1     1
     0    -1     0     0     0     1     1     1
     0     0    -1     0     0     1     0     0
     0     0     0    -1     0     0     1     0
     0     0     0     0    -1     0     0     1 
```

# ios - 更改 UIImageView 的位置 - 为什么我收到“请求成员错误”

> ID：15982556
> 
> 赞同：1
> 
> 时间：2013-04-12T23:44:19.837
> 
> 标签：ios, objective-c, uiview, uiimageview

> 在非结构或联合的情况下请求成员“兔子”

为什么我会收到此错误？我的线如下所示：

```
[self.bunny setFrame:CGRectMake(100, 100, 100, 100)]; 
```

声明的属性为：

```
@property (nonatomic, strong) UIImageView *bunny; 
```

我用以下方式初始化它：

```
self.bunny = [[UIImageView alloc] initWithFrame:CGRectMake(5, 5, 50, 50)];
self.bunny.image = [UIImage imageNamed:@"bunny.png"]; 
```

但是所有分配行都因该错误而出错。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:45:19.327

我认为您发布的代码没有任何问题。确保您没有无意中将该属性声明为 a`UIImage`而不是 a `UIImageView`。如果您还没有这样做，请发布来自 VC 的所有代码。

对于其他人的信息，在 Xcode 4.4 及更高版本中，属性会自动合成为`property = _property`.

行。从你发给我的项目中，有两个问题：

1.  如果您不使用，则需要使用 retain 指令而不是 strong 声明该属性`ARC`（您发送给我的项目不是）

2.  您已经将该类实例化为一个类别，您不能这样做并且拥有一个私有类变量。删除该类别名称，或声明

`@property (nonatomic, retain) UIImageView *bunny;`

而是在头文件中。

以及实现文件：

```
#import "SlidingTableViewCell.h"
#import "CellBack.h"
#import "CellFront.h"

@interface SlidingTableViewCell (ShitBalst)
-(void)springBack;
-(void)toggleTableScrolling:(BOOL)canScroll;
@end

@implementation SlidingTableViewCell
@synthesize bunny;

#define kDragDist 80.0 
```

顺便说一句 - 这是我更新的项目： [https ://dl.dropboxusercontent.com/u/3660978/TableViewCellSlider.zip](https://dl.dropboxusercontent.com/u/3660978/TableViewCellSlider.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:49:22.487

你合成过兔子吗？

`@synthesize bunny = _bunny;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:50:31.890

该对象`self`没有“兔子”。通常这是因为您尚未合成该属性。但是你会看到一个编译器警告。您是否忽略了警告？

# java - 如何在 Groovy 中调用 OpenCSV 库 CSVReader(Reader in, char x)？

> ID：15982557
> 
> 赞同：0
> 
> 时间：2013-04-12T23:44:25.323
> 
> 标签：java, csv

我在 Groovy 中调用 OpenCSV 库 CSVReader(Reader in, char x) 时遇到问题？问题是 Groovy 将单引号文字视为字符串而不是字符，并且构造函数需要字符。

因此，这不起作用：

```
reader = new CSVReader( new FileReader( tFile ), ',' ) 
```

我试过这个，它也没有工作：

```
reader = new CSVReader( new FileReader( tFile ), String.toCharacter(",").charValue() ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:29:59.503

这是 Groovy 的一个特性，您需要将文字转换为 char，如下所示：

```
reader = new CSVReader(new FileReader(tFile), (char) ',') 
```

或像这样：

```
reader = new CSVReader(new FileReader(tFile), ',' as char) 
```

你甚至可以使用双引号。请参阅此[问题单](http://jira.codehaus.org/browse/GROOVY-1590)

# emacs - Windows版本emacs 24.3上的ecb安装错误

> ID：15982560
> 
> 赞同：3
> 
> 时间：2013-04-12T23:44:46.713
> 
> 标签：emacs, emacs-ecb

我在 windows 上安装了 emacs 24.3，并尝试通过包管理器安装 ecb 版本 20130406.1406，但是，在编译过程中，我收到以下错误消息：

> jn-file-tree.el:31:1:错误：无法打开加载文件：jn-tree-node
> 
> 编译文件 c:/Users/zyuan/.emacs.d/elpa/ecb-20130406.1406/ecb2/jn-tree-node.el at Fri Apr 12 19:03:13 2013 jn-tree-node.el:32:1 ：错误：无法打开加载文件：jn-utils
> 
> 编译文件 c:/Users/zyuan/.emacs.d/elpa/ecb-20130406.1406/ecb2/jn-tree-view.el at Fri Apr 12 19:03:13 2013 jn-tree-view.el:31:1 ：错误：无法打开加载文件：jn-window
> 
> 编译文件 c:/Users/zyuan/.emacs.d/elpa/ecb-20130406.1406/ecb2/jn-utils.el at Fri Apr 12 19:03:13 2013
> 
> 编译文件 c:/Users/zyuan/.emacs.d/elpa/ecb-20130406.1406/ecb2/jn-window.el 在 Fri Apr 12 19:03:13 2013 jn-window.el:44:25:Error: Invalid lambda 变量（父 jn 窗口容器）
> 
> 编译文件 c:/Users/zyuan/.emacs.d/elpa/ecb-20130406.1406/ecb2/test.el 在 Fri Apr 12 19:03:13 2013 test.el:31:1:Error: 无法打开加载文件： jn树视图...

有没有人遇到过这个？

无论如何，尽管出现上述错误，但它已安装，并且我能够通过运行 Mx ecb-activate 来激活 ecb，但是我收到如下错误消息：

> 欧洲央行现已停用。ecb-clean-up-after-activation-failure：ECB 2.40：ECB 布局设置期间的错误。（错误类型：无效变量，错误数据：（ecb-examples-bufferinfo-buffer-name））

多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T17:00:39.703

我遇到了类似的问题，用它来修复激活失败：

```
(setq ecb-examples-bufferinfo-buffer-name nil) 
```

根据： [Emacs 24.3.1 CEDET 2.0（内置）和 ECB 20131116.1319：ECB 布局设置期间的错误](https://stackoverflow.com/questions/20129637/emacs-24-3-1-cedet-2-0-built-in-and-ecb-20131116-1319-errors-during-the-layou)

# java - 非静态变量 this 不能从 main 方法中的静态上下文中引用

> ID：15982561
> 
> 赞同：1
> 
> 时间：2013-04-12T23:44:51.980
> 
> 标签：java, swing, main

我在此语句的主要方法中显示错误：//非静态变量 this cannot be referenced from a static context

```
frame.getContentPane().add(new PieChart()); 
```

我认为这就像加载内容窗格并向其中添加 PieChart 类一样简单。我今天花了几个小时，希望能在这个问题上得到帮助。我有 10 周的 Java 经验，直到现在还没有超出我的深度。任何意见是极大的赞赏。

```
Here is my PieChart program:

package iapiechart;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import javax.swing.JComponent;
import javax.swing.JFrame;

class IAPieChart{

    double arcValue;        // passes a value for the calculation of the arc.
    Color marker;            // holds value for color (expressed as an integer 

    public IAPieChart(double value, Color color){

        this.arcValue = value;
        this.marker = color;
    }

    public class PieChart extends JComponent { 

        IAPieChart[] pieValue = {new IAPieChart(5, Color.green),
                                new IAPieChart(33, Color.orange),
                                new IAPieChart(20, Color.blue),
                                new IAPieChart(15, Color.red)

        };

        public void paint(Graphics g) {

            drawPie((Graphics2D) g, getBounds(),  pieValue);

        }

        void drawPie(Graphics2D g, Rectangle area, IAPieChart[] pieValue){

            double sum = 0.0D;
            for (int i = 0; i < pieValue.length; i++) {

                sum += pieValue[i].arcValue;
            }

            double endPoint =  0.0D;
            int arcStart = 0; 
            for (int i = 0; i < pieValue.length; i++){

                endPoint = (int) (endPoint * 360 / sum);
                int radius = (int) (pieValue[i].arcValue * 360/ sum);
                g.setColor(pieValue[i].marker);
                g.fillArc(area.x, area.y, area.width, area.height, arcStart, radius);
                radius += pieValue[i].arcValue;
            }

        }
    }
     public static void main(String[] args) {

        JFrame frame = new JFrame();
        frame.getContentPane().add(new PieChart()); // This is where the error occurs. 
        frame.setSize(500, 500);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:48:51.923

`main`您试图从静态方法实例化一个`PieChart`非静态的内部类——将其声明为静态的。

```
public static class PieChart extends JComponent { 
```

如果你要保持`PieChart`非静态，那么你需要一个实例`IAPieChart`来创建一个实例`PieChart`，而你没有一个`IAPieChart`in实例`main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T23:48:52.273

由于您在 PieChart 类中创建了 IaPieChart，因此您的代码应该类似于：

```
public class PieChart extend JComponent
{

    static class IaPieChart(..)
    {
    }
} 
```

那就是您的 IaPieChart 类实际上是 PieChart 类的辅助类，因此它应该在该类中定义，而不是相反。

此外，自定义绘画是通过覆盖该`paintComponent()`方法而不是 paint() 方法来完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T23:48:56.453

正如几个小时前讨论的那样，您无法从静态成员访问非静态内容。-

[“不能从静态上下文引用非静态方法” JPA Java](https://stackoverflow.com/questions/15979278/non-static-method-cannot-be-referenced-from-a-static-context-jpa-java)

# postgresql - postgre 组有

> ID：15982563
> 
> 赞同：1
> 
> 时间：2013-04-12T23:44:56.683
> 
> 标签：postgresql

我有一个这样的查询

```
select c.travelandsmile_id, c.name, c.surname
from customer c
where c.travelandsmile_id in
      (
        select s.travelandsmile_id
        from spent_kilometers s
        group by travelandsmile_id
        having count(s.kilometers)=1
      ) 
```

我想选择在表中只显示一次`spent_kilometers`并且公里数大于 30 的记录。但是当我添加时`where s.kilometers > 30`，结果是错误的，并且根据第一个查询出现了更多元组。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:11:35.303

```
select travelandsmile_id, c.name, c.surname
from
    customer c
    inner join
    spent_kilometers s using (travelandsmile_id)
where s.kilometers > 30
group by travelandsmile_id, c.name, c.surname
having count(*) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:14:52.403

如果我正确阅读了问题，您希望找到所有拥有一条记录`spent_kilometers`并且该记录必须具有约束的客户`s.kilometers > 30`。

这可以通过以下 SQL 来完成。

```
select c.travelandsmile_id, c.name, c.surname
from customer c
where c.travelandsmile_id in 
     ( /* find all customers that have only one record in spent_kilometers */
        select c.travelandsmile_id
        from spent_kilometers s
        group by travelandsmile_id having count(travelandsmile_id) = 1
    )
 and c.travelandsmile_id in 
     ( /* find all customers that have s.kilometers > 30 */
        select c.travelandsmile_id
        from spent_kilometers s
        where s.kilometers > 30
    ); 
```

# java - 如何将接口的实现作为Java方法中的变量传递？

> ID：15982570
> 
> 赞同：-1
> 
> 时间：2013-04-12T23:45:21.210
> 
> 标签：java, interface

我们有一个界面`Math`。

我们有两个实现`Math`（比如说它们被称为`Math1`and `Math2`）。该项目的一小部分能够在两者之间切换。

在我们的讲师提供的课程（比如说它的名称`ClassName`）中，我们有：

```
public static int evaluate(Math impl) 
```

我有：

```
ClassName.evaluate(Math1); 
```

它说它找不到符号。我试着把它放在引号里，但那是一个字符串。我试图用谷歌搜索，但我没有找到任何有用的东西（也许我只是在寻找错误的东西）。这些文件在同一个包中。

如何通过接口实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:48:25.083

您正在传递类名而不是类实例。

试试这个：

```
// Evaluate with Math1.
Math m1 = new Math1();
ClassName.evaluate(m1);

// Evaluate with Math2.
Math m2 = new Math2();
ClassName.evaluate(m2); 
```

# ios - 从 CTFramesetterRef 中检索 NSAttributedString？

> ID：15982573
> 
> 赞同：0
> 
> 时间：2013-04-12T23:45:30.880
> 
> 标签：ios, objective-c, core-text

有没有办法可以从我的 CTFramesetter 中检索 NSAttributedString？当我将 Framesetter [和它通过 (__bridge CFAttributedStringRef) 使用的 NSMutableAttributedString] 保留在内存中时，我在仪器中看到了第二个大小大致相同的 CFString。当我释放 CTFramesetter 属性时，内存中只剩下原始字符串。因为字符串的大小可以达到 1.5MiB，如果我可以释放原始字符串并使用“嵌入”的字符串进行进一步绘图，那就太好了。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:29:17.667

如果您不需要属性字符串保持可变，请在创建框架设置器之前制作不可变副本。释放可变原件并使用不可变副本创建框架设置器。

# smalltalk - 提交宝石存储库时出错：ZnHttpUnsuccessful：501 未实现

> ID：15982586
> 
> 赞同：2
> 
> 时间：2013-04-12T23:47:35.307
> 
> 标签：smalltalk, pharo, monticello

在将我的项目添加到 ss3.gemstone.com/ss 但是当我在 monticello 中提交时，我收到以下错误“ZnHttpUnsuccessful：501 Not Implemented”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T10:38:41.550

您需要在 url 中指定要推送到的存储库。您的 url 指向无效的 squeaksource 基本 url。

例如：

```
MCGemstoneRepository
    location: 'http://ss3.gemstone.com/ss/MyProject'
    user: ''
    password: '' 
```

# iphone - 如何检测 AVCaptureDevice 的闪存何时完成以及静止图像捕获何时开始？

> ID：15982587
> 
> 赞同：1
> 
> 时间：2013-04-12T23:47:48.570
> 
> 标签：iphone, ios, objective-c, avfoundation, avcapturedevice

我正在制作一个使用 AVCaptureVideoPreviewLayer 的非常简单/标准的相机应用程序。当用户按下按钮时，我在 AVCaptureStillImageOutput 上调用 captureStillImageAsynchronouslyFromConnection 来捕获图像。在我捕捉图像时，我在预览层上设置一个简单的白色 UIView 动画，以向用户指示正在捕捉照片，并在图像捕捉完成后再次隐藏它。

我的问题是，当相机闪光灯打开时，我不想立即显示白色视图，因为直到闪光灯熄灭后才真正进行照片拍摄。有没有办法确定闪存已经完成或图像捕获实际上已经开始？也许通过 KVO、NSNotificationCenter 或其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:02:58.303

尝试`capturingStillImage`在`AVCaptureStillImageOutput`.

文档看起来可能是您需要的。

# mysql - HDBC ODBC MySQL - 查询仅在编译时失败

> ID：15982588
> 
> 赞同：5
> 
> 时间：2013-04-12T23:47:52.243
> 
> 标签：mysql, haskell, odbc, hdbc

我的程序使用 runghc 运行，但相同的程序在编译时出现错误“在查询期间丢失与 MySQL 服务器的连接”时始终失败。失败与长时间运行的查询无关（它是小表上的 CREATE VIEW）。MySQL 错误日志中没有任何内容，并且 log_warnings=1。环境 - ubuntu (13.04 ;-), 本地数据库)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-10T17:28:44.887

HDBC.ODBC*必须*使用“withRTSSignalsBlocked”来保护所有数据库访问操作，否则可能会出现我描述的随机故障。图书馆的作者有效地证实了这一点。

# php - PHP函数返回未分配给变量

> ID：15982594
> 
> 赞同：-5
> 
> 时间：2013-04-12T23:48:38.853
> 
> 标签：php

我有一个函数可以归结为这样的东西：

```
function do_something_cool() {
    return array(
        'key1' => 'value1',
        'key2' => 'value2',
    );
} 
```

然后，稍后在文件中，这四行：

```
$var1 = array();
$var1 = do_something_cool();
print_r(do_something_cool());
print_r($var1); 
```

函数返回的数组只有在我直接打印返回的时候才会打印，打印变量结果是一个空数组。

我也尝试过使用 array_merge 来分配数组，没有运气。

我什至不知道从哪里开始弄清楚发生了什么。

先感谢您。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:52:07.507

执行该示例，就像您发布它一样简单，它将起作用：

```
function do_something_cool() {
    return array(
        'key1' => 'value1',
        'key2' => 'value2',
    );
}

$var1 = array();
$var1 = do_something_cool();
print_r(do_something_cool());
print_r($var1); 
```

输出（如预期）：

```
Array
(
    [key1] => value1
    [key2] => value2
)
Array
(
    [key1] => value1
    [key2] => value2
) 
```

那是因为

```
$var1 = do_something_cool(); 
```

只会`$var1`用 的返回值覆盖`do_something_cool()`。没有*隐藏的魔法*。

所以我猜你的问题并不像你发布的那么简单，而且你的代码中还有其他错误。

# php - AJAX 无法 POST 到 PHP 文件

> ID：15982595
> 
> 赞同：0
> 
> 时间：2013-04-12T23:48:47.183
> 
> 标签：php, mysql, ajax, forms, post

```
FIXED! See bottom for solution. 
```

我在这方面遇到了难以置信的困难。我已经做了好几个星期了。我正在尝试使用 AJAX 将新记录添加到 mysql 中。PHP 文件 100% 工作，但我似乎无法让 AJAX 与我的表单一起使用，该表单具有发送数据的 POST 方法。这是我第一次在 StackOverflow 上，所以请放轻松。这是代码：

HTML 代码：

```
<form name='addform' method='POST' >
    <td></td>
    <td><input type='text' id='cname'></td>
    <td>
        <select id='fuel'>
            <option value='Petrol'>Petrol</option>
            <option value='Diesel'>Diesel</option>
            <option value='Hybrid'>Hybrid</option>
            <option value='LPG'>LPG</option>
        </select>
    </td>
    <td>
        <select id='trans'>
            <option value='Automatic'>Automatic</option>
            <option value='Manual'>Manual</option>
            <option value='Semi-Auto'>Semi-Auto</option>
        </select>
    </td>
    <td><input type='text' id='engine'></td>
    <td><input type='text' id='doors'></td>
    <td><input type='text' id='total'></td>
</tr>
<tr>
    <td><input type='submit' value='Add Car' onclick='addRecord()'></td>
... 
```

我有一个外部 .js 文件来处理 Javascript：

```
function addRecord(){
    if (
        document.addform.cname.value == "" 
        || document.addform.fuel.value == "" 
        || >document.addform.trans.value == "" 
        || document.addform.engine.value == "" 
        || document.addform.doors.value == "" 
        || document.addform.total.value == ""
    ) 
    { 
        alert ("Empty >field(s) - Cannot create record"); 
        return;
    }

    var mydata = null;
    // Mozilla/Safari
    if (window.XMLHttpRequest) 
    {
        xmlHttpReq2 = new XMLHttpRequest ();
    }
    // IE
    else if (window.ActiveXObject) 
    {
        xmlHttpReq2 = new ActiveXObject ("Microsoft.XMLHTTP");
    }

    var cname = document.getElementById('cname').value;
    var fuel = document.getElementById('fuel').value;
    var trans = document.getElementById('trans').value;
    var engine = document.getElementById('engine').value;
    var doors = document.getElementById('doors').value;
    var total = document.getElementById('total').value;

    mydata = '?cname='+cname+'&fuel='+fuel+'&trans'+trans+'&engine'+engine+'&doors'+doors+'&total'+total;          

    alert ("To Server (Add New Record):\n\nadd.php" + mydata);

    xmlHttpReq2.open('POST', "add.php" +mydata, true);
    xmlHttpReq2.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlHttpReq2.send(null);
    xmlHttpReq2.onreadystatechange = addRecordCallback;
} 
```

PHP代码：

```
<?php

$link = mysql_connect ("194.81.104.27", "www", "www");
mysql_select_db ("xyz") or die(mysql_error());

$tot=$_POST[total];
$door=$_POST[doors];
$query = "INSERT INTO tbl 
    (ID, CARNAME, FUELTYPE, TRANSMISSION, ENGINESIZE, DOORS, TOTAL, AVAILABLE)
    VALUES ('$_POST[cname]','$_POST[cname]', '$_POST[fuel]', '$_POST[trans]','$_POST[engine]', $door, $tot, $tot)";
    $result = mysql_query($query);
    mysql_close ($link);
?> 
```

发生的情况是我将信息放入表单，单击按钮，警报告诉我它确实从表单中获取数据。但在那之后什么也没有发生。我认为由于某种原因，数据没有以正确的格式发送到 PHP 文件。

谢谢！

```
Solution was: 
```

我设法让它工作！部分错误是，就像@adeneo 说的那样，我没有`onclick='addRecord(); return false;'`在里面！我做的另一件事是删除表单的 id，不确定这是否有任何作用。我还像这样将“mydata”附加到.send：`xmlHttpReq2.send(mydata);`最后我不得不删除一个“？” 这是在 mydata 变量收集事物中的 cname 前面。所以它是`mydata = '?cname='+cname+...`，我不得不删除`?`. 感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:03:22.750

由于您已经使用 jquery，因此您的生活变得复杂，也将它用于 AJAX。

$.AJAX({ url: "php 路径", type: "post", data: $("#formID").serialize(), });

将此作为数据发送，您会没事的。

抱歉有拼写，从手机感应到。问候

埃泽基

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:15:51.417

有很多事情是错误的。

您没有在/元素上使用该`name`属性。他们需要有一个才能将它们与 POST 请求一起发送。属性与表单无关（使用标签时除外；属性指向它们）`input``select``name``id``for`

```
<form action="/path/to/php/file.php" method="post" id="addform">
    <div>
        <label for="carname">CName</label>
        <input type="text" name="carname" id="carname">
    </div>
    <div>
        <label for="fuel">Fuel</label>
        <select id="fuel" name="fuel">
            <option value="Petrol">Petrol</option>
            <option value="Diesel">Diesel</option>
            <option value="Hybrid">Hybrid</option>
            <option value="LPG">LPG</option>
        </select>
    </div>
    <div>
        <label for="transmission">Transmission</label>
        <select id="transmission" name="transmission">
            <option value="Automatic">Automatic</option>
            <option value="Manual">Manual</option>
            <option value="Semi-Auto">Semi-Auto</option>
        </select>
    </div>
    <div>
        <label for="engine">Engine</label>
        <input type="text" id="engine" name="engine">
    </div>
    <div>
        <label for="doors">Doors</label>
        <input type="text" id="doors" name="doors">
    </div>
    <div>
        <label for="total">Total</label>
        <input type="text" id="total" name="total">
    </div>
    <div>
        <label for="submit">Engine</label>
        <input type="submit" id="submit" value="Add Car" onclick="addRecord()">
    </div>
</form> 
```

至于 javascript，使用 jQuery（或类似的库）要容易得多。它抽象出所有细节和浏览器差异，让您的生活更轻松。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
// When the page is done loading...
$(function () {
    // When the form is submitted
    $("form#addform").on("submit", function () {
        // Get the form data and serialize it
        var data = $(this).serialize();
        // Create a POST request
        var post = $.post("/path/to/php/file.php", data);
        // When the request is done show a message
        post.done(function () {
            alert("Form submitted!");
        });
        // If the request fails show another message
        post.fail(function () {
            alert("Error! Form not submitted.");
        });
        // Returning false prevents the form's normal
        // behaviour, i.e. its submission
        return false;
    });
});
</script> 
```

查看您的 PHP 代码，您似乎刚刚学习了 PHP：您正在使用已弃用的扩展 ( `mysql`)；您只需使用 POST 变量而无需担心安全性；并且您的 SQL 代码看起来有点不确定（例如，它是什么`AVAILABLE`以及为什么设置为`$total`？）；最后，应该引用字符串数组索引。

```
// Database handle
$db = new MySQLi('194.81.104.27', 'www', 'www', 'xyz');

// SQL query with placeholders
$sql = "INSERT INTO tbl (CARNAME,FUELTYPE,TRANSMISSION,ENGINESIZE,DOORS,TOTAL) VALUES (?,?,?,?,?,?)";

// Create a statement object
$stmt = $db->prepare($sql);

// Fill in the placeholders
$stmt->bind_param('ssssii', $carname, $fuel, $transmission, $engine, $doors, $total);

// Set the values
$carname      = filter_input(INPUT_POST, 'cname', FILTER_SANITIZE_STRING);
$fuel         = filter_input(INPUT_POST, 'fuel', FILTER_SANITIZE_STRING);
$transmission = filter_input(INPUT_POST, 'transmission', FILTER_SANITIZE_STRING);
$engine       = filter_input(INPUT_POST, 'engine', FILTER_SANITIZE_STRING);
$doors        = filter_input(INPUT_POST, 'doors', FILTER_SANITIZE_NUMBER_INT);
$total        = filter_input(INPUT_POST, 'total', FILTER_SANITIZE_NUMBER_INT);

// If the statement was not executed then there was an error
if ($stmt->execute() === false) {
    header('HTTP/1.0 404 Not Found', true, 404);
}
// Done 
```

**注意：**我从未测试过任何示例。我只是根据需要在我的文本编辑器中将它们写下来，因此您可能需要调整它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T21:58:32.820

我认为部分问题是您将数据粘贴`"mydata = '?cname='+cname+'&fuel..."`到 URL 的背面，就像使用 GET 作为传输方法一样，但是您将 POST 定义为传输方法，因此没有必要这样做。

`+mydata`POST 方法为您封装数据。尝试从此行中删除

```
xmlHttpReq2.open('POST', "add.php" +mydata, true); 
```

另外，再往下两行，您正在调用此处未列出的函数

```
xmlHttpReq2.onreadystatechange = addRecordCallback; 
```

看看该功能的作用会有所帮助。

# css - CSS display:table 用于填充高度。Chrome/Safari 与 Firefox/Opera 的不同

> ID：15982596
> 
> 赞同：2
> 
> 时间：2013-04-12T23:48:48.483
> 
> 标签：css, google-chrome, firefox

使用`display:table`和`display:table-row`CSS 属性，我希望我的内容能够填充 div 的剩余可用高度。如果内容超过可用高度，我希望显示一个滚动条。

这是小提琴：http: [//jsfiddle.net/3HYJx/2/](http://jsfiddle.net/3HYJx/2/)

Google Chrome 和 Safari 中显示的行为是我想要实现的行为。但是，Firefox 和 Opera 的显示方式不同。还没试过IE，但担心最坏的情况。

为什么这种行为如此不同？甚至更好：如何在每个浏览器中实现我想要的（如 Chrome 所示）？

提前非常感谢。

* * *

铬和 Safari：
[![Chrome/Safari 示例](https://i.stack.imgur.com/oDmLp.png)](https://i.stack.imgur.com/oDmLp.png)

火狐和歌剧：
[![Firefox/Opera 示例](https://i.imgur.com/zYSJS06.png)](https://i.imgur.com/zYSJS06.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T12:54:03.473

使用表格显示属性，您可以通过在滚动部分的文本周围再包裹两个元素来克服 firefox 问题，因此您有三个：

*   外层是一个`table-row`容器，可以填满桌子的其余部分
*   在其中我们有一个**相对**定位的容器，其中`height`和`width`设置为`100%`，并且设置了垂直滚动`overflow-y:scroll;`
*   最里面的容器**绝对**是`height`并且`width`也设置为`100%`

所以在这里我只是快速地在你的内容段落周围添加了两个 div 容器（你可能会根据你的需要找到一组更合适的容器，但这将用于说明）：

```
<div id="wrapper">
    <h2 id="date">Date</h2>
    <h1 id="title">A title ...</h1>
    <div id="contentbox-outer">
        <div id="contentbox-inner">
            <p id="content">The content ...</p>
        </div>
    </div>
</div> 
```

你的整个 CSS 都必须修改。您的原始选择器，稍作修改：

```
#wrapper {
    position:absolute;
    display: table;
    table-layout:fixed;
    background-color:black;
    padding:10px;
    width: 250px;
    height:350px;
    border-spacing:20px;
}

#date {
    display: table-row;
    font-weight: normal;
    font-size: 25px;
    background-color:yellow;
}

#title {
    display: table-row;
    font-weight: normal;
    font-size: 40px;
    line-height:90%;
    background-color:blue;
} 
```

请注意，`table-row`and`table`元素现在采用表格的特定样式，例如`border-spacing`设置表格行之间的间距的属性，您现在可以将其与表格的 padding 属性结合以获得所需的外观。

添加容器的样式将是这样的（首先仍然基于您的样式，最后两个是附加的 - 内部的）：

```
#contentbox-outer {
    display: table-row;
    font-size: 12pt;
    width: 100%;
    height:90% !important;
    text-align: justify;
    background-color:red;
    overflow-y: scroll;
}
#contentbox-inner {
    position:relative;
    height:100%;
    width:100%;
    overflow-y:scroll;
}
#content {
    position:absolute;
    height:100%;
    width:100%
} 
```

我还更新了您的小提琴以进行快速检查：http: [//jsfiddle.net/3HYJx/7/](http://jsfiddle.net/3HYJx/7/)

**编辑：**这适用于 Firefox、Chrome、Safari 等浏览器，但例如不适用于 Opera，因为`height: 100%`在严格模式下不会在文档中呈现。因此，通过更多研究，我发现您可以让它在**quirks 模式下**工作，这是一个**[测试 html](http://newtpond.com/quirksmode.html)** - 上面的代码，但在 quirks 模式文档中。感谢您给我一个学习的理由，很高兴知道=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:48:46.170

**工作小提琴：http:** [//jsfiddle.net/3HYJx/3/](http://jsfiddle.net/3HYJx/3/)

问题是`height:90% !important;`你已经设置了`#content`。

`#wrapper`您在和`#date`上设置了固定高度`#title`。

如果你设置了一个固定的高度`#content`（因为你有固定高度的其他东西，所以这不会是一个问题）你也会在 FireFox 中得到预期的结果。

# javascript - 我如何从android调用javascript函数（网页）？

> ID：15982598
> 
> 赞同：0
> 
> 时间：2013-04-12T23:48:49.947
> 
> 标签：javascript, android

我的页面在网页中包含 javascript 函数...

```
function callFromAndroid(varName)
{
 alert("call from android activated by " + varName);
} 
```

我想从android调用javascript函数callFromAndroid() ...

这可能吗？

请解释如何完成或将我指向可以找到此类信息的资源。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:54:21.803

给定一个`WebView`命名的`wv`，调用：

```
wv.loadUrl("javascript:callFromAndroid("+whateverYourVarValueIsAsJavaScriptLiteral+")"); 
```

传递给的字符串`loadUrl()`必须是一个`javascript:`方案 URL，在冒号后面加上您希望调用的文字源代码。[这遵循与小书签](http://en.wikibooks.org/wiki/JavaScript/Bookmarklets)相同的模式。

# vb.net - 如何通过 vb 2010 应用程序将文件存储在 EXE 文件中

> ID：15982608
> 
> 赞同：-1
> 
> 时间：2013-04-12T23:49:35.973
> 
> 标签：vb.net, exe

我需要通过 VB 2010 应用程序将文件存储在 EXE 文件中。我的意思是，假设我制作了一个名为 setmaker 的软件和一个名为 setup.exe 的软件。我希望 setmaker 存储您在 setup.exe 中选择的一些文件，然后当您运行 setup.exe 时，它​​会读取您存储在其中的文件并将其提取到您指定的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:00:56.067

以下帖子[如何从资源中复制文件？](https://stackoverflow.com/questions/7254166/how-to-copy-file-from-resources)讨论了将作为 EXE 中的嵌入式资源的文件复制到磁盘上的文件夹的方法。

希望有帮助。

# python - Enthought Canopy：如何添加到 PATH？

> ID：15982612
> 
> 赞同：3
> 
> 时间：2013-04-12T23:50:01.147
> 
> 标签：python, path, enthought

运行 Enthought Canopy 似乎会停用在 Canopy 环境中运行的 python 程序的正常 .profile PATH 信息 (OS X)。我需要使位置可搜索用户文件。

用户手册中没有说明如何执行此操作。有几个可能的地方可以输入这些信息（例如两个“激活”文件），但在其中添加额外的 PATH 信息没有效果。

那么它是如何完成的呢？

DN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:25:22.200

在 Mac OSX 10.6.8 这工作

% launchctl setenv PYTHONPATH /my/directory:/my/other/directory

然后启动 Canopy，您应该会在 sys.path 上看到 /my/directory 和 /my/other/directory

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T07:32:55.380

这来自于[在 OS X 中设置环境变量的链接？](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)在乔纳森发布的页面上。我在“/private/etc/launchd.conf”文件中的命令语法有误。

在 /private/etc 中创建或编辑文件“launchd.conf”（使用知道权限的编辑器，例如 BBEdit），其内容类似于以下行：

`setenv PYTHONPATH /Users/<username>/Python/:/Users/<username>/AnotherPath/`,

例如，将创建一个变量 PYTHONPATH，在重新启动后，Canopy 会看到该变量。

它也适用于其他环境变量。只需 launchd.conf 文件，更棒的是，它似乎可以在两次启动之间出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:20:02.687

所描述的问题也出现在 Win 7 Canopy 安装中。

我试图将要导入的文件放置在 sys.path() 中提供的几个位置。

['', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\User\Scripts\python27.zip', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy -1.0.0.1160.win-x86_64\DLLs', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib', 'C:\Users \Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\plat-win', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\ appdata\canopy-1.0.0.1160.win-x86_64\lib\lib-tk', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\User', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\User\lib\site-packages', 'C:\Users\所有者\AppData\Local\Enthought\Canopy\System', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\PIL', ' C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\ win32\lib', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\Pythonwin', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\ appdata', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages', 'C:\Users\Owner\AppData\ Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages\IPython\extensions']\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\PIL', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32' , 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32\lib', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\站点包\Pythonwin'，'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata'，'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy- 1.0.0.1160.win-x86_64\lib\site-packages'，'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages \IPython\扩展']\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\PIL', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32' , 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32\lib', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\站点包\Pythonwin'，'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata'，'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy- 1.0.0.1160.win-x86_64\lib\site-packages'，'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages \IPython\扩展']\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32\lib', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\ Pythonwin'、'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata'、'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160。 win-x86_64\lib\site-packages', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages\IPython\extensions ']\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\win32\lib', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\System\lib\site-packages\ Pythonwin'、'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata'、'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160。 win-x86_64\lib\site-packages', 'C:\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages\IPython\extensions ']\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages\IPython\extensions']\Users\Owner\AppData\Local\Enthought\Canopy\App\appdata\canopy-1.0.0.1160.win-x86_64\lib\site-packages\IPython\extensions']

我发现的唯一解决方案是使用：

`sys.path.append()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-28T03:16:38.013

以下文章是否充分回答了这个问题？： https: [//support.enthought.com/entries/23665767-How-do-I-set-PYTHONPATH-and-other-environment-variables-for-Canopy-](https://support.enthought.com/entries/23665767-How-do-I-set-PYTHONPATH-and-other-environment-variables-for-Canopy-)

# php - 我如何编写脚本来每天发出 API 请求并将其存储在我的服务器上？

> ID：15982614
> 
> 赞同：-1
> 
> 时间：2013-04-12T23:50:16.753
> 
> 标签：php, api, scripting

对不起，如果这是基本的，我以前从来没有做过这样的事情。

我正在构建一个对服务（例如 Soundcloud）进行 API 调用的网站，这些调用有时可能需要一段时间（5-10 秒）。我不想在每次用户加载页面时都进行这些调用，而是希望每天进行一次调用，将结果存储在我的服务器上，并在每次用户加载页面时调用*它。*无论如何，数据不应该在一天内经常更改。

我的问题是我该怎么做？我熟悉 PHP，我相信这对此有好处。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:07:23.323

您将其设置为一个 cron 作业，可以根据需要经常运行（假设它是 Linux 服务器）。[例如，您可以在此处](https://stackoverflow.com/questions/7720451/will-this-cronjob-work)查看如何操作。许多共享主机提供商还允许在其控制面板界面中设置 cron 作业。

但是，如果您无法设置 cron 作业，是什么阻止您将 API 请求的结果存储在服务器上一次，然后再使用存储的数据，而不是再次调用 API？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:10:18.257

总结一下，有几种方法可以做你想做的事。一种是设置一个运行脚本的 cron 作业，就像 adeneo 所说的那样。另一种解决方案可能是在某处存储时间戳，然后在页面被点击时检查该时间戳并决定是否更新。这样，您可以确保脚本仅在当天的第一次点击或类似情况下运行。

# javascript - 使用 facebook javascript sdk 向某人的个人资料帖子或页面帖子或群组帖子发表评论

> ID：15982632
> 
> 赞同：0
> 
> 时间：2013-04-12T23:53:22.137
> 
> 标签：javascript, facebook, sdk

我想使用`Facebook Javascript SDK`带有访问令牌和`Graph API`.

我可以从具有`publish_stream`权限的当前登录用户生成应用程序访问令牌。如何使用 Javascript SDK 调用，`post id`以便用户可以从 Facebook 外部（即显示所有页面/个人资料/组帖子的我的网站）发表评论？

我尝试了 PHP SDK，但无法在服务器站点上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:02:40.357

假设用户已经登录并且访问令牌具有 publish_stream 权限，您应该调用

```
FB.api('/'+ _POST_ID_HERE_ +'/comments', 'POST', { message:"Your comment text" },
       function(response)
       {
            if (response && !response.error && response.id)
            {
                 alert('New comment id = '+response.id);
            }
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T23:04:21.277

function Comment_Clicked(pid) { FB.init({ appId : '472562079456084', status : true, // 检查登录状态 //channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // 频道文件 cookie : true, // 启用 cookie 以允许服务器访问会话 xfbml : true // 解析 XFBML //oauth:true });

```
 FB.login(function(response) {
        if (response.status=='connected') {
            if (response.authResponse.accessToken) {
                var token = response.authResponse.accessToken;      

                FB.api('/'+pid+'/comments?access_token='+token+'', 'POST',{ message:'test' }, function(response) {
                  if (!response || response.error) {
                    ms_js("#msfb-error-comlike").text("Errors you may not have permissions ");
                  } else {
                    ms_js("#msfb-error-comlike").text("Post success");
                  }
                });
                //window.location = "<? echo $absolute_url; ?>&temptoken="+ token +"";
            } else {
                // user is logged in, but did not grant any permissions
                alert('You can create an access token only for your own profiles and pages.');
            }
        } else {
            // user is not logged in
            alert('To use fb.wall you have to create an access token.');
        }
    }, {scope:'read_stream,publish_stream'}); //exclude publish_stream,publish_actions 
```

}

这是我完成评论的完整功能。这里我通过应用程序 ID 生成访问令牌。对吗？通过应用访问令牌，用户可以在另一个页面、个人资料帖子而不是他的页面或个人资料帖子上发表评论？！一切正常，所以正在使用。@Const 实际上 publish_stream 权限适用于另一个用户对我测试的另一个用户个人资料帖子执行评论。但是对于问题仍然存在的用户，不知道为什么！在我的本地站点中使用 javascript sdk 生成令牌授予所有权限不起作用但是当我在这里生成时有效-developers.facebook.com/tools/explorer ....

# ajax - 您是否为每个 ajax 表单创建工作的非 ajax 版本？

> ID：15982647
> 
> 赞同：0
> 
> 时间：2013-04-12T23:58:08.450
> 
> 标签：ajax

我正在创建一些仅用于 ajax 提交的表单。但是，我想知道是否应该从每个第一个的非 ajax 版本开始。这将使故障排除更容易一些。

你做什么工作？您是否持续维护并行功能？

# python - django runserver 错误 github fork

> ID：15982648
> 
> 赞同：0
> 
> 时间：2013-04-12T23:58:16.920
> 
> 标签：python, django

我是 Django 新手，我主要在 Rails 中工作。我刚刚分叉了一个朋友项目，并试图让服务器启动并运行。我已经安装了所有要求，当我尝试调用 runserver 时遇到以下错误

```
└─(06:50 PM Fri Apr 12)─(22 files, 128b)─> ./runserver
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of       
<  django.contrib.staticfiles.management.commands.runserver.Command object at   
0x10c252f50>>
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py",
  line 92, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 280, in
  validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 35, 
in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/Library/Python/2.7/site-packages/django/db/models/loading.py", line 166, in
get_app_errors
    self._populate()
  File "/Library/Python/2.7/site-packages/django/db/models/loading.py", line 72, in 
_populate
    self.load_app(app_name, True)
  File "/Library/Python/2.7/site-packages/django/db/models/loading.py", line 96, in 
load_app
    models = import_module('.models', app_name)
  File "/Library/Python/2.7/site-packages/django/utils/importlib.py", line 35, in   
import_module
    __import__(name)
  File "/Users/RobertZyskowski/Applebutter/calendezi/south/models.py", line 2, in <module>
    from south.db import DEFAULT_DB_ALIAS
  File "/Users/RobertZyskowski/Applebutter/calendezi/south/db/__init__.py", line 78, in
<module>
    db = dbs[DEFAULT_DB_ALIAS]
KeyError: 'default' 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:19:27.647

为了让 Django 工作，您必须为其提供设置。Django 正常运行所需的设置之一是`DATABASES`. 它应该作为 Python 字典提供，在该字典中，Django 会查找`default`密钥。更多关于[这里](https://docs.djangoproject.com/en/dev/ref/settings/#databases)。

您收到的错误意味着 Django 没有使用 key 提供给它的数据库`default`。这可能有多种原因。一是您的设置文件可能由于各种原因（例如安全性）实际上没有定义设置。在这种情况下，您只需提供该设置，问题就应该得到解决。有关设置的示例配置，请参阅上述文档的链接。第二个原因可能是您可能有多个设置文件，并且您没有向`runserver`. 我注意到您没有使用该`manage.py runserver`命令来启动服务器。如果您将尝试该命令，通常您可以提供一个`--settings`参数：

```
manage.py runserver --settings=dot.notation.path.to.settings 
```

另外，如果您是 Django 新手，请阅读 Django 教程。它非常好，应该让你很好地开始。教程在[这里](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)。

# php - 如何从另一个页面更改页面内容

> ID：15982649
> 
> 赞同：2
> 
> 时间：2013-04-12T23:58:17.043
> 
> 标签：php, jquery, ajax, cart

我正在尝试将此功能添加到我的 PHP 购物车

假设我们有两个页面：catalog.php 和 cart.php

我想做的是：

用户单击 catalog.php 上的“添加到购物车”按钮，并通过 jQuery 向 cart.php 触发 ajax 请求，向它发送有关添加了哪些产品的信息（这一切都按预期工作），并通过包含使 cart.php 页面自行更新刚刚添加的产品没有页面刷新（这是我无法工作的部分）。

如果我将两个页面并排放置并单击“添加到购物车”，则没有任何反应，只有在页面刷新 (cart.php) 时，我才看到添加了新产品。

有没有办法归档这个？

编辑：我不够清楚我很抱歉我的错页面以标准方式呈现，没有框架没有弹出窗口“应用程序”按预期工作，这对用户来说不太可能成为问题“并排“事情只是因为我想知道一种获得此功能的方法，因为我可以看到自己在未来将它用于几乎任何事情（从 pageA、CSS 等对 pageB 进行 DOM 操作）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:21:55.100

最后我检查了一下，只有用`window.open`（或用`<a target="_blank">`链接打开）打开的页面才能相互交谈。

所以在 catalog.php 调用`cart = window.open('cart.php')`中，`cart`包含打开它的页面的窗口对象，所以你可以这样做：

```
cart.document.getElementById('whatever').innerHTML = '<p> new content</p>'; 
```

要让窗口在不打开另一个窗口的情况下并排交谈，您可以使用 HTML5 本地存储，但这需要一些更高级的魔法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:25:02.210

您*可以*通过 AJAX 调用来模拟这一点，在该调用上`Cart.php`检查 (session/db) 以查看是否添加了新内容。

我建议像...

*   Cart.php 每 10-60 秒进行一次 AJAX 调用，并要求提供购物车中产品的完整列表。
*   任何新项目都会酌情添加到表中（通过检查产品 Id 或 OrderItem Id）。您还应该更新数量/等。

这样，无论使用什么机制添加商品，购物车很快就会看到它们。

显然，您轮询的次数越多，购物车的更新速度就越快，但您对系统的负载也就越多。

现在不能直接实现的原因是 AJAX 请求总是由客户端而不是服务器发起。

还有另一种潜在的解决方法，它省略了频繁的轮询并提供近乎即时的更新，但实现起来有点复杂。

它被称为长轮询（见[这个答案](https://stackoverflow.com/a/333884/156755)），实际上发生的事情是......

*   客户端向服务器发送 AJAX（“A”）请求以获取购物车信息。
*   服务器接受请求但**什么都不做**（好像正在处理一个长时间运行的脚本）
*   当通过 AJAX（“B”）接收到新的购物车商品时，服务器会使用详细信息响应请求 A，并且购物车页面会根据需要更新表格。
*   如果在合理的超时时间（30-120 秒）内没有检测到购物车活动，服务器会以“No Operation”响应并关闭连接。
*   无论客户端收到哪个响应，它都会立即打开一个新的 AJAX 请求并重新开始。

实际上，您的 PHP 脚本然后处理检查数据库/会话/等以获取更新，并且客户端仅在“慢”服务器上等待。这就是 twitter 通过 API 实现各种提要的方式——每条新推文在生成时都会在新行中返回。

请注意，这可能很难实现，因为您只是将轮询从客户端转移到 PHP，但从 JavaScript 的角度来看，它确实使它更加优雅，消除了延迟并减少了浪费的网络开销。

# php - 同时在两个 PHP 脚本中使用相同的会话 ID

> ID：15982654
> 
> 赞同：3
> 
> 时间：2013-04-12T23:58:39.580
> 
> 标签：php, apache, file, session, session-cookies

我偶尔会发现 PHP 会话存在一个奇怪的问题。
当我使用相同的会话 ID 运行两个 PHP 脚本时，第二个脚本被卡住，直到第一个脚本完成。
我猜这是因为试图两次打开相同的会话存储文件。但可能我不对。
在正常的站点工作中您永远不会发现这种效果，因为用户通常不会同时打开两个或多个页面。
但是，如果您尝试使用 获取同一站点页面的内容`file_get_contents()`，您将遇到此问题。
此外，我通过上下文复制了我的 cookie，因此`file_get_contents()`尝试重新打开与调用脚本中已打开的会话相同的会话。
结果，我卡住了长时间运行的脚本（大约 5-10 分钟），这也使我无法使用相同的 sessionid / login 打开同一站点的任何新页面。
我该如何解决这个问题？你有没有看到任何漂亮的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:08:38.730

是的，这称为“会话锁定”，在 PHP 中很正常。

一种解决方案是不使用会话，只需为所需的持久信息设置 cookie。

另一种解决方案是实现您自己的会话处理程序：

[http://php.net/manual/en/session.customhandler.php](http://php.net/manual/en/session.customhandler.php)

有关自定义 MySQL 会话处理程序的详细演练在这里：

[http://phpmaster.com/writing-custom-session-handlers/](http://phpmaster.com/writing-custom-session-handlers/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T03:16:14.303

我还为这个问题找到了非常简单的解决方案。我们可以`session_write_close();`在脚本 1 中使用解锁会话文件，然后我们可以毫无顾虑地制作 any`file_get_contents()`等`curl_exec()`，并且在这些操作之后将会话转回`session_start()`. 由我自己检查，作为魅力！

# css - 分配给特定元素的 CSS 在 IE7 中不起作用

> ID：15982655
> 
> 赞同：0
> 
> 时间：2013-04-12T23:58:58.900
> 
> 标签：css, wordpress, internet-explorer-7

任何人都知道为什么分配给特定元素的 CSS 会在 IE7 中停止工作？

我的[Wordpress 网站](https://gwca.org)在除了 IE7、6、5 之外的几乎所有东西上都可以工作并且看起来都一样，我最近发现分配给特定元素的所有样式都像`img` `body`或`html`根本不被支持......

这真的让我发疯了，因为我找不到任何有类似问题的人......我想知道我是否只需将它们全部删除并找到其他方法来使其工作。

有人有想法吗？对此，我真的非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:29:30.307

您在以下样式表的第 20 行有一个错字：

[https://www.gwca.org/wp-content/themes/GreatWall/style.css](https://www.gwca.org/wp-content/themes/GreatWall/style.css)

```
.www_FlowSlider_com-branding {
    display:none !important;
    right:1000px !important;
    width:0px !important;
    height:0px !important'; <-- that random single quote.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:23:13.750

这些被称为内联样式规则。他们*正在*为我使用 IE7。呈现差异并不罕见，尤其是在 IE5-7 中，因为它们不是非常符合标准的浏览器版本。

我看到的问题与相对定位有关。我建议阅读不同类型的定位以及 Internet Explorer 早期版本的渲染差异。我通常在开发过程中逐步检查 IE7。

`hasLayout`IE 早期版本的另一个奇怪的怪癖是，除非您使用 CSS 规则触发 IE 的专有属性，否则某些元素将无法正确显示`zoom: 1;`

# json - 使用 HAL 设计 RESTful API - 序列化模型关系

> ID：15982657
> 
> 赞同：6
> 
> 时间：2013-04-12T23:59:42.047
> 
> 标签：json, rest, serialization, hateoas, hal-json

我对 REST 比较陌生，但我一直在做关于 RESTful 应该如何做的功课。现在我正在尝试为与其他模型有关系的模型创建一个实现 JSON+HAL 序列化程序的 RESTful api。
python中的示例模型：

```
class Category(Model):
    name = CharField()
    parent = ManyToOneField(Category)
    categories = OneToManyField(Category)
    products = ManyToManyField(Product)

class Product(Model):
    name = CharField()
    price = DecimalField()
    related = ManyToManyField(Product)
    categories = ManyToManyField(Category) 
```

假设我们有一个类别“目录”，其中包含一个子类别“食物”，其中的产品“汉堡”和“热狗”都是相关的。
第一个问题。类别和产品应该是资源，因此它们需要一个 URI，我应该在我的模型中实现一个 uri 字段并将其存储在数据库中还是以某种方式在运行时计算它，多个标识符（URI）呢？
第二个问题。*可发现性*，在 Hal 格式中，“GET /”和不同的节点应该返回什么以使 api 易于自我发现。

```
{
  "_links":{
    "self":{
      "href":"/"
    },
    "categories":[
      {
        "href":"/catalog"
      }
    ]
  }
} 
```

第三个问题。添加为属性、嵌入或链接。示例“获取 /catalog/food”：

```
{
  "_links":{
    "self":{
      "href":"/catalog/food"
    }
  },
  "name":"food",
  "parent":"/catalog",
  "categories":[],
  "products":[
    "/products/burger",
    "/products/hot-dog"
  ]
}

{
  "_links":{
    "self":{
      "href":"/catalog/food"
    },
    "parent":{
      "href":"/catalog"
    },
    "categories":[

    ],
    "products":[
      {
        "href":"/products/burger"
      },
      {
        "href":"/products/hot-dog"
      }
    ]
  },
  "name":"food"
}

{
  "_links":{
    "self":{
      "href":"/catalog/food"
    }
  },
  "name":"food",
  "_embedded":{
    "parent":{
      "_links":{
        "self":{
          "href":"/catalog"
        }
      },
      "name":"catalog",
      ...
    },
    "categories":[

    ],
    "products":[
      {
        "_links":{
          "self":{
            "href":"/products/burger"
          }
        },
        "name":"burger",
        ...
      },
      {
        "_links":{
          "self":{
            "href":"/products/hot-dog"
          }
        },
        "name":"hot-dog",
        ...
      }
    ]
  }
} 
```

第四个问题。返回结构时我应该走多深。示例“获取/目录

```
{
  "_links":{
    "self":{
      "href":"/catalog"
    }
  },
  "name":"catalog",
  "parent":null,
  "categories":[
    {
      "name":"food",
      "parent":{...},
      "categories":[],
      "products":[
        {
          "name":"burger",
          "price":"",
          "categories":[...],
          "related":[...]
        },
        {
          "name":"hot-dog",
          "price":"",
          "categories":[...],
          "related":[...]
        }
      ]
    }
  ],
  "products": []
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T17:00:35.613

**关于第一个问题**：我不会将 URI 存储在数据库中。您可以在运行时在控制器内部轻松计算它们，并且控制器有责任关心 URI。通过这种方式，您可以保持模型和 API 解耦，并且如果您决定在未来更改 API 结构，则无需使用新的 URI 更新整个数据库。

关于多个标识符，我不确定问题是什么，但在我看来，这与数据库无关，它是路由和控制器应该关心如何处理任何 URI。

**关于第二个问题**：首先，*作为旁注：*我会将单词*类别*保留为 URI 的一部分。例如，我有`http://domain.com/api/categories/catalog/food`. 这样，您可以使您的 API 更具描述性和“可破解性”，这意味着用户应该能够删除该`/catalog/food`部分并期望收到包含所有可用类别的集合。

现在，关于`GET`应该返回什么以允许可发现性：我认为您的 URI 结构已经清楚地说明了这一点。当用户点击时`GET /categories`，他希望获得一个包含类别的列表（每个类别的名称和 URI，以保持轻量级），并且当他遵循其中一个 URI 时，`GET /categories/catalog`他应该收到`catalog`属于类别的资源。同样，当他想要时`GET /products/burger`，他应该会收到一个产品资源，其中包含您在模型中拥有的所有属性。您可能想查看[此示例](http://haltalk.herokuapp.com/explorer/browser.html)以了解您的回复的结构。

**关于第三个问题**：同样[的例子](http://haltalk.herokuapp.com/explorer/browser.html)可以帮助你形成结构。我认为您的第二种响应方式更接近于此，但我还会添加一个`name`字段，而不仅仅是`href`.

**关于第 4 个问题**：当请求需要一个资源集合`GET`（如`GET /categories`信息。

在您的示例中，`catalog`是一个资源，所以`GET /categories/catalog`我当然会包括`name`资源（目录）及其自链接，以及`parent`与`sub-categories`它`products`相关的，我将只提供每个资源的名称和 URI，以保持轻便。**但是**：这是关于设计 API 的一般想法。在你的实际问题中，*你*应根据您的具体业务问题来决定。我的意思是，如果您的 API 是关于包含类别和菜肴的餐厅菜单，您可能希望包含价格或简短描述，即使响应的不是实际产品而是产品集合，因为可能对于您的用户来说，这就是一个重要的信息。因此，一般来说，在响应资源列表时提供所有必要的信息（您只知道这些对于您的问题是什么），并在响应特定资源时提供资源的所有详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:01:18.783

1.  我会在数据库中存储一些东西并在运行时计算 URI。这样，如果您移动盒子，它就不是静态的。
2.  创建一个“书签”页面。我们创建的页面只是一个链接列表及其相关链接。我相信 HAL 明确定义了这一点。书签页面是其他页面需要了解的唯一页面
3.  不确定
4.  你能走多远取决于你。现在，在我的工作地点，关于细粒与粗粒的争论很大。我将使用少量资源进行细粒度以保持 api 简单，然后使用扩展能力概念。它是 Subbu 的 REST 书第 35 页中定义的复合资源概念和 Netflix 使用的扩展概念的结合。[http://developer.netflix.com/docs/REST_API_Conventions](http://developer.netflix.com/docs/REST_API_Conventions)

# android-ndk - ndk-build clean 出错

> ID：15982658
> 
> 赞同：21
> 
> 时间：2013-04-12T23:59:45.890
> 
> 标签：android-ndk

我在 ndk-build clean 上收到以下错误

```
mo@mo-Toshiba ~/Workspace/AndroidApp/jni/android_programming_driver $ ndk-build clean
Clean: driveradapter [armeabi]
/bin/sh: 1: Syntax error: "(" unexpected
make: *** [clean-driveradapter-armeabi] Error 2 
```

NDK 在哪里看到这个语法错误？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-19T20:19:39.407

这是[ndk r8e 中的一个错误](http://developer.appcelerator.com/blog/2013/03/correcting-a-bug-in-the-latest-google-ndk-r8e.html)。

如何修复它：

编辑文件`$(ndk_dir)build/core/build-binary.mk`。换行

```
$(cleantarget): PRIVATE_CLEAN_FILES := ($(my)OBJS) 
```

至

```
$(cleantarget): PRIVATE_CLEAN_FILES := $($(my)OBJS) 
```

对我来说，那是在第 49 行。

# cmake - Ogre 和 CMake 出错

> ID：15982661
> 
> 赞同：6
> 
> 时间：2013-04-13T00:00:19.053
> 
> 标签：cmake, ogre

我在 Ubuntu 12.04 上安装了 Ogre3D 1.8.1（源代码包），一切都很顺利（我设法在 Ogre 界面上运行了一些示例）。但是，我在编译需要 OpenCV、ArUco 和 Ogre 库的外部项目（[那个）时遇到了问题。](http://sourceforge.net/projects/aruco/files/1.2.4/ogre-test-0.0.1.tgz/)当我运行项目的 CMake 时，我收到以下信息：

```
CMake Error at CMakeLists.txt:46 (find_package):
By not providing "FindOGRE.cmake" in CMAKE_MODULE_PATH this project has
asked CMake to find a package configuration file provided by "OGRE", but
CMake did not find one.

Could not find a package configuration file provided by "OGRE" with any of
the following names:

OGREConfig.cmake
ogre-config.cmake

Add the installation prefix of "OGRE" to CMAKE_PREFIX_PATH or set
"OGRE_DIR" to a directory containing one of the above files.  If "OGRE"
provides a separate development package or SDK, be sure it has been
installed.

-- Configuring incomplete, errors occurred! 
```

我知道 FindOGRE.cmake 在哪里，它在 /usr/local/lib/OGRE/cmake 中，但我不知道如何让 CMake 查找该文件夹并解决此问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:10:13.907

您只需要使用[`-D`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#opt%3a-Dvar%3atypevalue "CMake v2.8.10 文档")命令行选项和[`CMAKE_MODULE_PATH`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_MODULE_PATH "CMake v2.8.10 文档")变量：

```
cmake . -DCMAKE_MODULE_PATH=/usr/local/lib/OGRE/cmake 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-09T12:10:57.593

只是为了记录，另一种解决方案是直接在 CMakeLists.txt 中添加模块路径。例如（在 Debian 9 上测试）：

```
set(CMAKE_MODULE_PATH "/usr/share/OGRE/cmake/modules/;${CMAKE_MODULE_PATH}") 
```

只需确保在调用 find_package 之前添加该行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-12T11:57:12.110

对我来说，它只能在`CMakeLists.txt`before中设置以下内容`find_package`：

```
set(OGRE_DIR /usr/share/OGRE/build/sdk/CMake) 
```

请注意，该`CMake`目录是包含`OGREConfig.cmake`. 出于某种原因，我的 CMake 忽略了`CMAKE_MODULE_PATH`.

也许，对某人有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-29T19:17:56.857

对我来说，这个解决方案适用于 manjaro：

```
set(CMAKE_MODULE_PATH "/usr/lib/OGRE/cmake;${CMAKE_MODULE_PATH}")
find_package(OGRE QUIET)

if (OGRE_FOUND)
    include_directories( ${ogre_INCLUDE_DIR})
    link_directories(${OGRE_LIBRARIES})
    message(STATUS "OGRE: FOUND")
else()
    message(STATUS "OGRE: NOT FOUND")
endif() 
```

# ruby-on-rails - 为什么即使没有任何变化，Rails 3 资产管道也总是重新生成资产？

> ID：15982662
> 
> 赞同：1
> 
> 时间：2013-04-13T00:00:25.130
> 
> 标签：ruby-on-rails, asset-pipeline

我在 Heroku 上运行 Rails 3.2 应用程序，因此需要使用资产管道。

关于 Rails 资产管道的一件事让我很困惑一段时间是这个小实验的结果：

```
git rm -r public/assets

git commit -m "Nuke all generated assets"

RAILS_ENV=production bundle exec rake assets:precompile

git add .

RAILS_ENV=production bundle exec rake assets:precompile 
```

具体来说，如果我检查我的分阶段和非分阶段更改之间的差异，我发现第二个资产预编译已经重新生成/refingerprinted/reminified 我的所有 CSS 和 JS。

当我在资产编译之间没有任何更改时，为什么会发生这种情况？

显然，当前时间戳以某种方式涉及，但*为什么*会这样 - 再一次 - 我什么也没改变？

最后，是否有任何方法可以更改资产预编译，以便 CSS 和 JS 资产仅在自上次预编译后发生更改时才会重新生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:22:39.210

您可以使用 Capistrano 执行此操作，基本上检查当前部署与旧版本并查看哪些文件已更改。这是我了解它的地方。

[https://github.com/capistrano/capistrano/issues/227](https://github.com/capistrano/capistrano/issues/227) [http://www.bencurtis.com/2011/12/skipping-asset-compilation-with-capistrano/](http://www.bencurtis.com/2011/12/skipping-asset-compilation-with-capistrano/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T09:03:54.917

它会改变，因为每次创建新的 gzip 文件时，即使内容相同，生成的文件也会有所不同，源代码控制系统不知道如何处理（也不应该这样做） ）。

您应该查看[这个答案](https://stackoverflow.com/q/9616362/1006863)以了解要添加到 gitignore 的文件。

您也可以在 github 中查看有关它的[讨论。](https://github.com/rails/rails/pull/2817)

# ruby - 在 Ruby 中查找和替换用于 TaskPaper 日志记录的时间字符串

> ID：15982663
> 
> 赞同：1
> 
> 时间：2013-04-13T00:00:26.833
> 
> 标签：ruby, string

我正在使用 Brett Terpstra 的 Ruby 脚本来查找和记录已完成的 TaskPaper 项目，如下所示：[https ://gist.github.com/ttscoff/1913007](https://gist.github.com/ttscoff/1913007)

该脚本在行中搜索具有类似“@done(YYYY-MM-DD)”的标签的行，并将这些行发送到没有@done 字符串的第一天。

但是，我的物品也有一个标签“@time(HH:MM)”，用于更具体的时间戳。我想做的是另外找到时间标签，只捕获 HH:MM 字符串，将其移动到条目的前面，也没有 @time 标签。

我知道这个问题有点具体，而且我对 Ruby 没有经验。整个下午一直在搜索和试验，但无济于事。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T13:54:55.043

尝试在您的输入中找到此模式

```
1.9.3p429 :001 > s = 'foo bar baz @time(12:00)'
=> "foo bar baz @time(12:00)"
1.9.3p429 :002 > s.scan(/\@time\((\d{1,2}\:\d{2})\)/)
=> [["12:00"]] 
```

# virtualization - 管理程序如何知道特权指令发生在 VM 内部？

> ID：15982664
> 
> 赞同：3
> 
> 时间：2013-04-13T00:00:41.977
> 
> 标签：virtualization, hypervisor

我已经开始阅读有关 VMM 的内容，并且想知道管理程序如何知道特权指令（例如，cpuid）发生在 VM 内部而不是真正的操作系统中？

假设我已经执行了*cpuid*，会发生陷阱并且会发生 VMEXIT ，hypevisor 怎么知道指令发生在我的常规 OS 内部或 VM 内部？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-03T22:41:40.470

First off, you are using the wrong terminology. When an OS runs on top of a hypervisor, ***the OS becomes the VM (virtual-machine) itself*** and ***the hypervisor is the VMM (=virtual machine monitor)***. A **VM** can also be called "***guest***". Thus: **OS on top of hypervisor = VM = guest** (these expressions mean the same thing).

Secondly, you tell the **CPU** that it's **executing inside the VM** from the moment you've executed **VMLAUNCH** or **VMRESUME**, assuming you're reading about Intel VMX. When for some reason the VM causes a hypervisor trap, we say that "***a VM-exit occured***" and the CPU knows it's no longer executing inside the VM. Thus:

*   Between ***VMLAUNCH/VMRESUME*** executions and ***VM-exits*** we are in the **VM** and ***CPUID will trap*** (causing a **VM-exit**)
*   Between ***VM-exits*** and ***VMLAUNCH/VMRESUME*** executions we are in the **VMM** (=hypervisor) and ***CPUID will NOT TRAP***, since we already are in the hypervisor

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T21:11:55.783

特权指令在*用户模式下*执行时会产生异常。该异常通常是**未定义的指令**异常。*管理程序*挂钩此异常，检查正在执行的指令，然后将控制权返回给*VM*。当*主机*操作系统调用同一条指令时，它处于*超级*用户或提升的权限，并且在执行该指令时通常不会产生*异常。*所以一般来说，这些问题都是由**CPU**来处理的。

但是，如果处理器上没有可用的指令（例如*浮点仿真*），则*管理程序*可以为*VM*仿真，如果没有，则*链接*到 OS 处理程序。它甚至可能允许操作系统在*操作系统*中*处理*虚拟*机*和*用户任务*的仿真。

 *所以一般来说，这个问题对于通用 CPU 来说是无法回答的。这取决于如何在*VM*中模拟指令。但是，最好的情况是*管理程序*不模拟任何 *操作系统*指令。仿真不仅会减慢*虚拟机*的速度，还会减慢整个**CPU**，包括主机*操作系统中的**用户进程*。*

# c++ - 在类构造函数内初始化 Dev C 中的字符串数组

> ID：15982668
> 
> 赞同：0
> 
> 时间：2013-04-13T00:00:56.227
> 
> 标签：c++, multidimensional-array, constructor, queue, dev-c++

我在尝试初始化字符串数组时遇到了困难。我正在使用一个具有不同方法的类：一个旨在为数组充电，另一个旨在消除数组的元素等等......我需要在类中的每个方法中使用相同的数组。

问题是我需要对数组（队列）进行模拟并显示其元素，因为它们被添加到队列中或从队列中删除，并且我在尝试初始化数组以显示任何内容而不是随机字符时遇到问题。

这是我正在尝试做的代码......

```
class Queue
{
  public:
         char array[3][6]; //array of 3 positions holding up to 6 characters each
         int front, rear, max;

         Queue()
         {
             front=0;
             rear=0;
             max=3;
             array={"","",""}; //trying to initialize to blank spaces, here's the issue!
         }

         void add_element()
         { }

         void delete_element()
         { }

         void print_on_screen()
         { }
   };
   main()
   {  } 
```

我通过使用一维字符数组使其工作，为 3 个位置中的每一个输入一个数字，但实际上需要它来处理多个字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:04:43.330

```
char array[3][6] 
```

是 chars 的二维**数组**。这个

```
array={"","",""}; 
```

正在尝试初始化一个大小为 3 的一维**字符串数组**。

`´a´`并且`"a"`是不同的东西。第一个是字符。第二个是字符串。

如果您想将 char 数组初始化为特定的东西，那么您可以这样做

```
char array[3][3] = {{'a',' ','a'}, {'a','a','a'},{'a','a','a'}};
//                       ^^^
//                        blank space 
```

但是请记住，将 char 初始化为空格与将 int 初始化为 0 不同。0 是 int 的默认值。这就是为什么在构造某些东西时通常将 int 初始化为 0 的原因。表示它们仍然具有默认值。

我认为您应该将其初始化为零。像这样。

```
 {
         front=0;
         rear=0;
         max=3;
         array[3][6] = {{0}};
     //                ^^^^  
     } 
```

最后`""`不是空格。这个是`" "`

# ruby-on-rails - 带有 f.select 的引导程序未正确设置宽度

> ID：15982669
> 
> 赞同：0
> 
> 时间：2013-04-13T00:01:07.060
> 
> 标签：ruby-on-rails, twitter-bootstrap, form-for

我在表格中有一个选择字段，我似乎无法正确设置宽度。最初，我尝试只使用跨度，但没有奏效。然后，如果我尝试使用 %select 选择的选项位于实际选择下拉列表之外。这是我现在的代码：

```
 %td= line_item.link_to_remove raw('<i class="icon-remove"></i>'), :class => "btn btn-mini"
  %td= line_item.select :type, @types
  %td= line_item.text_field :description, :rows => 2, :style => "width:85%;"
  %td= line_item.text_field :quantity, :class => "input-mini quantity"
  %td= line_item.text_field :rate, :class => "input-mini rate" 
```

我也试过这个：

```
 %td= line_item.link_to_remove raw('<i class="icon-remove"></i>'), :class => "btn btn-mini"
  %td
    %select= line_item.select :type, @types
  %td= line_item.text_field :description, :rows => 2, :style => "width:85%;"
  %td= line_item.text_field :quantity, :class => "input-mini quantity"
  %td= line_item.text_field :rate, :class => "input-mini rate" 
```

这会正确设置宽度，但不会出现选择选项（它们在外面）

我究竟做错了什么？谢谢！

编辑：它说我需要在引导程序中做的是使用选择输入类型，然后使用 span2 使其更小......但它似乎不起作用或者我不确定如何实现它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T02:46:54.080

尝试这个

`%td= line_item.select :type, @types, :class => 'span2'`

# image - 如何在 Magento 安全结账时显示图像

> ID：15982670
> 
> 赞同：0
> 
> 时间：2013-04-13T00:01:22.867
> 
> 标签：image, magento, ssl

我有一个运行 Magento 的网站，刚刚安装了 SSL 证书，现在找不到图像的 404 错误。Web 下管理中的所有设置均已针对 SSL 正确设置。图片来自 https:// 但不显示。

有任何想法吗？

谢谢

# android - 来自styles.xml 中com.google.ads 命名空间的属性/标签

> ID：15982671
> 
> 赞同：3
> 
> 时间：2013-04-13T00:01:30.230
> 
> 标签：android, admob

我是 Ads 新手，并且能够在我的布局中使用下面的代码成功地将我的第一个广告添加到我的 android 应用程序中。

我的布局.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

<com.google.ads.AdView 
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adUnitId="xxx"
    ads:adSize="BANNER"
    ads:loadAdOnCreate="true"/> 
```

由于我的应用程序中有多个布局，因此我将常见的 AdView 属性（例如 adSize、adUnitId 等）移动到了 styles.xml 以减少代码大小。但是，在此更改之后，我遇到了类似的错误 `error: Error: No resource found that matches the given name: attr 'ads:adUnitId'.` `error: Error: No resource found that matches the given name: attr 'ads:adSize'.` `error: Error: No resource found that matches the given name: attr 'ads:loadAdOnCreate'.`

样式.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android"
           xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" >

    <style name="MyAdView">
        <item name="android:layout_width">fill_parent</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="ads:adSize">BANNER</item>
        <item name="ads:adUnitId">xxx</item>
        <item name="ads:loadAdOnCreate">true</item>
    </style>

</resources> 
```

我的**android** :xxx 标签没有问题，问题似乎只出在**广告**:xxx 上。为了使用 com.google.ads 命名空间，我还应该做些什么。由于当我在布局中有代码时一切正常，我想我拥有在我的应用程序中添加广告所需的一切（AdMob SDK、构建路径中的 admob 库以及订单和导出等）。请建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:30:12.943

我认为您只能将样式资源用于与样式相关的属性，如果您想*分解*id，您应该使用字符串资源，例如

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="admob_id">XXX</string>
</resources> 
```

# c# - 下拉列表添加列表项

> ID：15982676
> 
> 赞同：0
> 
> 时间：2013-04-13T00:02:01.473
> 
> 标签：c#, asp.net, database, list, drop-down-menu

我已将本地数据库中的一些数据添加到列表中，现在我需要在下拉列表中显示此列表的值。该列表包含以下数据：

*   爪哇
*   。网
*   JavaScript
*   红宝石
*   Python

方法：

```
public List<string> DisplayTopicNames()
{

    // declare the connection string 
    string database = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|/Forum.accdb;Persist Security Info=True";

    // Initialise the connection 
    OleDbConnection myConn = new OleDbConnection(database);
    //Query
    string queryStr = "SELECT TopicName FROM Topics";
    // Create a command object 
    OleDbCommand myCommand = new OleDbCommand(queryStr, myConn);
    // Open the connection 
    myCommand.Connection.Open();
    // Execute the command 
    OleDbDataReader myDataReader = myCommand.ExecuteReader();

    // Extract the results 
   List<string> topicNames = new List<string>();

    while (myDataReader.Read())
    {
        topicNames.Add(myDataReader.GetValue(0).ToString());
    }

    // close the connection 
    myCommand.Connection.Close();
    return topicNames;
} 
```

}

当我自己返回上述方法时它工作正常并且所有值都在那里但是当我使用以下代码将此列表添加到下拉列表时它只显示“j”“a”“v”“a”这是非常奇怪的。

```
DropDownList1.DataSource = dt.DisplayTopicNames(); 
DropDownList1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:14:39.963

代替：

```
topicNames.Add(myDataReader.GetValue(0).ToString()); 
```

尝试这个：

```
topicNames.Add(myDataReader["TopicName"].ToString()); 
```

# webforms - 是否可以从 asp.net web 表单中的 ViewState 获取 SqlDataSource 参数？

> ID：15982680
> 
> 赞同：1
> 
> 时间：2013-04-13T00:02:54.077
> 
> 标签：webforms, viewstate, sqldatasource, hidden-field

我在我的 aspx 文件中定义了一个 SqlDataSource，我用它来调用 StoredProcedure。它采用 hiddenField 作为其控制参数。

```
<asp:HiddenField ID="input" runat="server" />

<asp:SqlDataSource ID="source" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="sp" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:ControlParameter ControlID="input" Name="input" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

有没有办法可以从 ViewState 中获取该参数？最好将数据源定义保留在 aspx 文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:16:24.807

您的解决方案非常简单。[只需创建您自己的类，从Parameter](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.parameter.aspx)继承它并覆盖[Evaluate](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.parameter.evaluate.aspx)方法。

```
[DefaultProperty("ViewStateKey")]
public class ViewStateParameter : Parameter
{
    public string ViewStateKey
    {
        get
        {
            return (string)ViewState["ViewStateKey"] ?? string.Empty;
        }
        set
        {
            if (ViewStateKey == value)
                return;
            ViewState["ViewStateKey"] = value;

            OnParameterChanged();
        }
    }

    protected override object Evaluate(HttpContext context, Control control)
    {
        if (control == null || string.IsNullOrEmpty(ViewStateKey))
            return null;

        return ViewState[ViewStateKey];
    }
} 
```

之后，您将能够使用您的参数，如下所示（只需记住在页面顶部或 web.config 中注册它）：

```
<asp:SqlDataSource ID="source" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="sp" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <my:ViewStateParameter Name="input" Type="String" ViewStateKey="input" />
    </SelectParameters>
</asp:SqlDataSource> 
```

并且您的参数将通过 key 从 viewstate 中获取其值`input`。我不觉得代码`ViewStateParameter`是一流的。也许你会想要用更多的属性和/或额外的带有断言的参数检查来装饰它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T15:55:27.670

我有类似的问题。由于安全原因，我不想使用隐藏字段来绑定数据源参数。

我用谷歌搜索了一种解决方法 - 使用 asp:label 而不是隐藏字段（确保 Visible=false）。然后您的标签进入查看状态，您可以将标签绑定到数据源参数。

# c++ - OpenGL 中的 Mipmap

> ID：15982683
> 
> 赞同：3
> 
> 时间：2013-04-13T00:03:57.710
> 
> 标签：c++, opengl, mipmaps

我在让 mipmap 工作时遇到了很多麻烦。我使用的是 OpenGL 1.1，而且我没有 glu，所以我使用以下纹理初始化代码：

```
  glGenTextures(1,&texname);
  glBindTexture(GL_TEXTURE_2D,texname);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_S,GL_REPEAT);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_WRAP_T,GL_REPEAT);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
  glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST_MIPMAP_NEAREST);
  w=宽度；h=高度；
  for(int i=0;i<mipmaps;i++,w/=2,h/=2)
    glTexImage2D(GL_TEXTURE_2D,i,GL_RGBA8,w,h,0,GL_RGBA,GL_UNSIGNED_BYTE,tex[i]);

```

变量：

```
// 数据类型：
无符号长整数 *tex[20];
int mipmaps，宽度，高度，w，h；
GLuint texname;

```

`tex`是一个包含纹理 mipmap 像素数组列表的数组。mipmap 被正确处理（我单独测试了它们）。`mipmaps`是将原始图像缩小为 1x1 像素纹理的 mipmap 的数量（原始纹理为 256x256 - 因此在代码中的这一点为 8）。是原始纹理的尺寸（256x256）`width`。`height`

结果是它甚至不使用纹理。一切都只是呈现平坦的灰色（由于照明而呈灰色）。

有什么我忘记了吗？我检查了[这个参考](http://www.glprogramming.com/red/chapter09.html)，我找不到任何冲突。

其他细节：总的来说，我启用了 GL_DEPTH_TEST、GL_TEXTURE_2D、GL_LIGHTING、GL_CULL_FACE、GL_FOG（和 GL_LIGHT0、GL_LIGHT1，它们可能没有什么区别）。另外，我正在使用 Mesa 3D 的 OpenGL 实现（Mesa 4.0 版，可转换为 OpenGL 1.3 版），如果这可能与它有关的话。

**编辑：**

问题是，当我将 GL_NEAREST_MIPMAP_NEAREST 更改为 GL_NEAREST 时，纹理工作正常（不使用 mipmap）。所以，我看不出它怎么可能是任何其他代码——至少我想不出它可能是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T01:53:33.003

mipmaps 的值为 8。您的图像是 256x256。因此，您应该有 9 个级别的 mipmapping (256,128,64,32,16,8,4,2,1)。如果缺少一个，您将失去质感。

# php - 在 MySQL 查询结果中显示“首字母”html 标签

> ID：15982692
> 
> 赞同：0
> 
> 时间：2013-04-13T00:05:41.453
> 
> 标签：php

经过多次修改，我设法让我的代码工作，其中结果按第一个字母分组在一起，第一个字母也显示如下：

```
-A-
Alton Towers

-C-
Cedar Point
Chessington 
```

等等

我已经把这些字母标题变成了 HTML 锚。我现在要做的是运行类似的代码，它只在页面顶部的一行中显示第一个字母，这些字母是指向每个锚点的链接。我无法让代码工作。如果我复制代码并修改它只是为了显示字母，则不会显示原始查询列表。有人可以帮忙吗？下面是用于显示带有字母标题的查询结果的代码。

```
try
{
$sql = 'SELECT park_id, name, town, state, country
FROM tpf_parks ORDER BY name ASC';
$result = $pdo->query($sql);
}
catch (PDOException $e)
{
$error = 'Error fetching parks: ' . $e->getMessage();
//include 'error.html.php';//
exit();
}

$name = '';

foreach($result as $key=>$row){
    if(substr($row['name'],0,1)!=$name) echo '<br /><br /><h1>-<a name="'.substr($row['name'],0,1).'">'.substr($row

['name'],0,1).'-</h1></a>';
    $name = substr($row['name'],0,1);

    echo "<a href='park.php?park_id=".$row['park_id']."'>

<h2>".$row['name']."</h2>
<h3>".$row['town'].", ".$row['state'].", ".$row['country']."</h3></a><hr>";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:11:51.997

您第一次遍历它时不会自动重置结果集上的指针。因此，当您第二次尝试访问它时，它是空的/在集合的末尾。您应该阅读结果 PDOStatement 对象的工作原理。

[这是一个类似的问题，它将让您了解如何解决这个问题。](https://stackoverflow.com/questions/9437214/resetting-array-pointer-in-pdo-results)

# android - 与 stdarg.h 相关的 Android NDK 问题

> ID：15982693
> 
> 赞同：1
> 
> 时间：2013-04-13T00:05:44.530
> 
> 标签：android, android-ndk

我正在尝试为桌面和 Android 制作本机（C++）跨平台日志记录。为此，我创建了一个抽象的原生 Logger 类，以及相应的继承类（StdoutLogger、AndroidLogger 等）以及实现的日志方法。因此，由于 Android 支持本机日志记录的是 __android_log_print(int prio, const char *tag, const char *fmt, ...) 方法，它使用类似 printf 的语法，参数数量不定，我制作了抽象日志方法使用类似的语法：

```
virtual void log(int aLogLevel, const char *tag, const char *format, ...)=0; 
```

好吧，为了将这些不定数量的参数传递给 Android 日志记录方法，我发现我需要使用另一种方法，它做同样的事情，但采用 va_list 而不是不定数量的参数。它也存在于 log.h 中，被称为 __android_log_vprint(int prio, const char *tag, const char *fmt, va_​​list ap)，所以我只需要传递该方法的参数即可。

问题是，要让所有这些工作，我需要 stdarg.h 包含我需要的所有东西（如 va_list 的声明等），但默认情况下 Eclipse 找不到它：未解决的包含：

在 Eclipse 项目设置中，我的包含目录包括：

```
${NDKROOT}/platforms/android-9/arch-arm/usr/include
${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.6/include
${NDKROOT}/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi-v7a/include 
```

它的缺失很奇怪，因为 stdarg.h 是 C 标准库的一部分。

所以我在这里搜索并找到了它，所以我将它添加到包含目录中：

```
${NDKROOT}/toolchains/arm-linux-androideabi-4.6/prebuilt/windows-x86_64/lib/gcc/arm-linux-androideabi/4.6/include 
```

在此之后，我让它工作得很好，但我不确定这是否是正确的方法。

无论如何，后来（在另一个继承类中实现 log 方法时）我遇到了另一个关于 vfprintf 方法的问题：

```
virtual void Log(int aLogLevel, const char *tag, const char *format, ...)
{
    if (aLogLevel >= loglevel)
    {
        va_list args;
        va_start (args, format);
        vfprintf (stdout, format, args);
        va_end (args);
    }
} 
```

Eclipse 显示错误：

```
Invalid arguments ' Candidates are: int vfprintf(__sFILE *, const char *, char *) ' 
```

我检查了一下，显然它想要一个 __va_list （以 __ 开头），而不是 va_list 并且看起来它们显然不兼容（根据 Eclipse）。这个 vfprintf 在 stdio.h 中，所以我开始搜索并在我找到 stdarg.h 的类似文件夹中找到了另一个 stdio.h，所以我也将它添加到包含目录（并将其移到顶部）：

```
${NDKROOT}/toolchains/arm-linux-androideabi-4.6/prebuilt/windows-x86_64/lib/gcc/arm-linux-androideabi/4.6/include-fixed 
```

现在所有错误都消失了，一切似乎都在工作，但我真的不确定这是否真的是正确的方法。我有最新的 Eclipse/CDT/NDK/等。任何帮助，将不胜感激。

**编辑：** fadden：感谢您的回答。这条评论太长了，所以我把它放在这里。是的，我使用 ${NDKROOT}/ndk-build.cmd 来构建原生部分。

是的，我注意到 Eclipse 会指示错误的情况，因此它甚至不会让我开始构建应用程序，但是当我重新启动 Eclipse 而不打开错误所在的文件时，它实际上构建成功。但是当我打开它认为有错误的文件时，它不会让我重新开始构建。所以看起来 Eclipse 指示的错误和实际错误（阻止构建）之间存在相当大的不一致。也许我应该找到一种方法让它构建而不考虑指示的错误，尽管在项目中出现应该忽略的错误可能会很烦人，不知道什么是真实的，什么不是那么真实的错误......或者只是添加包含目录以保持 Eclipse 快乐所需的一切，到目前为止它似乎正在工作，只是不确定这是否真的是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T20:55:43.557

让 Eclipse + CDT 对 Android 感到满意在很大程度上是一个反复试验的问题。（为了让 size_t 正常工作，几天甚至几周已经不可挽回地浪费了。）最终，您应该使用 NDK 工具链而不是 Eclipse 进行构建，所以只要 Eclipse*看起来*很高兴，您可能处于良好状态，因为最终它不会影响您的二进制文件。

正如您所注意到的，某些标头（如`stdarg.h`）是由 gcc 提供的，而不是仿生的，因此有必要深入研究一下。我希望在某个地方有一个定义，相当于`__va_list`如果`va_list`你有正确的#defines 集（也许`__need___va_list`？？）。

# jquery - jQuery动态加载时多次绑定事件，如何避免？

> ID：15982698
> 
> 赞同：2
> 
> 时间：2013-04-13T00:06:54.167
> 
> 标签：jquery, events, dynamic, bind

我动态加载内容，如下所示：

```
$.post('main/test', data,function(resp){
    $('#container').html(resp);
}); 
```

容器只是`<div id="container"></div>`

“主/测试”有这个脚本：

```
$('body').on('click','#login-logs',function(e){
  e.preventDefault();
  $('#login-logs-last').toggle();
  $('#login-logs-details').toggle();
}); 
```

现在的问题是，我可以多次加载这个页面“main/test”，每次我这样做，事件都会再次绑定。

所以当我第一次加载它并点击#login-logs时会发生什么，它像预期的那样工作（隐藏#login-logs-last并显示#login-logs-details），但是当我再次加载页面时，它会相反，第三次它再次工作，依此类推。

**所以问题是，我怎样才能让这个 on('click','#login-logs') 事件只绑定一次，我第一次动态加载页面时......？而不是每次我加载页面...**

为什么？我希望用户能够来回浏览不同的页面，这意味着“主/测试”页面将被加载多次..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:21:34.273

`off()`在附加新的处理程序之前，您将删除以前的处理程序`on()`：

```
$('body').off('click','#login-logs')
         .on('click','#login-logs',function(e){
              e.preventDefault();
              $('#login-logs-last, #login-logs-details').toggle();
}); 
```

# c# - C# 字符串传递给 C++ CLI

> ID：15982703
> 
> 赞同：5
> 
> 时间：2013-04-13T00:07:43.990
> 
> 标签：c#, c++-cli

没有看到我在 S/O 上寻找的东西。我有一个需要将值传递给 C++ CLI 应用程序（托管代码）的 C# 应用程序。（我真的只需要弄清楚字符串传递）

C# 我有

```
double xCoordinate = 4820.85;
double yCoordinate = 9792.93;
string stringName = "My string stuff";
abc.Highlight(xCoordinate, yCoordinate, stringName); 
```

在 C++/CLI 中，我希望接收字符串（双倍似乎很好）

我阅读了以下内容

```
C++ --> std::wstring
or in C++  -->  extern "C" __declspec void GetString( char* buffer, int* bufferSize );
C# --> void GetString( StringBuilder buffer, ref int bufferSize ); 
```

也许

```
System::String^
const char * 
```

? 因此，我似乎只是希望将字符串从 C# 发送到 C++/CLI，而这似乎很简单，我没有接受过 C++ 培训，并且查找 Interop/marshalling 的示例似乎并不那么简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:08:50.657

如果你使用 C++/CLI，你可以`String`直接使用：

```
void Highlight(double xCoordinate, double yCoordinate, String^ name)
{
    //... 
```

# atk4 - 下拉依赖敏捷工具包

> ID：15982705
> 
> 赞同：0
> 
> 时间：2013-04-13T00:08:17.830
> 
> 标签：atk4, dropdownbox, agiletoolkit

你好朋友很高兴来到这里，我是这个框架的新手，我对如何制作依赖下拉列表有一些疑问，例如，我有一个国家列表并选择一个国家来向我展示他们的状态希望我可以已经非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:10:25.790

这是您要查找的内容的演示：

[http://demo39.agiletoolkit.org/demo.html?t=20](http://demo39.agiletoolkit.org/demo.html?t=20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T21:24:03.650

难道是上面的例子（[http://demo39.agiletoolkit.org/demo.html?t=20](http://demo39.agiletoolkit.org/demo.html?t=20)）只在数组的下拉值有数字时才有效？IE：

```
$country_list=array(1=>'Country1', 2=>'Country2')
$state_list=array(1=>array('st1','st2'),2=>array('st3') 
```

晚上使用时演示将无法正常工作：

```
$country_list=array('COUNTRY1'=>'Country1','COUNTRY2'=>'Country2')
$state_list=array('COUNTRY1'=>array('ST1'=>'st1','ST2'=>'st2'),'COUNTRY2'=>array('ST3'=>'st3') 
```

使用第二个设置，我在表单提交时收到错误消息：

*值“ST3”不是提供的值之一*

还是我做错了什么？例如，我应该（不）使用stickyGET吗？

# windows-7 - 如何解决 python 脚本中的系统权限错误？

> ID：15982708
> 
> 赞同：0
> 
> 时间：2013-04-13T00:08:49.210
> 
> 标签：windows-7, python-3.3

我有这个简单的 python 脚本；

```
def scanFolder(path="."):
    foldersList = []
    for name in os.listdir(path):
        if os.path.isdir(name):
            for innerName in os.listdir(name):
                if os.path.isdir(innerName):
                    foldersLIst.append(innerName) 
```

运行此脚本时，我收到此错误消息：

```
Traceback (most recent call last):
  File "upNew.py", line 42, in <module>
  File "upNew.py", line 18, in __init__
    scanFolder(path=".")
  File "upNew.py", line 24, in scanFolder
    for innerName in os.listdir(name):
PermissionError: [WinError 5] Access is denied: 'System Volume Information\\*.*' 
```

我该如何解决这个问题？我在 Windows 7 上，使用 python 3.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:13:06.013

默认情况下，Windows 包含一些受保护的目录，不受任何普通用户（包括管理员）的保护。除非您请求 Windows 允许访问它们，否则您无法（使用任何程序）检查这些目录。

因此，您可能只想完全跳过目录：

```
try:
    dirs = os.listdir(name)
except PermissionError:
    print("Permission denied:", name)
    continue
for innerName in dirs:
    ... 
```

# c++ - 在其他类中使用类类型的问题

> ID：15982711
> 
> 赞同：0
> 
> 时间：2013-04-13T00:08:59.357
> 
> 标签：c++, class, c-preprocessor

我完全不知道发生了什么。我一直在寻找这里发生的怪异的解释，但似乎我的情况在某些方面是独一无二的。我想这是我在每个文件中包含头文件的顺序，但无济于事，我还没有找到似乎是解决方案的组合。

我似乎得到的确切错误是在声明`LogArray[maxLength]`.

我的一门课，logmgmt 类：

```
class logmgmt
{
private:
static const int maxLength = 500;
log LogArray[maxLength];
int length;

public:
void fillLogs(int index, int iD, std::string date, double startTime, double endTime);
void displayThisLog(int index);
void setLength(int length);

}; 
```

logmgmt.cpp 中的预处理器指令：

```
#include <iostream>
#include <string>
#include <cmath>
using namespace std;
#include "log.h"
#include "Logmgmt.h" 
```

和 main.cpp 中的指令

```
#include <iostream>
#include <fstream>
#include <cstdlib>
using namespace std;
#include "employee.h"
#include "log.h"
#include "employeemgmt.h"
#include "Logmgmt.h" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:58:26.470

删除`using namespace std`.

**那是用许多**可能导致这些冲突的符号名称污染全局名称空间。

在您的示例中，函数`std::log`变为`log`. 所以它不能再命名一个全局类型。

# permissions - 如何在 Android 中访问受权限保护的导出服务

> ID：15982716
> 
> 赞同：2
> 
> 时间：2013-04-13T00:10:07.567
> 
> 标签：permissions, android-service

我创建了一项远程服务，如下所示：-

```
<service android:name=".XYZService"
            android:permission="com.xyz.service"
            android:exported="true">
            <intent-filter>
                <action android:name="com.abc.def.XYZService"/>
            </intent-filter>
        </service> 
```

我正在尝试通过使用客户端应用程序服务来绑定此服务，如下所示：-//客户端服务 onStartCommand 代码：

```
 @Override
            public int onStartCommand(Intent intent, int flags, int startId) {

                boolean ret;
                try {
                          Intent i = new Intent("com.abc.def.XYZService");
                    ret = getApplicationContext().bindService(i, serviceConnection,
                            Context.BIND_AUTO_CREATE);
                    if (ret == false) {
                        //log error
                    }

                } catch (SecurityException e) {
                                  e.printStackTrace();
                }
        return super.onStartCommand(intent, flags, startId);
            } 
```

客户端应用程序清单具有以下权限：-

```
 <uses-permission android:name="com.xyz.service" /> 
```

不过，我收到以下异常：- 安全异常：客户端服务无权绑定到 xyz 服务。

我的目的是通过一些权限来保护我导出的服务，并在客户端应用程序中使用该权限来访问导出的服务。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-30T11:51:32.993

用这个。

```
<permission
        android:name="myPermission"
        android:description="@string/myPermissionDescription"
        android:label="@string/myPermissionLabel">
    </permission> 
```

更多信息： [第 1](https://stackoverflow.com/questions/4425940/creating-your-own-permissions)页- [第 2 页](https://stackoverflow.com/questions/8816623/how-to-use-custom-permissions-in-android)

# macos - 用于 Mac 的 Armv6 汇编程序

> ID：15982720
> 
> 赞同：3
> 
> 时间：2013-04-13T00:10:38.473
> 
> 标签：macos, assembly, operating-system, kernel, raspberry-pi

我正在关注这个关于树莓派操作系统开发的教程。 [http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/os/ok01.html](http://www.cl.cam.ac.uk/projects/raspberrypi/tutorials/os/ok01.html)

我使用的是 Mac，所以它建议使用 Yagarto 包来组装代码。但是，它们似乎不起作用。我安装了多次检查。

我想知道是否有 Mac 的替代汇编器以及如何使用它来创建 .img 文件以用作 pi 的内核。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T14:46:16.863

您可以为此使用 Xcode - 如果您安装 xcode，“iPhone SDK”编译器实际上是 i386、x86_64 和 - ARM 的交叉编译器。

```
${whereever_you_put_xcode}/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/as -arch armv6 
```

会成功的：具体来说，它将执行

`/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/../libexec/as/arm/as`

# r - 去掉日期并保留时间

> ID：15982722
> 
> 赞同：16
> 
> 时间：2013-04-13T00:10:54.787
> 
> 标签：r, datetime

很多人问如何剥离时间并保持日期，但反过来呢？鉴于：

```
myDateTime <- "11/02/2014 14:22:45" 
```

我想看看：

```
myTime
[1] "14:22:45" 
```

时区不是必需的。

我已经尝试过（来自其他答案）

```
as.POSIXct(substr(myDateTime, 12,19),format="%H:%M:%S") 
```

[1] “2013-04-13 14:22:45 新西兰标准时间”

目的是仅按一天中的时间分析几天内记录的事件。

谢谢

**编辑：**

事实证明，没有纯粹的“时间”对象，所以每个时间也必须有一个日期。

最后我用了

```
as.POSIXct(as.numeric(as.POSIXct(myDateTime)) %% 86400, origin = "2000-01-01") 
```

而不是字符解决方案，因为我需要对结果进行算术运算。这个解决方案类似于我原来的解决方案，除了可以一致地控制日期 - 在这种情况下为“2000-01-01”，而我的尝试只是在运行时使用当前日期。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-13T00:43:07.960

我认为您正在寻找该`format`功能。

```
(x <- strptime(myDateTime, format="%d/%m/%Y %H:%M:%S"))
#[1] "2014-02-11 14:22:45"
format(x, "%H:%M:%S")
#[1] "14:22:45" 
```

那是`character`，而不是“时间”，但是`aggregate`如果这就是您所说的“仅按一天中的时间分析几天内记录的事件”，则可以使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-13T01:27:19.507

如果 GMT 一天内的时间对您的问题有用，您可以使用`%%`余数运算符获取余数模`86400`（一天中的秒数）。

```
stamps <- c("2013-04-12 19:00:00", "2010-04-01 19:00:01", "2018-06-18 19:00:02")
as.numeric(as.POSIXct(stamps)) %% 86400
## [1] 0 1 2 
```

# php - 比较字符串和字符串 PHP

> ID：15982724
> 
> 赞同：0
> 
> 时间：2013-04-13T00:11:03.943
> 
> 标签：php

我在这里查看了其他一些答案以获取此技术，但它似乎不起作用。

我将从支付网关响应返回的数组值与现有字符串进行比较，如下所示：

```
// $this->config->get('ezic_avs') returns DFJMQVXYLWZABOPUSCIG
// $this->result['avs_code'] returns X

if (strpos ($this->result['avs_code'], $this->config->get('ezic_avs')) === false):      
    // avs code doesn't match: fail
    $this->json['error'] = $this->language->get('error_avs');
endif; 
```

这不应该返回 false，因为`X`在内部找到`DFJMQVXYLWZABOPUSCIG`但它确实如此。

我到底做错了什么会导致失败？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:13:30.633

你的论点是倒退的。strpos 是 $haystack, $needle

# google-apps-script - 如何替换电子邮件转发收件人？

> ID：15982725
> 
> 赞同：0
> 
> 时间：2013-04-13T00:11:20.790
> 
> 标签：google-apps-script, google-sheets, gmail

我试图找出是否可以设置一些东西来将电子邮件转发给交替的收件人。

当我收到电子邮件时，GMail 过滤器会标记其中的一些，例如用“大象”标记。

有多个人可以处理“大象”电子邮件，所以我想将每封新电子邮件转发给**其中一个**，循环浏览“大象处理程序”列表。（比如说，Joe、Amy 和 Tammy。）他们的电子邮件地址可以在电子表格中找到。

```
 A
1 joe@example.com
2 amy@example.com
3 tammy@example.com 
```

伪代码：

```
Get first unread email
  Forward email to Joe
Get next unread email
  Forward email to Amy
Get next unread email
  Forward email to Tammy
Go to start 
```

如何在 Google Apps 脚本中完成此操作，以便它在所有新电子邮件到达时处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T05:06:49.557

可以通过多种方式做到这一点。在电话领域，这种行为称为*Hunt Group*。这是一个借用该概念来帮助您入门的建议。

假设：

*   您正在使用 Gmail。
*   该脚本将与 Gmail 帐户属于同一帐户持有人。

方法：

*   您将在 Gmail 中设置一个过滤器来识别符合您条件的传入邮件 - “大象”电子邮件。

*   在此过滤器中，您将对新电子邮件应用标签 - “大象” - 脚本将使用该标签来识别“待办事项”。

*   电子表格将用于包含一个脚本，该脚本将扫描与“大象”[标签](https://developers.google.com/apps-script/class_gmaillabel)相关的未读消息并转发它们。

*   该脚本将设置为以适合您的时间间隔[触发](https://developers.google.com/apps-script/understanding_triggers)计时器[事件。](https://developers.google.com/apps-script/understanding_events)

*   电子表格将包含（格式正确的）目标电子邮件地址列表；乔、艾米、塔米。脚本将读取这些并按顺序使用它们。

*   处理完一封电子邮件后，它将被标记为“已读”。您可以选择取消标记、重新标记、归档或丢弃它们。

### 剧本

此脚本使用 ScriptProperties 跟踪哪个收件人将获得下一条转发的消息。如果您希望收到大量消息，则需要对其进行增强以支持批量获取消息。

记得`labelName`适当改变。

该脚本会进行一些错误检查，但不会验证电子邮件地址 - 消息可能因此而导致转发操作失败。买者自负。

这也[可以作为 gist 获得](https://gist.github.com/mogsdad/5377053)。

```
/**
 * Retrieves a given user label by name and forwards unread messages
 * associated with that that label to a member of the Hunt Group.
 */
function huntGroupForward() {
  // get the label for given name
  var labelName = "elephant"
  var label = GmailApp.getUserLabelByName(labelName);
  if (label == null) throw new Error("No messages for label "+labelName);
  // get count of all threads in the given label
  var threadCount = label.getUnreadCount();
  if (threadCount == 0) return;  // quick exit if nothing to do.
  var threads = label.getThreads();
  var messages = [];
  for (var i in threads) {
    if (threads[i].isUnread()) {
      messages = messages.concat( threads[i].getMessages() );
    }
  }
  for (var i = 0; i < messages.length; i++) {
    if (messages[i].isUnread()) {
      messages[i].forward(nextHuntGroupMember());
      messages[i].markRead();
    }
  }
};

/*
 * Global object to store working copy of the Hunt Group
 */
var huntGroup = { next : 0, members : [] };

/*
 * Get the email address of the next Hunt Group Member
 * to forward a message to.
 */
function nextHuntGroupMember() {
  if (huntGroup.members.length == 0) {
    // Load members
    var sheet = SpreadsheetApp.getActiveSheet();
    var data = sheet.getDataRange().getValues();
    for (var i = 0; i < data.length; i++) {
      huntGroup.members.push(data[i][0])
    }
    // Make sure we have members
    if (huntGroup.members.length == 0) {
      throw new Error("Found no email addresses");
    }
  }

  // Retrieve next index. Properties are always stored as strings, so
  // we need to parse the retrieved value to use it as a Number.
  var next = parseInt(ScriptProperties.getProperty("nextHuntGroupMember"));
  if (next != null) {
    huntGroup.next = next;
  }
  else {
    next = 0;
  }

  // get next member to be used
  var nextMember = huntGroup.members[next];
  // ... then move on to new next (increment modulo list length)
  next = ++next % huntGroup.members.length;
  // store the new next value
  ScriptProperties.setProperty("nextHuntGroupMember", next);

  return nextMember;  
} 
```

### 扳机

一旦您对脚本感到满意，请将其设置为定期运行。这是您将其设置为每小时运行的方式：

![扳机](https://i.stack.imgur.com/mOphb.png)

# python - 除了在 Python 中真正做了什么？

> ID：15982726
> 
> 赞同：1
> 
> 时间：2013-04-13T00:11:22.950
> 
> 标签：python, exception

我真的是 Python 的新手，对异常没有经验，但我已经阅读了所有文档，但找不到答案……所以我正在寻找更深层次的 except 语义。例如，当我们有：

```
try:
    x = 2
except GreaterThanOne:
    print("The value is greater than one") 
```

在这种情况下，我希望打印消息。当输入的值大于一时，有没有办法定义 GreaterThanOne 类（异常）？

* * *

好吧，让我更具体一点...

每个错误都由应该添加到错误属性中的特定规则引发，对吗？例如：

```
try:
    myvalue = x / y
except ZeroDivisionError:
    print("Some error message printed ...") 
```

因此，当我使用此代码并将 y 输入为 0 时，将引发异常 ZeroDivisionError ...我可以重新定义 ZeroDivisionError 以像这样引发，但如果 y 设置为 ... 2 或 3 或任何其他值？

输入：

```
x = 10
y = 2
try:
    myvalue = x / y
except ZeroDivisionError:
    print("division by 2") 
```

输出：`division by 2`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:14:44.083

这是一个可以帮助您理解的示例。在您的 Python 解释器中运行它，并观察在您调用`set_val(2)`.

```
# Defining our Exception subclass:
class GreaterThanOne(Exception):
    pass

# The global value we pretend to care about:
val = 0

# Function to set a value but possibly raise our new Exception 
def set_val(new_val):
    if new_val > 1:
        raise GreaterThanOne("%d > 1" % new_val)
    val = new_val

# Catching exception:
try:
    set_val(0)
    set_val(1)
    set_val(2)
except GreaterThanOne:
    print "Whoops - one of those values was greater than one"

# Not catching exception:
set_val(0)
set_val(1)
set_val(2)
set_val(3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:29:37.333

try-except 块在此块中捕获异常。

```
try:
    #some stuff here
except ExceptionClass as e:
    #Exception handling here 
```

except 关键字后面的类表示要捕获哪种异常。通常你会给出一个特定的类，比如 ValueError 或 KeyError。您还可以使用 Exception 类来捕获任何异常。因为所有其他异常类都继承自 Exception。

因此，如果您想使用此构造，则需要通过调用的函数/方法引发异常，或者使用 raise 关键字自己引发异常。

像这样：

```
try:
    raise KeyError('Just for test')
except KeyError as e:
    #Exception handling here 
```

try except 不会自动检查它之间的整个代码，它只是查找异常......或者更具体地说，它查找您告诉它查找的那些异常。

当然你也可以检查异常实例。

```
try:
    raise KeyError('Just for test')
except KeyError as e:
    print e.args 
```

更多信息，请参见： [http ://docs.python.org/2/tutorial/errors.html](http://docs.python.org/2/tutorial/errors.html)

# php - PHP GD - 水平居中对齐文本并减小字体大小以将其保留在图像内

> ID：15982732
> 
> 赞同：5
> 
> 时间：2013-04-13T00:12:13.803
> 
> 标签：php, gd, centering, alignment

希望你过得很好。

我仍然是 php 的新手，所以在阅读了一些文章并在这里检查了一些帖子之后，我能够使用 PHP GD 使用 imagecreatefrompng() 函数在图像上放置一些文本，用户将来到一个表单，他们将能够输入他们的名字并且名字将被写在图像上，不幸的是我无法水平对齐文本中心，我尝试了所有可能的方法（我的方法显然是错误的），但我所有的尝试都失败了，请你们帮我把弦中心水平对齐吗？另外，由于我使用的是另一种大字体，因此如果输入的名称有点长，我需要减小尺寸，这样它就不会超过图像限制并保持在中心。

```
<?php
 $nombre=$_POST['nombre'];
  //Set the Content Type
  header('Content-type: image/jpeg');

  // Create Image From Existing File
  $jpg_image = imagecreatefromjpeg('fabian.jpg');

  // Allocate A Color For The Text
  $white = imagecolorallocate($jpg_image, 255, 255, 255);

  // Set Path to Font File
  $font_path = 'fabian.TTF';

  // Set Text to Be Printed On Image , I set it to uppercase
  $text =strtoupper($nombre);

  // Print Text On Image
  imagettftext($jpg_image, 75, 0, 50, 400, $white, $font_path, $text);

  // Send Image to Browser
  imagepng($jpg_image);

  // Clear Memory
  imagedestroy($jpg_image);

  ?> 
```

非常感谢您的帮助，稍后我将通过单击提交按钮来尝试保存图像，因为我不希望用户通过右键单击图像来保存图像。

谢谢小伙伴们！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-13T01:14:48.880

您需要图像的宽度和文本的宽度来关联两者。

```
// get image dimensions
list($img_width, $img_height,,) = getimagesize("fabian.jpg");

// find font-size for $txt_width = 80% of $img_width...
$font_size = 1; 
$txt_max_width = intval(0.8 * $img_width);    

do {        
    $font_size++;
    $p = imagettfbbox($font_size, 0, $font_path, $text);
    $txt_width = $p[2] - $p[0];
    // $txt_height=$p[1]-$p[7]; // just in case you need it
} while ($txt_width <= $txt_max_width);

// now center the text
$y = $img_height * 0.9; // baseline of text at 90% of $img_height
$x = ($img_width - $txt_width) / 2;

imagettftext($jpg_image, $font_size, 0, $x, $y, $white, $font_path, $text); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-02T12:38:33.973

您可以使用[stil/gd-text](https://github.com/stil/gd-text)类来对齐文本。免责声明：我是作者。

```
<?php
use GDText\Box;
use GDText\Color;

$jpg_image = imagecreatefromjpeg('fabian.jpg');

$textbox = new Box($jpg_image);
$textbox->setFontSize(75);
$textbox->setFontFace('fabian.TTF');
$textbox->setFontColor(new Color(255, 255, 255));
$textbox->setBox(
    50,  // distance from left edge
    50,  // distance from top edge
    200, // textbox width
    100  // textbox height
);

// text will be aligned inside textbox to center horizontally and to top vertically
$textbox->setTextAlign('center', 'top');
$textbox->draw(strtoupper($nombre)); 
```

然而这不是一个完整的答案，因为它不能自动减小字体大小。

# javascript - 无法在 JavaScript 的点击事件中访问它

> ID：15982733
> 
> 赞同：2
> 
> 时间：2013-04-13T00:12:15.717
> 
> 标签：javascript

下面我有一个我正在处理的简单模态对话框脚本。它在 CSS 方面使用***Bootstrap Modal***。

我的目标是制作一个简单的模态对话框，该对话框将显示并要求用户执行操作（确定或取消按钮单击）。我想通过允许在这些点击事件发生时传入和调用一些回调函数来使其灵活地在未来的项目中使用。还有其他一些选项，例如是否显示取消按钮。（我还没有添加那部分）

所以我正在做的是让函数接受选项/设置的对象。我还有默认选项/设置，然后用户选项合并到其中，允许用户选项是可选的，如果存在则覆盖默认值。

我知道有几种方法可以做到这一点，但这是我从我尊重的 JS 开发人员那里研究的几个项目中看到的方法。

下面是我的 JavaScript 代码、带有代码的 JSFiddle 页面和一个 JSFiddle 输出页面，用于查看结果。

在代码中途有一条注释`// PROBLEM AREA DOES NOT CALL THE CALLBACK FUNCTION`

在这个领域，我到目前为止尝试过 3 种不同的东西......

```
this.options.cancelCallback(); // This is what I wanted to work!
zPanel.dialog.confirm.options.cancelCallback(); Tried this 2nd
options.cancelCallback(); // This Works if there is a user defined callback but errors when not 
```

所以我现在在那个领域的问题是当我调用`this.options.cancelCallback()`哪个**应该**持有回调函数时，如果用户传递了一个应该重新分配给这个属性，如果用户没有，它至少应该看到一个空的默认值。

我认为这`this`部分搞砸了，因为它在 onclick 函数内部。顺便说一下，这对我来说看起来不像是一个正常的点击事件，我在另一个项目中看到它并且它“有效”

所以我得到的错误信息是`Uncaught TypeError: Cannot call method 'okCallback' of undefined`

有人可以告诉我如何解决这个问题或改进它吗？谢谢你。

JSFiddle [http://jsfiddle.net/jasondavis/dymn5/](http://jsfiddle.net/jasondavis/dymn5/)

全屏预览[http://jsfiddle.net/jasondavis/dymn5/show/result/](http://jsfiddle.net/jasondavis/dymn5/show/result/)

```
var zPanel = {

    dialog: {

        confirm: function (options) {

            var i;

            // Default options
            this.options = {
                message: "",                    // String: Default Message
                cancelButton: true,             // Boolean: Show Cancel Button
                okButton: true,                 // Boolean: Show Ok Button
                cancelCallback: function () {}, // Function: Callback function when Cancel button clicked
                okCallback: function () {}      // Function: Callback function when Ok button clicked
            };
            // Merge User defined options
            for(i in options) {
                if(i in this.options) {
                    this.options[i] = options[i];
                } else {
                    throw new Error("Notice doesn't support option: " + i);
                }
            }

            var container = document.createElement('div');
            //template for modal window
            container.innerHTML += '<div class="modal-content confirm">' +
                '<div class="modal-body">' +
                '<div>' + this.options.message + '</div>' +
                '<div class="controls">' +
                '<button type="button" class="btn primary">OK</button>' +
                '<button type="button" class="btn">Cancel</button>' +
                '</div>' +
                '</div>' +
                '</div>';

            //modal window
            var modal = container.firstChild;
            container = document.createElement('div');
            container.innerHTML = '<div class="modal-backdrop fade in"></div>';
            //dark background
            var background = container.firstChild;

            //Find OK button
            var ok = modal.getElementsByTagName('button')[0];
            ok.onclick = function () {
                modal.parentNode.removeChild(modal);
                document.body.removeChild(background);

                // PROBLEM AREA DOES NOT CALL THE CALLBACK FUNCTION
                this.options.okCallback();
                //zPanel.dialog.confirm.options.okCallback();
                //options.okCallback(); // Works if there is a user defined callback
            }

            //Find Cancel button
            var cancel = modal.getElementsByTagName('button')[1];
            cancel.onclick = function () {
                modal.parentNode.removeChild(modal);
                document.body.removeChild(background);

                // PROBLEM AREA DOES NOT CALL THE CALLBACK FUNCTION
                this.options.cancelCallback();
                //zPanel.dialog.confirm.options.cancelCallback();
                //options.cancelCallback(); // Works if there is a user defined callback
            }

            document.body.appendChild(background);
            document.body.appendChild(modal);
        }

    }

}

// Create a Dialog on Click event
$('#delete_btn').click(function () {
    zPanel.dialog.confirm({
        message: 'Are you sure you want to delete action?',
        cancelCallback: function(){alert('user pressed Cancel button')},
        okCallback: function () {alert('id deleted')},
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:18:55.793

函数内部更改的上下文`this`，尤其是事件处理程序。这也是使用时的常见问题`setTimeout`。

`this`将引用发生事件的元素。解决此问题的一种方法是将`this`处理程序外部的值存储在容器函数的新变量中，然后在处理程序中引用该变量。

所以在你的`confirm`方法中添加这样的东西：

```
var self = this; 
```

在您的处理程序中，使用：

```
self.options.cancelCallback(); 
```

**演示：http:** [//jsfiddle.net/dymn5/3/](http://jsfiddle.net/dymn5/3/)

以及为传递的回调提供处理程序上下文的方法，您可以使用以下方法：

```
self.options.cancelCallback.apply(this, arguments); 
```

这样`cancelCallback`' 的值`this`将是事件发生的元素，并且将有任何参数传递给它，如`event`对象。

这允许您将其用于您的选项：

```
.confirm({
    cancelCallback: function (e) {
        // `this` refers to the button
        // `e` refers to the event
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:25:27.273

在 javascript 中，`this`总是指函数的“所有者”。

```
// example 1: function without an owner
var displayA = function() { console.log(this.a); }
displayA(); // undefined

// example 2: object with a function member
var obj = {
    a: 1,
    displayA: displayA
}

obj.displayA(); // logs "1"
// note that obj.displayA is the exact same function as displayA. But when it is called, obj is the owner of the function. 
```

在第一个示例中，displayA 没有“所有者”。当函数没有所有者时，`this`会自动假定为全局对象（`window`在浏览器中）。

在第二个示例中，所有者`displayA`是`obj`。在这种情况下，`this`将引用`obj`并因此`obj.a`（即值 1）将显示。

解决此问题的常用方法包括：

```
// storing `this` in a variable, when a callback function needs a reference to this
var self = this;
window.onload = function() { 
    // I can use self instead of this!
    self.doStuff();
}

// using Function#call or Function#apply
// let's say I want to use the "obj" variable as the "this" reference in a function:
function myFunction(a, b) { this.doStuff(a, b); }
myFunction.call(obj, a, b); // after obj, pass normal function arguments
myFunction.apply(obj, [a, b]); // after obj, pass function arguments in an array 
```

# database - postgresql：md5 消息摘要的数据类型？

> ID：15982737
> 
> 赞同：11
> 
> 时间：2013-04-13T00:12:44.577
> 
> 标签：database, postgresql, database-design

我想使用某个字符串的 MD5 消息摘要作为表的主键。我应该为这样的字段使用什么*数据类型？*我应该为该领域写什么`select`和陈述？`insert`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-13T00:33:58.400

md5 散列`bytea`将仅使用 16 个字节而不是 32 个字节用于六进制表示：

```
create table t (d bytea);
insert into t (d) values
    (digest('my_string', 'md5')),
    (decode(md5('my_string'), 'hex')); 
```

上述两种形式都可以使用，但要使用更简单的`digest`功能，必须以`pgcrypto`超级用户身份安装扩展：

```
create extension pgcrypto; 
```

使用上述`digest`函数或和的组合`decode`来`md5`搜索某个字符串：

```
select
    octet_length(d) ba_length,
    pg_column_size(d) ba_column,
    encode(d, 'hex') hex_representation,
    octet_length(encode(d, 'hex')) h_length,
    pg_column_size(encode(d, 'hex')) h_column
from t
where d = digest('my_string', 'md5')
;
 ba_length | ba_column |        hex_representation        | h_length | h_column 
-----------+-----------+----------------------------------+----------+----------
        16 |        17 | 3d212b21fad7bed63c1fb560c6a5c5d0 |       32 |       36
        16 |        17 | 3d212b21fad7bed63c1fb560c6a5c5d0 |       32 |       36 
```

该`pg_column_size`值是存储大小。`bytea`与六进制表示相比，它不到一半。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-02T21:37:23.807

`bytea`有一个字节的开销，但是填充到八个字节这将导致大量浪费。

相反，请考虑使用`uuid`仅使用 16 个字节的类型。您必须`REPLACE(md5::text, '-', '') as md5`在选择它时使用类似的东西，但这应该是一个快速操作。

# python - Capistrano“do nohup python”有效，“do nohup ruby ”无效

> ID：15982738
> 
> 赞同：1
> 
> 时间：2013-04-13T00:12:51.090
> 
> 标签：python, ruby, capistrano, background-process

尝试编写一个相当简单的 Cap 脚本来停止和启动我在远程机器上运行的一些守护进程时，我感到非常沮丧。

本质上，

```
run "for I in {1..40}; do nohup python ~/pydaemon.py >/dev/null 2>/dev/null & done" 
```

完美运行。我输入我的密码并执行，然后我选中该框，我有 40 个守护程序正在运行。

```
run "for I in {1..40}; do nohup ruby ~/rbdaemon.rb >/dev/null 2>/dev/null & done" 
```

从不创建 ruby​​ 脚本的守护进程实例。在帽子方面，它告诉我

```
"executing "for I in {1..40}; do nohup ruby ~/rbdaemon.rb >/dev/null 2>/dev/null & done"" 
```

，没有错误，但是当我选中该框时，没有任何运行。

我已经从 SSH 登录运行了 ruby​​ 命令，它工作正常。我错过了什么，我应该尝试什么，等等？多谢你们。真的撞到我的头了-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:51:41.173

尝试将 ruby​​ 守护程序的 stdout 和 stderr 重定向到文件，而不是 /dev/null。它可能会告诉你什么是错的！

# spring - Quartz 长时间运行的作业完成一次，状态返回等待但无法重新安排

> ID：15982739
> 
> 赞同：0
> 
> 时间：2013-04-13T00:12:54.457
> 
> 标签：spring, quartz-scheduler

我一直遇到 Quartz（1.6 版）在第一次完成后无法重新安排长时间运行的作业的问题。还有其他作业可以很好地重新安排，但它们的运行时间通常不会超过重复时间。（我一直在参考数据库的作业状态）当作业开始时，它会移动到 BLOCKED 状态，设置 prev_fire_time 并且设置 next_fire_time 未来 1 分钟。

例如 next_fire_time = 9.50, prev_fire_time = 9.49

然后工作直到 9.55 才完成。（注意：该作业负责对积压的事务进行批量更新。有时需要 10 秒，有时需要 10 分钟，但积压可能会变大，因此我们希望避免将间隔设置为 10 分钟。

当作业完成时，状态会重新设置为 WAITING，但 next_fire_time 仍然是过去。奇怪的是，我试图在我的本地环境中设置一个测试，该作业每 10 秒迭代一次并休眠 1 分钟，调度程序似乎可以处理它。

我们使用自定义的 Job Details Factory，所以我不知道这是否会影响它。

我希望就如何解决这个问题提出一些建议。这是该产品的旧版本，因此如果需要进行大量更改，升级库可能会很困难。

详情如下：

```
<bean id="baseSchedulerFactory" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="autoStartup" value="true"/>
    <property name="dataSource" ref="baseDataSource"/>
    <property name="waitForJobsToCompleteOnShutdown" value="true"/>
    <property name="overwriteExistingJobs" value="true"/>
    <property name="applicationContextSchedulerContextKey" value="applicationContext"/>
    <property name="triggers">
       <list>
            <ref bean="updateRecentlyModifedchedules" />
       </list>
   </property>
   <property name="quartzProperties">
        <props>
            <prop key="org.quartz.threadPool.threadCount">${org.quartz.threadPool.threadCount}</prop>
        </props>
   </property>
</bean>

<bean id="updateRecentlyModifedchedules" 
      class="org.springframework.scheduling.quartz.SimpleTriggerBean" 
      depends-on="springApplicationContext">
   <property name="jobDetail" ref="updateRecentlyModifedchedulesJob" />
   <!-- delay for 280 seconds -->
   <property name="startDelay" value="280000" />
   <!-- repeat every 70 seconds -->
   <property name="repeatInterval" value="70000" />
</bean>

<bean id="updateRecentlyModifedchedulesJob" class="com.app.application.backoffice.quartz.MethodInvokingJobDetal">
   <property name="targetBeanName" value="scheduleChangeManager" />
   <property name="targetMethod" value="assetSchedules" />
   <property name="concurrent" value="false" />
</bean> 
```

和自定义工作工厂：

```
public class MethodInvokingJobDetal implements FactoryBean, BeanNameAware, BeanClassLoaderAware, 
BeanFactoryAware, InitializingBean 
{
private String name;
private String group = Scheduler.DEFAULT_GROUP;
private boolean concurrent = true;
private String targetBeanName;
private String[] jobListenerNames;
private String beanName;
private ClassLoader beanClassLoader = ClassUtils.getDefaultClassLoader();
private BeanFactory beanFactory;
private JobDetail jobDetail;
private String targetMethod;

public void setTargetMethod(String targetMethod)
{
    this.targetMethod = targetMethod;
}

public void setName(String name) 
{
    this.name = name;
}

public void setGroup(String group)
{
    this.group = group;
}

public void setConcurrent(boolean concurrent) 
{
    this.concurrent = concurrent;
}

public void setTargetBeanName(String targetBeanName) 
{
    this.targetBeanName = targetBeanName;
}

public void setJobListenerNames(String[] names) 
{
    this.jobListenerNames = names;
}

public void setBeanName(String beanName) 
{
    this.beanName = beanName;
}

public void setBeanClassLoader(ClassLoader classLoader) 
{
    this.beanClassLoader = classLoader;
}

public void setBeanFactory(BeanFactory beanFactory) 
{
    this.beanFactory = beanFactory;
}

protected Class<?> resolveClassName(String className) throws ClassNotFoundException 
{
    return ClassUtils.forName(className, this.beanClassLoader);
}

protected void prepare() 
{
}

public void afterPropertiesSet() throws ClassNotFoundException, NoSuchMethodException 
{
    prepare();

    // Use specific name if given, else fall back to bean name.
    String name = (this.name != null ? this.name : this.beanName);

    // Consider the concurrent flag to choose between stateful and stateless job.
    Class<?> jobClass = (this.concurrent ? (Class<?>) MyMethodInvokingJob.class 
            : StatefulMyMethodInvokingJob.class);

    // Build JobDetail instance.
    this.jobDetail = new JobDetail(name, this.group, jobClass);
    this.jobDetail.getJobDataMap().put("targetBeanName", targetBeanName);
    this.jobDetail.getJobDataMap().put("targetMethod", targetMethod);
    this.jobDetail.setVolatility(false);
    this.jobDetail.setDurability(true);

    // Register job listener names.
    if (this.jobListenerNames != null) 
    {
        for (int i = 0; i < this.jobListenerNames.length; i++) 
        {
            this.jobDetail.addJobListener(this.jobListenerNames[i]);
        }
    }

    postProcessJobDetail(this.jobDetail);
}

/**
 * Callback for post-processing the JobDetail to be exposed by this FactoryBean.
 * <p>The default implementation is empty. Can be overridden in subclasses.
 * @param jobDetail the JobDetail prepared by this FactoryBean
 */
protected void postProcessJobDetail(JobDetail jobDetail) 
{
}

/**
 * Overridden to support the {@link #setTargetBeanName "targetBeanName"} feature.
 */
public Class<?> getTargetClass() 
{
    Class<?> targetClass = null; //super.getTargetClass();

    if (targetClass == null && this.targetBeanName != null) 
    {
        Assert.state(this.beanFactory != null, "BeanFactory must be set when using 'targetBeanName'");
        targetClass = this.beanFactory.getType(this.targetBeanName);
    }

    return targetClass;
}

/**
 * Overridden to support the {@link #setTargetBeanName "targetBeanName"} feature.
 */
public Object getTargetObject() 
{
    Object targetObject = null; // super.getTargetObject();

    if (targetObject == null && this.targetBeanName != null) 
    {
        Assert.state(this.beanFactory != null, "BeanFactory must be set when using 'targetBeanName'");
        targetObject = this.beanFactory.getBean(this.targetBeanName);
    }

    return targetObject;
}

public Object getObject() 
{
    return this.jobDetail;
}

public Class<?> getObjectType() 
{
    return JobDetail.class;
}

public boolean isSingleton() 
{
    return true;
}

public static class StatefulMyMethodInvokingJob extends MyMethodInvokingJob 
implements StatefulJob 
{

    // No implementation, just an addition of the tag interface StatefulJob
    // in order to allow stateful method invoking jobs.
}

private static class MyMethodInvokingJob extends QuartzJobBean
{
    private String targetBeanName;
    private String targetMethod;

    public void setTargetBeanName(String targetBeanName)
    {
        this.targetBeanName = targetBeanName;
    }

    public void setTargetMethod(String targetMethod)
    {
        this.targetMethod = targetMethod;
    }

    @Override
    protected void executeInternal(JobExecutionContext context)
            throws JobExecutionException
    {
        Object targetObject = SpringApplicationContext.getBean(targetBeanName);

        try
        {
            Method method = targetObject.getClass().getMethod(targetMethod);
            method.invoke(targetObject);
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T01:57:17.893

Ok, issue solved. Time on the DB Server and time on the App server were out.

# android - 我想在android中使用一个自制的类

> ID：15982740
> 
> 赞同：0
> 
> 时间：2013-04-13T00:13:03.157
> 
> 标签：android

我目前是 Android 开发的新手，我很难在我的 MainActivity Android 类中使用自制类。让我给你举个例子; 我创建了一个 SquareArea 类并想在 MainActivity 类中使​​用它

```
public class SquareArea{

  private double _length;
  private double _width;

  public SquareArea(double length , double width){
    _length = length;
    _width = width;
      area();   
  }

  private double area(){
    return _length
  }
} 
```

当我在 MainActivity 类中实例化 SquareClass 时，我希望能够使用 area() 方法并在从 (EditText) 提取的值时返回
我想使用该值以便将其放置在文本视图中；但是这样做似乎没有发生。

我可以用方法来做到这一点，但我想用我自己的类来代替。

请帮忙，我对此感到沮丧。

```
///Below is my MainActivity Class///
public class MainActivity extends Activity {

    EditText mEditText1;
    EditText mEditText2;
    EditText mEditText3;
    TextView mTextView;
    Button mButton;
    Double value1, value2;
    SquareArea sq1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mEditText1 = (EditText) findViewById(R.id.editText1);
        mEditText2 = (EditText) findViewById(R.id.editText2);
        mEditText3 = (EditText) findViewById(R.id.editText3);
        mTextView = (TextView) findViewById(R.id.textView1);

        mEditText1.setBackgroundColor(Color.GREEN);
        mEditText2.setBackgroundColor(Color.GREEN);
        mEditText3.setBackgroundColor(Color.RED);

        mButton = (Button) findViewById(R.id.button1);

        mButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //When the button is clicked, call the calucate method.
                //  calculate();
                try {
                    value1 = Double.parseDouble(mEditText1.getText().toString());
                    value2 = Double.parseDouble(mEditText2.getText().toString());
                    sq1 = new SquareArea(value1, value2);

                    mTextView.setText(sq1.toString());
                } catch (NumberFormatException e) {
                    mTextView.setText("Please use numbers");
                }
            });
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T19:13:36.943

我看到几个问题

```
mTextView.setText(sq1.toString()); 
```

SquareArea 中的 toString 方法未被覆盖。所以 toString 将返回关于对象的默认信息（在内存中的位置、名称等）

```
public SquareArea(double length , double width){
    _length = length;
    _width = width;
      area();   
} 
```

在上面的代码中，您在构造函数中。你为什么从这里调用 area() ？构造函数不能返回任何东西，并且 area() 的结果会丢失，因为 area() 返回一个 double。

最后：

```
private double area(){
  return _length
} 
```

此方法是私有的。不能从类/对象外部调用它。

为了让你的代码工作，这就是我要改变的。

```
public class SquareArea{

  private double _length;
  private double _width;

  public SquareArea(double length , double width){
    _length = length;
    _width = width;
  }

  public double area(){
    return _length * _width;
  }
}

///Below is my MainActivity Class///
public class MainActivity extends Activity {

    EditText mEditText1;
    EditText mEditText2;
    EditText mEditText3;
    TextView mTextView;
    Button mButton;
    Double value1, value2;
    SquareArea sq1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mEditText1 = (EditText) findViewById(R.id.editText1);
        mEditText2 = (EditText) findViewById(R.id.editText2);
        mEditText3 = (EditText) findViewById(R.id.editText3);
        mTextView = (TextView) findViewById(R.id.textView1);

        mEditText1.setBackgroundColor(Color.GREEN);
        mEditText2.setBackgroundColor(Color.GREEN);
        mEditText3.setBackgroundColor(Color.RED);

        mButton = (Button) findViewById(R.id.button1);

        mButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //When the button is clicked, call the calucate method.
                //  calculate();
                try {
                    value1 = Double.parseDouble(mEditText1.getText().toString());
                    value2 = Double.parseDouble(mEditText2.getText().toString());
                    sq1 = new SquareArea(value1, value2);

                    mTextView.setText(String.ValueOf(sq1.area()));
                } catch (NumberFormatException e) {
                    mTextView.setText("Please use numbers");
                }
            });
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:25:44.947

你声明`area() private`，所以你不能称之为

```
public double area(){
     return _length
     } 
```

你只需要打电话给你的 area()

```
mTextView.setText(String.ValueOf(sq1.area())); 
```

# python - 寻找短语共现矩阵的有效算法

> ID：15982746
> 
> 赞同：3
> 
> 时间：2013-04-13T00:14:05.340
> 
> 标签：python, regex, algorithm

我有一个大约 40,000 个短语的列表 L 和一个大约 1000 万字的文档。我要检查的是哪对这些短语共同出现在 4 个单词的窗口内。例如，考虑 L=["brown fox","lazy dog"]。该文件包含“一只敏捷的棕色狐狸跳过懒狗”的字样。我想看看，棕色狐狸和懒狗在四个单词的窗口中出现了多少次，并将其存储在一个文件中。我有以下代码：

```
content=open("d.txt","r").read().replace("\n"," ");
for i in range(len(L)):
 for j in range(i+1,len(L)):
  wr=L[i]+"\W+(?:\w+\W+){1,4}"+L[j]
  wrev=L[j]+"\W+(?:\w+\W+){1,4}"+L[i]
  phrasecoccur=len(re.findall(wr, content))+len(re.findall(wrev,content))
  if (phrasecoccur>0):
    f.write(L[i]+", "+L[j]+", "+str(phrasecoccur)+"\n") 
```

本质上，对于列表 L 中的每一对短语，我在文档内容中检查这些短语在 4 个单词的窗口内出现了多少次。但是，当列表 L 非常大（例如 40K 个元素）时，这种方法的计算效率很低。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T04:28:32.637

您可以使用类似于[Aho-Corasick 字符串匹配算法](https://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)的东西。从您的短语列表中构建状态机。然后开始将单词输入状态机。每当发生匹配时，状态机都会告诉您匹配的短语和单词编号。所以你的输出会是这样的：

```
"brown fox", 3
"lazy dog", 8
etc. 
```

您可以捕获所有输出并对其进行后处理，也可以在找到匹配项时对其进行处理。

构建状态机需要一点时间（40,000 个短语需要几秒钟），但在那之后，输入标记的数量、短语的数量和匹配的数量是线性的。

我使用类似的方法将 5000 万个 YouTube 视频标题与 MusicBrainz 数据库中的数百万个歌曲标题和艺术家姓名进行匹配。工作得很好。而且非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T08:24:35.633

应该可以将您的 40000 个短语组合成一个大的正则表达式模式，并使用它来匹配您的文档。它可能没有更具体的工作那么快，但它确实有效。这是我的做法：

```
import re

class Matcher(object):
    def __init__(self, phrases):
        phrase_pattern = "|".join("(?:{})".format(phrase) for phrase in phrases)
        gap_pattern = r"\W+(?:\w+\W+){0,4}?"
        full_pattern = "({0}){1}({0})".format(phrase_pattern, gap_pattern)

        self.regex = re.compile(full_pattern)

    def match(self, doc):
        return self.regex.findall(doc) # or use finditer to generate match objs 
```

以下是您可以使用它的方法：

```
>>> L = ["brown fox", "lazy dog"]
>>> matcher = Matcher(L)
>>> doc = "The quick brown fox jumps over the lazy dog."
>>> matcher.match(doc)
[('brown fox', 'lazy dog')] 
```

此解决方案确实有一些限制。一是它不会检测重叠的短语对。因此，在示例中，如果您将短语添加`"jumps over"`到短语列表中，您仍然只会得到一对匹配的`("brown fox", "jumps over")`. 它会忽略`("brown fox", "lazy dog")`and `("jumps over", "lazy dog")`，因为它们包含一些相同的词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:55:57.010

扩展 Joel 的答案，您的迭代器可能是这样的：

```
def doc_iter(doc):
  words=doc[0:4]
  yield words
  for i in range(3,len(doc)):
    words=words[1:]
    words.append(doc[i])
    yield words 
```

将您的短语放在字典中并在文档上使用迭代器，在每次迭代时检查短语。这应该会给你 O(n) 和 O(n*log(n)) 之间的性能。

# .net - Char 返回 29 个 unicode 字符的错误值 - 需要 .NET 强制转换/将 nchar 转换为 char

> ID：15982747
> 
> 赞同：1
> 
> 时间：2013-04-13T00:14:07.630
> 
> 标签：.net, sql-server, tsql, unicode

需要将 SQL nchar 转换为 .NET 转换为 char。
更具体地说，将 nchar UNICODE 转换为 char ASCII。

复杂之处在于 SQL char 使用完整字节。
不是 128 的纯
ASCII。TSQL 函数 ASCII 返回 0-255。

理想情况下，会有一个 FormByte 的 NormalizationForm。
它不会是一个精确的文本值 - 而是一个接近的逻辑值或？。
SQL 将使用 FormByte 从 nchar 转换为 char。
[规范化表格](http://msdn.microsoft.com/en-us/library/system.text.normalizationform.aspx)

编码解码对我不起作用，我尝试了所有口味。

在 SQL 中，许多 char（字节）映射到 63。63 是 ?。
不仅仅是超过 255 的字符映射到 63。130
到 140 都映射到 63。

字符 160-255 全部返回 160-255

并非所有超过 255 都映射到 63。
例如，许多变音符号映射到 ASCII。

TSQL 具有 UNICODE 和 ACSII 函数。
所以我只是将所有 Unicode 字符加载到 char 和 nchar 列中。

SQL 返回的 char 对于 29 个字符是错误的。
并且为坏字符返回的 ASCII() 没有意义 - 所有控制字符都在 130 - 160 范围内。
检查了不正确的 29 二进制文件，存储的是 ASCII() 返回的内容。
对于 27，从 char 返回的内容是 nchar，对于 2，它甚至不是正确的 nchar。它们都应该映射到 ? 或 ACSII 等价物。
“和”映射到“（但会采用？）'和'映射到'
-（短划线）和-（短划线）映射到
-...

我知道你不相信我。
将 'Œ' 插入 char 列并选择它 - 它将返回 'Œ'。
你甚至可以搜索它 - char = 'Œ' 返回 true。
选择 ASCII('Œ') 返回 140，这就是实际存储的内容（检查二进制文件）。
140 / 8C 的 UNICODE 定义是部分行向后。
我检查了该字符的二进制值，它是 8C (140)。
返回的是 unicode 'Œ' Int16 338。
似乎 SQL 正在执行一些输入输出映射并弄错了。

ASCII 函数对于未映射到 ? 的 575 个 unicode 字符是正确的。
char 值与 ACSII 匹配，它们都有意义。
EG 12 个不同形式的 u 都映射到 u。
32163 个字符不是 ? 映射到 ? (63)。

下面是返回错误值的 29 个字符。
列顺序：
char
nchar
ASCII(char)
UNICODE(nchar)

```
 sqlCharASCIIbackToString did not match  Œ Œ 140 338
     sqlCharASCIIbackToString did not match  œ œ 156 339
     sqlCharASCIIbackToString did not match  Š Š 138 352
     sqlCharASCIIbackToString did not match  š š 154 353
     sqlCharASCIIbackToString did not match  Ÿ Ÿ 159 376
     sqlCharASCIIbackToString did not match  Ž Ž 142 381
     sqlCharASCIIbackToString did not match  ž ž 158 382
     sqlCharASCIIbackToString did not match  ƒ Ƒ 131 401
     sqlCharASCIIbackToString did not match  ƒ ƒ 131 402
     sqlCharASCIIbackToString did not match  ˆ ˆ 136 710
     sqlCharASCIIbackToString did not match  ˜ ˜ 152 732
     sqlCharASCIIbackToString did not match  – – 150 8211
     sqlCharASCIIbackToString did not match  — — 151 8212
     sqlCharASCIIbackToString did not match  ‘ ‘ 145 8216
     sqlCharASCIIbackToString did not match  ’ ’ 146 8217
     sqlCharASCIIbackToString did not match  ‚ ‚ 130 8218
     sqlCharASCIIbackToString did not match  “ “ 147 8220
     sqlCharASCIIbackToString did not match  ” ” 148 8221
     sqlCharASCIIbackToString did not match  „ „ 132 8222
     sqlCharASCIIbackToString did not match  † † 134 8224
     sqlCharASCIIbackToString did not match  ‡ ‡ 135 8225
     sqlCharASCIIbackToString did not match  • • 149 8226
     sqlCharASCIIbackToString did not match 
     … … 133 8230
     sqlCharASCIIbackToString did not match  ‰ ‰ 137 8240
     sqlCharASCIIbackToString did not match  ‹ ‹ 139 8249
     sqlCharASCIIbackToString did not match  › › 155 8250
     sqlCharASCIIbackToString did not match  € € 128 8364
     sqlCharASCIIbackToString did not match  ™ ™ 153 8482
     sqlCharASCIIbackToString did not match  ˜ ≈ 152 8776
     count63 =  32163 countMis =  29 countCorrect =  575 
```

运行以下 .NET 以查看 SQL 返回的“Œ”

```
char char338 = (char)338;
System.Diagnostics.Debug.WriteLine(char338);
sqlCmd.CommandText = "select [char] from [charNchar] where [char] = @char;";
sqlCmd.Parameters.Add("@char", SqlDbType.Char).Value = char338;
string string338= sqlCmd.ExecuteScalar().ToString();
char338 = string338.ToCharArray()[0];
System.Diagnostics.Debug.WriteLine(char338 + " " + ((Int16)char338).ToString()); 
```

上面的代码返回 338。SQL
正在返回一个大于 byte 的值，数据类型应该存储为 byte。
如果我搜索 (char)140 那么？63 被退回。

有趣的是在 char 上搜索 'Œ' 与 N'Œ' 会产生不同的结果。
即在左侧搜索 (140) Œ。
在右边搜索 (338) Œ char 搜索什么也没找到。
Nchar 使用任一输入查找两个结果。

```
 SELECT [int16],RTRIM([char]) as [char], ASCII([char]) as 'ASCII'
                ,RTRIM([nchar]) as [nchar], UNICODE([nchar]) as 'UNICODE'
  FROM [test].[dbo].[charNchar]
  where [char] = 'Œ'
  SELECT [int16],RTRIM([char]) as [char], ASCII([char]) as 'ASCII'
                ,RTRIM([nchar]) as [nchar], UNICODE([nchar]) as 'UNICODE'
  FROM [test].[dbo].[charNchar]
  where [char] = N'Œ'
  SELECT [int16],RTRIM([char]) as [char], ASCII([char]) as 'ASCII'
                ,RTRIM([nchar]) as [nchar], UNICODE([nchar]) as 'UNICODE'
  FROM [test].[dbo].[charNchar]
  where [nchar] = 'Œ'
  SELECT [int16],RTRIM([char]) as [char], ASCII([char]) as 'ASCII'
                ,RTRIM([nchar]) as [nchar], UNICODE([nchar]) as 'UNICODE'
  FROM [test].[dbo].[charNchar]
  where [nchar] = N'Œ'

int16  char                                               ASCII       nchar                                              UNICODE
------ -------------------------------------------------- ----------- -------------------------------------------------- -----------
338    Œ                                                  140         Œ                                                  338

int16  char                                               ASCII       nchar                                              UNICODE
------ -------------------------------------------------- ----------- -------------------------------------------------- -----------
338    Œ                                                  140         Œ                                                  338
339    œ                                                  156         œ                                                  339

int16  char                                               ASCII       nchar                                              UNICODE
------ -------------------------------------------------- ----------- -------------------------------------------------- -----------
338    Œ                                                  140         Œ                                                  338
339    œ                                                  156         œ                                                  339

int16  char                                               ASCII       nchar                                              UNICODE
------ -------------------------------------------------- ----------- -------------------------------------------------- -----------
338    Œ                                                  140         Œ                                                  338
339    œ                                                  156         œ                                                  339 
```

≈ search 找不到任何四个查询。检查图表，这是 8776 的正确字符，数学几乎等于。 

〜是粘贴到SSMS中的零宽度，但它好像粘贴到从蓝色变为黑色的FROM中。 

我错过了什么吗 - 这对我来说似乎是一个错误。
这不仅仅是他错误的价值，而是一个无效的价值。
返回一个 Int16。
假设我想使用字节来存储字符以节省空间 - 它会在 SQL char 上中断，因为 29 个字符不会作为字节返回。

这是我使用的代码：

```
public void SQLchar()
{

    SqlConnection sqlCon = new SqlConnection(connString);  
    try
    {         
        sqlCon.Open();
        SqlCommand sqlCmd = sqlCon.CreateCommand();
        SqlDataReader rdr;
        sqlCmd.CommandText = "delete charNchar";
        sqlCmd.ExecuteNonQuery();
        for(Int16 i = 0; i < Int16.MaxValue; i ++)
        {
            sqlCmd.CommandText = "insert into charNchar (int16,char,nchar) values (@int16, @char, @nchar);";
            sqlCmd.CommandType = System.Data.CommandType.Text;
            sqlCmd.Parameters.Clear();
            sqlCmd.Parameters.Add("@int16", SqlDbType.Int).Value = i;
            sqlCmd.Parameters.Add("@char", SqlDbType.Char).Value = (char)i;
            sqlCmd.Parameters.Add("@nchar", SqlDbType.NChar).Value = (char)i;
            sqlCmd.ExecuteNonQuery();
        }
        string sqlChar;
        string sqlNChar;
        Int16 sqlCharASCII;
        Int16 sqlNCharUnicode;
        string sqlCharASCIIbackToString;
        sqlCmd.CommandText = "select char,nchar,ASCII(char),UNICODE(nchar) from charNchar order by int16;";
        rdr = sqlCmd.ExecuteReader();
        Int16 count63 = 0;
        Int16 countMis = 0;
        Int16 countCorrect = 0;
        while (rdr.Read())
        {
            sqlChar = rdr.IsDBNull(0) ? "dbNull" : rdr.GetString(0);
            sqlNChar = rdr.IsDBNull(1) ? "dbNull" : rdr.GetString(1);
            sqlCharASCII = rdr.IsDBNull(2) ? Int16.Parse("-1") : (Int16)rdr.GetInt32(2);
            sqlNCharUnicode = rdr.IsDBNull(3) ? Int16.Parse("-1") : (Int16)rdr.GetInt32(3);
            if(sqlCharASCII == 63 && sqlNCharUnicode != 63)
            {
                count63 ++;
                continue;  // ?
            }
            if (sqlCharASCII < 0)
            {
                System.Diagnostics.Debug.WriteLine("ASCII(char) null for " + sqlChar + " " + sqlNChar);
            }
            else
            {
                sqlCharASCIIbackToString = ((char)sqlCharASCII).ToString();
                if (string.CompareOrdinal(sqlChar, sqlCharASCIIbackToString) != 0)
                {
                    countMis++;
                    System.Diagnostics.Debug.WriteLine(" sqlCharASCIIbackToString did not match " + sqlCharASCIIbackToString + " " + sqlChar + " " + sqlNChar + " " + sqlCharASCII + " " + sqlNCharUnicode);
                }
                else
                {
                    countCorrect++;
                }
            }
        }
        rdr.Close();
        System.Diagnostics.Debug.WriteLine("count63 =  " + count63.ToString() + " countMis =  " + countMis.ToString() + " countCorrect =  " + countCorrect.ToString());
    }
    catch (Exception Ex)
    {
        System.Diagnostics.Debug.WriteLine(Ex.Message);
    }
    finally 
    {
        sqlCon.Close();
    }
} 
```

至于为什么。
在 .NET 中解析字符串数据，该数据是 FK。
与其往返 SQL 来获取 FK 的 ID，不如使用 .NET 字典来提高速度。
Dictionary 是从值中获取键的反向查找。
解析器具有 char 的 Int16，因为它已被解析器使用。
因此，如果 char 的 ASCII 错误，则反向查找将失败。
我想我可以对不正确的 ASCII 结果进行硬编码修复。
但我想了解这里发生了什么，然后再走一条以补丁开始的道路。
char 有一些基本缺陷吗？
可以只使用 nchar，但我们更喜欢 char。
应用程序的性质是我们想要匹配。
u 的 6 个变音符号都匹配 ascii u 是一件好事。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T11:01:43.227

您严重混淆了代码点值和编码字节值。

代码点 U+0152（338 或 Œ）在 Windows-1252 中编码为字节 0x8C 或十进制的 140，这就是命名错误的`ASCII()`函数返回给您的内容。巧合的是，Windows-1252 中的许多代码点的编码方式使得被编码的代码点具有与该代码点的编码字节值相同的值。

Windows-1252 只能编码：

```
0-127
160-255 
```

而这些不整齐地在一个范围内：

```
338,339,352,353,376,381,382,402,
710,732,8211,8212,8216,8217,8218,
8220,8221,8222,8224,8225,8226,
8230,8240,8249,8250,8364,8482 
```

第二批中的所有代码点都不会以字节值<->代码点值编码，这正是您所期望的。

Windows-1252 无法对范围 128-159 进行编码，因此尝试转换该范围内的任何内容（例如 130 或 140）只会被编码为`?`0x3F。无论如何，该范围几乎是无用的 C1 控制字符。

它也没有利用它拥有的全部 256 个字符空间，它只编码 251 个不同的字符。因此，您不能将其用作伪字节，因为 5 个字节是无效的 Windows-1252。如果这就是你试图做的，它不会工作。

* * *

实际上尚不清楚您甚至要尝试做什么高级别的事情，所以我会猜测一下。

如果您想不区分重音匹配，那么只需使用不区分重音的排序规则。然后`ü`, `ú`, `ù`etc 将全部匹配`u`。与编码无关。

```
CREATE TABLE Mytable (
    Mycolumn NVARCHAR(10) COLLATE Latin1_General_CI_AI
)

INSERT INTO Mytable (myColumn) VALUES( 'ü' ), ('ú'), ( 'ù' )

SELECT Mycolumn
FROM Mytable
WHERE Mycolumn = 'u'

--Results

MYCOLUMN
ü
ú
ù 
```

这是一个演示[http://sqlfiddle.com/#!3/67752/2](http://sqlfiddle.com/#!3/67752/2)。

* * *

要将 SQLAscii 转换为`'Œ'`，请尝试以下操作：

```
public static char Windows1252CPtoChar(int cp)
{
    Encoding win1252 = Encoding.GetEncoding("Windows-1252"); //this could be made static
    return win1252.GetString(new byte[] { (byte)cp })[0];
}

public static void Main(string[] args) {
    Console.WriteLine(Windows1252CPtoChar(140) == 'Œ');
} 
```

所以而不是：

```
sqlCharASCIIbackToString = ((char)sqlCharASCII).ToString(); 
```

做

```
sqlCharASCIIbackToString = (Windows1252CPtoChar(sqlCharASCII)).ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T01:37:51.157

因此，我将在这里假设您尝试做的是利用您正在获取 unicode 数据并将其存储到数据库中的 varchar 字段中的事实......您需要将输入编码作为ASCII字符串

```
string bad = Encoding.ASCII.GetString(Encoding.Unicode.GetBytes(input)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T19:50:47.217

我冒昧地猜测您遇到了涉及在本地系统或 SQL 服务器系统上使用的代码页的转换异常（这会影响所谓的“高 ASCII”十进制 128-255 字符的解释方式）以及列/表/数据库上使用的排序规则。SQL Server 将尝试根据使用的代码页和排序规则将“无效”字符转换为有效字符。

当欧洲客户尝试使用在欧洲代码页处于活动状态的系统上设置的文件加载带有“ü”的名称时，我们遇到了一个问题。我们的 SQL Server 设置与代码页 437 活动（OEM CP 设置，IIRC）存储并返回“÷”。（十进制 246）一旦 CHAR 数据的代码页问题得到解决，一切都变得很糟糕。我不记得输入和输出设置的细节，抱歉。

**编辑：**这篇[Stackoverflow 文章](https://stackoverflow.com/questions/1259084/what-encoding-code-page-is-cmd-exe-using)很好地讨论了一些问题，包括“？” 事物。

# jquery - 用 knockout.js 绑定表如何清除

> ID：15982749
> 
> 赞同：1
> 
> 时间：2013-04-13T00:14:30.177
> 
> 标签：jquery, ajax, knockout.js

我正在尝试使用从 Web 服务获得的数据使用 knockout.js 绑定下表。一般工作，但我想解决 3 件事：

1.  当我进行 AJAX 调用并且数据返回时，我需要先清除表`ko.applyBindings(msg);`。现在它只是不断地添加和添加。

2.  我有 100 个测试对象，添加 200/300 后它变得越来越慢。我希望表可能包含 300 条记录.. 编辑！实际上，它似乎为每行创建了另外 100 行。所以，第一次调用 100 行，第二次调用 10000 行..

3.  为了绑定，我必须指定第一行。它在页面加载时显示，我如何摆脱这一行？

HTML：

```
<table id="mainTable" class="paddedTable">
            <thead>
                <tr>
                    <th style="width: 70px;">Trip No</th>
                    <th style="width: 26px;"><img src="/images/attachment_header.png" alt="Attachments"/></th>
                    <th style="width: 70px;">PO No</th>
                    <th style="width: 70px;">BOL No</th>
                    <th style="width: 70px;">Shipper No</th>
                    <th style="width: 100px;">From</th>
                    <th style="width: 100px;">To</th>
                    <th style="width: 100px;">Scheduled Pickup</th>
                    <th style="width: 100px;">Scheduled Delivery</th>
                    <th style="width: 120px;">Status</th>
                    <th style="width: 40px;">&nbsp;</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: d">
                <tr class="dataRow">
                    <td data-bind="text: TripId"></td>
                    <td><img src="/images/pdf_icon24.png" alt="PDF Document"/></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td>tracking stuff</td>
                    <td><a href="#" class="infoLink"><strong>Info</strong></a></td>
                </tr>    
            </tbody> 
```

脚本：

```
function onRefreshButtonClick() {
        $.ajax({
            type: "POST",
            url: "/Customer/TrackShipment.aspx/GetShipments",
            data: "{ dateFrom: '" + $("#FromDateTextBox").val() + "', dateTo: '" +  $("#ToDateTextBox").val() + "' }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                var a = msg.d;

                ko.applyBindings(msg);

                // 
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:42:23.430

首先，在使用 Knockout 时，您的目标应该是跟注`ko.applyBindings()`一次。初始化视图模型后，您将执行操作它的操作，允许 Knockout 的双向绑定动态更改您的 UI。

这是一个示例小提琴，它模拟了我认为您正在尝试做的事情。它初始化视图模型，进行 AJAX 调用以加载前 100 行，然后允许用户单击刷新以重新加载。

[http://jsfiddle.net/jearles/aTuMv/](http://jsfiddle.net/jearles/aTuMv/)

1.  清表很简单`self.data([]);`

2.  您的行爆炸是因为`ko.applyBindings()`多次调用。

3.  `if`您可以使用绑定禁用表格呈现

例子：

```
<table id="mainTable" class="paddedTable" data-bind="if: data().length > 0"> 
```

仅当数据具有元素时才会呈现表格

# autocomplete - 谷歌自定义站点搜索自动填充

> ID：15982757
> 
> 赞同：1
> 
> 时间：2013-04-13T00:15:00.520
> 
> 标签：autocomplete, search-engine

要向我们的 Google 自定义站点搜索引擎添加额外的自动完成选项，Google 提供了一个链接，指向“以 XML 格式上传您的自动完成文件”

有没有关于这个 XML 文件格式的指导？我们要确保我们能够成功添加自动完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T19:44:27.460

它需要在 Google 文档丛林中进行一些搜索，但我认为这可能是您正在寻找的内容：

[https://developers.google.com/custom-search/docs/queries#auto](https://developers.google.com/custom-search/docs/queries#auto)

# iphone - UITableView 删除行而不滚动

> ID：15982762
> 
> 赞同：1
> 
> 时间：2013-04-13T00:15:34.747
> 
> 标签：iphone, ios, objective-c, uitableview, nsfetchedresultscontroller

我正在建立一个看不见的图像的提要`image.seen = 0`

我有一个`NSFetchedResultsController`捆绑了一个`UITableViewController`.

我在`image.seen = 1`标记`tableView:didEndDisplayingCell:forRowAtIndexPath`。

当我的用户滚动到包含 image2 的 row2 时，image1 将被更新，而 row1 将被删除。

```
case NSFetchedResultsChangeDelete:

    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
                         withRowAnimation:UITableViewRowAnimationFade];

    break; 
```

但是，当您删除 row1 时，`UITableView`将记住您当前位于顶部的滚动位置 1，并在删除发生时为您保持该滚动位置。

因此，您将滚动到第 3 行。row2 现在消失并被删除。删除完成后，表格会将您滚动到第 4 行....

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T04:43:32.373

如果我们想从外部删除行，我们可以删除 canEditRowAtIndexPath tableview 委托中的行，如果我们从数组加载，则根据 tableView 的行数从数组中的特定索引中删除记录并重新加载数据。

# timing - 如何使用 MT 模板语言对代码块进行时间处理？

> ID：15982765
> 
> 赞同：1
> 
> 时间：2013-04-13T00:15:42.497
> 
> 标签：timing, performance, movabletype, benchmarking

通常在开发 Movable Type 模板时，我会想出多种方法来生成相同的结果，并且很好奇哪种方法更有效。或者，我只是想知道某件事花了多长时间，例如生成搜索结果。

有没有一种无需外部工具即可使用模板标签记录处理时间或其他计时策略的简单方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:24:43.623

或者您可以使用调试模式 8，如下所述：[http ://www.movabletype.org/documentation/developer/plugins/debug-mode.html](http://www.movabletype.org/documentation/developer/plugins/debug-mode.html)

还有一个选项（在与调试模式相同的常规设置面板中）激活具有阈值的性能日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:15:42.497

这是我提出并使用了一段时间的方法。它使用标准的 Movable Type 模板语言将时间报告到最接近的秒数。

要为大量模板代码计时，请创建一个名为“计时”的系统或博客级别的模板模块：

```
<mt:If name="part" eq="start">
  <$mt:Date format="%H" setvar="hours"$>
  <$mt:Date format="%M" setvar="minutes"$>
  <$mt:Date format="%S" setvar="seconds"$>
  <$mt:Var name="hours" op="*" value="3600" setvar="hourseconds"$>
  <$mt:Var name="minutes" op="*" value="60" setvar="minuteseconds"$>
  <$mt:Var name="totalseconds" value="$hourseconds"$>
  <$mt:Var name="totalseconds" op="+" value="$minuteseconds" setvar="totalseconds"$>
  <$mt:Var name="totalseconds" op="+" value="$seconds" setvar="totalseconds"$>
  <$mt:Var name="totalseconds" setvar="startseconds"$>
<mt:Else name="part" eq="stop">
  <$mt:Date format="%H" setvar="hours"$>
  <$mt:Date format="%M" setvar="minutes"$>
  <$mt:Date format="%S" setvar="seconds"$>
  <$mt:Var name="hours" op="*" value="3600" setvar="hourseconds"$>
  <$mt:Var name="minutes" op="*" value="60" setvar="minuteseconds"$>
  <$mt:Var name="totalseconds" value="$hourseconds"$>
  <$mt:Var name="totalseconds" op="+" value="$minuteseconds" setvar="totalseconds"$>
  <$mt:Var name="totalseconds" op="+" value="$seconds" setvar="totalseconds"$>
  <$mt:Var name="totalseconds" setvar="finishseconds"$>
  <$mt:Var name="finishseconds" op="-" value="$startseconds" setvar="elapsedseconds">
  <!-- This search completed in <mt:If name="elapsedseconds" eq="0">less than 1 second<mt:Else name="elapsedseconds" eq="1">1 second<mt:Else><$mt:Var name="elapsedseconds"$> seconds</mt:If>. -->
</mt:If> 
```

然后，在您想要计时的模板中，将这两行放在感兴趣的块的开头和结尾：

```
<$mt:Include module="timing" part="start"$>
  <mt:Ignore>Code I want to time</mt:Ignore>
<$mt:Include module="timing" part="stop"$> 
```

如果您想在输出中表示计时开始的位置，您当然可以在“开始”部分添加一行输出。

# bash - 似乎无法使用 bash 获得此功能

> ID：15982767
> 
> 赞同：1
> 
> 时间：2013-04-13T00:15:43.543
> 
> 标签：bash

```
# define some variables for later
date=`date`
usr=`whoami`

# define usage function to echo syntax if no args given
usage(){
    echo "error: filename not specified"
    echo "Usage: $0 filename directory/ directory/ directory/"
    exit 1
}

# define copyall function
copyall() {
    # local variable to take the first argument as file
    local file="$1" dir
    # shift to the next argument(s)
    shift

    # loop through the next argument(s) and copy $file to them
    for dir in "$@"; do
        cp -R "$file" "$dir"
    done
}

# function to check if filename exists
# $f -> store argument passed to the script
file_exists(){
    local f="$1"
    [[ -f "$f" ]] && return 0 || return 1
}
# call usage() function to print out syntax
[[ $# -eq 0 ]] && usage 
```

这是我无法弄清楚的

```
# call file_exists() and copyall() to do the dirty work
if ( file_exists "$1" ) then
    copyall 
```

我也很想弄清楚如何获取下一个回声部分并将其浓缩为一行。而不是 $1 然后转移然后继续前进。也许把它分成一个数组？

```
 echo "copyall: File $1 was copied to"
    shift 
    echo "$@ on $date by $usr"
else
    echo "Filename not found"
fi

exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T04:39:42.970

在我看来，`file_exists`宏是多余的：

```
if [ -f "$1" ]
then copy_all "$@"
else echo "$0: no such file as $1" >&2; exit 1
fi 
```

甚至只是：

```
[ -f "$1" ] && copy_all "$@" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:27:55.240

您可能只需要删除 周围的括号`file_exists "$1"`，并添加一个分号：

```
if file_exists "$1"; then
    copyall 
```

# perl - 如何获取子数组？

> ID：15982777
> 
> 赞同：4
> 
> 时间：2013-04-13T00:17:20.893
> 
> 标签：perl

我有以下代码：

```
@a = ((1,2,3),("test","hello"));
print @a[1] 
```

我期待它打印

```
testhello 
```

但它给了我`2`。

很抱歉这个新手问题（Perl 对我来说有点不自然），但为什么会发生，我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:32:45.113

Perl 的构造方式`@a`相当于你的写作，

```
@a = (1,2,3,"test","hello"); 
```

这就是为什么当你`1`通过写作`@a[1]`（真的应该是`$a[1]`）询问 index 处的值时，你会得到`2`. 为了证明这一点，如果您要执行以下操作，

```
use strict;
use warnings;
my @a = ((1,2,3), ("test","hello"));
my @b = (1,2,3,"test","hello");
print "@a\n";
print "@b\n"; 
```

两者都打印同一行，

```
1 2 3 test hello
1 2 3 test hello 
```

你想要的是在你的数组中创建匿名数组 - 像这样，

```
my @c = ([1,2,3], ["test","hello"]); 
```

那么，如果你写下以下内容，

```
use Data::Dumper;
print Dumper $c[1]; 
```

你会看到这个打印出来的，

```
$VAR1 = [
          'test',
          'hello'
        ]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T01:29:33.983

Perl 列表只是一维的，这意味着`(1,2,(3,4))`会自动展平为`(1,2,3,4)`. 如果您想要一个多维数组，则必须对第一个以外的任何维度使用引用（存储在标量中）。

您可以使用括号表示法获取任何匿名数组引用，也可以`[1,2,3,4]`使用反斜杠引用现有数组`my $ref = \@somearray`。

所以一个结构如是`my $aref = [1,2,[3,4]]`一个数组引用，其中引用数组的第一个元素是 1，第二个元素是 2，第三个元素是另一个数组引用。

（我发现在使用多维数组时，即使对第一个维度使用引用也不会那么混乱，但`my @array = (1,2,[3,4])`也很好。）

顺便说一句，当您对 perl 引用进行字符串化时，您会得到一些指示引用类型和内存位置的乱码，例如“ARRAY(0x7f977b02ac58)”。

使用 取消引用对数组的数组引用`@`，或使用 获取引用的特定元素`->`。

例子：

```
my $ref = ['A','B',['C','D']];
print $ref;                   # prints ARRAY(0x001)
print join ',', @{$ref};      # prints A,B,ARRAY(0x002)
print join ',', @$ref;        # prints A,B,ARRAY(0x002) (shortcut for above)
print $ref->[0];              # prints A
print $ref->[1];              # prints B
print $ref->[2];              # prints ARRAY(0x002)
print $ref->[2]->[0];         # prints C
print $ref->[2][0];           # prints C (shortcut for above)
print $ref->[2][1]            # prints D
print join ',', @{$ref->[2]}; # prints C,D 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-13T00:37:58.540

我认为您正在寻找一系列数组。因此，您需要使用方括号创建一个数组引用数组，如下所示：

```
@a = ([1,2,3],["test","hello"]); 
```

然后您可以按如下方式打印第二个数组：

```
print @{$a[1]}; 
```

这将为您提供您期望的输出：`testhello`

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-13T00:25:09.447

这只是语法错误的问题：

```
print $a[1] 
```

# php - 如何从 php 中的 CSR 中获取 subjectAltName？

> ID：15982778
> 
> 赞同：2
> 
> 时间：2013-04-13T00:17:26.050
> 
> 标签：php, openssl, csr

php 参考具有[openssl_csr_get_subject 之](http://www.php.net/manual/en/function.openssl-csr-get-subject.php)类的功能，但是如何从 csr 获取 subjectAltNames？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T08:06:57.950

我不认为这是可能的，我改为使用[phpseclib](http://phpseclib.sourceforge.net/)为我做这件事。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-13T00:45:07.317

试试`openssl_x509_parse`另类的科目可以看做扩展，相信你会发现：

```
[extensions][subjectAltName] => DNS:*.cacert.org, DNS:cacert.org, DNS:*.cacert.net, DNS:cacert.net, DNS:*.cacert.com, DNS:cacert.com 
```

# php - 正则表达式匹配网址

> ID：15982780
> 
> 赞同：1
> 
> 时间：2013-04-13T00:17:44.640
> 
> 标签：php, regex, routing

在 PHP 中，klein 路由将匹配尽可能多的路由。我设置的 2 条路线相互冲突。他们是：

```
$route1: '/websites/[i:websiteId]/users/[i:id]?' 
```

和

```
$route2: '/websites/[i:websiteId]/users/[a:filename].[json|csv:extension]?' 
```

这是我要匹配的 URL，我认为应该匹配第一个而不是第二个，是：

```
/api/v1-test/websites/100/users/4 
```

为这两个生成的正则表达式是：

```
$regex1: `^/api(?:/(v1|v1-test))/websites(?:/(?P<websiteId>[0-9]++))/users(?:/(?P<id>[0-9]++))?$`

$regex2: `^/api(?:/(v1|v1-test))/websites(?:/(?P<websiteId>[0-9]++))/users(?:/(?P<filename>[0-9A-Za-z]++))(?:\.(?P<extension>json|csv))?$` 
```

我的意思是如果没有“.csv”或“.json”，它就不匹配。问题是它匹配两条路线。对于第二个，生成的文件名是“4”，扩展名是空白的。

发送 /api/v1-test/websites/100/users/users.csv 可以正常工作，并且只匹配第二条路线。

我只能控制路线，而不是正则表达式或匹配。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:22:29.737

这一点在这里

```
(?:\.(?P<extension>json|csv))? 
```

在你的第二个正则表达式结束时，它会匹配是否有文件名，因为`?`在最后。问号的意思`0 or 1 of the previous expression`。摆脱它，至少，字符串只有在具有扩展名时才会匹配这个正则表达式。

要进行此更改，只需从第二条路线中删除问号，如下所示：

```
$route2: '/websites/[i:websiteId]/users/[a:filename].[json|csv:extension]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:48:40.237

问题是`match_type`定义真的......很奇怪：

```
$match_types = array(
            'i' => '[0-9]++',
            'a' => '[0-9A-Za-z]++',
[...] 
```

因此，您不能真正捕获`[a-zA-Z]`仅对应于...的序列我看到的唯一选择是使用 3 条路线：

```
$route1: '/websites/[i:websiteId]/users/[i:id]?'
$route2: '/websites/[i:websiteId]/users/[a:filename]'
$route3: '/websites/[i:websiteId]/users/[a:filename].[json|csv:extension]' 
```

并为路线 2 和 3 分配相同的操作。然后你会得到这个：

*   `/api/v1-test/websites/100/users/`与 1 匹配
*   `/api/v1-test/websites/100/users/4`与 1 匹配
*   `/api/v1-test/websites/100/users/test`与 2 匹配
*   `/api/v1-test/websites/100/users/test.csv`与 3 匹配

这似乎是您想要的行为。

另一种（更简单的）解决方案是利用以下文档：

```
路由自动匹配整个请求 URI。
如果只需要匹配请求URI的一部分
或使用自定义正则表达式，使用 @ 运算符。
```

然后，您可以像这样定义您的路线：

```
$route1: '@/websites/[0-9]+/users/[0-9]*$'
$route1: '@/websites/[0-9]+/users/[a-zA-Z]+(\.[a-zA-Z]+)?$' 
```

# php - 获取上一个和下一个mysql结果

> ID：15982781
> 
> 赞同：-1
> 
> 时间：2013-04-13T00:18:10.710
> 
> 标签：php, mysql, database

我有一个表，在这个表中我有 20 列，我的默认值从 2-11 开始，只显示 10 个结果。当用户单击上一个按钮时，我想显示上一个 1-10 结果。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:25:05.133

您必须将页面作为参数发送才能进行分页。休息很容易。在 SQL 中，您有 LIMIT 子句，它将数据限制为您设置的限制和偏移变量。例子：

你有一个有 100 行的表。如果您想获得前 10 名，则必须编写如下内容：

```
SELECT columns FROM table ... LIMIT 0,10 
```

如果你想获得接下来的 10 行查询应该是

```
SELECT columns FROM table ... LIMIT 10,10 
```

等等

page 参数显示您正在显示的页面，偏移量很容易从中计算出来。

```
$offset = $currentPage*$limit; 
```

# c# - IManyToManyCollectionInstance 约定创建额外的表

> ID：15982782
> 
> 赞同：1
> 
> 时间：2013-04-13T00:18:12.790
> 
> 标签：c#, postgresql, nhibernate, fluent-nhibernate, nhibernate-mapping

`StockPurchase`我有一个 Fluent NHibernate 基于约定的映射，我的实体和我的实体之间存在多对多关系`StockSale`。

我创建了以下约定：

```
public class ManyToManyLinkedTableConvention : IHasManyToManyConvention
{
    public void Apply(FluentNHibernate.Conventions.Instances.IManyToManyCollectionInstance instance)
    {
        var naming = new NamingStrategy();
        if (StringComparer.InvariantCultureIgnoreCase.Compare(instance.EntityType.Name, instance.OtherSide.EntityType.Name) > 0)
        {
            instance.Table(naming.Quote(
                string.Format(
                    "{0}To{1}",
                    Inflector.Inflector.Pluralize(instance.EntityType.Name),
                    Inflector.Inflector.Pluralize(instance.ChildType.Name))));
            instance.Not.Inverse();
        }
        else
        {
            instance.Inverse();
        }
    }
} 
```

当我使用 hbm2ddl 函数时，它会完全按照我的需要构建表：

```
CREATE TABLE "StockSalesToStockPurchases"
(
  stocksale_id uuid NOT NULL,
  stockpurchase_id uuid NOT NULL,
  CONSTRAINT fkee886e07285f29f1 FOREIGN KEY (stockpurchase_id)
      REFERENCES "StockPurchases" (stockpurchaseid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fkee886e073b8be3d9 FOREIGN KEY (stocksale_id)
      REFERENCES "StockSales" (stocksaleid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
); 
```

...奇怪的是，它还创建了第二个表：

```
CREATE TABLE stockpurchasestostocksales
(
  stockpurchase_id uuid NOT NULL,
  stocksale_id uuid NOT NULL,
  CONSTRAINT fk396e0343285f29f1 FOREIGN KEY (stockpurchase_id)
      REFERENCES "StockPurchases" (stockpurchaseid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION,
  CONSTRAINT fk396e03433b8be3d9 FOREIGN KEY (stocksale_id)
      REFERENCES "StockSales" (stocksaleid) MATCH SIMPLE
      ON UPDATE NO ACTION ON DELETE NO ACTION
); 
```

为什么会这样做，我该如何阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:21:07.830

好的，我发现了如何做到这一点。有人让我知道是否有更好的方法。

```
public class ManyToManyLinkedTableConvention : IHasManyToManyConvention
{
    public void Apply(IManyToManyCollectionInstance instance)
    {
        var naming = new NamingStrategy();
        string firstName;
        string secondName;

        if (StringComparer.InvariantCultureIgnoreCase.Compare(instance.EntityType.Name, instance.OtherSide.EntityType.Name) >
            0)
        {
            firstName = instance.EntityType.Name;
            secondName = instance.OtherSide.EntityType.Name;
        }
        else
        {
            secondName = instance.EntityType.Name;
            firstName = instance.OtherSide.EntityType.Name;
            instance.Not.Inverse();
        }

        instance.Table(naming.Quote(
            string.Format(
                "{0}To{1}",
                Inflector.Inflector.Pluralize(firstName),
                Inflector.Inflector.Pluralize(secondName))));
    }
} 
```

# c++ - 在 VC11 中启用/禁用 SAFESEH？

> ID：15982786
> 
> 赞同：8
> 
> 时间：2013-04-13T00:19:39.677
> 
> 标签：c++, visual-c++, exception-handling, linker, linker-errors

我为 zlib 1.2.7 创建了一个新的解决方案，将其设置为静态库，从中添加了必要的头文件和源文件`./zlib/contrib/minizip`并让它编译得很好。然后我将它与 libpng （也作为静态库）链接起来，它也可以很好地编译。然后，我将 libpng 链接到我的图形引擎项目（也是一个静态库）......仍然没有错误。

但是一旦我将我的主项目链接到我的图形引擎，我就会收到几个关于*crc32.obj*、*deflate.obj*、*inflate.obj*、*d3dxplane.obj*、*d3dxvec4.obj*和其他 zlib/directx 相关模块的 LNK2026 错误。它告诉我它们来自我的图形引擎库，所以我决定通过添加`/SAFESEH:NO`到相应项目的链接器标志来解决这个问题。
**注意：我可能应该声明所有项目都设置为目标 x86，而不是 x64。**

然而，问题是我现在得到了：
`warning LNK4044: unrecognized option '/SAFESEH'; ignored`这会导致我的主项目中出现相同的 LINK2026 错误。
如果我打开一个 Visual Studio 命令提示符并键入`LINK /?`它确认这`/SAFESEH`是一个有效的链接器选项。当我使用`/SAFESEH` *(没有 ':NO')*时，我得到了同样的错误，如果我完全省略它，那么我的主项目只是拒绝构建。

这里发生了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-13T02:07:56.270

> 通过将 /SAFESH:NO 添加到我的链接器标志

嗯，你拼错了。也许在您的问题中，也许在链接器设置中，这种巧合往往可以解释为什么应该起作用的东西不起作用。

无需输入即可使用，请务必这样做。Project + Properties，Linker，Advanced，向下滚动右侧面板，“Image has Safe Exception Handlers”设置。使用组合框选择否。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T00:28:03.823

快速[谷歌显示](http://msdn.microsoft.com/en-us/library/100ezk17%28v=vs.80%29.aspx)这表明您需要使用适当的编译器设置重新编译有问题的模块。

请注意，此标志仅适用于 x86 目标。如果您的目标是 64 位，则无论如何都会收到此错误。

此外，来自[http://msdn.microsoft.com/en-us/library/9a89h429(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/9a89h429(v=vs.80).aspx)，这可能是相关的：

> 链接器无法生成图像的最常见原因是链接器的一个或多个输入文件（模块）与安全异常处理程序功能不兼容。模块与安全异常处理程序不兼容的一个常见原因是因为它是使用 Visual C++ 早期版本的编译器创建的。

如果您提供编译器的版本号以及您的 zlib 副本是如何构建的（您是否自己构建它，如果是，使用相同的编译器？），将会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-04T10:21:06.113

在 Visual Studio 2017 中右键单击项目 -> 属性 -> 配置属性 -> 链接器 -> 所有选项 -> 图像具有安全异常处理程序 = 否 (/SAFESEH:NO) [![在此处输入图像描述](https://i.stack.imgur.com/gp2IE.png)](https://i.stack.imgur.com/gp2IE.png)

# javascript - nodejs异步数据库功能需要同步回答

> ID：15982788
> 
> 赞同：3
> 
> 时间：2013-04-13T00:19:40.903
> 
> 标签：javascript, node.js, asynchronous

我是 nodejs 的新手，正在编写一些代码，需要查询我的 MySQL 数据库并从给定的 user_id 返回用户名。我一直在阅读您的所有功能都应该是异步的。在这种情况下，理想情况下，我希望服务器能够在此查询发生时响应其他事件请求。但是，它不是一个特别大的查询，只返回一个值。也许我应该让它同步？（如果这是您的答案，更改它的示例代码会很棒）无论如何，这是我的功能。它在最后一行“return current_username;”附近给出了一个错误。因为 current_username 在那一点上是未定义的。有什么建议么？

```
function get_current_username(current_user_id) {
    console.log(' | Entered get_current_username');
    sqlq = 'SELECT username FROM users WHERE id = ' + current_user_id;
    connection.query(sqlq, function(err, rows, fields) {
      if (err) throw err;
      var current_username = rows[0].username;
      console.log(' | the current_username =' + current_username);        
    });

return current_username; 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T00:23:02.703

传入一个回调函数`get_current_username`，然后从`connect.query`的回调内部调用该回调函数：

```
function get_current_username(current_user_id, callback) {
    console.log(' | Entered get_current_username');
    sqlq = 'SELECT username FROM users WHERE id = ' + current_user_id;
    connection.query(sqlq, function(err, rows, fields) {
      if (err) throw err;
      var current_username = rows[0].username;
      console.log(' | the current_username =' + current_username);        
      callback(current_username);
    });
} 
```

当您使用此功能时，您会执行以下操作：

```
get_current_username(12345, function(username) {
   console.log("I am " + username);
}); 
```

您还可以查看承诺/期货的使用。我有一种感觉，我无法对这些正义做出解释，所以我将链接到[有关理解 Promises 的 StackOverflow 问题](https://stackoverflow.com/questions/4296505/understanding-promises-in-node-js)。

虽然这是一个架构决定 - 有些人更喜欢使用回调，特别是如果编写一个旨在供第 3 方重用的模块。（事实上​​，在采用 Promise 之类的东西之前，最好在学习阶段完全了解回调。）

# hyperlink - 从链接嵌入 Flash 文件的最佳方法是什么？

> ID：15982789
> 
> 赞同：-2
> 
> 时间：2013-04-13T00:19:42.273
> 
> 标签：hyperlink, flash, embed, shockwave

我环顾四周，但仍然没有找到一个很好的答案来回答我的问题。

我想知道如何通过 HTML 或 Java 将 Flash 游戏嵌入到我的网站中以使其播放。

我有 SWF 文件，但无法将文件放在网站上，所以我得到了这个链接“ [https://dl-web.dropbox.com/get/flight.swf?w=AAAYS8vwABuIJB3QbyhV1kSX778W0mXh4xRoQ0ADqm4w6g](https://dl-web.dropbox.com/get/flight.swf?w=AAAYS8vwABuIJB3QbyhV1kSX778W0mXh4xRoQ0ADqm4w6g) ”，这只是闪存游戏

将其插入我的网站的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:12:31.117

下面是一个通用脚本，它将您的 Flash 电影嵌入到一个 html 页面中，有几种方法可以做到这一点，但下面只需将代码复制并粘贴到正文区域的 html 页面上即可。如果您需要其他的，请查看 adobe 网站参数或更多信息。

```
<object id="yourmovie.swf" width="550" height="450" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"
codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0" align="middle" bgcolor="#ffffff">
<param name="allowScriptAccess" value="sameDomain" />
<param name="quality" value="high" />
<param name="src" value="http://www.yourwebsite/yourmovie.swf" />
<param name="allowscriptaccess" value="sameDomain" />
<param name="pluginspage" value="http://www.macromedia.com/go/getflashplayer" />
<embed id="slots.swf" width="476" height="321" type="application/x-shockwave-flash"src="http://www.yourwebsite/yourmovie.swf"
allowScriptAccess="sameDomain" quality="high" allowscriptaccess="sameDomain" 
pluginspage="http://www.macromedia.com/go/getflashplayer" align="middle" bgcolor="#ffffff" /> 
</object> 
```

要使用来自 java 的链接，我的选项将是创建一个按钮/链接，该按钮/链接在该 html 页面上打开带有上述内容的另一个窗口

# matlab - 如何在matlab中翻转char数组？

> ID：15982790
> 
> 赞同：1
> 
> 时间：2013-04-13T00:19:46.943
> 
> 标签：matlab

我们可以使用**fliplr**函数在matlab中翻转矩阵但是如果我想翻转char矩阵怎么办

```
 XOX.
    XOXX
    OXXX
    XOXO 
```

我想翻转这个矩阵，使每一行都反转，就像在数字矩阵中翻转的情况一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:39:32.270

如果您的输入是一个`char`数组，`fliplr`应该仍然可以工作，例如：

```
a=['a11';'1a1';'11a']

fliplr(a)
ans =
11a  
1a1
a11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:36:39.787

将 Fliplr 应用于每个单元格：

```
C = {'A';'rolling';'stone';'gathers';'momentum.'}
a = cellfun(@(x) fliplr(x), C,  'UniformOutput', false)

>> a

a = 

    'A'
    'gnillor'
    'enots'
    'srehtag'
    '.mutnemom' 
```

# clojure - clojure 部分澄清

> ID：15982792
> 
> 赞同：8
> 
> 时间：2013-04-13T00:19:54.987
> 
> 标签：clojure, functional-programming, jvm, read-eval-print-loop

我正在读一本关于clojure的书，我通过一个我不完全理解的例子来了..

这是repl中的代码：

```
user=> (repeatedly 10 (rand-int 10))
ClassCastException java.lang.Integer cannot be cast to clojure.lang.IFn  clojure.core/repeatedly/fn--4705 (core.clj:4642)

user=> (repeatedly 10 (partial rand-int 10))
(5 0 5 5 2 4 8 8 0 0) 
```

我的问题是：为什么`partial`需要这里，以及它如何适合`partial`定义、`repeatedly`定义和语法。部分的 ...

```
Takes a function f and fewer than the normal arguments to f, and
  returns a fn that takes a variable number of additional args. When
  called, the returned function calls f with args + additional args. 
```

那么这如何适应呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T00:27:16.947

Partial 只是定义匿名函数的一种更简单的方法，它将一些参数固定到函数，然后将其余参数从参数传递给创建的函数。

在这种情况下

```
user> (repeatedly 10 (partial rand-int 10))
(3 1 3 6 1 2 7 1 5 3) 
```

相当于：

```
user> (repeatedly 10 #(rand-int 10))                        
(9 5 6 0 0 5 7 6 9 6) 
```

Partial 在这里用词不当，因为`partial`它被用来提前修复 rand-int 的所有参数（或者更确切地说是唯一一个参数）。

更有趣的 partial 使用说明了它的功能更好：

```
(partial + 4) 
```

产生相当于：

```
(fn [& unfixed-args] (apply + (concat [4] unfixed-args))) 
```

（它实际上并没有产生这个）这个想法是构建一个函数，该函数接受不固定的参数，将它们与固定的参数结合起来，并`partial`使用足够的参数调用您传递给的函数以正常工作。

```
user> ((fn [& unfixed-args] (apply + (concat [4] unfixed-args))) 5 6 7 8 9)       
39
user> ((partial + 4) 5 6 7 8 9)
39 
```

当参数的数量是可变的时，我只在实践中使用部分。否则我个人偏好使用匿名函数阅读器表单`#( ... )`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T00:27:24.517

`partial`实际上并没有检查它的第一个参数支持哪些arities；一个可以说更准确的文档字符串会说它“接受一个函数 f 和一些 f 的参数”。（很明显，如果您提供太多参数，则生成的部分应用函数将被破坏，尽管只有在您尝试调用它时才能观察到。）所以这就是为什么`(partial rand-int 10)`即使`rand-int`提供的参数数量不是“少于普通的”。

这里需要一个`partial`或类似的原因是期望它的最后一个参数是一个可以重复调用的函数，而它将是一个数字。`#(rand-int 10)``repeatedly``(rand-int 10)`

比较`repeat`它返回一个序列，提供的项目重复指定的次数（或在一元情况下无限多次）。这`(rand-int 10)`将是一个合适的第二个参数，但当然它会是一些特定的数字，所以结果看起来像`(8 8 8 8 8 ...)`; 将对返回的序列的每个项目进行`repeatedly`单独调用，因此您将从中获得一个（可能不同的、独立的）随机数序列。`(partial rand-int 10)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-15T08:34:00.300

`repeatedly`我们感兴趣的签名：`(repeatedly number function)`

在这种情况下， partial 将简单地包装`rand-int 10`成一个可以被外部函数返回和使用的函数，在这种情况下是`repeatedly`.

没有`partial`（或`#`）**内部表达式在外部表达式之前解析**（有例外，但现在让我们保持简单），所以当`repeatedly`没有被调用时`partial`，将传递给它的是返回值`rand-int`，即`Int`而不是函数.

# performance - 应用程序是否包含在操作系统中 - 有什么区别？

> ID：15982794
> 
> 赞同：-1
> 
> 时间：2013-04-13T00:20:30.190
> 
> 标签：performance, operating-system

我被要求研究的一个问题是：

问：操作系统是否应该包含常见的应用程序，例如 Web 浏览器和邮件程序？

我对这个问题的回答是：优点：如果将其作为操作系统的一部分包含在内，则性能和集成会更好。缺点：操作系统承载着额外的功能。

我显然对这里的某些东西缺乏了解，因为我看不出会有什么区别。最后，我看不出将浏览器制作为“操作系统的一部分”或单独制作有什么区别。我想我真的不明白成为“操作系统的一部分”意味着什么。我不明白为什么操作系统在一种情况下会比另一种情况下负担更多。

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:02:44.650

如果一个应用程序包含在操作系统中，它

*   方便不用选择安装软件的普通用户
*   有时删除不方便（例如某些移动操作系统中的系统应用程序，您无法轻松卸载）
*   可以与其他系统上不一定可用的其他应用程序（如浏览器 + pdf 查看器或媒体播放器）紧密耦合，从而增加其功能
*   可能不需要支持其他操作系统，开发集中在与其捆绑的操作系统的集成上
*   占用磁盘/磁盘空间 - 当操作系统过去在软盘或 CD 上交付并且硬盘空间昂贵时，这是一个更大的问题

包含软件的主要原因可能是将客户与产品联系起来。该应用程序可能是由操作系统制造商开发的，或者他们得到报酬来包含它。因此出现了诉讼，例如*Windows N*版本（没有 Windows 媒体播放器）或欧洲版本的 Internet Explorer 中的 Web 浏览器选择屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:35:08.443

我不确定这是这个问题的正确 stackexchange，也许是[http://programmers.stackexchange.com](http://programmers.stackexchange.com)

首先，构成“操作系统”的东西有点模糊，有人可能会争辩说浏览器不是操作系统的“一部分”，而只是与它捆绑在一起。

就这个问题而言，我认为操作系统的一部分意味着它在安装了该应用程序后开箱即用（无论该应用程序在更深层次上是否是“操作系统的一部分”）。

例如，自动更新机制可能会将应用程序视为独立的，并将其与操作系统分开更新，甚至允许将其从系统中卸载，但这并不能改变机器附带该应用程序的事实。

# mysql - 反序列化、再次序列化和更新值

> ID：15982797
> 
> 赞同：2
> 
> 时间：2013-04-13T00:22:05.433
> 
> 标签：mysql, wordpress, serialization, migration

我正在研究迁移的 WordPress，站点 url 已更改，除了插件存储的一些序列化数据外，一切正常。

对于插件保存的每条记录，数据都存储在**wp_options 表**的**option_value 列**中。所以数据仍然存在，问题是当url改变时，它没有被重新序列化（字符串内容的计数仍然认为它是旧的url长度），因此插件无法正常工作。

因此，要准确找到需要更新的记录，我使用

```
$t1 = $wpdb->prefix . "vslider";
$t2 = $wpdb->prefix . "options"; 

$records_ineed = $wpdb->get_results("SELECT * FROM '".$t1."', '".$t2."' WHERE '".$t1."'.option_name='".$t2."'.option_name"); 
```

这正好给了我需要重新序列化的记录（它与插件表中创建的记录的名称相匹配，与 wp_option 表中创建的记录相匹配）

现在我该怎么做？！我如何只取每个的 option_value，反序列化它，重新序列化它并更新数据库中的现有值？我是否应该将重新序列化的值保存到新表中，然后从该表中替换回 ​​wp_options？如何？否则还有什么其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:05:35.923

没有必要这样做，您需要按原样导入值。它是一个数组，只要您不以任何方式更改数据，它就可以正常工作。

无论如何，当您将 wp 站点导入迁移到另一个 URL 时，绝对不需要逐一阅读 wp-options 表的列。

你需要做的只是从 Original( `old-domain`) 站点转储你的 SQL，然后导入到`new-domain`，然后运行这些查询：

```
/**
To update WordPress options with the new blog location, use the following SQL command:
**/

UPDATE wp_options SET option_value = replace(option_value, 'http://www.old-domain.com', 'http://www.new-domain.com') WHERE option_name = 'home' OR option_name = 'siteurl';

/**
After that you will need to fix URLs of the WordPress posts and pages, which translated from post slug, and stored in database wp_posts table as guid field. The URL values in this field are stored as abolute URLs instead of relative URLs, so it needs to be changed with the following SQL query:
**/

UPDATE wp_posts SET guid = replace(guid, 'http://www.old-domain.com','http://www.new-domain.com');

/**
If you have linked internally within blog posts or pages with absolute URLs, these links will point to wrong locations after you move the blog location. Use the following SQL commands to fix all internal links to own blog in all WordPress posts and pages:
**/

UPDATE wp_posts SET post_content = replace(post_content, 'http://www.old-domain.com', 'http://www.new-domain.com'); 
```

只是为了验证，运行这些命令后，返回选项表并验证您的 home 和 site_url 函数对于`new-domain`数据都是正确的。

如果您仍然想要，出于某种晦涩的原因，手动将数据直接插入选项表中（?? 为什么），那么您应该考虑使用[`get_post_meta()`](http://codex.wordpress.org/Function_Reference/get_post_meta) and[`update_post_meta()`](http://codex.wordpress.org/Function_Reference/update_post_meta)函数来处理序列化。

# python - 使用 peewee ORM 对代码进行单元测试的自定义 sqlite 数据库

> ID：15982801
> 
> 赞同：10
> 
> 时间：2013-04-13T00:22:47.233
> 
> 标签：python, sqlite, peewee

我正在尝试使用 peewee python ORM 实现多对多场景，我想要一些单元测试。Peewee 教程很棒，但它假设数据库是在模块级别定义的，然后所有模型都在使用它。我的情况不同：我没有明确运行的测试的源代码文件（从python的角度来看的模块），我正在使用从该文件收集测试并运行它们的nose。

如何仅将自定义数据库用于在测试中实例化的模型（由鼻子运行）？我的目标是仅使用内存数据库进行测试，以加快测试过程。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-14T16:25:34.307

我今天刚刚推送了一个提交，这使得这更容易。

该修复采用上下文管理器的形式，它允许您覆盖模型的数据库：

```
from unittest import TestCase
from playhouse.test_utils import test_database
from peewee import *

from my_app.models import User, Tweet

test_db = SqliteDatabase(':memory:')

class TestUsersTweets(TestCase):
    def create_test_data(self):
        # ... create a bunch of users and tweets
        for i in range(10):
            User.create(username='user-%d' % i)

    def test_timeline(self):
        with test_database(test_db, (User, Tweet)):
            # This data will be created in `test_db`
            self.create_test_data()

            # Perform assertions on test data inside ctx manager.
            self.assertEqual(Tweet.timeline('user-0') [...])

        # once we exit the context manager, we're back to using the normal database 
```

请参阅[文档](http://docs.peewee-orm.com/en/latest/peewee/playhouse.html#test-utils)并查看示例测试用例：

*   [上下文管理器](https://github.com/coleifer/peewee/blob/master/playhouse/test_utils.py)
*   [展示如何使用的测试用例](https://github.com/coleifer/peewee/blob/master/tests/test_utils.py)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-01T14:35:13.877

要不在每个测试用例中包含上下文管理器，请覆盖`run`方法。

```
# imports and db declaration

class TestUsersTweets(TestCase):
    def run(self, result=None):
        with test_database(test_db, (User, Tweet)):
            super(TestUsersTweets, self).run(result)

    def test_timeline(self):
        self.create_test_data()
        self.assertEqual(Tweet.timeline('user-0') [...]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-17T15:37:51.360

我从@coleifer 和@avalanchy 那里得到了很好的答案，并将它们更进一步。

为了避免在每个`TestCase`子类上覆盖 run 方法，您可以使用基类......而且我也喜欢不必写下我使用的*每个*模型类的想法，所以我想出了这个

```
import unittest
import inspect
import sys
import peewee
from abc import ABCMeta
from playhouse.test_utils import test_database
from business_logic.models import *

test_db = peewee.SqliteDatabase(':memory:')

class TestCaseWithPeewee(unittest.TestCase):
    """
    This abstract class is used to "inject" the test database so that the tests don't use the real sqlite db
    """

    __metaclass__ = ABCMeta

    def run(self, result=None):
        model_classes = [m[1] for m in inspect.getmembers(sys.modules['business_logic.models'], inspect.isclass) if
                         issubclass(m[1], peewee.Model) and m[1] != peewee.Model]
        with test_database(test_db, model_classes):
            super(TestCaseWithPeewee, self).run(result) 
```

所以，现在我可以继承自`TestCaseWithPeewee`，而不必担心除了测试之外的任何其他事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-26T13:17:40.800

使用`test_database`时遇到`test_db`未初始化的问题：

`nose.proxy.Exception: Error, database not properly initialized before opening connection -------------------- >> begin captured logging << -------------------- peewee: DEBUG: ('SELECT "t1"."id", "t1"."name", "t1"."count" FROM "counter" AS t1', []) --------------------- >> end captured logging << ---------------------`

我最终通过`create_tables=True`像这样传递来解决这个问题：

`def test_timeline(self): with test_database(test_db, (User, Tweet), create_tables=True): # This data will be created in `test_db` self.create_test_data()`

根据[文档](http://docs.peewee-orm.com/en/latest/peewee/playhouse.html#test-utils) `create_tables`应该默认为，`True`但在最新版本的`peewee`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-10T17:50:02.820

显然，对于所描述的场景有一种新方法，您可以在`setUp()`测试用例的方法中绑定模型：

[来自官方文档的](http://docs.peewee-orm.com/en/latest/peewee/database.html?#testing-peewee-applications)示例：

```
# tests.py
import unittest
from my_app.models import EventLog, Relationship, Tweet, User

MODELS = [User, Tweet, EventLog, Relationship]

# use an in-memory SQLite for tests.
test_db = SqliteDatabase(':memory:')

class BaseTestCase(unittest.TestCase):
    def setUp(self):
        # Bind model classes to test db. Since we have a complete list of
        # all models, we do not need to recursively bind dependencies.
        test_db.bind(MODELS, bind_refs=False, bind_backrefs=False)

        test_db.connect()
        test_db.create_tables(MODELS)

    def tearDown(self):
        # Not strictly necessary since SQLite in-memory databases only live
        # for the duration of the connection, and in the next step we close
        # the connection...but a good practice all the same.
        test_db.drop_tables(MODELS)

        # Close connection to db.
        test_db.close()

        # If we wanted, we could re-bind the models to their original
        # database here. But for tests this is probably not necessary. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-04T20:20:36.433

对于使用 pytest 的任何人，我都是这样做的：

**conftest.py**

```
MODELS = [User, Tweet]  # Also add get_through_model() for ManyToMany fields

test_db = SqliteDatabase(':memory:')
test_db.bind(MODELS, bind_refs=False, bind_backrefs=False)
test_db.connect()
test_db.create_tables(MODELS)

@pytest.fixture(autouse=True)
def in_mem_db(mocker):
    mocked_db = mocker.patch("database.db", autospec=True)  # "database.db" is where your app's code imports db from
    mocked_db.return_value = test_db
    return mocked_db 
```

*瞧*，您的所有测试都使用内存中的 sqlite 数据库运行。

# dojo - “便携式模块”适用于 src 版本，但不适用于预构建版本

> ID：15982804
> 
> 赞同：0
> 
> 时间：2013-04-13T00:23:07.500
> 
> 标签：dojo

为了结合使用 dojo 1.8 和 1.6，我设置了可移植模块，如教程[定义模块](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)中所述，在子标题“使用可移植模块”下。

我一直将它与dojo的源版本“dojo-release-1.8.3-src.zip”一起使用，它工作得很好，但是当我切换到预构建版本时，“dojo-release-1.8 .3.zip”，它会抛出 404 错误寻找依赖项：

```
GET http://localhost:8080/sb/javascript/lib/dojo-release-1.8.3/dojo/parser.js     200 OK
GET http://localhost:8080/sb/javascript/lib/dojo-build-1.6.1/dojo/_base/url.js    404 Not Found
"NetworkError: 404 Not Found - http://localhost:8080/sb/javascript/lib/dojo-build-1.6.1/dojo/_base/url.js"

GET http://localhost:8080/sb/javascript/lib/dojo-release-1.8.3/dojo/request.js    200 OK
GET http://localhost:8080/sb/javascript/lib/dojo-build-1.6.1/dojo/request/default.js     404 Not Found
"NetworkError: 404 Not Found - http://localhost:8080/sb/javascript/lib/dojo-build-1.6.1/dojo/request/default.js" 
```

从控制台很明显，它在错误的位置查找依赖文件（查找“dojo-build-1.6.1”而不是“dojo-release-1.8.3”）。我想知道为什么？我所做的只是将源版本换成预建版本。

这是我的配置：

```
<script>
    var map18 = {dojo: "dojo18", dijit: "dijit18", dojox: "dojo18"};
    var dojoConfig = {
        async: false,
        parseOnLoad: true,  // in 1.8 they suggest setting to false and manually parsing when needed, but we're not set up that way at the moment
        packages: [
            {name: "dgrid", location: "../../dgrid/dgrid", packageMap: map18},
            {name: "xstyle", location: "../../dgrid/xstyle", packageMap: map18},
            {name: "put-selector", location: "../../dgrid/put-selector", packageMap: map18},
            {name: "modules", location: "../../modules", packageMap: map18},
            {name: "page", location: "../../page"},
            {name: "dojoc", location: "../../dojoc"},
            {name: "dojo18", location: "../../dojo-release-1.8.3/dojo", packageMap: map18},
            {name: "dijit18", location: "../../dojo-release-1.8.3/dijit", packageMap: map18},
            {name: "dojox18", location: "../../dojo-release-1.8.3/dojox", packageMap: map18},
            {name: "dojo", location: "../../dojo-build-1.6.1/dojo", main: "dojo"},
            {name: "dijit", location: "../../dojo-build-1.6.1/dijit"},
            {name: "dojox", location: "../../dojo-build-1.6.1/dojox"}
        ],
    };
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T21:07:51.417

我尝试了类似的东西（同时使用 1.8 和 1.6 源）并得到了不同的错误。我知道这不是问题的答案，但我会将其粘贴在这里，以防它帮助您找到答案。

这是我的测试页面：

```
<script>
var location18 = "/dojo18";
var location16 = "/dojo16";
var map16 = { dojo: "dojo16", dijit: "dijit16", dojox: "dojox16" },
    dojoConfig = {
        packages: [
            { name: "dojo16", location: location16 + "/dojo", packageMap: map16 },
            { name: "dijit16", location: location16 + "/dijit", packageMap: map16 },
            { name: "dojox16", location: location16 + "/dojox", packageMap: map16 },
            { name: "dojo", location: location18 + "/dojo" },
            { name: "dijit", location: location18 + "/dijit" },
            { name: "dojox", location: location18 + "/dojox" }
        ]
    };
</script>
<script src="/dojo18/dojo/dojo.js"></script>
<script>
require(["dojo/date"], function (date) {
    console.log("date18", date);
});
</script>
<script>
require(["dojo16/date"], function (date) {
    console.log("date16", date);
});
</script> 
```

我得到的错误似乎与加载两个日期模块有关。不确定 Dojo 是否可以单独对待它们，但我没有设法做到这一点。

![错误](https://i.stack.imgur.com/IsLkw.png)

# c - 将字符数组指定为函数参数的正确语法是什么？

> ID：15982806
> 
> 赞同：1
> 
> 时间：2013-04-13T00:23:24.690
> 
> 标签：c, compiler-errors, parameter-passing

将字符数组指定为函数的参数之一的正确语法是什么？

我不知道是我压力大，找不到错误，还是因为我已经离开 C 一段时间了。我只是无法发现错误。请帮忙！

```
#include <stdio.h>
#include <string.h>
void reverseWord(int len, char[] str, int index)
{
    int start, end;
    char temp;
    start = index - len;
    end = index - 1;
    while (start <= end)
    {
        temp = str[start];
        str[start] = str[end];
        str[end] = temp;
        start++;
        end --;
    }
}

void main()
{
    int i,j=0, len;
    int tmp = 0;
    char str[]="i am a loser";
    char word[]= " ";
    len = strlen(str);
    for(i=0;i<len;i++)
    { 
        if(str[i] == ' ')
        {
            tmp = strlen(word);
            if(tmp != 0)
            {    
                 reverseWord(tmp , str ,i);
                 j = 0; <<ERROR PRONE LINE>>
            }
        }
       else
           word[j++]=str[i];
    }

    printf ("final string = %s",str); 
} 
```

我不断收到此错误

```
error: expected ‘;’, ‘,’ or ‘)’ before ‘str’ on line marked above 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:25:37.450

您缺少该`}`行的右大括号`if(str[i] == ' ')`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T00:49:49.083

问题在于函数的`str`定义`reverseWord`。而不是`char[] str`，如果您将其修改为`char* str`，您的编译将成功。

如果您希望使用该`[]`概念，那么一种可能的解决方案可能是将新数据类型定义为

```
typedef char myArrStr[100]; 
```

它定义`myArrStr`为 100 个元素的字符数组。

在 的函数定义中`reverseWord`，您可以将定义修改为

```
void reverseWord(int len, myArrStr str, int index) 
```

的定义`str`可以修改为

```
myArrStr str = "i am a winner"; // Changed your message :-) 
```

通过这些更新，您的代码应该可以正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T00:26:31.517

你忘了一个右括号

```
if(str[i] == ' ')
{
            tmp = strlen(word);
            if(tmp != 0)
            {    
                 reverseWord(tmp , str ,i);
                 j = 0; <<ERROR PRONE LINE>>
            }
}
else
{
           word[j++]=str[i];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-13T00:28:53.960

缺少一个右大括号，它应该就在`else`语句的正上方。

此外，总是在`if`or语句的内容周围使用大括号是一个非常好的主意，因为如果您稍后添加另一行，则只会执行or语句`else`正下方的那一行（这个错误可能真的很难点）。`if``else`

更正的代码：

```
#include <stdio.h>
#include <string.h>

void main()
{
    int i,j=0, len;
    int tmp = 0;
    char str[]="i am a loser";
    char word[]= " ";
    len = strlen(str);
    for(i=0;i<len;i++)
    { 
        if(str[i] == ' ')
        {
            tmp = strlen(word);
            if(tmp != 0)
            {    
                 reverseWord(tmp , str ,i);
                 j = 0; <<ERROR PRONE LINE>>
            }
        }
       else
       {
           word[j++]=str[i];
       }
    }

    printf ("final string = %s",str); 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-13T00:36:36.017

函数在哪里`reverseWord`定义？您将需要包含它定义的文件：

`#include "otherfile.h"`

如果函数是在同一个文件中定义的，你可以将`reverseWord`函数移到 main 之上。

# xml - 通过同一域上的 Flash 引用 XML 文件时出现 404 页面错误

> ID：15982807
> 
> 赞同：1
> 
> 时间：2013-04-13T00:23:45.960
> 
> 标签：xml, flash

我有这个以前可以工作的 Flash 元素，但现在它没有出现。如果我使用 XML 路径访问 URL：http://young-folks.com/header1_cs3.swf?xmlPath=http: [//young-folks.com/xml/CubeSlides.xml](http://young-folks.com/header1_cs3.swf?xmlPath=http://young-folks.com/xml/CubeSlides.xml)它显示为 404 Page Not Found ，但单独的 SWF 和 XML 链接工作正常。

我尝试在另一台服务器上上传这些完全相同的 SWF 和 XML 文件，它似乎工作得很好：[http](http://scrapgoldsell.com/header1_cs3.swf?xmlPath=http://scrapgoldsell.com/xml/CubeSlides.xml) ://scrapgoldsell.com/header1_cs3.swf?xmlPath=http://scrapgoldsell.com/xml/CubeSlides.xml但我需要它可以在我的其他服务器 young-folks.com 上运行，为什么它不能在 young-folks.com 上运行，但在 scrapgoldsell.com 上却可以完美运行？请帮忙，我试过到处搜索，但找不到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:37:50.053

它看起来像是某种 URL 重写，正在将路径从 SWF 更改为另一个位置。

当你尝试这个时：

```
http://young-folks.com/header1_cs3.swf?xmlPath=http 
```

它加载 swf 但不加载 XML 幻灯片。

```
http://young-folks.com/header1_cs3.swf?xmlPath=http:// 
```

这没有。

您可以做的是删除 http:// 并使用以下内容，因为 SWF 可以使用服务器上的相对路径加载 XML。

```
http://young-folks.com/header1_cs3.swf?xmlPath=xml/CubeSlides.xml 
```

# python - 在 Python 中将类实现为字典

> ID：15982808
> 
> 赞同：1
> 
> 时间：2013-04-13T00:24:02.457
> 
> 标签：python, closures

[我在http://pydanny.com/python-dictionary-as-a-class.html](http://pydanny.com/python-dictionary-as-a-class.html)找到了以下代码。该代码工作正常，我有点理解它为什么会这样，但类似的代码在它下面给出了错误。

```
def newclass(**kwargs):
""" Use kwargs.update() method to handle inheritance """

def set(key, value):
    """ Sets key/value to the kwargs.
        Replicates self/this clumsily
    """
    kwargs[key] = value
kwargs['set'] = set
return kwargs 
```

我的试用码：

```
def closing():
    x=1
    def closed():
        print(x)
        x=x+1
    return(closed)

a=closing()
a() 
```

错误信息：

```
Traceback (most recent call last):
File "<pyshell#606>", line 1, in <module>
a()
File "<pyshell#604>", line 4, in closed
print(x)
UnboundLocalError: local variable 'x' referenced before assignment 
```

当我在封闭函数中使用“nonlocal x”时，它可以工作，但是初始代码如何在没有“nonlocal”的情况下工作。我的理解是它是一个闭包，内部函数将保持对外部（自由）变量的引用，并且每当调用内部函数时，它将能够对该封闭变量采取行动，但我当然没有正确理解它的某些部分. 请帮助我清除我缺少的概念。谢谢所有回答的人。所以太有帮助了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:28:30.200

> 当我在封闭函数中使用“nonlocal x”时，它可以工作，但是初始代码如何在没有“nonlocal”的情况下工作。

在第一个片段中，您正在改变现有`kwargs`值。您没有为它或任何其他名称分配新值。

但在第二个片段中，您将新值分配给`x`. 这迫使`x`本地化（除非您另有说明）。因此，您`x+1`是对尚未分配的局部变量的引用。因此错误。

有关更严格的解释，请阅读文档中的[命名和绑定](http://docs.python.org/3/reference/executionmodel.html#naming-and-binding)。相关位是：

> 程序文本中每次出现的名称都是指在包含使用...的最内层功能块中建立的该名称的绑定...</p>
> 
> 在代码块中使用名称时，将使用最近的封闭范围来解析它……</p>
> 
> 如果名称绑定在块中，则它是该块的局部变量，除非声明为`nonlocal`...</p>

要了解其背后的工作原理，您还需要阅读[标准类型层次结构中的](http://docs.python.org/3/reference/datamodel.html#the-standard-type-hierarchy)函数和代码对象。您可能不需要知道该部分来理解，但对于调试，您可能需要检查 the`__closure__`和其他属性。

# git - 无法安装 github 有替代方案吗？

> ID：15982809
> 
> 赞同：1
> 
> 时间：2013-04-13T00:24:36.023
> 
> 标签：git, github, git-clone

我想从 github 下载：[https ://github.com/ushahidi/SwiftRiver](https://github.com/ushahidi/SwiftRiver)

我不熟悉 Github，但很明显我需要安装它才能下载此文件夹/应用程序。

我尝试下载 zip 文件，但发现丢失了一堆子目录。例如，“系统”目录。

我使用的是 Mac 10.6，从研究看来，您必须拥有 10.7 或更高版本才能安装 Github。

有替代方案吗？是否有一些网络托管版本允许我“克隆”或运行代码来创建目录？似乎如此接近。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:30:23.030

我想你很困惑。Github 是一个托管 Git 存储库的网站。您不能也不需要安装它。

Git 是一个版本控制系统。那，你可以安装。在 Mac 上，有多种方法可以做到这一点。可能最简单的方法是安装 Xcode 和命令行工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:35:40.510

不，您无需安装 Github 即可下载此项目。

[你需要来自这里](http://git-scm.com/downloads)的GIT 。

然后您可以按照[https://github.com/ushahidi/SwiftRiver的说明进行操作](https://github.com/ushahidi/SwiftRiver)

打开终端，创建一个文件夹，例如`git`，转到该文件夹​​并使用：

> git clone --recursive git://github.com/ushahidi/SwiftRiver.git

这会将代码克隆到新创建的 SwiftRiver 目录中。将此目录复制到 Web 服务器的文档根目录或 public_html 目录。

我建议你阅读一个[很棒的 GIT 文档](http://git-scm.com/doc)

# ios - 每次使用 FPPopoverController 退出带有弹出框的视图时，它 NSLogs “FPPopover dealloc”，我该如何阻止它？

> ID：15982810
> 
> 赞同：0
> 
> 时间：2013-04-13T00:24:38.850
> 
> 标签：ios, objective-c, fppopover

它似乎在文件中：[https ://github.com/50pixels/FPPopover/blob/master/FPPopoverController.m#L89](https://github.com/50pixels/FPPopover/blob/master/FPPopoverController.m#L89)

在该行，它说如果调试选项设置为宣布它。我不想设置它，我也不记得设置它。如果是这个原因，我该如何取消调试？如果不是，我怎样才能让它停止这样说。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:41:58.707

避免 NSLog 消息的最简单方法是简单地将其注释掉。

至于您的问题，某些头文件或编译命令正在定义 FP_DEBUG。搜索头文件，找到 FP_DEBUG 并取消设置（注释掉或使用`#undef`）。如果它不在头文件中，请查看目标构建设置（选择目标，单击“构建设置”，搜索 FP_DEBUG。如果找到它，就像在“其他 C 标志”中一样，请将其删除。

# google-chrome - chrome中的JW Player调整大小问题

> ID：15982812
> 
> 赞同：1
> 
> 时间：2013-04-13T00:24:45.570
> 
> 标签：google-chrome, video, resize, html5-video, jwplayer

我的视频在 chrome 中不正确地调整大小时遇到​​了一个奇怪的问题。

我尝试了许多在谷歌上找到的不同建议，但似乎没有一个有效。视频是 16:9，我使用纵横比计算器来选择视频的缩放尺寸。它在 firefox、opera 等中运行良好......但你会看到 chrome 错误地调整了它的大小。

该网站可在 www.conchandmedia.com 查看

任何建议将不胜感激

# php - 是否可以评估双引号内的常量？

> ID：15982817
> 
> 赞同：7
> 
> 时间：2013-04-13T00:25:15.623
> 
> 标签：php

有没有办法评估双引号内的常量以避免使用连接`.`？

例如，我可以执行以下操作：

```
echo "$variable";

echo "{$array["index"]}";

echo "{$this->myProperty}"; 
```

不幸的是，回显“{MY_CONSTANT}”不起作用。

那么，有没有办法像上面的例子一样评估一个常数，避免串联？

我知道是否有替代代码并获得相同的结果，但我只针对常量。

我这样做的动机是编写 sql 语句，例如：

```
$sql = "SELECT * FROM {MY_JOIN} WHERE id > 100"; 
```

常量`MY_JOIN`可能是这样的

```
"
orders
INNER JOIN
users
    ON (orders.user_id = users.id)
" 
```

或避免类似的事情

```
$dir = DIRECTORY_SEPARATOR."folder1".DIRECTORY_SEPARATOR."folder2".DIRECTORY_SEPARATOR; 
```

我知道我可以写一些类似`$separator = DIRECTORY_SEPARATOR`和代码 的东西，`$dir = "{$separator}folder1{$separator}folder2{$separator}";`但如果可能的话，我想直接用常量来做这件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:29:25.993

不，这根本不可能。

但是，对于您的特定示例，有两个很好的解决方法：

```
sprintf('SELECT ... %s ...', MY_CONSTANT);

join(DIRECTORY_SEPARATOR, array('foo', 'bar', 'baz')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T00:45:08.597

有趣的是，正如链接所建议的，我们可以使用 lambda 函数来做到这一点，非常有趣。

一个工作示例：

```
<?php
$constant = function($cons){
   return constant($cons);
};

define('FOO', 'Hello World!');
echo "The string says {$constant('FOO')}"; 
```

# paypal - 使用带有计费协议的自适应支付/批量支付

> ID：15982818
> 
> 赞同：-1
> 
> 时间：2013-04-13T00:25:20.507
> 
> 标签：paypal

我正在建立一个类似 ebay 的网站，有买家就是卖家。当用户（买方和卖方）注册时，我让他们与我签署贝宝账单协议。当买家出售商品时，我使用账单协议向卖家收费。

我坚持的是*使用计费协议*将该金额发送给卖方。我意识到我可以使用 MassPay 或 Adaptive Payments API 向卖家付款，但这些接口都没有采用计费协议 ID。他们都只接受卖家的电子邮件地址。这是否意味着我需要通过 GetBillingAgreementCustomerDetails 检索用户的电子邮件地址，然后才能进行批量付款/自适应付款电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T01:15:55.980

如果我是你，我会调查预先批准的付款。您的用户将设置预先批准配置文件而不是计费协议。然后，您可以使用他们的预批准密钥代表任何用户汇款。

具体来说，您将使用 Preapproval API 创建配置文件，然后使用包含预批准密钥的 Pay API 在必要时提交付款。

# sql - 属性 SQL 上的引号

> ID：15982821
> 
> 赞同：1
> 
> 时间：2013-04-13T00:25:41.877
> 
> 标签：sql, oracle11g

以下两个查询有区别吗？

```
CREATE TABLE alpha(age INTEGER); 
```

和

```
CREATE TABLE alpha("age" INTEGER); 
```

我读到数据库对象是不区分大小写**的**，除非它们用引号引起来。当我尝试将 TABLE 对象保留在引号中但不适用于属性时，这适用。

我猜原因是属性不是数据库对象。这个对吗？

如果是，那么属性属于哪个类别，如果不是数据库对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:14:38.603

有区别吗？是的。

当您不使用引号时，例如：

```
CREATE TABLE alpha(age INTEGER); 
```

oracle 会将该列和表以大写形式存储在数据字典中。

换句话说，这些语句是相同的：

```
CREATE TABLE alpha(age INTEGER);
CREATE TABLE "ALPHA"("AGE" INTEGER);
CREATE TABLE ALPHA(AGE INTEGER); 
```

此外，表格上的任何后续 dml/ddl 如下：

```
select age from alpha; 
```

查找对象/列时将首先转换为大写；所以上面的 SQL 可以正常工作。即oracle 将查找列`AGE`和表，而不是键入`ALPHA`的列`age`或表。`alpha`

但是，当您使用带引号的标识符创建时：

```
CREATE TABLE alpha("age" INTEGER); 
```

oracle 将创建`ALPHA`带有小写列的表`age`（检查`user_tab_columns`以查看此内容）。所以只有以下内容可以选择它：

```
select "age" from alpha;
select "age" from "ALPHA";
select "age" from ALPHA; 
```

并不是：

```
select age from alpha; 
```

例如： [http ://sqlfiddle.com/#!4/3084e/1](http://sqlfiddle.com/#!4/3084e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:28:45.390

它取决于数据库引擎，甚至是如何配置数据库本身或连接的会话。但是，一般情况下，[SQL Server](http://msdn.microsoft.com/en-us/library/ms176027%28v=sql.105%29.aspx)会将`age`and`"age"`视为相同的标识符，而[Oracle](http://docs.oracle.com/cd/E11882_01/server.112/e10592/sql_elements008.htm)会将`age`and`"age"`视为不同的标识符。

关于属性（列），对这些标识符的处理也有很大差异。大多数数据库引擎将允许通过引号（或其他分隔符）来标识属性，并且以与处理表标识符相同的方式。

# java - Java 双重缩放

> ID：15982825
> 
> 赞同：0
> 
> 时间：2013-04-13T00:25:51.283
> 
> 标签：java

如果我在 x - y 范围内有一个双精度，我如何将这个双精度缩放到新范围 a - b

例如从 -1 -> 1 转换为 0 -> 1

谢谢马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:27:53.867

```
/**
 * @param value The incoming value to be converted
 * @param low1  Lower bound of the value's current range
 * @param high1 Upper bound of the value's current range
 * @param low2  Lower bound of the value's target range
 * @param high2 Upper bound of the value's target range
 */
public static final double map(double value, double low1, double high1, double low2, double high2) {

    double diff = value - low1;
    double proportion = diff / (high1 - low1);

    return lerp(low2, high2, proportion);
}

// Linearly interpolate between two values
public static final double lerp(double value1, double value2, double amt) {
    return ((value2 - value1) * amt) + value1;
} 
```

[http://developmentality.wordpress.com/2009/12/15/useful-utility-functions-0-of-n/](http://developmentality.wordpress.com/2009/12/15/useful-utility-functions-0-of-n/)

在你的情况下，你会打电话`map(x, -1, 1, 0, 1)`

# events - 使用局部变量的 JavaFX 事件

> ID：15982828
> 
> 赞同：0
> 
> 时间：2013-04-13T00:26:35.960
> 
> 标签：events, variables, javafx, local, final

我有一个创建 ImageView 的方法，称为 createImageView()，它使用 EventHanlders 来调用各种事件。我希望能够在这种方法中使用局部变量。我通常做的是分配最终变量以在 handle(Event) 方法中使用。

在下面描述的方法中，当我使用 final 时，会出现以下错误：

> 最终局部变量 initY 无法赋值，因为它定义在封闭类型
> 中 最终局部变量 initY 无法赋值，因为它定义在封闭类型
> 中 最终局部变量 dragAnchor 无法赋值，因为它定义在封闭类型中类型

当然，删除 final 会给我这个信息：

> 不能在不同方法中定义的内部类中引用非最终变量 initX

那么我该怎么做才能使这种方法起作用呢？

```
private ImageView createImageView() {
    double initX;
    double initY;
    Point2D dragAnchor;

    imgView.setOnMousePressed(new EventHandler < MouseEvent > () {
        public void handle(MouseEvent me) {
            //when mouse is pressed, store initial position
            initX = imgView.getTranslateX();
            initY = imgView.getTranslateY();
            dragAnchor = new Point2D(me.getSceneX(), me.getSceneY());
            me.consume();
        }
    });

    imgView.setOnMouseDragged(new EventHandler < MouseEvent > () {
        public void handle(MouseEvent me) {
            double dragX = me.getSceneX() - dragAnchor.getX();
            double dragY = me.getSceneY() - dragAnchor.getY();

            double newXPosition = initX + dragX;
            double newYPosition = initY + dragY;
            imgView.setTranslateX(newXPosition);
            imgView.setTranslateY(newYPosition);
            me.consume();
        }
    });

    imgView.setOnMouseEntered(new EventHandler < MouseEvent > () {
        public void handle(MouseEvent event) {
            imgView.setEffect(new Glow(0.5));
            event.consume();
        }
    });

    imgView.setOnMouseExited(new EventHandler < MouseEvent > () {
        public void handle(MouseEvent event) {
            imgView.setEffect(new Glow(0.0));
            event.consume();
        }
    });
    return imgView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:45:03.263

使用 JavaFX 属性而不是原始类型。

例如：

```
final DoubleProperty initX = new SimpleDoubleProperty();
final ObjectProperty<Point2D> dragAnchor = new SimpleObjectProperty<>();
...
// in event handler
initX.set(
  imageView.getTranslateX()
);
dragAnchor.set(
  new Point2D(
    me.getSceneX(), 
    me.getSceneY()
  )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:43:50.167

我删除了 3 个局部变量并将它们设为类变量并且它起作用了。如果有人不介意提供一个快速解释，我将不胜感激。

# css - 居中固定宽度/带显示的液体 css 布局：表格属性和最小/最大宽度

> ID：15982830
> 
> 赞同：0
> 
> 时间：2013-04-13T00:26:54.893
> 
> 标签：css, layout

目标是使此布局在屏幕上居中。我的最小宽度为 600 像素，最大宽度为 1200 像素，因此布局周围可能有很多空白。

我一直在尝试很多不同的方法，但对 display:table 属性以及它在这种情况下的行为方式感到困惑。

这是 jsFiddle 和代码：http: [//jsfiddle.net/7M9rg/6/](http://jsfiddle.net/7M9rg/6/)

非常感谢您对此的任何建议！

HTML：

```
<div id="wrapper">
<div id="header">
</div>

<div id="main">

<div id="side">
<div id="side-stuff">
<ul>
<li><a href="../English/index.html">Home</a></li>
</ul>
</div>
</div>

<div id="content">
<p>Contrary to popular belief, Lorem Ipsum is not simply random text. It has</p>
</div>
</div>

<div id="footer">&copy; 2013 </div>
</div> 
```

CSS：

```
/*css reset*/
html,body {position:relative;margin:0;padding:0;min-height:100%;width:100%;
height:100%;}
div,p,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,
textarea,p,blockquote,th,td, figure {margin:0;padding:0;}
ol,ul {list-style:none;}
li {list-style-type: none;}
* { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing:
border-box; }

html, body {
font-family: Helvetica;
height: 100%; /*important for equal height columns*/
min-width: 650px;
}

#wrapper{
height: 100%; /*important for equal height columns*/
padding-bottom:130px; /*This must equal the height of your header*/}

#header{
height: 130px; /*This must equal padding bottom of wrap*/
display:block;
padding: 5px;
color: #fff;
border: thin solid #ebebeb;
border-radius: 10px;
margin: 10px;
background-image: url(Images/gradient.png);
background-repeat: repeat-x;    
width: 99%;}

#main {
position: relative;
height: 100%; /*important for equal height columns*/
width: 99%;
overflow:auto;
display: table; /* This is needed fo children elements using display table cell*/
table-layout: fixed;
padding-bottom: 50px; /*This needs to match footer height*/
overflow: auto;
margin-left: 10px;}

#side{
background-color: #fff;
width: 150px;
margin: 10px;
vertical-align: top;
padding-top: 20px;
padding-right: 10px;
display: table-cell;
border-radius: 10px;
border: thin solid #CCC;}

#side-stuff{
display: block;
padding-left: 10px;}

#content{
background-color: #fff;
padding: 10px;
display: table-cell; /*To make sibling columns equal in height*/
margin-bottom:10px;
border-radius: 10px;
border: thin solid #CCC;}

#content-stuff{
width: auto;
height: auto;}

#footer{
position: relative;
height: 40px;
margin-top: -40px; /* margin-top is negative value of height */
margin-left: 10px;
clear: both; /* Use if floating elements */
color: #999;
width: 99%;
border: thin solid #ebebeb;
border-radius: 10px;
background-image: url(Images/footer_gradient.png);
background-repeat: repeat-x;
background-position: bottom;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:35:47.640

将此添加到您的#wrapper CSS：

```
max-width: 1200px;
margin: 0 auto; 
```

[http://jsfiddle.net/tshz6/](http://jsfiddle.net/tshz6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T00:42:11.987

您需要为您的`<body>`or`#wrapper`元素指定宽度。`min-width`只指定它可以缩小到的*最小*`width`宽度，并且`max-width`设置为`auto`，这是所有可用的宽度（在本例中为屏幕宽度）。尝试将您的`html, body`规则更新为以下

```
html, body {
  font-family: Helvetica;
  height: 100%;
  margin: 0 auto;
  min-width: 650px;
  max-width: 1200px;
} 
```

# c - 精确的多重 scanf 输入

> ID：15982831
> 
> 赞同：1
> 
> 时间：2013-04-13T00:27:14.380
> 
> 标签：c, input, scanf

我想知道如何使用简单的命令（例如 while、if 和数组）在一行中基本上输入 5 个数字（特别是整数）。例如：如果我输入 5 个用空格分隔的数字，1 2 3 4 5 程序将打印 1 2 3 4 5 但是，如果我输入小于 5 或​​大于 5，1 2 3 4 程序将打印无效输入。到目前为止我有

```
#include<stdio.h>
int main(int argc,char *argv[]){
    int array[5], numbers;
    numbers = 0;
    while (numbers < 5) {
        scanf("%d", &array[numbers]);
        numbers  = numbers + 1
    }
    printf("%d %d %d %d %d\n", array[0], array[1], array[2], array[3], array[4]);
    return 0;
} 
```

如果我们为所有数组单元分配 9999（程序未使用的数字）会怎样。我们创建一个循环来检查每个数组是否已更改为一个新值，如果它仍然是 9999，它将是无效的。但是这里的问题仍然存在，我们如何只抓住一行不同数量的输入并继续前进。例如输入 2 3 输出 2 3 9999 9999 9999 或输入 2 3 4 输出 2 3 4 9999 9999

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:45:44.037

如果你想强制输入在一行，首先读取输入然后解析它：

```
char line[100];
fgets(line, 100, stdin);
char x[100];
int n = sscanf(line, "%d %d %d %d %d %s", array, array+1, array+2, array+3, array+4, x)
if (n != 5)
    printf("invalid input\n");
else
    printf("read 5 numbers\n"); 
```

添加 以检测是否读取了`x`太多内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T10:21:52.153

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int intRead(int array[], int size){
    char buff[128];
    int status=!0;//status == 0, Something happened!

    printf("\ninput %d integer:", size);
    while(fgets(buff, sizeof(buff), stdin)){
        int count=0;
        char*p;

        for(p=buff;NULL!=(p=strtok(p, " \t\n"));p=NULL){
            char *ck;
            int i;
            i=(int)strtol(p, &ck, 0);
            if(*ck){
                fprintf(stderr, "invalid input:can't parse of int <<%s>>\n", p);
                status=0;
                continue;
            }
            if(count < size){
                array[count++]=i;
                continue;
            }
            count = size + 1;//more than
            break;
        }
        if(count < size)
            fprintf(stderr, "invalid input: less than %d\n", size);
        else if(count == size) return status;
        if(count > size)
            fprintf(stderr, "invalid input: more than %d\n", size);
        printf("\ninput %d integer:", size);
        status = !0;
    }
    return 0;
}

int main(int argc,char *argv[]){
    int array[5];

    intRead(array, 5);//or: while(!intRead(array, 5));
    printf("%d %d %d %d %d\n", array[0], array[1], array[2], array[3], array[4]);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:42:50.760

**编辑**

要输入 5 个数字，您可以使用

```
int a[5];
char x;

scanf("%d %d %d %d %d", &a[0], &a[1], &a[2], &a[3], &a[4]);
while(scanf("%*[^\n]%*c")) {
    scanf("%c", &x); // after 5 ints were loaded, get rid of rest of the elements untill new line symbol
}
printf("%d %d %d %d %d\n\n", a[0], a[1], a[2], a[3], a[4]); 
```

它会忽略 5 个数字之后的所有内容（实际上，它会一直写入到`x`出现换行符为止），但在这种情况下无法轻松设置要读取的数字数量。

您只需要注意，如果您的排队时间少于 5`int`秒，它将不起作用。

# .net - 高级 XAML 数据绑定教程

> ID：15982834
> 
> 赞同：2
> 
> 时间：2013-04-13T00:27:19.127
> 
> 标签：.net, wpf, xaml, data-binding

有人可以推荐一个很好的教程或视频来解释更高级的 XAML 数据绑定语法吗？我理解并使用我的 View 和 ViewModel 类之间的简单绑定，例如：

```
Text="{Binding Name}" 
```

但有时我在其他教程和博客文章中看到这样的绑定，我很难理解。

```
ToolTip="{Binding Path=AdornedElement.ToolTip,RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type Adorner}}}" 
```

通常我可以通过复制代码来让事情正常进行，但我真的很想了解发生了什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T01:03:03.480

对于一个很好的教程`DataBinding` `Joel Johnson`写了一个很棒的关于`CodeProject`

[http://www.codeproject.com/Articles/29054/WPF-Data-Binding-Part-1](http://www.codeproject.com/Articles/29054/WPF-Data-Binding-Part-1)

MSDN也有一个很棒的教程

[http://msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

# facebook - 是否可以将 Canvas 应用程序添加到 Facebook（Place）位置？

> ID：15982837
> 
> 赞同：0
> 
> 时间：2013-04-13T00:27:47.900
> 
> 标签：facebook, facebook-canvas

是否可以将 Canvas 应用程序添加到 Facebook（Place）位置？

使用以下内容将它们添加到标准页面很容易：

```
https://www.facebook.com/dialog/pagetab?app_id=ID_OF_APP&display=popup&next=APP_URL 
```

但是可以将画布应用程序添加到位置吗？有“洞”可以放入它们，但它们不会出现在`add-an-app`上面链接触发的对话框中。

要明确的位置是您从左侧“位置”下的页面管理菜单中看到的内容。每个位置都有自己的页面`count`，例如 和`Timeline`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:58:57.973

想通了，好痛。在这里列出了解决方案：http: [//circlical.com/blog/2013/4/15/adding-facebook-applications-canvas-to-location-pages](http://circlical.com/blog/2013/4/15/adding-facebook-applications-canvas-to-location-pages)

# php - MySQL 范围日期从第一个日期结果到 x 天

> ID：15982838
> 
> 赞同：1
> 
> 时间：2013-04-13T00:27:52.757
> 
> 标签：php, mysql, date

抱歉，如果问题标题有点模糊，我不确定最好的措辞方式。

我查询中的列是 id 和 date_added

我想从我的表中获得结果，并且我有一个“日期范围”。

假设日期范围是 5 因此，如果第一行的日期为“2013-04-01”，那么它将显示从“2012-04-01”到“2012-04-06”的所有结果。问题是第一次约会经常变化。

这是我现在的查询，但无法正常工作

```
SELECT oh.date_added AS date_shipped, o.date_added FROM oc_order o , oc_order_history oh WHERE o.order_id = oh.order_id AND oh.order_status_id = 3 AND oh.date_added BETWEEN oh.date_added AND DATE_ADD(oh.date_added, INTERVAL 1 DAY) 
```

我希望这是有道理的。

谢谢，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:33:27.990

请参阅[DATE_ADD](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add)函数

```
SELECT * FROM orders 
WHERE date BETWEEN {date_added} AND DATE_ADD({date_added}, INTERVAL 5 DAY) 
```

# oracle11g - Oracle 外部表日期字段 - 适用于一个数据库而不是另一个数据库

> ID：15982842
> 
> 赞同：0
> 
> 时间：2013-04-13T00:27:57.567
> 
> 标签：oracle11g, oracle11gr2, external-tables

这是一个疯狂的例子：相同的外部表定义在一个数据库中工作正常，但在另一个数据库中失败。不是架构 - 数据库。两个数据库，都在同一个操作系统，不同的服务器上。此外，它在第二个日期字段上失败，尽管两者的定义相同。两台服务器上的 NLS 设置相同，我认为无论如何日期掩码都应该覆盖它。这是定义：

```
-- access parameters
-- http://docs.oracle.com/cd/E11882_01/server.112/e16536/et_params.htm

CREATE TABLE ext_tab (
  FIELD1                  VARCHAR2(30),
  FIELD2_DATE             DATE,
  FIELD3                  VARCHAR2(4),
  FIELD4                  VARCHAR2(6),
  FIELD5_DATE             DATE
)
ORGANIZATION EXTERNAL
  ( TYPE ORACLE_LOADER
    DEFAULT DIRECTORY DIR_DATADIR
    ACCESS PARAMETERS
      ( RECORDS DELIMITED BY NEWLINE
        NOBADFILE
        NODISCARDFILE
        LOGFILE 'LOGFILE_LOG'
        FIELDS
          TERMINATED BY ','
          OPTIONALLY ENCLOSED BY '"' and '"'
          LRTRIM
          MISSING FIELD VALUES ARE NULL
          REJECT ROWS WITH ALL NULL FIELDS
          (
  FIELD1                  CHAR(30),
  FIELD2_DATE             CHAR(8)   date_format DATE mask  'YYYYMMDD',
  FIELD3                  CHAR(4),
  FIELD4                  CHAR(6),
  FIELD5_DATE             CHAR(8)   date_format DATE mask  'YYYYMMDD'
          )
      )
    LOCATION ('Sample_Input_csv.csv')
  )
REJECT LIMIT UNLIMITED
NOPARALLEL; 
```

这是示例数据：

```
TOTEA01217611,20121122,TOTE,847759,20121122 
```

并且，日志错误：

```
KUP-04021: field formatting error for field FIELD5_DATE 
```

KUP-04026：数据类型的字段太长

有人对这种疯狂有答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:47:36.293

显然，输入文件以某种方式损坏，可能以二进制而不是 ASCII 加载。

我们所做的： - 将另一个文件从第一台服务器拉到第二台服务器并进行测试 - 这个工作正常！- 删除第二个文件的内容，并将第一个文件中的确切文本直接剪切并粘贴到第二个文件中 - 再次运行测试 - 成功了！

据我们所知，这两个文件之间的一切都是相同的。为了排除与文件名有关的情况，我们将该文件重命名为原始文件名，但它仍然有效。然后我们重新对原始文件进行了 FTP 处理，这次它也能正常工作。所以，再一次，我们唯一能想到的是文件中有一些非打印字符。

我们没有可供检查的十六进制编辑器，但对于遇到同样情况的任何人，以十六进制格式查看内容将是确保文件中没有异常的一种方法。

# c - 在 c 中将条件语句写为 (value == variable) 而不是 (variable == value)

> ID：15982844
> 
> 赞同：0
> 
> 时间：2013-04-13T00:28:04.270
> 
> 标签：c, coding-style

我观察到很多程序员在编写条件语句时都会做这样的事情

```
if(NULL == Ptr){

//Some code

} 
```

代替`if(Ptr == NULL){ //some code ...`

这种编码实践背后的原因是什么？我相信它无论如何都不会改变语句的含义，那么为什么要这样写呢？

如果我犯了错误，请指出我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:30:48.033

这样做的通常原因是，如果代码被错误地写成

```
if(NULL = Ptr){

//Some code

} 
```

这将是一个编译错误，而不仅仅是一个语义错误。

正如 ouah 和 Bo Persson 所指出的，这在很大程度上是不必要的，因为现代编译器已经重新集成了过去被委托给单独`lint`程序的大部分语义检查。

`gcc -Wall -Wextra`会告诉你这条线看起来很可疑：

```
test.c:3:2: warning: suggest parentheses around assignment used as truth value 
```

我不像 ouah 那样认为它在*语义上是错误*的，比较是可交换的（即使通过减法实现并测试非零）。但它确实使代码的*可读性*降低，如果你打算大声朗读它，也许是给一个审查组。

```
If NULL is-equal-to pointer then 
    Block comment (some code) end-Block 
```

这样读起来很有趣。然而

```
If pointer is-equal-to NULL ... 
```

耳朵更顺滑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T00:36:38.380

```
if(NULL == Ptr) 
```

相当于

```
if(Ptr == NULL) 
```

因为`==`运算符是可交换的。`NULL = Ptr`这种形式的想法是如果程序员在他的意思时写错了，就会触发编译器错误`NULL == Ptr`。

这种方法的问题是恕我直言，它使代码的可读性降低，并且在语义上不正确，因为您想要比较`Ptr`而`NULL`不是相反。

此外，任何启用警告的体面编译器都会触发带有`if (Ptr = NULL)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:36:34.200

它做同样的事情，但我觉得它令人困惑，因为要保持一致，你还需要写

```
 if (0 > a) 
```

代替

```
 if (a < 0) 
```

这通常令人困惑，因为有文档或其他内容描述“a 必须小于零”，而不是“零必须大于 a”。

# c++ - 将一组实例实现为不同类型的好方法是什么

> ID：15982845
> 
> 赞同：0
> 
> 时间：2013-04-13T00:28:29.910
> 
> 标签：c++, c++11

我正在为自己编写一个数学库，大量使用模板，尤其是可变参数模板，并希望实现一个 Sum 仿函数，它可以采用任意数量的不同类型的仿函数并存储它们。我也想避免任何动态内存分配（作为我自己的练习，我一般不反对动态内存分配）。

我找不到任何帮助的问题是如何将类实例存储到不同的类型。就像是：

```
 any_array<Types...> a = {Type1(), Type2(), Type3(), ...}; 
```

通过某种方式迭代`a`获取每个值的正确类型。使用 boost 不会是一个问题，因为我已经在其他地方使用它。

我想出了一个似乎运作良好的解决方案，但我想看看还有什么其他方法可以解决这个问题。

我对此的解决方案是一个基本上看起来像的类（一个完全编译的实现和示例可以在下面找到）：

```
 template <class ... Functions>
    class Sum
    {
        char functions[num_bytes<Functions...>::value];

        template <class Next, class ... Others>
        void SetFunctions(int offset, Next f, Others ... others)
        {
            Next * p = (Next*)(functions + offset);
            *p = f;
            SetFunctions(offset + sizeof(Next), others...);
        }

        template <class Last>
        void SetFunctions(int offset, Last f)
        {
            Last * p = (Last*)(functions + offset);
            *p = f;
        }
    public:
        Sum(Functions ... funcs)
        {
             SetFunctions(0, funcs...);
        }
    }; 
```

我喜欢这个解决方案，因为它应该很容易推广到我想要的任何类型的累积函子，并且下面的实现对用户是隐藏的。我不确定将原始字节存储到这些对象中，但想不出这本身有什么问题。这被普遍化的可能性使我怀疑它已经在某个地方实施，但我在自己的搜索中找不到任何东西。

FWIW 这是我实现的完整示例：

```
 #include <functional>
    #include <boost/mpl/vector.hpp>
    #include <boost/mpl/sizeof.hpp>
    #include <boost/mpl/accumulate.hpp>
    #include <boost/mpl/plus.hpp>
    #include <boost/mpl/placeholders.hpp>
    #include <boost/mpl/int.hpp>
    #include <iostream>
    #include <boost/utility/enable_if.hpp>

    using namespace boost::mpl::placeholders;
    using namespace boost::mpl;

    //Returns the sum of the number of bytes each class takes up.
    //This is used as the size of the array we need to create.
    template <class ... Args>
    struct num_bytes : 
        boost::mpl::accumulate<vector<Args...>,
                               int_<0>,
                               plus<_1, sizeof_<_2> > >::type
    {
    };

    template <class ... Args>
    struct empty_list
    {
        typedef empty_list type;
        static const bool value = sizeof...(Args) == 0;
    };

    template <class ... Functions>
    class Sum
    {
    public:
        Sum(Functions ... functions)
        {
            SetFunctions(0, functions...);
        }

        inline double operator()(double x)
        {
            return evaluate<Functions...>(0, x);
        }
    private:

        template <class Next, class ... Others>
        inline void SetFunctions(int offset, Next f, Others ... funcs)
        {
            Next * p = (Next*)(functions + offset);
            *p = f;
            SetFunctions(offset + sizeof(Next), funcs...);
        }

        template <class Last>
        inline void SetFunctions(int offset, Last f)
        {
            Last * p = (Last*)(functions + offset);
            *p = f;
        }

        //Because we are not passing our function objects down, we
        //have to manually disable this function overload to end the recursive
        //instantiations of this function.
        template <class Next, class ... Others>
        inline double evaluate(int offset, double x, 
                               typename boost::enable_if_c<!empty_list<Others...>::value>::type * dummy = NULL)
        {
            Next * p = (Next*)(functions + offset);
            return evaluate<Others...>(offset + sizeof(Next), x) + (*p)(x);
        }

        template <class Last>
        inline double evaluate(int offset, double x)
        {
            Last * p = (Last*)(functions+offset);
            return (*p)(x);
        }

        char functions[num_bytes<Functions...>::value];
    };

    //Function to help initialize a Sum object
    template <class ... Functions>
    Sum<Functions...> GetSum(Functions ... functions)
    {
        return Sum<Functions...>(functions...);
    }

    //return function object of the form f(x) = x + n.
    std::binder2nd<std::plus<int> > GetTestFunction(int n)
    {
        return std::bind2nd(std::plus<int>(), n);
    }

    int main()
    {
        auto sum = GetSum(GetTestFunction(0),
                          GetTestFunction(1),
                          GetTestFunction(2));
        std::cout << sum(0) << ' ' << sum(1) << std::endl;
        return 0;
    } 
```

哪个输出：`3 6`运行时。

注意：我无法使用 gcc-4.6 进行编译，只有 gcc-4.7，我使用了命令行：g++-4.7 -std=c++0x test_sum.cpp -Wall

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T07:28:38.583

在我看来，您需要的是[`std::tuple`](http://en.cppreference.com/w/cpp/utility/tuple)：

```
template <class ... Functions>
class Sum
{
    std::tuple<Functions...> functions;

public:
    Sum(Functions&& ... funcs)
      : functions( std::forward< Functions >( funcs )... )
    {
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:51:25.103

我不知道这是否是一个好方法，但它是一种方法：

```
#define BOOST_RESULT_OF_USE_DECLTYPE
#include <functional>
#include <iostream>
#include <boost/fusion/include/vector.hpp>
#include <boost/fusion/include/fold.hpp>
#include <boost/phoenix.hpp>

namespace fusion=boost::fusion;
namespace phx=boost::phoenix;

template <class ... Functions>
class Sum
{
public:
    Sum(Functions ... functions):functions_(functions...)
    {

    }

    inline double operator()(double x)
    {
        return fusion::fold(functions_,0,eval(x));
    }
private:

    template <typename Arg>
    struct evaluate
    {
        evaluate(const Arg& arg):arg_(arg){}
        template <typename State, typename Func>
        State operator()(State const& current_state, const Func& f)
        {
           return current_state + f(arg_);
        }
        Arg arg_;
    };

    template <typename Arg>
    evaluate<Arg> eval(const Arg& arg)
    {
       return evaluate<Arg>(arg);
    }

    fusion::vector<Functions...> functions_;
};

//Function to help initialize a Sum object
template <class ... Functions>
Sum<Functions...> GetSum(Functions ... functions)
{
    return Sum<Functions...>(functions...);
}

//return function object of the form f(x) = x + n.
std::binder2nd<std::plus<int> > GetTestFunction(int n)
{
    return std::bind2nd(std::plus<int>(), n);
}

struct plus_two
{
   double operator()(double arg) const
   {
      return arg+2;
   }
};

int main()
{
    auto sum = GetSum(GetTestFunction(0),
                      phx::arg_names::_1+1,
                      plus_two());
    std::cout << sum(0) << ' ' << sum(1) << std::endl;
    return 0;
} 
```

# iphone - ObjectiveC UIImage 更新视图阻塞

> ID：15982856
> 
> 赞同：0
> 
> 时间：2013-04-13T00:29:40.590
> 
> 标签：iphone, objective-c, xcode, uiimageview

我有最奇怪的错误。我在情节提要中有两个 UIImageView，一个大的，我们称之为 A，一个小的，B。我在视图控制器中为小一个的位置设置动画，效果很好。

但是：当我尝试替换 A 的背景图像时，突然间，B 捕捉到它在情节提要中的原始位置并且它不会让步。事情是这样的：我进行了测试，我注意到如果 A 不超过某个宽度，B 可以移动，并且不会弹回。我尝试在延迟后更改 A 的图像，在视图控制器中使用 [self performSelector:] 超时，但就在我更改图像时，B 突然回到它在情节提要中的位置。我不知道这怎么可能，尽管它对我来说确实像是一个记忆问题。

这是我的动画代码：

```
CGRect newFrame = self.B.frame;
newFrame.origin.x = newX; // defined earlier

[UIView beginAnimations:nil context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
[UIView setAnimationDuration:.1];

[[[UIAlertView alloc] initWithTitle:@"Moving" message:[NSString stringWithFormat:@"Moving from %g to %d!", self.B.frame.origin.x, newX] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil] show];

self.B.frame = newFrame;

[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:36:38.780

当 A 较大时，您在两个图像视图之间存在无意的约束。

# heroku - 在配置网络解决方案和 Heroku 时不知所措

> ID：15982861
> 
> 赞同：2
> 
> 时间：2013-04-13T00:30:26.273
> 
> 标签：heroku

我已经阅读了很多关于这个主题的帖子，但仍然没有任何工作。目前：

我已经在 Network Solutions 注册了我的域 (intertexti.com)。

NS 创建了我无法删除的 A 记录。

当我尝试使用别名“www”创建 C 记录时，它抱怨 A 记录已经存在。

在某处我读到需要网络转发的东西，所以我注册了网络转发，将 A 记录转发到 proxy.heroku.com

我还在 Heroku 中添加了我的自定义域，包括“intertext.com”和“www.intertexti.com”

该应用程序本身可以在以下位置找到：radiant-basin-3170.herokuapp.com

因此，我正在寻找的是关于我需要对网络解决方案 A 和 C 记录执行哪些操作以使其正常工作的清晰简洁的说明。我认为此时 Heroku 设置正确。

在此先感谢，我意识到以前有人问过这个问题，但我尝试过的建议都没有奏效。

马克

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-22T19:04:31.860

我意识到这是一篇旧帖子，您现在可能已经找到了一个可行的解决方案。鉴于缺乏 NS 和 Heroku 组合的文档，我想记录对我有用的东西。

我的目标是允许用户输入裸根域或 www 三级名称（例如：intertext.com 和 www.intertext.com）并访问 heroku 项目站点（例如“radiant-basin-3170.herokuapp. com”）。

各种选择似乎是合理的。我在 dnsimple.com 上找到了一个有用的页面，它提供了有关“differences-between-a-cname-alias-url”的一些背景知识。

具体解决办法是：

在 Heroku 方面，我按照以下说明操作：[https ://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

然后在 NS 上阅读此页面，即使它是针对博客的：http: [//www.networksolutions.com/support/how-to-forward-your-network-solutions-domain-name-to-a-free-blog-服务/](http://www.networksolutions.com/support/how-to-forward-your-network-solutions-domain-name-to-a-free-blog-service/)

有了这样的背景，我在 NS 做了这个：

1.  通过首页右上角的“账户管理”按钮登录NS账户。
2.  为域选择“我的域名”，然后选择“编辑高级 DNS 记录”。
3.  选择“编辑 A 记录”。
4.  将@(none) 记录设置为 205.178.189.129 选中 www 和 *(All Others) 行的删除框。选择表格底部的“继续”。
5.  选择“编辑 CNAME 记录”
6.  创建一条记录，将“别名框”设置为 www 将 TTL 设置为 7200 并选择“其他主机”按钮。在“其他主机”框中输入 heroku 项目地址（例如 radiant-basin-3170.herokuapp.com。）注意结束期间，这很重要。选择“继续”。
7.  最初，该页面并未反映所做的编辑。我单击“返回域详细信息”并重新单击“编辑高级 DNS 记录”。我不得不重复步骤 2-7 几次，直到记录显示 A 记录：www 和 * 为空白，@ 设置为 205.178.189.129 和 www 的 CNAME 作为 Heroku 项目地址。

第 4 步的注意事项：IP 地址 (205.178.189.129) 是 NS“建设中”页面。它来自 NS 博客转发链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T02:11:29.887

我设法让我的网络解决方案 dns 解析到我的 heroku 应用程序。并不是说这是“方法”，但这就是我所做的。

1.  [在 zerigo https://www.zerigo.com/](https://www.zerigo.com/)注册一个免费帐户

2.  在网络解决方案中单击编辑 DNS 并删除两个网络解决方案条目，我的是，

    NS53.WORLDNIC.COM NS54.WORLDNIC.COM

我删除了这些，然后添加了 Zerigo 服务器

```
A.NS.ZERIGO.NET
B.NS.ZERIGO.NET
C.NS.ZERIGO.NET
D.NS.ZERIGO.NET
E.NS.ZERIGO.NET 
```

第 3 步。在 Heroku 中转到附加组件[https://addons.heroku.com/zerigo_dns](https://addons.heroku.com/zerigo_dns)

第 4 步。单击 Zerigo Basic，然后选择您的 heroku 应用程序域并单击“免费添加 Zerigo Basic”*

第 5 步。在 Heroku 应用程序设置域中添加网络解决方案域，我添加了两个条目 mydomain.com www.mydomain.com（用 mydomain 替换您的域的名称）

*   heroku 开发中心文章“zerigo_dns#configure-dns-servers”中描述了相同的过程 - 尽管他们提到使用命令行安装插件并将域添加到 heroku。我没有按照“管理 MX 和其他主机记录”下的步骤操作，因为我拥有的域没有邮件。如果步骤 3 对您不起作用，请尝试使用命令行添加添加。

# android - Android忽略“多重定义”错误GCC编译器

> ID：15982866
> 
> 赞同：1
> 
> 时间：2013-04-13T00:31:14.217
> 
> 标签：android, c, android-ndk, makefile

我正在尝试为 Android NDK 编译一些代码，我看到了......

> 'W_InitCache' 的多重定义

果然有两个类导入相同的标头并定义相同的方式。然而，奇怪的是现有的分支似乎编译得很好。是否有 LD_FLAG （这甚至是一件事吗？）或者我可以添加到 Android.mk 文件中以忽略这些错误？

# asp.net-mvc-3 - 在 MVC4 MVC3 ValidationSummary() div 不再自动隐藏

> ID：15982869
> 
> 赞同：0
> 
> 时间：2013-04-13T00:32:39.277
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我们升级到 MVC 4 并通过此线程了解[@Html.ValidationSummary 是否适用于 MVC3 或 MVC4 中的客户端验证？](https://stackoverflow.com/questions/9210197/does-html-validationsummary-work-for-client-side-validation-in-mvc3-or-mvc4)ValidationSummary 必须放在表单内，而不是放在它之前。验证摘要再次起作用，除了在 MVC 3 下，div“自动”不存在，直到出现错误。现在 div 是可见的并且就在我们的脸上。我们可以将它设置为 display:none，但是当我们想要显示它时，似乎没有钩子可以显示它。

```
<div class="errormessagebox" >
    @Html.ValidationSummary(@OurHelpers.VALIDATION_HEADER)
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T07:36:00.907

我像这样使用它，除非出现错误，否则我什么也看不到。

```
@using (Html.BeginForm("LogIn", "Account", new { area = "" }, FormMethod.Post, null))
    {       
        @Html.ValidationSummary(true)   
      //other elements
    } 
```

也许您已经覆盖了您网站中的一些 ul 或 li 元素 css？尝试此代码并且不起作用检查您为您的网站拥有的 css。

# dynamics-crm-2011 - 如何以特权用户身份运行 CRM 2011 自定义工作流活动？

> ID：15982883
> 
> 赞同：2
> 
> 时间：2013-04-13T00:35:51.423
> 
> 标签：dynamics-crm-2011, dynamics-crm

我需要能够让一个用户根据需要临时镜像另一个用户。镜像用户应获得与目标用户相同的业务部门、团队和角色。现在它是手动完成的，但它很痛苦。我编写了一个自定义工作流活动来完成它，如果我以系统管理员身份运行它并选择一个镜像用户和目标用户，它就可以工作。

但最终目标是能够允许某些用户自己运行对话。如果我尝试以自己的镜像用户身份运行它，我会收到一条错误消息，指出我没有分配角色的权限，这是有道理的，因为工作流会删除我的角色，然后尝试为我分配目标用户的角色。

我希望工作流活动以特权用户身份运行，但到目前为止还没有任何运气。我试过创建`IOrganizationService`这样的：

```
var context = executionContext.GetExtension<IWorkflowContext>();
var serviceFactory = executionContext.GetExtension<IOrganizationServiceFactory>();
var service = serviceFactory.CreateOrganizationService(null); 
```

根据`CreateOrganizationService`使用`null`as 参数调用的文档应该强制系统用户的用户，但它似乎仍然作为调用用户运行。

我还尝试调用`CreateOrganizationService`并传递具有系统管理员角色的不同用户的 Guid，但得到了相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T05:30:55.007

工作流具有特殊条件，旨在忽略您传递给 CreateOrganizationService 的 guid。

我从这篇[文章](http://gonzaloruizcrm.blogspot.pt/2011/05/processesworkflow-ownership-faqs.html)中摘录下一段：

> 对于自动工作流案例，工作流的所有者也是激活它并选择触发机制和工作流步骤的人，因此如果工作流在该用户的上下文下执行是可以的。对于按需案例，用户明确要求工作流代表他执行一些操作，以便用户完全了解工作流定义并将执行；因此，在该用户的上下文而不是工作流所有者（他们可能不知道用户请求按需执行）下执行工作流是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T09:52:35.097

1.  自定义工作流活动可以转换为注册插件以在 CRM 服务或管理员的上下文中运行
2.  工作流程可以自动触发，而不是手动触发
    *   如果最终用户明确启动工作流，它将在他们的用户上下文中运行
    *   对话框始终在初始用户上下文中运行
    *   由事件触发而不是由用户显式启动的工作流将在启动并拥有该工作流的用户的上下文中运行 - 在这种情况下是管理员
    *   对话框或自定义功能区按钮可以更改您的自定义工作流活动已注册以在更改时执行的记录上的某些内容（自定义字段）

# javascript - 通过 jquery 在页面上移动跨度更高

> ID：15982884
> 
> 赞同：0
> 
> 时间：2013-04-13T00:35:59.313
> 
> 标签：javascript, jquery

我正在使用一个[简单的 jquery pullquote](http://blue-anvil.com/archives/easy-jquery-pull-quotes/)插件，它工作得非常好。我想知道是否可以使用 jquery 在页面中将跨度移动得更高？我希望 pullquote 整齐地出现在页面顶部，而不是直接向右浮动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:50:19.547

1.) 只需在插件的 css 文件中编辑浮动/边距 css 属性。甚至可能添加一个相同的 blockquote.pullquote css 类，但没有浮动属性 ex。blockquote.pullquote.no_float

2.) 编辑您的模板，并使用插件所需的正确方法将引用放置在您希望显示的任何位置。

# php - 打印 preg_match_all 中的元素

> ID：15982885
> 
> 赞同：0
> 
> 时间：2013-04-13T00:36:14.920
> 
> 标签：php, html, html-parsing

```
$sourcestring=$html;
preg_match_all('/<font color=\"#FFFFFF\"><b>(.*?)<\/b>/',$sourcestring,$match);
//echo "<pre>".print_r($match,true);

echo($match[0][0]); 
```

我想知道如何通过循环或循环循环`$match`变量 32 次？我知道如何打印出元素的唯一方法是手动输入：`for``while`

```
echo $match([0][1]); .. /// echo  $match([0][1]); 
```

有人可以向我解释如何遍历`preg_match_all`正在制作的数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T00:39:12.420

是的。[查看工作示例](http://3v4l.org/iKfhi)

```
<?php
$sourcestring="A string1 A string2 A string3 Of string4 to match";
preg_match_all('/string.{1}/',$sourcestring,$match);

$myMatches = "";

foreach($match[0] as $thisMatch){
   echo "$thisMatch\n";
   $myMatches .= "$thisMatch <br\>";
}

echo $myMatches; 
```

# svn - 我无法访问 Bitnami Redmine 的 Subversion

> ID：15982886
> 
> 赞同：0
> 
> 时间：2013-04-13T00:36:15.810
> 
> 标签：svn, redmine, bitnami

我在 Windows 中安装了 Bitnami Redmine。它安装了一个内置的 Subversion。

但我无法访问它，也找不到我需要的 svnadmin 命令。

例如，如果我运行`svnadmin create project1`，它只会关闭而不打印任何文本。我想该项目已创建，但我不知道它的 URL 是什么，因此我可以使用 Tortoise 进行结帐。

另外，我用什么命令来查看现有项目？我怎样才能看到他们正确的 URL？

Comodo 说 svnserve.exe 正在运行并侦听端口 3691。

很抱歉这些基本问题。我习惯了 VisualSVN，但它不支持 svn:// 协议，我无法让 Redmine 使用 http:// 或 file:/// 从中结帐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:01:21.333

BitNami Redmine 提供了一个已经配置好的 Subversion 服务器。它是可选的，您可以使用它，也可以使用您自己的 Subversion 存储库。有关如何在[http://wiki.bitnami.com/Components/Subversion#How_to_start_the_Subversion_server.3a_svnserver.3f](http://wiki.bitnami.com/Components/Subversion#How_to_start_the_Subversion_server.3a_svnserver.3f)创建 Subversion 存储库的更多信息。您还可以配置 Apache 以通过 http 显示此存储库。

# java - 每当我执行我的代码时，它都会给我看起来像内存地址和其他无意义的东西

> ID：15982895
> 
> 赞同：-1
> 
> 时间：2013-04-13T00:36:40.413
> 
> 标签：java, arrays

每当我用eclipse在java中执行我的代码时（代码如下）

```
import java.util.*;
import java.io.*;

public class PracticeOne {

public static void main(String[] args) throws FileNotFoundException {

    Scanner scn = new Scanner (System.in);

    int first = scn.nextInt();
    scn.nextLine();

    for(int i =0; i<first; i++){
        String preSplt = scn.next();
        String postSplt[] = preSplt.split("--");
        System.out.println(postSplt);
    }
  }

} 
```

一旦我输入

```
3
Honda element--19--17950 
Ford Edge--19--18130 
```

它给了我这个

```
[Ljava.lang.String;@c0fa1f5
[Ljava.lang.String;@4e15f6af 
```

在“Honda element”和“Ford Edge”之间按下回车键，然后它吐出

```
[Ljava.lang.String;@3f68336 
```

在“Ford Edge”之后，为了记录，它不会拆分我给它的输入，也不会在它吐出最后一点后做任何事情，尽管这可能是由于代码无效（我还没有完成这个程序）我认为它可能有点帮助

我发现汇编语言非常迷人，但我想知道是什么原因造成的，以及它是否与汇编有关

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:38:51.023

这里的问题是您试图打印数组对象本身而不是其内容。使用[`Arrays.toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5b%5d%29)：

```
System.out.println(Arrays.toString(postSplt)); 
```

# python-2.7 - Pygame中的垂直滚动背景

> ID：15982906
> 
> 赞同：0
> 
> 时间：2013-04-13T00:38:18.960
> 
> 标签：python-2.7, pygame, vertical-scrolling

我正在尝试让我的背景图像列表在它们到达我的屏幕底部后立即重新定位......

我有一个相机对象，它将其 self.state 更新为我移动球的位置。

这是我的背景课程：

```
class Background(pygame.sprite.Sprite):
def __init__(self, x, y):
    pygame.sprite.Sprite.__init__(self)
    self.image = pygame.image.load('images/clouds.jpg').convert()
    self.x = x
    self.y = y
    self.rect = self.image.get_rect()
    self.rect.left, self.rect.top = self.x, self.y   

def update(self,cam):
    self.rect.left = self.x + (0.2*cam.state.left)
    self.rect.top = self.y + (0.2*cam.state.top) 
```

0.2* 是为了让它比我的实际相机移动速度慢。

这是我在大主循环之前构建 bg 图像的方法：

```
all_backgrounds = pygame.sprite.Group()
#building bg images
for i in xrange((WIDTH+BG_WIDTH)/BG_WIDTH):
    for j in xrange((HEIGHT+BG_HEIGHT)/BG_HEIGHT):
        all_backgrounds.add(Background(BG_WIDTH*i,BG_HEIGHT*j)) 
```

然后在我的主循环中：

```
......
all_backgrounds.update(cam)
......
all_backgrounds.draw(screen) 
```

我正在寻找有关如何使其顺利运行的好建议。我尝试在我的 Background.update() 中使用 if 语句，但由于 Int、float 转换，它使它变得滞后并且出现撕裂和重叠线的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:54:50.423

您可以尝试一下： [PyParallax](https://github.com/forslund/pyParallax)看起来可以满足您的需求以及更多功能。

# android - Android 将像素转换为英寸、毫米

> ID：15982908
> 
> 赞同：3
> 
> 时间：2013-04-13T00:38:38.297
> 
> 标签：android, pixel, dpi, ppi, inches

我想准确地将像素转换为英寸和毫米。我曾尝试使用所有属性，`displayMetrics`但未能在移动设备中获得确切的物理单位。我也尝试过使用`TypedValue.applyDimension`，但由于文档没有太多解释性仍然很不幸..任何人都可以建议我，甚至给我一个小提示..

提前致谢

编辑这是我尝试使用 displayMetrics 的代码

`displayMetrics = new DisplayMetrics();` `getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);`

当我试图通过使用获得每英寸像素 数时，`displayMetrics.ydpi`或者`displayMetrics.xdpi` 我没有得到确切的值，因为我通过在画布上画一条这么长的线并用实际的标尺检查它来检查它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-10T23:06:15.717

尝试这个

```
DisplayMetrics mDisplayMetric = this.getApplicationContext().getResources().getDisplayMetrics();
float anyPixel = View.getMeasuredWidth(); //you can get Pixel from anywhere, it is a example from view
float widthInches =  TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_IN, size.x, mDisplayMetric); 
```

# javascript - Javascript：其他异步函数中的异步嵌套函数给出了意想不到的结果

> ID：15982918
> 
> 赞同：0
> 
> 时间：2013-04-13T00:39:47.587
> 
> 标签：javascript, ajax, asynchronous, nested

我有两个异步函数，一个嵌套在另一个中，如下所示：

```
 //Async 1
  document.addEventListener("click", function(event){
     for (var i in event){
        //Async 2
        setTimeout(function(){
           console.log(i);
        }, 200*i);
     }
  }); 
```

我想要的是能够并打印对象的每个条目（`i`）`event`。然而，Firefox 上的输出是这样的：

```
MOZ_SOURCE_KEYBOARD
MOZ_SOURCE_KEYBOARD
MOZ_SOURCE_KEYBOARD
MOZ_SOURCE_KEYBOARD
.. 
```

如果我移到*Async 2*`console.log(i)`之外，那么我会得到正确的结果：

 *```
type
target
currentTarget
eventPhase
bubbles
cancelable
.. 
```

`i`为什么在读取内部*async 2*时它不能正常工作？`event`在整个*Async 2*代码块中也不应该“活着”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:43:19.820

用这个：

```
document.addEventListener("click", function(event){
    var count = 1;
    for (var i in event){
        //Async 2
        setTimeout((function(i){
            return function () {
                console.log(i);
            };
        })(i), 200 * count++);
    }
}); 
```

**演示：http:** [//jsfiddle.net/AQykp/](http://jsfiddle.net/AQykp/)

我不完全确定你要做什么`200*i`，因为`i`它是一个字符串（甚至不是数字）。但我试图`counter`在我的回答中修复它，假设你真正想要什么。

所以你看到结果的原因是因为常见的关闭问题。`setTimeout`回调将在循环完成后执行`for`，`i`作为`event`. 为了克服这个问题，您必须添加一个闭包来捕获`i`循环中该点的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:44:51.893

setTimeout 使用 i，因为它出现在 async1 中。也就是说，它在创建超时函数时引用 i 而不是使用 i 的值。当你的超时函数最终运行时，它会查看 i 的当前值，这是`event`for 循环之后的最后一个键。

您可以通过使用自调用函数来避免这种情况，这样该函数的参数对于 timeout 函数是本地的：

```
for (var i in event) {
    setTimeout((function(i) {
        return function() { console.log(i); }
    })(i), 200 * i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T00:46:17.520

事件在您的回调中确实存在。问题是，当你的函数被执行时， i 的值已经改变（从输出中我可以看到，循环已经结束并且 i 已经达到它的最大值），因此为每个回调输出相同的值.

如果您使用 Ian 注释的函数，您会将实际值 curry 到一个新函数中。这样 i 的值可以变化，您在内部函数中捕获了当前值*

# java - Java For 循环输出

> ID：15982920
> 
> 赞同：-2
> 
> 时间：2013-04-13T00:39:57.633
> 
> 标签：java, for-loop

```
private void printRandoms() {
    int value;
    for (int i = 2; i < 8; i = i + 2) {
        value = (int) (Math.random() * 2 + 3);
        System.out.print(value + " ");
    }
    System.out.println();
} 
```

有人可以向我解释为什么有 2 个可能的输出以及为什么它们是 3,3,4 和 4,3,4。还有这个 i = i + 2 在这里是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:42:25.427

[`Math.random()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#random%28%29)产生一个介于 0 和 1 之间的随机浮点数（不包括 1）。你将它乘以 2，所以现在值介于 0 和 2 之间（不包括 2）。然后你加 3，所以值在 3 和 5 之间（不包括 5）。演员表`(int)`丢失了十进制信息，所以剩下的可能性是 3 和 4。

`i = i + 2`设置`i`为表达式的均值`i + 2`，即它加 2 到`i`.

# ios - UIViewController 是否应该控制 UIView 的动画？

> ID：15982922
> 
> 赞同：4
> 
> 时间：2013-04-13T00:40:21.483
> 
> 标签：ios, objective-c, model-view-controller, animation, uiview

我一直在推动自己学习更多 MVCS 风格的编程，并试图更好地组织我的代码。我的主要问题是，我有一个 UIViewController 可以在事件发生时显示一个视图。当视图被创建和视图被销毁时，我想在视图出现和消失时运行一些动画。我可以在我拥有的 UIView 类和 UIViewController 中执行此操作。一旦建立了这些动画，就不需要更改它们。我应该在 UIViewController 或 UIView 中执行此操作以保持 MVC 兼容吗？

该代码目前在我的 UIView 中，如下所示：

```
- (IBAction)removeView
{
    NSLog(@"Remove");
    if (self.completionBlock != nil) {

        [UIView animateWithDuration:1.0f delay:0 options:UIViewAnimationOptionAllowUserInteraction animations:^{
            self.transform = CGAffineTransformMakeTranslation(self.frame.origin.x, self.frame.origin.y - self.superview.frame.size.height);
            self.alpha = 0; // also fade to transparent
        }completion:^(BOOL finished)
         {
             if (finished) {
                 [self removeFromSuperview];
             }
         }];

        self.completionBlock(YES);

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T00:50:52.130

根据您的描述，您可以在任何一个地方合法地执行它们，因为动画不依赖于您的应用程序的模型。但是，如果动画依赖于模型中的数据，那么控制器应该执行动画，因为控制器可以看到模型数据（但视图没有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:43:50.420

ViewController 的 Views 应该是 ViewController 的奴才。您将更轻松地在 ViewController 中进行动画数学运算并让 ViewController 更新 View，这是 MVC 的最佳实践。

另外，我认为这对您来说会更容易，因为您可以基于动作而不是基于类来制作逻辑。我觉得这更容易。

# python - 单元测试：断言文件/路径存在

> ID：15982924
> 
> 赞同：33
> 
> 时间：2013-04-13T00:40:40.857
> 
> 标签：python, unit-testing, assert

我正在尝试为我的安装程序创建回归测试。回归测试是用 Python 编写的脚本。测试检查是否已将正确的文件安装在正确的位置。

有没有办法断言文件/文件夹存在？我收到以下代码的 AssertionError 错误：

```
assert os.path.exists(LOCAL_INSTALL_DIR) == 1 
```

为什么我会收到此错误，我该如何解决？我的功能：

```
def check_installation_files_exist():
    assert os.path.exists(LOCAL_INSTALL_DIR) == 1
    assert os.path.exists(INSTALL_DIR) == 1
    correct_install_files = normalise_file_names( os.listdir( LOCAL_INSTALL_DIR ) )
    installed_files       = normalise_file_names( os.listdir( INSTALL_DIR ) ) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T00:46:08.817

要么描述的路径`LOCAL_INSTALL_DIR`不存在，要么是损坏的符号链接，要么你没有权限`stat()`。

# java - 在java中为各种语言环境格式化给定的货币？（四舍五入问题）

> ID：15982927
> 
> 赞同：2
> 
> 时间：2013-04-13T00:41:00.153
> 
> 标签：java, format, locale, currency

我正在尝试根据接受语言标头格式化货币，但遇到了一些麻烦。

1.  英美用户会理解 € 10,000,000.15，但不理解适用于德国的等值 € 10.000.000,15

2.  另一方面，“$23,123 看起来”对于英美用户来说很好，但“$23,123.00”看起来很奇怪。“JPY23,123.00”也是如此。后者是我使用以下代码得到的：

    ```
     java.text.NumberFormat format = java.text.NumberFormat.getCurrencyInstance(java.util.Locale.US);
     format.setCurrency(java.util.Currency.getInstance("JPY")); 
    ```

3.  更令人不安的是当我在 ja_JP 中显示 USD 时发生的舍入。如果我格式化 7.95，它只显示为“USD8”而不是“USD7.95”

有什么简单的方法可以避免这种情况吗？有没有更好的格式化货币库？我是否应该将其格式化为区域设置的数字（如果货币不是区域设置的默认值），然后添加货币代码或符号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T03:22:25.407

# c - 在 strcpy 上崩溃，不知道为什么？

> ID：15982928
> 
> 赞同：6
> 
> 时间：2013-04-13T00:41:03.803
> 
> 标签：c, string, pointers, segmentation-fault

```
 if (strlen(shortest) > strlen(longest)) {
            char *temp;
            strcpy(longest, temp);
            strcpy(shortest, longest);
            strcpy(temp, shortest);
     } 
 } 
```

`strcpy(longest, temp)`--> 导致我的程序崩溃。这是一个详细的崩溃报告（我已经包含了正确的头文件，所以不是那样的。编译器还警告我使用未初始化的临时变量......）：

> 程序收到信号 SIGSEGV，分段错误。
> __strcpy_ssse3 () at ../sysdeps/i386/i686/multiarch/strcpy-ssse3.S:85
> 85 ../sysdeps/i386/i686/multiarch/strcpy-ssse3.S：没有这样的文件或目录。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T00:41:51.140

```
 char *temp;
        strcpy(longest, temp); 
```

`strcpy`不是。`strcpy(dst, src)`_ `strcpy(src, dst)`源是右边的参数，而不是左边的参数。

此外`char *temp`，当您将其值传递给`strcpy`. 您需要分配内存`temp`来保存您复制的字符串，例如使用`malloc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-08T03:18:06.103

有2个错误。

> 1）您需要首先为 char *temp “分配”内存；
> 
> 例子：
> 
> ```
> char *temp;
> temp = malloc(4); // Allocate 4 character space. 
>                   // Ensure to include #include <stdlib.h>2) 
> ```
> 
> 2) strcpy 签名是 strcpy(dest, src)。在您的代码中它是 strcpy(src, dest) whih 是错误的。
> 
> 正确示例： `strccpy(temp, longest);`

# c# - 如何从 ComboBox C# Winforms 中获取 ValueMember 值？

> ID：15982929
> 
> 赞同：10
> 
> 时间：2013-04-13T00:41:04.843
> 
> 标签：c#, winforms, report

我在尝试获取我设置的 ValueMember 值时遇到了一些麻烦。我正在尝试使用组合框来选择 Windows 窗体报告。我可以得到名称，但不能得到 RptValue。这是我的代码：

```
 private class Data
    {
        public string Name { get; set; }
        public string RptValue { get; set; }
    }

    private void BaseForm_Load(object sender, EventArgs e)
    {
        this.rvDoctorReportViewer.RefreshReport();
        comboBox1.Items.Add(new Data { Name="Select", RptValue="Select"});
        comboBox1.Items.Add(new Data { Name = "All Food Values", RptValue = "AllFoodValues.rdlc" });
        comboBox1.Items.Add(new Data { Name = "All Readings", RptValue = "AllReadings.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Avg Food Values by Date", RptValue = "AvgFoodValuesByDate.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Avg Food Values by Meal", RptValue = "AvgFoodValuesByMeal.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Avg Readings by Date", RptValue = "AvgReadingsByDate.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Avg Readings by Time", RptValue = "AvgReadingsByTime.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Avg Readings by Event", RptValue = "AvgReadingsByEvent.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Blood Pressure Chart", RptValue = "BPChart.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Blood Pressure Report", RptValue = "BPReport.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Detail Food Values by Meal", RptValue = "DetailFoodValuesByMeal.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Doctor Detail Report", RptValue = "DoctorDetailReport.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Food Chart", RptValue = "FoodChart.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Pumper Detail Report", RptValue = "PumperDetailReport.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Reading Charts", RptValue = "ReadingCharts.rdlc" });
        comboBox1.Items.Add(new Data { Name = "Total Daily Food Intake", RptValue = "TotalIntakeDailyFood.rdlc" });
        comboBox1.DisplayMember = "Name"; // This works fine
        comboBox1.ValueMember = "RptValue"; // This is the problem. It renders as RptValue instead of the value
        comboBox1.SelectedIndex = 0;
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (comboBox1.SelectedIndex > 0)
        {
            string strReport;
            strReport = "ReportViewer." + comboBox1.ValueMember.ToString();
            rvDoctorReportViewer.Reset();
            rvDoctorReportViewer.LocalReport.ReportEmbeddedResource = strReport;
            this.rvDoctorReportViewer.RefreshReport();
        }
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-13T01:02:18.727

您应该使用该[`DataSource`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.datasource.aspx)属性。尝试这个：

```
BindingList<Data> _comboItems = new BindingList<Data>(); 
_comboItems.Add(new Data { Name = "Select", RptValue = "Select" });
_comboItems.Add(new Data { Name = "All Food Values", RptValue = "AllFoodValues.rdlc" });
...
comboBox1.DataSource = _comboItems;
comboBox1.DisplayMember = "Name";
comboBox1.ValueMember = "RptValue"; 
```

然后访问选定的值：

```
strReport = "ReportViewer." + comboBox1.SelectedValue; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-15T11:48:40.900

```
 String s;
  s=comboBox1.SelectedValue.toString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-27T21:08:21.177

这对我有用：

```
 combobox.valuemember="id"
    combobox.displaymember="name"
    combobox.datasource=dt 
```

# excel - 如何自动刷新excel工作簿中的单元格值？

> ID：15982930
> 
> 赞同：-3
> 
> 时间：2013-04-13T00:41:25.240
> 
> 标签：excel

我有一个包含 3 个工作表的 excel 工作簿。

工作表 1 包含单元格 A1 上的输入单元格（即下拉列表）。工作表 2 的单元格 B2 引用工作表 1 的单元格 A1 的信息。工作表 3 的单元格 B3 也引用工作表 1 的单元格 A1 的信息。

但是，当我更改工作表 1 的单元格 A1 的值时，引用的值似乎不会自动更改 - 这看起来很奇怪。

每当单元格 A1 更改时，有什么方法可以用来自动唤起更新？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T00:46:14.630

> 在工具菜单上，单击选项，然后单击计算选项卡。
> 
> 要在每次更改值、公式或名称时重新计算所有相关公式（数据表除外），请单击自动，表除外。

资源：

[http://office.microsoft.com/en-us/excel-help/change-when-and-how-formulas-are-recalculated-HP005199227.aspx](http://office.microsoft.com/en-us/excel-help/change-when-and-how-formulas-are-recalculated-HP005199227.aspx)

# c++ - 大小后跟 C++ inFile.Read 中的多个参数

> ID：15982936
> 
> 赞同：1
> 
> 时间：2013-04-13T00:42:14.940
> 
> 标签：c++, function, parameters

谁能解释 C++ 中 inFile.Read 的参数？我发现了许多使用大小后跟单个参数的方法示例，但是，尽管它是一个简单的函数，但我找不到任何说明方法签名的文档。

我刚刚在别人的代码中遇到了这个：

```
inFile.Read(sizeof(float), val1, val2); 
```

任何人都可以解释多个参数或向我指出有关此功能的任何适当文档。我已经用谷歌搜索了它，找不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:11:29.083

我认为这里的问题是您认为`inFile.Read`是函数的名称，而实际上不是。`inFile`是一个对象，`Read`是类的成员函数`inFile`。

由于您尚未指定 的类型`inFile`，因此我们无法告诉您是什么`Read`。我们甚至不知道它的类型是否是我们可以查看的开源库的一部分，或者它是否属于您正在查看的代码作者的私有代码。查看他的代码并查看`Read`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T01:09:27.260

我认为 C++ std 类中的一个方法实际上是一个自定义类。我发现签名是 bool Read (size_t itemSize, int numItems, void* data); 谢谢。

# django - AttributeError：“模块”对象没有属性“ElasticSearchError”：使用 Haystack Elasticsearch

> ID：15982942
> 
> 赞同：4
> 
> 时间：2013-04-13T00:42:40.880
> 
> 标签：django, elasticsearch, django-haystack, attributeerror

将 Django 和 Haystack 与 ElasticSearch 一起使用。

安装完 haystack 和 ES，并重建索引后

```
./manage.py rebuild_index 
```

警告：这将无法挽回地从连接“默认”中的搜索索引中删除所有内容。在此之后您的选择是从备份中恢复或通过`rebuild_index`命令重建。您确定要继续吗？[是/否] 是

```
Removing all documents from your index because you said so.
All documents removed.
Indexing 1039 <django.utils.functional.__proxy__ object at 0x10ca3ded0>.

AttributeError: 'module' object has no attribute 'ElasticSearchError' 
```

更新索引有同样的问题

```
/manage.py update_index 
Indexing 1039 <django.utils.functional.__proxy__ object at 0x10ea49d90>.
AttributeError: 'module' object has no attribute 'ElasticSearchError' 
```

清除索引工作正常（可能是因为没有索引）

```
./manage.py clear_index   

WARNING: This will irreparably remove EVERYTHING from your search index in connection    'default'.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y 
```

因为您这么说，所以从您的索引中删除所有文档。删除所有文件。

**版本**

django-haystack==2.0.0-beta
pyelasticsearch==0.5 elasticsearch
==0.20.6

本地主机：9200 说：

```
{
  "ok" : true,
  "status" : 200,
  "name" : "Jigsaw",
  "version" : {
    "number" : "0.20.6",
    "snapshot_build" : false
  },
  "tagline" : "You Know, for Search"
} 
```

干草堆设置：

```
HAYSTACK_CONNECTIONS = {
    'default': {
        'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',
        'URL': 'http://127.0.0.1:9200/',
        'INDEX_NAME': 'haystack',
    },
} 
```

search_indexes.py ：

```
import datetime
import haystack
from haystack import indexes
from app.models import City

class CityIndex(indexes.SearchIndex, indexes.Indexable):
    text = indexes.CharField(document=True, use_template=True)
    name = indexes.CharField(model_attr='name')
    state = indexes.CharField(model_attr='state')
    country = indexes.CharField(model_attr='country')
    lat = indexes.FloatField(model_attr='latitude')
    lon = indexes.FloatField(model_attr='longitude')
    alt = indexes.FloatField(model_attr='altitude')
    pop = indexes.IntegerField(model_attr='population')

    def get_model(self):
        return City 
```

**任何帮助 - 为什么我会出错？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T14:05:33.800

解决了！

使用 pdb 调试进程后

```
./manage.py rebuild_index 
```

在第 222 行 - 在 /haystack/backend/elasticsearch_backend.py

改变了

```
except (requests.RequestException, pyelasticsearch.ElasticSearchError), e: 
```

至

```
# except (requests.RequestException, pyelasticsearch.ElasticSearchError), e:
except Exception as inst:
    import pdb; pdb.set_trace() 
```

我发现核心错误是这个

```
'ElasticSearch' object has no attribute 'from_python'. 
```

我在这里找到了解决方案 - [https://github.com/toastdriven/django-haystack/issues/514#issuecomment-4058230](https://github.com/toastdriven/django-haystack/issues/514#issuecomment-4058230)

我使用的 pyelasticsearch 版本来自[http://github.com/rhec/pyelasticsearch](http://github.com/rhec/pyelasticsearch)，

所以我从一个叉子安装了 pyelasticsearch - [http://github.com/toastdriven/pyelasticsearch](http://github.com/toastdriven/pyelasticsearch)使用：

```
pip install --upgrade  git+https://github.com/toastdriven/pyelasticsearch.git@3bfe1a90eab6c2dfb0989047212f4bc9fb814803#egg=pyelasticsearch 
```

并且修复了它并建立了索引！

# c++ - 扫描线算法图形处理的总线错误

> ID：15982946
> 
> 赞同：0
> 
> 时间：2013-04-13T00:43:03.373
> 
> 标签：c++, graphics, bus-error, scanline

抱歉，如果这是很多代码，我只是不确定你们到底需要什么来解决我的问题。我知道总线错误或多或少对应于我的主要方法中的堆栈溢出，但我不完全理解为什么会发生这种情况。我有一个填充了数百万个自定义三角形对象的向量，我正在尝试处理这些对象以绘制二维图片。这是我的代码：

```
vtkImageData *image = NewImage(1786, 1344);
unsigned char *buffer = 
 (unsigned char *) image->GetScalarPointer(0,0,0);
int npixels = 1786*1344;
for (int i = 0 ; i < npixels*3 ; i++)
    buffer[i] = 0;

std::vector<Triangle> triangles = GetTriangles();
Screen *screen = new Screen;
screen->buffer = buffer;
screen->width = 1786;
screen->height = 1344;
double leftEnd, rightEnd;
int highIndex, leftIndex, rightIndex, bottomIndex, midIndex;
for(std::vector<Triangle>::iterator it = triangles.begin(); it != triangles.end(); ++it)
{

    // Get this triangle
    Triangle current = *it;
    Triangle curr2;
    char triangleType = current.whichTriangle();
    // It's a flat-bottom triangle
    if(triangleType == 'b'){    
        highIndex = current.getFlatMidIndex();
        bottomIndex = current.getFlatLeftIndex();
    // It's a flat-top traingle
    }else if(triangleType == 'u'){
        highIndex = current.getFlatLeftIndex();
        bottomIndex = current.getFlatMidIndex();
    //It's an arbitrary triangle
    }else{

        // Make two triangles, with new coordinates

        curr2.X[0] = current.X[current.getArbLowIndex()];
        curr2.Y[0] = current.Y[current.getArbLowIndex()];
        curr2.X[1] = current.X[current.getArbMidIndex()];
        curr2.Y[1] = current.Y[current.getArbMidIndex()];
        curr2.X[2] = splitTriangle(current, curr2.Y[1]);
        curr2.Y[2] = current.Y[current.getArbMidIndex()];
        int currLowIndex = current.getArbLowIndex();
        current.X[currLowIndex] = curr2.X[2];
        current.Y[currLowIndex] = curr2.Y[2];
        highIndex = current.getFlatMidIndex();
        bottomIndex = current.getFlatLeftIndex(); 

    }

        //perform the scan-line alg on this triangle
        for(double i = ceil441(current.Y[bottomIndex]); i <= floor441(current.Y[highIndex]); i++)
        {

            leftEnd = calcLeftEnd(current, i, i);
            rightEnd = calcRightEnd(current, i, i);
            // If this triangle extends past the left border, set it's left edge to 0
            if(leftEnd < 0){
                leftEnd = 0;
            }
            // If this triangle extends past the left border, set it's right edge to 999
            if(rightEnd > (screen->width - 1)){
                rightEnd = screen->width - 1;
            }

            for(double j = ceil441(leftEnd); j <= floor441(rightEnd); j++)
            {   

                // Pixels to color will be ((Y * 50 + X) * 3); this will account
                // for the fact that the buffer is one long array, not a 
                // 2D array like we think of it
                int pixel = ((i * screen->width) + j) * 3;
                // Make sure we don't segfault
                if(pixel < (npixels * 3)){
                    screen->buffer[pixel] = current.color[0];
                    screen->buffer[pixel + 1] = current.color[1];
                    screen->buffer[pixel + 2] = current.color[2];
                }               
            }
        }

    if(triangleType == 'a'){

        highIndex = curr2.getFlatLeftIndex();
        bottomIndex = curr2.getFlatMidIndex();
        for(double i = ceil441(curr2.Y[bottomIndex]); i <= floor441(curr2.Y[highIndex]); i++)
        {

            leftEnd = calcLeftEnd(curr2, i, i);
            rightEnd = calcRightEnd(curr2, i, i);

            // If this triangle extends past the left border, set it's left edge to 0
            if(leftEnd < 0){
                leftEnd = 0;
            }
            // If this triangle extends past the left border, set it's right edge to 999
            if(rightEnd > (screen->width - 1)){
                rightEnd = screen->width - 1;
            }

            for(double j = ceil441(leftEnd); j <= floor441(rightEnd); j++)
            {   

                // Pixels to color will be ((Y * 50 + X) * 3); this will account
                // for the fact that the buffer is one long array, not a 
                // 2D array like we think of it
                int pixel = ((i * screen->width) + j) * 3;
                // Make sure we don't segfault
                if(pixel < (npixels * 3)){
                    screen->buffer[pixel] = current.color[0];
                    screen->buffer[pixel + 1] = current.color[1];
                    screen->buffer[pixel + 2] = current.color[2];
                }               
            }
        }   

    }
} 
```

我已经能够处理大约 200,000 个三角形，但在那之后我得到了一个总线错误。我知道我必须将其中一些代码移出我的主要方法，但我不确定哪些部分以及为什么。感谢帮助。

# ram - 从 RAM 转储中提取 flv 视频

> ID：15982950
> 
> 赞同：0
> 
> 时间：2013-04-13T00:43:32.993
> 
> 标签：ram, flash-video, computer-forensics

我想从 RAM 转储中提取一些 FLV 视频。有没有一种简单的方法可以使用您知道的一些好工具来做到这一点？我已经谷歌了，但我什么也没找到！

我有一个想法，但它似乎很难且耗时，我将搜索 FLV 幻数并开始从那里增量提取数据，但我不知道这种方法是否真的有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:49:34.853

Macintosh FileJuicer 程序执行您所描述的操作（搜索二进制 blob 中的幻数并提取），它会在 RAM 转储中搜索它知道的所有幻数，我不确定是否有其他操作系统的等价物，也许是开源的，但至少它是另一个谷歌搜索词。

# javascript - Javascript 字符串与 if 的连接

> ID：15982951
> 
> 赞同：0
> 
> 时间：2013-04-13T00:43:35.950
> 
> 标签：javascript

为了提取条件值，我将如何执行以下操作？

```
formatter: function() {return ' ' +
    '<b>Time: </b>' + Highcharts.dateFormat('%b %d, %H:%M ', this.x) + '<br />' +
    '<b>Volume: </b>' + if (this.y) {'Successful';} else { 'Failed';} + '<br />'
},}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:47:13.967

因此，代替您的 if：

```
(this.y ? 'Successful' : 'Failed') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T00:47:41.483

创建单独的变量来存储消息：

```
var message = 'Failed';
if (this.y) {
    message = 'Successful';
} 
```

或使用`?:`运算符：

```
formatter: function() {return ' ' +
    '<b>Time: </b>' + Highcharts.dateFormat('%b %d, %H:%M ', this.x) + '<br />' +
    '<b>Volume: </b>' + (this.y ? 'Successful' : 'Failed') + '<br />'
},}, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-13T00:47:49.717

你需要使用三元运算符

```
formatter: function() {return ' ' +
    '<b>Time: </b>' + Highcharts.dateFormat('%b %d, %H:%M ', this.x) + '<br />' +
    '<b>Volume: </b>' + (this.y? 'Successful' : 'Failed') + '<br />'
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-13T00:54:13.430

你可以这样做：

```
formatter: function() {return ' ' +
    '<b>Time: </b>' + Highcharts.dateFormat('%b %d, %H:%M ', this.x) + '<br />' +
    '<b>Volume: </b>' + ((this.y == true) ? "Successful": "Failed") + '<br />'
},}, 
```

该三元运算符将允许您将逻辑插入到字符串中。

分解：如果 this.y 为真，则返回“成功”，否则返回“失败”

[更多信息在这里](http://javascript.about.com/od/byexample/a/ternary-example.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-13T00:46:49.990

将 if 条件包装在一个函数中，您可以在其中解析条件并返回正确的字符串

```
var "first part" + SomeMethodWithIfLogic(val) + "last part"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-13T00:48:10.730

```
formatter: function() {
    if (this.y) {
      success = 'Successful'
    } else {
      success = 'Unsuccessful'
    };
    return ' ' +
    '<b>Time: </b>' + Highcharts.dateFormat('%b %d, %H:%M ', this.x) + '<br />' +
    '<b>Volume: </b>' + success + '<br />' 
```

# c# - 使用 SQLConnector 和 SQLCommand 执行连接来自 2 个或多个 db 的表的查询

> ID：15982958
> 
> 赞同：0
> 
> 时间：2013-04-13T00:44:37.533
> 
> 标签：c#, .net, sql-server-2008-r2

你如何执行这样的查询；

```
 SELECT
    c.Name
    FROM db1..TableA a(nolock)
    join db2..TableA b(nolock) on a.id = b.id
    join db2..TableB c(nolock) on b.id = c.id
    join db2..TableC as d on c.id = d.id
    where c.id = '2314' 
```

和？`SQLConnector`_ `SQLCommand`似乎您一次只能连接到一个数据库。

我意识到我可以有两个实例，`SQLConnector`然后在我的 C# 代码中加入结果，但显然这将是一个糟糕的解决方案。有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:00:32.660

如果您指的是单个服务器，那么您可以使用三部分名称
但是该名称需要所有者，通常是 dbo 尝试

```
 SELECT
    c.Name
    FROM db1.dbo.TableA a(nolock)
    join db2.dbo.TableA b(nolock) on a.id = b.id
    join db2.dbo.TableB c(nolock) on b.id = c.id
    join db2.dbo.TableC as d on c.id = d.id
    where c.id = '2314' 
```

如果您右键单击 SSMS 中的表并单击选择前 1000 行，它将构建正确的 3 部分名称。

如果数据库位于不同的服务器上。

通过链接服务器，您可以在单个连接上访问多个服务器。

[链接服务器（数据库引擎）](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

[创建链接服务器](http://msdn.microsoft.com/en-us/library/ff772782.aspx)

然后您只需通过单个连接引用 4 部分名称
4 部分名称不限于 SSMS
4 部分名称可以通过来自 .NET 的连接使用。

# twitter-bootstrap - 使用 Bootstrap 的 Mapbox 地图尺寸

> ID：15982972
> 
> 赞同：1
> 
> 时间：2013-04-13T00:46:51.527
> 
> 标签：twitter-bootstrap, leaflet, mapbox

背景：使用 Twitter Bootstrap 和地图作为轮播的“幻灯片”

我正在尝试使用指定地图的尺寸

`var map = mapbox.map('map',false, {x: 940, y: 500});`

或者

```
#map { 
width: 940px;
height: 500 px
} 
```

他们都导致了这个： ![大声疾呼](https://www.evernote.com/shard/s94/sh/1b26dd59-6daf-45c8-a859-dcb1eef924e0/b520fe899a6eb596a5ea85284849423c/deep/0/Screenshot%2012/04/13%2000:33.jpg)

基本上它是一个 x 拉伸版本，仅在 x=256 时显示正常（一个瓷砖宽度，对吗？） `var map = mapbox.map('map',false, {x: 256, y: 500});` ![裁剪](https://www.evernote.com/shard/s94/sh/98ec7ecc-d75f-44d6-947c-2ab78548a14b/9b5c845ba875b80b33b9fb47ee221707/deep/0/Screenshot%2012/04/13%2000:36.jpg)

您可以在[这里](http://smeadaptation.org/)看到问题（传递到轮播的第二页，第一页使用 iframe）。

我正在写作，因为我已经通过 mapbox.map(dimensions) 和 CSS 尺寸尝试了[文档，奇怪的是似乎适用于高度但不适用于宽度。](http://mapbox.com/mapbox.js/api/v0.6.7/#mapbox.map)

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:17:54.230

似乎需要从 Bootstap 覆盖一些 CSS 属性。

Tom 通过[Mapbox 支持](http://support.mapbox.com/discussions/general-questions/14920-map-size)向我发送了一个修复程序。

```
#map1 img {
 max-width: none;
 min-width: 0px;
} 
```

并添加`height: auto;`以便标记也可以工作。

# ruby-on-rails - 在 Rails 中，如何将表单数据自动转换为准备创建对象的参数？

> ID：15982974
> 
> 赞同：0
> 
> 时间：2013-04-13T00:47:16.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在使用 Can.js 创建一条新记录，并将它发送`POST /todos`到本地 Rails 服务器（rails 3.2.13）。请求中的表单数据`title=mow+lawn&completed=true`是：

```
title: mow lawn
completed: true 
```

所以在`TodosController`,`create`动作中，默认代码是：

```
@todo = Todo.new(params[:todo]) 
```

但当然，the`params[:todo]`是空的，只有`params[:title]`存在`params[:completed]`。所以我可以使用

```
@todo = Todo.new(:title => params[:title], :completed => params[:completed]) 
```

这样做，但是有没有办法让它以某种方式自动`param`从这些参数创建这样的对象？

有人在[How can.js add a record to a Rails server?](https://stackoverflow.com/questions/15975309/how-can-can-js-add-a-record-to-a-rails-server)

```
class TodosController < ApplicationController
  wrap_parameters :todo 
```

但我尝试了每一个

```
wrap_parameters
wrap_parameters :todo
wrap_parameters :todo, :include => [:name, :complete], 
wrap_parameters :include => [:name, :complete] 
```

仍然`Todo.new(params[:todo])`无法正常工作。它实际上如何工作或任何其他方法将参数自动打包到对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:52:26.323

您可以使用

```
@todo = Todo.new(params.slice(:name, :completed)) 
```

为了使其自动化，我想您可以`accessible_attributes`对模型的方法进行切片：

```
@todo = Todo.new(params.slice(*Todo.accessible_attributes)) 
```

# javascript - 在 Handlebars 模板中处理多行字符串

> ID：15982976
> 
> 赞同：5
> 
> 时间：2013-04-13T00:47:30.637
> 
> 标签：javascript, handlebars.js

从我的服务器返回的 JSON 响应包含一个长字符串（消息正文或多行注释）。

典型的 message.body 可能如下所示：

```
"Hi!\r\n\r\nHow's life? Everything is well with me\r\n\r\nSincerely,\r\n\r\nAustin\r\n" 
```

现在使用车把，我像这样嵌入

```
<p>{{body}}</p> 
```

但是，这会在 html 中呈现为：

```
<p>"Hi!
How's life? Everything is well with me 

Sincerely, 

Austin"</p> 
```

**我怎样才能让它在它自己的 html 段落 [p] 标记中呈现每一行？**在rails中，我会用这样的东西（在haml中）

```
- note.body.each_line do |x|
    %p= x 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-31T15:53:02.773

您可以添加一个把手“助手”

[http://handlebarsjs.com/expressions.html](http://handlebarsjs.com/expressions.html) （向下滚动到 Helpers）

例如

```
Handlebars.registerHelper('paragraphSplit', function(plaintext) {
    var i, output = '',
        lines = plaintext.split(/\r\n|\r|\n/g);
    for (i = 0; i < lines.length; i++) {
        if(lines[i]) {
            output += '<p>' + lines[i] + '</p>';
        }
    }
    return new Handlebars.SafeString(output);
}); 
```

然后在您的模板调用中

```
{{paragraphSplit body}} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-13T01:48:21.880

Handlebars 不喜欢模板中的逻辑。您通常会在模板看到数据之前处理数据，如下所示：

```
var lines = "...".split(/(?:\r\n)+/); 
```

然后将该数组提供给模板：

```
var html = tmpl({ body: lines }); 
```

在这种情况下，您的模板将如下所示：

```
{{#each body}}
    {{.}}
{{/each}} 
```

演示：http: [//jsfiddle.net/ambiguous/Gbu5w/](http://jsfiddle.net/ambiguous/Gbu5w/)

# arrays - 从函数返回动态数组

> ID：15982980
> 
> 赞同：4
> 
> 时间：2013-04-13T00:47:45.387
> 
> 标签：arrays, delphi, delphi-7

我正在使用 Delphi 7。

这是我的基类。函数**load_for_edit()**应该返回一个字符串数组，听起来像它。问题并不特别在这里，而是更进一步。

```
 ...

type
    TStringArray = array of string;

    ...

    function load_for_edit(): TStringArray;

    ...

    numberOfFields: integer;

    ...

function TBaseForm.load_for_edit(): TStringArray;
var
    query: TADOQuery;
    i: integer;
begin
    query := TADOQuery.Create(self);
    query.Connection := DataModule1.ADOConnection;
    query.SQL.Add('CALL get_' + self.table_name + '_id(' + self.id + ')');
    query.Open;

    numberOfFields := query.Fields.Count;
    SetLength(result, query.Fields.Count);
    for i := 0 to query.Fields.Count - 1 do
        result[i] := query.Fields[i].Value.AsString;
end; 
```

接下来是作为基类后代的类，它试图从基类的**load_for_edit()**函数接收一个数组。

```
 ...

type
    TStringArray = array of string;

    ...

procedure TPublisherEditForm.FormShow(Sender: TObject);
var
    rec: TStringArray;
begin
    inherited;
    SetLength(rec, self.numberOfFields);
    rec := load_for_edit();                 // Compilation stops here
end; 
```

但是，应用程序不会编译。Delphi 吐出这个错误信息：

```
Incompatible types 
```

因此，这意味着函数**load_for_edit()**返回的数据类型与变量**rec**的数据类型不同，但是，从它们各自的类型声明部分可以看出，它们的声明绝对相同。我不知道这里发生了什么以及该怎么做。请帮我想出一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T01:03:04.570

你有两个单独的声明`TStringArray`（每个单元一个），它们*不*一样。（它们在两个单独的单元中的事实使它们不同。`UnitA.TStringArray`与不同`UnitB.TStringArray`，即使它们都被声明为`type TStringArray = array of string;`。）

您需要使用单一类型声明：

```
unit
  BaseFormUnit;

interface

uses
  ...
type
  TStringArray: array of string;

  TBaseForm = class(...)
    numberOfFields: Integer;
    function load_for_edit: TStringArray;
  end;

implementation

// Not sure here. It looks like you should use a try..finally to
// free the query after loading, but if you need to use it later
// to save the edits you should create it in the TBaseForm constructor
// and free it in the TBaseForm destructor instead, which means it
// should also be a field of the class declaration above.
function TBaseForm.load_for_edit(): TStringArray;
var
  query: TADOQuery;
  i: integer;
begin
  query := TADOQuery.Create(self);
  query.Connection := DataModule1.ADOConnection;
  query.SQL.Add('CALL get_' + self.table_name + '_id(' + self.id + ')');
  query.Open;

  numberOfFields := query.Fields.Count;
  SetLength(result, numberOfFields);
  for i := 0 to numberOfFields - 1 do
    Result[i] := query.Fields[i].Value.AsString;
end;
...
end. 
```

现在您的后代类可以访问它：

```
unit
  PublisherEditFormUnit;

interface

uses
  ...  // Usual Forms, Windows, etc.
  BaseFormUnit;

type
  TPublisherEditForm = class(TBaseForm)
  ...
    procedure FormShow(Sender: TObject);
  end;

implementation

procedure TPublisherEditForm.FormShow(Sender: TObject);
var
  rec: TStringArray;
begin
  // No need to call SetLength - the base class does.
  rec := load_for_edit();                 // Compilation stops here
end;
...
end. 
```

# php - 使用 select 命令时允许 mysql 识别撇号

> ID：15982984
> 
> 赞同：-2
> 
> 时间：2013-04-13T00:48:17.180
> 
> 标签：php, mysql, ios, xml, parsing

我一直在使用xml来解析。尽管我可以将数据很好地插入 mysql 数据库，但只要有撇号，我就无法接收。我在用

```
stringByAddingPercentEscapesUsingEncoding : NSUTF8StringEncoding 
```

对于插入，它成功地将其放置为'。但是，当我尝试选择时，mysql 会感到困惑并没有回应就向我开枪。有没有办法在将撇号发送到数据库之前用可识别的东西替换撇号，然后在接收时将其解析回正确的格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T00:55:20.243

你需要使用[这个答案](https://stackoverflow.com/a/60496/1415038)。你需要参数化你的 MySQL 查询，这样你就不会容易受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

使用 PDO 的示例：

```
$stmt = $pdo->prepare('SELECT * FROM employees WHERE name = :name');

$stmt->execute(array(':name' => $name));

foreach ($stmt as $row) {
    // do something with $row
} 
```

使用 mysqli 的示例：

```
$stmt = $dbConnection->prepare('SELECT * FROM employees WHERE name = ?');
$stmt->bind_param('s', $name);

$stmt->execute();

$result = $stmt->get_result();
while ($row = $result->fetch_assoc()) {
    // do something with $row
} 
```

# json - 我如何专门用 Jackson 反序列化“null”？

> ID：15982985
> 
> 赞同：7
> 
> 时间：2013-04-13T00:48:30.980
> 
> 标签：json, jackson

我有一个可以输出以下任何内容的类：

*   {标题：“我的主张”}
*   {标题：“我的主张”，判断：空}
*   {标题：“我的主张”，判断：“站立”}

（注意每种情况下的判断是如何不同的：它可以是未定义的、null 或一个值）

该类看起来像：

```
class Claim {
   String title;
   Nullable<String> judgment;
} 
```

Nullable 是这样的：

```
class Nullable<T> {
   public T value;
} 
```

使用自定义序列化程序：

```
SimpleModule module = new SimpleModule("NullableSerMod", Version.unknownVersion());
module.addSerializer(Nullable.class, new JsonSerializer<Nullable>() {
   @Override
   public void serialize(Nullable arg0, JsonGenerator arg1, SerializerProvider arg2) throws IOException, JsonProcessingException {
      if (arg0 == null)
         return;
      arg1.writeObject(arg0.value);
   }
});
outputMapper.registerModule(module); 
```

*摘要：*此设置允许我输出值、null*或 undefined*。

**现在，我的问题**是：如何编写相应的反序列化器？

我想它看起来像这样：

```
SimpleModule module = new SimpleModule("NullableDeserMod", Version.unknownVersion());
module.addDeserializer(Nullable.class, new JsonDeserializer<Nullable<?>>() {
   @Override
   public Nullable<?> deserialize(JsonParser parser, DeserializationContext context) throws IOException, JsonProcessingException {
      if (next thing is null)
         return new Nullable(null);
      else
         return new Nullable(parser.readValueAs(inner type));
   }
}); 
```

但我不知道“下一件事情是空的”或“内部类型”该放什么。

关于如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-15T08:27:23.073

覆盖反序列化器中的 getNullValue() 方法

请参阅[如何将 JSON null 反序列化为 NullNode 而不是 Java null？](https://stackoverflow.com/questions/15293697/how-to-deserialize-json-null-to-a-nullnode-instead-of-java-null)

在其中返回“”

# if-statement - 从条件返回值

> ID：15982987
> 
> 赞同：0
> 
> 时间：2013-04-13T00:48:44.703
> 
> 标签：if-statement, scheme

我正在尝试解释关键字和整数列表以获取表达式。如果“输入”是，比如 '(add 5 5)，传入的列表将包含 3 个 -> add 5 5

```
 (define (evaluate input)
   (if (integer? input)
       input
       (cond ((integer? (car input))
              (car input))
             ((equal? (car input) "add")
              (+ (evaluate (cdr input)) 
                 (evaluate (cddr input))))
~more~ 
```

我使用 'if' 因为 cond 不喜欢只返回一个值。我的问题是：是否相等？实际上正确比较字符串，在这种情况下 (+ evaluate (...) evaluate(...)) 应该返回 10 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T01:03:59.417

在最后一行，

```
 (+ (evaluate (cdr input)) (evaluate (cddr input)))) 
```

必须

```
(+ (evaluate (cadr input)) (evaluate (caddr input)))) 
```

因为在if-comparison中，它必须直接返回数字。但当然，您也可以使用 cond，而不必使用其他比较方法。

要比较字符串，可以使用 best string=? 功能。

[更多信息：](http://docs.racket-lang.org/reference/strings.html#%28def._%28%28quote._~23~25kernel%29._string~3d~3f%29%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-13T01:36:21.303

`add`实际上是一个 Scheme 符号，而不是一个字符串，所以你可以使用`eq?`：

```
(define (evaluate input)
  (cond
    [(integer? input)
      input]
    [(integer? (car input))
      (car input)]
    [(eq? 'add (car input))
      (+ (evaluate (cadr input) (caddr input)))])) 
```

顺便说一句，看起来你真正想做的是在输入匹配模式时“解构”输入：也就是说，提取存储在输入中的内容。Oleg Kiselyov 有一个很好的小宏`pmatch`，它可以为你做这件事。从[http://www.cs.indiana.edu/cgi-pub/c311/lib/exe/fetch.php?media=pmatch.scm](http://www.cs.indiana.edu/cgi-pub/c311/lib/exe/fetch.php?media=pmatch.scm)下载。然后您可以编写以下内容，它处理所有这些///`cdr`等。自动填充，并支持任意数量的参数，并且不需要将整数单独括在括号中的情况：`cadr``caddr``add`

```
(define (evaluate input)
  (pmatch input
    [,n (guard (integer? n))
      n]
    [(add . ,operands)
      (apply + (map evaluate operands))])) 
```

`pmatch`需要一系列子句，例如`cond`，除了子句中的第一个表达式是一个模式，它可以包含变量。变量通过在它们前面用逗号表示（就像在反引号表达式中一样）。模式中任何前面没有逗号的符号都必须按字面意思匹配。当`pmatch`找到匹配模式时，它将变量绑定到输入的相应部分中的输入部分。`n`并且`operands`是上述模式中的变量。

`guard`如果您需要的条件不仅仅是匹配模式，您还可以在模式后添加一个子句，例如检查提取的变量是否为整数。

# mysql - 子查询中的 COUNT

> ID：15982990
> 
> 赞同：0
> 
> 时间：2013-04-13T00:49:01.827
> 
> 标签：mysql, sql

我有一个 html 表格，我想在其中显示`cht_name`,`count_hoh`和`count_members`. 我可以得到计数的结果，`count_hoh`因为我有相同的字段`cht_id`on`household_tbl`和主表 on `tbl_cht_members`。我在获取具有相同字段但没有字段`count_members`的表的计数时遇到了麻烦，我可以在其中直接获取相同的计数。我只是通过.`tbl_household_members``household_tbl``cht_id``count_hoh``household_connector_id`

```
SELECT cht_id as cht, name, 
       (SELECT household_connector_id as hoh,
               COUNT(*) 
          FROM household_tbl 
         WHERE cht_id = cht) as count_hoh,
       (SELECT COUNT(*) 
          FROM tbl_household_members 
         WHERE household_connector_id = hoh) as count_members
  FROM tbl_cht_members 
GROUP BY cht_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T01:26:25.117

试试这个疯狂的猜测；）

```
SELECT 
    tbl_cht_members.cht_id as cht, tbl_cht_members.name,
    COUNT(household_tbl.cht_id) AS count_hoh,
    COUNT(tbl_household_members.household_connector_id) AS count_members
FROM
    tbl_cht_members LEFT JOIN household_tbl 
        ON tbl_cht_members.cht_id = household_tbl.cht_id
    LEFT JOIN tbl_household_members
        ON household_tbl.household_connector_id = tbl_household_members.household_connector_id 
```

您可能会修复一些字段/表名称和/或使用`DISTINCT`，但这个概念将适用于 IMO

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T02:58:50.073

由于家庭已经建立了适当的关系，您可以加入它并按关系 (cht_id) 进行分组并获得您的计数。

但是由于成员表具有二级关系并且您想要另一个求和，因此您必须“预聚合”它并通过您的相关表 (household_tbl) 公开关系。

```
 SELECT cht_id as cht, 
            name, 
            count(*) as households_cnt,
            members.cnt as member_cnt
       FROM tbl_cht_members cht
  LEFT JOIN household_tbl households  
         ON households.cht_id = cht.cht_id
  LEFT JOIN (SELECT ht.cht_id, count(*) as cnt
               FROM tbl_household_members thm 
               JOIN household_tbl ht 
                 ON thm.household_connector_id = ht.household_connector_id
              GROUP BY thm.cht_id) members
         ON members.cht_id = cht.cht_id
   GROUP BY cht.cht_id, name, members.cnt 
```

单独说明：它确实有助于组织表格的命名。您将“tbl”作为前修复和后修复 - 非常令人困惑。事实上，我可能会把它完全排除在外。

# .htaccess - 规范 https 和 www

> ID：15982996
> 
> 赞同：0
> 
> 时间：2013-04-13T00:50:07.557
> 
> 标签：.htaccess, mod-rewrite, redirect, https, http-status-code-301

抱歉，如果这对某些人来说似乎很简单。

过去，我使用互联网上的那段代码设置了 301 重定向：

```
Options +FollowSymlinks
RewriteEngine on
rewritecond %{http_host} ^domain.com [nc]
rewriterule ^(.*)$ http://www.domain.com/$1 [r=301,nc] 
```

但是，对于这个特定的项目，有些事情让我不确定。

1）我正在使用https，所以现在有四个CName（（CName）是正确的术语吗？） [https://example.com](https://example.com) [https://www.example.com](https://www.example.com) [http://example.com](http://example.com) [http:// /www.example.com](http://www.example.com)

2) 我正在使用需要 .htaccess 文件的 CMS，以便在运行网站时搜索 CSS 和其他信息。因此，作为一个技术含量较低的人，我担心摆弄 .htaccess 文件（当此文件丢失之前，该文件因一个单独的问题而死，该网站无法正常运行）

问题：1）我将重定向放置在 .htaccess 文件的哪个位置是否重要？文件的开始/结束？2）我将如何更改上面的代码段以考虑到 https？

这是 .htaccess 代码

```
# Turn on URL rewriting only when mod rewrite is turn on

<IfModule mod_rewrite.c>
    RewriteEngine On

    # Installation directory
    RewriteBase /

    # Protect application and system files from being viewed
    RewriteRule ^(application|modules|system|tests|sql) - [F,L]

    # Allow any files or directories that exist to be displayed directly
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # Rewrite all other URLs to index.php/URL
    RewriteRule .* index.php?kohana_uri=$0 [L,QSA]
</IfModule>

# Protect the htaccess from being viewed
<Files .htaccess>
    order allow,deny
    deny from all
</Files>

# Don't show directory listings for URLs which map to a directory.
Options -Indexes

#Follow symlinks
Options +FollowSymlinks 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:10:04.527

要将所有请求重定向到`http://example.com`，您可以在规则前面加上

```
RewriteCond %{HTTP_HOST} ^www\.example\.com$ [OR]
RewriteCond %{HTTPS} =on
RewriteRule ^.*$ http://example.com/$0 [R,L] 
```

这将重定向所有请求，这些请求带有 HTTPS`www.example.com`或两者兼有。

当一切按预期工作时，您可以更改`R`为`R=301`.

永远不要在启用的情况下进行测试，有关详细信息`301`，请参阅此答案[提示调试 .htaccess 重写规则](https://stackoverflow.com/a/9204355/1741542)。