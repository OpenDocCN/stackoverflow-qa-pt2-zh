# StackOverflow 问答 12538000-12538999

# c# - 实体框架 5 - 抽象类型“X”没有映射的后代，因此无法映射

> ID：12538004
> 
> 赞同：3
> 
> 时间：2012-09-21T20:51:37.310
> 
> 标签：c#, entity-framework, entity-framework-5, quickfix, fix-protocol

尝试操作[此对象](https://github.com/gbirchmeier/quickfixn/blob/master/QuickFIXn/Message/FIX44/TradeCaptureReportRequestAck.cs)时出现以下错误。有人有什么想法吗？该[项目位于 GitHub 上，但除非您有](https://github.com/gbirchmeier/quickfixn)[FIX](http://fixprotocol.org/)服务器，否则您很可能无法运行它。我似乎无法上网此错误消息。

```
 System.InvalidOperationException was unhandled by user code
      Message=The abstract type 'QuickFix.Fields.IField' has no mapped descendents and so cannot be mapped. Either remove 'QuickFix.Fields.IField' from the model or add one or more types deriving from 'QuickFix.Fields.IField' to the model. 
      Source=EntityFramework
      StackTrace:
           at System.Data.Entity.ModelConfiguration.Edm.Services.StructuralTypeMappingGenerator.GetEntityTypeMappingInHierarchy(DbDatabaseMapping databaseMapping, EdmEntityType entityType)
           at System.Data.Entity.ModelConfiguration.Edm.Services.AssociationTypeMappingGenerator.GenerateIndependentAssociationType(EdmAssociationType associationType, DbDatabaseMapping databaseMapping)
           at System.Data.Entity.ModelConfiguration.Edm.Services.AssociationTypeMappingGenerator.Generate(EdmAssociationType associationType, DbDatabaseMapping databaseMapping)
           at System.Data.Entity.ModelConfiguration.Edm.Services.DatabaseMappingGenerator.GenerateAssociationTypes(EdmModel model, DbDatabaseMapping databaseMapping)
           at System.Data.Entity.ModelConfiguration.Edm.Services.DatabaseMappingGenerator.Generate(EdmModel model)
           at System.Data.Entity.ModelConfiguration.Edm.EdmModelExtensions.GenerateDatabaseMapping(EdmModel model, DbProviderManifest providerManifest)
           at System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo)
           at System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection)
           at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
           at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
           at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
           at System.Data.Entity.Internal.InternalContext.Initialize()
           at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
           at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
           at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
           at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
           at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
           at System.Data.Entity 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:59:54.930

现在这是一个非常有用的错误消息。

> 抽象类型“QuickFix.Fields.IField”没有映射的后代，因此无法映射。从模型中删除“QuickFix.Fields.IField”或将一种或多种派生自“QuickFix.Fields.IField”的类型添加到模型中。

显然你有一个抽象类（接口？）`IField`，你正试图从你的上下文中获取这些的集合。当它是一个抽象类时，您需要拥有一个或多个派生类（由鉴别器列定义），EF 才能实现查询结果。

如果它是一个接口，则不应映射该接口，而应映射一个实现它的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:29:14.950

QuickFix 消息对象不是简单的 DTO，这使得它们不适合使用任何 ORM 映射到数据库。QuickFix 为每个 FIX 字段类型定义了不同的 IField 派生类。这意味着您必须将 IField 接口映射到数据库和每个单独的字段类型。

更糟糕的是，QuickFix/N 是 Java 的一个端口，其中包含许多 Javaisms，这使得映射非常困难，例如使用 getter/setter 方法而不是属性。另一个障碍是每个 FIX 版本都有一个单独的命名空间，这意味着如果要为所有 FIX 版本持久保存消息，则必须将 4-5 个不同的命名空间映射到一些相同的类。

更好的选择是创建单独的 DTO 对象，您可以将其映射到数据库并将 QuickFix 消息对象转换为您的 DTO。幸运的是，QuickFix 包含各种 XML 格式的 FIX 版本的数据字典，您可以使用代码生成器生成 DTO。

为了使转换更容易，您可以使用[AutoMapper](https://github.com/AutoMapper/AutoMapper)等基于约定的工具将 QuickFix 对象转换为您的 DTO，而无需自己编写转换代码。

# mysql - MySQL分页结果，缓存还是nocache？

> ID：12538005
> 
> 赞同：0
> 
> 时间：2012-09-21T20:51:40.227
> 
> 标签：mysql, caching

使用 MySQL，我有许多查询，如下所示：

```
SELECT * FROM table_name WHERE some_clause ORDER BY id LIMIT 1000 OFFSET 0
SELECT * FROM table_name WHERE some_clause ORDER BY id LIMIT 1000 OFFSET 1000
SELECT * FROM table_name WHERE some_clause ORDER BY id LIMIT 1000 OFFSET 2000
SELECT * FROM table_name WHERE some_clause ORDER BY id LIMIT 1000 OFFSET 3000 
```

等等。关键是我正在对结果集进行分页。每个偏移量只会执行一次，因此缓存它没有意义。但是，我最终将遍历所有结果。在这种情况下，我非常关心污染我们的查询缓存。

如果我添加 SQL_NO_CACHE，这将导致 MySQL 停止缓存结果。这是最有效的吗，因为每个特定的结果集只会使用一次？或者 MySQL 是否足够聪明，可以一次缓存整个结果集，根据每个请求的限制和偏移量提取子集？

换句话说，如果我不使用 SQL_NO_CACHE，上面的四个示例 SQL 语句会导致一个查询和三个缓存响应，还是会导致四个单独的未缓存查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:05:48.510

根据[MySQL 关于查询缓存的文档](http://dev.mysql.com/doc/refman/5.5/en/query-cache.html)，“如果稍后收到相同的语句，服务器会从查询缓存中检索结果，而不是再次解析和执行该语句。”

具体来说，以下两个语句被认为是不同的，即使它们仅在大小写上有所不同，因此不会被缓存：

```
SELECT * FROM tbl_name
Select * from tbl_name 
```

因此，很明显，在我上面的问题中，添加 SQL_NO_CACHE 是正确的做法，因为 MySQL 的查询缓存在这里毫无用处。

# mapping - 简单的注入器注册 IMappingEngine (AutoMapper)

> ID：12538007
> 
> 赞同：8
> 
> 时间：2012-09-21T20:51:52.397
> 
> 标签：mapping, automapper, profile, simple-injector

我以前使用过 Autofac，但现在我想试试 SimpleInjector。我的问题是，在我的方法中调用 mappingEngine 时出现以下错误：

> **缺少类型映射配置或不支持的映射。**
> 
> 映射类型：Something -> SomethingDto 目标路径：IEnumerable`1[0]
> 
> 源值：

```
_mappingEngine.Map<IEnumerable<SomethingDto>>(IEnumerableOfSomething);

^-- doesn't work

Mapper.Map<IEnumerable<SomethingDto>>(IEnumerableOfSomething);

^-- works (That's not what I want) 
```

Mapper.Map 不是我想要的。我在这里基于此注册 Automapper：

[将 Ninject 替换为 Simple Injector](https://stackoverflow.com/questions/11658786/replace-ninject-with-simple-injector)

```
container.Register<ITypeMapFactory, TypeMapFactory>();
container.RegisterAll<IObjectMapper>(
    MapperRegistry.AllMappers());
container.RegisterSingle<ConfigurationStore>();
container.Register<IConfiguration>(() => 
    container.GetInstance<ConfigurationStore>());
container.Register<IConfigurationProvider>(() => 
    container.GetInstance<ConfigurationStore>());
container.Register<IMappingEngine, MappingEngine>(); 
```

* * *

```
Mapper.Initialize(x =>
            {
                var profiles = container.GetAllInstances<Profile>();

                foreach (var profile in profiles)
                {
                    x.AddProfile(profile);
                }
            });

        Mapper.AssertConfigurationIsValid(); 
```

我的问题是，如何在 SimpleInjector 中注册 IMappingEngine 并正确添加我的配置文件？

提前致谢！

迎接 mtrax

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T10:16:13.037

**解决了！**:-)

在启动 MvcControllerFactory 后，我注册配置文件太晚了。我希望我的伪示例可以帮助您防止这样的错误。

```
// SimpleInjector
var container = new Container();

// AutoMapper registration
container.Register<ITypeMapFactory, TypeMapFactory>();
container.RegisterCollection(MapperRegistry.Mappers);
container.RegisterSingleton<ConfigurationStore>();
container.Register<IConfiguration>(container.GetInstance<ConfigurationStore>);
container.Register<IConfigurationProvider>(container.GetInstance<ConfigurationStore>);
container.RegisterSingleton(() => Mapper.Engine);

// AutoMapper Profiles registration
container.RegisterCollection<Profile>(new MappingAProfile(), 
                                      new MappingBProfile(), 
                                      new MappingCProfile());

// Adding AutoMapper profiles
Mapper.Initialize(x =>
    {
        var profiles = container.GetAllInstances<Profile>();

        foreach (var profile in profiles)
        {
            x.AddProfile(profile);
        }
    });

Mapper.AssertConfigurationIsValid();

container.Verify();

container.RegisterAsMvcControllerFactory(); 
```

*RegisterAsMvcControllerFactory() 可在以下位置找到：[Simple Injector MVC Integration Guide](http://simpleinjector.codeplex.com/wikipage?title=MVC%20Integration)。

# android - Android 4.0.4 MediaPlayer 使用 RTSP url 准备问题

> ID：12538013
> 
> 赞同：8
> 
> 时间：2012-09-21T20:52:15.747
> 
> 标签：android, media-player, rtsp, android-4.0-ice-cream-sandwich

我正在使用的视频流应用程序遇到一个奇怪的问题。视频/音频的实际流在我所有的测试设备上都运行良好。但是，在看似任何 4.0+ 的设备上，当使用 RTSP URL 时，prepare() 会立即返回（这会导致在加载视频时向用户提供适当的反馈并干扰我现有的一些其他系统）。

下面是我初始化和设置 MediaPlayer 的代码块，但请记住以下几点：

*   我的 initPlayer 方法是从 AsyncTask 调用的。
*   视频最终会正确播放，但准备立即返回会导致在视频加载期间缺乏对用户的反馈。
*   整个过程不会出现任何错误
*   通过我的 OnPreparedListener 中的 onPrepared 方法在 MediaPlayer 上调用 start()，当 prepare() 在实际准备好播放之前返回时，这显然会成为一个问题。
*   HTTP 流似乎工作正常，并且在低于 4.0 的每个测试设备上都不会出现此问题。

我一直在尝试解决这个问题很长一段时间，但找不到其他遇到这个问题的人。任何想法将不胜感激。

```
 public void initPlayer() {
        //We first need to make sure the MediaPlayer isn't null
        if(mMediaPlayer==null){
            mMediaPlayer = new MediaPlayer();
            mMediaPlayer.setOnPreparedListener(mediaPlayerPreparedListener);
            mMediaPlayer.setOnCompletionListener(mediaPlayerCompletionListener);
            mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        }
        //If a video/stream has been chosen while another is already playing
        else if(mMediaPlayer.isPlaying()){
            mMediaPlayer.reset();
        }
        //Video is not in full screen mode
        second = false;
        try {
            mMediaPlayer.setDataSource(videoString);
            holder = mPreview.getHolder();
            mMediaPlayer.setDisplay(holder);
            mMediaPlayer.prepare();
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
        } catch (SecurityException e) {
            e.printStackTrace();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    //onPreparedListener
    private OnPreparedListener mediaPlayerPreparedListener = new OnPreparedListener(){
        public void onPrepared(MediaPlayer mp) {
            mp.start();
            vidPb.setVisibility(View.INVISIBLE);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T14:52:59.803

使用[`mp.prepareAsync()`](http://developer.android.com/reference/android/media/MediaPlayer.html#prepareAsync%28%29)它更适合流媒体。`prepare()`在 MediaPlayer 准备好播放或发生 IllegalStateException 之前使用块。此外，在 android 4 (ICS) 中，对任何 UI 线程的阻塞更加严格，可能会导致出现 ANR（活动无响应）对话框。

最后一个想法，尽量避免 `e.printStackTrace();`在 android 应用程序中使用。相反，使用 将`Log.e("TAG_STRING", e.getMessage(), e);`错误打印到您可以从[**logcat**](http://developer.android.com/tools/debugging/ddms.html#logcat)访问的 android 日志系统。

总而言之，它应该看起来像这样：

```
 try {
        mMediaPlayer.setDataSource(videoString);
        holder = mPreview.getHolder();
        mMediaPlayer.setDisplay(holder);
        mMediaPlayer.prepareAsync();
    } catch (IllegalArgumentException e) {
        Log.e("TAG_STRING", e.getMessage(), e);
    } catch (SecurityException e) {
        Log.e("TAG_STRING", e.getMessage(), e);
    } catch (IllegalStateException e) {
        Log.e("TAG_STRING", e.getMessage(), e);
    } catch (IOException e) {
        Log.e("TAG_STRING", e.getMessage(), e);
    } 
```

# php - 跟踪 Wordpress 进程

> ID：12538023
> 
> 赞同：0
> 
> 时间：2012-09-21T20:53:26.700
> 
> 标签：php, html, wordpress, .htaccess

在我被 RTM 轰炸之前，我用谷歌搜索过这个，但我得到的只是关于如何安装主题的教程。

我必须更改朋友网站的链接。通常我只会 ssh 进入服务器发出命令`vim index.html`并将其更改`<a href='this.html'>This<\a>`为 `<a href='that.html'>That<\a>`，但 wordpress 真的是我的头脑。更改`index.html`文件中的链接没有影响，而且我可以说有一些差异让我相信它根本没有被使用

所以我首先看的是`.htaccess`文件：

```
DirectoryIndex index.php index.html

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

接下来我查看了`index.php`文件：

```
<?php
/**
 * Front to the WordPress application. This file doesn't do anything, but loads
 * wp-blog-header.php which does and tells WordPress to load the theme.
 *
 * @package WordPress
 */

/**
 * Tells WordPress to load the WordPress theme and output it.
 *
 * @var bool
 */
define('WP_USE_THEMES', true);

/** Loads the WordPress Environment and Template */
require('./wp-blog-header.php'); 
```

所以接下来我去了`wp-blog-header.php`然后`wp-config.php`我就放弃了。

我想知道的是 wordpress 模板到底是做什么的。他们是否只是设置了一些 CSS 代码并使其更容易链接到博客和 Facebook？我正在寻找的是 wordpress Dashboard 中类似于以下内容的内容：

```
Main Page = index.html 
```

但这样的事不存在。在`pages`选项卡下有一个“主页”页面，这绝对是我输入的“主页”，但是当我单击“查看页面源代码”时，Wordpress 中显示的 html 代码与 HTML 代码不匹配。那么这个新代码究竟是在哪里生成的呢？我需要以某种方式拦截它并更改链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T13:58:41.383

Wordpress 主题基于模板文件，这些模板文件会根据内容自动加载。有很多不同的可能性，但一般来说 index.php 是所有请求的调用，然后加载适当的模板文件。这些文件将位于`wp-content/themes/YOURTHEME`

*   `header.php`从大多数页面调用并定义模板的顶部
*   `footer.php`从大多数页面调用并定义模板的底部
*   `page.php`定义“页面”帖子类型的内容部分
*   `category.php`定义“类别”的内容部分

其他文件可以定义自定义模板，然后通过在 Wordpress Admin 中的页面编辑器右侧选择该模板，将其用于特定页面。

您可以在此处找到有关 Wordpress 主题模板的更多信息：http: [//codex.wordpress.org/Template_Hierarchy](http://codex.wordpress.org/Template_Hierarchy)

# ember.js - Ember.js 标记活动菜单绑定被误解

> ID：12538026
> 
> 赞同：0
> 
> 时间：2012-09-21T20:53:42.050
> 
> 标签：ember.js

我试图完全理解问题[emberjs 的先前答案 - 如何使用路由器基础设施标记活动菜单项](https://stackoverflow.com/questions/11628489/emberjs-how-to-mark-active-menu-item-using-router-infrastructure)

在答案中，我试图简化（不使用插座导航，也没有在根目录下添加二级路由），但在我的情况下，活动链接不起作用：//

这是一个小提琴：http: [//jsfiddle.net/archange/Scqxw/](http://jsfiddle.net/archange/Scqxw/)

我在小提琴中不明白的是为什么“isActive：function（）”在路由器上设置后没有更新......：/

所以如果有人路过可以解释我的原因。非常感谢。如果有人有另一种处理导航菜单的解决方案（也许使用 bindAttr ？）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T02:11:23.070

这里发生的情况是，当模板/视图创建另一个视图时，它使新创建的视图可以访问它的控制器。例如：

```
<script type="text/x-handlebars" data-template-name="application">
    {{view App.NavigationView}}
</script> 
```

导航视图的控制器将是实例`applicationController`。这是预期的行为。

如果您想告诉新创建`NavigationView`的控制器使用另一个控制器，只需将其传入，如下所示：

```
{{view App.NavigationView controllerBinding="navigationController"}} 
```

请注意，我将这两个控制器连接在一起`App.ready`。

这是您编辑的小提琴：http: [//jsfiddle.net/Scqxw/5/](http://jsfiddle.net/Scqxw/5/)

# php - Smarty modifer/plugin 从数组中获取标签

> ID：12538027
> 
> 赞同：0
> 
> 时间：2012-09-21T20:53:48.683
> 
> 标签：php, smarty, smarty3

这是我从 CMS 发送到 Smarty 的示例数组。

```
[field] => Array
(
    [value] => 19
    [options] => Array
        (
            [labels] => Array
                (
                    [0] => --- Select ---
                    [1] => John
                    [2] => Mark
                    [3] => Luke
                    [4] => Philip
                )

            [values] => Array
                (
                    [0] => 
                    [1] => 15
                    [2] => 1
                    [3] => 19
                    [4] => 17
                )

        ) 
```

所以我通常会写`{$field.value}`或`{html_options values=$field.options.values output=$field.options.labels selected=$field.value}`

我的问题是如何轻松地从值中获取标签。我试过这个：`{$field.options.labels[$field.value]}`但后来意识到这只是获取数组的索引而不是值。

我知道您可以在 {foreach/if} 中执行此操作，但这会在模板中变得混乱。有没有办法为此编写插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:20:31.147

如果没有 foreach 循环，它可以在单行中完成：

```
{$field.options.labels[$field.value|array_search:$field.options.values]} 
```

或修饰符：

```
function extractLabel($field){
    $idx = array_search($field['value'], $field['options']['values']);
    if($idx !== FALSE && isset($field['options']['labels'][$idx])){
        return $field['options']['labels'][$idx];       
    }
}

$smarty->registerPlugin('modifier', 'extractLabel', 'extractLabel'); 
```

tpl：

```
{$field|extractLabel} 
```

# javascript - 在Javascript中动态地将边界半径分配给li first-child

> ID：12538030
> 
> 赞同：0
> 
> 时间：2012-09-21T20:53:58.923
> 
> 标签：javascript, dynamic, css

我正在尝试为第一个和最后一个孩子创建一个带有圆角的导航栏（使用无序列表）。我想使用 onclick javascript 函数并在 javascript 中动态分配圆角。这是我尝试过的代码。谁能指出我的原因和/或提出解决方案或资源？提前非常感谢。

HTML：

```
 <nav>
                        <ul id="navBar">
                            <li><a href="#" title="View"><div class="menu" onClick="select(this)">View</div></a></li>
                            <li><a href="#" title="Duplicate"><div class="menu" onClick="select(this)">Duplicate</div></a></li>
                            <li><a href="#" title="Edit"><div class="menu" onClick="select(this)">Edit</div></a></li>
                            <li><a href="#" title="Delete"><div class="menu" onClick="select(this)">Delete</div></a></li>
                    </ul>
                  </nav> 
```

Javascript：

```
 document.getElementById('ul#navBar li:first-child').style.MozBorderRadiusTopleft = '13px';
document.getElementById('ul#navBar li:first-child').style.MozBorderRadiusBottomleft = '13px';
document.getElementById('ul#navBar li:last-child').style.MozBorderRadiusTopRight = '13px';
document.getElementById('ul#navBar li:last-child').style.MozBorderRadiusBottomRight = '13px'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:58:32.183

`getElementById`不将选择器作为其参数。使用时只需要元素的有效 id。您可能正在考虑[jQuery](http://jquery.com/)：

```
$('ul#navBar li:first-child').css({
    MozBorderRadiusTopleft: '13px'
});

$('navBar li:first-child').css({
    MozBorderRadiusBottomleft: '13px'
});

$('ul#navBar li:last-child').css({
    MozBorderRadiusTopRight: '13px'
});

$('navBar li:last-child').css({
    MozBorderRadiusBottomRight: '13px'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:10:18.780

我会让事情变得非常简单。首先为圆角定义两个 css 类：

```
 .round-top {
      MozBorderRadiusTopleft:13px;
      MozBorderRadiusTopRight:13px;

  }

  .round-bottom {
      MozBorderRadiusBottomleft:13px;
      MozBorderRadiusBottomRight:13px;
   } 
```

然后，您可以简单地从您感兴趣的元素中添加/删除类。在 javascript 中：

```
 var container = document.getElementById(navBar);
   container.firstChild.setAttribute("class", "round-top");
   container.lastChild.serAttribute("class", "round-bottom"); 
```

查询：

```
 $('#navBar li:first-child').addClass('round-top');
   $('#navBar li:last-child').addClass('round-bottom'); 
```

完整的事件侦听器将类似于：

```
 function addBorders(){
     var container = document.getElementById(navBar);
     container.firstChild.setAttribute("class", "round-top");
     container.lastChild.serAttribute("class", "round-bottom");
 }

 //target is the element you want to trigger the event
 target.addEventListener("click", addBorders, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:21:56.623

如果你可以使用 jquery，你可以用下一个方法而不是“border”，“3px double red”你应该使用你的样式

```
<script type="text/javascript" language="javascript">
         var Menu = {
            rootEl: null,

            Init: function (idRootEl) {
                this.rootEl = $(idRootEl);
                this.initItems();
                this.setFirstElSeleceted();
            },
            setFirstElSeleceted: function () {
                $($(this.rootEl).find('li')[0]).css("border", "3px double red");
            },
            initItems: function () {
                var self = this;

                $(self.rootEl).find('li').each(function (indx) {
                    $(this).click(function () {
                        self.removeSelection();
                        self.setSelected(this);
                    });

                });
            },
            setSelected: function (el) {
                $(el).css("border", "3px double red");
            },
            removeSelection: function () {
                var self = this;
                $(self.rootEl).find('li').each(function (el) {
                    $(this).css("border", "");
                });
            }
        };

        $(function() {
            Menu.Init('ul#navBar');
         });
        </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T21:23:09.430

样式表的 CSS：

```
.is-rounded li:first-child {
    -moz-border-radius: 13px 0 0 13px;
    -webkit-border-radius: 13px 0 0 13px;
    border-radius: 13px 0 0 13px;
}

.is-rounded li:last-child {
    -moz-border-radius: 0 13px 13px 0;
    -webkit-border-radius: 0 13px 13px 0;
    border-radius: 0 13px 13px 0;
} 
```

Javascript：

```
function makeRounded(e) {
   document.querySelector('#navBar').className += 'is-rounded';
}

document.querySelector('#el').addEventListener('click', makeRounded, false); 
```

这假设 id 为“el”的元素是在单击时触发整个事件的元素。

见例子：http: [//jsfiddle.net/cgrFe/3/](http://jsfiddle.net/cgrFe/3/)

你似乎对此知之甚少。几本书可以帮助您入门：[http](http://domscripting.com/book/) ://domscripting.com/book/和[http://domenlightenment.com/](http://domenlightenment.com/)。两者中的最后一个是相当新的，但必须是好的。

# java - 使用 Jcalendar 设置日期

> ID：12538031
> 
> 赞同：0
> 
> 时间：2012-09-21T20:54:00.807
> 
> 标签：java, calendar, jcalendar

我已经使用 JCalender 来获取日期。它像这样返回日期

2012 年 3 月 1 日星期四 18:35:53 PST

但我需要的是这种格式。

2012 年 9 月 4 日

这是我正在使用的代码：

```
java.util.Date s = txt_dob.getDate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:12:40.980

您可以根据需要尝试[SimpleDateFormat或](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)[DateFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html)的其他实现来格式化您的日期字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:19:10.360

找到解决办法了！！！！！！！！！！！！:) :)

```
String s = ((JTextField)txt_dob.getDateEditor().getUiComponent()).getText(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:10:54.847

具有讽刺意味的是，即使你给我们的代码片段并没有真正表明你自己解决问题的努力，或者告诉我们`JCalendar`你正在使用哪个库，我想我可以猜到哪里出了问题。

您可能只是在`toString()`（可能是隐式地）调用`java.util.Date`. 不要那样做 - 它总是假定本地时区和基于系统区域设置的默认格式。

相反，使用`SimpleDateFormat`- 并记住适当地设置时区，并可能设置语言环境。例如：

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy MMM dd", Locale.US);
formatter.setTimeZone(TimeZone.getTimeZone("UTC"));
String text = formatter.format(txt_dob.getDate()); 
```

如果这不起作用，您将不得不给我们更多的背景信息。

# installshield - 如何使用 Install Shield 在任务管理器中运行进程

> ID：12538035
> 
> 赞同：1
> 
> 时间：2012-09-21T20:54:22.530
> 
> 标签：installshield, uninstallation

我对 Installsheild 很陌生，它正在编程。我们有一个使用 MMC.exe 运行的应用程序。在卸载过程中，我们需要检查应用程序是否正在运行，如果是，则需要关闭应用程序。如果用户运行应用程序，则任务管理器中正在运行进程 mmc.exe。如何检查MMC.exe是否在任务管理器中运行

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:19:55.430

取自[这个](https://superuser.com/questions/232703/taskkill-exe-dont-throw-an-error-if-the-process-is-not-running)问题：

将此代码放在批处理中并在卸载期间运行它。如果您的项目是 msi 项目，那么您可以将其放入自定义操作中，如果它是 installscript 项目，则将其放入 onmaintui 函数中。

```
tasklist /FI "IMAGENAME eq mmc.exe" 2>NUL | find /I /N "mmc.exe">NUL
if "%ERRORLEVEL%"=="0" taskkill /f /im mmc.exe 
```

# bash - 将带空格的参数发送到bash中的另一个脚本

> ID：12538043
> 
> 赞同：0
> 
> 时间：2012-09-21T20:54:57.250
> 
> 标签：bash, variables, scripting

我需要在第一个脚本中将变量发送到另一个脚本 (BASH) 和 uset。代码是这样的：

```
read var
source myscipt.sh $var
echo $var 
```

问题是，如果 y 在将 $var 发送到 myscript.sh 后输入空格时，我只有第一个。

注意：在 myscript.sh 我只使用 $1 这与问题有关吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:56:41.427

您需要使用引号。因此 var 将被视为仅一个参数，即使它包含空格。

```
source myscipt.sh "$var" 
```

# java - 读取字符串并将其放入数组时出现这个非常烦人的错误

> ID：12538045
> 
> 赞同：-2
> 
> 时间：2012-09-21T20:54:59.967
> 
> 标签：java

这是我在 Dropbox 中下载和阅读文件中文本的代码。版本是一个 URL。

```
BufferedReader in = new BufferedReader(new InputStreamReader(version.openStream()));
String inputLine;
int line = 0;
try{
    while ((inputLine = in.readLine()) != null){
        strings[line] = new String(inputLine);
        line++;
    }
} catch (Exception e){
    e.printStackTrace();
} 
```

虽然，我得到了这个非常烦人的错误。

java.lang.ArrayIndexOutOfBoundsException: 1
at sky.the.venture.client.Download.getCredits(Download.java:38)
at sky.the.venture.client.LauncherFrame.credits(LauncherFrame.java:315)
at sky.the。 Venture.client.LauncherFrame.(LauncherFrame.java:49)
at sky.the.venture.Destiny.(Destiny.java:13)
at Start.main(Start.java:11)

所以，错误的部分是 Download .java:38。哪个是

```
strings[line] = new String(inputLine); 
```

所以如果有人能帮忙，我会很高兴=D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T20:56:32.020

那么大概你只创建了一个这样的数组：

```
String[] strings = new String[1]; 
```

数组在 Java 中不会自行调整大小 - 事实上，它们*无法*调整大小。如果您想要一个动态大小的集合，请使用以下`List<E>`实现`ArrayList<E>`：

```
List<String> lines = new ArrayList<String>();
while ((inputLine = in.readLine()) != null) {
    lines.add(inputLine);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T20:58:02.227

您似乎正在尝试写入`strings`尚未分配的数组元素。例如，如果您分配了类似`strings[10]`, 并`lines`递增到 11，您将收到 ArrayIndexOutOfBoundsException 异常。

# java - JAVA，@Pattern(regexp="[[:Alpha:]]+") 只允许 aaaa's 而不是字母字符？

> ID：12538046
> 
> 赞同：0
> 
> 时间：2012-09-21T20:55:08.247
> 
> 标签：java, regex

```
@NotNull
@Pattern(regexp="[[:Alpha:]]+", message="Only Alphabetic chars allowed")
protected String name; 
```

这仅允许 aaaa 作为输入，例如尝试将字符串设置为“apple”dosent 工作。但是将字符串设置为“aaaaaa”工作。我只想允许字母字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:06:40.153

你可以使用：

```
@Pattern(regexp="\\p{Alpha}+", message="Only Alphabetic chars allowed") 
```

# visual-studio-lightswitch - 桌面应用程序中的 Visual Studio 2012 Lightswitch“无法连接到服务器”

> ID：12538050
> 
> 赞同：1
> 
> 时间：2012-09-21T20:55:40.757
> 
> 标签：visual-studio-lightswitch

成功发布应用程序后，我得到以下屏幕。错误消息显示“应用程序由于错误而停止响应，需要重新启动。错误详细信息：无法连接到服务器。请联系网络管理员。”

我该如何调试呢？或者有谁知道会发生什么？

![在此处输入图像描述](../Images/d84f7589b990255cbec3504196e9b2a7.png)

# sitecore - Sitecore 媒体转换工具未安装

> ID：12538052
> 
> 赞同：0
> 
> 时间：2012-09-21T20:55:42.087
> 
> 标签：sitecore, sitecore6, sitecore-media-library

或者，或者，我没有做正确的事情。我安装了这个模块（http://trac.sitecore.net/MediaConversionTool/#），但随后访问

```
http://localhost/sitecore modules/media conversion tool 
```

返回一个 Sitecore 404（当 Sitecore 处理程序不知道如何处理您的请求时获得的页面）。我已经确定 /sitecore modules/media 转换工具在 IgnoreURLPrefixes 列表中。我还会缺少什么？

该工具应该有助于将文件从 app_data 迁移到数据库中，反之亦然。不过，我不认为问题出在工具上。我认为它与安装有关，而且我猜还有一些我没有涉及的步骤。这是我第一次尝试安装 sitecore 包。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T10:01:16.130

媒体转换工具作为 Sitecore 应用程序安装。您应该从 Sitecore 客户端内部的开始按钮 -> 所有应用程序 -> 媒体转换工具下打开它。由于它是一个 XAML 应用程序，因此无法通过您正在使用的 url 打开它。

# javascript - Ember 数据 localStorage 适配器：查找函数抛出错误

> ID：12538053
> 
> 赞同：3
> 
> 时间：2012-09-21T20:55:46.823
> 
> 标签：javascript, web-applications, ember.js

我正在为 Ember 数据滚动一个 localStorage 适配器，当我运行 find 函数时，即：

```
App.store.find(App.Person, 0 ); 
```

我收到此错误：

```
Uncaught Error: assertion failed: A data hash was loaded for a model of type App.Person but no primary key 'undefined' was provided. 
```

在更一般的层面上，我对“持久层”（在本例中为 localStorage ）和 Ember 存储之间的关系有点困惑。将东西加载到商店是什么意思？这是否意味着 DS.Person 模型的实例是用数据创建的？

另外，如果您注意到我在 createRecord 方法中注释掉了一行“App.store.didCreateRecord(model, data)”，因为它也不起作用。如果在记录加载到 localStorage 后我不调用 store.didCreateRecord 会发生什么。

细节：

```
DS.LocalStorageAdapter = DS.Adapter.extend({

    get: Ember.get,
    set: Ember.set,

    createRecord: function( store, modelType, model ){
        var records, index, data;
        // get existing records of this model
        records = this.localStorage.get( modelType );
        index = records.length;
        data = this.get( model, 'data' );
        // set storageID of data
        data.set( 'storageID', index );

        // add data to existing records
        records[index] = data;
            // encode records
        records = JSON.stringify( records );
            // store records in localStorage
        this.localStorage.set( modelType, records );
        // App.store.didCreateRecord( model, data );

    },

    find: function( store, modelType, id ) {
        var records, model;
        records = this.localStorage.get( modelType );
        model = records[id];
        App.store.load( modelType, model );
    },

    localStorage: {
        set: function( modelType, value ){
            localStorage.setItem( modelType, value);
        },

        get: function( modelType ){
          var record = localStorage.getItem(modelType);
          record = JSON.parse(record) || [];
          return record;
        }

    }
});

//application model
App.Person = DS.Model.extend({
    name: DS.attr('string', {key: 'css_name'}),
    storageID: DS.attr('number', {defaultValue: 0, key: 'storageID'}),

});

//create a couple of records
App.store.createRecord(App.Person, {  ... } );
App.store.createRecord(App.Person, {  ... } );

//try and find one record
App.store.find(App.Person, 0);

error thrown:
Uncaught Error: assertion failed: A data hash was loaded for a model of type App.Person but    no primary key 'undefined' was provided. ember-latest.js:51
Ember.assert ember-latest.js:51
(anonymous function) ember-latest.js:131
DS.Store.Ember.Object.extend.load ember-data.js:1530
DS.LocalStorageAdapter.DS.Adapter.extend.find bookApp_1.js:111
DS.Store.Ember.Object.extend.findByClientId ember-data.js:1174
DS.Store.Ember.Object.extend.find ember-data.js:1140
findRecord webApplication.js:210
onclick 
```

另请注意，这与之前发布的另一个问题类似： [Ember Data: A data hash was loaded ... but no primary key 'undefined' was provided](https://stackoverflow.com/questions/10871953/ember-data-a-data-hash-was-loaded-but-no-primary-key-undefined-was-provi)

尽管那里的答案似乎并不能真正解释发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:50:01.443

可以举个例子加载 Ember 1.0 pre2 的夹具数据

```
App.store = DS.Store.create({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

App.User = DS.Model.extend({
  email: DS.attr('string'),
  password: DS.attr('string')
});

App.User.FIXTURES = [
  {
    "id": "1",
    "email": "test@mail.com",
    "password": "password"
  }
];

App.User.find(1).get('email') 
```

为我工作。

# c# - 将 Id 和 String 传递给 WebAPI Get

> ID：12538068
> 
> 赞同：0
> 
> 时间：2012-09-21T20:57:35.673
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我正在使用 New MVC Web Api 我有这样的东西：

```
 public class CustomersController : ApiController
    {
  public HttpResponseMessage Get()
        {
            //Return Somethings
        }
    } 
```

我用 /api/customers 调用它

现在我希望能够按国籍和 id 过滤，所以我做了这个：

```
public class CustomersController : ApiController
{
    public HttpResponseMessage Get(int Id, String Nat)
    {
        //and i filter here Return Somethings
    }
} 
```

如果我尝试使用`/api/customers/1/us`它调用第一种方法，我知道这些是查询字符串，那么我如何定义路由以便我可以使用`/api/customers/1/us`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:02:29.690

像这样的东西应该可以解决问题

```
routes.MapHttpRoute(
     name: "CustomersByIdAndNat",
     routeTemplate: "api/customers/{Id}/{Nat}/",
     defaults: new { controller = "Customers" }
); 
```

作为旁注，`/1/us`不是查询字符串。[Querystring](http://en.wikipedia.org/wiki/Query_string)是`?`在 url 上的符号之后出现的。例如在你的情况下，可能是这样的

```
api/customers/?id=1&nat=us 
```

不是说你需要改变url格式，只是解释一下这个概念。

# java - 遇到异常时如何避免打印异常并分配另一个操作？我的尝试不正确

> ID：12538069
> 
> 赞同：0
> 
> 时间：2012-09-21T20:57:43.770
> 
> 标签：java, exception, exception-handling

当用户没有在输入语句中输入任何内容时，我遇到了错误。我想过使用 Try/Catch 块来代替抛出异常来将 boolAskRepeat 设置为 true，这应该跳到代码的末尾并重复循环。

这不起作用，我相信我遗漏了一些东西，但我不确定是什么......它仍然抛出异常说：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 0
    at java.lang.String.charAt(Unknown Source)
    at ITSLab03.main(ITSLab03.java:34) 
```

这行代码是什么：`inputStatus = input.readLine().toLowerCase().charAt(0);`

我在这里做错了什么？

```
while (boolAskStatus == true)
{
    System.out.print("Employment Status (F or P): ");

    try 
    { 
        inputStatus = input.readLine().toLowerCase().charAt(0); 

        if (inputStatus == "f".charAt(0))
        {
            boolAskStatus = false;

            String stringCheckSalary = null;
            boolean boolCheckSalary = true;
            while (boolCheckSalary == true)
            {
                // some code
            }

            outputData(inputName, inputStatus, calculateFullTimePay(inputSalary));
        }
        else if (inputStatus == "p".charAt(0))
        {
            // some code                

            outputData(inputName, inputStatus, calculatePartTimePay(inputRate, inputHours));
        }
        else boolAskStatus = true;

    } 
    catch (IOException e) { boolAskStatus = true; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:58:20.540

您还需要捕获`StringIndexOutOfBoundsException`（如果您正确观察堆栈跟踪，这就是您遇到的异常）

```
 catch (StringIndexOutOfBoundsException e) {
            boolAskStatus = true;  
      } 
```

(或) catch`Exception`捕获所有运行时异常

```
catch (Exception e) {
                boolAskStatus = true;  
          } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:02:11.547

正常的 try catch 模式应该是这样的：

```
try
{
    // code that is vulnerable to crash
}
catch (Specific-Exception1 e1)
{
    // perform action pertaining to this exception
}    
catch (Specific-Exception2 e2)
{
    // perform action pertaining to this exception
}    
....
....
catch (Exception exp) // general exception, all exceptions will be caught
{
    // Handle general exceptions. Normally i would end the program or 
    // inform the user that something unexpected occurred.
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T21:06:40.593

通过使用`.charAt(0)`，您假设字符串的长度 > 0。

您可以通过执行以下操作来简化这一过程：

```
String entry = input.readLine().toLowerCase();
if (entry.startsWith("f")) {
    ...
}
else if ("entry".startsWith("p")) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T22:18:57.383

您的代码无法按照您想要的方式工作，因为`input.readLine().toLowerCase().charAt(0)`抛出了 a `StringIndexOutOfBoundsException`，而不是 a `IOException`，因此 catch 块永远不会被命中。您可以通过将 catch 更改为

```
catch (StringIndexOutOfBoundsExceptione e) { boolAskStatus = true; } 
```

但...

将程序的正常行为基于异常处理通常不是一个好主意。将异常抛出视为可能发生但通常不会发生的事情。为什么不使用类似的东西：

```
final String STATUS_F = "f";
final String STATUS_P = "p";

String fromUser = null;
do {
    String rawInput = input.readLine().toLowerCase();
    if (rawInput.startsWith(STATUS_F)) {
        fromUser = STATUS_F;
    } else if (rawInput.startsWith(STATUS_P)) {
        fromUser = STATUS_P;
    }
} while (fromUser == null);

if (STATUS_F.equals(fromUser)) {
    // do something
} else if (STATUS_P.equals(fromUser)) {
    // do something else
} else {
    // Shouldn't be able to get here!
    throw new Exception("WTF!?");
} 
```

阅读本文的其他人更容易理解程序为什么循环以及如何控制循环，部分原因是确定用户输入内容的代码和决定如何处理该信息的代码是分开的。另外，您不需要处理异常。

# php - 将 Twitter 关注者列表导出到 csv 文件

> ID：12538072
> 
> 赞同：-1
> 
> 时间：2012-09-21T20:57:57.650
> 
> 标签：php, twitter

我使用以下 php 代码来获取用户的 Twitter 关注者。我想将此数据导出到 csv 文件并添加过滤器以仅保存关注者超过 100 个的关注者。

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<?php
  $trends_url = "http://api.twitter.com/1/statuses/followers/pthiongo.json";
  $ch = curl_init(); 
  curl_setopt($ch, CURLOPT_URL, $trends_url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  $curlout = curl_exec($ch);
  curl_close($ch);
  $response = json_decode($curlout, true);
  foreach($response as $friends){
  $thumb = $friends['profile_image_url'];
  $url = $friends['screen_name'];
  $name = $friends['name'];
  echo $friends['screen_name'];

 ?>
<a title="<?php echo $name;?>" href="http://www.twitter.com/<?php echo $url;?>"><img class="photo-img" src="<?    php echo $thumb?>" border="0" alt="" width="40" /></a>
<?php
 } 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T18:50:28.707

首先， [http://blog.gabrieleromanato.com/2012/06/jquery-get-twitter-followers-count/](http://blog.gabrieleromanato.com/2012/06/jquery-get-twitter-followers-count/)

然后`if (followers_count > 99)` 在PHP中使用一个来显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-12T19:27:31.700

以编程方式，您可以使用下面的示例请求通过 Instagram API 请求最多 100 个您自己的关注者的列表。

下面的示例请求来自 SnippetLib：

```
https:api.instagram.comv1users3followed-by?access_token=ACCESS-TOKEN 
```

这条路线（来自 nbyim.com）使用分页来绕过速率限制：

```
from instagram.client import InstagramAPI

user_id=''
access_token = ''
client_secret = ''

api = InstagramAPI(access_token=access_token, client_secret=client_secret)

followers = []

# Get the followers list
for p in api.user_followed_by(user_id=user_id, as_generator=True, max_pages=None):
followers.extend(p[0])

# Convert from an instagram.models.User list to a list of strings
followers = [str(u).replace('User: ', '') for u in followers]

print len(followers), 'followers'
print followers 
```

要自动化 CSV 流程，您可以使用 Crowdbabble 之类的服务：[https ://www.crowdbabble.com/download-all-instagram-followers/](https://www.crowdbabble.com/download-all-instagram-followers/)

# actionscript-3 - 在 as3 中播放连续的 wav 声音

> ID：12538076
> 
> 赞同：3
> 
> 时间：2012-09-21T20:58:12.840
> 
> 标签：actionscript-3, external, wav

我正在尝试以连续方式播放 AS3 外部 wav 声音。显而易见的方法是使用此算法： 1\. 播放声音 1 2\. 当声音 1 完成时，播放声音 2 等等。

问题是我未能通过第 2 步（“当声音 1 完成时”部分）。

请只回答 wav 声音，不要回答 mp3。

这是我的代码：

```
package 
{
    import flash.display.Sprite;
    import flash.events.MouseEvent;
    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.events.Event;
    import flash.utils.ByteArray;
    import flash.media.Sound;
    import org.as3wavsound.WavSound;
    import org.as3wavsound.WavSoundChannel;

    public final class Main extends Sprite
    {
        public final function Main():void
        {
            playB.addEventListener(MouseEvent.MOUSE_UP, loadWav);
        }

        private final function loadWav(e:MouseEvent):void
        {
            var urlRequest:URLRequest = new URLRequest('Phone.wav');
            var wav:URLLoader = new URLLoader();
            wav.dataFormat = 'binary';
            wav.load(urlRequest);
            wav.addEventListener(Event.COMPLETE, playWav);
        }

        private final function playWav(e:Event):void
        {
            var tts:WavSound = new WavSound(e.target.data as ByteArray);
            tts.play();
        }
    }
} 
```

（当然这是第一步）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:30:50.150

尝试将您的声音放入从 play 命令返回的 SoundChannel 中，然后监听完整事件：

```
private final function playWav(e:Event):void
{
    var tts:WavSound = new WavSound(e.target.data as ByteArray);
    var channel:WavSoundChannel = tts.play();
    channel.addEventListener(Event.SOUND_COMPLETE, completeHandler)
}

private function completeHandler(e:Event):void {
    //play next sound
} 
```

# c# - F# 和 Mono Cecil 如何使用它？

> ID：12538077
> 
> 赞同：-3
> 
> 时间：2012-09-21T20:58:17.273
> 
> 标签：c#, f#, mono

我正在研究使用 F# 的混淆机制。

几个月前我用 C# 写了同样的东西，如下所示：

```
public void testobfusc(string file)
{
    AssemblyDefinition assembly = AssemblyDefinition.ReadAssembly(file);
    ModuleDefinition module = assembly.MainModule;
    foreach (TypeDefinition type in module.Types)
    {
        type.Name = "Yaobfuscatethis"; // Maybe I should use random function here
     }
 } 
```

现在，我正在尝试在 F# 中编写相同的内容。首先，我参考`Mono.Cecil`然后写：

```
open Mono.Cecil

let obfus(file:string)=
    use asm = AssemblyDefinition.ReadAssembly(file)
    let ModuleDefinition = asm.MainModule
    TypeDefinition(asm.MainModule.Types)
    t.Name = "" 
```

..但是这段代码不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:48:31.023

翻译（未测试）：

```
let testobfusc (file:string) = 
    let assembly = AssemblyDefinition.ReadAssembly(file)
    let ``module`` = assembly.MainModule
    ``module``.Types |> Seq.iter (fun t -> t.Name <- "Yaobfuscatethis") 
```

# facebook - Facebook API - 无法获取页面个人资料图片

> ID：12538078
> 
> 赞同：2
> 
> 时间：2012-09-21T20:58:18.317
> 
> 标签：facebook, facebook-graph-api

我有一个无法从中获取公开个人资料图片的页面。为什么会这样，为什么会发生？

有问题的页面是：（警告：脱衣舞娘的 NSFW 风格图像，真的很抱歉，我能找到的唯一示例 - 无论如何都不需要查看该页面） [https://www.facebook.com/pages/Texas-Poolhouse/98758030102](https://www.facebook.com/pages/Texas-Poolhouse/98758030102)

我可以通过图形 API 访问该页面。请注意，结果告诉我 ID 是 98758030102，正如预期的那样： [https ://developers.facebook.com/tools/explorer/?method=GET&path=98758030102](https://developers.facebook.com/tools/explorer/?method=GET&path=98758030102)

甚至也可以通过这种方式获取图像 URL： [https ://developers.facebook.com/tools/explorer/?method=GET&path=98758030102%2Fpicture](https://developers.facebook.com/tools/explorer/?method=GET&path=98758030102%2Fpicture)

但是，使用 ID，我无法像往常一样获取图像。我只是得到一个蓝色问号： http: [//graph.facebook.com/98758030102/picture](http://graph.facebook.com/98758030102/picture)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:03:54.550

您确定您使用的访问令牌来自可以查看该页面的用户吗？使用我自己的访问令牌时，我可以看到正确的图像 - 如果您不使用访问令牌，您将受限于公开可用的信息，并且考虑到页面的性质，它可能仅限于成年人，因为它的酒精含量和/或脱衣舞内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T04:50:58.347

我意识到这是一个老问题，但我会为未来的搜索者添加我的答案，因为这对我有用。

你说使用这个作为图像 URL 是行不通的。[http://graph.facebook.com/98758030102/picture](http://graph.facebook.com/98758030102/picture)

好吧，我很好奇并将 http:// 更改为 https:// 并输入了我的页面 ID 来代替你的页面 ID，它起作用了。

我假设通过将连接设为安全，它允许 graphi api 获取图像。

这个 URL 应该可以工作。 [https://graph.facebook.com/YOUR_PAGE_ID_NUMBER/picture](https://graph.facebook.com/YOUR_PAGE_ID_NUMBER/picture)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T22:00:33.623

将`access_token`GET 参数添加到 url 确保允许查看页面图像的用户将看到它（在本例中为 18yo++）。但是，我还没有找到一种方法来通过 API 确定某些用户何时或为什么无法访问页面。

# titanium - HOLLER：通过 API 和 Titanium Studio 安全支付

> ID：12538088
> 
> 赞同：0
> 
> 时间：2012-09-21T20:59:07.147
> 
> 标签：titanium, titanium-mobile

我正在使用 Titanium studio 构建一个 iphone 移动应用程序，我想做以下事情

*   使用 API 将用户 ID 发送到我的服务器
*   服务器使用存档的前一张卡为该用户处理付款
*   服务器发送成功/失败响应。

最安全的方法是什么？我知道如果我只发送用户 ID，那么任何人都可以破解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T15:20:05.760

你确定你的行为是允许的吗（在应用程序内滚动你自己的付款和信用卡通常会让你被拒绝）

确保您的应用不违反以下任何准则：

> 11.1 使用 App Store 以外的机制解锁或启用附加特性或功能的应用程序将被拒绝
> 
> 11.2 应用程序使用除应用内购买 API (IAP) 之外的系统来购买应用程序中的内容、功能或服务将被拒绝
> 
> 11.13 链接到外部购买或订阅机制的应用程序将被拒绝，例如“购买”按钮进入网站购买电子书

在此处查看最新的 App Store 审核指南：[https ://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)

另请参阅这些 SO 问题以获取更多信息：
[UIWebView Appstore 审批流程中的 iPhone Paypal](https://stackoverflow.com/questions/5145524/iphone-paypal-in-uiwebview-appstore-approval-process)
[iOS - 集成信用卡支付](https://stackoverflow.com/questions/8762096/ios-integrating-credit-card-payments)

一种更安全的方法（如果您通过上述所有指南）是使用用户标识、**密码**和**盐**，通过`https`或加密`SHA256`。请注意，如果您在审查过程中采用第二条路线，则必须指定使用加密。

[这是一篇关于我使用的 Salt 和 Passwords 的维基百科文章。](http://en.wikipedia.org/wiki/Salt_(cryptography))

[这是一个用于 JavaSCript 的 SHA256 库，它与 Titanium 配合得很好，并且易于使用。](http://point-at-infinity.org/jssha256/)

# asp.net - GZIP 压缩适用于本地主机，但不适用于 IIS 7.5 主机

> ID：12538092
> 
> 赞同：1
> 
> 时间：2012-09-21T20:59:59.630
> 
> 标签：asp.net, compression, iis-7.5, gzip

我想在我的网站内容上使用 GZIP 压缩...并且我已将我的代码放入`PreRequestHandlerExecute`global.asax.cs 文件中。它适用于我的本地主机（IIS，ASP.NET），但是当我将它上传到远程主机（我无法访问它的配置文件）并且当我查看提琴手结果时，根本没有压缩。这是请求和响应的示例：

请求标头：

```
GET **********/script/iscroll.js HTTP/1.1  
Host: *****  
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0.1  
Accept: */*  
Accept-Language: en-us,en;q=0.5  
Accept-Encoding: gzip, deflate  
Connection: keep-alive  
Referer: ********************  
Cookie: ASP.NET_SessionId=0w3uurg51f2mfdjhexzoegvq` 
```

响应头：

```
HTTP/1.1 200 OK  
Content-Type: application/x-javascript  
Last-Modified: Thu, 20 Sep 2012 06:18:19 GMT  
Accept-Ranges: bytes  
ETag: "46857abaf796cd1:0"  
Server: Microsoft-IIS/7.5  
X-Powered-By: ASP.NET  
X-Powered-By-Plesk: PleskWin  
Date: Fri, 21 Sep 2012 20:46:00 GMT  
Content-Length: 34777 
```

# facebook - Facebook 场景 5 移除 offline_access 权限页面

> ID：12538093
> 
> 赞同：0
> 
> 时间：2012-09-21T21:00:07.937
> 
> 标签：facebook, facebook-javascript-sdk, facebook-c#-sdk, facebook-access-token

我有一个一般的 Facebook 开发问题。我试图了解 Facebook 上的场景 5 删除 offline_access 页面应该如何工作以及该令牌可以用于什么。

关于我的应用程序的一点点。我允许我的应用程序用户从我集成的第三方系统安排/发布 Facebook 帖子。然后，我们提取喜欢和评论并将其反馈到该系统。现在，我们已经准备好获得 60 天的长寿命令牌，效果很好，但我们必须对调度施加时间限制。这不是世界末日，但如果我们能做得更好，我们想探索这个选择。

因此，我们被告知了我在下面发布并链接到的“场景 5”。我的问题是：

1.  用户管理的页面是什么意思？
2.  这种方法的优点/缺点是什么？
3.  与 #2 类似，这种方法可以做什么或不做什么，而 60 天访问令牌不能/可以做什么？
4.  实施此操作时需要注意的任何提示或障碍？

场景 5：页面访问令牌

当用户授予应用程序 manage_pages 权限时，应用程序能够通过查询 [User ID]/accounts Graph API 端点来获取用户管理的页面的页面访问令牌。启用迁移后，当使用短期用户访问令牌查询此端点时，获得的页面访问令牌也是短期的。

使用端点和前面解释的步骤将短期用户访问令牌交换为长期访问令牌。通过使用长期用户访问令牌，查询 [User ID]/accounts 端点现在将为用户管理的页面提供不会过期的页面访问令牌。这也适用于使用通过已弃用的 offline_access 权限获得的未过期用户访问令牌进行查询时。

[http://developers.facebook.com/roadmap/offline-access-removal/](http://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:01:17.640

这是指[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)，您的应用使用这些令牌代表该页面的管理员管理[Facebook页面。](https://www.facebook.com/help/pages)

这些令牌只能访问页面本身或可公开访问的内容，您不能使用页面访问令牌代替用户访问令牌。

# sql - 针对 Access 2010 DB 的 SQL 语句不适用于 ODBC

> ID：12538094
> 
> 赞同：5
> 
> 时间：2012-09-21T21:00:09.993
> 
> 标签：sql, ms-access, odbc, ms-access-2010

我正在尝试对 Access DB 运行一个简单的语句来查找记录。

记录中的数据验证非常糟糕，我无法对其进行清理。意思是，它必须保持原样。

我需要能够搜索删除了空格和连字符的字符串。以下语句将在 Access 2010 direct 中起作用：

```
select * from dummy where Replace(Replace([data1],' ',''),'-','') = 'ABCD1234'; 
```

不会通过 PHP 从 ODBC 连接运行它。它产生以下错误：

```
SQL error: [Microsoft][ODBC Microsoft Access Driver] Undefined function 'Replace' in expression., SQL state 37000 in SQLExecDirect 
```

在运行该函数的数据库中创建查询并尝试间接搜索其值会导致相同的错误：

```
select * from dummy_indirect where Expr1 = 'ABCD1234'; 
```

我尝试使用现有的两个 ODBC 驱动程序。ODBCJR32.dll (03/22/2010) 和 ACEODBC.dll (02/18/2007)。据我所知，这些应该是最新的，因为它与完整的 Access 2010 和 Access 2010 数据库引擎一起安装。

欢迎任何有关如何解决此错误并达到相同效果的想法。请注意，我无法更改数据库的方式、形状或形式。该间接查询是在另一个 mdb 文件中创建的，该文件具有从原始数据库链接的原始表。

*** 更新 ***

OleDB 并没有真正影响任何事情。

```
$dsn= "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\dummy.mdb;"; 
```

我也没有尝试将它用作 Web 后端。我不是施虐狂。

我必须支持一个使用 Access 作为后端的遗留*系统*。数据来自其他旧系统，我必须将其集成到更现代的系统中。因此，使用 Apache/PHP 创建一个在支持遗留系统的服务器上运行的 API。

我需要能够搜索具有字母数字大小写标识符的表，以获取唯一且与生成器相关联的数字标识符（访问中的自动编号）。用户多年来一直将其用作垃圾箱（数据输入不一致，带有零星符号），因此我唯一的解决方案是从字段值和搜索值中删除除字母数字之外的所有内容，并尝试对其执行 LIKE 比较。

如果不支持访问的 replace()，存在哪些 ODBC 兼容函数可以用来进行相同类型的比较？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T14:38:00.837

`Replace()`回顾一下，除非您的查询是在 Access 应用程序会话中运行的，否则Access db 引擎将无法识别该函数。来自 Access 外部的任何尝试都将触发“未定义函数”错误消息。您无法通过从 ODBC 切换到 OleDb 作为连接方法来避免错误。而且您也不能通过将引擎`Replace()`隐藏在单独的查询中（在同一个或另一个 Access db 中）并将该查询用作主查询的数据源来欺骗引擎。

此行为由[Access 的沙盒模式](https://support.microsoft.com/en-us/kb/294698)决定。该链接页面包含在默认沙盒模式下可用的功能列表。该页面还介绍了如何更改沙盒模式。如果您绝对必须有`Replace()`可用的查询，也许最低设置 (0) 将允许它。但是，我不建议您这样做。我自己从来没有做过，所以不知道后果。

至于 的替代品`Replace()`，这将有助于了解您正在搜索的值的可变性。如果空格或短划线字符仅出现在一个或几个一致的位置，您可以使用`Like`表达式进行模式匹配。例如，如果搜索字段值由 4 个字母、一个可选的空格或破折号以及后跟 4 个数字组成，则`WHERE`类似这样的子句应该适用于“ABCD1234”的变体：

```
SELECT * FROM dummy
WHERE
       data1 = 'ABCD1234'
    OR data1 Like 'ABCD[- ]1234'; 
```

另一种可能性是与值列表进行比较：

```
SELECT * FROM dummy
WHERE
       data1 IN ('ABCD1234','ABCD 1234','ABCD-1234'); 
```

但是，如果您的搜索字段值可以在字符串中的任何位置包含任意数量的空格或破折号，那么这种方法并不好。而且我会非常努力地寻找某种方法来简化查询任务：

1.  您无法清除存储的值，因为禁止以任何方式更改原始 Access 数据库。也许您可以创建一个新的 Access 数据库，导入数据，然后清理它。
2.  在 SQL Server 中将原始 Access db 设置为链接服务器并构建查询以利用 SQL Server 功能。
3.  投降。:-( 将更大的数据集拉入您的 PHP 客户端代码，并评估要使用哪些行与忽略哪些行。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-21T21:17:42.303

我不确定您是否可以使用 ODBC 和您的约束来做到这一点。[MS Access 驱动程序受到限制](http://msdn.microsoft.com/en-us/library/office/ff835353.aspx)（根据设计；MS 希望您将 SQL Server 用于后端）。

你能用OLEDB吗？这可能是一种选择。

# .net - 在未命名的组中迭代匹配

> ID：12538096
> 
> 赞同：0
> 
> 时间：2012-09-21T21:00:14.990
> 
> 标签：.net, regex, asp.net-4.0

给定一个简单的正则表达式，如下所示：`^(\d+\D+\d+)(.*)`和一个字符串来解析为`15-APR-2012 @ 11:00:00`使用预期 的`[$1]$2`产量替换。`[15-APR-2012] @ 11:00:00`

我的问题是，当对此调用 Regex.Matches 时，我在索引 0 处收到一个匹配项，并且整个字符串：`15-APR-2012 @ 11:00:00`显示为匹配项。但是真的有2场比赛。我怎样才能得到两场比赛？我应该看到索引 0 和索引 12。我使用的代码来自另一个 SO 线程：

```
// Get a collection of matches.
MatchCollection matches = Regex.Matches(inPutString, regexptrn);
foreach (Match match in matches)
{
    foreach (Capture capture in match.Captures)
        {
            retVal += String.Format("Index={0}, Value={1}", capture.Index, capture.Value) + Environment.NewLine;
        }
} 
```

我对 .Matches() 的真正作用有什么误解吗？

* * *

好的。这是一个后续相同的字符串，新的正则表达式 "(..)(...)" 替换为 [$1]{$2} 导致 [10]{-AU}[G-]{201}[2 ]{@ 1}[1:]{45:}38 我们期待这个。

然而，比赛给出了这个：

```
Index=0, Value=10-AU
Index=5, Value=G-201 
Index=10, Value=2 @ 1 
Index=15, Value=1:45: 
```

这表明 Matches 查看整个模式而不是其组。现在如何获得小组比赛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:10:15.950

您当前的正则表达式永远无法获得多个匹配项有两个原因：

*   正则表达式的`^`开头是字符串开头的锚点，因此您需要删除它，否则您的正则表达式只能在索引 0 处匹配。
*   正`.*`则表达式末尾的 将匹配字符串的其余部分，并且您不会找到任何重叠的匹配项，因此您只能匹配一次。由于无论如何您都没有对第二个捕获组执行任何操作，因此您可能可以将其从您的正则表达式中删除。

...所以尝试使用正则表达式`(\d+\D+\d+)`并将匹配替换为`[$1]`.

# javascript - 在传单上绘制多个标记并将单击事件附加到每个标记，该标记与单击的标记信息一起重定向到新页面

> ID：12538101
> 
> 赞同：2
> 
> 时间：2012-09-21T21:00:36.703
> 
> 标签：javascript, jquery, leaflet

我正在使用 jQuery mobile 和传单开发移动应用程序。我正在使用 ajax 从服务器获取标记数据并在地图上动态绘制标记。我正在使用 $.each 循环遍历从服务器作为 Json 返回的每个对象并生成标记。我在每个标记弹出窗口中附加锚元素。当用户单击锚元素时，当前页面将被重定向到新页面，并且 lat、lon、stName 和 state 等信息将使用查询字符串传递到下一页。

该代码工作正常，它将用户重定向到包含所有信息的新页面，但移动浏览器执行重定向操作需要很长时间。当我尝试在没有查询字符串的情况下重定向到新页面时，重定向操作很快。

是否有一种有效的方法可以使用当前页面上的信息执行此重定向操作？有谁知道为什么使用查询字符串重定向页面时会有时间延迟？传单中是否有 bindClick 事件？

meta_data 的结构如下：

```
meta_data=[{elev:50, ll:[-90,29], name:"Baton Rouge"}, sids:[123,456,789], state:"LA"}, ...]

    $.each(meta_data, function(ind, meta_obj){
        marker=L.marker([meta_obj.ll[1], meta_obj.ll[0]]);
        click_element='<a href ="http://storm.srcc.lsu.edu/mobile/climatedata.html?stId='+meta_obj.sids[0]+"&"+"lat="+meta_obj.ll[1]+"&"+"lon="+meta_obj.ll[0]+"&stName="+meta_obj.name+"&state="+meta_obj.state+'">Click Here For More Data</a>';
        marker.bindPopup("<b>Station Name: </b>"+meta_obj.name+"<br />"+"<b>Station Id: </b>"+meta_obj.sids[0]+"<br />"+click_element);
        marker.addTo(map);
}); 
```

# php - 使用 PHP 从 db 添加和加载信息并将信息返回到 div。即使 CSS 设置为不同，Div 也会扩展和高度

> ID：12538106
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:01:04.333
> 
> 标签：php, javascript, html, css

正如您在标题中听到的那样，我正在使用 PHP 将信息添加到数据库，然后使用该信息。这是一个简单的评论系统。我对 PHP 很陌生，真的不知道是否有更简单的方法来创建我正在做的事情，但我的问题仍然是一样的。当我得到对于 div 来说太大的信息时，如果它没有空格，那么它会自动增加 div 的宽度和高度。

同时我有另一个 div 包含个人信息，如姓名和东西。它是宽度的 1/4，comment-div id 是 3/4（正如我用 CSS 设置的那样）。随着评论变大，info-div 变小（出于某种疯狂的原因，宽度和高度都如此！）。

当我获得信息时，我会从一列中获取所有信息并将它们显示在表格中。我将注释和信息信息放在两个单独的 td 标记中，并将每个单元格信息放在具有适当宽度和高度（高度 150 像素宽度 25%/75%）的 div 中。

我已经尝试使用自动换行空格和溢出来打破界限，但没有任何接缝可以工作。

我自己对浏览器如何显示它有所了解，因为如果我将信息放在正文中而不是在内容分区 为什么它会有这样的反应我不知道，我想知道是否有人知道我能做些什么......正如所说，这只发生在字符串太长时。否则，它可以 100% 正常工作。

感谢您的帮助...我目前使用 PHP、JS、HTML、CSS，并且解决方案需要使用多种格式（我也可以使用 jQuery 和其他类似的格式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:42:55.327

也许你可以使用

**css**

```
max-height: 300px;
overflow: scroll; 
```

这意味着您的 div 永远不会大于 300px，如果内容更长，您将获得一个滚动条。

# html - 元标记在一个页面上不起作用，但在所有其他页面上都起作用？

> ID：12538107
> 
> 赞同：3
> 
> 时间：2012-09-21T21:01:24.823
> 
> 标签：html, css, coldfusion

这是元标记： `<meta http-equiv="X-UA-Compatible" content="IE=edge" />`

它适用于所有页面，除了 1。

页面正在使用 Coldfusion 进行渲染，包括`<cfinclude>`并设置在类似于 MVC 的目录结构中。标签被破坏的页面有它自己的控制器（但只显示一个页面），但该控制器与另一个控制器相同。我不确定是什么原因造成的。

页面也采用模块化设计，页面的每个功能都以块的形式导入。每个页面都有自己独特的模块，所以问题出在其中一个块中......我只是不知道那个问题可能是什么。过去几天我一直在梳理模块，但找不到它。

什么可能导致此元标记不起作用？这里的代码粘贴太多，所以我希望有一个答案可以引导我寻找解决方案的方向。我不相信它与Coldfusion有任何关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:12:07.730

*   首先，正如 drezabek 所说，检查*生成*的HTML。IE 对特定的元标头特别挑剔。根据我的经验，`IE=EDGE`标题必须是整个页面上的第一个标题，并且必须是检查 HTML 顶部的第一项`<head>`，是这样吗？

*   其次，Coldfusion 对于额外的空白是出了名的麻烦。如果您的文档类型上方有空格，或者有问题的标题可能会导致它出现故障。如有疑问，请始终使用`output='false'`您的所有功能，甚至是您的`cfscript`功能。此外，甚至一些原生 CF 方法也会添加空格。例如，序列化一个 ORM 对象，`SerializeJSON(EntityLoad('blah'))`你会看到它抛出了一些空白。喜悦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T03:19:20.043

答案必须在 HTML 中。查看有效页面和无效页面的源代码，并尝试寻找可能导致问题的差异。如果你找不到它，也许在这里发布源？

HTML 确实是关键。之后，找到导致错误 HTML 的函数应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T17:32:34.307

看来我错了。事实上，这个问题确实源于 Coldfusion。

由于我没有创建有问题的页面，因此我忽略了一个重要部分。创建它的人正在使用带有验证的 cfform 输入标签。导致 Coldfusion 将其插入到标题末尾的呈现页面中：

```
<script type="text/javascript"> 
<!--
    _CF_checkeditUserInfo = function(_CF_this)
    {
       //reset on submit
       _CF_error_exists = false;
       _CF_error_messages = new Array();
       _CF_error_fields = new Object();
       _CF_FirstErrorField = null;

       //display error messages and return success
       if( _CF_error_exists )
       {
           if( _CF_error_messages.length > 0 )
           {
               // show alert() message
               _CF_onErrorAlert(_CF_error_messages);
               // set focus to first form error, if the field supports js focus().
               if( _CF_this[_CF_FirstErrorField].type == "text" )
               { _CF_this[_CF_FirstErrorField].focus(); }

           }
        return false;
       }else {
           return true;
       }
   }
//-->
</script> 
```

现在我不完全确定这样做会导致元标记中断，但是当我删除导致生成此脚本的模块时，问题就解决了。删除后，文本比较显示两个页面中呈现的标题有 0 个差异。

[我通过在 IIS 本身中设置 WebConfig](http://blogs.msdn.com/b/webtopics/archive/2008/09/05/configuring-iis-to-work-around-webpage-display-issues-caused-by-internet-explorer-8-0.aspx)完全解决了我的特定问题。

# javascript - 谷歌分析和哈希/锚点不起作用

> ID：12538115
> 
> 赞同：2
> 
> 时间：2012-09-21T21:02:12.463
> 
> 标签：javascript, hash, google-analytics, statistics, anchor

我希望你能帮助我。

我有一个 Javascript 画廊。每张图片都有一个特定的哈希值。

**www.example.com/gallery.html#title_1**

我的统计数据在 Google Analytics 上，但即使我在相应的代码中尝试过，哈希也不存在：

```
_gaq.push(['_trackPageview', location.pathname + location.search  + location.hash]); 
```

或这个 ：

```
_gaq.push(['_setAllowAnchor', true]); 
```

有什么想法可以解决这个问题吗？

感谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:55:06.047

`_setAllowAnchor`用于完全不同的用例。

正确的做法是如你所说：

```
_gaq.push(['_trackPageview', location.pathname + location.search  + location.hash]); 
```

但是您需要在哈希更改后执行此操作。我认为您在页面加载时正在执行此操作。当哈希更改时，页面不会重新加载，因此您需要再次显式运行此函数调用。

# google-maps - 禁用可移动 Gmap

> ID：12538125
> 
> 赞同：6
> 
> 时间：2012-09-21T21:02:54.720
> 
> 标签：google-maps

是否可以在我拖动标记时禁用 google mal (v3) 内部的移动？我不想使用即静态地图。我需要移动的一般功能，但是在我拖动标记的那一刻，地图不应该移动。

非常感谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-21T21:57:37.220

标记有[dragstart 和 dragend 事件](https://developers.google.com/maps/documentation/javascript/reference#Marker)。开启时，通过将各种[MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)设置为（如、等）来禁用`dragstart`地图上的“移动”功能。开启时，将 MapOptions 设置回。`false``draggable``scrollwheel``dragend``true`

这是一个可用于禁用或启用基于布尔值的地图移动的函数。它假设您的 Map 变量是`map`.

```
function disableMovement(disable) {
    var mapOptions;
    if (disable) {
        mapOptions = {
            draggable: false,
            scrollwheel: false,
            disableDoubleClickZoom: true,
            zoomControl: false
        };
    } else {
        mapOptions = {
            draggable: true,
            scrollwheel: true,
            disableDoubleClickZoom: false,
            zoomControl: true
        };
    }
    map.setOptions(mapOptions);
} 
```

然后你在你的事件中使用它（`marker`是你的 Marker 变量）：

```
google.maps.event.addListener(marker, 'dragstart', function() {
    disableMovement(true);
});

google.maps.event.addListener(marker, 'dragend', function() {
    disableMovement(false);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-26T15:03:18.057

gmap.setOptions({'scrollwheel': false});

# linux - 无法通过 HTTPS 在 Linux 上克隆 github 存储库

> ID：12538130
> 
> 赞同：92
> 
> 时间：2012-09-21T21:03:38.707
> 
> 标签：linux, git, github

我正在尝试`git clone https://github.com/org/project.git`在 CentOS 机器上做一个简单的操作，但得到：

> 错误：请求的 URL 返回错误：访问 [https://github.com/org/project.git/info/refs时出现 401](https://github.com/org/project.git/info/refs)
> 
> 致命：HTTP 请求失败

它从不提示我输入用户名/密码，只是失败了。

我可以在我的 Mac 上拨打完全相同的电话没问题 - 我错过了什么？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-09-21T21:58:22.117

答案很简单，但并不明显：

**代替：**

```
git clone https://github.com/org/project.git 
```

**做：**

```
git clone https://username@github.com/org/project.git 
```

**或（不安全）**

```
git clone https://username:password@github.com/org/project.git 
```

（请注意，在后一种情况下，您的密码可能会被您机器上的其他用户通过运行看到，`ps u -u $you`并且默认情况下会在您的 shell 历史记录中显示为明文）

所有 3 种方式都适用于我的 Mac，但只有最后两种适用于远程 Linux 机器。（回想一下，这可能是因为我在我的 Mac 上设置了一个[全局 git 用户名](https://help.github.com/articles/setting-your-username-in-git)，而在远程机器上我没有？可能是这样，但是缺少用户名提示让我绊倒了。 . )

还没有在任何地方看到这个记录，所以在这里。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-09-17T05:52:16.950

您可以手动禁用 ssl 验证，然后重试。:)

```
git config --global http.sslverify false 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-11-28T07:05:30.180

我遇到了同样的问题，错误信息和操作系统信息如下

操作系统信息：

> CentOS 6.5 版（最终版）
> 
> Linux 192-168-30-213 2.6.32-431.el6.x86_64 #1 SMP Fri Nov 22 03:15:09 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

错误信息：

> 在 /home/techops/pyenv/.git/ 中初始化空的 Git 存储库密码：错误：访问[https://waterdrops@github.com/pyenv/pyenv.git/info/refs 时](https://waterdrops@github.com/pyenv/pyenv.git/info/refs)
> 
> 致命：HTTP 请求失败

git & curl 版本信息

> 混帐信息：混帐版本 1.7.1
> 
> curl 7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/1.18 libssh2/1.4.2 协议：tftp ftp telnet dict ldap ldaps http 文件 https ftps scp sftp功能：GSS-协商 IDN IPv6 大文件 NTLM SSL libz

调试

> $ curl --verbose [https://github.com](https://github.com)
> 
> *   即将 connect() 到 github.com 端口 443 (#0)
> *   正在尝试 13.229.188.59... 已连接
> *   连接到 github.com (13.229.188.59) 端口 443 (#0)
> *   使用 certpath 初始化 NSS：sql:/etc/pki/nssdb
> *   CAfile：/etc/pki/tls/certs/ca-bundle.crt CApath：无
> *   NSS 错误 -12190
> *   TLS 握手出错，尝试 SSLv3... GET / HTTP/1.1 User-Agent: curl/7.19.7 (x86_64-redhat-linux-gnu) libcurl/7.19.7 NSS/3.14.0.0 zlib/1.2.3 libidn/ 1.18 libssh2/1.4.2 主机：github.com 接受：*/*
>     
>     
> *   连接中断，正在重试新的连接
>     
>     
> *   关闭连接 #0
> *   向此 URL 发出另一个请求：“ [https://github.com](https://github.com) ”
> *   即将 connect() 到 github.com 端口 443 (#0)
> *   正在尝试 13.229.188.59... 已连接
> *   连接到 github.com (13.229.188.59) 端口 443 (#0)
> *   由于之前的握手失败，TLS 被禁用
> *   CAfile：/etc/pki/tls/certs/ca-bundle.crt CApath：无
> *   NSS 错误 -12286
> *   关闭连接 #0
> *   SSL 连接错误 curl: (35) SSL 连接错误

升级 curl ， libcurl 和 nss 后， git clone 再次正常工作，所以就在这里。更新命令如下

> sudo yum update -y nss curl libcurl

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-12-17T22:42:41.833

确保您拥有 git 1.7.10 或更高版本，它现在会正确提示输入用户/密码。[（您可以在这里](http://git-scm.com/downloads)下载最新版本）

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-08-13T07:27:21.527

我必须指定用户名才能在 1.7.1 git 版本上工作：

```
git remote set-url origin https://username@github.com/org/project.git 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-05-22T16:48:35.913

正如 JERC 所说，确保您拥有更新版本的 git。如果您只使用默认设置，当您尝试安装 git 时，您将获得 1.7.1 版本。除了手动下载和安装最新版本的 get 之外，您还可以通过向 yum 添加新存储库来完成此操作。

来自[tecadmin.net](http://tecadmin.net/how-to-upgrade-git-version-1-7-10-on-centos-6/)：

下载并安装 rpmforge 存储库：

```
# use this for 64-bit
rpm -i 'http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.x86_64.rpm'
# use this for 32-bit
rpm -i 'http://pkgs.repoforge.org/rpmforge-release/rpmforge-release-0.5.3-1.el6.rf.i686.rpm'

# then run this in either case
rpm --import http://apt.sw.be/RPM-GPG-KEY.dag.txt 
```

然后您需要启用 rpmforge-extras。编辑`/etc/yum.repos.d/rpmforge.repo`并更改`enabled = 0`为`enabled = 1`下`[rpmforge-extras]`。该文件如下所示：

```
### Name: RPMforge RPM Repository for RHEL 6 - dag
### URL: http://rpmforge.net/
[rpmforge]
name = RHEL $releasever - RPMforge.net - dag
baseurl = http://apt.sw.be/redhat/el6/en/$basearch/rpmforge
mirrorlist = http://mirrorlist.repoforge.org/el6/mirrors-rpmforge
#mirrorlist = file:///etc/yum.repos.d/mirrors-rpmforge
enabled = 1
protect = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag
gpgcheck = 1

[rpmforge-extras]
name = RHEL $releasever - RPMforge.net - extras
baseurl = http://apt.sw.be/redhat/el6/en/$basearch/extras
mirrorlist = http://mirrorlist.repoforge.org/el6/mirrors-rpmforge-extras
#mirrorlist = file:///etc/yum.repos.d/mirrors-rpmforge-extras
enabled = 0 ####### CHANGE THIS LINE TO "enabled = 1" #############
protect = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag
gpgcheck = 1

[rpmforge-testing]
name = RHEL $releasever - RPMforge.net - testing
baseurl = http://apt.sw.be/redhat/el6/en/$basearch/testing
mirrorlist = http://mirrorlist.repoforge.org/el6/mirrors-rpmforge-testing
#mirrorlist = file:///etc/yum.repos.d/mirrors-rpmforge-testing
enabled = 0
protect = 0
gpgkey = file:///etc/pki/rpm-gpg/RPM-GPG-KEY-rpmforge-dag
gpgcheck = 1 
```

完成此操作后，您可以使用以下命令更新 git

```
yum update git 
```

我不知道为什么，但是他们建议禁用 rpmforge-extras（改回`enabled = 0`）然后运行`yum clean all`​​.

您很可能需要使用`sudo`这些命令。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-09-22T12:29:07.320

很长一段时间后，我能够让 git 1.7.1 工作。

首先，我必须禁用 SSL 才能拉取：

```
git config --global http.sslverify false 
```

然后我可以克隆

```
git clone https://github.com/USERNAME/PROJECTNAME.git 
```

然后在添加并提交后，我无法推回。所以我做了

```
git remote -v

origin  https://github.com/USERNAME/PROJECTNAME.git (fetch)
origin  https://github.com/USERNAME/PROJECTNAME.git (push) 
```

查看拉和推地址：

这些必须用 USERNAME@ 修改

```
git remote set-url origin https://USERNAME@github.com/USERNAME/PROJECTNAME.git 
```

它仍然会提示您输入密码，您可以添加密码

```
USERNAME:PASSWORD@github..... 
```

但不要这样做，因为您以明文形式保存密码以便于盗窃。

我不得不这样做，因为由于防火墙限制，我无法让 SSH 工作。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-08-15T16:25:46.703

这是这个问题的最愚蠢的答案，但[请检查 GitHub 的状态](https://status.github.com/)。这个让我：）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-07-02T21:03:14.317

我有同样的问题和错误。在我的情况下，它是 https_proxy 未设置。设置 https_proxy 环境变量解决了这个问题。

```
$ export https_proxy=https://<porxy_addres>:<proxy_port> 
```

例子：

```
$ export https_proxy=https://my.proxy.company.com:8000 
```

希望这对某人有所帮助。

# c++ - C win32 应用程序

> ID：12538131
> 
> 赞同：0
> 
> 时间：2012-09-21T21:03:53.127
> 
> 标签：c++, winapi

所以，我已经开始使用 C++（我已经知道 java），但现在我已经准备好使用窗口应用程序了。我猜win32是我开始的，但我的问题是，从哪里开始学习这个或者win32不是我想要使用的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:03:21.773

有许多支持 Windows 的 C++ GUI 库：

*   [Gtkmm](http://www.gtkmm.org/)（C++ 的 Gtk+ 绑定）
*   [SmartWin++](http://smartwin.sourceforge.net/)
*   [V C++ 图形用户界面](http://sourceforge.net/projects/vgui/)
*   [FLTK](http://www.fltk.org/)
*   [QT](http://qt-project.org/)

这些是从[stroustrup faq](http://www.stroustrup.com/bs_faq.html#gui)中获取的（为什么 C++ 没有 GUI？），还有[wxWidgets](http://www.wxwidgets.org/)。只选择你喜欢的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:05:09.593

如果你想做窗口化，QT 是你在 C++ 中的最佳选择。这些天win32太低了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:15:51.873

微软实际上希望每个人都使用最新的工具编写触摸屏 Windows 8/WinRT 应用程序。

查看[http://code.msdn.microsoft.com/windowsapps/上的代码库](http://code.msdn.microsoft.com/windowsapps/)

# asp.net-mvc-3 - 通过 Visual Studio 配置选择要构建的项目类型

> ID：12538133
> 
> 赞同：0
> 
> 时间：2012-09-21T21:03:55.023
> 
> 标签：asp.net-mvc-3, visual-studio-2010, msbuild

在我的 Visual Studio 项目中，我们使用 2 个不同的成员资格提供程序，我们希望通过构建配置类型将所选项目添加到 Web 项目中

*   MyApplication.Provider -**调试**- （SQL 成员资格提供程序）
*   MyApplication.Provider.AD -**发布**-（AD 成员资格提供程序）

*   MyApplication.Web（ASP.NET MVC 项目）

当我们在我们的机器上进行本地调试时，我希望项目使用**MyApplication.Provider**的项目引用， 并且在创建发布项目时我想加载**MyApplication.Provider.AD**

在这两个项目中，我让公共类使用匹配的命名空间。在每个配置的构建配置中，我排除了未使用的项目

对于 Post Build Option 中的 Web.config 差异，我可以成功添加正确的 Web.config 文件。

问题是当我构建解决方案时，我无法将正确的项目 DLL 添加到 Web 项目中。

处理此问题的最佳实践方法是什么，我是否需要使用 MSBuild 命令修改 Web 项目 .csproj 或者是否需要配置其他项目设置来处理此问题。

# makefile - 使用 awk 动态设置生成文件变量

> ID：12538138
> 
> 赞同：3
> 
> 时间：2012-09-21T21:05:10.507
> 
> 标签：makefile, awk

我在我的 makefile 中定义了一个变量停止点。我想使用来自我的 Makefile 的 awk 的输出来设置这个变量。

我想看看第二个参数是否是主要的

我努力了：

```
stoppoint = $(awk '$$2 ~ /main/ {print $$1}' file)  
stoppoint = "$(awk '$$2 ~ /main/ {print $$1}' file)"  
stoppoint = 'awk '$$2 ~ /main/ {print $$1}' file'
awk '$$2 ~ /main/ {print $$1}' file > stoppoint
awk '$$2 ~ /main/ {print $$1}' file > $(stoppoint) 
```

但是，我无法设置此变量。请告诉我如何在 Makefile 中使用 awk 设置变量

PS：在命令行上， awk 命令给了我我想要的输出......

谢谢，光辉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:16:59.540

您必须使用法语引号 (``)

这是一个例子：

```
all:
    @a=`echo "hello world!!" | awk '{print $0;}' -`; echo $$a; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-09T22:10:36.303

您需要使用这样的`eval`结构：

```
.PHONY: default
default: all

rule1:
    $(eval GLOBAL_VAR=`awk '$$2 ~ /main/ {print $$1}' file`)

all: rule1
    @echo "The global var is: $(GLOBAL_VAR)" 
```

[eval](http://www.gnu.org/software/make/manual/make.html#Eval-Function)将字符串评估为 makefile 语法。在这里，它将 GLOBAL_VAR 变量设置为 shell 函数调用的结果，该结果又在另一个规则中打印出来以说明它是全局的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T21:22:05.930

解决方案很简单：Makefile 假定格式

目标：依赖关系在下一行之后是 a 之后的操作`TAB`

在上述情况下，我们不能在 a 之后的下一行设置变量，`TAB`因为它假定它是一个动作。只需删除`TAB`并设置它。那将解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T23:07:24.733

现在我这样做的方式是：

```
@awk '$$2 ~ /main/ {print $$1}' inputfile > DUMP 
```

它`0x60000078`在转储中给了我一个价值

并使用它：

```
@echo -e "set pc $(shell cat DUMP)" > testfile 
```

这似乎解决了我的问题，但我希望有人能指出我更好的解决方案。

谢谢，

光辉

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-06T14:26:40.083

在 makefile 中使用 awk 的另一种选择是使用 $$：

```
VERSION=`awk '/version:/{print $$NF}' charts/Chart.yaml` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-07T12:46:02.773

我需要解决这个问题是`shell`在调用时使用关键字`awk`，如下所示：

```
VARIABLE="$(shell awk '__awk script__' file-awk-processes)" 
```

希望能帮助到你！

# javascript - 在不使用用户代理字符串的情况下检测 Google TV

> ID：12538143
> 
> 赞同：3
> 
> 时间：2012-09-21T21:05:40.203
> 
> 标签：javascript, google-tv

我们有一个客户希望他们的内容在 Google TV 上（通过 Chrome 浏览器），但在法律上被限制在“常规网络”上允许它。所以我们想通过 Javascript 检测 Google TV 浏览器，如果不是，则禁止播放内容。

第一个想法是检查用户代理字符串，但显然他们不喜欢这样，因为用户在他们的网络浏览器上更改他们的用户代理字符串太容易了，所以它假装是谷歌电视浏览器。

还有什么我们可以检查的更难（或至少不那么明显）伪造的东西吗？我知道如果有人足够努力，任何解决方案都可能被破解，这没关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:25:59.700

您可能可以做一些事情，因为您只想确保检测到谁**没有**使用 GoogleTV 浏览器。当然，这些可以被欺骗，但它们比仅使用不同的用户代理字符串要困难得多。

基本上，这个想法是测试某些 JavaScript 对象支持（有关一些想法，请参阅此页面：[http](http://www.javascriptkit.com/javatutors/objdetect3.shtml) ://www.javascriptkit.com/javatutors/objdetect3.shtml ）。这方面的一个例子是测试是否存在`window.opera`表明浏览器确实是 Opera 而绝对不是 GoogleTV。

为此，我编写了一个小小提琴示例，它不能被所有现代浏览器中的用户代理切换伪造，并且需要更复杂的机制来绕过。我进行了测试，它确实在 Google TV 上通过了。

[http://jsfiddle.net/XBT4w/2/](http://jsfiddle.net/XBT4w/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:40:24.667

你能想到的任何东西，尤其是在 JavaScript 中，都将**很容易**被伪造，因为你可以轻松地（使用控制台）粘贴代码，将任何值注入任何位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:11:17.690

我认为没有比谷歌[建议](https://developers.google.com/tv/faq#detectvisitors)的更好的方法了：

```
var userAgent = navigator.userAgent;

function isGoogleTvBrowser(useragent) {
  return Boolean(useragent.match(/(Large Screen)|GoogleTV/i));
} 
```

虽然很明显，用户代理字符串很容易被伪造。

# java - 保留关键字——隐藏？JNLP

> ID：12538146
> 
> 赞同：15
> 
> 时间：2012-09-21T21:05:59.960
> 
> 标签：java, keyword, jnlp, java-web-start, reserved

当一个线程引起我的注意时，我正在浏览一些细节。

[https://forums.oracle.com/forums/thread.jspa?messageID=9886607](https://forums.oracle.com/forums/thread.jspa?messageID=9886607)

如你看到的; `&TOKEN=something`在 JNLP 中，href 被认为是一个特殊的关键字并且 &token 有效。我不确定是否是这种情况。但想到浏览 oracle 站点以获取有关这些 ' `keywords`' 的更多详细信息。找不到对此“ `TOKEN`”的任何引用。所以想知道是否有一个我们不应该在 JNLP href 中使用的关键字列表？有人知道它是否在某个地方正式发布吗？或者可以建议一种方法来尝试搜索本地java安装中的那些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:15:01.757

据我所知，您只能在字段中使用 3 个魔法标记。$$codebase、$$context 和 $$name。它们在脚本执行时被替换。如果我记得 $$codebase 生成 jnlp 文件的位置，$$name 是 jnlp 文件名，我不知道 $$context 是什么。

但是，我从未听说过 &TOKEN。

# php - 在选项卡中展开的联系表格

> ID：12538148
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:06:12.387
> 
> 标签：php, jquery, forms, contact

我正在尝试构建一个在不同选项卡上显示不同字段的联系表单。我已经让它工作了，这样我就可以在目标 div 中有不同的字段，并且 jquery 让它工作，以便加载不同的字段，但是我怎么能用可用的可见表单数据来提交表单而不考虑所有其他领域。

感谢大家，我只需要一个颠簸才能朝着正确的方向前进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:10:41.373

```
$('#myform').live('submit', function () {
    //gather the data you want to submit
    data = {
        'value1':$('selector').val()
    }
    $.post(url, data, i_get_run_when_done());
    //prevent the form from trying to submit the old fashioned way.
    e.preventDefault()
    return false;
} 
```

如果您想要 div 中的所有表单字段，您可以执行类似的操作

```
form_fields = $('container').find('input') 
```

然后你可以像这样迭代它

```
form_fields.each(function () {
    data[$(this).attr('name')] = $(this).val()
} 
```

或者您可以在提交之前分离所有不 :visible 的元素。

```
$('#myform').live('submit', function () {
    items = $('input').not(':visible')
    items.detach()
    return items //now you have the items in order to reattach them if you chose to do so
} 
```

在这种情况下，表单会自行提交，但您会在提交之前删除所有不想提交的表单字段。

# c# - INT 的“至少一个对象必须实现 IComparable”？据我所知，确实

> ID：12538150
> 
> 赞同：8
> 
> 时间：2012-09-21T21:06:27.240
> 
> 标签：c#, asp.net-mvc, icomparable

好的，我有一个简单的`IEnumerable<HtmlString> things`，我想把它分成四个相等的组。

```
var quarter = things.OrderBy(t => t.Foo).Count() / 4; 
```

应该做的伎俩，但相反我得到了这个时髦：

> “/”应用程序中的服务器错误。至少一个对象必须实现 IComparable。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：至少一个对象必须实现 IComparable。
> 
> **第 36 行：int Quarter = things.OrderBy(t => t.Foo).Count() / 4;**

有人知道这里到底发生了什么吗？为什么我需要实现 IComparable 来获得简单的计数？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-21T21:13:39.230

我的猜测是，这与 LINQ 的惰性评估有关`OrderBy`。例如，如果您有：

```
var things = unsortedThings.OrderBy(foo => foo.Bar);
var quarter = things.Count() / 4; 
```

那么如果`foo.Bar`属性不能相互比较，那将完全抛出该异常。

例如：

```
using System;
using System.Linq;

class Foo {}

class Program
{
    public static void Main()
    {
        var foos = new[] { new Foo(), new Foo() };
        var ordered = foos.OrderBy(x => x);
        Console.WriteLine(ordered.Count());
    }
} 
```

输出：

```
Unhandled Exception: System.ArgumentException: At least one object must implement IComparable.
   at System.Collections.Comparer.Compare(Object a, Object b)
   at System.Linq.EnumerableSorter`2.CompareKeys(Int32 index1, Int32 index2)
   at System.Linq.EnumerableSorter`1.QuickSort(Int32[] map, Int32 left, Int32 right)
   at System.Linq.EnumerableSorter`1.Sort(TElement[] elements, Int32 count)
   at System.Linq.OrderedEnumerable`1.<GetEnumerator>d__0.MoveNext()
   at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)
   at Program.Main() 
```

# ajax - PHP 应用程序无法读取或设置来自不同域的 AJAX 调用的 cookie

> ID：12538154
> 
> 赞同：1
> 
> 时间：2012-09-21T21:06:59.670
> 
> 标签：ajax, cookies, cross-domain

我有一个（.NET）应用程序，它通过 AJAX 调用驻留在不同子域上的 PHP 应用程序。为了解决这个问题，我写了一个简单的测试脚本：

```
<?php
setcookie('test', '1234', time()+60*60*24*30, '/', '.mydomain.com'); 
header('Access-Control-Allow-Origin: *');
echo 'Cookies: '; print_r($_COOKIE); 
?> 
```

如果通过直接请求调用，脚本会按预期运行 - 输出一个包含所有 .mydomain.com cookie 的数组并设置“测试”cookie。

假设我从 app1.mydomain.com/page1.aspx 调用 app2.mydomain.com/cookieTest.php。

app1 在 IIS 服务器上运行，app2 在 Nginx (Linux) 服务器上运行。

所以，在 app1.mydomain.com/page1.aspx 我运行这个 JS：

```
$.ajax({
    'url' : 'https://app2.mydomain.com/cookieTest.php', 
    'success': function(r){
        $('#container').html(r); 
    }
}); 
```

该脚本为 $_COOKIE 返回一个空数组并*尝试*设置一个 cookie，但它失败了。响应标头如下所示：

```
Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Host:app2.mydomain.com
Origin:https://app1.mydomain.com
Referer:https://app1.mydomain.com/page1.aspx
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1

Response Headers
Access-Control-Allow-Origin:*
Connection:keep-alive
Content-Type:text/html
Date:Fri, 21 Sep 2012 20:54:12 GMT
Server:nginx
Set-Cookie:test=1234; expires=Sun, 21-Oct-2012 20:54:12 GMT; path=/; domain=.mydomain.com
Transfer-Encoding:chunked 
```

（注意设置cookie，浏览器会忽略它）

这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:12:33.003

可能源 url 是**HTTPS** `Origin:https://app1.mydomain.com`而目标 url 是**HTTP** `http://app2.mydomain.com/cookieTest.php`。

当我浏览 HTTPS 站点并且该站点想要从 HTTP 站点获取内容或重定向到 HTTP 站点时，浏览器会提醒我并要求我确认这样做。因此，您的 cookie 可能被该策略阻止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T15:08:27.023

经过更多研究（[http://www.bradchen.com/node/28](http://www.bradchen.com/node/28)和[https://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)）我意识到这不是直接可以实现的，但是有一些解决方法两种方式（获取和设置）。

这实际上非常简单：您可以让 PHP 应用程序通过传递会话 ID 或我们想要传递的 cookie 中的任何其他内容来读取 cookie 值，并通过解析 PHP 的 headers_list() 并创建一个允许浏览器设置这些 cookie。

# magento - 后端使用一种语言，前端使用另一种语言

> ID：12538158
> 
> 赞同：0
> 
> 时间：2012-09-21T21:07:27.457
> 
> 标签：magento, internationalization, e-commerce

我有 Magento 的网站，我想用德语保持管理（后端），而在我的前端，该语言必须是西班牙语。

我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:25:58.450

前端的语言环境设置为

```
System -> Configuration -> General -> Locale Options 
```

虽然可以从每个管理控制台页面底部的*界面区域设置*下拉菜单中更改后端的区域设置。

# vb.net - vb.net 使用在运行时添加的多个控件

> ID：12538159
> 
> 赞同：1
> 
> 时间：2012-09-21T21:07:27.753
> 
> 标签：vb.net, controls, runtime, naming

我正在为数据表中的每条记录添加一个选项卡页和 datagridview 到选项卡控件。

我想为每条记录创建一个新的 Tab/DataGridView（现在大约有 3 个）。我在声明一个新的DataGridView D。我以后如何引用这些控件？

我会想做一些事情，比如将datagridview中的更改保存到数据库中。目前我可以在屏幕上获取数据并且看起来不错，但我相信我没有正确添加 DataGridView 控件，因为我一直在重新使用“D”作为控件。

```
 Dim dt As New DataTable

        GetDataTable("SELECT * FROM aFeeTypes DescSeq", dt)

        Dim i As Integer

        'for each class in the datatable add a tab and a datagridview
        For i = 0 To dt.Rows.Count - 1

            Dim dr As DataRow
            dr = dt.Rows(i)

            Dim D = New DataGridView
            D.Visible = True

            Dim tp As New TabPage
            tp.Name = "tp" & i
            tp.Text = dr.Item("Desc2")
            frmUI.tcFee.TabPages.Add(tp)
            frmUI.tcFee.TabPages(i).Controls.Add(D)

            dgv_Fill(D, "SELECT * FROM Fee WHERE ClassID=" & dr.Item("ClassID") & " ORDER BY Seq")

            D.AutoResizeColumns()
            D.Width = tp.Width
            D.Height = tp.Height

        Next i 
```

这不起作用：

```
 With frmUI.Controls("D" & i)
                .AutoResizeColumns()
                .Width = tp.Width
                .Height = tp.Height
            End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:11:01.607

`D`纯粹是您使用它的范围内的变量名。

您需要为控件提供一个唯一的[名称](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.name.aspx)，以便以后可以引用它。

> Name 属性可用于在运行时按名称而不是类型和编程名称来评估对象。由于 Name 属性返回 String 类型，因此可以在 case 样式的逻辑语句（Visual Basic 中的 Select 语句、Visual C# 和 Visual C++ 中的 switch 语句）中对其进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T16:16:59.837

我找到了解决问题的方法。问题是新行有一个自动编号 ID。

当 da.update(dt) 发生时，新行被插入到数据库中。数据库知道新的自动编号 ID。但是，数据表没有。

为了让数据表知道，数据适配器被重新填充。但是，这会导致数据表包含所有旧行以及所有新行，并且它们都出现在 datagridview 中。

通过清除数据表中的旧行，填充会刷新数据表中的所有数据，从而刷新数据网格视图。

```
 Public Sub dgv_AddRow(ByVal dgvName As String)

    Dim dgv As DataGridView = colDataGridView.Item(dgvName)

    Dim da As SqlDataAdapter = colDataAdapter.Item(dgvName)
    Dim dr As DataRow = frmUI.allDataSet.Tables(dgvName).NewRow

    'autopopulate the class id
    dr("ClassID") = dgv.Parent.Tag

    'add the new row
    frmUI.allDataSet.Tables(dgvName).Rows.Add(dr)

    'get the changed table
    Dim dt As DataTable = frmUI.allDataSet.Tables(dgvName)

    'inserts the new row to the database.  concurrency violation 
    'will occur because datatable does not know the new Autonumber ID for the new row.

    da.Update(dt)

    'remove the datatable rows so they can be replaced using the adapter fill
    'if rows are not cleared, following fill causes datatable to 
    'have existing rows plus all the rows again due to the fill

    frmUI.allDataSet.Tables(dgvName).Rows.Clear()

    'refill the adapter (refill the table)
    'Everything you do to the underlying dataTable
    'gets displayed instantly on the datagridview

    da.Fill(frmUI.allDataSet, dgvName)

End Sub 
```

# python - 替换字符串中的特定单词（Python）

> ID：12538160
> 
> 赞同：9
> 
> 时间：2012-09-21T21:07:28.143
> 
> 标签：python, string, replace

我想替换字符串句子中的单词，例如：

```
What $noun$ is $verb$? 
```

用实际名词/动词替换“$ $”（包括）中的字符的正则表达式是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T21:15:52.057

您不需要正则表达式。我会做

```
string = "What $noun$ is $verb$?"
print string.replace("$noun$", "the heck") 
```

仅在需要时使用正则表达式。一般比较慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-19T08:42:54.797

鉴于您可以`$noun$`根据自己的喜好自由修改等，现在执行此操作的最佳实践可能是`format`在字符串上使用该函数：

```
"What {noun} is {verb}?".format(noun="XXX", verb="YYY") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:13:27.707

```
In [1]: import re

In [2]: re.sub('\$noun\$', 'the heck', 'What $noun$ is $verb$?')
Out[2]: 'What the heck is $verb$?' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-02T20:09:30.417

使用字典来保存正则表达式模式和值。使用 re.sub 替换令牌。

```
dict = {
   "(\$noun\$)" : "ABC",
   "(\$verb\$)": "DEF"
} 
new_str=str
for key,value in dict.items():
   new_str=(re.sub(key, value, new_str))
print(new_str) 
```

输出：

```
What ABC is DEF? 
```

# mac-address - 在 Vagrant 中设置虚拟机的 mac 地址

> ID：12538162
> 
> 赞同：37
> 
> 时间：2012-09-21T21:07:36.147
> 
> 标签：mac-address, vagrant

文档列出了可以在 Vagrantfile 中设置 VM 的 mac 地址，但是我添加的所有内容似乎最终都是语法错误。有人成功做到这一点吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-26T14:57:54.863

我用这个：

```
config.vm.network :bridged , :mac => "080027XXXXXX" 
```

并得到了我想要的。

文档不清楚选项哈希的语法是什么，并且似乎没有关于这应该是什么样子的示例。所以，就在这里！用mac地址桥接（当然编辑）。这会打开带有指定 mac 的 eth1，这让我的 DHCP 服务器很开心，并在我的网络上为其提供了一个正确的 fqdn。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-19T15:55:21.253

这是一个老问题，但我刚才遇到了同样的问题。[Vagrant 文档 v2](http://docs.vagrantup.com/v2/networking/index.html)似乎仍然不完整。最后，我在 Vagrantfile 中使用了 vagrant 1.2.7 中的这一行：

```
config.vm.network "public_network", :bridge => 'enp4s0', :mac => "5CA1AB1E0001" 
```

这个：

*   将名为“enp4s0”的主机接口设置为桥接接口，
*   然后在来宾上作为“eth0”由主机使用的同一 DHCP 分配一个 IP 地址
*   还将 5C:A1:AB:1E:00:01 设置为访客的 mac 地址

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-08T15:30:29.253

嗯，网络配置对我没有帮助。通过我的机器直接在 Vagrantfile 中定义 MAC 地址后`config.vm.base_mac = "MyEth0MacAddressWithoutSlashes"`启动 =)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-06T10:41:05.480

在 Vagrant 版本 2.0.1 上，我在 Vagrantfile 中为 private_network (provider = VirtualBox ; 版本 5.2.0) 编写：

```
config.vm.network "private_network", ip: "X.X.X.X", mac: "080027xxxxxx" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-28T12:44:59.033

下面提供的信息已过时。根据允许通过 DHCP 分配 IP 的文档，只需使用：

```
config.vm.network "public_network" 
```

这样就不需要处理mac地址了，它会自己生成。如果您需要将自定义 MAC 地址附加到网络设备，则：

```
config.vm.network "public_network", :mac=> "080027xxxxxx" 
```

# php - 在传递给 PayPal 之前使用 JQuery 更新表单字段

> ID：12538164
> 
> 赞同：1
> 
> 时间：2012-09-21T21:07:39.453
> 
> 标签：php, jquery, mysql, ajax

我花了一天时间研究 jquery，因为我认为它可以让我做到这一点。我有一个贝宝表格，我希望“onClick”按钮将此字段发送到我的 sql 表

```
<input type="hidden" name="amount" id="amount" value="0.05"> 
```

与此同时，我的 PayPal 按钮正在执行此操作：

```
<input class="btn btn-primary" onClick="send()" type="submit" value="Subscribe"> 
```

如何将此值传递给我的 process_plan.php？到目前为止，我有这个，但它挂起并且无法正常工作。

```
function send() {
    var id = $('#amount').val();
    var result;
    $.ajax({
        type: "POST",
        url: "process_plan.php",
        data: {
            "amount" : amount
        },
        async: true,
        dataType: "html",
        success: function(response) { 
            result = response;
        },
        error: function(response) {
            alert("Oh no! An error occured!");
        }
    });
    return result;
} 
```

如果代码真的很奇怪，我深表歉意——真的是我第一天学习 Jquery 和 Ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:13:31.750

不知道这是否是问题所在，但我认为您的代码中有一点错误。

请试试 ： `... data: { amount : "amount" }, ...`

如果该数量也是 var，请删除“

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:14:53.767

使用 firebug for firefox 或 fiddler (http://www.fiddler2.com/fiddler2/) 等工具查看请求和响应。它会告诉你通信是如何进行的。

话虽如此，它不挂。您的 send() 函数正在异步发布一个值，这意味着`function send()`在进行 ajax 调用时将返回。您不能依赖函数返回时设置的结果。这就是为什么你在调用中有一个回调函数：

```
success: function(response) { 
            result = response;
        }, 
```

这将在调用完成后运行，通常在发起函数完成后运行。要查看它的实际效果，请将其更改为：

```
success: function(response) { 
            window.alert("Response: " + response);
        }, 
```

然后，您可以通过选择表单并手动调用提交来继续提交表单，在成功功能中：

```
success: function(response){
    $('#form-id').submit(); 
} 
```

有关 ajax 怪癖的更多信息，请参阅此 msdn：[https ://developer.mozilla.org/en-US/docs/AJAX](https://developer.mozilla.org/en-US/docs/AJAX)

变量在哪里`amount`定义？我有一种感觉，您想`id`改用：

```
data: {
            "amount" : id
        }, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:16:46.867

我觉得还有一个错误！您将变量“id”设置为字段的值，然后在帖子的数据中发送未定义的变量“金额”。这将解决它：

```
var amount = $('#amount').val(); 
```

# php - 在 Mac OS X / MAMP 上升级 PEAR

> ID：12538165
> 
> 赞同：0
> 
> 时间：2012-09-21T21:07:41.027
> 
> 标签：php, macos, pear, mamp

我正在 Mac OS X 上安装 PHPUnit，但我当前的 PEAR 版本有问题。现有的 SO 问题并不能解决问题。当前的 PEAR 版本列为 1.9.1。PHPUnit 需要 1.9.4。

```
[le programmeur]$which pear
/Applications/MAMP/bin/php5.3/bin/pear

[le programmeur]$pear -V
PEAR Version: 1.9.1
PHP Version: 5.3.5
Zend Engine Version: 2.3.0

[le programmeur]$pear config-get php_dir
/Users/rallen8440/pear/share/pear 
```

运行`pear install -f pear`PEAR 1.9.4 后，应该会安装，并`running pear upgrade pear`“表明”我们处于最新版本。

```
[le programmeur]$/Applications/MAMP/bin/php5.3/bin/pear install -f pear
WARNING: "pear/Console_Getopt" is deprecated in favor of "pear/Console_GetoptPlus"
downloading PEAR-1.9.4.tgz ...
Starting to download PEAR-1.9.4.tgz (296,332 bytes)
.............................................................done: 296,332 bytes
install ok: channel://pear.php.net/PEAR-1.9.4
PEAR: Optional feature webinstaller available (PEAR's web-based installer)
PEAR: Optional feature gtkinstaller available (PEAR's PHP-GTK-based installer)
PEAR: Optional feature gtk2installer available (PEAR's PHP-GTK2-based installer)
PEAR: To install optional features use "pear install pear/PEAR#featurename"
[le programmeur]$/Applications/MAMP/bin/php5.3/bin/pear -V
PEAR Version: 1.9.1
PHP Version: 5.3.5
Zend Engine Version: 2.3.0

[le programmeur]$pear upgrade pear
pear/pear is already installed and is the same as the released version 1.9.4
upgrade failed 
```

但是，当 pear install phpunit/PHPUnit 运行时，它会说：

```
[le programmeur]$pear install phpunit/PHPUnit
Did not download optional dependencies: phpunit/PHP_Invoker, use --alldeps to download automatically
phpunit/PHPUnit requires PEAR Installer (version >= 1.9.4), installed version is 1.9.1
phpunit/PHPUnit can optionally use package "phpunit/PHP_Invoker" (version >= 1.1.0)
phpunit/File_Iterator requires PEAR Installer (version >= 1.9.2), installed version is 1.9.1
phpunit/Text_Template requires PEAR Installer (version >= 1.9.4), installed version is 1.9.1
phpunit/PHP_CodeCoverage requires PEAR Installer (version >= 1.9.4), installed version is 1.9.1
phpunit/PHP_CodeCoverage requires package "phpunit/File_Iterator" (version >= 1.3.0)
phpunit/PHP_CodeCoverage requires package "phpunit/Text_Template" (version >= 1.1.1)
phpunit/PHP_CodeCoverage can optionally use PHP extension "xdebug" (version >= 2.0.5)
phpunit/PHP_Timer requires PEAR Installer (version >= 1.9.2), installed version is 1.9.1
phpunit/PHPUnit_MockObject requires PEAR Installer (version >= 1.9.4), installed version is 1.9.1
phpunit/PHPUnit_MockObject requires package "phpunit/Text_Template" (version >= 1.1.1)
phpunit/PHP_TokenStream requires PEAR Installer (version >= 1.9.4), installed version is 1.9.1
No valid packages found
install failed

[le programmeur]$pear -V
PEAR Version: 1.9.1
PHP Version: 5.3.5
Zend Engine Version: 2.3.0 
```

曾经在 /usr/bin/pear 中安装了一个 PEAR，但它不再存在：

```
[le programmeur]$ls /usr/bin/pear
pear_old  peardev 
```

PATH`~/.profile`指向：`/Applications/MAMP/bin/php5.3/bin`

```
# Mod path
export PATH=/Applications/MAMP/bin/php5.3/bin:$PATH 
```

我不知道我在这里缺少什么。哈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:05:25.047

您的机器上有两个梨安装，如[https://stackoverflow.com/a/6596669/282601所述](https://stackoverflow.com/a/6596669/282601)

您正在执行的`pear`命令不是更新自身，而是第二次安装。

唯一的解决方案是配置 pear 以便它通过更改路径自行升级`pear config-show`- 或丢弃所有安装并从头开始安装。

# facebook - Facebook Graph Explorer 给出的结果与具有相同权限的 Graph API 请求不同

> ID：12538167
> 
> 赞同：2
> 
> 时间：2012-09-21T21:07:51.157
> 
> 标签：facebook, facebook-graph-api

我正在编写一个脚本，它将提取已发布到事件墙上的图像并将它们显示在画廊中。

在 Graph Explorer 中，我的访问令牌表示它涵盖以下权限：

```
create_note 
photo_upload
publish_actions 
publish_stream 
read_stream 
share_item 
status_update
user_photos 
video_upload 
```

当我在 Explorer (https://graph.facebook.com/412742725455517/photos) 中运行调用时，我得到了所有的图片。当我在我的代码中运行相同的调用时，使用通过调用生成的访问令牌：

```
var dialog_url = "http://www.facebook.com/dialog/oauth?"
          + "client_id=" + app_id 
          + "&redirect_uri=" + encodeURIComponent(post_login_url)
          + '&response_type=token'
          + "&scope=create_note,photo_upload,publish_actions,publish_stream,read_stream,share_item,status_update,user_photos,video_upload"; 
```

我只得到两张照片（由活动主持人放置的照片）。

为什么我无法获取所有图像？是否有其他获取图像的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:43:19.727

我不确定这是否解决了问题，但巧合的是，事情在我完成后开始起作用。

我进入应用程序设置并设置应用程序的权限，以及为应用程序设置域（域不会保存，除非您选择“用于网站登录”，即使您没有使用 Facebook 进行网站登录）。进行这些更改后，事情开始起作用了。我不知道为什么它们是相关的。

# playframework - 玩！框架：我可以重新安排工作吗？

> ID：12538170
> 
> 赞同：1
> 
> 时间：2012-09-21T21:08:00.810
> 
> 标签：playframework, scheduler, jobs, playframework-1.x

我正在使用播放！版本 1.2.4 的框架
在我的应用程序中，我已经实现了一些预定的作业（的后代`play.jobs.Job`）。

### 问题

我可以在运行时更改这些作业的时间表吗？

### 我自己的发现

乍一看，Play 中的作业调度！是通过 完成的，而后者又使用公开`play.jobs.JobsPlugin`的 JDK实例。`java.util.concurrent.ScheduledThreadPoolExecutor`到目前为止，我想出了以下方法：当需要更改时间表时，我只需迭代执行者的预定作业，取消我需要重新安排的作业并安排相同的作业（更准确地说，是同一类的作业）新设置。像这样的东西：

```
for (final Object o: JobsPlugin.executor.getQueue())
{
    ScheduledFuture task = (ScheduledFuture) o;
    Job job = (Job) Java.extractUnderlyingCallable((FutureTask)task);
    if (MyJob.class == job.getClass())
    {
        task.cancel(true);
        new MyJob().every("2h");
        break;
    }
} 
```

有没有更好的解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:44:57.173

我不确定您的解决方案是否有效，因为当您查看 JobsPlugin 调用时，它会在每个作业执行结束时重新计算 Job 的下一个计划执行日期。

这是我的解决方案，我重新创建了一个 JobScheduler 类，以便能够根据我的作业的 cron 属性计算作业执行日期。由于可见性规则，我不得不重新声明一些工作属性。

所以我的工作课程是

```
package jobs;

import java.util.Date;
import java.util.concurrent.ExecutorService;

import play.jobs.Job;

public class MyJob extends Job<Object> {

    public Date nextPlannedExecution = null;
    public String cron = null;

    @Override
    public void _finally() {
        // cron is null if we force job execution
        if (cron != null) {
            // As the job don't have a Cron annotation, super call does nothing
            super._finally();
            JobScheduler.scheduleForCRON(this, cron);
        }
    }

    void setExecutor(ExecutorService executor) {
        this.executor = executor;
    }
} 
```

我的调度程序类是打包作业；

```
import java.util.Date;
import java.util.concurrent.Callable;
import java.util.concurrent.TimeUnit;

import models.Partner;
import play.Logger;
import play.jobs.Job;
import play.jobs.JobsPlugin;
import play.libs.Expression;
import play.libs.Time.CronExpression;

public class JobScheduler {

    public static synchronized void scheduleCsvExportJob(String cron) {
        MyJob myJob = null;
        for (Job<?> job : JobsPlugin.scheduledJobs) {
            if (job instanceof MyJob) {
                myJob = (MyJob) job;
            }
        }
        if (myJob == null) {
            myJob = new MyJob();
            JobsPlugin.scheduledJobs.add(myJob);
        }
        myJob.cron = cron;
        scheduleForCRON(myJob, myJob.cron);
    }

    public static void scheduleForCRON(MyJob job, String cron) {
        try {
            Date now = new Date();
            cron = Expression.evaluate(cron, cron).toString();
            CronExpression cronExp = new CronExpression(cron);
            Date nextDate = cronExp.getNextValidTimeAfter(now);
            if (nextDate != null && !nextDate.equals(job.nextPlannedExecution)) {
                job.nextPlannedExecution = nextDate;
                JobsPlugin.executor.schedule((Callable<?>) job, nextDate.getTime() - now.getTime(),
                        TimeUnit.MILLISECONDS);
                job.setExecutor(JobsPlugin.executor);
            }
        } catch (Exception ex) {
            Logger.error(ex, "Cannot schedule job %s", job);
        }
    }
} 
```

使用此代码，您可以调用 JobScheduler.scheduleMyJob 通过传递正确的调度表达式来更改作业的调度：0 0 2 * * ? 每 2 小时。

当作业终止时，_finally 方法将调用设置新调度时间的 scheduleForCRON 方法。

如果你想强制执行作业，例如通过一个 gui 按钮，你可以创建一个没有 cron 属性定义的实例，这个实例最后不会重新安排自己

# c# - 可以在 default.aspx Web 应用程序中使用 sql 查询吗

> ID：12538175
> 
> 赞同：0
> 
> 时间：2012-09-21T21:08:25.600
> 
> 标签：c#, asp.net, .net, visual-studio, tsql

我可以使用 sql 查询并根据 sql 查询结果更改服务器 url 吗？

如果 sql 查询的值为 1，则将服务器指向 home.aspx，如果 sql 查询的值为 0，则指向 home2.aspx？

我试图根据 sql 数据库中的特定关联值向不同的人显示不同的主页。

谢谢

ps 老实说，我不知道登录是如何工作的。我不是.net 人，也没有创建系统。我知道 default.aspx 中服务器的 URL 直接，因为我已经经历过。网站上应用了单点登录设置，因此当用户登录到网站 A 时，他/她可以单击超链接，它将传递加密的用户登录信息，用户将自动出现在网站 b 的主页上（跳过网站 B 的登录页面）。我会更新我的录取率。

谢谢

ps 2：我只是想从 sql db 的表中的列中提取 INCOMING 用户的活动标志。如果该特定用户的标志设置为 1，则将其指向 URL A，如果标志设置为 0，则将其指向 URL B。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:15:12.950

兰道夫的评论是真实的。但是为了做你想做的事，如果你出于某种原因仍然想这样做，你会想看看 Server.Transfer() （如果你重定向到同一服务器上的另一个页面，效率更高，更可取，在同一个应用程序中），或 Response.Redirect()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:09:35.317

你可以重定向这样做，但**你不应该**！为什么？好吧，每次访问者来时都调用数据库将使您的响应时间等待很长时间。您可以做的是将结果缓存在内存或至少磁盘上（例如使用 B+ 树）或更好地提供公共主页，然后重定向。

现在，一旦您确定了一个用户集，说一个用于重定向的 cookie 等等，使用 cookie（如果需要，不要忘记授权），这将加快速度。

继续查看ASP.NET 上的[个性化和用户配置文件](http://msdn.microsoft.com/en-us/magazine/cc163724.aspx)，这是您想要做的。

# wpf - 更改 BitmapSource 调色板

> ID：12538177
> 
> 赞同：0
> 
> 时间：2012-09-21T21:08:32.000
> 
> 标签：wpf

有没有办法在 WPF 中更改 BitmapSource 的调色板？（在运行时）我尝试的每个 BitmapSource 层次结构都具有对调色板的只读访问权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:31:54.967

我还没有找到一种很好的方法，但是您始终可以从原始位图重新创建位图：

如果你有：

```
Private myBitmap As System.Windows.Media.Imaging.WriteableBitmap
Private myCurrentPalette As List(Of Color) 
```

然后，当您想更改调色板时，请执行以下操作：

```
 Dim iWidth As Integer = myBitmap.Width
    Dim iHeight As Integer = myBitmap.Height
    Dim iPixel(iWidth * iHeight - 1) As Byte
    myBitmap.CopyPixels(iPixel, iWidth, 0)
    myBitmap = New WriteableBitmap(iWidth, iHeight, 96, 96, PixelFormats.Indexed8, New BitmapPalette(myCurrentPalette))
    myBitmap.WritePixels(New Int32Rect(0, 0, iWidth, iHeight), iPixel, iWidth, 0) 
```

然后你需要申请：

`Image1.Source = myBitmap`

# python - Python函数不返回布尔值

> ID：12538178
> 
> 赞同：0
> 
> 时间：2012-09-21T21:08:33.423
> 
> 标签：python, boolean, return-value

> **可能重复：**
> [为什么“返回自我”返回无？](https://stackoverflow.com/questions/12272357/why-does-return-self-return-none)

我一直在尝试解决 Project Euler ( [http://projecteuler.net/problem=55](http://projecteuler.net/problem=55) ) 上的问题 55，现在我想我有答案了，我遇到了一个问题。我不想要问题 55 的解决方案，只是因为我做错了什么。

这是我的代码：（我认为您不需要全部）

```
t=0
lychrel=0
called=0

def iteratepal(n):
    global t
    global called
    called+=1
    b = int(''.join(reversed(str(n))))
    #print ("n =",n,"\nb =",b,"\nb+n =",b+n,"\n")

    if ispal(b+n) or ispal(n):
        t=0
        return False

    if t<50:
        t+=1
        iteratepal(b+n)
    else:                          # Here's the prob
        t=0                        # this block is executed (because it prints "yea")
        print("yea")               # but it doesn't return True!
        return True                # you can try it yourself (even in the interpreter)

def ispal(n):
    if n == int(''.join(reversed(str(n)))):
        return True
    return False

print(iteratepal(196))

for i in range(0,200):
    if iteratepal(i)==True:
        lychrel+=1
        print(i,"is Lychrel!")
    else:
        print(i,"is not a Lychrel!")
print(lychrel) 
```

感谢您的帮助，我对此感到非常困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:11:05.443

你递归地调用函数 when `t < 50`，但不要对返回值做任何事情：

```
if t<50:
    t+=1
    iteratepal(b+n)
else:                          
    t=0                        
    print("yea")               
    return True 
```

该`else:`分支永远不会执行，因此`None`会被返回。您可能希望返回递归调用的结果：

```
if t<50:
    t+=1
    return iteratepal(b+n)
else:                          
    t=0                        
    print("yea")               
    return True 
```

一些进一步的提示：

*   无需`==True`在`if`语句中进行测试，以下将正常工作：

    ```
    if iteratepal(i): 
    ```

*   您可以返回测试`def ispal(n)`本身是一个布尔结果，只需返回而不进行测试：

    ```
    def ispal(n):
        return n == int(''.join(reversed(str(n)))) 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:12:16.333

您没有返回递归的结果。改变这个

```
if t<50:
    t+=1
    iteratepal(b+n) 
```

对此

```
if t<50:
    t+=1
    return iteratepal(b+n) 
```

# php - 获得多个输入值的简短技术

> ID：12538179
> 
> 赞同：0
> 
> 时间：2012-09-21T21:08:34.820
> 
> 标签：php

伙计们只是想知道是否有更好的编码风格来从 from 因为我认为我的编码太长并且吃很多行

```
<body>
    <form action="index.php" method="post">

        <input type="hidden" name="number_students" value="4">  
        <table>
            <tr>
                <td><input type="text" name="name[0]"></td>
                <td><input type="text" name="grade[0]"></td>
            </tr>
            <tr>
                <td><input type="text" name="name[1]"></td>
                <td><input type="text" name="grade[1]"></td>
            </tr>
            <tr>
                <td><input type="text" name="name[2]"></td>
                <td><input type="text" name="grade[2]"></td>
            </tr>
            <tr>
                <td><input type="text" name="name[3]"></td>
                <td><input type="text" name="grade[3]"></td>
            </tr>   
        </table>

        <input type="submit" name="submit_in" value="submit">
</form>
</body> 
```

php..

```
$button = $_POST['submit_in'];
$arrayname = array();
$arraygrade = array();
$name= $_POST['name'];
$grade = $_POST['grade'];   
$counter2 = 0;

if(isset($button)){

    foreach($name as $a => $x){ 
        $arrayname[] ="".$x;
        }  
 foreach($grade as $b => $y){
            $arraygrade[] ="".$y;
            $counter2+=1;
        }  
        for($v=0;$v<=$counter2-1;$v++){
            $insert = "INSERT INTO stud_info(stud_name,stud_grade) 
          VALUES('$arrayname[$v]','$arraygrade[$v]')";
          if(@!mysql_query($insert)){
            die('error insert'.mysql_error());
        }

        }

} 
```

我想知道是否有更简洁的技术来获取这些值，假设输入是动态的，这就是为什么我在名称和 ID 的末尾输入一个数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:29:23.847

在循环中执行查询也不是一件好事，它会减慢您的执行速度。尝试这个：

```
 if(!empty($_POST)) {

        //check if post variables are set and they are not empty

        //check that sizeof($_POST['name']) == $_POST['grade']

        //connect to db

        $name = $grade = array();
        for($i=0; $i < sizeof($_POST['name']); ++$i) { 
            $name[$i] = mysql_real_eascape_string(trim($_POST['name'][$i]));
            $grade[$i] = mysql_real_eascape_string(trim($_POST['grade'][$i]));
        } 

        $values = array();
        $insert = 'INSERT INTO stud_info(`stud_name`, `stud_grade`) VALUES';
        for($i=0; $i < sizeof($name); ++$i) { 
            $values[$i] = '(\''.$name[$i].'\', \''.$grade[$i].'\')';
        }
        $values = implode(', ', $values);
        $insert .= $values;

        if(@!mysql_query($insert)){
            die('error insert'.mysql_error());
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:14:54.137

你正在做的不是必需的，因为 php 为你不需要创建不同的 multipal 输入返回一个数组，$post 已经是数组并且 $post["name"] 也是数组

```
 $name = $_POST['name']; 

       foreach( $name as $key => $n ) { echo "The name is ".$n.".", thank you\n"; } 
```

看到它已经是一个不需要循环并再次创建它的数组它已经存在

当你做 $name=$_post["name"]; $name 在你的情况下变成数组

就如此容易

$button = $_POST['submit_in']; $name= $_POST['name']; $grade = $_POST['grade']; $counter2 = 0;

如果（isset（$按钮））{

for($v=0;$v<=$counter2-1;$v++){ $insert = "插入 stud_info(stud_name,stud_grade) VALUES('$name[$v]','$grade[$v] ')"; if(@!mysql_query($insert)){ die('错误插入'.mysql_error()); }

}

}

**注意 **我在移动浏览器上，所以代码没有经过测试，但它应该可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:26:20.760

我认为您还应该更多地担心代码中的安全性和 SQL 注入...

### 重温 PHP 代码（10 行）

```
$sql = "INSERT INTO stud_info(stud_name,stud_grade)  VALUES('%s','%s')" ;
if (isset($_POST['submit_in'])) {
    for($i = 0; $i < count($_POST['name']); $i++)
    {
        $name = mysql_real_escape_string($_POST['name'][$i]);
        $grade = mysql_real_escape_string($_POST['grade'][$i]);
        $insert = sprintf($sql, $name, $grade);
        mysql_query($insert) or die('error insert' . mysql_error());
    }
} 
```

# css - CSS：下拉菜单：让子菜单与菜单对齐

> ID：12538182
> 
> 赞同：0
> 
> 时间：2012-09-21T21:09:01.513
> 
> 标签：css, drop-down-menu

我正在尝试为网站开发一个下拉菜单。我正在使用我为名为“ddmenu”的菜单找到的这个不错的库。我对其进行了定制，以使其接近我想要的位置。我的问题是我无法让子菜单的**右**边缘与父菜单的**右边缘对齐。**所有 3 个菜单都向右或向左倾斜......并且数量不同。

我只是没有足够的 CSS 来轻松理解这个库。

任何提示或帮助将不胜感激。

非常感谢提前

史蒂夫

**我的 menu.html 文件：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <title>NSD: NOAA Staff Directory</title>
       <style type="text/css">
        .nav_user_menu
        {
            float: right;
            color: black;
            text-decoration: none;
            font-weight:bold; 
        }
        .nav_logout_link
        {
            display: block;
            float: right;
            padding: 5px 10px;
            color: black;
            text-decoration: none;
            font-weight:bold; 
            border-left: 1px solid;
        }

    </style>
    <link rel="StyleSheet" href="search_files/ddmenu.css" type="text/css">
    <script language="JavaScript" "text="" javascript"="" src="search_files/ddmenu.js"></script>
</head>

    <body>

    <ul id="ddmenu">

        <li>
            <a href="#">A Generic Link</a>
        </li>

        <li>
            <a href="#">Menu 1</a>
            <ul>
                <li><a href="#">Menu Choice 1</a></li>
                <li><a href="#">Menu Choice 2</a></li>
                <li><a href="#">Menu Choice 3</a> </li>
                <li>
                    <a href="#">Help</a>
                        <ul>
                            <li><a href="#">Submenu Choice 1</a></li>
                            <li><a href="#">Submenu Choice 2 </a></li>
                            <li><a href="#">Submenu Choice 3</a></li>
                        </ul>
                </li>
             </ul>
        </li> 

        <li>
            <a href="#">Menu 2</a>
            <ul>
                <li><a href="#">Add/Edit ACME Locations</a></li>
                <li><a href="#">Add/Edit ACME Mailing Addresses</a></li>
                <li><a href="#">Add/Edit ACME Regions</a></li>
                <li><a href="#">Add/Edit ACME Employee Types</a></li>
                <li><a href="#">Add/Edit ACME Employee Flags</a></li>
                <li><a href="#">Add/Edit ACME Production Control Users</a></li>
                <li><a href="#">Add/Edit ACME Report Access</a></li>
            </ul>
       </li>

       <!-- Log Out Button ---------------------------------------------------->
       <div class="nav_logout_link">

           <a href="#">Log Out</a>
       </div>

        <div class = "nav_user_menu">
        <li>
            <a href="#">Menu 3</a>
            <ul>
                <li><a href="#">Update My Record</a></li>
                <li><a href="#">Update My ACME Sales Profile</a></li>
                <li><a href="#">Update My Voluntary ACME Sales Statistics</a></li>
                <li><a href="#">My Reports</a></li>
            </ul>
        </li> 
        </div>

    </ul><!-- end menu -->

</body>
</html> 
```

**ddmenu.css 文件：**

```
/* ---------------------------------------------
Keyboard accessible dropdown menu
Author:Adriana Palazova
Version:22 February 2009
last rev.: 19 October 2009
gratitude to Matthew Carroll - http://carroll.org.uk/sandbox/suckerfish/bones2.html
and
Alan Gresley and Duncan Hill - http://css-class.com/articles/ursidae/
------------------------------------------------ */
#ddmenu {font: bold 10pt Arial,Helvetica;border: 2px solid gray;}

/*#ddmenu a:link {text-decoration:none}*/

/*#ddmenu a:visited {text-decoration:none}*/

#ddmenu a:hover, #ddmenu a:focus, #ddmenu a:active {text-decoration:underline}

/* --- TOP LEVEL MENU STYLES --- */
#ddmenu li{list-style-type:none;}

#ddmenu 
{
    float:left; 
    display:inline; 
    width:100%; 
    padding:0; 
    background:#fff0ca; /*#414141;*/
}

#ddmenu li 
{
    position:relative; 
    float:left; 
    /*border-right:1px solid /*#fff; */
    background:#fff0ca;/*#414141; */
    font-weight:bold

}

#ddmenu li a 
{
    display:block; 
    white-space: nowrap;
    /*width:7em; */
    padding:5px 0.7em 7px;
    border: 1px solid gray;
    border-top: 0px;
    border-bottom:0px;
    /*border-style:solid;
    border-width:1px;*/
    /*border-width:1px 1px 0; 
    border-style:solid; */
    /*border-color:#3e8ebe #0b3965 #003 #3e8ebe;*/
    /*color:#fff*/
}

/* --- SUB MENU ITEMS --- */

#ddmenu li li 
{
    border:0 none; 
    font-weight:normal; 
    z-index:20
} /* no width here because of IE */

#ddmenu li li a 
{
    /*width:11em; */
    padding:5px 0.5em 7px; 
    border-width:1px
} 

#ddmenu ul > li 
{
    display:block; 
    float:none;
    text-align:left;

} /* for Opera */

/* --- SUB MENU FIRST LEVEL INITIAL POSITION --- */  

#ddmenu ul 
{
    position:absolute; 
    left:-9999px; 
    top:100%; 
    /*width:12em; */
    padding:0; 
    border:1px solid #003

}

/*for modern browsers:*/
#ddmenu li > ul  
{
    top:auto; 
    width:auto
}

/*see the conditional comments for IE7*/

/* --- SHOW FIRST LEVEL SUB MENU --- */
/*For ie6:*/
#ddmenu li.sfhover ul,
#ddmenu li a:active ul,
#ddmenu li.sffocusparent ul,
/* menu points to the right */
/*#ddmenu li a.sffocus ul {left:0}*/
/*#ddmenu li a.sffocus ul {left:-10em} */
/*#scooby li a.sffocus ul {left:-22em} */

/* for modern browsers + IE7:*/
#ddmenu li:hover > ul,
#ddmenu li.sfhover > ul,
#ddmenu li.sffocusparent > ul,
#ddmenu li a:active > ul,
#ddmenu li a:focus + ul,
/* menu points to the right */
/*#ddmenu li a.sffocus + ul {left:auto}*/
#ddmenu li a.sffocus + ul {left:-10em}

/* --- SUB MENU SECOND LEVEL and following levels UNHOVERED POSITION --- */  

#ddmenu li:hover ul ul,
#ddmenu li:active ul ul,
#ddmenu a:focus ul ul,
#ddmenu li.sfhover ul ul,
#ddmenu a.sffocus ul ul,
#ddmenu li.sffocusparent ul ul,
#ddmenu li.sffocus ul ul {left:-9999px}

/* --- SHOW SECOND LEVEL SUB MENU --- */

/* For ie6: */
#ddmenu ul li a:hover ul, #ddmenu ul li.sfhover ul,
#ddmenu ul li a:active ul,
#ddmenu ul li.sffocusparent ul,
/* use a positive number to point the submenu to the right, use 12em for margin-left*/
#ddmenu ul li.sffocus ul {margin-left: -22em; top:-1px; left:1px}

/* for modern browsers + IE7: */
#ddmenu ul li:hover > ul,
#ddmenu ul li.sfhover > ul,
#ddmenu li li a.sffocus + ul,
/* use a positive number to point the submenu to the right, use 12 em for margin-left*/
#ddmenu li li.sffocus > ul {margin-left: -22em; top:-1px; left:1px}

/* --- SUB LEVEL positions for JavaScript  OFF - thanks http://css-class.com/articles/ursidae/ --- */ 

/* --- The focus position for submenu anchors --- */
#ddmenu.jsoff li li a:focus, #ddmenu.jsoff li li a:active { /* --- THE FOCUS POSITION FOR FIRST SUB MENU ANCHORS --- */
    position:relative;
    left:9999px;
    top:-1px;
    z-index:21;
}
#ddmenu.jsoff li li li a:focus, #ddmenu.jsoff li li li a:active { /* --- THE FOCUS POSITION FOR SECOND SUB MENU ANCHORS --- */
    left:19999px;
    margin-left:12em;
    top:-2.9em;
}

/* --- The hovered position for submenu anchors when the anchor is in focus --- */
#ddmenu.jsoff li:hover li a:focus, #ddmenu.jsoff li:hover li a:active { 
    position:relative; left:auto; top:-1px; margin-left:0}

#ddmenu.jsoff li:hover a:focus + ul { /* --- THE POSITION OF FIRST LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED AND HOVERED --- */
    margin-left:0px;
}
#ddmenu.jsoff li li a:focus + ul { /* --- THE POSITION OF SECOND LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED FOR JavaScript  OFF --- */
    top:-1px;
    left:12em;
    margin-left:10000px;
}
#ddmenu.jsoff li:hover li a:focus + ul { /* --- THE POSITION OF SECOND LEVEL SUB MENU, WHEN THE PARENT IS FOCUSSED AND HOVERED --- */
    left:12em;
    margin-left:1px;
}

/* --- BACKGROUND IMAGES OF PARENT ITEMS --- */

#ddmenu li a.mum {
  BACKGROUND: url(../images/down.gif);
  background-repeat: no-repeat;
  background-position: 95% 50%;
}
#ddmenu ul li a.mum 
{
    BACKGROUND: url(../images/right.gif);
}

/* --- LINK HOVER STYLES --- */

#ddmenu li a:link, #ddmenu li a:visited  {background-color:transparent}
#ddmenu li a:hover, #ddmenu li:hover a, #ddmenu li a:focus, #ddmenu li a:active, 
#ddmenu li.sfhover a, #ddmenu li a.sffocus, #ddmenu li.sffocusparent a {background-color:#fff0ca/*#135*/}/* top level background hover color */

#ddmenu li li a:link, #ddmenu li li a:visited  {background-color:transparent}
#ddmenu ul li a:hover, #ddmenu ul li:hover a, #ddmenu ul li a:focus, #ddmenu ul li a:active, 
#ddmenu ul li.sfhover a, #ddmenu ul li a.sffocus, #ddmenu ul li.sffocusparent a {background-color:blue;color:#fff0ca;}

#ddmenu li li li a:link, #ddmenu li li li a:visited  {background-color:transparent}
#ddmenu li li li a:hover, #ddmenu li li li:hover a, #ddmenu li li li a:focus, #ddmenu li li li a:active, 
#ddmenu li li li.sfhover a, #ddmenu li li li a.sffocus, #ddmenu li li li.sffocusparent a {background-color:blue;color:#fff0ca;} /*{background-color:#135}*/

/* <!--[if IE 7]> */

#ddmenu li > ul  {top:100%}

#ddmenu a
{
    background: url(../images/down.gif) no-repeat -95% -50%;
}

#ddmenu ul li:hover > ul, #ddmenu ul li.sfhover > ul, 
#ddmenu li li a.sffocus + ul, #ddmenu ul li.sffocusparent > ul {left:0} 
```

**ddmenu.js 文件：**

```
var menuID = 'ddmenu';
/* --- gratitude to Matthew Carroll - http://carroll.org.uk/ - http://carroll.org.uk/sandbox/suckerfish/bones2.html
  based on http://www.htmldog.com/articles/suckerfish/dropdowns/ --- */
function accessible_menus_ie() {
  var sfEls = document.getElementById(menuID).getElementsByTagName('LI');
  for (var i=0; i<sfEls.length; i++) {
    sfEls[i].onmouseover=function() {
      this.className+=(this.className.length>0? ' ': '') + 'sfhover';
      this.parentNode.className+=(this.parentNode.className.length>0? ' ': '') + 'sfhover';
    }
    sfEls[i].onmouseout=function() {
      this.className=this.className.replace(new RegExp('( ?|^)sfhover\\b'), '');
      this.parentNode.className=this.parentNode.className.replace(new RegExp('( ?|^)sfhover\\b'), '');
    }
  }
}
function accessible_menus() {
  var ddMenu = document.getElementById(menuID);
  ddMenu.className = ddMenu.className.replace(new RegExp('(^|\\s)jsoff(\\s|$)'), '');
  var mcEls = document.getElementById(menuID).getElementsByTagName('A');
  for (var i=0; i<mcEls.length; i++) {
    mcEls[i].onfocus=function() {
      this.className = this.className ? this.className + ' sffocus' : 'sffocus'; //a:focus
      this.parentNode.className = this.parentNode.className ? this.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < a:focus
      this.parentNode.parentNode.className = this.parentNode.parentNode.className ? this.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < a:focus
      if(this.parentNode.parentNode.parentNode.nodeName == 'LI') { //li < ul < li < a:focus
        this.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < ul < li < a:focus
        this.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < ul < li < a:focus
        if(this.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == 'LI') {  //li < ul < li < ul < li < a:focus
          this.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.className ? this.parentNode.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //li < ul < li < ul < li < a:focus
          this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className ?this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className + ' sffocusparent' : 'sffocusparent'; //ul < li < ul < li < ul < li < a:focus
        }
      }
    }
    mcEls[i].onblur = function() {
      this.className = this.className.replace(new RegExp('(^|\\s)'+'sffocus'+'(\\s|$)'), '');
      this.parentNode.className = this.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
      this.parentNode.parentNode.className = this.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
      if(this.parentNode.parentNode.parentNode.nodeName == 'LI') {
        this.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
        this.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
        if(this.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == 'LI') {
          this.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');
          this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.className.replace(new RegExp('(^|\\s)'+'sffocusparent'+'(\\s|$)'), '');

        }
      }
    }
  }
}

// only ie needs the sfHover script. all need the accessibility script...

// thanks Brothercake - Generic onload - GO1.1 - http://www.brothercake.com/site/resources/scripts/onload/
if(typeof window.addEventListener != 'undefined') { //.. gecko, safari, konqueror and standard
    window.addEventListener('load', accessible_menus, false);}
else if(typeof document.addEventListener != 'undefined') { //.. opera
    document.addEventListener('load', accessible_menus, false);}
else if(typeof window.attachEvent != 'undefined') { //.. win/ie
    window.attachEvent('onload', accessible_menus_ie);
    window.attachEvent('onload', accessible_menus);}
//** remove this condition to degrade older browsers
else {  //.. mac/ie5 and anything else that gets this far
  if(typeof window.onload == 'function') { //if there's an existing onload function
    var existing = window.onload; //store it
    window.onload = function() { //add new onload handler
      existing(); //call existing onload function
      //call generic onload function
      accessible_menus_ie();
      accessible_menus();
    };
  } else {
    window.onload = function() { //setup onload function
      accessible_menus_ie();
      accessible_menus();
    };  
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:28:21.227

在它说的部分`/* --- SHOW FIRST LEVEL SUB MENU --- */`，尝试将值更改为`left`to`0em`而不是`left:-10em;`。我以前从来没有玩过这个插件，但这在我的最后修复了它。有两个例子。您想更改“现代浏览器”部分中的第二个。使用行号会更容易。

# ajax - JQuery 和 Prototype.js 之间的冲突

> ID：12538184
> 
> 赞同：0
> 
> 时间：2012-09-21T21:09:18.303
> 
> 标签：ajax, jquery, prototypejs

> **可能重复：**
> [如何避免 JQuery 和 Prototype 之间的冲突](https://stackoverflow.com/questions/1401349/how-to-avoid-conflict-between-jquery-and-prototype)

我正在为我公司的软件添加增强功能。我正在使用 JQuery 进行 Ajax 请求调用。但我的公司同样使用 Prototype.js。现在，当我将增强功能集成到主软件时，Prototype.js 和 JQuery 之间出现冲突，因为它们都使用“$”符号。

谁能帮我这个？

我必须同时包含 JQuery 和 Prototype.js，而且真的无法避免其中任何一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:12:00.207

您可以将 jQuery 代码放入：

```
(function($){
     $(document).ready(function(){

     })
})(jQuery) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:11:57.717

您可以使用[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)来防止它自己注册为`$`变量。然后使用这些模式包装你的 jQuery 调用：

```
(function($)
{
    $(''); // jQuery object.
})(jQuery);

jQuery(document).ready(function($)
{
    $(''); // jQuery object.
}); 
```

# c++ - C ++中的双类型类

> ID：12538188
> 
> 赞同：0
> 
> 时间：2012-09-21T21:09:38.710
> 
> 标签：c++, class, double

在遇到了很多关于双精度类型变量的问题，比如测试相等和除以零等问题之后，我想到了创建一个类来处理双精度值，并尝试将我们经常使用的内在双精度值与新类无缝切换。但它并不完全适合。这是我的课：

```
class HDouble
{
  //private:
public:
  double dValue;
  static const double dEpsilon;

  HDouble()
  {
    dValue = 0.0;
  }

  HDouble(double OtherValue)
  {
    if (IsNaN(OtherValue))
    {
      assert(0);
    }
    dValue = OtherValue;
  }

  const HDouble& operator=(const HDouble& OtherValue)
  {
    if (this == &OtherValue)      // Same object?
      return *this;

    if (IsNaN(OtherValue.dValue))
    {
      assert(0);
    }
    dValue = OtherValue.dValue;
    return *this;
  }

  const HDouble& operator=(const double& OtherValue)
  {
    dValue = OtherValue;
    return *this;
  }
  bool operator==(const HDouble& OtherValue)
  {
    return (abs(dValue - OtherValue.dValue) < dEpsilon);
  }

  //////////////////////////////////////////////////////////////////////////
  const HDouble& operator++()
  {
    dValue++;
    return *this;
  }
  const HDouble& operator++(int dummy)
  {
    dValue++;
    return *this;
  }
  const HDouble& operator--()
  {
    dValue--;
    return *this;
  }
  const HDouble& operator--(int dummy)
  {
    dValue--;
    return *this;
  }

//////////////////////////////////////////////////////////////////////////
  HDouble operator*(const HDouble& OtherValue)
  {
    HDouble Result = *this;
    Result *= OtherValue;
    return Result;
  }
  HDouble operator*(const double& OtherValue)
  {
    HDouble Result = *this;
    Result *= OtherValue;
    return Result;
  }

  HDouble operator/(const HDouble& OtherValue)
  {
    HDouble Result = *this;
    Result /= OtherValue;
    return Result;
  }
  HDouble operator/(const double& OtherValue)
  {
    HDouble Result = *this;
    Result /= OtherValue;
    return Result;
  }

  HDouble operator+(const HDouble& OtherValue)
  {
    HDouble Result = *this;
    Result += OtherValue;
    return Result;
  }
  HDouble operator+(const double& OtherValue)
  {
    HDouble Result = *this;
    Result += OtherValue;
    return Result;
  }

  HDouble operator-(const HDouble& OtherValue)
  {
    HDouble Result = *this;
    Result -= OtherValue;
    return Result;
  }
  HDouble operator-(const double& OtherValue)
  {
    HDouble Result = *this;
    Result -= OtherValue;
    return Result;
  }

  //////////////////////////////////////////////////////////////////////////
  HDouble& operator*=(const double& OtherValue)
  {
    dValue *= OtherValue;
    return *this;
  }
  HDouble& operator*=(const HDouble& OtherValue)
  {
    dValue *= OtherValue.dValue;
    return *this;
  }

  HDouble& operator+=(const HDouble& OtherValue)
  {
    dValue += OtherValue.dValue;
    return *this;
  }
  HDouble& operator+=(const double& OtherValue)
  {
    dValue += OtherValue;
    return *this;
  }

  HDouble& operator-=(const double& OtherValue)
  {
    dValue -= OtherValue;
    return *this;
  }
  HDouble& operator-=(const HDouble& OtherValue)
  {
    dValue -= OtherValue.dValue;
    return *this;
  }

  HDouble& operator/=(const double& OtherValue)
  {
    dValue /= OtherValue;
    return *this;
  }
  HDouble& operator/=(const HDouble& OtherValue)
  {
    dValue /= OtherValue.dValue;
    return *this;
  }
  //////////////////////////////////////////////////////////////////////////

  inline bool IsNaN(double d) 
  {
    if (!(d >= DBL_MIN && d <= DBL_MAX))
    {
      return true;
    }
    else
      return false;
  }
}; 
```

一个问题就像一个已经存在的函数调用 cos() 函数，它需要一个双精度值。有没有办法让我的类对象在需要时衰减到内在的双倍？谢谢。

ps 我的课程必须与现有代码无缝匹配。不能改变这一点。我所能做的就是用HDouble搜索并替换double。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:18:25.603

您需要向您的类添加一个复制构造函数和一个转换运算符，并且您还应该将该类的数据成员移动到`private`：

```
class HDouble 
{ 
private: 
  double dValue; 

public: 
  static const double dEpsilon; 

  HDouble() 
  { 
    dValue = 0.0; 
  } 

  HDouble(double OtherValue) 
  { 
    if (IsNaN(OtherValue)) 
    { 
      assert(0); 
    } 
    dValue = OtherValue; 
  } 

  HDouble(const HDouble &src) 
  { 
    dValue = src.dValue; 
  } 

  ...

  operator double() const
  {
    return dValue;
  }

  ...
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:17:04.193

是的，将转换运算符添加到您的类：添加`operator double() { return dValue; }`到您的类。这样`HDouble`，当您将其传递给`cos`.

此外，您已将所有运算符实现为成员函数。我建议阅读有关[运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading/4421719#4421719)的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:17:48.467

您可以添加一个方法来返回`double`：

```
double value()
{
    return dValue;
} 
```

# objective-c - 使 UIScrollview 分页变慢

> ID：12538189
> 
> 赞同：1
> 
> 时间：2012-09-21T21:09:59.600
> 
> 标签：objective-c, ios, cocoa-touch

在 iOS 6 商店中，屏幕截图的分页效果并不像正常的分页行为。我将如何减慢分页效果来模拟类似的东西？

我已经尝试过使用：

```
decelerationRate = UIScrollViewDecelerationRateFast 
```

但这行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:07:41.050

这个属性的类型是浮点数，所以给它一些浮点值。0.3, 0.5 什么的

# javascript - 面向对象的javascript - 继承实现

> ID：12538191
> 
> 赞同：0
> 
> 时间：2012-09-21T21:10:16.033
> 
> 标签：javascript, javascript-objects

我有两个具有非常相似方法的模块（它是实现相同方法/接口的适配器模式的一部分）。区别在于两行代码：

```
function MyModuleA{

}

ModuleA.prototype.myMethod = function{
           --LineA--
           --LineB--
           --LineC--
           --LineD--
}

function MyModuleB{

}

ModuleB.prototype.myMethod = function{
           --LineA--
           **--LineE--**     //different line
           --LineB--
           --LineC--
           **--LineF--**     //different line
           --LineD--
} 
```

我可以使用 javascript 继承只实现一次类似的行吗？

谢谢！！

# javascript - 为什么我的画布在转换为图像后变为空白？

> ID：12538193
> 
> 赞同：10
> 
> 时间：2012-09-21T21:10:31.123
> 
> 标签：javascript, canvas, webgl

我正在尝试使用以下代码段[将此页面](http://learningwebgl.com/lessons/lesson01/index.html)`canvas`上的元素转换为 png（例如，在 JavaScript 控制台中输入）：

```
(function convertCanvasToImage(canvas) {
  var image = new Image();
  image.src = canvas.toDataURL("image/png");
  return image;
})($$('canvas')[0]); 
```

不幸的是，我得到的 png 是完全空白的。另请注意，调整页面大小后，原始画布变为空白。

为什么会`canvas`出现空白？如何将其转换`canvas`为 png？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-23T00:12:54.827

Kevin Reid 的`preserveDrawingBuffer`建议是正确的，但（通常）有更好的选择。tl;dr 是最后的代码。

将渲染网页的最终像素放在一起可能会很昂贵，并将其与渲染 WebGL 内容进行协调更是如此。通常的流程是：

1.  JavaScript 向 WebGL 上下文发出绘图命令
2.  JavaScript 返回，将控制权返回给主浏览器事件循环
3.  WebGL 上下文将绘图缓冲区（或其内容）转换为合成器，以便集成到当前正在屏幕上呈现的网页中
4.  页面，带有 WebGL 内容，显示在屏幕上

请注意，这与大多数 OpenGL 应用程序不同。其中，渲染的内容通常直接显示，而不是与页面上的一堆其他内容合成，其中一些实际上可能位于 WebGL 内容之上并与 WebGL 内容混合。

WebGL 规范已更改为在第 3 步之后将绘图缓冲区视为基本上是空的。您在 devtools 中运行的代码在第 4 步之后出现，这就是您得到一个空缓冲区的原因。对规范的这种更改允许在第 3 步之后的消隐基本上是硬件中实际发生的情况（如在许多移动 GPU 中）的平台上实现显着的性能改进。如果您想解决这个问题，有时在第 3 步之后制作 WebGL 内容的副本，浏览器必须*始终*在第 3 步之前制作绘图缓冲区的副本，这将使您的帧率在某些平台上急剧下降。

您可以这样做并强制浏览器制作副本并通过设置`preserveDrawingBuffer`为 true 来保持图像内容可访问。从规范：

> 可以通过设置 WebGLContextAttributes 对象的 preserveDrawingBuffer 属性来更改此默认行为。如果此标志为真，则绘图缓冲区的内容将被保留，直到作者清除或覆盖它们。如果此标志为假，则在渲染函数返回后尝试使用此上下文作为源图像执行操作可能会导致未定义的行为。这包括 readPixels 或 toDataURL 调用，或将此上下文用作另一个上下文的 texImage2D 或 drawImage 调用的源图像。

在您提供的示例中，代码只是更改了上下文创建行：

```
gl = canvas.getContext("experimental-webgl", {preserveDrawingBuffer: true}); 
```

请记住，它会在某些浏览器中强制使用较慢的路径，并且性能会受到影响，具体取决于您渲染的内容和方式。在大多数桌面浏览器中应该没问题，实际上不需要制作副本，而这些确实构成了绝大多数支持 WebGL 的浏览器......但仅限于现在。

**但是**，还有另一种选择（在规范的下一段中有些令人困惑地提到）。

本质上，您在第 2 步之前自己制作副本：在所有绘制调用完成之后，但在您从代码将控制权返回给浏览器之前。这是 WebGL 绘图缓冲区仍然完好且可访问的时候，您应该可以轻松访问像素。您使用相同`toDataUrl`或`readPixels`其他方式使用的调用，重要的是时机。

在这里，您可以两全其美。您获得了绘图缓冲区的副本，但您无需在每一帧中都为它付费，即使是那些您不需要副本的帧（可能是其中的大多数），就像您将`preserveDrawingBuffer`设置为 true 一样。

在您提供的示例中，只需将代码添加到底部`drawScene`，您应该会在下面看到画布的副本：

```
function drawScene() {
  ...

  var webglImage = (function convertCanvasToImage(canvas) {
    var image = new Image();
    image.src = canvas.toDataURL('image/png');
    return image;
  })(document.querySelectorAll('canvas')[0]);

  window.document.body.appendChild(webglImage);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T01:27:43.580

这里有一些东西可以尝试。我不知道是否需要这些中的任何一个*来*完成这项工作，但它们可能会有所作为。

*   添加`preserveDrawingBuffer: true`到`getContext`属性。
*   尝试使用稍后的动画教程来执行此操作；即在画布上反复绘制而不是一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-07T15:32:33.390

`toDataURL()`从 Buffer 中读取数据。

我们不需要使用`preserveDrawingBuffer: true`

在读取数据之前，我们还需要使用`render()`

最后：

```
renderer.domElement.toDataURL(); 
```

# python - 在python中MAC地址转换为字节数组

> ID：12538199
> 
> 赞同：4
> 
> 时间：2012-09-21T21:10:49.283
> 
> 标签：python, networking, python-3.x, python-2.7, bytearray

我有这种格式的mac地址

```
00:45:36:45:f2:00 
```

我想将此mac地址转换为字节数组。我的意思是，通过删除中间的“：”，我总共得到 6 个字节，这 6 个字节应该作为字节数组中的 6 个字节。该字节数组如何转换为整数？python中是否有任何内置函数可以用非常少的执行时间（比如微秒）来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T21:14:51.137

在 Python 2.7 中，

```
macstr = addr.replace(':', '').decode('hex') 
```

在 Python 3 中，

```
import binascii
macbytes = binascii.unhexlify(addr.replace(b':', b'')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-05T18:19:02.653

在 python 版本 3.10.1

代码是

```
import binascii
macbytes = binascii.unhexlify(addr.replace(':', '')) 
```

替换函数/定义应提供字符串-''而不是字节-b''

# javascript - 使用 javascript 更改 div 布局

> ID：12538202
> 
> 赞同：1
> 
> 时间：2012-09-21T21:10:58.827
> 
> 标签：javascript, jquery, css, responsive-design, 960.gs

我是 960 网格和 Adaptive.js 的新手。

我理解这些概念并成功实施了 960 网格。我的问题是我不了解如何实现“自适应”部分。

这是我的代码

```
<div class="container_12">
       <div id="container1" class="grid_3"></div><!--end grid_3 -->
       <div id="container2" class="grid_7"></div><!--end grid_7 -->
       <div id="container3" class="grid_2"></div><!--end grid_2 -->
</div><!--end container> 
```

这适用于 1200.css，但对于 960.css，我希望容器 2 成为 grid_9，容器 3 下降到下一个“行”并成为 grid_12：见这张图片：[自适应示例] [https://docs .google.com/open?id=0BzR0r0y6_XGgMHZQNm9kcDJvNFU](https://docs.google.com/open?id=0BzR0r0y6_XGgMHZQNm9kcDJvNFU)

```
<div class="container_12">
       <div id="container1" class="grid_3"></div><!--end grid_3 -->
       <div id="container2" class="grid_9"></div><!--end grid_9 -->
           <div class="clearfix"></div>
       <div id="container3" class="grid_12"></div><!--end grid_12 -->
</div><!--end container> 
```

我知道自适应可以做风格覆盖，

```
.foobar {
   /* Default styles here. */
 }

html.range_0 .foobar {
   /* Style overrides for: 0px to 760px */
}

html.range_1 .foobar {
  /* Style overrides for: 760px to 980px */
} 
```

但这行不通，对吧？

非常感谢任何指导。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:08:22.360

同一个容器中的网格永远不能超过 12 个。您的第一个示例正在运行，因为您具有以下结构：

```
grid_3
grid_7
grid_2 
```

这等于 12，对吧？

在您的另一个示例中，您有

```
grid_3
grid_9
grid_12 
```

这等于 24。它不能，它必须等于 12，因为您只有 12 列可以使用。网格只是整个容器的百分比。如果你有打击标记：

```
 <div class="container_12">
       <div class="grid_3"></div>
       <div class="grid_3"></div>
       <div class="grid_3"></div>
       <div class="grid_3"></div>
</div><!--end container> 
```

每个 grid_3 是整个容器宽度的 25%。

# iphone - iPhone UIButton 为突出显示的状态提供不同的插入值

> ID：12538206
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:11:26.140
> 
> 标签：iphone, uibutton, textlabel

我希望我的titleLabel 文本在按钮点击时向下移动一点（即我想为突出显示和默认状态提供不同的插入值）。

我有自定义按钮背景图像，按钮在突出显示状态图像中下降，但其上的文本位于同一位置，因此效果不佳，看起来文本与按钮分离。

有没有办法解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T16:51:09.153

最简单的方法是将文本放在按钮的背景图像上。

如果由于某种原因你不能这样做，你可以尝试添加`IBAction`和`Button down`调整`button.titleLabel.frame`。

# java - 制作“宏”命令来运行程序

> ID：12538207
> 
> 赞同：5
> 
> 时间：2012-09-21T21:11:26.363
> 
> 标签：java, command-line

我有一个`Main.java`文件，我想运行传递它的程序 test.txt

我知道在命令行中我可以写 javac`Main.java`

编译后我可以写`java Main test.txt`，这将完成运行文件并传递`test.txt`

如果我希望能够只编写`main test.txt`并触发我的`Main.class`文件运行，那是可能的，如果是这样的话怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:18:09.207

添加别名，例如在 mac 下使用以下行编辑您的 .bash_profile

```
alias main='java main' 
```

不要忘记打开一个新控制台以查看您的别名是否正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:18:43.640

（编辑：根据您的评论，让我扩展以添加更多情况）

如果您的目标是让没有安装 Java 的其他人运行您的程序，并且您不希望他们在运行您的应用程序之前安装 Java 运行时环境，那么您需要一个转换 .class 或 .jar 的程序文件转换为您正在使用的平台的本机可执行文件。如何做到这一点已在其他问题中讨论过，例如：[Compiling a java program into an executable](https://stackoverflow.com/questions/2011664/compiling-a-java-program-into-an-exe)。本质上，您使用 JCG（GNU Compiler for Java）或 Excelsior JET（商业产品）之类的程序将字节码扩展为内置 mini-JRE 的完整本机代码。

如果您的目标是节省打字，有许多策略。其他人建议使用别名命令，这些命令在 linux 上运行良好。

可以随程序一起提供的稍微更便携的选项是 shell 脚本。当然，shell 脚本只能在安装了 shell 脚本解释器的 linux 或其他操作系统上运行。

这是一个示例 shell 脚本。您将其粘贴到文本编辑器中并将其保存为没有扩展名的 main。$1 传递参数自变量 fyi。

```
#!/bin/sh
java Main $1 
```

假设您将 shell 脚本命名为“main”而没有扩展名，您`main test.txt`现在可以调用来执行您的程序。

如果您在 Windows 上，您可能想要创建一个 Windows 快捷方式，并将快捷方式指向“java Main test.text”，必要时使用完整路径（如果尚未设置路径）。当然，这并不能使每次运行时都易于更改参数，您必须编辑快捷方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:16:35.933

取决于您的操作系统。例如，在带有 bash shell 的 Linux 上，您可以设置一个[别名](http://ss64.com/bash/alias.html)来扩展您`main`的`java -cp myjar.jar main`.

Linux 也可以配置为“理解”Java 类苍蝇作为二进制格式，直接参见[此处](http://www.mjmwired.net/kernel/Documentation/java.txt)（Linux 内核文档）。

如果你在 Windows 上，你将不得不等待比我更了解的人的回答。

祝你好运！

# ios - 我添加到我的应用程序的所有 UISteppers 都显示为 2 倍

> ID：12538215
> 
> 赞同：0
> 
> 时间：2012-09-21T21:12:09.947
> 
> 标签：ios, xcode, ios5, ios6, uistepper

最近升级到 XCode 4.5 我有一个屏幕，上面有 2 个 UIStepper 控件已经有一段时间了，突然之间，它们出现的大小是应有的两倍。经过进一步测试，当我将 UIStepper 添加到我的应用程序的任何屏幕时，都会出现同样的问题。它在 StoryBoard 上看起来不错，但在应用程序运行时会跳到 2 倍，无论是在设备上还是在模拟器上。我尝试在 viewWillAppear 中手动设置框架，但没有解决。

我创建了一个新的单视图项目来测试只向应用程序添加一个 UIStepper，它在那里工作得很好。我还尝试将工作的 UIStepper 复制/粘贴到我的真实应用程序中，但它仍然显示为 2 倍。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:18:58.207

我刚刚找到导致问题的代码行：

```
[[UIButton appearance] setBackgroundImage:imgBtn forState:UIControlStateNormal]; 
```

UIStepper 不是 UIButton 的子类，但我猜它在内部使用了两个 UIButton。这一定是 iOS6 的变化，因为这段代码在 iOS5 中没有影响 UISteppers。

能够通过使用其外观属性从所有 UISteppers 清除图像来解决此问题：

```
[[UIStepper appearance] setBackgroundImage:nil forState:UIControlStateNormal]; 
```

# django - 留空时允许 Django 所需的表单字段通过验证吗？

> ID：12538216
> 
> 赞同：0
> 
> 时间：2012-09-21T21:12:13.010
> 
> 标签：django, django-forms, django-views

我有一个帐户设置页面，用户可以在其中填写他的名字/姓氏、用户名、电子邮件地址和电话号码。我还利用`PasswordChangeForm`Django 提供的功能让用户使用相同的单一表单更改密码。

我想让用户可以更改他们的个人详细信息，例如他们的电子邮件地址或电话号码，而无需填写“旧密码”、“新密码”和重复“新密码”。（例如，WordPress 配置文件设置页面以这种方式工作。）

只有当其中一个或多个不为空时，才应验证这三个密码字段。

当其他字段之一出现错误时，在我的`views.py`仍然会引发密码字段的表单错误。

```
@sensitive_post_parameters()
@csrf_protect
@login_required
def account(request):
    if request.method == "POST":
        form1 = AccountDetailsForm(request.POST, instance=request.user)
        form2 = AccountPhoneNumber(request.POST, instance=request.user.get_profile())
        form3 = ChangePasswordForm(user=request.user, data=request.POST)
        if form1.is_valid() and form2.is_valid():
            if form3.has_changed():
                if form3.is_valid():
                    form1.save()
                    form2.save()
                    form3.save()
                    messages.success(request, 'Accont Settings and Password Saved.')
                    return redirect('account')
            else:
                form1.save()
                form2.save()
                messages.success(request, 'Account Settings Saved.')
                return redirect('account')
    else:
        form1 = AccountDetailsForm(instance=request.user)
        form2 = AccountPhoneNumber(instance=request.user.get_profile())
        form3 = ChangePasswordForm(user=request.user)
    return render(request, 'account.html', locals()) 
```

有小费吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T04:37:52.673

看起来我为自己的问题找到了一个无证的解决方案。只需`empty_permitted=True`在定义表单时添加为参数，如下所示：

```
form3 = ChangePasswordForm(user=request.user, data=request.POST, empty_permitted=True) 
```

这立即解决了我在原始问题中提供的代码段中的代码问题。

# documentation - restructuredText 代码指令中支持的语言在哪里记录？

> ID：12538219
> 
> 赞同：1
> 
> 时间：2012-09-21T21:12:25.993
> 
> 标签：documentation, restructuredtext

可能我只是找不到谷歌的神奇词汇，但我只能找到有关如何`code`在 restructuredText 中使用受支持语言的指令的文档。

可以在此处找到支持的语言：http: [//pygments.org/languages/](http://pygments.org/languages/)但我需要知道每种 [语言] 在以下代码段中翻译成什么：

```
.. code:: [language]

 {code here} 
```

例如

```
.. code:: bat

 {code here} 
```

似乎是`windows batch files`。

这是在哪里记录的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T20:21:41.537

我不知道任何地方记录了这一点，但是查看 docutils[代码](http://docutils.svn.sourceforge.net/viewvc/docutils/trunk/docutils/docutils/utils/code_analyzer.py?revision=7515&view=markup)表明 docutils 用于`pygments.lexers.get_lexer_by_name()`查找正确的词法分析器。

此函数采用[pygments lexers](http://pygments.org/docs/lexers/)中给出的词法分析器的**短名称**。

# hibernate - Hibernate 数据库更新不会向下传播到子级

> ID：12538222
> 
> 赞同：0
> 
> 时间：2012-09-21T21:12:38.667
> 
> 标签：hibernate

在我的 struts 操作中，我从数据库中检索对象 X，获取对它包含的一对多集合的引用，向该集合添加一些对象并保存原始对象 X。问题是我没有抛出任何错误，但是一对多集合引用的表没有添加任何新行。

这是我的操作代码...

```
 public String saveSelectedDefinitions()
    {
        WordT wordT = wordDao.get(2);
        Set<DefinitionT> storedDefs = wordT.getDefinitionTs();

        for( int i=0; i<3; i++)
        {
            DefinitionT selectedDef = new DefinitionT();
            selectedDef.setValue("abc");
            selectedDef.setWordT(wordT);
            storedDefs.add(selectedDef);
        }
        wordT.setDefinitionTs(storedDefs);
        wordDao.save(wordT);

        return SUCCESS;
    } 
```

这是我的 WordT 课

```
@Entity
@Table(name = "word_t", schema = "public")
public class WordT implements java.io.Serializable {

    private int id;
    private Set<DefinitionT> definitionTs = new HashSet<DefinitionT>(0);

    public WordT() {
    }

    public WordT(int id) {
        this.id = id;
    }

    public WordT(int id,  Set<DefinitionT> definitionTs) {
        this.id = id;
        this.definitionTs = definitionTs;
    }

    @Id
    @Column(name = "id", unique = true, nullable = false)
    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    @OneToMany(fetch = FetchType.EAGER, mappedBy = "wordT")
    public Set<DefinitionT> getDefinitionTs() {
        return this.definitionTs;
    }

    public void setDefinitionTs(Set<DefinitionT> definitionTs) {
        this.definitionTs = definitionTs;
    }

} 
```

这是我的DefinitionT类

```
 @Entity
    @Table(name = "definition_t", schema = "public")
    public class DefinitionT implements java.io.Serializable {

        private int id;
        private WordT wordT;

        public DefinitionT() {
        }

        public DefinitionT(int id, WordT wordT) {
            this.id = id;
            this.wordT = wordT;
        }

        public DefinitionT(int id, WordT wordT, String value, int typeId,
                Boolean selected) {
            this.id = id;
            this.wordT = wordT;
        }

        @Id
        @Column(name = "id", unique = true, nullable = false)
        public int getId() {
            return this.id;
        }

        public void setId(int id) {
            this.id = id;
        }

        @ManyToOne(fetch = FetchType.EAGER)
        @JoinColumn(name = "word_id", nullable = false)
        public WordT getWordT() {
            return this.wordT;
        }

        public void setWordT(WordT wordT) {
            this.wordT = wordT;
        }

    } 
```

我使用 Hibernate 工具来生成我的 Daos 和 Pojos 如果我使用 DefinitionDao 来持久化一个 definitionT 实例，它会很好地持久化，因此表完整性是可以的。为什么它不保存集合，也不给我任何关于它为什么没有这样做的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:47:50.373

您在 OneToMany 关联上没有级联，因此您可能对单词实体执行的任何操作都不会级联到其定义。此外，由于定义实体是关联的所有者，因此您需要设置其 word 属性以供 Hibernate 持久化关联。

# iphone - iPhone 5 UITableView

> ID：12538224
> 
> 赞同：1
> 
> 时间：2012-09-21T21:12:46.047
> 
> 标签：iphone, ios

我正在尝试为 iPhone 5 的大屏幕空间更新我的应用程序。我有一个表格视图，通过将 Default-568h@2x.png 添加到我的项目中，它已扩展为占据屏幕的整个高度，但底部的几个单元格没有响应模拟器或实际 iPhone 5 中的触摸。我错过了什么吗？就像屏幕底部没有检测到触摸（但只是在我的应用程序中而不是其他应用程序中）。

有什么想法吗？

谢谢，

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:35:37.810

这对我有用

在应用程序 didFinishLaunching 方法中，我添加了这个 -

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; 
```

在任何其他视图控制器中，最好在 - (void)viewDidLoad;

```
UIScreen *screen = [UIScreen mainScreen];
[self.view setFrame:[screen applicationFrame]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:17:25.003

是的，可能是您在 AppDel 类或项目的 appdel 类的 XIB 文件中的窗口框架大小与 iPhone 5 屏幕不同。

并根据iPhone 3.5寸和4寸屏幕更换窗框

# xcode - ios6 facebook 整合 - ios/xcode

> ID：12538226
> 
> 赞同：0
> 
> 时间：2012-09-21T21:12:57.733
> 
> 标签：xcode, facebook, sdk, ios6

可能是一个愚蠢的问题，请不要评判我。只是想确定一下。但是，developers.facecook.com 上的 facebook 教程仍然依赖于新的 ios6 吗？我还可以跟随他们在运行 ios6 的应用程序上实现 facebook 吗？先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-29T15:08:25.583

Facebook SDK 3.1 带有 iOS6 支持和原生 UI 视图。它工作正常。

问候，文斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:55:36.037

据我所知，他们正在使用他们的 3.0 SDK 更好地实现 iOS6。但是我已经实现了 Facebook 的 3.0 SDK 并且效果很好。

# spring-mvc - 如何使用 SpringMVC + Jackson Application 防止 XSS 攻击？

> ID：12538227
> 
> 赞同：4
> 
> 时间：2012-09-21T21:12:59.627
> 
> 标签：spring-mvc, xss, security, jackson

[Cross Site Scripting Cheat Sheet](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)有许多防止 XSS 攻击的规则。我想在使用 Spring MVC + Jackson + JPA + Hibernate Bean Validation 的 Web 应用程序中实现这些建议。作为示例，请考虑以下与我的应用程序中的代码类似的代码。

```
public class MessageJson {
    @NotEmpty // Bean Validation annotation  
    private String title; 

    @NotEmpty
    private String body; 

    // ... etc getters / setters
}

public class BolgPostController 
{ 

     @RequestMapping(value="messages",method=RequestMethod.POST) 
     public void createMessage(@Valid @RequestBody MessageJson message)
     {
           // **Question** How do I check that the message title and body don't contain 
           // nasty javascripts and other junk that should not be there? 

           // Call services to write data to the datababse
     }

     @RequestMapping(value="messages",method=RequestMethod.get) 
     public @ResponseBody List<MessageJson> createMessage()
     {
           // get data from the database 

           // **Question** How do I escape all the data in the list of MessageJson before 
            I send it back to the data. 
     }
} 
```

我可以看到以下实现备忘单规则的方法：

*   **选项 A**在每个控制器方法中手动实现它们。
*   **选项 B**为 Spring MVC 配置一些可以自动为我完成的扩展
*   **选项 C**配置 Jackson 以便它可以为我完成，因为我的大部分输入/输出都通过 Jackson

我正在这三个选项中的任何一个中寻找 SpringMVC 的一些示例配置，并优先选择选项 B 和 C。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T01:12:57.473

在读取 JSON 时，这在属性（如属性）`setTitle()`的设置器中是最容易做到的。`title`

或者，如果您正在考虑转义其他字符（例如，防止嵌入 HTML 标记），请查看此博客条目：[使用 Jackson 转义 JSON 中的 HTML 字符](http://www.cowtowncoder.com/blog/archives/2012/08/entry_476.html)。

# c# - Selenium RC/Nunit/Firefox - 点击浏览器崩溃

> ID：12538229
> 
> 赞同：2
> 
> 时间：2012-09-21T21:13:01.887
> 
> 标签：c#, firefox, selenium, nunit, selenium-rc

我正在使用由**C#、Nunit 2.5.10 和 Selenium RC 2.24.1**组成的测试框架测试一个复杂的 Web 应用程序（不幸的是，不能选择切换到 WebDriver）。

我们最近彻底检查了我们的应用程序 UI/UX，因此我们一直在系统地更新我们的测试以适应新版本。

一切都非常顺利，直到我们遇到一个问题，即我们的浏览器在运行某些测试时似乎随机崩溃。我们使用**Firefox**（Chrome 驱动程序）进行测试，但在我们的测试客户端上安装了从**3.6 到 15.01**的各种版本。**在Windows 7 和 Windows Server 2008 R2**上运行的所有浏览器版本上，该问题似乎始终可以重现。

当浏览器崩溃时，它会留下一个对话框，即使在我们运行清理方法后该对话框仍然存在，该方法会终止所有打开的浏览器会话以准备下一次测试。因为这个对话框一直存在，它使 RC 服务器会话保持活动状态，这会导致下一组测试挂起。

我将测试追溯到导致崩溃的特定操作，它似乎总是一个点击事件，但在应用程序内的各种按钮上，并不总是同一个。这些按钮没有任何共同之处，只是它们都触发了**javascript 回**发。我还能够将一次崩溃跟踪到**由下拉框选择触发的回发事件**。

我们的测试框架相当复杂，我们有数千个测试，所以我们求助于评论崩溃测试只是为了保持套件的其余部分运行。

即使遵循 selenium 测试所采用的确切路径，我们也无法通过手动测试来模拟崩溃。

任何关于可能导致此问题的想法或解决方法的任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T11:24:25.557

我遇到了由 Microsoft Security Essentials 上的实时保护导致的 Selenium 测试间歇性失败的问题。对我来说，取消选中“设置”中的“打开实时保护”| 我运行测试时的实时保护解决了这个问题。尝试在运行测试时禁用您的防病毒软件，看看是否能解决您的问题。显然，Selenium 采取的行动可以解释为病毒活动。

# drupal-7 - Drupal 7 - 所见即所得和图像

> ID：12538230
> 
> 赞同：2
> 
> 时间：2012-09-21T21:13:02.267
> 
> 标签：drupal-7, tinymce, ckeditor, wysiwyg

我需要将图像插入到博客文章的复制文本中。我尝试了不同的所见即所得编辑器和不同的图像插件，但到目前为止，我尝试的每个插件或编辑器都直接`<img>`在文本中添加了一个 -tag。

我的问题是，我想在渲染前端时更改图像的标记。是否有任何插件不添加`<img>`-tag，但是一些短代码或在呈现字段时被翻译成-tag，类似于wordpress？

这样我就可以进入这个过程并更改图像的标记......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:47:53.930

最近我一直在研究这些模块的组合以使用自定义标记：

*   [自定义过滤器](http://drupal.org/project/customfilter)
*   [业务编辑](http://drupal.org/project/bueditor)
*   [降价过滤器](http://drupal.org/project/markdown)
*   [BUEditor 的 Markdown 编辑器](http://drupal.org/project/markdowneditor)

BUEditor 和 Markdown 过滤器将为您提供基于标记的输入，您可以通过 RegEx 和 CustomFilter 进行操作。

CustomFilter 有点令人困惑并且使用起来有点痛苦，所以准备好用拳头敲击你的头几次，但这是完全值得的。[它比定义您自己的自定义过滤器模块](http://definitivedrupal.org/node/90/)的替代方案要容易得多。

# tomcat - javax.net.ssl.SSLPeerUnverifiedException：使用 JMeter 进行负载测试时对等方未通过身份验证

> ID：12538233
> 
> 赞同：3
> 
> 时间：2012-09-21T21:13:14.933
> 
> 标签：tomcat, ssl, tomcat7, jmeter

因此，我设置了 JMeter 来测试启用 SSL 的站点（我从 Geotrust 获得了真正的证书，而不是自签名证书），当我尝试直接从 Tomcat 测试 SSL 连接时遇到了问题。我得到：

```
javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
    at com.sun.net.ssl.internal.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:352)
    at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
    at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:397)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:150)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:575)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.jmeter.protocol.http.sampler.HTTPHC4Impl.sample(HTTPHC4Impl.java:277)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1060)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1049)
    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:442)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:271)
    at java.lang.Thread.run(Thread.java:680) 
```

每当我尝试连接时。这是使用带有 HttpClient4 实现的 JMeter 2.7。这是对我在 Tomcat 7 上托管的一项服务的简单 GET 请求（对任何感兴趣的人来说都是 7.0.27）。

这是我的 SSL 连接器的 Tomcat 配置。请注意，我安装了 APR/native，它在 EC2 上的 Ubuntu 12.04 服务器上运行。

```
<Connector port="8443" maxHttpHeaderSize="8192"
           protocol="HTTP/1.1" 
           URIEncoding="UTF-8" 
           acceptorThreadCount="5"
           maxThreads="400" 
           scheme="https"
           secure="true"
           SSLEnabled="true"
           SSLCipherSuite="ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH"
           SSLHonorCipherOrder="true"
           SSLVerifyClient="optional"
           SSLCertificateFile="/etc/tomcat7/ssl/star.example.com.crt"
           SSLCertificateKeyFile="/etc/tomcat7/ssl/star.example.com.key"
           SSLCertificateChainFile="/etc/tomcat7/ssl/geotrust.crt" /> 
```

同样，这只是 JMeter 的一个问题。我可以使用任何浏览器毫无问题地访问该站点，如果我将 Apache 放在 Tomcat 前面并使用 mod_proxy 或 mod_jk，我没有任何问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T09:05:45.797

在您发表最后一条评论后，我设法重现了与您的主机不匹配的证书和与您的主机匹配的证书的问题。

看来您在 Java 6 中遇到了一个错误。确实，我用 JDK6 重现了问题，但在 JMeter 2.7 的 JDK7 中却没有。

为了记录这一点，我在这里打开了错误：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=53922](https://issues.apache.org/bugzilla/show_bug.cgi?id=53922)

在这里，奥列格给了我关于 JDK7 的提示：

*   [https://issues.apache.org/jira/browse/HTTPCLIENT-1234](https://issues.apache.org/jira/browse/HTTPCLIENT-1234)

进一步分析您的配置，它可能来自您的自定义 tomcat7 配置：

```
SSLCipherSuite="ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH"
SSLHonorCipherOrder="true" 
```

也许您可以尝试进行更改，但无论如何它适用于 JDK7，因此您有自己的解决方案。

非常感谢您提出这个公开可用的 URL 来测试问题。

谢谢

# python - 找不到 Python 模块“cx_Oracle”模块

> ID：12538238
> 
> 赞同：11
> 
> 时间：2012-09-21T21:13:35.350
> 
> 标签：python, oracle, module, cx-oracle

我最近在我的机器上安装了 cx_Oracle 模块，以便连接到远程 Oracle 数据库服务器。（我身边没有 Oracle 客户端）。

*   Python：版本 2.7 x86
*   甲骨文：版本 11.1.X x64
*   Cx_Oracle:Verion-5.1.2-11g.win32-py2.7

然后每次我运行我的脚本时，它都会失败并打印以下消息：

> ImportError：DLL 加载失败：找不到指定的模块。

[我在这里](https://stackoverflow.com/questions/6788937/error-when-importing-cx-oracle-module-python)找到了一个相关的帖子，所以我想知道我是否必须在我身边有一个 Oracle 客户端来调用 python 脚本。

谁能帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-23T21:05:21.540

```
# - This import requires appropriate oraocciXX.dll to be available in PATH (on windows)
#   (Probably LD_LIBRARY_PATH or LD_LIBRARY_PATH64 on POSIX)
#     where XX is the oracle DB version, e.g. oraocci11.dll for Oracle 11g.
# - This dll is part of the Oracle Instant client pkg available here:
#     http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html
# - Also ensure that python, cx_Oracle and Oracle Client are of same arch (32 or 64-bit)
#
import cx_Oracle 
```

您可以找到 arch（32 位或 64 位）：

*   只需在命令行上以交互模式运行 python 即可。
*   cx_Oracle：查看下载文件的名称。
*   甲骨文客户端：
    *   运行作为客户端软件包一部分的 sqlplus
    *   启动任务管理器并查看 sqlplus.exe 旁边是否有“*32”（=32 位）或没有（=64 位）
    *   如果您没有 sqlplus，请使用`dumpbin /headers oraocciXX.dll`
*   如果您使用的是 POSIX，您可能已经知道了。采用`file oraocciXX.so`

最后如果你还是不明白这里真的是给傻瓜的说明：

*   确保您已安装 32 位版本的 python、cx_Oracle 和 Oracle Instant Client。这些也可以是 64 位的，但所有 3 必须相同。不能混合和匹配。链接：
    *   [Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)假设它安装在`C:\ProgFiles\OraClient\11_2`
    *   [cx_Oracle](http://cx-oracle.sourceforge.net/)
    *   [Python](http://www.python.org/getit/)
*   视窗：
    *   `set PATH=%PATH%;C:\ProgFiles\OraClient\11_2`
*   POSIX (Linux/Unix/Solaris...) <-- 未经测试..
    *   `export LD_LIBRARY_PATH=/path/to/your/32bit/oraocciXX.so`
    *   （64 位）`export LD_LIBRARY_PATH64=/path/to/your/64bit/oraocciXX.so`
*   运行`path-to-python/python.exe -c "import cx_Oracle"`以测试您的设置是否正常工作。
    *   如果它打印
    *   什么都没有：那么它就成功了。
    *   `ImportError: DLL load failed: The specified module could not be found`: 然后没有找到 oraocciXX。正确设置环境变量。
    *   `ImportError: DLL load failed: %1 is not a valid Win32 application`：您有 32/64 位不匹配。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T21:19:52.407

是的，您必须在身边安装一个 Oracle 客户端。

来自[cx_ORacle 自述文件](http://cx-oracle.sourceforge.net/README.txt)

“请注意，使用 cx_Oracle 需要安装 Oracle 客户端（或服务器）。如果您不需要完整客户端安装附带的工具，建议安装更容易安装的 Instant Client。 "

**即时客户端的**编辑链接：** [http ://www.oracle.com/technetwork/database/features/instant-client/index-097480.html](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)**

 *** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-25T10:04:25.620

在尝试解决这个问题好几天之后，我发现这`set PATH=%PATH%:<insert Oracle home here>`对我没有用。我必须进入我的 Windows XP 系统属性并将 Oracle 主页附加到“系统变量”下的“路径”变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-11T04:07:55.727

我还不能评论:-(但是对于上面的 uniquephase，您可能想尝试检查 .exe 和 .dlls 的权限以确保它们是可执行的？

所以我需要做的步骤才能让它工作。

从这里解压缩即时客户端。 [http://www.oracle.com/technetwork/topics/winx64soft-089540.html](http://www.oracle.com/technetwork/topics/winx64soft-089540.html)

chmod +x *.exe *.dll（我使用的是 cygwin）。

为了完整起见，我无法使用 cygwin 通过 pip 安装 cx_oracle。

所以我不得不使用标准的dist python（非cygwin）并通过windows安装程序安装cx_oracle。

此外，我必须将 f:/opt/instantclient_12_1（我安装 Oracle 即时客户端的位置）添加到 Windows 路径（通过系统->高级系统属性->环境变量->系统变量）。**

# jquery - Jquery - 验证所有字段都有效的多个字段（分组字段）

> ID：12538239
> 
> 赞同：3
> 
> 时间：2012-09-21T21:13:35.940
> 
> 标签：jquery, validation, jquery-validate, wicket

我一直在努力让多个字段的验证以通用方式工作。我的表单有一个父跨度，它有两个文本字段，当一个或两个文本字段验证失败时，跨度应该用 errorclass 突出显示，在我的情况下，两个文本字段周围有一个红色框，当两个字段都有效时，跨度应该不突出显示. 但实际行为是，如果第一个文本框被赋予一个有效值，则 jquery highlight/unhighlight 函数将删除两个字段周围的 errorClass/redbox，即使第二个字段的必需/正则表达式验证尚未通过。我已经编写了一个自定义方法，并为两个 texboxes 添加了一个额外的验证规则，将 tesboxes 分组，但没有一个有效，我实际上是 jquery 的新手，无法从我现在的位置继续，

示例代码在这里

设置验证：函数（）{

```
 $.validator.addMethod(
        'regex', function(value, element, param) {
            var regex = new RegExp(param);
            return regex.test(value);
        }, 'Regex failed'
    );

   $.validator.addMethod(
        'validateGroupFields', function(value, element) {
        var spanElement = $(element).closest('span');
        var spanChildren = listChildren(spanElement);
        var result = true;
                   spanChildren.each( function(index, value) {
            //alert("index" + index + "value" + value);
                if((this).valid() == true)
                {   
                    $(this).siblings('div.errorbuble1').hide();
                }else {
                    result = false;
                }
            });
            return result;
        }, 'Group validation failed'
    );

function listChildren(element) {
        var children = $(element).find(':input');
        return children;
    };

    $.validator.setDefaults({

        highlight: function(element) {
            $(element).closest('span').attr('class','error');
        },

        unhighlight: function(element) {
            $(element).closest('span').attr('class','');
        },

        onfocusout: function(element, event) {
            if ( !this.checkable(element) || !this.optional(element)) {
                this.element(element);
                $(element).siblings('div.errorbuble1').hide();
            }
        },

        onfocusin: function(element) {
            if( (element.name in this.submitted) && !$(element).valid()){
                    $(element).siblings('div.errorbuble1').show();
            }
        },

        onclick: function(element, event) {
        // click on selects, radiobuttons and checkboxes
            if(element.type === 'radio' || element.type === 'checkbox'){
                this.element(element);
            }
            else if( (element.name in this.submitted)){ //select
                this.element(element);
            }
        },

    });
},

 onValidate : function () {

    $('#form11').validate({
        errorClass: 'newError',

       submithandler: function(form11){
          (form11).submit();
       },

       invalidHandler: function(form, validator) {
        submitted = true;
        },

       rules : {
               'errorIndicator2:textField3':{
                 required:true,
                 regex : { 
                     param : /^[0-9]+$/
                 },
         validateGroupFields: true
             },
             'errorIndicator2:textField4':{
                 required:true,
                 regex : { 
                     param : /^[a-z]+$/
                 },
              validateGroupFields: true
             },
           },
          groups: {
    nameGroup: "errorIndicator2:textField3
             errorIndicator2:textField4"
        },

           showErrors: function(errorMap, errorList) {
            this.defaultShowErrors();
            if (submitted) {
                $('div.errorbuble1').hide();
                submitted = false;
            }
        },

           errorElement: "div",
       wrapper: "div", // a wrapper around the error message

       errorPlacement: function(error, element) {

            offset = element.offset();

            error.addClass('errorbuble1');  // add a class to the wrapper
            error.css('position', 'absolute');
            error.css('left', offset.left + (element.outerWidth()) + 5);
            error.css('top', offset.top + (element.outerHeight())/3);   
            error.insertAfter(element);  
       },

           var submitted = false;
       $(document).ready(function(){

JavaScriptValidator.setUpValidations();
JavaScriptValidator.onValidate();

$("[type=submit]").on({
    click: function(event) {
    JavaScriptValidator.onValidate();
    }
    });
});

 <h3>Error box around two fields:</h3> 
<span wicket:id="errorIndicator2"> 
<table>
    <tbody><tr>
    <td>Number:</td><td><input wicket:id="textField3" name="errorIndicator2:textField3" type="text"></td>
    </tr>
    <tr>
    <td>Alpha</td><td><input wicket:id="textField4" name="errorIndicator2:textField4" type="text"></td>
    </tr>
</tbody></table>
<!-- error popup div gets added here --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:20:42.657

Calling a validating method like element(), $(...).valid(), or form() inside the highlight callback will result in infinite loop, but you can use the validator instance property 'invalid' which maintains a list of invalid fields.

```
$("form").validate({
    highlight: function (element, errorClass, validClass) {
        $(element).closest('div.container').addClass('errorClass');
    },
    unhighlight: function (element, errorClass, validClass) {
        var validator = this, result = true;

        // check for invalid elements here
        $(element).closest('div.container').find(':input').each(function () {
            if (validator.invalid[this.name] !== undefined) {
                result = false;
            }
        });
        if (result) {
            $(element).closest('div.container').removeClass('errorClass')
        }
    }
}); 
```

thanks @Adam set me on the right track [**fiddle here**](http://jsfiddle.net/kYZHY/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T06:24:49.170

在 unhighlight 函数中，您必须在从容器中删除错误类之前检查同一容器中的所有其他字段是否有效。就像是

```
$('input,select', $(element).closest('span')).not(element) 
```

应该选择同一容器中的所有其他表单元素。但是，您*可能会*遇到递归问题（我没有尝试过您的情况，但请参阅 require_from_group 方法的[disssion](https://github.com/jzaefferer/jquery-validation/issues/412)）。

此外，您不应通过 attr 方法设置类。该元素可能具有用于其他目的的其他类，您可以在设置/取消设置错误类时删除这些类。改用 jQuery addClass 和 removeClass 函数：

```
$(element).closest('span').addClass('error');
$(element).closest('span').removeClass('error'); 
```

# ember.js - 序列化日期属性

> ID：12538242
> 
> 赞同：8
> 
> 时间：2012-09-21T21:14:00.280
> 
> 标签：ember.js, ember-data, active-model-serializers

我正在使用 active_model_serializers 和 ember.js。我的一个模型有一个日期属性。在 Rails 中，日期属性以“YYYY-MM-DD”的格式序列化。

问题; 当 ember-data 使用 javascript Date 构造函数反序列化日期时，它假定一个“不正确的”时区。

*不正确不是最好的词，但它是不正确的，因为我希望它默认为当前时区。[DS.Model 日期属性解析日期 (YYYY-MM-DD) 不正确](https://stackoverflow.com/questions/12523373/ds-model-date-attribute-parses-date-yyyy-mm-dd-incorrectly)

我认为 active_model_serializer 应该采用 date 属性并将其转换为 iso8601 格式。

```
 Object.date.to_time_in_current_zone.iso8601 
```

有没有办法告诉 active_model_serializers 如何序列化所有日期对象？还是我应该在 javascript 中修复时区问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T21:32:00.747

这是我当前的解决方案，但我真的觉得应该可以定义日期对象如何全局序列化。

```
class InvoiceSerializer < ActiveModel::Serializer
  attributes :id, :customer_id, :balance

  def attributes
    hash = super
    hash['date'] = object.date.to_time_in_current_zone.iso8601 if object.date
    hash
  end
end 
```

更新

我现在首选的解决方案是对该方法进行修补`ActiveSupport::TimeWithZone.as_json`。

```
#config/initializers/time.rb
module ActiveSupport
  class TimeWithZone
    def as_json(options = nil)
      time.iso8601
    end
  end
end

class InvoiceSerializer < ActiveModel::Serializer
  attributes :id, :customer_id, :balance, :date
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-12T08:57:58.100

在 ActiveSupport (4.2) 的最新版本中，日期采用 iso8601 格式。您不再需要 Monkey Patch。您可以配置输出格式

```
#config/initializers/time.rb
ActiveSupport::JSON::Encoding.use_standard_json_time_format = true # iso8601 format
ActiveSupport::JSON::Encoding.time_precision = 3 # for millisecondes 
```

[查看文档](https://github.com/rails/rails/blob/4-2-stable/activesupport/lib/active_support/time_with_zone.rb#L155)

# asp.net - 谷歌使用 ASP.net 的 HTML 快照

> ID：12538244
> 
> 赞同：2
> 
> 时间：2012-09-21T21:14:06.053
> 
> 标签：asp.net, seo

我有一个网站，它的内容是使用 ajax 在客户端上动态创建的，我想为谷歌爬虫创建一个 HTML 快照。
由于我使用 ASP.net，我的想法是在服务器上创建一个 WebBrowser 控件的实例，每当 google 传递 '_escaped_fragment_' 参数时，然后在服务器上加载我的动态页面，然后将创建的页面返回给 google。
我有两个问题：
1.有没有更好的方法来做到这一点？
2.如果没有更好的方法来做到这一点，我应该如何实现呢？我应该使用 http 处理程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-14T14:40:16.923

这可能已经晚了。您是否尝试过 NHTMLUNIT（它是 HTMLUNIT 的包装器）？

# ios - 如何知道 UITapGestureRecognizer 是否已添加到子视图

> ID：12538245
> 
> 赞同：4
> 
> 时间：2012-09-21T21:14:11.293
> 
> 标签：ios, xcode, uiscrollview, uitapgesturerecognizer

我以编程方式添加子视图。对于每个子视图，我添加了一个手势识别器：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    imageView.frame = CGRectMake((position*1024)+200,0,image.size.width,image.size.height);
    UITapGestureRecognizer *singleFingerTap = [[UITapGestureRecognizer alloc]
                                               initWithTarget:self action:@selector(singleFingerTap:)];
    singleFingerTap.numberOfTapsRequired = 1;
    [imageView addGestureRecognizer:singleFingerTap];
    [singleFingerTap release]; 
```

但是点击没有响应如何验证手势已添加到子视图中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:15:39.060

在您的代码后添加：

```
NSLog(@"imageView.gestureRecognizers: %@", [imageView.gestureRecognizers description]); 
```

如果您正确添加了gestureRecognizers，它会将每个人的描述打印到控制台。如果不是，它将在控制台中显示 (NULL) 或空数组。

* * *

您还可以设置手势识别器委托：

```
[singleFingerTap setDelegate:self]; 
```

然后添加委托方法并设置断点以确保它被调用：

```
- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer {
    NSLog(@"gestureRecognizerShouldBegin: called");
    return YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    NSLog(@"shouldReceiveTouch: called");
    return YES;
} 
```

# javascript - 为什么javascript变量未定义？（第二次……）

> ID：12538249
> 
> 赞同：0
> 
> 时间：2012-09-21T21:14:37.143
> 
> 标签：javascript, jquery

我正在使用更多使用 jQuery 的修改后的代码重新发布这个问题。

这是定义对象的 HTML 代码：

```
<LEGEND><b>Select Study Sample</b></LEGEND>
<p>
<P CLASS=select_header>Study - Box - Well - Lab ID<br>
<SELECT multiple size=20 NAME="stylabid" ID="stylabid" onchange=show_stylabid() onclick=clear_fetch() STYLE="width: 115px">
<?php 
  $i=0;
  while ($i < $numstylabids) {
    $styarr = pg_fetch_row($stylabidresult);
    echo "<option value=$styarr[0]>$styarr[1]\n";
    $i++;           
  }
  ?>
</select> 
```

和

```
<LEGEND><b>Select Project Sample</b></LEGEND>
<p>
<P CLASS=select_header>Project - Box - Well - Lab ID<br>
<SELECT multiple size=20 NAME="pjtlabid" ID="pjtlabid" onchange=show_pjtlabid() onclick=clear_fetch() STYLE="width: 115px">
<?php 
  $j=0;
  while ($j < $numpjtlabids) {
    $pjtarr = pg_fetch_row($pjtlabidresult);
    echo "<option value=$pjtarr[0]>$pjtarr[1]\n";
    $j++;           
  }
  ?>
</select> 
```

现在，这是javascript；我只是想获取所选对象的值，它可以是研究或项目。我稍后使用它从数据库中检索数据：

```
function fetchgenotype() {
    var ms, mndx, ss, sndex = 0;

    ms = $("#marker")[0].selectedIndex;    

    if (Study_selected) {
      ss = $("#stylabid")[0].selectedIndex;
      sndx = $("#stylabid").val(ss);
    } else
      ss = $("#pjtlabid")[0].selectedIndex;
      sndx = $("#pjtlabid").val(ss);
    }    

    // for debugging...    
 alert('ss='+ss+', sndx='+sndx); 
```

这段代码死了就行了`sndx = ...` 非常感谢任何帮助！

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:17:25.247

我认为您有语法错误

sndx 应该是 sndex .. 或者相反

```
var ms, mndx, ss, sndex = 0; // <--

$("#pjtlabid").val(ss) // <-- setter method 
```

.val(value) 也是一个 setter 方法，所以 sndx 是未定义的，因为它从未被定义为任何值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:30:01.743

目前我不知道 Study_selected 的 $("#marker") 是什么。

假设到目前为止一切正常，请将函数更改为：

```
if (Study_selected) {
      sndx = $("#stylabid").val();
    } else
      sndx = $("#pjtlabid").val();
    } 
```

`val()`不带参数使用时返回表单元素的值，否则将设置该值并返回一个 jQuery 对象。

无需检索 selectedIndex，您可以直接访问 select-element 的值（它将是当前选择的选项的值）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:17:31.843

这是一个错字：

```
var ms, mndx, ss, sndex = 0; 
```

应该

```
var ms, mndx, ss, sndx = 0; 
```

# android - 拉伸和收缩一行而不是一列

> ID：12538251
> 
> 赞同：0
> 
> 时间：2012-09-21T21:14:40.030
> 
> 标签：android, android-layout, layout

我正在寻找一个类似于 TableLayout 工作方式的视图，它可以自动收缩和拉伸列，除了我想要拉伸和收缩一行。

基本上我想在屏幕顶部有一个固定高度按钮 (dp) 按钮，在屏幕底部有一个固定高度按钮 (dp)，在中间有一个 ImageView。我希望 ImageView 根据需要拉伸或收缩以容纳两个固定高度的按钮。

使用orientation=vertical 的TableLayout 似乎并不能解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:52:39.990

你可以使用相对布局来做你需要的事情。将两个按钮分别连接到顶部和底部。然后对于图像，您可以将其顶部与顶部按钮的底部对齐，并将其底部与底部按钮的顶部对齐。

# ios - UITableView 在滚动表时使用 NSTimer 重新加载数据

> ID：12538252
> 
> 赞同：0
> 
> 时间：2012-09-21T21:14:45.863
> 
> 标签：ios, uitableview, scroll, reloading

我有一个简单`UITableView`的包含几行。每行包含一个倒数计时器，由 表示`UITextLabel`。选择行时，倒计时开始。倒计时射击日期由 设定`localNotification`。开火日期的时间显示在 中`UITextLabel`。

刷新表以`viewWillApper`下面一行的方法开始：

```
[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(refreshTable) userInfo:nil repeats:YES]; 
```

`refreshTable`方法包含一行：

```
[tableView reloadData] 
```

一切都按预期工作，但是当我开始滚动`tableView`（不松开手指）倒计时计时器没有更新。

我已经设置了一个 log inside`refreshTable`方法来查看当我滚动表格时是否调用了这个方法。结果是否定的。`refreshTable`当我滚动时不调用方法`tableView`。

谁能告诉我如何解决这个问题？

我检查了默认的时钟应用程序（苹果）。在第一个选项卡（世界时钟）中，表视图表示。每一行里面都有一个红色指针的时钟。在滚动表格时，手正在更新，这意味着在滚动时更新表格视图是可能的......不知何故

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:37:07.960

你看，UITableView 类里面有一个 UIScrollView。您可以使用`UIScrollViewDelegate`强制重新加载页面。这是文档：[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)。看着`– scrollViewDidScroll:`

遍历 Table 的子视图，直到找到 Scroll。如果您发布一些代码，也许我可以提供更多帮助

# git - 如何获取两个 git 存储库之间的变更集列表

> ID：12538257
> 
> 赞同：0
> 
> 时间：2012-09-21T21:14:59.953
> 
> 标签：git, version-control, mercurial

我想查看 git 存储库之间的不同变更集。回购是相关的，但两者都不是另一个的直接来源。在 Mercurial 中，我只会做“hgcoming *other-repo* ”和“hg incoming *other-repo* ”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:23:37.637

我假设您的意思是回购中两个分支之间的不同变更集。在 git 中，您将有几个额外的步骤。进入其中一个存储库并执行以下操作

```
git remote add other OTHER_REPO
git fetch other 
```

现在，您可以根据要走的方向使用以下方法之一查看差异

```
# Similar to hg outgoing (changes which in your branch not in the remote) 
git log other/BRANCH_NAME..BRANCH_NAME

# Similar to hg incoming (changes in the remote not in your branch)
git log BRANCH_NAME..other/BRANCH_NAME 
```

# opengl - OpenGL 建模

> ID：12538261
> 
> 赞同：0
> 
> 时间：2012-09-21T21:15:23.353
> 
> 标签：opengl, modeling, collada, multitexturing

我正在尝试创建允许我从 Collada 格式转换为我自己的自定义格式的程序（这部分很容易并且可以控制）。我想做的是以下。

1.) 给定从 Collada 文件解析的确切数据，找到一种方法来绘制模型。a.) 一个简单的立方体将生成 8 个顶点、36 个法线和 12 个纹理坐标，这是查找但我能找到的 OpenGL 绘制它的唯一方法需要我复制顶点和法线的数据以匹配法线的数量.

2.) 找到实现多重纹理的方法。a.) 我已经找到了大量关于此的教程，但似乎我找不到实际使用它的方法。这些功能似乎没有内置到我的 openGL 版本中（我已经在 2 台计算机上尝试过），并且没有人记录我可能丢失的任何必需的 dll。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:33:21.037

> 一个简单的立方体将生成 8 个顶点、36 个法线和 12 个纹理坐标，

不，一个简单的立方体有 8个**位置**，但一个顶点不仅仅是一个位置，还包含所有其他属性。所以实际上没有发生顶点重复，但你是对的，你会在属性中有一些冗余。

### 更新解释，为什么会这样

顶点是其属性的整个向量。换一个，你有一个完全不同的顶点。

假设您有一个顶点着色器，它采用一组纯抽象属性和一个纹理坐标

```
#version 150

attribute vec2 foobar;
attribute vec4 fnord;
attribute vec2 texcoord; 
```

这个顶点着色器根据这些属性计算一些位置，比如说

```
void main() {
    gl_Position = vec3(fnord.xw, dot(foobar,texcoord));
} 
```

如您所见，顶点位置现在直接取决于所有属性。但当然其他变化*也*可以。

为了节省冗余计算，GPU 维护从*顶点属性输入*到*转换阶段/顶点着色器输出*的缓存映射。如果通过索引间接访问顶点，那么缓存实际上使用索引作为键。

所以请记住：如果与顶点相关的任何内容发生更改，则您会更改整个顶点。而在现代 OpenGL 中，顶点的属性，甚至位置，最终可能会做非常不同的事情。

> 这些功能似乎没有内置到我的 openGL 版本中

哦，他们可能是你司机的一部分，好吧。您可能只是没有将它们*加载*到您的程序中。OpenGL DLL 仅涵盖非常基本的内容。对于其他所有内容，您必须动态加载函数指针。只需为此使用像 GLEW 这样的漂亮包装器（可在[http://glew.sourceforge.net](http://glew.sourceforge.net)获得）。

# json - 如何让 jquery fullcalendar 将附加参数传递给我的 json feed 脚本

> ID：12538264
> 
> 赞同：3
> 
> 时间：2012-09-21T21:15:28.640
> 
> 标签：json, fullcalendar

我的代码如下

```
jQuery('#calendar').fullCalendar({
    weekMode: 'liquid',
    events: themeforce.events,
    eventRender: function (event, element) {
        element.find('span.fc-event-title').html(element.find('span.fc-event-title').text());           
    }
}); 
```

哪里`themeforce.events`是一个包含 json feed php 文件的编码 url 的变量 - 一切正常。

我尝试替换事件：themeforce.events，用

```
events: {
    url: themeforce.events,
    type: 'POST',
    data: {
        custom_param1: 'something',
        custom_param2: 'somethingelse'
    }, 
```

但是现在日历无法加载。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-26T06:12:22.330

我想要一个 post ajax 请求的开始和结束时间，我花了一些时间来解决它。

这可能会帮助您：

```
events: function(start, end, timezone, callback) {
$.ajax({
    url: url,
    type: 'POST',
    dataType: 'json',
    data: {
        start: start.format(),
        end: end.format(),
        custom_param1: 'value 1',
        custom_param2: 'value 2',
    },
    error: function () {
        alert('there was an error while fetching events!');
    },
    success: function(doc) {
        var events = [];

        $.each(doc,function (index, e) {
            events.push(e);
        });

        callback(events);
    }
});
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-14T10:29:51.457

您应该按照文档中的说明使用 extraParams：[https ://fullcalendar.io/docs/events-json-feed](https://fullcalendar.io/docs/events-json-feed)

```
var calendar = new Calendar(calendarEl, {

eventSources: [

// your event source
{
  url: '/myfeed.php',
  method: 'POST',
  extraParams: {
    custom_param1: 'something',
    custom_param2: 'somethingelse'
  },
  failure: function() {
    alert('there was an error while fetching events!');
  },
  color: 'yellow',   // a non-ajax option
  textColor: 'black' // a non-ajax option
}

// any other sources...

]

}); 
```

还要确保您的提要的网址返回原始 json 数据数组！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-23T08:13:19.710

只需在“事件”中放入“数据”而不是“extraParams”

```
 events: {
    url: 'service.php',
    method: 'POST',
    data: {
        custom_param1: 'something',
        custom_param2: 'somethingelse'
    },
    failure: function() {
        alert('there was an error while fetching events!');
    },
  } 
```

# android - Android maven - manifestmerger 属性

> ID：12538272
> 
> 赞同：5
> 
> 时间：2012-09-21T21:15:48.547
> 
> 标签：android, maven

在 ADT 20.0.0（从[此处](http://developer.android.com/tools/sdk/eclipse-adt.html)链接）中`manifestmerger`添加了属性（将库项目的清单包含到应用程序项目中）。是否可以在 Maven 构建中启用此属性？如果是，如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T15:48:48.540

要从[添加该功能的拉取请求中](https://github.com/jayway/maven-android-plugin/pull/135)提供准确的答案：

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <configuration>
        <!-- add the following mergeManifests option -->
        <mergeManifests>true</mergeManifests>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:16:04.423

该功能已添加到 android-maven-plugin 中，详细信息可从链接获得：[https ://github.com/jayway/maven-android-plugin/pull/135](https://github.com/jayway/maven-android-plugin/pull/135)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T06:24:58.787

包含来自 APKLIB 的清单时，上述答案有效。

但是 APKLIB 是 AAR 的前身，AAR 是当前 Android 的库打包标准。

要合并来自 AAR 的清单，请使用以下命令：

```
<plugin>
    <groupId>com.simpligility.maven.plugins</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <configuration>
        <manifestMergeLibraries>true</manifestMergeLibraries>
    </configuration>
</plugin> 
```

见[http://simpligility.github.io/android-maven-plugin/manifest-merger-mojo.html](http://simpligility.github.io/android-maven-plugin/manifest-merger-mojo.html)

# vba - excel vba将非连续范围选择移动到数组

> ID：12538277
> 
> 赞同：1
> 
> 时间：2012-09-21T21:16:25.087
> 
> 标签：vba, excel

在用户选择两个不连续的列范围的情况下，我写了以下内容：

```
Dim count long
Dim points variant
Dim i long

Set user_range = ActiveWindow.RangeSelection

count = user_range.count / 2

ReDim points(1 To count, 1 To 2)

For i = 1 To count

    MsgBox "value is" & user_range.Areas.Item(1).Value(i,1)

    points(i, 1) = user_range.Areas.Item(1).Value(i,1)

    points(i, 2) = user_range.Areas.Item(2).Value(i,1)

Next i 
```

但是当我尝试这个时，我得到一个对象错误。我索引值错误吗？

这应该有效吗？有没有更简单的方法来做到这一点？

任何帮助是极大的赞赏！

谢谢，

拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:30:55.310

恐怕您的代码无法编译。首先，您需要正确声明变量。您还应该使用[Option Explicit](https://stackoverflow.com/q/2454552/1490783)。

```
Option Explicit

Dim count As Long
Dim points As Variant
Dim i As Long
Dim user_range As Range 
```

count 和 ReDim 行都可以，但您假设这两个选择的大小相同。会一直这样吗？

然后我不确定你想要做什么，但我猜你只是想将值保存`user_range`到`points`.

您需要对它们进行一些不同的处理：

```
points(i, 1) = user_range.Areas(1).Cells(i, 1).Value    'Selection 1
points(i, 2) = user_range.Areas(2).Cells(i, 1).Value    'Selection 2 
```

# algorithm - 如何在没有静态计数器的情况下模拟随机选择第 n 个访客

> ID：12538280
> 
> 赞同：0
> 
> 时间：2012-09-21T21:16:40.250
> 
> 标签：algorithm, random, selection

我需要创建一个脚本，提示每第 4 或第 9 个用户作为一天内访问的用户的样本，但我没有办法存储全局计数器（文件系统、内存等），是否有算法或函数可以近似选择第 n 个用户吗？

甚至概率抽样也可以……说 25%

近似的，最好是速度比准确性更快的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:24:38.190

另一种方法可能是概率抽样。

如果要对每个第 K 个用户进行采样（对于某些特定的 k），则需要在范围内生成一个随机整数`[0,K)`- 当且仅当生成的数字为 0（或实际上是任何其他单个数字）时才对该用户进行采样。

抽样用户的*预期*数量将与您对每 k 个用户抽样的数量相同。

# mysql - 如何将多个列从 MySQL 导出到文本文件

> ID：12538281
> 
> 赞同：1
> 
> 时间：2012-09-21T21:16:41.910
> 
> 标签：mysql

我知道如何将多个列导出到 csv 文件。使用：

```
SELECT `col1`, `col2`
FROM table
INTO OUTFILE 'C:/filename.csv'
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'; 
```

当我使用 excel 打开文件时，一切都很好，每条记录都在一行中。但是，当我使用记事本打开它时，我发现所有记录都彼此相邻打印，没有行分隔符。如何使查询的输出打印为每行一条记录，每列用逗号分隔？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:19:50.420

`\n`linux下是换行，但是windows使用`\r\n`

因此，此代码可以满足您的要求

```
SELECT `col1`, `col2`
FROM table
INTO OUTFILE 'C:/filename.csv'
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\r\n'; 
```

许多其他工具，如 Excel、Notepad++ 或 WordPad 都可以使用`\n`和读取文件`\r\n`，因此它们不受此更改的影响，并且可以使用您的原始代码和此修改正确显示文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:27:33.467

'\n' 在 Unix/Linux 中用作行分隔符，Windows 的行分隔符应为 '\r\n'。

# html - JQuery 内联文本移位

> ID：12538283
> 
> 赞同：0
> 
> 时间：2012-09-21T21:16:52.200
> 
> 标签：html, submit, css

我有一个提交按钮，点击后，jquery 检查是否已选择任何内容。如果不是，那么它会在错误消息上显示（）。这是html：

```
<p id="error_message" style="display:inline">dfd</p><input type="submit" class="button" name="Submit" value="Submit" /> 
```

一开始消息是隐藏的，但如果用户在没有选择选项的情况下单击提交，则会显示该消息。问题是，我的文本上的显示会改变我的提交按钮。这是没有消息的提交的样子： ![未移位](../Images/09bf58da0a0d6a309db8cfcf398303f1.png)

这是显示消息后的样子： ![移位](../Images/d4c4ca33e260420297070b7752db6d1d.png)

如您所见，提交按钮向右移动。如果我希望错误消息和提交都出现在同一行，我必须显示内联，但是如何防止任何移动？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:20:30.250

如果您将按钮设置为`float:right;`它保持在其容器的右端，直到来自左 div 的内容强制它下降到下一行。

所以html：

```
<div class='container'>
    <p id='error_message' style='display:inline;float:left;' >dfd </p>
    <input type='submit' style='float:right;' name='submit'>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:19:45.743

将按钮的位置设置为 absolute ，或将错误消息的宽度设置为固定值

# c++ - 销毁directx设备和交换链

> ID：12538287
> 
> 赞同：1
> 
> 时间：2012-09-21T21:17:09.347
> 
> 标签：c++, directx, directx-11

我遇到了一个奇怪的问题，我认为`D3D11CreateDeviceAndSwapChain`我可以创建设备和交换链，但是当应用程序退出并`->destroy`在交换链、设备和设备上下文上被调用时，线程仍在运行。注释掉这一行，应用程序将按预期终止。

```
featureLevel = D3D_FEATURE_LEVEL_11_0;
result = D3D11CreateDeviceAndSwapChain(NULL, D3D_DRIVER_TYPE_HARDWARE, NULL, 0, &featureLevel, 1, D3D11_SDK_VERSION, &swapChainDesc, &m_swapChain, &m_device, NULL, &m_deviceContext);

if(FAILED(result))
{
#ifdef _DEBUG
    log(logDEBUG) << "Error at D3D11CreateDeviceAndSwapChain";
#endif
    return false;
}
return true; 
```

和破坏：

```
if(m_swapChain)
{
    m_swapChain->SetFullscreenState(false, NULL);
}

if(m_device)
{
    m_device->Release();
}

if(m_deviceContext)
{
    m_deviceContext->Release();
}

if(m_swapChain)
{
    m_swapChain->Release();
} 
```

我相当有信心问题来自于此，但我不是 100% 确定。单步执行代码，我看到每个版本都被正确调用。（如果第一个块被注释掉，应用程序将正确关闭。）

感谢您提供有关此问题的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:50:02.143

我不完全确定我做了什么，但我设法解决了这个问题。我正在清理不同部分的代码，突然间一切都开始正常关闭。

我感觉我没有正确设置或关闭窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:11:00.017

因为交换链持有对设备上下文的引用，而设备上下文持有对设备的引用，所以问题可能与调用的顺序有关。尝试先释放交换链，然后 - 设备上下文，然后是设备本身。

# java - Spring MVC 3 - UDP Server+HTTP应用的设计

> ID：12538298
> 
> 赞同：0
> 
> 时间：2012-09-21T21:18:03.887
> 
> 标签：java, multithreading, spring, udp

我正在设计一个使用 UDP 接收数据报包、处理它们并允许管理员查看解析数据的应用程序。

此刻，我创建了一个用于接收 UDP 数据包的线程。线程存储在 ServletContext 中，在 ServletContextListener 的 contextInitialized() 上启动。我的下一步应该是解析它，但只要我想使用 Spring 的服务（@Service），我不知道如何在接收者的线程中注入对指定服务的引用。

我知道我可以在 Service 中获取 ServletContext 的引用，并在接收者的线程中将引用设置为创建的 Service，但是这样做是否正确？（有没有更好的办法？）

谢谢指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:21:05.890

我会设计一个类似服务的类来启动和管理侦听 UDP 数据包的线程。

然后，该服务将从您的 Spring 上下文启动，您可以使用[`ContextLoaderListener`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html).

通过这种方式，您可以以与 Web 应用程序无关的方式开发 UDP 层 - 并可以在非 Web 环境中重用它。

在侦听器中自己启动线程并将其粘贴在 ServletContext 中听起来像是一个混合问题。

# jquery - Jquery 与表单和表格一起使用，包括复制

> ID：12538300
> 
> 赞同：1
> 
> 时间：2012-09-21T21:18:14.073
> 
> 标签：jquery, jquery-autocomplete, jquery-ui-datepicker, dynamic-forms

所以我一直在做这个并且尝试了很多不同的东西，我希望我能得到一些帮助。我有以下要使用的表格。我了解所有后端访问组件等，但我似乎无法让表单运行，包括时间选择器、日期选择器、自动完成和复制。有人可以在我的代码中找到错误吗？我已经把头撞在墙上有一段时间了。复制功能似乎也坏了。有任何想法吗？

谢谢！乔恩

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>

<script>
$(document).ready(function($) {
var drugs = [
"Atenolol (Tenormin)",
"Atropine",
"Atropine Ophthalmic Solution",
"Azathioprine (Imuran)",
"Azithromycin (Zithromax)",
"Benazepril (Fortekor)",
"Betaxolol and Levobetaxolol",
"Bethanechol (Urecholine, etc.)",
"Bisacodyl (Dulcolax)",
"Bismuth Subsalicylate (Pepto-Bismol)",
"Brinzolamide (Azopt)",
"Bromides",
"Buprenorphine (Buprenex)",
"Burow's Solution",
"Buspirone HCl (BuSpar)",
"Butorphanol Tartrate (Torbugesic, Torbutrol)",
"Calcitonin"];

    $(".autocomp").autocomplete({source:drugs});
        $( ".datepicker_txt" ).datepicker();
        $(".timePick_txt").timepicker({'step' : 15,
                                   'scrollDefaultNow': true });
    $("#btnAdd").click(function(){
        var $table =  $(document.getElementById('drug_treatment_table'));
        var $tr = $(document.getElementById('drug_treatment_table')).find('tr:last').clone(true);
        $tr.find('input').attr('id',function(){
            var parts = this.id.match(/(\D+)(\d+)$/);
            return parts[1]+ ++parts[2];
        }).attr('name',function(){
            var parts = this.name.match(/(\D+)(\d+)$/);
            return parts[1]+ ++parts[2];
        });
        $tr.find('select').attr('id',function(){
            var parts = this.id.match(/(\D+)(\d+)$/);
            return parts[1]+ ++parts[2];
        }).attr('name',function(){
            var parts = this.name.match(/(\D+)(\d+)$/);
            return parts[1]+ ++parts[2];
        });
        $tr.find(".datepicker_txt").datepicker();
        $tr.find(".autocomp").autocomplete({source:drugs});
        $tr.find(".timePick_txt").timepicker();
        $table.find("tr:last").after($tr);
        $(document.getElementById("numEntries")).attr('value',$table.rows.length-1);
    });
    $("#btnDel").click(function($){
        var $table = $(document.getElementById('drug_treatment_table'));
        var rowsNum = table.rows.length;
        if(rowsNum>2){
            $table.remove($table.find('tr:last'));
        }
    });
});
</script>
<link href="style/jquery-ui-1.8.23.custom.css" rel="stylesheet" type="text/css" />

</head>

<body>
<form id="form1" name="form1" method="post" action="">
  <input type="button" name="btnAdd" id="btnAdd" value="Increase Drug Treatments"/>
<input type="button" name="btnDel" id="btnDel" value="Decrease Drug Treatments"/>
</form>
<form id="add_drugs" name="add_drugs" method="post" action="">
    <input type="hidden" name="numEntries" id="numEntries" value="1" />
    <table width="100%" border="1" name="drug_treatment_table" id="drug_treatment_table">
          <tr>
            <th width="3%" scope="col">#</th>
            <th width="14%" scope="col">Drug</th>
            <th width="32%" scope="col">Special Directions </th>
            <th width="18%" scope="col">Quantity</th>
            <th width="12%" scope="col">How Often</th>
            <th width="8%" scope="col">Starting</th>
            <th width="13%" scope="col">Finishing</th>
          </tr>
          <tr>
            <td>1</td>
            <td>
            <input type="text" name="drug_name_1" id="drug_name_1" class="autocomp"/></td>
            <td>
            <input name="special_driections_1" type="text" id="special_driections_1" size="60" /></td>
            <td nowrap="nowrap">
            <input type="text" name="quant_1" id="quant_1" />
            <select name="quant_unit_1" id="quant_unit_1">
              <option>cc</option>
              <option>mg</option>
              <option>g</option>
            </select></td>
            <td nowrap="true"><select name="how_often_drug_1" id="how_often_drug">
              <option>Q1hr</option>
              <option>Q2hr</option>
              <option>Q3hr</option>
              <option>QID</option>
              <option>TID</option>
              <option>BID</option>
              <option selected="selected">SID</option>
              <option>Q2 Day</option>
              <option>Q3 Day</option>
              <option>Q4 Day</option>
              <option>Q5 Day</option>
              <option>Q6 Day</option>
              <option>Q1 Week</option>
              <option>Q2 Week</option>
            </select><input type="text" id="start_time_1" class="timePick_txt" /></td>
            <td><input type="text" id="datepicker_start_drug_1" name="datepicker_start_drug_1" class="datepicker_txt"></td>
            <td><input type="text" id="datepicker_end_drug_1" name="datepicker_end_drug_1" class="datepicker_txt"></td>
          </tr>
        </table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:17:25.320

在玩了一段时间的代码之后，我想我能够产生你想要的结果。只是对您的代码的一些评论。

首先，您可以从有关选择器如何在 jQuery 中工作的复习中受益。当您可以简单地使用它们的选择器时，您正在使用 javascript 来抓取元素并将它们转换为 jQuery 对象。

其次，请务必校对您的代码。有许多错别字和拼写错误会在将来引起问题。我试图修复尽可能多的问题。

这是小提琴的链接：http: [//jsfiddle.net/jlange88/5594c/19/](http://jsfiddle.net/jlange88/5594c/19/)

一些警告：

我只是创建了一个长字符串来表示一个新的表格行，您应该设计一些方法来以编程方式执行此操作。此外，肯定有更好的方法将通用 id 应用到您的新表，我只是不想现在实现它:)。

# sql - 从关系中的两个表中提取数据，但一个表中的数据只出现一次

> ID：12538301
> 
> 赞同：0
> 
> 时间：2012-09-21T21:18:13.603
> 
> 标签：sql

我有两个表需要从“表 A”和“表 B”中提取数据。“Table A”和“Table B”之间存在 1:M 关系，其中 A.IDNumber 作为“Table B”中的外键。

我想要做的是从表 A 中提取一次值，并从“表 B”中提取相应的值，而不重复“表 A”数据。

我的查询会是什么样子？为了提供帮助，假设我想要“表 A”中的以下值：A.IDNumber、A.Amount 和“表 B”值 B.IDNumber、B.Address、B.State、B.City、B.State， B.邮编。

感谢您对此的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:37:11.620

您可以使用下面的查询。这是一个有效的[SQL Fiddle](http://sqlfiddle.com/#!3/fadd9/3/0)

```
SELECT CASE WHEN RN=1 THEN IDNumber END IDNumber,
       CASE WHEN RN=1 THEN Amount END Amount,
       Address, City, State, Zip
FROM
(
  SELECT A.IDNumber, A.Amount,
         B.Address, B.City, B.STATE, B.Zip,
         RN = Row_number() over (partition BY A.IDNumber
                               ORDER BY B.IDNumber)
  FROM tableA A
  LEFT JOIN tableB B ON A.IDNumber = B.IDNumber
) X
ORDER BY IDNumber, RN 
```

它给出了这个输出

```
IDNumber 金额 ADDRESS CITY STATE ZIP
1 200.1 1 公共道路 Gotham AX 19281
(null) (null) 秘密蝙蝠洞 Gotham AX 19281
(null) (null) 海外隐匿处未指定 ?? 不适用
2 312.45 John Woo Lane Trespass TX 12345
(null) (null) 地址 City State Sq-123

```

当给出这个样本表时

```
CREATE TABLE TableA(
  IDNumber int, Amount money)
CREATE TABLE TableB(
  IDNumber int,
  Address varchar(max),
  City varchar(max),
  State varchar(max),
  Zip varchar(max))
INSERT TableA SELECT
  1,200.10 union all select
  2,312.45
INSERT TableB SELECT
  1, '1 Public Road', 'Gotham', 'AX', '19281' union all select
  1, 'Secret Batcave', 'Gotham', 'AX', '19281' union all select
  1, 'Overseas Hideaway', 'Unspecified', '??', 'n/a' union all select
  2, 'John Woo Lane', 'Trespass', 'TX', '12345' union all select
  2, 'Address', 'City', 'State', 'Sq-123' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:27:54.427

您的意思是，您只希望表 A 中的字段位于 B 的第一行结果中。

您执行此操作的方式取决于数据库。这是一种适用于大多数数据库的方法：

```
with b as (
     select b.*,
            row_number() over (partition by b.a_idnumber order by b.idnumber) as seqnum
     from tableb
    )
select (case when b.seqnum = 1 then a.idnumber end) as IdNumber,
       (case when b.seqnum = 1 then a.amount end) as Amount,
       b.*
from tablea a join
     b
     on a.idnumber = b.a_idnumber
order by a.idnumber, b.seqnum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:26:33.833

所以你不要重复值，在你的查询中使用 DISTINCT

```
select **DISTINCT** A.IDNumber, A.Amount, and from 'TableB' values B.IDNumber, B.Address, B.State, B.City, B.State, B.Zip from TableA A, TableB B where A.IDNumber = B.IDNumber 
```

# heroku - 在 Heroku 上设置自定义域

> ID：12538304
> 
> 赞同：2
> 
> 时间：2012-09-21T21:18:22.370
> 
> 标签：heroku

我在 Heroku 上安装了一个小应用程序（使用 clojureScriptOne），当我尝试在我的 DNS 提供商控制面板上将名称服务器设置为指向“myapp. herokuapp.com”我收到以下错误：

您尝试添加的名称服务器未在 .ORG 注册表中注册为有效的名称服务器。请检查名称服务器，然后重试。

这是否意味着 Heroku 不能使用 .org 域？我查看了文档，除了 .com 域之外没有任何参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:22:59.537

“myapp.herokuapp.com”不是您的域名服务器。您需要向注册商注册您的“example.org”域，并将名称服务器委托给 DNS 提供商，例如 DynDNS 或 AWS Route 53。

然后你可以创建一个从“www.example.org”到“myapp.herokuapp.com”的CNAME。

# php - 特定任务的 PHP 和 HTML 表单

> ID：12538307
> 
> 赞同：-4
> 
> 时间：2012-09-21T21:18:25.910
> 
> 标签：php, html, forms

伙计们，这里是我的 html 表单代码。我想要的是当我单击提交按钮时。php代码应该检查哪些复选框被选中，而不是每个复选框它应该执行特定的任务。就像如果选中医院、企业和房地产复选框，那么它应该执行特定任务，例如 echo'hospitals'、echo'businesses' 和 echo''real estate' 提前致谢。

```
 <form action="Restaurant.php"  method="post" enctype="multipart/form-data">
       <label for="file">Filename:</label>
 <input type="file" name="file" id="file" />
           <input type="checkbox" name="Templates" value="Restaurant"/>

  <input type="checkbox" name="Templates1" value="Hospitals" />Hospitals

 <input type="checkbox" name="Templates2" value="Businesses" />Businesses

 <input type="checkbox" name="Templates3" value="RealEstate" />Real Estate

       <input type="checkbox" name="Templates4" value="CarDealership" />Car Dealership

    <input type="checkbox" name="Templates5" value="Sports" />Sports

 <input type="checkbox" name="Templates6" value="Hotels" />Hotels

 <input type="checkbox" name="Templates7"value="Home" />Home

  <input type="checkbox" name="Templates8" value="Advertisement" />Advertisement

   <br />
    <input type="submit" name="submit" value="Submit" />
          </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:30:42.500

编辑：

```
for($i=0; $i<=count($_POST);$i++) {
  if ($_POST["Templates$i") === 'Hospitals' && $_POST["Templates$i") === 'Businesses') { //do something...} 
    else if ($_POST["Templates$i") === 'Businesses') { //do something...} 

} 
```

# c++ - 平台差异？

> ID：12538308
> 
> 赞同：-3
> 
> 时间：2012-09-21T21:18:28.563
> 
> 标签：c++

我在 C++ 中尝试了 bitset 类，并以数字 137 为例进行了尝试：所以，我将其转换为二进制数，得到 10001001。现在，我想切断 MSB 并将其余位 0001001 存储在另一个名为 bitarray 的位实例，我期待在 bitarray 中看到它，但它没有给出正确的值。可能是什么问题？我只是想将 MSB 从 137 二进制表示中的其余位中分离出来......这是代码：

```
bitset<8> bitarray;

bitset<8> bitsetObject(num);
int val = bitsetObject.size();

for (int i = 0; i <= (val - 1); i++)
{
    if (i == 6)
        break;
    else
        bitarray[i] = bitsetObject[i + 1];
} 
```

如果有人知道我如何轻松地从 bitsetObject 数组中的第二个元素切片到最后一个元素，请告诉我。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:33:13.123

如果您只是想`bitset`用最重要的设置位重置一个新对象，请考虑以下事项：

```
template<std::size_t N>
std::bitset<N> strip_mssb(std::bitset<N> bitarray)
{
    for (std::size_t i = bitarray.size(); i--;)
        if (bitarray[i])
        {
            bitarray.reset(i);
            break;
        }
    return bitarray;
} 
```

[在线演示。](http://ideone.com/8ul49)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:30:28.773

您设置`bitarray[0]`等于`bitsetObject[1]`，即 0（假设`num`实际上是 137）。

您似乎期望 的最小位`bitarray`等于 1。

# variables - 第二个用户定义函数返回垃圾值？

> ID：12538310
> 
> 赞同：0
> 
> 时间：2012-09-21T21:18:43.823
> 
> 标签：variables, garbage

我一直在自学 C 编程，但在跨函数使用变量时遇到了困难。

当我编译并运行这个程序时，函数 askBirthYear 返回正确的值，但 sayAgeInYears 返回 0 或垃圾值。我相信这与我使用变量birthYear 的方式有关，但我对如何解决这个问题感到困惑。

这是代码：

```
#include <stdio.h>
#include <stdlib.h>

int askBirthYear(int);
void sayAgeInYears(int);
int birthYear;

int main(void)
{    askBirthYear(birthYear);
     sayAgeInYears(birthYear);
     return EXIT_SUCCESS;
}

int askBirthYear(int birthYear)
{
    printf("Hello! In what year were you born?\n");
    scanf("%d", &birthYear);
    printf("Your birth year is %d.\n", birthYear);
    return birthYear;
}

void sayAgeInYears(int birthYear)
{
    int age;
    age = 2012 - birthYear;
    printf("You are %d years old.\n", age);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:35:11.317

简单的。您通过值将birthYear 传递给askBirthYear，而不是通过引用。然后你只需将它的返回值放在地板上。您对 askBirthYear 的声明及其定义也存在分歧。

```
#include <stdio.h>
#include <stdlib.h>

int askBirthYear(void);
void sayAgeInYears(int);
int birthYear;

int main(void)
{
     birthYear = askBirthYear();
     sayAgeInYears(birthYear);
     return EXIT_SUCCESS;
}

int askBirthYear(void)
{
    int year;
    printf("Hello! In what year were you born?\n");
    scanf("%d", &year);
    printf("Your birth year is %d.\n", year);
    return year;
}

void sayAgeInYears(int birthYear)
{
    int age;
    age = 2012 - birthYear;
    printf("You are %d years old.\n", age);
} 
```

# c# - 非空格字符数

> ID：12538313
> 
> 赞同：0
> 
> 时间：2012-09-21T21:19:01.103
> 
> 标签：c#, .net, foreach, if-statement

我编写了一个控制台应用程序来计算段落中非空格字符的数量，但它无法正常工作。

```
int l=0;
string s;

Console.WriteLine("Enter Paragraph: ");
s = Console.ReadLine();

foreach (char c in s)
{
    if (char.IsLetter(c))
    {
        l++;
    }
}

l = Convert.ToInt32(s.Length);

Console.WriteLine("Your Paragraph Length is: " + l);
Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T21:22:56.177

由于您的问题专门去除了空格......在我看来这会更有效：

```
 int l=0; 
        string s; 
        Console.WriteLine("Enter Paragraph: "); 
        s = Console.ReadLine(); 

        l = s.Replace(" ", String.Empty).Length; 
        Console.WriteLine("Your Paragraph Length is: " + l); 
        Console.ReadLine(); 
```

*如果您还想要修剪其他空白，例如制表符和换行符，那将是另一回事......*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T21:21:07.660

对于一个你已经用 s.Length 写 l 了。两个我不认为：是一个字符。

```
l = Convert.ToInt32(s.Length); 
```

尝试

!Char.IsWhiteSpace 将消除空格、制表符……这可能是您正在寻找的。

[字符.IsWhiteSpace](http://msdn.microsoft.com/en-us/library/t809ektx.aspx)

```
 int l=0;
    string s;
    Console.WriteLine("Enter Paragraph: ");
    s = Console.ReadLine();
    foreach (char c in s)
    {
        if (!char.IsWhiteSpace(c))
        {
            l++;
        }
    }
    Console.WriteLine("Your Paragraph Length is: " + l);
    Console.ReadLine(); 
```

借用 Skeet +1。当他在线时，我需要一个小闪光灯，所以我知道甚至不要尝试。

```
 count = line.Count(c => !Char.IsWhiteSpace(c)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T21:23:46.507

使用 LINQ 非常简单：

```
var nonSpaces = line.Count(c => c != ' '); 
```

或者对于字母：

```
var letters = line.Count(char.IsLetter); 
```

这将为每个字符执行一个委托，但不会开始创建您真正不需要的额外字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T21:23:12.807

你有没有尝试过类似的东西

```
int c = "tada test me ".Replace(" ","").Length; 
```

所以在你的情况下

```
#region number of characters other than spaces 
int l=0; 
string s; 
Console.WriteLine("Enter Paragraph: "); 
s = Console.ReadLine(); 
l = s.Replace(" ","").Length; 
Console.WriteLine("Your Paragraph Length is: " + l); 
Console.ReadLine(); 
#endregion 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T21:24:10.560

一个简单的方法是

```
String noSpaces = s.Replace(" ", "");
return noSpaces.Length; 
```

# apache - Apache - Mountain Lion - 如何修改 httpd.conf

> ID：12538314
> 
> 赞同：1
> 
> 时间：2012-09-21T21:19:02.033
> 
> 标签：apache, osx-lion, httpd.conf

我正在尝试在 Mountain Lion 中配置预装的 Apache 服务器。

我需要修改 httpd.conf 文件。通过 CLI 我没有问题，但是，我想用 TextEdit 或其他编辑器来做。

问题是：我无法在 Finder 中以 root 身份打开文件，因此，我更改了对该文件的读写权限，但这还不够。我只能在保存更改时创建副本。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T21:29:37.960

有一些非命令行编辑器，与 TextEdit 不同，可以以 root 身份打开。例如，我使用[Sublime Text](https://www.sublimetext.com/)。

# javascript - 如何屏蔽表单的输出

> ID：12538325
> 
> 赞同：0
> 
> 时间：2012-09-21T21:19:50.970
> 
> 标签：javascript, forms, input, mask

我试图掩盖从我制作的表单转发但似乎不起作用的输出。

第 1 页的输入字段

```
<form method="post" action="step2.php" id="form1" name="form1">  
  Enter Card Here:<input name="card"   type="text"  id="card"
  value="<?php echo $_POST["card"]; ?>"  style="width:85px;"
  class="validate[custom[card]] text-input" /> </form> 
```

这是我正在使用的代码

```
<script> var card = "<?php echo $_POST["card"]; ?>"; var str = "";
for(var i=1; i <= card.length-4; i++) {    str += "*"; }

ecard = str + card.substr(card.length-4);
$('.ccard').appendTo('ecard'); </script> 
```

这是输出应该出现的地方

```
 <label class="ccard"></label> 
```

在输入字段中，用户必须输入 12 位数字

```
ex: 123456789012 
```

那么它应该显示为

```
********9012 
```

前 8 位数字被屏蔽，只有后 4 位数字可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:25:02.820

试试这个：

```
var card = "123456789011";
var str = "";
for(var i=1; i <= card.length-4; i++) {
   str += "*";
}
ecard = str + card.substr(card.length-4);
console.log(ecard); 
```

变量是你的`card`输入，在这个例子中它已经设置好了。

**工作 jsfiddle 示例** [http://jsfiddle.net/fdRTR/2/](http://jsfiddle.net/fdRTR/2/)

**更新了带有标签输出的 jsfiddle** [http://jsfiddle.net/fdRTR/3/](http://jsfiddle.net/fdRTR/3/)

**第三次更新，添加了一个按钮而不是 onkeyupevent** [http://jsfiddle.net/fdRTR/4/](http://jsfiddle.net/fdRTR/4/)

如果您需要更多帮助，请检查示例并回信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:32:45.120

试试这个：

```
var card = "123456789012";
var maskLength = card.length-4;

ecard = card.replace(card.substr(0,maskLength),Array(maskLength).join('*'));

console.log(ecard); 
```

如果你想了解它的作用：

`replace():` [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

`substr():` [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)

`Array(n).join():` [重复字符 N 次](https://stackoverflow.com/questions/1877475/repeat-character-n-times)

# php - 如何组合 2 个多维数组并删除重复项

> ID：12538327
> 
> 赞同：1
> 
> 时间：2012-09-21T21:20:32.780
> 
> 标签：php, arrays

如何基于两个数组（在 PHP 中）创建一个新的多维数组，以便合并数组并删除任何重复项。例子：

第一个数组：

```
Array 
(
  [0] => Array
    (
        [id] => 0001
        [name] => sample name 1
    )

  [1] => Array
    (
        [id] => 0002
        [name] => sample name 2
    )
  [3] => Array
    (
        [id] => 0003
        [name] => sample name 3
    )
) 
```

第二个数组：

```
Array 
(
  [0] => Array
    (
        [id] => 0002
        [name] => sample name 2
    )
  [1] => Array
    (
        [id] => 11323
        [name] => blah blah
    )
) 
```

所以新数组看起来像这样：

```
Array 
(
  [0] => Array
    (
        [id] => 0001
        [name] => sample name 1
    )

  [1] => Array
    (
        [id] => 0002
        [name] => sample name 2
    )
  [3] => Array
    (
        [id] => 0003
        [name] => sample name 3
    )
  [4] => Array
    (
        [id] => 11323
        [name] => blah blah
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:38:37.277

你可以这样做

```
$array1 = Array(
        0 => Array("id" => "0001","name" => "sample name 1"),
        1 => Array("id" => "0002","name" => "sample name 2"),
        3 => Array("id" => "0003","name" => "sample name 3"));

$array2 = Array(
        0 => Array("id" => "0002","name" => "sample name 2"),
        1 => Array("id" => "11323","name" => "blah blah"));

$output = array_map("unserialize", array_unique(array_map("serialize", array_merge($array1,$array2))));

var_dump($output); 
```

输出

```
array
  0 => 
    array
      'id' => string '0001' (length=4)
      'name' => string 'sample name 1' (length=13)
  1 => 
    array
      'id' => string '0002' (length=4)
      'name' => string 'sample name 2' (length=13)
  2 => 
    array
      'id' => string '0003' (length=4)
      'name' => string 'sample name 3' (length=13)
  4 => 
    array
      'id' => string '11323' (length=5)
      'name' => string 'blah blah' (length=9) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:34:20.970

您可以序列化每个子数组，使用`array_unique`，然后反序列化：

```
$arr = array_merge($arr1,$arr2);
foreach($arr as &$a) {
    $a = serialize($a);
}
$arr = array_values(array_unique($arr));
foreach($arr as &$a) {
    $a = unserialize($a);
} 
```

# javascript - 如何从 Greasemonkey 脚本将数组存储在 Firefox 中？

> ID：12538328
> 
> 赞同：0
> 
> 时间：2012-09-21T21:20:41.840
> 
> 标签：javascript, jquery, arrays, firefox, greasemonkey

我正在更新[一个 Greasemonkey 脚本，该脚本读取*vBulletin*`href`的忽略部分中被忽略用户列表中](http://userscripts.org/scripts/review/88463)*的名称。*

 *我将值存储在一个数组中，然后`display:none`将`td`其隐藏在留言板上被忽略的用户线程。

这样做的唯一方法是访问忽略列表并将数组值存储在`about:config`. 但我无法让数组存储在那里。

这是更新脚本的相关部分：

```
// @grant          GM_setValue 
// ==/UserScript==

(function() {
    var allT; 
    var allR;
    var plonk = new Array(); 
    var ignore_threads_from = GM_setValue;

    var url = "http://www.site.com/forums/profile.php?do=ignorelist"; //use for iggy list URL
    var currentURL = window.location;

    if (url == currentURL) {
        var GM_setValue = $('#ignorelist.userlist li a').map(function() {
              return $(this).text();
        }).get();
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T21:27:52.017

您想将数组转换为字符串，`JSON.stringify()`这是最好的选择。

```
var a = [1, 2, 3];
GM_setValue("key", JSON.stringify(a));

var b = JSON.parse(GM_getValue("key")); 
```

这是假设`plonk`不是一个元素数组——没有关于你在那里做什么的提示。

为什么要覆盖 GM_setValue？别管那个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T03:45:08.000

Jeremy J Starcher 的回答是正确的：

1.  您不能以这种方式存储数组，使用`GM_setValue()`.
2.  问题代码`GM_setValue()`无论如何都使用不正确，并覆盖了函数！( `var GM_setValue = ...`)。

需要了解的其他事项：

1.  `GM_setValue()`并`GM_getValue()`用除字符串以外的任何东西做糟糕的工作。但是，幸运的是，有几个实用程序可以纠正这些缺陷。一个很好的是[Super_GM_setValue_and_GM_getValue.js](http://userscripts-mirror.org/scripts/show/107941)。

    要使用它，请将此行添加到脚本的[元数据块](http://wiki.greasespot.net/Metadata_Block)中：

    ```
    // @require http://userscripts-mirror.org/scripts/source/107941.user.js 
    ```

2.  确保你也在你`@grant` `GM_getValue`的`GM_setValue`元数据块中。

3.  将代码包装在匿名函数中是没有意义的，例如：

    ```
    (function() {
        ...
    })(); 
    ```

4.  使用`window.location.href`，不使用`window.location`。

**将它们放在一起，该代码片段将如下所示：**

```
// @require http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @require http://userscripts-mirror.org/scripts/source/107941.user.js
// @grant   GM_setValue 
// @grant   GM_getValue 
// ==/UserScript==

var allT; 
var allR;
var plonk               = new Array(); 
var ignore_threads_from = GM_SuperValue.get ("IgnoredUsers", []);

var url         = "http://www.example.com/forums/profile.php?do=ignorelist"; //use for iggy list URL
var currentURL  = window.location.href;

if (url == currentURL) {
    var ignoreList  = $('#ignorelist.userlist li a').map (function () {
          return $(this).text();
    } ).get ();

    GM_SuperValue.set ("IgnoredUsers", ignoreList);
} 
```*

# c# - 没有数据库模型的 C# 动态查询

> ID：12538332
> 
> 赞同：2
> 
> 时间：2012-09-21T21:21:01.843
> 
> 标签：c#, linq, linq-to-sql, dynamic

我一直在网上搜索动态查询的解决方案。

我发现了许多不同的解决方案（例如 Linq to Sql、Dynamic Linq Expressions、Dynamic Query），但所有这些解决方案都涉及到某种数据库的先前知识（如代码中的模型）。也许我要问的是远离深渊，但是有没有可能在没有模型的情况下动态查询数据库的方法？

例如，一个数据库有一个`Customers`包含以下列的表：

*   客户ID
*   姓名
*   最喜欢的颜色

我想创建一个查询`SELECT Name FROM Customers WHERE @0 = @1`，其中两个占位符是动态填充的。结果数据与模型类无关，我更愿意使用某种框架来构建查询，而不是简单的字符串连接。

System.Linq.Dynamic 命名空间非常接近满足此请求，但它使用数据库模型。

我意识到这很疯狂，但我只是好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:15:29.650

Insight 类似于 Dapper：[https ://github.com/jonwagner/Insight.Database](https://github.com/jonwagner/Insight.Database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:54:40.777

看看 Dapper：[http ://code.google.com/p/dapper-dot-net/](http://code.google.com/p/dapper-dot-net/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:35:13.233

> SQL 查询参数只能代替文字值。您不能将参数用于表名、列名、值列表或其他 SQL 语法。这是所有品牌数据库的标准 SQL 行为。

据我所知，你不能让你的列名动态化，唯一能让这个查询动态化的方法是使用类似的东西`string.Format`或`StringBuilder`结合一些正则表达式/规则来检查 columnName 是否是一个有效的名称，如果它来自用户的直接输入.. 如果它由您控制，那么它不应该担心，因为您可以放心，不会有 SQL 注入。如果用户负责提供列名，请确保将用户输入映射到代码中的某个列名。

现在可以对参数本身进行参数化，为此您可以使用带有 SqlCommand 类的普通旧 ADO.NET，然后添加参数以动态查询。这是您可以参考的资源：[http ://www.csharp-station.com/Tutorial/AdoDotNet/lesson06](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)

希望这有帮助..

# html - 如何在 Sinatra 中制作代理？

> ID：12538340
> 
> 赞同：0
> 
> 时间：2012-09-21T21:22:00.650
> 
> 标签：html, ruby, proxy, sinatra

我想制作一个简单的 Sinatra 应用程序，当我导航到“/proxy/:someurl”时，我将看到直接导航到 :someurl 的确切内容，也就是一个简单的网络代理，有点像整页 iframe。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T22:42:13.473

最简单的事情是使用例如 RestClient 并说：

```
get '/proxy/:url' do |url|
  RestClient.get(url)
end 
```

这将代理任何成功获取的内容。做更多的工作，您将通过内容类型和缓存控制标头进行管道传输。再多一点，你就可以通过错误代码了。然后发布。然后...

也就是说，我不会进一步帮助您，因为让您的 Web 服务器代理任意内容是一个糟糕的主意。它破坏了作为网络安全基础的[同源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)它很慢（占用您的 Web 服务器等待另一个 Web 服务器）和/或不平凡（如果您使用`sinatra-async`+ `em-http-request`）。它使您的网络服务器成为一个匿名器，完全会引起滥用。只是……不要。

*   代理任意 URL：**bad**。
*   从您信任的特定 URL 代理一些内容：可能没问题，但仍可能不是最佳解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:51:08.063

```
require 'sinatra'
require 'open-uri'

get '/proxy' do
  url = params[:url]
  raise "GTFO" if (url[0] == '/' || url[0] == '.')
  open(url) do |content|
    content.read.to_s.gsub(/(href|src)=("|')\//, '\1=\2' + url + '/')
  end
end 
```

*[该脚本通过OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)*获取页面内容，修复脚本、样式表和图像链接，然后显示结果。

我使用了`/proxy?url=http://url.com/`一条路线而不是一条路线`/proxy/url`。Sinatra 不喜欢通常在 URL 中的斜杠和特殊字符。

# c++ - CFileDialog 在 Windows XP 下保留目录句柄

> ID：12538341
> 
> 赞同：0
> 
> 时间：2012-09-21T21:22:20.297
> 
> 标签：c++, windows, mfc

我一直在与这个问题作斗争一天半，但找不到答案。我已将代码简化为用于打开保存对话框的简单代码：

```
CFileDialog dlg( FALSE, _T("xml"), _T("zzz.xml"), 
    OFN_PATHMUSTEXIST | OFN_NOCHANGEDIR,
        _T("XML Files|*.xml||"), this);

dlg.m_ofn.lpstrInitialDir = ... a string for the initial directory
dlg.DoModal(); 
```

CFileDialog 类（也直接使用 GetSaveFileName 验证）保留了所选目录的句柄，但显然仅在 Windows XP（这是我们的部署平台）下。这可以防止在应用程序仍在运行时重命名目录。

在任何人开始谈论 CFileDialog 设置当前目录之前，我知道这一点并且我知道 OFN_NOCHANGEDIR。这不是那个问题。

在循环中运行此代码会导致保留越来越多的句柄，这可以使用 Process Explorer 进行验证，以查看应用程序具有指向该目录的句柄。重复运行对话框会导致额外的句柄，但并非总是如此。如果我每次都更改名称，那么似乎每次都会添加一个新名称，尽管并非 100% 始终如一。

每次我认为我有一些可以解决它的东西时，它都不会成功。像文件对话框这样的基本东西怎么会被破坏？

我不知道还能做什么。这是在我们即将发布新版本之前发现的一个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T01:23:15.427

鉴于 MFC 的 CFileDialog 以及底层的 Windows API 已经存在了很长时间，我的第一反应是怀疑它们是否存在明显泄漏句柄的错误。所以我猜你看到的问题来自其他地方。

关于文件对话框的一件事是它加载了外壳扩展。例如，您将在 Windows 资源管理器中看到的各种第三方右键单击功能也将在您在自己的程序中调用的文件对话框中可用。如果外壳扩展表现良好，那没关系，但有些不是。因此，您测试过的系统有可能安装了编写不佳的 shell 扩展，最终在文件对话框使用时导致句柄泄漏。

我以前见过文件对话框加载的这些额外组件导致软件的其他部分出现问题的情况，但仅限于某些人的计算机，因为并非每个人都安装了相同的东西。

当然，我没有足够的信息说这实际上是你的问题。我只能提供这个想法并建议您尝试在不同的 Windows XP 计算机上测试这个问题，这些计算机的设置不同。在安装其他任何东西之前，您也可以尝试在全新安装的 Windows XP 上对其进行测试。如果问题没有出现在某些计算机上，那么这很好地表明某些第三方组件是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:45:08.423

我发现了罪魁祸首。有问题的应用程序编写得不是很好，并且经常在主 UI 线程上执行长时间运行的任务。还有其他代码在控制物理设备的同一台机器上运行。其他代码遇到的问题之一是它被相关应用程序阻止，导致它停止。不幸的是，他们不得不关闭超线程来解决另一个问题，这将允许两者共存。

因此，为了让两个应用程序共存并让机器控制程序优先于该应用程序，应用程序的线程优先级被降低到最低优先级。

事实证明，线程优先级的降低是导致它的原因。所以要把另一个创可贴放在创可贴的上面，放在创可贴的上面。我将创建一个 CFileDialog 子类，该子类为文件对话框提高线程优先级，并在它返回时将其降低。

# api - Magento API SOAP-ERROR: Parsing WSDL: Couldn't load from '[url]/index.php/api/index/index/?wsdl=1' : 找不到开始标签第 56 行的结尾

> ID：12538343
> 
> 赞同：1
> 
> 时间：2012-09-21T21:22:35.773
> 
> 标签：api, magento

当我转到 [url]/api （其中 [url] 是我的 Magento 的 url）时，我得到以下响应：

```
<SOAP-ENV:Envelope>
<SOAP-ENV:Body>
<SOAP-ENV:Fault>
<faultcode>WSDL</faultcode>
<faultstring>SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://www.example.com/magento/1.7/index.php/api/index/index/?wsdl=1' : Couldn't find end of Start Tag part line 56
</faultstring>
</SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

正确的反应应该是：

```
<SOAP-ENV:Envelope>
<SOAP-ENV:Body>
<SOAP-ENV:Fault>
<faultcode>Sender</faultcode>
<faultstring>Invalid XML</faultstring>
</SOAP-ENV:Fault>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

是什么赋予了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:49:52.483

我迟到了，但希望我的回复将来对某人有用。

我有完全相同的问题。我已经安装了 Zend Server (PHP 5.3.9) 并且遇到了同样的错误。我进行了很多搜索并应用了所有可用的解决方案，但失败了......最后，我安装了 wamp，然后在那里运行“Soap Client”脚本，它运行成功。

然后我到达这一点，Zend Server（PHP 5.3.9）在“Soap Client”脚本中有一些默认错误。我卸载了 Zend Server (PHP 5.3.9) 并安装了 Zend Server (PHP 5.4.11) 并在那里运行“Soap Client”脚本。这次它运行成功。

结论：请使用最新的 PHP 版本（Zend Server）或（Wamp Server），因为在某些 PHP 版本中存在默认的“Soap Client”错误，我在上面提到了一个。

谢谢， 卡希夫

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T12:10:41.027

答案是：它来自一个 PHP 错误。真相在 floriancarstens 的帖子中：[Magento 论坛](http://www.magentocommerce.com/boards/viewthread/56528/)

# javascript - 异步按键事件/如何短路顺序按键事件以提高速度

> ID：12538344
> 
> 赞同：1
> 
> 时间：2012-09-21T21:22:38.393
> 
> 标签：javascript, jquery, performance, jquery-deferred

在我为工作而构建的网站上，我们有一个搜索栏，用户可以在其中输入以搜索存储在一组元素的数据中的各种字段。当他们开始打字时，问题出现在较慢的浏览器中。

我试图做的是以下，使用 jQuery Deferred 对象：向输入框添加一个按键处理程序。当 keyup 被触发时，解决任何先前触发的仍处于“未决”状态的 keyup。然后继续使用当前的 keyup 事件。在 keyup 事件本身内部，它根据输入值进行所有匹配，它总是检查当前事件是否仍然未决，如果不是，它应该跳过该事件的其余部分。

问题似乎是，即使使用像 IE7 这样的慢速浏览器，每个 keyup 事件都是阻塞的。因此，如果用户输入“testing”，它会尝试在看到“te”的 keyup 事件之前完成“t”字符的整个事件，依此类推。

那么问题就变成了，我怎样才能使 keyup 事件异步/非阻塞，或者这几乎是不可能的？

一个例子：

```
var search_values = new Array();
var deferred_searches = {};

function filterSearchResults(event) {
    var input_element = jq(event.target);
    var search_value = input_element.val();
    console.log('user just typed final letter in :' + search_value);
    for (var svi = 0; svi < search_values.length-1; svi++) {
        if (deferred_searches[search_values[svi]] !== undefined &&
            deferred_searches[search_values[svi]].state() == 'pending') {
            console.log('resolving ' + search_values[svi])
            deferred_searches[search_values[svi]].resolve(search_values[svi]);
        }
    }

    var result_list = jq('div#header_project_selection_result_list');
    var all_project_results = result_list.find('div.header_project_result');

    console.log('beginning search for "'+search_value+'"');
    if (search_value == '') {
        // Blank input value means show all results
    }
    else {
        // Non-blank value means search
        if (! startSearchFilter(search_value, all_project_results)) {
            return false; // this should return out of this current event handler
        }
    }
    console.log('ending search for "'+search_value+'"');
},

/**
 * Helper function that actually handles finding and hiding/showing results,
 * and highlighting found text.
 *
 * Uses jQuery for this functionality.
 *
 * @param       search_value                            string              The text the user has input
 * @param       all_project_results                     jQuery              A jQuery extended array of all project results to filter
 *
 * @return      tbr                                     boolean             Flag indicating whether the search was short circuited
 */
function startSearchFilter(search_value, all_project_results) {
    var tbr = true;

    search_values.push(search_value);
    deferred_searches[search_value] = jq.Deferred();
    deferred_searches[search_value].done(function(sv) {
        search_values = search_values.without(sv);
        console.log('done deferred search for "'+sv+'" - disabling');
    });

    var number_of_results_found = 0;
    var pr_count = all_project_results.length - 1;
    var regexp = new RegExp(search_value, 'im');
    for (var index = 0; index <= pr_count; index++) {
        if (deferred_searches[search_value].state() == 'pending') {
            // KEEP GOING
            var ext_project_result = all_project_results.eq(index);
            var result_data = ext_project_result.data();

            //console.log(search_value+" is in state '"+deferred_searches[search_value].state()+"'.....' all_project_results.each() [inside]");
            if (result_shown) {
                number_of_results_found++;
                // The input text has been found on data for the current project, so make sure we show that result row
                ext_project_result.addClass('filtered');
            }
            else if (ext_project_result.hasClass('filtered')) {
                // The input text has not been found, or the user is not an admin and can't view it, so hide that row
                ext_project_result.removeClass('filtered');
            }
            continue; // keep going to the next result element
        }
        else {
            tbr = false;
            break; // break when short circuited
        }
    }
    if (deferred_searches[search_value].state() == 'pending') {
        deferred_searches[search_value].resolve(search_value); // explicitly resolve this finalized one
    }

    return tbr;
} 
```

理论上这应该可行，但正如我所提到的，它似乎总是阻塞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:08:50.620

而不是做你正在做的事情，你可能想研究一个叫做“去抖动”的概念，它基本上允许你创建一个可以多次调用的函数，但只有在它没有被调用一定数量时才会完全执行的时间。

（以下代码片段来自 underscore.js ）

```
// Returns a function, that, as long as it continues to be invoked, will not
// be triggered. The function will be called after it stops being called for
// N milliseconds. If `immediate` is passed, trigger the function on the
// leading edge, instead of the trailing.
var debounce = function(func, wait, immediate) {
    var timeout;
    return function() {
        var context = this, args = arguments;
        var later = function() {
            timeout = null;
            if (!immediate) {
                func.apply(context, args);
            }
        };
        if (immediate && !timeout) {
            func.apply(context, args);
        }

        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}; 
```

使用它，你可能会做这样的事情，它只会在用户停止输入 500 毫秒后执行我们昂贵的回调

```
$( "#searchbox" ).keyup( debounce(function() {
    // Some expensive operation here
}, 500)); 
```

Ben Alman 提供了一个很好的插件（[http://benalman.com/projects/jquery-throttle-debounce-plugin/](http://benalman.com/projects/jquery-throttle-debounce-plugin/)），如果您使用它们，LoDash/Underscore 提供相同的功能。

# c - 如何解决 OpenMP 内存访问中的竞争条件？

> ID：12538348
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:23:03.090
> 
> 标签：c, openmp, race-condition

我正在做一个项目，我需要从文件中加载和处理千兆字节的序列。由于我正在处理大量数据，因此我无法将其保存在 RAM 上。所以我使用一个线程从这个文件加载数据并保存在一个队列中，一个线程一旦检测到队列上有东西，就将其卸载到某个临时文件中。

我在做这件事时遇到了一些麻烦。看起来有一个赛车条件。有时它有效，有时它返回分段错误。

我用这个错误写了一个最小的代码示例。

这是我的**队列代码**：

```
//####################
// STRUCTS 
//####################
struct queue_item{
    char *seq;
    struct queue_item *prox;//Next element
};
typedef struct queue_item QueueItem;

struct Queue{
    QueueItem *first;//First element on queue
    QueueItem *end;//Last element on queue
    int size;//Queue size
};
typedef struct Queue Queue;

//####################

Queue* create_queue(){
    Queue *f;
    f = (Queue*)malloc(sizeof(Queue));
    f->size = 0;
    return f;
}

QueueItem* new_queue_item(char *seq){
    QueueItem* new;
    int n;

    n = strlen(seq);
    new = (QueueItem*)malloc(sizeof(QueueItem));
    new->seq = (char*)malloc((n+1)*sizeof(char));

    strcpy(new->seq,seq);

    return new;
}

void enqueue(Queue *f,char *seq){
    QueueItem* new;
    new = new_queue_item(seq);

    switch(f->size){
        case 0:
            f->first = new;
        break;
        case 1:
            f->end = new;
            f->first->prox = f->end;
        break;
        default:
            f->end->prox = new;
            f->end = new;
        break;
    }

    f->size = f->size + 1;
    return;
}

char* dequeue(Queue *f){
    QueueItem *hold;
    char *seq;

    if(f->size > 0){
        hold = f->first;
        seq = f->first->seq;
        f->first = f->first->prox;
        free(hold);
        f->size--;
    }

    return seq;
}

int queue_size(Queue *f){
    return f->size;
}

void seq_to_file(char *seq,FILE *f){
    if(seq != NULL){
        fputs(seq,f);
        free(seq);
    }
    return;
} 
```

这是我的**主要代码**：

```
Queue *f;
int i;
int end_flag;
char *seq;

f = create_queue();
end_flag = 0;

#pragma omp parallel shared(f) shared(end_flag)
{
    #pragma omp sections
    {
        #pragma omp section
        {
            FILE *tmp;
            tmp = fopen("tmp","w");
            while(!end_flag){
                if(queue_size(f) > 0)
                    seq_to_file(dequeue(f),tmp);
            }

            fclose(tmp);    
        }
        #pragma omp section
        {
            seq = (char*)malloc(21*sizeof(char));
            strcpy(seq,"ABCDEFGHIJKLMNOPQRST");

            for(i=0;i < NSEQS;i++)
                enqueue(f,seq);
            end_flag = 1;
        }
    }
} 
```

我检测到的一些错误：

1 - new_queue_item() 行上的 malloc 错误：new->seq = (char*)malloc((n+1)*sizeof(char));

*** 检测到 glibc *** /home/pedro/Dropbox/Programação/C/Queue/fila_teste：双重释放或损坏（输出）：0x00000000006f3bd0 ***** **检测到 glibc*****/home/pedro/Dropbox/Programação/C/Queue/fila_teste：malloc（）：内存损坏（快速）：0x00000000006f3b70 ******

 ***2 - new_queu_item() 行上的 malloc 错误：new = (QueueItem*)malloc(sizeof(QueueItem));

3 - seq_to_file() 行上的免费错误：free(seq);

*** 检测到 glibc *** /home/pedro/Dropbox/Programação/C/Queue/fila_teste：双重释放或损坏（输出）：0x0000000000cdd3f0 ***

检查 gdb 我有： (gdb) print *f $16 = {first = 0x0, end = 0x611180, size = 426}

这第三个错误让我认为这确实是一种竞争情况。

我试图用“end_flag”模拟一个信号量，但认为这还不够。另外，不要认为“关键”和“原子”子句在这里会有所帮助，因为它们只保护对代码区域的访问，而不是内存。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:16:55.987

如果您不打算重用此代码，则可以使用以下代码：

`#pragma omp critical(queueLock)`

在上面的示例中，该指令将充当“命名”互斥锁“queueLock”。在您的情况下，您必须在 enqueue、dequeue 和 queue_size 函数中使用它，因为它们都使用共享数据。

如果您打算重用此代码，您应该了解 OpenMP 锁 ( `omp_lock_t`)。***

# awk - 在大文件中打印选定的行

> ID：12538350
> 
> 赞同：4
> 
> 时间：2012-09-21T21:23:10.263
> 
> 标签：awk

我是 AWK 的新手。

我有一个大文本文件（> 3GB）。喜欢使用 AWK 行命令以该顺序提取/打印选定的行（第 62 行、第 152 行和第 153 行），它每 217 行迭代一次，直到文件中的记录结束。

试图从网上搜索和学习。尝试了以下，它似乎不工作，

```
awk '{(for (i=62; i<=NR; i=i+217)||for (i=62; i<=NR; i=i+217)||for (i=62; i<=NR; i=i+217)); print}' file.txt 
```

和

```
count=62||152||153
awk '{if (++count%217==0) print;}' file.txt 
```

您能否协助给我一些指示或引导我访问任何可能有帮助的网站。

我正在使用这个[http://www.catonmat.net/blog/wp-content/uploads/2008/09/awk1line.txt](http://www.catonmat.net/blog/wp-content/uploads/2008/09/awk1line.txt)来学习。

rgds 萨拉瓦南 K

**更新 #1 - 2012 年 9 月 21 日 - 晚上 10 点 40 分**

试过了

```
awk 'NR == 62 || NR == 152 || NR == 153 || NR % 217 == 0 {print $0;}' file.txt 
```

能够打印第 #62、#152 和 #153 行，但不能打印以下所有迭代，例如 #(62+217)、#(152+217) 和 #(153+217) 等。

也尝试了以下方法，但效果不佳。

```
awk '(NR == 62 || NR == 152 || NR == 153) && (((NR-62) % 217==0) || ((NR-152) % 217 ==0)|| ((NR-153) % 217==0)) {print $0;}' file.txt 
```

**更新 #2 - 2012 年 9 月 21 日 - 晚上 10 点 55 分——关闭**

我通过一些调整尝试了 rmunoz 的想法。它就像魔术一样工作。感谢 rmunoz，我结束了这个话题

```
awk '(NR - 62) % 217 == 0 || (NR - 152) % 217 == 0 || (NR - 153) % 217 ==0 {print $0;}' file.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:28:39.820

您可以通过这种方式在 AWK 中使用模式：

```
 awk 'NR == 62 || NR == 152 || NR == 153 || NR % (62+217) == 0 || NR % (152+217) == 0 || NR % (153+217) == 0 {print $0;}' test.txt 
```

# mysql - 排序中的 SQL 排序

> ID：12538352
> 
> 赞同：2
> 
> 时间：2012-09-21T21:23:21.433
> 
> 标签：mysql, sql

好的，我认为这应该是一个相当简单的问题，但还没有弄清楚。

我有一张名为 Staff 的表。人员DESC如下：

```
SQL> DESC Staff
Name                                      Null?    Type
----------------------------------------- -------- ----------
SNO                                       NOT NULL CHAR(5)
FNAME                                              VARCHAR2(3
LNAME                                              VARCHAR2(3
POSITION                                           VARCHAR2(1
SEX                                                CHAR(1)
DOB                                                DATE
SALARY                                             NUMBER(9)
BNO                                                CHAR(4) 
```

这是我正在使用的当前查询：

```
SELECT bNo, lName||' '||fName, position, salary
FROM Staff
WHERE bNo 'b009'
OR bNo = 'b005'
ORDER BY 
    case position
        when 'Manager' then 1
        when 'Secretary' then 2
        when 'Supervisor' then 3
        when 'Assistant' then 4
    else 99
end; 
```

我遇到的问题是，在每个职位组中，我也需要按 lName 排序。任何提示将非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T21:25:47.197

只需添加`lName`为第二`ORDER BY`列。

```
ORDER  BY CASE position
            WHEN 'Manager' THEN 1
            WHEN 'Secretary' THEN 2
            WHEN 'Supervisor' THEN 3
            WHEN 'Assistant' THEN 4
            ELSE 99
          END,
          lName; 
```

# android - GridView 与 android 上的图像上的文本和 sqlite 中的数据结构设计

> ID：12538356
> 
> 赞同：0
> 
> 时间：2012-09-21T21:23:40.373
> 
> 标签：android, sqlite, gridview

1.我想知道如何添加文本（将来可以更改）每张图片，如图所示 [http://developer.android.com/design/media/accessibility_contentdesc.png](http://developer.android.com/design/media/accessibility_contentdesc.png)

2.我想建立一个数据结构，这样每天都会添加一些像20张图片和更多信息的东西我应该建立一个可以容纳所有日子的表格吗？在这张表中，我每天制作相关的日期或表格？有关系吗？

谢谢并提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:17:13.467

有一个类似的问题，看看这个线程上的两个答案：[how to create custom UI like pulse in android](https://stackoverflow.com/questions/11775017/how-to-create-custom-ui-like-pulse-in-android/11777794#11777794)

首先阅读第二个答案，然后才向上移动到接受的答案，因为接受的答案是第二个答案的延续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:56:02.870

如果你想在你的 ImageView 上显示文本，你应该创建一个 xml 布局，其中包含一个 ImageView 和一个 TextView，你将在 GridView 适配器的 getView 方法中膨胀。视图 v = LayoutInflater.from(context).inflate(viewid);

# php - 将 url 从字符串转换为链接，除非它们位于 html 标记的属性中

> ID：12538358
> 
> 赞同：12
> 
> 时间：2012-09-21T21:23:43.557
> 
> 标签：php, regex, url, preg-replace, linkify

我正在尝试将`$_POST['content']`所有 url 从 textarea 输入 () 转换为链接。

```
$content = preg_replace('!(\s|^)((https?://)+[a-z0-9_./?=&-]+)!i', ' <a href="$2" target="_blank">$2</a> ', nl2br($_POST['content'])." ");
$content = preg_replace('!(\s|^)((www\.)+[a-z0-9_./?=&-]+)!i', '<a target="_blank" href="http://$2"  target="_blank">$2</a> ', $content." "); 
```

目标链接格式：`www.hello.com`或`http(s)://(www).hello.com`

但这似乎破坏了任何 iframe、图像或类似内容，

正确的正则表达式将如何忽略 html 标签中的 url？

注意：我知道我需要两个表达式；一个检测没有协议链接（比如`www.hello.com`，所以我需要添加它），另一个检测带有协议的 url（所以不需要添加）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-25T20:45:59.607

您的代码在 iframe 等中应该不是什么大问题，因为在那里您`"`的 URL 前面通常有一个，而不是您的模式需要的空格。

但是，这里有不同的解决方案。`<`如果您有单个或`>`在 HTML 注释或类似内容中，它可能无法 100% 工作。但在任何其他情况下，它应该为您提供良好的服务（我不知道这是否对您来说是个问题）。它使用负前瞻来确保`>`在任何打开之前没有关闭`<`（因为这意味着您在标签内）。

```
$content = preg_replace('$(\s|^)(https?://[a-z0-9_./?=&-]+)(?![^<>]*>)$i', ' <a href="$2" target="_blank">$2</a> ', $content." ");
$content = preg_replace('$(\s|^)(www\.[a-z0-9_./?=&-]+)(?![^<>]*>)$i', '<a target="_blank" href="http://$2"  target="_blank">$2</a> ', $content." "); 
```

如果您不熟悉这种技术，这里有一些详细说明。

```
(?!        # starts the lookahead assertion; now your pattern will only match, if this subpattern does not match
[^<>]      # any character that is neither < nor >; the > is not strictly necessary but might help for optimization
*          # arbitrary many of those characters (but in a row; so not a single < or > in between)
>          # the closing >
)          # ends the lookahead subpattern 
```

请注意，我更改了正则表达式分隔符，因为我现在`!`在正则表达式中使用。

`(\s|^)`除非您还需要标签之外的 URL的第一个子模式，您现在也可以删除它（并减少替换中的捕获变量）。

```
$content = preg_replace('$(https?://[a-z0-9_./?=&-]+)(?![^<>]*>)$i', ' <a href="$1" target="_blank">$1</a> ', $content." ");
$content = preg_replace('$(www\.[a-z0-9_./?=&-]+)(?![^<>]*>)$i', '<a target="_blank" href="http://$1"  target="_blank">$1</a> ', $content." "); 
```

最后......您是否打算不替换最后包含锚点的 URL？例如`www.hello.com/index.html#section1`？如果您不小心错过了这个，请添加`#`到您允许的 URL 字符中：

```
$content = preg_replace('$(https?://[a-z0-9_./?=&#-]+)(?![^<>]*>)$i', ' <a href="$1" target="_blank">$1</a> ', $content." ");
$content = preg_replace('$(www\.[a-z0-9_./?=&#-]+)(?![^<>]*>)$i', '<a target="_blank" href="http://$1"  target="_blank">$1</a> ', $content." "); 
```

**编辑：**另外，`+`and`%`呢？还有一些其他字符可以在不编码的情况下出现在 URL 中。[看到这个。](https://stackoverflow.com/questions/1856785/characters-allowed-in-a-url) **编辑结束**

我认为这应该对你有用。但是，如果您可以提供一个显示有效和损坏的 URL 的示例（使用您拥有的代码），我们实际上可以提供经过测试适用于您的所有案例的解决方案。

最后一个想法。正确的解决方案是[使用 DOM 解析器](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。然后你可以简单地将你已经拥有的正则表达式应用于文本节点。但是，您对 HTML 结构的关注非常有限，这使您的问题再次成为常态（只要您在 HTML 注释或页面上的 JavaScript 或 CSS 中没有不匹配的 '<' 或 '>'）。如果你确实有这些特殊情况，你真的应该研究一下 DOM 解析器。在这种情况下，这里（到目前为止）提供的解决方案都不是安全的。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-25T22:07:11.497

1.  *在我看来，url 是以空格或行尾（垂直空格或所谓的新行*）开头`https?://`和结尾的所有内容。
**   由于第一点，图片，链接等不会被替换，因为它们都以“或>开头（*除非链接`<a href=" http...">`以空格开头，但这是无效的html*）。*   修饰符`/m`告诉正则表达式匹配每一行（*以便第一点中描述的匹配有效*）。*   `nl2br()`替换后应该使用函数（*因为链接从行首开始*）。*   仅当空间最初存在于 $content 中时才添加前后空间（*参见 preg_replace() 函数的第二个参数中的 $1 和 $3*）。*   此解决方案**支持带有特殊字符的域名**，例如[www.moški.si](http://www.moski.si)。*

 *# 输入：

![输入](../Images/233681073ffbc2b453c39a9eaa325a7b.png)

# 代码：

```
<?php

$content =
    preg_replace(
        '~(\s|^)(https?://.+?)(\s|$)~im', 
        '$1<a href="$2" target="_blank">$2</a>$3', 
        $content
    );
$content = 
    preg_replace(
        '~(\s|^)(www\..+?)(\s|$)~im', 
        '$1<a href="http://$2" target="_blank">$2</a>$3', 
        $content
    );
$content = nl2br($content); 
```

# 输出：

![输出](../Images/d02c565fc601ccaea27afe4fb0c239c9.png)

## 编辑：

`https?://`不带前缀的链接示例 + 单个`preg_replace()`调用示例（模式和替换是数组）：

```
$content = 
    preg_replace(
        array(
            '~(\s|^)(www\..+?)(\s|$)~im', 
            '~(\s|^)(https?://)(.+?)(\s|$)~im', 
        ),
        array(
            '$1http://$2$3', 
            '$1<a href="$2$3" target="_blank">$3</a>$4', 
        ),
        $content
    );
$content = nl2br($content); 
```

![在此处输入图像描述](../Images/e3db532589254d1050e7f3f5124e1d58.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T14:45:50.757

以前已经这样做了数百次。在此页面上，[m-buettner](https://stackoverflow.com/a/12590772/881551)和[glavić 都](https://stackoverflow.com/a/12591795/881551)可以正常工作，尽管我喜欢 glivic 较短的表达方式。

这是一个很好的 php 资源： [http ://code.iamcal.com/php/lib_autolink/](http://code.iamcal.com/php/lib_autolink/)

在 Stackoverflow 上重复：

*   [如何用php链接字符串中的url？](https://stackoverflow.com/questions/507436/how-do-i-linkify-urls-in-a-string-with-php)
*   [PHP Linkify 内容中的链接](https://stackoverflow.com/questions/5080826/php-linkify-links-in-content)

体面的深入文章： -http: [//buildinternet.com/2010/05/how-to-automatically-linkify-text-with-php-regular-expressions/](http://buildinternet.com/2010/05/how-to-automatically-linkify-text-with-php-regular-expressions/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-21T22:18:35.703

让我建议一些不那么直截了当的建议：将输入文本拆分为 html 和非 html 部分，然后使用您的正则表达式处理非 html 部分，将文本组合回一个部分。嗯。喜欢：

```
 <?php
  $chunks = preg_split('/(<.*>)/Ums', $_POST['content'], -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);
  $result = '';
  foreach ($chunks as $chunk) {
    if (substr($chunk,0,1) != '<') {
      /* do your processing on $chunk */
    }
    $result .= $chunk;
  } 
```

一些额外的建议：

1.  尝试保存源文本并在显示时进行转换。如果将来您发现新的问题/想法，这将允许您改进/修复您的渲染代码。
2.  (https?://)+ 不应该在括号中，你不需要 +，因为它匹配 "https://https://some.com" - 只需输入 https?://[a-z0 -9_./?=&-]+
3.  (www.)+ 也是一样的 :)*

# math - 截锥体剔除，实现

> ID：12538361
> 
> 赞同：4
> 
> 时间：2012-09-21T21:23:58.970
> 
> 标签：math, opengl, 3d, d, linear-algebra

我目前正在尝试（再次）为我的世界实施平截头体剔除。我的世界由大小为 16x256x16 (x, y, z) 的块组成：

```
Frustum frustum = Frustum(engine.proj * engine.view);

foreach(chunkc, chunk; chunks) {
    vec3i w_chunkc = vec3i(chunkc.x*16, chunkc.y*256, chunkc.z*16);

    AABB aabb = AABB(vec3(w_chunkc), vec3(w_chunkc.x+16, w_chunkc.y+256, w_chunkc.z+16));
    if(aabb in frustum) {
        bind(engine, chunk);

        glDrawArrays(GL_TRIANGLES, 0, cast(uint)chunk.vbo_vcount);
    }
} 
```

`chunkc`保存整个`chunk`例如的坐标`[0, 0, -2]`。因此，要获得块边界框，我必须将这些坐标乘以每个块的大小以获得 AABB 的最小位置，并将大小添加到每个组件以获得最大值。AABB 的位置。然后我对照截锥体检查这个 AABB。

截锥实现：

```
struct Frustum {
    enum {
        LEFT, /// Used to access the planes array.
        RIGHT, /// ditto
        BOTTOM, /// ditto
        TOP, /// ditto
        NEAR, /// ditto
        FAR /// ditto
    }

    Plane[6] planes; /// Holds all 6 planes of the frustum.

    @safe pure nothrow:

    @property ref Plane left() { return planes[LEFT]; }
    @property ref Plane right() { return planes[RIGHT]; }
    @property ref Plane bottom() { return planes[BOTTOM]; }
    @property ref Plane top() { return planes[TOP]; }
    @property ref Plane near() { return planes[NEAR]; }
    @property ref Plane far() { return planes[FAR]; }

    /// Constructs the frustum from a model-view-projection matrix.
    /// Params:
    /// mvp = a model-view-projection matrix
    this(mat4 mvp) {
        planes = [
            // left
            Plane(mvp[0][3] + mvp[0][0], // note: matrices are row-major
                mvp[1][3] + mvp[1][0],
                mvp[2][3] + mvp[2][0],
                mvp[3][3] + mvp[3][0]),

            // right
            Plane(mvp[0][3] - mvp[0][0],
                mvp[1][3] - mvp[1][0],
                mvp[2][3] - mvp[2][0],
                mvp[3][3] - mvp[3][0]),

            // bottom
            Plane(mvp[0][3] + mvp[0][1],
                mvp[1][3] + mvp[1][1],
                mvp[2][3] + mvp[2][1],
                mvp[3][3] + mvp[3][1]),
            // top
            Plane(mvp[0][3] - mvp[0][1],
                mvp[1][3] - mvp[1][1],
                mvp[2][3] - mvp[2][1],
                mvp[3][3] - mvp[3][1]),
            // near
            Plane(mvp[0][3] + mvp[0][2],
                mvp[1][3] + mvp[1][2],
                mvp[2][3] + mvp[2][2],
                mvp[3][3] + mvp[3][2]),
            // far
            Plane(mvp[0][3] - mvp[0][2],
                mvp[1][3] - mvp[1][2],
                mvp[2][3] - mvp[2][2],
                mvp[3][3] - mvp[3][2])
        ];

        normalize();
    }

    /// Constructs the frustum from 6 planes.
    /// Params:
    /// planes = the 6 frustum planes in the order: left, right, bottom, top, near, far.
    this(Plane[6] planes) {
        this.planes = planes;
        normalize();
    }

    private void normalize() {
        foreach(ref e; planes) {
            e.normalize();
        }
    }

    /// Checks if the $(I aabb) intersects with the frustum.
    /// Returns OUTSIDE (= 0), INSIDE (= 1) or INTERSECT (= 2).
    int intersects(AABB aabb) {
        vec3 hextent = aabb.half_extent;
        vec3 center = aabb.center;

        int result = INSIDE;
        foreach(plane; planes) {
            float d = dot(center, plane.normal);
            float r = dot(hextent, abs(plane.normal));

            if(d + r < -plane.d) {
                // outside
                return OUTSIDE;
            }
            if(d - r < -plane.d) {
            result = INTERSECT;
            }
        }

        return result;
    }

    /// Returns true if the $(I aabb) intersects with the frustum or is inside it.
    bool opBinaryRight(string s : "in")(AABB aabb) {
        return intersects(aabb) > 0;
    }
} 
```

和 AABB 实施：

```
struct AABBT(type) {
        alias type at; /// Holds the internal type of the AABB.
        alias Vector!(at, 3) vec3; /// Convenience alias to the corresponding vector type.

        vec3 min = vec3(0.0f, 0.0f, 0.0f); /// The minimum of the AABB (e.g. vec3(0, 0, 0)).
        vec3 max = vec3(0.0f, 0.0f, 0.0f); /// The maximum of the AABB (e.g. vec3(1, 1, 1)).

        @safe pure nothrow:

        /// Constructs the AABB.
        /// Params:
        /// min = minimum of the AABB
        /// max = maximum of the AABB
        this(vec3 min, vec3 max) {
            this.min = min;
            this.max = max;
        }

        /// Constructs the AABB around N points (all points will be part of the AABB).
        static AABBT from_points(vec3[] points) {
            AABBT res;

            foreach(v; points) {
                res.expand(v);
            }

            return res;
        }

        /// Expands the AABB by another AABB.
        void expand(AABBT b) {
            if (min.x > b.min.x) min.x = b.min.x;
            if (min.y > b.min.y) min.y = b.min.y;
            if (min.z > b.min.z) min.z = b.min.z;
            if (max.x < b.max.x) max.x = b.max.x;
            if (max.y < b.max.y) max.y = b.max.y;
            if (max.z < b.max.z) max.z = b.max.z;
        }

        /// Expands the AABB, so that $(I v) is part of the AABB.
        void expand(vec3 v) {
            if (v.x > max.x) max.x = v.x;
            if (v.y > max.y) max.y = v.y;
            if (v.z > max.z) max.z = v.z;
            if (v.x < min.x) min.x = v.x;
            if (v.y < min.y) min.y = v.y;
            if (v.z < min.z) min.z = v.z;
        }

        /// Returns true if the AABBs intersect.
        /// This also returns true if one AABB lies inside another.
        bool intersects(AABBT box) const {
            return (min.x < box.max.x && max.x > box.min.x) &&
                (min.y < box.max.y && max.y > box.min.y) &&
                (min.z < box.max.z && max.z > box.min.z);
        }

        /// Returns the extent of the AABB (also sometimes called size).
        @property vec3 extent() const {
            return max - min;
        }

        /// Returns the half extent.
        @property vec3 half_extent() const {
            return 0.5 * (max - min);
        }

        /// Returns the area of the AABB.
        @property at area() const {
            vec3 e = extent;
            return 2.0 * (e.x * e.y + e.x * e.z + e.y * e.z);
        }

        /// Returns the center of the AABB.
        @property vec3 center() const {
            return 0.5 * (max + min);
        }

        /// Returns all vertices of the AABB, basically one vec3 per corner.
        @property vec3[] vertices() const {
            return [
                vec3(min.x, min.y, min.z),
                vec3(min.x, min.y, max.z),
                vec3(min.x, max.y, min.z),
                vec3(min.x, max.y, max.z),
                vec3(max.x, min.y, min.z),
                vec3(max.x, min.y, max.z),
                vec3(max.x, max.y, min.z),
                vec3(max.x, max.y, max.z),
            ];
        }

        bool opEquals(AABBT other) const {
            return other.min == min && other.max == max;
        }
    }

    alias AABBT!(float) AABB; 
```

到目前为止，在理论上，不幸的是我得到了完全错误的结果，在某些方向（`z-`和`x+`）整个世界消失了，在所有其他方向上什么都没有被剔除。

我希望你们中的任何人都知道为什么这不起作用。

**编辑（检查 AABB 和 Frustum 的不同方法）：**

```
bool intersects2(AABB aabb) {
    foreach(plane; planes) {
        if(plane.a * aabb.min.x + plane.b * aabb.min.y + plane.c * aabb.min.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.max.x + plane.b * aabb.min.y + plane.c * aabb.min.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.min.x + plane.b * aabb.max.y + plane.c * aabb.min.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.max.x + plane.b * aabb.max.y + plane.c * aabb.min.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.min.x + plane.b * aabb.min.y + plane.c * aabb.max.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.max.x + plane.b * aabb.min.y + plane.c * aabb.max.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.min.x + plane.b * aabb.max.y + plane.c * aabb.max.z + plane.d > 0 )
            continue;
        if(plane.a * aabb.max.x + plane.b * aabb.max.y + plane.c * aabb.max.z + plane.d > 0 )
            continue;
        return false;
    }
    return true;
} 
```

**编辑 2（示例输入）：**

这是一个MVP：

`[[1.18424,0,0.31849,-331.577], [0.111198,1.51016,-0.413468,-88.5585], [0.251117,-0.274135,-0.933724,214.897], [0.249864,-0.272768,-0.929067,215.82]]`

还有一个可能失败的AABB： `min: (14*16, 0, 13*16) max: (14*16+16, 256, 13*16+16)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T13:45:20.077

好的，我现在有答案了……我没有想到，这是一件非常愚蠢的事情。

我做了“彼得亚历山大”的建议并尝试调试一切......我最终发现平截头体平面完全错误（左右平面法线指向同一方向）所以我弄乱了我的代码和其他示例代码并发现，矩阵没有转置（我将其存储为 row-major，opengl 存储为 column.major），所以很简单：`mvp.transpose()`在 Frustum-Ctor 中修复了我的 frustum。

谢谢你的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T23:01:53.803

您的点积方法确实有效（制作了一个小[jsfiddle](http://jsfiddle.net/VS7Uf/)来测试它），但在我看来，您的截锥体设置不正确：

```
Frustum(engine.proj * engine.view) 
```

代替：

```
Frustum(engine.model * engine.view * engine.proj) 
```

注意**顺序**（[矩阵是反交换的！](http://en.wikipedia.org/wiki/Matrix_multiplication#All_matrices)）和**模型矩阵的附加乘法，**以便您创建 MVP 矩阵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:26:58.500

我发现您初始化`AABB`课程的方式存在问题。我不知道这是否是导致您的问题的原因，但无论如何都值得修复（以防止有时意外使用损坏的初始化程序）。

对于默认值`AABB`（这似乎是您在制作一个时开始使用的`from_points()`），两个角都设置为`(0,0,0)`-- 因此，当以这种方式构造时，每个 AABB 都必须包含原点。

如果必须`AABB`像这样设置默认值，则需要设置默认值`min=(infinity,infinity,infinity)`和`max=(-infinity,-infinity,-infinity)`.

# salesforce - 顶点中的等待通知或睡眠结构缺失？

> ID：12538363
> 
> 赞同：1
> 
> 时间：2012-09-21T21:24:09.363
> 
> 标签：salesforce, apex-code

我似乎无法在 API 中找到这些类型的方法......我需要做的是让一个线程等到另一个线程完成，然后继续。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T01:16:00.453

由于没有用于启动线程的 API，因此没有用于跨线程同步的 API。

# textmate - TextMate 2 的 indentOnPaste 有哪些选项，或者我如何完全禁用它？

> ID：12538366
> 
> 赞同：4
> 
> 时间：2012-09-21T21:24:28.500
> 
> 标签：textmate, textmate2

在 TextMate 2 中打字曾经是一次缩进挫折的冒险，现在可以通过全局 disableIndentCorrections 设置来解决。然而，粘贴代码似乎总是以非常错误的缩进级别结束。这让我发疯。

我遇到了以下设置：

```
{   disableIndentCorrections = :true;
    indentOnPaste = 'default';
} 
```

在搜索中，我看到`indentOnPaste`设置为`'default'`or `'simple'`，这两个选项都有代码向右跳转多个选项卡，而实际上确实不应该。

有人知道如何禁用粘贴缩进吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-28T11:15:10.963

1.  按`⌘</kbd>-`⌥</kbd>-`⌃</kbd>-`B` to enter the Bundle Editor.```
2.  选择`Text`➜<code>Settings➜<code>禁用缩进校正。
3.  在右窗格中，删除该`Scope Selector`字段的内容以使这些设置全局应用。

默认情况下，所选项目的内容应如下所示：

```
{   disableIndentCorrections = :true;
    indentOnPaste = 'simple';
} 
```

所以没有必要修改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T00:18:29.500

取自 r9283 发行说明：

* * *

将 disableIndentCorrections 拆分为两个设置：

disableIndentCorrections 设置禁用 TextMate 在您键入时所做的（积极的）缩进更正。

附加的 indentOnPaste 设置控制粘贴时如何缩进，可以设置为：

1.  `simple`— 这是之前设置 disableIndentCorrections 时隐含的缩进行为。它将粘贴缩进到插入符号的位置，并且适用于 Python。
2.  `disable`— 文本按原样插入而不缩进。
3.  «unset» — 根据当前范围的缩进模式缩进粘贴。

# c# - 使用 CredEnumerate 拉取 WebCredentials

> ID：12538367
> 
> 赞同：1
> 
> 时间：2012-09-21T21:24:29.810
> 
> 标签：c#, security, winapi, windows-8, internet-explorer-10

作为密码管理工具的一部分，我尝试使用`CredEnumerate`. 当我调用时`CredEnumerate`，它会从“凭据管理器”的“Windows 凭据”部分中生成多个用户名（通用用户名和域用户名），但不包括“凭据管理器”的“Web 凭据”部分中的任何内容（控制面板\用户帐户和家庭安全\凭据管理器）。

```
private static void Main()
{
    int count;
    IntPtr pCredentials;
    bool ret = CredEnumerate(null, 1, out count, out pCredentials);
    // ...
} 
```

如何访问 Web 凭据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:51:13.647

最简单的解决方案是使用密码库，`Windows.Security.Credentials.PasswordVault`. 当然，这个命名空间是特定于 Windows 8 的。

# playframework-2.0 - 电子邮件模板作为 Play 中的 Scala 模板？

> ID：12538368
> 
> 赞同：13
> 
> 时间：2012-09-21T21:24:35.833
> 
> 标签：playframework-2.0

在播放 1.2.4。[您可以使用标准模板机制和语法（链接](http://www.playframework.org/documentation/1.2.4/emails)）发送复杂的、动态的电子邮件，虽然我没有使用过，但这看起来很酷。Play2.0的[mailer插件能做这些吗？](https://github.com/typesafehub/play-plugins/tree/master/mailer)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-22T12:14:11.130

如果您所说的“复杂、动态的电子邮件”是指基于模板的 HTML 电子邮件正文，那么您可以对 Play 2.0 执行相同的操作。

您只需要基于模板创建一个新视图，例如`mailBody.scala.html`：

```
@(user:User)

<h3>Welcome @user.name</h3>
<br/>
.... 
```

然后，在您发送电子邮件的方法中，您只需调用`render()`视图的方法：

```
public static void sendMail(User user) {

   MailerAPI mail = play.Play.application().plugin(MailerPlugin.class).email();
   mail.setSubject(...);
   mail.addRecipient(user.email);
   mail.addFrom(...);

   String body = views.html.mailBody.render(user).body();
   mail.sendHtml(body);

} 
```

# javascript - jQuery查找文本字段

> ID：12538371
> 
> 赞同：1
> 
> 时间：2012-09-21T21:24:43.587
> 
> 标签：javascript, jquery

以下代码可以很好地找到保存在标签字段中的价格值。但是我需要在文本区域中保存数量，但它不起作用。

有任何想法吗？

Javascript：

```
 var price = parseInt(ui.draggable.find(".price").html().replace("$ ", ""));
 var qty = parseInt(ui.draggable.find(".qty").html()); 
```

的HTML：

```
<label class="price">$ 100</label>
  <input name="qty_1" type="text" class="qty" id="qty_1" value="1" size="2" maxlength="2"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:26:26.283

对于设置/获取表单元素的值，`val`应该使用方法而不是`html/text`.

```
var qty = parseInt(ui.draggable.find(".qty").val(), 10); 
```

您还应该指定`radix`in `parseInt`。

> `parseInt(string[, radix])`
> 
> `radix`：一个整数，表示上述字符串的基数。虽然此参数是可选的，但始终指定它以消除读者混淆并保证可预测的行为。当未指定基数时，不同的实现会产生不同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:00:16.827

另一种解决方案

```
var
    price     = $(".price").html().replace('$ ',''),
    price_val = parseInt(price),
    qty       = $("input[name='qty_1']"),
    qty_val   = parseInt(qty[0].value)
; 
```

您可以将它们合并为两行，但有时使用扩展代码进行调试更容易。

# setup-project - Windows 安装项目无法更新内容文件

> ID：12538373
> 
> 赞同：1
> 
> 时间：2012-09-21T21:25:01.817
> 
> 标签：setup-project, setup-deployment

我在 Visual Studio 2012 中有一个 .NET 4.0 解决方案，其中包含两个项目和一个安装项目。项目 A 是一个 Windows 窗体应用程序。项目 B 是一个类库，由项目 A 引用。项目 B 有一个 *.txt 文件，标记为*Content的**Build Action*和*Copy to Output*设置为*Copy Always*。

 ***在新安装上，一切正常。但是，当安装预先存在并且部署涉及对 txt 文件的更改时，安装程​​序无法升级预先存在的 txt 文件。如果我卸载/重新安装正确版本的 txt 文件，则会部署。

我正在经历的部署过程是：

1.  增加项目 A 和 B 的每个程序集的文件版本
2.  增加安装项目的版本

我敢肯定，如果我做了一些愚蠢的事情，比如增加 txt 文件名，一切都会奏效。为了确保内容文件得到更新，我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:28:07.680

这是由已知的 Windows 安装程序限制引起的： http: [//setupanddeployment.com/windows-installer-bugs/missing-files-upgrade](http://setupanddeployment.com/windows-installer-bugs/missing-files-upgrade)

一种解决方案是为您的 TXT 文件修改[文件表中的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368596%28v=vs.85%29.aspx)**版本**列。如果您设置版本，则包中的文件应覆盖任何现有文件。***

# android - 安装应用程序时强制删除数据应用程序文件夹

> ID：12538375
> 
> 赞同：-2
> 
> 时间：2012-09-21T21:25:19.093
> 
> 标签：android

我做了一个在应用程序数据文件夹中复制文件的应用程序，但我需要当我用新版本覆盖我的应用程序时，必须删除数据文件夹。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:35:41.557

编辑：我误解了。所以问题是，您希望*您的应用程序*检测到它安装了新版本，然后删除该文件？

无法在安装时执行该操作，但您可以在首次运行应用程序的新版本时执行该操作。当它运行时，执行以下操作。

3 个步骤： - 安装您的应用程序后，将 SharedPreference 与您的应用程序的当前版本一起存储。您可以对此进行硬编码，也可以使用以下方法从 PackageManager 中提取它：

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
version = pInfo.versionName; 
```

- 每次您的应用程序启动时，检查 SharedPreference 与应用程序的当前版本。如果它们匹配，则什么也不做。

-如果它们**不**匹配，则设备上有您的应用程序的新版本！删除您要删除的文件，并更新 SharedPreference 以包含您的应用程序的新版本号。

# php - ZenCart 丢失文件位置

> ID：12538376
> 
> 赞同：0
> 
> 时间：2012-09-21T21:25:26.737
> 
> 标签：php, file, zen-cart

一年多以前，我在使用 ZenCart，并且在任何形式的编码方面都是一个令人难以置信的新手。我为我编写的一段非常复杂的 PHP 设置了一个 EZ-Page，并保存了它。该页面今天仍然可以正常工作（减去一些我现在知道如何修复的错误） - 但是，我希望将其迁移到工作站点。不幸的是，我找不到实际的 PHP 代码是在哪里编写的。

在编辑器中查看 EZ-Page 显示没有链接目标，也没有内容

URL 是 Site.com/index.php?main_page=pagename

知道 FTP 在哪里或我可以在哪里恢复此代码吗？！？！

（我现在已经搜索了 45 分钟以上......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:55:08.970

解决了：

旧版本的 ZenCart 将这些文件放在：

```
<ROOT>/includes/templates/<YOUR TEMPLATE>/templates 
```

# cakephp - CakePHP：读取组件中的当前模型数据？

> ID：12538380
> 
> 赞同：-2
> 
> 时间：2012-09-21T21:25:49.133
> 
> 标签：cakephp

创建自己的组件的文档很糟糕。

如何读取组件内的模型数据？

尝试做一些简单的事情，例如尝试获取 $this->request->params['pass'][0] 让我想自杀。考虑到组件应该插入控制器，我很惊讶它是如此困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:40:43.640

你为什么不使用现有的信息？例如，您可以直接查看代码。它是开源的，易于通过 github 浏览：

[https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Controller/Component/PaginatorComponent.php#L226](https://github.com/cakephp/cakephp/blob/2.3/lib/Cake/Controller/Component/PaginatorComponent.php#L226)

在那里，您会发现可以从任何 API 或文档中获得的更多信息。例如，使用

```
public function __construct(ComponentCollection $collection, $settings = array()) {
    $settings = array_merge($this->settings, (array)$settings);
    $this->Controller = $collection->getController();
    parent::__construct($collection, $settings);
} 
```

进而

```
$this->Controller->... 
```

在代码中的任何地方，您都可以从当前控制器访问几乎任何内容。就像你在这个控制器里面一样。

同样：

```
$this->Controller->request->params['pass'][0] 
```

要不就

```
$this->Controller->request->pass[0] 
```

PS：除了所有这些测试用例之外，还有超过 6 个其他组件可供学习。

# android - 无法在 Eclipse 中运行 traceview 以进行 android 分析

> ID：12538382
> 
> 赞同：1
> 
> 时间：2012-09-21T21:26:01.347
> 
> 标签：android, eclipse, eclipse-plugin, profiling

我单击配置文件线程开始，停止分析后，我得到一个新选项卡：

```
 java.lang.RuntimeException: Method exit (android/os/Debug.isMethodTracingActive ()Z) does not match current method (dalvik/system/VMDebug.isMethodTracingActive ()Z)
at com.android.traceview.ThreadData.exit(ThreadData.java:106)
at com.android.traceview.DmTraceReader.parseData(DmTraceReader.java:323)
at com.android.traceview.DmTraceReader.generateTrees(DmTraceReader.java:92)
at com.android.traceview.DmTraceReader.<init>(DmTraceReader.java:87)
at com.android.ide.eclipse.traceview.editors.TraceviewEditor.createPartControl(TraceviewEditor.java:258)
at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:670)
at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
at org.eclipse.ui.internal.EditorReference.getEditor(EditorReference.java:289)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2945)
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850)
at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842)
at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2793)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2756)
at org.eclipse.ui.ide.IDE.openEditorOnFileStore(IDE.java:1155)
at com.android.ide.eclipse.traceview.TraceviewLauncher$1.run(TraceviewLauncher.java:65)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3563)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3212)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

而不是分析视图

知道哪个库丢失或版本无效吗？我有 eclipse 3.7.2 和最新的 andoid 版本 20.0.3 和平台工具 14，并在我的项目中使用 Android 4.0.3。操作系统 Ubuntu 12.04 64 位。Sun 热点和 OpenJDK 都出现同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T08:44:39.010

您是否在 Intel x86 Emulator 映像中运行您的应用程序？

如果是，这可能是原因。至少我只是被这个错误所困扰，但是当我尝试在基于 ARM 的仿真器映像中重复分析时一切顺利，一切正常！

# php - PHP MYSQL 配置更新语句

> ID：12538396
> 
> 赞同：1
> 
> 时间：2012-09-21T21:26:55.060
> 
> 标签：php, mysql, sql-update

我有以下`if statement`适用于 an`insert`但我似乎无法让它只使用未插入的项目更新表：

**插入：**

```
 for($i=0; $i<count($fields['Occupation']); $i++) {
            $id = $fields['Occupation'][$i];

           CMS::insertQuery("INSERT INTO {table} SET canid=?, categoryid=?", array($emailCheck['id'], $id));
        }
            echo 'found update'; 
```

我尝试了以下**更新**行，但没有成功。

```
CMS::updateQuery("UPDATE {refocus_candidate_category} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?", array($emailCheck['id'], $id)); 
```

**完整声明：**

```
$catParams = array_merge(array($emailCheck['id']), $fields['Occupation']);
$catPlaceholders = '?'.str_repeat(',?',count($fields['Occupation'])-1);

$catCheck = CMS::selectQuery("SELECT * FROM {table} WHERE canid=? AND categoryid IN (".$catPlaceholders.")", $catParams);

if($catCheck != FALSE)
{
    for($i=0; $i<count($fields['Occupation']); $i++) {
        $id = $fields['Occupation'][$i];

        CMS::updateQuery("UPDATE {table} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?", array($emailCheck['id'], $id));
    }
        echo 'found update'l
}else{
    for($i=0; $i<count($fields['Occupation']); $i++) {
        $id = $fields['Occupation'][$i];

        CMS::insertQuery("INSERT INTO {table} SET canid=?, categoryid=?", array($emailCheck['id'], $id));
    }
    echo 'else insert';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:30:12.690

我猜你需要类似下面的代码：

```
CMS::updateQuery("UPDATE {refocus_candidate_category} SET canid=?,
                  categoryid=? WHERE canid=? AND categoryid=?",
                  array($emailCheck['id'], $id, $emailCheck['id'], $id)
                ); 
```

`?`基本上，您需要与`UPDATE`语句中一样多的数组元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:29:24.677

好像你是两个数组项短：

```
CMS::updateQuery("UPDATE {refocus_candidate_category} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?", array(
    emailCheck['id'], $id, ,'canid', 'cat_id number here');
); 
```

# java - 在 JSF 应用程序中嵌入 GWT 小部件

> ID：12538400
> 
> 赞同：0
> 
> 时间：2012-09-21T21:27:44.127
> 
> 标签：java, jsf, gwt

在现有应用程序 (JSF) 中，我想用 GWT 中实现的一个小部件替换一个小部件。我还想重用托管 bean 中实现的现有逻辑。服务器上的逻辑需要的不仅仅是来自小部件的数据才能工作（因此它需要用户操作提交的所有内容） - 我不能只使用 GWT-RPC 或类似机制（因为我不会获得 JSF 数据）。

问题是：如何将数据从 GWT 传递到服务器，以便在处理提交的 JSF 操作的同一位置由 GWT 小部件编辑后，我可以访问（在服务器上）java 对象？

编辑：

想象一下，有一个由 JSF 生成的巨大表格，以及一个用 GWT 编写的带有位置选择器的小而精美的地图。当用户单击“提交”时，我想基于表单和地图生成一些数据（在服务器上）——我需要以相同的方法同时从地图中获取表单内容和位置。问题是 - 如何实现这一目标？（这只是一个例子，GWT 小部件比简单的位置选择器复杂得多）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:33:58.617

您可以使用[RequestBuilder](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/http/client/RequestBuilder.html)从您的 GWT 客户端代码中调用服务器端逻辑。如果服务器端有一个 RESTful 端点，它应该相对容易。如果后端是使用 SLSB 编写的，我会考虑服务器端的一些中间层（与 GWT 通信），因为 afaik，会话 bean 不可能（或几乎不可能）直接从 JavaScript 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T08:10:25.150

我假设您正在提交 HTML 表单^(（如果没有，请说明您当前如何将数据传输到服务器）)？

如果是，那么您可以在现有表单中添加一个隐藏的输入元素，并让 GWT 小部件在小部件的状态发生变化时更改该隐藏元素的值（例如，在 ClickHandler 中）。

# vim - Vim 正则表达式搜索历史没有按预期工作

> ID：12538401
> 
> 赞同：2
> 
> 时间：2012-09-21T21:27:47.127
> 
> 标签：vim

在 Vim 中使用正则表达式搜索时，我总是可以选择按向上和向下箭头来循环浏览我最近对该特定文件进行的所有搜索。出于某种原因，现在当我按向上箭头时，我看到字母 A，当我按下时看到字母 B。我没有改变我的 .vimrc 或任何东西。是否有一些我可能不小心打开的选项会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:31:26.590

确保`compatible`未设置。

```
set nocomaptible 
```

还要确保您的终端设置正确。（当您在正常模式下使用箭头键时，它们会起作用，还是会出现奇怪的行为？）

# regex - 复杂的正则表达式 - 在列表中查找最近的日期

> ID：12538407
> 
> 赞同：2
> 
> 时间：2012-09-21T21:28:12.553
> 
> 标签：regex, ftp

我正在使用具有一些 FTP 功能的第 3 方 ETL 工具，但它们是最小的（它称为 Pentaho）。

我需要做的就是从 ftp 站点下载最新的 zip 文件。站点内容如下所示：

```
...
File:tfo.supplement.20120901.done   9/1/2012    3:48:00 AM
File:tfo.supplement.20120901.zip    421144 KB   9/1/2012    3:48:00 AM
File:tfo.supplement.20120904.done   9/4/2012    3:57:00 AM
File:tfo.supplement.20120904.zip    421794 KB   9/4/2012    3:57:00 AM
File:tfo.supplement.20120905.done   9/5/2012    3:28:00 AM
File:tfo.supplement.20120905.zip    421875 KB   9/5/2012    3:28:00 AM 
```

所以，在这种情况下，我想要 tfo.supplement.20120905.zip 文件。

3rd 方工具仅提供一个获取文件选项，该选项采用文件夹和正则表达式。它将抓取目标 FTP 站点文件夹中与正则表达式匹配的所有文件。

有人告诉我，可以制作一个真正比较不同匹配选项并输出最大匹配选项的正则表达式。例如，获取所有以 .zip 结尾的 tfo.supplement.* 文件并将中间的日期视为整数，选择具有最大整数的日期。

我不知道正则表达式可以支持这种功能。有人可以帮我构建一个可以在这个用例中使用的表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:07:43.207

你在寻找这样的东西吗？>>

```
s/\s(\d+)\/(\d+)\/(\d{4})\s/{$d = 10000*$3+100*$1+$2 if $d < 10000*$3+100*$1+$2}/eg; 
```

[在此处](http://ideone.com/PtyDn)测试此代码。

# c# - ActiveX COM 未释放所有对象

> ID：12538411
> 
> 赞同：2
> 
> 时间：2012-09-21T21:28:46.513
> 
> 标签：c#, com, activex, unmarshalling

我有一个问题可能对我来说太具体了，无法在这里获得任何帮助，但我想我会尝试的。我已经使用放置在我的 UI 中的 COM 对象创建了一个 ActiveX 连接。包装器实现 AxHost。我遇到的问题是，当我关闭 COM 对象所在的视图，然后尝试重新打开它时，我无法登录。

我是 ActiveX 和 COM 的新手，但我发现我没有正确关闭所有对象。我已经阅读并尝试了几种解决方案，但它们似乎都不起作用。目前，我已经重写了包装器 Dispose 方法以尝试破坏连接，如下所示：

```
protected override void Dispose(bool disposing)
    {
        Marshal.FinalReleaseComObject(ocx);
        base.Dispose(disposing);
    } 
```

据我所知，ocx 是唯一创建的 COM 对象。在视图类中，我还尝试摆脱对 COM 对象的所有引用，如下所示：

```
protected void FormClosing(object sender, FormClosingEventArgs e)
    {
            try
            {
                wrapper.CloseCanvasPage(canvasPageId, false);
                IsLoggedIn = !wrapper.Logout();
                wrapper.EndInit();
                wrapper.Dispose();
                wrapper = null;

                //  Garbage collect the unclosed ActiveX connections.
                GC.Collect();
                GC.WaitForPendingFinalizers();
            }
            catch (Exception ex) { }
        }
    } 
```

我意识到手动调用垃圾收集是不好的，但有几篇文章说这将摆脱杂散连接。它似乎不起作用。

在父级中，我在视图上调用 Dispose，并将其设置为 null，试图断开任何连接，但我仍然有一些东西在附近。当我尝试创建新连接并调用 Initialized（我正在使用的包装器中包含的属性）时，我收到 COM 对象已初始化的通知。但是，如果我尝试登录，我会收到一个错误代码，指出它未初始化。

有没有人对我可能犯的任何明显（或不那么明显）的错误有想法？如果有帮助，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:21:54.223

据我所知，您正在正确地收集对象。我唯一能建议的是使用 C++/CLI 作为包装器。这样，您就不会对 COM 对象使用 RCW（运行时可调用包装器），而是直接使用 COM 对象。您可以直接调用 IUnknown::Release。但我不确定多次调用 IUnknown::Release 直到引用计数为 0（如 FinalReleaseComObject）是否是个好主意。如果必须这样做，则意味着某些代码忘记了释放对象（内存泄漏），使用 FinalReleaseComObject 是解决问题的糟糕方法。

您的 Initialized 属性也可能有问题，但我对此一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T11:49:08.023

根据我的经验（虽然从前一段时间），如果你真的想摆脱所有挥之不去的对象，你必须调用 GC.collect() 两次。

# jquery - MVC jquery 调用动作控制器不工作

> ID：12538414
> 
> 赞同：0
> 
> 时间：2012-09-21T21:28:59.870
> 
> 标签：jquery, asp.net-mvc

我有一些下面显示的 jquery 需要运行我的 mvc 操作并返回视图。

```
 $("#workspaces").change(function () {
    var workspaceId = $('#workspaces').val();
    var url = '@Url.Action("SingleWorkspace", "Workspaces", new { id = workspaceId })';
    $.ajax({
        url: url,
        success: function () { alert("true"); }
    });
}); 
```

基本上我遇到的第一个问题是，如果在其上方声明了 var，它无法识别 url 操作中的 workspaceId。

其次，这是一个局部视图，因为它是一个下拉菜单。那么通过调用上面的 url.action 会如何加载页面呢？

任何帮助，将不胜感激

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:41:03.633

```
 var workspaceId = $('#workspaces').val();  
   var url = '@Url.Action("SingleWorkspace", "Workspaces", new { id = workspaceId })'; 
```

`Url.Action`- 是服务器代码（ASP.NET MVC 助手）并`workspaceId`在客户端上选择，这就是为什么`url`不能在这里创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:42:22.410

首先，`workspaceId`是在客户端定义的，而是在服务器上运行的，因此在代码执行`@Url.Action`时该变量不存在。`@Url.Action`您希望将`workSpaceId`jQuery ajax 调用的 data 属性改为发送，或者将 附加`workspaceId`到客户端上的 url javascript 变量中。

其次，例如，如果动作返回一个局部视图，那么 jQuery 成功处理程序将接收一个 html 字符串，您可以将其注入到一个元素中，例如`div`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:42:40.340

你不能在 javascript 中那样做。您可以做的是获取`SingleWorkSpace`操作方法的路径并将其附加`workspaceId`到该路径。

```
var url = "@Url.Action("SingleWorkspace", "Workspaces")/"+workspaceId; 
```

或者

```
var url = "@Url.Action("SingleWorkspace", "Workspaces")?id="+workspaceId; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T08:23:59.807

您可以使用以下内容：

```
var workspaceId = $('#workspaces').val();
var url = '@Url.Action("SingleWorkspace", "Workspaces", new { id = "__id__" })'
    .replace('__id__', workspaceId); 
```

# unit-testing - 什么是 ON 单元？

> ID：12538420
> 
> 赞同：10
> 
> 时间：2012-09-21T21:29:32.220
> 
> 标签：unit-testing, testing, language-agnostic, white-box-testing

[软件测试的艺术包含对“](https://rads.stackoverflow.com/amzn/click/com/1118031962) *ON* -units”的几个引用。这是测试用例设计部分的示例：

> 决策覆盖通常可以满足语句覆盖。由于每条语句都位于从分支语句或程序入口点发出的某个子路径上，因此如果执行每个分支方向，则必须执行每条语句。但是，至少有三个例外：
> 
> *   没有决定的程序。
> *   具有多个入口点的程序或子例程/方法。仅当在特定入口点输入程序时，才可能执行给定的语句。
> *   *ON*单位内的语句。遍历每个分支方向不一定会导致执行所有*ON*单元。

我以前没见过*ON* -unit 这个词，我在谷歌上找不到定义。什么是*ON*单元？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T21:47:14.890

*ON-unit*是[PL/I 语言](https://en.wikipedia.org/wiki/PL/I#On-Units_and_exception_handling)中的一种异常处理方法，就像`catch`更现代语言中的块一样。所以听起来好像他们在说执行代码的每个分支（在 ON 单元之外）不一定会触发所有已处理的异常（在 ON 单元内）。

# compatibility - 在 RHEL5 上运行 G-WAN？

> ID：12538422
> 
> 赞同：1
> 
> 时间：2012-09-21T21:29:35.753
> 
> 标签：compatibility, rhel5, g-wan

我想尝试 G-WAN，但我们的服务器在 RHEL5 上运行。我知道 G-WAN 在 G-WAN 3 中需要 glibc 2.11 (GLIBC_2.6)。是否有 RHEL5 的版本、源代码、G-WAN 2 或任何其他方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T07:06:58.847

什么是 GLIBC 版本`RHEL5`？

查看最新的 G-WAN 机器代码，我发现只有少数调用 GLIBC > 2.0，因此可以通过动态链接解决此问题。我会努力让它在下一个版本中工作，但要“确定”它对你有用，我们需要知道你的 GLIBC 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:04:08.093

我也有这个问题。这是交易.. glibc 需要升级，这是系统范围的。如果你升级它，你最终会破坏很多其他的东西。

我的建议是升级 RHEL，在 RHEL 安装的虚拟化环境中尝试，或者看看是否可以在不同的机器上进行。

就我而言，我们最终迁移到了另一台机器。

# python - 如何在 Python 中运行程序。

> ID：12538425
> 
> 赞同：0
> 
> 时间：2012-09-21T21:29:57.643
> 
> 标签：python, py2exe

我正在尝试制作一个可以从我的计算机运行 .exe 文件的脚本。我想我使用了错误的命令。我尝试了所有其他命令，例如`import os, os.startfile`，但它们不起作用。

这是我的代码：

```
loop=0
while loop==0:
    answer=raw_input("coded by: Narralol\n\n"
    "Pick a task:\n"
    "1) Start Minecraft.exe\n"
    "2) Start Minecraft_Server.jar\n"
    "3) Backup your server\n"
    "4) Copy the backup to your desktop\n"
    "5) Exit\n")
    if answer==1:
        execfile('D:\Games\Minecraft\Minecraft.exe')
    elif answer==2:
        execfile('D:\Games\Minecraft\Minecraft_server.jar')
    elif answer==5:
        loop=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:31:57.357

使用该[`subprocess`模块](http://docs.python.org/library/subprocess.html)运行外部命令：

```
import subprocess

    subprocess.call('D:\Games\Minecraft\Minecraft.exe') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:35:50.897

您可以像这样使用[os.system()](http://docs.python.org/library/os.html#os.system)（注意：通常最好`subprocess`用于做这样的事情）：

```
answer = 0
while answer < 5:
    answer = int(raw_input("coded by: Narralol\n\n"
    "Pick a task:\n"
    "1) Start Minecraft.exe\n"
    "2) Start Minecraft_Server.jar\n"
    "3) Backup your server\n"
    "4) Copy the backup to your desktop\n"
    "5) Exit\n").strip())
    if answer == 1:
        os.system('D:\Games\Minecraft\Minecraft.exe')
    elif answer == 2:
        os.system('D:\Games\Minecraft\Minecraft_server.jar')
    elif answer == 5:
        break 
```

更改了代码中的其他一些小事情，例如检查一个 int 与另一个 int（而不是 string 与一个 int）等。

# php - Drupal 7 使用 audiofieldrecorder 模块拒绝访问最近的日志消息

> ID：12538428
> 
> 赞同：0
> 
> 时间：2012-09-21T21:30:04.907
> 
> 标签：php, permissions, drupal-7, access-denied

尝试使用使用 nanogong 录音机的 Drupal 的 audiorecorderfield 模块进行录音时，我得到白噪声。

这是最近的日志消息；

```
access denied   09/21/2012 - 22:16 node/add/gong/i18n/NanoGong_en_GB.properties  Anonymous (not verified)
access denied   09/21/2012 - 22:16 node/add/gong/i18n/NanoGong_en_GB.class  Anonymous (not verified)
access denied   09/21/2012 - 22:16 node/add/gong/i18n/NanoGong_en.properties    Anonymous (not verified)
access denied   09/21/2012 - 22:16 node/add/gong/i18n/NanoGong_en.class Anonymous (not verified)
access denied   09/21/2012 - 22:16 node/add/gong/i18n/NanoGong.class    Anonymous (not verified) 
```

顶部访问被拒绝错误

```
node/add/gong/i18n/NanoGong_en.properties
10  node/add/gong/i18n/NanoGong_en_GB.properties
6   node/add/gong/i18n/NanoGong.class
6   node/add/gong/i18n/NanoGong_en.class
6   node/add/gong/i18n/NanoGong_en_GB.class
2   node/add/record-podcast 
```

我已经尝试重建权限并仔细检查所有角色的权限是否正确 - 但没有运气。有谁知道这可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:53:51.737

问题实际上出在 Windows 7 方面。由于某种原因，我的录音机无法正常工作。

# c# - 带有转义变量的字符串连接

> ID：12538440
> 
> 赞同：2
> 
> 时间：2012-09-21T21:30:50.880
> 
> 标签：c#, sql, sql-server, string

比较简单的问题

我有一个类似于以下的 SQL 字符串：

```
query = "select * from table_name where name ='"+varName+"' and 
date ='"+varDate+"' order by state desc"; 
```

*varName*和*varDate*是从另一个数据库表上的先前选择查询中定义的。它们的值可能包含 ' : / 和其他特殊字符。

有没有办法通过使用 C# 或 SQL 来“转义”上述 select 语句中的 varName、varDate 的内容？

我不想隐藏特殊字符:)

编辑：

忘了包括 - 设置是 MSSQL

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T21:36:51.987

您可以使用任何相当成熟的 API 参数化您的查询。ADO.NET 中提供了这种支持：

```
string query = "select * from table_name where name = @name and date = @date order by state desc";
using (SqlCommand cmd = new SqlCommand(query))
{
  cmd.Parameters.Add("@name", name);
  cmd.Parameters.Add("@date", date);
  using (SqlDataReader reader = cmd.ExecuteReader())
  { ... }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:36:07.807

我会把它编译在一个存储过程中

注意：不管转义，你当前的代码对于 sql 注入都是开放的

# x86 - CriticalSection：多核 CPU 的性能问题是什么？

> ID：12538442
> 
> 赞同：1
> 
> 时间：2012-09-21T21:31:10.723
> 
> 标签：x86, arm, critical-section

我不关心多个线程尝试获取 CS 的情况。一个线程锁定和解锁 CS 的情况怎么样？我对它在当前多核 CPU（在 x86 和 ARM 中）中的工作方式特别感兴趣。

根据我的简单猜测，我认为有一个锁计数，当一个线程尝试获取一个 CS 时，它会互锁交换/添加。这种交换/添加是否会以任何方式影响其他核心/线程？例如，核心有自己的内存缓存（我正确吗？）并且互锁的交换/添加需要与所有其他核心交互，以确保内存没有缓存在其他地方。

我认为，最好添加一个不会有多个线程来访问数据的 CS，而不是错过一个可能很少使用多个线程的 CS。但是我想验证如果有一个线程进入/存在一个循环中的 CS，那么其他内核/线程不会因为幕后的 CPU 间同步而停止。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T18:41:22.077

内核不共享单个缓存的 SMP 系统需要为内存位置同时存在于多个缓存中的可能性提供缓存一致性逻辑。如果您的关键部分实现为自旋锁，这甚至不是理论上的，但很有可能。

由于缓存的同步，互锁交换/添加可能非常昂贵。在 NUMA 系统中尤其如此，其中一些核心对之间的链接比其他核心要慢得多。

ARM 已经`SWP`用一种稍微[不同的策略](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204f/Cihbghef.html)取代了指令（互锁交换），这种策略应该会便宜很多。

要回答您关于关键部分的相对性能的问题，它的重量取决于它的实现方式。现代 Linux 系统检查用户空间中的锁，并且只在竞争情况下调用内核（例如等待或解除阻塞等待者）。这意味着您可以随意使用临界区，而不必太担心成本（尤其是在 ARMv7 系统上）。

其他操作系统在内核空间中实现了全部功能，这使得对关键部分的任何操作都变得昂贵。

如果有任何潜在的竞争条件发生，您需要防范它。如果您对此的性能感到担忧，请考虑更改您的体系结构以使用队列来解耦线程。

# java - 如何更改 Java 中的接口及其后果？

> ID：12538445
> 
> 赞同：3
> 
> 时间：2012-09-21T21:31:27.743
> 
> 标签：java, interface

在应用程序中更改接口的最佳实践是什么。如果该接口已由许多 Java 类实现，那么更改它的最佳方法是什么？你打算扩展到一个新的班级吗？你打算使用任何设计模式吗？还是您使用委托（我认为没有任何方法可以使用委托）？您是否要使用已弃用的注释？

这是最好的解决方案吗？

```
public interface interface1
{
}

public interface interface2 extends interface1
{
public void newMethod()
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:34:28.603

有两种方法立即浮现在脑海中。

1.  在您的 IDE 中，使用重构工具来更改界面。更高级的 IDE（Eclipse 可以——我不知道其他的）可以立即重构任何已知的实现。这要求受影响的项目是开放的。
2.  您的解决方案`MyInterface2 extends MyInterface`也被广泛使用，因为它不会破坏现有的实现者。

如果您的解决方案出现在代码审核或审查中，我不会拒绝它 - 很好，恕我直言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:33:33.373

如果您拥有代码，那么更改接口的最佳方法是修复对它的所有引用 - 而不是留下不推荐使用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:35:09.463

如果所有其他实现的类都不需要此方法`interface1`，那么我认为这样做可以避免重大的代码更改。

然后，下一个问题，我们是否需要这个`interface2`（或）只在所需的类中就足够了？

如果您不想将这个新方法定义为`contract`，换句话说，不需要实现其他类，那么我什至不会创建一个`interface2`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:17:32.733

您可以使用设计模式。可以使用抽象工厂或桥接模式

# spring - 如何全局设置 AutoGrowNestedPaths=false？

> ID：12538448
> 
> 赞同：1
> 
> 时间：2012-09-21T21:31:51.167
> 
> 标签：spring, spring-mvc

我正在尝试找到一种方法来全局设置 AutoGrowNestedPaths=false 。

我目前正在使用基于 Java 的配置方法和扩展 WebMvcConfigurerAdapter 的 WebConfig。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T20:11:44.227

尽管 Biju 的回答为我指明了正确的方向，但示例代码可以更简洁，避免重新配置所有内容。这是我现在使用的代码：

```
@Bean
public RequestMappingHandlerAdapter requestMappingHandlerAdapter() {
    RequestMappingHandlerAdapter bean = super.requestMappingHandlerAdapter();
    ConfigurableWebBindingInitializer webBindingInitializer = (ConfigurableWebBindingInitializer) bean.getWebBindingInitializer();
    webBindingInitializer.setAutoGrowNestedPaths(false);
    return bean;
} 
```

注意，一个坑爹的是Spring的WebMvcConfigurationSupport不能直接配置WebBindingInitializer。另请参阅[https://jira.springsource.org/browse/SPR-8984](https://jira.springsource.org/browse/SPR-8984)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:18:17.033

您可以通过直接从[WebMvcConfigurationSupport](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurationSupport.html)扩展您的 Web 配置来做到这一点：

```
 @Configuration
 public class WebConfiguration extends WebMvcConfigurationSupport {

    @Bean
    public RequestMappingHandlerAdapter requestMappingHandlerAdapter() {
        ConfigurableWebBindingInitializer webBindingInitializer = new ConfigurableWebBindingInitializer();
        webBindingInitializer.setConversionService(mvcConversionService());
        webBindingInitializer.setValidator(mvcValidator());
        webBindingInitializer.setAutoGrowNestedPaths(false);

        List<HandlerMethodArgumentResolver> argumentResolvers = new ArrayList<HandlerMethodArgumentResolver>();
        addArgumentResolvers(argumentResolvers);

        List<HandlerMethodReturnValueHandler> returnValueHandlers = new ArrayList<HandlerMethodReturnValueHandler>();
        addReturnValueHandlers(returnValueHandlers);

        RequestMappingHandlerAdapter adapter = new RequestMappingHandlerAdapter();
        adapter.setMessageConverters(getMessageConverters());
        adapter.setWebBindingInitializer(webBindingInitializer);
        adapter.setCustomArgumentResolvers(argumentResolvers);
        adapter.setCustomReturnValueHandlers(returnValueHandlers);
        return adapter;
    }
 } 
```

# objective-c - iPhone 5 上的 UIView 高度不正确

> ID：12538454
> 
> 赞同：13
> 
> 时间：2012-09-21T21:32:22.037
> 
> 标签：objective-c, xcode, uiview, cgrect

我正在一次又一次地迁移我的应用程序，我使用`UIPickerView`. 在 viewDidLoad 方法中，我创建了选取器并将它的 y 原点设置为`self.view.frame.size.height`使其不在屏幕上。然后我只是在需要时将其向上移动。

在 iPhone 5`self.view.frame.size.height`上仍然返回 480 但`UIView`正确填充屏幕。

我什至尝试过`CGRectGetHeight(self.view.bounds)`认为它可能会返回不同的东西……没有骰子。关于为什么会发生这种情况的任何想法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T16:23:19.237

那是因为您在视图的笔尖中选择的大小将被使用 until`viewWillAppear: (BOOL) animated`方法。然后它将采用正确的尺寸。

但是，您可以使用以下代码来获得正确的大小，因为`viewDidLoad`被调用：

```
CGSize viewSize = [[UIScreen mainScreen] bounds].size;
viewSize = CGSizeMake(viewSize.width, viewSize.height - STATUS_BAR_HEIGHT); 
```

`STATUS_BAR_HEIGHT`是 20，但这取决于您的应用程序。您可能需要也可能不需要添加该行。

**编辑**

使用`mainScreen`边界的问题是框架在方向改变时不会改变。这就是它的设计方式。您可以使用以下方法解决：

```
 CGSize viewSize = [[UIScreen mainScreen] bounds].size;

    if(UIInterfaceOrientationIsLandscape(CURRENT_ORIENTATION)){
        viewSize = CGSizeMake(viewSize.height, viewSize.width - STATUS_BAR_HEIGHT);

    } else {
        viewSize = CGSizeMake(viewSize.width, viewSize.height - STATUS_BAR_HEIGHT);
    } 
```

`CURRENT_ORIENTATION`是`[[UIApplication sharedApplication] statusBarOrientation];`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-28T09:09:21.487

我一直在处理同样的问题。我尝试获取视图框架，`- (void)viewDidLoad`但发现它直到`- (void)viewWillAppear:(BOOL)animated`被调用才更新。

所以试着把视图框放进去`- (void)viewWillAppear:(BOOL)animated`，你应该没事的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T21:19:15.380

在您的捆绑包中检测到 Default-568h@2x.png 图像后，iOS 似乎检测到该应用程序是为 iPhone 5 设计的。[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)有一个完整的答案，概述了整个过程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T16:25:41.017

我发现了这个问题。我的笔尖必须设置为“iPhone 5 全屏”（我想这就是它的名称）。我猜它从笔尖加载视图大小并且没有考虑 autoResizeMask。

当 IB 中的视图大小设置为“大小：无”时，视图的大小不正确。它必须设置为“尺寸：Retina 4 全屏”。奇怪的。

# javascript - JS 应用程序 i18n 和 AMD (require.js)

> ID：12538455
> 
> 赞同：1
> 
> 时间：2012-09-21T21:32:29.210
> 
> 标签：javascript, web-applications, internationalization, requirejs, amd

上下文：用 JavaScript 和 AMD 模块（如 require.js）编写的单页 ​​Web 应用程序

用 AMD 模块实现 i18n 的更好方法是什么？

让我们说：

translation.js 返回一些 i18n 函数

```
require([..modules files., 'translation.js' ], function(.modules.. , t ){
   here in the code/view templates I use t('give_me_text') function
}) 
```

这种方法可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:00:03.010

没关系，但如果你做一个单页应用程序，你可能会考虑使用模板引擎并在那里使用一些帮助器在解析过程中翻译模板。

你可以看看[http://i18next.com](http://i18next.com) i18n for javascript（有 amd 版本）和[模板部分](http://i18next.com/pages/doc_templates.html)

# .htaccess - .htaccess 友好的 URL

> ID：12538466
> 
> 赞同：4
> 
> 时间：2012-09-21T21:33:40.663
> 
> 标签：.htaccess, mod-rewrite, rewrite

有人可以帮我重写一些 URL 吗？

我有：（示例）

```
www.example.com/index.php?page=namepage
www.example.com/index.php?page=gallery&topic=nametopic
www.example.com/index.php?page=homepage&paging=1 
```

我想拥有：

```
www.example.com/namepage
www.example.com/gallery/nametopic
www.example.com/homepage/1 
```

我的 htaccess 文件中有：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/?$ ?page=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/([^/]+)?/?$ ?page=$1&topic=$2 
```

但它不能很好地工作，因为我可以写：

*   www.example.com/index.php?page=namepage （页面或其他）
*   www.example.com/?page=namepage （页面或其他）
*   www.example.com/namepage/
*   www.example.com/namepage （这是我想要的 - 没有其他人）

第二个问题是：

*   www.example.com/namepage （好的，我想要，我们看到 namepage）
*   www.example.com/namepage/whatever（不，我想要 404，但我们看到了 namepage）
*   www.example.com/gallery/topic（好的，我想要，我们看到nametopic）
*   www.example.com/whatever/whatever2/whatever3（好的，我想要 404）

非常感谢任何人。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T21:52:00.403

```
### all your redirects

# for www.example.com/index.php?page=homepage&paging=1
RewriteCond %{THE_REQUEST} \?page=([^&]+)&paging=([0-9]+)
RewriteRule ^ /%1/%2? [L,R=301]

# for www.example.com/index.php?page=gallery&topic=nametopic
RewriteCond %{THE_REQUEST} \?page=([^&]+)&topic=([^&\ ]+)
RewriteRule ^ /%1/%2? [L,R=301]

# for www.example.com/index.php?page=namepage
RewriteCond %{THE_REQUEST} \?page=([^&\ ]+)($|\ )
RewriteRule ^ /%1? [L,R=301]

# for www.example.com/namepage/
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/$ /$1 [L,R=301]

### all your rewrites back

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/([0-9]+)$ /index.php?page=$1&paging=$2 [L]

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)/([^/]+)$ /index.php?page=$1&topic=$2 [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^/]+)$ /index.php?page=$1 [L] 
```

# iphone - iOS 6 视图层次结构噩梦

> ID：12538468
> 
> 赞同：5
> 
> 时间：2012-09-21T21:33:44.827
> 
> 标签：iphone, uiview, calayer, ios6, drawrect

我在应用商店中有一款应用接近 5 星评级，但是当 iOS 6 发布时，应用主视图层次结构中的一些视图开始闪烁。这发生在商店中的应用程序（我在 iOS6 发布时将其删除）以及模拟器中。

我花了大约 14 个小时，尝试了 100 件事，在 Xcode 中调试它，但无法得到任何牵引力。子视图消失又重新出现，就像有一个小鬼随机地为它们中的每一个设置可见属性，最多每秒 10 次，在一切正常的较长时间之间。

主界面是一个用户可以旋转的表盘，我在图层上使用 3d 变换来旋转它。我发现的唯一模式是，当表盘旋转到某些离散位置时，4 个消失的子视图中的 3 个一起消失，就好像锁定为一个一样。

第 4 个消失的子视图应该是静态图像，它会闪烁，没有明显的图案。

我喜欢任何关于如何调试它的想法和提示。这不是内存警告，执行额外的 [setNeedsToDisplay] 似乎没有效果。我开始认为 Apple 在 iOS6 中破坏了某些东西，但我找不到其他人谈论这些问题。

* * *

以下是主视图的子视图和 CALayers 层次结构的细分：

1.  我的层次结构包含 2 个很好的基本 CALayers。
2.  上面是一个非常大的自定义 UIView（使用 drawRect）和一个大的 UIImageVIew，当底部的一个旋转到某些位置时，它们总是一起闪烁。只有底部的正在旋转。
3.  上面是一个自定义的文本绘制 UIView，它不会闪烁。
4.  上面是一个小的红色引脚图形 UIImageView，它与上述 2 个视图同时闪烁。这是一个普通的 UIImageView；没有转换或子类或自定义绘图代码！然而它仍然有同样的闪烁。
5.  上面是一个不可见的 UIButton，它似乎一直在工作。
6.  上面是一个 UIImageView，它是一个不断闪烁的小图形，与其他 3 个“链接”层的基于旋转的闪烁无关（我说链接是因为它们喜欢一起消失）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:38:41.527

（这不是真正的答案，这是对老鼠答案的回复，但我还没有声誉点可以评论）

是的，明确设置 zPositions 似乎可以解决它，是的，这很奇怪。我也遇到了这个问题并在这里写了博客：[iOS 6 Rendering Bug: 3D-Rotation Causes Layers to Render without Respect for View Hierarchy](http://tech.xtremelabs.com/ios-6-rendering-bug-3d-rotation-causes-layers-to-render-without-respect-for-view-hierarchy/)。这似乎是 iOS 6 中引入的一个渲染错误。该博客有一个指向我向 Apple 提交的错误的 Open Radar 版本的链接，以及一个可以运行以查看错误和 zPosition 修复的示例项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T02:45:52.960

尝试手动设置视图层 z 属性以确保层次结构是您需要的。

# php - 将父引用或值添加到子类中是个好主意吗？

> ID：12538471
> 
> 赞同：0
> 
> 时间：2012-09-21T21:34:01.327
> 
> 标签：php, performance, class, memory

我的课程创建了很多其他课程。

使用引用而不是变量在父类上创建链接是个好主意吗？

我可以保持记忆使用这种风格还是没关系？

这是同一个（一个）类吗？因此，如果我更改父类中的值，所有其他类都可以看到新名称吗？

```
class item implements Iterator {
  private $name = 'Awesome name';
  private $data = Array();
  function __construct () {
    for ($i=0; $i<10; $i++) {
      $this->data[$i] = new type(&$this);
    }       
  }
  public function rewind() { reset($this->data); }
  public function current() { return current($this->data); }
  ...
}

class type {
  private $parent = false;
  function __construct ($a) {
     $this->parent =&$a;
  }
  function do () {
     echo $this->parent->name . "\n";
  }
}

$i = new item ();

foreach ($i as $t) {
   $t->do();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:40:21.930

> 使用引用而不是变量在父类上创建链接是个好主意吗？

你认为这些是不同的意味着你还没有真正理解如何使用 PHP 进行面向对象编程。除非您仍在使用 PHP 4 进行编程，否则请丢掉 '&'，否则它们不会在您的代码中做任何事情。

> 因此，如果我更改父类中的值，所有其他类都可以看到新名称吗？

当你尝试它时发生了什么？

# c# - 向服务器端添加异步代码支持

> ID：12538472
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:34:06.687
> 
> 标签：c#, asp.net, .net, task, task-parallel-library

我需要在我的服务器端编写一些并行代码。我知道 . 净 4.5 。但我需要在 . 网 4 . 如何制作并行代码并等待它完成。是否有使用 TPL 库的示例。我的服务器端是 Wcf 服务，我按顺序调用 db 直到获得最终结果。这些调用可以并行并在短时间内获取所有数据。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:41:27.957

创建工人阶级：

```
public class AsyncClass
{
    public delegate void WorkFinishedDelegate();

    public event WorkFinishedDelegate WorkFinishedEvent;

    public void StartJob()
    {
        System.Threading.ThreadStart ts = new System.Threading.ThreadStart(DoSomeJob);
        System.Threading.Thread th = new System.Threading.Thread(ts);
        //this will stast async thread...
        th.Start();
    }

    void DoSomeJob()
    { 
        //TODO: do your job

        //nofity you have completed...
        if (WorkFinishedEvent!= null)
        {
            WorkFinishedEvent();
        }
    }
} 
```

给你的班级打电话：

```
 AsyncClass ac = new AsyncClass();
        ac.WorkFinishedEvent += new AsyncClass.WorkFinishedDelegate(ac_WorkFinishedEvent);
        ac.StartJob();

        void ac_WorkFinishedEvent()
        {
            //here you have been notified!
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T12:14:52.613

对于数据库 ADO 有异步支持。

[异步操作](http://msdn.microsoft.com/en-us/library/zw97wx20.aspx)

# jquery - Jquery 只在第一次工作

> ID：12538480
> 
> 赞同：0
> 
> 时间：2012-09-21T21:35:15.593
> 
> 标签：jquery

我正在尝试自学一般的 Web 开发技能。我正在尝试使用 HTML5 FileAPI 创建具有预览功能的图像上传。

到目前为止，我已经创建了一个文件输入，它在选择时显示图像的预览。

html标记如下：

```
<div>
        <!-- Photos -->
        <fieldset>
            <legend>PropertyPhotos</legend>
            <div class="upload-box" id="upload-box-1">
                <div class="preview-box">
                    <img alt="Field for image cutting" id="preview_1" src="@Url.Content("~/Content/empty.png")" />
                </div>
                <div>
                    @Html.FileFor(model => model.File1)
                    @Html.ValidationMessageFor(model => model.File1)
                </div>
            </div>

            <div class="upload-box" id="upload-box-2">
                <div class="preview-box">
                    <img alt="Field for image cutting" id="preview_2" src="@Url.Content("~/Content/empty.png")" />
                </div>
                <div>
                    @Html.FileFor(model => model.File2)
                    @Html.ValidationMessageFor(model => model.File2)
                </div>
            </div>

            <div class="upload-box" id="upload-box-3">
                <div class="preview-box">
                    <img alt="Field for image cutting" id="preview_3" src="@Url.Content("~/Content/empty.png")" />
                </div>
                <div>
                    @Html.FileFor(model => model.File3)
                    @Html.ValidationMessageFor(model => model.File3)
                </div>
            </div>
        </fieldset>
    </div> 
```

显示预览然后显示下一个“上传框”的 Jquery 如下：

```
<script type="text/javascript">
        $(document).ready(function () {
            // show first box
            $("#upload-box-1").fadeIn();

            //Get current & next step index
            var stepNum = $('div.upload-box').attr('id').replace(/[^\d]/g, '');
            var nextNum = parseInt(stepNum)+1;

            //Get the preview image tag
            var preview = $('#preview_'+stepNum);

            //Load preview on file tag change and display second upload-box
            $('#File'+stepNum).change(function (evt) {
                var f = evt.target.files[0];
                var reader = new FileReader();

                if (!f.type.match('image.*')) {
                    alert("The selected file does not appear to be an image.");
                    return;
                }

                reader.onload = function (e) { preview.attr('src', e.target.result); };
                reader.readAsDataURL(f);

                //Show next upload-box
                $("#upload-box-" + nextNum).fadeIn();
            });
        });
    </script> 
```

但是，此代码仅是第一次...即在选择文件时-它显示预览，然后显示下一个“上传框”。但是，当我使用第二个文件浏览时，它不会显示任何预览。

根据我的准备，我需要关闭 Jquery 函数，以便它可以再次初始化，但我不知道该怎么做。

我的另一个猜测是这个 JQuery 只适用于文档加载，我需要将它与文件点击相关联。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:42:19.163

您的代码在第一次加载页面时准备好 DOM 时执行一次，因为页面永远不会重新加载，因此只会将`change`事件处理程序绑定到具有 id 的元素`File1`。当您切换到使用带有 id 的文件输入时，`File2`没有绑定到它的事件处理程序，因此选择文件什么都不做。

您还需要将事件处理程序绑定到其他文件输入元素，可能使用[attribute-starts-with](http://api.jquery.com/attribute-starts-with-selector/)选择器：

```
$('[id^="File"]').change(...); 
```

或者通过为每个元素添加一个类并基于它进行选择。

您还需要`nextNum`在适当的时候处理增加 的值，以便后续调用正确显示下一组元素。

# ruby-on-rails - 未定义的方法`new_record？对于零：NilClass

> ID：12538482
> 
> 赞同：0
> 
> 时间：2012-09-21T21:35:23.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

在 Rails 3.2 中，我创建了一个后置控制器。每个帖子可以有不同数量的回形针附件。为了实现这一点，我创建了一个资产模型，其中每个资产都有一个回形针附件。一篇帖子有_许多资产和资产属于_to帖子。

资产模型

```
class Asset < ActiveRecord::Base
    belongs_to :post
    has_attached_file :photo, :styles => { :thumb => "200x200>" }
end 
```

后模型

```
 class Post < ActiveRecord::Base
      attr_accessible :content, :title
      has_many :assets, :dependent => :destroy
      validates_associated :assets
      after_update :save_assets

 def new_asset_attributes=(asset_attributes) 
        asset_attributes.each do |attributes| 
            assets.build(attributes) 
        end 
    end
    def existing_asset_attributes=(asset_attributes) 
        assets.reject(&:new_record?).each do |asset| 
        attributes = asset_attributes[asset.id.to_s] 
        if attributes 
            asset.attributes = attributes 
            else 
                asset.delete(asset) 
            end 
        end 
    end

    def save_assets 
        assets.each do |asset| 
            asset.save(false) 
        end 
    end 
end 
```

帖子助手

```
module PostsHelper
  def add_asset_link(name) 
    link_to_function name do |post| 
      post.insert_html :bottom, :assets, :partial => 'asset', :object => Asset.new 
    end 
  end
end 
```

邮寄表格

```
<%= form_for @post, :html => { :multipart => true } do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
        <% @post.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </div>
    <div id="assets">
        Attach a file or image<br />
        <%= render 'asset', :collection => @post.assets %> 
      </div> 
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

资产部分

```
<div class="asset"> 
    <% new_or_existing = asset.new_record? ? 'new' : 'existing' %>
    <% prefix = "post[#{new_or_existing}_asset_attributes][]" %>

    <% fields_for prefix, asset do |asset_form| -%> 
        <p> 
          Asset: <%= asset_form.file_field :photo %> 
          <%= link_to_function "remove", "$(this).up('.asset').remove()" %> 
        </p> 
  <% end -%> 
</div> 
```

大部分代码取自这里：[https](https://gist.github.com/33011) ://gist.github.com/33011 我知道这是一个 rails2 应用程序，无论如何我不明白这个错误意味着什么：

```
undefined method `new_record?' for nil:NilClass
Extracted source (around line #2):

1: <div class="asset"> 
2:     <% new_or_existing = asset.new_record? ? 'new' : 'existing' %>
3:     <% prefix = "post[#{new_or_existing}_asset_attributes][]" %>
4:     
5:     <% fields_for prefix, asset do |asset_form| -%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:04:51.930

尝试改变这个

```
 <div id="assets">
    Attach a file or image<br />
    <%= render 'asset', :collection => @post.assets %> 
  </div> 
```

至

```
<div id="assets">
  Attach a file or image<br />
  <% @post.assests.each do |asset|%>
    <%= render 'asset', :asset => asset %> 
  <% end %>
</div> 
```

可能的原因是当你打电话时

```
<%= render 'asset', :collection => @post.assets %> 
```

您正在将一个集合传递给呈现的部分，但您无法使用部分中的名称集合传递的您的集合。您正在使用的变量**Assest**在特定呈现的部分范围内不存在:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:00:34.367

阅读错误，您的`<%= render 'asset', :collection => @post.assets %>`行可能会调用一个空数组？在您的控制台中，您能找到 @post.assets 吗？那里是 nil 吗？

# jsf-2 - Flash 范围对象正在丢失

> ID：12538483
> 
> 赞同：0
> 
> 时间：2012-09-21T21:35:28.413
> 
> 标签：jsf-2, primefaces, glassfish-3, mojarra

我有一个 JSF 页面，它显示来自名为**TableQuery**的对象的表，该对象支持有状态分页、排序等。访问该对象的 bean 是一个 RequestScoped 对象，它试图通过将**TableQuery**存储在 flash 映射中来保留它。访问器方法如下所示：

```
public TableQuery<SysLog> getQuery() {
    if (query != null) return query;
    Flash flash = FacesContext.getCurrentInstance().
            getExternalContext().getFlash();
    query = (TableQuery) flash.get("Query");
    if (query != null) System.out.println("TableSysLog.getQuery() Got query from flash!");
    if (query == null) {
        query = slc.getNewTableQuery();
        System.out.println("TableSysLog.getQuery() Created new query");
    }
    flash.put("Query", query);
    return query; } 
```

页面之间的链接是用**p:commandLInk**实现的。我在 AJAX 模式下使用 Primefaces 命令链接，因此只有在单击链接时才会处理该链接。动作侦听器如下所示：

```
public void doNextPage(ActionEvent evt) {
    getQuery().doNextPage();
} 
```

当它不起作用时，我收到错误消息：

```
WARNING: JSF1095: The response was already committed by the time we tried to set the outgoing cookie for the flash.  Any values stored to the flash will not be available on the next request. 
```

我在查找此问题时发现了[此线程。](https://stackoverflow.com/questions/7364357/warning-jsf1095-while-using-a-hcommandlink-inside-a-richdatatable)当我按照文章的建议关闭 HTTP 分块时，错误消息消失了，但问题仍然存在。

有谁知道发生了什么以及如何解决这个问题？

更新：

在处理这个问题时，我相信我已经发现了一个用于存储 Flash 对象的 cookie 的错误。它存储的 cookie 名为**csfcfc**，cookie 的**路径**参数是我的应用程序的根，在我的例子中是“/A/”。

但是，当它失败时，我得到了第二个**csfcfc** cookie，这次的路径参数为“/A//”。我的工作理论是cookie生成器有时会在路径参数中添加一个额外的“/”，这意味着即使浏览器发送了cookie，在下一个请求中也看不到cookie。

值得注意的是，这种情况非常间歇性地发生。我并不总是收到**JSF1095**消息，但每次查看时我都会收到额外的 cookie。

我不知道这是 Mojarra 错误还是 Glassfish 错误，但我在这篇文章中添加了 Mojarra 标签。我不熟悉这些产品的错误数据库，但是有人可以在这里评论下一步应该是什么吗？

我将不胜感激有关解决方法的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:42:22.340

事实证明，问题出在其协议处理程序中的 Glassfish 问题上，正如问题中提供的链接所建议的那样。如果关闭 HTML“分块”模式，这个问题就会消失。

本来我以为不是这样的，但实际上我还有另一个错误导致 Flash 对象丢失。

# php - mysql 行结果字段名的变量

> ID：12538484
> 
> 赞同：0
> 
> 时间：2012-09-21T21:35:35.120
> 
> 标签：php, mysql, variables, field

我正在从 mysql 中用 php 检索一行，它有如下字段：name_en、name_es、name_de ...

我想根据我的 $lang 变量（en、es、de...）检索正确的字段。如果 $lang 变量是 'es'，我需要得到 $row['name_es']。

我试过这个（基于[这个线程](https://stackoverflow.com/questions/12017047/php-variable-in-mysql-row-name)），但它不工作：

```
$name = $row->{'name_'.$lang}; 
```

知道如何使用变量作为行字段的名称吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:38:50.897

你有？`$row['name_es']`

试试看：

```
$name = $row['name_'.$lang]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:39:34.190

如果你有一个对象，试试这个`$row`

```
$field = 'name_' . $lang;
$name = $row->$field; 
```

# python - python多进程同步更新字典

> ID：12538485
> 
> 赞同：4
> 
> 时间：2012-09-21T21:35:38.493
> 
> 标签：python, dictionary, parallel-processing, multiprocessing

我正在尝试通过多个进程更新一本通用词典。你能帮我找出这段代码有什么问题吗？我得到以下输出：

```
inside function
{1: 1, 2: -1}
comes here
inside function
{1: 0, 2: 2}
comes here
{1: 0, 2: -1} 
```

谢谢。

```
from multiprocessing import Lock, Process, Manager

l= Lock()

def computeCopyNum(test,val):
    l.acquire()
    test[val]=val
    print "inside function"
    print test
    l.release()
    return

a=dict({1: 0, 2: -1})

procs=list()

for i in range(1,3):
    p = Process(target=computeCopyNum, args=(a,i))
    procs.append(p)
    p.start()

for p in procs:
p.join()
    print "comes here"

print a 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T21:56:29.217

答案其实很简单。您正在使用 multiprocessing 模块，您可以使用它启动几个不同的 python 进程。不同的进程有不同的地址空间并且它们不共享内存，所以你的所有进程都会写入它们自己的本地字典副本。

使用多处理模块时进行进程间通信的最简单方法是使用队列在从属进程和主进程之间进行通信。

```
from multiprocessing import Process, Queue

def computeCopyNum(queue, val):
    queue.put(val) # can also put a tuple of thread-id and value if we would like to

procs=list()

queue = Queue()
for i in range(1,3):
    p = Process(target=computeCopyNum, args=(queue, i))
    procs.append(p)
    p.start()

for _ in procs:
    val = queue.get()
    # do whatever with val

for p in procs:
    p.join() 
```

如果每个从属进程都可以生成多个输出值，那么让每个从属进程将一个哨兵值写入队列以向主进程发出信号表明它已经完成可能是谨慎的。然后代码可能看起来像：

```
def slave(queue):
    for i in range(128): # just for example
        val = #some calculated result
        queue.put(val)

    queue.put(None) # add a sentinel value to tell the master we're done

queue = Queue()

# spawn 32 slave processes
num_procs = 32
procs = [Process(target=slave, args=(queue, )) for _ in range(num_procs)]
for proc in procs: 
    proc.start()

finished = 0
while finished < num_procs:
    item = queue.get()
    if item is None: 
        finished += 1
    else: 
        # do something with item

for proc in procs: 
    proc.join() 
```

您也可以使用管理器，如另一个答案所示。这种方法的问题是可能会在进程地址空间之间发生大量隐式内存复制，这很难推理。我总是更喜欢使用显式队列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T21:40:05.050

你 import `Manager`，但你不做任何事情。作为第一种方法，请改为：

```
a = Manager().dict({1: 0, 2: -1}) 
```

全局变量在使用`multiprocessing`. 子进程只能访问副本，并且它们所做的更改在退出时会被遗忘，除非您使用的是专门设计的能够在进程之间传播信息的对象。

在进程之间传递数据有许多不同的选择，但使用上述`Manager`对象通常是最简单的。您还可以使用该`Manager`对象创建多个共享对象：

```
manager = Manager()
a = manager.dict({1: 0, 2: -1})
b = manager.list((1, 2, 3)) 
```

有关更多信息，请参阅[`Manager`](http://docs.python.org/library/multiprocessing.html#managers)文档。

此外，您使用的锁是不必要的。`Manager`会为您解决这个问题。正如[文档](http://docs.python.org/library/multiprocessing.html#synchronization-primitives)所说，

> 通常同步原语在多进程程序中不像在多线程程序中那样需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:39:53.687

进程不像线程那样共享内存。每个进程都以它自己的独立副本结束。如果您想在不同的线程中工作，则需要使用管道或其他一些进程间通信将数据返回到中央进程。

# java - 实用程序类 - 正确的方法是什么？

> ID：12538487
> 
> 赞同：13
> 
> 时间：2012-09-21T21:35:45.387
> 
> 标签：java, class

对于具有公共静态的所有方法的实用程序类，正确的方法是什么。
我应该使用最终类还是抽象类？
请给建议。
例如：

```
public final class A{ 
    public static void method(){
        /* ... */
    }
} 
```

或者

```
public abstract class A{
    public static void method(){
        /* ... */
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T21:36:55.607

`abstract`有自己的目的。如果您希望其他类 ( ) 实现某些类功能，`override`则使用抽象。

如果它只是实用程序类，但您不希望其他类将其子类化，那么我会选择`final`类。如果实用程序类只有`static`方法，那么无论如何您都不能覆盖它们，因此将它们`non-final`也放在类中并没有什么区别。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-09T10:51:47.093

> 创建实用程序类的最佳方法。如果您不希望其他类继承它。

```
//final, because it's not supposed to be subclassed
public final class AlertUtils 
{ 

// private constructor to avoid unnecessary instantiation of the class
    private AlertUtils() {
    }

  public static ..(){}//other methods
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T21:39:36.600

`final`这里比 更有意义`abstract`。通过将类标记为`final`，您禁止扩展类。另一方面，将类标记为`abstract`相反，因为没有子类的抽象类没有多大意义。所以预计会延长。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-25T20:25:58.173

使类最终并添加一个私有构造函数。（这就是喜欢`java.lang.Math`使用的类）

```
public final class A { 
    private A() {}

    public static void method() {
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T21:39:04.983

如果您希望其他类使用此类的功能，则将其设为**抽象**，否则将其设为**Final**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-08T15:45:40.093

These are some guidelines I've found:

*   All methods must be public static, so that they cannot be overridden.
*   Constructor must be private, so it'll prevent instantiation.
*   Final keyword for the class prevents sub-classing.
*   Class should not have any non-final or non-static class fields.

As you've asked, the class name cannot be abstract (not advisable) -> Which means you are planning to implement it in another class. If you want to prevent sub-classing, use final for the class name; If you want to prevent instantiation, use a private constructor.

# php - PHP - 拉出具有匹配值的数组键？

> ID：12538490
> 
> 赞同：1
> 
> 时间：2012-09-21T21:35:54.313
> 
> 标签：php, arrays, duplicates

有没有办法查看数组内部并取出具有匹配值的键的键？有人问过这样的问题，但我没有找到任何结论性的东西。

所以如果我的数组看起来像这样

```
Array
(
    [0] => Array
        (
            [title] => Title 1
            [type] => 
            [message] => 
        )

    [1] => Array
        (
            [title] => Title 2
            [type] => 
            [message] => 
        )

    [2] => Array
        (
            [title] => Title 3
            [type] => 
            [message] => 
        )

    [3] => Array
        (
            [title] => Title 2
            [type] => Limited
            [message] => 39
        )

    [4] => Array
        (
            [title] => Title 4
            [type] => Offline
            [message] => 41
        )

    [5] => Array
        (
            [title] => Title 5
            [type] => 
            [message] => 
) 
```

我想得到这个

```
Array
(
    [1] => Array
        (
            [title] => Title 2
            [type] => 
            [message] => 
        )

    [3] => Array
        (
            [title] => Title 2
            [type] => Limited
            [message] => 39
        )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:02:40.060

```
$titlesCount = array_count_values(array_map(function($item){ return $item['title']; }, $input));
$output = array_filter($input, function($item) use(&$titlesCount){ return $titlesCount[$item['title']] > 1; }); 
```

其中 $input 是原始数组， $output 是结果。

它计算每个不同的 title 值，并仅返回那些多次出现的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:17:50.533

@Bugs 的答案比这个更好，但我仍然发布它，因为我觉得我的解决方案会更容易理解：

```
$arr = Array
(
    Array
        (
            "title" => "Title 1",
            "type" => NULL,
            "message" => NULL
        ),
    Array
        (
            "title" => "Title 2",
            "type" => NULL,
            "message" => NULL
        ),
    Array
        (
            "title" => "Title 3",
            "type" => NULL,
            "message" => NULL
        ),
    Array
        (
            "title" => "Title 2",
            "type" => "Limited",
            "message" => 39
        ),
    Array
        (
            "title" => "Title 4",
            "type" => "Offline",
            "message" => 41
        ),
    Array
        (
            "title" => "Title 5",
            "type" => NULL,
            "message" => NULL
        )
);

//create a "map" that will hold all the values of previous titles
$map = array();
$res = array();
foreach ($arr as $key => $subarr) {
    foreach ($subarr as $subkey => $value) {           
        if($subkey === "title"){            
            if($map[$value]){ //if such a title already exists, add both of them to the result                
                $res[] = $arr[$map[$value]];
                $res[] = $arr[$key];
            }
            else { // add the current into the map                
                $map[$value] = $key;
            }
        }
    }
}
print_r($res); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [title] => Title 2
            [type] => 
            [message] => 
        )

    [1] => Array
        (
            [title] => Title 2
            [type] => Limited
            [message] => 39
        )

) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T21:41:26.427

```
foreach($array as &$subarray) {
    if(is_array($subarray) && isset($subarray['title']) && $subarray['title'] == 'Title 2') {
        $matches[] = $subarray;
    }
} 
```

可以很容易地包装在一个以子数组键和值作为参数的函数中。

# php - 将数据插入数据库后，JQuery datepicker 图标触发器损坏

> ID：12538491
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:35:55.833
> 
> 标签：php, jquery, css, codeigniter, jquery-ui-datepicker

起初我要为 JQuery datepicker 加载我的图标，但是在我将值插入我的数据库之后，图标图像被破坏了。我正在使用 Codeigniter 框架。

这是我的html代码：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
     <meta charset="UTF-8">    
     <title>CRUD</title>
<?php echo link_tag(base_url() . 'css/ui-lightness/jquery-ui-1.8.23.custom.css'); ?>    
<script type="text/javascript" src="<?php echo base_url(); ?>js/jquery-1.8.0.min.js"></script>
<script type="text/javascript" src="<?php echo base_url(); ?>js/jquery-ui-1.8.23.custom.min.js"></script>
</head>
<body>
<div>
    <?php
    echo form_label('BDay:', 'bday');

    $data = array(
        'name' => 'bday',
        'id' => 'datepicker'
    ); 

    echo form_input($data);
    ?>
</div>
</body>
</html> 
```

这是我的脚本：

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        showOn: "button",
        buttonImage: "<?php echo base_url() . '/images/icons/calendar_24.png' ?>",
        buttonImageOnly: true,
        onSelect: function(dateText, inst){
            $("input[name='bday']").val(dateText);
        }
    });

});
</script> 
```

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:53:00.257

尝试在头部添加这个 - 您没有将 jQuery 或 jQuery ui 添加到您的项目中

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script> 
```

# apache - Rewriterule 或 301 重定向，最后带有变量

> ID：12538493
> 
> 赞同：0
> 
> 时间：2012-09-21T21:36:38.583
> 
> 标签：apache, mod-rewrite, redirect

我需要一件非常困难的事情。几乎对我来说......我需要一个 301 重定向或重写器来做下一步：将这个 URL：/productos/carro/producto.asp?IdDetalle=var 转换成这个 /producto.php?IdProducto=var

其中 var 是一个数字，我需要留在最后的 url 上才能对其进行请求。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:44:39.167

使用 mod_rewrite，您可以将这些规则放在文档根目录或服务器/虚拟主机配置中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*)IdDetalle=(.*)$
RewriteRule ^/?productos/carro/producto.asp$ /producto.php?%1IdProducto=%2 [L,R=301] 
```

# sql-server - 探查器模板能否迁移到较新版本的 SQL 探查器？

> ID：12538494
> 
> 赞同：11
> 
> 时间：2012-09-21T21:36:38.437
> 
> 标签：sql-server, sql-server-profiler

是否可以将 Profiler 模板迁移到较新版本的 SQL Server？

就我而言，我想将我的 SQL 2008 模板带到 2012 年。我尝试过 (1) 直接文件副本和 (2) 导出/导入。在这两种情况下，旧模板都会运行，但无法修改。修改会导致以下错误：

> ![编辑升级模板时出现错误消息](../Images/a50a5b070ded8b134ee806af8aeb1c4a.png)

我有一堆自定义模板，我试图避免手动重新创建它们。虽然，我想那是后备位置。想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-21T11:59:34.370

是的，我设法将我的从 2012 年转移到 2014 年。

2012年出口。2014年进口。

在此阶段，新模板将仅在 SQL Server 2012 实例上运行，而不是您本地的 2014 实例。

确保分析器已关闭，您需要转到资源管理器并将文件从代表 2012 模板的文件夹复制到 2014 模板：

C:\Users\YOURUSERNAME\AppData\Roaming\Microsoft\SQL Profiler\12.0\Templates\Microsoft SQL Server\120

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T21:47:26.063

从 SQL Server 2008 的 Profiler 版本中导出模板（我假设您已经这样做了）。

现在打开 2012 Profiler，转到文件 > 模板 > 导入并选择您的 .tdf 文件。

您将拥有一个名为 [filename]（不带 .tdf）的新用户跟踪模板。转到*文件 > 模板 > 编辑*并选择您导入的跟踪模板。然后，您应该能够通过下拉下拉菜单来编辑服务器类型： ![在此处输入图像描述](../Images/f2035881e6cc8110b54e9e54fecd1763.png)

然后您可以保存模板，当您使用该模板开始新的跟踪时，它应该是服务器类型。当您选择不同的服务器类型时，模板名称会消失，但如果您保存它，则会*编辑*所选模板。

*注意：这一切都取自[dba.stackexchange.com 上的上一个问题](https://dba.stackexchange.com/questions/23399/how-can-i-change-the-target-server-type-for-a-trace-template)。*

# eclipse - 尝试在 Eclipse 中安装 PyDev 时出错

> ID：12538498
> 
> 赞同：3
> 
> 时间：2012-09-21T21:36:59.727
> 
> 标签：eclipse, pydev

为 Eclipse 安装 PyDev 插件后（通过在 Eclipse 的“*安装新软件”窗口中提供*[http://pydev.org/updates](http://pydev.org/updates)）启动 Eclipse 时出现以下错误：

 *![错误](../Images/dd143ddd4865da737edd0ed568f1d546.png)

它是什么？我应该怎么办？

我正在使用 Eclipse 4.2.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:16:49.240

您可能最好使用 Eclipse Marketplace，[从网站](http://marketplace.eclipse.org/)或通过 Eclipse 本身，而不是提供直接链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:54:38.483

发生这种情况是因为您的更新中有指向 Aptana Studio 更新站点的链接，并且您正在标记以检查所有更新站点。

由于 PyDev 对 Aptana Studio 具有可选依赖项，它会收集这些插件，但以这种方式（部分）获取 Aptana Studio 无法正常工作。因此，请取消选中在安装过程中考虑所有更新站点来获取更新的选项，或删除 aptana studio 更新站点。*

# ruby-on-rails - Rails 字段（哈希类型）和多个复选框

> ID：12538504
> 
> 赞同：3
> 
> 时间：2012-09-21T21:37:17.590
> 
> 标签：ruby-on-rails, checkbox

我正在使用 Rails（3.2.5 和 ruby​​ 1.9.3）和 mongodb 和 mongoid。我想给用户检查工作日的选项。因此，我的控制器中有一个类型为 hash 的字段：

```
field :wochentage, :type => Hash, default: {  :mo => 0,
                                            :di => 0,
                                            :mi => 0,
                                            :dn => 0,
                                            :fr => 0,
                                            :sa => 0,
                                            :so => 0
                                          } 
```

问题是我不能让它在网络表单中工作：

```
<% for d,v in @timetable.wochentage  %>
    <td><%= f.check_box :wochentage[d]%></td>
<% end %> 
```

我得到的错误是：

> 无法将符号转换为整数

谁能指出我正确的方向？在此先感谢，斯文

好的，更进一步：使用 fields_for 表单助手，我离得更近了：

```
<%= f.fields_for :wochentage do |w| %>
      <td><%= w.check_box :mo %></td>
      <td><%= w.check_box :di %></td>
      <td><%= w.check_box(:mi, checked_value: "1", unchecked_value: "0") %></td>
      <td><%= w.check_box :dn %></td>
      <td><%= w.check_box :fr %></td>
      <td><%= w.check_box :sa %></td>
      <td><%= w.check_box :so %></td>
    <% end %> 
```

使用此代码，我可以设置工作日。但它不会从数据库中读取它，如果我想编辑它，尽管它存储正确：`Wochentage: {"mo"=>"0", "di"=>"0", "mi"=>"1", "dn"=>"0", "fr"=>"0", "sa"=>"0", "so"=>"0"}`

在编辑表单中，所有复选框都未选中。那么如何使复选框以正确的状态显示？

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-22T13:21:12.483

好，我知道了：

```
<%= f.fields_for :wochentage do |w| %>
  <% @timetable.wochentage.each do |t,v| %>
    <td><%= w.check_box t, checked: (v == "1" ? "checked" : "") %></td>
  <% end %>
<% end %> 
```

有趣的是：正常的check_box将选中的保存为真，未选中的保存为假。当您有一个字段的多个复选框作为哈希时，复选框保存 1 为选中，0 为未选中。

# jquery - jquery scrollTop 需要帮助

> ID：12538506
> 
> 赞同：0
> 
> 时间：2012-09-21T21:37:39.623
> 
> 标签：jquery, scroll

我的代码是：

```
$('html, body').stop().animate({scrollTop : $('#current').offset().top}, 300, easeInOutExpo); 
```

它的作用是将项目（#current）滚动到窗口顶部。**我希望它将项目从顶部**
向下滚动到 - 100px 。 我怎样才能做到这一点？请帮忙。谢谢。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T21:39:05.727

试试这个 ：

```
$('html, body').stop().animate({
  scrollTop: $('#current').offset().top - 100
}, 300, easeInOutExpo); 
```

获取元素的当前顶部`#current`并从该值中获取另外 100 个像素 - 使`#current`元素距离窗口顶部 100px**

# django - 执行同步数据库时获取“DatabaseOperations”对象没有属性“geo_db_type”错误

> ID：12538510
> 
> 赞同：77
> 
> 时间：2012-09-21T21:37:59.430
> 
> 标签：django, heroku, geodjango

我正在尝试`heroku run python manage.py syncdb`在 Heroku 上的 GeoDjango 应用程序上运行，但出现以下错误：

**AttributeError：“DatabaseOperations”对象没有属性“geo_db_type”**

[我](http://develissimo.com/forum/topic/110229/?page=1#post-267473)[所有](http://djangosaur.tumblr.com/post/409277054/geodjango-database-engine-for-django-1-2)[的](https://code.djangoproject.com/ticket/12727) [研究](http://opensourcegeospatial.blogspot.com/2011/06/geodjango-object-has-no-attribute.html)都产生了相同的解决方案：确保用作数据库引擎。有趣的是*我已经在这样做了*（我也有）： `django.contrib.gis.db.backends.postgis`*`django.contrib.gis``INSTALLED_APPS`*

 *```
settings.py

DATABASES = {
  'default': {
    'ENGINE': 'django.contrib.gis.db.backends.postgis',
    'NAME': '...',
    'HOST': '...',
    'PORT': ...,
    'USER': '...',
    'PASSWORD': '...'
  }
}

INSTALLED_APPS = (
    ...,
    'django.contrib.gis',
) 
```

还有什么我想念的吗？非常感谢任何帮助，以下是完整的错误跟踪供参考：

```
Running `python manage.py syncdb` attached to terminal... up, run.1
Creating tables ...
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table django_content_type
Creating table django_session
Creating table django_site
Creating table django_admin_log
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 91, in handle_noargs
    sql, references = connection.creation.sql_create_model(model, self.style, seen_models)
  File "/app/lib/python2.7/site-packages/django/db/backends/creation.py", line 44, in sql_create_model
    col_type = f.db_type(connection=self.connection)
  File "/app/lib/python2.7/site-packages/django/contrib/gis/db/models/fields.py", line 200, in db_type
    return connection.ops.geo_db_type(self)
AttributeError: 'DatabaseOperations' object has no attribute 'geo_db_type' 
```

**更新**：我遵循了[GeoDjango 教程](https://docs.djangoproject.com/en/dev/ref/contrib/gis/tutorial/)和[Heroku/Django 教程](https://devcenter.heroku.com/articles/django)，并构建了一个可以在我的开发机器上运行的简单应用程序。[我使用自定义 GeoDjango buildpack](https://github.com/cirlabs/heroku-buildpack-geodjango)将它推送到 Heroku ，并尝试了 syncdb，但得到了同样的错误。这是 Django/GeoDjango、Heroku 或 buildpack 的问题吗？我的开发环境使用的是 PostgreSQL 9.1 和 PostGIS 2.0，但 Heroku 使用的是 9.0.9 和 1.5，这可能是问题吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2014-01-23T19:28:50.957

OP 使用的是 GeoDjango buildpack，但如果有人像我一样使用[Geo buildpack](https://github.com/cyberdelia/heroku-geo-buildpack/)到这里，请不要忘记最后一行：`dj_database_url``settings.py`

```
import dj_database_url
DATABASES['default'] = dj_database_url.config()
DATABASES['default']['ENGINE'] = 'django.contrib.gis.db.backends.postgis' 
```

# 更新

`dj_database_url` [直接支持](https://github.com/kennethreitz/dj-database-url#url-schema)PostGIS。如果您可以将数据库 URL 更改为以`postgis`.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-06-15T03:44:43.560

尝试使用测试数据库集运行测试时出现此错误，如下所示：

```
if 'test' in sys.argv:
    DATABASES = {
        'default': {
            'ENGINE': 'django.db.backends.sqlite3', 
            'NAME': '_testdb',
        }
    } 
```

问题是 sqlite3`DatabaseOperations`对象没有该属性`geo_db_type`（就像这篇文章的标题所暗示的那样）。

我的解决方案是将后端更改为 sqlite 等效的 GIS 引擎：

```
 'ENGINE': 'django.contrib.gis.db.backends.spatialite' 
```

有关所有可能的后端，请参阅有关 GeoDjango 安装的 Django 文档，以及安装说明：[https ://docs.djangoproject.com/en/3.0/ref/contrib/gis/install/#spatial-database](https://docs.djangoproject.com/en/3.0/ref/contrib/gis/install/#spatial-database)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2019-02-27T14:54:51.797

我遇到了同样的问题，我不得不改变：

```
'ENGINE': 'django.db.backends.postgresql_psycopg2', 
```

到：

```
'ENGINE': 'django.contrib.gis.db.backends.postgis', 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-09-09T16:10:54.733

对我有帮助

1) 添加`'django.contrib.gis',`到`INSTALLED_APPS`
2) 从

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.mysql', 
```

到

```
DATABASES = {
'default': {
    'ENGINE': 'django.contrib.gis.db.backends.mysql', 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-03-29T05:07:46.307

这篇文章很旧，但我只是想分享我对这个问题的答案。我用的是dj数据库包，不知道用postgis的时候连接url不一样。PostGIS 的连接字符串是`postgis://USER:PASSWORD@HOST:PORT/NAME`

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-10-17T14:46:20.437

我在 stack **cedar 14**上使用 Python 示例应用程序和带有 PostGIS 的常规 Heroku buildpack **Heroku/python**并且遇到了同样的问题，即我的数据库设置被错误的数据库引擎覆盖，导致`heroku run python manage.py migrate`上述错误失败。只是在设置中添加引擎不会改变任何东西。经过一番调查，我发现这是`django_heroku.settings(locals())`我的 settings.py 最后一行中的调用，它正在恢复我的更改。

我通过在之后添加一行再次覆盖引擎来修复它：

```
django_heroku.settings(locals())
DATABASES['default']['ENGINE'] = 'django.contrib.gis.db.backends.postgis' 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2020-09-09T03:51:33.873

我将默认数据库引擎从更改`psycopg2`为`postgis`

之前

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        ...,
    }
} 
```

现在

```
DATABASES = {
    'default': {
        'ENGINE': 'django.contrib.gis.db.backends.postgis',
        ...,
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-26T09:46:30.980

> 设置.py > INSTALLED_APPS

```
INSTALLED_APPS = [
.
.
'django.contrib.gis'
.
] 
```

> Settings.py > 数据库

```
DATABASES = {
'default': {
    'ENGINE': 'django.contrib.gis.db.backends.mysql',
     ...,
    }
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-03-02T04:29:53.660

在可能的情况下，我遇到了这个问题，因为我忘记在 settings.py 中进一步注释掉数据库设置：

```
# Update database configuration with $DATABASE_URL.
db_from_env = dj_database_url.config(conn_max_age=500)
DATABASES['default'].update(db_from_env) 
```

这些行覆盖了我在上面添加的设置。添加这个以防其他人有同样的问题。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-09-28T16:25:35.420

buildpack 是这里的罪魁祸首。我没有使用[Heroku 的 buildpack 页面](https://devcenter.heroku.com/articles/third-party-buildpacks)上列出的 GeoDjango buildpack，而是使用了最近更新[的其中一个分支](https://github.com/guybowden/heroku-buildpack-geodjango)。

此外，当我执行 时`git push heroku master`，Heroku 为应用程序创建了一个开发数据库，​​当我执行同步数据库时，**我的`DATABASES`设置被忽略**，Heroku 尝试使用开发数据库......显然是一个问题，因为开发数据库不/无法安装 PostGIS。`git push`因此，我在使用（使用[正确的 buildpack](https://github.com/guybowden/heroku-buildpack-geodjango) ）创建 dev 数据库后销毁了它，然后运行了 syncdb 并且它可以工作。*

# php - 从 ckeditor 生成的字符串中删除所有空格、换行符和 html 换行符

> ID：12538511
> 
> 赞同：0
> 
> 时间：2012-09-21T21:38:00.803
> 
> 标签：php, regex, ckeditor

我有一堆我目前正在使用 ckeditor 的文本区域，并将值存储在数据库中。当我取回这些值时，我希望能够判断是否没有任何内容输入到特定的文本区域中。然而问题是 ckeditor 喜欢将自己的标记和其他内容放入字符串中，即使该 textarea 没有被触及。

因此，我需要能够从字符串的开头和结尾删除所有空格、换行符和 html 中断（因为我们不想删除好的数据）。这是我目前正在尝试修剪的字符串（从数组中转储的 var_dumped），

```
array(3) {
  ["remediation"]=>
  string(26) "

    But not the third
"
  ["effective"]=>
  string(28) "

    Second one is blank
"
  ["celebrate"]=>
  string(6) "
"
} 
```

我已经尝试了以下方法：trim、[这个 preg replace](https://stackoverflow.com/questions/8022759/remove-spaces-from-the-beginning-and-end-of-a-string)以及那个 preg_replace 的许多变体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:53:41.560

你可以使用`trim`,`strip_tags`与`array_map`

```
$array = array("remediation" => "

    <p> But not the third </p>
","effective" => "

    Second one is blank
","celebrate" => "
");

$array = array_map("strip_tags", $array);
$array = array_map("trim", $array);
var_dump($array); 
```

输出

```
array
  'remediation' => string 'But not the third' (length=17)
  'effective' => string 'Second one is blank' (length=19)
  'celebrate' => string '' (length=0) 
```

# jquery - 调用后禁用 jQuery 函数

> ID：12538512
> 
> 赞同：1
> 
> 时间：2012-09-21T21:38:18.633
> 
> 标签：jquery, html, onclick

如何防止此函数再次调用自身：

```
$(document).ready(function() {  
    login();
});

function login() {
    $('#login').hide();
    $('#pre-login button').on('click',function(event) {
        $('#pre-login').hide();
        $('#login').show();
        $('#login :text').focus();
        return false;
    });
} 
```

我有这两种形式：

```
<form id="pre-login"><p>Already have an account?</p><button type="submit">Login</button></form>
<form id="login">
    <input type="text" placeholder="Email Address" class="login">
    <input type="password" placeholder="Password" class="login"><h4><a href="#">Forgot?</a></h4>
    <button type="submit" class="action">Login</button>
</form> 
```

第一个表单在页面加载后显示，而第二个表单设置为隐藏。单击第一个表单上的登录按钮后，将显示第二个表单，将第一个表单隐藏。但是，单击第二个表单上的登录按钮会导致相反的效果，即使我告诉 jQuery 仅在单击#pre-login 表单的按钮时调用该函数。

我无法确定这里发生了什么，所以我想也许最好在调用一次后禁用该功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T21:39:48.167

您可以使用[`one`](http://api.jquery.com/one/)方法：

> 将处理程序附加到元素的事件。每个元素最多执行一次处理程序。

```
function login() {
    $('#login').hide();
    $('#pre-login button').one('click',function(event) {
        $('#pre-login').hide();
        $('#login').show();
        $('#login :text').focus();
        return false;
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T21:56:34.657

你确定是Javascript导致你看到的吗？我在一个基本的[jsFiddle](http://jsfiddle.net/cincodenada/RARnS/1/)中进行了设置，看起来第二个登录按钮只是重新加载页面（并向其提交登录表单数据），从而将其重置为初始状态。这将使它看起来像 Javascript 正在重新隐藏自己，但实际上它只是按照您告诉它的操作 - 即开始隐藏。

如果您要使用 Javascript，请务必使用 Firefox 中的 Firebug 或 Chrome 的开发者工具——它们非常适合单步执行 Javascript 和监控请求以查看正在发生的事情。

我的猜测是，当您进行额外的检查以接受登录并在用户登录时显示“登录”消息时，一切都会按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T22:01:33.133

您可以使用 .one() 。这确保事件只执行一次..

```
$(document).ready(function() {  
    login();
});

function login() {
    $('#login').hide();
    $('#pre-login button').one('click',function(event) {
        $('#pre-login').hide();
        $('#login').show();
        $('#login :text').focus();
        return false;
    });
} 
```

// 也可以在点击事件执行时解除绑定..

```
function login() {
        $('#login').hide();
        $('#pre-login button').one('click',function(event) {
            $('#pre-login').hide();
            $('#login').show();
            $('#login :text').focus();
            $(this).unbind();
            return false;
        });
    } 
```

# c++ - 来自系统存储的证书上下文始终具有无效的 pbCertEncoded 指针

> ID：12538524
> 
> 赞同：2
> 
> 时间：2012-09-21T21:39:12.783
> 
> 标签：c++, windows, ssl-certificate, cryptoapi

我正在尝试在 CryptoAPI 中使用 CertEnumCertificatesInStore() 来遍历所有根证书并将它们编码为 PEM 文件以与 OpenSSL 一起使用。我找到了一些这样的例子，所以它似乎是可能的，但是，我为每个证书返回的 PCCERT_CONTEXT 有一个无效的 pbCertEncoded 指针，并且 cbCertEncoded（缓冲区大小）始终为 0，但我认为这不应该是本例使用编码缓冲区将证书转换为其他格式。是否有其他人遇到过获取空缓冲区的问题，或者可以看到我缺少的步骤？

我已经验证我实际上是使用 CryptUIDlgViewContext() 函数获取证书。我觉得我错过了一些非常基本的东西。基本代码如下：

```
HCERTSTORE hStore = CertOpenSystemStore(NULL, L"ROOT");

for ( PCCERT_CONTEXT pCertContext = CertEnumCertificatesInStore(hStore, NULL); pCertContext != NULL; pCertContext = CertEnumCertificatesInStore(hStore, pCertContext) )
    {

        // This shows the certificates fine
        CryptUIDlgViewContext(CERT_STORE_CERTIFICATE_CONTEXT,  pCertContext, NULL, NULL, 0, NULL)

        // but
        // pCertContext->pbCertEncoded is a Bad Ptr and
        // pCertContext->cbCertEncoded is always 0

        // If i try
        TCHAR *OutString = NULL;
        DWORD Size = 0;
        DWORD lastError;
        BOOL success = CryptBinaryToString(pCertContext->pbCertEncoded, pCertContext->cbCertEncoded, CRYPT_STRING_BASE64,OutString, &Size); 

        if( !success )
        {
            // I get a invalid parameter error here.
            lastError = GetLastError();
        }        
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T16:42:37.860

以 64 位编译时，编码缓冲区不会被填充。用 32 位编译似乎可以解决这个问题。

# iphone - 我在计算机上运行的 Spotify 应用程序可以与 iPhone/Android 应用程序通信吗？

> ID：12538525
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:39:13.117
> 
> 标签：iphone, spotify

这很不言自明。我基本上想从我为 iphone/android 编写的应用程序发送消息到在计算机上运行的 Spotify 应用程序。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:25:34.347

就像您通过在普通浏览器中运行的 Javascript 应用程序进行通信一样——即通过一个通用的后端系统。

# android - AdView 空指针

> ID：12538527
> 
> 赞同：0
> 
> 时间：2012-09-21T21:39:34.447
> 
> 标签：android, admob

我有一个自定义列表视图，其中包含一个 adview。我在 atview.setVisibility() 收到空指针错误

```
.
.
.
    <com.google.ads.AdView android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            ads:adUnitId="my id"
            ads:adSize="BANNER"
            ads:loadAdOnCreate="true"
            ads:refreshInterval="30"

            />
</LinearLayout> 
```

.

```
setContentView(R.layout.list_content);
        adview = (AdView) findViewById(R.id.adView);
        adview.setVisibility(View.VISIBLE); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:03:06.983

您如何在 中设置广告单元`ListView`，例如，它是列表中的一行，还是添加为页眉/页脚？

如果是一行，那么您应该找到该行的 id，将整行提取到单独的视图中，并使用该视图查找对`AdView`

换句话说，假设 AdView 始终是列表中的第一个元素，您可以这样做：

```
View row = listView.getChildAt(0);
AdView adview = (AdView)row.findViewById(R.id.adView); 
```

# php - 用自适应支付取代贝宝快递

> ID：12538535
> 
> 赞同：0
> 
> 时间：2012-09-21T21:39:57.187
> 
> 标签：php, paypal, express, paypal-adaptive-payments

我是否错误地假设自适应支付没有为用户在我的网站上完成支付提供类似的功能？我的网站目前的运作方式是“卖家”出售产品，而“买家”使用 PayPal 快递购买产品。在一周结束时，我们向所有卖家支付销售产品所获得的收入。

**问题** ：在 x.com 与 Paypal 沟通时，他们不喜欢我们设置付款方案的方式，并强烈建议我们使用他们的 Adaptive Payments api 与 Chained Payments 或 Parallel Payments 同时向卖家付款，而不是等待结束本周的并有资金聚合。

我们使用自适应支付 API 的最大问题是，用户访问 PayPal 支付购买费用的可能性很小，然后 PayPal 通过返回 URL 将他们重定向到我的网站，而我们的服务器可能太忙而无法响应. 在这种情况下，客户通过 PayPal 付款，但由于我们的系统离线，他们的交易可能不会记录在我们的服务器上，我们最终不会交付产品。

我目前在我的网站上设置了 PayPal 快递；流程如下：

1.  买家进入产品页面，点击支付宝支付
2.  买家被重定向到贝宝登录
3.  买家批准付款并立即返回我的网站。
4.  买家在我的网站上查看交易并点击“支付”完成交易
5.  如果我的网站可以与 SQL 服务器建立连接，并且可以与 paypal API 成功通信，我会调用以完成交易。

    我知道预先批准的付款，但这不会涉及客户在贝宝上检查他们“批准在一定时间内提取一定数量的钱”吗？我不想让我们的客户感到无法控制他们的财务状况。另外，PayPal IPN 会是一个严肃的选择吗？我读过用户将 IPN 与自适应支付结合使用，因为用户通常会在处理完支付后立即关闭窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T15:56:18.513

您可以使用 Paypal IPN 作为可靠的选择。看看这一段（来自[Paypal IPN Docs](https://cms.paypal.com/cgi-bin/marketingweb?cmd=_render-content&content_ID=developer/e_howto_admin_IPNIntro)）：

> “IPN 消息服务并不假定您的听众会及时收到所有消息。由于互联网并非 100% 可靠，消息可能会丢失或延迟。为了处理传输和接收延迟或失败的可能性， IPN 消息服务实现了一种重试机制，该机制会以不同的时间间隔重新发送消息，直到您确认已成功接收到消息。消息可能会在原始消息之后的四天内重新发送。

# jquery - 使用jquery找到匹配项时添加类名，每个？

> ID：12538545
> 
> 赞同：0
> 
> 时间：2012-09-21T21:40:52.160
> 
> 标签：jquery, arrays, addclass, removeclass, each

当找到匹配的**关键字**时，我想向元素添加一个类`href`

html,

```
<ul class="menu-header">
<li><a href="http://localhost/website/#/home/" class="button-header current">HOME</a></li>
<li><a href="http://localhost/website/#/gallery/" class="button-header">GALLERY</a></li>
<li><a href="http://localhost/website/#/people/" class="button-header">PEOPLE</a></li>
<li><a href="http://localhost/website/#/contact/" class="button-header">Contact</a></li>
</ul> 
```

因此，如果关键字是“gallery”，则应将“current”添加到该元素中，并且必须删除其他元素中的“current”类。

jQuery,

```
var request = "gallery";

// Add the class to the menu.
$(".menu-header li").each(function(){

    var object = $(this); // which is <li>
    var siblings = object.siblings(); // other <li>s

    // Clean all siblings' style.
    siblings.find("a").removeClass('current');
    var array_link = $("a",this).attr("href").split('/');

    if ($.inArray(request, array_link) == 1) $("a.button-header",object).addClass("current");

}); 
```

我设法从所有元素中删除了“当前”类，但无法添加“当前”类。

有什么我错过的想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T21:45:20.690

您无需自己遍历它们即可完成此操作：

```
$(".menu-header li a").removeClass("current").filter("[href*=gallery]").addClass("current"); 
```

`li a`从任何拥有它的类中删除当前类，然后将其添加到`li a`具有匹配的 href 的类中`gallery`。这里又是一个变量：

```
var request = "gallery";
$(".menu-header li a").removeClass("current").filter("[href*=" + reqeust + "]").addClass("current"); 
```

# python - 如何在生产代码中确保索引？

> ID：12538548
> 
> 赞同：0
> 
> 时间：2012-09-21T21:41:03.670
> 
> 标签：python, mongodb, indexing, tornado, pymongo

如何在生产代码中添加索引？我只找到了将其添加为命令而不嵌入完整代码的方法：

如果要添加索引以加快查询速度：

```
db.users.ensure_index(the_key) 
```

所以我尝试将它添加到一个类中：

```
class Registration(BaseHandler):
    def post(self):
        # do stuff to get user information using the self.get_argument()
        user={"all information":informations}
        self.db.users.insert(user, w=1)
        self.db.users.ensure_index(pseudo, commune) 
```

但我得到这样的错误：

```
self.db.users.ensure_index(pseudo, commune)
      File "build\bdist.win-amd64\egg\pymongo\collection.py", line 829, in ensure_index
      return self.create_index(key_or_list, cache_for, **kwargs)
  File "build\bdist.win-amd64\egg\pymongo\collection.py", line 740, in create_index
    self.__name, name, cache_for)
  File "build\bdist.win-amd64\egg\pymongo\connection.py", line 330, in _cache_index
    expire = datetime.timedelta(seconds=cache_for) + now
TypeError: unsupported type for timedelta seconds component: unicode 
```

而且我想在使用插入子文档时这将是相同的提示：

```
self.db.users.update({"email":email}, {"$push":{"produit_up":{"id":id, "namep":namep, "nombre":nombre}}})
self.db.users.ensure_index("product_up.namep") #???? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:47:26.613

您的错误是传递非整数 as 的结果`cache_for`，它告诉`pymongo`缓存索引存在的事实多长时间。

我不知道你的代码是什么`psuedo`or in ，但是in`commune`的正确用法是. [您可以在pymongo 文档](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.ensure_index)中阅读有关此内容的更多信息，但其要点是一个字符串命名键（是的，这可以包括您显示的子文档）或包含（键，方向）的元组列表方向为或的对。`ensure_index``pymongo``ensure_index(key_or_list, cache_for=300, **kwargs)``key_or_list``pymongo.ASCENDING``pymongo.DESCENDING`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T09:28:11.440

得到了答案：

> 否 否，ensureIndex 与创建索引相同。它没有什么特别的，也许函数的名字真的有点奇怪，应该叫 create_index 。由于 Mongo 没有预定义的模式 (NoSQL)，因此它必须以与 SQL 不同的方式创建索引。当用户决定他们需要特定字段的索引时，建议的方式是通过客户端。当客户端使用它们时，这就是集合和不创建集合的方式。这个函数被称为 ensureIndex()。因此，您的应用程序中只需要一个调用 ensureIndex() ，它应该是该索引的字段列表作为第一个参数，以及第二个参数的任何额外选项（如稀疏）。管理员不需要做任何工作来保持这个索引的完整性，好吧，不是每月一次，但如果集群中出现故障，那么是的，管理员可能需要做一些工作来重新制作索引。我个人有一个每次加载我的应用程序时都会调用的索引文件。我希望这能把事情弄清楚一点，

[来自Google 群组](https://groups.google.com/group/mongodb-user/browse_thread/thread/af10a24d818e5f99)的回答

# javascript - 在 MVVM modelView 中进行初始化是否有意义？

> ID：12538549
> 
> 赞同：2
> 
> 时间：2012-09-21T21:41:06.600
> 
> 标签：javascript, mvvm, knockout.js

我是 MVVM 设计模式的新手，在构建一些示例时，我一直遇到这样的问题：我应该在哪里放置 javascript 代码来初始化页面上的组件？我是否将它们包含在视图模型中、创建简单的函数或创建不同的对象？

例如说我有一个需要通过 jquery ajax 填充的表单的下拉列表？放置该代码的最佳位置在哪里？

```
var viewModel = function() {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);
    init:function () {
        //Load components here
    }
};

$(document).ready(function () {
    viewModel.init();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:45:51.057

对于淘汰赛，您应该使用该`self`方法。要回答您的问题，您应该有一些初始化代码，例如：

```
var viewModel = function() {
    var self = this;
    self.firstName = ko.observable(first);
    self.lastName = ko.observable(last);
    self.retrieveData = function() {
           $.ajax({
              url: "test.html",
              success: function(data) {
                 self.firstName(data.firstName);
                 self.lastName(data.lastName);
              }
            });
    };
};

$(document).ready(function () {
   var vm = new viewModel(); 
   vm.retrieveData();
} 
```

# http - 不变：* 只是使 HTTP 响应无法缓存？

> ID：12538555
> 
> 赞同：0
> 
> 时间：2012-09-21T21:41:36.427
> 
> 标签：http, caching, http-caching

如果是这样，我很惊讶这样的事情竟然存在。你为什么需要这样的东西？在我看来，您可以使用其他标头（更容易）防止缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T04:22:33.750

这是它的一种效果，但它也告诉客户端响应是根据无法在 Vary 标头中表达的内容选择的。

# c# - 实体框架。如何在数据库表更改时自动更新组合框？

> ID：12538561
> 
> 赞同：0
> 
> 时间：2012-09-21T21:42:32.413
> 
> 标签：c#, entity-framework

我只是从 C# 和 Entity Framework (5.0) 开始。我有以下代码将我的组合框绑定到我的数据库表，但是当我更新我的员工列表时，组合框不会自动更新。我能想到的唯一解决方案是将 linq 查询放入一个单独的方法中`update_cmbEmployees()`，并在每次需要更新时调用它，但这不是一个非常优雅的解决方案，并且在复杂的应用程序中可能会很混乱。所以我想像这样的问题一定有更好的解决方案。有什么我可以参加的活动吗？或者也许我把它装错了？

```
BindingSource bsCmbEmployees;
    private void Form1_Load(object sender, EventArgs e)
    {
        using( var ctx = new TimeKeepEntities())
        {
            var activeEEs = from ee in ctx.tblEmployees
                            where ee.Active
                            select ee;

            bsCmbEmployees = new BindingSource();
            bsCmbEmployees.DataSource = activeEEs.ToList();
            cmbEmployees.DataSource = bsCmbEmployees;
            cmbEmployees.DisplayMember = "Name";
            cmbEmployees.ValueMember = "EeID";
          }
   } 
```

Edit1：添加了实体框架版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T18:37:15.903

AFAIK 当数据在 EF 中插入/更新时，无法“触发”某些事件。而且我认为您目前的方法没有问题。

我也看不出它在复杂的应用程序中是如何变得混乱的。我曾在企业级多层 Web/桌面应用程序上工作过，这些应用程序具有类似且更复杂的需求，而无需编写杂乱的代码。您能否详细说明您在复杂场景中面临的问题？

# batch-file - 删除批处理文件中的尾部反斜杠

> ID：12538562
> 
> 赞同：1
> 
> 时间：2012-09-21T21:42:35.250
> 
> 标签：batch-file, character, backslash

我正在编写一个简短的批处理脚本，它尝试获取文本文件的第一行并删除尾部反斜杠（如果存在）。这将重复输入文件的其余行。但是，当我运行脚本时，该行不会删除反斜杠。我的猜测是这是一个简单的修复，但我尝试了几种故障排除方法，但都没有成功。代码贴在下面以供参考。谢谢！

```
@echo on
setLocal EnableDelayedExpansion

::set firstline to firstline of test.txt
set /p firstline=<test.txt

::Remove trailing slash if present
IF !firstline:~-1!==\ SET firstline=!firstline:~0,-1!

::Output firstline (without \ to new txt file)
echo !firstline!>test2.txt

endlocal 
```

* * *

test.txt 文件：

```
C:\Desktop\example\path\ 

C:\Desktop\example\path\2\

C:\Desktop\example\path\test\ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T04:46:02.363

你是对的，这是一个简单的问题。事实上，它是通过引入 4 个字符来解决的，都是一样的。

批量暴露反斜杠是个坏主意，它可能会使解释器误以为它正在处理实际的文件或路径。你应该用双引号括起来。其他字符也是如此，包括 !%&*?/\<>,。主要是处理路径和文件的特殊字符。可能还有更多，有些只是偶尔出现的问题。在重定向字符旁边时，即使 1 和 2 也会引起麻烦。

只是为了让您知道，这里不需要`setlocal`延迟扩展符号`!`，尽管它没有害处。（除了在这种情况下延迟表示法使调试更加困难，通过在 ECHO 为 On 时显示变量名称而不是其内容。）

此外，在修剪不需要 0 in 的字符串的最后一个字符时`:~0,-1`，使用`:~,-1`就足够了。尽管无论哪种方式都没有坏处。

最后，这`echo on`是不必要`echo on`的，默认情况下也是如此。`Echo On`更多的是只显示长文件执行的一小部分。不过，再一次，它没有害处。

```
@echo on
setLocal EnableDelayedExpansion

::set firstline to firstline of test.txt
set /p firstline=<test.txt

::Remove trailing slash if present
::Your error is below this
IF "!firstline:~-1!"=="\" SET firstline=!firstline:~,-1!

::Output firstline (without \ to new txt file)
echo !firstline!>test2.txt

endlocal 
```

# ios - glScissor API 在较新版本的 iOS (5+) 上的当前行为是什么

> ID：12538568
> 
> 赞同：1
> 
> 时间：2012-09-21T21:43:27.153
> 
> 标签：ios, opengl-es, cocos2d-iphone

我正在使用 Cocos2d-iPhone 2，并且我有一个 CCNode 派生类，用于使用 glScissor 剪辑子节点。在研究我的解决方案时，我遇到了很多代码和注释，表明如果 iOS 设备处于纵向以外的任何方向，则需要转换传递给 glScissor 的坐标，因为 glScissor 使用原始设备坐标。

然而，经过几个小时试图让某些东西正常工作后，我发现如果我不做任何转变，无论方向如何，一切都会按预期工作。

有谁知道这个 API 在新版本的 iOS 中是否已更改？我对依赖于我所观察到的内容编写大量代码有点谨慎，但我不知道为什么我看到的行为与其他人似乎看到的如此不同。

我的开发一直针对 iOS 5.1，据我所知，它只支持 3GS+ 和 iPad。所有涉及与我观察到的行为相冲突的 glScissor 互联网评论往往可以追溯到 2011 年初或更早，并且早于 iOS 5.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T14:22:15.580

我在面向横向的应用程序中使用 cocos2d 1.x。我发现`glScissors()`将其参数 x、y、宽度和高度视为设备方向是纵向的。我必须交换参数（x 和 y，宽度和高度）才能在横向模式下正确剪辑屏幕。

现在我已经升级到 cocos2d 2.x 我不再需要执行上述操作，因为横向方向受到`glSccissors()`.

# iphone - 创建在启动时和每 X 分钟运行一次的 iPhone 应用程序

> ID：12538570
> 
> 赞同：0
> 
> 时间：2012-09-21T21:43:46.400
> 
> 标签：iphone, objective-c, ios

我已经编写了一个 Android 应用程序，现在正在移植到 iPhone。Android 版本使用广播接收器在设备重新启动时收到通知，并在那时与我的网络服务器进行后台同步。然后它使用警报管理器在 X 分钟内安排另一个通知（X 由用户在我的应用程序设置中设置），它只是进行另一个后台同步。

这在 iPhone 上是否可行，我应该查看哪些 API？我在 OSX Mountain Lion 上使用最新的 XCode 版本（我认为是 4.5）进行编程，主要针对 iPhone，但也想要在 iPad 上运行的东西。iPhone 4 (iOS 5.0) 及更高版本会很好，因为我的大多数客户都有更新的设备。

如果不是很明显，我对 XCode、Mac OS、iOS 和 Objective-C 还是很陌生（仍在尝试使用 Alt-TAB 切换窗口）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:47:01.040

这在 iPhone 上是不可能的——它与 Apple 的多任务模型不兼容。如果它有助于理解动机，Apple 的基本立场是，从电池寿命的角度来看，允许应用程序不受限制的后台执行权限将是一个非常糟糕的主意，因为没有切实可行的方法来确保此类应用程序编写得很好。

如果您想让用户知道他们当前不在线的情况，您需要在启动时进行同步并使用推送通知。有一些特殊类别的应用程序可以在某些事件（如位置变化、接收 VoIP 呼叫或播放音频内容）时在严格限制的时间段内被唤醒，但该列表是严格且受限的。请参阅[此文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)，特别注意从“实现长时间运行的后台任务”开始的内容。

# magento - Magento 从 Mage 命名空间调用我的命名空间块

> ID：12538571
> 
> 赞同：1
> 
> 时间：2012-09-21T21:44:02.017
> 
> 标签：magento, module, namespaces, block

我已经在这里待了几个小时了。Magento 一直试图从 Mage 命名空间而不是我自己的命名空间调用我的块。

错误：异常 'Mage_Core_Exception' 与 /Library/WebServer/Documents/magento/app/Mage.php:594 中的消息“无效块类型：Mage_Newcart_Block_Adminhtml_Igrid”

我到处找找问题。我知道它达到了我的布局并且手柄有效：

```
<?xml version="1.0"?>

<layout version="0.1.0">

      <images_adminhtml_index_index>
           <reference name="content">
                  <block type="newcart/adminhtml_igrid"  name="adminblock" />
           </reference>
      </images_adminhtml_index_index>
</layout> 
```

但是，我的块（实际上是一个网格容器）不会从正确的命名空间中调用：

app/code/local/[命名空间]/Newcart/Block/Adminhtml/Igrid.php

```
class [Namespace]_Newcart_Block_Adminhtml_Igrid extends Mage_Adminhtml_Block_Widget_Grid_Container
{
    public function __construct()
    {

     $this->_controller = 'adminhtml_imagegrid';
     $this->_blockGroup = 'newcart';
     $this->_headerText = 'Images';
     $this->_addButtonLabel = 'Add an Image';

     parent::__construct();
     }

     protected function _prepareLayout()
     {
         //Mage::log($this->createBlock( $this->_blockGroup.'/' . $this->_controller . '_grid',
         //   $this->_controller . '.grid'), null, ‘layout.log’ );
        $this->setChild( 'grid',
            $this->getLayout()->createBlock( $this->_blockGroup.'/' . $this->_controller . '_grid',
            $this->_controller . '.grid')->setSaveParametersInSession(true) );
        return parent::_prepareLayout();
     }
} 
```

注意：Imagegrid 是同一目录中的文件。我试过'$this->_controller = 'adminhtml_igrid';'，但是，它没有解决这个问题。

配置：

```
<?xml version="1.0"?>

  <config>
     <modules>
        <[namespace]_Newcart>
          <version>0.1.0</version>
        </[namespace]_Newcart>
     </modules>
     <admin>
        <routers>
            <images>
                <use>admin</use>
                <args>
                    <module>[namespace]_Newcart</module>
                    <frontName>imageadmin</frontName>
                </args>
            </images>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <images>
                    <file>images.xml</file>
                </images>
            </updates>
        </layout>
    </adminhtml>
    <global>
        <blocks>
            <[namespace]_newcart>
                <class>[namespace]_Newcart_Block</class>
            </[namespace]_newcart>
        </blocks>
        <models>
            <images>
                <class>[namespace]_Newcart_Model</class>
                <resourceModel>image_resource</resourceModel>
            </images>  
            <image_resource>
                <class>[namespace]_Newcart_Model_Resource</class>
                <entities>
                    <imagemodel>
                        <table>nw_images</table>
                    </imagemodel>
                </entities>
            </image_resource>
        </models>
    </global>
</config> 
```

我到处寻找原因，不知道在哪里寻找错误。请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:11:00.513

回答（谢谢，ivantedja！）

它应该是 'newcart'，而不是 '[namespace]_newcart'（在 blocks 节点中，您不需要指定命名空间）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:05:51.377

只需将下一个代码添加到模块的 config.xml 中：

```
<config>
    ...
    <global>
        ...
        <blocks>
            <[namespace]_newcart>
                <class>[Namespace]_Newcart_Block</class>
            </[namespace]_newcart>
        </blocks>
        ...
    </global>
    ...
</config> 
```

# powershell - 如何从 Powershell 中的 .net 框架调用重载的静态方法？

> ID：12538572
> 
> 赞同：4
> 
> 时间：2012-09-21T21:44:04.287
> 
> 标签：powershell, overloading

以下是我尝试过的内容和发生的情况的记录。

我正在寻找如何调用特定的重载以及为什么以下不起作用的解释。如果您的回答是“您应该改用此命令行开关”或“调用两次”，请理解我不接受您的回答。

```
PS C:\> [System.IO.Path]::Combine("C:\", "foo")
C:\foo
PS C:\> [System.IO.Path]::Combine("C:\", "foo", "bar")
Cannot find an overload for "Combine" and the argument count: "3".
At line:1 char:26
+ [System.IO.Path]::Combine <<<< ("C:\", "foo", "bar")
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : MethodCountCouldNotFindBest

PS C:\> [System.IO.Path]::Combine(, "C:\", "foo", "bar")
Missing ')' in method call.
At line:1 char:27
+ [System.IO.Path]::Combine( <<<< , "C:\", "foo", "bar")
    + CategoryInfo          : ParserError: (CloseParenToken:TokenId) [], Paren
   tContainsErrorRecordException
    + FullyQualifiedErrorId : MissingEndParenthesisInMethodCall

PS C:\> [System.IO.Path]::Combine($("C:\", "foo", "bar"))
Cannot find an overload for "Combine" and the argument count: "1".
At line:1 char:26
+ [System.IO.Path]::Combine <<<< ($("C:\", "foo", "bar"))
    + CategoryInfo          : NotSpecified: (:) [], MethodException
    + FullyQualifiedErrorId : MethodCountCouldNotFindBest 
```

这就是我在 c# 中所做的，它有效：

```
var foobar = Path.Combine(@"C:\", "foo", "bar");
Console.WriteLine(foobar); 
```

什么 Powershell 会调用该特定的重载？Path.Combine 有这两个：

```
public static string Combine (string path1, string path2, string path3);
public static string Combine (params string[] paths); 
```

可以同时调用这两个，还是只调用一个？显然，在这种特定情况下，很难区分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T22:03:20.917

接受多个类似参数的路径重载仅在 .NET 4 及更高版本中可用。您需要创建一个配置文件来告诉 Powershell 使用 .NET 4 启动，这将使您能够访问这些方法。

在 $pshome 中创建一个名为“powershell.exe.config”的文件，其内容如下：

```
<?xml version="1.0"?> 
<configuration> 
    <startup useLegacyV2RuntimeActivationPolicy="true"> 
        <supportedRuntime version="v4.0.30319"/> 
        <supportedRuntime version="v2.0.50727"/> 
    </startup> 
</configuration> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T22:23:58.363

要添加，发出命令：

```
[System.IO.Path]::Combine.OverloadDefinitions 
```

从你的外壳，你应该得到以下输出：

```
static string Combine(string path1, string path2) 
```

如您所见，没有可用的重载。

发出命令：

```
$PSVersionTable 
```

并查看 CLRVersion - 您会看到您使用的是 4.0 之前的 .net 版本，因此 Path.Combine 没有可用的重载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:55:32.473

在这种情况下，您需要创建一个 params 数组并在其上调用 Combine 方法。params 数组可以创建如下：`@("C:\", "foo", "bar")`

我相信以下事件作为参数`"C:\,foo,bar"`应该调用第二种方法。

我不确定你对 Path.Combine 有什么困惑。Combine 有两个重载方法，一个是组合两个字符串，另一个是一个接受一堆参数的参数数组，powershell 中的第二种情况的处理方式与 c# 不同。

希望这能回答你的问题..

仅供参考，我是一个powershell noob ..

# asp.net - asp.net gridview 排序自定义数据源

> ID：12538578
> 
> 赞同：1
> 
> 时间：2012-09-21T21:44:35.177
> 
> 标签：asp.net, gridview

我有一个正在填充的网格视图。现在我想启用排序。我已经完成了所有必需的代码 - 即启用对标记的排序并在用户排序时提供要调用的事件。

它是我丢失的排序事件 - 我已经尝试了谷歌的一些实现，但我不太确定。基本上我是否正确地说我需要根据用户想要排序的列以及 ASC 或 DESC 向服务器提供新的查询？如果是这样，这听起来需要更多的工作......更多的查询。

谢谢达摩

**绑定网格的代码**

```
 // Load the main homepage data to the grid
                    FAServices fServices = new FAServices(sConn);
                    FAAuditOverallStatusLatest fAuditOverallStatusLatest = new FAAuditOverallStatusLatest(sConn);
                    GridViewMain.DataSource = fAuditOverallStatusLatest.getAuditOverallStatusLatest();
                    GridViewMain.DataBind(); 
```

**排序后的代码**

```
protected void GridViewMain_Sorting(object sender, GridViewSortEventArgs e)
{

    // Switch statements required here along with Query for each column i have in the grid

} 
```

**网格标记**

```
<asp:GridView ID="GridViewMain" OnRowDataBound="GridViewMainRowDataBound" OnPageIndexChanging="GridViewMain_PageIndexChanging"
                                        runat="server"  AllowPaging="True" PageSize="50" PagerSettings-Position="TopAndBottom"
                                        CssClass="mGrid"
                                        PagerStyle-CssClass="pgr"
                                        AlternatingRowStyle-CssClass="alt data-row"
                                        OnRowCreated="GridViewMain_RowCreated"                          
                                        RowStyle-CssClass="data-row"                                        
                                        AllowSorting="True"
                                        OnSorting="GridViewMain_Sorting"
                                        >
                                     </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:03:43.147

> 我是否正确地说我需要根据用户想要排序的列以及 ASC 或 DESC 向服务器提供新的查询？如果是这样，这听起来需要更多的工作......更多的查询。

是的，你是对的。您需要再次查询数据源以应用新排序。但是最后一句话是不对的。你只需要改变`ORDER BY`你的 sql （或者你用来订购的任何东西`DataSource`）。您可以`ViewState`为订单列和方向使用一个变量（您需要在回发中保留它，因此需要 ViewState）。我给你看一个例子：

首先，您需要设置[SortExpression](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.sortexpression.aspx)。

```
<asp:TemplateField HeaderText="Name" SortExpression="Name">
    <ItemTemplate>
        <a href='sometest.aspx?ID=<%# DataBinder.Eval(Container.DataItem, "TestID").ToString()%>'><%# DataBinder.Eval(Container.DataItem, "Type").ToString()%></a>
    </ItemTemplate> 
</asp:TemplateField>    
<asp:TemplateField HeaderText="Address" SortExpression="Address">
    <ItemTemplate>
                <div align="right"><%# (DataBinder.Eval(Container.DataItem, "HouseNumber"))%></div>
    </ItemTemplate> 
</asp:TemplateField> 
```

在代码隐藏中，您可以存储当前`SortExpression`和`SortDirection`in `ViewState`：

```
private string SortExpression {
    get {
        if(String.IsNullOrWhiteSpace((String)ViewState["SortExpression"])
            ViewState["SortExpression"] = "Name ASC";

        return (String)ViewState["SortExpression"];
    }
    set { ViewState["SortExpression"] = value; }
} 
```

这是`Sorting`事件处理程序。请注意，这`BindGrid`是您设置`DataSource`和调用的方法`GridView.DataBind`

```
protected void theGrid_Sorting(object sender, System.Web.UI.WebControls.GridViewSortEventArgs e)
{
    string currentSortColumn = null;
    string currentSortDirection = null;
    currentSortColumn = this.SortExpression.Split(' ')[0];
    currentSortDirection = this.SortExpression.Split(' ')[1];

    if (e.SortExpression.Equals(currentSortColumn)) {
        //switch sort direction
        switch (currentSortDirection.ToUpper()) {
            case "ASC":
                this.SortExpression = currentSortColumn + " DESC";
                break;
            case "DESC":
                this.SortExpression = currentSortColumn + " ASC";
                break;
        }
    } else {
        this.SortExpression = e.SortExpression + " ASC";
    }

    //load the data with this SortExpression and DataBind the Grid
    BindGrid();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:26:39.073

我有一个更简单的几行方法：（vb.net 中的代码，在 c# 中翻译很容易）

```
Dim SortDirection As String, SortExpression As String
SortExpression = e.SortExpression
If (SortExpression = ViewState("SortExpression") And ViewState("SortDirection") = "asc") Then
    SortDirection = "desc"
Else
    SortDirection = "asc"
End If
ViewState("SortDirection") = SortDirection
ViewState("SortExpression") = SortExpression

Dim dt As Data.DataTable = ds.Tables(0) '<<<< fill ds with a method
dt.DefaultView.Sort = SortExpression & " " & SortDirection

GridView1.DataSource = dt.DefaultView
GridView1.DataBind() 
```

就这样。然后很容易将此代码放在通用类中，以应用于其他网格视图

# sql - 针对多个地址字段的匹配失败，我无法解决

> ID：12538580
> 
> 赞同：2
> 
> 时间：2012-09-21T21:44:35.980
> 
> 标签：sql, full-text-search, street-address

我有一个结构如下的表：

```
address_number  address_street  address_town  address_county  address_postcode 
```

网站上有一个搜索框，人们可以在其中输入部分地址，我需要根据他们提交的信息确定如何返回准确的结果，但是邮政编码的存储方式有一些复杂性：BN2 1HN 和`address_number`可以小到只有 1 个字符。

我尝试`CONCAT`将地址字段放在一起并将其与输入进行比较，但没有一个有效，我还尝试使用`LIKE`循环遍历表中的每个字段，但这一点都不令人满意。理想情况下，我希望首先返回最准确的结果，但我很欣赏这只能用`MATCH AGAINST`.

任何帮助将不胜感激，如果您有 PayPal 捐赠按钮（提供礼仪允许这样做？），您将获得明确的答案。这是我的第一个问题，因为我很固执，通常喜欢自己解决这些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T18:28:49.777

由于提到了

```
MATCH(col1,col2) ... AGAINST(expr) 
```

但这是一种使用 LIKE 的方法，它可能对 SQL Server 有所帮助：

```
/*
CREATE TABLE tab1 (address_number VARCHAR(10),  address_street VARCHAR(50), 
address_town VARCHAR(50),  address_county VARCHAR(50),  address_postcode VARCHAR(50))
INSERT INTO tab1 VALUES ('100','Queen Street','Winchester','Hartford','XYZ 123')
INSERT INTO tab1 VALUES ('10','Downing Street','London','','XYZ 124')
--*/
SELECT * FROM Tab1
WHERE (address_number+' '+address_street+' '+address_town+' '+address_county
+' '+address_postcode + ' '+replace(address_postcode,' ','')/*remove blank*/
) LIKE '%100 QUEEN%' 
```

要像 google 一样，您需要尝试对用户输入的内容进行多种变体，并根据地址是否以用户输入的内容开头、是否包含字面内容等来排序。

# backbone.js - 复杂主干应用程序中的事件管理

> ID：12538584
> 
> 赞同：2
> 
> 时间：2012-09-21T21:45:19.530
> 
> 标签：backbone.js, marionette, backbone-events

我有具有许多嵌套视图（木偶布局和区域）的复杂主干应用程序，并且我已经使用木偶事件管理器在这些视图之间进行协调。但是在编写代码的一半时，我意识到我正在创建太多事件并且更复杂的是，我很少有事件触发多个动作。

其他复杂的主干应用程序如何管理事件。在处理事件时要记住的任何准则、最佳实践等，然后再将自己挖入更大的漏洞。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T20:25:37.850

我不确定您使用的是哪个事件框架，因此无需任何假设，请确保您使用的是 Marionette 的[EventBinder](https://github.com/marionettejs/backbone.eventbinder)，它可在所有 Marionette 视图中直接使用，以及可选的[EventAggregator](https://github.com/marionettejs/backbone.wreqr)用于跨越太多边界的应用程序级事件并用于解耦模块。

我不是该主题的专家，因此以下内容无论如何都不是权威：

*   如果父视图需要在同一个模块的子视图中触发动作，那么直接使用方法调用而不是事件机制。
*   如果子视图需要在父视图中触发动作，则使用`EventBinder`如下：

在父视图中：

```
this.bindTo(subview, 'myscope:myevent', this.myevetHandler); 
```

在子视图中：

```
this.trigger('myscope:myevent'); 
```

*   对于跨模块或跨视图事件传播，基本上是应用程序范围的事件，请使用[应用程序的](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.application.md) `EventAggregator`：

    ```
    MyApp = new Backbone.Marionette.Application();

    MyApp.vent.on("foo", function(){
      alert("bar");
    });

    MyApp.vent.trigger("foo"); // => alert box "bar" 
    ```

*   对于不应依赖于特定应用程序对象的可重用模块，您可以使用自定义`EventBinder`或`EventAggregator`.

有关更长的讨论，请参阅：

*   [何时使用 EventBinder](https://github.com/marionettejs/backbone.eventbinder/wiki/When-to-use-the-eventbinder) wiki 页面；和
*   [引用、路由和事件聚合器：协调 Backbone.js 中的视图](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)，作者 Derick Bailey。

# python - 如何在 Python 中找到最长的字符串？

> ID：12538586
> 
> 赞同：12
> 
> 时间：2012-09-21T21:45:21.730
> 
> 标签：python, string, string-length

类似的东西`max(len(s1), len(s2))`只会返回最大长度。但是如果我真的想找出哪个字符串更长，或者将它保存到另一个字符串，那是怎么做的呢？`max(s1,s2)`似乎返回具有较大值的字符串，但不一定是最长的。

注意：这必须在没有列表或数组的情况下完成。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-21T21:47:16.633

`max`接受一个`key`函数，该函数导致为 each`max`获取最大值，但仍返回, 以机智：`key(val)``val``val`

```
>>> max("foobar", "angstalot")
'foobar'
>>> max("foobar", "angstalot", key=len)
'angstalot' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T21:58:26.187

只需一个基于每个字符串长度的简单条件表达式即可：

```
longest = s1 if len(s1) > len(s2) else s2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T21:47:29.143

```
def longest(a, b):
   if len(a) > len(b):
       return a
   return b 
```

# highcharts - HighCharts - 如何左右对齐（对齐）xAxis标签

> ID：12538593
> 
> 赞同：1
> 
> 时间：2012-09-21T21:45:50.417
> 
> 标签：highcharts, axis

我想在下图中对齐 x 轴标签，并在左侧与 y 轴对齐，在右侧与 y 轴对齐：

![在此处输入图像描述](../Images/5ebbb92a52c4cca0a3e0ccdd00f896a2.png)

以下是 x 轴和 y 轴系列的相关代码：

```
var chart2 = new Highcharts.Chart({
  chart: {
    renderTo: 'discount_chart',
    type: 'line'
  },
  title: {
    text: "#{title_text_sense}"
  },
  xAxis: {
    title: { text: 'Price Range - $' },
    categories: #{price_array},
    showLastLabel: true,
  },
  yAxis: [{
    min: 0,
    type: 'linear',
    title: { text: 'Rate of Return - %' }
  },{
    min: 0,
    type: 'linear',
    title: { text: 'Disc. N.Rev./Invest.(ROI)' },
    opposite: true
  }], 
```

请注意，变量是从数据库中读取的，因此用于定义 x 轴的 price_array 包含此示例的这些值：

["$60.00","$70.00","$80.00","$90.00","$100.00"]

有没有办法在 HighCharts 中做到这一点？

谢谢。

巴拉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:50:21.260

谢谢你的时间。对此，我真的非常感激。但我想通了。这是我发布的原始 jsFiddle 链接的一个分支。它正是我想做的。基本上，我删除了 xAxis 中的类别选项，然后使用了 xAxis 的自定义标签格式化程序；它对我有用。下边是

我的 Highcharts JavaScript 代码可以做到这一点：

```
var x_labels = ["$60.00","$70.00","$80.00","$90.00","$100.00"];
var chart2 = new Highcharts.Chart({
    chart: {
        renderTo: 'discount_chart',
        type: 'line'
    },
    title: {
        text: "Big Wells 2 Economic Sensitivity Plot"
    },
    xAxis: {
        title: {
            text: 'Price Range - $'
        },
        labels: {
            formatter: function() {
                return x_labels[this.value];
            }
        },
        showLastLabel: true,
    },
    yAxis: [{
        min: 0,
        type: 'linear',
        title: {
            text: 'Rate of Return - %'
        }},
    {
        min: 0,
        type: 'linear',
        title: {
            text: 'Disc. N.Rev./Invest.(ROI)'
        },
        opposite: true}],
    tooltip: {
        formatter: function() {
            var seriesName = {
                'Rate of Return': 'ROR',
                'Return on Investment': 'ROI'
            }[this.series.name];
            return '<b>' + this.series.name + '</b><br/>Price = ' + x_labels[this.x] + ', ' + seriesName + ' = ' + (Math.round(this.y * 1000) / 1000);
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -20,
        y: 100,
        borderWidth: 0
    },
    plotOptions: {
        series: {
            marker: {
                enabled: false,
                states: {
                    hover: {
                        enabled: true
                    }
                }
            }
        }
    },
    series: [{
        name: 'Rate of Return',
        color: 'red',
        data: [-4.608072102337354, -0.738803860865155, 4.653294970652549, 8.92228974293352, 14.025752639875485],
        pointStart: 0},
    {
        name: 'Return on Investment',
        color: 'blue',
        data: [0.5863077142857144, 0.7098245714285715, 0.8340802857142857, 0.9587922857142858, 1.083803],
        pointStart: 0,
        yAxis: 1}]
}); 
```

[上述代码的 jSFiddle Demo fork：](http://jsfiddle.net/B536E/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:24:30.263

您应该设置[plotOptions.line.pointPlacement](http://api.highcharts.com/highstock#plotOptions.line.pointPlacement)属性

> 点位：字符串
> 
> 可能的值：null、“on”、“between”。
> 
> 在柱形图中，当 pointPlacement 为“on”时，该点不会创建 X 轴的任何填充。如果 pointPlacement 为“between”，则列将在刻度之间布置。例如，这对于可视化两个时间点之间的数量或极坐标图的某个扇区中的数量很有用。默认为空。

虽然上面的 API 参考提到了柱形图，但它通常适用于任何类别图表。
由于您不需要填充，因此需要将其设置为`"on"`

```
plotOptions: {
    series: {            
        pointPlacement: "on"
    }
}, 
```

[从 origin @ jsFiddle 开始的类别图表](http://jsfiddle.net/jugal/Jbg9L/)

# knockout.js - 淘汰赛 - 过滤我的数据有一点问题

> ID：12538597
> 
> 赞同：0
> 
> 时间：2012-09-21T21:46:09.537
> 
> 标签：knockout.js, filtering, observable, ko.observablearray

**编辑：**我认为问题出在我的 self.providers = ko.computed() 上，我在单击过滤器按钮时覆盖了我的提供程序数组；

我有两个问题，在 HTML 窗格中都有所有内容，因为我在本地开发所有内容，并且将整个文件复制/粘贴到 jsfiddle 中而不是将其拆分出来更容易。

我还在一个相当大的虚拟数据对象中存根。 **这从第 110 行开始，因此如果您在本地复制/粘贴/运行它，您肯定需要一个可以最小化该数据对象的编辑器**！

第一个小提琴位于[http://jsfiddle.net/82cK7/](http://jsfiddle.net/82cK7/)并且似乎工作正常，但它是“实时”过滤。我刚从提供者名称过滤开始，然后也添加了 jquery UI datepicker 来进行日期过滤。当您在绿色过滤器区域进行任何更改时，这将过滤数据表。

这里的相关代码是第**196 行的****self.filterClaims**

 **第二个小提琴位于[http://jsfiddle.net/tq8zc/](http://jsfiddle.net/tq8zc/)并不能很好地工作。在您单击“过滤器”按钮之前，此处的过滤不会启动（这是我真正想要的行为）。它过滤了表格，但它也炸毁了我的**self.providers**，它为该选择/下拉列表生成了一个唯一的提供者名称列表。因此，在您过滤它之前，您有一个包含多个提供者名称的列表。过滤后，您只有在点击“过滤器”之前选择的提供商。

这里的相关代码是第**166 行的****self.claimsFiltered**

 **我觉得我错过了一些非常明显的东西，我想知道我是否可以让另一只眼睛看着代码。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T15:53:06.143

这是一种简单的方法。我刚刚添加了一个`currentFilter`包含最新过滤器属性的 observable，过滤器按钮只是用新的过滤器值更新它。希望这可以帮助。更新小提琴：http: [//jsfiddle.net/antishok/tq8zc/2/](http://jsfiddle.net/antishok/tq8zc/2/)****

# ruby-on-rails - ruby on rails 上的 RuntimeError

> ID：12538600
> 
> 赞同：0
> 
> 时间：2012-09-21T21:46:33.333
> 
> 标签：ruby-on-rails, ruby, runtime

我一直在使用 ruby​​ on rails 但我遇到了很多关于“runtimeerror”的问题我已经尝试安装了不止一次但我仍然无法解决问题，我已经搜索了更多次我会喜欢，但仍然一无所有。

每次我尝试做一个简单的 hello world（简单应用程序）时，都会出现运行时错误。例如，如果我尝试做：rails server，或者 gem 'therubyracer'等。我会得到 runtimeerror。我不知道问题可能是什么；这是我遇到的错误：

```
Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)

ERROR:  While executing gem ... (RuntimeError)
Unknown command therubyracer 
```

我希望你们能帮助我解决这个问题，这样我就可以继续并开始编程:) 提前谢谢！

顺便说一句，这是我目前正在使用的所有内容的版本：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]

rvm 1.15.9 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

Rails 3.2.8 
```

编辑，也许我应该注意我按照本教程安装 RoR：[https ://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts -带有 rvm 的精确穿山甲](https://www.digitalocean.com/community/articles/how-to-install-ruby-on-rails-on-ubuntu-12-04-lts-precise-pangolin-with-rvm)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:53:29.490

`gem 'therubyracer'`进入您的 Gemfile，而不是您的外壳。一定要`bundle install`在更改您的 Gemfile 之后。

# ruby - ruby each_line 获取下一行

> ID：12538603
> 
> 赞同：2
> 
> 时间：2012-09-21T21:47:06.457
> 
> 标签：ruby, file-io

我有一个包含一些重复条目的文件。看起来像

```
Los Angeles, 6
Los Angeles, 6 
New York, 31
New York, 31
New YOrk, 31
.
.
. 
```

现在我想摆脱重复的数据。我尝试做的是使用each_line，查看该行是否等于下一行，如果它们相同，则跳过并写入一个新文件。问题是我应该如何获得该文件的下一行？或任何其他建议来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:57:55.290

无需与下一行进行比较，因为您可以轻松查看当前行是否与上一行匹配：

```
file = File.open("filename", "r")
previous_line = nil
file.each_line { |line|
   if line == previous_line
     # duplicate line; ignore
   else
     # different; do whatever you want
   end

   # remember this line so we can compare against it
   previous_line = line
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T23:45:55.410

如果重复项总是连续的，则 willglynn 的解决方案有效。否则，我认为最好的方法是将它们放入哈希中。

```
unique_list = {}

File.foreach(filename) do |line|
  unique_list[line] = 1
end

unique_list.each do |line|
  new_file.print line
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T22:04:35.783

如果重复的行是连续的，你可以写：

```
lines = open("file.txt").each_line.chunk(&:downcase).lazy.map { |s, ss| ss.first } 
```

替换`downcase`您决定哪些字符串等价的函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-21T15:31:28.977

如果您可以从 shell 而不是使用 Ruby 来执行此操作，并且您在 *nix 中工作，那么它会变得更容易。有一个名为[uniq](http://www.linuxmanpages.com/man1/uniq.1.php)的 *nix 工具就是为此而生的。

给定您的示例输入，在文件*input.txt*中：

```
Los Angeles, 6
Los Angeles, 6
New York, 31
New York, 31
New YOrk, 31 
```

然后此命令将删除相邻的重复项并将结果打印到标准输出：

```
$ uniq input.txt
Los Angeles, 6
New York, 31
New YOrk, 31 
```

您会注意到“New York”的第三个实例中的拼写错误导致它不能被识别为重复。

要将结果发送到另一个文件：

```
$ uniq input.txt >output.txt
$ cat output.txt
Los Angeles, 6
New York, 31
New YOrk, 31 
```

要修改原始文件，您不能将 uniq 的输出重定向到它——您将破坏 uniq 正在读取的输入。相反，使用临时文件：

```
$ uniq input.txt >input.txt.tmp && cp input.txt.tmp input.txt
$ cat input.txt
Los Angeles, 6
New York, 31
New YOrk, 31 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-28T01:50:04.557

以@Anthony 的回答为基础。我的想法是：

```
unique_list = {}
new_file=File.open('file2', "w")

File.foreach('filename') do |line|
  unique_list[line] = 1
end

unique_list.each do |key,value|
  new_file.puts key
end 
```

每一行都成为值为 1 的哈希的键。键是唯一的，因此重复项只会覆盖最后一个。

确保输入字符串末尾没有多余空格后的输出是..

```
Los Angeles, 6
New York, 31
New YOrk, 31 
```

# android - 片段中的 Android- 接口将在 onAttach() 中实例化，但不会在其他情况下实例化

> ID：12538607
> 
> 赞同：0
> 
> 时间：2012-09-21T21:47:24.493
> 
> 标签：android, interface, android-fragments, android-activity, android-fragmentactivity

我在片段内创建了一个接口，并在父活动中实现了它。

当代码看起来像这样时，一切正常：

```
public class ExercisesCatsFragment extends Fragment {
OnCategorySelected mCallback;
...
    @Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    mCallback = (OnCategorySelected) activity;
} 
```

但是当我尝试在类本身中实例化 mCallback 时，调用接口时会出现 nullpointerexception。非工作代码如下所示（没有覆盖 onAttach()）：

```
public class ExercisesCatsFragment extends Fragment {
OnCategorySelected mCallback = (OnCategorySelected) this.getActivity(); 
```

有谁知道背后的原因？父activity是一个FragmentActivity；这可能是错吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:55:39.730

`this.getActivity()`在您在 Fragment 的主体中调用的第二个（非工作）代码中-此时它没有附加到一个`Activity`所以`this.getActivity()`将返回`null`。

只需按照您在第一个代码块中显示的方式或`onCreate(...)`在`Fragment`.

# jquery - 谷歌在信息框顶部映射标记 z 索引

> ID：12538612
> 
> 赞同：1
> 
> 时间：2012-09-21T21:47:47.810
> 
> 标签：jquery, css, google-maps

有没有办法让谷歌地图标记位于信息框之上？

似乎找不到解决办法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:27:40.130

是的，你可以用颜色制作透明`InfoBubble`的 s 。`rgba`这可能是最简单的解决方法。内容是任何 HTML 字符串，因此您应该能够应用 CSS 样式，如示例中所示。

```
 infoBubble2 = new InfoBubble({
      map: map,
      content: '<div class="phoneytext">Some label</div>',
      ... 
```

InfoBubble 页面： http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html ?compiled](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobubble/examples/example.html?compiled)

**我的演示** [http://www.tinabama.com/googlemaps/1.html](http://www.tinabama.com/googlemaps/1.html)

```
 infoBubble2 = new InfoBubble({
      map: map,
      content: 'some text<br>more text<br><br>more more text',
      position: new google.maps.LatLng(44.2, -74),
      shadowStyle: 1,
      padding: 0,
      backgroundColor: 'rgba(57,57,57,0.3)',
      borderRadius: 4,
      arrowSize: 10,
      borderWidth: 1,
      borderColor: '#2c2c2c',
      disableAutoPan: true,
      hideCloseButton: true,
      arrowPosition: 30,
      backgroundClassName: 'phoney',
      arrowStyle: 2
    });

    infoBubble2.open(); 
```

# php - 在 PHP 中，什么是网络服务器上的最佳文件路径引用方法

> ID：12538620
> 
> 赞同：0
> 
> 时间：2012-09-21T21:49:06.893
> 
> 标签：php

在 PHP 脚本中包含其他文件时，网络服务器处理速度更快：

```
include 'http://www.mydomain.com/bin/scripts/thescript.php'; 
```

或者

```
include '/home/user/public_html/bin/scripts/thescript.php'; 
```

或者

```
include '../../scripts/thescript.php'; 
```

或者在现实世界中真的没有实际差异吗？

这不是一个学术问题。如果这三种方法在实时上都同样令人满意，请告诉我。这就是我需要知道的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:55:42.130

绝对的，即带有“/”的策略总是更好。这样，如果您移动您的应用程序，您就不必手动更新路径名。我使用 2 个函数的组合将绝对路径定义为常量。

```
function tsl($path) {
    if (substr($path, strlen($path) - 1) != '/'){
        $path .= '/';
    }
}
function get_root_path() {
  $pos = strrpos(dirname(__FILE__),DIRECTORY_SEPARATOR.'inc');
  $adm = substr(dirname(__FILE__), 0, $pos);
  $pos2 = strrpos($adm,DIRECTORY_SEPARATOR);
  return tsl(substr(__FILE__, 0, $pos2));
}
define('ROOTPATH', get_root_path()); 
```

我在示例中使用了 inc/，但您可以更改它。这将允许您只使用常量 ROOTPATH 而不是每次都试图找出路径。

另一种方式是这样的......

```
<?php
define('ROOT_DIR', dirname(__FILE__));
define('ROOT_URL', substr($_SERVER['PHP_SELF'], 0, - (strlen($_SERVER['SCRIPT_FILENAME']) - strlen(ROOT_DIR))));
?> 
```

只需在您的模板页面中包含这些定义的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:55:22.313

根本不推荐方法 1，因为包含使用 HTTP 协议是一个潜在的安全漏洞，并且不允许在大多数严重的主机上使用 - 它也较慢，因为它会通过网络加载。

我猜方法 2 和 3 有点等价（直觉，没有做过任何基准测试）。

方法 3 允许您移动 PHP 应用程序而无需更正绝对路径。

# c++ - gSOAP 中的 C++ 方式中的动态数组，使用 STL 向量而不是 __ptr/__size？

> ID：12538625
> 
> 赞同：3
> 
> 时间：2012-09-21T21:49:21.977
> 
> 标签：c++, stl, gsoap

我正在使用 gSOAP 2.8.8 开发 Web 服务。我想发送自定义数据类型的无限序列。我可以按照[gSOAP 用户指南的第 11.11 节](http://www.cs.fsu.edu/~engelen/soapdoc2.html#tth_sEc11.11)来实现这一点，如下所示：

```
class ns__InnerType {
  std::string someStr;
  int someInt;
};
class VectorOfInnerTypes {
  ns__InnerType* __ptr;
  int __size;
};
void ns__myMethod(VectorOfInnerTypes in, ns__EmptyResponse out); 
```

这很好用。但是，由于我的程序是用 C++ 编写的，所以我想利用 STL 向量。从我读过的所有内容来看，gSOAP 似乎支持序列化向量。这是我认为应该有效的方法：

```
#import "stlvector.h"
class VectorOfInnerTypes {
  std::vector<ns__InnerType> mylist;
}; 
```

soapcpp2 很乐意编译它，并且在调用存根的`myMethod`. 但是，这是通过网络传输的内容：

```
<s:Envelope ...>
  <s:Body s:EncodingStyle=...>
    <q1:myMethod xmlns:q1="urn:ns"/>
  </s:Body>
</s:Envelope> 
```

将此与我使用`__ptr`/时的网络流量进行比较`__size`：

```
<SOAP-ENV:Envelope ...>
  <SOAP-ENV:Body ...>
    <ns:myMethod>
      <mylist xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="ns:InnerType[3]">
        <item>...</item>
        <item>...</item>
        <item>...</item>
      </mylist>
    </ns:myMethod>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

为了开始`std::vector`工作，我尝试了以下各种组合：

```
std::vector<ns__InnerType> mylist;
std::vector<ns__InnerType*> mylist;
std::vector<ns__InnerType>* mylist;
std::vector<ns__InnerType*>* mylist; 
```

有必要`soap_new_std__vectorTemplate...`并且`soap_new_ns__InnerType`在客户端上准备数据时，但没有任何改进。它拒绝正确序列化。

当它工作（`__ptr`/ `__size`）和它不工作（`std::vector`）时，调用`myMethod`返回代码 202 或 HTTP 接受。

我以及在 C++ 程序中使用 gSOAP 的每个人如何使用 STL 向量而不是原始`__ptr`/`__size`方式？任何帮助将非常感激。

# c++ - 无法在 C++ 中正确打印一些 utf-8 字符到 txt 文件

> ID：12538628
> 
> 赞同：5
> 
> 时间：2012-09-21T21:49:38.240
> 
> 标签：c++, encoding, utf-8, character-encoding

我在内存中有一些 UTF-8 字符串（这是更大系统的一部分），它们基本上是欧洲国家的地方名称。我想要做的是将它们写入文本文件。我在我的 Linux 机器（Fedora）上。因此，当我将这些名称字符串（字符指针）写入文件时，文件将以扩展的 ASCII 格式保存。

现在我将此文件复制到我需要将这些名称加载到 mySQL DB 的 Windows 机器上。当我在记事本++上打开文本文件时，它再次默认编码为ANSI。但我可以选择编码为 UTF-8，除了以下 3 个字符之外，几乎所有字符看起来都符合预期：- Ő、ő 和 ű。它们在文本中显示为 Ő、ő 和 ű。

有没有人对可能出了什么问题有任何想法。我知道这些不是扩展 ASCII 符号的一部分。但是我将其写入文件的方式类似于：

```
// create out file stream
std::ofstream fs("sample.txt");

// loop through utf-8 formatted string list
if(fs.is_open()) {
    for(int i = 0; i < num_strs; i++) {
        fs << str_name; // unsigned char pointer representing name in utf-8 format
        fs << "\n";
    }
}
fs.close(); 
```

即使使用 ú 和 ö 和 ß 这样的字符，一切看起来都很好。问题仅在于上述 3 个字符。对此有何想法/建议/评论？谢谢！

例如，像“Gyömrő”这样的字符串显示为“Gyömrű”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:30:22.520

您需要确定在哪个阶段引入了意外的 Ő HTML 实体。我最好的猜测是，它们已经在您正在写入文件的字符串中。使用调试器或添加对字符串中的 &s 进行计数的测试代码。

这意味着，您的信息来源并不严格将 UTF-8 用于非 ASCII 字符，但偶尔会使用[HTML 实体](http://www.w3schools.com/html/html_entities.asp)。这很奇怪，但如果您的数据源是 HTML 文件（或类似文件），则可能。

此外，您可能希望以 HEX 模式查看输出文件。（Notepad++ 有一个不错的插件）这可能有助于您理解 UTF-8 在字节级别上的真正含义：128 个 ASCII 符号使用值 0-127 的一个字节。其他符号使用 2-6 个字节（我认为），其中第一个字节必须大于 127。HTML 实体并不是真正的编码，更像是 '\n' '\r' 之类的转义序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:24:40.670

If, when opening in Notepad++ and choosing UTF-8, and your characters aren't showing up propery, then they are not encoded as UTF-8. You also mention "extended ASCII", which has very little to do with unicode encodings. And my belief is that you are in fact writing your characters as some codepage, for instance "ISO-8859-1".

Try take a look at the byte count of those trouble strings indide your program, and if the byte count is the same as the character count, then you are in fact not encoding it as UTF-8.

Any character that lies outside of the 128 character ASCII table, will be encoded with at least two bytes in UTF-8.

To properly handle unicode within your C++ application, take a look at ICU: [http://site.icu-project.org/](http://site.icu-project.org/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T22:51:25.617

The default `std::codecvt<char, char, mbstate_t>` doesn't do you any good: this is defined to do no conversion at all. You'd need to `imbue()` a `std::locale` with a UTF-8 aware code conversion facet. That said, `char` can't really represent Unicode values. You'd need a bigger type although the values you are looking at actually do fit into a `char` in Unicode but not in any encoding which allows for all values.

The C++ 2011 standard defines a UTF-8 conversion facet `std::codecvt_utf<...>`. However, it isn't specialized for the internal type `char` but only for `wchar_t`, `uint16_t`, and `uint32_t`. Using clang together with libc++, I could get the following to do the right things:

```
#include <fstream>
#include <locale>
#include <codecvt>

int main()
{
    std::wofstream out("utf8.txt");
    std::locale utf8(std::locale(), new std::codecvt_utf8<wchar_t>());
    out.imbue(utf8);
    out << L"\xd6\xf6\xfc\n";
    out << L"Ööü\n";
} 
```

Note that this code use `wchar_t` rather than `char`. It might look reasonable to use `char16_t` or `char32_t` because these are meant to be UCS2 and UCS4 encoded, respectively (if I understand the standard correctly), but there are not stream type defined for them. Setting stream types up for a new character type is somewhat of a pain.

# vbscript - 暂停执行直到文件被保存

> ID：12538630
> 
> 赞同：1
> 
> 时间：2012-09-21T21:50:23.333
> 
> 标签：vbscript

使用 vbscript 我希望能够创建一个 excel 对象，允许用户打开文件，然后在保存文件后，能够验证文件中的数据。我尝试使用 WaitForChangedResult 来观察文件所在的目录并等待它在继续之前更改，但是它仅在文件关闭而不保存时才继续，而不是在保存时。这是该代码的样子：

```
Dim xl As Object
xl = CreateObject("excel.application")
xl.FileDialog(1).AllowMultiSelect = False
xl.FileDialog(1).Title = "Navigate to 60-40 loan calculator"
Dim strFilePathAndName As String
If xl.FileDialog(1).Show() = -1 Then
    strFilePathAndName = xl.FileDialog(3).SelectedItems(1)
Else
    Exit Sub
End If
xl.Visible = True
xl.Workbooks.Open(strFilePathAndName)
Dim strXLTab As String
strXLTab = xl.ActiveSheet.Name

Dim result As System.IO.WaitForChangedResult
Dim directory As String
directory = Environment.GetFolderPath(Environment.SpecialFolder.Desktop)
Dim watcher As New System.IO.FileSystemWatcher(directory, "Calculator.xls")
result = watcher.WaitForChanged(System.IO.WatcherChangeTypes.Changed)
TextBox1.Text = directory 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:27:01.140

您可以使用以下代码来监视文件的更改。

只需将您的代码替换为 Wscript.echo 命令即可在文件更改/创建/删除时采取您需要的操作。

```
' Monitors a file for modifications.
Dim intTimer:        intTimer = "2"
Dim strDrive:        strDrive = "c:"
Dim strPath:         strPath = "\\temp\\"
Dim strFile:         strFile = "log.txt"
Dim strComputer:     strComputer = "."
Dim objWMIService:   Set objWMIService = GetObject( "winmgmts:" &  "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2" )
Dim strQuery:        strQuery = "Select * From __InstanceOperationEvent" & " Within " & intTimer & " Where Targetinstance Isa 'CIM_DataFile'" & " And TargetInstance.Drive='" & strDrive & "'" & " And TargetInstance.Path='" & strPath & "'"
Dim colEvents:       Set colEvents = objWMIService. ExecNotificationQuery (strQuery)
WScript.Echo "Monitoring file changes... Press [Ctrl]-[C] to exit"
Do
    Set objEvent = colEvents.NextEvent()
    Set objTargetInst = objEvent.TargetInstance
    if right(objTargetInst.Name,len(strFile)) = strFile then
        Select Case objEvent.Path_.Class
            Case "__InstanceCreationEvent"
                WScript.Echo "Created: " & objTargetInst.Name
            Case "__InstanceDeletionEvent"
                WScript.Echo "Deleted: " & objTargetInst.Name
            Case "__InstanceModificationEvent"
                WScript.Echo "Modified: " & objTargetInst.Name
        End Select
    end if
Loop 
```

使用**Wscript**运行它并且它不可见，或者使用**Cscript**运行它以使其在控制台窗口中可见。

# haskell - 类型定义中的参数类型

> ID：12538631
> 
> 赞同：1
> 
> 时间：2012-09-21T21:50:36.877
> 
> 标签：haskell

我有一个像这样的数据类型：

```
data MyType a b = Something a b | ..... 
```

然后我有一个类型：

```
type SomethingElse = MyType a b -> AnotherThing 
```

但是，如果我在类型定义中包含 a 和 b 参数，它会抱怨，但如果我将它们排除在外，它也会抱怨。

错误消息（在类型定义中）是变量 a 和 b 不在范围内。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T21:54:05.867

只要您没有为`a`and提供具体类型`b`，您还需要将您的类型同义词参数化。

```
type SomethingElse a b = MyType a b -> AnotherThing 
```

# haml - 如何防止maruku自行创建ID

> ID：12538633
> 
> 赞同：2
> 
> 时间：2012-09-21T21:50:42.347
> 
> 标签：haml, markdown, maruku

我在 HAML 中使用 Maruku 作为降价过滤器，它会在每个标头上创建大量无用的（对我而言）ID。

所以如果我有这样的事情

```
## This is a header 
```

它会让

```
<h2 id="this_is_a_header">This is a header</h2> 
```

在某个时候开始变得荒谬，并用一堆我不需要也不想要的 ID 填充我的 HTML，因为 Maruku 为我提供了一种提供我自己的 ID 的方法，

```
## {#id} This is a header 
```

有没有办法阻止它的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T05:53:26.207

[Maruku 已过时](http://benhollis.net/blog/2013/10/20/maruku-is-obsolete/)，您应该考虑切换到 kramdown（现在获得 MIT 许可）。

kramdown 允许您[关闭自动生成标头 ID，如下所示](http://kramdown.rubyforge.org/documentation.html#usage "kramdown 文档 - 用法")：

```
puts Kramdown::Document.new("# Header with spaces #", :auto_ids => false).to_html 
```

同样在 kramdown 中，如果要在标头上[设置自己的 ID 属性](http://kramdown.rubyforge.org/quickref.html#block-attributes "快速参考 - 块属性")，可以执行以下操作：

```
raw_text = "# Header with spaces #
  {: #pumice-stone}"

puts Kramdown::Document.new(raw_text, :auto_ids => false).to_html 
```

输出：

```
<h1 id="pumice-stone">Header with spaces</h1> 
```

请记住，自定义属性 ( `{: #pumice-stone}`) 紧跟在您希望应用它的块级元素下方的行上。

# ios - 核心数据未保存在 .sql lite 文件中

> ID：12538638
> 
> 赞同：1
> 
> 时间：2012-09-21T21:51:19.700
> 
> 标签：ios, core-data

我正在将核心数据实施到现有项目中。

当应用程序第一次运行时，会创建 sqllite db，但是当我尝试通过调用 [managedObjectContext save:] 插入数据时，什么也没有发生。我什至没有得到错误。

我检查了 sqllite 文件的时间戳。它没有得到更新。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T23:00:02.540

尝试复制回滚文件，然后在主文件上运行 sqlite3。不仅使用 .sqlite 文件，还复制 .sqlite-shm 和 .sqlite-wal。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:57:53.700

我经常遇到类似的问题，原因是我忘记了 .sql 文件已经创建，并且它不会覆盖，如果我更改 .sql 结构，我会在模拟器或设备中卸载并再次安装，然后它就可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:06:37.217

**假设您的 sqlite 数据库是在 /documents 文件夹中创建的。**

```
CoraDataEntity *entity = (CoraDataEntity *)[NSEntityDescription insertNewObjectForEntityForName:@"CoraDataEntity" inManagedObjectContext:context];

NSError *error = nil;

if(![managedObjectContext save:&error]){

    NSString* msg = [NSString stringWithFormat:@"Unresolved error saving core data context: %@, %@", error, [error userInfo]];
    NSLog(@"%@",msg);

} 
```

# javascript - Dojo tlmSiblingOfDojo 不起作用，路径不是相对的

> ID：12538639
> 
> 赞同：2
> 
> 时间：2012-09-21T21:51:22.087
> 
> 标签：javascript, dojo, path, require

大家好，感谢您的帮助！

我无法让 Dojo 需要寻找到 baseUrl 的相对路径。我的 tManager/pageList.js 对象所需的请求路径是“/tManager/pageList.js”，而它们应该是“js/tManager/pageList.js”。当我将“js/”添加到需要路径时它工作得很好，但我真的希望这些都是相对的。这是我的代码。

```
<script type="text/javascript">
var dojoConfig = {
    baseUrl: "js/",
    isDebug: true,
    tlmSiblingOfDojo: false,
    async: false,
    packages: [
        { name: "dojo", location: "lib/dojo" },
        { name: "dijit", location: "lib/dijit" },
        { name: "dojox", location: "lib/dojox" },
        { name: "tManager", location: "tManager/" }
    ]
};
</script>
<script type="text/javascript" src="js/lib/dojo/dojo.js"></script>
<script type="text/javascript">
require([
    "dojo/dom",
    "dojo/ready",
    "tManager/pageList.js"
], function (dom, ready, pageList) {
    ready(function () {
        alert("hello world");
    });
});
</script> 
```

这是我的文件夹结构：
\
\js\
\js\lib\
\js\lib\dojo\
\js\lib\dijit\
\js\lib\dojox\
\js\tManager\

再次感谢您提前提供的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T17:50:21.900

假设您是 AMD 模块，请`tManager/pageList.js`摆脱. 否则，您将执行[通用脚本注入](http://livedocs.dojotoolkit.org/loader/amd#generic-script-injection)而不是加载模块。`.js``require`

```
require([
    "dojo/dom",
    "dojo/ready",
    "tManager/pageList"  // <= do not use .js extension for AMD modules
], function (dom, ready, pageList) {
    ready(function () {
        alert("hello world");
    });
}); 
```

# json - 使用 Google 电子钱包在 Chrome 网上应用店销售

> ID：12538640
> 
> 赞同：1
> 
> 时间：2012-09-21T21:51:57.847
> 
> 标签：json, google-apps-script, payment, chrome-web-store

我尝试在 Chrome Web Store 上发布 Google App Script 并出售，但似乎生成 JWT（JSON Web 令牌）目前可用于服务器端语言，如 Ruby、PHP、Java 和 Python。

任何人成功地使用 GAS 构建了一些东西并在 Chrome Web Store 上销售并使用 Google Payment API 进行销售？

# ruby - 如何让 ruby 1.9.3 将换行符写入文本文件？

> ID：12538647
> 
> 赞同：3
> 
> 时间：2012-09-21T21:52:53.120
> 
> 标签：ruby, windows, text-files, newline

我使用的是 Windows 7。使用 Ruby 1.8.7，写入文本文件并`puts`添加换行符，以便这些 irb 命令：

```
my_file = File.new("C:\\new_file.txt", "w+")
my_file.puts("first line")
my_file.puts("\n\n")
my_file.puts("")
my_file.puts("fifth line")
my_file.close 
```

生成一个文本文件，内容如下：

> 第一行
> 
> ...这里三个空行（编辑器似乎也在剥离换行符）
> 
> 第五行

在 Ruby 1.9.3 中，换行符被剥离，即使我尝试通过添加 a 来强制换行`\n`，从而产生一个文本文件，内容为：

> 第一行第五行

有谁知道发生了什么变化以及我需要做什么才能将换行符恢复到我的文件中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T22:15:09.723

在 Windows 中，换行符是一个回车符和一个换行符，所以你必须使用这个：

```
myfile.puts("\r\n") 
```

# javascript - 更改框架的大小

> ID：12538652
> 
> 赞同：0
> 
> 时间：2012-09-21T21:53:06.580
> 
> 标签：javascript, jquery, html, jquery-plugins

我想知道是否有任何方法可以改变框架的大小？我的网站顶部有一个框架在播放音乐，我想添加一个 (+) 按钮来扩展它或类似的东西。有什么建议或想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:48:50.047

也许这应该这样做：

```
$('button').click(function(){
  $('#frame').css('width':'400px');
}); 
```

其中#frame 是您的框架ID。

# ember.js - 如何判断 store.commit() 何时在 Ember.js 中执行任何操作？

> ID：12538661
> 
> 赞同：1
> 
> 时间：2012-09-21T21:53:53.737
> 
> 标签：ember.js

我在我的 Ember 应用程序中实现了定期自动保存功能，如下所示：

```
var App = Ember.Application.create({
    ready: function () {
        setInterval(function() { App.store.commit(); }, 10000);
    }
}); 
```

它工作得很好，定期刷新服务器的所有更改。但是我如何才能挂钩事件，以便我可以直观地表明它正在发生在用户身上？

我不能只把它放在“就绪”事件处理程序中，因为大多数时候 App.store.commit() 实际上没有任何工作要做，即使有，它也是异步发生的——commit() 立即返回, 在生成请求之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T04:45:03.570

的确如此，但这`commit`并不表明它的进展。在您的模型上设置`didCreate`和`didUpdate`回调以将更改通知注入您的应用程序。

Ember-Data 事务模型的性质意味着当`commit`请求或不请求时会发生很多事情。您的回调通知可能需要合并或限制为一个明智的面向用户的消息。

**DIY 替代方案：创建 isSaving 属性和 afterSave 观察者**

在您的控制器上，使用计算属性和观察来观察您的特定数据模型的`isSaving`状态：

```
// Example of a data model with a belongsTo association & nested hasMany
isSaving: function() {
  return this.get('isSaving') || (
    !Ember.empty(this.get('association')) && (
      this.get('association.isSaving') || 
        this.get('association.nestedAssociation').some(function(item) { return item.get('isSaving'); })
    )
  );
}.property("isSaving", "association.isSaving", "association.nestedAssociation.@each.isSaving"),

afterSave: function() {
  if (this.get('isSaving')) return;
  // do something interesting
}.observes('isSaving') 
```

与 ember-data 中的通用、全局`isSaving`或`isInFlight`状态相比，这有点脏，但在实践中效果很好。

# javascript - 如何在 angularjs 中延迟加载指令？

> ID：12538665
> 
> 赞同：20
> 
> 时间：2012-09-21T21:54:20.853
> 
> 标签：javascript, angularjs

我正在使用 angularjs，我希望能够在需要时加载指令，而不是在页面开头加载所有指令。我正在尝试为我最常用的插件创建指令。

通过这种方式，一个直接可以`yepnope`在最终编译 html 之前加载所有需要的指令。

如果该指令与其他指令一起在页面开头加载，则一切正常。但是，如果稍后加载“子”指令（在“父”内），它不会生效。下面是“父”指令的编译字段中 pre 字段的代码。

```
 ...
    var pre = function (scope, element, attrs) {
        element.html('Please wait. Loading...');
        ang.loadDirectives('caiDatePicker', function () {
            console.log('loaded');
            scope.data.raw = scope.rawData;
            var html = createObjUi(scope, scope.data, scope.defn);
            element.html(html); //data
            $compile(element.contents())(scope.$new());
            scope.$apply();
        });
    };
    return { restrict:'A', compile: {pre:pre,post:function(){...}}; 
```

`ang.loadDirectives`使用 yepnope 加载指令。'child' 指令的部分代码如下：

```
angular.module('mycomponents') //PS: I'm assuming this will fetch the already created module in the 'parent' directive
.directive('caiDatePicker', function ($parse) {
    return {
        scope: {},
        restrict: 'A',
        link: function (scope, element, attrs) {
            scope.$watch('this.$parent.editing', function (v) {
                scope.editing = v;
            });
            yepnope({
                test: $().datePicker,
                nope: [
                    '/content/plugins/datepicker/datepicker.js', //todo: use the loader
                    '/content/plugins/datepicker/datepicker.css'
                ],
                complete: function () {
                    if (scope.model && scope.model.value) {
                        var date = scope.model.value;
                        element.val(date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear());
                    }
                    element.datepicker({ weekStart: 1, format: 'dd/mm/yyyy' })
                        .on('changeDate', function (ev) {
                            scope.model.value = ev.date;
                            scope.$apply();
                        });
                }
            });
            attrs.$observe('path', function (v) {
                var fn = $parse(v);
                var model = fn(scope.$parent);
                scope.model = model;
            });
        }
    }
}); 
```

首先我正在做的事情是可能的吗？

如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-21T10:45:29.533

如果要注册指令，在应用程序启动后，您将不得不使用 $compileProvider 而不是模块 API。例如...

```
$compileProvider.directive('SomeLazyDirective', function()
{
    return {
        restrict: 'A',
        templateUrl: 'templates/some-lazy-directive.html'
    }
}) 
```

然后，您可以在使用 $routeProvider 定义路由时使用“解析”功能，以使用脚本加载器加载惰性指令。为此，让函数返回一个承诺，一旦你的指令和其他惰性依赖项被加载，该承诺就会被解决。AngularJS 会在渲染路由之前等待 promise 被解析，从而确保你的指令在视图需要它之前准备好。我写了一篇博文，详细介绍了如何在 AngularJS 中实现延迟加载。它更详细地描述了我在这里所说的内容，可以在[http://ify.io/lazy-loading-in-angularjs/找到](http://ify.io/lazy-loading-in-angularjs/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-05T11:14:10.367

这就是我所做的，使用附加到应用程序的编译提供程序，使它可以从任何你有实际模块引用的地方访问。

```
var app = angular.module('app');
app.config（函数（$compileProvider）{
    app.compileProvider = $compileProvider;
});

```

然后稍后，在引导之后，您可以延迟加载一个被编译和链接的指令：

```
app.compileProvider.directive('SomeLazyDirective', function()
{
    返回 {
        限制：'A'，
        模板网址：'模板/一些懒惰的指令.html'
    }
})

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-29T08:06:27.677

在搜索了这么久并没有得到任何答案之后，我最终得到了以下结果

1.  创建一个角度应用程序。这也是一个角度模块。
2.  您可以随时使用 app.directive(name,function) 向模块添加任何指令。这些可以是异步加载的指令。
3.  您可以引导任何元素。引导时，将模块列表中的应用程序指定为 angular。

问题是 yepnope 没有像我需要的那样触发完整的功能。最后，我在 yepnope 之上构建了一个小包装器，似乎可以保证触发完整的函数。

最终代码如下所示：

```
var app3 = new Cai.AngApp('app3');
app3.loadControllers('app1.controller3', function () {
        app3.loadDirectives('jsonEditor', 'datePicker', function () {
            app3.bootstrap($('#d3'));
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-19T02:19:47.687

我不确定如何使用 angularJS 指令是一个合适的答案

我已经完成了以下操作，它完美无缺

*   使用 mustache 列表来决定列表项模板。( [https://github.com/janl/mustache.js/](https://github.com/janl/mustache.js/) )
*   在加载您的应用程序 api 时，应仅加载 10 -50 条记录，具体取决于您的内容。
*   在您即将到达结束时立即滚动列表，触发下一个 API 调用表单下一个 20 项，依此类推。
*   如果您的数据没有变化，您可以将其存储在本地并重新填充。

*   不断获取最新记录并在本地进行广告。

# bundler - Bundler：组装正确的 Gemfile /“Bundler 找不到 gem bundler 的兼容版本”

> ID：12538670
> 
> 赞同：2
> 
> 时间：2012-09-21T21:54:41.387
> 
> 标签：bundler, gemfile

[在这里](https://stackoverflow.com/questions/9854225/bundler-could-not-find-compatible-versions-for-gem-bundler)问了同样的问题，尽管在我的情况下没有答案。

我对 Ruby/Rails/RVM/Bundler/Gemfile/etc 完全陌生。我正在关注 Hertl 的 Rails 3 教程。我遇到了与上面链接中所述相同的问题：Bundler 找不到 gem bundler 的兼容版本。

当我运行“$ bundle install”时，我收到以下消息：

```
Bundler could not find compatible versions for gem "bundler":
In Gemfile:
rails (= 3.0.1) ruby depends on
  bundler (~> 1.0.0) ruby

Current Bundler version:
bundler (1.2.1)

This Gemfile requires a different version of Bundler.
Perhaps you need to update Bundler by running `gem install bundler`? 
```

我不知道从这里去哪里。我已经尝试过 Hertl 关于指定特定 Bundler 版本的建议——他建议尝试 1.2.5 或 1.3.1，无论哪个可行——但即使在指定特定版本的 Bundler 时我也会遇到同样的错误。

我真的不知道从这里去哪里，并且对缺乏清晰度感到沮丧。一个简单的图表可以帮助我理解这些不同的实用程序之间的关系；否则我只是在黑暗中拍摄。一个有助于将 Rails 运行所需的不同组件联系起来的答案会很棒！

有人有好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:04:49.000

关键是`Rails 3.0.1`对`Bundler (~> 1.0.0)`. 这种表示法意味着您可以使用`bundler`from`1.0.0`但小于的版本`1.1.0`- 当您尝试使用`1.2.1`时，您会遇到错误。

最简单的解决方法是卸载`bundler 1.2.1`并安装`bundler 1.0.22`与您正在使用的 Rails 版本兼容的最后一个版本。

```
gem uninstall bundler
gem install bundler -v1.0.22 
```

这将解决您的问题，但如果您遵循 Hartl 的教程，您可能会遇到其他问题，因为在提出这个问题时，教程使用`Rails v3.2.8`. 你有什么理由使用`3.0.1`而不是`3.2.8`？我的建议是使用教程使用的版本，否则您可能会遇到难以诊断的错误。

如果你可以去，`Rails 3.2.8`那么你的问题也将得到解决，因为`bundler 1.2.1`它与`Rails 3.2.8`.

# c# - 如何从 C# 就地更新命令行输出

> ID：12538675
> 
> 赞同：3
> 
> 时间：2012-09-21T21:54:55.823
> 
> 标签：c#, .net, c#-3.0

我想在命令提示符中更新计数器值。

例如，如果您在 Windows 命令提示符下计时“超时”，您可以看到它是如何减少计数器到位的。等待 X 秒 //X 在控制台中持续递减。

我想从 C# 中实现相同的目标。任何想法如何做到这一点。搜索似乎没有提供任何线索。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:57:08.177

使用标准`Console.Write`但使用`Console.SetCursorPosition`来设置位置。将此作为明确的示例[。](https://stackoverflow.com/questions/3407548/c-sharp-console-set-cursor-position-to-the-last-visible-line)

# asp.net - 如何在asp.net 4.0中仅扩展树视图的几个节点

> ID：12538690
> 
> 赞同：0
> 
> 时间：2012-09-21T21:56:13.350
> 
> 标签：asp.net

我在更新面板中使用 Treeview。在加载树视图时，我只想扩展节点 3 个级别，即深度 = 3。我使用了 Expand Depth 属性并设置了“ExpandDepth=3”。但是扩展不起作用。感谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T22:16:31.130

我用下面的代码修复了它。

私人无效ExpandAll（）{

```
 foreach (TreeNode i in TreeView1.Nodes)
   {

       i.Expand();

       foreach (TreeNode f in i.ChildNodes)
       {

           f.Expand();

           foreach (TreeNode g in f.ChildNodes)
           {
               if(g.Depth==0)
               {

                   g.Expand();
               }
           }

       }
   }

} 
```

# c - libxml2 和 XPath 在 ANSI C 中遍历子级和兄弟级

> ID：12538691
> 
> 赞同：3
> 
> 时间：2012-09-21T21:56:14.980
> 
> 标签：c, xpath, libxml2

我已经在 Perl 中完成了相当多的 XML 工作，现在我需要在 ANDI C 中为一个项目完成这些工作。这是我使用 XML 片段编写的代码。我在一定程度上取得了成功，但在获得兄弟姐妹方面遇到了问题，我相信这非常容易，但我就是做不到。有两个函数，一个只是获取节点集（直接从 xmlsoft.org 复制）。第二个功能是我的。

```
xmlXPathObjectPtr getnodeset (xmlDocPtr doc, xmlChar *xpath){

    xmlXPathContextPtr context;
    xmlXPathObjectPtr result;

    context = xmlXPathNewContext(doc);
    if (context == NULL) {
        printf("Error in xmlXPathNewContext\n");
        return NULL;
    }

    result = xmlXPathEvalExpression(xpath, context);
    xmlXPathFreeContext(context);

    if (result == NULL) {
        printf("Error in xmlXPathEvalExpression\n");
        return NULL;
    }

    if(xmlXPathNodeSetIsEmpty(result->nodesetval)){
        xmlXPathFreeObject(result);
                printf("No result\n");
        return NULL;
    }

    return result;
}

    void reader(xmlDocPtr xmlDoc, char *xpath)
{

    xmlXPathObjectPtr xpathresult;
    xmlNodeSetPtr node;
    xmlNodeSetPtr node2;
    xmlChar *title;

    int cnt;

    // parse feed in memory to xml object
    doc = xmlReadMemory(xmlDoc,strlen(xmlDoc),"noname.xml",NULL,0);

    if (!doc) criterr("Error parsing xml document");

    // get xpath node set (ttn retrieves the value from the token table)
    xpathresult = getnodeset(doc, ( xmlChar * ) xpath);

    if (xpathresult) {
        node = xpathresult->nodesetval;
        printf("Content-type: text/html\n\n");

        for (cnt=0;cnt<node->nodeNr; cnt++) {

            title = xmlNodeListGetString(doc, node->nodeTab[cnt]->xmlChildrenNode,1);

            printf("%d) title= %s<br/>\n",cnt,title);
            xmlFree(title);         
        }

        xmlXPathFreeObject(xpathresult);
        xmlFreeDoc(doc);
        xmlCleanupParser();

    } else {
        criterr("Xpath failed");
    }

    xmlFreeDoc(doc);

    criterr("Success");
} 
```

和 xml 片段

```
<item>
  <title>this is the title</title>
  <link>this is the link</link>
  <description>this is the description</description>
</item> 
```

如果我使用 XPath，就像`//item/title`我得到所有标题一样，但我真正想要的是获取项目，然后在 node->nodeNr 循环中，能够轻松获取标题、链接和描述，因为我有 100 个“项目” ' 块，我只是不确定如何轻松获得该块的孩子或兄弟姐妹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T06:54:27.030

使用[`xmlNextElementSibling`](http://www.xmlsoft.org/html/libxml-tree.html#xmlNextElementSibling). 如何找到它？转到[Tree API](http://www.xmlsoft.org/html/libxml-tree.html)，搜索*兄弟*。

这是您的循环，现在也获得了链接。

```
 for (cnt=0;cnt<node->nodeNr; cnt++) {
        xmlNodePtr titleNode = node->nodeTab[cnt];
        // titleNode->next gives empty text element, so better:
        xmlNodePtr linkNode = xmlNextElementSibling(titleNode);

        title = xmlNodeListGetString(doc, titleNode->xmlChildrenNode,1);
        link = xmlNodeListGetString(doc, linkNode->xmlChildrenNode,1);

        printf("%d) title= %s<br/>, link=%s\n",cnt,title,link);
        xmlFree(title);         
        xmlFree(link);
    } 
```

`titleNode->next`也可以发个链接，看看[如何用libxml2获取这些XML元素？](https://stackoverflow.com/questions/4135496/how-to-get-these-xml-elements-with-libxml2).

还生孩子？[`xmlFirstElementChild`](http://www.xmlsoft.org/html/libxml-tree.html#xmlFirstElementChild)并循环 while `node->next`。

# c# - 由于 DI Container 绑定要求，如何避免 BAL 依赖于 DAL？

> ID：12538693
> 
> 赞同：3
> 
> 时间：2012-09-21T21:56:25.313
> 
> 标签：c#, .net, ninject

我的应用程序包含三个项目。核心、DAL 和 BAL。

核心包含域对象（客户、订单、产品）。它还包含基本的 IRepository 接口 IRepository`<T>.`

DAL 包含 EntityFramework 特定的东西。它还包含具体的存储库（CustomerRepository、OrderRepository、ProductRepository）。我在这里添加了这些具体的存储库，因为它们依赖于 DbContext（这是 EF 特定的）

现在我的 BAL 应该只依赖于 Core，而不依赖于 DAL。我在这个项目中添加了对 NInject 的依赖。但是，我仍然需要告诉 Ninject 它应该将 IRepository 解析`<Customer>`为 CustomerRepository，这迫使我在此处添加 DAL 依赖项。是否有避免在我的 BAL 项目中添加对 DAL 的依赖？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T22:02:43.760

您通常会在您的[组合根目录](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中进行容器注册，这通常是在引导程序中，并且该代码将包含在您的 Web 或桌面程序集中，而不是包含您的业务/域对象的程序集。

# sql-server - 转换/操作 tsql 连接的结果

> ID：12538696
> 
> 赞同：0
> 
> 时间：2012-09-21T21:56:38.890
> 
> 标签：sql-server, tsql

我有一个如下数据集：

```
dataset1:
 **columns:** id  type  loc  x_qty  y_qty  z_qty  j_1   j_2   date
 **row: **   1   fe    32   292    394    112    NULL  NULL  2012-09-21
 **row: **   2   fd    30   298    394    112    NULL  NULL  2012-09-22
 **row: **   3   fc    31   343    394    112    NULL  NULL  2012-09-23 
```

我只剩下`dataset2`加入`dataset1`, `type`,`loc`和`date`得到`j_1`和`j_2`

```
dataset2:
**columns:** id  type  loc  x_qty  y_qty  z_qty  j_1   j_2   date
**row: **    1   fe    32   NULL   NULL   NULL   239   349   2012-09-21
**row: **    2   fe    31   NULL   NULL   NULL   209   319   2012-09-23 
```

我的问题是`dataset1`每一天`dataset2`都有一行，而只有几天的行`j_1`并且`j_2`有值。因此，对于结束数据集，`j_1`对于`j_2`每个不存在于`dataset2`.

我的问题：如果没有日期，有没有办法将前一个日期的值放在列中。例如，使用上面的数据集。`9-22`中不存在`dataset2`，所以最终结果中会有`9-22`一行，在`j_1`and中有 NULL `j_2`，有没有办法使用 and 的前一个日期的值`j_1`并将`j_2`它们放在该行中？

提前感谢您的帮助！

SQL 服务器 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:26:13.487

你可以使用这样的东西来加入当前或以前的日期吗？

SELECT * FROM dataset1 t1 INNER join dataset2 t2 ON t2.date = (select MAX(t3.date) from dataset2 t3 where t3.date <= t1.date)

# facebook - 连接社交插件和我的网站

> ID：12538701
> 
> 赞同：-1
> 
> 时间：2012-09-21T21:57:09.593
> 
> 标签：facebook, facebook-graph-api, facebook-like

这是我的第一个线程，所以对我来说很容易:)。对于我遇到的所有问题，我在 stackoverflow 找到了一个解决方案，但这个我无法弄清楚。

所以，我想在我的网站（不是facebook页面，而是实际网站）上制作like按钮，所以当用户喜欢某个URL时，它会出现在他的时间轴中（网站有文章，所以每篇文章都有它的URL）。Mosh 很重要，我希望喜欢的形式是“'someone' like 'something' ON 'SOME_PAGE'”。这个“在某个页面上”实际上是想要的部分。经过一些研究，我发现我需要开放图形协议和 facebook 应用程序来实现这一点。所以我跟着这个教程[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)。

现在，当我喜欢我网站上的某些东西时，它会以应有的形式出现在我的时间轴中：" 姓氏喜欢 "some_facebook_app/webpage" 上的 "something" ，所以如果我喜欢它就可以了，但是当有人else like if (person that is not admin for this app) ，它显示为常规链接，实际上它是使用开放图形协议呈现的，它显示标题、描述和图片，但它没有连接到我的 facebook 应用程序，有没有“在 facebookapp”部分。此外，当我从我的朋友 facebook 帐户到我的时间线时，我在这个特定网站上所做的喜欢是不可见的。我不知道是这个问题，因为我在任何地方都找不到关于这个的任何东西（我订阅了应用程序详细信息，我不知道这是否是问题...）。另外，只有我的脸出现在喜欢中，即使我确定我的朋友也喜欢那个特定的链接，但我认为这是与前一个链接相关的问题（因为 like 没有“连接”到 facebook 应用程序）。

我是这个 facebook 开发人员的新手，这个 facebook 应用程序对我来说是一个大黑洞......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T22:00:33.360

我发现它是什么。我不知道沙盒模式是什么意思，所以禁用它后，应用程序现在对所有人可见。没有人在这里真正帮助过我，但无论如何谢谢:)。

# epson - 国际字符集 EPSON Printer

> ID：12538703
> 
> 赞同：4
> 
> 时间：2012-09-21T21:57:20.203
> 
> 标签：epson

我正在处理 ESC/POS 命令。

使用`ESC R n` 命令，您可以选择国际字符集。

爱普生提供，其中包括：西班牙 II 和拉丁美洲。在这些字符集中，例如`Hex 5E/Dec 94` 表示`"é" (LATIN SMALL LETTER E)`，但在 UTF8/ISO`5E/94`中表示`"^" (CIRCUMFLEX ACCENT)`。

我正在寻找一种翻译这些字符集的方法，或者知道它们的整个表格（不通过打印机循环和打印，你怎么知道哪个是“空格”？）...它不是 iso-8859-1/2 /3/9 也不是 oem858/858 也不是 latin2/code page852 或我检查过的类似字符集/代码页。

# iphone - 将现有应用程序迁移为与 iPhone 5 兼容后，最后一个 tableView 单元格不可触摸

> ID：12538704
> 
> 赞同：1
> 
> 时间：2012-09-21T21:57:20.637
> 
> 标签：iphone, objective-c, ios, uitableview

我试图弄清楚为什么我的应用程序的 tableView 中的最后一个单元格在 iPhone 5 上运行时不可触摸，因为它在以前的 iPhone 和 iPad 上都可以正常工作。我迁移了这个应用程序并在设备和模拟器上进行测试时发现了这个错误。迁移应用程序无需更改代码。截图如下：

如果您能帮助我，我将不胜感激！

截图链接：http: [//i.stack.imgur.com/S98BS.jpg](http://i.stack.imgur.com/S98BS.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:01:31.457

也许你在 iPhone 4 上使用 xib，它的触摸内容在最后一个单元格上方结束？如果您使用故事板或 xib，您需要创建新的 1136x640 分辨率。

# php - $_FILES 数组在不上传任何内容时不为空

> ID：12538718
> 
> 赞同：14
> 
> 时间：2012-09-21T21:58:30.433
> 
> 标签：php, file, upload

这是表格

```
form action="index.php" method="POST" enctype="multipart/form-data" >
        <input type="file" name="image[]" multiple="multiple">
        <input type="submit" value="upload">
    </form> 
```

我试图仅在仅当`if(!empty($_FILES['image'])){`但由于某种原因在不提交任何文件且仅单击提交时数组不为空时才运行我的代码。

这是其余的代码，如果有帮助，谢谢。

```
<html> 
```

图片上传

```
 <form action="index.php" method="POST" enctype="multipart/form-data" >
        <input type="file" name="image[]" multiple="multiple">
        <input type="submit" value="upload">
    </form> 

    <?php

    include 'connect.php';

    if(!empty($_FILES['image'])){
    echo $_FILES['image']['error'];
        $allowed = array('jpg', 'gif', 'png', 'jpeg');
        $count = 0;

        foreach($_FILES['image']['name'] as $key => $name){
        $image_name = $name;
        $tmp = explode('.', $image_name);
        $image_extn = strtolower(end($tmp)); //can only reference file
        $image_temp = $_FILES['image']['tmp_name'][$count];
        $filesize = filesize($_FILES['image']['tmp_name'][$count]);
        $count = $count +1;

        if(count($_FILES['image']['tmp_name']) > 5){
            echo "You can upload a maximum of five files.";
            break;
        }

        else if(in_array($image_extn, $allowed) === false){
            echo $name." is not an allowed file type<p></p>";
        }

        else if($filesize > 1024*1024*0.3){
            echo $name." is too big, can be a maximum of 3MB";
        }

        else{

            $image_path = 'images/' . substr(md5($name), 0, 10) . '.' . $image_extn;

            move_uploaded_file($image_temp, $image_path);

            mysql_query("INSERT INTO store VALUES ('', '$image_name', '$image_path')") or die(mysql_error());

            $lastid = mysql_insert_id();
            $image_link = mysql_query("SELECT * FROM store WHERE id = $lastid");
            $image_link = mysql_fetch_assoc($image_link);
            $image_link = $image_link['image'];
            echo "Image uploaded.<p></p> Your image: <p></p><a href = $image_link>$image_path</a>";
            }

        }
        }

    else{
            echo "Please select an image.";
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T22:13:41.907

这是`$_FILES`没有上传任何内容时数组的样子

```
Array ( [image] => Array ( [name] => [type] => [tmp_name] => [error] => 4 [size] => 0 ) ) 
```

所以它永远不会是空的。

错误码 4`[error] => 4`表示没有上传文件，error`code 0`表示没有错误，上传了文件，所以你可以检查

```
if($_FILES['image']['error']==0) {
    // file uploaded, process code here
} 
```

这是关于SO的[另一个答案。](https://stackoverflow.com/questions/12292394/ignore-picture-upload-error/12292530#12292530)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T22:03:30.430

请改用`is_uploaded_file`PHP 函数：

```
if(is_uploaded_file($_FILES['image']['tmp_name'])) {
  //code here
} 
```

[http://php.net/manual/en/function.is-uploaded-file.php](http://php.net/manual/en/function.is-uploaded-file.php)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T22:30:35.757

您应该首先查看 PHP 手册，因为 - 您不是第一个遇到这个问题的人 - 解决方案已经写[在那里](http://php.net/manual/en/features.file-upload.post-method.php)：

> 如果您的表单中没有选择要上传的文件，PHP 将返回`$_FILES['userfile']['size']`0，并且返回`$_FILES['userfile']['tmp_name']`none。

因此，如果您确实想了解是否`image`已提交元素的任何文件，请检查它：

```
 $noFile = $_FILES['image']['size'][0] === 0 
           && $_FILES['image']['tmp_name'][0] === ''; 
```

是的，就是这么简单。

您使用的测试：

```
empty($_FILE); 
```

只会告诉您整个表单是否已提交。所以一个完整的例子：

```
$submitted = empty($_FILE);
if ($submitted) {
    $noFile    = $_FILES['image']['size'][0] === 0 
                 && $_FILES['image']['tmp_name'][0] === '';
    if ($noFile) {
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-24T12:12:03.357

检查值不为空：

```
in_array(!null,$_FILES['field_name']['name']) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-16T19:37:14.917

```
if($_FILES['image']['error'] === UPLOAD_ERR_OK) {
    // Success code Goes here .. 
} 
```

`UPLOAD_ERR_OK`如果没有错误，则返回值 0，文件已成功上传。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T22:15:49.747

[http://php.net/manual/en/features.file-upload.post-method.php](http://php.net/manual/en/features.file-upload.post-method.php)

> 如果在您的表单中没有选择要上传的文件，PHP 将返回 $_FILES['userfile']['size'] 为 0，并且 $_FILES['userfile']['tmp_name'] 为无。

即使用户没有选择要上传的文件，您也会在每个“文件”上传字段中获得一个数组条目。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-16T09:35:27.503

我已经通过多个文件输入遇到了这个问题。我发现用于检查是否已选择任何文件的工作是：

```
<?php
$size_sum = array_sum($_FILES['img']['size']);
if ($size_sum > 0) {
 // at least one file has been uploaded
} else {
 // no file has been uploaded
}
?> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-28T23:20:03.880

```
if(!empty($_FILES['image']['name'][0]) || !empty($_FILES['image']['name'][1]) ||  
!empty($_FILES['image']['name'][2])) 
```

或者

```
for($1=0;$i<count($_FILES['image']);$i++){
if(!empty($_FILES['image']['name'][$i])){
   // do something
}
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2015-04-21T16:49:53.387

```
if(isset($_FILES['file'])){//do some thing here} 
```

# google-plus - google+ API 是否有办法获取我关注的人的供稿？

> ID：12538721
> 
> 赞同：2
> 
> 时间：2012-09-21T21:59:00.927
> 
> 标签：google-plus

在 facebook 和 twitter API 中，有一种方法可以从我关注的所有人那里获取帖子，有没有办法使用 Google+ 来做到这一点？如果没有，我在哪里可以推荐它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:39:17.143

Google+ API 目前不提供列出您圈子中的人的方法。

您可以通过其他方式检索人员。尝试通过 userId、通过搜索或使用[人员方法](https://developers.google.com/+/api/latest/people)的活动来检索人员。对于每个 userId，您可以使用[Activities: list](https://developers.google.com/+/api/latest/activities/list)检索帖子。

可以在此处报告功能请求和问题并加注星标：[https ://code.google.com/p/google-plus-platform/](https://code.google.com/p/google-plus-platform/)

# python - 什么时候在 Python 中使用按 id 比较？字典键比较？

> ID：12538723
> 
> 赞同：2
> 
> 时间：2012-09-21T22:00:14.313
> 
> 标签：python

这是什么意思？

> 唯一不能作为字典键接受的值类型是包含列表或字典或其他可变类型的值，它们按值而不是对象标识进行比较，原因是字典的有效实现需要键的哈希值保持不变。

我认为即使对于元组，比较也会按值进行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T22:03:03.647

将可变对象作为键的问题在于，当我们使用字典时，我们很少想要检查身份。例如，当我们使用这样的字典时：

```
a = "bob"
test = {a: 30}
print(test["bob"]) 
```

我们希望它能够工作——第二个字符串`"bob"`可能与 不同`a`，但它是相同的值，这是我们关心的。这适用于任何两个相等的字符串将具有相同的哈希，这意味着`dict`（实现为哈希图）可以非常有效地找到这些字符串。

当我们有一个列表作为键时，问题就出现了，想象一下这种情况：

```
a = ["bob"]
test = {a: 30}
print(test[["bob"]]) 
```

我们不能再这样做了——比较不会起作用，因为列表的哈希不是基于它的值，而是基于列表的实例（又名`(id(a) != id(["bob"))`）。

Python 可以选择更改列表的哈希值（破坏哈希图的效率）或简单地比较身份（这在大多数情况下是无用的）。Python 不允许使用这些特定的可变键以避免微妙但常见的错误，即人们期望值等同于值，而不是身份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:38:03.690

该文档将两种不同的东西混合在一起：可变性和价值可比性。让我们把它们分开。

*   按身份比较的不可变对象很好。对于任何对象，身份永远不会改变。

*   按值比较的不可变对象很好。对于不可变对象，该值永远不会改变。这包括元组。

*   按身份比较的可变对象很好。对于任何对象，身份永远不会改变。

*   按值比较的可变对象是不可接受的。可变对象的值可以更改，这会使字典无效。

同时，您的措辞与 Mapping Types （[Python 3.3 中的 4.10](http://docs.python.org/library/stdtypes.html#mapping-types-dict)或[Python 2.7 中的 5.8](http://docs.python.org/dev/library/stdtypes.html#mapping-types-dict)，两者都说：

> 字典的键几乎是任意值。不可散列的值，即包含列表、字典或其他可变类型的值（按值而不是对象标识进行比较）不能用作键。

无论如何，这里的重点是规则是“不可散列的”；“可变类型（通过值而不是对象身份进行比较）”只是为了进一步解释事情。严格来说，按对象身份进行比较和按对象身份进行散列总是相同的（唯一需要的是如果 id 相等，则散列相等）。

您发布的版本中有关“字典的有效实现”的部分只会增加混乱（这可能是它不在参考文档中的原因）。即使明天有人想出了一种有效的方法来处理将列表存储为 dict 键，该语言也不允许这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:27:47.433

哈希是计算对象唯一代码的方法，对于同一对象，此代码始终相同。`hash('test')`例如 is `2314058222102390712`, a = 'test'; `hash(a)`= `2314058222102390712`。

在内部，字典值是通过哈希而不是您指定的变量来搜索的。一个列表是可变的，一个列表的散列，如果它在哪里被定义，它会随着列表的改变而改变。因此python的设计没有散列列表。因此，列表不能用作字典键。

元组是不可变的，因此元组具有哈希 eG `hash((1,2))`= `3713081631934410656`。可以通过比较哈希而不是值来比较元组`a`是否等于元组。`(1,2)`这会更有效率，因为我们只需要比较一个值而不是两个值。

# c - 仅使用位运算符以二进制执行算术运算

> ID：12538724
> 
> 赞同：1
> 
> 时间：2012-09-21T22:00:15.987
> 
> 标签：c, binary, bit-manipulation, twos-complement

> **可能重复：**
> [如何仅使用位移和加法进行乘法和除法？](https://stackoverflow.com/questions/2776211/how-can-i-multiply-and-divide-using-only-bit-shifting-and-adding)

我必须编写函数来执行二进制减法、乘法和除法，而不使用除循环控制之外的任何算术运算符。我以前只用 Java 编写过代码，所以我很难理解这一点。

从减法开始，我需要用原型写一个函数

```
int bsub(int x, int y) 
```

我知道我需要将 y 转换为二进制补码才能使其为负并将其添加到 x，但我只知道如何通过使用补码 ~ 运算符并加 1 来做到这一点，但我不能使用 + 运算符。

提供了 badd 函数，如果我能弄清楚如何使 ya 为负数，我将能够在 bsub 中实现它。badd 的代码如下所示。提前感谢您的任何提示。

```
int badd(int x,int y){

int i;

char sum;
char car_in=0;
char car_out;
char a,b;

unsigned int mask=0x00000001;
int result=0;

for(i=0;i<32;i++){

  a=(x&mask)!=0;
  b=(y&mask)!=0;
  car_out=car_in & (a|b) |a&b;
  sum=a^b^car_in;

  if(sum) {
     result|=mask;
  }

  if(i!=31) {
     car_in=car_out;
  } else {
     if(car_in!=car_out) {
        printf("Overflow occurred\n");
     }
  }

  mask<<=1;
  }

 return result;
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T22:20:54.260

好吧，在没有`+`or`-`运算符的情况下进行按位运算的减法有点棘手，但可以做到。您对补码有了基本的想法，但不使用`+`它会变得有些棘手。

您可以通过首先仅按位设置加法，然后使用它来进行减法。用于补码，所以代码如下所示：

```
int badd(int n1, int n2){
    int carry, sum;
    carry = (n1 & n2) << 1; // Find bits that are used for carry
    sum = n1 ^ n2; // Add each bit, discard carry.
    if (sum & carry) // If bits match, add current sum and carry.
        return badd(sum, carry);
    else
        return sum ^ carry; // Return the sum.
}

int bsub(int n1, int n2){
    // Add two's complement and return.
    return badd(n1, badd(~n2, 1));
} 
```

然后如果我们在一个例子中使用上面的代码：

```
int main(){
printf("%d\n", bsub(53, 17));
return 0;
} 
```

最终返回`36`。这就是减法仅用于按位运算的方式。

之后乘法和除法变得更复杂，但可以完成；对于这两个操作，使用轮班以及加法和/或减法来完成工作。您可能还想阅读[这个问题](https://stackoverflow.com/questions/2776211/how-can-i-multiply-and-divide-with-only-using-bit-shifting-and-adding)和[这篇](http://en.wikipedia.org/wiki/Multiplication_algorithm#Peasant_or_binary_multiplication)关于如何做的文章。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T22:22:51.520

您必须先实现二进制加法：

4位示例：

a = 1101 b = 1011

掩码范围从 0001 到 1000

```
for (i=0;i<4;i++) {
    x = a & pow(2, i); //mask, you can shift left as well
    y = b & pow(2, i);
    z = x ^ y; //XOR to calculate addition
    z = z ^ carry; //add previous carry
    carry = x & y | x ^ carry | y ^ carry; //new carry
} 
```

这是伪代码。掩码允许从左到右逐位操作。您必须方便地将 z 存储到另一个变量中。

一旦你有了加法，你就可以通过 1' 补加 1 来实现减法。

乘法也是如此，但稍微困难一些。基本上和你在学校学过的除法方法一样，使用掩码方便地选择位，并使用上面的加法添加中间结果。

除法有点复杂，需要花一些时间来解释，但基本上是相同的原理。

# jquery - Jquery变量不更新？

> ID：12538727
> 
> 赞同：0
> 
> 时间：2012-09-21T22:00:24.010
> 
> 标签：jquery

请查看此代码，并告诉我为什么即使我的错误确实被触发，我的错误变量仍然尖叫 0。我已经尝试并尝试让它们改变。我只是在这一点上迷路了。

```
validationError = 0;
$("#step1continue").click(function(){

        var fname = $('#fname');
        if (fname.val() == "") {
            fname.addClass("needsfilled");
            fname.val('Required!');
                       validationError = 1;
        } else {
                  validationError = 0;
        }

        var lname = $('#lname');
        if (lname.val() == "") {
            lname.addClass("needsfilled");
            lname.val('Required!');
                        validationError = 1;
        } else {
                 validationError = 0;
        }

        var company_name = $('#company_name');
        if (company_name.val() == "") {
            company_name.addClass("needsfilled");
            company_name.val('Required!');
                        validationError = 1;
        } else {
                  validationError = 0;
        }

        var email = $('#email');
        if (email.val() == "") {
            email.addClass("needsfilled");
            email.val('Required!');
                       validationError = 1;
        } else {
                  validationError = 0;
        }

         var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
               if (!emailReg.test(email.val())) {
                        email.addClass("needsfilled");
            email.val('Use a real email address!');
                       validationError = 1;
        } else {
                 validationError = 0;
        }

         var phone = $('#phone');
                if (phone.val() == "") {
            phone.addClass("needsfilled");
            phone.val('Required!');
                        validationError = 1;
        } else {
                  validationError = 0;
        }
                if (phone.val().length < 10) {
            phone.addClass("needsfilled");
            phone.val('10 digits minimum');
                        validationError = 1;
        } else {
                 validationError = 0;
        }   

                var phoneregxp = /^[0-9]$/;
                if (phoneregxp.test(phone.val())) {
                        phone.addClass("needsfilled");
            phone.val('Numbers ONLY');
                        validationError = 1;
        } else {
                  validationError = 0;
        }   

      alert(validationError);

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:03:05.907

因为您在每次成功检查时不断重置您的validationError？

如果 (say)`#fname`未填写，则将validationError 设置为1。没关系。但是然后你检查`#lname`，哎呀......这是一个填写，所以现在validationError再次为0。

为什么不每次出现错误时都增加该值，而不是像疯了一样猛拉一个简单的开/关值**？**

```
validationError = 0;
if (...) { validationError++ }
if (...) { validationError++ }
if (validationError > 0) {
   alert('You have ' + validationError + ' errors');
} 
```

# javascript - 悬停在文本上以打开图像

> ID：12538729
> 
> 赞同：1
> 
> 时间：2012-09-21T22:00:43.963
> 
> 标签：javascript, jquery, html, hover

当我将鼠标悬停在“PIC”一词上时，我想打开一张图片，但我在相同的第 10 部分或更多部分上，并且每个部分都必须显示 PIC 元素的特定图像。

```
<h6 id="pic1" class="pic"> PIC</h6>
<div id="img_pic1" class="imgpic" style="display:none"><imgsrc="img/image1.jpg"/></div>

<h6 id="pic2" class="pic"> PIC</h6>
<div id="img_pic2" class="imgpic" style="display:none"><img src="img/image2.jpg"/>/div>

<h6 id="pic3" class="pic"> PIC</h6>
<div id="img_pic3" class="imgpic" style="display:none"><img src="img/image3.jpg"/>/div> 
```

等等……

```
<script>
$('h6.pic').mouseenter(function(){
$('div.img_pic').fadeIn();
}).mouseleave(function(){
$('div.img_pic').fadeOut();
});
</script> 
```

这工作正常，但它打开所有图像而不是只打开我悬停的图片的图像？任何帮助将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:03:01.963

尝试这个

```
<script>
   $('h6.pic').mouseenter(function(){
    $(this).next().fadeIn();
       }).mouseleave(function(){
    $(this).next().fadeOut();
    });
</script> 
```

检查这个[小提琴](http://jsfiddle.net/RgdnS/)

你也没有正确关闭你的 div

```
<img src="img/image2.jpg"/>/div> 
```

**更新代码**

[更新的小提琴](http://jsfiddle.net/qZ2fp/)

如果是这种情况，那么你可以试试这个

```
$('h6.pic').mouseenter(function() {
        console.log($(this).next('div'))
        $(this).next().next('.imgpic').fadeIn();
    }).mouseleave(function() {
        $(this).next().next('.imgpic').fadeOut();
    });​ 
```

// 或者

```
$('h6.pic').mouseenter(function() {
            console.log($(this).next('div'))
            $(this).next().next().fadeIn();
        }).mouseleave(function() {
            $(this).next().next().fadeOut();
        });​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:03:10.263

您应该使用 $(this) - 指当前元素 - 和[next()](http://api.jquery.com/next/) - 当前元素之后的元素

```
$('h6.pic').mouseenter(function(){
    $(this).next('div.imgpic').fadeIn();
}).mouseleave(function(){
    $(this).next('div.imgpic').fadeOut();
}); 
```

您的选择器中也有错字

```
$('div.img_pic') // <-- your class is imgpic without the _ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:56:48.233

恕我直言，使用这种`$(this).next()`方法有点不灵活；我会通过附加一个`data-*`指向每个标题元素的目标图片的属性来稍微不同地处理它：

```
<h6 id="pic1" class="pic" data-target="img_pic1"> PIC</h6>
<div id="img_pic1" class="imgpic" style="display:none"><img src="img/image1.jpg"/></div>

<h6 id="pic2" class="pic" data-target="img_pic2"> PIC</h6>
<div id="img_pic2" class="imgpic" style="display:none"><img src="img/image2.jpg"/></div>

<h6 id="pic3" class="pic" data-target="img_pic3"> PIC</h6>
<div id="img_pic3" class="imgpic" style="display:none"><img src="img/image3.jpg"/></div>​ 
```

然后你的 jQuery 看起来像这样：

```
$('h6.pic').each(function () {
  var target = $(this).data('target');
  $(this).mouseenter(function () {
    $('#' + target).fadeIn();
  }).mouseleave(function () {
    $('#' + target).fadeOut();
  });         
});​ 
```

什么鬼，这是[小提琴](http://jsfiddle.net/ultranaut/z9hvh/)。​</p>

# android - android MediaPlayer - MediaPlayer 上的非法状态异常

> ID：12538731
> 
> 赞同：1
> 
> 时间：2012-09-21T22:00:46.370
> 
> 标签：android, android-mediaplayer

我有以下一段代码。
前任：

```
 if(player1 != null){
    if(player1.isPlaying()){ //check if it playing
        //other code

    }
    } 
```

**问题 1：**
即使媒体播放器完成播放并且我在完成时释放播放器，null 的条件检查也始终通过。//播放器完成后释放

```
player1.setOnCompletionListener(new OnCompletionListener() {
                    @Override
                public void onCompletion(MediaPlayer mp) {
                    mp.release();
                    Log.d(TAG, "Media player has completed playing");

                }
            }); 
```

**问题 2：**
如果玩家已经玩完游戏，检查 for`null`仍然返回 false 并且失败，因为`isPlaying`给出`illegalstateexception`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:54:01.993

释放播放器不会使实例无效。如果那是您想要的，请在发布后添加 null 。

```
player1.setOnCompletionListener(new OnCompletionListener() {
                    @Override
                public void onCompletion(MediaPlayer mp) {
                    mp.release();
                    mp = null;
                    Log.d(TAG, "Media player has completed playing");

                }
            }); 
```

# python - 在 for 循环中打印语句

> ID：12538732
> 
> 赞同：2
> 
> 时间：2012-09-21T22:01:03.580
> 
> 标签：python

我正在研究一个采用正整数`N`并计算以下总和的函数：

```
1 - 2 + 3 - 4 + 5 - 6 + .... N. 
```

我的教授说我们不能在这上面使用“数学公式”，那我该怎么办呢？

我考虑过使用`for`循环，但我不知道如何或为该`print`语句编写什么。这是我到目前为止所拥有的：

```
n=int(input("enter N="))
for i in range(1, n+1, 1):
    if i % 2 == 0:
        # I'm not sure what print statement to write here 
```

我试过`print(i= "+" i+1)`了，只是这样奇怪的东西，但我得到了错误，然后就迷路了。

我现在拥有的

```
n=int(input('enter N='))
total=0
print("sum",)
for i in range(1, n+1, 1):
    if i % 2 == 0:
        count=count - i
        print("-", i)
    else:
        count=count + i
        print("+", i, end=" ")
print("=", total)

#still get errors saying name count not defined and unsupported sperand for +: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:06:16.483

首先，要按照描述累加总和，并通过循环而不是“使用数学公式”来完成，您想要这样做：

```
n=int(input("enter N="))
total = 0
for i in range(1, n+1, 1):
    if i % 2 == 0:
        ????
    else:
        ????
print(total) 
```

你应该能够弄清楚是什么？？？？是：你需要为每个 i 做一些总计，并且对于偶数和奇数来说是不同的。

现在，如果您希望它打印出如下内容：

> 总和 1 - 2 + 3 - 4 + 5 - 6 + .... N = X

您可以像这样打印一些东西：

```
n=int(input("enter N="))
total = 0
print ("sum", end=" ")
for i in range(1, n+1, 1):
    if i % 2 == 0:
        print("-", i, end=" ")
        ????
    else:
        if i == 1:
           print(i, end=" ")
        else:
           print("+", i, end=" ")
        ????
print("=", total) 
```

如果您想分别保留负总数和正总数，然后添加它们，正如您在编辑中提到的那样，更改`total = 0`为`ntotal, ptotal = 0, 0`，然后更改每个 ???? 部分，所以一个对一个整体起作用，一个对另一个起作用。

以上都是针对 Python 3 的。如果你想在 Python 2 中运行它，你需要把这些`print`函数调用变成`print`语句。对于我们使用默认换行符结尾的简单情况，这只是删除括号的问题。但是，当我们使用 时`end=" "`，Python 2 的`print`语句不会像这样使用关键字参数，因此您必须使用“魔术逗号”，这意味着以空格而不是换行符结束打印输出。因此，例如，而不是这样：

```
print("+", i, end=" ") 
```

你会这样做：

```
print "+", i, 
```

同样，对于 Python 3，您不必担心这一点。（另外，有一些方法可以让完全相同的代码在 Python 2 和 3 中运行——例如，使用`sys.stdout.write`——如果你经常使用这两种语言，你可能需要阅读它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:05:47.653

你已经大部分时间了。不过，我不确定您为什么认为需要在循环中放置一个 print 语句。你只想要一个结果，对吧？你已经有了 if i % 2 == 0 - 这是偶数的情况 - 你想根据当前 i 是奇数还是偶数进行加法或减法。所以保持一个正在运行的计数，在每个循环迭代中酌情加减，并在最后打印计数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T22:06:07.757

您会看到奇数和偶数发生的情况之间的区别，这很好。

因此，当您在列表中循环时，**如果**数字是偶数，则执行一项操作，**否则**执行另一项操作。

计算出结果后，打印它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T22:31:51.693

已经在这里的答案中有很多解释。因此，我将尝试解决计算此总和的不同方法：

**方法一**：

```
def mySum(N):
    answer = 0
    for i in range(1, N+1):
        if i%2:
            answer += i
        else:
            answer -= i
    return answer 
```

**方法二**：

```
def mySum(N):
    answer = 0
    for i in range(1, N+1, 2):
        answer += i
    for i in range(2, N+1, 2):
        answer -= i
    return answer 
```

**方法3**：

```
def mySum(N):
    pos = range(1, N+1, 2)
    neg = range(2, N+1, 2)
    return sum(pos) - sum(neg) 
```

**方法四**：

```
def mySum(N):
    return sum([a-b for a,b in zip(range(1, N+1, 2), zip(2, N+1, 2))]) 
```

**方法5**：

```
def mySum(N):
    return sum([i*-1 if not i%2 else i for i in range(1,N+1)]) 
```

**方法6**：

```
def mySum(N):
    return sum(map(lambda n: n*[-1, 1][i%2], range(1, N+1))) 
```

同样，这些只是为了帮助您入门 python。其他人提供了很好的解释，这并不意味着

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-21T22:07:35.063

```
count = 0
print "0"
for i in range(1, n+1, 1):
    if i % 2 == 0:
        count = count - i
        print "-" , i
    else:
        count = count + i
        print "+" , i
print "=", count 
```

# javascript - Linkedin API - 获取连接数

> ID：12538738
> 
> 赞同：1
> 
> 时间：2012-09-21T22:01:47.593
> 
> 标签：javascript, linkedin

我可以成功下载 LinkedIn 连接，但现在我试图为用户获取一个额外的对象 - 他们的连接数。文档似乎表明我需要“total”或“_total”，但我尝试了所有组合但没有成功。我得到的只是“未定义”。这是我试图获得总数的示例代码：

```
 IN.API.Connections("me")
    .fields(["id", "firstName", "lastName", "mainAddress", "dateOfBirth", "phoneNumbers", "positions", "pictureUrl"])
    .params({"count":500})
    .error(displayError)
    .result(function(result) {

        document.write("1 ", result.values._total, "<br>");
        document.write("2 ", result.values.total, "<br>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:43:40.610

返回的 JSON 格式如下：

```
{
    "_count": #,
    "_start": #,
    "_total": #,
    "values": [
        {
            ...
        },
        {
            ...
        }
    ]
} 
```

因此，您将访问通过返回的连接总数`result._total`。

# regex - 差异：忽略只有制表符的行

> ID：12538748
> 
> 赞同：2
> 
> 时间：2012-09-21T22:02:54.763
> 
> 标签：regex, diff

我正在尝试区分文件，并确定它们是否相同，但忽略所有空格。

使用`diff`时，`-b`告诉`diff`忽略给定行上的空格。该`-B`选项告诉它忽略所有空行。但是，如果你有一行只包含空格，则`-B`and`-b`似乎不能一起工作。

我已经求助于使用该`-I`选项，我希望 diff 忽略所有仅包含空格的行，当该行仅包含空格时效果很好，但`\t`似乎与制表符不匹配。

我在网上找到了一篇参考资料，提到您需要使用 POSIX 正则表达式，但 POSIX 声明`:blank:`将匹配任何空格（包括制表符）。那也不行。

这是我正在尝试做的一个示例。理想情况下，我的`diff`台词会说明`t1.txt`，`t2.txt`并且`t3.txt`都是一样的。

```
bash#> echo hi > t1.txt
bash#> echo hi > t2.txt
bash#> echo hi > t3.txt
bash#> echo " " >> t2.txt
bash#> echo -e "\t" >> t3.txt
bash#> diff -BbaNq -I "^[ \t]*$" t1.txt t2.txt
bash#> diff -BbaNq -I "^[ \t]*$" t1.txt t3.txt
Files t1.txt and t3.txt differ
bash#> diff -BbaNq -I "^[:blank:]*$" t1.txt t3.txt
Files t1.txt and t3.txt differ
bash#> 
```

任何有关语法的帮助`diff`都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:41:15.690

尝试这个：

```
diff -wBt -u t1.txt t2.txt 
```

# objective-c - MPMoviePlayerController 音频/视频不同步

> ID：12538750
> 
> 赞同：0
> 
> 时间：2012-09-21T22:03:02.353
> 
> 标签：objective-c, audio, mpmovieplayercontroller, sync

在我的 iPad 应用程序中，我创建了一个 MPMoviePlayerController 来播放网站上的 MP4。MP4里有人在说话。在应用程序中，我注意到音频和视频可能有半秒或四分之一秒的不同步。（我可以这么说，因为我在网络浏览器中观看视频并且没有延迟。）

我对此唯一的线索是，当 MPMoviePlayerController 首次加载时，音频开始播放，但视频没有 - 然后视频开始播放，它似乎跳过了几帧以“赶上”音频......但它并不完全同步。

[看到这个类如何成为Apple 文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)中的“黑匣子” ，并且现有的方法或属性都没有对这个问题有帮助，我有点难过。我可能不得不让它保持轻微的滞后状态，而不是面对奇怪的解决方法。我想看看是否有人以前经历过这种情况或可以提出解决方案。

我在 Mountain Lion、最新的 XCode、带有 iOS 6 的 iPad 2 上运行。

我用来生成控制器的代码是：

-（无效）开始视频播放{

```
if (!self.theMoviePlayer) {
    self.theMoviePlayer = [[MPMoviePlayerController alloc] initWithContentURL: movieURL];
    [self.bgView addSubview: self.theMoviePlayer.view];
    [self.theMoviePlayer.view setFrame: movieContainer.frame]; // player's frame must match parent's
} else {
    [self.theMoviePlayer setContentURL:movieURL];
}
    self.theMoviePlayer.shouldAutoplay = YES;
    [self.theMoviePlayer play];
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T04:33:57.793

经过各种测试，我必须得出结论，我一直在播放的 MP4 上的编码有问题。我不是视频编解码器大师，但我做了以下测试，告诉我：

1) 下载 MP4，将其放入应用程序并通过文件 URL 将其加载到 MPMoviePlayerController。音频仍然不同步，所以不是连接问题。

2) 在网络上找到另一个 MP4（来自 Vimeo 的东西）并将其流式传输到播放器中。音频同步正确，我尝试播放的 MP4 可能有问题。

3) 下载 MP4，并使用 Handbrake 将其转换为具有各种不同设置（包括 iPad 预设）的 M4V。音频同步良好。

基于此，在我看来，我尝试播放的文件而不是播放器（或播放器无法处理）有问题。不幸的是，我尝试播放的文件不能简单地转换，它们是大型网站系统的一部分，必须更改数百个文件，等等。所以，虽然我已经回答了我自己的问题，但我还没有解决问题。

# java - 如何创建所有子类的实例

> ID：12538761
> 
> 赞同：3
> 
> 时间：2012-09-21T22:03:36.987
> 
> 标签：java, reflection, subclass

我有超过 250 个需要由它们组成的实例的子类，我不能坐在那里腼腆地粘贴`new Class();`250 次。无论如何使用反射来创建类的实例吗？创建实例时不需要构造函数。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:14:14.597

我真的不理解你，但我试着猜测（未经测试）：

```
public class Test {
    public static void main(String[] args) {
        Class[] classes = new Class[]{Class1.class, Class2.class, Class3.class};
        for (Class cls : classes) {
            Object myObject = cls.newInstance();
            -------^^^^^^^^-------
        }
    }
} 
```

看看[创建新的类实例](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)

编辑：可能是 [http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName(java.lang.String) )

```
Class.forName("mypackage.MyClassname"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:18:44.413

首先，您需要[获取所有子类](https://stackoverflow.com/a/492224/646634)。这个特定的答案似乎是合法的，尽管我自己没有测试过。

然后遍历类并使用[`Class.newInstance`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#newInstance%28%29)（无参数构造函数）或[`Class.getConstructor`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getConstructor%28java.lang.Class...%29)当构造函数[`Constructor.newInstance`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Constructor.html#newInstance(java.lang.Object...))有参数必须传递时创建实例。最终代码将如下所示：

```
Reflections reflections = new Reflections("my.project.prefix");
Set<Class<? extends SomeType>> subTypes = 
        reflections.getSubTypesOf(SomeType.class);
Set<SomeType> someTypes = new HashSet<SomeType>(subTypes.size());
for (Class<? extends SubType> subType : subTypes) {
    someTypes.add(subType.newInstance());
}
// Do something with someTypes here 
```

这将获取子类，遍历它们，并为每个子类创建一个实例。这里有一些我没有做任何事情的例外。您可能还需要进行一些铸造（尽管我认为您不必这样做）。

**编辑：**我上面的回答显然会导致一些虚假的类加载。[像这样](http://code.google.com/p/reflections/wiki/UseCases#query_the_store_directly,_avoid_definition_of_types_in_class_loa)创建您的子类集：

```
Reflections reflections = new Reflections(...); //see in other use cases
Set<String> subTypeFqns = reflections.getStore().getSubTypesOf(SomeClass.class.getName());
Set<Class<?>> subTypes = new HashSet<Class<?>>();
for (String fqn : subTypeFqns) {
    subTypes.add(Class.forName(fqn));
} 
```

然后这些行：

```
for (Class<? extends SubType> subType : subTypes) {
    someTypes.add(subType.newInstance());
} 
```

变成这样：

```
for (Class<?> subType : subTypes) {
    someTypes.add((SomeType) subType.newInstance());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:16:18.737

您可以执行以下操作：

```
Class instantiableClass = Class.forName("package.subpackage.ClassName");
Object instance = instantableClass.newInstance(); 
```

仅当您的类只有默认构造函数或公共零参数构造函数时才有效。如果需要，可以循环、概括或复制代码。

对于更通用的解决方案[，这](http://www.velocityreviews.com/forums/t137693-find-all-implementing-classes-in-classpath.html)可以帮助您理解为什么它是不可能的。你可以对任何你知道的课程做任何你想做的事，或者知道他们的名字，或者可以从任何来源访问他们的名字，或者以任何方式获得这样的最少信息。

但是如果没有任何关于这些类的知识，这是几乎不可能的。您必须在当前类路径中查找所有类，然后检查它们的继承树是否符合您的特定类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:16:44.973

这是一段代码，用于加载包的所有类，为其创建新实例并将它们放入哈希图中（我的所有类都继承自 Commande）：

```
 this.actions = new HashMap<String, Commande>();

    ServletContext sc = this.getServletContext();

    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    URL res = classLoader.getResource(COMMAND_DIRECTORY);
    File[] list = new File(res.getFile()).listFiles();
    String className = "";
    for (File f : list) {
        className = f.getName().replaceAll(".class$", "");
        try {
            Class<?> classe = Class.forName("org.commandes." + className);
            if (classe.getSuperclass() == Commande.class) {
                Commande c = (Commande) classe.newInstance();
                this.actions.put(c.getName(), c);
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
    } 
```

在这里，COMMAND_DIRECTORY 对我来说是 org/commandes。

我不知道这是否是正确的方法，但这是我发现在 servlet 中实现命令设计模式（类似插件实现）的唯一方法。

# php - 在 Twig 视图中访问“点”命名空间服务

> ID：12538766
> 
> 赞同：2
> 
> 时间：2012-09-21T22:04:00.067
> 
> 标签：php, twig, silex

我知道我可以通过在 Twig 模板（示例`app.request.host`）中使用点符号来访问已注册的服务。但是，如果我创建了自己的命名空间服务（在本例中`tagframe.photoservice`），当我尝试访问它时，我会收到一个错误，即对象“Silex\Application”上不存在方法“tagframe”。是否可以访问已命名空间的服务？换句话说，我通常会在控制器中使用 $app['tagframe.photoservice'] 访问的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:34:59.880

是的，就像访问数组一样：

```
{{ app["tagframe.photoservice"].resizePhoto() }} 
```

# windows - 如何通过随机访问直接从 Windows 上的磁盘分区读取和写入数据？

> ID：12538767
> 
> 赞同：0
> 
> 时间：2012-09-21T22:04:03.880
> 
> 标签：windows, volume, random-access

我可以打开一个磁盘，并进行一些读写操作（此处描述：[如何直接使用 .Net 读取磁盘？](https://stackoverflow.com/questions/38190/how-do-i-read-a-disk-directly-with-net)），但我不知道如何查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:08:24.907

您正在寻找的 API 函数是[`SetFilePointerEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365542.aspx).

# c# - 解析 XElement

> ID：12538770
> 
> 赞同：3
> 
> 时间：2012-09-21T22:04:25.060
> 
> 标签：c#, xml, linq-to-objects

我是 LINQ/XML 的新手。我刚刚了解到语言集成查询可用于解析 xml。我正在尝试解析以下 XML 结构，我需要帮助

====================================

```
<config>

<params>
  <tp name="abc">yes</tp>
  <tp name="aee">no</tp>
  <tp name="bbc">no</tp>
  <tp name="ccb">yes</tp>
</params>

<nits>
  <tn name="kjh">
    <min>44</min>
    <max>98</max> 
  </tn>

  <tn name="klm">
    <min>55</min>
    <max>88</max> 
  </tn>

  <tn name="hhh">
    <min>44</min>
    <max>98</max> 
  </tn>
</nits>

<params>
  <tp name="lml">no</tp>
  <tp name="rre">yes</tp>
  <tp name="rst">no</tp>
  <tp name="wee">yes</tp>
</params>

<nits>
  <tn name="adf">
    <min>44</min>
    <max>98</max> 
  </tn>

  <tn name="ddd">
    <min>42</min>
    <max>92</max> 
  </tn>

  <tn name="kjj">
    <min>92</min>
    <max>98</max> 
  </tn>
</nits>

</config> 
```

====================================

需要输出：

我的目标是在文本文件或数据网格等中按类别将上述数据显示为键值对。

```
<Params>
abc : yes
aee : no
bbc : yes
...
...
...
...

<nits>

kjh: 44 , 98
klm: 55 , 88
...
...
kjj: 92 , 98
ddd: 42 , 92
... 
```

到目前为止我写的代码是，

```
static void QueryTheData(XDocument doc)
        {
            try
            {
                var a = doc.Descendants("config").Elements("params");
                var b = doc.Descendants("config").Elements("nits");

                var c = doc.Elements("tp");
                var d = doc.Elements("tn");

               /* to do :  parse the elements into key value pairs */
               /* Need hint or help to proceed to get key value pairs from xml data

            }
             catch(Exception e)
            {
                 ....
            }               
 } 
```

还需要针对初学者的 LINQ/XML C# 的任何好的指针。

在此先感谢， ak

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:34:33.253

我想出了这个：

```
using System.Linq;
using System.Xml.Linq;
using System.Xml.XPath;
using System.IO;
using System;

public class Program
{
    public static void Main(string[] args)
    {
        using (var fs = new StreamReader("./test.xml"))
        {
            var doc = XDocument.Load(fs);

            var parms = doc.Root.XPathSelectElements("params/tp")
                .ToDictionary(el => el.Attribute("name").Value, el => el.Value);

            var nits = doc.Root.XPathSelectElements("nits/tn")
                .Select(el => new {
                        Name = el.Attribute("name").Value,
                        Min  = (int) el.Element("min"),
                        Max  = (int) el.Element("max")
                    }).ToList();

            foreach (var kvp in parms)
                Console.WriteLine("{0}: {1}", kvp.Key, kvp.Value);

            foreach (var nit in nits
                    .OrderBy(nit => nit.Name)
                    .ThenBy(nit => nit.Max))
            {
                Console.WriteLine("{0}: {1} {2}", nit.Name, nit.Min, nit.Max);
            }
        }
    }
} 
```

这向您展示了一些成分，包括在集合类型中存储参数/尼特的不同方法。输出：

```
abc: yes
aee: no
bbc: no
ccb: yes
lml: no
rre: yes
rst: no
wee: yes
adf: 44 98
ddd: 42 92
hhh: 44 98
kjh: 44 98
kjj: 92 98
klm: 55 88 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:14:34.480

**“还需要针对初学者的 LINQ/XML C# 的任何好的指针。”**

您可能会发现[.NET Language-Integrated Query for XML Data](http://msdn.microsoft.com/en-us/library/bb308960.aspx)很有帮助，它讨论了使用 LINQ to XML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T22:18:05.390

所以你想从每个元素中获取`name`属性和文本值？`<tp>`这很容易：

```
// Parameters
var query = doc.Descendants("tp")
               .Select(tp => new { Name = tp.Attribute("name").Value,
                                   Value = tp.Value });

foreach (var result in query)
{
    Console.WriteLine("{0} : {1}", result.Name, result.Value);
} 
```

同样对于最小/最大部分：

```
var query = doc.Descendants("tn")
               .Select(tn => new { Name = tn.Attribute("name").Value,
                                   Min = (int) tn.Element("min"),
                                   Max = (int) tn.Element("max") });

foreach (var result in query)
{
    Console.WriteLine("{0}: {1}, {2}", result.Name, result.Min, result.Max);
} 
```

当然，这假定 XML 遵循您布置的模式 - 如果元素没有正确的子元素或属性，它将失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T22:18:48.537

Jon Skeet 的回答将有助于选择输出的参数部分。

> 还需要针对初学者的 LINQ/XML C# 的任何好的指针。

我推荐Jon Skeet 的[C# in Depth, Second Edition 。](https://rads.stackoverflow.com/amzn/click/com/1935182471)总体而言，这是一本很棒的 C# 书籍，其中包含一些 LINQ to XML 材料。在您等待这本书到来的同时，作为本书的 LINQ to XML 补充，我推荐[Microsoft 的 LINQ to XML 文档](http://msdn.microsoft.com/en-us/library/bb387098.aspx)。

# objective-c - NSTextField 不会更新

> ID：12538772
> 
> 赞同：2
> 
> 时间：2012-09-21T22:04:47.010
> 
> 标签：objective-c, cocoa, nstextfield

```
[self.change setStringValue:[NSString stringWithFormat:@"%i", changeValue]]; 
```

其中 change 是 NSTextField 类型的 IBOutlet。无论出于何种原因，我都无法让文本字段显示我想要的任何内容。每次我运行时，该字段都是“0”。关于为什么它不会改变的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T07:14:06.933

永远不要在 init 中更新文本字段或弹出按钮。一旦类被初始化，您必须在 awakeFromNib 或其他一些委托中填充默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T02:03:15.227

好的，这是一个令人尴尬的新手错误，可供其他人学习。我什至在加载视图之前就调用了我的 setstringvalue；在 didfinishlaunching 方法中。使用 awakefromnib 方法确保您的视图已加载。通过苹果：

```
Finally, after all the objects are fully initialized, each receives an awakeFromNib message. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:51:10.903

验证插座是否确实与您放入 xib 文件中的 NSTextField 链接。

# php - 在不同页面中包含不同样式表的最佳方法是什么？

> ID：12538773
> 
> 赞同：0
> 
> 时间：2012-09-21T22:04:48.050
> 
> 标签：php, html, css, include

在索引页面是每个请求的根的情况下。并根据 URL 提供不同的页面。

现在我们对 CSS 文件使用与要提供的页面相同的名称。

但是，如果我们想对一组页面使用相同的 CSS，或者我们不想为页面使用特殊的 CSS，这将失败，通用 CSS 就足够了

数组也建议了一个解决方案，但是当网站页面增加时它似乎无法管理

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:15:43.357

LUT 将是*最快*的方法，尽管我认为您需要认真地重新设计您的应用程序。

无论如何，在您的索引页面上，您有一些变量 $pageName 表示您要加载哪个页面。你可以做这样的事情。

```
$myPages = array(
   "somePage" => array("style_base.css", "custom_style1.css"),
   "otherPage" => array("style_base.css", "awesome_style.css")
   // more pages here
);

foreach( $myPages[$pageName] as $pageStyleSheet ) {
    echo '<link href="' . $pageStyleSheet . '" rel="stylesheet" type="text/css">' . PHP_EOL;
} 
```

只是让你知道这是超级hacky，如果我必须维护你的应用程序，我可能想杀了你。但这是基于您描述的架构的*最快方式。*

## 更新

另一个想法，但是如果您根据页面名称保留每个页面的样式表，并为要重用的工作表使用@include。所以对于*somePage.css*你可以有

```
@include('otherPage.css') 
```

这样，您可以继续反映页面名称，但仍然可以重用样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:21:00.023

@Champ - 您可以为整个网站使用 CSS 文件 - 使用类等。与图像相比，这些文件非常小。我们说的是 ASCII 和几十千字节（最多）——而且可以缓存！

**编辑**

使用额外的服务器负载而不是 PHP 来确定 CSS 内容以获得更好的效果

# sql-server - 授予用户对存储过程的权限

> ID：12538775
> 
> 赞同：0
> 
> 时间：2012-09-21T22:04:58.963
> 
> 标签：sql-server, stored-procedures, plesk

我对 ASP.NET 或 MS SQL 不是很了解，但被要求将基于 ASP.NET 的网站迁移到新主机。我正在将该站点移动到 HostGator Windows 共享帐户。

该站点有一个小的管理部分，其背后有一个 MS SQL 数据库。我从以前的主机获得了一个 .bak 文件中的这个数据库的副本。

我能够在 HostGator 中创建一个 MS SQL 数据库并将备份文件导入其中。该数据库附带一个用户，该用户用于从网站连接到数据库。

虽然在能够与该用户连接到数据库之前，HostGator 强迫我更改它的用户名以符合他们的“HostGatorUserName_UserName”格式。

然后在使用此用户成功连接到数据库后，我收到“找不到存储过程”错误。我发现这可能是由于用户无权访问它之前所做的任何存储过程。我相信这可能是由于用户名已更改。

现在我不知道如何将这些存储过程的权限恢复给用户。HostGator 不为 MS SQL 提供任何 Web 管理员，尽管我能够使用 Oracle SQL Developer（我在 Mac 上）连接到数据库（使用相同的用户）。我已经用谷歌搜索了如何向用户授予存储过程的权限，但当然我不能向自己授予权限。我在 HostGator 上的 Plesk 中找不到可以管理现有用户或我创建的用户的权限的任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:12:25.943

如果这是 HostGator 为您提供的唯一登录名，那么他们需要提升权限（可能通过将用户添加到 dbo 角色）。这可能不是您想要的，但我不清楚在恢复此数据库之前有什么。您是否登录了可以访问其他数据库的服务器？

如果他们还为您提供了不同的登录名来连接，则该登录名可能是 dbo 角色。因此，您可以以该用户身份登录，然后：

```
GRANT EXEC ON dbo.procedure_name TO HostGatorUserName_UserName; 
```

（抱歉，我对 Plesk 一无所知。如果您与 HostGator 支持人员联系以理顺您的访问权限，您可能会得到更好的答案。）

# iphone - UIScrollView 中的垂直图像

> ID：12538776
> 
> 赞同：0
> 
> 时间：2012-09-21T22:05:06.527
> 
> 标签：iphone, objective-c, xcode, ios5

我试图在 UIScrollview 中创建 UIimages 列表。当我水平实现它时，它会按照我想要的方式工作：

![在此处输入图像描述](../Images/1155a4c5a2873fd07d181ec8cb189b21.png)

如您所见，图像粘在一起。

然后我垂直尝试了它。它可以工作，但图像之间出现不需要的空间，如下所示：

![在此处输入图像描述](../Images/b7eb7d9eb286db893e1ca4e16f63c364.png)

这是我的代码：

```
@synthesize scrollView, pageControl;

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    pageControlBeingUsed = NO;

    NSArray *pageImages = [NSArray arrayWithObjects:
                               [UIImage imageNamed:@"photo1.png"],
                               [UIImage imageNamed:@"photo2.png"],
                               [UIImage imageNamed:@"photo3.png"],
                               [UIImage imageNamed:@"photo4.png"],
                               [UIImage imageNamed:@"photo5.png"],
                               nil];

    for (int i = 0; i < pageImages.count; i++) {
        CGRect frame;
        //frame.origin.x = self.scrollView.frame.size.width * i;
        //frame.origin.y = 0;

        frame.origin.x = 0;
        frame.origin.y = self.scrollView.frame.size.height * i;

        frame.size = self.scrollView.frame.size;

        UIImageView *newPageView = [[UIImageView alloc] initWithImage:[pageImages objectAtIndex:i]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit;
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView];
    }

    //self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * pageImages.count , self.scrollView.frame.size.height);

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width , self.scrollView.frame.size.height* pageImages.count);

    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = pageImages.count;
}

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    if (!pageControlBeingUsed) {
        // Switch the indicator when more than 50% of the previous/next page is visible
        CGFloat pageWidth = self.scrollView.frame.size.height;
        int page = floor((self.scrollView.contentOffset.y - pageWidth / 2) / pageWidth) + 1;

        //CGFloat pageWidth = self.scrollView.frame.size.width;
        //int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

        self.pageControl.currentPage = page;
    }
}

- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (IBAction)changePage {
    // Update the scroll view to the appropriate page
    CGRect frame;
    frame.origin.x = 0;
    frame.origin.y = self.scrollView.frame.size.height * self.pageControl.currentPage;

//    frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
//  frame.origin.y = 0;

    frame.size = self.scrollView.frame.size;
    [self.scrollView scrollRectToVisible:frame animated:YES];

    // Keep track of when scrolls happen in response to the page control
    // value changing. If we don't do this, a noticeable "flashing" occurs
    // as the the scroll delegate will temporarily switch back the page
    // number.
    pageControlBeingUsed = YES;
}

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.scrollView = nil;
    self.pageControl = nil;
}

- (void)dealloc {
    [scrollView release];
    [pageControl release];
    [super dealloc];
}

@end 
```

在代码中，水平代码行被注释。

你能帮我删除垂直空间中不需要的空间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T10:47:08.940

在这里，图像大小产生了问题。检查这个`newPageView.contentMode = UIViewContentModeScaleAspectFill;`而不是`newPageView.contentMode = UIViewContentModeScaleAspectFit;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T10:48:58.687

编辑这部分代码

```
UIImageView *newPageView = [[UIImageView alloc] initWithImage:[pageImages objectAtIndex:i]];
        newPageView.contentMode = UIViewContentModeScaleAspectFit; // this statement is making your newPageView bigger then the image, hence spaces are coming when scrolling. !!
        newPageView.frame = frame;
        [self.scrollView addSubview:newPageView]; 
```

动态创建您的视图“ `newPageView`”，以便视图与您的图像具有精确的大小。

# list - css - 动态宽度水平列表

> ID：12538778
> 
> 赞同：0
> 
> 时间：2012-09-21T22:05:43.223
> 
> 标签：list, css, inline, horizontallist

我正在尝试构建一个基于水平列表的菜单。在这个菜单中，左浮动的两个菜单链接是固定宽度的，而其余的菜单链接是右浮动的。

问题是我希望两个固定宽度的链接保持原样，但是浮动的右项目在其余可用空白中均匀分布。

看我的[**小提琴**](http://jsfiddle.net/mHxwr/2/)

***CSS：***

```
 #footer_menu {
        margin: 0;
        height: 54px;
        padding: 0px;
    }
    #footer_menu  ul {
        margin: 0;
        height: 54px;
        padding: 0px;
        display: table;
        table-layout: fixed;
        width:100%;
    }
    #footer_menu li {
        list-style: none;
        padding: 0px;
    }
    #footer_menu .nav_l {
        float: left;
        display: table-cell;
        white-space:nowrap;
    }
    #footer_menu .nav_r {
        float: right;
        width:auto;
        display: table-cell;
        white-space:nowrap;
    } 
```

***HTML：***

```
 <div id="footer_menu">
        <ul>
            <li class="nav_l"><a href="#">Link</a></li>
            <li class="nav_l"><a href="#">Link</a></li>
            <li class="nav_r"><a href="#">Link</a></li>
            <li class="nav_r"><a href="#">Link</a></li>
            <li class="nav_r"><a href="#">Link</a></li>
            <li class="nav_r"><a href="#">Link</a></li>
        </ul>
    </div> 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:25:39.210

试试这个 -[**演示**](http://jsfiddle.net/mHxwr/3/)

```
#footer_menu {
    margin: 0;
    height: 54px;
    padding: 0px;
    display: table;
    width: 100%;
}
#footer_menu  ul {
    margin: 0;
    height: 54px;
    padding: 0px;
    display: table-row;
    background: #ccc;
}
#footer_menu li {
    list-style: none;
    padding: 0px;
}
#footer_menu .nav_l {
    display: table-cell;
    white-space:nowrap;
    width:50px;
    padding:5px;
    border: 1px solid #000;
}
#footer_menu .nav_r {
    width:auto;
    display: table-cell;
    white-space:nowrap;
    padding:5px;
    border: 1px solid #c00;
}​ 
```

# iphone - 在用户决定注销之前如何保持登录状态？

> ID：12538782
> 
> 赞同：0
> 
> 时间：2012-09-21T22:05:51.087
> 
> 标签：iphone, ios, login, restkit

我正在设计一个应用程序，它使用网络服务，如发布链接和图片。第一个视图控制器检查用户的默认用户名和密码，如果正确，则允许用户登录主视图控制器，但如果不正确，则将用户定向到登录视图控制器（如果是第一次应用程序正在运行它还会将用户定向到登录视图控制器）。

我有不同的视图控制器连接到主视图控制器。例如，其中一个用于将图片发布到网站，另一个用于将链接发布到网络，另一个视图控制器用于更改用户配置文件的偏好。

我正在使用 RestKit API 在网络上发布，这是我用于发布的代码：

```
- (IBAction)addLinkPressed:(UIButton *)sender {

        [RKClient clientWithBaseURLString:@"http://MyWebsite.com"];

        NSDictionary* params = [NSDictionary dictionaryWithObjectsAndKeys:
                                self.linkField.text, @"url",
                                self.linkTitleField.text, @"title",
                                self.linkSummaryField.text, @"summary",
                                nil];

        RKRequest *request = [[RKClient sharedClient] post:@"/send_link.php" params:params delegate:self];
        [request setUserData:@"sendLink"];   
} 
```

对于每个视图控制器，我使用以下方法`viewDidLoad`来获得发布身份验证：

```
- (void)autoLogin {

    [RKClient clientWithBaseURLString:@"http://MyWebsite.com"];    
    [RKObjectManager sharedManager].client=[RKClient sharedClient];
    RKParams *parameters = [RKParams params];

    [parameters setValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultUsername"] forParam:@"username"];
    [parameters setValue:[[NSUserDefaults standardUserDefaults] objectForKey:@"defaultPassword"] forParam:@"password"];

    [[RKClient sharedClient] setAuthenticationType:RKRequestAuthenticationTypeHTTP];

    RKRequest *request = [[RKClient sharedClient] post:@"/login.php" params:parameters delegate:self];
    [request setUserData:@"login"];
} 
```

问题：除了为每个视图控制器登录之外，还有什么方法可以从网站获得发布的身份验证？登录每个视图控制器的问题是，有时记录过程会出错并且不允许用户 POST。我需要一种方法，只要用户输入正确的用户名和密码，它就会一直保持登录状态，直到用户自己注销或删除应用程序。

我发现[了这个相对的问题](https://stackoverflow.com/questions/1519072/how-to-maintain-logged-in-status-with-web-server-in-an-iphone-app)，但它没有那么有帮助，或者我没有很好地理解答案。任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:50:45.727

RestKit 旨在使用 API。通常 API 是无状态的，这意味着请求之间没有状态之类的东西。在传统网站上，状态是通过在客户端和服务器之间来回传输 cookie 来实现的。显然 RestKit 不处理 cookie（我认为这很好）。从我的脑海中，我可以想到两个解决方案：

*   显然 RestKit 不会自动处理 cookie。因此，您可以在登录后获取 cookie 并将其附加到每个后续请求。
*   更好：使用 OAuth2，它基本上是用户在登录时收到的令牌。然后此令牌作为参数附加到每个请求。

两种方法基本相同。您必须发送一个标识用户已登录的令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T23:37:46.813

如果我很了解您的情况，那么您有许多单独和独立运行的视图控制器。这样做，您需要与您的应用管理的视图控制器数量一样多的登录。

如果这是您的场景，您可以尝试创建一个单独的类来完成登录工作并使用您的其他视图控制器来处理 GUI。

这将是您的架构：

应用其他类和视图控制器 -> LOGINMANAGER -> viewcontroller 1（图片），viewcontroller 2（链接），viewcontroller 3（首选项），viewcontroller 4（随便）...

# php - 我找不到我的 PHP 问题

> ID：12538783
> 
> 赞同：-5
> 
> 时间：2012-09-21T22:06:01.400
> 
> 标签：php, javascript, mysql, testing, browser

请帮我。请原谅我的英语不好。我正在开发一个使用 PHP 语言的在线测试管理系统。我有个问题。当我从我的用户那里进行测试时，对于某些用户来说，他们在提交测试页面时会出现问题并且他们希望看到他们的结果。插入查询无法正确执行，并且我的表中的某些列是空的。我试图找到问题，但我找不到。我对自己进行了 1000 次测试，但我看不到任何问题。在现代计算机中没有任何问题。会不会是浏览器的问题？会不会是电脑问题？请帮我。

我的 test.php 代码

[http://www.ticktest.ir/test.txt](http://www.ticktest.ir/test.txt)

我的 result.php 代码

[http://www.ticktest.ir/result.txt](http://www.ticktest.ir/result.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:12:28.357

这可能是浏览器问题。可能是代码问题。可能是服务器问题。

您是否尝试过使用 Firebug 之类的工具来观察您自己参加考试时会发生什么？您是否也尝试过使用 Firebug Lite - 可用于其他浏览器的 Firebug 插件，其中包括一些但不是全部的 Firebug 功能？

在 Firefox 中，启动 Firebug 并选择控制台选项卡。然后转到您的测试页面，查看是否有任何错误或警告。如果实际上没有自己进行另一次测试并提交它 - 并观察是否有任何错误。

如果一切在 Firefox 中运行良好，请在 Chrome、Safari 和 IE（在 Windows 和 MAC 上）运行相同的测试。

如果您已经尝试了所有这些并且没有浏览器问题，则可能查看一些 PHP 调试器以查看您的 PHP 脚本是否与您的数据库正确通信。

如果您还没有进行任何测试，请对服务器端进行故障排除（PHP 脚本与您的数据库通信。）如果可以，请尝试各种不同的浏览器（客户端）。

# php - PHP MYSQL 更新查询

> ID：12538785
> 
> 赞同：1
> 
> 时间：2012-09-21T22:06:14.790
> 
> 标签：php, mysql, sql-update

我目前有以下内容`update statement`，但无论如何我可以让它保留当前值但插入和新值不在数据库中？

如果不是，那么实现这一目标的最佳方法是什么？

`UPDATE INTO {refocus_candidate_category} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?",array($emailCheck['id'], $id, $emailCheck['id'], $id));`

**功能：**

```
$catParams = array_merge(array($emailCheck['id']), $fields['Occupation']);
$catPlaceholders = '?'.str_repeat(',?',count($fields['Occupation'])-1);

$catCheck = CMS::selectQuery("SELECT * FROM {table} WHERE canid=? AND categoryid IN (".$catPlaceholders.")", $catParams);

if($catCheck != FALSE)
{
    for($i=0; $i<count($fields['Occupation']); $i++) {
        $id = $fields['Occupation'][$i];

        CMS::updateQuery("UPDATE INTO {table} SET canid=?, categoryid=? WHERE canid=? AND categoryid=?",array($emailCheck['id'], $id, $emailCheck['id'], $id));
    }
        echo 'found update';
} 
```

**身份证打印**

```
 $fields['Occupation'][$i] = 1678 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:16:53.880

从您的问题中我不清楚您的意思是什么，但是对于处理缺失或已经存在的值的插入/更新，有许多替代方法。

首先，如果您只想插入 mysql 并让它创建新行或替换现有行（现有行由主键匹配确定）使用 REPLACE INTO 而不是 INSERT INTO。REPLACE INTO 尝试插入，但如果主键已经存在，它将查询变为 DELETE，然后重试 INSERT。

如果你想插入一个新行，但如果你已经有了一个现有行，你可以使用 INSERT IGNORE INTO （如果你的数据类型或列信息错误，它也可能无法插入.. .) 或 INSERT INTO ... ON DUPLICATE KEY UPDATE，它允许您对如何处理已存在的项目的插入进行更细粒度的控制。

还有其他选择，但这些可能是最相关的。

# wxpython - 加载静态位图

> ID：12538786
> 
> 赞同：2
> 
> 时间：2012-09-21T22:06:15.757
> 
> 标签：wxpython

如何将简单的静态图像（位图）加载到我的面板中？我只想定义图像的位置，没有别的。

这运行没有错误：

```
bmp = wx.Image('pics/default.bmp', wx.BITMAP_TYPE_BMP).ConvertToBitmap()
wx.StaticBitmap(self.panel, -1, bmp, (500, 500)) 
```

但不是我的图像（default.bmp），只有一个黑色的小方块（但至少在正确的位置）

编辑：这有效：

```
 self.picture = wx.StaticBitmap(self.panel,size=(200,300),pos=(500,500))
    self.picture.SetBitmap(wx.Bitmap('pics/default.bmp')) 
```

问题是我必须添加我的 StaticBitmap 的大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T01:21:18.580

我对将位图插入 wxPython 不太熟悉，但是，我只是对 API 做了一些阅读，我想我可能已经找到了你的问题。

用于声明“通常你应该只从子类中调用它”的[API，因为普通的旧`wx.StaticBitmap.__init__()`](http://wxpython.org/docs/api/wx.StaticBitmap-class.html#__init__)**wx.Control**不是很有用。在同一页面上，您还可以看到描述为“执行第二阶段并创建 GUI 控件”的方法[`wx.StaticBitmap.Create()`。](http://wxpython.org/docs/api/wx.StaticBitmap-class.html#Create)您只是完成了两阶段过程的第一阶段。尝试调用该`Create()`方法，看看它是否有帮助。

那么问题就变成了“为什么我们甚至需要一个‘第二阶段’来进行创作？” 我做了更多的挖掘，我从[wx.Image API](http://wxpython.org/docs/api/wx.Image-class.html)中找到了以下摘录：

> wx.Image 不能直接绘制到 wx.DC。相反，必须使用 wx.BitmapFromImage 构造函数从它创建一个特定于平台的 wx.Bitmap 对象。

这似乎意味着 wxPython 中图像渲染的某些平台相关部分要求或在逻辑上保证将图像创建分为两个阶段。

最后一点是，如您所见，`wx.Image`API 说要使用[`wx.BitmapFromImage()`方法](http://wxpython.org/docs/api/wx-module.html#BitmapFromImage)。我阅读了文档，看起来它可以为您完成所有工作。

祝你好运！

# wpf - 在 xaml 中执行“是”条件

> ID：12538789
> 
> 赞同：0
> 
> 时间：2012-09-21T22:06:32.170
> 
> 标签：wpf, xaml

是否可以在 xaml 中执行“IS”条件？

```
<Condition 
    Binding="{Binding RelativeSource={RelativeSource Self}, Path=Type}" 
    Value="MyNamespace.MyClass" /> 
```

我需要的类上没有名为 Type 的属性。有一个永远存在的 GetType() 方法，但我不知道如何在这里调用它来进行条件比较。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:08:50.313

只需放入一个[转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来执行该逻辑，您可以将要比较的类型作为[参数](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converterparameter.aspx)传递（使用[`x:Type`](http://msdn.microsoft.com/en-us/library/ms753322.aspx)）并返回`true`或`false`（设置`Condition.Value`为`true`）。

# c# - 使用 Net.Mail MailAddress 验证电子邮件

> ID：12538793
> 
> 赞同：2
> 
> 时间：2012-09-21T22:07:02.927
> 
> 标签：c#, .net

我已经[阅读](https://stackoverflow.com/a/407102)了关于使用 MailAddress 验证电子邮件的内容，并生成了以下代码：

```
 try
                    {
                        var address = new MailAddress(value.Email);
                    }
                    catch (FormatException)
                    {
                        emailError = "Invalid Email";

 } 
```

令我惊讶的是，该字符串被`ndskfndlfk@sdflsdf`验证为良好的电子邮件。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:50:52.657

这可能不是有效的 WWW 域名，但在专用网络上，我认为它是有效的域名。如果您想获得更多选择性，那么正则表达式。

我尝试使用正则表达式解析*合法*电子邮件（消除垃圾邮件使用的虚假邮件），但它很混乱。

如果您可以访问实际的电子邮件标题，那么它并没有真正变得更容易，但它会变得更准确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:38:50.410

如果您确实需要过滤这些电子邮件地址，您可以使用[此处](http://msdn.microsoft.com/en-us/library/01escwtf%28v=vs.100%29.aspx)找到的小实用程序，它使用正则表达式来验证电子邮件地址。请注意，这是 .Net 4.0 版本 - 与 4.5 略有不同。

```
using System;
using System.Globalization;
using System.Text.RegularExpressions;

public class RegexUtilities
{
   bool invalid = false;

   public bool IsValidEmail(string strIn)
   {
       invalid = false;
       if (String.IsNullOrEmpty(strIn))
          return false;

       // Use IdnMapping class to convert Unicode domain names.
       strIn = Regex.Replace(strIn, @"(@)(.+)$", this.DomainMapper);
       if (invalid) 
          return false;

       // Return true if strIn is in valid e-mail format.
       return Regex.IsMatch(strIn, 
              @"^(?("")(""[^""]+?""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))" + 
              @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-\w]*[0-9a-z]*\.)+[a-z0-9]{2,17}))$", 
              RegexOptions.IgnoreCase);
   }

   private string DomainMapper(Match match)
   {
      // IdnMapping class with default property values.
      IdnMapping idn = new IdnMapping();

      string domainName = match.Groups[2].Value;
      try {
         domainName = idn.GetAscii(domainName);
      }
      catch (ArgumentException) {
         invalid = true;      
      }      
      return match.Groups[1].Value + domainName;
   }
} 
```

否则，如果是用于用户注册，我通常只依赖电子邮件验证 - 即系统向用户发送一封带有链接的电子邮件，然后单击该链接会验证该电子邮件地址是真实的。

*有效*的电子邮件地址可能不是*真实*的。换句话说，它甚至可以通过一个完美的验证系统，但这并不能保证它存在。

# html - 自动链接文本并将类添加到链接的最简单方法

> ID：12538798
> 
> 赞同：0
> 
> 时间：2012-09-21T22:07:47.140
> 
> 标签：html

执行以下操作的最简单方法是什么？

随机输入：

```
check out my new video here http://www.youtube.com/watch?v=123abc 
or here http://youtu.be/123abc
here is my new wallpaper http://somepage.com/fRDTk.jpg
and my new homepage http://google.com 
```

输出：

```
check out my new video here 
<a class="youtube" href="http://www.youtube.com/watch?v=123abc">
http://www.youtube.com/watch?v=123abc</a>
or here 
<a class="youtube" href="http://youtu.be/123abc">
http://youtu.be/123abc</a>
here is my new wallpaper 
<a class="image" href="http://somepage.com/fRDTk.jpg">
http://somepage.com/fRDTk.jpg</a>
and my new homepage 
<a class="iframe" href="http://google.com">
http://google.com</a> 
```

自动链接并根据链接添加特定类的最简单方法是什么？（图片，youtube，其他）

我已经把它放在一起了，但它失败了。

```
<?php
foreach ($imgur->captions->item as $comment) {
$co = $comment->caption;
$linkstring = preg_replace('/(http|ftp)?+(s)?:?(\/\/)?+(www.)?((\w|\.)+)+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU|be|info|co)+(\/)?(\S+)?/i', '<a rel="fancybox fancybox.iframe" href="\0">\0</a>', $co ); 
if(preg_match('/^http:\/\/(?:www\.)?(?:youtube.com|youtu.be)\/(?:watch\?(?=.*v=([\w\-]+))(?:\S+)?|([\w\-]+))$/i', $co, $vresult)) {
$pattern = "/(http|ftp)?+(s)?:?(\/\/)?+(www.)?((\w|\.)+)+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU|be|info|co)+(\/)?(\S+)?/i";
$replacement = '<a class="fancybox-media" href="\0">\0</a>';
$text = preg_replace($pattern, $replacement, $co);
          $type= 'youtube';
          }
elseif(preg_match('/(http(s?):)?([\/.|\w|\s])*\.(?:jpg|gif|png|jpeg|bmp)/i', $co, $vresult)) {
$pattern = "/(http|ftp)?+(s)?:?(\/\/)?+(www.)?((\w|\.)+)+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU|be|info|co)+(\/)?(\S+)?/i";
$replacement = '<a class="fancybox" href="\0">\0</a>';
$text = preg_replace($pattern, $replacement, $co);
          $type= 'image';
          }
else {
$pattern = "/(http|ftp)?+(s)?:?(\/\/)?+(www.)?((\w|\.)+)+\.(com|org|net|mil|edu|COM|ORG|NET|MIL|EDU|be|info|co)+(\/)?(\S+)?/i";
$replacement = '<a class="fancybox fancybox.iframe" href="\0">\0</a>';
$text = preg_replace($pattern, $replacement, $co);
$type = 'none';
}
echo "<div class=\"icomment\">
<p class=\"icomment\">&ldquo;",$text,"&rdquo; &#45;",$comment->author,"</p>
</div>";
}
?> 
```

我一直在搞砸它，只想报废它。希望有一个更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:11:38.723

```
$patterns = array(
  array('pattern'=>'/mypattern/','replaceWith'=>'myreplacement\0','addClass'=>'myclass'),
  array('pattern'=>'/mypattern/','replaceWith'=>'myreplacement\0','addClass'=>'myclass'),
);

foreach($patterns as $pattern) {
   // .... do your thing here... once... for every possibility described in array above.
} 
```

# c# - 使用 Mutex 同步 C# 对象：在 C# 对象析构函数中调用 ReleaseMutex() 时出现问题

> ID：12538801
> 
> 赞同：3
> 
> 时间：2012-09-21T22:07:57.557
> 
> 标签：c#, object, synchronization, mutex, interprocess

我有一个应用程序代码，我在其中使用互斥锁在创建对象期间同步一些代码。对象构造函数获取互斥体，并且仅在不再需要对象时释放它，因此释放互斥体的一个位置将在对象析构函数中。当我使用应用程序的 2 个实例调试代码时，第一个实例首先获取互斥锁，第二个实例坐下来等待 (mut.WaitOne())。用户然后关闭第一个应用程序实例。在这种情况下，第二个实例 mut.WaitOne() 抛出异常：“由于放弃的互斥体，等待已完成。” 这发生在第一个实例中调用 mut.ReleaseMutex() 之前（我知道是因为它在调用 MutexRelease 之前在对象析构函数代码中命中了我的断点）。似乎在调用 ReleaseMutex() 之前释放了互斥锁，从而导致了异常。我将如何解决这种竞争条件？感谢您的帮助。

```
public sealed class MyObject
{
    static ExtDeviceDriver devDrv;
    private Mutex mut = new Mutex(false,myMutex);

    public MyObject()
    {
        mut.WaitOne();
        //Thread safe code here.
        devDrv = new ExtDeviceDriver();
    }

    ~MyObject()
    {
        mut.ReleaseMutex();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:13:43.067

你的方法有缺陷；这不是您应该（尝试）执行同步的方式。如果你想防止多个应用程序实例......然后这样做，而不是这个。如果您需要同步特定调用，请尽可能在最窄的范围内进行。

我仍然可以在您的方法中创建竞争条件，只需复制原始引​​用并在另一个线程上使用它进行函数调用。除了构造函数之外，实际上没有任何东西是同步的，除了创建一个以上的类实例之外，您并没有阻止任何事情，如果我尝试创建第二个实例，我会遇到死锁。不大好。

研究`IDisposable`模式。终结器不是确定性的。这不是 C++，也不是析构函数，你不能依赖它在你想要的时候执行。

其次，您的互斥锁应该是静态的。每个实例都有自己的互斥锁，因此您在实例 1 中同步的互斥锁与实例 2 中的互斥锁不同。这需要是共享资源。

从文档：

> 废弃的互斥锁通常表明代码中存在严重错误。当线程退出而不释放互斥体时，受互斥体保护的数据结构可能不会处于一致状态。如果可以验证数据结构的完整性，则请求互斥锁所有权的下一个线程可以处理此异常并继续。
> 
> 对于系统范围的互斥体，放弃的互斥体可能表明应用程序已被突然终止（例如，通过使用 Windows 任务管理器）。

它继续说关于本地 v 系统互斥锁......

> 互斥体有两种类型：未命名的本地互斥体和命名的系统互斥体。**本地互斥锁仅存在于您的进程中**。进程中的任何线程都可以使用它，该线程引用了表示互斥体的 Mutex 对象。每个未命名的 Mutex 对象代表一个单独的本地互斥体。

在我看来，你想要一个系统互斥锁。告诉我们哪些调用需要同步，以便我们向您展示如何做如何？这是一个非常基本的例子：

```
class Foo
{
    static Mutex _mut(false);
    public MyObject()
    {
        _mut.WaitOne();
        //Thread safe code here.
        devDrv = new ExtDeviceDriver();
        _mut.ReleaseMutex();
    }

    public void SomeSynchronizedMethod()
    {
        // synchronize this call
        _mut.WaitOne();
        devDrv.DoSomething();
        _mut.ReleaseMutex();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:13:37.047

析构函数不是确定性的；CLR 不保证它们何时运行。相反，`IDisposable`在你的类中实现，并强制调用者在`using(...)`块中使用它的实例。这将确保您的实现`Dispose`在需要时被调用。

例如，

```
public sealed class MyObject : IDisposable
{
    static ExtDeviceDriver devDrv;
    private Mutex mut = new Mutex(false,myMutex);

    public MyObject()
    {
        mut.WaitOne();
        //Thread safe code here.
        devDrv = new ExtDeviceDriver();
    }

    public void Dispose() {
        mut.ReleaseMutex();
    }

} 
```

然后调用者只需要这样做：

```
using (var x = new MyObject()) {
    // etc
} 
```

当执行流程存在`using`块时，`Dispose`将被调用，而不管异常或其他任何事情。

# magento-1.6 - 使用测试信用卡测试 Magento 1.6.2.0 Direct Post Authorize.net 付款方式

> ID：12538802
> 
> 赞同：0
> 
> 时间：2012-09-21T22:07:59.463
> 
> 标签：magento-1.6

有没有人尝试使用 Magento 1.6.2.0 使用测试信用卡测试 Authorize.net Direct Post Method？

我尝试使用`4111111111111111`Visa 测试信用卡，将 Authorize.net 帐户从 test`mode:on`和 test切换`mode:off`。这些交易是在 Authorize.net 帐户上捕获的，但 Magento 中的结帐页面没有重定向到成功页面，而是收到一条错误消息

尝试向商家报告此交易时出错。已向商家发送一封电子邮件，通知他们该错误。以下是尝试从您的信用卡收取费用的结果。本次交易已获批准。建议您联系商家以确认您将收到产品或服务。

有人可以详细说明如何使用 Direct Post Authorize.net 付款方式在 Magento 1.6.2.0 中测试信用卡交易吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:06:13.693

Direct Post 方法要求 Authorize.net 打开与您的服务器的通信（本质上，客户将信息直接发送到 Authorize.Net，包括信用卡号、到期日期等......以及 Authorize.Net 用于与您的服务器通信）。因此，您的测试站点需要可公开访问（即防火墙打开，注册域名并指向该站点）。

# symfony - Symfony2 (doctrine2) 原生 sql 插入

> ID：12538807
> 
> 赞同：4
> 
> 时间：2012-09-21T22:08:28.340
> 
> 标签：symfony, doctrine, doctrine-orm, persistence

如何在本机 sql 上的 symfony2 学说 2 中插入数据？

我的查询

```
insert into propriedades (id,name,descripcion,num_lote,cod_imovel,imovel,convenio,proprietar,cpf,area_ha,perimetro,location,centro) VALUES (nextval('propriedades_id_seq'),'?','?','?','?','?','?','?','?','?','?',ST_GeomFromKML('<Polygon><outerBoundaryIs><LinearRing><coordinates>".$terra['coordinates']."</coordinates></LinearRing></outerBoundaryIs></Polygon>'),ST_Centroid(ST_GeomFromKML('<Polygon><outerBoundaryIs><LinearRing><coordinates>".$terra['coordinates']."</coordinates></LinearRing></outerBoundaryIs></Polygon>'))) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T03:02:34.590

你必须使用`$conn->insert('table', $dataArray);`. 查看[文档](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html#insert)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-15T16:44:23.817

在 2020 年，您可以执行以下操作（示例查询，使其适应您的参数）：

```
 $query = "
            INSERT INTO `user_challenges_claimed`
            SET
                `season_id` = :seasonId,
                `user_id` = :userId,
                `interval_type` = :intervalType,
                `is_claimed` = true
            ON DUPLICATE KEY UPDATE 
                `is_claimed` = true
            ;
            ";

        // set query params
        $queryParams = [
          'seasonId'     => $seasonId,
          'userId'       => $userId,
          'intervalType' => $intervalType,
        ];

        // execure query and get result
        $result = $this->manager->getConnection()
          ->executeQuery(
            $query,
            $queryParams
          );

        // clear manager entities
        $this->manager->clear();

        // optional - assert row has been inserted/modified
        if ($result->rowCount() < 1) {
            throw new ChallengeAlreadyClaimedException(
              "[{$seasonId}:{$userId} - {$intervalType}]"
            );
        } 
```

`$this->manager`是一个对象实现`EntityManagerInterface`（即`EntityManager`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:39:48.167

通常你不会在 symfony 2 项目中使用所谓的原生 sql，而是使用高级 Doctrine ORM 层。

然而，有一个学说 dbal 层可以启用例如 mysql 查询而不是 DQL。这是参考

[http://symfony.com/doc/2.0/cookbook/doctrine/dbal.html](http://symfony.com/doc/2.0/cookbook/doctrine/dbal.html)

# python - pytest 2.3 在类中添加拆解

> ID：12538808
> 
> 赞同：1
> 
> 时间：2012-09-21T22:08:33.800
> 
> 标签：python, pytest

我正在研究 pytest (2.3) 的新版本，并且对你的新功能感到非常兴奋

> “可以通过在执行一些需要撤消的操作后立即注册一个或多个拆卸函数来精确控制拆卸，无需单独的“拆卸”装饰器”

从[这里](http://pytest.org/dev/setup.html#setup-functions-or-xunit-on-steroids)

当它作为函数使用时，一切都很清楚，但是如何在类中使用它呢？

```
class Test(object):

    @pytest.setup(scope='class')
    def stp(self):
        self.propty = "something"

    def test_something(self):
    ... # some code
    # need to add something to the teardown

    def test_something_else(self):
    ... # some code
    # need to add even more to the teardown 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T22:43:45.943

好的，我通过一个“会话”范围的 funcarg 让它工作`finalizer`：

```
@pytest.fixture(scope = "session")
def finalizer():
    return Finalizer()

class Finalizer(object):

    def __init__(self):
        self.fin_funcs = []

    def add_fin_func(self, func):
        self.fin_funcs.append(func)

    def remove_fin_func(self, func):
        try:
            self.fin_funcs.remove(func)
        except:
            pass

    def execute(self):
        for func in reversed(self.fin_funcs): 
            func()
        self.fin_funcs = []     

class TestSomething(object):

    @classmethod
    @pytest.fixture(scope = "class", autouse = True)
    def setup(self, request, finalizer):

        self.finalizer = finalizer
        request.addfinalizer(self.finalizer.execute)
        self.finalizer.add_fin_func(lambda: some_teardown())

    def test_with_teardown(self):

        #some test
        self.finalizer.add_fin_func(self.additional_teardown)

    def additional_teardown(self):
        #additional teardown 
```

感谢 @hpk42 回复电子邮件并帮助我获得最终版本。

注意：加上[xfailing 其余的步骤](https://stackoverflow.com/a/12579625/1167879)和[改进的场景](https://stackoverflow.com/a/12526270/1167879)，这现在构成了一个非常好的**测试步骤结构**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T06:42:17.490

事实上，目前还没有很好的拆解例子。[请求对象](http://pytest.org/dev/funcargs.html#request)有一个addfinalizer方法。这是一个示例用法：

```
@pytest.setup(scope=...)
def mysetup(request):
     ...
     request.addfinalizer(finalizerfunction)
     ... 
```

当范围内的所有测试完成执行时，将调用 finalizer 函数。

# jquery - 如何使用jQuery遍历一组元素并设置奇偶类？

> ID：12538810
> 
> 赞同：1
> 
> 时间：2012-09-21T22:08:47.640
> 
> 标签：jquery, html

我有一个这样的元素列表：

```
<div class="odd">1</div>
<div class="even">2</div>
<div class="odd">3</div>
<div class="even">4</div> 
```

现在，当用户擦除元素 3 时，结果是：

```
<div class="odd">1</div>
<div class="even">2</div>
<div class="even">4</div> 
```

现在我希望 jQuery 从第一个元素到最后一个元素并重新定义类：

```
<div class="odd">1</div>
<div class="even">2</div>
<div class="odd">4</div> 
```

我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:11:19.337

您可以使用`:odd`和`:even`选择器：

```
var $divs = $('div');

$divs.filter(':odd').attr('class', 'odd');
$divs.filter(':even').attr('class', 'even'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T22:11:49.990

这应该这样做

```
$("div").removeClass('odd even');
$("div:odd").addClass('odd');
$("div:even").addClass('even'); 
```

通过仅删除 .odd 或 .even 类，您添加的任何其他类（除了 .odd 和 .even）都将“存活”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T22:13:09.507

或这个：

```
$('div:odd').attr('class', 'odd');
$('div:even').attr('class', 'even'); 
```

JsFiddle 示例：

[http://jsfiddle.net/2VpgV/](http://jsfiddle.net/2VpgV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T23:06:29.980

您应该使用*[事件委托](https://learn.jquery.com/events/event-delegation/)*|：

> 事件委托允许我们将单个事件侦听器附加到父元素，该事件侦听器将为匹配选择器的所有后代触发，无论这些后代现在存在还是将来添加。

下面是一个事件委托机制的例子：

```
$(function(){
    $('#container').on('click', '.btn', function(e){
           $(this).parent().nextAll().each(function(i,el){
             var $t = $(this);
               $t.attr('class', $t.is('.odd') ? 'even':'odd');
           }).end().remove();
    });
});
```

```
.odd{background-color:red}
.even{background-color:green}
.btn{text-decoration:underline;font-style:italic;padding:2px;display:inline-block;cursor:pointer;margin:2px}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="container">
  <div class="odd">
    1<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="even">
    2<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="odd">
    3<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="even">
    4<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="odd">
    5<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="even">
    6<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="odd">
    7<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
  <div class="even">
    8<span class="btn" title="remove the line and fix siblings class">remove line</span>
  </div>
</div>
```

# javascript - 关于修改 Node 原型的担忧

> ID：12538812
> 
> 赞同：2
> 
> 时间：2012-09-21T22:08:55.500
> 
> 标签：javascript, jquery, dom, nodelist

所以，为了好玩，我决定看看我是否可以模仿 jQuery 的语法/功能。事实证明这相当容易（当不担心跨浏览器/旧版兼容性时）。你可以在这里看到我到目前为止所做的事情：http: [//jsfiddle.net/FPAaM/3/](http://jsfiddle.net/FPAaM/3/)

现在，为了不踩到其他第三方 javascript 库的脚趾，在向 和 的原型添加功能时应该注意哪些`Node`问题`NodeList`？

```
Node.prototype.text = function(txt){
    var chld = this.childNodes;
    while(chld[0]) this.removeChild(chld[0]);

    this.appendChild(document.createTextNode(txt));

    return this;
};
NodeList.prototype.text = function(txt){
    for (var i = 0; i < this.length; i++)
        this[i].text(txt);

    return this;
};
Node.prototype.css = function(tag, val){
    if (val != undefined)
        this.style[tag] = val;
    else
        return this.style[tag];

    return this;
};
NodeList.prototype.css = function(tag, val){
    for (var i = 0; i < this.length; i++)
        this[i].css(tag, val);

    return this;
};
Node.prototype.clk = function(cbk){
    this.addEventListener("click", cbk, false);

    return this;
};
NodeList.prototype.clk = function(cbk){
    for (var i = 0; i < this.length; i++)
        this[i].clk(cbk);

    return this;
};

var $ = function(args){
    if (typeof args == "function")
        document.addEventListener("DOMContentLoaded", args, false);

    if (typeof args == "string")
        return document.querySelectorAll(args);

    return args;
};

$(function(){
    $("div.fancy").text("Poor man's jQuery!")
        .css("color", "red")
        .clk(function(e){
            if (this.css("color") == "red")
                $(this).css("color", "green");
            else
                this.css("color", "red");
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T04:36:28.457

`Node`并且`NodeList`是***宿主对象***。你不应该扩展它们。更好的方法是使用包装器（如 jQuery）。

检查这个：*[扩展 DOM 有什么问题](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)*

# shell - 用 sed 编辑一行

> ID：12538816
> 
> 赞同：1
> 
> 时间：2012-09-21T22:09:26.763
> 
> 标签：shell, unix

我的输入包含使用 typedef 定义的结构。我稍后使用这些来初始化我的主函数中的变量。

例如：

```
typedef struct {
   int numer;
   int denom;
} Rational;

int main()
{
Rational half, *newf = malloc(sizeof(Rational));

half = (Rational){ 1, 2 };
*newf = (Rational){ 2, 3 };
} 
```

这是我想要做的：我想将两个初始化行转换为函数调用。

例如：

```
half = (Rational){ 1, 2 }; 
```

应该变成：

```
init_Rational( &half,  1, 2  ); 
```

和

```
*newf = (Rational){ 2, 3 }; 
```

应该变成

```
init_Rational( newf,  2, 3  ); 
```

诀窍是要记住 Rational 早先被定义为结构，并用函数调用替换初始化。它不必称为 Rational，它可以是任何名称。

一旦它识别出声明是一个 struct typedef，它应该执行以下操作，如上所示。

转动：

```
something = (someStructName){ data1, data2, data3.. }; 
```

进入

```
init_someStructName( &something, data1, data2, data3.. ); 
```

或为指针...转：

```
*something = (someStructName){ data1, data2, data3.. }; 
```

进入

```
init_someStructName( something, data1, data2, data3.. ); 
```

有人可以帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:31:34.927

这是一个相当棘手的问题，因为需要动态检测结构名称意味着您不能提前编写整个正则表达式。

这是一种可能的解决方案，假设您的文件名为 foo.c：

```
sed -n '/^typedef struct/,/^}/{/^}/{s/.* \(.*\);/\1/p}}' foo.c | xargs -I {} sed -i -e 's/^\(\s*\)\*\(\w*\) = ('{}'){\(.*\)};/\1init_'{}'( \2,\3);/' -e 's/^\(\s*\)\(\w*\) = ('{}'){\(.*\)};/\1init_'{}'( \&\2,\3);/' foo.c 
```

这会在一行中单独`sed`打印出每个结构名称，然后用于为每个结构`xargs`构造一个附加`sed`命令，以在文件上执行替换。

如果您的版本`sed`不支持`\s`or`\w`快捷方式，您可以使用`[ \t]`代替`\s`和`[_a-zA-Z0-9]`代替`\w`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:37:59.157

几乎看不懂！

```
sed -e 's/\(\**[a-zA-Z_][a-zA-Z_0-9]*\) *= *( *\([a-zA-Z_][a-zA-Z_0-9]*\) *) *{\([^}]*\)} *;/init_\2(\&\1,\3);/' 
```

注意：它是单行 注意2：我假设可能只有空格作为可能的分隔符（没有TAB） 注意3：形式“ `*x`”保持不变，因为它已转换为`&*x`，它是正确的。我假设“*”和标识符之间没有空格；

# actionscript-3 - 3D粒子球

> ID：12538819
> 
> 赞同：1
> 
> 时间：2012-09-21T22:09:57.957
> 
> 标签：actionscript-3, actionscript-2

如果我想用粒子做一个圆圈，我会为这样的粒子定义随机坐标：

```
for(var i:int = 0; i != 100; i++)
{
var angle:Number    = Math.random() * 360;
var r:Number        = 600;
var nX:Number       = r * Math.cos(angle / 180 * Math.PI);
var nY:Number       = r * Math.sin(angle / 180 * Math.PI);
} 
```

但我想在 3d 空间上用粒子制作一个球，但我不知道如何定义粒子的随机坐标。半径再次固定，但应该有一个“nZ”值。你能帮我定义这些坐标吗？

```
for(var i:int = 0; i != 100; i++)
{
var angle:Number    = Math.random() * 360;
var r:Number        = 600;
var nX:Number       = ???
var nY:Number       = ???
var nZ:Number       = ???
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:18:53.783

球坐标是你想要的。

你需要两个角度：

```
for(var i:int = 0; i != 100; i++)
{
    var azimuthAngle:Number    = Math.random() * 360;
    var elevationAngle:Number  = (Math.random() * 180) - 90;
    var r:Number = 600;
    var nX:Number =
         r * Math.cos(azimuthAngle / 180 * Math.PI) * Math.sin(elevationAngle / 180 * Math.PI);
    var nY:Number =
         r * Math.sin(azimuthAngle / 180 * Math.PI) * Math.sin(elevationAngle / 180 * Math.PI);
    var nZ:Number =
         r * Math.cos(elevationAngle / 180 * Math.PI);
} 
```

# javascript - 如何在 JavaScript 中将商作为整数和余数作为浮点数

> ID：12538820
> 
> 赞同：25
> 
> 时间：2012-09-21T22:09:57.637
> 
> 标签：javascript, math

在我的计算器上，当我做 18/7 时，我得到 2.5714285714285714285714285714286。从我超级有限的数学技能 2 是商和 .5714285714285714285714285714286 是余数。

如何在 JavaScript 中对此建模？

谢谢！

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-23T03:05:37.703

```
var floatingPointPart = (18/7) % 1;
var integerPart = Math.floor(18/7); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-08-19T10:25:13.250

Math.floor 存在在负数的情况下将结果四舍五入到错误方向的问题，最好使用按位运算来获得整数商。

```
var quot = ~~(num/num1) 
```

希望这对你有用！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-21T22:46:26.880

```
var rawQuotient = 18/7;
var remainder = rawQuotient % 1;
var quotient = rawQuotient - remainder; 
```

在大多数数学中，没有真正需要区分小数部分和整数部分，特别是考虑到整个事物可以表示为分数（18/7）、实数或整数和分数的混合（2 和 4/7）。

当您进入编程或工程或其他一些衍生领域时，您对分离有明确的用途；但是商实际上是整个事物，整数和分数，但是您选择表示它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-28T07:16:13.360

我们可以使用简单的数学来仅使用`/`&`%`运算符得到答案。

将“num1”视为第一个值，将“num2”视为第二个值。然后 ：

```
var Quotient = (num1 - (num1 % num2)) / num2;

var FloatingPoint = (num1 % num2) / num2; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-27T23:15:12.487

2 是商（或结果的整数部分），4 是余数，4/7 是 OP 请求的结果的浮点部分。

```
var result = (18/7);
var integerPart = Math.floor(result);
var floatingPointPart = result - integerPart; 
```

integerPart 和 floatingPointPart 是请求的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T22:12:01.587

```
var decimals = float - (float | 0); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-22T01:38:23.593

实际上，2 是商，4/18 是余数。

```
Math.divideby= function(d, dby){
    var q= Math.floor(d/dby), r= d-(q*dby);
    return r== 0? q:q+' and '+r+'/'+d;
} 
```

**Math.divideby(18,7)**

/* 返回值：（字符串）*/

**2 和 4/18**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-19T19:48:28.420

在十进制数`2.5714285714285716`中，*商*，也是*整数部分*，是`2` ，*小数*/*小数*部分是`0.5714285714285716`或`0.5714285714285716` 但实际上，*余数*是 4.000000000000002 或 4

```
let decimal = 18 / 7;
let quotient = ~~decimal;
let dec_remainder = decimal - quotient;
let dec_remainder0 = decimal % 1;
let remainder = dec_remainder * 7;
let remainder0 = 18 % 7;

document.body.innerHTML = "In the decimal number "+decimal+",<br/>
the quotient, which also is the whole part, is "+quotient+"<br/>
and the decimal/fractional part is "+dec_remainder+ " or " + dec_remainder0 + "<br/>
but actually, the remainder is "+remainder+" or "+remainder0 ;
```

```
<!DOCTYPE html>
<html>
<body>
</body>
</html>
```

[您可以通过多种](https://blog.blakesimpson.co.uk/page.php?id=58&title=fastest-alternative-to-math-floor-in-javascript)方式确定商。

# c# - 为什么 EF 4 不更新列表？

> ID：12538821
> 
> 赞同：0
> 
> 时间：2012-09-21T22:09:59.377
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4

我遇到了一个问题，即选择、编辑列表对象，然后将其重定向回列表，但该对象未显示它已在列表中更新。如果选择了已编辑对象的详细信息视图，则已保存对对象的编辑。我需要该列表来更新所做的更改。

这是为“索引”视图生成列表的方法：

```
public static List<MortgageCancellation> DealerSorting(string id,string dealerId)
    {
        var d = from u in db.MortgageCancellations
                where u.DealerID == dealerId
                select u;
        switch (id)
        {
            case "DealID":
                return d.OrderBy(u => u.DealID).ToList();
            case "PrimaryFirstName":
                return d.OrderBy(u => u.PrimaryFirstName).ToList();
            case "PrimaryLastName":
                return d.OrderBy(u => u.PrimaryLastName).ToList();
            case "DateOfApplication":
                return d.OrderBy(u => u.DateOfApplication).ToList();
            case "ProfileStatus":
                return d.OrderBy(u => u.ProfileStatus).ToList();
            case "CurrentStep":
                return d.OrderByDescending(u => u.CurrentStep).ToList();
            case "LastUpdated":
                return d.OrderByDescending(u => u.LastUpdated).ToList();
            default:
                return d.ToList();
        }
    } 
```

这是进行编辑的地方，您可以看到它保存了更改：

```
public ActionResult Edit(MortgageCancellation mortgagecancellation)
    {
        try
        {
            if (ModelState.IsValid)
            {
                mortgagecancellation.DateOfApplication = (DateTime?)Session["appDate"];
                Session.Remove("appDate");
                mortgagecancellation.LastUpdated = DateTime.Now;
                db.Entry(mortgagecancellation).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(mortgagecancellation);
        }
        catch (Exception ex)
        {
            SupportEmail se = new SupportEmail(error, ex);
            SupportEmail.SendSupportEmail(se);
            return View("Error");
        }
    } 
```

我不确定为什么“索引”视图没有显示所做的更改，因为这是从“索引”视图调用的唯一方法：

```
return View(MortgageCancellation.OfficeSorting(id)); 
```

还有一件事，列表*最终会*显示更改，但我需要列表*立即*显示更改。

这是数据库初始化的地方：

```
private static MyDBContext db = new MyDBContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:41:25.877

尝试更换

```
private static MyDBContext db = new MyDBContext(); 
```

与

```
using(var db = new MyDBContext())
{
    ...code..
} 
```

对于每个动作。

# sql - 根据内容选择时编辑列

> ID：12538822
> 
> 赞同：0
> 
> 时间：2012-09-21T22:10:24.453
> 
> 标签：sql, intersystems-cache

我需要找到一种方法来搜索这些行中的所有列：

```
select CASE 
            When substr(column,1,7) = 'Report:' then substr(column,8)
            when substr(column,1,5) = 'Print' then substr(column, 6)
        else column
        end
  from table 
```

任何有关语法的帮助，不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:45:28.477

> 根据内容选择时编辑列

你在找这个吗？

```
UPDATE table
SET 
    column = 
        CASE 
            WHEN substr(column,1,7) = 'Report:' THEN substr(column,8)
            WHEN substr(column,1,5) = 'Print' THEN substr(column, 6)
            ELSE column
        END
WHERE <conditions> 
```

# android - Android - 保持广播接收器工作的最佳方式

> ID：12538823
> 
> 赞同：0
> 
> 时间：2012-09-21T22:10:31.067
> 
> 标签：android, broadcastreceiver, manifest, broadcast

即使活动已关闭，我也希望我的应用程序能够正常工作并监听传入的 Intent。最好的方法是什么？

我在清单上注册了一个接收器：

```
 <receiver
        android:name="com.farawayapp.background.Receiver"
        android:exported="false" >
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
            <action android:name="android.intent.action.PACKAGE_ADDED" />
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            <action android:name="android.intent.action.PACKAGE_CHANGED" />
            <action android:name="android.intent.action.PACKAGE_REMOVED" />

            <data android:scheme="package" />
        </intent-filter>
    </receiver> 
```

`BroadcastReceiver`课程是：

```
public class Receiver extends BroadcastReceiver implements Variables {

    CheckConexion cc;

    @Override
    public void onReceive(Context contxt, Intent intent) {

        // Cuando hay un evento, lo diferenciamos y hacemos una acción.

        if (intent.getAction().equals(SMS_RECEIVED)) {
            Sms sms = new Sms(null, contxt);
            sms.uploadNewSms(intent);
        } else if (intent.getAction().equals(Intent.ACTION_BATTERY_CHANGED)) {
            /*
             * try { new PhoneState(contxt).battery(intent.getIntExtra("level",
             * 0)); } catch (JSONException e) { e.printStackTrace(); }
             */// Nothing at the moment
        } else if (intent.getAction().equals(Intent.ACTION_PACKAGE_ADDED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_CHANGED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_REMOVED)) {
            Database db = new Database(contxt);
            if (db.open().Preferences(4)) {
                Uri data = intent.getData();
                new ListApps(contxt).import_app(intent, contxt, data,
                        intent.getAction());
            }
            db.close();
        } else if (intent.getAction().equals(
                ConnectivityManager.CONNECTIVITY_ACTION)) {
            cc = new CheckConexion(contxt);

            if (cc.isOnline()) {

                Database db = new Database(contxt);
                db.open();
                if (db.move() == 1) {
                    new UploadOffline(contxt);
                }
                db.close();

            }
        }
    }
} 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T00:59:45.650

如果您注册 a`BroadcastReceiver`来接收广播，那么即使用户当时没有使用您的应用程序（您的应用程序的所有活动都不在前台），它也会被调用。虽然，您可能需要考虑一些陷阱：

1.  当设备处于睡眠状态时，大多数意图都不会被广播。只有几个事件会唤醒您的设备（例如收到的短信、来电、来自 Google Cloud Messaging 服务器的推送通知等）。因此，如果希望您的应用程序在设备处于睡眠状态时做一些工作，您应该考虑`AlarmManager`设置将定期调用您的应用程序的警报。

2.  如果你想在后台做一些工作，你可能想用它`WakeLock`来防止设备休眠（和 CPU 关闭）。这是来自 CommonWare 的一个很好的示例，它展示了如何使用`WakeLock`并为您提供了一个很好的库来简化您的生活：[https](https://github.com/commonsguy/cwac-wakeful) ://github.com/commonsguy/cwac-wakeful 。虽然，你应该小心，`WakeLock`因为它会耗尽电池。

# c# - Windows Phone 7 是否支持 KeepAlive 连接？

> ID：12538826
> 
> 赞同：2
> 
> 时间：2012-09-21T22:10:47.307
> 
> 标签：c#, windows-phone-7, streaming, keep-alive

我试图使用 Hammock 库在电话上使用开放（流）连接。问题是 Windows Phone 似乎不接受 KeepAlive 连接（`WebRequest.KeepAlive`不可用），我想知道是否有任何方法可以使用它们。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T00:23:08.060

这是可能的 ：

```
 HttpWebRequest request = HttpWebRequest.CreateHttp(new Uri(@"http://www.mysite.com", UriKind.Absolute)) as HttpWebRequest;
        request.Headers["Connection"] = "Keep-Alive"; 
```

# cocoa - 可可开两次窗

> ID：12538829
> 
> 赞同：0
> 
> 时间：2012-09-21T22:11:08.957
> 
> 标签：cocoa, window

如果我用左上角的红色 x 关闭我的应用程序，我将无法重新打开它。为什么以及如何改变这一点。

我想在一次又一次关闭后打开窗户。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T05:25:30.033

如果您的窗口的行为被选中“**关闭时释放**”，您需要取消选中它。转到**Attributes Inspector**，这里：

![截屏](../Images/de3d5aa8f82e535d7e83fc45d34823c7.png)

你没有写你是如何重新打开窗口的。因此，如果您想在停靠图标单击上重新打开窗口，您可以这样做：

```
- (BOOL)applicationShouldHandleReopen:(NSApplication *)theApplication hasVisibleWindows:(BOOL)flag
{
    if (flag) {
        return NO;
    } else {
        [windowOutlet orderFront:self];
        return YES;
    }   
} 
```

# xcode - Xcode 卡在“编译 2 个源文件中的 2 个”

> ID：12538830
> 
> 赞同：4
> 
> 时间：2012-09-21T22:11:18.760
> 
> 标签：xcode, compiler-construction, build, archive, freeze

当我尝试构建存档时，Xcode 卡在“编译 2 个源文件中的 2 个”！有时它会卡在“编译 22 个源文件中的 22 个”上。发生这种情况时，整个计算机会变慢并死机！

# html - 如何将标签放在另一个（更大的）标签上？

> ID：12538841
> 
> 赞同：0
> 
> 时间：2012-09-21T22:12:22.240
> 
> 标签：html, image, anchor, hyperlink

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:09:31.580

这很常见，而且绝对可以用纯 HTML 和 CSS 来完成。你也可以用 JavaScript 来做，但我宁愿尽可能避免这样做。

这个例子是完全有效的 HTML/CSS 并且应该没有奇怪的浏览器渲染问题（甚至可以追溯到 IE 6）。

[http://jsfiddle.net/2JD76/1/](http://jsfiddle.net/2JD76/1/)

基本上你有一个包含元素，在这种情况下是一个 div，它有你链接的缩略图和链接的关键字。默认情况下它们是隐藏的，并且仅在包含的 div 悬停时显示。

链接的缩略图是绝对定位的，以便从页面流中取出，然后允许链接的关键字出现在顶部。然后，我使用 z-indexes 确保关键字始终位于高于链接缩略图的图层上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:14:49.517

你不能。这是非法的html。附加一个改变当前位置而不是“更大”的点击处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T22:25:44.577

# cocoa - iTunes 歌曲队列

> ID：12538855
> 
> 赞同：1
> 
> 时间：2012-09-21T22:14:34.133
> 
> 标签：cocoa, queue, itunes, scripting-bridge

我的应用程序通过脚本桥控制 iTunes。其他应用程序可以选择一系列歌曲并按顺序播放它们，而无需创建播放列表。我在网上搜索了示例并将 iTunes.h 文件红色了十几次，但我没有找到解决方案。也许你们中的某个人可以帮助我吗？

在此处查看 iTunes 头文件： [iTunes.h](http://svn.mehtasw.com/sharedsvn/LyricsHistogram/iTunes.h)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:38:45.983

使用 iTunes 10 根本不可能不创建播放列表。您正在谈论的功能（这是其他伟大的音乐播放器所熟知的）将在[iTunes 11](http://www.apple.com/itunes/new-itunes/)中推出，该功能将于 10 月推出。它被称为下一个。我想只需等待几周，然后详细信息将显示如何以编程方式进行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-08T18:48:56.383

您可以在自己的应用程序中跟踪歌曲，当您开始播放第一首歌曲时，设置一个计时器以在您开始播放的曲目的完成时间触发。当计时器触发时，开始播放下一首歌曲并重复计时器。如果没有要播放的歌曲，则向 iTunes 发出停止命令。

```
@property (retain, nonatomic) NSMutableArray *songsToPlay;

- (void)playNext:(NSTimer *)aTimer {

    if (songsToPlay.count) {
        iTunesTrack *track = songsToPlay.firstObject;
        [track playOnce:YES];
        [NSTimer scheduledTimerWithTimeInterval:track.finish - 1.0 target:self selector:@selector(playNext:) userInfo:nil repeats:NO];
        [songsToPlay removeObjectAtIndex:0];
    }
    else {
        [iTunes stop];
    }
} 
```

您在某个地方`songToPlay`使用 iTunesTrack 歌曲进行充值，然后调用`[self playNext:nil]`.

# android - viewPager.setOffscreenPageLimit(3);的实际作用是什么？

> ID：12538861
> 
> 赞同：13
> 
> 时间：2012-09-21T22:15:08.087
> 
> 标签：android

我有三个页面，并将页面限制设置为 3。

```
 mViewPager.setOffscreenPageLimit(3); 
```

这样做的实际效果是什么？它会大大提高性能还是会导致内存消耗问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-21T22:23:28.537

文档： http: [//developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit(int)](http://developer.android.com/reference/android/support/v4/view/ViewPager.html#setOffscreenPageLimit%28int%29)

> 设置应保留到处于空闲状态的视图层次结构中当前页面的任一侧的页面数。超出此限制的页面将在需要时从适配器重新创建。
> 
> 这是作为优化提供的。如果您事先知道需要支持的页面数量或在页面上设置了延迟加载机制，则调整此设置可以提高分页动画和交互的感知流畅度。如果您有少量页面 (3-4) 可以同时保持活动状态，那么在用户页面来回切换时，新创建的视图子树的布局将花费更少的时间。
> 
> 您应该将此限制保持在较低水平，尤其是在您的页面具有复杂布局的情况下。此设置默认为 1。

如果您只使用三页，那么您仍然在文档描述的情况下，它应该让您的 UI 更流畅。当然它会消耗内存，但只要你保持在这样的范围内，它应该不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T18:08:56.303

我发现通过动态改变数字，不仅可以通过将数字调大来优化分页动画和交互，还可以通过减小数字来优化页面内动画和交互的流畅度。（前提是你知道你想要的页面长度）

（只是想分享这个，因为它是相关的。很确定 OP 不再寻找答案了。:)）

# javascript - 无法获取数组

> ID：12538865
> 
> 赞同：0
> 
> 时间：2012-09-21T22:15:41.443
> 
> 标签：javascript, arrays, append

我有点不知道为什么这不起作用。

附件正在工作。我在 html 中有所有的锚点，但出于某种原因，我可以使用 jquery 来获取该数组。我开始怀疑是不是因为我用 jquery 添加了它们。

这一直在提醒一些人，但实际上它不应该提醒任何东西

```
 //$('#swiffy-braces-diagram').html("<img src='/assets/uploads/images/brace-painter.png'/>");
             $('#swiffy-braces-diagram').css('background-image', "url('/assets/uploads/images/brace-painter.png')")
                 .append("<a href='' id='elastic-tie'>")
                 .append("<a href='' id='loop-in-archwire'>")
                 .append("<a href='' id='archwire'>")
                 .append("<a href='' id='bracket'>")
                 .append("<a href='' id='headgear-tube'>")
                 .append("<a href='' id='coil-spring'>")
                 .append("<a href='' id='tie-wire'>")
                 .append("<a href='' id='band'>")
                 .append("<a href='' id='hook'>")
                 .append("<a href='' id='elastic'>")
                 .append("<div id='description'>");
             });

            if( $('#swiffy-braces-diagram a').length == 0){alert('some');}

            $('#swiffy-braces-diagram a').each( function(i){
                $(this).mouseover( function(){
                    $('#swiffy-braces-diagram #description').html( description[i] );
                });
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:03:03.597

您的代码当前包含语法错误。当您说 append() 有效时，我猜您在事件回调中运行该代码，例如准备就绪。

如果我是对的，请使用：

```
jQuery(
  function($)
  {
    $('#swiffy-braces-diagram').css('background-image', "url('/assets/uploads/images/brace-painter.png')")
                 .append("<a href='' id='elastic-tie'>")
                 .append("<a href='' id='loop-in-archwire'>")
                 .append("<a href='' id='archwire'>")
                 .append("<a href='' id='bracket'>")
                 .append("<a href='' id='headgear-tube'>")
                 .append("<a href='' id='coil-spring'>")
                 .append("<a href='' id='tie-wire'>")
                 .append("<a href='' id='band'>")
                 .append("<a href='' id='hook'>")
                 .append("<a href='' id='elastic'>")
                 .append("<div id='description'>");

                  // }); <--this has been removed

            if( $('#swiffy-braces-diagram a').length == 0){alert('some');}

            $('#swiffy-braces-diagram a').each( function(i){
                $(this).mouseover( function(){
                    $('#swiffy-braces-diagram #description').html( description[i] );
                });
            });
        });//<--the removed brackets now are here 
```

请注意，我确实删除 `});`了 append() 之后的。

没有它，您将把准备好的功能保留在那里，脚本的其余部分将在您 append() 所有这些元素**之前执行。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:58:00.903

`"<a href='' id='elastic-tie'>"`不是一段有效的 HTML。您需要结束`</a>`标记，并且可能还需要链接中的一些内容。

另外，链接中没有任何内容，它们不会占用页面上的任何空间，因此您永远不会在它们上获得鼠标悬停事件。

# javascript - 函数的参数在实例化为对象时如何获取值？

> ID：12538875
> 
> 赞同：2
> 
> 时间：2012-09-21T22:17:01.377
> 
> 标签：javascript, oop, function, arguments

所以，这是我的功能：

```
function thisismyfunction(myvariable) {
  // I do stuff here
} 
```

然后，如果我想运行它，我会假设类似于以下内容：

```
thisismyfunction('foo'); 
```

然后给出论据。但是，如果它是这样的：

```
var myobject = new thisismyfunction; 
```

那么如何通过给出的论点呢？

**更新：**似乎可以像这样实例化它：

```
var myobject = new thisismyfunction('foo'); 
```

但是还有另一种方法可以传递价值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:21:24.130

如果您使用`new`，那么只要您不传递参数，括号就是可选的。

如果您想要参数（不是`undefined`），那么它们是必需的。

```
var myobject = new thisismyconstructor('foo'); 
```

* * *

重新跟进问题：

> 似乎可以像这样实例化它：

当然。我就是这么说的。

> 但是还有另一种方法可以传递价值吗？

没有任何其他方法的必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:24:51.977

您实际上是在给出论点，而它恰好是“未定义的”。

# sql - tsql - 如何旋转下表？

> ID：12538880
> 
> 赞同：1
> 
> 时间：2012-09-21T22:17:24.383
> 
> 标签：sql, sql-server, tsql, pivot

如何按第 1 周、第 2 周、第 3 周等旋转下表。每个月？谢谢。

例如数据库表：

![在此处输入图像描述](../Images/b03dbce113920eedba7f7ca14ef61177.png)

这是我需要的表：

![在此处输入图像描述](../Images/3c948256d984f7c69403be4b2b289eca.png)

这就是我所做的，但我需要更有效的方法来做到这一点。

```
SELECT    'Oct' AS [Month]
,[Ocd]
          ,(select Wk_Cmpl from tb1 where WkNum = '1' and RIGHT(wkdt,2) = '10' and Ocd = '167') as wk1
          ,(select WKLY_PCT from tb1 where WkNum = '1' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as [wk1%]
          ,(select WE from tb1 where WKNum = '2' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as wk2
          ,(select WKLY_PCT from tb1 where WkNum = '2' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as [wk2%]
          ,(select WE from tb1 where WkNum = '3' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as wk3
          ,(select WKLY_PCT from tb1 where WkNum = '3' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as [wk3%]
          ,(select WE from tb1 where WkNum = '4' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as wk4
          ,(select WKLY_PCT from tb1 where WkNum = '4' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as [wk4%]
          ,(select WE from tb1 where WkNum = '5' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as wk5
          ,(select WKLY_PCT from tb1 where WkNum = '5' and SUM_LVL_Sort=3.00 and RIGHT(wkdt,2) = '10' and Ocd = '167') as [wk5%]
          ,[WKLY_AVG]                           As [Wk Avg] 
          ,[MTH]                                AS [Mo. Cmpl] 
          ,[COMB_FYTD_COMPLT_ALL]               As [M/YTD Total]
          ,[COMB_FYTD_COMPLT_TARGET_PCT]        As [% Goal]
FROM tb1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:18:08.933

为此，您将需要使用`UNPIVOT`和`PIVOT`。您不清楚如何确定`WklyAvg`or`%Goal`但这应该可以帮助您开始：

```
select p1.mo,
    p1.[wkCmpl_1], p1.[wkCmplPct_1], p1.[wkCmpl_2], p1.[wkCmplPct_2],
    p1.[wkCmpl_3], p1.[wkCmplPct_3], p1.[wkCmpl_4], p1.[wkCmplPct_4],
    p1.[wkCmpl_5], p1.[wkCmplPct_5],
    t1.WkAvg,
    t1.MoCmpl,
    t2.M_YTD_Total,
    t1.PctGoal
from 
(
  select mo,
    [wkCmpl_1], [wkCmplPct_1], [wkCmpl_2], [wkCmplPct_2],
    [wkCmpl_3], [wkCmplPct_3], [wkCmpl_4], [wkCmplPct_4],
    [wkCmpl_5], [wkCmplPct_5]
  from 
  (
    select datepart(month, wk_endt) mo,
        value,
        col + '_' + cast(wkNum as varchar(10)) col
    from 
    (
      select wk_endt,
        wkNum,
        cast(wkCmpl as decimal(10, 2)) wkCmpl,
        wkCmplPct
      from yourtable
    ) x
    unpivot
    (
      value
      for col in (wkCmpl, wkCmplPct)
    ) u
  ) x1
  pivot
  (
    max(value)
    for col in ([wkCmpl_1], [wkCmplPct_1], [wkCmpl_2], [wkCmplPct_2],
               [wkCmpl_3], [wkCmplPct_3], [wkCmpl_4], [wkCmplPct_4],
               [wkCmpl_5], [wkCmplPct_5])
  ) p
) p1
inner join
(
  select month(wk_endt) mo,
    wkcmpl,
    avg(WkAvg) as WkAvg,
    MoCmpl,
    max(M_YTD_Total) M_YTD_Total,
    PctGoal
  from yourtable
  group by month(wk_endt), wkcmpl, MoCmpl, PctGoal
) t1
  on p1.mo = t1.mo
  and p1.wkCmpl_1 = t1.wkcmpl
inner join
(
    select month(wk_endt) mo, max(M_YTD_Total) M_YTD_Total, MAX(wknum) wknum
    from yourtable
    group by month(wk_endt)
) t2
    on t1.mo = t2.mo 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/9ba8c/1)

# php - 如何使用 PHP 在 mysql 中插入不规则的日历事件

> ID：12538887
> 
> 赞同：0
> 
> 时间：2012-09-21T22:18:33.687
> 
> 标签：php, mysql, calendar

我正在尝试输入在相同时间间隔内发生的事件（每周、双月、每季度、每年）。我展示的脚本是每月的脚本..（如果我能做到这一点，我可以对其他间隔进行调整）。

事件与它们发生的正确周数一起输入。但会出现以下问题：

--- 如何确保少于 31 天的月份没有为其输入事件？----- 如果事件发生在每个第一个和第三个星期五（或任何一个），或每月的最后一个星期四。我如何调整下面的脚本来做到这一点。

谢谢你。

**当我插入时，我从 mysql 得到的一个示例......**

```
+----+------+------+------------------+-----------+------------+----------+
| day| month| year | eventname        | eventtime | eventplace | eventweek|
+----+------+------+------------------+-----------+------------+-----------
|  1 |    2 | 2011 | Social Gathering | 12PM      | Room       |   05     |
|  8 |    2 | 2011 | Social Gathering | 12PM      | Room       |   06     |
|  15|    2 | 2011 | Social Gathering | 12PM      | Room       |   07     |
|  22|    2 | 2011 | Social Gathering | 12PM      | Room       |   08     |
|  29|    2 | 2011 | Social Gathering | 12PM      | Room       |   09     |
+----+------+------+------------------+-----------+------------+----------+ 
```

**PHP 代码**

```
<?php 
    if(isset($_POST['myform'])){

             $day   =   array('1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31');
             $month =   array('1','2','3','4','5','6','7','8','9','10','11','12');              
             $year  =   array('2011', '2012','2013', '2014', '2015', '2016');   

   $startday   =  mysql_real_escape_string($_POST['day']);
   $eventplace =  mysql_real_escape_string($_POST['eventplace']);
   $eventname  =  mysql_real_escape_string($_POST['eventname']);
   $eventtime  =  mysql_real_escape_string($_POST['eventtime']);

            for($i=0; $i<count($year); $i++){
                for($j=0; $j<count($month); $j++){
                    for($k=$startday; $k<count($day); $k = $k + 7){
                        $date = mktime(0,0,0,$month[$j],$k,$year[$i]); 
                            $week = date('W', $date) ;
      $query = mysql_query(" INSERT INTO caldemo(day, month, year, eventname, eventtime, eventplace, eventweek)
                             VALUES ('".intval($k)."', '".intval($month[$j])."', '".intval($year[$i])."', '".$eventname."', '".$eventtime."', '".$eventplace."', '".intval($week)."' )")or die(mysql_error()) ;
                  }
                }
             } 
          }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:47:00.697

简单的php解决方案：

```
function setDatePeriod($months=1, $date='')
{
    if(!$date) $date = date('Y-m-d');
    $d = new DateTime( $date );
    $d->modify( "+{$months} months" );
    return $d->format('Y-m-d');
}
echo setDatePeriod(3); 
```

# mysql - Mysql 一对多连接返回所有记录

> ID：12538896
> 
> 赞同：0
> 
> 时间：2012-09-21T22:19:00.150
> 
> 标签：mysql

为此想出正确的标题有点挑战性。

所以我有一个用户资料表、一个音乐流派表和一个用于一对多关联的genre_profiles 表。下面我有一个 group_concat 返回配置文件的所有genreName，但是有一个问题。即使我正在过滤特定类型（如genreID 15），我也想返回配置文件的所有类型。

```
SELECT *, group_concat(cast(g.genreName as char) SEPARATOR ', ') as genreName 
FROM profiles p 
LEFT OUTER JOIN genre_profiles gpro ON gpro.profileID = p.profileID 
LEFT OUTER JOIN genres g ON g.genreID = gpro.genreID
WHERE gpro.genreID = '15' 
GROUP BY p.profileID 
```

如何过滤我的genreID查询，使与个人资料相关联的genreNames完好无损？我应该对 profileID 为 15 的所有配置文件进行子查询，然后从中获取所有流派数据吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:37:17.930

我认为您会希望将 the`AND gpro.genreID = '15'`从 the`JOIN`移到 the `WHERE`（尽管我不能 100% 确定我没看错）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:44:06.607

所以我认为这解决了我的问题。

```
SELECT * , GROUP_CONCAT( CAST( g.genreName AS CHAR ) SEPARATOR  ', ' ) AS genreName
FROM profiles p
LEFT OUTER JOIN genre_profiles gpro ON gpro.profileID = p.profileID
LEFT OUTER JOIN genres g ON g.genreID = gpro.genreID
WHERE gpro.isInfluence =  '0'
AND p.profileID IN 
(SELECT gp.profileID
FROM genre_profiles gp
WHERE genreID = 10)
GROUP BY p.profileID 
```

它适用于我所有的测试用例。

# c# - MSBuild 任务不会导致生成的 c# 文件编译

> ID：12538897
> 
> 赞同：4
> 
> 时间：2012-09-21T22:19:22.633
> 
> 标签：c#, visual-studio-2010, msbuild

我一直在尝试编写一个 MSBuild 任务来将 CoCo/R .ATG 文件“编译”成 C# 文件，然后将其编译成可执行文件，这是为了替换预构建事件。
我已经设法让 .ATG -> .cs 进程正常工作，但是由于生成的 .cs 文件没有被编译，所以有些不对劲。
如果我再次修改 .ATG 文件，“旧”.cs 文件似乎会被编译，然后生成新文件。
我很确定我遗漏了一些东西，这些东西会通知构建过程的其余部分这些文件已更改。

这是我在 Visual Studio 2010 项目中包含的目标定义。

```
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <ItemGroup>
    <AvailableItemName Include="BuildATG" />
  </ItemGroup>

  <PropertyGroup>
    <CoreBuildDependsOn>
      BuildATGTarget;
      $(CoreBuildDependsOn)
    </CoreBuildDependsOn>
  </PropertyGroup>

  <Target Name="BuildATGTarget" Inputs="@(BuildATG)" Outputs="@(BuildATG -> '%(RelativeDir)Parser.cs')">
    <Exec Command="Coco.exe %(BuildATG.Identity)" Outputs="%(BuildATG.RelativeDir)Parser.cs" />
  </Target>

</Project> 
```

我对 MSBuild 完全陌生，所以任何建议/指针都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:39:21.517

我发现的一种可能的解决方案是进行以下更改并在目标内添加一个 ItemGroup。

```
<Target Name="BuildATGTarget" Inputs="@(BuildATG)" Outputs="@(BuildATG -> '%(RelativeDir)Parser.cs')">
  <Exec Command="Coco.exe %(BuildATG.Identity)" Outputs="%(BuildATG.RelativeDir)Parser.cs" />
  <ItemGroup>
    <Compile Include="%(BuildATG.RelativeDir)Parser.cs" />
    <Compile Include="%(BuildATG.RelativeDir)Scanner.cs" />
  </ItemGroup>
</Target> 
```

为避免构建中出现重复文件，您还需要在 Visual Studio 2010 项目中使用**Build Action: None标记文件（Parser.cs 和 Scanner.cs）**

# mongodb - Mongo中基于不同类型索引的项目的物理顺序-？

> ID：12538898
> 
> 赞同：2
> 
> 时间：2012-09-21T22:20:09.077
> 
> 标签：mongodb

我读过几篇关于在 MongoDb 中建立索引的文章，但对记录的物理布局一无所知。我习惯于谈论关系数据库中的聚集索引（基于物理的相当快的索引）和非聚集索引。Mongo 没有这样的术语，尽管他们的文档提到了二级索引。默认情况下，它似乎通过 _id 主键创建索引，这可能对应于存储中项目的物理顺序。请解释一下：如果我为每个表创建一个索引，它会根据索引自动按物理顺序存储项目吗？如果不是，我可以以某种方式设置它吗？_id呢，默认对应物理顺序吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T00:02:40.737

MongoDB 索引是 B 树索引。索引块分配在用于存储文档的相同数据文件中。目前（从 MongoDB 版本 2.2 开始）不支持标准 B 树索引之外的任何其他索引类型。

参考：[http ://docs.mongodb.org/manual/core/indexes/](http://docs.mongodb.org/manual/core/indexes/)

MongoDB 不会尝试对磁盘上的文档进行排序，也不会以任何特定的顺序放置 B-Tree 索引块。MongoDB 使用内存映射文件来访问磁盘上的数据结构。因此，哪些索引块在 RAM 中以及哪些索引块被调出的问题被委托给 OS 内存管理系统。

参考：[http ://docs.mongodb.org/manual/faq/storage/](http://docs.mongodb.org/manual/faq/storage/)

MongoDB 文档在磁盘上总是连续的。任何文档都只会位于一个物理位置：从不需要从多个磁盘位置组合文档。

MongoDB 最初按照文档的创建顺序在磁盘上分配文档。如果一个文档的大小超过了分配的大小（通过对该文档的更新添加新的字段、子文档或数组元素），那么该文档将被移动到磁盘上的一个新位置，该位置足以容纳新文档。

删除文档将在分配的空间中创建“空洞”：这些空洞被放置在空闲列表中，新文档被插入到这些空洞中。因此，如果您对 MongoDB 集合执行重复的 remove() 和 insert() 操作，文档将以高度无序的方式分散在磁盘上。

特别是，文档**不会**按 _id 顺序或任何其他索引的顺序排列在磁盘上。

有关 MongoDB 存储管理的更多信息，请查看以下演示文稿：

*   [http://www.10gen.com/presentations/MongoNYC-2012/storage-engine-internals](http://www.10gen.com/presentations/MongoNYC-2012/storage-engine-internals)
*   [http://www.10gen.com/presentations/mongosf-2012/journaling-and-the-storage-engine](http://www.10gen.com/presentations/mongosf-2012/journaling-and-the-storage-engine)
*   [http://www.10gen.com/presentations/mongosf-2012/indexing-and-query-optimization](http://www.10gen.com/presentations/mongosf-2012/indexing-and-query-optimization)

# ruby-on-rails - 无法批量分配受保护的属性：stripe_card_token

> ID：12538907
> 
> 赞同：0
> 
> 时间：2012-09-21T22:21:06.367
> 
> 标签：ruby-on-rails, shopping-cart, mass-assignment, attr-accessor, stripe-payments

我正在尝试使用条纹创建收费。尝试创建订单对象时出现以下错误，但我已设置 attr_accessor :stripe_card_token。有谁知道我做错了什么？

```
ActiveModel::MassAssignmentSecurity::Error in OrdersController#create
Can't mass-assign protected attributes: stripe_card_token 
```

OrdersController - 创建动作

```
def create
@order = current_cart.build_order(params[:order])
@order.ip_address = request.remote_ip
@order.user_id = current_user.id

respond_to do |format|
  if @order.save_with_payment

    @order.add_line_items_from_cart(current_cart)         
    Cart.destroy(session[:cart_id])
    session[:cart_id] = nil

    format.html { render :action => "success", :notice => 'Thank you for your order.' }
    format.xml { render :xml => @order, :status => :created, :location => @order }

  else
    format.html { render :action => "new" }
    format.xml { render :xml => @order.errors,
    :status => :unprocessable_entity }
  end
end
end 
```

订单模型

```
class Order < ActiveRecord::Base
  # PAYMENT_TYPES = [ "visa", "master card", "Amex", "Discover" ] Controll the payment options via Model
  attr_accessible :first_name, :last_name, :ip_address, :cart_id, :house_id
  attr_accessor :stripe_card_token

  belongs_to :user
  belongs_to :house
  belongs_to :cart

  has_many :transactions, :class_name => "OrderTransaction"
  has_many :line_items, :dependent => :destroy

  validates :house_id, presence: true
  validates :cart_id, presence: true

  def price_in_cents 
    (cart.total_price*100).round
  end

  def add_line_items_from_cart(cart)
    cart.line_items.each do |item|
      item.cart_id = nil
      line_items << item
    end
  end

  def save_with_payment
    if valid?
      Stripe::Charge.create(amount: price_in_cents, currency: "cad", description:     current_user.name, card: stripe_card_token)
      # self.stripe_order_token = order.id
      save!
    end
  rescue Stripe::InvalidRequestError => e
    logger.error "Stripe error while creating customer: #{e.message}"
    errors.add :base, "There was a problem with your credit card."
    false
  end 
```

订单视图_Form

```
<%= f.error_notification %>
<%= f.error_messages %>
<%= f.hidden_field :stripe_card_token %>
<%= f.hidden_field :cart_id%>

<div class="form-inputs">
  <p><%#if user does not have a house Make a page (please order a home valuation first) %></p>
  <div class="contain">  
    <h3>Select House</h3>      
    <%= f.input :house_id, :as => :radio_buttons, :collection =>  current_user.houses.all.map{|h| [h.address, h.id]}%>        
  </div>

  <%= f.input :first_name %>
  <%= f.input :last_name %>

  <div class="field">
    <%= label_tag :card_number, "Credit Card Number" %>
    <%= text_field_tag :card_number, nil, name: nil %>
  </div>
  <div class="field">
    <%= label_tag :card_code, "Security Code on Card (CVV)" %>
    <%= text_field_tag :card_code, nil, name: nil %>
  </div>
  <div class="field">
    <%= label_tag :card_month, "Card Expiration" %>
    <%= select_month nil, {add_month_numbers: true}, {name: nil, id: "card_month"} %>
    <%= select_year nil, {start_year: Date.today.year, end_year: Date.today.year+15}, {name: nil, id: "card_year"} %>
  </div>          

</div>

  <div id="stripe_error">
    <noscript>JavaScript is not enabled and is required for this form. First enable it in your web browser settings.</noscript>
  </div>

<div class="form-actions">
  <%= f.button :submit %>
</div> 
```

Orders.js.coffee

```
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  order.setupForm()

order =
  setupForm: ->
    $('#new_order').submit ->
      $('input[type=submit]').attr('disabled', true)
      if $('#card_number').length
        order.processCard()
        false
      else
        true

  processCard: ->
    card =
      number: $('#card_number').val()
      cvc: $('#card_code').val()
      expMonth: $('#card_month').val()
      expYear: $('#card_year').val()
    Stripe.createToken(card, order.handleStripeResponse)

  handleStripeResponse: (status, response) ->
    if status == 200
      $('#order_stripe_card_token').val(response.id)
      $('#new_order')[0].submit()
    else
      $('#stripe_error').text(response.error.message)
      $('input[type=submit]').attr('disabled', false) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T22:27:48.750

您仍然需要在模型中的 attr_accessible 下包含 :stripe_card_token

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T15:04:50.270

活动记录（Rails 堆栈中提供 ruby​​ 代码和数据库之间的接口的层）使用 attr_accessible 方法保护您的数据库免受不必要的最终用户分配。如果存在于您的模型中，它将确保除非列出该属性，否则请求无法写入您的数据库。

你已经到了`attr_accessible`这里但没有`:stripe_card_token`列出，所以你不能保存到那个字段。

`attr_accessible :first_name, :last_name, :ip_address, :cart_id, :house_id`添加`, :stripe_card_token`

您可能认为该`attr_accessor :stripe_card_token`行会以某种方式相关，但这只是设置属性的 getter 和 setter 方法。

区别在这里更好地阐述 [在这个问题中](https://stackoverflow.com/questions/6958372/rails-difference-between-attr-accessor-and-attr-accessible)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T20:34:29.997

您可以在此处阅读有关批量分配的更多信息：[http ://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-change-1498547.html](http://www.h-online.com/security/news/item/Rails-3-2-3-makes-mass-assignment-change-1498547.html)

# javascript - 防止悬停在覆盖悬停元素的元素上

> ID：12538908
> 
> 赞同：1
> 
> 时间：2012-09-21T22:21:17.863
> 
> 标签：javascript, svg, raphael

我正在使用 SVG 和 Raphael JS。我有一种情况，如果您将鼠标悬停在一个元素上，第二个元素会出现在第一个元素的顶部。当第二个元素出现时，鼠标现在位于第二个元素上，因此 mouseout 事件会在第一个元素上触发并隐藏第二个元素。这继续循环。如何防止鼠标悬停在第一个元素上或防止鼠标悬停在第二个元素上？

在我尝试过的其他示例中，我得到了闪烁的效果。这是我在拉斐尔所做的简化版本...

```
window.onload = function () {
  var paper = Raphael("container", 1000, 900);
  var rect_one = paper.rect(30, 30, 150, 150).attr({fill:"#fff"});
  var rect_two = paper.rect(50, 50, 60, 60).attr({fill:"#fff"});

  rect_two.hide();

  rect_one.mouseover(function () {
    rect_two.show();
  });

  rect_one.mouseout(function () {
    rect_two.hide();
  });

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T16:47:44.703

我重新考虑了您的解决方案，并提出了以下方法...

而不是试图触发 onmouseout 事件（这是由鼠标越过包含状态名称的文本框触发的，因此当您将鼠标移过状态/名称区域时会发生闪烁），我认为它可能是将当前活动状态简单地缓存在变量中更有效，并在鼠标进入时测试以查看缓存状态是否与您正在鼠标悬停的状态匹配。

请参阅随附的 jsFiddle（您自己的一个分支）以及我在该脚本中包含的注释。

[http://jsfiddle.net/XKt9U/8/](http://jsfiddle.net/XKt9U/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T01:23:54.087

如果将 Raphael 元素放在一组中，则可以解决问题：

```
window.onload = function () {
  var paper = Raphael("container", 1000, 900);
  var group = paper.set()
  var rect_one = paper.rect(30, 30, 150, 150).attr({fill:"#fff"});
  var rect_two = paper.rect(50, 50, 60, 60).attr({fill:"#fff"});
  group.push(rect_one);
  group.push(rect_two);
  rect_two.hide();

  group.mouseover(function () {
    rect_two.show();
  });

  group.mouseout(function () {
    rect_two.hide();
  });

};​ 
```

[http://jsfiddle.net/agdMG/](http://jsfiddle.net/agdMG/)

# ffmpeg - ffmpeg关键帧提取

> ID：12538914
> 
> 赞同：5
> 
> 时间：2012-09-21T22:22:16.657
> 
> 标签：ffmpeg, keyframe

我一直在尝试使用 ffmpeg 0.11.1 从视频中提取关键帧。到目前为止，我尝试过的所有命令都没有提取关键帧，而是返回所有帧，即 25fps* 输出中帧的总时间数。我尝试将 keyint_min 设置为 25 以确保每秒最多有 1 个关键帧。

```
ffmpeg -vf select="eq(pict_type\,PICT_TYPE_I)" -g 250 -keyint_min 25 -i C:\test.mp4 -vsync 2 -f image2 C:\testTemp\thumbnails-%02d.jpeg 
```

但仍然返回所有帧。

然后我尝试将关键帧分开 20 秒。

```
ffmpeg -i C:\test.mp4 -vf select='eq(pict_type\,I)*(isnan(prev_selected_t)+gte(t-prev_selected_t\,20))' -vsync 0 -f image2 C:\testTemp\%09d.jpg 
```

同样的结果，所有的帧都被返回。

我该怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T01:50:21.770

在您的第一个命令中，您使用过滤器作为输入选项。我不知道 ffmpeg 将如何解释它。

试试这个：

```
ffmpeg -i C:\test.mp4 -vf select='eq(pict_type\,I)',setpts='N/(25*TB)' C:\testTemp\%09d.jpg 
```

更改`25`源的帧速率：NTSC 视频为 30000/1001，NTSC 电影为 24000/1001，PAL 为 25，等等。

`-q:v`使用or`-qscale:v`选项控制输出质量（仅`-qscale`在旧 ffmpeg 中调用）。mpeg* 的范围是 1-31，其中 31 是最差的质量。

下次记得在 superuser.com 上询问 ffmpeg 使用问题，因为 stackoverflow 专门用于编程。

# javascript - JQuery get() + 数组访问会破坏链条吗？

> ID：12538916
> 
> 赞同：2
> 
> 时间：2012-09-21T22:22:21.920
> 
> 标签：javascript, jquery

我是 Jquery 的菜鸟，如果这很荒谬，请原谅我，但是 get() 和 [] 会破坏方法链吗？我正在尝试从返回的 Jquery Object 中检索单个元素：

```
<HTML>

<HEAD><TITLE>A test page</TITLE></HEAD>

<BODY>

<p>This is a paragraph</p>
<p>This is a second paragraph</p>

</BODY>

</HTML>

<script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

var x = $("p").get(1).text();       //This doesn't work       

var y = $($("p").get(1)).text();    //re-wrapping the result does however. 

</script> 
```

如果是这种情况，我该如何更简洁地检索指定值，因为目前我上面使用的方法至少可以说有点笨拙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T22:24:32.420

是的，它会中断，`get`将 jQuery 对象转换为 DOM Element 对象，然后您不能在所选元素上使用 jQuery 方法，您可以使用`eq()`方法代替：

```
var x = $("p").eq(1).text(); 
```

或`:eq()`选择器：

```
var x = $("p:eq(1)").text(); 
```

请注意，`get`and`eq`方法是从零开始的，`eq(1)`选择第二个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:26:11.853

怎么样：

```
var x = $("p:nth-child(1)").text(); 
```

或者：

```
var x = $("p:first").text(); 
```

甚至：

```
var x = $("p").eq(0).text(); 
```

我不知道哪一个对你来说最“笨拙”:)

# firefox - 将元素移出屏幕的 CSS 3 过渡在 Firefox 中的行为不同

> ID：12538917
> 
> 赞同：2
> 
> 时间：2012-09-21T22:22:42.340
> 
> 标签：firefox, google-chrome, css, safari, css-transitions

我有一个案例，CSS 3 过渡在 Firefox 中的行为与在 Chrome 或 Safari 中的行为不同。该示例可以在[http://jsfiddle.net/inuwan/StKVQ/1/找到](http://jsfiddle.net/inuwan/StKVQ/1/)

我有 3 个略有不同的实现，只有第 2 个（move2）可以在 Firefox 中正常工作。我有一个 div，我要在屏幕外左转，然后更改其内容，然后将同一个 div 从屏幕右外转换到屏幕中间。

情况 1 (move1) - 仅适用于 Chrome/Safari。div 转换正确地离开了屏幕。然而，在 Firefox 中，当将 div 转换回屏幕中间时，它不会滑入，而只是出现。

在案例 2 (move2) - 删除 css 类以使元素从屏幕右侧向左转换的代码在案例 1 中是内联的。在案例 2 中，该代码现在已被包装在额外的 setTimeout 中，时间为 2 秒延迟。现在适用于 Firefox、Chrome 和 Safari。

在案例 3 (move3) - 与案例 2 相同，但添加了 document.body.style.overflowX = 'hidden' 以便水平滚动条不可见，并且在我们转换 div 时会发生变化。这会导致 div 离开屏幕的过渡不会在 Firefox 中滑动，div 就会消失。

差异背后是否有原因，或者它只是您必须注意的那些古怪的事情之一？

# database - 除了通用查询字符串之外，如何在 ElasticSearch 中进行前缀搜索？

> ID：12538920
> 
> 赞同：1
> 
> 时间：2012-09-21T22:22:56.080
> 
> 标签：database, elasticsearch

我有一个非常基本的“用户”索引，其中包含一个类型的“用户”，其中包含多个字段。除此之外，我没有在索引上定义任何内容。

我需要做的是提供自动完成结果，优先考虑前缀匹配（对于用户名），但还包含来自用户生物和网站的其他匹配以及其他字段的子字符串匹配。

如何使用查询 DSL 来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T10:56:57.593

有不同的方法可以实现你想要的。我会说这取决于您想要进行前缀匹配的方式。您可以使用[前缀查询](http://www.elasticsearch.org/guide/reference/query-dsl/prefix-query.html)或从用户字段中制作[EdgeNGrams](http://www.elasticsearch.org/guide/reference/index-modules/analysis/edgengram-tokenizer.html)并在不需要前缀查询的情况下对其进行搜索。第一个选项有点慢，而第二个选项会导致索引大小增加，因为您要索引更多术语（ngrams）。

如果您决定使用前缀查询，则需要将不同的查询组合在一起。您可以使用[bool 查询](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)来做到这一点。您只需要决定哪些查询必须匹配，哪些不能匹配以及哪些应该匹配（如果它们是可选的）。例如，您还可以对每个查询进行提升，以表达前缀匹配更重要。

另一方面，如果您决定索引 EdgeNGrams，您可以使用单个[查询字符串](http://www.elasticsearch.org/guide/reference/query-dsl/query-string-query.html)并搜索不同的字段，并赋予它们不同的权重，如下所示：

```
{
    "query" : {
        "query_string" : {
            "fields" : "user.ngrams^3 field1^2 field2",
            "query" : "query"
        }
    }
} 
```

您还需要考虑到查询字符串允许您搜索多个术语（从中生成布尔查询）并使用[lucene 查询语法](http://www.lucenetutorial.com/lucene-query-syntax.html)。此外，会分析查询字符串，而不会分析前缀查询。这完全取决于您需要什么以及这些功能是否对您的用例有用。

如果您需要更多信息，请与我们联系。

# python - 与请求（python 2.7）一样获取图像文件，然后使用帖子发送到服务器

> ID：12538922
> 
> 赞同：1
> 
> 时间：2012-09-21T22:23:01.477
> 
> 标签：python, post, python-2.7, http-post, python-requests

as c 通过请求（Python 2.7）获取图片文件，然后使用post方法发送到服务器？

```
file = requests.get('http://site.com/immage.jpg')
requests.post('http://site2.com/, file=somefile') 
```

如何转换`file`为`somefile`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:47:10.723

使用响应的[`.content`属性](https://requests.readthedocs.io/en/latest/user/quickstart/#binary-response-content)：

```
resp = requests.get('http://site1.example.com/immage.jpg')
requests.post('http://site2.example.com/, files=dict(file=resp.content)) 
```

我已将下载的图像发布为带有 field-name 的[多部分编码 POST](https://requests.readthedocs.io/en/master/user/quickstart/#response-contenten/latest/user/quickstart/#post-a-multipart-encoded-file)`file`。这取决于您发布到他们期望的字段名称的确切应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:26:21.200

emmm你保存...

```
with open("somefile.jpg","wb") as f:
     f.write(file.content) 
```

# ruby - 在乘客中继续获取“找不到乘客（> = 0）”

> ID：12538924
> 
> 赞同：3
> 
> 时间：2012-09-21T22:23:15.650
> 
> 标签：ruby, gem, passenger

我已经调试了一天多，没有运气，

安装 ruby​​、gems 和Passenger 后，我尝试启动Passenger，但不断收到“找不到乘客”：

```
passenger@dragon:/usr/website/myapp/current$ passenger start -p 4000 -e production -d
/home/passenger/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find passenger (>= 0) amongst [actionmailer-3.2.8, actionmailer-3.2.3, actionpack-3.2.8, actionpack-3.2.3, activemodel-3.2.8, activemodel-3.2.3, activerecord-3.2.8, activerecord-3.2.3, activeresource-3.2.8, activeresource-3.2.3, activesupport-3.2.8, activesupport-3.2.3, arel-3.0.2, bcrypt-ruby-3.0.1, builder-3.0.3, builder-3.0.0, cape-1.4.0, capistrano-2.13.4, coffee-rails-3.2.2, coffee-script-2.2.0, coffee-script-source-1.3.3, devise-2.1.2, devise_ldap_authenticatable-0.6.1, erubis-2.7.0, execjs-1.4.0, guess_html_encoding-0.0.4, high_voltage-1.1.1, highline-1.6.15, hike-1.2.1, i18n-0.6.1, i18n-0.6.0, journey-1.0.4, jquery-rails-2.0.2, jruby-pageant-1.1.1, jsmin-1.0.1, json-1.7.3, libv8-3.3.10.4-x86-linux, mail-2.4.4, mime-types-1.19, mini_magick-3.4, multi_json-1.3.6, net-ldap-0.2.2, net-scp-1.0.4, net-sftp-2.0.5, net-ssh-2.6.0, net-ssh-gateway-1.1.0, nokogiri-1.5.5, orm_adapter-0.4.0, polyglot-0.3.3, rack-1.4.1, rack-cache-1.2, rack-ssl-1.3.2, rack-test-0.6.1, rails-3.2.8, rails-3.2.3, rails-settings-cached-0.2.1, railties-3.2.8, railties-3.2.3, rake-0.9.2.2, rdoc-3.12, ruby-readability-0.5.4, rvm-capistrano-1.2.7, sass-3.1.20, sass-rails-3.2.5, sprockets-2.1.3, sqlite3-1.3.6, subexec-0.2.2, swfobject-rails-1.1.1, therubyracer-0.10.1, thor-0.16.0, thor-0.14.6, tilt-1.3.3, treetop-1.4.10, tzinfo-0.3.33, uglifier-1.2.5, warden-1.2.1] (Gem::LoadError)
        from /home/passenger/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:256:in `to_spec'
        from /home/passenger/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems.rb:1231:in `gem'
        from /home/passenger/.rvm/gems/ruby-1.9.3-p194/bin/passenger:18:in `<main>'
        from /home/passenger/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
        from /home/passenger/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

`gem install passenger`如您所见，在安装了Passenger gem（我曾经安装过它）时：

```
passenger@dragon:/usr/website/myapp/current$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.3)
actionpack (3.2.3)
activemodel (3.2.3)
activerecord (3.2.3)
activeresource (3.2.3)
activesupport (3.2.3)
arel (3.0.2)
bcrypt-ruby (3.0.1)
builder (3.0.0)
bundler (1.2.1)
cape (1.4.0)
capistrano (2.13.4)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
daemon_controller (1.0.0)
devise (2.1.2)
devise_ldap_authenticatable (0.6.1)
erubis (2.7.0)
execjs (1.4.0)
fastthread (1.0.7)
file-tail (1.0.11)
guess_html_encoding (0.0.4)
high_voltage (1.1.1)
highline (1.6.15)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.4)
jquery-rails (2.0.2)
jruby-pageant (1.1.1)
jsmin (1.0.1)
json (1.7.3)
libv8 (3.3.10.4 x86-linux)
mail (2.4.4)
mime-types (1.19)
mini_magick (3.4)
multi_json (1.3.6)
net-ldap (0.2.2)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.6.0)
net-ssh-gateway (1.1.0)
nokogiri (1.5.5)
orm_adapter (0.4.0)
passenger (3.0.17)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.3)
rails-settings-cached (0.2.1)
railties (3.2.3)
rake (0.9.2.2)
rdoc (3.12)
ruby-readability (0.5.4)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
rvm-capistrano (1.2.7)
sass (3.1.20)
sass-rails (3.2.5)
sprockets (2.1.3)
sqlite3 (1.3.6)
subexec (0.2.2)
swfobject-rails (1.1.1)
therubyracer (0.10.1)
thor (0.14.6)
tilt (1.3.3)
tins (0.5.5)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.5)
warden (1.2.1) 
```

这是我的宝石环境：

```
passenger@dragon:/usr/website/myapp/current$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [i686-linux]
  - INSTALLATION DIRECTORY: /home/passenger/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /home/passenger/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /home/passenger/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86-linux
  - GEM PATHS:
     - /home/passenger/.rvm/gems/ruby-1.9.3-p194
     - /home/passenger/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

这是 rvm 信息：

```
passenger@dragon:/usr/website/myapp/current$ rvm info

ruby-1.9.3-p194:

  system:
    uname:       "Linux dragon 3.2.0-26-generic-pae #41-Ubuntu SMP Thu Jun 14 16:45:14 UTC 2012 i686 i686 i386 GNU/Linux"
    bash:        "/bin/bash => GNU bash, version 4.2.24(1)-release (i686-pc-linux-gnu)"
    zsh:         " => not installed"

  rvm:
    version:      "rvm 1.15.9 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]"
    updated:      "2 days 23 hours 20 minutes 14 seconds ago"

  ruby:
    interpreter:  "ruby"
    version:      "1.9.3p194"
    date:         "2012-04-20"
    platform:     "i686-linux"
    patchlevel:   "2012-04-20 revision 35410"
    full_version: "ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]"

  homes:
    gem:          "/home/passenger/.rvm/gems/ruby-1.9.3-p194"
    ruby:         "/home/passenger/.rvm/rubies/ruby-1.9.3-p194"

  binaries:
    ruby:         "/home/passenger/.rvm/rubies/ruby-1.9.3-p194/bin/ruby"
    irb:          "/home/passenger/.rvm/rubies/ruby-1.9.3-p194/bin/irb"
    gem:          "/home/passenger/.rvm/rubies/ruby-1.9.3-p194/bin/gem"
    rake:         "/home/passenger/.rvm/gems/ruby-1.9.3-p194@global/bin/rake"

  environment:
    PATH:         "/home/passenger/.rvm/gems/ruby-1.9.3-p194/bin:/home/passenger/.rvm/gems/ruby-1.9.3-p194@global/bin:/home/passenger/.rvm/rubies/ruby-1.9.3-p194/bin:/home/passenger/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games"
    GEM_HOME:     "/home/passenger/.rvm/gems/ruby-1.9.3-p194"
    GEM_PATH:     "/home/passenger/.rvm/gems/ruby-1.9.3-p194:/home/passenger/.rvm/gems/ruby-1.9.3-p194@global"
    MY_RUBY_HOME: "/home/passenger/.rvm/rubies/ruby-1.9.3-p194"
    IRBRC:        "/home/passenger/.rvm/rubies/ruby-1.9.3-p194/.irbrc"
    RUBYOPT:      ""
    gemset:       "" 
```

这是引发错误的方法（第 247 行）：

```
 1 require "rubygems/requirement"
  2
  3 ##
  4 # The Dependency class holds a Gem name and a Gem::Requirement.
  5
  6 class Gem::Dependency
  7
  8   ##
  9   # Valid dependency types.
 10   #--
 11   # When this list is updated, be sure to change
 12   # Gem::Specification::CURRENT_SPECIFICATION_VERSION as well.
 13
 14   TYPES = [
 15            :development,
 16            :runtime,
 17           ]
 18
 19   ##
 20   # Dependency name or regular expression.
 21
 22   attr_accessor :name
 23
 24   ##
 25   # Allows you to force this dependency to be a prerelease.
 26
 27   attr_writer :prerelease
 28
 29   ##
 30   # Constructs a dependency with +name+ and +requirements+. The last
 31   # argument can optionally be the dependency type, which defaults to
 32   # <tt>:runtime</tt>.
 33
 34   def initialize name, *requirements
 35     if Regexp === name then
 36       msg = ["NOTE: Dependency.new w/ a regexp is deprecated.",
 37              "Dependency.new called from #{Gem.location_of_caller.join(":")}"]
 38       warn msg.join("\n") unless Gem::Deprecate.skip
 39     end
 40
 41     type         = Symbol === requirements.last ? requirements.pop : :runtime
 42     requirements = requirements.first if 1 == requirements.length # unpack
 43
 44     unless TYPES.include? type
 45       raise ArgumentError, "Valid types are #{TYPES.inspect}, "
 46         + "not #{type.inspect}"
 47     end
 48
 49     @name        = name
 50     @requirement = Gem::Requirement.create requirements
 51     @type        = type
 52     @prerelease  = false
 53
 54     # This is for Marshal backwards compatibility. See the comments in
 55     # +requirement+ for the dirty details.
 56
 57     @version_requirements = @requirement
 58   end
 59
 60   ##
 61   # A dependency's hash is the XOR of the hashes of +name+, +type+,
 62   # and +requirement+.
 63
 64   def hash # :nodoc:
 65     name.hash ^ type.hash ^ requirement.hash
 66   end
 67
 68   def inspect # :nodoc:
 69     "<%s type=%p name=%p requirements=%p>" %
 70       [self.class, self.type, self.name, requirement.to_s]
 71   end
 72
 73   ##
 74   # Does this dependency require a prerelease?
 75
 76   def prerelease?
 77     @prerelease || requirement.prerelease?
 78   end
 79
 80   def pretty_print q # :nodoc:
 81     q.group 1, 'Gem::Dependency.new(', ')' do
 82       q.pp name
 83       q.text ','
 84       q.breakable
 85
 86       q.pp requirement
 87
 88       q.text ','
 89       q.breakable
 90
 91       q.pp type
 92     end
 93   end
 94
 95   ##
 96   # What does this dependency require?
 97
 98   def requirement
 99     return @requirement if defined?(@requirement) and @requirement
100
101     # @version_requirements and @version_requirement are legacy ivar
102     # names, and supported here because older gems need to keep
103     # working and Dependency doesn't implement marshal_dump and
104     # marshal_load. In a happier world, this would be an
105     # attr_accessor. The horrifying instance_variable_get you see
106     # below is also the legacy of some old restructurings.
107     #
108     # Note also that because of backwards compatibility (loading new
109     # gems in an old RubyGems installation), we can't add explicit
110     # marshaling to this class until we want to make a big
111     # break. Maybe 2.0.
112     #
113     # Children, define explicit marshal and unmarshal behavior for
114     # public classes. Marshal formats are part of your public API.
115
116     if defined?(@version_requirement) && @version_requirement
117       version = @version_requirement.instance_variable_get :@version
118       @version_requirement  = nil
119       @version_requirements = Gem::Requirement.new version
120     end
121
122     @requirement = @version_requirements if defined?(@version_requirements)
123   end
124
125   def requirements_list
126     requirement.as_list
127   end
128
129   def to_s # :nodoc:
130     if type != :runtime then
131       "#{name} (#{requirement}, #{type})"
132     else
133       "#{name} (#{requirement})"
134     end
135   end
136
137   ##
138   # Dependency type.
139
140   def type
141     @type ||= :runtime
142   end
143
144   def == other # :nodoc:
145     Gem::Dependency === other &&
146       self.name        == other.name &&
147       self.type        == other.type &&
148       self.requirement == other.requirement
149   end
150
151   ##
152   # Dependencies are ordered by name.
153
154   def <=> other
155     self.name <=> other.name
156   end
157
158   ##
159   # Uses this dependency as a pattern to compare to +other+. This
160   # dependency will match if the name matches the other's name, and
161   # other has only an equal version requirement that satisfies this
162   # dependency.
163
164   def =~ other
165     unless Gem::Dependency === other
166       return unless other.respond_to?(:name) && other.respond_to?(:version)
167       other = Gem::Dependency.new other.name, other.version
168     end
169
170     return false unless name === other.name
171
172     reqs = other.requirement.requirements
173
174     return false unless reqs.length == 1
175     return false unless reqs.first.first == '='
176
177     version = reqs.first.last
178
179     requirement.satisfied_by? version
180   end
181
182   def match? name, version
183     return false unless self.name === name
184     return true if requirement.none?
185
186     requirement.satisfied_by? Gem::Version.new(version)
187   end
188
189   def matches_spec? spec
190     return false unless name === spec.name
191     return true  if requirement.none?
192
193     requirement.satisfied_by?(spec.version)
194   end
195
196   ##
197   # Merges the requirements of +other+ into this dependency
198
199   def merge other
200     unless name == other.name then
201       raise ArgumentError,
202             "#{self} and #{other} have different names"
203     end
204
205     default = Gem::Requirement.default
206     self_req  = self.requirement
207     other_req = other.requirement
208
209     return self.class.new name, self_req  if other_req == default
210     return self.class.new name, other_req if self_req  == default
211
212     self.class.new name, self_req.as_list.concat(other_req.as_list)
213   end
214
215   def matching_specs platform_only = false
216     matches = Gem::Specification.find_all { |spec|
217       self.name === spec.name and # TODO: == instead of ===
218         requirement.satisfied_by? spec.version
219     }
220
221     if platform_only
222       matches.reject! { |spec|
223         not Gem::Platform.match spec.platform
224       }
225     end
226
227     matches = matches.sort_by { |s| s.sort_obj } # HACK: shouldn't be needed
228   end
229
230   ##
231   # True if the dependency will not always match the latest version.
232
233   def specific?
234     @requirement.specific?
235   end
236
237   def to_specs
238     matches = matching_specs true
239
240     # TODO: check Gem.activated_spec[self.name] in case matches falls outside
241
242     if matches.empty? then
243       specs = Gem::Specification.all_names.join ", "
244       error = Gem::LoadError.new "Could not find #{name} (#{requirement}) amongst [#{specs}]"
245       error.name        = self.name
246       error.requirement = self.requirement
247       raise error
248     end
249
250     # TODO: any other resolver validations should go here
251
252     matches
253   end
254
255   def to_spec
256     matches = self.to_specs
257
258     matches.find { |spec| spec.activated? } or matches.last
259   end
260 end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T16:28:27.613

您是否确保该乘客在您的 Gemfile 中？我看到您安装了捆绑程序，我认为这与您的堆栈跟踪中的 ruby​​_noexec_wrapper 有关。

# sql - 使用地址搜索的数据库查询

> ID：12538926
> 
> 赞同：0
> 
> 时间：2012-09-21T22:23:23.317
> 
> 标签：sql, oracle

我正在为我的项目开发一种搜索功能，以通过他们的地址（即按邮政编码（zip）或按名称或按城市）搜索经销商。将只为用户提供一个 html 输入字段来输入搜索词（用户一次只能输入一个搜索词，即邮政编码或姓名或城市（不允许组合））。开发查询的条件如下

1.  用户按邮政编码搜索时，匹配结果应按降序显示
2.  当用户按名称搜索时，匹配结果应按字母顺序显示
3.  与城市名称相同

有时，名称也可能包含邮政编码，在这种情况下，结果应该用邮政编码缩短。

我试过这样

```
select city, postcode, name
  from dealers
  where name ='xyz' OR
        postcode ='xyz' OR
        city='XYZ'
  ORDER BY postcode desc 
```

但我希望每个条件都使用“ORDER BY”。例如，“xyz”匹配第一个名字我想按升序对结果进行排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T21:39:01.637

如果您的所有条款都按升序排序，生活会更轻松。

我假设您的实际应用程序使用的是变量而不是硬编码的字符串。所以解决方案应该是这样的：

```
 select city, postcode, name
  from dealers
  where name = p_search_term OR
        postcode = p_search_term OR
        city = p_search_term
  ORDER BY case when postcode = p_search_term then p_search_term else 1 end desc
           , case when name = p_search_term then p_search_term else city end asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:32:42.893

在 MySQL 中，您可以这样做：

```
 "SELECT `zip`, `name`, `city` FROM `dealers` WHERE `zip` = '$zip' ORDER BY `zip` DESC"
     "SELECT `zip`, `name`, `city` FROM `dealers` WHERE `name` = '$name' ORDER BY `name`"
     "SELECT `zip`, `name`, `city` FROM `dealers` WHERE `city` = '$city' ORDER BY `city`" 
```

我不使用 Oracle，但我认为它是一样的。（此代码假定 zip 是一个 varchar，如果它是一个整数值，只需删除 ' '）

# c# - 从 IIS7.5 获取登录用户

> ID：12538928
> 
> 赞同：2
> 
> 时间：2012-09-21T22:23:28.573
> 
> 标签：c#, asp.net, iis, iis-7.5

我在 IIS 7.5 上启用了 Windows 身份验证并禁用了其余的身份验证。在我的 Web 应用程序 web.config 中，我设置了

```
<authentication mode="Windows"> 
```

当我尝试登录用户时，`WindowsIdentity.GetCurrent().Name;`它将 defaultappool 作为用户而不是登录的 Windows 用户。这曾经可以在 IIS5.1 上正常工作，但不能在 IIS7.5 上正常工作。还有什么我应该修改的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:37:22.367

您可以从[HttpContext.User Property](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user%28v=vs.100%29.aspx)获取用户身份。

# php - 更新 mongodb 文档时，确定修改字段的最有效方法是什么？

> ID：12538930
> 
> 赞同：0
> 
> 时间：2012-09-21T22:24:27.403
> 
> 标签：php, mongodb

更新文档时，我想返回在更新期间修改的字段，如果可能的话，返回以前的值。

最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:31:52.497

您可以使用该[`findAndModify`](http://www.mongodb.org/display/DOCS/findAndModify+Command)命令来支持该用例。

# webview - WebView - 检测用户何时点击链接？

> ID：12538931
> 
> 赞同：2
> 
> 时间：2012-09-21T22:24:29.157
> 
> 标签：webview, navigation, windows-8, browser, windows-runtime

我有一个 WebView，我想检测用户何时单击链接。但是，当用户单击链接时不会发生任何事件。在 Silverlight、WinForms 和 WPF 中，有带有 Navigating 事件的 WebBrowser 控件，但 WinRT 的 WebView 似乎缺少很多事件。我不能修改网页，因为我不是它的所有者。有什么方法可以检测用户何时点击链接？

此外，Source 变量在用户单击链接时不会更改，只有在手动分配时才会更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T06:10:17.473

想法是更改所有链接的源 HTML 以调用自定义`OnClick`脚本，并将事件处理程序附加`ScriptNotify`到`WebView`

# wordpress - wordpress - 显示帖子的所有内容（忽略“更多”）

> ID：12538935
> 
> 赞同：2
> 
> 时间：2012-09-21T22:24:44.877
> 
> 标签：wordpress

在我的网站的移动版本上，我想忽略标签并显示每篇文章的全文。我怎样才能做到这一点？这会切断文本并插入（更多...）：

```
<?php the_content(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T07:06:32.950

在此代码下方的 PAGE.PHP 中，您正在使用 EXCERPT 函数，或者从那里删除 EXCERTT。

# android - Android - LinearLayout：如何在项目之间添加自动空间以水平填充布局

> ID：12538943
> 
> 赞同：0
> 
> 时间：2012-09-21T22:25:50.150
> 
> 标签：android, android-layout, android-linearlayout, gravity, autofill

如何使水平 LinearLayout 中的 4 个固定大小的按钮水平填充该层的空间，让 Android 在这些按钮之间放置所需的空间以填充该空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T04:04:59.593

你在寻找这样的东西吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFF"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    </LinearLayout>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    </LinearLayout>

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:orientation="vertical" >
    </LinearLayout>

    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:35:31.790

如果我理解正确，您想让这 4 个按钮在水平 LinearLayout 中占据相等的空间，如果是这样，那么`android:layout_weight="1"`在 XML 布局中添加：对于每 4 个按钮。

# c# - 使用图像控件显示服务器上传的图像

> ID：12538948
> 
> 赞同：2
> 
> 时间：2012-09-21T22:26:19.960
> 
> 标签：c#, asp.net, image, button, file-upload

我的问题是，我怎样才能立即显示服务器端上传的图片[点击按钮上传的图片]？使用文件上传控件完成上传。预期使用图像控制进行图像检索。

下面是我的代码的一部分。

```
protected void Button1_Click(object sender, EventArgs e)
{
    if(FileUpload1.HasFile)
        FileUpload1.SaveAs(Server.MapPath("uploaded images/"+FileUpload1.FileName));
} 
```

此代码成功将图像上传到服务器中的“上传的图像”文件夹。但我无法在上传后立即将其检索到显示。

下面是我尝试过的，它从未给出任何编程错误，尽管它也从未给出结果！

```
Image1.ImageUrl = (System.IO.Path.GetFileName(FileUpload1.FileName)).ToString(); 
```

预期的帮助。问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T22:52:55.113

```
string imgPath = this.ResolveUrl("~/uploaded images/" + FileUpload1.FileName");
Image1.ImageUrl = imgPath; 
```

这是对 ASP.NET 和图像路径问题的[完整讨论。](http://www.west-wind.com/weblog/posts/2009/Dec/21/Making-Sense-of-ASPNET-Paths)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T22:31:00.583

您真的不应该将本地路径名指定为上传图像的来源。尝试类似的东西

```
Image1.ImageUrl = "uploaded images/"+FileUpload1.FileName; 
```

# statistics - 按秒计算事物并保持运行平均值的算法

> ID：12538959
> 
> 赞同：2
> 
> 时间：2012-09-21T22:27:40.977
> 
> 标签：statistics, go

我想按某些属性计算请求并按某个时间段（可能是秒）汇总它们，然后在最后 10 秒、最后 2 分钟等运行平均值/最大值/最小值。

显而易见的（对我来说）方法是只列出秒数，当我需要移动/运行平均值时，只需返回列表中适当的时间量并计算平均值。除了围绕存储聚合值以供较长时间使用的一些明显优化之外，我还缺少什么想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T08:23:22.383

我更喜欢`exponential moving average`它，因为它更简单并且不需要将值保存在数组中

这是我过去使用的功能

```
func MovingExpAvg(value, oldValue, fdtime, ftime float64) float64 {
  alpha := 1.0 - math.Exp(-fdtime/ftime)
  r := alpha * value + (1.0 - alpha) * oldValue
  return r
} 
```

和代码示例

[http://play.golang.org/p/OZ25cwKMnT](http://play.golang.org/p/OZ25cwKMnT)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T00:49:10.090

我对 Go 不是很熟悉，所以请原谅以下代码中的任何奇怪之处。向滚动平均值添加一个元素应该是 O(1) 的时间。它在内存中使用 O(n)（固定数量）。

```
package main

import "fmt"

func rolling(n int) func(float64) float64 {
        bins := make([]float64, n)
        average := 0.0
        i := 0
        return func(x float64) float64 {
                average += (x - bins[i]) / float64(n)
                bins[i] = x
                i = (i + 1) % n
                return average
        }
}

func main() {
        add := rolling(5)
        add(1)
        add(2)
        add(3)
        add(4)
        fmt.Println("(1+2+3+4+5          ) / 5 =", add(5))
        fmt.Println("(  2+3+4+5+9        ) / 5 =", add(9))
        fmt.Println("(    3+4+5+9+3      ) / 5 =", add(3))
        fmt.Println("(      4+5+9+3+0    ) / 5 =", add(0))
        fmt.Println("(        5+9+3+0-9  ) / 5 =", add(-9))
        fmt.Println("(          9+3+0-9-8) / 5 =", add(-8))
} 
```

输出：

```
$ go run roll.go
(1+2+3+4+5          ) / 5 = 3
(  2+3+4+5+9        ) / 5 = 4.6
(    3+4+5+9+3      ) / 5 = 4.8
(      4+5+9+3+0    ) / 5 = 4.2
(        5+9+3+0-9  ) / 5 = 1.6
(          9+3+0-9-8) / 5 = -1 
```

# iphone - UITableViewCell 中的 UIImageView 在重用单元格之前不会显示

> ID：12538964
> 
> 赞同：0
> 
> 时间：2012-09-21T22:28:01.007
> 
> 标签：iphone, objective-c, ios, ipad

我有一个自定义 UITableViewCell 实现的奇怪问题：

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    ProfileTableViewCell *cell = (ProfileTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[ProfileTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    MyStory *myStory = (SavedStory *)[fetchedResultsController.fetchedObjects objectAtIndex:indexPath.row];
    [cell setupCellViewWithSavedStory:myStory];

    return cell;
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithPulseStyle:PNRTableViewCellAccessoryDefault reuseIdentifier:@"SavedStories"];
    if (self) {

        storyImageView_ = [[UIImageView alloc] initWithFrame:CGRectMake(kPadding, kPadding, kImageSize, kImageSize)];
        storyImageView_.layer.borderWidth = 2.0;
        storyImageView_.layer.borderColor = [UIColor whiteColor].CGColor;

        storyTitleLabel_ = [[UILabel alloc] initWithFrame:CGRectMake(storyImageView_.frameRight + kPadding*1.5, storyImageView_.frameY, self.bounds.size.width - storyImageView_.frameWidth - 4*kPadding, 0)];
        storyTitleLabel_.numberOfLines = 0;
        storyTitleLabel_.lineBreakMode = UILineBreakModeClip;
        storyTitleLabel_.font = [UIFont fontWithName:kProximaNovaBold size:14];
        storyTitleLabel_.textColor = [UIColor whiteColor];
        storyTitleLabel_.backgroundColor = [UIColor clearColor];

        storyPublisherLabel_ = [[UILabel alloc] initWithFrame:CGRectMake(storyTitleLabel_.frameX, storyTitleLabel_.frameHeight, storyTitleLabel_.frameWidth, 50)];
        storyPublisherLabel_.numberOfLines = 1;
        storyPublisherLabel_.font = [UIFont fontWithName:kProximaNova size:11];
        storyPublisherLabel_.textColor = [UIColor colorWithWhite:140/255.f alpha:1.0];
        storyPublisherLabel_.backgroundColor = [UIColor clearColor];

        [self.contentView addSubview:storyImageView_];
        [self.contentView addSubview:storyTitleLabel_];
        [self.contentView addSubview:storyPublisherLabel_];

    }
    return self;
}

-(void)setupCellViewWithSavedStory:(MyStory *) myStory
{
    if (myStory.imageState == StoryImageAvailableOnDisk) {
        storyImageView_.hidden = NO;
        storyImageView_.image = myStory.image;
    }
    else {
        storyImageView_.image = nil;
        storyImageView_.hidden = YES;
    }

    CGSize titleSize = [myStory.title sizeWithFont:storyTitleLabel_.font constrainedToSize:CGSizeMake(storyTitleLabel_.frameWidth,  kImageSize - kPadding) lineBreakMode:storyTitleLabel_.lineBreakMode];
    [storyTitleLabel_ setFrameHeight:titleSize.height];
    [storyTitleLabel_ setText:savedStory.title];
    [storyPublisherLabel_ setText:savedStory.domain];
    [self setNeedsLayout];
} 
```

但由于某种原因，在我向下滚动并再次向上滚动之前我看不到图像。换句话说，图像被重复使用，然后我可以看到图像。所有标签文本都显示得很好，只是图像。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T22:59:28.220

**你试过这个吗？**

```
if (cell == nil) {
            cell = [[ProfileTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
            MyStory *myStory = (SavedStory *)[fetchedResultsController.fetchedObjects objectAtIndex:indexPath.row];
           [cell setupCellViewWithSavedStory:myStory];
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T04:26:31.797

尝试添加此代码：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyStory *myStory = (SavedStory *)[fetchedResultsController.fetchedObjects objectAtIndex:indexPath.row];
    [cell setupCellViewWithSavedStory:myStory];
} 
```

# objective-c - RestKit 0.10.2：未知类型名称 RKFetchedResultsTableController

> ID：12538965
> 
> 赞同：0
> 
> 时间：2012-09-21T22:28:03.223
> 
> 标签：objective-c, restkit

如果这很重要，我正在 Github (0.10.2) 上使用 RestKit 的当前主分支。

我已经`#import <RestKit/RestKit.h>`在我的表视图控制器类中做了。我什至更进一步`#import "RestKit/Code/UI/RKFetchedResultsTableController.h"`。但我收到错误消息

`unknown type name RKFetchedResultsTableController`.

我认为这将是 Xcode 的一些神秘错误。所以我从管理器中删除派生数据，重新启动 Xcode 并再次构建。然而，同样的错误信息再次弹出。

需要快速修复，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T01:53:59.463

我现在想通了。简单地

```
#import <RestKit/UI.h> 
```

解决问题。不知道为什么 UI.h 不包含在 RestKit.h 中，这很奇怪。

# php - 从url获取一个字符后的字符串

> ID：12538966
> 
> 赞同：1
> 
> 时间：2012-09-21T22:28:13.783
> 
> 标签：php

**从这样的 URL 仅获取B005PB3YHU**部分 的最佳方法是什么： [http ://www.amazon.com/Designer-Bow-Ties-Y306/dp/B005PB3YHU%3FSubscriptionId%3DAKIAIM6KP3HMBKZXA2EA%26tag%3Dmenbowtie-20%26linkCode% 3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB005PB3YHU](https://rads.stackoverflow.com/amzn/click/com/B005PB3YHU)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:29:40.703

使用`parse_url`和`parse_string`： http:
[//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)
[http://php.net/manual/en/function.parse-str.php](http://php.net/manual/en/function.parse-str.php)

```
$query = parse_url($url,PHP_URL_QUERY);
parse_str($query,$parts);
echo $parts['creativeASIN']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:45:06.737

基于@jimp 的答案，您需要先进行 urldecode 以将 %## 更改为 PHP 可以理解的内容：

```
$url = 'http://www.amazon.com/Designer-Bow-Ties-Y306/dp/B005PB3YHU%3FSubscriptionId%3DAKIAIM6KP3HMBKZXA2EA%26tag%3Dmenbowtie-20%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB005PB3YHU';
# urldecode will remove the %## encoding, and make the url look like:  
# http://www.amazon.com/Designer-Bow-Ties-Y306/dp/B005PB3YHU?SubscriptionId=AKIAIM6KP3HMBKZXA2EA&tag=menbowtie-20&linkCode=xm2&camp=2025&creative=165953&creativeASIN=B005PB3YHUB005PB3YHU
$query = parse_url(urldecode($url), PHP_URL_QUERY);
parse_str($query, $parts);
echo $parts['creativeASIN']; 
```

# java - Jasper 报告：JRBeanCollectionDataSource 无法解析为类型

> ID：12538967
> 
> 赞同：7
> 
> 时间：2012-09-21T22:28:40.623
> 
> 标签：java, jasper-reports, ireport

我在 iReports 中构建图表，当我在 Eclipse 中编译时出现以下错误：

```
net.sf.jasperreports.engine.JRException: Errors were encountered when compiling report expressions class file:
1\. net.sf.jasperreports.engine.JRBeanCollectionDataSource cannot be resolved to a type
            value = new     net.sf.jasperreports.engine.JRBeanCollectionDataSource(((java.lang.String)field_chartData46xAxis.getValue())); //$JR_EXPR_ID=11$
                        <---------------------------------------------------->
2\. net.sf.jasperreports.engine.JRBeanCollectionDataSource cannot be resolved to a type
            value = new net.sf.jasperreports.engine.JRBeanCollectionDataSource(((java.lang.String)field_chartData46xAxis.getOldValue())); //$JR_EXPR_ID=11$
                        <---------------------------------------------------->
3\. net.sf.jasperreports.engine.JRBeanCollectionDataSource cannot be resolved to a type
            value = new net.sf.jasperreports.engine.JRBeanCollectionDataSource(((java.lang.String)field_chartData46xAxis.getValue())); //$JR_EXPR_ID=11$
                        <---------------------------------------------------->3 errors

at net.sf.jasperreports.engine.design.JRAbstractCompiler.compileReport(JRAbstractCompiler.java:204)
at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:240)
at net.sf.jasperreports.engine.JasperCompileManager.compile(JasperCompileManager.java:173)
at net.sf.jasperreports.engine.JasperCompileManager.compileReport(JasperCompileManager.java:448)
at org.reportprotojava.protosheet.Program.main(Program.java:122) 
```

我将 ProtoReport 的ArrayList **（****我**现在测试时只有一个）传递给 jasper 编译器。ProtoReport类包含一个**ChartData类，****该类**又具有两个Double 类型的**ArrayList**，一个用于 X 轴，一个用于 Y 轴。**ProtoReport**、**ChartData**类和**主程序**的 定义如下（略删）：

 ********原型报告**类：

```
package org.reportprotojava.protosheet;

import java.util.ArrayList;

public class ProtoReport {

private String outputFileName;
private String title;
private String logoLocation;
private String paragraphText;
private ArrayList<String> tableData;
private String picLocation;
private int[][] graphData;  //TODO decide how to store chart data
private ChartData chartData;
private String path;

//default constructor
public ProtoReport() {

    // Initialize object fields
    outputFileName = "PrototypeReport";
    title = "Prototype Report";
    paragraphText = "Default text";

    tableData = new ArrayList<String>();
    chartData = new ChartData();

    //set path to working directory
    path = System.getProperty("user.dir");

    //default to assumed report location 
    //(ie same folder as .jrxml and .jasper files)
    logoLocation = path + "\\reports\\logo.jpg";
    picLocation = path + "\\reports\\pic.jpg";

} 
```

**图表数据**类：

```
package org.reportprotojava.protosheet;

import java.util.ArrayList;

public class ChartData {

private ArrayList<Double> xAxis;
private ArrayList<Double> yAxis;
/**
 * @param xAxis
 * @param yAxis
 */

//default constructor
public ChartData(){
    xAxis = new ArrayList<Double>();
    yAxis = new ArrayList<Double>();
}

//constructor
public ChartData(ArrayList<Double> xAxis, ArrayList<Double> yAxis) {
    super();
    this.xAxis = xAxis;
    this.yAxis = yAxis;
} 
```

**主程序**

```
public class Program {

/**
 * @param args
 * 
 *Program runs our ProtoReport class and its supporting classes 
 * In the end we will have generated a .pdf from the 
 * previously defined .jrxml file
 */

//Generate some random data for the chart
public static ArrayList<Double> randomData(int size) {
    ArrayList<Double> arrayList = new ArrayList<Double>();
    double randNumber;

    for (int i = 0; i < size; i++) {
        randNumber = Math.random();
        arrayList.add(randNumber);
    }

    return arrayList;
}

public static void main(String[] args) {

    ArrayList<ProtoReport> listOfReports = new ArrayList<ProtoReport>();

    ProtoReport protoReport1 = new ProtoReport();
    ProtoReport protoReport2 = new ProtoReport();

 //Simple Fields and text
    protoReport1.setTitle("Example<br/>Fact Sheet");

    protoReport1.setLogoLocation(protoReport1.getPath() + "\\reports\\logo.gif");

 ChartData chartData = new ChartData();
    chartData.setYAxis(randomData(20));
    for (Double i = (double) 0; i < chartData.getYAxis().size(); i++) {
        chartData.getXAxis().add(i);
    }

        protoReport1.setChartData(chartData);  
 String jrxmlLocation = protoReport1.getPath() 
                    + "\\reports\\ReportPrototype.jrxml";
    String outputFileName = protoReport1.getPath() 
            + "\\reports\\generated\\" + protoReport1.getOutputFileName() + ".pdf";

    listOfReports.add(protoReport1);

//and wrap the ArrayList in a JRBeanCollectionDataSource
    JRBeanCollectionDataSource beanBurritoWrap = new JRBeanCollectionDataSource(listOfReports);

    //build the jasper report
    JasperReport jasperReport;
    JasperPrint jasperPrint;
    HashMap<String, Object> hashMap = new HashMap<>();
    boolean reportCreated;

    try {

        jasperReport = JasperCompileManager.compileReport(jrxmlLocation);
        jasperPrint = JasperFillManager.fillReport(jasperReport, hashMap, beanBurritoWrap);
        JasperExportManager.exportReportToPdfFile(jasperPrint, outputFileName);
        reportCreated=true;
    }
    catch (JRException e) {
          e.printStackTrace();
          reportCreated=false;
    }

} 
```

我已经用谷歌搜索了这个问题并提出了[这个](http://jasperforge.org/node/531052)和[这个](https://stackoverflow.com/questions/8244926/jasper-reposts-cant-compile-an-expression-that-contains-jrbeancollectiondatasou)，并阅读了[jasper sourceforge 上的数据源部分，](http://jasperreports.sourceforge.net/sample.reference/datasource/index.html#javabeandatasources)但这些都没有帮助解决这个问题，我确定我已经使用过

```
 new net.sf.jasperreports.engine.JRBeanCollectionDataSource($F{chartData.xAxis}) 
```

在我的图表数据源表达式中（并在我更改字段名称时更新它）并且字段设置为 iReport 属性中的**列表**类型。

这是我的**.jrxml**

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ReportPrototype.jrxml" pageWidth="595" pageHeight="842" columnWidth="495" leftMargin="57" rightMargin="43" topMargin="43" bottomMargin="43" uuid="10825c57-f953-4166-bf03-8ecabe8a8f47">
<property name="ireport.zoom" value="0.75"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="232"/>
<subDataset name="ChartData" uuid="fc9ec0af-3e1a-40a7-8eb4-9ad30a266dee">
    <field name="chartData.xAxis" class="java.lang.String"/>
</subDataset>
<queryString language="SQL">
    <![CDATA[]]>
</queryString>
<field name="title" class="java.lang.String"/>
<field name="logoLocation" class="java.lang.String"/>
<field name="picLocation" class="java.lang.String"/>
<field name="chartData.xAxis" class="java.lang.String"/>
<detail>
    <band height="740" splitType="Stretch">
        <textField isStretchWithOverflow="true" pattern="">
            <reportElement uuid="519c6bb5-72f9-4c25-8e91-47865ae0c9df" mode="Opaque" x="39" y="75" width="378" height="45" forecolor="#000099"/>
            <textElement textAlignment="Center" verticalAlignment="Middle" markup="html">
                <font size="26"/>
            </textElement>
            <textFieldExpression><![CDATA[$F{title}]]></textFieldExpression>
        </textField>
        <image onErrorType="Icon">
            <reportElement uuid="3759a707-32a4-49ef-a9c6-b0ad7136f738" x="216" y="264" width="279" height="246"/>
            <imageExpression><![CDATA[$F{picLocation}]]></imageExpression>
        </image>
        <image onErrorType="Icon">
            <reportElement uuid="f989f871-32ea-4f13-ae3f-3f487cde76dd" x="295" y="0" width="200" height="42"/>
            <imageExpression><![CDATA[$F{logoLocation}]]></imageExpression>
        </image>
        <xyLineChart>
            <chart>
                <reportElement uuid="ae87fc13-b92e-4a2a-b218-d395343f6028" x="0" y="537" width="495" height="203"/>
                <chartTitle/>
                <chartSubtitle/>
                <chartLegend/>
            </chart>
            <xyDataset>
                <dataset>
                    <datasetRun subDataset="ChartData" uuid="de7fb84d-17ea-4e5e-82bf-2015e72e4982">
                        <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.JRBeanCollectionDataSource($F{chartData.xAxis})]]></dataSourceExpression>
                    </datasetRun>
                </dataset>
            </xyDataset>
            <linePlot>
                <plot/>
            </linePlot>
        </xyLineChart>
    </band>
</detail>
<pageFooter>
    <band height="16">
        <break>
            <reportElement uuid="0d30dea4-a6af-4e41-b7be-c288f3188dbf" x="0" y="11" width="100" height="1"/>
        </break>
    </band>
</pageFooter> 
```

在我尝试过的 iReports 中： -在字段下
创建和命名字段**ProtoReport.ChartData.xAxis**和**ProtoReport.ChartData.yAxis***以及*我添加的**ChartData**源下的字段-将字段重命名
为**ChartData.xAxis**和**ChartData.yAxis**
-重 命名字段到**chartData.xAxis**和**chartData.yAxis**
- 仅 使用 Field 下的字段- 仅
使用 ChartData 下的字段 - Fields

都给我一个错误。任何想法我做错了什么？

其他问题：
-就目前而言，我的图表可能只会产生 xAxis 数据点。如何将一个**ArrayList**的内容用于 X 轴，另一个用于 Y 轴？即我在**ChartData**对象中的**xAxis**和**yAxis**字段。 -我在**main之前声明****的 randomData()** 方法在我声明它为***static***之前不会运行，这是为什么呢？

 *******编辑**
更清楚地说明我的问题：如何命名我的字段、设置我的数据源和配置我的数据集以解决这个问题？
我正在关注评论中列出的教程（对不起非超链接；作为一个新用户，我已经使用了我所有的超链接），并根据我的需要对其进行了更改，但他的数据结构比我的更简单我想学习如何处理 jasper 报告中更复杂的对象和数据集。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-24T11:25:00.667

在 .jrxml 中，图表的数据源定义为：

```
<![CDATA[new net.sf.jasperreports.engine.JRBeanCollectionDataSource($F{chartData.xAxis})]]> 
```

这来自 iReports 4.7.0 自动填充，当您在详细信息窗格中的**Connection/Datasource exp**下选择**Use datasource expression**时，iReports 的默认表达式为：

 **```
 new net.sf.jasperreports.engine.JREmptyDataSource(1) 
```

但是这个表达式是错误的，因为*.data*丢失了。它应该是：

```
 new net.sf.jasperreports.engine.data.JREmptyDataSource(1) 
```

然后我当然将JREmptyDataSource **(1)**更改为**JRBeanCollectionDataSource($F{chartData})**

这修复了编译时错误，然后我必须重新组织和重新定义我的列表和 POJO，以便我可以轻松访问我的**ChartData**对象**列表中的数据点对。**从本质上讲，这意味着我现在有一个 ChartData 对象列表，而不是具有两个双精度列表（一个用于 X 轴，一个用于 Y 轴）的单个 ChartData 对象，每个对象只有一个 XY 点。目前这似乎运作良好。*************

# java - eclipse打包可执行jar文件出错

> ID：12538968
> 
> 赞同：2
> 
> 时间：2012-09-21T22:28:52.690
> 
> 标签：java, eclipse, jar, packaging, executable-jar

我有一个可以在 Eclipse 中正确运行的 Java 代码。

![在此处输入图像描述](../Images/1fe76bade47ccb63be206a9b4d2f6768.png) ![在此处输入图像描述](../Images/71ab87e492bd6bee5c310e05f8a50ac8.png)

我需要在eclipse之外运行这个java程序，所以我尝试将它导出为可执行的jar文件。

![在此处输入图像描述](../Images/db9718274e3ef5d6f7c4dca6dd6386a6.png)

我有一个警告弹出： ![在此处输入图像描述](../Images/3421430502ac4e39c7f0cdbfeac5670b.png)

然后，我让 JAR 创建失败的错误`Resource is out of sync`消息。

![在此处输入图像描述](../Images/ddbb8b5bb5edb05263925676818303ec.png)

可能有什么问题？在eclipse之外执行java程序的命令是什么？

## 添加

谷歌搜索（[Eclipse 源与文件系统不同步](https://stackoverflow.com/questions/6626703/eclipse-source-out-of-sync-with-file-system)）以删除`resource is out of sync`错误，但我有很多`duplicate errors`.

![在此处输入图像描述](../Images/7458f1f1406099ec6dd981270d17e486.png)

为什么我有这些错误？我怎样才能删除它们？我从 mercurial 存储库下载了该项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:13:52.203

我可以生成可执行的 jar，这是我为了让它工作而必须做的总结。

## 删除重复文件。

我发现一些错误消息说有重复的文件。我不明白为什么 eclipse 认为有重复的文件，但是通过删除文件，我可以删除错误。

## 排除部分文件

在构建 -> 配置构建路径 ![在此处输入图像描述](../Images/cc359537218581c03c38632ee3fba648.png)

我不得不删除或排除源文件夹。

![在此处输入图像描述](../Images/d75f073ae34921a1c87438cd2266ff65.png)

## 始终通过刷新同步

我必须使用 F5 键来刷新构建，或者我可以使用 eclipse setup 自动执行此操作：![在此处输入图像描述](../Images/e3bbd12ef1dee4030ff3089a7ad5a3f1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T08:24:00.700

您是否有这样的情况：项目 A 指的是 B 和 C。C 也指的是 B，而您正试图为 A 创建一个可运行的 jar？

这给我造成了问题。我知道如何设法消除 A 中 C 的依赖，这很有帮助！

# android - android上的音频音量提升

> ID：12538971
> 
> 赞同：4
> 
> 时间：2012-09-21T22:29:28.620
> 
> 标签：android, volume

我想知道如何提高 Android 应用程序的音量。

另外，是否可以创建一个自动提高其他应用程序音量的服务？

解释我想做什么：

我有一部 Galaxy Mini 手机，它的音量并没有那么大。我通常收听诸如 ESPN 之类的广播应用程序和诸如 mlb At Bat 应用程序中的游戏广播，但它们可能会变得特别低并且变得难以听到。

最近我安装了一个 mp3 播放器应用程序，它的音量提升效果很好。所以我想知道这是怎么做到的，以及是否有可能创建一个提高手机音量的应用程序，以便其他应用程序从中受益。真的，我的兴趣完全是个人的，因为为此开发一个应用程序将是一种爱好，而我的主要兴趣是能够听到我喜欢的游戏 :)

谁能指出我如何做到这一点？

预先感谢问候。德西奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T23:24:52.267

如果您使用[SoundPool](https://developer.android.com/reference/android/media/SoundPool.html)，（在网上查找大量帮助）您可以对此进行一些控制。

```
 public static void playSound(int index, float speed) 
{       
         float streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC); 
         streamVolume = streamVolume / mAudioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
         mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume, 1, 0, speed); 
} 
```

但是，这仍然只会在您的设备最大音量输出（0.0-1.0 之间）播放原始声音。所以它不会放大声音的实际数据（它不会变大，然后你的设备的音量会变大）。

如果您要使用应用程序中已经包含的音频文件，这不会有问题，因为您可以在编辑器中放大声音，然后将其添加到您的项目中。但是放大流式声音更加困难。

Android SDK带有低音增强功能，但不是通用放大器。（据我所知）要做到这一点，您要么必须编写自己的代码，要么找到已经完成的其他人并使用他们的代码。

这不是一项简单的任务。没有大量以前的编程经验或编程知识，可能需要付出相当多的努力才能理解所有需要发生的事情，或者你需要做什么才能实现这一点。

如果您觉得可以迎接挑战，这里是一个不错的起点。

[http://www.developer.com/java/other/article.php/1572251/Java-Sound-Getting-Started-Part-1-Playback.htm](http://www.developer.com/java/other/article.php/1572251/Java-Sound-Getting-Started-Part-1-Playback.htm)

它将教您基础知识，并让您对正在从事的工作有一个扎实的了解。它不会准确涵盖您正在寻找的内容，但它将为您提供一个很好的起点，让您了解如何处理原始音频、编辑和播放它的概念。

# c# - 使用 Mutex 同步 C# 对象：“从未同步的代码块调用对象同步方法”错误

> ID：12538977
> 
> 赞同：2
> 
> 时间：2012-09-21T22:30:13.550
> 
> 标签：c#, object, synchronization, mutex

我有一个 C# 应用程序代码，在其中我使用互斥锁在创建对象期间同步一些代码。对象构造函数获取互斥体，并且仅在不再需要对象时（在应用程序关闭期间）释放它。因此，释放互斥锁的一个地方是对象析构函数。出现的问题是，有时我在对象析构函数中调用 ReleaseMutex() 时遇到异常。例外是：“对象同步方法是从未同步的代码块中调用的”。看起来，调用对象析构函数的 gabage 收集的线程有时与首先等待互斥锁 (Mutex.WaitOne(false, namedMutex)) 的线程不同。如何在同一线程上同步获取和释放互斥锁以避免此异常？谢谢你的帮助！

```
public class MyObject
{
    static ExtDeviceDriver devDrv;
    private Mutex mut = new Mutex(false,myMutex);

    public MyObject()
    {
        mut.WaitOne();
        //Thread safe code here.
        devDrv = new ExtDeviceDriver();
    }

    ~MyObject()
    {
        mut.ReleaseMutex();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T01:00:27.917

为什么不使用[Dispose 模式](https://stackoverflow.com/questions/898828/c-sharp-finalize-dispose-pattern)？ `Mutex`继承`WaitHandle`并`WaitHandle`实现`IDisposable`. 如果您有一个创建和使用的类，`IDisposable`它也应该实现`IDisposable`并正确处理。不要让 GC 为您处理互斥锁，在`using`块中手动执行或手动调用`.Dispose()`它。这样你就可以随时知道谁在做什么，什么时候做。

[这篇文章](http://blogs.msdn.com/b/jfoscoding/archive/2005/08/12/450835.aspx)有一个很好的引述，你应该牢记在心：

> 如果对象实现了 IDisposable，那么您应该考虑如何清理对象。
> 
> 实现 IDisposable 的对象通常这样做是因为它们持有应确定释放的真实资源。

这正是这里发生的事情。

我还看到您正在使用命名互斥锁。命名互斥锁用于跨进程并作为操作系统句柄进行管理。是否有其他人获得相同的互斥锁并试图释放它？您需要命名互斥体是否有原因？这些通常很难处理，因为如果进程终止并且互斥锁没有得到妥善处理，您可能会丢弃互斥锁和各种其他奇怪的东西。

# c# - ThreadLocalStorage 什么时候被清理

> ID：12538981
> 
> 赞同：2
> 
> 时间：2012-09-21T22:30:34.110
> 
> 标签：c#, thread-local

如果我把东西放在 c# TLS 什么时候被清理，还是我的工作是清理它？

我是说

a) 无论线程如何启动给定的工作（一个 QueueUserWorkItem 线程，调用 WCF，...），我是否总是从一个空的 TLS 开始

b）如果我将昂贵的东西放入 TLS 中，它们会在线程完成其工作时被 GC 处理。请注意，我没有说“结束”，因为我假设大多数 .net 线程来自一个或多个池，因此就操作系统而言，它们不一定会结束。或者我的工作是始终“最终”自己确保我不会留下一团糟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:32:34.470

TLS 条目将在线程被放回池中后继续存在。

因此，换句话说，如果您要使用 System.Threading.ThreadPool 类中的线程，则您有责任清理放入 TLS 中的所有内容。

# sorting - 就地排序；无需动态分配新内存（使用 LinkedList）

> ID：12538982
> 
> 赞同：0
> 
> 时间：2012-09-21T22:30:34.397
> 
> 标签：sorting, data-structures, linked-list

什么是就地排序？

我想对链表进行排序（排序必须就地），并且不允许使用任何新内存。

我们如何在不使用临时节点的情况下进行排序？

谢谢，伊萨

# javascript - Javascript 对象匹配

> ID：12538984
> 
> 赞同：3
> 
> 时间：2012-09-21T22:30:42.613
> 
> 标签：javascript

Javascript 对象可以用作关联数组。所以我的问题是如何自动设置具有相同结尾的多个键匹配一个值？

我会写一个例子来更明确地说明我想要什么。像这样的东西：

```
var handle = {}
handle[*css] = handlers.style; 
```

每个以“css”结尾的键都应该与 handlers.style 匹配。

有什么办法做到这一点？

PD：我用 NodeJS 的服务器端 javascript 来做这个

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:36:18.683

如果您遍历对象属性并检查属性名称是否与所需的模式匹配，则这是可能的。就像是：

```
for (var i in obj) {
  if (i.toString().substr(-3) === 'css') {
    obj[i] = handlers.style;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T22:40:41.080

一种快速而肮脏的方式：

```
var handle = {}
name = "article_users_css"
handle[name.substr(name.length-3)] = "something" 
```

或者如果你可以使用一些符号来分隔后缀，你可以使用它来代替：

```
name.substr(str.lastIndexOf(YOUR_CHAR_OF_CHOICE)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T23:02:53.053

我不认为你能做到这一点。但是您可以在将请求路由到处理程序之前使用请求路径名。请参见下面的示例：

```
 var path = "mystyle.css"
 // var path = "index.html"
 // var path = "image.png"

 var handle = {};
 handle[css] = handlers.style;
 handle[html] = handlers.html;
 handle[img] = handlers.img;

 if (path.match(/.*\.css/)) {
     handle[css]();
 } 
 else if (path.match(/.*\.html/)) {
       handle[html]();
 }
 else if ((path.match(/.*\.png/) || path.match(/.*\.jpg/)) {
       handle[img]();
 } 
```

您可以考虑使用支持基于正则表达式匹配的路由的 Express

# java - 遍历 HashMap 并获取对象中值的“最低”整数

> ID：12538995
> 
> 赞同：0
> 
> 时间：2012-09-21T22:31:51.847
> 
> 标签：java, object, hashmap, iteration

```
 for (Entry<String, Data> entry : list.entrySet()) {
        if(entry.getValue().getRoom() == 1){
            if(entry.getValue().getName().equalsIgnoreCase("RED")){
                 entry.getValue().getPosition() // need to get the lowest free number
                 // between the range of 1-6
            } 
        }
    } 
```

在这种情况下如何获取 getPosition 的最低空闲位置。getPosition 值介于 1-6 之间，每个值 Room = 1 和 Name = RED 中只有一个。例如，如果 1,3,4,6 存在于 getPosition(with room=1 and name=red) 那么输出应该是 2。这是特定组合中 getPosition 中空闲的最小数字。希望你能帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T22:36:57.957

好吧，听起来*最简单*的方法是：

```
boolean[] taken = new boolean[7]; //(0-6 inclusive)
// You were never using the key as far as I could see...
for (Data data : list.values()) {
   if (data.getRoom() == 1 && data.getName().equalsIgnoreCase("RED")) {
       taken[data.getPosition()] = true;
   }
}

for (int i = 1; i <= 6; i++) {
    if (!taken[i]) {
        return i;
    }
}

// Do whatever you want if there are no free positions... 
```