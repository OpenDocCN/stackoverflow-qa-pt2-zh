# StackOverflow 问答 15047000-15047999

# python - 是否可以在 TextWrangler 中阻止评论 Python 代码

> ID：15047003
> 
> 赞同：0
> 
> 时间：2013-02-23T23:35:55.707
> 
> 标签：python, textwrangler

我正在使用优秀的“Learn Python The Hard Way”教程，我想知道是否有人知道是否可以在其中创建块注释？我从一个类似的问题中注意到[，](https://stackoverflow.com/questions/675442/comment-out-a-python-code-block)这在 Python 中似乎是不可能的，但一些编辑器已经实现了方法来做到这一点。

编辑我已经编辑了上述问题以提供更多详细信息并使用术语“块注释”代替“块引用”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:37:58.217

这是一个重复的问题：[Commenting/Uncommenting a block of Python code in TextWrangler](https://stackoverflow.com/questions/6643251/commenting-uncommenting-a-block-of-python-code-in-textwrangler)

但是，我建议您不要打扰这 9 个步骤，而只需下载[sublime text 2](http://www.sublimetext.com/2)。

它是一个优秀的 Python 编辑器（我相信它实际上是用它编写的语言。）您可以通过简单地突出显示代码块并使用注释/取消注释键盘快捷键来完成您要查找的内容：`Ctrl+Shift+/`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-16T18:23:16.167

在 mac 上的 textwrangler 中，这对我有用。突出显示要注释掉的文本。按住命令键并按 /。

# android - GoogleAdMobAdsSdkAndroid-6.3.0 不工作

> ID：15047007
> 
> 赞同：0
> 
> 时间：2013-02-23T23:37:04.997
> 
> 标签：android, admob

在过去的两周里，我创建了一些应用程序，admob 广告运行良好。

然后，上周，当我发布了一个在应用程序中包含广告的应用程序时，我注意到它无法正常工作。状态为非活动状态（红色圆圈）。

然后，我意识到 AdsSDK 已经有 6.3 的更新版本，而我的应用仍在使用 6.2.1。但广告在应用程序中完美展示。

所以，我所做的只是更改 AdsSdk (6.2.1 > 6.3) 并在 Google Play 上更新应用程序（版本 2）。

但是，广告仍然无法正常工作。AdMob 控制面板上的状态仍处于非活动状态。

然后，我还删除了 Admob 上的应用配置文件，并创建了一个具有相同包名的新配置文件。当然，我更改了应用中的中介 ID，并在 Google Play 上更新了新版本（3.0 版）。

而且我认为代码没有问题，使用与使用 adssdk 6.2.1 的其他应用程序相同的代码......

有什么问题 ？

谢谢 :D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T04:03:30.003

问题解决了 ！:D 在广告网络配置设置中，我认为应用程序的发布者 ID 不同。所以，我只是将其更改为正确的发布者 ID ..

对不起，不必要的帖子...如果有人遇到像我这样的问题，请尝试检查您的 AdMob 网络设置 ~ :D

# python - 使用 Python re 摆脱链接

> ID：15047008
> 
> 赞同：0
> 
> 时间：2013-02-23T23:37:10.203
> 
> 标签：python, regex

说我有一个字符串看起来像`<a href="/wiki/Greater_Boston" title="Greater Boston">Boston–Cambridge–Quincy, MA–NH MSA</a>`

我怎样才能`re`用来摆脱链接并只获取`Boston–Cambridge–Quincy, MA–NH MSA`部分？

我尝试了类似`match = re.search(r'<.+>(\w+)<.+>', name_tmp)`但没有工作的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:43:38.857

```
re.sub('<a[^>]+>(.*?)</a>', '\\1', text) 
```

请注意，解析 HTML 通常是[相当危险](https://stackoverflow.com/a/1732454/216074)的。但是，您似乎正在解析 MediaWiki 生成的链接，可以安全地假设链接的格式始终相似，因此您应该可以使用该正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T00:21:20.157

您还可以使用`bleach`模块[https://pypi.python.org/pypi/bleach](https://pypi.python.org/pypi/bleach)，它包装了 html 清理工具并让您快速去除 html 的文本

# sql - sql中的通配符

> ID：15047009
> 
> 赞同：2
> 
> 时间：2013-02-23T23:37:10.353
> 
> 标签：sql, database, select

通配符在 sql 中是如何工作的。如果我这样做`select * from table`，它会给出所有字段。但如果我这样做`select a* from table`，它会给出错误。它不应该给出所有以a开头的字段吗？我有点困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T11:46:43.543

`SELECT * FROM tableName`字面意思是“从 tableName 中选择所有列”。

菲利普格雷厄姆在他要求使用的地方的回答是正确的`a.*`

通配符可帮助您搜索不确定的字符串。这些几乎总是与`LIKE`关键字一起使用并放入`WHERE`子句或搜索`CASE`语句。

有两个通配符 -`%`和`_`。

`%`用于查找任何长度为 0 或更长的字符串。例如，

```
SELECT firstName
  FROM persons
 WHERE UPPER(firstName) LIKE 'J%' 
```

这将返回firstname 以 letter 开头`firstName`的表中的所有内容。这将返回“Jason”、“James”、“Josh”、“Jessica”等等。`persons``J`

请注意，该`UPPER`函数用于消除区分大小写。

接下来，您可以让一个`_`角色寻找一个角色的存在。

```
SELECT firstName
  FROM persons
 WHERE UPPER(firstName) LIKE 'J_M__' 
```

这将返回“James”、“Jimmy”、“Jamos”、“Jxmx”并过滤掉任何“Jason”、“Jaguar”等。

更多信息请点击[这里](http://docs.oracle.com/cd/F49540_01/DOC/inter.815/a67843/cqspcl.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T23:40:32.297

您可以使用 a.* 其中 a 是表的名称。例如在

```
select a.* from a left join b on a.id = b.id 
```

您将只返回来自 a 的字段，而不是来自 b 的字段

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-23T23:42:57.490

如果想在 SQL 中使用通配符，您需要在要过滤的列上键入`LIKE`.

```
SELECT * 
FROM table
WHERE column_name LIKE 'a%'; 
```

这将为您提供该列上以“a”开头的所有内容。

如果您不想要所有列，则必须在查询中明确给出您想要的每一列的名称。

```
SELECT LastName, FirstName, Address 
FROM table 
```

因此，如果您想要所有以“a”开头的字段，则必须在 SELECT 语句中命名所有以“a”开头的字段。

希望这可以帮助。

# python - 我在 Python 中收到一个索引错误，说它超出范围，但我不知道为什么

> ID：15047011
> 
> 赞同：0
> 
> 时间：2013-02-23T23:37:14.527
> 
> 标签：python, traceback

我创建了应该将机器语言转换为汇编语言的代码，但是当我尝试从命令提示符运行它时，我不断收到错误消息。我收到的错误是：

```
Traceback <most recent call last>:
   File "Assembler.py", line 102, in <module>
     parser.advance()
   File "Assembler.py", line 15, in advance
     self.command = self.asm_file[self.index]
IndexError: list index out of range 
```

我不太确定为什么它超出了范围。我在命令提示符中输入的是：

```
 python Assembler.py MyFile.asm 
```

有人可以看看我下面的代码并帮助我弄清楚它为什么给我这个吗？

```
class Parser:
def __init__(self, filename):
    self.asm_file = [line for line in open(filename)]
    self.index = 0

def hasMoreCommands(self):
    return self.index < len(self.asm_file)

def advance(self):
    self.index += 1

    if self.index == len(self.asm_file):
        return

    self.command = self.asm_file[self.index]
    self.command = self.removeCommentsAndSpaces(self.command)

    if not self.command:
        self.advance() 
```

这些块之间只有更多的代码定义，错误消息中引用的第 102 行是下一个块的第 10 行。

```
if __name__ == '__main__':
import sys

if len(sys.argv) == 1:
    print 'need filename'
    sys.exit(-1)

table = SymbolTable()
parser = Parser(sys.argv[1])
parser.advance()
line = 0

while parser.hasMoreCommands():
    if parser.commandType() == 'L_COMMAND':
        table.addEntry(parser.symbol(), line)
    else:
        line += 1

    parser.advance()

code = Code()
parser = Parser(sys.argv[1])
parser.advance()

var_stack = 16

while parser.hasMoreCommands():
    cmd_type = parser.commandType()

    if cmd_type == 'A_COMMAND':
        number = 32768

        try:
            addr = int(parser.symbol())
        except:
            if table.contains(parser.symbol()):
                addr = table.getAddress(parser.symbol())
            else:
                table.addEntry(parser.symbol(), var_stack)
                addr = var_stack
                var_stack += 1

        bin_number =  bin(number | addr)[3:]
        assembly = '0' + bin_number
        print assembly
    elif cmd_type == 'C_COMMAND':
        assembly = '111'
        assembly += code.comp(parser.comp())
        assembly += code.dest(parser.dest())
        assembly += code.jump(parser.jump())
        print assembly

    parser.advance() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:42:01.847

您尝试在脚本末尾访问一行，然后再存在行。因此，请尝试在函数末尾移动您的索引增量。

```
def advance(self):

if self.index == len(self.asm_file):
    return

self.command = self.asm_file[self.index]
self.command = self.removeCommentsAndSpaces(self.command)

self.index += 1

if not self.command:
    self.advance() 
```

为什么不重用代码？第二种方式：

```
def advance(self):
self.index += 1

if not self.hasMoreCommands():
    return

self.command = self.asm_file[self.index]
self.command = self.removeCommentsAndSpaces(self.command)

if not self.command:
    self.advance() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:47:53.737

```
self.index += 1

if self.index == len(self.asm_file):
    return

self.command = self.asm_file[self.index] 
```

当您在递增之后和访问列表之前检查您的索引时，人们会认为您做得很好。然而，这里可能存在的问题是，在增加索引值之前，您已经处于列表的长度。因此，在增加索引后，索引比列表长度大一。

您可以通过在访问列表之前打印出索引来轻松检查。要走安全路线，只需更改您的支票：

```
if self.index >= len(self.asm_file):
    return 
```

实际上，您的问题发生在最后一个片段的第 10 行，即此处：

```
parser = Parser(sys.argv[1])
parser.advance() 
```

鉴于您只前进了一次，文件很可能是空的，即列表的长度为零。因此，当您前进一次时，您有一个索引`1`，它不等于长度 ( `0`)，但仍然超出列表访问的范围。

# vb.net - 使用多个表创建（循环）数据集

> ID：15047016
> 
> 赞同：2
> 
> 时间：2013-02-23T23:37:31.367
> 
> 标签：vb.net, loops, datatable, dataset

我需要创建几个（直到运行时我才知道有多少）表并将每个表添加到数据集中。每个数据表都需要有一个不同的名称，可以根据循环变量来构造。

```
sub fillDataTableA(byref dt as datatable)
...  code to fill table
end sub
sub fillDataTableB(byref dt as datatable)
...  code to fill table
end sub

loop through branches
   dim dt  (name it as "branch1 A")      '  "branch#" comes from loop
  fillDataTableA(dt)
   dataset.add  (dt)          ' add this table to dataset

   dim dt  ( name it as "branch1 B")
   fillDataTableB(dt)     
   dataset.add  (dt)   ' add second table for this branch
next  (branch)

processDataSets(dataset) 
```

因此，如果有 4 个分支，则将有 8 个表添加到数据集中。我的问题是我不知道如何以不同的方式命名它们（表）并动态地添加到数据集中。

你能看到如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:20:11.287

这足以让你开始吗？

```
 Dim n As Integer
    Dim ds As New DataSet

    Dim s = InputBox("Number of tables?")
    n = Integer.Parse(s)

    For i = 1 To n
        Dim t As New DataTable With {.TableName = "newtable" & i.ToString}
        ds.Tables.Add(t)
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:41:57.333

这是你需要的吗？

```
Dim ds As New DataSet

for i as integer=0 to 9

 Dim dt As New DataTable("NameOfTable" & i.tostring)
 ds.Tables.Add(dt)

Next 
```

# php - 无法获得纪元时间以通过表单发布

> ID：15047018
> 
> 赞同：0
> 
> 时间：2013-02-23T23:38:13.717
> 
> 标签：php, jquery, forms

我有一个表单在按钮按下时在后台运行 php 脚本问题是，当我在 iPad 上使用表单时，响应被缓存这可以通过使发布数据唯一来解决，我想通过添加一个隐藏的包含当前纪元时间的字段。

目前我使用：

```
$(document).ready(function(){
    $("#myform").validate({
        debug: true,
        submitHandler: function(form) {
            // do other stuff for a valid form
            $.post('process.php', $("#myform").serialize(), function(data) {
                $("#myform").append(data.datum);
                var datum = Date.getTime();
                $('input[name=datum]').val(datum);
                $('#results').html(data);
            });
        }
    });
}); 
```

这似乎不起作用:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:41:45.397

*您需要在发布数据之前*放置处理日期的两行，例如：

```
$(document).ready(function(){
    $("#myform").validate({
        debug: true,
        submitHandler: function(form) {
            // do other stuff for a valid form
            var datum = Date.getTime();
            $('input[name=datum]').val(datum);
            $.post('process.php', $("#myform").serialize(), function(data) {
                $("#myform").append(data.datum);
                $('#results').html(data);
            });
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T21:48:30.740

通过在 POST 位置放置无缓存标头来修复它并且不再需要纪元时间

# javascript - JavaScript 需要库

> ID：15047023
> 
> 赞同：4
> 
> 时间：2013-02-23T23:39:27.510
> 
> 标签：javascript, require

我对 JavaScript 世界很陌生（特别是在库方面）。其中相当多的人告诉您将其`require('libName')`用作将库集成到您的网页/应用程序中的一种方式。有人可以向我解释它是如何工作的以及如何实现它吗？因为默认情况下 require() 不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:46:18.663

浏览器中的 JavaScript 没有`require`功能，此功能由外部库提供，遵循两个最流行的规范：[CommonJS](http://www.commonjs.org/)和[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)。看看[RequireJS](http://requirejs.org/)对这两种模式都很好。

服务器上的 JavaScript (NodeJS)，默认使用 CommonJS 规范。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T00:27:55.203

这是一个非常轻量级的需求：

```
var require = function(src, success, failure){
    !function(source, success_cb, failure_cb){
            var script = document.createElement('script');
            script.async = true; script.type = 'text/javascript'; script.src = source;
            script.onload = success_cb || function(e){};
            script.onerror = failure_cb || function(e){};
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(script);
    }(src, success, failure);
}

require('js/jquery.js', function(){
    console.log('jQuery is ready to use');
}, function(){
    console.log("Something went wrong loading this script");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T23:46:48.140

Require 要么是一个你自己编写的手工函数，要么是一个库的一部分，你可以在页面上的任何其他 JS 之前加载它。

例如，RequireJS 是一个只处理依赖加载（和命名空间，如果需要的话）的库。

您可以非常简单地制作您自己的`onload`事件，方法是使用您以编程方式插入页面（或`onreadystatechange`旧版本的 IE）的脚本标记中的事件，并根据您想要支持的超旧浏览器的数量提供一些后备。

通过学习“Promises”的模式，你也可以在你的模块中间开始需要依赖。

同样，不同的库以不同的方式支持这一点。

# r - 在其他两个引用类对象之间传递对引用类对象的引用（足球示例）

> ID：15047026
> 
> 赞同：3
> 
> 时间：2013-02-23T23:39:35.920
> 
> 标签：r, oop, object, pass-by-reference, reference-class

我试图通过以下示例在其他两个参考类对象（例如，两个足球 [football] 球员）之间“传递”对参考类对象（例如球）的引用：

```
# create Reference classes
b <- setRefClass('Ball', fields = list(size = 'numeric'))

    p <- setRefClass('Player', fields = list(name = 'character', possession = 'Ball'), 
methods = list(pass = function(){
        tmp <- possession$copy()
        possession <<- NULL
        return(tmp)
    }, receive = function(newBall){
        possession <<- newBall
} 
))

# initialize pretend all-star team
# p1 gets initial possession of a new ball
p1 <- p$new(name = 'Ronaldinho', possession = b$new(size=5) )

p2 <- p$new(name = 'Beckham')

# now pass the ball from p1 to p2
p2$receive(p1$pass()) 
```

但是我收到以下错误：

```
Error in function (value)  : 
  invalid replacement for field ‘possession’, should be from class “Ball” or a subclass (was class “NULL”) 
```

从理论上讲，我试图重新引用对球对象的引用，然后将该引用添加到其他玩家，但显然这不起作用。我知道可以通过直接访问字段来获得相同的结果，但我想找到一种方法来仅使用类的内部方法来完成此“通过”。这可能吗？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T09:17:41.820

您可能会收到错误，因为在定义`Player`类时，您将`possession`字段设置为 type `Ball`。但是在你的`pass`函数中，你设置`possession`为 NULL：

```
possession <<- NULL 
```

如果将初始化更改为：

```
p = setRefClass('Player', fields = list(name = 'character', possession = 'ANY') 
```

然后一切都按预期工作：

```
R> p2$receive(p1$pass())
R> p1
Reference class object of class "Player"
Field "name":
[1] "Ronaldinho"
Field "possession":
NULL
R> p2
Reference class object of class "Player"
Field "name":
[1] "Beckham"
Field "possession":
Reference class object of class "Ball"
Field "size":
[1] 5 
```

# stringstream - 如何让 stringstream 将 uint8_t 视为数字而不是字符？

> ID：15047028
> 
> 赞同：8
> 
> 时间：2013-02-23T23:39:48.643
> 
> 标签：stringstream

我有这段代码，想知道是否可以让 stringstream 将 uint8_t 视为数字而不是字符？

```
uint8_t s;
std::stringstream sstream( "255" );
sstream >> s;
std::cout << s << " equals 50/'2' not 255 " << std::endl; 
```

s 应该是 255 而不是 50/'2'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-31T14:05:23.703

如果您使用 std::stringstream 将 uint8_t 转换为字符串，则可以使用[std::to_string](http://www.cplusplus.com/reference/string/to_string/)代替。仅在 c++11 中允许。

## C++11 功能

```
#include <stdint.h>
#include <iostream>
uint8_t value = 7;
std::cout << std::to_string(value) << std::endl;
// Output is "7" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:43:17.073

将其转换为`int`：

```
std::cout << (int)s << " equals 2 not 255 " << std::endl; 
```

# php - Webservice 在 monodroid 应用程序中返回广告页面而不是数据

> ID：15047029
> 
> 赞同：0
> 
> 时间：2013-02-23T23:39:55.053
> 
> 标签：php, web-services, xamarin.android, httpwebresponse

我一直在测试我在 Monodroid（Android 的 Mono）中编写的应用程序。基本上，我通过 php 帖子（http://[my-domain]/register_php?/usrname=blabla&usremail=blabla）将一些简单的数据存储到数据库中（我正在使用免费的网络托管服务 000webhost.com。）

如果成功，php 页面将返回一个简单字符串的响应

```
<?php
         (...)
      if( $success )
      {
          echo "Success";
      }else{
          echo "Failure";
      }
   > 
```

但是在我的 android 应用程序中，我没有收到这个简单的字符串作为答案。相反，我收到一个完整的 html 页面来宣传 000webhost.com 提供的服务。**但是，如果我将 url 输入到我的 chrome 浏览器中，一切正常，我会收到适当的状态（无论它是否成功）**

这是发布数据的代码：

```
byte[] post_data = Encoding.ASCII.GetBytes(string.Format("name={0}&email=
{1}",txt_usr_name.Text,txt_usr_email .Text) );
HttpWebRequest wb_request = 
(HttpWebRequest )WebRequest.Create("http://[my-domain]/register_user.php" );
wb_request.Method = "POST";
wb_request.ContentType = "application/x-www-form-urlencoded";
wb_request.ContentLength = post_data.Length;

Stream stream = wb_request.GetRequestStream();
stream.Write( post_data, 0, post_data.Length );
stream.Close(); 
```

这是读回响应的代码：

```
 HttpWebResponse wb_response = ( HttpWebResponse )wb_request.GetResponse();

    string status_code = wb_response.StatusCode.ToString();
    string server = wb_response.Server.ToString();

    Stream answer = wb_response.GetResponseStream();
    StreamReader ans_reader = new StreamReader( answer );

    string result = ans_reader.ReadToEnd();

    AlertDialog.Builder builder = new AlertDialog.Builder( this );
    builder.SetTitle( "Connection result" );
    builder.SetMessage( result );
    builder.SetPositiveButton( "OK", delegate { } );
    var dialog = builder.Create();
    dialog.Show(); 
```

当我调用网络服务时，我忘记设置什么了吗？非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:27:56.503

I would **guess** that your free web service is putting some other filter in place before your PHP page.

It may be using HTTP headers like accept or user-agent to determine whether or not to use your PHP.

Try using the Request Builder (now called Composer) within the excellent Fiddler2 tool to create HTTP requests - within a few minutes you will find out which headers you need to send.

[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# jquery - 检查活动 div 加载

> ID：15047030
> 
> 赞同：1
> 
> 时间：2013-02-23T23:39:57.977
> 
> 标签：jquery

我在布局中使用这样的东西

```
<nav id="main-nav">
   <a href="#link1">Link1</a>
   <a href="#link2">Link2</a>
   <a href="#link3">Link3</a>
</nav>
<div id="link1">
   some content goes here
</div>
<div id="link2">
   some content goes here
</div>
<div id="link3">
   some content goes here
</div> 
```

所以当我点击一些导航链接时，它会向下滚动到正确的 div。问题是 NAV 是一个固定位置的菜单，它使用距离顶部 200px 的位置。我用来滚动的JS是这样的：

```
$('#main-nav a').click( function(event) {
    var nome = $(this).attr("href");
    $('html, body').animate({
         scrollTop: $(nome).offset().top-198
     }, 1600);
}); 
```

好的，所以有这个内部页面，导航链接变成：

```
<a href="http://www.mysite.com/#link1">Link1</a> 
```

问题是它可以加载主页，但是 div 从顶部开始，在 NAV 下（因为`offset().top-198`它加载页面时没有。）我认为我需要找到一种方法`#link`从加载的 url 中获取做一个`onLoad` `scrollTop`，对吗？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:54:01.870

您可以使用类似于下面的内容，在 URL 中找到当前主题标签，然后将其与 divs ID 匹配，然后为该 ID 设置动画。

```
$(function(){
   currentPage = window.location.hash;
   moveLink =  $('div').find($(this).attr('id',currentPage));
   $('html, body').animate({
      scrollTop: $(moveLink).offset().top-198;
   });
}); 
```

**编辑 - - - - - - - - - - - - - - - - - - - -**

```
var aniFunc = function(a){
   $('html, body').animate({
       scrollTop: $(a).offset().top-198;
   });
};

$(document).ready(function(){
   currentPage = window.location.hash;
   moveLink =  $('div').find($(this).attr('id',currentPage));
   aniFunc(moveLink);
}

$('#main-nav a').click( function(event) {
    nome = $(this).attr("href");
    aniFunc(nome);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:52:54.130

你最初可以做这样的事情：

```
window.location.href.match('(#.*$)') 
```

并在页面加载时触发对该元素的点击。

# mysql - sql varchar 中允许的合法字符是什么？

> ID：15047032
> 
> 赞同：-1
> 
> 时间：2013-02-23T23:40:14.183
> 
> 标签：mysql, sql

我想在我的表中存储一个字符串。该字符串将包含几个带有分隔符的子字符串，即字符“，”。

varchar 适合吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:43:48.383

是的，VARCHAR 是存储字符串的首选数据类型。

然而，在同一个字段中存储多个值并不是首选。多值属性通常在数据库设计中实现为表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:43:55.923

VARCHAR 将为您工作。但这并不意味着这是正确的方法。

您应该考虑创建将每个子字符串存储在单独的行或列中的模式。通过这种方式，数据将更易于读取、写入，最重要的是，更易于搜索。

# math - 如何在 Big Theta 中找到 c1？

> ID：15047036
> 
> 赞同：0
> 
> 时间：2013-02-23T23:41:19.153
> 
> 标签：math, discrete-mathematics

在我们有多项式的情况下：

```
f(n) = 8n^2 - 4n + 2 
```

然后我们将有 g(n) = n^2

```
BigTheta(f(n)) = 0 <= c1g(n) <= f(n) <= c2g(n), n > n0 
```

我知道要找到 c2，我们将添加所有系数：8 - 4 + 2 因此 c2 = 2，对吗？但是c1呢？c1 总是等于 1 吗？还是它总是等于最小的正系数？这里的一般规则是什么？

另一个例子，如果我们有：

```
f(n) = 9n^2 + 3n/2 + 1/4
g(n) =  n^2 
```

我知道 c2 = 10.75 但是 c1 = 1 还是 1/4？

我正在寻找一个一般规则来找出 c1 给我一个紧密的界限。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T14:47:53.210

很难说它会“永远”是什么。但是对于您的示例，8n^2 - 4n + 2 始终至少与 4n^2 一样大，因此您可以选择 c1 为 4（或任何更小的值：1、2 或 3）。我是怎么知道的？好吧，我们想要一个小于 f(n) 的 c1n^2 形式的函数；8n^2 小于 8n^2 + 2 （换句话说，我们可以忽略添加的项），但我们必须担心 -4n 项。因此，最简单的方法是说由于 4n 小于 4n^2，8n^2 - 4n^2 将始终小于 8n^2 - 4n + 2（因为我减去了更大的东西）。所以，

4n^2 = 8n^2 - 4n^2 <= 8n^2 - 4n <= 8n^2 - 4n + 2 <= f(n)

所以你可以选择c1等于4。

这些问题没有一个正确的答案。您只需要一个可以显示的常数，使 c1n^2 小于 f(n)。

对于第二个示例，您要添加所有术语，因此只需删除它们。9n^2 <= 9n^2 + 3n/2 + 1/4，所以选择 c_1 = 9。

我想作为一种通用算法，您可以采用最大阶系数并减去所有负系数（并忽略正系数）。假设你得到一个正值，这会给你一个正确的答案。如果没有，您将不得不摆弄 n0 或使 c1 小于 1。

# php - PHP MYSQL WHERE 错误

> ID：15047040
> 
> 赞同：0
> 
> 时间：2013-02-23T23:41:33.590
> 
> 标签：php, mysql, where, where-clause

我的 php 代码有问题。问题是过滤指定的 WHERE 子句，但也吐出一些错误，第三条记录应该消失。这是代码：

```
<body>
<?php
$username="USERNAME";
$password="PASSWORD";
$database="DATABASE";
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM searchacts";
$result=mysql_query($query);
$num=mysql_numrows($result);
$result = mysql_query("SELECT * FROM searchacts
WHERE category='Party Bands'");
mysql_close();
?>
<?php
$i=0;
while ($i < $num) {

$image=mysql_result($result,$i,"image");
$name=mysql_result($result,$i,"name");
$category=mysql_result($result,$i,"category");
$description=mysql_result($result,$i,"description");
$stamps=mysql_result($result,$i,"stamps");
$stickmen=mysql_result($result,$i,"stickmen");
$price=mysql_result($result,$i,"price");
$view=mysql_result($result,$i,"view");
$actpagelink=mysql_result($result,$i,"actpagelink");
?>
<a href="<?php echo $actpagelink; ?>" class="searchitem">
<div class="searchimage"><img src="<?php echo $image; ?>"/></div>
<div class="searchtext">
  <div class="searchname"><?php echo $name; ?></div>
  <div class="searchcategory"><?php echo $category; ?></div>
  <div class="searchdescription"><?php echo $description; ?></div>
</div>
<div class="searchstamps"><img src="<?php echo $stamps; ?>" /></div>
<div class="searchstickmen"><img src="<?php echo $stickmen; ?>" /></div>
<div class="searchprice"><span class="pricefrom">from</span><?php echo $price; ?></div>
<div class="searchview"><img src="<?php echo $view; ?>" /></div>
</a>
<?php
$i++;
}
?>
</body> 
```

它可能非常简单，这是错误：

```
Warning: mysql_result() [function.mysql-result]: Unable to jump to row 2 on MySQL result index 3 in /home/enterta1/public_html/searchtestingv1.php on line 31 
```

持续多行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:00:03.247

你有一个错字

```
 $num=mysql_numrows($result); 
```

应该

```
$num = mysql_num_rows($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:00:36.957

您正在查找行数

```
$num=mysql_numrows($result); 
```

在您上次查询之前，因此 $num 不代表您上次查询返回的行数。

```
$result = mysql_query("SELECT * FROM searchacts WHERE category='Party Bands'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:01:18.887

`WHERE`看起来不错，但是……对我来说，这是从数据库中提取数据的一种奇怪方式。

**做这个：**

1.  放在`mysql_close()`文件的末尾

2.  没必要得到`$num`

3.  行后`$result=...`做：

    ```
    while ($row=mysql_fetch_assoc($result)) $acts[]=$row;

    // now all your records are saved in array $acts, e.g.
    // $acts[0]['name'], $acts[0]['category'], where...
    // the first dimension of the array [0] contains the number of the record...
    // the second the field-name from your database! 
    ```

4.  输出所有 $acts 做：

    ```
    foreach ($acts as $act) { ?>

        ...
        <div class="searchimage"><img src="<?=$act['image']?>"/></div>
        <div class="searchtext">
            <div class="searchname"><?=$act['name']?></div>
            <div class="searchcategory"><?=$act['category']?></div>
            <div class="searchdescription"><?=$act['description']?></div>
        </div>
        ... <? // you get the idea ;-)

    } // foreach 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T00:08:57.423

您`$num`在以下语句中计算所有获取的集合/行：

```
SELECT * FROM searchacts 
```

同时，您正在尝试仅为其中选定的几个输出数据：

```
SELECT * FROM searchacts WHERE category='Party Bands' 
```

因为，第二个查询的结果总是小于或等于第一个；你得到那个错误。

# php - PHP 引发 SQL 语法错误

> ID：15047048
> 
> 赞同：0
> 
> 时间：2013-02-23T23:42:23.277
> 
> 标签：php, mysql

我是 PHP 和 SQL 的新手，但正在创建一个登录系统。我遇到的问题是：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 5 行的“输入的姓氏”附近使用正确的语法

所以我查看了代码，我相信它指的是：

```
 mysql_query("INSERT INTO users (email, password, hash, forename, surname) VALUES(
        '". mysql_escape_string($email) ."',
        '". mysql_escape_string($password) ."',
        '". mysql_escape_string($hash) ."',
        '". mysql_escape_string($forename) .",
        '". mysql_escape_string($surname) ."') ") or die(mysql_error()); 
```

看完之后，我看不到语法错误。有人发现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T23:44:01.127

在这条线上：

```
'". mysql_escape_string($forename) .",
                                  // ^--- no closing single quote here. 
```

您忘记了结束引号。

# .net - 有效地检测列表中的匹配项

> ID：15047053
> 
> 赞同：0
> 
> 时间：2013-02-23T23:43:10.113
> 
> 标签：.net, pattern-matching

我有一个有声读物部分的列表，看起来像..

```
20,000 Leagues Under The Sea
A Tale of Two Cities Part 1 of 2
A Tale of Two Cities Part 2 of 2
A Canterbury Tale 1
A Canterbury Tale 2
Great Expectations 
```

我正在尝试折叠类似于 Db 标准化的列表...

```
20,000 Leagues Under The Sea
    (Parts = {"20,000 Leagues Under The Sea"})
A Tale of Two Cities
    (Parts = {"A Tale of Two Cities Part 1 of 2", "A Tale of Two Cities Part 2 of 2"})
A Canterbury Tale
    (Parts = {"A Canterbury Tale 1", "A Canterbury Tale 2"})
Great Expectations
    (Parts = {"Great Expectations"}) 
```

现在，我可以提取所有以某些数字模式结尾的条目，但我需要处理很多格式（`1/2`、`1 of 2`或只是`2`）。删除数字后，我可以剥离任何可选的“部分”，

但这一切似乎有点笨拙。感觉应该有一种更好的方法来识别组 - 也许类似于“查找仅在最后 n 个字符中不同的条目”？

有人可以指出我这样做的优雅方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:57:26.257

如果你的 5-6 行 kluge 有效，为什么不保留它呢？

在一般情况下，这是一个相当困难的问题，因为有很多不同的方法来标记不同的情节。我们通过 YouTube 视频在一定程度上解决了这个问题，但远非完美。正如您所说，有许多不同的格式，尽管它们采用两种一般形式之一：

```
<name><episode>
<episode><name> 
```

是书籍/视频系列的名称，可以采用多种形式。但即使是那些*通常*是：

```
[word]<epidose-number>[of][<total-episodes>] 
```

[word] 是可选的，可以是以下几个词中的任何一个：“part”、“episode”、“installment”、“scene”等。[of] 通常存在并且通常是“of”、“/”、“-”等。有时作者会为同一个系列混合格式。不一致的命名使问题更加复杂。所以你会看到：

```
My vacation, part 1 of 3
Vacation, tape 2
Part 3 of my vacation 
```

只要您可以标准化剧集命名和编号，问题就会变得更容易解决。我们得出的解决方案使用了字典，但您可以通过排序来完成。我们的解决方案基本上是：

*   对于每个视频，推导出名称和剧集编号。（我们为此使用了自定义解析器和一些启发式方法，但如果不同的剧集编号方案的数量相当少，您可以使用正则表达式。对我们来说更难的部分是匹配名称，但如果您假设其中没有错别字名字，这很容易处理。）
*   从这两条数据创建一个对象实例
*   将该实例添加到所有项目的列表中

一旦我们这样做了，按名称和剧集对列表进行排序就很简单了。

您选择的解决方案将完全取决于您的数据的清洁程度。如果仅使用几种不同的剧集格式就相当干净，我强烈建议使用正则表达式解决方案。

# php - 调用非对象的成员函数

> ID：15047054
> 
> 赞同：0
> 
> 时间：2013-02-23T23:43:15.293
> 
> 标签：php, mysqli

```
function connect(){
$db = new mysqli(localhost, bludevel_PMI, password1, bludevel_PMIForm);
if ($db->connect_errno) {
        echo json_encode(array($mysqli->connect_error));
    return false;
        exit();
}}

function disConnect(){
mysqli_close($db);
}

function downloadData(){
if ($_POST['cmd'] == "downloadData"){

$result = $db->query("SELECT * FROM Jobs");//error on this line
if($result){

    while ($row = $result->fetch_array()){
    $jobs[$row['PMINumber']] = $row['Address'];
    }
    //$result->close();
        //$db->next_result();
}

$result = $db->query("SELECT * FROM Installers ORDER BY `Order` ASC");
if($result){

    while ($row = $result->fetch_array()){
    $installers[] = $row['Names'];
    }
    //$result->close();
        //$db->next_result();
}
echo json_encode(array($jobs, $installers));
return true;

}} 
```

`PHP Fatal error: Call to a member function query() on a non-object` 运行此脚本时出现错误。$db 确实是一个对象，我已经在其他函数中成功使用过它，所以问题必须出在函数本身。我是 php 新手，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:47:10.683

正如许多人已经指出的那样，这是一个范围界定问题。

如果您出于某种原因想要坚持使用全局`$db`变量（**这绝对不是最好的方法**），那么您应该使用**[global](http://php.net/manual/en/language.variables.scope.php)**关键字来显式定义`$db`所有依赖它的函数的范围，如下所示：

```
function connect(){
    global $db;
    //your code
}

function downloadData(){
    global $db;
    //your code
}

function disConnect(){
    global $db;
    //your code
} 
```

但更好的方法是返回一个 $db from`connect()`并将其传递给`downloadData()`and`disConnect()`

```
function connect(){
    $db = new mysqli(...);
    ...
    return $db
}

function downloadData($db){
    ...
}

function disConnect($db){
    ...
}

$db = connect();
if (!downloadData($db)) {
    //
}
disConnect($db); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:44:22.507

您的`$db`变量是`connect`函数的本地变量。您要么需要使用`$db`（不是一个好主意）的全局实例，要么从函数返回变量，并在调用范围内跟踪它：

```
function connect() {
  $db = new mysqli(localhost, bludevel_PMI, password1, bludevel_PMIForm);
  // ...
  return $db;
} 

function disconnect($db) {
  mysqli_close($db);
}

$db = connect(...);

// Later..

disconnect($db); 
```

# jquery - 可拖动内容位于可编辑 div 下方？

> ID：15047058
> 
> 赞同：1
> 
> 时间：2013-02-23T23:43:42.813
> 
> 标签：jquery, html, contenteditable

试图让可拖动的图像放入内容可编辑的 div 中。出于某种原因，可拖动图像位于内容可编辑 div 下方。如果需要像 css html jquery 文件一样解决问题，我可以提供更多信息。

这是一个两秒钟的视频，向您展示我在说什么。 [http://www.youtube.com/watch?v=wESXVkfDUzE](http://www.youtube.com/watch?v=wESXVkfDUzE)

谢谢，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:43:11.147

`draggable`有一个`stack`选项和一个`zIndex`选项。

这两个之一将解决您的问题。

API 参考：http: [//api.jqueryui.com/draggable/#option-stack](http://api.jqueryui.com/draggable/#option-stack)

# sockets - 使用套接字向客户端发送定期消息的最佳方式

> ID：15047062
> 
> 赞同：0
> 
> 时间：2013-02-23T23:43:50.087
> 
> 标签：sockets

有一个应用程序需要向一堆客户端发送消息。客户端是用户计算机上的应用程序，这些应用程序有时一次运行数天。服务器要么有新的指令，要么没有。有时两条新指令之间有 10 分钟的间隔，有时是一小时，有时是一天。消息是固定长度的。

实现这一点的最佳方法是什么？我应该让客户端每 10 秒轮询一次服务器吗？每次新客户端连接时我是否应该在服务器上创建一个新线程，并保持连接直到有新指令，然后将其发送给客户端并让客户端创建一个新连接？

还是我应该将消息推送给客户？我正在考虑如何做到这一点，我想出了这个：服务器服务器既是服务器又是客户端。当客户端握手时，它会将其地址提供给服务器。然后，服务器开始充当客户端（显然，还充当服务器以使其他客户端能够连接），并与客户端保持连接。客户端就像服务器一样，等待消息。

最后一个似乎相当复杂。做这个的最好方式是什么？来自服务器的新消息（“指令”）应该在服务器“拥有”它们之后至少 15 秒到达客户端。

顺便说一下，服务器应用程序将在 Windows 上运行。我不确定的客户，但让我们假设多平台。服务器和客户端应用程序都是用 Python 编写的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:03:51.460

我会让每个客户端打开与服务器的连接，然后等待读取任何数据。只要有消息要发布，服务器就会写入所有连接的客户端。

具体来说，服务器应该`socket()`, `bind()`, `listen()`, 然后进入一个`accept()`循环。对于每一个接受的新客户端，它应该只将连接的套接字添加到活动客户端列表中，而不是读取或写入任何内容（除非可能是初始应用程序级握手或身份验证，如果适用的话；在这种情况下，它应该在单独的线程、分叉进程或非阻塞事件循环中执行握手或身份验证，以避免缓慢的客户端锁定其他正在进行的身份验证甚至接受循环。）

客户端应连接到服务器（并在适用时执行握手或身份验证），然后等待它为他们提供任何数据。客户端在套接字上等待的方式传统上是使用`poll()`or完成的`select()`。这些调用可以在单独的线程或进程中以阻塞方式完成；或以非阻塞方式，在主应用程序循环中或由循环计时器触发。

每当服务器有消息要发布时，它都会遍历已连接的客户端列表，`write()`对每个已连接的客户端执行一条消息。

然后，客户端将从其当前或下一个返回，`poll()`或`select()`指示套接字具有可读数据，并且它们将继续处理`read()`该消息。

# netbeans - 如何删除 Netbeans 编辑器中的左侧填充？

> ID：15047063
> 
> 赞同：1
> 
> 时间：2013-02-23T23:43:54.270
> 
> 标签：netbeans

我已经安装了 Netbeans 来编辑 PHP。

我通过将右红线设置为位置 0 来禁用它，但我看到在行号本身和文本的第 0 列之间的左侧有一个填充。

我找不到任何属性，谷歌也没有在这方面帮助我。

![在此处输入图像描述](../Images/b75be617edf0a6d14cd878038a889410.png)

请帮我删除它，我的宽度空间非常有限，这对我来说是一个中等问题。

我不介意它是作为插件还是某种hack。

提前Ty各位=^_^=

# vb.net - 等到计时器停止继续

> ID：15047065
> 
> 赞同：0
> 
> 时间：2013-02-23T23:43:58.597
> 
> 标签：vb.net, multithreading, visual-studio-2010, visual-studio, timer

我在 Visual Basic 2010 中有一个模拟老虎机的程序。

首先，我生成 3 个从 1 到 9 的随机数，当我想模拟“旋转”时，我决定通过一个循环，其中老虎机水果和事物的图像出现在屏幕上。在这个循环结束后，用户应该得到生成的 1 到 9 个数字的对应图片。

所以我看到最好的想法是设置一个计时器，例如设置一个 100 的间隔并启动它，并在每个滴答声中在屏幕上显示一些随机图像。

但是，当我启动计时器时，它似乎与调用它的主函数平行。我不知道我是否在这里提供信息XD。最好自己找：

```
'CALCULATE WINNING RESULT
valor1 = GeneraAleatorio(1, 9)   -> This custom function returns a random number
valor2 = GeneraAleatorio(1, 9)
valor3 = GeneraAleatorio(1, 9)

Timer1.Enabled = True

'NOW I PUT THE WINNING PICTURES THAT CORRESPOND WITH THE NUMBERS
ColocaImagen(1, valor1)  -> Another custom made function, takes the position (1 to 3) and an image (1 to 9)
ColocaImagen(2, valor2)
ColocaImagen(3, valor3)

'END GAME
End()          -> or whatever 
```

我的 timer_tick 函数是这样的：

```
 If tiempo >= 4000 Then
        Timer1.Enabled = False        ' -> To make it stop when it reaches 4000 (4 seconds)

    ElseIf tiempo <= 3900 Then

        ColocaImagen(1, GeneraAleatorio(1, 9))
        ColocaImagen(2, GeneraAleatorio(1, 9))
        ColocaImagen(3, GeneraAleatorio(1, 9))

        If tiempo >= ProgressBar.Minimum & tiempo <= ProgressBar.Maximum Then
            ProgressBar.Value = tiempo         
        End If

        tiempo = tiempo + 100                  'Tiempo is "time" in Spanish, it increases 100 every 100ms
    End If 
```

似乎当我调用 timer1.enabled = true 时，它​​会以两种方式继续：程序进入刻度功能，但也不会等待计时器停止而走向游戏结束。我想要 4 秒过去，然后显示正确的图片，并执行我想要的任何操作，或显示 msgbox 或其他东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:14:43.130

试试这个：

While (Timer1.Enabled) {} // 会一直阻塞直到定时器结束

```
'CALCULATE WINNING RESULT
valor1 = GeneraAleatorio(1, 9)   -> This custom function returns a random number
valor2 = GeneraAleatorio(1, 9)
valor3 = GeneraAleatorio(1, 9)

Timer1.Enabled = True

While (Timer1.Enabled) {} // Will keep blocking until the timer sets Enabled to false

'NOW I PUT THE WINNING PICTURES THAT CORRESPOND WITH THE NUMBERS
ColocaImagen(1, valor1)  -> Another custom made function, takes the position (1 to 3) and an image (1 to 9)
ColocaImagen(2, valor2)
ColocaImagen(3, valor3)

'END GAME
End()          -> or whatever 
```

启动计时器不会导致程序停止并等待。

还：

> while 循环会在没有 Sleep 的情况下占用 CPU – pinkfloydx33

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:29:58.837

只需创建一个 SubRoutine 并在您的 Timer 达到 4000 时调用它。看看这样的事情是否适合您。

```
Public Class Form1

    Dim valor1 As Integer
    Dim valor2 As Integer
    Dim valor3 As Integer

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        If Timer1.Enabled Then Exit Sub
        'CALCULATE WINNING RESULT
        valor1 = GeneraAleatorio(1, 9)
        valor2 = GeneraAleatorio(1, 9)
        valor3 = GeneraAleatorio(1, 9)
        Timer1.Enabled = True

    End Sub

    Public Sub ShowFinalResult()
        'NOW I PUT THE WINNING PICTURES THAT CORRESPOND WITH THE NUMBERS
        ColocaImagen(1, valor1)
        ColocaImagen(2, valor2)
        ColocaImagen(3, valor3)
    End Sub

    Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
        Static tiempo As Integer
        Timer1.Enabled = False
        If tiempo >= 4000 Then
             tiempo = 0
             ShowFinalResult()

        ElseIf tiempo <= 3900 Then

            ColocaImagen(1, GeneraAleatorio(1, 9))
            ColocaImagen(2, GeneraAleatorio(1, 9))
            ColocaImagen(3, GeneraAleatorio(1, 9))

            tiempo = tiempo + 100 

            If tiempo >= ProgressBar1.Minimum And tiempo <= ProgressBar1.Maximum Then ProgressBar1.Value = tiempo

            Timer1.Enabled = True
        End If

    End Sub

End Class 
```

# r - 将 R 坐标值对转换为稀疏矩阵

> ID：15047070
> 
> 赞同：3
> 
> 时间：2013-02-23T23:44:32.997
> 
> 标签：r, matrix, sparse-matrix

我无法将我的数据集加载到 R 中的稀疏矩阵中。我正在使用 Matrix 包。我拥有的数据格式为`x y value`. 例如：

```
 V1 V2 V3
  1  2  .34
  7  4  .56
  4  5  .62 
```

我想做相当于

```
myMatrix[1,2] = .34
myMatrix[7,4] = .56 
myMatrix[4,5] = .62 
```

以自动化的方式。

我想做类似的事情：

```
myMatrix = Matrix(nrow=numrows, ncol=numcols)
myMatrix[mydata[1:numrows, 1], mydata[1:numrows, 2]] <- mydata[1:numrows, 3] 
```

但是当我需要一个数字矩阵时，这会使我的矩阵成为 lgeMatrix。

我也试过：

```
myMatrix = Matrix(nrow=numrows, ncol=numcols)
for(i in 1:numrows){
    myMatrix[mydata[i, 1], mydata[i, 2]] <- mydata[i, 3]
} 
```

这会创建我想要的那种矩阵，但它需要的时间太长（超过 5 分钟）。我知道它有效，因为当我停止它时，我会检查前几个值并且它们是正确的，但最后一个值是 NA。我正在使用具有 247158 个值的 7095 x 5896 矩阵输入，所以 for 循环是不可能的，除非我只是不耐烦。

我的问题是：在 R 中执行此操作的首选方法是什么？

更新：

我想通了，`sparseMatrix`而不是使用：

```
myMatrix = sparseMatrix(i = mydata[1:numrows,1], j = mydata[1:numrows,2],
                     x = mydata[1:numrows,3]) 
```

没看懂其他[帖子](https://stackoverflow.com/questions/1274171/creating-and-accessing-a-sparse-matrix-in-r)`sparseMatrix`的用法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T09:51:41.513

假设这是一个名为 dat 的数据框：

```
myMatrix = Matrix(0, nrow=10, ncol=10)
# Notice that you need to specify zero values to make it sparse.
myMatrix[cbind(dat$V1, dat$V2)] <- dat$V3
myMatrix
#--------------
10 x 10 sparse Matrix of class "dgCMatrix"

 [1,] . 0.34 . .    .    . . . . .
 [2,] . .    . .    .    . . . . .
 [3,] . .    . .    .    . . . . .
 [4,] . .    . .    0.62 . . . . .
 [5,] . .    . .    .    . . . . .
 [6,] . .    . .    .    . . . . .
 [7,] . .    . 0.56 .    . . . . .
 [8,] . .    . .    .    . . . . .
 [9,] . .    . .    .    . . . . .
[10,] . .    . .    .    . . . . . 
```

# spring - 编译时编织空指针异常

> ID：15047071
> 
> 赞同：0
> 
> 时间：2013-02-23T23:44:55.580
> 
> 标签：spring, aspectj, autowired, configurable, compile-time-weaving

# 编辑 7：

问题似乎是如何`@Configurable`使用`HttpSessionListener`，建议使用解决方法，但我不想`WebApplicationContext`直接与：

```
 @Configurable(autowire = Autowire.BY_TYPE, preConstruction = true)
    public class SessionListener implements HttpSessionListener {

        private static final Logger log;

        @Autowired
        private A a;

        @Override
        public void sessionCreated(HttpSessionEvent se) {
            a.doSomething(); // <- Throws NPE
            log.info("New session was created");
        }

        @Override
        public void sessionDestroyed(HttpSessionEvent se) {
            log.info("A session was closed");
        }
    } 
```

# 编辑6：

我简化了示例项目：您现在可以从 CLI 运行它

1.  下载解压项目：[http ://www.2shared.com/file/KpS5xeqf/dynatable.html](http://www.2shared.com/file/KpS5xeqf/dynatable.html)
2.  运行 mvn clean aspectj:compile
3.  运行 mvn gwt:run
4.  您应该在 CLI 中看到“为什么这里的消费者为 NULL？” 被打印。
5.  期望的是：cunsumer 不是 NULL！

快结束了:D

# 编辑 5：GWT 中的示例项目：请在 GWT 开发模式下运行它

[http://www.2shared.com/file/eai0PV-5/dynatable.html](http://www.2shared.com/file/eai0PV-5/dynatable.html)

您将在 sessionCreated() 获得 NPE

运行要求是 maven + gwt 2.5

# 编辑4：

示例项目似乎不是一个很有代表性的项目。我应该重新表述问题：

在 Eclipse 中，当我将项目作为 Web 应用程序运行时，我使用 GWT 开发模式。在某种程度上，这不会调用 aspectj 编译器。至少这是我能想到的唯一原因。

**问题：如何设置编译时间编织以作为 Web 应用程序运行（GWT 开发模式）。？**

# 编辑3：

**我在Eclipse 4.2.1、M2e 1.4.0、STS 3.1.0、AJDT 2.2.2**中制作了一个小示例项目来演示该问题：**[http ://www.2shared.com/file/WZ1T9l9-/autowired.html](http://www.2shared.com/file/WZ1T9l9-/autowired.html)**

# 编辑2：

正如其他类似主题所建议的那样，我采用了标准生成`Roo`项目的插件以避免版本冲突。还没有成功。（更新了上面的 org.codehaus.mojo）

# 编辑1：

我不确定这是否正常，但是当我启动 Web 应用程序时，我得到了很长的关于 spring 正在做什么的日志，**但没有提到任何编织/与 Aspectj 相关的任何内容**......

我认为问题与 pom.xml 中的这个插件没有被编译有关，因为**我在控制台中没有得到任何反馈**（我尝试了许多其他类似的插件，但没有任何工作）当我运行网络时似乎从未调用过该插件应用：

```
<plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>aspectj-maven-plugin</artifactId>
                    <version>1.2</version>
                    <!-- NB: do not use 1.3 or 1.3.x due to MASPECTJ-90 and do not use 1.4 
                        due to declare parents issue -->
                    <dependencies>
                        <!-- NB: You must use Maven 2.0.9 or above or these are ignored (see 
                            MNG-2972) -->
                        <dependency>
                            <groupId>org.aspectj</groupId>
                            <artifactId>aspectjrt</artifactId>
                            <version>1.7.0</version>
                        </dependency>
                        <dependency>
                            <groupId>org.aspectj</groupId>
                            <artifactId>aspectjtools</artifactId>
                            <version>1.7.0</version>
                        </dependency>
                    </dependencies>
                    <executions>
                        <execution>
                            <goals>
                                <goal>compile</goal>
                                <goal>test-compile</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <outxml>true</outxml>
                        <aspectLibraries>
                            <aspectLibrary>
                                <groupId>org.springframework</groupId>
                                <artifactId>spring-aspects</artifactId>
                            </aspectLibrary>
                        </aspectLibraries>
                        <source>1.6</source>
                        <target>1.6</target>
                    </configuration>
                </plugin> 
```

# 原帖：

我一直在搜索 stackoverflow 和许多其他资源，但他们的标准解决方案都没有帮助我找到为什么一个`@autowired`字段`Null Pointer Exception (NPE)`在访问时会屈服。

```
@Configurable(autowire = Autowire.BY_TYPE, preConstruction = true)
public class SessionListener implements HttpSessionListener {

    private static final Logger log;

    @Autowired
    private A a;

    @Override
    public void sessionCreated(HttpSessionEvent se) {
        a.doSomething(); // <- Throws NPE
        log.info("New session was created");
    }

    @Override
    public void sessionDestroyed(HttpSessionEvent se) {
        log.info("A session was closed");
    }
} 
```

A类声明如下：

```
@Service
public class B implements A {
// some implementation
} 
```

我的应用程序上下文具有相关部分：

```
<context:spring-configured />
<context:annotation-config />
<context:component-scan base-package='some.package' /> 
```

所有必要的库都在那里。我使用 Spring 3.0.2。由于我的环境，我只能使用编译时编织。我还使用 Google 插件启动 GWT 开发模式。我正在使用`ADJT`、`Spring Tool Suite`和。我还为 m2e v1.0 安装了 AJDT 配置器。`m2Eclipse``Google Plugin`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:23:33.307

您的 App.main() 方法没有创建 ApplicationContext 开始（JUnit 测试很好，因为它使用 @ContextConfiguration 进行了注释）。为了以编程方式创建它，将以下行添加到您的 main 方法中：

```
public class App {      
    public static void main( String[] args ) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext("foo/application-context.xml");

        new ServiceTest().doSomething();
    }
} 
```

## EDIT1：下面的静态解决方案。

缺少 2 个依赖项：

```
<dependency>
  <groupId>org.springframework.security</groupId>
  <artifactId>spring-security-aspects</artifactId>
  <version>${org.springframework.version}</version>
</dependency>
<!-- https://jira.springsource.org/browse/SPR-6819 -->
<dependency>
  <groupId>javax.persistence</groupId>
  <artifactId>persistence-api</artifactId>
  <version>1.0</version>
  <scope>provided</scope>
</dependency> 
```

我还将*ajdtBuildDefFile*插件参数（该文件未包含在存档中）替换为：

```
<includes>
  <include>**/*.java</include>
</includes> 
```

以这种方式调整 pom.xml 后，编译和测试通过：

```
mvn clean aspectj:compile test 
```

## EDIT1：此解决方案与动态编织有关，但事实并非如此。

要回答您的具体问题，请将其添加到您的 application-context.xml：

```
<context:load-time-weaver /> 
```

VM 还需要一个额外的运行时参数：

```
-javaagent:/full/path/to/spring-instrument-3.0.5.RELEASE.jar 
```

## EDIT2：关于 GWT 应用程序

坦率地说，我不确定为什么 aspectj 插件不适用于您的配置。如果您不介意快速解决方法，则只需使用 WebApplicationContextUtils：

```
@Override
public void sessionCreated(HttpSessionEvent se) {       
  consumer = WebApplicationContextUtils.getWebApplicationContext(se.getSession().getServletContext()).getBean(IConsumer.class);
  ...
} 
```

# android - Google Drive Android SDK 在文件上传时不断崩溃

> ID：15047076
> 
> 赞同：2
> 
> 时间：2013-02-23T23:45:25.620
> 
> 标签：android, google-drive-api

我正在做一个项目，我正在测试实现 Google Drive SDK，但是在尝试在 SD 卡上上传文件时遇到问题。

上传完成后出现错误

```
02-23 23:38:54.960: E/AndroidRuntime(9160): FATAL EXCEPTION: Thread-2652
02-23 23:38:54.960: E/AndroidRuntime(9160): java.lang.NullPointerException
02-23 23:38:54.960: E/AndroidRuntime(9160):     at java.net.URI.parseURI(URI.java:353)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at java.net.URI.<init>(URI.java:204)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:100)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at com.BoardiesITSolutions.googledrivetest.MainActivity$3.run(MainActivity.java:127)
02-23 23:38:54.960: E/AndroidRuntime(9160):     at java.lang.Thread.run(Thread.java:856) 
```

下面是我用来执行上传的代码

```
private void saveFileToDrive()
    { 
        Thread thread = new Thread(new Runnable() {

            @Override
            public void run() {
                try
                {
                    String storageDir = Environment.getExternalStorageDirectory().getPath();
                    fileUri = Uri.fromFile(new java.io.File(storageDir + "/BoardiesPasswordManager/android_download.xml"));
                    java.io.File fileContent = new java.io.File(fileUri.getPath());
                    FileContent mediaContent = new FileContent("text/xml", fileContent);

                    com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
                    body.setTitle("Boardies Password Manager");
                    body.setMimeType("text/xml");

                    com.google.api.services.drive.model.File file = service.files().insert(body, mediaContent).execute();
                    //Update file = service.files().update(body.getId(), body, mediaContent);
                    if (file != null)
                    {
                        //Toast.makeText(MainActivity.this, "File Uploaded: " + file.getTitle(), Toast.LENGTH_LONG).show();
                        Log.d("GoogleDrive", "File Uploaded");
                    }

                }
                catch (UserRecoverableAuthIOException e)
                {
                    startActivityForResult(e.getIntent(), REQUEST_AUTHORISATION);
                }
                catch (IOException e)
                {
                    e.printStackTrace();
                }
            }
        });
        thread.start();
    } 
```

我相信崩溃发生在以下行：

```
com.google.api.services.drive.model.File file = service.files().insert(body, mediaContent).execute(); 
```

我不明白为什么会发生这种情况，并且该错误并不过分有用。我不是 Null 作为`fileContent`and`mediaContent`并且`fileUri`不为 null 的东西。

它成功询问我要使用哪个帐户，并询问我是否要授予上传权限，因此我看不出有什么问题。

感谢您的任何帮助，您可以提供。

仅供参考，我使用了来自[https://developers.google.com/drive/quickstart-android#step_2_enable_the_drive_api的教程](https://developers.google.com/drive/quickstart-android#step_2_enable_the_drive_api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:40:52.317

我设法找到了问题，但 Edward van Raak 确实提供了帮助。

正如建议的那样，问题的一部分与我正在使用的不同开发 PC 有关，我忘记向 API 控制台添加不同的客户端 SHA1 指纹。但是，这并没有解决问题，因为引发了相同的异常。

然后我删除了 Google Play Services jar 文件并删除了 Google Drive API（注意你现在会得到构建错误）。

然后我重新添加了 google play services jar 文件并使用 Google API Eclipse 插件重新添加了 google drive API 并重新构建了项目，现在我可以再次成功上传文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:19:09.373

不确定我是否可以提供帮助，但这似乎是来自 API 内部的授权失败问题，而不是来自您的代码。

检查 API 控制台中的凭据、包名称和 SHA1 指纹，并确保它们正确无误。您使用的是最新版本的客户端库吗？

# clojure - 更新数据库函数clojure

> ID：15047082
> 
> 赞同：0
> 
> 时间：2013-02-23T23:46:34.470
> 
> 标签：clojure, functional-programming

我正在尝试构建一个类似于 SQL 的函数：

```
UPDATE Persons SET Address=Martin20, City=Miami WHERE LastName=Darmon AND FirstName=Gilad 
```

我已将 SET 和 Where 解析为地图和列表。
现在我想更新我拥有的表。但是我遇到了一个错误

```
Exception in thread "main" setMap #<Ref@6bad186f: [:Address Martin20 :City Miami]>
whereList #{0}
java.lang.ClassCastException: clojure.lang.Keyword cannot be cast to java.util.Map$Entry
    at clojure.lang.APersistentMap$KeySeq.first(APersistentMap.java:132)
    at clojure.lang.RT.first(RT.java:559)
    at clojure.core$first.invoke(core.clj:55)
    at ClojureSQL$UpdateRecord.invoke(project.clj:205)
    at ClojureSQL$UpdateTable.invoke(project.clj:253)
    at ClojureSQL$Execute.invoke(project.clj:285)
    at ClojureSQL$eval1340.invoke(project.clj:312) 
```

这是为更新函数设置参数的函数：

```
;UpdateTable function
(defn UpdateTable [updateQuery]
  "The UPDATE statement is used to update existing records in a table"
  (println "UPDATE ")
  (let [SpecificGetTableName (CreateGetTableNameFunc #"UPDATE ([_0-9a-zA-Z]+)") 
        tableName (SpecificGetTableName updateQuery)
        whereList (ListRecordsMatchConditions updateQuery tableName)        ; return the row numbers in which we need to update 
        setMap    (GetValuesFromSetCommand updateQuery)]
    (UpdateRecord tableName whereList setMap)
  )
) 
```

该错误在doseq函数中：

```
;update specific table records (from whereList) with new values (from setMap)
(defn UpdateRecord [tableName whereList setMap]
  "Insert values into table in order of keys / columns"
  (println "setMap" setMap)
  (println "whereList" whereList)
  (let [tableRef (get (deref dataBase) tableName)]        
    (doseq [curKey (keys @setMap) i whereList]         ; <-here is the BUG

       (dosync (alter (tableRef curKey) assoc i val))  ; perfrom thread safe insert of value to column
    )
    (println tableRef) 
  )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:24:28.830

您的`setMap`ref 包装了一个矢量，而不是一个地图。该`keys`函数从映射返回一个键序列，而不是一个向量。您需要更改 setMap 以包装地图：

```
(ref {:Address "Martin20" :City "Miami"}) 
```

# joomla - Joomla 无效令牌消息

> ID：15047085
> 
> 赞同：0
> 
> 时间：2013-02-23T23:47:01.050
> 
> 标签：joomla, token

自从这项新的欧盟 cookie 隐私法出台以来，我不得不在我的网站上实施一个插件，以阻止我网站上的所有 cookie，直到用户接受。这里的问题是，一些用户不接受 cookie，但即便如此，他们还是尝试登录，然后他们得到带有无效令牌消息的空白页面。该无效令牌消息没有什么好处，我想将收到此消息的用户重定向到 ustom 页面，我设法找到了代码，但我只是不知道如何更改它以重定向用户，代码如下：

```
function login()
    {
        // Check for request forgeries
        JRequest::checkToken('request') or jexit( 'Invalid Token' );

        global $mainframe;

        if ($return = JRequest::getVar('return', '', 'method', 'base64')) {
            $return = base64_decode($return);
            if (!JURI::isInternal($return)) {
                $return = '';
            }
        } 
```

我相信我必须使用“标题：位置”的东西，但只是不知道如何在当前代码上实现它。

希望有人能指出我的线索

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:33:16.170

您可以使用 Joomla 重定向功能。

```
function login()
    {
        // Check for request forgeries
        if(!JRequest::checkToken('request')) {
            $app = JFactory::getApplication();
            $app->redirect('index.php', 'Invalid token. You must accept cookies in order to use this website'); 
        }

        global $mainframe;

        if ($return = JRequest::getVar('return', '', 'method', 'base64')) {
            $return = base64_decode($return);
            if (!JURI::isInternal($return)) {
                $return = '';
            }
        } 
```

# cakephp - 是否可以使用 HtmlHelper 中的图像方法从 CakePHP 的文件目录中获取图像

> ID：15047086
> 
> 赞同：0
> 
> 时间：2013-02-23T23:47:22.670
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.3

我有一个上传助手，可以将文件上传到文件中的特定目录，例如`webroot/files/images/upload/{id}`. 是否可以使用 htmlhelper 的 image 方法来获取这些文件？

现在我正在使用这段代码来检索它们，但每次看到它都会伤害我的眼睛：

`<img src="<?php echo Helper::webroot('files/image/upload/' . $image['dir'] . '/' . $image['upload']); ?>" />`

无论如何将图像上传到文件目录是可能的还是不好的做法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:57:01.847

是的，您只是错过了在原始示例中以“/”开头的路径。

`echo $this->Html->image('/files/image/upload/' . $image['dir'] . '/' . $image['upload']);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T23:58:49.733

在源中进行了一些搜索后，事实证明这是可能的，您必须设置`pathPrefix`选项

像这样：

`<?php echo $this->Html->image($image['upload'], array('pathPrefix' => 'files/image/upload/' . $image['dir'] . '/')); ?>`

# database - 引用连接表中的多个（或所有）行

> ID：15047087
> 
> 赞同：0
> 
> 时间：2013-02-23T23:47:26.187
> 
> 标签：database, join, relational-database

首先，我对数据库设计相当陌生，所以我希望我的问题是有意义的。我正在尝试设计一个关系数据库，它将一个表中的行连接到另一个表中的行。容易吧？好吧，我有点难过，因为在某些情况下，一行需要引用单独表中的每一行。

以啤酒食谱为例。

有一系列成分表（其中一个是*谷物表*）和一个单一的啤酒*样式表*。*谷物样式表*旨在链接*谷物表*和*样式表*，以显示适合每种啤酒样式的谷物。

*餐桌谷物*

```
id      name                Price
----------------------------------
0       German grain        1.20
1       Regular grain       1.00
2       Wheat               0.90
3       American grain      1.00 
```

*表格样式*

```
id      name                 % Alcohol
--------------------------------------
0       German beer          6
1       Australian beer      4
2       American beer        3
3       Generic Beer         5 
```

*表粒样式*

```
id      style_id             grain_id
-------------------------------------
0       0                    0
1       0                    1
2       0                    2
3       1                    1 
```

这是我在这里看到的三种情况：

**情景 1：**某些谷物仅适用于某些啤酒风格。德国谷物只适用于德国啤酒。

**场景 2：**某些谷物适用于所有啤酒风格。普通谷物可用于德国啤酒、美国啤酒或任何其他风格。

**场景 3：**所有颗粒都适用于特定样式。德国谷物、普通谷物或任何其他谷物都可用于通用啤酒。

*在Grains-Styles Table*中创建大量行似乎效率低下。style_id AND/OR grain_id 列中是否有与通配符值等效的内容？

我该如何解决这个问题？这个概念叫什么？只是有点迷失在这里，当然在我头上。提前感谢您可能提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:54:12.920

那是[多对多的关系](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)，我不认为它是低效的。由于元组`(style_id, grain_id)`也是唯一的，您可以将其用作主键并删除`id`列。

# git - Git 使用现有文件

> ID：15047091
> 
> 赞同：2
> 
> 时间：2013-02-23T23:48:09.993
> 
> 标签：git

我有一个团队成员有带宽限制，无法从我们的 Git 主机下载文件和 repo。但是，他的计算机上确实有非 git 文件（最新版本）。我需要他能够使用现有文件连接到 git 存储库，因此他只需下载差异。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-23T23:56:14.540

不，这是不可能的。操作的核心`git`是 git 对象存储，你在 git 中所做的一切都需要它。拥有不受 git 控制的大文件并不能帮助 git 获得 git 对象存储的完整副本。`.git`在子目录中存在 git 对象存储的完整副本之前，git 不会将给定目录视为 git 存储库。

通常，为了加速第一次克隆，它有助于`git gc`在服务器上执行（甚至可能在 cron 作业中），因此 git repo 包装得很好。

此外，您可以创建[git 包](http://git-scm.com/2010/03/10/bundles.html)并使用其他协议（HTTP、FTP、DVD、硬盘驱动器等）发送此包的副本。例如，Android 项目正在使用这种技术来加快第一次 repo 同步工作。收到捆绑包后，您可以从中克隆，最后添加原始遥控器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T23:55:57.053

除非您有很多经常更改的二进制文件，否则 git 存储库比文件小，因为数据存储非常有效。如果他不能通过网络下载存储库，你可以在 CD、记忆棒等上放一个 repo 克隆。当他有 repo 时，他可以签出文件。当他通过网络轻松地仅发送差异或通过电子邮件发送补丁时。

# database - Haskell / Persistent-Sqlite：“（Control.Monad.Trans.Resource.MonadResource IO）没有实例”

> ID：15047095
> 
> 赞同：9
> 
> 时间：2013-02-23T23:49:01.987
> 
> 标签：database, haskell, yesod

我一直在尝试想出一种简单直观的方式来使用 Haskell 中的数据库。我从[Yesod 书中](http://www.yesodweb.com/book/persistent)获取了这段代码，并尝试对其进行清理，以便更容易理解和使用。

```
{-# LANGUAGE QuasiQuotes, TemplateHaskell, TypeFamilies, OverloadedStrings #-}
{-# LANGUAGE GADTs, FlexibleContexts #-}

import Database.Persist
import Database.Persist.Sqlite (withSqliteConn, runSqlConn, runMigration)
import Database.Persist.TH (share, mkPersist, mkMigrate, sqlSettings, persist)

share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persist|
Person                              -- Table name
    name String                     -- String value
    age Int Maybe                   -- Numerical value
|]

updateDB x y = withSqliteConn "data.db" $ runSqlConn $ do
    runMigration migrateAll         -- Creates "Person" table if one doesn't exist
    insert $ Person x $ Just y      -- Inserts values into .db file

main = do
    updateDB "Frank Silver" 40      -- adds name "Frank Silver" and age "40" to data.db file 
```

这段代码*几乎*可以工作，但我收到以下我无法解决的错误。

```
No instance for (Control.Monad.Trans.Resource.MonadResource IO)
      arising from a use of `updateDB'
    Possible fix:
      add an instance declaration for
      (Control.Monad.Trans.Resource.MonadResource IO)
    In a stmt of a 'do' block: updateDB "Frank Silver" 40
    In the expression: do { updateDB "Frank Silver" 40 }
    In an equation for `main': main = do { updateDB "Frank Silver" 40 } 
```

任何指出我正确方向的建议将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T00:13:23.260

和

```
main = do
    updateDB "Frank Silver" 40 
```

的类型`updateDB "Frank Silver" 40`被推断为`IO ()`，因为这是默认类型`main`（它必须具有`IO a`some的类型`a`）。但是从定义来看，它的类型被推断为`MonadRescource m => m a`对于某些`a`（可能是`a = ()`，但我不确定），并且没有`instance MonadResource IO`. 所以你需要一些东西来将 a 转换`updateDB`为一个`IO`动作，通常的方法是`runResourceT`，它将 a`ResourceT m a`转换为一个`m a`（这里`m = IO`），所以

```
main = runResourceT $ updateDB "Frank Silver" 40 
```

作品。

# javascript - 使用 Knockout 计算的 ko.computed 内部模型不刷新

> ID：15047098
> 
> 赞同：0
> 
> 时间：2013-02-23T23:50:00.280
> 
> 标签：javascript, jquery, knockout.js

我使用这个修改后的示例代码从 twitter api 中提取一些数据并将结果设置为 viewModel

```
var myModel = new MyViewModel();
// Handler for .ready() called.
function MyViewModel(){

      this.show_search = ko.observable(true); // Message initially visible
      this.show_player = ko.observable(false);  // Message initially visible 

      this.tweetSearchKeyWord = ko.observable("google");
      this.currentTweets = ko.observableArray([]);

      this.showSearch = function(){

        this.show_search(true);
        this.show_player(false);
      };

      this.showPlayer  = function(){

        this.show_search(false);
        this.show_player(true);
      };
};

ko.computed(function () {
  $.getJSON("http://search.twitter.com/search.json?q=%23" +     myModel.tweetSearchKeyWord()+"&callback=?", function (data) {

      theData = data.results;
      myModel.currentTweets(theData);

  });
}, viewModel );

ko.applyBindings( myModel ); 
```

数据接收良好，data.results 显示 Array[15]

但是在我将它设置为模型之后

```
myModel.currentTweets(theData); 
```

myModel.currentTweets 反映为一个空数组 []

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:52:44.353

There is no any need to use ko.computed because it works differently. What you need to do is just to specify any event handler and fill up the data there. Something like that:

somewhere in html:

```
<button data-bind="click:getData">Get</button> 
```

in js:

```
function getData()
{
    $.getJSON("http://search.twitter.com/search.json?q=%23" +            myModel.tweetSearchKeyWord()+"&callback=?", function (data) {

      myModel.currentTweets(data.results);

  });
} 
```

Or, if you want to update data after the definite time interval, use setTimeout() JavaScript function.

# asp.net - 检查 Web 应用程序页面内存消耗

> ID：15047102
> 
> 赞同：0
> 
> 时间：2013-02-23T23:51:11.707
> 
> 标签：asp.net, memory, web, stack

我在 Visual Studio 2010 中有一个使用 asp.net 4.0 制作的 Web 应用程序。该应用程序在安装了 2gb 内存的 windows server 2012 上运行，操作系统占用了大约 40-50% 的内存。

当涉及到内存消耗时，所有页面都很好，但是有一个页面我知道它是其中最大的页面，当我第一次访问它时，它需要大约 10 秒来加载和来自服务器的内存（如所见在任务管理器中）从 50% 快速上升到 80%。之后我收到一个关于堆栈已满的错误（登录服务器上的日志文件）。

我认为这是因为内存消耗太高，所以在我购买更多 RAM 之前，我需要知道如何在 Visual Studio 中查看和修复这个问题。会话状态中只有很少的数据，所以它不是罪魁祸首。这可能是由太多变量、DataTables 和 sql 查询引起的……我没有在数据表中存储很多数据。

如果我能看到所有的集合和变量它们使用了多少内存，那就太好了……任何帮助将不胜感激。谢谢。

编辑：确切的错误是：**堆栈不足，无法继续安全地执行程序。这可能是由于调用堆栈上有太多函数或堆栈上的函数使用了太多堆栈空间。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T22:16:33.620

我刚买了更多的内存，问题就消失了。我不认为该页面存在特定问题。它使用了超过 600 MB 的 RAM（第一次渲染时 - 大页面），这就是为什么服务器上只有 2 GB 的 RAM 对我的应用程序来说是不够的。

# java - 播放解码的 Speex 数据时，我听到的都是静态的

> ID：15047108
> 
> 赞同：2
> 
> 时间：2013-02-23T23:51:50.600
> 
> 标签：java, voip, jspeex

我正在学习如何将 JSpeex 用于 VoIP 应用程序，稍后我将出于教育目的编写该应用程序。为了了解如何使用 JSpeex，我决定编写一个简单的 echo 应用程序。基本上，它从音频输入线读取输入，对数据进行编码（使用 Speex），然后*解码*数据，并将其写入音频输出线。但是，当我运行应用程序时，我听到的都是静态的，没有任何声音。我试图修改音频格式，我如何初始化解码器和编码器，所有这些我都没有运气。任何人都可以查看代码并尝试指出我做错了什么吗？谢谢。

代码：

（有没有更好的粘贴代码的方法？因为当我粘贴时，将其全部突出显示，然后按“代码”按钮，缩进就会变得混乱。）

```
import java.util.Arrays;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.TargetDataLine;

import org.xiph.speex.SpeexDecoder;
import org.xiph.speex.SpeexEncoder;

public class SpeexTest {

    public static void main(String[] args) throws Exception {
    int sample_rate = 8000;
    int sample_size = 16;
    int channels = 1;
    AudioFormat format = new AudioFormat(sample_rate, sample_size,
        channels, true, true);
    TargetDataLine line_in;
    DataLine.Info info_in = new DataLine.Info(TargetDataLine.class, format);
    try {
        line_in = (TargetDataLine) AudioSystem.getLine(info_in);
        line_in.open(format);
    } catch (LineUnavailableException ex) {
        ex.printStackTrace();
        return;
    }
    DataLine.Info info_out = new DataLine.Info(SourceDataLine.class, format);
    SourceDataLine line_out;
    try {
        line_out = (SourceDataLine) AudioSystem.getLine(info_out);
        line_out.open(format);
    } catch (LineUnavailableException ex) {
        ex.printStackTrace();
        return;
    }
    SpeexEncoder encoder = new SpeexEncoder();
    SpeexDecoder decoder = new SpeexDecoder();
    encoder.init(1, 1, sample_rate, channels);
    decoder.init(1, sample_rate, channels, false);
    int raw_block_size = encoder.getFrameSize() * channels
        * (sample_size / 8);
    byte[] buffer = new byte[raw_block_size * 2];
    line_in.start();
    line_out.start();
    while (true) {
        int read = line_in.read(buffer, 0, raw_block_size);
        if (!encoder.processData(buffer, 0, raw_block_size)) {
        System.err.println("Could not encode data!");
        break;
        }
        int encoded = encoder.getProcessedData(buffer, 0);
        System.out.println(encoded
            + " bytes resulted as a result of encoding " + read
            + " raw bytes.");
        byte[] encoded_data = new byte[encoded];
        System.arraycopy(buffer, 0, encoded_data, 0, encoded);
        decoder.processData(encoded_data, 0, encoded);
        byte[] decoded_data = new byte[decoder.getProcessedDataByteSize()];
        int decoded = decoder.getProcessedData(decoded_data, 0);
        System.out.println(decoded
            + " bytes resulted as a result of decoding " + encoded
            + " encoded bytes.");
        line_out.write(decoded_data, 0, decoded);
    }
    }
} 
```

这是一些输出（总是重复）：

```
15 bytes resulted as a result of encoding 640 raw bytes.
640 bytes resulted as a result of decoding 15 encoded bytes. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T16:41:38.833

JSpeex 输入/输出是小端的。在编码之前/解码之后交换字节，或者打开`DataLine`s

```
AudioFormat format = new AudioFormat(sample_rate, sample_size,
            channels, true, false); 
```

# java - 为什么 Java 库使用常量整数而不是枚举？

> ID：15047112
> 
> 赞同：7
> 
> 时间：2013-02-23T23:52:30.740
> 
> 标签：java, api, enums, int, constants

我不确定这是否是一个明确的陈述，但在我看来，Java API 更喜欢常量整数而不是枚举。从我使用过的 API 部分中，我遇到了许多可以使用`final static int`an 的常量。`enum`有一次我碰巧在这个时候盯着这样的例子：

从***java.awt.BasicStroke***：

```
public final static int CAP_BUTT = 0;
public final static int CAP_ROUND = 1;
public final static int CAP_SQUARE = 2; 
```

事实上，我认为我从未见过在标准 Java API 类中使用过枚举。为什么是这样？

我正在为我自己的应用程序设计一个 API（比 Java API 小大约十亿倍，但我仍在努力做到聪明），并试图决定是使用常量整数还是枚举。 [这篇](https://stackoverflow.com/questions/14246010/which-is-more-appropriate-for-static-data-final-char-or-enum/14246094#14246094)文章引用了一本我还没有读过的非常受欢迎的书，这意味着枚举有很多优点。同一线程中的大多数其他高分答案都同意。那么为什么 Java 似乎没有使用自己的枚举功能呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-23T23:57:03.247

`BasicStroke`早于 Java 1.5 中的[枚举。](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)为了向后兼容，代码保持*原样*。在编写任何新代码时，`enums`绝对是比`final static`变量更好的设计选择。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-23T23:55:37.600

这与常量 int 比枚举更好无关：只是枚举仅在 JDK 5 中添加，因此大多数 java API 是在枚举可用之前编写的：常量 int 是唯一的选择，因此被使用。

如果 Java API 被重写，它将包含更多的枚举，并且您可以期望看到它们出现在 JDK6 或更高版本的 API 的新添加中。

您可能应该为您的应用程序使用枚举，它们通常是更好的选择。

# python - 斐波那契数的迭代算法

> ID：15047116
> 
> 赞同：20
> 
> 时间：2013-02-23T23:53:01.537
> 
> 标签：python, algorithm, fibonacci

我对斐波那契数的迭代算法感兴趣，所以我在 wiki 上找到了公式……它看起来很简单，所以我在 Python 中尝试了它……编译没有问题，公式看起来正确……不是确定为什么它给出错误的输出......我没有正确实施它吗？

```
def fib (n): 
    if( n == 0):
        return 0
    else:
        x = 0
        y = 1
        for i in range(1,n):
            z = (x + y)
            x = y
            y = z
            return y

for i in range(10):
    print (fib(i)) 
```

输出

> 0
> 无
> 1
> 1
> 1
> 1
> 1
> 1

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-23T23:56:53.823

问题是你`return y`在你的函数循环中。所以在第一次迭代之后，它已经停止并返回第一个值：1。除非`n`是0，在这种情况下，函数会返回`0`自己，如果`n`是1，当for循环甚至不会迭代一次时，并且没有`return`正在执行（因此`None`返回值）。

要解决这个问题，只需移动`return y`循环的外部。

### 替代实施

按照 KebertX 的示例，这是我个人用 Python 制作的解决方案。当然，如果您要处理许多斐波那契值，您甚至可能希望将这两种解决方案结合起来，并为这些数字创建一个缓存。

```
def f(n):
    a, b = 0, 1
    for i in range(0, n):
        a, b = b, a + b
    return a 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T00:36:02.797

您正在循环中返回一个值，因此该函数在 y 的值大于 1 之前退出。

如果我可以建议一些更短、更 Python 的东西：

```
def fibs(n):                                                                                                 
    fibs = [0, 1, 1]                                                                                           
    for f in range(2, n):                                                                                      
        fibs.append(fibs[-1] + fibs[-2])                                                                         
    return fibs[n] 
```

这将与您的算法完全相同，但不是创建三个临时变量，而是将它们添加到列表中，并按索引返回第 n 个斐波那契数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-23T23:58:13.670

在 fib(0) 上，您返回 0，因为：

```
if (n == 0) {
    return 0;
} 
```

在 fib(1) 上，您返回 1，因为：

```
y = 1
return y 
```

在 fig(2) 上，您返回 1，因为：

```
y = 1
return y 
```

...等等。只要`return y`在您的循环内，该函数每次都会在您的 for 循环的第一次迭代时结束。

这是另一个用户提出的一个很好的解决方案： [How to write the Fibonacci Sequence in Python](https://stackoverflow.com/questions/494594/how-to-write-the-fibonacci-sequence-in-python)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T03:48:34.463

```
def fibiter(n):
    f1=1
    f2=1
    tmp=int()
    for i in range(1,int(n)-1):
        tmp = f1+f2
        f1=f2
        f2=tmp
    return f2 
```

或并行分配：

```
def fibiter(n):
    f1=1
    f2=1
    for i in range(1,int(n)-1):
        f1,f2=f2,f1+f2
    return f2 
```

打印纤维(4)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-31T05:33:05.770

[我在另一个线程](https://stackoverflow.com/questions/18172257/efficient-calculation-of-fibonacci-series)上遇到了这个问题，它比我尝试过的任何其他方法都要快得多，并且不会在大量数据上超时。这是数学的[链接。](https://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form)

```
def fib(n):
    v1, v2, v3 = 1, 1, 0  
    for rec in bin(n)[3:]: 
        calc = v2*v2
        v1, v2, v3 = v1*v1+calc, (v1+v3)*v2, calc+v3*v3
        if rec=='1':    v1, v2, v3 = v1+v2, v1, v2
    return v2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-05T07:31:40.510

**这项工作（*直观地*）**

```
def fib(n):
    if n < 2:
        return n
    o,i = 0,1
    while n > 1:
        g = i
        i = o + i
        o = g
        n -= 1
    return i 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-06T17:56:51.247

这个简单但最快的方法怎么样......（我刚刚发现！）

```
def fib(n):
    x = [0,1]
    for i in range(n >> 1):
        x[0] += x[1]
        x[1] += x[0]
    return x[n % 2] 
```

笔记！因此，这个简单的算法只使用了 1 次赋值和 1 次加法，因为循环长度缩短为 1/2，每个循环包括 2 次赋值和 2 次加法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-24T19:11:00.433

```
fcount = 0 #a count recording the number of Fibonacci numbers generated
prev = 0
current = 0
next = 1
ll = 0 #lower limit
ul = 999 #upper limit

while ul < 100000:
    print("The following Fibonacci numbers make up the chunk between %d and %d." % (ll, ul))
    while next <= ul:
        print(next)
        prev = current
        current = next
        next = prev + current
        fcount += 1 #increments count

    print("Number of Fibonacci numbers between %d and %d is %d. \n" % (ll, ul, fcount))        
    ll = ul + 1 #current upper limit, plus 1, becomes new lower limit
    ul += 1000 #add 1000 for the new upper limit
    fcount = 0 #set count to zero for a new batch of 1000 numbers 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-10T10:35:12.617

python中的非递归斐波那契数列

```
def fibs(n):
    f = []
    a = 0
    b = 1
    if n == 0 or n == 1:
        print n
    else:
        f.append(a)
        f.append(b)
        while len(f) != n:
            temp = a + b
            f.append(temp)
            a = b
            b = temp

    print f

fibs(10) 
```

输出：[0、1、1、2、3、5、8、13、21、34]

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-19T21:30:27.950

另一种可能的方法：

```
a=0
b=1
d=[a,b]
n=int(input("Enter a number"))
i=2
while i<n:
    e=d[-1]+d[-2]
    d.append(e)
    i+=1
print("Fibonacci series of {} is {}".format(n,d)) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-08-21T07:53:20.433

假设斐波那契数列的这些值：

F(0) = 0;

F(1) = 1;

F(2) = 1；

F(3) = 2

对于 N > 2 的值，我们将使用以下公式计算斐波那契值：

F(N) = F(N-1) + F(N-2)

我们可以采取的一种迭代方法是计算从 N = 0 到 N = Target_N 的斐波那契，这样我们就可以跟踪 N-1 和 N-2 的斐波那契的先前结果

```
public int Fibonacci(int N)
{
    // If N is zero return zero
    if(N == 0)
    {
        return 0;
    }

    // If the value of N is one or two return 1
    if( N == 1 || N == 2)
    {
       return 1;
    }

    // Keep track of the fibonacci values for N-1 and N-2
    int N_1 = 1;
    int N_2 = 1;

    // From the bottom-up calculate all the fibonacci values until you 
    // reach the N-1 and N-2 values of the target Fibonacci(N)
    for(int i =3; i < N; i++)
    {
       int temp = N_2;
       N_2 = N_2 + N_1;
       N_1 = temp;
    }

    return N_1 + N_2; 
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-08-19T21:15:32.247

可能的解决方案：

```
a=0
b=1
d=[a,b]
n=int(input("Enter a number"))
i=0
while len(d)<n:
    temp=a+b
    d.append(temp)
    a=temp
    b=d[i+1]
    i+=1
print("Fibonacci series of {} is {}".format(n,d)) 
```

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2015-08-23T08:54:25.073

```
import time

a,b=0,1
def fibton(n):
    if n==1:
        time.clock()
        return 0,time.clock()
    elif n==2:
        time.clock()
        return 1,time.clock()
    elif n%2==0:
        read="b"
    elif n%2==1:
        read="a"
    else:
        time.clock()
        for i in range(1,int(n/2)):
            a,b=a+b,a+b
        if read=="b":
            return b,time.clock()
        elif read=="a":
            return.a,time.clock() 
```

免责声明：我目前使用的是移动设备，这可能并不完全正确

该算法利用了其他一些人的差距，现在它的速度实际上是原来的两倍。我不只是设置`b`等于`a`或反之亦然，然后设置`a`为`a+b`，我只用了 2 个字符就做了两次。我还根据我的其他迭代算法的运行情况添加了速度测试。这应该能够在一秒钟内达到大约第 200,000 个斐波那契数。它还返回数字的长度而不是整数，这将永远持续下去。

我的另一个可以转到第二个斐波那契数，如内置时钟所示：在 10^-6 秒内。这个可以在大约 5^-6 内完成。我将很快获得一些更高级的算法，并以最快的速度对其进行改进。

# c++ - 两次连续的套接字读取，第二次读取不起作用

> ID：15047117
> 
> 赞同：0
> 
> 时间：2013-02-23T23:53:25.050
> 
> 标签：c++, c, tcp

下面我有一个来自我的服务器代码和客户端代码的代码段。我的客户端向服务器发送一个整数，服务器成功接收，然后我向服务器发送一个长度为 str_len 的字符串。服务器中的第二次读取不起作用，它正在阻塞并且不读取任何内容。当我退出客户端时，服务器会打印出它没有读取任何内容。怎么了？

```
 //Server code

            bzero(buffer,256);
            n = read(newsockfd,buffer,255);
            if (n < 0) error("ERROR reading from socket");
            unsigned int *length = new unsigned int;
            memcpy(length, buffer, sizeof(int));
            cout << "Length : " << *length << endl;
            int len = *length + 1;
            char buffIn[len+1];
            bzero(buffIn,len);
            //ok msg?
            n = read(newsockfd,buffIn,len);
            if (n < 0) error("ERROR reading from socket");
            cout << "value of n" << n << endl;
            printf("Received : %s\n", buffIn);

            //client method

            void send(string req)
            {
                //Send string len
                unsigned int str_len = req.length();
                //str_len = 3000;
                write(socketFd, &str_len, sizeof(str_len));
                //Send string
                const char *str_req = req.c_str();
                printf("%s\n",str_req);
                cout << "Str len is : " << strlen(str_req) << endl;
                write(socketFd, str_req, strlen(str_req) + 1);
                cout << "write done " << endl;
            } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T00:15:15.140

考虑这一行：

```
n = read(newsockfd,buffer,255); 
```

您永远不会随后检查 的精确值`n`。您检查函数是否失败，但不检查读取了多少字节。提示：在你的情况下，它超过`sizeof (int)`.

试试这个：

```
n = read(newsockfd, buffer, sizeof(int)); 
```

Nb：在其他情况下，也可能小于`sizeof(int)`。你也必须处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:20:33.490

您从套接字读取 255 个字节的 str 长度，从而拉入数据的前 251 个（假设为 32 位整数）。因此，当您要求字符串的其余部分时，您要求额外的 251 个字节未发送，因此读取调用阻塞。

将长度读入整数

```
unsigned int length;
n=read(newsockfd,&length, sizeof(length)); 
```

在您当前的代码片段中，您没有删除长度

```
unsigned int *length = new unsigned int; 
```

这将导致小的内存泄漏。

正如 Rob 在他的回答中所说，您应该检查读取的返回字节数，而不仅仅是检查返回的错误

# python - Python“私有”函数编码约定

> ID：15047122
> 
> 赞同：90
> 
> 时间：2013-02-23T23:54:15.963
> 
> 标签：python, python-2.7, coding-style, naming, conventions

在编写 python 模块和其中的函数时，我有一些应该公开给外部人员的“公共”函数，但还有一些只应该在本地和内部看到和使用的其他“私有”函数。

我知道在 python 中没有绝对的私有函数。但是，区分“公共”功能和“私人”功能的最佳、最简洁或最常用的风格是什么？

我列出了一些我知道的样式：

1.  在模块文件中使用`__all__`以指示其“公共”功能（[python __all__ 模块级变量是什么？](https://stackoverflow.com/questions/2187583/whats-the-python-all-module-level-variable-for)）
2.  在“私有”函数名称的开头使用下划线

人们使用其他任何想法或惯例吗？

非常感谢！

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-25T17:03:22.417

来自 Python 的[Class](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)模块文档：

> 在 Python 中不存在只能从对象内部访问的“私有”实例变量。但是，大多数 Python 代码都遵循一个约定：前缀为下划线的名称（例如 _spam）应被视为 API 的非公共部分（无论是函数、方法还是数据成员） . 它应被视为实施细节，如有更改，恕不另行通知。
> 
> 由于类私有成员有一个有效的用例（即避免名称与子类定义的名称发生名称冲突），因此对这种称为名称修饰的机制的支持有限。__spam 形式的任何标识符（至少两个前导下划线，最多一个尾随下划线）在文本上替换为 _classname__spam，其中 classname 是去掉前导下划线的当前类名。只要它出现在类的定义中，就无需考虑标识符的句法位置，就可以完成这种修饰。

# css - 100% 页脚，内部 div 与包装器宽度相同

> ID：15047123
> 
> 赞同：-1
> 
> 时间：2013-02-23T23:55:14.150
> 
> 标签：css, footer

我现在已经阅读了很多论坛和帖子，但似乎没有什么能完全理解我的问题。我在页面底部有一个 100% 宽度的页脚（使用 WordPress 空白主题），不用担心。我在 HTML 5 挂钩内的“脚”div 中有 3 个 div。我希望内部 div“脚”具有相同的宽度并与其上方的包装器保持相同，以便它看起来与包装器的宽度相同 @ 960px 宽。我正在努力弄清楚如何做到这一点。[你可以在http://newsite.dramanotebook.com](http://newsite.dramanotebook.com)看到我的代码和 css，我相信你知道如何使用 google chrome 或 firefox firebug 。让我知道您认为最好的解决方案，即使这意味着必须更改页面/页脚模板以实现我想要的。

我希望有`<footer>`100% 的宽度来扩大用户窗口的宽度，并将`<div id="foot">`其限制为 960px 宽度。这是问题所在。我想让它`<div id="foot">`与上面网站的其他部分保持垂直对齐。`<div id="wrapper"></div>`我指的是。

```
<div id="wrapper" class="hfeed">
<header>

<div id="branding">
</header>
<div id="container">
<div id="main" class="clearfix">
<!-- I have removed all the bloat in the middle to keep to my issue at hand -->
</div>
<div class="clear"></div>
</div> <!-- end of container div -->
</div> <!-- end of wrapper div -->
<footer> <!-- what I was referring to by HTML hook, my apologies "element"-->
<div id="foot">
    <div id="left-footer">
        <div id="trustwave_img">
            <script type="text/javascript" src="https://sealserver.trustwave.com/seal.js?code=5d243334f2474482a03b5e1f5d5fe4f5"></script>
        </div>
    </div>
    <div id="center-footer">

    </div>
    <div id="right-footer">

    </div>
</div>
</footer> 
```

下面是我目前拥有的相关 CSS，我相信这里有更聪明的人可以帮助我改进以达到我需要的地方，并在此过程中学到一些东西 :)。

```
body {
  font-size: 16px;
  font-family: Tahoma, Helvetica, Verdana;
  color: #424242;
  line-height: 1.4em;
  background: #fdffd0;
}

#wrapper {
  width: 960px;
  margin: 0 auto;
  overflow: hidden;
  Position: relative;
  background: #fff;
  padding: 0 10px;
  border-left: 1px solid #cccccc;
  border-right: 1px solid #cccccc;  

}
#container {
  position: relative;
  overflow: hidden;
  clear: both;
    padding-bottom: 40px;
}
footer {
  clear:both;
  width: 100%;
  height: 150px;
    border-top: 1px solid #eee;
    background-color: #A4EDA1; /*#9BE398;*/
    opacity: .8;
}
footer #foot {
    width: 960px;
    height: 150px;
    margin-left: 127px;
    position: relative;
}
#left-footer {
    width: 241px;
    height: 100%;
    float: left;
    position: absolute;
    top: 0;
    left: 0;
}
#center-footer {
    width: 496px;
    margin-left: 365px;
    height: 100%;
}
#right-footer {
    width: 240px;
    float: right;
    height: 100%;
    position: absolute;
    top: 0;
    right: 0;
} 
```

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T11:29:46.457

`#foot`以保证金自动为中心。

```
footer #foot {
    width: 960px;
    height: 150px;
    margin: 0 auto;
    position:relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:30:02.303

`margin: 0 auto;`不适用于元素的原因`#foot`是因为您绝对将内部`<div>`s 定位在该元素中。当您绝对定位它们时，您将它们从文档的默认流中取出，并且边距和浮动将不再适用。

你只需要删除...

```
position: absolute;
top: 0;
left: 0; 
```

...来自`#left-footer`and`#right-footer`选择器。

如果您想在该元素中创建一个三列页脚，则无需为每个子元素指定不同的浮动、边距等`<div>`。相反，只需使用：

```
footer {
    overflow: hidden; /* Used to clear floats */
    width: 100%;
}
footer > div {
    box-sizing: border-box; /* To define the total width (padding plus border, if any) at the specified width and not more */
    float: left;
    width: 33%;
} 
```

p/s：您的 CSS 存在一些问题 - 没有必要清除`<footer>`元素中的浮动（没有意义），并且该`position`属性已拼错为`#wrapper`. 您`<div id="header">`在您发布的 HTML 代码中也没有正确关闭。

# system.reactive - ReactiveUI：在 ReactiveAsyncCommand 执行时测试进度指示器的可见性

> ID：15047124
> 
> 赞同：1
> 
> 时间：2013-02-23T23:55:15.670
> 
> 标签：system.reactive, reactiveui

我有一个 ReactiveAsyncCommand 目前只是睡了一会儿：

```
public ReactiveAsyncCommand SignIn { get; private set; }

//from constructor:
SignIn = new ReactiveAsyncCommand(this.WhenAny(x => x.Username, x => x.Password,
                                                  (u, p) =>
                                                  !string.IsNullOrWhiteSpace(u.Value) &&
                                                  !string.IsNullOrWhiteSpace(p.Value)));

SignIn.RegisterAsyncAction(_ => Thread.Sleep(4000)); 
```

我想在命令执行时显示一个进度指示器，所以我创建了一个属性来绑定它的可见性：

```
private ObservableAsPropertyHelper<bool> _Waiting; 
public bool Waiting
{
    get { return _Waiting.Value; }
}

//from constructor:
_Waiting = SignIn.ItemsInflight
                 .Select(x => x > 0)
                 .ToProperty(this, x => x.Waiting); 
```

因此，即使它似乎在实践中有效，我也希望有一个单元测试显示在命令执行时 Waiting allways 将是真的，而且只有这样。

我已经阅读[了关于 testscheduler 的这篇博文](http://blog.paulbetts.org/index.php/2011/01/18/testing-your-viewmodels-using-time-travel-and-reactiveui/)，但很难使用它。

```
 [TestMethod]
    public void flag_waiting_while_signing_in()
    {

        (new TestScheduler()).With(scheduler =>
            {
                var vm = new SignInViewModel {Username = "username", Password = "password"};

                vm.SignIn.Execute(null);

                Assert.IsTrue(vm.Waiting); 
            });
    } 
```

此测试失败（等待为假）。我试图添加一个电话`scheduler.start()`，`scheduler.advanceBy( )`但这没有任何区别。

我的测试方法是错误的吗？如果方法是正确的，还有什么是错误的？

**编辑**
所以我`Thread.Sleep()`按照建议更改了：

```
SignIn.RegisterAsyncAction(_ =>
            {
                Observable.Interval(TimeSpan.FromMilliseconds(4000));
            }); 
```

并尝试通过`scheduler.AdvanceBy(...)`在检查`Waiting`-flag 之前调用来控制时间。但是，仍然没有绿色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:41:22.843

TestScheduler 失败的原因是您有一个 TestScheduler 视图之外的异步源 - `Thread.Sleep`. 它没有办法控制它，它*总是*需要4个真实秒。将其替换为`Observable.Interval`，它应该可以按您的预期工作

```
[TestMethod]
public void flag_waiting_while_signing_in()
{

    (new TestScheduler()).With(scheduler =>
        {
            var vm = new SignInViewModel {Username = "username", Password = "password"};

            vm.SignIn.Execute(null);

            scheduler.AdvanceBy(TimeSpan.FromMilliseconds(2000));
            Assert.IsTrue(vm.Waiting); 

            // Move past the end
            scheduler.AdvanceBy(TimeSpan.FromMilliseconds(5000));
            Assert.IsFalse(vm.Waiting); 
        });
} 
```

# ruby-on-rails - heroku 部署应用程序（toto 博客）不起作用

> ID：15047126
> 
> 赞同：0
> 
> 时间：2013-02-23T23:55:21.053
> 
> 标签：ruby-on-rails, ruby, heroku, github, toto

你好，我正在尝试在 heroku 系统上部署一个 toto 博客。这是指南：[网站](http://cloudhead.io/toto)

部署时出现错误。你能帮助我吗？谢谢

```
cristiano@ubuntu64bit1204:~$ git clone git://github.com/cloudhead/dorothy.git myblog
Cloning into 'myblog'...
remote: Counting objects: 202, done.
remote: Compressing objects: 100% (106/106), done.
remote: Total 202 (delta 88), reused 182 (delta 81)
Receiving objects: 100% (202/202), 20.97 KiB, done.
Resolving deltas: 100% (88/88), done.
cristiano@ubuntu64bit1204:~$ cd myblog/
cristiano@ubuntu64bit1204:~/myblog$ heroku create blogprova
Creating blogprova... done, stack is cedar
http://blogprova.herokuapp.com/ | git@heroku.com:blogprova.git
Git remote heroku added
cristiano@ubuntu64bit1204:~/myblog$ git push heroku master 
Counting objects: 202, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (99/99), done.
Writing objects: 100% (202/202), 20.97 KiB, done.
Total 202 (delta 88), reused 202 (delta 88)
 !     Heroku push rejected, no Cedar-supported app detected

To git@heroku.com:blogprova.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:blogprova.git'
cristiano@ubuntu64bit1204:~/myblog$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:12:54.787

该项目缺少一个 Gemfile，该文件应指定所需的 gem。

更重要的是，该项目的最后一次提交是在 2010 年 5 月 14 日，所以我建议您可能希望找到积极维护的博客软件，否则您可能会遇到困难。

# image - Photo Grid，图像替换交换而不是 CSS 背景颜色

> ID：15047128
> 
> 赞同：0
> 
> 时间：2013-02-23T23:55:32.047
> 
> 标签：image, wordpress, hover, swap

我想使用这个主题[http://demo.icypixels.com/themes/oneshot/](http://demo.icypixels.com/themes/oneshot/) 很好地将每个缩略图转换为所需的颜色，并附有帖子类型和投资组合名称。但..

..如果我可以将图像（每个缩略图不同）放在前面（鼠标悬停）而不是颜色，那将是完美的。

我已经设法实现了类似的[效果](http://www.wpdummy.dreamhosters.com/gpagetryout01/)，但如果我可以硬编码该模板或类似的模板/插件，那将是完美的。

有点困惑，但提前谢谢。

PS对不起英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T03:28:29.813

试试这个插件，在 Wordpress 中搜索它，它叫做 WP Visual Slide Box Builder。您可以创建自定义形状框并添加悬停效果。它所见即所得，因此非常易于使用。

# c# - 从 Vector2 位置到另一个位置的曲线运动

> ID：15047132
> 
> 赞同：1
> 
> 时间：2013-02-23T23:55:43.467
> 
> 标签：c#, xna, move, curve

目前，要将苍蝇从一个位置移动到另一个位置，我正在使用这个：

```
 DirectionNormalized = (positionTarget - position).Normalize; 
```

和

```
 position += DirectionNormalized *
            vitesseP2P *
            (float)gameTime.ElapsedGameTime.TotalMilliseconds; 
```

因此，苍蝇在从 A 点到 B 点到 C 点到 D 点等的一条线上飞行（笑话：完成）。

但我想弯曲它的轨迹。这太不可思议了，我认为这很容易，但我被困了几个小时。

希望你能帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:30:57.990

实现这一点的最常见方法是使用贝塞尔曲线。Bezier 算法采用一组点 - 两个端点和多个控制点 - 并在这些点定义的曲线的不同位置产生一系列点。

Bezier 算法的广义形式是迭代归约，但我们可以针对特定的 4 点情况展开它并生成`BezierInterpolate`如下函数：

```
public static Vector2 BezierInterpolate(Vector2 p0, Vector2 p1, Vector2 c0, Vector2 c1, float fraction)
{
    // first stage, linear interpolate point pairs: [p0, c0], [c0, c1], [c1, p1]
    Vector2 p0c0 = Vector2.Lerp(p0, c0, fraction);
    Vector2 c0c1 = Vector2.Lerp(c0, c1, fraction);
    Vector2 c1p1 = Vector2.Lerp(c1, p1, fraction);

    // second stage, reduce to two points
    Vector2 l = Vector2.Lerp(p0c0, c0c1, fraction);
    Vector2 r = Vector2.Lerp(c0c1, c1p1, fraction);

    // final stage, reduce to result point and return
    return Vector2.Lerp(l, r, fraction);
} 
```

这将为您提供沿曲线某个分数的点的位置。例如，如果您有动画的开始和结束时间，则可以使用上述方法生成飞行的当前位置。

首先，您需要定义控制点。我会使用这样的东西：

```
static System.Random prng = new System.Random();

public static Vector2 genControlPoint(Vector2 l, Vector2 r)
{
    // get a random angle between +/-(15..90) degrees off line
    float angle = (float)((((prng.NextDouble() * 5) + 1) / 12) * Math.PI * (prng.Next(0, 2) * 2 - 1));

    // create rotation matrix
    Matrix rot = Matrix.CreateRotationZ(angle);

    // get point offset half-way between two points
    Vector2 ofs = Vector2.op_Multiply(Vector2.op_Subtract(l, r), 0.5);

    // apply rotation
    ofs = Vector2.Transform(ofs, rot);

    // return point as control
    return Vector2.op_Add(l, ofs);
}

....

Vector2 p0 = FlyStartPoint();
Vector2 p1 = FlyEndPoint();
// generate randomized control points for flight path
Vector2 c0 = genControlPoint(p0, p1);
Vector2 c1 = genControlPoint(p1, p0); 
```

此时，您有一组适合作为前 4 个参数传递给 BezierInterpolate 方法的四个点，您可以从中确定“飞”在特定时间的位置。

贝塞尔曲线一开始很吓人，但一旦你理解了它们，它们就是有用的工具。像我在这里做的那样手工操作可以让你对调用`Vector2.Hermite`或调用时后台实际发生的事情有更多的了解`Vector2.CatmullRom`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:10:13.087

您可以计算样条曲线和沿该样条曲线的位置（随着时间的推移）。

见[http://www.c-sharpcorner.com/UploadFile/apundit/DrawingCurves11182005012515AM/DrawingCurves.aspx](http://www.c-sharpcorner.com/UploadFile/apundit/DrawingCurves11182005012515AM/DrawingCurves.aspx)

另一种方法是使用物理引擎。你可以给你的苍蝇一个质量和速度，并通过改变它的速度来应用运动变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T15:11:28.977

Xna 框架有一个内置的 Curve 类来执行此操作。

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.curve.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.curve.aspx)

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.curve(v=XNAGameStudio.35).aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.curve(v=XNAGameStudio.35).aspx)

在这里可以找到带有代码的示例：

[http://msdn.microsoft.com/en-us/library/bb203908.aspx](http://msdn.microsoft.com/en-us/library/bb203908.aspx)

他们甚至创建了一个特殊的曲线编辑器，可以轻松地将您的曲线添加到您的代码中：http: [//xbox.create.msdn.com/en-US/education/catalog/utility/curve_editor](http://xbox.create.msdn.com/en-US/education/catalog/utility/curve_editor)

# java - android中的面向对象方法

> ID：15047135
> 
> 赞同：0
> 
> 时间：2013-02-23T23:56:01.437
> 
> 标签：java, android, xml, oop, object

我正在尝试将游戏创建为 Android 中的自我开发项目。它会变得相当复杂，所以我想我应该得到一些建议。我知道一种解决方案有很多方法，但是，如果我的方法是对/错，或者我怎样才能使它变得更好，任何帮助都深表感谢。

我正在尝试设计一个中世纪时代的策略游戏，比如王国、文明等。

这是我到目前为止的项目结构：

```
A main java class called Units.java with basic attributes like HitPoints, Attack, etc.
A few other classes called Quarry.java, SwordsMan.java, Archer.Java which extends Units.java
A main activity called Game.java which extends Activity class and will create instances of SwordsMan.java, Archer.java, Quarry.java 
```

现在，我有一个名为 data.xml 的 xml 文件，它以节点格式存储每件事的数据。以下是 XML 文件中的代码片段：

```
<building id="0" name="Barracks" hp="1000" attack="0" armor="3" range="0">
   <cost wood="175"/>
      <unit id="0" name="Archer" hp="70" attack="13" armor="1" range="4">
        <cost food="60" gold="20"/>
      </unit>
</building> 
```

所以现在，我在 Archer.java 类的构造函数调用的方法中使用解析这个 XML 文件......它使用 SAX 解析器并使用起始元素和属性名称 =“Archer”提取数据。

我做对了吗？还是我的方法完全错误？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:05:54.047

.java 文件的 OO 设计看起来很棒。

如果这是您的意图，XML 将是制作保存文件的好主意。不过，我不会在 Archer.java 的构造函数中解析整个内容 - 这似乎相当随意。我建议一个单独的类专门用于处理保存的文件。

至于 XML 与数据库，这取决于您打算如何使用保存的数据。如果您将全部内容读入或一次全部写出，则两者都可能是合适的。将 XML 文件保存到 SD 卡可以轻松共享已保存的游戏。如果您预见到仅更改部分内容以保存和恢复活动游戏的状态，那么您应该使用数据库，因为使用 XML 您每次都必须重新编写整个文件。

请记住，在 Android 中，您的应用程序应随时处理终止（例如，如果用户在游戏过程中接到电话）。然后它应该在重新启动时提供良好的用户体验，而不会丢失游戏的进度。

# c++ - 代码调用终止而不是抛出异常

> ID：15047136
> 
> 赞同：1
> 
> 时间：2013-02-23T23:56:06.600
> 
> 标签：c++, exception, ubuntu-12.04, terminate

我想抛出这样的异常：

```
if (...) {  
    throw "not found";  
} 
```

并像这样抓住它：

```
try {  
    myfunction();  
} catch (const char * msg) {  
    cout << msg << endl;  
} 
```

但后来它说

```
terminate called after throwing an instance of 'char const*' 
```

为什么它调用终止而不抛出我的“未找到”？

编辑：

我把它改成这样：

```
try {
    throw "not found";
} catch (const char * msg) {
    cout << "test" << endl;
} catch(...) {
    cout << "test" << endl;
} 
```

我得到同样的错误！

EDIT2：当我不调用上面的特定方法时，它可以工作！但是我不明白这个方法与异常有什么关系，除了上面提到的myfunction()之外，我没有在任何其他函数中使用它。让我再测试一些，然后我会回复你！

编辑3：

哦，我的，这很尴尬。看起来我调用了错误的函数。很抱歉给您带来了这种可耻的经历！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:33:24.860

如果您在 try/catch 块之外使用 throw，则会调用 terminate。确保抛出的函数在 try 块中。

```
#include <iostream>

void myFunc()
{
    throw "Throwing!";
}

int main()
{
    try
    {
        myFunc();
    }
    catch(...)
    {
        std::cout << "Works fine.";
    }

    myFunc(); // Terminate gets called.

    return 0;

} 
```

# javascript - javascript提示号码，如果回答错误继续提示

> ID：15047140
> 
> 赞同：9
> 
> 时间：2013-02-23T23:56:40.483
> 
> 标签：javascript, prompt

我需要提示访问者输入 1 到 100 之间的整数并**继续提示**，直到输入有效数字。

这是我所拥有的：

```
<script>

var number = parseInt(prompt("Please enter a number from 1 to 100", ""));

if (number < 100) {
    document.write("Your number (" + number + ") is matches requirements", "");
} else if (isNaN(number)) {
    parseInt(prompt("It is not a number. Please enter a number from 1 to 100", ""));
} else {
    parseInt(prompt("Your number (" + number + ") is above 100\. Please enter a number from 1 to 100", ""));
}

</script> 
```

它可以识别号码，但在号码错误时无法重新询问。你能帮我解释一下你添加了什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T00:02:17.467

这样的事情应该可以解决问题：

```
do{
    var selection = parseInt(window.prompt("Please enter a number from 1 to 100", ""), 10);
}while(isNaN(selection) || selection > 100 || selection < 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T00:09:38.813

这是一种递归方法：

```
var number = (function ask() {
  var n = prompt('Number from 1 to 100:');
  return isNaN(n) || +n > 100 || +n < 1 ? ask() : n;
}()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T00:15:21.953

另一种方法：

```
<html>
    <head> </head>
    <body onload="promptForNumber();">

<script>
    function promptForNumber( text)
{
    if(text == '' ){
     text = "Please enter a number from 1 to 100";   
    }
    var number = parseInt(window.prompt(text, ""));
    checkNumber(number);

}
function checkNumber(number){

    if (number <= 100 && number >= 1) {
    document.write("Your number (" + number + ")  matches requirements", "");
} else if (isNaN(number)) {
    promptForNumber("It is not a number. Please enter a number from 1 to 100", "");
} else {
    promptForNumber("Your number (" + number + ") is not between 1 and 100", "");
}

}

</script>

    </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-23T09:37:00.993

```
 function myFunction(id) {

        let person = prompt("Please Enter Your Quotation");
        if (person != null) {
            if(person>=0||person<0){
                alert("max");
            }else{
            alert('Only Number is Allowed');
            myFunction(id)
            }
        }
    } 
```

# python - Python中sqlite的多个读数

> ID：15047147
> 
> 赞同：2
> 
> 时间：2013-02-23T23:57:31.517
> 
> 标签：python, multithreading, sqlite

`sqlite`使用 Python 的内置模块从同一个 sqlite 数据库读取多个 Python 线程（在同一台机器上或来自网络上连接的不同机器）是否有任何问题？没有线程写入数据库，只读取它。这种[从多线程读取的 sqlite 访问](https://stackoverflow.com/questions/6965041/sqlite-access-from-multiple-threads-for-reading)似乎相关但不确定。这有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T01:26:50.610

Sqlite 支持并发读取。请参阅[常见问题解答](http://www.sqlite.org/faq.html#q5)。我想 Python 的 sqlite 模块也是如此。只是不要在线程之间共享游标和连接；为每个创建一个。

# jquery - 如何使用 AJAX 更新 jquery 对话框中的视图？

> ID：15047154
> 
> 赞同：0
> 
> 时间：2013-02-23T23:58:51.137
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-dialog

这是默认情况下包含我的剃刀视图的内容，请注意我使用的是 AJAX 链接，下面也是控制器方法。

```
 <td class="questionText">@Ajax.ActionLink("some text", "PreviewQuestion", new { questionId = question.Id },
                new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "target" })</td>

   public ActionResult PreviewQuestion(int questionId)
    {
        db = new ContosoDb();
        var question = db.Questions.Find(questionId);

        return PartialView("_MultipleChoiceQuestion", question);
    } 
```

如您所见，我正在尝试更新 Jqueryd 对话框的当前视图，这就是我的目的。我打算使用以下插件：

[http://jqueryui.com/dialog/#default](http://jqueryui.com/dialog/#default)

到目前为止，如果我在其中设置断点`return PartialView(...)`就可以了。但我不知道我必须在哪里编写代码以显示弹出窗口，并通过动作控制器更新对话框内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:32:28.367

我认为您的部分视图正在返回某种 HTML 片段，您打算使用该插件将其转换为对话框。您需要在 ajax 调用中再添加一个参数，例如

```
new AjaxOptions() { InsertionMode = InsertionMode.Replace, UpdateTargetId = "target",OnComplete = "your_js_function();" } 
```

该功能将类似于

```
function your_js_function()
 $( "#target" ).dialog();
} 
```

该函数的目的是触发对话框的出现。

我希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:35:43.030

使用 AjaxOptions 的**OnSuccess****事件**连接javascript 代码。OnSuccess 将向您传递调用的结果，在这种情况下是局部视图的内容。现在您可以使用 jqDialog 来显示内容您的 javascript 函数大致如下所示

 **```
function processResults(results){
    $(results).dialog();
} 
```**

# oracle11g - 在内部查询中计算年龄，然后与一个值进行比较

> ID：15047156
> 
> 赞同：1
> 
> 时间：2013-02-23T23:59:18.287
> 
> 标签：oracle11g

我有两张桌子。

1.  fbuser(facebook_ID, date_of_birth) - facebook_id 是主键
2.  wall(wall_ID, facebook_ID, public_view) - facebook_id 是外键

我想查找将墙设置为公开视图且年龄超过 24 岁的用户？

```
Select f.facebook_ID from fbuser f, wall w 
WHERE
  (w.public_view='y')
 AND
  (f.facebook_ID=w.facebook_ID)
 AND
  (select FLOOR( MONTHS_BETWEEN( CURRENT_DATE, f.date_of_birth ) / 12 ) 
  as person_age from fbuser where person_age >=24; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:21:55.960

```
SELECT
  f.facebook_ID
FROM fbuser f, wall w 
WHERE
  (f.facebook_ID=w.facebook_ID)
 AND
  (w.public_view='y')
 AND
  (  (MONTHS_BETWEEN( CURRENT_DATE, f.date_of_birth )/12)  >=24); 
```

# java - 每个线程根据表创建不同的数据库连接

> ID：15047166
> 
> 赞同：0
> 
> 时间：2013-02-24T00:00:21.303
> 
> 标签：java, database, multithreading, connection

我正在做一个项目，我需要根据表建立不同的数据库连接。所有表格和连接详细信息都在`config.properties file`. 所以假设我有两个表，`config.properties`文件中有连接详细信息。然后每个线程将在`database connections`任何时候产生两个`run method`。

下面的方法将读取属性文件并`ReadTableConnectionInfo object`为每个表创建一个。

```
private static void readPropertyFile() throws IOException {

    prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

    tableNames = Arrays.asList(prop.getProperty("TABLES").split(" "));

    for (String arg : tableNames) {

        ReadTableConnectionInfo ci = new ReadTableConnectionInfo();

        String url = prop.getProperty(arg + ".url");
        String user = prop.getProperty(arg + ".user");
        String password = prop.getProperty(arg + ".password");
        String driver = prop.getProperty(arg + ".driver");

        ci.setUrl(url);
        ci.setUser(user);
        ci.setPassword(password);
        ci.setDriver(driver);

        tableList.put(arg, ci);
    }

} 
```

下面的类将保存特定表的所有表连接信息。

```
public class ReadTableConnectionInfo {

    public String url;
    public String user;
    public String password;
    public String driver;

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public String getUser() {
        return user;
    }

    public void setUser(String user) {
        this.user = user;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getDriver() {
        return driver;
    }

    public void setDriver(String driver) {
        this.driver = driver;
    }
} 
```

从下面的代码中，我尝试通过传入和来`ReadTask class`使用多个线程执行`tableList map`，每个线程将根据.`constructor``run method``different database connections``tableLists size`

```
ExecutorService service = Executors.newFixedThreadPool(threads);

for (int i = 0; i < threads; i++) {
    service.submit(new ReadTask(tableList));
}

public ReadTask(HashMap<String, ReadTableConnectionInfo> tableList) {
    this.tableLists = tableList;
}

@Override
public void run() {

    int j = 0;
    dbConnection = new Connection[tableLists.size()];
    statement = new Statement[tableLists.size()];

    //loop around the map values and make the connection list
    for (ReadTableConnectionInfo ci : tableLists.values()) {

        dbConnection[j] = getDBConnection(ci.getUrl(), ci.getUser(), ci.getPassword(), ci.getDriver());
        statement[j] = dbConnection[j].createStatement();

        j++;
    }
} 
```

**我的问题是**- 有没有更好的设计来解决类似的问题？就像每个线程应该创建不同的数据库连接并将其存储在一个列表中，以便我可以正确使用它们。

# html - 将边距应用于单个

> ID：15047169
> 
> 赞同：1
> 
> 时间：2013-02-24T00:00:52.287
> 
> 标签：html, css

我希望在`<li>`不影响前两个的情况下移动 3rd 的边距。

我想我必须创建一个单独的 li 类，边距为“x”，然后应用？

```
<!DOCTYPE html>
<html lang="no">
<head>
<link rel="stylesheet" media="screen" type="text/css" href="../style.css" />
</head>
<body>
    <div id="menu-bg">
        <div id="menu-text">
            <ul id="list">
                <li>
                 <a href="/solmai/index.php"><font class="cur">VERBIER</a></font><br>
                 <a href="../whistler/index.html">WHISTLER</a><br>
                </li>

                <li><a href="/solmai/verbier/chalet.php"><font class="cur">CHALET</font></a><br>
                    <a href="../verbier/verbier/home.php">AESTHETIC CLINIQUE</a><br>
                    <a href="../verbier/verbier/home.php">SPORTS CLINIQUE</a><br>
                    <a href="../verbier/verbier/home.php">MEMBERS LOUNGE</a><br>
                    <a href="../verbier/verbier/home.php">GYM</a><br>
                    <a href="../verbier/verbier/home.php">GALLERY</a><br>
                    <a href="../verbier/verbier/home.php">VERBIER NEWS</a>
                </li> 

                 <li><a href="/solmai/verbier/chalet.php">THE EXPERIENCE</a><br>
                    <a href="../verbier/verbier/home.php">SERVICES</a><br>
                    <a href="../verbier/verbier/home.php">ADVENTURE</a><br>
                    <a href="../verbier/verbier/home.php">TOUR</a><br>
                    <a href="../verbier/verbier/home.php">GALLERY</a><br>
                    <a href="../verbier/verbier/home.php">REVIEWS</a><br>
                    <a href="../verbier/verbier/home.php">LOCATION</a>
                </li>

         </ul>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T00:03:50.383

```
#list li:last-child{
  margin: ...
} 
```

或者，如果您有更多关注者，您可以使用`:nth-child(3)`

另请注意，该[`<font>`](https://developer.mozilla.org/en-US/docs/HTML/Element/font)标签在 HTML5 中已弃用（您似乎正在使用的文档类型）

# arrays - 如何通过在 vb.net 中编码来创建对象和新创建的对象事件

> ID：15047172
> 
> 赞同：1
> 
> 时间：2013-02-24T00:01:38.230
> 
> 标签：arrays, vb.net, events, object, visual-studio-2012

你好朋友我的新项目有一个大问题，如何通过在 vb.net 中编码来创建对象和新创建的对象事件

这是我的代码我可以用数组创建对象但我不能应用任何事件

```
 Dim C_R_ARRY(2) As TableLayoutPanel
    For x As Integer = 2 To 0 Step -1

        ' part 1
        Dim C_A_LABEL_1(2) As Label
        Dim C_A_LABEL_1_VALUE() As String = {"ADAM", "SOLY", "HESHAM"}
        C_A_LABEL_1(x) = New Label
        C_A_LABEL_1(x).Text = C_A_LABEL_1_VALUE(x)
        C_A_LABEL_1(x).Margin = New System.Windows.Forms.Padding(0)
        C_A_LABEL_1(x).TextAlign = System.Drawing.ContentAlignment.MiddleLeft
        C_A_LABEL_1(x).Dock = System.Windows.Forms.DockStyle.Fill

        ' part 1
        Dim C_A_LABEL_2(2) As Label
        Dim C_A_LABEL_2_VALUE() As String = {"122", "231", "102"}
        C_A_LABEL_2(x) = New Label
        C_A_LABEL_2(x).Text = C_A_LABEL_2_VALUE(x) & " +"
        C_A_LABEL_2(x).Margin = New System.Windows.Forms.Padding(0)
        C_A_LABEL_2(x).TextAlign = System.Drawing.ContentAlignment.MiddleLeft
        C_A_LABEL_2(x).Dock = System.Windows.Forms.DockStyle.Fill

        ' part 3
        Dim C_A_TEXT(2) As TextBox
        Dim C_A_TEXT_ID() As Integer = {1, 2, 3}
        C_A_TEXT(x) = New TextBox
        C_A_TEXT(x).Width = 100
        C_A_TEXT(x).Name = "TEXT" & x

        ' part 0
        C_R_ARRY(x) = New TableLayoutPanel
        C_R_ARRY(x).AutoSize = True
        C_R_ARRY(x).ColumnCount = 6
        C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 140.0!))
        C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 140.0!))
        C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 140.0!))
        C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 140.0!))
        C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 140.0!))
        C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle())
        C_R_ARRY(x).Dock = System.Windows.Forms.DockStyle.Top
        C_R_ARRY(x).Location = New System.Drawing.Point(0, 0)
        C_R_ARRY(x).Margin = New System.Windows.Forms.Padding(0)
        C_R_ARRY(x).RowCount = 1
        C_R_ARRY(x).RowStyles.Add(New System.Windows.Forms.RowStyle())
        C_R_ARRY(x).Size = New System.Drawing.Size(620, 100)
        C_R_ARRY(x).TabIndex = 0
        C_R_ARRY(x).Padding = New System.Windows.Forms.Padding(5, 5, 5, 10)

        C_R_ARRY(x).Controls.Add(C_A_LABEL_1(x), 0, 0)
        C_R_ARRY(x).Controls.Add(C_A_LABEL_2(x), 1, 0)
        C_R_ARRY(x).Controls.Add(C_A_TEXT(x), 2, 0)

        Panel3.Controls.Add(C_R_ARRY(x))

    Next

    Private Sub TEXT1_TextChanged(sender As Object, e As EventArgs) Handles = TEXT1.TextChanged
        ' not working
    End Sub 
```

谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:12:55.260

您应该删除`Handles`方法声明的部分，并用于[`AddHandler`](http://msdn.microsoft.com/en-gb/library/7taxzxka.aspx)动态订阅事件：

```
AddHandler C_A_TEXT(x).TextChanged, AddressOf TEXT1_TextChanged 
```

我还*强烈*建议您使用更传统（不那么喧闹）的变量名称。此外，如果您避免完全限定所有名称，您的代码将更加简洁。所以这：

```
C_R_ARRY(x).ColumnStyles.Add(New System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 140.0!)) 
```

...可能会变成：

```
panels(x).ColumnsStyles.Add(New ColumnStyle(SizeType.Absolute, 140.0F)) 
```

（我使用`F`了而不是`!`作为`Single`后缀，只是因为它对我作为 C# 程序员来说看起来更自然。我不知道在 VB 代码中哪个更常见。）

# visual-studio - Visual Studio Javascript Intellisense - 选项对象

> ID：15047178
> 
> 赞同：2
> 
> 时间：2013-02-24T00:02:51.123
> 
> 标签：visual-studio, visual-studio-2012, javascript-intellisense, vsdoc

我想在 Visual Studio 中为我在方法调用中使用的选项对象获得 Intellisense 支持。

在 Javascript 中使用包罗万象的选项对象来配置对函数的调用是很常见的——例如 jquery 的 Ajax 调用使用：

```
$.ajax(settings); 
```

其中 settings 只是一个对象，例如：

```
$.ajax({
    url: '/blah',
    data: { stuff: 1 },
    method: 'POST',
    // etc
}); 
```

尽管它是一个隐式对象，但属性遵循特定的类。通常，当您有类似这样的东西对 Intellisense/描述代码很重要但对代码工作不重要时，您可以将它放在 -vsdoc.js 文件中。但是我如何让 Intellisense 为这个对象提供信息呢？

我以[jquery-vsdoc.js](http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3-vsdoc.js)为例，因为它是由 Microsoft 提供的，但无济于事。在一种情况下，他们只是将其键入为“对象”，而在另一种情况下，他们根本不记录它。

例如，我已经尝试过 - 在 fillTable.js 中：

```
function fillTable(options) {
    /// <param name="options" type="FillTableOptions">Options to fill table</param> 
```

在 fillTable-vsdoc.js 中：

```
function FillTableOptions() {
    /// <field type="String">Id property</field>
    this.idProp = 'Id'; 
```

但是对于 Intellisense，我得到的只是类型是 FillTableOptions - 当我创建对象时，我在选择属性时没有得到 Intellisense 帮助。

那么，如何获得对此类对象属性的 Intellisense 支持？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:37:11.853

我不知道有什么方法可以在 TypeScript 之外获得对对象参数的*真正*Intellisense 支持……但是，您可以在某种程度上格式化参数文档节点。

例如，您可以在“类型”属性中输入您喜欢的任何文本，只要它是一个连续的文本块（不包含任何空格或中断字符）。

前任。1：自定义类型注解。

```
function where(collection, evaluator) {
    /// <summary>
    /// Equivalent to a WHERE clause.
    /// </summary>
    /// <param name="collection" type="array||object">Accepts an array or associative array (object).</param>
    /// <param name="evaluator" type="function(key,value,index)">Applied to each element of the @collection to determine which elements to return.</param>
    /// <returns type="array||object" />
} 
```

前任。2：多行参数文档（`&#10;`是新行）。

```
function modal(options) {
    /// <summary>
    /// Displays a modal window.
    /// </summary>
    /// <param name="options" type="object||string">
    /// &#10;If a string is passed in, will be treated as @heading.
    /// &#10;
    /// &#10;* heading {string} The heading text.
    /// &#10;? content {string} The text content; overridden by @htmlContent.
    /// &#10;? htmlContent {string} Use when HTML content is desired; overrides @content.
    /// &#10;? settings {object} FancyBox.js settings.
    /// </param>
} 
```

这不会像 TypeScript 那样为您提供真正的对象参数智能感知，但它可以让您更好地控制注释的样式，并有助于减少歧义。

# python - 防止面板在 wxPython 中增长

> ID：15047179
> 
> 赞同：2
> 
> 时间：2013-02-24T00:02:52.007
> 
> 标签：python, user-interface, resize, wxpython, boxsizer

我正在尝试在 wxPython 中安排一些面板。布局的粗略表示如下：![所需布局的抽象示例。](../Images/a2e2c674207beb03f5d873b08689ded7.png)

本质上，我正在寻找一个左右面板，这样 - 当调整大小时 - 左（橙色）面板（及其内容）永远不会调整大小，而右（蓝色）面板可以根据需要拉伸/增长，但只是水平的。

到目前为止我的代码（带有一些随机填充小部件）如下。我的问题遵循代码：

```
import wx
import wx.lib.scrolledpanel as scrolled

class MainWindow(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent)

        #add position panel
        posPnl = IdPanel(self)
        lbl1 = wx.StaticText(posPnl, label="Position")
        lbl2 = wx.StaticText(posPnl, label="Size")
        sizeCtrl = wx.TextCtrl(posPnl)

        posPnlSzr = wx.BoxSizer(wx.VERTICAL)
        posPnlSzr.Add(lbl1, 1, wx.FIXED&wx.LEFT)
        posPnlSzr.Add(sizeCtrl, 1, wx.LEFT&wx.FIXED)
        posPnlSzr.Add(lbl2, 1, wx.FIXED&wx.LEFT)

        posPnl.SetSizer(posPnlSzr)

        posPnl2 = TimelinePanel(self)
        lbl12 = wx.StaticText(posPnl2, label="Position")
        lbl22 = wx.StaticText(posPnl2, label="Size")
        sizeCtrl2 = wx.TextCtrl(posPnl2)

        posPnlSzr2 = wx.BoxSizer(wx.VERTICAL)
        posPnlSzr2.Add(lbl12, 1, wx.GROW)
        posPnlSzr2.Add(sizeCtrl2, 1, wx.GROW)
        posPnlSzr2.Add(lbl22, 1, wx.GROW)

        posPnl2.SetSizer(posPnlSzr2)

        mainSzr = wx.BoxSizer(wx.HORIZONTAL)
        mainSzr.Add(posPnl, 1, wx.FIXED)
        #mainSzr.AddSpacer(10)
        mainSzr.Add(posPnl2, 1, wx.GROW)

        self.SetSizerAndFit(mainSzr)
        self.Show()

class IdPanel(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent, -1, size = (400, 200))
        self.SetBackgroundColour((255, 0, 255))

class TimelinePanel(scrolled.ScrolledPanel):
    def __init__(self, parent):
        scrolled.ScrolledPanel.__init__(self, parent, -1, size = (300, 200))
        self.SetBackgroundColour((255, 0, 0))

app = wx.App(False)
frame = MainWindow(None, "Trading Client")
app.MainLoop() 
```

我的问题：

1.  如何使用 sizers 确保仅右侧面板扩展且仅水平扩展？目前左侧面板的内容保持不变，但面板本身仍在扩展。
2.  如果我想稍微修改第一个问题，以便只有右侧水平扩展，但两个面板都垂直扩展，我需要做什么？
3.  我正在使用 wx.lib.scrolledpanel 作为右侧面板的 x 轴，但我似乎根本无法水平收缩窗口以使其出现。我不确定是否有关于混合/最大面板尺寸等的设置，这可能有帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T02:02:57.230

1：使用sizer中的`proportion`参数。将两个面板添加到主sizer时添加：

```
mainSzr.Add(posPnl, 0)
mainSzr.Add(posPnl2, 1) 
```

比例会影响该面板如何与所有其他同级大小调整器成比例地调整大小（其中 0 表示不调整大小）。标志`wx.FIXED`和`wx.GROW`与您的目标无关。

[http://wxpython.org/docs/api/wx.Sizer-class.html#Add](http://wxpython.org/docs/api/wx.Sizer-class.html#Add)

因此，例如，如果您希望两者都增加，但右侧的增长速度是左侧的两倍，您可以使用：

```
mainSzr.Add(posPnl, 1)
mainSzr.Add(posPnl2, 2) 
```

* * *

2：使用`wx.EXPAND`标志使水平尺寸器中的某些东西扩展以填充其垂直空间（或反之亦然垂直尺寸器/水平空间）。

```
mainSzr.Add(posPnl, 0, wx.EXPAND)
mainSzr.Add(posPnl2, 1, wx.EXPAND) 
```

* * *

3：添加一个`self.SetupScrolling()`到TimelinePanel的`__init__`功能，这是滚动面板操作所必需的。然后当面板的内容大到需要滚动条时，它就会被添加。

# jquery - Jquery隐藏功能不起作用

> ID：15047180
> 
> 赞同：-1
> 
> 时间：2013-02-24T00:02:59.583
> 
> 标签：jquery, ruby-on-rails, ajax

很简单，“.hide()”函数不起作用。我正在使用 jquery-rails gem，并且在 application.js 中有正确的语句。

这是我的代码：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />

<script> 
$(document).ready(function() { 
   $(document).ajaxSuccess(function() {
      $("#ld").hide();
      //alert('Hooray!');
   });
});
</script> 
```

在 layouts/application.html.erb 我有

```
<!DOCTYPE html>
<html>
   <head>
      <title><%= full_title(yield(:title)) %></title>

      <%# two lines below allow for device-responsive formatting, see twitter-bootstrap    page%>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

      <%= stylesheet_link_tag "application", media: "all" %>
      <%= javascript_include_tag "application" %>
      <%= javascript_include_tag :highcharts %>
      <%= csrf_meta_tags %>
      <%= render 'layouts/shim' %>
   </head>

   <body>
      <%= render 'layouts/header' %>
      <div class="container">
         <%= yield %>
         <%= render 'layouts/footer' %>
         <%= debug(params) if Rails.env.development? %>
      </div>
   </body>
</html> 
```

**编辑：**

1）如果我改变这个， hide() 仍然不起作用。在浏览器中查看页面源时，我也清楚地看到了 assets/jquery.js。

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" /> 
```

2）在我的HTML中：

```
<div id="#ld">
  <%= image_tag("ajax-loader.gif", :alt => "test image") %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:34:00.163

从您的 div 的 id中删除`#`哈希：

```
<div id="ld"> 
```

您只放入 CSS 和 jQuery 嘶嘶声选择器的哈希表示您正在寻找一个 id 而不是类 ( `.`) 或标签名称（无前缀）。

# python - 从 Python 中的命令行读取 Unix 通配符文件名

> ID：15047182
> 
> 赞同：0
> 
> 时间：2013-02-24T00:03:33.010
> 
> 标签：python, shell, unix, command-line, optparse

`optparse`在 Python中处理 Unix 风格的通配符参数的正确方法是什么？我有：

```
myscript.py:

from optparse import OptionParser
parser = OptionParser()
parser.add_option("--input", dest="input", default=None, nargs=1)
parser.add_option("--outdir", dest="outdir", default=None, nargs=1)
(options, args) = parser.parse_args() 
```

我希望能够做到：

`myscript.py --input *.txt --outdir mydir/`

我不想一定要阅读所有匹配的文件的内容`*.txt`。我想`myscript.py`访问他们的文件名，因为有些脚本只是将文件名传递给其他程序，而无需打开/读取文件。如何获得一个返回文件名的迭代器，同时仍然允许`--outdir`在通配符友好选项之后传递其他参数（在这种情况下`--input`）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:07:53.160

Unix shell`*.txt`在传递给您的程序之前将扩展为单独的参数；Windows 的命令解释器不会。

假设您使用的环境不首先扩展它们 - 即调用`python prog.py '*.txt'`，例如，您可以使用[glob.glob()](http://docs.python.org/2/library/glob.html)自己进行扩展。

# sql - 使用 SQL Server 中的条件从存储过程中调用存储过程的正确语法是什么

> ID：15047184
> 
> 赞同：3
> 
> 时间：2013-02-24T00:03:44.453
> 
> 标签：sql, stored-procedures, conditional-statements

我在从存储过程中调用存储过程时弄乱了条件语句。谁能帮我吗？

```
 CREATE PROCEDURE [dbo].[sp_Leaderboard] 

    @CompetitionId INTEGER

    AS

    DECLARE @Competition TABLE
    (CompId INTEGER,
    CompFormat NVARCHAR(10)
    )
    INSERT INTO @Competition
    SELECT CompetitionId, CompetitionFormatType
    FROM dbo.Competitions 
LEFT JOIN dbo.CompetitionFormat ON dbo.Competitions.CompetitionFormatId = dbo.CompetitionFormat.CompetitionFormatId
    WHERE CompetitionId = @CompetitionId

    CASE WHEN @Competition.CompFormat = "Strokes" THEN EXEC [dbo].[sp_Strokes] ELSE EXEC [dbo].[sp_Stableford] 
```

此外，我知道我在我的代码中没有考虑到的一点是，我还需要将参数 @CompetitionId 带入我要去的任何程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T00:06:39.160

为什么不直接使用`IF`语句？

```
IF (SELECT TOP 1 CompFormat FROM @Competition) = 'Strokes'
   BEGIN
       EXEC [dbo].[sp_Strokes] @CompetitionId 
   END
ELSE
   BEGIN
       EXEC [dbo].[sp_Stableford] @CompetitionId 
   END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T00:07:22.860

您可以随心所欲地同时消除表变量。试试这个：

```
DECLARE @CompFormat varchar(50)

SELECT @CompFormat = CompetitionFormatType
FROM dbo.Competitions 
LEFT JOIN dbo.CompetitionFormat 
    ON dbo.Competitions.CompetitionFormatId = dbo.CompetitionFormat.CompetitionFormatId
WHERE CompetitionId = @CompetitionId

IF @CompFormat = 'Strokes'
BEGIN
    EXEC [dbo].[sp_Strokes] @CompetitionId
END
ELSE 
BEGIN
    EXEC [dbo].[sp_Stableford] @CompetitionId
END 
```

或者，也许您应该创建一个以 为参数的新存储过程，`@Competition.CompFormat`然后在其中使用 IF 语句来决定从哪个表中查询。

# ruby-on-rails - 在rails中添加带有变量的标题文本以形成

> ID：15047185
> 
> 赞同：0
> 
> 时间：2013-02-24T00:03:47.943
> 
> 标签：ruby-on-rails, ruby, forms

我在 Rails 中使用 jQuery UI 工具提示在表单上提供工具提示。工具提示中的文本由标题字段提供。我正在尝试做的是：

```
<%= f.text_field :member_number, :class => "ui-tooltip", 
:title => "A membership is required to participate at" @event_name %> 
```

我知道这不是添加变量的正确方法，但不能为我的一生找出正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:07:00.727

最好的方法是使用 Ruby 字符串插值：

```
:title => "A membership is required to participate at #{@event_name}" 
```

它也可以使用字符串连接：

```
:title => "A membership is required to participate at" + @event_name 
```

`<%` `%>`（当然，正如您已经完成的那样，这两个都将在标签内。）

# mysql - 查询以读取每个父表 id 的子表行

> ID：15047188
> 
> 赞同：2
> 
> 时间：2013-02-24T00:04:00.580
> 
> 标签：mysql, sql

我有一个父表A和子表B。

```
Parent Table A
---------------
AID,
AName,
Acode

Child Table B
-------------
AID,
BID,
BName,
BCode 
```

我正在尝试形成一个查询以从 A 中检索行，并从 B 中为每个 AID 检索相应的行。所以基本上结果是每个 AID 的 A 的所有行和 B 的行。我希望我说得通。我需要为此使用连接吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T00:05:59.070

您将`JOIN`在表之间使用 a：

```
select a.aid,
  a.aname,
  a.acode,
  b.bname,
  b.bcode
from tableA a
inner join tableB b
  on a.aid = b.aid 
```

将`JOIN`介于`aid`from`tableA`和`aid`from之间`tableB`。我使用了一个`INNER JOIN`它将返回两个表中存在的所有行。如果您想返回所有行，`tableA`即使 中没有匹配的行`tableB`，那么您将使用`LEFT JOIN`.

如果您在学习连接语法方面需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:06:37.673

是的你是。

> select a.*, b.* from tableA a inner join TableB b on a.AID = b.AID;

# haskell - 以二进制补码表示形式读取/写入 Haskell 整数

> ID：15047191
> 
> 赞同：6
> 
> 时间：2013-02-24T00:05:01.310
> 
> 标签：haskell, binary, integer, twos-complement

[我需要以与 Java 对其BigInteger](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#toByteArray())类所做的兼容的方式读取和写入整数：

> 返回包含此 BigInteger 的二进制补码表示的字节数组。字节数组将采用大端字节序：最高有效字节位于第零个元素中。该数组将包含表示此 BigInteger 所需的最小字节数，包括至少一个符号位，即 (ceil((this.bitLength() + 1)/8))。

可悲的是，这排除了`Data.Binary`提供的内容。在图书馆的某处遵循此约定进行`ByteString`<->转换是否有效率？`Integer`如果没有，怎么办？

根据 Thomas M. DuBuisson 的回答（以及以下讨论），我目前有

```
i2bs :: Integer -> B.ByteString
i2bs x
   | x == 0 = B.singleton 0
   | x < 0 = i2bs $ 2 ^ (8 * bytes) + x
   | otherwise = B.reverse $ B.unfoldr go x
   where
      bytes = (integerLogBase 2 (abs x) + 1) `quot` 8 + 1
      go i = if i == 0 then Nothing
                       else Just (fromIntegral i, i `shiftR` 8)

integerLogBase :: Integer -> Integer -> Int
integerLogBase b i =
     if i < b then
        0
     else
        -- Try squaring the base first to cut down the number of divisions.
        let l = 2 * integerLogBase (b*b) i
            doDiv :: Integer -> Int -> Int
            doDiv i l = if i < b then l else doDiv (i `div` b) (l+1)
        in  doDiv (i `div` (b^l)) l 
```

这比我希望的更冗长，仍然错过了这个`bs2i`功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T01:21:33.657

只需从 crypto-api 中窃取`i2bs`and`bs2i`例程并对其进行轻微修改：

```
import Data.ByteString as B

-- |@i2bs bitLen i@ converts @i@ to a 'ByteString'
i2bs :: Integer -> B.ByteString
i2bs = B.reverse . B.unfoldr (\i' -> if i' == 0 then Nothing
                                                else Just (fromIntegral i', i' `shiftR` 8))

-- |@bs2i bs@ converts the 'ByteString' @bs@ to an 'Integer' (inverse of 'i2bs')
bs2i :: B.ByteString -> Integer
bs2i = B.foldl' (\i b -> (i `shiftL` 8) + fromIntegral b) 0 . B.reverse 
```

您可以通过首先确定位大小并使用原始`i2bs`按顺序构造字节串来提高效率（节省反向成本）。

（编辑：我应该注意这没有使用 Java 解析器进行测试，但是这个基本结构应该很容易让你改变以考虑任何丢失的位）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:48:28.327

好的，因此基于 Thomas M. DuBuisson 的部分答案的完全可行的解决方案是：

```
bs2i :: B.ByteString -> Integer
bs2i b
   | sign = go b - 2 ^ (B.length b * 8)
   | otherwise = go b
   where
      go = B.foldl' (\i b -> (i `shiftL` 8) + fromIntegral b) 0
      sign = B.index b 0 > 127

i2bs :: Integer -> B.ByteString
i2bs x
   | x == 0 = B.singleton 0
   | x < 0 = i2bs $ 2 ^ (8 * bytes) + x
   | otherwise = B.reverse $ B.unfoldr go x
   where
      bytes = (integerLogBase 2 (abs x) + 1) `quot` 8 + 1
      go i = if i == 0 then Nothing
                       else Just (fromIntegral i, i `shiftR` 8)

integerLogBase :: Integer -> Integer -> Int
integerLogBase b i =
     if i < b then
        0
     else
        -- Try squaring the base first to cut down the number of divisions.
        let l = 2 * integerLogBase (b*b) i
            doDiv :: Integer -> Int -> Int
            doDiv i l = if i < b then l else doDiv (i `div` b) (l+1)
        in  doDiv (i `div` (b^l)) l 
```

我不会很快接受我自己的答案，以防有人想提出更简洁的东西来展示他的技能。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T22:57:00.213

这是一个无需先计算大小的解决方案。对于负数，它相当于反转所有位，执行计算，然后再次反转位。

```
i2bs :: Integer -> B.ByteString
i2bs x = B.reverse . B.unfoldr (fmap go) . Just $ changeSign x
  where
    changeSign :: Num a => a -> a
    changeSign | x < 0     = subtract 1 . negate
               | otherwise = id
    go :: Integer -> (Word8, Maybe Integer)
    go x = ( b, i )
      where
        b = changeSign (fromInteger x)
        i | x >= 128  = Just (x `shiftR` 8 )
          | otherwise = Nothing

bs2i :: B.ByteString -> Integer
bs2i xs = changeSign (B.foldl' go 0 xs)
  where
    changeSign :: Num a => a -> a
    changeSign | B.index xs 0 >= 128 = subtract 1 . negate
               | otherwise           = id
    go :: Integer -> Word8 -> Integer
    go i b = (i `shiftL` 8) + fromIntegral (changeSign b) 
```

# c - C：创建一个结构，返回一个TYPE

> ID：15047205
> 
> 赞同：0
> 
> 时间：2013-02-24T00:07:23.487
> 
> 标签：c, struct

我希望这个问题有一个简单的答案，所以请耐心等待。如果我有一个 C 头文件将 TYPE 定义为：

```
struct Example {
    char description[EXAMPLE_DESC_SIZE];    
    int val;                          
};

typedef struct Example Example;

# ifndef TYPE
# define TYPE      Example
# define TYPE_SIZE sizeof(Example)
# endif 
```

然后在一个 .c 文件中，我有一个函数如下：

```
TYPE createExample (int val, char *desc) {
} 
```

从主要称为

```
TYPE newEx;
char desc[EXAMPLE_DESC_SIZE], filename[50], *nlptr;
int val;

newEx = createExample(val, desc); 
```

如何对 createExample 进行编码以使其返回 TYPE？我尝试了以下（以及其他一些不成功的尝试）：

```
TYPE createExample (int val, char *desc)
{
    TYPE temp;
    struct Example example;
    example->val = val;
    strcpy(example->description, desc);

    return temp = example;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:13:48.693

随着问题的改变，我改变了我的答案：

基本上TYPE定义是正确的，代码也是正确的。唯一错误的是使用`example`in的实例`createExample`：当您声明堆栈变量时，您不能使用“->”运算符来访问字段。你必须使用'。操作员。所以对该字段的正确访问`val`是通过`example.val = val`. 这就是你的编译器告诉你的

> '->' 的类型参数无效。

仍然

```
struct Example {
    char description[EXAMPLE_DESC_SIZE];    
    int val;                          
};

typedef struct Example Example; 
```

可以缩短为

```
typedef struct Example {
    char description[EXAMPLE_DESC_SIZE];    
    int val;                          
}Example; 
```

您应该考虑按值返回结构是否是个好主意，因为这意味着每次都将它们从堆栈区域复制到堆栈区域。根据结构的大小，在某些情况下这可能会破坏您的堆栈。也许你应该考虑一下动态分配和指针传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:12:59.877

`->`使用 a而不是 a似乎是一个简单的问题`.`。

`->`用于指针，所以如果你有`TYPE *temp`你会使用`->`.

这应该有效：

```
TYPE createTask (int val, char *desc)
{
    TYPE temp;
    temp.val = val;
    strcpy(temp.description, desc);
    return temp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:49:00.367

反问：为什么要使用通用名称而不是`TYPE`特定名称`Example`？`struct Example`您最好坚持使用特定名称。除此之外，如果您有另一个有条件地定义的标头`TYPE`，那么您最终会得到非常奇怪的效果，具体取决于首先包含哪个标头。

接受你想使用`TYPE`pro tem，你的函数只需要一个变量 - 要么`temp`要么`example`。这些中的任何一个都可以工作并且有意义：

```
TYPE createExample(int val, char *desc)
{
    struct Example example;
    example.val = val;
    strcpy(example.description, desc);

    return example;
} 
```

注意从`->`到的变化`.`；您正在处理本地结构，而不是指向结构的指针。

```
TYPE createExample(int val, char *desc)
{
    TYPE temp;
    temp.val = val;
    strcpy(temp.description, desc);

    return temp;
} 
```

就个人而言，我更希望看到：

```
Example createExample(int val, char *desc)
{
    Example example;
    example.val = val;
    strncpy(example.description, desc, sizeof(example.description)-1);
    example.description[sizeof(example.description)-1] = '\0';
    return example;
} 
```

`Example`从符号上讲，这始终使用 typedef 名称。如果您要使用`struct Example`，那么不要打扰 typedef。

另一个更改确保初始化不会导致缓冲区溢出。在这个阶段，防止像这样的缓冲区溢出对您来说可能有点陌生，但它非常谨慎。还有其他方法可以做到这一点，例如：

```
size_t len = strlen(desc);
if (len >= sizeof(example.description))
    len = sizeof(example.description) - 1;
memmove(example.description, desc, len);
example.description[len] = '\0'; 
```

我可能会使用这个；有一些违反直觉的属性`strncpy()`使其不太理想（值得注意的是，它不保证空终止，但它保证覆盖目标缓冲区中的每个字节（直到指定的长度），即使源字符串短得多比目标缓冲区）。

# graph - 在图中找到所有切割的算法

> ID：15047207
> 
> 赞同：1
> 
> 时间：2013-02-24T00:07:47.720
> 
> 标签：graph, flow

我正在寻找一种有效的算法，它可以帮助我列出图表中的所有切口。该图是一个流网络（有向图），具有固定的源和汇。我想找出所有可能的切割集，一侧为源，另一侧为下沉。

请注意，优先级是找到所有割集，而不是最小割。

例如，考虑具有以下边列表的图： s-->a-->t s-->b-->t

上图的割集是：{sa,sb}, {at,bt}, {sa,sb,at}, {sa,sb,bt}, {sa,sb,at,bt}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-23T14:07:18.463

它不能有效，因为您有指数级的削减量。你有源是 S，T 中的汇，其中 ST 是切割。现在想一想：对于每个顶点，它可以在 S 中，也可以在 T 中。将所有顶点视为一个长二进制数，其中 1 表示顶点 i 在 S 中，0 表示它在 T 中。

你有多少选择？如果你有 n 个顶点，你可以有多少个不同的二进制数？答案是 2^n，但我们可以忽略水槽和水槽，但它不是母亲，我们仍然有 O(2^n) 用于不同的切割。

# objective-c - 收藏列表 iOS 6 位置数据

> ID：15047211
> 
> 赞同：0
> 
> 时间：2013-02-24T00:08:10.297
> 
> 标签：objective-c, ios6, favorites

我想从中加载我的数据`sqlite database`并将其放置在视图上（一张照片和描述）。

从数据库加载数据后，如何将数据放在 X 和 Y 位置？

我做了一张图片来解释它（我正在开发`iphone 5`）： ![在此处输入图像描述](../Images/47e8cd95f6d5251e526e21cb97e83c36.png)

我想也许我可以做到，`CGRect`但我不知道具体怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:23:18.070

我不确定如何在不给出代码作为答案的情况下进行解释。但作为一个正常的多维循环。计算位置并在当前子视图中添加新图像（如果可以的话）。
以下未测试：

[编辑：更新正确缩进和语法错误]

```
 CGFloat IMAGE_WIDTH = 150;
   CGFloat IMAGE_HEIGHT = 150;
   CGFloat LABEL_PADDING = 10;

for (int i = 0; i < [TOTAL_ROWS]; i++) {
    // this is the initial frame for each row
    CGRect newFrame = CGRectMake(0, i * IMAGE_HEIGHT, IMAGE_WIDTH, IMAGE_HEIGHT);
    for (int j = 0; j < [TOTAL_COLUMNS]; j++) {
        // but for column we need to more the x.position so its not stacking on itself
        newFrame = CGRectMake(IMAGE_WIDTH * j,
                              newFrame.origin.y,
                              IMAGE_WIDTH,
                              IMAGE_HEIGHT);

        UIImageView *newImageView = [[UIImageView alloc] initWithFrame:newFrame];
        newImageView.image = [UIImage imageNamed:@"image.png"];
         // create a label at the bottom of the image
        UILabel *newLabel = [[UILabel alloc] initWithFrame:CGRectMake(newFrame.origin.x,
                                                                      newFrame.origin.y +
                                                                      newFrame.size.height +
                                                                      LABEL_PADDING,
                                                                      newFrame.size.width,
                                                                      newFrame.size.height)];
        [newLabel setText:[NSString stringWithFormat:@"description %d", j]];
        NSLog(@"%@", NSStringFromCGRect(newFrame));
        [self.view addSubview: newImageView];
        [self.view addSubview: newLabel];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:00:29.373

重要的是，我使用了另一种更好的解决方案。

在 iOS 6 上我们有一个新的东西叫做：[CollectionViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionViewController_clas/Reference/Reference.html)

![在此处输入图像描述](../Images/2af22de92798c413d38b9d540545f7cd.png)

对于这个问题，这是一个更好的解决方案。

# php - 在php中保存特殊字符

> ID：15047216
> 
> 赞同：1
> 
> 时间：2013-02-24T00:09:14.820
> 
> 标签：php, html, ascii, special-characters

我已经阅读了几个小时，但我无法完全解决编码问题。我正在使用 PHP 指定 charset=utf-8。我希望能够在文本区域中输入某些字符，例如项目符号• 和箭头⇒。我直接保存到 mySQL 数据库，符号正确存储在那里。为了显示数据库中保存的文本，我调用以下函数来翻译文本区域的存储符号。

```
function htmlspecialchars2($string, $flags=ENT_NOQUOTES){
$string = htmlspecialchars($string, $flags);    // to help prevent code injection
$string = str_replace(chr(149), "&#8226", $string);  // converts bullet to html
$string = str_replace("⇒", "&#8658",$string);   // don't know the ascii code for the arrow
return $string;
} 
```

这适用于子弹，但不适用于箭头。关于如何保存（然后重新显示）扩展 HTML 字符的任何建议。我已经阅读了我能找到的所有内容，但缺少一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:24:07.847

您可能正在寻找[`htmlentities`](http://www.php.net/manual/en/function.htmlentities.php). 这应该将所有具有 HTML 字符实体等效项的字符转换为 HTML 实体（以反转使用[`html_entity_decode`](http://www.php.net/manual/en/function.html-entity-decode.php)）。

* * *

PS：在我的系统上，`htmlentities('⇒', ENT_COMPAT, 'UTF-8')`返回`&rArr;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:02:57.020

对于接下来的任何人，解决方案有 2 个部分

1) One Trick Pony 提到需要 htmlentities （谢谢！），这才是真正的答案。

2) 但是，另一半需要显式设置会话的编码。mysqli_set_charset($link, "utf8");

注意：新代码要简单得多。我可以简单地调用 htmlentities($string, ENT_NOQUOTES, 'UTF-8') 而不是调用上面所示的特殊函数 htmlspecialchars2()

# linux - OpenOffice 无头

> ID：15047217
> 
> 赞同：-1
> 
> 时间：2013-02-24T00:09:23.213
> 
> 标签：linux, ubuntu, openoffice.org, headless

大约一年前，我在 Ubuntu Server 上安装了 OpenOffice，没有遇到任何问题。我相信是：

sudo apt-get install openoffice.org-headless openoffice.org-writer

现在它只是告诉我它无法找到包裹。我已经尝试了所有可能的相同变化。我发现的所有示例都不再适用。是我的ubuntu安装还是其他人有问题？这是否与迁移到 LibreOffice 的每个人有关？有没有等价的？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:16:34.400

每当我需要在服务器上安装 OpenOffice headless 时，我只需安装没有推荐软件包的 Writer：

```
sudo apt-get install --no-install-recommends openoffice.org-writer 
```

它只引入严格的依赖项才能运行，这在服务器环境中是可以的。

# php - 如何在 Yii 中使用对象参数重定向到另一个动作？

> ID：15047220
> 
> 赞同：1
> 
> 时间：2013-02-24T00:10:17.633
> 
> 标签：php, yii

我有这样的结构：

```
public class CertController extends CController
{
   public function actionCreateAfterLabel(Label $labelInputs)
   {
   }
}

public class LabelController extends CController
{
   public function actionCreate(Label $label)
   {
      $this->redirect(array("Cert/CreateAfterLabel", 'labelInputs' => $label));
   }
} 
```

这不起作用，因为重定向仅适用于 GET 参数，即带有字符串的键/值。我怎样才能通过传递对象来完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:05:31.330

您可以将 Label 对象存储在会话中，然后在您的证书控制器中重定向并将对象拉出会话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:17:57.277

我认为[CHttpSession](http://www.yiiframework.com/doc/api/1.1/CHttpSession)是一个更好的解决方案，但如果你真的需要（或想要）使用重定向参数，你可以尝试[PHP Object Serialization](http://php.net/manual/en/language.oop5.serialization.php)。

# objective-c - 访问 NSMutable 数组中的数据

> ID：15047221
> 
> 赞同：0
> 
> 时间：2013-02-24T00:10:18.977
> 
> 标签：objective-c, xcode, ipad, ios6

我有一个应用程序，我在其中使用核心数据写入数据库。这是有效的，因为我可以使用 SQLLite 数据库浏览器看到那里有数据。然后我将数据检索到 NSMutable 数组中，我可以看到在调试模式下有 1 条记录使用：

```
Print self.schoolNames.count 
```

但我似乎无法读取数组。我的线路是：

```
obsSchoolName = [[self.schoolNames objectAtIndex:0] obsSavedSchoolName]; 
```

我试图访问的字段的属性名称是 obsSavedSchoolName。

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:29:21.737

假设您的 NSManagedObject 子类被命名为“School”。然后做：

```
#include "School.h"

...

School *tempSchool = [self.schoolNames objectAtIndex:0];
obsSchoolName = [tempSchool obsSavedSchoolName]; 
```

或者

```
obsSchoolName = [(School*) [self.schoolNames objectAtIndex:0] obsSavedSchoolName]; 
```

# android - 从活动启动壁纸

> ID：15047227
> 
> 赞同：1
> 
> 时间：2013-02-24T00:11:22.507
> 
> 标签：android, android-activity, live-wallpaper

我为 Android 编写了动态壁纸。壁纸工作正常，唯一的问题是用户有时会抱怨，因为安装后他们在应用程序菜单中找不到壁纸图标。

我找到了几个解决这个问题的方法。最满意的似乎是[这一款](http://www.yougli.net/android/live-wallpaper-binding-an-activity-to-the-open-button-of-the-market/)。

上面的教程建议创建一个`main`触发墙纸选择器的活动。这个解决方案非常好。但是，我更愿意从我的活动中启动我自己的动态壁纸的预览，而不是壁纸选择器。

[我在上面和这里](https://stackoverflow.com/questions/5547769/how-do-i-launch-the-preview-select-wallpaper-activity-for-my-wallpaper-from-insi)的页面评论中找到了一些建议。

但我没有设法让它们工作。

关于如何做到这一点的任何想法？谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:57:41.793

好的，我在这里找到了解决方案：[从活动启动动态壁纸服务](https://stackoverflow.com/questions/9081258/start-a-live-wallpaper-service-from-activity)

这就是我想做的，但它只适用于 4.1 以上的版本，所以如果有人有其他适用于 4.1 以下版本的解决方案，请告诉我..

# vb.net - 用于检测鼠标是否悬停在 URL 上的鼠标事件

> ID：15047229
> 
> 赞同：0
> 
> 时间：2013-02-24T00:11:40.020
> 
> 标签：vb.net, browser, mouseevent

好的，所以我有一个基本的 Web 浏览器项目（后退/前进按钮、停止/刷新以及所有必要的组件）。我正在使用工具箱中提供的 Webbrowser 对象。我怎样才能拥有它，以便当鼠标悬停在浏览器内的链接上时，它将链接显示为表单标签上的字符串（即，状态标签告诉鼠标悬停在哪个 URL 上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T15:41:07.760

```
 Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
        AddHandler WebBrowser1.Document.MouseOver, AddressOf Me.DisplayHyperlinks
    End Sub

Public Sub DisplayHyperlinks(ByVal sender As Object, ByVal e As System.Windows.Forms.HtmlElementEventArgs)
        TextBox4.Text = e.ToElement.GetAttribute("href")
    End Sub 
```

# android - 如何将字符串从 Listview 传递到另一个类中的 Fragments？

> ID：15047230
> 
> 赞同：0
> 
> 时间：2013-02-24T00:11:40.640
> 
> 标签：android, string, listview, fragment

我有 android 项目，其中 ListClass 有一个 Listview。单击 Listview 的一个项目时 - 打开 CardFlipActivity ，其中包含两个片段，这些片段设置为被视为翻页动作。我需要在顶部片段上播放视频并在 CardFlipActivity 的底部片段中显示图像

1）如何从ListClass中的listview项切换位置传递（原始文件夹视频文件和图像文件）的字符串以检索以显示在CardFlipActivity的片段中。

**列表类代码：**

```
public class ListClass extends ListActivity {
static final String VIDEO_PATH = null;
static final String IMAGE_PATH = null;
static final String VIDEO_NAME = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // storing string resources into ArrayList
    String[] coronary_pathology_clips = getResources().getStringArray(R.array.coronary_pathology_clips);
    ArrayList<String> coronary_pathology_clipsList = new ArrayList<String>(Arrays.asList(coronary_pathology_clips));

    // Binding resources ArrayList to CathListAdapter
    setListAdapter(new CathListAdapter(this,R.layout.list_item, coronary_pathology_clipsList));
    getListView().setBackgroundColor(Color.GRAY);
}   
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    change(position);
}
void change(int position){
      String selectedValue = (String) getListAdapter().getItem(position);
      Toast.makeText(this, selectedValue, Toast.LENGTH_SHORT).show();

    Intent intent = new Intent(getApplicationContext(), CardFlipActivity.class);

    switch(position){  

    case 0 :
        String path1 = "android.resource://" + getPackageName() + "/" + R.raw.video1;
        String path1a = "android.resource://" + getPackageName() + "/" + R.raw.image1;

        intent.putExtra (VIDEO_PATH, path1);  
        intent.putExtra (IMAGE_PATH, path1a);               

        break;
    case 1 :
        String path2 = "android.resource://" + getPackageName() + "/" + R.raw.video2;
        String path2a = "android.resource://" + getPackageName() + "/" + R.raw.image2;

        intent.putExtra (VIDEO_PATH, path2);  
        intent.putExtra (IMAGE_PATH, path2a);   
        break;

    } 
    Bundle dataBundle = new Bundle();
    dataBundle.putString("VIDEO_NAME", selectedValue);
    intent.putExtras(dataBundle);
    startActivity(intent);
}

} 
```

**CardFlip活动代码**

```
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentManager;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.support.v4.app.NavUtils;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class CardFlipActivity extends Activity
    implements FragmentManager.OnBackStackChangedListener {
private Handler mHandler = new Handler();
private boolean mShowingBack = false;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_card_flip);

    if (savedInstanceState == null) {
        // If there is no saved instance state, add a fragment representing the
        // front of the card to this activity. If there is saved instance state,
        // this fragment will have already been added to the activity.
        getFragmentManager()
                .beginTransaction()
                .add(R.id.container, new CardFrontFragment())
                .commit();
    } else {
        mShowingBack = (getFragmentManager().getBackStackEntryCount() > 0);
    }

    // Monitor back stack changes to ensure the action bar shows the appropriate
    // button (either "photo" or "info").
    getFragmentManager().addOnBackStackChangedListener(this);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    // Add either a "photo" or "finish" button to the action bar, depending on which page
    // is currently selected.
    MenuItem item = menu.add(Menu.NONE, R.id.action_flip, Menu.NONE,
            mShowingBack
                    ? R.string.action_photo
                    : R.string.action_info);
    item.setIcon(mShowingBack
            ? R.drawable.ic_action_photo
            : R.drawable.ic_action_info);
    item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // Navigate "up" the demo structure to the launchpad activity.
            // See http://developer.android.com/design/patterns/navigation.html for more.
            NavUtils.navigateUpTo(this, new Intent(this, ListClass.class));
            return true;

        case R.id.action_flip:
            flipCard();
            return true;
    }

    return super.onOptionsItemSelected(item);
}

private void flipCard() {
    if (mShowingBack) {
        getFragmentManager().popBackStack();
        return;
    }

    // Flip to the back.

    mShowingBack = true;

    // Create and commit a new fragment transaction that adds the fragment for the back of
    // the card, uses custom animations, and is part of the fragment manager's back stack.

    getFragmentManager()
            .beginTransaction()

            .setCustomAnimations(
                    R.animator.card_flip_right_in, R.animator.card_flip_right_out,
                    R.animator.card_flip_left_in, R.animator.card_flip_left_out)

            .replace(R.id.container, new CardBackFragment())

            .addToBackStack(null)

            .commit();

    mHandler.post(new Runnable() {
        @Override
        public void run() {
            invalidateOptionsMenu();
        }
    });
}

@Override
public void onBackStackChanged() {
    mShowingBack = (getFragmentManager().getBackStackEntryCount() > 0);

    // When the back stack changes, invalidate the options menu (action bar).
    invalidateOptionsMenu();
}

/*A fragment representing the frontcard.*/

public static class CardFrontFragment extends Fragment {
    public CardFrontFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_card_front, container, false);

    }
}

/*A fragment representing the back card.*/

public static class CardBackFragment extends Fragment {
    public CardBackFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_card_back, container, false);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:35:43.310

要将字符串传递给另一个片段，您可以使用`setArgument(bundle)`片段的方法。并接收这些字符串，您可以`getArgument()`使用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:22:11.863

您可以使用 startactivityforresult 从 listclass 获取结果。

# javascript - 返回 Javascript 变量和性能

> ID：15047232
> 
> 赞同：2
> 
> 时间：2013-02-24T00:12:05.287
> 
> 标签：javascript, jquery, variables, scope

我目前将所有脚本所需的元素缓存在类似于以下的全局对象中：

```
var MainObject={
   $El1 : $('#element1'), 
   $El2 : $('#element2')
   }; 
```

在我的方法中，我可以直接访问该对象。

```
method1:function(){
   MainObject.$El1 // DO SOMETHING WITH THIS ELEMENT
}, ... 
```

所以，我有2个问题。

我读过局部变量是最快的。像这样写我的方法会更好吗？

```
method1:function(){
    var $El1=MainObject.$El1; 
    $El1 // DO SOMETHING WITH THIS ELEMENT
}, ... 
```

如果是这样...

如果我的脚本中有*许多*引用这些元素的方法（它们很快就会变成很多行），那么压缩它们的最佳方法是什么？

```
method1:function(){
   var $El1=MainObject.$El1,
       $El2=MainObject.$El1,
       $El3=MainObject.$El1,
       $El4=MainObject.$El1;

   $El1 // DO SOMETHING WITH THIS ELEMENT
},

method2:function(){
   var $El1=MainObject.$El1,
       $El2=MainObject.$El1,
       $El3=MainObject.$El1,
       $El4=MainObject.$El1;

   $El1 // DO SOMETHING WITH THIS ELEMENT
},

method3:function(){
   var $El1=MainObject.$El1,
       $El2=MainObject.$El1,
       $El3=MainObject.$El1,
       $El4=MainObject.$El1;

   $El1 // DO SOMETHING WITH THIS ELEMENT
}, 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:35:22.727

在您测量到您在需要解决的特定方法中确实存在性能问题之前添加过早优化的代码很少，如果有的话，是一个好主意。它只是增加了更多的代码行，需要更长的时间来编写并且通常不能解决任何实际问题。

然后，当您确实有性能问题需要解决时，您需要仔细衡量以找出该方法的哪些方面真正需要时间。

* * *

是的，局部变量比全局变量更快（在全局范围之前搜索局部范围以解析变量名）。是的，多个引用`MainObject.$EL1`比单个本地引用慢。

* * *

这是我的一般经验法则。如果您只是`MainObject.$EL1`在一个方法中使用一次或两次之类的东西，那么将其缓存在局部变量中几乎没有什么好处。如果您使用它三次或更多次，那么将其缓存在本地以防止所有额外的查找是很有意义的。我通常会在 javascript 和 C++ 中做同样的事情。

如果你有一个实际的性能问题，并且你想更快地做出一些事情，那么你对性能问题主要原因的第一直觉很少是正确的。因此，分析并找出真正花费最多时间的内容是很有意义的。然后，当您进行更改时，您需要一种方法来衡量更改的影响，以了解您在添加更多代码时实际上正在发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:19:24.850

这个`getElements()`功能是不可能的

局部变量以范围结束..一旦范围结束，变量也消失了..

你应该阅读这些优秀的文章[JavaScript 变量作用域](https://stackoverflow.com/questions/500431/javascript-variable-scope)和[变量作用域](http://javascript.about.com/library/bltut07.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:53:27.377

局部变量更快，但不是很多。您需要在函数内多次访问变量，以弥补首先将值复制到局部变量所需的时间。如果你只使用一次，你只会浪费那段时间。

这是一个性能测试：http: [//jsperf.com/variables-vs-properties-2](http://jsperf.com/variables-vs-properties-2)

您不仅可以看到在对象中查找属性和使用局部变量之间没有太大区别，您还可以看到您必须这样做数百万次才能发现差异。

# ios6 - xcode链接器错误重复符号ios

> ID：15047234
> 
> 赞同：0
> 
> 时间：2013-02-24T00:12:38.693
> 
> 标签：ios6, duplicates, xcode4.5, linker-errors, symbols

我知道堆栈上有很多这类问题，但没有一个回答对我有帮助，所以我在这里，卡住了。

## Dropbox 底部的图片链接

构建 iOS xcode 项目时出现错误。它说有重复的符号，但我似乎无法弄清楚为什么它说有重复......

正如您在我的第二个屏幕截图中看到的那样，我的构建设置中没有重复项。

我尝试了这篇文章中提供的选项，但没有一个有效：[链接器命令失败，退出代码为 1（使用 -v 来查看调用）](https://stackoverflow.com/questions/10435213/linker-command-failed-with-exit-code-1-use-v-to-see-invocation)

编译器所说的重复变量位于 cellConstants.h 中，我将其导入到`DNZListCell.m`和`DNZTaskCell.m`

任何帮助将不胜感激。

谢谢！！

## 细胞常数.h

```
#ifndef Donzo_cellConstants_h
#define Donzo_cellConstants_h

const float UI_CUES_MARGIN = 10.0f;
const float UI_CUES_WIDTH = 50.0f;

const float LABEL_LEFT_MARGIN = 15.0f;
const float LABEL_WIDTH = 150.0f;

const float TASK_LABEL_WIDTH = 60.0f;

#endif 
```

## DNZListCell.h

```
#import <UIKit/UIKit.h>
#import "DNZList.h"
#import "DNZListTableViewCellDelegate.h"

@class DNZStrikethroughLabel;
@interface DNZListCell : UITableViewCell <UITextFieldDelegate>

// The item that this cell renders
@property (nonatomic) DNZList *listItem;

// The object that acts as delegate for this cell.
@property (nonatomic, assign) id<DNZListTableViewCellDelegate> delegate;

@end 
```

## DNZListCell.m

```
//
//  DNZListCell.m
//  Donzo
//
//  Created by Matt Wahlig on 2/22/13.
//  Copyright (c) 2013 Matt Wahlig. All rights reserved.
//

#import "DNZListCell.h"
#import <QuartzCore/QuartzCore.h>
#import "DNZStrikethroughLabel.h"
#import "DNZShowListSegue.h"
#import "cellConstants.h"

@implementation DNZListCell {
    CGPoint _originalCenter;
    BOOL _deleteOnDragRelease;
    DNZStrikethroughLabel *_label;
    UILabel *_taskCountLabel;
    UILabel *_crossLabel;
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        _label = [[DNZStrikethroughLabel alloc] initWithFrame:CGRectNull];
        _label.textColor = [UIColor whiteColor];
        _label.font = [UIFont fontWithName:@"nevis" size:28];
        _label.backgroundColor = [UIColor clearColor];
        _label.delegate = self;
        _label.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        [self addSubview:_label];
        // remove the default blue highlight for selected cells
        self.selectionStyle = UITableViewCellSelectionStyleNone;

        _taskCountLabel = [[UILabel alloc] initWithFrame:CGRectNull];
        _taskCountLabel.font = [UIFont fontWithName:@"nevis" size:26];
        [_taskCountLabel setTextAlignment:NSTextAlignmentCenter];
        [self addSubview:_taskCountLabel];

        _crossLabel = [self createCueLabel];
        _crossLabel.text = @"\uf00d";
        _crossLabel.textAlignment = NSTextAlignmentLeft;
        [self addSubview:_crossLabel];

        UIPanGestureRecognizer* recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
        recognizer.delegate = self;
        [self addGestureRecognizer:recognizer];

        UITapGestureRecognizer *singleFingerTap =
        [[UITapGestureRecognizer alloc] initWithTarget:self
                                                action:@selector(handleSingleTap:)];
        [self addGestureRecognizer:singleFingerTap];
    }
    return self;
}

-(void)layoutSubviews {
    [super layoutSubviews];
    // ensure the gradient layers occupies the full bounds
    _label.frame = CGRectMake(LABEL_LEFT_MARGIN, 0,
                              self.bounds.size.width-LABEL_LEFT_MARGIN-TASK_LABEL_WIDTH,self.bounds.size.height);
    _taskCountLabel.frame = CGRectMake(LABEL_LEFT_MARGIN+_label.frame.size.width, 0, TASK_LABEL_WIDTH, TASK_LABEL_WIDTH);
    _crossLabel.frame = CGRectMake(self.bounds.size.width + UI_CUES_MARGIN, 0,
                                   UI_CUES_WIDTH, self.bounds.size.height);
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

-(void)setListItem:(DNZList *)listItem {
    _listItem = listItem;
    // we must update all the visual state associated with the model item
    _label.text = [listItem.listName uppercaseString];
    _taskCountLabel.text = [NSString stringWithFormat:@"%i",listItem.taskArray.count];
    _taskCountLabel.textColor = _listItem.listColorScheme.listBackgroundColor;
    _taskCountLabel.backgroundColor = _listItem.listColorScheme.toolbarBackgroundColor;
}

-(UILabel*) createCueLabel {
    UILabel* label = [[UILabel alloc] initWithFrame:CGRectNull];
    label.textColor = [UIColor whiteColor];
    label.font = [UIFont fontWithName:@"FontAwesome" size:28];
    label.backgroundColor = [UIColor clearColor];
    return label;
}

#pragma mark - single tap gesture methods

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    [self.delegate listCellClicked:self];
}

#pragma mark - horizontal pan gesture methods
-(BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer {
    if([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]]) {
        return NO;
    }
    CGPoint translation = [gestureRecognizer translationInView:[self superview]];
    // Check for horizontal gesture
    if (fabsf(translation.x) > fabsf(translation.y)) {
        return YES;
    }
    return NO;
}

-(void)handlePan:(UIPanGestureRecognizer *)recognizer {
    // 1
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        // if the gesture has just started, record the current centre location
        _originalCenter = self.center;
    }

    // 2
    if (recognizer.state == UIGestureRecognizerStateChanged) {
        // translate the center
        CGPoint translation = [recognizer translationInView:self];
        self.center = CGPointMake(_originalCenter.x + translation.x, _originalCenter.y);
        // determine whether the item has been dragged far enough to initiate a delete / complete
        _deleteOnDragRelease = self.frame.origin.x < -_crossLabel.frame.size.width; //-self.frame.size.width / 2;

        // fade the contextual cues
        float cueAlpha = fabsf(self.frame.origin.x) / _crossLabel.frame.size.width;//(self.frame.size.width / 2);
        _crossLabel.alpha = cueAlpha;

        // indicate when the item have been pulled far enough to invoke the given action
        _crossLabel.textColor = _deleteOnDragRelease ?
        [UIColor colorWithRed:242/255.0 green:108/255.0 blue:79/255.0 alpha:1] : [UIColor whiteColor];

    }

    // 3
    if (recognizer.state == UIGestureRecognizerStateEnded) {
        // the frame this cell would have had before being dragged
        CGRect originalFrame = CGRectMake(0, self.frame.origin.y,
                                          self.bounds.size.width, self.bounds.size.height);
        if (!_deleteOnDragRelease) {
            // if the item is not being deleted, snap back to the original location
            [UIView animateWithDuration:0.2
                             animations:^{
                                 self.frame = originalFrame;
                             }
             ];
        }
        if (_deleteOnDragRelease) {
            // notify the delegate that this item should be deleted
            [self.delegate listItemDeleted:self.listItem];
        }
    }

}

#pragma mark - UITextFieldDelegate
-(BOOL)textFieldShouldReturn:(UITextField *)textField {
    // close the keyboard on enter
    [textField resignFirstResponder];
    return NO;
}
//
//-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
//    // disable editing of completed to-do items
//    return !self.listItem.completed;
//}

-(void)textFieldDidBeginEditing:(UITextField *)textField {
    [self.delegate cellDidBeginEditing:self];
}

-(void)textFieldDidEndEditing:(UITextField *)textField {

    // set the model object state when an edit has complete
    self.listItem.listName = textField.text;

    [self.delegate cellDidEndEditing:self];
}

@end 
```

## DNZTaskCell.h

```
#import <UIKit/UIKit.h>
#import "DNZTask.h"
#import "DNZTaskTableViewCellDelegate.h"

@class DNZStrikethroughLabel;
@interface DNZTaskCell : UITableViewCell <UITextFieldDelegate>

// The item that this cell renders
@property (nonatomic) DNZTask *taskItem;

// The object that acts as delegate for this cell.
@property (nonatomic, assign) id<DNZTaskTableViewCellDelegate> delegate;

@end 
```

## DNZTaskCell.m

```
#import "DNZTaskCell.h"
#import <QuartzCore/QuartzCore.h>
#import "DNZStrikethroughLabel.h"
#import "cellConstants.h"

@implementation DNZTaskCell {
    CGPoint _originalCenter;
    BOOL _deleteOnDragRelease;
    DNZStrikethroughLabel *_label;
    UILabel *_crossLabel;
}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        _label = [[DNZStrikethroughLabel alloc] initWithFrame:CGRectNull];
        _label.textColor = [UIColor whiteColor];
        _label.font = [UIFont fontWithName:@"nevis" size:28];
        _label.backgroundColor = [UIColor clearColor];
        _label.delegate = self;
        _label.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
        [self addSubview:_label];
        // remove the default blue highlight for selected cells
        self.selectionStyle = UITableViewCellSelectionStyleNone;

        _crossLabel = [self createCueLabel];
        _crossLabel.text = @"\uf00d";
        _crossLabel.textAlignment = NSTextAlignmentLeft;
        [self addSubview:_crossLabel];

        UIPanGestureRecognizer* recognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePan:)];
        recognizer.delegate = self;
        [self addGestureRecognizer:recognizer];

        UITapGestureRecognizer *singleFingerTap =
        [[UITapGestureRecognizer alloc] initWithTarget:self
                                                action:@selector(handleSingleTap:)];
        [self addGestureRecognizer:singleFingerTap];
    }
    return self;
}

-(void)layoutSubviews {
    [super layoutSubviews];
    // ensure the gradient layers occupies the full bounds
    _label.frame = CGRectMake(LABEL_LEFT_MARGIN, 0,
                              self.bounds.size.width-LABEL_LEFT_MARGIN-TASK_LABEL_WIDTH,self.bounds.size.height);
    _crossLabel.frame = CGRectMake(self.bounds.size.width + UI_CUES_MARGIN, 0,
                                   UI_CUES_WIDTH, self.bounds.size.height);
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

-(void)setTaskItem:(DNZTask *)taskItem {
    _taskItem = taskItem;
    // we must update all the visual state associated with the model item
    _label.text = [taskItem.taskName uppercaseString];

}

-(UILabel*) createCueLabel {
    UILabel* label = [[UILabel alloc] initWithFrame:CGRectNull];
    label.textColor = [UIColor whiteColor];
    label.font = [UIFont fontWithName:@"FontAwesome" size:28];
    label.backgroundColor = [UIColor clearColor];
    return label;
}

#pragma mark - single tap gesture methods

- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer {
    [self.delegate taskCellClicked:self];
}

#pragma mark - horizontal pan gesture methods
-(BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer {
    if([gestureRecognizer isKindOfClass:[UILongPressGestureRecognizer class]]) {
        return NO;
    }
    CGPoint translation = [gestureRecognizer translationInView:[self superview]];
    // Check for horizontal gesture
    if (fabsf(translation.x) > fabsf(translation.y)) {
        return YES;
    }
    return NO;
}

-(void)handlePan:(UIPanGestureRecognizer *)recognizer {
    // 1
    if (recognizer.state == UIGestureRecognizerStateBegan) {
        // if the gesture has just started, record the current centre location
        _originalCenter = self.center;
    }

    // 2
    if (recognizer.state == UIGestureRecognizerStateChanged) {
        // translate the center
        CGPoint translation = [recognizer translationInView:self];
        self.center = CGPointMake(_originalCenter.x + translation.x, _originalCenter.y);
        // determine whether the item has been dragged far enough to initiate a delete / complete
        _deleteOnDragRelease = self.frame.origin.x < -_crossLabel.frame.size.width; //-self.frame.size.width / 2;

        // fade the contextual cues
        float cueAlpha = fabsf(self.frame.origin.x) / _crossLabel.frame.size.width;//(self.frame.size.width / 2);
        _crossLabel.alpha = cueAlpha;

        // indicate when the item have been pulled far enough to invoke the given action
        _crossLabel.textColor = _deleteOnDragRelease ?
        [UIColor colorWithRed:242/255.0 green:108/255.0 blue:79/255.0 alpha:1] : [UIColor whiteColor];

    }

    // 3
    if (recognizer.state == UIGestureRecognizerStateEnded) {
        // the frame this cell would have had before being dragged
        CGRect originalFrame = CGRectMake(0, self.frame.origin.y,
                                          self.bounds.size.width, self.bounds.size.height);
        if (!_deleteOnDragRelease) {
            // if the item is not being deleted, snap back to the original location
            [UIView animateWithDuration:0.2
                             animations:^{
                                 self.frame = originalFrame;
                             }
             ];
        }
        if (_deleteOnDragRelease) {
            // notify the delegate that this item should be deleted
            [self.delegate taskItemDeleted:self.taskItem];
        }
    }

}

#pragma mark - UITextFieldDelegate
-(BOOL)textFieldShouldReturn:(UITextField *)textField {
    // close the keyboard on enter
    [textField resignFirstResponder];
    return NO;
}
//
//-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
//    // disable editing of completed to-do items
//    return !self.listItem.completed;
//}

-(void)textFieldDidBeginEditing:(UITextField *)textField {
    [self.delegate cellDidBeginEditing:self];
}

-(void)textFieldDidEndEditing:(UITextField *)textField {

    // set the model object state when an edit has complete
    self.taskItem.taskName = textField.text;

    [self.delegate cellDidEndEditing:self];
}

@end 
```

## 错误截图

### Xcode 错误

```
https://www.dropbox.com/s/ppvb722gteaaxfi/xcode_Error.png 
```

### 构建设置

```
https://www.dropbox.com/s/cljczenwyc7i5pr/build-settings.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:35:33.147

问题是你使用`cellConstants.h`

您需要 extern 变量，这样您就不会在每次导入文件时都对其进行新的声明。

也创建一个`cellConstants.m`。

更改您`cellConstants.h`的所有变量为`extern`

## 细胞常数.m

```
const float UI_CUES_MARGIN = 10.0f; 
```

## 细胞常数.h

```
extern float UI_CUES_MARGIN; 
```

# r - 试图从 quantmod 图表上的 COT 报告中绘制未平仓合约

> ID：15047235
> 
> 赞同：2
> 
> 时间：2013-02-24T00:12:42.560
> 
> 标签：r, xts, quantmod

我正在尝试将 COT（交易者承诺报告）加载到 xts 对象中，因此我可以将其绘制在具有不同符号的图表上。

我有这个数据：

```
 OI      Smart_Long  Smart_Short Comm_Long Comm_Short
2013-01-08 227030      67302       75623     88628      77408
2013-01-15 255620      79789       73214     89670     100277
2013-01-22 260817      83253       62843     92014     115104
2013-01-29 294272      91088       67119    105281     130716
2013-02-05 325352      91454       60687    122242     151926
2013-02-12 286854      85577       61319    108681     139583
2013-02-19 282781      79810       59322    107203     133294 
```

（[http://pastebin.com/raw.php?i=5Y9nV0Us](http://pastebin.com/raw.php?i=5Y9nV0Us)）

这个R代码：

```
########################################
#Get the data
setInternet2(TRUE)
con = gzcon(url('http://www.systematicportfolio.com/sit.gz', 'rb'))
    source(con)
close(con)

library(quantmod)
EURUSD = getSymbols.fxhistoricaldata('EURUSD', 'hour', auto.assign = F, download=T)
EURO_cot <- read.table("http://pastebin.com/raw.php?i=5Y9nV0Us",header=F,sep=",")

###########################################
#Format the data
EURO_dates <- as.POSIXlt(EURO_cot[,3])
EURO_cot <- EURO_cot[,c(8,9,10,12,13)]

headers2<- c("OI", 
"Smart_Long", "Smart_Short", 
"Comm_Long", "Comm_Short")
colnames(EURO_cot) <- headers2
EURO_xts <- as.xts(EURO_cot, EURO_dates)
###########################################
#Plot the data
chartSeries(to.weekly(EURUSD[,1]['2013-01-01::2013-02-16']))
addTA(EURO_xts[,1]['2013-01-01::2013-02-16'])

Error in plot.window(...) : need finite 'ylim' values
In addition: Warning messages:
1: In min(tav * 0.975, na.rm = TRUE) :
  no non-missing arguments to min; returning Inf
2: In max(tav * 1.05, na.rm = TRUE) :
  no non-missing arguments to max; returning -Inf
3: In min(x) : no non-missing arguments to min; returning Inf
4: In max(x) : no non-missing arguments to max; returning -Inf 
```

感谢您提供的所有帮助！

PS。可从此处下载原始 cot 数据， [http://www.cftc.gov/MarketReports/CommitmentsofTraders/HistoricalCompressed/index.htm](http://www.cftc.gov/MarketReports/CommitmentsofTraders/HistoricalCompressed/index.htm)

在*期货和期权组合报告下：*部分

# android - Android 编程 onCreate 方法

> ID：15047238
> 
> 赞同：0
> 
> 时间：2013-02-24T00:12:55.613
> 
> 标签：android, android-intent

我一直在将这个程序作为一项任务进行工作，我一直试图回答这个问题，对我来说应该只是：

```
Bundle data = getIntent().getExtras(); 
```

但这是不正确的！下面的代码和下面的问题是导致我得到这个答案的原因。

```
import android.app.Activity;
import android.os.Bundle;

public class HelloWorld extends Activity {

    /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   }
  } 
```

我需要获取`Intent`该类将从中接收的对象`HelloWorldActivity`。所以，

声明一个名为 data 的 Bundle 类型的新变量，并为其分配`getIntent().getExtras()`从此类调用的值。

所以我搜索并搜索了我不明白的答案。

我再次回答：

```
Bundle data = getIntent().getExtras(); 
```

这是不正确的。有人可以向我解释我错过了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:49:40.807

您假设启动 Activity 的传入 Intent 在其扩展数据中包含一个 Bundle。也就是说，HelloWorldActivity 必须执行以下操作：

意图 sendIntent = newIntent(this, HelloWorld.class); // 或其他方式将 Intent 指向正确的 Activity Bundle sendBundle = new Bundle(); // 将数据放入 Bundle 的一些示例 // 注意键应该使用包前缀。sendBundle.putString("com.example.android.myapp.HELLOWORLD_KEY","Hello, World"); // 等等 sendIntent.putExtras(sendBundle); 开始活动（发送意向）；

如果你这样做，那么在 HelloWorld 中你可以调用

捆绑数据 = getIntent().getExtras();

这将返回您放入 sendBundle 的内容。

即使我使用显式 Intent，我通常也会将操作添加到传出 Intent。这使我可以在其他地方检查传入的 Intent 以获取正确的操作。在尝试对其进行操作之前，我还测试了 Intent 中的扩展数据不为空。

最后，记住语句

捆绑数据 = getIntent().getExtras();

应该在 onCreate();

# playframework - Play Framework 2 多个生产实例

> ID：15047239
> 
> 赞同：0
> 
> 时间：2013-02-24T00:12:55.517
> 
> 标签：playframework, production-environment, multiple-instances, playframework-2.1

我创建了两个单独的 Play！框架 2.1.0 应用程序： a`front-end`和 a `cms`，应该在不同的端口上运行。这些项目共享大量代码，并连接到同一个数据库（使用相同的凭据）。

我已经用`play dist`. 我可以启动任何一个（`front-end/start -Dhttp.port=1234 &`），它会创建一个 PID 文件并按预期运行。

但是，当我启动另一个项目 ( `back-end/start -Dhttp.port=5678 &`) 时，我看到该项目开始了，但第一个项目被杀死了！

这两个项目在彼此独立时都可以正常工作，而且我启动它们的顺序似乎没有任何区别。

我已经改变了，`application secret`所以他们是不同的。

请注意，第一个进程在尝试在浏览器中访问它时会被杀死（在验证第二个进程是否正常工作之后），但它的 PID 文件永远不会被删除。

编辑：如下所示，我在两个终端中运行了这两个应用程序，这就是发生的事情：

```
./start -Dhttp.port=9000 -Dlogger.root=DEBUG -Dlogger.play=DEBUG -Dlogger.application=DEBUG
Play server process ID is 12870
[debug] c.j.b.BoneCPDataSource - JDBC URL = jdbc:mysql://localhost/hp?useUnicode=yes&characterEncoding=UTF-8&connectionCollation=utf8_general_ci, Username = hp, partitions = 1, max (per partition) = 30, min (per partition) = 5, helper threads = 0, idle max age = 10 min, idle test period = 1 min
[info] play - database [default] connected at jdbc:mysql://localhost/hp?useUnicode=yes&characterEncoding=UTF-8&connectionCollation=utf8_general_ci
[debug] o.r.Reflections - going to scan these urls:
jar:file:/var/play-apps/hp-frontend-1.0/lib/hp-frontend_2.10-1.0.jar!/
jar:file:/var/play-apps/hp-frontend-1.0/lib/play.play_2.10-2.1.0.jar!/

[info] o.r.Reflections - Reflections took 213 ms to scan 2 urls, producing 12 keys and 24 values 
[info] c.a.e.s.c.DefaultServerFactory - DatabasePlatform name:default platform:mysql
[debug] c.a.e.c.AbstractNamingConvention - Using maxConstraintNameLength of 64
[debug] c.a.e.s.l.t.ThreadPool - ThreadPool grow created [Ebean-default.0] size[0]
[debug] c.a.e.a.ClassLoadContext - Context and Caller ClassLoader's same instance of sun.misc.Launcher$AppClassLoader
[info] c.a.e.s.s.SubClassManager - SubClassFactory parent ClassLoader       [sun.misc.Launcher$AppClassLoader]
[debug] c.a.e.a.ClassLoadContext - Context and Caller ClassLoader's same instance of sun.misc.Launcher$AppClassLoader
[debug] c.a.e.s.t.DefaultTypeManager - Registering Joda data types
[debug] c.a.e.s.d.BeanDescriptorManager - BeanPersistControllers[0] BeanFinders[0] BeanPersistListeners[0] BeanQueryAdapters[0]
[debug] c.a.e.s.d.p.DeployCreateProperties - Skipping transient field _ebean_identity in play.db.ebean.Model
[debug] c.a.e.s.d.p.DeployCreateProperties - Skipping transient field _ebean_identity in play.db.ebean.Model
[debug] c.a.e.s.d.p.DeployCreateProperties - Skipping transient field _ebean_identity in play.db.ebean.Model
[info] c.a.e.s.d.BeanDescriptorManager - Explicit sequence on models.CmsPage but not supported by DB Platform - ignored
[info] c.a.e.s.d.BeanDescriptorManager - Explicit sequence on models.Image but not supported by DB Platform - ignored
[debug] c.a.e.s.d.BeanDescriptor - BeanDescriptor initialise models.CmsPage
[debug] c.a.e.s.d.BeanDescriptor - BeanDescriptor initialise models.Image
[debug] c.a.e.s.d.BeanDescriptor - BeanDescriptor initialise models.PagesImages
[info] c.a.e.s.d.BeanDescriptorManager - Entities enhanced[3] subclassed[0]
[debug] j.m.mbeanserver - ObjectName = JMImplementation:type=MBeanServerDelegate
[debug] j.m.mbeanserver - name = JMImplementation:type=MBeanServerDelegate
[debug] j.m.mbeanserver - Send create notification of object JMImplementation:type=MBeanServerDelegate
[debug] j.m.mbeanserver - JMX.mbean.registered JMImplementation:type=MBeanServerDelegate
[debug] j.m.mbeanserver - ObjectName = Ebean:server=default2,function=Logging
[debug] j.m.mbeanserver - name = Ebean:server=default2,function=Logging
[debug] j.m.mbeanserver - Send create notification of object Ebean:function=Logging,server=default2
[debug] j.m.mbeanserver - JMX.mbean.registered Ebean:server=default2,function=Logging
[debug] j.m.mbeanserver - ObjectName = Ebean:server=default2,key=AutoFetch
[debug] j.m.mbeanserver - name = Ebean:server=default2,key=AutoFetch
[debug] j.m.mbeanserver - Send create notification of object  Ebean:key=AutoFetch,server=default2
[debug] j.m.mbeanserver - JMX.mbean.registered Ebean:server=default2,key=AutoFetch
[debug] c.a.ebean.Ebean - GlobalProperties.isSkipPrimaryServer()
[debug] n.s.e.c.ConfigurationFactory - Configuring ehcache from ehcache.xml found in the classpath: jar:file:/var/play-apps/hp-frontend-1.0/lib/play.play_2.10-2.1.0.jar!/ehcache.xml
[debug] n.s.e.c.ConfigurationFactory - Configuring ehcache from URL: jar:file:/var/play-apps/hp-frontend-1.0/lib/play.play_2.10-2.1.0.jar!/ehcache.xml
[debug] n.s.e.c.ConfigurationFactory - Configuring ehcache from InputStream
[debug] n.s.e.c.BeanHandler - Ignoring ehcache attribute xmlns:xsi
[debug] n.s.e.c.BeanHandler - Ignoring ehcache attribute xsi:noNamespaceSchemaLocation
[debug] n.s.e.CacheManager - Creating new CacheManager with default config
[debug] n.s.e.u.PropertyUtil - propertiesString is null.
[debug] n.s.e.c.ConfigurationHelper - No CacheManagerEventListenerFactory class  specified. Skipping...
[debug] n.s.e.Cache - No BootstrapCacheLoaderFactory class specified. Skipping...
[debug] n.s.e.Cache - CacheWriter factory not configured. Skipping...
[debug] n.s.e.c.ConfigurationHelper - No CacheExceptionHandlerFactory class specified.  Skipping...
[debug] n.s.e.s.MemoryStore - Initialized net.sf.ehcache.store.NotifyingMemoryStore for play
[debug] n.s.e.Cache - Initialised cache: play
[debug] n.s.e.c.ConfigurationHelper - CacheDecoratorFactory not configured for defaultCache. Skipping for 'play'.
[info] play - Application started (Prod)
[info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9000
---> Browsed to :9000 here. Waited a minute, then this appeared:
Killed 
```

第二个过程：

```
 ./start -Dhttp.port=9010 -Dlogger.play=DEBUG
Play server process ID is 12758
[info] play - database [default] connected at jdbc:mysql://localhost/hp?    useUnicode=yes&characterEncoding=UTF-8&connectionCollation=utf8_general_ci
[info] play - Application started (Prod)
[info] play - Listening for HTTP on /0:0:0:0:0:0:0:0:9010
->Here, I browsed to :9010 and after 30 secs it started working
^C 
```

（调试输出完全一样，这里省略）

我多次尝试了这个过程，结果有一些细微的变化：当等待第一个应用程序在启动第二个应用程序之前达到“侦听 HTTP”时，第二个应用程序从未通过“数据库 [默认] 连接”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:32:36.867

您的问题很奇怪，您应该能够同时启动两个应用程序并且应该没有问题。在不同的端口上运行不同的应用程序（甚至在许多情况下运行**相同的**应用程序）是很常见的情况，我什至无法想象是什么导致了所描述的行为。

文件仍未删除的事实`RUNNING_PID`表明，发生了一些异常的程序终止，因此您的某些元素可能不允许与其他虚拟机共享某些资源。

很可能它可以在日志和/或终端中找到。在没有字符的情况下启动您的应用程序`&`- 因此它将直接将日志保存在终端中 - 在第一个应用程序被杀死后检查它所说的内容。

# java - JAVA中Synchronized和Final的关系

> ID：15047242
> 
> 赞同：1
> 
> 时间：2013-02-24T00:13:09.233
> 
> 标签：java, multithreading, synchronization, final

我想知道 JAVA 中 synchronized 和 final 之间的关系。我已经阅读了几篇文章，每个人都提到应该使用 final 字段在构造函数中初始化一个对象，否则未初始化的对象可能会导致使用同一对象的多个线程之间出现同步问题。

为了。例如下面的代码：

```
class FinalFieldExample {
  final int x;
  int y;
  static FinalFieldExample f;
  public FinalFieldExample() {
    x = 3;
    y = 4;
  }

  static void writer() {
  f = new FinalFieldExample();
  }

  static void reader() {
    if (f != null) {
    int i = f.x;
    int j = f.y;
  }
 }  
} 
```

读者可能会正确读取 x 的值，但可能会将 y 的值读取为 0，因为它没有被声明为 final。

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:20:37.327

这与最终字段语义有关。[JLS #17.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.5)给出了一个很好的总结：

> final 字段的使用模型很简单：在对象的构造函数中设置对象的 final 字段；并且不要在对象的构造函数完成之前在另一个线程可以看到它的地方写入对正在构造的对象的引用。如果遵循这一点，那么当另一个线程看到该对象时，该线程将始终看到该对象的最终字段的正确构造版本。

换句话说，只要`this`在构造过程中不让逃逸，就可以保证所有线程都会看到正确的 x 值（即 3）。

关于另一个字段 (y)，在没有同步的情况下，不保证会看到哪个值（默认值或构造函数值）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T00:28:56.840

`final`字段与线程无关。我怀疑你正在考虑的`volatile`领域确实有点像你描述的那样。

# java - 有没有办法将文件的 1/4 写入字符串缓冲区？

> ID：15047243
> 
> 赞同：0
> 
> 时间：2013-02-24T00:13:14.887
> 
> 标签：java, file, bufferedreader, filereader, stringbuffer

我有一段代码。

```
File file = new File(path);
FileReader fr = new FileReader(file);
BufferedReader br = new BufferedReader(fr);
String temp;
StringBuffer sb=new StringBuffer();
while((temp=br.readLine())!=null){          
   sb.append(temp);
   sb.append(" ");
} 
```

这将从文件中读取每一行并将其存储在 StringBuffer 中。我的文件非常大，我需要对它进行多线程处理，这样处理速度会更快。有没有办法说我只想将文件的 1/4 写入缓冲区？

我知道我不能这么说。但我想要与此等价的东西。

```
for(int i=0; i<reader.length/4; i++) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:53:01.570

You should be able to create 1 [file channel](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/FileChannel.html) per thread, and use that at offsets through the file. From a file channel you can get the file's size to work out your splits and set its current location.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:21:23.613

不，你无法解决这个问题，因为你不能同时读取文件，如果一次只有一个线程从流中读取，这将同时发生，也不是并行发生。所以那里没有任何好处，除此之外，您将拥有更难编写和阅读的代码，以及大量线程上下文切换和线程仲裁，这些都不便宜。

你可以做的不是写一个大文件，而是写更多的小文件，如果读取数据的处理很耗时，请读取一个缓冲区，然后将该缓冲区加载到内存中并行处理它，这将解决美好的。

此外，如果您使用的是单线程，请使用 StringBuilder 而不是 StringBuffer。

希望这可以帮助。

# arrays - 将变量作为索引传递给bash数组

> ID：15047246
> 
> 赞同：1
> 
> 时间：2013-02-24T00:13:50.543
> 
> 标签：arrays, bash, variables, awk

我试图在这个论坛和其他论坛上找到答案。以下是一个 bash 脚本，它应该在 for 循环中运行一系列命令。我正在从文件中读取 2 列。第一列有一个文件名列表 (FARR)，第二列是一个参数 - 处理中使用的数字 (NARR)。它将为 FARR 中的每个文件运行一组命令，并在“do”之后开始的命令中使用文件名和参数。除了 ${NARR[$N]} 没有将参数添加到行尾之外，一切都正常工作。此阶段参数为空。使用 echo $NARR 会显示完整列表。所以数据在那里......任何帮助将不胜感激。

```
#!/bin/bash

DIR='gauss_data/'
declare -i N=0
FARR=$(cat $DIR'all.dat' | awk '{if (NR!=1) print $1}')
NARR=$(cat $DIR'all.dat' | awk '{if (NR!=1) print $2}')
for f in $FARR;
do
    ./gauss_and_noise.py -i $DIR$f -o $DIR$f'.out' -d --save $DIR$f'.out.plot.png' --n0 ${NARR[$N]}
    let "N++"
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:22:14.620

你说`NARR`是一个数组，但你给它一个字符串值

也许改成这个

```
NARR=($(awk 'NR>1 {print $2}' "$DIR"all.dat)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:35:55.317

此外，要遍历数组，请使用以下语法：

```
for f in "${FARR[@]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T02:16:26.437

您可以通过使用`while`循环和`read`命令来大大简化这一点。`read`before 循环用于消耗输入文件的第一行而不使用它。不需要数组；只需在阅读时使用每个输入行。

```
dir='gauss_data'
declare -i N=0
{
    read
    while read f n rest; do
        ./gauss_and_noise.py -i "$dir/$f.out" -d \
                             --save "$dir/$f.out.plog.png" --n0 $n
        ((n++))
    done
} < $dir/all.dat 
```

# sql-server-2008 - 具有连接值的 SQL 更新列

> ID：15047247
> 
> 赞同：1
> 
> 时间：2013-02-24T00:14:02.623
> 
> 标签：sql-server-2008

我正在尝试创建一个 sql update 语句，这将使下面的当前数据看起来像下面的所需数据。

简单地说，如果父 id 为 0，那么 ErrorDescriptionWithParent 将是该行的 errorDescription。

如果父 ID 不为 0，则 errordescriptionwith parent 将是其父错误描述的连接值，由分隔符分隔 - 和子错误描述。

请参阅下面的数据以获取说明。我尝试使用 coalesce 函数，但我能够创建适当的字符串。提前致谢

**当前样本数据**

```
ID   ErrorDescription   ErrorDescriptionWithParent  ParentID
1    XYZ                                            0
2    Operator                                       1 
```

**所需的样本数据**

```
ID   ErrorDescription   ErrorDescriptionWithParent  ParentID
1    XYZ                XYZ                           0
2    Operator           XYZ-Operator                  1 
```

以下是我对 ParentID 为 0 的记录的更新语句。我只需要帮助创建更新 statemet 以在 ParentID 不为 0 时更新 ErrorDescriptionWithParent。谢谢

```
 UPDATE errorcode
set ErrorDescriptionWithParent = ErrorDescription
where parentID = 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:53:59.997

就像是：

```
update e
set ErrorDescriptionWithParent = isnull(p.ErrorDescription + '-', '') + e.ErrorDescription
from errorcode e
  left join errorcode p on e.ParentID = e.ID 
```

应该管用。

# php - 删除 php-mysql 结果行中的重复字段

> ID：15047248
> 
> 赞同：0
> 
> 时间：2013-02-24T00:14:02.913
> 
> 标签：php, mysql

在我执行查询并循环遍历结果以组成记录数组后，当我 var_dump 该数组时，我看到以下内容：

```
大批
  0 =>
    大批
      0 => 字符串 '1'
      'id' => 字符串'1'
      1 => 字符串'记录一个'
      '名称' => 字符串'记录一个'
  1 =>
    大批
      0 => 字符串 '2'
      'id' => 字符串'2'
      1 => 字符串'记录二'
      'name' => string '记录二'

```

我应该怎么做才能把上面变成下面？

```
大批
  0 =>
    大批
      'id' => 字符串'1'
      '名称' => 字符串'记录一个'
  1 =>
    大批
      'id' => 字符串'2'
      'name' => string '记录二'

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:15:59.577

不要使用[`mysql_fetch_array()`](http://www.php.net/manual/en/function.mysql-fetch-array.php). 使用[`mysql_fetch_assoc()`](http://www.php.net/manual/en/function.mysql-fetch-assoc.php). （或 Mysqli 等价物）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:16:08.743

使用...从数据库中获取数据

```
 $row = mysql_fetch_assoc($result) // <--- _assoc! 
```

# concurrency - 在主管树中终止子进程的正确方法是什么

> ID：15047249
> 
> 赞同：0
> 
> 时间：2013-02-24T00:14:12.873
> 
> 标签：concurrency, erlang, erlang-otp

假设我有一个主管树，有一个父母和一些孩子。孩子们是短暂的。但被其他进程使用。父母负责将用户指向正确的孩子。

```
User  ---lookup(child)-->  Parent
User <----PidOfChild-----  Parent

User  --request(Resouce)--> Child
User <------respond------   Child 
```

假设孩子在两个序列之间关闭，关闭孩子以避免用户端崩溃的正确方法是什么？

用户可以监控孩子，但这真的有帮助吗？因为用户在一个事务中完成所有这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:33:13.293

在这种情况下，正确的解决方案是在用户端处理它：没有“关闭”孩子以使其响应用户的故障安全方法。总会有一个竞争条件会搞砸它。

如果您使用的是 gen_server:cast/call，您可以为请求失败之前等待多长时间提供超时并适当地捕获它。如果使用原始接收块：

```
receive
    some_response -> {ok, some_response}
after
    5000 -> % do something.
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T16:00:17.817

如果您正在考虑另一种方法来避免在用户端出现某些内容，那么如果您正在调用父级并立即调用子级，则可以将父级设置为消息代理。

```
User  ---request(Resouce)-->  Parent --request(Resouce)--> Child
User <---reponse------------  Parent <-response----------- Child 
```

父级必须将请求投射给子级，以避免阻塞。这样，父母也可以跟踪孩子并相应地响应用户。如果孩子关闭，它可以相应地重新启动，或者如果没有活动的请求，它可以关闭孩子。父母不应该有任何处理，因为它可能成为这种方法的瓶颈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T04:42:22.093

如果您的请求是在子关机之前构建的，您应该使用 receive ... after ... 或 gen_server:call 方案。如果您的请求是在子关闭后构建的，也许您可​​以将请求挂起直到超时或子可用。

# javascript - jquery选择错误时动态添加的图像

> ID：15047252
> 
> 赞同：2
> 
> 时间：2013-02-24T00:14:53.927
> 
> 标签：javascript, jquery

我正在使用 js/jQuery 将图像添加到我的网站，如下所示：

```
var img = document.createElement("img");
img.width = imgWidth;
img.file = fileList[i];
img.name = 'pic_' + i;
img.classList.add("obj"); 
```

但有时 url 会因为图像不存在而损坏。在这种情况下，我想隐藏损坏的图像。问题是我无法捕捉到 onerror 事件......如果有的话。我所看到的只是带有此代码的损坏图像：

```
<img width="200" src="php/upload.php?action=showPic&amp;newsId=239"> 
```

我尝试了几件事：

```
$("img").error(function () {
    alert("error");
}); 
```

或现场直播：

```
$("img").live('load',(function() { console.log("image loaded correctly"); }));
$("img").live('error',(function() { console.log("image error"); })); 
```

但是没有事件被触发：-/

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:22:34.780

如果使用 jQuery 创建图像，可以使用 error() 函数：

```
$('<img />', {width  : imgWidth, 
              src    : fileList[i], 
              name   : 'pic_' + i, 
              'class': 'obj'
}).error(function() {
    $(this).hide();
}).appendTo('somewhere'); 
```

如果它是一个原生 JS 元素，onerror 函数将是要走的路：

```
var img = document.createElement("img");
    img.width = imgWidth;
    img.name = 'pic_' + i;
    img.classList.add("obj");
    img.onerror = function() {
        this.style.display = 'none';
    }
    img.src = fileList[i]; 
```

[**小提琴**](http://jsfiddle.net/DamkP/)

不知道`img.file`是为了什么，但我假设它是您尝试设置的 src 属性，并且也`classList.add()`没有最好的浏览器支持，并且似乎是一种将类添加到新创建的元素的奇怪方法，当`img.className = 'obj'`可用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:20:14.167

当你创建你的图像 DOM 节点时，你应该附加一个 onerror 事件

```
...
img.name = 'pic_' + i;
img.onerror = hidebroken;
...

var hidebroken = function(){
    this.setAttribute('style', 'display:none !important');
} 
```

# javascript - 三.js 和 web worker 的怪异行为

> ID：15047253
> 
> 赞同：0
> 
> 时间：2013-02-24T00:15:00.743
> 
> 标签：javascript, three.js, webgl, web-worker

在 three.js 应用程序中使用网络工作者时，我遇到了一些奇怪的事情。在第一次加载新页面时，它看起来不错。

[https://dl.dropbox.com/u/42766757/beforezoom.png](https://dl.dropbox.com/u/42766757/beforezoom.png)

但是在几次页面重新加载（比如 20 次）之后，并且只有当 web 工作者正在执行时，才会发生这种情况：

[https://dl.dropbox.com/u/42766757/afterzoom.png](https://dl.dropbox.com/u/42766757/afterzoom.png)

那是我在右上角的立方体！由于某种原因，它似乎在 20 次左右重新加载后放大。

但是，如果我将屏幕大小调整为更小，立方体会弹回中间。我检查了屏幕高度/宽度的比率是否在立方体会弹回的点处始终相同，而事实并非如此。

此外，如果我继续重新加载页面，它会到达立方体消失的位置，最终屏幕变为空白。但随后我**在新窗口中**再次重新加载页面，一切都恢复原状。

起初我认为这可能与网络工作者没有正确终止有关，所以我设置了一个`beforeunload`事件处理程序来杀死我所有的工作者，但没有奏效。所以我不确定这里发生了什么。帮助！

我正在使用 chrome 24，它在 Firefox 18 中似乎不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T16:24:55.820

我之前也遇到过这个问题——这是 Chrome / Webkit 中的一个错误。但是，对于 Chrome 25 beta，我再也看不到它了。

这里有一些参考：

*   [https://bugs.webkit.org/show_bug.cgi?id=105367](https://bugs.webkit.org/show_bug.cgi?id=105367)
*   [https://code.google.com/p/chromium/issues/detail?id=133751](https://code.google.com/p/chromium/issues/detail?id=133751)

# java - 试图等待所有线程完成

> ID：15047258
> 
> 赞同：0
> 
> 时间：2013-02-24T00:15:25.037
> 
> 标签：java, multithreading

由于某种原因，在 for 循环的第二次迭代之后，当第二次启动 thread1 时，我得到了 java.lang.IllegalThreadStateException。我以为我根据此处的答案正确使用了加入[如何等待多个线程完成？](https://stackoverflow.com/questions/1252190/how-to-wait-for-a-set-of-threads-to-complete). 我的问题是为什么在第二次迭代中我得到了一个例外。

```
public void runThreads(){
        int numofTests;
        Scanner in = new Scanner(System.in);
        System.out.print("Enter the number of iterations to be completed:");
        numofTests = Integer.parseInt(in.nextLine());///Gets the number of tests from the user
        Agent agent = new Agent(numofTests);
        Smoker Pat = new Smoker ("paper", "Pam");
        Smoker Tom = new Smoker ("tobacco", "Tom");
        Smoker Matt = new Smoker ("matches", "Matt");
        Thread thread1 = new Thread(Pat);
        Thread thread2 = new Thread(Tom);
        Thread thread3 = new Thread(Matt);
        Thread thread4 = new Thread(agent);

        for (int i = 0; i < numofTests; i++){
        thread1.start();
        thread2.start();
        thread3.start();
        thread4.start();
        try {
            thread1.join();
            thread2.join();
            thread3.join();
            thread4.join();
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        }

    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T00:17:26.250

您不能多次启动线程。如果要多次执行 runnable，请重新创建一个新线程。

# c++ - 在 OpenCV 的 FlannBasedMatcher 中，培训究竟发生在什么阶段？

> ID：15047259
> 
> 赞同：1
> 
> 时间：2013-02-24T00:15:52.870
> 
> 标签：c++, opencv, classification, kdtree, feature-descriptor

以下代码使用 C++ 编写，我正在使用 OpenCV 进行实验。假设我以下列方式使用 kd-tree (FlannBasedMatcher)：

```
//these are inputs to the code snippet below. 
//They are filled with suitable values
Mat& queryDescriptors;
vector<Training> &trainCollection;
vector< vector<DMatch> >& matches;
int knn;

//setting flann parameters
const Ptr<flann::IndexParams>& indexParams=new flann::KDTreeIndexParams(4);
const Ptr<flann::SearchParams>& searchParams=new flann::SearchParams(64);
FlannBasedMatcher matcher(indexParams, searchParams);

for (int i = 0; i < trainCollection.size();i++){
    Training train = trainCollection.at(i);  
    Mat trainDescriptors(train.trainDescriptors);
    trainDescriptorCollection.push_back(trainDescriptors);
}
matcher.add(trainDescriptorCollection);
matcher.train();

//Now, we may do knnMatch (or anyother matching) 
matcher.knnMatch(queryDescriptors,matches,knn); 
```

在上面的代码中，训练似乎是在调用 train() 函数时进行的（即构建了 kd-tree）。但是，如果我们查看 train() 函数的内部，这就是问题所在：

```
void FlannBasedMatcher::train()
{
    if( flannIndex.empty() || mergedDescriptors.size() < addedDescCount )
    {
        mergedDescriptors.set( trainDescCollection );
        flannIndex = new flann::Index( mergedDescriptors.getDescriptors(), *indexParams );
    }
} 
```

这两个操作（设置训练描述符和 flann 索引，我在调用 train() 之前已经完成）。那么kd-tree究竟是什么时候建立的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:41:26.450

When the code calls FlannBasedMatcher::train(),the index of FlannBasedMatcher will be built by

```
flannIndex = new flann::Index( mergedDescriptors.getDescriptors(), *indexParams ); 
```

The code

```
if( flannIndex.empty() || mergedDescriptors.size() < addedDescCount ) 
```

is to check whether the index of FlannBasedMatcher has already been built before.If index has been built before,the train() function will skip the process of building index to save time.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T12:42:13.937

根据[文档](http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html?highlight=descriptormatcher%3a%3atrain#void%20DescriptorMatcher%3a%3atrain%28%29)，每次匹配前都会进行培训（即在您的 cae 中构建 kd-tree）。该类`cv::DescriptorMatcher`在需要时自动调用训练方法。

# php - “@”字符未使用 PHP SDK 在我的提要消息中发送

> ID：15047264
> 
> 赞同：0
> 
> 时间：2013-02-24T00:16:33.540
> 
> 标签：php, facebook

向我的个人资料页面或有趣页面发送消息时通过[PHP SDK](https://developers.facebook.com/docs/reference/php/)

“@”字符未显示在消息或标题中..

```
$gonder=$facebook->api('/'.$kid.'/feed','POST',
  array(
    'link'=>'www.facebook.com',
    'message'=>'Merhaba @ cracter not show',
    'name'=>'test message',
    'description'=>'Kimler Bizimle'
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:23:08.353

我很确定这种情况正在发生，因为在某一阶段 Facebook 会解析该标志并使用它来标记用户，就像使用普通网站时一样。不过，我不是 100% 确定这种解析是否仍在 API 级别进行。

您可能想尝试逃脱该`@`角色。也许这会让 Facebook 忽略它（曾经）的特殊意义。

你有几个逃避的选择——这些方法中的一种或多种可能是你需要的——

1.  反斜杠 -`'message'=>'Merhaba \@ cracter not show'`
2.  网址编码 -`'message'=>'Merhaba %40 cracter not show'`
3.  HTML 代码 -`'message'=>'Merhaba &#64; cracter not show'`

# css - IE8 随机渲染字体粗细

> ID：15047267
> 
> 赞同：2
> 
> 时间：2013-02-24T00:16:51.803
> 
> 标签：css, internet-explorer, web, internet-explorer-8

在 IE8 的网页上，我在 CSS 中使用 font-face 有 4 种自定义字体，每种字体中的两种用于粗体和正常权重的同一个系列。

我发现 IE8 随机将非粗体呈现为粗体，有时反之亦然。如果我坐在页面上，每次加载文本时都按刷新，看起来是随机的。

我什至尝试仅在加载所有内容后让javascript为元素设置字体-它仍然会发生。

有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T07:49:06.920

在 IE8 中使用单个字体的多个粗细和样式时，我遇到了同样的问题。Typekit 有一篇文章解释了 IE8 及以下的这个 bug：[Using multiple weights and styles](http://help.typekit.com/customer/portal/articles/6855-using-multiple-weights-and-styles)

根据他们：

“Internet Explorer 6、7 和 8 每个系列最多加载四个权重。此外，使用两个密切相关的权重（例如，400 和 500）可能只会导致正确加载一个权重。”

使用特定的变化似乎是解决这个问题的方法。像这样（来自 Myfonts.com 网络字体工具包的片段）：

```
@font-face {
  font-family: 'AvenirNextLTPro-DemiIt'; /* Demibold Italic */
  font-style: italic;
  font-weight: 600;
  src: url('webfonts/25A826_1_0.eot');
  src: url('webfonts/25A826_1_0.eot?#iefix') format('embedded-opentype'),url('webfonts/25A826_1_0.woff') format('woff'),url('webfonts/25A826_1_0.ttf') format('truetype');
}

@font-face {
  font-family: 'AvenirNextLTPro-BoldIt'; /* Bold Italic */
  font-style: italic;
  font-weight: 700;
  src: url('webfonts/25A826_6_0.eot');
  src: url('webfonts/25A826_6_0.eot?#iefix') format('embedded-opentype'),url('webfonts/25A826_6_0.woff') format('woff'),url('webfonts/25A826_6_0.ttf') format('truetype');
} 
```

```
.someclass {
  font-family: 'AvenirNextLTPro-DemiIt'; /* Demibold Italic */
  font-style: italic;
  font-weight: 600;
}
.otherclass {
  font-family: 'AvenirNextLTPro-BoldIt'; /* Bold Italic */
  font-style: italic;
  font-weight: 700;
} 
```

# javascript - 在浏览器中更改选项卡时调用正文调整大小

> ID：15047268
> 
> 赞同：1
> 
> 时间：2013-02-24T00:17:00.837
> 
> 标签：javascript, html, window-resize

我想收听窗口/浏览器的大小调整，我正在使用以下代码：

```
var reloadTimer = null; 
document.body.onresize = function() {
    if(reloadTimer) clearTimeout(reloadTimer);
    reloadTimer = window.setTimeout(function() {
        //Perform complete page reload. Calls inits again.
        var page = pageData[core.getHash()];
        page.load(page.bindings);
    }, 400);        
}; 
```

奇怪的是，当我在浏览器中更改标签时，它会被触发。不知道为什么更改标签会调整正文标签的大小并因此触发事件。我正在使用 Firefox 并且没有在其他浏览器中进行测试，所以它可能是一个 FF 错误，或者它是一个错误，我只是没有正确地做某事吗？

**更新：** 确定问题的原因是 Firebug。显然，当标签更改时，它会从窗口中移出自身，从而更改高度并发射事件。任何人都知道如何在 Firebug 中禁止这种情况发生。这在生产中不会是问题，但在开发模式下很烦人。

# colors - 对同一图表中的所有系列使用单一颜色

> ID：15047271
> 
> 赞同：4
> 
> 时间：2013-02-24T00:17:26.903
> 
> 标签：colors, highcharts

如何为单个图表中的所有系列设置相同的颜色？我的图表中有大量系列，单独设置每个系列的颜色可能很不方便。

假设我希望我的图表的所有系列都被`red`着色，我该如何去做而不需要每次都明确`series.color`设置`red`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T07:01:41.720

您可以按照 Jeremy 提到的方式进行操作，方法是为每个图表设置颜色选项。或者您可以覆盖默认颜色数组，如下所示

```
Highcharts.setOptions({
    colors:['red','green','blue']
}); 
```

这种方法的好处是您只需调用一次，然后再创建任何图表。之后的所有图表都将使用这些颜色，而无需在每个图表上设置此选项。大多数网站都有一个 common.js 或类似的 javascript 文件，通常在任何其他自定义脚本之前加载，您只需将此代码添加到该文件并忘记之后的颜色

**更新**
由于您希望同一图表中的所有系列都具有单一颜色，您可以完全覆盖颜色数组并使其只有一种颜色

```
Highcharts.getOptions().colors = ['red']; 
```

此方法将使导航器（Highstock 底部的蓝色迷你图）为默认蓝色，这必须以与选项不同的方式覆盖。

*PS上述方式不是覆盖默认选项的推荐方式，正确的方式是这样做`setOptions()`，但这会导致与现有默认值的合并，因此数组大小将大于1。*

**或者**，您可以按如下方式覆盖 getColor 方法，以始终返回您选择的颜色。同样，您需要在调用图表的构造函数之前执行此操作

```
Highcharts.Series.prototype.getColor=function(){
    this.color= '#f00';
} 
```

[**设置默认颜色@jsFiddle**](http://jsfiddle.net/jugal/4YXdP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T05:05:32.073

您可以定义一个十六进制颜色数组，然后在图表声明中使用该数组。图表对象中的所有系列都将从这个颜色数组中提取。

如果您有多个图表声明，则可以使用相同的数组。

这是 Highcharts 示例之一，添加了一组自定义颜色（[使用 jsfiddle 运行](http://jsfiddle.net/XwEKF/)）：

```
$(function () {
    var myColors = [
        '#ff0000',
        '#ff6600',
        '#ffcc00'
    ];
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'bar'
            },
            colors: myColors,
            title: {
                text: 'Stacked bar chart'
            },
            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Total fruit consumption'
                }
            },
            legend: {
                backgroundColor: '#FFFFFF',
                reversed: true
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'';
                }
            },
            plotOptions: {
                series: {
                    stacking: 'normal'
                }
            },
                series: [{
                name: 'John',
                data: [5, 3, 4, 7, 2]
            }, {
                name: 'Jane',
                data: [2, 2, 3, 2, 1]
            }, {
                name: 'Joe',
                data: [3, 4, 4, 2, 5]
            }]
        });
    });

}); 
```

希望这可以帮助！

# razor - MVC4 本地化。从视图访问 resx

> ID：15047272
> 
> 赞同：18
> 
> 时间：2013-02-24T00:17:28.197
> 
> 标签：razor, asp.net-mvc-4, localization, resx, razor-2

在我看来，我想从该文件上的特定本地资源访问资源字符串。正如您从网络表单中知道的那样：

```
(string)GetLocalResource("Title"); 
```

无痛且光滑。框架处理从文化信息代码扩展 (.en-EN.resx) 获取的 .resx 文件。

在带有 Razore 视图的 MVC4 中这可能吗？如何？

我注意到我可以将`Custom Tool`.resx 文件上的属性设置为`PublicResXFileCodeGenerator`. 这样我就可以从视图中访问它。示例：我为 index.cshtml 用丹麦语和英语创建了 2 个资源文件。就像我在网络表单中一样。这是我希望我能写的（`Custom Tool Name`属性设置为“ViewResource”）：

```
@ViewResource.Title 
```

巴姆。如果当前文化是丹麦语，标题将是“Forside”，如果是英语，它将是“Home”。但相反，我得到的唯一选择是选择一个特定的文件。并从中选择所需的字符串：

```
@ViewResource.Index_cshtml_en-EN_resx.Title 
```

那不是动态的。所以我想我可以制作一个扩展类，以某种方式取代 en-EN/da-DK。但是对于如此“简单”并且已经很好且容易集成到网络表单中的东西来说，这似乎确实是相对大量的工作。必须有另一种方式。当然，mvc 团队像其他一切一样为我们提供了一些智能机制 :)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-06-22T15:38:41.650

我使用了特殊的 .NET 文件夹`App_LocalResources`。

以下是步骤

将文件添加`.resx`到该文件夹​​（即：`Resource.resx`、、`Resource.es-ES.resx`）

右键单击每个`.resx`文件并选择`properties`并确保选择以下内容

```
Build Action: Embedded Resource 
Custom Tool: PublicResXFileCodeGenerator
Custom Tool Namespace: Resources 
```

然后在您的视图中，您可以使用`Resources`名称空间来访问`.resx`文件中的文本

```
<h2>@Resources.Resource.Global_Title<h2> 
```

`@Resources`因为那是您在 中提供的名称，`Custom Tool Namespace`因为`.Resource`那是`.resx`文件的名称

还要确保资源设置为`Public`

要从任何模型访问资源，只需添加一行

```
using Resources;  //<<-- This line

namespace Concordia_CRM.Models
{
    public class SolicitudDemo
    {
        [Required]
        [Display(Name = "SD_NombreEmpresa", ResourceType = typeof(Resource))]
        public string NombreEmpresa { get; set; }

...
} 
```

更多细节可以在这篇[文章](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)中找到。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-13T18:44:45.050

在 Visual Studio 顶部的资源设计器中，我们有一个带有标签的组合框：访问修饰符，通常将其设置为：内部，为了使其正常工作，请将其设置为：公共。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-24T01:12:13.953

如果您创建一个名为 f.ex 的文件夹。“资源”并添加 2 个文件 Index.resx 和 Index.da-DK.resx，您应该能够在剃刀视图中像这样访问它们。

```
@Resources.Index.Title 
```

然后根据当前的线程文化，它将从正确的文件中选择文本

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-27T17:23:39.233

terjetyl 让我走上了正确的道路，但我必须做一些“编码”（啊坚果）才能让它工作。我的设置是 Visual Studio 2013、MVC 5、Razor。

1.  右键单击视图的包含文件夹，选择添加 > 添加 ASP.NET 文件夹 > App_LocalResources

2.  在此处添加两个资源文件：Index.cshtml.resx 和 Index.cshtml。**fr-FR** .resx（假设您的视图称为“索引”并且您想要法语翻译）。`Build Action=Content`检查文件属性，并确保它们设置为`Custom Tool=(blank)`

3.  双击 resx 文件并填充键/值

4.  创建一个 HtmlHelper 扩展方法。

* * *

```
public static class HtmlExtensions
{
    public static MvcHtmlString Translate(this HtmlHelper htmlHelper, string key)
    {
        var viewPath = ((System.Web.Mvc.RazorView)htmlHelper.ViewContext.View).ViewPath;
        var culture = System.Threading.Thread.CurrentThread.CurrentCulture;

        var httpContext = htmlHelper.ViewContext.HttpContext;
        var val = (string)httpContext.GetLocalResourceObject(viewPath, key, culture);

        return MvcHtmlString.Create(val);
    }
} 
```

* * *

5.  在您的视图中使用扩展：

    `<p>@Html.Translate("MyKey")</p>`

解释一下，帮助程序获取视图的虚拟路径并将其传递给 HttpContext.GetLocalResourceObject()，后者决定使用哪个资源文件（并优雅地降级）。

最后一件事，确保它在您的 web.config 中：

```
<system.web>
    <globalization culture="auto" uiCulture="auto" enableClientBasedCulture="true" />
    ... 
```

我试图让这个尽可能简单。但是，请注意，通过使用此示例，除 fr-FR（例如 fr-CA）之外的法语文化将默认为基本 resx。如果您希望它比这更聪明，则需要更多代码 - 我可以根据要求提供。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-22T12:56:47.347

我从来没有让它工作。我最终使用了 .net 文件夹“App_LocalResources”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-23T14:09:30.917

我用 `@MyApp.Resources.Resources.Title`.

# ssl - 如何通过 ssl 运行 docpad？

> ID：15047273
> 
> 赞同：2
> 
> 时间：2013-02-24T00:17:32.213
> 
> 标签：ssl, https, docpad

我想让用户使用 http 和 https 访问所有站点的页面。

我还希望能够将需要加密到 https（强制 https）的某些路径（/api/* 和 /backend/*）的 http 请求重定向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:20:44.900

节点版本：v0.9.10

文档板版本：v6.21.10

[重要提示： docpad 配置文件](http://docpad.org/docs/config)的文档似乎已过时，我不得不挖掘源代码发现 serverHttp 和 serverExpress 选项现在必须在 server 选项下。

这是项目的[docpad.js](http://docpad.org/docs/config)文件：

```
var https = require('https'),
path = require('path'),
fs = require('fs'),
express = require('express');

var sslOptions = {
                  key: fs.readFileSync(path.resolve(__dirname, "../../certificates/key.pem")),
                  cert: fs.readFileSync(path.resolve(__dirname, "../../certificates/cert.pem"))
              };

serverExpress = express();
serverHttps = https.createServer(sslOptions, serverExpress);

docpadConfig = {
    environments: {
        http: {
            port: 80,
            events: {
                serverExtend: function (server) {
                    var i = 0;

                    // Redirect requests that requires https
                    server.server.get(/^\/(api|backend)\/.*/, function (req, res) {
                        res.redirect('https://' + req.headers.host + req.url)
                    });
                }
            }
        },
        https: {
            port: 443,
            server: {
                serverHttp: serverHttps,
                serverExpress: serverExpress
            }
        }
    }
};

module.exports = docpadConfig; 
```

运行两个环境：

```
docpad --env "http" run
docpad --env "https" run 
```

就是这样。

# java - 从 Android 原始资源文件中扫描句子

> ID：15047275
> 
> 赞同：2
> 
> 时间：2013-02-24T00:17:40.073
> 
> 标签：java, android, java.util.scanner, android-resources

我在 Android res/raw 文件夹中添加了一个示例文本文件，并尝试将文件的每一行添加到字符串数组列表中。

例如，假设示例文本文件包含以下行

> 采样线一
> 
> 采样线二
> 
> 采样线三

我想将这三个句子作为三个字符串添加到字符串数组列表中。我尝试了以下代码：

```
List<String> sampleList = new ArrayList<String>();    
Scanner s = null;
s = new Scanner(getResources().openRawResource(R.raw.sample));
while (s.hasNextLine()){
    sampleList.add(s.next());
}
s.close(); 
```

上面的代码将每个单词添加到数组列表中，结果数组大小为 9，而不是添加每个句子，预期数组大小为 3。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:20:38.157

使用[**Scanner#nextLine()**](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)而不是`Scanner#next()`

```
sampleList.add(s.nextLine()); 
```

扫描仪使用空白作为默认分隔符。`Scanner#next()`从此扫描器中查找并返回下一个完整的令牌。一个完整的标记前后是匹配分隔符模式的输入。

您还可以使用[**Scanner#useDelimiter(delim)**](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#useDelimiter%28java.lang.String%29)**将扫描仪的分隔符设置为下一行**(\n ) 。[](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#useDelimiter%28java.lang.String%29)

 **```
s = new Scanner(getResources().openRawResource(R.raw.sample)).useDelimiter("\n");
while (s.hasNextLine()){
   sampleList.add(s.next());
} 
```

现在您可以使用`Scanner.next()`它，因为它使用下一行（\n）作为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:22:53.330

而不是使用

```
s.next() 
```

利用

```
s.nextLine() 
```

每个[Scanner.nextLine](http://developer.android.com/reference/java/util/Scanner.html#nextLine%28%29)**

# c# - WebBrowser 控件不呈现某些页面

> ID：15047276
> 
> 赞同：2
> 
> 时间：2013-02-24T00:17:45.983
> 
> 标签：c#, .net, webbrowser-control, webpage-screenshot

我正在开发一个托管 WebBrowser 控件并保存网页屏幕截图的应用程序。（C#、VS2008、IE 9、Vista。所有都是最新的。FEATURE_BROWSER_EMULATION 设置为 0x2328）

该应用程序获取 url 列表并逐个导航到 url 并保存屏幕截图。应用程序流程简单如下：从文件中读取 url，首先使用 HttpWebRequest 获取它，如果它存在并且如果它是 html 调用 webBrowser.Navigate(url)，等到 WebBrowser.ReadyState 为 WebBrowserReadyState.Complete （处理 WebBrowser.DocumentCompleted 事件并简单在 ReadyState 为 WebBrowserReadyState.Complete 之前什么都不做），再等几秒钟以确保安全（最多测试 10 秒），保存屏幕截图并移至下一个 url。它适用于几乎所有 url（来自许多不同站点的页面），但嵌入在我的应用程序中的 WebBrowser 不会呈现某些 url，尤其是来自 www.securityfocus.com 的页面，例如：[http ://www.securityfocus.com/bid/ 52023](http://www.securityfocus.com/bid/52023)

我尝试禁用缓存，在每次请求之前清除缓存，等待最多 10 秒，只是为了给它一些时间来渲染等无济于事。我在视觉上确认 WebBrowser 没有呈现页面，这不是与保存屏幕截图相关的问题（我正在使用 BitBlt，但我认为它不相关）。页面使用 IE 正常呈现。

如果您对为什么会发生这种情况有任何建议，请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T21:50:49.660

我设法解决了这个问题！事实证明，在触发最终 DocumentCompleted 事件后，webbrowser 需要少量时间来实际呈现页面。通常我们不会注意到这种轻微的延迟，但是当您在最后一个（加载 url 时将触发许多 DocumentCompleted 事件）页面的 DocumentCompleted 之后立即运行循环时，webbrowser 在保存之前无法找到时间来呈现页面screenshot.So 你必须给它一些时间来呈现页面。

如果你天真地在 UI 线程上调用 sleep 来等待渲染，那么在你保存截图之前，渲染也会休眠，页面不会被渲染。

所以你必须在另一个线程中等待，让 UI 线程空闲以便有时间完成页面渲染，然后通过在主 UI 线程上调用 Invoke 方法从子线程返回到 UI 线程。

# c++ - decltype("Hello") 的结果是什么？

> ID：15047277
> 
> 赞同：36
> 
> 时间：2013-02-24T00:17:48.703
> 
> 标签：c++, c++11, string-literals, decltype

我从所有尝试过以下操作的编译器（GCC 4.7.2、GCC 4.8.0 beta、ICC 13.0.1、Clang 3.2、VC10）中得到了意想不到的结果：

```
#include <type_traits>

int main()
{
    // This will fire
    static_assert(
        std::is_same<decltype("Hello"), char const[6]>::value, 
        "Error!"
        );
} 
```

我本来希望上面的编译时断言*不会*触发，但确实如此。毕竟，这个没有（如预期的那样）：

```
#include <type_traits>

int main()
{
    char const hello[6] = "Hello";

    // This will not fire
    static_assert(
        std::is_same<decltype(hello), char const[6]>::value, 
        "Error!"
        );
} 
```

那么`decltype("Hello")`根据 C++11 标准的结果是什么（高度赞赏参考）？我应该将它与什么进行比较，以使上面的编译时断言不会触发？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T00:17:48.703

[*注意：最初，这不是一个自我回答的问题；当我描述我的调查尝试时，我碰巧自己找到了答案，我认为分享它会很好。*]

根据 C++11 标准的附件 C (2.14.5)：

> 字符串文字的类型从“char数组”更改为“<strong>const char数组”。[……]

此外，第 7.1.6.2/4 段规定（关于 的结果`decltype`）：

> 表示的类型`decltype(e)`定义如下：
> 
> — 如果`e`是无括号的 id 表达式或无括号的类成员访问 (5.2.5)，`decltype(e)`是由 命名的实体的类型`e`。如果没有这样的实体，或者如果`e`命名了一组重载函数，则程序是非良构的；
> 
> — 否则，如果`e`是 xvalue，`decltype(e)`则是`T&&`，其中`T`的类型是`e`;
> 
> —**否则，如果`e`是左值，`decltype(e)`是`T&`，其中`T`的类型是`e`**;
> 
> — 否则，`decltype(e)`是 的类型`e`。

由于**[字符串文字是](https://stackoverflow.com/questions/15036281/c11-value-category-of-string-literal/15036305#15036305)**左值，根据上述段落和附件 C 中的段落，结果`decltype("Hello")`是对大小为 6 的常量窄字符数组的***左值引用：***

```
#include <type_traits>

int main()
{
    // This will NOT fire
    static_assert(
        std::is_same<decltype("Hello"), char const (&)[6]>::value, 
        "Error!"
        );
} 
```

最后，即使`hello`变量*也是*左值，问题文本中的第二个编译时断言也不会触发，因为`hello`它是一个*未加括号的 id-expression*，这使其属于第 7.1.6.2 段中上述列表的第一项/4。因此， 的结果`decltype(hello)`就是以 命名的实体的类型`hello`，即`char const[6]`。

# php - 如何在 php 中检索 json 字符串化对象？

> ID：15047279
> 
> 赞同：1
> 
> 时间：2013-02-24T00:18:05.867
> 
> 标签：php, javascript, jquery, json, stringify

我使用下面的代码片段向服务器发送了一些数据，但我不知道如何使用`PHP`. 感谢您的任何建议。

```
$('.ticket-row').each(function() {
tickets.push({ id : $(this).attr('id'),
              no : $(this).find('#no').text(),
              c_name : $(this).find('#c_name').val(),
              next_of_kin: $(this).find('#next_of_kin').val(),
              address : $(this).find('#address').val(),
              seat_no : $(this).find('#seat_no').val(),
              fare : $(this).find('#fare').val() });
});

$.ajax({
    type : 'POST',
    url : '**URL_HERE**',
    data : JSON.stringify(tickets),
    dataType : 'json'
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T00:22:36.960

我想你想使用类似的东西

```
'posted_data=' + encodeURIComponent(JSON.stringify(tickets)) 
```

然后，在 PHP 端，你可以得到它

```
$posted_data = $_POST['posted_data'];
$data = json_decode($posted_data); 
```

除了使用`JSON.stringify`，您还可以使用 JSON 作为数据，jQuery 会将其转换为查询字符串作为请求的一部分。然后，您可以使用`$_POST`.

# symfony - 上传后使用 LiipImagineBundle 调整图像大小？

> ID：15047281
> 
> 赞同：22
> 
> 时间：2013-02-24T00:18:22.277
> 
> 标签：symfony, liipimaginebundle

我正在将[LiipImagineBundle](https://github.com/liip/LiipImagineBundle)与 Symfony 2.1 一起使用，并希望在上传时调整用户上传的图像大小，然后再将它们保存到永久文件系统位置（去除元数据、强制 jpeg 格式并限制文件的大小）。我必须从控制器调用“条带”和“调整大小”过滤器，然后将过滤后的图像从临时位置保存到我在文件系统中选择的文件夹中。

我尝试将[LiipImageBundle 控制器用作捆绑包自述文件中所示的服务](https://github.com/liip/LiipImagineBundle#using-the-controller-as-a-service)但是被调用的Action主要是为了在请求显示图像时在缓存目录中创建一个过滤后的图像（在上传过程中使用它进行过滤是另一种情况）。无论如何，我尝试按如下方式实现它，并让它工作。我必须首先将文件从 web 服务器的 php 临时目录移动到 web 文件夹中的目录才能应用过滤器。其次，我应用了过滤器并删除了（unlink()）初始未过滤的文件。最后，我必须将过滤后的文件移动（重命名（））到文件系统中的永久位置。必须移动文件两次，应用过滤器一次，然后删除（取消链接）1 个文件以使其全部工作。有没有更好的方法（不需要中间移动）在上传时使用捆绑包？

```
class MyController extends Controller
{
    public function new_imageAction(Request $request)
    {
        $uploadedFile = $request->files->get('file');
        $tmpFolderPathAbs = $this->get('kernel')->getRootDir() . '/../web/uploads/tmp/';
        $tmpImageNameNoExt = rand();
        $tmpImageName = $tmpImageNameNoExt . '.' . $fileExtension;
        $uploadedFile->move($tmpFolderPathAbs, $tmpImageName);
        $tmpImagePathRel = '/uploads/tmp/' . $tmpImageName;
        // Create the filtered image in a tmp folder:
        $this->container->get('liip_imagine.controller')->filterAction($request, $tmpImagePathRel, 'my_filter');
        unlink($tmpFolderPathAbs . $tmpImageName);
        $filteredImagePathAbs = $this->get('kernel')->getRootDir() . '/../web/uploads/cache/my_filter/uploads/tmp/' . $tmpImageNameNoExt . '.jpeg';
        $imagePath = $imageManagerResponse->headers->get('location');
        // define permanent location ($permanentImagePathAbs)...
        rename($filteredImagePathAbs, $permanentImagePathAbs);
    }
} 
```

我在 app/config/config.yml 中的过滤器如下：

```
liip_imagine:
    filter_sets:
        my_filter:
            format: jpeg
            filters:
                strip: ~
                thumbnail: { size: [1600, 1000], mode: inset } 
```

[有人对 ImagineAvalancheBundle 提出了类似的问题，](https://stackoverflow.com/questions/8769468/symfony2-resizing-uploaded-images)但没有给出太多细节。也许[从此处提供的列表中实施另一项服务](https://github.com/liip/LiipImagineBundle/blob/master/Resources/config/imagine.xml)是更好的解决方案？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T20:51:32.547

所以这是一种在上传时使用 LiipImagineBundle 创建缩略图的方法。诀窍是使用他们的一些其他服务：

```
 /**
     * Write a thumbnail image using the LiipImagineBundle
     * 
     * @param Document $document an Entity that represents an image in the database
     * @param string $filter the Imagine filter to use
     */
    private function writeThumbnail($document, $filter) {
        $path = $document->getWebPath();                                // domain relative path to full sized image
        $tpath = $document->getRootDir().$document->getThumbPath();     // absolute path of saved thumbnail

        $container = $this->container;                                  // the DI container
        $dataManager = $container->get('liip_imagine.data.manager');    // the data manager service
        $filterManager = $container->get('liip_imagine.filter.manager');// the filter manager service

        $image = $dataManager->find($filter, $path);                    // find the image and determine its type
        $response = $filterManager->get($this->getRequest(), $filter, $image, $path); // run the filter 
        $thumb = $response->getContent();                               // get the image from the response

        $f = fopen($tpath, 'w');                                        // create thumbnail file
        fwrite($f, $thumb);                                             // write the thumbnail
        fclose($f);                                                     // close the file
    } 
```

如果您没有其他理由包含 LiipImagineBundle，这也可以通过直接调用 Imagine 库函数来完成。将来我可能会对此进行研究，但这适用于我的情况并且表现非常好。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-01T13:04:24.213

@Peter Wooster 的修改版本，使其更通用，因此如果有人在没有图像实体的情况下使用它，他/她可以轻松地从中受益。我在这里给出了两个版本，一个可以保存在实用程序或非控制器类中。另一个版本用于控制器类。现在由你决定你喜欢的地方:)

在控制器外部使用，例如将其保存在实用程序类中

```
/**
 * Write a thumbnail image using the LiipImagineBundle
 * 
 * @param Document $fullSizeImgWebPath path where full size upload is stored e.g. uploads/attachments
 * @param string $thumbAbsPath full absolute path to attachment directory e.g. /var/www/project1/images/thumbs/
 * @param string $filter filter defined in config e.g. my_thumb
 * @param Object $diContainer Dependency Injection Object, if calling from controller just pass $this
 */
public function writeThumbnail($fullSizeImgWebPath, $thumbAbsPath, $filter, $diContainer) {
    $container = $diContainer; // the DI container, if keeping this function in controller just use $container = $this
    $dataManager = $container->get('liip_imagine.data.manager');    // the data manager service
    $filterManager = $container->get('liip_imagine.filter.manager'); // the filter manager service
    $image = $dataManager->find($filter, $fullSizeImgWebPath);                    // find the image and determine its type
    $response = $filterManager->applyFilter($image, $filter);

    $thumb = $response->getContent();                               // get the image from the response

    $f = fopen($thumbAbsPath, 'w');                                        // create thumbnail file
    fwrite($f, $thumb);                                             // write the thumbnail
    fclose($f);                                                     // close the file
} 
```

在控制器中使用，例如 CommonController 或任何其他控制器。

```
/**
 * Write a thumbnail image using the LiipImagineBundle
 * 
 * @param Document $fullSizeImgWebPath path where full size upload is stored e.g. uploads/attachments
 * @param string $thumbAbsPath full absolute path to attachment directory e.g. /var/www/project1/images/thumbs/
 * @param string $filter filter defined in config e.g. my_thumb
 */
public function writeThumbnail($fullSizeImgWebPath, $thumbAbsPath, $filter) {
    $container = $this->container;
    $dataManager = $container->get('liip_imagine.data.manager');    // the data manager service
    $filterManager = $container->get('liip_imagine.filter.manager'); // the filter manager service
    $image = $dataManager->find($filter, $fullSizeImgWebPath);                    // find the image and determine its type
    $response = $filterManager->applyFilter($image, $filter);

    $thumb = $response->getContent();                               // get the image from the response

    $f = fopen($thumbAbsPath, 'w');                                        // create thumbnail file
    fwrite($f, $thumb);                                             // write the thumbnail
    fclose($f);                                                     // close the file
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-02T10:42:54.203

不要使用 liip 数据管理器加载文件，而是从上传的文件创建 liip 二进制对象：

```
use Liip\ImagineBundle\Model\Binary; 
```

然后使用以下代码：

```
 // Generate a unique name for the file before saving it
                $fileName = md5(uniqid()) . '.' . $uploadedFile->guessExtension();

                $contents = file_get_contents($uploadedFile);

                $binary = new Binary(
                    $contents,
                    $uploadedFile->getMimeType(),
                    $uploadedFile->guessExtension()
                );

                $container = $this->container;
                $filterManager = $container->get('liip_imagine.filter.manager');    // the filter manager service
                $response = $filterManager->applyFilter($binary, 'my_thumb');

                $thumb = $response->getContent();                               // get the image from the response

                $f = fopen($webRootDir .'/images_dir/' . $fileName, 'w');                                        // create thumbnail file
                fwrite($f, $thumb);                                             // write the thumbnail
                fclose($f);                                                     // close the file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T22:40:18.883

鉴于我没有找到更好的方法，我保留了问题描述中描述的解决方案。从性能的角度来看，该解决方案似乎不是最佳解决方案（它需要移动文件两次，应用过滤器一次，然后取消链接 1 个文件），但它完成了工作。

更新：

我更改了我的代码以使用 Peter Wooster 的回答中指示的服务，如下所示（该解决方案更优化，因为过滤后的图像直接保存到最终目的地）：

```
class MyController extends Controller
{
    public function new_imageAction(Request $request)
    {
        $uploadedFile = $request->files->get('file');
        // ...get file extension and do other validation...
        $tmpFolderPathAbs = $this->get('kernel')->getRootDir() . '/../web/uploads/tmp/'; // folder to store unfiltered temp file
        $tmpImageNameNoExt = rand();
        $tmpImageName = $tmpImageNameNoExt . '.' . $fileExtension;
        $uploadedFile->move($tmpFolderPathAbs, $tmpImageName);
        $tmpImagePathRel = '/uploads/tmp/' . $tmpImageName;
        // Create the filtered image:
        $processedImage = $this->container->get('liip_imagine.data.manager')->find('my_filter', $tmpImagePathRel);
        $filteredImage = $this->container->get('liip_imagine.filter.manager')->get($request, 'my_filter', $processedImage, $tmpImagePathRel)->getContent();
        unlink($tmpFolderPathAbs . $tmpImageName); // eliminate unfiltered temp file.
        $permanentFolderPath = $this->get('kernel')->getRootDir() . '/../web/uploads/path_to_folder/';
        $permanentImagePath = $permanentFolderPath . 'my_image.jpeg';
        $f = fopen($permanentImagePath, 'w');
        fwrite($f, $filteredImage); 
        fclose($f);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-08T22:24:22.527

我写了一个包来解决这个问题。虽然`VichUploaderBundle`使用 ORM 的生命周期回调提供了轻松的上传，`LiipImagine`但在调整大小方面做得很好。

这是它的组合：[https ://github.com/RSSfeed/VichImagineBundle](https://github.com/RSSfeed/VichImagineBundle)

请参阅有关如何在几分钟内实现它的[简短自述文件。](https://github.com/RSSfeed/VichImagineBundle/blob/master/README.md)

# php - PHP - preg_replace 反向引用

> ID：15047282
> 
> 赞同：3
> 
> 时间：2013-02-24T00:18:41.200
> 
> 标签：php, preg-replace, backreference

我在理解如何使用`preg_replace`反向引用时遇到了很大的问题。

我有一个纯文本字符串，想用链接的 HTML 语法替换每个链接。因此，“www.mydomain.tld”或“ [http://www.mydomain.tld](http://www.mydomain.tld) ”或“ [http://mydomain.tld](http://mydomain.tld) ”应包含在 HTML a-tag 中。我找到了一个在线执行此操作的工作功能，但我想了解如何自己做。

在我找到的函数中，这是替换：

```
"\\1<a href=\"http://\\2\" target=\"_blank\" rel=\"nofollow\">\\2</a>" 
```

我在那里看到了一些转义的引号和这些位：`\\1` `\\2`.
根据 PHP 文档，这些是反向引用。但是我如何使用它们，它们有什么作用？

我在规范中一无所获，因此将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T01:51:51.423

这将为您完成工作。请参阅下面的说明，了解它是如何工作的。

```
$string = 'some text www.example.com more text http://example.com more text https://www.example.com more text';

$string = preg_replace('#\b(?:http(s?)://)?((?:[a-z\d-]+\.)+[a-z]+)\b#', "<a href='http$1://$2'>http$1://$2</a>", $string);

echo $string; // some text <a href='http://www.example.com'>http://www.example.com</a> more text <a href='http://example.com'>http://example.com</a> more text <a href='https://www.example.com'>https://www.example.com</a> more text 
```

`\b`匹配单词边界 `(?:http(s?)://)?`可选匹配字符串，如果它包含`'http://'`或`'https://'`，如果 https 抓取`'s'`所以我们可以建立正确的 URL

`(?:[a-z\d-]+\.)+`匹配一个或多个出现的一系列字母/数字，后跟一个句点

`[a-z]+`匹配一个或多个出现的一系列字母 TLD，注意 TLD 现在可以购买，因此不能再限制长度。见[http://tinyurl.com/cle6jqb](http://tinyurl.com/cle6jqb)

`'s'`然后，我们通过将它们括在括号中来捕获最后两个部分以及反向引用。

然后我们构建 URL：

```
<a href='http$1://$2'>http$1://$2</a> 
```

`http$1://`如果 HTTPS 反向引用`$1`将包含一个`'s'`

`$2`将包含域名。我们将 URL 所在的链接设为链接文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:24:28.977

您可能想使用类似的东西：

```
$string = preg_replace('/^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/ ', "<a href=\"$1\">Link</a>", $yourtext); 
```

一些有用的链接：
使用此工具尝试 Regex：[单击](http://rubular.com/r/QufgP3gXPg)
Regex 来自：[Nettuts](http://net.tutsplus.com/tutorials/other/8-regular-expressions-you-should-know/)
命名反向引用：[单击](https://stackoverflow.com/questions/5255149/named-backreferences-with-preg-replace)

# glassfish - EJB 2.1 - GlassFish 中的 TimedObject

> ID：15047285
> 
> 赞同：1
> 
> 时间：2013-02-24T00:18:56.447
> 
> 标签：glassfish, ejb, stateless-session-bean

我在让示例 EJB 程序工作时遇到问题。它来自“从新手到专业人士的 J2EE 1.4 入门”的第 11 章 该示例包括一个消息驱动 Bean，但我似乎无法让定时会话 Bean 工作。我在 GlassFish 3 中不断收到以下错误消息。

```
WARNING: Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.1.v20100213-r6600): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'BLOB, SCHEDULE, INTERVALDURATION, OWNERID, STATE, LASTEXPIRATIONRAW, PKHASHCODE,' at line 1
Error Code: 1064
Call: SELECT TIMERID, INITIALEXPIRATIONRAW, BLOB, SCHEDULE, INTERVALDURATION, OWNERID, STATE, LASTEXPIRATIONRAW, PKHASHCODE, CREATIONTIMERAW, CONTAINERID FROM EJB__TIMER__TBL WHERE (((CONTAINERID = ?) AND (OWNERID = ?)) AND (STATE = ?))
    bind => [89237833827221504, server, 0]
Query: ReadAllQuery(name="findTimersByContainerAndOwnerAndState" referenceClass=TimerState sql="SELECT TIMERID, INITIALEXPIRATIONRAW, BLOB, SCHEDULE, INTERVALDURATION, OWNERID, STATE, LASTEXPIRATIONRAW, PKHASHCODE, CREATIONTIMERAW, CONTAINERID FROM EJB__TIMER__TBL WHERE (((CONTAINERID = ?) AND (OWNERID = ?)) AND (STATE = ?))")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:687)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:530)
    at org.eclipse.persistence.sessions.server.ServerSession.executeCall(ServerSession.java:529)
    at 
    ... 
```

这是代码：

-- TimeIt.java --

```
package timer;

import java.rmi.RemoteException;
import javax.ejb.EJBObject;

public interface TimeIt extends EJBObject {
  // the public business method on the timer bean
  public void startTimer() throws RemoteException;
} 
```

-- TimeItHome.java --

```
package timer;

import java.rmi.RemoteException;
import javax.ejb.EJBHome;
import javax.ejb.CreateException;

public interface TimeItHome extends EJBHome {
  // the create method for the timer bean.
  public TimeIt create() throws CreateException, RemoteException;
} 
```

-- TimeItBean.java --

```
package timer;

import java.rmi.RemoteException;
import java.text.SimpleDateFormat;
import java.util.Date;

import javax.ejb.EJBException;
import javax.ejb.SessionBean;
import javax.ejb.SessionContext;
import javax.ejb.TimedObject;
import javax.ejb.Timer;
import javax.ejb.TimerService;
import javax.jms.JMSException;
import javax.jms.Queue;
import javax.jms.QueueConnection;
import javax.jms.QueueConnectionFactory;
import javax.jms.QueueSender;
import javax.jms.QueueSession;
import javax.jms.Session;
import javax.jms.TextMessage;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

public class TimeItBean implements SessionBean, TimedObject {

  // save a reference to the context
  private SessionContext context;

  // public business method to start the timer
  public void startTimer() {
    TimerService timerService = context.getTimerService();
    // after initial five seconds, then every ten seconds
    Timer timer = timerService.createTimer(5000, 10000, "timer");
  }

  public void ejbCreate() {
  }

  // *** TimedObject interface

  // timer ejb method - timer expires - send message to queue
  @Override
  public void ejbTimeout(Timer timer) {
    QueueConnection connection = null;

    try {
      // Obtain a JNDI connection using the jndi.properties file
      Context context = new InitialContext();

      // Look up a JMS Connection Factory
      QueueConnectionFactory connectionFactory = (QueueConnectionFactory) context.lookup("jms/ConnectionFactory");

      // Create a JMS Connection
      connection = connectionFactory.createQueueConnection();

      // Create the JMS Session
      boolean transacted = false;
      int acknowledgeMode = Session.AUTO_ACKNOWLEDGE;

      QueueSession session = connection.createQueueSession(transacted, acknowledgeMode);

      // lookup the queue (destination)
      Queue queue = (Queue) context.lookup("jms/Queue");

      // Create a sender for the session to the queue
      QueueSender sender = session.createSender(queue);

      // Create the message - a string to print on the other side
      SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy.MM.dd 'at' HH:mm:ss.SSS");

      // Create a text message
      TextMessage textMessage = session.createTextMessage();

      // set the text of the message
      textMessage.setText("log entry, the time is: " + dateFormat.format(new Date()));

      // send the message
      sender.send(textMessage);

    }
    catch(NamingException naming) {
      naming.printStackTrace();
    }
    catch(JMSException jms) {
      jms.printStackTrace();
    }
    finally {
      if (connection != null) {
        try {
          connection.close();
        }
        catch (JMSException jms) {
        }
      }
    }    
  }

  // *** SessionBean interface

  @Override
  public void ejbActivate() throws EJBException, RemoteException {
    // TODO Auto-generated method stub
  }

  @Override
  public void ejbPassivate() throws EJBException, RemoteException {
    // TODO Auto-generated method stub    
  }

  @Override
  public void ejbRemove() throws EJBException, RemoteException {
    // TODO Auto-generated method stub    
  }

  @Override
  public void setSessionContext(SessionContext context) throws EJBException, RemoteException {
    this.context = context;
  }  
} 
```

这是我的 ejb-jar.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar 
  id="ejb-jar_ID" 
  version="2.1"
  xmlns="http://java.sun.com/xml/ns/j2ee" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/ejb-jar_2_1.xsd">

  <display-name>MDB-Timer</display-name>
  <enterprise-beans>
    <session>
      <ejb-name>TimeItBean</ejb-name>
      <home>timer.TimeItHome</home>
      <remote>timer.TimeIt</remote>
      <ejb-class>timer.TimeItBean</ejb-class>
      <session-type>Stateless</session-type>
      <transaction-type>Container</transaction-type>
    </session>
  </enterprise-beans>
</ejb-jar> 
```

# javascript - flot - 是否可以重新创建选择？

> ID：15047288
> 
> 赞同：2
> 
> 时间：2013-02-24T00:19:13.937
> 
> 标签：javascript, jquery, flot

我一直在尝试从它生成的输出中重新创建一个选择（并放入一个名为#spectrum_selection 的文本框中）

```
$('#spectrum').bind('plotselected', function(event, ranges) {
        $('#spectrum_selection').val(ranges.xaxis.from.toFixed(1) + ',' + ranges.xaxis.to.toFixed(1));

        if ($('#zoom').attr('checked'))
        {
            $.plot($('#spectrum'), data,
            $.extend(true, {}, options, {
                xaxis: { min: ranges.xaxis.from, max: ranges.xaxis.to }
            }));
        }
    }); 
```

我使用 split(',') 来打破 xaxis 范围。但是，我找不到从范围重新创建选择的方法。是否有允许这样做的隐藏功能？

非常感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-13T08:38:26.110

耶！找到它：$('#spectrum').setSelection({ xaxis: { from: 0, to: 3 } });

# php - cakephp 多种形式

> ID：15047289
> 
> 赞同：0
> 
> 时间：2013-02-24T00:19:16.550
> 
> 标签：php, cakephp

我希望在有 cakephp 的页面上的每个表格行下有多个表格。我不确定如何更改输入名称以允许这样做。

```
 <table cellpadding="0" cellspacing="0">
    <tr>
            <th><?php echo $this->Paginator->sort('id'); ?></th>
            <th><?php echo $this->Paginator->sort('member_no'); ?></th>
            <th><?php echo $this->Paginator->sort('first_name'); ?></th>
            <th><?php echo $this->Paginator->sort('last_name'); ?></th>
            <th><?php echo $this->Paginator->sort('total_points'); ?></th>
            <th><?php echo $this->Paginator->sort('date_joined'); ?></th>
            <th class="actions"><?php echo __('Actions'); ?></th>
    </tr>
    <?php foreach ($members as $member): ?>
    <tr>
        <td><?php echo h($member['Member']['id']); ?>&nbsp;</td>
        <td><?php echo h($member['Member']['member_no']); ?>&nbsp;</td>
        <td><?php echo h($member['Member']['first_name']); ?>&nbsp;</td>
        <td><?php echo h($member['Member']['last_name']); ?>&nbsp;</td>
        <td><?php echo h($member['Member']['total_points']); ?>&nbsp;</td>
        <td><?php echo h($member['Member']['date_joined']); ?>&nbsp;</td>
        <td class="actions">
            <?php echo $this->Html->link(__('View'), array('action' => 'view', $member['Member']['id'])); ?>
            <?php echo $this->Html->link(__('Edit'), array('action' => 'edit', $member['Member']['id'])); ?>
            <?php echo $this->Form->postLink(__('Delete'), array('action' => 'delete', $member['Member']['id']), null, __('Are you sure you want to delete # %s?', $member['Member']['id'])); ?>
        </td>
    </tr>
    <tr>
        /// This is the form for each record
        <td>
            <?php echo $this->Form->create('Point', array('action' => 'add')); ?>
                <fieldset>
                    <legend><?php echo __('Add Point'); ?></legend>
                <?php
                    echo $this->Form->input('member_id',array('type'=>'hidden', 'value'=>$member['Member']['id']));
                    echo $this->Form->input('points');
                ?>
                </fieldset>
            <?php echo $this->Form->end(__('Submit')); ?>
        </td>
    </tr>
<?php endforeach; ?>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:31:06.330

CakePHP 将正常生成表单，只要它们是唯一命名的。您可以考虑将成员 ID 附加到表单的名称上：

```
<?php echo $this->Form->create('Point'.$member['Member']['id'], array('action' => 'add')); ?> 
```

您可以使用此（或您想要的任何其他方法）使表单独一无二。您可能还会遇到非唯一字段名称的问题。在这种情况下，如果它们来自同一个控制器，请使用类似的技巧在表单和字段中拥有所有唯一的字段名称。

# r - 在 ddply 中包含零行的日期

> ID：15047291
> 
> 赞同：0
> 
> 时间：2013-02-24T00:19:33.157
> 
> 标签：r

我正在使用 plyr 包中的 ddply 按日期获取行数。但是，当有没有值的日期时，它们会被忽略，我最终会得到一个数据框，其中某些日期不存在。我正在使用 ddply 生成的值来生成绘图，并想找到如何包含所有不存在的日期，并将它们的 nrow 值设为 0。

```
library(plyr)
f = ddply(df, .(created), "nrow")
f = as.data.frame(f)

> head(f)
     created nrow
1 2009-12-29    2
2 2009-12-30    3
3 2010-01-06    1
4 2010-01-07    2
5 2010-01-08    2
6 2010-01-11    1 
```

为了正确构建线图，我想要所有日期（那些具有 0 nrow 值的日期）。因此，在上述部分中，我想将所有缺失的日期（例如 '2010-01-01' 到 '2010-01-05' ）添加到 '2010-01-05' 并给每个 nrow 值 9。没有人能提出一种优雅的方式来执行此操作任务。

```
ggplot(f, aes(x=created, y=nrow)) + 
  geom_line(size=0.6, color="darkgreen") +
  labs(title="Plot") +
  theme(axis.text.y=element_text(family="sans", face="bold"),  
        axis.text.x=element_text(family="sans", face="bold")) 
```

我以为 ddply 中的 .drop 命令执行了这个任务，但它似乎没有这样做。

编辑：

样本数据。

```
mdf=data.frame(created=c('2009-12-29','2009-12-30','2010-01-06','2010-01-07',
                     '2010-01-08','2010-01-11','2009-12-29','2009-12-30'))

ddply(mdf, .(created), .drop=FALSE, "nrow")

    created nrow
1 2009-12-29    2
2 2009-12-30    2
3 2010-01-06    1
4 2010-01-07    1
5 2010-01-08    1
6 2010-01-11    1 
```

如何将“2010-01-01”、“2010-01-02”等包含在 nrow 的 0 值中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:11:59.987

### 使用适当类的对象

由于您想要情节，因此将日期提供为“日期”类就足够了。

```
# Load libraries
library(package=plyr)
library(package=ggplot2)

# Create data
mdf <- data.frame(created=c('2009-12-29','2009-12-30','2010-01-06','2010-01-07',
                     '2010-01-08','2010-01-11','2009-12-29','2009-12-30'))
mdf$created <- as.Date(mdf$created)

# Plot with variable of class "Date"
ggplot(mdf, aes(x=created)) + 
  geom_line(size=0.6, color="darkgreen", stat='bin', binwidth=1) +
  labs(title="Plot") +
  theme(axis.text.y=element_text(family="sans", face="bold"),  
        axis.text.x=element_text(family="sans", face="bold")) 
```

![在此处输入图像描述](../Images/7cb9859116ded5ea4b8339b289a9d09c.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T02:23:52.447

您可以准备一个包含所有日期（序列）的列表，然后与您的表格日期合并。这将在原始数据中插入 NA。

```
dd <- ddply(mdf,.(created),nrow)
df.miss <- data.frame(created=seq.Date(min(dd$created),max(dd$created),1))
dat <- merge(dd,df.miss,all.y=T)
dat[is.na(dat)] <- 0  ## I replace NA by 0 here 
```

现在我绘制我的数据

```
library(lattice)
xyplot(V1~created,data=dat, type=c('l','p'),cex=2,lty=2) 
```

![在此处输入图像描述](../Images/dd46974373733402993b1e8d6e7781cd.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T00:39:44.667

一种直接的方法是使用来自 的结果和 `data.frame`所有日期创建另一个：`min``max``ddply`

```
# dummy data.frame
set.seed(45)
dates <- seq(as.Date("2013-01-01"), as.Date("2013-03-31"), by=3)
df <- data.frame(created=sample(dates, 100, replace=T))
# your plyr result
require(plyr)
df.r <- ddply(df, .(created), nrow) # 30 * 2

# solution:
df2 <- data.frame(created = seq(min(df.r$created), max(df.r$created), by=1), V1 = 0)
idx <- match(df2$created, df.r$created)
df2$V1[!is.na(idx)] <- df.r$V1[idx[!is.na(idx)]] 
```

现在，`df2`所有日期都将`0's`包含`df.r`. 我不确定这是否“优雅”！

# sql - SQL server 2008 计算列

> ID：15047298
> 
> 赞同：0
> 
> 时间：2013-02-24T00:21:00.637
> 
> 标签：sql, sql-server, sql-server-2008

这是我在名为 Loan 的表中的计算机列规范中的公式

```
(dateadd(month,(1),[CheckOutDate])) 
```

(1) 应替换`loan_period`为另一个名为`item_details`.

这可能吗？公式看起来如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T04:48:19.983

[据我所知，计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)仅指同一表中的列。

要在此处执行您想要的操作，您可以`TRIGGER`在两个表上定义 a 以在任一表被修改时填充数据，或者（更容易）创建一个`VIEW`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:07:43.157

您可以创建一个计算列，该列使用一个函数，然后引用另一个表。

例如

```
create table t (
    a int primary key,
    b int
)
GO

create function dbo.f(@a int)
returns int
as
begin
    return (select b from t where a = @a);
end
GO

create table t2 (
    c int primary key,
    d as dbo.f(c)
)
GO

insert into t values (1, 2)
insert into t2 (c) values (1)

select * from t2 
```

注意：在执行此操作时，您应该考虑性能因素，并确保至少您有正确的索引。

# ruby-on-rails - 使用 Devise 注册后登录

> ID：15047305
> 
> 赞同：0
> 
> 时间：2013-02-24T00:21:48.997
> 
> 标签：ruby-on-rails, devise

我有一个使用 Omniauth（twitter 登录）和 Devise 的 Rails 应用程序。在用户单击“使用 Twitter 注册”并同意身份验证后，应用程序会将他们带到设计注册页面 (redirect_to new_user_registration_url)，用户必须在其中提供电子邮件。用户输入电子邮件后，它返回主页但用户未登录。因此，我按照此处的说明创建了一个新的设计注册控制器[https://github.com/plataformatec/devise/wiki/How-To% 3a-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29) 但是，我仍然遇到同样的问题。此外，我包含的 put 语句没有登录我的服务器记录，所以我认为我做错了什么。

你能解释一下我可以做些什么来让它工作吗？

注册控制器（请注意，我不确定 after_sign_up_path_for 中的代码是否正确，但由于某种原因未记录 puts 语句）

```
class RegistrationsController < Devise::RegistrationsController
  protected
  def after_sign_up_path_for(user)
    # puts resource
     puts "checking resource"
    # session[:user_id] = user.id
    sign_in_and_redirect user
  end
end 
```

users_controller.rb

```
def all
    user = User.from_omniauth(request.env["omniauth.auth"])
    if user.persisted?
      puts "user persisted"
      session[:user_id] = user.id
      flash.notice = "Signed in!"
      sign_in_and_redirect user
    else
      session["devise.user_attributes"] = user.attributes
      redirect_to new_user_registration_url
    end
  end 
```

用户.rb

```
def self.from_omniauth(auth)
  where(auth.slice(:provider, :uid)).first_or_create do |user|
    user.provider = auth.provider
    user.uid = auth.uid
    user.name = auth.info.nickname
    user.image = auth["info"]["image"]
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:25:42.710

您必须为新控制器设置路由以覆盖设计注册控制器：

```
devise_for :users, controllers: { registrations: 'registrations'} 
```

# facebook - 移动应用程序中的 Smartfox 服务器登录 + Facebook 单点登录

> ID：15047312
> 
> 赞同：1
> 
> 时间：2013-02-24T00:22:24.567
> 
> 标签：facebook, login, token, smartfoxserver

目标：

*   允许用户在移动应用程序中通过客户端 facebook 登录进行身份验证。
*   使用 facebook 登录提供的访问令牌在我托管的 SmartFox 服务器上进行身份验证。

详细信息：我做了很多研究，我发现的最佳答案在这两篇文章中：

*   [为 iOS 应用程序中的 Facebook 身份验证设计，该应用程序还访问安全的 Web 服务](https://stackoverflow.com/questions/4623974/design-for-facebook-authentication-in-an-ios-app-that-also-accesses-a-secured-we)
*   [从用户访问令牌获取应用程序 ID（或验证源应用程序的令牌）](https://stackoverflow.com/questions/8141037/get-application-id-from-user-access-token-or-verify-the-source-application-for)

问题：

*   SmartFox Server 的自定义登录扩展对用户凭据做出同步决策。这使我无法完成上面链接的第一篇文章中的第 4 步——我们的服务器不能等待来自 facebook 的响应来验证用户的访问令牌，然后再向客户端发送回复（登录与无效凭据）。

直觉：

*   我的第一个想法是让用户以访客身份加入大厅，然后使用常规服务器命令来验证访问令牌。一旦访问令牌被验证，用户就会登录到实际的游戏中。我还没有深入研究这个，但我正在努力。

已解决：在实现上述方法（有效）之后，我意识到服务器实际上可以在返回登录结果之前处理查询 fb api。希望这对将来的某人有所帮助:)

# google-maps - Joomla 扩展从数据库中的谷歌地图上添加 pois？

> ID：15047313
> 
> 赞同：1
> 
> 时间：2013-02-24T00:22:27.623
> 
> 标签：google-maps, joomla

我需要一个 joomla 扩展，在我的页面上添加一个谷歌地图并从数据库加载 pois。

例如，我想在数据库上使用他们的名称、描述、位置（纬度、地段）和扩展，以便能够从数据库中加载所有内容并显示在地图上。

有这样的延伸吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T06:58:52.533

结帐 zh 地图真的很强大 [http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/maps/16900](http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/maps/16900)

或选择另一个：[http](http://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/maps) ://extensions.joomla.org/extensions/maps-a-weather/maps-a-locations/maps列出了 56 个扩展！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T11:29:55.510

最近在寻找这个问题的答案时，我发现了一些有希望的解决方案。

1.  VMap：[http ://extensions.joomla.org/profile/extension/maps-a-weather/maps-a-locations/vmap](http://extensions.joomla.org/profile/extension/maps-a-weather/maps-a-locations/vmap)

VMap“为您提供了一种非常简单灵活的方式，可以将数据库中的任何内容放到 Google 地图上”。

2.  Mike Reumer 的谷歌地图：[http ://extensions.joomla.org/extension/google-maps-by-reumer](http://extensions.joomla.org/extension/google-maps-by-reumer)

“您可以使用数据库表作为标记的来源。您必须编写一个生成 kml 文件的 php 函数（有关详细信息，请参见：[https](https://developers.google.com/kml/articles/phpmysqlkml) ://developers.google.com/kml/articles/phpmysqlkml ）。然后可以在一篇文章中添加插件：{mosmap kml='phpsql_genkml3.php'}。”

有关详细信息，请参阅[http://tech.reumer.net/Google-Maps/Documentation-of-plugin-Googlemap/kml-out-of-database.html 。](http://tech.reumer.net/Google-Maps/Documentation-of-plugin-Googlemap/kml-out-of-database.html)

3.  使用选项 2 中描述的方法生成 kml 文件，并使用在 Google 地图中显示 kml 文件数据的其他扩展之一。例如，Phoca Maps 也会这样做：[http ://extensions.joomla.org/extension/phoca-maps](http://extensions.joomla.org/extension/phoca-maps)

# javascript - 将两个 Unix 时间戳编码为一个

> ID：15047316
> 
> 赞同：0
> 
> 时间：2013-02-24T00:22:40.643
> 
> 标签：javascript, url, encoding, get

我的应用程序需要 GET 参数中的日期范围。我在想一定有一些天才的方法将两个 Unix 时间戳编码为一个，有效地缩短 URL 参数。

我意识到两个时间戳的简单 CSV 可以解决问题，但这里的目标是尽可能减少 URL 大小。

PS：如果只有一个日期（开始日期），这也需要工作，在这种情况下，结束日期将被假定为今天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:40:50.417

好吧，这里有一些想法：

*   如果两个时间戳可能彼此接近，则将它们存储为一对第一次和差异。例如，现在和明天，您将存储`1361666257,86400`.

*   以十六进制（基数 16）而不是基数 10 存储时间戳；例如，`512960d1`

*   如果时间戳始终是日期，则将它们存储为自纪元以来的天数，而不是秒数，方法是除以 86400 并丢弃余数。例如，今天是第 15760 天。

和/或结合所有这三个：`3d90,1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:46:05.560

如果您的目标是尽可能减小 URL 大小，您可以提出自己的“时间戳”格式，在方便时选择粒度和偏移量。

例如，如果您需要传递的日期通常在请求的当前日期附近，并且如果您只需要日期而不是一天中的时间，则可以使用**天数前**，而不是**自一年以来的秒数1970**，这是 UNIX 时间戳定义。

这是使用 unix 时间戳和此变体的随机日期范围：

```
Date range: 2012-09-21 to 2013-01-10
Timestamp:  1348178400_1357772400
Days-ago:   156_45 
```

请注意，我曾经将*from*和*to*`_`部分分开，因为使用 UNIX 时间戳时 1970 年之前的日期需要减号，或者在我的示例编码中的未来日期需要减号。**`-`**

 **这只是一个例子。您应该根据您的应用程序需求提出自己的编码（或不提出）。例如，如果日期范围通常很小，您可以将其编码为日期 + 差异。差异可能是几天、几个月或整年……取决于您的需要。**

# javascript - 如何将 instanceof 实现为接收字符串的函数？

> ID：15047317
> 
> 赞同：0
> 
> 时间：2013-02-24T00:22:51.757
> 
> 标签：javascript, inheritance, prototypejs, requirejs, circular-dependency

我想得到这样的东西

```
var isChild = isInstanceOf( var1, 'Constructor') 
```

那应该相当于

```
var isChild = (var1 instanceof Constructor) 
```

问题是我在范围内没有可用的函数构造函数，所以我只想传递一个字符串。

我想我应该遍历原型链以获得`constructor.toString()`然后比较它，但我不太知道如何实现它。

--

稍微补一下上下文，主要是找到了更好的解决方案

我在两个函数构造函数之间有一个循环引用，当我尝试引用它时，RequireJS 一直返回 undefined。（在上述情况下，构造函数将是未定义的。）

我找到了这条信息：[http ://requirejs.org/docs/api.html#circular](http://requirejs.org/docs/api.html#circular)

这是导致问题的代码：

```
//(in BaseControl.js)

define(['src/utils/models/Field'], 
  function(Field) {
[...]

  setField: function(field) {

    if (!field instanceof Field) throw new Error('field should be an instance of Field');
    [...] 
```

问题是 Field 也需要 BaseControl，所以在这种情况下 Field 是未定义的，我收到以下错误：

```
Uncaught TypeError: Expecting a function in instanceof check, but got false 
```

我可以按照 requireJS 文档解决它：

```
define(['require', 'src/utils/models/Field'], 
  function(require, Field,) {
[...]

  setField: function(field) {

    if (!Field) Field = require('src/utils/models/Field');

    if (!field instanceof Field) throw new Error('field should be an instance of Field');
    [...] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:16:13.417

你可以试试

```
function isInstanceOf(obj, constrname) {
    do {
        if (Object.prototype.hasOwnProperty.call(obj, "constructor")
          && typeof obj.constructor === "function"
          && obj.constructor.name == constrname )
            return true;
    } while (obj = Object.getPrototypeOf(obj))
    return false;
} 
```

…使用命名函数对象的非标准[`name`属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/name)。

* * *

但是，这不会可靠地工作。既不需要`name`IE 支持的属性，也不需要使用匿名函数（这些函数很常见）。因此，如果您没有要检查的构造函数（出于模块化或任何原因），您应该尝试[Duck typing](http://en.wikipedia.org/wiki/Duck_typing)。也可以查看[http://zidan.me/javascript-interfaces/](http://zidan.me/javascript-interfaces/)。该`Interface`实现可以在*Pro JavaScript Design Patterns* , Chapter 2 *Interfaces* ( [Google Books](http://books.google.de/books?id=za3vlnlWxb0C&lpg=PA14&pg=PA19#v=onepage&q&f=false) ) 一书中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T08:33:01.970

根据您上面的建议，我编写了以下短代码，并附有相关示例：

```
 <SCRIPT LANGUAGE="javascript" TYPE="text/javascript">
function _check_data_type( _obj, _datatype )
{
    if ( _obj == null || _obj == "undefined" ) return -1 ;
    var _constructor = _obj.constructor + "" ;
    return ( typeof _obj === _datatype.toLowerCase() ||
             ( _constructor.toLowerCase().indexOf( _datatype.toLowerCase() ) != -1 ) ) ? 1 : 0 ;
}

    var _str1 = new String( "woow" );
    var _str2 = "woow" ;
    var _pi = 3.14 ;

    function myobj()
    {
        this.contents = "The apple is on the table" ;
    }

    var _array = new Array( 1, 2, 3, 4 ) ; 
    var _myobj = new myobj();

    document.write( "Casting the string 'woow' via object assignment: " + " >> " + ( _check_data_type( _str1, "string" ) ? "It's string" : "Not a string" ) + "<br>" ) ;
    document.write( "Casting the string 'woow' via literal assignment: " + " >> " + ( _check_data_type( _str2, "string" ) ? "It's string" : "Not a string" ) + "<br>" ) ;
    document.write( "is PI a number? " + " >> " + ( _check_data_type( _pi, "number" ) ? "Yes, it is" : "No !" ) + "<br>" ) ;
    document.write( "Is this an object of mine ? " + " >> " + ( _check_data_type( _myobj, "myobj" ) ? "Yes, it's yours, see contents : '" + _myobj.contents + "'" : "No !" ) + "<br>" ) ;
    document.write( "Is this an array obj? " + " >> " + ( _check_data_type( _array, "array" ) ? "Yes, it's an array" : "No !" ) + "<br>" ) ;
    </SCRIPT> 
```

# ios6-maps - 如何在 IOS 6 中退出地图应用程序，即将控制权返回给请求方向的应用程序？

> ID：15047322
> 
> 赞同：1
> 
> 时间：2013-02-24T00:23:32.160
> 
> 标签：ios6-maps, mkmapitem

在用户点击“方向”按钮后，我正在使用`MKMapItem`从我的应用程序中启动地图应用程序。地图应用程序很好地显示了从当前位置到地址的方向。但是，如果我不想再查看路线，如何返回我的应用程序？下面是我附加到的代码`IBAction`。

代码：

* * *

```
- (IBAction)pressDirectionsButton:(id)sender {

Class mapItemClass = [MKMapItem class];
if (mapItemClass && [mapItemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)])
{
    CLGeocoder *geocoder = [[CLGeocoder alloc] init];
    NSString *addressString = [NSString stringWithFormat:@"%@,%@,%@,%@,%@",
                               self.currentlySelectedTemple.houseNumber,
                               self.currentlySelectedTemple.street,
                               self.currentlySelectedTemple.city,
                               self.currentlySelectedTemple.state,
                               self.currentlySelectedTemple.country];
    [geocoder geocodeAddressString:addressString completionHandler:^(NSArray *placemarks, NSError *error) {

        //Convert CLPlacemark to an MKPlacemark
        CLPlacemark *geocodedPlacemark = [placemarks objectAtIndex:0];
        MKPlacemark *placemark = [[MKPlacemark alloc]
                                  initWithCoordinate:geocodedPlacemark.location.coordinate addressDictionary:geocodedPlacemark.addressDictionary];

        //Create a map item for geocoded address to pass to Maps app
        MKMapItem *mapItem = [[MKMapItem alloc] initWithPlacemark:placemark];
        [mapItem setName:geocodedPlacemark.name];

        //Set Directions mode to Driving
        NSDictionary *launchOptions =    @{MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving};

        //Get the "Current User Locations" MKMapItem
        MKMapItem *currentLocationMapItem = [MKMapItem mapItemForCurrentLocation];

        //Pass the current location and destination  map items to Maps app
        [MKMapItem openMapsWithItems:@[currentLocationMapItem,  mapItem] launchOptions:launchOptions];

       }];
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T13:40:28.590

无法返回到您的应用程序（以编程方式），因为您不再在您的应用程序中，而是在地图应用程序中。执行后`openMapsWithItems:launchOptions:`，您的 App Delegate 的`applicationdDidEnterBackground:`方法将被调用。

目前无法使用 Mapkit 在您的应用程序中嵌入带有路线的地图。

# javascript - $('div').click 功能不适用于所有 div

> ID：15047324
> 
> 赞同：0
> 
> 时间：2013-02-24T00:23:34.657
> 
> 标签：javascript, jquery, html, click, selector

出于某种原因，尽管编写了一个选择所有 div 的函数，但当我单击它们时，我的“megaPixel”动态生成的 div 没有响应。单击时，所有其他 div 都会响应。

```
function init($input){
  for (i=1; i <= 20; i++){
  $('body').append('<div class="megaPixel" id="megaPixel_' + $input + '"></div>');
  $input = $input + 1;
  }
};

$('div').click(function(){
  $('.megaPixel').css('background-color', 'red');
});

init(1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:26:10.833

那是因为您在生成 div 之前分配了点击侦听器。

```
function init($input){
  for (i=1; i <= 20; i++){
  $('body').append('<div class="megaPixel" id="megaPixel_' + $input + '"></div>');
  $input = $input + 1;
 }
 $('div').click(function(){
    $('.megaPixel').css('background-color', 'red');
 });
};

init(1); 
```

试试这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:29:27.033

你也可以使用这个：

```
$("body").on("click", "div.megaPixel", function(){
  $(this).css('background-color', 'red');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T00:26:31.067

我想你正在寻找这样的东西。

```
$('div.megaPixel').on('click', function(){
  $(this).css('background-color', 'red');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T00:28:44.187

您是否尝试过使用`$(document).on("click", "div.megaPixel", function() {} );`，以便包含动态添加的元素？

# javascript - Javascript警报永远不会触发

> ID：15047325
> 
> 赞同：-2
> 
> 时间：2013-02-24T00:23:35.307
> 
> 标签：javascript

这是我的全部代码：

```
if( javascript.isGarbage() != true) {
  alert('I am not garbage!');
} 
```

为什么这没有提醒任何东西？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:26:50.263

如果这是您的全部代码，则未定义 javsacript。当您尝试 .isGarbage() 时，这将引发错误。此外，正如 Firas 指出的那样，您传递给 alert 的字符串缺少结束引号（我一开始错过了这个！）。

可以通过以下两种方式之一来更正此代码。您可以将 javsacript 设为空对象，然后它将不再出错。

```
var javsacript = {};

if (javsacript.isGarbage() != true) {
   alert('I am not garbage!');
} 
```

或者，您可以添加额外的检查以确保 javsacript 是真实的，即定义为一个对象或其他值，以防止在其上调用 isGarbage() 时出错。

```
if (javsacript && javsacript.isGarbage() != true) {
   alert('I am not garbage!');
} 
```

注意：我不确定“javsacript”是否应该是“javascript”。最终这并不重要，因为两者都没有被定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:25:18.447

jav-"sa"-cript 不是一个真实的词。您的代码是否依赖于正确拼写的“javascript”？这真的是你的全部代码，还是某个库的“javsascript”的一部分？

您必须先声明`var javsacript = somevalue`某处，然后才能以任何有意义的方式使用它。

# sql - 为每组列识别具有不同值的列

> ID：15047326
> 
> 赞同：0
> 
> 时间：2013-02-24T00:23:35.000
> 
> 标签：sql, distinct-values

给定一个表，*t*：

```
a     b    c     d      e
1     2    3      4     7   
1     2    3      5     7
3     2    4      6     7
3     2    4      6     8 
```

什么 SQL 查询可以识别具有与列*a*和*b*中的每个元组关联的一个或多个不同值的实例的列？

在上面的表*t*中，列*d*和*e*将满足此标准，但不满足列*c*。

对于来自列*a*和*b*的元组 <1,2> 和 <3,2> ，列*c*对于每个元组没有不同的值。

*d*列有一个元组 <1,2> 值变化的实例——值 4 和 5。

*e*列也有一个元组 <3,2> 值变化的实例——值 7 和 8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:54:30.563

Something like this should work for you using `CASE`, `COUNT` and `GROUP BY`:

```
select 
  a, b,
  case when count(distinct c) > 1 then 'yes' else 'no' end colc,
  case when count(distinct d) > 1 then 'yes' else 'no' end cold,
  case when count(distinct e) > 1 then 'yes' else 'no' end cole
from t
group by a, b 
```

[SQL Fiddle Demo](http://sqlfiddle.com/#!2/4ce23/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:55:49.200

Slightly indirectly:

```
SELECT a, b,
       COUNT(DISTINCT c) AS num_c,
       COUNT(DISTINCT d) AS num_d,
       COUNT(DISTINCT e) AS num_e
  FROM t
 GROUP BY a, b; 
```

This yields:

```
1   2   1   2   1
3   2   1   1   2 
```

If the `num_c` or `num_d` or `num_e` column has a value greater than 1, then there are varying values. You can vary the query to list whether the column is varying for a given value of (a, b) by using a CASE statement like this:

```
-- v for varying, n for non-varying
SELECT a, b,
       CASE WHEN COUNT(DISTINCT C) > 1 THEN 'v' ELSE 'n' END AS num_c,
       CASE WHEN COUNT(DISTINCT d) > 1 THEN 'v' ELSE 'n' END AS num_d,
       CASE WHEN COUNT(DISTINCT e) > 1 THEN 'v' ELSE 'n' END AS num_e
  FROM t
 GROUP BY a, b; 
```

This yields:

```
1   2   n   v   n
3   2   n   n   v 
```

If you really want just to know whether any set of values in the given column varies for any values of (a, b) — and not which values of (a, b) it varies for — you can use the query above as a sub-query in the FROM clause and organize things as you want.

```
SELECT MAX(num_c) AS num_c,
       MAX(num_d) AS num_d,
       MAX(num_e) AS num_e
  FROM (SELECT a, b,
               CASE WHEN COUNT(DISTINCT C) > 1 THEN 'v' ELSE 'n' END AS num_c,
               CASE WHEN COUNT(DISTINCT d) > 1 THEN 'v' ELSE 'n' END AS num_d,
               CASE WHEN COUNT(DISTINCT e) > 1 THEN 'v' ELSE 'n' END AS num_e
          FROM t
         GROUP BY a, b
       ); 
```

This relies on `v` being larger than `n`; it is easy enough (and convenient enough) for this binary decision, but not necessarily convenient or easy if there are, say, 4 states to map.

This yields:

```
n   v   v 
```

# php - 查找符合所有条件的记录的公共 ID - 如何构建查询？

> ID：15047331
> 
> 赞同：1
> 
> 时间：2013-02-24T00:24:29.360
> 
> 标签：php, mysql, codeigniter

我正在尝试创建一个仅基于许多条件创建数组的 SQL 查询和/或 php 代码。我有一个这样的数组：

```
Array ( [1] => 1 [8] => 0 [2] => 1 )

The [1] refers to 'question_id' with the 1 being a 'value'
The [8] refers to 'question_id' with the 0 being a 'value'
The [2] refers to 'question_id' with the 1 being a 'value' 
```

我的数据库设置如下，当我调用它时，我试图获取一个仅满足上述所有 ^ 的电影 ID 的数组。所以说数组有[8] => 0。question_id应该是8，对应于该记录的值应该是0。所以说数组有[1](https://i.stack.imgur.com/Wjgvc.png) => 0。question_id应该是1，对应于该记录的值应该是 0。如果它遇到该对，以及它之前的其他对，它应该将该记录添加到数组中。

我已经尝试过了，我正在使用 Codeigniter：

```
foreach($array as $key=>$value){
        $this->db->where('question_id', $key);
        $this->db->where('value', $value);
        $this->db->from('movies_values');
        $query = $this->db->get();
        $res = $query->result();
        array_push($main_array,$res);
        } 
```

$main_array 之前是一个空数组。$array 是一个类似于上面的数组。但问题是，它检查一对，所以说[1](https://i.stack.imgur.com/Wjgvc.png) => 0，如果匹配，则添加它。而不是检查它是否也匹配 [8] => 0 和 [2] => 1。

![在此处输入图像描述](../Images/f464aebaabc6d26d993f65ced19cba2a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:33:45.963

您可以遍历数组以构建完整的`CASE`语句

```
$query = <<<SQL
    SELECT
        movie_id, question_id, value
    FROM
        t1
    WHERE
        CASE
SQL;
$params = array();
foreach ($array as $question_id => $value) {
    $query .= " WHEN question_id = ? THEN value = ? ";
    $params[] = $question_id;
    $params[] = $value;
}
$query .= " END"; 
```

[http://sqlfiddle.com/#!2/741ff/2](http://sqlfiddle.com/#!2/741ff/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:05:22.813

My advice is to use the data from `$array` in a [where_in();](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select) statement so you can avoid running SQL queries in a loop.

`$this->db->where_in('question_id', array_keys($array) );
$this->db->where_in('value', array_values($array) );`

which is equivalent to:
`SELECT * FROM <table> WHERE question_id IN (array_keys($array)) AND value IN (array_values($array));`

# php - 获取“位置”的总数

> ID：15047333
> 
> 赞同：0
> 
> 时间：2013-02-24T00:25:07.363
> 
> 标签：php

在我的数据库中，我有一个名为 的表`db_pilots`，我正在尝试查找来自国家/地区的飞行员总数，即来自 的飞行员总数`GB`。它就是这样做的，但它是按`location`而不是排序`total`。我怎样才能做到这一点？

```
<?php
$country_info = DB::get_results('SELECT COUNT(pilotid) as total, location FROM'.TABLE_PREFIX.'pilots GROUP BY location DESC');

foreach($country_info as $country)
{

?>
    <tr>
        <td align="center"><img src="<?php echo Countries::getCountryImage($country->location); ?>" /></td>
        <td align="center"><?php echo Countries::getCountryName($country->location); ?></td>
        <td align="center"><?php echo $country->total;?></td>
    </tr>

<?php
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:32:46.183

尝试添加 ORDER BY：

```
 ...GROUP BY location ORDER BY total DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:27:18.060

您在 之后缺少一个空格`FROM`：

```
FROM'.TABLE_PREFIX.'pilots
    ^ 
```

它应该是这样的：

```
FROM '.TABLE_PREFIX.'pilots 
```

# cocoa - WiFi网络更改是否有NSNotificationCenter通知？

> ID：15047338
> 
> 赞同：3
> 
> 时间：2013-02-24T00:26:11.910
> 
> 标签：cocoa, events, nsnotificationcenter

我想在我的 Cocoa 应用程序中订阅 WiFi 网络更改，但我找不到合适的事件来订阅。

WiFi网络更改是否有NSNotificationCenter通知？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T01:17:51.670

据我所知不是。我会使用[CoreWLAN](https://developer.apple.com/library/mac/documentation/Networking/Reference/CoreWLANFrameworkRef/_index.html)获取系统上所有 WiFi 接口的列表，然后使用[SystemConfiguration](https://developer.apple.com/library/mac/documentation/Networking/Reference/SysConfig/_index.html)框架监控它们的状态。

这是一个命令行示例（省略了错误检查细节，需要 ARC）：

```
#import <Foundation/Foundation.h>
#import <CoreWLAN/CoreWLAN.h>
#import <SystemConfiguration/SystemConfiguration.h>

void wifi_network_changed(SCDynamicStoreRef store, CFArrayRef changedKeys, void *ctx)
{
  [(__bridge NSArray *)changedKeys enumerateObjectsUsingBlock:^(NSString *key, NSUInteger idx, BOOL *stop)
  {
    /* Extract the interface name from the changed key */
    NSString *ifName = [key componentsSeparatedByString:@"/"][3];
    CWInterface *iface = [CWInterface interfaceWithName:ifName];

    NSLog(@"%@ status changed: current ssid is %@, security is %ld",
          ifName, iface.ssid, iface.security);
  }];
}

int main(int argc, char *argv[])
{
  /* Get a list of all wifi interfaces, and build an array of SCDynamicStore keys to monitor */
  NSSet *wifiInterfaces = [CWInterface interfaceNames];
  NSMutableArray *scKeys = [[NSMutableArray alloc] init];
  [wifiInterfaces enumerateObjectsUsingBlock:^(NSString *ifName, BOOL *stop)
  {
    [scKeys addObject:
      [NSString stringWithFormat:@"State:/Network/Interface/%@/AirPort", ifName]];
  }];

  /* Connect to the dynamic store */
  SCDynamicStoreContext ctx = { 0, NULL, NULL, NULL, NULL };
  SCDynamicStoreRef store = SCDynamicStoreCreate(kCFAllocatorDefault,
                                                 CFSTR("myapp"),
                                                 wifi_network_changed,
                                                 &ctx);

  /* Start monitoring */
  SCDynamicStoreSetNotificationKeys(store,
                                    (__bridge CFArrayRef)scKeys,
                                    NULL);

  CFRunLoopSourceRef src = SCDynamicStoreCreateRunLoopSource(kCFAllocatorDefault, store, 0);
  CFRunLoopAddSource([[NSRunLoop currentRunLoop] getCFRunLoop],
                     src,
                     kCFRunLoopCommonModes);
  [[NSRunLoop currentRunLoop] run];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T09:25:15.927

只要您保持打开 CWInterface，您就可以使用 CWLinkDidChangeNotification 等通知。在下面的代码中，i_interfaces 是一个 ivar，它存储了一个 CWInterface 数组，monitorWifi 应该在开始时调用，listInterfaces 列出接口值，handleInterfaceNotification 会在任何更改时调用。

请注意，当接口未连接时， iface.ssid / iface.bssid 将为 nil。

另请注意，由于各种通知，每次连接/断开连接都会多次调用handleInterfaceNotification。

此代码主要来自[NSNotification 问题](https://stackoverflow.com/questions/10525858/nsnotification-troubles)

```
-(void) listInterfaces;
{
    NSLog(@"listInterfaces");
    [i_interfaces enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop)
     {
         CWInterface *iface = obj;
         NSLog( @"iface %@, SSID %@, BSSID %@", iface, iface.ssid, iface.bssid );
     }];
}

-(void) handleInterfaceNotification:(NSNotification*) notification;
{
    NSLog(@"Notification Received");
    [self listInterfaces];
}

- (void) monitorWifi;
{
    NSLog(@"monitorWifi");

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleInterfaceNotification:) name:CWModeDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleInterfaceNotification:) name:CWSSIDDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleInterfaceNotification:) name:CWBSSIDDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleInterfaceNotification:) name:CWCountryCodeDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleInterfaceNotification:) name:CWLinkDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleInterfaceNotification:) name:CWPowerDidChangeNotification object:nil];

    NSMutableArray* ifaces = [NSMutableArray new];
    NSSet *wifiInterfaces = [CWInterface interfaceNames];
    [wifiInterfaces enumerateObjectsUsingBlock:^(NSString *ifName, BOOL *stop)
     {
         CWInterface *iface = [CWInterface interfaceWithName:ifName];
         if ( iface ) {
             [ifaces addObject:iface];
         }
     }];
    i_interfaces = ifaces;

    [self listInterfaces];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T08:28:39.410

高度赞赏。我需要从 Swift 中执行此操作，所以这里有一些 Swift 代码可以帮助您入门：

```
func callback(store: SCDynamicStore, changedKeys: CFArray, 
              context: UnsafeMutableRawPointer?) -> Void {
    // Do the magic
}

// Connect to the store
guard let store = SCDynamicStoreCreate(nil, "myapp" as CFString, callback, nil) else {
    print("Could not connect to store")
    abort()
}

// Setup the notification mechanism for any IPv4 event
var keys = [CFString]()
keys.append("State:/Network/Global/IPv4" as CFString)
SCDynamicStoreSetNotificationKeys(store, keys as CFArray, nil)

// Go into the loop
let runloop = SCDynamicStoreCreateRunLoopSource(nil, store, 0)
let currentLoop = RunLoop.current.getCFRunLoop()
let modes = CFRunLoopMode.commonModes
CFRunLoopAddSource(currentLoop, runloop, modes)
RunLoop.current.run() 
```

# python - 南迁移引发ValidationError

> ID：15047339
> 
> 赞同：0
> 
> 时间：2013-02-24T00:26:14.697
> 
> 标签：python, django, django-south

南方正在与三场比赛，我已尽力超越他，但我无法：

```
data = models.DateField(verbose_name=u'Data', null=True, blank=True)
hora = models.TimeField(verbose_name=u'Hora', null=True, blank=True)
criado_em = models.DateTimeField(verbose_name=u'Criado em', auto_now_add=True) 
```

它总是在`python manage.py migrate app`，抛出的错误是：

> ValidationError: [u "'True' 值的格式无效。它必须是 HH: MM [: SS [.Uuuuuu]] 格式。"]

不知道还有什么办法，试了好几种方法，最后一个是这个，也返回了上面一样的错误

```
data = models.DateField(verbose_name=u'Data', default=datetime.now)
hora = models.TimeField(verbose_name=u'Hora', default=datetime.now)
criado_em = models.DateTimeField(verbose_name=u'Criado em', auto_now_add=True, default=datetime.now) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:04:19.473

您`default=True`在`TimeField`迁移中的操作是错误的。您需要使用适当的默认值（并且在您创建迁移时被要求使用它）。

# c# - Dapper ORM 是否与 CASE WHEN 语句兼容？

> ID：15047344
> 
> 赞同：1
> 
> 时间：2013-02-24T00:27:21.040
> 
> 标签：c#, dapper

我有一个带有返回 0 或 1 的 CASE WHEN 命令的 sql 语句。当我尝试执行填充我的实体对象的查询时，它总是将布尔属性设置为 false。所以我尝试将我的属性的数据类型更改为整数，它总是返回 0，即使查询在 SQL Server 上返回了正确的值。

这是片段：

```
CAST(CASE WHEN Partner.ID IS NULL THEN 0
                            ELSE 1 END AS BIT) AS Associated 
```

你能帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T11:20:13.453

这里简短的回答是，dapper 对 TSQL 毫无了解（除了它解析的自定义“in @too”语法），因此应该可以使用任何有效的 TSQL。它所看到的只是返回的网格。只要属性和列名匹配，您显示的内容*应该可以正常工作。*如果它不起作用，我将不得不在今天晚些时候尝试一个测试用例 - 但它看起来与我使用的一些代码非常相似。再次：是的，那应该没问题。

# ios - 使用 drawRect 设置 UIView 背景颜色：

> ID：15047346
> 
> 赞同：0
> 
> 时间：2013-02-24T00:27:27.353
> 
> 标签：ios, objective-c, cocoa, performselector, setneedsdisplay

我正在尝试设置自定义 UIView 类的背景颜色。该类还在`drawRect:`方法中进行石英绘图。

由于在视图的下一次重绘之前不会发生背景颜色更改，因此我`backgroundColor`在调用之前更改了 UIView 的属性`setNeedsDisplay`。在视图重绘时，我设置了`UIActivityIndicatorView`动画。

```
self.backgroundColor = theColor; 
[indicator startAnimating];
[self performSelectorInBackground:@selector(setNeedsDisplay) withObject:nil]; 
```

指示器在 结束时停止`setNeedsDisplay`。`theColor`每次我需要调用它时都会改变。

假设我有一个耗时的`setNeedsDisplay`过程。我想设置背景并保留指示器动画。目前，更改`backgroundColor`调用`setNeedsDisplay`但在方法运行之前甚至不会更改背景`performSelectorInBackground`颜色！因此，我的应用程序挂起，并且没有任何指标动画。我该如何处理这个排序问题？谢谢。

**编辑：**我的意思是我的`drawrect:`可能很耗时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:07:30.370

> Let's say I have a time consuming setNeedsDisplay process

Let's not. You have no business overriding `setNeedsDisplay`. I am not at all clear on what you're ultimately trying to accomplish but this entire question seems to be a misunderstanding of how to draw. When you call `setNeedsDisplay` (which, as you've been told, you must do in the main thread), that's that; you stand out of the way, and when the redraw moment comes, your view's `drawRect:` is called. That's drawing.

If the problem is simply that the activity indicator never gets going, that's because you never give it a chance. It too is not going to start going until the redraw moment. But you are stopping the activity indicator before the redraw moment even comes! So obviously you'll never see it go.

The way to start an activity indicator visibly before the next thing you do is to step out to the main thread *after* the next redraw moment. This is called "delayed performance". Example:

```
self.backgroundColor = theColor; 
[indicator startAnimating];
double delayInSeconds = 0.1;
dispatch_time_t popTime =
    dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    // do something further, e.g. call setNeedsDisplay
}; 
```

You could extend that example by calling `dispatch_after` yet again to stop the indicator after the *next* redraw moment.

I must impress upon you, however, that if the mere act of drawing takes so long that you need an activity indicator to cover it, you're drawing wrong. Your act of drawing must be very very fast. You might want to watch the WWDC 2012 video on this very topic; it gives excellent tips on how to draw efficiently.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:29:39.117

您只能在主线程上更新 UI，而不是在背景中

尝试使用另一个带有活动指示器的子视图，在重绘之前放入并在之后从超级视图中删除

# asp.net-mvc-4 - ASP.NET Web API - 在每次请求之前读取查询字符串/表单数据

> ID：15047347
> 
> 赞同：0
> 
> 时间：2013-02-24T00:27:31.917
> 
> 标签：asp.net-mvc-4, asp.net-web-api

[由于此处](https://stackoverflow.com/questions/15039589/asp-net-web-api-authentication-options)列出的原因，我需要在每次请求之前从它们的查询字符串或表单数据中查看一组值（这样我就可以执行一些身份验证）。键每次都是相同的，并且应该出现在每个请求中，但是它们将位于 GET 请求的查询字符串中，以及 POST 和其他请求的表单数据中

由于这是出于身份验证目的，因此需要在请求之前运行；目前我正在使用 MessageHandler。

我可以根据方法确定是否应该读取查询字符串或表单数据，当它是 GET 时，我可以使用 Request.GetQueryNameValuePairs(); 读取查询字符串 OK；但是问题是在 POST 时读取表单数据。

我可以使用 Request.Content.ReadAsFormDataAsync() 获取 formdata，但是 formdata 只能读取一次，当我在这里读取它时，它不再可用于请求（即我的控制器操作获取空模型）

在请求到达请求逻辑之前，从请求中一致且非侵入​​性地读取查询字符串和/或表单数据的最合适方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:41:34.350

关于您关于哪个地方更好的问题，在这种情况下，我认为 AuthorizationFilters 比消息处理程序更好，但无论哪种方式，我都认为问题与多次阅读正文有关。

在您的消息处理程序中执行“Request.Content.ReadAsFormDataAsync()”之后，您可以尝试执行以下操作吗？

```
Stream requestBufferedStream = Request.Content.ReadAsStreamAsync().Result;
requestBufferedStream.Position = 0; //resetting to 0 as ReadAsFormDataAsync might have read the entire stream and position would be at the end of the stream causing no bytes to be read during parameter binding and you are seeing null values. 
```

**注意**：请求的内容只能被读取一次或多次的能力取决于主机的缓冲区策略。默认情况下，主机的缓冲策略设置为始终缓冲。在这种情况下，您将能够将位置重置回 0。但是，如果您明确将策略设为流式传输，则无法重置回 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:54:42.073

What about using ActionFilterAtrributes?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T14:39:43.320

这段代码对我很有效

```
public HttpResponseMessage AddEditCheck(Check check)
{
    var request= ((System.Web.HttpContextWrapper)Request.Properties.ToList<KeyValuePair<string, object>>().First().Value).Request;

    var i = request.Form["txtCheckDate"];
    return Request.CreateResponse(HttpStatusCode.Ok);
} 
```

# python - 如何在python上的给定时间范围内下载分钟到分钟的股票数据

> ID：15047352
> 
> 赞同：0
> 
> 时间：2013-02-24T00:28:08.293
> 
> 标签：python, event-handling, scheduled-tasks, scheduling

我在尝试着

1) 创建一个文件，该文件将通过 ystockquote 将每分钟的数据写入股票的 csv 文件。

2）从特定的给定时间开始到特定的结束时间。

3) 每分钟，我从 get_price_time 函数写入数据并将其存储到 csv 文件中。

4) 使用符号、start_specific_time、end_specific_time、文件名、数据速率作为输入。

5）我创建了文件并关闭了文件。在 start_specific_time 创建一个 csv 文件，并在 end_specific_time 关闭 csv 文件。

我需要为所有这些创建一个调度程序。我被困在调度程序中。这是我的代码

```
import ystockquote

import sched, time

from sys import argv

script, symbol, start_specific_time, end_specific_time, filename, datarate = argv

def get_price_time(symbol):
    price = ystockquote.get_price(symbol)
    current_time = datetime.datetime.now()
    return [symbol, price, current_time]

def create_file(filename):
    return open(filename,'w')

def close_file(target):
    target.close()

def write_data_to_file(target, data):
    target.write(data[0])# first element of list which is symbol
    target.write(",")
    target.write(data[1])# 2nd element of list which is price
    target.write(",")
    target.write(str(data[2])) # 3rd element date which is string
    target.write ("\n") # create new line 

def create_scheduler 
```

# java - 导致错误“意外停止”的空字段

> ID：15047354
> 
> 赞同：0
> 
> 时间：2013-02-24T00:28:55.620
> 
> 标签：java, android, validation

有没有办法为字符串预定义一个值，以便在任何字段为空时不出现错误？所有的 porcentagem 1、2 和 3 都是可选的，所以不是要求用户输入一些数据，而是预定义值以便没有值。初学者问题。

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    cpc_inicial = (EditText) findViewById(R.id.cpc_inicial);
    porcentagem1 = (EditText) findViewById(R.id.porcentagem1);
    porcentagem2 = (EditText) findViewById(R.id.porcentagem2);
    porcentagem3 = (EditText) findViewById(R.id.porcentagem3);
    cpc_final = (TextView) findViewById(R.id.cpc_final);
    botao1 = (Button) findViewById(R.id.botao1);

    cpc_inicial.setInputType(InputType.TYPE_CLASS_NUMBER);
    porcentagem1.setInputType(InputType.TYPE_CLASS_NUMBER);
    porcentagem2.setInputType(InputType.TYPE_CLASS_NUMBER);
    porcentagem3.setInputType(InputType.TYPE_CLASS_NUMBER);

    botao1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            if(porcentagem3 != null ) {             

            float cpc = Float.parseFloat(cpc_inicial.getText().toString());
            float v1 = Float.parseFloat(porcentagem1.getText().toString());
            float v2 = Float.parseFloat(porcentagem2.getText().toString());
            float v3 = Float.parseFloat(porcentagem3.getText().toString());
            TextView cpcfinal = cpc_final;

            if(cpc > 0.0 && v1 != 0.0 && v2 != 0.0 && v3 != 0.0 )
            {
            soma = (cpc*v1/100)+cpc;
            soma = soma*(v2/100)+soma;
            soma = soma*(v3/100)+soma;

            String sum = Float.toString(soma);
            cpcfinal.setText(sum);

            }
            } else  
            {
            TextView cpcfinal = cpc_final;
            soma = 0; 
            cpcfinal.setText("ops!"); }
        }
    });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:35:09.803

每次提交表单时，您应该检查每个字段是否具有正确的值。例如，如果您想检查天气，可选字段是否有值，您应该执行以下操作：

```
String optionalText = optionalFieldName.getText().toString();
if (optionalText.equals("some expected value")) {
    //Do something with the value here.
} 
```

当然，您需要对每个可选字段执行类似的操作，并且实际上还应该对不安全的字段执行相反的操作，并且可能会警告用户该字段是必需的，例如：

```
String text = fieldName.getText().toString();
if (text.equals("")) {
    //field is empty, so warn the user that it is required.
} 
```

如果您要查找的值本质上应该是数字，那么您应该执行以下操作：

```
String text = field.getText().toString();
if (!text.equals("")) {
    //Field has at least some text in it.
    try {
        float val = Float.parseFloat(text);
    }catch (NumberFormatException ex) {
    //Enterered text was not a float value, so you should do something
    // here to let the user know that their input was invalid and what you expect
    }

    //Do something with the value
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:32:08.160

使用该属性将值添加到您的 xml 布局中，`android:text="..."`或者用于`TextUtils.isEmpty(...)`检测字符串是否为空并自己分配默认值。

# c - 在链表中，节点似乎被最后一个节点中的数据覆盖

> ID：15047356
> 
> 赞同：1
> 
> 时间：2013-02-24T00:29:09.337
> 
> 标签：c, data-structures

我正在为我的系统编程课程编写 Linux 外壳程序。我在为我的命令历史记录部分编写一个链接列表时遇到了一个非常奇怪的情况，我真的不确定我做错了什么。

现在，我将程序设置为接受 char 数组作为输入，并将数据添加到链表末尾的节点中，然后将该节点设置为列表的尾部。然后我让程序从头到尾打印列表。我应该看到的是我输入的内容的历史，以相反的顺序。我所看到的是，我最后输入的内容似乎覆盖了所有先前节点中的数据。

例如：我输入 1，我得到一个 1，然后我输入 2，我得到两个 2，而不是 2，然后是 1。有人知道发生了什么吗？我的代码如下。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define INPUT_BUFFER 255

typedef struct commandHistoryNode commandHistoryNode;

struct commandHistoryNode{
    commandHistoryNode *previous;
    commandHistoryNode *next;
    char *commandLine;
};

commandHistoryNode* AddCommandToLinkedList(commandHistoryNode *, char *);
void PrintLinkedList();
void ExecuteCommand(char *);

int main(int argc, char **argv){
    char *cmdString;
    cmdString = calloc(INPUT_BUFFER, sizeof(char));
    char *PS1 = "$";
    commandHistoryNode *currentNode = NULL;
    while(1)
    {
        printf(PS1);
        fgets(cmdString, INPUT_BUFFER, stdin);
        //currentNode is the tail of the LinkedList
        currentNode = AddCommandToLinkedList(currentNode, cmdString);

        PrintLinkedList(currentNode);
    }
}

void ExecuteCommand(char *passedCommand){
   return;
}

commandHistoryNode*
AddCommandToLinkedList(commandHistoryNode *passedNode,  char *passedCommand){
    commandHistoryNode *tailNode = malloc(sizeof(commandHistoryNode));
    tailNode->commandLine = passedCommand;
    if(passedNode == NULL)
    {
        //passedNode is the head of the list
        return tailNode;
    }
    else
    {
        while(passedNode->next!=NULL)
        {
            //if passedNode isn't the tail (and it should be), iterate through the list
            passedNode = passedNode->next;
        }
        //set tempNode to the next node for the passedNode
        passedNode->next = tailNode;
        //set the previous node for tempNode to point to the passedNode
        //as it is the new tail.
        tailNode->previous = passedNode;
    }
    //return new tailNode
    return tailNode;
}

void PrintLinkedList(commandHistoryNode *tailNode){
    while(tailNode != NULL)
    {
        printf("command is: %s\n", tailNode->commandLine);
        //iterate backwards from the tail to the head
        tailNode = tailNode->previous;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:41:33.543

每次调用 AddCommandToLinkedList 时，您都会重复使用相同的 cmdString。所以每个节点都指向同一个字符缓冲区。结果，每次您有一个新命令时，您都会用该命令覆盖唯一的字符缓冲区，并且每个节点都指向它。您需要为每个命令分配一个 cmdString，而不是重复使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:32:50.990

再次检查您返回的内容，以防 passNode 是`!= NULL`.

# nginx - nginx+uWSGI：动态 vs 皇帝模式

> ID：15047360
> 
> 赞同：5
> 
> 时间：2013-02-24T00:29:28.440
> 
> 标签：nginx, uwsgi

我正在做多应用程序 nginx+uWSGI 设置，我想知道是否应该使用[此处](http://uwsgi-docs.readthedocs.org/en/latest/Nginx.html#VirtualHosting)记录的 uWSGI 动态模式（在动态应用程序下）或[Emperor 模式](http://uwsgi-docs.readthedocs.org/en/latest/Emperor.html)。我更倾向于使用皇帝模式，但也许这不是最佳选择。每个的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T01:15:29.160

Emperor模式用于处理多应用环境。它基本上监视您为希望它响应的新应用程序和事件指定的目录。

优点：

*   当您通过触摸 vassal 文件更新代码时，您可以优雅地重新加载站点。
*   应用程序在崩溃和重启时重生。
*   如果您需要添加多个服务器，可以很好地扩展
*   限制您的封臣以防止拒绝服务 (DoS)

缺点

*   我不确定有没有。我相信这是运行应用程序的首选方式（即使只有一个）。

我不是 100% 确定，但我相信使用文档中提供的设置启动只会启动应用程序 Nginx 通行证。我看到了两个问题，你被 Nginx 困住了。并不是说这很糟糕，但是如果您想尝试一下，或者决定转移到另一台服务器，您可能需要重新设置。此外，这并没有提供我之前提到的任何好处。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T06:10:32.807

动态模式仅适用于来自 mod_python、mod_perl 或 mod_wsgi 的非守护程序模式下想要/需要类似设置的人。对于所有其他用途（我会说，99.9% 的用途），Emperor 是最佳选择。考虑到只有 perl 和 python 插件支持动态模式，所有其他插件都强制你使用 Emperor。

# java - 为什么在运行此程序时会出现此 java.lang.StringIndexOutOfBoundsException 错误？

> ID：15047367
> 
> 赞同：-1
> 
> 时间：2013-02-24T00:31:15.930
> 
> 标签：java

```
 String fullWord;
    String firstWord;
    String secondWord;
    String thirdWord;
    String fourthWord;

    int firstPositionOfAsterisk;
    int secondPositionOfAsterisk;
    int thirdPositionOfAsterisk;
    int fullWordCharacters;
    int firstWordCharacters;
    int secondWordCharacters;
    int thirdWordCharacters;
    int fourthWordCharacters;

    char lastLetterFirstWord;

    // I will prompt the user to enter four words seperated by a *
    fullWord = JOptionPane.showInputDialog("Please enter four words: ");

    // I will use the position of the * to make things easier
    firstPositionOfAsterisk = fullWord.indexOf("*");

    firstWord = fullWord.substring(0, firstPositionOfAsterisk);

    secondPositionOfAsterisk = firstWord.indexOf("*");

    secondWord = fullWord.substring(firstPositionOfAsterisk + 1, secondPositionOfAsterisk);

    thirdPositionOfAsterisk = secondWord.indexOf("*");

    thirdWord = fullWord.substring(secondPositionOfAsterisk + 1, thirdPositionOfAsterisk);

    fourthWord = fullWord.substring(thirdPositionOfAsterisk + 1);

    firstWordCharacters = firstWord.length();
    System.out.println(firstWord +" has a length of " + firstWordCharacters + " characters" );

    secondWordCharacters = secondWord.length();
    System.out.println(secondWord +" has length of " + secondWordCharacters + " characters" );

    thirdWordCharacters = thirdWord.length();
    System.out.println(thirdWord +" has length of " + thirdWordCharacters + " characters" );

    fourthWordCharacters = fourthWord.length();
    System.out.println(fourthWord +" has length of " + fourthWordCharacters + " characters" );

    lastLetterFirstWord = firstWord.charAt(firstPositionOfAsterisk - 1);
    System.out.println("The last letter of " + firstWord + "is " + lastLetterFirstWord);

    fullWord = firstWord + secondWord + thirdWord + fourthWord;

    fullWordCharacters = fullWord.length();
    System.out.println(firstWord +", " + secondWord + ", " + thirdWord + ", " + fourthWord + "has length of" + fullWordCharacters); 
```

我试图让用户输入由“*”分隔的 4 个单词，例如 She*will*call*back，我想要这样的输出

她的长度为 3 将的长度为 4 呼叫的长度为 4 回的长度为 4

* 符号位于以下位置：3、8 和 13

她的最后一个字符是s

She, will, call, and back的长度是15

但我不断收到这个 java.lang.StringIndexOutOfBoundsException 错误。我该如何解决？

此行使程序崩溃

secondWord = fullWord.substring(firstPositionOfAsterisk + 1, secondPositionOfAsterisk);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:36:26.520

简单.. 阅读这个.. [String.substring(int, int)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#substring%28int,%20int%29)

你会看到

```
throws
   IndexOutOfBoundsException - if the beginIndex is negative, or endIndex is larger than the length of this String object, or beginIndex is larger than endIndex. 
```

重要的部分是***或者 beginIndex 大于 endIndex***

可能您的`secondPositionOfAsterisk`值为负 (-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:40:42.927

```
firstWord = fullWord.substring(0, firstPositionOfAsterisk); 
```

以上将字符串的第一部分直到第一个星号，因此它不会包含星号。所以这将返回`-1`：

```
secondPositionOfAsterisk = firstWord.indexOf("*"); 
```

那么这将失败：（因为`-1`不是有效的索引）

```
secondWord = fullWord.substring(firstPositionOfAsterisk + 1, secondPositionOfAsterisk); 
```

我认为这：

```
secondPositionOfAsterisk = firstWord.indexOf("*"); 
```

应该

```
int offset = firstWord.length()+1;
secondPositionOfAsterisk = firstWord.indexOf("*", offset); 
```

或类似的东西。

我个人认为[String#split](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29)是一个更好的选择。

# c++ - c++类前向声明 和不完整类型的无效使用

> ID：15047368
> 
> 赞同：1
> 
> 时间：2013-02-24T00:31:25.027
> 
> 标签：c++, qt

当我在 QtCreator 上运行代码时，我得到：

```
08:23:56: Running steps for project dialog...
08:23:56: Configuration unchanged, skipping qmake step.
08:23:56: Starting: "/usr/bin/make" -w
make: Entering directory `/home/entel/program/c++/dialog-build-Desktop_Qt_5_0_1_GCC_32bit-Debug'
g++ -c -pipe -g -Wall -W -D_REENTRANT -fPIE -DQT_QML_DEBUG -DQT_DECLARATIVE_DEBUG -DQT_WIDGETS_LIB -DQT_GUI_LIB -DQT_CORE_LIB -I/opt/Qt5.0.1/5.0.1/gcc/mkspecs/linux-g++ -I../dialog -I/opt/Qt5.0.1/5.0.1/gcc/include -I/opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets -I/opt/Qt5.0.1/5.0.1/gcc/include/QtGui -I/opt/Qt5.0.1/5.0.1/gcc/include/QtCore -I. -I. -I. -o dialog.o ../dialog/dialog.cpp
../dialog/dialog.cpp: In constructor 'FindDialog::FindDialog(QWidget*)':
../dialog/dialog.cpp:5:40: error: invalid use of incomplete type 'class QLabel'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:9:7: error: forward declaration of 'class QLabel'
../dialog/dialog.cpp:6:20: error: invalid use of incomplete type 'class QLineEdit'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:10:7: error: forward declaration of 'class QLineEdit'
../dialog/dialog.cpp:7:10: error: invalid use of incomplete type 'class QLabel'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:9:7: error: forward declaration of 'class QLabel'
../dialog/dialog.cpp:9:47: error: invalid use of incomplete type 'class QCheckBox'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:8:7: error: forward declaration of 'class QCheckBox'
../dialog/dialog.cpp:10:60: error: invalid use of incomplete type 'class QCheckBox'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:8:7: error: forward declaration of 'class QCheckBox'
../dialog/dialog.cpp:12:45: error: invalid use of incomplete type 'class QPushButton'
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1:0,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:52:7: error: forward declaration of 'class QPushButton'
../dialog/dialog.cpp:13:15: error: invalid use of incomplete type 'class QPushButton'
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1:0,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:52:7: error: forward declaration of 'class QPushButton'
../dialog/dialog.cpp:14:15: error: invalid use of incomplete type 'class QPushButton'
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1:0,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:52:7: error: forward declaration of 'class QPushButton'
../dialog/dialog.cpp:16:46: error: invalid use of incomplete type 'class QPushButton'
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1:0,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:52:7: error: forward declaration of 'class QPushButton'
../dialog/dialog.cpp:17:103: error: no matching function for call to 'FindDialog::connect(QLineEdit*&, const char*, FindDialog* const, const char*)'
../dialog/dialog.cpp:17:103: note: candidates are:
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qwidget.h:46:0,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:45,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:211:36: note: static QMetaObject::Connection QObject::connect(const QObject*, const char*, const QObject*, const char*, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:211:36: note:   no known conversion for argument 1 from 'QLineEdit*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:214:36: note: static QMetaObject::Connection QObject::connect(const QObject*, const QMetaMethod&, const QObject*, const QMetaMethod&, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:214:36: note:   no known conversion for argument 1 from 'QLineEdit*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:430:32: note: QMetaObject::Connection QObject::connect(const QObject*, const char*, const char*, Qt::ConnectionType) const
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:430:32: note:   no known conversion for argument 1 from 'QLineEdit*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: note: template<class Func1, class Func2> static QMetaObject::Connection QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, const typename QtPrivate::FunctionPointer<Func2>::Object*, Func2, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: note:   template argument deduction/substitution failed:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h: In substitution of 'template<class Func1, class Func2> static QMetaObject::Connection QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, const typename QtPrivate::FunctionPointer<Func2>::Object*, Func2, Qt::ConnectionType) [with Func1 = const char*; Func2 = const char*]':
../dialog/dialog.cpp:17:103:   required from here
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: error: no type named 'Object' in 'struct QtPrivate::FunctionPointer<const char*>'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:257:13: note: template<class Func1, class Func2> static typename QtPrivate::QEnableIf<((int)(QtPrivate::FunctionPointer<Func2>::ArgumentCount) >= 0), QMetaObject::Connection>::Type QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, Func2)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:257:13: note:   template argument deduction/substitution failed:
../dialog/dialog.cpp:17:103: note:   candidate expects 3 arguments, 4 provided
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qwidget.h:46:0,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:45,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:280:13: note: template<class Func1, class Func2> static typename QtPrivate::QEnableIf<(QtPrivate::FunctionPointer<Func2>::ArgumentCount == (-1)), QMetaObject::Connection>::Type QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, Func2)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:280:13: note:   template argument deduction/substitution failed:
../dialog/dialog.cpp:17:103: note:   candidate expects 3 arguments, 4 provided
../dialog/dialog.cpp:18:66: error: no matching function for call to 'FindDialog::connect(QPushButton*&, const char*, FindDialog* const, const char*)'
../dialog/dialog.cpp:18:66: note: candidates are:
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qwidget.h:46:0,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:45,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:211:36: note: static QMetaObject::Connection QObject::connect(const QObject*, const char*, const QObject*, const char*, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:211:36: note:   no known conversion for argument 1 from 'QPushButton*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:214:36: note: static QMetaObject::Connection QObject::connect(const QObject*, const QMetaMethod&, const QObject*, const QMetaMethod&, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:214:36: note:   no known conversion for argument 1 from 'QPushButton*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:430:32: note: QMetaObject::Connection QObject::connect(const QObject*, const char*, const char*, Qt::ConnectionType) const
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:430:32: note:   no known conversion for argument 1 from 'QPushButton*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: note: template<class Func1, class Func2> static QMetaObject::Connection QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, const typename QtPrivate::FunctionPointer<Func2>::Object*, Func2, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: note:   template argument deduction/substitution failed:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h: In substitution of 'template<class Func1, class Func2> static QMetaObject::Connection QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, const typename QtPrivate::FunctionPointer<Func2>::Object*, Func2, Qt::ConnectionType) [with Func1 = const char*; Func2 = const char*]':
../dialog/dialog.cpp:18:66:   required from here
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: error: no type named 'Object' in 'struct QtPrivate::FunctionPointer<const char*>'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:257:13: note: template<class Func1, class Func2> static typename QtPrivate::QEnableIf<((int)(QtPrivate::FunctionPointer<Func2>::ArgumentCount) >= 0), QMetaObject::Connection>::Type QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, Func2)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:257:13: note:   template argument deduction/substitution failed:
../dialog/dialog.cpp:18:66: note:   candidate expects 3 arguments, 4 provided
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qwidget.h:46:0,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:45,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:280:13: note: template<class Func1, class Func2> static typename QtPrivate::QEnableIf<(QtPrivate::FunctionPointer<Func2>::ArgumentCount == (-1)), QMetaObject::Connection>::Type QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, Func2)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:280:13: note:   template argument deduction/substitution failed:
../dialog/dialog.cpp:18:66: note:   candidate expects 3 arguments, 4 provided
../dialog/dialog.cpp:19:61: error: no matching function for call to 'FindDialog::connect(QPushButton*&, const char*, FindDialog* const, const char*)'
../dialog/dialog.cpp:19:61: note: candidates are:
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qwidget.h:46:0,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:45,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:211:36: note: static QMetaObject::Connection QObject::connect(const QObject*, const char*, const QObject*, const char*, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:211:36: note:   no known conversion for argument 1 from 'QPushButton*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:214:36: note: static QMetaObject::Connection QObject::connect(const QObject*, const QMetaMethod&, const QObject*, const QMetaMethod&, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:214:36: note:   no known conversion for argument 1 from 'QPushButton*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:430:32: note: QMetaObject::Connection QObject::connect(const QObject*, const char*, const char*, Qt::ConnectionType) const
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:430:32: note:   no known conversion for argument 1 from 'QPushButton*' to 'const QObject*'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: note: template<class Func1, class Func2> static QMetaObject::Connection QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, const typename QtPrivate::FunctionPointer<Func2>::Object*, Func2, Qt::ConnectionType)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: note:   template argument deduction/substitution failed:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h: In substitution of 'template<class Func1, class Func2> static QMetaObject::Connection QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, const typename QtPrivate::FunctionPointer<Func2>::Object*, Func2, Qt::ConnectionType) [with Func1 = const char*; Func2 = const char*]':
../dialog/dialog.cpp:19:61:   required from here
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:227:43: error: no type named 'Object' in 'struct QtPrivate::FunctionPointer<const char*>'
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:257:13: note: template<class Func1, class Func2> static typename QtPrivate::QEnableIf<((int)(QtPrivate::FunctionPointer<Func2>::ArgumentCount) >= 0), QMetaObject::Connection>::Type QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, Func2)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:257:13: note:   template argument deduction/substitution failed:
../dialog/dialog.cpp:19:61: note:   candidate expects 3 arguments, 4 provided
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qwidget.h:46:0,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:45,
                 from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:280:13: note: template<class Func1, class Func2> static typename QtPrivate::QEnableIf<(QtPrivate::FunctionPointer<Func2>::ArgumentCount == (-1)), QMetaObject::Connection>::Type QObject::connect(const typename QtPrivate::FunctionPointer<Func1>::Object*, Func1, Func2)
/opt/Qt5.0.1/5.0.1/gcc/include/QtCore/qobject.h:280:13: note:   template argument deduction/substitution failed:
../dialog/dialog.cpp:19:61: note:   candidate expects 3 arguments, 4 provided
../dialog/dialog.cpp:21:5: error: 'QHBoxLayout' was not declared in this scope
../dialog/dialog.cpp:21:18: error: 'topLeftLayout' was not declared in this scope
../dialog/dialog.cpp:21:38: error: expected type-specifier before 'QHBoxLayout'
../dialog/dialog.cpp:21:38: error: expected ';' before 'QHBoxLayout'
../dialog/dialog.cpp:25:5: error: 'QVBoxLayout' was not declared in this scope
../dialog/dialog.cpp:25:18: error: 'leftLayout' was not declared in this scope
../dialog/dialog.cpp:25:35: error: expected type-specifier before 'QBoxLayout'
../dialog/dialog.cpp:25:35: error: expected ';' before 'QBoxLayout'
../dialog/dialog.cpp:30:5: error: 'QVBoxLayoout' was not declared in this scope
../dialog/dialog.cpp:30:19: error: 'rightLayout' was not declared in this scope
../dialog/dialog.cpp:30:37: error: expected type-specifier before 'QVBoxLayout'
../dialog/dialog.cpp:30:37: error: expected ';' before 'QVBoxLayout'
../dialog/dialog.cpp:35:5: error: 'QHBoxLayoout' was not declared in this scope
../dialog/dialog.cpp:35:19: error: 'mainLayout' was not declared in this scope
../dialog/dialog.cpp:35:36: error: expected type-specifier before 'QHBoxLayout'
../dialog/dialog.cpp:35:36: error: expected ';' before 'QHBoxLayout'
../dialog/dialog.cpp: In member function 'void FindDialog::findClicked()':
../dialog/dialog.cpp:46:28: error: invalid use of incomplete type 'class QLineEdit'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:10:7: error: forward declaration of 'class QLineEdit'
../dialog/dialog.cpp:47:42: error: invalid use of incomplete type 'class QCheckBox'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:8:7: error: forward declaration of 'class QCheckBox'
../dialog/dialog.cpp:49:25: error: invalid use of incomplete type 'class QCheckBox'
In file included from ../dialog/dialog.cpp:1:0:
../dialog/dialog.h:8:7: error: forward declaration of 'class QCheckBox'
../dialog/dialog.cpp: In member function 'void FindDialog::enableFindButton(const QString&)':
../dialog/dialog.cpp:56:15: error: invalid use of incomplete type 'class QPushButton'
In file included from /opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/QDialog:1:0,
                 from ../dialog/dialog.h:4,
                 from ../dialog/dialog.cpp:1:
/opt/Qt5.0.1/5.0.1/gcc/include/QtWidgets/qdialog.h:52:7: error: forward declaration of 'class QPushButton'
../dialog/dialog.cpp:56:33: error: cannot convert 'QString::isEmpty' from type 'bool (QString::)()const' to type 'bool'
../dialog/dialog.cpp:56:33: error: in argument to unary !
make: *** [dialog.o] Error 1
make: Leaving directory `/home/entel/program/c++/dialog-build-Desktop_Qt_5_0_1_GCC_32bit-Debug'
08:23:57: The process "/usr/bin/make" exited with code 2.
Error while building/deploying project dialog (kit: Desktop Qt 5.0.1 GCC 32bit)
When executing step 'Make' 
```

我的代码的一部分：dialog.h

```
#ifndef FINDDIALOG_H
#define FINDDIALOG_H

#include <QDialog>
#include <QtGui>
#include <QWidget>

class QCheckBox;
class QLabel;
class QLineEdit;
class QPushButton;

class FindDialog : public QDialog
{
    Q_OBJECT
public:
    FindDialog(QWidget *parent = 0);
signals:
    void findNext(const QString &str,Qt::CaseSensitivity cs);
    void findPrevious(const QString &str,Qt::CaseSensitivity cs);
private slots:
    void findClicked();
    void enableFindButton(const QString &text);
private:
    QLabel *label;
    QLineEdit *lineEdit;
    QCheckBox *caseCheckBox;
    QCheckBox *backwardCheckBox;
    QPushButton *findButton;
    QPushButton *closeButton;
};

#endif 
```

对话框.cpp

```
#include "dialog.h"

FindDialog::FindDialog(QWidget *parent) : QDialog(parent)
{
    label = new QLabel(tr("Find &what"));
    lineEdit = new QLineEdit;
    label->setBuddy(lineEdit);

    caseCheckBox = QCheckBox(tr("Match &case"));
    backwardCheckBox = new QCheckBox(tr("Search &backward"));

    findButton = new QPushButton(tr("&Find"));
    findButton->setDefault(true);
    findButton->setEnable(false);

    closeButton = new QPushButton(tr("close"));
    connect(lineEdit,SIGNAL(textChanged(const Qstring &)),this,SLOT(enableFindButton(const QString &)));
    connect(findButton,SIGNAL(clicked()),this,SLOT(findClicked()));
    connect(closeButton,SIGNAL(clicked()),this,SLOT(close()));

    QHBoxLayout *topLeftLayout = new QHBoxLayout;
    topLeftLayout->addWidget(label);
    topLeftLayout->addWidget(lineEdit);

    QVBoxLayout *leftLayout = new QBoxLayout;
    leftLayout->addLayout(topLeftLayout);
    leftLayout->addWidget(caseCheckBox);
    leftLayout->addWidget(backwardCheckBox);

    QVBoxLayoout *rightLayout = new QVBoxLayout;
    rightLayout->addWidget(findButton);
    rightLayout->addWidget(closeButton);
    rightLayout->addStretch();

    QHBoxLayoout *mainLayout = new QHBoxLayout;
    mainLayout->addLayout(leftLayout);
    mainLayout->addLayout(rightLayout);
    setLayout(mainLayout);

    setWindowTitle(tr("Find"));
    setFixedHeight(sizeHint().height());
}

void FindDialog::findClicked()
{
    QString text = lineEdit->text();
    Qt::CaseSensitivity cs = caseCheckBox->isChecked() ? Qt::CaseSensitive
                                                       : Qt::CaseInsensitive;
    if (backwardCheckBox->isChecked())
        emit findPrevious(text,cs);
    else emit findNext(text,cs);
}

void FindDialog::enableFindButton(const QString &text)
{
    findButton->setEnable(!text.isEmpty);
} 
```

我不知道该怎么做。我正在寻找解决方案，但没有找到与我的问题类似的东西。感谢您的帮助...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-25T10:38:53.473

在包含中替换`<QtGui>`dialog.h`<QtWidgets>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:33:52.567

您正在传递函数指针而不是调用函数。改变

```
findButton->setEnable(!text.isEmpty); 
```

到

```
findButton->setEnable(!text.isEmpty()); 
```

注意括号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-13T11:57:17.207

代替

```
class QCheckBox;
class QLabel;
class QLineEdit;
class QPushButton; 
```

经过

```
#include <QCheckBox>
#include <QLabel>
#include <QLineButton>
#include <QPushButton>
#include <QHBoxLayout>
#include <QVBoxLayout> 
```

据我所知，这是由于版本差异。参考：[https ://stackoverflow.com/a/26937651/4287503](https://stackoverflow.com/a/26937651/4287503)

# java - Java在列+行的多维数组中打印unicode字符？

> ID：15047372
> 
> 赞同：0
> 
> 时间：2013-02-24T00:32:15.027
> 
> 标签：java

我有一个小项目要完成我的课程，但我有点坚持解决这个问题，基本上我需要将多维数组中的 unicode 字符打印到一个 12 行和 5 列的表中。到目前为止，我有这个：

```
public class MultiArrTest {
    public static void main(String[] args0) {
     char[][] uc = new char[12][5];
     int x = 64;

      for (int i = 0; i < uc.length; i++) {
        for (int j = 0; j < uc[i].length; j++) {
            uc[i][j] = (char) x++;

            System.out.print(uc[i][j] + " ");

            System.out.println();
            }

        }
    }
} 
```

这会打印 unicode，但只在一个列中，我觉得这里有点傻，但有人可以给我一个建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:37:42.023

移动`System.out.println();`第二个外部`for-loop`和第一个内部，就在`for-loop`：

```
for (int i = 0; i < uc.length; i++) {
    for (int j = 0; j < uc[i].length; j++) {
        uc[i][j] = (char) x++;
        System.out.print(uc[i][j] + " ");
    }
    System.out.println();
 } 
```

# routing - 如何通过互联网模拟两台电脑之间的直接网络连接？

> ID：15047376
> 
> 赞同：0
> 
> 时间：2013-02-24T00:32:50.583
> 
> 标签：routing, network-programming, connection, network-protocols, application-layer

我已经阅读了关于 wiki 文章的主题**以太网、OSI 模型、TCP、UDP、路由** *（由于新用户限制没有链接）*等 wiki 文章的主题，但无法回答我的具体问题。

**情况：** 4台电脑（AD）

**它们使用以太网**像这样相互连接： [A <-LAN-> B <-Internet-> C <-LAN-> D](http://s16.postimage.org/ai4y21551/model.png) *（由于新用户限制，仅链接而不是图片，再次抱歉）*

**我试图完成的事情：**计算机A应该被愚弄认为它直接连接到计算机D（反之亦然）。完成此任务的软件只能在计算机 B 和 C 上运行。

**我的问题是什么：**我真的无法详细说明要完成我的目标需要做什么。通过使用在计算机 B 和 C 上的现代操作系统上运行的软件，是否有可能让 A 和 D 认为它们相互连接？

我所理解的是——如果我要真正模拟那个连接——我将不得不在物理层上传输信息。从 B/C 上的操作系统的应用层可以做多少事情来完成同样的事情？有可能吗？

**从我的知识来看，我已经可以做些什么：** 在 A 上有一个客户端软件，它向 B 发送数据报或字节流（知道 B 将通过互联网将其发送到 C，然后 C 又将发送数据到 D)。D 到 A 的方向也是如此。

**我对该解决方案的问题：** 该解决方案存在缺陷，因为我需要 2 个软件解决方案（一个用于 A/D，一个用于 B/C），另外，它限制了与 TCP 和 UDP 协议的连接，它也确实如此不是真正模拟连接——它只是将信息从 A 路由到 D 的一种解决方法，而不是模拟对等连接。

这使我想到了标题中的问题：

**如何通过互联网模拟两台电脑之间的直接网络连接？**

我也愿意接受我可能完全忽略的任何建议，或部分解决方案和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:35:40.100

在我看来，您可以使用某种类型的软件 VPN。我过去曾使用过 LogMeIn Hamachi（免费）来完成此任务。

为此，关键是在 B 和 C 之间建立一个“直接”vpn，否则 Hamachi 非常慢，因为它通过其他服务器来路由您的网络流量。

[https://secure.logmein.com/products/hamachi/download.aspx](https://secure.logmein.com/products/hamachi/download.aspx)

# javascript - 我可以使用锚点打开 Chrome 开发者工具吗？

> ID：15047378
> 
> 赞同：1
> 
> 时间：2013-02-24T00:32:50.673
> 
> 标签：javascript, google-chrome, google-chrome-devtools

我意识到 Chrome 开发人员工具只是 HTML 元素，就像其他任何东西一样。

简单的问题......这可能吗？

```
<a href='#' onclick='openDevTools()'>Open Chrome Developer Tools</a> 
```

会`openDevTools()`包含什么？

显然我知道快捷键是存在的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T09:02:00.270

不，出于安全原因，您不能以编程方式打开内置的 DevTools 窗口。

# macos - macports和gnuplot不同用户的问题

> ID：15047381
> 
> 赞同：2
> 
> 时间：2013-02-24T00:33:31.003
> 
> 标签：macos, terminal, gnuplot, macports

我安装了 MacPorts（在管理员帐户中，Mac OS X 10.8.2），然后`gnuplot`通过它。但是在另一个帐户（没有管理员权限）中，我无法启动`gnuplot`或`port`从终端：

```
MacBook-Pro:~ user$ gnuplot
-bash: gnuplot: command not found
MacBook-Pro:~ user$ port
-bash: port: command not found 
```

到底是怎么回事。我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:53:02.930

您只需要添加`/opt/local/bin`到您的`$PATH`.

这是通过将其添加到您的`~/.profile`：

```
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
export MANPATH=/opt/local/share/man:$MANPATH 
```

这是在您安装 MacPorts 时完成的，但我猜不是对所有用户（您作为不同的用户安装它）。

我不知道为什么它不更新`/etc/profile`并使其成为全球性的，但如果您有该系统的多个用户，我建议您手动执行此操作。

# mysql - 数据库设计：外键困境

> ID：15047382
> 
> 赞同：1
> 
> 时间：2013-02-24T00:33:35.437
> 
> 标签：mysql, database, database-design

我正在为一家大公司构建一个基于 Web 的应用程序，我对数据库部分有疑问。先给大家介绍一下情况：

有 4 个表是用外键连接的：

**表 1：路线清单**

```
roadlist (roadListNumber, vehicleId, driverId, date, start, end, fuel,...) 
```

*   roadListNumber - 主键
*   车辆 ID - 外键
*   driverId - foreignKey

**表 2：驱动程序**

```
drivers(driverId, firstName, middleName, lastName, and so on...) 
```

*   driverId - 主键

**表 3：车辆**

```
vehicles(vehicleId, group, type, model, gpsDevice, and so on...) 
```

*   车辆 ID - 主键

**表 4：cargo_zones**

```
cargo_zones(zoneId, name, permiter, area, latitures, longtitudes, and so on...) 
```

*   zoneId - 主键

**表 5：roadLists_cargoZones_mapping**

```
roadLists_cargoZones_mapping(roadListNumber, zoneId, spentFuel, tkm, mcm,...) 
```

*   roadListNumber - foreignKey

所以这里是问题：

如果我从驱动程序表中删除驱动程序，则 roadlists 表中的值将设置为 NULL，否则将根据约束删除整行。在第一种情况下，如果有人列出某个日期的所有报告，则将其设置为 NULL，他将无法看到值班司机的姓名，因为其 ID 未链接到驱动程序表中的任何行。在秒的情况下，如果从 roadlists 表中删除整行，则系统会丢失重要数据。

那么我该如何处理这种情况呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T00:35:11.220

首选方式（但不是唯一方式）：

将驱动程序标记为已删除（有一个布尔删除列，或称为它`IsActive`），而不实际删除驱动程序或相关信息。

这样您仍然可以进行历史报告。解决此问题的一种方法是在表上创建视图；AllDrivers 的一个视图和 ActiveDrivers 的一个视图，并直接连接到这些而不是表，或者只是将`IsActive`谓词添加到查询`WHERE`子句中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T00:41:30.387

处理这种情况的方法是不要从 Driver 表中删除该行。

这是您要保留的信息。所以，不要删除它。

您可能需要一种将驱动程序行标记为非活动、已存档、不可用或其他的方法。您有状态更改，而不是删除。

任何需要排除该驱动程序的查询，都可以添加谓词（WHERE 子句中的条件）来排除这些行。

# java - 我收到“线程“主”中的异常 java.lang.NullPointerException，即使没有值设置为 null

> ID：15047389
> 
> 赞同：0
> 
> 时间：2013-02-24T00:34:27.513
> 
> 标签：java, nullpointerexception

```
public class ParkedCar {
    private String make;
    private String model;
    private String color;
    private String licenseNum;
    public ParkedCar(String make, String model, String color, String licenseNum) {
        this.make = make;
        this.model = model;
        this.color = color;
        this.licenseNum = licenseNum;
    }
    public void setMake(String ma) {
        make = ma;
    }
    public void setModel(String mo) {
        model = mo;
    }
    public void setColor(String c) {
        color = c;
    }
    public void setLicenseNum(String ln) {
        licenseNum = ln;
    }
    public String getMake() {
        return make;
    }
    public String getModel() {
        return model;
    }
    public String getColor() {
        return color;
    }
    public String getLicenseNum() {
        return licenseNum;
    }
}

public class ParkingMeter {
    private ParkedCar parkedcar;
    private int timePurchased;
    private int timeParked;
    public ParkingMeter(ParkedCar parkedcar, int timePurchased, int timeParked) {
        this.parkedcar = parkedcar;
        this.timePurchased = timePurchased;
        this.timeParked = timeParked;
    }
    /*public ParkingMeter (ParkedCar parkedcar) {
        this.parkedcar = null;
    }*/
    public void setTimePurchased(int timePurchased) {
        this.timePurchased = timePurchased;
    }
    public int getTimePurchased() {
        return timePurchased;
    }
    public void setTimeParked(int timeParked) {
        this.timeParked = timeParked;
    }
    public int getTimeParked() {
        return timeParked;
    }
    public int TimeExpired() {
        if (timeParked > timePurchased) 
            return timeParked - timePurchased;
        else    
            return 0;
    }
    public String toString() {
        return "Make: " + parkedcar.getMake() + "\nModel: " + parkedcar.getModel() + "\nColor: " + parkedcar.getColor() + "\nLicense Number: " + parkedcar.getLicenseNum();
    }
}

public class ParkingTicket {
    private ParkingMeter parkingmeter;
    public ParkingTicket(ParkingMeter parkingmeter) {
        this.parkingmeter = parkingmeter;
    }
    public int TicketCost() {
        if (parkingmeter.getTimeParked() > parkingmeter.getTimePurchased()) {
            if (parkingmeter.getTimeParked() <= 60)
                return 25;
            else 
                return 25 + (10*(parkingmeter.TimeExpired())/60);
        }
        else 
            return 0;
    }                           
}

public class PoliceOfficer {
    private String OfficerName;
    private int OfficerNum;
    private ParkingMeter pm;
    private ParkingTicket pt;
    public PoliceOfficer(ParkingTicket pt, String OfficerName, int OfficerNum) {
        this.OfficerName = OfficerName;
        this.OfficerNum = OfficerNum;   
    }
    public void setOfficerName(String OfficerName) {
        this.OfficerName = OfficerName;
    }
    public void setOfficerNum(int OfficerNum) {
        this.OfficerNum = OfficerNum;
    }
    public String getOfficerName() {
        return OfficerName;
    }
    public int getOfficerNum() {
        return OfficerNum;
    }
    public boolean isExpired() {
        if (pm.getTimeParked() > pm.getTimePurchased())
            return true;
        else
            return false;
    }
    public String toString() {
        return "Officer Name: " + OfficerName + "\nOfficer Number: " + OfficerNum + "\n" + "\nFine: " + pt.TicketCost();    
    }
}

public class ParkingTicketDemo {
    public static void main(String[] args) {
        ParkedCar pc = new ParkedCar("Toyota", "Camry", "Blue", "BXZ 152");
        System.out.println(pc);
        ParkingMeter pm = new ParkingMeter(pc, 60, 120);
        ParkingTicket pt = new ParkingTicket(pm);
        PoliceOfficer po = new PoliceOfficer(pt, "Roger", 337);
        System.out.println(po);
    }
} 
```

我一直在尝试创建一个程序来创建和签发停车罚单，并且在编译时遇到了问题，但是当它运行时，它在线程“main”java.lang.NullPointerException 中给出错误消息异常。我是一个相当新的程序员，这是我第一次遇到这个问题，所以我还没有完全理解它，似乎无法修复它。我曾尝试在线阅读其他内容，但只是不明白我希望对我的问题进行简单的解释。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T00:40:37.807

NPE 的发生是因为这两行：

```
PoliceOfficer po = new PoliceOfficer(pt, "Roger", 337);
System.out.println(po); 
```

在你的构造函数中`PoliceOfficer`，你不对`ParkingTicket`实例做任何事情`pt`。

```
public PoliceOfficer(ParkingTicket pt /* not set anywhere */, String OfficerName, int OfficerNum) {
    this.OfficerName = OfficerName;
    this.OfficerNum = OfficerNum;   
} 
```

字段`ParkingMeter pm`和`ParkingTicket pt`保持为空，因为您尚未初始化它们。

然后你尝试打印对象：`System.out.println(po);`this 的作用是调用`toString()`on `po`，它等价于：

```
System.out.println(po.toString()); 
```

现在因为你的 toString()

```
public String toString() {
    return "Officer Name: " + OfficerName + "\nOfficer Number: " + OfficerNum + "\n" + "\nFine: " + pt.TicketCost();    
} 
```

使用`pt`，它会创建一个 NullPointerException，因为`pt`它是 null。

由于您已经将一个`ParkingTicket`实例传递给 for 的构造函数，因此请`PoliceOfficer`使用该实例来分配其成员变量`pt`。

# database - 将 mysql 数据库从 Mac 迁移到 Windows

> ID：15047394
> 
> 赞同：0
> 
> 时间：2013-02-24T00:35:13.933
> 
> 标签：database, windows, osx-snow-leopard

我正在为使用 MacBook Pro 的人创建一个数据库，并将在 Windows 7 系统上开发它。我应该如何将数据库从我的系统移动到 Mac 系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:43:28.743

这可能属于另一个堆栈。

您可以在您的设备上开发该站点，并在您开始工作后在客户端计算机上重新创建模型。如果有的话，它需要最少的调整。运行您的创建脚本并移动/复制目标机器上的 php 或其他脚本文件。

WAMP 仅描述环境的组件。只有少数例外情况 *AMP 内容无法在 * 主机操作系统平台上运行。

# javascript - 读取 json 文件并将数据（作为 json）保存在列表中

> ID：15047397
> 
> 赞同：1
> 
> 时间：2013-02-24T00:35:38.100
> 
> 标签：javascript

我是 JavaScript 新手，我正在尝试从文件中读取数据并将其保存在列表中，以便以后检索。就像是：

### 示例.json

```
{
  "circles": [
    {"x":14,"y":2,"z":4,"r":50},
    {"x":14,"y":2,"z":4,"r":50}
  ]
} 
```

我正在寻找的是：

```
var circle_list = []
circle_lst = some_function_which_reads_json_from_file('sample.json')
//Now circle list contains
circle_list = [
  {"x":14,"y":2,"z":4,"r":50},
  {"x":14,"y":2,"z":4,"r":50}
] 
```

稍后我可以做类似的事情：

```
for (var i = 0; i <circle_list.lenght;i++){
  //do osmething
} 
```

我正在调查

```
$.getJSON("sample.json" , function(data){
  //
}); 
```

但后来我知道这个调用是异步的......但我需要保持执行顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:38:46.353

不要维护执行顺序。这将在获取期间锁定浏览器。仅将其用作绝对的最后手段：

```
var circle_list;
$.ajax({'dataType': 'json', url: 'sample.json', 'async': false})
    .done(function(json) {
        circle_list = json;
}); 
```

相反，您至少可以做几件事：

1.  使用回调。由于延期，它不必都在一个地方。
2.  将 JSON 与页面的其余部分一起加载并从 DOM 中获取。

# sql - 从行等于值的其他表更新表

> ID：15047401
> 
> 赞同：1
> 
> 时间：2013-02-24T00:36:01.467
> 
> 标签：sql, sql-server-2008

我想创建一个触发器来从一个表中获取值并将它们传输到另一个表并更新。

像这样的东西：

```
UPDATE  [dbo].[TABLE1]
SET     CapelaWin  = 2,
        ProcyonWin = 1
WHERE   [dbo].[table2].[VictoryNation] = 1; 
```

我已经通过 stackoverflow 和谷歌搜索，但没有找到我的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:42:52.257

如果您知道表格是如何连接的（它们应该相互关联），您可以使用此模板来完成您的工作

```
UPDATE  [dbo].[TABLE1]
SET     CapelaWin  = 2,
        ProcyonWin = 1
from [dbo].[TABLE1] inner join [dbo].[TABLE2] on [dbo].[TABLE1].fld1 =[dbo].[TABLE1].fld2
WHERE   [dbo].[table2].[VictoryNation] = 1; 
```

并且您应该定义触发器何时触发。

# c++ - constexpr、数组和初始化

> ID：15047409
> 
> 赞同：4
> 
> 时间：2013-02-24T00:37:43.777
> 
> 标签：c++, templates, c++11, constexpr

C++ 世界中是否有任何东西可以使我尝试做的事情成为可能？

```
template < typename T
         , size_t Size >
struct array
{
    constexpr T buf[Size];

    constexpr size_t size() const { return Size; }
};

template < typename T
         , size_t Size >
constexpr array<T,Size+1> push_back(array<T,Size> const& arr, T const& val)
{
    array<T,Size+1> arr_out = {{arr.buf, val}};

    return arr_out;
} 
```

我要做的是创建一个用另一个数据初始化的新数组，然后在最后放置一个新元素。

减去 constexpr 我可以通过在 push_back 函数中循环初始化来使其工作。看来您不能在 constexpr 函数中这样做，尽管我认为足够聪明的编译器可以解决这个问题，但这是有道理的。

我很确定这是不可能的，但我很想被证明是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:25:19.287

[指数把戏](http://loungecpp.wikidot.com/tips-and-tricks%3aindices)，耶~

```
template < typename T
         , size_t Size >
struct array
{
    T buf[Size]; // non-static data members can't be constexpr

    constexpr size_t size() const { return Size; }
};

namespace detail{
template< typename T, size_t N, size_t... Is>
constexpr array<T, N+1> push_back(array<T, N> const& arr, T const& val, indices<Is...>)
{
    // can only do single return statement in constexpr
    return {{arr.buf[Is]..., val}};
}
} // detail::

template < typename T, size_t Size >
constexpr array<T,Size+1> push_back(array<T,Size> const& arr, T const& val)
{
    return detail::push_back(arr, val, build_indices<Size>{});
} 
```

[活生生的例子。](http://stacked-crooked.com/view?id=c6d476e7b944c571d0ede700fadc26d9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T03:36:02.993

扩展 Xeo 的答案，这是一个转发其论点的版本：

```
#include <boost/mpl/if.hpp>
#include <cstddef>
#include <utility>
#include <iostream>

template<typename T, std::size_t Size>
struct array
{
    typedef T value_type;
    T buf[Size];

    constexpr std::size_t size() const { return Size; }
};

template<typename T>
struct array_size;

template<typename T, std::size_t Size>
struct array_size<array<T, Size>> {
    static constexpr std::size_t value = Size;
};

template <typename T>
using Bare =
    typename std::remove_cv<typename std::remove_reference<T>::type>::type;

template <typename T>
constexpr T&& forward(typename std::remove_reference<T>::type& t) noexcept {
    return static_cast<T&&>(t);
}

template<typename Array>
using CVValueType = typename boost::mpl::if_<
    std::is_const<Array>,
    typename boost::mpl::if_<
        std::is_volatile<Array>,
        typename Array::value_type const volatile,
        typename Array::value_type const>::type,
    typename boost::mpl::if_<
        std::is_volatile<Array>,
        typename Array::value_type volatile,
        typename Array::value_type>::type
>::type;

template<typename Array>
using ForwardType =
    typename boost::mpl::if_c<
        std::is_lvalue_reference<Array>::value,
        CVValueType<typename std::remove_reference<Array>::type>&,
        CVValueType<typename std::remove_reference<Array>::type>&&>::type;

template <typename Array>
constexpr ForwardType<Array> forward_element(
    CVValueType<typename std::remove_reference<Array>::type>& t) noexcept
{
    return static_cast<ForwardType<Array>>(t);
}

template <std::size_t... Is>
struct indices {};

template <std::size_t N, std::size_t... Is>
struct build_indices
  : build_indices<N-1, N-1, Is...> {};

template <std::size_t... Is>
struct build_indices<0, Is...> : indices<Is...> {};

template<typename Array>
using Enlarged =
    array<typename Bare<Array>::value_type, array_size<Bare<Array>>::value+1>;

template<typename Array, typename T, std::size_t... Is>
constexpr Enlarged<Array> push_back(Array&& arr, T&& val, indices<Is...>)
{
    return {{forward_element<Array>(arr.buf[Is])..., forward<T>(val)}};
}

template <typename Array, typename T>
constexpr Enlarged<Array> push_back(Array&& arr, T&& val)
{
    return push_back(
        forward<Array>(arr),
        forward<T>(val),
        build_indices<array_size<Bare<Array>>::value>{});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:33:51.377

```
namespace detail_
{

template < typename T
         , size_t End >
struct push_backer
{
    template < typename Array
             , typename ... Args>
    static constexpr auto push_back(Array const& arr, Args const& ... args) -> decltype(push_backer<T,End-1>::push_back(arr, arr.buf[End-1],args...))
    {
        return push_backer<T,End-1>::push_back(arr, arr.buf[End-1], args...);
    }
};

template < typename T >
struct push_backer<T,0>
{
    template < size_t Size
             , typename ... Args>
    static constexpr array<T,Size+1> push_back(array<T,Size> const& arr, Args const& ... args)
    {
        return array<T,Size+1>{{args...}};
    }
};

}

template < typename T
         , size_t Size >
constexpr array<T,Size+1> push_back(array<T,Size> const& arr, T const& val)
{
    return detail_::push_backer<T,Size>::push_back(arr, val);
} 
```

# mysql - 尝试加入 2 个具有相同列名的表

> ID：15047411
> 
> 赞同：0
> 
> 时间：2013-02-24T00:38:16.183
> 
> 标签：mysql, sql

我想加入 2 个表，但它们都有电子邮件和密码，我希望这两个表都作为新行加入，而不是彼此相邻

所以而不是：

```
c.email         | c.password   | u.email       | u.password
company@mail.com  companypass  user@mail.com     userpass 
```

我希望它像

```
email              | password
company@mail.com     companypass
user@mail.com        userpass 
```

这是我当前的查询，它导致第一个示例：

```
SELECT 
      u.email, u.password, c.email, c.password 
FROM 
      korisnici_tbl AS u, companies_tbl AS c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:40:05.467

如果您希望它们位于*不同*的行中，您可以使用`UNION`( 或`UNION ALL`，它允许重复行)

```
SELECT email, password FROM companies_tbl
UNION ALL SELECT email, password FROM korisnici_tbl 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:39:41.977

一种选择是使用`UNION`：

```
SELECT email, password 
FROM korisnici_tbl 
UNION
SELECT email, password
FROM companies_tbl 
```

如果您想要潜在的重复行，请`UNION ALL`改用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T00:40:57.670

如果您想保留两个表中的行，则不需要连接，您需要`UNION`：

```
SELECT u.email, u.password FROM korisnici_tbl AS u
UNION ALL
SELECT c.email, c.password FROM companies_tbl AS c 
```

`ALL`如果在两个表中都找到任何重复项，该选项将保留重复项。如果要删除重复项，请`ALL`从`UNION`.

# html - 仅将列表样式图像应用于给定的 ul，而不是下层的 ul

> ID：15047412
> 
> 赞同：1
> 
> 时间：2013-02-24T00:38:25.870
> 
> 标签：html, css, html-lists

我有一个`<ul id="islist">`相应的css：

```
#islist {
    list-style-image: url('../img/img.png');
}

#islist * li {
    list-style-type: none;
} 
```

然后，在 this 中，还有另一个：

```
<ul id="islist">
    <li>title</li>
    <ul>
        <li>li1</li>
        <li>li2</li>
        <li>li3</li>
        <li>li4</li>
    </ul>
</ul> 
```

问题是所有`<li>`元素都有图像设置，而不仅仅是`title`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:42:28.870

您的 html 无效，您不能将 ul 作为 ul 的子级，将 ul 放在 li 中，然后样式将应用于嵌套的 lis。

```
<ul id="islist">
    <li>title</li>
    <li><ul>
        <li>li1</li>
        <li>li2</li>
        <li>li3</li>
        <li>li4</li>
    </ul>
    </li>
</ul> 
```

我也认为你想使用`list-style: none;`而不是`list-style-type:none;`

[**演示**](http://jsfiddle.net/mowglisanu/9pAsk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:42:19.977

问题是样式应用于`ul`，而不是`li`. 更改 CSS 如下：

```
#islist {
    list-style-image: url('../img/img.png');
}

#islist ul {
    list-style-type: none;
} 
```

# java - 调试在 NetBeans 中正确运行的运行时 Java 崩溃的策略

> ID：15047417
> 
> 赞同：2
> 
> 时间：2013-02-24T00:38:55.720
> 
> 标签：java, swing, runtime-error

提前抱歉。这是一个非常模糊的问题，因为我不知道发生了什么。我有一个用 NetBeans 编写的 Java Swing GUI 桌面应用程序。在 NetBeans 中，该应用程序运行良好，并且通过了我对其进行的所有测试。在过去的几个月里，我一直在开发这个应用程序，并在其开发的各个阶段部署它。

昨天，我完成了一些新功能的添加和测试。我构建了应用程序并将其放在另一台计算机上。然后我直接从 jar 文件中运行程序（在 NetBeans 之外）。在新区域（JDialog 框）中，程序崩溃。由于我不在 IDE 中，因此我没有反馈来查看问题所在。

我能想到的唯一一件事（这是蹩脚的）是我添加了一些切换字符串的 switch 语句，这是我对 1.7 的新手知道的。我之前是在 1.6 中开发的。否则，我想不出任何理由该程序应该在 IDE 内完美运行，但在它之外崩溃。

任何人都可以就我应该如何处理这个问题提供任何建议吗？我完全不知所措。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:50:40.247

我将从收集故障转储数据开始。如果你在 Windows 上运行 UI，你可以使用[DrWatson](http://blogs.technet.com/b/askperf/archive/2007/06/15/capturing-application-crash-dumps.aspx)

如果您在 Linux 中运行 UI，默认情况下，堆转储是在 VM 工作目录中名为 java_pidpid.hprof 的文件中创建的。除非您通过将其添加`-XX:HeapDumpPath= option` 到 UI java 选项来自己指定路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:40:11.953

您的下一个调试步骤是减小程序的大小，直到它不崩溃，然后查看您所做的更改是否有效。这应该要么让答案显而易见，要么给你一个很好的问题来发布在 SO 上。

您认为它可能与 switch 语句有关的想法告诉您尝试：

*   删除它们
*   在 JDK 6 上删除和编译，看看它是否有效

这些是减小程序大小以查看是否可以使其运行的合理方法。

# c# - C# 中的 HTML 解析 - 分类

> ID：15047422
> 
> 赞同：0
> 
> 时间：2013-02-24T00:39:49.723
> 
> 标签：c#, html, parsing, classification

我正在研究情绪分类，并且正在解析本地电影数据库中的数据。问题是它们具有三种分类形式。一个有星星（在......中实现）一个“垃圾”，没有给星星或称之为垃圾，这是它的主要链接：[http](http://www.csfd.cz/film/7049-playgirls/?all=1) ://www.csfd.cz/film/7049-playgirls/?all=1您需要检查源代码 - 这是一个示例，您可以查看所有三种用户对电影的评价。

```
</li>
<li id="comment-8356897">
    <h5 class="author"><a href="/uzivatel/138463-campbell/">Campbell</a></h5>
    <img src="http://img.csfd.cz/assets/images/rating/stars/2.gif" class="rating" width="16" alt="**" />
    <div class="info">
        <a href="/uzivatel/138463-campbell/komentare/">všechny komentáře uživatele</a></div>
    <p class="post">Ale jo:-D Když jsem viděl že tenhle film je na prvním místě mezi největšíma sračkama na CSFD, a tak jsem se zhrozil a abych si utrpení ještě vylepšil, tak jsem si pustil oba dva díly naráz. No hell to celkem bylo ale ne nic extrémní. Viděl jsem větší shity. V tomhle filmu jsem měl děsnej problém fandit někomu fandit protože to moc nejde. Šílenost, Ale ne nejhorší.<span class="date desc">(11.3.2011)</span></p>
</li>
<li id="comment-872277">
    <h5 class="author"><a href="/uzivatel/48974-fleker/">fleker</a></h5>

    <div class="info">
        <a href="/uzivatel/48974-fleker/komentare/">všechny komentáře uživatele</a></div>
    <p class="post">tak na todle rači ani koukat nebudu; hodnocení to má slušný ale nechci riskovat aby mi vyschla mícha<span class="date desc">(29.7.2009)</span></p>
</li>
<li id="comment-327360">
    <h5 class="author"><a href="/uzivatel/41698-ozo/">Ozo</a></h5>
    <strong class="rating">odpad!</strong>
    <div class="info">
        <a href="/uzivatel/41698-ozo/komentare/">všechny komentáře uživatele</a></div>
    <p class="post">Změna názoru - tohle si jednu hvězdičku nezaslouží =(<span class="date desc">(29.7.2007)</span></p>
</li> 
```

非常感谢我的计划是这样做的：

```
string srxPathOfCategory = "//ul[@class='ui-posts-list']//li//img[@class='rating'] | //ul[@class='ui-posts-list']//li//strong[@class='rating']";
        foreach (var att in doc.DocumentNode.SelectNodes(srxPathOfCategory)) // | .//strong[@class='rating']")){
        {

            if (att.InnerText == "odpad!")  //odpad means rubbish
            {
                b[j] = att.InnerText; //saving "odpad!" for later use

            }
            if (att.Attributes["alt"] != null)

            {
                b[j] = att.Attributes["alt"].Value; //these values are from 1* to 5*****

            }
          if (att.InnerText != "odpad!" && att.Attributes["alt"] == null)//this is where the problems starts
            {
                   b[j] = "without user evaluation";

            }

            j++;
        } 
```

这段代码的问题是如果找不到 att.InnerText == "odpad!" 或 att.Attributes["alt"] != null 它继续到下一篇文章并从那里获取用户评价。但是我想至少将某些内容与省略了评估的帖子相匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T14:15:02.993

感谢所有帮助，但问题出在 html 的 xpath 中。

我这样解决了

```
string srxPathOfCategory = "//ul[@class='ui-posts-list']//li";

        foreach (var att in doc.DocumentNode.SelectNodes(srxPathOfCategory))
        {

            foreach (var child in att.ChildNodes.Skip(3)) // skipping first three nodes //- first one is whitespace - marked as #text child node, then there is h5 and third is //another whitespace marked as #text child node 
            {

                if (child.InnerText == "odpad!")
                {
                    b[j] = child.InnerText;
                    Console.WriteLine(b[j]);
                    Console.ReadKey();
                    break;

                }
                else if (child.Attributes["alt"] != null)
                {
                    b[j] = child.Attributes["alt"].Value;
                    Console.WriteLine(b[j]);
                    Console.ReadKey();
                    break;
                }
                else
                {
                    b[j] = "without user evaluation";
                    Console.WriteLine("hlupost");
                    Console.ReadKey();
                    break;
                }

            }
            j++;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:53:44.440

“欧巴！” 不在属性中，在元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T10:42:26.123

如果你改变你的`if`陈述怎么办。**如果只有一个**是真的，为什么还要有 3 个`if`陈述？

 **```
// Is it "odpad" ?
if (att.InnerText == "odpad!")
{
    b[j] = att.InnerText;

}
// .. If not, is it starred?
else if (att.Attributes["alt"] != null)
{
    b[j] = att.Attributes["alt"].Value;

}
// If none of above, it must be this (default)
else
{
       b[j] = "without user evaluation";

} 
```**

# python - Ghost.py 没有找到 PySide？

> ID：15047426
> 
> 赞同：4
> 
> 时间：2013-02-24T00:40:06.383
> 
> 标签：python, macos, webkit, screen-scraping, ghost.py

我正在尝试在 Mac 上开始使用[Ghost.py](https://github.com/jeanphix/Ghost.py/blob/master/ghost/ghost.py)无头浏览器。我使用这些链接/命令安装了 Ghost.py 及其依赖项：

1.  [Qt 5.0.1 for Mac](http://qt-project.org/downloads)，有一个 GUI 安装程序
2.  [PySide 1.1.0](http://qt-project.org/wiki/Category%3aLanguageBindings%3a%3aPySide%3a%3aDownloads)需要`Qt Version >= 4.7.4`一个 GUI 安装程序
3.  `sudo pip install Ghost.py`

我启动了 Python，并确认我可以`import PySide`. 但是，当我这样做时`from ghost import Ghost`，**它找不到 PySide**：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ghost/__init__.py", line 1, in <module>
    from ghost import Ghost
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ghost/ghost.py", line 28, in <module>
    raise Exception("Ghost.py requires PySide or PyQt")
Exception: Ghost.py requires PySide or PyQt 
```

通过这样做`import PySide; print PySide;`，PySide 似乎安装在我的系统上：`/Library/Python/2.7/site-packages/PySide`. 所以，附加`PYTHONPATH`这样的：
`export PYTHONPATH=$PYTHONPATH:/Library/Python/2.7/site-packages #for PySide`.

但是，`Ghost.py`还是找不到`PySide`。

**我怎样才能说服`Ghost.py`我找到我的安装`PySide`？**

* * *

环境：

*   Mac OS X 10.7.5
*   蟒蛇 2.7
*   Qt 5.0.1
*   PySide 1.1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T17:56:47.463

我遇到了完全相同的问题，但设法解决了它。方法如下：

1.  卸载系统上当前安装的 PySide 和 qt。确保 PySide 不存在于 `/Library/Python/2.7/site-packages`.
2.  [从http://qt-project.org/wiki/PySide_Binaries_MacOSX](http://qt-project.org/wiki/PySide_Binaries_MacOSX "http://qt-project.org/wiki/PySide_Binaries_MacOSX")安装 qt 和 PySide 。

PS：我的系统运行的是 10.9（Mavericks），但我认为它也应该在 10.7（Mountain Lion）中运行。

# javascript - 为什么在全局变量中显示值时会出现未定义？

> ID：15047442
> 
> 赞同：0
> 
> 时间：2013-02-24T00:42:42.400
> 
> 标签：javascript, jquery

我只是不明白，很明显。我试过 setter 和 getter，自调用函数，你说的。就像点击处理程序正在返回一个值，但我没有办法保留它？

这是我在第一个文件 request.js 中的代码

```
var testId = (function (inId) {
    var citeId  = inId;
    return citeId;
})();

function mainAjax() {
   return $.ajax({
      type: 'GET',                        
      url: 'https://www.sciencebase.gov/catalog/items?parentId=504108e5e4b07a90c5ec62d4&max=60&offset=0&format=jsonp',
      jsonpCallback: 'getSBJSON',
      contentType: "application/json",
      dataType: 'jsonp'
   });
}

var promise = mainAjax(); 
```

这是我的第二个文件 requestMain.js 中的代码，

```
promise.done(function (json) {
   var linkBase = "http://www.sciencebase.gov/catalog/item/";
   var link = "";                     
   var itemId = "";                    
   var urlId = "";

   $.each(json.items, function(i,item) {
      link = linkBase + this.id;
      $('#sbItems').append('<li><b><a href="' + link + '" id="idNum' + i + ' ">' + this.title + '</a> - </b>' + this.summary + '</li>');                    
   });
   $('#sbItems a').on('click', function (e) {  
      e.preventDefault();                      
      var str = $(this).attr('id');                         
      if (str.length == 7) {                      
         itemId = str.slice(5,6);
      } 
      else if (str.length == 8) {
         itemId = str.slice(5,7);
      }
      testId = json.items[itemId].id;
      alert(testId);                      
}); // END Click event  

}).fail(function() {
   alert("Ajax call failed!");
}); 
```

此网页显示链接列表。链接可能包含我希望在第二个网页上显示的更多信息，或者它可能什么也没有。因此，当单击链接时，我需要存储/保存/保留链接中的 id，以便我可以在 url 中使用它来发出另一个 ajax 请求，因为在我获得 id 之前，下一页的 ajax 请求将没有想法要询问什么信息。

现在我只是在做这个

```
alert(testId); 
```

但我想做的是这个，

```
$.ajax({
    type: 'GET',
    url: 'https://www.sciencebase.gov/catalog/itemLink/' + testId + '?format=jsonp',
    jsonpCallback: 'getSBJSON',
    contentType: "application/json",
    dataType: 'jsonp',
    // Then doing something with json.something 
```

testId 将在 url 中使用，它会根据在上一页上单击的链接而改变。ajax 调用完全依赖于点击事件，并显示在带有新信息的单独网页上。

这将在我的第三个文件 requestCitation.js 中，目前在执行时给我一个很大的未定义

```
alert(testId); 
```

我认为这是一个范围问题，但是如何存储单击返回的值？？？这样我就可以在全球范围内使用它了吗？似乎该值在范围之外消失了，就好像根本没有点击一样，即使我将它存储在变量中？

第一个页面的 html 有 request.js 和 requestMain.js 的脚本标签，第二个页面有 request.js 和 requestCitation.js 的脚本标签，所以他们都可以看到变量 testId。

谢谢您的帮助！

这是[jsfiddle](http://jsfiddle.net/Fz5ZB/)

这些是链接以及单击链接时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:11:23.133

我不完全确定您要做什么，但如果您尝试将从 AJAX 请求返回的数据保留为全局变量，我会认为它是使用类似于下面的内容完成的。

例如

```
var promise = '';
$.ajax({
      type: 'GET',                        
      url: 'https://www.sciencebase.gov/catalog/items?parentId=504108e5e4b07a90c5ec62d4&max=60&offset=0&format=jsonp',
      jsonpCallback: 'getSBJSON',
      contentType: "application/json",
      dataType: 'jsonp'
      data: '';
      success: function(data){
         promise = data;
      }
}); 
```

但正如我所说，我没有完全理解，所以我的回答可能非常错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:11:23.867

您`testId`持有由您正在调用的函数重新调整的值，并且由于该函数返回其参数并且您在没有参数的情况下调用它，它将是`undefined`：

```
var testId = (function (inId) {
  var citeId  = inId;
  return citeId; //returns the argument
})(); // called with no argument 
```

# java - 独立应用程序的调度程序？

> ID：15047443
> 
> 赞同：-2
> 
> 时间：2013-02-24T00:42:43.847
> 
> 标签：java, scheduled-tasks, quartz-scheduler

您为独立的 Java 控制台应用程序推荐什么软件？

石英是唯一的选择吗？

我想每 x 分钟执行一次任务，并在文本文件中报告操作的返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:12:49.637

您可以使用`java.util.Timer`或`java.util.concurrent.ScheduledExecutorService`完成此任务

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T04:48:24.243

如果您使用的是 Java EE 应用程序服务器，则可以为此使用 EJB @Timer。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T04:54:19.653

Quartz 是一个常用的调度器库。但是，听起来您需要一些非常简单的东西。你能做这样的事情吗？（伪代码）

```
while (!some_termination_condition) {
   Result r = doTask();
   logResult(r);
   Thread.sleep (x_minutes*60*1000);
} 
```

# list - 如何对 Prolog 列表的元素执行算术运算

> ID：15047449
> 
> 赞同：3
> 
> 时间：2013-02-24T00:43:58.633
> 
> 标签：list, recursion, prolog, axiom

# 背景

整数系数列表可用于表示多项式（在 X 中）。例如，1 + 3x + 3x^2 + 2x^3 用 [1,3,3,2] 表示。

让 P 成为这些列表之一。

我需要编写公理来接受这些系数并用它们做不同的事情。

**示例：**关系 eval(P,A,R) 的公理，其中 R 是在 X = A 处评估由 P 表示的多项式的结果（期望 P 和 A 被完全实例化）。例如，eval([3,1,2],3,R) 产生 R=24。（这是因为 3(3)^0 + 1(3)^1 + 2(3)^2 = 3 + 3 + 18 = 24）。

本[Prolog 教程](http://www.doc.gold.ac.uk/~mas02gw/prolog_tutorial/prologpages/lists.html)讨论了递归搜索列表：“它查看某项是否是列表中的第一项。如果是，我们成功。如果不是，那么我们丢弃列表中的第一项并查看其余项” .

```
on(Item,[Item|Rest]).  

on(Item,[DisregardHead|Tail]):-

      on(Item,Tail). 
```

# 问题

此代码如何丢弃列表中的第一项？

那么问题就变成了，一旦我找到它，我如何使用它来计算如上所述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T00:53:07.823

> 此代码如何丢弃列表中的第一项？

通过`on`在列表的尾部递归调用，您将忽略第一个元素。而且由于您不会使用它，因此您应该调用它`_`而不是`DisregardHead`（某些编译器会警告您“单例变量”）。

> 一旦我找到它，我如何使用它来计算如上所述？

好吧，`on`应该返回多个结果 - 每个匹配一个 - 而您的目标是获得一个**将**整个列表考虑在内的结果。所以你不应该忽略第一个元素，而是将它合并到结果中。例子：

```
my_pred([],0).
my_pred([Item|Tail],Result) :-
    my_pred(Tail,IntermResult),
    combine(Item,IntermResult,Result). % Ex.: Result is Item + IntermResult 
```

我没有给出完整的代码，因为您似乎仍在学习，但如果这是您想要的，可以这样做。这也是一个非常简单的例子，并且没有优化（即没有尾递归）。

附加提示：如果您以这种方式表达您的多项式，则应该清楚如何进行递归计算：

```
1 + x * (3 + x * (3 + x * (2 + x * 0))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T01:40:04.257

我制作了一个 90 秒的视频来展示如何使用 SWI-Prolog 的 guitracer 直观地理解简单的 Prolog 程序。在 Ubuntu/Debian 上只需执行此操作，您就可以使用视频中的命令（即、（加载文件）、，然后是查询）`sudo apt-get install swi-prolog`自己尝试调试器。`swipl``[filename]``guitracer.``trace.`

![使用 SWI-Prolog 的 guitracer](../Images/06dba9fb09834063aaf0421f117b522e.png)

如果文本不可读，请右键单击图像并选择“查看图像”(Firefox)。

# c - 有没有一种聪明的方法可以在 mpi 中交换边界数据？

> ID：15047454
> 
> 赞同：0
> 
> 时间：2013-02-24T00:45:12.600
> 
> 标签：c, openmpi

我面临着将二维流体动力学模型划分为多个处理器。该模型以多个数组表示，每个处理器获取数组的*nxn*块来处理，但每个坐标都受水平和垂直相邻单元的影响，因此需要相邻处理器之间的通信。我目前的计划是手动将边界指定为顶部和底部的连续数据类型以及侧面的类型向量，但我突然想到这可能是 MPI 的常见用例（鉴于有这么多的“游戏”生活的例子），那么有没有更聪明的方法将数组“边界数据”传递给相邻的处理器？谢谢。

# php - 你可以为表中的一行设置一个值吗？

> ID：15047458
> 
> 赞同：2
> 
> 时间：2013-02-24T00:46:12.200
> 
> 标签：php, jquery, html

我想为从我的数据库生成的每一行（tr）设置一个行值。所以假设我正在生成下表：

```
while ($row = $database->fetch_array($result))
{
$i=1-$i;
$class = "row".$i;

echo "<tr class='{$class} productId' id='{$row['productId']}'>

<td > ". $row['category']."</td>
<td >" . $row['productNo']. "</td>
<td>" . $row['productName'].  "</td>
<td class='edit'>" . intval($row['quantity']).  "</td>
 <td>" . $row['sfLf'].  "</td>
<td>".  $row['cost']. "</td>
<td>".  $row['total']."</td>
  </tr>";
} 
```

在这里，我尝试通过 id 属性传递 productId 值，但不幸的是，当我尝试在以下脚本中检索时，所有行的 id 都保持不变：

```
$(".productId").click(function() {
    $.ajax({
        type: "POST",
        url: "populateInventory.php",
        data: "productId="+$(".productId").attr('id'),
        success: function(msg){
          $("#invHistoryTable").html(msg);
        }
    }); 
```

如何使用上面的 ajax 命令将正确的 productId 值传递给我的 php 页面？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:47:20.890

您正在使用`post`方法，但您正在发送一个字符串。您应该发送一个键/值对，还`attr`返回 jQuery 集合中第一个选定元素的 ID，而不是触发事件的元素，您可以使用`this`关键字来引用单击的元素。

```
$(".productId").click(function(event) {
    // event.preventDefault();
    $.ajax({
        type: "POST",
        url: "populateInventory.php",
        data: { productId: this.id } ,
        success: function(msg){
          $("#invHistoryTable").html(msg);
        }
    }); 
}) 
```

# php - php readdir 和 is_dir

> ID：15047460
> 
> 赞同：2
> 
> 时间：2013-02-24T00:46:33.453
> 
> 标签：php, directory

我正在测试目录处理的功能。我有一个包含以下内容的折叠/目录：

0 文件夹

假文件夹

my_pictures 文件夹

MVI_3094 mov 文件

img01 JPEG 图片

ETC...

我编写了以下代码来遍历目录并打印出特定的结果

```
$handle = opendir("files/");
while(($entry = readdir($handle)) !== false)
{
    if($entry == "." || $entry == "..")
    {
        continue;
    }
    if(is_dir($entry))
    {
        echo "Directory:$entry<br />";
    }
} 
```

我唯一的问题是第二个“if”语句没有输出结果

```
echo "Directory:$entry<br />"; 
```

即使该条目是一个目录。我已经使用“var_dump”函数手动检查了该条目，它作为目录返回 true。

任何建议都会有所帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T00:48:13.773

试试这个并检查。只是尝试...

```
$handle = opendir("files/");
while(($entry = readdir($handle)) !== false)
{
    if($entry == "." || $entry == "..")
    {
        continue;
    }
    elseif(is_dir("files/".$entry))
    {
        echo "Directory:$entry<br />";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T00:49:10.330

$entry 是相对的... is_dir 需要一个绝对路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T00:50:46.110

尝试：

```
if(is_dir("files/".$entry)) 
```

`readdir()`只是返回文件名。因此，您的代码在当前目录而不是子目录中查找文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T00:50:10.703

这只会探测任何目录条目的基本名称：

```
 is_dir($entry) 
```

opendir() 结果列表将与您提供的阅读目录相关。所以你需要使用：

```
 is_dir("files/$entry") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T00:50:57.953

尝试使用[`DirectoryIterator`](http://php.net/manual/en/class.directoryiterator.php)：

```
$iterator = new \DirectoryIterator(realpath('files/'));

foreach($iterator as $file){

  if($file->isDot())
    continue;

  if($file->isDir())
    printf('Directory: %s <br/>', $file->getRealPath());

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-24T00:53:28.167

您的问题是 in `elseif(is_dir($entry)) {`，`entry`等于“file.txt”或“somedirectory”之类的字符串，它根本不是指向文件的路径。它需要是“文件/file.txt”。

试试这个：

```
$dir = "files/";
$handle = opendir($dir);
while(($entry = readdir($handle)) !== false)
{
    if($entry == "." || $entry == "..")
    {
        continue;
    }
    if(is_dir($dir.$entry))
    {
        echo "Directory:$entry<br />";
    }
} 
```

# vb.net - 识别文件/流的文件类型 - VB.Net

> ID：15047462
> 
> 赞同：0
> 
> 时间：2013-02-24T00:46:51.577
> 
> 标签：vb.net, stream, file-type

当我从 URL 下载文件时遇到问题（这不是我的主要问题），然后问题就出现了。我从 URL 保存的文件可以是图像、文档、PDF 或 ZIP。

当路径没有扩展名时，是否存在一些知道文件类型的方法？或者从流中识别文件类型？

我正在使用 Visual Studio 2010 Express Edition - Framework.Net 3.5 - A Window App

```
Public Function DownloadFile_FromURL(ByVal URL As String, ByVal DestinationPath As String) As Boolean
    DownloadFile_FromURL = False

    Try
        Dim vRequest As Net.HttpWebRequest
        Dim vResponse As Net.HttpWebResponse

        vRequest = Net.WebRequest.Create(New Uri(URL))
        vRequest.Method = "GET"
        vRequest.AllowAutoRedirect = True
        vRequest.UseDefaultCredentials = True
        vResponse = vRequest.GetResponse

        If vResponse.ContentLength <> -1 Then
            Dim vLen As Long = vResponse.ContentLength
            Dim vWriteStream As New IO.FileStream(DestinationPath, IO.FileMode.CreateNew)
            Dim vStream As IO.Stream = vResponse.GetResponseStream()

            Dim vReadBytes() As Byte = New Byte(255) {}
            Dim vCount As Integer = vStream.Read(vReadBytes, 0, vReadBytes.Length)

            While vCount > 0
                vWriteStream.Write(vReadBytes, 0, vCount)
                vCount = vStream.Read(vReadBytes, 0, vReadBytes.Length)
            End While

            vWriteStream.Flush() : vWriteStream.Close()
            vResponse.Close() : vRequest = Nothing : GCcleaner()
            Dim v = System.IO.Path.GetExtension(DestinationPath)

            DownloadFile_FromURL = True
        End If
    Catch ex As Exception
        Throw New Exception(ex.mc_GetAllExceptions)
    End Try
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:53:33.510

If you are using WebRequest for the download.

```
Dim uri As String = "http://domain.com/resource"

Dim request As HttpWebRequest = DirectCast(WebRequest.Create(uri), HttpWebRequest)
request.Method = "GET"
Dim response As HttpWebResponse = DirectCast(request.GetResponse(), HttpWebResponse)

Dim contentType = response.ContentType
' this will have the content type/ file type 
```

You can now have a routine to save the file using a particular extension depending on the content type. for instance a content type of "image/jpeg" can be saved as *.jpg

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:57:05.353

For an Image you can load it into an Image() object and see if it throws an OutOfMemoryException -- not an image.

PDF you can read the first few bytes of it (the PDF file type info is stored there, though not sure exactly what it is at the moment).

ZIP and DOC I'm not sure about.

If you are using WebRequests you can grab the content type of the response stream. More information about the MIME/content types here: [http://msdn.microsoft.com/en-us/library/ms775147.aspx](http://msdn.microsoft.com/en-us/library/ms775147.aspx)

# dart - 全局设置和拆卸功能

> ID：15047464
> 
> 赞同：3
> 
> 时间：2013-02-24T00:46:55.873
> 
> 标签：dart

通常情况下，您需要在每次测试后进行某种清理。例如，清理数据库。

问题：

使用 unittest 库时，有没有办法附加全局 tearDown 和 setUp 函数？能够围绕建议进行定义会更好：

```
unittest.around((test){
  //doing setup
  test();
  //doing cleanup
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:46:51.290

您可以手动完成，正如 Gram 在 bug 中提到的那样：

```
main() {
  topSetup() {
    // ...
  }
  setUp(topSetup);

  group('group', () {
    setUp(() {
      topSetup();
      // ...
    });

    test('test', () {
      // ...
    });
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T01:41:54.637

当然，这个bug需要先修复:-)

然后你会像贾斯汀所说的那样使用可以显式调用的非匿名函数来执行此操作。在我看来，这是提供最大灵活性的最佳方式，而无需使用大量复杂的设置/拆卸逻辑来妨碍单元测试库。

如果您想进行测试套件设置/拆卸，您可以在组中使用初始/最终“测试”来执行此操作：

```
group('test suite', () {
  test('Set up suite', () { ... });
  test('Test 1', () { ... });
  ...
  test('Test n', () { ... });
  test('Tear down suite', () { ... });
}); 
```

这并不理想，但它是一个解决方案。

值得指出的是，在内部，组实际上并不表示为层次结构。我们真正要做的就是与当前的 setUp/tearDown 函数保持一个堆栈，这样我们就可以将每个测试用例与适当的测试用例相关联，并将组名和测试名连接起来以形成测试用例的最终名称。我们没有构建树形数据结构，因此我们没有一种隐式执行向上调用的好方法（我们可以动态创建调用一个级别的闭包，并将它们用作实际的 setUp/tearDown 函数，但这有点丑陋）。

# java - 使用 HtmlUnit 登录网站

> ID：15047468
> 
> 赞同：0
> 
> 时间：2013-02-24T00:47:35.043
> 
> 标签：java, htmlunit

我正在尝试登录我的大学网站，但遇到了 html 单元的问题。

我的代码：

```
 WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_8);
    webClient.setJavaScriptEnabled(false);
    webClient.setThrowExceptionOnScriptError(false);
    HtmlPage currentPage = webClient.getPage("http://www.oid.hacettepe.edu.tr/cgi-bin/menuindex.cgi");
    HtmlForm form = currentPage.getForms().get(0);  // forms correct
    System.out.println(form.asXml());
    HtmlTextInput name = form.getInputByName("login");
    HtmlPasswordInput pass = form.getInputByName("passwd");
    name.setValueAttribute("*****");
    pass.setValueAttribute("*****");
    HtmlSubmitInput button = form.getInputByName("SubmitName");
    HtmlPage page2 = button.click();
    System.out.println(page2.asText()); 
```

结果 ：

```
Exception in thread "main" com.gargoylesoftware.htmlunit.ElementNotFoundException: elementName=[input] attributeName=[name] attributeValue=[login]
    at com.gargoylesoftware.htmlunit.html.HtmlForm.getInputByName(HtmlForm.java:460)
    at hacettepe.Hacettepe.main(Hacettepe.java:34)
Java Result: 1 
```

你能解释一下我对这个问题的想法有什么问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:04:37.740

因为在页面上找不到元素“登录”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:32:16.720

就像 user2115021 建议的那样，作为第一步，验证您要查找的元素实际上是否在您请求的第一页中。特别要确保“login”、“psswd”和“SubmitName”是“currentPage”中的实际值。

如果这不起作用，请尝试更改获取表单名称的方式。我用过

`final HtmlForm form = page.getFormByName("loginform");`

之前没有任何麻烦。getForms() 可能会返回多个表单，您需要确保您正在查看正确的表单。

# math - 从四元数到欧拉角的错误转换

> ID：15047471
> 
> 赞同：4
> 
> 时间：2013-02-24T00:48:44.083
> 
> 标签：math, rotation, angle, quaternions

我正在将角度轴表示转换为欧拉角。我决定检查并确保我从转换中得到的欧拉角会回到原来的轴角。我打印出值，但它们不匹配！我已阅读[http://forum.onlineconversion.com/showthread.php?t=5408](http://forum.onlineconversion.com/showthread.php?t=5408)和[http://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles](http://en.wikipedia.org/wiki/Conversion_between_quaternions_and_Euler_angles)以及本网站上的类似转换问题。

在下面的代码中，我从角度“角度”和轴 (rx,ry,rz) 开始，然后将其转换为四元数 (q0,q1,q2,q3)。我将四元数转换为欧拉角（滚动、俯仰、偏航）。然后为了检查它，我将 (roll,pitch,yaw) 转换回轴角为 cAngle 和 (cRx,cRy,cRz)。然后我对（滚动、俯仰、偏航）进行一些边界检查，以将数字保持在 -pi 和 pi 之间，然后将它们打印出来。应该是cAngle=angle和(cRx,cRy,cRz)=(rx,ry,rz)，但是这两个都是错的。

我相信，旋转的顺序是 Z*Y*X，这很常见。我的数学有问题吗？[我计划最终在http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/](http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToEuler/)中为音高为 0 或 PI 添加特殊情况，但现在我认为问题是单独的。

```
 //input is angle 'angle' and axis '(rx,ry,rz)'

        //convert rx,ry,rz, angle, into roll, pitch, yaw
        double q0 = Math.Cos(angle / 2);
        double q1 = Math.Sin(angle / 2) *Math.Cos(rx);
        double q2 = Math.Sin(angle / 2) * Math.Cos(ry);
        double q3 = Math.Sin(angle / 2) * Math.Cos(rz);
        double roll = Math.Atan2(2 * (q0 * q1 + q2 * q3), 1 - 2 * (q1 * q1 + q2 * q2));
        double pitch = Math.Asin(2 * (q0 * q2 - q3 * q1));
        double yaw = Math.Atan2(2 * (q0 * q3 + q1 * q2), 1 - 2 * (q2 * q2 + q3 * q3));

        //convert back to angle axis
        double cAngle = 2 * Math.Cos(Math.Cos(roll / 2) * Math.Cos(pitch / 2) * Math.Cos(yaw / 2) + Math.Sin(roll / 2) * Math.Sin(pitch / 2) * Math.Sin(yaw / 2));
        double cRx = Math.Acos((Math.Sin(roll / 2) * Math.Cos(pitch / 2) * Math.Cos(yaw / 2) - Math.Cos(roll / 2) * Math.Sin(pitch / 2) * Math.Sin(yaw / 2)) / Math.Sin(cAngle / 2));
        double cRy = Math.Acos((Math.Cos(roll / 2) * Math.Sin(pitch / 2) * Math.Cos(yaw / 2) + Math.Sin(roll / 2) * Math.Cos(pitch / 2) * Math.Sin(yaw / 2)) / Math.Sin(cAngle / 2));
        double cRz = Math.Acos((Math.Cos(roll / 2) * Math.Cos(pitch / 2) * Math.Sin(yaw / 2) - Math.Sin(roll / 2) * Math.Sin(pitch / 2) * Math.Cos(yaw / 2)) / Math.Sin(cAngle / 2));

        //stay within +/- PI of 0 to keep the number small
        if (roll > 3.1416) roll = -Math.PI + (roll - Math.PI);
        if (roll < -3.1416) roll = Math.PI + (roll - (-1) * Math.PI);
        if (pitch > 3.1416) pitch = -Math.PI + (pitch - Math.PI);
        if (pitch < -3.1416) pitch = Math.PI + (pitch - (-1) * 3.1416F);
        if (yaw > 3.1416) yaw = -Math.PI + (yaw - Math.PI);
        if (yaw < -3.1416) yaw = Math.PI + (yaw - (-1) * Math.PI);

        Console.WriteLine("original angle, axis " + angle + ": " + rx + ", " + ry + ", " + rz);
        Console.WriteLine("converted angle, axis " + cAngle + ": " + cRx + ", " + cRy + ", " + cRz);
        Console.WriteLine("quats " + q0 + ", " + q1 + ", " + q2 + ", " + q3);
        Console.WriteLine("roll,pitch,yaw:  " + roll + ", " + pitch + ", " + yaw); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T09:46:32.573

我没有（也不会）检查您的代码。**即使您的代码是正确的，您的测试也会因为至少 2 个原因而失败。**

*   [有两种方法](http://www.gregslabaugh.name/publications/euler.pdf)可以用欧拉角表示相同的旋转。另请参阅[Euler angle to Quaternion 然后 Quaternion to euler angle](https://stackoverflow.com/q/11103683/341970)，该问题基本上与您遇到的问题相同。

*   四元数具有所谓的[双重覆盖](http://en.wikipedia.org/wiki/Quaternion#Three-dimensional_and_four-dimensional_rotation_groups)特性：两个单位四元数对应于每个旋转。

也就是说，即使您的转换是正确的，您也可以获得另一种表示，而不是您开始使用的表示。不管你是从欧拉角还是四元数开始。

* * *

如果你想测试你的代码，我建议检查**单位基向量的正交旋转**。例如`[1, 0, 0]`适当旋转 90 度以获得`[0, 1, 0]`. 检查你是否真的得到了预期`[0, 1, 0]`的等等。如果你得到了所有 3 个基向量的旋转，那么你的代码很可能是正确的。

**该测试具有明确的优点，**如果您弄乱了某些东西（例如公式中的符号），该测试可以帮助您找到错误。

* * *

我不会使用欧拉角，因为[它们会破坏您应用程序的稳定性](https://stackoverflow.com/a/5578867/341970)。它们[也不是很方便](https://stackoverflow.com/a/5580491/341970)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-03T19:13:04.897

使用四元数是不正确的。

我想补充一下这个答案。即使应用程序不正确，人们也会按照惯例使用四元数，因此这很重要。

如果您的旋转主题不能滚动，那么使用四元数来表示您的旋转是不正确的。四元数将旋转的 3 个维度编码到系统中，如果您的系统只有两个，则表示不匹配且不正确。

四元数是一种过于复杂的旋转表示，用于修复万向节锁定并仅为涉及俯仰、偏航和滚动的旋转提供更好的可组合性。

如果你只有俯仰和偏航。四元数变换可以给你一个涉及滚动的答案，这从根本上是不正确的。将滚动角归零不会阻止您的变换具有滚动值。四元数没有用旋转的概念编码，没有滚动，所以在这里使用它是不正确的。

对于只能俯仰和偏航而不能滚动的事物，请使用不涉及“滚动”概念的实体，例如 3D 笛卡尔坐标或球坐标（不是欧拉角）。这就够了，也更正确了。在这些情况下，您不会遭受万向节锁定...为此使用四元数不仅是过度杀伤而且是错误的。

# angularjs - Angular.js：查看过渡动画

> ID：15047474
> 
> 赞同：1
> 
> 时间：2013-02-24T00:49:14.767
> 
> 标签：angularjs

我是 Angular 的新手，一直在关注他们官方网站上的基本教程，但我还没有看到任何关于动画特别是视图过渡动画的教程。例如，我想要的是让我当前的视图向右平移以显示下一个视图，然后点击后退按钮向左平移以显示上一个视图。

angular.js 是否支持开箱即用？如果是这样，那么正确或推荐的方法是什么？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:11:42.507

[Angular 1.1.4](https://github.com/angular/angular.js)于昨晚（2013 年 4 月 3 日）发布，支持 CSS 动画。尽管文档和示例仍然有些稀缺，但您会在[此视频演示](https://plus.google.com/109524702084450613375/posts/dBVBK7w2Aee)中找到很好的介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:03:03.000

Angular 不提供动画（或者根本不提供很多 DOM 操作，真的）——这些必须由第 3 方（可能是 JQuery）提供。

由于您是 Angular 的新手，我会尝试在非 Angular 应用程序中编写动画，让它们工作，然后阅读指令以将您的工作集成到您的 Angular 应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T21:10:16.853

完整教程在这里：[http ://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html](http://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html)

自 1.1.4 以来，情况发生了一些变化

# scheme - 在重复之间建立带有空格的重复字符串

> ID：15047475
> 
> 赞同：0
> 
> 时间：2013-02-24T00:49:20.467
> 
> 标签：scheme, racket

`repeat`接受一个数字和一个字符串，并返回重复`n`次数的字符串，用空格分隔。

```
;; repeat: number string -> string
(define (repeat n str)
  (replicate n str))

(repeat 2 "home") 
```

给我：

```
"homehome" 
```

我将如何添加一个空间，以便它可以给我“家”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T00:52:58.423

`str`在字符串末尾添加一个空格，然后将其传递给`replicate`：

```
(replicate n (string-append str " ")) 
```

如果你想像@Tobia建议的那样摆脱它，那最后会留下一个额外的空间：

```
(string-trim (replicate n (string-append str " "))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T09:38:34.607

Racket 有一个内置函数*string-join*为此，所以在普通的 Racket 中，这将是

```
> (string-join (build-list 2 (lambda (i) "home")))
"home home" 
```

# qt - Qt lib 捕获用户的声卡输出

> ID：15047477
> 
> 赞同：0
> 
> 时间：2013-02-24T00:49:32.727
> 
> 标签：qt, audio, capture, output

Qt 中是否有任何库来捕获用户声卡的音频输出？我想找到一种便携的方式来做到这一点（windows + mac）。
如果没有，我怎么能在 Windows 上实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:29:19.680

Windows：WASAPI 环回捕获
OS X：Sox + WavTap

# ruby-on-rails - 远程存储库和 Gemfile.lock - Rails 应用程序

> ID：15047478
> 
> 赞同：0
> 
> 时间：2013-02-24T00:50:05.010
> 
> 标签：ruby-on-rails, git

我在使用远程存储库时遇到问题。我做得`git clone <URL>`很好。问题是当我运行`bundle`. 我收到很多错误。这些错误通过 using 修复`bundle update`，因为它安装了所有的 gem，然后我可以运行一切正常。问题是我的 Gemfile.lock 文件被更改，并且它作为要提交到 git 存储库中的文件出现（它不应该这样做，因为它会弄乱远程存储库的 Gemfile.lock 文件）。现在我无法将 Gemfile .lock 推送到远程存储库，因为它会破坏一切。但奇怪的是，这个 Gemfile.lock 不包含在 .gitignore 文件中......所以有什么想法可以克服这个问题，或者有人可以向我解释到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:11:52.917

运行时`bundle`，bundler 将使用`Gemfile.lock`. `bundle update`更新`Gemfile.lock`以获取最新列出的所有 gem，`Gemfile`同时仍然满足所有依赖项。

您也可以`bundle update`在特定的 gem 上运行，这将限制`Gemfile.lock`对所述 gem 的依赖项的更改。

您需要更清楚地了解您收到了哪些错误？它们是依赖关系吗？还是您无法使用本机扩展构建 gem？或者是其他东西？您是否使用宝石组 - 如果没有，这可能有助于防止宝石碰撞。

`Gemfile.lock`承诺真的有问题吗？您是存储库的贡献者吗？

此外，`bundler`不时更新。您可能希望`bundler`在运行之前更新您的版本`bundle`。

```
gem update bundler 
```

# mysql - 如何通过 mySQL 批量更新帖子标题 wordpress

> ID：15047487
> 
> 赞同：0
> 
> 时间：2013-02-24T00:52:01.693
> 
> 标签：mysql, wordpress, phpmyadmin

我所有的帖子标题前面都有一个静态词。我的帖子标题中有超过 9000 篇已发布的帖子，其中包含两个不同的静态词。我正在尝试从我的所有帖子中删除这个词。

本质上，我正在寻找一种方法来删除那个不变的词。我尝试通过 wordpress 使用导出并以这种方式编辑帖子标题，但文件为 100mb + 并且根本无法打开。

我查看了 SQL/phpmyadmin，但我不太精通 SQL 查询，也不想弄乱我的数据库。

> “常数”始终是标题的第一个词。我该怎么做才能让 mysql 检测第一个空格并删除它之前的所有内容以及包括空格。本质上，删除第一个单词。基本上我有不止一个常数，所以如果我能找到字符串中的第一个空格然后删除它以及它之前的所有内容会更好。我假设我们会使用 sub_string 或其他东西。

这是标题结构

> 不变的其他东西在这里

因此，如果有一个搜索查询在其中找到“Constant”和一个空格并将其替换为“”nothing，那么我可以将其完全删除。如果它可以是搜索和替换查询，那就太好了，这样我以后可以使用它。

**数据库/表/列信息**

表被调用：当它的值是并且标题在列中时`wp_posts`，它需要限制为表的值`post_type``post``post_title`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:04:56.893

MySQL 并不完全符合您的要求——是的，有一个[`REPLACE()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)字符串函数，但您不能将其限制为单个替换。因此，您可能会无意中替换其他可能出现在标题字符串中的该常量。

恕我直言，最简单的方法是找到所有以常量开头的标题，然后替换第一个（即在字符串的开头）：

```
UPDATE wp_posts
SET post_title = 
MID( post_title, LENGTH('Constant ')+1 )
WHERE post_title LIKE 'Constant %'
AND post_type = 'post'; 
```

您需要，`+1`因为 MySQL 字符串偏移量从 1 开始，而不是 0。

就个人而言，我总是更喜欢先运行等效的 SELECT ，只是为了确定（MyISAM 很多年没有`BEGIN WORK`）：

```
SELECT post_title,
MID( post_title, LENGTH('Constant ')+1 ) AS replacedTitle 
FROM wp_posts
WHERE post_title LIKE 'Constant %'
AND post_type = 'post'; 
```

或者，如果您*确定*始终要删除第一个单词（即直到并包括第一个空格），则以下语句应该有效：

```
UPDATE wp_posts
SET post_title = 
MID( post_title, POSITION( ' ' IN post_title )+1 )
WHERE post_type = 'post'; 
```

由于`POSITION()`如果没有找到空格将返回零，因此该语句在一般情况下将是无操作（即非破坏性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:07:23.190

[搜索 RegEx](http://wordpress.org/extend/plugins/search-regex/)是一个很棒的插件，能够搜索和替换 - 使用 grep 或纯文本 - 通过所有帖子和页面内容、帖子标题、帖子元等。不搜索自定义帖子类型。

在进行任何更改之前备份您的数据库，无论是使用此插件还是在数据库中直接查询。

文档：[http ://urbangiraffe.com/plugins/search-regex/](http://urbangiraffe.com/plugins/search-regex/)

# ubuntu - 在 Ubuntu 12.10 上安装 xfree86

> ID：15047489
> 
> 赞同：0
> 
> 时间：2013-02-24T00:52:13.440
> 
> 标签：ubuntu, makefile, xorg, ubuntu-12.10

据我了解，他们早在 2008 年就从 xfree86 切换到 xorg，并且 xfree86 debian 软件包已被删除，因为它已过时。但是，我需要 xfree86 软件包来完成我大学的家庭作业，因为 iMake 生成的 make 文件提供给我们需要它。

我在这方面的知识很少，因为我是 Linux 的新手。有没有办法可以从其他来源安装这个包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T07:23:34.107

***工作这是一种危险的方法，在你做之前知道你在做什么，我不对你弄乱你的电脑负责（DPKG 不是用户友好的）***

> 你可能想谷歌网络档案然后你可以在 2008 年找到它（如果你幸运的话）+ 这里是一个 ubtunu 网站尝试 `http://www.ubuntuupdates.org/package/core/(code name for ubtunu release)/main/updates/(package name)`

找到 .deb 文件（如果您要确保获得正确的 archtrue）[例如。arm64] 并且 .deb 可能有不同的名称，它可能是 xfree86-dev，你知道你的 linux 风格我在 debian 但不是 ubuntu 中找到它

cd 下载或放在任何地方

然后使用命令

```
dpkg -i package-file-name 
```

用 .deb 文件替换包文件名

> 有些东西找不到，你可能会被卡住。

# c# - 使用 Html.DropdownListFor 在下拉列表中显示枚举

> ID：15047491
> 
> 赞同：0
> 
> 时间：2013-02-24T00:52:43.660
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

在我的模型文件中

```
public enum Title
{
   Ms,
   Mrs,
   Mr
} 
```

我想在注册表单的下拉框中显示这些可选值。

但我不知道怎么做。它不一定要求我使用枚举，只要这些标题可以与 一起使用`dropdownlistfor`，请您可以建议我任何方法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T00:54:32.617

你可以像这样绑定它

```
ddl.DataSource = Enum.GetNames(typeof(Title));
ddl.DataBind(); 
```

如果您还想获得选定的值，请执行以下操作

```
Title enumTitle = (Title)Enum.Parse(ddl.SelectedValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:15:21.217

有几种方法可以做到这一点。

一种是创建一个返回选择列表的方法。

```
private static SelectList ToSelectList(Type enumType, string selectedItem)
{
    var items = new List<SelectListItem>();
    foreach (var item in Enum.GetValues(enumType))
    {
        var title = ((Enum)item).GetDescription();
        var listItem = new SelectListItem
        {
            Value = ((int)item).ToString(),
            Text = title,
            Selected = selectedItem == item.ToString()
        };
        items.Add(listItem);
    }

    return new SelectList(items, "Value", "Text");
} 
```

第二种方法是创建辅助方法

```
public static MvcHtmlString EnumDropDownListFor<TModel, TEnum>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TEnum>> expression, string optionLabel, object htmlAttributes)
{
    ModelMetadata metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
    Type enumType = GetNonNullableModelType(metadata);
    IEnumerable<TEnum> values = Enum.GetValues(enumType).Cast<TEnum>();

    IEnumerable<SelectListItem> items = from value in values
                                        select new SelectListItem
                                        {
                                            Text = GetEnumDescription(value),
                                            Value = value.ToString(),
                                            Selected = value.Equals(metadata.Model)
                                        };

    // If the enum is nullable, add an 'empty' item to the collection 
    if (metadata.IsNullableValueType)
    {
        items = SingleEmptyItem.Concat(items);
    }

    return htmlHelper.DropDownListFor(expression, items, optionLabel, htmlAttributes);
}

public static string GetEnumDescription<TEnum>(TEnum value)
{
    FieldInfo fi = value.GetType().GetField(value.ToString());

    DescriptionAttribute[] attributes = (DescriptionAttribute[])fi.GetCustomAttributes(typeof(DescriptionAttribute), false);

    if ((attributes != null) && (attributes.Length > 0))
    {
        return attributes[0].Description;
    }

    return value.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T13:31:44.053

我使用了一些东西的组合。首先，这是 Enums 的扩展方法，用于从枚举类型中获取集合中的所有枚举项：

```
public static class EnumUtil
{
    public static IEnumerable<T> GetEnumValuesFor<T>()
    {
        return Enum.GetValues(typeof(T)).Cast<T>();
    }
} 
```

然后，我有一些代码可以将列表转换为列表。您可以指示您传入的哪些值已经被选中（下拉列表只有 1 个，但您也可以使用它来为 CheckBoxList 提供动力），如果需要，还可以指示要排除的值。

```
public static List<SelectListItem> GetEnumsByType<T>(bool useFriendlyName = false, List<T> exclude = null,
            List<T> eachSelected = null, bool useIntValue = true) where T : struct, IConvertible
        {
            var enumList = from enumItem in EnumUtil.GetEnumValuesFor<T>()
                           where (exclude == null || !exclude.Contains(enumItem))
                           select enumItem;

            var list = new List<SelectListItem>();

            foreach (var item in enumList)
            {
                var selItem = new SelectListItem();

                selItem.Text = (useFriendlyName) ? item.ToFriendlyString() : item.ToString();
                selItem.Value = (useIntValue) ? item.To<int>().ToString() : item.ToString();

                if (eachSelected != null && eachSelected.Contains(item))
                    selItem.Selected = true;

                list.Add(selItem);
            }

            return list;
        }

        public static List<SelectListItem> GetEnumsByType<T>(T selected, bool useFriendlyName = false, List<T> exclude = null,
            bool useIntValue = true) where T : struct, IConvertible
        {
            return GetEnumsByType<T>(
                useFriendlyName: useFriendlyName,
                exclude: exclude,
                eachSelected: new List<T> { selected },
                useIntValue: useIntValue
            );
        } 
```

然后在我的视图模型中，当我需要填充 DropdownList 时，我可以从该辅助方法中获取列表，如下所示：

```
public class AddressModel
{

     public enum OverrideCode
        {
            N,
            Y,
        }

     public List<SelectListItem> OverrideCodeChoices { get {
         return SelectListGenerator.GetEnumsByType<OverrideCode>();
     } }
} 
```

# php - 获取 SugarCRM Bean 的集合

> ID：15047494
> 
> 赞同：6
> 
> 时间：2013-02-24T00:52:45.007
> 
> 标签：php, sugarcrm

从编程上讲，有没有办法获取一个`array`或一组 SugarCRM bean 对象？

也就是说，假设我想获取一些`Bank`在其名称中包含该单词的帐户行。使用原始 SQL，我会做这样的事情

```
SELECT * 
FROM Accounts 
WHERE name LIKE '%Associates%`; 
```

有没有办法使用 SugarCRM ORM 来做类似的事情？如果不是，SugarCRM 程序员通常如何处理这种情况？我意识到我可以通过从数据库中选择一个 ID 列表来破解一些东西

```
$db         = DBManagerFactory::getInstance();        
$result     = $db->query('SELECT id FROM Accounts where name LIKE "%Banking%"');
$accounts   = array();
while($row = $db->fetchRow($result))
{            
    $accounts[] = BeanFactory::getBean('Accounts', $row['id']);
} 
```

但在大多数 ORM 中，这将被认为是低效且不好的做法。有没有更好的办法？

（完全准备好回答“不，没有办法做到这一点”。我是该平台的新手，并试图了解我的方位）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:28:20.540

而是使用

```
$bean = BeanFactory::getBean('Accounts');
$account_list = $bean->get_full_list("", "accounts.name like '%Associates%'"); 
```

因为 get_list 将为您提供您为 list_max_entries_per_page 定义的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-24T01:33:58.793

这是一个很好的资源，可以通过不同的方式使用标准 SugarBean 与 SQL：[这里](https://developer.sugarcrm.com/2012/03/23/howto-using-the-bean-instead-of-sql-all-the-time/)

对于您的示例：

```
$bean = BeanFactory::getBean('Accounts');
$account_list = $bean->get_list("", "accounts.name like '%Associates%'"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-16T12:25:41.120

这是一个老问题，但对于未来的读者来说，SugarBean 方法`get_list()`似乎`get_full_list()`已被弃用，建议改用[SugarQuery](http://support.sugarcrm.com/Documentation/Sugar_Developer/Sugar_Developer_Guide_7.5/API/Classes/SugarQuery/)。

```
$bean = BeanFactory::getBean('Accounts');
$query = new SugarQuery();
$query->from($bean, array('team_security' => false));
$query->where()->contains('name', 'Associates');
$account_list = $query->execute(); 
```

# asp.net - 我无法在 gridview 中编辑

> ID：15047503
> 
> 赞同：0
> 
> 时间：2013-02-24T00:53:26.733
> 
> 标签：asp.net, entity-framework, gridview

我正在使用 linq to entity 我添加了 gridview 但它没有编辑，当我调试时它没有访问方法 GridView5_RowUpdating() .. 这是网格视图的代码

```
<asp:GridView ID="GridView5" runat="server" AllowSorting="True" 
            AutoGenerateColumns="False" CellPadding="4" DataKeyNames="CustomerId" 
            DataSourceID="SqlDataSource3" ForeColor="#333333" GridLines="None" 
            onrowupdating="GridView5_RowUpdating">
            <AlternatingRowStyle BackColor="White" />
            <Columns>
                <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                <asp:BoundField DataField="CustomerId" HeaderText="CustomerId" 
                    InsertVisible="False" ReadOnly="True" SortExpression="CustomerId" />
                <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
                    SortExpression="FirstName" />
                <asp:BoundField DataField="LastName" HeaderText="LastName" 
                    SortExpression="LastName" />
                <asp:BoundField DataField="City" HeaderText="City" SortExpression="City" />
            </Columns>
            <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#FFCC66" ForeColor="#333333" HorizontalAlign="Center" />
            <RowStyle BackColor="#FFFBD6" ForeColor="#333333" />
            <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
            <SortedAscendingCellStyle BackColor="#FDF5AC" />
            <SortedAscendingHeaderStyle BackColor="#4D0000" />
            <SortedDescendingCellStyle BackColor="#FCF6C0" />
            <SortedDescendingHeaderStyle BackColor="#820000" />
        </asp:GridView> 
```

当我删除必填字段验证器时尝试手动插入时，我有必填字段验证器有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:56:12.413

首先你需要在gridview上实现[RowEditing](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx)事件来启用编辑，MSDN定义：

> 在单击行的“编辑”按钮时发生，但在 GridView 控件进入编辑模式之前。

**ASPX：**

```
<asp:GridView 
        ID="gvCustomers" 
        runat="server" 
        OnRowEditing="gvCustomers_RowEditing"> 
```

**后面的代码：**

```
protected void gvCustomers_RowEditing(object sender, GridViewEditEventArgs e)
{
    gvCustomers.EditIndex = e.NewEditIndex;
    //Re bind the grid view
} 
```

**现在，如果当您单击网格视图上的编辑**链接时没有触发此事件，则意味着页面上有一些验证逻辑阻止了回发。

摆脱这个问题的最好方法是设置`ValidationGroup`属性，因为验证控件会引起麻烦（不是gridview）：

```
<div id="insertEmployee">
        <asp:TextBox ID="txtName" runat="server" ValidationGroup="Insert" />
        <asp:RequiredFieldValidator ID="rfvName" runat="server" ControlToValidate="txtName" ErrorMessage="Name is required" ValidationGroup="Insert" />
        <asp:Button ID="btnAdd" runat="server" Text="Add" ValidationGroup="Insert" />
    </div> 
```

# python - Which is the fastest embedded noSQL database for Python?

> ID：15047507
> 
> 赞同：3
> 
> 时间：2013-02-24T00:53:45.923
> 
> 标签：python, nosql

I need a noSQL solution that is fast, small, embedded (because I don't have root privilege) and supports Python. For now I just have two names: DyBASE, CodernityDB. Please help me find others and choose the best one. Thank you!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:21:19.627

ZODB - 我猜它并不“小” - 但它很快，它是 Python 原生的 - 而且它当然可以在没有 root 权限的情况下使用`buildout`或者甚至只使用 virtualenv 安装 -

这是一篇博客文章，展示了 ZODB 与 sqlite 的比较——（而 sqlite 反过来，对于单线程代码，在更大的 SQL 数据库系统中表现得相当好——只需寻找基准）：

[http://pyinsci.blogspot.com.br/2007/09/zodb-vs-relational-database-simple.html](http://pyinsci.blogspot.com.br/2007/09/zodb-vs-relational-database-simple.html)

这是教程的链接 - 为了能够像教程中一样安装它，无需系统上的管理员权限，首先创建一个 virtualenv 并激活它：

[http://www.zodb.org/en/latest/documentation/tutorial.html](http://www.zodb.org/en/latest/documentation/tutorial.html)

这是 ZODB 的链接和安装说明： [https ://pypi.python.org/pypi/ZODB3/3.8.2](https://pypi.python.org/pypi/ZODB3/3.8.2)

# java - LinkedList - loop not working - Java

> ID：15047515
> 
> 赞同：1
> 
> 时间：2013-02-24T00:54:50.763
> 
> 标签：java, linked-list, counter, extend

I am required to write a method that returns a number - the amount of times an element is found in a linked list. So far I have;

```
package Question4;

import net.datastructures.Node;

public class SLinkedListExtended<E> extends SLinkedList<E> {
    // returns the number of occurrences of the given element in the list
    public int count(E elem) {

        Node<E> cursor = tail;
    int counter = 0;

    if ((cursor != null) && (!(cursor.getElement().equals(elem)))) { //tail isnt null and element is not equal to elem 

        cursor = cursor.getNext(); //go to next node

    } else if ((cursor != null) && (cursor.getElement().equals(elem))){ //cursor isn't null and element equals elem

        counter++; //increment counter
    }
    else { 
        return counter; //return counter 
    }
    return counter;
}

public static void main(String[] args) {

    SLinkedListExtended<String> x = new SLinkedListExtended<String>();

    x.insertAtTail("abc");
    x.insertAtTail("def");
    x.insertAtTail("def");
    x.insertAtTail("xyz");
    System.out.println(x.count("def")); // should print "2"
    x.insertAtTail(null);
    x.insertAtTail("def");
    x.insertAtTail(null);
    System.out.println(x.count("def")); // should print "3"
    System.out.println(x.count(null)); // should print "2"
}
} 
```

I have extended to a class which compiles correctly, so I know the problem is in my method. I can't figure out what to do, my code returns 0, which is probably the counter integer remaining at 0 and not going through the loop statement. Any ideas are appreciated.

**Edit. SLinkedList code:**

```
import net.datastructures.Node;

public class SLinkedList<E> {
protected Node<E> head; // head node of the list
protected Node<E> tail; // tail node of the list (if needed)
protected long size; // number of nodes in the list (if needed)

// default constructor that creates an empty list
public SLinkedList() {
    head = null;
    tail = null;
    size = 0;
}

// update and search methods
public void insertAtHead(E element) {
    head = new Node<E>(element, head);
    size++;
    if (size == 1) {
        tail = head;
    }
}

public void insertAtTail(E element) {
    Node<E> newNode = new Node<E>(element, null);
    if (head != null) {
        tail.setNext(newNode);
    } else {
        head = newNode;
    }
    tail = newNode;
    size++;
}

public static void main(String[] args) { // test
    SLinkedList<String> list = new SLinkedList<String>();

    list.insertAtHead("lol");

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:04:22.890

One of the fundamental things that you were missing was a loop. Since you are essentially searching for something, you want to loop through the entire list. Once you run into an element that matches the one that you are searching for, you want to increment the count by 1\. Once you have finished looping through the entire list, you want to return that count. So this is my solution. I keep it simple so you could understand:

```
import java.util.LinkedList;

public class Duplicates<E> extends LinkedList<E> {

    public static void main(String[] args) {
        Duplicates<String> duplicates = new Duplicates<String>();
        duplicates.add("abc");
        duplicates.add("def");
        duplicates.add("def");
        duplicates.add("xyz");
        System.out.println(duplicates.duplicateCount("def"));
        duplicates.add(null);
        duplicates.add("def");
        duplicates.add(null);
        System.out.println(duplicates.duplicateCount("def"));
        System.out.println(duplicates.duplicateCount(null));
    }

    public int duplicateCount(E element) {
        int count = 0;
        for (E e : this) {
            if (e == element) {
                count++;
            }
        }
        return count;
    }
} 
```

Output:

```
2
3
2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:58:20.930

The code in `count` is not in a loop, so it'll just return after the first element.

Try this:

```
public int count(E elem) {
    Node<E> cursor = tail;
    int counter = 0;
    while (true)
    {
        if ((cursor != null) && (!(cursor.getElement().equals(elem)))) { //tail isnt null and element is not equal to elem 
            cursor = cursor.getNext(); //go to next node
        } else if ((cursor != null) && (cursor.getElement().equals(elem))){ //cursor isn't null and element equals elem
            counter++; //increment counter
        }
        else { 
            return counter; //return counter 
        }
    }
} 
```

Also, note that `cursor.getElement().equals(elem)` will return a `NullPointerException` when `cursor.getElement()` is `null`. The easiest way to deal with this is probably to write a separate equals method:

```
boolean equals(E e1, E e2)
{
  if (e1 == null)
    return e2 == null;
  if (e2 == null)
    return false;
  return e1.equals(e2);
} 
```

Also, presumably `Node<E> cursor = tail;` makes it point to the end of the list and presumably you want `Node<E> cursor = head;` instead.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:00:07.040

也许您应该使用 while 循环而不是 if 子句

```
**while** ((cursor != null) && (!(cursor.getElement().equals(elem)))) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T22:48:58.953

我建议你将 Martin 的答案（告诉你如何计算元素）与这个结合起来，告诉你如何使用 foreach - 你只需要制作你的`SLinkedListExtended`工具`Iterable`，这应该是下面的东西（你可以这样做on `SLinkedList`，但我假设您被告知不要更改该代码）：

```
public class SLinkedListExtended<E> extends SLinkedList<E> implements Iterable<E> () {

    public Iterator<E> iterator() {
        final Node<E> itHead = head;
        return new Iterator<E>() {

            Node<E> current = itHead;
            long position = 0;

            public boolean hasNext() {
                return current != null && position < size;
            }

            public E next() {
                current = current.getNext();
                ++position;
                return current.getElement();
            }

            public void remove() {
                throw new UnsupportedOperationException("Not supported yet.");
            }

        };
    }

}; 
```

我不能保证所有细节，但这应该涵盖大部分。您也可以考虑使用`equals`而不是`==`，但不要忘记检查元素是否为空。

`next`应该只调用 if `hasNext`is `true`，所以如果它抛出异常不是问题（但它应该是 a`NoSuchElementException`以符合合同）。

实现`Iterable`使您的类与 Collections 库兼容，因此支持 foreach，但您可以通过调用`iterator`,`hasNext`和您`next`自己来使用它进行原始迭代。

# php - 在php中使用DIRECTORY_SEPARATOR而不是“/”有什么意义

> ID：15047516
> 
> 赞同：1
> 
> 时间：2013-02-24T00:55:28.943
> 
> 标签：php, directory, separator

为什么我会选择使用`. DIRECTORY_SEPARATOR .`而不是`. "/" .`？

我最初的想法是可能有一个不同的分隔符而不是斜杠，但是如果我正在设计一个 Wordpress 插件，我不能假设总是有一个 / 分隔两个文件夹吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-24T00:56:27.310

如果应用程序要在各种操作系统上运行，那么目录不会总是正斜杠。例如，它是 Windows 上的反斜杠。

类似的情况是新行。它`\n`在 *nix、`\r\n`Windows 等上。这就是为什么有`PHP_EOL`.

# javascript - Mongoose 上的模式类型数组

> ID：15047520
> 
> 赞同：4
> 
> 时间：2013-02-24T00:55:53.033
> 
> 标签：javascript, mongodb, mongoose

我有一个架构：

```
var s = new Schema({
  links: {
    type: [Url]
  }
}); 
```

在这种情况下，我使用来自[https://github.com/bnoguchi/mongoose-types](https://github.com/bnoguchi/mongoose-types)的 url 模式类型- 但我已经尝试过使用其他类型。Mongoose 在数组中似乎没有验证/使用模式类型 - 没有数组也可以正常工作。

如何定义将验证的模式类型数组？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-04T18:47:38.637

Mongoose创作者的回答：

“除非 Url 是子文档，否则当前不会触发验证（在某处有一张票可以支持更丰富的类型）。解决方法是在数组上定义验证：[https ://gist.github.com/aheckmann /12f9ad103e0378db6afc](https://gist.github.com/aheckmann/12f9ad103e0378db6afc) "

我最终创建了子文档，因为 Mongoose 支持以数组形式对它们进行验证。

```
var links = new Schema({
  link: URL
});

var s = new Schema({
  links: {
   type: [links]
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:01:43.513

尝试`var s = new Schema({links: [Url]});`

# oop - How would I combine 'Command' and 'Composite' to simulate a time delay?

> ID：15047521
> 
> 赞同：3
> 
> 时间：2013-02-24T00:55:57.460
> 
> 标签：oop, design-patterns, logic, simulation

As a learning exercise (I am not in school - just an old guy trying to learn something new), I am trying to write a logic gate simulation that incorporates propagation delay. The user should also be able to group gates together to create higher-level objects.

I want to apply design patterns to my problem, but I am having a hard time.

I am reading *[Head First Design Patterns](http://www.headfirstlabs.com/books/hfdp/)*, and I see that the Command pattern is a good way to simulate electrical pulses through a circuit with a delay. I also see that the Composite pattern is a good way to simulate nested units. I just don't know how to mix the two.

In other words, as I loop through my gates, I see that gate 'x' should fire. It has a 15 nanosecond delay, so I create a command with a time stamp of 15 ns from current game time. Where is the dispatcher? In the example of the diner, with the command being the 'Order', the waitress and the cook each dispatch the command and have the option of introducing a delay. If I have a 'composite' gate, does it also have its own dispatcher? Do I need to use a Singleton to manage the queue?

I read what I could find, but I still need a push in the right direction:

*   [Using Command Design pattern](https://stackoverflow.com/questions/2015549/using-command-design-pattern)
*   [Client Server Command Design pattern with variable delays](https://stackoverflow.com/questions/12016314/client-server-command-design-pattern-with-variable-delays)
*   [Composite of Commands Design Pattern](https://stackoverflow.com/questions/10560892/composite-of-commands-design-pattern)
*   [How can I calculate propagation delay through series of combinational circuits using Verilog and FPGA?](https://stackoverflow.com/questions/8874705/how-can-i-calculate-propagation-delay-through-series-of-combinational-circuits-u)

# c# - 使用 win32Com（当前上下文中不存在）

> ID：15047526
> 
> 赞同：0
> 
> 时间：2013-02-24T00:56:42.170
> 
> 标签：c#, dllimport, createfile, kernel32

我正在尝试使用 Win32 API 编写我自己的小型库以连接到串行端口。不幸的是，我找到的所有[示例代码](http://msdn.microsoft.com/en-us/magazine/cc301786.aspx)都使用 kernel32.dll（我可以这样做），但 createFile 命令使用前缀 win32Com，我假设它是我需要使用的某个命名空间的一部分。不幸的是，我无法弄清楚，作为一个菜鸟，我不知道如何找出这是我需要包含的参考，还是其他什么。

谁能指出一些解释如何执行此操作的示例代码？或者告诉我哪里出错了？我将包括我的“使用”部分和 DllImport 以及我试图在下面创建文件的位置。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.IO.Ports;
using System.Runtime.InteropServices;
using System.Text;
using System.Windows.Forms; 
```

这里还有一些代码，初始化表单等。

```
[DllImport("kernel32.dll", SetLastError = true)]
        internal static extern IntPtr CreateFile(String lpFileName,
           UInt32 dwDesiredAccess, UInt32 dwShareMode,
           IntPtr lpSecurityAttributes, UInt32 dwCreationDisposition,
           UInt32 dwFlagsAndAttributes, IntPtr hTemplateFile); 
```

但是当我使用以下内容时，我得到了错误：`The name 'Win32Com' does not exist in the current context.`

```
 hPort = Win32Com.CreateFile(cs.port,
               Win32Com.GENERIC_READ | Win32Com.GENERIC_WRITE, 0, IntPtr.Zero,
               Win32Com.OPEN_EXISTING, Win32Com.FILE_FLAG_OVERLAPPED,
               IntPtr.Zero); 
```

我确定这是我犯的一个简单错误，但不幸的是，我目前还没有技能来找出它在哪里。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:06:22.793

您的链接显示：“Win32Com 是一个帮助类，用作我将通过 P/Invoke 使用的 API 函数、结构和常量的静态定义的容器。” 所以你需要创建它并在`CreateFile`那里放置以下声明。您还应该阅读[P/Invoke](http://msdn.microsoft.com/en-us/library/26thfadc.aspx)以了解其工作原理。

# c# - 通过 JavaScript 在 ASP.NET/C# 循环中快速、成功的新窗口

> ID：15047527
> 
> 赞同：2
> 
> 时间：2013-02-24T00:56:53.530
> 
> 标签：c#, javascript, asp.net, popup

我正在尝试通过这样的注册启动脚本打开 1-6 个潜在的有效弹出窗口（实际上它是有效集合中的 foreach 项）：

```
While (int i < 6)
{
  ScriptManager.RegisterStartupScript(this.Page, typeof(System.Web.UI.Page), "OpenWin", "<script type='text/javascript'>openNewWin    ('" + url + "')</script>", false);
i++;
} 
```

标记如下：

```
 <head>
   <script language="javascript" type="text/javascript">
        function openNewWin(url) 
        {
            var x = window.open(url, 'mynewwin', 'width=620,height=250,toolbar=1');
            x.focus();
        }
   </script>
 </head> 
```

但是我只看到一个窗口打开，当我单步执行时，代码似乎成功执行，什么给出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:06:16.660

在您的`window.open`通话中，您使用的是相同的姓名 ( `mynewwin`)。因此，每次后续调用都会`open`将 URL 加载到具有该名称的第一个窗口中。您可以使用`_blank`，它会在新窗口中打开每个：

```
var x = window.open(url, '_blank', 'width=620,height=250,toolbar=1'); 
```

话虽如此，我同意很难想象这不是糟糕的用户体验。

# windows-8 - How to read a shortcut file (and get its target) in a Windows RT metro app?

> ID：15047530
> 
> 赞同：0
> 
> 时间：2013-02-24T00:57:22.150
> 
> 标签：windows-8, microsoft-metro

1.  I have accessed normal files and folders, but unable to read the target value from a shortcut file. Any idea how to read a shortcut file in WinRT?

2.  My actual requirement is to find the most recently used/opened files in the system This info was previously available through Environment.GetFolderPath(Environment.SpecialFolder.Recent)

Thank you in advance :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:55:00.253

在 Win8 上有一个文件 AppData\Local\recently-used.xbel 包含此信息。解析它应该很容易，但问题可能是访问该文件，因为它不在可以通过任何清单声明访问的文件夹中。AppData 文件夹也被隐藏，使其无法通过 FileOpenPicker 访问。

我的猜测是，这是微软有意做出的改变，因为它与沙盒应用程序无关，其他应用程序使用了这些文件。如果您想打开您的应用程序最近打开的文件，您可以推出自己的“最近更改”实现。这应该很容易，因为无论如何您都必须将他们的令牌保存到 FutureAccessList。

# php - How can I send a DOM object as a JSON object

> ID：15047532
> 
> 赞同：1
> 
> 时间：2013-02-24T00:57:40.993
> 
> 标签：php, javascript, json, dom, stringify

I would like to POST an entire row of a table to a php page (it's part of an Ajax request). If I use `JSON.stringify(rowObject)` I get an error. I think this is because the object is "cyclical". I really would like to send the row though, because it has ALL the right data, as opposed to posting each variable individually. Is there a simple solutions that doesn't need jquery, or at least doesn't involve messily looping through the object and rebuilding it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:29:07.807

[JSONML](http://www.jsonml.org)提供了一个很好的标记表示作为 JSON 数据。它还[提供](http://www.jsonml.org/dom/)了为您转换 DOM 的代码。

鉴于此 DOM：

```
<table>
    <thead>
        <tr><th>one</th><th>two</th><th>three</th></tr>
    </thead>
    <tbody id="myTbody">
        <tr><td><input value="one"/></td><td><span>two</span></td><td>three</td></tr>
    </tbody>
</table> 
```

此代码将其转换为原生 JavaScript 对象，然后再转换为 JSON：

```
var result = JsonML.fromHTML(document.querySelector("table"));
var strResult = JSON.stringify(result, null, 4); 
```

并产生这个结果：

[http://jsfiddle.net/bF3LK/](http://jsfiddle.net/bF3LK/)

```
[
    "TABLE",
    "\n    ",
    [
        "THEAD",
        "\n        ",
        [
            "TR",
            [
                "TH",
                "one"
            ],
            [
                "TH",
                "two"
            ],
            [
                "TH",
                "three"
            ]
        ],
        "\n    "
    ],
    "\n    ",
    [
        "TBODY",
        {
            "id": "myTbody"
        },
        "\n        ",
        [
            "TR",
            [
                "TD",
                [
                    "INPUT",
                    {
                        "value": "one"
                    }
                ]
            ],
            [
                "TD",
                [
                    "SPAN",
                    "two"
                ]
            ],
            [
                "TD",
                "three"
            ]
        ],
        "\n    "
    ],
    "\n"
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T02:11:52.200

鉴于您要获取的行具有 id **rowID**以下应该按照您的要求进行

```
JSON.stringify(
    (function(o) {
        var arr=[];
        for(var x=0;x<o.length;x+=1) arr.push(o[x].innerText);
        return arr;
     }) (document.getElementById("rowID").getElementsByTagName("td"))); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T01:32:22.080

我建议迭代 DOM 对象中的元素并动态构建对象。然后你可以安全地 JSON.stringify() 。最好有更多关于 DOM 对象的信息和您想要的 JSON 输出来确定完成此任务的最佳方法。

缺少这些信息，这里有一些建议。

假设 rowObject 是一个 DOM 对象，可能使用 document.getElementById() 或其他一些 DOM 方法获得，您可以访问几个返回字符串值的有用属性。

rowObject.textContent 将为您提供 DOM 对象的纯文本版本，省略 HTML 标记但保留空格。

rowObject.innerText 类似，但应排除不可见的任何内容。

rowObject.innerHTML 将提取内部 HTML 并输出 HTML 标签及其内容。

我知道这与转换为真正的 JSON 不同。同样，最好动态构建一个对象，然后将其传递给 JSON.stringify()。

有关这些属性的更多信息，请参阅：[MDN 上的 Node.textContent](https://developer.mozilla.org/en-US/docs/DOM/Node.textContent)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-12T10:40:54.413

HTML：

```
<table id="table1">
<tr>
    <td>row 0 cell 0</td>
    <td>row 0 cell 1</td>
    <td>row 0 cell 2</td>
</tr>
<tr>
    <td>row 1 cell 0</td>
    <td>row 1 cell 1</td>
    <td>row 1 cell 2</td>
</tr>
</table> 
```

JS：

```
var data = [].map.call(table1.rows, function(row){
    return [].map.call(row.cells, function(cell){
        return cell.textContent; 
    });
});
console.log(data); 
```

你会得到这样的数据 json：

```
[
    [
        "row 0 cell 0",
        "row 0 cell 1",
        "row 0 cell 2"
    ],
    [
        "row 1 cell 0",
        "row 1 cell 1",
        "row 1 cell 2"
    ]
] 
```

# scala - scala、play、futures：组合多个futures的结果

> ID：15047533
> 
> 赞同：11
> 
> 时间：2013-02-24T00:57:48.703
> 
> 标签：scala, asynchronous, playframework, future, playframework-2.1

我在用：

*   斯卡拉 2.10
*   玩 2.1

目前，我正在使用`Future`来自 的类`scala.concurrent._`，但我愿意尝试另一个 API。

我无法将多个期货的结果组合成一个列表 [（字符串，字符串）]。

以下`Controller`方法成功地将单个 Future 的结果返回到 HTML 模板：

```
 def test = Action { implicit request =>
    queryForm.bindFromRequest.fold(
      formWithErrors => Ok("Error!"),
      query => {
        Async { 
          getSearchResponse(query, 0).map { response =>
            Ok(views.html.form(queryForm,
              getAuthors(response.body, List[(String, String)]())))
          }
        }
      })
  } 
```

*该方法`getSearchResult(String, Int)`执行 Web 服务 API 调用并返回 Future[play.api.libs.ws.Response]。该方法`getAuthors(String, List[(String, String)])`返回一个 List[(String, String)] 到 HTML 模板。*

现在，我正在尝试循环调用`getSearchResult(String, Int)`以`for`获取多个响应主体。以下内容应该可以让我了解我正在尝试做的事情，但我得到一个编译时错误：

```
 def test = Action { implicit request =>
    queryForm.bindFromRequest.fold(
      formWithErrors => Ok("Error!"),
      query => {
        Async {
          val authors = for (i <- 0 to 100; if i % 10 == 0) yield {
            getSearchResponse(query, i)
          }.map { response =>
            getAuthors(response.body, List[(String, String)]())
          }

          Ok(views.html.form(queryForm, authors))
        }
      })
  } 
```

*类型不匹配; 找到：scala.collection.immutable.IndexedSeq[scala.concurrent.Future[List[(String, String)]]] 需要：List[(String, String)]*

**如何将多个`Future`对象的响应映射到单个对象`Result`？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T01:07:58.263

创建由 List 或 Result 类型的其他 Collection 参数化的 Future。

从[这里](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/AF_NH2HfHgg)：

在 Play 1 中，您可以这样做：

```
 F.Promise<List<WS.HttpResponse>> promises = F.Promise.waitAll(remoteCall1, remoteCall2, remoteCall3);

    // where remoteCall1..3 are promises

    List<WS.HttpResponse> httpResponses = await(promises); // request gets suspended here 
```

在 Play 2 中不那么直接：

```
 val httpResponses = for {
  result1 <- remoteCall1
  result2 <-  remoteCall2
} yield List(result1, result2) 
```

# terminal - Mac OSX .zshrc $PATH 变量忽略本地命令

> ID：15047535
> 
> 赞同：0
> 
> 时间：2013-02-24T00:58:08.523
> 
> 标签：terminal, zsh, tidy, htmltidy

我在 MacOSX Mountain Lion 10.8.2 上，使用 OhMyZsh 并且出于某种奇怪的原因，我无法运行应该在我的本地目录中触发脚本的命令。如果我通过终端导航到包含“tidy”（[http://w3c.github.com/tidy-html5/](http://w3c.github.com/tidy-html5/)）的文件夹，则在尝试运行它时会出现错误：

`➜ tidy test.html test.min.html zsh: command not found: tidy`

我的 $PATH 变量在 .zshrc 中看起来很奇怪（我是 zsh 的新手，我一直使用 bash）：

`export PATH=$PATH:/usr/local/bin:/usr/local/sbin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/X11/bin:/Users/Keith/.rvm/bin`

有谁知道我可以做些什么来修改我的路径以首先检查本地工作目录？

万分感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T12:30:41.677

当前工作目录`.`似乎不在您的`$PATH`. 您可以`export`按照以下方式进行操作`bash`：

```
export PATH=.:$PATH 
```

这将`.`在其余部分之前添加`$PATH`。您需要`source ~/.zshrc`打开或重新打开终端窗口以应用更改。您可以检查是否`.`在`$PATH`：

```
echo $PATH 
```

# c++ - error when checking if string in array is null

> ID：15047536
> 
> 赞同：0
> 
> 时间：2013-02-24T00:58:08.567
> 
> 标签：c++, string, pointers, struct, hashtable

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:14:50.203

~~编译器说的结果`del.compare`不能与 0 比较~~

~~你还没有展示任何东西`del.compare`，所以不能说更多~~

目前缺乏`FIRST`……的声明

* * *

一段时间后 -`FIRST`现在显示为`string`，大概是`std::string`。

您不能将 a`std::string`与 0 或 a 进行比较`nullptr`。

但是例如，您可以将其`length()`与 0 进行比较。

# java - ArrayIntList(java)

> ID：15047537
> 
> 赞同：0
> 
> 时间：2013-02-24T00:58:15.093
> 
> 标签：java

> Write a method isPairwiseSorted that returns whether or not a list of integers is pairwise sorted (true if it is, false otherwise). A list is considered pairwise sorted if each successive pair of numbers is in sorted (non-decreasing) order.

I wrote the following method but it always return true. Need some help here please.

```
public boolean isPairwiseSorted() {
    boolean isFalse=false;
    for(int i = 0; i < size; i+=2){
        if( elementData[i] < elementData[i+1] || size == 0 || size == 1){
            return true;
        }
    }
    return isFalse;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:01:40.637

```
if (size == 0 || size == 1)
   return true;

for (int i = 0; i < size - 1; i += 2)
{
   if (elementData[i] > elementData[i+1])
      return false;
}

return true; 
```

# c++ - 文件中的字符不正确

> ID：15047540
> 
> 赞同：0
> 
> 时间：2013-02-24T00:58:34.667
> 
> 标签：c++, text-files, iostream, fstream, cout

我有以下 .txt 文件：

测试.txt

```
1,2,5,6 
```

传入我通过命令行制作的一个小型 C++ 程序，如下所示：

```
./test test.txt 
```

来源如下：

```
#include <iostream>
#include <fstream>

using namespace std;

int main(int argc, char **argv)
{
    int temp =0;
    ifstream file;
    file.open(argv[1]);

    while(!file.eof())
    {
        temp=file.get();
            file.ignore(1,',');
        cout<<temp<<' ';
    }
    return 0;
} 
```

出于某种原因，我的输出不是`1 2 5 6`but `49 50 53 54`。是什么赋予了？

更新：

另外，我注意到还有另一种实现`get()`。如果我定义了`char temp`，那么我可以这样做`file.get(temp)`，这也将节省我转换 ASCII 表示的时间。但是我喜欢使用`while (file >> temp)`，所以我会继续使用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:05:58.627

`temp` is an int. So you see the encoded ascii values after casting the char to an int.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:05:45.777

49 is the ascii code for digit 49-48 = 1.

`get()` gives you a character (character code).

by the way, `eof()` only *becomes* true after a failed read attempt, so the code you show,

```
while(!file.eof())
{
    temp=file.get();
        file.ignore(1,',');
    cout<<temp<<' ';
} 
```

will possibly display one extraneous character at the end.

the conventional loop is

```
while( file >> temp )
{
     cout << temp << ' ';
} 
```

where the expression `file >> temp` reads in one number and produces a reference to `file`, and where that `file` objected is converted to `bool` as if you had written

```
while( !(file >> temp).fail() ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:15:36.293

作为记录，尽管这是第 n 个重复，以下是此代码在惯用 C++ 中的外观：

```
for (std::string line; std::getline(file, line); )
{
    std::istringstream iss(line);

    std::cout << "We read:";

    for (std::string n; std::getline(iss, line, ','); )
    {
        std::cout << " " << n;

        // now use e.g. std::stoi(n)
    }

    std::cout << "\n";
} 
```

如果您不关心行或只有一行，则可以跳过外循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T01:12:17.237

这不会像您认为的那样做：

```
while(!file.eof()) 
```

这在[为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/q/5605125/78845)，所以我不会在这个答案中介绍它。

尝试：

```
char c;
while (file >> c)
{
    // [...]
} 
```

...反而。读入 a`char`而不是 an`int`也可以让您不必转换[ascii](/questions/tagged/ascii "显示标记为“ascii”的问题")表示形式（ASCII 值 49 是`1`，*等等...*）。

# c++ - 计算结构中的数组实例

> ID：15047541
> 
> 赞同：0
> 
> 时间：2013-02-24T00:59:10.360
> 
> 标签：c++

我有一个结构数据类型。它包含一个也是结构的数据成员。

```
struct List{
    private:
        struct Line listLine[MAX_LINES];
    public:
        void set(int no);
        void display() const;
}; 
```

`listLine`是 Line 类型，定义为：

```
struct Line {
    private:
        int num;
        char itemString[MAX_CHARS + 1];
    public:
        bool set(int n, const char* str);
        void display() const;
}; 
```

主文件

```
int main() {

    int no;
    List list;

    cout << "List Processor\n==============" << endl;
    cout << "Enter number of items : ";
    cin >> no;

    list.set(no);
    list.display();
} 
```

行::显示

```
void Line::display() const {

    cout << this->num << ' ' << this->itemString << endl;

} 
```

list.display（调用line.display，line.display打印一行的一个实例，如果我调用3次，会输出3种不同类型的数据，每一种对应一个索引`listLine`）

```
void List::display() const {

    for (int i = 0; i < 10; i++) {
        this->listLine[i].display();
    }

} 
```

假设我`listLine`这样填充：

```
listLine[0].num = 1
listLine[0].itemString = ABC
listLine[1].num = 2
listLine[1].itemString = ZXC
listLine[2].num = 3
listLine[2].itemString = QWE 
```

我知道上面不是正确的 C++ 语法，我只是想说明这个概念，显示里面有什么数据`listLine`。

到目前为止，我已经能够打印 listLine 的内容，如下所示：

```
for (int i = 0; i < 10; i++) {
    this->listLine[i].display();
} 
```

以上的输出

```
// reading values in
List Processor
==============
Enter number of items : 3
Enter line number : 1
Enter line string : ABC
Accepted
Enter line number : 2
Enter line string : ZXC
Accepted
Enter line number : 3
Enter line string : QWE
Accepted

// printing those values with the loop i posted
1 ABC
2 ZXC
3 QWE
1 
134514883 
-1217566436 Jm·Z·Èí¬¿-
134515757 
134514257 
134515633 0
-1218833660 ôZ·F· 
```

请注意唯一有效的数据是`1 ABC`, `2 ZXC`，然后`3 QWE`它只是打印乱码？

我只想显示有效数据，但 List 的 display() 函数没有参数，那么我应该如何知道哪些数据`listLine`是有效的？

我只想打印有效行，在上面的示例中，即三行，其他 7 行是废话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:01:40.800

嗯，问题有点变了。

但我对下面原始问题的回答足以暗示我认为（对于练习/家庭作业问题）

* * *

显然，赋值要求使用以空字符结尾的字符串

也就是说，当您完成这些作业后，使用`std::string`(或`std::wstring`) 来存储字符串

# php - 我无法使用 mySQL 查询通过 php 发布数据，可以帮忙吗？

> ID：15047542
> 
> 赞同：0
> 
> 时间：2013-02-24T00:59:42.140
> 
> 标签：php, sql, forms, textarea

目前我遇到了一个问题，不允许我将网站上的表单中的内容插入到我的数据库中。该表单以前可以使用，但是自从添加了 tinyMCE 编辑器后，当我点击提交按钮时，它会引发以下错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'category='sdcnd j sdjcj', type='sdck sjdc' ,text=' 附近使用正确的语法

cdscjdnjc ' 在第 1 行（乱码输入仅用于测试目的）

似乎在这里插入几个字段时遇到问题，但我找不到任何东西，有人能指出是什么原因导致这个问题和可能的解决方案吗？

请参阅下面的 insertRecord.php 文件：

```
<?php

session_start();

if (! isset($_SESSION['user'])) {
   header("Location: admin_login.php");
}

function valid($id, $url, $heading, $friendlyUrl, $category, $type, $text, $age, $imageName, $location, $error)
{
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Insert Records</title>
<script type="text/javascript" src="/tinymce/jscripts/tiny_mce/tiny_mce.js"></script>

<script type="text/javascript">
tinyMCE.init({
    mode : "textareas"
});
</script>
</head>
<body>
<?php

if ($error != '')
{
echo '<div style="padding:4px; border:1px solid red; color:red;">'.$error.'</div>';
}
?>

<form action="" method="post">
<table border="1">
<tr>
<td colspan="2"><b><font color='Red'>Insert Records </font></b></td>
</tr>
<tr>
<td width="179"><b><font color='#663300'>URL<em>*</em></font></b></td>
<td><label>
<input type="text" name="url" value="<?php echo $url; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Heading<em>*</em></font></b></td>
<td><label>
<input type="text" name="heading" value="<?php echo $heading; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Friendly URL<em>*</em></font></b></td>
<td><label>
<input type="text" name="friendlyUrl" value="<?php echo $friendlyUrl; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Category<em>*</em></font></b></td>
<td><label>
<input type="text" name="category" value="<?php echo $category; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Type<em>*</em></font></b></td>
<td><label>
<input type="text" name="type" value="<?php echo $type; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Text<em>*</em></font></b></td>
<td><label>
<textarea name="text" value="<?php echo $text; ?>" ></textarea>
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Age<em>*</em></font></b></td>
<td><label>
<input type="text" name="age" value="<?php echo $age; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Image Name<em>*</em></font></b></td>
<td><label>
<input type="text" name="imageName" value="<?php echo $imageName; ?>" />
</label></td>
</tr>

<tr>
<td width="179"><b><font color='#663300'>Location<em>*</em></font></b></td>
<td><label>
<input type="text" name="location" value="<?php echo $location; ?>" />
</label></td>
</tr>

<tr align="Right">
<td colspan="2"><label>
<input type="submit" name="submit" value="Insert Records">
</label></td>
</tr>
</table>
</form>
</body>
</html>
<?php
}

include('config.php');

if (isset($_POST['submit']))
{

$id = $_POST['id'];  
$url = mysql_real_escape_string(htmlspecialchars($_POST['url']));
$heading = mysql_real_escape_string(htmlspecialchars($_POST['heading']));
$friendlyUrl = mysql_real_escape_string(htmlspecialchars($_POST['friendlyUrl']));
$category = mysql_real_escape_string(htmlspecialchars($_POST['category']));
$type = mysql_real_escape_string(htmlspecialchars($_POST['type']));
$text = mysql_real_escape_string(htmlspecialchars($_POST['text']));
$age = mysql_real_escape_string(htmlspecialchars($_POST['age']));
$imageName = mysql_real_escape_string(htmlspecialchars($_POST['imageName']));
$location = mysql_real_escape_string(htmlspecialchars($_POST['location']));

if ($url == '' || $heading == '' || $friendlyUrl == '' || $category == '' || $type == '' || $text == '' || $age == '' || $imageName == '' || $location == '')
{

$error = 'Please enter the details!';

valid($id, $url, $heading, $friendlyUrl, $category, $type, $text, $age, $imageName, $location, $error);
}
else
{

mysql_query("INSERT podContent SET url='$url', heading='$heading' ,friendlyUrl='$friendlyUrl' category='$category', type='$type' ,text='$text' age='$age', imageName='$imageName' ,location='$location'")
or die(mysql_error());

 header("Location: view.php");
}
}
else
{
valid('','','','');
}
?> 
```

任何贡献表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:05:42.500

Missing a comma:

`friendlyUrl='$friendlyUrl', category='$category'` and

`text='$text', age='$age'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:07:51.807

Your insert statement is incorrect. It should look like:

```
insert into <tablename>
(field1, field2, field3)
values 
(1, 'string ', 'string') 
```

Your insert is done like an update statement

```
update <tablename> 
set
field2 = 'string',
field3 = 'string'
where field1 = 1 
```

# javascript - 在 angularjs 中，为什么 ng-click 元素也会触发元素属性中的其他方法调用？

> ID：15047544
> 
> 赞同：1
> 
> 时间：2013-02-24T01:00:03.550
> 
> 标签：javascript, angularjs

我正在学习 angularJS，并试图理解为什么在实际调用一个时会调用多个方法。在这一行内：

```
<li  ng-repeat="i in names" style="position: relative; top:{{mar(i)}}px; z-index:{{i}}; background-color: orange;" ng-click="clicker(i, $index)">{{i + " " + $index}}</li> 
```

所以我在这一行有两个“电话”：

1.  在样式属性中 - 这会计算顶部偏移量。
2.  ng-click= 单击元素时我的功能。

当我单击元素时 - mar(i) 与 ng-click 函数一起被调用。

我只是想了解为什么会发生这种情况。我[这里有一个 plunk](http://plnkr.co/edit/fG0qG1opVa8zEU7KwJqJ)，你可以试试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T01:18:59.307

这是因为您绑定到您所说的方法`{{mar(i)}}`.. 这意味着每次有 $digest 时，例如在触发 ng-click 之后，必须评估该方法以便可以更新视图.

# mediawiki - 在 MediaWiki 中查找指向不存在页面的链接

> ID：15047547
> 
> 赞同：1
> 
> 时间：2013-02-24T01:00:14.827
> 
> 标签：mediawiki, wiki

我已经搜索了几天，很难找到维基媒体的细节。

有谁知道会显示不存在页面的内部链接的扩展程序或报告？

我们托管了一个 wiki，我们的用户在其中创建了一些优秀的内容，但是由于内容量大，必须浏览每个页面才能找到尚未创建的页面的链接几乎是不可能的。

任何帮助或想法将不胜感激......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:09:32.883

去你的[`Special:SpecialPages`清单](http://www.mediawiki.org/wiki/Special%3aSpecialPages)，你会发现

*   `Wanted categories`
*   `Wanted files`
*   **`Wanted pages`**
*   `Wanted templates`

它们（或多或少）是您的 wiki 中所有红色链接的动态列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T16:17:33.973

如果您只想查看特定页面或一组页面的死链接列表，您可以使用[DynamicPageList](http://www.mediawiki.org/wiki/Extension%3aDynamicPageList_%28third-party%29)来运行`linksfrom`查询`openreferences = yes`。去这里了解更多信息：[http ://semeb.com/dpldemo/index.php?title=DPL:Manual_-_DPL_parameters:_Criteria_for_page_selection#linksfrom](http://semeb.com/dpldemo/index.php?title=DPL:Manual_-_DPL_parameters:_Criteria_for_page_selection#linksfrom)

# ios - iOS Mapping Application New View from Annotation

> ID：15047549
> 
> 赞同：1
> 
> 时间：2013-02-24T01:01:03.530
> 
> 标签：ios

我对 iOS 开发完全陌生，正在为当地河流创建地图应用程序。该应用程序的重点是允许用户通过选择不同的点来绘制河流上的路线。我正在使用 MapKit 来解决这个问题，但遇到了一些问题。我的主要问题是如何在注释中添加按钮，以便单击后会打开一个详细信息窗口，用户可以了解有关该点的更多信息并将其添加到行程中。这是我的代码，任何想法都会有所帮助！

```
#import "ViewController.h"
#import "CoreLocation/CLLocation.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
[super viewDidLoad];
self.mapView.delegate = self;
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation
{

// Add an annotation
MKPointAnnotation *point = [[MKPointAnnotation alloc] init];

point.coordinate = userLocation.coordinate;
point.title = @"Where am I?";
point.subtitle = @"I'm here!!!";

[self.mapView addAnnotation:point];

point.coordinate = CLLocationCoordinate2DMake(33.62258872997,-86.599988937378);
point.title = @"Civitan Park";
point.subtitle = @"Trussville, AL";
[self.mapView addAnnotation:point];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:42:59.380

您的地图视图委托应实现`–mapView:viewForAnnotation:`并返回一个注释视图，该注释视图设置了其附件视图属性之一。正常的事情是将`rightCalloutAccessoryView`属性设置为`UIButton`类型为`UIButtonTypeDetailDisclosure`. 您的 map delegate 还应该实现`-mapView:annotationView:calloutAccessoryControlTapped:`，当用户点击附件视图中的按钮时将调用它。然后，您可以将详细视图控制器推送到导航堆栈或您喜欢的任何其他内容上。

# xcode - 每次应用程序运行时，如何运行一次循环声音文件？

> ID：15047550
> 
> 赞同：0
> 
> 时间：2013-02-24T01:01:19.043
> 
> 标签：xcode, audio, avfoundation, nsuserdefaults

每次打开应用程序时，我都尝试播放一次循环声音文件。我这样做是因为我目前在初始 viewController 的 viewDidLoad 中有代码。问题是每次我切换视图然后回到初始视图控制器时，它都会再次播放声音文件，声音会重叠，听起来很糟糕。我已经在下面发布了我的代码。非常感谢任何帮助，在此先感谢！

```
{

    if (![[NSUserDefaults standardUserDefaults]
          boolForKey:@"loadSongOnce"]) {

NSString *path = [[NSBundle mainBundle] pathForResource:@"Cartoon Sound" ofType:@"mp3"];
theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
theAudio.delegate = self;
theAudio.numberOfLoops = -1;
[theAudio play];

    [[NSUserDefaults standardUserDefaults] setBool:YES
                                            forKey:@"loadSongOnce"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T07:21:28.490

尝试这个

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
//self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
// self.window.rootViewController = self.viewController;
// [self.window makeKeyAndVisible];

if(![[[NSUserDefaults standardUserDefaults] valueForKey:@"firstTime"] isEqualToString:@"Yes"])
{
    [[NSUserDefaults standardUserDefaults] setValue:@"Yes" forKey:@"firstTime"];

    [[NSUserDefaults standardUserDefaults] setInteger:([[NSUserDefaults standardUserDefaults] integerForKey:@"ApplaunchCount"] + 1) forKey:@"ApplaunchCount"];

    [[NSUserDefaults standardUserDefaults] synchronize];
}
else
{
    [[NSUserDefaults standardUserDefaults] setInteger:([[NSUserDefaults standardUserDefaults] integerForKey:@"ApplaunchCount"] + 1) forKey:@"ApplaunchCount"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    if([[NSUserDefaults standardUserDefaults] integerForKey:@"ApplaunchCount"] % 1 ==0)
    {
        //Play sound file here
    }
}
return YES;} 
```

这说明每次app被杀死（关闭就是多任务），都会重启声音。让我知道这是否有效，就像以前一样，如果不让我知道！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T06:09:31.807

那么你需要做的是确定天气这是第一次加载应用程序与否。我们需要将这些数据存储为 NSUserDefaults，因为它简单易行。

```
-(BOOL)application:(UIApplication *)application … {
NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];
if (! [defaults boolForKey:@"notFirstRun"]) {
  // display alert...
  [defaults setBool:YES forKey:@"notFirstRun"];
}
// rest of initialization ...} 
```

基本上，这会告诉应用程序这是第一次加载应用程序，（播放声音，您添加），如果不是（不播放声音）。播放声音后，布尔会知道它应该更改为 YES 并且不会再次运行，直到您重新加载应用程序。当您返回视图时，if 语句开始发挥作用，告诉应用程序“是”您已经播放了声音，并且不再播放它！让我知道这是否有效，如果没有，我会看看我能做什么！

# java - 由内部类与外部类引起的类型不匹配 - 为什么？

> ID：15047551
> 
> 赞同：0
> 
> 时间：2013-02-24T01:01:28.657
> 
> 标签：java, android, types, inner-classes

我有一个非常奇怪的问题。我问过我的同学，但他们说他们不知道为什么会这样。

这是我的主类，其方法返回片段类型：

```
public class MainActivity extends FragmentActivity implements
        ActionBar.TabListener {
//....
public Fragment getItem(int position) {
        switch(position){
        case 0:
            return new AccelerometerMonitorFragment();
        }
        return null;
    }
//...
} 
```

现在，如果我将类“AccelerometerMonitorFragment”作为内部类放在我的主类中：

```
public static class AccelerometerMonitorFragment  extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
            //do something
            return null;
        }

} 
```

这将正常工作，没有错误。但出于清洁目的，我想将它放在单独的文件中。

所以我创建了一个单独的类文件，删除了内部类，并尝试使用它。

```
package com.example.actrecognition;
//imports...
public class AccelerometerMonitorFragment  extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {
        // do something
        return null;
    }

} 
```

但后来我收到此错误：类型不匹配：无法从 AccelerometerMonitorFragment 转换为 Fragment

我不明白，因为单独文件中的类扩展了Fragment，所以有什么问题？为什么将类放在外部文件中而不是静态的会破坏代码？

# angularjs - AngularJS POST 到服务器

> ID：15047556
> 
> 赞同：18
> 
> 时间：2013-02-24T01:02:01.963
> 
> 标签：angularjs

我有一个将数据发布到 Java Servlet 的 angularJS 表单，但我没有看到请求通过；未调用 servlet“create”。

这是我的代码：

测试.html

```
<body>
    <form ng-controller="UserController">

        <legend>Create User</legend>
        <label>Name</label> 
        <input type="text" id="name" name="name" ng-model="name" placeholder="User Name"> 

        <label>Email</label>
        <input type="text" id="email" name="email" ng-model="email" placeholder="ur email here"> 

        <label>Password</label>
        <input type="text" id="pwd" name="pwd" ng-model="pwd" placeholder="ur own pwd here">

        <button ng-submit="createUser()" class="btn btn-primary">Register</button>

    </form>
</body> 
```

脚本.js

```
function UserController($scope, $http) {
    $scope.user = {};
    $scope.createUser = function() {
        $http({
            method : 'POST',
            url : '/create',
            data : 'name=' + $scope.user.name + '&email=' + $scope.user.email,
            headers : {
                'Content-Type' : 'application/x-www-form-urlencoded'
            }
        })
    } 
```

我的 servlet 如下，但它不打印“发布”。

```
public class FirstServlet extends HttpServlet
{

    /**
     * 
     */
    private static final long   serialVersionUID    = 1L;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException
    {
        System.out.println("Get");
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException
    {
        System.out.println("Post");
    }
} 
```

web服务器是jetty，web.xml如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    version="2.4"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee   http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">
    <servlet>
        <servlet-name>createUser</servlet-name>
        <servlet-class>servlet.FirstServlet</servlet-class>
        <load-on-startup>0</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>createUser</servlet-name>
        <url-pattern>/create</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-24T01:03:20.113

要将数据发布到 Web 服务器，您需要将表单值绑定到 $scope 中的对象，然后将该对象提交给脚本。

诀窍是将整个对象“用户”提交给服务器，Angular 会自动将其格式化为 JSON。此外，ng-model 标签没有使用“用户”。

另一件需要注意的事情是，当应用完成请求时，您可能希望包含一些应用程序要做的事情。您可以使用方法“.success(function(data){})”和“.error(...)”来执行此操作（这些是 promise $http 返回的方法）。

**我已经包含了 PHP 和 Servlet 代码；但是，对于所有服务器脚本（来自 Angular 的 JSON 数据）都是一样的。**

**HTML**

```
<body>
<form ng-controller="UserController" ng-submit="createUser()">

    <legend>Create User</legend>

    <label>Name</label> 
    <input type="text" id="name" name="name" ng-model="user.name" placeholder="User Name"> 

    <label>Email</label>
    <input type="text" id="email" name="email" ng-model="user.email" placeholder="ur email here"> 

    <label>Password</label>
    <input type="text" id="pwd" name="pwd" ng-model="user.pwd" placeholder="ur own pwd here">

    <button class="btn btn-primary">Register</button>

</form>
</body>

</html> 
```

**控制器**

```
function UserController($scope, $http) {
    $scope.user = {};
    $scope.createUser = function() {
        $http({
            method : 'POST',
            url : '/create',
            data : $scope.user
        })
    } 
```

**示例服务器代码：PHP**

```
$data = file_get_contents("php://input");
$objData = json_decode($data);

$pwd = $objData -> pwd;
$user = $objData -> name; //etc 
```

**示例服务器代码：JAVA Servlet**

```
JSONObject jObj = new JSONObject(request.getParameter("mydata")); // this parses the json
Iterator it = jObj.keys(); //gets all the keys

while(it.hasNext())
{
    String key = it.next(); // get key
    Object o = jObj.get(key); // get value
    //do something with it here
    //you can also do:
    String user = jObj.get("user");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T04:57:09.523

更改`ng-submit`为`ng-click`应该可以解决问题。

# java - 如何将数据从 java 发布到 servlet？

> ID：15047558
> 
> 赞同：0
> 
> 时间：2013-02-24T01:02:37.603
> 
> 标签：java, android, servlets

我有从 servlet 获取数据的 android 应用程序。现在我想再创建一个客户端，它将创建一些数据并将其发布到 servlet，然后我会在 Android 上检索它。这是我从 servlet 获取有关 Android 信息的代码：

```
 final RestClient client = new RestClient("App Engine name");

    client.AddParam("hi", "how are you?");

    TextView textView = (TextView)findViewById(R.id.outputTextView);

                    try
                    {
                        client.Execute(RequestMethod.GET);
                    }
                    catch (Exception e)
                    {
                        textView.setText(e.getMessage());

                    }
                    String response = client.getResponse();
                    textView.setText(response); 
```

有什么方法可以将数据从另一个客户端发布到 servlet，然后使用 client.getResponse() 在 Android 上获取它；?

# foreach - zk 嵌套 forEach

> ID：15047560
> 
> 赞同：0
> 
> 时间：2013-02-24T01:02:42.867
> 
> 标签：foreach, nested, zk, zul

我有以下结构显示在 zul 文件中，并从 Java 控制器获取诊所对象列表。

我在 zul 中尝试了几个 zk 组件，但没有运气。我应该使用什么组件`forEach`？

*   列表框
*   项目清单
*   网格

**这是需要显示的结构：**

```
For each clinic
{ 
    For each clinic.location 
    { 
        For each (clinic.location.provider) 
        { 
            Output (provider display name) 
        } 
        Output (clinic name) 
        Output (clinic.location address) 
        Output (clinic.locatoin telephone number) 
        Output (clinic.web address)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T08:02:48.053

正如 Darius 给出的答案中所解释的，这里是一个如何将 a`<Grid>` 与`<rows>`组件一起使用的示例

```
<?page title="Result"?>
<zk>
    <window apply="org.zkoss.bind.BindComposer"
        viewModel="@id('vm') @init('fully.qualified.viewmodel.classname')"
        title="Result Window" border="normal" >
        <div>
            <grid>
                <rows>
                    <row>
                        <listbox model="@bind(vm.listname)">
                            <listhead>
                                <listheader label="Item Name"
                                    style="text-align:center;">
                                </listheader>
                                <listheader label="Attribute Value"
                                    style="text-align:center;">
                                </listheader>
                                <listheader label="Qualifier Value"
                                    style="text-align:center;">
                                </listheader>
                            </listhead>
                            <template name="model" var="item">
                                <listitem value="${item }">
                                    <listcell label="@load(item.name)"
                                        style="text-align:center;">

                                    </listcell>
                                    <listcell
                                        style="text-align:center;">
                                        <textbox
                                            value="@bind(item.attributeValue)"
                                            style="text-align:center;" />

                                    </listcell>
                                    <listcell
                                        label="@load(item.qualifierValue)"
                                        style="text-align:center;">
                                    </listcell>
                                </listitem>
                            </template>
                        </listbox>
                    </row>
                </rows>
            </grid>
        </div>

    </window>
</zk> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:34:56.057

您可以使用列表框或网格。

*   如果您使用 Listbox，它将包含 Listitem 对象
*   如果使用 Grid，它将包含一个 Rows 对象，该对象将包含 Row 对象

对于 Listitem 或 Row，您将添加其他组件：最简单的是 Label 对象

我注意到您有一个提供者的内部表。对于这些，您可能需要一个嵌套的 Grid 或 Listbox。你也可以使用 ZK 的 Detail 组件。它可以让您展开以查看内部表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T17:40:57.613

有多种方法可以实现这一目标

*   包括单独的 zul 文件到模板行，whitch 将包含一个具有单独视图模型的网格 - 这种样式您可以一次显示所有嵌套网格，但它应该并且它将具有较大数据量的性能问题（因为行数 = =嵌套网格的视图模型计数）
*   包括带有自己模板的嵌套网格，以及作为视图模型参数的数据模型，并按需显示此网格（按钮单击、行单击等） - 这是在没有性能问题的情况下的更好方式，但您只能显示一次嵌套一个网格

最后的话 -**只是不要**

将网格嵌套到网格是一个非常糟糕的设计，因为渲染它非常困难，而且它仅适用于小数据。在我看来，最好的方法是创建两个单独的网格，并排，并在第二个网格中显示附加数据，然后单击第一个网格中的行。通过这种方式，您可以在没有性能问题的情况下实现非常快速的 gui，并且可以使用大量数据。另一种方法是在网格行上创建一个弹出窗口，它会显示额外的数据，这对你的表现也有很大的帮助。

# javascript - jQuery 用脚本附加 html

> ID：15047561
> 
> 赞同：1
> 
> 时间：2013-02-24T01:02:43.950
> 
> 标签：javascript, jquery, html

我需要一些关于 jQuery 的帮助。

当我尝试通过 $.get 获取带有嵌入 js 页面内容的 html 时，它的效果很好。但是当我试图将它附加到某个 div 时，所有脚本都被删除了。

在控制台中，当我这样做时，它看起来不错

```
$('.my_div').html() + '<script>alert("text")</script>' 
```

但是当我在做

```
 $('.my_div').html($('.my_div').html() + '<script>alert("text")</script>') 
```

脚本正在运行并正在删除

如何在不运行和删除的情况下将 html+js 代码附加到 div？

谢谢！

升级版：

我的例子：

索引.html

...

```
<div class="masonry">
    <div class="a1">
        <p>text</p>
        <script>alert('example')</script>
    </div>
    <div class="a1">
        <p>text</p>
        <script>alert('example')</script>
    </div>
    <div class="a1">
        <p>text</p>
        <script>alert('example')</script>
    </div>
</div> 
```

...

```
<script>

$.get('get_news.php',function(response){

    $('.masonry').append(response);

});
</script> 
```

...

get_news.php

```
 <div class="b1">
        <p>text</p>
        <script>alert('example1')</script>
    </div>
    <div class="b1">
        <p>text</p>
        <script>alert('example1')</script>
    </div>
    <div class="b1">
        <p>text</p>
        <script>alert('example1')</script>
    </div> 
```

...

我会得到

```
<div class="masonry">
    <div class="a1">
        <p>text</p>
        <script>alert('example')</script>
    </div>
    <div class="a1">
        <p>text</p>
        <script>alert('example')</script>
    </div>
    <div class="a1">
        <p>text</p>
        <script>alert('example')</script>
    </div>

    <div class="b1">
        <p>text</p>
        <script>alert('example1')</script>
    </div>
    <div class="b1">
        <p>text</p>
        <script>alert('example1')</script>
    </div>
    <div class="b1">
        <p>text</p>
        <script>alert('example1')</script>
    </div>

</div> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:30:45.370

这是默认行为- 它会在将内容附加到 DOM 时去除`.html()`脚本和它们。`eval`jQuery 甚至提供[`$.parseHTML`](http://api.jquery.com/jQuery.parseHTML/)了在不评估脚本的情况下剥离脚本的默认设置，以防止 XSS。

如果您已经在页面中执行脚本，那么绝大多数情况下您只需将代码放在同一个脚本中即可。但是，如果您**真的**想要/需要将新脚本附加到页面，您可以通过以下方式完成[`append`](http://api.jquery.com/append/)：

```
$('.my_div').append($('<script>', { text: 'alert("foo");' })); 
```

[**小提琴**](http://jsfiddle.net/4xUvB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:28:55.033

如果您不想删除原始内容，可以使用 append。至于停止执行脚本标签，一种方法是更改​​脚本类型`"text/html"`或使用html转义功能。

[http://jsfiddle.net/R5xad/](http://jsfiddle.net/R5xad/)

# macos - 使用 Tascam US-144MKII 读取 CoreAudio 输入电平

> ID：15047569
> 
> 赞同：1
> 
> 时间：2013-02-24T01:04:21.020
> 
> 标签：macos, audio, core-audio, volume

（这是最近提出的问题的更清晰版本）

我正在接管一些代码来解决一些问题，其中一个让我感到困惑。

应用程序需要监控输入电平并将其显示出来，以便用户在需要时进行调整。当前代码与大多数设备完美配合。计量模式已启用，这两条线由计时器例程调用并工作 - 除了一个设备：

```
AudioUnitGetParameter(mMixerUnit, k3DMixerParam_PreAveragePower, kAudioUnitScope_Input, 0, &levels[0]);
AudioUnitGetParameter(mMixerUnit, k3DMixerParam_PrePeakHoldLevel, kAudioUnitScope_Input, 0, &peaks[0]); 
```

当所选输入设备是TASCAM US-144MKII时，级别和峰值始终为-120。Tascam 单元有一些不同之处，例如，它列出了 4 个通道并且安全偏移量为 0。但是，我看不出其中任何一个会如何导致这个特殊问题。现在我的猜测是，Tascam 的 USBAudio 驱动程序中的某些内容与预期的不同。

卷确实使用 Audacity 显示，但如果我正确阅读代码，则 Audacity 正在使用已弃用的函数。是否可以运行单独的 AudioQueue，而不是捕获数据，而只是为了获取输入电平？

我很感激你的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T05:10:03.893

找到了！

选择TASCAM单位作为输入时，代码中的输入回调从未被调用。尚未定义的确切原因，但基本上它不仅仅是获得卷级别，在选择TASCAM单位作为输入设备时，没有任何工作。

# math - Calculating a Web Audio API filter's response at a specific frequency and Q-factor

> ID：15047570
> 
> 赞同：3
> 
> 时间：2013-02-24T01:04:22.140
> 
> 标签：math, audio, canvas, signal-processing, web-audio-api

I'm using the Web Audio API to make a graphic EQ with four BiQuad filters; a highpass, two bandpass and a low pass:

![enter image description here](../Images/cf4ca09b608c246d8671c868a66fae75.png)

You can see each node representing each filter's frequency. It's working nicely but I'd like to draw the shape of the filter's roll-off you'd usually find in other graphic EQ's.

I have the Q-factor of each filter and the central frequency. What I would like to do is get a formula that allows me to get the frequency of the roll-off at a specific db value. For example what is the frequency of the roll-off at -200db?

It's been a while since I've done any heavy mathematical stuff and so any help would be greatly appreciated.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T15:52:30.377

你看过 BiquadFilterNode 的 getFrequencyResponse 方法吗？ [https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#Methods](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#Methods)。

我的 IO2012 Web Audio 演讲中的这个演示使用了它：[http](http://webaudio-io2012.appspot.com/frames/frequency-response.html) ://webaudio-io2012.appspot.com/frames/frequency-response.html 。当然，您必须计算从那里堆叠在一起的多个过滤器的响应。

# symfony - Convert Doctrine Query to QueryBuilder object for add conditions

> ID：15047572
> 
> 赞同：4
> 
> 时间：2013-02-24T01:04:30.380
> 
> 标签：symfony, doctrine-orm, symfony-2.1

I have a Doctrine Query object returned by a service. Then I need to add some "wheres, order by and Limit" parts. Is posible convert a QUery Object to QueryBuilder Object? How I do it?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-24T01:07:08.567

You cannot convert a query object to a query builder. Once you have a query object, you can use:

```
$query->getDQL(); 
```

to retrieve the DQL for that query object, and once you manipulated it (it's a string, so it is up to you)

```
$query->setDQL($modifiedDql); 
```

# php - mailto php removing new line characters

> ID：15047573
> 
> 赞同：0
> 
> 时间：2013-02-24T01:04:31.117
> 
> 标签：php, mailto

I'm using a mailto link to send e-mail with a php string variable inside it as follows:

```
'Would you like to E-mail stakeholders? <a class="emailLink" href="mailto:stakeholders?subject=Alert '.$ticket.'&body=Experience:  %0D%0A'.$exp.'">Review and Send!</a><br><br>'; 
```

I discovered that in the e-mail client it prints it out like:

```
Experience:  
Th Experience should contain:\r\n\r\nImpact\r\nHow to replicate\r\nComprehensive notes 
```

So I tried:

```
$charactersToRemove = array("\r\n","\n","\r");
$replaceWith = "%0D%0A";
$exp = str_replace($charactersToRemove,$replaceWith,$exp); 
```

Which doesn't seem to make a difference...Can someone tell me why? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:13:17.563

您可以发布更多代码以显示如何`$exp`分配它的价值吗？

我已经编辑了我的答案，直到我能提供更好的帮助。

编辑：您可以认真尝试使用`"\r\n"`with`\"`来转义`"`，以防万一 PHP`%0D$0A`在您的 HTML 输出中以某种方式本地化？您的页面来源是什么样的？

# android - 在 Android 中打开和关闭屏幕

> ID：15047577
> 
> 赞同：0
> 
> 时间：2013-02-24T01:05:26.023
> 
> 标签：android, printing, boolean, android-lifecycle

我在尝试生成的 Android 代码方面遇到了一些麻烦。我想要做的只是打印一个 1 如果用户想要解锁他们的手机，当程序第一次启动时，当用户按下屏幕锁定来锁定他们的手机时打印一个 0。我认为这与 Android 生命周期有关，所以我尝试使用 onPause 和 onResume，但我的程序只打印出 0，而不是 1。logTime 方法简单地打印出 1 或 0，而 MainActivity 中的 onCreate 方法调用 onResume() 一次。这是我的代码：

主要活动：

```
protected void onPause(){
    if(ScreenReceiver.screenOn){
        logTime(ScreenReceiver.screenOn); 
 super.onPause();
}

protected void onResume()
  if(!ScreenReceiver.screenOn){
    logTime(!ScreenReceiver.screenOn);
super.onResume();
} 
```

屏幕接收器：

```
public class ScreenReceiver extends BroadcastReceiver{
public static boolean screenOn;

@Override
public void onReceive(Context context, Intent intent){
    if(intent.getAction().equals(Intent.ACTION_SCREEN_OFF)){
        screenOn = false;
    }
    else if(intent.getAction().equals(Intent.ACTION_SCREEN_ON)){
        screenOn = true;
    }

} 
```

}

我不确定为什么它只打印出 0。可能有人知道为什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:13:39.200

根据您的代码，一切似乎都是正确的，它应该始终打印 0...

当屏幕关闭时，`screenOn`设置为`false`，你的 Activity`onPause`被调用，它打印 0。

当您的应用程序正在运行并被`onResume`调用时，`screenOn`将是`true`（无论屏幕是否刚刚打开），在那里，您会记录相反的`screenOn`，因此将再次为 0 ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:07:48.603

您的活动和接收到的实际广播之间存在延迟`onPause()`，因此通常您可以获得“奇怪”（错误）读数，因为变量没有发生变化。此接收器需要动态注册，并且您还希望它在屏幕关闭并重新打开时也能接收。通常，接收器在 onPause() 中未注册以避免泄漏，但在这里，我们将使用`onDestroy()`，因为这是我们可以使用的最后一个方法调用。为简单起见，我`BroadcastReceiver`在 Activity 中做对了，`logTime()`直接调用。

示例代码：

```
public class MainActivity extends Activity {

  BroadcastReceiver receiver;
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON); 
    filter.addAction(Intent.ACTION_SCREEN_OFF); 
    receiver = new BroadcastReceiver(){

      @Override
      public void onReceive(Context arg0, Intent arg1) {
        if(arg1.getAction().equals(Intent.ACTION_SCREEN_OFF)){
          logTime(false);
        }
        else if(arg1.getAction().equals(Intent.ACTION_SCREEN_ON)){
          logTime(true);
        }
      } 
    }; 
    registerReceiver(receiver, filter);
  }

  @Override
  protected void onDestroy()
  {
    try{
      unregisterReceiver (receiver);
    }
    catch (NullPointerException e){  
      e.printStackTrace();
    }
    catch (IllegalStateException e1){
      e.printStackTrace();
    }
    super.onDestroy();
  }

  public void logTime (boolean screen)
  {
    Time now = new Time();
    now.setToNow();

    String lsNow = now.format("%m-%d-%Y %I:%M:%S");
    TextView myText = (TextView) findViewById (R.id.myText);
    myText.append (" " + lsNow + (screen ? "0" : "1"));
  }
} 
```

# javascript - Variable name declaration for key in associative array

> ID：15047580
> 
> 赞同：0
> 
> 时间：2013-02-24T01:05:45.540
> 
> 标签：javascript, debugging, syntax, web

I am operating inside of a javascript `for()` loop and need to produce the following dynamically:

```
devCssFiles[ '../'+thisTheme._name+'/assets/css/main.css' ] = 
'child_themes/'+thisTheme._name+'/master.less'; 
```

the intended result is an associative array that can be declared iteratively inside of a parent object, e.g. (`thisTheme._name` is declared in an external JSON file which is read when the code below is processed, this part is working fine)

```
var myConfigObj = {};

for ( var key in thisThemeMetaObj ) {
   var devCssFiles = [],
      devCssFiles[ '../'+thisTheme._name+'/assets/css/main.css' ] = 
   'child_themes/'+thisTheme._name+'/master.less'; 
   myConfigObj[thisTheme._name] = devCssFiles;
} 
```

I'm trying to give a complete explanation, but the problem is quite simple, I'm just declaring the named key of the associative array incorrectly at the line which reads `devCssFiles[ '../'+thisTheme._name+'/assets/css/main.css' ] = 'child_themes/'+thisTheme._name+'/master.less';`

Can someone show me the correct syntax here?

The intended output should be a JSON object like this:

```
 myConfigObject: {
        '../themeFoo/assets/css/main.css': [
            'child_themes/themeFoo/master.less'
        ]
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:19:41.150

语法错误在这里：

```
var devCssFiles = [],
      devCssFiles[ '../'+thisTheme._name+'/assets/css/main.css' ] = 
   'child_themes/'+thisTheme._name+'/master.less'; 
```

问题是`devCssFiles = []`需要一个分号（而不是逗号），以便在声明名为属性的变量时该变量存在。所以应该是

```
var devCssFiles = [];
   devCssFiles[ '../'+thisTheme._name+'/assets/css/main.css' ] = 
   'child_themes/'+thisTheme._name+'/master.less'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:22:35.480

我想你想要

```
var myConfigObj = {};
for ( var key in thisThemeMetaObj ) {
   var thisTheme = thisThemeMetaObj[key],
       devCssFiles = [ 'child_themes/'+thisTheme._name+'/master.less' ]; // array literal
   myConfigObj['../'+thisTheme._name+'/assets/css/main.css'] = devCssFiles;
} 
```

请注意，您`devCssFiles`是一个数组，但您确实在其上创建了一个非数字属性。

# php - php mysql + sessions errors with logout

> ID：15047582
> 
> 赞同：0
> 
> 时间：2013-02-24T01:06:16.040
> 
> 标签：php, session, logout

i am creating a website with login and logout and registration but an error appear every time i want to logout how to fix it i think the eroor is in the session this error make me crazy i did a lot of search about fixing the problem but i did not get any solution that help me.

# logout.php

```
<?php
session_start();

session_destroy();

if(isset($_COOKIE['id_cookie'])){

setcookie("id_cookie", "", time()-50000,"/");

setcookie("pass_cookie", "", time()-50000,"/");

}

if(isset($_SESSION['username'])){ 
echo("we could not log out try again!");
exit();
}else{
 header("Location: home.php");

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:55:16.890

```
<?php
session_start();
session_destroy();
if(isset($_COOKIE['id_cookie'])){
  setcookie("id_cookie", "", time()-50000,"/");
  setcookie("pass_cookie", "", time()-50000,"/");
}

header("Location: home.php");
exit();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:21:05.127

`session_destroy();`销毁所有会话，所以我没有按照您的 If 语句的点来检查用户名会话？

其次，您实际上不需要用于回显的括号：

```
echo("we could not log out try again!"); exit(); 
```

可以写成：

```
echo "we could not log out try again!"; exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:13:03.960

不确定你的错误，但阅读[session_destroy](http://www.php.net/manual/en/function.session-destroy.php)会帮助你。

我的猜测是错误是在检查时`if(isset($_SESSION['username'])){`，根据手册：

> session_destroy() 销毁与当前会话关联的所有数据。它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。**要再次使用会话变量，必须调用 session_start()。**

您永远不会再次启动会话，因此您不能使用会话变量。

此外，对于注销用户的进一步帮助，同一页面中的以下内容将有所帮助：

> 为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。setcookie() 可以用于此。

虽然它不在问题的范围内 - 它会帮助您制作成功的注销脚本。

# gcc - the .c file formed by compiling a Makefile within genesis 2.3 produces error

> ID：15047589
> 
> 赞同：0
> 
> 时间：2013-02-24T01:06:53.857
> 
> 标签：gcc, compiler-errors, makefile

error produced =

```
newconn_d@.c: In function ‘INFO_fac_synchan_type’:
newconn_d@.c:540: error: expected ‘)’ before numeric constant
make[1]: *** [newconn_d@.o] Error 1 
```

The source code:

```
/*including line 540 at start for your convenience because SUCH long code:
__BZ;info.name="fac_synchan_type.122";info.offset=(caddr_t)(&(var.122))-(caddr_t)(&var);        info.type="#";info.type_size=sizeof("");InfoHashPut(&info);strcat(fields,"122");strcat(fields,"\n");
*/

#include "newconn_ext.h"

#define __BZ BZERO(&info,sizeof(Info))
#define __IFI(F) info.field_indirection = F
#define __IFT info.function_type = 1
#define __IND(N) info.dimensions = N
#define __IDS(S,N) info.dimension_size[S] = N

....

__BZ;info.name="fac_synchan_type.compositeobject";info.offset=(caddr_t)(&(var.compositeobject))-(caddr_t)(&var);        info.type="GenesisObject";info.type_size=sizeof(GenesisObject);__IFI(1);InfoHashPut(&info);strcat(fields,"compositeobject");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field compositeobject\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.componentof";info.offset=(caddr_t)(&(var.componentof))-(caddr_t)(&var);        info.type="Element";info.type_size=sizeof(Element);__IFI(1);InfoHashPut(&info);strcat(fields,"componentof");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field componentof\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.parent";info.offset=(caddr_t)(&(var.parent))-(caddr_t)(&var);      info.type="Element";info.type_size=sizeof(Element);__IFI(1);InfoHashPut(&info);strcat(fields,"parent");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field parent\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.child";info.offset=(caddr_t)(&(var.child))-(caddr_t)(&var);        info.type="Element";info.type_size=sizeof(Element);__IFI(1);InfoHashPut(&info);strcat(fields,"child");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field child\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.next";info.offset=(caddr_t)(&(var.next))-(caddr_t)(&var);      info.type="Element";info.type_size=sizeof(Element);__IFI(1);InfoHashPut(&info);strcat(fields,"next");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field next\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.activation";info.offset=(caddr_t)(&(var.activation))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"activation");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field activation\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.Ik";info.offset=(caddr_t)(&(var.Ik))-(caddr_t)(&var);      info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"Ik");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field Ik\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.Gk";info.offset=(caddr_t)(&(var.Gk))-(caddr_t)(&var);      info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"Gk");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field Gk\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.Ek";info.offset=(caddr_t)(&(var.Ek))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"Ek");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field Ek\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.X";info.offset=(caddr_t)(&(var.X))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"X");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field X\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.Y";info.offset=(caddr_t)(&(var.Y))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"Y");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field Y\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.tau1";info.offset=(caddr_t)(&(var.tau1))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"tau1");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field tau1\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.tau2";info.offset=(caddr_t)(&(var.tau2))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"tau2");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field tau2\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.gmax";info.offset=(caddr_t)(&(var.gmax))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"gmax");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field gmax\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.xconst1";info.offset=(caddr_t)(&(var.xconst1))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"xconst1");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field xconst1\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.xconst2";info.offset=(caddr_t)(&(var.xconst2))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"xconst2");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field xconst2\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.yconst1";info.offset=(caddr_t)(&(var.yconst1))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"yconst1");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field yconst1\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.yconst2";info.offset=(caddr_t)(&(var.yconst2))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"yconst2");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field yconst2\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.norm";info.offset=(caddr_t)(&(var.norm))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"norm");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field norm\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.frequency";info.offset=(caddr_t)(&(var.frequency))-(caddr_t)(&var);        info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"frequency");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field frequency\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.nsynapses";info.offset=(caddr_t)(&(var.nsynapses))-(caddr_t)(&var);        info.type="short";info.type_size=sizeof(short);InfoHashPut(&info);strcat(fields,"nsynapses");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field nsynapses\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.normalize_weights";info.offset=(caddr_t)(&(var.normalize_weights))-(caddr_t)(&var);        info.type="short";info.type_size=sizeof(short);InfoHashPut(&info);strcat(fields,"normalize_weights");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field normalize_weights\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.time_last_event";info.offset=(caddr_t)(&(var.time_last_event))-(caddr_t)(&var);        info.type="double";info.type_size=sizeof(double);InfoHashPut(&info);strcat(fields,"time_last_event");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field time_last_event\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.hsolve";info.offset=(caddr_t)(&(var.hsolve))-(caddr_t)(&var);      info.type="Element";info.type_size=sizeof(Element);__IFI(1);InfoHashPut(&info);strcat(fields,"hsolve");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field hsolve\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.solve_index";info.offset=(caddr_t)(&(var.solve_index))-(caddr_t)(&var);        info.type="int";info.type_size=sizeof(int);InfoHashPut(&info);strcat(fields,"solve_index");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field solve_index\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.synapse_size";info.offset=(caddr_t)(&(var.synapse_size))-(caddr_t)(&var);      info.type="unsigned short";info.type_size=sizeof(unsigned short);InfoHashPut(&info);strcat(fields,"synapse_size");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field synapse_size\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.event_buffer_size";info.offset=(caddr_t)(&(var.event_buffer_size))-(caddr_t)(&var);        info.type="int";info.type_size=sizeof(int);InfoHashPut(&info);strcat(fields,"event_buffer_size");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field event_buffer_size\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.pending_events";info.offset=(caddr_t)(&(var.pending_events))-(caddr_t)(&var);      info.type="int";info.type_size=sizeof(int);InfoHashPut(&info);strcat(fields,"pending_events");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field pending_events\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.FreeSynapticEvents";info.offset=(caddr_t)(&(var.FreeSynapticEvents))-(caddr_t)(&var);      info.type="SynapticEventPtr";info.type_size=sizeof(SynapticEventPtr);InfoHashPut(&info);strcat(fields,"FreeSynapticEvents");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field FreeSynapticEvents\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.PendingSynapticEvents";info.offset=(caddr_t)(&(var.PendingSynapticEvents))-(caddr_t)(&var);        info.type="SynapticEventPtr";info.type_size=sizeof(SynapticEventPtr);InfoHashPut(&info);strcat(fields,"PendingSynapticEvents");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field PendingSynapticEvents\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.nodes_per_synapse";info.offset=(caddr_t)(&(var.nodes_per_synapse))-(caddr_t)(&var);        info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"nodes_per_synapse");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field nodes_per_synapse\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.list_alloced";info.offset=(caddr_t)(&(var.list_alloced))-(caddr_t)(&var);      info.type="short";info.type_size=sizeof(short);InfoHashPut(&info);strcat(fields,"list_alloced");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field list_alloced\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.allocednodes";info.offset=(caddr_t)(&(var.allocednodes))-(caddr_t)(&var);      info.type="short";info.type_size=sizeof(short);InfoHashPut(&info);strcat(fields,"allocednodes");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field allocednodes\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.synapse";info.offset=(caddr_t)(&(var.synapse))-(caddr_t)(&var);        info.type="Fac_Synapse_type";info.type_size=sizeof(struct Fac_Synapse_type);__IFI(1);InfoHashPut(&info);strcat(fields,"synapse");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field synapse\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.122";info.offset=(caddr_t)(&(var.122))-(caddr_t)(&var);        info.type="#";info.type_size=sizeof("");InfoHashPut(&info);strcat(fields,"122");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field 122\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.max_fac";info.offset=(caddr_t)(&(var.max_fac))-(caddr_t)(&var);        info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"max_fac");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field max_fac\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.fac_per_spike";info.offset=(caddr_t)(&(var.fac_per_spike))-(caddr_t)(&var);        info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"fac_per_spike");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field fac_per_spike\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.fac_tau";info.offset=(caddr_t)(&(var.fac_tau))-(caddr_t)(&var);        info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"fac_tau");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field fac_tau\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.fac_const";info.offset=(caddr_t)(&(var.fac_const))-(caddr_t)(&var);        info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"fac_const");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field fac_const\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.depr_per_spike";info.offset=(caddr_t)(&(var.depr_per_spike))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"depr_per_spike");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field depr_per_spike\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.depr_tau";info.offset=(caddr_t)(&(var.depr_tau))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"depr_tau");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field depr_tau\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="fac_synchan_type.depr_const";info.offset=(caddr_t)(&(var.depr_const))-(caddr_t)(&var);      info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"depr_const");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object fac_synchan_type, field depr_const\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
FieldHashPut("fac_synchan_type",fields);
}

void INFO_SynG_type(){
struct SynG_type var;Info info;char fields[2500];fields[0]='\0';info.name="SynG_type";info.type_size=sizeof(var);InfoHashPut(&info);
__BZ;info.name="SynG_type.name";info.offset=(caddr_t)(&(var.name))-(caddr_t)(&var);     info.type="char";info.type_size=sizeof(char);__IFI(1);InfoHashPut(&info);strcat(fields,"name");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field name\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.index";info.offset=(caddr_t)(&(var.index))-(caddr_t)(&var);       info.type="int";info.type_size=sizeof(int);InfoHashPut(&info);strcat(fields,"index");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field index\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.object";info.offset=(caddr_t)(&(var.object))-(caddr_t)(&var);     info.type="object_type";info.type_size=sizeof(struct object_type);__IFI(1);InfoHashPut(&info);strcat(fields,"object");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field object\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.flags";info.offset=(caddr_t)(&(var.flags))-(caddr_t)(&var);       info.type="short";info.type_size=sizeof(short);InfoHashPut(&info);strcat(fields,"flags");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field flags\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.nextfields";info.offset=(caddr_t)(&(var.nextfields))-(caddr_t)(&var);     info.type="short";info.type_size=sizeof(short);InfoHashPut(&info);strcat(fields,"nextfields");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field nextfields\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.extfields";info.offset=(caddr_t)(&(var.extfields))-(caddr_t)(&var);       info.type="char";info.type_size=sizeof(char);__IFI(2);InfoHashPut(&info);strcat(fields,"extfields");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field extfields\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.x";info.offset=(caddr_t)(&(var.x))-(caddr_t)(&var);       info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"x");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field x\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.y";info.offset=(caddr_t)(&(var.y))-(caddr_t)(&var);       info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"y");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field y\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
__BZ;info.name="SynG_type.z";info.offset=(caddr_t)(&(var.z))-(caddr_t)(&var);       info.type="float";info.type_size=sizeof(float);InfoHashPut(&info);strcat(fields,"z");strcat(fields,"\n");
if (strlen(fields) > 2500) { Error(); printf("Field size too long for object SynG_type, field z\n**See sys/code_sym.c and increase the value of MAX_FIELDS_SIZE\n\n"); }
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:17:58.827

看起来您有一个名为以下之一的宏：

```
depr_const
depr_per_spike
depr_tau
fac_const
fac_depr_on
fac_per_spike
fac_tau
max_fac 
```

定义为`122`。要跟踪名称冲突，您可以尝试使用 cpp: 处理源文件`cpp -dD source.c`。Ans 查看哪个宏破坏了编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:13:30.733

投诉似乎是关于：

```
__BZ;info.name="fac_synchan_type.122";info.offset=(caddr_t)(&(var.122))-(caddr_t)(&var); 
```

您不能有一个名为 的结构成员`122`，因此在 . 处出现语法错误`var.122`。

查看您是如何定义此结构的。

# r - ARPACK page rank error

> ID：15047595
> 
> 赞同：2
> 
> 时间：2013-02-24T01:07:56.977
> 
> 标签：r, graph-theory, igraph, lapack, arpack

I'm using the igraph package in R to run PageRank. I ran it for my graph and got this error:

> At arpack.c:1130 : ARPACK error, The Schur form computed by LAPACK routine dlahqr could not be reordered by LAPACK routine dtrsen.

I read online that this could be caused by your graph having multiple disjoint components. So I ran

```
gList = decompose.graph(g)
is.connected(gList[[20]])  # evaluates to true 
```

But I'm still getting this same error when I run

```
page.rank(gList[[20]]) 
```

What could be causing this? Is there any way to get more info about the error?

(This only happens for some graphs and not others. The problematic graph has 35k vertices, but I can attempt to upload some relevant data if it helps.)

# haskell - 辅助函数，给出解析错误

> ID：15047597
> 
> 赞同：2
> 
> 时间：2013-02-24T01:08:02.950
> 
> 标签：haskell

我是 Haskell 的新手。在下面的示例中，该函数从列表中删除所有出现的特定元素并返回一个新列表。此外，我正在尝试使用辅助函数来获取返回的列表并输出它的长度。

我遇到的问题是编译时出现解析错误，指向包含`delete _ [] = []`.

感谢您在找出错误原因方面的任何帮助。

```
countDelete y (x:xs) = length outputList
    where outputList = delete y (x:xs)

    delete _ [] = []
    delete y (x:xs)  |  x==y = delete y xs
                     |  otherwise = x:delete y xs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:09:41.700

子句中的所有绑定`where`必须从同一列开始，

```
countDelete y (x:xs) = length outputList
  where
    outputList = delete y (x:xs)

    delete _ [] = []
    delete y (x:xs)
        |  x==y      = delete y xs
        |  otherwise = x:delete y xs 
```

作品。

# jquery - MVC Controller - getting duplicate querystings without using request.querystring?

> ID：15047599
> 
> 赞同：1
> 
> 时间：2013-02-24T01:08:23.997
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

When I use JQuery to serialize a list of id's for my querystring it produces a url like:

```
mydomain/mypage?id=1&id=2&id=3&id=4 
```

**Here is what my form looks like**

```
<div><input type="text" name="id" value="1" /></div>
<div><input type="text" name="id" value="2" /></div>
<div><input type="text" name="id" value="3" /></div>
<div><input type="text" name="id" value="4" /></div>
<div><input type="text" name="id" value="5" /></div>

<div><a href="#" id="myLink">CLICK ME!</a></div>
<script>
$('#myLink').click(function() {

//see: http://api.jquery.com/serialize/
myids = $('input[name=id]').serialize();

alert( myids );
return false;

});
</script> 
```

-live demo - [http://jsfiddle.net/yDpu6/2/](http://jsfiddle.net/yDpu6/2/)

* * *

When trying to get the querstring values from my controller ActionResult I only get the first id (eg: 1) but when using Request.Quesrtring["id"] I get all the id's (eg:: 1,2,3,4).

Is there a way that I can pass all the serialized id's into my controller without using Request.Quesrtring["id"]?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:37:01.630

如果您假设下面的代码将给出所有值，那么您的假设是错误的

> var value = ('.classname').val();

您需要在发布 ID 之前将值推送到数组。

**查看代码**

```
<input type="text" class="idList" value="1"/>
<input type="text" class="idList" value="2"/>
<input type="button" value="Post Values" onclick="javascript:postValues()" />
<script type="text/javascript">
function postValues() {
    var values = [];
    $('.idList').each(function () {
        values.push($(this).val());
    });

    postData = { id: values }

    $.ajax({
        type: "POST",
        url: "/Home/PostIds",
        data: postData,
        dataType: 'json',
        success: function (data) {
            alert($('.idList').val());
        },
        traditional: true
    });
}
</script> 
```

**动作方法代码**

```
public ActionResult PostIds(List<string> id)
{
    return null;
} 
```

# cordova - On-the-fly patches for PhoneGap

> ID：15047601
> 
> 赞同：0
> 
> 时间：2013-02-24T01:08:36.640
> 
> 标签：cordova

I've been noodling on this idea for a while, but I'm wondering if there are security ramifications.

Basically PhoneGap is just HTML5 running within a navite app web browser. (My particular app uses JQuery Mobile to help with the GUI) I've been thinking about adding the ability to "pull" javascript and HTML updates to the app, so I don't have to go through the App Store every time. To give a specific example:

Let's say I submit MyApp v1.0 to the App Store and Apple approves it. It then turns out that one of my buttons in the app are broken.

Normally I'd have to fix the button, resubmit to Apple and wait a week for them to approve it.

But what if I had my app always ping the server on startup and check for executable javascript patches? My app could simply pull down a sniplet of code like:

```
$("#mybutton").click(function(event) { 
    event.stopPropagation();
    // Here is the right thing to do... 
} 
```

As long as this "patch" code is executed at the appropriate time and in the appropriate way, I don't see why it wouldn't work. It would also work great to communicate system outages, etc.

My concern, however, is security. Grabbing some dynamic code from the outside world and executing it blindly sounds scary. Can I trust that if my patch grabber always hits a specific HTTPS URL on my server, that that response is safe to execute? Or could a 'hacker' somehow intercept that patch call and feed in their own malicious javascript?

# google-maps - Google Places API - At times it does not return results and at times it returns results

> ID：15047603
> 
> 赞同：0
> 
> 时间：2013-02-24T01:08:45.727
> 
> 标签：google-maps, google-maps-api-3, google-places-api

I am developing a functionality where in I am using google places API.Code is working fine and at times I get results and at times I do not.Not sure as why this is happening.Few queries for which I need some clarification are,

1.  I have a drop down where I give the distance as 1 mile and 3 mile and then trigger the google places api.I am taking type as bank.Now when I search within the radius of 1 mile, I get 10 results and when I search with the same type for 3 miles radius, I get 5 results. Actually I was thinking I should have total of 15 results for 3 mile search.But this is not happening ? Am I missing to read something here ?

2.  I am doing geocoding on the client side, what options do you suggest to cache the lat and lng.I read in google maps Api , that we can cache the geocoding results,can someone tell me how long we can keep this ? can we add ajax call and keep this information in DB or I need to do local storage.My site is going to be public facing, though I dont hope that I will be having more than couple of hundreds of hit a day,but still I need some way to be ready in case I might have to.

$("#id-btn").click(function( event ) {

```
 var type = $('#type').val();
 console.log(type)
 var radius = $('#radius').val();
 console.log(radius)
 console.log(latlng)

 var request = {
        location:latlng,
        radius: radius,
        types: [type]
    };
    console.log(request)
      service = new google.maps.places.PlacesService(map);
     console.log(service)
                      service.nearbySearch(request,createMarkers);
                    //service.textSearch(request,createMarkers);                        
                }); 
```

# javascript - 二维多边形边中的矩形镶嵌，不重叠

> ID：15047604
> 
> 赞同：2
> 
> 时间：2013-02-24T01:08:52.723
> 
> 标签：javascript, algorithm, drawing, html5-canvas, tessellation

我正在为个人项目实现一个类似地图的界面，使用带有 HTML5 画布的 Javascript，我主要是在寻找关于如何正确细分所有 2D 多边形边的想法，每边具有等长的矩形。在进一步解释之前，这里是现有界面的两个实际截图：

[![截屏](../Images/59357983fceb746388f9fbb6b3a7c7d9.png)](https://i.stack.imgur.com/Aus2u.jpg)
[（来源：[mavrosxristoforos.com](http://mavrosxristoforos.com/images/screenshot.jpg)）]

如您所见，每个多边形边上有“n”个矩形，长度等于“边的长度”除以“n”，宽度等于它们的长度除以 2。矩形的数量是用户设置的。我拥有的实际数据是：多边形角坐标和矩形数量。侧面始终按顺时针方向填充。

目前，如何绘制它们的伪代码如下所示：

```
RECT_LENGTH = polygon_side_length / count_of_rectangles;
i = first_corner_of_the_polygon_side;
for ( j = 0; j < count_of_rectangles; j++) {
    move pen to i;
    point1 = i + RECT_LENGTH * right_angle_on_polygon_side_slope;
    line to point1;
    point2 = point1 - RECT_LENGTH * polygon_side_slope;
    line to point2;
    i += RECT_LENGTH * polygon_side_slope;
    line to i;
} 
```

从代码中可以很明显地看出，除了多边形边坡之外，它没有考虑任何其他内容，它是与水平轴的角度，以 -π (pi) 到 +π 为单位，由两个角坐标计算得出. 这些截图主要存在三个外观问题：

1.  在上面的屏幕截图中，左侧的大矩形超出了多边形的一侧。
2.  在上面的屏幕截图中，在右下角，矩形重叠（也在其他角上，但那个特定的看起来完全不自然）。
3.  在下面的屏幕截图中，在上角，两边的矩形都脱离了原始多边形。

作为一种解决方案，我认为我可以搜索当前绘制的线和多边形边以及前一个矩形之间的线段交点，但这感觉不对，而且执行起来会很慢。

如前所述，欢迎任何想法。我不是以英语为母语的人，所以请随时纠正我的英语。

感谢您的时间！

编辑：如果最后一个矩形变成梯形，我不介意，只是为了完全覆盖多边形边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T19:30:38.913

由于您使用的是矩形，因此您可以覆盖直角区域。所以你必须留下一些未被覆盖的多边形区域。您必须像这样减少边缘的实际长度：

![在此处输入图像描述](../Images/28ae317ba2bd3dd1f276da27613cfe2c.png)

在这个解决方案中，您可以减少边缘的长度，只是形成符合锐角的头部。以`Alpha`拐角内角为 ，减少量为`Rectangle.Width / Tan(Alpha)`。它将矩形保留在多边形内，但不能解决重叠问题。

为了防止矩形重叠，您必须留下更多未覆盖的区域：

![在此处输入图像描述](../Images/9db408099618c835ffc06fa06feb57de.png)

为此，您必须将两个头部的边缘长度减少`Rectangle.Width / Tan(Alpha / 2)`（`Alpha`每个角可能不同）。

但所有这些都无济于事，因为矩形的宽度是未知的。实际上矩形的宽度是由边长本身来计算的，我们是用它来计算边长的！！

所以我们这里有一个数学问题：

已知：

```
L1: actual length of edge
N: number of divisions
Alpha & Beta: half of inner angle of head corners 
```

未知：

```
L2: reduced length of edge
W: width of rectangles 
```

我们可以形成两个方程：

```
(1): L2 = 2 * N * W
(2): L2 = L1 - (W / Tan(Alpha) - (W / Tan(Beta) 
```

通过求解它们，我们可以找到 W：

```
W = L1 / (2 * N + Cot(Alpha) + Cot(Beta)) 
```

所有这些在凸多边形中都是正确的。如果边缘的任一头角是凹的，您可以用 替换它们的内角，`Pi / 2`以防止从这些角减少。请重新检查一切！考虑到你可爱的 UI，我想你可以处理三角函数计算来找到矩形的起点和终点。

# html - 使用 iframe 将 CSS 媒体查询应用于块元素

> ID：15047605
> 
> 赞同：8
> 
> 时间：2013-02-24T01:09:20.913
> 
> 标签：html, css, seo, media-queries

我只是坐在那里做一些网页设计，并在想“嘿，如果我们可以将 CSS 媒体查询应用于块元素（即 , 等）不是很好`div`吗`section`？”

说真的，如果我们能够拥有这个功能，我们可以做出一些非常令人惊叹的流畅布局。在这篇文章中，我将使用一个简单的社交插件，我可以将它实现到我的任何页面上的侧边栏，它可以根据它的父 div 大小进行流动。这很方便，因此我可以调整我的小部件的大小，无论它是实现为 500px 列还是 300px 列，因此我不必为每个实现它的布局编写特定的样式表。

# 该设计

```
 >=500px                          <500px
 _______________________________       ____________________
|                               |     |                    |
 ____________________    ______               ______
|                    |  |      |             |      |
|  LIKE ON FACEBOOK  |  | ICON |             | ICON |
|____________________|  |______|             |______|
 ____________________    ______        ____________________  
|                    |  |      |      |                    |
|  FOLLOW ON TWITTER |  | ICON |      |  LIKE ON FACEBOOK  |
|____________________|  |______|      |____________________|

                                              ______
                                             |      |
                                             | ICON |
                                             |______|
                                       ____________________  
                                      |                    |
                                      |  FOLLOW ON TWITTER |
                                      |____________________| 
```

# HTML 标记

```
<div class="widget clearfix">
  <div class="social">
    <div class="social-right">ICON</div>
    <div class="social-left">Like on Facebook</div>
  </div>
  <div class="social">
    <div class="social-right">ICON</div>
    <div class="social-left">Follow on Twitter</div>
  </div>
</div> 
```

# CSS

现在为 css 元素媒体查询部分。这不是有效的 css，但这是我想要实现的。本质上只是一个基于父元素而不是整个浏览器宽度的 CSS 媒体查询：

```
.widget {clear:both;}
[class*=social-] {text-align:center;}
.widget(min-width:500px) {
  .social-left {overflow:hidden;}
  .social-right {float:right;}
} 
```

这将带来无限的好处，并使创建要在多个页面上实现的页面块变得轻而易举。既然我已经让你们都加快了这个问题的速度，那么我的问题来了：

## 通过 iframe 实现这一点是一个合理的解决方案吗？

我的意思是：

*   语义正确
*   对 SEO 无害

iframe 能够拥有自己的样式表，并且 css 媒体查询基于 iframe 尺寸，而不是浏览器尺寸。

# 我的想法

## 语义

*   由于 iframe 元素存在于 HTML5 中，甚至还添加了属性，因此我认为 iframe 标记不会很快被弃用。
*   无缝标签将真正有助于使其成为可行的解决方案，因为样式将从父文档继承。现在我们需要将这些样式重新包含（或注入）到页面中。
*   iframe 也可以在不触发整个页面重新加载的情况下重新加载，这意味着如果没有 XHR，自动更新小部件将非常容易。

## 搜索引擎优化

*   我很确定谷歌并不讨厌使用 iframe 的人，但我可能错了。
*   由于实际的页面信息不会在 iframe 中并且只有这些打包的块，我认为它们不会对 SEO 造成损害，因为它们中的内容不是实际页面内容的一部分。
*   由于侧边栏对整个页面内容没有影响，因此 iframe 可以在运行时动态创建。这可能是实现它的最佳方式，但我想听听您的想法。

## 缺点

*   每当向页面应用新布局时，都需要 Javascript 将父 iframe 的大小调整为页面内容。

在回答之前，请知道除了某些 3rd 方应用程序使用 iframe 之外，我从未提倡将 iframe 用于任何其他用途，但现在看这个，我看不出有什么理由不使用它们。我知道使用 css 元素媒体查询将是完美的，但我认为不会很快实现。

我希望听到你们所有人的更多消息，因为我绝不是 SEO 专家，也不经常（实际上，我从不）使用 iframe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T05:10:52.413

说到SEO，**内容为王**。

当搜索引擎抓取您的网站时，会记录 iFrame（及其来源），但它们很可能不会与页面一起被抓取。如果您拥有绝对重要的内容，则将其归因于该特定页面，请将其置于 iFrame 之外。

iFrame 的内容仍然会被抓取，但它的内容不会与抓取工具在页面上找到的信息混为一谈；这将是它自己的实体。它还将将该内容归因于提供内容的站点或页面。

另外，不要让 HTML5 中引入的无缝属性欺骗了您。它不会改变 iFrame 的工作方式，它只会改变它的呈现方式。

归结为**数据有多重要？**如果您只是想出于风格目的使用 iFrame 来呈现社交媒体的链接，正如您在示例中概述的那样，您应该能够在没有负面影响的情况下使用 iFrame。

但是，如果您出于文体目的使用 iFrame 并且有**需要**归因于您所在页面的*重要*内容，我会找到另一种呈现内容的方式。

 **因此，在您的示例中，将 iFrame 专门用于社交媒体链接，我会说使用 iFrame 来获得媒体查询的好处是可以接受的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-02T09:27:16.403

[CSS 容器查询 (caniuse.com)](https://caniuse.com/css-container-queries)

> 将样式应用于指定容器元素而不是整个页面的实验性媒体查询。当前使用包含属性和@container at-rule 实现。

目前只能通过`chrome:flags`Canary 获得。

> 容器查询使我们不再只考虑视口，而是允许任何组件或元素响应定义的容器宽度。因此，尽管您仍然可以将响应式网格用于整体页面布局，但该网格中的组件可以通过查询其容器来定义自己的行为变化。然后，它可以根据它是显示在窄容器还是宽容器中来调整其样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:16:25.400

不幸的是，尚未验证的更好的解决方案是使用具有范围样式的媒体查询。 **来源**：[http ://davidwalsh.name/scoped-css](http://davidwalsh.name/scoped-css)**

# algorithm - Matlab 中的快速排序调试

> ID：15047606
> 
> 赞同：2
> 
> 时间：2013-02-24T01:09:26.630
> 
> 标签：algorithm, matlab, sorting, quicksort

我需要帮助调试快速排序。当我调试时，它实际上对数组进行了正确排序，但在最后几个步骤中，它最终会进行不必要的交换并最终返回一个未排序的数组。我花了很长时间试图找出导致它的原因，但我没有取得任何进展。

我选择了分区作为第一个元素（我知道这不是最佳的，但我只是想了解 QS）。

**脚本：**

```
A = [3 6 2 5 1 7 4];
rightIndex = length(A);
E = QuickSort(A,1,rightIndex); 
```

**快速排序：**

```
function [pvt, B] = QuickSort(A,left,right)

if left < right
    [B, pvt] = PartnPivot1(A, left, right); %chosen pivot
    QuickSort(B, left, pvt-1); 
    QuickSort(B, pvt+1, right);
end 
```

**分割：**

```
function [sortedSubArray, pivot] = PartnPivot1(subArray,leftIndex,rightIndex)

%% Initializations
S = subArray;
left = leftIndex;
right = rightIndex;

P = S(left); %pivot
i = left+1;

%% Partition
for j = i:right
    if S(j) < P 
            temp1 = S(j); %
            temp2 = S(i); % swap S(i) with S(j) 
            S(j) = temp2; %
            S(i) = temp1; %
            i = i+1; %increment i only when swap occurs
    end
end
swap1 = S(left); %
swap2 = S(i-1);  % final swap 
S(left) = swap2; %
S(i-1) = swap1;  %

sortedSubArray = S;
pivot = P; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:41:51.550

对 QuickSort 的递归调用需要将输出分配给一些变量，否则排序后的数组永远不会被传回。我也认为您不需要返回枢轴。

我在浏览器中输入而不是在 Matlab 中进行测试，但我认为这会做到......

```
function A = QuickSort(A,left,right)

if left < right
    [A, pvt] = PartnPivot1(A, left, right); %chosen pivot
    A = QuickSort(A, left, pvt-1); 
    A = QuickSort(A, pvt+1, right);
end 
```

# c - 迷宫死角过滤器检查

> ID：15047608
> 
> 赞同：0
> 
> 时间：2013-02-24T01:09:41.243
> 
> 标签：c, filter, solver, maze

我创建了一个通过 ASCII 迷宫运行的程序，但我不想为以下情况创建过滤器：

```
 ####
    ..X#
    #### 
```

“#”表示墙。
“X”表示位置。
'。' 是留下的“面包屑”。

我也可以这样，因为它位于矩阵中，如下所示：

```
 ####     [(x-1, y-1)][(x-1, y)][(x-1, y+1)]
    ..X# --> [(x, y - 1)][( x, y )][(x, y + 1)]
    ####     [(x-1, y-1)][(x+1, y)][(x+1, y+1)] 
```

有 4 种可能的情况，所以我在 C 中做了一个 else if 语句，

```
else if(mazePointer->matrix[curX-1][curY] == '#' &&
        mazePointer->matrix[curX][curY+1] == '#' &&
        mazePointer->matrix[curX+1][curY] == '#'){
        walkPointer->newX = curX;
        walkPointer->newY = curY-1;

        mazePointer->matrix[curX][curY] = '+';

        return 1;   
} 
```

var curX & curY 是当时的矩阵坐标。

此示例适合最上面给定示例的矩阵坐标。在这种情况下，我想做的是向后退 1 个空格，然后在我退一个空格之前在我的位置上加上一个“+”。这将保证我不会遇到同样的情况，因为不可能在一个用“+”“标记”的地方结束。我只能降落在空的或充满“。”的地方。

但是知道了奇怪的事情，在我看来很奇怪，因为这个“过滤器”只会跳过当前的情况。这些陈述不会是真的。谁能解释我在搞砸什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:26:14.350

您正在使用“&”，它是一个按位运算符。您想改用“&&”布尔“AND”运算符。

# python - 调整 DNSLIB 上的 TTL 创建的 DNS 响应 (Python)

> ID：15047610
> 
> 赞同：0
> 
> 时间：2013-02-24T01:09:53.450
> 
> 标签：python, dns, ttl

作为安全类作业的一部分，我们正在模拟对我们自己创建的 dns 服务器的 kaminski 攻击。我正在使用 Python 的 DNSLIB 来生成伪造的 DNS 响应。唯一的问题是它看起来像默认的 ttl 是 0 这在目标是毒化缓存时没有帮助。我怀疑你可以指定一个不同的 ttl 但找不到如何去做。下面是创建 dns 响应数据包的示例代码（取自 dnslib 站点）：

```
>>> d = DNSRecord(DNSHeader(qr=1,aa=1,ra=1), q=DNSQuestion("abc.com"), a=RR("abc.com",rdata=A("1.2.3.4")))
>>> print d 
```

任何想法如何更改上述代码以指定不同的 ttl？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T14:13:30.603

`RR`接受`ttl`参数，请参阅来源[https://github.com/paulchakravarti/dnslib/blob/master/dnslib/dns.py#L444](https://github.com/paulchakravarti/dnslib/blob/master/dnslib/dns.py#L444)

# c - 输入信息时出错

> ID：15047612
> 
> 赞同：0
> 
> 时间：2013-02-24T01:10:44.663
> 
> 标签：c, visual-studio-2010

我在为我的 C 类编写程序时继续收到错误消息。我目前是一名学生，所以任何帮助都会很有用。我正在处理的当前程序要求我们输出成绩报告，但我在输入信息时收到错误消息。当我被提示输入信息时，我不断收到此错误：http: [//i.imgur.com/YuiNI88.png](http://i.imgur.com/YuiNI88.png?1) ? 1 [1] 我不确定如何修复它。有人告诉我这与内存存储有关。我试过谷歌搜索，但没有得到任何帮助。这是我的代码：

```
include <stdio.h>
include <stdlib.h>

int main (void) { char Name[40]; char cid1[6]="", cid2[6]="", cid3[6]="", cid4[6]="", 
cid5[6]="", cid6[6]=""; 

char Description1[21]="", Description2[21]="", Description3[21]="",Description4[21]="", Description5[21]="", Description6[21]=""; 
int hrs1 = 0, hrs2=0, hrs3=0, hrs4=0, hrs5=0, hrs6=0, GPA=0, TotalHrs=0, TotalPoints=0;        char grade1[2]="",grade2[2]="",grade3[2]="",grade4[2]="",grade5[2]="",grade6[2]="";

printf("Enter Students Name ");
fgets(Name, 20, stdin);

printf("Enter Class ID ");
fgets(cid1, 6, stdin);
fflush(stdin);
printf("Enter Class Description ");
fgets(Description1, 20, stdin);
printf("Enter Class Hours ");
scanf("%d", &hrs1);
fflush(stdin);
printf("Enter Class Grade ");
scanf("%c", &grade1);

printf("Enter Second Class ID ");
fgets(cid2, 6, stdin);
fflush(stdin);
printf("Enter Class Description ");
fgets(Description2, 20, stdin);
printf("Enter Class Hours ");
scanf("%d", &hrs2);
fflush(stdin);
printf("Enter Class Grade ");
scanf("%c", &grade2);

printf("Enter Third Class ID ");
fgets(cid3, 6, stdin);
fflush(stdin);
printf("Enter Class Description ");
fgets(Description3, 20, stdin);
printf("Enter Class Hours ");
scanf("%d", &hrs3);
fflush(stdin);
printf("Enter Class Grade ");
scanf("%c", &grade3);

TotalHrs = (hrs1 + hrs2+hrs3+hrs4+hrs5+hrs6);
if  (TotalHrs > 24)
printf("You're taking too many classes");
else if (TotalHrs < 1) 
printf("You're not taking enough classes! Enroll in more!");

printf("%d", TotalHrs);

system("pause");

return 0; } 
```

该程序不完整，因此任何帮助都会很棒！欢迎提供有关缩短或任何内容的提示。

# javascript - 文本区域中的实时模式匹配以触发事件

> ID：15047618
> 
> 赞同：0
> 
> 时间：2013-02-24T01:11:39.547
> 
> 标签：javascript, events, textarea, pattern-matching

如果您有一个 textarea，并且您想在输入预先确定的 2 个字符串后执行 javascript 函数，您将如何监视该字符串？

需要注意的是，在连续按键时可能不会输入 2 个字符串。

例子：

您想在输入 2 个字符串“<<”后触发事件。因此，您正在键入并输入“<”，然后单击文本区域中的其他位置并更改一些文本，然后返回到您离开的位置并在第一个字符旁边放置第二个“<”字符。有两个相邻的“<<”字符的事实应该触发一个可以被 javascript 捕获的事件。您将如何监控和创建该事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:23:02.827

您可以检查整个`textarea`内容onkeyup。我怀疑 textarea 的内容是否会变得如此之大以至于令人望而却步。

```
document.getElementById('textarea-id').addEventListener('keyup', function () {
    this.value = this.value.replace('>>', '<<');
}); 
```

# jquery - jQuery自动完成默认

> ID：15047619
> 
> 赞同：1
> 
> 时间：2013-02-24T01:11:51.777
> 
> 标签：jquery, jquery-ui, jquery-plugins, autocomplete

有没有办法向自动完成插件添加默认选项，即使单词与 JSON 结果不匹配，也会在所有情况下显示？

这就是我想要做的：

每当您为搜索输入编写任何内容时，您都应该将“hledat vyraz {value}”作为第一个建议选项 - 表示执行经典搜索，因为我们可能有很多关于 Adriana Lima 的文章，而自动完成功能只显示了一些。所以我在 JSON 中添加了这个选项。

它正常工作，直到我写“adriana”，关键字后的空格导致自动完成不会显示“hledat vyraz adriana”。

有什么方法可以强制添加默认的第一个选项，它将一直显示？

[http://www.mdls.cz](http://www.mdls.cz)上的实时示例。

图片：

![在此处输入图像描述](../Images/6e5ae3ec8350f2b78bac4aa2a7d4797e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T20:18:57.573

您可以编写一个自定义`source`函数，该函数始终包含您想要的项目：

```
var arrayOfItems = [{title:"Something about Adriana"},
    {title:"Something about Adriana 2"},{title:"Something about Adriana 3"},
    {title:"Something else"}];

$("#input").autocomplete({
    source: function( request, response ) {
        var itemsMatched = [];
        itemsMatched.push({value: "Classic search for '" + request.term}+"'")

        $.each(arrayOfItems, function(i, item) {
            if(item.title.indexOf(request.term)>=0)
                itemsMatched.push({value: item.title});
        });

        response(itemsMatched);
    }
}); 
```

[http://jsfiddle.net/pvp7x8ju/1/](http://jsfiddle.net/pvp7x8ju/1/)

# php - 检查行mysql是否存在于php

> ID：15047621
> 
> 赞同：0
> 
> 时间：2013-02-24T01:12:00.233
> 
> 标签：php, mysql, synology

我正在尝试使用 php 检查我的数据库中是否存在一行，问题是我无法理解我错了什么，这是代码：

```
while ($db_field = mysql_fetch_assoc($result)) 
    {
        print "||" . $db_field['id_n']."||".$db_field['network_name']."||".$db_field['country']."||".$db_field['country_Name']."||"."<BR>";

        $query = "SELECT * FROM countries WHERE english_name='$db_field['country_Name']'";
        $doquery = mysql_query($query) or die(mysql_error());   
        if (mysql_num_rows($doquery))
        {
            print 'Found';
        } else {
             print 'Not Found';
        }

    } 
```

如果我写这些我没有收到输出，也没有错误，我尝试在我的 php 开头或中间的代码中插入一些打印但没有显示打印，所以我发现错误在这一行：

```
 $query = "SELECT * FROM countries WHERE english_name='$db_field['country_Name']'"; 
```

我的问题是，错误是什么，为什么要显示任何内容，我希望它显示错误或其他内容，或者只是打印我在代码中输入的日志但什么也没有，似乎 php 是空白的，任何人都可以解释请问我这些？

# textmate - 在 TextMate 片段中，我如何提取当前的类和/或方法名称？

> ID：15047626
> 
> 赞同：0
> 
> 时间：2013-02-24T01:12:21.827
> 
> 标签：textmate, code-snippets

就像我可以使用**$TM_SELECTED_TEXT**将当前选择的文本拉入一个片段一样，有什么方法可以从我的代码中检索文本，例如包含当前插入符号位置的方法名称或类名称？

这对于快速创建有用的日志消息非常有用。

所以，如果我有一些 JavaScript 代码（用 | 表示光标/插入符号的位置）：

```
function doSomething() {
   somethingElse();
   |
} 
```

我希望能够通过片段吐出**doSomething 。**

就像是，

```
 console.log($TM_CURRENT_METHOD_NAME + "() $1"); 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T03:01:00.313

在[Ember 包的分支中](https://github.com/lastobelus/Ember.tmbundle)，我将此脚本放入`Support/bin/camelize_filename`：

```
#!/usr/bin/env ruby
c=%w{config helpers mixins controllers models routes templates views}.join('|')
r = %r{.*/(?:#{c})/(.*)\.js}
puts ENV['TM_FILEPATH'].sub(%r{.*/(?:#{c})/(.*)\.js},'\1').
  gsub(/(?:_|(\/)|^)([a-z\d]*)/){|s| "#{$1}#{$2.capitalize}" }.gsub('/','') 
```

然后我在片段中使用它：

```
console.groupCollapsed("`camelize_filename`#model"); 
```

您可以通过调整正则表达式以匹配哪些目录段属于类的名称空间而哪些不属于其他框架，并更改 gsub('/','') 如果您感兴趣的语言使用名称空间分隔符，例如 ': :'。

# filter - Google Docs 电子表格显示符合条件的行中的数据

> ID：15047642
> 
> 赞同：8
> 
> 时间：2013-02-24T01:15:38.780
> 
> 标签：filter, spreadsheet, google-docs, contains

基本上，我希望表 1 从表 2 中提取数据，重命名为“战利品”。但是，从“战利品”中提取的数据只能来自特定列，并且同一行中的其他两个单元格必须包含工作表 1 中的特定数据。

示例：“战利品”具有以下重要的 B、C 和 D 列：字符、项目类型和数量

我希望工作表 1 中的单元格包含来自“Loot”的 Quantity(D) 值，但前提是与要提取的数据共享同一行的 Character(B) 和 Item Type(C) 单元格与表 1 上的两个特定单元格。

这与我没有成功的情况一样接近。

```
=QUERY('Loot'!D2:D;"select * where (B matches A14 and C matches A8)";1) 
```

这是电子表格的临时链接。 [https://docs.google.com/spreadsheet/ccc?key=0AgUUnVW8yWhXdHhsZnpac29LdjdhTG9adFg4NnhwVHc&usp=sharing](https://docs.google.com/spreadsheet/ccc?key=0AgUUnVW8yWhXdHhsZnpac29LdjdhTG9adFg4NnhwVHc&usp=sharing)

表 1 是 Veldspar

第 2 页是战利品

在朋友的帮助下，我能走到这一步……

```
=QUERY('Loot'!B2:D100,"select (D) where B = '" & A14 & "' and C = '" & A8 &"'") 
```

问题是，如果有多个结果，而不是将其相加，它只是在其下方的每个单元格中显示每个结果

编辑

修复了所有问题并找到了另一个问题。

```
=SUM(QUERY('Loot'!B$2:D,"select (D) where B matches '"& $A14 &"' and C matches '" & A$8 &"'")) 
```

现在的问题是，如果没有从中提取数据的标准，则单元格会产生 #N/A 错误，这会导致引用其数据的所有其他单元格无法计算其数据。

编辑..

到目前为止一切顺利，这是我用来解决问题的方法

```
=IFERROR(SUM(QUERY('Loot'!B$2:D,"select (D) where B matches '"& $A14 &"' and C matches '" & A$8 &"'")),"0") 
```

编辑..

最后一个编辑技巧。我的问题已经解决了。我将链接留给所有人，只是更改了位于战利品“工作表”中的所有名称以隐藏名称。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T19:04:38.030

回答我自己的问题:)

```
=IFERROR(SUM(QUERY('Loot'!B$2:D,"select (D) where B matches '"& $A14 &"' and C matches '" & A$8 &"'")),"0") 
```

# c++ - 引用多级指针的更好方法？

> ID：15047644
> 
> 赞同：0
> 
> 时间：2013-02-24T01:15:58.453
> 
> 标签：c++, visual-c++, pointers, memory, visual-studio-2012

至于现在，我正在尝试为不存在此类游戏的游戏制作基本的“飞行模式”。为此，我需要操作游戏内存，这意味着必须使用指针来访问内存（通过 DLL）。

至于现在我使用这个代码：

```
#define AddVar(Type,Name,Address) Type& Name = *reinterpret_cast<Type*>(Address)
AddVar(unsigned int,gameBaseAddress,0x0089CDA8);//base address

//*Reveal* pointer, dunno how to name this
#define RevPointer(addr,type) (*(type *)(addr))

void FrameTick(IDirect3DDevice9 * device, HWND wnd)
{
    DirectXFont::Access(0)->Print(0.0,0.0,0xFFFFFFFF,"{FFFF0000}N{FF00FF00}F{FF0000FF}S {FFFFFF00}MOD {FF00FFFF}1.0",true);
    if(gameBaseAddress)//check if the game has loaded <accessing the VALUE at gameBaseAddress)
    {
            //lvl 1 ptr
        unsigned int BaseAddr = RevPointer(gameBaseAddress+0x20,unsigned int);//base + pointer offset 1 (+0x20)

            //lvl2 ptr
        BaseAddr += 0x20;//(base + offset 1 (+0x20)) + pointer offset 2 (+0x20) - X pos
        unsigned int PosXAddr = RevPointer(&BaseAddr,unsigned int);//got this line of code by trial and error, don't know how this magicly works
        BaseAddr += 0x4;//y pos is 4 bytes further
        unsigned int PosYAddr = RevPointer(&BaseAddr,unsigned int);
        BaseAddr += 0x4;//z the same
        unsigned int PosZAddr = RevPointer(&BaseAddr,unsigned int);

        float *PosX = (float*)PosXAddr;
        float *PosY = (float*)PosYAddr;
        float *PosZ = (float*)PosZAddr;
        if(PosXAddr && PosXAddr < 0xAAAA0000)//check if pointer is valid
        {
            DirectXFont::Access(0)->Print(0.0,60.0,0xFFFFFFFF,string_format("%.2f %.2f %.2f",*PosX,*PosY,*PosZ).c_str(),true);//works
        }
    }
} 
```

通过调试游戏，我发现所有指针都是..好吧..多级指针：

((((base_adderss + 0xOFFSET1) + 0xOFFSET2) + 0xOFFSET3)...

但是这样一来，管理所有这些地址和偏移量将变得非常不方便。

我在这段代码中所做的是访问游戏的基地址，将第一个偏移量添加到指针，然后从该指针我应用 XYZ 偏移量（+0x20，+0x24，+0x28）以获得 XYZ 位置从内存中想要对象。

这段代码看起来已经很难看。有没有更好的方法来完成我想做的事情？

* * *

谢谢大家的意见。如果有人想要我拥有的当前代码：

```
#define AddVar(Type,Name,Address) Type& Name = *reinterpret_cast<Type*>(Address)
AddVar(unsigned int,PositionBaseAddress,0x0089CDA8);//base address

struct Point { float x, y, z; };

void FrameTick(IDirect3DDevice9 * device, HWND wnd)
{
    DirectXFont::Access(0)->Print(0.0,0.0,0xFFFFFFFF,"{FFFF0000}N{FF00FF00}F{FF0000FF}S {FFFFFF00}MOD {FF00FFFF}1.0",true);
    if(PositionBaseAddress)
    {
        auto BaseAddr = *(unsigned int*)(PositionBaseAddress + 0x20);
        if(IsBadReadPtr(&BaseAddr,0x04) != 0)
            return;
        auto& p = *(Point*)(BaseAddr + 0x20);
        auto& v = *(Point*)(BaseAddr + 0x70);
        if(IsBadReadPtr(&p,0x04) != 0)
            return;
        DirectXFont::Access(0)->Print(0.0,45.0,0xFFFFFFFF,string_format("Position: %.2f %.2f %.2f",p.x,p.y,p.z).c_str(),true);
        DirectXFont::Access(0)->Print(0.0,60.0,0xFFFFFFFF,string_format("Velocity: %.2f %.2f %.2f",v.x,v.y,v.z).c_str(),true);
    }
}

/*
Position.X: (0x0089CDA8 + 0x20) + 0x20
Position.Y: (0x0089CDA8 + 0x20) + 0x24
Position.Z: (0x0089CDA8 + 0x20) + 0x28
Velocity.X: (0x0089CDA8 + 0x20) + 0x70
Velocity.Y: (0x0089CDA8 + 0x20) + 0x74
Velocity.Z: (0x0089CDA8 + 0x20) + 0x78
*/ 
```

然后我意识到我可以巧妙地利用这些结构......

我做了这个代码：

```
#define AddVar(Type,Name,Address) Type& Name = *reinterpret_cast<Type*>(Address)
AddVar(unsigned int,PositionBaseAddress,0x0089CDA8);//base address

struct Point { float x, y, z; };

struct VehicleInfo
{
    Point Pos;
    int unknown[0x11];
    Point Velocity;
};

void FrameTick(IDirect3DDevice9 * device, HWND wnd)
{
    DirectXFont::Access(0)->Print(0.0,0.0,0xFFFFFFFF,"{FFFF0000}N{FF00FF00}F{FF0000FF}S {FFFFFF00}MOD {FF00FFFF}1.0",true);
    if(PositionBaseAddress)
    {
        auto BaseAddr = *(unsigned int*)(PositionBaseAddress + 0x20);
        if(IsBadReadPtr(&BaseAddr,0x04) != 0)
            return;
        auto& info = *(VehicleInfo*)(BaseAddr + 0x20);
        if(IsBadReadPtr(&info,0x04) != 0)
            return;
        DirectXFont::Access(0)->Print(0.0,45.0,0xFFFFFFFF,string_format("Position: %.2f %.2f %.2f",info.Pos.x,info.Pos.y,info.Pos.z).c_str(),true);
        DirectXFont::Access(0)->Print(0.0,60.0,0xFFFFFFFF,string_format("Velocity: %.2f %.2f %.2f",info.Velocity.x,info.Velocity.y,info.Velocity.z).c_str(),true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:03:46.380

让我们从简化算术开始：

```
unsigned int BaseAddr = *(unsigned int*)(gameBaseAddress + 0x20) + 0x20;

float* PosX = (float*)(BaseAddr);
float* PosY = (float*)(BaseAddr + 4);
float* PosZ = (float*)(BaseAddr + 8);

…string_format(…*PosX,*PosY,*PosZ)… 
```

（请注意，这会跳过这`RevPointer(&BaseAddr,unsigned int)`一步。请参阅我对原始问题的评论了解原因。）

由此，我们可以进一步简化：

```
struct Point { float x, y, z; };
auto BaseAddr = *(unsigned int*)(gameBaseAddress + 0x20);
auto& p = *(Point*)(BaseAddr + 0x20);
…string_format(…p.x,p.y,p.z)… 
```

我不会打扰`AddVar`and`RevPointer`宏。IMO，它们只会使事情变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:53:01.727

对于遍历标题，我发现使用`auto`自定义偏移类型模板（带有结果指针的类型）和`operator+`带有指针和所述偏移类型的组合是有用/简洁的。

我认为这至少会改善您当前的宏观计划

但我不确定是否真的有一种好方法可以让代码*干净*整洁。在处理具有偏移量的结构时，也许必须接受一些肮脏。

* * *

啊，我在一个文本文件中找到了我使用它的代码，以获得较早的 SO 答案……但无法找到该项目。但这里是代码，展示了如何定义这种偏移类型和运算符，以及它在“真实”用法中的外观：

```
#include <assert.h>         // assert
#include <stddef.h>         // ptrdiff_t
#include <sstream>
using std::ostringstream;

#undef UNICODE
#define UNICODE
#include <windows.h>

template< class Result, class SomeType >
Result as( SomeType const p ) { return reinterpret_cast<Result>( p ); }

template< class Type >
class OffsetTo
{
private:
    ptrdiff_t offset_;
public:
    ptrdiff_t asInteger() const { return offset_; }
    explicit OffsetTo( ptrdiff_t const offset ): offset_( offset ) {}
};

template< class ResultPointee, class SourcePointee >
ResultPointee* operator+(
    SourcePointee* const            p,
    OffsetTo<ResultPointee> const   offset
    )
{
    return as<ResultPointee*>( as<char const*>( p ) + offset.asInteger() );
}

int main()
{
    auto const pImage =
        as<IMAGE_DOS_HEADER const*>( ::GetModuleHandle( nullptr ) );
    assert( pImage->e_magic == IMAGE_DOS_SIGNATURE );

    auto const pNTHeaders =
        pImage + OffsetTo<IMAGE_NT_HEADERS const>( pImage->e_lfanew );
    assert( pNTHeaders->Signature == IMAGE_NT_SIGNATURE );

    auto const& importDir =
        pNTHeaders->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_IMPORT];

    auto const pImportDescriptors = pImage + OffsetTo<IMAGE_IMPORT_DESCRIPTOR const>(
        importDir.VirtualAddress //+ importSectionHeader.PointerToRawData
        );

    ostringstream stream;
    stream << "I'm loaded at " << pImage << ", and I'm using...\n";
    for( int i = 0;  pImportDescriptors[i].Name != 0;  ++i )
    {
        auto const pModuleName = pImage + OffsetTo<char const>( pImportDescriptors[i].Name );

        DWORD const offsetNameTable = pImportDescriptors[i].OriginalFirstThunk;
        DWORD const offsetAddressTable = pImportDescriptors[i].FirstThunk;  // The module "IAT"

        auto const pNameTable = pImage + OffsetTo<IMAGE_THUNK_DATA const>( offsetNameTable );
        auto const pAddressTable = pImage + OffsetTo<IMAGE_THUNK_DATA const>( offsetAddressTable );

        stream << "\n* '" << pModuleName << "'";
        stream << " with IAT at " << pAddressTable << "\n";
        stream << "\t";
        for( int j = 0; pNameTable[j].u1.AddressOfData != 0; ++j )
        {
            auto const pFuncName =
                pImage + OffsetTo<char const>( 2 + pNameTable[j].u1.AddressOfData );
            stream << pFuncName << " ";
        }
        stream << "\n";
    }

    MessageBoxA(
        0,
        stream.str().c_str(),
        "FYI:",
        MB_ICONINFORMATION | MB_SETFOREGROUND
        );
} 
```

# python - python中的yield +递归让我很恼火

> ID：15047645
> 
> 赞同：0
> 
> 时间：2013-02-24T01:16:06.580
> 
> 标签：python, recursion, yield

让我理解什么时候yield和recursion同时发生是很复杂的。我想用我的代码遍历文件目录：

```
import os
def doc_iter(fpath):
  if os.path.isdir(fpath):
    for child in os.listdir(fpath):
      child=os.path.join(fpath,child)
      print  "this is ",child
      for cn in doc_iter(child):
        print "i am here1"
        yield cn
        print "yiedl1",cn
  else:
    print "i am here2"
    yield fpath
    print "yield2",fpath 
```

有一个 目录，里面有`test`三个子目录目录`test1,test2,test3`里面有两个文件 目录里面有两个文件 目录里面有两个文件
`test1``test11,test12`
`test2``test21,test22`
`test3``test31,test32`

```
 >>> a.next()
this is  /home/debian/test/test2
this is  /home/debian/test/test2/test22
i am here2
i am here1
i am here1
'/home/debian/test/test2/test22'
>>> a.next()
yiedl1 /home/debian/test/test2/test22
yiedl1 /home/debian/test/test2/test22
yield2 /home/debian/test/test2/test22
this is  /home/debian/test/test2/test21
i am here2
i am here1
i am here1
'/home/debian/test/test2/test21'
>>> a.next()
yiedl1 /home/debian/test/test2/test21
yiedl1 /home/debian/test/test2/test21
yield2 /home/debian/test/test2/test21
this is  /home/debian/test/test3
this is  /home/debian/test/test3/test32
i am here2
i am here1
i am here1
'/home/debian/test/test3/test32'
>>> a.next()
yiedl1 /home/debian/test/test3/test32
yiedl1 /home/debian/test/test3/test32
yield2 /home/debian/test/test3/test32
this is  /home/debian/test/test3/test31
i am here2
i am here1
i am here1
'/home/debian/test/test3/test31'
>>> a.next()
yiedl1 /home/debian/test/test3/test31
yiedl1 /home/debian/test/test3/test31
yield2 /home/debian/test/test3/test31
this is  /home/debian/test/test1
this is  /home/debian/test/test1/test11
i am here2
i am here1
i am here1
'/home/debian/test/test1/test11'
>>> a.next()
yiedl1 /home/debian/test/test1/test11
yiedl1 /home/debian/test/test1/test11
yield2 /home/debian/test/test1/test11
this is  /home/debian/test/test1/test12
i am here2
i am here1
i am here1
'/home/debian/test/test1/test12'
>>> a.next()
yiedl1 /home/debian/test/test1/test12
yiedl1 /home/debian/test/test1/test12
yield2 /home/debian/test/test1/test12
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
StopIteration 
```

输出让我很恼火，
1.产量1中的打印等于产量2？
2.至少有两个yield语句要运行，教科书上说`when run into yield ,the program will be halt, the next next() make it continue`？？3.我们分析一下第一个next()的输出，为什么yield cn`后面有两个 `i am here1`s ？ 5.如何详细绘制计算树？6.如果你写一个函数来遍历目录，`i am here2" 4.what is the function of`

```
bottom=[]
import os 
def doc_iter(fpath):
    if os.path.isdir(fpath):
        for child in os.listdir(fpath):
            child=os.path.join(fpath,child)
            doc_iter(child)
    else:
        bottom.append(fpath)
    return bottom 
```

输出是：

```
doc_iter("/home/debian/test") 
```

['/home/debian/test/test2/test22', '/home/debian/test/test2/test21', '/home/debian/test/test', '/home/debian/test/test3/test32' , '/home/debian/test/test3/test31', '/home/debian/test/test~', '/home/debian/test/test1/test11', '/home/debian/test/test1/test12 ']

函数和迭代器有区别，在函数中：

```
doc_iter(child) 
```

在迭代器中：

```
for cn in doc_iter(child):
    yield 
```

在这个例子中它是多么复杂！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:47:42.857

因此，您在此处的示例有点做作，并且会导致您在理解如何`yield`工作时遇到的大部分困难。

结果的每次迭代`walk_dir`都会导致一个新的根路径被传递给整个函数，这将导致函数的新迭代具有自己的`yields`

现在您看到打印相同路径的原因是因为每次调用 next 都会更深入地进入目录结构。

所以 each`next()`返回下一个目录或文件。您看到的停止迭代异常是成语

`for x in something_that_yeilds()`知道如何停止。

[我会看这篇关于迭代器、可迭代和生成器](http://excess.org/article/2013/02/itergen1/)的非常棒的文章。

# ios - NSXMLParser 无法解析某些文本字符串

> ID：15047648
> 
> 赞同：0
> 
> 时间：2013-02-24T01:16:28.640
> 
> 标签：ios, xcode, nsxmlparser

我发现由于被禁止的字符，NSXMLParser (XCode/iOS) 没有解析以下 XML 字符串。如果需要转义，应如何在发送到 XML 解析器之前对 XML 字符串进行转义。

```
@"<?xml version=\"1.0\" encoding=\"UTF-8\"?>
 <Elem xmlns=\"Sample\"><Text Text=\"some text <name@somcompany.com> \"></Text></Elem>";

@"<?xml version=\"1.0\" encoding=\"UTF-8\"?>
 <Elem xmlns=\"Sample\"><Text Text=\"some text \"quoted text\" \"></Text></Elem>"; 
```

两者都产生以下错误：

```
Error Domain=NSXMLParserErrorDomain Code=38 "The operation couldn’t be completed.
(NSXMLParserErrorDomain error 38.) 
```

这可以正常工作：

```
@"<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<Elem xmlns=\"Sample\"><Text Text=\"some text \'quoted text\' \"></Text></Elem>"; 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:21:42.423

您可以尝试使用百分比编码转义字符。

```
str = @" \">";
str = [str stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

然后你可以恢复它们

```
str = [str stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

但我不确定您是否正确创建了 XML，或者您是否首先创建了它。

### 编辑

源（生成该 XML 的人）不正确，必须转义文本。您不能使用解析器执行此操作。

# java - 找不到可变价格双倍的 trim() 方法

> ID：15047652
> 
> 赞同：1
> 
> 时间：2013-02-24T01:17:31.710
> 
> 标签：java

> 嗨，我试图用 trim() 修复这个小错误。正在显示的错误消息是找不到符号方法 trim()，并且位置是可变价格类型的 double。下面是代码。/* * 要更改此模板，请选择工具 | 模板 * 并在编辑器中打开模板。*/ 包助手；
> 
> 进口豆.ProductBean; 导入java.sql.ResultSet；导入java.sql.SQLException；导入 java.text.ParseException；导入 java.text.SimpleDateFormat；导入 javax.servlet.http.HttpServletRequest；
> 
> 公共类 ProductHelper {
> 
> ```
> static final SimpleDateFormat SDF = new SimpleDateFormat("dd/MM/yyyy");
> 
> public static void populateaddproduct(ProductBean addproduct, HttpServletRequest request) throws ParseException {
>     String rowid = request.getParameter("rowid");
>     if (rowid != null && rowid.trim().length() > 0) {
>         addproduct.setRowid(new Integer(rowid));
>     }
>     addproduct.setEan(request.getParameter("ean"));
>     addproduct.setPip(request.getParameter("pip"));
>     addproduct.setName(request.getParameter("name"));
>     addproduct.setDescription(request.getParameter("description"));
>     addproduct.setSupplier(request.getParameter("supplier"));
>     **Double price = Double.parseDouble(request.getParameter("price"));
>     if (price != null && price.trim().length() > 0) {
>         addproduct.setPrice(new Double(price));**
>     }
>     String expiryDate = request.getParameter("expirydate");
>     if (expiryDate != null && expiryDate.trim().length() == SDF.toPattern().length()) {
>         addproduct.setExpiryDate(SDF.parse(expiryDate));
>     }
>     addproduct.setLatest(request.getParameter("latestproduct"));
>     addproduct.setDiscounted(request.getParameter("discount"));
> 
> }
> 
> public static void populateProduct(ProductBean product, ResultSet rs) throws SQLException {
>     product.setRowid(rs.getInt("id"));
>     product.setEan(rs.getString("ean"));
>     product.setPip(rs.getString("pip"));
>     product.setName(rs.getString("name"));
>     product.setDescription(rs.getString("description"));
>     product.setSupplier(rs.getString("supplier"));
>     product.setPrice(rs.getDouble("price"));
>     product.setExpiryDate(rs.getDate("expirydate"));
>     product.setLatest(rs.getString("latestproduct"));
>     product.setDiscounted(rs.getString("discount"));
> 
> } } 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:19:55.700

该方法从*字符串*`trim()`中删除前导和尾随空格。的类型是数字 - 空白的概念并不适用于它。您不需要修剪 a - 它总是被隐式修剪。*`double``double`*

 *但是，如果您阅读`String`表示a 的 a *，*`double`则可能需要对其进行修剪。变量的类型必须是`String`，而不是`Double`，才能`trim()`应用该方法。显然，如果您需要`double`稍后使用该值，则需要将字符串转换为双精度值，例如通过调用[`valueOf`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#valueOf%28java.lang.String%29)方法：

```
String priceStr = request.getParameter("price");
if (priceStr != null && priceStr.trim().length() != 0) {
    addproduct.setPrice(Double.valueOf(priceStr));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:19:29.603

**价格**是类型`Double`。`java.lang.Double`没有`trim()`方法。`trim()`是一种删除前导和尾随空格的方法`java.lang.String`

我认为这里只检查空值就可以了。你真的不需要检查长度。

```
 if (price != null) 
```*

# c#-4.0 - 如何绕过 SpriteBatch 排序？C# XNA

> ID：15047661
> 
> 赞同：0
> 
> 时间：2013-02-24T01:19:33.637
> 
> 标签：c#-4.0, xna

我正在开发 XNA 中的“落沙”游戏。当然，这意味着必须绘制大量像素！它开始很好，每个像素使用透明的蓝色纯粹用于测试算法。在失去任何帧速率（稳定的 60 FPS）之前，我能够在屏幕上绘制大约 100,000 个像素，这超出了我的需要！然而，当我最终添加了不同颜色的像素（蓝色和红色）并且没有其他变化时，我的 FPS 呈指数级下降，在 FPS 下降到大约 10 之前，只允许在屏幕上绘制大约 10,000 个像素。经过一些实验后，我得出结论精灵批次最有可能有问题，尽管我可能完全错了，如果您想到不同的东西，请告诉我，因为精灵批次会自动排序并将像素混合在一起。我认为将两种颜色混合在一起的行为是我失去速度的地方。那么，我怎样才能绕过精灵批处理的方法呢？还是我完全不在基地？

我尝试过使用 SpriteSortMode 和 BlendMode，甚至只在每个精灵批处理调用中绘制彩色像素，但到目前为止还没有运气。

此外，我在屏幕上绘制的像素从一开始就没有相同的坐标，因此不需要混合等。

```
 //Game Draw Method
    protected override void Draw(GameTime gameTime)
    {                      
        stopWatch.Start();          

        GraphicsDevice.Clear(Color.Black);

        spriteBatch.Begin();

        //backgroundSprite.Draw(spriteBatch);

        terrainSprite.Draw(spriteBatch);

        resourceMap.Draw(spriteBatch, spriteFont);            

        frameCounter++;

        string fps = string.Format("fps: {0}", frameRate);

        int totalint = 0;

        for (int i = 0; i < resourceMap.activeCoordinates.Count; i++)
        {
            totalint += resourceMap.activeCoordinates[i].Count;
        }

        string total = string.Format("resource count: {0}", totalint);

        spriteBatch.DrawString(spriteFont, fps, new Vector2(33, 33), Color.White);
        spriteBatch.DrawString(spriteFont, total, new Vector2(33, 45), Color.White);
        spriteBatch.DrawString(spriteFont, totalTime, new Vector2(33, 17),    Color.White);            
        spriteBatch.DrawString(spriteFont, totalTime, new Vector2(33, 17),  Color.White); 

        spriteBatch.End();
        stopWatch.Stop();
        totalTime = "Draw Time:     " + stopWatch.Elapsed;
        stopWatch = new Stopwatch();

        base.Draw(gameTime);
    }

    //resourceMap.Draw(SpriteBatch spriteBatch, SpriteFont font) from Game Draw
    public void Draw(SpriteBatch spriteBatch, SpriteFont font)
    {
        //spriteBatch.End();
        //this was originally one for loop to draw all pixels, but was separated to draw each different color pixel after discovering performance issue
        for (int c = 0; c < activeCoordinates.Count(); c++)
        {
            //spriteBatch.Begin();
            for (int i = 0; i < activeCoordinates[c].Count; i++)
            {
                mapArray[(int)activeCoordinates[c][i].X][(int)activeCoordinates[c][i].Y].Draw(spriteBatch);
            }
            //spriteBatch.End();
        }
        //spriteBatch.Begin();
        spriteBatch.DrawString(font, timeInMilli, new Vector2(33, 0), Color.White);
    } 
```

同样，对代码所做的唯一更改是在要绘制的像素列表中添加不同的颜色，因此这里的代码运行良好（以大约 60fps 的速度绘制 100,000 个像素），直到我添加了额外的颜色。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:53:11.647

好的，我将尽我所能给出最好的答案，但我受到您发布的代码数量的限制。首先，我将引导您查看[此答案](https://gamedev.stackexchange.com/a/37794/288)，以了解影响性能的各种因素的概述。

您可能遇到的问题`SpriteBatch`是您强制它启动太多批次。每次更改纹理时，它都必须启动一个批处理 - 听起来您正在为不同的像素使用不同的纹理，然后以随机顺序绘制它们。

`SpriteBatch`在(with )内按纹理排序`SpriteSortMode.Texture`本身可能是一项昂贵的操作。您自己的用于对类似纹理的精灵进行分组的代码可能很慢或不正确 - 但我无法用您给出的代码来判断。

一个更好的情况是使用单个白色纹理，而不是使用许多纹理，然后使用 tint 参数将每个精灵动态着色为所需的颜色。然后每个精灵都可以在一个批次中发送。

**但是**，以及为这么多精灵设置顶点的大量处理，我们应该考虑实际发送到 GPU 的数据量。每个精灵有 4 个顶点，每个顶点都有一个位置、一个颜色和一个纹理坐标。每像素高达**96 个字节。**所有这些都必须每帧发送到 GPU！

另一方面，纹理每个像素只有**4 个字节。**所以按理说它*应该*更快。

有两件事可能会减慢速度：

首先，如果你打电话的`Texture2D.SetData`次数超出了你的要求。每次调用都`SetData`需要相当大的开销。如果你每像素调用一次，它会非常慢。而是为整个图像调用一次。这*应该*使它足够快可以使用——尽管我自己没有对此进行广泛的测试。

另一种可能性是您的 GPU 有一个深管道（取决于硬件）并且仍在使用您的纹理来渲染第 N 帧，而您正在尝试为第 N+1 帧更新它。这会强制 GPU 在接受新更改之前完成渲染帧 N。尽管这似乎不太可能成为问题，除非您正在做其他非常 GPU 密集型的事情，或者您的图形驱动程序正在做一些愚蠢的事情。

# php - PHP echo 没有出现在一台计算机上？

> ID：15047663
> 
> 赞同：0
> 
> 时间：2013-02-24T01:19:54.510
> 
> 标签：php, echo

我有一个查询 MySQL 数据库并使用接收到的数据填充下拉菜单的 php 脚本。一切工作正常，突然间，回声“自定义”选项没有出现在我面前。我让其他人检查同一页，它显示给他。我试过换浏览器，什么都没有。有谁知道为什么会发生这种情况？

```
echo '<div class="c_element" style="height: auto;"> 
    <select class="c_sel">';
        $c= mysql_query("SELECT * FROM C WHERE c_lo_id =".$sel_lo_id) or die(mysql_error());

        while($row = mysql_fetch_array($c))
        {
            echo '<option value='.$row['c_id'].'>'.$row['c_name'].'</option>';              
        }

        echo '<option value="0">Custom </option>
    </select>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:23:31.687

如果您的值包含破坏 html 的字符，例如或`'`，则可能会发生这种情况。输出到 html 时，您应始终确保这些编码正确。`>``<`

除此之外，如果您的值中有空格，因为您没有引用属性值，也会发生这种情况。

两个更正：;

```
 echo '<option value="'.htmlspecialchars($row['c_id']).'">'.htmlspecialchars($row['c_name']).'</option>';
                     ^ added as well                    ^ 
```

# git - Git：执行提交后，显示最后一次推送到每个远程的日期

> ID：15047666
> 
> 赞同：2
> 
> 时间：2013-02-24T01:20:03.113
> 
> 标签：git

我想要一个简单的 git post-commit 操作来打印您上次将更改推送到每个遥控器的日期。这样做的动机是简单地提醒您的存储库可能会变得多远，或者很好地提醒您将更改备份到远程裸存储库。

这是否存在，如果没有任何关于如何做到这一点的快速建议？

如果它不存在，我最初的想法是：

*   在提交后，为 .git/refs/remotes/ 中的每个远程分支执行“git log [remote/branch]”并解析出日期信息。

欢迎对这些步骤的开发策略提供任何帮助（命令行 linux 是我的平台）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:30:08.043

As mentioned in "[Is there a way in git to obtain a push date for a given commit?](https://stackoverflow.com/a/12704702/6309)", you need for your bare repo (to which you are pushing to) to enable logAllRefUpdates

```
git config core.logAllRefUpdates true 
```

And then you can have a look at the dates with git reflog

```
git reflog --date=local master 
```

(but reflog is time limited, 90 days per default)

Other ways usually with `rev-parse` (as in "[How do I get the ID of the last push in git?](https://stackoverflow.com/questions/9653318/how-do-i-get-the-id-of-the-last-push-in-git)"), more about the SHA1.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T12:32:33.173

提交完成后，您可以使用 git 的提交后挂钩来显示此数据。挂钩脚本位于 .got/hooks 您可以使用此处发布的命令之一来构建挂钩脚本。

# php - 如何在 MySQL 的表中只打印非零值？

> ID：15047667
> 
> 赞同：0
> 
> 时间：2013-02-24T01:20:04.233
> 
> 标签：php, html, mysql, record

因此，例如，我的 MySQL 中有这张表，其中有一条记录*a*：

```
 | col1 | col2 | col3 |
a|  0   |   1  |  2   | 
```

我想在 PHP 中回显这条记录，但我不希望也打印具有零值的列。所以它看起来像这样。

```
 | col2 | col3 |
a|  1   |  2   | 
```

编码

```
 $get = "INSERT INTO table (col1, col2, col3) VALUES('0', '1', '2')";
 $result = mysql_query($get);

 echo "<table><tr><td>col2</td><td>col3</td></tr>";

  while ($row = mysql_fetch_array($result)) {
    echo"<tr> <td>".$row['col2']." </td>
    <td>".$row['col3']."</td>
    </tr>";
} 
```

这是代码的手动执行，但如果我有几十列，我希望代码检测哪些列有零，这是我不熟悉的。

是的，所以基本上，我不知道允许我遍历 MySQL 中给定表的所有列的语法。我在 PHP 中使用 MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:29:53.760

```
foreach($result_array as $key => $value)
{
    if ($value!=NULL)
    printf("<td>%s</td>", $value);
} 
```

# mysql - MySql 数据合并

> ID：15047673
> 
> 赞同：-2
> 
> 时间：2013-02-24T01:21:42.877
> 
> 标签：mysql

我正在尝试显示一组特定的数据。我的问题是部分数据在不同的表中，相同的数据库。所以这就是我所拥有的：

两张桌子。T1 有 5 列。T2 有 8 列。FormId 列在两个表之间是通用的。我需要将 DateSubmitted 列从 T1 移动到 T2，然后`SELECT`对生成的组合列运行查询。到目前为止，我只有`SELECT`T2 的有效查询。我无法弄清楚如何将 DateSubmitted 列从 T1 移动到 T2，然后运行`SELECT`查询。我尝试了在这里`UNION`和`JOIN`其他论坛上找到的建议，但没有成功。请帮助构建工作查询！

T2 的 SELECT 查询：

```
SELECT
SubmissionId,
FieldName,
FieldValue
FROM
#__submission_values
WHERE
FormId = 6
AND
FieldName IN ('field1','field2','field3','field4','field5','field6')
ORDER BY SubmissionId ASC 
```

样本数据

```
T1 
DateSubmitted  FormId
2013-02-01    6
2013-02-02    6
2013-02-03    6
2013-02-04    6
2013-02-05    6
2013-02-06    6

T2 
FormId  FieldName     FieldValue   SubmissionId 
6        Field1        Value1       1 
6        Field2        Value2       2 
6        Field3        Value3       3 
6        Field4        Value4       4
6        Field5        Value5       4 
6        Field6        Value6       6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:30:44.663

你不能用这个吗？

```
UPDATE T2
SET T2.DateSubmitted=T1.DateSubmitted
WHERE T1.FormId=T2.FormId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:45:24.860

**编辑**：如果您只需要一个连接两个表的选择，您的查询可能看起来像

```
SELECT t2.SubmissionId,
       t2.FieldName,
       t2.FieldValue,
       t1.DateSubmitted
  FROM t2 INNER JOIN 
       t1 ON t2.FormId = t1.FormId
 WHERE t2.FormId = 6 AND
       t2.FieldName IN ('field1','field2','field3','field4','field5','field6')
 ORDER BY t2.SubmissionId 
```

[sqlfiddle](http://sqlfiddle.com/#!2/ffdce/3)

# c++ - 找不到对象时不会崩溃的getter函数

> ID：15047674
> 
> 赞同：0
> 
> 时间：2013-02-24T01:21:43.530
> 
> 标签：c++

我有一个包含一个成员变量的类，它是一个自定义对象的列表。我正在尝试编写一个 getter 函数，它通过这个列表查找一个具有提供名称的列表。如果找到，我想通过常量引用返回所述对象，或者只输出“找不到名称为“名称”的对象。” 否则，不会使我的程序崩溃。有任何想法吗？我想我可以制作另一个函数，如果存在匹配的对象，则只返回一个布尔值，然后首先调用它。如果它返回 true，则获取给定的项目。但是，这是低效的，我想做得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:26:25.757

选项：

*   找不到时抛出异常 - 在调用者中捕获它

*   返回一个迭代器 - 检查`== .end()`以确定是否在调用者中找不到（STL 这样做）

*   让函数返回一个指针，`NULL`如果找不到则返回

*   有一个特殊对象指示未找到，并在未找到时返回对该对象的引用

*   事先检查是否存在（如您所述）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:31:12.697

您可以提供 2 个版本的访问器，一个抛出异常，或者静默返回空对象，另一个具有要报告的参数，该数据不存在：

```
class Props {
public:
    const Object &get( const std::string &name ) const; // throws exception or silently retruns empty
    const Object &get( const std::string &name, bool &found ) const; // returns flag
}; 
```

在 C++11 中它可能更干净：

```
class Props {
public:
    const Object &get( const std::string &name, bool &&found = bool() ) const;
}; 
```

我会把它带回 C++11 版本，我对新的语言特性不是很熟悉，这似乎不太干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:26:39.563

您将存在检查和价值检索分开的想法是合理的。

它本身并不是低效的，无论如何，为什么不尝试一下，看看它是否成为瓶颈？如果第一次执行似乎效率低下，只需缓存一个提示或检查的整个结果

否则，您的选择包括在找不到时抛出异常，并使用 Baron/Nackman`Fallible`类的某些实现作为函数结果，例如`boost::optional`（或只是滚动您自己的）

而且，考虑一下，您可以只返回一个指针。这对于指针或数组对象类型可能很尴尬，但通常应该是最干净的解决方案。返回一个空指针来表示“找不到对象”。

# javascript - 添加前导零直到数字 10

> ID：15047675
> 
> 赞同：1
> 
> 时间：2013-02-24T01:22:22.110
> 
> 标签：javascript, jquery

我有一个直到数字 10 的数字列表：1,2,3,4,5,6,7,8,9,10

除了数字 10 之外，我需要在每个数字前面加一个零。

所以看起来像这样：01,02,03,04,05,06,07,08,09,10

HTML 看起来像这样：

```
<p class=​"number weight-400">​1</p>​
<p class=​"number weight-400">​2​&lt;/p>​
<p class=​"number weight-400">​3​&lt;/p>​
<p class=​"number weight-400">​4​&lt;/p>​
<p class=​"number weight-400">​5​&lt;/p>​
<p class=​"number weight-400">​6​&lt;/p>​
<p class=​"number weight-400">​7​&lt;/p>​
<p class=​"number weight-400">​8​&lt;/p>​
<p class=​"number weight-400">​9​&lt;/p>​
<p class=​"number weight-400">​10​&lt;/p>​ 
```

我有 jquery 来抓取它们，但我需要弄清楚如何在前 9 个而不是第 10 个中添加一个零：

```
$("p.number").each(function(i, index){
    if (index < 10){

    }
}); 
```

但是我的每个函数都抓取`<p>`了 p 标签内的所有整数，而不是整数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T01:34:16.500

```
$("p.number").text(function(i, val){
    return $.trim(val).length === 1 ? '0' + val : val;
}); 
```

如果您在整个集合上调用该[`.text()`方法](http://api.jquery.com/text/)，则将为集合中的每个项目调用您提供的函数 - 您从函数返回的值将是当前元素的新文本​​。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T01:38:56.623

另一种选择，使用正则表达式：

```
$('.number').text(function(i, txt) {
  return txt.replace(/^\d$/, '0$&');
}); 
```

[http://jsbin.com/axuyiv/1/edit](http://jsbin.com/axuyiv/1/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T01:34:55.277

这是一个快速肮脏的方式：

```
var num = 2;
num = (num < 10)?("0"+num):num;  //"02" 
```

> *[哈我骗了你。它甚至不是脏代码。]*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T01:26:02.100

```
$("p.number").each(function(i, elem){
    var numb = parseInt( $(elem).text(), 10 );

    numb = numb < 10 ? '0' + numb : numb;
    $(elem).text(numb);
}); 
```

[**小提琴**](http://jsfiddle.net/T4r6G/)

# facebook - Facebook FQL 流查询仅返回 4 个项目

> ID：15047676
> 
> 赞同：0
> 
> 时间：2013-02-24T01:22:22.767
> 
> 标签：facebook, stream, facebook-fql, photos

我正在尝试从用户的流中检索所有照片。

```
SELECT post_id, actor_id, target_id, message, created_time 
FROM stream 
WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid = me() 
AND type='newsfeed') 
AND type = 247 
AND is_hidden = 0 
ORDER BY created_time DESC 
```

这只返回 4 个结果，它们是最近的帖子。如果我尝试包含一个 'created_time < 1360993620' 子句，它返回零结果。有什么理由为什么这个查询不会过去很远？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:32:22.867

看起来更简单的方法是使用 Graph API 来拉取用户的主页，然后只过滤照片帖子：

```
GET /me/home?filter=app_2305272732 
```

# java - JDK6 中不存在 sun.text.Normalizer

> ID：15047678
> 
> 赞同：0
> 
> 时间：2013-02-24T01:22:44.527
> 
> 标签：java, normalize

我在 JDK5 中使用以下 API 导入 sun.text.Normalizer：

*   public static String decompose(String str, boolean compat, int options)
*   公共静态最终 int getClass(int ch)
*   public static String normalize(String str, Mode mode, int options)

如何将代码升级到JDK6以实现相同的功能？我用谷歌搜索，但没有结果。非常感谢你的提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T01:34:12.800

您可以使用[java.text.Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)。它有方法`normalize`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:34:30.377

你应该看看 [API java.text.Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)

当我比较 sun.text.Normalizer 和 java.text.Normalizer 时，它们看起来完全一样。

# filesize - Valums-File-Uploader 如何在 onComplete 中获取 fileSize 并将其作为参数传递给服务器

> ID：15047682
> 
> 赞同：0
> 
> 时间：2013-02-24T01:24:00.190
> 
> 标签：filesize, valums-file-uploader

我正在使用 Valums-File-Uploader VERSION 2.1.2，它来自[https://github.com/Valums-File-Uploader/file-uploader](https://github.com/Valums-File-Uploader/file-uploader)。

现在，成功上传文件后，我想立即将文件名和大小保存到 Sqlserver。

```
new qq.FileUploader({
    element: document.getElementById('file-uploader'),
    action: '/ashx/FileHandler.ashx',
    //filename: fileName, filesize: filesize, 
    params: { action: 'uploadfile', filename: fileName, filesize: filesize},------filesize from onComplete function
    autoUpload: true,
    extraDropzones: [qq.getByClass(document, 'qq-upload-extra-drop-area')[0]],
    // Max file size limit
    sizeLimit: 5200000,
    // This function is executed once uploaded.
    // This is appends the filenames to a div, but it could be anything!
    onComplete: function (id, fileName, responseJSON) {
        if (responseJSON.success) {
            $('#uploaded_files').append('<br />uploaded: "' + fileName + '" ');
         ----------- how to set file size to a local variable  filesize

        }
        msgShow(responseJSON.msg);
    }}) 
```

如何从 Valums-File-Uploader onComplete 获取 fileSize 并将其作为参数传递给服务器？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:11:25.240

1.  在您的服务器已处理文件并返回响应*后，*将调用 onComplete 回调。
2.  您引用的存储库几个月前被放弃了。您应该使用[Widen/fine-uploader](https://github.com/Widen/fine-uploader)。

# kineticjs - KineticJS dragBoundFunc 和过渡

> ID：15047683
> 
> 赞同：0
> 
> 时间：2013-02-24T01:24:14.730
> 
> 标签：kineticjs, transition, drag

如果使用dragBoundFunc，如何（如果有的话）使用过渡到新点？

假设我有一个带有这样的 dragBoundFunc 的矩形：

```
rect = new Kinetic.Rect({
        x: 0,
        y: 0,
        width: 100,
        height: 50,
        id: 'yellow',
        name: 'rect',
        fill: 'yellow',
        stroke: 'black',
        strokeWidth: 4,
        draggable: true,
        dragBoundFunc : function(pos) {
        return {
            y : Math.round(pos.y/60)*60,
            x : this.getX(),
        }
    }
    }); 
```

拖动此矩形时如何平滑过渡？

**编辑：**到目前为止，我已经为我所做的事情创造了一个[小提琴。](http://jsfiddle.net/V2AK8/ "小提琴")如您所见，如果您将一个矩形拖到另一个矩形上，它们会执行平滑过渡，向用户反馈正在发生的事情。我想要的是在拖动矩形时也能获得平滑过渡的反馈，这意味着移动本身是过渡而不是突然跳转到新位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:55:06.797

到目前为止非常好的 jsfiddle，结构也很好。因此，您要做的是将拖动绑定功能逻辑移动到您拥有的 dragend 事件：

```
dragBoundFunc: function (pos) {
    return {
        y: Math.round(pos.y / 60) * 60, //<---- move the grid logic to a transition event to be fired on dragend
        x: this.getX(),
    }
} 
```

您将网格垂直移动定义为限制为每 60 个像素。您应该让dragBoundFunc 只允许垂直移动，然后在dragend 上让矩形过渡到网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T17:35:04.083

我认为您想要的是缓慢拖动对象，但我想知道这会有什么用。

拖动和过渡使用不同的概念。

拖动是同步的，您希望它在您的干预下立即发生。

过渡是异步的，您不希望它立即发生，但系统会在一段时间后/一段时间内为您实现。例如，如果您将转换设置为一秒钟，它会在没有您干预的情况下发生一秒钟的时间。你可以认为任何自动的都是异步的。

如果你想拖动一些动画效果，我建议不要使用拖动功能，而是使用鼠标事件的几种组合；mouseclick、mousemove 和 mouseup。

不过，我仍然怀疑它的用处。如果你只是好奇，你试试。

# c# - 使用 BLL 和 DAL 时 FormView 不更新

> ID：15047687
> 
> 赞同：0
> 
> 时间：2013-02-24T01:25:43.720
> 
> 标签：c#, asp.net

我已经有一段时间没有使用 formview 了，这个并不普通，它不使用 ObjectDataSource，而是使用 BLL 类进行 CRUD 操作。它不更新。有人可以看看这个并指出显而易见的吗？

实际上 update_Click 方法永远不会触发。我也尝试过添加一个 onupdating 事件，但这也确实触发了。

```
<asp:FormView ID="fvContactDetails_Mod" runat="server" DataKeyNames="memberid" EnableViewState="false"
  OnDataBound="fvContactDetails_Mod_OnDataBound" >
  <EditItemTemplate>                        
     <table>
        <tr>
          <td class="formlabel"><label for="fname">First Name:</label></td>
          <td class="formvalue">
             <asp:TextBox runat="server" ID="txtFname" CssClass="txtfield" text='<%# Bind("firstname") %>' />
             <asp:RequiredFieldValidator ControlToValidate="txtFname" ErrorMessage="First Name is required." ID="RequiredFieldValidator3" runat="server" ToolTip="First Name is required."   ValidationGroup="CreateUserForm">*</asp:RequiredFieldValidator>
          </td>
        </tr>
        <tr>
          <td class="formlabel"><label for="lname">Last Name:</label></td>
          <td class="formvalue">
             <asp:TextBox runat="server" ID="txtLname" CssClass="txtfield"  text='<%# Bind("lastname") %>'/>
             <asp:RequiredFieldValidator ControlToValidate="txtLname" ErrorMessage="Last Name is required." ID="RequiredFieldValidator4" runat="server" ToolTip="Last Name is required." ValidationGroup="CreateUserForm">*</asp:RequiredFieldValidator>
          </td>
        </tr>
        <tr>
          <td>
            <p><Club:RolloverButton ID="update" runat="server" Text="Update Registration" OnClick="update_Click" /></p>
          </td>
         </tr>
       </table>
     </EditItemTemplate>
   </asp:FormView

protected void update_Click(object sender, FormViewUpdateEventArgs e)
{
    MembershipUser user = Membership.GetUser();

    try
    {
        TextBox  txtFname = (TextBox)fvContactDetails_Mod.FindControl("txtFname");
        TextBox  txtLname = (TextBox)fvContactDetails_Mod.FindControl("txtLname");
        DropDownList  ddlRankid = (DropDownList)fvContactDetails_Mod.FindControl("ddlRankid");

        MemberInformation update = new MemberInformation();
        if (update.UpdateMemberInfo((Guid)user.ProviderUserKey,
            txtFname.Text,
            txtLname.Text,))
        {

        ContactStatus.Text = "Details have been updated sucessfully.";
        ContactStatus.ControlStyle.ForeColor = Color.Blue;
        }
    }
    catch (Exception ex)
    {
        ContactStatus.Text = "Error updating contact details: " + ex.Message;
        ContactStatus.ControlStyle.ForeColor = Color.Red;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:59:11.183

如果您禁用 ViewState （您显然这样做了），则必须使用 Postback 上完全相同的数据重新绑定数据绑定控件，以便可以将其重新创建为与以前相同的状态，并且其事件实际上可以触发（在您的情况下update_Click)。

如果没有在这里看到您的数据绑定代码，这只是在黑暗中拍摄，但我猜您不会重新绑定您对 Postback 的控件或使用（稍微）不同的数据重新绑定它，这会导致您的事件不会被触发。

启用 ViewState，或者，如果您不想这样做，请确保您的数据绑定在回发时正确发生。如果这没有帮助，请提供绑定 FormView 的代码。

# actionscript-3 - 在Itemrenderer内的Button中没有触发creationComplete事件

> ID：15047689
> 
> 赞同：0
> 
> 时间：2013-02-24T01:25:58.827
> 
> 标签：actionscript-3, apache-flex, actionscript

我的数据网格中有 2 个按钮列。我想实现如下所述的功能： 一开始，“比较”按钮被启用，“发送”按钮被禁用。单击比较按钮后，向服务器发送http请求，一旦返回异步响应，请禁用“比较”按钮并启用“发送”按钮

为了实现这一点，我将内联 Itemrenderer 用于按钮列。数据网格的每一行都有“发送”和“比较”两个按钮，如下图所示。

![](../Images/30f154a28d8b879c2508af5e77a2e621.png)

为了在应用程序级别设置按钮状态，我定义了 2 个对象（地图）来将按钮存储在数据网格中。

```
//for storing send buttons.the key is the first hidden column value "id". 
[Bindable]
public var sendButtonMap:Object = new Object();

//for storing compare buttons.the key is the same as above.
[Bindable]
public var compareButtonMap:Object = new Object(); 
```

我在按钮初始化时将按钮注册到地图，以便我可以在 itenrenderer 之外控制按钮。

```
<mx:Button label="Compare" creationComplete="compareBtn_creationCompleteHandler(event)" /> 
```

问题是在页面初始化时没有触发creationComplete。我在 itemrenderer 之外制作了按钮，效果很好。为什么没有触发 creationComplete 事件？这里列出mxml

```
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx"
          xmlns:configurationIngestSource="configuration.ingestSource.*"
          xmlns:commonComponent="common.*"
          paddingLeft="5"
          paddingTop="5"
          creationComplete="sourceDeviceList_creationCompleteHandler(event);ingestSourceMain_creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            [Bindable]
            public var sendButtonMap:Object = new Object();
            //Alert.show("init sendButtonMap");
            [Bindable]
            public var compareButtonMap:Object = new Object();
        ]]>
    </fx:Script>
<s:DataGrid id="sourceDeviceDataGrid"
            width="{Util.getMainNavigatorWidth() - 27}" 
            height="{Util.getMainNavigatorHeight() / 3 * 2 }"
            selectionMode="singleRow"
            doubleClickEnabled="true"
            dataProvider="{localSourceDevices}">                                
    <s:columns>
        <s:ArrayList>
            <s:GridColumn dataField="id" 
                          headerText="id"
                          visible="false"
                          headerRenderer="{customHeaderRenderer}"/>
            <s:GridColumn dataField="name" 
                          headerText="Name"
                          width="{Util.getMainNavigatorWidth() / 6 }"
                          headerRenderer="{customHeaderRenderer}"/>

            <s:GridColumn dataField="id" 
                          headerText="Compare"
                          width="{Util.getMainNavigatorWidth() / 6 }"
                          headerRenderer="{customHeaderRenderer}">
                <s:itemRenderer>
                    <fx:Component>
                        <s:GridItemRenderer creationComplete="compareBtn_creationCompleteHandler(event)" >                                  
                            <fx:Script>
                                <![CDATA[
                                    import spark.components.Button;
                                    import mx.events.FlexEvent;
                                    import mx.controls.Alert;

                                    protected function compareBtn_creationCompleteHandler(event:FlexEvent):void
                                    {
                                        //Never reach here,anything wrong?
                                        Alert.show(this.data.id);
                                        outerDocument.compareButtonMap[this.data.id] = event.target;
                                    }   

                                ]]>
                            </fx:Script>
                            <mx:Button label="Compare" creationComplete="compareBtn_creationCompleteHandler(event)" />
                        </s:GridItemRenderer>
                    </fx:Component>
                </s:itemRenderer>

            </s:GridColumn>
            <s:GridColumn dataField="id" 
                          headerText="Send"
                          width="{Util.getMainNavigatorWidth() / 6 }"
                          headerRenderer="{customHeaderRenderer}">
                <s:itemRenderer>
                    <fx:Component>
                        <s:GridItemRenderer>                                        
                            <fx:Script>
                                <![CDATA[

                                    import mx.events.FlexEvent;
                                    import mx.controls.Alert;

                                    protected function sendBtn_creationCompleteHandler(event:FlexEvent):void
                                    {

                                        import mx.utils.ObjectUtil;
                                        outerDocument.sendButtonMap[this.data.id] = event.currentTarget;
                                        Alert.show( ObjectUtil.toString(event.currentTarget));
                                    }                                                                                                                                       
                                ]]>
                            </fx:Script>
                            <mx:Button label="Send" creationComplete="sendBtn_creationCompleteHandler(event)" />

            </s:GridItemRenderer>
                    </fx:Component>
                </s:itemRenderer>

            </s:GridColumn>
        </s:ArrayList>
    </s:columns>            
</s:DataGrid>
</s:VGroup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:13:26.467

将 Bindable`isCompared`属性添加到存储在`localSourceDevices`. 将 Send 按钮的`enabled`to`isCompared`和 Compare 按钮的`enabled`to绑定`!isCompared`。当请求进来时，将该变量的值从 更改`false`为`true`。

# java - 有没有办法在用 Java 创建文本文件后对其进行编辑？

> ID：15047694
> 
> 赞同：0
> 
> 时间：2013-02-24T01:26:32.343
> 
> 标签：java

我知道如何使用 Java 创建文件，但我的问题是以后可以编辑文件吗？例如：我可以制作一个带有登录信息的 .txt 文件，并且每次新用户注册时，.txt 文件都会自行更新并添加新信息而不修改旧信息。

# ruby-on-rails - 不完整的用户帐户

> ID：15047699
> 
> 赞同：0
> 
> 时间：2013-02-24T01:26:59.737
> 
> 标签：ruby-on-rails, ruby, rails-models

我正在一个网站上工作，用户可以只使用他们的电子邮件地址进行购买，而无需帐户。如果他们将来决定创建一个帐户，他们所有的购买都将分配到该帐户。

到目前为止，我已经让用户`has_many :purchases`和购买`belongs_to :user`。问题是我不知道如何在第一次购买时创建一个只有电子邮件地址的用户，然后使用分配给该用户的电子邮件进行所有以后的购买。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:31:42.407

在整体数据库视图中，这是您想要实现的目标：

*   使用“电子邮件”属性存储交易。
*   如果用户创建了一个帐户，则检索具有其电子邮件地址的销售并将“用户”参数分配给刚刚创建的用户。

这样你就很稳定，不必担心所有这些手臂交叉与操纵用户对象。

# asp.net-web-api - 如何使用 Hyprlinkr 生成指向 HTTP POST 操作的链接？

> ID：15047701
> 
> 赞同：3
> 
> 时间：2013-02-24T01:27:54.157
> 
> 标签：asp.net-web-api, hyprlinkr

我正在尝试使用[Hyprlinkr](https://github.com/ploeh/Hyprlinkr)生成 HTTP Post 操作的 URL。我的控制器如下所示：

```
public class MyController : ApiController {
    [HttpPost]
    public void DoSomething([FromBody]SomeDto someDto) {
        ...
    }
} 
```

这条路线：

```
routes.MapHttpRoute(
            name: "MyRoute",
            routeTemplate: "dosomething",
            defaults: new { controller = "My", action = "DoSomething" }); 
```

我希望得到一个简单的 URL：[http://example.com/dosomething](http://example.com/dosomething)，但它不起作用。我尝试了两种方法：

1) `routeLinker.GetUri(c => c.DoSomething(null))`- 抛出`NullReferenceException`

2) `routeLinker.GetUri(c => c.DoSomething(new SomeDto()))`- 生成无效的 URL： [http ://example.com/dosomething?someDto=Namespace.SomeDto](http://example.com/dosomething?someDto=Namespace.SomeDto)

**更新：** 在 github 上打开的问题： [https ://github.com/ploeh/Hyprlinkr/issues/17](https://github.com/ploeh/Hyprlinkr/issues/17)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T20:21:15.967

我找到了一种解决方法，大致基于[Mark's answer](https://stackoverflow.com/a/15373916/625332)。这个想法是检查每个路由参数并删除那些应用了 [FromBody] 属性的参数。这种方式不需要为每个新的控制器或操作修改调度程序。

```
public class BodyParametersRemover : IRouteDispatcher {
    private readonly IRouteDispatcher _defaultDispatcher;

    public BodyParametersRemover(String routeName) {
        if (routeName == null) {
            throw new ArgumentNullException("routeName");
        }
        _defaultDispatcher = new DefaultRouteDispatcher(routeName);
    }

    public Rouple Dispatch(
        MethodCallExpression method,
        IDictionary<string, object> routeValues) {

        var routeKeysToRemove = new HashSet<string>();
        foreach (var paramName in routeValues.Keys) {
            var parameter = method
                .Method
                .GetParameters()
                .FirstOrDefault(p => p.Name == paramName);
            if (parameter != null) {
                if (IsFromBodyParameter(parameter)) {
                    routeKeysToRemove.Add(paramName);
                }
            }
        }
        foreach (var routeKeyToRemove in routeKeysToRemove) {
            routeValues.Remove(routeKeyToRemove);
        }
        return _defaultDispatcher.Dispatch(method, routeValues);
    }

    private Boolean IsFromBodyParameter(ParameterInfo parameter) {
        var attributes = parameter.CustomAttributes;
        return attributes.Any(
            ct => ct.AttributeType == typeof (FromBodyAttribute));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T22:59:52.033

第二种选择是要走的路：

```
routeLinker.GetUri(c => c.DoSomething(new SomeDto())) 
```

但是，当使用 POST 方法时，您需要删除生成的 URL 的模型部分。您可以使用自定义路由调度程序来做到这一点：

```
public ModelFilterRouteDispatcher : IRouteDispatcher
{
    private readonly IRouteDispatcher defaultDispatcher;

    public ModelFilterRouteDispatcher()
    {
        this.defaultDispatcher = new DefaultRouteDispatcher("DefaultApi");
    }

    public Rouple Dispatch(
        MethodCallExpression method,
        IDictionary<string, object> routeValues)
    {
        if (method.Method.ReflectedType == typeof(MyController))
        {
            var rv = new Dictionary<string, object>(routeValues);
            rv.Remove("someDto");
            return new Rouple("MyRoute", rv);
        }

        return this.defaultDispatcher.Dispatch(method, routeValues);
    }
} 
```

现在将该自定义调度程序传递给您的 RouteLinker 实例。

警告：在我写这篇文章的时候已经很晚了，我还没有尝试编译上面的代码，但我想我宁愿在这里给出一个尝试的答案，而不是让你再等几天。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-27T12:50:08.087

Dimitry 的解决方案使我大部分时间都到达了我想要的位置，但是 routeName ctor 参数是一个问题，因为 StructureMap 不知道该放什么。内部 hyprlink 使用 UrlHelper 生成 URI，并且想知道要使用的路由名称

到那时，我明白为什么 URI 生成如此棘手，因为它与路由配置中的路由名称相关联，并且为了支持 POST，我们需要将方法与正确的路由名称相关联，而这在调度程序中是未知的时间。默认 hyprlinkr 假定只有一个名为“DefaultRoute”的路由配置

我将 Dimitry 的代码更改如下，并采用了基于约定的方法，其中以“Get”开头的控制器方法映射到名为“Get”的路由，而以“Add”开头的控制器方法映射到名为“Add”的路由。

我想知道是否有更好的方法将方法与正确命名的 routeConfig 相关联？

```
 public class RemoveFromBodyParamsRouteDispatcher : IRouteDispatcher
{
    private static readonly ILog _log = LogManager.GetLogger(typeof (RemoveFromBodyParamsRouteDispatcher));

    public Rouple Dispatch(MethodCallExpression method,
                           IDictionary<string, object> routeValues)
    {
        var methodName = method.Method.Name;    
        DefaultRouteDispatcher defaultDispatcher;

        if (methodName.StartsWith("Get"))
            defaultDispatcher = new DefaultRouteDispatcher("Get");
        else if (methodName.StartsWith("Add"))
            defaultDispatcher = new DefaultRouteDispatcher("Add");
        else
            throw new Exception("Unable to determine correct route name for method with name " + methodName);

        _log.Debug("Dispatch methodName=" + methodName);

        //make a copy of routeValues as contract says we should not modify
        var routeValuesWithoutFromBody = new Dictionary<string, object>(routeValues);

        var routeKeysToRemove = new HashSet<string>();
        foreach (var paramName in routeValuesWithoutFromBody.Keys)
        {
            var parameter = method.Method
                                  .GetParameters()
                                  .FirstOrDefault(p => p.Name == paramName);
            if (parameter != null)
                if (IsFromBodyParameter(parameter))
                {
                    _log.Debug("Dispatch: Removing paramName=" + paramName);

                    routeKeysToRemove.Add(paramName);
                }
        }

        foreach (var routeKeyToRemove in routeKeysToRemove)
            routeValuesWithoutFromBody.Remove(routeKeyToRemove);

        return defaultDispatcher.Dispatch(method, routeValuesWithoutFromBody);
    }

    private static bool IsFromBodyParameter(ParameterInfo parameter)
    {
        //Apparently the "inherit" argument is ignored: http://msdn.microsoft.com/en-us/library/cwtf69s6(v=vs.100).aspx
        const bool msdnSaysThisArgumentIsIgnored = true;
        var attributes = parameter.GetCustomAttributes(msdnSaysThisArgumentIsIgnored);

        return attributes.Any(ct => ct is FromBodyAttribute);
    }
} 
```

# html - 使用 CSS 的 HTML 元素的左下角均匀阴影

> ID：15047702
> 
> 赞同：0
> 
> 时间：2013-02-24T01:28:01.747
> 
> 标签：html, css, less

**附加单个视觉阴影**

在这个 HTML 片段中使用[较少的](http://lesscss.org) **CODE#1**，...

```
<div class="shadowBottom"  style="width: 200px;" >
   ... stuff here ...
</div> 
```

可以轻松地将阴影附加到 HTML 页面的 DIV 部分：

![下边缘下方的 CSS 阴影](../Images/ce81a10a28a6c71c9dc6f921b0999576.png)

[less](http://lesscss.org)代码在元素的左下角和右下角下方添加 box-shadows 并稍微旋转它们。使用`z-index=-1`阴影获得目标元素的后面。因此，只有一些阴影在目标元素下方可见。瞧！

当然，目标元素需要有一个**不透明的背景才能在****z-index=-1**处不显示框阴影元素。

**附加两个视觉阴影**

使用非常相似的代码，左下角/左角的阴影是可能的。

要结合这两种阴影效果，需要将两个`DIVs`环绕实际内容[将两个类应用于同一个 DIV 不起作用]：

```
<div class="shadowLeft" style="width: 200px;">
   <div class="shadowBottom"  style="width: 200px;" >
      ... stuff here ...
   </div>
</div> 
```

像这样渲染：

![组合阴影](../Images/e6dc7a8fc6e9070a70c3841eba1521b6.png)

实际上，这不是我想要实现的，因为**两个阴影效果之间存在差距**。

**问题**

我很高兴看到如何填补空缺并**在拐角处**生成均匀的阴影。像这样的东西：

![角落周围的均匀阴影](../Images/f829b36878927b21268283dde5b69f02.png)

**代码#1 [[更少]](http://lesscss.org)**

```
.shadowBottom {

    background-color: #FFFFFF;  
    width: 100%;
    position: relative;

}

@shadowRotation: 6deg;
@horizontalOffset: 0px;
@alpha: 0.2;

.shadowBottom:before {

    content: '';

    position: absolute;
    bottom: 10px;
    left: @horizontalOffset;
    z-index: -1;
    width: 100px;
    height: 20px;

    -webkit-box-shadow: 0 10px 5px rgba( 0, 0, 0, @alpha );
    -moz-box-shadow: 0 10px 5px rgba( 0, 0, 0, @alpha );
    box-shadow: 0 10px 5px rgba( 0, 0, 0, @alpha );

    -webkit-transform: rotate( -@shadowRotation );
    -moz-transform: rotate( -@shadowRotation );
    -o-transform: rotate( -@shadowRotation );
    -ms-transform: rotate( -@shadowRotation );
    transform: rotate( -@shadowRotation );

}

.shadowBottom:after {

    content: '';

    position: absolute;
    bottom: 10px;
    right: @horizontalOffset;
    z-index: -1;
    width: 100px;
    height: 20px;

    -webkit-box-shadow: 0 10px 5px rgba( 0, 0, 0, @alpha );
    -moz-box-shadow: 0 10px 5px rgba( 0, 0, 0, @alpha );
    box-shadow: 0 10px 5px rgba( 0, 0, 0, @alpha );

    -webkit-transform: rotate( @shadowRotation );
    -moz-transform: rotate( @shadowRotation );
    -o-transform: rotate( @shadowRotation );
    -ms-transform: rotate( @shadowRotation );
    transform: rotate( @shadowRotation );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:48:18.207

**编辑：**我最接近的方法是使用`skew`制作类似菱形的图形：

```
.shadowBottom{
  position:relative;
  box-shadow: 0 0 6px rgba( 0, 0, 0, 0.2);    
}

.shadowBottom::before, .shadowBottom::after{ 
  content: '';
  position: absolute;
  bottom: 10px;
  left: 10px;
  z-index: -1;
  width: 50%;
  height: 90%;
  box-shadow: 0px 10px 30px rgba( 0, 0, 0, 0.4);   
  transform: skewX(-10deg) rotate(-4deg); 
               /* ^ skew value should be adjusted to match box w/h */
}

.shadowBottom::after{
  transform: skewX(10deg) rotate(4deg);  
               /* ^ same here */
  left: auto;
  right: 10px;
} 
```

[演示](http://dabblet.com/gist/5022234)

# database-design - 使用 Core Data 对事件详细信息数据库进行建模

> ID：15047704
> 
> 赞同：1
> 
> 时间：2013-02-24T01:28:45.220
> 
> 标签：database-design, core-data

我正在尝试使用 Core Data (iOS 6) 为汽车维护日志设计一个数据库。我面临的问题似乎部分是因为 id 内置在模型中（自动生成）。让我解释：

我想创建一个像这样的表：

```
MAINTENANCE_EVENTS
==================

EventType                    LogDate
-------------------------------------------------
Brake Replacement            01/01/13
Oil Replacement              02/01/13
Oil Replacement              08/07/12 
```

但我想在其他表格中提供有关这些事件的详细信息。例如，更换刹车时应列出刹车制造商，机油应列出机油的品牌，轮胎磨损应记录轮胎是否旋转以及在哪个轮胎上测量胎面等。

如何使用核心数据实体关系模型将这些主条目链接到其他表？

还是仅向 MAINTENANCE_EVENTS 添加可转换属性的最佳解决方案，该属性包含每个 EventType 详细信息的自定义类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T08:53:43.170

不要从关系数据库的角度来看待核心数据。核心数据是一个对象图管理器。

您需要创建另一个名为的实体`EventNotes`，然后创建关系 From `Event`to `EventNotes`，将其命名为“Notes”或其他名称（将其标记为一对一）。

并且不要忘记从到创建反向`EventNotes`关系`Event`

查看此链接以了解核心数据关系 [https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)

可转换属性对您的要求来说是一个糟糕的解决方案。看看这个问题的答案。 [什么时候*不*使用核心数据类型可转换？](https://stackoverflow.com/questions/6783091/when-not-to-use-core-data-type-transformable)

# excel - Visual Basic 中的 Vlookup：尝试为具有可变范围的引用列设置

> ID：15047707
> 
> 赞同：0
> 
> 时间：2013-02-24T01:29:40.983
> 
> 标签：excel, vba

我对下面的代码有疑问。如果有人能提供一些见解，我将不胜感激。本质上，这是我正在构建的每周运行报告的一部分。我遇到的问题是参考列 K 的输入大小是可变的，我讨厌输入一个导致一堆 N/A#s 的常量（K 行不应超过 300）。我确定这是我忽略的简单事情，但我尝试写一些东西来计算 K2:Kn，然后将其输入到 Ranges (q2:r2:s2:t2:qrstn) 中。请分享你的智慧=）

```
Sub Vlookup()
    Sheets(2).Select
    Range("q2").Select
    ActiveCell.FormulaR1C1 = "=VLOOKUP(RC[-6],table,15,FALSE)"
    Range("q2").Select
    Selection.AutoFill Destination:=Range("q2:q300"), Type:=xlFillDefault
    Range("r2").Select
    ActiveCell.FormulaR1C1 = "=VLOOKUP(RC[-7],table,16,FALSE)"
    Range("r2").Select
    Selection.AutoFill Destination:=Range("r2:r300"), Type:=xlFillDefault
    Range("s2").Select
    ActiveCell.FormulaR1C1 = "=VLOOKUP(RC[-8],table,17,FALSE)"
    Range("s2").Select
    Selection.AutoFill Destination:=Range("s2:s300"), Type:=xlFillDefault
    Range("t2").Select
    ActiveCell.FormulaR1C1 = "=VLOOKUP(RC[-9],table,18,FALSE)"
    Range("t2").Select
    Selection.AutoFill Destination:=Range("t2:t300"), Type:=xlFillDefault 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:55:43.537

希望我已经正确理解了你的问题

以下将自动填充范围`Q2:QN`，其中 N 是 Q 列中最后使用的单元格

```
Selection.AutoFill Destination:=Range(Range("K2"),Range("K2").End(xlDown)).Offset(ColumnOffset:=6), Type:=xlFillDefault 
```

你也可以反过来做，因为你有一个固定的最大值。

```
Selection.AutoFill Destination:=Range(Range("K2"),Range("K301").End(xlUp)).Offset(ColumnOffset:=6), Type:=xlFillDefault 
```

第一个向下查找最后一行的工作表，第二个查找从最大值到最后一行的工作表。

您可以将 Q 替换为您需要的任何列，因为您似乎对许多列执行相同操作！

**更新**

我已经更新了示例，它现在在 K 列中找到使用的范围并将其偏移到您想要的列。的值`ColumnOffset`将与`R1C1`公式中使用的值相同（尽管为正）。

此外，由于 K 范围应该保持不变，并且您的公式是相当可预测的，您可以将其缩短一点。像下面这样（我没有测试它，只是在玩）

```
Sub Vlookup() ' might want to re-name, to avoid confusion with the worksheet function
Dim R As Range
Dim A As Range
Dim I As Integer

  Set R = Range(Range("K2"), Range("K301").End(xlUp))
  Set A = Range("K2")

  For I = 6 To 9
    A.Offset(ColumnOffset:=I).FormulaR1C1 = "=VLOOKUP(RC[-" & CStr(I) & "], table, " & CStr(I+9) & ", FALSE)"
    A.Offset(ColumnOffset:=I).AutoFill Destination:=R.Offset(I), Type:=xlFillDefault
  Next I

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T15:24:27.300

使用 FormulaR1C1 时无需填写。您可以将公式应用于整个范围。这是一个例子。

```
Sub MakeVlookup()

    Dim lRows As Long, lCols As Long
    Dim rCell As Range
    Dim rRef As Range

    'Set the first cell of the reference column
    Set rRef = Sheet1.Range("K2")

    'Count the rows of the reference column
    lRows = Sheet1.Range(rRef, rRef.End(xlDown)).Rows.Count

    'Loop through the row 2 cells where you want the formula
    For Each rCell In Sheet1.Range("Q2:T2").Cells
        'Compute the offset back to the reference column
        lCols = rCell.Column - rRef.Column
        'Write the formula to the whole range
        rCell.Resize(lRows, 1).FormulaR1C1 = _
            "=VLOOKUP(RC[-" & lCols & "],Table1," & rCell.Column - 2 & ",FALSE)"
    Next rCell

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T19:38:38.417

无需使用不同的公式循环或寻址每一列！

而不是这些公式：

```
Q 列：=VLOOKUP(K2,table,15,FALSE)
R 列：=VLOOKUP(K2,table,16,FALSE)
...

```

你可以简单地使用

```
=VLOOKUP($K2,table,COLUMN()-2,0)
```

作为所有列的一个公式！`$K2`(in R1C1: `RC11`) 而不是`K2`(in R1C1 `RC[-6]`, `RC[-7]`, ...) 将保留 K 列。`COLUMN()`并将返回实际单元格的列号，即 Q = 17、R = 18 等列。（我也替换了因为这减少`FALSE`了`0`像我这样懒惰的人的打字，但结果相同。:-)）。

因此，您可以将宏减少到

```
Sub MakeVLOOKUP
    Sheets(2).Range("Q2:T300").FormulaR1C1 = "=VLOOKUP(RC11,table,COLUMN()-2,0)"
End Sub 
```

并达到相同的结果。

如果你想像迪克的解决方案那样灵活地调整范围，你可以这样做：

```
Sub MakeVLOOKUP
    Sheets(2).Range("Q2").Resize(Sheet1.Range("K2").End(xlDown)).Rows.Count-1,4).FormulaR1C1 = _
        "=VLOOKUP(RC11,table,COLUMN()-2,0)"
End Sub 
```

# java - 在安装过程中保存 Java 应用程序的属性

> ID：15047719
> 
> 赞同：0
> 
> 时间：2013-02-24T01:31:22.923
> 
> 标签：java, database, properties, installation, portability

我创建了一个基本上是 MySQL 数据库接口的 Java 应用程序。它有助于组织和跟踪数据。我们在我的工作场所使用它没有问题 - 我已经从 Eclipse 将它导出为一个 jar 文件，并给每个人一个这个 jar 文件的副本。

现在我们想让这个软件可用于其他工作场所。问题是数据库的 URL、用户名和密码在应用程序中是硬编码的。我想为它创建一个设置过程，这样当有人下载​​它时，他们会通过一个向导下载 MySQL 并在他们选择的任何地方设置数据库。然后，此人可以将 jar 文件分发给他们工作场所的每个人，而无需他们进行设置，因为每个人都将访问同一个数据库。

这个过程必须以某种方式保存数据库 URL、用户名和密码，以便工作场所的人可以从任何计算机运行 jar。这让我认为它们应该保存在 jar 中......是我需要的属性文件吗？我可以在 jar 中放置一个属性文件并允许在设置过程中对其进行编辑吗？

非常感谢任何指导，我对此很陌生！

==================================================== =================================

编辑：我想我现在要做的是让用户安装 MySQL 并自己设置他们的数据库。正如下面的答案所建议的那样，拥有这个自动可能比它的价值更麻烦，因为我必须处理每个人的不同平台、设置数据库的偏好、安全问题等。一旦他们这样做，他们只会下载我的jar 文件。

我在 jar 文件中添加了一个属性文件来存储数据库 URL、用户名和密码。这个文件最初是空的，所以当用户第一次运行jar时，程序会尝试访问properties文件，看到它是空的，并提示用户输入这个信息。然后它将从 jar 中提取属性文件，编辑它们的信息，并将属性文件放回 jar 中。然后，该人应该能够将更新的 jar 分发给他们的同事，并且他们都应该能够打开它而无需提供该信息。我的这部分几乎可以工作了。我还将添加“重新配置”程序的能力——以防用户移动他们的数据库——通过调用相同的方法（他们将再次必须分发新版本的程序）。

接下来我想尝试通过加密或混淆代码以某种方式保护属性文件（尽管我认为这仅适用于类文件而不适用于文本文件......？）。我担心的是，工作场所的任何人都可以将其解压缩并打开属性文件，然后使用 URL、用户名和密码自行访问数据库并造成损坏。理想情况下，除了程序本身之外，没有人能够解压它。

如果有人对我的方法有其他疑虑，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:38:26.430

首先，在工作场所的中心位置建立数据库以供不同用户访问并非易事。此外，还有第一个用户设置它然后将应用程序重新分发给其他人的问题。

回答技术问题 - 最简单的方法是解压缩到已知位置，在该位置编辑属性文件，然后重新 jar 到一个新文件，可能带有特定于该工作场所的后缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:41:47.073

您可以将属性文件保存在用户主目录的子目录中，由`System.getProperty("user.home)`. 另外，请查看[Apache Commons 配置库](http://commons.apache.org/configuration/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T01:46:07.533

看看[HSQLDB](http://hsqldb.org/)。这是一个重量更轻的数据库，易于设置。如果它不存在，您可以将它配置给我，如果它存在，我们可以配置它。但是，如果您需要 MySQL 之类的东西，并且希望有许多用户从不同的工作站连接到它，我不建议您通过安装过程下载和配置它。会有很多网络和安全问题。作为旁注，属性文件是一个好主意。

[这个链接解释了一些需要考虑的安全问题](https://stackoverflow.com/questions/659970/why-is-it-not-advisable-to-have-the-database-and-web-server-on-the-same-machine)。此外，再考虑一下，用户可能没有必要的权限来设置/配置数据库服务器。从长远来看，允许他们设置数据库服务器并让他们在您的应用程序类路径中放置一个属性文件可能对您来说更安全/更容易。

附带说明一下，您是否考虑过将其作为 Web 应用程序？这可以让你的事情变得更简单，人们不必下载任何东西，而且大多数用户都不需要设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T01:50:27.120

你如何部署你的应用程序？

如果您使用 Webstart，您可以在 jnlp 文件中定义您的属性并使用 System.getProperties(...);

# ruby - 我可以使用 Ruby 通过 TCP 发送对象吗？

> ID：15047725
> 
> 赞同：2
> 
> 时间：2013-02-24T01:33:03.990
> 
> 标签：ruby, tcp, client-server, distributed

我正在尝试通过 Ruby 上的 TCP 发送和“消息”对象，而我的客户端类根本看不到任何东西。我究竟做错了什么？

我的消息类（我正在尝试发送）

```
class Message

  attr_reader :host_type, :command, :params  
  attr_accessor :host_type, :command, :params

  def initialize(host_type, command, params)
    @host_type = host_type
    @command = command
    @params = params
  end
end 
```

我的“服务器”类

```
require 'socket' 
require_relative 'message'               

class TCP_connection 

  def start_listening
    puts "listening"
    socket = TCPServer.open(2000) 
    loop {                          
      Thread.start(socket.accept) do |message|
        puts message.command
      end
    }
  end

  def send_message
    hostname = 'localhost'
    port = 2000

    s = TCPSocket.open(hostname, port)

    message = Message.new("PARAM A", "PARAM B", "PARAM C")

    s.print(message)

    s.close 
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:31:21.710

下面是通过 json 进行客户端服务器通信的示例。你会期待这样的事情`RuntimeError: {"method1"=>"param1"}`。不要引发错误，而是使用服务器逻辑处理此 json。

**服务器**

```
require 'socket'
require 'json'

server = TCPServer.open(2000)
loop {
  client = server.accept
  params = JSON.parse(client.gets)
  raise params.inspect
} 
```

**客户**

```
require 'socket'
require 'json'

host = 'localhost'
port = 2000

s = TCPSocket.open(host, port)

request = { 'method1' => 'param1' }.to_json
s.print(request)

s.close 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:07:12.073

您需要序列化您的对象。最便携的方法是使用 YAML。首先，需要`yaml`库：

```
require "yaml" 
```

比，替换`s.print(message)`为`s.print(YAML.dump(message))`.

# java - Java Card Game: Deck Class 需要帮助

> ID：15047726
> 
> 赞同：4
> 
> 时间：2013-02-24T01:33:14.910
> 
> 标签：java, arrays, oop, class, project

这是我关于 Stack Overflow 的第一个问题，如果我的问题中有一个新手错误，请原谅我，并随时纠正我，因为我计划在接下来的几个月内更多地使用这个网站。

无论如何，我是一名高中 12 年级的学生，并且被困在我的一个家庭作业问题上。所以基本上我们得到了一个创建战争游戏（纸牌游戏）的项目，我们被要求每天做一小部分。到目前为止，直到今天一切都进展顺利，因此我向你们提出了问题。

以下是该项目的内容：

**卡片**

*   它有什么：
    *   private int value：卡的值
    *   私人char套装：卡片套装
    *   Private Boolean draw: 卡片是否从牌堆中抽出
*   它能做什么：
    *   Public Card(int val, char s)：创建一张价值为 val、花色 s 的牌，并设置为 False
    *   public int getValue()：返回一张卡片的值
    *   public char getSuit()：返回一张牌的花色
    *   Public Boolean isDrawn(): 返回一张牌是否已经被抽出
    *   public String toString()：以“花色值”的形式返回描述卡片的字符串</li>

**甲板**

*   它有什么：
    *   Private char[] suits = { 'c', 'd', 'h', 's'}：西装的表示
    *   Public int numCards：一副牌中的牌张数（传统上是 52 - 将其降低以进行测试！）
    *   Private Card[] 卡组：存储为卡组的卡组

* * *

到目前为止，我已经完成了所有工作。

*   它能做什么：
    *   Public Deck()：创建一副牌——数值范围为 2-14，每套一张
    *   公共牌drawCard()：从牌组中随机抽取一张尚未抽出的牌
    *   Public String toString()：根据您的测试目的进行设计

现在我已经在下面的 Quynh 先生的帮助下完成了 Public 套牌步骤，但是我对如何创建 drawCard 方法感到困惑。这是我到目前为止所拥有的：

```
public Card drawnCard(){
        int randNum = (int) Math.random()*13+2;
    } 
```

所以我知道上面的代码创建了一个介于 2 到 14 之间的随机数，但是我如何使用它来绘制物理卡？比如我输入什么让程序知道要抽牌？对不起，我知道你现在可能觉得我在问你每一步，但我真的迷路了，需要你的帮助！

在编程方面我是新手，因此如果这个问题对您来说太简单/新手，我深表歉意，但我真的需要您的帮助:)

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:42:22.687

作为初学者，您的 Deck 构造函数应该类似于此

```
for(int i = 2; i <= 14; i++){
   for(int j = 0; j < suits.length; j++){
     Card card = new Card(i, suits[j]);
     card.isDrawn(false);
     //ADD CARD TO YOUR DECK HERE  
   }
} 
```

至于 drawCard 功能，只需从 1-52 随机化一个数字（假设您使用的是 52 张卡片组）然后从您的卡片组中抽取并设置`.isDrawn(true)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:15:19.210

像这样的东西...

```
public class Deck {

    private Card[] cards = new Card[52];
    private int index = -1;

    public Deck() {
        // build deck
        for (int i=0; i<52; ++i) {
            if (i<13) cards[i] = new Card('s',i+2);
            else if (i<26) cards[i] = new Card('c',i-13+2);
            else if (i<39) cards[i] = new Card('d',i-26+2);
            else if (i<52) cards[i] = new Card('h',i-39+2);        
        }
        // shuffle deck
        Collections.shuffle(Arrays.asList(cards));
    }

    public Card drawCard() {
        ++index;
        cards[index].drawn();            
        return cards[index];
    }
}

class Card {

    private char suit;
    private int value;
    private boolean drawn = false;

    Card(char s, int v) {
        suit = s;
        value = v;
    }

    void drawn() { drawn = true; }

    boolean isDrawn() { return drawn; }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T02:22:07.663

您应该为此使用数组列表以使改组更容易。因为这是家庭作业，所以我不会给你确切的代码，但是，

```
ArrayList<Card> deck=new ArrayList<Card>();
        //add a loop with
        {
            Card card=new Card("initilize card here");
            deck.add(card);
        } 
```

从长远来看，这应该可以帮助您入门并使其变得更容易。

# validation - 使用 Griffon 和 JavaFX 将文本字段绑定到数字

> ID：15047727
> 
> 赞同：0
> 
> 时间：2013-02-24T01:33:16.713
> 
> 标签：validation, javafx, griffon

我正在使用 Griffon 1.2.0 和 JavaFX，我想将一个文本字段绑定到一个数字。我想我可以简单地通过将模型属性定义为浮点数来做到这一点，但它似乎并不喜欢那样，即使我定义了一个转换器。我查看了 Validator 插件，但它似乎只适用于 Swing（不是 JavaFX）——这很遗憾，因为这个演示文稿让它看起来非常好：[http](http://www.slideshare.net/ecspike/introduction-to-griffon) ://www.slideshare.net/ecspike/introduction-to-griffon （第 67 页显示了我想要的那种功能）。

与此同时，我刚刚在我的视图的 noparent 块中添加了一个属性更改侦听器，如此处所建议[的在 JavaFX 中制作数字 TextField 的推荐方法是什么？](https://stackoverflow.com/questions/7555564/what-is-the-recommended-way-to-make-a-numeric-textfield-in-javafx)：

```
amount2.textProperty().addListener({ ObservableValue<? extends String> observable, String oldValue, String newValue ->
    try {
        Integer.parseInt(newValue);
    } catch (Exception e) {
        observable.setValue(oldValue);
    }
} as ChangeListener<String>) 
```

这确保用户只能输入数字，但有更好的选择吗？我在 JavaFX 领域中没有发现任何可以与 Validation 插件功能相媲美的东西——我应该放弃 JavaFX 并回到 Swing 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:04:04.693

我认为 GroovyFX 的 @FXBindable 和 bind() 节点已经提供了此功能，即

```
 class SampleModel {
     @FxBindable float number
 }

 // View
 textField(text:bind(target: model, 'number', converter: { v -> /* insert converter code here */)) 
```

考虑到 GroovyFX 的 bind() 是 SwingBuilder 的 bind() 的副本。

# java - Java MIDI 外部设备传输到音序器的接收器

> ID：15047728
> 
> 赞同：2
> 
> 时间：2013-02-24T01:33:33.770
> 
> 标签：java, midi, javasound

我在从外部设备向定序器接收器传输数据时遇到了一些问题。我将它传输到任何其他接收器都没有问题。例如：

我有这两个类：

```
public class TestData {
    private Receiver receiver;

    public TestData(Receiver receiver)
    {
        this.receiver = receiver;
    }

    public void sendTestData() throws InvalidMidiDataException
    {
        ShortMessage shortMessage = new ShortMessage();
        shortMessage.setMessage(ShortMessage.NOTE_ON, 0, 50, 127);
        receiver.send(shortMessage, 123);
        shortMessage.setMessage(ShortMessage.NOTE_OFF, 0, 50, 0);
        receiver.send(shortMessage, 124);
        shortMessage.setMessage(ShortMessage.NOTE_ON, 0, 51, 127);
        receiver.send(shortMessage, 125);
        shortMessage.setMessage(ShortMessage.NOTE_OFF, 0, 51, 0);
        receiver.send(shortMessage, 126);
    }

} 
```

和

```
public class MidiInputReceiver implements Receiver {
    public String name;
    Map<Byte, String> commandMap = new HashMap<Byte, String>();

    public MidiInputReceiver(String name) {
        this.name = name;
        commandMap.put((byte)-112, "Note On");
        commandMap.put((byte) -128, "Note Off");
        commandMap.put((byte) -48, "Channel Pressure");
        commandMap.put((byte) -80, "Continuous Controller");
    }
    public void send(MidiMessage msg, long timeStamp) {
        System.out.println("midi received");
        System.out.println("Timestamp: "  + timeStamp);
        byte[] b = msg.getMessage();

        if(b[0] != -48){
            //System.out.println("Message length: " + msg.getLength());
            System.out.println("Note command: " + commandMap.get(b[0]));
            System.out.println("Which note: " + b[1]);
            System.out.println("Note pressure: " + b[2]);
            System.out.println("---------------------");
        }else{
            //System.out.println("Message length: " + msg.getLength());
            System.out.println("Note command: " + commandMap.get(b[0]));
            System.out.println("Note Pressure: " + b[1]);
            System.out.println("---------------------");
        }
    }
    public void close() {}
} 
```

这工作正常：

```
sequencer = MidiSystem.getSequencer();
sequencer.open();
Sequence myseq = new Sequence(Sequence.PPQ, 10);
Track newTrack = myseq.createTrack();
sequencer.setSequence(myseq);
sequencer.setTickPosition(0);
sequencer.recordEnable(newTrack, -1);

TestData testData = new TestData(sequencer.getReceiver())
sequencer.startRecording();
testData.sendTestData(); 
```

这也有效：

```
MidiDevice device;
MidiDevice.Info[] infos;
infos = MidiSystem.getMidiDeviceInfo();
device = MidiSystem.getMidiDevice(infos[0]);
device.open();

Transmitter conTrans = device.getTransmitter();
conTrans.setReceiver(new MidiInputDevice("Test")); 
```

所以控制器发送到我的自定义接收器没有问题。并且定序器的接收器从我的 TestData 类接收没有问题。但是以下（从我的外部控制器传输到我的定序器的接收器不起作用）：

```
MidiDevice device;
MidiDevice.Info[] infos;
infos = MidiSystem.getMidiDeviceInfo();
device = MidiSystem.getMidiDevice(infos[0]);
device.open();

sequencer = MidiSystem.getSequencer();
sequencer.open();
Sequence myseq = new Sequence(Sequence.PPQ, 10);
Track newTrack = myseq.createTrack();
sequencer.setSequence(myseq);
sequencer.setTickPosition(0);
sequencer.recordEnable(newTrack, -1);

Transmitter conTrans = device.getTransmitter();
conTrans.setReceiver(sequencer.getReceiver());
sequencer.startRecording(); 
```

有什么我想念的吗？

编辑：好的，我可以看到轨道实际上正在接收 MidiEvents。我认为问题在于时机。滴答数似乎非常高，所以当我播放它时，我认为它只是等待非常非常长的时间来播放录制开始时发生的事件。我认为这与将我的设备同步到我的音序器有关，但我不确定我的 SyncModes 应该设置为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:49:52.857

好的，我想出了一个解决这个问题的方法。这似乎运作良好。在任何播放之前，我都会根据第一个刻度调整所有刻度。这将需要为每个轨道完成。

像这样：

```
int eventSize = sequencer.getSequence().getTracks()[0].size();
MidiEvent firstEvent = sequencer.getSequence().getTracks()[0].get(0);
long baseTime = firstEvent.getTick();

for(int i = 0; i < eventSize; i++){
    MidiEvent event = sequencer.getSequence().getTracks()[0].get(i);
    event.setTick(event.getTick() - baseTime);
} 
```

# php - Soundcloud 仅从页面 URL 嵌入检索，这可能吗？

> ID：15047729
> 
> 赞同：0
> 
> 时间：2013-02-24T01:33:38.617
> 
> 标签：php, mysql, api, web

所以我能够像这样检索视频嵌入：

```
iframe style='overflow: hidden; border: 0; width: 720px; height: 506px' src='http://stagevu.com/embed?
width=720&amp;height=450&amp;background=000&amp;uid=ymuqokfxatwt' scrolling='no'></iframe> 
```

当用户以如下形式输入视频的简单 url 链接时： [http://stagevu.com/video/ipfmdyadiqgt](http://stagevu.com/video/ipfmdyadiqgt)，使用以下代码：

```
// code to display StageVu
if (preg_match("/http:\/\/stagevu.com\/video\/([a-z]*)/i", $url, $matches)) {
return '<iframe style="overflow: hidden; border: 0; width: 700px; height: 400px"
   src="http://stagevu.com/embed?width=700&amp;height=400&amp;background=000& amp;uid='
   .$matches[1]. '" scrolling="no">'.
'</iframe>';
} 
```

我想知道这样的链接：[https ://soundcloud.com/darkelixir/teknian-behemoth-darkelixir](https://soundcloud.com/darkelixir/teknian-behemoth-darkelixir)

像这样疯狂嵌入：

```
iframe width="100%" height="166" scrolling="no" frameborder="no"
  src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F80432122"> 
  </iframe> 
```

当没有易于使用的 ID 系统时，如何允许通过 url 嵌入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:08:04.737

[http://developers.soundcloud.com/docs/api/reference#resolve](http://developers.soundcloud.com/docs/api/reference#resolve)

看看这个，它用于解析 URL！

# c# - 如何检查是否将值返回到表中的存储过程是否成功

> ID：15047734
> 
> 赞同：1
> 
> 时间：2013-02-24T01:34:23.100
> 
> 标签：c#, jquery, asp.net, ajax

我有一个运行插入语句的存储过程，它将一个值返回到数据表中。我必须使用数据表提前谢谢你:)

我的 SQL 存储过程

```
begin
Declare @postID int = 0
insert into reviews (customerID, title, review)
values (@cusomerID, @title, @review) 
set @postID = SCOPE_IDENTITY()
end 
```

返回值存储在数据表中，我想检查插入是否成功。

我正在使用 ajax jquery 进行插入，它调用存储过程并返回一个值

方法调用

```
if (data.Rows[0]["post_ID "] != 0)
            {
                return "successful";
            }
else{
return "failed";
} 
```

在javascript中

```
if(result != "failed"){
run code
} 
```

但是，即使插入失败，它也会成功返回。

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:46:20.843

SCOPE_IDENTITY() 返回最后一个自动 ID。在您的情况下，它会返回插入失败之前的那个。

尝试类似的东西

```
BEGIN
    DECARE @postID int = 0
    INSERT INTO reviews (customerID, title, review) VALUES (@cusomerID, @title, @review) 
    IF @@ERROR <> 0
         SET @postID = -1
    ELSE
        SET @postID = (select SCOPE_IDENTITY())
   SELECT @postID
END 
```

在你的代码中，如果 ID == -1 你知道它失败了。

或者，您可以

```
BEGIN
    SET XACT_ABORT ON
    DECARE @postID int = 0
    INSERT INTO reviews (customerID, title, review) VALUES (@cusomerID, @title, @review) 
    SET @postID = (select SCOPE_IDENTITY())        
    SELECT @postID
END 
```

任何错误都会在您的代码中发生异常（事务也会回滚）。

# html - 当它向左浮动时如何居中

> ID：15047736
> 
> 赞同：1
> 
> 时间：2013-02-24T01:34:52.250
> 
> 标签：html, css, list, css-float

嗨，这似乎是一个常见问题，但是我找到的解决方案还没有为我工作:(

我发现[了这个，](https://stackoverflow.com/questions/1055134/how-to-centrally-align-a-float-left-ul-li-navigation-menu-with-css)但是由于某种原因，[这个解决方案](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)对我不起作用。

**我的演示链接： http:** [//leongaban.com/_stack/centering/](http://leongaban.com/_stack/centering/)

我试图让顶级导航居中，以及投资组合导航居中。

**我的 JSFiddle：http:** [//jsfiddle.net/8DM65/](http://jsfiddle.net/8DM65/)

请帮忙！让我发疯 X_x

HTML

```
<header>

    <div id="main-nav">
        <ul>
            <li><a href="#content">Portfolio</a></li>
            <li><a href="#footer">Contact Me</a></li>
            <li><a href="#">Resume</a></li>
        </ul>
    </div>

    <div id="logo-title">
        <img src="images/leon_gaban.png" width="256" height="256" class="avatar" />

        <h1>Hello</h1>
        <h2>Web Designer &amp; Developer</h2>
        <h3>And self-improvement blogger</h3>
    </div>

</header>

<section id="content">

    <div class="portfolio-nav">
        <ul>
            <li class="cta">Select Portfolio</li>
            <li class="selected"><a href="#">Design &amp; Development</a></li>
            <li class="not-selected"><a href="#">Flash &amp; Animation</a></li>
        </ul>
    </div>

    <div id="showcase-div">
        <ul id="showcase-boxes">
            <li>Test</li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>

</section> 
```

CSS

```
/* 02 Header */
header {
width: 100%;
height: 720px;
margin: 0 auto;
background: #ededed;
border-bottom: 1px solid #ccc;
}

header h1 {
font-size: 2em;
font-weight: 400;
font-style: italic;
}

header h2 {
font-size: 3.125em;
font-weight: 700;
}

header h3 {
font-size: 1.125em;
font-weight: 400;
font-style: italic;
}

#logo-title {
width: 100%;
margin: 60px auto;
text-align: center;
}

.avatar {
width: 256px;
height: 256px;
margin-bottom: 20px;

-webkit-border-radius: 128px;
-moz-border-radius: 128px;
-ms-border-radius: 128px;
-o-border-radius: 128px;
border-radius: 128px;

-webkit-box-shadow: 0 0 0px 6px white, 0 0 0 8px #cccccc, 0 10px 40px #333333;
-moz-box-shadow: 0 0 0px 6px white, 0 0 0 8px #cccccc, 0 10px 40px #333333;
box-shadow: 0 0 0px 6px white, 0 0 0 8px #cccccc, 0 10px 40px #333333;
}

#main-nav {
width: 80%;
height: 100px;
margin: 0 auto;
text-align: center;
font-size: 1.5em;
border-bottom: 2px solid white;
}

#main-nav ul {
clear: left;
float: left;
width: 100%;
list-style: none;
padding: 30px 0;
position:relative;
left:50%;
}

#main-nav ul li {
display:block;
position:relative;
right:50%;
float: left;
padding: 0 20px;
}

/* 03 Content */
#content {
width: 100%;
height: 100%;
margin: 0 auto;
}

#content ul {
list-style: none;
}

.portfolio-nav {
height: 60px;
padding: 30px 0 0 0;
background: #ccc;
}

.portfolio-nav ul {
margin: 0 auto;
text-align: center;
}

.portfolio-nav ul li {
display: inline;
float: left;
padding: 0 20px;
text-align: center;
}

#showcase-div {
width: 80%;
height: 100%;
margin: 0 auto;
background: blue;
padding-bottom: 60px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:47:13.883

实际上，您已经向这些元素添加了太多 CSS，并且似乎在错误地编写自己的代码。我会放弃所有的`position: relative;`东西，而是专注于建立你`li`的周围`inline-block`。这使得`li`'**不会**在宽度方向上扩展，将彼此推入垂直堆栈。

```
#main-nav ul li {
    display: inline-block;
    padding: 0 20px;
}

#main-nav ul {
    list-style: none;
    padding: 30px 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T01:47:33.723

你为什么要大量混合浮动、清除、显示和定位？如果您要对自己所做的事情有所了解，则需要删除大量代码。

例如，第一个导航。您不需要将列表项显示为块级元素，然后将它们浮动，然后清除它们，然后尝试将它们放置在页面的中间位置。

它们是列表项，您想要显示它们`inline`。

```
#main-nav ul {
    width: 100%;
    list-style: none;
    padding: 30px 0;
}

#main-nav ul li {
    display: inline;
    padding: 0 20px;
} 
```

[http://jsfiddle.net/8DM65/2/](http://jsfiddle.net/8DM65/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T01:47:17.847

看来我可以很容易地通过以下方式使它工作：

```
.portfolio-nav{
    text-align: center;
}

.portfolio-nav > ul{
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T01:49:55.160

我发现将 #main-nav 宽度 css 更改为 35% 可以修复它，但会删除多余的白色分隔线，因此您可以添加一个白色的 hr 标签来修复它。为了修复#portfolio-nav，我将宽度更改为 44% 并添加了边距：0 自动。

# vb.net - 表单上的 VB 2010 单选按钮成本计算

> ID：15047738
> 
> 赞同：0
> 
> 时间：2013-02-24T01:34:59.520
> 
> 标签：vb.net, radio-button

我在使用 VB 2010 时遇到了一个问题 - 我正在尝试根据选择 3 个单选按钮中的 1 个来计算地毯的成本。

我的表格顶部有这个：

```
Private CarpetPrice, UnderlayPrice As Decimal 
```

这是我的按钮点击代码

```
Private Sub CostButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CostButton.Click
    ' Calculate button click
    ' Radio Button IF Statement for calculating cost
    If EconomyRadioButton.Checked Then
        UnderlayPrice = 3.95 And CarpetPrice = 12.95
    ElseIf DeluxeRadioButton.Checked Then
        UnderlayPrice = 4.95 And CarpetPrice = 15.49
    ElseIf PlushRadioButton.Checked Then
        UnderlayPrice = 5.95 And CarpetPrice = 19.95
    End If
    ' Start Calculations
    CarpetNumLabel.Text = (((Length1TextBox.Text * Width1TextBox.Text) / 1296) + ((Length2TextBox.Text * Width2TextBox.Text) / 1296) + _
        ((Length3TextBox.Text * Width3TextBox.Text) / 1296) + ((HallLengthTextBox.Text * HallWidthTextBox.Text) / 1296)) * 1.05
    UnderlayNumLabel.Text = CarpetNumLabel.Text
    TackNumLabel.Text = ((Length1TextBox.Text / 96) + (Width1TextBox.Text / 96) + (Length2TextBox.Text / 96) + (Width2TextBox.Text / 96) _
        + (Length3TextBox.Text / 96) + (Width3TextBox.Text / 96) + (HallLengthTextBox.Text / 96) + (HallWidthTextBox.Text / 96)) * 1.1
    ScrewNumLabel.Text = ((TackNumLabel.Text / 1.1) * 8) / 50
    CarpetCostLabel.Text = CarpetNumLabel.Text * CarpetPrice
    UnderlayCostLabel.Text = UnderlayNumLabel.Text * UnderlayPrice
    TackCostLabel.Text = TackNumLabel.Text
    ScrewCostLabel.Text = ScrewNumLabel.Text * 2.85

End Sub 
```

现在一切都运行得很完美，除了地毯和垫层不计算价格。当我单击按钮时，我是否必须做其他事情才能让程序识别单选按钮的状态？-

我认为我的问题在于：

```
CarpetCostLabel.Text = CarpetNumLabel.Text * CarpetPrice
UnderlayCostLabel.Text = UnderlayNumLabel.Text * UnderlayPrice 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T05:58:21.557

您不能使用 AND 将两个不同的分配串在一起。你的 IF 块应该是

```
If EconomyRadioButton.Checked Then
    UnderlayPrice = 3.95
    CarpetPrice = 12.95
ElseIf DeluxeRadioButton.Checked Then
    UnderlayPrice = 4.95
    CarpetPrice = 15.49
ElseIf PlushRadioButton.Checked Then
    UnderlayPrice = 5.95
    CarpetPrice = 19.95
End If 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T08:15:01.560

使用变量，不要在 if 语句中使用 AND 运算符... ADN 运算符用于 IF 条件，例如 if a<20 and a>10 then ..try try unt

# javascript - 可以在 javascript/ajax 中完成服务器端循环吗？

> ID：15047740
> 
> 赞同：0
> 
> 时间：2013-02-24T01:36:25.087
> 
> 标签：javascript, ajax, ruby-on-rails-3

如何在没有 javascript 的情况下在客户端上循环服务器端代码？我的 Rails 应用程序中有这个循环

```
//partial = _manufacturers
<div id="all_manufcaturers">
<% for manufacturers in @manufacturerss%>
  ID: <%= h manufacturers.id %>
<% end %>
</div> 
```

如何使用 ajax 渲染它？我知道类似以下的作品，因为它只是一个静态替换：

```
$("#manufacturers_count").html('Manufacturer - <%= @car.manufacturers.count %>'); 
```

但是这样的伪代码不起作用，因为部分包含一个循环：

```
$("#all_manufacturers").html('...render(manufacturers)...'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:49:09.467

是的，这是可以做到的。您将需要制作一个服务器端脚本（例如 php），为您构建数据集并使用 json_encode 回显它。然后，您将需要在您使用的任何库（例如，jQuery.decodeJSON()）中使用适当的 javascript 解码函数解析来自请求的响应。然后，您可以遍历响应集并进行渲染。

# c# - 为什么这个窗口仍然可以调整大小、最小化和最大化？

> ID：15047741
> 
> 赞同：1
> 
> 时间：2013-02-24T01:36:25.623
> 
> 标签：c#, wpf, window-resize

我在一个应用程序中有一个窗口，并且Resize模式设置为NoResize，但是如果单击窗口的左上角，“最大化”、“最小化”和“大小”的菜单项仍然启用。这只发生在没有图标但仍有关闭按钮的窗口上。这意味着这个问题不会发生在我的有图标的窗口上。

这是删除图标但仍保留红色关闭按钮的代码：

```
protected override void OnSourceInitialized(EventArgs e) {
    IconHelper.RemoveIcon(this);
}

public static class IconHelper {
    [DllImport("user32.dll")]
    static extern int GetWindowLong(IntPtr hwnd, int index);

    [DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hwnd, int index, int newStyle);

    [DllImport("user32.dll")]
    static extern bool SetWindowPos(IntPtr hwnd, IntPtr hwndInsertAfter, int x, int y, int width, int height, uint flags);

    [DllImport("user32.dll")]
    static extern IntPtr SendMessage(IntPtr hwnd, uint msg, IntPtr wParam, IntPtr lParam);

    const int GWL_EXSTYLE = -20;
    const int WS_EX_DLGMODALFRAME = 0x0001;
    const int SWP_NOSIZE = 0x0001;
    const int SWP_NOMOVE = 0x0002;
    const int SWP_NOZORDER = 0x0004;
    const int SWP_FRAMECHANGED = 0x0020;
    const uint WM_SETICON = 0x0080;

    public static void RemoveIcon(Window window) {
        IntPtr hwnd = new WindowInteropHelper(window).Handle;
        int extendedStyle = GetWindowLong(hwnd, GWL_EXSTYLE);
        SetWindowLong(hwnd, GWL_EXSTYLE, extendedStyle | WS_EX_DLGMODALFRAME);
        SetWindowPos(hwnd, IntPtr.Zero, 0, 0, 0, 0, SWP_NOMOVE | SWP_NOSIZE | SWP_NOZORDER | SWP_FRAMECHANGED);
    }
} 
```

![在此处输入图像描述](../Images/95051909258319290721d70a9b677397.png)

我想知道为什么会发生这种情况，如果有人能解决这个问题，我将不胜感激。我正在使用 WPF 和 C#。

# r - 基于列值的行总和

> ID：15047742
> 
> 赞同：34
> 
> 时间：2013-02-24T01:36:30.923
> 
> 标签：r, plyr

我想对一列中具有相同值的行求和：

```
> df <- data.frame("1"=c("a","b","a","c","c"), "2"=c(1,5,3,6,2), "3"=c(3,3,4,5,2))
> df
  X1 X2 X3
1  a  1  3
2  b  5  3
3  a  3  4
4  c  6  5
5  c  2  2 
```

对于一列 (X2)，可以聚合数据以获得具有相同 X1 值的所有行的总和：

```
> ddply(df, .(X1), summarise, X2=sum(X2))
  X1 X2
1  a  4
2  b  5
3  c  8 
```

**如何对 X3 和除 X1 之外的任意数量的其他列执行相同操作？**

这是我想要的结果：

```
 X1 X2 X3
1  a  4  7
2  b  5  3
3  c  8  7 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-24T01:45:48.017

```
ddply(df, "X1", numcolwise(sum)) 
```

有关详细信息和示例，请参阅`?numcolwise`。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-24T01:48:38.147

`aggregate`可以通过公式界面轻松做到这一点：

```
aggregate(. ~ X1, data=df, FUN=sum)
##   X1 X2 X3
## 1  a  4  7
## 2  b  5  3
## 3  c  8  7 
```

等效地：

```
aggregate(cbind(X2, X3) ~ X1, data=df, FUN=sum) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-24T01:47:35.583

`aggregate`对于这些事情来说是一个很好的功能：

```
aggregate(df[,-1],df["X1"],sum)

  X1 X2 X3
1  a  4  7
2  b  5  3
3  c  8  7 
```

`numcolwise`以及来自 plyr的方法的基本 R 版本：

```
aggregate(df[,sapply(df,is.numeric)],df["X1"],sum) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-24T22:46:37.573

`data.table`内存效率和编码优雅的解决方案

```
library(data.table)
DT <- data.table(df)

DT[, lapply(.SD, sum), by = X1] 
```

`.SD`是由 的值定义的每个组的 data.table 的子集`X1`。`data.table`该软件包有 3 个有用的小插曲。

# javascript - Selenium WebDriver 无法通过 Id 查找元素，使用 Python

> ID：15047743
> 
> 赞同：0
> 
> 时间：2013-02-24T01:36:31.287
> 
> 标签：javascript, python, selenium, webdriver

我正在尝试提取仅在 JavaScript 运行后创建的元素，但我不断收到以下错误消息：

```
selenium.common.exceptions.NoSuchElementException: Message: u'Unable to locate element: {"method":"id","selector":"post-count"}' ; Stacktrace: Method FirefoxDriver.prototype.findElementInternal_ threw an error in file:///tmp/tmpittNsw/extensions/fxdriver@googlecode.com/components/driver_component.js 
```

我正在尝试在 cnn.com 上提取此元素。我的代码：

```
socket.setdefaulttimeout(30)
browser = webdriver.Firefox() # Get local session of firefox
browser.get(article_url_txt) # Load page

result = browser.find_element_by_id("post-count") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T15:32:33.820

您要查找的元素位于`iframe`.

以下为我做了诀窍：

```
from selenium.webdriver.support.wait import WebDriverWait

# ...

frame = WebDriverWait(browser, 30).until(lambda x: x.find_element_by_id("dsq1"))
browser.switch_to_frame(frame)
result = WebDriverWait(browser, 30).until( lambda x: x.find_element_by_id("post-count")) 
```

请注意，我包括使用`WebDriverWait(...).until(...)`以允许动态创建元素以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T11:21:15.747

您可以告诉 WebDriver 隐式等待，直到元素可见。

```
browser.implicitly_wait(30)
result = browser.find_element_by_id("post-count") 
```

# google-app-engine - GAE 云端点 - 部署后 Api 未更新

> ID：15047744
> 
> 赞同：20
> 
> 时间：2013-02-24T01:36:34.777
> 
> 标签：google-app-engine, google-cloud-endpoints

我开始在我的 GAE 项目中使用云端点，但遇到了 API 未在服务器上更新的问题。

*   localhost:8888/_ah/api/explorer 没问题。

但是当我部署时，没有任何变化。

*   myapp.appspot.com:8888/_ah/api/explorer 不好

进一步调查显示 url 端点更新示例：[https ://myapp.appspot.com/_ah/api/myapp/v1/foo/list](https://myapp.appspot.com/_ah/api/myapp/v1/foo/list)

但是加载的客户端api仍然不正确。例如：gapi.client.load('myapp', 'v1', callback, url); gapi.client.myapp.foo.list();

如果我将调用从 foo/list 更改为 foo/list2，其余 url 会更新，api 包不会。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-25T01:28:03.460

我将尝试涵盖人们可能遇到的两种情况：

# 客户端：

[Google APIs Explorer](https://developers.google.com/apis-explorer/) Web 应用程序会主动缓存，因此当您更新 API 服务器端以查看客户端中的更改时，您需要清除缓存或强制刷新。

# 服务器端（在已部署的生产 App Engine 应用中）：

如果您遇到部署问题，调试时有两个地方可以查看：

*   部署后检查您的管理员日志 ( [https://appengine.google.com/adminlogs?&app_id=s~YOUR-APP-ID )。](https://appengine.google.com/adminlogs?&app_id=s~YOUR-APP-ID)成功部署应用程序代码后，您应该会看到以下消息：

    ```
    Completed update of a new default version 
    ```

    不久之后，您应该会看到：

    ```
    Successfully updated API configuration 
    ```

    如果此消息表明 API 配置更新失败，则应重新部署。如果上述错误持续存在，您应该将错误通知我们。如果您没有看到任何关于您的 API 配置的消息，您应该检查该路径`/_ah/spi/.*`是否在您的路由配置中明确命名（`app.yaml`对于 Python，`web.xml`对于 Java）。

*   部署后检查您的应用程序日志 ( [https://appengine.google.com/logs?&app_id=s~YOUR-APP-ID )。](https://appengine.google.com/logs?&app_id=s~YOUR-APP-ID)部署完成后，Google 的 API 基础架构会向您的应用程序发出请求，`/_ah/spi/BackendService.getApiConfigs`以便您的 API 配置（作为 JSON）可以注册到 Google 的 API 基础架构，并可以创建所有与发现相关的配置。如果此请求没有以 200 完成，那么您的 API 更改将不会显示，因为 Google 的 API 基础架构将没有任何可注册的内容。

*   如果您始终收到`302`对 的请求的重定向`/_ah/spi/BackendService.getApiConfigs`，那是因为您（或您生成的 API 配置）已指定一个“bns 适配器”`http:`用作 API 根中的协议，但您的`web.xml`(Java) 或`app.yaml`(Python) 是必需的通过的路径`/_ah/spi`是安全的。这将使用`http:`作协议的请求被重定向（使用`302`）到与`https:`协议相同的页面。在进行实验之前，已在 Trusted Tester 论坛上对此进行[了讨论。](https://groups.google.com/d/topic/endpoints-trusted-testers/2jyFxm4WEjY/discussion)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T10:59:26.510

这就是发生在我身上的事情。

我在 localhost 上测试了我的端点，它运行良好。

我在 apppot 上部署了我的端点，当我向它发出请求时，我在浏览器中收到了“未找到”消息。

所以我查看了日志，当我向端点发出请求时，我在 favicon 文件上看到了 404 http 错误代码。实际上我忘了把那个文件放在我的部署中。

所以我用 favicon 文件重新部署了我的战争，404 http 代码消失了，端点在 apppot 上也能正常工作！

我意识到这可能听起来很愚蠢，但这是我所经历的。（我为我糟糕的英语道歉）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T11:45:56.027

我注意到，如果您第一次上传您的应用程序，而您的 web.xml 中没有以下内容：

```
 <security-constraint>
        <web-resource-collection>
            <url-pattern>/_ah/spi/*</url-pattern>
        </web-resource-collection>
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint> 
```

然后你的 bns 适配器将被设置为 http。当我之后添加上述内容时，我在 /_ah/spi/BackendService.getApiConfigs 上获得 302 http 代码，并且端点永远不会更新。

所以现在我已经恢复到不在 /_ah/spi 上使用 https 并且我的端点正在更新。我猜对于那些看到他们的端点没有被更新的人来说，他们会恢复到他们在 /_ah/spi/ 上为 ssl 设置的第一个配置。

偏航。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T17:22:44.420

当我使用此 URL 调用我的 API 时，我遇到了相同的错误**Not Found （404 错误代码）**

**https://MY_APP_ID.appspot.com/_ah/api/MY_SERVICE/v1/user**

我尝试了所有方法，最后通过从**WEB-INF中删除****发现**文件并仅保留**MY_SERVICE-v1.api 来修复**它，然后重新部署 API。它现在工作正常。

 ***** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-31T15:35:48.847

在部署新版本后，我也得到了陈旧的 API 发现文档，GAE 花了几分钟才开始为我提供新版本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-13T20:13:39.113

我遇到了同样的问题，我检查了管理日志、其他日志等……但我的 API 仍然没有更新到最新版本。

所以我决定检查我编写的最后一个方法的 API 代码（我正在使用 Java 7 编写）。我发现 GAE 不喜欢这样的陈述：

```
if (!blocked){ .... } 
```

我将其切换为：

```
if (blocked == false) { ... } 
```

它就像一个魅力。所以从表面上看，GAE 会扫描新的 API 方法并且不接受某些快捷方式。****

# ruby-on-rails - 对于 Rails 中的某些情况，如何实现是/否而不是布尔值？

> ID：15047745
> 
> 赞同：6
> 
> 时间：2013-02-24T01:37:01.553
> 
> 标签：ruby-on-rails, ruby, boolean

我是编程新手，但在我的应用程序中，我希望某些情况显示“是”或“否”而不是“真”或“假”。我不确定执行此操作的最佳方法，我阅读[了这个](https://stackoverflow.com/questions/3664181/rails-or-ruby-yes-no-instead-of-true-false)问题，但并不真正了解如何实现它。有人可以帮我吗，最好把它放在初始化程序、助手或其他地方吗？我希望能够在我希望显示是/否的任何地方调用我的视图中的某些内容，或者创建一个自定义数据类型，在我的迁移中我可以创建类似 t.boolean_yesno 的内容，然后为每一列我做它只会将true存储为yes，将false存储为no。

我很感激能帮助我走上正轨，我没有使用初始化程序或帮助程序的经验。谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-24T02:01:31.400

### 语言环境

我推荐使用 Rails 语言环境。这些使您能够为任何变量定义语言文本。例如，您的应用可以对说英语的人说“是”/“否”，对说法语的人说“Oui”/“Non”。

语言环境也快速、灵活且易于更改，因为它们独立于您的典型源代码。您可以看到语言环境如何将源代码逻辑与您呈现的文本很好地分开。

例子：

```
#./config/locales/en.yml
en:
  TrueClass: "Yes"
  FalseClass: "No"

#./app/views/items/index.html.erb
The value is <%= translate(myboolean.class) %>
The translate method can be abbreviated like this <%= t myboolean.class %> 
```

### 帮手

您可能会看到其他人使用帮助程序进行这样的编码：

```
#./app/helpers/application.rb
def yesno(x)
  x ? "Yes" : "No"
end

# ./app/views/items/index.html.erb
<%= yesno(myboolean) %> 
```

或者像这样使用常量：

```
#./app/helpers/application.rb
YESNO = {true: "Yes", false: "No"}

# ./app/views/items/index.html.erb
<%= YESNO[myboolean] %> 
```

这些都是快速和肮脏的类似 PHP 的解决方案。有更好的方法来做到这一点。

### 猴子补丁

您问过这个问题：[Rails (or Ruby): Yes/No 而不是 True/False](https://stackoverflow.com/questions/3664181/rails-or-ruby-yes-no-instead-of-true-false)。

```
# ./app/lib/extensions/true_class.rb
class TrueClass
  def yesno
   "Yes"
  end
end

# ./app/views/items/index.html.erb
<%= myboolean.yesno %> 
```

这被称为“猴子修补”Ruby 类。一般来说，做你想做的事情并不是一个好主意。为什么不？因为它破坏了现有的 Ruby 类以强制该方法进入您的所有代码。这在极少数情况下（恕我直言）可能没问题，但绝对不能用于将视图文本修补到逻辑类中（再次恕我直言）。

### 迁移数据类型怎么样？

您对创建自己的迁移数据类型有正确的总体想法，但对于您的情况来说，这可能是多余的，因为布尔值是典型的是/否的一对一匹配。您什么时候想创建自己的类型？例如，如果您想使用不同的数据库原语类型存储是/否，例如在一个数据库中使用位标志与在另一个数据库中使用字符串枚举。

### 装饰器

装饰器是任何应用程序的一般概念。在 Rails 中，装饰器是一种将视图逻辑添加到现有模型或类的方法。

Rails 语言环境本质上是装饰器。

对于更高级的需求，有一个很好的装饰器 gem，叫做“Draper”，它很容易使用。使用装饰器有助于查看代码组织良好、命名空间良好且更易于测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T02:19:26.900

最简单的设置方法是创建一个帮助方法，您可以将其放入应用程序帮助程序中。

```
# in app/helpers/application_helper.rb

def boolean_to_words(value)
  value ? "Yes" : "No"
end 
```

这类似于许多其他 Rails 转换助手，例如`number_to_currency`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T03:50:54.113

假设您`:boolean`的模型/数据库中有属性，您可以这样做：

```
class Foo < ActiveRecord::Base
  def bar
    self[:bar] ? 'Yes' : 'No'
  end
end 
```

每当您想要“是”/“否”值时，请致电`@foo.bar`. 每当您想要`true`/`false`值时，请调用`@foo.bar?`或`@foo[:bar]`。

# ruby-on-rails - Rails API 使用 devise auth_token 注销已登录用户

> ID：15047747
> 
> 赞同：0
> 
> 时间：2013-02-24T01:37:52.787
> 
> 标签：ruby-on-rails, api, authentication, devise, token

所以这是场景：

用户可以通过设备登录正常登录。登录后，用户仪表板已嵌入闪存，可在同一服务器上调用 api（当前均位于 localhost:3000）。

使用 devise 的 token_authenticable 使用提供的 auth_token 调用 API。

问题就出现在这里。

一旦发出 API 请求，登录的用户就会被注销。

我已经做了很多挖掘工作，但没有找到任何关于如何解决这个问题的可靠线索。

我认为问题是因为对 API 的调用覆盖了浏览器设置的用户 cookie。我通过观察 auth cookie 被设置并在调用 API 后被覆盖来测试这一点。

仅供参考，我正在使用 Chrome 进行开发。

任何帮助是极大的赞赏。如果我没有详细说明，请告诉我是否可以提供任何其他信息来帮助您诊断问题。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T08:25:51.320

我认为问题在于您没有将 CSRF 令牌发布到您的服务器。CSRF 保护在所有 Rails 应用程序上默认开启。您可以通过在控制器中添加以下行来绕过它。

```
skip_before_filter  :verify_authenticity_token 
```

# localhost - 通过“computername.local”访问停止工作

> ID：15047751
> 
> 赞同：-1
> 
> 时间：2013-02-24T01:38:56.550
> 
> 标签：localhost, connect, hostname, gruntjs

不知何故，我最近失去了访问在我的 Mac 上本地运行的开发服务器的能力，使用`http://mycomputername.local:3000`

我曾经能够从本地网络上的任何其他设备访问它。现在这个地址甚至不能在我自己的机器上工作——运行服务器的那个。IE，我只能在我的机器上使用`localhost`. 即使使用IP地址也不起作用。

**编辑：** 服务器通过 grunt-contrib-connect 使用 nodejs 的`connect`模块。这个问题原来是特定于这台服务器的——而不是特定于我的机器。解决方案在配置中（请参阅下面的答案）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:06:28.233

问题解决了。问题特定于 Grunt.js，它没有配置为绑定到所有接口。

`hostname:''`通过在 grunt-contrib-connect 配置中设置进行修复，如下所述：http: [//github.com/gruntjs/grunt-contrib-connect/issues/17](http://github.com/gruntjs/grunt-contrib-connect/issues/17)。

# ruby - 如何在 Nokogiri 中使用 XPath 分词器功能？

> ID：15047752
> 
> 赞同：0
> 
> 时间：2013-02-24T01:39:01.450
> 
> 标签：ruby, xpath, nokogiri

我正在尝试使用 Nokogiri 和 XPath 从以下 HTML 中提取信息。

```
<p>Friday, February 1<br><strong>Apple <br> Orange</strong></p>

e.xpath('./text()[following-sibling::br]') 
```

给我日期就好了。然后我想抓取强节点内的文本并在 br 上拆分。可能有许多水果被 br 隔开，也可能只有一个没有 br。理想情况下，我希望在 xpath 而不是代码中完成此操作，因为我本质上是通过 JSON 定义一堆解析器。

现在我在想我应该使用标记器函数并在强标记中传递文本。我认为应该是这样的：

```
e.xpath('./strong[fn::tokenize(.,"<br>")]') 
```

并且也尝试过

```
e.xpath('fn::tokenize(./strong,"<br>")') 
```

但我得到：

```
.../gems/nokogiri-1.5.6/lib/nokogiri/xml/node.rb:159:in `evaluate': Invalid expression: ./strong/text()[fn::tokenize(.,"br")] (Nokogiri::XML::XPath::SyntaxError) 
```

我在（第 139 行）发生错误的方法的文档之后对我的用法进行建模：

```
node.xpath('.//title[regex(., "\w+")]',... 
```

# vb.net - VB.NET 从 BackgroundWorker 更改进度条值？

> ID：15047753
> 
> 赞同：0
> 
> 时间：2013-02-24T01:39:40.003
> 
> 标签：vb.net

我有 2 个进度条。现在我在我的代码中做了一些其他的事情，这需要时间来执行，因此需要使用`backgroundworker`. 我不太清楚如何使用`backgroundworker`. 我没有在这里包含的其余代码执行得很好，但是`progressbar`值没有改变，它们的文本也没有改变。我将如何实现这一目标？

```
Private Sub BackgroundWorker1_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork

    Dim LM As RegistryKey = Registry.LocalMachine
    Dim LM_SW As RegistryKey = LM.OpenSubKey("Software")
    Dim LM_MS As RegistryKey = LM_SW.OpenSubKey("Microsoft")
    Dim LM_Win As RegistryKey = LM_MS.OpenSubKey("Windows")
    Dim LM_CV As RegistryKey = LM_Win.OpenSubKey("CurrentVersion")
    Dim AppPaths As RegistryKey = LM_CV.OpenSubKey("App Paths")
    Dim NrOfFiles1 As Integer = AppPaths.SubKeyCount

    ProgressBar2.Maximum = NrOfFiles1
    ProgressBar1.Maximum = 100

    For Each FormatString As String In AppPaths.GetSubKeyNames()
        ProgressBar2.Value += 1 / NrOfFiles1
        ProgressBar1.Value += 1 * ProgressBar2.Value / 100 / 10
        ProgressBar1.Text = ProgressBar1.Value & "%"
        ProgressBar2.Text = ProgressBar2.Value & "%"
    Next

    ProgressBar2.Value = 0

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T01:51:50.777

使用 Backgroundworker 的 ProgressChanged 事件。在您的 DoWork 方法中，调用

```
BackgroundWorker1.ReportProgress(Percentage) 
```

其中百分比是整数值

然后在 ProgressChanged 事件中，您可以操纵进度条。

```
Private Sub backgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As DoWorkEventArgs) Handles backgroundWorker1.DoWork

     Dim worker As BackgroundWorker = CType(sender, BackgroundWorker)

     '''YOUR OTHER CODE
     worker.ReportProgress(PERCENTAGE)
     '''YOUR OTHER CODE

    End Sub 

    ' This event handler updates the progress. 
    Private Sub backgroundWorker1_ProgressChanged(ByVal sender As System.Object,         ByVal e As ProgressChangedEventArgs) Handles backgroundWorker1.ProgressChanged
        ProgressBar1.Text = e.ProgressPercentage.ToString() & "%"
        ProgressBar1.Value  = e.ProgressPercentage
    End Sub 
```

# powershell - 如何通过 powershell 运行 GoogleAppsManager

> ID：15047755
> 
> 赞同：1
> 
> 时间：2013-02-24T01:40:42.467
> 
> 标签：powershell, google-apps

我正在做一个 powershell 来加载 .csv 文件并执行 Google Apps Manager 命令。

代码：

```
$list = Import-Csv usuarios.csv
foreach ($entry in $list)
{
    .\gam.exe create user $($entry.emailaddress) firstname $($entry.FirstName) lastname $($entry.LastName) password $($entry.Password)
} 
```

我遇到了这个问题：

Google Apps Manager 2.55 jay@ditoweb.com (Jay Lee) Python 2.7.3 32 位最终版 Windows-XP-5.1.2600-SP3 x86

用法：游戏 [选项]...

谷歌应用管理器。检索或设置 Google Apps 域、用户、组和别名设置。可以在以下位置找到详尽的命令列表：[http ://code.google.com/p/google-apps-manager/wiki](http://code.google.com/p/google-apps-manager/wiki)

示例： gam info domain gam create user jsmith firstname John lastname Smith password secretpass gam update user jsmith 在 gam.exe 上暂停更新组公告添加成员 jsmith ...

我已经搜索过它并没有找到任何参考。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:54:02.887

我发现了问题

正确代码：

```
$list = Import-Csv usuarios.csv
foreach ($entry in $list)
{  
   .\gam.exe create user $entry.username firstname $entry.firstname lastname $entry.lastname password $entry.password
} 
```

谢谢你。

# caching - Hadoop——数据块缓存技术

> ID：15047756
> 
> 赞同：1
> 
> 时间：2013-02-24T01:40:49.447
> 
> 标签：caching, hadoop, mapreduce, hdfs

我正在运行一些实验来基准测试（通过 map-reduce）读取和处理存储在 HDFS 上的具有不同参数的数据所需的时间。我使用 pig 脚本来启动 map-reduce 作业。由于我经常使用同一组文件，因此我的结果可能会因为文件/块缓存而受到影响。

我想了解在 map-reduce 环境中使用的各种缓存技术。

假设存储在 HDFS 上的文件`foo`（包含一些要处理的数据）占用`1`HDFS 块并存储在 machine 中`STORE`。在 map-reduce 任务期间，机器`COMPUTE`通过网络读取该块并对其进行处理。缓存可以发生在两个级别：

1.  缓存在机器内存中`STORE`（内存中文件缓存）
2.  缓存在机器的内存/磁盘中`COMPUTE`。

我很确定`#1`缓存会发生。我想确定是否会发生类似的`#2`事情？从[这里](https://stackoverflow.com/questions/10099816/what-does-local-caching-of-data-mean-in-the-context-of-this-article)的帖子来看，似乎没有进行客户端级别的缓存，因为`COMPUTE`在刷新缓存之前，同一台机器上不太可能再次需要缓存的块。

此外，hadoop 分布式缓存是否仅用于将任何特定于应用程序的文件（不是特定于任务的输入数据文件）分发到所有任务跟踪器节点？还是任务特定的输入文件数据（如`foo`文件块）缓存在分布式缓存中？我假设`local.cache.size`相关参数只控制分布式缓存。

请澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T10:13:14.990

在 HDFS 中应用的唯一缓存是操作系统缓存以最小化磁盘访问。所以如果你从一个数据节点访问一个块，如果那里没有其他事情发生，它很可能会被缓存。

在您的客户端，这取决于您对块执行的操作。如果您直接将其写入磁盘，那么您的客户端操作系统也很可能会将其缓存。

分布式缓存仅适用于需要在您的作业启动任务的集群中分布的 jar 和文件。因此，这个名字有点误导，因为它什么都没有“缓存”。

# c++ - __cdecl、__stdcall 和 __fastcall 都以完全相同的方式调用？

> ID：15047758
> 
> 赞同：8
> 
> 时间：2013-02-24T01:40:53.017
> 
> 标签：c++, visual-c++, assembly, masm, calling-convention

我使用 Visual C++ 2010 和 MASM 作为我的 x64 汇编程序。
这是我的 C++ 代码：

```
// include directive
#include "stdafx.h"
// functions
extern "C" int Asm();
extern "C" int (convention) sum(int x, int y) { return x + y; }
// main function
int main()
{
    // print asm
    printf("Asm returned %d.\n", Asm());
    // get char, return
    _getch();
    return EXIT_SUCCESS;
} 
```

还有我的汇编代码：

```
; external functions
extern sum : proc
; code segment
.code
Asm proc
    ; create shadow space
    sub rsp, 20o
    ; setup parameters
    mov ecx, 10
    mov edx, 15
    ; call
    call sum
    ; clean-up shadow space
    add rsp, 20o
    ; return
    ret
Asm endp
end 
```

我这样做的原因是我可以学习不同的调用约定。我将制定 sum 的调用约定 stdcall，并修改 asm 代码，使其以“stdcall”方式调用 sum。一旦我开始工作，我会做它，比如说，fastcall，然后以 asm 的“fastcall”方式调用它。

但是现在看看我的汇编代码。当我使用该代码时，无论 sum 是 stdcall、fastcall 还是 cdecl，它都会编译、执行并打印 25 作为我的 sum。

我的问题：如何以及为什么 __cdecl、__stdcall 和 __fastcall 都可以以完全相同的方式调用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-24T01:50:05.973

问题是您正在为 x64 目标进行编译。来自[MSDN](http://msdn.microsoft.com/en-us/library/ms235286.aspx)

> 给定扩展的寄存器集，x64 只使用 __fastcall 调用约定和基于 RISC 的异常处理模型。__fastcall 模型对前四个参数使用寄存器，并使用堆栈帧来传递其他参数。

切换到针对 x86 目标进行编译，您应该能够看到各种调用约定在起作用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T01:55:46.163

据我所知，x64 仅使用 __fastcall 约定。__cdecl 和 stdcall 将被编译为 __fastcall。

# powershell - TFS 构建定义中的 Powershell 脚本

> ID：15047759
> 
> 赞同：2
> 
> 时间：2013-02-24T01:40:54.117
> 
> 标签：powershell, tfsbuild

在 TFS2010 中使用 Windows 工作流，我设置了一个 PS 脚本以在构建过程结束时运行。[按照http://www.ewaldhofman.nl/post/2010/11/09/Part-14-Execute-a-PowerShell-script.aspx](http://www.ewaldhofman.nl/post/2010/11/09/Part-14-Execute-a-PowerShell-script.aspx)中的示例到 T 并且它在构建定义的流程部分中显示正确。但是，无论我将 arg 设置为脚本的 dir 路径，结果总是......

术语“.\DataServiceCpy.ps1”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

我已经尝试了 10 种路径变体。我启用了 PS 脚本在构建服务器上运行，并且可以从 cmd 提示符成功运行脚本。

有什么明显我忽略的吗？

非常感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-18T18:39:34.680

在 TFS 2013（其他人不确定）中存在 RunScript 活动，该活动被放置在工具箱的“团队基础构建活动”中。当我想执行一些自定义脚本时，我更喜欢那个活动。

要使用它，您需要首先创建参数（至少一个用于脚本路径）！要创建参数，请遵循此[帖子](http://www.ewaldhofman.nl/post/2010/04/27/Customize-Team-Build-2010-e28093-Part-2-Add-arguments-and-variables.aspx)。

在为脚本路径创建参数后，您需要将自己导航到参数选项卡上的“元数据”参数。添加您创建的参数并在“编辑器”字段中添加以下语句：Microsoft.TeamFoundation.Build.Controls.ServerFileBrowserEditor, Microsoft.TeamFoundation.Build.Controls

之后转到 RunScript 活动的“属性”并在 FilePath 中插入以下语句：AdvancedBuildSettings.GetValue(Of String)(" **PUT_HERE_YOUR_ARGUMENT_NAME** ", String.Empty)

请注意，您需要在最后一条语句中准确插入您为脚本路径创建的参数的名称。

完成后：

*   检查您的更改；
*   转到构建定义“流程”选项卡，然后在“构建流程模板”部分按“刷新”按钮；

这些步骤将允许您浏览源代码管理并选择您想要的脚本，而无需提供路径。

如果您不需要插入新活动，则只需修改旧参数即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T00:44:42.443

我使用同一个博客以同样的方式做到了这一点，它对我有用。我看到的唯一区别是我的 Powershell 脚本位于解决方案/项目文件夹中，而在构建定义中，我使用相对路径指定了 powershell 脚本。具有相对路径适用于 ConvertWorkspaceItem 活动。您可能需要检查（输出）在 ConverntWorkspaceItem 活动之后获得的文件路径，以查看这是否是正确的路径。

我希望这会有所帮助。

# django - 包含通用功能的 Django 基础项目

> ID：15047760
> 
> 赞同：0
> 
> 时间：2013-02-24T01:41:09.920
> 
> 标签：django

有人知道安装了以下常见应用程序的任何基本开源 Django 项目吗：

1.  使用模板进行本地注册。
2.  打开授权注册。
3.  创建的基本模板。
4.  包括 Twitter 引导程序
5.  带有菜单应用程序的主页。
6.  也许还有一些其他常见的事情。

您可以从一些东西开始，然后立即跳转到您的特殊功能和设计。我知道的唯一项目是[django-skel](https://github.com/rdegges/django-skel) 但它似乎不包括所有真正常见的东西。 `Pinax`看起来像是 django-1.3 版本的支持下降了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T01:53:37.313

django-skel 是 Django 项目的合理配置，它清除了您在启动项目时需要执行的许多配置。

现在看起来您正在寻找的东西离[Pinax](http://pinaxproject.com/)球场更近了。

话虽如此，这不会花费您很长时间来设置自己，并且您不必处理诸如 pinax albiet 之类的遗留问题，它可以让您快速入门。他们有一堆可重复使用的应用程序，您可以将它们串在一起以获得您想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:56:35.677

很抱歉在没有适当研究的情况下打扰，但这是我刚刚发现的东西，它看起来非常棒：

```
$ mkvirtualenv mysite
$ pip install Django==1.4.1
$ django-admin.py startproject --template=https://github.com/pinax/pinax-project-account/zipball/master mysite
$ cd mysite
$ pip install -r requirements.txt
$ python manage.py syncdb && python manage.py runserver 
```

# javascript - 使复选框可以像单选按钮一样一次选择一个

> ID：15047766
> 
> 赞同：0
> 
> 时间：2013-02-24T01:42:00.223
> 
> 标签：javascript, jquery

我正在寻找一些帮助，使复选框的行为类似于单选按钮，因为组中的一个只能使用 jQuery 一次选择。

首先，为什么不使用单选按钮？因为我希望这些输入形式也无法选择/无法检查，因此存在无法检查它们的可能性。

所以我有 9 个输入类型复选框，它们分为 3 组，每组 3 个，而不是表单，只是根据这 3 个与 name 属性具有相同值的事实进行分组。

所有 9 个复选框都有 .secondary-input 类，但只有 3 个的名称为 1，接下来的 3 个名称为 2，最后三个的名称为 3。

我要完成的是一次只检查组中的一个，并且可以取消选中一个，以便检查组中的任何一个。

我将非常感谢实现这一目标的所有帮助。

我找到了一个这样的 JSFiddle，但是 jQuery 不能通过 name 属性与我的组系统一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T01:47:08.527

如果它们都具有相同的名称，您可以取消选中具有相同名称属性的其他名称：

```
$(":checkbox").on('change', function () {
    $('[name="' + $(this).attr('name') + '"]').not(this).prop('checked', false);
}); 
```

[http://jsfiddle.net/F2JPP/](http://jsfiddle.net/F2JPP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:47:22.300

不确定这种语言的具体细节，但您可以循环浏览所有复选框项目并切换任何打开和应该关闭的选项吗？伪代码：

```
for checkbox in checkboxes:
    if checkbox.checked == true %% checkbox != selectedCheckbox:
        checkbox.toggle 
```

# html - 无法将 div 固定在页面上

> ID：15047768
> 
> 赞同：0
> 
> 时间：2013-02-24T01:42:30.547
> 
> 标签：html, css

我有一个我一直想固定在页面顶部的 div，但它似乎不起作用.. 这是 div 代码本身

```
 <div class="up-label">
    <p><span>Testing 123.</span><br>
      Blah BLah </p>
  </div> 
```

CSS

```
.up-label {
 position: fixed;
 top: 20px;
 left: 20px 
 /*
 width: auto;
 margin:0 auto;
 margin-top:-6px;
 padding:10px; */
} 
```

它似乎只是停留在它所在的位置，而不是固定在窗口中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T04:18:34.847

可能你在IE6下，IE6不支持position:fixed，用js来修复。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-24T01:52:09.497

代码似乎没有任何问题。可能还有其他问题，例如，它使用外部 css 文件，确保它正确附加到您的 html 文件。还可以尝试在不同的浏览器（google chrome、firefox、opera 等）中进行测试，以确保它不是特定的浏览器不接受或不理解你使用的 css。

# haskell - Hask 或 Agda 有均衡器吗？

> ID：15047775
> 
> 赞同：36
> 
> 时间：2013-02-24T01:44:19.000
> 
> 标签：haskell, agda, category-theory

我有点不确定这是一个 math.SE 问题还是一个 SO 问题，但我怀疑数学家一般不太可能特别了解或关心这一类别，而 Haskell 程序员可能会这样做。

因此，我们知道**Hask 或多或少**有产品（当然，我在这里使用的是理想化的 Hask）。我对它是否有均衡器很感兴趣（在这种情况下它会有所有有限的限制）。

直觉上似乎不是，因为你不能像在集合上那样进行分离，所以子对象通常似乎很难构造。但是对于您想提出的任何特定情况，似乎您可以通过在**Set**中计算均衡器并对其进行计数来破解它（毕竟，每种 Haskell 类型都是可数的，并且每个可数集都是同构于有限类型或自然数，Haskell 都有）。所以我看不出我将如何寻找反例。

现在，Agda 似乎更有希望了：在那里形成子*对象*相对容易。明显的 sigma 类型`Σ A (λ x → f x == g x)`是均衡器吗？如果细节不起作用，它在*道德上*是一个均衡器吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-28T13:20:22.547

**tl;博士提议的候选人不是一个均衡器，但它不相关的对应物是**

Agda 的均衡器候选人看起来不错。所以让我们试试吧。我们需要一些基本的工具包。这是我的拒绝 ASCII 依赖对类型和同质内涵平等。

```
record Sg (S : Set)(T : S -> Set) : Set where
  constructor _,_
  field
    fst : S
    snd : T fst
open Sg

data _==_ {X : Set}(x : X) : X -> Set where
  refl : x == x 
```

这是您的两个功能均衡器的候选人

```
Q : {S T : Set}(f g : S -> T) -> Set
Q {S}{T} f g = Sg S \ s -> f s == g s 
```

随着`fst`投影发送`Q f g`到`S`。

它说什么：元素 of`Q f g`是`s`源类型的元素，以及`f s == g s`. 但这是均衡器吗？让我们试着做到这一点。

要说均衡器是什么，我应该定义函数组合。

```
_o_ : {R S T : Set} -> (S -> T) -> (R -> S) -> R -> T
(f o g) x = f (g x) 
```

所以现在我需要证明任何`h : R -> S`可以识别`f o h`并且`g o h`必须通过候选人的因素`fst : Q f g -> S`。我需要提供其他组件`u : R -> Q f g`以及确实`h`因素为`fst o u`. 图片如下：`(Q f g , fst)`是一个均衡器，如果每当图表通勤时没有`u`，有一种独特的方式可以添加`u`图表仍然通勤。

![均衡器图](../Images/46ca741745600d2798938f18fd3856d7.png)

这就是中介的存在`u`。

```
mediator : {R S T : Set}(f g : S -> T)(h : R -> S) ->
           (q : (f o h) == (g o h)) ->
           Sg (R -> Q f g) \ u -> h == (fst o u) 
```

`S`显然，我应该选择相同的元素`h`。

```
mediator f g h q = (\ r -> (h r , ?0)) , ?1 
```

留给我两项证明义务

```
?0 : f (h r) == g (h r)
?1 : h == (\ r -> h r) 
```

现在，`?1`可以就像`refl`Agda 的定义等式具有函数的 eta 定律一样。因为`?0`，我们是被祝福的`q`。同等功能尊重应用

```
funq : {S T : Set}{f g : S -> T} -> f == g -> (s : S) -> f s == g s
funq refl s = refl 
```

所以我们可以采取`?0 = funq q r`。

但是让我们不要过早地庆祝，因为中介态射的存在是不够的。我们还需要它的独特性。而这里的轮子很可能会变得不稳定，因为`==`它是*内涵*的，所以唯一性意味着只有一种方法可以*实现*中介映射。但是，我们的假设也是内涵的……

这是我们的证明义务。我们必须证明任何其他中介态射等于 选择的那个`mediator`。

```
mediatorUnique :
  {R S T : Set}(f g : S -> T)(h : R -> S) ->
  (qh : (f o h) == (g o h)) ->
  (m : R -> Q f g) ->
  (qm : h == (fst o m)) ->
  m == fst (mediator f g h qh) 
```

我们可以立即替换 via`qm`并得到

```
mediatorUnique f g .(fst o m) qh m refl = ?

? :  m == (\ r -> (fst (m r) , funq qh r)) 
```

看起来不错，因为 Agda 有记录的 eta 定律，所以我们知道

```
m == (\ r -> (fst (m r) , snd (m r))) 
```

但是当我们尝试制作时`? = refl`，我们得到了投诉

```
snd (m _) != funq qh _ of type f (fst (m _)) == g (fst (m _)) 
```

这很烦人，因为身份证明是唯一的（在标准配置中）。现在，您可以通过假设外延性并使用其他一些关于平等的事实来摆脱这种情况

```
postulate ext : {S T : Set}{f g : S -> T} -> ((s : S) -> f s == g s) -> f == g

sndq : {S : Set}{T : S -> Set}{s : S}{t t' : T s} ->
       t == t' -> _==_ {Sg S T} (s , t) (s , t')
sndq refl = refl

uip : {X : Set}{x y : X}{q q' : x == y} -> q == q'
uip {q = refl}{q' = refl} = refl

? = ext (\ s -> sndq uip) 
```

但这太过分了，因为唯一的问题是烦人的等式证明不匹配：实现的可计算部分在鼻子上匹配。所以解决方法是使用*无关紧要*的工作。我用 istential 量词代替`Sg`，`Ex`它的第二个分量用点标记为不相关。现在，我们使用哪种证据证明证人是好的并不重要。

```
record Ex (S : Set)(T : S -> Set) : Set where
  constructor _,_
  field
    fst : S
    .snd : T fst
open Ex 
```

并且新的候选均衡器是

```
Q : {S T : Set}(f g : S -> T) -> Set
Q {S}{T} f g = Ex S \ s -> f s == g s 
```

整个施工过程和以前一样，除了最后一个义务

```
? = refl 
```

被接受！

所以是的，即使在内涵设置中，eta 定律和将字段标记为不相关的能力也给了我们均衡器。

**在这个构造中没有涉及不可判定的类型检查。**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-27T13:58:38.270

## 哈斯克

Hask 没有均衡器。要记住的重要一点是，考虑类型（或任何类别中的对象）及其同构类确实需要考虑箭头。您对基础集的说法是正确的，但是具有同构基础集的类型当然不一定是同构的。Hask 和 Set 之间的一个区别是 Hask 的箭头必须是可计算的，实际上对于理想化的 Hask，它们必须是全部的。

我花了一段时间试图提出一个真正可以辩护的反例，并发现一些参考资料表明它无法做到，但没有证据。但是，如果您愿意，我确实有一些“道德”反例；我无法证明 Haskell 中不存在均衡器，但这似乎是不可能的！

## 示例 1

```
f, g: ([Int], Int) -> Int

f (p,v) = treat p as a polynomial with given coefficients, and evaluate p(v).
g _ = 0 
```

均衡器“应该”是所有对 (p,n) 的类型，其中 p(n) = 0，以及将这些对注入 ([Int], Int) 的函数。由希尔伯特的第 10 个问题，这个集合是不可判定的。在我看来，这应该排除它是 Haskell 类型的可能性，但我无法证明这一点（是否有可能有一些奇怪的方法来构建这种没有人发现的类型？）。也许我没有连接一两个点——也许证明这是不可能的并不难？

## 示例 2

假设您有一种编程语言。你有一个编译器，它接受源代码和输入并生成一个函数，函数的固定点是输出。（虽然我们没有这样的编译器，但类似这样的指定语义并非闻所未闻）。所以你有了

```
compiler : String -> Int -> (Int -> Int) 
```

(Un)curry 到一个函数中

```
compiler' : (String, Int, Int) -> Int 
```

并添加一个功能

```
id' : (String, Int, Int) -> Int
id' (_,_,x) = x 
```

那么编译器的均衡器“id”将是源程序、输入、输出的三元组的集合——这是不可计算的，因为编程语言是完全通用的。

## 更多示例

选择你最喜欢的不可判定问题：它通常涉及判定一个对象是否是某个集合的成员。您通常有一个总函数，可用于检查特定对象的此属性。您可以使用此函数创建一个均衡器，其中类型应该是您不可判定集合中的所有项目。这就是前两个例子的来源，而且还有很多。

## 阿格达

我对Agda不太熟悉。我的直觉是你的 sigma-type 应该是一个均衡器：你可以写下类型，以及必要的注入函数，它看起来完全满足定义。但是，作为一个不使用 Agda 的人，我觉得我真的没有资格去查看细节。

但真正的实际问题是对 sigma 类型的类型检查并不总是可计算的，因此这样做并不总是有用的。在上面的所有示例中，您可以写下您提供的 Sigma 类型，但是如果没有证明，您将无法轻松检查某物是否属于该类型的成员。

顺便说一句，这就是为什么 Haskell 不应该有均衡器的原因：如果有，类型检查将是不可判定的！依赖类型是让一切都打勾的原因。他们应该能够在其类型中表达有趣的数学结构，而 Haskell 则不能，因为它的类型系统是可决定的。所以，我自然会期望理想化的 Agda 具有所有有限的限制（否则我会感到失望）。其他依赖类型的语言也是如此。例如，Coq 绝对应该有所有限制。

# php - php maven 无效的描述符

> ID：15047777
> 
> 赞同：2
> 
> 时间：2013-02-24T01:44:24.963
> 
> 标签：php, zend-framework, maven, maven-plugin

我正在尝试遵循 Maven 和 Zend 的 10 分钟安装指南（[http://www.php-maven.org/branches/2.0-SNAPSHOT/php-zend-10min.html](http://www.php-maven.org/branches/2.0-SNAPSHOT/php-zend-10min.html)）但是当我运行“mvn package”时在我的项目中，我得到

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager getting plugin 'org.apache.maven.plugins:maven-clean-plugin': Plugin 'org.apache.maven.plugins:maven-clean-plugin:2.2' has an invalid descriptor:
1) Plugin's descriptor contains the wrong group ID: org.phpmaven
2) Plugin's descriptor contains the wrong artifact ID: maven-php-plugin
3) Plugin's descriptor contains the wrong version: 2.0.2 
```

每时每刻。

我已经尝试删除我的本地存储库，但它没有用。

mvn package -e 返回：

```
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] Internal error in the plugin manager getting plugin 'org.apache.maven.plugins:maven-plugin-plugin': Plugin 'org.apache.maven.plugins:maven-plugin-plugin:2.4.3' has an invalid descriptor:
1) Plugin's descriptor contains the wrong group ID: org.phpmaven
2) Plugin's descriptor contains the wrong artifact ID: maven-php-plugin
3) Plugin's descriptor contains the wrong version: 2.0.2
[INFO] ------------------------------------------------------------------------
[INFO] Trace org.apache.maven.lifecycle.LifecycleExecutionException: Internal error in the plugin manager getting plugin 'org.apache.maven.plugins:maven-plugin-plugin': Plugin 'org.apache.maven.plugins:maven-plugin-plugin:2.4.3' has an invalid descriptor:
1) Plugin's descriptor contains the wrong group ID: org.phpmaven
2) Plugin's descriptor contains the wrong artifact ID: maven-php-plugin
3) Plugin's descriptor contains the wrong version: 2.0.2
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1544)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.getMojoDescriptor(DefaultLifecycleExecutor.java:1851)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.bindLifecycleForPackaging(DefaultLifecycleExecutor.java:1311)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.constructLifecycleMappings(DefaultLifecycleExecutor.java:1275)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:534)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
at org.codehaus.classworlds.Launcher.main(Launcher.java:375)
Caused by: org.apache.maven.plugin.PluginManagerException: Plugin 'org.apache.maven.plugins:maven-plugin-plugin:2.4.3' has an invalid descriptor:
1) Plugin's descriptor contains the wrong group ID: org.phpmaven
2) Plugin's descriptor contains the wrong artifact ID: maven-php-plugin
3) Plugin's descriptor contains the wrong version: 2.0.2
at org.apache.maven.plugin.DefaultPluginManager.addPlugin(DefaultPluginManager.java:330)
at org.apache.maven.plugin.DefaultPluginManager.verifyVersionedPlugin(DefaultPluginManager.java:224)
at org.apache.maven.plugin.DefaultPluginManager.verifyPlugin(DefaultPluginManager.java:184)
at org.apache.maven.plugin.DefaultPluginManager.loadPluginDescriptor(DefaultPluginManager.java:1642)
at org.apache.maven.lifecycle.DefaultLifecycleExecutor.verifyPlugin(DefaultLifecycleExecutor.java:1540)
... 19 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T20:35:02.697

在 php-parent-pom/pom.xml 中声明 maven-php-plugin 的方式存在错误

编辑此文件并删除 <extensions> 节点，并将 <extensions>true</extensions> 添加到 maven-php-plugin <plugin> 定义中

# android - 片段作为静态类

> ID：15047779
> 
> 赞同：5
> 
> 时间：2013-02-24T01:44:37.793
> 
> 标签：android, android-fragments

只是一个简短的问题：在我在 android 文档中看到的所有示例中，片段都是静态内部类。这是Android的要求吗？还是可以将它们设置为常规内部类？那里有足够了解Android内部的人来提供答案吗？

从我在 OCJP 文档中读到的内容来看，这些静态内部类根本不应该是类，而只是包含它们的类的静态成员，就像任何静态方法一样 - 例如 main。

感谢您的见解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T01:59:19.840

> 这是Android的要求吗？还是可以将它们设置为常规内部类？

它们不能是常规（非静态）内部类。只有外部类的实例可以创建常规内部类的实例，Android 需要为您重新创建片段（例如，在配置更改时）。片段必须是常规 Java 类或静态内部类，并且它们需要有一个公共的零参数构造函数。

> 这些静态内部类根本不应该是类，而只是包含它们的类的静态成员，就像任何静态方法一样 - 例如 main。

我不知道你是怎么得出这种解释的。

# c# - 切换到 MVVM 问题

> ID：15047786
> 
> 赞同：0
> 
> 时间：2013-02-24T01:45:58.020
> 
> 标签：c#, wpf, xaml, mvvm

我是 MVVM 的新手。目前我所有的代码都写在链接到 XAML 的 .cs 文件中。我想切换到 MVVM 但遇到困难。我将尝试解释原因：

我在 .cs 文件中指定了许多不同的 Chart 控件和输入数据，我直接访问 Chart 对象并以编程方式使用它的属性为我的图表添加点。

例子：

```
foreach (var group in qcv.Groups)
{
    AreaSeries areaSeries = new AreaSeries();
    areaSeries.CombineMode = Telerik.Charting.ChartSeriesCombineMode.Stack;
    areaSeries.ValueBinding = new PropertyNameDataPointBinding("Rev");
    areaSeries.CategoryBinding = new PropertyNameDataPointBinding("Date");
    areaSeries.ItemsSource = group as IEnumerable;
    RadChart1.Series.Add(areaSeries);
} 
```

但只要我切换到 MVVM`RadChart1`对象就无法在 ViewModel 文件中访问。如何使其在 ViewModel 类中可见，或者您可以建议更好的方法如何获取该对象并为我的图表提供输入而不更改我的代码？

我的 XAML 文件：

```
<UserControl x:Class="FrontEnd.RevenueChart"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:FrontEnd"
             mc:Ignorable="d" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation" HorizontalAlignment="Stretch" >

    <UserControl.DataContext>
        <local:RevenueChartViewModel/>
    </UserControl.DataContext>
    <Grid>

        <telerik:RadCartesianChart HorizontalAlignment="Stretch" x:Name="RadChart1" Palette="Metro" Zoom="10,1">

            <telerik:RadCartesianChart.HorizontalAxis>
                <telerik:CategoricalAxis/>
            </telerik:RadCartesianChart.HorizontalAxis>

            <telerik:RadCartesianChart.VerticalAxis>
                <telerik:LinearAxis/>
            </telerik:RadCartesianChart.VerticalAxis>

            <telerik:RadCartesianChart.Behaviors>
                <telerik:ChartPanAndZoomBehavior ZoomMode="Both">
                </telerik:ChartPanAndZoomBehavior>
            </telerik:RadCartesianChart.Behaviors>
        </telerik:RadCartesianChart>
    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:24:18.633

从视图模型访问视图控件是 MVVM 领域的一大禁忌。你必须颠倒你的想法：而不是添加东西到`Series`，绑定`Series`到东西。使用`SeriesMapping`s 获取图表控件以将您的组转换为系列。这里有一些现成的代码可以帮助您入门：

```
<telerik:RadCartesianChart HorizontalAlignment="Stretch"
  Palette="Metro" Zoom="10,1"
  Series="{Binding Groups}"><!-- <=== this is the important part -->

  <telerik:RadChart.SeriesMappings>
    <telerikCharting:SeriesMapping LegendLabel="Product Sales">
      <telerikCharting:SeriesMapping.SeriesDefinition>
        <telerikCharting:AreaSeriesDefinition/>
      </telerikCharting:SeriesMapping.SeriesDefinition>
      <telerikCharting:SeriesMapping.ItemMappings>
        <telerikCharting:ItemMapping DataPointMember="XCategory" FieldName="Date"/>
        <telerikCharting:ItemMapping DataPointMember="YValue" FieldName="Rev"/>
      </telerikCharting:SeriesMapping.ItemMappings>
    </telerikCharting:SeriesMapping>
  </telerik:RadChart.SeriesMappings>
  ... 
```

# iphone - 在 didSelectRowAtIndexPath 上显示加载图像

> ID：15047799
> 
> 赞同：0
> 
> 时间：2013-02-24T01:47:45.807
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我试图让我的活动指示器在用户单击我的表格视图中的一行时立即开始动画。我的问题是活动指示器没有立即开始动画。我的理解是 UI 不会更新，并且活动指示器不会开始动画，直到 didSelectRowAtIndexPath 中的所有操作都完成。

当用户单击一行时，如何编辑此代码块以动画活动指示器？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath 
*)indexPath
{

// Activity Indicator
[activityIndicator startAnimating];

NSDictionary *item;

if (tableView == self.searchDisplayController.searchResultsTableView) {
    item = [[NSDictionary alloc] initWithDictionary:[filteredListItems 
    objectAtIndex:indexPath.row]];
} else {
    item = [[NSDictionary alloc] initWithDictionary:[listItems  
    objectAtIndex:indexPath.row]];
}

//Push to New View Controller
DetailViewController *detailViewController = [[DetailViewController alloc] 
initWithNibName:@"DetailViewController" bundle:nil];
profileViewController.newsArticle = item;
[self.navigationController pushViewController:detailViewController animated:YES];
} 
```

我一直在摆弄这些代码，但不知道如何将它们联系在一起。任何帮助都会很棒！谢谢！

```
[self performSelector:@selector(pushDetailView:) withObject:tableView afterDelay:0.1];

- (void)pushDetailView:(UITableView *)tableView {
    // Push the detail view here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:34:44.927

可能不是解决方案，而是可能的解决方法。

将“此处的其余代码”移动到单独的方法并使用延迟调用它

```
self performSelector: withObject: afterDelay: 
```

我希望这会让您的加载图像视图在执行选择器之前出现。

**更新：**

我建议您在确定项目后将其传递给延迟方法，然后将其余部分留给它。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath
                                                                *)indexPath
{

// Activity Indicator
[activityIndicator startAnimating];

NSDictionary *item;
if (tableView == self.searchDisplayController.searchResultsTableView) {
    item = [[NSDictionary alloc] initWithDictionary:[filteredListItems
                                                     objectAtIndex:indexPath.row]];
} else {
    item = [[NSDictionary alloc] initWithDictionary:[listItems
                                                     objectAtIndex:indexPath.row]];
}

[self performSelector:@selector(pushDetailView:) withObject:item afterDelay:0.1];
}

- (void)pushDetailView:(id)item {
// Push the detail view here

//Push to New View Controller
DetailViewController *detailViewController = [[DetailViewController alloc]
                                              initWithNibName:@"DetailViewController" bundle:nil];
profileViewController.newsArticle = item;
[self.navigationController pushViewController:detailViewController animated:YES];
} 
```

# javascript - 按键值重新排序 Json 数组

> ID：15047801
> 
> 赞同：1
> 
> 时间：2013-02-24T01:48:12.900
> 
> 标签：javascript, json

我有一个以这种很长的形式返回给我的联系人列表。它根据输入顺序返回（第一组括号外的字段，缩进）。我遇到的问题是我希望它按 displayName 的字母顺序排列。因为那是在它自己的数组中，所以我很难让整个数组重新排序。任何人都可以解决这个问题吗？谢谢。哦，它必须在 JS 中完成。

```
{
"0":
{"id":1,"rawId":null,"displayName":"Person 1","name":null,"nickname":null,"phoneNumbers":[{"type":"mobile","value":"phonenumb53534r","id":0,"pref":false}],"emails":null,"addresses":null,"ims":null,"organizations":null,"birthday":null,"note":null,"photos":null,"categories":null,"urls":null},
"1":
{"id":2,"rawId":null,"displayName":"Person 2","name":null,"nickname":null,"phoneNumbers":[{"type":"mobile","value":"phonenumber535345","id":0,"pref":false}],"emails":null,"addresses":null,"ims":null,"organizations":null,"birthday":null,"note":null,"photos":null,"categories":null,"urls":null},
"2":
{"id":3,"rawId":null,"displayName":"Person 3","name":null,"nickname":null,"phoneNumbers":[{"type":"mobile","value":"phonenumber47474","id":0,"pref":false}],"emails":null,"addresses":null,"ims":null,"organizations":null,"birthday":null,"note":null,"photos":null,"categories":null,"urls":null}, goes on for a couple hundred rows 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:06:48.237

JavaScript 中的对象本质上不是有序的。如果你有一个数组，你可以使用它。否则，您必须自己将对象的外部部分转换为数组：

```
var arrayOfObj = [];

for (item in obj) {
    if (obj.hasOwnProperty(item)) {
        arrayOfObj.push(obj[item]);
    }
} 
```

如果你能在获得 JSON*之前*做到这一点，那就更好了。一旦你有了它，你就可以使用普通的数组`.sort`方法

```
arrayOfObj.sort(function (a, b) {
    if (a.displayName < b.displayName) {
        return -1;
    }
    else if (a.displayName > b.displayName) {
        return 1;
    }
    return 0;
}); 
```

[http://jsfiddle.net/ZcM7W/](http://jsfiddle.net/ZcM7W/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:12:55.710

您需要将该 responseText 解析为 JSON。但由于它作为对象文字返回，因此您必须将其转换为数组。然后，您可以使用自定义比较器功能对其进行排序。

```
var json = JSON.parse(response), 
data = [];

for (key in json) {
 data.push(json[key]);   
}

data.sort(function (a, b) {
    return a.displayName > b.displayName;
}); 
```

# search - 在弹性搜索中索引地理空间会导致错误？

> ID：15047805
> 
> 赞同：3
> 
> 时间：2013-02-24T01:48:54.953
> 
> 标签：search, lucene, elasticsearch

```
{ title: 'abcccc',
  price: 3300,
  price_per: 'task',
  location: { lat: -33.8756, lon: 151.204 },
  description: 'asdfasdf' 
 } 
```

以上是我要索引的 JSON。但是，当我索引它时，错误是：

```
{"error":"MapperParsingException[Failed to parse [location]]; nested: ElasticSearchIllegalArgumentException[unknown property [lat]]; ","status":400} 
```

如果我删除“位置”字段，一切正常。

如何索引地理？我阅读了教程，但我仍然对它的工作原理感到困惑。它应该像这样工作，对吧......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:37:25.627

您收到此错误消息是因为字段位置未正确映射。有可能在某个时间点，您尝试在该字段中索引一个字符串，现在它被映射为一个字符串。Elasticsearch 无法自动检测字段是否包含 geo_point。它必须在映射中明确指定。否则，Elasticsearch 会根据您在第一条索引记录中使用的 geo_point 表示类型将此类字段映射为字符串、数字或对象。一旦将字段添加到映射中，就不能再更改其类型。因此，为了解决这种情况，您需要删除此类型的映射并重新创建它。以下是为 geo_point 字段指定映射的示例：

```
curl -XDELETE "localhost:9200/geo-test/"
echo
# Set proper mapping. Elasticsearch cannot automatically detect that something is a geo_point:
curl -XPUT "localhost:9200/geo-test" -d '{
    "settings": {
        "index": {
            "number_of_replicas" : 0,
            "number_of_shards": 1
        }
    },
    "mappings": {
        "doc": {
            "properties": {
                "location" : {
                    "type" : "geo_point"
                }
            }
        }
    }
}'
echo
# Put some test data in Sydney
curl -XPUT "localhost:9200/geo-test/doc/1" -d '{ 
    "title": "abcccc",
    "price": 3300,
    "price_per": "task",
    "location": { "lat": -33.8756, "lon": 151.204 },
    "description": "asdfasdf"
 }'
curl -XPOST "localhost:9200/geo-test/_refresh"
echo
# Search, and calculate distance to Brisbane 
curl -XPOST "localhost:9200/geo-test/doc/_search?pretty=true" -d '{
    "query": {
        "match_all": {}
    },
    "script_fields": {
        "distance": {
            "script": "doc['\''location'\''].arcDistanceInKm(-27.470,153.021)"
        }
    },
    "fields": ["title", "location"]
}
'
echo 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T00:38:52.747

由于您没有指定如何解析它，因此：

[在 JSON.NET 中使用未知属性名解析 JSON](https://stackoverflow.com/questions/14714085/parsing-through-json-in-json-net-with-unknown-property-names)

可能会带来一些光明。

# php - 连接两个表以进行全文搜索

> ID：15047807
> 
> 赞同：0
> 
> 时间：2013-02-24T01:49:08.050
> 
> 标签：php, mysql, codeigniter

我有两个表：recipes 和 tags，用于 CodeIgniter 应用程序中的全文搜索。对于每 1 个食谱，它们是无限数量的标签（标签的一些示例：美味、鸡肉、晚餐）。

配方表中的示例行：

## 食谱 ID：1 .....食谱名称：Mo's Chicken Dinner .....

## 配方 ID：2 ..... 配方名称：Mo's Lobster Bisque .....

标签表中的示例行：

## 对应的食谱 ID：1 .....标签：美味.....

## 对应的食谱 ID：2 .....标签：海鲜.....

我希望能够搜索龙虾并在搜索中显示名称与“龙虾”匹配的食谱。但我也想搜索“海鲜”并显示具有相应食谱的标签。

这是我的代码（在我添加连接语句之前，它适用于一个表全文搜索）：

```
// Execute our SQL statement and return the result
    $sql = "SELECT recipes.name,recipes.durationtotal
                FROM recipes LEFT JOIN tags ON recipes.id = tags.recipes_id
                WHERE MATCH (recipes.name,tags.tag) AGAINST (?) > 0 AND user_id = ".$id." ORDER BY recipes.name ASC";
    $query = $this->db->query($sql, array($terms, $terms));
    return $query->result(); 
```

把这个放进去后，我得到了错误：

```
Error Number: 1210

Incorrect arguments to MATCH

SELECT recipes.name,recipes.durationtotal FROM recipes LEFT JOIN tags ON recipes.id = tags.recipes_id WHERE MATCH (recipes.name,tags.tag) AGAINST ('f') > 0 AND user_id = 1 ORDER BY recipes.name ASC

Filename: search_model.php

Line Number: 15 
```

第 15 行是：`$query = $this->db->query($sql, array($terms, $terms));`

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:16:42.473

如果搜索中涉及的所有表都不是 MyISAM 并且您没有在要搜索的特定列集上设置全文索引，则 MATCH AGAINST 查询将失败。我认为，由于您正在搜索不同表中的列，因此无法创建跨越两个表的全文索引。您可以尝试在布尔模式下：

```
MATCH (recipes.name,tags.tag) AGAINST (? IN BOOLEAN MODE) 
```

布尔模式比标准全文匹配更宽容一点。

# c++ - 向量调整大小与嵌套向量的保留

> ID：15047809
> 
> 赞同：1
> 
> 时间：2013-02-24T01:49:12.603
> 
> 标签：c++, vector, resize

我正在尝试使用另一个项目的代码，它们具有这种形式的结构：

```
struct data{
   std::vector<sparse_array> cols,rows;
}

struct sparse_array {
   std::vector<unsigned int> idxs;
   std::vector<double> values;

   void add(unsigned int idx, double value) {
       idxs.push_back(idx);
       values.push_back(value);
   }
} 
```

对于我的代码，我尝试使用以下几行：

```
data prob;
prob.cols.reserve(num_cols);
prob.rows.reserve(num_rows);

// Some loop that calls
prob.cols[i].add(idx, value);
prob.rows[i].add(idx, value); 
```

当我将值输出`prob.rows[i].value[j]`到文件时，我得到全零。但是当我使用`resize`而不是`reserve`得到我读入的实际值时。有人可以给我一个解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T01:54:53.117

函数[`reserve()`](http://en.cppreference.com/w/cpp/container/vector/reserve)只是分配一个足够大的连续内存区域来保存您指定的项目数量，并将向量的旧内容移动到这个新块中，这样可以确保在插入时不会再重新分配向量的存储空间，只要指定容量不超过。此函数用于减少重新分配的数量（这也会使迭代器无效），但*不会在 vector 的末尾插入任何新项目*。

来自 C++11 标准，第 23.3.6.3/1 段关于`reserve()`：

> 一个指令，通知向量计划的大小更改，以便它可以相应地管理存储分配。之后`reserve()`，`capacity()`如果发生重新分配，则大于或等于reserve 的论点；并且等于之前的`capacity()`否则的值。当且仅当当前容量小于 的参数时，才会在此时发生重新分配`reserve()`。如果不是由非类型的移动构造函数引发异常`CopyInsertable`，则不会产生任何影响。

请注意，这样做`prob.cols[i].push_back(idx, value);`您可能会得到**未定义的行为**，因为`i`它可能是一个越界索引。

另一方面，函数`resize()` *确实*在向量的末尾插入项目，因此向量的最终大小将是您指定的大小（这意味着它甚至可以*擦除*元素，如果您指定的大小小于当前的大小） . 如果您没有为调用指定第二个参数`resize()`，则新插入的项目将被初始化。否则，它们将从您提供的值复制初始化。

来自 C++11 标准，第 23.3.6.3/9 段关于`resize()`：

> 如果`sz <= size()`，等价于`erase(begin() + sz, end())`;。如果`size() < sz`, 将值初始化的元素附加 `sz - size()`到序列中。

总而言之，调用后访问向量`resize()`给出预期结果的原因是**项目实际上被添加到向量**中。另一方面，由于调用`reserve()`不添加任何项目，后续**访问不存在的元素会给你未定义的行为**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:01:47.970

如果向量为空，则通过在末尾[`std::vector::resize(n)`](http://www.cplusplus.com/reference/vector/vector/resize/)插入新元素来扩展该向量的内容。仅重新分配向量用于存储其元素的内存块，使其足够大以容纳元素。`n`[`std::vector::reserve(n)`](http://www.cplusplus.com/reference/vector/vector/reserve/)`n`

然后，当您调用时`prob.cols[i]`，您将尝试访问 index 处的元素`i`。如果您以前使用`reserve`过，这将导致访问尚未驻留任何元素的内存，从而产生**未定义的行为**。

所以就`resize`在这种情况下使用:)

# php - 如何为企业或客户群体保持数据分离？

> ID：15047810
> 
> 赞同：1
> 
> 时间：2013-02-24T01:49:19.383
> 
> 标签：php, mysql, laravel

在小型个人项目中，我已经放弃了一些使用 php/mysql 的编程。但是，我正在开发我的第一个商业应用程序，该应用程序将允许客户或企业登录并执行 CRUD 操作。我觉得自己像个菜鸟一样问这个问题，但我以前从来没有这样做过，也无法在网上找到任何相关信息。

基本上，我已经创建了这个应用程序并在我的数据库上设置了一个基于角色的系统。我遇到的问题是如何为相关企业或团体分离和获取数据。

例如，我不能像这样设置我的查询：从 user id = user id 的示例表中获取所有记录，因为这只会返回该用户的数据，而不是与该业务相关的所有其他用户. 我需要一种方法来获取由特定企业的用户创建的所有记录。

我在想，也许企业应该有一个 id，我应该像这样形成我的查询：从示例中获取所有记录，其中企业 id = 企业 id。但我什至不确定这是否是一个好方法。

*这种数据存储/获取和分组是否有最佳实践或约定？注意：安全性在这里是一个大问题，因为我正在存储合法数据。*

另外，如果有任何相关性，我正在使用最新版本的 laravel 4。

我想听听以前遇到过此类问题的人们对此的想法，以及他们如何设计数据库和查询以仅获取和存储与该特定业务相关的数据。

**编辑：**我喜欢阅读和学习，但找不到关于这个主题的任何有用信息——也许我没有使用正确的搜索词。因此，如果您知道与此主题有关的任何好的链接，请也发布它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:14:04.197

如果我理解正确，企业在您的系统中被定义为“用户组”，并且您的整个系统引用属于用户的数据而不是属于企业的数据。您正在寻找属于属于特定企业的所有用户的参考数据。在这种情况下，最好和最可扩展的方法是再创建两个表来包含业务和业务-用户关系。

例如，假设您有以下表格：

```
business         => Defines a business entity
    id (primary)
    name

    Entry: id=4, name=CompanyCorp

user             => Defines each user in the system
    id (primary)
    name

    Entry: id=1, name=Geoff
    Entry: id=2, name=Jane

business_user    => Links a user to a particular business
    user_id (primary)
    business_id (primary)

    Entry: user_id=1, business_id=4
    Entry: user_id=2, business_id=4 
```

基本上，`business_user`表格定义了关系。例如，Geoff 与 CompanyCorp 相关，因此表中存在与它们`id`的 ' 匹配的行。这称为关系数据库模型，是数据库开发领域中需要理解的一个重要概念。您甚至可以允许用户属于多个不同的公司。

要查找所有用户的姓名和他们的公司名称，其中他们公司的 id = 4...

```
SELECT `user`.`name` as `username`, `business`.`name` as `businessname` FROM `business_user` LEFT JOIN `user` ON (`user`.`id` = `business_user`.`user_id`) LEFT JOIN `business` ON (`business`.`id` = `business_user`.`business_id`) WHERE `business_user`.`business_id` = 4; 
```

结果将是：

```
 username    businessname
-> Geoff       CompanyCorp
-> Jane        CompanyCorp 
```

我希望这有帮助！

==================================================== ==============

**根据您在评论中的回复，关于“案例”的附录。**

您**可以**为案例创建一个新表，然后在其中的不同列上引用业务 ID 和用户 ID，因为如果这是您需要的所有功能，案例将属于用户和业务。

假设进一步探索关系数据库的概念，您希望将多个用户分配给一个案例，但您希望一个用户被选为“组长”，您可以按如下方式解决问题：

*   创建一个表“案例”来存储案例
*   创建一个表“user_case”来存储案例-用户关系，就像在 business_user 表中一样。

定义`user_case`表如下：

```
user_case               => Defines a user -> case relationship
    user_id (primary)
    case_id (primary)
    role

    Entry: user_id=1, case_id=1, role="leader"
    Entry: user_id=2, case_id=1, role="subordinate" 
```

您甚至可以更进一步，定义一个表，其中定义了用户可以承担的角色。然后，您甚至可以更改`user_case`表以使用`role_id`连接另一个`role`表中的数据的代替。

这听起来像是一个非常小表的不断深化的模式，但请注意，我们已经向`user_case`关系表添加了一个额外的列。你的应用程序越大，你的表就会随着更多的列横向增长。相信我，你最终会为了定义关系而停止添加新表。

举一个简单的例子来说明这有多灵活，使用一个表，您可以通过使用相对较短的查询`role`来找出给定用户（where）具有的所有角色，例如：`user_id = 6`

```
SELECT `role`.`name` FROM `role` RIGHT JOIN `user_case` ON (`user_case`.`role_id` = `role`.`id`) WHERE `user_case`.`user_id` = 6; 
```

如果您需要更多示例，请随时发表评论。

# python - 为什么 os.read 在 python 的第二次调用中返回空

> ID：15047812
> 
> 赞同：0
> 
> 时间：2013-02-24T01:49:24.473
> 
> 标签：python

我试试这个

```
fd = os.open("myfd.txt",os.O_RDWR)

In [28]: os.read(fd,24)
Out[28]: 'my test is good\n'

In [29]: os.read(fd,24)
Out[29]: '' 
```

为什么在第二次通话中它返回空

当 print`fd`它返回`3`为 filedescriptor 时，数字 3 是什么意思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T01:49:57.780

因为此时文件指针位于文件末尾（由于第一次读取拉出所有数据）。看起来您需要`os.lseek`重置文件指针：

```
print os.read(fd,24)
os.lseek(fd,0,0)
print os.read(fd,24) 
```

请注意，如果您能提供帮助，普通文件对象通常更容易使用：

```
with open('filename') as fin:
    print fin.read(24)
    fin.seek(0)
    print fin.read(24) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T01:52:08.763

当您进行第一次读取调用时，文件指针向前移动了 24 个字节（或字符），因此您可能到达了文件的末尾。

而 3 只是一个描述符，它对操作系统以外的任何东西没有任何意义。它是 3 的原因是因为默认情况下已经采用描述符 0、1 和 2 (0 = stdin, 1 = stdout, 2 = stderr)

# asp.net-mvc - DB中的实体框架ID顺序每次都不一样？

> ID：15047818
> 
> 赞同：1
> 
> 时间：2013-02-24T01:50:10.977
> 
> 标签：asp.net-mvc, entity-framework

在我的播种机中，我执行以下操作，它们在数据库中的着陆顺序似乎不时不同！我需要顺序保持一致，因为我使用存储的静态变量来引用 ID。为什么顺序不同？我可以让它保持一致吗？谢谢你。

```
 List<BadgeGroup> BGs = new List<BadgeGroup>();
    BadgeGroup Unclassified = new BadgeGroup() { Description = "Unclassified" };
    BGs.Add(Unclassified);

    BadgeGroup NumVotesOnPost = new BadgeGroup() { Description = "Number of votes on a post" };
    BGs.Add(NumVotesOnPost);

foreach (BadgeGroup BG in BGs)
    db.BadgeGroups.AddOrUpdate(BG);
     db.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T03:41:51.917

When you save a list of objects, EF doesn't guarantee that it'll be saved in that order. After you save, you can iterate through the objects to get their ids.

# c - 线程开销性能

> ID：15047819
> 
> 赞同：2
> 
> 时间：2013-02-24T01:50:21.697
> 
> 标签：c, linux, multithreading, synchronization, mutex

当在 Linux shell 中使用线程在 C 中编程时，我试图减少线程开销，基本上是降低 CPU 时间（并提高效率）。

现在在程序中创建了许多线程，并且需要在它终止之前完成一项工作。由于互斥，只有一个线程可以同时完成工作。

我知道一个线程在开始之前完成一项工作需要多长时间

当有一个线程在做这项工作时，其他线程必须等待。他们检查是否可以完成工作的方式是是否满足条件变量。

对于等待线程，如果他们使用该条件变量等待，则使用此特定代码等待（a、b、c 和 d 只是任意的东西，这只是一个示例）：

```
while (a == b || c != d){
    pthread_cond_wait(&open, &mylock);
} 
```

这效率如何？代码中发生了什么`pthread_cond_wait`？是一个不断检查条件变量的while循环（在幕后）吗？

另外，由于我知道一个线程将花费多长时间，所以我首先执行关于最短作业的调度策略是否更有效？或者这无关紧要，因为在执行这项工作的任何线程组合中，程序将花费相同的时间来完成。换句话说，是否首先使用最短作业会降低其他线程等待的 CPU 开销？由于最短的工作首先似乎减少了等待时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:06:48.687

用一个线程解决您的问题，然后如果您还看不到需要最少锁定的途径，请向我们寻求帮助，以确定公开并行化的最佳位置。要使用的最佳线程数取决于您使用的计算机。使用超过 n+1 个线程没有多大意义，其中 n 是程序可用的处理器/内核数。为了减少线程创建开销，给每个线程多个作业是个好主意。

以下是对您的澄清编辑的回应：

> 现在在程序中创建了许多线程，并且需要在它终止之前完成一项工作。由于互斥，只有一个线程可以同时完成工作。

不可以。如上所述，最多应创建 n+1 个线程。你说的互斥是什么意思？我认为互斥是“只有一个线程在其工作队列中包含任务 x”。这意味着没有其他线程需要锁定任务 x。

> 当有一个线程在做这项工作时，其他线程必须等待。他们检查是否可以完成工作的方式是是否满足条件变量。

给每个线程一个独立的任务列表来完成。如果作业 x 是作业 y 的先决条件，那么作业 x 和作业 y 理想情况下应该在同一个列表中，这样线程就不必处理任一作业上的线程互斥对象。你探索过这条路吗？

> 而 (a == b || c != d){ pthread_cond_wait(&open, &mylock); 这效率如何？pthread_cond_wait 代码中发生了什么？是一个不断检查条件变量的while循环（在幕后）吗？

为了避免未定义的行为，mylock 必须在调用 pthread_cond_wait 之前被当前线程锁定，所以我假设您的代码调用 pthread_mutex_lock 在进入此循环之前获取 mylock 锁。

1.  pthread_mutex_lock 阻塞线程直到它获得锁，这意味着一次一个线程可以执行 pthread_mutex_lock 和 pthread_cond_wait 之间的代码（pre-pthread_cond_wait 代码）。
2.  pthread_cond_wait 释放锁，允许其他线程运行 pthread_mutex_lock 和 pthread_cond_wait 之间的代码。在 pthread_cond_wait 返回之前，它会一直等待，直到它可以再次获取锁。此步骤重复 adhoc `while (a == b || c != d)`。
3.  稍后在任务完成时调用 pthread_mutex_unlock。在此之前，一次只有一个线程可以执行 pthread_cond_wait 和 pthread_mutex_unlock 之间的代码（pthread_cond_wait 后代码）。此外，如果一个线程正在运行 pre-pthread_cond_wait 代码，则没有其他线程可以运行 post-pthread_cond_wait 代码，反之亦然。

因此，您不妨运行将作业存储在优先级队列中的单线程代码。至少你不会有不必要的和过多的上下文切换。正如我之前所说，“用一个线程解决你的问题”。在您有衡量标准之前，您无法就优化节省了多少时间做出有意义的陈述。

> 另外，由于我知道一个线程将花费多长时间，所以我首先执行关于最短作业的调度策略是否更有效？或者这无关紧要，因为在执行这项工作的任何线程组合中，程序将花费相同的时间来完成。换句话说，是否首先使用最短作业会降低其他线程等待的 CPU 开销？由于最短的工作首先似乎减少了等待时间。

如果您要执行调度策略，请在单线程项目中执行。如果您相信并发会帮助您快速解决问题，那么将您完成的单线程项目暴露给并发并派生测试来验证您的信念。我建议以线程不必共享工作的方式公开并发性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T06:31:52.917

Pthread 原语通常相当有效。阻塞的东西在阻塞时通常不消耗或可以忽略不计的 CPU 时间。如果您遇到性能问题，请先查看其他地方。

不用担心调度策略。如果您的应用程序设计为一次只能运行一个线程，那么您将失去最初线程化的大部分好处，同时增加所有成本。（如果你没有强加所有的成本，比如锁定共享变量，因为一次只运行一个线程，你就是在自找麻烦。）

# python - 涉及“AttributeError：'NoneType'对象没有属性'append'”的奇怪错误

> ID：15047821
> 
> 赞同：1
> 
> 时间：2013-02-24T01:50:59.350
> 
> 标签：python, attributeerror

所以我试图通过将文本文件转换为列表并在空间处拆分列表中的每个项目来解析文本文件。

我创建了一个测试变量来自行运行这部分代码。我在 spyder 编辑器中的代码：

```
test = ['NC_009142.1_03_012_002_001 560', 'NC_017586.1_13_009_003_001 555', 'NC_016111.1_13_010_003_001 555']
ListOfLinesParsed = test

PN_List = []
counter_iterative = 0
while counter_iterative < len(ListOfLinesParsed):
    PN_List = PN_List.append(ListOfLinesParsed[counter_iterative].split()[0])
    counter_iterative += 1

print PN_List 
```

返回错误：

> > > 运行文件（r'/home/jake/.spyder2/.temp.py'，wdir=r'/home/jake/.spyder2'）

```
Traceback (most recent call last):

  File "<stdin>", line 1, in <module>

  File "/usr/lib/python2.7/dist-
packages/spyderlib/widgets/externalshell/sitecustomize.py", line 493, in runfile

    execfile(filename, namespace)
  File "/home/jake/.spyder2/.temp.py", line 7, in <module>

    PN_List = PN_List.append(ListOfLinesParsed[counter_iterative].split()[0])

AttributeError: 'NoneType' object has no attribute 'append' 
```

但是，如果我将命令直接输入到终端中，则不会出现错误：

> > > 测试L = []
> > > 
> > > testL.append(test[0].split()[0])
> > > 
> > > 测试L

```
['NC_009142.1_03_012_002_001'] 
```

> > > testL.append(test[1].split()[0])
> > > 
> > > 测试L

```
['NC_009142.1_03_012_002_001', 'NC_017586.1_13_009_003_001'] 
```

> > > testL.append(test[2].split()[0])
> > > 
> > > 测试L

```
['NC_009142.1_03_012_002_001', 'NC_017586.1_13_009_003_001', 'NC_016111.1_13_010_003_001'] 
```

这两件事不应该完全相同吗？我不明白为什么我的脚本中的行为与终端命令有任何不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T01:52:55.567

线

```
PN_List = PN_List.append(ListOfLinesParsed[counter_iterative].split()[0]) 
```

是问题所在。

`list.append`是一个*就地*操作，它返回`None`，但会改变原始列表本身。如果您分配`PN_List`给结果，它将变为`None`. 如果你不这样做，那么你的程序将运行顺利。这就是为什么当您尝试在没有分配的情况下附加内容时，您会得到预期的答案。

# ruby-on-rails - 无法让 simple_nested_form 提交数据

> ID：15047824
> 
> 赞同：0
> 
> 时间：2013-02-24T01:51:26.687
> 
> 标签：ruby-on-rails, nested-forms, simple-form

我正在尝试在我的 Ruby on Rails 应用程序中构建一个 simple_nested_form。当我提交表单时，我收到一些未知错误，因为它只是重定向回表单以再次输入。这是我提交表单时 Rails 服务器控制台中的输出。看起来那里有一些随机的“0”=>。

```
Parameters: {"machine"=>{"name"=>"2134", "ip_adress"=>"2", "machine_employees_attributes"=>{"0"=>{"machine_id"=>"1", "employee_id"=>"2"}}}, "commit"=>"Create Machine"} 
```

我有一个机器模型 has_many :machine_employees

和一个属于_to :machine 的machineemployee 模型

你知道为什么这个 0 => 会出现吗，因为我认为这是给我带来问题的原因。

这是我的模型的代码。

机器

```
class Machine < ActiveRecord::Base

# Relationships
has_many :machine_employees
has_many :employees, :through => :machine_employees

accepts_nested_attributes_for :machine_employees, :reject_if => lambda{ |me| me[:employee_id].blank? }

attr_accessible :ip_adress, :name, :machine_employees_attributes

# Validations
validates_presence_of :name, :ip_adress
end 
```

机器员工

```
class MachineEmployee < ActiveRecord::Base
before_validation :set_default

# Relationships
belongs_to :machine
belongs_to :employee

attr_accessible :employee_id, :machine_id, :end_date, :start_date

# Validations
validates_presence_of :employee_id, :machine_id, :start_date

private

# Callback Methods
def set_default
  self.start_date = Date.today
  self.end_date = nil
end

end 
```

新机形态

```
<div class="row-fluid">

<div class="span3">

    <h1>Add a Machine</h1>

    <br />

    <%= simple_nested_form_for @machine do |f| %>
        <%= render "machine_fields", :f => f %>
        <%= f.button :submit %>
        <%= link_to 'Back', machines_path %>
</div>

<div class="span4">
    <h4>Assign an Employee to This Machine</h4>
    <%= f.simple_fields_for :machine_employees do |me_form| %>
        <!-- render nested machine_employee fields-->
        <%= render "machine_employee_fields", :f => me_form %>
    <% end %>
</div>
<% end %>

</div> 
```

机器员工字段部分

```
<%= f.input :machine_id, :as => :hidden, :input_html => { :value => @machine.id } %>
<%= f.input :employee_id, collection: @employees, :id => :name, :prompt => "Select ..." %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:03:03.653

0 被扔在那里，因为机器模型`has_many`machine_employees。当您使用嵌套表单时，它会为 has_many 关系传递一个伪数组。因此，如果您尝试提交 2 个机器员工，您的哈希将如下所示：

```
Parameters: {"machine"=>{"name"=>"2134", "ip_adress"=>"2", "machine_employees_attributes"=>{
                           "0"=>{"machine_id"=>"1", "employee_id"=>"2"},
                           "1"=>{"machine_id"=>"1", "employee_id"=>"3"}
                        }
            }, "commit"=>"Create Machine"} 
```

这样，您可以通过执行或访问`machine_employees`从表单传递的内容。请注意，如果这是一个关系，则键将更改为，并且不会有数字索引。`params[:machine][:machine_employees_attributes][0]``params[:machine][:machine_employees_attributes][1]``has_one``machine_employees_attributes``machine_employee_attributes`

我怀疑问题是您的机器型号必须`accept_nested_attributes_for :machine_employees`而且必须也有`attr_accessible :machine_employees_attributes`.

# flex4 - 无法将嵌入字体应用于 Flex 4 中的 Spark 按钮

> ID：15047829
> 
> 赞同：1
> 
> 时间：2013-02-24T01:52:08.060
> 
> 标签：flex4, flex-spark

我正在尝试嵌入一种字体，以便我可以旋转 Spark 按钮组件，但我无法做到这一点。该按钮始终显示为空白，没有文字。

代码如下所示：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";

    @font-face {
        fontFamily: verdana;
        src: url("VERDANA.TTF");
        embedAsCFF: true;
        fontWeight: normal;
    }

</fx:Style>

<s:Group>
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <s:Button id="back"
              includeInLayout="{data.thisLevel.getParent() != null}"
              label="Back"
              fontFamily="verdana"
              fontWeight="normal"
              height="100%"
              rotation="270" />
</s:Group> 
```

我的研究表明，您需要使用 fontWeight 玩一些游戏才能让 mx:Button 工作，但这应该是 Spark 修复的。（并且弄乱 fontWeight 并没有做任何事情。）当我将按钮变成标签时，它的行为符合我的预期，所以我显然正确地嵌入了字体——按钮只是看不到它。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:57:47.177

你做得很好。你的代码对我来说很棒。我添加了第二个按钮让你看到效果。

![在此处输入图像描述](../Images/6f9718ee6d0bd5aba21622ef1e7dc9e8.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">

<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";

    @font-face {
        fontFamily: verdana;
        src: url("assets/fonts/verdana.ttf");
        embedAsCFF: true;
        fontWeight: normal;
    }

    @font-face {
        fontFamily: snap;
        src: url("assets/fonts/snap.ttf");
        embedAsCFF: true;
        fontWeight: normal;
    }

</fx:Style>

<s:Group x="100" y="100">
    <s:layout>
        <s:HorizontalLayout />
    </s:layout>

    <s:Button id="back"
              includeInLayout="true"
              label="Back"
              fontFamily="verdana"
              fontWeight="normal"
              height="100%"
              rotation="270" />

    <s:Button id="back2"
              includeInLayout="true"
              label="Back"
              fontFamily="snap"
              fontWeight="normal"
              height="100%"
              rotation="270" />
</s:Group>
</s:Application> 
```

# angularjs - angular.js 查询DOM当前状态的最佳实践方式

> ID：15047832
> 
> 赞同：1
> 
> 时间：2013-02-24T01:52:09.043
> 
> 标签：angularjs, rangy

我已经开始使用 Angular js，并且遇到了一个问题，需要在我的控制器中获取 DOM 的当前状态。基本上，我正在一个 contenteditable div 中构建一个文本编辑器。对 div 中文本的修订可以来自外部服务（来自服务器的长轮询推送）以及实际在字段中输入的用户。现在来自服务器的修订正在操纵我的角度模型，然后通过 ng-bind-html-unsafe 指令更新视图。唯一的问题是这会影响用户当前的光标位置和文本选择。

我已经找到了解决这个问题的方法，但它需要在我的控制器中直接操作 dom 元素，这在 Angular 中似乎是不鼓励的。我正在寻找对我当前方法的验证，或者对更“有角度”的东西的推荐。

基本上我所做的是在我的模型中添加了两个事件，“contentChanging”和“contentChanged”。第一个是在我更新模型之前触发的，第二个是在我更新模型之后触发的。在我的控制器中，我像这样订阅这些事件。

```
//dmp is google's diff_match_patch library
//rangy is a selection management library http://code.google.com/p/rangy/wiki/SelectionSaveRestoreModule
var selectionPatch;
var selection;
scope.model.on("contentChanging", function() {
    var currentText = $("#doc").html();       
    selection = rangy.saveSelection();
    var textWithSelection = $("#doc").html();
    selectionPatch = dmp.patch_make(currentText, textWithSelection);
});
scope.model.on("contentChanged", function() {
    scope.$apply();
    var textAfterEdit = $("#doc").html();
    $("#doc").html(dmp.patch_apply(selectionPatch, textAfterEdit)[0]);
    rangy.restoreSelection(selection);
}); 
```

所以基本上，当内容发生变化时，我会抓取可编辑区域的当前 html。然后我使用[rangy](http://code.google.com/p/rangy/wiki/SelectionSaveRestoreModule)插件将隐藏的 dom 元素注入到文档中来标记用户当前的位置和选择。我使用不带隐藏标记的 html 和带标记的 html，并使用 google 的 diff_match_patch 库（dmp）制作补丁。

更改内容后，我调用 scope.$apply() 来更新视图。然后我从视图中获取新文本并应用之前的补丁，这会将隐藏的标记添加回 html。最后我使用范围来恢复选择。

我不喜欢的部分是我如何使用 jquery 从视图中获取当前 html 以构建和应用我的补丁。这会让单元测试变得有点棘手，而且感觉不太对劲。但是考虑到 rangy 库的工作方式，我想不出另一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:33:47.423

这是一个简单的示例，说明您将如何开始：

```
<!doctype html>
<html ng-app="myApp">
<head>
    <script src="http://code.angularjs.org/1.1.2/angular.min.js"></script>
    <script type="text/javascript">
    function Ctrl($scope) {
        $scope.myText = "Here's some text";
    }

    angular.module("myApp", []).directive('texteditor', function() {
        return {
            restrict: 'E',
            replace: true,
            template: '<textarea></textarea>',
            scope: {
                text: '=' // link the directives scopes `text` property
                          // to the expression inside the text attribute
            },
            link: function($scope, elem, attrs) {
                elem.val($scope.text);
                elem.bind('input', function() {
                    // When the user inputs text, Angular won't know about
                    // it since we're not using ng-model so we need to call 
                    // $scope.$apply() to tell Angular run a digest cycle
                    $scope.$apply(function() {
                        $scope.text = elem.val();
                    });
                });
            }
        };
    });
    </script>
</head>
<body>
    <div ng-controller="Ctrl">
        <texteditor text="myText"></texteditor>
        <p>myText = {{myText}}</p>
    </div>
</body>
</html> 
```

它只是绑定到一个文本区域，所以你可以用你真正的文本编辑器替换它。关键是在你的文本编辑器中监听文本的变化，并更新你的范围内的值，以便外界知道用户在文本编辑器中更改了文本。

# android - 如何使用 Jsoup 提取特定内容？

> ID：15047835
> 
> 赞同：0
> 
> 时间：2013-02-24T01:52:46.623
> 
> 标签：android, json, parsing, html-parsing, jsoup

如何从此示例 HTML 代码中提取全名？我只想得到以下。

**全名1**

**全名2**

**全名3**

```
<div class="readerP">
                                            <p><a href="link1_english.html"  title="Complete" >Full name1</a><br>[ other info ]</br> </p>
                                            </di                                        
<div class="readerP">
                                            <p><a href="link2_english.html"  title="Complete" >Full name2</a><br>[ other info ]</br> </p>
                                            </div>
<div class="readerP">
                                            <p><a href="link1_english.html"  title="Complete" >Full name3</a><br>[ other info ]</br> </p>
                                            </div> 
```

我正在使用这段代码，但它会查看页面中的所有“a”标签，所以我会得到额外的信息。

**主页**

**关于**

**接触**

**全名1**

**全名2**

**全名3**

等等 ...

```
 try {
        doc = Jsoup.connect("http://www.somesite.com").get();
         Elements links = doc.getElementsByTag("a");
         for (Element el : links) {
             linkText = el.ownText();

             arr_linkText.add(linkText);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

如何查看“ **div** ”标签，如果**class="readerP"**查看“ **div ”内的“** **a** ”标签？

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:26:32.350

> 如何查看“div”标签，如果 class="readerP" 查看“div”内的“a”标签？

使用适当的选择器，而不仅仅是按标签搜索。

```
Elements links = doc.select("div .readerP a"); 
```

[在Jsoup 文档](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)中阅读有关选择器的更多信息。**

# c# - 实体框架代码优先：有没有办法从 DbSets 中自动过滤禁用的行？

> ID：15047836
> 
> 赞同：2
> 
> 时间：2013-02-24T01:52:50.430
> 
> 标签：c#, entity-framework, entity-framework-5

在我必须应对的数据架构中，*没有删除*。相反，所有记录都有一个可以为空的 datetime2 表示记录已“禁用”。这意味着在直接选择实体的情况下，我总是必须添加检查以查看实体是否被禁用。

到目前为止，我想出的只是一个简单的扩展方法`.Enabled()`，它只获取启用的行。到目前为止它似乎很有效，但我必须在每种情况下都输入它也很烦人。

肯定有人以前剥过这只猫的皮。有没有更好的方法来使用我不知道的实体框架来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T06:07:07.613

我想你可以做这样的事情

```
public class MyContext : DbContext
{
    public IDbSet<Thing> Things { get; set; }
    public IQueryable<Thing> EnabledThings
    {
        get
        {
            return Things.Where(t => t.Enabled);
        }
    }
} 
```

或与扩展方法相同（但在上下文中不是 DbSet/queriable）。

就个人而言，在实践中，我实际上完全按照您在示例中所做的操作并使用`Things.Enabled().Whatever`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:01:57.873

我不知道实体框架的任何原生内容。但通常当我遇到这种情况时，我会创建一个“存储库”层，通过它运行大多数数据库事务。然后我创建方法`GetAll()`，例如返回所有带有适当 where 语句的项目以隐藏“已删除”项目。

# javascript - 如何将字符串拆分为段落？

> ID：15047839
> 
> 赞同：1
> 
> 时间：2013-02-24T01:53:14.050
> 
> 标签：javascript, regex, preg-match

我有这个字符串：

```
var content = '<?php echo $content; ?>'; 
```

看起来像：

```
<p style="text-align: center;"><span style="font-family: arial black,avant garde; color: #ff0000;"><strong>Dior</strong></span></p><p><span style="color: #339966;">As far as Candy could see there were plenty</span></p><p><span style="color: #339966;">Among those</span></p> 
```

我想把它分成每一段，所以结果：

```
<p style="text-align: center;"><span style="font-family: arial black,avant garde; color: #ff0000;"><strong>Dior</strong></span></p> 
<p><span style="color: #339966;">As far as Candy could see there were plenty</span></p>
... 
```

我认为它可以用正则表达式完成，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:09:00.990

我相信这样的事情会让你到达你想去的地方。

您想在`</p>`with 上使用拆分将在该字符串上创建拆分。这是生成的html和js。

您需要填写页面的 html 部分，但这是进行拆分的代码。

**html**

```
<div class="class">
    <p>text 1</p><p>text 2</p>   
</div> 
```

**javascript**

```
var str = $('.class').html();
str = str.split('</p>');

for (var i=0;i<str.length;i++)
{ 
  $('.class').html().write(str[i] + "<br>");
} 
```

应该是这样的。这是一个带有结果的[jsfiddle](http://jsfiddle.net/p4JFx/90/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:10:07.400

基于贪婪匹配的简单正则表达式可以工作并返回数组：

```
re = /<p>.*?<\/p>/g
str.match(re) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T02:08:04.697

```
var replaced = content.replace(/<\/p>/g, "</p><br>") 
```

值得一读：[http ://www.regular-expressions.info/javascript.html](http://www.regular-expressions.info/javascript.html)

尽管如此，如果您在 PHP 中生成内容，为什么不在生成内容时插入 <br> 呢？

# ruby-on-rails - 控制器测试在一起运行时失败，在单独运行时通过。怎么会这样？

> ID：15047842
> 
> 赞同：2
> 
> 时间：2013-02-24T01:53:54.493
> 
> 标签：ruby-on-rails, ruby, rspec, devise

我有一些测试需要用户登录。当我自己运行控制器测试时，它通过了，一切都是绿色的。如果我运行`rspec spec/controllers`一些测试失败并出现以下错误：

```
Failure/Error: get :my_modal, :format => :js
 NoMethodError:
   undefined method `authenticate!' for nil:NilClass 
```

任何提示如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:14:58.140

一旦我遇到这样的错误。因此，当我告诉你我的故事时，你不会与我们分享更多细节，希望你以后能更容易地发现你的错误。

在我的 App 2 类可以登录。一个“用户”和一个“主题”。我尝试进行身份验证，因此用户只能访问与用户相关的站点，而主题只能访问应用程序中与主题相关的部分。

我遇到的第一个错误是您的错误。但我修复了它，并会尝试向你解释我是如何做到的。如果用户已登录，我的应用程序不知道与主题相关的身份验证方法。反之亦然，如果在我的应用程序中签名的主题不知道与用户相关的身份验证方法（我要求 User.user_id 或 Topic.be_topic？为真）

解决这个问题的线索是：我创建了一个名为“user_signed_in”的方法，并通过一个 IF 方法运行身份验证。

```
IF user_signed_in
  user.user_id > 0
ELSE
  topic.be_topic == true
END 
```

希望对您有所帮助。我是 Rails 新手，请原谅我缺乏更深入的知识。

# javascript - 使用 Javascript 正确更新 Div 并拆分

> ID：15047845
> 
> 赞同：0
> 
> 时间：2013-02-24T01:54:38.917
> 
> 标签：javascript, vb.net, asp.net-mvc-3, asynchronous

这是一个 mvc 3 razor vb.net 应用程序......我的代码一切都很好，所以我决定向传入 java 的数据添加更多信息，以便屏幕可以提供更多关于它当前的信息进度... getstatus 进来的字符串是一个用“/”分隔的字符串，其中 data.split("/")(0) = 函数中的整数和 data.split("/")(1) =要在 currentEmail div 中显示的字符串...这不起作用，这仅仅是因为我完全是 javascript 的菜鸟，我知道这是可能的..

```
@Code 
ViewData("Title") = "MassEmailSendingStatus"
TempData.Add("emList", TempData("emailaddresses"))
Dim x As String = Guid.NewGuid().ToString
end Code

<div>
<a href="#" id="startProcess">Start Process</a>
</div>
<br />

<div id="currentEmail">

</div>
<div id="statusBorder">
<div id="statusFill">
</div>
</div>
<script type="text/javascript">
  var uniqueId = '@x';
  var tdata = '@TempData("emailaddresses")';
          $(document).ready(function (event) {
          $('#startProcess').click(function () {
              $.post("MassEmailSendingStatus", { id: uniqueId }, function () {
              $('#statusBorder').show();
              getStatus();
          });
          event.preventDefault;
      });
  });

  function getStatus() {
      var url = 'GetCurrentProgress/' + uniqueId;
      $.get(url, function (data) {
          var str = data;
          var n1 = str.split("/");
          var v1 = integer.parseint(n1[0]);
          var v2 = n1[1];
          if (v1 != "100") {
              $('#status').html(data);
              $('#currentEmail').html(v2);
              $('#statusFill').width(v1);
              window.setTimeout("getStatus()", 100);
          }
          else {
              $('#status').html("Done");
              $('#statusBorder').hide();
              alert("The Long process has finished");
          };
      });
  }

 </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:17:18.580

我自己通过一些浏览器 lvl 调试找到了它。 `var v1 = integer.parseint(n1[0]);`是错误的，它应该是`var v1 = ParseInt(n1[0]);`区分大小写的语言 = 不适合像 meh 这样的菜鸟。

```
 function getStatus() {
  var url = 'GetCurrentProgress/' + uniqueId;
  $.get(url, function (data) {
      var str = data;
      var n1 = str.split("/");
      var v1 = integer.parseint(n1[0]);
      var v2 = n1[1];
      if (v1 != "100") {
          $('#status').html(data);
          $('#currentEmail').html(v2);
          $('#statusFill').width(v1);
          window.setTimeout("getStatus()", 100);
      }
      else {
          $('#status').html("Done");
          $('#statusBorder').hide();
          alert("The Long process has finished");
      };
  }); 
```

}

# autohotkey - 如何在背景窗口上模拟按键

> ID：15047847
> 
> 赞同：1
> 
> 时间：2013-02-24T01:55:01.303
> 
> 标签：autohotkey

我需要强制在后台的 Outlook 每 2 秒检查一次新电子邮件。所以我写了一个下面的脚本，但它没有这样做。怎么了？我不希望脚本干扰我的工作并将焦点放在 Outlook 窗口上。“ahk_class rctrl_renwnd32”是正确的，我用“WinActivate，ahk_class rctrl_renwnd32”检查它并且它工作。

```
Loop
{
    ControlSend,, {F9}, ahk_class rctrl_renwnd32
    Sleep 2000 ; Wait 2 seconds
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T09:06:10.500

您的代码中没有错误。问题可能出在接收应用程序中。当我在记事本中对此进行测试`F5`时，当记事本窗口在我的第二个屏幕上的某处打开时，将执行（打印时间和日期）。一旦我最小化记事本，它将不再执行`F5`，但它仍然接受`A{Enter}B{Enter}C{Enter}`最小化时的字符串。

```
!q::
ControlSend,, {F5}A{Enter}B{Enter}C{Enter}, ahk_class Notepad
Return 
```

解决方案，当您将窗口保持在屏幕上的某个位置（无需获得焦点）时，尝试这是否有效。

我过去使用过 Outlook，并记得这`F9`需要一些时间来执行。每 2 秒运行一次看起来有点矫枉过正。如果及时收到电子邮件对您愿意通过刷新请求“杀死”邮件服务器非常重要，那么我将与您的 IT 支持人员讨论解决方案。

# objective-c - 运行时无法识别释放方法（非 Cocoa）

> ID：15047858
> 
> 赞同：2
> 
> 时间：2013-02-24T01:56:27.250
> 
> 标签：objective-c, memory-management

我是 Objective-C 的新手，但在 C 和 C++ 方面拥有丰富的经验。我注意到的第一件事是基本教程中存在真正的空白，因为所有人都假设您正在为 iPhone 或 Mac 开发并使用 Cocoa。我没有使用 Cocoa 或 Gnustep。重点：

作为一个简单的入门示例，我正在尝试包装 C 的文件 I/O 功能。我的代码以 File.h 开头

```
#include <objc/Object.h>
#include <stdio.h>
@interface File:Object
{
    FILE *pFile;
    char *path;
}

@property FILE *pFile;
@property char *path;

- (void)new;
- (void)OpenReadText:(const char*)var1;
- (void)release;

@end 
```

和文件.m

```
#include "File.h"

@implementation File

@synthesize pFile, path;

- (void)new
{
    self = [super init];
}
- (void)release
{
    fclose(pFile);
    [super release];
}

- (void)OpenReadText:(char*)var1
{
    path = var1;
    pFile = fopen(path,"r");
}

@end 
```

然后 main.m

```
#include <stdio.h>
#import <objc/Object.h>
#include "File.h"

int main(void) {

File *Fileobj = [File new];

[Fileobj OpenReadText:"File.h"];

[Fileobj release];

} 
```

编译器给我一个警告，我的对象“可能不响应'-release'”。然后在运行程序时会导致运行时错误：“无法识别发布。此应用程序已请求运行时终止”..等等。

我猜我犯了一个简单的新手错误，但是在哪里？或者也许缺少什么？我希望有人可以在这里为我指明正确的方向。谢谢。

如果这个 qst 已经被问过，那么参考也可以。我确实试图找到一个参考，但没有运气。

跟进：

将发布方法更改为

```
- (void)release
{
    fclose(pFile);
    [super free];
} 
```

它似乎奏效了。显然`free`是被认可的`object.h`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T03:31:26.380

正如其他人所说，在没有 Foundation 框架的情况下使用 Objective-C 是不寻常的。但是，`Object`该类应该实现`release`等。Apple 的 Objective-C 运行时中包含（但未使用）`retain`的类当然包含这些基本方法。`Object`

假设您的`Object`类确实包含这些基本方法，那么您的类在实现时存在一些问题。

首先，您创建了一个`new`简单调用`[super init]`. 按照惯例，该`new`方法是一个类方法，它是调用`alloc`、`init`创建和初始化对象的简写。 `new`在 Apple 的`Object`类中定义。它被实现为：

```
+ (id)new
{
        id newObject = (*_alloc)((Class)self, 0);
        Class metaClass = self->isa;
        if (class_getVersion(metaClass) > 1)
            return [newObject init];
        else
            return newObject;
} 
```

请注意，此方法是一个类方法，由`+`代替表示`-`。GNUStep 实现`new`如下：

```
+ new
{
   return [[self alloc] init];
} 
```

惯用的使用`new`方式是：

```
File *obj = [File new]; 
```

这实际上是您所做的，但是，这是调用类方法`new`而不是您的实例方法`new`。

如果你想调用你的`new`方法，你必须调用：

```
File *obj = [[File alloc] new]; 
```

但正如其他人所说，您需要返回您的对象。删除您的新方法不会对您的实现产生影响，因为它当前没有被调用。

其次，您已将调用置于`fclose`覆盖的`release`方法中。这是错误的，`Object`无论如何，在Apple的实现中，GNUstep似乎有所不同。 `release`可以在对象的单个实例上多次调用。 `retain`并`release`用于增加/减少对象保留计数。只有当保留计数达到零时，才应关闭文件句柄。通常，在 Foundation 中，您会将调用`fclose`放在一个`dealloc`方法中。 `dealloc`是 Objective-C 的析构方法。`dealloc`应该看起来像：

```
- (void)dealloc
{
    fclose(pFile);
    [super dealloc];
} 
```

但是，`dealloc`似乎没有在 Apple 或 GNUstep 的`Object`类中实现。正如您在问题中指出的那样，有一种`free`方法似乎是析构函数。

`dealloc`用等效方法替换上述方法`free`似乎可以用作析构函数，例如：

```
- (void)free
{
    fclose(pFile);
    [super free];
} 
```

Apple 的`Object`contains`retain`和`release`方法的实现，但 GNUstep 的实现没有。两种实现都不包含`dealloc`方法。

`Object.m`Apple和GNUstep的实现`NSObject.m`可以在以下位置找到：

苹果 Object.m： http: [//opensource.apple.com/source/objc4/objc4-532.2/runtime/Object.m](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/Object.m)

GNUstep Object.m：[https ://github.com/gnustep/gnustep-libobjc/blob/master/Object.m](https://github.com/gnustep/gnustep-libobjc/blob/master/Object.m)

[苹果](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm)NSObject.mm：http://opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm

GNUstep NSObject.m：[https ://github.com/gnustep/gnustep-base/blob/master/Source/NSObject.m](https://github.com/gnustep/gnustep-base/blob/master/Source/NSObject.m)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-24T02:12:31.343

是`release`在类上定义的`Object`吗？如果不是，那么您致电

```
[super release]; 
```

不管用。（在 cocoa 中，release 是 的成员`NSObject`；您的`Object`班级可能有也可能没有，事实上，保留/释放引用计数可能根本不存在。）

您应该确认您的基类包括通过调用的所有方法`super`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T02:09:59.240

正如@xlc0212 所指出的，内存管理的引用计数样式包含在 NSObject 中。

NSObject 是 Cocoa、CocoaTouch 和 GnuStep 的 CoreFoundation 库的一部分。我会说你需要链接到CoreFoundation。

我读过的一本专注于纯 Objective-C（不一定是 Cocoa）的书是 Steven G Kochan 的“Objective-C 2.0 编程”。

# python - Python中的列表列表

> ID：15047862
> 
> 赞同：0
> 
> 时间：2013-02-24T01:57:37.307
> 
> 标签：python, list, multidimensional-array

我正在使用 Python 中的 Flask 框架，并且需要将列表列表交给渲染器。

我逐步循环并创建一个列表，对其进行排序，将其附加到另一个列表，然后使用主列表调用渲染函数，如下所示：

```
for itemID in itemsArray:
    avgQuantity = getJitaQuantity(itemID)
    lowestJitaSell = getJitaLowest(itemID)
    candidateArray = findLowestPrices(itemID, lowestJitaSell, candidateArray, avgQuantity)
    candidateArray.sort()
    multiCandidateArray.append(candidateArray)
renderPage(multiCandidateArray) 
```

我的问题是我需要清除candidateArray并每次通过循环创建一个新的，但看起来我附加到multiCandidateArray的candidateArray实际上是一个指针，而不是值本身。

当我这样做时：

```
for itemID in itemsArray:
    avgQuantity = getJitaQuantity(itemID)
    lowestJitaSell = getJitaLowest(itemID)
    candidateArray = findLowestPrices(itemID, lowestJitaSell, candidateArray, avgQuantity)
    candidateArray.sort()
    multiCandidateArray.append(candidateArray)
    **del candidateArray[:]**
renderPage(multiCandidateArray) 
```

我最终没有价值观。

有没有办法处理我错过的这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:01:04.757

我可能会选择类似的东西：

```
for itemID in itemsArray:
    avgQuantity = getJitaQuantity(itemID)
    lowestJitaSell = getJitaLowest(itemID)
    candidateArray = findLowestPrices(itemID, lowestJitaSell, candidateArray, avgQuantity)
    multiCandidateArray.append(sorted(candidateArray)) 
```

这里不需要`del`任何东西，并`sorted`返回一个新的`list`，所以即使`FindLowestPrices`由于某种原因返回对同一个列表的引用（这不太可能），那么你仍然会有唯一的列表`multiCandidateArray`（尽管你的唯一列表可以包含对相同的对象）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:03:30.763

您的代码每次都通过循环创建一个新的*。*

```
candidateArray = findLowestPrices(...) 
```

这会为变量 分配一个新列表`candidateArray`。它应该可以正常工作。

当你这样做时：

```
del candidateArray[:] 
```

...您正在删除刚刚附加到主列表的*同一列表的内容。*

不要考虑指针或变量；想想对象，记住 Python 中没有任何东西是隐式复制的。列表是一个对象。在循环结束时，`candidateArray`将相同的列表对象命名为`multiCandidateArray[-1]`. 它们是同一事物的不同*名称*。在下一次循环运行时，`candidateArray`成为由 生成的*新*列表的名称`findLowestPrices`，并且主列表末尾的列表不受影响。

我以前[写过这个](http://me.veekun.com/blog/2012/05/23/python-faq-passing/)；C 将变量视为预先确定的内存块的方式根本不适用于 Python。名称被移动到值上，而不是值被复制到某个固定数量的桶中。

(Also, nitpicking, but Python code generally uses `under_scores` and doesn't bother with types in names unless it's really ambiguous. So you might have `candidates` and `multi_candidates`. Definitely don't call anything an "array", since there's an `array` module in the standard library that does something different and generally not too useful. :))

# jquery - 使用 JSONP POST（用于移动应用的 REST WCF 服务）

> ID：15047866
> 
> 赞同：1
> 
> 时间：2013-02-24T01:58:33.967
> 
> 标签：jquery, json, wcf, rest, jsonp

伙计们，

这是我的技术问题。如果您有解决方案，请告诉我。

问题是：无法[使用 JSONP 进行 POST](https://stackoverflow.com/questions/2699277/post-data-to-jsonp)。由于将 GET 与 JSONP 一起使用存在[Bowser URL 限制](http://www.danrigsby.com/blog/index.php/2008/06/17/rest-and-max-url-size/)，因此我们实际上想使用 JSONP 进行 POST。互联网上提到了一些[复杂的解决方案](https://stackoverflow.com/questions/5345493/using-put-post-delete-with-jsonp-and-jquery)，但我不确定是否推荐它们。例如，我希望将以下 web 方法用作 POST 方法（而不是 GET 方法），否则它会超过 IE 中 2000 个字符的 URL 限制。请注意，此方法通过只包含少量参数而变得很小。

```
[OperationContract]
    [Description("Accepts input profile values and returns back insert status as true or false.")]
    [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped, Method = "POST",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json,
    UriTemplate = "InsertProfileDetails")]
    bool InsertProfileDetails(string AuthToken,
                          int Caste_Id, Boolean IsCasteNoBar, char Gender, int Age, int Height, string Complexion, string Marital_Status, int Religion_Id, int MotherTongue_Id, string Profile_Description,
                          string Education_Level,
                          DateTime Dob,
                          string Profile_FirstName, string Profile_LastName, string Address_Line1, string City, string State, int Country_Id, string ContactEmail, string CellPhonePrimary, string HomePhoneSecondary, string WorkPhoneOptional,
                          string EmploymentSector, string Profession,
                          int Min_Age, int Max_Age, int Min_Height, int Max_Height, string Religion_Ids, string Caste_Ids, string MotherTongue_Ids, string Education_Levels
                             ); 
```

考虑到这些限制，我能想到的唯一选择是提交小型表单（在“创建配置文件”用户场景的情况下使用多个表单），这反过来又调用更小的 GET Web 方法。而在服务器端，只有在接收到所有小表单数据后，才将表单数据提交到数据库。我们应该通过在每个表单请求期间使用从客户端发送的一些 Guid 来关联服务器端的所有小型用户表单。

让我知道你的想法。感谢您花时间阅读我的帖子。

谢谢，普莱特

# java - 使用 lwjgl 的 Java 高度图

> ID：15047868
> 
> 赞同：2
> 
> 时间：2013-02-24T01:59:06.993
> 
> 标签：java, lwjgl, frame-rate, heightmap

我编写了一个高度图，但它似乎落后于客户端。我只是不知道如何提高fps。高度图我得到大约 3-6fps。我为高度图使用了一个相当大的 bmp，我认为它是 1024x1024。当我使用较小的罚款时，也许我只是没有有效地使用代码。有没有更好的方法来编码这个高度图，或者我只是把它编码错了。这是我第一次制作高度图。谢谢

```
public class HeightMap {
    private final float xScale, yScale, zScale;
    private float[][] heightMap;

    private FloatBuffer vertices, normals, texCoords;
    private IntBuffer indices;

    private Vector3f[] verticesArray, normalsArray;
    private int[] indicesArray;
    private int width;
    private int height;

    public float getHeight(int x, int y) {
            return heightMap[x][y] * yScale;
    }

    public HeightMap(String path, int resolution) {
            heightMap = loadHeightmap("heightmap.bmp");

            xScale = 1000f / resolution;
            yScale = 8;
            zScale = 1000f / resolution;

            verticesArray = new Vector3f[width * height];
            vertices = BufferUtils.createFloatBuffer(3 * width * height);
            texCoords = BufferUtils.createFloatBuffer(2 * width * height);
            for (int x = 0; x < width; x++) {
                    for (int y = 0; y < height; y++) {
                            final int pos = height * x + y;
                            final Vector3f vertex = new Vector3f(xScale * x, yScale * heightMap[x][y], zScale * y);

                            verticesArray[pos] = vertex;
                            vertex.store(vertices);

                            texCoords.put(x / (float) width);
                            texCoords.put(y / (float) height);
                    }
            }
            vertices.flip();
            texCoords.flip();

            normalsArray = new Vector3f[height * width];
            normals = BufferUtils.createFloatBuffer(3 * width * height);
            final float xzScale = xScale;
            for (int x = 0; x < width; ++x) {
                    for (int y = 0; y < height; ++y) {
                            final int nextX = x < width - 1 ? x + 1 : x;
                            final int prevX = x > 0 ? x - 1 : x;
                            float sx = heightMap[nextX][y] - heightMap[prevX][y];
                            if (x == 0 || x == width - 1) {
                                    sx *= 2;
                            }

                            final int nextY = y < height - 1 ? y + 1 : y;
                            final int prevY = y > 0 ? y - 1 : y;
                            float sy = heightMap[x][nextY] - heightMap[x][prevY];
                            if (y == 0 || y == height - 1) {
                                    sy *= 2;
                            }

                            final Vector3f normal = new Vector3f(-sx * yScale, 2 * xzScale, sy * yScale).normalise(null);
                            normalsArray[height * x + y] = normal;
                            normal.store(normals);
                    }
            }
            normals.flip();

            indicesArray = new int[6 * (height - 1) * (width - 1)];
            indices = BufferUtils.createIntBuffer(6 * (width - 1) * (height - 1));
            for (int i = 0; i < width - 1; i++) {
                    for (int j = 0; j < height - 1; j++) {
                            int pos = (height - 1) * i + j;

                            indices.put(height * i + j);
                            indices.put(height * (i + 1) + j);
                            indices.put(height * (i + 1) + (j + 1));

                            indicesArray[6 * pos] = height * i + j;
                            indicesArray[6 * pos + 1] = height * (i + 1) + j;
                            indicesArray[6 * pos + 2] = height * (i + 1) + (j + 1);

                            indices.put(height * i + j);
                            indices.put(height * i + (j + 1));
                            indices.put(height * (i + 1) + (j + 1));

                            indicesArray[6 * pos + 3] = height * i + j;
                            indicesArray[6 * pos + 4] = height * i + (j + 1);
                            indicesArray[6 * pos + 5] = height * (i + 1) + (j + 1);

                    }
            }
            indices.flip();
    }

    private float[][] loadHeightmap(String fileName) {
            try {
                    BufferedImage img = ImageIO.read(ResourceLoader.getResourceAsStream(fileName));
                    width = img.getWidth();
                    height = img.getHeight();
                    float[][] heightMap = new float[width][height];
                    for (int x = 0; x < width; x++) {
                            for (int y = 0; y < height; y++) {
                                    heightMap[x][y] = 0xFF & img.getRGB(x, y);
                            }
                    }
                    return heightMap;
            } catch (IOException e) {
                    System.out.println("Nincs meg a heightmap!");
                    return null;
            }
    }

    public void render() {

            glEnableClientState(GL_NORMAL_ARRAY);
            glEnableClientState(GL_VERTEX_ARRAY);
            glEnableClientState(GL_TEXTURE_COORD_ARRAY);
            glNormalPointer(0, normals);
            glVertexPointer(3, 0, vertices);
            glTexCoordPointer(2, 0, texCoords);
            glDrawElements(GL_TRIANGLE_STRIP, indices);
            glDisableClientState(GL_NORMAL_ARRAY);
            glDisableClientState(GL_TEXTURE_COORD_ARRAY);
            glDisableClientState(GL_VERTEX_ARRAY);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T16:19:04.477

很抱歉提出一个老话题，但是我看到很多人问这个：

使用显示列表，而不是每次都重新制作高度图。TheCodingUniverse 有一个关于如何做到这一点的很好的教程。

# javascript - 使用 JavaScript for 循环使用 HTML div 填充数组时遇到问题

> ID：15047872
> 
> 赞同：2
> 
> 时间：2013-02-24T01:59:47.790
> 
> 标签：javascript

我正在尝试使用循环使用来自 5 个不同 div 元素的 HTML 填充数组的内容。我无法让 for 循环正常工作。有任何想法吗？

的HTML：

```
<div id="person0">John</div>
<div id="person1">Kathleen</div>
<div id="person2">Cynthia</div>
<div id="person3">Eric</div>
<div id="person4">Jay</div>

<div style="width: 600px; margin: auto; padding: 15px; border: 1px solid gray; font-family: sans-serif;">
        <h1>The People</h1>
        <div id="result"></div>
</div> 
```

Javascript：

```
function pageLoaded(){

  var list = "<ul>";
  var myArray = new Array();

  for(i=0; i<6; i++){
    var person = "person";
    var personNumber = "" + i.toString();
    var divId = person.concat(personNumber);
    myArray[i] = document.getElementById(divId).innerHTML;
    list +="<li>"+myArray[i]+"</li>";
  }

  list +="</ul>";

  document.getElementById("result").innerHTML=list;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:04:07.333

只需将`for`条件从更改`i<6`为`i<5`。

您运行循环的次数太多了，这意味着您在第六次迭代时这样做了：

```
myArray[i] = document.getElementById(divId).innerHTML; 
```

您正在寻找一个 id 为 的元素`"person5"`，因此`getElementById()`返回`null`了错误：

```
Uncaught TypeError: Cannot read property 'innerHTML' of null 
```

...这阻止了您的脚本完成。

演示：http: [//jsbin.com/awubeq/1/edit](http://jsbin.com/awubeq/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:08:50.417

你循环的 div 比你拥有的更多。如果你把它切换到4，它就可以工作。

```
for(i=0; i<5; i++){

or 

for(i=0; i<=4; i++){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T02:12:28.603

这是一个可行的解决方案（加上一些警报）：

```
<html>
<head>
   <title>Test</title>
   <script>

function pageLoaded()
{
  alert("called pageLoaded");
  var list = "<ul>";
  var myArray = new Array();

  for(i=0; i<5; i++){
    var person = "person";
    var personNumber = "" + i.toString();
    var divId = person.concat(personNumber);
    myArray[i] = document.getElementById(divId).innerHTML;
    alert("myArray[i]=" + myArray[i]);
    list +="<li>"+myArray[i]+"</li>";

  }

  list +="</ul>";

  alert(list);

  document.getElementById("result").innerHTML=list;

}
</script>
</head>

<body onload="pageLoaded()">

<div id="person0">John</div>
<div id="person1">Kathleen</div>
<div id="person2">Cynthia</div>
<div id="person3">Eric</div>
<div id="person4">Jay</div>

<div style="width: 600px; margin: auto; padding: 15px; border: 1px solid gray; font-family: sans-serif;">
        <h1>The People</h1>
        <div id="result"></div>
</div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T02:12:42.577

如果使用迭代器，则不必担心知道迭代目标的大小。

```
document.getElementById('result').innerHTML =
Array.prototype.reduce.call(document.querySelectorAll('[id^=person]'),
    function (prev, elem) {
       return prev + '<li>' + elem.innerHTML + '</li>';
}, '<ul>') + '</ul>'; 
```

[http://jsfiddle.net/ExplosionPIlls/Avfjs/1/](http://jsfiddle.net/ExplosionPIlls/Avfjs/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T02:32:07.403

由于您正在练习，我只想指出您应该重新考虑标记，因为这不是使用`id`属性而是使用`class`. 这种`id`方法虽然很常见，但却是不正确的，并且需要比必要更多的代码。这是一个具有更好标记的示例，这使得使用 javascript 更加简单。

[http://jsfiddle.net/3gpe8/](http://jsfiddle.net/3gpe8/)

# c# - 如何在c#中使用正则表达式在某些字符之间查找字符串

> ID：15047874
> 
> 赞同：0
> 
> 时间：2013-02-24T02:00:33.677
> 
> 标签：c#, regex

美好的一天~我不太擅长这个正则表达式。所以我需要你的帮助，拜托。

条件：用户可以一起输入他们的电子邮件地址和姓名。我想从字符串中提取电子邮件地址和用户名。

```
string pattern1 = "Peter Jackson<peter@jackson.com>"; 
```

从那个字符串我想得到“Peter Jackson”和“<peter@jackson.com>”。

```
string pattern2 = "Peter Jackson(peter@jackson.com)"; 
```

但是，人们总是会犯下面这样的错误。

他们也可以使用“[”代替“<”。所以...

```
string pattern3 = "Peter Jackson[peter@jackson.com]"; 
```

甚至一些愚蠢的用户也可以输入...

```
string pattern4 = "Peter Jackson{peter@jackson.com}"; 
```

所以，我不得不寻找“<”，“（”，“[”和“{”的字符。我试过了

```
string regularExpressionPattern = @"^(<|(|[|{)(.*?)^(}|]|)|>)"; 
```

但我觉得我做错了什么。而且我还尝试认为人们可能会输入更多错误，例如....

```
string pattern5 = "Peter Jackson<peter@jackson.com>mistake"; 
```

任何人都可以帮助解决这个问题吗？进阶谢谢。

PS：我知道如何用字符分割字符串。所以它不会有帮助。我需要一个正确的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:10:41.343

我相信您正在寻找的正则表达式如下：

```
(.*?)[<([{](.*?)[>)\]}] 
```

您需要第 1 组和第 2 组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:11:32.353

```
(.*?)[([<{](.*?)[)\]>}] 
```

我认为这应该足够了。

名称将在第一个捕获的组中，电子邮件将在第二个组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T02:11:48.047

似乎`(.*)[<\(\[{](.*)[>\)]}]`对我有用。

名称和电子邮件地址的组。

[http://regexr.com?33sq4](http://regexr.com?33sq4)是我的测试。

# java - 在 android 阅读器应用程序中利用 wordpress API

> ID：15047876
> 
> 赞同：0
> 
> 时间：2013-02-24T02:00:57.007
> 
> 标签：java, android, wordpress

我正在为我工​​作的校园出版物编写一个 android 杂志阅读器。我们使用 wordpress 发布我们的网站，我想利用 wordpress REST API 直接从网站中提取故事（帖子），而发布者在网站上发布帖子后无需采取任何额外步骤在应用程序上发布帖子。我将通过获取表示帖子的 JSON 对象并将它们反序列化为 Story 类的 POJO（在 android 应用程序中定义）来实现这一点，然后将围绕这些 POJO 动态构建视图。

我刚刚发现了 Wordpress REST API，我真的很兴奋，因为我认为上面描述的实现会非常简单。我是否遗漏了任何可能使事情复杂化的明显障碍？

我知道 API 以“内容”参数响应，该参数是一个包含帖子 HTML 代码的字符串，并在适当的位置引用包含的图像/媒体。如何让 Android 加载该 html 并在 WebViewer 中正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:27:00.207

如果您不想解析 html 并单独加载图像和其他资源，只需 [`loadDataWithBaseURL`](http://developer.android.com/reference/android/webkit/WebView.html#loadDataWithBaseURL%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)像这样使用：

```
WebView storyView = (WebView) findViewById( .... );
String htmlToDisplay = ....;
storyView.loadDataWithBaseURL( "http://storysite.com/', htmlToDisplay, mimeType, encoding, "" ); 
```

baseURL 将被添加到文档中找到的所有相对部分 URI，以便 WebView 可以为您加载所有其他资产。

# c++ - 简单的变换下不工作

> ID：15047877
> 
> 赞同：0
> 
> 时间：2013-02-24T02:00:58.473
> 
> 标签：c++, tolower

所以我见过很多类似的问题，但没有一个答案能解决我的问题。有人可以解释为什么这段代码：

```
string LinkedListByName::toLower(string stringToConvert){

return std::transform(stringToConvert.begin(), stringToConvert.end(), stringToConvert.begin(), ::tolower); } 
```

给我这个错误：

```
conversion from `__gnu_cxx::__normal_iterator<char*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >' to non-scalar type `std::string' requested 
```

在项目中，我需要将很多字符串转换为较低的字符串，而 boost 不是一种选择。我从字面上复制并粘贴了以前运行它的项目中的代码。

此外，头文件还包括以下内容：

```
#include <vector>
using namespace std;
#include <iostream>
using namespace std;
#include <string>
using namespace std;
#include <algorithm>
#include "Node.h"
namespace model { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:06:14.087

您的方法应该返回字符串，但您尝试从 std::transform 返回迭代器。将其更改为：

```
string LinkedListByName::toLower(string stringToConvert){
    std::transform(stringToConvert.begin(), stringToConvert.end(), stringToConvert.begin(), ::tolower); 
    return stringToConvert;
} 
```

# php - 如何正确地为 PHP 类中的私有静态变量赋值？

> ID：15047880
> 
> 赞同：0
> 
> 时间：2013-02-24T02:01:15.580
> 
> 标签：php

我有一个翻译语言数组基础的类。所以问题是语言不会根据 cookie 值改变。

这个函数应该设置语言值，但它没有。似乎无论我做什么，我总是将“ar”作为 self::$currlang 值。我该如何纠正这个问题？

```
public function _set(){

    if( $_COOKIE['defaultLang'] != '' ) {
        self::$currlang = $_COOKIE['defaultLang'];
    } else {
        //this is the default language
        self::$currlang = 'ar';
    }

} 
```

这是我的代码

感谢您的帮助 ：）

```
<?php
include('../langs/english.php');
include('../langs/arabic.php');

class Translator{
    private static $strs = array();
    private static $currlang = "";

    public function _set(){

        if( $_COOKIE['defaultLang'] != '' ) {
            self::$currlang = $_COOKIE['defaultLang'];
        } else {
            //this is the default language
            self::$currlang = 'ar';
        }

    }

    public static function loadTranslation($lang, $strs){
        if (empty(self::$strs[$lang]))
            self::$strs[$lang] = array();

        self::$strs[$lang] = array_merge(self::$strs[$lang], $strs);        
    }

    public static function setDefaultLang($lang){
        self::$currlang = $lang;        
    }

     public static function getDefaultLang(){
        return self::$currlang;        
    }

    public static function translate($key, $lang=""){
        if ($lang == ""){
            $lang = self::$currlang;
        }
        $str = self::$strs[$lang][$key];
        if (empty($str)){
            //$str = "$lang.$key"; 
            $str = 'Language "'. $lang . '", '. $key . ' is not defined.';           
        } 
        return $str;       
    }    

    public static function freeUnused(){
        foreach(self::$strs as $lang => $data){
            if ($lang != self::$currlang){
                $lstr = self::$strs[$lang]['langname'];
                self::$strs[$lang] = array();
                self::$strs[$lang]['langname'] = $lstr;                
            }            
        }        
    }

    public static function getLangList(){
        $list = array();
        foreach(self::$strs as $lang => $data){
            $h['name'] = $lang;
            $h['desc'] = self::$strs[$lang]['langname'];
            $h['current'] = $lang == self::$currlang;
            $list[] = $h;
        }
        return $list;        
    }

    public static function &getAllStrings($lang){
        return self::$strs[$lang];
    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:27:26.190

_set() 魔术方法与 -> 运算符一起使用，该运算符与实例化对象一起使用。您不能将静态成员变量与实例化对象一起使用，它是一个或另一个。

# java - 枚举 Switch 语句 Java 6“默认”案例

> ID：15047888
> 
> 赞同：4
> 
> 时间：2013-02-24T02:02:27.490
> 
> 标签：java, enums, switch-statement

```
private enum CLASS {FMAN, SOPH, JUN, SEN, GRAD, ERROR};

private CLASS stringToClass(String t){

    switch(CLASS.valueOf(t))
    {
    case FMAN: return CLASS.FMAN;
    case SOPH: return CLASS.SOPH;
    case JUN: return CLASS.JUN;
    case SEN: return CLASS.SEN;
    case GRAD: return CLASS.GRAD;
    default: 
        System.out.println("NOT VALID CLASS. ERROR");
        return CLASS.ERROR;
    }
} 
```

所以我在这里有这段代码。在构建时，我有这个方法可以从给定的字符串 t 返回相应的值。

我的问题是，假设“t”最终成为“CSE”。我该如何处理并基本上返回 CLASS.ERROR. 的值？

顺便说一下，这是在 Java 6 中，而不是 7 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T02:25:06.843

这是一个更好的写法：

```
private CLASS stringToClass(String t){
    try {
        return CLASS.valueOf(t);
    } catch (InvalidArgumentException ex) {
        return CLASS.ERROR;
    }
} 
```

switch 语句是多余的......它实际上使您的代码更加脆弱，因为如果您向`enum`.

* * *

我还应该在您的代码中指出一些风格上的暴行：

*   将枚举称为“CLASS”是一种可怕的误导。
*   您使用了错误类型的标识符。所有类型名称都应使用驼峰式书写，并以大写字母开头。（作为首字母缩略词的名称可以被视为例外，但 CLASS 不是首字母缩略词。）

> 我知道我知道。这可能会令人困惑。我的名字不好。但是我已经在我的代码中进行了分类。

是的......好吧，把它换成别的东西。动用你的想象力。但不要打破风格规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:42:51.553

同意 StevenC 的回答，但我会：

*   将枚举重命名为风格上更可接受的名称
*   将方法滚动到枚举中
*   重命名方法，使其在枚举类名的上下文中有意义
*   命名 Exception 参数`ignore`（指示它被忽略的传统方式）
*   用方法去掉符合条件的枚举类名

离开这个：

```
private enum ClassLevel {
    FMAN, SOPH, JUN, SEN, GRAD, ERROR;

    static ClassLevel parseString(String t) {
        try {
            return valueOf(t);
        } catch (InvalidArgumentException ignore) {
            return ERROR;
        }
    }
} 
```

# matlab - 如何在 Matlab 中将 UNIX 时间戳转换为 EST 时间？

> ID：15047889
> 
> 赞同：0
> 
> 时间：2013-02-24T02:02:36.490
> 
> 标签：matlab, utc

如何将 UNIX 时间戳转换为系统时间和日期？就我而言，美国东部时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T20:14:57.847

自 1970 年 1 月 1 日午夜起，Unix 时间戳通常以毫秒为单位，但有时自同一时刻起以秒为单位。可以通过`datenum([1970 1 1 0 0 timestamp/1000])`（参见[相关的 Mathworks 技术说明](http://www.mathworks.com/support/solutions/en/data/1-9B9H2S/)）将它们转换为 Matlab 日期数字。如果时间戳不是以毫秒为单位，而是以秒为单位，请不要除以 1000。一旦获得 datenum，您可以使用该`datestr`函数将其转换为您喜欢的任何格式的字符串。

或者，您可以使用 Java`java.util.Date(timestamp)`将时间戳转换为 Java 日期对象，然后使用 Date 方法将其转换为 Java 字符串，然后使用 Matlab 的`char`函数将其转换为 Java 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T04:31:39.250

您可以使用[datenum](http://www.mathworks.com/help/matlab/ref/datenum.html)将几乎任何格式的时间字符串转换为序列日期数字，然后使用[datestr](http://www.mathworks.com/help/matlab/ref/datestr.html)或[datevec](http://www.mathworks.com/help/matlab/ref/datevec.html)转换为您需要的任何格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T15:31:35.190

我只是遇到了同样的问题，并帮助自己完成了类似的功能

```
function dv=datevec_from_timestamp(ts)
% Converts a UNIX timestamp (UTC based) to a (local!) datevec which can
% then be used as usual with datestr, datenum etc.
cal=java.util.Calendar.getInstance;
cal.setTimeInMillis(ts * 1000)
dv = [cal.get(cal.YEAR) cal.get(cal.MONTH)+1 cal.get(cal.DAY_OF_MONTH) ...
    cal.get(cal.HOUR) cal.get(cal.MINUTE) cal.get(cal.SECOND)]; 
```

# forms - 使用正确的 SSL 证书时表单验证不正确

> ID：15047897
> 
> 赞同：2
> 
> 时间：2013-02-24T02:03:38.090
> 
> 标签：forms, validation, ssl, joomla, recaptcha

当我在我的网站上使用正确的 SSL 证书时，我会在 joomla 中遇到错误，如果使用未知的 http 证书，这些错误不会出现：

1.  使用错误的凭据登录时，我进入错误页面 500 而不是验证，而不是消息“用户名或密码错误......”淡入。

2.  注册时，ReCaptcha 中的错误文本被提示而不是验证，所有字段中的数据都被删除，并且没有关于错误验证码的消息淡入。

使用正确的 SSL 证书时我做错了什么？

ReCaptcha 的注意事项：在 K2 中，我将提到的脚本源放在[此处](https://developers.google.com/recaptcha/docs/tips)。

推杆

```
RewriteCond .*(/component/users/?view=login) off 
```

在我的 .htaccess 末尾没有帮助。

* * *

可能相关的技术数据：

SSL 证书：GeoTrust RapidSSL

CMS：Joomla！2.5.9 稳定

登录形式：Joomla 的标准模块

Register-Form：Joomla + K2 2.6.2 的Authentication-Plugin

* * *

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:38:54.967

我已经解决了这个问题。这不是 SSL 问题。

*configuration.php*中的这些路径在根目录下不正确，我忽略了它:(

```
public $log_path = '/SERVER_PATH/JOOMLA_INSTALLATION/logs';
public $tmp_path = '/SERVER_PATH/JOOMLA_INSTALLATION/tmp'; 
```

因此，当您使用错误的凭据登录或输入错误的 ReCaptcha 文本时，joomla 会尝试创建上述目录。如果 joomla 未能做到这一点（确实如此），而不是通过登录表单和 ReCaptcha 进行验证，您会得到我之前帖子中描述的奇怪行为。

@Lodder：下次我会更新我的 K2

@Jobin Jose：是的，我激活了 SSL 管理端。

# ruby-on-rails - 尝试执行任何以“rails”开头的命令会产生“Could not locate Gemfile”

> ID：15047899
> 
> 赞同：3
> 
> 时间：2013-02-24T02:03:52.443
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, installation, rvm, gemfile

我正在尝试安装一个新的 rails 应用程序。我的机器上已经有几个 Rails 应用程序，一切正常。

```
$ rails new app
Could not locate Gemfile 
```

然后我想我会运行一个跟踪来弄清楚发生了什么，因为无论如何你都不希望有一个，因为通常上面的命令会在一个名为包含的目录中`Gemfile`创建一个全新的 rails 应用程序在那个目录中。`app``Gemfile`

```
$ rails new app --trace
Could not locate Gemfile 
```

因此，我尝试通过此详细指南在计算机上重新安装所有内容：

[http://railsapps.github.com/installing-rails.html#gems](http://railsapps.github.com/installing-rails.html#gems)

在前 20 个左右的步骤之后，我得到了这个命令：

```
$ rake -v
Could not locate Gemfile 
```

我认为我的设置在某处有问题，但我看不到任何东西。

这是我的 rvm 设置：

```
$ rvm version

rvm 1.18.10 (latest) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

$ rvm list

rvm rubies

   jruby-1.6.7 [ x86_64 ]
   ruby-1.9.1-p431 [ i386 ]
   ruby-1.9.3-p194 [ x86_64 ]
   ruby-1.9.3-p286 [ x86_64 ]
   ruby-1.9.3-p327 [ x86_64 ]
=* ruby-1.9.3-p385 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

$ rvm gemset list

gemsets for ruby-1.9.3-p385 (found in /Users/paul/.rvm/gems/ruby-1.9.3-p385)
   (default)
   global
=> rails32 
```

这是安装在我的 rails32 gemset 上的 gem

```
$ gem list

*** LOCAL GEMS ***

actionmailer (3.2.12, 3.2.11)
actionpack (3.2.12, 3.2.11)
activemodel (3.2.12, 3.2.11)
activerecord (3.2.12, 3.2.11)
activeresource (3.2.12, 3.2.11)
activesupport (3.2.12, 3.2.11)
arel (3.0.2)
builder (3.0.4)
bundler (1.2.4)
erubis (2.7.0)
hike (1.2.1)
i18n (0.6.1)
journey (1.0.4)
json (1.7.7)
mail (2.4.4)
mime-types (1.21)
multi_json (1.6.1)
polyglot (0.3.3)
rack (1.4.5)
rack-cache (1.2)
rack-ssl (1.3.3)
rack-test (0.6.2)
rails (3.2.12, 3.2.11)
railties (3.2.12, 3.2.11)
rake (10.0.3)
rdoc (3.12.1)
rubygems-bundler (1.1.0)
rvm (1.11.3.6)
sprockets (2.2.2)
thor (0.17.0)
tilt (1.3.3)
treetop (1.4.12)
tzinfo (0.3.35) 
```

捆绑器版本

```
$ bundle --version
Bundler version 1.2.4 
```

.gemrc 文件

```
$ cat ~/.gemrc
---
:backtrace: false
:benchmark: false
:bulk_threshold: 1000
:sources:
- http://rubygems.org/
- https://rubygems.org
:update_sources: true
:verbose: true 
```

一切似乎都很好，非常沮丧，请帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T07:35:07.370

此错误仅发生在当前目录中带有`bundle exec`或`bundle install`不带前缀的命令中。`Gemfile`

我的假设是您可能正在运行启用的命令`bundler`，请检查：

```
which rake 
```

找出正在运行的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T17:23:14.437

```
bundle install 
```

在项目目录中为我修复了它。之后，我遇到了这个错误：

> 您的 Gemfile 中有错误，Bundler 无法继续。

这已通过以下方式解决：

```
gem update bundler 
```

然后我重新安装 Ruby 和 Rails 终于奏效了。只花了大约四个小时就让它工作了：-/

# c# - Java 相当于什么异步回调？

> ID：15047901
> 
> 赞同：0
> 
> 时间：2013-02-24T02:04:06.940
> 
> 标签：c#, java, .net, jakarta-ee, asynchronous

鉴于 C# 和 Java 之间的相似性，我希望 Java 具有类似的编程支持。我听说 Java 有这个 Future 的东西，但我不知道它与 C# 异步模式类似。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:48:19.633

Java 基础建议对于异步处理，您必须启动不同的线程（新的或重用的）。所以最简单的代码如下：

```
Thread t = new Thread(new Runnable()) {
    public void run() {
        // your asynchronous code.
    }
});
t.start(); 
```

在后来的 Java 版本中引入了许多新特性，但它们都是基于这个简单的构造。

例如，`Future`前面`FutureTask`提到的帮助有助于捕获在并行线程中执行的方法调用的结果。在最新版本的 java 中，特别是在 package 中，还有更多的特性`java.util.concurrent`：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/package-summary.html)

# azure - 无法连接到使用 Azure 命令行工具创建的 VM

> ID：15047904
> 
> 赞同：0
> 
> 时间：2013-02-24T02:04:22.017
> 
> 标签：azure

我正在尝试使用 Azure 命令行工具 ( [http://www.windowsazure.com/en-us/manage/linux/how-to-guides/command-line-tools/](http://www.windowsazure.com/en-us/manage/linux/how-to-guides/command-line-tools/) ) 创建一个 Ubuntu 12.04 VM。

我发出以下命令：

```
azure vm create xxxxxxxxxx.cloudapp.net b39f27a8b8c64d52b05eac6a62ebad85__Ubuntu-12_04_1-LTS-amd64-server-20121218-en-us-30GB azureuser mypassword --location "West Europe"

azure vm endpoint create xxxxxxxxxx 22 22

azure vm start xxxxxxxxxx 
```

这似乎成功地创建并启动了虚拟机。

我尝试使用以下命令（在 Mac OS X 上）通过 SSH 连接到 VM

```
ssh azureuser@xxxxxxxxxx.cloudapp.net 
```

但是，当我尝试通过 SSH 连接到 VM 时，似乎在 VM 上禁用了密码身份验证，因为我收到以下错误：

```
Permission denied (publickey). 
```

我想补充一点，通过 SSH 连接到通过 Azure 管理门户创建的 Ubuntu VM 工作得很好。此问题仅在通过 Azure 命令行工具创建 VM 时出现。

有没有人遇到过类似的问题并知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T06:16:46.890

您需要使用命令`--ssh`上的开关`azure vm create`来启用 ssh。添加端点没有效果。

根据[适用于 Mac 和 Linux 文档的 Windows Azure 命令行工具，](http://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/)您只能在创建虚拟机时通过 azure cli 添加 ssh 连接。

# php - PHP 删除“在 GET

> ID：15047907
> 
> 赞同：-8
> 
> 时间：2013-02-24T02:05:49.340
> 
> 标签：php, get

我只需要一个没有任何“标记”的 GET 变量。标记可以，但“不是”。我需要做什么来解决这个问题？不，将 " 标记更改为 ' 不起作用。我必须这样做，因为 GET 是 URL 链接，因此 URL 链接必须在两个 " 引号内。如果 " 标记在这些行内，它将导致链接停止。

```
' . $_GET["test"] . ' 
```

我的代码

```
<?php
$user = str_replace($_GET["user"], "\"", "'");
$user = "" . $user . "";
?>

<iframe src="https://domain.tld/?user=' . $user . '&password=' . $_GET['password'] . '&version=99" height="30" width="500"></iframe> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:07:06.820

您可以简单地获取 $_GET[''] 变量并使用查找和替换来替换所有“

例子：

```
$myVar = str_replace($_GET["myVar"], "\"", "'");
$myStringWithVar = "" . $myVar . ""; 
```

完整示例：

```
<iframe src="https://domain.tld/?user=<?php echo
str_replace($_GET["myVar"], "\"", "'");  ?>&password=' .
$_GET['password'] . '&version=99" height="30" width="500"></iframe> 
```

请不要在以后用不同的用户名再次问同样的问题（就像你做的那样）

# entity-framework - 如何使用 MethodCallExpressions 编写左外连接？

> ID：15047912
> 
> 赞同：0
> 
> 时间：2013-02-24T02:06:45.710
> 
> 标签：entity-framework, lambda, left-join, expression-trees, linq-expressions

下面的代码块回答了这个问题：“[如何使用 linq 扩展方法执行左外连接？](https://stackoverflow.com/questions/584820/how-do-you-perform-a-left-outer-join-using-linq-extension-methods) ”

```
var qry = Foo.GroupJoin(
      Bar, 
      foo => foo.Foo_Id,
      bar => bar.Foo_Id,
      (x,y) => new { Foo = x, Bars = y })
.SelectMany(
      x => x.Bars.DefaultIfEmpty(),
      (x,y) => new { Foo = x, Bar = y}); 
```

您如何将此 GroupJoin 和 SelectMany 编写为 MethodCallExpressions？ 我发现的[所有示例都是使用 DynamicExpressions 将字符串转换为 lambdas 编写的（](https://stackoverflow.com/questions/7364436/how-do-i-do-a-left-outer-join-with-dynamic-linq)[另一个示例](https://stackoverflow.com/questions/896204/how-to-implement-outer-join-expression-tree)）。如果可能的话，我想避免依赖该库。

上面的查询可以用表达式和相关方法编写吗？

我知道如何构造基本的 lambda 表达式，例如`foo => foo.Foo_Id`使用 ParameterExpressions MemberExpressions 和 Expression.Lambda() ，但是你如何构造`(x,y) => new { Foo = x, Bars = y })`??? 能够构造必要的参数来创建两个调用？

```
MethodCallExpression groupJoinCall =
         Expression.Call(
           typeof(Queryable),
           "GroupJoin",
           new Type[] { 
                  typeof(Customers), 
                  typeof(Purchases), 
                  outerSelectorLambda.Body.Type, 
                  resultsSelectorLambda.Body.Type 
               },
                           c.Expression,
                           p.Expression,
                           Expression.Quote(outerSelectorLambda),
                           Expression.Quote(innerSelectorLambda),
                           Expression.Quote(resultsSelectorLambda)
                        );
MethodCallExpression selectManyCall =
   Expression.Call(typeof(Queryable), 
    "SelectMany", new Type[] { 
        groupJoinCall.ElementType, 
        resultType, 
        resultsSelectorLambda.Body.Type 
    }, groupJoinCall.Expression, Expression.Quote(lambda), 
    Expression.Quote(resultsSelectorLambda))); 
```

最终，我需要创建一个可重复的过程，将 join n Bars 留给 Foo。因为我们有一个垂直数据结构，所以需要一个左连接查询来返回表示为 Bars 的内容，以允许用户对 Foo 进行排序。要求是允许用户按 10 个条进行排序，但我不希望他们使用超过三个。我尝试编写一个将上面第一个块中的代码链接多达 10 次的过程，但是一旦我通过了 5 Visual Studio 2012 开始变慢并且大约 7 它被锁定。

因此，我现在正在尝试编写一个方法，该方法返回 selectManyCall 并根据用户的请求多次递归调用自身。

根据下面在 LinqPad 中工作的查询，需要重复的过程只需要手动处理 Expression 对象中的透明标识符。查询 sorts 返回按 Bars 排序的 Foos（在本例中为 3 个 Bars）。

一个旁注。这个过程在 OrderBy 委托中进行连接要容易得多，但是，它产生的查询包括 T-SQL “OUTER APPLY”，Oracle 不支持它，这是必需的。

我很感激关于如何将投影写入匿名类型或任何其他开箱即用的想法的任何想法。谢谢你。

```
var q = Foos
        .GroupJoin (
            Bars, 
            g => g.FooID, 
            sv => sv.FooID, 
            (g, v) => 
                new  
                {
                    g = g, 
                    v = v
                }
        )
        .SelectMany (
            s => s.v.DefaultIfEmpty (), 
            (s, v) => 
                new  
                {
                    s = s, 
                    v = v
                }
        )
        .GroupJoin (
            Bars, 
            g => g.s.g.FooID, 
            sv => sv.FooID, 
            (g, v) => 
                new  
                {
                    g = g, 
                    v = v
                }
        )
        .SelectMany (
            s => s.v.DefaultIfEmpty (), 
            (s, v) => 
                new  
                {
                    s = s, 
                    v = v
                }
        )
        .GroupJoin (
            Bars,  
            g => g.s.g.s.g.FooID, 
            sv => sv.FooID, 
            (g, v) => 
                new  
                {
                    g = g, 
                    v = v
                }
        )
        .SelectMany (
            s => s.v.DefaultIfEmpty (),  
            (s, v) => 
                new  
                {
                    s = s, 
                    v = v
                }
        )
        .OrderBy (a => a.s.g.s.g.v.Text)
        .ThenBy (a => a.s.g.v.Text)
        .ThenByDescending (a => a.v.Date)
        .Select (a => a.s.g.s.g.s.g); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T05:53:05.130

如果您在弄清楚如何生成表达式时遇到问题，您总是可以从编译器那里获得帮助。你可以做的是用你要查询的类型声明一个 lambda 表达式并编写 lambda。编译器将为您生成表达式，您可以检查它以查看哪些表达式构成了表达式树。

例如，您的表达式等价于使用查询语法（或者如果您愿意，您可以使用方法调用语法）

```
Expression<Func<IQueryable<Foo>, IQueryable<Bar>, IQueryable>> expr =
    (Foo, Bar) =>
        from foo in Foo
        join bar in Bar on foo.Foo_Id equals bar.Foo_Id into bars
        from bar in bars.DefaultIfEmpty()
        select new
        {
            Foo = foo,
            Bar = bar,
        }; 
```

* * *

要回答您的问题，您不能真正生成创建匿名对象的表达式，实际类型在编译时是未知的。你可以通过创建一个虚拟对象来作弊，并使用`GetType()`它来获取它的类型，然后你可以使用它来创建适当的新表达式，但这更像是一种肮脏的黑客行为，我不建议这样做。这样做，您将无法生成强类型表达式，因为您不知道匿名类型的类型。

例如，

```
var dummyType = new
{
    foo = default(Foo),
    bars = default(IQueryable<Bar>),
}.GetType();

var fooExpr = Expression.Parameter(typeof(Foo), "foo");
var barsExpr = Expression.Parameter(typeof(IQueryable<Bar>), "bars");
var fooProp = dummyType.GetProperty("foo");
var barsProp = dummyType.GetProperty("bars");
var ctor = dummyType.GetConstructor(new Type[]
{
    fooProp.PropertyType,
    barsProp.PropertyType,
});
var newExpr = Expression.New(
    ctor,
    new Expression[] { fooExpr, barsExpr },
    new MemberInfo[] { fooProp, barsProp }
);
// the expression type is unknown, just some lambda
var lambda = Expression.Lambda(newExpr, fooExpr, barsExpr); 
```

每当您需要生成一个涉及匿名对象的表达式时，正确的做法是创建一个已知类型并使用它来代替匿名类型。是的，它的用途有限，但它是处理这种情况的一种更清洁的方法。然后至少您将能够在编译时获取类型。

```
// use this type instead of the anonymous one
public class Dummy
{
    public Foo foo { get; set; }
    public IQueryable<Bar> bars { get; set; }
} 
```

```
var dummyType = typeof(Dummy);

var fooExpr = Expression.Parameter(typeof(Foo), "foo");
var barsExpr = Expression.Parameter(typeof(IQueryable<Bar>), "bars");
var fooProp = dummyType.GetProperty("foo");
var barsProp = dummyType.GetProperty("bars");
var ctor = dummyType.GetConstructor(Type.EmptyTypes);

var newExpr = Expression.MemberInit(
    Expression.New(ctor),
    Expression.Bind(fooProp, fooExpr),
    Expression.Bind(barsProp, barsExpr)
);
// lambda's type is known at compile time now
var lambda = Expression.Lambda<Func<Foo, IQueryable<Bar>, Dummy>>(
    newExpr,
    fooExpr,
    barsExpr); 
```

或者，您可以在表达式中使用元组，而不是创建和使用虚拟类型。

```
static Expression<Func<T1, T2, Tuple<T1, T2>>> GetExpression<T1, T2>()
{
    var type1 = typeof(T1);
    var type2 = typeof(T2);
    var tupleType = typeof(Tuple<T1, T2>);

    var arg1Expr = Expression.Parameter(type1, "arg1");
    var arg2Expr = Expression.Parameter(type2, "arg2");
    var arg1Prop = tupleType.GetProperty("Item1");
    var arg2Prop = tupleType.GetProperty("Item2");
    var ctor = tupleType.GetConstructor(new Type[]
    {
        arg1Prop.PropertyType,
        arg2Prop.PropertyType,
    });

    var newExpr = Expression.New(
        ctor,
        new Expression[] { arg1Expr, arg2Expr },
        new MemberInfo[] { arg1Prop, arg2Prop }
    );
    // lambda's type is known at compile time now
    var lambda = Expression.Lambda<Func<T1, T2, Tuple<T1, T2>>>(
        newExpr,
        arg1Expr,
        arg2Expr);
    return lambda;
} 
```

然后使用它：

```
var expr = GetExpression<Foo, IQueryable<Bar>>(); 
```

# sms - 如何使用 Twilio API 跟踪对多个收件人的 SMS 响应？

> ID：15047919
> 
> 赞同：4
> 
> 时间：2013-02-24T02:07:15.390
> 
> 标签：sms, twilio, survey

**我想向多个**收件人发送短信调查（例如*“您对 X 服务有多满意？回复 1 表示满意，回复 2 表示不满意”*） 。从响应中，我想创建一个关于响应 1 与响应 2 的收件人的报告。使用 Twilio API 执行此操作的最佳方法是什么？我的应用程序是否需要存储收到的[SMS 消息](http://www.twilio.com/blog/2012/04/get-started-with-twilio-sms-receiving-incoming-sms-quickstart.html)的结果，或者 Twilio 是否存储这些结果以便我可以查询结果？如果是前者并且涉及到 TwiML，我该如何解析响应并存储结果？谢谢！

 *** * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T20:12:18.390

** 免责声明：这里是 Twilio 的布道者 **

奇拉格：

所以听起来你在这里有两个要求：

1.  使用 Twilio 向不同的收件人发送出站短信
2.  捕获用户对该消息的回复

对于第一个要求，您可以首先访问 Twilio.com 并注册一个新帐户。它免费开始，我们为您提供 Twilio 电话号码，您可以使用它开始构建您的应用程序。获得 Twilio 电话号码后，您可以使用 REST API 开始从该 Twilio 电话号码发送出站短信。我们有一个快速入门向您展示如何执行此操作：

[http://www.twilio.com/docs/quickstart/php/sms/sending-via-rest](http://www.twilio.com/docs/quickstart/php/sms/sending-via-rest)

请注意，此链接指向 PHP 示例，但您可以使用页面顶部的下拉菜单从 .NET、Java、Python 或 Ruby 等其他堆栈中进行选择。

发送出站消息后，您需要捕获对该消息的回复（您的第二个要求）。Twilio 使用称为 webhook 的东西来通知您收到的 SMS 消息。

Webhook 基本上是您的应用程序公开的 URL，并与您的 Twilio 电话号码相关联。您可以在 Twilio 仪表板中配置与您的电话号码关联的 URL。

每次我们在您的 Twilio 电话号码上收到传入的 SMS 消息时，我们都会向该 URL 发出 HTTP 请求。作为该 HTTP 请求的一部分，我们发送有关入站消息的元数据，例如发送消息的电话号码和消息的正文。我们发送的参数的完整列表在这里：

[http://www.twilio.com/docs/api/twiml/sms/twilio_request](http://www.twilio.com/docs/api/twiml/sms/twilio_request)

现在，您的应用程序可以将这些参数从请求中提取出来，并对它们执行任何操作。由于我们已经在收到消息时发送了正文，Tims 建议基于 From 参数跟踪响应并将消息正文存储在您自己的数据库中是一个很好的建议。

此快速入门显示接收传入的文本消息，获取 From 参数，然后通过从 TwiML 发回来响应：

[http://www.twilio.com/docs/quickstart/php/sms/replying-to-sms-messages](http://www.twilio.com/docs/quickstart/php/sms/replying-to-sms-messages)

在您的情况下，如果您不想回复传入的消息，只需省略 TwiML 响应。

希望有帮助。如果您需要更多信息，请告诉我。

德文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T19:49:06.590

`From`使用参数跟踪响应（并`Body`用于识别选择）。是的，Twilio 存储这些消息，您可以查询 API - 但最好将其存储在您自己的数据库中。**

# python - 使用带有斜纹的 showforms() 命令时出现解析错误

> ID：15047922
> 
> 赞同：2
> 
> 时间：2013-02-24T02:07:44.350
> 
> 标签：python, browser, web, navigation, twill

我对这个程序的想法是有一个简单的（假设是）脚本来监控现在是什么时间，当它在某个时间范围内（例如早上 6 点到晚上 7 点）时，它会导航到 opendns.com 并阻止某些网站使用 web 内容过滤功能。

我以为我会从简单的开始，只需找出登录网站和阻止网站的命令，然后担心时间监控等。但可悲的是，我也遇到了麻烦。

我正在使用[http://twill.idyll.org/](http://twill.idyll.org/)但不确定这是否是个好主意。这是除了 mechanize 之外我能找到的唯一一个（我找不到正确的文档，但也许我只是没有在正确的地方寻找）

这是我的代码（嗯，它还不是真正的代码。只是 Python Shell 的命令列表）：

```
from twill import get_browser
from twill.commands import *

username = "username@email.com" # email for opendns
password = "thisisthepassword" # password for opendns
b = get_browser()

b.go("https://dashboard.opendns.com/")
b.showforms()

fv("2", "username", username)
fv("2", "password", password)
showforms()

submit("sign-in")

b.showforms()

b.go ("https://dashboard.opendns.com/settings/*MYNETWORKID*/content_filtering") # I replaced my network ID due to privacy reasons but this is basically the URL to the web content filtering page on OpenDNS for a network

b.showforms() 
```

现在这就是我的问题开始的地方。在最后一个 b.showforms() 我收到一个错误：

```
Traceback (most recent call last):
  File "<pyshell#43>", line 1, in <module>
    b.showforms()
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\browser.py", line 225, in showforms
    forms = self.get_all_forms()
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\browser.py", line 259, in get_all_forms
    global_form = self._browser.global_form()
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\other_packages\_mechanize_dist\_mechanize.py", line 446, in global_form
    return self._factory.global_form
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\utils.py", line 334, in get_global_form
    return self.factory.global_form
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\other_packages\_mechanize_dist\_html.py", line 521, in __getattr__
    self.forms()
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\other_packages\_mechanize_dist\_html.py", line 534, in forms
    self._forms_factory.forms())
  File "C:\Python27\lib\site-packages\twill-0.9-py2.7.egg\twill\other_packages\_mechanize_dist\_html.py", line 226, in forms
    raise ParseError(exc)
ParseError: <unprintable ParseError object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T02:56:00.577

是的，python 的斜纹布并不是世界上最好的文档。我认为您基本上可以忘记“get_browser”的东西。这样斜纹布的东西对我来说更清楚一点：

```
import twill.commands as twill

username = "username@email.com" # email for opendns
password = "thisisthepassword" # password for opendns

twill.go("https://dashboard.opendns.com/")
twill.showforms()

twill.fv("2", "username", username)
twill.fv("2", "password", password)
twill.showforms()

twill.submit("sign-in")

twill.showforms()

twill.go ("https://dashboard.opendns.com/settings/*MYNETWORKID*/content_filtering") # I replaced my network ID due to privacy reasons but this is basically the URL to the web content filtering page on OpenDNS for a network

twill.showforms() 
```

# android - Android 动态壁纸 - onOffsetsChanged 参数永远不会改变

> ID：15047925
> 
> 赞同：3
> 
> 时间：2013-02-24T02:08:04.493
> 
> 标签：android, live-wallpaper, parallax

我正在尝试调整 Google 的 CubeLiveWallpaper 演示以在动态壁纸中创建视差效果。我已经移除了立方体并显示了我自己的图像，这很棒，但我碰壁了。

我的理解是，我应该能够使用 onOffsetsChanged() 中的 xPixels 来确定在画布上绘制位图的位置。假设我还没有说疯话，逻辑会规定每次用户滑动时 xPixels 都必须是不同的值。我已经用日志声明证明这不会发生。事实上，onOffsetsChanged() 接收到的值都不会改变。结果是我的图像不动。

首先，我将提供日志输出，然后是代码。

**日志（从 Dalvik 调试监视器复制）。在任一方向上的每次滑动都会产生此输出。**

```
02-23 20:09:29.859: D/onOffsetsChanged(1039): xOffset (0.500000) | yOffset (0.000000) | xStep (0.000000) | yStep (0.000000) | xPixels (-160) | yPixels (0) 
```

**onOffsetsChanged**

```
 public void onOffsetsChanged( float xOffset, float yOffset, float xStep, float yStep, int xPixels, int yPixels )
  {
     Log.d( "onOffsetsChanged", String.format("xOffset (%f) | yOffset (%f) | xStep (%f) | yStep (%f) | xPixels (%d) | yPixels (%d)",
            xOffset,
            yOffset,
            xStep,
            yStep,
            xPixels,
            yPixels) );

     mOffset = xPixels;  // mOffset is a member of my class
     drawFrame();
  } 
```

我认为包括下面的代码是不必要的，因为绘图操作是在 onOffsetsChanged 中分配 mOffset 之后进行的，但是看到我是如何在这里寻求帮助的人，我已经失去了假设事情的权利。

**画框（）**

```
 void drawFrame()
  {
     final SurfaceHolder holder = getSurfaceHolder();

     Canvas c = null;

     try
     {
        c = holder.lockCanvas();

        if( c != null )
        {
           drawBackdrop( c );
        }
     }
     finally
     {
        if( c != null )
        {
           holder.unlockCanvasAndPost( c );
        }
     }

     mHandler.removeCallbacks( drawFrameRunnable );

     if( mVisible )
     {
        mHandler.postDelayed( drawFrameRunnable, 1000 / 25 );
     }
  } 
```

**绘制背景（）**

```
 void drawBackdrop( Canvas c )
  {
     c.save();
     c.drawColor( Color.BLACK );

     c.drawBitmap( backdropBmp,
                   mOffset,
                   0,
                   null );
     c.restore();
  } 
```

作为最后一点，我会提到，据我所知，我的手机支持滚动壁纸。我知道例如 Galaxy S3 没有（来源： [http](http://androidforums.com/samsung-galaxy-s3/586033-galaxy-s3-cheated-some-us-leaving-out-scrolling-wallpapers.html) ://androidforums.com/samsung-galaxy-s3/586033-galaxy-s3-cheated-some-us-leaving-out-scrolling-wallpapers.html ）。我从 Play 商店下载了几张动态壁纸，它们都已成功滚动。我假设那些开发人员并没有以某种方式跳过一堆箍来破解我设备的相同功能。我正在使用三星 Transform Ultra。

谢谢您的帮助！

# c++ - 如何使用带有递归模板函数的线程

> ID：15047929
> 
> 赞同：1
> 
> 时间：2013-02-24T02:08:22.710
> 
> 标签：c++, multithreading, templates, c++11

我一直在尝试使用线程优化排序算法（快速排序）。我知道它在 std::sort() 实现中已经相当不错了，但我正试图通过我的计算机上的优化来击败它，同时了解线程。

所以，我的问题是，如何在递归快速排序函数中使用线程？

这是函数（删除了对问题不重要的东西）：

```
template <typename T>
void quicksort(T arr[], const int &size, const int &beginning, const int &end)
{
    // Algorithm here
    thread t1(quicksort, arr, size, beginning, slow - 1);
    thread t2(quicksort, arr, size, slow + 1, end);
} 
```

如果我错了，您最终需要更多代码，请告诉我，我会更新它。

我正在使用 Visual Studio 2012，截至目前，错误状态：

```
error C2661: 'std::thread::thread' : no overloaded function takes 5 arguments 
```

我也尝试在每个参数上调用 ref(arr) 等，但我得到了同样的错误。

编辑：在尝试@mfontanini 的解决方案后，我可以毫无错误地编译，但在运行时，我得到：

```
Debug Error!

Program: ...sktop\VisualStudio\Projects\SpeedTester\Debug\SpeedTester.exe

R6010
- abort() has been called

(Press Retry to debug the application) 
```

一遍一遍地重复。最终，它以代码 3 退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:09:15.300

您需要明确指出哪个是`T`模板参数：

```
thread t1(&quicksort<T>, arr, size, beginning, slow - 1); 
```

否则编译器会看到你指的是一个函数模板，而不是哪个特定的特化；它不能凭空推断`T`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T13:38:56.777

您的主要问题可能是您需要生成`join()`的`thread`（s）。如果线程对象在没有事先`join()`或`detach()`实现调用的情况下被破坏`std::terminate()`。

您不想要`detach()`，因为您需要知道所有部分排序都已完成才能完成整体排序，因此`join`ing 是正确的做法。

此外，还有一些您可以改进的地方：

*   您不应该`int`通过引用传递 s。对于简单的标量类型，按值传递更有效，并且从其他线程引用局部变量通常不是一个好主意（除非您有充分的理由和协议）
*   你启动了太多线程。分区后，两个子排序需要两个线程，但您有三个：当前线程也继续运行，因此您应该只创建一个新线程并在当前线程中执行另一个子排序。（`join()`完成后的另一部分。）
*   当分区变小时，您不应该继续创建新线程。为您的快速排序设置一个截止大小并为较小的大小使用非递归（如插入排序）通常是一个好主意，因为递归开销变得高于算法复杂性的好处。类似的截止对于并发排序更为重要：线程的开销比简单的递归调用高得多，并且对于小的（和附近的）分区，线程将开始频繁地访问相同的缓存行，从而减慢速度更。
*   无限制地创建线程通常不是一个好主意。这最终会遇到平台限制。您可能希望限制要使用的线程数（使用原子计数器）或使用类似`std::async`默认启动策略的东西，以避免启动超过平台可以处理的线程数。

# c++ - 在 C++ 中使用跳转表实现 switch 语句

> ID：15047932
> 
> 赞同：1
> 
> 时间：2013-02-24T02:08:59.300
> 
> 标签：c++, performance, switch-statement, memory-address

我正在尝试提高解析器的速度。而且`switch-case`，有时它很有用，但我发现它仍然很慢。不确定 - 如果 C++ 支持此功能（地址检查点（**带有附加参数**）），那就太好了！

简单的例子：

```
enum Transport //MOTORBIKE = 1, CAR = 2,  ...  SHIP = 10
Transport foo = //unknown

    switch(foo)
{
    case MOTORBIKE : /*do something*/ break;
    case CAR : /*do something*/ break;
    //////////////////////////
    case SHIP : /*do something*/ break;
} 
```

如果变量**`foo`**是**`SHIP`**，至少程序必须重新检查该值多达十次！-> 它仍然很慢。

**如果 C++ 支持检查点**：

```
Transport foo = //unknown
__checkpoint smart_switch;

goto (smart_switch + foo); //instant call!!!

smart_switch + MOTORBIKE : /*do something*/ goto __end;
smart_switch + CAR : /*do something*/ goto __end;
smart_switch + [...] : /*do something*/ goto __end;
////////////////////////////////////////////////////////////
smart_switch + SHIP : /*do something*/ goto __end;

__end : return 0; 
```

它不会生成任何跳转表，然后检查每个值。也许它不适用于`default`案例。唯一的问题是**`smart_switch + CAR`**->**`smart_switch + SHIP`**可能有不同的地址，因此如果 C++ 将它们评估为真实地址，则该过程将失败。因此，在编译编译器时，只需将它们转换为真实地址。

C++ 是否支持此功能？它是否大大提高了速度和性能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-24T02:41:59.413

您所说的称为跳表。跳转表通常是程序执行控制可以转移的相对地址数组。这是一个如何实现的示例：

```
#include <ctime>
#include <cstdlib>
#include <cstdio>

int main()
{
    static constexpr void* jump_table[] =
    {
        &&print_0, &&print_1, &&print_2,
        &&print_3, &&print_4, &&print_5
    };

    std::srand(std::time(nullptr));
    int v = std::rand();

    if (v < 0 || v > 5)
        goto out;

    goto *jump_table[v];

print_0:
    std::printf("zero\n");
    goto out;
print_1:
    std::printf("one\n");
    goto out;
print_2:
    std::printf("two\n");
    goto out;
print_3:
    std::printf("three\n");
    goto out;
print_4:
    std::printf("four\n");
    goto out;
print_5:
    std::printf("five\n");
    goto out;
out:
    return EXIT_SUCCESS;
} 
```

但是，我严重怀疑两件事。第一个疑问是使用跳转表会让你的程序更快。间接跳转相对昂贵，并且硬件预测不好。如果您只有三个值，那么您最好使用“if-then-else”语句简单地比较它们中的每一个。对于很多稀疏值（即 1、100、250、500 等），最好进行二分搜索而不是扩大表的大小。无论哪种情况，这只是 switch 语句的巨大冰山一角。因此，除非您了解所有细节并知道编译器在您的特定情况下做错了什么，否则甚至不要费心尝试将 switch 更改为其他东西 - 您永远不会比编译器更聪明，只会让您的程序变慢。

第二个疑问实际上是切换是解析器的瓶颈。很可能不是。因此，为了节省大量宝贵的时间，请先尝试分析您的代码，以确定程序中最慢的部分是什么。通常它按如下步骤进行：

1.  剖析并找到瓶颈。
2.  弄清楚为什么这是一个瓶颈，并想出一个合理的想法来提高代码的速度。
3.  尝试改进代码。
4.  转到第 1 步。

并且没有退出这个循环。优化是您可以花费一生去做的事情。在某些时候，您将不得不假设程序足够快并且没有瓶颈:)

此外，我还编写了一份更全面的分析，其中包含关于编译器如何实现 switch 语句以及何时以及何时不尝试超越它们的深入（或多或少）细节。[请在此处](http://lazarenko.me/switch/)找到该文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-24T02:16:08.850

是的，C/C++ 确实支持这个特性，而且它在……标准开关中。我不知道你从哪里得到 switch 会检查每个值的想法，但你错了。是的，我听说一些编译器可以为相当大的情况生成更好的代码（许多变体可能有数百个），但我不认为它是你的。例如以下由 gcc 编译的代码，没有任何优化：

```
enum E { One, Two, Three, Four, Five };

void func( E e )
{
    int res;
    switch( e ) {
        case One : res = 10; break;
        case Two : res = 20; break;
        case Three : res = 30; break;
        case Four : res = 40; break;
        case Five : res = 50; break;
    }
} 
```

生成以下内容：

```
_Z4func1E:
.LFB0:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset 6, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register 6
    movl    %edi, -20(%rbp)
    movl    -20(%rbp), %eax
    cmpl    $4, %eax
    ja  .L1
    movl    %eax, %eax
    movq    .L8(,%rax,8), %rax
    jmp *%rax
    .section    .rodata
    .align 8
    .align 4
.L8:
    .quad   .L3
    .quad   .L4
    .quad   .L5
    .quad   .L6
    .quad   .L7
    .text
.L3:
    movl    $10, -4(%rbp)
    jmp .L1
.L4:
    movl    $20, -4(%rbp)
    jmp .L1
.L5:
    movl    $30, -4(%rbp)
    jmp .L1
.L6:
    movl    $40, -4(%rbp)
    jmp .L1
.L7:
    movl    $50, -4(%rbp)
    nop
.L1:
    popq    %rbp
    .cfi_def_cfa 7, 8
    ret
    .cfi_endproc
.LFE0: 
```

如您所见，它只是跳到特定位置而不检查每个值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-24T02:11:49.813

您可以通过枚举构建一个带有函数指针和索引的数组

# python - 234树蟒

> ID：15047935
> 
> 赞同：1
> 
> 时间：2013-02-24T02:09:23.067
> 
> 标签：python, tree, insertion, 2-3-4-tree

我正在尝试在 python 中构建一个 2-3-4 树。到目前为止，插入似乎工作到高度为 3 左右的节点。在那之后，数据似乎被丢弃而不是被插入到树中。我不确定为什么会发生这种情况，并多次检查了我的代码。我已经在我得到插入算法的插入代码附近发表了评论。提前感谢您对我的问题的任何见解。

```
import re
class Node:
    def __init__(self, newInfo = None, p = None, q = None,
                 r = None, s = None, parent = None):
        #initilize parent / child links
        self.children = [p, q, r, s]
        self.parent = parent
        #initialize data 
        self.info = [ newInfo, None, None ]

class TwoThreeFourTree:
    def __init__(self):
        self.root = Node()

    # Built in sort sinks None types to front, which
    # is opposite of how info was structured to work,
    # Using this sort will push None values to back.
    def sortNode(self, curr):
        c = []
        for i in curr.info:
            if i is not None:
                c.append(i)
        c.sort()
        for i in range(3-len(c)):
            c.append(None)
        return c            

    # Built in len counts None, this one doesn't.
    def length(self, node):
        i = 0
        for info in node:
            if info is not None:
                i = i + 1
        return i

    def isLeaf(self, node):
        for child in node.children:
            if child is not None:
                return False
        return True

    def isOrphan(self, node):
        if node.parent is None:
            return True
        return False

    def lookup(self, userStr, reg):
        curr = self.root
        while curr is not None:
            #Two Node
            if self.length(curr.info) is 1:
                if re.match(reg, str(curr.info[0])) is not None:
                    return curr.info[0]
                else:
                    if userStr < curr.info[0]:
                        curr = curr.children[0]
                    else:
                        curr = curr.children[1]

            #Three Node
            elif self.length(curr.info) is 2:
                for item in curr.info:
                    if re.match(reg, str(item)) is not None:
                        return item
                if userStr < curr.info[0]:
                    curr = curr.children[0]
                elif userStr < curr.info[1]:
                    curr = curr.children[1]
                else:
                    curr = curr.children[2]

            #Four Node
            elif self.length(curr.info) is 3:
                for item in curr.info:
                    if item is not None:
                        if re.match(reg, str(item)) is not None:
                            return item
                if userStr < curr.info[0]:
                    curr = curr.children[0]
                elif userStr < curr.info[1]:
                    curr = curr.children[1]
                elif userStr < curr.info[2]:
                    curr = curr.children[2]
                else:
                    curr = curr.children[3]

    def inorder(self, node, retlst = None):
        if retlst is None:
            retlst = [] 
        if node.children[0]:
            retlst = self.inorder(node.children[0], retlst)
        retlst += [node.info[0]] 
        if node.children[1]:
            retlst = self.inorder(node.children[1], retlst)
        retlst += [node.info[1]]
        if node.children[2]:
            retlst = self.inorder(node.children[2], retlst)
        retlst += [node.info[2]]
        if node.children[3]:
            retlst = self.inorder(node.children[3], retst)
        return retlst

    ## Using Algorithm from: http://www.clear.rice.edu/comp212/01-fall/lectures/33/
    def insert(self, info, node):
        curr = node
        if self.length(curr.info) == 0: # curr is empty
            curr.info[0] = info
            return True

        elif self.length(curr.info) == 1: # curr is two node.
            if self.isLeaf(curr):
                curr.info[1] = info
                curr.info = self.sortNode(curr)
                return True
            else:
                if info < curr.info[0]:
                    self.insert(info, curr.children[0])
                else:
                    self.insert(info, curr.children[1])

        elif self.length(curr.info) == 2: # curr is 3 node
            if self.isLeaf(curr):
                curr.info[2] = info
                curr.info = self.sortNode(curr)
                return True
            else:
                if info < curr.info[0]:
                    self.insert(info, curr.children[0])
                elif info < curr.info[1]:
                    self.insert(info, curr.children[1])
                elif info > curr.info[2]:
                    self.insert(info, curr.children[2])

        elif self.length(curr.info) == 3: # curr is 4 node
            if self.isOrphan(curr): # curr has no parent
                curr = Node(curr.info[1],
                            Node(curr.info[0], curr.children[0], curr.children[1]),
                            Node(curr.info[2], curr.children[2], curr.children[3]))
                for child in curr.children:
                    if child is not None:
                        child.parent = curr
                self.root = curr
                self.insert(info, self.root)

            else:   #curr has a parent
                if self.length(curr.parent.info) == 1: # Parent is Two Node:
                    if curr.parent.children[0] == curr:# cur is lst.
                    #If P = [curr, M, p-rst], then P becomes [[lst, X, mlst], Y, [mrst, Z, rst], M, p-rst].
                        curr.parent.info[1] = curr.info[1]
                        curr.parent.info = self.sortNode(curr.parent)
                        curr.parent.children[2] = curr.parent.children[1]
                        curr.parent.children[1] = Node(curr.info[2], curr.children[2], curr.children[3], None, None, curr.parent)
                        curr.parent.children[0] = Node(curr.info[0], curr.children[0], curr.children[1], None, None, curr.parent)
                        self.insert(info, self.root)

                    elif curr.parent.children[1] == curr: # curr is rst.
                    #If P = [p-lst, M, curr], then P becomes [p-lst, M, [lst, X, mlst], Y, [mrst, Z, rst]].
                        curr.parent.info[1] = curr.info[1]
                        curr.parent.info = self.sortNode(curr.parent)
                        curr.parent.children[2] = Node(curr.info[2], curr.children[2], curr.children[3], None, None, curr.parent)
                        curr.parent.children[1] = Node(curr.info[0], curr.children[0], curr.children[1], None, None, curr.parent)
                        self.insert(info, self.root)

                elif self.length(curr.parent.info) == 2: # Parent is Three Node:

                    if curr.parent.children[0] == curr: # curr is lst
                    #If P = [curr, M1, p-mst, M2, p-rst], then P becomes [[lst, X, mlst], Y, [mrst, Z, rst], M1, p-mst, M2, p-rst].
                        curr.parent.info[2] = curr.info[1]
                        curr.parent.info = self.sortNode(curr.parent)
                        curr.parent.children[3] = curr.parent.children[2]
                        curr.parent.children[2] = curr.parent.children[1]
                        curr.parent.children[1] = Node(curr.info[2], curr.children[2], curr.children[3], None, None, curr.parent)
                        curr.parent.children[0] = Node(curr.info[0], curr.children[0], curr.children[1], None, None, curr.parent)
                        self.insert(info, self.root)

                    elif curr.parent.children[1] == curr: # curr is mst
                    #If P = [p-lst, M1, curr, M2, p-rst], then P becomes [p-lst, M1,[lst, X, mlst], Y, [mrst, Z, rst], M2, p-rst].
                        curr.parent.info[2] = curr.info[1]
                        curr.parent.info = self.sortNode(curr.parent)
                        curr.parent.children[3] = curr.parent.children[2]
                        curr.parent.children[2] = Node(curr.info[2], curr.children[2], curr.children[3], None, None, curr.parent)
                        curr.parent.children[1] = Node(curr.info[0], curr.children[0], curr.children[1], None, None, curr.parent)
                        self.insert(info, self.root)

                    elif curr.parent.children[2] == curr: # curr is rst
                    #If P = [p-lst, M1, p-mst, M2, curr], then P becomes [p-lst, M1, p-mst, M2, [lst, X, mlst], Y, [mrst, Z, rst]].
                        curr.parent.info[2] = curr.info[1]
                        curr.parent.info = self.sortNode(curr.parent)
                        curr.parent.children[3] = Node(curr.info[2], curr.children[2], curr.children[3], None, None, curr.parent)
                        curr.parent.children[2] = Node(curr.info[0], curr.children[0], curr.children[1], None, None, curr.parent)
                        self.insert(info, self.root) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:26:53.637

作为部分答案，您可以从消除代码中的大部分重复开始。例如，您不需要`lookup()`针对三种不同的节点类型对函数进行特殊处理。你可以改为这样写：

```
def lookup(self, s, r, node=None):
    if not node: node = self.root
    for item in node.info:
        if re.match(r, str(item)):
            return item
    for (i, item) in enumerate(curr.info):
        if s < item:
            return self.lookup(s, r, curr.children[i])
    return self.lookup(s, r, curr.children[-1]) # Assume len(children) == len(info) + 1 
```

此外，遍历应该实现为生成器，并且再次使用循环而不是重复代码：

```
def inorder(self, node):
    for (i, item) in enumerate(node.info):
        if node.children[i]: self.inorder(node.children[i])
        yield item
    if node.children[-1]: self.inorder(node.children[-1]) 
```

这种清理首先会让其他人更容易诊断问题。其次，您可能会发现问题在此过程中消失了。

# php - 带有自动生成的列的插入语句

> ID：15047939
> 
> 赞同：1
> 
> 时间：2013-02-24T02:10:02.297
> 
> 标签：php, dynamic, insert

我想使用我的表的列和除 id、created_by .etc 之外的内容的 NULL 或空白值创建一个 INSERT 语句。我试图避免重复。现在我得到：

```
INSERT INTO testimonials (id, created, created_by, id, quote, name, position, company, published, created, created_by, last_modified_by, last_modified) VALUES ('257927816', NOW(), '1', '') 
```

并且我希望在 VALUES 部分中为除我定义的前 3 个之外的所有内容迭代空白值。

```
function insertBlankWithID($table, $postFxn) {
    global $randomID;
    $id = $randomID;
    $resultInsert = mysql_query("SELECT * FROM " . $table);
    if (!$resultInsert) {
        echo '<div class="ec-messages messages-error">'.QUERY_ERROR.'</div>';
        include($cmsdir . FOOTER_EXIT);
        exit();
    }
    $columns = array();
    while ($row = mysql_fetch_assoc($resultInsert)) {
        if (empty($columns)) {
            $columns = array_keys($row);
        }
    }
    //$sql = 'INSERT INTO `testimonials` (`id`, `quote`, `name`, `position`, `company`, `published`, `created`, `created_by`, `last_modified_by`, `last_modified`) VALUES ('.$id.', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);';
    $sql = sprintf("INSERT INTO %s (id, created, created_by, %s) VALUES ('".$id."', NOW(), '".$_SESSION['user_id']."', '%s')", $table, implode(', ', $columns), implode("',  '", ''));
    mysql_query($sql);
    /*
    if (!$sql) {
        echo '<div class="ec-messages messages-error">'.QUERY_ERROR.'</div>';
        exit();
    }
    */
    echo $sql;
}
// redirect(basename($_SERVER['PHP_SELF'], ".php").'?s=output&id='.$id

insertBlankWithID('testimonials', $postFxn); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T03:18:50.247

查看您的代码，您应该将 限制`select`为 1，（即`$resultInsert = mysql_query("SELECT * FROM " . $table. " limit 1");`您不需要信息，只需要键。这消除了`while`循环的需要。

现在，要获取除前三个之外的所有键，对于您的`$columns`变量，请使用[array_slice](http://www.php.net/manual/en/function.array-slice.php)例如`$columns = array_slice($columns, 3);` 或者，如果它不是前三个时`select *`，您可以这样做`$columns = array_diff($columns, array('id', 'created', 'created_by') );`

现在，要`null`在前三个之后插入，您将插入一个字符串 - 这不起作用，相反，您可以创建一个与新的计数匹配的空值数组，`$columns`例如：

```
$blanks = array_fill(0, count($columns), 'null'); 
```

并在创建您的声明时， do `implode(", ", $blanks)`，这将使您`$sql`看起来像：

```
$sql = sprintf("INSERT INTO %s (id, created, created_by, %s) VALUES ('".$id."', NOW(), '".$_SESSION['user_id']."', '%s')", $table, implode(', ', $columns), implode(", ", $blanks)); 
```

这应该可以解决您所描述的问题。

另外，当我在这里时，应该注意的是，您不应再使用`mysql_`函数，而应转而使用`mysqli_`相同类型的面向过程的 MySQL 访问。

# java - 通过随机选择表执行 SELECT sql

> ID：15047943
> 
> 赞同：1
> 
> 时间：2013-02-24T02:10:32.713
> 
> 标签：java, database, multithreading, random, executorservice

我正在做一个项目，其中我在不同的数据库中有两个具有不同模式的表。所以这意味着我有两个不同的连接参数让这两个表使用 JDBC-

让我们假设下面是`config.property`文件 -

```
TABLES: table1 table2

#For Table1
table1.url: jdbc:mysql://localhost:3306/garden
table1.user: gardener
table1.password: shavel
table1.driver: jdbc-driver
table1.percentage: 80

#For Table2
table2.url: jdbc:mysql://otherhost:3306/forest
table2.user: forester
table2.password: axe
table2.driver: jdbc-driver
table2.percentage: 20 
```

下面的方法将阅读上述内容`config.property file`并`ReadTableConnectionInfo object`为每个表格制作一个。

```
private static HashMap<String, ReadTableConnectionInfo> tableList = new HashMap<String, ReadTableConnectionInfo>();

private static void readPropertyFile() throws IOException {

    prop.load(Read.class.getClassLoader().getResourceAsStream("config.properties"));

    tableNames = Arrays.asList(prop.getProperty("TABLES").split(" "));

    for (String arg : tableNames) {

        ReadTableConnectionInfo ci = new ReadTableConnectionInfo();

        String url = prop.getProperty(arg + ".url");
        String user = prop.getProperty(arg + ".user");
        String password = prop.getProperty(arg + ".password");
        String driver = prop.getProperty(arg + ".driver");
        double percentage = Double.parseDouble(prop.getProperty(arg + ".percentage"));

        ci.setUrl(url);
        ci.setUser(user);
        ci.setPassword(password);
        ci.setDriver(driver);
        ci.setPercentage(percentage);

        tableList.put(arg, ci);
    }

} 
```

下面的`ReadTableConnectionInfo`类将保存特定表的所有表连接信息。

```
public class ReadTableConnectionInfo {

    public String url;
    public String user;
    public String password;
    public String driver;
    public String percentage;

    public String getUrl() {
        return url;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public String getUser() {
        return user;
    }

    public void setUser(String user) {
        this.user = user;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getDriver() {
        return driver;
    }

    public void setDriver(String driver) {
        this.driver = driver;
    }

    public double getPercentage() {
        return percentage;
    }

    public void setPercentage(double percentage) {
        this.percentage = percentage;
    }
} 
```

现在我正在为指定数量的线程创建 ExecutorService 并将其传递给类`tableList object`的构造函数-`ReadTask`

```
 // create thread pool with given size
        ExecutorService service = Executors.newFixedThreadPool(10);

        for (int i = 0; i < 10; i++) {
            service.submit(new ReadTask(tableList));
        } 
```

下面是我`ReadTask`的实现`Runnable interface`，其中每个线程都应该为每个表建立连接。

```
class ReadTask implements Runnable {

    private final HashMap<String, XMPReadTableConnectionInfo> tableLists;

public ReadTask(HashMap<String, ReadTableConnectionInfo> tableList) {
    this.tableLists = tableList;
}

@Override
public void run() {

    int j = 0;
    dbConnection = new Connection[tableLists.size()];
    statement = new Statement[tableLists.size()];

    //loop around the map values and make the connection list
    for (ReadTableConnectionInfo ci : tableLists.values()) {

        dbConnection[j] = getDBConnection(ci.getUrl(), ci.getUser(), ci.getPassword(), ci.getDriver());
        statement[j] = dbConnection[j].createStatement();

        j++;
    }

    while (System.currentTimeMillis() <= 60 minutes) {

    /* Generate random number and check to see whether that random number
     * falls between 1 and 80, if yes, then choose table1
     * and then use table1 connection and statement that I made above and do a SELECT * on that table.
     * If that random numbers falls between 81 and 100 then choose table2 
     * and then use table2 connection and statement and do a SELECT * on that table
     */

    ResultSet rs = statement[what_table_statement].executeQuery(selectTableSQL);

    }
     }
} 
```

目前我有两个表，这意味着每个线程将为每个表建立两个连接，然后根据随机生成数使用该特定表连接在该表上执行 SELECT *。

**算法：-**

1.  生成 1 到 100 之间的随机数。
2.  如果该随机数小于`table1.getPercentage()`然后选择`table1` 然后用于对该数据库`table1 statement object`进行创建。`SELECT sql call`
3.  否则选择`table2`然后使用该数据库`table2 statement object`创建一个。`SELECT sql call`

**我的问题-**

我很难弄清楚应该如何应用上述算法以及我应该如何比较`random number`每个`tables percentage`表，然后决定我需要使用哪个表，然后确定我需要使用哪个表`table connection and statements`来制作`SELECT sql call`.

所以这意味着我需要检查`getPercentage()`每个表的方法，并将它们与随机数进行比较。

现在我只有两个表，将来我可以有三个表，百分比分布可能是`80 10 10`.

**更新：-**

```
class ReadTask implements Runnable {

    private Connection[] dbConnection = null;
    private ConcurrentHashMap<ReadTableConnectionInfo, Connection> tableStatement = new ConcurrentHashMap<ReadTableConnectionInfo, Connection>();

    public ReadTask(LinkedHashMap<String, XMPReadTableConnectionInfo> tableList) {
        this.tableLists = tableList;
    }

    @Override
    public run() {

    int j = 0;
    dbConnection = new Connection[tableLists.size()];

    //loop around the map values and make the connection list
    for (ReadTableConnectionInfo ci : tableLists.values()) {

    dbConnection[j] = getDBConnection(ci.getUrl(), ci.getUser(), ci.getPassword(), ci.getDriver());
    tableStatement.putIfAbsent(ci, dbConnection[j]);

    j++;
    }

      Random random = new SecureRandom();

      while ( < 60 minutes) {

        double randomNumber = random.nextDouble() * 100.0;
        ReadTableConnectionInfo table = selectRandomConnection(randomNumber);

        for (Map.Entry<ReadTableConnectionInfo, Connection> entry : tableStatement.entrySet()) {

            if (entry.getKey().getTableName().equals(table.getTableName())) {

                final String id = generateRandomId(random);
                final String selectSql = generateRandomSQL(table);

                preparedStatement = entry.getValue().prepareCall(selectSql);
                preparedStatement.setString(1, id);

                rs = preparedStatement.executeQuery();
            }
        }
      }
    }

        private String generateRandomSQL(ReadTableConnectionInfo table) {

        int rNumber = random.nextInt(table.getColumns().size());

        List<String> shuffledColumns = new ArrayList<String>(table.getColumns());
        Collections.shuffle(shuffledColumns);

        String columnsList = "";

        for (int i = 0; i < rNumber; i++) {
            columnsList += ("," + shuffledColumns.get(i));
        }

        final String sql = "SELECT ID" + columnsList + "  from "
                + table.getTableName() + " where id = ?";

        return sql;
    }

    private ReadTableConnectionInfo selectRandomConnection(double randomNumber) {

        double limit = 0;
        for (ReadTableConnectionInfo ci : tableLists.values()) {
            limit += ci.getPercentage();
            if (random.nextDouble() < limit) {
                return ci;
            }
            throw new IllegalStateException();
        }
        return null;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T04:40:05.297

您可以将其视为可用连接的循环，如下所示：

```
public run() {
  ...
  Random random = new SecureRandom();

  while ( < 60 minutes) {
    double randomNumber = random.nextDouble() * 100.0;
    ReadTableConnectionInfo tableInfo = selectRandomConnection(randomNumber);

    // do query...
  }
}

private ReadTableConnectionInfo selectRandomConnection(double randomNumber) {
  double limit = 0;
  for (ReadTableConnectionInfo ci : tableLists.values()) {
    limit += ci.getPercentage();
    if (randomNumber < limit) {
      return ci;
  }
  throw new IllegalStateException();
} 
```

只要 randomNumber 的最大值小于 sum(percentage)，就可以完成这项工作。

我想到的另一件事：如果您最终要获得这么多可能的查询，以至于循环查找成为问题，您可以构建一个查找表：创建一个数组，使数组的总大小包含足够的条目以便查询的相对权重可以用整数表示。

对于三个查询的示例，80:10:10，有一个 10 条目数组，`ReadTableConnectionInfo`其中八个引用指向 table1，一个指向 table2，一个指向 table3。然后简单地将您的随机数缩放为`0 <= rand < 10`（例如 `(int)(Math.random() * 10)`，并使用它来索引到您的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T03:57:31.443

无论您有多少表，它们的百分比加起来总是 100。概念化您将如何选择的最简单方法是将每个表视为代表一个百分比范围。

例如，对于具有您提到的百分比（80%、10%、10%）的三个表，您可以将它们概念化为：

从到的随机数 == 表 == 0.0000 0.8000 表_1 0.8000 0.9000 表_2 0.9000 1.0000 表_3

因此，生成一个介于 0.0000 和 1.0000 之间的 Random #，然后查看有序列表并查看适合的范围，以及使用哪个表。

（顺便说一句：我不确定为什么每个表都有*两个*连接。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T05:03:10.783

您可以构建一个查找表，其中包含表名及其权重：

```
class LookupTable {
    private int[]    weights;
    private String[] tables;
    private int      size = 0;

    public LookupTable(int n) {
        this.weights = new int[n];
        this.tables = new String[n];
    }

    public void addTable(String tableName, int r) {
        this.weights[size] = r;
        this.tables[size] = tableName;
        size++;
    }

    public String lookupTable(int n) {
        for (int i = 0; i < this.size; i++) {
            if (this.weights[i] >= n) {
                return this.tables[i];
            }
        }
        return null;
    }
} 
```

初始化表的代码：

```
 LookupTable tr = new LookupTable(3);
    // make sure adds the range from lower to upper!
    tr.addTable("table1", 20);
    tr.addTable("table2", 80);
    tr.addTable("table3", 100); 
```

测试代码：

```
 Random r = new Random(System.currentTimeMillis());
    for (int i = 0; i < 10; i++) {
        // r.nextInt(101) + 1 would return a number of range [1~100]. 
        int n = r.nextInt(101) + 1;
        String tableName = tr.lookupTable(n);
        System.out.println(n + ":" + tableName);
    } 
```

# left-join - 左连接失败，on 子句中有 Unknown 列

> ID：15047949
> 
> 赞同：0
> 
> 时间：2013-02-24T02:10:54.097
> 
> 标签：left-join

我有两个针对同一个表运行的查询，除了第二个因添加左连接而失败。

成功运行

```
 SELECT *
 FROM paypal_ipn_orders 
 LEFT join itemkey on paypal_ipn_orders.item_number = itemkey.item_id 
 WHERE packing_slip_printed = 0
 AND LOWER(payment_status) = 'completed'
 AND address_name <> ''
 order by itemkey.sort_id; 
```

然而，第二个查询因“'on 子句'中的“未知列'paypal_ipn_orders.item_number'”而失败，但它在没有左连接的情况下运行良好。Paypal_ipn_orders 表确实包含 item_number 字段。

```
SELECT *
FROM paypal_ipn_orders as table1,
(SELECT payer_email, COUNT(*) as count FROM paypal_ipn_orders GROUP BY payer_email ORDER BY count DESC) as table2
LEFT join itemkey on table1.item_number = itemkey.item_id 
WHERE table1.payer_email = table2.payer_email 
and packing_slip_printed = 0
AND LOWER(payment_status) = 'completed'
AND address_name <> ''
ORDER BY count DESC, auction_multi_item, item_number; 
```

table1 后面的逗号是必需的，因为 (SELECT... 是 FROM 子句的一部分。

一个有趣的笔记。我将 From 子句的顺序更改为：

```
SELECT *
FROM (SELECT payer_email, COUNT(*) as count FROM paypal_ipn_orders GROUP BY payer_email ORDER BY count DESC) as table1,
paypal_ipn_orders as table12
LEFT join itemkey on table2.item_number = itemkey.item_id 
WHERE table2.payer_email = table1.payer_email 
and packing_slip_printed = 0
AND LOWER(payment_status) = 'completed'
AND address_name <> ''
ORDER BY count DESC, auction_multi_item, item_number; 
```

现在错误消息是：'where 子句'中的未知列'table2.payer_email'。但这不会在没有左连接的情况下运行。在 where 子句消息中给出相同的 Unknown 列。

仅供参考 - 这有效：

```
 SELECT payer_email, COUNT(*) as count 
 FROM paypal_ipn_orders 
 WHERE packing_slip_printed = 0
 AND LOWER(payment_status) = 'completed'
 AND address_name <> ''
 GROUP BY payer_email 
 ORDER BY count DESC; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:27:25.830

```
FROM paypal_ipn_orders table1, 
```

你的意思是…… `FROM paypal_ipn_orders AS table1 (...`？

还要注意 . 末尾的逗号`table1,`。我不确定这是不是故意的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T00:27:32.500

这最终奏效了：

```
SELECT *
        FROM (SELECT payer_email, COUNT(*) as count 
           FROM paypal_ipn_orders 
           Where packing_slip_printed = 0
           AND LOWER(payment_status) = 'completed'
           AND address_name <> '' 
           GROUP BY payer_email 
           ORDER BY count DESC) as table1,
        paypal_ipn_orders as table2
        LEFT join itemkey on table2.item_number = itemkey.item_id 
        WHERE table1.payer_email = table2.payer_email 
        and packing_slip_printed = 0
        AND LOWER(payment_status) = 'completed'
        AND address_name <> ''
        ORDER BY count DESC, auction_multi_item, sort_id 
```

# ruby-on-rails - 使用 curl 在 Rails 中获取受保护的资产

> ID：15047951
> 
> 赞同：1
> 
> 时间：2013-02-24T02:11:27.160
> 
> 标签：ruby-on-rails, database, curl

我想在我的 rails 应用程序中访问以下资产：

```
/users/1/posts/1.json 
```

这将是用户帖子的 json 输出，只是一个字符串。

但是要访问资产，用户必须登录。当前会话控制器采用 params[:email] 和 params[:password]，控制器通过电子邮件搜索用户模型，然后分配一个会话变量来登录用户.

我尝试了 curl -d 或 curl--data 提供电子邮件的变体，最有希望的似乎是：

```
curl -d 'email[content]=email' -d 'password[content]=password'  /session/create 
```

然而 curl 命令的输出给出：

```
SQLException: no such column: email.content: 
```

我怎样才能塑造我的 curl 命令来访问这个资产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:38:09.853

```
curl -d 'user[email]=email' -d 'user[password]=password' /session/create 
```

Rails 表单的发布变量总是`model[column]`

如果您想保持登录状态，则必须使用 curl 的 cookie jar 将会话 ID 保存在请求之间。只需添加带有文件路径的 --cookie-jar 选项。

```
curl -d 'user[email]=email' -d 'user[password]=password' --cookie-jar /tmp/cookiejar /session/create
curl --cookie-jar /tmp/cookiejar /users/1/posts/1.json 
```

# javascript - 如何使用列表为 jQuery 中的每个单击事件获得不同的结果？

> ID：15047953
> 
> 赞同：0
> 
> 时间：2013-02-24T02:11:40.640
> 
> 标签：javascript, jquery, list, for-loop, iteration

我对 javascript***非常***陌生，我只是无法理解循环和变量列表。似乎每个教程都解释了一半，然后在剩下的路上漫无目的/胡言乱语，并没有真正说清楚。

所以，我决定`div`每次点击时都制作一种不同的颜色，它会遍历四种颜色。

**HTML：**

```
<div class="myDiv"></div> 
```

**CSS：**

```
.myDiv {
    display: block;
    height: 100px;
    width: 150px;
    background: #ea5243;
} 
```

**JavaScript（使用 jQuery）：**

```
$(document).ready(function() {
     var colors = ["#b8d30b", "#0099cc", "#e63f35", "#fbd108"];
     for(var i in colors) {
         $(".myDiv").on("click", function() {
             $(this).css("background", colors);
         });
     }
}); 
```

显然这是行不通的，但正如你所见，我想通过每次点击旋转每个颜色代码。

我试过用谷歌搜索我的问题，但发现很难分阶段，因此无济于事。正如我所说，我对 javascript 很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:18:30.953

您可以不断移动和推送颜色数组中的值。这比 for 循环要高级一些，但学习它也很好。您甚至不必担心颜色的长度。

```
var colors = ["#b8d30b", "#0099cc", "#e63f35", "#fbd108"];
$(".myDiv").on('click', function () {
    //removes the zeroth element from the array
    var color = colors.shift();

    $(this).css('background-color', color);

    //puts the "pushed" element at the end of the array
    colors.push(color);
}); 
```

[http://jsfiddle.net/ExplosionPIlls/F79jd/](http://jsfiddle.net/ExplosionPIlls/F79jd/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-24T02:18:19.140

[http://jsfiddle.net/ttgTj/4](http://jsfiddle.net/ttgTj/4)

```
var colors = ["#b8d30b", "#0099cc", "#e63f35", "#fbd108"];
var i = 0;
$(".myDiv").on("click", function () {
    $(this).css("background", colors[i]);
    i = (++i >= colors.length)? 0: i;
}); 
```

# php - 使用特定关键字和网址的谷歌搜索结果填充 html/php 页面？

> ID：15047954
> 
> 赞同：1
> 
> 时间：2013-02-24T02:11:42.997
> 
> 标签：php, html, search, web-crawler

我需要弄清楚如何（如果可能的话）使用以下信息填充 html/php 页面：

我有一个页面的 url 和一组关键字，我想每周检查一下 google 搜索结果中的哪个位置是那个 url，如果搜索是针对与之关联的那组关键字进行的。

假设它在谷歌的第二页上，它的位置将是 18 等。（从第一页的第一个结果开始计数）。

然后我有一个带有表结构的 html/php 页面，其中有一列带有 url，另一列带有与这些 url 关联的关键字。应该还有两列包含谷歌搜索中的位置信息和检查该位置的日期（因此这两列应该由检查位置的脚本填充）。

老实说，我不知道如何实现这一目标，也不知道是否可能。请提出想法，代码片段，也许是一些做这种事情的服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T02:18:33.373

要抓取 Google 的结果页面，请查看[此处](http://kbeezie.com/scraping-google-results/)。

但请注意，Google 以前的 SOAP API 已不复存在。我想知道，抓取 Google 的页面是合法的。请参阅此[Google 博客页面](http://googleajaxsearchapi.blogspot.de/2009/03/google-code-labs-and-soap-search-api.html)和[Google 的使用条款](http://code.google.com/apis/ajaxsearch/terms.html)。

谷歌写道：

```
Automated searching is strictly prohibited, as is permanently storing any search results. Please refer to the Terms of Use for more detail. 
```

# c - l 需要作为赋值的左操作数的值

> ID：15047961
> 
> 赞同：1
> 
> 时间：2013-02-24T02:12:30.797
> 
> 标签：c

我正在尝试使用相同的随机选择的整数填充几个数组，但我不断在主题行中收到错误。这是我的代码：

```
while(i++ < arraySize){
        randInt = (int)random()%100;
        originalArray++ = randInt;
        ascendingOrderArray++ = randInt;
        descendingOrderArray++ = randInt;
    } 
```

为什么在这种情况下会发生此错误？据我了解，此代码与将 randInt 分配给三个数组然后在代码末尾递增它们的指针相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:16:12.090

假设`originalArray`,`ascendingOrderArray`和`descendingOrderArray`是类型`int *`和`randInt`类型`int`的指针，您必须在分配时取消引用指针。例如`*originalArray++ = randInt;`. 这将取消引用产生您可以分配的“左值”的指针，将其值分配`randInt`给它（当`originalArray`指针指向时），然后增加指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T02:16:41.963

在这里，您尝试将值分配给一个数字 - 一个数组的地址。一个数字是一个右值，而不是一个左值，所以它失败了。

```
originalArray++ = randInt; 
```

在这里，您正在为内存位置分配一个值——通过取消引用指针获得的地址。这是一个左值，所以它成功了：

```
*originalArray++ = randInt; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T02:16:36.790

original++ 不是对象，因此您不能在其中存储值。

# c# - 手动设置 AlternateItemTemplate

> ID：15047970
> 
> 赞同：1
> 
> 时间：2013-02-24T02:13:34.150
> 
> 标签：c#, asp.net, asprepeater

有没有办法手动设置 AlternateItemTemplate？我不止一次被这个问题困扰。

我只想将它用于最后一项。也许`ItemDataBound`事件可以成为一个解决方案，但我想不通。

我发现的唯一有用的问题：

*   [是否有与 AlternateItemTemplate 类似的方法来执行此操作](https://stackoverflow.com/questions/7611767/is-there-a-similar-way-to-alternateitemtemplate-to-do-this)
*   [如何从中继器控件中获取最后一个记录值。？](https://stackoverflow.com/questions/7371680/how-can-i-get-last-record-value-from-repeater-control)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T10:01:14.660

这`ItemDataBound`确实是一个可能的选项，但要使其工作，您需要转发器项目的总数，以便您可以识别最后一个项目：

```
protected void rptDummy_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    int itemsCount = ((List<SomeClass>)rptDummy.DataSource).Count;

    if (e.Item.ItemType == ListItemType.Item)
    { 
        if(e.Item.ItemIndex == itemsCount - 1)
        {
            //Do Things here
        }
    }
} 
```

你甚至可以在同一个模板中有两个占位符，一个专门用于最后一项：

```
<ItemTemplate>
    <asp:PlaceHolder id="phIsNotLastOne" runat="server">Is not last</asp:PlaceHolder>
    <asp:PlaceHolder id="phIsLastOne" runat="server">Is last</asp:PlaceHolder>
</ItemTemplate> 
```

然后你可以做这样的事情：

```
protected void rptDummy_OnItemDataBound(object sender, RepeaterItemEventArgs e)
{
    long itemsCount = ((List<SomeClass>)rptDummy.DataSource).Count;

    if (e.Item.ItemType == ListItemType.Item)
    { 
        PlaceHolder phIsLastOne = (PlaceHolder)e.Item.FindControl("phIsLastOne");
        PlaceHolder phIsNotLastOne = (PlaceHolder)e.Item.FindControl("phIsNotLastOne");
        phIsLastOne.Visible = e.Item.ItemIndex == itemsCount - 1;
        phIsNotLastOne.Visible = !this.phIsLastOne.Visible;
    }
} 
```

# google-chrome-extension - chrome 扩展 chritter 示例 xpath

> ID：15047972
> 
> 赞同：1
> 
> 时间：2013-02-24T02:13:54.243
> 
> 标签：google-chrome-extension

我对这个例子没有任何运气。

[https://sites.google.com/site/gdevelopercodelabs/chrome-extensions/codelab](https://sites.google.com/site/gdevelopercodelabs/chrome-extensions/codelab)

我收到错误：“未捕获的 ReferenceError：未定义 xpath”。

我很抱歉开始这样一个新手。清单 2 中是否允许使用 xpath？

我真的希望谷歌能够更新其所有代码示例、教程和视频以使用最新的 Manifest 版本。

# google-calendar-api - url导入后的谷歌日历只显示最后一个事件

> ID：15047977
> 
> 赞同：0
> 
> 时间：2013-02-24T02:14:33.877
> 
> 标签：google-calendar-api, icalendar, rfc2445, rfc5545

我正在尝试制作一个 .ics 文件并通过 URL 导入将事件放入谷歌日历。但问题是，在我将它们导入谷歌日历后，它只显示最后一个事件。我不明白我做错了什么我什至从 GC 导出了一个日历并尝试生成我的日历以看起来与导出的日历完全相同。

这是 .ics 文件的 URL： [http ://bme.hracsi.net/includes/download.php?sub=2,3,4&sem=2](http://bme.hracsi.net/includes/download.php?sub=2,3,4&sem=2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T06:31:44.930

您的所有事件都具有相同的 UID RFC5545 §3.8.4.7 指定“UID”本身必须是全局唯一标识符。

要使其工作，您必须更改此属性值。

```
BEGIN:VCALENDAR
...
BEGIN:VEVENT
...
UID:d41d8cd98f00b204e9800998ecf8427e
END:VEVENT
BEGIN:VEVENT
...
UID:d41d8cd98f00b204e9800998ecf8427e
UID:d41d8cd98f00b204e9800998ecf8427e
...
UID:d41d8cd98f00b204e9800998ecf8427e
UID:d41d8cd98f00b204e9800998ecf8427e
END:VEVENT
END:VCALENDAR 
```

# c++ - 引用数组

> ID：15047979
> 
> 赞同：3
> 
> 时间：2013-02-24T02:14:55.670
> 
> 标签：c++, arrays, reference

这对你来说可能很容易，但我还不是很喜欢参考。我不明白为什么这不起作用。请告诉我正确的风格。

```
template <typename T>
void shuffle(T (&array)[], size_t len){}; 
```

我试着这样称呼它：

```
uint_fast8_t dirBag[4]
Random::shuffle(dirBag, sizeof(dirBag)/sizeof(decltype(dirBag[0]))); 
```

错误是：

```
Error   1   error C2784: 'void Random::shuffle(T (&)[],size_t)' : could not deduce template argument for 'T (&)[]' from 'uint_fast8_t [4]' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-24T02:20:31.983

尝试：

```
template <typename T, size_t N>
void shuffle(T (&array)[N])
{
}; 
```

此外，在函数体中，您拥有数组的大小：**`N`**。如果您必须将大小作为参数传递，我当然认为可以，但参数将是独立的。

* * *

站点注释：从您的函数名称来看，您可能还会对此感兴趣：

```
uint_fast8_t dirBag[4];

// ...populate your array...

std::random_shuffle(std::begin(dirBag), std::end(dirBag)); 
```

# c++ - 为什么我的字符数组在用字符串文字初始化后不能分配字符？

> ID：15047981
> 
> 赞同：2
> 
> 时间：2013-02-24T02:15:15.097
> 
> 标签：c++, arrays

这是代码，当我使用 CodeBlocks10.05 运行此代码时，使用没有标志的 GNU GCC 编译，我没有得到我希望的结果。我希望如果数组中的所有字符`'z'`不是由初始字符串文字中的一个字符或空终止符设置的，那么它会被更改为 a。

```
#include <iostream>
#include <string>
#include <stdlib.h>
#include <cstring>

using namespace std;

int main(void)
{
    char stringVar[10] = "Hello";
    //char stringVar[10] = {'H', 'e', 'l', 'l', 'o', '\0'};
    //char stringVar[10] = {'H', 'e', 'l', 'l', 'o'};
    //char stringVar[10] = {};

   for(int i = 0; i < 10; i++)
   {
       if(stringVar[i] != 'H' and
           stringVar[i] != 'e' and
           stringVar[i] != 'l' and
           stringVar[i] != 'o' and
           stringVar[i] != '\0')
       {
            stringVar[i] = 'z';
       }
   }

   for(int i = 0; i < 10; i++)
   {
       cout << (int)stringVar[i] << "\t" << (char)stringVar[i] << endl;
   }
   return 0;
} 
```

这是我的输出：

```
72      H
101     e
108     l
108     l
111     o
0
0
0
0
0 
```

这是我的预期：

```
72      H
101     e
108     l
108     l
111     o
0
122     z
122     z
122     z
122     z 
```

那么我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:20:09.403

```
char stringVar[10] = "Hello"; 
```

将前 5 初始化为`Hello`rest to `\0`，因此您的 if 条件将为 false

```
if(stringVar[i] != 'H' and
   stringVar[i] != 'e' and
   stringVar[i] != 'l' and
   stringVar[i] != 'o' and
   stringVar[i] != '\0') <<------ this condition will always return false, so you can't modify `stringVar` 
```

# mysql - 是否可以在 SQL 查询中将多行的结果压缩为一行上的集合对象？

> ID：15047996
> 
> 赞同：2
> 
> 时间：2013-02-24T02:17:38.833
> 
> 标签：mysql, sql, pdo

我正在重构一些代码，并寻找尝试提高可读性和性能的方法。

困扰我的一个项目是我需要一个在一侧有多个对象的连接语句的情况。例如...

```
Foo Schema         Bar 2 Schema
--------------     ---------------
id                 id
data               fooId
                   data

Result from Search:
---------------------
id   barId    fooData
1    1        ...
1    2        ...
1    3        ...
2    4        ...
3    5        ... 
```

我的最终结果，在查询对象 Foo 时，需要是一个包含相关 id（或基于 id 获取的对象）的对象 Foo。

目前，我最终不得不在 PHP 级别压缩多行，将 bar id 添加到 Foo 直到 foo id 更改。这有点难看，但它确实有效。我想减少我的结果集是：

```
Result from Search:
---------------------
id   barIds   fooData
1    [1,2,3]  ...
2    4        ...
3    5        ... 
```

有没有办法在 SQL 级别做到这一点？（请注意，我不是在寻找文字字符串 1、2、3，我想要一个由 id 的 1、2 和 3 组成的数组——但如果我必须取一个字符串然后转换，我可以做）

顺便说一句，我的意图是将它与 PDO::fetch_class 结合起来，让我在一行中实例化类，而不是花时间编写多行千篇一律的代码来加载类的属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T02:23:00.093

听起来您正在考虑使用`GROUP_CONCAT`. 这会将所有酒吧 ID 组合在一起。像这样的东西：

```
SELECT F.Id, GROUP_CONCAT(B.Id) BarIds, F.data
FROM Foo F 
   INNER JOIN Bar B ON F.Id = B.FooId
GROUP BY F.Id 
```

如果您想获得确切的格式，请尝试使用`CONCAT`：

```
CONCAT('[',GROUP_CONCAT(B.Id),']') BarIds 
```

这是一个[SQL Fiddle 演示](http://sqlfiddle.com/#!2/b7669/2)。

**- 编辑 -**

如果担心 GROUP_CONCAT 默认存储的字符长度（请查看此[链接](https://stackoverflow.com/a/5445135/1073631)），另一种替代方法是通过执行以下操作来模仿 GROUP_CONCAT 的行为：

```
SELECT Id, BarIds, Data
FROM (
    SELECT F.Id,  
      MAX(@barIdsCombined:=IF(@prevFoodId=F.Id,
                          CONCAT(@barIdsCombined,',',B.Id),
                         B.Id)) BarIds, 
      F.data,
      @prevFoodId:=F.Id
    FROM Foo F 
       INNER JOIN Bar B ON F.Id = B.FooId
        JOIN (SELECT @barIdsCombined:='') t
    GROUP BY F.Id
  ) t 
```

# header - EclEmma - 类标题没有得到覆盖

> ID：15047998
> 
> 赞同：3
> 
> 时间：2013-02-24T02:17:55.597
> 
> 标签：header, code-coverage, eclemma

我是第一次使用 EclEmma，我注意到我的主类的标题从未得到覆盖。main 方法中的所有内容都是绿色的，但标题本身“public class Main”始终是红色的。

为了找到问题的根源，我创建了一个只打印字符串的新类：

```
public class TestClass
{
    public static void main(String[] args)
    {
        System.out.println("Hello, World.");
    }
} 
```

但我仍然没有得到关于标题的报道。'public class TestClass' 是红色的。

我已经尝试搜索与我所看到的内容相关的任何问题，但我似乎找不到任何东西。:( 有人有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T02:33:27.597

未涵盖类头，因为您尚未实例化该类的对象。main() 是静态的，因此不需要 TestClass 实例。

添加如下所示的行，您的类标题将变为绿色。

```
public class TestClass
{
    public static void main(String[] args)
    {
        TestClas tc = new TestClass();  // add this line
        System.out.println("Hello, World.");
    }
} 
```