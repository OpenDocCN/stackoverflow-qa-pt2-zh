# StackOverflow 问答 15527000-15527999

# javascript - 你如何解析一个数组来删除键，只用javascript返回值

> ID：15527011
> 
> 赞同：0
> 
> 时间：2013-03-20T14:53:45.650
> 
> 标签：javascript, json, parsing

你如何转换这个：

```
var values = [
    {name:'demian', email: 'demian@gmail.com', ID: 1},
    {name:'john'  , email: 'john@gmail.com'  , ID: 2},
    {name:'mark'  , email: 'mark@gmail.com'  , ID: 3},
    {name:'pete ' , email: 'pete@gmail.com'  , ID: 4}
]; 
```

对此：

```
var values = [
    {'demian', 'demian@gmail.com', 1},
    {'john'  , 'john@gmail.com'  , 2},
    {'mark'  , 'mark@gmail.com'  , 3},
    {'pete ' , 'pete@gmail.com'  , 4}
]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:04:12.910

这是一个非常简单的解决方案，它从对象列表中获取所有值（作为数组）：

```
var data = [
  {name:'demian', email: 'demian@gmail.com', ID: 1},
  {name:'john'  , email: 'john@gmail.com'  , ID: 2},
  {name:'mark'  , email: 'mark@gmail.com'  , ID: 3},
  {name:'pete ' , email: 'pete@gmail.com'  , ID: 4}
]
var values = data.map( function(d) { return [d.name, d.email, d.ID] })
console.log(values)
// output on console:
// [
//   ["demian", "demian@gmail.com", 1],
//   ["john",   "john@gmail.com",   2],
//   ["mark",   "mark@gmail.com",   3],
//   ["pete ",  "pete@gmail.com",   4]
// ] 
```

我希望这有帮助。

**编辑**- 这是一个更通用的解决方案：

```
values = data.map( function(d){ var a=[]; for(k in d) a.push(d[k]); return a })
console.log(values) 
```

但是你需要确保你的对象没有额外的属性（例如，由一些 JS 框架引入）。我更喜欢显式的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:23:37.363

对于一般用法，当您不知道命名键，或者它们在所有对象中都不相同时，您可以使用此脚本：

```
<script type="text/javascript">
var values = [
    {name:'demian', email: 'demian@gmail.com', ID: 1},
    {name:'john'  , email: 'john@gmail.com'  , ID: 2},
    {name:'mark'  , email: 'mark@gmail.com'  , ID: 3},
    {name:'pete ' , email: 'pete@gmail.com'  , ID: 4}
];

var nrv = values.length;
var values2 = [];           // to store the values, without named-keys

for(var i=0; i<nrv; i++) {
  values2[i] = [];
  for each(var val in values[i]) {
    values2[i].push(val);
  }
}

console.log(values2);

/* output on console
[["demian", "demian@gmail.com", 1],
["john", "john@gmail.com", 2],
["mark", "mark@gmail.com", 3],
["pete ", "pete@gmail.com", 4]]
*/
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:22:03.823

试试这个：

```
var val_array = [];
for(var i in values)
{
    val_array.push(    
        [values[i].name, values[i].email, values[i].ID]     
    )
} 
```

# list - 在jquery mobile中动态创建列表时如何创建自动列表分隔符

> ID：15527014
> 
> 赞同：0
> 
> 时间：2013-03-20T14:53:51.623
> 
> 标签：list, jquery-mobile, divider

我已经动态创建了一个消息列表。我有一个`<ul>`标签，我正在动态生成一个列表。但是，我不知道如何为此添加列表分隔符。js中是否有一个我可以调用的刷新方法，它会在我有我的列表后添加分隔符？

这就是我所拥有的：

```
<ul id="messages" data-autodividers="true" data-role="listview" data-theme="c">

    //a list of <li> are dynamically generated here

</ul> 
```

这只会在列表分隔符上附加到最顶部，我需要在`<li>`标签中使用其中的几个。我的列表`<li>`是消息。我希望能够按日期划分分隔符，这样它就更容易使用了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T15:19:09.270

我有一个 jsfiddle [http://jsfiddle.net/yVtVE/2/](http://jsfiddle.net/yVtVE/2/)

代码有点不同，但它可以工作

假设这样的列表

```
<ul data-role="listview" id="MessagesList" data-autodividers="true">
                <li date="2013-03-20"><a href="#">Event 1</a></li>
                <li date="2013-03-20"><a href="#">Event 2</a></li>
                <li date="2013-03-19"><a href="#">Event 3</a></li>
           </ul> 
```

你的代码是

```
$("#MessagesList").listview({
            autodividers: true,
            autodividersSelector: function (li) {
                var out = li.attr('date');
                return out;
            }
        }).listview('refresh'); 
```

原来的

来自 JQM 文档[http://api.jquerymobile.com/listview/](http://api.jquerymobile.com/listview/)

自动分频器

列表视图可以配置为自动为其项目生成分隔符。这是通过向任何列表视图添加 data-autodividers="true" 属性来完成的。

默认情况下，用于创建分隔符的文本是项目文本的大写首字母。或者，您可以通过以编程方式在列表视图上设置 autodividersSelector 选项来指定分隔符文本。例如，要向 id="mylistview" 的元素添加自定义选择器：

```
$( "#mylistview" ).listview({
autodividers: true,
// the selector function is passed a <li> element from the listview;
// it should return the appropriate divider text for that <li>
// element as a string
autodividersSelector: function ( li ) {
var out = /* generate a string based on the content of li */;
return out;
}
}); 
```

假设您的消息中有一个日期，您的代码将像这样工作

```
$( "#mylistview" ).listview({
autodividers: true,
autodividersSelector: function ( li ) {
    var re = /\/\d{4}\/\d{2}\/\d{2}/i;
    var out = $(this).html().match(re);
    return out;
  }
}); 
```

我没有测试过这段代码，它可能有错误，但它会给你一个尝试的想法。

# vb.net - 等到文件下载 vb.net

> ID：15527017
> 
> 赞同：2
> 
> 时间：2013-03-20T14:53:55.843
> 
> 标签：vb.net, download, wait

我想知道是否有办法让我的应用程序等待\暂停，直到文件完全下载。

该文件是使用以下代码下载的...

```
'Downloads file from URL...
 Dim mywebclient As New System.Net.WebClient()
 mywebclient.DownloadFile(UPDATEURL & "/UPDATE.exe", "C:\mylocalfolder\UPDATE.exe") 
```

对于那些想知道的人，我正在使用 VB.net...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:25:32.720

您可以在开始下载时将表单的`Enabled`属性设置为 false，并使用的[DownloadComplete](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadfilecompleted.aspx)事件`WebClient`将 Enabled 属性设置回 True。不确定等待/暂停可能意味着什么，因为该方法无论如何都不是异步的。

```
'Downloads file from URL...
 Try
   Me.Enabled = False
   Dim mywebclient As New System.Net.WebClient()
   Addhandler mywebclient.DownloadFileComplete, AddressOf wc_downloadComplete
   mywebclient.DownloadFile(UPDATEURL & "/UPDATE.exe", "C:\mylocalfolder\UPDATE.exe")
 Catch
   'in case something fails
   Me.Enabled = True
 End Try

 Private Sub wc_downloadComplete(sender As Object, e As AsyncCompletedEventArgs)
    Me.Enabled = True
 End Sub 
```

# c# - 无法在 ReportViewer 中添加子组 - Visual Studio 2010

> ID：15527021
> 
> 赞同：2
> 
> 时间：2013-03-20T14:54:03.840
> 
> 标签：c#, .net, visual-studio-2010, reportviewer, report-viewer2010

我正在尝试在报告（RDLC 文件）上添加一个子组，但我无法让它工作。如果我右键单击 Tablix 的详细信息行，它可以让我选择“添加组”，但“子组...”选项将显示为灰色。

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:13:06.013

我不肯定“儿童组”正是你所想的那样。为了添加子组，首先将父组添加到数据行。设置好父组后，如果您右键单击包含父组表达式的新列并转到添加组，您现在可以选择子组。

所以...

1) 添加父组 2) 右键单击​​父列的表达式单元格 2.a) 选择“添加组” 2.b) 选择“子组”

我相信这背后的心态是你不能有一个没有父母的孩子组。

# asp.net - 正则表达式只允许单词之间有一个空格

> ID：15527034
> 
> 赞同：2
> 
> 时间：2013-03-20T14:54:27.887
> 
> 标签：asp.net, regex

我在 ASP.NET 应用程序中有一个文本框，为此我需要使用正则表达式来验证用户输入字符串。正则表达式的要求是 -

1.  它应该只允许单词之间有一个空格。也就是说，单词或字符之间的空格总数应该只有一个。
2.  它应该忽略前导和尾随空格。

火柴：

*   测试
*   测试 abc

不匹配：

*   测试 abc def
*   测试 abc --> 我想在两个单词之间包含多个空格。然而，编辑在发布问题时会忽略这些额外的空格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:41:18.680

假设必须有一个或两个“单词”（即非空格字符序列）

```
"\s*\S+(\s\S+)?\s*" 
```

如果您只想允许字母，请更改`\S`为。`[A-Za-z]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:02:17.660

很简单：

```
/^ *(\w+ ?)+ *$/ 
```

小提琴：[http ://refiddle.com/gls](http://refiddle.com/gls)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:26:30.110

也许这个会做？

```
\s*\S+?\s?\S*\s* 
```

编辑：它是一个服务器编码的正则表达式，这意味着您可能需要删除其中一个转义斜杠。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:47:42.597

怎么样：

```
^\s*(\w+\s)*\w+\s*$ 
```

# c# - 使用令牌签署 activex 控件

> ID：15527038
> 
> 赞同：0
> 
> 时间：2013-03-20T14:54:33.843
> 
> 标签：c#, activex, code-signing

是否可以使用智能卡（电子令牌）对 ActiveX 控件进行签名？我正在用 C# 编写一个 ActiveX 控件以在 IE 中使用，我想用我的令牌对其进行签名。令牌具有在使用字段中指定的代码签名。谷歌搜索结果没有太大帮助。根据我的发现，我必须创建另一个用这个签名的证书文件。它是受信任的，但它不在硬件范围内，并且可以被复制。

# javascript - 版本控制：如何控制环境之间的 css 和 js 压缩/缩小版本

> ID：15527050
> 
> 赞同：6
> 
> 时间：2013-03-20T14:54:52.460
> 
> 标签：javascript, css, git, version-control

我正在使用 git（通过 GitHub）对我的项目进行版本控制。我对此仍然很陌生，但我想知道如何在环境之间保持我的`css`和`js`文件同步的最佳实践。

**示例：**假设我`js`在 dev 上编写了一个脚本。我对我的工作很满意，我努力进行测试。好吧，在测试中，我想要一个缩小/压缩的版本。在没有大量开销任务的情况下，我将如何做到这一点？你们是做什么的？我假设它是某种部署脚本的一部分，可以压缩代码并将其推送到我指定的任何环境。

这带来了另一个问题：我的`header`（和/或`footer`）文件在我的项目中呢？如果我`dev`有：

`<link rel="stylesheet" href="<?php echo base_url(); ?>css/main.css">`

我`testing`有：

`<link rel="stylesheet" href="<?php echo base_url(); ?>css/main.min.css">`

没关系，但是如果我需要更改我的标题怎么办？我将如何将所有这些东西彼此分开？如果我对我的标题进行更改并推送到测试或生产，我会`.min`从该包含行中丢失。

目前，我为部署更新所做的只是`git pull origin [branch]`从我要更新的环境中的命令行进行的一个简单操作。

同样，我正在寻找最佳实践，无论它需要什么学习。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:04:00.327

您可能想查看预处理器工具，例如 LESS 或 Sass。这些工具允许您编写 CSS（我相信它们也可以处理 JS，以用于缩小），并根据环境设置处理它们如何编译代码的脚本。

那么，您要做的就是在“源”文件中编写代码，并设置预处理器以根据设置文件中的设置编译代码（对于 Sass，这可以通过 Compass 框架轻松完成），根据您所处的环境。然后您将只保留存储库中的源文件（将 Git 设置为忽略已编译的版本），并设置接收后挂钩以编译服务器上的源文件。然后可以编写您的 HTML 以访问已编译的文件（跨环境应该具有相同的名称），因此您不必每次都编写动态确定代码运行环境的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:06:51.340

通常，您的 CMS 在页面加载时会生成一个缩小文件。因此，从代码的角度来看，您不需要跟踪缩小版本，因为所有代码都在您的实际 js 和 css 文件中进行跟踪。所以使用 .gitignore 文件可以忽略缩小的副本。

我的 .gitignore 文件通常如下所示：

```
css-min            #directory to store generated minified css files
js-min             #directory to store generated minified js files
tmp                #directory to store temporary files
files/images/cache #directory for storing generated images such as thumbnails
settings.php       #File that stores system variables. 
```

设置文件用于设置全局变量，例如您的平台，如“dev”、“staging”、“production”。然后在您的其他文件中，您可以检查平台以使用哪些 css/js 文件。由于您的存储库会忽略该文件，因此您可以针对每个平台进行设置。

```
if ($GLOBAL['platform'] = PLATFORM_DEV) {
  $path = 'css/main.css';
}
elseif ($GLOBAL['platform'] = PLATFORM_STAGE) {
  $path = 'css-min/main.min.css';
}

<link rel="stylesheet" href="<?php print base_url(); print $path; ?>"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:07:45.220

1.  不要将缩小版的 CSS、JS 放入版本控制中。那是重复的。

2.  Git 可以在 delopy 上使用，但它的目的不是部署。

3.  For the including CSS tags, that's easy. A quick roundup is use your framework's env vairable. As I know CodeIgniter has this function. If env == test, include minified version, if not, include raw versions.

Besides you need a build script or framework plugin to generate minified versions automatically.

# c# - 如何检查单词是否以给定字符开头？

> ID：15527051
> 
> 赞同：21
> 
> 时间：2013-03-20T14:55:02.973
> 
> 标签：c#, sharepoint, web-parts

我有一个 Sharepoint 项目的列表：每个项目都有一个标题、一个描述和一个类型。我成功找回它，我打电话给它`result`。我想首先检查是否有任何项目`result`以 A 然后 B 然后 C 等开头粗体字。

我最初使用此功能显示字符：

```
private string generateHeaderScripts(char currentChar)
{
    string headerScriptHtml = "$(document).ready(function() {" +
        "$(\"#myTable" + currentChar.ToString() + "\") " +
        ".tablesorter({widthFixed: true, widgets: ['zebra']})" +
        ".tablesorterPager({container: $(\"#pager" + currentChar.ToString() +"\")}); " +
        "});";
    return headerScriptHtml;
} 
```

如何检查单词是否以给定字符开头？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-20T15:01:04.357

要检查一个值，请使用：

```
 string word = "Aword";
    if (word.StartsWith("A")) 
    {
        // do something
    } 
```

您可以制作一个小扩展方法来传递带有 A、B 和 C 的列表

```
 public static bool StartsWithAny(this string source, IEnumerable<string> strings)
    {
        foreach (var valueToCheck in strings)
        {
            if (source.StartsWith(valueToCheck))
            {
                return true;
            }
        }

        return false;
    }

    if (word.StartsWithAny(new List<string>() { "A", "B", "C" })) 
    {
        // do something
    } 
```

并且作为奖励，如果您想从列表中知道您的字符串以什么开头，并根据该值执行某些操作：

```
 public static bool StartsWithAny(this string source, IEnumerable<string> strings, out string startsWithValue)
    {
        startsWithValue = null;

        foreach (var valueToCheck in strings)
        {
            if (source.StartsWith(valueToCheck))
            {
                startsWithValue = valueToCheck;
                return true;
            }
        }

        return false;
    } 
```

用法：

```
 string word = "AWord";
    string startsWithValue;
    if (word.StartsWithAny(new List<string>() { "a", "b", "c" }, out startsWithValue))
    {
        switch (startsWithValue)
        {
            case "A":
                // Do Something
                break;

            // etc.
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:26:41.897

你可以做这样的事情来检查一个特定的字符。

```
public bool StartsWith(string value, string currentChar) {
   return value.StartsWith(currentChar, true, null);
} 
```

StartsWith 方法具有忽略大小写的选项。第三个参数是设置文化。如果为 null，则仅使用当前文化。使用这种方法，您可以遍历您的单词，运行检查并处理单词以根据需要突出显示第一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:00:41.977

假设您要检查的属性是字符串类型，您可以使用[String.StartsWith()](http://msdn.microsoft.com/en-gb/library/system.string.startswith.aspx)方法.. 例如：-

```
if(item.Title.StartsWith("A"))
{
    //do whatever
} 
```

冲洗并重复

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:06:41.103

请尝试以下操作。您可以使用 StartsWith 或 Substring 0,1（第一个字母）

```
 if (Word.Substring(0,1) == "A") {
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-19T12:30:13.057

您可以简单地检查第一个字符：

```
word = "AWord"
if (word[0] == 'A')
{
    // do something
} 
```

请记住，字符比较比字符串比较**更有效。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T14:59:43.307

要返回字符串中的第一个字符，请使用：

```
Word.Substring(0,1) //where word is a string 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T15:06:31.723

你可以实现*正则表达式*。它们非常强大，但是当你设计你的表情时，它实际上会为你完成一项任务。

例如查找数字、字母、单词等。它非常具有表现力和灵活性。

[他们在这里](http://www.codeproject.com/Articles/9099/The-30-Minute-Regex-Tutorial)有一个非常棒的教程：

这种表达式的一个例子是：

```
string input = "Some additional string to compare against.";
Match match = Regex.Match(input, @"\ba\w*\b", RegexOptions.IgnoreCase); 
```

无论如何，这都会找到所有以“a”开头的项目。你会发现甚至可以利用 Lambda 和 Linq 来让它们更好地流动。

希望这会有所帮助。

# r - 将三级列表结构转换为 data.frame

> ID：15527053
> 
> 赞同：0
> 
> 时间：2013-03-20T14:55:06.613
> 
> 标签：r, dataframe, nested-lists

我有一个三级列表，dput 在下面。如何将其转换为 data.frame？输出应为 6x23 data.frame，最好使用正确的列名。行数是`length()`顶层列表的数量，列数是最低层列表的组合`length()`。

我尝试按照此处的建议执行此操作（[R 列表到数据框](https://stackoverflow.com/questions/4227223/r-list-to-data-frame)）：

`df <- data.frame(matrix(unlist(l), nrow=6, byrow=T))`

它几乎可以工作，但一切都转换为一个因素。这是因为`unlist()`只返回一个向量，并且所有内容都被强制转换为相同的数据类型。

谢谢你。

```
list(structure(list(contract = structure(list(conId = "98333158", 
    symbol = "6823", sectype = "STK", exch = "SEHK", primary = "SEHK", 
    expiry = "", strike = "0", currency = "HKD", right = "0", 
    local = "6823", multiplier = "", combo_legs_desc = "", comboleg = "", 
    include_expired = "", secIdType = "", secId = ""), .Names = c("conId", 
"symbol", "sectype", "exch", "primary", "expiry", "strike", "currency", 
"right", "local", "multiplier", "combo_legs_desc", "comboleg", 
"include_expired", "secIdType", "secId"), class = "twsContract"), 
    portfolioValue = structure(list(position = 9000, marketPrice = 7.4949999, 
        marketValue = 67455, averageCost = 7.34352835, unrealizedPNL = 1363.24, 
        realizedPNL = 0, accountName = "U"), .Names = c("position", 
    "marketPrice", "marketValue", "averageCost", "unrealizedPNL", 
    "realizedPNL", "accountName"))), .Names = c("contract", "portfolioValue"
), class = "eventPortfolioValue"), structure(list(contract = structure(list(
    conId = "107651219", symbol = "EEM", sectype = "OPT", exch = "AMEX", 
    primary = "AMEX", expiry = "20130621", strike = "45", currency = "USD", 
    right = "C", local = "EEM   130622C00045000", multiplier = "100", 
    combo_legs_desc = "", comboleg = "", include_expired = "", 
    secIdType = "", secId = ""), .Names = c("conId", "symbol", 
"sectype", "exch", "primary", "expiry", "strike", "currency", 
"right", "local", "multiplier", "combo_legs_desc", "comboleg", 
"include_expired", "secIdType", "secId"), class = "twsContract"), 
    portfolioValue = structure(list(position = 7, marketPrice = 0.335, 
        marketValue = 234.5, averageCost = 191.78912855, unrealizedPNL = -1108.02, 
        realizedPNL = 0, accountName = "U"), .Names = c("position", 
    "marketPrice", "marketValue", "averageCost", "unrealizedPNL", 
    "realizedPNL", "accountName"))), .Names = c("contract", "portfolioValue"
), class = "eventPortfolioValue"), structure(list(contract = structure(list(
    conId = "114533598", symbol = "ESTX50", sectype = "FUT", 
    exch = "DTB", primary = "DTB", expiry = "20130621", strike = "0", 
    currency = "EUR", right = "0", local = "FESX JUN 13", multiplier = "10", 
    combo_legs_desc = "", comboleg = "", include_expired = "", 
    secIdType = "", secId = ""), .Names = c("conId", "symbol", 
"sectype", "exch", "primary", "expiry", "strike", "currency", 
"right", "local", "multiplier", "combo_legs_desc", "comboleg", 
"include_expired", "secIdType", "secId"), class = "twsContract"), 
    portfolioValue = structure(list(position = 0, marketPrice = 2639.5, 
        marketValue = 0, averageCost = 0, unrealizedPNL = 0, 
        realizedPNL = -84, accountName = "U"), .Names = c("position", 
    "marketPrice", "marketValue", "averageCost", "unrealizedPNL", 
    "realizedPNL", "accountName"))), .Names = c("contract", "portfolioValue"
), class = "eventPortfolioValue"), structure(list(contract = structure(list(
    conId = "44053851", symbol = "REM", sectype = "STK", exch = "ARCA", 
    primary = "ARCA", expiry = "", strike = "0", currency = "USD", 
    right = "0", local = "REM", multiplier = "", combo_legs_desc = "", 
    comboleg = "", include_expired = "", secIdType = "", secId = ""), .Names = c("conId", 
"symbol", "sectype", "exch", "primary", "expiry", "strike", "currency", 
"right", "local", "multiplier", "combo_legs_desc", "comboleg", 
"include_expired", "secIdType", "secId"), class = "twsContract"), 
    portfolioValue = structure(list(position = 200, marketPrice = 15.5649996, 
        marketValue = 3113, averageCost = 13.9649, unrealizedPNL = 320.02, 
        realizedPNL = 0, accountName = "U"), .Names = c("position", 
    "marketPrice", "marketValue", "averageCost", "unrealizedPNL", 
    "realizedPNL", "accountName"))), .Names = c("contract", "portfolioValue"
), class = "eventPortfolioValue"), structure(list(contract = structure(list(
    conId = "15016062", symbol = "USD", sectype = "CASH", exch = "IDEALPRO", 
    primary = "IDEALPRO", expiry = "", strike = "0", currency = "CAD", 
    right = "0", local = "USD.CAD", multiplier = "", combo_legs_desc = "", 
    comboleg = "", include_expired = "", secIdType = "", secId = ""), .Names = c("conId", 
"symbol", "sectype", "exch", "primary", "expiry", "strike", "currency", 
"right", "local", "multiplier", "combo_legs_desc", "comboleg", 
"include_expired", "secIdType", "secId"), class = "twsContract"), 
    portfolioValue = structure(list(position = 30000, marketPrice = 1.02540505, 
        marketValue = 30762.15, averageCost = 1.02867, unrealizedPNL = -97.95, 
        realizedPNL = 0, accountName = "U"), .Names = c("position", 
    "marketPrice", "marketValue", "averageCost", "unrealizedPNL", 
    "realizedPNL", "accountName"))), .Names = c("contract", "portfolioValue"
), class = "eventPortfolioValue"), structure(list(contract = structure(list(
    conId = "37928772", symbol = "USD", sectype = "CASH", exch = "IDEALPRO", 
    primary = "IDEALPRO", expiry = "", strike = "0", currency = "SGD", 
    right = "0", local = "USD.SGD", multiplier = "", combo_legs_desc = "", 
    comboleg = "", include_expired = "", secIdType = "", secId = ""), .Names = c("conId", 
"symbol", "sectype", "exch", "primary", "expiry", "strike", "currency", 
"right", "local", "multiplier", "combo_legs_desc", "comboleg", 
"include_expired", "secIdType", "secId"), class = "twsContract"), 
    portfolioValue = structure(list(position = 75000, marketPrice = 1.25079, 
        marketValue = 93809.25, averageCost = 1.2473, unrealizedPNL = 261.75, 
        realizedPNL = 0, accountName = "U"), .Names = c("position", 
    "marketPrice", "marketValue", "averageCost", "unrealizedPNL", 
    "realizedPNL", "accountName"))), .Names = c("contract", "portfolioValue"
), class = "eventPortfolioValue")) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:28:01.567

您需要明确`lapply`调用每个子列表。`as.data.frame.list`然后拼凑在一起`rbind`。

```
dfr <- do.call(rbind,lapply(l,function(x) as.data.frame.list(lapply(x,as.data.frame.list))))
dim(dfr)
[1]  6 23
table(sapply(dfr,class))

 factor numeric 
     17       6 
```

# maven-bundle-plugin - 包含资源指令的 Felix maven 捆绑插件问题

> ID：15527061
> 
> 赞同：4
> 
> 时间：2013-03-20T14:55:17.820
> 
> 标签：maven-bundle-plugin

问题：我在 target/temp 下生成一些文件，我希望将这些文件包含在打包阶段捆绑的最终捆绑 wab 中。这是我正在使用的代码片段：

```
<_wab>src/main/webapp</_wab>

<Include-Resource>
              {maven-resources},
              src/main/webapp/destination=target/temp
</Include-Resource> 
```

我希望在 target/temp 下生成的目录包含在目标目录结构下。但是，上面的语法不包括 temp 下的文件。但是 maven-resources 被包含在 wab 的根目录中。

该文档来自此页面： http: [//felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)在`<Include-Resource>`说明下。它说“如果必须将特定资源放置在 bundle jar 的子目录中，则使用分配形式，其中第一个路径是目标路径（如果资源是文件，则包括文件名），第二个路径是要复制的资源。”

我已经检查并在使用 maven-bundle-plugin 的包阶段之前在 target/temp 下生成了所需的目录。有什么我想念的吗？

我真的很感激这个问题的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-21T12:18:28.787

我相信您的意思是您的目标路径没有 src/main/webapp，因为这是“相对于生成的捆绑 JAR 文件的根目录”，并且您要复制的资源可能会更好地使用斜杠来指示它是一个目录 - 试试如果这对你更有效：

```
<Include-Resource>{maven-resources},destination/=target/temp/</Include-Resource> 
```

我没有尝试过，但仅供参考，以下内容对我有用，尽管这是针对两个特定文件（而你想要一个目录）：

```
<Include-Resource>{maven-resources},META-INF/git.properties=target/classes/META-INF/git.properties,target/classes/LICENSE</Include-Resource> 
```

# java - 无法访问的语句开关

> ID：15527062
> 
> 赞同：-4
> 
> 时间：2013-03-20T14:55:18.173
> 
> 标签：java

我有一个不工作的 POS 程序，它说***switch(food)*** unreachable 语句

```
import javax.swing.*;
import java.awt.*;

public class sari{
public static void One()
{
int choice=0,food=0,c=0,con,x=1,y=1,z=1,q=1,trans=0,price=0 ,qty,gtotal=0,ptotal=0,pay,change,total=0,ord;
String order="",bibilhin="",transaction="",A;

                   ImageIcon welcome = new ImageIcon("welcome.jpg");
            ImageIcon chip = new ImageIcon("chip.jpg");
            ImageIcon rc = new ImageIcon("rc.jpg");
            ImageIcon stick = new ImageIcon("stick.jpg");
            ImageIcon pancit = new ImageIcon("pancit.jpg");
            ImageIcon jampong = new ImageIcon("jampong.jpg");
            ImageIcon chups = new ImageIcon("chups.jpg");
            ImageIcon egg = new ImageIcon("egg.jpg");
            A=JOptionPane.showInputDialog("Enter your name:");              ImageIcon hansel = new ImageIcon("hansel.jpg");

JOptionPane.showMessageDialog(null,"Sir/Ma`am \n "+A+"\n Welcome\n to Mang Inasal\n Please Choose The\n product you want to buy","Welcome" ,JOptionPane.PLAIN_MESSAGE,welcome);
    while(x==1) 
            {
            c=Integer.parseInt(JOptionPane.showInputDialog("  Categories" + "\n" +"[1] Drinks" + "\n" + "[2] Foods"));

    if(c==1)
        {choice=Integer.parseInt(JOptionPane.showInputDialog("DRINKS" +"\n"
                        + "[1] Lemonade" + "\n"
                        + "[2] Coca Cola" + "\n"
                        + "[3] Sprite" + "\n"
                        + "[4] Mountain Dew" + "\n"
                        + "[5] Pepsi" + "\n"
                        + "[6] Cofee" +"\n"
                        + "[7] Hot Choco" +  "\n"
                        + "[8] Nestie Iced Tea" +"\n"
                        + "[9] Exit" +"\n"
                        + "Enter Your Choice:"));
    if(c==2)
        food=Integer.parseInt(JOptionPane.showInputDialog("Food" +"\n"
                        + "[1] L" + "\n"
                        + "[2] Coca Cola" + "\n"
                        + "[3] Sprite" + "\n"
                        + "[4] Mountain Dew" + "\n"
                        + "[5] Pepsi" + "\n"
                        + "[6] Cofee" +"\n"
                        + "[7] Hot Choco" +  "\n"
                        + "[8] Nestie Iced Tea" +"\n"
                        + "[9] Exit" +"\n"
                        + "Enter Your Choice:"));   

    }

        switch(choice)
            {
                case 1:
                    price = 20;
                    bibilhin= " Lemonade";
                    break;
                case 2:
                    price = 20;
                    bibilhin= "Coca Cola ";
                    break;
                case 3:
                    price =820;
                    bibilhin = "Sprite";
                    break;
                case 4:
                    price =205;
                    bibilhin= "Mountain dew";
                    break;
                case 5:
                    price =20;
                    bibilhin= "Pepsi";
                    break;
                case 6:
                    price =25;
                    bibilhin= "Cofee ";
                    break;
                case 7:
                    price =25;
                    bibilhin= "Hot Choco";
                    break;
                case 8:
                    price = 20;
                    bibilhin= "Nestie Ice tea";
                    break;
                case 9:
                    JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                    JOptionPane.showMessageDialog(null,"You are about to exit!","Exit",JOptionPane.WARNING_MESSAGE);
                    do{
                        con=Integer.parseInt(JOptionPane.showInputDialog("Are you sure you want to exit?\n[1] Yes\n[0] No"));
                        if(con==1)
                            System.exit(0);
                        else if(con==1)
                        {
                            JOptionPane.showMessageDialog(null,"THANK YOU!\nGood Bye!","Exit",JOptionPane.ERROR_MESSAGE);
                            break;

                        }
                        else
                        {
                            JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                            con=1;
                        }

                       }while(con==1);
                       continue;
                default:
                    JOptionPane.showMessageDialog(null,"Invalid Choice!","ERROR",JOptionPane.ERROR_MESSAGE);
}

            do{//do1

            qty = Integer.parseInt(JOptionPane.showInputDialog("Quantity:"));

            if (qty>0)
                break;
            else
            {
                JOptionPane.showMessageDialog(null,"Invalid Input!","Error",JOptionPane.ERROR_MESSAGE);
                continue;
            }
            }while(q==1);//end do1

            total = price * qty;
            ptotal = ptotal+total;
            order = order +bibilhin+"                 "+qty+"                  "+price+"="+total+"\n";

            do  {//do2
            con = Integer.parseInt(JOptionPane.showInputDialog("Continue?[1] yes [0] no"));
                    if(con==1)
                    {

                        break;
                    }
                    else if(con==0)
                    {

                        do{
pay = Integer.parseInt(JOptionPane.showInputDialog(order+"Total " +ptotal+"\nEnter Payment:"));
if(pay>=ptotal)
                                {

change = pay-ptotal;
JOptionPane.showMessageDialog(null,"  \t                    Mang Inasal"+
            "\n\t           14 T molina st purok 6-B "+
            "\n\t              Alabang Muntinlupa City  "+
            "\nOperator: Micko Mendoza"+
            "\n\t----------------------------------------------------------------"+
            "\n\n\t   "+order+"\nTotal "+ptotal+
"\nCash "+pay+
"\nChange "+change+
            "\n----------------------------------------------------------------"+
            "\n\n \t            Thanks For buying!!!!!"+
                            "\n\t  This Serve as an official reciept DTSN:41D983"+
            "\n     \t       For Delivery Dial (519-6936)"+
            "\n    \t               Feedbacks"+
            "\n  \t             micko.mendoza@yahoo.com"
);
                                    y=0;
                                    z=0;
                                    x=1;
                                    gtotal = gtotal+ptotal;
                                    trans++;
                                    order="";
                                    transaction = transaction+"Transaction "+ trans+ " "+ptotal+"\n";//No of transactions
                                    ptotal = 0;
                                    do{
                                        con=Integer.parseInt(JOptionPane.showInputDialog("Next Customer?\n[1] Yes\n[0] No"));
                                        if(con==1)
                                            break;
                                        else if(con==0)
                                        {
                                            JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                                            System.exit(0);
                                        }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                        continue;
                    }

                }while(con==1);
                                    break;
                                }
                            else
                                {
                                    JOptionPane.showMessageDialog(null,"Kulang pera mo");

                                    continue;
                                }
                            }while(z==1);//do3

                    }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Intiger lang pwede","Continue",JOptionPane.ERROR_MESSAGE);
                        y=1;
                        continue;
                    }
                }   while(y==1);//do2

                break;

        switch(food)
            {
                case 11:
                    price = 20;
                    bibilhin= " Lemonade";
                    break;
                case 12:
                    price = 20;
                    bibilhin= "Coca Cola ";
                    break;
                case 13:
                    price =820;
                    bibilhin = "Sprite";
                    break;
                case 14:
                    price =205;
                    bibilhin= "Mountain dew";
                    break;
                case 15:
                    price =20;
                    bibilhin= "Pepsi";
                    break;
                case 16:
                    price =25;
                    bibilhin= "Cofee ";
                    break;
                case 17:
                    price =25;
                    bibilhin= "Hot Choco";
                    break;
                case 18:
                    price = 20;
                    bibilhin= "Nestie Ice tea";
                    break;
                case 19:
                    JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                    JOptionPane.showMessageDialog(null,"You are about to exit!","Exit",JOptionPane.WARNING_MESSAGE);
                    do{
                        con=Integer.parseInt(JOptionPane.showInputDialog("Are you sure you want to exit?\n[1] Yes\n[0] No"));
                        if(con==1)
                            System.exit(0);
                        else if(con==1)
                        {
                            JOptionPane.showMessageDialog(null,"THANK YOU!\nGood Bye!","Exit",JOptionPane.ERROR_MESSAGE);
                            break;

                        }
                        else
                        {
                            JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                            con=1;
                        }

                       }while(con==1);
                       continue;
                default:
                    JOptionPane.showMessageDialog(null,"Invalid Choice!","ERROR",JOptionPane.ERROR_MESSAGE);
}

            do{//do1

            qty = Integer.parseInt(JOptionPane.showInputDialog("Quantity:"));

            if (qty>0)
                break;
            else
            {
                JOptionPane.showMessageDialog(null,"Invalid Input!","Error",JOptionPane.ERROR_MESSAGE);
                continue;
            }
            }while(q==1);//end do1

            total = price * qty;
            ptotal = ptotal+total;
            order = order +bibilhin+"                 "+qty+"                  "+price+"="+total+"\n";

            do  {//do2
            con = Integer.parseInt(JOptionPane.showInputDialog("Continue?[1] yes [0] no"));
                    if(con==1)
                    {

                        break;
                    }
                    else if(con==0)
                    {

                        do{
pay = Integer.parseInt(JOptionPane.showInputDialog(order+"Total " +ptotal+"\nEnter Payment:"));
if(pay>=ptotal)
                                {

change = pay-ptotal;
JOptionPane.showMessageDialog(null,"  \t                    Mang Inasal"+
                "\n\t           14 T molina st purok 6-B "+
            "\n\t              Alabang Muntinlupa City  "+
            "\nOperator: Micko Mendoza"+
            "\n\t----------------------------------------------------------------"+
            "\n\n\t   "+order+"\nTotal "+ptotal+
"\nCash "+pay+
"\nChange "+change+
            "\n----------------------------------------------------------------"+
            "\n\n \t            Thanks For buying!!!!!"+
                            "\n\t  This Serve as an official reciept DTSN:41D983"+
            "\n     \t       For Delivery Dial (519-6936)"+
            "\n    \t               Feedbacks"+
            "\n  \t             micko.mendoza@yahoo.com"
    );
                                    y=0;
                                    z=0;
                                    x=1;
                                    gtotal = gtotal+ptotal;
                                    trans++;
                                    order="";
                                    transaction = transaction+"Transaction "+ trans+ " "+ptotal+"\n";//No of transactions
                                    ptotal = 0;
                                    do{
                                        con=Integer.parseInt(JOptionPane.showInputDialog("Next Customer?\n[1] Yes\n[0] No"));
                                        if(con==1)
                                            break;
                                        else if(con==0)
                                        {
                                            JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                                            System.exit(0);
                                        }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                        continue;
                    }

                }while(con==1);
                                    break;
                                }
                            else
                                {
                                    JOptionPane.showMessageDialog(null,"Kulang pera mo");

                                    continue;
                                }
                            }while(z==1);//do3

                    }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Intiger lang pwede","Continue",JOptionPane.ERROR_MESSAGE);
                        y=1;
                        continue;
                    }
                }   while(y==1);//do2

                continue;

}   
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T14:56:19.190

`break`您在所讨论的问题之前拥有无条件的权利`switch`。

顺便说一句，我认为这是学习函数以及如何使用它们使代码更加模块化的最佳时机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T14:57:58.153

评论 break 语句

导入 javax.swing。*; 导入 java.awt。*;

```
public class Test{
public static void main(String[] args) 

{
int choice=0,food=0,c=0,con,x=1,y=1,z=1,q=1,trans=0,price=0 ,qty,gtotal=0,ptotal=0,pay,change,total=0,ord;
String order="",bibilhin="",transaction="",A;

                   ImageIcon welcome = new ImageIcon("welcome.jpg");
            ImageIcon chip = new ImageIcon("chip.jpg");
            ImageIcon rc = new ImageIcon("rc.jpg");
            ImageIcon stick = new ImageIcon("stick.jpg");
            ImageIcon pancit = new ImageIcon("pancit.jpg");
            ImageIcon jampong = new ImageIcon("jampong.jpg");
            ImageIcon chups = new ImageIcon("chups.jpg");
            ImageIcon egg = new ImageIcon("egg.jpg");
            A=JOptionPane.showInputDialog("Enter your name:");              ImageIcon hansel = new ImageIcon("hansel.jpg");

JOptionPane.showMessageDialog(null,"Sir/Ma`am \n "+A+"\n Welcome\n to Mang Inasal\n Please Choose The\n product you want to buy","Welcome" ,JOptionPane.PLAIN_MESSAGE,welcome);
    while(x==1) 
            {
            c=Integer.parseInt(JOptionPane.showInputDialog("  Categories" + "\n" +"[1] Drinks" + "\n" + "[2] Foods"));

    if(c==1)
        {choice=Integer.parseInt(JOptionPane.showInputDialog("DRINKS" +"\n"
                        + "[1] Lemonade" + "\n"
                        + "[2] Coca Cola" + "\n"
                        + "[3] Sprite" + "\n"
                        + "[4] Mountain Dew" + "\n"
                        + "[5] Pepsi" + "\n"
                        + "[6] Cofee" +"\n"
                        + "[7] Hot Choco" +  "\n"
                        + "[8] Nestie Iced Tea" +"\n"
                        + "[9] Exit" +"\n"
                        + "Enter Your Choice:"));
    if(c==2)
        food=Integer.parseInt(JOptionPane.showInputDialog("Food" +"\n"
                        + "[1] L" + "\n"
                        + "[2] Coca Cola" + "\n"
                        + "[3] Sprite" + "\n"
                        + "[4] Mountain Dew" + "\n"
                        + "[5] Pepsi" + "\n"
                        + "[6] Cofee" +"\n"
                        + "[7] Hot Choco" +  "\n"
                        + "[8] Nestie Iced Tea" +"\n"
                        + "[9] Exit" +"\n"
                        + "Enter Your Choice:"));   

    }

        switch(choice)
            {
                case 1:
                    price = 20;
                    bibilhin= " Lemonade";
                    break;
                case 2:
                    price = 20;
                    bibilhin= "Coca Cola ";
                    break;
                case 3:
                    price =820;
                    bibilhin = "Sprite";
                    break;
                case 4:
                    price =205;
                    bibilhin= "Mountain dew";
                    break;
                case 5:
                    price =20;
                    bibilhin= "Pepsi";
                    break;
                case 6:
                    price =25;
                    bibilhin= "Cofee ";
                    break;
                case 7:
                    price =25;
                    bibilhin= "Hot Choco";
                    break;
                case 8:
                    price = 20;
                    bibilhin= "Nestie Ice tea";
                    break;
                case 9:
                    JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                    JOptionPane.showMessageDialog(null,"You are about to exit!","Exit",JOptionPane.WARNING_MESSAGE);
                    do{
                        con=Integer.parseInt(JOptionPane.showInputDialog("Are you sure you want to exit?\n[1] Yes\n[0] No"));
                        if(con==1)
                            System.exit(0);
                        else if(con==1)
                        {
                            JOptionPane.showMessageDialog(null,"THANK YOU!\nGood Bye!","Exit",JOptionPane.ERROR_MESSAGE);
                            break;

                        }
                        else
                        {
                            JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                            con=1;
                        }

                       }while(con==1);
                       continue;
                default:
                    JOptionPane.showMessageDialog(null,"Invalid Choice!","ERROR",JOptionPane.ERROR_MESSAGE);
}

            do{//do1

            qty = Integer.parseInt(JOptionPane.showInputDialog("Quantity:"));

            if (qty>0)
                break;
            else
            {
                JOptionPane.showMessageDialog(null,"Invalid Input!","Error",JOptionPane.ERROR_MESSAGE);
                continue;
            }
            }while(q==1);//end do1

            total = price * qty;
            ptotal = ptotal+total;
            order = order +bibilhin+"                 "+qty+"                  "+price+"="+total+"\n";

            do  {//do2
            con = Integer.parseInt(JOptionPane.showInputDialog("Continue?[1] yes [0] no"));
                    if(con==1)
                    {

                        break;
                    }
                    else if(con==0)
                    {

                        do{
pay = Integer.parseInt(JOptionPane.showInputDialog(order+"Total " +ptotal+"\nEnter Payment:"));
if(pay>=ptotal)
                                {

change = pay-ptotal;
JOptionPane.showMessageDialog(null,"  \t                    Mang Inasal"+
            "\n\t           14 T molina st purok 6-B "+
            "\n\t              Alabang Muntinlupa City  "+
            "\nOperator: Micko Mendoza"+
            "\n\t----------------------------------------------------------------"+
            "\n\n\t   "+order+"\nTotal "+ptotal+
"\nCash "+pay+
"\nChange "+change+
            "\n----------------------------------------------------------------"+
            "\n\n \t            Thanks For buying!!!!!"+
                            "\n\t  This Serve as an official reciept DTSN:41D983"+
            "\n     \t       For Delivery Dial (519-6936)"+
            "\n    \t               Feedbacks"+
            "\n  \t             micko.mendoza@yahoo.com"
);
                                    y=0;
                                    z=0;
                                    x=1;
                                    gtotal = gtotal+ptotal;
                                    trans++;
                                    order="";
                                    transaction = transaction+"Transaction "+ trans+ " "+ptotal+"\n";//No of transactions
                                    ptotal = 0;
                                    do{
                                        con=Integer.parseInt(JOptionPane.showInputDialog("Next Customer?\n[1] Yes\n[0] No"));
                                        if(con==1)
                                            break;
                                        else if(con==0)
                                        {
                                            JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                                            System.exit(0);
                                        }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                        continue;
                    }

                }while(con==1);
                                    break;
                                }
                            else
                                {
                                    JOptionPane.showMessageDialog(null,"Kulang pera mo");

                                    continue;
                                }
                            }while(z==1);//do3

                    }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Intiger lang pwede","Continue",JOptionPane.ERROR_MESSAGE);
                        y=1;
                        continue;
                    }
                }   while(y==1);//do2

            //    break;

        switch(food)
            {
                case 11:
                    price = 20;
                    bibilhin= " Lemonade";
                    break;
                case 12:
                    price = 20;
                    bibilhin= "Coca Cola ";
                    break;
                case 13:
                    price =820;
                    bibilhin = "Sprite";
                    break;
                case 14:
                    price =205;
                    bibilhin= "Mountain dew";
                    break;
                case 15:
                    price =20;
                    bibilhin= "Pepsi";
                    break;
                case 16:
                    price =25;
                    bibilhin= "Cofee ";
                    break;
                case 17:
                    price =25;
                    bibilhin= "Hot Choco";
                    break;
                case 18:
                    price = 20;
                    bibilhin= "Nestie Ice tea";
                    break;
                case 19:
                    JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                    JOptionPane.showMessageDialog(null,"You are about to exit!","Exit",JOptionPane.WARNING_MESSAGE);
                    do{
                        con=Integer.parseInt(JOptionPane.showInputDialog("Are you sure you want to exit?\n[1] Yes\n[0] No"));
                        if(con==1)
                            System.exit(0);
                        else if(con==1)
                        {
                            JOptionPane.showMessageDialog(null,"THANK YOU!\nGood Bye!","Exit",JOptionPane.ERROR_MESSAGE);
                            break;

                        }
                        else
                        {
                            JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                            con=1;
                        }

                       }while(con==1);
                       continue;
                default:
                    JOptionPane.showMessageDialog(null,"Invalid Choice!","ERROR",JOptionPane.ERROR_MESSAGE);
}

            do{//do1

            qty = Integer.parseInt(JOptionPane.showInputDialog("Quantity:"));

            if (qty>0)
                break;
            else
            {
                JOptionPane.showMessageDialog(null,"Invalid Input!","Error",JOptionPane.ERROR_MESSAGE);
                continue;
            }
            }while(q==1);//end do1

            total = price * qty;
            ptotal = ptotal+total;
            order = order +bibilhin+"                 "+qty+"                  "+price+"="+total+"\n";

            do  {//do2
            con = Integer.parseInt(JOptionPane.showInputDialog("Continue?[1] yes [0] no"));
                    if(con==1)
                    {

                        break;
                    }
                    else if(con==0)
                    {

                        do{
pay = Integer.parseInt(JOptionPane.showInputDialog(order+"Total " +ptotal+"\nEnter Payment:"));
if(pay>=ptotal)
                                {

change = pay-ptotal;
JOptionPane.showMessageDialog(null,"  \t                    Mang Inasal"+
                "\n\t           14 T molina st purok 6-B "+
            "\n\t              Alabang Muntinlupa City  "+
            "\nOperator: Micko Mendoza"+
            "\n\t----------------------------------------------------------------"+
            "\n\n\t   "+order+"\nTotal "+ptotal+
"\nCash "+pay+
"\nChange "+change+
            "\n----------------------------------------------------------------"+
            "\n\n \t            Thanks For buying!!!!!"+
                            "\n\t  This Serve as an official reciept DTSN:41D983"+
            "\n     \t       For Delivery Dial (519-6936)"+
            "\n    \t               Feedbacks"+
            "\n  \t             micko.mendoza@yahoo.com"
    );
                                    y=0;
                                    z=0;
                                    x=1;
                                    gtotal = gtotal+ptotal;
                                    trans++;
                                    order="";
                                    transaction = transaction+"Transaction "+ trans+ " "+ptotal+"\n";//No of transactions
                                    ptotal = 0;
                                    do{
                                        con=Integer.parseInt(JOptionPane.showInputDialog("Next Customer?\n[1] Yes\n[0] No"));
                                        if(con==1)
                                            break;
                                        else if(con==0)
                                        {
                                            JOptionPane.showMessageDialog(null,transaction+"Total sales: " + gtotal,"Transactions",JOptionPane.INFORMATION_MESSAGE);
                                            System.exit(0);
                                        }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Invalid Choice!","Error",JOptionPane.ERROR_MESSAGE);
                        continue;
                    }

                }while(con==1);
                                    break;
                                }
                            else
                                {
                                    JOptionPane.showMessageDialog(null,"Kulang pera mo");

                                    continue;
                                }
                            }while(z==1);//do3

                    }
                    else
                    {
                        JOptionPane.showMessageDialog(null,"Intiger lang pwede","Continue",JOptionPane.ERROR_MESSAGE);
                        y=1;
                        continue;
                    }
                }   while(y==1);//do2

                continue;

}   
}
} 
```

# django - django sorl-thumbnail json

> ID：15527066
> 
> 赞同：2
> 
> 时间：2013-03-20T14:55:25.813
> 
> 标签：django, json, sorl-thumbnail

我正在使用 Sorl-Thumbnail 通过模板标签在页面内生成缩略图。这一切都很好。

但是，我现在已经向该站点添加了一个商店定位器功能，该功能通过 JSON 输入到我的 Google Maps JS 中。

在信息窗口弹出窗口中，我想放一个店面的小图像。所以我需要创建另一个大小的缩略图，并且我需要在我的 JSON 中包含这个 URL。

最初 Sorl 似乎不支持这一点，因为它需要在页面中使用标签。

我查看了低级 API 版本“get_thumbnail”，并尝试在我的模型中实现这一点，但到目前为止没有太多运气。

我的 JSON 和序列化没有问题，只是在此之前生成缩略图并将其放入模型中。

以前有没有人有过这种情况的经验？

干杯凯夫

# python - 多用户 IPython 身份验证/安全性

> ID：15527069
> 
> 赞同：3
> 
> 时间：2013-03-20T14:55:31.413
> 
> 标签：python, ipython

我正在尝试设置一个 IPython 笔记本集群，托管在 Interwebz 的某个地方，供我、一些同事和我的一个孩子使用，每个人都有自己的笔记本。但是，鉴于 IPython 在主机中执行 python 命令，我只想允许某些人访问它。有没有办法让这种设置需要某种身份验证，而无需安装或设置 apache 或其他框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:34:30.500

[2015 年 2 月编辑]

运行多用户 IPython notebook 的相关项目是使用[JupyterHub](https://github.com/jupyter/jupyterhub)（注：IPython 已部分重命名为 Jupyter）。JupyterHub 具有可插入的架构，可处理各种身份验证、进程的远程生成以及用户重定向。

* * *

[这部分不再相关]

尚未在 IPython 中烘焙（尚未），是在未来 2 年的路线图中。您可以为每个用户启动一个笔记本实例（但您不共享笔记本），每个实例都在不同的端口上。你可以看一下[IPython-Hydra](https://github.com/cni/ipython-hydra)，它或多或少是自动完成的。如果您有多个端口的问题，您可以使用前缀和[ipython 笔记本代理](https://npmjs.org/package/ipython-notebook-proxy)托管多个笔记本服务器我还没有时间让它支持 https，但如果您将它托管在公共 ip 上，建议您这样做。

# for-loop - WMIC命令在批处理文件的for循环中不起作用

> ID：15527071
> 
> 赞同：1
> 
> 时间：2013-03-20T14:55:35.090
> 
> 标签：for-loop, batch-file, wmi, wmi-query, wmic

我有一个正在尝试运行的批处理文件，但我不断收到错误消息。我认为这个问题类似于[I can't get the right syntax to use WMIC in batch file](https://stackoverflow.com/questions/14249147/i-cant-get-the-right-syntax-to-use-wmic-in-batch-file?answertab=votes#tab-top)，但 dbenham 的答案在我的情况下并不完全有效，因为我正在使用 findstr。这是批处理文件的一部分（它挂在上面的部分）：

for /F %%I in ('wmic nic where 'Manufacturer!="Microsoft" and Macaddress IS NOT NULL' get index ^| findstr /r [0-9]') do (echo %%I)

如果您从 cmd 或它自己的批处理文件行运行 wmic 命令，它就可以正常工作，但我无法让它在 for 循环中运行。有谁可以帮我离开这里吗？

谢谢，约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T14:59:36.083

试试这种方式：

```
for /f "tokens=2 delims==" %%I in (
    'wmic nic where "manufacturer!=\"Microsoft\" and macaddress is not null" get macaddress /format:list 2^>NUL'
) do echo %%I 
```

您必须在嵌套引号的地方用反斜杠转义引用的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T17:10:06.623

WMIC 中有一个功能，它有时会等待用户输入。

如果你更换

```
wmic 
```

在你的例子中，与

```
echo. ^| wmic 
```

它将允许命令完成

# rest - 用于过滤嵌套集合的 RESTful URI

> ID：15527080
> 
> 赞同：3
> 
> 时间：2013-03-20T14:56:11.450
> 
> 标签：rest

我正在寻找一种为资源形成 URI 的好方法，该资源可以过滤记录中包含的值集合。例如，假设您有一个食谱数据库，并且您想要搜索包含“樱桃”的食谱（显然大多数食谱都包含多种成分）。

如果我只想过滤单个值，我可以执行类似于以下的操作：

```
/recipe/search/?name=Spaghetti 
```

但是过滤多个值呢？我正在考虑以下内容：

```
/recipe/search/?ingredients=contains=cherry 
```

对此有什么想法吗？这种过滤器有“标准”吗？

**更新：**我的想法的一个问题是它在后端处理的方式（在我的情况下是 Rails）。当使用这种特定格式查询服务器时，Rails 会生成一个 Ruby 哈希，它可能会变得像下面这样丑陋：

```
{"ingredients"=>"contains=cherry",
"action"=>"search",
"controller"=>"recipe"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T15:49:24.267

## 你的 URI

首先，与其他答案相比，我将从一个`REST`角度开始，然后找到适当的补充。我不擅长 Ruby，所以请忍受后端没有代码。

1.  Recipies 是您要向
    用户展示的实体`/recipies`
2.  HTTP 有用于过滤的 QUERYS
    想要按日期对这些收件人进行排序吗？采用`/recipies/?sortby=date&sort=asc`
3.  只有樱桃食谱类似：`/recipies/?ingredients=cherry`

这就是构建基本 URL 的 REST 方式。
对于多场比赛，没有官方方法可以做到这一点，但我会关注 user1758003。这是 url 的直观构造，在后端很容易解析，所以我们有`/recipies/?ingredients=cherry,chocolate`

不要忘记`/recipies/search`它是不平静的，因为它反映`recipies`并且不代表一个独立的实体。但是，它是为您网站的访问者托管搜索表单的好地方。

现在第一个问题中包含一些其他问题，让我一一解决：

### 我有一个使用这个 api 的网站，搜索表单应该是什么样子？

为您的访问者提供一个`/recipie/search`页面或快速过滤的可能性`/recipies`。只需设置`<form action="/recipies" type="GET">`. 浏览器会将所有参数添加为 Query 字符串之后`/recipies`。

### 高级功能

一个请求`/recipies`应该列出所有。如果您添加查询，则必须遵守查询的每个参数。所以`/recipies/?ingredients=cheese`必须只返回俗气的食谱。对于乘法查询参数值，没有固定的标准，但我希望服务直观。
我读`GET /recipies/?ingredients=cherry,chocolate`为`Get me the recipies which have ingredients of cherry and chocolate`. 要获取包含樱桃或巧克力的食谱列表，我想编写这样的 URI `/recipies/?ingredients=cherry|chocolate`，这使得它在视觉上与逗号非常不同，并且在编程上下文中具有预定义的含义 (OR)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T22:51:15.163

我不熟悉 ruby​​ 哈希的细节，但我猜哈希是为了在 http 和数据访问级别唯一标识查询而创建的？

无论如何，如果您希望在查询参数中使用 json，则要小心 URL 编码。要记住的另一件事是“搜索”一词可能被认为是重复的。如果您的服务器正在使用 GET 方法访问并且您有条件，那么希望您不会修改后端的任何状态。不是你的问题，只是想我会提到它。

所以...

```
https://yourserver.com/approot/recipe/search?ingredients=cherry,cheese&type=cake 
```

HTTP 没有将逗号定义为查询字符串分隔符，因此您的框架应该能够解析 2 个查询字符串参数：

成分：“樱桃，奶酪”

您应该能够使用 split 或 ruby​​ 提供的任何等效函数轻松地将其转换为数组。

和

类型：“蛋糕”（添加了额外的查询词来说明一个观点，因为樱桃芝士蛋糕很棒而且蛋糕不是一种成分）

如果我正确理解你的例子，你最终会得到：

```
{
"ingredients"=>"cherry,cheese",
"type"=>"cake",
"action"=>"search",
"controller"=>"recipe"
} 
```

这就是你要找的东西吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-26T05:59:51.023

大多数 REST Web 服务仅使用 JSON 数据。因此使用 JSON 格式，它将仅返回单个字符串值。通过这种 JSON 格式，您也可以发送数组值。

对于数组值意味着您将该数组转换为 JSON 格式，如下所示

来自 php：

```
$ingredients = array('contains'=>array('fruits'=>'cherry,apple','vitamins'=>'a,d,e,k'));
$ingredients_json = json_encode($ingredients);
echo $ingredients_json; 
```

它将返回 json 格式，如下所示：

```
 {"contains":{"fruits":"cherry,apple","vitamins":"a,d,e,k"}} 
```

你可以在 url 中使用这个 JSON 字符串

```
/recipe/search/?ingredients={"contains":{"fruits":"cherry,apple","vitamins":"a,d,e,k"}} 
```

在服务器端，我们可以选择将此 JSON 格式值解码为数组。

```
{"ingredients"=>"{\"contains\":{\"fruits\":\"cherry,apple\",\"vitamins\":\"a,d,e,k\"}}",
"action"=>"search",
"controller"=>"recipe"} 
```

# java - 删除 try/catch 异常

> ID：15527086
> 
> 赞同：0
> 
> 时间：2013-03-20T14:56:20.983
> 
> 标签：java, exception, try-catch, sudoku

我正在研究数独求解器，并且求解方法给出了一个错误，我已经通过 try and catch 异常暂时“解决”了该错误。

但是，我有点担心自己会被`ArrayIndexOutOfBoundsException`. 我只是想修复错误而不是将其隐藏在 try/catch 异常中。

这是 try/catch 的样子：

```
 try {
        if (puzzle.getNum(i, j) != puzzle.blank)
            return solve(nexti, nextj);
    } catch (ArrayIndexOutOfBoundsException e) {
        return true;
    } 
```

我在想，因为我已经得到了信息，当`x > 8`是时候改变行了，这导致`y++`. 当 时`y > 8`，程序应该完成，因为所有 81 (9x9) 个单元格都已填满。

我正在考虑将 try/catch 方法更改为一个简单的方法

```
if((i > 8) && (j > 8)){
        return true;
} 
```

但这也给了我一堆错误。

我确信修复非常简单，但在概念上很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:20:49.050

我会在方法的开头添加这个检查：

```
if( i >= puzzle.puzzleSize || j >= puzzle.puzzleSize )
{
    return false;
} 
```

如果您在任一方向都超出了拼图板的范围，那么您显然还没有找到解决方案，因此您返回 false。您对 nexti 和 nextj 的计算可以在此检查之后进行，因为下一个递归调用将处理它们超出范围的情况。

您可能会说“好吧，我的 nextj 计算使用模数，所以它永远不会超出范围。” 确实如此，但您也不能保证将使用正确的参数调用该方法，因此值得检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:02:39.190

由于您使用的是递归方法，因此您应该将“结束条件”作为第一行代码。

添加

```
if((i > 8) && (j > 8)){
      return true;
} 
```

在您的方法开始时应该可以解决问题（如果您确定在 j < 8 时从不发送 i=9）。执行此操作时遇到的其他错误是什么？

# yii - cjuidialog 中的裁剪

> ID：15527088
> 
> 赞同：0
> 
> 时间：2013-03-20T14:56:29.383
> 
> 标签：yii, image, crop, cjuidialog

我需要使用裁剪图片进行上传，但我找不到操作扩展 eajaxupload 的信息，cjuidialog 里面的椰子

yii的任何扩展？

就像是：

[http://uvumitools.com/crop.html](http://uvumitools.com/crop.html)

[http://kroppr.rborn.info/index.php](http://kroppr.rborn.info/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:00:27.420

是的，肯定有一个 yii 扩展，你可以使用[http://www.yiiframework.com/extension/image](http://www.yiiframework.com/extension/image)，它是 Kohana 图像模块的包装器。可用的图像处理方法是调整大小、裁剪、锐化、质量和旋转或翻动。

但是你也可以找到像[http://wideimage.sourceforge.net/](http://wideimage.sourceforge.net/)这样的独立 php 库，它与 yii 配合得很好

# c# - 从 linq 在新对象中创建新属性

> ID：15527089
> 
> 赞同：2
> 
> 时间：2013-03-20T14:56:34.310
> 
> 标签：c#, .net, linq

所以我正在做一个 linq-to-sql 查询，结果以 IEnumerable 的形式出现。从这个列表中，我为每个返回的结果创建一个新对象。我已经使用的存储过程正在按我想要的顺序返回对象。我们有一个排行榜，查询后结果按降序排列。我遇到问题的部分是我想将排名添加到新对象的新属性中。

说我有这个代码

```
 var usersSummary = Context.[myStoredProcedure]
            return usersSummary.Select(x => new [myObject]
            {
                UserId = x.UserID,
                FirstName = x.FirstName,
                LastName = x.LastName,
                TotalPoints = x.TotalPoints,
                LeaderBoardRank = //this part here
                Email = x.Email,
                CreatedDate = x.CreatedDate
            }).OrderByDescending(x => x.TotalPoints).ToList(); 
```

我想`LeaderBoardRank`成为他们的排名。它们已经按排名顺序排序，因此第一个对象将是 1 ，接下来是 2 ，依此类推。由于这不是一个正常的 c# 循环，我不太确定如何用排名填充这个属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:01:25.033

`Select`作为可以使用的索引的重载。

```
 var usersSummary = Context.[myStoredProcedure]
        return usersSummary.Select((x, i) => new [myObject]
        {
            UserId = x.UserID,
            FirstName = x.FirstName,
            LastName = x.LastName,
            TotalPoints = x.TotalPoints,
            LeaderBoardRank = i
            Email = x.Email,
            CreatedDate = x.CreatedDate
        }).OrderByDescending(x => x.TotalPoints).ToList(); 
```

您正在创建的对象是否已经是您列表中的对象？在这种情况下，您不必创建新对象，只需将值分配给现有对象：

```
 var usersSummary = Context.[myStoredProcedure]
        return usersSummary.Select((x, i) => 
            {
                x.LeaderBoardRank = i;
                return x;
            }).OrderByDescending(x => x.TotalPoints).ToList(); 
```

此外，如果您的清单已经订购，则无需再次订购。您的 select 语句不会更改顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:16:33.683

如果通过“新属性”你的意思是`LeaderBoardRank`id 不是`myObject`然后没有的属性，你不能这样做。您要么需要定义另一个类（可能是 extends `MyObject`），要么使用带有附加属性或两个属性（等级和对象）的匿名类型。

如果*已经*`LeaderBoardRank`是一个属性并且你想添加排序结果的排名，你可以这样做：

 *```
var usersSummary = Context.[myStoredProcedure];

return usersSummary.OrderByDescending(x => x.TotalPoints)
                   .Select((x, i) => new [myObject]
{
    UserId = x.UserID,
    FirstName = x.FirstName,
    LastName = x.LastName,
    TotalPoints = x.TotalPoints,
    LeaderBoardRank = i
    Email = x.Email,
    CreatedDate = x.CreatedDate
}).ToList(); 
```

Note that this does NOT account for ties - meaning if two users have the same total points they will not have the same rank.*

# c# - using语句中的TransactionScope在哪里完成？

> ID：15527090
> 
> 赞同：4
> 
> 时间：2013-03-20T14:56:35.440
> 
> 标签：c#, dispose

我在 TransactionScope 中使用两个 SQLConnection 这个（伪）代码是否正确？

```
using (TransactionScope ts= new TransactionScope(TransactionScopeOption.RequiresNew))
  {
     using (SqlConnection connection1 = new SqlConnection(ConnectionString1))
       {
         (...)
       }

     using (SqlConnection connection2 = new SqlConnection(ConnectionString2))
        {
           (...)
        }

     ts.Complete();
   } 
```

还是我应该使用这个？

```
using (TransactionScope ts= new TransactionScope(TransactionScopeOption.RequiresNew))
  {
     using (SqlConnection connection1 = new SqlConnection(ConnectionString1))
       {
         (...)
         using (SqlConnection connection2 = new SqlConnection(ConnectionString2))
          {
             (...)
             ts.Complete();
          }
       }
   } 
```

第一个代码更好，因为它允许我在方法中提取命令。但是我担心的是，在这种情况下，连接是在范围完成之前被处理的，对 TransactionScope 的登记是否足以防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:01:31.570

在您的第一个示例中，两个连接都在调用 ts.Complete() 之前处理，这不是问题，因为 ts.Complete() 方法不使用连接：

*   两个连接都在此方法中本地声明，并且超出任何其他方法的范围
*   连接不会传递给 ts.Complete() 方法以将它们带入范围

在您的第二个示例中，当两个连接仍然存在时调用 ts.Complete() 方法，但是，它们没有传递给该方法，因此不能使用。

这意味着这两种方法都将同样有效，并且在调用 ts.Complete() 之前是否处理连接无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:21:55.980

`Complete`嵌套连接处理后调用完全没有问题。事务的生命周期故意大于 SQL 连接的生命周期，并且您可以继续与它进行交互，而不受任何其他连接的生命周期的影响。

所以是的，在您的第一个示例中，您`Complete`在连接处理后调用，*这很好*。

您可以根据[Transaction Scope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)文档中的示例以及[this page on how to use transaction scopes](http://msdn.microsoft.com/en-us/library/ms172152.aspx)看到，在连接被释放后可以完成事务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:00:35.350

在 MSDN 网站上看起来第二个是要使用的...

[http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)（见第一个例子）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:01:01.620

还有第三种可能：

```
using (TransactionScope ts= new TransactionScope(TransactionScopeOption.RequiresNew))
using (SqlConnection connection1 = new SqlConnection(ConnectionString1))
using (SqlConnection connection2 = new SqlConnection(ConnectionString2))
{
    // ...
    ts.Complete()
} 
```

# ruby-on-rails - 如何安装 json gem - 无法构建 gem 原生扩展

> ID：15527092
> 
> 赞同：2
> 
> 时间：2013-03-20T14:56:39.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, gem, bundler, ruby-enterprise-edition

我正在尝试将 rails 应用程序部署到我的 ubuntu linux 服务器。我正在使用 capistrano 和 bundler，当它安装 gems 时失败并出现以下错误：

```
Installing json (1.7.7) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /opt/ruby-enterprise-1.8.7-2012.02/bin/ruby extconf.rb 
creating Makefile

make
/usr/bin/gcc  -I. -I/opt/local/include -I/opt/ruby-enterprise-1.8.7- 2012.02/lib/ruby/1.8/i686-linux -I/opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/1.8/i686-linux -I. -D_FILE_OFFSET_BITS=64  -fPIC -g -O3   -Wall  -c parser.c
In file included from /usr/include/i386-linux-gnu/bits/posix1_lim.h:157:0,
             from /usr/include/limits.h:145,
             from /usr/lib/gcc/i686-linux-gnu/4.6/include-fixed/limits.h:169,
             from /usr/lib/gcc/i686-linux-gnu/4.6/include-fixed/syslimits.h:7,
             from /usr/lib/gcc/i686-linux-gnu/4.6/include-fixed/limits.h:34,
             from /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/1.8/i686-linux/ruby.h:95,
             from ../fbuffer/fbuffer.h:6,
             from parser.rl:1:
/usr/include/i386-linux-gnu/bits/local_lim.h:39:26: fatal error: linux/limits.h: No such file or directory
compilation terminated.
make: *** [parser.o] Error 1 
```

我正在运行 ruby​​ 企业版 1.8.7，如果没有大量工作升级其他站点就无法升级 ruby​​，所以现在这不是一个选项。我尝试了 apt-get install ruby​​-dev 但它没有帮助（我不确定这是不是正确的事情）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:26:02.737

我认为您需要安装以下软件包之一：

```
$ apt-file search limits.h | grep 'linux/limits.h'
linux-headers-2.6.32-5-common: /usr/src/linux-headers-2.6.32-5-common/include/linux/limits.h
linux-headers-2.6.32-5-common-openvz: /usr/src/linux-headers-2.6.32-5-common-openvz/include/linux/limits.h
linux-headers-2.6.32-5-common-vserver: /usr/src/linux-headers-2.6.32-5-common-vserver/include/linux/limits.h
linux-headers-2.6.32-5-common-xen: /usr/src/linux-headers-2.6.32-5-common-xen/include/linux/limits.h
linux-libc-dev: /usr/include/linux/limits.h 
```

# google-chrome - 扩展如何获取chrome pdf查看器中选择的文本？

> ID：15527095
> 
> 赞同：14
> 
> 时间：2013-03-20T14:56:50.123
> 
> 标签：google-chrome, google-chrome-extension, pdf-viewer

我写了一个 chrome 扩展 -[英语词典](https://chrome.google.com/webstore/detail/%E4%B8%81%E9%A6%99%E5%9B%AD%E5%8C%BB%E5%AD%A6%E8%8B%B1%E6%B1%89%E8%AF%8D%E5%85%B8/nklebbnebnlkkacogellhhbmifmekllg)。您选择单词，就会出现定义。

它运作良好，但我反驳了一个问题。谷歌似乎没有提供 chrome pdf 查看器的 api。

当我使用 chrome pdf 查看器在 pdf 中选择一个单词时，如何获取该单词？

如果你能帮助我，我将不胜感激。

![在此处输入图像描述](../Images/8fbd7bc1b4f10890e6c25d99b4c464db.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-28T16:59:17.487

[您可以使用上下文菜单](https://developer.chrome.com/extensions/contextMenus)获取选定的文本。在您的后台脚本中，添加这些行将允许用户右键单击并使用 selectionText 执行某些操作。

```
chrome.contextMenus.create({id:"lookup",title:"Lookup %s",contexts:["selection"]});
chrome.contextMenus.onClicked.addListener(function(sel){
       console.log(sel.selectionText);
}); 
```

抓取此文本适用于 PDF，无论是否是扩展的一部分。

但是，您不能将脚本注入以“chrome-extension://”开头的页面。如果这是您的扩展程序的工作方式，那将是（直接）不可能的。但是获取选定的文本并对其进行处理仍然非常可行。

作为需要脚本注入的替代方法，请参阅[通知 api](https://developer.chrome.com/apps/notifications)，它允许弹出一条小消息，其中可能包含单词的定义。

# node.js - 如何使用 node-http-proxy 启用 HSTS？

> ID：15527099
> 
> 赞同：5
> 
> 时间：2013-03-20T14:57:19.730
> 
> 标签：node.js, https, node-http-proxy

在 node.js 0.8 下，我在“路由器表”模式下使用 node-http-proxy，配置如下：

```
var httpProxy = require("http-proxy");
var config = require("./config");

proxyServer = httpProxy.createServer({
    hostnameOnly: true,
    router: {
        "one.example.com": "localhost:9000",
        "two.example.com": "localhost:9001"
    },
    https: {
        key: config.key,
        cert: config.cert,
        // mitigate BEAST: https://community.qualys.com/blogs/securitylabs/2011/10/17/mitigating-the-beast-attack-on-tls
        honorCipherOrder: true,
        ciphers: "ECDHE-RSA-AES128-SHA256:AES128-GCM-SHA256:RC4:HIGH:!MD5:!aNULL:!EDH"
    }
})
proxyServer.listen(8000) 
```

我想添加[HSTS](https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security)（HTTP 严格传输安全），以便兼容的浏览器被告知始终使用 SSL。为此，我需要获取 http-proxy 以添加标头：

```
Strict-Transport-Security: max-age=60000 
```

（或其他最大年龄）。如何让 node-http-proxy 有效地附加此标头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-27T04:54:44.587

对于您的示例，我不确定这个较旧的问题似乎正在使用`http-proxy@0.8`. 但是，这是我所做的`http-proxy@1.0.0`：

```
var httpProxy = require('http-proxy');

// https server to decrypt TLS traffic and direct to a normal HTTP backend
var proxy = httpProxy.createProxyServer({
  target: {
    host: 'localhost',
    port: 9009 // or whatever port your local http proxy listens on
  },
  ssl: {
    key: fs.readFileSync('valid-ssl-key.pem', 'utf8'),
    cert: fs.readFileSync('valid-ssl-cert.pem', 'utf8')
  }
}).listen(443); // HTTPS listener for the real server

// http server that redirects all requests to their corresponding
// https urls, and allows standards-compliant HTTP clients to 
// prevent future insecure requests.
var server = http.createServer(function(req, res) {
  res.statusCode = 301;
  res.setHeader('Location', 'https://' + req.headers.host.split(':')[0] + req.url);
  res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');
  return res.end();
});

server.listen(80); // HTTP listener for the old HTTP clients 
```

# java - 删除混淆名称（Minecraft）的最有效方法是什么？

> ID：15527100
> 
> 赞同：0
> 
> 时间：2013-03-20T14:57:20.360
> 
> 标签：java, lua, minecraft

我为 Minecraft 制作了一个允许 Lua 修改的 mod。一切正常，但通常方法的名称在 MC 中被混淆了。使普通函数名称重定向到混淆名称的最佳方法是什么？

例如，用户为一个在右键单击时打印 hello world 的块编写脚本：

`function onActivated(world, x, y, z, player) player:addChatMessage("hello world") end`

addChatMessage 应该调用 Java 方法 EntityPlayer.func_71035_c(String text)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:58:13.077

```
-- translation file (translation.txt)
func_70912_b,setTameSkin,2,
func_70913_u,getTameSkin,2,
func_70915_j,getShadingWhileShaking,2,Used when calculating the amount of shading to apply while the wolf is shaking.
func_70916_h,setAngry,2,Sets whether this wolf is angry.

-- obfuscated program (script.lua)
x:func_70913_u(y, z)
x:func_70915_j(y, z)

-- your preprocessor (preprocessor.lua)
local transl = {}
for line in io.lines'translation.txt' do
   local obf, orig = line:match'^(.-),(.-),'
   transl[obf] = orig
end
local script = assert(io.open('script.lua','rb')):read'*a'
local output = assert(io.open('script2.lua','wb'))
output:write((script:gsub('[%w_]+',transl)))
output:close()

-- preprocessor output (script2.lua)
x:getTameSkin(y, z)
x:getShadingWhileShaking(y, z) 
```

* * *

**编辑 ：**

```
local obfuscations = {}
for line in io.lines'translation.txt' do
   local obf, orig = line:match'^(.-),(.-),'
   obfuscations[orig] = obf
end

local function get_obf_key_value(t, k, __index)
   local value = __index and __index(t, k)
   if value == nil and obfuscations[k] then
      value = t[obfuscations[k]]
   end
   return value
end

local cache = {get_obf_key_value = true}

local function __index_constructor(__index)
   if not __index then
      return get_obf_key_value
   end
   local old__index = cache[__index]
   if old__index then
      return old__index == true and __index or old__index
   else
      local function new__index(t, k)
         return get_obf_key_value(t, k, __index)
      end
      cache[__index] = new__index
      cache[new__index] = true
      return new__index
   end
end

local obf_mt = {__index = get_obf_key_value}

local function correct_metatable(object)
   local mt = getmetatable(object)
   if mt == nil then
      setmetatable(object, obf_mt)
   else
      local __index = mt.__index
      if __index == nil or type(__index) == 'function' then
          mt.__index = __index_constructor(__index)
      else
         correct_metatable(__index)
      end
   end
end

-- you should call correct_metatable(class_or_object_of_that_class)
-- at least once for every class
correct_metatable(wolf)
correct_metatable(goat)
correct_metatable(cabbage)
... 
```

# block - 如何找到哪个块显示内容？

> ID：15527101
> 
> 赞同：2
> 
> 时间：2013-03-20T14:57:21.593
> 
> 标签：block, prestashop

我必须用 PrestaShop 修改别人制作的网站。我只是在学习如何使用那个东西......

头版上显示了一个我无法识别的块，正是我必须修改的块（呃！）。有没有一种简单的方法可以知道它是哪一个以及`.tpl`我必须打开什么才能更改代码？

# sql - 根据行是否已存在选择性地插入行

> ID：15527102
> 
> 赞同：0
> 
> 时间：2013-03-20T14:57:22.573
> 
> 标签：sql, sql-server

我目前有一个包含数千个条目的表。我找到了一种为系统中的所有条目插入新数据行的方法（请参见下面的示例），但不幸的是，我刚刚发现某些条目中已经存在值。我试图弄清楚如何根据行是否已经存在来有选择地运行 INSERT INTO 函数。

```
Column 1   Column 2   Column 3 
10         Address    True 
10         City       False
10         State      True
20         Address    True
20         City       True
20         State      True
20         NEW        NEW*

Column 1   Column 2   Column 3
10         Address    True
10         City       False
10         State      True
10         NEW        NEW
20         Address    True
20         City       True
20         State      True
20         NEW        NEW 
```

我用于插入的代码是：

```
insert into table-name(Column1, Column2, Column3)
  select 
     Column1, 'NEW', 'NEW*' 
  from 
     table-name 
  group by 
     Column1 
```

我假设我需要使用一个`IF/ELSE`声明，但我在声明中遇到了问题`IF`。目前，我正在使用以下代码：

```
IF Column 2 like 'New' leave NULL
ELSE 
  insert into table-name(Column1, Column2, Column3)
     select 
         Column1, 'NEW', 'NEW*' 
     from table-name 
     group by Column1 
```

我知道 IF 语句是错误的，但试图弄清楚如果它们已经被填充，如何使现有的行值保持不变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:01:21.560

您可以使用 INSERT IGNORE INTO 或 INSERT ... ON DUPLICATE KEY UPDATE 语法

见[http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html](http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html) 和 dev.mysql.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:02:35.657

我认为您想要的是带有“ON DUPLICATE KEY”的“INSERT INTO”。

见： [http ://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:08:16.110

对于 SQL Server，使用 CTE 定义要插入的数据集：

```
WITH NonDupes (<your fieldlist>)
AS
(SELECT <your fieldlist> FROM <your tables> WHERE <tablea>.<column> NOT IN (SELECT <column> FROM <tableb>))
INSERT INTO
<tableb>
VALUES(SELECT * FROM NonDupes) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:09:09.933

使用 SQL Server，您可以执行 NOT EXISTS

```
insert into table-name(Column1, Column2, Column3)
  select 
     Column1, 'NEW', 'NEW*' 
  from 
     table-name 
     WHERE NOT EXISTS (SELECT 1 FROM table-name xref WHERE xref.Column1 = table-name.Column1 AND xref.Column2 = 'NEW')
  group by 
     Column1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:41:39.860

您可以使用 Merge 语句仅插入不存在的行。作为额外的奖励，如果需要，您可以更新同一语句中的现有行。

[http://msdn.microsoft.com/en-us/library/bb510625.aspx](http://msdn.microsoft.com/en-us/library/bb510625.aspx)

# apache-flex - 隐藏分组列的子标题 - nestedTreeDataGrid

> ID：15527104
> 
> 赞同：1
> 
> 时间：2013-03-20T14:57:24.977
> 
> 标签：apache-flex, flexicious

我有一个带有两个列组的嵌套树数据网格。我希望隐藏该组中孩子的标题单元格。我希望网格只有一个标题行，而不是每个子级别的默认标题行。我怎样才能完成这项任务？

```
<nestedtreedatagrid:FlexDataGridColumnGroup headerText="header">
    <nestedtreedatagrid:columns>
        <nestedtreedatagrid:FlexDataGridColumn dataField="child1" columnWidthMode="fitToContent" >
        </nestedtreedatagrid:FlexDataGridColumn>
        <nestedtreedatagrid:FlexDataGridColumn dataField="child2" columnWidthMode="fitToContent" >
        </nestedtreedatagrid:FlexDataGridColumn>
    </nestedtreedatagrid:columns>
</nestedtreedatagrid:FlexDataGridColumnGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:49:00.110

这在当前版本的网格中是不可能的。

# ios - 语音识别和语调检测

> ID：15527107
> 
> 赞同：2
> 
> 时间：2013-03-20T14:57:28.510
> 
> 标签：ios, core-audio, speech-recognition

我想制作一个iOS应用来计算疑问句。我会寻找 WH 问题以及“我会，是吗？” 格式问题。

我不是很了解语音或音频技术，但我做了谷歌，发现语音识别 SDK 很少。但仍然不知道如何检测和绘制语调。是否有任何支持语调或情感语音识别的 SDK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-25T18:44:14.350

AFAIK 没有基于云的语音识别 SDK，它也可以为您提供语调。您可以搜索音高跟踪解决方案并从音高轮廓中得出语调。`librosa`Python 包中提供了一个开源的：

[https://librosa.org/librosa/generated/librosa.core.piptrack.html](https://librosa.org/librosa/generated/librosa.core.piptrack.html)

如果您无法在应用程序中嵌入 Python，则始终可以选择在 REST API 中使用`Flask`或来提供它`fastapi`。

# android - android如何从drawable中的id获取图像

> ID：15527112
> 
> 赞同：-2
> 
> 时间：2013-03-20T14:57:47.187
> 
> 标签：android, android-drawable

这是我的代码：

```
package androboy.unsurkimia;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.ViewGroup.LayoutParams;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

public class Main5Activity extends Activity {

LinearLayout vert;
String data;
ScrollView sv;
FileInputStream fis = null;
BufferedReader freader = null;
TextView tv;
ImageView iv;
Integer gambar;
Intent intent;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_main5);

    sv = new ScrollView(this);
    sv.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
    vert = new LinearLayout(this);
    vert.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
    vert.setOrientation(LinearLayout.VERTICAL);
    sv.addView(vert);

    intent = new Intent();
    tv = new TextView(this);
    iv = new ImageView(this);
    data = getIntent().getExtras().getString("data");

    try
    {
        fis = openFileInput("kimia.txt");

        freader = new BufferedReader(new InputStreamReader(fis));
        String baris = "";
        while((baris =freader.readLine()) != null)
        {
            String u[]=baris.split("#");
            if(u[0].equalsIgnoreCase(data))
            {
                tv.setText(" Simbol : "+u[0]+"\n Nama Unsur : "+u[1]+"\n Kegunaan : "+u[2]+"\n Jenis : "+u[3]+"\n Bahaya : "+u[4]+"\n Gambar bok : "+u[5]);
                gambar = Integer.parseInt(u[5]);
                iv.setImageResource(gambar);
            }
        }
        fis.close();
    }catch (Exception e) {
        // TODO: handle exception
    }
    vert.addView(tv);
    vert.addView(iv);
    this.setContentView(sv);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main5, menu);
    return true;
}

} 
```

这是 kimia.txt 文件：

```
H#Hidrogen#Sebagai bahan hidrogenasi#non logam#Penyalahgunaan bom hidrogen dan meledaknya gas hidrogen yang dikarenakan sifat hidrogen mudah terbakar dan meledak#R.drawable.h1
Li#Litium#Litium digunakan sebagai bahan campuran logam, sintesis senyawa organik dan aplikasi nuklir, bahan anoda pada baterai#Logam Alkali#Lithium menyebabkan luka bakar yang serius, terutama ketika kontak dengan kulit lembab#R.drawable.h2
Na#Natrium#Logam ini dapat di gunakan untuk memperbaiki struktur beberapa campuran logam, dan untuk memurnikan logam cair#Logam Alkali#Konsumsi sejumlah besar natrium dapat menyebabkan tekanan darah tinggi#R.drawable.h3
K#Kalium#Digunakan untuk pupuk#Logam Alkali#Radiasi dari kalium tidak terlalu berbahaya#R.drawable.h4
Rb#Rubidium#Digunakan untuk batery super tipis, sebagai bahan bakar mesin ion untuk pesawat antariksa#Logam Alkali#Apabila bereaksi dengan air dapat menyebabkan kebakaran#R.drawable.h5
Cs#Sesium#Sebagai katalis di hydrogenasi senyawa-senyawa tertentu#Logam Alkali#Unsur ini sedikit beracun  karena merupakan bahan berbahaya sebagai logam dan radioisotop yang menyajikan risiko kesehatan yang tinggi dalam kasus kebocoran radiasi#R.drawable.h6
Fr#Fransium#Digunakan untuk menentukan kadar Aktinum, digunakan untuk mempelajari organ tubuh tikus#R.drawable.h7
Be#Berilium#Berilium juga digunakan sebagai alloying agent dalam produksi tembaga berilium, yang banyak digunakan untuk per, kontak listrik, elektroda las dan alat-alat lainnya yang didesain untuk tidak memancarkan percikan api#Logam Alkali Tanah#Berilium dan garam-garamnya sangat beracun dan harus ditangani secara sangat hati-hati. R.drawable.h8
Mg#Magnesium#Sebagai bahan konstruksi pesawat dan missile, Magnesite digunakan untuk refractory, sebagai batu bata dan lapisan di tungku-tungku pemanas#Logam Alkali Tanah#Kebakaran dapat dengan mudah terjadi, sehingga magnesium harus ditangani secara hati-hati. Terutama jika logam ini dalam keadaan terbelah-belah secara halus#R.drawable.h9
Ca#Calsium#Digunakan sebagai agen pencampur logam aluminium, berilium, tembaga, timbal, dan campuran logam magnesium#Logam Alkali Tanah#Konsumsi kalsium secara berlebihan dapat memicu kanker prostat#R.drawable.h10
Sr#Stronsium#Digunakan untuk bahan dasar produksi gelas kaca dan tabung tv berwarna#Logam Alkali#Dalam bentuk murni strontium sangat reaktif dengan combusts udara dan spontan, karena itu dianggap bahaya kebakaran#R.drawable.h11
Ba#Barium#Digunakan sebagai agen pemberat dalam fluida pengebor sumur minyak dan digunakan dalam pembuatan karet#Logam Alkali Tanah#Apabila dikonsumsi manusia dapat meningkatkan tekanan darah#R.drawable.h12
Ra#Radium#Digunakan dalam memproduksi cat yang menyala dengan sendirinya, digunakan untuk terapi kanker#Logam Alkali Tanah#Radium, jika tertelan, terhirup ataupun terekspos pada tubuh menjadi sangat berbahaya dan dapat menyebabkan kanker#R.drawable.h13 
```

我已将我的图像放在 /res/drawablehdpi 上，并使用与 kimia.txt 相同的 id（h1、h2 等）。现在我的问题是当我运行我的应用程序时如何从可绘制的图像中显示该图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:07:34.127

可绘制文件夹中的每个图像都可以通过其名称访问。不需要身份证。您可以将图像设置为

R.drawable.imagename

图片不需要 id 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:10:38.803

这应该有效：

```
int resID = getResources().getIdentifier("androboy.unsurkimia:drawable/h1", null, null);
iv.setImageResource(resID); 
```

# jquery - 在jquery中设置名称属性随着数量的增加

> ID：15527114
> 
> 赞同：0
> 
> 时间：2013-03-20T14:57:52.130
> 
> 标签：jquery, input, attributes

我在 Jquery 中有以下代码：

```
.find("input").attr('name', + cloneCount++) 
```

我想要的是 name 属性的值具有它的当前值 + 随着 cloneCount var 值的增加。

任何想法我怎么能做到这一点？

================= 更新

谢谢大家的快速回复，但我意识到我没有提供足够的代码：

```
 var cloneCount = 1;
   $(".button").click(function(){

      $('#id')
          .clone()
          .attr('id', 'id'+ cloneCount++)
          .insertAfter($('[id^=id]:last'))
         .find("input").attr('name', parseInt(attr('name')) + cloneCount++)
   }); 
}); 
```

我想要的是，当一个 div 被克隆时，所有输入字段都会为 name 属性获得不同的值。输入的数量是可变的。假设我们有一个带有 name="example" 的输入，克隆版本应该得到 name="example2" 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T14:59:05.507

尝试这个：

```
var myInput = ....find("input");
myInput.attr('name', parseInt(myInput.attr('name')) + cloneCount++) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:00:44.740

的第二个参数`.attr()`可以接受一个函数，该函数可以返回您需要应用于属性的值。

```
.find('input').attr('name', function() {
    return parseInt($(this).attr('name'), 10) + 1;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:02:07.987

对于 (i=0;i<10000000;i++) {

克隆计数++；

.find("input").attr('name',cloneCount)

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:05:18.913

试一试

```
var cloneCount = 1;
$('input').each(function() {
  $(this).attr('name', cloneCount)
  cloneCount ++;
}); 
```

# reporting-services - ssrs 计数错误得到 1 而不是总数

> ID：15527115
> 
> 赞同：0
> 
> 时间：2013-03-20T14:57:53.667
> 
> 标签：reporting-services, count

菜鸟的错误，这里是：我得到了 Regions 和 MembersID，我对区域进行了分组，想统计成员。当我添加 count(MembersID) 而不是获取成员总数时，我得到一堆 1：RegionA 1

```
 1
       1 
```

区域B 1

```
 1 
```

我想要的是：

区域A 3

区域B 2

我做了什么：分组区域和计数[MembersID]

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:52:21.697

在这里很难说出你真正需要什么。

在组标题行中，您可以使用聚合函数，它将查看当前范围内的所有行。

组中不同的 MembersID 计数：`=CountDistinct(Fields!MembersID.Value)`

组中的总行数：`=CountRows()`

在详细行中，这些聚合函数将只报告当前行，因此`=CountRows()`只会返回一个；要获取组中的行数，您需要将函数的范围设置为组级别，例如类似`=CountDistinct(Fields!MembersID.Value, "Group1")`or `=CountRows("Group1")`。

所以基于一个数据集：

![在此处输入图像描述](../Images/8b22c0a749ed36aaea272f65826e20c9.png)

以及在组标题和详细信息行中包含这些聚合函数的报告：

![在此处输入图像描述](../Images/9b6a7d805df28ea03998f9caa4d1e3c6.png)

您可以得到以下结果：

![在此处输入图像描述](../Images/d486717a2a3a809a595d232296411197.png)

如果这还不够，您将需要提供您的数据集详细信息、一些示例数据以及您需要如何呈现这些示例数据。

# cordova - 无法加载网页并出现错误：帧加载中断

> ID：15527120
> 
> 赞同：13
> 
> 时间：2013-03-20T14:58:01.907
> 
> 标签：cordova

我看到之前有人问过这个问题，但我没有看到任何解决方案：

所以我使用 Cordova 2.5 在 iOS 6.1.2 上构建一个 iPad 应用程序

我的 app.coffee：

```
jQuery ->
    class window.AppRouter extends Backbone.Router
        routes: {
            '': 'index',
            ':parent/:child/': 'childView',
            ':id/': 'detailView',
        },

        index: =>
            $("#navbar .title").text("Flight Centre's Choices")
            view = new fc.main.View
            view.render()

        childView: (parent, child) =>
            view = new fc.main.View(parent:parent, child:child)
            view.render()

        detailView: (id) =>
            view = new fc.main.Detail(id:id)
            view.render()

    window.app = new AppRouter();
    Backbone.history.start(); 
```

第一个索引视图加载成功并按原样显示

现在点击其中一个链接让我们说打开 childView，它无法加载页面：

```
2013-03-20 16:56:13.684 Flight[1158:907] Resetting plugins due to page load.
2013-03-20 16:56:13.689 Flight[1158:907] Resetting plugins due to page load.
2013-03-20 16:56:13.694 Flight[1158:907] Failed to load webpage with error: Frame load interrupted 
```

用户点击的链接如下所示：

```
/#/foo/bar/ 
```

在我的 Mac 上的 Chrome 浏览器中一切正常。

我不知道这里发生了什么！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-21T08:28:49.627

该死的这么多时间，答案是如此愚蠢和简单。

而不是将 html 中的链接作为：

```
/#/foo/bar/ 
```

它应该只是

```
#/foo/bar/ 
```

这是有道理的，前导/页面将重新加载，这就是我收到该错误的原因。

希望它可以帮助某人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-14T08:50:28.130

我可以通过使用 window.location.hash 来解决它

# asp.net - 使用gridview时“必须声明标量变量”

> ID：15527121
> 
> 赞同：2
> 
> 时间：2013-03-20T14:58:03.307
> 
> 标签：asp.net, tsql

我在asp.net 的webform 上有两个gridviews，后面有c# 代码。我也有 3 个表：用户、组和用户组。

一个 gridview 包含一个包含两列的组列表：描述和按钮字段。当用户单击此按钮字段时，所选组的成员应显示在第二个网格视图中。

但是，我收到一个错误“每次单击按钮字段时都必须声明标量变量@GruppenID。我在这里缺少什么？抱歉，但我对 asp 和 sql 完全陌生......

# 在职的：

```
<%@ Page Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Gruppenverwaltung.aspx.cs" Inherits="WerIstWo.Gruppenverwaltung" %>

<asp:Content ID="content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <h1>Gruppenverwaltung</h1>
    <asp:Panel ID="pnlGruppe" ScrollBars="Both" runat="server">
        <asp:Button ID="btnNeueGruppe" Text="Neue Gruppe" runat="server" OnClick="btnNeueGruppe_Click" />
        <asp:GridView DataKeyNames="GruppenID" OnRowCommand="grdGruppe_RowCommand" ID="grdGruppe" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1">
            <Columns>
                <asp:BoundField DataField="Bezeichnung" HeaderText="Bezeichnung" SortExpression="Bezeichnung" />
                <asp:TemplateField HeaderText="Mitglieder anzeigen">
                    <ItemTemplate>
                        <asp:Button ID="btnMitgliederAnzeigen" runat="server" Text="Mitglieder anzeigen" CommandName="MitgliederAnzeigen"
                            CommandArgument='<%# Eval("GruppenID") %>' />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:CommandField HeaderText="Archivieren" ButtonType="Button" ShowDeleteButton="true" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource OnSelected="SqlDataSource1_Selected" ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
            SelectCommand="SELECT [Bezeichnung], [GruppenID] FROM [Gruppe] WHERE [Archiviert] != 1"
            DeleteCommand="UPDATE Gruppe SET [Archiviert] = 1 WHERE [GruppenID] = @GruppenID">            
        </asp:SqlDataSource>
        <asp:Button ID="btnZurueck" Text="Zurück" runat="server" OnClick="btnZurueck_Click" />
    </asp:Panel>
    <asp:Panel Visible="false" ID="pnlMitglieder" ScrollBars="Both" runat="server">
        <asp:GridView ID="grdBenutzer" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource2">
            <Columns>
                <asp:BoundField DataField="Vorname" HeaderText="Vorname" SortExpression="Vorname" />
                <asp:BoundField DataField="Nachname" HeaderText="Nachname" SortExpression="Nachname" />
                <asp:BoundField DataField="Geburtsdatum" HeaderText="Geburtsdatum" SortExpression="Geburtsdatum" />
            </Columns>
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
            SelectCommand="SELECT  a.Vorname,
                           a.Nachname,
                           a.Geburtsdatum
                           FROM [Benutzer] a
                           INNER JOIN [BenutzerGruppe] b
                           ON a.BenutzerID = b.BenutzerID
                           INNER JOIN [Gruppe] c
                           ON b.GruppenID = c.GruppenID
                           WHERE c.GruppenID = @GruppenID">
            <SelectParameters>
                <asp:Parameter Name="GruppenID" />
            </SelectParameters>
        </asp:SqlDataSource>
        <asp:Button ID="Button1" Text="Zurück" runat="server" OnClick="Button1_Click" />
    </asp:Panel>
</asp:Content> 
```

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Data;
using System.Configuration;

namespace WerIstWo
{
    public partial class Gruppenverwaltung : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["UserAuthentication"] == null)
            {
                Response.Redirect("Login.aspx");
            }
        }

        protected void btnZurueck_Click(object sender, EventArgs e)
        {
            Response.Redirect("Datenverwaltung.aspx");
        }

        protected void btnNeueGruppe_Click(object sender, EventArgs e)
        {
            Response.Redirect("NeueGruppe.aspx");
        }

        protected void grdGruppe_RowCommand(object sender, GridViewCommandEventArgs e)
        {
            if (e.CommandName == "MitgliederAnzeigen")
            {
                string index = e.CommandArgument.ToString();
                pnlMitglieder.Visible = true;
                pnlGruppe.Visible = false;
                SqlDataSource2.SelectParameters["GruppenID"].DefaultValue = index;
                grdBenutzer.DataBind();             
            }
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            pnlMitglieder.Visible = false;
            pnlGruppe.Visible = true;            
        }

        protected void SqlDataSource1_Selected(object sender, SqlDataSourceStatusEventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:16:00.790

您必须传递 SqlDataSource 选择参数。

由于您是新人，因此您需要的整个过程应该是这样的

在按钮字段中添加 CommandArgument 属性

```
 // <asp:ButtonField ButtonType="Button" CommandArgument="GruppenID"   CommandName="MitgliederAnzeigen" Text="Mitglieder anzeigen" /> 

   replace this to

    <asp:TemplateField HeaderText="Mitglieder anzeigen">
            <ItemTemplate>
                <asp:Button ID="btn1" runat="server" Text="Mitglieder anzeigen" CommandName="MitgliederAnzeigen"
                    CommandArgument='<%# Eval("GruppenID") %>' />
            </ItemTemplate>
        </asp:TemplateField> 
```

你的 SqlDataSource2 必须是

```
 <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
        SelectCommand="select a.Nachname,
        c.GruppenID
        FROM [Benutzer] a
        INNER JOIN [BenutzerGruppe] b
        ON a.BenutzerID = b.BenutzerID
        INNER JOIN [Gruppe] c
        ON b.GruppenID = c.GruppenID
        WHERE   c.GruppenID = @GruppenID
         ">    
    <SelectParameters>
    <asp:Parameter Name="GruppenID" />
</SelectParameters>
    </asp:SqlDataSource> 
```

现在在行命令

```
if (e.CommandName == "MitgliederAnzeigen")
        {
 string index = e.CommandArgument.ToString();
           pnlMitglieder.Visible = true;
           pnlGruppe.Visible = false;  
              SqlDataSource2.SelectParameters["GruppenID"].DefaultValue = index;
              grdBenutzer.DataBind();

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:11:26.913

您需要为`SqlDataSource1`the`SelectCommand`和声明 SQL 参数 @GruppenID `DeleteCommand`，如下所示：

```
<asp:SqlDataSource OnSelected="SqlDataSource1_Selected" ID="SqlDataSource1" runat="server"
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
    SelectCommand="SELECT [Bezeichnung], [GruppenID] FROM [Gruppe] WHERE [Archiviert] != 1"
    DeleteCommand="UPDATE Gruppe SET [Archiviert] = 1 WHERE [GruppenID] = @GruppenID">

    <SelectParameters>
        <asp:Parameter Name="GruppenID" />
    </SelectParameters>

    <DeleteParameters>
        <asp:Parameter Name="GruppenID" />
    </DeleteParameters>

</asp:SqlDataSource> 
```

[然后，您可以像在此线程](http://forums.asp.net/t/949925.aspx/1)中一样设置此参数的值。

# jquery - 数据表标题宽度/对齐问题

> ID：15527122
> 
> 赞同：2
> 
> 时间：2013-03-20T14:58:06.397
> 
> 标签：jquery, google-chrome, datatables, css

我的数据表 jquery 插件有问题，我的标题没有与表正确对齐。我注意到，如果我将 cellspacing=0 添加到表格中，它将正确对齐。然而，这个属性在 HTML5 中是不应该的，如果可能的话，我希望它也能在 HTML5 中工作。如果您查看虚线边框线，则标题会与内容表行匹配。

这是我用来创建表的 javascript。

```
myTableHere = $('#MyTableHere').dataTable({
    'sScrollY': '100px',
    'bPaginate': false,
    'bScrollCollapse': true,
    'bFilter': false,
    'bInfo': false,
    'bSort': false,
    "aoColumns": [
        { "sWidth": "95px" },
        { "sWidth": "267px" },
        { "sWidth": "77px" },
        { "sWidth": "90px" },
        { "sWidth": "90px" },
        { "sWidth": "42px" }
    ]
}); 
```

这是在最新版本的 chrome 中查看的。 ![在此处输入图像描述](../Images/81a5ec3dd3af00fcba72754138e60a2a.png)

这是我整理数据之前的一些示例 HTML。[https://gist.github.com/anonymous/d44360d3a06c1a5b2898](https://gist.github.com/anonymous/d44360d3a06c1a5b2898)

**编辑：我发现通过在标题表中添加边框折叠，它解决了这个问题。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:33:55.607

在我使用数据表插件的表上，我`border-collapse: collapse;`应用了一个 css 属性。在插件完成表格化我的表格后，此属性仍在应用于内容表格。但是，单独的标题表也没有应用此 css 属性。将标题表设置为边框折叠后，线条正确排列。

# mysql - “随机”SQL 错误 - 常规 1030，来自存储引擎的 -1

> ID：15527132
> 
> 赞同：0
> 
> 时间：2013-03-20T14:58:38.837
> 
> 标签：mysql, pdo

完整错误：

```
Fatal Error: Uncaught exception 'PDOException' with message 
'SQLSTATE[HY000]: General error -1 from storage engine'
in C:\MyApacheDir\MyPHPFile.php:33 
```

第 33 行是`->execute()`我的 PDO 准备好的语句。这种行为并不总是发生；当执行完全相同的操作时，它可能不会发生。

我的查询：

```
// Make new permissions
$sql = "INSERT INTO permissions (
      doc_id,
      user_id,
      write_access 
    ) VALUES (
      :doc_id,
      :user_id,
      :write_access
    );";
$stmt = $dbConn->prepare($sql);

ForEach ($permitArr as $permit) {
  $stmt->bindValue(":doc_id", $_POST['doc_id'], PDO::PARAM_INT);
  $stmt->bindValue(":user_id", $permit[0], PDO::PARAM_INT);
  $stmt->bindValue(":write_access", $permit[1], PDO::PARAM_INT);
  $stmt->execute();
} 
```

其中包含形式为 0 或 1`permitArr`的权限数组，`Array[index][info]`分别对应于用户和访问级别。`[info]`

如前所述，此错误仅有时会发生；完全相同查询的其他迭代（字面意思是传递相同的信息）工作正常。

有人知道`-1`错误代码是由什么引起的吗？也许这只是较差的搜索技能，但我无法在任何地方找到它。

我正在使用 IE8 中的 MySQL 5.6 使用 Apache 2.2 localhost。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:05:08.530

好像很腥 我找不到那个数字的错误，所以这通常意味着有一个外部因素在起作用。我会尝试以下方法：

1.) 创建一个新表并在新表上尝试代码。

2.) 使用新表创建新模式并再次尝试代码。

3.) 在您的驱动器上运行 chkdsk 以确保没有任何集群问题。

4.) 重启。

# cuda - CUDA 块和扭曲

> ID：15527133
> 
> 赞同：20
> 
> 时间：2013-03-20T14:58:39.913
> 
> 标签：cuda

好的，我知道相关问题已经被一遍又一遍地提出，我阅读了几乎所有我发现的关于此的内容，但事情仍然不清楚。可能也是因为我发现并阅读了相互矛盾的东西（可能是因为来自不同的时代，他们提到了具有不同计算能力的设备，它们之间似乎有很大的差距）。我希望提高效率，以减少我的执行时间，因此我需要确切地知道有多少线程/warp/blocks 可以同时并行运行。此外，我正在考虑对此进行概括，并仅根据我知道我必须执行的操作数量（对于更简单的程序）和系统规范来计算要传递给我的内核的线程和块的最佳数量。

我有一个 GTX 550Ti，顺便说一句，计算能力为 2.1。4 个 SM x 48 个内核 = 192 个 CUDA 内核。

好的，所以我不清楚的是：

可以在多处理器 (SM) 上一次（并行）运行 1 个以上的块吗？我读到最多可以将 8 个块分配给一个 SM，但没有关于它们是如何运行的。从我每个 SM 的最大线程数（1536）几乎不大于我每个块的最大线程数（1024）这一事实，我认为这些块不是并行运行的（可能是 1 个半？）。或者如果我有最大数量的线程，至少不会。此外，如果我将块数设置为 4（我的 SM 数），它们会分别发送到不同的 SM 吗？或者我无法真正控制所有这些在硬件上的分布方式，然后这是一个有争议的问题，我的执行时间将根据我的设备的突发奇想而有所不同......

其次，我知道一个块会将它的线程分成并行运行的 32 个线程组，称为 warp。现在这些扭曲（假设它们彼此没有关系）也可以并行运行？因为在 Fermi 架构中，它声明 2 个 warp 是同时执行的，从每个 warp 发送一条指令到一组 16 个（？）核心，而在其他地方我读到每个核心处理一个 warp，这可以解释 1536 个最大线程（ 32 * 48）但似乎有点多。1 个 CUDA 内核可以同时处理 32 个线程吗？

更简单地说，我要问的是：（例如）如果我想在第三个向量中求和 2 个向量，我应该给它们多长（操作数）以及我应该如何将它们分成块和线程我的设备以满容量同时（并行）工作（没有空闲内核或 SM）。

很抱歉，如果之前有人问过这个问题，但我没有得到它或没有看到它。希望您能够帮助我。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-23T19:42:02.043

工作的分布和并行执行由启动配置和设备决定。启动配置说明了网格尺寸、块尺寸、每个线程的寄存器和每个块的共享内存。根据此信息和设备，您可以确定可以在设备上同时执行的块和扭曲的数量。在开发内核时，您通常会查看 SM 上可以活动的 warp 与设备的每个 SM 的最大 warp 数的比率。这称为理论占用率。[CUDA 占用计算器](http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls)可用于研究不同的启动配置。

当网格启动时，计算工作分配器将栅格化网格并将线程块分配给 SM，并且将为线程块分配 SM 资源。如果 SM 有足够的资源，可以在 SM 上同时执行多个线程块。

为了启动warp，SM将warp分配给warp调度器并为warp分配寄存器。此时，经线被认为是活动经线。

每个 warp 调度器管理一组 warp（Fermi 上 24 个，Kepler 上 16 个）。未停止的经线称为合格经线。在每个周期，warp 调度程序选择一个合格的 warp 并将该 warp 的指令发送到执行单元，例如 int/fp 单元、双精度浮点单元、特殊功能单元、分支解析单元和加载存储单元。执行单元是流水线的，允许许多 warp 每个周期有 1 条或更多条指令在运行。Warp 可以在指令获取、数据依赖、执行依赖、屏障等上停止。

每个内核都有不同的最佳启动配置。Nsight Visual Studio Edition 和 NVIDIA Visual Profiler 等工具可以帮助您调整启动配置。我建议您尝试以灵活的方式编写代码，以便您可以尝试多种启动配置。我将首先使用一个配置至少 50% 的占用率，然后尝试增加和减少占用率。

**每个问题的答案**

*问：在多处理器 (SM) 上可以同时运行 1 个以上的块（并行）吗？*

是的，最大数量取决于设备的计算能力。[请参见表 10。 每个计算能力的技术规格：每个多处理器的最大居民块数](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#features-technical-specifications.xml)以确定该值。通常，启动配置会限制运行时间值。有关更多详细信息，请参阅占用计算器或其中一种 NVIDIA 分析工具。

*问：从我每个 SM 的最大线程数（1536）几乎不大于我每个块的最大线程数（1024）这一事实，我认为这些块不是并行运行的（可能是 1 个半？）。*

启动配置决定了每个 SM 的块数。设置每个块的最大线程数与每个 SM 的最大线程数之比，以允许开发人员在分区工作方式上具有更大的灵活性。

*问：如果我将块数设置为 4（我的 SM 数），它们会分别发送到不同的 SM 吗？或者我无法真正控制所有这些在硬件上的分布方式，然后这是一个有争议的问题，我的执行时间将根据我的设备的突发奇想而有所不同......*

您对工作分配的控制有限。您可以通过分配更多共享内存来限制占用来人为地控制它，但这是一种高级优化。

*问：其次，我知道一个块会将它的线程分成并行运行的 32 个线程组，称为 warp。现在这些扭曲（假设它们彼此没有关系）也可以并行运行吗？*

是的，warp 可以并行运行。

*问：因为在 Fermi 架构中，它声明 2 个 warp 是同时执行的*

每个 Fermi SM 有 2 个 warp 调度器。每个 warp 调度程序可以在每个周期调度 1 个 warp 的指令。指令执行是流水线的，因此许多扭曲每个周期可以有 1 条或更多条指令在运行。

*问：从每个扭曲向一组 16 个（？）核心发送一条指令，而在其他地方我读到每个核心处理一个扭曲，这可以解释 1536 个最大线程（32x48）但似乎有点多。1 个 CUDA 内核可以同时处理 32 个线程吗？*

是的。CUDA cores 是整数和浮点执行单元的数量。SM 有我上面列出的其他类型的执行单元。GTX550 是 CC 2.1 设备。在每个周期，一个 SM 有可能在每个周期最多分派 4 条指令（128 个线程）。根据执行的定义，每个周期运行的线程总数可以从数百到数千不等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T18:21:39.887

> 我希望提高效率，以减少我的执行时间，因此我需要确切地知道有多少线程/warp/blocks 可以同时并行运行。

简而言之，可以同时运行的线程/扭曲/块的数量取决于几个因素。CUDA C 最佳实践指南有一篇关于[执行配置优化](http://docs.nvidia.com/cuda/cuda-c-best-practices-guide/index.html#execution-configuration-optimizations)的文章，解释了这些因素，并提供了一些关于如何塑造应用程序的推理技巧。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-20T15:10:29.867

对我来说，需要一段时间才能理解的概念之一是 CUDA 芯片上对上下文切换的硬件支持的效率。

因此，每次内存访问都会发生上下文切换，允许计算在许多上下文中交替进行，而其他上下文则在等待内存访问。GPGPU 架构实现性能的方法之一是能够以这种方式并行化，除了在多个内核上并行化。

当没有内核等待内存访问时，可以获得最佳性能，并且通过有足够的上下文来确保这种情况发生。

# clojure - Clojure 中 apply 的惯用用法

> ID：15527135
> 
> 赞同：1
> 
> 时间：2013-03-20T14:58:46.687
> 
> 标签：clojure

如果这是一个真正的基本问题，我很抱歉，但我看到的一些代码让我很好奇。

该函数的惯用用法是`apply`什么？

例如，我见过这样写的代码：

```
(distinct [1 2 3 4 5 6]) 
```

和

```
(apply distinct? [1 2 3 4 5 6]) 
```

这些返回相同的结果，甚至在文档中，它也清楚地表明：

> ;; 注意以下两种形式的等价性
> 
> 用户=>（应用 str [“str1”“str2”“str3”]）“str1str2str3”
> 
> 用户=>（str“str1”“str2”“str3”）“str1str2str3”

这个例子是不是太基本而无法传达 的用处`apply`？还是我错过了两者之间的根本区别？

什么时候一种形式被认为优于另一种形式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:05:06.377

```
user=> (apply str ["str1" "str2" "str3"]) "str1str2str3"

user=> (str "str1" "str2" "str3") "str1str2str3" 
```

在这个例子中， using 的好处`apply`是它可以获取一个字符串列表。`str`，就其本身而言，不能。

我不是专家，但我的直觉告诉你，`apply`除非必要，否则不要使用。因此，如果您有一组要传递给可变参数函数的值，这`apply`很有用——否则，只需使用普通函数，例如`str`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:19:18.750

这些都是正确的，但出于非常不同的原因：

```
(distinct? [1 2 3 4 5 6])
;=> true 
```

只有一个参数，即 1..6 的向量，它不同于任何其他参数，因为 没有其他*参数*

```
(apply distinct? [1 2 3 4 5 6])
;=> true 
```

有 6 个参数，所有参数都是不同的。

观察：

```
(distinct? [1 1 1])
;=> true 
```

只有一个参数，三个`1`s的向量

```
(apply distinct? [1 1 1])
;=> false 
```

有三个参数，所有三个参数都是`1`.

注意区别：

```
(str [1 2 3])
;=> "[1 2 3]" -- single argument of a vector stringified

(apply str [1 2 3])
;=> "123" -- three arguments each stringified and concatenated 
```

Apply effects 变换`(apply f [a b c]) => (f a b c)`，这一般是*不*一样的`(f [a b c])`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:27:47.947

`apply`当您想将集合视为函数的参数时使用。如果`distinct`它需要一个集合作为它的参数，所以没有必要使用`apply`.

```
(distinct [1 2 3 4 1 1])
;returns: (1 2 3 4) 
```

`distinct?`如果它的参数不同，则返回 true：

```
(distinct? [1 2 3 4 1 1])
;returns true because there's only one argument 
```

`apply`使用集合中的项目作为参数：

```
(apply distinct? [1 2 3 4 1 1])
;returns false because of the duplicated 1's 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:27:42.117

通常，我`apply`在调用函数时将向量转换为参数。这很像 JavaScript 中的函数[，](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply)`apply`如下所示

诸如可变参数的函数`str`并期望与输入具有相同的类型，在这种情况下，任何实现`toString`. 使用`(str a b c)`是惯用的，`(apply str [a b c])`不是。

`apply`当您有一个异构向量，您希望将其项目用作函数的参数时，可以使用该函数。您可能会发现需要创建一个向量列表，其中向量中的项目对应于函数的参数，那么有必要使用`apply`.

我认为是`apply`：将向量分解为参数。

例子：

```
(def authtypes [:basic :basic :oauth])
(def usernames ["charlie" "snoopy" "lisa"])
(def passwords ["brown" "dog" "maggie"])

(let [credentials (map vector authtypes usernames passwords)]
  (doseq [c credentials]
    (apply login-user c))) 
```

# android - InfoWindowClickListener 出错，未启动新活动

> ID：15527136
> 
> 赞同：0
> 
> 时间：2013-03-20T14:58:48.310
> 
> 标签：android, google-maps, android-activity

`Activity`当用户按下地图上标记的信息窗口时，我正在尝试启动一个新的；但是我尝试做另一件事进行测试，例如更改信息窗口中的文本，`onClick`但它也不起作用。

```
map.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener() {

    @Override
    public void onInfoWindowClick(Marker arg0) {
        // TODO Auto-generated method stub
        startActivity(new Intent("com.test.app.MAINACTIVITY"));

    }
}); 
```

# jquery - 如何使用 jQuery 更改 Less 值？

> ID：15527139
> 
> 赞同：3
> 
> 时间：2013-03-20T14:58:59.380
> 
> 标签：jquery, less

我正在用 Less 创建一个网站。这是我第一次使用 LESS，我需要在页面加载时使用 jQuery 更改 Less 变量的值。例如，从`@black: #000`到`@black: #ccc;`。

我用过`less.modifyVars({'@black': '#ccc'});`

它工作正常，但是当变量改变时，我有一些错误：

```
GET localhost/img/zoom.png 404 (Not Found) 
```

某些图像和字体不显示。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T11:57:06.447

它似乎是一个已知的错误......但应该在更少的 1.4 中修复

请参阅此链接： [https ://github.com/cloudhead/less.js/issues/1201](https://github.com/cloudhead/less.js/issues/1201)

他们说没有简单的解决方法，因为它没有保持文件结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T16:24:00.363

我找到了我的问题的答案。例如，如果要在 jQuery 中修改 LESS 变量，则必须添加以下代码：

```
<script>
   less.modifyVars({'@color': '#0074c8'});
</script> 
```

# c++ - c++: - 设置大小参数 X 的默认 initializer_list 参数 Y，其中 X 和 Y 是函数参数

> ID：15527140
> 
> 赞同：2
> 
> 时间：2013-03-20T14:59:03.717
> 
> 标签：c++, function, arguments, initializer-list

考虑以下代码

```
enum class VAR_CHANGE{TYPE1, TYPE2, TYP3};
void cell ( const std::initializer_list<double>& values,
            const std::initializer_list<VAR_CHANGE>& change_type = [[[ !!!!!]]] )
{
    // do something
} 
```

我想替换 [[[ !!!!!]]] 以便默认初始值设定项列表出现

```
{VAR_CHANGE::TYPE1, VAR_CHANGE::TYPE1, ....} 
```

大小的

```
values.size() 
```

我想这样做是因为通常我想为初始化列表“值”中的所有值选择枚举类型 VAR_CHANGE::TYPE1。例如：

```
cell({1.2, 2.2, 6.7}); 
```

实际上是，

```
cell({1.2, 2.2, 6.7}, {VAR_CHANGE::TYPE1, VAR_CHANGE::TYPE1, VAR_CHANGE::TYPE1}); 
```

我可以重载该函数，但想知道是否有一种很好的通用方法可以将其表示为一个函数，而不是传递大小来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:26:00.390

你可以使用这个技巧：

```
enum class VAR_CHANGE{TYPE1, TYPE2, TYP3};

void cell ( const std::initializer_list<double>& values,
            const std::initializer_list<VAR_CHANGE>& change_type = {} )
{
    if(values.size() > 0 && change_type.size()==0)
    {
        // default
    }
    // do something
}

int main()
{
    cell({12.4, 234.4});
    cell({12.4, 234.4}, {VAR_CHANGE::TYPE1, VAR_CHANGE::TYPE2});;
} 
```

或者让它变得更好！

# arrays - R - 面板数据长形式到形式人 x 时间 x 特征的 3 维数组

> ID：15527141
> 
> 赞同：0
> 
> 时间：2013-03-20T14:59:05.240
> 
> 标签：arrays, r, multidimensional-array, time-series

我试图在 R 中找到一种简单的方法来获取具有 person_id、日期和几个变量字段的数据集（比如说 20，命名为 x1，x2...x20）并将其转换为 3 维数组（m by n by p) 其中 m 是人数，n 是离散时间段的数量，p 是变量的数量。

当前数据显示为：

```
m1 n1 x1 x2 x3 ... x20    
m1 n2 x1 x2 x3 ... x20
m1 nN   . .  . ...  .
m2 n1 x1 x2 x3 ... x20
.  .  .  .  .  ...  .
.  .  .  .  .  ...  .
mM nN x1 x2 x3 x4 ... x2 
```

最后，我希望它看起来像下面这样：

```
[, , 1]     
                    [, 1, ] [, 2, ] [, 3, ][, ..., ][, n, ]    
             [1, , ]    
             [2, , ]    
             [3 , ,]    
           [... , ,]    
             [m, , ]   
[, , 2]    
[, , 3]    
[, , ...]
[, , p] 
```

为简单起见，我们假设时间序列是良好对齐的（每个 m 具有完全相同的 n 个数）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:03:25.767

使用重塑2：

```
library(reshape2)
# You probably need to melt your data first
dataset.m <- melt(dataset, id.vars = c("m", "n"))

acast(dataset.m, m ~ n ~ variable) 
```

# android - 旋转上下文菜单时出错

> ID：15527144
> 
> 赞同：1
> 
> 时间：2013-03-20T14:59:13.867
> 
> 标签：android, contextmenu, runtime-error

当我打开上下文菜单然后旋转屏幕时，我在整个程序中都遇到了这个错误。

`03-19 16:09:25.627: E/InputQueue-JNI(11610): channel '41c6ffc0 AtchDlg:xxx.xxxxxxxx.xxx/xxx.xxxxxxxx.xxx.TyContextMenuActivity (client)' ~ Publisher closed input channel or an error occurred. events=0x8`

我将代码简化为我能想到的最基本的形式，但仍然出现错误，所以我认为它在 android 代码中。

```
public class TyContextMenuActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        TextView textView = new TextView(this)
        {

            @Override
            protected void onCreateContextMenu(ContextMenu menu)
            {
                super.onCreateContextMenu(menu);
                menu.setHeaderTitle("Rotate Screen");
                menu.addSubMenu("90 degrees");
            }

        };
        textView.setText("hold me");
        textView.setGravity(Gravity.CENTER);
        textView.setTextSize(50);
        registerForContextMenu(textView);
        setContentView(textView);
    }
} 
```

有人能告诉我如何消除这个错误吗？

# c# - 要求接口实现具有静态 Parse 方法

> ID：15527145
> 
> 赞同：5
> 
> 时间：2013-03-20T14:59:15.920
> 
> 标签：c#, interface, static

我有一个最小的接口，并将处理其类实现此接口的对象集合。集合（连同它的相关功能）不关心这些对象的任何细节，除了它们的名称、将它们转换为 XML 的能力以及从 XML 解析它们的能力。

接口的未来实现将对集合的元素做更多的事情，并且显然会实现它们自己的 Parse 和 ToXml 方法（集合将使用它们在遇到这些项目时适当地解析这些项​​目）。

不幸的是，我无法在界面中列出静态 Parse 方法（我已阅读[这](https://stackoverflow.com/q/259026/866022) [三个](https://stackoverflow.com/q/823665/866022) [问题](https://stackoverflow.com/q/1380087/866022)）。让 Parse 方法需要一个实例对我来说没有意义。有没有办法要求接口的所有实现都具有静态 Parse 方法？

```
public interface IFoo
{
  string Name { get; }

  string ToXml();

  static IFoo Parse(string xml); // Not allowed - any alternatives?
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:03:07.627

你不能那样做。而且静态方法无论如何都不是多态的，所以它没有太多意义。

你在这里想要的是某种工厂模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:11:54.113

假设`Parse`接受一个字符串并将其转换为一个完全填充的对象，那么一个`Hydrate`方法怎么样，比如：

```
interface IFoo {
    string Name { get; set; }
    int Age { get; set; }
    void Hydrate(string xml);
}

class Foo : IFoo {
    public string Name { get; set; }
    public int Age { get; set; }

    public void Hydrate(string xml) {
        var xmlReader = ...etc...;
        Name = xmlReader.Read(...whatever...);
        ...etc...;
        Age = xmlReader.Read(...whatever...);
    }
}

void Main() {
    IFoo f = new Foo();
    f.Hydrate(someXml);
} 
```

或者稍微流利一下：

```
public IFoo Hydrate(string xml) {
    // do the same stuff
    return this;
}

void Main() {
    IFoo f = new Foo().Hydrate(someXml);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:03:44.583

我想到的唯一选择是在这里使用抽象类而不是接口。但是，无论如何您都无法覆盖子类中静态方法的行为。

您可以使用工厂模式实现一些类似的行为，并要求实现`IFoo`的类具有对该工厂的引用（可以通过构造函数注入将其注入其中）：

```
public interface IFoo
{
    string Name { get; }

    string ToXml();

    IFooFactory FooFactory { get; }
}

public interface IFooFactory
{
    IFoo Parse(string xml);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:27:42.190

我会将所有与序列化相关的方法提取到不同的接口中。请考虑以下示例：

```
public interface IFoo
{
    string Name { get; }
    IFooSerializer GetSerializer(string format);
}

public enum FooSerializerFormat { Xml, Json };

public interface IFooSerializer
{
    string Serialize(IFoo foo);
    IFoo Deserialize(string xml);
}

public class Foo : IFoo
{
    public string Name { get; }

    public IFooSerializer GetSerializer(FooSerializerFormat format)
    {
        case FooSerializerFormat.Xml:
            return new FooXmlSerializer();

        case FooSerializerFormat.Json:
            return new FooJsonSerializer();
    }
}

public class FooXmlSerializer : IFooSerializer { /* Code omitted. */ }
public class FooJsonSerializer : IFooSerializer { /* Code omitted. */ } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:13:55.660

也许这样？

```
public interface IFoo
{
  string Name { get; }

  string ToXml();

  IFoo Parse(string xml);
}

public abstract class AFoo : IFoo
{
  public string Name { get; set; }

  public string ToXml() { };

  public IFoo Parse(string xml) { return AFoo.StaticParse(xml); };

  public static IFoo StaticParse(string xml) { };  // implement one here
} 
```

即使上述可能是一个解决方案，我也会鼓励您改用抽象工厂和/或模板方法。请参阅[模板方法模式](http://www.dofactory.com/Patterns/PatternTemplate.aspx)。如果您不想在多个实现之间共享它，另一个选项可能是使用[扩展方法。](http://msdn.microsoft.com/library/vstudio/bb383977.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T15:25:38.383

从广义上讲，我知道（有时）使用扩展方法来处理这样的事情：

```
public interface IFoo
{
    string Name {get;}
    string ToXml();    
}

public class Foo : IFoo
{
    public Foo(string name)
    {
        Name = name;
    }
    public string Name {get; private set;}
    public string ToXml()
    {
        return "<derp/>";
    }
} 
```

这就是实例的内容，让我们处理“静态”位：

```
public static class FooExts
{
    public static IFoo Parse(this string xml)
    {
        return new Foo("derp");
    }
} 
```

和一个测试：

```
void Main()
{
    var aFoo = "some xml".Parse();
    Console.WriteLine(aFoo.ToXml());
} 
```

正如@Jim 提到的那样，在某些情况下您不*想要*`Foo`背部，在这种情况下您可能会使用类似的东西：

```
public static T Parse<T>(
    this string xml, 
    Func<string, IFoo> useMeUseMe = null) 
    where T:IFoo
{
    if(useMeUseMe == null)
        useMeUseMe = (x => new Foo(x));
    return (T)useMeUseMe("derp");
} 
```

唉，当我们偏离“规范”时，我们现在必须告诉方法我们想要什么：

```
var aFoo = "some xml".Parse<Foo>();
Console.WriteLine(aFoo.ToXml());    
var aBar = "some xml".Parse<Bar>(s => new Bar(s));
Console.WriteLine(aBar.ToXml()); 
```

# ruby - 在 Flash 消息中使用部分

> ID：15527148
> 
> 赞同：1
> 
> 时间：2013-03-20T14:59:20.397
> 
> 标签：ruby, ruby-on-rails-3

在我的 ActionController 中，我有以下内容：

```
 format.html { 
      flash[:notice] = "Success" 
      redirect_to @event 
    } 
```

但是，我想对 Flash 通知使用部分。我尝试使用`render :partial`，但这给了我双重渲染错误。如果可以做到这一点，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:21:06.350

尝试使用`render_to_string` 这应该可以让您渲染部分字符串而不会出现双重渲染错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:59:21.937

闪信部分代码

```
<div class="container">
  <div id="messages">
    <div class="message-container">
      <% flash.each_with_index do |(k,v),i| %>
        <div id="message-<%= i %>" class="actual-message  alert-<%= k.to_s.sub('_stay', '') %>">
            <a class="close" data-dismiss="alert" style="float:right">x</a>
            <% if v.is_a?(Array) %>
              <ul>
                <% v.each do |vv| %>
                  <li><%= vv %></li>
                <% end %>
              </ul>
            <% else %>
              <%= raw v %>
            <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div> 
```

在你的 application.html.erb 中使用

“布局/flash_messages” %>

# jquery - 允许多个类

> ID：15527150
> 
> 赞同：0
> 
> 时间：2013-03-20T14:59:25.460
> 
> 标签：jquery, html, css, class

我正在使用[jQuery maphighlight](http://davidlynch.org/projects/maphilight/docs/)，我需要 groupBy 功能之外的更多功能。

我需要更换这个

```
areas = map.find('area['+area_options.groupBy+'="'+$(this).attr(area_options.groupBy)+'"]'); 
```

与允许一类**或**另一类的东西。目前，如果我使用它按类分组，它不会匹配带有`class="opt1"`to 的元素和带有`class="opt1 opt4"`. 我需要元素“opt1 opt4”来匹配所有“opt1”和“opt4”元素，反之亦然。

到目前为止，我有一个拆分类的变量
`groupClasses = $(this).attr(area_options.groupBy).split(" ");`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:07:50.060

如果你想在选择器中做不止一件事情，你会使用逗号。

```
$("#MyDiv").find(".one,.two"); 
```

这将在 MyDiv 中找到类别为一或二的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:27:28.083

我想您可以对`groupBy`属性使用选择器，例如：`.opt1,.opt4`，至少这是我在代码中看到的实现。在这个演示页面[http://davidlynch.org/projects/maphilight/docs/demo_features.html](http://davidlynch.org/projects/maphilight/docs/demo_features.html)有`.square2`一个 groupBy 属性设置如下

```
data-maphilight='{"groupBy":".group"}' 
```

# ruby-on-rails - 带有 RackFilter 和资产的 Rails

> ID：15527151
> 
> 赞同：0
> 
> 时间：2013-03-20T14:59:27.113
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline, rack, jrubyonrails

我在使用自定义 RackFilter 设置并且能够在生产中正确定位或利用 rake:precompile 功能时遇到问题。我的环境如下：

```
jruby 1.7.3
Rails 3.2.12 
```

我正在使用的机架过滤器映射如下：

```
<filter-mapping>
    <filter-name>RackFilter</filter-name>
    <url-pattern>/r/*</url-pattern>
</filter-mapping> 
```

为了利用资产管道，而不使用预编译进行开发，我将以下内容添加到 application.rb

```
config.assets.prefix = "/r/assets" 
```

所有这些在开发模式下都可以正常工作。当我尝试在生产模式下运行应用程序时，问题就开始了。当我做 assets:precompile 我的 assets 目录结构如下所示：

```
/public/r/assets 
```

当我尝试运行应用程序时，出现以下错误：

```
ActionView::Template::Error (application.css isn't precompiled): 
```

这为我指明了应用程序未正确定位 manifest.yml 文件的方向，因此我将以下内容添加到我的 production.rb 中：

config.assets.manifest = Rails.root.join("public/r/assets")

然后我收到以下错误：

```
[WARN] 404 - GET /r/assets/application-3b09aaf17ec25843ede11b1160ca46ab.css 
```

我试图将我的 production.rb 更改为包括：

```
config.assets.prefix = "public/r/assets" 
```

但仍然得到

```
[WARN] 404 - GET /public/r/assets/application-3b09aaf17ec25843ede11b1160ca46ab.css 
```

所以在这一点上，我的想法已经不多了，可以使用任何建议或想法。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:04:20.697

问题是 public/assets 目录需要位于 war 目录的根目录中，以便 tomcat 能够找到资产。所以现在目录结构看起来

像这样：

战争
- 资产
- META-INF
- WEB-INF

而不是这个：

战争
- META-INF
- WEB-INF
- - 公共
- - - 资产

# sql - 将两个表中的几列合并为前一个表中id的一行

> ID：15527163
> 
> 赞同：1
> 
> 时间：2013-03-20T14:59:42.240
> 
> 标签：sql, postgresql, web, pivot, crosstab

如果有表A和表B。它们的结构如下：

A ：

```
id

1
2 
```

乙：

```
col_1    col_2

m         q
n         w 
```

如何通过 SQL 获得以下 C 的结果？

```
id     col_1   col_2    col_1  col_2 

 1       m     q        n      w
 2       m     q        n      w 
```

* * *

对于表B中的每一个数据，它们都与表A中的id相关联。将两个表拼接成表C后，一旦表C中的id发生变化（属于表A中的id），表C中对应的行改变。所以为了得到最终的表C，应该有一些计算来获取表C中的每一个数据(col_1, col_2, col_1 col_2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:59:33.683

据我了解，您希望从表 B 中获取所有行，并将其作为与表 A 中的 id 关联的列。

我认为仅使用查询是不可能的（不知道过程是否可以解决），但是我有一种可能会有所帮助的方法（我在 MySQL 上对其进行了测试）。

```
SELECT 
  `a`.`id`, 
  GROUP_CONCAT(`b`.`key`) AS `keys`, 
  GROUP_CONCAT(`b`.`value`) AS `values` 
FROM `a`, `b` 
GROUP BY `a`.`id` ASC; 
```

结果我们有：

```
---- ------ --------
| 编号 | 钥匙 | 价值观 |
 ---- ------ --------
| 1 | m,n | 3,4 |
| 2 | m,n | 3,4 |
 ---- ------ --------

```

列键中的第一个键和列值中的第一个值是指表 b 的第一行。第二个是指第二行，依此类推。这样，您只需要使用一些服务器端代码在分隔符 ',' 上进行拆分。

我搜索了从 Postgres 到 MySQL GROUP_CONCAT 的匹配命令，发现**STRING_AGG**可能做同样的工作。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:50:13.210

只要您事先知道`key`B 中可以出现多少个不同的值（并且没有太多），这应该有效：

```
select A.id, Once.key k1, Once.value v1, Twice.key k2, Twice.value v2
from A,(select * from B where B.key='m') Once,
(select * from B where B.key='n') Twice; 
```

编辑：这是通过上述查询获得的结果：

```
| ID | K1 | V1 | K2 | V2 |
--------------------------
|  1 |  m |  3 |  n |  4 |
|  2 |  m |  3 |  n |  4 | 
```

# css - 自动调整页脚大小 CSS

> ID：15527165
> 
> 赞同：0
> 
> 时间：2013-03-20T14:59:54.423
> 
> 标签：css, resize, footer

我有一个包含 2 行 3 个链接的页脚 - 当浏览器窗口调整大小并且太小时，链接会被切断。有没有办法在调整窗口的其余部分大小时保持页脚全尺寸？

```
.footer { position: fixed; top: 90%; left: 0; right: 0; bottom: 0;
      background: #ffffff; border: solid black; border-width: 2px 0 0 0; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:14:12.603

为您的 div 设置“最小宽度”

```
.footer { 
    position: fixed; 
    top: 90%; 
    left: 0; 
    right: 0; 
    bottom: 0;
    background: #fff; 
    border-top: 2px solid #000;

    min-width: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:17:14.593

将 a 添加到页脚，[如下](http://jsfiddle.net/4tMjX/)`min-height`所示：

```
.footer { 
    position: fixed; 
    height: 10%;
    min-height: 40px;
    left: 0; 
    right: 0; 
    bottom: 0;
    background: #fff; 
    border-top: 2px solid black; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:40:26.573

将页脚固定到页面底部是一种选择吗？只需删除，`top: 90%;`即使窗口为一半大小，页脚也会保留它的高度

```
.footer { 
    position: fixed; 
    left: 0; 
    right: 0; 
    bottom: 0;
    background: #fff; 
    border-top: 2px solid #000;
} 
```

PS我叉了你的小提琴：http: [//jsfiddle.net/6s5eN/](http://jsfiddle.net/6s5eN/)

# php - 使用 simplesamlphp 1.10 和 cakePHP 2.3 不起作用

> ID：15527171
> 
> 赞同：2
> 
> 时间：2013-03-20T15:00:09.837
> 
> 标签：php, cakephp, authentication, saml, cakephp-2.3

我正在尝试在 cakePHP 中实现 SimpleSAMLphp 身份验证工具。我写了一个`SamlAuthenticate`组件`app\Controller\Component\Auth`，看起来像这样：

```
class SamlAuthenticate extends Component {

    [...]

    public function authenticate(CakeRequest $request, CakeResponse $response) {
            $source = null;
            $as = null;
            if ($this->Session->check('Saml.source')) {
                    $source = $this->Session->read('Saml.source');
            }

            if ($source) {
                    require_once($this->settings['path'] . DS . 'lib' . DS . '_autoload.php');
                    $as = new SimpleSAML_Auth_Simple($source);
                    if(!$as->isAuthenticated()) {
                            $as->login();
                    } else {                               
                            return $as->getAttributes();
                    }
            }

            return false;
    }
} 
```

但是我总是在身份提供者和我的蛋糕应用程序之间建立一个循环。

我想知道，如果我的服务器有问题，或者我的身份提供者的配置有问题，所以我写了一个简单的测试脚本，它没有问题地工作：

```
require_once('/../simplesamlphp/lib/_autoload.php');
$as = new SimpleSAML_Auth_Simple('facebook');

$as->requireAuth();
echo $as->isAuthenticated(); 
```

因此，cakePHP 中的某些内容破坏了身份验证过程。SimpleSAMLAuthToken 设置正确（我可以通过 SimpleSAMLphp 管理面板看到），但`$as->isAuthenticated()`总是返回 false。

我还尝试了[https://github.com/bvidulich/CakePHP-simpleSAMLphp-Plugin](https://github.com/bvidulich/CakePHP-simpleSAMLphp-Plugin)，结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:28:22.387

也许您处于会话冲突中。

查看 simpleSAMLphp 文档的[LostState](http://code.google.com/p/simplesamlphp/wiki/LostState)信息。

一个快速的解决方法，看看这是否是你的问题：

配置 simplesamlphp 以将会话保存在 memcache 上。你需要安装一个memcache服务器，memcache php驱动（记得安装ir后重启你的apache），然后编辑simpleSAMLphp的config/config.php文件并设置

```
'store.type' => 'memcache', 
```

检查 simpleSAMLphp 是否可以使用 firefox 的 cookie 扩展来编写会话。（查看 config/config.php 文件的 session/cookie 参数。

# authentication - Paypal Express Checkout 授权时间

> ID：15527173
> 
> 赞同：0
> 
> 时间：2013-03-20T15:00:12.610
> 
> 标签：authentication, paypal, express-checkout

我正在使用支付操作授权使用 SOAP API 执行 paypal Express Checkout 操作。授权期限自动设置为 29 天。我怎样才能改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:47:29.210

银行对买家信用卡的信用卡授权实际上取决于发卡银行。这不是你可以真正改变的任何东西。不同的发卡银行的实际持有期也可能略有不同。

# android - Titanium Appcelerator - Facebook 移动应用安装广告

> ID：15527176
> 
> 赞同：3
> 
> 时间：2013-03-20T15:00:22.870
> 
> 标签：android, ios, facebook, titanium, facebook-ads-api

我们使用 Titanium Appcelerator 为 Android 和 iOS 构建了我们的应用程序。我们的客户要求利用 Facebook 的“移动应用安装广告”。[http://developers.facebook.com/docs/concepts/mobile-ads/](http://developers.facebook.com/docs/concepts/mobile-ads/)

Titanium 是否有权进行所需的更新以使其正常工作？

> 对于 FB iOS SDK 3.0 或更高版本，将以下内容添加到您的 UIApplicationDelegate applicationDidBecomeActive 选择器中：
> 
> ```
> [FBSettings publishInstall:YOUR_APP_ID]; 
> ```
> 
> 对于 FB Android SDK 3.0，将以下内容添加到应用中每个 Activity 的 onResume() 中：
> 
> ```
> com.facebook.Settings.publishInstallAsync(context, YOUR_APP_ID); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:43:19.643

iOS 和 android 最近都升级到了 3.0，但版本 (3.1.0) 仅在夜间构建中，并且要到 4 月中旬才会发布。

[这是 JIRA 票。](https://jira.appcelerator.org/browse/TIMOB-10422)

不确定是否要使用夜间构建，但是一旦构建了应用程序，您可以直接编辑 Titanium 的源代码，也可以编辑 Titanium Studio 生成的实际源代码，对于 iOS，只需打开 XCode 项目并编辑`TiApp.m`文件，特别是`applicationDidBecomeActive`方法。对于 Android，它应该非常相似。

# ios - 无法在 iOS 上使用 AdMob 获得任何测试广告

> ID：15527188
> 
> 赞同：9
> 
> 时间：2013-03-20T15:00:39.520
> 
> 标签：ios, admob

我正在测试 AdMob。我这样做：

```
AdManager *adManager = [AdManager sharedAdManager];
adManager.gadBannerView.adUnitID = @"a1514981c9444a4";
adManager.gadBannerView.rootViewController = self;
adManager.gadBannerView.delegate = self;
[adManager.gadBannerView setOriginY:self.view.frame.size.height-adManager.gadBannerView.frame.size.height];
[self.view addSubview:adManager.adBannerView];

GADRequest *request = [GADRequest request];
request.testDevices = [NSArray arrayWithObjects:@"CECADC69-4A6B-4BB4-BF24-CACDA871B44A", nil];
[adManager.gadBannerView loadRequest:request]; 
```

而@"CECAD..." GAD_SIMULATOR_ID。当我在模拟器上进行测试时，我总是在控制台中收到错误。在我的设备上也出现同样的错误。iOS版本为6.0+。即使我删除`request.testDevices = ...`，我也无法获得任何广告。

> “Google”：要在此设备上获取测试广告，请调用：request.testDevices = [NSArray arrayWithObjects:GAD_SIMULATOR_ID, nil];

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T06:16:09.023

原因是我没有成功加载请求并将其添加`GADBannerView`到我的视图层次结构中。该日志`To get test ads on this device, call: request.testDevices = [NSArray arrayWithObjects:GAD_SIMULATOR_ID, nil];`将始终显示。我认为这应该是告诉开发人员如何获取测试广告的提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:10:30.243

你试过了吗

```
request.testing = YES; 
```

请注意，您需要在调试模式下运行才能获得测试广告。实际上我什至不使用 testDevices 属性并且它有效。

我认为如果你不指定测试设备，它会在每个设备上获得测试广告，如果你在调试模式下编译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-11T10:46:28.190

在调试控制台中，您应该会看到类似于以下内容的消息：

```
>     <Google> To get test ads on this device, call: request.testDevices = @[ @"4d245710e0069eb2e3937c54e53e82c8" ]; 
```

然后你可以在你的代码中设置它：

> self.adsView.adUnitID = adUnitId;
> self.adsView.rootViewController = 自我；
> DFPRequest *request = [DFPRequest 请求]；
> 
> **request.testDevices = @[ @"4d245710e0069eb2e3937c54e53e82c8"];**
> 
> [self.adsView loadRequest:request];

# node.js - Node.js 示例给出 2 个响应？

> ID：15527190
> 
> 赞同：0
> 
> 时间：2013-03-20T15:00:42.890
> 
> 标签：node.js

我从[Node.js](http://nodejs.org/)网站主页制作了一个示例脚本，如下所示：

```
var http = require('http');
http.createServer(function (req, res) {
   console.log("We are connected");
   res.writeHead(200, {'Content-Type': 'text/plain'});
   res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

有什么想法为什么[每次我连接](http://i.imgur.com/1ZEsSgu.png)到 127.0.0.1:1337（通过铬）我都会收到**2**条回复说“我们已连接”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:17:45.543

浏览器有两个请求。一个用于 url `/`，另一个用于`/favicon.ico`. 尝试输出请求 url。

```
console.log(req.url); 
```

# scala - 保持对两个演员的引用

> ID：15527193
> 
> 赞同：0
> 
> 时间：2013-03-20T15:00:49.623
> 
> 标签：scala, actor

我正在制作一个小型 2 人游戏，它将通过网络与演员一起工作。每个客户端都会向服务器发送一条消息以加入，我想在那时保留对发件人的引用，但是当第二个玩家加入时，它会覆盖我对第一个玩家的引用：

```
case class JoinMsg

class Server(port: Int) extends Actor {
  var client1: OutputChannel[Any] = null
  var client2: OutputChannel[Any] = null
  def act() {
    alive(port)
    register('Server, self)
    while (true) {
      receive {
        case JoinMsg =>
          if (client1 == null) {
            Console.println("got player 1")
            client1 = sender
            client1 ! new Msg("Waiting for player 2")
          } else if (client2 == null) {
            Console.println("got player 2")
            client2 = sender
            Console.println("blatted client1?: "+(client1 == client2))//true
            client1 ! new Msg("hi")
            client2 ! new Msg("hi")
          }
      }
    }
  }
} 
```

解决这个问题的正确方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T21:18:26.843

使用 Akka，它看起来像这样：

```
import akka.actor._

case object JoinMsg
case class Msg(s: String)

class Server extends Actor {

  def receive = {
    case JoinMsg =>
      println("got player 1")
      sender ! Msg("Waiting for player 2")
      context.become(waitingForPlayer2(sender))
  }

  def waitingForPlayer2(client1: ActorRef): Actor.Receive = {
    case JoinMsg =>
      println("got player 2")
      sender ! Msg("hi")
      client1 ! Msg("hi")
      context.become(ready(client1, sender))
  }

  def ready(client1: ActorRef, client2: ActorRef): Actor.Receive = {
    case m: Msg if sender == client1 => client2 ! m
    case m: Msg if sender == client2 => client1 ! m
  }
}

object Demo extends App {
  val system = ActorSystem("Game")
  val server = system.actorOf(Props[Server], "server")

  system.actorOf(Props(new Actor {
    server ! JoinMsg
    def receive = {
      case Msg(s) => println(s)
    }
  }))

  system.actorOf(Props(new Actor {
    server ! JoinMsg
    def receive = {
      case Msg(s) => println(s)
    }
  }))
} 
```

完全相同的演员代码可以与远程演员一起使用。您只需要几行配置，并且从客户端查找服务器是使用`actorFor`. 阅读有关[Akka 远程演员](http://doc.akka.io/docs/akka/2.1.2/scala/remoting.html)的信息。

# jquery - 提交时指定按钮

> ID：15527194
> 
> 赞同：0
> 
> 时间：2013-03-20T15:00:51.970
> 
> 标签：jquery

我有一个像这样的输入处理程序：

```
$('.submit-on-enter').keydown(function (e) {
  if (e.keyCode == 13) {
    var id = $(this).attr('id');
    $('input[type=submit][for=' + id + ']').click();
  }
}); 
```

这是一个带有多个按钮的表单。我遇到的问题是，当表单到达服务器时，第一个按钮就在那里，而不是“点击”的那个。我已经验证了上述处理程序中的 id 是预期的 id。

为了清楚起见，我正在检查按钮服务器端是否存在 name 属性以确定单击了哪个按钮。无论如何，页面上第一个按钮的名称始终存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:53:22.180

这是解决方案，注意事件的变化。keydown 似乎不允许在 chrome 中停止表单提交事件。

```
$('.submit-on-enter').keypress(function (e) {
  if (e.keyCode == 13) {
    e.preventDefault();
    var id = $(this).attr('id');
    var name = $('input[type=submit][for=' + id + ']').attr('name');
    $('input[type=submit][for=' + id + ']').click();
  }
}); 
```

# java - 科学记数法被解释为 int 还是 float？

> ID：15527198
> 
> 赞同：13
> 
> 时间：2013-03-20T15:01:05.203
> 
> 标签：java, int, scientific-notation

如果我在我的代码中使用科学记数法（例如`1e9`）硬编码一个数字，那么该数字的类型是什么（int、long、float、double..）？

当有效数或指数是浮点数时，它显然不能是整数，但是在上述情况下呢？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T15:03:17.893

`e`使其成为浮点文字。来自 JLS（[第 3.10.2 节。浮点文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.2)）：

> 如果浮点文字以 ASCII 字母或;`float`为后缀，则它是类型。否则它的类型是，并且可以选择以 ASCII 字母或(§4.2.3) 为后缀。`F``f``double``D``d`

因此，`1e9`类型`double`， as is `1e9d`。另一方面，`1e9f`是类型`float`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T15:02:20.877

这些通常是**double**类型。如果你在它后面放一个`f`(of `F`)，它就是一个浮点数。

```
double d = 1e9; 
float f = 1e9f; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T15:03:15.033

它将被视为[浮点文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.2)，并且没有尾随`f`，否则`F`它将是`double`.

[整数文字](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)不能使用科学记数法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-20T15:04:52.183

除非您使用 'f' 或 'F' 否则它将是 'double' ，那么它将是浮点文字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:29:51.203

最好使用双精度。因为它具有十进制浮点数，是一种与科学计数法密切相关的计算机算术系统。例如：0.000 000 007 51 在科学计数法中是 7.51×10-9。当你将它用作 int 时，7.51 将是 7，而当你使用 int 时，它将是 7.51。

# sql - 查找所有共享至少 X 个字符的字符串，按相似度排序

> ID：15527202
> 
> 赞同：4
> 
> 时间：2013-03-20T15:01:11.263
> 
> 标签：sql, sql-server, string, sql-server-2008

我正在从事一个具有各种药物名称的项目。通常，我会找到类似 Proscratinol 和 Proscratinol XR（延长版）的东西。我想找到一个查询来获取所有这种性质的名称，这样我就可以将“父”药物放在一个表中并让这些“子”药物引用它，所以当我编写查询来进行药物计数时，我不要重复计算前列素，因为它有 XR、CR 和任何其他版本。我写了以下内容以尝试一下

```
;with x
as
(
select   drug_name
    from rx
    group by drug_name
)

select distinct *
    from x,x as x2
    where LEFT(x2.drug_name,5) = LEFT(x.drug_name,5)
    and x.drug_name !=x2.drug_name 
```

这将给我一个名称共享前五个字母的所有药物的列表。五在这里完全是任意的。到目前为止我所做的已经足够好，但我想按降序排列结果。所以我想找到他们从左边读取的 X-most 字符是相同的。

例如 Phenytoin 和 Phepil 为 3（它们的前三个字母相同）

;with x as (select drug_name from rx group by drug_name )

```
select   x.drug_name as xDrugName
        ,x2.drug_name as x2DrugName
        ,case when LEFT(x2.drug_name,6) = LEFT(x.drug_name,6) 
            then LEN(left(x.drug_name,6)) else '0' end
    from x,x as x2
    where LEFT(x2.drug_name,5) = LEFT(x.drug_name,5)
    and x.drug_name !=x2.drug_name 
    group by x.drug_name,x2.drug_name 
```

在上述查询中，我不需要将 int 硬编码到 left 函数中，而是需要该整数表达式来返回两个字符串共享多少相似字符。有什么好方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:40:09.347

这种方法使用数字生成器，然后只测试重叠的长度：

```
select x.drug_name, x2.drug_name, MAX(c.seqnum) as OverlapLen
from x cross join
     x x2 cross join
     (select ROW_NUMBER() over (order by (select NULL)) seqnum
      from INFORMATION_SCHEMA.COLUMNS c
     ) c
where LEFT(x.drug_name, c.seqnum) = LEFT(x2.drug_name, c.seqnum) and
      len(x.drug_name) >= c.seqnum and len(x2.drug_name) >= c.seqnum
group by x.drug_name, x.drug_name
order by x.drug_name, OverlapLen desc 
```

这假设`information_schema.columns`有足够的行用于较长的药物名称。

这加入`x`到自身，然后加入到数字列表中。该`where`子句检查三个条件：（1）每个药物名称的左边部分到 seqnum 为止是相同的；(2)每个药名的长度小于等于seqnum。

然后聚合获取每一对并选择 seqnum 的最大值——这应该是最长的子字符串匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T19:50:29.160

你想要最长的公共序列。这是一个 SQL 服务器实现：

选择 dbo.lcs(@string1, @string2), len(@string1), len(@string2)

```
CREATE FUNCTION [dbo].[LCS]( @s varchar(MAX), @t varchar(MAX) )
RETURNS INT AS
BEGIN
  DECLARE @d varchar(MAX), @LD INT, @m INT, @n INT, @i INT, @j INT, 
    @s_i NCHAR(1), @t_j NCHAR(1)

  SET @n = LEN(@s)
  IF @n = 0 RETURN 0

  SET @m = LEN(@t)
  IF @m = 0 RETURN 0

  SET @d = REPLICATE(CHAR(0),(@n+1)*(@m+1))

  SET @i = 1
  WHILE @i <= @n BEGIN
    SET @s_i = SUBSTRING(@s,@i,1)

    SET @j = 1
    WHILE @j <= @m BEGIN
      SET @t_j = SUBSTRING(@t,@j,1)

      IF @s_i = @t_j

        SET @d = STUFF(@d,@j*(@n+1)+@i+1,1,
          NCHAR(UNICODE(
            SUBSTRING(@d, (@j-1)*(@n+1)+@i-1+1, 1)
            )+1))

      ELSE

        SET @d = STUFF(@d,@j*(@n+1)+@i+1,1,CHAR(dbo.Max2(
          UNICODE(SUBSTRING(@d,@j*(@n+1)+@i-1+1,1)),
          UNICODE(SUBSTRING(@d,(@j-1)*(@n+1)+@i+1,1)))))

      SET @j = @j+1
    END
    SET @i = @i+1
  END      

  SET @LD = UNICODE(SUBSTRING(@d,@n*(@m+1)+@m+1,1))
  RETURN @LD
END 
```

# iphone - 自定义 UIPickerView 和 UIDatePicker，设计更扁平

> ID：15527204
> 
> 赞同：0
> 
> 时间：2013-03-20T15:01:15.237
> 
> 标签：iphone, ios, uipickerview, uidatepicker

我正在构建一个具有大量自定义设计的小型 iPhone iOS 6 应用程序，主要`UIAppearance`用于应用自定义样式。

在应用程序中，我想使用 a`UIPickerView`和 a`UIPicker`但这些元素的样式不适合我的应用程序，看起来很糟糕。今天我[在运球上找到了一个选择](http://dribbble.com/shots/991626-What-time?list=users)。

我想我需要自己创建一个自定义 UI 元素来实现这样的外观。

什么是创建`PickerView`自己的好方法。我不要求提供完整的代码，而是要求一些如何开始编码的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:23:01.317

如果您不介意额外的编程工作，您可以考虑创建一个`UIView`子类（毕竟 `UIPickerView`就是这样），并`UIPickerView`通过自定义实现来实现您自己需要的功能。

[根据您所追求](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)`UIPickerView`的，您可能不需要使您的实现像. 我认为这样做会相对简单。图形实现将是我想说的真正挑战，但由于您对平面 UI 感兴趣，图形可以保持简约，这只是以适当方式响应触摸事件的情况。

如果您不想参与其中，您可以随时搜索以查看是否有人已经创建了一些实现平面 UI 外观的公共使用类！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:09:24.827

这是一个可定制的项目 [http://dev.doukasd.com/2011/04/infinite-scrolling-dial-control-for-ios/](http://dev.doukasd.com/2011/04/infinite-scrolling-dial-control-for-ios/) 还可以查看这篇文章[Custom UIPickerView with Custom Background color](https://stackoverflow.com/questions/11426219/custom-uipickerview-with-custom-background-color)

# xaml - 使用 WinRT XAML 工具包将 WatermarkText 的大小更改为 WatermarkTextBox

> ID：15527205
> 
> 赞同：1
> 
> 时间：2013-03-20T15:01:19.670
> 
> 标签：xaml, windows-runtime, font-size, watermark, winrt-xaml-toolkit

我使用这个库：[http](http://winrtxamltoolkit.codeplex.com/) ://winrtxamltoolkit.codeplex.com/ 我想指定 WatermarkText 的 FontSize，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:11:37.583

您可以使用`Watermark`属性而不是属性`WatermarkText`来放置您想要的任何内容作为水印 - 例如`TextBlock`，具有您想要的任何属性。您还可以`WatermarkTextStyle`在使用时使用该属性，`WatermarkText`并指定`Style`要与提供的水印一起使用`TextBlock`- 例如：

```
<xc:WatermarkTextBox
    WatermarkText="Type something">
    <xc:WatermarkTextBox.WatermarkTextStyle>
        <Style
            TargetType="TextBlock">
            <Setter
                Property="FontSize"
                Value="18" />
            ... 
```

[您可以在此处](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/9c814f6c67c5#WinRTXamlToolkit.Sample/Views/Controls/WatermarkTextBoxTestPage.xaml)查看示例以查看一些选项。

# c++ - 是否符合 libuuid rfc4122

> ID：15527208
> 
> 赞同：2
> 
> 时间：2013-03-20T15:01:28.140
> 
> 标签：c++, uuid

我目前正在使用 libuuid 的 uuid_generate_random 和 uuid_unparse 来生成 uuid。根据我正在从事的项目的合同要求，我们系统生成的 uuid 应该是符合 rfc4122 的。问题来了：“libuuid 生成的 uuid”是否符合 RFC4122？如果没有，还有什么可以用来在 debian OS 下使用 c++ 生成符合 RFC 4122 的 uuid，我在想：Boost::UUID 不太确定它在合规性方面的情况如何。如果您能分享知识，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:31:46.027

[boost::uuids::random_generator](http://www.boost.org/doc/libs/1_53_0/boost/uuid/random_generator.hpp)符合 RFC 4122。

我没有在 libuuid 手册页中找到对 RFC 4122 的引用。可能 libuuid 比 RFC 更老。但[实现](http://git.kernel.org/cgit/fs/ext2/e2fsprogs.git/tree/lib/uuid/gen_uuid.c#n629)看起来满足要求。

# jquery - 水平手风琴菜单

> ID：15527214
> 
> 赞同：0
> 
> 时间：2013-03-20T15:01:52.873
> 
> 标签：jquery, menu

我无法按照水平手风琴菜单的方式创建一些东西。我试图在代码运行时将其保持在最低限度，这样它就不会出现在页面上，并且可以轻松地在移动设备或桌面设备中使用。

我已经设法为要打开的菜单设置动画，但现在我想在单击另一个按钮时关闭一个打开按钮。我想这是一个简单的“if”“else”语句，但我一遍又一遍地尝试，似乎无法让它按我的意愿工作。

这是我拥有的代码：

**HTML：**

```
<nav>
                <ul>
                    <li> <a href="#"><img src="images/header_icon_home.gif" width="45" height="45" alt="home"></a>
                      <span>home</span></li>
                    <li> <a href="#"><img src="images/header_icon_portfolio.gif" width="45" height="45" alt="porfolio"></a>
                      <span>portfolio</span></li>
                    <li> <a href="#"><img src="images/header_icon_blog.gif" width="45" height="45" alt="blog"></a>
                      <span>blog</span></li>
                    <li> <a href="#"><img src="images/header_icon_about.gif" width="45" height="45" alt="about"></a>
                      <span>about</span></li>
                    <li> <a href="#"><img src="images/header_icon_contact.gif" width="45" height="45" alt="contact"></a>
                      <span>contact</span></li>
                    <li> <a href="#"><img src="images/header_icon_search.gif" width="45" height="45" alt="search"></a>
                  <span class="search"><input name="search" id="search" ></input></span></li>
                </ul>
            </nav> 
```

**CSS：**

```
nav ul {
 position:absolute;
 right:0;
 top: 42px;
}
nav ul li {
 display: inline-block;
 float:left;
}
nav ul li img {
 float:left;
}
nav ul li span {
 background-color: #333;
 color: #fff;
 padding: 13px 5px;
 float:left;
 font-size:16px;
 display:none;
}
nav ul li span.search {
 padding: 12px 10px 12px 5px;
 background-color: #666;
}
nav ul li span input {
 font-size:12px;
} 
```

**JAVASCRIPT：**

```
$('nav ul li a').click(function() {
 $(this).next().animate({width: 'toggle'}, 200);
   }); 
```

或者

```
$('nav ul li a').click(function() {
        $(this).next().animate({width: 'show'}, 600);
      }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:08:37.827

尝试这个

```
$('nav ul li a').click(function() {
    $('nav ul li a').next().animate({width: 'hide'}, 200);
    $(this).next().animate({width: 'toggle'}, 200);
}); 
```

**[演示](http://jsfiddle.net/u2jSK/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:09:44.857

尝试这个：

```
$('nav ul li a').click(function() {
  $(this).parent().siblings().find('span').animate({width: 'hide'}, 200);
  $(this).next().animate({width: 'toggle'}, 200);
}); 
```

**[样本](http://jsfiddle.net/qaaWk/)**

# soap - LoadRunner 肥皂测试作为模板

> ID：15527215
> 
> 赞同：0
> 
> 时间：2013-03-20T15:01:53.813
> 
> 标签：soap, wsdl, loadrunner

我希望将我的soap 请求保存为文件系统上的模板，并拥有可以通过编辑合同/wsdl 的替代品替换的占位符。Loadrunner 是否支持soap模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:19:09.760

我一直这样做。我只是使用带有 Web 自定义请求的标准 Web 虚拟用户。我在脚本的初始化阶段加载文件，以避免在测试期间负载生成器上的磁盘 I/O，然后一遍又一遍地重用它以进行具有多个参数集的多次迭代。请参阅 C 标准文件 I/O 和内存管理例程以加载文件和管理内存。

在源请求文件中，只需在源文件中包含您的参数标记“{paramname}”。

工作得很好。

# url - 301重定向网页，而不是域

> ID：15527219
> 
> 赞同：0
> 
> 时间：2013-03-20T15:02:03.620
> 
> 标签：url, redirect, dns

我可以对 url 使用 301 重定向吗？

例如：我希望能够自动重定向页面 url，即

```
http://www.somesite.com/somepage 
```

至

```
http://www.somesite.com/some_new_page 
```

我可以使用 301 重定向来完成此操作，还是 301 重定向仅适用于域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:05:08.183

是的，您可以使用此状态进行永久重定向。

确保将此状态编号与`location` [标头](http://en.wikipedia.org/wiki/HTTP_location)一起返回；标头的值`location`应该是您希望重定向到的 URL。

# rabbitmq - 在 rabbitmq 上删除队列时通知消费者

> ID：15527226
> 
> 赞同：1
> 
> 时间：2013-03-20T15:02:12.803
> 
> 标签：rabbitmq

我有一些通过`autodelete:yes`. 这些都是发布者和消费者。但基本上现在让我们假设他们正在发布消息。因为每个客户端都有一个唯一的绑定密钥，所以我可以对使用这些机器的机器上的每条消息进行明确的处理。一切正常。

现在，如果客户端崩溃或我手动终止它（通过 SIGINT，ctrl+c），那么队列将被删除。有什么方法可以通知远程机器上的消费者队列已被删除？

我正在考虑在我的客户端应用程序上创建一个信号处理程序，因此每当我捕获到 SIGINT 或 SIGTERM 时，我都会通知远程消费者（我会向他们发送一条消息，说明具有唯一 ID 的队列将被删除）

有没有其他方法可以做到这一点，或者我的方法是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:20:51.770

作为消息传递的一般规则，消费应用程序不关心生产应用程序的状态。

在 RabbitMQ 中，生产应用程序可以通过两种机制之一了解消费应用程序的状态。第一种（也是首选）方法是通过[`Dead-Letter Exchange (dlx)`](http://www.rabbitmq.com/dlx.html). 当您的消息无法传递时（因为目标队列不存在），它会在此处路由，并且您的应用程序能够从 DLX 上配置的队列中提取消息，以确定它们是否没有到达目的地.

第二种方法是[`Mandatory`](http://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish.mandatory)在消息上设置标志。如果目标队列不再存在，这将导致代理通过 Basic.Return 方法将消息直接发送回生产应用程序。

如果上述项目不能满足您的需求，您可能需要重新审视您的架构，因为可能有更好的方法来设计您的应用程序。

# python - django 应用所有页面的通用特性，但项目不通用

> ID：15527227
> 
> 赞同：2
> 
> 时间：2013-03-20T15:02:15.510
> 
> 标签：python, django

我正在用 django 编写一个简单的博客应用程序。其中包括，我想在博客应用程序的所有页面上提供日期存档和标签云。但是，项目的所有页面都不需要这样做。

我相信使用上下文处理器会使这些项目的所有页面都可用？如果是这样，这对于我需要的东西来说似乎有点矫枉过正，因为在与博客应用程序无关的页面上存在不需要的查询和额外的上下文变量。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:44:53.407

创建自定义模板标签，该标签将显示所需的组件，如标签云。请参阅 [手册](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)以供参考：

```
from django import template
from django.template.loader import render_to_string

register = template.Library()

@register.simple_tag
def tag_cloud(): 

    tags = ['foo', 'bar']         # Fetch the tag cloud data here

    return render_to_string('tag_cloud_template.html', {'tags: tags}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:46:03.837

我看到了 2 个解决方案：1）在上下文处理器中，您可以拥有请求对象，因此您可以检查 url 是否在博客应用程序中。如果您在博客应用程序中，则注入所需的数据

2）您可以创建一个上下文处理器，注入一个仅在模板计算中计算所需数据的函数......

```
def mycontextpreprosessor(request):
    def my_func_who_work_hard():
        return range(10)

    return {"cloud",my_func_who_work_hard} 
```

在此示例中，仅当您的模板执行时才会调用 range 函数

```
{{cloud}} 
```

并将输出

```
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

# python - Python MySQL 不一致的提交

> ID：15527233
> 
> 赞同：0
> 
> 时间：2013-03-20T15:02:27.360
> 
> 标签：python, mysql

我怀疑这主要是一个mysql问题。

我最近继承了一些 python 代码（我不完全是 pythonista）。构建两个查询然后一次将它们发送到数据库的代码看起来非常简单

```
query_1 = "insert into %s SELECT Foo, Bar FROM %s where Type in ('AB','BC') group by Foo;" %(filteredTable, rawTable)
self.connect(self.credentials, query_1)

query_2 = 'insert into %s SELECT a.*, b.Bar  FROM %s a left join %s b on a.Foo  = b.Foo  ;' % (finaltable, filteredTable, otherTable)
self.connect(self.credentials, query_2)

def connect(self, credentials, query):
    connection = None
    server, user, password, database = credentials
    try:
        connection = MySQLdb.connect(server, user, password, database, connect_timeout=10)
        cursor = connection.cursor()
        cursor.execute(query)
        result = cursor.fetchall()
    except MySQLdb.Error, e:
        self.logger.exception('event_description="Error with mysql"')
        raise
    if connection:
        connection.close()
    return result 
```

query_2 有效，query_1 失败，除非我添加 cursor.execute("COMMIT;")。

我可以在我的代码中轻松解决这个问题，但我对为什么会这样感到目瞪口呆。为什么一个没有提交就成功了，而另一个失败了？

# asp.net - 应用程序之间的表单身份验证

> ID：15527238
> 
> 赞同：1
> 
> 时间：2013-03-20T15:02:44.397
> 
> 标签：asp.net

我有一个带有表单身份验证的 ASP.NET 应用程序。我还有一个子文件夹设置为单独的应用程序（不是虚拟目录），使用相同的应用程序池并使用相同的 web.config 身份验证设置。

出于某种我不明白的原因，这两个应用程序不共享相同的身份验证。例如，FormsAuthentication.SetAuthCookie 似乎独立工作，而 User.Identity.Name 在两个应用程序中返回不同的值。

我的问题是，他们如何共享相同的身份验证？我想登录一个应用程序，并以相同的身份出现在另一个应用程序上。我可以看到 .ASPAUTH cookie 具有相同的值（显然，因为它们在同一个域下）。但是单点登录如何工作？

谢谢 Themos

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:07:15.737

即使应用程序在同一个 AppPool 中，两者的机器密钥也不同。通常，身份验证 cookie 使用机器密钥加密。

机器密钥的默认行为是使用[IsolateApps ，它为](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.100%29.aspx)*每个 IIS 站点应用程序*生成不同的机器密钥，而不是应用程序池。

由于您有两个不同的机器密钥，它们无法解密应用程序之间的身份验证 cookie。您需要为两个应用程序添加一个静态机器密钥（相同）。

您可以使用[类似这样的网站](http://www.betterbuilt.com/machinekey/)来生成您自己的机器密钥。

此外，MSDN 文章[Forms Authentication Across Applications](http://msdn.microsoft.com/en-us/library/eb0zx8fc%28v=vs.100%29.aspx)还指定了需要在两个应用程序之间匹配的设置。

# c++ - 冒泡排序优化 C++

> ID：15527239
> 
> 赞同：2
> 
> 时间：2013-03-20T15:02:50.783
> 
> 标签：c++, bubble-sort

我只是练习了一下，并尝试使用冒泡排序算法对数组进行排序。编译器没有给我任何警告或错误，它运行良好！首先你输入一个数字 10 次，然后程序对它们进行排序 + 打印它们。

代码：

```
#include <iostream>
using namespace std;

void arr_sort(int* array, const int arr_size){

int temp = 0;   //Temporary integer to store (if necessary) the current element
int end = 0;    //Run time condition

while(end++ != arr_size){ // Will loop max. 10 times

    for(int i = 0; i < arr_size; i++){

        if(array[i] > array[i + 1]){    //If the current element 
            temp = array[i];    //is bigger than the next

            array[i] = array[i + 1];//Change the positions
            array[i + 1] = temp;    
        }
    }
}

}

int main(){

int arr_input[10];

for(int i = 0; i < 10;i++)      //The user has to type 10 numbers
    cin >> arr_input[i];        //which will be stored in this array

arr_sort(arr_input, 10);        //sorts the array

cout << endl << endl;

for(int i = 0; i < 10; i++)     //Print out the array!
    cout << arr_input[i] << ", ";
cout << endl;

return 0;
} 
```

我唯一的问题是 arr_sort 函数中的 while 循环。我的意思是它对数组进行排序，直到**end具有与****arr_size**相同的值。但通常不需要那么长时间。我现在的问题......我该如何改进这个功能？如何测试数组是否已完全排序，以便 while 循环可以停止而无需再次运行......？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:07:40.727

在您的`for`循环之前，假设它已排序：

```
bool sorted = true; 
```

在您的`if`声明中，记录它未排序：

```
sorted = false; 
```

在你的循环之后`for`，如果没有证据表明它没有排序，则返回：

```
if ( sorted ) return; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:06:48.010

在 for 循环之外，放置一个 bool 并将其设置为 false。在交换块内，将 bool 设置为 true。在 for 循环之后，检查布尔值，如果它仍然为 false，则没有进行交换，因此数组已排序，因此退出 while 循环。

```
while(end++ != arr_size){ // Will loop max. 10 times

    bool swapped = false;
    for(int i = 0; i < arr_size; i++){

        if(array[i] > array[i + 1]){    //If the current element 
            temp = array[i];    //is bigger than the next

            array[i] = array[i + 1];//Change the positions
            array[i + 1] = temp;
            swapped = true;    
        }
    }
    if (!swapped) break;
} 
```

# hibernate - 何时在 grails 中使用 executeUpdate

> ID：15527247
> 
> 赞同：4
> 
> 时间：2013-03-20T15:03:25.720
> 
> 标签：hibernate, grails, hql, grails-orm

我正在查看我当前项目中的一些 grails gorm 代码，我想知道以下 HQL 方法的优缺点是什么：

```
UploadUpsell.executeUpdate("update UploadUpsell set processedStatus=:newStatus, processedDate=:processedDate where processedDate is null and period=:period",
                            [newStatus: EXPIRED_UPSELL_STATUS, processedDate: new Date(), period: flow.period]) 
```

我本来会采用更惯用的方法

```
UploadUpsell.findAllByPeriodAndProcessedDate(flow.period, null).each { UploadUpsell uploadUpsell ->
                    uploadUpsell.with {
                        processedStatus = EXPIRED_UPSELL_STATUS
                        processedDate = new Date()
                        save()
                    }
                } 
```

我相信我的方法会更具可测试性并且更具可读性，但我想知道我的想法是否只是教条

据我所知，grails 模拟框架不支持 HQL 语句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:29:37.420

您的方法更具可读性，但性能要差得多。您将所有实例（包括不会更改的数据）读入内存，进行更改，然后将所有内容（包括未更改的值）推送回数据库。如果您的域类及其值很小，这没什么大不了的（尤其是在记录数不太大的情况下），但通常这种方法是一个可伸缩性问题。

通过直接使用 executeUpdate 运行查询，您可以让数据库做它擅长的事情——它可以找到需要更新的记录并完成工作，而无需数据库和 Web 服务器之间的所有不必要的流量。

没错，单元测试不支持 HQL，但您不应该对域类进行单元测试。如果您不针对数据库测试持久性，那么您所测试的只是模拟框架。

# security - 系统分析器让我用户登录但未通过身份验证

> ID：15527257
> 
> 赞同：0
> 
> 时间：2013-03-20T15:03:57.440
> 
> 标签：security, authentication, symfony, login, symfony-2.1

我以为我终于能够使用 Symfony 2 正确管理登录。但是当我在登录后被重定向到另一个页面时，系统探查器会告诉我用户已登录但未通过身份验证，并且角色：`ROLE_USER`.

但是，如果我返回登录页面，我正确地认为用户已登录，已通过身份验证并具有角色：`ROLE_USER`

我希望这是一个愚蠢的错误，因为我最近开始使用 Symfony。希望有人已经遇到过这个问题？谁能帮我？

**编辑 1**：这是我的 security.yml

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Wearplay\UserBundle\Entity\User: 
            algorithm:        sha1
            encode_as_base64: false
            iterations:       1

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        #ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        user:
            entity: { class: WearplayUserBundle:User }

    firewalls:
        main:
            pattern:  ^/
            provider: user
            form_login:
                check_path: login_check
                login_path: login
                default_target_path: /home
            anonymous: true
            remember_me:
                key:      "%secret%"
                lifetime: 2232000 
                path:     /
                domain:   ~ 
            logout:
                path:   /logout
                target: /home

        #secured_area:
        #    provider: user
        #    pattern:    ^/
        #    form_login:
        #        check_path: login_check
        #        login_path: login
        #        default_target_path: home
        #    anonymous: ~

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: http }
        #- { path: ^/logout, roles: IS_AUTHENTICATED_FULLY, requires_channel: https }
        #- { path: ^/home, roles: ROLE_USER, requires_channel: https }
        #
        # You must uncomment the two following rules to restrict access to paths
        # starting with the /_internal prefix to only localhost
        #- { path: ^/_internal/secure, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 }
        #- { path: ^/_internal/secure, roles: ROLE_NO_ACCESS } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:32:05.553

尝试：

```
jms_security_extra:
    secure_all_services: false
    expressions: true

security:
    encoders:
        Wearplay\UserBundle\Entity\User: 
            algorithm:        sha1
            encode_as_base64: false
            iterations:       1

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER

    providers:
        user:
            entity: { class: WearplayUserBundle:User }

    firewalls:
        login_firewall:
            pattern: ^/login$
            anonymous: ~ 
        main_firewall:
            pattern:  ^/
            provider: user
            form_login:
                check_path: /login_check
                login_path: /login
                default_target_path: /home
            remember_me:
                key:      "%secret%"
                lifetime: 2232000 
                path:     /
                domain:   ~ 
            logout:
                path:   /logout
                target: /home

    access_control:
        - { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: http }
        - { path: ^/, roles: ROLE_USER, requires_channel:https } 
```

# python - 使用 Django 和 django-facebook 包将状态发布到 Facebook

> ID：15527260
> 
> 赞同：1
> 
> 时间：2013-03-20T15:04:01.887
> 
> 标签：python, django, django-facebook

我安装了 django-Facebook 和 Django-registration。Django-registration 工作正常，但 django-Facebook 不是。我需要通过我网站中提供的 textarea 将状态发布到 Facebook。因为我是 Django 的新手，所以一个清晰的分步指南会很有帮助。提前致谢！

# sublimetext2 - Sublime Text 2 在脚本区域内使用 Zen 编码又名 Emmet

> ID：15527263
> 
> 赞同：5
> 
> 时间：2013-03-20T15:04:07.337
> 
> 标签：sublimetext2, mustache, emmet

在脚本区域（对于 Moustache.js）中使用带有 Emmet（以前的 Zen Coding）的 Sublime Text 2 时，我们会丢失快速代码和 kb 快捷方式。

自动完成将 HTML 标记替换为 Javascript 片段，这是可以理解的，因为我们`<script id="DataTemplate" type="text/html">`在尝试进行 HTML 标记时处于内部。

是否可以在标签内取回 Zen 编码（又名 Emmet 快速代码）`<script>`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T12:29:41.703

您可以在任何地方使用 Ctrl+E 展开缩写：[https ://github.com/sergeche/emmet-sublime#available-actions](https://github.com/sergeche/emmet-sublime#available-actions)

覆盖标签的 Tab 键`<script>`（因此，对于 JavaScript 语法）不是一个好主意，因为它会破坏您的 JS 片段和完成。

# module - Jess -> 如何自由更改模块之间的执行？

> ID：15527266
> 
> 赞同：0
> 
> 时间：2013-03-20T15:04:11.537
> 
> 标签：module, jess

我正在开发一个游戏项目，我在 Jess 中有 3 个模块。MAIN 模块，然后是 Environment 模块和 Movement 模块。

我一直在尝试更改这 3 个模块之间的执行，但没有成功。我的想法如下：

1.  执行主模块，使用初始事实触发规则。先关注环境模块，再关注运动模块

2.  从环境模块执行规则

3.  从运动模块执行规则

4.  重复直到停止

我一直在使用主模块（焦点环境运动）中的（焦点）功能，然后它正确执行环境模块并进入运动模块。同样，这个也正确执行。

然后我将重点放在主模块上（我还尝试再次断言初始事实以尝试强制触发初始规则。但是，它不起作用）。

无论我做什么，它都不会再次执行主模块。

谁能给我一些见解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:12:19.537

无论模块焦点如何，给定规则只会针对给定匹配触发一次。如果您需要 MAIN 中的规则再次触发，您需要首先删除导致它们触发的初始条件，然后重新创建它们。这可能就像收回`(initial-fact)`然后重新声明它一样简单。缩回部分很重要！

# node.js - 日期聚合框架

> ID：15527270
> 
> 赞同：0
> 
> 时间：2013-03-20T15:04:26.830
> 
> 标签：node.js, mongodb, date, aggregation-framework

我正在尝试在 Mongo 中按日期聚合数据，但我无法完全实现我想要的。现在，我正在使用这个：

```
db.aggregData.aggregate( { $group: {_id: "$Date".toString(),  
                                   tweets: { $sum: "$CrawledTweets"} } }, 
                         { $match:{ _id: {$gte: ISODate("2013-03-19T12:31:00.247Z") }}}, 
                         { $sort: {Date:-1} } 
                       ) 
```

结果是这样的：

```
"result" : [
                {
                        "_id" : ISODate("2013-03-19T12:50:00.641Z"),
                        "tweets" : 114
                },
                {
                        "_id" : ISODate("2013-03-19T12:45:00.631Z"),
                        "tweets" : 114
                },
                {
                        "_id" : ISODate("2013-03-19T12:55:00.640Z"),
                        "tweets" : 123
                },
                {
                        "_id" : ISODate("2013-03-19T12:40:00.628Z"),
                        "tweets" : 91
                    },
                {
                        "_id" : ISODate("2013-03-19T12:31:00.253Z"),
                        "tweets" : 43
                },
                {
                        "_id" : ISODate("2013-03-19T13:20:00.652Z"),
                        "tweets" : 125
                },
                {
                        "_id" : ISODate("2013-03-19T12:31:00.252Z"),
                        "tweets" : 30
                }
 ],
        "ok" : 1 
```

它似乎可以完成这项工作，但经过进一步检查，我们发现存在重复：
ISODate("2013-03-19T12:31:00.253Z") 和 ISODate("2013-03-19T12:31:00.252Z") .
唯一改变的是 Z 之前的最后一位。

所以这是我的问题。这部分是什么？我该怎么做才能在聚合中忽略它？

先感谢您。

编辑：我想按日期汇总，所以全年/月/日+小时和分钟。其余的我不关心。

编辑：我的数据库在 mongolab，所以我在 2.2

好吧，我以另一种方式做到了：我将所有日期的秒/毫秒保存为 0。所以我可以保留一个简单的聚合，而不需要更多的代码服务器端，这要感谢 moment.js

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:35:17.203

您正在尝试按“整个”日期聚合，换句话说，从 ISODate() 中删除时间，对吗？有几种方法可以做到这一点，我在我的博客上的帖子中详细描述了它们

[聚合框架的愚蠢约会技巧](http://www.kamsky.org/1/post/2013/03/stupid-date-tricks-with-aggregation-framework.html)。

您可以在那里看到完整的分步细分，但总结一下，您有两个选择：

*   如果您不关心聚合值是否为 an`ISODate()`那么您可以使用`{$year}`,`{$month}`和相中的`{$dayOfMonth}`运算符`{$project}`将 YMD 拉出然后 {$group} 。

*   如果您确实关心分组值保持不变，`ISODate`您可以`{$subtract}`将时间部分留在`{$project}`阶段并保留`ISODate()`类型 - 需要注意的是，此方法需要 MongoDB 2.4 [（刚刚发布）](http://blog.mongodb.org/post/45754637343/mongodb-2-4-released)，它增加了对日期算术和`$millisecond`运算符的支持（参见确切博客文章中的代码）。

这可能是您想要的：

```
db.aggregData.aggregate([
  { 
    $project:{ 
        CrawledTweets: 1,
        newDate: { 
            year:{$year:"$Date"}, 
            month: {$month:"$Date"}, 
            day: {$dayOfMonth:"$Date"}, 
            hour: {$hour: "$Date"}, 
            min: {$minute: "$Date"}
        }   
    }   
  },
  { 
    $group: {
        _id: "$newDate",
        tweets: { $sum: "$CrawledTweets"}
    }   
  }
]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T16:11:04.707

You can now use the MongoDB date aggregation operators, I have a post on my blog that goes over the Schema setup, using it in Node.js, etc:

[http://smyl.es/how-to-use-mongodb-date-aggregation-operators-in-node-js-with-mongoose-dayofmonth-dayofyear-dayofweek-etc/](http://smyl.es/how-to-use-mongodb-date-aggregation-operators-in-node-js-with-mongoose-dayofmonth-dayofyear-dayofweek-etc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T10:22:52.783

如果不是 Mongo 专家，也不知道你的数据库字段，我会想出这样的东西。也许您可以在此基础上构建：

```
db.aggregData.aggregate(
{ 
    $project:{ 
        CrawledTweets: 1,
        groupedTime: { 
            year:{$year:"$_id"}, 
            month: {$month:"$_id"}, 
            day: {$dayOfMonth:"$_id"}, 
            hour: {$hour: "$_id"}, 
            min: {$minute: "$_id"}
        }   
    }   
},
{ 
    $group: {
        _id: { groupedTime: "$CrawledTweets" },
        tweets: { $sum: "$tweets"}
    }   
}
) 
```

# android - OpenVpn 安卓应用程序中的错误

> ID：15527273
> 
> 赞同：3
> 
> 时间：2013-03-20T15:04:35.607
> 
> 标签：android, openvpn

我已经从 [https://code.google.com/p/ics-openvpn/source/checkout](https://code.google.com/p/ics-openvpn/source/checkout)下载了 openvpn 代码 ，它编译成功，但是当我创建配置文件并尝试连接它时..它会给我一个错误“写入 minivpn 二进制文件时出错“

自述文件说可选：将 minivpn 从 lib/ 复制到资产（如果您想要自己的编译版本）

但我还没有在包中找到任何这样的 minivpn 或 lib 如果有人在它上面工作，请告诉我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:39:26.843

你应该阅读自述文件：

> 在项目的根目录中执行 ./build-native.sh。

minivpn 部分已过时。早期版本用于在存储库中发布编译版本。

# javascript - 将事件侦听器添加到动态创建的元素

> ID：15527276
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:04:51.840
> 
> 标签：javascript, html, javascript-events

我需要向动态创建的元素添加一个新的事件侦听器，但我无法让侦听器附加。

我尝试了这种方法，但没有成功。[在动态创建的元素上添加事件监听器](https://stackoverflow.com/questions/14258787/add-event-listener-on-elements-created-dynamically)

```
 b[0] = document.createElement("INPUT");
 b[0].name = "dt";
 b[0].type = "text";
 b[0].value = "YYYY-MM-DD HH:MM:SS";
 b[0].addEventListener('focus', removeVal);
 b[0].addEventListener('blur', addDTFormat);
 b[0].className = "fields"; 
```

下面是 chrome 开发工具的截图。我有带有正确参数的添加侦听器方法。但在属性窗格中，该元素的 onblur 和 onfocus 事件为空。

![在此处输入图像描述](../Images/7de7daf4f168fe13f09c8517960ec6d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:08:14.953

它应该是`focus`和`blur`：

```
b[0].addEventListener('focus', removeVal);
b[0].addEventListener('blur', addDTFormat); 
```

但是 IE`attachEvent`需要`on`前缀。

# type-safety - deuce STM 类型安全吗？

> ID：15527279
> 
> 赞同：0
> 
> 时间：2013-03-20T15:04:57.170
> 
> 标签：type-safety, stm, pi-calculus

我已经为**pi calculus编写了一个****JAVA**库，它利用**Deuce STM**来管理并发进程。 我进一步希望证明我的库的类型安全。 Deuce STM 库类型安全吗？如果是，将不胜感激一些相同的链接。

# c++ - 这个拷贝构造函数是做深拷贝还是浅拷贝？

> ID：15527282
> 
> 赞同：1
> 
> 时间：2013-03-20T15:05:02.737
> 
> 标签：c++, constructor, copy-constructor

我有一个`Directory`用某些成员调用的类，后跟一个复制构造函数。

```
class  Directory{

private:
    char * Name;                
    int Telephone_Number;   
    char * Address;             
public:
    Directory (Directory & b)    
    {
        Name = new char [10];   //Just assume that the name will not be greater than                                    //10 characters
        Address = new char [30]; //Same here 
        strcpy (Name, b.Name);
        Telephone_Number = b.Telephone_Number;
        strcpy (Address, b.Address);
    }
}; 
```

我想知道我的复制构造函数是执行深复制还是浅复制。我知道这是深度复制`Address`，`Name`因为正在为它们分配新内存，但是呢`Telephone_Number`？

我的代码是在做浅拷贝还是深拷贝？任何人都可以向我解释一般的复制构造函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:07:01.370

`Telephone_Number`在类中声明为 an`int`并按值复制（没有引用或指针或任何东西），因此此构造函数正在执行**深度复制**.

[在Wikipedia](http://en.wikipedia.org/wiki/Copy_constructor)或任何优秀的 C++ 书籍中都有很多关于复制构造函数的信息，您应该先阅读类似的内容，然后看看您是否还有其他具体问题。

可能值得花时间阅读，在初始化和分配您应该理解的对象时，有一些重要的规则可以控制复制构造函数的使用方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:16:18.557

> 显然这是对地址和名称的深度复制，因为正在为它们分配新的内存，但是 Telephone_Number 呢？

一个整数，就像电话号码一样，总是被深度复制。

> 我当前的代码是在做浅拷贝还是深拷贝？

深的

> 任何人都可以向我解释一般的复制构造函数和复制构造函数吗？

编译器合成的复制构造函数只会逐个复制生成成员，即复制指针值，而不是复制其内容。编译器合成的复制构造函数总是很浅的。每当需要深度复制时，课程作者都必须编写它（就像您所做的那样）。

此外，应更正复制构造函数的签名，以通过**const**`b`引用传递原始对象（此处为），以防止意外修改：

 **```
Directory (Directory const & b) 
                     ^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:06:34.283

那是深拷贝。您的 int 是*按值*复制的，而不是复制引用或指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:06:44.547

**这是一个深拷贝**。整数总是被复制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:18:29.507

正如其他人所说，这是一个深拷贝。

通常，当您使用复制构造函数时，其想法是获取深层副本。这意味着副本不与原件共享数据。

那么让我们看看以下内容：

```
Directory B = new Directory(A);
A->DoSomething();
B->DoSomething(); 
```

当我阅读上面的代码时，我希望它`A->DoSomething()`只会影响`A`. 同样与`B->DoSomething()`.

但是，深层复制规则可能存在例外情况。也许数据很大，所以制作副本可能效率低下：

```
class LargeData {
    int* PointerToLargeArray;
} 
```

在上述情况下，您可以通过复制指针而不是数据来实现复制构造函数：

```
LargeData(LargeData& b)
{
    PointerToLargeArray = b->PointerToLargeArray;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-22T12:07:08.943

```
Name = new char [10];
Address = new char [30]; //Same here 
strcpy (Name, b.Name);
strcpy (Address, b.Address); 
```

名称和地址将只有实际字符串的内存地址。因此，当我们复制“名称”/“地址”时，我们必须复制“名称”/“地址”指向的实际内容。如果我们只进行如下浅拷贝，

```
b.Name = Name; 
b.Address = Address; 
```

我们只是指向由某人创建的数据，该数据也可能被该人删除。如果有人删除实际内容，我们将指向该内容，假设其可用。现在指针悬空（无指向）。这就是我们使用复制构造函数的原因。

```
Telephone_Number = b.Telephone_Number; 
```

'Telephone_Number' 持有实际值。所以浅拷贝足以复制值

> 名称/地址将具有内存地址，而浅拷贝将仅复制实际值的内存地址。
> 
> Telephone_Number 将有一个整数值，浅拷贝将复制该整数值

所以复制构造函数是“完美”的，做一个深拷贝。**

# python - twinx() 和 axhline

> ID：15527288
> 
> 赞同：4
> 
> 时间：2013-03-20T15:05:14.407
> 
> 标签：python, matplotlib

在 twinx() 之后使用 axhline 时，绘制的水平线仍然遵循第一个 y 轴的坐标。

关于如何使其缩放到第二个 y 轴的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:13:32.997

`axhline`您可以从 Axes 对象调用该方法，如下例所示，或者使用`sca`.

```
import numpy as np
import matplotlib.pyplot as plt

x = np.arange(0, 10, 0.1)
y1 = np.sin(x)
y2 = 2.0 * np.cos(x)

fig = plt.figure()
ax1 = plt.subplot(111)
ax2 = ax1.twinx()

ax1.axhline( 0.5, 0.1, 0.5, color='r', lw=3)
ax2.axhline(-0.5, 0.5, 0.9, color='b', lw=3)

ax1.plot(x, y1, 'r', lw=2)
ax2.plot(x, y2, 'b', lw=2)

plt.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-17T12:16:37.047

如果您无法访问（例如当 Pandas 为您调用它时）的返回值，您可以使用 Axes 对象的和属性`twinx()`访问左右轴。`left_ax``right_ax`

只有其中一个会出现，因为每个都链接到另一个轴。

*   如果您有左轴的句柄，则其`right_ax`属性将指向链接的右轴。
*   如果您有右轴的句柄，它的`left_ax`属性将指向链接的左轴。

例如：

```
df = pandas.DataFrame({'d1': numpy.random.rand(10), 
                       'd2': numpy.random.rand(10) * 10})
ax = df.plot(secondary_y=['d2'])  # returns the left axis
ax.axhline(y=0.5, alpha=0.5)      # draw a line from it
ax.right_ax.axhline(y=10, color="red", alpha=0.5)  # draw a line from the right axis 
```

[![熊猫情节（）输出](../Images/bf4a57bedcae0807c2f4e3e132d67b0d.png)](https://i.stack.imgur.com/cKO8A.png)

# asp.net-mvc - 在表单提交时传递整个模型

> ID：15527293
> 
> 赞同：23
> 
> 时间：2013-03-20T15:05:20.713
> 
> 标签：asp.net-mvc, model, form-submit, html.hiddenfor

我知道我可以使用`@Html.HiddenFor(m => m.parameter)`，并且在提交表单时，该参数将传递给控制器​​。我的模型有很多属性。

是否有更短的方法可以一次将整个模型传递给控制器​​，或者我必须每次都一个一个地做？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-20T15:19:53.357

模型将完整地传递给控制器​​，但不受输入或隐藏字段绑定的属性值将丢失。

您必须在客户端绑定表单中的属性，或者在服务器端重新获取实体。

你似乎在要求类似的东西`@Html.HiddenFor(m => m.Model)`，这是不可能的。对不起

需要记住的一件事是，如果您有大量隐藏字段，您可能会向视图发送比您真正需要的更多的数据。考虑使用视图模型

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-14T17:40:10.647

对于查看此内容的其他任何人，您可以在隐藏的 div 中执行 @Html.EditorForModel() 。您还必须为模型的每个对象属性使用 @Html.EditorFor(model => model.ObjectProperty) 。

```
<div hidden="hidden">
  @Html.EditorForModel()
  @Html.EditorFor(model => model.ObjectProperty)
  @Html.EditorFor(model => model.ListOfObjectsProperty)
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:20:13.680

如果您使用的是 FORM 元素，将发布整个模型。您使用模型的元素显然需要在表单元素内

您还可以使用 JQuery 发布自己说的表单

请参阅其他堆栈问题：[jQuery AJAX submit form](https://stackoverflow.com/questions/1960240/jquery-ajax-submit-form)

仔细查看“Alfrekjv”的答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:20:42.997

这已经内置了。考虑这个模型：

```
public class MyModel
{
    public string PropertyA { get; set; }
    public string parameter { get; set; }
} 
```

现在考虑这个动作：

```
[HttpPost]
public ActionResult PostSomeData(MyModel model)
{
} 
```

MVC 将利用`FormCollection`并尽可能填写`MyModel`类。如果`PropertyA`表格中没有 ，那么它将是`null`。但是，由于您有一个`input`for`parameter`属性，它将被填写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-21T18:44:34.830

您只能检查所需的属性：

```
if (this.ModelState.IsValidField("Name"))
{
     // .....
} 
```

代替：

```
if (this.ModelState.IsValid)
{
     // .....
} 
```

# ruby-on-rails - PostgreSQL 通知和带有 Rails 的 WebSockets

> ID：15527299
> 
> 赞同：5
> 
> 时间：2013-03-20T15:05:30.870
> 
> 标签：ruby-on-rails, ruby, postgresql, websocket

是否有任何 Ruby/Rails 库用于通过 WebSockets发送 PostgreSQL[异步通知？](http://www.postgresql.org/docs/9.0/interactive/sql-notify.html)

我需要通知浏览器客户端以获取特定数据库表中的更新。我知道这可以通过 pub/sub API 来完成，但我正在寻找一个仅限 Postgres 的解决方案。

我为此找到了[Python 教程](http://initd.org/psycopg/articles/2010/12/01/postgresql-notifications-psycopg2-eventlet/)，但找不到 Ruby 的教程。我需要实现它以供生产使用，因此生产就绪的库和教程将是最好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:22:28.347

我不直接知道任何与 websockets 一起使用的东西，但是 queue_classic gem 在 postgres 中使用监听/通知来进行消息队列。这是开始寻找如何完成的好方法。

# python - N 个大小为 n 的列表的元素之间的差异。Python

> ID：15527300
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:05:35.220
> 
> 标签：python, for-loop, tuples

假设我有 N 个大小为 n 的列表，例如 5 个大小为 3 的元组：

```
p = [[9, 9, 9], [17, 14, 18], [14, 15, 17], [14, 15, 17], [14, 15, 15]] 
```

如何找到列表索引之间的差异，例如索引 0：

```
17-9 = 8
14-17 = -3
14-14 = 0
14-14 = 0 
```

然后对于索引 1：

```
14-9 = 5
15-14 = 1
15-15 = 0
15-15 = 0 
```

然后索引 2、3、4。

我需要代码能够动态地执行此操作，以便我可以随意更改 N 和 n。

任何帮助将不胜感激。

编辑：

到目前为止，我已经尝试过：

```
for i in range(10):
    for j, k in product(range(i+1), repeat=2):
        if j!=k:continue
        else:
            print p[i][j]-p[i-1][j] 
```

此代码适用于大小为 2 的元组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:22:38.533

试试这个：

```
>>> for x in zip(*p):
    for i in range(len(x)-1):
        print '{0} - {1} = {2}'.format(x[i+1],x[i],x[i+1]-x[i])

17 - 9 = 8
14 - 17 = -3
14 - 14 = 0
14 - 14 = 0
14 - 9 = 5
15 - 14 = 1
15 - 15 = 0
15 - 15 = 0
18 - 9 = 9
17 - 18 = -1
17 - 17 = 0
15 - 17 = -2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:14:54.363

丑得要命，不是pythonic，容易出现这个世界上的所有错误，但仍然有效（至少应该向您展示您需要的基本逻辑）：

```
In [6]: for i in range(len(p[0])):
            for j in range(1,len(p)):
               print "%d - %d = %d" % (p[j][i], p[j-1][i], p[j][i]-p[j-1][i])
   ...:         
17 - 9 = 8
14 - 17 = -3
14 - 14 = 0
14 - 14 = 0
14 - 9 = 5
15 - 14 = 1
15 - 15 = 0
15 - 15 = 0
18 - 9 = 9
17 - 18 = -1
17 - 17 = 0
15 - 17 = -2 
```

解释

*   第 1 行：根据最大列表的第一个元素检查子列表的长度。

*   第 2 行：从索引 1 开始执行相同操作（因此您可以执行 p[1]-p[0] 而不必担心越界问题）

*   第 3 行：打印您想要的内容

你可以从这个开始修补

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:16:28.857

这应该这样做：

```
for xyz in zip(*p):
   for curr_idx in xrange(len(xyz)-1):
     print xyz[curr_idx+1]-xyz[curr_idx] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:17:51.120

[使用numpy](http://www.numpy.org/)可以轻松完成：

```
p = numpy.array([[9, 9, 9], [17, 14, 18], [14, 15, 17], [14, 15, 17], [14, 15, 15]])
numpy.diff(p.T) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T15:21:29.890

试试这个

```
p = ((9, 9, 9), (17, 14, 18), (14, 15, 17), (14, 15, 17), (14, 15, 15))
index=0
for d in range(1,len(p)):
    print "p["+str(d)+"]["+str(index)+"]-p["+str(d)+"]["+str(index)+"]=",
    print p[d][index]-p[d-1][index] 
```

输出是

```
p[1][0]-p[1][0]= 8
p[2][0]-p[2][0]= -3
p[3][0]-p[3][0]= 0
p[4][0]-p[4][0]= 0 
```

# spring - RMI 和 Spring 在客户端出现 ClassCastException

> ID：15527303
> 
> 赞同：0
> 
> 时间：2013-03-20T15:05:48.183
> 
> 标签：spring, proxy, rmi, classcastexception

我编写了一个简单的客户端服务器架构，可以帮助我从 MS Office 文档中生成 PDF 文件。通信是通过 RMI 处理的，Spring 将整个复杂性包装在服务器端。

我不能在客户端使用 Spring，因为我从 Matlab 2007b 调用方法。由于 Matlab 中对静态和动态类路径的特殊处理，依赖于 spring 的 Jar 会产生异常。

长话短说：我用纯 java 写了一个简单的 RMI 客户端：

```
import com.whatever.PDFCreationService;    

Object service = Naming.lookup("rmi://operations:1099/pdfCreationService");
System.out.println((PDFCreationService)service); //produces ClassCastException 
```

界面：

```
public interface PDFCreationService {
    public PDFCreationConfig createPDF(PDFCreationConfig config) throws IOException, InterruptedException, OperationInterruptionException;
} 
```

从我的“前”弹簧配置（客户端）中提取：

```
<bean id="pdfCreationService" class="org.springframework.remoting.rmi.RmiProxyFactoryBean">
    <property name="serviceUrl" value="rmi://operations:1099/pdfCreationService"/>
    <property name="serviceInterface" value="com.whatever.creator.PDFCreationService"/>
</bean> 
```

在服务器端：

```
<bean class="org.springframework.remoting.rmi.RmiServiceExporter">
    <property name="serviceName" value="pdfCreationService"/>
    <property name="service" ref="pdfCreationService"/>
    <property name="serviceInterface" value="com.whatever.creator.PDFCreationService"/>
    <!-- defaults to 1099 -->
    <property name="registryPort" value="1099"/>
</bean> 
```

当我运行代码时，会引发以下异常：

```
Exception in thread "main" java.lang.ClassCastException: $Proxy0 cannot be cast to com.whatever.creator.PDFCreationService 
```

我 100% 确定我不会尝试像在这篇文章中那样强制转换为一个类：[“ClassCastException: $Proxy0 cannot be cast”在创建简单的 RMI 应用程序时出错](https://stackoverflow.com/questions/9620275/classcastexception-proxy0-cannot-be-cast-error-while-creating-simple-rmi-app)

spring 是否将我的接口封装在不同的接口中？有没有办法找出代理隐藏的接口？

如果您需要更多详细信息来澄清我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:39:25.790

如果远程服务没有实现，则`RmiServiceExporter`导出 a ，（即，不是传统的 RMI 服务器）`RmiInvocationHandler``Remote`

如果您不能`RmiProxyFactoryBean`在客户端使用 a ，这是一个用于将服务调用转换为 的服务接口代理的 bean 工厂，`RemoteInvocations`使用传统 RMI 似乎是更好的选择。

您也可以使用 RmiServiceExporter 导出传统的 RMI 服务，例如

```
public interface PDFCreationService extends Remote {
    public PDFCreationConfig createPDF(PDFCreationConfig config) throws RemoteException;
} 
```

# jsf-2 - 从视图范围的 bean 自动实例化会话范围的 bean

> ID：15527304
> 
> 赞同：0
> 
> 时间：2013-03-20T15:05:48.653
> 
> 标签：jsf-2, weblogic-10.x

每次我尝试将会话范围的 bean 注入我的视图范围的 bean 时，调用该 bean 时都会收到 NullPointerException。[这个问题与自动实例化会话 bean](https://stackoverflow.com/questions/6043259/auto-instantiate-a-session-bean)直接相关吗？

这是我到目前为止所尝试的：

面孔-config.xml

```
<managed-bean>
    <managed-bean-name>sessionBean</managed-bean-name>
    <managed-bean-class>com.example.SessionBean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean>
<managed-bean>
    <managed-bean-name>viewBean</managed-bean-name>
    <managed-bean-class>com.example.ViewBean</managed-bean-class>
    <managed-bean-scope>view</managed-bean-scope>
    <managed-property>
        <property-name>sessionBean</property-name>
        <property-class>com.example.SessionBean</property-class>
        <value>#{sessionMBean}</value>
    </managed-property>
</managed-bean> 
```

会话Bean.java：

```
package com.example;

public class SessionBean {

    public SessionBean() {
        System.out.println("Session is instantiated.");
    }

    public void sayHello() {
        System.out.println("Hello from session");
    }
} 
```

ViewBean.java：

```
package com.example;

public class ViewBean {

    private SessionBean sessionBean;

    private String text = "Look at me!";

    public ViewBean() {
        System.out.println("View bean is instantiated.");

        sessionBean.sayHello();
    }

    public SessionBean getSessionBean() {
        return sessionBean;
    }

    public void setSessionBean(SessionBean sessionBean) {
        this.sessionBean = sessionBean;
    }

    public String getText() {
        return text;
    }
} 
```

以及index.xhtml的相关内容：

```
<f:view>
    <h:outputText value="#{viewBean.text}"/>
</f:view> 
```

这就是我得到的：

```
com.sun.faces.mgbean.ManagedBeanCreationException: Cant instantiate class: com.example.ViewBean.
...
Caused by: java.lang.NullPointerException
    at com.example.ViewBean.(ViewBean.java:12) 
```

这在 weblogic-10.3.6 上运行（或者说不运行），并将随附的 jsf-2-0.war 作为库部署。

我在这里做错了什么？我希望这不是一个容器错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:09:45.140

您不能在构造函数中访问`@SessionScoped`bean 。`@ViewScoped`bean将在调用 bean`@SessionScoped`的构造函数后设置。在某种*init*`@ViewScoped`方法中使用注解来访问bean。`@PostConstruct`*`@SessionScoped`*

 *```
public ViewBean() {
  System.out.println("Constructor viewbean");
}

@PostConstruct
public void init() {
  sessionBean.sayHello();
} 
```

更多链接：
[为什么使用@PostConstruct？](https://stackoverflow.com/questions/3406555/why-use-postconstruct)
[Spring Injection - 在构造函数中访问注入的对象](https://stackoverflow.com/questions/4132437/entitymanager-injection-nullpointerexception)*

# cocoa - 在 NSTextView 中替换 NSTextStorage 的正确方法？

> ID：15527305
> 
> 赞同：11
> 
> 时间：2013-03-20T15:05:49.323
> 
> 标签：cocoa, nstextview, subclassing, nstextstorage

我正在制作一些文本查看器应用程序。目前我需要非常频繁和精确的线路处理能力，所以我想继承`NSTextStorage`类。但我找不到任何方法将新的文本存储设置为`NSTextView`. 我能找到的唯一方法是

```
-[NSLayoutManager replaceTextStorage:] 
```

方法。但令人困惑的是这是否是我想要的。因为它似乎只是替换链接的 NSLayoutManagers 而不是 NSTextView 的文本存储。

我也考虑过继承 NSTextView 和覆盖`-textStorage`方法，但是如果该类不是为子类设计的，它将产生未定义的结果。

有人尝试在 NSTextView 上使用自定义 NSTextStorage 吗？我怎样才能做到这一点？或者这是设计禁止的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-11T18:39:57.303

您可以执行以下操作来更改 NSTextView 的存储：

```
NSTextStorage *newStorage = [[NSTextStorage alloc] initWithString: @"test"];

[aTextView.layoutManager replaceTextStorage: newStorage]; 
```

由于 NSTextStorage 是 NSMutableAttributedString 的子类，您可以使用所有相同的方法来操作它。

# google-apps-script - 使用 DocsList 创建 Google Doc

> ID：15527308
> 
> 赞同：0
> 
> 时间：2013-03-20T15:05:55.813
> 
> 标签：google-apps-script

我尝试了许多不同的方法来使用`DocsList.createFile()`. 根据文档，可以在创建文件时指定文件的 MIME 类型。我想使用 DocsList 以便可以直接在目标文件夹中创建文档。以下创建了一个 Google Doc（我可以在 Drive 中的文件夹中看到它），但是在尝试通过 Drive 界面或以编程方式访问它时出现 404 错误：

```
var folder = DocsList.getFolderById(folderID);
var doc = folder.createFile("FileName", "", "application/vnd.google-apps.document"); 
```

事实上，我无法让[此处指定](https://stackoverflow.com/questions/11412497/what-are-the-google-apps-mime-types-in-google-docs-and-google-drive)的任何 MIME 类型正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:02:11.053

这听起来像是一个值得[Apps Script Issue Tracker](https://code.google.com/p/google-apps-script-issues/issues/list)使用的问题。

请`DocumentApp.create()`在问题详细信息中描述您的用例。

# asp.net-mvc - 如何将 knockoutjs 视图模型传递给 mvc 控制器

> ID：15527309
> 
> 赞同：0
> 
> 时间：2013-03-20T15:05:56.747
> 
> 标签：asp.net-mvc, knockout.js

我在 MVC 控制器中有以下功能

```
public class XyzController:Controller
{
    public ActionResult Index(){...}
    [HttpPost]
    public bool Save(string jsondata)
    {

        //parse json data to insert into the database
    }
} 
```

我想将此视图模型传递给 Save 函数

```
var myObj = function (id) {
    var self = this;
    self.myId = id;    
    self.parameters = ko.observableArray();    
}

var ViewModel = function () {
    var self = this;       
    self.myObjList = ko.observableArray();
    self.sendItems = function() {
             $.ajax({
                     type: "POST",
                     url: '/Xyz/Save',
                     data: ko.toJSON(self),
                     contentType: "application/json; charset=utf-8",
                     dataType: "json",
                     success: function (response) {
                             alert(response);
                     },
                     error: function (request, status, error) {
                            alert(request.statusText);
                     }
             });
    }
}

var vm = new ViewModel()
ko.applyBindings(vm); 
```

如果我将数据作为 JSON.stringify({jsondata:ko.toJSON(self)}) 传递，我确实会得到数据，但是我如何将它转换为一个对象，以便我可以遍历 myObjList 和参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:50:08.937

首先尝试将您的模型更改为这样的：-

```
[JsonObject(MemberSerialization.OptIn)]
    public class Test
    {

        [JsonProperty("myId")]
        public string Id { get; set; }

        [JsonProperty("parameters")]
        public List<string> Parameters { get; set; }//List<string> or whatever it takes int of string

    } 
```

如果它不起作用，请发布您的 Ajax 请求数据......否则......

我遵循这样的方法： -

模型：-

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using Newtonsoft.Json;

namespace MvcApplication4.Models
{
    [JsonObject(MemberSerialization.OptIn)]
    public class Test
    {

        [JsonProperty("id")]
        public string Id { get; set; }

        [JsonProperty("name")]
        public string Name { get; set; }

    }
} 
```

控制器

```
 //
        // POST: /Testing/
        [HttpPost]
        public void Post(MvcApplication4.Models.Test request)
        {

            try
            {
                //DO YOUR STUFF
            }
            catch (Exception ex)
            {
                throw (ex);
            }

        } 
```

AJAX 调用：-

```
var json = {};
json = data.id;
json = data.name;

$.ajax({
            type:  "POST",
            url: ""//Your URL,
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            data: ko.toJSON(json)
        }).done(function (data) {

        }).fail(function (request, error) {

        }); 
```

或者让你的 AJAX 调用像

```
$.ajax({
                type:  "POST",
                url: ""//Your URL,
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                data: ko.toJSON({ id: value1, name: value2 }),//Get value1 and value2 from you ko varables
            }).done(function (data) {

            }).fail(function (request, error) {

            }); 
```

# c# - 如何在 Listview 中制作 viewpager

> ID：15527311
> 
> 赞同：0
> 
> 时间：2013-03-20T15:06:08.977
> 
> 标签：c#, android, xamarin.android

我有一个`Listview`，其中有 4 种不同的视图。其中一个应该是`ViewPager`（就像在 Playstore 中一样）。使用 a`PagerAdapter`我已将3 张图片`Viewpager`放入其中。`Listview`但我无法像 PlayStore 那样流畅。

有没有人尝试过这个并且成功了？

我在适配器中的 Getview 如下所示：

```
public override View GetView(int position, View convertView, ViewGroup parent)
{
    int type = position;

    if (convertView == null) {
        switch (type) {
        case 0: 
            convertView = inflater.Inflate (Resource.Layout.DetailHeader, null);

            TextView tv = convertView.FindViewById<TextView> (Resource.Id.Title);
            tv.Text = Info.title;

            ImageView iv = convertView.FindViewById<ImageView> (Resource.Id.iconImage);
            iv.SetImageDrawable (Info.icon);

            Button Button = convertView.FindViewById<Button> (Resource.Id.Button);
            installButton.Text = "";
            installButton.Click += delegate {
                confirm ();
            };

            break;
        case 1: 
            convertView = inflater.Inflate (Resource.Layout.DetailScroller, null);
            ImageViewPager adapter = new ImageViewPager (context, appInfo.shots);
            ViewPager myPager = convertView.FindViewById<ViewPager> (Resource.Id.imagepager);
            myPager.Adapter = adapter;
            myPager.SetCurrentItem (0, true);

            break;
        case 2:                     
            convertView = inflater.Inflate (Resource.Layout.DetailInfo, null);
            TextView infoView = convertView.FindViewById<TextView> (Resource.Id.textView);
            infoView.Text = "Information";
            break;
        case 3:                     
            convertView = inflater.Inflate (Resource.Layout.DetailInfo, null);
            TextView descView = convertView.FindViewById<TextView> (Resource.Id.textView);
            descView.Text = "Description";
            break;
        }
    }
} 
```

ImageViewPager：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text; 

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Support.V4.View;

namespace EnterpriseAppstore
{
class ImageViewPager : PagerAdapter
{
    Activity activity;
    Android.Graphics.Drawables.BitmapDrawable[] imageArray;

    public ImageViewPager(Activity act, Android.Graphics.Drawables.BitmapDrawable[] imgArray) {
        imageArray = imgArray;
        activity = act;
    }

    public override int Count {
        get {
            return imageArray.Length;
        }
    }

    public override Java.Lang.Object InstantiateItem (View p0, int p1)
    {
        ImageView view = new ImageView(activity);

        view.LayoutParameters = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.FillParent);
        view.SetScaleType(ImageView.ScaleType.FitXy);
        view.SetImageDrawable(imageArray[p1]);
        ((ViewPager) p0).AddView(view, 0);
        return view;
    }

    public override bool IsViewFromObject (View p0, Java.Lang.Object p1)
    {
        return p0 == ((View) p1);
    }

    public override void DestroyItem (View p0, int p1, Java.Lang.Object p2)
    {
        ((ViewPager) p0).RemoveView((View) p2);
    }

} 
```

}

# javascript - jquery mobile pageinit没有看到div

> ID：15527312
> 
> 赞同：2
> 
> 时间：2013-03-20T15:06:13.003
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我想我在这里遗漏了一些非常基本的东西，所以请指出我正确的方向！

jquery mobile 正在加载我的页面，但除了每个页面上的这个之外，我还有一个辅助 ajax 调用来加载页面的一部分。

第一个页面加载工作正常（如您所料），ajax 调用加载并将结果应用于正确的 div。但是，当我导航到我网站上的另一个页面时，我的 ajax 调用触发，我得到了响应，我选择了 div，但是它没有将 ajax 调用的结果应用于 div 的 html 内容，我觉得这有点奇怪。

我在头部调用该`setupLogin()`函数，它确实在每个 pageinit 上正确触发：

```
function setupLogin() {
console.log('calling my ajax...');
    var request = $.ajax({
        url: '/ajax-file.php',
        type: 'GET',
        dataType: 'html'
    });
    request.done(function(msg) {
console.log('got ajax result: '+msg);
        $('#page-header').html(msg); // <- this is doing nothing after initial pageload
var div = $('#page-header');         // <- so I added this line
console.log(div);                    // <- and this line to check it's grabbing the div ok
    });
}

$(document).delegate("body", "pageinit", function(event) {
    setupLogin();
}); 
```

控制台日志行输出完全符合我的预期：

`console.log('got ajax result: '+msg)`记录调用的正确输出`/ajax-file.php`，所以我知道 ajax 调用运行良好。

`console.log(div)`日志：

```
[div#page-header, context: document, selector: "#page-header", constructor: function, init: function, selector: ""…]
    0: div#page-header
    context: document
    length: 1
    selector: "#page-header"
    __proto__: Object[0] 
```

我认为这意味着它正确地找到了 div，并且我完全没有错误。一切都加载正常，除了内容`msg`没有添加到行中的 html 内容`$('#page-header')`中`$('#page-header').html(msg);`。

我认为这与 jquery 如何加载页面有关？`$('#page-header').html(msg);`在将新页面加载到 DOM 之前，是否可以将该行应用于上一页？在这种情况下，我如何在一切都完全加载后触发这个事件？我以为是`pageinit`这样，还是我弄错了？

**更新**

@Brad M ajax 响应的内容只是纯 html：

```
<div id="page-header-top">
    <div id="h_logo"><a><span id="redLogo"></span></a></div>
    <div id="h_login"><a href="/w/touch/banking"><span id="bankingBtn" class="">Banking</span></a></div>
    <div id="h_games"><a href="/w/touch/games/"><span id="allGamesBtn" class="">All Games</span></a></div>
    <div id="h_home"><a href="/w/touch/home"><span id="homeBtn" class=""></span></a></div>
</div>
<div id="page-header-bottom" class="small"><b>User Name &pound;0.00</b><a href="/?logout=true" data-ajax="false"><span class="logout-btn">Log out</span></a></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:41:30.567

改变：

```
$('#page-header').html(msg); 
```

到：

```
$.mobile.activePage.find('#page-header').html(msg); 
```

在您的情况下，标题内容已应用于第一页（仍加载在 DOM 中）。

# jsf-2 - 具有 CDI 注入属性的 ViewScoped ManagedBean 上的 NotSerializableException

> ID：15527319
> 
> 赞同：0
> 
> 时间：2013-03-20T15:06:32.780
> 
> 标签：jsf-2, java-ee-6, cdi, ejb-3.1

我正在尝试创建一个可扩展的 JSF 应用程序。我想在客户端保存视图状态，但我在使用带有 CDI 注入属性的 ViewScoped ManagedBean 时遇到问题。

SomeService.java：

```
@Singleton
public class SomeService {
    // ...
} 
```

SomeBean.java

```
@ManagedBean
@ViewScoped
public class SomeBean implements Serializable {

            @Inject
            private SomeService someService;
} 
```

不幸的是 glassfish 无法序列化`someService`我不想被序列化但重新注入的序列化。

我试图使其瞬态，`someService`在反序列化后访问时最终导致 NullPointerException。

我该怎么办？

我知道我可以将 CDI ViewScoped 与 Seam Faces 或 CODI 一起使用，但我想最大程度地减少依赖关系。

我也可以等待 JEE7，它将为 CDI 提供 @ViewScoped，但我们不会在几个月前使用 JEE7。

**更新**：
我只是想补充一点，我正在使用捆绑在一个 jar 中的嵌入式 EJB，该 jar 本身与我的战争相关联。NotSerializableException 的堆栈跟踪具有以下消息： `com.company.core.service.__EJB31_Generated__SomeService__Intf____Bean__`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:59:31.510

我不喜欢自己回答自己的问题，但经过更多研究后，我发现这是 Mojarra 2.1.6 中的一个错误（我使用的是 Glassfish 3.1.2.2），现在在 Mojarra 2.1.20 中已解决。

要更新 Mojarra，您只需下载更新版本（例如：[https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/2.1.20/javax.faces-2.1.20。 jar](https://maven.java.net/content/repositories/releases/org/glassfish/javax.faces/2.1.20/javax.faces-2.1.20.jar) ) 并将其作为 javax.faces.jar 放在 $GLASSFISH/modules 目录中。

# c - srand() 触发不在映射区域内的访问

> ID：15527321
> 
> 赞同：4
> 
> 时间：2013-03-20T15:06:38.400
> 
> 标签：c, srand

我正在 Linux 上开发一个在矩阵上运行的程序。我在一段代码中遇到问题，该代码生成矩阵的随机值（它会生成段错误）这是触发我的问题的一段代码。

```
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#define INFINITO 10
#define MAX 11
#define MR 100
#define MC 100
#define MEMBER 1
#define NONMEMBER 0

double shortpath(double MatQuad[][MR+MC], int, int ,int precede[]);

int main(){

int d;
int c1, c2, i, j, p , h, l, k, x, mrr, rf, cf;
double X[MR][MC], F1k[MR+1][MC];
double MatQuad[MR+MC][MR+MC];
double P[MC][MC][MC];
int precede[MR+MC];
double best_Delta, Delta;
int best_i, best_j, best_h, best_l;

srand(8);
   for(j=0; j<MR; ++j){
     for(h=0; h<MC; ++h)
       X[j][h]=(rand()% MAX)*0.1;
   } 
```

使用 Valgrind，我在线获得

```
srand(8); 
```

错误信息：

> 访问不在地址 0x7FE7EA0B8 [PID: 2484] 的映射区域内

您认为语义或......有什么问题吗？我想给 srand 一个系统时钟所取的值，但我的尝试没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T15:09:58.803

```
double X[MR][MC], F1k[MR+1][MC];     // 80KB + 80.8KB
double MatQuad[MR+MC][MR+MC];        // 320KB
double P[MC][MC][MC];                // 8MB
int precede[MR+MC];                  // 800B 
```

我怀疑你[的堆栈数据太多了](http://en.wikipedia.org/wiki/Stack_overflow#Very_large_stack_variables)。堆栈空间有限。确切的大小取决于平台和编译器；如果您在数百 KB 范围内，那么您正在与灾难调情。像这样的大型数组作为静态数据或在堆上会更好。尝试`static`为每一个添加限定符，或使用`malloc()`.

# twitter-bootstrap - 用 divshot.com 覆盖 LESS 变量

> ID：15527325
> 
> 赞同：3
> 
> 时间：2013-03-20T15:06:45.760
> 
> 标签：twitter-bootstrap, less, divshot

我正在玩 divshot.com UI 创建者。

它很光滑。

不过，我似乎无法覆盖 LESS 变量。我确定我只是在做一些愚蠢的事情。

如果我放这样的东西：

```
@navbarBackground: #f3a428; 
```

在 CSS/LESS 编辑器中……这不应该工作吗？divshot.com 编辑器似乎正在评估代码以进行编译......但似乎没有将更改应用于页面。（我已经等了）:)

我什至尝试将以下 javascript 放在 JS 编辑器中，但没有成功

```
<script type="text/javascript">
   less.modifyVars({
     '@navbarBackground': '#f3a428'
   });
</script> 
```

我意识到 JS 仅适用于预览和导出 - 但即使没有任何改变。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:52:19.980

现在，在 Divshot 中添加的 LESS 不能与 Bootstrap 一起编译，而是我们使用的是 Bootstrap 的静态 CSS 版本。我们知道主题定制是许多用户想要的东西，并且有一些计划来实现（以及允许更好地使用 LESS 混合），但目前还没有。

# backbone.js - 多态模型的骨干集合

> ID：15527328
> 
> 赞同：9
> 
> 时间：2013-03-20T15:06:54.720
> 
> 标签：backbone.js, polymorphism, backbone.js-collections

我有一系列动物。

```
App.Collections.Animals extends Backbone.Collection
  model: App.Animal
  url: '/animals/' #returns json 
```

这些动物类别：

```
App.Models.Animal extends Backbone.Model

App.Models.Monkey extends App.Models.Animal
  defaults:{type:'Monkey'}

App.Models.Cat extends App.Models.Animal
  defaults:{type:'Cat'}

App.Models.Dog extends App.Models.Animal
  defaults:{type:'Dog'} 
```

当集合中填充了 JSON（记录包含*type*属性）时，我希望将模型实例化为子类模型（猴子、猫、狗）而不是动物。你怎么能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T01:03:21.160

从骨干[文档](http://backbonejs.org/#Collection-model)：

> 集合还可以通过使用返回模型的函数覆盖此属性来包含多态模型。

```
var Library = Backbone.Collection.extend({

  model: function(attrs, options) {
    if (condition) {
      return new PublicDocument(attrs, options);
    } else {
      return new PrivateDocument(attrs, options);
    }
  }

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-13T18:12:52.630

解决方案很简单（请原谅 JS，我不知道 CoffeeScript）：

```
var SmartZoo = Backbone.Collection.extend({
    model: function (attrs, options) {
        // This code assumes that the object looks something like '{ type: "Cat", ... }'.
        switch (attrs.type) {
            case 'Cat':
                return new Cat(attrs, options);
            case 'Dog':
                return new Dog(attrs, options);
            default: // Unknown subclass
                return new Animal(attrs, options);
        }
    }
}); 
```

你必须：

1.  在模型中包含一个属性，您可以从中推断要创建的 Backbone 模型的类型。在这个例子中，我的对象包含一个名为“type”的属性，它的值是代表它的 Backbone 类型的全名。请务必将其设置为模型的默认值或初始化，以便您还可以将真实模型实例添加到集合中。
2.  将集合的模型属性定义为函数。此函数的第一个参数将是原始 JS 对象（如果这是您传入的），或者是 Backbone 模型的属性对象。无论哪种方式，您都可以将您的类型字段作为该对象的属性来访问。
3.  执行您的逻辑以从您的类型字段中推断出正确的模型。
4.  从模型函数返回正确模型的实例。

这是一个 JSFiddle，它显示了这个多态集合的运行情况：http: [//jsfiddle.net/FiddlerOnTheTarmac/uR2Sa/](http://jsfiddle.net/FiddlerOnTheTarmac/uR2Sa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:06:54.720

覆盖骨干集合的 _prepareModel。集合 new 在定义时使用子类，否则使用默认模型。

```
class App.Collections.Animals extends Backbone.Collection

 model: App.Models.Animal

 _prepareModel: (attrs, options) ->
   if attrs instanceof Backbone.Model
   attrs.collection = @
   return attrs

   options || (options = {})
   options.collection = @
   model_class = APP.Models[attrs.ntype] or this.model
   model = new model_class(attrs, options)
   if (!model._validate(attrs, options))
     false
   else
     model 
```

# neo4j - 有没有人使用 Neo4j 节点 ID 作为大型属性集的其他数据库的外键？

> ID：15527334
> 
> 赞同：2
> 
> 时间：2013-03-20T15:07:11.287
> 
> 标签：neo4j

我正在构建一个大型图形数据库，其中包含关于每个节点的大量元数据（每个节点有数千个属性）。我目前正在确定哪些元数据应该是 Neo4j 中的节点，哪些应该成为节点的属性，哪些应该存放在单独的数据库中。

我的想法是以 3 种方式使用元数据：
1 - 如果该属性在许多节点之间共享，则将该属性设为自己的节点并为该属性创建一条边。

2 - 如果属性对遍历图很重要，但不是“高度”共享，则将其添加为节点属性。（如果需要，也可以在 Neo4j 中编制索引）

3 = 如果元数据严格描述该节点，将其存储在单独的 NoSQL 数据库中，Neo4J 节点 ID 成为另一个数据库的外键。

虽然这似乎是使用图形数据库最有效的用法，但拥有不同的属性类型并在使用它之前必须确定它是哪种类型的属性似乎很痛苦。（可能是一个属性查找键值存储）这也可能意味着我需要一种简单的方法来将属性从 3 提升到 2 到 1，以便在属性变得高度共享或需要高效遍历时使用。

有没有人采取这种方法？有什么要分享的想法，或者要避免的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:45:22.380

永远不要将 Neo4j 节点 ID 存储在外部系统中。节点 ID 基本上是相应存储文件中的偏移量。如果你删除一个节点，它的 id 可能会在创建新节点时被重用。

正确的做法是拥有一个“好的”标识符（例如 uuid）作为节点属性并将其放入 Neo4j 的索引中。然后将该 uuid 保存以存储在第三方系统中。

前段时间我创建了一个非托管扩展，为每个新节点添加一个 uuid 并防止手动更改这些 uuid：[https](https://github.com/sarmbruster/neo4j-uuid) ://github.com/sarmbruster/neo4j-uuid 。

## 更新 (2013-08-21)

我[用 Neo4j 写过关于 UUID 的博客](http://blog.armbruster-it.de/2013/08/assigning-uuids-to-neo4j-nodes-and-relationships/)。

# java - 如何从另一个 Jar 加载 FXML？

> ID：15527338
> 
> 赞同：0
> 
> 时间：2013-03-20T15:07:27.967
> 
> 标签：java, url, javafx, fxml

我有一个包含一些我想使用的 FXML 文件的依赖项 Jar，我该如何引用它？

```
URL location = getClass().getResource("?????????.fxml");
    fxmlLoader.setResources(ResourceBundle.getBundle("messages", Locale.getDefault()));
    fxmlLoader.setLocation(location);
    fxmlLoader.setBuilderFactory(new JavaFXBuilderFactory()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:47:59.623

```
Region root = FXMLLoader.load(getClass().getResource("FILE.fxml"));
final FILEJAVA filejava = new FILEJAVA(stage, root); 
```

或者

```
BorderPane pane = null;
        try {
            pane = (BorderPane) FXMLLoader.load(FILEJAVA.class.getResource("FILE.fxml"));
            pane.getStyleClass().add("main");
        } catch (IOException ex) {

            Logger.getLogger(FILEJAVA.class.getName()).log(Level.SEVERE, null, ex);
            System.exit(-1);
        } 
```

# .net - 如何滚动列表框以查看最后添加的项目，事件

> ID：15527339
> 
> 赞同：6
> 
> 时间：2013-03-20T15:07:31.210
> 
> 标签：.net, vb.net, winforms

我有一个单行文本框，用于将数字字符串添加到选中的列表框中。如果用户看不到，我希望列表框自动滚动到添加的最后一个项目。我已经寻找了列表框的滚动属性，但我找不到任何看起来会滚动列表框的东西。

有人有建议吗？

这是将项目添加到列表框的代码：

```
Private Sub bttAddchklstDbManagement_Click(sender As System.Object, e As System.EventArgs) Handles bttAddchklstDBmanagement.Click
    If Not txtDBManagement.Text = Nothing And Not txtDBManagement.Text = "" Then
        chklstDBmanagement.Items.Add(txtDBManagement.Text)
        chklstDBmanagement.SetItemChecked(chklstDBmanagement.Items.Count - 1, True)
        txtDBManagement.Text = Nothing
        txtDBManagement.Focus()
    End If
End Sub 
```

txtDBmanagement 是 TextBox
chklstDbManagement 是选中的列表框

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T15:31:31.140

添加项目后使用 TopIndex。

```
 private void button1_Click(object sender, EventArgs e)
    {
        checkedListBox1.Items.Add("item");
        checkedListBox1.TopIndex = checkedListBox1.Items.Count - 1;
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-13T15:47:07.720

坦率地说，除非用户位于列表框的底部，否则我不太喜欢自动滚动。. . 所以这就是我要做的......

```
 'figure out if the user is scrolled to the bottom already  
    Dim scrolledToBottom As Boolean = False
    Dim RowsVisible As Integer = lstLog.ClientSize.Height / lstLog.ItemHeight
    If lstLog.Items.Count < RowsVisible Then scrolledToBottom = True

    If scrolledToBottom = False Then
        If lstLog.TopIndex >= lstLog.Items.Count - RowsVisible Then
            scrolledToBottom = True
        End If
    End If

    'add your item here
    lstLog.Items.Add(Now.ToString & ": " & s)

    'now scroll to the bottom ONLY if the user is already scrolled to the bottom
    If scrolledToBottom Then
        lstLog.TopIndex = lstLog.Items.Count - 1
    End If 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T14:46:39.053

根据 Mike 的建议，我使用了一种更简单、更准确的方法：

```
 lstLog.Items.Add(logText)
    Dim RowsVisible As Integer = lstLog.ClientSize.Height / lstLog.ItemHeight
    If ActiveControl IsNot lstLog OrElse lstLog.TopIndex >= lstLog.Items.Count - RowsVisible - 1 Then
        lstLog.TopIndex = lstLog.Items.Count - 1
    End If 
```

# java - 有一个 Mapper 类是线程安全的

> ID：15527341
> 
> 赞同：0
> 
> 时间：2013-03-20T15:07:32.773
> 
> 标签：java, hadoop, thread-safety, mapreduce

为了避免在 Hadoop 类的每个实例上分配内存，然后依靠 GC 来清理这些内存，我使用了静态对象，我在该方法`Mapper`中进行读写访问。`map`

我必须关心线程安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:17:37.183

默认情况下，每个 map 任务都将在自己的 JVM 上运行。因此，您不会从使用静态对象中获得任何好处。我建议不要做一些奇怪的事情，除非你真的面临性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T21:48:05.013

补充 Enno 和 Quetzalcoatl 所说的话。当map任务在JVM中运行时，它会创建一个Mapper类的对象，并为每个输入调用map fn（即使用TextInputFormat时为文件的每一行）。但它按顺序而不是并行调用映射 fn。因此，您正在使用的对象应该没有线程安全问题。

问候， 马尼什

# sql - Postgres 聚合器，用于检查事件

> ID：15527342
> 
> 赞同：0
> 
> 时间：2013-03-20T15:07:32.813
> 
> 标签：sql, postgresql-9.0

是否存在 Postgres 聚合器，当在下表中使用时：

```
 id | value 
----+-----------
  1 |     1
  2 |     1
  3 |     2
  4 |     2
  5 |     3
  6 |     3
  7 |     3
  8 |     4
  9 |     4
 10 |     5 
```

在查询中，例如：

```
select agg_function(4,value) from mytable where id>5 
```

将返回

```
agg_function
--------------
t 
```

（布尔真结果）因为选择了 value=4 的一行或多行？

换句话说，一个参数指定您要查找的值，另一个参数采用列说明符，如果列值等于一行或多行的指定值，则返回 true？

我已经成功地创建了一个聚合来做到这一点，但我想知道我是否刚刚重新创建了轮子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:17:13.543

```
select sum(case when value = 4 then 1 else 0 end) > 0
from mytable
where id > 5 
```

# jquery - 如何使用 AJAX 调用特定的 Web 服务方法？

> ID：15527345
> 
> 赞同：0
> 
> 时间：2013-03-20T15:07:34.630
> 
> 标签：jquery, html, ajax, database, wsdl

如何通过 ajax 调用特定的 WSDL 方法。我有以下服务：

[http://newsite.wrapcompliance.org/FactoriesWS.wsdl](http://newsite.wrapcompliance.org/FactoriesWS.wsdl)

我正在尝试调用该方法`factCountByCountryID()`，该方法在给定 3 个字符串时返回一个整数。到目前为止的代码如下：

```
<h3>jQuery Test</h3>

<script type="text/javascript">

function callService()
{
$.ajax
({
    url: "http://newsite.wrapcompliance.org/FactoriesWS.wsdl",
    type: "POST",
    dataType: "html",
    data: {"countryCd":"BGD"},
    success: processData,
    error: onError
});

return false;
}

function processData(xml)
{
    alert(xml);
}

function onError(request, status, error)
{
alert("It didn't work!!!");
}

</script>

<form method="post" action="">
    <input type="button" value="Do it now!!" onclick="callService(); return false"/>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:16:24.750

首先你地址不对！WSDL 只描述服务，而不是服务实现本身。如果你这样做，你会将你的请求指向一个文件，仅此而已。尽管 wsdl 中有服务描述：“ [http://apollov-dev.worlddata.com:8080/WrapSystem/services/FactoriesWS](http://apollov-dev.worlddata.com:8080/WrapSystem/services/FactoriesWS) ”

此外，您必须发送有效的 SOAP 消息，该消息将在服务器端使用。[在您的 WSDL 中描述]

某种教程： http: [//openlandscape.net/2009/09/25/call-soap-xm-web-services-with-jquery-ajax/](http://openlandscape.net/2009/09/25/call-soap-xm-web-services-with-jquery-ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:22:40.023

使用将为您处理 SOAP 部分的[jQuery.soap插件。](https://github.com/doedje/jquery.soap/blob/master/README.md)您需要先配置它，然后才能使用：

```
$.soap({
    method: 'factCountByCountryID',
    params: {
        countryCd: 'BGD',
    },
    success: function (data) {
        // do stuff with data
    }
}); 
```

# stored-procedures - 优雅地处理违反外键约束的 Sybase ASE SP

> ID：15527353
> 
> 赞同：1
> 
> 时间：2013-03-20T15:07:51.463
> 
> 标签：stored-procedures, sap-ase

我正在尝试编写删除客户的 Sybase ASE (15) 存储过程。由于“外键约束违反”，DELETE 可能会失败，在这种情况下，存储过程应该回滚事务并返回。

```
CREATE PROCEDURE dbo.spumb_deleteCustomer @customertodelete int AS BEGIN
   BEGIN TRANSACTION TRX_UMBDELCUSTOMER

   DELETE CREDITCARDS WHERE CUSTOMERID = @customertodelete
   DELETE CUSTOMER_SELECTION_MAP WHERE CUSTOMERID = @customertodelete
   DELETE CUSTOMERS WHERE ID = @customertodelete
   SELECT @rcnt = @@ROWCOUNT
   IF (@rcnt <> 1) BEGIN
     PRINT 'FAILED TO DELETE CUSTOMER'
     ROLLBACK TRANSACTION TRX_UMBDELCUSTOMER
     RETURN
   END 
   COMMIT TRANSACTION TRX_UMBDELCUSTOMER
END 
```

在游标中运行此 SP 时，执行在第一个无效 DELETE 后中止。如何使光标继续（或者，更确切地说，SP 不会引发错误）？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-28T14:17:56.723

您应该检查 @@error !=0 以指示错误，而不是查找 @@rowcount 并处理这些错误，否则调用客户端可能会返回意外消息。如果您确实检查了@@rowcount，则需要在每次删除后立即将其保存到变量中，因为每个命令都会重置它。

如果您特别希望获取外键违规消息，您可以检查 @@error 是否为 546 或 547，因为当它失败时这些将在 @@error 中返回：

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00729.1500/html/errMessageAdvRes/BABCCECF.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00729.1500/html/errMessageAdvRes/BABCCECF.htm)

[http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00729.1500/html/errMessageAdvRes/BABHJIEC.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.infocenter.dc00729.1500/html/errMessageAdvRes/BABHJIEC.htm)

# java - 可行的数据库测试

> ID：15527357
> 
> 赞同：1
> 
> 时间：2013-03-20T15:08:04.830
> 
> 标签：java, sql, database, unit-testing

我的任务是调查我们应该如何在即将到来的项目中执行测试。

我目前正试图决定何时我们应该对我们的 SQL 语句进行结构化测试。我得出的结论是，为“get”语句设置测试套件以确保它们返回正确的数据而不是测试插入、删除或更新可能是一个好主意，因为这可以很容易地用如果缺少某些依赖项，将在数据库中选择和外键异常。

现在，我一直在检查`DBunit`是否习惯于执行这些测试，但我有几个问题：

1.是否可以进行上述测试？还是花时间创建这些测试和插入测试数据不值得？也许让开发人员测试这个 ad-hoc 就足够了？

2.为每个测试确定适当的测试数据似乎很耗时。测试数据应手动插入 DBunit 需要的 flat-xml 文件中（如果您让 DBunit 生成预期的数据，您将依赖于获取该数据的 SQL）。是这样吗？

3.是否有更好、更简单的方法来执行数据库测试来验证 SQL 语句？

该项目将使用 Hibernate、Java 和 MS SQL Server

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T21:24:35.987

您可以使用 dbunit，也可以以编程方式构建 db 内容（在每个测试中）。重要的部分是让测试框架（例如弹簧测试）在每次测试后进行回滚。一旦设置好环境，就很容易测试在单个事务中完成的 DML（获取、插入、删除）。

如果您想测试 DDL（某些数据库在事务之外执行此操作），那么您必须在每次测试之前手动回滚或从头开始创建数据库（例如在内存数据库中）。通常不需要 DDL 测试，因为 hibernate 会执行验证部分

是的：您应该测试您的查询 - 花一些时间准备环境是值得的

# javascript - 渲染具有多个子集合的集合

> ID：15527360
> 
> 赞同：3
> 
> 时间：2013-03-20T15:08:05.597
> 
> 标签：javascript, backbone.js, marionette, backbone-relational

我正在尝试将应用程序转换为 Backbone Marionette，并且在渲染每个包含多个子集合的项目集合时遇到问题。

的背景：

我正在开发一个地址簿应用程序，主要是为了我自己的教育，但也希望对其他人有用。此应用程序的主屏幕显示用户联系人列表。这些联系人中的每一个都由一个视图表示，并有一个支持它的模型。这些模型中的每一个都具有存储为模型属性集合的附加关系信息。也就是说，电话号码和电子邮件地址都存储为每个联系人的集合。这些关系都由 Backbone Relational 支持，它很好。

问题：

尝试将联系人视图从 Backbone.View 转换为 Marionette 时，我的第一个想法是使用 Backbone.Marionette.CompositeView，但复合视图只需要一个集合。呈现具有多个集合的重复项的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T10:33:55.373

我写了一篇关于类似问题的博客文章。关键是使用复合视图来渲染集合，并给它另一个复合视图作为“itemView”属性来渲染嵌套集合。

工作代码：[http ://davidsulc.github.com/backbone.marionette-nested-views/](http://davidsulc.github.com/backbone.marionette-nested-views/)

博文：http: [//davidsulc.com/blog/2013/02/03/tutorial-nested-views-using-backbone-marionettes-compositeview/](http://davidsulc.com/blog/2013/02/03/tutorial-nested-views-using-backbone-marionettes-compositeview/)

代码仓库：[https ://github.com/davidsulc/backbone.marionette-nested-views](https://github.com/davidsulc/backbone.marionette-nested-views)

注意：您还可以在嵌套视图上查看 Derick 的博客文章[http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:19:43.420

看看 Marionette 中的 CompositeView。这可能是您正在寻找的更多内容。

[Marionette Composite 查看文档](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md)

[木偶复合材料 查看文章](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

# ios - UITableView 长度错误

> ID：15527361
> 
> 赞同：1
> 
> 时间：2013-03-20T15:08:09.227
> 
> 标签：ios, objective-c, uitableview, uikit

我在 UISplitViewController（在 UITabbarController 中）中有一个 UITablevView。当我从横向开始时，我的桌子太长了，所以我设置了

```
 CGRect frame = self.view.frame;
    switch([[UIApplication sharedApplication] statusBarOrientation]) {
        case UIInterfaceOrientationLandscapeRight:
            frame.size.height = 768-20-44;
            self.view.frame = frame;
            break;
        case UIInterfaceOrientationLandscapeLeft:           
            frame.size.height = 768-20-44;
            self.view.frame = frame;
            break;
        case UIInterfaceOrientationPortrait:
            frame.size.height = 1024-20-44;
            self.view.frame = frame;
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            frame.size.height = 1024-20-44;
            self.view.frame = frame;
            break;
    } 
```

这行得通。但是当我的 SearchDisplayController（也有错误的长度）隐藏时，我的 tableview 又太长了。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:42:24.600

请检查此代码：[https](https://github.com/alexth/TBSV) ://github.com/alexth/TBSV ，也许它会帮助你。它是关于如何在一个项目中混合 UITableView、UINavigationController、UITabBar 和 UISplitViewController，并且在两个方向上都具有正确的外观元素。

# c# - 如何使用 c# 在 asp.net 中使用 MemoryStream 将文本/文档文件保存到特定文件夹？

> ID：15527370
> 
> 赞同：0
> 
> 时间：2013-03-20T15:08:25.820
> 
> 标签：c#, asp.net, sharepoint-2010, save, memorystream

我有来自 Sharepoint 文档库的文件路径。FileStrem 包含来自服务器的文件流字节。现在我想`Save file`在 asp.net 中使用 MemoryStream 从这些字节到使用 C# 的特定文件夹。

```
public byte[] FileStream { get; set; } 
```

**下面的代码我用来从共享点保存图像文件。有用！**

```
MemoryStream mStream = new MemoryStream(analystPhotoObj.FileStream);
Bitmap bitmap = new Bitmap(mStream);
bitmap.Save(path + @"\MemberPhoto\" + analystPhotoObj.DocumentID + "." + analystPhotoObj.FileType); 
```

现在我想做同样的事情来保存**文本/文档文件**。唯一的事情是 **文件类型**正在从 *BITMA*P 更改为*TEXT/DOCUMENT*文件

帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:14:20.700

尝试使用 bitmap.Save 的第二个参数：

保存（流，System.Drawing.Imaging.ImageFormat.Bmp）

# debugging - 启动时应用程序崩溃无异常引发

> ID：15527371
> 
> 赞同：1
> 
> 时间：2013-03-20T15:08:28.793
> 
> 标签：debugging, windbg

我正在尝试跟踪导致我的应用程序从生产**启动时崩溃的原因。**在 Visual Studio 中从调试启动时，此 C#/.NET Windows 应用程序启动时没有任何问题，并且结果与预期一致。同一应用程序的早期版本也已部署并在其他客户端计算机上运行。[从Windows Error Reporting and CLR integration](http://blogs.msdn.com/b/oanapl/archive/2009/01/30/windows-error-reporting-wer-and-clr-integration.aspx)
中找到的解释阅读，看来我的问题来自程序集 ExcelInterop 中的一种方法。

```
错误桶，类型 0      
活动名称：CLR20r3
答案：不可用
驾驶室编号：0

问题签名：
P1 : afiv2.exe ' 我的应用程序
P2：0.19.4826.21736
P3 : 51489aa0
P4 : ExcelInterop ' 我的图书馆
P5：1.0.0.0
P6 : 514878d9
P7 : 13 ' 方法描述 ???
P8 : 56
P9：PSZQOADHX1U5ZAHBHOHGHLDGIY4QIXHX
P10：
```

试图找到错误我使用 windbg.exe 菜单启动应用程序 - >文件 - >打开可执行文件（我第一次使用 windbg），但控制台显示符号搜索路径无效。根据[Debugging .net using SOS](https://stackoverflow.com/questions/4244670/debugging-net-using-sos)，我使用以下命令序列恢复了符号路径：

```
!sym 嘈杂    
.symfix
.reload -f

```

首次尝试加载SOS导致出现“Unable to find module mscorwks”错误，[Help:Failed to load sos in windbg](http://social.msdn.microsoft.com/Forums/en-US/clr/thread/e609dc9b-bf6f-4f49-9f51-5c3a4a5efa2d/)解决了这部分问题：

```
sxe ld:mscorlib
G
.loadby sos mscorwks
!token2ee ExcelInterop 06000013

```

我预计最后一个命令将确定与事件报告中的数字关联的 methodDesc，但没有返回任何内容。

我现在感觉自己被困在了一个迷宫里。还应该做些什么来找出导致启动时崩溃的原因？

* * *

windbg 会话的详细信息

```
<pre>
Microsoft (R) Windows Debugger Version 6.11.0001.404 AMD64
Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: C:\Users\spel\AppData\Local\Apps\2.0\49619QZC.EY2\B8TZ2OKL.D49\afiv..tion_0000000000000000_0000.0016_22cd035f134c19e0\AFIv2.exe
Symbol search path is: *** Invalid ***
****************************************************************************
* Symbol loading may be unreliable without a symbol search path.           *
* Use .symfix to have the debugger choose a symbol path.                   *
* After setting your symbol path, use .reload to refresh symbol locations. *
****************************************************************************
Executable search path is: 
ModLoad: 00000000`00290000 00000000`0048e000   AFIv2.exe
ModLoad: 00000000`76f00000 00000000`770a9000   ntdll.dll
ModLoad: 000007fe`f89e0000 000007fe`f8a4f000   C:\Windows\SYSTEM32\MSCOREE.DLL
ModLoad: 00000000`76820000 00000000`7693f000   C:\Windows\system32\KERNEL32.dll
ModLoad: 000007fe`fd450000 000007fe`fd4bb000   C:\Windows\system32\KERNELBASE.dll
(121c.1494): Break instruction exception - code 80000003 (first chance)
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for ntdll.dll - 
ntdll!CsrSetPriorityClass+0x40:
00000000`76facb60 cc              int     3
0:000> .path
           ^ Syntax error in '.path'
0:000> .winpath
              ^ Syntax error in '.winpath'
0:000> .sympath
Symbol search path is: <empty>
Expanded Symbol search path is: <empty>
0:000> !sym noisy
noisy mode - symbol prompts on
0:000> .symfix
DBGHELP: Symbol Search Path: cache*C:\ProgramData\dbg\sym;SRV*http://msdl.microsoft.com/download/symbols
0:000> .reload -f
Reloading current modules
.
SYMSRV:  C:\ProgramData\dbg\sym\AFIv2.pdb\7C97CCD8E9CD4E26B6039C225A56890B15\AFIv2.pdb not found
SYMSRV:  C:\ProgramData\dbg\sym\AFIv2.pdb\7C97CCD8E9CD4E26B6039C225A56890B15\AFIv2.pdb not found
SYMSRV:  http://msdl.microsoft.com/download/symbols/AFIv2.pdb/7C97CCD8E9CD4E26B6039C225A56890B15/AFIv2.pdb not found
DBGHELP: C:\Users\spel\AppData\Local\Apps\2.0\49619QZC.EY2\B8TZ2OKL.D49\afiv..tion_0000000000000000_0000.0016_22cd035f134c19e0\AFIv2.pdb - file not found
DBGHELP: C:\Users\spel\Documents\GCRH complet\trunk\AFI_CS\IHM\obj\Debug\AFIv2.pdb cached to C:\ProgramData\dbg\sym\AFIv2.pdb\7C97CCD8E9CD4E26B6039C225A56890B15\AFIv2.pdb
*** WARNING: Unable to verify checksum for AFIv2.exe
DBGHELP: AFIv2 - private symbols & lines 
         C:\ProgramData\dbg\sym\AFIv2.pdb\7C97CCD8E9CD4E26B6039C225A56890B15\AFIv2.pdb
.
SYMSRV:  C:\ProgramData\dbg\sym\kernel32.pdb\C4312728BA1F4691955E99B2E026FAFC2\kernel32.pdb not found
SYMSRV:  kernel32.pdb from http://msdl.microsoft.com/download/symbols: 668117 bytes - copied         
DBGHELP: C:\ProgramData\dbg\sym\kernel32.pdb\C4312728BA1F4691955E99B2E026FAFC2\kernel32.pdb already cached
DBGHELP: KERNEL32 - public symbols  
         C:\ProgramData\dbg\sym\kernel32.pdb\C4312728BA1F4691955E99B2E026FAFC2\kernel32.pdb
.
DBGHELP: ntdll - public symbols  
         C:\ProgramData\dbg\sym\ntdll.pdb\15EB43E23B12409C84E3CC7635BAF5A32\ntdll.pdb
.
SYMSRV:  C:\ProgramData\dbg\sym\mscoree.pdb\FB53EF9DD104439E9903F0B34128E0392\mscoree.pdb not found
SYMSRV:  mscoree.pdb from http://msdl.microsoft.com/download/symbols: 294166 bytes - copied         
DBGHELP: C:\ProgramData\dbg\sym\mscoree.pdb\FB53EF9DD104439E9903F0B34128E0392\mscoree.pdb already cached
DBGHELP: MSCOREE - public symbols  
         C:\ProgramData\dbg\sym\mscoree.pdb\FB53EF9DD104439E9903F0B34128E0392\mscoree.pdb
.
SYMSRV:  C:\ProgramData\dbg\sym\kernelbase.pdb\91C72371DD43448192B7B46F5ED10AA02\kernelbase.pdb not found
SYMSRV:  kernelbase.pdb from http://msdl.microsoft.com/download/symbols: 231949 bytes - copied         
DBGHELP: C:\ProgramData\dbg\sym\kernelbase.pdb\91C72371DD43448192B7B46F5ED10AA02\kernelbase.pdb already cached
DBGHELP: KERNELBASE - public symbols  
         C:\ProgramData\dbg\sym\kernelbase.pdb\91C72371DD43448192B7B46F5ED10AA02\kernelbase.pdb

0:000> .loadby sos mscorwks
Unable to find module 'mscorwks'
0:000> sxe ld:mscorlib
0:000> g
ModLoad: 000007fe`f35e0000 000007fe`f44bc000   C:\Windows\assembly\NativeImages_v2.0.50727_64\mscorlib\51a23687fdafc32b697f5a719e364651\mscorlib.ni.dll
ntdll!ZwMapViewOfSection+0xa:
00000000`76f5159a c3              ret
0:000> .loadby sos mscorwks
0:000> !token2ee afi 06000013
SYMSRV:  C:\ProgramData\dbg\sym\mscorwks.pdb\E5BD5716E1D64C1C86661A5AAF7DD9251\mscorwks.pdb not found
SYMSRV:  mscorwks.pdb from http://msdl.microsoft.com/download/symbols: 2000973 bytes - copied         
DBGHELP: C:\ProgramData\dbg\sym\mscorwks.pdb\E5BD5716E1D64C1C86661A5AAF7DD9251\mscorwks.pdb already cached
DBGHELP: mscorwks - public symbols  
         C:\ProgramData\dbg\sym\mscorwks.pdb\E5BD5716E1D64C1C86661A5AAF7DD9251\mscorwks.pdb
0:000> !token2ee ExcelInterop 06000013
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:29:57.243

您可以改为设置`sxe clr`which 将在第一次出现异常时中断。然后做一个`!clrstack`会给调用堆栈。

Methoddsec 06000013 可能会根据 JIT 有所不同，因此您可能正在查看不会给您结果的指针。

高温高压

# java - 在mysql数据库中插入一行它显示了两次行

> ID：15527374
> 
> 赞同：0
> 
> 时间：2013-03-20T15:08:33.330
> 
> 标签：java, mysql, spring

代码在corejava，spring，mysql中，执行控制器类输出正确得到1，但我插入了一行，但在mysql数据库中插入了两行，这是主要问题，如果下面的代码有任何问题，请帮助我们插入一行它必须在 mysql 数据库中只显示一行。

在国际奥委会包含

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
 <property name="driverClassName" value="com.mysql.jdbc.Driver"></property>
 <property   name="url" value="jdbc:mysql://localhost/Springjdbc"></property>
 <property name="username" value="root"></property>
 <property name="password" value="ashok"></property>
 </bean>

  <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
  <property name="dataSource" ref="dataSource"></property>
   </bean>

<bean id="custDao" class="com.pw.spring.dao.CustomerDao">
<property name="jdbcTemplate" ref="jdbcTemplate"></property>
</bean> 
```

在道班

```
 package com.pw.spring.dao;

     import java.io.File;
     import java.io.IOException;
     import java.sql.PreparedStatement;
     import java.sql.ResultSet;
     import java.sql.SQLException;
     import java.util.List;
     import java.util.Map;
     import java.util.Set;

     import javax.imageio.stream.FileImageInputStream;

     import org.springframework.jdbc.core.BatchPreparedStatementSetter;
     import org.springframework.jdbc.core.PreparedStatementSetter;
     import org.springframework.jdbc.core.RowMapper;
     import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
     import org.springframework.jdbc.core.namedparam.SqlParameterSource;
     import org.springframework.jdbc.core.simple.SimpleJdbcCall;
     import org.springframework.jdbc.core.support.JdbcDaoSupport;

     import com.mysql.jdbc.Blob;
     import com.pw.spring.dto.B1;
     import com.pw.spring.dto.CustomerDto;

     public class CustomerDao extends JdbcDaoSupport implements ICustomerDao {
     @Override
     public int blobinsert() {
    int in = 0;
    String s1 = "insert into a1(name,image) values (?,?);";
    in = getJdbcTemplate().update(s1, new PreparedStatementSetter() {

    @Override
    public void setValues(PreparedStatement arg0) throws SQLException {

        arg0.setString(1, "shiva");
        arg0.setObject(2, b2 ());
        arg0.executeUpdate();
    }

    private Object b2() {
        File   f1 = new File("E:\\seenu\\New folder\\Luminance.jpg");
        byte z [] = new byte[(int)f1.length()];

        try
        {

        FileImageInputStream f2 = new FileImageInputStream(f1);

        f2.read(z);
        }
        catch(IOException ex)
        {
        ex.printStackTrace();
        }

        return z;
    }

    });

    return in;
        }
        } 
```

在要执行的控制器类中

```
package com.pw.spring.controller;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.pw.spring.dao.CustomerDao;

public class Nutt 
{
    public static void main(String[] args) 
    {
         ApplicationContext context = new ClassPathXmlApplicationContext("bean.xml");      
         CustomerDao dao =(CustomerDao) context.getBean("custDao");
         int i = dao.blobinsert();
         System.out.println(i)
    }
 } 
```

表是模式springjdbc中的a1

```
create table a1 (name varchar(20),image BLOB);

output:1 
```

但它在 mysql 数据库中插入行两次，而不是插入一行

```
shiva blob
shiva blob 
```

可以帮助如何在代码中在mysql数据库中插入一行？提前感谢答案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:14:04.897

不要打`arg0.executeUpdate();`进来[`setValues()`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/core/PreparedStatementSetter.html#setValues%28java.sql.PreparedStatement%29)。此方法用于**设置**值而不是执行语句。

[`JdbcTemplate.update()`](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/jdbc/core/JdbcTemplate.html#update%28java.lang.String,%20org.springframework.jdbc.core.PreparedStatementSetter%29)将执行语句。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:16:02.510

去掉`arg0.executeUpdate();`里面`setValues`。

**您执行插入语句两次**：in`in = getJdbcTemplate().update(..)`和 in`arg0.executeUpdate();`

# c# - 如何从 C# windows 窗体应用程序中的列表项中提取 Url 元素

> ID：15527379
> 
> 赞同：0
> 
> 时间：2013-03-20T15:08:52.203
> 
> 标签：c#, regex, list, url-rewriting, text-processing

这是我的 C# 列表项包含的概念

```
List<string> myList1 = new List<string>();

Urls some are: 
http://www.google.com

http://www.google.com/maps

http://www.google.com/?parm=vlue

/www.google.com/ 
```

他们目前驻留在列表变量 myList1

有没有办法识别每个 url 元素，比如

```
Scheme:http

host:www.google.com

path:/maps

query:?parm=value 
```

并将这些元素设置为 bool 所以如果它是真的做一些事情如果它是假的做其他事情我什至不知道从哪里开始尝试正则表达式但没有任何运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:11:15.387

将列表变成`URI`实例：

```
var uris = myList1.Select(u => new Uri(u)); 
```

[http://msdn.microsoft.com/en-us/library/system.uri.aspx](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

然后，您可以访问各种属性，例如 Scheme 和 Host。

假设我的清单中有这个（除其他外）：

[http://www.google.co.uk/search.php?searchterm=a](http://www.google.co.uk/search.php?searchterm=a)

我可以先把它变成一个 Uri：

```
var uris = myList1.Select(u => new Uri(u)); 
```

现在我只想要那些将要并`google.com`拥有...`scheme``https`

```
var googleUris = uris.Where(u => u.Host.Contains("google") && u.Scheme.Equals("http")); 
```

所以我现在只有 URI 会发送到 Google 并通过 https 访问它，很好，但它现在也在一个 URI 对象中，那么如果我只想将它作为完整的 URI 路径返回呢？

```
var fullURIsOfGoogleUris = googleUris.Select(u => u.AbsoluteUri); 
```

这个最终列表现在只是字符串（您首先提供的完整 URI）。

你提到你想要它作为一个“布尔”值......你可以使用`Any()`它。使用我上面的例子，这将变成一行：

```
bool hasGoogleUris = myList1.Select(u => new Uri(u)).Any(u => u.Host.Contains("google") && u.Scheme.Equals("http")); 
```

根据该列表`true`是否`false`包含包含`google`在其主机中的 URI 并通过`http`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:15:07.673

编辑：

基于 Arran 建议的示例代码：

```
 List<string> myList1 = new List<string>() { "http://www.google.com/?parm=vlue"};

            var uris = myList1.Select(u => new Uri(u));

            foreach (var uri in uris)
            {

                //"http"
                var schema = uri.Scheme;

                //www.google.com
                var host = uri.Host;

                //"?parm=vlue"
                var query = uri.Query;
            } 
```

添加更多信息。可能有用

```
Uri.IsWellFormedUriString(myURL, UriKind.RelativeOrAbsolute) 
```

在您的示例中：

```
IList<string> wellFormalteUriStrings = myList1.FindAll(url => Uri.IsWellFormedUriString(url, UriKind.Absolute)); 
```

列出**wellFormalteUriStrings将仅包含来自****myList1** 的有效 URL字符串

 **参考：[MSDN](http://msdn.microsoft.com/en-us/library/system.uri.iswellformeduristring.aspx)**

# solr - Solr 4.2 - 什么是_version_field？

> ID：15527380
> 
> 赞同：17
> 
> 时间：2013-03-20T15:08:54.423
> 
> 标签：solr, solr4

我的 solr 配置出现以下错误。

```
Caused by: org.apache.solr.common.SolrException: Unable to use updateLog: _version_field must exist in schema, using indexed="true" stored="true" and multiValued="false" (_version_ does not exist)
        at org.apache.solr.core.SolrCore.<init>(SolrCore.java:806)
        at org.apache.solr.core.SolrCore.<init>(SolrCore.java:619)
        at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:1021)
        at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1051)
        ... 10 more
Caused by: org.apache.solr.common.SolrException: Unable to use updateLog: _version_field must exist in schema, using indexed="true" stored="true" and multiValued="false" (_version_ does not exist)
        at org.apache.solr.update.UpdateLog.init(UpdateLog.java:245)
        at org.apache.solr.update.UpdateHandler.initLog(UpdateHandler.java:84)
        at org.apache.solr.update.UpdateHandler.<init>(UpdateHandler.java:134)
        at org.apache.solr.update.DirectUpdateHandler2.<init>(DirectUpdateHandler2.java:95)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
        at org.apache.solr.core.SolrCore.createInstance(SolrCore.java:526)
        at org.apache.solr.core.SolrCore.createUpdateHandler(SolrCore.java:597)
        at org.apache.solr.core.SolrCore.<init>(SolrCore.java:790)
        ... 13 more
Caused by: org.apache.solr.common.SolrException: _version_field must exist in schema, using indexed="true" stored="true" and multiValued="false" (_version_ does not exist)
        at org.apache.solr.update.VersionInfo.getAndCheckVersionField(VersionInfo.java:57)
        at org.apache.solr.update.VersionInfo.<init>(VersionInfo.java:83)
        at org.apache.solr.update.UpdateLog.init(UpdateLog.java:242)
        ... 23 more 
```

我想知道它是什么`_version_field`，为什么它必须是必需的？

有人可以建议我吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-18T12:51:36.537

在 schema.xml 的“field”标签内添加以下字段定义

```
<field name="_version_" type="long" indexed="true" stored="true" multiValued="false"/> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-03-22T23:11:34.023

该`_version_`字段是由部分更新过程、更新日志过程和 SolrCloud 使用的内部字段。它仅在内部用于这些进程，只需`_version_`在 schema.xml 中提供该字段就足够了。

`_version_`如果您想[了解](http://yonik.com/solr/optimistic-concurrency/)有关`_version_`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-22T09:17:07.240

如果删除它，还必须从 solrconfig.xml 中删除事务日志记录。请参阅[链接](http://wiki.apache.org/solr/SchemaXml)。

# perl - xampp 1.8.1 perl 不工作并抛出错误 500

> ID：15527381
> 
> 赞同：1
> 
> 时间：2013-03-20T15:08:56.017
> 
> 标签：perl, xampp, mod-perl, httpexception

我在 Windows 7 上使用 xampp 1.8.1 并希望将其用于 perl，但是当我执行即使是最简单的 hello world perl 脚本时，它也会给我一个错误 500。有人知道我做错了什么吗？这是我的 'hello world 脚本：

```
 #!/usr/bin/perl
print "Hello World.\n"; 
```

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:23:17.113

将 shebang 行更改为实际指向您的 Perl 路径，例如：

```
#!c:/Strawberry/perl/bin/perl.exe 
```

如有必要，您可以引用它：

```
#!"c:/Program Files/Perl/perl.exe" 
```

请注意，在 Perl 中，即使在 Windows 上，您也始终可以对目录使用正斜杠（这是首选，因为它避免了混乱的转义问题）。

在 Windows 上，shebang 行中的路径通常不用于执行。因此，该约定通常`#!/usr/bin/perl`用于与 Linux 兼容。但是 Apache*实际上确实*使用了这个路径，所以需要进行相应的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-19T15:08:59.780

正确的代码是：

```
#!C:\xampp\perl\bin\perl.exe

# The above line is perl execution path in xampp

# The below line tells the browser, that this script will send html content.
# If you miss this line then it will show "malformed header from script" error.
print "Content-ype: text/html\n\n";
print "Hello world." 
```

在 xampp 中，perl 执行路径是 C:\xampp\perl\bin\perl.exe 此外，您可以保存扩展名为 .pl、.pm、.cgi 的 perl 文件。但对于浏览器使用，我更喜欢 .cgi 扩展名。

我想这会对你有所帮助。

# macos - 傻瓜界面生成器：如何将按钮的操作设置为“selectNext”？

> ID：15527382
> 
> 赞同：0
> 
> 时间：2013-03-20T15:08:58.340
> 
> 标签：macos, cocoa, interface-builder, cocoa-bindings

我在按钮的“绑定检查器”中，但我不知道如何放置正确的信息。

![国际文凭组织](../Images/24e6b44173e44592cc8c4c4ba85579c0.png)

*   我想我必须只为“目标”输入信息（而不是参数
*   我将它绑定到“阵列控制器”

但是之后 ？我有四个小节之间的选择，不知道该选择哪一个！

*   控制器键？？？
*   模型键路径？？？
*   价值转换器？？？
*   或：选择器名称？？？

我的猜测是“选择器名称”，但 Xcode 没有给出任何自动完成功能......

（我想调用方法`selectNext`）

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:23:09.367

您不能从 Button 绑定到 ArrayController。

您可以从 ArrayController 拖动到按钮。

或者，

选择 ArrayController -> 连接的 Inspector -> Recieved Actions -> 将“selectNext:”挂钩到按钮。

# ruby-on-rails - 在 Heroku 上以沙盒模式运行 Rails 控制台

> ID：15527383
> 
> 赞同：7
> 
> 时间：2013-03-20T15:09:01.707
> 
> 标签：ruby-on-rails, heroku, console

在文档中找不到它，也没有在 SO 上找到它，但是有没有办法在 heroku（Celadon Cedar）上以沙盒模式运行 Rails（3.2.x）控制台，相当于

```
rails console --sandbox 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-21T17:18:16.397

对于更“Heroku 方式”的替代方案，`heroku run console --sandbox`也可以做到这一点：

```
$ heroku run console --sandbox
Running `console --sandbox` attached to terminal... up, run.6024

[...]

Loading production environment in sandbox (Rails 3.2.12)
Any modifications you make will be rolled back on exit
irb(main):001:0> 
```

# jquery - 开始旋转图像不需要的转弯

> ID：15527388
> 
> 赞同：0
> 
> 时间：2013-03-20T15:09:13.483
> 
> 标签：jquery, css

我正在尝试改进一些代码：[http ://www.htmldrive.net/items/show/1114/-Rotating-hover-Image-with-JQuery](http://www.htmldrive.net/items/show/1114/-Rotating-hover-Image-with-JQuery)

所以问题是： - 当我单击图像（按住鼠标）时，图像将在开始时旋转。我怎样才能停止第一次旋转。

[小提琴](http://jsfiddle.net/5Pazb/13/)

```
 r = 360 - Math.round(((180/Math.PI) * Math.atan2(y,x)));
        rDiff = r - rTmp;
 if(isFirst != 1) {  
            r = img.rotation + rDiff;
            img.css("transform","rotate(-"+r+"deg)");
            img.css("-moz-transform","rotate(-"+r+"deg)");
            img.css("-webkit-transform","rotate(-"+r+"deg)");
            img.css("-o-transform","rotate(-"+r+"deg)");
            img.rotation = img.rotation + rDiff;
 } else {
           isFirst = 0;
           // rDiff should be small next time?
 }
 rTmp = r; 
```

我正在尝试过滤第一次旋转。为了更好的代码视图，请尝试小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:24:39.053

您应该添加相对于 x 轴的角度以及用户在旋转开始时单击的点。如果您单击图片的三点钟位置，您当前的版本可以正常工作（不会发生意外的旋转）。只需计算这个角度并放入这一行：

```
r = 360 - Math.round(((180/Math.PI) * Math.atan2(y,x))); 
```

我添加了存储初始角度偏移的 rShift 变量。看起来有帮助。

```
var rShift = 0;
$(document).mousemove(function(e) {
    if (drag == 1) {
        img = selectedImg;
        x1 = e.pageX;
        y1 = e.pageY;
        x = x1 - img.x0;
        y = y1 - img.y0;
        r = 360 - Math.round(((180/Math.PI) * Math.atan2(y,x))-rShift);
        rDiff = r - rTmp;
        if(isFirst != 1) {  
            r = img.rotation + rDiff-rShift;
            img.css("transform","rotate(-"+r+"deg)");
            img.css("-moz-transform","rotate(-"+r+"deg)");
            img.css("-webkit-transform","rotate(-"+r+"deg)");
            img.css("-o-transform","rotate(-"+r+"deg)");
            img.rotation = img.rotation + rDiff;
        } else {
           isFirst = 0;
           // rDiff should be small next time?
        }

        rTmp = r;
    }
});

img.mousedown(function(e) {
    selectedImg = img;
    drag = 1;

    x1 = e.pageX;
    y1 = e.pageY;
    x = x1 - img.x0;
    y = y1 - img.y0;
    rShift = Math.round(((180/Math.PI) * Math.atan2(y,x))); 
}); 
```

[小提琴](http://jsfiddle.net/5Pazb/29/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:05:28.017

您想限制图像在任何时候可以旋转的最大量。这并不能修复初始计算，但它确实增加了最大旋转速度的概念。添加一个名为`maxRotate`. 这将控制图像旋转在任何时候可以改变的速度。请看下面的代码：

```
var selectedImg;
var drag = 0;
var isFirst = 0;
var rTmp = 0;
var maxRotate = 15;

$(document).ready(function() {
    $("#content").myrotate();
    $("#fire").myrotate();

});

$(document).mousemove(function(e) {
        if (drag == 1) {
            img = selectedImg;
            x1 = e.pageX;
            y1 = e.pageY;
            x = x1 - img.x0;
            y = y1 - img.y0;
            r = 360 - Math.round(((180/Math.PI) * Math.atan2(y,x)));
            rDiff = r - rTmp;
            if(isFirst != 1 && Math.abs(rDiff) < maxRotate) {  
                r = img.rotation + rDiff;
                img.css("transform","rotate(-"+r+"deg)");
                img.css("-moz-transform","rotate(-"+r+"deg)");
                img.css("-webkit-transform","rotate(-"+r+"deg)");
                img.css("-o-transform","rotate(-"+r+"deg)");
                img.rotation = img.rotation + rDiff;
                $("#1").html("rDiff " + rDiff);
                $("#4").html("tmp r " + r);
                $("#5").html("img rot " + img.rotation);
            } else {
               isFirst = 0;
               // rDiff should be small next time?
            }

            rTmp = r;
        }
}); 
```

如果您希望图像能够更快地旋转，请增加 的值`maxRotate`。这是一个[小提琴](http://jsfiddle.net/jvanscoy/qnnYv/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:19:47.380

最后，我解决了一些问题...

```
$(document).mousemove(function(e) {
if(drag == 1) { 
        img = selectedImg;
        x1 = e.pageX;
        y1 = e.pageY;
        x = x1 - img.x0;
        y = y1 - img.y0;
        r = 180 - Math.round(((180/Math.PI) * Math.atan2(y,x)));       
        img.rotation = (img.rotation - ((tmpR - r))) ;          
        img.rotation = img.rotation % 360;
        if(img.rotation <= 0)
            img.rotation = 360;

        img.css("transform","rotate(-"+ img.rotation +"deg)");
        img.css("-moz-transform","rotate(-"+ img.rotation +"deg)");
        img.css("-webkit-transform","rotate(-"+ img.rotation +"deg)");
        img.css("-o-transform","rotate(-"+ img.rotation +"deg)");
        tmpR = r;
         $("#1").html("image.rotation -> " + img.rotation);
}}); 
```

我从头再来。

改进： - 图像旋转不能为负 - 当您开始拖动时，图像将从最后一个位置转动

[小提琴最后的工作](http://jsfiddle.net/5Pazb/37/)

Tnx 感谢 Jacob 和 Coromba 与我一起思考……

# matlab - 在 MATLAB 中为 ANOVAN 格式化矩阵数据

> ID：15527390
> 
> 赞同：0
> 
> 时间：2013-03-20T15:09:16.903
> 
> 标签：matlab, matrix

我有一个看起来有点像这样的数据值矩阵，但要大得多（2000+ 行，30+ 列）：

```
NaN   12   3   NaN   18   NaN   42   NaN    NaN   NaN   NaN...
68    NaN  14  Nan   NaN  NaN   NaN  NaN    NaN   NaN   26 ...
... 
```

所以你看到它主要由 NaN 值填充。自然，我感兴趣的是由值填充的单元格。

我希望能够在这个数据集上运行 anovan，不幸的是它太大而无法手动重新格式化。我想要做的是让一个脚本在矩阵中运行，找到每个不是 NaN 的值及其在矩阵中的索引，并为 anovan 输入创建三个数组：

值=[12 3 18 42 68 14 26 ...]

行= [ 1 1 1 1 2 2 2 ...]

列= [ 2 3 5 7 1 3 11 ...]

行和列对应于研究中的评估者和比率，这就是为什么它们对我来说保留每个值的确切索引如此重要。

不过，我无法弄清楚如何做到这一点。

我曾尝试使用 find，但无法让它做我想做的事。

```
[r c v] = find(~isnan(datamatrix)) %% doesn't work 
```

编辑：在我看来，我可以这样做：

```
[r c v] = find(datamatrix) 
```

不过，这将包括 [rcv] 输出中的所有 NaN 值。在那种情况下，我将如何遍历 V 数组并删除 NaN 值及其对应的 R 和 C 值？

EDIT2：从头开始。我忘记了我的一些值是 0，所以我不能使用 FIND 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:29:41.407

您可以从数据矩阵中提取所有非 NaN 数字及其索引，如下所示：

```
i = find(~isnan(datamatrix)); 
values = datamatrix(i);
[rows,columns] = ind2sub(size(datamatrix),i); 
```

对于您包含的示例数据，这将导致：

```
rows' = [2   1   1   2   1   1   2]
columns' = [ 1    2    3    3    5    7   11]
values' = [68   12    3   14   18   42   26] 
```

这就是所有索引及其所有相应的值。如果您需要以特定方式订购它们，则必须单独进行。

# c# - 获取当前打开的文档

> ID：15527395
> 
> 赞同：1
> 
> 时间：2013-03-20T15:09:37.700
> 
> 标签：c#, api, lotus-notes

我试图弄清楚如何通过 C# 在 Lotus Notes 上获取当前打开的文档，但我做不到。即使我在谷歌上研究了半天，我也找不到任何有用的东西。

通过我的代码，我得到了我想要的视图、我想要的数据库等，但我只想得到打开的文档。我尝试了类似 IsUIDocOpen 的方法，但没有一个完整的集合包含它是真的。

有人知道通过 Domino API 打开的文档和未打开的文档之间是否有任何不同？我的解决方法是获取电子邮件的主题和电子邮件的大小并比较每一个，当匹配时获取条目 ID，然后获取我需要的信息——但这需要很长时间，尤其是当收件箱很大时。

有什么建议么？

这是我的代码：

```
NotesSession session = new NotesSession();

session.Initialize(sPassword);
notedb = session.GetDatabase(server, filename, false);
if (notedb.IsOpen)
{
  mailView = notedb.GetView("$Inbox");

  mailDoc = mailView.GetLastDocument();
  //mailDoc = mailView.GetDocumentByKey();
  try
  {
    while (mailDoc != null)
    {
      NotesItem item = mailDoc.GetFirstItem("From");

      if (item != null)
      {
        MessageBox.Show("From = " + item.Text);
      }
    }
  }
} 
```

解决方案：应该是这样的： `mailDoc = mailView.GetCurrentDocument();`//但显然这个方法不存在：D

==================================================== ==================================== 解决方案代码：

```
Type NotesUIWorkspaceType = Type.GetTypeFromProgID("Notes.NotesUIWorkspace", true);
object workspace = Activator.CreateInstance(NotesUIWorkspaceType);
object uiDoc = NotesUIWorkspaceType.InvokeMember("CurrentDocument", BindingFlags.GetProperty, null, workspace, null);
Type NotesUIDocument = uiDoc.GetType();
object Subject = NotesUIDocument.InvokeMember("FieldGetText", BindingFlags.InvokeMethod, null, uiDoc, new Object[] { "Subject" });
string subject = "test";

NotesUIDocument.InvokeMember("FieldSetText", BindingFlags.InvokeMethod, null, uiDoc, new Object[] { "Subject", subject });
object Body = NotesUIDocument.InvokeMember("FieldGetText", BindingFlags.InvokeMethod, null, uiDoc, new Object[] { "Body" }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T01:27:23.047

您真正需要的是 Notes OLE 类。

C# Interop 类基于 Notes COM 类。COM 类只能访问“后端”。即，根对象是 Lotus.NotesSession，所有类都针对存储在 .NSF 文件中的数据工作。他们无法访问 Notes UI 中的任何内容。

Notes OLE 类可以访问带有根对象 Notes.NotesSession 的“后端”和带有根对象 Notes.NotesUIWorkspace 的“前端”。从该类的名称可以看出，前端类使您能够访问 Notes 客户端 UI 的元素。

*请注意细微的差别：OLE 类的前缀是“Notes.”，而不是前缀“Lotus”。对于 COM 类。*

在旧式 VB 后期绑定中，OLE 类以这种方式实例化：

```
CreateObject("Notes.NotesUIWorkspace") 
```

我不确定这如何转化为 C#。无论如何，一旦有了 NotesUIWorkspace 对象，当前打开的文档就可以通过该`NotesUIWorkspace.CurrentDocument`方法获得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:46:56.627

您需要先获取 NotesUIWorkspace，然后使用[CurrentDocument](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_CURRENTDOCUMENT_PROPERTY.html)属性

```
NotesUIWorkspace workspace = new NotesUIWorkspace();
NotesUIDocument uidoc = workspace.CurrentDocument(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:20:19.937

如果您使用的是互操作类，您需要使用这些类`NotesUIView.CurrentView.Documents`来获得您想要的……请参见[此处](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_NOTESSESSION_CLASS.html)。

# python - Python ElementTree - 插入元素的副本

> ID：15527399
> 
> 赞同：3
> 
> 时间：2013-03-20T15:09:49.080
> 
> 标签：python, xml

我有以下 xml 代码：

```
<data factor="1" name="ini" value="342" /> 
```

我想复制相同的信息，但名称不同。即，最终输出应该是：

```
<data factor="1" name="ini" value="342" />
<data factor="1" name="raw_ini" value="342" /> 
```

我尝试执行以下操作：

```
model_tag = tree.findall(data_path) #I make sure that data_path is correct.
len_tags = len(model_tag)
i = 0
while i < len_tags: 
    tipo_tag = model_tag[i]
    if tipo_tag.attrib['name']=='ini':
        aux_tag = copy.deepcopy(tipo_tag) #I tried also with copy.copy(tipo_tag).
        aux_tag.attrib['name'] = 'raw_ini'
        model_tag.append(aux_tag)

tree.write(dir_output) 
```

如果我使用“copy.deepcopy”，我没有额外的元素。输出是：

```
<data factor="1" name="ini" value="342" /> 
```

如果我使用“copy.copy”，只需更改元素的名称。输出是：

```
<data factor="1" name="raw_ini" value="342" /> 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:23:36.840

您必须获取这些`data`元素的父级并使用该`Element.insert(index, element)`方法。

此外，您需要使用`deepcopy`而不仅仅是`copy`. 不同之处在于`deepcopy`创建了第二个对象，而通过使用`copy`（返回对象的**浅表**副本），您只会修改第一个元素（正如您也发现的那样）。

假设您`dataParent`作为`data`元素的父级。

```
listData = dataParent.findall('data')
lenData = len(listData)
i = 0
while i < lenData:
    if listData[i].attrib['name'] == 'ini':
        copyElem = copy.deepcopy(dataElem)
        copyElem['name'] = 'raw_ini'
        dataParent.insert([index you wish], copyElem)
    i += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T23:28:11.710

上面例子中的“copy”和“dataElem”是从哪里来的？即copyElem =**复制**.deepcopy( **dataElem** )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T17:07:38.670

备查。

复制节点（或树）并保留其子节点的最简单方法，而无需为此*导入***另一个**库：

 *导入 xml.etree.ElementTree；

```
def copy_tree( tree_root ):
    return et.ElementTree( tree_root );

duplicated_node_tree = copy_tree ( node );    # type(duplicated_node_tree) is ElementTree
duplicated_tree_root_element = new_tree.getroot();  # type(duplicated_tree_root_element) is Element 
```*

# c++ - DLL 中的 Google 测试

> ID：15527401
> 
> 赞同：4
> 
> 时间：2013-03-20T15:09:57.110
> 
> 标签：c++, visual-studio, unit-testing, googletest, googlemock

我想使用 Google Test / Mock 为我的 DLL 中的代码编写单元测试。测试代码应该被编译到我的 DLL 中。

我在 Google Test Primer 中读到这是可能的，但是 gtest 必须编译成 DLL（我猜 gmock 也是如此）。

是否有人编译并使用该框架作为 DLL，并且可以告诉我最重要的项目设置（我使用 VS2010）以及如何使用生成的 DLL 来运行测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:31:52.593

GoogleTest 和 GoogleMock 不需要编译成**.dll**。

而是说它们需要使用与`Runtime Library`使用（链接）它们（`/MD`或`/MT`）的项目相同的设置进行编译。 [运行时库设置](http://msdn.microsoft.com/en-us/library/2kzt1wy3(v=VS.80).aspx0)

一致性是关键！链接任何库（LIB 或 DLL）时，它们应具有与`Runtime Library`项目相同的设置（反之亦然）。

![运行时库选项](../Images/4527aabeb55e30dadf5b91d0035ce1b7.png)

我还建议使用相同的`Character Set`设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-23T16:23:19.747

设置预处理器标志 (properties->c/c++->Preprocessor->Preprocessor Definitions) GTEST_CREATE_SHARED_LIBRARY 将 Gmock 构建为 dll，并使用 GTEST_LINKED_AS_SHARED_LIBRARY 构建消耗 gmock 的 dll

# xslt - 计数在 XSLT1 中生成的元素

> ID：15527405
> 
> 赞同：1
> 
> 时间：2013-03-20T15:10:03.110
> 
> 标签：xslt, xslt-1.0

我正在尝试计算我的转换生成的元素（必须使用 XLST1）。例如，我的转换创建：

```
<Parent>
  <ElementX Att1="2"/>
  <ElementY Att1="1"/>
  <ElementZ Att1="6"/>
</Parent> 
```

我需要在**同一个**转换中打印 3，因为有 3 个子元素。

这可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T03:14:15.703

**这是一个演示如何做到这一点**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:variable name="vrtfPass1">
    <xsl:apply-templates/>
  </xsl:variable>

  <xsl:value-of select="count(ext:node-set($vrtfPass1)/*/*)"/>
 </xsl:template>

 <xsl:template match="/*">
    <Parent>
      <ElementX Att1="2"/>
      <ElementY Att1="1"/>
      <ElementZ Att1="6"/>
    </Parent>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（本演示中未使用）时，将产生所需的正确结果：**

```
3 
```

**说明**：

处理转换结果（在单个转换中）的一般方法是将其组织为*两遍*，我们将第一遍的结果保存在一个变量中。

在第二遍中，我们访问结果并进行额外的处理。

请注意，在 XSLT 1.0 中，如果捕获第一次传递结果的变量是臭名昭著的 RTF（结果树片段）类型，并且需要转换为常规树，以便该树中的任何节点可以访问（`xsl:copy-of`并且`string()`仍然允许在 RTF 上使用）。

这种到常规树的转换是由扩展函数完成的，该函数通常具有名称`node-set`并且始终属于供应商定义的命名空间。在这个演示中，我们使用了`node-set()`属于 EXSLT 命名空间的扩展函数——因为大多数 XSLT 1.0 处理器都实现了 EXSLT。

**有关多通道处理的更多信息，请参阅**：[两阶段处理：不要从阶段 1 XSLT 2.0 处理中输出空标签](https://stackoverflow.com/questions/3199560/two-phase-processing-do-not-output-empty-tags-from-phase-1-xslt-2-0-processing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T00:48:04.360

如果您提供一些 XSLT 的摘录，将会有很大帮助。没有它，我不会给你 XSLT 代码。我会尝试给答案一些“方式”：

一种解决方案是将输出存储到节点集中（使用提供 nodeset() 函数的 XSLT 1.0 扩展）并在此变量上应用 XPath count() 函数。之后，只需使用 xsl:value-of 输出您的变量，您的计数结果也是一样的。

# rally - RallyDev API：如何防止用户帐户密码过期

> ID：15527406
> 
> 赞同：0
> 
> 时间：2013-03-20T15:10:03.933
> 
> 标签：rally

我正在使用以下 SOAP API 与拉力赛进行交互：

[https://rally1.rallydev.com/slm/webservice/1.40/RallyService](https://rally1.rallydev.com/slm/webservice/1.40/RallyService)

我使用的用户名/密码每三个月到期一次。我想知道拉力赛中的用户帐户是否有任何设置可以防止它过期。

谢谢，瓦伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:14:32.953

不幸的是，所有 Rally 用户 ID 都需要密码过期策略。然而，这是一个普遍要求的功能，以便为自动化用户提供更宽松的策略。这个想法：

[更改单个用户帐户的密码策略](https://ideas.rallydev.com/ct/ct_a_view_idea.bix?c=FB85CCBC-A755-42AD-AF8E-6F2B539BECEC&idea_id=9761A25C-9B05-44C2-A7AF-DC713EBBC76F)

On Rally Ideas 对应于此功能请求。我鼓励您和您的队友对此进行投票，以帮助提高 Rally 产品团队的知名度。

此外 - 您可能希望探索将您的自动化代码移植到 Rally 的[基于 REST 的工具包](https://developer.help.rallydev.com/rest-apis)之一。

Rally 的 Web 服务 2.0 及更高版本将不包括基于 SOAP 的服务。虽然 SOAP 将在即将发布的 Webservices 2.0 之后的一整年中继续在 Webservices 1.x 中可用，但需要新的/更新的 Rally 功能的客户会发现，从 2.0 版开始，SOAP 不再提供更新。

# networking - 通过 windows server 2008 上的 IIS7.5 应用程序访问网络共享文件时出现 System.UnauthorizedAccessException

> ID：15527408
> 
> 赞同：2
> 
> 时间：2013-03-20T15:10:10.787
> 
> 标签：networking, iis-7

我发现了类似的问题，但是我找到的解决方案都没有为我工作。我对 IIS 或网络安全知之甚少，所以在这里发布我的问题。如果有人有任何意见，我将不胜感激。

我在 Windows Server 2008 上的 IIS7.5 下运行我的 webApplication。

-Web 服务器计算机不受域控制。

- 通过 Web 应用程序，我正在尝试访问网络共享位置（也不受域控制的 machine1）。

*   我不断收到此错误“System.UnauthorizedAccessException：对路径“\\Machine1\Shared\Test.txt”的访问被拒绝。” 我正在使用 UNC 路径。

*   我将具有完全权限的网络共享目录共享给各种用户，包括“每个人”、“网络服务”、“IUSR”、“IIS_IUSRS”。只是为了首先看到它工作。

*   Web 应用程序在其自己的应用程序池中的 IIS 下运行，“托管管道模式”为经典，“身份”为“网络服务”。注意：甚至尝试将模式更改为“集成”。那没起效。

*   我想在网络服务下运行 IIS。在与网络共享用户帐户匹配的任何其他用户帐户下运行 IIS 对我来说也不是解决方案。即使我尝试过，也无法使其正常工作。

*   我在具有共享目录的网络计算机上使用了进程监视器，并且我希望网络服务能够访问该文件，但是我没有看到任何进程试图访问该文件或创建它。我不确定哪个进程应该访问此文件以及在哪个帐户下？

寻求帮助。

# ios - iOS：更新 tableViewCell 无限循环

> ID：15527417
> 
> 赞同：1
> 
> 时间：2013-03-20T15:10:39.833
> 
> 标签：ios, objective-c, multithreading, core-data, uitableview

这就是问题所在：在将缩略图保存并获取到 Core Data 之后，我更新了我的 tableview，然后我告诉单元格进行自我更新——这样当图像加载到 Core Data 中时它可以显示缩略图。我使用两个不同的线程，因为 Core Data 不是线程安全的，所有 GUI 元素当然都需要在主线程中发生。

但是这整个方法只是永远循环，导致它是当我重新加载线程时：

```
[self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone]; 
```

为什么？我该如何解决这个问题？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Photo"];
    Photo *photo = [self.fetchedResultsController objectAtIndexPath:indexPath];    
    cell.textLabel.text = photo.title;
    cell.detailTextLabel.text = photo.subtitle;

    NSLog(@"Context %@", self.photographer.managedObjectContext);
    [self.photographer.managedObjectContext performBlock:^{
        [Photo setThumbnailForPhoto:photo];
        dispatch_async(dispatch_get_main_queue(), ^{
            cell.imageView.image = [UIImage imageWithData:photo.thumbnail];
            [self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone];
        });
    }];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:14:57.373

`cellForRowAtIndexPath:`无限循环是在加载 fetch 并调用某个单元格上的 reload 后调用再次引起的。

重新加载将迫使`cellForRowAtIndexPath:`再次调用...在您的情况下一次又一次地调用到无穷大。

解决方案很简单...不要在 cellForRowAtIndexPath 中重新加载您的单元格，而是在 fetchrequest 的回调方法中重新加载。然后在那里重新加载它而不是创建单元格。

而是根本不加载里面的图像`cellForRowAtIndexpath:`。每当您的表被实例化时，请创建一个循环您的数据源并获取每个项目的相应单元格的方法。然后为您认为需要的每个单元格加载图像。并在获取项目完成时重新加载单元格（例如回调方法）。

如果您确实希望像现在所做的那样在单元格的创建中加载图像（尽管我认为这不是正确的方法）。您可以围绕整个 performBlock: 使用 if 语句检查图像是否已设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:47:25.547

`reloadRowsAtIndexPaths`正如其他人已经说过的那样，加载图像时应该不需要调用。分配一个新图像`cell.imageView.image`就足够了。

但是您的代码还有另一个问题。我假设这`self.photographer.managedObjectContext`是“私有并发类型”的托管对象上下文，因此`performBlock`在后台线程上执行。（否则就没有必要使用了`dispatch_async(dispatch_get_main_queue(), ...)`。）

所以`performBlock:`在后台线程上异步执行代码。（这很好，因为 UI 没有被阻塞。）但是当图像在一段时间后被提取时，单元格可能已被*重新*用于不同的行。（如果您滚动表格视图以使该行在获取图像时变得不可见，则会发生这种情况。）

因此，您必须检查单元格是否仍在表格视图中的相同位置：

```
[self.photographer.managedObjectContext performBlock:^{
    [Photo setThumbnailForPhoto:photo];
    dispatch_async(dispatch_get_main_queue(), ^{
        if ([[tableView indexPathForCell:cell] isEqualTo:indexPath]) {
            cell.imageView.image = [UIImage imageWithData:photo.thumbnail];
        }
    });
}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:05:34.867

我将替换以下代码：

```
 cell.imageView.image = [UIImage imageWithData:photo.thumbnail];
    [self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationNone]; 
```

和：

```
 UITableViewCell *blockCell = [tableView cellForRowAtIndexPath:indexPath];
    blockCell.imageView.image = [UIImage imageWithData:photo.thumbnail];
    [blockCell setNeedsLayout]; 
```

这解决了递归重新加载的问题，以及`cell`在此期间被重用的可能性。我还会检查您是否已经加载了照片数据，如果是，则不更新。

由于您正在使用`NSFetchedResultsController`尽管，如果委托回调已经在照片数据更新时通知您，那么您最好使用 Totomus Maximus 的回答。这种方式只会更新图像视图，不会更新照片更新方法可能更改的任何其他信息。

# macos - 连接 USB 设备时响应

> ID：15527418
> 
> 赞同：0
> 
> 时间：2013-03-20T15:10:48.850
> 
> 标签：macos

当用户连接 USB 设备时，有没有办法自动启动应用程序？

我已阅读有关启动守护程序和启动代理以及启动服务的信息，但文档没有回答我的问题：当用户插入设备时我该如何反应？

我在控制台中注意到，如果我拔下设备没有任何反应，但如果我再次插入它，那么系统中的某些东西会做出反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T13:28:49.827

[https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html)

你试过launchd plist文档中提到的“StarOnMount”键吗？

您的二进制文件可以注册为 OnDemand LaunchAgent 和/或 LaunchDameon，并且在安装了新文件系统时将启动。

# android - SearchView 中的自定义光标颜色

> ID：15527420
> 
> 赞同：5
> 
> 时间：2013-03-20T15:10:57.530
> 
> 标签：android, styles, android-actionbar, actionbarsherlock

我想在 Actionbar 的[SearchView](http://developer.android.com/reference/android/widget/SearchView.html)中更改闪烁光标的颜色（为了兼容性，我使用 Actionbar Sherlock）。到目前为止，我已经设法更改了 EditText 元素的光标颜色。[这篇 SO 帖子](https://stackoverflow.com/questions/7238450/set-edittext-cursor-color)帮助我实现了这一点，我用于 EditText 的样式如下所示：

```
<style name="CustomTheme" parent="Theme.Sherlock.Light">
    <item name="android:editTextStyle">@style/edittext_style</item>
</style>

<style name="edittext_style" parent="@android:style/Widget.EditText">
    <item name="android:textCursorDrawable">@drawable/red_cursor</item>
</style> 
```

红色光标如下所示：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
       android:shape="rectangle" >
    <gradient android:startColor="@color/darkRed" 
              android:endColor="@color/darkRed" />
    <size android:width="1dp" />
</shape> 
```

我确实查看了 SearchView 小部件的实现，并且我认为它使用[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)进行文本输入。由于 AutoCompleteTextView 派生自 EditText 小部件，我真的不明白为什么该样式适用于 EditText 但不适用于 AutoCompleteTextView（因此适用于 SearchView）。

有没有人设法更改 SearchView 小部件中光标的颜色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:49:30.317

我刚刚找到了一个可行的解决方案。我替换

```
<style name="edittext_style" parent="@android:style/Widget.EditText">
    <item name="android:textCursorDrawable">@drawable/red_cursor</item>
</style> 
```

和

```
<style name="SearchViewStyle" parent="Widget.Sherlock.Light.SearchAutoCompleteTextView">
    <item name="android:textCursorDrawable">@drawable/red_cursor</item>
</style> 
```

并修改了我的主题，使其看起来像这样：

```
<style name="CustomTheme" parent="Theme.Sherlock.Light">
    ...
    <item name="searchAutoCompleteTextView">@style/SearchViewStyle</item>
    ...
</style> 
```

# sql - 如何以每条记录都与“上一个”记录连接的方式自连接表？

> ID：15527423
> 
> 赞同：10
> 
> 时间：2013-03-20T15:11:11.033
> 
> 标签：sql, sql-server, performance, sql-server-2008

我有一个 MS SQL 表，其中包含具有以下列的股票数据：`Id, Symbol, Date, Open, High, Low, Close`.

我想自行加入表格，这样我就可以获得`Close`.

我必须创建一个查询，该查询将以每条记录还包含上一个会话的数据的方式将表与自身连接起来（请注意，我不能使用昨天的日期）。

我的想法是做这样的事情：

```
select * from quotes t1
inner join quotes t2
on t1.symbol = t2.symbol and
t2.date = (select max(date) from quotes where symbol = t1.symbol and date < t1.date) 
```

但是我不知道这是否是正确/最快的方式。在考虑性能时我应该考虑什么？（例如，将 UNIQUE 索引放在 (Symbol, Date) 对上会提高性能吗？）

该表中每年将有大约 100,000 条新记录。我正在使用 MS SQL Server 2008

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T15:23:13.937

一种选择是使用递归 cte （如果我正确理解您的要求）：

```
WITH RNCTE AS (
  SELECT *, ROW_NUMBER() OVER (PARTITION BY symbol ORDER BY date) rn
        FROM quotes
  ),
CTE AS (
  SELECT symbol, date, rn, cast(0 as decimal(10,2)) perc, closed
  FROM RNCTE
  WHERE rn = 1
  UNION ALL
  SELECT r.symbol, r.date, r.rn, cast(c.closed/r.closed as decimal(10,2)) perc, r.closed
  FROM CTE c 
    JOIN RNCTE r on c.symbol = r.symbol AND c.rn+1 = r.rn
  )
SELECT * FROM CTE
ORDER BY symbol, date 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/d5a82/9)

如果您需要每个符号的运行总计用作百分比变化，那么很容易为该金额添加一个额外的列 - 不完全确定您的意图是什么，所以上面只是将当前关闭的金额除以之前的平仓金额。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-13T13:55:24.787

像这样的东西可以在 SQLite 中工作：

```
SELECT ..
FROM quotes t1, quotes t2
WHERE t1.symbol = t2.symbol
    AND t1.date < t2.date
GROUP BY t2.ID
    HAVING t2.date = MIN(t2.date) 
```

鉴于 SQLite 是最简单的一种，也许在 MSSQL 中，这也可以通过最小的更改来工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-26T15:59:56.630

索引`(symbol, date)`

```
SELECT *
FROM quotes q_curr
CROSS APPLY (
  SELECT TOP(1) *
  FROM quotes
  WHERE symbol = q_curr.symbol
    AND date < q_curr.date
  ORDER BY date DESC
) q_prev 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:29:17.070

您可以将选项与[CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)和[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)排名功能一起使用

```
 ;WITH cte AS
 (
  SELECT symbol, date, [Open], [High], [Low], [Close],
         ROW_NUMBER() OVER(PARTITION BY symbol ORDER BY date) AS Id
  FROM quotes
  )
  SELECT c1.Id, c1.symbol, c1.date, c1.[Open], c1.[High], c1.[Low], c1.[Close], 
         ISNULL(c2.[Close] / c1.[Close], 0) AS perc
  FROM cte c1 LEFT JOIN cte c2 ON c1.symbol = c2.symbol AND c1.Id = c2.Id + 1
  ORDER BY c1.symbol, c1.date 
```

为了提高性能（避免排序和 RID 查找）使用这个索引

```
CREATE INDEX ix_symbol$date_quotes ON quotes(symbol, date) INCLUDE([Open], [High], [Low], [Close]) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/62810/4)上的简单演示[](http://sqlfiddle.com/#!3/62810/4)

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T15:33:32.993

你做这样的事情：

```
with OrderedQuotes as
(
    select 
        row_number() over(order by Symbol, Date) RowNum, 
        ID, 
        Symbol, 
        Date, 
        Open, 
        High, 
        Low, 
        Close
      from Quotes
)
select
    a.Symbol,
    a.Date,
    a.Open,
    a.High,
    a.Low,
    a.Close,
    a.Date PrevDate,
    a.Open PrevOpen,
    a.High PrevHigh,
    a.Low PrevLow,
    a.Close PrevClose,

    b.Close-a.Close/a.Close PctChange

  from OrderedQuotes a
  join OrderedQuotes b on a.Symbol = b.Symbol and a.RowNum = b.RowNum + 1 
```

如果将最后一个连接更改为左连接，则每个符号的第一个日期都会出现一行，不确定是否需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T15:20:32.487

你可以这样做：

```
DECLARE @Today DATETIME
SELECT @Today = DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP))

;WITH today AS
(
    SELECT  Id ,
            Symbol ,
            Date ,
            [OPEN] ,
            High ,
            LOW ,
            [CLOSE],
            DATEADD(DAY, -1, Date) AS yesterday 
    FROM quotes
    WHERE date = @today
)
SELECT *
FROM today
LEFT JOIN quotes yesterday ON today.Symbol = yesterday.Symbol
    AND today.yesterday = yesterday.Date 
```

这样你就可以限制你的“今天”结果，如果这是一个选项的话。

编辑：作为其他问题列出的 CTE 可能效果很好，但在处理 10 万行或更多行时，我倾向于犹豫使用 ROW_NUMBER。如果前一天可能并不总是昨天，我倾向于在自己的查询中提取前一天的支票，然后将其用作参考：

```
DECLARE @Today DATETIME, @PreviousDay DATETIME
SELECT @Today = DATEADD(DAY, 0, DATEDIFF(DAY, 0, CURRENT_TIMESTAMP));
SELECT @PreviousDay = MAX(Date) FROM quotes  WHERE Date < @Today;
WITH today AS
(
    SELECT  Id ,
            Symbol ,
            Date ,
            [OPEN] ,
            High ,
            LOW ,
            [CLOSE]
    FROM quotes 
    WHERE date = @today
)
SELECT *
FROM today
LEFT JOIN quotes AS previousday
    ON today.Symbol = previousday.Symbol
    AND previousday.Date = @PreviousDay 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T15:25:26.373

你所拥有的很好。我不知道将子查询翻译成连接是否会有所帮助。但是，您要求它，所以这样做的方法可能是再次将表连接到自身。

```
select *
from quotes t1
inner join quotes t2
   on t1.symbol = t2.symbol and t1.date > t2.date
left outer join quotes t3
   on t2.symbol = t3.symbol and t2.date > t3.date
where t3.date is null 
```**

# xslt - != XPath 运算符的奇怪行为

> ID：15527427
> 
> 赞同：26
> 
> 时间：2013-03-20T15:11:24.237
> 
> 标签：xslt, conditional-statements

我正在尝试创建一个带有多个条件的 xsl:choose 语句进行测试。到目前为止，我有这个：

```
<xsl:choose>
    <xsl:when test="$AccountNumber != '12345' and $Balance != '0'">
       <do stuff here>
       ... 
```

问题是“和”被视为“或”。如果帐号为 12345 或账户余额为 0，则条件为真并执行代码。我需要测试两个条件都必须为真......我这里的语法错误吗？

在此先感谢，〜蒂姆

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-21T03:00:02.563

> 问题是“和”被视为“或”。

不，问题在于您使用的是 XPath`!=`运算符，而您不知道它的“怪异”语义。

**解决方案**：

只需用表达式替换任何`x != y`表达式`not(x = y)`。

**在您的具体情况下**：

**替换**：

```
<xsl:when test="$AccountNumber != '12345' and $Balance != '0'"> 
```

**与**：

```
<xsl:when test="not($AccountNumber = '12345') and not($Balance = '0')"> 
```

**说明**：

根据定义，只要运算符的一个操作数`!=`是一个节点集，那么如果节点集中有一个节点的值不等于另一个操作数，则计算此运算符的结果为真。

**所以**：

```
 $someNodeSet != $someValue 
```

通常不会产生与以下相同的结果：

```
 not($someNodeSet = $someValue) 
```

`$someNodeSet`后者（根据定义）在不存在字符串值等于的节点时为真`$someValue`。

**教训**：

切勿使用`!=`操作员，除非您绝对确定自己知道自己在做什么。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T15:26:53.300

如果`$AccountNumber`or`$Balance`是一个节点集，那么这种行为很容易发生。这不是因为`and`被视为`or`.

例如，如果`$AccountNumber`用值`12345`和引用节点，并且用值`66`和`$Balance`引用节点，那么 将是真的（因为不等于）并且会是真的（因为不等于）。`55``0``$AccountNumber != '12345'``66``12345``$Balance != '0'``55``0`

我建议尝试这个：

```
<xsl:when test="not($AccountNumber = '12345' or $Balance = '0')"> 
```

`$AccountNumber = '12345' or $Balance = '0'`任何时候只要有一个`$AccountNumber`带有值的`12345`或有一个`$Balance`带有值的`0`，就会为真，如果你应用`not()`到那个，你会得到一个错误的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:51:36.817

我一直使用这种语法，它比使用 != 产生更可预测的结果。

```
<xsl:when test="not($AccountNumber = '12345') and not($Balance = '0')" /> 
```

# python - AttributeError：“QuerySet”对象没有属性

> ID：15527438
> 
> 赞同：4
> 
> 时间：2013-03-20T15:11:54.993
> 
> 标签：python, django

有人可以解释一下我在下面的 shell 输出中看到的内容吗：

```
import test/models.py

biz_area = BusinessArea.objects.filter(business_area_manager=user)

dprint(biz_area)
[{'_state': <django.db.models.base.ModelState object at 0x3726890>,
'business_area_id': Decimal('42'),
'business_area_manager': Decimal('999'),
'business_area_name': u'group 1',
'inactive': u'N'}]

biz_area.business_area_id

Traceback (most recent call last):
File "<<console>console>", line 1, in <<module>module>
AttributeError: 'QuerySet' object has no attribute 'business_area_id' 
```

因此，python 说 biz_area 查询集没有 'business_area_id' 属性，而漂亮打印的对象列表显示它确实具有这样的属性。有人可以在这里让我走上正确的轨道，因为这让我有些困惑......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:31:43.350

`biz_area`是`QuerySet`对象。这是一个集合而不是单个对象。

```
[{'_state': <django.db.models.base.ModelState object at 0x3726890>,
'business_area_id': Decimal('42'),
'business_area_manager': Decimal('999'),
'business_area_name': u'group 1',
'inactive': u'N'}] 
```

方括号 ([]) 表示一个集合。您可以将其视为 python 列表

有几种处理方法：

过滤器将始终返回对象集合

```
biz_areas = BusinessArea.objects.filter(business_area_manager=user)
for biz_area in biz_areas:
  biz_area.business_area_id 
```

如果`BusinessArea`永远只有一个同事`user`

```
biz_area = BusinessArea.objects.get(business_area_manager=user)
biz_are.business_area_id 
```

如果有更多对象或 0 个对象与您的查询匹配，请阅读有关[`get`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get)它将引发异常的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:17:25.843

错了，漂亮的打印`biz_area`并没有显示它有`business_area_id`属性，如果它有它会很奇怪，因为查询集是一个对象的集合（在漂亮的打印中作为一个列表可见，尽管它实际上不是一个列表）并且`business_area_id`是单个对象的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-14T07:10:31.607

biz_area 是 Queryset 对象，表示它是对象的集合。遍历 biz_area 以获取 business_area_id。

```
for i in biz_area:
  i.business_area_id 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-20T15:19:56.273

如果你输入

```
type(biz_area) 
```

你会看到它是一个列表类型，而不是来自查询集的对象。您必须遍历 biz_area 变量中的所有项目并将它们打印出来。

如果您[检索到单个对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)，则可以像以前一样访问其 business_area_id 属性。

# c# - Win8 ListView Tap不选择项目

> ID：15527442
> 
> 赞同：0
> 
> 时间：2013-03-20T15:12:29.663
> 
> 标签：c#, xaml, listview, windows-8

嗨，我正在做一个笔记应用程序，我已经将它连接到我的 SQL Azure 数据库。这些项目通过 MobileServiceCollectionView 自动填充。点击一个项目后，应该会在右侧打开一个 detailView...

我不知道为什么，但是点击一个项目并没有选择它，所以我无法在 noteListView_Tapped 事件中检查 listView.SelectedItem .....

我的列表视图有什么问题？

```
<ListView x:Name="noteListView" Margin="20,0,0,0" Tapped="noteListView_Tapped">
 <ListView.ItemTemplate>
  <DataTemplate>
   <StackPanel Orientation="Horizontal" Margin="2">

     <CheckBox x:Name="CheckBoxComplete" IsChecked="{Binding Complete, Mode=TwoWay}" Checked="CheckBoxComplete_Checked" Padding="3"/>
     <TextBlock x:Name="TextBlockTodoItem" Text="{Binding Title}" Padding="3" />

   </StackPanel>
  </DataTemplate>
 </ListView.ItemTemplate>
</ListView> 
```

这里是 Tapped 事件..它崩溃了`TodoItem t = (TodoItem)lv.SelectedItem;`

所以我添加了 if 条件，现在除了调试打印什么都没有发生。

```
private void noteListView_Tapped(object sender, TappedRoutedEventArgs e)
    {
        Debug.WriteLine("0");
        ListView lv = (ListView)sender;
        if (lv.Items.Count > 0)
        {
            if (lv.SelectedItems.Count > 0)
            {
                TodoItem t = (TodoItem)lv.SelectedItem;
                Debug.WriteLine("1");
                Debug.WriteLine(t.Title);
                try
                {
                    Location l = TodoItem.StringToLocation(t.LocationTaken);
                    Debug.WriteLine("2");
                    MapLayer.SetPosition(locationIcon, l);
                    map.SetView(l, 15.0f);
                }
                catch (Exception ex)
                {
                    Debug.WriteLine("Map set position failed.: " + ex.Message);
                }
            }
        }
    } 
```

那么我必须更改什么或者我如何知道已单击/选择了哪个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:16:42.620

为什么不在列表视图上使用 SelectionChanged 事件？

```
<ListView SelectionChanged="noteListView_SelectionChanged"> 
```

然后在你的代码后面

```
private void noteListView_SelectionChanged(object sender, RoutedEventArgs e)
{
    if((sender as ListView).Items.Count > 0)
    {
        .....
    }
} 
```

我认为（尽管我不确定）您的问题是点击 listView，因此点击事件与选择列表中的项目不同。

# ms-access - 如何根据 MS Access 查询的动态结果创建 Excel 文件

> ID：15527443
> 
> 赞同：0
> 
> 时间：2013-03-20T15:12:29.753
> 
> 标签：ms-access

在 MS Access 中，我有一个查询，显示每个**Zone中的几个****Errors**。我需要在 Excel 中为每个**Zone**创建一个摘要，每周都会更改。我创建了一个查询，用于确定该周报告中存在哪些区域。

 ****```
Zone
Zone 1
Zone 3
Zone 4
Zone 5 
```

我需要创建以下文件：Zone1.xlsm、Zone3.xlsm、Zone4.xlsm、Zone5.xlsm

我是一个完全的新手，所以任何建议都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:21:27.580

您可以使用[TransferSpreadsheet](http://msdn.microsoft.com/en-us/library/office/bb214134%28v=office.12%29.aspx)

非常粗略：

```
''The query with unique zones
Set rs = CurrentDB.OpenRecordset("select zones from zonequery")

Do While Not rs.EOF
   ''The sql to get the data
   ssql="SELECT * FROM Whereever Where Zone='" & rs!Zone & "'"

   ''An existing query called MyZoneOutputQuery
   CurrentDB.QueryDefs("MyZoneOutputQuery").sql=ssql

   DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel12, _
      "MyZoneOutputQuery", "z:\docs\" & rs!Zone & ".xlsm", True
   rs.Movenext
Loop 
```****

# c# - 如何使用 linq 实现这一点？

> ID：15527450
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:12:44.960
> 
> 标签：c#, linq

```
int cell = 1;
foreach (var item in resourceDictionary.Keys)
{
    excelSheet.Cells[cell, 1] = item;
    excelSheet.Cells[cell, 2] = resourceDictionary[item];
        cell++;
} 
```

有没有最简单的方法可以在 c# 中使用 linq 来实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:17:44.533

您的代码不需要 LINQ。如果`resourceDictionary`implements `IDictionary<TKey, TValue>`，那么以下内容可能更具可读性/效率：

```
int cell = 1;
foreach (var item in resourceDictionary)
{
    excelSheet.Cells[cell, 1] = item.Key;
    excelSheet.Cells[cell, 2] = item.Value;
    cell++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:21:40.097

如果你想要的话：

```
resourceDictionary.Select((p, i) => new {p.Key, p.Value, Cell = i + 1})
   .ToList()
   .ForEach(item => {
         excelSheet.Cells[item.Cell, 1] = item.Key;
         excelSheet.Cells[item.Cell, 2] = item.Value;
           }); 
```

# java - Android视图关闭某些视图的隐式状态保留

> ID：15527456
> 
> 赞同：30
> 
> 时间：2013-03-20T15:13:17.813
> 
> 标签：java, android

我有在同一个活动中动态添加多次的**自定义。** `View`

每个自定义视图实例都有一个`TextView`孩子。`TextView`有它的ID **，**并且对于每个视图实例都是相同的。

对于每个自定义视图实例，我在创建活动时设置不同`Text`。`TextView`当我旋转屏幕时，将重新创建活动，但现在每个活动都`TextView`显示相同`Text`（文本与最后一个实例的文本相同）。

**这是因为实例状态的保存和恢复会自动保存一些信息，但这些信息显然与 ID 相关联，在我的情况下会产生问题。**

有没有办法禁用特定视图的自动状态保留？

是否有属性或设置或一些解决方法？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-20T15:18:05.233

你可以使用[`View.setSaveEnabled (boolean enabled)`](http://developer.android.com/reference/android/view/View.html#setSaveEnabled%28boolean%29)方法。

也可以通过`xml`使用`saveEnabled`属性禁用自动状态保存`android:saveEnabled="false"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T10:58:36.440

如果您需要为所有层次结构应用 setSaveEnabled：

```
 public static void SaveEnableViewAndChildren(this View view, bool val)
    {
        if (view == null)
            return;
        view.SaveEnabled = val;

        var viewGroup = view as ViewGroup;
        if (viewGroup == null)
            return;
        for (int i = 0; i < viewGroup.ChildCount; i++)
            SaveEnableViewAndChildren(viewGroup.GetChildAt(i), val);
    } 
```

# clojure - 如何让它在 webnoir 中工作

> ID：15527459
> 
> 赞同：0
> 
> 时间：2013-03-20T15:13:35.533
> 
> 标签：clojure, noir

我正在尝试在 webnoir 中执行此操作。

这有效：

```
(defpage [:post "/testurl] {:keys [name phone]}
  (html5
    (str "name: " name)
    (str "phone: " phone))) 
```

现在我想为许多模块生成 defpages，每个模块都有一个不同字段的列表。我想从一个函数中调用 defpages。defpage 必须接受该字段的帖子。

基本上我有这个：`(def fields1 ["Name" "Phone" "Email" "xyz"])`

而且我想将其传递给 defpage，而不必手动指定键。

这些字段将来可能会发生变化，这就是为什么我希望我的代码在服务器启动时获取字段并动态创建 defpages。

可能吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:33:57.780

您可以使用宏执行此操作：

```
(defmacro defpages [pages]
  `(do
     ~@(map (fn [page]
              `(~'defpage [:post ~(str "/" (page :name))]
                 {:keys ~(into [] (map symbol (page :fields)))}
                 (~'html5
                  ~@(map (fn [field]
                           `(str ~(str field ": ")
                                 ~(symbol field)))
                         (page :fields))))) pages)))

(defpages [{:name "testurl"
            :fields ["name" "phone"]}
           {:name "user"
            :fields ["age" "address"]}]) 
```

# javascript - 使用 Enter 键提交带有链接的表单作为按钮

> ID：15527464
> 
> 赞同：2
> 
> 时间：2013-03-20T15:13:52.943
> 
> 标签：javascript, html, enter

嗨，我目前在网站上遇到表单问题，我使用链接而不是按钮或输入来提交表单，但是当用户按下 Enter 键时，我似乎无法提交表单值正在使用以下格式的 javascript 进行验证 onsubmit="return function();"

任何人都知道如何使它在 enter keypress 上提交？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:18:18.757

当点击特定链接上的键时，尝试捕获 event.keyCode 属性。

```
 $('#example').keyup(function(event) {
      if(event.keyCode === 13) {
        //do what you want
        **EDIT:** $('$FormName').submit();
      }
   }); 
```

# javascript - 使用 Javascript 旋转背景时页面跳转到顶部

> ID：15527469
> 
> 赞同：0
> 
> 时间：2013-03-20T15:14:12.197
> 
> 标签：javascript, jquery

我正在使用 javascript 来旋转背景图像。问题是，每次图像更改时，页面都会跳到顶部。希望这是一个简单的修复！

这是我的代码：

```
<script type='text/javascript'> 
$(window).load(function(){

var initialBg =  $('#slider').css("background-image"); // added

var firstTime = true;
var arr = [initialBg, "url(/wp-content/uploads/2013/03/slider2-explore.png)", "url(/wp-    content/uploads/2013/03/slider3-experience.png)"];
(function recurse(counter) {
    var bgImage = arr[counter];
    if (firstTime == false) {
        $("#slider").fadeOut("slow", function(){
            $('#slider').css('background-image', bgImage);
        });
        $("#slider").fadeIn("slow");
    } else {
        firstTime = false;
    }               
    delete arr[counter];
    arr.push(bgImage);
    setTimeout(function() {
        recurse(counter + 1);
    }, 4500);  
})(0);  

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:45:08.993

您的页面跳转，因为瞬间#slider 不存在并且其他页面内容折叠到其空间中。试试这个：

```
#slider_wrapper {
    height: 550px;
}

<div id="slider_wrapper">
    <div id="slider"></div>
</div> 
```

您可能还需要预加载背景图像以防止奇怪的淡入延迟。

# mysql - Mysql按部分字符串或某些int之后的符号排序

> ID：15527473
> 
> 赞同：1
> 
> 时间：2013-03-20T15:14:20.227
> 
> 标签：mysql

我在同一张表中有很多来自 MySQL 的 ip 地址，ip 是不同的段。

我希望选择这样的结果。如何使用 order by ？

```
192.168.1.1
192.168.1.2
192.168.1.10
192.168.1.111
192.168.1.23
192.168.1.25
192.168.20.1
192.168.20.31
192.168.20.25
192.168.35.2
192.168.35.21
192.168.35.125 
```

在现在这样的 Mysql_query 中。

```
192.168.1.1
192.168.1.10
192.168.1.111
192.168.1.2
192.168.1.23
192.168.1.25
.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:17:40.680

像这样的东西...

```
SELECT v.ip 
FROM   (SELECT ip, 
               CAST(Substring_index(ip, '.', 1) AS UNSIGNED INTEGER)  first, 
               CAST(Substring_index(Substring_index(ip, '.' 
                   , 2 ), '.', -1) AS UNSIGNED INTEGER)               second, 
               CAST(Substring_index(Substring_index(ip, '.' 
                   , -2 ), '.', 1) AS UNSIGNED INTEGER)               third, 
               CAST(Substring_index(ip, '.', -1) AS UNSIGNED INTEGER) fourth 
        FROM   ips) v 
ORDER  BY v.first, 
          v.second, 
          v.third, 
          v.fourth 
```

[查看演示](http://sqlfiddle.com/#!2/1c0b7/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:41:27.100

我看起来像一个重复的问题，请参阅上面 Legendinmaking 的评论（[按....数字排序？帮我对 IP 地址进行排序](https://stackoverflow.com/questions/8719945/order-by-numbers-help-me-sort-ip-addresses)）。

波兰王子的帖子有效，但根据之前的帖子，我建议这样做：

```
SELECT ip 
FROM   ips
ORDER BY INET_ATON(ip); 
```

样本数据：

```
CREATE TABLE ips
    (`ip` varchar(14));

INSERT INTO ips
    (`ip`)
VALUES
    ('192.168.35.2'),
    ('192.168.35.21'),
    ('192.168.1.1'),
    ('192.168.1.2'),
    ('192.168.35.125'),
    ('192.168.1.23'),
    ('192.168.1.25'),
    ('192.168.20.1'),
    ('192.168.20.31'),
    ('192.168.1.10'),
    ('192.168.1.111'),
    ('192.168.20.25'); 
```

[SQL FIDDLE 演示](http://sqlfiddle.com/#!2/1c0b7/3)

请注意，这是基于波兰王子的 SQL Fiddle 和 Legendinmaking 的评论。

# jquery - 如果仅单击具有相同类的所有项目，如何隐藏 div

> ID：15527478
> 
> 赞同：0
> 
> 时间：2013-03-20T15:14:28.187
> 
> 标签：jquery

我现在已经编辑了页面并将代码放在这里：

当单击“all”类的所有链接时，我试图隐藏一个 div。

我只希望单击所有 id 为“all”的锚点以隐藏 div#container。

```
 <!doctype html>
        <html lang="en">
        <head>

          <meta charset="utf-8" />
          <title>Combination filters &middot;</title>

          <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

          <link rel="stylesheet" href="../css/style.css" />

        </head>
        <body class="demos ">

          <section id="content">

            <h1>Find your top-load Tester</h1>
            <h3>Potential description Text</h3>

        <section id="options" class="clearfix combo-filters">

            <div class="option-combo height">
              <h4>Height (mm)</h4>
              <ul class="filter option-set clearfix " data-filter-group="height"> 
                <li><a id="all" href="#filter-height-any" data-filter-value="*" class="selected">All</a>

                  <li><a href="#filter-height-525" data-filter-value=".525">525 or less</a>

                  <li><a href="#filter-height-645" data-filter-value=".645">645 or less</a>

                  <li><a href="#filter-height-1265" data-filter-value=".1265">more than 1265</a>

              </ul>
            </div>

            <div class="option-combo width">
              <h4>Width &nbsp;(mm)</h4>
              <ul class="filter option-set clearfix " data-filter-group="width"> 
                <li><a id="all" href="#filter-width-any" data-filter-value="" class="selected">All</a>

                  <li><a href="#filter-width-134" data-filter-value=".134w">134 or less</a>

                  <li><a href="#filter-width-190" data-filter-value=".190w">190 or less</a>

                  <li><a href="#filter-width-290" data-filter-value=".290w">290 or less</a>

                  <li><a href="#filter-width-328" data-filter-value=".328w">328 or less</a>

                  <li><a href="#filter-width-420" data-filter-value=".420w">420 or more</a>

              </ul>
            </div>

            <div class="option-combo depth">
              <h4>Depth (mm)</h4>
              <ul class="filter option-set clearfix " data-filter-group="depth"> 
                <li><a id="all" href="#filter-depth-any" data-filter-value="" class="selected">All</a>

                  <li><a href="#filter-depth-134" data-filter-value=".134d">134 or less</a>

                  <li><a href="#filter-depth-190" data-filter-value=".190d">190 or less</a>

                  <li><a href="#filter-depth-290" data-filter-value=".290d">290 or less</a>

                  <li><a href="#filter-depth" data-filter-value=".328d">328 or less</a> 

                  <li><a href="#filter-depth-420" data-filter-value=".420d">420 or more</a>           
              </ul>
            </div>

            <div class="option-combo load">
              <h4>Load (kN)&nbsp;&nbsp;&nbsp;&nbsp;</h4>
              <ul class="filter option-set clearfix " data-filter-group="load"> 
                <li><a id="all" href="#filter-load-any" data-filter-value="" class="selected">All</a>

                  <li><a href="#filter-load-2.5" data-filter-value=".2-5l">2.5 or less</a>

                  <li><a href="#filter-load-5" data-filter-value=".5l">5 or less</a>

                  <li><a href="#filter-load-10" data-filter-value=".10l">10 or less</a>

                  <li><a href="#filter-load-25" data-filter-value=".25l">25 or less</a> 

                  <li><a href="#filter-load-50" data-filter-value=".50l">50 or more</a>           
              </ul>
            </div>

        </section> <!-- #options -->

        <div id="container" class="clearfix">

                <div id="data1" class="width-height-depth 525 134w 290w 290d 134d 2-5l">Datasheet1</div>

                <div id="data2" class="width-height-depth 645 190w 328w 328d 190d 5l">Datasheet2</div>

                <div id="data3" class="width-height-depth   525 50l 25l 10l 190w  328w 190d 328d   645 50l 25l 10l 134w  290w 134d 290d  ">Datasheet3</div>

                <div id="exit" class="width-height-depth 525 645 1265 420d 420w">This configuration is beyond the standard range of top-load testers. Please contact Mecmesin Sales to discuss ways to meet your requirements</div>

                    <div id="intro" class="width-height-depth">Please specify</div>

        </div> <!-- #container -->

        <script src="../js/jquery-1.7.1.min.js"></script>
        <script src="../jquery.isotope.min.js"></script>
        <script>
          $(function(){

            var $container = $('#container'),
                filters = {};

            $container.isotope({
              itemSelector : '.width-height-depth',

              masonry: {
                columnWidth: 80
              },
              filter: '#intro'
            });

            // filter buttons
            $('.filter a').click(function(){
              var $this = $(this);
              // don't proceed if already selected
              if ( $this.hasClass('selected') ) {
                return;
              }

              var $optionSet = $this.parents('.option-set');
              // change selected class
              $optionSet.find('.selected').removeClass('selected');
              $this.addClass('selected');

              // store filter value in object
              // i.e. filters.color = 'red'
              var group = $optionSet.attr('data-filter-group');
              filters[ group ] = $this.attr('data-filter-value');
              // convert object into array
              var isoFilters = [];
              for ( var prop in filters ) {
                isoFilters.push( filters[ prop ] )
              }
              var selector = isoFilters.join('');
              $container.isotope({ filter: selector });

              return false;
            });

             $('a').on('click', function(){

                $('#exit').hide();
                return false;

              });

              $('.filter a').on('click', function(){

                if( $(this).data('filter-value') == '.1265'  ) $('#exit').show();
                return false;

              });

              $('.filter a').on('click', function(){

                if( $(this).data('filter-value') == '.420d'  ) $('#exit').show();
                return false;

              });

                $('.filter a').on('click', function(){

                if( $(this).data('filter-value') == '.420w'  ) $('#exit').show();
                return false;

              });

                 $('.filter a').on('click', function(){

                 $('#intro').hide();
                return false;

              });

                          });

        </script>

            <footer>
             <p>If you cant find what you are looking for blah blah blah....</p>
            </footer>

          </section> <!-- #content -->

        </body>
        </html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:18:31.337

```
$('a.all').on('click', function(event) {
    var all_alls = $('a.all');
    var clicked_alls = $('a.all[data-clicked="true"]');
    if (all_alls.length == clicked_alls.length) {
        $('#exit').hide();
    }
    else {
        $(this).attr('data-clicked', 'true');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:21:02.363

标记：

```
<ul>
  <li><a href="#" class="all">Link</a></li>
  <li><a href="#" class="all">Link</a></li>
  <li><a href="#" class="all">Link</a></li>
</ul>
<div id="divToHide">Click all links to hide me</div> 
```

JS：

```
var $links = $('.all');

$links.click(function(e){

  e.preventDefault();

  $(this).addClass('.clicked');

  if($links.length == $('.all.clicked').length){

    $('#divToHide').hide();

  }

}) 
```

[小提琴](http://jsfiddle.net/LxcHE/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:18:07.853

当您单击“all”类中的一个 div 时，您可以使用 .addClass 添加“clicked”类。每次，您还要检查“all”类中的所有 div 是否也“单击”。如果他们这样做，您可以隐藏您想要隐藏的 div。

# c# - 在 winstartup 上以管理员身份自动启动 exe 而不显示管理员提示的 Wix 安装程序

> ID：15527479
> 
> 赞同：1
> 
> 时间：2013-03-20T15:14:30.293
> 
> 标签：c#, fonts, installation, wix, uac

我正在制作一个自动字体安装程序，但在进行设置时遇到了一些问题，首先是有关该应用程序的一些信息。该应用程序每 1 秒扫描一次目录（她的下载目录）。如果有新的字体文件，那么我将它们复制到备份目录，然后安装它们。要安装字体，我基本上做两件事：首先复制到一个特殊的 windows 字体目录。然后将 regedit 密钥添加到寄存器以完成字体安装。但是对于第二部分，应用程序需要管理员权限。因此，我在项目等中添加了一个清单文件，现在当您启动应用程序时，您会收到以管理员身份运行的提示，因此一切正常。

现在我正在使用 wix 进行设置。（Wix 对我来说是全新的）但问题是：

我希望每次电脑启动时都运行 exe。我用谷歌搜索并找到了在注册表中添加路径的解决方案，就像我用 wix 所做的那样。但它不起作用。经过更多的谷歌搜索后，我发现这是因为该应用程序需要管理员“权力”，因此它无法启动。任何人都知道我如何让 wix 在每次 PC 启动时自动以管理员身份启动 exe。（也没有提示）我发现的最好的方法是使用 CMD 添加一个窗口化的计划任务，例如：

```
schtasks /create /sc onlogon /tn AutoStartAFI /rl highest /tr "C:\Program Files (x86)\Auto Font Installer\AutoFontInstaller.exe" 
```

但我不确定或者我喜欢为它制定一个时间表，（但我使用最高参数，所以它自动获得管理员权限来执行应用程序。

# jboss - 在 JBoss 的静态战争文件中添加了缓存控制标头

> ID：15527481
> 
> 赞同：1
> 
> 时间：2013-03-20T15:14:35.373
> 
> 标签：jboss

我有一堆静态文件打包到http://example.com/foo/file.html`$JBOSS$/server/default/deploy/foo.war`并通过[http://example.com/foo/file.html](http://example.com/foo/file.html)访问没有其他配置`foo.war`。

是否可以在不启动 servlet的情况下控制标头`file.html`添加标头？`cache-control: no-cache`

# java - 在方法开始时使用 return 是不好的编码习惯吗？

> ID：15527482
> 
> 赞同：10
> 
> 时间：2013-03-20T15:14:40.057
> 
> 标签：java

我发现自己在使用以下练习，但每次使用它时，我内心都会有些畏缩。基本上，这是对参数的前提条件测试，以确定是否应该完成实际工作。

```
public static void doSomething(List<String> things)
{
    if(things == null || things.size() <= 0)
        return;

    //...snip... do actual work
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T20:07:49.870

尽早返回是一个好习惯。
这样，最少的代码被执行和评估。

不运行的代码不能出错。

此外，它使函数更易于阅读，因为您不必处理所有不再适用的情况。

比较以下代码

```
private Date someMethod(Boolean test) {
  Date result;
  if (null == test) {
    result = null
  } else {
    result = test ? something : other;
  }
  return result;
} 
```

对比

```
private Date someMethod(Boolean test) {

  if (null == test) { 
    return null 
  }
  return test ? something : other;
} 
```

第二个更短，不需要 else 也不需要 temp 变量。

请注意，在 Java 中，`return`语句会立即退出函数；在其他语言（例如 Pascal）中，几乎等效的代码`result:= something;`不会返回。
由于这个事实，习惯上在 Java 方法中的许多点都返回。
这么`bad practice`称呼它忽略了那个特定的火车早已离开爪哇车站的事实。

**如果你要在函数中的多个点退出函数，最好尽早退出**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:15:36.530

这是风格和个人喜好的问题。它没有任何问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-20T20:21:46.570

据我所知 -**不**。

为了更容易调试，在**子​​例程、方法**或**函数中应该只有****一个返回/退出点**。

 ****使用这种方法，您的程序可能会变得更长且可读性更低，但是在调试时，您可以在出口处设置一个断点，并始终查看您返回的内容的状态。例如，您可以记录所有局部变量的状态——这可能对故障排除非常有帮助。

看起来有**两个“学校”** ——一个说**“尽早返回”**，而另一个说**“程序中应该只有一个返回/退出点”**。

我是第一个的支持者，尽管在实践中有时会遵循第二个，只是为了节省时间。

另外，不要忘记**异常**。很多时候，您必须从一个方法中提前返回这一事实意味着您处于特殊情况。在您的示例中，我认为抛出异常更合适。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T15:24:23.320

PMD 似乎是这么认为的，并且您应该始终让您的方法运行到最后，但是，对于某些快速的健全性检查，我仍然使用过早的`return`语句。

它确实会稍微削弱该方法的可读性，但在某些情况下，这比添加另一个`if`语句或其他方法更好，以便在所有情况下将方法运行到最后。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T16:13:02.867

它本质上没有任何问题，但如果它让你畏缩，你可以扔一个`IllegalArgumentException`代替。在某些情况下，这更准确。但是，它可能会导致一堆代码在您调用时看起来像这样`doSomething`：

```
try {
    doSomething(myList);
} catch (IllegalArgumentException e) {} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-20T16:20:40.767

这个问题没有正确的答案，这是一个品味问题。

在上面的具体示例中，可能有更好的方法来强制执行前置条件，但我认为多个提前返回的一般模式类似于函数式编程中的守卫。

我个人对这种风格没有意见——我认为它可以使代码更简洁。尝试扭曲所有内容以获得单个退出点会增加冗长并降低可读性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T15:17:07.853

这是一个很好的做法。所以继续你的好工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-20T15:17:42.817

没有什么问题。就个人而言，我会使用**else**语句来执行函数的其余部分，并让它自然返回。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-20T15:49:06.587

如果您想避免方法中的“返回”：也许您可以使用自己的 Exception 子类并在方法的调用中处理它？

例如 ：

```
public static void doSomething(List<String> things) throws MyExceptionIfThingsIsEmpty {
    if(things == null || things.size() <= 0)
        throw new MyExceptionIfThingsIsEmpty(1, "Error, the list is empty !");    

    //...snip... do actual work
} 
```

编辑：如果你不想使用“return”语句，你可以在 if() 中做相反的事情：

```
if(things != null && things.size() > 0)
// do your things 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-06T20:59:29.597

如果函数很长（比如 20 行或更多），那么最好在开始时返回一些错误条件，以便代码读者在阅读函数的其余部分时可以专注于逻辑。如果函数很小（比如 5 行或更少），那么开头的 return 语句可能会分散读者的注意力。

因此，决定应该主要基于函数是否变得更具可读性或可读性降低。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-20T15:19:50.253

Java 的良好实践表明，return 语句应该尽可能多地是唯一的，并且应该写在方法的末尾。要控制返回的内容，请使用变量。但是，对于从 void 方法返回，就像您使用的示例一样，我要做的是在仅用于此目的的中间方法中执行检查。无论如何，不​​要把这当回事 - 关键字 like`continue`永远不应该根据 Java 的良好实践使用，但它们就在那里，在你的范围内。****

# asp.net-mvc - 将 asp Web 表单 / asmx Web 服务应用程序移动到 MVC / Web API 的建议

> ID：15527483
> 
> 赞同：1
> 
> 时间：2013-03-20T15:14:40.540
> 
> 标签：asp.net-mvc, asp.net-web-api

我正在寻找更新/刷新老化的应用程序，因为它随着时间的推移变得笨拙。

该应用程序通过药房的配药过程跟踪处方。分配过程包含许多使用条形码扫描仪记录的“活动”。

该应用程序目前是一个用于主 UI 的 asp.net Web 表单应用程序，带有一个 asp.net asmx 服务，提供处理条形码扫描的方法。（条码扫描客户端应用程序是一个 .NET windows 窗体应用程序）

Web 服务（与主 UI 相同的 IIS 网站的 asmx 文件）维护应用程序对象中“实时”处方/用户/活动的集合，以最大限度地减少数据库访问。

我被主要 Web UI 的 MVC 模型所吸引，因为它提供了很好的关注点分离，允许我们为移动设备提供视图等。

我有点不确定的是 Web 服务是否应该转变为 RESTful Web api 服务。这显然会对 MVC 应用程序的设计产生影响。目前的设置让服务完成了很多工作——即我们有一个“进程扫描”的主要方法，它封装了如何处理扫描的所有逻辑，例如：

- 扫描用户条形码 - 服务根据设备 ID 保存此信息（传递给方法的设备 ID）

- 已扫描处方条形码 - 服务检查此设备 ID 是否存在用户条形码，如果为真则存储处方 ID）

- 扫描活动条码 - 服务检查用户/处方是否完整，然后检查用户是否能够记录该活动，如果活动正确，是扫描序列中的正确活动，如果 OK 记录活动，则检查用户之前的活动是否需要完成等

转向 RESTful 实现似乎表明它被拆分为具有以下端点：

获取网络服务/用户/用户 ID

获取网络服务/处方/PRESID

发布网络服务/活动/活动ID

这就是我开始失去情节的地方 - 这似乎让事情变得更加复杂，POST 部分让我感到困惑。给出的所有示例都是非常清晰的案例，您正在更新一个资源（例如订单或客户）。在这种情况下，使用 POST 添加活动可能会对其他活动和处方产生影响。然后我是否应该使调用不那么紧密耦合：即请求应该返回需要更新的活动/处方的 ID，然后我调用额外的 POST / PUT 调用来更新它们？我们不是简单地将逻辑转移到客户端吗......

我是否错过了这里的重点，我是否应该深入研究 web api 并从那里开发其余部分......来自已经这样做的人的任何建议都会很棒！

谢谢

# php - PHP不通过curl发布数据

> ID：15527486
> 
> 赞同：0
> 
> 时间：2013-03-20T15:14:46.393
> 
> 标签：php, post, curl

我有一个表单，您可以选择一个日期范围（#StartDate - #EndDate 或 #AllDates），它将数据写入 .csv 文件并强制下载。无论出于何种原因，我都无法传递 #StartDate 和 #EndDate 值。它们是由 glDatePicker 字段生成的，但即使我输入硬编码值，它们也不会被传递。我运行 $('#StartDate').val(); 在控制台中并返回日期，但是当我取消注释时

```
var_dump($_POST); 
```

它返回一个空数组。后端脚本正在使用：

```
`FuncitionNameHere(trim($_POST["AllDates"]), trim($_POST["StartDate"]), trim($_POST["EndDate"]))` 
```

相关部分是

```
<form action="path/to/curl.php" method="post" id="Form6">
    <ul>
        <li>
            <label for="StartDate">Start Date</label>
            <input type="text" id="StartDate" name="StartDate" />
        </li>
        <li>    
            <label for="EndDate">End Date</label>
            <input type="text" id="EndDate" name="EndDate" />
            <input type="submit" id="Button6" value="Send" />
        </li>
        <li>
            <label for="AllDates"><input type="checkbox" name="AllDates" id="AllDates" value="YES"> All Dates</label>
        </li>
    </ul>
</form> 
```

以及将数据发送到远程数据库的 curl 脚本

```
<?php
    session_start();
    $url = 'https://remoteurl.com';
    $StartDate = $_POST["StartDate"];
    $EndDate = $_POST["EndDate"];
    $AllDates = $_POST["AllDates"];
    $fields = array(
        'StartDate'=>urldecode($StartDate),
        'EndDate'=>urldecode($EndDate),
        'AllDates'=>urldecode($AllDates)
    );
    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    $fields_string = rtrim($fields_string,'& ');
    //var_dump($_POST);
    $ch = curl_init($url);
    session_write_close();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $fields_string);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);
    $directory='/home/XXX/public_html/XXX/';
    $filename = 'Report.csv';
    $handle = fopen($directory.$filename, 'w');
    fwrite($handle, $output);
    header('Content-type: application/octet-stream');
    header('Content-Disposition: attachment; filename="Report.csv"');
    echo $output;
?> 
```

发布#AllDates 但没有发布#StartDate 或#EndDate 值的任何明显原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:21:32.980

没有必要`$_POST`像那样解析你的。只需这样做，它可能会解决您的问题：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query( $_POST )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:39:41.977

我会自己回答这个问题——尽管功劳归于@Uby。由于以下原因，Chrome 未发布数据：

`$('#StartDate, #EndDate').delay(2000).val("");`

虽然它适用于其他浏览器。所以我在提交后清除字段值的解决方案是这样做

```
setTimeout(function(){ // Delay for Chrome
    $('#StartDate, #EndDate').val(''); // blank the input
}, 100); 
```

现在它会在您点击提交后瞬间清除字段，让 Chrome 有机会在清除字段之前序列化数据。

# java - 无意义的windbg线程输出（正确加载符号）

> ID：15527488
> 
> 赞同：0
> 
> 时间：2013-03-20T15:14:47.963
> 
> 标签：java, c++, debugging, windbg

我有一个项目使用 Java 进行 GUI 和 C++ 进行计算，通过 JNI 连接。我在应用程序中遇到了一个死锁，该死锁在 3 个多小时后出现。我以为我会使用 WinDBG 进行调试。因此，我将应用程序附加为调试对象，加载了正确的符号并开始查看调用堆栈。问题是，我得到的调用堆栈似乎与应用程序正在执行的操作不对应。

例如，我有大约 10 个工作线程，全部由

```
CreateThread(NULL, 0, &(work), this, 0, NULL); 
```

但是windbg只显示了一个这样的线程。我还有至少两个几十个线程，它们的相同调用堆栈如下所示：

```
wow64cpu!CpupSyscallStub
wow64cpu!Thunk0ArgReloadState
wow64!RunCpuSimulation
wow64!Wow64LdrpInitialize
ntdll!LdrpInitializeProcess
ntdll! ?? ::FNODOBFM::`string'
ntdll!LdrInitializeThunk 
```

那些是什么？

然后我有一个线程，其堆栈跟踪由重复一遍的单个函数组成：

```
myModule!myFunc
myModule!myFunc
myModule!myFunc
myModule!myFunc
myModule!myFunc
myModule!myFunc
myModule!myFunc
myModule!myFunc 
```

该`myFunc`函数不是递归的，也不会启动自己的线程。堆栈怎么可能是这样的？堆栈跟踪的其余部分在哪里？

没有线程可以在 javaw 模块中运行（应该至少有一个 - EDT）

如何使调试器正确识别线程并使其显示真实的堆栈跟踪？

另外...是否可以以某种方式标记线程以便可以在调试器中识别它们？

编辑更多信息：
出于许可目的，我不能使用 Visual Studio。
WinDBG 版本：6.12.0002.633 AMD64
Windows 7、6.1 build 7601、SP1
Java 1.7.0_07

我使用 Eclipse CDT 进行优化，我只能选择“默认”、“最小化大小”和“最大化速度”。我使用“默认”。我的编译命令如下所示：`cl /c /EHs /MD /Zi`当我显示反汇编时，它显示模块中函数的汇编代码，而不是原始源代码。但是，它会从源位置打开源文件。

# dynamics-crm-2011 - 无法保存高级查找查询

> ID：15527490
> 
> 赞同：0
> 
> 时间：2013-03-20T15:14:54.317
> 
> 标签：dynamics-crm-2011

我的一位同事无法保存高级查找查询。选项“保存”和“另存为”显示为灰色。搜索互联网发现了解决方案。必须将访问权限授予实体 4230 (UserQuery)。所以我为这个实体分配了所有必要的权利。

我使用了一个与我的同事具有相同权限的测试帐户，并使用它来构建查询，保存它。发生错误，提示我没有 CreateAccess 权限。我有。

我在这里错过了什么吗？

谢谢你的帮助，马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:08:03.987

您可能做对了，但缺少一些访问权限。您可以测试的是向新用户授予超级用户权限（如 - 做所有事情的全能权限）。如果您仍然无法使用它，则问题不在于访问权限。如果你这样做了，你可以用猎枪打开/关闭一半的受助者，看看你什么时候撞到砖墙。

不是很好但很实用。:)

# asp.net - PreInit 似乎并不总是适用

> ID：15527495
> 
> 赞同：1
> 
> 时间：2013-03-20T15:14:59.540
> 
> 标签：asp.net, preinit

由于这种情况，我在控件中填充的页面中有一个单选按钮列表控件

在 preinit 中，我检查并查看 sql 注册计数，如果它高于某个数字，则禁用它。我一直在 pre-init 中进行此调用，并且大多数时候它似乎工作正常。但是，我们遇到了一些未禁用控件项的情况。

我试图阅读页面周期阶段，然后我只是尝试了一些东西，但似乎我可以真正操纵控件的唯一地方是在页面预初始化和页面加载期间。

每次我检查时，一切都被适当地禁用了。但是，有时，用户已经能够检查并提交应该禁用的项目。我唯一的想法是，如果无法联系数据库，是不是禁用了列表项？或者，其他人有什么想法吗？我应该硬着头皮把所有东西都放在页面加载中吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:23:54.527

PreInit 不是更改控件属性的最佳选择，因为尚未加载视图状态。如果请求是回发，则加载视图状态时可能会覆盖您设置的属性。

有关页面生命周期的每个阶段发生的情况的更多信息，请查看此[链接](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)。

# ios - 创建联系人的时间戳

> ID：15527499
> 
> 赞同：0
> 
> 时间：2013-03-20T15:15:15.780
> 
> 标签：ios, objective-c, abaddressbook, abaddressbooksource

有没有办法在创建/添加联系人时获取时间戳。我想按时间排序联系人列表的存储顺序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:25:13.983

您有联系人的创建日期属性

```
NSArray *allPeople = ((__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addresbook));

for (int i = 0; i < allPeople.count; i++) {
    ABRecordRef *person = (ABAddressBookRef *)[allPeople objectAtIndex:i];

    NSDate *creationDate = ((__bridge_transfer NSDate*)ABRecordCopyValue(person, kABPersonCreationDateProperty));
    NSLog(@"Creation date: %@ of entry: %@", creationDate, person);
} 
```

# c# - 遍历两个相同的数据源

> ID：15527501
> 
> 赞同：1
> 
> 时间：2013-03-20T15:15:23.417
> 
> 标签：c#, linq

我在管道分隔的文本文件和数据库表（包括主键列）中有具有相同架构的数据。

我必须检查文件中的每一行是否存在于表中，如果没有为该行生成 INSERT 语句。

该表有 30 列，但在这里我为这个示例进行了简化：

```
ID       Name    Address1    Address2    City    State    Zip 
```

ID是运行标识列；因此，如果在表中找到文件中的特定 ID 值，则不应`insert`为此生成任何语句。

这是我的尝试，感觉不正确：

```
 foreach (var item in RecipientsInFile)
        {
            if (!RecipientsInDB.Any(u => u.ID == item.ID ))
            {
               Console.WriteLine(GetInsertSql(item));
            }
        }
        Console.ReadLine(); 
```

编辑：对不起，我错过了提出实际问题；这该怎么做？非常感谢您提供的所有帮助。

编辑：表有一百万多行，而文件有 50K 行。这是一次性的事情，而不是永久的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:19:53.987

尝试使用比较 ID 列表`.Except()`

```
List<int> dbIDs = Recipients.Select(x=>x.ID).ToList();
List<int> fileIDs = RecipientsFile.Select(x=>x.ID).ToList();
List<int> toBeInserted = fileIDs.Except(dbIDs).ToList();

toBeInserted.ForEach(x=>GetInsertSqlStatementForID(x)); 
```

对于评论中我们中间的迂腐和巨魔，请记住上面的代码（就像您在互联网上找到的任何源代码一样）不应该被复制/粘贴到您的生产代码中。试试这个重构：

```
foreach (var item in RecipientsFile.Select(x=>x.ID)
                                   .Except(DatabaseRecipients.Select(x=>x.ID)))
{
   GetInsertSqlStatementForID(item);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:21:36.597

我将在[HashSet](http://msdn.microsoft.com/fr-fr/library/vstudio/bb301504.aspx)中添加所有 RecipientsInDB Id ，然后测试该集合是否包含项目 Id。

```
 var recipientsInDBIds = new Hashset(RecipientsInDB.Select(u => u.ID));
 foreach (var item in RecipientsInFile)
    {
        if (!recipientsInDBIds.Contains(item.ID ))
        {
           Console.WriteLine(GetInsertSql(item));
        }
    }
    Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:20:53.687

实现这一点的方法很多。你的方法是一种。

另一种方法是始终生成 SQL，但以下列方式生成它：

```
if not exists (select 1 from Recipients where ID == 1234)
    insert Recipients (...) values (...)
if not exists (select 1 from Recipients where ID == 1235)
    insert Recipients (...) values (...) 
```

另一种方法是预先将数据库的全部内容检索到内存中，将数据库 ID 加载到 a`HashSet`中，然后只检查`HashSet`它是否存在 - 开始需要更长的时间，但每条记录会更快。

这三种技术中的任何一种都可以工作——这完全取决于你的数据库表有多大，以及你的文件有多大。如果它们都相对较小（可能有 10,000 条左右），那么它们中的任何一个都应该可以正常工作。

**编辑**

并且总是有选项 D：将文件中的所有记录插入数据库中的临时表（可以是真实表或 SQL 临时表，并不重要），然后使用 SQL 将两个表连接在一起并检索差异（使用`not exists`或`in`您想要的任何技术），并以这种方式插入丢失的记录。

# cordova - 在ios设备上集成phonegap inapp购买插件时出错

> ID：15527506
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:15:48.920
> 
> 标签：cordova

我已经从[https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/InAppPurchaseManager)集成了应用内购买。

我正在使用 xcode4.3 和 cordova-1.5.0。

我收到错误：

> window.plugins.inAppPurchaseManager 未定义

所以我无法调用 inAppPurchaseManager 方法，如 requestProductData 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:34:54.423

“window.plugins.inAppPurchaseManager**未定义**”表示 window.plugins.inAppPurchaseManager 变量未定义。它在**InAppPurchaseManager.js**中定义。您似乎忘记在**html 代码**中包含文件 InAppPurchaseManager.js ：

```
<script type="text/javascript" src="js/InAppPurchaseManager.js"></script> 
```

# .net - 从 Visual Studio 2010 调试 .net 1.1 代码

> ID：15527512
> 
> 赞同：0
> 
> 时间：2013-03-20T15:15:56.707
> 
> 标签：.net, visual-studio-2010, visual-studio-debugging

我正在尝试调试 .net 3.5 Web 应用程序。此应用程序正在使用在 .net 1.1 中创建的业务对象。我强烈怀疑我的 (stackoverflow) 错误来自我的 .net 1.1 程序集。我可以访问 .net 1.1 代码并且可以重建/重新编译它。但是我希望有一种方法可以让我从我的 .net 3.5 应用程序中进入它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:20:09.553

所以发现如果我在调试模式下重新编译 .net 1.1 程序集并将程序集和 .pdb 文件复制到使用它的 .net 3.5 项目中，我就可以进入 1.1 代码。将会发生的情况是 VS2010 将询问 .net 1.1 源代码的位置，然后允许您进入它。

现在你不能编辑它或任何东西，但是你可以通过它来查看失败的地方。

# serialization - 提升 multi_index_container 序列化

> ID：15527514
> 
> 赞同：0
> 
> 时间：2013-03-20T15:15:58.183
> 
> 标签：serialization, boost, multi-index

我正在尝试将 boost::multi_index_container 与 boost::serialization 一起使用。但是，当我使用**指向**对象的指针作为元素和**non_unique**顺序时，加载序列化容器时出现内存访问冲突。我发现有趣的是，唯一排序或使用对象而不是指针作为容器元素时不会发生错误。

有人可以告诉我我的代码是否有问题，或者这是 boost 库中的错误吗？

这是一个产生所描述错误的最小示例：

```
#include <boost/multi_index_container.hpp>
#include <boost/archive/binary_oarchive.hpp>
#include <boost/archive/binary_iarchive.hpp>
#include <boost/serialization/set.hpp>
#include <boost/lexical_cast.hpp>

#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/member.hpp>

#include <fstream>

using namespace std;
using namespace boost::multi_index;

struct element {

    friend class boost::serialization::access;

    std::string member1;

    element( int num ) { member1 = boost::lexical_cast<string>( num ); }
    element() {}

    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & member1;
    }
};

int main( int argc, const char *argv[] )
{

    typedef multi_index_container<element *, indexed_by<ordered_non_unique<member<element, std::string, &element::member1>>>>  TestSet;

    TestSet myset;

    srand( time (NULL ));
    for (int i = 0; i < 20; i++) {
        myset.insert(new element(rand()));  
    }

    // Write set
    ofstream os("test.bin");
    boost::archive::binary_oarchive boa(os);

    boa << myset;
    os.close();

    // Read set
    TestSet newset;
    ifstream is("test.bin");
    boost::archive::binary_iarchive bia(is);

    bia >> newset;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:35:48.830

`ofstream os("test.bin");`应该： `ofstream os("test.bin", ios::binary);`

还：

`ifstream is("test.bin");`应该：`ifstream is("test.bin", ios::binary);`

# java - 从匿名类调用新定义的方法

> ID：15527523
> 
> 赞同：21
> 
> 时间：2013-03-20T15:16:32.870
> 
> 标签：java, anonymous-class, anonymous-methods

我实例化了一个匿名类的对象，我向其中添加了一个新方法。

```
Date date = new Date() {
    public void someMethod() {}
} 
```

我想知道是否可以从外部调用此方法，类似于：

```
date.someMethod(); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-20T16:22:11.347

好问题。答案是否定的。你不能直接打电话`date.someMethod();`
让我们先了解一下这是什么。

```
Date date = new Date()  { ... }; 
```

上面是匿名（没有名字）子类，它扩展了 Date 类。

当你看到这样的代码时，

```
 Runnable r = new Runnable() {

        public void run() {

        }

    }; 
```

这意味着您已经定义了匿名（没有名称）类，该类正在实现（未扩展）可运行接口。

因此，当您调用`date.someMethod()`它时，**它将无法****调用**，因为`someMethod`未在上述情况下定义超类是类。它遵循简单的覆盖规则。**`superclass.``Date`** 

 ****但是，如果你想打电话，`someMethod`那么接下来就是步骤。**

**第一种方式>**
带引用变量 ' `date`'
`date.getClass().getMethod("someMethod").invoke(date);`

**第二种方式>**
使用新创建的 Date 类对象的匿名子类。

```
new Date() 
{
    public void someMethod() {
          System.out.println("Hello");
    }
}.someMethod();   //this should be without reference 'date' 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-20T15:20:14.060

基本上没有。

然而，这种丑陋可以做到......

```
Date date = new Date() {
  public Date someMethod() { 
     //do some stuff here
     return this;
  }
}.someMethod(); 
```

但除此之外，您只能使用反射调用该方法（父类中不存在），如下所示：

```
date.getClass().getMethod("someMethod").invoke(date); 
```

（为了清楚起见，try-catch 被忽略了......）

**但说真的，不要这样做！**如果我在必须处理的代码库中偶然发现此代码，我会感到被编写此代码的人讨厌。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-20T15:19:51.067

如果不使用反射，则不能：该方法不是 Date API 的一部分，`date`就编译器而言只是一个日期。

您可以使用的唯一方法`someMethod`是直接在新创建的实例上调用它：

```
new Date() { public void someMethod() { } }.someMethod(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-11T02:20:24.157

在 Java 10+ 中，使用`var`关键字

```
var date = new Date() {
    public void someMethod() { }
};

date.someMethod(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T15:21:32.233

不，这就是方法本地类的用途。

```
 class MyDate extends Date() {
   public void someMethod() {...}
 }
 MyDate date = new MyDate();
 date.someMethod(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T15:20:59.020

我不知道你为什么要这样做，但正如所写的那样，这是不可能的，因为`Date`没有声明`someMethod`.

但是，您可以在方法内声明一个本地类，例如：

```
void foo ( )
{
  class MyDate extends Date
  {
     public void someMethod( );
  }

  MyDate date = new MyDate( );

  date.someMethod( );
} 
```

再一次，我建议`normal`首先使用一个类，因为本地类，就其性质而言，不能被测试。**

# android - 在片段之间导航 (ViewFlipper)

> ID：15527527
> 
> 赞同：3
> 
> 时间：2013-03-20T15:16:49.623
> 
> 标签：android, android-fragments, android-fragmentactivity

我有一个带有 ViewFlipper 的活动（android.support.v4.app.FragmentActivity），其中我有几个片段

## `src/com.package.WelcomeActivity.java`

```
package com.package;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class WelcomeActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_welcome);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.welcome, menu);
        return true;
    }

} 
```

## `res/layout/activity_welcome.xml`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ViewFlipper 
        android:id="@+id/flipper"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <fragment 
            android:id="@+id/flip2"
            class="com.package.fragment2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>

        <fragment 
            android:id="@+id/flip2"
            class="com.package.fragment2"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
        <!-- ... -->
        <fragment 
            android:id="@+id/flipN"
            class="com.package.fragmentN"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </ViewFlipper>

</LinearLayout> 
```

现在每个片段都由两个主要部分组成：内容和动作（返回，继续）当用户选项卡上的继续操作在片段内执行一个函数但我不知道如何在片段内调用`ViewFlipper.showNext()`和`ViewFlipper.showPrevious()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:47:35.563

让你的 Activity 来做。

在你的`WelcomeActivity`那个调用`ViewFlipper.showNext()`和中创建公共方法`ViewFlipper.showPrevious`，如下所示：

```
public void showNextFragment() {
    mViewFlipper.showNext();
}

public void showPreviousFragment() {
    mViewFlipper.showPrevious();
} 
```

在您的片段中，您可以调用 Activity 的方法，如下所示：

```
WelcomeActivity parent = (WelcomeActivity) getActivity();
parent.showNextFragment();
// or parent.showPreviousFragment(); 
```

我只是在这里输入代码并没有尝试，可能有错字，所以不要只是复制粘贴。但我希望它很好地说明了我的观点。

# typo3 - 为普通输入字段定义默认值（Templavoila）

> ID：15527530
> 
> 赞同：0
> 
> 时间：2013-03-20T15:16:58.183
> 
> 标签：typo3, default-value, templavoila

使用 Templavoila 映射数据元素时，我尝试在“配置”页面上设置“示例数据”字段。但它似乎用于其他用途。

是否可以为“普通输入字段”等字段定义默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:11:21.330

打开 Templavoila DS/TO 编辑器，选择您的字段并将以下内容添加到“表单” `<default>Your default value</default>`

这是一个例子：

![将默认值添加到表单字段](../Images/c351e6b8d8cd1658b2effd795bc0623a.png)

# python - 在 Python 中连接多行（文本格式）

> ID：15527539
> 
> 赞同：0
> 
> 时间：2013-03-20T15:17:14.330
> 
> 标签：python, text, format

我正在通过 Web API 提取日志，到目前为止，当提取日志时，它们以以下格式返回（下面的 3 个事件以 . 开头和结尾。我的问题是循环遍历每一行并连接它们的最佳方法以便结果事件如下所示。

电流输出

```
<attack_headlines version="1.0.1">
  <attack_headline>
    <site_id>1</site_id>
    <category>V2luZG93cyBEaXJlY3RvcmllcyBhbmQgRmlsZXM=</category>
    <subcategory>SUlTIEhlbHA=</subcategory>
    <client_ip>172.17.1.126</client_ip>
    <date>1363735940</date>
    <gmt_diff>0</gmt_diff>
    <reference_id>6D13-DE3D-9539-8980</reference_id>
  </attack_headline>
</attack_headlines>
<attack_headlines version="1.0.1">
  <attack_headline>
    <site_id>1</site_id>
    <category>V2luZG93cyBEaXJlY3RvcmllcyBhbmQgRmlsZXM=</category>
    <subcategory>SUlTIEhlbHA=</subcategory>
    <client_ip>172.17.1.136</client_ip>
    <date>1363735971</date>
    <gmt_diff>0</gmt_diff>
    <reference_id>6D13-DE3D-9539-8981</reference_id>
  </attack_headline>
</attack_headlines>
<attack_headlines version="1.0.1">
  <attack_headline>
    <site_id>1</site_id>
    <category>V2luZG93cyBEaXJlY3RvcmllcyBhbmQgRmlsZXM=</category>
    <subcategory>SUlTIEhlbHA=</subcategory>
    <client_ip>172.17.1.156</client_ip>
    <date>1363735975</date>
    <gmt_diff>0</gmt_diff>
    <reference_id>6D13-DE3D-9539-8982</reference_id>
  </attack_headline>
</attack_headlines> 
```

预期产出

```
<attack_headlines version="1.0.1"><attack_headline><site_id>1</site_id<category>V2luZG93cyBEaXJlY3RvcmllcyBhbmQgRmlsZXM=</category<subcategory>SUlTIEhlbHA=</subcategory><client_ip>172.17.1.156</client_ip<date>1363735975</date><gmt_diff>0</gmt_diff<reference_id>6D13-DE3D-9539-8982</reference_id></attack_headline</attack_headlines> 
```

提前致谢！

```
import json
import os
from suds.transport.https import WindowsHttpAuthenticated

class Helpers:
        def set_connection(self,conf):
                        #SUDS BUG FIXER(doctor)
                        protocol=conf['protocol']
                        hostname=conf['hostname']
                        port=conf['port']
                        path=conf['path']
                        file=conf['file']
                        u_name=conf['login']
                        passwrd=conf['password']
                        auth_type = conf['authType']

                        from suds.xsd.doctor import ImportDoctor, Import
                        from suds.client import Client

                        url = '{0}://{1}:{2}/{3}/{4}?wsdl'.format(protocol,
                        hostname,port, path, file)

                        imp = Import('http://schemas.xmlsoap.org/soap/encoding/')
                        d = ImportDoctor(imp)
                        if(auth_type == 'ntlm'):
                                ntlm = WindowsHttpAuthenticated(username=u_name, password=passwrd)
                                client = Client(url, transport=ntlm, doctor=d)
                        else:
                                client = Client(url, username=u_name, password=passwrd, doctor=d)
                        return client
        def read_from_file(self, filename):
                try:
                        fo = open(filename, "r")
                        try:
                                result = fo.read()
                        finally:
                                fo.close()
                                return result
                except IOError:
                        print "##Error opening/reading file {0}".format(filename)
                        exit(-1)

        def read_json(self,filename):
                string=self.read_from_file(filename)
                return json.loads(string)

        def get_recent_attacks(self, client):
            import time
            import base64
            from xml.dom.minidom import parseString
            epoch_time_now = int(time.time())
            epochtimeread = open('epoch_last', 'r')
            epoch_time_last_read = epochtimeread.read()
            epochtimeread.close()
            epoch_time_last = int(float(epoch_time_last_read))
            print client.service.get_recent_attacks("",epoch_time_last,epoch_time_now,1,"",15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:23:52.323

如果这只是一个带有换行符的大字符串对象，您可以简单地删除它们：

```
import re
text = re.sub('\s*\n\s*', '', text) 
```

要在分隔符后面留下换行符`</attack_headline>`，请尝试：

```
re.sub('(?<!<\/attack_headline>)\s*\n\s*', '',  x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:27:21.803

你可以使用：

```
oneline = "".join(multiline.split()) 
```

编辑 1（我刚刚看到您的编辑） - 我将更改您的代码，如下所示：

```
with open(filename, "r") as fo:
    result = []
    for line in fo.readlines():
        result.append(line.strip())
    return result 
```

编辑2（我已经阅读了您对另一个答案的评论）-您可以这样做：

```
with open(filename, "r") as fo:
    partial = []
    for line in fo.readlines():
        if line.startswith("<"):
            yield "".join(partial)
            partial = []
        else:
            clean = line.strip()
            if clean:
                partial.append(clean) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:56:04.750

```
import re
# remove all newline whitespace stuff as in answer given before:
text = re.sub(r'\s*\n\s*', '', text)
# break again at desired points:
text = re.sub(r'</attack_headlines>', '</attack_headlines>\n', text) 
```

# php - 无法使用 php 语句将数字输入 MySQL

> ID：15527541
> 
> 赞同：0
> 
> 时间：2013-03-20T15:17:16.670
> 
> 标签：php, mysql, syntax-error

我正在一个网站上工作，管理员可以在该网站上编辑他们已经创建的时间表。他们可以单击日程表上的任何项目进行编辑。例如，他们可以单击班次开始时间，然后将他们定向到可以更新值的页面。

不幸的是，我无法让它适用于每个价值。似乎文本值工作得很好，但是当它是数字时出现语法错误。

这是我用来更新的内容：

```
$type = $_GET['type'];
$value = $_GET['value'];
$week = $_GET['week'];
$newval = $_POST['newval'];
if(strlen($newval) > 0)
{
    include '../dbinfo.php';
    $type = $mysqli->real_escape_string($_POST['type']);
    $week = $mysqli->real_escape_string($_POST['week']);
    $tablename = $mysqli->real_escape_string("cs" . $_SESSION['squadron']);
    $newval = $mysqli->real_escape_string($newval);
    if((is_numeric($newval)))
    {
        $sql = "UPDATE $tablename SET $type=$newval WHERE week=$week";
    }
    else
    {
        $sql = "UPDATE $tablename SET $type='$newval' WHERE week=$week";
    }
    if($result = $mysqli->query($sql))
    {
        echo "Your specififed changed was completed successfully!<br>";
        echo "<a href='edit.php?week=" . $week . "'>Continue editing</a>";
    }
    else
    {
        echo mysqli_error($result);
    }
} 
```

更改字符串会导致 sql 语句：

```
UPDATE cs14 SET shift_1_name='Test' WHERE week=1 (this works) 
```

更改数字会导致 sql 语句：

```
UPDATE cs14 SET shift_ 1_starttime=940 WHERE week=1 (this doesn't work) 
```

它给了我 MySQL 错误：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1_starttime=940 WHERE week=1' at line 1 
```

我已经研究过这个错误，并且一遍又一遍地检查语法。它在 phpmyadmin 中也不起作用。我不知道接下来要检查什么！

任何人都可以在这里帮我解决我的语法吗？？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:21:13.090

在数字更新查询中加上引号，

```
$sql = "UPDATE $tablename SET $type='$newval' WHERE week='$week'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:19:08.297

$type 变量包含一个空格。从中删除空间。

更具体地说，“shift_1_starttime”包含一个空格。无论您将 $type 设置为“shift_1_starttime”的何处，都可以从中删除空间。或者，如果这就是它在数据库中的定义方式，请用反引号 `

```
$sql = "UPDATE $tablename SET `$type`='$newval' WHERE week=$week"; 
```

# winapi - 获取在外部进程中打开的命名管道的句柄 (win32)

> ID：15527545
> 
> 赞同：0
> 
> 时间：2013-03-20T15:17:33.503
> 
> 标签：winapi, named-pipes, handle

我有一个日志记录工具（SS_Log 的后代），它由一个独立的日志查看器和一个 C++ 库组成，用于通过命名管道发送消息。

当记录第一条消息时，客户端通过 C++ lib 启动日志查看器，并执行

```
HANDLE hPipe = CreateNamedPipe( szPipeName,
                                PIPE_ACCESS_DUPLEX, 
                                PIPE_TYPE_MESSAGE|PIPE_WAIT|PIPE_READMODE_MESSAGE, 
                                PIPE_UNLIMITED_INSTANCES, 
                                SSLOG_MAX_MESSAGE_LENGTH,
                                0, 5000, &sa );

pView->Pipe(hPipe);

if( pView->Pipe() == INVALID_HANDLE_VALUE )
{
    pView->MessageBox( _T("Could not create the pipe for incoming messages.  No messages can be received.   "), 
        _T("Fatal Error"), MB_OK|MB_ICONSTOP );
    return FALSE;
}

// now we loop forever, waiting for messages.  As they come in, send them
// to the SS_Log_WindowView::EraseLog() and SS_Log_WindowView::WriteLog()
// functions as appropriate.
while( TRUE )
{
    ConnectNamedPipe( pView->Pipe(), NULL );
    ...
} 
```

当客户端想要发送消息时，它确实

```
BOOL bResult = WaitNamedPipe(WindowPipeName(), 20000);
            bResult = CallNamedPipe(WindowPipeName(), (LPVOID)szFinalBuffer, 
                             _tcslen(szFinalBuffer)+1, (LPVOID)NULL, 
                             0, &dwBytesRead, 
                             5000); 
```

我想获得一个与这个命名管道相对应的 HANDLE。文档建议我可以使用`CreateFile( WindowPipeName(), GENERIC_READ|GENERIC_WRITE,...OPEN_EXISTING,...)`. 当我这样做时，某些东西显然开始阻塞，并且日志查看器不再收到任何消息。甚至没有对那个 HANDLE 做任何事情。

是否可以做我想做的事，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:23:05.107

日志查看器的循环从调用 开始`ConnectNamedPipe`。所以它等待客户端连接，读取消息，返回循环顶部并等待客户端再次连接。

这适用，`CallNamedPipe`因为该功能每次发送消息时都会连接和断开连接。

但是，如果客户端通过打开管道的句柄来创建持久连接，`CreateFile`那么它只会连接一次。在服务器中，第二个调用`ConnectNamedPipe`将挂起，等待另一个客户端连接。

如果您希望日志查看器仅处理具有持久连接的单个客户端，则可以有一个循环调用，`ConnectNamedPipe`然后是一个内部循环，该循环处理来自客户端的消息，直到管道关闭。

如果您想处理多个客户端，那么您当前的解决方案比尝试处理多个同时连接要简单得多。

# javascript - 如何调用函数来自动加载jQuery移动网站中的元素

> ID：15527549
> 
> 赞同：1
> 
> 时间：2013-03-20T15:17:38.330
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我想要做的是将我的导航栏 HTML 标记放在一个地方（以便于编辑）。现在我的 index.html 正文内容看起来像：

```
<div data-role="page" id="SomePage">
    <div data-role="header">
        <h1>This is Page 1</h1>
    </div>
    <div data-role="navbar"></div>
</div> 
```

并在标题中调用我的文件，如下所示：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript" language="javascript" src="app.js"></script> 
```

在我的 app.js 文件中是我试图加载导航栏的地方。我试过两种方法

首先：

```
var NavBar = function() {
$('div[data-role="navbar"]').html('<ul>' +
    '<li><a href="#SomePage" data-transition="fade" data-icon="none">By Brand</a></li>' +
    '<li><a href="#AnotherPage" data-transition="fade" data-icon="none">By Flavor</a></li>' +
    '<li><a href="#LastPage" data-transition="fade" data-icon="none">Zero Nicotine</a></li>' +
    '</ul>');
}

$(document).ready(function() {
    NavBar();
}); 
```

这导致页面让应用程序显示我的链接，但它们像普通 ul 一样堆叠，没有列表样式

我尝试的第二种方法是：

```
var NavBar = function() {
$('div:jqmData[role="navbar"]').html('<ul>' +
    '<li><a href="#SomePage" data-transition="fade" data-icon="none">By Brand</a></li>' +
    '<li><a href="#AnotherPage" data-transition="fade" data-icon="none">By Flavor</a></li>' +
    '<li><a href="#LastPage" data-transition="fade" data-icon="none">Zero Nicotine</a></li>' +
    '</ul>');
}

$(document).ready(function() {
    NavBar();
}); 
```

这导致根本看不到链接。

如何创建一个函数来在一个地方加载“导航栏”并使用 jQuery Mobile 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:30:28.940

**`document ready`**不应与 a 一起使用**`jQuery Mobile`**，它通常会在页面加载到**`DOM`**. 要查找有关此主题的更多信息，请查看此**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**或在**[此处](https://stackoverflow.com/a/14469041/1848600)**找到它。

相反，您应该使用正确的**`jQuery Mobile`**页面事件。

我给你做了一个工作的 jsFiddle**[例子](http://jsfiddle.net/Gajotres/SJG8W/)**。

```
$(document).on('pagebeforecreate', '#index', function(){       
    $('[data-role="navbar"]').html('<ul>' +
        '<li><a href="#SomePage" data-transition="fade" data-icon="none">By Brand</a></li>' +
        '<li><a href="#AnotherPage" data-transition="fade" data-icon="none">By Flavor</a></li>' +
        '<li><a href="#LastPage" data-transition="fade" data-icon="none">Zero Nicotine</a></li>' +
        '</ul>');
}); 
```

# iphone - 如何使用 coreplot 在散点图中获取 3 个图例框？

> ID：15527554
> 
> 赞同：0
> 
> 时间：2013-03-20T15:17:45.443
> 
> 标签：iphone, core-plot

```
I am unable to put three legend boxes on the graph.I have tried the following code

     CPTGraph *graph1 = self.hostView.hostedGraph;

        CGFloat legendPadding = -(self.view.bounds.size.width / 8);

        graph1.legendDisplacement = CGPointMake(legendPadding, 0.0);  

        CPTLegend *theLegend1 = [CPTLegend legendWithGraph:graph1];

        theLegend1.numberOfColumns = 1;

        theLegend1.fill = [CPTFill fillWithColor:[CPTColor whiteColor]];

        theLegend1.borderLineStyle = [CPTLineStyle lineStyle];

        theLegend1.cornerRadius = 5.0;       

        graph1.legend = theLegend1;     

        graph1.legendAnchor = CPTRectAnchorTop;

        CGFloat legendPadding1 = -(self.view.bounds.size.width / 4);

        graph1.legendDisplacement = CGPointMake(legendPadding1, 0.0);

where am i going wrong ?

Here is the code for adding plots:

     CPTGraph *graph = self.hostView.hostedGraph;
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
    plotSpace.delegate = self;
    // 2 - Create the three plots
    aaplPlot = [[[CPTScatterPlot alloc] init]autorelease];
    aaplPlot.dataSource = self;
    aaplPlot.identifier = @"MaxWeight";

    CPTColor *aaplColor = [CPTColor magentaColor];
    [graph addPlot:aaplPlot toPlotSpace:plotSpace];
    googPlot = [[[CPTScatterPlot alloc] init]autorelease];
    googPlot.dataSource = self;
    googPlot.identifier = @"MinWeight";
    CPTColor *googColor = [CPTColor greenColor];
    [graph addPlot:googPlot toPlotSpace:plotSpace];

    msftPlot = [[[CPTScatterPlot alloc] init]autorelease];
    msftPlot.dataSource = self;
    msftPlot.identifier = @"NormalWeight";

    CPTColor *msftColor = [CPTColor blueColor];
    [graph addPlot:msftPlot toPlotSpace:plotSpace];

    [plotSpace scaleToFitPlots:[NSArray arrayWithObjects:aaplPlot,msftPlot,googPlot,nil]]; 
```

我已添加此代码以添加绘图。使用上面的代码我只能绘制一个图例框。但我的要求是获得三个图例框..我在哪里做错了。请验证代码并让我知道在哪里我做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:27:22.610

除非您省略了一些设置代码，否则问题是您的图表在创建图例时没有任何绘图。`+legendWithGraph:`在将绘图添加到图形后创建图例，或者稍后使用`-addPlot:`或`-insertPlot:atIndex:`方法将它们添加到图例。

# android - Android：在 Scrollview 中添加的按钮大小不正确

> ID：15527573
> 
> 赞同：0
> 
> 时间：2013-03-20T15:18:50.200
> 
> 标签：android, button, dynamic, scrollview

在一个活动中，我添加了一个水平滚动视图。这包含一个“添加新集合”按钮和所有以前添加的集合作为按钮。这些 Sets 保存在 SQLLite 数据库中。

在我的应用程序的开头，我从数据库中加载所有集合。对于每个 Set，我将自己的 Button 添加到滚动视图中。

显示所有按钮，但动态添加的按钮大小不正确。它们应该具有与“添加新集”按钮相同的高度和宽度。

如何将第一个按钮的尺寸复制到其他按钮？

这是我的 XML：

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <LinearLayout
        android:id="@+id/innerLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btn_NewSet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:height="100dp"
            android:onClick="OnExitClick"
            android:text="@string/New_Set"
            android:width="100dp" />

    </LinearLayout>
</HorizontalScrollView> 
```

这是我的Java代码：

```
 db.open();
 Cursor allSets = db.getAllSets();
 if (allSets.moveToFirst())
 {
    Button bDummy = (Button) findViewById(R.id.btn_NewSet);
    LinearLayout innerLayout = (LinearLayout) findViewById(R.id.innerLayout);
    do 
    {
          Button b1 = new Button(this);
          b1.setHeight(bDummy.getHeight());
          b1.setWidth(bDummy.getWidth());
          b1.setText(allSets.getString(1));
          b1.setLayoutParams(new LinearLayout.LayoutParams(
              LinearLayout.LayoutParams.WRAP_CONTENT,
              LinearLayout.LayoutParams.WRAP_CONTENT
              ));                   
          innerLayout.addView(b1);

    }while (allSets.moveToNext());
 }
 db.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:39:25.720

它们的大小不同，因为动态按钮也使用 wrap_content。如果您希望它们具有相同的大小，您可以在新按钮的布局参数中使用按钮“id/btn_NewSet”的宽度和高度属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T20:13:50.053

您应该尝试使用动态视图膨胀：

1）制作一个专用的xml（例如mybutton.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<Button xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/btn_NewSet"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:height="100dp"
        android:text="@string/New_Set"
        android:width="100dp" /> 
```

2）膨胀并`innerLayout`动态附加到：

```
 LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout innerLayout = (LinearLayout) findViewById(R.id.innerLayout);
    do 
    {
        Button b1 = (Button)inflater.inflate(R.layout.mybutton,null);
        b1.setText(allSets.getString(1));
        innerLayout.addView(b1);
    }while (allSets.moveToNext()); 
```

# entity-framework - 生成动态选择 lambda 表达式

> ID：15527578
> 
> 赞同：3
> 
> 时间：2013-03-20T15:19:12.527
> 
> 标签：entity-framework, lambda, linq-to-entities, expression-trees

我对表达式树有点陌生，我只是不太了解一些事情。

我需要做的是发送一个值列表并从这些值中选择一个实体的列。所以我会打这样的电话：

```
DATASTORE<Contact> dst = new DATASTORE<Contact>();//DATASTORE is implemented below.
List<string> lColumns = new List<string>() { "ID", "NAME" };//List of columns
dst.SelectColumns(lColumns);//Selection Command 
```

我希望将其翻译成这样的代码（`Contact`是使用 EF4 的实体）：

```
Contact.Select(i => new Contact { ID = i.ID, NAME = i.NAME }); 
```

所以假设我有以下代码：

```
public Class<t> DATASTORE where t : EntityObject
{
    public Expression<Func<t, t>> SelectColumns(List<string> columns)
    {
        ParameterExpression i = Expression.Parameter(typeof(t), "i");
        List<MemberBinding> bindings = new List<MemberBinding>();

        foreach (PropertyInfo propinfo in typeof(t).GetProperties(BindingFlags.Public | BindingFlags.Instance))
        {
            if (columns.Contains(propinfo.Name))
            {
                MemberBinding binding = Expression.Bind(propinfo, Expression.Property(i, propinfo.Name));
                bindings.Add(binding);
            }
        }

        Expression expMemberInit = Expression.MemberInit(Expression.New(typeof(t)), bindings);
        return Expression.Lambda<Func<t, t>>(expMemberInit, i);
    } 
```

当我运行上面的代码时，出现以下错误：

> *无法在 LINQ to Entities 查询中构造实体或复杂类型“联系人”。*

我查看了查询的主体，它发出了以下代码：

```
{i => new Contact() {ID = i.ID, NAME = i.NAME}} 
```

我很确定我应该能够构建一个新实体，因为我明确地写了这一行作为测试，看看是否可以这样做：

```
.Select(i => new Contact{ ID = i.ID, NAME = i.NAME }) 
```

这有效，但我需要动态构建选择。

我尝试反编译一个直接查询（我第一次查看低级代码），但我不能完全翻译它。我输入的高级代码是：

```
Expression<Func<Contact, Contact>> expression = z => 
                    new Contact { ID = z.ID, NAME = z.NAME }; 
```

更改反编译器中使用的框架，我得到以下代码：

```
ParameterExpression expression2;
Expression<Func<Contact, Contact>> expression = 
   Expression.Lambda<Func<Contact, Contact>>
      (Expression.MemberInit(Expression.New((ConstructorInfo) methodof(Contact..ctor),
         new Expression[0]), new MemberBinding[] { Expression.Bind((MethodInfo) 
            methodof(Contact.set_ID), Expression.Property(expression2 = Expression.Parameter(typeof(Contact), "z"), (MethodInfo) 
            methodof(Contact.get_ID))), Expression.Bind((MethodInfo) 
            methodof(Contact.set_NAME), Expression.Property(expression2, (MethodInfo) 
               methodof(Contact.get_NAME))) }), new ParameterExpression[] { expression2 
        }); 
```

我已经看过几个地方来尝试理解这一点，但我还没有完全明白。任何人都可以帮忙吗？

这些是我看过的一些地方：

*   [msdn 博客](http://blogs.msdn.com/b/meek/archive/2008/04/25/using-linq-expressions-to-generate-dynamic-methods.aspx)——这正是我想要做的，但我的反编译代码没有 Expression.Call。
*   [msdn 成员初始化](http://msdn.microsoft.com/en-us/library/bb301790.aspx)
*   [msdn 表达式属性](http://msdn.microsoft.com/en-us/library/bb348662.aspx)
*   [stackoverflow EF 只获取特定的列](https://stackoverflow.com/questions/1531934/entity-framework-only-get-specific-columns)——这很接近，但这似乎在做同样的事情，就好像我只是使用查询的选择一样。
*   [用于选择查询的stackoverflow lambda表达式](https://stackoverflow.com/questions/2719762/lambda-expression-to-be-used-in-select-query)——这里的答案正是我想要做的，我只是不明白如何将反编译的代码翻译成C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:02:00.273

当我上次这样做时，我将结果投影到未映射的类（不是实体）并且它起作用了，其他一切都与您的代码中的相同。您确定像 .Select(i => new Contact{ ID = i.ID, NAME = i.NAME }) 这样的动态查询无效吗？

# actionscript-3 - ADDED_TO_STAGE 事件在某些帧中不起作用？

> ID：15527581
> 
> 赞同：0
> 
> 时间：2013-03-20T15:19:21.057
> 
> 标签：actionscript-3, flash

这是 Heli 的类，它将在主类中调用，主类在第 2 帧中的目标。第 1 帧包含可以让我转到第 2 帧的按钮。但是 Heli 的这个电影剪辑没有添加到舞台上。但如果我在第 1 帧中定位主类，它会起作用。所以谁能告诉我如何在指定的框架中使用 added_to_stage 事件？？？（对不起我的英语）

```
package com.ply 
{
import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent; 
import flash.ui.Keyboard;

public class Heli extends MovieClip
{
    //Settings
    public var xAcceleration:Number = 0;
    public var yAcceleration:Number = 0;
    private var xSpeed:Number = 0;
    private var ySpeed:Number = 0;

    private var up:Boolean = false;
    private var down:Boolean = false;
    private var left:Boolean = false;
    private var right:Boolean = false;

    private var bullets:Array;
    private var missiles:Array;

    public function Heli()
    {
        addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
    }

    public function onAddedToStage(event:Event):void 
    {
        removeEventListener(Event.ADDED_TO_STAGE, onAddedToStage);

        init();
    }

    private function init():void
    {
        stage.addEventListener(Event.ENTER_FRAME, runGame);         
    }

    private function runGame(event:Event):void
    {
        xSpeed += xAcceleration ;       //increase the speed by the acceleration
        ySpeed += yAcceleration ;       //increase the speed by the acceleration

        xSpeed *= 0.95;                 //apply friction
        ySpeed *= 0.95;                 //so the speed lowers after time

        if(Math.abs(xSpeed) < 0.02)     //if the speed is really low
        {
            xSpeed = 0;                 //set it to 0
                                //Otherwise I'd go very small but never really 0
        }
        if(Math.abs(ySpeed) < 0.02)     //same for the y speed
        {
            ySpeed = 0;
        }

        xSpeed = Math.max(Math.min(xSpeed, 10), -10);       //dont let the speed get bigger as 10
        ySpeed = Math.max(Math.min(ySpeed, 10), -10);       //and dont let it get lower than -10

        this.x += xSpeed;               //increase the position by the speed
        this.y += ySpeed;               //idem

    }       
}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:32:16.227

```
public function Heli()
{
    if (stage) init();
    addEventListener(Event.ADDED_TO_STAGE, onAddedToStage);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T13:49:12.763

这是主要课程

```
package  
{
import com.ply.Heli;
import com.peluru.Bullet;
import com.musuh.Airplane2;
import flash.display.Sprite;
import flash.display.Stage;
import flash.display.MovieClip;
import flash.events.KeyboardEvent;
import flash.ui.Keyboard;

import flash.events.Event;
import flash.events.MouseEvent;
import flash.display.*;
import flash.events.*;
import flash.utils.*;

public class Main extends MovieClip
{
    public static const STATE_INIT:int = 10;
    public static const STATE_START_PLAYER:int = 20;
    public static const STATE_PLAY_GAME:int = 30;
    public static const STATE_REMOVE_PLAYER:int = 40;
    public static const STATE_END_GAME:int = 50;        

    public var gameState:int = 0;
    public var player:Heli;
    public var enemy:Airplane2;
    //public var bulletholder:MovieClip = new MovieClip();

    //================================================
    public var cTime:int = 1;
    //the time it has to reach in order to be allowed to shoot (in frames)
    public var cLimit:int = 10;
    //whether or not the user is allowed to shoot
    public var shootAllow:Boolean = true;
    //how much time before another enemy is made
    public var enemyTime:int = 0;
    //how much time needed to make an enemy
    //it should be more than the shooting rate
    //or else killing all of the enemies would
    //be impossible :O
    public var enemyLimit:int = 64;
    //the player's score
    public var score:int = 0;
    public var gameOver:Boolean = false;
    public var bulletContainer:MovieClip = new MovieClip();
    //================================================

    public function Main() 
    {
        //stage.addEventListener(Event.ENTER_FRAME, gameLoop);
        // instantiate car class
        gameState = STATE_INIT;
        gameLoop();
    }

    public function gameLoop(): void {
        switch(gameState) {
            case STATE_INIT :
                initGame();
                break
            case STATE_START_PLAYER:
                startPlayer();
                break;  
            case STATE_PLAY_GAME:
                 playGame();
                break;
            case STATE_REMOVE_PLAYER:
                //removePlayer();
                break;      
            case STATE_END_GAME:                    
                break;  

        }

    }       

    public function initGame() :void {

        //addChild(bulletholder);
        addChild(bulletContainer);

        gameState = STATE_START_PLAYER;
        gameLoop();

        stage.addEventListener(KeyboardEvent.KEY_DOWN, myOnPress);
        stage.addEventListener(KeyboardEvent.KEY_UP, myOnRelease);
        stage.addEventListener(Event.ENTER_FRAME, AddEnemy);
    }

    public function startPlayer() : void { 
        player=new Heli();

        player.x = stage.stageWidth / 2;
        player.y = stage.stageHeight / 2;
        // add car to display list
        stage.addChild(player);
        gameState = STATE_PLAY_GAME;

    }

    public function playGame():void {
        //CheckTime();

        gameLoop();
        //txtScore.text = 'Score: '+score;

    }

    public function myOnPress(event:KeyboardEvent):void
    {
        if(event.keyCode == Keyboard.LEFT)
        {
            player.xAcceleration  = -1;
        }
        else if(event.keyCode == Keyboard.RIGHT)
        {
            player.xAcceleration  = 1;
        }
        else if(event.keyCode == Keyboard.UP)
        {
            player.yAcceleration  = -1;
        }
        else if(event.keyCode == Keyboard.DOWN)
        {
            player.yAcceleration  = 1;
        }
        else if (event.keyCode == 32 && shootAllow)
        {
            fireBullet();   
        }
    }

    public function fireBullet() {
        //making it so the user can't shoot for a bit
        shootAllow = false;
        //declaring a variable to be a new Bullet
        var newBullet:Bullet = new Bullet();
        var newBullet2:Bullet = new Bullet();
        //changing the bullet's coordinates
        newBullet.x = player.x+20; //+ player.width/2 - player.width/2;
        newBullet.y = player.y;
        newBullet2.x = player.x-20;
        newBullet2.y = player.y;
        //then we add the bullet to stage
        bulletContainer.addChild(newBullet);
        bulletContainer.addChild(newBullet2);

    }

    function AddEnemy(event:Event){
    if(enemyTime < enemyLimit){
        //if time hasn't reached the limit, then just increment
        enemyTime ++;
    }   else {
        //defining a variable which will hold the new enemy
        enemy =new Airplane2();
        //making the enemy offstage when it is created
        enemy.y = -1 * enemy.height;
        //making the enemy's x coordinates random
        //the "int" function will act the same as Math.floor but a bit faster
        enemy.x = Math.floor(Math.random()*(stage.stageWidth - enemy.width));
        //then add the enemy to stage
        addChild(enemy);
        //and reset the enemyTime
        enemyTime = 0;
        }

    if(cTime <= cLimit){
            cTime ++;
        } else {
        //if it has, then allow the user to shoot
        shootAllow = true;
        //and reset cTime
        cTime = 1;
        }

    }

    public function myOnRelease(event:KeyboardEvent):void
    {

        if(event.keyCode == Keyboard.LEFT || event.keyCode == Keyboard.RIGHT)
        {
            player.xAcceleration  = 0;
        }
        else if(event.keyCode == Keyboard.UP || event.keyCode == Keyboard.DOWN)
        {
            player.yAcceleration  = 0;
        }

    }       

} 
```

}

# jquery - $($('selector')) 对性能的影响有多大？

> ID：15527584
> 
> 赞同：1
> 
> 时间：2013-03-20T15:19:29.957
> 
> 标签：jquery, performance

我正在开发一个当前具有以下内容的应用程序：

```
var selector = '.selector';
$(selector).methodA();
$(selector).methodB();
//.....
$(selector).methodZ(); 
```

为了提高性能，我将更`selector`改为 jQuery 对象，例如：

```
var selector = $('.selector');
selector.methodA();
selector.methodB();
//.....
selector.methodZ(); 
```

然而，由于这是一个非常大的应用程序，因此必须分阶段进行更改，这意味着在其完全完成之前，将有如下代码：

```
var selector = $('.selector');
selector.methodA();
$(selector).methodB();
//.....
$(selector).methodZ(); 
```

这最后一个代码片段会比我的第一个代码片段在性能方面更好吗？

我的猜测是，由于该对象已经是一个 jQuery 对象，任何实现都将被绕过并简单地输出输入的对象，但我想确定一下。

或者最好确保只有我的第二个代码片段生效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:47:07.743

感谢@Ravi[的评论](https://stackoverflow.com/questions/15527584/how-much-of-a-performance-hit-is-selector/15528313#comment21995172_15527584)，我使用 jsPerf 来测试性能，结果如下：

![在此处输入图像描述](../Images/a6717cd0f08a80dc5426485bd99fdac8.png) [http://jsperf.com/nested-jquery-testing](http://jsperf.com/nested-jquery-testing)

因此，第 3 次测试实际上比第 1 次更快。

# spring - Spring 3.0 和 Hibernate 3.5 与上下文会话的集成

> ID：15527587
> 
> 赞同：2
> 
> 时间：2013-03-20T15:19:42.267
> 
> 标签：spring, hibernate

我非常了解hibernate，并且相当了解Spring核心，我可以使用hibernate模板和hibernate dao支持类来集成两者但是从hibernate 3.1开始我们有上下文会话，即我们不需要使用hibernate模板和hibernate dao支持但是当我试图与这个概念集成并在我的 dao 类中注入 sessionFactory 一切都会写，但我正在尝试插入数据休眠显示插入查询但数据未保存到数据库请帮助我我能做什么。这是我的代码

```
@Transactional
 public class UserDAO {

SessionFactory sessionFactory;

public void save(User transientInstance) {
    try {
        sessionFactory.openSession().save(transientInstance);
    } catch (RuntimeException re) {
        throw re;
    }
}
public static UserDAO getFromApplicationContext(ApplicationContext ctx) {
    return (UserDAO) ctx.getBean("UserDAO");
}
public SessionFactory getSessionFactory() {
    return sessionFactory;
}
public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}
} 
```

这是我的 beans.xml

```
<bean id="sessionFactory"  class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
   <property name="configLocation" value="classpath:hibernate.cfg.xml"></property>
</bean>

<bean id="UserDAO" class="dao.UserDAO">
   <property name="sessionFactory"><ref bean="sessionFactory" /></property>
 </bean> 
```

这是我的主要代码

```
ApplicationContext context=new ClassPathXmlApplicationContext("applicationContext.xml");
User user=new User("firstName", "lastName", "address", "phoneNo", "mobileNo", "email", "password", false, null);
SessionFactory factory=(SessionFactory)context.getBean("sessionFactory");
Session session=factory.openSession();
Transaction tx=session.beginTransaction();
UserDAO ud=(UserDAO)context.getBean("UserDAO");
ud.save(user);      
tx.commit();
session.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:12:32.763

你的代码有几个问题，

1.  DAO 已经是事务性的，由 Spring 管理。您正在 main 中开始另一笔交易。
2.  您正在打开会话两次。一次在主，另一次在道。
3.  当您使用上下文会话时，最好调用 `sessionFactory.getCurrentSession()`

现在如果你用 Spring 正确配置了事务管理器，下面的代码就可以工作了，我只是添加了一些注释，看看它是否对你有帮助:)

```
@Transactional
 public class UserDAO {

SessionFactory sessionFactory;

public void save(User transientInstance) {
   //Removed try-catch. It was just catching RuntimeException only to re throw it
   sessionFactory.openSession().save(transientInstance);

}
//I would get rid of this method.  
public static UserDAO getFromApplicationContext(ApplicationContext ctx) {
    return (UserDAO) ctx.getBean("UserDAO");
}
//I would get rid of this method or make it private  
public SessionFactory getSessionFactory() {
    return sessionFactory;
}
public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}
} 
```

主要代码

```
ApplicationContext context=new ClassPathXmlApplicationContext("applicationContext.xml");
//I would use builder instead of constructor here
User user=new User("firstName", "lastName", "address", "phoneNo", "mobileNo", "email", "password", false, null);

UserDAO ud=(UserDAO)context.getBean("UserDAO");
ud.save(user); 
```

# joomla - Joomla: How to set user group access permission for article post?

> ID：15527589
> 
> 赞同：0
> 
> 时间：2013-03-20T15:19:43.413
> 
> 标签：joomla, permissions, submit, categories, article

I got several user groups with special rights and categories.

**Example:** Classes: A, B, C. Teachers: A, B, C.

Now if "Teacher A" creates an article within his categorie (A) via frontpage he's able to select a permissionlevel for this article (Group A, B, C access).

Is it possible to hide this "access level selection" and give an automatic access level, in this case "access level a", when posting into categorie a?

Thanks for any usefull help! :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:59:17.327

You can hide "access level selection" overriding submit form layout. But for sure some coding will be needed to give an automatic access level. That's not an easy task...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T03:55:09.053

I've done something similar in the past on a client project. I ended up creating a template override for the edit layout by copying components/com_content/views/form/tmpl/edit.php to templates/mytemplate/html/com_content/form/edit.php. Then, I moved the fields around and hid the regular access level selection container. Then, I performed some logic to get the logged in user to determine what access level they should be selecting, and set that in a hidden field right before the closing form tag, so that when it got submitted, the form would take that value. The field I used looked like this:

```
<input type="hidden" name="jform[access]" value="YOUR_GROUP_ACCESS_ID" />

```

So, as Dmitry said, it does take a little bit of work, but it's not too difficult.

# jquery - 当用户点击其他地方时，如何隐藏弹出框？

> ID：15527595
> 
> 赞同：0
> 
> 时间：2013-03-20T15:19:51.843
> 
> 标签：jquery

单击按钮时会出现我的弹出框，并且仅当我再次单击按钮时才会消失。这是我的代码：

```
 $(document).ready(function() {

        $('a.signUp, a.signIn').click(function() {

        //Getting the variable's value from a link 
        var popupBox = $(this).attr('href');

        if ($(popupBox).css('display')=='none'){
            // Add the mask to body
            $('#mask').show();
            //Fade in the Popup
            $(popupBox).fadeIn(300);
        } else {
            //Fade out box, and hide the mask
            $(popupBox).fadeOut(300 , function() {
                $('#mask').hide();  
            }); 
        }
        return false;

        });

    }); 
```

所以有两个按钮，用这就是为什么我从链接中获取变量值的原因。当我单击框外的任何位置时，如何使框消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:23:05.507

试试这个

```
 $(popupBox).on("click", function(e){
      e.stopPropagation();
    });

    $(document).on("click", function() {
      $(popupBox).hide("fast");
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:30:56.957

```
$(document).mouseup(function (e)
{
    var container = $('.popup');
    if (container.is(':visible') && container.has(e.target).length === 0)
        container.fadeOut('fast');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:23:34.790

您可以为此使用[.blur()](http://api.jquery.com/blur/)事件或[focusout()](http://api.jquery.com/focusout/)方法。它会为你解决问题。

```
$('#popBoxWrapperDiv').blur(function(){
//hide the popup box
}); 
```

# lua - 电晕sdk中的时间倒计时

> ID：15527601
> 
> 赞同：2
> 
> 时间：2013-03-20T15:19:59.800
> 
> 标签：lua, coronasdk, countdowntimer

我正在尝试使用 Lua 在 Corona SDK 中创建计时器倒计时。我对编码很陌生，所以我从来没有设置过。任何想法我将如何去做。

这是我到目前为止所拥有的

```
infoBar = display.newImage('infoBar.png', 280)
score = display.newText('0', 65, -2, native.systemFontBold, 14)
score:setTextColor(0)
timeLeft = display.newText('20', 175, -2, native.systemFontBold, 14)
timeLeft:setTextColor(0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:02:10.257

这会做到的......

```
local timeLimit = 20
timeLeft = display.newText(timeLimit, 160, 20, native.systemFontBold, 14)
timeLeft:setTextColor(255,0,0)

local function timerDown()
   timeLimit = timeLimit-1
   timeLeft.text = timeLimit
     if(timeLimit==0)then
        print("Time Out") -- or do your code for time out
     end
  end
timer.performWithDelay(1000,timerDown,timeLimit) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:56:49.117

您可以使用

```
local timeCounter = n
local myTimer=timer.performWithDelay( 1000, function() timeCounter = timeCounter - 1 end, n ) 
```

此行将减少 timeCounter 变量 n 次。当你完成时间后，你可以简单地删除它

```
timer.cancel( myTimer ) 
```

# php - 登录时盐和 md5 加密的问题

> ID：15527602
> 
> 赞同：1
> 
> 时间：2013-03-20T15:20:00.573
> 
> 标签：php, html, md5, salt

我已经设法创建了一个基本的加密系统，因此当用户最初注册我的网站时，密码会使用 salt、md5 和 sha1 安全地存储在我的数据库中。

现在当用户登录时出现问题，即使我使用相同的方法，发送到数据库的字符串（密码）也不同。我将在下面演示：

这是我使用盐技术将客户添加到数据库页面的基本（目前）。

```
require "dbconn.php";

$username = $_GET['username'];
$email = $_GET['email'];
$pass = $_GET['pwd1'];
$pass2 =$_GET['pwd2'];
$matching = 0;

if($pass == $pass2)
{
echo "<script type='text/javascript'> window.alert('Your details have been successfully          registered, please proceed to login with your new credentials!')</script>";
echo '<script>javascript:window.close();</script>';

$salt = sha1(md5($pass));
$pass = md5($pass.$salt);

$query = "INSERT INTO customer VALUES    ('".$username."','".$email."','".$pass."','face1.jpg')"; 
```

这又是我的基本（目前）登录页面，再次使用相同的 salt 技术（我省略了此页面的后半部分）

```
session_start();
require "dbconn.php";

$username = $_GET['username'];
$password = $_GET['password'];

$salt = sha1(md5($password));
$password = md5($password.$salt);

$sql = "SELECT * FROM customer WHERE username ='".$username."' AND   password='".$password."'"; 
```

我已经做了一些检查，并且在将密码输入数据库时​​，例如使用密码名称测试：它存储为 34364c859afb02e70306c905374ac2 但是当用户登录时密码是：34364c859afb02e70306c905374ac2d5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:32:40.403

这里有很多问题：

1.  不要在 URL 字符串（GET 参数）中传输密码，因为这会使其可见并且可以通过引用 URL 泄漏密码。
2.  使用准备好的语句。不要使用旧的 mysql_* 函数。而是使用 MySQLi 或 PDO。您发送到数据库的任何参数都应通过准备好的语句，其中两个参数之一在准备好语句后注入参数。这允许您使用 MySQL 驱动程序来转义您的参数并保护您免受 SQL 注入。
3.  从风格上讲，您应该为变量使用一致的名称。
4.  检查您的列长度。应该是太短了吧 （缺少 2 个字符）
5.  您的加盐方法并不真正符合加盐方法的条件，因为它是从原始密码字符串派生的。研究为每个用户生成一个唯一的盐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:32:22.150

这里有几个问题：

1.  您不应该使用原始用户输入构建 SQL 查询，您应该转义它。我建议您将 PDO 与准备好的语句一起使用。
2.  您散列/加密/存储密码的方式根本不安全。尝试一些可以处理这个问题的 PHP 库，它更安全。
3.  在您的情况下，问题似乎是数据库字段长度。如您所见，您提供的两个哈希几乎相同，除了第一个短 2 个字符。您应该扩展您的数据库密码字段长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:31:40.737

您存储的散列对于 MD5 散列来说太短了 - 它有 30 个字符长。

你很可能会修剪它。检查字段的长度，它应该容纳 32 个字符的哈希值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:33:32.030

您的字符串中缺少 2 个字符。

```
34364c859afb02e70306c905374ac2
34364c859afb02e70306c905374ac2d5 
```

检查您的 mysql 字段长度。

# java - 如何从此 Java 代码中获取有问题的文件的目录

> ID：15527608
> 
> 赞同：1
> 
> 时间：2013-03-20T15:20:23.697
> 
> 标签：java, intellij-idea, phpstorm

我正在尝试按照以下说明找到有问题的字体文件的目录：http: [//devnet.jetbrains.com/docs/DOC-172](http://devnet.jetbrains.com/docs/DOC-172)

我收到字体名称错误。但是，我已经搜索并删除了匹配的文件，但是脚本不断在相同的字体名称上抛出错误。我怀疑在 Windows 7 的某个地方有一个隐藏的副本，我想将文件目录信息添加到输出中。

有没有办法在异常输出之前获取有关文件的目录信息？还是java使用文件目录结构以外的东西来派生系统中的字体列表？

```
import java.awt.Font;
import java.awt.GraphicsEnvironment;

public class FontTest {
  public static void main(String[] args) {
    Font[] fonts = GraphicsEnvironment.getLocalGraphicsEnvironment().getAllFonts();
    for (int i = 0; i < fonts.length; i++) {
      final Font font = fonts[i];
      final String name = font.getName();

      System.out.print("Checking Font: " + name);

      if (font.canDisplay('a') &&
        font.canDisplay('z') &&
        font.canDisplay('A') &&
        font.canDisplay('Z') &&
        font.canDisplay('0') &&
        font.canDisplay('1')) {
        System.out.println(" OK.");
      } else {
       System.out.println();
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:33:31.523

我想通了。Windows 7 为字体管理实现了一个流畅的 UI。但是，这并没有显示目录中的 Adob​​e Type 1 字体。我进行了命令行目录检查，然后对我找到的一个文件进行了“搜索”。这最终给了我文件资源管理器中的目录，从那里我能够删除所有 Type1 文件。呸。谢谢！

# python - 如何为一个 Python/C 扩展源文件指定不同的编译器标志？

> ID：15527611
> 
> 赞同：13
> 
> 时间：2013-03-20T15:20:28.840
> 
> 标签：python, setup.py, distutils, compiler-flags

我有一个 Python 扩展，它使用特定于 CPU 的功能（如果可用）。这是通过运行时检查完成的。如果硬件支持该`POPCNT`指令，那么它会选择我的内部循环的一个实现，如果 SSSE3 可用，那么它会选择另一个，否则它会退回到我的性能关键内核的通用版本。（大约 95% 以上的时间都花在了这个内核上。）

不幸的是，有一个我没想到的失败模式。我使用`-mssse3`and`-O3`来编译所有的 C 代码，即使只有一个文件需要该`-mssse3`选项。因此，其他文件的编译预期 SSSE3 将存在。这会导致该行出现段错误：

```
start_target_popcount = (int)(query_popcount * threshold); 
```

因为编译器使用`fisttpl`的是 SSSE3 指令。毕竟，我告诉它假设存在 SSSE3。

我的软件包的 Debian 打包器最近遇到了这个问题，因为测试机器有一个 GCC，它可以理解`-mssse3`并生成代码，但机器本身有一个较旧的 CPU，没有这些指令。

我想要一个解决方案，其中相同的二进制文件可以在较旧的机器和较新的机器上运行，Debian 维护者可以将其用于该发行版。

理想情况下，我想说只有一个文件使用该`-mssse3`选项编译。由于我的特定于 CPU 的选择器代码不是此文件的一部分，因此除非 CPU 支持，否则不会执行任何 SSSE3 代码。

但是，我想不出任何方法来判断`distutils`一组编译器选项特定于单个文件。
这甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:46:22.707

一个非常难看的解决方案是创建两个（或更多`Extension`）类，一个用于保存 SSSE3 代码，另一个用于其他所有内容。然后，您可以在 python 层中整理界面。

```
c_src = [f for f in my_files if f != 'ssse3_file.c']

c_gen = Extension('c_general', sources=c_src,
                 libraries=[], extra_compile_args=['-O3'])

c_ssse3 = Extension('c_ssse_three', sources=['ssse3_file.c'],
                 libraries=[], extra_compile_args=['-O3', '-mssse3']) 
```

在`__init__.py`某个地方

```
from c_general import *
from c_ssse_three import * 
```

当然你不需要我写出那个代码！而且我知道这不是 DRY，我期待阅读更好的答案！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-11T10:39:58.793

已经 5 年了，但我找到了一个比我的“CC”包装器更喜欢的解决方案。

“build_ext”命令创建一个 self.compiler 实例。compiler.compile() 方法获取所有要编译的源文件的列表。基类做了一些设置，然后有一个 compiler._compile() 钩子用于具体的编译器子类来实现实际的每个文件编译步骤。

我觉得这足够稳定，我可以在那时截取代码。

我从 distutils.command.build_ext.build_ext 派生了一个新命令，它调整 self.compiler._compile 以使用附加到实例的一次性函数来包装绑定的类方法：

```
class build_ext_subclass(build_ext):
    def build_extensions(self):

        original__compile = self.compiler._compile
        def new__compile(obj, src, ext, cc_args, extra_postargs, pp_opts):
            if src != "src/popcount_SSSE3.c":
                extra_postargs = [s for s in extra_postargs if s != "-mssse3"]
            return original__compile(obj, src, ext, cc_args, extra_postargs, pp_opts)
        self.compiler._compile = new__compile
        try:
            build_ext.build_extensions(self)
        finally:
            del self.compiler._compile 
```

然后我告诉 setup() 使用这个命令类：

```
setup(
   ...
   cmdclass = {"build_ext": build_ext_subclass}
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-24T09:42:48.060

不幸的是，OP 的解决方案仅适用于 Unix 编译器。这是一个交叉编译器：
^(（MSVC 不支持自动 SSSE3 代码生成，因此我将使用 AVX 为例）)

```
from setuptools import setup, Extension
import distutils.ccompiler

filename = 'example_avx'

compiler_options = {
    'unix': ('-mavx',),
    'msvc': ('/arch:AVX',)
}

def spawn(self, cmd, **kwargs):
    extra_options = compiler_options.get(self.compiler_type)
    if extra_options is not None:
        # filenames are closer to the end of command line
        for argument in reversed(cmd):
            # Check if argument contains a filename. We must check for all
            # possible extensions; checking for target extension is faster.
            if not argument.endswith(self.obj_extension):
                continue

            # check for a filename only to avoid building a new string
            # with variable extension
            off_end = -len(self.obj_extension)
            off_start = -len(filename) + off_end
            if argument.endswith(filename, off_start, off_end):
                if self.compiler_type == 'bcpp':
                    # Borland accepts a source file name at the end,
                    # insert the options before it
                    cmd[-1:-1] = extra_options
                else:
                    cmd += extra_options

                # we're done, restore the original method
                self.spawn = self.__spawn

            # filename is found, no need to search any further
            break

    distutils.ccompiler.spawn(cmd, dry_run=self.dry_run, **kwargs)

distutils.ccompiler.CCompiler.__spawn = distutils.ccompiler.CCompiler.spawn
distutils.ccompiler.CCompiler.spawn = spawn

setup(
    ...
    ext_modules = [
        Extension('extension_name', ['example.c', 'example_avx.c'])
    ],
    ...
) 
```

请在此处查看[我的答案，](https://stackoverflow.com/a/68349405/11725753)了解一般指定编译器/链接器选项的交叉编译器方式。

# sql-server - 更新没有任何标识列的单行

> ID：15527612
> 
> 赞同：1
> 
> 时间：2013-03-20T15:20:31.323
> 
> 标签：sql-server, sql-update

我有一个非常特殊的问题，考虑这两行：

```
val   | text     | akr       | usr_bk      
-----------------------------------------------
001   | hello    | 1024      | admin
001   | hello    | 1024      | admin 
```

如您所见，我没有唯一的列或其他标识符。

但; 是否有可能（以及如何）只更新**一行**，例如`val = 002` **不**修改另一行？

我在 SQL Server 2008 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:33:28.437

您将需要知道您想要哪一个，但是您可以使用您提供的示例数据这样做：

```
;WITH NumberedTbl AS (
  SELECT ROW_NUMBER() OVER (
    PARTITION BY val, text, akr, admin
    ORDER BY val, text, akr, admin
  ) AS RowNumber,
  val, text, akr, admin
  FROM tbl
)

UPDATE t
SET val = '002'
FROM NumberedTbl t
WHERE t.RowNumber = 1

SELECT * FROM tbl 
```

请参阅此[SqlFiddle 以获取实时示例](http://sqlfiddle.com/#!3/4506e/4/0)。您可能想要做的是构建并设置它，以便您`WITH`像这样过滤表：

```
;WITH NumberedTbl AS (
  SELECT ROW_NUMBER() OVER (
    PARTITION BY val, text, akr, admin
    ORDER BY val, text, akr, admin
  ) AS RowNumber,
  val, text, akr, admin
  FROM tbl
  WHERE ... -- ADD SOME WHERE CLAUSE HERE
) 
```

# android - 通过 A2DP/AVRCP 发送曲目信息

> ID：15527614
> 
> 赞同：27
> 
> 时间：2013-03-20T15:20:33.000
> 
> 标签：android, bluetooth, a2dp, avrcp

我正在尝试通过 A2DP/AVRCP 发送曲目信息。现在，音乐完美流式传输，但在“接收器”（即：汽车音响）上，“曲目信息屏幕”是空白的（使用流行的播放器并非如此）。任何的想法 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-08T03:40:31.857

这段代码对我有用：

```
private static final String AVRCP_PLAYSTATE_CHANGED = "com.android.music.playstatechanged";
private static final String AVRCP_META_CHANGED = "com.android.music.metachanged";

private void bluetoothNotifyChange(String what) {
    Intent i = new Intent(what);
    i.putExtra("id", Long.valueOf(getAudioId()));
    i.putExtra("artist", getArtistName());
    i.putExtra("album",getAlbumName());
    i.putExtra("track", getTrackName());
    i.putExtra("playing", isPlaying());        
    i.putExtra("ListSize", getQueue());
    i.putExtra("duration", duration());
    i.putExtra("position", position());
    sendBroadcast(i);
} 
```

根据您的播放状态，使用适当的意图（如上定义）调用 bluetoothNotifyChange：暂停/播放/元数据已更改。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-10-19T18:11:44.243

如果您只想将元数据信息从手机发送到连接的 AVRCP 兼容音频蓝牙设备，并且**根本**不想从蓝牙设备控制您的应用程序，您可能会发现下面的代码很有用。并且无需使用**AudioManager**实现和注册 MediaButtonEventReceiver。

我还包含了 API 版本 21 (LOLLIPOP, 5.0) 的代码。从 API 21 开始，不推荐使用 RemoteControlClient，鼓励使用[MediaSession 。](https://developer.android.com/reference/android/media/session/MediaSession.html)

初始化阶段：

```
 if (mAudioManager == null) {
        mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    }

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
        if (mRemoteControlClient == null) {
            Log.d("init()", "API " + Build.VERSION.SDK_INT + " lower then " + Build.VERSION_CODES.LOLLIPOP);
            Log.d("init()", "Using RemoteControlClient API.");

            mRemoteControlClient = new RemoteControlClient(PendingIntent.getBroadcast(this, 0, new Intent(Intent.ACTION_MEDIA_BUTTON), 0));
            mAudioManager.registerRemoteControlClient(mRemoteControlClient);
        }
    } else {
        if (mMediaSession == null) {
            Log.d("init()", "API " + Build.VERSION.SDK_INT + " greater or equals " + Build.VERSION_CODES.LOLLIPOP);
            Log.d("init()", "Using MediaSession API.");

            mMediaSession = new MediaSession(this, "PlayerServiceMediaSession");
            mMediaSession.setFlags(MediaSession.FLAG_HANDLES_TRANSPORT_CONTROLS);
            mMediaSession.setActive(true);

        }
    } 
```

向兼容 AVRCP 的蓝牙音频设备发送歌曲元数据信息的方法：

```
private void onTrackChanged(String title, String artist, String album, long duration, long position, long trackNumber) {

    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {

        RemoteControlClient.MetadataEditor ed = mRemoteControlClient.editMetadata(true);
        ed.putString(MediaMetadataRetriever.METADATA_KEY_TITLE, title);
        ed.putString(MediaMetadataRetriever.METADATA_KEY_ARTIST, artist);
        ed.putString(MediaMetadataRetriever.METADATA_KEY_ALBUM, album);
        ed.putLong(MediaMetadataRetriever.METADATA_KEY_DURATION, duration);
        ed.putLong(MediaMetadataRetriever.METADATA_KEY_CD_TRACK_NUMBER, trackNumber);
        ed.apply();

        mRemoteControlClient.setPlaybackState(RemoteControlClient.PLAYSTATE_PLAYING, position, 1.0f);
    } else {

        MediaMetadata metadata = new MediaMetadata.Builder()
                .putString(MediaMetadata.METADATA_KEY_TITLE, title)
                .putString(MediaMetadata.METADATA_KEY_ARTIST, artist)
                .putString(MediaMetadata.METADATA_KEY_ALBUM, album)
                .putLong(MediaMetadata.METADATA_KEY_DURATION, duration)
                .putLong(MediaMetadata.METADATA_KEY_TRACK_NUMBER, trackNumber)
                .build();

        mMediaSession.setMetadata(metadata);

        PlaybackState state = new PlaybackState.Builder()
                .setActions(PlaybackState.ACTION_PLAY)
                .setState(PlaybackState.STATE_PLAYING, position, 1.0f, SystemClock.elapsedRealtime())
                .build();

        mMediaSession.setPlaybackState(state);
    }
} 
```

如果元数据发生更改，请调用，但请检查我们是否与音频蓝牙设备建立了 A2DP 连接。如果我们未连接，则无需发送元数据信息：

```
if (mAudioManager.isBluetoothA2dpOn()) {
    Log.d("AudioManager", "isBluetoothA2dpOn() = true");
    onTrackChanged(getTitle(), getArtist(), getAlbum(), getDuration(), getCurrentPosition(), getId());
} 
```

清理销毁：

```
@Override
public void onDestroy() {
    super.onDestroy();

[..]    

if (Build.VERSION.SDK_INT < Build.VERSION_CODES.LOLLIPOP) {
        mAudioManager.unregisterRemoteControlClient(mRemoteControlClient);
    } else {
        mMediaSession.release();
    }
} 
```

[这](http://i.stack.imgur.com/lRjnF.jpg)就是我的汽车音响上的样子

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-16T21:35:06.507

这让我花了很长时间才弄清楚。仅仅广播意图是行不通的。我通过发送意图**和**实现[RemoteControlClient让 AVRCP 工作](http://developer.android.com/reference/android/media/RemoteControlClient.html)

这是我使用的代码：

```
public void onCreate(){
    super.onCreate();

    mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    ComponentName rec = new ComponentName(getPackageName(), MyReceiver.class.getName());
    mAudioManager.registerMediaButtonEventReceiver(rec);

    Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
    i.setComponent(rec);
    PendingIntent pi = PendingIntent.getBroadcast(this, 0, i, 0);
    mRemoteControlClient = new RemoteControlClient(pi);
    mAudioManager.registerRemoteControlClient(mRemoteControlClient);

    int flags = RemoteControlClient.FLAG_KEY_MEDIA_PREVIOUS
            | RemoteControlClient.FLAG_KEY_MEDIA_NEXT
            | RemoteControlClient.FLAG_KEY_MEDIA_PLAY
            | RemoteControlClient.FLAG_KEY_MEDIA_PAUSE
            | RemoteControlClient.FLAG_KEY_MEDIA_PLAY_PAUSE
            | RemoteControlClient.FLAG_KEY_MEDIA_STOP
            | RemoteControlClient.FLAG_KEY_MEDIA_FAST_FORWARD
            | RemoteControlClient.FLAG_KEY_MEDIA_REWIND;
    mRemoteControlClient.setTransportControlFlags(flags);
}

private void onTrackChanged(...) {
    String title = ...;
    String artist = ...;
    String album = ...;
    long duration = ...;

    Intent i = new Intent("com.android.music.metachanged");
    i.putExtra("id", 1);
    i.putExtra("track", title);
    i.putExtra("artist", artist);
    i.putExtra("album", album);
    i.putExtra("playing", "true");
    sendStickyBroadcast(i);

    RemoteControlClient.MetadataEditor ed = mRemoteControlClient.editMetadata(true);
    ed.putString(MediaMetadataRetriever.METADATA_KEY_TITLE, title);
    ed.putString(MediaMetadataRetriever.METADATA_KEY_ALBUM, album);
    ed.putString(MediaMetadataRetriever.METADATA_KEY_ARTIST, artist);
    ed.putLong(MediaMetadataRetriever.METADATA_KEY_DURATION, track.getDuration());
    ed.apply();
}

public void onDestroy(){
    mAudioManager.unregisterRemoteControlClient(mRemoteControlClient);
    super.onDestroy();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T01:27:44.760

要将轨道元数据发送到主机，您需要发送一个意图。

```
Intent avrcp = new Intent("com.android.music.metachanged");
avrcp.putExtra("track", "song title");
avrcp.putExtra("artist", "artist name");
avrcp.putExtra("album", "album name");
Context.sendBroadcast(avrcp); 
```

歌曲播放完毕后，为 putExtra 方法的第二个参数发送另一个带有空字符串的意图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-09T20:50:21.317

如果您使用的是 Compat 版本的组件，则无需控制 SDK_INT。下面的代码使用许多汽车蓝牙设备进行了测试，并且效果很好。有些设备不理解某些 KEY，因此最好使用可能的 KEY。[参考](https://developer.android.com/reference/android/support/v4/media/MediaMetadataCompat.html "参考")。不要忘记 .build() 在 putBitmap 之后而不是之前

```
public static void sendTrackInfo() {
if(audioManager == null) {
    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
}

if (mMediaSession == null) {
    mMediaSession = new MediaSessionCompat(this, "PlayerServiceMediaSession");
    mMediaSession.setFlags(MediaSessionCompat.FLAG_HANDLES_TRANSPORT_CONTROLS);
    mMediaSession.setActive(true);
}

if (audioManager.isBluetoothA2dpOn()) {
    try {
        String songTitle = getTitle();
        String artistTitle = getArtist();
        String radioImageUri = getImagesArr().get(0);
        String songImageUri = getImagesArr().get(1);
        long duration = getDuration();

        final MediaMetadataCompat.Builder metadata = new MediaMetadataCompat.Builder();

        metadata.putString(MediaMetadataCompat.METADATA_KEY_TITLE, songTitle);
        metadata.putString(MediaMetadataCompat.METADATA_KEY_DISPLAY_TITLE, songTitle);
        metadata.putString(MediaMetadataCompat.METADATA_KEY_ARTIST, artistTitle);
        metadata.putString(MediaMetadataCompat.METADATA_KEY_ALBUM_ARTIST, artistTitle);
        metadata.putString(MediaMetadataCompat.METADATA_KEY_ART_URI, radioImageUri);
        metadata.putString(MediaMetadataCompat.METADATA_KEY_DISPLAY_ICON_URI, radioImageUri);
        metadata.putString(MediaMetadataCompat.METADATA_KEY_ALBUM_ART_URI, songImageUri);
        metadata.putLong(MediaMetadataCompat.METADATA_KEY_DURATION, duration);

        imageCounter = 0;

        Glide.with(act)
                .load(Uri.parse(radioImageUri))
                .asBitmap()
                .into(new SimpleTarget<Bitmap>(250, 250) {
                    @Override
                    public void onResourceReady(Bitmap bitmap, GlideAnimation anim) {
                        metadata.putBitmap(MediaMetadataCompat.METADATA_KEY_ART, bitmap);
                        metadata.putBitmap(MediaMetadataCompat.METADATA_KEY_DISPLAY_ICON, bitmap);

                        imageCounter = imageCounter + 1;

                        if(imageCounter == 2) {
                            mMediaSession.setMetadata(metadata.build());
                        }
                    }
                });

        Glide.with(act)
                .load(Uri.parse(songImageUri))
                .asBitmap()
                .into(new SimpleTarget<Bitmap>(250, 250) {
                    @Override
                    public void onResourceReady(Bitmap bitmap, GlideAnimation anim) {
                        metadata.putBitmap(MediaMetadataCompat.METADATA_KEY_ALBUM_ART, bitmap);

                        imageCounter = imageCounter + 1;

                        if(imageCounter == 2) {
                            mMediaSession.setMetadata(metadata.build());
                        }
                    }
                });
    }
    catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

}

# google-app-engine - 使用 cron 计划读取文本文件的每一行

> ID：15527617
> 
> 赞同：0
> 
> 时间：2013-03-20T15:20:42.733
> 
> 标签：google-app-engine, cron, google-cloud-datastore, google-drive-api

我想使用 cron 计划来读取文本文件的每一行。

```
cron:
- description: read a line of text file
  url: /read
  schedule: every 1 minutes 
```

但是 GAE 只允许读取文本文件而不修改它。

我怎样才能请求`read`知道上一行已经被读取并且它应该读取下一行。我不想将所有读取的行存储在数据存储中，然后进行查询，检查文本行是否在数据存储中，bla bla，因为我有数百万行。

请指教。我正在考虑 Google Drive Api，对此有什么想法吗？谢谢

更新：我可以这样做吗

```
with open('text.txt', 'r') as f:
        txt= f.readlines()
f.close()

t = txt[line_num]
DO SOMETHING
line_num = line_num+1
deferred.defer( read_deferred, line_num, _countdown = 60 ) # 60 sec = 1 min 
```

在其他地方，我通过调用触发延迟

```
deferred.defer( read_deferred, 0, _countdown = 60 ) # 60 sec = 1 min 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:58:28.860

Cron 不会让您保存状态，除非在数据库中。由于您不想使用 DB，因此您可以改用延迟任务，启动它一次，它将一直运行，直到读取最后一行，例如：

```
def read_deferred(last_pos) :
    f = open( ... )

    if last_pos : f.seek(last_pos)

    # here you read the next line and do whatever you like,
    # just don't go further and return once you hit EOF

    last_pos = f.tell()

    deferred.defer( read_deferred, last_pos, _countdown = 60 ) # 60 sec = 1 min 
```

你第一次这样称呼它：

```
 deferred.defer( read_deferred, _countdown = 60 ) # 60 sec = 1 min 
```

# android - 全高清安卓模拟器

> ID：15527619
> 
> 赞同：0
> 
> 时间：2013-03-20T15:20:47.140
> 
> 标签：android, emulation, avd

我正在尝试模拟具有 1920X1080 分辨率的设备，但是当我启动 avd 时，只显示一个空白屏幕。另外，我知道 android 模拟器的限制，但我们能找到解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:26:46.270

修复了使用 AndroVM [http://androvm.org/blog/](http://androvm.org/blog/)，也是 android 模拟器更快的替代品

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T07:15:38.107

还有另一个使用常规 AVD 的选项。问题出在“使用主机 GPU”——应该检查。我遇到了同样的问题 - 黑屏和 AVD 无法运行。我编辑了 AVD 设置并检查了“使用主机 GPU”——它可以工作。

# iphone - 这个@2x 如何处理视频？

> ID：15527620
> 
> 赞同：2
> 
> 时间：2013-03-20T15:20:47.610
> 
> 标签：iphone, ios, ipad

我们在 iOS 上有这个 @2x 的东西，可以为视网膜设备加载图像，但是视频呢？

假设我想在普通 iPad 和视网膜 iPad 上显示视频。我必须有两个视频，一个普通视频和一个@2x 视频还是更大的视频？

我想更大的视频就足够了，但我想知道你们的想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:30:17.157

iOS 不会像 UIImage 那样自动完成。但是您可以自己检查屏幕分辨率，然后决定播放哪个视频。

但我建议您只使用分辨率足够高的视频，以便在@2x 分辨率下播放良好，因为如果分辨率太大，无论如何都会缩小尺寸。

# c++ - 编译源代码时找不到 c++ 标识符

> ID：15527621
> 
> 赞同：0
> 
> 时间：2013-03-20T15:20:48.423
> 
> 标签：c++, visual-c++

这是我的代码：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <sstream>
#include <math.h>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int userInput = -9999;
    userInput = ReadNumber();
    WriteAnswer(userInput);
    system("pause");
    return 0;
};

int ReadNumber ()
{
    int liInput = -9999;
    cin >> liInput;
    return liInput;
};

 void WriteAnswer(int data)
{
    cout << data << endl;
}; 
```

当我尝试编译时，它说：

1>错误 C3861：“ReadNumber”：未找到标识符

1>错误 C3861: 'WriteAnswer': 未找到标识符

为什么会出现上述错误？以及如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:23:01.380

C++ 源代码是**从头到尾**编译的。

当编译器走到这一步时：

```
#include "stdafx.h"
#include <iostream>
#include <string>
#include <sstream>
#include <math.h>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int userInput = -9999;
    userInput = ReadNumber();   // <-- What is this? 
```

这是真的——没有证据表明`ReadNumber`存在。

在使用函数之前声明它们的存在。

```
int ReadNumber ();
void WriteAnswer(int data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:22:01.607

您忘记键入函数原型。

```
int ReadNumber ( void );
void WriteAnswer(int ); 
```

在调用函数之前将它们放入您的代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:23:30.937

在您的代码中，您尝试调用`ReadNumber`尚未声明的函数。编译器对此函数一无所知：

```
int _tmain(int argc, _TCHAR* argv[])
{
    ...
    ReadNumber();   // call to function ReadNumber, but what is ReadNumber ??? 
}

// definition of ReadNumber:
int ReadNumber ()
{
    ...
} 
```

你应该先声明它：

```
// declaration:
int ReadNumber();

int _tmain(int argc, _TCHAR* argv[])
{
    ...
    ReadNumber();   // call ReadNumber that takes no arguments and returns int
}

// definition of ReadNumber:
int ReadNumber ()
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:48:22.780

在第一次调用函数之前，您**必须编写**函数原型或函数本身。

在您的代码编译器中看到调用，`ReadNumber()`但它不知道该函数是什么。

# matlab - 如何使用 Matlab 的 quadprog 实现软边距 SVM 模型？

> ID：15527622
> 
> 赞同：7
> 
> 时间：2013-03-20T15:20:49.087
> 
> 标签：matlab, machine-learning, svm, quadprog

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T16:45:04.913

I don't see how it can be a problem. Let `z` be our vector of `(2n + 1)` variables:

```
z = (w, eps, b) 
```

Then, `H` becomes diagonal matrix with first `n` values on the diagonal equal to `1` and the last `n + 1` set to zero:

```
H = diag([ones(1, n), zeros(1, n + 1)]) 
```

Vector `f` can be expressed as:

```
f = [zeros(1, n), C * ones(1, n), 0]' 
```

First set of constrains becomes:

```
Aineq = [A1, eye(n), zeros(n, 1)]
bineq = ones(n, 1) 
```

where `A1` is a the same matrix as in primal form.

Second set of constraints becomes lower bounds:

```
lb = (inf(n, 1), zeros(n, 1), inf(n, 1)) 
```

Then you can call MATLAB:

```
z = quadprog(H, f, Aineq, bineq, [], [], lb); 
```

P.S. I can be mistaken in some small details, but the general idea is right.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-31T13:30:38.577

If let z = (w; w0; eps)T be a the long vector with n+1+m elements.(m the number of points) Then,

```
H= diag([ones(1,n),zeros(1,m+1)]).
f = [zeros(1; n + 1); ones(1;m)] 
```

The inequality constraints can be specified as :

```
A = -diag(y)[X; ones(m; 1); zeroes(m;m)] -[zeros(m,n+1),eye(m)], 
```

where X is the n x m input matrix in the primal form.Out of the 2 parts for A, the first part is for w0 and the second part is for eps.

```
b = ones(m,1) 
```

The equality constraints :

```
Aeq = zeros(1,n+1 +m)
beq = 0 
```

Bounds:

```
lb = [-inf*ones(n+1,1); zeros(m,1)]
ub = [inf*ones(n+1+m,1)] 
```

Now, `z=quadprog(H,f,A,b,Aeq,beq,lb,ub)`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-31T23:29:11.407

Complete code. The idea is the same as above.

```
n = size(X,1);
m = size(X,2);
H = diag([ones(1, m), zeros(1, n + 1)]);
f = [zeros(1,m+1) c*ones(1,n)]';
p = diag(Y) * X;
A = -[p Y eye(n)];
B = -ones(n,1);
lb = [-inf * ones(m+1,1) ;zeros(n,1)];
z = quadprog(H,f,A,B,[],[],lb);
w = z(1:m,:);
b = z(m+1:m+1,:);
eps = z(m+2:m+n+1,:); 
```

# wpf - WPF用户控件中的自动高度

> ID：15527628
> 
> 赞同：1
> 
> 时间：2013-03-20T15:20:55.137
> 
> 标签：wpf, xaml, layout

假设我有以下 XAML。

我怎样才能实现最外层`Button`具有这样的高度，以便文本`TextBlock`完全可见？

```
<StackPanel>
        <Button HorizontalContentAlignment="Stretch" Width="100" >
            <DockPanel >
                <CheckBox DockPanel.Dock="Left"/>
                <Button DockPanel.Dock="Right" Content="X" />                
                <TextBlock >
  some very long text some very long textsome very long textsome very long textsome very long text
                </TextBlock>
            </DockPanel>
        </Button>
    </StackPanel> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:31:05.240

设置为`TextBlock.TextWrapping`，`Wrap`当文本到达允许空间的边缘时，它将换行到新行

```
<TextBlock TextWrapping="Wrap" 
           Text="some very long text some very long textsome very long textsome very long textsome very long text" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:29:01.843

添加另一个堆栈面板

```
<StackPanel>
        <Button HorizontalContentAlignment="Stretch" Width="auto" >
            <DockPanel>
                <CheckBox DockPanel.Dock="Left"/>
                <StackPanel>
                    <Button DockPanel.Dock="Right" Content="x" HorizontalAlignment="Right" />
                    <TextBlock Text="some very long text some very long textsome very long textsome very long textsome very long text" />
                </StackPanel>
            </DockPanel>
        </Button>
    </StackPanel> 
```

# asp.net-mvc - 具有存储库模式的 MVC 脚手架 - 将子对象保存为事务

> ID：15527629
> 
> 赞同：0
> 
> 时间：2013-03-20T15:20:55.997
> 
> 标签：asp.net-mvc, entity-framework, transactions, repository-pattern, asp.net-mvc-scaffolding

我一直在搜索论坛和存储库模式博客，以获得关于我应该如何编码我的项目的明确方向，但我被困住了。你们的任何帮助或指导都会非常感激:)

我以 EF5 MVC4 Razor Code First 开始我的项目，并决定使用 MVCScaffolding 来生成我所有的控制器、视图和存储库。这是我使用这些技术的第一个项目，我只是被告知团队现在就是这样做的（但以前的开发人员首先做模型并手动编码他们的上下文）。

所以，一切都很好，我们正在编写一堆屏幕，但我们的一个屏幕是一个复杂的屏幕，涉及许多模型/子模型（即/对象模型具有响应、附件、审阅者等的 FK...） . 用户添加一堆数据，选择一个或多个审阅者，添加0个或多个附件。然后他们点击保存！

现在我的大问题是我想将所有这些数据保存为一个事务，如果其中一个子模型（即附件）出现故障，事务将回滚。**但是**，创建 MVCScaffolding 存储库的方式是，每个模型都有自己的 DB Context 实例和自己的 Save。控制器接受每个唯一的存储库作为加载屏幕数据的参数。另一件需要注意的是，对于这个屏幕，我们使用 ViewModel 来加载数据，然后编写自定义映射器以映射回不同的模型进行保存。我们可以单独保存每个部分，可能解决方案只是将 TransactionScope 包裹在我的保存周围，但我还想减少对数据库的调用次数，因为每个存储库保存都会调用。

我以为我可以将代码添加到 UnitsOfWork 类型保存的父存储库中，这将在一个上下文对象中添加/编辑所有子对象，但这似乎比什么都重要，我想正确编码。

这里的其他项目之一只是创建了一个自定义数据库上下文，并且所有 Save 方法都在该类中，这是最好的方法吗？另一位开发人员先编写代码，但手动编写了他所有的 Save 方法。它们都不是标准的地方，他正在使用带有 DBContext 的 TransactionScope（这是过度杀伤还是 DBContext 不处理事务）？

由于我对此很陌生，因此我需要帮助，并且与我一起工作的人似乎都没有同意正确的方法。我不确定我的模型对于“MVC 应用程序”是否错误，因为我是一个数据库重的思想家。

以下是我的模型示例，不胜感激。谢谢 ：）

```
public class Anomaly 
{
    [Key]
    public int AnomalyId { get; set; }

    public string Subject { get; set; }

    public int PlantId { get; set; }
    [ForeignKey("PlantId")]
    public virtual Plant Plant { get; set; }

    public DateTime? ReviewByDate { get; set; }

    public virtual ICollection<AnomalyReviewer> AnomolyReviewers { get; set; }
    public virtual ICollection<AnomalyAttachment> AnomalyAttachments { get; set; }

}

    public class AnomalyAttachment 
{
    [Key]
    public int AnomalyAttachmentId { get; set; }

    public int AnomalyId { get; set; }
    [ForeignKey("AnomalyId")]
    public virtual Anomaly Anomaly { get; set; }

    public string FilePath { get; set; }
    public string FileName { get; set; }
    public string FileExtension { get; set; }
    public string Notes { get; set; }           

} 
```

附言。这只是一个样本......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:07:01.737

只需创建一个从 Controller 继承的“Master”类。然后在 public User GetUserById(Int32 id) 中写下你所有的查询最后创建一个调用私有的函数！DbContext 的实现。

我通常会给那个函数一个 SystemEvents 的枚举，所以我有一个参考，如果某些事情失败了会发生什么......当然你需要编写自己的通知器或模型来将你自己的错误记录到数据库中以进行个人测试...

我做了这一切，因为我可以编写我所有的代码，并且发现如果你真的考虑它，存储库模式在大多数情况下都是矫枉过正的。

# android - 验证、识别和存储有关用户的敏感信息的最佳方式是什么？

> ID：15527631
> 
> 赞同：1
> 
> 时间：2013-03-20T15:21:01.253
> 
> 标签：android, python, oauth, google-cloud-endpoints, endpoints-proto-datastore

为了了解端点，我正在构建一个名为“你在哪里？”的应用程序。该应用程序允许用户请求其他用户的位置。这个想法是通过让用户选择一个联系人，通过我的端点中的电话号码查找联系人来实现的。如果找到，则表示该联系人拥有该应用程序，并发送 GCM 请求该位置。如果未找到联系人，则会发送带有 URL 的短信，该 URL 将通过浏览器请求位置，执行所述位置的 http 发布并将服务器 GCM 发送回请求位置的人。

我需要验证应用程序的用户并存储多个联系人的电话号码以及应用程序的用户。到目前为止，我将主要关注服务器端的事情。

如何以安全的方式存档上述内容？

到目前为止，我正在为我的 API 启用 OAuth 2.0 并将`user_required=True`as 参数传递给我的`Model.method`装饰器。导致以下代码：

```
from google.appengine.ext import endpoints
from google.appengine.ext import ndb
from protorpc import remote
from endpoints_proto_datastore.ndb import EndpointsModel

class User(EndpointsModel):
    owner = ndb.UserProperty()
    phone_number = ndb.StringProperty()
    reg_id = ndb.StringProperty()
    created = ndb.DateTimeProperty(auto_now_add=True)

@endpoints.api(name='whereareyoudroid', version='v1', 
               description='Where Are You Users')
class UserApi(remote.Service):
    @User.method(user_required=True,
                 response_fields=('id',),
                 path='user')
    def insert(self, user):
        user.owner = endpoints.get_current_user()
        user.put()
        return user

    @User.method(user_required=True,
                 request_fields=('id',),
                 path='user/{id}',
                 http_method='GET')
    def get(self, user):
        if not user.from_datastore:
            raise endpoints.NotFoundException('User not found.')
        return user 
```

但是上面的代码只需要一个有效的 gmail 帐户。我在想一些事情，如果您已经有了电话号码，您只能访问用户？如果我限制 get 方法上的响应字段以排除电话号码，就会出现这种情况......除非有人决定暴力破解服务。建议？评论？

[据此](https://developers.google.com/appengine/docs/python/endpoints/consume_android#making-authenticated-calls)，我收集到我可以将我的端点配置为仅接受来自我的应用程序的请求。是对的吗？如果是这样，有人不能从 apk 中提取需求信息或修改它以执行......邪恶吗？:)

# 更新：

1.  A 请求 B 的位置

    如果未找到，则通过电话号码查询端点，如果找到，只需通过 SMS 发送请求...转到 2。

2.  请求被转发到 GAE 应用程序

    这是通过插入一个 ID 为 UUID 的 Location 端点并向 B 发送有关请求的 GCM 来完成的

3.  GAE 应用程序验证 A 的秘密 ID 在 B 的白名单中

    没有白名单，秘密 id 是 UUID，所以这一步被取消了

4.  然后应用程序查询 B 的位置

    如果 B 决定授予对其位置 B 的访问权限，则只需根据 UUID 更新 Location 端点

5.  一旦应用程序检索到此信息，它就会验证它是否仅将此信息发送给由 A 的秘密 ID 标识的用户

    当 B 更新其位置时，GAE 向 A 发送 GCM 通知更新

6.  然后将信息安全地发送给 A 的客户

    完毕！GCM 和 SMS（和 HTTPS）可以被认为是安全的……对吧？

    更新：GCM 并不安全……但它真的那么重要吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:36:21.913

您想要获取相当敏感的信息组合 - 用户电子邮件（作为身份）、电话号码和位置。

因此，首先，您必须*非常*考虑用户的隐私问题，制定有关如何存储和分发这些信息的政策，并让用户清楚他们允许什么。我建议不要在客户端中尽可能多地存储此类数据集的任何聚合。

为此，我建议尽可能使用 GAE 存储。

你的应用程序查询用户的位置不应该太担心，只要事情是通过保持良好的安全通道完成的。

令人担忧的是，这些信息只能到达允许的来源。即只有相互联系才能请求此信息。

我建议对于每个用户，允许的联系人白名单是最好的。对于每个用户，在 GAE 上都有一个关联的秘密随机 uuid（永远不会发送给任何客户端）。注册您的服务的用户将创建此 ID。然后，白名单将包含一个秘密 ID 列表。

一个过程可以是——

1.  A 请求 B 的位置
2.  请求被转发到 GAE 应用程序。
3.  GAE 应用程序验证 A 的秘密 ID 在 B 的白名单中
4.  然后应用程序查询 B 的位置
5.  一旦应用程序检索到此信息，它就会验证它是否仅将此信息发送给由 A 的秘密 ID 标识的用户
6.  然后将信息安全地发送给 A 的客户

# perl - 如何在不依赖生产中的其他模块的情况下测试您自己的 Perl 模块？

> ID：15527633
> 
> 赞同：0
> 
> 时间：2013-03-20T15:21:04.203
> 
> 标签：perl, unit-testing, perl-module, cpan

首先，我认为有人需要重写我的问题，我知道我在问什么，而不是我应该如何准确地问它。

假设我有一些本地模块`LOCAL::Commons`，它有一个名为`globalTrim`. 我在下面测试那个子程序，虽然`LOCAL::Commons`安装在下面`/usr/local/lib/perl`，但我下面测试的模块位于目录中`/home/me/perl/LOCAL/`。看看我是如何使用`use lib ...`的，以确保我没有使用`LOCAL::Commons`位于`/usr/local/lib/perl`（我的路径上有这个目录）。

现在，如果`LOCAL::Commons`正在使用另一个本地模块`LOCAL::Cool`（即不是来自 cpan），并且我也对该模块进行了一些更改，我如何确保我的测试使用正确的模块？也就是说，我想`LOCAL::Commons`使用`/home/me/perl/LOCAL/Cool`而不是`/usr/local/lib/perl/LOCAL/Cool`.

```
#!/usr/bin/perl 
# test_local_commons.pl
# directory: /home/me/perl

use strict;
use warnings;
use Test::More 'no_plan';
use File::Temp qw( tempfile tempdir );

use Cwd qw();
use lib  Cwd::abs_path();
# Testing 
use LOCAL::Commons qw ( globalTrim );

sub newTest($) {
    my $name = shift;
    print "---------------------------------------------------\n";
    print $name, "\n";
    print "---------------------------------------------------\n";
}

sub testTraverse {
   is(globalTrim("  - stackoverflow  - ), "-stackoverflow-", "Passed" );
}

newTest "testTraverse"; testTraverse (); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:27:09.443

如果你这样运行：

```
perl -I/home/me/perl test_local_commons.pl 
```

它应该确保`/home/me/perl`首先检查您的版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:28:05.883

加载所需文件后，输入：

```
die 'Included PRODUCTION Module!!!' 
    if grep { m{/usr/local/lib/perl/LOCAL/Cool} } values %INC
    ; 
```

当然，你可以为任何你想要的模块而死。

例如，我们有这个工具可以与 Activestate 的`PerlEZ.dll`. 我们不想在安装 Perl 的情况下部署它。但是我们需要使用一些我们隐藏在其他地方的库。当我测试我的代码时，我会从我们的隐藏路径中包含一个模块。每当*它*在`%INC`. 我们要确保它几乎来自`@INC`钩子和特殊库的所有内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:31:15.177

我建议使用[Perlbrew](http://perlbrew.pl/)进行完全独立的 Perl 安装以进行测试。这样您就可以控制测试环境而不必担心它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:33:00.613

你可以只添加一个`BEGIN{ @INC = qw(directories you want to allow)}`块。虽然 using`PERL5LIB`等`use lib`只是附加到包含路径，这将完全替换它，从而消除模块稍后在搜索路径中被拾取的危险，例如，因为您忘记安装它`/home/me/perl/`。

但真正的 TDD 答案可能是对所有不是被测模块的东西使用模拟模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T15:53:58.233

`use lib`具有流程范围——也就是说，它`@main::INC`以全局可见性更改值，就像对 will 的非本地化分配`@INC`一样。这意味着您在说之后加载的任何模块`use lib`都会检查您设置的包含路径。

至于设置什么路径`use lib`，它显式添加到前面，`@INC`以便`use lib`在搜索模块时更早地考虑后面的调用。

结果是，在我看来，您的代码示例可以正常工作。请注意，我将不鼓励您检查您在测试中是否使用了正在开发的版本。这将导致您的测试失败，原因与被测功能是否实际正常工作无关。（但还要注意，您还应该为 编写单元测试`LOCAL::Cool`。）

# android - 使用自定义 ListAdapter 更新/刷新列表

> ID：15527638
> 
> 赞同：0
> 
> 时间：2013-03-20T15:21:12.060
> 
> 标签：android, arraylist, android-arrayadapter, custom-adapter

我知道有很多类似的问题，但它们都有一个共同点，即他们的解决方案不适用于我的列表:(

当数据库内容发生更改时，我试图通过自定义 ArrayAdapter 让我的 userList 自行刷新。就我而言，当我 reset();

这是我的片段（部分代码）：MainActivity.java

```
public class MainActivity extends ListActivity {
    private MyUserListAdapter myUserlistAdapter; 
    public ArrayList<User> myUserList = new ArrayList<User>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //shortened the list-filling. but it works properly!
        User user = db.readUser(int);
        myUserList.add(user);
        myUserlistAdapter = new MyUserListAdapter(this, R.layout.row_main, myUserList);
        setListAdapter(myUserlistAdapter);

        //now when reset-button is hit, the listview should refresh itself
         bReset.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                 //this is what is posted in most questions, but it does nothing for me
                 //myUserlistAdapter.notifyDataSetChanged();
                 //getListView().invalidateViews();
            } }); 
```

这里是 myUserListAdapter.java：

```
public class MyUserListAdapter extends ArrayAdapter<User>{

private Context context;
private ArrayList<User> userList;

public MyUserListAdapter(Context context,
        int textViewResourceId, ArrayList<User> userList) {
    super(context, textViewResourceId, userList);

    this.context = context;
    this.userList = userList;
}

public View getView(int position, View v, ViewGroup parent) {

    if (v == null) {
        LayoutInflater li = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = li.inflate(R.layout.row_main, null);
    }

    User user = getItem(position);

    TextView tvUser = (TextView) v.findViewById(R.id.tvUser);
    ImageView ivVoted = (ImageView) v.findViewById(R.id.ivVoted);

    tvUser.setText(user.getName());

    //abfrage ob hasVoted() = true muss noch eingebaut werden.
    if (user.getVoted().equals("1"))
        ivVoted.setImageResource(R.drawable.redcheck);
    else
        ivVoted.setImageResource(R.drawable.greencheck);
    return v;
}   
} 
```

User.java 只是一个简单的对象类。认为它不是这里的麻烦制造者！

任何帮助表示赞赏！谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:33:14.633

> 当数据库内容发生更改时，我试图通过自定义 ArrayAdapter 让我的 userList 自行刷新。

Since you are using ArrayAdapter and not CursorAdapter when you update data in database your adapter won't refresh itself. Whenever you want to update ListView you need to provide new datasource for Adapter.

One possible solution is to create setter in adapter subclass that will change datasource of adapter.

**Pseudo code:**

```
/* setter in adapter subclass */
public void changeDataSource(ArrayList<User> newUserList) {
   this.userList = newUserList;
} 
```

Then call `adapter.notifyDataSetChanged();` for `ListView` update.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T22:25:07.673

Try this:

```
arrayAdapter.clear()
for(Object o : objects)
  arrayAdapter.add(o) 
```

`clear()` and `add()` call to `notifyDataSetChanged()` itself.

# android - 隐藏键盘自动提示栏

> ID：15527641
> 
> 赞同：0
> 
> 时间：2013-03-20T15:21:14.713
> 
> 标签：android, keyboard

我试过了

```
android:inputType="textFilter" 

android:inputType="textNoSuggestions"  

x.setInputType(InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);

android:inputType="textVisiblePassword" 
```

我可以看到有很多事情可以尝试 [Android 以编程方式禁用模拟器中 EditText 的自动完成/自动建议](https://stackoverflow.com/questions/6281514/android-programmatically-disable-autocomplete-autosuggest-for-edittext-in-emulat?lq=1)

有没有适用于所有设备的方法？例如，上面的这些命令不适用于我的设备，但对其他人有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:59:09.987

```
x.setInputType(InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD); 
```

这有效，即使 xml 版本没有。可能不适用于我安装它的所有设备。奇怪的问题。

# facebook - Facebook 点赞按钮 - 类似内容

> ID：15527643
> 
> 赞同：0
> 
> 时间：2013-03-20T15:21:21.437
> 
> 标签：facebook, xhtml, facebook-like

我生成了我的 facebook like 按钮，并准备了它，以便用户能够喜欢我论坛上的每个帖子。该`href`属性设置为线程和某些帖子网址，但是当我单击“喜欢”按钮时，Facebook 正在获取徽标，以及我喜欢帖子的论坛标题，而不是我希望用户头像和帖子标题被张贴。

在这里，我指出了我要更改的元素，因为它不适合帖子信息，而是整个页面信息。

![在此处输入图像描述](../Images/8aa8c94e9298637a9358c7c8655a4526.png)

有没有可能改变这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:27:20.050

添加这些标签应该可以解决您的问题：

[http://davidwalsh.name/facebook-meta-tags](http://davidwalsh.name/facebook-meta-tags)

# jquery - 使用 jQuery 根据第一个单元格文本向表中添加带有类的列/单元格

> ID：15527654
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:21:38.407
> 
> 标签：jquery

我有下表...

```
<table>
    <tbody>
         <tr class="trclass">
             <td class="tdclass">Test1</td>
             <td class="tdclass">Test2</td>
             <td class="tdclass">Test3</td>
         </tr>
         <tr class="trclass">
             <td class="tdclass">Test4</td>
             <td class="tdclass">Test5</td>
             <td class="tdclass">Test6</td>
         </tr>
    </tbody>
</table> 
```

如何在 (test2 和 test3) 和 (test5 和 test6) 之间的每一行中添加一个单元格，并使用基于第一个单元格 (test1 和 test4) 的文本的类？基本上看起来像这样......

```
<table>
    <tbody>
        <tr class="trclass">
            <td class="tdclass">Test1</td>
            <td class="tdclass">Test2</td>
            <td class="Test1">NewText</td>
            <td class="tdclass">Test3</td>
        </tr>
        <tr class="trclass">
            <td class="tdclass">Test4</td>
            <td class="tdclass">Test5</td>
            <td class="Test4">NewText</td>
            <td class="tdclass">Test6</td>
        </tr>
    </tbody>
</table> 
```

我试过像

```
jQuery(".tdclass").after("<td>test</td>"); 
```

和

```
jQuery(".tdclass").append("<td>test</td>"); 
```

但我不确定如何循环并实现这个确切的场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:30:38.817

你可以这样做：

```
$("tr.trclass").each(function() {
   var className = $(this).find("td:eq(1)").text();
   $(this).find("td:eq(1)").after("<td class=" + className + ">NewText</td>");
}); 
```

演示：http: [//jsfiddle.net/ECu36/](http://jsfiddle.net/ECu36/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:45:17.633

我认为通过 css 属性可以很容易地控制如下：

```
$('tr.trclass').find('td:nth-child(2)').after('<td>testing123</td>'); 
```

# java - twitter4j filterquery 具有多个条件，例如处理中的位置和跟踪（GeoLocation 和关键字）

> ID：15527663
> 
> 赞同：0
> 
> 时间：2013-03-20T15:22:04.203
> 
> 标签：java, twitter, filter, twitter4j

我想知道是否可以过滤用户位置和关键字

```
 double[][] location= location;
 String keywords[] = {"keywords"};

 FilterQuery fq = new FilterQuery();
 fq.locations(location);
 fq.track(keywords);
 twitterStream.filter(fq); 
```

这些代码似乎只过滤关键字..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T14:11:47.987

位置的边界框是逻辑 OR。位置参数可以与跟踪参数组合，但请注意，所有术语在逻辑上都是 OR，因此查询字符串 track=twitter&locations=-122.75,36.8,-121.75,37.8 将匹配包含术语 Twitter 的任何推文（即使是非地理推文)**或**来自旧金山地区。

# python - 如何有效地从数组中选择多个切片？

> ID：15527666
> 
> 赞同：2
> 
> 时间：2013-03-20T15:22:09.580
> 
> 标签：python, numpy, indexing

给定一个数组

```
d = np.random.randn(100) 
```

和一个索引数组

```
i = np.random.random_integers(low=3, high=d.size - 5, size=20) 
```

我怎样才能有效地创建一个二维`r`数组

```
r.shape = (20, 8) 
```

这样对所有人`j=0..19`来说，

```
r[j] = d[i[j]-3:i[j]+5] 
```

就我而言，数组非常大（~200000 而不是 100 和 20），所以一些快速的东西会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:05:26.420

您可以创建数据的窗口视图，即`(93, 8)`数组，其中 item`[i, j]`是`[i+j]`原始数组的项，如：

```
>>> from numpy.lib.stride_tricks import as_strided
>>> wd = as_strided(d, shape=(len(d)-8+1, 8), strides=d.strides*2) 
```

您现在可以将所需的切片提取为：

```
>>> r = wd[i-3] 
```

请注意，这`wd`只是原始数据的视图，因此不需要额外的内存。`r`使用任意索引提取的那一刻，数据被复制。因此，根据您希望如何使用`r`数组，您可能希望尽可能地延迟它，或者甚至完全避免它：您始终可以`r[j]`在`wd[j-3]`不触发副本的情况下访问行。

# windows-7 - 让 Windows 7、InstallShield、MDAC 2.7 和（不寒而栗）VB6 运行良好

> ID：15527668
> 
> 赞同：1
> 
> 时间：2013-03-20T15:22:18.150
> 
> 标签：windows-7, installshield

**短版：**
当我迁移到 Win7 时，我从我的 .ISM 模块中手动删除了 MDAC 2.7 行，构建它并安装了我的软件。它似乎工作。我可以相信它吗？

**更长的版本：** 我们刚刚从 XP 升级到 Windows 7。我们提供的软件是 C#（.NET 4 框架），针对 XP 和 Windows 7。它包含一些较旧的 COM 模块，其中一个是用 VB6 编写的。（是的，我很想用现代技术重写它，但目前这不是一个选择。）

我使用 InstallShield 2010 来构建这个包的安装程序。在 XP 上构建此安装程序没有问题。当我在 Windows 7 上尝试时，它希望 MDAC 2.7 作为先决条件合并模块。Microsoft 不再允许您下载 2.7，而且我不会从“Sharewarez R'us”站点获取它。

InstallShield 在找不到合并模块时给我的错误是：`File not found. An error occured merging Module 'MDAC27ENU...'`

根据我在网上阅读的内容，Windows 7 已经安装了最新最好的 MDAC（现在更名为 WDAC）。一时兴起，我从 .ISM 中手动删除了 MDAC 依赖项，构建并安装了它，我的软件**似乎**运行得很好。

我认为正在发生的事情是 Win7 注意到 VB6 中的某些东西正在使用 MDAC，并且操作系统正在提供最新最好的并且它可以正常工作。我不再需要合并模块，因为 Windows 7 内置了 WDAC。（真的可以这么简单吗？）

我的主要问题是：我可以相信它吗？

我的第二个问题是：XP 部署怎么样？他们仍然需要 MDAC 2.7... 如果我需要 MDAC 2.7，这是否表明我无法在 Windows 7 上构建以针对 XP ？请指出我正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:50:49.290

您需要对安装程序进行全面审查（依赖性分析）。如今，VB6 运行时和 MDAC/WDAC 组件都内置在 Windows 中。Windows XP 和最新的服务包也是如此。

您的 ISM 正在引用 MDAC 合并模块，或者它正在引用另一个依赖于 MDAC 合并模块的合并模块。因此，为什么我建议进行完整的审查。

如果不查看您的应用程序，我无法给您 100% 的答案，但很可能如果您实施设置条件（启动条件）来检查 XP 最新服务包或更新的服务包，您可能无需安装一堆东西就可以工作不需要安装。

# sql - 在使用 SP_ExecuteSQL 时，我正在生成一个布尔错误

> ID：15527669
> 
> 赞同：0
> 
> 时间：2013-03-20T15:22:22.527
> 
> 标签：sql, sql-server, dynamic, boolean, concatenation

我对 SQL 很陌生，所以如果我的问题显得微不足道或者看起来好像我还没有完成我的工作，让我首先道歉。我正在努力学习如何掌握很多这些概念。

无论如何，我正在编写一个复杂的查询，最终将采用许多参数。对于这些参数，我将使用逗号分隔的字符串来允许多个变量。（我之前已经解决了这个问题，但在尝试执行`SP_ExecuteSQL`.

话虽如此，这里是查询的基本内容。

```
DECLARE @system_status varchar(30)
SELECT @system_status = '12,14'

DECLARE @sql nvarchar(4000)

SELECT @sql = 'SELECT  [system_status]
  FROM VW_Document_Main      
  WHERE 1=1 ' 

IF @System_Status =  '-1'      
      Begin      
            SELECT @sql = @sql + 'and system_status <> 20'      
      End      
ELSE IF @system_status IS NOT NULL AND @system_status NOT IN ('-1','0')      
      Begin     
            SELECT @sql = @sql + 'and ' + @system_Status + ' LIKE ''%,'' + system_Status + '',%''' 
```

当不将其构建到 sp_executesql 语句中时，我能够填充一个可用的查询，但是，由于我将构建这个查询，因此有必要采取这些步骤......关于我为什么生成非布尔错误？

编辑：不确定这是否是朝着正确方向迈出的一步，但现在在修改最终的 SELECT 语句以读取：

```
SELECT @sql = @sql + 'and '',''' + @system_Status + '','''  LIKE ''%,' + 'system_Status' + ',%''' 
```

它给了我一个不同的错误：为变量赋值的 SELECT 语句不能与数据检索操作结合使用。

值得注意的是，错误显示为：**在预期条件的上下文中指定的非布尔类型的表达式，靠近“，”。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:45:28.960

您将文字 @system_status 值 '12, 14' 插入到最终 SQL 中，因此它看起来像这样

```
SELECT [system_status] FROM VW_Document_Main WHERE 1=1 and 12,14 LIKE '%,' + system_Status + ',%' 
```

这将失败，因为您没有 12,14 引号。所以你必须修改这条线

```
SELECT @system_status = '12,14' 
```

成为

```
SELECT @system_status = '''12,14''' 
```

或者，既然你说你是通过 sp_executeSql 运行它，你应该修改你的最后一个选择

```
SELECT @sql = @sql + 'and  @system_Status LIKE ''%,'' + system_Status + '',%''' 
```

并将您的执行 SQL 过程更改为

```
sp_executesql @sql, N'@system_status varchar(30)', @system_status 
```

# autofac - FxCop 间接引用 System.Core 版本 2.0.5.0

> ID：15527674
> 
> 赞同：5
> 
> 时间：2013-03-20T15:22:46.043
> 
> 标签：autofac, fxcop

我有一个使用 Autofac 和 WebAPI 集成的项目

我们在我们的解决方案上运行 FxCop，在打开 autofac 时，我得到以下信息：

> 找不到以下间接引用的程序集。分析不需要此组件，但是，如果没有它，分析结果可能不完整。Autofac.dll 引用了这个程序集
> 
> **System.Core，版本=2.0.5.0，文化=中性，PublicKeyToken=7cec85d7bea7798e，可重定向=是**

这会在我们的 CI 服务器上导致以下错误：

> FxCop 返回代码 (516)：PROJECT_LOAD_ERROR ASSEMBLY_REFERENCES_ERROR

有没有办法告诉 FxCop 忽略这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-27T10:59:50.987

在我们的项目中，AutoMapper 3.1.0 也有同样的问题。真正的问题是旧版本的 FxCop。最后一个正式版本是[FxCop 10.0](http://blogs.msdn.com/b/codeanalysis/archive/2010/07/26/fxcop-10-0-is-available.aspx)，但自 2012 年以来，新版本的 FxCop 已与 Visual Studio 捆绑在一起。我刚刚将 FxCop 10.0 替换为可以在以下位置找到的版本：

*   C:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Static Analysis Tools\FxCop

或者

*   C:\Program Files (x86)\Microsoft Visual Studio 12.0\Team Tools\Static Analysis Tools\FxCop

问题就解决了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T16:23:25.150

在使用可移植类库运行时，这是常见的 FxCop 事情。这不是 Autofac；您只是碰巧看到了它，因为 Autofac 是您使用的唯一 PCL。根据我的经验，如果您在 Windows 8 机器上构建，则似乎不会发生此错误，但在 Windows 7 或 Server 2008R2 上，我经常看到这种情况。

这不是一个错误，不，你不会在你的机器上找到 2.0.5.0。该版本实际上是用于 Silverlight 和运行时 .NET“东西”处理重定向到正确的程序集版本。不幸的是，FxCop 不太合作。

我在我的构建中看到了同样的事情，并使用以下问题的建议解决了它：[如何修复 FxCop 错误代码 512？](https://stackoverflow.com/questions/7949652/how-to-fix-fxcop-error-code-512)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:45:58.443

您必须在 FxCop 项目文件中添加对程序集目录的引用。例如：

```
<Targets>
  <AssemblyReferenceDirectories>
   <Directory>C:/Windows/Microsoft.NET/assembly/GAC_MSIL/Microsoft.Web.Infrastructure/v4.0_1.0.0.0__31bf3856ad364e35/</Directory>
   <Directory>C:/Windows/Microsoft.NET/assembly/GAC_MSIL/System.Web.Mvc/v4.0_3.0.0.0__31bf3856ad364e35/</Directory>
  </AssemblyReferenceDirectories> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-17T12:26:23.703

此问题的解决方法是将缺少的 System.Core.dll 复制到项目输出目录。我将此作为构建后事件，将 System.Core.dll 从共享文件夹复制到 project\bin 目录。您可以从 Silverlight SDK 2 安装中获取 System.Core.dll 的副本。

现在 fxcop 成功运行，没有任何问题。请注意，我在 Visual Studio 2010 中使用了 Fxcop 集成器。

# sql - 如何评论长命名表中的 Oracle-SQL 长命名列？

> ID：15527677
> 
> 赞同：0
> 
> 时间：2013-03-20T15:22:49.673
> 
> 标签：sql, oracle, identifier

我想执行几个这样的语句

```
comment on column Quite_A_Long_Table_Identifier.Quite_A_Long_Column_Identifier is 'Something'; 
```

我收到与此类似的错误消息。

```
ORA-00604: error occurred at recursive SQL level 1
ORA-12899: value too large for column "CONVER"."CAPTURE_DDL"."OBJECT_NAME" (actual: 60, maximum: 50)
ORA-06512: at line 195
ORA-12899: value too large for column "CONVER"."CAPTURE_DDL"."OBJECT_NAME" "CONVER"."CAPTURE_DDL"."OBJECT_NAME" (actual: 60, maximum: 50) 
```

显然，如果复合名称的长度超过 50 个字符，Oracle 不喜欢复合名称是否有任何替代方法可以达到我想要的效果？

我知道我可以缩短名称或手动引入评论。但我更喜欢允许我保留相同标识符的脚本解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:38:35.420

我无法在 9iR2、11gR1 和 11gR2 上重现：

```
SQL> --           123456789012345678901234567890
SQL> CREATE TABLE Quite_A_Long_Table_Identifier (
  2               Quite_A_Long_Column_Identifier NUMBER
  3  );

Table created

SQL> COMMENT ON COLUMN 
 2      Quite_A_Long_Table_Identifier.Quite_A_Long_Column_Identifier IS 'fooo';

Comment added 
```

`"CONVER"."CAPTURE_DDL"."OBJECT_NAME"`无论如何，它看起来不像 Oracle 对象，因此它必须是您特定数据库的自定义。

我的猜测是你有一个**DDL 触发器**或一个捕获过程（审计），它在一个太小的列中记录 DDL 语句。你能检查你的数据库触发器吗？

* * *

以下是您可以做的一些事情来找到确切试图插入的内容`CONVER.CAPTURE_DDL.OBJECT_NAME`：

1.  跟踪您的会话。查看跟踪文件。您将看到调用了什么 PL/SQL。
2.  看[`DBA_DEPENDENCIES`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_1068.htm#i1576452)：

    ```
    SELECT *
      FROM dba_dependencies
     WHERE referenced_owner = 'CONVER'
       AND referenced_name = 'CAPTURE_DDL' 
    ```

    这将列出所有具有引用该表的静态 SQL 的 PL/SQL 对象。

希望您能找到插入该表的程序，并从中推断出它是如何在 DDL 之后被调用的。

无论如何，增加此列的大小（可能增加到 61）应该可以解决您的问题。如果我不清楚整个过程，我不会更新表定义。

# ruby-on-rails - 使用 cron 调度 rake 任务

> ID：15527679
> 
> 赞同：0
> 
> 时间：2013-03-20T15:22:59.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cron, rake

我正在尝试设置每日 cron 作业以更新我的站点统计信息，但它看起来不起作用。

Cron 条目（对于部署者用户）：

```
0 0 * * * cd /var/www/my_site/current && rake RAILS_ENV=production stats:update 
```

我正在使用 rbenv 运行 ubuntu 服务器。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:31:21.033

与在自己的 shell 中工作时相比，cron 运行时 $PATH 的定义很多时候都不同。执行“whereis rake”以找到 rake 的完整路径，然后将“rake”替换为其完整路径。（我假设“cd”命令正在工作，所以我关注的是“rake”是否找到/运行正常。）

将命令添加到 crontab 后，cron 是否向您发送了任何带有错误消息的电子邮件？

您可能希望在正确的用户帐户下运行“crontab -l”，以确保您的 cron 命令实际上已在 crontab 中注册，尤其是在您没有收到任何电子邮件的情况下。

Gemfile 的存在也会影响正确运行 rake 的能力。例如，请参阅[错误：“找不到 rake”，但 Rake 已安装](https://stackoverflow.com/questions/11151416/error-could-not-find-rake-yet-rake-is-installed)

# mysql - 多行返回相同的 ID，只需要一个

> ID：15527682
> 
> 赞同：0
> 
> 时间：2013-03-20T15:23:04.493
> 
> 标签：mysql, sql

我试图在一个页面上列出几个产品。我的查询返回多个相同的产品，我试图弄清楚如何通过我的查询将其限制为一个。

我们将调用 table_one 的第一个表的主键是 ID。第二个表有一个 ProductID 列，它引用 table_one 上的主键。

我的查询带回了我的 ProductID 的倍数，等于下面的 6。我只想带回一个结果，但我仍然希望查询我在 table_two 上的 DateReserved 中的所有数据。很确定我需要在查询中再添加一件事，但我运气不佳。

我想要回来的结果如下。

```
ID   Productname  Quantity              Image       Date Reserved         SumQuantity

6    productOne          6        'image.jpg'          03-31-2013                   3           
7    productTwo          1      'product.jpg'          04-04-2013                   1 
```

这是我的第一张桌子。table_one

```
ID   Productname  Quantity              Image

6    productOne          6        'image.jpg'                 
7    productTwo          1      'product.jpg' 
```

这是我的第二张桌子。表二

```
ID     ProductID       DateReserved  QuantityReserved

1             6          03-31-2013                 3                 
2             6          04-07-2013                 2
3             7          04-04-2013                 1 
```

这是我正在尝试使用的查询。

```
SELECT * 
FROM `table_one` 
LEFT JOIN `table_two` 
       ON `table_one`.`ID` = `table_two`.`ProductID` 
WHERE `table_one`.`Quantity` > 0  
      OR `table_two`.`DateReserved` + INTERVAL 5 DAY <= '2013-03-27' 
ORDER BY ProductName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:18:49.953

很抱歉发布另一个答案，但似乎我的第一次尝试不太好；）

要每次预订只获得一个结果行，您需要以某种方式总结它们。首先，我建议您在结果中明确选择要返回的列，不要使用“*”。

我建议你尝试这样的事情：

```
SELECT
        `table_one`.`ID`, `table_one`.`Productname`, `table_one`.`Image`, `table_one`.`Quantity`,
        `table_two`.`ProductID`, SUM(`table_two`.`QuantityReserved`)
    FROM
        `table_one` 
    LEFT JOIN
        `table_two` ON `table_one`.`ID` = `table_two`.`ProductID` 
    WHERE
        `table_one`.`Quantity` > 0  
        OR `table_two`.`DateReserved` + INTERVAL 5 DAY <= '2013-03-27'
    GROUP BY `table_two`.`ProductID`
    ORDER BY ProductName 
```

如您所见，我使用“SUM”来获得组合数量，这称为聚合，“GROUP BY”可以帮助您摆脱同一个 ProductID 的多次出现。

您现在遇到的一个问题是您必须从单独的查询中获取预订日期（至少我现在不确定如何将其放入同一个查询中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:36:18.367

由于您使用的是 MySQL

```
LIMIT <NUMBER> 
```

应该完全按照您的意愿行事，您只需在 ORDER BY 子句之后插入它，但可能您还应该再添加一个排序，这样您就可以确定您将始终获得您想要的一个实体，而不仅仅是一些“随机”实体；）

因此，无需进一步订购，您的查询将如下所示：

```
SELECT
    *
FROM `table_one` 
LEFT JOIN `table_two` ON `table_one`.`ID` = `table_two`.`ProductID` 
WHERE
    `table_one`.`Quantity` > 0
    OR `table_two`.`DateReserved` +  INTERVAL 5 DAY <= '2013-03-27'
ORDER BY ProductName
LIMIT 1 
```

[这里有更多关于那个的描述](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-09T11:22:02.460

```
SELECT a.member_id,a.member_name,a.gender,a.amount,b.trip_id,b.location 
FROM tbl_member a
LEFT JOIN (SELECT trip_id, MAX(amount) as amount FROM tbl_member GROUP BY trip_id ) b ON a.trip_id= b.trip_id 
  LEFT JOIN tbl_trip b ON a.trip_id=c.trip_id  
ORDER BY member_name 
```

# jquery - Jquery 移动列表视图详细信息弹出窗口

> ID：15527689
> 
> 赞同：3
> 
> 时间：2013-03-20T15:23:15.133
> 
> 标签：jquery, listview, jquery-mobile, mobile, popup

```
 <!DOCTYPE html> 
<html>
    <head>
    <meta charset="iso8858-1">
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <title>HE-JQuery-App</title> 
    <link rel="stylesheet"  href="http://jquerymobile.com/demos/1.2.0/css/themes/default/jquery.mobile-1.2.0.css" />  
    <link rel="stylesheet" href="http://jquerymobile.com/demos/1.2.0/docs/_assets/css/jqm-docs.css" />

    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://jquerymobile.com/demos/1.2.0/docs/_assets/js/jqm-docs.js"></script>
    <script src="http://jquerymobile.com/demos/1.2.0/js/jquery.mobile-1.2.0.js"></script>
  <script>
   $.getJSON("test.json",function(result){
      $.each(result, function(i, field){
         $('#profs').children('ul').append('<li><a href="#'+field.nachname+'" data-rel="popup" data-position-to="window" data-transition="pop"><img src="'+field.imgSmall+'" class="ui-li-thumb" />'+field.name+'<p class="ui-li-desc">'+field.titel+'</p></a></li>').listview('refresh');
        // $('#pops).append('<div data-role="popup" id="'+field.nachname+'" data-theme="d" data-overlay-theme="b" class="ui-content" style="max-width:340px;"><h3>Purchase Album?</h3><img src="'+field.imgBig+'" /><p>Your download will begin immediately on your mobile device when you purchase.</p><a href="search.html" data-role="button" data-rel="back" data-theme="b" data-icon="check" data-inline="true" data-mini="true">Toller Prof?</a><a href="search.html" data-role="button" data-rel="back" data-inline="true" data-mini="true">Schließen</a></div>').listview('refresh');

      });
    });

</script>

</head> 
<body> 

    <div data-role="page" class="type-interior">

        <div data-role="header" data-theme="a">
        <h1>HE Prof Search</h1>
        </div><!-- /header -->

    <div data-role="content">
        <div class="content-primary" id="profs">    
            <ul data-role="listview" data-filter="true">

            </ul>

            </div><!--/content-primary -->      

        </div><!-- /content -->

    <!--    <div data-role="footer" class="footer-docs" data-theme="a">
                <br />
                <p>&copy; 2013 Nesim Avdullahu HE-APP</p>
        </div>     -->

        </div><!-- /page -->

        </body>
        </html> 
```

你好呀，

我在这里有一个从 readet Json 生成的列表视图。我想在列表视图中列出的每个项目的弹出窗口中显示详细数据/。我也不想再次阅读 json。有人可以帮忙吗？

例如，弹出窗口应显示图像（来自 json）fields.imageBig

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:35:27.133

您将需要添加包含图像的弹出 div，然后在列表视图加载后初始化弹出插件。尝试这个...

```
<style>
    .mypopup {
        width:80px;
        height:80px;
    }
</style>

<script>
  $(document).bind('pageinit', function() {
      $.getJSON("test.json",function(result){
         $.each(result, function(i, field){
             $('#profs').children('ul').append('<li><a href="#'+field.nachname+'" data-rel="popup" data-position-to="window" data-transition="pop"><img src="'+field.imgSmall+'" class="ui-li-thumb" />'+field.name+'<p class="ui-li-desc">'+field.titel+'</p></a><div data-role="popup" id="'+field.nachname+'" class="ui-content mypopup" data-theme="a"><img src="'+field.imgSmall+'"/></div></li>').listview('refresh');
         });
         $('div.mypopup').popup();
      });
  }); 
</script> 
```

# git - 按页面限制 Git 命令输出

> ID：15527693
> 
> 赞同：0
> 
> 时间：2013-03-20T15:23:20.967
> 
> 标签：git

有没有办法告诉 git 按页显示输出并限制每页 X 数量的结果？如果是这样，它是如何工作的，你如何移动到上一页或下一页？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:27:07.213

一些 git 命令，例如默认情况`log`下`diff`已经使用了寻呼机。`status`也有`-p`使用它的钥匙。要了解如何使用特定寻呼机，您需要阅读该寻呼机的文档（例如`less`在 Linux 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:56:17.633

GIT 输出使用`less`并且默认情况下使用您的`LESS`环境变量选项。您可以配置 GIT 以使用您的首选`less`选项：

```
git config --global core.pager 'less -FRSX' 
```

`less`您可以使用键在页面之间移动（请参阅 参考资料`man less`）。键“b”用于向后一页；键“f”或“空格”用于向前一页。

# iphone - 无法将数据传递给其他 viewController ios

> ID：15527694
> 
> 赞同：2
> 
> 时间：2013-03-20T15:23:26.893
> 
> 标签：iphone, ios, ios6, uiviewcontroller, segue

我有一个小问题，因为我无法将数据传递给另一个视图控制器。

```
-(void)barcodeData:(NSString *)barcode type:(int)type
{
    mainTabBarController.selectedViewController=self;

    [status setString:@""];

    [status appendFormat:@"Type: %d\n",type];
    [status appendFormat:@"Type text: %@\n",[dtdev barcodeType2Text:type]];
    [status appendFormat:@"Barcode: %@",barcode];
    [displayText setText:status];
    codede1String = barcode;
     NSLog(@"%@",codede1String);

    [self updateBattery];
} 
```

在上面的代码中，我在 String 中放置了一个条形码`codeString1`。到目前为止没有问题，但是当我将此数据发送到另一个viewController时，barCodeString突然为NULL。

我像这样将数据传递给视图控制器：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
  if  ([segue.identifier isEqualToString:@"barcode"]) {
        main =[ segue destinationViewController];
      main.code1.text = codede1String;

    }  

} 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:51:11.437

我假设 code1 是一个文本字段、文本视图或标签。如果是这样，这不起作用的原因是在 prepareForSegue 时尚未设置 main 的 outlet。您需要在 main 中创建一个字符串属性，并在 prepareForSegue 中将其值设置为 code1String。然后，在 main 的 viewDidLoad 或 viewDidAppear 中，将 code1 的文本值设置为该字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:52:41.807

请注意，目标视图控制器的 IBOutlets 尚未在`prepareForSegue`. 因此，如果`main.code1`代表 a `UILabel`，它将为零，因为尚未加载视图。您应该使用 setter 方法直接传递字符串：`[main setCodeString:codede1String]`然后在`viewDidLoad`:中配置用户界面`self.code1.text = [self codeString]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T13:51:14.730

在视图控制器的 viewDidLoad 中执行此操作，然后它可以正常工作

```
- (void)viewDidLoad
{

 codedeString=[[NSString alloc] init];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T13:55:50.210

尝试这样做，它曾经帮助我解决同样的问题（但使用 xibs）

在任何作业之前再添加一行

```
[main.view setAlpha:1.0f];
main.code1.text = codede1String; 
```

希望这对您也有帮助。

# java - 数据库表“PACIENTE”不存在

> ID：15527695
> 
> 赞同：0
> 
> 时间：2013-03-20T15:23:27.380
> 
> 标签：java, database, desktop-application, derby

我正在尝试使用 derby 嵌入式数据库制作一个 java 桌面数据库应用程序，我遇到了一些我无法完全解决的问题，我已经（很多）搜索了答案，找到了一些，但他们无法解决我的问题，所以我决定自己提出一个问题。我在netbeans上创建了数据库，就像一大堆教程一样，下载了derby.jar并添加到项目的库中，但是当我尝试在我创建的数据库表中插入一些数据时说表不存在。我很确定我错过了一些非常愚蠢的东西，但我自己无法弄清楚，所以任何帮助都会非常感激。我是所有这些 java 数据库开发的新手，我只在 c# 上创建了本地数据库

PS：架构是'APP'之一，我尝试使用“INSERT INTO APP.PACIENTE（ID，NOME）VALUES（1，'victor'）”但这也不起作用

```
 public class BancoDados {

private static String url = "jdbc:derby:MeuBancoDados;create=true";
private static String driver = "org.apache.derby.jdbc.EmbeddedDriver";
static Connection conn;
static Statement sta;

public static void insert() throws SQLException, ClassNotFoundException, InstantiationException, IllegalAccessException {

    conn = null;
    sta = null;
     try {

        Class.forName(driver);
        conn = DriverManager.getConnection(url);
        sta = conn.createStatement();
        sta.executeUpdate("INSERT INTO PACIENTE (ID, NOME) VALUES (1, 'victor')");

        sta.close();
        conn.close();

        System.out.println("Inserido com sucesso!");
    } catch (Exception e) {
        System.err.println("Exception: " + e.getMessage());

    }
}
} 
```

我得到这个错误：

```
 Exception in thread "main" ERROR 42X05: Table 'PACIENTE' does not exist.
at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)
at org.apache.derby.impl.sql.compile.DMLModStatementNode.verifyTargetTable(Unknown Source)
at org.apache.derby.impl.sql.compile.InsertNode.bind(Unknown Source)
at org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)
at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)
at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)
at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)
at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(Unknown Source)
at projcad.BancoDados.insert(BancoDados.java:31)
at projcad.projcad.main(projcad.java:8) 
```

Java 结果：1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:24:19.503

> 表 'PACIENTE' 不存在。

这是因为在数据库中您还没有创建`PACIENTE`表。

创造它。

# javascript - For循环和追加

> ID：15527699
> 
> 赞同：1
> 
> 时间：2013-03-20T15:23:35.337
> 
> 标签：javascript, jquery, loops, for-loop, append

我正在用 JavaScript 制作我的第一个 Web 项目。我不知道如何正确使用 for 循环。我试图得到这个结果：

```
text
text
text
text 
```

但我明白了：

```
text 
```

这就是代码：

```
for (i = 0; i <= 5; 1++) {
$("#sth").append("text" + "<br>");
} 
```

小提琴链接：http: [//jsfiddle.net/6K7Ja/](http://jsfiddle.net/6K7Ja/)

我刚开始学习 JavaScript。帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:24:46.987

你的代码有`1++`它应该在的地方`i++`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T15:25:27.713

```
var text = "";
for (var i = 0; i < 4; i++) {
    text += "text<br>";
}
$("#sth").append(text); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T15:26:09.957

您希望追加退出循环。将值添加到变量，然后附加该变量一次。当您按照现在的方式执行此操作时会发生什么，jQuery 将在每次通过该循环时执行该 append 方法。这很糟糕，因为它*每次*都会继续这样做并减慢您的速度。最好通过循环并保存要附加到变量的内容。然后只需将该变量附加*一次*。这样的事情应该可以解决问题：

```
var appendText = []; //We can define an array here if you need to play with the results in order or just use a string otherwise.
for (var i = 0; i < 4; i++) {
    appendText.push("text" + "<br>"); //This adds each thing we want to append to the array in order.
}

//Out here we call the append once
//Since we defined our variable as an array up there we join it here into a string
appendText.join(" ");
$("#sth").append(appendText); 
```

[你可以在这个Fiddle](http://jsfiddle.net/xNy8e/)中看到这个工作并玩弄它。

以下是您应该查看的一些阅读材料：

[http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly](http://www.learningjquery.com/2009/03/43439-reasons-to-use-append-correctly)

# php - 正在使用 microtime() 生成密码重置令牌不好的做法

> ID：15527706
> 
> 赞同：6
> 
> 时间：2013-03-20T15:23:48.113
> 
> 标签：php, security, web, token, microtime

在 PHP 中，我注意到一些框架使用 microtime() 函数来生成密码重置令牌，如下所示：

```
 $token = md5(microtime()); 
```

这是一个安全问题吗？如果攻击者能够将时钟与服务器同步到一定程度的准确度，他们就可以暴力破解令牌。1 秒同步只需要 1,000,000 次尝试，这并不是什么疯狂的问题。

这种攻击成功的可能性有多大？是否应该使用 /dev/urandom 或 openssl_pseudo_bytes() 生成令牌？microtime() 是不好的做法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:22:10.557

是的，这是一个安全问题！随着时间的推移生成令牌是一种非常糟糕的做法。 [Burp Suite](http://portswigger.net/burp/)使攻击者可以轻松破解可预测的令牌，并且基于时间的令牌非常可预测。Burp 允许人们轻松收集令牌并对它们进行统计分析以确定熵。使用此信息，您可以轻松预测未来的令牌。

请记住，攻击者只需要正确处理一次。错误数百万次没有任何区别。

这是一篇关于令牌生成的有用（也是最近的）StackOverflow 帖子，可能对您有所帮助： [REST Web Service authentication token implementation](https://stackoverflow.com/questions/15490265/rest-web-service-authentication-token-implementation/15490642#15490642)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:32:32.000

令牌应始终随机创建，而不是微时间。现在提供一些额外的安全性（因为，让我们再次面对它：计算机除了计算之外什么都不能做），你会想看看 php 的例子： http: [//php.net/manual/de/function.srand.php](http://php.net/manual/de/function.srand.php) 另请参阅[http://php.net/manual/de/function.chr.php](http://php.net/manual/de/function.chr.php)以轻松创建“完全”随机字符串。这是我的做法

```
mt_srand((double) microtime() * 1000000);
    function random_string ($length = 16)
    {
        $string = "";
        for ($n = 0; $n < count($length); $n++) $string .= chr(rand(32, 126));
        return $string;
    }
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:50:41.253

是的，它是（我认为）。
黑客可能会在 1 到 2 小时内猜出密码。（如果服务器使用限制可以进行多少重置，黑客可以通过使用[僵尸网络](http://en.wikipedia.org/wiki/Botnet)或通过大量时间和大量试验来避免它。

如果我是你，我会添加静态盐。盐应该从配置（或其他安全的地方）加载。盐不应由服务器自己或任何人设置。它应该由真正的随机 API 生成（谷歌应该可以帮助你，但我猜 random.org 提供了一个）。
如果您无法使用该 API，那么伪盐应该会有所帮助，只要该死的人不知道服务器何时设置（或者服务器管理员有时可能会删除它，但不是自动的！）

例子：

```
$salt = null;
include('protectedDir/salt.php'); // Here should stand "$salt = ''"
if ($salt == null){
// Using real random api
file_put_contents('protectedDir/salt.php', '<?php \$salt = \'$salt\'; ?>)";
}

$resetKey = sha1(microtime() . $salt); 
```

// 可能包含错误。未经测试。这只是一个示例，不应通过复制和粘贴来实现。

如果黑客可以访问 php 文件（'protectedDir/salt.php'）“源代码”，他也应该能够看到数据库配置。这将是一个更大的问题。

# c# - 如何获得电源状态？

> ID：15527707
> 
> 赞同：1
> 
> 时间：2013-03-20T15:23:51.880
> 
> 标签：c#, .net, mono

我怎样才能获得电源状态？在 Windows 中很容易：

```
SystemInformation.PowerStatus.BatteryChargeStatus.ToString(); 
```

我如何在 MonoDevelop 中做到这一点？

# in-app-purchase - 如何在 Blackberry 10 模拟器上启用 blackberry.payment.developmentMode？

> ID：15527709
> 
> 赞同：0
> 
> 时间：2013-03-20T15:23:54.120
> 
> 标签：in-app-purchase, blackberry-webworks, blackberry-10

我正在尝试在 Blackberry 10 应用上设置应用内付款。当我在我的代码中加入以下行时，我的应用程序没有显示任何错误但不再工作（按钮没有响应等）：

```
blackberry.payment.developmentMode = true; 
```

启用支付开发模式的正确方法是什么？我在 Blackberry Simulator 版本 10.0.10.261 上进行所有测试。我没有真正的设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T14:17:01.153

我现在实际上正在研究支付 SDK 示例。这就是我的做法......请注意，当 webworksready 事件被触发时，我的 initApp 函数会被调用。

在您的 index.html 中，您需要为此创建一个事件侦听器。在此事件触发之前，您无法访问任何本机 API。

```
<!-- Set the webworksready event handler -->
<head>
<script type="text/javascript">
    document.addEventListener("webworksready", initApp);
</script>
</head> 
```

然后，JavaScript 部分...

```
 /**
     *  called by the webworksready event when the environment is ready
     */
    function initApp() {
        // init payment service development mode
        try {
            blackberry.payment.developmentMode = true;
        } catch(e) {}
    }

function purchase() {
    console.log('purchasing');

    try {
        blackberry.payment.purchase({
            "digitalGoodID": "123",
            "digitalGoodSKU": "someSKU",
            "digitalGoodName": "SomeName",
            "metaData": "metadata",
            "purchaseAppName": "WebWorks APP",
            "purchaseAppIcon": null,
            "extraParameters": {
                "key1": "value1",
                "key2": "value2"
            }
        },
        onSuccess, onFailure);
    } catch (e) {
        alert("Error" + e);
    }
}

function onSuccess(purchasedItem) {
    console.log(purchasedItem)
}

function onFailure(error) {
    console.log(error);
} 
```

# wcf - WCF接收大字符串，获取异常

> ID：15527711
> 
> 赞同：0
> 
> 时间：2013-03-20T15:23:54.850
> 
> 标签：wcf, web-services

我浏览了所有关于这个的帖子，没有任何帮助，所以我发布了这个，因为我正在拔头发。

我有一个 WCF Web 服务，它有一个接收字符串的方法，一个长字符串。它适用于 2,390,158 个字符的字符串（尝试过），但不适用于大约 5,440,519 个字符的字符串。（我正在使用 VS 2010）

我有这个错误：

> System.ServiceModel.CommunicationException：接收 HTTP 响应 http://localhost:58014/WSWebService.asmx 时出错。原因可能是连接端点服务没有使用 HTTP 协议。这也可能是由于服务器忽略了 HTTP 请求上下文（可能是由于服务中断）。

我将所有可以使用的参数都放在 int.MaxValue (2,147,483,647) 中，但它仍然不起作用。任何帮助/建议都将不胜感激。

我删除了“超时”部分，但没有区别：

```
closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" 
```

这是我的 app.config 中的绑定：

```
<bindings>
    <basicHttpBinding>
        <binding name="WSWebServiceSoap" maxReceivedMessageSize="20971520"
            messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
            useDefaultWebProxy="true">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                    maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
      </basicHttpBinding>
</bindings> 
```

我的配置服务器端是：

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="WSWebServiceSoap" maxReceivedMessageSize="20971520"
       messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
       maxBufferSize="20971520" maxBufferPoolSize="20971520"
       useDefaultWebProxy="true">
        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
        <security mode="None">
          <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
          <message clientCredentialType="UserName" algorithmSuite="Default" />
        </security>
      </binding>
    </basicHttpBinding>
  </bindings>
</system.serviceModel> 
```

所以是的，相同的配置。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:29:02.627

服务是基于 ASMX 的，重做它纯 WCF，现在它可以工作了。

# java - Java && 中的 Bittorrent 实现需要一些关于 swarm 行为的信息

> ID：15527712
> 
> 赞同：19
> 
> 时间：2013-03-20T15:24:01.413
> 
> 标签：java, sockets, bittorrent

我正在用 Java 开发一个 bitTorrent 客户端。我知道网上有很多图书馆，但我无能为力；我想要我自己的。无论如何，我注意到一些奇怪的行为，也许你们知道我缺少的东西：

*   我尝试连接的所有对等方中约有 80% 导致连接不成功（`socketTimeOut`或者“无法连接”错误）。显然，对等点列表是从跟踪器接收到的。我还通过尝试 ping 随机测试了一些 IP；ping 通常是成功的。
*   当我连接时：
    *   握手后 50% 断开连接，
    *   在 30% 时，我注意到一个奇怪的行为：我收到握手，我收到 BitField（他们有所有片段），我被 +20 有消息轰炸（我检查了他们已经在 BitField 中提到的片段索引），然后他们断开连接，这很奇怪。

（对于所有统计数据，数字并不准确。）

一些 BitTorrent 问题：

**更新＃4：**由于考虑找到答案，我切断了一些问题

*   这是“80% 失败的连接率问题”：~~我 80% 的连接失败率可能是什么原因？这不可能是坏运气，因为我尝试连接的每个客户都没有更多空间给我了。我正在听 6881，但也用其他端口进行了测试。昨天我取得了巨大的成功，接受了一堆连接（相同的代码，过去一周进行了一些更改），消息开始流动......所以我的代码并不是完全没用。~~

*   Torrent 客户端是否在关闭之前向跟踪器发送最后一条消息，`event=stopped`以使其使用对等信息更新其内部数据库，以便它不会作为响应发送包含无用对等信息的列表？或者只是他们应该......因为看起来我真的收到了死去的同龄人。

*   接收到的对等点的顺序是否重要？也许完成百分比..或者真的是随机的。
*   此外，我时不时地收到一个端口为 0 的对等点，这使我的 Socket 构造函数抛出异常。端口 0 是什么意思？我可以在任何端口上联系它吗？
*   如果我尝试通信的 torrent 客户端将继续启动连接，我的 PeerId（我发送握手或向跟踪器宣布我自己）会影响吗？这意味着如果我通过使用“-AZ2060-”作为我的 ID 撒谎并说我是 Azureus 客户怎么办？
*   这是“吓跑同行的问题”：~~我的作品可用性会吓跑同行吗？我正在尝试连接，我发送了一个空位域（我没有碎片，`[length: 1][Id = 5][payload: {}]`）；似乎他们发送位域，我发送位域..（有些发疯了有消息），他们意识到我很穷，他们放弃了我..握手后断开连接。（真没礼貌。）~~
*   不使用经典端口间隔：6881 - 6889 有什么好处吗？
*   这是“不良同行问题列表”：~~洪流客户端是否在内部保留了不良对等点的列表（如黑名单）？有时在找到一个不错的对等点后，我会在测试中不断使用它的信息，但只接受了 1/3 的连接。有时必须经过 10 分钟才能再次成功连接。~~

**更新 #1：**似乎与 μTorrent 客户端的连接以上述模式运行（BITFIELD、HAVE 轰炸、关闭连接）。我用一堆 bitTorrent 客户端（μTorrent、BitTorrent、Vuze、BitComet、Deluge）在本地进行了测试，只在 μTorrent 上注意到了这种模式。在其他方面，沟通很好（HS、BITFIELD、UNCHOCE 和快乐的作品分享）。现在，这个 μTorrent 可能是最流行的 bitTorrent 客户端（启动的 6/8 连接是 μTorrent），所以……有什么想法吗？

**更新#2：**就保持 a 而言，`"bad list,"`它看起来确实如此（而且这样做实际上很有意义）。例如，使用 μTorrent，我注意到以下无连接间隔（30 秒、1 分钟、1 分钟 30 秒、2 分钟......）。“无连接”的意思是，在先前的连接结束后，`x`几秒钟内没有接受新的连接。

**更新#3：** HAVE 消息轰炸可能是所谓的“惰性位域”（进行了几次测试，HAVE 中提到的每个部分都没有出现在 BITFIELD 中）。我看到 μTorrent 和 BitTorrent 使用这种方法。

**另一个结论**：一些客户端在尊重 BitTorrent 规范方面更具限制性，如果您违反规则将关闭连接。**例如：**我在使用 BitTorrent 和 BitTornado 时注意到，如果您发送位域消息但没有片段，它们将关闭连接（没有片段 = 空位域.. 但规范说“这是可选的，如果客户端没有片段则不需要发送")，而其他人在发送 UNCHOKE 消息（甚至不感兴趣）之前发送任何类型的消息时会关闭连接。

**更新#4：** 由于我对第一个问题最感兴趣（我 80% 的连接失败率可能是什么原因？.. 被击中的问题可能更受欢迎），这里有一些解释为什么有时连接不成功：

1）如果我在停止前一个连接后不久开始与对等方的连接（通过停止 - 我的意思是关闭套接字）：另一端的对等方直到下一次读/写才会知道。

详细信息： - 我多次注意到这一点，完成下载后更明显.. 如果我关闭连接对等方直到它尝试发送新的 KEEP_ALIVE（约 2 分钟）才会意识到这一点。但是如果我在交换 REQUEST-PIECE 时关闭，对等点会很快意识到。在关闭连接后的第一个场景中，我仍然存在于 uTorrent 对等点选项卡中。如果我查看记录器选项卡，大约 2 分钟后，它会意识到我已经走了。

2）似乎uTorrent看到我的BITFIELD消息已损坏（并且显然应该在收到它后关闭连接）（这并不总是发生......我也检查并重新检查了，味精没问题并且与其他BT客户端没有这样的问题） .

详细信息： - 如果我查看 uTorrent 记录器选项卡，它会在我发送位域后立即显示“断开连接：错误数据包” - 我正计划尝试实现惰性位域，也许我可以逃避这个（我也看到大多数 BT客户这样做）

3）（很可能链接到＃1）当uTorrent不允许我重新连接时，我在记录器选项卡中看到：“断开连接：已经有相等的连接（删除了额外的连接）”。目前我选择随机本地端口启动新连接时（在大多数 BT 客户端中都实现了这一点），但这并没有欺骗它，他仍然看到我的“对等列表”中已经存在一个对等点（可能 ip 匹配）.. Buuut：在 30% 的测试中，在相同的情况下，它确实允许我重新连接:) .. 我还没有解释为什么

4）还有一件事：在您关闭 uTorrent 中的种子后，“传入连接的侦听器”似乎仍然存在（关闭我的意思是：右键单击 + 停止）。这意味着我仍然可以开始连接，发送 HANDSHAKE.. 在此之后，我断开连接（它不会返回 HANDSHAKE）。uTorrent 记录器中的消息：“断开连接：没有这样的 torrent：80FF40A75A3B907C0869B798781D97938CE146AE”，这个长字符串是我的信息哈希.. 在与其他 BT 客户端进行测试时也看到了这一点。

**更多信息**：

*   uTorrent 类型为 full-upload/partial-upload & full-download 的场景是成功的，partial-download 没有那么多.. 可能是由于#2
*   我仍然使用 uTorrent 得到 bitField + 有轰炸 + 关闭连接.. 因为我记得在记录器选项卡“断开连接：坏数据包”中相同的消息 .. 可能是由于 #2
*   除了 uTorrent，我还测试过：BitTorrent、BitTornado、BitComet、qBitTorrent、FlashGet（通信正常）和 Vuze、FrostWire、Shareaza（这些人非常好）。
*   并非所有客户端的行为都相同。例如：FlashGet 和 uTorrent（和 BitComet？）在您发送 INTERESTED 之前不要取消 .. 而其他人似乎在 BITFIELD 之后立即取消 .. 从这个意义上说，我计划以不同的方式对待客户（我真的认为这是必要的） .. 可能从位域猜测他们的名字（只有 2 个命名约定）并从那里开始.. 我已经实现了一些东西，这就是我知道我连接到 uTorrent 类型的客户端的方式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T00:58:57.967

好的，我有一个答案给你，但我必须警告你，我自己从来没有写过一个比特流客户端，有些答案可能不是 100% 准确，我写的只是我对比特流的全球观点的理解工作。因此，如果我浪费了您的时间，我深表歉意，但我仍然认为您可能会从我的回答中了解您所问问题的核心。

• 80% 的连接失败率可能是什么原因？

在一个线性解释中解释起来非常复杂，但是：-bit torrent 意识形态是针锋相对的 .. 如果你不给/有针锋相对，你就不会得到 tat.. 除非你刚开始下载，在这种情况下你可能会得到一个“捐赠”开始......或者另一边是一台专用的播种机......在这种情况下，他可能会检查你是一个给予者还是一个接受者......或者许多目前正在下载这个......或者（填写你的想法..）所以，你看到有很多，实际上非常聪明的机制来确保集群可以灵活和高效，虽然其中一些可以追踪到你的机器，但它们中的大多数甚至无法真正被监控由你的机器至少可以说在它的控制之下。

• Torrent 客户端是否在关闭之前向跟踪器发送最后一条消息，事件=已停止，以使其使用对等信息更新其内部数据库，以便它不会作为响应发送包含无用对等信息的列表？或者只是他们应该......因为看起来我真的收到了死去的同龄人。

*   这取决于客户端代码 - 有些可能会这样做，有些则不会......（继续阅读）

• 接收到的对等点的顺序是否重要？也许完成百分比..或者真的是随机的。

*   这取决于服务器代码 - 有些可能会这样做，有些则不会......（继续阅读）

好的，请注意这两个（继续阅读）注意事项.. 您应该记住，在 P2P 网络中，没有权限严格绑定客户端甚至服务器来维护协议的字面意思，即使协议规定了一些应该完成 - 这并不意味着每个客户都会实施它或在它或错过它时采取相同的行动。

•此外，我时不时地收到一个端口为 0 的对等点，这使我的 Socket 构造函数抛出异常。端口 0 是什么意思？我可以在任何端口上联系它吗？

*   端口 0 是一种通配符，如果您连接到它 - 它会自动将您连接到下一个可用端口。（有人说下一个可用端口高于 1023 - 但我从未测试过）

• 我的 PeerId（我发送握手或向跟踪器宣布我自己）是否会影响我尝试通信的 torrent 客户端是否会继续启动连接？这意味着如果我通过使用“-AZ2060-”作为我的 ID 撒谎并说我是 Azureus 客户怎么办？

它会认为你是 Azureus，如果其他 Azureuses 以此促进与 Azureuses 的连接（如果有的话，那就大了）你将从中受益。

•我的作品可用性会吓跑同行吗？我正在尝试连接，我发送了一个空位域（我没有片段，[length: 1][Id = 5][payload: {}]）；似乎他们发送位域，我发送位域..（有些发疯了有消息），他们意识到我很穷，他们放弃了我..握手后断开连接。（真没礼貌。）

*   可能的..

• 不使用经典端口间隔：6881 - 6889 有什么好处吗？

*   我不这么认为-除非可能使您的 ISP 感到困惑..

• torrent 客户端是否在内部保留了不良对等点列表（如黑名单）？有时在找到一个不错的对等点后，我会在测试中不断使用它的信息，但只接受了 1/3 的连接。有时必须经过 10 分钟才能再次成功连接。

*   取决于客户代码。

概括

这是一个丛林——每个人都可以编写自己的逻辑，只要他发送正确的协议命令——你的问题集中在客户端的逻辑行为上，但没有你现在可能理解的共同点，这也是位洪流，可能是其成功的主要原因。

# python-2.7 - 如何计算 Selenium Python 中元素的属性数？

> ID：15527715
> 
> 赞同：3
> 
> 时间：2013-03-20T15:24:21.050
> 
> 标签：python-2.7, selenium-webdriver

具有以下 HTML 代码：

```
<span class="warning" id ="warning">WARNING:</span> 
```

对于 XPATH 可访问的对象：

```
.//*[@id='unlink']/table/tbody/tr[1]/td/span 
```

如何通过 Selenium WebDriver + Python 2.7 计算其属性（*class、id*），而不知道它们的名称？

我期待像count = 2这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:23:13.920

知道了！这应该适用于 div、span、img、p 和许多其他基本元素。

```
element = driver.find_element_by_xpath(xpath) #Locate the element.

outerHTML = element.get_attribute("outerHTML") #Get its HTML
innerHTML = element.get_attribute("innerHTML") #See where its inner content starts

if len(innerHTML) > 0: # Let's make this work for input as well
    innerHTML = innerHTML.strip() # Strip whitespace around inner content
    toTrim = outerHTML.index(innerHTML) # Get the index of the first part, before the inner content
    # In case of moste elements, this is what we care about
    rightString = outerHTML[:toTrim]
else:
    # We seem to have something like <input class="bla" name="blabla"> which is good
    rightString = outerHTML
# Ie: <span class="something" id="somethingelse">

strippedString = rightString.strip() # Remove whitespace, if any
rightTrimmedString = strippedString.rstrip('<>') #
leftTrimmedString = rightTrimmedString.lstrip('</>') # Remove the <, >, /, chars.
rawAttributeArray = leftTrimmedString.split(' ') # Create an array of:
# [span, id = "something", class="somethingelse"]

curatedAttributeArray = [] # This is where we put the good values
iterations = len(rawAttributeArray)

for x in range(iterations):
    if "=" in rawAttributeArray[x]: #We want the attribute="..." pairs
        curatedAttributeArray.append(rawAttributeArray[x]) # and add them to a list

numberOfAttributes = len(curatedAttributeArray) #Let's see what we got
print numberOfAttributes # There we go 
```

我希望这有帮助。

谢谢，R。

PS 这可以进一步增强，例如将空格与 <、> 或 / 一起剥离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T06:45:01.783

这并不容易。

每个元素都有一系列隐含的属性以及明确定义的属性（例如选择、禁用等）。因此，我能想到的唯一方法是获取对父级的引用，然后使用 JavaScript 执行器来获取 innerHTML：

```
document.getElementById('{ID of element}').innerHTML 
```

然后，您必须解析 innerHTML 返回的内容以提取单个元素，然后一旦隔离了您感兴趣的元素，您将再次解析该元素以提取属性列表。

# r - 在 R 中导入和 rbind 多个具有通用名称的 csv 文件

> ID：15527720
> 
> 赞同：4
> 
> 时间：2013-03-20T15:24:26.143
> 
> 标签：r, dataframe, rbind

我有多个 CSV 文件，它们的名称中有 4 个常用字符。我想知道如何 rbind 具有相同公共字符的文件。例如，“AM-25”在 3 个 csv 文件的名称中很常见，“BA-35”在另外 2 个文件的名称中很常见。

这些文件就像这样 AM-25.myfiles.2000.csv、AM-25.myfiles.2001.csv、AM-25.myfiles.2002.csv、BA-35.myfiles.2000.csv、BA-35.myfiles .2001.csv，我用它来读取所有文件：

```
files <- list.files(path=".", pattern="xyz+.csv", all.files = FALSE,full.names=TRUE ) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:00:54.603

你在寻找这样的东西吗？

```
do.call(rbind, lapply(list.files(path=".", pattern="AM-25"), read.table, header=TRUE, sep=",")) 
```

这将从包含字符“AM-25”的 csv 文件中读取的矩阵重新绑定在一起。的参数`read.table`可能会有所不同，具体取决于您的 csv 文件。

* * *

**编辑**

我希望这适用于您不知道目录中所有可能的文件名的五个字母前缀的情况：

```
##Get all different first five letter strings for all cvs files in directory "."                                                                                                                                                                                           
file.prefixes <- unique(sapply(list.files(path=".", pattern="*.csv"), substr, 1,5))

##Group all matching file names according to file.prefixes into a list                                                                                                                                                                                                     
file.list <- lapply(file.prefixes, function(x)list.files(pattern=paste("^",x,".*.csv",sep=""), path="."))
names(file.list) <- file.prefixes ##just for convenience                                                                                                                                                                                                                   

##parse all csv files in file.list, create a list of lists containing all tables for each prefix                                                                                                                                                                           
tables <- lapply(file.list, function(filenames)lapply(filenames, function(file)read.table(file, header=TRUE)))

##for each prefix, rbind the tables. Result is a list of length being length(file.prefixes)                                                                                                                                                                                
##  each containing a matrix with the combined data parsed from the files that match the prefix                                                                                                                                                                            
joined.tables <- lapply(tables, function(t)do.call(rbind, t))

##Save tables to files                                                                                                                                                                                                                                                     
for (prefix in names(joined.tables))write.table(joined.tables[[prefix]], paste(prefix, ".csv", sep="")) 
```

# c++ - 宏中的 C++ 连接

> ID：15527721
> 
> 赞同：1
> 
> 时间：2013-03-20T15:24:26.950
> 
> 标签：c++, c-preprocessor, stringification

我有以下一组宏（我从[如何在字符串中使用编译时间常数 __LINE__](https://stackoverflow.com/questions/2670816/how-can-i-use-the-compile-time-constant-line-in-a-string)的第一个答案中得到）定义了一个宏“LOCATION_PREFIX”，我可以用它来“捕获”一行代码的位置（将传递给将执行日志记录的其他函数）。

```
#define STRINGIZE(f,l) STRINGIZE2(f) "(" STRINGIZE2(l)"):"
#define STRINGIZE2(x) #x
#define LOCATION_PREFIX STRINGIZE(__FILE__, __LINE__)

int main(){

printf("%s here\n", LOCATION_PREFIX);
printf("%s over here\n", LOCATION_PREFIX);

return 1;
} 
```

输出：

> “t.cpp”(8)：这里
> “t.cpp”(9)：这里

我希望输出为：

> t.cpp(8)：这里
> t.cpp(9)：这里

任何帮助是极大的赞赏 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:30:22.173

您不需要第一次`STRINGIZE2`调用，因为文件名已经是带引号的字符串：

```
#define STRINGIZE(f,l) f "(" STRINGIZE2(l) "):"
#define STRINGIZE2(x) #x
#define LOCATION_PREFIX STRINGIZE(__FILE__, __LINE__)

int main(){
  printf("%s here\n", LOCATION_PREFIX);
  printf("%s over here\n", LOCATION_PREFIX);

  return 1;
} 
```

# javascript - NodeJS - 如何将变量发送到嵌套回调？（MongoDB 查找查询）

> ID：15527722
> 
> 赞同：5
> 
> 时间：2013-03-20T15:24:32.813
> 
> 标签：javascript, node.js, function, mongodb, callback

我想在另一个结果集中使用查找查询的结果集。我无法用英语很好地解释这种情况。我会尝试使用一些代码。

```
People.find( { name: 'John'}, function( error, allJohns ){
    for( var i in allJohns ){
        var currentJohn = allJohns[i];
        Animals.find( { name: allJohns[i].petName }, allJohnsPets ){
            var t = 1;
            for( var j in allJohnsPets ){
                console.log( "PET NUMBER ", t, " = " currentJohn.name, currentJohn.surname, allJohnsPets[j].name );
                t++;
            }
        }
    }
}); 
```

首先，我找到所有**名为**John 的人。然后我把那些人当作**allJohns**。

**其次，我在不同的查找**查询中一一获取每个约翰的所有宠物。

在第二次回调中，我再次将每只宠物都拿到了。但是当我想显示哪个 John 是他们的所有者时，我总是得到同一个 John。

所以，问题是：我怎样才能将每个 John 分别发送到第二个嵌套回调，并且他们将作为真正的所有者和宠物在一起。

我需要复制每个约翰，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:32:50.557

Javascript 没有块作用域，只有函数作用域。而不是`for .. in ..`， using`forEach`将为每个循环创建一个新范围：

```
People.find( { name: 'John'}, function( error, allJohns ){
  allJohns.forEach(function(currentJohn) { 
    Animals.find( { name: currentJohn.petName }, function(err, allJohnsPets) { 
      allJohnsPets.forEach(function(pet, t) { 
        console.log( "PET NUMBER ", t + 1, " = ", currentJohn.name, currentJohn.surname, pet.name );
      });
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:36:20.790

您必须更加关注异步性质。

```
People.find( { name: 'John'}, function( error, allJohns ){
    for( var i=0; i<allJohns.length; i++ ){
     (function(currJohn){
         var currentJohn = currJohn;
         Animals.find( { name: currentJohn.petName }, function(error, allJohnsPets){

             for(var j=0; j<allJohnsPets.length; j++){
       console.log( "PET NUMBER ", (j+1), " = " currentJohn.name, currentJohn.surname, allJohnsPets[j].name );
             }
          })

      })(allJohns[i]);
    }
}); 
```

# android - 错误android SurfaceFlinger

> ID：15527726
> 
> 赞同：7
> 
> 时间：2013-03-20T15:24:44.730
> 
> 标签：android, surfaceflinger

我有这个错误信息：

SurfaceFlinger 半透明=0 isOpaque=1 isExternalDisplayLayer=0 isExternalBlockLayer0

我正在使用安卓 4.1.1

我无法说出我的代码的哪一部分正在生成此消息

我想知道是否有人有相同的信息，它的含义以及解决此问题的潜在方法

问题。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-26T12:00:03.343

我也收到此错误。我相信这与三星的 TouchWiz 有关，而不是您的代码的一部分，您是否在三星设备上运行它？

# facebook-graph-api - 使用应用访问令牌访问 Facebook 页面状态

> ID：15527729
> 
> 赞同：1
> 
> 时间：2013-03-20T15:24:51.823
> 
> 标签：facebook-graph-api, oauth, facebook-oauth

阅读 API 文档（[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)）我假设为了阅读公共页面状态更新，我需要“任何有效的 access_token 或用户 access_token”（引用这里的文档）。

但是，如果我尝试使用我的应用访问令牌获取*公共*页面的状态更新，我会收到以下响应：“请求此资源需要用户访问令牌”

`GET 20531316728/statuses?access_token=myappaccesstoken`

所以，我的问题是，如果文档完全错误，我做错了什么还是*什么*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:11:39.460

Facebook [1] 需要做出澄清。文档要么已经过时，要么 Facebook 改变了处理这些更新的想法，这很有趣

```
GET /PAGE_ID/feed?access_token=myappaccesstoken 
```

工作（并拥有所有状态）。IRC #facebook 中的某个人告诉我，状态调用可能更贵（对这个想法不太买账）。

我目前的立场是

*   任何有效的 access_token 或用户 access_token 都应该暗示那些不包括应用程序令牌的人
*   Facebook 意识到，当 Facebook 需要某种形式的身份验证时，可以通过在页面上使用应用令牌来绕过 OAuth 流程。

最后，这些都是假设。

我无法从任何 Facebook 员工那里得到明确的答案，这是否确实是一个错误或有意删除此功能。

[1] - [http://developers.facebook.com/bugs/480742545315442](http://developers.facebook.com/bugs/480742545315442)

# formula - 如何创建将数字添加到多位数字中的特定数字的excel公式

> ID：15527730
> 
> 赞同：0
> 
> 时间：2013-03-20T15:24:53.357
> 
> 标签：formula

例如：我在一个单元格中输入数字 9876543210。我想创建一个 if then 公式来添加一个序列号，但只从最后一个数字开始工作。本例中的零。

如果最后一位数字 >= 到 3，则添加 5 如果最后一位数字 <=2，则添加 15。

然后让这个公式重复 10 个数字 - 这可能吗？所以我输入 9876543210 然后显示：9876543225 9876543230 9876543245

等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:08:33.203

=IF((右(A1,1)/1)>2,A1+5,A1+15)

假设您更新单元格 A1 中的数字。将上面的公式粘贴到A2中并向下复制粘贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:30:05.543

如果这是 Excel，您可能希望使用 MOD（模数或余数）函数来获取最后一位数字，然后执行 IF-THEN 或嵌套 IF-THEN 来实现此目的。

```
=IF(MOD(A1,10)=3, A1+15, IF(MOD(A1,10)=5, A1+20, A1+30)) 
```

此公式转换为以下决策树：

```
IF the last digit of the value in cell A3 is 3 Then
    Add 15 to it
ELSEIF the last digit of the value in cell A3 is 5 then
   Add 20 to it
ELSE
    Add 30 to it
END IF 
```

重复该操作可能需要一些 VBA。如果您已经知道需要重复操作的次数，则可以在后续行/列中预填充公式，每次参考前一个单元格。例如，如果你想重复 5 次，你应该计算前两个单元格的差异，然后像这样将该差异添加到前一行/列的值（假设 A1 具有原始值，B1 具有公式 I上面发布的 C1 到 G1 是接下来的 5 个单元格）：

在 C1 中：`=B1 + ($B1 - $A1)`

在 D1 中：`=C1 + ($B1 - $A1)`

等等...

请注意在这些公式中使用绝对地址和相对地址。您可以将 C1 中的公式复制/粘贴到后续单元格，它会自动调整自身以引用前一个单元格。

**编辑**

我刚刚意识到您想在每个后续单元格中评估 MOD 公式。在这种情况下，您只需将其复制/粘贴到后续单元格，而不是使用我在上面发布的第二个和第三个公式。

# ios - 是否可以？相机接口 ios

> ID：15527736
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:25:07.207
> 
> 标签：ios, camera

我想在应用程序中实现一个功能，当用户通过应用程序拍照时，他在屏幕上看到的是：

1.  普通取景器，显示用户将捕获的图像
2.  一个额外的层，不完全透明，可能是 0.4 的 alpha。该层由面部轮廓组成。这样用户就可以将他的图像与轮廓对齐。

在此之后，当用户拍照时，所有应用程序所做的只是显示带有动画身体的面部（轮廓内的部分图片）。我不确定是否可以添加额外的层（第 2 点）。

同样，轮廓是面部轮廓并不重要，可以是人体轮廓，也可以是树或任何东西的轮廓。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:29:59.680

尝试一点谷歌。您正在寻找[叠加层。](https://www.google.com/search?q=ios%20camera%20api%20overlay)

# ruby-on-rails - 覆盖 ActiveRecord 模型并定义新的 attr_accessible 时，如何在不重复的情况下添加？

> ID：15527740
> 
> 赞同：4
> 
> 时间：2013-03-20T15:25:09.283
> 
> 标签：ruby-on-rails, activerecord, overriding, rails-engines

当我使用 Rails 引擎并希望覆盖并添加其行为时，我遇到了以下问题：

假设引擎有一个名为 Course 的 ActiveRecord 模型

```
module MyEngine
  class Course < ActiveRecord::Base

    attr_accessible :name, :description, :price

  end
end 
```

我想在我的主要 Rails 应用程序中创建一个迁移，向其中添加一列，我需要将该新列添加到 attr_accessible （以便可以批量分配）

```
MyEngine::Course.class_eval do
  attr_accessible :expiration_date
end 
```

但是随后 Rails 抱怨前 3 个属性不是 Mass-Assignable，因此我必须重新声明被覆盖类中的所有属性，而不是仅仅将新属性“添加”到覆盖中，例如：

```
MyEngine::Course.class_eval do 
  attr_accessible :name, :description, :price, :expiration_date
end 
```

有没有更好的方法不重新声明这些属性，而只是添加新属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:59:23.800

通过查看源代码：

```
# File activemodel/lib/active_model/mass_assignment_security.rb, line 174
def attr_accessible(*args)
  options = args.extract_options!
  role = options[:as] || :default

  self._accessible_attributes = accessible_attributes_configs.dup

  Array.wrap(role).each do |name|
    self._accessible_attributes[name] = self.accessible_attributes(name) + args
  end

  self._active_authorizer = self._accessible_attributes
end 
```

您可以尝试使用其中一种内部数据结构来恢复已定义的属性，这样您就不会重复代码，或者您可以破解自己的方式并创建一个新方法，让您“附加”值到attr_accessible。但是还没有为此编写代码。

# python - Python指定IP格式作为输入

> ID：15527744
> 
> 赞同：0
> 
> 时间：2013-03-20T15:25:14.203
> 
> 标签：python, input, python-3.x, ip-address

我正在编写一个简单的客户端和服务器，并想引入一些简单的边界检查以确保用户输入的 IP 地址格式正确，即（int.int.int.int），有没有人对此有任何建议可以在我的代码只接受该值的那一刻完成，如果它无效，将引发操作系统错误。但我想阻止用户在这里输入任何内容。

```
 def ipEntered():
          global ipEntered
          ipEntered = input("Please enter the ip address of the server you wish to connect with:") 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:29:56.733

使用[`ipaddress`模块](http://docs.python.org/3/library/ipaddress)（在 Python 3.3 中引入）：

```
import ipaddress

def ipEntered():
    while True:
        try:
            val = input("Please enter the ip address of the server you wish to connect with:")
            return ipaddress.ip_address(val)
        except ValueError:
            print("Not a valid IP address") 
```

它将接受形式的 IPv4 地址`"100.200.30.40"`，例如点分四边形，以及速记形式（8 组 4 个十六进制字符由 分隔`:`）和速记形式的 IPv6 地址。

如果您只想接受 IPv4 地址，请`return ipaddress.IPv4Address(val)`改用。

# php - 在正或负个位数之前添加前导零

> ID：15527745
> 
> 赞同：1
> 
> 时间：2013-03-20T15:25:21.737
> 
> 标签：php

我尝试了我在[这里](https://stackoverflow.com/questions/5659042/php-prepend-leading-zero-before-single-digit-number-on-the-fly)找到的接受的答案，但如果数字像 -9、-8、-7 等，接受的答案不会添加前导零。

如果一个数字在这两种情况下都是单个数字，如果是正数或负数，我想附加一个零，

```
+9 => +09
-9 => -09 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:30:42.793

```
echo sprintf('%+03d', $number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:34:33.327

你可以做这样的事情

```
function addZero($number)

   switch(strLen($number)) {

      case 1:
          return "0" . $number;
          break;

      case 2:
          if (substr($number, 0) == "-") return "-0" . substr($number, 1);
          break;

   }

   return $number

} 
```

# sql-server - 如何使用 sqlalchemy 连接到同一 SQL Server 上的多个数据库？

> ID：15527746
> 
> 赞同：1
> 
> 时间：2013-03-20T15:25:24.670
> 
> 标签：sql-server, sqlalchemy

我可以指定连接开始的默认数据库，但是是否可以在创建引擎时、创建引擎之后或（最好）在创建单个会话时切换数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:01:50.303

创建引擎时指定数据库。听起来您需要创建另一个引擎，然后从中获得一个会话。如果你真的想要和/或需要你可以使用一个函数，这样你就可以传递要连接到哪个数据库，然后让它返回一个引擎和/或会话。

# c++ - 使用 libEvent 的高性能服务器

> ID：15527753
> 
> 赞同：4
> 
> 时间：2013-03-20T15:25:48.117
> 
> 标签：c++, libevent

我正在设计一个高性能服务器（不是 HTTP 服务器）并且正在考虑我的设计选项。服务器应支持大量传入连接（以千计），并在 windows 和 linux 上编译。

在 Windows 端，我已经实现了一个 IO 完成端口服务器，到目前为止它似乎可以处理压力。由于 linux 需求突然出现，我现在尝试找到一个跨平台库，它可以让我通过线程池使用接受/读取事件。

到目前为止，libEvent 似乎是正确的选择（类似于此[链接](http://www.wangafu.net/~nickm/libevent-book/Ref8_listener.html)中的“示例代码：回显服务器” ）。但是从[libEvent 文档中的另一个页面](http://www.wangafu.net/~nickm/libevent-book/Ref2_eventbase.html)引用：

> 如果将 event_base 设置为使用锁定，则在多个线程之间访问它是安全的。但是，它的循环只能在单个线程中运行。如果要让多个线程轮询 IO，则需要为每个线程设置一个 event_base。

我的基本设计是让线程池对接受和读取事件做出反应。如果我理解正确的话，这句话说我不能那样做。

有没有人有过高性能的经验。基于 libEvent 的服务器？我应该使用不同的库吗？

这种服务器的示例代码将是完美的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:29:48.597

`libevent`如果您想保持跨平台，这是要走的路。

如果你想要高效，我会推荐平台特定的 API，比如 IO 完成端口（你在 Windows 上工作）和Linux 中的[epoll ：](http://linux.die.net/man/4/epoll)

请注意，无论如何，libevent 在 Linux 内部都使用 epoll。

至于您的多线程设计问题，我希望您不要使用一个线程来处理每个传入的客户端连接......如果您这样做了，您将违背使用事件驱动模型的目的！您应该设计您的代码，以便少数客户端连接由单个线程处理，并随着并发连接数的增加而增加线程数。

我也不会对客户端在执行 IO 接收数据的线程池中发送的数据进行任何繁重的计算工作。我会将执行网络密集型 IO 和执行任何 CPU 密集型计算的任务分成两个单独的线程池

# php - 列比较（上）

> ID：15527754
> 
> 赞同：1
> 
> 时间：2013-03-20T15:25:48.450
> 
> 标签：php, symfony, dql

我对 Symfony 很陌生，我想知道如何继续将列与字符串进行比较。

我在存储库中使用 QueryBuilder。MySQL 中等效的 WHERE 子句是：

```
WHERE UPPER(a.name) = UPPER(my_app_var) 
```

```
class ApplicationRepository extends EntityRepository
{
    public function existsByName($name, $caseSensitive = false)
    {
        $builder = $this->createQueryBuilder('a');

        if ($caseSensitive)
        {
            $builder->where($builder->expr()->eq('a.name', $name));
        }
        else
        { 
            $builder->where($builder->expr()->eq('a.name', $builder->expr()->upper($name)));
        }

        return count($builder->getQuery()->getResult()) != 0; 
    }
} 
```

Symfony 返回一个语法错误：

> 查询异常：`SELECT a FROM Application a WHERE a.name = UPPER(my_var_app)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:16:35.923

您需要将最终变量包含在 '' （单引号）中以进行上调用。您还需要 "" （双引号）进行变量插值

```
 $builder->where($builder->expr()
                   ->eq('a.name'
                        ,$builder->expr()
                         ->upper("'$name'")));   //// here 
```

# r - ggplot2 命名空间问题

> ID：15527755
> 
> 赞同：2
> 
> 时间：2013-03-20T15:25:51.717
> 
> 标签：r, ggplot2

所以我正在阅读[这篇论文](http://elife.elifesciences.org/content/2/e00638.full-text.pdf)，关于如何在 y 上回归 x 并没有给你一条与回归 y~x 等效的线（长话短说，你在每种情况下都在最小化不同的残差），我想我会看看是否对我的数据有任何影响。不幸的是，我无法让 ggplot2 的 stat_smooth 在 y 上回归 x。

这是我的数据中的 100 行示例：

```
> dput(df)
structure(list(Sample1 = c(4.98960685567417, 3.47204999768371, 
-1.02623042506767, -3.32192809488736, 4.92376518190495, 5.18057364383907, 
3.37344268231229, 7.17221940674516, -1.53797027495265, 4.59078735278587, 
-3.32192809488736, 4.13323387842297, -3.32192809488736, 1.55320685650568, 
3.45928530433997, 6.52941436696241, 0.291721646202104, 1.34692630168789, 
2.588263571484, 7.93984265473926, -1.02623042506767, -3.32192809488736, 
5.97393529545249, 4.96272548511184, -3.32192809488736, 3.19245860152084, 
-0.181177668537811, 1.1702151401323, 7.19741957077731, -3.32192809488736, 
3.09679962523049, 6.89612648849508, 4.49710160528899, 2.90303096540262, 
2.44022334122376, 4.53409217014818, 4.7590708357255, 4.72481633684295, 
0.691615956272056, 3.49724548154186, 3.31795986458613, 5.83755830779617, 
4.36304299927157, -0.0295430166578704, 5.02251917128349, 7.38120720286448, 
2.00357119131309, 3.28216732938001, 4.78231786359764, -0.764299371525642, 
3.92619319211129, 0.0406883788967327, 2.85511116340049, 5.66764040870341, 
1.5770354481397, 6.94329764296121, 3.9308239558015, 5.74724483501107, 
5.88247371232242, 3.60547757169518, -3.32192809488736, -0.542695575918393, 
5.28191680995643, 2.77496647475118, -1.34650507208309, -2.74783703944563, 
6.41591061993452, 3.7539739823111, 2.49127670210767, 6.65016370221803, 
6.32032425410637, -3.32192809488736, 0.402556327534611, 2.34628748804301, 
0.89488462084739, 1.1702151401323, -3.32192809488736, 4.72748036766425, 
5.61681844161155, 2.03831731682591, -0.443475473403791, -2.74783703944563, 
-3.32192809488736, 4.10482914538061, 5.3663866285164, 2.15373368651261, 
-3.32192809488736, 5.45745992658215, -0.764299371525642, 1.69060972560112, 
0.171658206055067, 4.46553470954628, 4.93993527938277, 2.23086351589855, 
0.2329385503416, 6.14110973873979, -0.443475473403791, -3.32192809488736, 
4.16502606126426, 5.45906373012262), Sample2 = c(4.87035389289972, 
3.05631305243025, 0.82323632916493, -2.4296633454796, 4.91811337313532, 
5.03007694504678, 3.33859900165761, 6.54820168349871, -2.4296633454796, 
4.86188407042978, -3.32192809488736, 4.62717002820498, -1.67106299528127, 
-3.32192809488736, 2.98790308889454, 6.05226752694174, 0.596977520519267, 
1.99826710332906, 2.23966464285132, 8.01717854320643, -0.00159952300352469, 
-1.48670630366969, 5.43594909921552, 4.95640818811881, -3.32192809488736, 
4.90168009665292, 0.555561013584398, 2.27836717662796, 6.47511546712932, 
-3.32192809488736, 3.01870866264235, 2.08814992134377, 3.65522335205242, 
3.36281234142216, 1.68917367193269, 3.90649842473784, 4.95242469001903, 
4.78780929337046, 3.21768687367553, 3.85621590296538, 3.41005295130021, 
5.53250156756501, 3.7175760684724, 0.676405696816667, 5.14971539956163, 
6.98398467911331, 3.3567969981478, 3.88157621603906, 4.90168009665292, 
-0.0647853872737311, 4.55018561922281, 1.21774415322831, 2.60706104004096, 
5.87421631057342, 2.22652958465421, 7.02865467720292, 3.39838702576746, 
5.19424993242169, 5.32786325515541, 2.67632233586628, -2.80788789937207, 
0.172877949731557, 4.84264318258294, 2.7144567398541, -0.00159952300352469, 
-1.17646253367489, 6.33756586506636, 3.68433673855881, 2.62719159116047, 
6.51076754571708, 6.31214443849056, -1.88247779017497, 0.714537926272974, 
3.17045554987033, 0.32851270527504, 9.05953630113146, -2.80788789937207, 
4.36480327392371, 5.88366056411048, 1.63054822649657, 2.01364185790907, 
-1.04323142745032, -2.80788789937207, 2.88298417549747, 5.60661313436485, 
1.9024101424183, -0.516096487844633, 5.42017137768702, -0.921270583844273, 
2.36482913745982, 2.46888455306976, 4.55807157102875, 5.01105219152827, 
1.19094552584428, 0.987970258058337, 5.55106017924769, 2.15899824583894, 
-3.32192809488736, 3.92287721859118, 5.06185416274169)), .Names = c("Sample1", 
"Sample2"), class = "data.frame", row.names = c(NA, -100L)) 
```

当我尝试使用 ggplot2 进行绘图时，我可以轻松地将回归 y 放在绘图上的 x 上：

```
> ggplot(df, aes(x=Sample1,y=Sample2)) + geom_point() + stat_smooth(formula = y~x, method = "lm") 
```

但是，如果我尝试在公式中使用其他任何内容，则会出现找不到对象错误：

```
> ggplot(df, aes(x=Sample1,y=Sample2)) + geom_point() + stat_smooth(formula = y~x, method = "lm") +  stat_smooth(formula = x~y, method = "lm")
Error in eval(expr, envir, enclos) : object 'y' not found 
```

我尝试使用原始列名（Sample1 和 Sample2）而不是 x 和 y，并给出`stat_smooth`它自己的 aes，都给出了相同的错误。

我认为这是一个名称空间错误：公式正在以某种方式在错误的环境中进行评估，但我不知道为什么一个有效而另一个无效，或者如何解决这个问题。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:45:39.337

一种解决方法是`aes()`在更平滑的调用中使用另一个调用来切换`x`和`y`：

```
ggplot(df, aes(x=Sample1,y=Sample2)) + 
    geom_point() + 
    stat_smooth(method="lm") + 
    stat_smooth(aes(x=Sample2,y=Sample1), method="lm") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:45:45.493

您需要考虑`stat_smooth(formula = x~y, method = "lm")`在您尝试绘制的情节的背景下正在做什么。

错误很可能出现，因为当在公式解析代码中进行评估时， （在错误情况下）`formula`右侧命名的变量**不在****ggplot**内部定义的数据集中，对应于 x 轴剧情。必须隔离变量数据并仅从该数据对象中查找变量。`~``y`****`ggplot``x`****

 ****现在回到考虑你的情节。`x`您在 x 轴和`y`y 轴上绘制了一个绘图。的线性模型`x ~ y`在相反的“轴”上具有数据向量。所以从语法的角度来看，你给出的定义没有意义。我想我想说的是，公式的右侧只能包含`x`或 的函数`x`，因为这就是内部可用的全部内容。

如果您想这样做，请为自己添加回归线`x ~ y`，例如：

```
mod <- lm(Sample1 ~ Sample2, data = df)
pdat <- with(df, data.frame(Sample2= seq(min(Sample2), max(Sample2), 
                                         length = 100)))
pdat <- transform(pdat, Sample1 = predict(mod, newdata = pdat))

ggplot(df, aes(x=Sample1,y=Sample2)) + 
  geom_point() + 
  stat_smooth(formula = y~x, method = "lm") +
  geom_line(data = pdat, aes(x = Sample1, y = Sample2)) 
```

您可以使用 来添加置信区间，`geom_ribbon()`并使用 的`interval = "confidence"`参数来计算它`predict.lm`。您需要修改

```
pdat <- transform(pdat, Sample1 = predict(mod, newdata = pdat)) 
```

以适应这一点，但这留给读者作为练习。****

# php - PHPUnit 存根连续调用

> ID：15527756
> 
> 赞同：0
> 
> 时间：2013-03-20T15:25:51.797
> 
> 标签：php, unit-testing, mocking

我遇到了一个类的问题，它返回不可预测的值，并对调用该函数的方法进行单元测试。所以我要改变一个方法的返回。

我无法模拟该方法，因为我无法创建实例。这是一个例子：

```
// Class called MyClass
public function doSomething(){
    $foo = new Foo();
    $bar = $foo->getSomethingUnpredictable();

    // Doing something with $bar and saves the result in $foobar.
    // The result is predictable if I know what $foo is.

    return $forbar;
}

// The test class
public function testDoSomething{
    $myClass = new MyClass();
    when("Foo::getSomethingUnpredictable()")->thenReturns("Foo");

    // Foo::testDoSomething is now predictable and I am able to create a assertEquals
    $this->assertEquals("fOO", $this->doSomething());
} 
```

我可能会检查 Foo::testDoSomething 在单元测试中返回的内容，然后计算结果，但 testDoSomething 与 doSomething 的区别很小。我也无法检查其他值会发生什么。
doSomething 不能有任何参数，因为使用了可变参数（所以我无法添加最佳参数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:00:05.663

这就是硬连线依赖关系不好的原因，在其当前状态下`doSomething`是不可测试的。你应该这样重构`MyClass`：

```
public function setFoo(Foo $foo)
{
    $this->foo = $foo;
}
public function getFoo()
{
    if ($this->foo === null) {
        $this->foo = new Foo();
    }
    return $this->foo;
}
public function doSomething(){
    $foo = $this->getFoo();
    $bar = $foo->getSomethingUnpredictable();

    // Doing something with $bar and saves the result in $foobar.
    // The result is predictable if I know what $foo is.

    return $forbar;
} 
```

然后您将能够注入您的模拟`Foo`实例：

```
$myClass->setFoo($mock);
$actualResult = $myClass->doSomething(); 
```

至于如何存根方法，这取决于您的测试框架。因为这个 ( `when("Foo::getSomethingUnpredictable()")->thenReturns("Foo");`) 不是 PHPUnit。

# ios - 平移手势坐标

> ID：15527757
> 
> 赞同：0
> 
> 时间：2013-03-20T15:25:52.137
> 
> 标签：ios, objective-c, uipangesturerecognizer

我已向`UILabel`包含数字的 a 添加了平移手势。当用户向上或向下平移时，我希望数字向上/向下。我的工作正常 - 平移 24 个坐标将数字减少 24，等等。

我现在需要做的是使数字仅以 20 个坐标的间隔递增 - 因此，当坐标在 50 和 70 之间时，数字会增加 50，当坐标在 100 和 120 之间时， number 增加 100，依此类推。

`if/else`如果不为每个案例添加一棵巨大的树，我怎么能做到这一点？我确信有一种非常简单的方法可以做到这一点，也许使用`for`循环，但我疲惫的大脑似乎无法将它的头绕在它周围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:34:19.107

一些基本的数学和修剪精度怎么样。

```
static NSInteger BasicNormalize(CGFloat input, CGFloat interval)
{
  NSInteger units = (input + interval / 2.f) / interval;
  return units * interval;
} 
```

通过添加一半的间隔开始，您可以获得一些基本的舍入。例如 9 轮到 0 和 11 轮到 20

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:34:32.267

您可以标准化该值。试试这个代码：

```
 CGPoint loc = [sender locationInView:self];

        int y = (int)loc.y / 20;
        y = y * 20;
        myValue += y; 
```

# paypal - DoDirectPay 的 PayPal 沙盒 API 凭证

> ID：15527763
> 
> 赞同：0
> 
> 时间：2013-03-20T15:26:07.573
> 
> 标签：paypal, paypal-sandbox

我正在尝试在 PayPal Sandbox 中设置一个测试平台，以便为我的公司实施/测试 DoDirectPay API。DoDirectPay 根据文档以及[此处的示例代码片段使用证书文件（而不是签名）](https://www.x.com/paypal-apis-dodirectpayment-php-5.3/soap)

根据“下载 api 证书 paypal”的顶部 Google 搜索[结果](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/apicertificates)，应该可以在获取签名或下载证书之间进行选择。

我为沙盒创建的测试商家帐户已正确实例化；我可以毫无问题地登录沙盒站点。我已经确认商家帐户确实是为 PayPal Pro 设置的。当我继续到 Account->Profile->Request API Credentials 时，唯一的选择是获取签名。签名与沙盒管理面板中为用户显示的内容相匹配；但这对我来说没用，因为我需要测试需要 PEM 格式的证书文件的 DoDirectPay。

我怎样才能让 SandBox 吐出一个证书文件让我测试 DoDirectPay API？

PS - 我已经浏览了包括[SO1](https://stackoverflow.com/questions/7769876/paypal-api-credentials-for-sandbox)和[SO2](https://stackoverflow.com/questions/11628631/paypal-sandbox-integration-api-credentials-not-found)在内的几篇文章，但似乎都没有与我所需要的完全相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:45:16.170

您必须先删除 API 签名，然后才能申请 API 证书。

1.  登录到 Developer.paypal.com
2.  选择您要为其申请证书的帐户，然后单击“沙盒站点”
3.  登录您的沙盒帐户
4.  点击页面顶部的“个人资料”
5.  单击“请求 API 凭据”
6.  单击“设置 PayPal API 凭据和权限”
7.  点击“查看 API 签名”
8.  点击“删除”
9.  单击“请求 API 凭据”
10.  选择请求 API 证书，然后单击“同意并提交”

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-08T15:41:09.610

关于原始问题，贝宝也允许使用 API 签名的 dodirectpayment api 调用。你不需要证书。

# windows - windows上的powerpc编译器给出“c++ compiler not installed on this system error”

> ID：15527766
> 
> 赞同：1
> 
> 时间：2013-03-20T15:26:15.187
> 
> 标签：windows, compiler-errors, powerpc

我正在尝试在 Windows 上使用 msys powerpc-eabispe-gcc 编译器来编译一个简单的 helloworld.cpp 程序，以便为 powerpc 架构生成一个 elf，但是我收到“c++ compiler not installed on this system”错误。powerpc-eabispe 的 bin 文件夹包含所有的 exe，我不明白为什么会出现这个错误？

我使用 MinGW 命令提示符运行此命令： powerpc-eabispe-gcc.exe -o hello hello.cpp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:36:41.590

您需要为您的目标架构安装*工具链*。搜索“cctools”/“binutils”/“crosstools”或“ppc 交叉编译环境”。

你也可以看看：

*   [构建和测试 gcc/glibc 跨工具链](http://www.kegel.com/crosstool/)（这可能会起作用）
*   [GCC 的主机/目标特定安装说明](http://gcc.gnu.org/install/specific.html#powerpc-x-x)（在页面中搜索 powerpc）

但是，我鼓励您在 linux 或 mac 计算机上尝试此操作。网络上有更多资源和文档可用于在这些平台上进行交叉编译。

# wpf - 为什么 WPF Grid.Rows 从零开始，而不是相对的？

> ID：15527767
> 
> 赞同：3
> 
> 时间：2013-03-20T15:26:18.437
> 
> 标签：wpf, grid

如果我有一个包含五行的网格，则 Grid.Row 值始终为 0、1、2、3 和 4。如果在设计时，我想在第一行之后插入一行，我将设置其 Grid.Row 值为 1，但随后我需要更新插入行下方四行的 Grid.Row 值。这很烦人且容易出错。

相反，如果 Grid.Row 值是相对的（我不知道用什么词来描述这一点），我会将 Grid.Row 值设置为 10、20、30、40 和 50。在这种情况下，如果我想在第一行之后插入一行，我将其 Grid.Row 值设置为 15。我不需要更改任何其他行。布局引擎会知道将行按升序排列。Grid.Row 值不以这种方式运行是否有某种原因？

*HTML Z-Index 值的工作方式如下*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T15:27:58.713

> Grid.Row 值不以这种方式运行是否有某种原因？

这将要求 Grid 在其布局期间确定*每个*可能的行（通过迭代它的所有子项），然后放置项目。这会减慢布局过程并使布局过程复杂化。

通过使网格行显式化，可以避免这种情况，并且在 Grid 排列其子项时有助于布局传递的整体性能。

> HTML Z-Index 值的工作方式如下

仅供参考 - `Canvas`WPF 中的类也使用这种方法进行 Z 索引。

# magento - 如何获得捆绑产品的捆绑产品价格税？

> ID：15527769
> 
> 赞同：0
> 
> 时间：2013-03-20T15:26:23.363
> 
> 标签：magento, bundle

好的，所以我在我的 list.phtml 模板中使用下面的代码获得了捆绑产品的最高价格，但没有添加税款，有人能解释一下吗？

```
<?php

// Get product
$_product = new Mage_Catalog_Model_Product();
$_product->load($product_id);

echo Mage::helper('core')->currency(Mage::helper('tax')->getPrice($_product, $_product->getMaxPrice(), true));

?> 
```

理想情况下，我想让 getPriceHtml($_product, true) ?> 显示价格，但这会返回零的基本价格。我对 price.phtml 文件所做的任何更改似乎也没有任何效果，这是否表明有一个插件可以覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T09:58:17.327

你运行的是哪个版本？您可能遇到了旧的捆绑/分组产品缺陷。 [http://www.magentocommerce.com/boards/viewthread/224677/](http://www.magentocommerce.com/boards/viewthread/224677/)

产品索引没有税，因此您必须自己添加税，但如果您更改您的 price.phtml 没有任何效果，您要么有一个缓存正在运行，要么有一个覆盖你的类文件的层。

# asp.net - Mustache.js 与 Mustache.net。什么更快？

> ID：15527771
> 
> 赞同：0
> 
> 时间：2013-03-20T15:26:29.643
> 
> 标签：asp.net, .net, mustache

我正在使用 ASP.NET 4.0 开发一个网站。某些页面需要通过 AJAX 请求从服务器获取数据（例如，项目列表，按参数排序或/和过滤）。在那里我可以看到两个模板选项：1）AJAX 处理程序从数据库中获取数据并使用 Mustache 对其进行模板化。返回准备好显示给最终用户的 html 代码。2) AJAX 处理程序从数据库中获取数据并将其作为 JSON 发送。Javascript 代码在客户端使用 Mustache 格式化数据。

我的问题是什么会执行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:55:48.687

我认为如果不进行测试就无法回答您的问题，但我不确定差异是否真的很大。然而，尽管原始速度，我可能会选择选项 2：

*   使用 JSON 格式的数据而不是完整的 HTML 输出，HTTP 流量肯定会更轻（这通常更好），
*   数据仍然可以在客户端动态处理

如果您的网站被设计为“Web 应用程序”，并强调客户端处理，那么这就是要走的路。但另一方面，如果您认为您的输出主要是静态的，那么将所有工作保留在服务器端可能更简单。

# java - 带有粗体和下划线的 Itext 新字体

> ID：15527774
> 
> 赞同：5
> 
> 时间：2013-03-20T15:26:36.707
> 
> 标签：java, fonts, itext

我正在尝试在我的 pdf 中添加新字体，我需要将其加粗并加下划线..

我可以添加新字体，但不能同时使其粗体和下划线。

我尝试了以下方法..

```
public class PdfGenerator {

    private static final String BASE_FONT = "Trebuchet MS";
    private static final String BASE_FONT_BOLDITALIC = "Trebuchet MS BI";
    private static final String BASE_FONT_BOLD = "Trebuchet MS B";

    private static final Font titlefontSmall = FontFactory.getFont(
            BASE_FONT_BOLD, 10, Font.UNDERLINE);

    static {
        String filePath = "..my font directory";
        String fontPath = filePath + "\\" + "trebuc.ttf";
        String fontPathB = filePath + "\\" + "TREBUCBD.TTF";
        String fontPathBI = filePath + "\\" + "TREBUCBI.TTF";

        FontFactory.register(fontPath, BASE_FONT);
        FontFactory.register(fontPathB, BASE_FONT_BOLD);
        FontFactory.register(fontPathBI, BASE_FONT_BOLDITALIC);
    }

    public void genMyPdf(String filePath) {
        try {
            Document document = new Document();
            PdfWriter writer = PdfWriter.getInstance(document,
                    new FileOutputStream(filePath));
            document.open();

            Paragraph p = new Paragraph("This should be bold & underline",
                    titlefontSmall);
            document.add(p);
            document.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (DocumentException e) {
            e.printStackTrace();
        }

    }

} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-12-19T10:19:41.760

you can define a font object with both styles :

```
private static final Font SUBFONT = new Font(Font.getFamily("TIMES_ROMAN"), 12,    Font.BOLD|Font.UNDERLINE); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T15:38:17.710

由于您使用的是 IText 库，因此请阅读**[此处。](http://tutorials.jenkov.com/java-itext/underline-strikethrough.html)**

基本上使用块然后将这些块添加到文档中。

```
Chunk underline = new Chunk("Underline. ");
underline.setUnderline(0.1f, -2f); //0.1 thick, -2 y-location
document.add(underline); 
```

我自己没有尝试过，所以我还不知道结果如何。*进一步阅读 iText 文档*，您似乎必须先定义粗体字体，然后再实现它。**[本教程](http://itextpdf.com/examples/iia.php?id=212)**显示了使用 iText 使用粗体字体并使用粗体文本制作 pdf 的示例。从那里，我相信你可以将上面的代码实现为粗体文本和 walah！，粗体下划线文本：D

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-27T14:00:19.977

您可以在您的班级中定义您的字体，如下所示：

```
 public final static Font CUSTOM_FONT = new Font(Font.FontFamily.TIMES_ROMAN, 8, Font.BOLD | Font.UNDERLINE); 
```

然后将其用作：

```
paragraph.add(new Phrase( " YOUR TEXT HERE ",PDFCreator.CUSTOM_FONT)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:32:31.450

试试看

```
Font fontbold = FontFactory.getFont("Times-Roman", 12, Font.BOLD);
        document.add(new Paragraph("Times-Roman, Bold", fontbold)); 
```

和 Font.UNDERLINE 用于下划线

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-04T11:13:27.583

您可以使用以下内容同时获得粗体和下划线：-

```
Chunk buyerOrder = new Chunk("Buyer's Order Number", FontFactory.getFont(FontConstants.TIMES_ROMAN,8,Font.BOLD));
buyerOrder.setUnderline(0.1f, -2f); 
```

希望能帮助到你！谢谢

# javascript - 来自 Node.js 上的 HTTP 请求的 getaddrinfo ENOENT 错误

> ID：15527775
> 
> 赞同：7
> 
> 时间：2013-03-20T15:26:36.730
> 
> 标签：javascript, node.js, http, request

下面是我的 Node.js HTTP 响应请求程序的代码。

一旦我使用我明确知道不存在的网站，错误消息将通知我错误：`getaddrinfo ENOENT`

我想了解更多有关此错误的信息。是什么产生的？错误的细节是什么？404'会产生它吗？

```
var hostNames = ['www.pageefef.com'];

for (i; i < hostNames.length; i++){

    var options = {
            host: hostNames[i],
            path: '/'
    };

  (function (i){
    http.get(options, function(res) {

      var obj = {};
      obj.url = hostNames[i];
      obj.statusCode = res.statusCode;
      // obj.headers = res.headers;

      console.log(JSON.stringify(obj, null, 4));
    }).on('error',function(e){
      console.log("Error: " + hostNames[i] + "\n" + e.message);
    });
  })(i);
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:56:54.373

您可以这样做以获取有关错误的更多详细信息。

```
.on('error',function(e){
   console.log("Error: " + hostNames[i] + "\n" + e.message); 
   console.log( e.stack );
}); 
```

如果你给出一个不存在的 url，那么上面的代码会返回：

```
getaddrinfo ENOTFOUND
Error: getaddrinfo ENOTFOUND
    at errnoException (dns.js:37:11)
    at Object.onanswer [as oncomplete] (dns.js:124:16) 
```

http.request() 从 http.ClientRequest 类抛出错误。否 404 不会产生此错误。错误 404 表示客户端能够与服务器通信，但服务器找不到请求的内容。此错误表示域名系统未能找到地址（dns.js 用于[NAPTR](http://en.wikipedia.org/wiki/NAPTR_record)查询）。

# sql-server - 是否有一种聪明的方法可以在 T-SQL 中实现逻辑异或（两个请求之间的差异）

> ID：15527779
> 
> 赞同：0
> 
> 时间：2013-03-20T15:26:45.880
> 
> 标签：sql-server, tsql

作为系统验证的一部分，我正在尝试比较两个查询之间的结果（下面的简化版本）

```
-- Reference query, writing the criteria myself as part of the verification process
SELECT p.Id, p.FullName
FROM Person p
WHERE -- some criteria 
```

和

```
-- Data Query, simply reading what my system under tests thinks of the same criteria
SELECT p.Id, p.FullName
FROM Person p
  RIGHT JOIN PersonsThatMatchCriteria pmc ON ... 
```

我想确保它们返回相同的结果，如果不是，我想显示它们以供分析。

```
((REFERENCE QUERY)
EXCEPT
(DATA QUERY))
  UNION
((DATA QUERY)
EXCEPT
(REFERENCE QUERY)) 
```

由于我的流程在工具和自动化方面很差，我主要是手动输入这些请求。我讨厌必须重新键入/复制粘贴两次查询，因为它容易出错。

所以问题很简单：**是否有一种简单的语法（或简单的工具）可以让我编写类似的东西**

```
(REFERENCE QUERY)
  XOR
(DATA QUERY) 
```

我发现了一个效果很好但仍然很重的hack。有没有更好的（写起来更简单）？

```
DECLARE @ShouldBeIncluded TABLE(Id INT); INSERT INTO @ShouldBeIncluded  
    SELECT p.Id, p.FullName
    FROM Person p
    WHERE ...

DECLARE @ActuallyIncluded TABLE(Id INT); INSERT INTO @ActuallyIncluded
    SELECT p.Id, p.FullName
    FROM Person p
      RIGHT J

SELECT p.Id, p.FullName
FROM Person p
WHERE p.Id IN (         SELECT Id FROM @ActuallyIncluded
                    EXCEPT  SELECT Id FROM @ShouldBeIncluded    )
    OR p.Id IN (            SELECT Id FROM @ShouldBeIncluded
                    EXCEPT  SELECT Id FROM @ActuallyIncluded    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:33:16.183

您可以使用 CTE：

```
WITH ComplexQuery1(Col1, Col2) AS (
SELECT Col1, Col2
FROM ...
),
ComplexQuery2(Col1, Col2) AS (
SELECT Col1, Col2
FROM ...
),
Except1(Col1, Col2) AS(
SELECT * FROM ComplexQuery1
EXCEPT
SELECT * FROM ComplexQuery2
),
Except2(Col1, Col2) AS(
SELECT * FROM ComplexQuery2
EXCEPT
SELECT * FROM ComplexQuery1
)
SELECT * FROM Except1
UNION ALL
SELECT * FROM Except2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T23:06:41.250

据我了解，您需要显示实际查询未返回的任何预期结果以及实际查询中未返回的任何结果。

我将使用两个表，第一个表包含预期数据并包含所有 intrest 列的校验和值，第二个表是实际系统上的查询结果，应包含一个校验和列，该列将在实际查询执行。

评估下面的示例，看看它是否适合您的需要。

```
declare @lt_ExpectedResults table (lER_PersonName varchar(20), lER_PersonStuff varchar(20), lER_Chksum bigint)
    Insert @lt_ExpectedResults  (lER_PersonName, lER_PersonStuff)
    Values   
    ('Bubba1','Stuf1'),
    ('Bubba2','stuff2')
    Update @lt_ExpectedResults set lER_Chksum = CHECKSUM(*)

    declare @lt_ActualResults table (lAR_PersonName varchar(20), lAR_PersonStuff varchar(20), lAR_Chksum bigint)
    Insert @lt_ActualResults   (lAR_PersonName, lAR_PersonStuff)
    Values
    ('Bubba1','Stuf1'),
    ('Bubba3','stuff2')
    Update @lt_ActualResults set lAR_Chksum = CHECKSUM(*)

    select * from @lt_ExpectedResults
    select * from @lt_ActualResults

    Select * from @lt_ExpectedResults
    full outer join @lt_ActualResults
    on lAR_Chksum = lER_Chksum
     where   lAR_Chksum is NULL or lER_Chksum is NULL 
```

您应该知道，在某些情况下，CHECKSUM 值与不同的源数据相同。查看 StackOverflow 和此链接以获取更多信息

[校验和](http://msdn.microsoft.com/en-us/library/ms189788%28v=sql.105%29.aspx "校验和")

# c# - 使用 LINQ 从 DataTable 中删除特定行

> ID：15527784
> 
> 赞同：0
> 
> 时间：2013-03-20T15:27:01.707
> 
> 标签：c#, asp.net, linq, datatable

我想从名为 dt 的 DataTable 中删除特定行。

对于 SQL 中的表，我可以执行以下操作：

```
DELETE FROM dt 
WHERE BASELINE_FOLDER = baselineSubfolder
AND BASELINE_FILE = baselineFilename
AND BASELINE_CHECKSUM = baselineChecksum; 
```

是否有等效的 LINQ 语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:36:01.683

假设您没有模型而只有一个`DataTable`（这是我从 OP 中了解到的）。

```
//Cast to enumerable of `DataRow` and filter on your condition
var rows = dt.Rows.Cast<DataRow>().Where(row => row["BASELINE_FOLDER"] == baselineSubFolder && row["BASELINE_FILE" == baselineFilename
&& row["BASELINE_CHECKSUM"] == baselineChecksum).ToArray();
//Loop through and remove the rows that meet the condition
foreach(DataRow dr in rows)
{
  dt.Rows.Remove(dr);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T08:53:16.247

您可以将数据表转换为列表，并可以使用它`RemoveAt()`来执行此操作。

您可以将其转换为列表并使用以下代码

```
string baseLineFolder=dt.Rows["BASELINE_FOLDER"].ToString();
                string baseLineFile=dt.Rows["BASELINE_FILE"].ToString();
                string baseLineChecksum=dt.Rows["BASELINE_CHECKSUM"].ToString();
                var dtresult = dt.AsEnumerable();
                var result=(from r in dtresult
                            where(r.Field<string>("BASELINE_FOLDER")!=baseLineFolder)
                            &&(r.Field<string>("BASELINE_FILE")!=baseLineFile)
                            &&(r.Field<string>("BASELINE_CHECKSUM ")!=baseLineChecksum)
                              select r).ToList(); 
```

# hyperlink - 如何格式化剪贴板文本以粘贴为超链接？

> ID：15527785
> 
> 赞同：1
> 
> 时间：2013-03-20T15:27:06.250
> 
> 标签：hyperlink, autohotkey

如何使用自动热键之类的东西在剪贴板上生成富文本超链接？

基本上我想创建一个粘贴作为超链接快捷方式。目前我突出显示一些文本并按`ctrl`+ `alt`+`k`发送`ctrl`+ `k`（在许多程序中创建超链接热键），然后发送`ctrl`+`v`粘贴到我的位置，最后输入确认。

这工作得很好，但我希望让它足够通用，可以在任何支持富文本的地方工作，即使它没有可用的`ctrl`+`k`快捷方式。

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:32:06.337

简单代码：

在此示例中，我使用`Ctrl`++以您的格式粘贴超链接`Shift`：`v`

```
^+v::
Send, ^k %Clipboard% {Enter}
Return 
```

或者...

```
^+v::
StringReplace, ClipBoard, ClipBoard, http://  ; strip  http://
StringReplace, ClipBoard, ClipBoard, https://  ; strip  http://
Send, <a href="http://%ClipBoard%">%ClipBoard%</a>
Return 
```

# java - 带有准备好的语句缓存的 Tomcat 连接池

> ID：15527791
> 
> 赞同：3
> 
> 时间：2013-03-20T15:27:16.023
> 
> 标签：java, tomcat, jdbc, connection-pooling

从 DBCP 连接池升级到 Tomcat 自己的实现（基于[这里](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html#Introduction)的优秀比较）；我有点困惑为什么他们放弃了这两个属性，同时保留了其他所有属性：

```
poolPreparedStatements="true"
maxOpenPreparedStatements="10000" 
```

这是否意味着此实现不支持准备好的语句池？默认情况下，每个连接是否都维护自己的预处理语句池？

我花了很长时间研究这个问题，但没有找到明确的答案！

谢谢你的时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-17T19:54:14.913

Tomcat（相当）新的 jdbc-pool 也确实有一个语句缓存。您可以使用 启用和配置它，它在**创建池**期间`JDBC interceptor`设置为**JDBC 属性**。 请[查看文档](http://tomcat.apache.org/tomcat-7.0-doc/jdbc-pool.html#org.apache.tomcat.jdbc.pool.interceptor.StatementCache)以获取更多信息以及存在哪些配置可能性。

 **基本上是这样完成的：

```
 PoolProperties p = new PoolProperties();
      p.setUrl("jdbc:your-jdbc-url");
      p.setDriverClassName("your.jdbc.driver.class");
      p.setUsername("user");
      p.setPassword("password");
      p.setJdbcInterceptors(
        "org.apache.tomcat.jdbc.pool.interceptor.StatementCache");
      DataSource datasource = new DataSource();
      datasource.setPoolProperties(p); 
```**

# android - 为什么 Android 会杀死我的 BROWSABLE 活动？

> ID：15527794
> 
> 赞同：1
> 
> 时间：2013-03-20T15:27:23.647
> 
> 标签：android, android-intent, intentfilter

我正在编写一个企业应用程序，该应用程序需要在用户使用 Intranet 网站时在后台处理一些数据。应用程序的清单正确地声明了 BROWSABLE 意图过滤器，并且浏览器通过 JavaScript 正确地启动它。

通常，应用程序对用户是不可见的，因此应用程序只需将参数从 JavaScript 调用的 URI 传递到后台服务并自行终止。然而，有时，一些后台服务需要用户交互。在这种情况下，主要活动不会终止；相反，它会提示用户提供所需的任何信息/操作，并且仅在满足所有条件时终止。

**只要应用程序由于直接用户交互而从浏览器触发（用户单击控件 -> 调用 JavaScript 函数 -> JS 函数请求向应用程序注册的 URI -）**，上述所有操作都可以完美**运行> 显示我的应用程序并等待用户输入）。**

 **但是，如果在网页中没有直接用户交互的情况下调用 JS（例如从 onLoad() 事件处理程序），则应用程序会正确启动，但随后它几乎立即被操作系统终止，不会引发任何错误/异常。我只需调用 onPause()，然后调用 onDestroy()，就是这样。后台服务继续运行，但主要活动消失了，并且没有任何与用户交互的机会。

有谁知道它为什么会表现出这种行为以及我如何抑制或解决它？

**更新：**如果我`android:launchMode="singleInstance"`在清单中设置，则应用程序的行为与预期一致。在我的具体情况下，这解决了问题，但我仍然不了解一般行为。**

# ios - 尝试使用 TWRequest 发布时获取“无法识别的选择器发送到实例”

> ID：15527798
> 
> 赞同：1
> 
> 时间：2013-03-20T15:27:30.773
> 
> 标签：ios, twitter, twrequest, acaccount

我正在尝试使用 TWRequest 对象发布图像。这是我的代码：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    NSData *pngImage = UIImagePNGRepresentation(image);
    NSData *tweetText = [userText copy];
    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if (granted) {
            NSLog(@"Twitter is good to go");
            NSArray *twitterAccounts = [accountStore accountsWithAccountType:accountType];
            if (twitterAccounts.count) {
                ACAccount *twitterAccount = [twitterAccounts objectAtIndex:0];
                NSURL *url = [NSURL URLWithString:@"https://api.twitter.com/1.1/statuses/update_with_media.json"];
                TWRequest *request = [[TWRequest alloc] initWithURL:url parameters:nil requestMethod:TWRequestMethodPOST];
                [request addMultiPartData:pngImage withName:@"media" type:@"image/png"];
                [request addMultiPartData:tweetText withName:@"text" type:@"text/plain"];
                [request setAccount:twitterAccount];
                [request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    if (responseData)
                    {
                        NSError *error = nil;
                        NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableLeaves error:&error];
                        if (jsonArray) {
                            for(NSDictionary *item in jsonArray) {
                                NSLog(@"Item: %@", item);
                            }
                        }
                        else
                        {
                            NSLog(@"Error %@ with user info %@.", error, error.userInfo);
                        }
                    }
                }];                                   
            }
        } else {
            NSLog(@"The user does not grant us permission to access its Twitter account(s).");
        }
    }]; 
```

每当程序到达行时，`[request performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {`我都会收到以下错误：

> [__NSCFString 字节]：无法识别的选择器发送到实例 0x1d8f4250 *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString 字节]：无法识别的选择器发送到实例 0x1d8f4250”***第一次抛出调用堆栈：（0x33ec02a3 0x3bb5a97f 0x33ec38107 03e19fx26 0x3473B90B 0x35C416FD 0x35C417A3 0x35C4065F 0x35C3FA6B 0X35C40AB9 0X5ADC5 0X3BF72BF72BF72BF72BF72BF7BF7BF7FDCBBF7FDCB 0x3BF80259BBF803BBF80BBR9BBR9BBFAB9BBFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BFAB9BNBNBER 9.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T15:35:35.787

问题出在`tweetText`. 您正在复制一个`NSString`但将其分配给一个`NSData`对象。

改变这个：

```
NSData *tweetText = [userText copy]; 
```

对此：

```
NSData *tweetText = [userText dataUsingEncoding:NSUTF8StringEncoding]; 
```

# php - 如何在 PHP 中获取类的子名称

> ID：15527799
> 
> 赞同：0
> 
> 时间：2013-03-20T15:27:33.697
> 
> 标签：php, oop

我想在父类构造函数中获取子类名称。这些类是命名空间的，所以如果我使用 get_class(); 函数，它将检索整个命名空间，我只需要一个孩子的类名。

如果这很重要，父类是一个抽象类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:30:48.627

尝试[PHP](http://php.net/manual/en/function.get-called-class.php)`get_called_class()`中的函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:33:25.757

具有命名空间的完全限定的类名，实际上是“正确的”类。如果你只想要最后一位，你应该只是子串。

```
$class = substr(get_class($this), strrpos(get_class($this),'\\')+1); 
```

或者，您可以使用反射

```
$refl = new \ReflectionObject($this);
$class = $refl->getShortName(); 
```

# jquery - 在 jquery 1.9 中替代 die()

> ID：15527806
> 
> 赞同：1
> 
> 时间：2013-03-20T15:27:49.600
> 
> 标签：jquery

该`.die()`方法已从 jQuery 1.9 中删除。知道如何实现同样的目标吗？我正在尝试在某些链接的页面加载时终止点击处理程序。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:29:05.900

使用`off()`- 文档`off()`：[http ://api.jquery.com/off/](http://api.jquery.com/off/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:32:08.710

[jQuery Core 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/)是一个很棒的资源，其中包含有关如何处理已弃用/删除的功能以及 1.9 中的其他重大更改的说明。

从那里引用：

> .die() 方法自 jQuery 1.7 起已被弃用，并已在 1.9 中删除。我们建议升级代码以改用 .off() 方法。例如，要精确匹配 $("a.foo").die("click")，可以写成 $(document).off("click", "a.foo")。有关详细信息，请参阅 .off() 文档。同时，jQuery Migrate 插件可用于恢复 .die() 功能。

请注意，虽然您*应该*替换`die()`为，但如果您需要快速修复以使现有调用与 1.9 核心一起工作`off()`，您也可以使用[Migrate 插件。](https://github.com/jquery/jquery-migrate)`die()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:29:23.653

从 jQuery 1.7 开始，不推荐使用[`.die()`](http://api.jquery.com/die/)（及其补充方法）。`.live()`相反，用于`.off()`删除与 . 绑定的事件处理程序`.on()`。

# ruby-on-rails - html.erb 页面中的重复代码

> ID：15527807
> 
> 赞同：0
> 
> 时间：2013-03-20T15:27:49.533
> 
> 标签：ruby-on-rails

我有以下这段代码，它在我的 html.erb 页面中重复多次。

```
 <% object_info.attributes.each do |attr_name, attr_value| %>
            <span class="attribute_title"><%= attr_name %>:</span>
            <span class="attribute_value"><%= attr_value %> </span>
            <br/>
    <% end %> 
```

我想把它放在一个方法中，这样我只需要在需要时调用该方法。

我尝试将它作为一种方法放在帮助页面中并在我的 html 页面上调用它：

```
 def display_obj_attributes(active_record_obj)

    data =    "<% #{active_record_obj}.attributes.each do |attr_name, attr_value| %>
            <span class='attribute_title'><%= attr_name %>:</span>
            <span class='attribute_value'><%= attr_value %> </span>
            <br/>
          <% end %>"

    return data.html_safe

  end 
```

但这似乎不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:03:03.283

把它放在一个部分，_my_partial.js：

```
<% object_info.attributes.each do |attr_name, attr_value| %>
  <span class="attribute_title"><%= attr_name %>:</span>
  <span class="attribute_value"><%= attr_value %> </span>
  <br/>
<% end %> 
```

那么在你看来：

```
<%= render 'my_partial', object_info: object_info %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:33:46.120

这是一种解决方案。

```
def display_obj_attributes(active_record_obj)
  data = ''
  active_record_obj.attributes.each do |attr_name, attr_value|
    data += content_tag(:span, "#{attr_name}:", :class => 'attribute_title')
    data += content_tag(:span, attr_value, :class => 'attribute_value')
    data += '<br/>'
  end
end

<%= display_obj_attributes(toto) %> 
```

更漂亮的是使用 partials... 描述 HTML 的部分使用；一个帮助函数用于帮助 HTML 渲染。

```
<%= render :partial => 'obj_attributes', :locals => { :active_record_obj => toto } %> 
```

# android - DatePicker 控件在 Android >=4.0 phonegap 下显示两次

> ID：15527810
> 
> 赞同：2
> 
> 时间：2013-03-20T15:27:54.073
> 
> 标签：android, cordova, plugins, datepicker

这更像是一个有答案的问题

我们遇到了一个问题，在单击日期字段后，日期选择器控件将显示两次，我们还使用了 phonegap 的日期选择器插件，问题是在 Android 4.0 版本中，浏览器处理日期字段的方式不同，因此解决方案要么删除如果日期或不使用日期选择器控件，请在 html 字段上键入。

# entity-framework - 将 SimpleMembership 与实体框架集成

> ID：15527812
> 
> 赞同：3
> 
> 时间：2013-03-20T15:27:57.010
> 
> 标签：entity-framework, asp.net-mvc-4, simplemembership

我正在尝试将 SimpleMembership 表与我的对象模型的其余部分集成 - 以管理来自单个数据库和上下文的所有实体。

到目前为止，我找到的用于手动启动 SM 表的最佳方法（将 SimpleMember 与我的对象模型的其余部分结合起来的入口点）可以在[这里找到。](http://blog.spontaneouspublicity.com/including-asp-net-simple-membership-tables-as-part-of-your-entity-framework-model)但是，正如评论部分所引用的，所提供的代码示例中存在一些错误。评论试图提供更正，但由于格式化，很难理解。

我已经完成了 80% 的工作，但被会员表的外键生成卡住了。OnModelCreating 块中的代码是否属于 MyDbContext 类？我在 .WithMany(u => u.Members) 行上遇到编译错误。

**会员资格.cs**

```
[Table("webpages_Membership")]
public class Membership
{
    [Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int UserId { get; set; }
    public DateTime? CreateDate { get; set; }

    [StringLength(128)]
    public string ConfirmationToken { get; set; }
    public bool? IsConfirmed { get; set; }
    public DateTime? LastPasswordFailureDate { get; set; }
    public int PasswordFailuresSinceLastSuccess { get; set; }

    [Required, StringLength(128)]
    public string Password { get; set; }
    public DateTime? PasswordChangedDate { get; set; }

    [Required, StringLength(128)]
    public string PasswordSalt { get; set; }

    [StringLength(128)]
    public string PasswordVerificationToken { get; set; }
    public DateTime? PasswordVerificationTokenExpirationDate { get; set; }

    <strike>public virtual ICollection<Role> Roles { get; set; }</strike> 
```

编辑：最初我添加了上面的行以删除下面无关代码块中的编译器投诉。删除创建 FK 到角色的尝试将对齐此代码的其余部分，以便这些模型类创建为 SM 生成表的迁移。

**OAuthMembership.cs**

```
[Table("webpages_OAuthMembership")]
public class OAuthMembership
{
    [Key, Column(Order = 0), StringLength(30)]
    public string Provider { get; set; }
    [Key, Column(Order = 1), StringLength(100)]
    public string ProviderUserId { get; set; }
    public int UserId { get; set; }
} 
```

**角色.cs**

```
[Table("webpages_Roles")]
public class Role
{
    [Key]
    public int RoleId { get; set; }
    [StringLength(256)]
    public string RoleName { get; set; }

    public virtual ICollection<UserProfile> UserProfiles { get; set; }
} 
```

**用户配置文件.cs**

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }

    public virtual ICollection<Role> Roles { get; set; }
} 
```

**MyDbContext.cs**

公共 MyDbContext() : base("DefaultConnection") { }

```
public DbSet<UserProfile> UserProfiles { get; set; }
public DbSet<Membership> Membership { get; set; }
public DbSet<Role> Roles { get; set; }
public DbSet<OAuthMembership> OAuthMembership { get; set; }

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<UserProfile>()
                .HasMany<Role>(r => r.Roles)
                .WithMany(u => u.UserProfiles)
                .Map(m =>
                         {
                             m.ToTable("webpages_UsersInRoles");
                             m.MapLeftKey("UserId");
                             m.MapRightKey("RoleId");
                         }); 
```

编辑：下面的块包含在文章的评论之一中，但似乎不需要。

```
 //modelBuilder.Entity<Membership>()
    //    .HasMany<Role>(r => r.Roles)
    //    .WithMany(u => u.Members)
    //    .Map(m =>
    //    {
    //        m.ToTable("webpages_UsersInRoles");
    //        m.MapLeftKey("UserId");
    //        m.MapRightKey("RoleId");
    //    });

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:46:05.910

我按照文章中的说明进行操作，并且还考虑到了一些建议文章错误的评论。

我结束了以下课程：

**用户配置文件.cs**

```
[Table("UserProfile")]
public class UserProfile
{
    [Key, ForeignKey("Membership")]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public ICollection<WebSecurity.Role> Roles { get; set; }
    public WebSecurity.Membership Membership { get; set; }
} 
```

您应该立即注意到我在 UserId 列上使用的“ForeignKey”属性。由于用户首先是在 Membership 表中创建的，所以我的 UserProfile 表是从属表。

**会员资格.cs**

```
[Table("webpages_Membership")]
public class Membership
{
    //public Membership()
    //{
    //  Roles = new List<Role>();
    //  OAuthMemberships = new List<OAuthMembership>();
    //}

    [Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
    public int UserId { get; set; }
    public DateTime? CreateDate { get; set; }
    [StringLength(128)]
    public string ConfirmationToken { get; set; }
    public bool? IsConfirmed { get; set; }
    public DateTime? LastPasswordFailureDate { get; set; }
    public int PasswordFailuresSinceLastSuccess { get; set; }
    [Required, StringLength(128)]
    public string Password { get; set; }
    public DateTime? PasswordChangedDate { get; set; }
    [Required, StringLength(128)]
    public string PasswordSalt { get; set; }
    [StringLength(128)]
    public string PasswordVerificationToken { get; set; }
    public DateTime? PasswordVerificationTokenExpirationDate { get; set; }

    public UserProfile UserProfile { get; set; }
} 
```

根据 Richard 在文章中的评论，我注释掉了构造函数。我还创建了对 UserProfile 的引用，但没有创建对角色的引用。

**OAuthMembership.cs**

```
[Table("webpages_OAuthMembership")]
public class OAuthMembership
{
    [Key, Column(Order = 0), StringLength(30)]
    public string Provider { get; set; }

    [Key, Column(Order = 1), StringLength(100)]
    public string ProviderUserId { get; set; }

    public int UserId { get; set; }

    //[Column("UserId"), InverseProperty("OAuthMemberships")]
    //public Membership User { get; set; }
} 
```

我的 OAuthMembership 类基本保持不变；根据 Richard 在文章中的评论，我只注释掉了 User 属性。

**AccountModel.cs+UsersContext**

最后是 UserContext 类，我在其中为 UsersInRoles 表创建关联。

```
public class UsersContext : DbContext 
```

{

```
 public UsersContext()
        : base("DefaultConnection")
    {

    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<InternetApplication.Models.WebSecurity.Role>()
            .HasMany<InternetApplication.Models.UserProfile>(r => r.UserProfiles)
            .WithMany(u => u.Roles)
            .Map(m =>
            {
                m.ToTable("webpages_UsersInRoles");
                m.MapLeftKey("UserId");
                m.MapRightKey("RoleId");
            });
    }

    public DbSet<WebSecurity.Membership> Membership { get; set; }
    public DbSet<WebSecurity.OAuthMembership> OAuthMembership { get; set; }
    public DbSet<WebSecurity.Role> Roles { get; set; }
    public DbSet<UserProfile> UserProfiles { get; set; }
} 
```

除了添加 UsersInRoles 映射之外，我还为每个表添加了 DbSet 条目。

现在一切都已创建，我可以使用我的**Add-Migration**和**Update-Database**命令，并使用以下结合了 Membership、UserProfile 和 Roles 表的代码片段：

```
using (var db = new UsersContext())
{
    var memberships = db.Membership
        .Include("UserProfile")
        .Include("UserProfile.Roles")
        .ToList();
    foreach (var member in memberships)
    {
        member.IsConfirmed = true;
    }

    db.SaveChanges();
} 
```

这是一个很长的帖子，但我希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T17:55:22.307

我使用[这个问题](https://stackoverflow.com/questions/13327235/entity-framework-5-how-to-generate-poco-classes-from-existing-database)的答案从我的数据库中现有的“webpage_”表中自动生成模型。这可确保以与 SimpleMembership 创建模型完全相同的方式创建模型。这导致了以下代码：

## 楷模：

```
public partial class webpages_Membership
{
   public int UserId { get; set; }
   public Nullable<System.DateTime> CreateDate { get; set; }
   public string ConfirmationToken { get; set; }
   public Nullable<bool> IsConfirmed { get; set; }
   public Nullable<System.DateTime> LastPasswordFailureDate { get; set; }
   public int PasswordFailuresSinceLastSuccess { get; set; }
   public string Password { get; set; }
   public Nullable<System.DateTime> PasswordChangedDate { get; set; }
   public string PasswordSalt { get; set; }
   public string PasswordVerificationToken { get; set; }
   public Nullable<System.DateTime> PasswordVerificationTokenExpirationDate { get; set; }
}

public partial class webpages_Roles
{
   public webpages_Roles()
   {
      this.webpages_UsersInRoles = new HashSet<webpages_UsersInRoles>();
   }

   public int RoleId { get; set; }
   public string RoleName { get; set; }

   public virtual ICollection<webpages_UsersInRoles> webpages_UsersInRoles { get; set; }
}

public partial class webpages_UsersInRoles
{
   public int UserId { get; set; }
   public int RoleId { get; set; }

   public virtual webpages_Roles webpages_Roles { get; set; }
} 
```

## 流利的映射：

```
internal partial class MembershipMapping : EntityTypeConfiguration<webpages_Membership>
{
   public MembershipMapping()
   {
      this.HasKey(t => t.UserId);
      this.ToTable("webpages_Membership");
      this.Property(t => t.UserId).HasColumnName("UserId").HasDatabaseGeneratedOption(new Nullable<DatabaseGeneratedOption>(DatabaseGeneratedOption.None));
      this.Property(t => t.CreateDate).HasColumnName("CreateDate");
      this.Property(t => t.ConfirmationToken).HasColumnName("ConfirmationToken").HasMaxLength(128);
      this.Property(t => t.IsConfirmed).HasColumnName("IsConfirmed");
      this.Property(t => t.LastPasswordFailureDate).HasColumnName("LastPasswordFailureDate");
      this.Property(t => t.PasswordFailuresSinceLastSuccess).HasColumnName("PasswordFailuresSinceLastSuccess");
      this.Property(t => t.Password).HasColumnName("Password").IsRequired().HasMaxLength(128);
      this.Property(t => t.PasswordChangedDate).HasColumnName("PasswordChangedDate");
      this.Property(t => t.PasswordSalt).HasColumnName("PasswordSalt").IsRequired().HasMaxLength(128);
      this.Property(t => t.PasswordVerificationToken).HasColumnName("PasswordVerificationToken").HasMaxLength(128);
      this.Property(t => t.PasswordVerificationTokenExpirationDate).HasColumnName("PasswordVerificationTokenExpirationDate");
   }
}

internal partial class RolesMapping : EntityTypeConfiguration<webpages_Roles>
{
   public RolesMapping()
   {
      this.HasKey(t => t.RoleId);
      this.ToTable("webpages_Roles");
      this.Property(t => t.RoleId).HasColumnName("RoleId");
      this.Property(t => t.RoleName).HasColumnName("RoleName").IsRequired().HasMaxLength(256);
   }
}

internal partial class UsersInRolesMapping : EntityTypeConfiguration<webpages_UsersInRoles>
{
   public UsersInRolesMapping()
   {
      this.HasKey(t => new { t.UserId, t.RoleId });
      this.ToTable("webpages_UsersInRoles");
      this.Property(t => t.UserId).HasColumnName("UserId").HasDatabaseGeneratedOption(new Nullable<DatabaseGeneratedOption>(DatabaseGeneratedOption.None));
      this.Property(t => t.RoleId).HasColumnName("RoleId").HasDatabaseGeneratedOption(new Nullable<DatabaseGeneratedOption>(DatabaseGeneratedOption.None));
      this.HasRequired(t => t.webpages_Roles).WithMany(t => t.webpages_UsersInRoles).HasForeignKey(d => d.RoleId);
   }
} 
```

## 数据库上下文：

```
public class MembershipContext : DbContext, IDisposable
{
   public DbSet<webpages_Membership> Membership { get; set; }
   public DbSet<webpages_Roles> Roles { get; set; }
   public DbSet<webpages_UsersInRoles> UsersInRoles { get; set; }

   protected override void OnModelCreating(DbModelBuilder modelBuilder)
   {
      modelBuilder.Configurations.Add(new MembershipMapping());
      modelBuilder.Configurations.Add(new RolesMapping());
      modelBuilder.Configurations.Add(new UsersInRolesMapping());

      base.OnModelCreating(modelBuilder);
   }
} 
```

请注意，我已排除 OAuthMembership 表，因为我的解决方案不需要它。但是，如果您按照我上面提供的链接中的步骤操作，您也可以轻松地包含该表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:46:14.213

从一个空白的 MVC4 Internet 模板开始，我运行该项目以便在一个新的数据库中创建 SimpleMembership 表 - 然后使用 EF 的逆向工程师工具从这些表中创建 POCO。逐行逐行查找错误并在 OP 中编辑代码块。

有了该代码，我使用 Package Manager 来**'Add-Migration'**和**'Update-Database'**。初步测试确认一切正常 - 我想如果我发现暴露任何更深层次问题的边缘情况，我将不得不重新审视。

# html - 带注释的翻译的最佳语义

> ID：15527813
> 
> 赞同：2
> 
> 时间：2013-03-20T15:27:57.263
> 
> 标签：html, semantic-markup, language-translation

我想为歌词、书摘等提供翻译。结果应如下所示：

> 原文第 1 部分（例如一段）
> 翻译文本第 1
> 部分 第 1 部分注释
> 
> 原文第 2 部分
> 译文第 2 部分
> 关于第 2 部分的注释

到目前为止，我会按照这里提出的基本标记进行[语义标记翻译](https://stackoverflow.com/questions/7229085/semantically-marking-up-translations)。

```
<section>
<blockquote lang="en">
  original text part 1
  <footer>— Crazy hunch-backed old guy from the movie Aladdin</footer>
</blockquote>
<blockquote lang="de">
  translated text part 1
  <footer>— Crazy hunch-backed old guy from the movie Aladdin</footer>
</blockquote>
<p>notes on part 1</p>
</section>

<section>
<blockquote lang="en">
  original text part 2
  <footer>— Crazy hunch-backed old guy from the movie Aladdin</footer>
</blockquote>
<blockquote lang="de">
  translated text part 2
  <footer>— Crazy hunch-backed old guy from the movie Aladdin</footer>
</blockquote>
<p>notes on part 2</p>
</section> 
```

有没有更好的方法，或者这是我们目前能做的最好的？

我特别感兴趣的是，是否有一种方法可以优雅地将所有部分标记为属于同一来源，而无需为每个段落重复。

来源将被归因于此处[http://html5doctor.com/blockquote-q-cite/](http://html5doctor.com/blockquote-q-cite/)（搜索“OMG a heading！”，相关部分随即开始）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T20:37:48.267

你可以使用[`table`元素](http://www.w3.org/TR/html5/tabular-data.html#the-table-element)：

```
<table>
  <tr>
    <th>Original/English</th>
    <th>Translation/German</th>
  </tr>
  <tr>
    <td><blockquote><p>A wizard is never late… nor is he early.</p></blockquote></td>
    <td lang="de"><p>Ein Zauberer kommt nie zu spät … ebensowenig zu früh.</p></td>
  </tr>
</table>

<p class="note">Gandalf said this in …&lt;/p> 
```

通过使用 a `table`，您明确声明这两个片段彼此相关。

可以轻松添加其他翻译。

我假设整个页面都是英文的（例如`lang="en"`on `html`）；如果没有，你应该`lang="en"`在`td`包含英文原件的地方设置。

如您所见，我`blockquote`仅用于原始（英文）内容，假设您自己翻译内容。如果这是真的，你没有引用任何东西，所以你不应该使用`blockquote`翻译。但是，如果您从其他来源获取翻译，您也应该使用`blockquote`它。

使用什么“容器”？这取决于整个页面结构/上下文。`section`如果有一个自然的标题，您可能希望对每个组（由原始文本、翻译和注释组成）使用。

您也可以为所有组使用*一个* `table`，例如：

```
<table>
  <tr>
    <th>Original/English</th>
    <th>Translation/German</th>
    <th>Notes</th>
  </tr>
  <tr>
    <td><blockquote><p>A wizard is never late… nor is he early.</p></blockquote></td>
    <td lang="de"><p>Ein Zauberer kommt nie zu spät … ebensowenig zu früh.</p></td>
    <td><p>Gandalf said this in …&lt;/p></td>
  </tr>
  <tr>
    <td><blockquote><p>…&lt;/p></blockquote></td>
    <td lang="de"><p>…&lt;/p></td>
    <td><p>…&lt;/p></td>
  </tr>
</table> 
```

（额外的“标题列”可以为每一行提供标题/描述。）

这实际上取决于实际页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:39:17.910

也许这样的东西对你有用？

```
<blockquote>
    <blockquote> This is a blockquote</blockquote>
    <blockquote> This is another blockquote</blockquote>
    <footer>- Test</footer>
</blockquote> 
```

# javascript - API Key 和 Developer Key 之间的 YouTube API 区别

> ID：15527815
> 
> 赞同：5
> 
> 时间：2013-03-20T15:27:59.493
> 
> 标签：javascript, ajax, youtube, google-api, youtube-api

在使用 YouTube API 时，我在理解 API 密钥和开发人员密钥之间的区别时遇到了一些问题。

我的应用程序正在使用 Youtube API v3 中的 restful 请求，我可以通过 gapi.client.setApiKey() 函数设置 API 密钥，这是我在开发期间完成的，但是当我查看配额时，[https：/ /groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/e1JDQ4lqbXU](https://groups.google.com/forum/?fromgroups=#!topic/youtube-api-gdata/e1JDQ4lqbXU)，它声明它们与开发人员密钥相关联，并且应与每个请求一起发送开发人员密钥。我继续前进并获得了一个用于开发目的，但我不确定它们如何相互交互。

我也没有找到关于如何在每个 RESTful 请求（例如 gapi.client.youtube.channels.list）中发送开发者密钥的任何详细信息，只有在发出常规获取请求时如何将其包含在标头或查询字符串中.

有人可以帮助我了解两者之间的区别，它们之间的关系，我是否需要两者，以及如何在 restful 请求中使用它们，或者我是否需要切换到常规 get 请求？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T19:46:51.387

对困惑感到抱歉。

“开发者密钥”是指与YouTube 数据 API v1 或[v2一起使用的密钥。](https://developers.google.com/youtube/2.0/developers_guide_protocol_audience)[你可以在这里](https://code.google.com/apis/youtube/dashboard/gwt/index.html)获得它们。v1/v2 有一个单独的配额系统，是的，开发人员密钥确实在那里发挥作用。

“API 密钥”是指您在使用YouTube 数据 API [v3发出未经身份验证的请求时使用的密钥。](https://developers.google.com/youtube/v3/)（如果您发出经过身份验证的请求，则不包含 API 密钥，因为 OAuth 2 客户端 ID/秘密标识您的应用程序。）您从[Google API 控制台](https://code.google.com/apis/console/)获得一个 API 密钥，可以在 YouTube 中使用，之后开启 YouTUbe Data API v3 作为您正在使用的服务之一。v3 中的配额与您的 API 控制台项目相关联，您的 API 密钥标识您正在使用的项目。

要点是，如果您进行未经身份验证的 YouTube 数据 API v3 调用，您应该只在请求中包含来自 Google API 控制台的 API 密钥。如果您使用的是 JavaClient 库，则可以通过`gapi.client.setApiKey()`.

# serial-port - 如何让 Scilab 在 Linux (Ubuntu) 中打开与 /dev/ttyACM0 USB 端口的串行通信

> ID：15527818
> 
> 赞同：2
> 
> 时间：2013-03-20T15:28:02.513
> 
> 标签：serial-port, arduino, communication, scilab

我正在尝试打开[Scilab](http://en.wikipedia.org/wiki/Scilab)和 Arduino 之间的串行通信。`/dev/tty**ACM0**`但是，Arduino 在端口中始终被 Linux Ubuntu 识别。当我在 Scilab 中写作`h=openserial(1,"9600,n,8,1)`时，我知道我是在对它说，打开与Linux`COM1`或`/dev/tty**S0**`在 Linux 中的串行通信。

但是，例如，如果我使用`h=openserial(N,"9600,n,8,1)`，假设在 Windows 和Linux`N=port number`中，我将始终拥有 COMN 。`/dev/tty**S**(N-1)`

如何通过`/dev/tty**ACM0**`Scilab for Linux 中的端口打开串行通信？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T21:03:26.760

从Scilab 存储库[`openserial.sci`](https://github.com/sengupta/Scilab-Serial/blob/master/macros/openserial.sci)的[串行通信工具箱中查看](https://github.com/sengupta/Scilab-Serial)，

```
function h=openserial(p,smode,translation,handshake,xchar,timeout)
//port name
  if ~exists("p","local") then p=1; end
  if type(p)==1 | type(p)==8 then
    if p<=0 then error("port number must be greater than zero"); end
    if getos() == "Windows" then
      port="COM"+string(p)+":"
    else
      port="/dev/ttyS"+string(p-1)
    end
  elseif type(p)==10
     port=p
  else
     error("port to open must be either a number or a string")
  end 
```

端口始终设置为`/dev/ttyS<PORT_NUMBER>`。因此，在您的本地工具箱文件中，您可以尝试将以下行编辑为如下内容`openserial.sci`：

```
function h=openserial(p,smode,translation,handshake,xchar,timeout)
//port name
  if ~exists("p","local") then p=1; end
  if type(p)==1 | type(p)==8 then
    if p<=0 then error("port number must be greater than zero"); end
    if getos() == "Windows" then
      port="COM"+string(p)+":"
    else
      port="/dev/ttyS"+string(p-1)
    end
  elseif type(p)==10
     port=p
  elseif type(p)=="ACM0"
     port="/dev/ttyACM0"
  else
     error("port to open must be either a number or a string")
  end 
```

然后按如下方式调用openserial：

```
h=openserial("ACM0","9600,n,8,1) 
```

还要确保这`/dev/ttyACM0`是正确的设备节点。这是来自 的示例输出`ls -l`，您可以运行以确认：

```
$ ls -l /dev/ttyACM0
crw-rw---- 1 root dialout 188,  0 Mar 12 18:16 /dev/ttyACM0 
```

如果您以普通用户身份打开串行端口时遇到错误，您可以将自己添加到正确的组中。根据上面的例子，组名`dialout`在我的 openSUSE 发行版上。您的可能会有所不同，因此请在以下命令中替换该组名：

```
sudo usermod -a -G dialout <USER_NAME> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-13T18:26:54.017

只需输入：

```
h = openserial("/dev/ttyACM0", "9600, n, 8, 1"); 
```

你就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-03T12:16:28.867

保持简单，STRINGS 是一个有效的移植选项，因此 Luis 发布：

“......只需输入：

```
h = openserial("/dev/ttyACM0", "9600, n, 8, 1"); 
```

然后你就完了……”

例如，假设您的 arduino 在 Scilab 上使用串行端口“/dev/ttyACM0”类型：

```
n=300 // plot 300 data points from serial port "/dev/ttyACM0"
h=openserial("/dev/ttySACM0","9600,n,8,1")
i=1;
while i<=n
data(i) = strtod(readserial(h)); // char to number
plot(i,data(i),'b-o'); // real time plot
drawnow(); // show data
i=i+1;
end 
```

# javascript - 如何使用jquery获取分配了多个类名的html元素的类名属性之一

> ID：15527819
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:28:03.883
> 
> 标签：javascript, jquery, html, frontend

例如：

```
<div class="home current">home</div> 
```

当我使用`$(this).attr("class")`时，它只是返回“家庭当前”。我只想获得“家”属性。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:30:37.227

如果你知道类名并想检查一个元素是否有它，你可以使用`.hasClass()`

```
// will return true if the element has that class applied to it
$(elem).hasClass('home'); 
```

另一方面，如果您希望将每个类分别应用于一个元素，则可以按空格拆分并迭代：

```
var classes = $(elem).attr('class').split(' ');
for(var i=0; i<classes.length; i++) {
   classes[i]; // each class name
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:32:00.770

该`class`属性返回分配给元素的 css 类的空格分隔列表，使用字符串上的方法将其转换为数组`split`，并检索第一个，使用 [0] 索引器，如下所示：

```
 var firstClass = $(this).attr('class').split(' ')[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:32:34.633

是否有特定原因需要拉取课程列表。如果您知道要查找的类并且只需要检查该对象是否具有类主页，则可以执行以下操作：

```
$(this).hasClass("home"); 
```

否则，您可以拆分结果并检查您需要的任何类。

```
var classAttr = $(this).attr("class");
var classes = classAttr.split(" "); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:33:29.640

看来您需要元素的主要类。

```
var primaryClass= $(this).attr('class').split(' ')[0]. 
```

请记住，如果没有应用类，则在您使用它时，此行可能会导致异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:31:53.340

```
var allClass= $(this).attr("class");
var class = allClass.replace("current", ""); 
```

如果您只有“当前”作为附加类，这将起作用

# ruby-on-rails - Rails / sqlite3 部署到 heroku postgresql 时出错——已经更新了 gemfile 和 master

> ID：15527820
> 
> 赞同：0
> 
> 时间：2013-03-20T15:28:05.463
> 
> 标签：ruby-on-rails, postgresql, heroku, sqlite

我第一次使用 SQLite3 从本地 Rails 环境部署到使用 postgresql 的 Heroku。我已经更新了我的 gemfile 以制定适当的开发/生产组条款。我确保将这些更改包含在主文件中。但是，当我运行 db:push 时，我反复收到以下错误

非常感谢您的帮助

```
prompt> C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems/custo
m_require.rb:36:in `require': LoadError: cannot load such file -- sqlite3 (Seque
l::AdapterNotFound)
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/r
ubygems/custom_require.rb:36:in `require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/adapters/sqlite.rb:1:in `<top (required)>'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/r
ubygems/custom_require.rb:36:in `require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/r
ubygems/custom_require.rb:36:in `require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/core.rb:249:in `block in tsk_require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/core.rb:72:in `block in check_requiring_thread'
        from <internal:prelude>:10:in `synchronize'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/core.rb:69:in `check_requiring_thread'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/core.rb:249:in `tsk_require'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/database/connecting.rb:25:in `adapter_class'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/database/connecting.rb:54:in `connect'
        from C:/Program Files (x86)/Heroku/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/s
equel-3.20.0/lib/sequel/core.rb:119:in `connect'
        from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/lib/taps/sche
ma.rb:17:in `dump_table'
        from C:/Program Files (x86)/Heroku/vendor/gems/taps-0.3.23/bin/schema:32
:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:17.063

要使`heroku db:push`命令正常工作，您需要在Ruby Heroku 捆绑包的版本中同时安装`taps`和gems。`sqlite3`

从上面的回溯中，似乎`taps`已安装，但缺少`sqlite3`适配器。

要安装它，请尝试以下操作：

*   `Program Files`启动提升的命令提示符（这样您就可以毫无问题地写入
*   `cd "C:\Program Files (x86)\Heroku\ruby-1.9.2\bin"`目录。
*   调用`gem install sqlite3 --no-ri --no-rdoc`

那应该安装缺少的 gem 并允许`heroku db:push`使用您的 sqlite3 数据库。

希望有帮助。

# ios - AV Foundation：AVCaptureVideoPreviewLayer 和帧持续时间

> ID：15527822
> 
> 赞同：4
> 
> 时间：2013-03-20T15:28:08.227
> 
> 标签：ios, objective-c, cocoa-touch, avfoundation

我正在使用 AV Foundation 处理来自摄像机的帧（iPhone 4s、iOS 6.1.2）。我正在按照 AV Foundation 编程指南设置 AVCaptureSession、AVCaptureDeviceInput、AVCaptureVideoDataOutput。一切都按预期工作，我能够在`captureOutput:didOutputSampleBuffer:fromConnection:`委托中接收帧。

我也有这样的预览层设置：

```
AVCaptureVideoPreviewLayer *videoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:_captureSession];
[videoPreviewLayer setFrame:self.view.bounds];
videoPreviewLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;
[self.view.layer insertSublayer:videoPreviewLayer atIndex:0]; 
```

问题是，我在帧处理中不需要每秒 30 帧，而且我无论如何也不能这么快地处理它们。所以我使用这段代码来限制帧持续时间：

```
// videoOutput is AVCaptureVideoDataOutput set earlier
AVCaptureConnection *conn = [videoOutput connectionWithMediaType:AVMediaTypeVideo];
[conn setVideoMinFrameDuration:CMTimeMake(1, 10)];
[conn setVideoMaxFrameDuration:CMTimeMake(1, 2)]; 
```

这可以正常工作并限制*captureOutput*委托接收的帧。

但是，这也限制了预览层上的每秒帧数，并且预览视频变得非常无响应。

我从文档中了解到，帧持续时间是在连接上独立设置的，并且预览层确实具有不同的 AVCaptureConnection。检查混合/最大帧持续时间`[videoPreviewLayer connection]`表明它确实设置为默认值（1/30 和 1/24），并且与 AVCaptureVideoDataOutput 连接上设置的持续时间不同。

那么，是否可以仅在帧捕获输出上限制帧持续时间，而在预览视频上仍然看到 1/24-1/30 帧持续时间？如何？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T10:58:54.953

虽然有两个`AVCaptureConnection`s 是正确的，但这并不意味着它们可以独立设置最小和最大帧持续时间。这是因为它们共享*相同的物理硬件*。

如果连接#1 以（比如说）5 帧/秒的速率激活卷帘快门，帧持续时间为 1/5 秒，则连接#2*不可能*同时以 30 次/秒的速度激活快门。持续时间 1/30 秒。

要获得您想要的效果，需要两台相机！

接近你想要的唯一方法是遵循 Kaelin Colclasure 在 3 月 22 日的回答中概述的方法。

但是，您*确实*可以选择在该方法中变得更复杂一些。例如，您可以使用计数器来决定丢弃哪些帧，而不是让线程休眠。您可以使该计数器响应通过的实际帧速率（您可以从`captureOutput:didOutputSampleBuffer:fromConnection:`与图像数据一起进入代理的元数据中获取，或者您可以通过手动计时帧来计算自己）。你甚至可以通过合成帧而不是丢弃它们来非常合理地模拟更长的曝光——就像 App Store 中的许多“慢快门”应用程序所做的那样（撇开细节——例如不同的滚动快门伪影——没有真正*那*以 1/5 秒扫描的一帧与以 1/25 秒扫描然后粘合在一起的五帧之间的差异很大）。

是的，这有点工作，但您正试图让一台摄像机像两台摄像机一样实时运行——这绝非易事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T13:00:14.403

可以这样想：您要求捕获设备限制帧持续时间，以便获得更好的曝光。美好的。您想以更高的帧速率进行预览。如果您要以更高的速率进行预览，那么捕获设备（相机）将没有足够的时间来曝光帧，因此您可以在捕获的帧处获得更好的曝光。这就像要求在预览中查看与捕获的帧不同的帧。

我认为，如果可能的话，这也会是一种负面的用户体验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T15:55:37.570

我的 Cocoa (Mac OS X) 应用程序也遇到了同样的问题。这是我解决它的方法：

首先，确保在单独的调度队列中处理捕获的帧。还要确保丢弃您尚未准备好处理的任何帧；这是默认设置，但无论如何我都在下面设置了标志，只是为了证明我依赖它。

```
 videoQueue = dispatch_queue_create("com.ohmware.LabCam.videoQueue", DISPATCH_QUEUE_SERIAL);
    videoOutput = [[AVCaptureVideoDataOutput alloc] init];
    [videoOutput setAlwaysDiscardsLateVideoFrames:YES];
    [videoOutput setSampleBufferDelegate:self
                                   queue:videoQueue];
    [session addOutput:videoOutput]; 
```

然后在委托中处理帧时，您可以简单地让线程休眠所需的时间间隔。委托人没有醒来处理的帧被悄悄地丢弃。我在下面实现了用于计算丢帧的可选方法，作为健全性检查；我的应用程序从不使用这种技术记录丢弃任何帧。

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput
  didDropSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection;
{
    OSAtomicAdd64(1, &videoSampleBufferDropCount);
}

- (void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection;
{
    int64_t savedSampleBufferDropCount = videoSampleBufferDropCount;
    if (savedSampleBufferDropCount && OSAtomicCompareAndSwap64(savedSampleBufferDropCount, 0, &videoSampleBufferDropCount)) {
        NSLog(@"Dropped %lld video sample buffers!!!", savedSampleBufferDropCount);
    }
    // NSLog(@"%s", __func__);
    @autoreleasepool {
        CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
        CIImage * cameraImage = [CIImage imageWithCVImageBuffer:imageBuffer];
        CIImage * faceImage = [self faceImage:cameraImage];
        dispatch_sync(dispatch_get_main_queue(), ^ {
            [_imageView setCIImage:faceImage];
        });
    }
    [NSThread sleepForTimeInterval:0.5]; // Only want ~2 frames/sec.
} 
```

希望这可以帮助。

# sql - 如何解决“自引用表与 FOREIGN KEY 约束冲突”

> ID：15527823
> 
> 赞同：0
> 
> 时间：2013-03-20T15:28:11.613
> 
> 标签：sql, sql-server, sql-server-2008

我正在创建一个带有自动生成`employee id`前缀的简单表

```
sale_900000,sale_900001,sale_900002,sale_900003 
```

它是一个自引用表。

当我将数据插入表中时，会出现如下错误：

> *消息 547，级别 16，状态 0，过程 tr_generate_emp_id，第 42 行
> INSERT 语句与 FOREIGN KEY SAME TABLE 约束“Registration_Registration”冲突。冲突发生在数据库“test”、表“dbo.Registration”、列“empid”中。*

对于自动员工 ID，我`instead of insert`在桌子上使用触发器

这是我的桌子

```
CREATE TABLE [dbo].[Registration](
    [empid] [varchar](40) NOT NULL,
    [id] [int] IDENTITY(900000,1) NOT NULL,
    [First_Name] [varchar](40) NULL,
    [Last_Name] [varchar](40) NULL,
    [Address] [varchar](40) NULL,
    [E_Mail] [varchar](40) NULL,
    [Country] [varchar](40) NULL,
    [Mobile_No] [varchar](40) NULL,
    [Designation] [varchar](40) NULL,
    [managerID] [varchar](40) NULL,
 CONSTRAINT [PK_Registration] PRIMARY KEY CLUSTERED 
(
    [empid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

ALTER TABLE [dbo].[Registration]  WITH CHECK ADD  CONSTRAINT [Registration_Registration] FOREIGN KEY([managerID])
REFERENCES [dbo].[Registration] ([empid]) 
```

这是我的触发器

```
ALTER TRIGGER [dbo].[tr_generate_emp_id] ON [dbo].[Registration]
    INSTEAD OF INSERT
AS
    BEGIN
        DECLARE @id INT
        DECLARE @id1 INT
        DECLARE @id_s VARCHAR(50)

        DECLARE @empid VARCHAR(50)
        DECLARE @First_Name VARCHAR(50)
        DECLARE @Last_Name VARCHAR(50)
        DECLARE @Address VARCHAR(50)
        DECLARE @E_Mail VARCHAR(50)
        DECLARE @Country VARCHAR(50)
        DECLARE @Mobile_No VARCHAR(50)
        DECLARE @Designation VARCHAR(50)
        DECLARE @managerID VARCHAR(50)

            SELECT  @id = Id
            FROM   dbo.Registration
             IF @id IS NULL
             SET @id = 899999

              SET @id1 = @id + 1
           SELECt  @First_Name = First_Name ,
                    @Last_Name = Last_Name ,
                    @Address = Address ,
                    @E_Mail = E_Mail ,
                    @Country = Country ,
                    @Mobile_No = Mobile_No ,
                    @Designation = Designation ,
                    @managerID = managerID 

            FROM    INSERTED

              SET @id_s = CONVERT(VARCHAR(50), @id1)
              SET @empid = 'Sale_' + @id_s

             INSERT INTO dbo.Registration
                      ( empid ,
                        First_Name ,
                        Last_Name ,
                        Address ,
                        E_Mail ,
                        Country ,
                        Mobile_No ,
                        Designation ,
                        managerID 

                      )
              VALUES  ( @empid , -- empid - varchar(40)
                        @First_Name , -- First_Name - varchar(40)
                        @Last_Name  , -- Last_Name - varchar(40)
                        @Address , -- Address - varchar(40)
                        @E_Mail , -- E_Mail - varchar(40)
                        @Country, -- Country - varchar(40)
                        @Mobile_No , -- Mobile_No - varchar(40)
                        @Designation  , -- Designation - varchar(40)
                        @managerID -- managerID - varchar(40)
                      )
    END 
```

我正在插入

```
INSERT INTO dbo.Registration
        ( empid ,
          First_Name ,
          Last_Name ,
          Address ,
          E_Mail ,
          Country ,
          Mobile_No ,
          Designation ,
          managerID
        )
VALUES  ( '' , -- empid - varchar(40)
          'admin' , -- First_Name - varchar(40)
          'jon' , -- Last_Name - varchar(40)
          's-24' , -- Address - varchar(40)
          'abc@gmail.com' , -- E_Mail - varchar(40)
          'india' , -- Country - varchar(40)
          '098735322211' , -- Mobile_No - varchar(40)
          'manager' , -- Designation - varchar(40)
          ''  -- managerID - varchar(40)
        ) 
```

和错误

```
Msg 547, Level 16, State 0, Procedure tr_generate_emp_id, Line 42
The INSERT statement conflicted with the FOREIGN KEY SAME TABLE constraint "Registration_Registration". The conflict occurred in database "test", table "dbo.Registration", column 'empid'.
The statement has been terminated. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:50:34.197

主要问题是您首先要这样做。我刚刚通读了你的触发器。只是将 empid 更改为计算字段...

```
CREATE TABLE [dbo].[Registration](
    [empid] AS ('Sale_' + Convert(Varchar(50),id)) PERSISTED,
    [id] [int] IDENTITY(900000,1) NOT NULL,
    [First_Name] [varchar](40) NULL,
    [Last_Name] [varchar](40) NULL,
    [Address] [varchar](40) NULL,
    [E_Mail] [varchar](40) NULL,
    [Country] [varchar](40) NULL,
    [Mobile_No] [varchar](40) NULL,
    [Designation] [varchar](40) NULL,
    [managerID] [varchar](40) NULL,
 CONSTRAINT [PK_Registration] PRIMARY KEY CLUSTERED 
(
    [empid] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:52:31.233

在你的触发器中，我认为这条线

```
SELECT  @id = Id 
```

旨在阅读

```
SELECT  @id = MAX(Id) 
```

我很惊讶您没有因此收到 PK 违规错误。FK 违规错误只能是由于尝试插入与 empid 值不匹配的 MangerId 值（据我从代码中看到的）。因此，请检查您提供的 managerId 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:52:42.047

1.  检查您的巢等级。

[http://msdn.microsoft.com/en-us/library/ms182737(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms182737(v=sql.100).aspx)

我会将这个值放在 (dbo.) AuditTable 中，这与您的主表无关。trigger_nestlevel()

1.  从基于行的逻辑更改为基于集的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:57:44.503

我重新设置了您的触发器，但我认为@Love2Learn 可能为您提供更好的解决方案。

```
ALTER TRIGGER [dbo].[tr_generate_emp_id] ON [dbo].[Registration]
    INSTEAD OF INSERT
AS
    BEGIN
    DECLARE @id INT

        -- Get the last id used.
        SELECT  @id = MAX(Id)
        FROM   dbo.Registration

        IF @id IS NULL
            SET @id = 899999

         WITH MyInserted AS (SELECT
                        ROW_NUMBER() OVER(ORDER BY E_Mail) AS rownum-- Email is just a random order by here.  Could be anything you want.
                        ,*  
                        FROM inserted)
         INSERT INTO dbo.Registration
                  ( empid ,
                    First_Name ,
                    Last_Name ,
                    Address ,
                    E_Mail ,
                    Country ,
                    Mobile_No ,
                    Designation ,
                    managerID 

                  )
         SELECT -- add the last id used with the rownum (ranges from 1 to num of rows)
                'Sale_'+CONVERT(VARCHAR(50), @id+rownum) -- empid - varchar(40)
                First_Name, -- First_Name - varchar(40)
                Last_Name, -- Last_Name - varchar(40)
                Address,  -- Address - varchar(40)
                E_Mail, -- E_Mail - varchar(40)
                Country, -- Country - varchar(40)
                Mobile_No, -- Mobile_No - varchar(40)
                Designation, -- Designation - varchar(40)
                ManagerID  -- managerID - varchar(40)
        FROM MyInserted
END 
```

# iphone - 升级到 iOS 6.1.2 sdk 可用吗？

> ID：15527824
> 
> 赞同：0
> 
> 时间：2013-03-20T15:28:14.760
> 
> 标签：iphone, ios, objective-c, ios6

我最近将我的 iphone 更新到 6.1.2。我不再能够使用我的 iphone 进行开发，因为我有 ios 6 sdk！我现在该怎么办？我应该将我的 ios sdk 升级到 6.1.2 吗？**是可用的么？？**..我本来想这样做，但我能找到的只是ios 6 sdk的几个beta版本，它们显然没有在苹果开发者网站上指定它们是什么版本？

我试图从 XCode -> Preferences -> Downloads 升级我的 ios sdk。但显然那里没有任何可用的 ios sdk 6.1.2 更新！

关于如何解决此问题的任何建议？非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:51:40.277

您需要升级您的 Xcode 以支持您的 Iphone 的操作系统版本...您可以轻松地从您的 Mac 中的 AppStore 升级您的 Xcode...只需单击 App Store，然后查看更新选项卡...您将得到您需要的.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:13:42.053

最新的 Xcode（从 Mac App Store 获取）应该为您提供所需的一切！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:31:42.767

进入[iOS 开发中心](https://developer.apple.com/devcenter/ios/index.action)，直接下载最新的 XCode 4.6.1（包括最新的 SDK 6.1）。

# c++ - 在 c++ 中使用和包含有什么区别？

> ID：15527827
> 
> 赞同：15
> 
> 时间：2013-03-20T15:28:37.997
> 
> 标签：c++

我知道 include 用于类，而 using 用于一些内置的东西，比如命名空间 std... 当你包含一些东西时，你可以创建对象并使用它们，但是当你“使用”一些东西时，你可以使用某种内置函数。但是，我应该如何创建自己可以“使用”的“库”？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T15:31:34.507

简单地说`#include`就是告诉预编译器简单地将包含的头文件的内容复制并粘贴到当前翻译单元中。它由预编译器评估。

While`using directive`指示编译器将符号名称从另一个作用域带入当前作用域。这基本上是由编译器实现的。

> **但是，我应该如何创建自己可以“使用”的“库”？**

命名空间是用于防止符号名称冲突的东西。通常每个库实现者都会将他们的功能封装在一个或多个命名空间中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:33:39.600

“包含”基本上是将文件的值复制粘贴到“包含”行的位置。这用于使您的源代码（通常是 .c 文件）了解其他源代码的声明（通常位于 .h 文件中）。

'using' 基本上告诉编译器在下一个代码中你正在使用一些东西（通常是命名空间），所以你不必每次都明确地这样做：

代替：

```
std::string a;
std::string b;
std::string c; 
```

你可以写：

```
using namespace std;
string a;
string b;
string c; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-18T09:38:34.397

您可以说两者都提供相同的功能，但 #include 不是由编译器完成的，而 using 是由编译器完成的。在#include 中，所有代码都放在文件中，其中给出了#include，其中命名空间给出了从一个范围到另一个范围的函数和变量的定义。如果你在两个头文件中有同名的函数并且都包含了，那么会出现重新声明的错误，但是如果它们来自不同的命名空间，你可以使用同名的函数。

# ruby - 将二维数组映射到具有索引的一维数组

> ID：15527829
> 
> 赞同：0
> 
> 时间：2013-03-20T15:28:44.840
> 
> 标签：ruby

我有这样的二维数组：

```
ary = [
  ["Source", "attribute1", "attribute2"],
  ["db", "usage", "value"],
  ["import", "usage", "value"],
  ["webservice", "usage", "value"]
] 
```

我想在哈希中提取以下内容：

```
{1 => "db", 2 => "import", 3 => "webservice"} // keys are indexes or outer 2d array 
```

我知道如何通过循环二维数组来获得这个。但是因为我正在学习红宝石，所以我想我可以用这样的东西来做到这一点

```
ary.each_with_index.map {|element, index| {index => element[0]}}.reduce(:merge) 
```

这给了我：

```
{0=> "Source", 1 => "db", 2 => "import", 3 => "webservice"} 
```

如何从输出映射中删除 0 元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:10:17.680

我会写：

```
Hash[ary.drop(1).map.with_index(1) { |xs, idx| [idx, xs.first] }]
#=> {1=>"db", 2=>"import", 3=>"webservice"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:58:27.930

`ary.drop(1)`删除第一个元素，返回其余元素。

您可以直接构建哈希而不使用合并减少`each_with_object`

```
ary.drop(1)
  .each_with_object({})
  .with_index(1) { |((source,_,_),memo),i| memo[i] = source } 
```

或者映射到元组并发送到`Hash[]`构造函数。

```
Hash[ ary.drop(1).map.with_index(1) { |(s,_,_),i| [i, s] } ] 
```

# angularjs - 如何从控制台测试 AngularJS 服务？

> ID：15527832
> 
> 赞同：402
> 
> 时间：2013-03-20T15:28:55.187
> 
> 标签：angularjs, angularjs-service

我有这样的服务：

```
angular.module('app').factory('ExampleService', function(){
  this.f1 = function(world){
    return 'Hello '+world;
  }
  return this;
}) 
```

我想**从 JavaScript 控制台测试它**并调用`f1()`服务的功能。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：729
> 
> 时间：2013-03-20T23:10:29.603

# TLDR：在**一行**中，您正在寻找的命令：

```
angular.element(document.body).injector().get('serviceName') 
```

* * *

### 深潜

AngularJS 使用**依赖注入 (DI)**将服务/工厂注入到您的组件、指令和其他服务中。所以获取服务需要做的是首先获取AngularJS的**注入**器（注入器负责连接所有的依赖关系并将它们提供给组件）。

要获取应用程序的**注入器**，您需要从 Angular 正在处理的元素中获取它。例如，如果您的应用在您调用的 body 元素上注册`injector = angular.element(document.body).injector()`

从检索到的`injector`内容中，您可以获得您喜欢的任何服务`injector.get('ServiceName')`

有关此答案的更多信息：[Can't retrieve the injector from angular](https://stackoverflow.com/questions/13400687/cant-retrieve-the-injector-from-angular)
还有更多信息：[Call AngularJS from legacy code](https://stackoverflow.com/questions/10490570/call-angular-js-from-legacy-code)

* * *

获取`$scope`特定元素的另一个有用的技巧。**使用开发人员工具的DOM 检查工具**选择元素，然后运行以下行（`$0`始终是选定元素）：
`angular.element($0).scope()`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-20T16:24:57.193

首先，您的服务的修改版本。

## 一个 ）

```
var app = angular.module('app',[]);

app.factory('ExampleService',function(){
    return {
        f1 : function(world){
            return 'Hello' + world;
        }
    };
}); 
```

这将返回一个对象，这里没有任何新内容。

现在从控制台获取它的方法是

## b)

```
var $inj = angular.injector(['app']);
var serv = $inj.get('ExampleService');
serv.f1("World"); 
```

## C ）

您之前在那里所做的一件事是假设 app.factory 返回您的函数本身或它的新版本。事实并非如此。为了得到一个构造函数，你要么必须做

```
app.factory('ExampleService',function(){
        return function(){
            this.f1 = function(world){
                return 'Hello' + world;
            }
        };
    }); 
```

这将返回一个 ExampleService 构造函数，您接下来必须对其执行“新建”。

或者，

```
app.service('ExampleService',function(){
            this.f1 = function(world){
                return 'Hello' + world;
            };
    }); 
```

这将在注入时返回 new ExampleService()。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-12-09T15:34:49.507

@JustGoscha 的答案很准确，但是当我想访问时要输入很多内容，所以我将它添加到我的 app.js 的底部。然后我只需要输入`x = getSrv('$http')`http 服务即可。

```
// @if DEBUG
function getSrv(name, element) {
    element = element || '*[ng-app]';
    return angular.element(element).injector().get(name);
}
// @endif 
```

它将它添加到全局范围，但仅在调试模式下。我把它放在里面，`@if DEBUG`这样我就不会在生产代码中得到它。 [我使用这种方法从产品构建中删除调试代码。](https://stackoverflow.com/questions/20460680/how-do-i-remove-some-javascript-during-grunt-usemin-compilation/20463180#20463180)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-01-29T11:19:01.670

Angularjs 依赖注入框架负责将应用模块的依赖注入到控制器中。这可以通过其注射器实现。

您需要首先识别 ng-app 并获取关联的注入器。下面的查询用于在 DOM 中找到您的 ng-app 并检索注入器。

```
angular.element('*[ng-app]').injector() 
```

但是，在 chrome 中，您可以指向目标 ng-app，如下所示。并使用`$0`hack 和 issue`angular.element($0).injector()`

拥有注入器后，获取任何依赖注入服务，如下所示

```
injector = angular.element($0).injector();
injector.get('$mdToast'); 
```

[![在此处输入图像描述](../Images/3f4c093bd8b7724b464d76b506c125bc.png)](https://i.stack.imgur.com/7GsCz.png)

# vb.net - VB.NET：从其他类添加取消事件处理程序

> ID：15527833
> 
> 赞同：0
> 
> 时间：2013-03-20T15:28:57.527
> 
> 标签：vb.net, event-handling, progress-bar

我试图找出一种使用事件、处理程序的方法——从异步操作中取消操作（进度条）。

我有一个类 ProgressBar，它显示操作的进度。它有一个 Cancel 按钮（它是 Friend WithEvents，通常生成，并且有一个 Private Sub ButtonCancel_click）。没什么特别的。

Cancel 设置一个公共的 CancelButtonHasBeenPressed。

我希望能够在另一个班级中对按下取消做出反应。

我阅读了有关添加处理程序以对事件做出反应，并在操作结束时删除处理程序的信息，这是我应该做的。

就像是：

```
Public Function Mine(ByRef myProgress As ThatProgressWindow)
  ' some setup  
  AddHandler CancelEvent, AddressOf myProgress.ButtonCancel_Click
  ' create and call workers
  RemoveHandler CancelEvent, AddressOf myProgress.ButtonCancel_Click
End Function
Public Event CancelEvent()
Private Function worker(ByVal state As Object) As Object
  ' do work
  If ' how do I check for the event ? Then drop everything and run
End Function 
```

上面代码/伪代码的问题：

1）在 AddHandler 中，我应该添加一个存在的事件，该事件与实际取消相关联-但 ProgressBar 中没有任何内容，按原样执行此操作-如何添加取消？我只有一个取消按钮......所以我不得不将 button_click 设为公开，这可能是错误的......

不知何故，我在想用户按下取消会触发那个事件......这不是真的吗？我对此真的很陌生，并且网络似乎在所有示例中都假设查看这些示例的人已经是专家。

2）我如何检查事件是否已被提出？

当我尝试以任何形式键入“If”后跟事件名称时，Intellisense 一直告诉我这是错误的。

请帮我开始！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:50:46.377

您是否考虑过使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)？它支持进度事件和取消。

顺便说一句，不要`ByRef`在你的`Mine`函数中使用。这不是必需的，如果维护您的代码的人没有意识到参数是`ByRef`.

# c - 不存在 return 语句时 int 类型 return 语句的返回值

> ID：15527834
> 
> 赞同：-5
> 
> 时间：2013-03-20T15:29:00.033
> 
> 标签：c, function, return

不存在 return 语句时 int 类型 return 语句的返回值是多少

为什么？

```
int func()
{
 printf("Hello");
}

int func1()
{

}

void main()
{
 int s,p;

 s=func();
 p=func1();
 printf("%d %d", s, p);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:31:24.420

在 C 中（这就是问题的标记方式），两者的返回值`func`和`func1`是未定义的。

> ### C11 (n1570), § 6.9.1 函数定义
> 
> 如果`}`到达终止函数的 ，并且调用者使用函数调用的值，则行为未定义。

此外，在托管环境中，`main`返回类型应该是`int`，而不是`void`。顺便说一句，有一个例外：在 C99 和 C11 中，如果达到`}`终止`main`(*) 的值，则返回给环境的值为 0。

(*) 如果它的返回类型与`int`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:29:59.530

你在评论中说：

> 在 func() 的情况下，我得到的返回值为 5

实际上，这一次在您的机器上似乎发生的事情是`printf`（即 5，打印的字符数）的返回值返回到`func`寄存器中。`func`在它自己的返回之前没有修改该寄存器，因此看到它检查同一寄存器时`main`的返回值似乎是什么。`func`

您可以通过查看反汇编的可执行代码来确认或反驳这一点`func`。

如果这确实是发生的事情，那么它是正在使用的调用约定的细节，以及调用`func`后不使用寄存器的偶然情况`printf`。正如基里连科所说，这种行为在形式上是未定义的，您无权依赖它。

# javascript - ng-show 用于 ng-repeat 中的特定元素

> ID：15527838
> 
> 赞同：6
> 
> 时间：2013-03-20T15:29:05.980
> 
> 标签：javascript, indexing, angularjs

我似乎无法解决这个小问题：

```
<ul ng-repeat="parent in parents">
  <li>Mother: <i>{{parent.mother}}</i></li>
  <li>Father: <i>{{parent.father}}</i></li>
  <a href="#" ng-click="showKids()">Show Kids</a>
  <ul ng-repeat="kid in parent.kids" ng-show="active">
    <li>{{kid.name}}</li>
  </ul>
</ul> 
```

[http://jsfiddle.net/twSFK/5/](http://jsfiddle.net/twSFK/5/)

当我单击“显示孩子”时，我只想显示我单击的父母的孩子，而不是另一个。所以我需要某种索引用于我在 ng-show 中使用的模型，以仅针对特定元素。

由于 $scope.parents 来自后端服务器并加载了 ng-init，我不知道如何在控制器写入列表之前访问它以添加“活动”元素。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-20T16:10:12.530

您可以设置迭代器索引`ng-repeat="parent in parents"`并使用它来玩两个功能：`showKids(index)`当您单击孩子列表时，将标记哪些父列表应该变为活动状态，以及`isShowing(index)`为了知道您应该显示哪些孩子子列表`ng-show`

我在这里根据我的想法重写了你的代码[http://jsfiddle.net/odiseo/twSFK/7/](http://jsfiddle.net/odiseo/twSFK/7/)

# javascript - AngularJS 指令绑定

> ID：15527843
> 
> 赞同：4
> 
> 时间：2013-03-20T15:29:25.623
> 
> 标签：javascript, jquery, angularjs

我一直在尝试影响父范围中的变量以从指令内部切换 ng-show。该指令是包含 ng-repeat 指令的自定义指令。这个想法是，一旦 ng-repeat 完成，我想隐藏包含的 div 以及其中的元素。

这是一个 Plunkr 演示我的情况：[http](http://beta.plnkr.co/edit/C42Z25?p=preview) ://beta.plnkr.co/edit/C42Z25?p=preview 这里 还有一个 JSFiddle 中的比较，它使用了同样的问题，但它不是一个 ng-repeat，所以它可以工作：[http ://jsfiddle.net/dyzPC/](http://jsfiddle.net/dyzPC/)

所以有几个问题。在我的指令中，我必须使用`scope.$parent.showMe = true`来更改父范围的`showMe`，我似乎不能只使用`scope.showMe = true`来设置它。我尝试使用隔离范围，没有范围，真正的范围，似乎没有任何效果。

此外，在 jquery 回调函数中，我似乎无法将父范围 showMe 重置为`scope.$parent.showMe = false`. 这可以防止我在有内容时显示包含的 div，并在没有内容时隐藏它。

附带说明一下，最后一个问题是`$last`. 在 plunkr 示例中，使用 $last 是可能的，但在我的真实代码中，ng-repeat 集合正在从 HTTP 响应拦截器中填充。这似乎阻止了 $last 被使用，因为所有元素都以`$last = true`. 是否有另一种方法可以检测 ng-repeat 何时完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T22:10:05.017

`scope.$parent.showMe = false;`在您的指令中，您需要包含`scope.$apply()`：

```
scope.$parent.showMe = true; //this one works
element.hide().fadeIn('fast').delay(2000).fadeOut('slow', function(){
   scope.$apply(function(){
      scope.$parent.showMe = false;
   });
}); 
```

这是因为您正在更改 Angular（您的 jQuery 函数）之外的 Angular 属性的值，因此 Angular 不知道`scope.showMe`已更改。

你的指令与你的在同一个标​​签中`ngRepeat`，你不能使用隔离范围，因为它会删除你的绑定`ng-repeat="httpMessage in messages"`。换句话说，`httpMessages`如果您在此处隔离范围，则不会存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T03:45:49.497

我会将隐藏/显示逻辑和 ng-repeat 向下移动到指令中，然后让控制器通过指令的属性向指令提供消息列表。

```
app.directive("hideShow", function() {
return {
    restrict: 'E',
    template: 
    "<div ng:repeat='message in messages'>" +
    "  <em>{{message.message}}</em> " +
    "</div>",
    scope: {
        messages: "="
    },
    link: function(scope, element, attrs) {
        element.hide();
        scope.$watch("messages", function() {
            element.fadeIn('fast').delay(1000).fadeOut('slow');               
        });
    }
};
}); 
```

这是一个[工作的 Fiddle](http://jsfiddle.net/8yStR/1/)。

# sql - 将一个整数转换为 varchar 并附加一个字符串到日期时间

> ID：15527845
> 
> 赞同：0
> 
> 时间：2013-03-20T15:29:26.927
> 
> 标签：sql, datetime, integer, sql-server-2012, varchar

我不明白为什么这个 sql 代码片段不起作用：

```
cast(cast(b.remodelyear as varchar(5)) + '-01-01' as datetime) 
```

改造年份是由年份组成的整数（例如：2012）。我将其转换为 varchar 并在其上附加一个月和一天，然后将整个内容转换为日期时间。

这个有效：

`cast(cast(Yr as varchar(5)) + '-' + cast(Mth as varchar(5)) + '-' + '01' as datetime)`

我哪里做错了？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:59:28.973

就个人而言，我不会为此连接字符串，我会执行一些（微不足道的）日期数学：

```
SELECT DATEADD(year, b.remodelyear - 1, '00010101')
FROM <sometable> b 
```

（请注意，我假设 SQL Server -[阅读此博客文章](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)了解日期格式背后的原因。如果您使用不同的 RDBMS，则需要对其进行翻译）。
我很好奇您为什么要转换为`varchar(5)`，因为我所知道的几乎每个 RDBMS 都会在遇到第五位数字时引发错误。

# visual-studio-2010 - 误删.cs文件内容

> ID：15527846
> 
> 赞同：0
> 
> 时间：2013-03-20T15:29:29.503
> 
> 标签：visual-studio-2010

我犯了一个非常严重的错误，重写然后保存了一个关键的 .cs 文件。

按 CTRL+A（全选），粘贴新内容，就是这样。我的错。（当然，当它真的是 Check.aspx.cs 时，我认为它是 CheckX.aspx.cs）会更加关注名称并重新考虑我命名文件的方式，但到目前为止我想知道是否有什么方法可以检索我已删除的所有 .cs。

提前致谢

# bash - 将文件重命名为原始扩展名

> ID：15527847
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:29:32.440
> 
> 标签：bash

在编写 bash 脚本时需要帮助，该脚本将重命名作为文件名输出的文件 name.suffix.date 我需要将这些文件改写为 name.date.suffix。

编辑：将后缀从日期更改为〜这是我到目前为止的内容：

```
find . -type f -name "*.~" -print0 | while read -d $'\0' f
do
   new=`echo "$f" | sed -e "s/~//"`
   mv "$f" "$new"
done 
```

这会将后缀改回原始后缀，但无法弄清楚如何在扩展名之前获取要命名的日期（fname??）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:07:20.290

您可以使用正则表达式匹配来拆分原始文件名：

```
find . -type f -name "*.~" -print0 | while read -d $'\0' f
do
   dir=${f%/*}
   fname=${f##*/}
   [[ $fname =~ (.+)\.([^.]+)\.([^.]+)\.~$ ]] || continue
   name=${BASH_REMATCH[1]}
   suffix=${BASH_REMATCH[2]}
   d=${BASH_REMATCH[3]}

   mv "$f" "$dir/$name.$d.$suffix" 
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:02:15.217

仅限 Bash 的解决方案：

```
while IFS=. read -r -u 9 -d '' name suffix date tilde
do
    mv "${name}.${suffix}.${date}.~" "${name}.${date}.${suffix}"
done 9< <(find . -type f -name "*.~" -print0) 
```

笔记：

*   `-d ''`给你同样的结果`-d $'\0'`
*   在读取文件时按点拆分文件名。当然，这意味着如果其他地方有点，它就会破裂。
*   否则应该适用于几乎任何文件名，包括那些包含空格、换行符和其他有趣业务的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:47:29.127

1.  剪切文件名的每个部分：

    ```
    FIN=$(echo test.12345.ABCDEF | sed -e 's/[a-zA-Z0-9]*[\\.][a-zA-Z0-9]*[\\.]//')
    DEBUT=$(echo test.12345.ABCDEF | sed -e 's/[\\.][a-zA-Z0-9]*[\\.][a-zA-Z0-9]*//')
    MILIEU=$(echo test.12345.ABCDEF | sed -e 's/'${FIN}'//' -e 's/'${DEBUT}'//' -e 's/[\.]*//g') 
    ```

2.  按预期粘贴每个部分：

    ```
    echo ${DEBUT}.${FIN}.${MILIEU} 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:58:09.920

```
rename --no-act 's/\(name-regex\).\(suffix-regex\).\(date-regex\)/\1.\3.\2' * 
```

调整三个正则表达式以适合您的文件名，并`--no-act`在您对实际重命名文件的结果感到满意时删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:38:26.090

1.  首先创建文件列表并重定向到文件。ls > 文件列表.txt

2.  在 Perl 中打开文件并逐行读取。使用正则表达式匹配文件的各个部分并像这样捕获它们

    `my ($fileName,$suffix,$date)=($WholeFileName=~/(.*)\.(.*)\.(.*)/);`

    这应该为您捕获三个单独的变量。现在您需要做的就是将旧文件移动到新文件名。新文件名将是您获得的上述三个变量的串联。$新文件名=$文件名。".".$date.".".$ 后缀。如果您有示例文件名，请发表评论，我可以用简短的脚本回复。Perl 不是唯一的方法。您可以只使用 bash 或 awk 并找到替代方法来执行此操作。

# android - ClassCastException：无法转换为 android.app.Activity

> ID：15527850
> 
> 赞同：1
> 
> 时间：2013-03-20T15:29:35.953
> 
> 标签：android, fragment, classcastexception

我在片段中有一个列表，当我按下该列表中的某些内容时，我希望启动一个新活动。我只尝试了我的第一个选项，但是当我尝试它时，我得到了错误：

```
03-20 15:16:13.017: E/AndroidRuntime(941): Caused by: java.lang.ClassCastException: com.test.test.Algebra cannot be cast to android.app.Activity 
```

这是我的片段类：

```
public class FragmentTest extends SherlockListFragment {

String formler[]= {
        "Algebra",
        "Aritmetik",
        "Differential- och integralkalkyl",
        "Funktioner",
        "Geometri",
        "Komplexa tal",
        "Statistik och sannolikhet",
        "Trigonometri"
};

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    setListAdapter(new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_list_item_1, formler));

    return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String choice = formler[position];
    try{
        @SuppressWarnings("rawtypes")
        Class choiceClass = Class.forName("com.test.test." + choice);
        Intent startIntent = new Intent(getActivity().getBaseContext(), choiceClass);
        startActivity(startIntent);
    }catch(ClassNotFoundException e){
        e.printStackTrace();
    }
} 
```

}

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:35:18.220

确保代数正在扩展一项活动，您也可以像这样简单地启动一项活动`new Intent(currectActivity.this, Algebra.class);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:43:55.253

我从未使用过 SherlockListFragment，但我使用了 Fragment。当我想初始化一个新片段时，我使用了

```
NewFragmentClass newFragment = new NewFragmentClass ();
FragmentTransaction transaction = getFragmentManager().beginTransaction();
transaction.replace(R.id.myCurrentFragmentId, newFragment);
transaction.addToBackStack(null);
// Commit the transaction
transaction.commit(); 
```

我希望这有帮助

# iphone - 如何按最近活动对 GKTurnBasedMatch 进行排序？

> ID：15527854
> 
> 赞同：4
> 
> 时间：2013-03-20T15:29:43.233
> 
> 标签：iphone, ios, nspredicate, game-center, gamekit

我正在创建一个带有菜单屏幕的简单文字游戏，其中显示了用户的所有活动匹配项。我想按从最近到最近最不活跃的顺序对这个匹配数组进行排序，但是与轮流玩家相关的唯一时间戳属性是`GKTurnBasedParticipant`...的属性`GKTurnBasedMatch`没有有用的排序属性。

`GKTurnBasedMatch`有一组`GKTurnBasedParticipant`对象作为属性，所以我当然可以想出某种解决方案，但我想不出任何不会真正混乱和低效的东西。有没有什么简单的方法`NSPredicate`可以在这样的情况下使用来深入研究每个参与者数组，查看最新的时间戳并一次性对所有匹配项进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T15:36:47.610

我没有`NSPredicate`基于 - 的解决方案，或者可能没有您希望的任何优雅的解决方案，但是我遇到了同样的问题并编写了自己的解决方案，实际上并没有那么糟糕。

我的解决方案是针对只能有两个参与者的游戏，因此请进行相应修改，但这是我最终使用的代码：

```
[myGamesArray sortUsingComparator:^NSComparisonResult(CHGame *game1, 
                                                      CHGame *game2) {

    if (YES == [game1 localPlayersTurn] && NO == [game2 localPlayersTurn]) {
        return NSOrderedAscending;
    } else if (NO == [game1 localPlayersTurn] && YES == [game2 localPlayersTurn]) {
        return NSOrderedDescending;
    }

    NSDate *lm1 = [game1.match lastMove];
    NSDate *lm2 = [game2.match lastMove];
    if (lm1 != nil && lm2 != nil) {
        return [lm1 compare:lm2];
    }

    return NSOrderedSame;

}]; 
```

where`CHGame`是我为我的游戏构建的自定义类（具有`GKTurnBasedMatch` `match`属性），并且实例方法`localPlayersTurn`返回一个`BOOL`指示是否轮到本地参与者。

然后我`lastMove`在一个类别中写了一个方法`GKTurnBasedMatch`：

```
- (NSDate *)lastMove {
    GKTurnBasedParticipant *localParticipant, *otherParticipant;
    NSDate *lastMove;

    for (GKTurnBasedParticipant *participant in self.participants) {
        if (YES == [participant.playerID isEqualToString:[GKLocalPlayer localPlayer].playerID]) {
            localParticipant = participant;
        } else {
            otherParticipant = participant;
        }
    }

    if (localParticipant == self.currentParticipant) {
        lastMove = otherParticipant.lastTurnDate;
    } else {
        lastMove = localParticipant.lastTurnDate;
    }

    return lastMove;
} 
```

同样，这仅适用于总共两个参与者，但对于任意数量的参与者都可以轻松修改。

希望这会有所帮助，即使它不完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T05:13:36.830

# 按当前参与者的最后一回合对回合制比赛进行排序

```
[GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error)
 {
     NSString *descriptorKey = @"currentParticipant.lastTurnDate";

     NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:descriptorKey
                                                                      ascending:NO];

     NSArray *sortedMatches = [matches sortedArrayUsingDescriptors:@[sortDescriptor]];
 }]; 
```

* * *

* * *

* * *

# 按创建日期对回合制比赛进行排序

```
[GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error)
 {
     NSString *descriptorKey = @"creationDate";

     NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:descriptorKey
                                                                      ascending:NO];

     NSArray *sortedMatches = [matches sortedArrayUsingDescriptors:@[sortDescriptor]];
 }]; 
```

# c++ - C++ File IO，如何指定输出位置

> ID：15527855
> 
> 赞同：1
> 
> 时间：2013-03-20T15:29:44.220
> 
> 标签：c++, file-io

我一直在尝试通过教程网站学习 C++ 中的文件 IO，并遇到了以下代码。

现在，如何指定输出文件的位置？我试过运行代码并搜索文件的位置，但没有用。

谢谢你。

```
ofstream myfile ("InOutExample.txt");
if (myfile.is_open())
{
    myfile << "This is a line.\n";
    myfile << "This is another line.\n";
    myfile.close();
}
else cout << "Unable to open file";
return 0;

system("pause"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:31:37.660

如果您指定位置，它将把它放在那里。

```
ofstream myfile ("c:\\temp\\InOutExample.txt"); 
```

如果您没有放置完整路径，它会将其放在当前工作目录中。

# javascript - 有没有办法将 Select2 中的结果包装在附加标记中？

> ID：15527856
> 
> 赞同：0
> 
> 时间：2013-03-20T15:29:44.463
> 
> 标签：javascript, jquery, jquery-select2

我一直在为我的项目使用 Select2 并取得了巨大的成功。

我想知道是否有人知道对下拉标记进行重大修改的最佳方法。

例如，我想在结果底部添加一个输入字段和一个按钮。

![截屏](../Images/4dd06b7146351e6a114530d9bc1d02df.png)

对于 select2 来说，这似乎是一项可行的任务吗？或者它是一个错误的工具？目前我正在使用内部开发的插件，但它并不可靠且速度慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T14:41:23.837

选项：

```
<style>
#s2id_test
{
    width: 200px;
}
.addedDiv
{
    padding-left: 10px;
    padding-right: 10px;
}
.addedDiv input
{
    display: inline-block;
    width: 120px;
}
.addedDiv button
{
    display: inline-block;
    width: 40px;
}
</style>

<body>
<select id="test">
    <option value="1">Test 1</option>
    <option value="2">Test 2</option>
    <option value="3">Test 3</option>
    <option value="4">Test 4</option>
    <option value="5">Test 5</option>
</select>
<script>
(function ($) {

/**
* @function
* @property {object} jQuery plugin which runs handler function once specified element is inserted into the DOM
* @param {function} handler A function to execute at the time when the element is inserted
* @param {bool} shouldRunHandlerOnce Optional: if true, handler is unbound after its first invocation
* @example $(selector).waitUntilExists(function);
* https://gist.github.com/buu700/4200601
*/

$.fn.waitUntilExists    = function (handler, shouldRunHandlerOnce, isChild) {
    var found       = 'found';
    var $this       = $(this.selector);
    var $elements   = $this.not(function () { return $(this).data(found); }).each(handler).data(found, true);

    if (!isChild)
    {
        (window.waitUntilExists_Intervals = window.waitUntilExists_Intervals || {})[this.selector] =
            window.setInterval(function () { $this.waitUntilExists(handler, shouldRunHandlerOnce, true); }, 100)
        ;
    }
    else if (shouldRunHandlerOnce && $elements.length)
    {
        window.clearInterval(window.waitUntilExists_Intervals[this.selector]);
    }

    return $this;
}

}(jQuery));
$(document).ready(function(){
    $('#test').select2();

    $('#test').on("open", function() {
        if (!$('.addedDiv',$('.select2-drop-active')).is('*'))
        {
           $('.select2-drop-active').waitUntilExists(function(){$('.select2-drop-active').append('<div class="addedDiv"><input type="text"><button onclick="add(this)">Add</button></div>')});
        }
    });
 });
 function add(btn)
 {
    if($(btn).prev().is('input'))
    {
        $('#test').append('<option value="'+$($(btn).prev()).val()+'">'+$($(btn).prev()).val()+'</option>');
        $('#test').select2('close');
        $('#test').select2('open');
    }
 }
</script> 
```

测试win32宽度：chrome、firefox、IE

# ios - 如何从 Mac 命令行启动 Mobile Safari

> ID：15527858
> 
> 赞同：1
> 
> 时间：2013-03-20T15:29:49.640
> 
> 标签：ios, macos, command-line, mobile-safari

我想从 Mac 命令行打开带有特定 url 的 Mobile Safari。我正在测试网页，我想自动化测试，但我无法使用某些工具从我的 mac 通过 USB 连接的 ipad 打开移动 safari。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T12:21:02.133

刚刚偶然发现您的帖子，如果您使用越狱设备，您可以使用 sbopenurl 从设备终端的 cmd 行启动 mobilesafari。

# css - CSS3 模糊动画

> ID：15527865
> 
> 赞同：1
> 
> 时间：2013-03-20T15:30:01.567
> 
> 标签：css, animation, cross-browser

我正在尝试获得跨浏览器兼容的模糊动画效果，尽管我似乎失败了！

我正在使用以下内容：

```
.image-container img.animate-me {

       -webkit-animation: focus 4s;
       -moz-animation: focus 4s;
       -ms-animation: focus 4s;
       -o-animation: focus 4s;
       animation: focus 4s;

       -webkit-animation-fill-mode: forwards;
       -moz-animation-fill-mode: forwards;
       -ms-animation-fill-mode: forwards;
       -o-animation-fill-mode: forwards;
       animation-fill-mode: forwards;
}

@keyframes focus {
    from {
        filter: url('blur.svg#blur');
        filter: progid:DXImageTransform.Microsoft.blur(PixelRadius='10'); 
          filter: blur(10px);
          -o-filter: blur(10px);
          -ms-filter: blur(10px);         
    }
    to {
        filter: url('focus.svg#focus');
        filter: none;
        filter:progid:DXImageTransform.Microsoft.blur(PixelRadius='0'); 
          -o-filter: blur(0px);
          -ms-filter: blur(0px);          
    }
  }

@-webkit-keyframes focus {
    from {
          -webkit-filter: blur(10px);
    }
    to {
          -webkit-filter: blur(0px);
    }
  }

@-moz-keyframes focus {
    from {
          filter: url('blur.svg#blur');
    }
    to {
          filter: url('focus.svg#focus');
    }
  } 
```

现在有一些事情必须指出。

1.  前缀的东西刚刚弄乱了，事实上我不知道第一个@keyframes 规则的一半现在在做什么！有人愿意告诉我哪些规则是不相关或无用的吗？

2.  Chrome（以及整个`@-webkit-keyframes`规则）完美运行……好老的、严肃的、无微软的 Chrome。我们从未怀疑过它！

3.  Internet Explorer 像往常一样装傻，表现得好像从来没有听说过 CSS3 这个词。我希望它可以追溯到 IE8，所以我不能责怪它，但我一直在 IE10 中进行测试，我希望至少会看到某种反应。

4.  `filter: url('blur.svg#blur');`如下：

    ```
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
    <filter id="blur">
    <feGaussianBlur stdDeviation="10" />
    </filter>
    </svg> 
    ```

当作为 CSS 规则添加时，这会使图像模糊，但在 @keyframe 动画中似乎没有任何作用。焦点版本将 stdDeviation 设置为 10。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:43:39.907

***总是把无前缀的版本放在最后！***Firefox 支持不带前缀的关键帧，但会使用您最后编写的任何一个（在您的情况下，是带前缀的关键帧）。

WebKit 浏览器是目前唯一支持 CSS 过滤器（当然是前缀）的浏览器。

Firefox 仅支持 SVG 过滤器等效项。

我从未听说过`-o-filter`或`-ms-filter`从未工作过（尽管我在旨在面向未来的演示中看到了它们）。

旧的 IE 过滤器在 IE10 中不起作用。关键帧动画在其他版本的 IE 中不起作用，但在 IE10 中。因此，关键帧（仅 IE10 可识别）内的 IE 过滤器（仅 IE 10 以前的版本可识别，但 IE10 无法识别）是无用的。

就我玩过这个而言，我还没有找到一种方法让 SVG 过滤器等效项与关键帧动画一起工作。

所以据我所知，你只能在 WebKit 中制作这样的动画。

# javascript - 我创建了一个对话框，现在如何关闭它？

> ID：15527866
> 
> 赞同：0
> 
> 时间：2013-03-20T15:30:03.580
> 
> 标签：javascript, html, ajax

我在下面包含了一个指向我的站点的链接，用于查看头部中的 JS，以及让您了解我是如何设置它的。如果您不想使用该链接，我也会尝试包含下面的代码。

我最近学习了一些基本的 AJAX 并在我的网站 [http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=37&TypeID=42&ListingID=42](http://classifieds.your-adrenaline-fix.com/detail.php?fatherID=37&TypeID=42&ListingID=42)的选择页面上创建了一个对话框，你会看到它出现在 onscroll .

如果有人可以与我分享如何使关闭按钮关闭对话框，我将不胜感激。

这是JS

```
<script type="text/javascript">
function loaddiv(thediv, thefile) {
    if (window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
    } else {
    xmlhttp = new ActiveXObject ('Microsoft.XMLHTTP');
    }

    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById(thediv).innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open('GET', thefile, true);
    xmlhttp.send();
}
</script> 
```

然后在页面上我只有

```
echo "<div id='div2'></div>"; 
```

然后对于弹出的框：

```
<div class="DoYouHaveADirtBikeForSaleBox">
<h2>Got A Dirt Bike You Want to Sell?</h2>
<p class="DirtBikeForSaleBannerButton">
<a href="http://classifieds.your-adrenaline-fix.com/add.php">Yea, Show Me How</a>
</p>

<p class="DirtBikeForSaleBannerButtonNoThanks">
<a href="CloseDialog">Nope, Get This Out of The Way</a>
</p> 
</div> 
```

如果有人可以与我分享如何通过单击关闭按钮使此对话框消失，我将不胜感激，并提前感谢大家。

谢谢，

斯图尔特 K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:33:16.607

您可以使用将其从 dom 中删除

```
element.parentNode.removeChild(element); 
```

或者您可以将元素的显示样式设置为“无”，然后您可以使用它并创建开闭

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:36:13.273

如果您不想再次显示，可以致电

`document.getElementById('div2').remove();`

在关闭按钮的 onclick 方法中。

或者，如果您可能再次使用它，请致电

`document.getElementById('div2').style.display = 'none';`

从 href 属性调用 close 函数：

`<a href="javascript: CloseDialog();">Nope, Get This Out of The Way</a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:37:32.837

如果您使用的是 jquery，则可以使用“live”方法来完成。即使在 ajax 请求之后，这也会将事件处理程序附加到页面上出现的任何新元素。因此，如果您给 close bit 上课：

```
<a href="#" class="close_dialog">Nope, Get this out of the way</a> 
```

如果 jquery，你可以使用这个位：

`$('.close_dialog').live('click', function(){ $('.DoYouHaveADirtBikeForSaleBox').remove(); });`

希望有帮助:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:38:33.367

或者你可以试试这个：

```
<div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
    <h2>Got A Dirt Bike You Want to Sell?</h2>
    <p class="DirtBikeForSaleBannerButton">
    <a href="http://classifieds.your-adrenaline-fix.com/add.php">Yea, Show Me How</a>
    </p>

    <p class="DirtBikeForSaleBannerButtonNoThanks">
    <a onclick="javascript:document.getElementById('DoYouHaveADirtBikeForSaleBox').style.visibility='hidden';">Nope, Get This Out of The Way</a>

    </p> 
</div> 
```

在我的本地主机 xD 上测试

****__ *_* __ *_* __ *_* __***已编辑****_* __ *_* __ *_* __ *_* __ *_* __****

 **最好试试这个，看看滚动是否再次显示 div：

```
<div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
    <h2>Got A Dirt Bike You Want to Sell?</h2>
    <p class="DirtBikeForSaleBannerButton">
    <a href="http://classifieds.your-adrenaline-fix.com/add.php">Yea, Show Me How</a>
    </p>

    <p class="DirtBikeForSaleBannerButtonNoThanks">
    <a onclick="javascript:var div = document.getElementById('DoYouHaveADirtBikeForSaleBox');div.parentNode.removeChild(div);">Nope, Get This Out of The Way</a> 
```

----------------------------------------更新2--------- ------------

```
 <div id='div2'>
    <div class="DoYouHaveADirtBikeForSaleBox" id="DoYouHaveADirtBikeForSaleBox">
    <h2>Got A Dirt Bike You Want to Sell?</h2>
    <p class="DirtBikeForSaleBannerButton">
    <a href="http://classifieds.your-adrenaline-fix.com/add.php">Yea, Show Me How</a>
    </p>

    <p class="DirtBikeForSaleBannerButtonNoThanks">
    <a onclick="javascript:var div = document.getElementById('div2');div.parentNode.removeChild(div);">Nope, Get This Out of The Way</a>

    </p> 
    </div>
    </div> 
```

萨卢多斯 ;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:44:07.227

您可以在 div2 中制作按钮并添加 onClick 属性，如下所示：

```
<button onclick="document.getElementById('div2').style.display='none'">Close</button> 
```**

# sql - 多次执行函数而不使用循环

> ID：15527868
> 
> 赞同：0
> 
> 时间：2013-03-20T15:30:08.033
> 
> 标签：sql, sql-server

我有一个带有 ID 的简单表：

```
ObjectId
----------
100
101
102 
```

我想像这样多次执行函数 fn_GetStuff(Id) ：

```
fn_GetStuff(100)
fn_GetStuff(101)
fn_GetStuff(102) 
```

是否可以在不使用循环的情况下做到这一点？

我试过这个它不起作用：

```
SELECT *
FROM myTable
INNER JOIN fn_GetStuff(myTable.ObjectId) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:32:46.743

OP 正在使用它看起来像的内联表值函数，因此他们需要一个`CROSS APPLY`...

```
Select  *
From    myTable mt
Cross   Apply schema.fn_GetStuff(mt.ObjectID) f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:31:54.540

假设你的函数是一个标量值函数，你可以这样做：

```
select fn_GetStuff(Objectid)
from myTable 
```

如果您的函数是表值的，那么您将需要使用`cross apply`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:32:05.497

您不需要加入，因为没有另一张桌子。你应该可以这样做：

```
SELECT fn_GetSTuff(t.ObjectId)
FROM myTable t 
```

# vba - 将前 3 列从不同的工作表复制到单个文件

> ID：15527869
> 
> 赞同：1
> 
> 时间：2013-03-20T15:30:09.133
> 
> 标签：vba, excel, worksheet

我有一堆始终具有相同工作表的数据集。

现在我想为每个工作表制作一个不同的文件。我发现了一些代码可以做到这一点：[http ://www.extendoffice.com/documents/excel/628-excel-split-workbook.html#kutools](http://www.extendoffice.com/documents/excel/628-excel-split-workbook.html#kutools)

但是，我也只想要这些工作表的前三列，最好总是从第 2 行开始。

有人可以指出我正确的方向。例如关于如何更改我发布的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:56:01.420

试试下面的代码：

```
Sub Splitbook()

    Application.ScreenUpdating = False

    Dim myPath As String
    Dim rng As Range
    Dim sht As Worksheet
    Dim lastRow As Long
    Dim wkb As Workbook

    For Each sht In ThisWorkbook.Sheets

        lastRow = sht.Range("A6500").End(xlUp).Row
        If lastRow < 2 Then GoTo nextSht

        Set rng = sht.Range("A2:C" & lastRow)
        If Not rng Is Nothing Then
            Set wkb = Workbooks.Add
            rng.Copy wkb.Sheets(1).Range("A2")
            myPath = filePath(sht.Name)
            wkb.SaveAs Filename:=myPath
            wkb.Close
            Set wkb = Nothing
            Set rng = Nothing
        End If

nextSht:
    Next

    Application.ScreenUpdating = True
End Sub

Function filePath(worksheetname As String) As String

    Dim fso As Object, MyFolder As String
    Set fso = CreateObject("Scripting.FileSystemObject")
    MyFolder = ThisWorkbook.Path & "\Reports"

    If fso.FolderExists(MyFolder) = False Then
        fso.CreateFolder (MyFolder)
    End If

    MyFolder = MyFolder & "\" & Format(Now(), "MMM_YYYY")
    If fso.FolderExists(MyFolder) = False Then
        fso.CreateFolder (MyFolder)
    End If

    filePath = MyFolder & "\" & worksheetname & Format(Now(), "DD-MM-YY hh.mm.ss") & ".xlsx"
    Set fso = Nothing

End Function 
```

# vim - Vim 中的代码折叠/缩进指南？

> ID：15527870
> 
> 赞同：3
> 
> 时间：2013-03-20T15:30:10.567
> 
> 标签：vim, highlight

在对有用的 vim 插件进行研究期间，我发现了一个 vim 窗口的屏幕截图，其中显示了某种虚线指南，突出显示了缩进或折叠。我不确定他们实际上强调了什么。

有谁知道哪个插件生成这些指南以及它们的目的是什么？

你可以在这里找到截图：http: [//oi54.tinypic.com/2yysefm.jpg](http://oi54.tinypic.com/2yysefm.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:36:44.000

如果您使用制表符来缩进代码，则可以使用该`'list'`选项使制表符可见。

在你的`~/.vimrc`：

```
set list
set listchars=tab:┊\ <-- don't forget the trailing space. 
```

显然，这只有在 Vim 支持 utf-8 时才有效。

# javascript - .filter() 然后仅适用于某些 .children()

> ID：15527879
> 
> 赞同：2
> 
> 时间：2013-03-20T15:30:37.150
> 
> 标签：javascript, javascript-events, jquery

似乎无法弄清楚这一点，感觉我在这里错过了一些愚蠢的东西......

**[jsFiddle 演示](http://jsfiddle.net/Dz7jN/)**

基本上，当将**鼠标悬停**在*删除链接*上时，我试图对该*行*中的所有文本进行换行，除了其中的`<td>`文本`<a class="remove">`。

基本的html结构是：

```
<tr>
    <td>Lorem ipsum text here</td>
    <td>01/01/2012</td>
    <!-- all <td>'s except for the Remove one should get a line-through -->
    <td><a class="remove">Remove</a></td>
</tr> 
```

jQuery：

```
$('tr').on({
    'mouseover' : function () {
        $(this).closest('tr').find('td').filter(function () {
            var $childElems = $(this).children();

            // I can see the <a class="remove"> in .children()
            // But for some reason can't just test (hey there's an <a>, 
            // then don't apply this)

            if ($childElems.find('a').length <= 0) {
                return $(this).css('text-decoration', 'line-through');
            }
        });
    },
    'mouseout' : function () {
        $(this).closest('tr').find('td')
            .css('text-decoration', 'none');
    }
}, 'a.remove'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:35:09.627

在`filter()`,里面依次`this`是每个元素。`td`当您调用`children()`它时，您会返回一个 jQuery 对象*，`<a>`*然后，您正在其中搜索*另一个*`<a>`（*这* 就是`<a>`您没有看到它的原因）。

反而：

```
 $(this).closest('tr').find('td').filter(function () {
        if ($(this).children('a').length == 0) {
            return $(this).css('text-decoration', 'line-through');
        }
    }); 
```

...但这并不是真正`filter`的设计目的。您应该使用`filter`减少元素集，然后对结果进行操作：

```
$(this).closest('tr').find('td').filter(function () {
    return !$(this).children('a').length;
}).css('text-decoration', 'line-through'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:36:53.313

如果您不直接操作 CSS 属性，而是使用一个类，这会容易得多。

`tr`在悬停时将该类添加到您的元素，并`td`使用后代选择器格式化：

```
tr.highlighted td { text-decoration:line-through; }
tr.highlighted td:last-child { text-decoration:none; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:36:51.440

```
$('tr').on({
    'mouseover' : function () {
        $(this).closest('tr').find('td').each(function () {
            if($(this).find('a.remove').length == 0){
                $(this).css('text-decoration', 'line-through');
            }
        });
    },
    'mouseout' : function () {
        $(this).closest('tr').find('td').css('text-decoration', 'none');
    }
}, 'a.remove'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:39:25.897

```
$('a.remove').hover(function () {
    $(this).parents('tr').find('td').filter(function () {
        return !$(this).find('a.remove').length;
    }).css('text-decoration', 'line-through');
}, function () {
    $(this).parents('tr').find('td').css('text-decoration', 'none');
}); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Dz7jN/2/)**

# php - PHP更新表单中MySQL记录集中的多个选择表单元素

> ID：15527881
> 
> 赞同：0
> 
> 时间：2013-03-20T15:30:41.157
> 
> 标签：php, mysql

我有一个名为 empicons 的表，它有两列：EmpNo，IconId

我将 EmpNo 存储为名为 $EmpNo 的会话

我有另一个名为图标的表，它有 3 列：ID、名称、URL

目前我有一个记录集，它选择图标表 Id 和名称并将其显示在一个多选框中，然后更新 empicons 表。

记录集查询：SELECT id, name FROM gbl_icons ORDER BY id ASC

多选表单元素：

```
<select name="icons[]" size="10" multiple="multiple">
            <?php
do {  
?>
            <option value="<?php echo $row_icons['id']?>"><?php echo $row_icons['name']?></option>
            <?php
} while ($row_icons = mysql_fetch_assoc($icons));
  $rows = mysql_num_rows($icons);
  if($rows > 0) {
      mysql_data_seek($icons, 0);
      $row_icons = mysql_fetch_assoc($icons);
  }
?>
          </select> 
```

我正在尝试使用 empicons 和 icons 表进行连接，以便多重选择突出显示基于 EmpNo 变量的 empicons 中找到的数据元素。我无法让连接正常工作，然后更新表单元素以突出显示这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:04:23.057

尝试这个。它使用`mysqli_`函数。如果您在`JOIN`处理这两个表时遇到问题，那么我们需要处理您的查询。

```
<?php
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$query = "SELECT id, name FROM gbl_icons ORDER BY id ASC";

echo '<select name="icons[]" size="10" multiple="multiple">';

if ($result = mysqli_query($link, $query)) {
    /* fetch associative array */
    while ($row = mysqli_fetch_assoc($result)) {
        echo '<option value="' . $row[id] . '">' . $row[name] . '</option>';
    }

    /* free result set */
    mysqli_free_result($result);
}

echo '</select>';

/* close connection */
mysqli_close($link);
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:18:42.840

您的查询应该是这样的

```
SELECT i.id, i.name, e.EmpNo FROM gbl_icons i
LEFT JOIN empicons e ON e.IconId = i.id AND e.EmpNo = '$EmpNo'
ORDER BY i.id ASC 
```

因此，您将从“gbl_icons”表中获取所有图标，并为每个图标获取当前 EmpNo 的 empicons 中的相应记录。如果没有相应的记录，您将在“EmpNo”列中获得 NULL。

你的代码应该是这样的

```
<select name="icons[]" size="10" multiple="multiple">
<?php
while($row_icons = mysqli_fetch_assoc($icons)) {  
?>
<option value="<?=$row_icons['id']?>" <?=!empty($row_icons['EmpNo']) ? ' selected="selected"' : ''?><?=$row_icons['name']?></option>
<?php
}
?>
</select> 
```

# jquery-plugins - jQuery 在 AngularJS ng-view 中不能正常工作

> ID：15527885
> 
> 赞同：1
> 
> 时间：2013-03-20T15:30:47.707
> 
> 标签：jquery-plugins, angularjs

我想添加`multizoom.js`到我的 AngularJS 项目中。

这是我的索引页：

```
 <body>
   <img id="zoom" ng-src="example.jpg" class="example ng-class">
   <div ng-view> </div>
 </body> 
```

这是详细页面：

```
<img id="zoom" ng-src="example.jpg" class="example ng-class"> 
```

我的问题是 jQuery multizoom 插件不缩放 AngularJS 的 ng-view 部分中的图像。

如果图像不在 ng-view 部分中，则 multizoom 可以正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T05:08:29.373

这是因为我假设您正在初始化 DOM 就绪事件上的多缩放行为，使用`$(function() { /* ...(multizoom init code)... */ });`or `$(document).ready(function() { /* ...(multizoom init code)... */`。如果是这样，它将只运行一次，并且可能在详细信息页面加载到`<div ng-view></div>`. 因此，由于尚未加载，它将无法在它正在搜索的页面上找到该图像。

相反，您需要做的是在`ng-view`加载内容时使用[发出的事件](http://docs.angularjs.org/api/ng.directive%3angView)初始化您的多缩放功能，如下所示：

```
// (inside some function with $rootScope available)
$rootScope.$on('$viewContentLoaded', function() {
    // ... (multiview init code here) ...
}); 
```

那有意义吗？

作为一个小旁注，不要有多个具有相同 ID 的元素，这不是一个好主意。相反，使用一个类来表示要应用多缩放插件的图像。

# android - 从 Listfragment 类访问数据库

> ID：15527889
> 
> 赞同：0
> 
> 时间：2013-03-20T15:30:55.730
> 
> 标签：android

我在我的程序中制作了三个 Java 文件。它们是 MainActivity.java、TrackerDBAdaptor.java 和 MyListFragment.java。要访问我拥有的数据库

```
private TrackerDBAdapter dbHelper;      
dbHelper = new TrackerDBAdapter(this); 
```

当我把上面几行放在 MainActivity.java 中时，没有问题。但我的意图是我想从 MyListFragment.java 类访问数据库。所以我把这两行放在 MyListFragment.java 的 onCreateView() 中。然后里面的“this” `dbHelper = new TrackerDBAdapter(this);` 有问题。我的理解是这意味着调用类的实例，为什么 MainActivity.java 和 MyListFragment.java 之间存在差异。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:41:35.343

您的 MainActivity.java 类可能扩展了 Activity 类，后者又是 Context 的后代。TrackerDBAdapter.java 可能在构造函数中使用 Context，这就是在 MainActivity 中传递“this”的原因。MyListFragment 可能扩展了 Fragment，它不是 Context 的后代，因此传递“this”将不起作用。在片段中获取 Context 对象的一种方法是调用 getActivity()，它返回片段所附加到的 Activity 对象。换句话说，在 MyListFragment 中执行以下操作可能会起作用。

```
dbHelper = new TrackerDBAdapter(getActivity()) 
```

不过要小心。如果片段未附加到活动，getActivity() 可能会返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:38:54.777

在`onCreateView()`Fragment 内部，您需要调用如下：

```
private TrackerDBAdapter dbHelper;      
dbHelper = new TrackerDBAdapter(getActivity().getApplicationContext()); 
```

干杯，快乐编码。

# java - 寻找在 Java 中模仿指针数组的建议

> ID：15527891
> 
> 赞同：-4
> 
> 时间：2013-03-20T15:30:57.697
> 
> 标签：java, arrays

我正在开发一个 Java 软件项目，我想创建一个“瀑布”显示，我需要在屏幕底部绘制一行颜色编码的数据，然后将这些行向上“移动”为创建数据年龄和新行。在我看来，虽然可以创建行数据，然后通过表示显示区域的二维数组移动行数组，但这并不是一种非常有效的处理方式。

显然，如果我用 C 或 C++ 编写它，我会使用指针（和指针数组）。

我如何在 Java 中实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:35:21.233

在任何情况下，Java 数组都不是真正的双向数组。它们是数组的数组。因此，您可以通过引用轻松地做到这一点：

```
public void foo() {
  int[][] data = new int[32][32];
  ...
  for (int i = 32; i > 0; --i)
    data[i-1] = data[i];
} 
```

这与您在 C++ 中的操作方式有些相似

```
public void foo() {
  int **data = new int*[32];
  for (int i = 0; i < 32; ++i)
    data[i] = new int[32];
  ...
  for (int i = 32; i > 0; --i)
    data[i-1] = data[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:19:24.193

Java 有一个 LinkedList 类，它的工作方式就像 C 中的（双重）链表，只是以面向对象^((TM))的方式。

请参阅：[http](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)
://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html 和：[何时在 ArrayList 上使用 LinkedList？](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)

# dynamic - 从 childNodes 的 innerHTML 动态获取链接

> ID：15527897
> 
> 赞同：0
> 
> 时间：2013-03-20T15:31:09.817
> 
> 标签：dynamic, parent-child, dynamic-data, innerhtml

我有带有产品目录的页面，需要使用它的名称（innerHTML）为每个产品分配链接。该页面如下所示：

```
<!DOCTYPE html>
<html>
<head>
<script>
function searchlinks() {
var catbox=document.getElementById("category-box");
var boxcont=catbox.getElementsByTagName("a");
var h3href=catbox.getElementsByTagName("h3");

var www0="../search/" + h3href[0].innerHTML + "+" + boxcont[0].innerHTML;
var www1="../search/" + h3href[0].innerHTML + "+" + boxcont[1].innerHTML;
var www2="../search/" + h3href[0].innerHTML + "+" + boxcont[2].innerHTML;
var www3="../search/" + h3href[0].innerHTML + "+" + boxcont[3].innerHTML;

boxcont[0].href=www0;
boxcont[1].href=www1;
boxcont[2].href=www2;
boxcont[3].href=www3;

}
</script>
</head>
<body onload="searchlinks()">

<div id="category-box"><div class="category-block"><div class="category-blockimage"><img src="" alt="" ></div><div class="category-blockcontent">
     <h3>Clothing</h3>
<a href="">Men's</a>
<a href="">Women's</a>
<a href="">Boys'</a>
<a href="">Girls'</a>
</div></div></div>

<div id="category-box"><div class="category-block"><div class="category-blockimage"><img src="" alt="" ></div><div class="category-blockcontent">
     <h3>Protective Gear</h3>
<a href="">Chin Straps</a>
<a href="">Facemasks</a>
<a href="">Flak Jackets</a>
<a href="">Girdles</a>
<a href="">Hand Pads</a>
<a href="">Arm Pads</a>
<a href="">Helmets</a>
<a href="">Hip Pads</a>
</div></div></div>
</body>
</html> 
```

但是我遇到了很多问题。这是我的问题：
1）**如何动态分配链接？**（不使用 var = www0 , www1 ...）
2）函数`searchlinks()`仅影响第一个“类别块”div。**如何对页面上的所有此类 div 使用此功能？**

这是我的 jsfiddle：http: [//jsfiddle.net/RGe8U/1/](http://jsfiddle.net/RGe8U/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:18:31.123

这是固定的脚本和html。我为两个不同的 div 提供了不同的 id，因为 id 应该是唯一的，然后单独搜索它们并为它们调用 addLink 函数。

```
<html>
<head>
<script>
function addLink(catbox) {
        var boxcont=catbox.getElementsByTagName("a");
        var h3href=catbox.getElementsByTagName("h3");
        //alert(h3href[0].innerHTML);
        for (var i=0; i<boxcont.length; i++) {
                boxcont[i].href="../search/" + h3href[0].innerHTML + "+" + boxcont[i].innerHTML;
        }
}
function searchlinks() {
        addLink (document.getElementById("category-box"));
        addLink (document.getElementById("category-box2"));
}
</script>
</head>
<body onload="searchlinks()">

<div id="category-box"><div class="category-block"><div class="category-blockimage"><img src="" alt="" ></div><div class="category-blockcontent">
     <h3>Clothing</h3>
<a href="">Men's</a>
<a href="">Women's</a>
<a href="">Boys'</a>
<a href="">Girls'</a>
</div></div></div>

<div id="category-box2"><div class="category-block"><div class="category-blockimage"><img src="" alt="" ></div><div class="category-blockcontent">
     <h3>ProtectiveGear</h3>
<a href="">Chin Straps</a>
<a href="">Facemasks</a>
<a href="">Flak Jackets</a>
<a href="">Girdles</a>
<a href="">Hand Pads</a>
<a href="">Arm Pads</a>
<a href="">Helmets</a>
<a href="">Hip Pads</a>
</div></div></div>
</body>
</html> 
```

编辑：如果您不想更改 div id，请使用此脚本：

```
 <script>
function addLink(catbox) {
        var boxcont=catbox.getElementsByTagName("a");
        var h3href=catbox.getElementsByTagName("h3");
        alert(h3href[0].innerHTML);
        for (var i=0; i<boxcont.length; i++) {
                boxcont[i].href="../search/" + h3href[0].innerHTML + "+" + boxcont[i].innerHTML;
        }
}
function searchlinks() {
        var divs = document.getElementsByTagName("div");
        for (var i=0; i<divs.length; i++) {
                if (divs[i].id === "category-box")
                addLink (divs[i]);
        }
}
</script> 
```

# c# - 在 C# 中使用字典时出错

> ID：15527900
> 
> 赞同：2
> 
> 时间：2013-03-20T15:31:14.667
> 
> 标签：c#, asp.net, exception, dictionary

我正在尝试搜索字典以查看它是否具有特定值，如果是则更改它。这是我的代码：

```
foreach (var d in dictionary)
{
    if (d.Value == "red")
    {
         d.Value = "blue";
    }
} 
```

在Visual Studio中，当我逐步调试代码时，我可以看到它更改了值，然后当它到达foreach循环以再次重申时，它会引发异常

> *“集合已修改；枚举操作可能无法执行”*

我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:33:31.417

你不能在 foreach 的中间改变它——你需要想出一些其他的机制，比如：

```
// Get the KeyValuePair items to change in a separate collection (list)
var pairsToChange = dictionary.Where(d => d.Value == "red").ToList();
foreach(var kvp in pairsToChange)
    dictionary[kvp.Key] = "blue"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:39:01.703

```
var dict = new Dictionary<string, string>()
          {
                  { "first", "green" },
                  { "second", "red" },
                  { "third", "blue" }
          };

foreach (var key in dict.Keys.ToArray())
{
    if (dict[key] == "red")
    {
        dict[key] = "blue";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:32:46.980

如果要替换所有出现的“红色”，则需要将 KeyValuePairs 存储在列表或类似的东西中：

```
var redEntries = dictionary.Where(e => e.Value == "red").ToList();
foreach (var entry in redEntries) {
    dictionary[entry.Key] = "blue";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:35:05.470

枚举时不能修改集合（在循环中）。

您需要将更改添加到集合中，然后单独更改它们。就像是：

```
var itemsToChange = dictionary
    .Where(d => d.Value == "red")
    .ToDictionary(d => d.Key, d => d.Value);

foreach (var item in itemsToChange)
{
    dictionary[item.Key] = "blue";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:35:11.273

您不能在`foreach`循环中修改您正在迭代的集合。如果你能做到这一点，它会带来几个问题，比如“我也用这个新增加的价值来运行它吗？”

相反，您应该这样做：

```
foreach( string key in dictionary.Keys )
{
    if( dictionary[key] == "red" )
    {
        dictionary[key] = "blue";
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T15:36:23.930

foreach 循环中的对象是只读的。

请通读[this](https://stackoverflow.com/a/1070795/125740)和[this](https://stackoverflow.com/a/4004778/125740)以获得更多理解。

# javascript - 从左到右连续渲染 div 列表，然后从下到上渲染行（通过 CSS/jQuery）

> ID：15527909
> 
> 赞同：1
> 
> 时间：2013-03-20T15:31:35.663
> 
> 标签：javascript, jquery, html, css

我有一种情况，我有一个具有特定顺序的 div 列表，需要以相当复杂的方式呈现。简单来说，这是我的 HTML：

```
<div>
    <div class="box">1 (first in list)</div>
    <div class="box">2</div>
    <div class="box">3</div>
    <div class="box">4</div>
    <div class="box">5</div>
    <div class="box">6</div>
    <div class="box">7</div>
    <div class="box">8</div>
    <div class="box">9 (last in list)</div>
</div> 
```

我想要显示`div`s 的方式是从左到右以 4 行为单位，每一行从下到上堆叠，如下所示：

```
9
5 6 7 8
1 2 3 4 
```

我创建了一个显示我所追求的结果的小提琴：http: [//jsfiddle.net/mpcjs/](http://jsfiddle.net/mpcjs/) - 但是，我想要一个不需要重新排序`div`HTML 中的 s 的解决方案。另请注意，`div`s 的数量是可变的。

这甚至可能吗？欢迎使用 CSS3/jQuery 解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:52:15.950

你应该看看[flexbox](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_flexible_boxes)。[这是一个演示它如何工作的小提琴](http://jsfiddle.net/S94qK/)，但需要注意的是我只在 Chrome 中测试过它。

```
.flex{
width:400px;
display: -webkit-box;
display: -moz-box;
display: -ms-flexbox;
display: -webkit-flex;
display: flex;
-webkit-box-direction: normal;
-moz-box-direction: normal;
-webkit-box-orient: horizontal;
-moz-box-orient: horizontal;
-webkit-flex-direction: row;
-ms-flex-direction: row;
flex-direction: row;
-webkit-flex-wrap: wrap-reverse;
-ms-flex-wrap: wrap-reverse;
flex-wrap: wrap-reverse;
-webkit-box-pack: start;
-moz-box-pack: start;
-webkit-justify-content: flex-start;
-ms-flex-pack: start;
justify-content: flex-start;
-webkit-align-content: stretch;
-ms-flex-line-pack: stretch;
align-content: stretch;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:52:37.903

这可以使用 jQuery 插件[jQuery Masonry](http://masonry.desandro.com/)来实现。

替换它（从第 287 行开始）

```
var position = {
  top: minimumY + this.offset.y
}; 
```

和

```
var position = (this.options.fromBottom) ? {
  bottom: minimumY + this.offset.y
} : {
  top: minimumY + this.offset.y
}; 
```

**jsFiddle：http: [//jsfiddle.net/fnexE/](http://jsfiddle.net/fnexE/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:08:44.060

这不是一个可行的解决方案，*但是*`writing-mode`你可以在 CSS3中使用 chrome 和 safari 。查看[关于垂直文本的 w3-dev 部分](http://dev.w3.org/csswg/css3-writing-modes/#vertical-intro)。

```
.row { 
  writing-mode: bt-rl; 
}
.box { 
  display: inline-block;
  vertical-align: top;
} 
```

[http://jsfiddle.net/mpcjs/4/](http://jsfiddle.net/mpcjs/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:52:57.717

我不确定如何从底部堆叠 DIV，但这会反转它们：

*HTML：*

```
<div>
    <div>
        <div class='box'>1</div>
        <div class='box'>2</div>
        <div class='box'>3</div>
        <div class='box'>4</div>
        <div class='box'>5</div>
        <div class='box'>6</div>
        <div class='box'>7</div>
        <div class='box'>8</div>
        <div class='box'>9</div>
    </div>
</div> 
```

*CSS：*

```
.box{
    float:left;
    border:1px solid #000;
    width:22%;
    margin:1%;
} 
```

查询：

```
$('div > .box').each(function() {
    $(this).prependTo(this.parentNode);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T06:53:48.143

如果你想要一个纯 CSS 解决方案，它会这样：

基本的 HTML

```
<div class="container">HOVER ME!
<div class="inner">one</div>
<div class="inner">two</div>
<div class="inner">three</div>
<div class="inner">four</div>
<div class="inner">five</div>
<div class="inner">six</div>
<div class="inner">seven</div>
</div> 
```

我们将内部浮动到右侧：

```
.inner {
    float: right;
    width: 100px;
    height: 100px;
    background-color: lightsalmon;
    margin: 5px;
    font-size: 20px;
} 
```

就这样 ！好吧，不是全部，你仍然需要悬停

```
.container:hover,
.container:hover div {
    -webkit-transform: rotate(180deg);
    -webkit-transition: all 3s;
} 
```

好吧，那只是为了让它有点有趣，但效果很好，不是吗？

[测试一下](http://jsfiddle.net/vals/wh9b8/)

# regex - 使用正则表达式从字符串中获取多个值

> ID：15527912
> 
> 赞同：0
> 
> 时间：2013-03-20T15:31:38.787
> 
> 标签：regex, oracle, oracle11g

我有一个列名为“REMARKS”的表 temp

创建脚本

```
Create table temp (id number,remarks varchar2(2000)); 
```

插入脚本

```
Insert into temp values (1,'NAME =GAURAV Amount=981 Phone_number =98932324 Active Flag =Y');
Insert into temp values (2,'NAME =ROHAN Amount=984 Phone_number =98932333  Active Flag =N'); 
```

现在，我想从表的备注栏中获取 NAME 、Amount 、phone_number、active_flag 的对应值。

我想过使用正则表达式，但我不习惯使用它。我尝试使用 substr 和 instr 从 remakrs 列中获取名称，但如果我想获取所有四个，我需要编写一个 pl sql。我们可以使用正则表达式来实现这一点。

我能得到像这样的输出（CURSOR）吗

```
id  Name    Amount phone_number Active flag
------------------------------------------
1  Gaurav   981    98932324     Y
2  Rohan    984    98932333     N
------------------------------------------- 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:37:27.687

你可以使用类似的东西：

```
SQL> select regexp_replace(remarks, '.*NAME *=([^ ]*).*', '\1') name,
  2         regexp_replace(remarks, '.*Amount *=([^ ]*).*', '\1') amount,
  3         regexp_replace(remarks, '.*Phone_number *=([^ ]*).*', '\1') ph_number,
  4         regexp_replace(remarks, '.*Active Flag *=([^ ]*).*', '\1') flag
  5    from temp;

NAME                 AMOUNT               PH_NUMBER            FLAG
-------------------- -------------------- -------------------- --------------------
GAURAV               981                  98932324             Y
ROHAN                981                  98932324             N 
```

# azure - 连接数的规则？

> ID：15527924
> 
> 赞同：0
> 
> 时间：2013-03-20T15:32:01.227
> 
> 标签：azure, wasabi

我有一个 WCF 服务，它接收来自 Sivlerlight 客户端的请求，它读取或写入 SQL 数据库，然后将响应发送回客户端。

随着 6 或 7 个客户端延迟开始增加，我想检查我拥有的实例越多，延迟越小（因为负载平衡）。

我正在尝试实现自动缩放应用程序块，但存储规则（例如队列长度）或 CPU 使用率对我没有用，因为我不使用存储帐户，虽然我有 10 个客户端连接到服务，但实例 CPU 使用率勉强达到 10%。

当达到一定数量的连接时，如何设置规则以启动新实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:46:14.960

您可以捕获 IIS 的 Requests Current 性能计数器并将其发送到[Windows Azure 诊断](http://msdn.microsoft.com/en-us/library/windowsazure/hh411551.aspx)。

我相当肯定 WASABi 可以根据任何性能计数器扩展您的 WCF/WebRole 应用程序。如果由于某种原因 WASABi 无法根据该性能计数器自动缩放您，或者您以后需要更多功能，您可以尝试[AzureWatch](http://www.paraleap.com)（个人插件）

但无论哪种方式，ASP.NET\Requests Current（如果您使用 IIS 来处理您的 WCF）似乎都是您需要的性能计数器。

# c# - 如果磁盘脱机，如何以编程方式检测 [c#]？

> ID：15527929
> 
> 赞同：-3
> 
> 时间：2013-03-20T15:32:13.930
> 
> 标签：c#, hard-drive, systemmanagement

在 Windows 的“磁盘管理”中，有一个驱动器的属性是“在线/离线”。如何为远程硬件公开此属性？我知道不是；它不在：win32_logicaldisk、win32_diskdrive、CIM_LogicalDisk 和 CIM_LogicalDevice 也不在 System.IO.DriveInfo 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:37:56.010

你的意思是这样的：

```
DriveInfo drive = GetDrives();

foreach(DriveInfo d in drive)
{
    Console.WriteLine("Drive {0}", d.Name);
    Console.WriteLine" File Type: {0}", d.DriveType);

    if(d.IsReady == true)
    {
         Console.WriteLine(" Volume Label: {0}", d.VolumeLabel);
    }
} 
```

[您可以直接从MSDN](http://msdn.microsoft.com/en-us/library/system.io.driveinfo.aspx)找到一个很好的示例。本质上，如果它检测到可用的驱动器就绪，它将显示有关它的信息。如果没有，那么它不会显示任何内容。

您显然可以进一步修改它。

您还可以从 C# 实现 Powershell 或 WMI 脚本来完成任务。在这种情况下，您有很大的灵活性。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:35:13.337

如果您使用的是 c#，您应该能够通过 WMI 获取所有这些信息。

# zend-framework2 - 来自数据库的 zend 框架 2.0 填充选项

> ID：15527934
> 
> 赞同：0
> 
> 时间：2013-03-20T15:32:17.830
> 
> 标签：zend-framework2

我有我的应用程序基于 ZendSkeletonApplication ，现在我想创建我的模型之间的关系，所以：

```
user            portal
id              id
firstName       name
lastName        url
........
portal_Id 
```

我想用数据库值填充用户表单中的选择选项

```
<?php
namespace Register\Form;

use Zend\Captcha\AdapterInterface as CaptchaAdapter;
use Zend\Form\Form;
use Zend\Form\Element;

class UserForm extends Form
{
    protected $portalTable;

    public function __construct($name = null)
    {
        parent::__construct('user');
        $this->setAttribute('method', 'post');
        $this->setAttribute('class', 'form-horizontal');

        $this->add(array(
                'name' => 'id',
                'attributes' => array(
                        'type'  => 'hidden',
                ),
        ));

        $this->add(array(
                'type' => 'Select',
                'name' => 'portal_id',
                'options' => array(
                        'label' => 'Portal',
                        'empty_option' => 'Seleccione un portal',
                        'value_options' => array(
                                '1' => 'portal 1',
                                '2' => 'portal 2',
                                '3' => 'portal 3',
                                //i want option from database with 
                        ),

                )
        ));

        $this->add(array(
                'name' => 'firstName',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'First Name',
                ),
        ));

        $this->add(array(
                'name' => 'lastName',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'Last Name',
                ),
        ));
        $this->add(array(
                'name' => 'login',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'Login',
                ),
        ));

        $this->add(array(
                'name' => 'password',
                'attributes' => array(
                        'type'  => 'password',
                ),
                'options' => array(
                        'label' => 'Password',
                ),
        ));

        $this->add(array(
                'name' => 'password_repeat',
                'attributes' => array(
                        'type'  => 'password',
                ),
                'options' => array(
                        'label' => 'password (repeat)',
                ),
        ));

        $this->add(array(
                'name' => 'email',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'Email',
                ),
        ));

        $this->add(array(
                'type' => 'Zend\Form\Element\Csrf',
                'name' => 'csrf',
                'options' => array(
                        'csrf_options' => array(
                                'timeout' => 600
                        )
                )
        ));

        $this->add( array(
                'type' => 'Captcha',
                'name' => 'captcha',
                'options' => array(
                        'label' => 'Please verify you are human.',
                        'captcha' => array('class' => 'Dumb',
                        ),
                ),
        ));

        $this->add(array(
                'name' => 'submit',
                'attributes' => array(
                        'type'  => 'submit',
                        'value' => 'Go',
                        'id' => 'submitbutton',
                ),
        ));
    }
} 
```

在这部分我想从数据库中填充选择

```
$this->add(array(
                'type' => 'Select',
                'name' => 'portal_id',
                'options' => array(
                        'label' => 'Portal',
                        'empty_option' => 'Seleccione un portal',
                        'value_options' => array(
                                '1' => 'portal 1',
                                '2' => 'portal 2',
                                '3' => 'portal 3',
                                //i want option from database with 
                        ),

                )
        )); 
```

对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:42:37.793

我已经写了一篇关于这个主题的深入博客“ [Zend\Form\Element\Select and Database-Values ”。](https://web.archive.org/web/20160316093620/http://samminds.com/2013/03/zendformelementselect-and-database-values/)基本上，这是你必须做的：

基本上，您所要做的就是在表单中查询数据库以获取数据。为此，您需要在表单中提供 DB-Adapter，这是由 Dependency-Injection 完成的。由于 DB-Adapter 是`required`为了让您的表单正常运行，我建议使用 Setter-Injection。

在你里面`getServiceConfig()`这样做：

```
return array('factories' => array(
    'namespace-form-formname' => function($sm) {
        $dbA  = $sm->get('Zend\Db\Adapter\Adapter');
        $form = new \Namespace\Form\Formname($dbA);

        return $form;
    }
)); 
```

这会将 注入`Zend\Db\Adapter\Adapter`到您的表单中，该表单应该已经通过其他配置有效。然后你需要稍微修改你的表单代码：

```
public function __construct(\Zend\Db\Adapter\Adapter $dbA) {
    parent::__construct('form-name');

    // Do the DB-Query here. You got the DB-Adapter
    // http://zf2.readthedocs.org/en/latest/modules/zend.db.adapter.html
    $selectArray =  array(
        'key' => 'value',
        'key' => 'value',
        'key' => 'value',
    ); // obviously, this is just a fake-$selectArray demonstrating 
       // what the output of your Queries should be

    // Add your Form Elements here
    // use $selectArray as value_options of your desired select element
} 
```

基本上就是这样。遗憾的是我无法给你一个具体的例子，因为我从来没有使用过`Zend\Db`，但我认为这会让你开始。

PS：在您的控制器中，像这样调用表单：

```
$form = $this->getServiceLocator()->get('namespace-form-formname'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-24T10:40:11.413

```
Try:
// add code on controller
$arrPortalId = array();
$results = array('1' => 'portal 1', '2' => 'portal 2', '3' => 'portal 3',); // this part change your database value
foreach ($results as $key => $val) {
$arrPortalId[$key] = $va;
}
$dataParams['portalId'] = $arrPortalId;
$form = new UserForm($dataParams);

 <?php
namespace Register\Form;

use Zend\Captcha\AdapterInterface as CaptchaAdapter;
use Zend\Form\Form;
use Zend\Form\Element;

class UserForm extends Form
{
    protected $portalTable;

    public function __construct($params = array())
    {   $name = isset($params['name'])?$params['name']:'';
        parent::__construct('user');
        $this->setAttribute('method', 'post');
        $this->setAttribute('class', 'form-horizontal');

        $this->add(array(
                'name' => 'id',
                'attributes' => array(
                        'type'  => 'hidden',
                ),
        ));
    $portalId = (isset($params['portalId']) && count($params['portalId']) > 0)?$params['portalId']:array();
        $this->add(array(
                'type' => 'Select',
                'name' => 'portal_id',
                'options' => array(
                        'label' => 'Portal',
                        'empty_option' => 'Seleccione un portal',
                        'value_options' => $portalId,

                )
        ));

        $this->add(array(
                'name' => 'firstName',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'First Name',
                ),
        ));

        $this->add(array(
                'name' => 'lastName',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'Last Name',
                ),
        ));
        $this->add(array(
                'name' => 'login',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'Login',
                ),
        ));

        $this->add(array(
                'name' => 'password',
                'attributes' => array(
                        'type'  => 'password',
                ),
                'options' => array(
                        'label' => 'Password',
                ),
        ));

        $this->add(array(
                'name' => 'password_repeat',
                'attributes' => array(
                        'type'  => 'password',
                ),
                'options' => array(
                        'label' => 'password (repeat)',
                ),
        ));

        $this->add(array(
                'name' => 'email',
                'attributes' => array(
                        'type'  => 'text',
                ),
                'options' => array(
                        'label' => 'Email',
                ),
        ));

        $this->add(array(
                'type' => 'Zend\Form\Element\Csrf',
                'name' => 'csrf',
                'options' => array(
                        'csrf_options' => array(
                                'timeout' => 600
                        )
                )
        ));

        $this->add( array(
                'type' => 'Captcha',
                'name' => 'captcha',
                'options' => array(
                        'label' => 'Please verify you are human.',
                        'captcha' => array('class' => 'Dumb',
                        ),
                ),
        ));

        $this->add(array(
                'name' => 'submit',
                'attributes' => array(
                        'type'  => 'submit',
                        'value' => 'Go',
                        'id' => 'submitbutton',
                ),
        ));
    }
} 
```

# dita - TOC 中的 TM 标记与内容中的 TM 不匹配

> ID：15527936
> 
> 赞同：0
> 
> 时间：2013-03-20T15:32:22.450
> 
> 标签：dita, dita-ot

我们注意到一种情况 (PDF)，其中 TOC 条目中的 reg 标记生成的符号比它在内容中显示的要高一点。

这是一个屏幕截图。顶部是目录，您可以看到注册标记远高于底部示例，即章节标题和内容。 ![在此处输入图像描述](../Images/c6341ae67665151401d01ca281ff5baa.png)

这是使用 DITA-OT 1.7.3 默认 PDF2 插件。

我查看了 topic.fo 并且都使用： `<fo:inline line-height="100%" font-family="Helvetica, Arial Unicode MS" baseline-shift="20%" font-size="smaller">®</fo:inline>`

但他们每个人都使用不同的包装器。

TOC 使用： `<fo:inline end-indent="14pt" keep-together.within-line="auto" line-height-shift-adjustment="disregard-shifts" font-family="Helvetica, Arial Unicode MS">`

内容使用： `<fo:inline baseline-shift="20%" font-size="75%" line-height-shift-adjustment="disregard-shifts">`

我稍微浏览了 TOC 样式，但我没有看到在哪里进行调整。我猜目录需要：baseline-shift="20%" font-size="75%"

这是一个小问题，但是否有任何关于在哪里进行调整以使其保持一致的见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T18:47:18.090

我不确定进行您描述的更改是否会满足您的期望。我有一种感觉，如果您对 TOC 包装器进行这些更改，您可能会最终使 TOC 的整个内容变小。您可能希望将 TOC 包装器的 line-height-shift-adjustment 更改为值 think-shifts 以查看其作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T22:58:02.033

我认为您也弄错了，因为 TOC 的图像绝不会将字体系列描述为 Helvetica 或 Arial Unicode 作为所使用的字体。

# excel - Excel 条件格式 - 'IF' 公式语法

> ID：15527938
> 
> 赞同：3
> 
> 时间：2013-03-20T15:32:31.103
> 
> 标签：excel, if-statement, formula, conditional-formatting

我想将此公式用作条件格式公式：

```
=IF(COUNTIFS(AccountsMonthsOrdered[Account],'Account Summary 2013'!$A$1,AccountsMonthsOrdered[Month],'Account Summary 2013'!F$12)>0,1,0) 
```

它检查帐户名称 $A$1 和月份 F$12 是否一起出现在 AccountsMonthsOrdered 表中，如果出现则返回 1，如果出现则返回 0。

当它单独在一个单元格中时它工作正常，但无论我如何尝试改写它，Excel 都不会在条件格式公式框中接受它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:48:20.540

条件格式中的公式不接受表格列...要纠正从表格中指向 [Account] 列的命名范围，请在公式中引用命名范围而不是表格列。[月] 相同

# sql - Access SQL/查询已截断 25 个字符的字段？

> ID：15527942
> 
> 赞同：0
> 
> 时间：2013-03-20T15:32:36.630
> 
> 标签：sql, ms-access-2010, truncated

我在 Access 中有这个查询：

```
SELECT a.title, a.init, a.name, l.User AS CreatedBy,
     IIf(IsNull(l.Time),Null,DateAdd("s",l.Time,#3/1/1980#)) AS CreatedAt
     FROM (Reports AS a LEFT JOIN 
     (SELECT id, Min([time]) AS Mintime FROM AuditLog GROUP BY id) AS t
     ON a.id = t.id) 
     LEFT JOIN AuditLog AS l ON (t.mintime = l.time) AND (t.id = l.id)
     WHERE (((a.name) Like 'start*') AND ((a.Active)='Y')); 
```

但由于某种原因`a.name`，查询中的每个结果都被截断为 25 个字符。为什么是这样？在表中`Reports`它是正确的并显示全名（25+ 个字符长）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:34:46.203

这可能是由于 a.name 字段的大小。如果该字段设置为 varchar(25)，它将只允许 25 个字符。

-编辑- 还要检查将数据插入该字段的任何过程、查询或外部来源。它可能是一个配置错误的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:37:58.310

请检查表a中name属性的字段长度。它必须大于您存储的名称。我认为您的姓名长度大于字段长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:39:55.903

我有两个相似的名称字段，我误读了一个，它确实在实际表中被截断了。

# java - python解释器导入错误

> ID：15527950
> 
> 赞同：1
> 
> 时间：2013-03-20T15:32:49.003
> 
> 标签：java, python, jython

我在 python 模块中导入包时遇到问题。我就是做这个的：

```
from mega.mega import Mega
if __name__ == "__main__":
    m = Mega() 
```

从java我运行：

```
interpreter.execfile("api.py"); 
```

但我仍然收到错误：

```
Exception in thread "main" Traceback (most recent call last):
File "<string>", line 1, in <module>
ImportError: No module named mega 
```

在 mega 文件夹中，我有 mega.py 文件和`__init__.py`文件将此文件夹标记为包。

* * *

现在我得到：

```
from mega.mega import Mega
SyntaxError: ("'import *' not allowed with 'from .'", ...path... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:35:38.927

您需要将父目录添加`mega`到`sys.path`：

```
import sys
import os

PATH = os.path.dirname(os.path.abspath(__file__))
sys.path.insert(0, PATH)

from mega.mega import Mega 
```

`__file__`是`api.py`模块的文件名（可以是相对的）。

# c# - RestSharp 中的 HTTP DELETE 操作

> ID：15527954
> 
> 赞同：0
> 
> 时间：2013-03-20T15:32:57.790
> 
> 标签：c#, .net, httpwebrequest, restsharp

我在 WP8 上使用 RestSharp，我发现了一个奇怪的行为。这可能是 RestSharp 中的一个错误，我的代码已经过彻底审查，没有发现内存问题。

下面是两个应该产生相同结果的场景，但不会。

*   第一的：

    1.  我做了一个 POST 操作 - 返回一个 ObjectId
    2.  我对 ObjectId 执行 DELETE 操作 - 返回“OK”
    3.  我对 ObjectId 执行 GET 操作 - 返回“NotFound” - 这是我所期望的
*   第二：

    1.  我做了一个 POST 操作 - 返回一个 ObjectId
    2.  我对 ObjectId 执行 GET 操作 - 返回我从中提取 ObjectId 的对象
    3.  我对提取的 ObjectId 执行 DELETE 操作 - 返回“OK”
    4.  我对提取的 ObjectId 执行 GET 操作 - 返回 Object (!) - 它应该返回“NotFound”

服务器在这两种情况下都会执行实际的 DELETE（由 DBA 和 JMeter 测试确认），因此这意味着数据被保存在某处并返回。

有没有人遇到过这样的行为？或者 RestSharp 是否有任何与此相关的已知问题？

# javascript - 用于拆分列表的while循环

> ID：15527962
> 
> 赞同：0
> 
> 时间：2013-03-20T15:33:12.923
> 
> 标签：javascript, jquery, list, split, append

我使用了这个脚本。拆分一个大列表。

```
var $bigList = $('.list-products'), group;
while((group = $bigList.find('li:lt(4)').remove()).length) {
    $('<ul class="list-products"/>').append(group).appendTo('.box-products');
} 
```

我有这个脚本的问题。我希望你能帮助我。

当我运行这个脚本时。该脚本不会删除 orginele ul。运行脚本后，在 html 中有一个空的 ul

以及如何围绕它制作一个 div 。我想要一个带有类产品容器的 div 围绕 ul 列表。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:43:16.703

尝试

```
var $bigList = $('.list-products'), group;
while((group = $bigList.find('li:gt(3):lt(4)').remove()).length) {
    $('<ul class="list-products"/>').append(group).appendTo('.box-products');
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/vGSWN/1/)

# php - PHP如何在另一个类方法中使用一个类方法？

> ID：15527963
> 
> 赞同：3
> 
> 时间：2013-03-20T15:33:13.370
> 
> 标签：php

安全.php

```
class Security {

    public function sanitize($data) {
        return mysql_real_escape_string($data);
    }
}
?> 
```

用户.php

```
<?php

class User {

    private $db;

    public function __construct() {
        $this->db = new Connection();
        $this->db = $this->db->dbConnect();
    }

    public function userExists($username) {
        $username = sanitize($username);
        $st = $this->db->prepare("SELECT * FROM `users` WHERE `username`=? ");
        $st->bindParam(1, $username);
        $st->execute();

        if ($st->rowCount() == 1) {
                echo "User exists";
            } else {
                echo 'Incorrect username or password lad';
            }
    }
}

?> 
```

在我的用户存在方法中，我想使用清理方法，但我不确定在 oop 中执行此操作的正确方法。两个类都在不同的文件中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:43:40.507

我最好的建议是让 Security 中的 sanitize 方法成为一个静态函数。这样，您无需实例化对象即可访问该方法。

例子：

```
<?php
class Security {
  public static function sanitize($data) {
    return mysql_real_escape_string($data);
  }
} 
```

在您的用户类中：

```
public function userExists($username) {
    $username = Security::sanitize($username); 
```

这是一个完整的工作示例：

**安全.php**

```
<?php
class Security {
  public static function sanitize($data) {
    return mysql_real_escape_string($data);
  }
} 
```

**用户.php**

```
<?php
class User {
  private $db;

  public function __construct() {
    $this->db = new Connection();
    $this->db = $this->db->dbConnect();
  }

  public function userExists($username) {
    $username = Security::sanitize($username);
    $st = $this->db->prepare("SELECT * FROM `users` WHERE `username`=? ");
    $st->bindParam(1, $username);
    $st->execute();

    if($st->rowCount() == 1) {
      return True;
    } else {
      return False;
    }
  }
} 
```

**test.php**（查看实际操作！）

```
<?php
require_once 'security.php';
require_once 'user.php';

$user = new User();
$exists = $user->userExists('my-username');
if($exists) {
  print 'User exists';
} else {
  print 'Incorrect username or password lad';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:43:10.083

好吧，包括文件，正确地实例化对象并调用它的方法。

```
<?php
require_once 'security.php';
class User {

private $db;

public function __construct() {
    $this->db = new Connection();
    $this->db = $this->db->dbConnect();
}

public function userExists($username) {
    $sec = new Security();
    $username = $sec->sanitize($username);
    $st = $this->db->prepare("SELECT * FROM `users` WHERE `username`=? ");
    $st->bindParam(1, $username);
    $st->execute();

    if ($st->rowCount() == 1) {
            echo "User exists";
        } else {
            echo 'Incorrect username or password lad';
        }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:14:27.357

*这可能有点冗长，但它会为您最终想要学习的一些主题提供一些启示。*

此外，当您使用准备好的语句时，您不需要转义任何内容。但无论如何我都会回答你的问题。

有很多方法可以做到这一点。

# 依赖注入

您可以像在构造函数中使用 Connection 一样实例化一个 Security 实例。但这是错误的方式，因为它使您的代码依赖于 Security 类，就像您的类现在依赖于 Connection 类

要解决此问题，请使用[依赖注入](https://stackoverflow.com/questions/130794/what-is-dependency-injection)

```
public function __construct( DBInterface $db ) {
    $this->db = $db;
} 
```

像这样使用它

```
$connection = new Connection();
$db = $connection->dbConnect();
$user = new User( $db ); 
```

现在您的代码只依赖于 DBInterface[接口](http://php.net/manual/en/language.oop5.interfaces.php)。您现在可以创建任意数量的实现该接口的类并将它们传递给用户类。

您可以将 Security 中的方法设为静态，但这也会增加对 Security 类的依赖。

您也可以在构造函数中传递安全对象，但这很快就会变得丑陋。看看[依赖注入容器](http://fabien.potencier.org/article/12/do-you-need-a-dependency-injection-container)

* * *

# 将该方法添加到您的连接类

由于您创建了自己的 Connection 类，您可以将转义方法添加到连接类并调用它`$this->db->sanitize()`

```
$username = $this->db->sanitize($username); 
```

* * *

# php 5.4 中的特征

```
Trait Security {
    public function sanitize($data) {
        return mysql_real_escape_string($data);
    }
}

Class User {
    use Security;
...
} 
```

然后像在 User 类中一样使用 Security trait 的方法。

* * *

我故意不提及创建基类并扩展它，因为在这种情况下，使用 User 和 Security 类没有意义。

# javascript - Chrome 书签可以包含大量 javascript 吗？

> ID：15527966
> 
> 赞同：0
> 
> 时间：2013-03-20T15:33:15.930
> 
> 标签：javascript, jquery, google-chrome, bookmarklet, bookmarks

我想创建单击时执行操作的 Chrome 书签。他们中的绝大多数将操纵 URL 并重新加载页面。你能制作包含大量 Javascript 的 Chrome 书签吗？甚至可能是 jQuery？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:43:20.083

更好的方法是使用 javascript 加载外部脚本并将其附加到`<head>`文档中，这在 IMO 中可以更轻松地使用您的脚本，因为只有加载资源的调用需要使用小书签*。

### 示例：通过 Bookmarklet 加载外部 jQuery 脚本

例如，如果您想加载`jQuery`到您正在查看的页面上，您可以从您的书签栏运行这个小书签。（免责声明：最好检查页面上**已经**存在的 jQuery以避免冲突。更多信息请参见[此处](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet)）。

`javascript(function({var%20external_script=document.createElement('script');20external_script.type='text/javascript';20external_script.src='http://code.jquery.com/jquery-latest.js';document.getElementsByTagName('head')[0].appendChild(20external_script)})();`

*请注意，它已被缩小和 URL 编码。如果您使用[Textmate](http://macromates.com/)，则可以选择“将 Javascript 作为书签复制到剪贴板”，它会自动进行缩小和编码。

值得指出的是，您可以`DOM`使用此方法将多个资源加载到其中，包括样式表。

# c# - 确定方法参数的上下文

> ID：15527970
> 
> 赞同：4
> 
> 时间：2013-03-20T15:33:18.147
> 
> 标签：c#, reflection, parameters, stack-trace

这是一个具有挑战性的。是否有可能使用任何方法来隐式确定作为参数传递给方法的属性的名称？

（乍一看，这似乎是另一个问题的重复，但有一个微妙但重要的不同之处在于我们一直在使用属性，这是关键）。

这是示例场景：

```
 public class Foo
    {
        public string Bar { get; set; }
    }

    public void SomeStrangeMethod()
    {
        Foo foo = new Foo() { Bar = "Hello" };
        string result = FindContext(foo.Bar);  // should return "Bar"
    }

    public string FindContext(object obj)
    {
        // TODO? - figure out the property name corresponding to the passed parameter.  
        // In this example, we need to somehow figure out that the value of "obj"
        // is the value of the property foo.Bar, and return "Bar"            
    } 
```

假设在 FindContext 中，传递的参数将始终是对象的属性。问题是，我们不知道是什么对象。

显然，通过传递提供缺失上下文的第二个参数可以轻松解决问题，即..

```
FindContext(foo, foo.Bar);    
FindContext("Bar", foo.Bar); 
```

....但这不是我想要的。我希望能够传递单个参数并确定该值表示的属性名称。

我知道当参数被传递时， FindContext 的方法上下文不包含足够的信息来确定这一点。然而，在堆栈跟踪和 IL 方面使用一些技巧，也许我们仍然可以做到。我认为这一定是可能的原因是：

1.  要求传递给 FindContext 的参数必须始终是另一个对象的属性，并且我们知道可以使用反射获取所述属性名称。

2.  使用 StackTrace，我们可以获得调用上下文。

3.  在调用上下文之外，我们应该能够以某种方式定位正在使用的符号。

4.  从该符号中，我们应该能够检索属性名称和/或调用对象的类型，通过 (1) 我们应该能够将其转换为调用对象的属性。

有人知道怎么做这个吗？注意：这个问题很难，但我不认为这是不可能的。除非有人能证明为什么这是不可能的，否则我不会接受任何“不可能”的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:46:28.820

[MVVM Light Toolkit](http://mvvmlight.codeplex.com/)使用 C#的表达式树糖支持传递“属性”以实现`INotifyPropertyChanging`和`INotifyPropertyChanged`. 有关详细信息，请参阅[ObservableObject.cs](http://mvvmlight.codeplex.com/SourceControl/changeset/view/cf8d07c2ec3f#GalaSoft.MvvmLight/GalaSoft.MvvmLight (NET35)/ObservableObject.cs)

```
void RaisePropertyChanged<T>(Expression<Func<T>> propertyExpression)
{
    var handler = PropertyChanged;
    if (handler != null)
    {
        var propertyName = GetPropertyName(propertyExpression);
        handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

然后调用代码可以使用这个：

```
RaisePropertyChanged(() => this.Property); 
```

而不是依赖像这样的硬编码字符串：

```
RaisePropertyChanged("Property"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:46:33.830

如果你传递一个 lambda 表达式，你可以

```
public class Foo
{
    public string Bar { get; set; }
}

public void SomeStrangeMethod()
{
    Foo foo = new Foo() { Bar = "Hello" };
    string result = GetName(()=>foo.Bar);  // should return "Bar"
    Debug.WriteLine(result); // "Bar"
}

public static string GetName<T>(Expression<Func<T>> expression)
{
    return ExtractPropertyName(expression);
}

/// <summary>
/// Extracts the name of a property from a suitable LambdaExpression.
/// </summary>
/// <param name="propertyExpression">The property expression.</param>
/// <returns></returns>
public static string ExtractPropertyName(LambdaExpression propertyExpression)
{
    if (propertyExpression == null)
    {
        throw new ArgumentNullException("propertyExpression");
    }

    var memberExpression = propertyExpression.Body as MemberExpression;
    if (memberExpression == null)
    {
        throw new ArgumentException(@"Not a member expression", "propertyExpression");
    }

    var property = memberExpression.Member as PropertyInfo;
    if (property == null)
    {
        throw new ArgumentException(@"Not a property", "propertyExpression");
    }

    var getMethod = property.GetGetMethod(true);
    if (getMethod.IsStatic)
    {
        throw new ArgumentException(@"Can't be static", "propertyExpression");
    }

    return memberExpression.Member.Name;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:38:12.970

不 - 这并不总是可能的。

```
3\. Out of the calling context, we should be able to somehow locate the symbol being used. 
```

这是失败的部分。在运行时，您无法获取用于方法参数的符号（至少不能直接获取）。反射库中没有提供此类分析或元数据的工具。

话虽如此，这可能会通过大量的 IL 分析来实现。如果您使用[Mono.Cecil](http://www.mono-project.com/Cecil)之类的工具来反编译程序集，请找到“调用上下文”，然后检查 IL 以查找对相关方法的调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:17:29.157

为了能够在`Expression`不明确指定对象类型的情况下从中找出属性名称，`Expression`您需要一个扩展方法：

```
public static class ObjectExt
{
    public static string FindContext<T,TProp>(this T obj, Expression<Func<T,TProp>> expression) {
        return ( expression.Body as MemberExpression ).Member.Name;
    }
} 
```

然后，如果我们将它放在您的代码示例中

```
public class Foo
{
    public string Bar { get; set; }
}

public void SomeStrangeMethod()
{
    Foo foo = new Foo() { Bar = "Hello" };
    string result = foo.FindContext(s => s.Bar);  // should return "Bar"
} 
```

# ruby-on-rails - Rspec + 设计 + BaseController

> ID：15527971
> 
> 赞同：0
> 
> 时间：2013-03-20T15:33:23.653
> 
> 标签：ruby-on-rails, rspec, devise, ruby-on-rails-3.2, rspec2

我正在为项目的管理部分创建一个基本控制器。管理部分的所有控制器都将从它继承。

```
#app/controllers/admins/base_controller.rb

class Admins::BaseController < ApplicationController
  layout "admin_cms"
  before_filter :authenticate_admin!
end 
```

-

```
#spec/controllers/admins/base_controller_spec.rb

require 'spec_helper'

describe Admins::BaseController do
  controller do
    def index
    end
  end

  describe "before_filter#authenticate_admin!" do
    before(:each) do
      @admin = FactoryGirl.create(:admin)
      @request.env["devise.mapping"] = Devise.mappings[:admin]
    end

    context "when admin is not logged in" do
      it "redirect admin to sign_in path" do
        get :index
        response.should redirect_to new_admin_session_path
      end
    end

  end
end 
```

我已经在我的 spec_helper.rb 中包含了 Devise::TestHelpers 并且在运行此规范时出现此错误：

```
Admins::BaseController
  before_filter#authenticate_admin!
    when admin is not logged in
      redirect admin to sign_in path (FAILED - 1)

Failures:

   1) Admins::BaseController before_filter#authenticate_admin! when admin is not logged     in redirect admin to sign_in path
     Failure/Error: get :index
     ActionView::MissingTemplate:
       Missing template anonymous/index, application/index with {:locale=>[:en],     :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
         * "#<RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorator:0xbaf75d4>"
     # ./spec/controllers/admins/base_controller_spec.rb:17:in `block (4 levels) in <top (required)>'

Finished in 0.17124 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/controllers/admins/base_controller_spec.rb:16 # Admins::BaseController   before_filter#authenticate_admin! when admin is not logged in redirect admin to sign_in path 
```

我将我的规格更改为：

```
require 'spec_helper'

describe Admins::BaseController do
  controller do
    def index
      render nothing: true
    end
  end

  describe "before_filter#authenticate_admin!" do
    context "when admin is not logged in" do
      it "redirect admin to sign_in path" do
        get :index
        response.should redirect_to new_admin_session_path
      end
    end

  end
end 
```

现在我收到了这个错误：

```
Failures:

  1) Admins::BaseController before_filter#authenticate_admin! when admin is not logged in redirect admin to sign_in path
     Failure/Error: response.should redirect_to new_admin_session_path
       Expected response to be a <:redirect>, but was <200> 
```

所以，由于某种原因，它没有进入authenticate_admin！过滤前。我有点迷路了。再次感谢。

我正在使用 Rails 3.2.13、Ruby 2.0.0、Rspec-rails 2.13.0 和 Devise 2.2.3。如果有人可以帮助我解决这个问题，我真的很感激。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T18:19:04.943

好吧，3 小时后，我发现问题出在定义匿名控制器上。

代替：

```
controller do
  def index
  end
end 
```

我用了：

```
controller(Admins::Base) do
  def index
  end
end 
```

You need to specify always the anonymous controller you're testing unless is ApplicationController the one you're trying to test.

# javascript - 如何使用 jQuery 无冲突？

> ID：15527974
> 
> 赞同：1
> 
> 时间：2013-03-20T15:33:26.520
> 
> 标签：javascript, function, jquery

第一个线程：

[https://stackoverflow.com/questions/15526845/function-idreturn-document-getelementbyidid-blows-up-jquery](https://stackoverflow.com/questions/15526845/function-idreturn-document-getelementbyidid-blows-up-jquery)

我的 2 个 JavaScript 文件有冲突。

我尝试使用 no.conflict 但我不明白我需要更改哪个功能......我的脚本像这样加载

```
<script src="<?php echo Config::$absolutePath; ?>media/jquery-1.4.3.min.js"></script>
<script src="<?php echo Config::$absolutePath; ?>media/tags.js"></script>
<script src="<?php echo Config::$absolutePath; ?>js/zoom.js"></script> 
<script type="text/javascript">
$.noConflict();
// Code that uses other library's $ can follow here.
$(id){return document.getElementById(id)};
</script>
<script src="<?php echo Config::$absolutePath; ?>media/pixelicious.js"></script> 
<script type="text/javascript" src="<?php echo Config::$absolutePath; ?>media/dddropdownpanel.js"></script> 
```

有什么问题，我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:36:40.493

您`$('body').zoom({ })`在第二个文件的末尾有一个，必须将其更改为`jQuery('body').zoom({ })`.

您的自我执行匿名函数不包括这段代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:37:26.580

那么你可以[像这样使用。](http://api.jquery.com/jQuery.noConflict/)

```
jQuery.noConflict(); 
```

但是，如果您使用的是 Joomla 之类的东西，那么有一些插件可以为您完成所有工作。 [这很好用：](http://extensions.joomla.org/extensions/core-enhancements/performance/jquery-scripts/18327)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:36:41.570

当您使用 noConflict 时，所有用于调用 jquery 的 $() 必须变为 jQuery()

[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:49:35.807

正如其他人建议的那样：

1.  更改`$.noConflict()`为`jQuery.noConflict()`。
2.  在第二个文件中更改`$('body).zoom({})`为`jQuery('body').zoom({})`

这两个应该解决两个文件的所有问题。请记住，每当您想调用 jQuery 函数时，都必须使用`jQuery`not `$`。

# php - 比较时的php循环

> ID：15527979
> 
> 赞同：0
> 
> 时间：2013-03-20T15:33:31.997
> 
> 标签：php, loops, foreach

我的 abc 循环有问题。我比较了 2 个循环，如果字符串匹配我在超链接之间嵌入，但是我将如何避免不显示循环项目两次。

```
<?php
    foreach($this->data->lexikon_index() as $index){
        foreach ($abc as $letter){      
            echo '<li>';
            if ( $index->alpha == $letter ){
                echo "<a href=\"#{$index->alpha}\">{$index->alpha}</a>";
            } else {
                echo $letter;
            }

            echo '</li>';
        }

        $lexikon_content[] = $this->data->lexikon_content($index->alpha);
    }
    echo '</ul>';
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:44:50.847

使用数组来存储您已经使用过的变量。然后使用`!in_array()`：

```
<?php
    unset($used);
    foreach ($this->data->lexikon_index() as $index) {
        foreach ($abc as $letter) {
            echo '<li>';
            if ($index -> alpha == $letter && !in_array($letter, $used)) {
                $used[] = $letter;
                echo "<a href=\"#{$index->alpha}\">{$index->alpha}</a>";
            } else {
                echo $letter;
            }
            echo '</li>';
        }
        $lexikon_content[] = $this -> data -> lexikon_content($index -> alpha);
    }
    echo '</ul>';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:03:13.473

使用您的代码，您正在执行大量循环。我个人会尝试这个（如果我正确阅读了您的代码）：

```
<?php
    $lexikon_content = array();
    foreach ($this->data->lexikon_index() as $index) {        
        $lexikon_content[count($lexikon_content)] = $this -> data -> lexikon_content($index -> alpha);
    }
    foreach ($abc as $letter) {
        echo '<li>';
        if (in_array($letter, $lexikon_content)) {
            echo "<a href=\"#".$letter."\">".$letter."</a>";
        } else {
            echo $letter;
        }
        echo '</li>';
    }

    echo '</ul>';
?> 
```

# php - PHP：使用 strtotime 转换 MySQL UTC 日期以供 pChart 使用

> ID：15527983
> 
> 赞同：0
> 
> 时间：2013-03-20T15:33:52.703
> 
> 标签：php, mysql, strtotime, pchart

我有 RTM，但我真的不确定如何使用 strtotime 函数将日期从 UTC 转换为 unix 时间，因为我不确定哪些变量去哪里。下面是具体代码：

```
$value = $_POST["Attribute"];
$Customer = $_POST["customer"];
$table = $_POST["table"];
$date = "date";
$myData = new pData();

$myquery = "SELECT `$value`,`$date` FROM `$table` WHERE `Customer` LIKE '$Customer' ORDER BY `date`";
$result = mysql_query($myquery,$connect);
while ($row = mysql_fetch_array($result))
 { $myData->AddPoints($row["$value"],"serie1");
   $date2 = date($date,strtotime($row["date"]));
   $myData->AddPoints($row["$date2"],"date"); } 
```

啊，我几乎看不到了。我认为问题出在倒数第二行，我只是不知道在什么位置。我数据库中的日期列是 UTC，然后我需要使用 $mydata->AddPoints 函数将该值传递给 pChart。这行得通，但是数据混乱了。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:37:22.480

我想你`strtotime()`很好，问题似乎是你正在使用`$row["$date2"]`但你将时间戳保存到`$date2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:31:15.243

好吧，这不是解决问题的方法，但它是一种解决方法。我发现我可以在我的选择查询中使用`"UNIX_TIMESTAMP(`$date `) as ut_date"`，这实际上工作得很好。看起来也干净了很多。

# twitter-bootstrap - Bootstrap中的下拉菜单我们不起作用

> ID：15527984
> 
> 赞同：0
> 
> 时间：2013-03-20T15:33:53.860
> 
> 标签：twitter-bootstrap

嗨，我刚开始研究 twitter bootstrap。我正在尝试创建一个下拉菜单示例。但它没有显示任何内容。谁能告诉我我错在哪里。我的代码是

```
<!DOCTYPE html>
<html>
  <head>
    <title>Bootstrap 101 Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  </head>
  <body>
    <h1>Hello, world!</h1>
<div class="dropdown">
  <!-- Link or button to toggle dropdown -->
  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
    <li><a tabindex="-1" href="#">Action</a></li>
    <li><a tabindex="-1" href="#">Another action</a></li>
    <li><a tabindex="-1" href="#">Something else here</a></li>
    <li class="divider"></li>
    <li><a tabindex="-1" href="#">Separated link</a></li>
  </ul>
</div>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html> 
```

除了标题 Hello World 之外，它没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:41:29.867

您有下拉菜单，但没有激活下拉菜单的按钮。

看这里：

[http://twitter.github.com/bootstrap/components.html#buttonDropdowns](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)

```
<div class="btn-group">
 <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
 Action
 <span class="caret"></span>
 </a>
 <ul class="dropdown-menu">
  <!-- dropdown menu links -->
 </ul>
</div> 
```

# c# - C# 中的 void* 是什么？

> ID：15527985
> 
> 赞同：12
> 
> 时间：2013-03-20T15:33:57.333
> 
> 标签：c#, c++, visual-c++

我正在查看 VC++ 6.00 程序的源代码。我需要将此源代码转换为 C#，但我无法理解此示例中的 (void*) 是什么？

```
glTexImage2D(
     GL_TEXTURE_2D,
     0,
     GL_RGBA8,
     IMAGE_WIDTH,
     IMAGE_HEIGHT,
     0,
     PIXEL_FORMAT,
     GL_UNSIGNED_BYTE,
     (void*)imageData
 ); 
```

在这段代码中 imagedata 是一个指针 byte* imageData

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-20T15:36:58.663

通常，`void*`将转换为`IntPtr`C# 代码。

编辑更多信息：`IntPtr`在 .NET/C# 中通常表现得像一个不透明的句柄。您不能直接取消引用它，从中获取“大小”信息（例如，您指向的数组的大小），并且它不会尝试告诉您它指向的数据类型 - 或者即使它是指针。当您将 C/C++ 代码转换为 C# 时，您会看到`void*`，应该使用 C# 代码编写，`IntPtr`直到您更好地了解您正在处理的内容。

pinvoke.net 站点有两个条目`glTexImage2D`，具体取决于图像数据的存储位置。如果图像数据存储在`byte[]`.NET/C# 中的托管版本中，则调用通过`byte[]`. 如果图像数据存储在非托管内存中，并且您只有`IntPtr`C# 代码中的数据，则调用传递`IntPtr`.

来自[pinvoke.net opengl32](http://pinvoke.net/default.aspx/opengl32/opengl32%20down%20load.html)的示例：

```
[DllImport(LIBRARY_OPENGL)] protected static extern void glTexImage2D (
    uint target,
    int level, 
    int internalformat, 
    int width, 
    int height, 
    int border, 
    uint format, 
    uint type, 
    byte[] pixels);
[DllImport(LIBRARY_OPENGL)] protected static extern void glTexImage2D (
    uint target, 
    int level, 
    int internalformat, 
    int width, 
    int height, 
    int border, 
    uint format, 
    uint type, 
    IntPtr pixels); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-20T15:37:33.330

它通常是`IntPtr`C# 中的一个。

以下是如何从 C# 调用此函数的示例：

```
Bitmap bitmap = new Bitmap("blah");
Gl.glTexImage2D(Gl.GL_TEXTURE_2D, 0, 4, bitmap.Width, bitmap.Height, 0, Gl.GL_RGBA, Gl.GL_UNSIGNED_BYTE, bitmap.Scan0);

if(bitmap != null) {
    bitmap.Dispose();
} 
```

来源：[http ://www.gamedev.net/topic/193827-how-to-use-glglteximage2d--using-csgl-library-in-c/](http://www.gamedev.net/topic/193827-how-to-use-glglteximage2d--using-csgl-library-in-c/)

如果您拥有的是`byte[]`包含有效图像的图像，则可以将其加载到位图中，如下所示：

```
public static Bitmap BytesToBitmap(byte[] byteArray)
{
    using (MemoryStream ms = new MemoryStream(byteArray))
    {
        Bitmap img = (Bitmap)Image.FromStream(ms);
        return img;
    }
} 
```

如果这给您带来麻烦，或者您的数据不是 Win32 库可以处理的，您可以使用 Marshal 直接为您提供`IntPtr`from a `byte[]`。

```
IntPtr unmanagedPointer = Marshal.AllocHGlobal(bytes.Length);
Marshal.Copy(bytes, 0, unmanagedPointer, bytes.Length);

// Call your function here, passing unmanagedPointer to it

Marshal.FreeHGlobal(unmanagedPointer); 
```

来自： [如何在 C# 中从 byte[] 获取 IntPtr](https://stackoverflow.com/questions/537573/how-to-get-intptr-from-byte-in-c-sharp)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T15:50:14.733

正如 Jonathan D 在他的数据中所解释的那样，`void*`C 表示不能直接使用的泛型类型是一种方式。它是 C 实现泛型接口的方式，尽管它在 C# ( `System.IntPtr`) 中有直接等价物，但您可能想要使用其他东西，因为 C# 有更好的方法来处理泛型数据，并且不确定是否需要在此处传递泛型数据.

由于您将图像数据传递给函数，因此`void*`在 C# 中表示的有几种可能性：

*   `byte[]`将原始图像数据传递给函数
*   `System.Drawing.Color[,]`如果您正在处理更高级别的点数据（不太可能）
*   `System.Drawing.Image`如果您想在更高级别上处理图像数据；如果你能侥幸逃脱，这可能是个好主意
*   `IntPtr`如果您有一个低级缓冲区并且该函数在内部将数据传递给 C API 而不自己处理它。

如果没有更多关于如何使用代码以及要翻译哪些部分的信息，就不可能在这里说出您需要哪些类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-20T15:47:00.677

如前所述， [IntPtr](http://msdn.microsoft.com/en-US/library/system.intptr%28v=vs.100%29.aspx)是等价的。

您只能在 c#中的[不安全上下文中使用指针，例如：](http://msdn.microsoft.com/library/chfa2zb8%28v=vs.100%29.aspx)

```
void MyMethod(IntPtr ptr)
{
  unsafe
  {
      var vptr = (void*) ptr;
      // do something with the void pointer
  }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T15:36:07.180

它正在转换`imageData`为 type `(void*)`，所以基本上告诉编译器采用这个值并将其视为`(void*)`

根据我的经验，`void*`是指向非特定类型的指针。

* * *

至于将您的示例转换为 c#，那么您不必太担心 c++ 中的内容是如何转换的。只需确保将正确的类型传递给相应的 c# 函数即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-20T15:36:37.020

虚空其实什么都不是，

void 的三种使用方式：

*   参数：`int myFunc(void)`-- 该函数不接受任何内容。

*   返回值：`void myFunc(int)`-- 函数不返回任何内容

*   通用数据指针：`void* data`-- 'data' 是一个指向未知类型数据的指针，不能被取消引用

在这种情况下，它是一个通用数据指针。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-20T15:38:58.997

`void*`是指向未定义类型对象的指针。在 C# 中有多种表示形式：

1.  作为不安全代码中的未格式化[指针](http://msdn.microsoft.com/en-us/library/y31yhkeb%28v=vs.110%29.aspx)。
2.  作为[`IntPtr`](http://msdn.microsoft.com/en-us/library/system.intptr%28v=vs.110%29.aspx)，它通常用于在托管和非托管对象之间编组指针。
3.  至于[`object`](http://msdn.microsoft.com/en-us/library/vstudio/9kkx3h3c.aspx)未指定但托管的对象。

# c++ - 如何使用 C++ boost 库中的 for_each？

> ID：15527999
> 
> 赞同：1
> 
> 时间：2013-03-20T15:34:54.830
> 
> 标签：c++, boost, compilation, foreach

我尝试使用C++ boost 库中的[for_each](http://www.boost.org/doc/libs/1_45_0/libs/fusion/doc/html/fusion/algorithm/iteration/functions/for_each.html)。这是我拥有的代码。

```
#include <iostream>
#include <vector>

#include <boost/fusion/algorithm/iteration/for_each.hpp>
#include <boost/fusion/include/for_each.hpp>

using namespace std;

int main() {

        vector<int> vec;
        vec.push_back(1);
        vec.push_back(2);
        vec.push_back(3);

         boost::for_each(
                vec,
                [](int val){
                        cout << val << "\n";
                }
        );

        return 0;
} 
```

这就是我编译代码的方式：

```
g++ -std=c++0x -I /opt/software/boost/1.50_ubuntu12.4lts_gcc4.7.2/include -c try_boost.cpp
g++ -o try_boost -L/opt/software/boost/1.50_ubuntu12.4lts_gcc4.7.2/lib try_boost.o -lboost 
```

结果我得到：

```
error: ‘for_each’ is not a member of ‘boost’ 
```

有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:45:00.497

您正在使用`for_each`Boost.Fusion 库。这不适用于`std::vector`.

您需要的`for_each`来自 Boost.Range 库。

```
#include <boost/range/algorithm/for_each.hpp> //note this difference!

boost::for_each(vec, your-lambda-expression); 
```

它在命名空间内定义，使用声明性`boost::range`将其引入命名空间。所以你也可以这样写：`boost``using`

```
boost::range::for_each(vec, your-lambda-expression); 
```