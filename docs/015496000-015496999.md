# StackOverflow 问答 15496000-15496999

# php - 每个页面的不同页面标题仅使用一个标题

> ID：15496008
> 
> 赞同：0
> 
> 时间：2013-03-19T09:45:46.887
> 
> 标签：php, title

我正在建立一个博客。我想要索引页面的一个标题和每个帖子页面的不同标题。所以我做了这样的代码。这是最好的方法吗？

```
<title><?php 
    $posttitle = $_GET["article"];

    if (empty($posttitle)) {
print $blog_title;
    }

    else {
        $result = mysqli_query($con,"SELECT * FROM post WHERE postlink='$posttitle' ");
        while($row = mysqli_fetch_array($result))

                {
                    print $row['title'];
                };
        };

    ?></title> 
```

这段代码对我有用。但我不认为每次都检查我们是否正在查看文章是个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:50:56.390

第一的：

```
 $posttitle = $_GET["article"];

    if (empty($posttitle)) {
      print $blog_title;
    } 
```

如果 $)GET 未设置，将产生 E_NOTICE 错误。做：

```
 if (empty($_GET['article'])) {
     $posttitle = $_GET['article'];
      print $blog_title;
    } 
```

如果不解析字符串，也可以使用 ' 而不是 "。

第二：逃避从 POST 或 GET 获得的一切！如果您希望数据是文章 ID，请执行 (ing $_GET['article']) 并阅读有关 SQL 注入的信息。

# android - 如何将触摸坐标映射到android中的opengl对象坐标

> ID：15496010
> 
> 赞同：1
> 
> 时间：2013-03-19T09:45:47.210
> 
> 标签：android, mapping

我在 GLSurfaceView 中创建了一个简单的正方形，我想通过简单地触摸该正方形上的屏幕来选择该正方形。出于这个原因，我在 gluUnProject() 方法的帮助下将屏幕坐标转换为 opengl 坐标。现在我想检查触摸点是否在正方形上。但是我得到的opengl坐标在范围内（-1到1），我的方坐标超出了这个范围。那么如何将这些opengl坐标映射到实际的正方形坐标呢？任何帮助表示赞赏。谢谢

# java - 没有弹簧控制器可以做弹簧安全吗

> ID：15496019
> 
> 赞同：1
> 
> 时间：2013-03-19T09:46:02.940
> 
> 标签：java, spring, spring-mvc, spring-security

是否可以在没有弹簧控制器的情况下实现弹簧安全。

我不确定这是否可能，因为根据我的理解，弹簧是可插拔的，所以当它是可插拔的山墙时，我应该能够在没有控制器的情况下进行操作，这样当我需要使用相同的控制器时我不需要更改控制器在另一个应用程序中，反之亦然。

从春天开始：

`People use Spring Security for many reasons, but most are drawn to the project after finding the security features of J2EE's Servlet Specification or EJB Specification lack the depth required for typical enterprise application scenarios. Whilst mentioning these standards, it's important to recognise that they are not portable at a WAR or EAR level. Therefore, if you switch server environments, it is typically a lot of work to reconfigure your application's security in the new target environment. Using Spring Security overcomes these problems, and also brings you dozens of other useful, customisable security features.`

我不确定我所解释的观点是否属实，如果我错了，请纠正我。

请为我提供支持性答案，因为我是春天的新手，我也想学习一些具体和基本的东西。

此致

# twig - 如何在 Twig 文件中转换 word 中的数字

> ID：15496022
> 
> 赞同：3
> 
> 时间：2013-03-19T09:46:04.587
> 
> 标签：twig

我想将价格：200 美元转换为价格：两百美元之类的词。

在像这样 {{ price }} 的树枝中，但这是显示编号。

谁能知道如何在 Twig 中用文字显示这个价格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-05T21:32:56.690

官方 Twig 的扩展存储库提供的 Intl 过滤器可以拼出数字：

```
{{ 19.2|localizednumber('spellout') }}
{# Output: nineteen point two #} 
```

要使此过滤器正常工作，需要 PHP intl 扩展并且`twig/extensions`必须安装包。

如果您直接使用 Twig，请像这样注册扩展：

```
$twig->addExtension(new Twig_Extensions_Extension_Intl()); 
```

如果您使用 Symfony，请注册此服务：

```
services:
    Twig_Extensions_Extension_Intl:
        class: Twig_Extensions_Extension_Intl
        private: true
        tags:
            - { name: twig.extension } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:53:35.650

如果不添加此功能，Twig 将不会显示任何拼写的内容。查看 craue 的 TwigExtensionsBundle，它包含一个带有过滤器的 Twig 扩展，用于拼写数字。

[https://github.com/craue/TwigExtensionsBundle](https://github.com/craue/TwigExtensionsBundle)

用法：

```
spelled out number: {{ price | craue_spellout }} 
```

# javascript - 使用存储在文档中的数据在 xpages 中绘制图形

> ID：15496026
> 
> 赞同：0
> 
> 时间：2013-03-19T09:46:26.337
> 
> 标签：javascript, xpages, dojox.charting

我正在使用 xpages，我需要在图表上显示数据点。我需要能够选择一个我需要绘制的文档（我尝试通过在视图中存储数据点来做到这一点）。我尝试使用 javascript 来定义我的绘图，但我无法让它绘制带有数据的文件/文档。除非我对所有数据点进行硬编码，否则它不起作用。有什么我想念的吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:23:44.650

Iona, depending on your plot library (I like [d3js](http://www.d3js.org/)), you will find JavaScript methods that allow you to retrieve those values using an Ajax call to an URL. That is the first step you need to sort out (with a static JSON file on your Domino).

Once you have that working, then you replace the static JSON file with the Ajax/Json control from the extension library that delivers values based on a script you write. There you can read a view, get values from a document or whatever fits your needs.

# jaxb - JAXB：地图<字符串，（地图>) >

> ID：15496027
> 
> 赞同：1
> 
> 时间：2013-03-19T09:46:27.423
> 
> 标签：jaxb, jaxb2

我正在开发一些 Web 服务，我正在尝试发送具有以下结构的对象： Map< String, (Map>) > 问题是 jaxb 无法编组该对象，任何人都可以提出一些方法来完成这项工作

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:30:10.430

您可以将 an`XmlAdapter`用于此用例。An`XmlAdapter`使您能够将不可映射的对象转换为可映射的对象，以便进行编组和解组。

**了解更多信息**

*   [http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html](http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html)

# javascript - 在另一个 JSP 中链接一个 JSP 文件

> ID：15496029
> 
> 赞同：0
> 
> 时间：2013-03-19T09:46:29.800
> 
> 标签：javascript, jquery, html, jsp

我试图拆分我的 JSP 代码，以便它不是全部在一个文件中。我有 2 个标签 - 主页和测试。这是我的代码：

```
<ul>
   <li><a href="#tabHome">Home</a></li>
   <li><a href="#test">Test</a></li>
</ul> 
```

问题是当主页选项卡加载时，它也会加载测试页面。这是我链接到测试页面的方式：

```
<div id="test">
    <tr>
        <td>
            <jsp:include page="test.jsp" />
        </td>
    </tr>
</div> 
```

和 test.jsp：

```
<table>
<tr>
    <td>
        <div>
        <table width="100%" border="0">
        <col width="14%">
            <form:form id="testForm" method="post" action="/test/testing
            <tr>
                <td> SYSTEM SETTINGS </td>
            </tr>
            </form:form>
         </table>
         </div>
     </td>
</tr>
</table> 
```

我究竟做错了什么？单击选项卡时，如何使其仅显示 test.jsp？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:55:11.557

#name 形式的锚点 href 指向同一页面上的内容。您需要 Javascript 来显示您刚刚单击的选项卡并隐藏另一个选项卡。

或者，您可以在另一个页面上有第二个选项卡：链接到单独 JSP 中的选项卡的通用代码：

选项卡.jsp：

```
<ul>
   <li><a href="/path/to/tabHome.jsp">Home</a></li>
   <li><a href="/path/to/test.jsp">Test</a></li>
</ul> 
```

然后其他 JSP 都将包含 tabs.jsp 以显示选项卡集，因此它在所有页面上看起来都相同。

# javascript - 移动设备的脚本检测 - 请更正我的代码

> ID：15496035
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:46:52.293
> 
> 标签：javascript

我有这个代码：

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
function isMobile() {
   return preg_match("/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i", $_SERVER["HTTP_USER_AGENT"]))
}

</script>
if (isMobile)
    <meta HTTP-EQUIV="REFRESH" content="0; url=http://www.google.com/">
else
    <meta HTTP-EQUIV="REFRESH" content="0; url=http://mail.yahoo.com/">
</head>

<body>

</body>
</html> 
```

用 Firefox 测试，它显示了正确的站点，但在重定向之前显示了短语“if (isMobile) else”。用IE测试，它显示错误的站点。我究竟做错了什么？（我用我的台式电脑进行了测试。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:19:28.973

我对您的代码做了一些小改动：

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">

function isMobile() {
    return /Mozilla/g.test(navigator.userAgent);
} 

if (isMobile()){
    window.location.href = "http://www.google.com"
}else{
    window.location.href = "http://mail.yahoo.com"
}
</script>
</head> 
```

Firefox 和 IE 都打开 google。如果我用我的改变你的功能，那么什么都不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:55:38.030

你关闭了你的 script 标签，但继续写 JavaScript。您需要在脚本标签内执行所有 JS。这应该有效，但我没有测试它。

```
<!DOCTYPE html>
<html>
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">

function isMobile() {
    return /Mozilla/g.test(navigator.userAgent);
} 

var meta = document.createElement('meta');
meta['HTTP-EQUIV'] = "REFRESH";

var url = "";
if (isMobile()){
    url = "http://www.google.com/";
}else{
    url = "http://mail.yahoo.com/";
}
meta.content = '0; url=' + url;
document.head.appendChild(meta);
</script>
</head> 
```

# c# - 如何从主窗口调用 WPF 中的用户控件？

> ID：15496037
> 
> 赞同：1
> 
> 时间：2013-03-19T09:46:54.127
> 
> 标签：c#, wpf

最近我正在研究**WPF UserControl**，我很高兴第一次`UserControl`在**WPF**窗口之后使用。我创建了**WPF**应用程序，它有一个名为“ `MainWindow`”的窗口。`MAinWindow`有名为“ ”的**按钮**`Technology`。我还创建了`UserControl`名为' `TechnologyUserControl`'。我想`TechnologyUserControl`在单击按钮''后显示' `Technology`'。任何人都可以帮助我..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:51:39.483

我本来打算对你投反对票或评论：“你试过什么？”，但又一次：

您需要实例化 UserControl，设置其 DataContext 并将其添加到父视图。您可以使用标记 (XAML) 或在代码中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:59:24.457

如果您`TechnologyUserControl`一开始设置为**隐藏**，请创建一个点击事件`Technology`并放入其中：

```
TechnologyUserControl.Visibility = System.Windows.Visibility.Visible; 
```

# scala - 向 Akka 序列化模块注入特殊情况

> ID：15496039
> 
> 赞同：1
> 
> 时间：2013-03-19T09:47:05.000
> 
> 标签：scala, networking, serialization, pattern-matching, akka

我想添加特殊情况来提高*任何*Akka 序列化模块的性能，即允许更快的序列化`Array[Double]`或用户包装的任何原始类型。是否有一种规范的方式来允许基于每种类型的自定义序列化？

我的想法是添加一个`CanSerialize[T]`定义方法`serialize(o:T):Array[Byte]`和`deserialize(bytes:Array[Byte]):T`. 有没有办法在不失去 Akka 的好处的情况下实现这样的事情，比如模式匹配？

**编辑** 我也可以对 Kryo 或其他比 Java 的序列化器更快的东西感到满意，但似乎没有任何用于 Kryo 和 Akka 2.1 的预打包 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:05:08.583

您可以为特定类型注册自己的序列化程序。

```
akka.actor {
  serialization-bindings {
    "[D" = doubleBytes
  }

  serializers {
    doubleBytes = "a.b.YourDoubleArraySerializer"
  }
} 
```

请注意，这`[D`是`Array[Double]`.

[http://doc.akka.io/docs/akka/2.1.2/scala/serialization.html](http://doc.akka.io/docs/akka/2.1.2/scala/serialization.html)

# json - 解析 JSON 字符串时加载网页时出错

> ID：15496042
> 
> 赞同：0
> 
> 时间：2013-03-19T09:47:12.563
> 
> 标签：json, node.js, connect, zlib, gunzip

请查看我尝试使用 connect.compress 中间件压缩数据的代码。如何在浏览器中解析 JSON 字符串以获取解压缩数据。当我尝试访问 localhost:2080 时，出现页面加载错误。

客户端代码

```
var options = {
host: '127.0.0.1',
port: 2080,
path: "/",
headers:{
'accept-encoding': 'gzip'
}
};
var req = http.request(options, function(res) {
console.log('STATUS: ' + res.statusCode);
console.log('HEADERS: ' + JSON.stringify(res.headers));
var data = '';
res.on('data', function (chunk) {
data += chunk;  
});
res.on('end', function (chunk) {
var data2 = JSON.parse(data);
console.log(data2.app_id);
});
}); 
```

服务器代码

```
app = connect();
app.use(connect.compress(console.log("compressed data")))
app.use(connectDomain())
.use(connect.query())
.use(connectRoute(function (router) {

router.get('/', function (req, res) {
            var acceptEncoding = req.headers['accept-encoding'];

              if (acceptEncoding.match(/\bdeflate\b/)) {
                    res.setHeader('content-encoding', 'deflate');
              } else if (acceptEncoding.match(/\bgzip\b/)) {
                    res.setHeader('content-encoding', 'gzip');
              }
            console.log(res._headers);  
            res.setHeader('Content-Type', 'application/json');
            res.end('{"app_id": "A3000990"}');
            })
            }))

.use(function(err, req, res, next) {
    res.end(err.message);
  });

http.createServer(app).listen(2080); 
```

我们无法控制浏览器。它要么发送 Accept-encoding: gzip, deflate header，要么不发送。那么我们可以使用connect.compress()获取压缩数据吗？

任何帮助都会非常有帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:10:02.147

这里有几个问题：

*   您正在`Content-Encoding`服务器中设置标头，但也使用`connect.compress`which 也将设置该标头。这可能会产生冲突，所以不要自己添加这些标题并让`connect.compress`处理所有压缩；
*   你实际上并没有在你的客户端发送 HTTP 请求，添加`req.end()`它；
*   没有尝试解压缩客户端中的压缩数据；如何做到这一点[可以在这里找到](https://stackoverflow.com/a/12776856/893780)；

# javascript - d3.event.dx 返回什么？

> ID：15496044
> 
> 赞同：1
> 
> 时间：2013-03-19T09:47:13.217
> 
> 标签：javascript, d3.js

我正在学习 d3 drag，我被这条线卡住了 `d3.event.dx`。当我在控制台中输出这个值时，它会在我拖动点时返回一些 int 值，我不知道这个返回值遵循什么模式。谁能解释一下？

```
vis.selectAll("circle.control")
    .data(function(d) { return points.slice(0, d) }) // array contains 2 3 ... 5 points respectively 
  .enter().append("circle")
    .attr("class", "control")
    .attr("r", 7)
    .attr("cx", x)
    .attr("cy", y)
    .call(d3.behavior.drag()
      .on("dragstart", function(d) {
        this.__origin__ = [d.x, d.y];
        //alert(this.__origin__);
      })
      .on("drag", function(d) {
        d.x = Math.min(w, Math.max(0, this.__origin__[0] += d3.event.dx));
        //alert(this.__origin__[0]);
        //alert(d3.event.dx);
        console.log(d3.event.dx);
       // console.log (d.x);

        d.y = Math.min(h, Math.max(0, this.__origin__[1] += d3.event.dy));

        //alert(this.__origin__[1]);
        bezier = {};
        update();
        vis.selectAll("circle.control")
          .attr("cx", x)
          .attr("cy", y);
      })
      .on("dragend", function() {
        delete this.__origin__;
      })); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-19T15:17:17.933

d3.event.dx 返回鼠标移动到拖动事件开始处的 x 坐标的 x 增量。

[https://github.com/d3/d3-drag/blob/master/README.md#user-content-drag-events](https://github.com/d3/d3-drag/blob/master/README.md#user-content-drag-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:58:34.427

事件对象的`dx`成员将是一些坐标，但可能对您没有意义。`d3.event`是[DOM 事件](https://developer.mozilla.org/en-US/docs/DOM/event)，因此包含的信息可能无法反映您在可视化中所做的事情。

您可以使用 d3 提供的其他方法来获取更有意义的信息，例如`d3.mouse()`获取相对于容器的坐标。[文档](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_event)中的更多信息。

# c# - 我可以为未授权或未验证的 .NET 异常抛出

> ID：15496045
> 
> 赞同：84
> 
> 时间：2013-03-19T09:47:14.733
> 
> 标签：c#, exception, authentication, authorization

我有部分代码，只要用户未经过身份验证/未授权，我想抛出异常。

因此，我没有编写自己的 NotAuthenticatedException 和 NotAuthorizedException，而是想知道是否还没有针对这些的一些 C# 标准。

我可以想象很多程序都会抛出类似的异常，如果每个人都再次“编写自己的轮子”，那将不是很有用。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-09-19T15:16:56.640

您还可以将[UnauthorizedAccessException](http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx)用于授权违规

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-03-19T09:49:36.913

使用 C# [AuthenticationException](https://docs.microsoft.com/en-us/dotnet/api/system.security.authentication.authenticationexception)或[InvalidCredentialException](https://docs.microsoft.com/en-us/dotnet/api/system.security.authentication.invalidcredentialexception)类。

[https://docs.microsoft.com/en-us/dotnet/api/system.security.authentication.authenticationexception](https://docs.microsoft.com/en-us/dotnet/api/system.security.authentication.authenticationexception)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-19T10:35:55.560

为了避免重新发明轮子，我会使用[PrincipalPermission.Demand](http://msdn.microsoft.com/en-us/library/system.security.permissions.principalpermission.demand.aspx)或[PrincipalPermissionAttribute](http://msdn.microsoft.com/en-us/library/system.security.permissions.principalpermissionattribute.aspx)。

`SecurityException`如果请求失败，将为您抛出A。

如果您确实想显式抛出异常而不是使用`PrincipalPermission.Demand`，则可以考虑重用现有类型[System.UnauthorizedAccessException](http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx)，MSDN 中将其描述为：

> 当操作系统由于 I/O 错误或特定类型的安全错误而拒绝访问时引发的异常。

是您的应用程序而不是操作系统拒绝访问，但可能足够接近。

# php - 如何使用 $_FILES 获取上传进度？

> ID：15496047
> 
> 赞同：3
> 
> 时间：2013-03-19T09:47:21.687
> 
> 标签：php, javascript, jquery, html, ajax

HTML：

```
 <input type="file" value="choose file" name="file[]" multiple="multiple"/><br/>
                        <input type="submit" class="submit" value="confirm" />
                        <input type="hidden" name="uploadFiles" />

</form> 
```

PHP：

```
if (isset($_POST['uploadFiles'])) {
  $fileCount = count($_FILES["file"]["name"]);
  for ($i = 0 ; $i < $fileCount ; $i++ ) {
      checking......
       move_uploaded_file($_FILES["file"]["tmp_name"][$i],$fileName);
  }
} 
```

目前我正在使用上述方式上传文件，我发现Jquery UI提供了进度条功能，但我必须向它提供上传状态。因此，我可以选择什么方法来获得状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:56:03.473

我的建议是下载一个已经构建好的 ajax 文件上传脚本并稍微研究一下，因为粘贴它们作为回复非常复杂。

我只是看了一下我的脚本，似乎它实际上是在 JS 方面的进展，而不是在 php.ini 中。

如果您已升级到 php 5.4，则可以使用

[http://www.php.net/manual/en/session.upload-progress.php](http://www.php.net/manual/en/session.upload-progress.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:55:01.530

如果你有 PHP 5.4，你可以使用这个方法。查看php网站上的信息：http: [//php.net/manual/en/session.upload-progress.php](http://php.net/manual/en/session.upload-progress.php)

如果您不在 PHP 5.4 中，也可以使用 APC 完成相同的操作查看：[http ://www.ibm.com/developerworks/library/os-php-v525/index.html](http://www.ibm.com/developerworks/library/os-php-v525/index.html)

但是，许多 jQuery 插件使用嵌入式 flash，它们可以从中检索信息。如前所述：Uploadify

# c# - 如何显示进入foreach循环的所有结果

> ID：15496049
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:47:22.113
> 
> 标签：c#

这是我的代码

```
foreach (string word in words)
            {
                SqlCommand cmd= new SqlCommand("select * from skills  where (skills  like '%"+word+"%')",con);
                SqlDataAdapter da = new SqlDataAdapter(cmd); DataTable dt = new DataTable();
                da.Fill(dt);

            } 
```

最后，我想将所有结果显示到网格视图或某个位置（在每个循环中它得到不同的结果）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:51:37.643

如果您只想在 gridView C# winform 中显示它，只需执行以下操作：

```
gridView1.DataSource = dt; 
```

虽然是一个非常粗糙的架构。

编辑1：

好吧，我看错了要求。扫描阅读不够好。Pranav 的答案已经是一个可行的解决方案，我将为其添加一些额外的注释。

首先，如果你`SELECT`在 for 中做语句，性能会变得非常糟糕。每次 SELECT 命中时，它将打开-关闭连接。其次，从 mssql 的角度来看，像 '%word%' 这样的地方会给你带来麻烦，因为它不能被索引。此外，如果您能够获得正确的数据以便您可以构建，这将更好`where skill in('skill1', 'skill2', '..', '..')`，从而提高性能并减少对 DataTable 的要求。

如果您仍然需要使用 %word%，则考虑使用临时表，并改为在 sql 中进行查询。通常，它应该比 for-SELECT 执行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:56:32.757

你可以尝试类似的东西： -

```
 DataTable dt = new DataTable();
foreach (string word in words)
            {
                SqlCommand cmd= new SqlCommand("select * from skills  where (skills  like '%"+word+"%')",con);
                SqlDataAdapter da = new SqlDataAdapter(cmd); 
                DataTable dt1 = new DataTable();
                da.Fill(dt1);
                if (dt!= null)// to check if datatable is empty:-
                dt.Merge(dt1, false, MissingSchemaAction.Add);
                else
                dt=dt1.copy();// copy one datatable to another
                dt1.clear();
            } 
```

// 最后将数据表与 gridview 绑定：-

```
GridView1.DataSource = dt;

GridView1.DataBind(); 
```

# python - 动态 SQL WHERE 子句生成

> ID：15496051
> 
> 赞同：9
> 
> 时间：2013-03-19T09:47:22.813
> 
> 标签：python, sql, sqlite, language-agnostic, sql-injection

作为记录，我使用的是 Python 和 SQLlite。我有一个可以生成我需要的 SQL 的工作函数，但它似乎不正确。

```
def daily(self, host=None, day=None):
    sql = "SELECT * FROM daily WHERE 1"
    if host:
        sql += " AND host = '%s'" % (host,)
    if day:
        sql += " AND day = '%s'" % (day,)
    return sql 
```

稍后我可能需要添加多个列和条件。

有更好的想法吗？

**编辑：** 看起来不正确的是我正在从字符串动态构建 SQL。这通常不是最好的方法。SQL 注入攻击，需要正确转义字符串。我不能使用占位符，因为有些值是 None 并且不需要在 WHERE 子句条件中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-19T10:04:21.910

您*真的*不想使用字符串格式来包含值。通过 SQL 参数将其留给数据库 API。

使用参数你：

*   让数据库有机会准备语句并重用查询计划以获得更好的性能。
*   省去正确转义值的麻烦（包括避免允许 SQL 转义和那些 SQL 注入攻击）。

由于 SQLLite[支持命名 SQL 参数](http://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.execute)，我将返回一个语句和一个带参数的字典：

```
def daily(self, host=None, day=None):
    sql = "SELECT * FROM daily"
    where = []
    params = {}
    if host is not None:
        where.append("host = :host")
        params['host'] = host
    if day is not None:
        where.append("day = :day")
        params['day'] = day
    if where:
        sql = '{} WHERE {}'.format(sql, ' AND '.join(where))
    return sql, params 
```

然后将*两者*传递给`cursor.execute()`：

```
cursor.execute(*daily(host, day)) 
```

SQL 生成*很快*变得复杂，您可能希望查看[SQLAlchemy 核心](http://docs.sqlalchemy.org/en/latest/core/)来代替生成。

对于您的示例，您可以生成：

```
from sqlalchemy import Table, Column, Integer, String, Date, MetaData

metadata = MetaData()
daily = Table('daily', metadata, 
    Column('id', Integer, primary_key=True),
    Column('host', String),
    Column('day', Date),
)
from sqlalchemy.sql import select

def daily(self, host=None, day=None):
    query = select([daily])
    if host is not None:
        query = query.where(daily.c.host == host)
    if day is not None:
        query = query.where(daily.c.day == day)
    return query 
```

该`query`对象可以应用其他过滤器、排序、分组、用作其他查询的子选择、连接并最终发送以执行，此时 SQLAlchemy 会将其转换为适合您连接到的特定数据库的 SQL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-06T09:13:42.193

只是为了完整性。我发现 pypika 库非常方便（如果允许使用库）：

[https://pypika.readthedocs.io/en/latest/index.html](https://pypika.readthedocs.io/en/latest/index.html)

它允许像这样构造 sql 查询：

```
from pypika import Query

q = Query._from('daily').select('*')
if host:
     q = q.where('host' == host)
if day:
     q = q.where('day' == day)
sql = str(q) 
```

# visual-studio-2010 - VS 2010 看不到来自 TFS2012 的构建控制器

> ID：15496055
> 
> 赞同：1
> 
> 时间：2013-03-19T09:47:31.497
> 
> 标签：visual-studio-2010, tfsbuild

我安装了 Team Foundation Server 2012 Express 以便与 Visual Studio 2010 一起使用。我已经安装了 SP1，并且可以在 Visual Studio 2010 中查看和使用 Team Project。

我在 TFS 中设置了构建控制器，但在 VS2010 中看不到它们。当我单击“新构建定义”选项时，我收到错误消息：

> 创建构建定义需要为此团队项目集合定义构建控制器。可能没有配置任何控制器，或者您可能没有查看它们的权限。与您的 Team Foundation Server 管理员签约

我已将我的名字添加到我可以在 Team Foundation Express 管理控制台中看到的每个构建组中，因此我认为它不太可能（尽管并非不可能）是一个权利问题。

有没有其他人遇到过这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:32:07.443

解决了 - 构建控制器不在正确的工作区中！

# iphone - UITableViewCellSelection 样式无法正常工作

> ID：15496063
> 
> 赞同：0
> 
> 时间：2013-03-19T09:48:05.420
> 
> 标签：iphone, ios, uitableview

我正在使用 Xcode 4.5 和 iOS 5.0 开发应用程序。

在我的应用程序中，我有一个通过**Storyboard**`UITableView`创建的称为**surveyTableView**。我希望我的 s 被选中，我正在使用这段代码来实现它。**`surveyTableView cell`**

 **```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath
        {
            static NSString *cellIdentifier = @"Cell Identifier";
            UITableViewCell *cell = [self.surveyTableView dequeueReusableCellWithIdentifier:cellIdentifier];
            if(!cell)
            {
                cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
            }
            cell.selectionStyle = UITableViewCellSelectionStyleBlue;
            cell.textLabel.text = [[self.surveyInfoArray objectAtIndex:indexPath.row] valueForKey:@"SurveyName"];
            [cell setSelected:YES];
            return  cell ;
        } 
```

在这种情况下，我只有一个部分的行数为 2。这是我在屏幕上看到的图像。![截屏](../Images/504506b8fbd2ca0de94207dfc3f65d06.png)

你们知道为什么会这样吗？

**编辑**：我已经设置`UITableView selection attribute`为`Multiple Selection`，即使是`Single Line Selection`，我意识到没有区别。

**编辑2**：在这里，我得到图像时，我选择`UITableViewCellStyleSubtitle`![截图2](../Images/708b6c5e4ce3c38827957a0957a88f85.png)

**编辑3**：这是有趣的部分，当我现在选择时，这是图像。这让我发疯![截图3](../Images/a6f28c65245630c6bbd96d6df7396333.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:02:53.717

请删除这个 `[cell setSelected:YES];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:07:28.000

为此，您应该使用`selectRowAtIndexPath:animated:scrollPosition:`UITableViewCell 中的 selected 属性`cellForRowAtIndexPath`。

通过使用这个，您可以始终选择一个单元格，并且只有在您选择另一个单元格时才会更改

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:01:38.580

```
if(!cell)
            {
                cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
cell.selectionStyle = UITableViewCellSelectionStyleBlue;
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:01:55.830

我也有同样的问题，通过在情节提要中正确设置属性来修复它。附上表格视图属性的屏幕截图。希望这可以帮助你

![在此处输入图像描述](../Images/1b5e5f1df4f416af163db41f89cd935d.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T11:25:56.750

我认为您无法从surveyTableView 获取数据

```
NSString *cellValue= [[self.surveyInfoArray objectAtIndex:indexPath.row] valueForKey:@"SurveyName"];
NSLog(@"%@",cellValue); 
```

检查它是否在控制台中打印一些值**

# python - 从谷歌应用引擎下载应用程序时抛出错误<400>

> ID：15496065
> 
> 赞同：0
> 
> 时间：2013-03-19T09:48:12.030
> 
> 标签：python, google-app-engine, sdk

我的应用程序名称是 nfcVibe，但我仍然收到如下错误。任何人都建议我下载我的应用程序。我想我只给出了正确的命令。但我不知道哪里出了问题。

C:\Program Files\Google\google_appengine>appcfg.py download_app -A nfcVibe -V 1 "e:\nfcvibe1"

03:11 PM 主持人：appengine.google.com

03:11 PM 正在获取文件列表...

错误 400：--- 开始服务器输出 ---

客户端错误 (400)

由于未指定的原因，该请求无效。

--- 端服务器输出 ---

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:35:57.033

@Bharadwaj**请检查您在命令中指定的版本号是否确实存在于appengine中。**

还要确保您提供了正确的 appengine 凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-16T23:32:34.237

旧线程，但对于其他任何人来说，App Engine 项目 ID 是小写的，并且指定的项目名称是混合大小写的。

错误的：

```
appcfg.py download_app -A nfcVibe -V 1 "e:\nfcvibe1" 
```

改成：

```
appcfg.py download_app -A nfcvibe -V 1 "e:\nfcvibe1" 
```

注意小写的appid

# c# - C# 动态列表中的超出范围异常

> ID：15496068
> 
> 赞同：0
> 
> 时间：2013-03-19T09:48:23.687
> 
> 标签：c#, serial-port, arduino

当我尝试访问我使用计数器变量提供实时数据的列表时，我收到了 ArgumentOutofRangeException。这是我的部分代码

```
private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
    RxString = serialPort1.ReadExisting();
    RxString = RxString.Replace("$", "");
    this.Invoke(new EventHandler(DisplayText));
}

private void DisplayText(object sender, EventArgs e)
{
    richTextBox1.AppendText(RxString);
    parsed(ref ctr);
    richTextBox2.Text = String.Join(Environment.NewLine, stringList);
}

public void parsed(ref int ctr)
{
    string line;
    line = richTextBox1.Text;

    stringList= new List<String(line.Split(','));
    displayval(ref int ctr);
}

public void displayval(ref int ctr)
{

   line = RxString;

   stringList= new List<String>(line.Split(','));
   richTextBox3.AppendText("\n Pressure:" + stringList[ctr]);
   ctr++;
   richTextBox3.AppendText("\n Accelerometer:" + stringList[ctr]);
   ctr++;
   richTextBox3.AppendText("\n Temperature:" + stringList[ctr]);
   ctr++;
   richTextBox3.AppendText("\n Height:" + stringList[ctr]);
   ctr++;
} 
```

我从 Arduino 获得实时串行输入，我想解析 CSV 值，该值类似于 $1032,432,541,145。

我能够将其解析为单个值，但后来我无法使用 ctr 访问列表。我是 C# 新手，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:55:55.587

是因为在您的 DisplayVal 方法中您将 ctr 设置为 ctr + 3？

如果是这样，那么当您尝试访问它时它将超出范围，因为它下次尝试从第三个值开始访问列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:53:07.470

您可能在此处阅读了不完整的消息：

```
RxString = serialPort1.ReadExisting(); 
```

因此，可能不是“$1032,432,541,145”，而是“$1032,432,5”，您的异常就会发生。

您应该在协议中添加一些消息终止符号。这样您就可以看到您收到了完整的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:56:32.460

您正在附加由 Environment.NewLine 分隔的行

当你解析时，你用逗号'，'分开。鉴于以下两行：

```
"value1;value2;value3;value4"
"value5;value6;value7;value8" 
```

您解析的 stringList 将具有值

```
"value1"
"value2"
"value3"
"value4\nvalue5" << here, last value of 1st line followed by NewLine 
                    followed by first value of second line
"value6"
"value7"
"value8" 
```

我建议您分别解析每一行。

例如，如果您知道您的值将不包含 Environment.NewLine 字符串，您可以先用 NewLine 分割，然后再用 "," 分割：

```
var lines = richTextBox.Text.Split(Environment.NewLine)
stringList = new List<string>();
foreach (var l in lines)
    stringList.AddRange(l.Split(",")); 
```

# java - java隐藏两层之间的实现类细节

> ID：15496069
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:48:26.910
> 
> 标签：java, interface, implementation, decouple

我正在构建一个具有业务逻辑层的应用程序，该业务逻辑层需要访问所有与数据库相关的东西的 DAO 层。我的要求是 DAOImpl 类可以不断变化，因此我正在寻找在我的业务逻辑类中获取 DAOImpl 类句柄的方法，而无需知道实际的 DAOImpl 类。有什么办法可以在 Java 中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:53:09.627

`DAOImpl`类应该实现一个接口`DAOLayer`（比如说）。您的 businessLogic 类应该由一个`DAOLayer`对象组成。

```
class BusinessLogic
{
    /// ...

    DAOLayer daoLayer;

    public BusinessLogic(DAOLayer daoLayer)
    {
        this.daoLayer = daoLayer;
    }

    /// ...
}

class DAOImpl implements DAOLayer
{
    /// ...
} 
```

`DAOLayer`您应该在创建`BusinessLogic`类对象时传递实际的实现。

类似于以下：

```
DAOLayer aDaoLayer = new DAOImpl();
BusinessLogic bl = new BusinessLogic(aDaoLayer); 
```

或者

```
 public BusinessLogic()
    {
        this.daoLayer = DAOFactory.create(true);
    }

class DAOFactory
{
    public static DAOLayer create(bool isDB)
    {
        DAOLayer aDao;

        if(isDB)
        {
            aDao = // create for DB
        }
        else
        {
            aDao = // create for file
        }

        return aDao;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:52:55.233

您的业​​务逻辑应该只处理 DAO[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)，这将隐藏实际的实现。

为了能够快速更改实现类，请查看 IoC 容器，例如[Spring](http://static.springsource.org/spring/docs/2.0.x/reference/beans.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:51:36.407

听起来你想使用一个[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)，它是java将实现与所需行为解耦的基本方法。

# node.js - 在 Mongoose ODM 中查找嵌入文档

> ID：15496071
> 
> 赞同：1
> 
> 时间：2013-03-19T09:48:28.480
> 
> 标签：node.js, mongodb, mongoose

我有一个带有嵌入式文档数组的模型。这是设计使然，因为我们经常（几乎总是）将根文档与嵌入式文档一起查询。

```
var SubsetSchema = new mongoose.Schema({
    number: {
        type: Number,
        index: true,
        unique: true,
    },
    name: String,
});

var RootSchema = new mongoose.Schema({
    name: String,
    subsets: [SubsetSchema],
});

mongoose.model('collection', RootSchema);
var Root = module.exports = mongoose.model('collection'); 
```

使用以下方法查找单个子集文档不是问题：

```
Root.findOne({'subsets.number': 3}, {_id: 0, 'subsets.$': 1}, ...); 
```

但是，当我需要找到多个子集文档（在我们的例子中使用正则表达式）似乎是不可能的：

```
Root.find({'subsets.name': /regex/i}, {_id: 0, 'subsets.$': 1}, ...); 
```

它给出了以下错误：

```
error: {
    "$err" : "positional operator (subsets.$) requires corresponding field in query specifier",
    "code" : 16352
} 
```

在这种情况下我会怎么做？将 Schema 拆分为两个集合不是一种选择，因为这会破坏我们在其他更频繁的查询上的性能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:56:41.470

这可以在 mongo shell 中重现：

```
> db.xx.find().pretty()
{
    "_id" : ObjectId("51610020672afd480ccfb9c4"),
    "name" : "any",
    "subsets" : [
        {
            "number" : 3,
            "name" : "aba"
        },
        {
            "number" : 4,
            "name" : "aka"
        }
    ]
}
> // works as expected:
> db.xx.find({"subsets.number": 3},{_id:0, "subsets.$":1})
{ "subsets" : [ { "number" : 3, "name" : "aba" } ] }
> // does not work
> db.xx.find({"subsets.name": /k/},{_id:0, "subsets.$":1})
error: {
    "$err" : "positional operator (subsets.$) requires corresponding field in query specifier",
    "code" : 16352
} 
```

**但这有效！**

```
> db.xx.find({"subsets": {$elemMatch:{name:/k/}}},{_id:0, "subsets.$":1})
{ "subsets" : [ { "number" : 4, "name" : "aka" } ] } 
```

@AlexKey：我已经相应地更新了你的 Jira [SERVER-9028](https://jira.mongodb.org/browse/SERVER-9028)

# ruby-on-rails - CanCan 最佳实践：在创建时自动授予基于 db 的权限

> ID：15496072
> 
> 赞同：0
> 
> 时间：2013-03-19T09:48:33.317
> 
> 标签：ruby-on-rails, cancan, database-permissions

我使用 CanCan 和`Permission`模型来管理模型的权限`Folder`。

**当用户创建文件夹时，我想为该用户**在文件夹上创建写入权限（即创建一个权限记录，字段`action`设置为“写入”，属于用户和文件夹），知道此权限可能稍后由管理员修改（用户不是他们创建的文件夹的所有者）。奇怪的是，如果用户是管理员，则不应创建权限。

我可以使用回调`Folder`来完成这项工作，但我认为`current_user`直接提供给模型并不是一个好主意。

所以这里是我考虑的选项：

1.  在控制器中完成肮脏的工作。我不太喜欢它，它不干
2.  制作一种可以完成工作的`save_and_grant_permission( user, action )`方法`Folder`，将流程包装在事务中。问题是我必须记住要始终使用它，而不仅仅是`save`

**所以我想知道：**

*   如果有其他选择
*   在这种情况下，最佳做法是什么

**更新**

现在，我选择了解决方案二并使用`nested_attributes`：

```
def save_and_grant_permission( user, action )
  return save if user.admin?
  permission = permissions.where( user_id: user.id ).first
  self.permissions_attributes = [
    {id: permission.try(:id), user_id: user.id, action: action.to_s}
  ]
  save
end 
```

如果此处没有出现更好的解决方案，我将关闭问题并将其移至 StackExchange::CodeReview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:30:04.037

也许您应该以作者的形式为您的文件夹提供对用户的引用。

您可以将您的权限基于文件夹的作者，例如定义一个为文件夹作者创建权限的 after_create 回调。

# ruby-on-rails - Rails 中特定路线的功能测试

> ID：15496074
> 
> 赞同：0
> 
> 时间：2013-03-19T09:48:36.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, functional-testing

在我的 config/routes.rb 中，我创建了一个针对数据控制器的特定路由：

```
match '/things/:id/data' => 'data#get', :via => :get 
```

当我设置功能测试时，出现以下错误：

```
ActionController::RoutingError: No route matches {:controller=>"data", :action=>"get"} 
```

我的测试是：

```
require 'test_helper'

class ActionController::TestCase
  include Devise::TestHelpers
end

class DataControllerTest < ActionController::TestCase
  setup do
    sign_in users(:one)
  end

  test "should get last data of thing" do
    get :get
    assert_response :success
  end

end 
```

如何在测试中指定 /things/:id/data 需要用于匹配 data#g​​et ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:26:43.637

试试这个

```
test "should get last data of thing" do
  get :get, id => "ID OF YOUR THING"
  assert_response :success
end 
```

`data` 是 member_action 所以你需要提供你的资源的 ID（你的情况）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:56:54.317

大声想知道，如果您更改`get`为`show`，它有效吗？如果是这样，我担心为相似的动词名称覆盖方法名称会搞砸。除此之外，您的路线测试说明了什么？

# openstreetmap - 在 Ubuntu 上使用 Mapsforge 插件进行渗透。我做对了吗？

> ID：15496076
> 
> 赞同：2
> 
> 时间：2013-03-19T09:48:39.210
> 
> 标签：openstreetmap

我需要将 .osm 文件转换为 .map 以测试 Mapsforge Android 应用程序。因此，我尝试在我的 Ubuntu 12.04 PC 上安装 Osmosis。我使用带有以下命令的 debian 软件包安装 osmosis：

```
sudo apt-get install osmosis 
```

安装完成后，我从[http://code.google.com/p/mapsforge/downloads/list](http://code.google.com/p/mapsforge/downloads/list)下载 mapsforge jar 文件并将其复制到

```
~/.openstreetmap/osmosis/plugins/ 
```

文件夹。但是，当我尝试执行以下命令时：

```
osmosis --rx file=rethimno.osm --mw file=rethimno.map 
```

我得到以下堆栈跟踪：

```
Mar 19, 2013 11:46:27 AM org.openstreetmap.osmosis.core.Osmosis run
INFO: Osmosis Version 0.40.1
Mar 19, 2013 11:46:27 AM org.openstreetmap.osmosis.core.Osmosis run
INFO: Preparing pipeline.
Mar 19, 2013 11:46:27 AM org.openstreetmap.osmosis.core.Osmosis main
SEVERE: Execution aborted.
java.lang.RuntimeException: XPathFactory#newInstance() failed to create an XPathFactory for the default object model: http://java.sun.com/jaxp/xpath/dom with the XPathFactoryConfigurationException: javax.xml.xpath.XPathFactoryConfigurationException: No XPathFctory implementation found for the object model: http://java.sun.com/jaxp/xpath/dom
at javax.xml.xpath.XPathFactory.newInstance(XPathFactory.java:72)
at org.mapsforge.map.writer.OSMTagMapping.<init>(OSMTagMapping.java:123)
at org.mapsforge.map.writer.OSMTagMapping.getInstance(OSMTagMapping.java:110)
at org.mapsforge.map.writer.OSMTagMapping.getInstance(OSMTagMapping.java:94)
at org.mapsforge.map.writer.model.MapWriterConfiguration.loadTagMappingFile(MapWriterConfiguration.java:412)
at org.mapsforge.map.writer.osmosis.MapFileWriterFactory.createTaskManagerImpl(MapFileWriterFactory.java:53)
at org.openstreetmap.osmosis.core.pipeline.common.TaskManagerFactory.createTaskManager(TaskManagerFactory.java:60)
at org.openstreetmap.osmosis.core.pipeline.common.Pipeline.buildTasks(Pipeline.java:50)
at org.openstreetmap.osmosis.core.pipeline.common.Pipeline.prepare(Pipeline.java:112)
at org.openstreetmap.osmosis.core.Osmosis.run(Osmosis.java:86)
at org.openstreetmap.osmosis.core.Osmosis.main(Osmosis.java:37)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:328)
at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:238)
at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:408)
at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:351)
at org.codehaus.classworlds.Launcher.main(Launcher.java:31) 
```

有没有人遇到过同样的问题？如果是，我该如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T09:42:59.243

我按照 [Mapsforge 问题列表中](https://code.google.com/p/mapsforge/issues/detail?id=303)发布的说明 解决了问题。

# drupal-6 - mysqldump 或 mysql 导入失败

> ID：15496087
> 
> 赞同：0
> 
> 时间：2013-03-19T09:48:55.643
> 
> 标签：drupal-6, mysqldump

我基本上使用 mysqldump 和 mysql import：

```
Server 1: mysqldump -uuser -ppassword mydb > dump.sql

Server 2: mysqladmin -uuser -ppassword drop mydb
Server 2: mysqladmin -uuser -ppassword create mydb
Server 2: mysql -uuser -ppassword mydb < dump.sql 
```

但是，在服务器 2 上，缺少一些数据库信息。导入过程中不报告错误。我可能会添加这是一个 Drupal 6 站点。

任何想法为什么？我检查了服务器资源，并且有大量可用内存并且负载正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:51:10.270

谈论XY问题。感谢您的所有建议。原来是 APC 缓存的问题，而不是 Mysql 的问题。APC 缓存需要清除，这就是它呈现最奇怪结果的原因。

# c++ - 将通过引用传递的两个字符转换为字符串？

> ID：15496089
> 
> 赞同：1
> 
> 时间：2013-03-19T09:48:57.200
> 
> 标签：c++, string, character

这是我的程序：

```
#include <iostream>
#include <string>
using namespace std;

template <class T>
class Example
{
  private:
    T data;

  public:
    Example() { data = 0; }
    void setData(T elem) { data = elem; }

    template <class U>
    friend ostream& operator << (ostream &, const Example<U>&);

    friend ostream& operator << (ostream &, const Example<char>&);

    friend string operator + (const Example<char> &, const Example<char> &);

    template <class U>
    friend U operator + (const Example<U> &, const Example<U> &);
};

template <class U>
U operator + (const Example<U> &a, const Example<U> &b)
{
    U c;
    c = a+b;
    return(c);
}

string operator + (const Example<char> &a, const Example<char> &b)
{
       string a1("");
       a1+=a.data;
       a1+=b.data;
       return(a1);

}

template <class T>
ostream& operator << (ostream &o, const Example<T> &t)
    {
      o << t.data;
      return o;
    }

ostream& operator << (ostream &o, const Example<char> &t)
{
  o << "'" << t.data << "'";
  return o;
}

int main()
{
    Example<int> tInt1, tInt2;
    Example<char> tChar1, tChar2;

    tInt1.setData(15);
    tInt2.setData(30);

    tChar1.setData('A');
    tChar2.setData('B');

    cout << tInt1 << " + " << tInt2 << " = " << (tInt1 + tInt2) << endl;
    cout << tChar1 << " + " << tChar2 << " = " << (tChar1 + tChar2) << endl;
    return 0;
} 
```

如何将这两个字符变成可以返回的字符串？我尝试了多种方法，但似乎无法让其中任何一种工作。我认为这可能与通过引用传递的字符有关。

编辑：好的，所以我让那个特定的功能正常工作。现在我编译了它，但在显示任何内容之前，存在分段错误。U 数据类型的添加有问题。它会添加 A 和 B 并返回 AB，但不会添加 15 和 30。另外，我必须感谢您的所有帮助。我还是编程新手，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:55:04.010

```
#include <sstream>

string operator + (const Example<char> &a, const Example<char> &b) {
    std::ostringstream sstream;
    sstream << a << b;
    return sstream.str();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:55:27.423

只需使用 的内置功能`std::string`，只要有一个名为的成员`data`保存类型的数据`<T>`：

```
std::string operator+(const Example<char> &a, const Example<char> &b)
{
    std::string result("");
    result += a.data;
    result += b.data;
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:56:46.973

最简单的方法：

```
string operator + (const Example<char> &a, const Example<char> &b)
{
    return { a.data, b.data };
} 
```

如果您有一个“旧”编译器：

```
string operator + (const Example<char> &a, const Example<char> &b)
{
    char both[] = {a.data, b.data};
    return string(both, both+2);
} 
```

现场观看：http: [//liveworkspace.org/code/2ORW8E$0](http://liveworkspace.org/code/2ORW8E%240)

**更新**到编辑问题：这里还有一个大问题（无限递归）：

```
template <class U>
U operator + (const Example<U> &a, const Example<U> &b)
{
    U c;
    c = a+b; // NEEDS TO BE a.data + b.data;
    return(c);
} 
```

这是一个固定版本：

```
#include <iostream>
#include <string>
using namespace std;

template <class T>
class Example
{
private:
    T data;

public:
    Example() : data()
    {
    }
    void setData(T elem)
    {
        data = elem;
    }

    template <class U>
    friend ostream& operator << (ostream &, const Example<U>&);
    friend ostream& operator << (ostream &, const Example<char>&);
    friend string operator + (const Example<char> &, const Example<char> &);

    template <class U>
    friend U operator + (const Example<U> &, const Example<U> &);
};

template <class U>
U operator + (const Example<U> &a, const Example<U> &b)
{
    U c;
    c = a.data+b.data;
    return(c);
}

string operator + (const Example<char> &a, const Example<char> &b)
{
    char both[] = {a.data, b.data};
    return string(both, both+2);
}

template <class T>
ostream& operator << (ostream &o, const Example<T> &t)
{
    o << t.data;
    return o;
}

ostream& operator << (ostream &o, const Example<char> &t)
{
    o << "'" << t.data << "'";
    return o;
}

int main()
{
    Example<int> tInt1, tInt2;
    Example<char> tChar1, tChar2;
    tInt1.setData(15);
    tInt2.setData(30);
    tChar1.setData('A');
    tChar2.setData('B');
    cout << tInt1 << " + " << tInt2 << " = " << (tInt1 + tInt2) << endl;
    cout << tChar1 << " + " << tChar2 << " = " << (tChar1 + tChar2) << endl;
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:00:14.987

您可以执行以下操作：

```
string operator + (const Example<char> &a, const Example<char> &b)
{
    std::ostringstream ss;
    ss << a.data << b.data;

    return ss.str();
} 
```

# jsf - SelectCheckboxMenu - 禁用“全选”

> ID：15496095
> 
> 赞同：7
> 
> 时间：2013-03-19T09:49:20.877
> 
> 标签：jsf, jsf-2, primefaces

我有一个包含大量条目的*SelectCheckBoxMenu （Primefaces 组件）。*但是，允许用户选择最大值。3 项。*SelectCheckBoxMenu*几乎满足了我的所有要求，唯一的问题是它提供了选择所有项目的可能性，在这种情况下我显然不需要。

是否有可能禁用“全选”选项？我正在使用一个事件来检查最大条目。3.我想我可以对“全选”做同样的事情，不允许他选择它们，但**我根本不想有“全选”选项**。

代码下方：

```
<p:selectCheckboxMenu value="#{services.titelId}" id="titel" 
            panelStyle="width:160px;" rendered="#{!services.isFirma()}"
            label="#{services.prepareTitel()}" style="width:160px;"
            styleClass="checkbox">
            <f:selectItems value="#{meta.getAkadTitelList()}" />
            <p:ajax event="change" listener="#{services.validateTitel()}"
                update="titel" process="@this" />
            <p:ajax event="toggleSelect" update="titel" process="@this" />
</p:selectCheckboxMenu> 
```

另外，primefaces-showcase例子的链接： [https ://www.primefaces.org/showcase/ui/input/checkboxMenu.xhtml](https://www.primefaces.org/showcase/ui/input/checkboxMenu.xhtml)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-21T10:38:17.470

之前的答案在 PrimeFaces 5.0 下对我不起作用，所以我更深入地查看了生成的 HTML 并找到了 PF5 的解决方案。

对于**PrimeFaces 5.0**，您可以像这样删除“全选”复选框：

```
.without-selectall .ui-selectcheckboxmenu-header .ui-chkbox {
    display: none; 
} 
```

现在使用`panelStyleClass`-attribute 代替`styleClass`：

```
<p:selectCheckboxMenu ...
    panelStyleClass="without-selectall"
> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T09:58:40.943

您可以将 css 规则添加到您的 css 文件

```
#titel .ui-chkbox .ui-widget {
     display:none;
} 
```

您应该添加`prependId="false"`到您的`h:form`，或者如果您不想添加`prependId="false"`，您可以将`#titel .ui-chkbox .ui-widget`选择器更改为类似`#myForm\3A titel .ui-chkbox .ui-widget`（处理`:`id 分隔符）

* * *

如果您希望删除整个过滤器行，您可以设置

```
<p:selectCheckboxMenu filter="false".... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-27T13:42:03.750

您可以添加 <p:selectCheckboxMenu showHeader="false"......

# javascript - Javascript url 重定向：这段代码有问题吗？

> ID：15496097
> 
> 赞同：0
> 
> 时间：2013-03-19T09:49:28.847
> 
> 标签：javascript, jquery

也许你能发现一些我看不到的东西：

这是我的代码

```
if(jQuery.urlParam('returnview')) {     
    var ret = jQuery.urlParam('returnview');
    var iid = jQuery.urlParam('iid'); 
    window.location = 'index.php?option=mycomponent&view='+ret+'&Itemid='+iid+'&lang=en';
} else  if(!jQuery.urlParam('returnview')){
  window.location = 'index.php?option=mycomponent&view=myview&Itemid=380&lang=en&sent=1'; 
} else {
  alert('something is dodge');
} 
```

这是功能：

```
jQuery.urlParam = function(name){
   var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
   return results[1] || 0;
} 
```

现在，如果在我的“来自”URL 中定义了一个“returnview”，它就可以正常工作。但是，如果没有定义 returnview，它应该转到第二种情况，或者即使失败，也抛出警报。

谁能看到我在这里做错了什么明显的事情？

谢谢

雅克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:05:16.823

您的第三个条件永远不会受到打击，因为您正在测试真/假，所以让我们删除它，留下：

```
if(jQuery.urlParam('returnview')) {     
    var ret = jQuery.urlParam('returnview');
    var iid = jQuery.urlParam('iid'); 
    window.location = 'index.php?option=mycomponent&view='+ret+'&Itemid='+iid+'&lang=en';
} else{
  window.location = 'index.php?option=mycomponent&view=myview&Itemid=380&lang=en&sent=1'; 
} 
```

然后让我们将变量移到 ifs 之外并专门检查 false（如果返回的值等于 false，这需要更新您的原始函数，我们在下面执行此操作）：

```
var ret = jQuery.urlParam('returnview');
var iid;

if(ret === false) {     
   window.location = 'index.php?option=mycomponent&view=myview&Itemid=380&lang=en&sent=1'; 
} else{
  iid = jQuery.urlParam('iid'); 
  window.location = 'index.php?option=mycomponent&view='+ret+'&Itemid='+iid+'&lang=en';  
} 
```

...最后让我们修复您的原始功能：

```
jQuery.urlParam = function(name){
   var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
   return (results && results[0] ? results[0] : false);
} 
```

我还没有测试过，但我认为应该可以解决它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:55:46.127

检查一下`jQuery.urlParam('returnview')` 我很确定如果没有设置值，你会得到`undefined`。

尝试`jQuery.urlParam('returnview') === undefined`

另请查看这篇文章：[获取转义的 URL 参数](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:13:52.140

只需根据您的函数是否返回真值有条件地设置 url 参数：

```
var ret = jQuery.urlParam('returnview');
var iid = jQuery.urlParam('iid');

var view = ret || "myview";
var id = iid || "380";

window.location = 'index.php?option=mycomponent&view='+
                   view + '&Itemid=' + id + '&lang=en'; 
```

对于您的`urlParam`函数，您需要确保只捕获参数本身，而不是整个`"&abc=xyz"`段。您只需在所需部分周围添加括号即可捕获该部分，然后获取第二个匹配项（第一个索引）。在取消引用匹配数组之前，检查它是否不为空：

```
jQuery.urlParam = function(name){
    var re = RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)');
    var results = window.location.href.match(re);
    return results ? results[1] : null;
} 
```

# android - 吐司无法显示

> ID：15496100
> 
> 赞同：0
> 
> 时间：2013-03-19T09:49:33.297
> 
> 标签：android, toast

我有我在后台线程中显示的敬酒消息。

这是我想要在我的`AsyncTask`.

```
ParseDetails Objparsecities = new ParseDetails(
        new ByteArrayInputStream(result.toString()
                .getBytes("UTF-8")));
if ((Objparsecities.parse().size()) == 0) {

    Toast.makeText(getApplicationContext(),
            "No result found for" + params[0], Toast.LENGTH_LONG)
            .show();

} else
    lstresponse = Objparsecities.parse();
} 
```

我能知道我在做什么错吗？

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:51:31.027

尝试使用`runOnUiThread`

```
if ((Objparsecities.parse().size()) == 0) {
  context.runOnUiThread(new Runnable(){
  public void run() {
      Toast.makeText(context,
                    "No result found for" + params[0], Toast.LENGTH_LONG)
                    .show();
  }
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:58:11.133

> 这是我试图在我的 AsyncTask 中显示的内容。

AsyncTask 提供了一些允许用户使用特定信息更新 UI 的方法。这样您就可以将 Toast 移动到

*   onPreExecute()
*   onProgressUpdate()
*   onPostExecute()

这些方法在 Main(UI) 线程上运行并允许更新或修改 UI。

如果您想`Toast`在后台处理期间显示一些信息，请在您的 doInBackground() 方法中调用 publishProgress() ，该方法会立即调用`onProgressUpdate()`方法，您可以简单地调用`Toast.show()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:04:58.050

```
onPostExecute - executes on UI thread or publishProgress(); in your doinbackground and

 protected void onProgressUpdate(Integer... progress) {
 } 
```

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

# hibernate - 使用 JPARepositories 处理抽象实体的正确方法？

> ID：15496101
> 
> 赞同：0
> 
> 时间：2013-03-19T09:49:35.257
> 
> 标签：hibernate, jpa, spring-data-jpa

我有一堆具有完全相同列的表，比如 ID、NAME、DESCRIPTION。由于遗留原因，我无法更改这些表。

在我的模型中，我使用 @MappedSuperclass 注释为这些创建了一个抽象超类。然后我为它创建了一个存储库：

```
JpaRepository<MyAbstractEntity, Long> 
```

但这似乎不适用于 JPARepository（或者更确切地说是 Hibernate？），因为它不是一个真实的实体。

那么处理这种层次结构的首选方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:01:08.247

我假设您使用 Hibernate 作为您的持久性提供程序？它有[一个错误](https://hibernate.atlassian.net/browse/HHH-6896)，在被要求映射超类时没有返回相关的 JPA 元模型类型。这已在 Hibernate 4.1.6 中修复，因此升级到该版本应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:41:18.487

问题是如何`repository`仅根据抽象类知道要查询哪个表？对我来说，最好的方法是根据你的具体类创建你需要的存储库。

# apache-flex - Spark 中的警报样式

> ID：15496104
> 
> 赞同：0
> 
> 时间：2013-03-19T09:49:38.050
> 
> 标签：apache-flex, flex4

在 Flex 3 中，我为 Alert 组件定义了以下样式：

```
Alert 
{
    messageStyleName: alertMessageStyle;
    titleStyleName: alertTitleStyle;
    buttonStyleName: alertButtonStyle;
}

.alertMessageStyle
{
    borderStyle: solid;
    borderAlpha: 0;
    roundedBottomCorners: true;
    cornerRadius: 9;
    headerHeight: 20;
    backgroundAlpha: 0.9;
    highlightAlphas: 0, 0;
    headerColors: #ffffff, #ffffff;
    backgroundColor: #ffffff;
    shadowDistance: 4;
    shadowDirection: right;
    dropShadowColor: #333333;
    color: #666666;
    textAlign: center;
    fontFamily: Arial;
    fontSize: 14;
    fontWeight: bold;
}

.alertTitleStyle
{
    color: #666666;
    backgroundColor: #ff0000;
    textAlign: center;
    fontFamily: Arial;
    fontSize: 13;
    fontWeight: bold;
}

.alertButtonStyle
{
    fontFamily: Arial;
    fontSize: 12;
    backgroundColor: #ff0000;
} 
```

现在我正在迁移到 Flex 4 并且 Spark 没有 Alert 组件，所以我使用相同的样式并刚刚添加`mx|Alert`，但只有消息样式有效！标题和按钮样式被忽略！有人可以解释一下如何让它们工作吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:45:11.217

标题和按钮样式适用于 4.6 flex 框架。如果要更改背景，请修复 .alertButtonStyle 并使用 chromeColor：

```
.alertButtonStyle
{
    fontFamily: Arial;
    fontSize: 12;
    chromeColor : #ff0000;
} 
```

.alertTitleStyle 类申请titleTextField:UITextField; 仅使用字体样式等样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:44:59.237

您必须添加`mx|Button`样式，它会自动添加到警报按钮。我正在使用此代码。

```
mx|Alert{
    borderColor: #0066cc;
    borderThicknessLeft: 3;
    borderThicknessTop: 1;
    borderThicknessBottom: 3;
    borderThicknessRight: 3;
    cornerRadius: 3;
    headerHeight: 30;
    backgroundAlpha: 1;
    highlightAlphas: 0.36, 0;
    headerColors: #003366, #0066cc;
    footerColors: #e7e7e7, #c7c7c7;
    backgroundColor: #ffffff;
    shadowDistance: 2;
    dropShadowColor: #333333;
    titleStyleName: "AlertTitle";
    color:#000000;
}

.AlertTitle {
    color: #ffffff;
    fontFamily: Arial;
    fontSize: 12;
    fontWeight: bold;
} 
```

和按钮

```
mx|Button{
    fontFamily: Arial;
    fontSize: 11;
    fontWeight: bold;
    color: #333333;
    textRollOverColor: #444444;
    textSelectedColor: #000000;

    upSkin:Embed("assets/images/btn_common_n.jpg");
    downSkin:Embed("assets/images/btn_common_h.jpg");
    overSkin:Embed("assets/images/btn_common_h.jpg");
    skin:Embed("assets/images/btn_common_n.jpg");*/

} 
```

# intellij-idea - 在公共版本控制服务器上存储密钥库 keyPassword 和 keyStorePassword

> ID：15496109
> 
> 赞同：1
> 
> 时间：2013-03-19T09:49:49.690
> 
> 标签：intellij-idea, android-keystore

我们正在 IntelliJ IDEA 中开发一个新的 android 应用程序，并使用工件来简化包签名过程。发布**密钥库**位于本地。我们正在使用公共 VCS，我们担心在其上存储**keyPassword**和**keyStorePassword**。

我们找不到有关用于加密这些值的算法的任何信息。因此，我们认为将它们存储在公共服务器上可能存在一些漏洞。

有没有人知道更多细节并给我们建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:18:44.513

我们不建议将带有密钥库密码的 Android 工件存储在公共 VCS 服务器上，我在[知识库文章](http://intellij-support.jetbrains.com/entries/23393067)中对此进行了概述。

加密仅用于隐藏密码，但可以轻松解密（加密/解密代码是公开的）。这是有意完成的，因此您的 CI 服务器可以构建这些工件（TeamCity 应该支持它）。

只有当您不担心您的密钥库密码会公开时，您才可以选择共享这些工件。如果您确定密钥库本身是 100% 安全的并且不会对公众开放，那么提供其密码将不会令人心碎，但这显然会增加有一天您的密钥库与密码一起泄露并危及 Play 应用程序的机会店铺。

# visual-c++ - 错误 1 错误 LNK1104: 无法打开文件

> ID：15496111
> 
> 赞同：1
> 
> 时间：2013-03-19T09:49:57.137
> 
> 标签：visual-c++, windows-8, visual-studio-2012, directx-11

我正在使用 C++ 开发一个项目，当我尝试在 relase 模式下构建它时，它给了我这个错误：

> 错误 1 ​​错误 LNK1104: 无法打开文件 'c:\users\xxx\documents\visual studio 2012\Projects\Project2\Release\Project2.exe' c:\Users\xxx\documents\visual studio 2012\Projects\Project2\Project2 \LINK 项目2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-12T08:50:09.177

我通过执行以下操作解决了这个问题：

1.  在命令提示符下键入 msconfig 并按 Enter。
2.  单击服务选项卡。
3.  查找“应用程序体验”并打勾（即选择此选项以启用）。
4.  单击确定。并在必要时重新启动。

因此，问题将永远存在。在没有任何干扰的情况下构建和调试您的 c++ 项目。

# emacs - 如何打破 emacs 中错误输入的命令序列？

> ID：15496113
> 
> 赞同：2
> 
> 时间：2013-03-19T09:50:06.320
> 
> 标签：emacs, emacs24

如何打破 emacs 中错误输入的命令序列？例如，我输入`M-x`，然后我改变主意并决定复制文本。所以我要打字`M-w`，但问题是以前打字的`M-x`。我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T09:52:48.687

使用`C-g`which 调用`keyboard-quit`。

# android - 在循环中绘制到画布

> ID：15496114
> 
> 赞同：0
> 
> 时间：2013-03-19T09:50:08.233
> 
> 标签：android, android-canvas, android-ui

在适用于 Android 的 Eclipse IDE 中，我现在正在解决一个简单的问题。我正在使用这样的代码：

```
public class Reader extends Activity 
{
    // declarations
    private class GraphView extends View 
    {
        protected void onDraw(Canvas canvas) 
        {
            synchronized(this)
            {
                final Paint paint = mPaint;
                // some drawings
                myvoid(canvas,paint);
                // some drawings
            }
        }
    }
    void myvoid(Canvas c,Paint p)
    {
        int i=0;
        do //or for cycle
        {
            i++;
            c.drawText(Integer.toString(i),0,100,p); // <<<<<<<<<<<<<<<< Problem
        }
        while (i<100000);
    }
} 
```

画布和文本不会更新，直到 while 循环完成。似乎在那段时间画布被“锁定”了。我怎样才能实现，我可以在画布上看到循环内部的进度？

谢谢，托马斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:38:06.727

问题是您没有给 Android 任何时间来呈现绘图方法的结果。您应该绘制循环的一个步骤并调用 invalidate 来触发下一步。Android 将在屏幕上绘制您的文本，然后它会尝试再次使用增加的计数器重新绘制它。请比较您的代码和我的版本：

```
private class GraphView extends View {

    protected void onDraw(Canvas canvas) { // some drawings
        myvoid(canvas, paint);
        // some drawings
    }

    void myvoid(Canvas c, Paint p) {
        int i = 0;
        do // or for cycle
        {
            i++;
            c.drawText(Integer.toString(i), 0, 100, p);
        } while (i < 100000);
    }
} 
```

我的 invalidate() 版本：

```
private class GraphView extends View {
    int i = 0;
    Paint paint = new Paint();

    @Override
    public void draw(Canvas canvas) {
        canvas.drawText(Integer.toString(i), 0, 100, paint);
        i++;
        invalidate();
        super.draw(canvas);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:37:50.430

请按照以下步骤操作：

*   在活动中设置视图
*   启动辅助线程来执行您的过程
*   在线程中使视图无效

这个例子可能有帮助：[https ://github.com/hamilton-lima/Bolinha/tree/master/src/com/example/bolinha](https://github.com/hamilton-lima/Bolinha/tree/master/src/com/example/bolinha)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T09:55:33.737

我想你可以试试这个

```
imageView = (ImageView) this.findViewById(R.id.imageView1);

        Display currentDisplay = getWindowManager().getDefaultDisplay();
        @SuppressWarnings("deprecation")
        //float dw = currentDisplay.getWidth();
       // float dh = currentDisplay.getHeight();

        bitmap = Bitmap.createBitmap((int) dw, (int) dh,
            Bitmap.Config.ARGB_8888);
        canvas = new Canvas(bitmap);
        paint = new Paint();
        paint.setColor(Color.RED);
        imageView.setImageBitmap(bitmap); 
```

您可以尝试使您的画布成为位图图像，然后将位图设置为您的图像视图

# qt - QSharedPointer dynamicCast 和 objectCast 在 ubuntu 上失败

> ID：15496116
> 
> 赞同：2
> 
> 时间：2013-03-19T09:50:19.487
> 
> 标签：qt, ubuntu, dynamic-cast, qsharedpointer

我在 Ubuntu 10.04 下使用 Qt 5.0.1，在我的应用程序中，我需要在运行时将 QSharedPointer 与适当的 dynamic_cast (object_cast) 转换一起使用。这些转换在运行时正确加载的共享对象中调用。我必须部署我的应用程序才能在具有 Ubuntu 10.04 操作系统的嵌入式计算机上运行它；这就是我在 Ubuntu 10.04 下使用 Qt 的原因。

如果我构建我的应用程序并在安装了 Qt 库的同一台机器上运行它，那么一切都会按预期工作。

但是，如果我在嵌入式计算机上运行应用程序，qSharedPointerDynamicCast（以及类似的 QSharedPointer::dynamicCast、qSharedPointerObjectCast 和 QSharedPointer::objectCast）会失败并返回空指针。我检查了两台机器是否具有相同的配置，并且除了 dynamic_cast/object_cast 问题之外，一切似乎都运行良好。

我认为这可能是一个 RTTI 问题，但是，经过广泛的谷歌搜索，我没有找到我的问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T19:02:17.243

我认为对您的麻烦的唯一解释是您的应用程序中有内存错误，并且您正在破坏您的对象或使用已释放的对象。使用 Valgrind 看看你会得到什么。

# jquery - 在响应式主题中的两个 div 之间画一条线？

> ID：15496118
> 
> 赞同：0
> 
> 时间：2013-03-19T09:50:24.367
> 
> 标签：jquery, html, canvas

对于响应式布局，我正在使用画布在两个 div 之间绘制线条，但我遇到的问题是：
- 在调整窗口大小时，如何使线条分别保持在 div 中心的位置？
我添加了一个调整大小的侦听器，并在每次用户调整窗口大小时重新创建 x / y 点，但我一直在寻找完美的数学公式来计算这一点。

```
 var canvas = document.getElementById('myCanvas'); 
```

请在此处查看示例：http: [//jsfiddle.net/FZNMk/1/](http://jsfiddle.net/FZNMk/1/)
您必须调整窗口大小才能显示该行。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:10:15.620

基本上，你必须将 onresize 事件绑定到你的 body，一旦你捕捉到事件，你只需要使用 window.innerWidth 和 window.innerHeight 来调整画布的大小。

正确的代码是这样的

```
<body onresize="resize_canvas()">
    <canvas id="canvas">Your browser doesn't support canvas</canvas>
</body> 
```

我没有尝试过，但这是以正确方式做事的基本理念

# php - 我如何连接到我的“index.php”中的 wordpress 数据库，我需要将它放在“wp-content”文件夹中

> ID：15496119
> 
> 赞同：0
> 
> 时间：2013-03-19T09:50:27.337
> 
> 标签：php, wordpress

我已经使用 mysql_connect() 连接到 wordpress 数据库，但收到错误...

```
/** The name of the database for WordPress */

define('DB_NAME', '---my DB name---');

/** MySQL database username */

define('DB_USER', '---my user name----');

/** MySQL database password */

define('DB_PASSWORD', '---my password---');

/** MySQL hostname */

define('DB_HOST', '----host name----');

mysql_connect(DB_HOST,DB_USER,DBPASSWORD,DB_NAME); 
```

> 错误：无法通过套接字“/var/lib/mysql/mysql.sock”连接到本地 MySQL 服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:58:59.290

尝试这个

```
require_once(path/to/wp-config.php');
mysql_connect(DB_HOST, DB_USER, DB_PASSWORD); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:00:07.430

在 WordPress 之外使用 WordPress 的关键是包含 wp-load.php

```
// Include the wp-load'er
require_once("/path/to/wordpress/wp-load.php"); 
```

现在你可以在你的 php 脚本中使用 wordpress 的所有功能了

该解决方案的一个问题是它加载了 WordPress 的所有开销，

另一种方法如下

```
require_once( $_SERVER['DOCUMENT_ROOT'] . '/wp-config.php' );
require_once( $_SERVER['DOCUMENT_ROOT'] . '/wp-includes/wp-db.php' );
$wpdb = new wpdb( DB_USER, DB_PASSWORD, DB_NAME, DB_HOST); 
```

# javascript - 为什么在 Jquery 中添加“阻止程序”类后我的事件绑定不再触发？

> ID：15496123
> 
> 赞同：1
> 
> 时间：2013-03-19T09:50:43.523
> 
> 标签：javascript, jquery, events, jquery-mobile, binding

我绑定到这样的搜索输入：

```
$(document).on('tablebeforefilter.results_filter',
   '#results_table:not(.bound)',
   function (e, data) {
     e.target.class += "bound";
     // stuff
   }); 
```

如果重新加载页面，我正在使用`bound`该类来防止重新绑定元素（我正在使用`Jquery Mobile`，因此当用户在两个页面之间来回移动时会发生这种情况。

我的问题是，这样做会正确设置绑定，但它只会触发我的处理程序一次，可能是因为我将“绑定”类添加到元素中。

**问题**：
为什么会这样？我认为将设置绑定集`$(document) & some element`然后运行，无论我添加什么类到这个元素。仅当重新解析页面时，我的`bound`类才阻止第二次附加绑定。如果我添加了阻塞类，为什么我的函数不再触发`bound`？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:01:35.373

`.class`是一个字符串。因此，您添加`"bound"`到字符串`"results_filter"`并获得`"results_filterbound"`- 一个全新的类。因此`.on()`选择器不再匹配。如果你想使用`.class`，你也必须添加一个空格：

```
e.target.class += " bound"; 
```

这会添加一个类`bound`并保留旧类。为了轻松处理您可以使用`addClass()`或`removeClass()`jQuery 的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:01:44.000

将 jQuery 与“.on”一起使用旨在与不断变化的 html 结构一起使用。因此，一旦您添加了“绑定”类，您的事件就不会再被触发。

尝试使用类似的东西

```
$(document).on('tablebeforefilter.results_filter', '#results_table', function (e, data) {
    var $table = $(this);
    if ($table.hasClass('bound') == false) {
        $table.addClass('bound');
    } else {
        // stuff with bound class
    }
    // common stuff for both cases
}); 
```

# java - 如何更改光标大小？

> ID：15496124
> 
> 赞同：0
> 
> 时间：2013-03-19T09:50:51.743
> 
> 标签：java, cursor, awt

我想在java中改变光标的大小。所以请有人告诉我我该怎么做。我在谷歌上搜索过，但没有找到任何解决方案。下面是我试图更改光标大小的代码。

```
Toolkit toolkit = Toolkit.getDefaultToolkit();
InputStream imgStream = this.getClass().getResourceAsStream("/resources/move_cursor.gif");

BufferedImage bi = new BufferedImage(10,10, BufferedImage.TYPE_INT_RGB);
try {
    bi = ImageIO.read(imgStream);
} catch (IOException ex) {
    Exceptions.printStackTrace(ex);
}
Point hotspot = new Point(0,0);
ImageIcon myImg = new ImageIcon(bi);

Image image = myImg.getImage();

toolkit.getBestCursorSize(10, 10);
Cursor cursor = toolkit.createCustomCursor(image,hotspot ,"Custom Cursor");
setCursor(cursor); 
```

这段代码改变了光标（这是一个图像），但没有改变光标的大小。请给我解决方案。

谢谢

# php - .ics 中使用生成的 PHP 的新行

> ID：15496125
> 
> 赞同：2
> 
> 时间：2013-03-19T09:50:53.627
> 
> 标签：php, newline, icalendar

我正在创建一个脚本，它将在 PHP 中生成一个 .ics 文件，但是当我尝试向说明中添加多行时：除了附件之外，它在 .ics 中显示为一个新行我在 php 中键入的内容

```
$var .= "DESCRIPTION: Line1\nLine2" . PHP_EOL; 
```

.ics 文件中显示的内容

```
DESCRIPTION: Line1
Line2 
```

在 PHP 中生成 .ics 代码时如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T09:54:49.100

尝试在允许您制作 ics 文件的应用程序中使用超过 1 行的描述。然后在 notepad++/sublime 中打开它，看看他们是如何解析它的。

# cmake - CMake：子目录中的文件通配符

> ID：15496129
> 
> 赞同：3
> 
> 时间：2013-03-19T09:51:02.713
> 
> 标签：cmake

我想在 CMake 中向 google mock 和 google test 框架添加一个安装指令（即：我想做`make install`正确的事情），因为我需要交叉编译它们。

由于这是一个外部库，我想保持更改而不是逆向。是否有可能让 CMake File Globbing 在不使用的情况下对子目录进行 glob `GLOB_RECURSE`？

我遇到的 gtest 问题是如果我递归地使用我定义的函数，include/gtest/interal 会被压扁。因此目录中的文件 include/gtest/internal 被安装`${prefix}/include/gtest`到`${prefix}/include/gtest/internal`

如果可能的话，我不想`CMakeLists.txt`在包含目录中添加文件。

```
function(install_header dest_dir)
    foreach(header ${ARGN})
        install(FILES include/${header}
            DESTINATION include/google/${dest_dir}
        )
    endforeach()
endfunction()

# doesn't work with GLOB
# but works with GLOB_RECURSE -- however copies more than intended
file(GLOB headers RELATIVE ${gtest_SOURCE_DIR}/include/ *.h.pump *.h )
file(GLOB internalheaders RELATIVE ${gtest_SOURCE_DIR}/include/gtest/internal/ *.h.pump *.h )
if(NOT headers)
message(FATAL_ERROR "headers not found")
endif()
if(NOT internalheaders)
message(FATAL_ERROR "headers not found")
endif()

install_header(gtest ${headers})
install_header(gtest/internal ${internalheaders}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T13:42:03.437

将我的评论变成答案。

我相信您应该能够实现您的目标`install(DIRECTORY ...)`：

```
install(
  DIRECTORY ${gtest_SOURCE_DIR}/include/  #notice trailing slash - will not append "include" to destination
  DESTINATION include/google/gtest
  FILES_MATCHING PATTERN "*.h.pump" PATTERN "*.h"  # install only files matching a pattern
  PATTERN REGEX "/internal/" EXCLUDE  # ignore files matching this pattern (will be installed separately)
)

install(
  DIRECTORY ${gtest_SOURCE_DIR}/include/gtest/internal  #notice no trailing slash - "internal" will be appended to destination
  DESTINATION include/google/gtest
  FILES_MATCHING PATTERN "*.h.pump" PATTERN "*.h"  # install only files matching a pattern
) 
```

我不熟悉 gtest 目录结构；以上假设标题位于 in`include`和 in 中`include/gtest/internal`。如果您感兴趣的标头位于`include/gtest`and `include/gtest/internal`，您可以添加`gtest`到第一个目录名称，并摆脱`EXCLUDE`模式和第二个`install`命令。

# labview - LabVIEW 2011 缺少 subvi

> ID：15496130
> 
> 赞同：0
> 
> 时间：2013-03-19T09:51:07.487
> 
> 标签：labview, vision

我正在尝试加载.vi。加载时，LabVIEW正在寻找vi`..\National Instruments\Labview 2011\examples\Vision Acquisition\NI-IMAQdx\High Level\SubVIs\`

但是，我在“示例”中没有“视觉采集”文件夹。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:41:51.997

您需要安装[NI-IMAQ 驱动程序](http://joule.ni.com/nidu/cds/view/p/id/2758/lang/en)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T04:04:18.397

卸载它并尝试重新安装

# coding-style - 使用注释块或函数来启动变量会更好吗？

> ID：15496131
> 
> 赞同：0
> 
> 时间：2013-03-19T09:51:09.420
> 
> 标签：coding-style

由于函数分支越多，执行速度越慢，是使用下面的注释块进行一次代码执行（例如变量启动）更好，还是为此目的使用函数更好？**哪一个是更好的实践？**一种选择真的与另一种不同吗？如果不是这样，为什么不呢？

评论块：

```
/*************************************************************************************************/
/***********************************  VARIABLE INITIATIONS   *************************************/
 /************************************************************************************************/
Hospital **hospitals = new Hospital*[15];
for(int i = 0 ; i < 5 ; i++)
    hospitals[i] = new Hospital(3, i, 15);  //3: quota, i: hospital number, 10:prefereneceLength
Resident **residents = new Resident*[15];
for(int i = 0 ; i < 15 ; i++)
    residents[i] = new Resident(i,5);  //i: hospital number, 10:prefereneceLength
.
.
. 
```

或启动功能：

```
int main(void) {
    init_vars();
    read_from_files();
    .
    .
    . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:52:28.063

我总是喜欢可读性而不是过早的优化。

如果您*后来*发现由于函数调用而导致初始化速度变慢（而且我无法相信除了最苛刻的情况之外的任何情况都会影响您），然后进行优化。

与往常一样，衡量您的表现并确定热点。提前识别可能的问题并为此编写代码很容易，后来发现根本不是问题。与此同时，您牺牲了设计和可读性。

正如高德纳所说：

> 我们应该忘记小的效率，比如大约 97% 的时间：过早优化是万恶之源。

# jquery - 获取当前位置的 div 的 ID

> ID：15496136
> 
> 赞同：9
> 
> 时间：2013-03-19T09:51:37.220
> 
> 标签：jquery

`<section>`我在一页中有 n 个。每一个都提供了id，例如'page1'，'page2'......

在顶部，我放置了 2 个按钮，分别是“上一个”和“下一个”。按下 Previous 时，它将滚动到 Previous `<section>`。`<section>`与按下 Next 按钮时的下一个类似。

但现在的问题是，当用户使用滚动条滚动页面时，我如何检测`<section>`用户正在查看的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:59:25.840

您可以检查您的部分是否在“ViewPort”中，我正在使用它来找出：

```
function isTotallyInViewPort($entry){
    var windowScrollTop = $(window).scrollTop();
    var windowHeight = $(window).height();
    var windowVisibleBottom = windowScrollTop + windowHeight;
    var entryTop = $entry.offset().top;
    var entryOuterHeight = $entry.outerHeight();
    var entryVisibleBottom = entryTop + entryOuterHeight;

    var isInView = windowScrollTop < ( entryTop ) < (windowVisibleBottom);
    if(!isInView) return false;

    var isCompleteInView = ( entryVisibleBottom ) < (windowVisibleBottom);
    return isCompleteInView;
} 
```

如果您想检测是否显示了 PARTS，只需创建一个函数来检查当前视图是否与您的部分位置重叠。

你可以将它绑定到 $(window).on("scroll")

编辑：我认为这应该检测您的元素是否显示（尚未测试）

```
function isPartlyInViewPort($entry){
    var windowScrollTop = $(window).scrollTop();
    var windowHeight = $(window).height();
    var windowVisibleBottom = windowScrollTop + windowHeight;
    var entryTop = $entry.offset().top;
    var entryOuterHeight = $entry.outerHeight();
    var entryVisibleBottom = entryTop + entryOuterHeight;

    var isAboveViewPort = entryVisibleBottom < windowScrollTop;
    var isBelowViewPort = windowVisibleBottom < entryTop;

    return !(isAboveViewPort || isBelowViewPort);
} 
```

# maven - Maven 对我的 testclasspath 做了什么

> ID：15496148
> 
> 赞同：4
> 
> 时间：2013-03-19T09:52:15.847
> 
> 标签：maven, log4j, classpath, surefire

我遇到了一个测试问题，在 maven 中执行该测试时无法初始化 log4j，尽管有效的 log4j.properties 位于 src/test/resources 中，因此应该最终出现在测试的类路径中。但它没有，即 log4j 只打印

```
log4j:WARN No appenders could be found for logger (org.springframework.test.context.junit4.SpringJUnit4ClassRunner).
log4j:WARN Please initialize the log4j system properly. 
```

为了调试问题，我从测试本身打印了类路径，使用[这里的代码](http://www.mkyong.com/java/how-to-print-out-the-current-project-classpath/)

但是我得到的不是一长串的罐子和路径

```
/<projectpath>/target/surefire/surefirebooter6226797341642271676.jar 
```

所以我的问题是：

1.  *WTF 是 maven 处理类路径吗？*

2.  *为什么我的 log4j.properties 没有出现在类路径中？*

3.  *我该如何调试？*

注意：在 Eclipse 中，我可以很好地运行测试，并且一切都按预期工作。

另一个注意事项：maven 项目是一个多模块项目，我只从单个子模块执行单个测试，命令行如下：

```
mvn -U -Dtest=de.company.project.SomeTest clean test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T15:23:59.103

好好看看[maven-surefire-plugin](http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html)。默认情况下，它会创建一个装满整个类路径的 jar。这由`useManifestOnlyJar`选项控制。这解决了 Windows 的类路径限制为 1024 的问题（引用我的头顶）。在 Linux 下，您不会真正感受到这种痛苦，因为限制要高得多。

如果您要分叉 maven-surefire-plugin，它将使用与您正在运行 Maven（和编译）的类路径不同的类路径。

调试这种蹩脚的情况可以如下进行：

*   在您的一个测试中添加一个循环，列出所有环境变量以及 java 系统属性。

*   调试测试：

    ```
    mvn -Dmaven.surefire.debug="-Xdebug \
        -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=9001 \
        -Xnoagent" \
        test 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:13:42.413

我找到了问题 1 的答案。

Maven 会即时创建具有奇怪名称的 jar，并在其中放置一个 MANIFEST.MF 文件。该文件包含类路径和要启动的主类。

这也回答了一些扩展问题 3。

您可以在 maven 运行时将该 jar 文件复制到其他地方，因此一旦完成就不会删除它。然后，您可以根据需要检查它。原来我的 log4.properties 在类路径上（测试类的目标目录在那里，属性文件在那个目录中......）

留给我第二个问题。

原来在 pom.xmls 森林的某个地方，系统属性 log4j.configuration 被设置为一个相当无用的值。如此处所述，将该值设置回正确值解决[了](https://stackoverflow.com/a/7927278/66686)我的直接问题。

现在我只需要在我们的 poms 中找到破损的地方，但这是另一天的故事。

# ios - IOS 6 - 自定义 UIButton 如何给我的 titleLabel 留出余量？

> ID：15496149
> 
> 赞同：2
> 
> 时间：2013-03-19T09:52:19.863
> 
> 标签：ios, objective-c, cocoa-touch, uibutton, drawrect

我在 drawRect: 方法中为我的 UIButton 子类绘制了一个插入矩形边框。如您所见，该形状离我的按钮 titleLabel 框架太近了。如何设置 titleLabel 的最大宽度/边距以避免这种情况？

绘制矩形：方法

```
- (void)drawRect:(CGRect)rect {
[super drawRect:rect];

  CGContextRef context = UIGraphicsGetCurrentContext();

  CGContextSetStrokeColorWithColor(context, [UIColor bluecolor].CGColor);

CGContextSetLineWidth(context, 2.0);

CGContextMoveToPoint(context, 4,4);

CGContextAddLineToPoint(context, 56, 4);
CGContextAddLineToPoint(context, 56, 56);
CGContextAddLineToPoint(context, 4, 56);
CGContextAddLineToPoint(context, 4,3);

// and now draw the Path!
CGContextStrokePath(context); 
```

}

![这是按钮](../Images/64e04705d9216a767f2e109d779a6173.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:00:09.673

`self.titleEdgeInsets=UIEdgeInsetsMake(0, 5, 0, 5);`在 drawRect 方法中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:03:21.337

试试这个代码......

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    UIEdgeInsets edgeInsets = button.titleEdgeInsets;
    edgeInsets.left -= 5;
    edgeInsets.right += 5;
    button.titleEdgeInsets = edgeInsets; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T02:15:01.820

在 xCode 中，可以使用 Inset 属性进行设置，如下面的屏幕截图所示： ![在此处输入图像描述](../Images/be6439e1c8179f1b587c21ed0c2af205.png)

# iphone - MPMoviePlayerController 重复模式

> ID：15496153
> 
> 赞同：0
> 
> 时间：2013-03-19T09:52:30.030
> 
> 标签：iphone, ios, ios5, ios6, ios4

我使用 MPMovieController 进行视频播放。我需要为用户定义时间重复视频。那么，如果我启用了重复模式，我如何检查特定视频的重复次数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:38:17.833

我认为通过使用“MPMoviePlayerPlaybackDidFinishNotification”这个通知功能，你可以检查计数..即重复模式，在播放结束时重复......&播放结束你可以获得这个通知......所以你可以保持你的计数。

# regex - 正则表达式匹配任何东西

> ID：15496156
> 
> 赞同：23
> 
> 时间：2013-03-19T09:52:32.423
> 
> 标签：regex

我知道这似乎有点多余，但我想要一个正则表达式来匹配任何东西。

目前我们正在使用`^*$`，但无论文本如何，它似乎都不匹配。

我手动检查没有文本，但我们使用的测试视图始终使用正则表达式进行验证。但是，有时我们需要它来使用正则表达式验证任何内容。即文本字段中的内容无关紧要，它可以是任何内容。

我实际上并没有生成正则表达式，而且我是他们的初学者。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-19T09:54:35.957

正则表达式`.*`将匹配任何内容（包括空字符串，正如 Junuxx 指出的那样）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2017-01-25T00:20:26.333

选择的答案略有错误，因为它不会匹配换行符或返回。如果您想要的选择包括任何换行符，则此[正则表达式匹配任何内容都很有用：](http://regexr.com/3f4vo)

`[\s\S]+`

`[\s\S]`匹配空白字符（包括换行符）或非空白字符的字符。由于所有字符都是空格或非空格，因此此字符类匹配任何字符。`+`匹配一个或多个前面的表达式

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-21T23:16:59.933

`^`是行首*锚点*，因此它将是“零宽度匹配”，这意味着它不会匹配任何实际字符（并且在 之后匹配的`^`第一个字符将是字符串的第一个字符）。同样，`$`是行尾锚。

`*`是一个*量词*。*它本身*不会匹配任何东西；它仅指示模式的一部分可以匹配*多少次。*具体来说，它表示前一个“原子”（即前一个字符或前一个带括号的子模式）可以匹配*任意*次数。

要实际匹配某些字符集，您需要使用*字符类*。正如 RichieHindle 所指出的，您在这里需要的字符类是`.`，它表示除换行符以外的任何字符（也可以使用适当的标志来匹配换行符）。所以`.*`代表`*`（任何数字）匹配`.`（任何字符）。类似地，`.+`表示`+`（至少一个）匹配`.`（任何字符）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T08:53:27.750

我知道这是一个有点旧的帖子，但我们可以有不同的方式，比如：

1.  .*
2.  (.*?)

# c# - 如何使用正则表达式等在 C# 中处理来自文本框/富文本框的文本

> ID：15496157
> 
> 赞同：0
> 
> 时间：2013-03-19T09:52:32.567
> 
> 标签：c#, regex, text-processing

txtinput 中的原始文本将以这种格式显示

```
Firstportion Seconportion
Firstportion Seconportion
Firstportion Seconportion
Firstportion Seconportion 
```

1.  我的目标是首先将每行拆分为两个变量，然后将它们添加到数组或列表或任何有效的方法中[行数是可变的，因此数组不起作用]

    var1[] = firstportion, var2=seconportion //到目前为止看起来像是为第一个条目工作

2.  把它们放到变量数组/列表中[不适用于我目前拥有的循环]

3.  使用条件 if 和正则表达式分别处理第一部分和第二部分，并将它们全部显示在第二个 txtbox

    ```
    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;

    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.Windows.Forms;
    using System.IO;
    using System.Collections;
    using System.Text.RegularExpressions;

    namespace Projectx
    {
    public partial class Form1 : Form
    {
            public Form1()
            {
            InitializeComponent();
            }

            private void button1_Click(object sender, EventArgs e)
            {
            string rawInput = txtInput.Text;
            //string[] rawInput = txtInput.Text.Split('\n');
            int x = 1;
            int y = 1;
            foreach (string line in txtInput.Lines)
            {
                    string firstPortion= "";
                    string secondPortion = "";
                    string[] splitInput = Regex.Split(rawInput, ("\\s+"));
                    firstPortion= splitInput[0];
                    secondPortion = splitInput[1];
                    //##### This works so far ans splits each line into two variables seperated by 1 white space but not sure if it works for 2nd line and seems can't assign these new splited values into two seperate array or list with the same loop or seperate loop
                    //List<int> list = new List<int>; //(arr)
                    List<string> myList1 = new List<string>();
                    List<string> myList2 = new List<string>();
                    myList1.Add(firtPortion);
                    myList2.Add(secondPortion);

                    txtOutPut.Text = "modified " + myList1[x] + "  " + myList2[y]+"\r\n";

                    int i = 1;
                    i++;
                    x++;
                    y++;
                    }  
            }
    }
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:09:20.020

尝试声明你的：

```
 List<string> myList1 = new List<string>();
            List<string> myList2 = new List<string>(); 
```

在 foreach 循环之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:09:50.257

似乎有两个大问题。

1.  您在每次迭代中创建一对新列表，而不是向同一个列表中添加新项目。
2.  您`rawInput`在每次迭代中拆分变量而不是当前的`line`.

还有一些较小的变量，主要与无关或未使用的变量有关。

尝试这样的事情：

```
List<string> myList1 = new List<string>();
List<string> myList2 = new List<string>();
int x = 0;
foreach (string line in txtInput.Lines)
{
    string[] splitInput = Regex.Split(line, ("\\s+"));
    myList1.Add(splitInput[0]);
    myList2.Add(splitInput[1]);
    txtOutPut.Text += "modified " + myList1[x] + "  " + myList2[x] + Environment.NewLine;
    x++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:18:47.847

1.  列表应在循环外声明
2.  你为什么使用**rawInput**？相反，您必须使用**line**进行拆分
3.  您不需要局部变量（x，y），而是可以使用 LastOrDefault()

    ```
     List<string> myList1 = new List<string>();
            List<string> myList2 = new List<string>();

            string rawInput = txtInput.Text;            

            foreach (string line in txtInput.Lines)
            {
                string firstPortion = "";
                string secondPortion = "";

                string[] splitInput = Regex.Split(line, ("\\s+"));
                firstPortion = splitInput[0];
                secondPortion = splitInput[1];

                myList1.Add(firstPortion);
                myList2.Add(secondPortion);

                txtOutPut.Text = "modified " + myList1.LastOrDefault() + "  " + myList2.LastOrDefault() + "\r\n";
            } 
    ```

# objective-c - Interface Builder：使用 OR 运算符的 Enabled1,2 属性

> ID：15496160
> 
> 赞同：1
> 
> 时间：2013-03-19T09:52:42.087
> 
> 标签：objective-c, macos, cocoa

我需要在界面生成器中设置控件的启用属性，这取决于他的偏好中的 2 个布尔值。

但是，运算符应该是 OR 而不是 AND。如果两者之一为真，则应启用我的控件。

目前，我只能使用 AND 运算符使其工作，（见截图）。

![在此处输入图像描述](../Images/ae2f59a30edbd6ba05bf0505e3a27d7d.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:14:12.603

不幸的是，在 IB 中，你被 and 困住了。我的建议是向您的 NIB（可能是您的 NIB 的所有者）可访问的对象添加一个新属性，这取决于对其他对象的更改以启用您的控制/视图。

看起来您正在使用`Shared User Defaults Controller`，所以我建议您在所有者中为您的组合用户默认值（可能`downloadingCastOrCrew`）创建一个新的布尔属性，然后您需要确保当任何一个默认值更改时，您更改 的值`downloadingCastOrCrew`：

在您的界面中：

```
@property BOOL downloadingCastOrCrew; 
```

在设置控制器或 awakeFromNib 之后的实现中：

```
 [[NSUserDefaultsController sharedUserDefaultsController] addObserver:self
      forKeyPath: @"values.kSearchPreferencesDownloadCast"
      options:NSKeyValueObservingOptionNew
      context:NULL];
 [[NSUserDefaultsController sharedUserDefaultsController] addObserver:self
      forKeyPath: @"values.kSearchPreferencesDownloadCrew"
      options:NSKeyValueObservingOptionNew
      context:NULL]; 
```

在您拆除控制器的实现中： [[NSUserDefaultsController sharedUserDefaultsController] removeObserver: self forKeyPath: @"values.kSearchPreferencesDownloadCast"];

```
 [[NSUserDefaultsController sharedUserDefaultsController] removeObserver: self
      forKeyPath: @"values.kSearchPreferencesDownloadCrew"]; 
```

如果您还没有观察者，请添加观察者：

```
 - (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object 
      change:(NSDictionary *)change context:(void *)context
 {
     NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
     self.downloadingCastOrCrew = [defaults boolForKey: @"kSearchPreferencesDownloadCast"] 
         || [defaults boolForKey: @"kSearchPreferencesDownloadCrew"];
 } 
```

通过使用访问器方法，您将触发 kvo 并且您将能够使用控制器`downloadingCastOrCrew`作为您的布尔值来检查而不是直接检查 NSUserDefaults 值。

显然，如果您已经有一个 observeValueForKeyPath，您可能希望在调用中添加一个上下文值并在`addObserver:forKeyPath:options:context`调用中检查它`observeValueForKeyPath:ofObject:change:context`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:42:58.310

你可以这样做：

创建第三个属性

```
@property BOOL isFirst;
@property BOOL isSecond;

@property BOOL isTextFieldVisible;//this one is your third

- (IBAction)isSec:(id)sender;
- (IBAction)isFir:(id)sender; 
```

在实施中

```
- (id)init
{
    self = [super init];
    if (self) {
        self.isFirst=NO;
        self.isSecond=NO;
    }
    return self;
}

- (IBAction)isSec:(id)sender {
    self.isSecond=!self.isSecond;
    [sender setTitle:[NSString stringWithFormat:@"isSecond: %d",self.isSecond]];

    self.isTextFieldVisible=self.isFirst || self.isSecond;

    self.isTextFieldVisible=!self.isTextFieldVisible;

    NSLog(@"->%d",self.isTextFieldVisible);
}

- (IBAction)isFir:(id)sender {
    self.isFirst=!self.isFirst;
    [sender setTitle:[NSString stringWithFormat:@"isfirst: %d",self.isFirst]];

    self.isTextFieldVisible=self.isFirst || self.isSecond;

     self.isTextFieldVisible=!self.isTextFieldVisible;

    NSLog(@"->%d",self.isTextFieldVisible);
}
@end 
```

在绑定中，只需将 textField 绑定到第三个属性，

[在此处](http://www.keepandshare.com/doc/6020465/bindingwithtwovaluesoring-34k?da=y)检查正在运行的应用程序。

编辑1：

`NSNegateBoolean`在 IB 中更改 ValueTransformer 。这样我的两行在`self.isTextFieldVisible=!self.isTextFieldVisible;`IBAction 中都不需要。

# c# - 如何在方法 webview.Invokescript() 中传递对象？

> ID：15496170
> 
> 赞同：1
> 
> 时间：2013-03-19T09:53:06.317
> 
> 标签：c#, .net, microsoft-metro

（Windows 8 Metro 应用程序）我有一个 HTML 文件，其中有一个 JavaScript 函数，例如

```
<script type="text/javascript">function somefunction(myobject) {
var myForm = document.forms[0];
myForm.num.value = myobject.getadd();
myForm.ans.value = myobject.getMul();
} 
```

其中 order 是某个类的对象，它具有诸如 等方法`getadd()`问题`getMul()`是.. `WebView.InvokeScript()`-- 方法只能有字符串。我必须传递对象，以便我可以进行一些计算..

任何最好的方法...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:01:14.213

您可以通过发送对象的 Json 序列化来传递对象：调用的 javascript 能够轻松地反序列化它们。

但是，您不能做的是传递一个对象并让 javascript 调用它的方法。

# iphone - 谷歌电视的 iOS 协议？

> ID：15496178
> 
> 赞同：0
> 
> 时间：2013-03-19T09:53:18.167
> 
> 标签：iphone, google-tv

是否有任何适用于 iOS 的 Google TV 任意协议的开源实现或示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:55:43.960

协议本身是开源的，所以是的 - 有一个开源实现，尽管是在 Java 中：

[https://code.google.com/p/anymote-protocol/](https://code.google.com/p/anymote-protocol/)

我怀疑这不是您真正要问的……从您的标签来看，听起来好像您正在追求与 iOS 兼容的实现。不幸的是，没有一个。在我上面给出的链接中有一个 C++ 代码库，但我认为它并不完整。

当然，由于协议本身是开放的，没有什么可以阻止您实现自己的 Objective-C/C++ 版本，尽管这可能会相当耗时。

# sql-server-2008 - 我们可以在存储过程中同时执行不同的 SP 吗？

> ID：15496180
> 
> 赞同：0
> 
> 时间：2013-03-19T09:53:23.850
> 
> 标签：sql-server-2008

在我的存储过程中，三个表有 3 个存储过程。每个我都从前端传递参数和存储过程名称（在 asp.net 4.0 中设计）

我们可以同时执行 3 个 SP，即并行执行，这样我就可以最大限度地减少存储过程的执行时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:27:49.703

您需要将存储过程拆分为三个单独的存储过程，并在三个不同的连接上执行它们。

理论上，也可以使用 .Net 语言中的 CLR 编写存储过程并使用多线程来实现您的目标。这个选项会更复杂。我不能再说第二个选项，因为我还没有真正做到。

请参阅[CLR 存储过程中的多线程代码？](https://stackoverflow.com/questions/1324027/multi-threaded-code-in-clr-stored-procs)

# ant - findbugs 不生成 html 报告

> ID：15496185
> 
> 赞同：0
> 
> 时间：2013-03-19T09:53:46.173
> 
> 标签：ant, report, findbugs

以下是我在 ant 构建文件中的 taskdef

```
<target name="findbugs">
   <echo message="${findbugs.home}"/>
   <findbugs home="${findbugs.home}"
     output="html"
     outputFile="E:\reports\findbugs-report.html" 
     effort="max"
     reportLevel="low" >
      <sourcePath path="${basedir}/enterpriseapplication/**" />
      <class location="${basedir}/**/*.class" />
   </findbugs>
</target> 
```

我检查了目录上的文件权限，一切都很好。我得到了 cli 输出，但没有生成文件。请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:19:00.803

我以前遇到过这个问题。findbugs 似乎无法创建该文件。在目录 E:\reports\ 中创建一个名为**findbugs-report.html**的空文件

希望有帮助。

* * *

> 如果它解决了您的问题，请不要忘记将答案标记为已接受的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:28:12.527

我在配置中放置的路径存在一些问题。修复这些路径解决了问题。此外，我们需要确保文件系统有权创建/修改放置结果文件的文件。感谢您的所有回答/评论。

# android - 如何在 Android.mk 中指定 g++ 的使用？

> ID：15496191
> 
> 赞同：0
> 
> 时间：2013-03-19T09:53:58.343
> 
> 标签：android, c++, g++, android-source

我有一个已添加到 android2.3.6 源代码中的 c++ 库，我想**编译它并**使用 g++ 而不是 gcc 和 ld 链接。是否可以？此外，我已将此行添加到我的 Android.mk 文件中：

```
 LOCAL_CXX=path/to/g++compiler 
```

但是楼里还是用gcc。

有什么解决办法吗？

提前致谢！

编辑：

完整的 Android.mk

```
LOCAL_PATH := $(call my-dir) 
libdash_src_files :=cppfiles 
LOCAL_C_INCLUDES :=headers 
include $(CLEAR_VARS) 
LOCAL_C_INCLUDES += path_to/stlport 
LOCAL_SRC_FILES := $(libdash_src_files) 

include external/stlport/libstlport.mk 

LOCAL_SHARED_LIBRARIES += libstlport libz LOCAL_SYSTEM_SHARED_LIBRARIES :=libdl libutils libc 

LOCAL_LDLIBS := $(LOCAL_LDLIBS) -llog 

LOCAL_LDFLAGS:= -lz -Wl -shared 

LOCAL_CXX := $(CXX) 
libdash_cppflags :=-g -fPIC -v -frtti -fexceptions 

LOCAL_CPPFLAGS :=$(libdash_cppflags) -fpermissive -w 
LOCAL_MODULE :=libdash 
LOCAL_MODULE_TAGS :=optional 
include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:16:56.297

我只是按照 jermaine 的指示做了一个 make clean 然后再次构建它，它工作正常。

多谢你们。

# jquery - 无法使用 JQuery在动态上执行点击事件

> ID：15496194
> 
> 赞同：0
> 
> 时间：2013-03-19T09:54:10.310
> 
> 标签：jquery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:09:03.110

将锚标记附加到 Dom 后，将 click 事件绑定到它。

```
$('#empList a').bind("click", function (e) {
    alert("inr");    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:59:58.590

您可以使用[on](http://api.jquery.com/on/)来执行点击动态链接。看下面的代码：

```
$('body').on('click', '#empList a', function() {
    alert("inr");

}); 
```

# chef-infra - 如何在厨师中获得一个组的所有成员？

> ID：15496197
> 
> 赞同：0
> 
> 时间：2013-03-19T09:54:21.070
> 
> 标签：chef-infra, ohai-gem

有没有比迭代 etc/passwd 更优雅的方法来获取厨师中的用户（在给定组中）？我想我可以使用搜索功能从数据包中获取组成员列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:48:39.777

是的，[ohai](http://docs.opscode.com/ohai.html)会为您提供此类信息。您可以像访问任何其他属性一样访问这些[自动属性。](http://docs.opscode.com/essentials_cookbook_attribute_files_attribute_automatic.html)

您可以在以下位置找到有关组的信息`node[:etc][:group]`

# git - 对于所有非远程分支，git 等效于 --all 吗？

> ID：15496198
> 
> 赞同：1
> 
> 时间：2013-03-19T09:54:22.010
> 
> 标签：git, git-branch

该`--all`参数在各种 git 命令中用于引用所有分支。所有非远程分支是否有等价物？

（具体来说，这是使用 git-filter-branch 提出的，我想在所有本地分支上工作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:03:24.953

**更新**到编辑：

以下内容适用于具有本地和远程分支的测试存储库，仅重写本地分支：

```
git filter-branch --tag-name-filter cat -- --glob=refs/heads/* 
```

（`cat`显然，标签名称过滤器只是一个示例）

该`--glob`选项记录在**[man git-rev-parse](https://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html)**下，供您参考。

* * *

```
git branch 
```

将已经列出所有本地分支机构。

然后，还有

```
git for-each-ref -- --glob=refs/heads/* 
```

对于本地裁判

```
git for-each-ref -- --glob=refs/remotes/*/* 
```

对于远程参考

# c# - 如何在 windowsmessages 上发送俄语和阿拉伯语字符？

> ID：15496201
> 
> 赞同：0
> 
> 时间：2013-03-19T09:54:30.560
> 
> 标签：c#

我在 C# 中有 2 个应用程序通过 Windows 消息 App1：向 App2 发送消息

```
string msg=UserName+","+UserAge;

byte[] sarr =System.Text.Encoding.Default.GetBytes(msg);//

int len = sarr.Length;

COPYDATASTRUCT cds;

cds.dwData = (IntPtr)100;

cds.lpData = msg;

cds.cbData = len + 1;

result = SendMessage(hWnd, WM_COPYDATA, wParam, ref cds); 
```

App2：接收来自 App1 的消息

```
COPYDATASTRUCT sentPara = new COPYDATASTRUCT();
Type mytype = sentPara.GetType();
sentPara = (COPYDATASTRUCT)message.GetLParam(mytype);
string[] parameters = sentPara.lpData.Split(','); 
```

**问题：** 用户名是俄语，当我在 App2 中收到它时，我得到问号“???????”，我认为这是字节数组编码中的问题，但我不知道如何解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:03:01.873

我会在第二个代码中添加一行：

```
 COPYDATASTRUCT sentPara = new COPYDATASTRUCT();
Type mytype = sentPara.GetType();
sentPara = (COPYDATASTRUCT)message.GetLParam(mytype);
var parametersDecoded = System.Text.Encoding.Default.GetString(sentPara.lpData);
string[] parameters = parametersDecoded.Split(','); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:19:11.953

您的两个应用程序是否作为两个独立的进程运行？

如果是这样，那么您不能`string`直接发送，因为它将包含一些在其他进程的地址空间中无效的内部指针。您不知道 STRING 类包含什么 - 它是隐藏的。因此，它可能包含它们，而不是“肯定包含”。

（尽管在 C#/.Net 中它肯定包含）。

你已经开始了：你需要将该字符串的*内容*打包成一个原始字节数组，自己保证它只包含数据，没有指针，然后将原始数组发送到第二个进程。

您问题的核心是`COPYDATA`结构的错误 P/Invoke 定义。`lpVoid`不应该是类型，而`string`应该是类型`byte[]`or `IntPtr`。一旦您将其类型更改为`byte[]`，编译器将立即显示 '=msg' 和 '.Split' 无效。

请注意，您当前的 SENDING 代码仅包含一个错误：您提供的“数据长度”是**数组**的长度（它是正确的），但它也传递了“msg”，而不是数组“sarr”。修复 lpVoid 类型后，只需将该字段设置为`sarr`.

然后，在接收端，您将需要获取 COPYDATA，从中获取 a `lpVoid`，将其用作 a`byte[]`并将其传递给`Encoding.GetString()`方法 - 类似于 **zaitsman**呈现的内容。

# jquery - 复制到剪贴板后如何删除zclip？

> ID：15496204
> 
> 赞同：1
> 
> 时间：2013-03-19T09:54:39.807
> 
> 标签：jquery, zclip

我需要一种从按钮中删除 zclip 的方法，因为它是动态加载的，每次加载它时，它似乎都会添加另一个 zlip 实例，因此会复制多次。

我按照使用指南尝试了 zclip('remove') 但没有运气：

```
function zclipMe(){
    $('#copySearch').zclip({
       path: 'http://www.steamdev.com/zclip/js/ZeroClipboard.swf',
       copy: function () {
            return $(this).prev('.cvl0').text();
       },
       afterCopy: function(){
            var theText = $(this).prev('.cvl0');
            var thePosition = $(this).prev('.cvl0').position();
            $('.copied').text('Copied!').fadeIn(150).delay(1200).fadeOut(200).css({'top': thePosition.top , 'left': thePosition.left , 'width': theText.width()+30 , 'height': theText.height()+30 , 'line-height': theText.height()+ 30 +'px'});
            $(this).zclip('remove');
       }
    });
} 
```

如您所见，我在要复制的文本上覆盖了一个框，并带有“已复制！”一词 显示它已被成功复制，并且这会根据我的动态按钮已加载的次数而触发多次。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T09:54:29.847

我也有同样的问题。我先解决删除事件尝试：$('#copySearch').unbind(); 如果您需要再次生成按钮

# javascript - 审查板上的红色标记

> ID：15496206
> 
> 赞同：3
> 
> 时间：2013-03-19T09:54:47.433
> 
> 标签：javascript, review-board

有谁知道reviewboard中的这些红色标记是什么意思？我已经看到它们不一致地弹出。

显示文件是一个 csproj 中的 .html 文件，它包含一个 JavaScript 下划线模板。

![在此处输入图像描述](../Images/729c61e7b187f31a156e093df212e0c6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-07T21:27:14.307

我也在寻找同样的东西并得到了这个链接

[https://groups.google.com/forum/?fromgroups=#!topic/reviewboard/sOR_-EGmDok](https://groups.google.com/forum/?fromgroups=#!topic/reviewboard/sOR_-EGmDok) ,

他们说这是因为荧光笔评论板在内部使用的 pygments。我继续搜索以验证此答案，发现这是一个无法识别 utf8 字符的 pygments 问题。

请参见

1) [https://code.google.com/p/minted/issues/detail?id=55](https://code.google.com/p/minted/issues/detail?id=55)

2) [https://tex.stackexchange.com/questions/14166/red-box-drawn-around-question-mark-operator-in-minted-erlang-code](https://tex.stackexchange.com/questions/14166/red-box-drawn-around-question-mark-operator-in-minted-erlang-code)

两者都支持在谷歌群组链接中发布的答案。

# cuda - 关于 CUDA 中每个 SM 分配的寄存器数量

> ID：15496213
> 
> 赞同：0
> 
> 时间：2013-03-19T09:55:09.303
> 
> 标签：cuda

第一个问题。CUDA C 编程指南的编写如下。

> L1 和共享内存使用相同的片上内存：可配置为 48 KB 共享内存和 16 KB 一级缓存或 16 KB 共享内存和 48 KB 一级缓存

但是，设备查询显示“每个块可用的寄存器总数：32768”。我使用 GTX580。（CC 为 2.0）指南说默认缓存大小为 16KB，但 32768 表示 32768*4（字节）= 131072 字节 = 128 KB。其实，我不知道哪个是正确的。

第二个问题。我设置如下，

```
dim3    grid(32, 32);            //blocks in a grid
dim3    block(16, 16);           //threads in a block
kernel<<<grid,block>>>(...); 
```

然后，每个块的线程数为 256。=> 我们每个块需要 256*N 个寄存器。N 表示每个线程所需的寄存器数。(256*N)*blocks 是每个 SM 的寄存器数。（不是字节）因此，如果默认大小为 16KB 并且线程/SM 为 MAX(1536)，则 N 不能超过 2。因为“最大数量每个多处理器的线程数：1536"。16KB/4Bytes = 4096 个寄存器，4096/1536 = 2.66666...

在更大的缓存 48KB 的情况下，N 不能超过 8。48KB/4Bytes = 12288 个寄存器，12288/1536 = 8

真的吗？其实我很困惑。

* * *

实际上，我几乎完整的代码在这里。我认为，当块尺寸为 16x16 时，内核得到了优化。但是，在 8x8 的情况下，比 16x16 或类似的要快。我不知道为什么。

每个线程的寄存器数为 16，共享内存为 80+16 字节。

我曾问过同样的问题，但我无法得到确切的解决方案。： [The result of an experimental different from CUDA Occupancy Calculator](https://stackoverflow.com/questions/15360890/the-result-of-an-experiment-different-from-cuda-occupancy-calculator)

```
#define WIDTH 512
#define HEIGHT 512
#define TILE_WIDTH 8
#define TILE_HEIGHT 8
#define CHANNELS 3
#define DEVICENUM 1 
#define HEIGHTs HEIGHT/DEVICENUM

__global__ void PRINT_POLYGON( unsigned char *IMAGEin, int *MEMin, char a, char b, char c){
        int Col = blockIdx.y*blockDim.y+ threadIdx.y;           //Col is y coordinate
        int Row = blockIdx.x*blockDim.x+ threadIdx.x;           //Row is x coordinate
        int tid_in_block = threadIdx.x + threadIdx.y*blockDim.x;
        int bid_in_grid = blockIdx.x + blockIdx.y*gridDim.x;
        int threads_per_block = blockDim.x * blockDim.y;
        int tid_in_grid = tid_in_block + threads_per_block * bid_in_grid;

        float result_a, result_b;
        __shared__ int M[15];
        for(int k = 0; k < 5; k++){
                M[k] = MEMin[a*5+k];
                M[k+5] = MEMin[b*5+k];
                M[k+10] = MEMin[c*5+k];
        }

        int result_a_up = (M[11]-M[1])*(Row-M[0]) - (M[10]-M[0])*(Col-M[1]);
        int result_b_up = (M[6] -M[1])*(M[0]-Row) - (M[5] -M[0])*(M[1]-Col);

        int result_down = (M[11]-M[1])*(M[5]-M[0]) - (M[6]-M[1])*(M[10]-M[0]);

        result_a = (float)result_a_up / (float)result_down;
        result_b = (float)result_b_up / (float)result_down;

        if((0 <= result_a && result_a <=1) && ((0 <= result_b && result_b <= 1)) && ((0 <= (result_a+result_b) && (result_a+result_b) <= 1))){
                IMAGEin[tid_in_grid*CHANNELS] += M[2] + (M[7]-M[2])*result_a + (M[12]-M[2])*result_b;      //Red Channel
                IMAGEin[tid_in_grid*CHANNELS+1] += M[3] + (M[8]-M[3])*result_a + (M[13]-M[3])*result_b;    //Green Channel
                IMAGEin[tid_in_grid*CHANNELS+2] += M[4] + (M[9]-M[4])*result_a + (M[14]-M[4])*result_b;    //Blue Channel
        }
}

struct DataStruct {
    int                 deviceID;
    unsigned char       IMAGE_SEG[WIDTH*HEIGHTs*CHANNELS];
};

void* routine( void *pvoidData ) { 
        DataStruct  *data = (DataStruct*)pvoidData;
        unsigned char *dev_IMAGE;
        int *dev_MEM;
        unsigned char *IMAGE_SEG = data->IMAGE_SEG;

        HANDLE_ERROR(cudaSetDevice(5));

        //initialize array
        memset(IMAGE_SEG, 0, WIDTH*HEIGHTs*CHANNELS);
        cudaDeviceSetCacheConfig(cudaFuncCachePreferL1);
        printf("Device %d Starting..\n", data->deviceID);

        //Evaluate Time
        cudaEvent_t start, stop;
        cudaEventCreate( &start );
        cudaEventCreate( &stop );

        cudaEventRecord(start, 0); 

        HANDLE_ERROR( cudaMalloc( (void **)&dev_MEM, sizeof(int)*35) );
        HANDLE_ERROR( cudaMalloc( (void **)&dev_IMAGE, sizeof(unsigned char)*WIDTH*HEIGHTs*CHANNELS) );

        cudaMemcpy(dev_MEM, MEM, sizeof(int)*35, cudaMemcpyHostToDevice);
        cudaMemset(dev_IMAGE, 0, sizeof(unsigned char)*WIDTH*HEIGHTs*CHANNELS);

        dim3    grid(WIDTH/TILE_WIDTH, HEIGHTs/TILE_HEIGHT);            //blocks in a grid
        dim3    block(TILE_WIDTH, TILE_HEIGHT);                         //threads in a block

        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, 0, 1, 2);
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, 0, 2, 3);
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, 0, 3, 4);
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, 0, 4, 5);
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, 3, 2, 4);
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, 2, 6, 4);

        HANDLE_ERROR( cudaMemcpy( IMAGE_SEG, dev_IMAGE, sizeof(unsigned char)*WIDTH*HEIGHTs*CHANNELS, cudaMemcpyDeviceToHost ) );
        HANDLE_ERROR( cudaFree( dev_MEM ) );
        HANDLE_ERROR( cudaFree( dev_IMAGE ) );

        cudaEventRecord(stop, 0); 
        cudaEventSynchronize(stop);

        cudaEventElapsedTime( &elapsed_time_ms[data->deviceID], start, stop );
        cudaEventDestroy(start);
        cudaEventDestroy(stop);

        elapsed_time_ms[DEVICENUM] += elapsed_time_ms[data->deviceID];
        printf("Device %d Complete!\n", data->deviceID);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:59:59.377

blockDim 8x8 比 16x16 快，因为当您增加块大小时，内存访问中的地址分歧会增加。

使用 15 个 SM 在 GTX480 上收集的指标。

```
metric                         8x8         16x16
duration                        161µs       114µs
issued_ipc                     1.24        1.31
executed_ipc                    .88         .59
serialization                 54.61%      28.74% 
```

指令重播的数量提示我们可能存在错误的内存访问模式。

```
achieved occupancy            88.32%      30.76%
0 warp schedulers issues       8.81%       7.98%
1 warp schedulers issues       2.36%      29.54%
2 warp schedulers issues      88.83%      52.44% 
```

16x16 似乎使 warp 调度程序保持忙碌。但是，它使调度程序忙于重新发布指令。

```
l1 global load trans          524,407     332,007
l1 global store trans         401,224     209,139
l1 global load trans/request    3.56        2.25
l1 global store trans/request  16.33        8.51 
```

首要任务是减少每个请求的事务。Nsight VSE 源视图可以显示每条指令的内存统计信息。内核中的主要问题是 IMAGEin[] += 值的交错 U8 加载和存储。在 16x16 时，每个请求产生 16.3 个事务，但对于 8x8 配置只有 8.3 个事务。

改变 IMAGEin[(i*HEIGHTs+j)*CHANNELS] += ...

连续将 16x16 的性能提高 3 倍。我想将通道增加到 4 个并在内核中处理打包将提高缓存性能和内存吞吐量。

如果您固定每个请求的内存事务数，您可能必须查看执行依赖关系并尝试增加您的 ILP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:02:34.787

块大小为 8x8 时速度更快，因为它是 32 的较小倍数，如下图所示，有 32 个 CUDA 核心绑定在一起，两个不同的 warp 调度程序实际上调度相同的事情。所以在每个执行周期中，在这 32 个内核上执行相同的指令。

为了更好地阐明这一点，在第一种情况下（8x8），每个块由两个扭曲（64 个线程）组成，因此它仅在两个执行周期内完成，但是，当您使用 (16x16) 作为块大小时，每个块需要 8 warps（256 个线程），因此执行周期增加了 4 倍，从而导致复合速度变慢。

然而，在某些情况下，用更多的 warp 填充 SM 会更好，当内存访问量很高并且每个 warp 都可能进入内存停顿（即从内存中获取其操作数）时，它将被另一个 warp 替换，直到内存操作完成。因此导致更多的SM占用。

您当然应该在计算中输入每个 SM 的块数和 SM 总数，例如，将超过 8 个块分配给单个 SM 可能会减少其占用率，但在您的情况下，您可能不会遇到这些问题，因为 256 通常比 64 更好，因为它会平衡 SM 之间的块，而使用 64 个线程会导致在同一个 SM 中执行更多块。

## 编辑：此答案基于我的推测，有关更科学的方法，请参阅 Greg Smiths 的答案。

寄存器池与共享内存/缓存不同，在其架构的最底层！

寄存器由[触发器](http://en.wikipedia.org/wiki/Flip-flop_%28electronics%29)组成，L1 缓存可能是[SRAM](http://en.wikipedia.org/wiki/Static_random-access_memory)。

只是为了得到一个想法，看看下面代表 FERMI 架构的图片，然后更新您的问题以进一步指定您面临的问题。

![费米架构](../Images/62e2ccb90922a768a7c96b39ce58b774.png)

`--ptxas-options = -v`作为注释，您可以通过将选项传递给 nvcc来查看函数占用了多少寄存器和共享内存 (smem) 。

# wpf - 移动鼠标时WPF TextBox MenuItem失去焦点

> ID：15496218
> 
> 赞同：8
> 
> 时间：2013-03-19T09:55:20.680
> 
> 标签：wpf, textbox, menuitem, lost-focus

在我的 WPF 应用程序中，我希望菜单项有一个文本框。我已经设法使用以下代码做到这一点：

```
<Menu Height="23" HorizontalAlignment="Stretch" Name="MainMenu" VerticalAlignment="Top">
    <MenuItem Header="File">
        <MenuItem Header="Exit" Click="menuItemExit_Click" />
    </MenuItem>
    <MenuItem Header="Settings">
        <MenuItem Header="Some setting" IsCheckable="True" />
        <Separator />
        <MenuItem>
            <MenuItem.Header>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    <Label Content="Some value:" Margin="0,3,6,0" Padding="0" />
                    <TextBox Margin="0,0,0,6" Grid.Column="1" />
                </Grid>
            </MenuItem.Header>
        </MenuItem>
    </MenuItem>
</Menu> 
```

此代码像我预期的那样显示菜单项，但是如果我开始在文本框中输入一些值，然后将鼠标（而不是单击）从文本框菜单项上移开，文本框将失去焦点，并且在单击之前我无法继续输入再次在文本框中。如何在 WinForms 中实现与文本框菜单项相同的行为？也就是说，只有当用户在文本框外单击或按 Tab 键时，文本框才会失去焦点。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T13:22:44.593

正如我所写的，我不确定您如何使用菜单控件。但也许这段代码可以帮助你或给你一个提示：

```
<TextBox Margin="0,0,0,6" Grid.Column="1" PreviewLostKeyboardFocus="OnPreviewLostKeyboardFocus"/> 
```

以及相应的方法：

```
private void OnPreviewLostKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e)
  {
     if (MainMenu.IsKeyboardFocusWithin)
     {
        e.Handled = true;
     }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-04T21:13:54.150

我知道这个答案可能为时已晚，无法帮助您，但也许它会帮助任何寻找解决此问题的人。

`Focusable=false`MenuItems 上的设置也有效。它仍然允许单击它们并允许它们包含的控件具有焦点。但是，它禁用了仅使用键盘导航菜单的能力，从而引入了可访问性问题。

然而，通过给每个菜单项一个可聚焦的元素，可以通过一点创意来解决可访问性问题。例如：

```
<MenuItem Focusable="False">
    <MenuItem.Header>
        <StackPanel Orientation="Horizontal" Focusable="True" FocusVisualStyle="{x:Null}">
            <TextBlock Text="Do something!" />
        </StackPanel>
    </MenuItem.Header>
</MenuItem> 
```

`FocusVisualStyle="{x:Null}"`代码需要隐藏原本会出现的虚线焦点（并且在菜单中看起来不合适）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T11:01:52.633

也许这有帮助：

```
 <MenuItem StaysOpenOnClick="True">
        <MenuItem.Header>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Label Content="Some value:" Margin="0,3,6,0" Padding="0" />
                <TextBox Margin="0,0,0,6" Grid.Column="1" />
            </Grid>
        </MenuItem.Header>
    </MenuItem> 
```

# c++ - C ++将递归函数重写为非递归 - 涉及 MPIR 并且非常困难

> ID：15496228
> 
> 赞同：1
> 
> 时间：2013-03-19T09:55:51.823
> 
> 标签：c++, gmp

我很难将函数从递归转换为使用 MPIR 库变量“mpz_t”而不是“unsigned __int64”的非递归函数。我也在尝试思考我应该如何编写循环。当我使它递归时，这很容易，但是当我尝试使它成为非递归时，就很难了！

```
unsigned __int64 exampleFunc( unsigned __int64 a,
                              unsigned __int64 b,
                              unsigned __int64 c )
{
    if( a <= 2 )
        return a + 1;
    if( b <= 4 )
        return b;
    if( c == 3 )
        return c - 1;
    if( b == 5 )
        c += 2;
    // How will I put these into a loop?
    return exampleFunc( a - 1, b - 2, c ) + exampleFunc( 0, b + 1, c - 1 );
}; 
```

部分问题是我们不能编写返回 mpz_t 值的函数。我们只能向它写入一个值（如指针）。所以，这样的事情是行不通的：

```
mpz_t exampleFunc( ... ); 
```

这意味着，这样的事情可以工作：

```
void exampleFunc( mpz_t out, ... ); 
```

甚至是全局变量（不强烈推荐）：

```
mpz_t g_out;
mpz_init( g_out );
void exampleFunc( ... ) { g_out = ? }; 
```

**笔记：**

我们应该尽量不要使用数组甚至向量，因为这些数字会非常非常大——这解释了为什么我要从 unsigned __int64 切换到 mpz_t。除非我们真的必须...

请帮忙，我真的很紧张。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:54:06.423

关于 gmp 的问题：尝试使用 gmpxx.h - 您可以`mpz_class`像返回整数一样返回对象。

```
mpz_class withgmp( const mpz_class &a, const mpz_class &b, mpz_class c )
{
    if( a <= 2 )
        return a + 1;
    if( b <= 4 )
        return b;
    if( c == 3 )
        return c - 1;
    if( b == 5 )
        c += 2;
    return withgmp( a - 1, b - 2, c ) + withgmp( 0, b + 1, c - 1 );
} 
```

请注意，我`c`按值传递，因为它可能在函数中被修改。

或者，如果您必须使用纯 C，您应该为结果传递第四个参数，如下所示：

```
void withmpz( mpz_t a, mpz_t b, mpz_t c, mpz_t result)
{
     // ... leaving out the boundary conditions
     mpz_t left; mpz_init(left);
     // ... leaving out code for adjusting a,b and c
     withmpz(a,b,c, left);
     mpz_t rightt; mpz_init(right);
     // ... leaving out code for adjusting a,b and c
     withmpz(a,b,c, right);
     mpz_add(result, left, right);
} 
```

注意 mpz_t 看起来好像是按值传递，但实际上它总是按引用传递，所以调用后 a,b,c 会发生变化`withmpz`

您问题的第二部分，如何将其转换为迭代，确实更困难。一种方法是将其更改为基于堆栈的算法，其中每个迭代步骤将堆栈顶部替换为需要添加的 2 个值，直到可以立即计算一个，然后将其添加到最终结果中，重复此操作直到你的堆栈上没有更多的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:01:13.697

指向指针的指针可能是解决方案：您通过值将指针传递给指针并根据需要修改指针及其指向的数据

# android - layout_gravity 不起作用

> ID：15496236
> 
> 赞同：0
> 
> 时间：2013-03-19T09:56:13.550
> 
> 标签：android, android-layout

我有一个包含 7 个按钮的布局，我希望其中 6 个位于屏幕中央，最后一个位于底部。

![在此处输入图像描述](../Images/0a7b6482d78889c9d669b5a606d7706e.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/background"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/account_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dip"
            android:background="@null"
            android:contentDescription="@string/accountDesc"
            android:src="@drawable/boton_usos" />

        <ImageButton
            android:id="@+id/alquilar_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:background="@null"
            android:contentDescription="@string/alquilarDesc"
            android:src="@drawable/boton_alquilar" />

        <ImageButton
            android:id="@+id/paradas_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:background="@null"
            android:contentDescription="@string/paradasDesc"
            android:src="@drawable/boton_paradas" />

        <ImageButton
            android:id="@+id/noticias_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:background="@null"
            android:contentDescription="@string/noticiasDesc"
            android:src="@drawable/boton_noticias" />

        <ImageButton
            android:id="@+id/incidencia_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:background="@null"
            android:contentDescription="@string/incidenciaDesc"
            android:src="@drawable/boton_incidencia" />

        <ImageButton
            android:id="@+id/informacion_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:background="@null"
            android:contentDescription="@string/infoDesc"
            android:src="@drawable/boton_informacion" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:orientation="vertical" >

        <ImageButton
            android:id="@+id/sabadell_but"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/banner_sabadell"
            android:contentDescription="@string/infoDesc" />
    </LinearLayout>

</LinearLayout> 
```

使用此代码，我得到了从左上角开始的按钮。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:00:47.157

使用 `android:gravity`而不是`layout_gravity`.

```
 <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:gravity="center"
            android:layout_gravity="center"
          > 
```

我实施它并且它正在工作。

**编辑：**

我把整个 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/account_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="50dip"
            android:text="Button 1" />

        <Button
            android:id="@+id/alquilar_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Button 2" />

        <Button
            android:id="@+id/paradas_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Button 3" />

        <Button
            android:id="@+id/noticias_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Button 4" />

        <Button
            android:id="@+id/incidencia_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Button 5" />

        <Button
            android:id="@+id/informacion_but"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:text="Button 6" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/sabadell_but"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:text="Button 7" />
    </LinearLayout>

</LinearLayout> 
```

和输出。

![在此处输入图像描述](../Images/98e486e231b9ea17c98051c4b3c0d0ad.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:00:25.417

试试这个：使用 **android:gravity="center"** insted of **android:layout_gravity="center"**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/background"
>

  <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical"
         android:gravity="center"
      >

  <ImageButton
        android:id="@+id/account_but"
        android:background="@null"
        android:contentDescription="@string/accountDesc"
        android:layout_marginTop="50dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_usos" />

    <ImageButton
        android:id="@+id/alquilar_but"
        android:background="@null"
        android:contentDescription="@string/alquilarDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_alquilar" />

    <ImageButton
        android:id="@+id/paradas_but"
        android:background="@null"
        android:contentDescription="@string/paradasDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_paradas" />

    <ImageButton
        android:id="@+id/noticias_but"
        android:background="@null"
        android:contentDescription="@string/noticiasDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_noticias" />

    <ImageButton
        android:id="@+id/incidencia_but"
        android:background="@null"
        android:contentDescription="@string/incidenciaDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_incidencia" />

     <ImageButton
        android:id="@+id/informacion_but"
        android:background="@null"
        android:contentDescription="@string/infoDesc"
        android:layout_marginTop="5dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/boton_informacion" /> 

    </LinearLayout>

     <LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:orientation="vertical"
        android:layout_gravity="bottom"
      >     

        <ImageButton
            android:id="@+id/sabadell_but"
            android:background="@drawable/banner_sabadell"
            android:contentDescription="@string/infoDesc"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            />
    </LinearLayout>  

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:16:57.850

给你我的完整 XML 文件，因为我在我的应用程序中处理过它

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg_mainscreen">

  <LinearLayout 
        android:id="@+id/lnrContent"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"        
        android:orientation="vertical" >

 <Button 
    android:id="@+id/btnRecipe"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dip"
    android:layout_marginRight="80dip"
    android:background="@string/RecipeButton_background"/>

<Button 
    android:id="@+id/btnIngredients"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dip"
    android:layout_marginRight="80dip"
    android:layout_marginTop="20dip"
    android:background="@string/IngredientButton_background"/>

<Button 
    android:id="@+id/btnMenu"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dip"
    android:layout_marginRight="80dip"
    android:layout_marginTop="20dip"
    android:background="@string/MenuButton_background" />

<Button 
    android:id="@+id/btnShoppingList"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dip"
    android:layout_marginRight="80dip"
    android:layout_marginTop="20dip"
    android:background="@string/ShoppingListButton_background"/>

<Button 
    android:id="@+id/btnSynctoServer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dip"
    android:layout_marginRight="80dip"
    android:layout_marginTop="20dip"
    android:text="Synchronize"
    android:textColor="@android:color/black"
    android:background="@string/ShoppingListButton_background"/>

</LinearLayout>

  <Button 
    android:id="@+id/btnSynctoServer"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Synchronize"
    android:layout_marginLeft="80dip"/>

</RelativeLayout> 
```

# java - 需要授权 500 内部服务器错误 apache http 服务器 java sardine 实现

> ID：15496246
> 
> 赞同：1
> 
> 时间：2013-03-19T09:56:32.590
> 
> 标签：java, apache, .htaccess, webdav, httpserver

我正在尝试使用 WEBDAV 沙丁鱼概念在 apache http 服务器（某些 Url）中上传文件。我为文件上传和 Apache 服务器配置等进行了编码。我想通过身份验证来读写这个文件。所以，我在apache中添加了.htaccess密码文件。当我尝试通过身份验证上传文件时，文件上传没有发生，但它提示文件读取操作的身份验证。并且我得到了一些需要授权的错误 -500 内部服务器错误。我不知道为什么我会收到这个错误..我认为它没有读取我的密码文件，而单独上传..我不知道如何清除这个错误..当我在没有身份验证的情况下执行相同的文件上传操作时，然后文件上传正在工作，但是，它没有提示文件读取的身份验证..

```
I configured my apache http server 2.2 using below Link

http://www.mkyong.com/apache/how-to-enable-webdav-in-apache-server-2-2-x-windows/

This is my httpd-dav.conf file

Alias /sites "E:/Apache Software Foundation/Apache2.2/sites"
<Directory "E:/Apache Software Foundation/Apache2.2/sites">

DavLockDB "E:/Apache Software Foundation/Apache2.2/var/DavLock"
#DAVMinTimeout 600

Alias /sites "E:/Apache Software Foundation/Apache2.2/sites"
<Directory "E:/Apache Software Foundation/Apache2.2/sites">

Dav On

AllowOverride None
Options None

Order Allow,Deny
Order deny,allow
Deny from 10.80.100.160
Allow from 10.80.100.160

AuthType Digest
AuthName DAV-upload

# Options Indexes
Options Indexes MultiViews FollowSymLinks

AuthUserFile "C:/Program Files/user.passwd"
#AccessFileName "C:/Program Files/user.passwd"
AuthDigestProvider file
AllowOverride None

# Allow universal read-access, but writes are restricted
# to the admin user.
<Limit GET POST PROPFIND OPTIONS HEAD>
# require user admin
require valid-user
</Limit>
</Directory>

This is my htaccess password file

admin:DAV-upload:encrypted pwd
Nagu:DAV-upload:encrypted pwd
Prashant:DAV-upload:encrypted pwd

I enabled Following LoadModule and Include Statement in my httpd.conf by referring below link

http://www.mkyong.com/apache/how-to-enable-webdav-in-apache-server-2-2-x-windows/

LoadModule alias_module modules/mod_alias.so
LoadModule auth_digest_module modules/mod_auth_digest.so
LoadModule authn_file_module modules/mod_authn_file.so
LoadModule dav_module modules/mod_dav.so
LoadModule dav_fs_module modules/mod_dav_fs.so
LoadModule dav_lock_module modules/mod_dav_lock.so
LoadModule setenvif_module modules/mod_setenvif.so

# Distributed authoring and versioning (WebDAV)
Include conf/extra/httpd-dav.conf

Please help me dude.. Thanks in advance.. 
```

# asp.net - 如何跨类和代码隐藏访问控件和变量？

> ID：15496249
> 
> 赞同：1
> 
> 时间：2013-03-19T09:56:43.410
> 
> 标签：asp.net, vb.net, class, scope, code-behind

我有 ASP.NET 页面、它的代码隐藏和一个类文件：

*   **Folder1/page.aspx（asp.net页面）**，它包含一个`label`：

```
 <asp:Label runat="server" ID="Label1" Visible="false"></asp:Label> 
```

*   **Folder1/page.aspx.vb (code-behind)**，它像这样调用connection.vb：

```
 Dim x As New Connection
    Protected Sub button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles button1.Click
    x.checkusernameExists(TextBoxUsername.Text)
    ' I try to access `Boolean variable` Flag from Class file but I can't.
    End Sub 
```

*   **App_Code/connection.vb（我创建的类文件）**：

```
 Public Class Connection
       Public Sub checkusernameExists(ByVal username1 As String)
       Dim flag as Boolean
       ' I try to access here `Label1.text` & `Label1.visible` to work on it but I can't.
       End Sub
    End Class 
```

## 我的问题

1 -**我如何`Label1`从内部`ASP.NET page`访问`Connection.vb`？**

2 -**我如何访问`Boolean variable`from `Connection.vb`in`page.aspx.vb`** (code behind) **？**

我真的陷入了困境。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:04:25.770

使用（公共）属性或方法参数。

您必须问自己以​​下问题：为什么负责连接的类（我假设是数据库）完全可以访问您的 GUI？不要将不同的层相互硬链接，否则您将无法单独使用它们。

我建议让连接类完成它的工作，而不是修改你的前端。相反，控制器（aspx 页面）应该管理它的 GUI 并调用连接类，使用返回值来确定接下来要对`Label`.

所以返回一个`Boolean`来表明用户是否有效：

```
Public Class Connection
   Public Shared Function checkusernameExists(ByVal username1 As String)As Boolean
       Dim userExists As Boolean
       ' acces db to check if the username exists '
       Return userExists 
   End Sub
End Class 
```

在您的页面中：

```
Protected Sub button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles button1.Click
    Dim userExists As Boolean = Connection.checkusernameExists(TextBoxUsername.Text)
    Label1.Visible = userExists 
    If Label1.Visible Then Label1.Text = "Hello again " & TextBoxUsername.Text
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:00:15.863

您可以使用函数返回值并将标签作为参数传递。

```
Public Function SaveChanges(ByRef Label1 As Label, ByVal username1 As String) As Boolean
{
    Return True
} 
```

如果您将标签属性传递给函数而不是传递标签的对象，因为它会耦合两个类，这会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:05:01.553

将标志设为属性并在 checkusernameExists 函数中设置此属性

```
 Public Class Connection

   Public Property  Flag as Boolean 
   Public Sub checkusernameExists(ByVal username1 As String)

    // set flag here
     Flag = True // or whateever value returned from the database
   ' I try to access here `Label1.text` & `Label1.visible` to work on it but I can't.
   End Sub
End Class 
```

并在 page.aspx.vb 文件中访问此实例级属性

```
Dim x As New Connection
Protected Sub button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles button1.Click
x.checkusernameExists(TextBoxUsername.Text)
Label1.Visible= x.Flag;
' I try to access `Boolean variable` Flag from Class file but I can't.
End Sub 
```

# solr - 如何使用 apache solr 索引文本文件

> ID：15496255
> 
> 赞同：2
> 
> 时间：2013-03-19T09:57:03.363
> 
> 标签：solr, lucene, apache-tika

我想索引文本文件。经过大量搜索后，我了解了 Apache tika。现在在我研究 Apache tika 的一些站点中，我了解到 Apache tika 将文本转换为 XML 格式，然后将其发送到 solr。但是在转换它时只创建一个标签示例.......现在我希望索引的文本文件是一个 tomcat 本地主机访问文件。此文件以 GB 为单位。我无法存储它和单个索引。我希望每一行都有 line-id ....... 这样我就可以轻松检索匹配的行。

这可以在 Apache Tika 中完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:05:16.410

Solr with Tika 支持从多种文件格式中提取数据。
支持的文件格式的完整列表可以在@link[找到](http://tika.apache.org/1.3/formats.html)

您可以提供上述任何文件格式作为输入，Tika 将能够自动检测文件格式并从文件中提取文本并将其提供给 Solr 进行索引。

编辑：-
Tika 在将文本文件发送到 Solr 之前不会将其转换为 XML。Tika 将只提取文件的元数据和内容，并根据定义的映射填充 Solr 中的字段。

您要么必须将整个文件作为输入提供给 solr，这将作为单个文档进行索引，要么您必须逐行读取文件并将其作为单独的文档提供给 Solr。
Solr 和 Tika 不会为您处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:59:42.017

您可能希望查看[DataImportHandler](http://wiki.apache.org/solr/DataImportHandler)以将文件解析为行或条目。这比在已经有内部结构的东西上运行 Tika 更好。

# r - 来自多语言网站的 download.file()

> ID：15496256
> 
> 赞同：3
> 
> 时间：2013-03-19T09:57:09.070
> 
> 标签：r

当我导航至此页面 ( [http://hk.ishares.com/product_info/fund/overview/SEHK/2836.htm](http://hk.ishares.com/product_info/fund/overview/SEHK/2836.htm) ) 并单击“资产净值/指数历史”链接（在“市场信息”下）以下载 CSV文件，该文件的内容是英文的。但是，如果我尝试通过 R 使用以下命令执行相同操作，则内​​容为中文：

```
download.file("http://hk.ishares.com/product_info/fund/excel_histoverview.htm?ticker=2836", destfile="2836.csv")
a <- read.csv("2836.csv", skip = 5)
> head(a)
            日期 指數收市水平..HKD. 單位資產淨值 總派息.每股...HKD.
1 2013年03月18日          3666.9390      15.7774                  0
2 2013年03月15日          3701.3143      15.9145                  0
3 2013年03月14日          3709.7446      15.9484                  0
4 2013年03月13日          3668.3178      15.8762                  0
5 2013年03月12日          3707.0364      15.9726                  0
6 2013年03月11日          3716.4011      16.0521                  0 
```

大概是因为网站在我的浏览器中识别了一个 cookie 并向我提供了该文件的英文版本，但当我通过 R 时却没有。

有没有办法解决这个问题？将 CSV 文件转换为 XTS 给我带来了一些困难，因为我不知道如何将中文日期转换为 Date 对象。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T11:17:23.107

假设你安装了 httr 库，试试这个：

```
library(httr)

# Get cookies from English page
en_page <- GET("http://hk.ishares.com/product_info/fund/overview/SEHK/2836.htm?ls=true&l=en")

# Get the data
data <- GET("http://hk.ishares.com/product_info/fund/excel_histoverview.htm?ticker=2836",
        set_cookies(en_page$cookies[[1]]))

# Load into a data.frame
a <- read.csv(textConnection(content(data)), skip = 5)

head(a) 
```

基本上，我们从英文页面获取 cookie，然后用它们发送请求。

# android - 进程占用的内存显示在图形或列表中

> ID：15496263
> 
> 赞同：2
> 
> 时间：2013-03-19T09:57:32.703
> 
> 标签：android

我正在使用它来获取进程占用的内存，请帮助我，我想显示所有其他已安装应用程序占用的内存并希望在图表中显示

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ActivityManager activityManager = (ActivityManager) this
            .getSystemService(ACTIVITY_SERVICE);
    MemoryInfo memoryInfo = new ActivityManager.MemoryInfo();
    activityManager.getMemoryInfo(memoryInfo);

    Log.i("TAG", " memoryInfo.availMem " + memoryInfo.availMem + "\n");
    Log.i("TAG", " memoryInfo.lowMemory " + memoryInfo.lowMemory + "\n");
    Log.i("TAG", " memoryInfo.threshold " + memoryInfo.threshold + "\n");

    List<RunningAppProcessInfo> runningAppProcesses = activityManager
            .getRunningAppProcesses();

    Map<Integer, String> pidMap = new TreeMap<Integer, String>();
    for (RunningAppProcessInfo runningAppProcessInfo : runningAppProcesses) {
        pidMap.put(runningAppProcessInfo.pid,
                runningAppProcessInfo.processName);
    }

    Collection<Integer> keys = pidMap.keySet();

    for (int key : keys) {
        int pids[] = new int[1];
        pids[0] = key;
        android.os.Debug.MemoryInfo[] memoryInfoArray = activityManager
                .getProcessMemoryInfo(pids);
        for (android.os.Debug.MemoryInfo pidMemoryInfo : memoryInfoArray) {
            Log.i("TAG", String.format("** MEMINFO in pid %d [%s] **\n",
                    pids[0], pidMap.get(pids[0])));
            Log.i("TAG", " pidMemoryInfo.getTotalPrivateDirty(): "
                    + pidMemoryInfo.getTotalPrivateDirty() + "\n");
            Log.i("TAG",
                    " pidMemoryInfo.getTotalPss(): "
                            + pidMemoryInfo.getTotalPss() + "\n");
            Log.i("TAG", " pidMemoryInfo.getTotalSharedDirty(): "
                    + pidMemoryInfo.getTotalSharedDirty() + "\n");
        }
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:29:37.643

```
 for (android.os.Debug.MemoryInfo pidMemoryInfo : memoryInfoArray) {
        Log.i("TAG", String.format("** MEMINFO in pid %d [%s] **\n",
                pids[0], pidMap.get(pids[0])));
        Log.i("TAG", " pidMemoryInfo.getTotalPrivateDirty(): "
                + pidMemoryInfo.getTotalPrivateDirty() + "\n");
        Log.i("TAG",
                " pidMemoryInfo.getTotalPss(): "
                        + pidMemoryInfo.getTotalPss() + "\n");
        Log.i("TAG", " pidMemoryInfo.getTotalSharedDirty(): "
                + pidMemoryInfo.getTotalSharedDirty() + "\n");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:02:11.507

您可以使用[ChartDroid 之](https://code.google.com/p/chartdroid/wiki/Screenshots)类的框架。还有其他框架可用于绘制图表/图形 - [https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android](https://stackoverflow.com/questions/424752/any-good-graphing-packages-for-android)。

如果您想要针对此问题的现成解决方案，请查看[Norton Utilities](https://play.google.com/store/apps/details?id=com.symantec.monitor&feature=search_result)应用程序。

# ios - 应用归档是否有自动 Testflight 上传脚本？

> ID：15496266
> 
> 赞同：12
> 
> 时间：2013-03-19T09:57:39.793
> 
> 标签：ios, xcode, xcode4, testflight

我发现 Testflight 支持通过 API 调用上传应用程序`http://testflightapp.com/api/builds.format`。它接受应用程序包、dsyms、应用程序信息和其他。

所以我的问题是下一个：是否有任何用于 xcode 的自动脚本在“归档”操作后将构建上传到 Testflight 中？请分享链接。

**解决方案在这里（Mac OS X 10.8）：**

1) 按照[本手册](http://developmentseed.org/blog/2011/sep/02/automating-development-uploads-testflight-xcode/)设置执行后脚本

2）删除用下一条规则替换“回声”字符串：

```
#!/bin/bash
#
# (Above line comes out when placing in Xcode scheme)
#

API_TOKEN="<YOUR-TESTFLIGHT-API-TOKEN>"
TEAM_TOKEN="<YOUR-TESTFLIGHT-TEAM-TOKEN>"
SIGNING_IDENTITY="iPhone Developer"
PROVISIONING_PROFILE="${HOME}/Library/MobileDevice/Provisioning Profiles/<YOUR-PROFILE-NAME>.mobileprovision"
LOG="/tmp/testflight.log"
GROWL="/usr/bin/terminal-notifier -title Xcode -message"

DATE=$( /bin/date +"%Y-%m-%d" )
ARCHIVE=$( /bin/ls -t "${HOME}/Library/Developer/Xcode/Archives/${DATE}" | /usr/bin/grep xcarchive | /usr/bin/sed -n 1p )
DSYM="${HOME}/Library/Developer/Xcode/Archives/${DATE}/${ARCHIVE}/dSYMs/${PRODUCT_NAME}.app.dSYM"
APP="${HOME}/Library/Developer/Xcode/Archives/${DATE}/${ARCHIVE}/Products/Applications/${PRODUCT_NAME}.app"

#/usr/bin/open -a /Applications/Utilities/Console.app $LOG

#echo -n "Creating .ipa for ${PRODUCT_NAME}... " > $LOG
${GROWL} "Creating .ipa for ${PRODUCT_NAME}"

/bin/rm "/tmp/${PRODUCT_NAME}.ipa"
/usr/bin/xcrun -sdk iphoneos PackageApplication -v "${APP}" -o "/tmp/${PRODUCT_NAME}.ipa" --sign "${SIGNING_IDENTITY}" --embed "${PROVISIONING_PROFILE}"

#echo "done." >> $LOG
${GROWL} "Created .ipa for ${PRODUCT_NAME}"

#echo -n "Zipping .dSYM for ${PRODUCT_NAME}..." >> $LOG
${GROWL} "Zipping .dSYM for ${PRODUCT_NAME}"

/bin/rm "/tmp/${PRODUCT_NAME}.dSYM.zip"
/usr/bin/zip -r "/tmp/${PRODUCT_NAME}.dSYM.zip" "${DSYM}"

#echo "done." >> $LOG
${GROWL} "Created .dSYM for ${PRODUCT_NAME}"

#echo -n "Uploading to TestFlight... " >> $LOG
${GROWL} "Uploading to TestFlight"

/usr/bin/curl "http://testflightapp.com/api/builds.json" \
-F file=@"/tmp/${PRODUCT_NAME}.ipa" \
-F dsym=@"/tmp/${PRODUCT_NAME}.dSYM.zip" \
-F api_token="${API_TOKEN}" \
-F team_token="${TEAM_TOKEN}" \
-F notes="Build uploaded automatically from Xcode."

#echo "done." >> $LOG
${GROWL} "Uploaded to TestFlight"
/usr/bin/open "https://testflightapp.com/dashboard/builds/" 
```

3) 在查找器中显示配置文件：转到 Organazier/Devices/Provision 配置文件，然后在您的配置文件上右键，然后单击“在查找器中显示”。复制配置文件名称并粘贴到 PROVISIONING_PROFILE 变量而不是`<YOUR-PROFILE-NAME>`

4）打开终端并安装[终端通知器](https://github.com/julienXX/terminal-notifier)：

`sudo gem install terminal-notifier`

5) 你准备好了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T18:00:38.630

如果您想将其集成到 rake 任务中，我还为此创建了一个 ruby​​ gem：

`gem install testflight_upload`

源代码在[我的 github上](https://github.com/milesmatthias/testflight_upload)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T01:07:17.283

这是一组不错的实用程序[http://nomad-cli.com/](http://nomad-cli.com/)

我最终使用 Shenzen 来自动化构建和测试飞行部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:02:07.193

这是一个不错的教程..可能对您有用：

[http://developmentseed.org/blog/2011/sep/02/automating-development-uploads-testflight-xcode/](http://developmentseed.org/blog/2011/sep/02/automating-development-uploads-testflight-xcode/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-19T17:02:39.077

深圳已经停产，可以用[pilot](https://github.com/fastlane/pilot)代替。这是一个基于 Ruby 的工具，用于上传新版本和管理您的 beta 测试人员。在引擎盖下它使用 iTunes Transporter 和[spaceship](https://spaceship.airforce)。

# c - GNU 链接器和架构 i386

> ID：15496268
> 
> 赞同：0
> 
> 时间：2013-03-19T09:57:52.410
> 
> 标签：c, macos, assembly, ld, i386

**所以我在 OS X 上运行**，我想链接两个 Mach-O 对象 i386。

第一个是从 NASM 生成的（它是一个汇编文件）

```
nasm -f macho -o kernel.o kernel.asm 
```

第二个是从 GCC 生成的

```
gcc -c -arch i386 screen.c 
```

但是当我尝试链接它们时......

```
ld -o myprogram screen.o kernel.o 
```

...我收到此错误：

```
Undefined symbols for architecture i386:
  "print", referenced from:
      start in kernel.o
ld: symbol(s) not found for inferred architecture i386 
```

我不明白为什么，因为我的两个文件是`Mach-O object i386`：

```
$ file screen.o
screen.o: Mach-O object i386
$ file kernel.o
kernel.o: Mach-O object i386 
```

* * *

如果你需要它，这里是**kernel.asm**：

```
[BITS 32]
EXTERN print
GLOBAL start

start:
    mov  eax, msg
    push eax
    call print
    pop  eax

end:
    jmp end

msg  db 'Hello world!', 10, 0 
```

这是**screen.c**：

```
void putcar(uchar c)
{
    /* Some code here */
}

void print(char *string)
{
        while(*string != 0){
                putcar(*string);
                string++;
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:00:53.850

您需要`_print`在 asm 文件中使用该符号，即

```
start:
    mov  eax, msg
    push eax
    call _print
    pop  eax 
```

这是因为 C 函数名称在编译时带有前导下划线。

# java - 如何使用 OpenIMAJ 识别新面孔

> ID：15496269
> 
> 赞同：2
> 
> 时间：2013-03-19T09:57:58.383
> 
> 标签：java, face-recognition, openimaj

我在我的 Java 应用程序的另一个线程上收到了 JPG 图像的实时流，我想不断扫描面部，以便稍后输出在相机运行时通过相机的所有不同面部的列表，以及有多少每张脸被看到的次数。这是我当前的代码：

```
void doImageProcessing() {

    // Create face stuff
    FKEFaceDetector faceDetector = new FKEFaceDetector(new HaarCascadeDetector());
    EigenFaceRecogniser<KEDetectedFace, Person> faceRecognizer = EigenFaceRecogniser.create(512, new RotateScaleAligner(), 512, DoubleFVComparison.CORRELATION, Float.MAX_VALUE);
    FaceRecognitionEngine<KEDetectedFace, Extractor<KEDetectedFace>, Person> faceEngine = FaceRecognitionEngine.create(faceDetector, faceRecognizer);

    // Start loop
    while (true) {

        // Get next frame
        byte[] imgData = nextProcessingData;
        nextProcessingData = null;

        // Decode image
        BufferedImage img = ImageIO.read(new ByteArrayInputStream(imgData));

        // Detect faces
        FImage fimg = ImageUtilities.createFImage(img);
        List<KEDetectedFace> faces = faceEngine.getDetector().detectFaces(fimg);

        // Go through detected faces
        for (KEDetectedFace face : faces) {

            // Find existing person for this face
            Person person = null;
            try {

                List<IndependentPair<KEDetectedFace, ScoredAnnotation<Person>>> rfaces = faceEngine.recogniseBest(face.getFacePatch());
                ScoredAnnotation<Person> score = rfaces.get(0).getSecondObject();
                if (score != null)
                    person = score.annotation;

            } catch (Exception e) {
            }

            // If not found, create
            if (person == null) {

                // Create person
                person = new Person();
                System.out.println("Identified new person: " + person.getIdentifier());

                // Train engine to recognize this new person
                faceEngine.train(person, face.getFacePatch());

            } else {

                // This person has been detected before
                System.out.println("Identified existing person: " + person.getIdentifier());

            }

        }

    }

} 
```

问题是它总是将一张脸检测为新的，即使它是在前一帧中检测到的同一张脸。`rfaces`总是空的。它永远无法识别现有的面孔。我究竟做错了什么？

另外，我不知道[`EigenFaceRecognizer`](http://www.openimaj.org/openimaj-image/faces/apidocs/org/openimaj/image/processing/face/recognition/EigenFaceRecogniser.html#create%28int%2C%20org.openimaj.image.processing.face.alignment.FaceAligner%2C%20int%2C%20org.openimaj.feature.DoubleFVComparison%2C%20float%29)创建者函数的参数应该是什么，也许这就是它无法识别任何东西的原因......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T13:16:20.110

您为该`EigenFaceRecogniser.create()`函数提供的参数很遥远，因此这可能是您的问题的可能原因。以下更有可能奏效：

```
EigenFaceRecogniser<KEDetectedFace, Person> faceRecognizer = EigenFaceRecogniser.create(20, new RotateScaleAligner(), 1, DoubleFVComparison.CORRELATION, 0.9f); 
```

**解释：**

*   第一个参数是EigenFace算法中的主成分个数；确切的值通常是通过实验确定的，但大约 20 左右可能就可以了。

*   第三个参数是用于 KNN 分类器的最近邻的数量。1个最近邻居应该没问题。

*   最后一个参数是分类器的距离阈值。相关性比较返回相似性度量（高值意味着更相似），因此给定的阈值是必须超过的下限。由于我们设置了 1 个最近邻，那么最相似的人脸与查询人脸的距离必须大于 0.9。*请注意，0.9 的值只是一个猜测；为了优化识别器的性能，您需要使用它。*

另一个小点 - 而不是：

```
 BufferedImage img = ImageIO.read(new ByteArrayInputStream(imgData));
    FImage fimg = ImageUtilities.createFImage(img); 
```

通常最好让 OpenIMAJ 读取您的图像，因为它可以解决 ImageIO 处理某些类型的 JPEG 的一些已知问题：

```
 FImage fimg = ImageUtilities.readF(new ByteArrayInputStream(imgData)); 
```

# grails - 如何重用ckeditor grails插件的文件选择器？

> ID：15496276
> 
> 赞同：0
> 
> 时间：2013-03-19T09:58:18.577
> 
> 标签：grails, plugins, ckeditor, file-browser

我正在使用 grails 的 ckeditor 插件（：ckeditor:3.6.2.2），我想重用用于在富文本编辑器中选择图像的文件选择器。我想以一种形式使用它来选择图像。

插件文档让我假设这是可能的：“如果您只需要文件浏览器的链接，则有一个 fileBrowserLink 标记：

```
<a href="${ckeditor:fileBrowserLink(type:'Image', userSpace:'userone')}">Open file browser</a> 
```

如果您想在文件浏览器中取回所选项目的路径，只需在包含打开链接的页面中定义一个名为 ckeditorFileBrowserItemSelected 的 JavaScript 函数。

```
<script type="text/javascript" charset="utf-8">
function ckeditorFileBrowserItemSelected(path) {
    // do whatever you want with path
    alert(path);
}
</script>" 
```

[http://stefanogualdi.github.com/grails-ckeditor/docs/ref/Tags/fileBrowser.html](http://stefanogualdi.github.com/grails-ckeditor/docs/ref/Tags/fileBrowser.html)

不幸的是，我没有让它工作。如果我使用上述方法创建链接，则会出现异常：

```
errors.GrailsExceptionResolver MissingMethodException occurred when processing request: [GET] /Admin/courseTemplate/create
No signature of method: Users_antonepple_NetBeansProjects_Eppleton_Relaunch_Admin_grails_app_views_courseTemplate_create_gsp.fileBrowserLink() is applicable for argument types: (java.util.LinkedHashMap) values: [[type:Image, userSpace:userone]]. 
```

我也尝试使用这样的 fileBrowser 标签：

```
 <ckeditor:fileBrowser type="Image" userSpace="userone">Open file browser</ckeditor:fileBrowser> 
```

结果，文件管理器打开而不是我正在寻找的 FileChooser。文件管理器不允许选择图像。

我做错了什么，我能做些什么来重用文件选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:12:42.930

好的，我想出了怎么做。该文档有一个错字而不是这个：

```
<a href="${ckeditor:fileBrowserLink(type:'Image', userSpace:'userone')}">Open file browser</a> 
```

它应该是：

```
<a href="${ckeditor.fileBrowserLink(type:'Image', userSpace:'userone')}">Open file browser</a> 
```

高级 grails 用户可能会更早发现这一点 :-)。第二个问题是，无法在文件管理器中选择图像。但是，一旦 FileManager 在单独的窗口中打开，它就会在文件上下文菜单中有一个额外的操作，允许我选择一个图像。所以我只需要：

```
<a href="${ckeditor.fileBrowserLink(type:'Image', userSpace:'userone')}"  target="_blank">Open file browser</a> 
```

...或在对话框中打开 fileBrowser，此操作变为可用...

# android - HttpURLConnection 抛出异常

> ID：15496278
> 
> 赞同：14
> 
> 时间：2013-03-19T09:58:20.270
> 
> 标签：android, httpurlconnection

这是我的连接代码`HTTP`。

```
URL url = new URL("http://www.google.com");
              HttpURLConnection con = (HttpURLConnection) url.openConnection();
              con.setDoOutput(true);
              String responseMsg = con.getResponseMessage();
              int response = con.getResponseCode(); 
```

这是扔`android.os.NetworkOnMainThreadException`

请帮忙。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-19T09:59:43.200

android.os.NetworkOnMainThreadException 发生是因为您正在主 UI 线程上进行网络调用。而是使用异步任务。

异步任务的文档。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。

在你的 UI 线程中调用 AsyncTask。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new MyDownloadTask().execute();

}

class MyDownloadTask extends AsyncTask<Void,Void,Void>
{

    protected void onPreExecute() {
      //display progress dialog.

 }
    protected Long doInBackground(Void... params) {
          URL url = new URL("http://www.google.com");
          HttpURLConnection con = (HttpURLConnection) url.openConnection();
          con.setDoOutput(true);
          String responseMsg = con.getResponseMessage();
          int response = con.getResponseCode();
     return null;
 }

 protected void onPostExecute(VOid result) {
   // dismiss progress dialog and update ui
 }
} 
```

**注意**：AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。AsyncTasks 最好用于短时间的操作（最多几秒钟）。如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

robospice 中 asynctask 的替代方案。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

robospice 的一些特性。

1\. 异步执行（在后台 AndroidService 中）网络请求（例如：使用 Spring Android 的 REST 请求）。

2.强类型！您使用 POJO 提出请求，并获得 POJO 作为请求结果。

3\. 对用于请求的 POJO 和您在项目中使用的 Activity 类均不实施任何限制。

4.caches 结果（在 Json 中同时包含 Jackson 和 Gson，或 Xml，或纯文本文件，或二进制文件，甚至使用 ORM Lite）。

5.当且仅当它们仍然存在时，通知您的活动（或任何其他上下文）网络请求的结果

6\. 完全没有内存泄漏，就像 Android Loaders 一样，不像 Android AsyncTasks 在他们的 UI 线程上通知你的活动。

7.使用简单但健壮的异常处理模型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T09:59:55.737

**NetworkOnMainThreadException**：当应用程序尝试在其主线程上执行网络操作时引发的异常。

您应该在 asynctask 上调用 sendfeedback 方法，然后只有上面的代码才能工作。由于网络服务器需要大量时间来响应主线程变得无响应。为避免它，您应该在另一个线程上调用它。因此 asynctask 更好。

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

# ios - 代表的指派被违背意愿释放

> ID：15496287
> 
> 赞同：-1
> 
> 时间：2013-03-19T09:58:44.177
> 
> 标签：ios, objective-c, cocoa-touch, delegates, uitextfield

我正在尝试实现一种简单的方法来格式化`UITextField`为具有某种特定格式的货币字段`UIKeyboardType`。对于格式，我分配了一个代表并让它处理它。

我的 .h 文件包含：`@interface UITextField (Currency)`... `@interface CurrencyTextFieldDelegate <UITextFieldDelegate>`，我的 .m 文件打印在下面。

我希望能够做一个`UITextField *textField = [...]; [textField formatAsCurrency];`. 数字键盘显示正确，但从不调用 shouldChangeCharactersInRange。

我的猜测是，一旦执行 formatAsCurrency，代表就会被释放？我不知道。有什么想法吗？

```
#import "CurrencyTextFieldDelegate.h"

@implementation UITextField (Currency)

- (void)formatAsCurrency {
    CurrencyTextFieldDelegate *delegateViewController = [[CurrencyTextFieldDelegate alloc] init];
    self.delegate = delegateViewController;
    self.keyboardType = UIKeyboardTypeNumberPad;
}

@end

@implementation CurrencyTextFieldDelegate

@synthesize storedAmount = _storedAmount;

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    NSLog(@"shouldChangeCharactersInRange");
    // magic happens
    return NO;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:10:51.880

我想让在不同的 ViewController 上创建多个以相同方式解释的字段变得容易。我扩展`UITextField`了一个`parseCurrencyField`-方法，将键盘设置为小键盘，其他一些东西，最重要的是设置委托。

我对这个问题的问题是如何让代理保持活力，我的解决方案只是在我的 AppDelegate 中定义它。

现在我可以`UITextField`在我的应用程序中的任何地方执行 a `[textField parseCurrencyTextField]`，它会...被解析为货币字段:)

就那么简单。

# eclipse - Eclipse XUL：即使在编辑源代码后内容也没有更新

> ID：15496289
> 
> 赞同：0
> 
> 时间：2013-03-19T09:58:47.357
> 
> 标签：eclipse, xul, xulrunner

我在 Eclipse 中使用 xul 第一次创建 xul 文件时，它可以正常工作；但是如果我更改源文件的内容，则更改不会反映在输出中。如果我运行 xul 文件，它会提供与之前相同的输出，则不会反映更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:34:10.457

它可能正在被缓存。

[尝试在prefs.js](https://developer.mozilla.org/en-US/docs/Getting_started_with_XULRunner#Step_6%3a_Set_up_preferences)`about:config`中或中使用以下选项：

*   `nglayout.debug.disable_xul_fastload`（尝试`true`）
*   `nglayout.debug.disable_xul_cache`（尝试`true`）
*   `browser.cache.disk.enable`（尝试`false`）

也尝试使用命令行选项启动 Firefox/XULRunner`-purgecaches`

[设置扩展开发环境](https://developer.mozilla.org/en/docs/Setting_up_extension_development_environment)更详细地解释了这些选项。

您应该出于开发目的更改这些选项...

# mysql - SQL 1=1 子句的解释

> ID：15496293
> 
> 赞同：2
> 
> 时间：2013-03-19T09:58:51.190
> 
> 标签：mysql, sql, plsql

在许多 SQL 示例中，在复制没有数据的表结构时，我们看到了 AND 1 = 1 子句的使用。这个 1=1 到底是什么，在 SQL 或任何其他 DBMS 中是否还有其他类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:00:45.347

它是一种 SQL 语言结构，其计算结果始终为真（因为 1 始终等于 1）。它主要用于生成动态 SQL 查询以方便开发人员。

# iphone - 在ios中使用GCD同时运行两个api

> ID：15496304
> 
> 赞同：0
> 
> 时间：2013-03-19T09:59:27.657
> 
> 标签：iphone, ios6, grand-central-dispatch, speech-to-text

我正在研究需要将语音转换为文本的无线电应用程序。为此，我正在使用第三方 api。为了获得更好的结果，我想同时运行两个 api 并比较输出。这应该在用户单击记录按钮时发生。

我知道我们可以使用 GCD 做到这一点，但不知道如何实现这一点。

需要建议。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:59:52.527

简短的回答是您创建了两个 GCD 队列，一个用于每个 Speech-to-Text 任务。在每个块中，您使用相同的输入数据调用两个不同的 API。然后你要么等待结果，要么让块在完成时调用回调状态方法。

请注意，您需要确保语音引擎可以安全地在后台线程上运行。

如果您想先录制音频，然后将数据提交给两个不同的引擎进行处理，这相当简单。但听起来您可能想在用户单击记录后立即开始处理音频？在这种情况下，它在很大程度上取决于 API 以如何实时向它们提供数据。您可能只想明确地在单独的线程上运行它们，并在数据进入时为它们提供数据。

# android - UriMatcher 与 ContentProvider Android 中的 uri 不匹配

> ID：15496305
> 
> 赞同：0
> 
> 时间：2013-03-19T09:59:29.767
> 
> 标签：android, android-contentprovider

我正在实施我的第一个内容提供者。尝试检索某些内容时卡住了。似乎 UriMatcher 无法匹配我通过的 uri。

这是 MyContentProvider 类：

```
 public class MyContentProvider extends ContentProvider {

private DataBaseHelper database;

static final String TAG = "CONTENT";
 // Used for the UriMacher
public static final int ALL = 10;

  public static final String AUTHORITY = "my.provider";

  private static final String BASE_PATH = "resources";
  public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY
      + "/" + BASE_PATH);

  public static final String CONTENT_TYPE = ContentResolver.CURSOR_DIR_BASE_TYPE
      + "/all";
  public static final String CONTENT_ITEM_TYPE = ContentResolver.CURSOR_ITEM_BASE_TYPE
      + "/one";

  private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
  static {
    sURIMatcher.addURI(AUTHORITY, BASE_PATH , ALL);

  }

@Override
public boolean onCreate() {
  database = new DataBaseHelper(getContext());

return true;
}
@Override
public String getType(Uri uri) {
String ret = getContext().getContentResolver().getType(CONTENT_URI);
Log.i(TAG, "getType returning: " + ret);
return ret;
}

@Override
public Cursor query(Uri uri, String[] projection, String selection,
String[] selectionArgs, String sortOrder) {
    // Uisng SQLiteQueryBuilder instead of query() method
    SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

    // Set the table
    queryBuilder.setTables(DataBaseHelper.MYTABLE);

    int uriType = sURIMatcher.match(uri);
    switch (uriType) {
    case ALL:
      break;

    default:
          // THIS LINE THROWS EXCEPTION!!
      throw new IllegalArgumentException("Unknown URI: " + uri);
    }

    SQLiteDatabase db = database.getWritableDatabase();
    Cursor cursor = queryBuilder.query(db, projection, selection,
        selectionArgs, null, null, sortOrder);
    // Make sure that potential listeners are getting notified
    cursor.setNotificationUri(getContext().getContentResolver(), uri);

    return cursor;
}

   } 
```

这是我在查询 MyContentProvider 时使用的代码

```
 Uri.Builder builder = new Uri.Builder();
      builder.scheme ("content");
      builder.authority(MyContentProvider.AUTHORITY);

      //builder.path (inURI.getPath ());
      builder.path("resources");
      builder.appendPath(""+MyContentProvider.ALL);

      Uri uri = builder.build();

      Cursor cursor = getContentResolver().query(uri, null, null, null,
                null); 
```

在这里我的logcat：

```
03-19 10:43:49.204: E/AndroidRuntime(12430): FATAL EXCEPTION: main
03-19 10:43:49.204: E/AndroidRuntime(12430): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.package/my.package.MainActivity}: java.lang.IllegalArgumentException: Unknown URI: content://falcofinder.android.memorapp/resources/10
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.os.Looper.loop(Looper.java:130)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.ActivityThread.main(ActivityThread.java:3835)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at java.lang.reflect.Method.invokeNative(Native Method)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at java.lang.reflect.Method.invoke(Method.java:507)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at dalvik.system.NativeStart.main(Native Method)
03-19 10:43:49.204: E/AndroidRuntime(12430): Caused by: java.lang.IllegalArgumentException: Unknown URI: content://my.provider/resources/10
03-19 10:43:49.204: E/AndroidRuntime(12430):    at my.package.MyContentProvider.query(MyContentProvider.java:95)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.content.ContentProvider$Transport.query(ContentProvider.java:187)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.content.ContentResolver.query(ContentResolver.java:271)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at my.package.MainActivity.onCreate(MainActivity.java:95)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-19 10:43:49.204: E/AndroidRuntime(12430):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
03-19 10:43:49.204: E/AndroidRuntime(12430):    ... 11 more 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:22:54.573

好的。我自己回答。检索内容的代码应该是这样的。

```
 Uri.Builder builder = new Uri.Builder();
  builder.scheme ("content");
  builder.authority(MyContentProvider.AUTHORITY);

  //builder.path (inURI.getPath ());
  builder.path("resources");
      Uri uri = builder.build();

  Cursor cursor = getContentResolver().query(uri, null, null, null,
            null); 
```

我的问题是我不明白 addURI 的第三个参数是什么。

# alignment - EPPlus 命名样式 Horizo ntalAlignment

> ID：15496307
> 
> 赞同：6
> 
> 时间：2013-03-19T09:59:41.360
> 
> 标签：alignment, epplus

我在实现以下代码时遇到问题：

```
var newNamedStyle=_workbook.Styles.CreateNamedStyle("testStyle");     
newNamedStyle.Style.HorizontalAlignment=ExcelHorizontalAlignment.Center; 
newNamedStyle.Style.Font.Size=15; 
```

但 EPPlus 似乎无法正确捕获水平对齐。

这可能是 EPPlus 的错误吗？

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-17T15:16:15.920

我能够像这样使用 EPPlus (3.1.3) 将单元格水平居中。

```
 xlWorkSheet.Cells["A1"].Style.HorizontalAlignment = OfficeOpenXml.Style.ExcelHorizontalAlignment.Center; 
```

# c# - 如何在windows 8的xaml页面中定义用户控件，并在同一页面中重用？

> ID：15496310
> 
> 赞同：0
> 
> 时间：2013-03-19T09:59:51.417
> 
> 标签：c#, xaml, windows-8

我想使用用户控件（一组 TextBlock 和 Combobox）。我想要它的 3 个实例在同一个页面中。那么如何在同一页面的 xaml 中定义这样的用户控件呢？需要使用页面资源吗？还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:51:00.803

在 Visual Studio 中，您可以通过转到 Project --> Add New Item 并选择 User Control 来定义 UserControls。在那里定义它之后，您可以在要使用它的页面的 XAML 中添加对它的引用。您可以通过将以下内容添加到页面的根标记来执行此操作。

```
<common:LayoutAwarePage
    ...
    xmlns:CustomControlName="using:CustomControlNamespace"
    ...> 
```

如果您必须在同一个 XAML 文档中执行此操作，我想您可以在页面资源中定义控件

```
<Page.Resources>

    <UserControl x:Name="CustomControl">
       ...
    </UserControl>

</Page.Resources> 
```

就我个人而言，我会在单独的文件中定义一个 UserControl。它将事物分开，Visual Studio 还为您提供了一些基础知识。

# php - 如何防止登录用户删除其他用户的帖子？

> ID：15496314
> 
> 赞同：1
> 
> 时间：2013-03-19T09:59:59.677
> 
> 标签：php, html, sql

我有一个问题，我不能阻止登录用户删除其他用户的帖子吗？现在在我的代码中，我可以删除所有用户的帖子，但我希望只能删除我的帖子（登录的用户帖子）。有人可以在正确的方向上帮助我如何做到这一点吗？

```
<div class="deletebtn"><a href="../delete/delete.php?id=' . $row['id'] . '"class=\"icon-2 info-tooltip\">Delete post</a></div>

$id=$_GET['id'];

$sql="DELETE FROM shouts WHERE id='$id'";
$result=mysql_query($sql);

if($result)
{
    echo('<div class="deletedpost">You have deleted a post. <a href="../pages/content.php">Tillbaka till Bloggen</a></div>');
}
else 
{
    echo "Something went wrong";
}
mysql_close(); 
```

我在一个文件中使用 href，链接到另一个使用 Sql 代码的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:03:12.320

你可以通过 `session`

检查用户是否登录。如果登录则删除帖子

```
if(isset($_SESSION['user']))
{
    //delete post
} 
```

存储`userId`在您的表中并像这样更新您的删除查询......

```
$sql="DELETE FROM shouts WHERE id='$id' and userId = '$_SESSION[user]'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:02:00.123

在删除之前检查登录用户是否是特定帖子的所有者。

使用帖子 ID 和所有者 ID 编写一个选择查询。如果返回 true，则允许他删除帖子，否则不允许。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:02:09.150

你没有 $_SESSION['id'] 之类的吗？而且您确实在喊叫表中关联了该用户 ID，所以您知道谁在喊叫，对吗？

`DELETE FROM shouts WHERE id='$id' AND user_id='$_SESSION['id']'`

不过，您应该处理输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:02:48.710

使用这种查询，这里它只会删除登录用户的帖子。

```
$sql="DELETE FROM shouts WHERE id='$id' and user_id = '$loggedin_session_id'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T11:44:47.540

我建议在用户注册时，为他们分配一个唯一的 ID（或让数据库自动递增）并将其保存在数据库中。然后，每当他们登录时，您都可以从数据库中提取该 user_id 并将其存储在会话变量中。创建呼喊时，您将创建呼喊的人的用户 ID 与呼喊本身一起存储在数据库的呼喊表中。当用户尝试删除喊叫时，您首先检查以确保该喊叫属于他们，然后才允许他们删除它。

一个例子：

```
<?php

//when user logs in
$email = 'example@example.com';
$password = 'default';
$sql = "SELECT id FROM user_table WHERE email = '$email' AND password = '$password'";
$result = mysql_query($sql);
$row = mysql_fetch_row($result);
$_SESSION['user_id'] = $row['id'] //'id' is the user's id; assign it to the session variable

//user creates the shout
$user_id = $_SESSION['user_id']; //get the user_id from the logged-in user
$shout = $_POST['shout'];
$sql = "INSERT INTO shout_table (user_id, shout) VALUES ('$user_id','$shout')"; //store user id alongside the shout for future queries
mysql_query($sql);

//user about to delete the shout
$id = $_GET['id'];
$user_id = $_SESSION['user_id'];
//the sql to check in the shout_table to see if the shout they are deleting belongs to them
$sql = "SELECT * FROM shout_table WHERE user_id = '$user_id' AND id = '$id'";
$result = mysql_query($sql);
$row = mysql_fetch_row($result);

if ($row)
{
    //everything is alright; this user can delete the shout, so prepare the DELETE query to do so
}
else
{
    //the user is not allowed to delete the shout because it's not theirs; tell them so with an echo or whatever you're using for error handling
}

?> 
```

上面的示例充斥着 SQL 注入。当然，验证和消毒。同样，**从 PHP 5.5 起 mysql_query 函数将被弃用**，因此请掌握使用[mysqli_query 函数](http://www.php.net/manual/en/book.mysqli.php)的窍门。更好的是，看看你是否可以使用[PDO](http://www.php.net/manual/en/ref.pdo-mysql.php)。:)

# javascript - 如何使用javascript设置div标签的高度和宽度？

> ID：15496316
> 
> 赞同：0
> 
> 时间：2013-03-19T10:00:05.587
> 
> 标签：javascript, html, jsp, height, width

如何设置`div`使用 JavaScript 的宽度和高度？

这是我的代码

```
<%@page import="org.json.JSONObject"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>View JSON</title>
<script type="text/javascript">
var rect1='{"minX": 0.0,"minY": 0.0,"maxX": 2460.0,"maxY": 3008.0}';
var rectangle = JSON.parse(rect1);
var maxx=rectangle.maxX;
var maxy=rectangle.maxY;

***What should i do here?***

</script>
</head>
<body>
<h5>JSON View</h5>
<div id="set">
</div>
</body>
</html> 
```

我想将 div 的宽度`maxx`和高度设置为`maxy`值。我还想将其边框设置为，`1px`以便我可以查看它是否正常工作。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:09:57.087

你需要使用

```
document.getElementById('set').style.width = maxX + "px"; 
```

和

```
document.getElementById('set').style.height = maxY + "px"; 
```

此外，您可能需要确保在脚本运行之前加载文档，否则可能尚未创建 set div。您在 window.onload 中以箔纸的形式执行此操作：

```
window.onload = function ()
{
  Javascript code goes here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:03:25.787

你会利用元素的`style`：

```
document.getElementById('set').style.width = maxx + "px";
document.getElementById('set').style.height = maxy + "px";
document.getElementById('set').style.border = "1px solid #000"; 
```

[JSFiddle 示例](http://jsfiddle.net/X5k2Q/)。

作为一个固定值，在这种情况下，仅使用 CSS 可能会更好地控制边框。

```
div#set {
    border:1px solid #000;
} 
```

# wpf - 如果模型在 WPF 客户端应用程序的单独项目中，如何在视图模型和模型之间进行通信？

> ID：15496328
> 
> 赞同：1
> 
> 时间：2013-03-19T10:00:31.453
> 
> 标签：wpf, mvvm

我是 WPF 和实体框架的新手。我计划在 WPF 客户端应用程序和模型实体框架中遵循 MVVM 模式。出于安全原因，我不想在客户端应用程序中包含实体框架引用。我在这方面有以下查询。

在上述情况下，哪个是视图模型和模型之间通信的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:45:54.893

好吧，如果您真的想很难分离应用程序层，您可以创建一个`WCF Service`，它从数据源加载实体并将其传递给客户端。

`WCF Service` [您可以在此处](http://msdn.microsoft.com/en-us/library/ms734712.aspx)找到有关创建的一些信息。有关使用此类服务​​的信息，您应该查看[此处](http://www.devproconnections.com/article/net-framework2/How-to-Consume-a-WCF-Service-Using-WPF-124992)。但是你会在万维网找到很多文章。

# c++ - 库（.tlb）文件中宏的范围？

> ID：15496329
> 
> 赞同：1
> 
> 时间：2013-03-19T10:00:32.390
> 
> 标签：c++, macros, typelib

假设我们在 .cpp 文件中定义了一个宏“HELLO”，并且我们已经用它构建了一个 .tlb 文件。当我在另一个 c++ 项目中导入这个 .tlb 文件时，我可以访问那个宏吗？

默认情况下，如果在 .c 文件中定义了宏，则范围在该文件内。如果宏是在 .h 文件中定义的，那么包含它的每个人都可以访问该宏。只是想知道即使通过 .tlb 文件行为是否相同.../

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:02:30.343

类型库只存储类型信息（接口和类声明、typedef、其他元数据），而不是代码。代码的实现在各自的库 (DLL) 或服务器 (EXE) 中定义。这意味着的类型库只是告诉客户*在哪里*可以找到代码。他们不提供代码。这就是为什么不能将宏导出到 tlb 的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:53:52.403

正如 Aschratt 所说，宏不存储在类型库中。但是，如果您的宏是整数常量，您可以在 IDL 文件中使用枚举：

```
enum Colors
{
    White = 1,
    Yellow = 2,
    BLue = 3
} 
```

这适用于所有语言。例如，如果您使用 C# 中的类型库，您会将枚举视为 C# 枚举。

如果类型库仅供特定 C++ 客户端使用，您可以使用[cpp_quote](http://msdn.microsoft.com/en-us/library/aa366765%28v=vs.80%29.aspx) IDL 属性在生成的标头中发出代码，然后使用 #include 指令包含该标头，而不是使用 #import 生成基于类型库的新标头。

# php - WP 21 导航显示

> ID：15496330
> 
> 赞同：3
> 
> 时间：2013-03-19T10:00:37.583
> 
> 标签：php, html, wordpress, css

如何使默认的 212 *Wordpress*主题中的子导航链接显示在包装器/容器上？

![在此处输入图像描述](../Images/976ca6ba1ff5c452e6ce83176e1d5e4f.png)

**header.php：**

```
<nav id="site-navigation" class="main-navigation" role="navigation">
    <h3 class="menu-toggle"><?php _e( 'Menu', 'twentytwelve' ); ?></h3>
        <a class="assistive-text" href="#content" title="<?php esc_attr_e( 'Skip to content', 'twentytwelve' ); ?>"><?php _e( 'Skip to content', 'twentytwelve' ); ?></a>
        <?php wp_nav_menu( array( 'theme_location' => 'primary', 'menu_class' => 'nav-menu' ) ); ?>
</nav> 
```

**样式.css：**

```
.site-content nav {
    clear: both;
    overflow: hidden;
}
.main-navigation .assistive-text:hover,
.main-navigation .assistive-text:active,
.main-navigation .assistive-text:focus {
    background: #fff;
    border: 2px solid #333;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    -o-border-radius: 3px;
    -ms-border-radius: 3px;
    border-radius: 3px;
    clip: auto !important;
    color: #000;
    display: block;
    font-size: 12px;
    padding: 12px;
    position: absolute;
    top: 5px;
    left: 5px;
    z-index: 100000; /* Above WP toolbar */
}

.main-navigation {
    text-align: center;
    clear: both;
}
.main-navigation li {
    font-size: 12px;
    font-size: 0.8571428571rem;
}
.main-navigation a {color: #5e5e5e;}
.main-navigation a:hover {color: #21759b;}
.main-navigation ul.nav-menu,
.main-navigation div.nav-menu > ul {display: none;}

.main-navigation ul.nav-menu.toggled-on,
.menu-toggle {display: inline-block;}
.menu-toggle {
    margin: 16px 0;
    margin: 1.1428571429rem 0;
}

.main-navigation ul.nav-menu.toggled-on li {margin-bottom: 16px;}

@media screen and (min-width: 600px) {
.main-navigation ul.nav-menu,
    .main-navigation div.nav-menu > ul {                    
        display: inline-block !important;
        text-align: center; 
        width: 100%;                    
    }

.main-navigation ul {text-indent: 0;}
.main-navigation li a,
.main-navigation li {
    display: inline-block;
    text-decoration: none;
    margin: 0 16px; 
    margin: 0 1.1428571429rem;  
}
.main-navigation li a {
    border-bottom: 0;
    color: #6a6a6a;
    padding: 12px 0;
    text-transform: uppercase;
    white-space: nowrap;
}
.main-navigation li a:hover {color: #89CBBF;}
.main-navigation li { 
    position: relative;
    margin: 0;
}

.main-navigation li:hover {background: #ededed;}

.main-navigation li ul {
    display: none;
    margin: 0;
    padding: 0;
    position: absolute;
    top: 100%;
    z-index: 1;
}
.main-navigation li ul ul {
    top: 0;
    left: 100%;
}
.main-navigation ul li:hover > ul {
    border-left: 0;
    display: block;
}
.main-navigation li ul li a {
    background: #efefef;
    border-bottom: 1px solid #ededed;
    display: block;
    font-size: 11px;
    font-size: 0.7857142857rem;
    min-width: 180px;
    min-width: 12.857142857rem;
    white-space: normal;
    margin: 0;

    padding: 12px 5px;

    -moz-hyphens: auto; 
    -o-hyphens: auto; 
    -ms-word-break: break-all;
    -webkit-hyphens: auto;
    hyphens: auto;
    word-break: break-all;
    word-wrap: break-word;
}
.main-navigation li ul li a:hover {
    background: #e3e3e3;        
    color: #89CBBF;
}
.main-navigation .current-menu-item > a,
.main-navigation .current-menu-ancestor > a,
.main-navigation .current_page_item > a,
.main-navigation .current_page_ancestor > a {
    color: #89CBBF;
    font-weight: bold;
}

.menu-toggle {display: none;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:24:58.787

我认为您应该尝试删除溢出：从 .site 隐藏

# java - 按升序对字母数字数组列表进行排序

> ID：15496331
> 
> 赞同：1
> 
> 时间：2013-03-19T10:00:39.863
> 
> 标签：java, collections

如何对具有类似元素的arraylist进行排序

```
02112-S1530   
02112-S1529  
02112-S1531 
```

按升序排列。

我正在使用 Collection.sort（列表名称）；
但得到输出

```
02112-S1531  
02112-S1529   
02112-S1530 
```

预期输出为：

```
02112-S1529  
02112-S1530   
02112-S1531 
```

我喜欢

```
List<String> gbosIdsList = new ArrayList<String>();
gbosIdsList.add("02112-S1530");
gbosIdsList.add("02112-S1529");
gbosIdsList.add("02112-S1531");
Collections.sort(gbosIdsList);
Iterator itr = gbosIdsList.iterator();
  while(itr.hasNext()){
      System.out.println(itr.next());           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:04:02.403

我尝试了您的代码并得到了输出：

```
02112-S1529
02112-S1530
02112-S1531 
```

此外，您已经使您的迭代器通用

**泛型 101：** `don't use Raw type in new code`

```
Iterator<String> itr = gbosIdsList.iterator(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:12:52.897

像这样定义一个比较器

```
public class MyComparator implements Comparator<String> {

    /* (non-Javadoc)
     * @see java.util.Comparator#compare(java.lang.Object, java.lang.Object)
     */
    @Override
    public int compare(String arg0, String arg1) {
        //Do your processing here 
        //and
        //return +1 if arg0 > arg1
        //return 0 if arg0 == arg1
        //return -1 if arg0 < arg1
        return 0;
    }

} 
```

然后将此添加到您的`sort`

```
List<String> gbosIdsList = new ArrayList<String>();
//add values
Collections.sort(gbosIdsList,new  MyComparator()); 
```

FYR你可以读[这个](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)

# android - Android：如何从 phpliteadmin 检索数据到 android 应用程序..？

> ID：15496332
> 
> 赞同：0
> 
> 时间：2013-03-19T10:00:43.347
> 
> 标签：android

我已经使用本地主机上的 xampp 将数据库与 phpliteadmin 连接起来。现在我必须从 localhost 检索数据并更新它.. 所以任何 1 都可以帮助我解决这个问题..??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:28:55.177

好的，我有一个功能可以将一些数据发送到您的本地主机并从那里检索一些数据，使用此方法进行通信：-

```
public void postData() throws Exception {
    postData=et.getText().toString(); //some value

    HttpClient httpclient = new DefaultHttpClient(); // connection
    HttpPost httppost = new HttpPost("http://192.168.1.21/default.php"); //ip of your local host and php file!

    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("msg", ""+str));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs,HTTP.UTF_8));
        ResponseHandler<String> responseHandler=new BasicResponseHandler(); // to get the response printed there
        String responseBody = httpclient.execute(httppost, responseHandler); // here we are recieving values.

        Toast.makeText(this, responseBody, Toast.LENGTH_LONG).show();
    } catch (ClientProtocolException e) {
            e.printStackTrace();
    } catch (IOException e) {

    }
} 
```

您可以使用此 php 编码来发送和检索值：-

```
<?php
include ('MCrypt.php'); //this my encryption example
$thename=$_POST["msg"]; //get values from there using post and "msg" must be same on both side!
$mcrypt = new MCrypt();
$decrypted = $mcrypt->decrypt($thename);

echo("Your Encrypted String:--".$thename."\n");  // this line will be sent to android and will be recived in String Response;
echo("Your Decrypted String:--".$decrypted);

?> 
```

# windows - 安装 cygwin：http://mirrors.kernel.org 中缺少 setup.ini

> ID：15496333
> 
> 赞同：53
> 
> 时间：2013-03-19T10:00:43.900
> 
> 标签：windows, cygwin, installation

我正在尝试在 Windows 2008 服务器上安装 cygwin。我设法获得了 cygwin setup.exe 版本 2.721。
由于 cygwin.com 目前已关闭，我尝试了几个通过 cygwin 镜像的谷歌缓存找到的镜像。我遇到了和这个人一样的问题：[安装 cygwin 需要帮助：可能是 ini 文件问题](https://stackoverflow.com/questions/3597229/help-needed-installing-cygwin-may-be-ini-file-problem)
就像他们建议的那样，我尝试将[http://mirrors.kernel.org](http://mirrors.kernel.org)作为镜像。它可以很好地下载一些 setup.bz 文件。然后我收到错误“无法从[http://mirrors.kernel.org/](http://mirrors.kernel.org/)获取 setup.ini ”。
任何建议如何现在安装 cygwin？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-08-07T12:44:56.320

当我尝试使用`http://cygwin.com/setup.exe`and not `http://cygwin.com/setup-x86.exe`or时出现此错误`http://cygwin.com/setup-x86_64.exe`。似乎镜像最近刚刚删除了对`setup.exe`. `setup.exe`仍然可以下载，但没有一个镜像工作。

解决方案是使用[setup-x86.exe](http://cygwin.com/setup-x86.exe)或[setup-x86_64.exe](http://cygwin.com/setup-x86_64.exe)。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-03-19T19:40:30.290

镜像应该是完整路径[http://mirrors.kernel.org/sourceware/cygwin](http://mirrors.kernel.org/sourceware/cygwin)

如果您抱怨 .ini 来自较新版本的 setup，则需要在您信任的网络上的某个地方找到较新的 setup.exe。（还有 cygwin 的家伙？Grrr 没有在你的镜像中包含 setup.exe 并且没有签署你的 exe！）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-08-08T03:15:05.560

原因很简单：

> setup.ini 改变了它的位置！

只需转到 cygwin 站点，下载最新的 setup.exe 文件。会没事的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-03T11:31:20.030

安装时，选择通过 http/ftp 代理安装。防火墙可能会阻止安装。因此，代理会有所帮助。也尝试以管理员身份运行。

它有助于..

问候，弗兰克..！！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-10T17:49:49.120

对于即使使用正确的安装程序仍然出现此错误的用户，请确保您在本地硬盘驱动器上运行安装文件。

我的问题是我试图从映射的网络驱动器启动可执行文件。复制下来并在本地运行程序解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T12:08:43.387

你能用另一个镜子吗？试试 lug.mtu.edu 或类似的东西。从那里我一直只有好成绩。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-22T05:13:07.517

遇到了同样的问题...以管理员模式运行安装程序并将 FTP/HTTP 代理设置为 Internet Explorer 中配置的代理设置。稍后如果没有下载，请尝试不同的代理。选择这个镜像[http://mirrors.kernel.org](http://mirrors.kernel.org)对我有用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-28T13:56:43.490

给了我同样的`Unable to get setup from ...`错误。我使用来自 Cygwin.org 站点的新 setup-x86_64.exe 并且必须选择选项`Use Internet Explorer Proxy Settings`。

它获取了镜像 url。它对我来说是这样的。

但是，如果它自己没有获取所有镜像，我们可以将 url 添加`http://mirrors.kernel.org`到下载列表中。

最初，当它没有自行下载镜像列表时，我尝试手动添加上述`http://mirrors.kernel.org`url，它也可以这样工作。

# java - 如何搜索字符串数组并返回数组中项目的名称？

> ID：15496339
> 
> 赞同：0
> 
> 时间：2013-03-19T10:00:57.007
> 
> 标签：java, android, search, arrays

我是 Android 编程新手。
好的，现在我有一个这样的字符串数组：

```
<string-array name="mStrArray">
    <item name="item1a">text to be searched no1</item>
    <item name="item1b">text to be searched no2</item>
    <item name="item2a">text to be searched no3</item>
    <item name="item2b">text to be searched no4</item>
</string-array> 
```

我像这样搜索数组，并将结果返回到列表适配器：

```
String[] names = getResources().getStringArray(R.array.mStrArray);
        for (String s : names) {
            int i = s.indexOf(searchKeyword);
            if (i >= 0) {
               //add results to listview adapter
               countryList.add(new Country(s, ""));
            }
        } 
```

**我的问题是**，我找不到一种方法来获取从中找到结果的数组中的项目名称。
所以在这个例如。如果我搜索 no3，我会得到项目“item2a”的名称以及值。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:29:31.387

我的建议是 java.util.Arrays 有 binarysearch 方法可以接受多个选项，这将有助于 ui 思考，

[Arraysapi](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:55:51.217

好吧，多亏了 akashasia，我设法找到了一个解决方案，它不是很优雅，但至少它现在可以工作。
所以这就是我所做的：
我制作了 2 个数组，如 akashasia 所说，1 个用于项目名称，1 个用于要搜索的文本，如下所示：

```
<string-array name="mStrArray">
    <item>text to be searched no1</item>
    <item>text to be searched no2</item>
    <item>text to be searched no3</item>
    <item>text to be searched no4</item>
</string-array>

<string-array name="mStrArrayValues">
    <item>item1a</item>
    <item>item1b</item>
    <item>item2a</item>
    <item>item2b</item>
</string-array> 
```

我将代码更改为：

```
String[] arrB = getResources().getStringArray(R.array.mStrArray);
    for (String s : arrB) {
        int i = s.indexOf(searchKeyword);
        if (i >= 0) {
             int position = -1;
             for(int j = 0; j < arrB.length; j++) {
                if(arrB[j] == s) {
                    position = j;
                    break;
                }
        }

        ..
        String[] arrBV = getResources().getStringArray(R.array.mStrArrayValues);

        //finally I got the name of the value :-D
        String mySc = arrBV[position];
        //some code..           
                }
            } 
```

PS这可能不是最好的方法。因此，如果有人有想法或改进，我将不胜感激。

# c++ - 用于 c++ 多平台项目的工具

> ID：15496342
> 
> 赞同：1
> 
> 时间：2013-03-19T10:01:13.173
> 
> 标签：c++, visual-studio-2010, debugging, embedded, multiplatform

我正在使用 Visual Studio 2010 处理一个 c++ 多平台项目，所有平台之间有一个共享的代码部分，但有很大一部分是专用于每个平台的，我使用 #if def 将它们分开，但它变成了代码维护变得非常但代码混乱，此外还有一些问题，例如代码无法编译，某些定义打开或关闭。

是否有任何用于 Visual Studio 的插件或工具有助于开发多平台项目，例如隐藏与平台相关的代码，或使用打开/关闭的不同#defines 进行编译，检查数据类型等。

如果有人有建议，我将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:05:41.347

我不知道这样的 VS 插件，但由于它基本上是一个仅限 Windows 的 IDE，我怀疑是否有。（但当然我可能是错的）

如果您正在寻找一个好的跨平台构建系统，我会寻找[CMake](http://www.cmake.org/)。它功能强大、易于上手，并且可以为几乎任何流行的 IDE/工具链（Visual Studio Solutions、Eclipse Projects、MinGW Makefiles、GNU Makefiles 等）生成构建文件。

它使大型项目的跨平台开发变得轻而易举！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:40:38.117

如果您切换到 Qt 框架，您可能会消除大部分依赖于平台的代码。您可以继续使用带有 Qt 插件的 VS，并且通过使用 Qt 的平台抽象，您可以使用（几乎）相同的代码库来定位许多不同的平台。您将获得无与伦比的平台支持和可移植性：

*   视窗
*   Linux（Qt 原生于 KDE 和 Ubuntu 的未来版本）
*   苹果系统
*   BB10（Qt 也是 BB10 原生的）
*   嵌入式 Linux
*   Android（下个月推出）
*   iOS（下个月也是）
*   霍亚
*   蒂岑

API 也更好 IMO - 不那么丑陋和尴尬，更一致。此外，QML（JSON 样式标记，用于从 C++ 组件构建应用程序，使用 JS 进行胶水代码和值绑定）可以显着提高您的生产力（高达 10 倍而不夸张）。Qt 工具链支持不同的工具包（库版本编译器和平台的组合）和多平台交叉编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:03:26.793

没有比 Visual Studio 本身更多的“工具”了。将代码分离到不同的项目中；通用代码的项目和每个平台的项目。

不要忘记：

```
 1\. Add reference to common project in all platform-dependent projects (so common project is compiled before platform project). 
 2\. Add common project base to the common include directories of each target project. 
```

![在此处输入图像描述](../Images/02a850d41c26c82f5b285e5598c1060f.png)

# python - 将 REST 资源添加到数据库。努力遍历枚举列表并提交更改。

> ID：15496344
> 
> 赞同：1
> 
> 时间：2013-03-19T10:01:14.043
> 
> 标签：python, json, postgresql, rest

我正在尝试从以 JSON 格式返回数据的 API 中提取数据。我在 python 脚本中使用 SQLalchemy 和 simplejson 来实现这一点。数据库是 PostgreSQL。

我有一个名为 Harvest 的类，它指定了表格收获的详细信息。

这是我怀疑不正确的代码。

def进程（自己）：

```
 req = urllib2.Request('https://api.fulcrumapp.com/api/v2/records/', headers={"X-ApiToken":"****************************"})
            resp = urllib2.urlopen(req)
            data = simplejson.load(resp)

            for i, m in enumerate(data['harvest']):
                    harvest = Harvest(m)
                    self.session.add(harvest)
                    self.session.commit() 
```

这个循环有问题吗？没有任何东西通过数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:57:11.630

我怀疑如果循环有任何问题，那就是循环被跳过了。您可以做的一件事是验证这一点：

```
ALTER USER application_user SET log_statements='all'; 
```

然后这些语句将显示在您的日志中。完成后：

```
ALTER USER application_user RESET log_statements; 
```

话虽这么说，我在您的代码中看到的一件事可能会在以后引起麻烦，那就是您每行都在提交。这将导致额外的磁盘 I/O。您可能想在循环之后提交。

# javascript - 基于单选按钮选择启用文本字段

> ID：15496350
> 
> 赞同：4
> 
> 时间：2013-03-19T10:01:29.393
> 
> 标签：javascript, html, css

基本上，我有两个单选按钮“是”和“否”，然后是另外两个输入字段。

```
[LabelQuestion] [RadioYes][RadioNo]

If yes, then... [TextField1]
If no, then...  [TextField2] 
```

默认情况下，我希望文本字段 1 和 2 处于非活动状态/无法输入数据，直到选择了相关的单选按钮，然后该字段才可用于数据输入。

我是一个完全的新手，但我想这可以通过使用 CSS 和/或 JavaScript 来实现。请记住，我接下来要了解 JavaScript 知识，但可以在逻辑上更改预先存在的 JS 代码。

我当前的代码如下所示：

```
 <div class='conlabel'>Have you started trading yet?</div>
      <table width="100">
              <tr>
                <td><label>
                  <input type="radio" name="example" value="Yes" id="example_0" required/>
                  Yes</label></td>
          </tr>
          <tr>
            <td><label>
              <input type="radio" name="example" value="No" id="example_1" required/>
              No</label></td>
          </tr>
  </table>
  <li>
      <div class='conlabel'>If Yes, then:</div>
          <input type="text" name="field1" placeholder="" />
  </li><br>
      <div class='conlabel'>If No, then:</div>
          <input type="text" name="field2" placeholder="" />
  </li><br> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:20:07.983

这个小数字怎么样：

```
$(function(){
    $("#example_0, #example_1").change(function(){
        $("#field1, #field2").val("").attr("readonly",true);
        if($("#example_0").is(":checked")){
            $("#field1").removeAttr("readonly");
            $("#field1").focus();
        }
        else if($("#example_1").is(":checked")){
            $("#field2").removeAttr("readonly");
            $("#field2").focus();   
        }
    });
}); 
```

你会在[这里找到一个 JSFiddle](http://jsfiddle.net/cEaeK/5/)。

请注意，我已在这两个`<input>`字段中添加了 ID。让我知道它是如何公平的。

如果您更喜欢`<input>`字段`disabled`而不是`readonly`，只需替换`readonly`为`disabled`到处。我个人认为`readonly`更好，因为操作系统似乎对禁用的输入产生了更多的影响。

，`focus()`当然，不是必需的 - 但是小事情会产生很大的不同，当网站将我的光标移动到我预期的位置时，我总是更喜欢它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:18:05.520

将此 javascript/jQuery 添加到您的 html 中，这应该可以解决问题：

```
<script type="text/javascript">
    $(function () {
        // First add disabled properties to inputs
        $("input:text").prop('disabled', true);

        // Yes Input
        $("#example_0").on("click", function () {
            $("#input1").prop('disabled', false);
            $("#input2").prop('disabled', true);
        });

        // No Input
        $("#example_1").on("click", function () {
            $("#input2").prop('disabled', false);
            $("#input1").prop('disabled', true);
        });
    });
</script> 
```

非常基本，只需为每个输入添加一个 onclick 功能，并启用或禁用相关文本输入的“禁用”属性。您需要将“#input1”和“#input2”ID 添加到文本输入中，显然可以根据需要命名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:18:24.693

您可以使用[http://jquery.com/](http://jquery.com/)来执行此操作：

将其包含在您的 html 的头部：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

并添加这个javascript：

```
 <script type="text/javascript">
$(document).ready(function () {

function checkradiobox(){
    var radio = $("input[name='example']:checked").val();
    $('#field1, #field2').attr('disabled',true);
    if(radio == "Yes"){
        $('#field1').attr('disabled',false);
        $("#field1").focus();
    }else if(radio == "No"){
        $('#field2').attr('disabled',false);
        $("#field2").focus();
    }
}

$("#example_0, #example_1").change(function () {
    checkradiobox();
});

checkradiobox();

});   
</script> 
```

检查 jsfiddle 以获取工作示例[http://jsfiddle.net/KFgbg/3/](http://jsfiddle.net/KFgbg/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:20:34.943

```
<div class='conlabel'>Have you started trading yet?</div>
  <table width="100">
          <tr>
            <td><label>
              <input onclick="document.getElementById('field1').disabled=false;document.getElementById('field2').disabled=true;"" type="radio" name="example" value="Yes" id="example_0" required/>
              Yes</label></td>
      </tr>
      <tr>
        <td><label>
          <input onclick="document.getElementById('field1').disabled=true;document.getElementById('field2').disabled=false;" type="radio" name="example" value="No" id="example_1" required/>
          No</label></td>
      </tr>
</table>
<li>
  <div class='conlabel'>If Yes, then:</div>
      <input type="text" id="field1" name="field1" placeholder="" disabled="true" />
</li><br>
  <div class='conlabel'>If No, then:</div>
      <input type="text" id="field2" name="field2" placeholder="" disabled="true"  /> 
```

有很多方法可以做到这一点，但要尽可能少地编辑代码，这里有一种方法：

1.  给你的文本框 ID 属性以及名称
2.  通过 html 属性禁用两个文本框以启动
3.  单击“是”单选按钮，启用 field1 并禁用 field2
4.  onclick 'no' 单选按钮，禁用 field1 并启用 field2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-15T11:57:56.657

```
<script language="Javascript">

function hideA()

{

    document.getElementById("A").style.visibility="hidden";

    document.getElementById("B").style.visibility="visible";    

}

function hideB()
{
    document.getElementById("B").style.visibility="hidden";
    document.getElementById("A").style.visibility="visible";

}

</script>

    </head>

    <body>
        <form name="f1" method="post" action="">

        <table>

            <tr><th>catagory</th><th><input type="radio" name="cat"   value="seller" 
            onClick="hideB()">Seller

                    <input type="radio" name="cat" value="buyer" onclick="hideA()"> buyer</th>  

</tr>
            <div style="position: absolute; left: 30px; top: 100px;visibility:hidden" id="A">
                     Seller Name<input type='text' name='sname'><br>

          Seller Product<input type='text' name='sproduct'>
            </div>

            <div style="position: absolute; left: 30px; top: 100px; visibility:hidden" id="B">
             Buyer Name<input type='text' name='bname'><br>

           Buy Product<input type='text' name='bproduct'>

            </div>

            </form> 
```

# reporting-services - 关于将报告导出到 Excel 的问题

> ID：15496351
> 
> 赞同：0
> 
> 时间：2013-03-19T10:01:29.943
> 
> 标签：reporting-services, ssrs-2008, export-to-excel

我正在使用 SSRS 2008，我有一个表格报告，其中包含一个 Region 列，所有其他列都按它分组。

我需要在导出时将报告分成不同的 Excel 表格，我已经这样做了。

我还需要不在报告本身中包含区域列，因此我将其隐藏。

但是当将它导出到 Excel 时，我将 A 列作为用户需要删除的空白列。

所以我有以下问题：

1.  如何从报告中排除一列，但仍将其保留为一个组并以此打破报告？

2.  如何获取每个工作表的名称以显示区域的名称？

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:33:23.747

好的，我找到了答案：

1.  当问题提示我时，我删除了该列，但保留了 Group。

2.  在 tablix 成员属性上（单击相关组时）有“组”>“页面名称”> 表达式 > =Fields!Region.Value。

效果很好！

# c - 我修改后的代码中未处理的异常

> ID：15496353
> 
> 赞同：0
> 
> 时间：2013-03-19T10:01:36.500
> 
> 标签：c, arrays, printf, scanf, unhandled-exception

我正在为硬件编写一个 POS 系统，我不得不使用我的第一个代码，它使用了数百个变量并将其更改为使用数组的更紧凑的程序。这是我的新代码：

```
 #include <stdlib.h>
    #include <stdio.h>
    #include <conio.h>

//---------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------
//------------------------------------------Declaring-Variables--------------------------------------------
//---------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------

//Discount Variables
int iPerPurchaseDiscountPercent = 0; //enter a number which will be later changed to a percentage 
int iFinalPurchaseDiscountPercent = 0;//enter a number which will be later changed to a percentage
float fPerPurchaseDiscountPercent = 0;//the percentage value of discount per item
float fFinalPurchaseDiscountPercent = 0;//percentage value of final dicount
float fPerPurchaseDiscountPrice = 0;//price at which discounts will be applied
float fFinalPurchaseDiscountPrice = 0;//price at which the final shop discount will be appled

//Array values for math
float fItemPrice[100] = { 0 }; //Price of Item
int   iItemQuantity[100] = { 0 }; //Quantity of that Item
float fBundleCost[100] = { 0 }; //Price before Discounts (fItemPrice[N] * fItemQuantity[N])
float fDiscountPerItem[100] = { 0 }; //What discount is recieved per item (fItemPrice[N] * iPerPurchaseAmount)
float fItemTotalDiscountRecieved[100] = { 0 }; //Total discount recieved on multiple items of same type (fDicountPerItem * iItemQuantity)
float fDiscountPrice[100] = { 0 };//Price for item after all discounts (fBundleCost - fDiscountRecieved)

//Values for while loop
bool bStillShopping = true;
int iItemCount = 0;
char cExitQuestion = 'y';

//---------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------
//-----------------------------------------------Prototyping-----------------------------------------------
//---------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------

//---------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------
//------------------------------------------------Main-Loop------------------------------------------------
//---------------------------------------------------------------------------------------------------------
//---------------------------------------------------------------------------------------------------------
int main(void)
{
printf("Welcome to Blacketts bookstore!\t\t\t\t\t\tPOS V2\n");

//Taking values for the per item discounts
printf("Please enter the price that discounts per item will be applied: ");
flushall();
scanf("%f", &fPerPurchaseDiscountPrice); //takes the value at which items will be discounted
printf("Please enter the percentage to be applied at this price: ");
flushall();
scanf("%d", &iPerPurchaseDiscountPercent); //takes a value eg 10 to be later changed to .1 for 10%
fPerPurchaseDiscountPercent = iPerPurchaseDiscountPercent/100; //changes the int to a float and makes it appropriate for percentage calculations

//Taking values for the final purchase discount
printf("Please enter the price that end of sale discounts will be applied to: "); 
flushall();
scanf("%f", &fFinalPurchaseDiscountPrice); //takes the value at which the whole docket will be discounted by
printf("Please enter the percentage to be applied at this price: ");
flushall();
scanf("%d", &iFinalPurchaseDiscountPercent);//takes a value eg 5 to be later changed to .05 for 5%
fFinalPurchaseDiscountPercent = iFinalPurchaseDiscountPercent/100; //changes the int to a float and make it appropriate for percentage calculations

//While loop to take values and input them into appropriate places
while(bStillShopping == true)
{
    iItemCount = 1; // Counting how many items are being purchased, 0 = 1st item. therefore Total quantity Items must equal iItemCount+1

    printf("\nPlease enter the price of the first item to be purchased: "); //enter price of item
    flushall();
    scanf("%.2f", fItemPrice[iItemCount]);

    printf("Please enter the quantity of that item: "); //enter quantity
    flushall();
    scanf("%d", iItemQuantity[iItemCount]);

    printf("\nWould you like to enter any more Items? (y/n): "); //ask to continue
    flushall();
    scanf("%c", &cExitQuestion);

    if(cExitQuestion == 'n')
    {
        bStillShopping = false; //if dont want to continue exit the loop
    }
    else
    {
        iItemCount++; //if do continue increment item loop and ask for more variables
    }
}

getch();
} 
```

当我开始输入数量时`iItemQuantity[iItemAmout]`，程序会因未处理的异常而崩溃。我还在代码之间做了一些调试打印语句，以查看它到达的位置并输出我输入的变量和返回的值不匹配，我收到的都是`0.00`.

非常感谢您的帮助，我希望我不会在其他地方问一个已经回答的问题。仍然不知道如何浏览该网站。

我知道代码目前没有做任何其他事情，但在第一个问题得到纠正之前，我看不到继续的意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:09:39.103

也用于`&`数组`scanf`元素

像这样

```
scanf("%.2f", &fItemPrice[iItemCount]);

scanf("%d", &iItemQuantity[iItemCount]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:10:44.310

问题是`scanf`期望指向值的指针，而不是实际值本身。您在循环之前正确执行此操作，但不适用于循环内的输入。

改变例如

```
scanf("%.2f", fItemPrice[iItemCount]); 
```

到

```
scanf("%.2f", &fItemPrice[iItemCount]); 
```

或者

```
scanf("%.2f", fItemPrice + iItemCount); 
```

对所有输入执行相同操作。

# r - NaN 和 Inf 以及 R 中的 NULL 和 NA 有什么区别？

> ID：15496361
> 
> 赞同：28
> 
> 时间：2013-03-19T10:01:45.453
> 
> 标签：r

NaN 和 Inf 以及 R 中的 NULL 和 NA 有什么区别？

为什么`?NA`并`?NULL`告诉我“NA”的长度为“1”而 NULL 的长度为“0”？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-19T10:24:08.063

简而言之

```
NaN  : means 0/0 -- Stands for Not a Number
NA   : is generally interpreted as a missing, does not exist
NULL : is for empty object. 
```

对于确切的定义，您可以阅读文档，该文档写得非常好。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-03-19T10:23:49.817

在 R 语言中，有两个密切相关的类似 null 的值：`NA`和`NULL`. 两者都用于表示缺失或未定义的值。

**`NULL`**表示空对象，它是一个保留字。 `NULL`可能由表达式和函数返回，因此值是未定义的。

**`NA`**是一个长度为 1 的逻辑常数，其中包含一个缺失值指示符。`NA`可以自由地强制转换为除 raw 之外的任何其他向量类型。还有支持缺失值的其他原子向量类型的常量、 和`NA_integer_`：`NA_real_`所有这些都是 R 语言中的保留字。`NA_complex_``NA_character_`

# android - 处理屏幕旋转上的片段重复（带有示例代码）

> ID：15496362
> 
> 赞同：6
> 
> 时间：2013-03-19T10:01:46.170
> 
> 标签：android, android-fragments, android-listfragment, android-fragmentactivity, android-framelayout

*有一些类似的答案，但不是针对这种情况。*

* * *

我的情况很简单。

我有一个具有两种不同布局的活动，一种是纵向的，另一种是横向的。

在**Portrait**中，我使用并**动态**`<FrameLayout>`添加`Fragment`它。

 **在**Landscape**中，我使用`<fragment>`的`Fragment`是**静态**的。*（其实这无关紧要）*

它首先从**Portrait**开始，然后我`Fragment`简单地添加了：

```
ListFrag listFrag = new ListFrag();
getSupportFragmentManager().beginTransaction()
        .replace(R.id.FragmentContainer, listFrag).commit(); 
```

哪里`ListFrag extends ListFragment`。

然后我做一个屏幕旋转。**我发现 listFrag 正在横向模式下重新创建。** （在其中我注意到该`onCreate()`方法再次使用非空包调用）

我试着`setRetainInstance(false)`像@NPike 在[这篇文章](https://stackoverflow.com/questions/9975523/fragments-and-orientation-change)中所说的那样使用。但是默认情况下`getRetainInstance()`已经`false`是。[正如文档](http://developer.android.com/reference/android/support/v4/app/Fragment.html#setRetainInstance%28boolean%29)所说，它没有达到我的预期。谁能解释一下？

* * *

我正在处理的片段是 a `ListFragment`，它`setListAdapter()`在`onCreate()`. 所以这里不能使用该[`if (container == null) return null;`方法。](https://stackoverflow.com/questions/9040343/dynamically-added-fragments-are-not-removed-when-the-container-is-removed)（或者我不知道如何申请）。

我从[这篇文章](https://stackoverflow.com/questions/12765152/programmatically-removing-a-viewpager-when-are-or-how-can-i-ensure-contained)中得到了一些提示。我应该`if (bundle != null) setListAdapter(null); else setListAdapter(new ...);`在我的`ListFragment`? 但是，有没有更好的方法在片段被销毁/分离时确实删除/删除片段，而不是在创建时执行它？（`if (container == null) return null;`方法如此）

* * *

**编辑：**

我发现的唯一整洁的方法是`getSupportFragmentManager().beginTransaction().remove(getSupportFragmentManager().findFragmentById(R.id.FragmentContainer)).commit();`在`onSaveInstanceState()`. 但这会引发另一个问题。

1.  当屏幕被部分遮挡时，例如弹出 WhatsApp 或 TXT 对话框，该片段也会消失。*（这是相对较小的，只是视觉问题）*

2.  当屏幕旋转时，Activity 被完全销毁并重新创建。`onCreate(Bundle)`所以我可以在or中重新添加片段`onRestoreInstanceState(Bundle)`。但是在（1）的情况下，以及切换活动，当用户返回我的活动时，既`onCreate(Bundle)`不会也不会被调用。`onRestoreInstanceState(Bundle)`我无处可重新创建 Activity（并从 Bundle 中检索数据）。

对不起，我没有说清楚，我已经有了一个决策，该`getSupportFragmentManager()...replace(...).commit();`行仅在纵向模式下运行。

* * *

## 示例代码

我已经提取了简单的代码，以便更好地说明情况:)

**MainActivity.java**

```
package com.example.fragremovetrial;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (findViewById(R.id.FragmentContainer) != null) {
            System.out.println("-- Portrait --");       // Portrait
            ListFrag listFrag = new ListFrag();
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.FragmentContainer, listFrag).commit();
        } else {
            System.out.println("-- Landscape --");      // Landscape
        }
    }

    @Override
    protected void onResume() {
        super.onResume();
        if (findViewById(R.id.FragmentContainer) != null) {
            System.out.println("getRetainInstance = " +
                    getSupportFragmentManager().findFragmentById(R.id.FragmentContainer).getRetainInstance());
        }
    }
} 
```

**布局/activity_main.xml**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/FragmentContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

**layout-land/activity_main.xml** *（没关系）*

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
</LinearLayout> 
```

**ListFrag.java**

```
package com.example.fragremovetrial;

import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.widget.ArrayAdapter;

public class ListFrag extends ListFragment {
    private String[] MenuItems = { "Content A", "Contnet B" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        System.out.println("ListFrag.onCreate(): " + (savedInstanceState == null ? null : savedInstanceState));

        setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, MenuItems));
    }
} 
```

注意我得到了以下

## 调试消息

> -- Portrait --
> ListFrag.onCreate(): null
> getRetainInstance = false
> 
> *(rotate Port -> Land)*
> 
> ListFrag.onCreate(): Bundle[{android:view_state=android.util.SparseArray@4052dd28}]
> -- Landscape --
> 以前焦点视图在保存期间报告 id 16908298，但在恢复期间找不到。
> 
> *(rotate Land -> Port)*
> 
> ListFrag.onCreate(): Bundle[{android:view_state=android.util.SparseArray@405166c8}]
> -- Portrait --
> ListFrag.onCreate(): null
> getRetainInstance = false
> 
> *(rotate Port -> Land )*
> 
> ListFrag.onCreate(): Bundle[{android:view_state=android.util.SparseArray@4050fb40}]
> -- 风景 --
> 以前聚焦的视图在保存期间报告了 id 16908298，但在恢复期间找不到。
> 
> *(rotate Land -> Port)*
> 
> ListFrag.onCreate(): Bundle[{android:view_state=android.util.SparseArray@40528c60}]
> -- Portrait --
> ListFrag.onCreate(): null
> getRetainInstance = false

随着屏幕不断旋转，创建的片段数量**不会**无限增加，我无法解释。（请帮忙）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-21T17:46:36.833

处理此问题的正确方法是将以下内容放入您的 onCreate()

```
if (savedInstanceState == null) {
     // Do fragment transaction.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:04:59.020

我终于想出了一个解决方案，以防止在重新创建 Activity 时重新创建不需要的 Fragment。就像我在问题中提到的那样：

> 我发现的唯一整洁的方法是`getSupportFragmentManager().beginTransaction().remove(getSupportFragmentManager().findFragmentById(R.id.FragmentContainer)).commit();`在`onSaveInstanceState()`. 但它会引发另一个问题......

...有一些改进。

在`onSaveInstanceState()`：

```
@Override
protected void onSaveInstanceState(Bundle outState) {
    if (isPortrait2Landscape()) {
        remove_fragments();
    }
    super.onSaveInstanceState(outState);
}

private boolean isPortrait2Landscape() {
    return isDevicePortrait() && (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE);
} 
```

会`isDevicePortrait()`像：

```
private boolean isDevicePortrait() {
    return (findViewById(R.id.A_View_Only_In_Portrait) != null);
} 
```

*请注意，我们***无法***`getResources().getConfiguration().orientation`确定设备当前*是否为*纵向。这是因为`Resources`对象在屏幕旋转***后立即***更改 - 甚至在调用***之前！*** `onSaveInstanceState()`

如果我们不想使用`findViewById()`来测试方向（出于任何原因，而且它毕竟不是那么整洁），请保留一个全局变量并通过in`private int current_orientation;`初始化它。这看起来更整洁。但是我们应该注意***不要***在 Activity 生命周期的任何地方更改它。`current_orientation = getResources().getConfiguration().orientation;``onCreate()`

 **请确保我们`remove_fragments()` ***之前*** `super.onSaveInstanceState()`。

*（因为在我的情况下，我从 Layout 和 Activity 中删除了 Fragments。如果它在 之后`super.onSaveInstanceState()`，则 Layout 将已经保存到 Bundle 中。然后在 Activity 重新创建后， Fragments**也**将被重新创建。 ###)*

###我已经证明了这个现象。但是[***在 Activity 重新创建时如何确定 Fragment 恢复的原因是什么？***](https://stackoverflow.com/questions/15555964/what-to-determine-a-fragment-restore-upon-activity-re-create)只是我的猜测。如果您对此有任何想法，请回答[我的另一个问题](https://stackoverflow.com/questions/15555964/what-to-determine-a-fragment-restore-upon-activity-re-create)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:37:03.110

在您的`onCreate()`方法中，您应该只`ListFrag`在您处于纵向模式时创建您的。您可以通过检查仅在纵向布局中具有的 FrameLayout 视图是否不是`null`.

```
if (findViewById(R.id.yourFrameLayout) != null) {
    // you are in portrait mode
    ListFrag listFrag = new ListFrag();
    getSupportFragmentManager().beginTransaction()
            .replace(R.id.FragmentContainer, listFrag).commit();
} else {
    // you are in landscape mode
    // get your Fragment from the xml
} 
```

最后，如果您从纵向切换到横向布局，您不希望创建另一个 ListFrag，而是使用您在 xml 中指定的 Fragment。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-24T23:15:08.627

@midnite，首先感谢您的问题，我有同样的问题，我工作了好几天。现在我为这个问题找到了一些棘手的解决方案 - 并想与社区分享。但如果有人有更好的解决方案，请写在评论中。

所以，我有同样的情况 - 两个设备方向的不同布局。在纵向中，不需要 DetailsFragment。

我只是在 OnCreate 中试图找到已经创建的片段：

```
 fragment = (ToDoListFragment) getFragmentManager().findFragmentByTag(LISTFRAGMENT);
    frameDetailsFragment = (FrameLayout) findViewById(R.id.detailsFragment);
    detailsFragment = (DetailsFragment) getFragmentManager().findFragmentByTag(DETAILS_FRAGMENT);
    settingsFragment = (SettingsFragment) getFragmentManager().findFragmentByTag(SETTINGS_FRAGMENT); 
```

在那之后，我正在添加我的主要片段 -

```
 if (fragment == null){
        fragment = new ToDoListFragment();
        getFragmentManager().beginTransaction()
                .add(R.id.container, fragment, LISTFRAGMENT)
                .commit();
    } 
```

并清除我的片段的任务：

```
 if (getFragmentManager().getBackStackEntryCount() > 0 ) {
        getFragmentManager().popBackStackImmediate();
    } 
```

**而最有趣的就在这里**——

```
 destroyTmpFragments(); 
```

这是方法本身：

```
 private void destroyTmpFragments(){
    if (detailsFragment != null && !detailsFragment.isVisible()) {
        Log.d("ANT", "detailsFragment != null, Destroying");
        getFragmentManager().beginTransaction()
                .remove(detailsFragment)
                .commit();

        detailsFragment = null;
    }

    if (settingsFragment != null && !settingsFragment.isVisible()) {
        Log.d("ANT", "settingsFragment != null, Destroying");
        getFragmentManager().beginTransaction()
                .remove(settingsFragment)
                .commit();

        settingsFragment = null;
    }
} 
```

如您所见，我手动清理了所有 FragmentManager 为我轻轻保存的片段（非常感谢他）。在日志中，我有下一个生命周期调用：

```
 04-24 23:03:27.164 3204    3204    D   ANT MainActivity onCreate()
 04-24 23:03:27.184 3204    3204    I   ANT DetailsFragment :: onCreateView
 04-24 23:03:27.204 3204    3204    I   ANT DetailsFragment :: onActivityCreated
 04-24 23:03:27.204 3204    3204    I   ANT DetailsFragment :: onDestroy
 04-24 23:03:27.208 3204    3204    I   ANT DetailsFragment :: onDetach 
```

因此，在 onActivityCreated 中，让您的视图检查 null - 以防片段不可见。稍后将被删除（可能因为片段管理器的删除是异步的）之后，在活动的代码中，我们可以创建全新的片段实例，具有适当的布局（fargmnet 的占位符），片段将能够找到它的视图，例如，并且不会产生 NullPointerException

但是，在后台堆栈中的片段被删除得非常快，无需调用 onActivityCreated （在上面代码的帮助下：

```
 if (getFragmentManager().getBackStackEntryCount() > 0 ) {
        getFragmentManager().popBackStackImmediate();
    } 
```

最后，如果我处于陆地方向，最后我会添加片段 -

```
 if (frameDetailsFragment != null){
        Log.i("ANT", "frameDetailsFragment != null");

        if (EntryPool.getPool().getEntries().size() > 0) {
            if (detailsFragment == null) {
                detailsFragment = DetailsFragment.newInstance(EntryPool.getPool().getEntries().get(0), 0);
            }

            getFragmentManager().beginTransaction()
                    .replace(R.id.detailsFragment, detailsFragment, DETAILS_FRAGMENT)
                    .commit();
        }
    } 
```***

# php - 员工职位数据库的 MySQL 数据库结构

> ID：15496363
> 
> 赞同：0
> 
> 时间：2013-03-19T10:01:46.833
> 
> 标签：php, mysql

基本上，我正在使用人力资源管理应用程序。

职位（如培训师、副经理、经理等）根据他们的服务填补。

有一份所有员工的名单，在任何给定日期服务最高的人占据最高位置。

关键位置的数量是固定的。根据员工在列表中的职位，将显示其可能的职位。

职位如下：

*   *（职位 - 职位数）*
*   导演 - 1
*   经理 - 3
*   镝。经理 - 5
*   教练 - 10

现在，在根据他们的经验填充的员工列表中，列表中的第一位将是主管，接下来的三位是经理，接下来的 5 位员工将是 Dy。经理和接下来的十个将是培训师。

我想设计一个用于存储位置和相关数字的数据库表。可能会增加新的职位，而且职位的数量可能会随时间而变化。例如，如果主任职位的数量从一个增加到两个，则应该对其进行编辑。一旦编辑了董事职位的数量，列表中的前两名员工将被指定为可能的董事。同样的逻辑也适用于所有其他职位。

我不确定这种表的数据库结构应该是什么。完成后，我应该能够使用 php 根据员工列表中的任何给定员工的排名查询该表的可能位置。

例如，如果员工排在第 5 位，我应该能够查询表并获得可能的职位。在这种情况下，等级 5 将是 Dy。经理。

希望我已经明确了我的要求。请帮助我为此目的设计一个数据库表。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:26:51.470

```
Employees
=========
name | Boss
rank | 1
doj  | 2010-01-01 
```

“按等级从员工中选择姓名，doj”

doj = 加入日期

你是这个意思吗？

`rank`可以加入另一个表，您可以在其中存储可读的排名标题以生成标题、名称等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:56:42.383

现有的员工数据库表包括：

```
Employees
=========
name | Mark
doj  | 2010-01-01
wrk  | yes 
```

“从员工中选择姓名，其中 wrk=yes 由 doj 订购”

（这将删除数据库中已离开公司的员工，状态为 wrk = no）

可以说这将产生如下结果：

```
Mark | 2010-01-01
Steve | 2010-02-01
Jack | 2010-04-01
Rick | 2010-09-01
David | 2010-12-01 
```

现在，当我获取结果并根据他们的资历分配职位时（假设职位 manager=1，dy.manager=3，trainer=1），结果将是：

```
Rank | Name | Doj | Designation
1 | Mark | 2010-01-01 | Manager
2 | Steve | 2010-02-01 | Dy. Manager
3 | Jack | 2010-04-01 | Dy. Manager
4 | Rick | 2010-09-01 | Dy. Manager
5 | David | 2010-12-01 | Trainer 
```

几天后，让我们假设 Jack 退出了公司（他的 wrk 状态将是 no）。因此，获取的结果将如下所示：

```
Rank | Name | Doj | Designation
1 | Mark | 2010-01-01 | Manager
2 | Steve | 2010-02-01 | Dy. Manager
3 | Rick | 2010-09-01 | Dy. Manager
4 | David | 2010-12-01 | Dy. Manager 
```

杰克辞职后，大卫升职了。排名只是根据获取的行数生成的序列号，自动递增。

现在，我想为名称和职位数量创建一个表，以便根据排名获取名称。

# php - android将一个活动的ID传递给列表活动

> ID：15496371
> 
> 赞同：0
> 
> 时间：2013-03-19T10:02:03.453
> 
> 标签：php, android, android-intent

嘿！！我有一个活动，应该从中获取员工的 id 并将其传递给其他活动。问题是它不仅需要 id 还需要 Employee Details 的其他内容..但它应该只需要 ID ！我不知道该怎么做！请帮忙

例如：在Employee_Details_Activity中：当在Employee Activity中点击一个按钮时，它应该只取员工id并传递给Time Activity（应该显示员工的每个工作时间。如图所示！！

注意：员工详细信息活动=正常活动，时间活动是列表视图！！它应该只传递给我 id 并且时间是从 PHP 解析的

我不能显示任何图像，因为我是新来的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:09:06.893

使用意图：在第一次活动中使用

```
intent.putExtra("Title", listTitleString);
intent.putExtra("Content", listDescriptionString);
startActivity(intent); 
```

在第二个活动中使用：

```
title= getIntent().getExtras().getString("Title"); 
```

# magento - 在 iphone Web 应用程序中使用 ajax-jquery 时出现“错误：调用参数与签名不匹配”

> ID：15496372
> 
> 赞同：0
> 
> 时间：2013-03-19T10:02:04.493
> 
> 标签：magento, jquery, xml-rpc, iphone, iphone-web-app

在创建 iphone web 应用程序时，我使用[magento XML RPC](http://www.magentocommerce.com/api/soap/introduction.html#Introduction-XMLRPC)来调用 magento web 服务。[在jQuery XML RPC](https://github.com/maelstrom/jquery-xmlrpc)的帮助下，我可以访问 magento 网络服务。我的代码，

```
<script src="js/jquery.mobile-1.2.0.min.js"></script>
<script src="js/jquery-1.8.3.min.js"></script>
<link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css"></link>
<script src="js/jquery.xmlrpc.js"></script>

<script>
$(function(){
$("button").click(function(){
   $.xmlrpc({
          url:"link of my magento/xmlrpc",
          methodName:'login',
          params:['user','pass'],
          success: function(response, status, jqXHR) {
                  var res=response;
                  alert(res); // getting alert as session id as login response
             $.xmlrpc({
                       url:"link of my magento/xmlrpc",
                       methodName:'call',

               //passing session id from the previous response
                       params:{sessionId:res,methodName:'customer.info',customerId:'3'},
                       success: function(response1, status1, jqXHR1) {alert("success:"+response1);},
                       error: function(jqXHR1, status1, error1) {alert(error1); }
                   });
                },
            error: function(jqXHR, status, error) {alert(error); }
         });
     });
 });

</script> 
```

这里我的问题是，当我运行应用程序时，我获取会话 ID 并将 ID 传递给带有参数的下一个方法“调用”。执行时此代码给我一个错误，指出**“错误：调用参数与签名不匹配”**

我也改变了传递参数的方式，但没有希望。谁能建议我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:04:19.873

我相信这是一个错误。

看看这个线程：[调用参数与签名不匹配](http://www.magentocommerce.com/boards/viewthread/40743/)

# java - WELD-001303 范围类型 javax.enterprise.context.SessionScoped 没有活动上下文

> ID：15496374
> 
> 赞同：10
> 
> 时间：2013-03-19T10:02:08.217
> 
> 标签：java, jboss, annotations, weld

我已经搜索了每个地方，但似乎我找不到解决此错误的最佳答案，有我的堆栈跟踪，有人可以告诉我发生了什么事，我花了两个日期找到这个错误...... :(

```
16:55:02,405 SEVERE [org.activiti.engine.impl.jobexecutor.TimerCatchIntermediateEventJobHandler] (Thread-16 (HornetQ-client-global-threads-982087879)) exception during timer execution: org.activiti.engine.ActivitiException: Exception while invoking TaskListener: WELD-001303 No active contexts for scope type javax.enterprise.context.SessionScoped
    at org.activiti.engine.impl.persistence.entity.TaskEntity.fireEvent(TaskEntity.java:529) [activiti-engine-5.11.jar:5.11]
    at ....
Caused by: org.jboss.weld.context.ContextNotActiveException: WELD-001303 No active contexts for scope type javax.enterprise.context.SessionScoped
    at org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:598) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:71) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
    at com.metro.wfm.shared.cdi.OverrideUserBean$Proxy$_$$_WeldClientProxy.hasBean(OverrideUserBean$Proxy$_$$_WeldClientProxy.java) [wfm-shared-0.0.2.jar:]
    ... 168 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T10:31:24.553

会话范围的上下文仅在使用该`service()`方法调用 servlet 期间或执行 servlet 过滤器时才处于活动状态。不确定您是如何设置 Activiti 作业的，但它似乎不在会话上下文的活动期间。因此，如果您注入任何需要的 bean，`@SessionScoped`则注入将失败。

解决方案是删除需要的 bean 注入`@SessionScoped`，或修改 bean。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-22T16:07:12.313

我遇到了同样的问题，根据@Perception 发布的答案，如果您在某些初始化类上使用@Singleton (javax.ejb.Singleton) 和@Startup (javax.ejb.Startup) 注释，并且还注入其他 @SessionScoped 或依赖于 @SessionScoped 的其他 bean，这将导致此 WELD-001303 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-19T20:51:37.887

您应该分离前端会话逻辑。想象一下，每个登录用户都有 @SessionScoped bean，它包含 Account 对象。

登录后，同时将Account对象保存到session bean中，同时将Account对象保存在@ApplicationScoped bean中，但是在HashMap(id, account)中，在后端逻辑中，每个Singleton bean都可以从@Application Scoped bean中访问和获取数据. 甚至@Schedule 方法。

# java - 在类路径上找不到属性文件

> ID：15496378
> 
> 赞同：0
> 
> 时间：2013-03-19T10:02:12.640
> 
> 标签：java, properties, glassfish, classpath

我正在尝试在 glassfish 3.1 服务器上加载/读取属性文件。我无法让它工作。我已经搜索并尝试了许多可能的解决方案。到目前为止都没有工作，结果总是 NULL。

我尝试了以下链接中的方法： [How to use a property with Glassfish](https://stackoverflow.com/questions/531593/how-to-use-a-property-file-with-glassfish)

我的方法：

```
final public class GTS_Properties{

...

   public static Properties getPropertiesFromFile(String fileName){
      URL url = GTS_Properties.class.getResource(fileName)
      ...
      // url is always null
   }
} 
```

我的配置：构建路径上的文件夹属性。

> /root/WEB-INF/classes/****.properties

Glassfish 服务器的外观（使用 eclipse 启动插件）

> /glassfish-root/domain/eclipseApps/MyWebApp/WEB-INF/classes/****.properties

我试图将属性文件直接放在 WEB-INF 而不是类中。同样的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T07:08:41.627

我首先从相对路径的起点向上移动 2 个“父文件夹”来解决它。只需在路径的开头插入“../../”即可。

WEB-INF/classes/WebApp/utils/GTS_Properties.class **（获取资源的类）** WEB-INF/classes/prop.properties **（资源文件的位置）**

```
GTS_Properties.class.getResource("../../prop.properties") 
```

# windows - 检查用户组成员身份

> ID：15496380
> 
> 赞同：0
> 
> 时间：2013-03-19T10:02:21.353
> 
> 标签：windows, vbscript, dns

我一直在快速编写一个小脚本，以便我可以根据个人组成员身份设置和删除网络驱动器或创建文件夹，它似乎不起作用并且没有错误消息，可以使用第二对眼睛，我真的很感激！

```
DIM CHS
SET CHS = CreateObject("Scripting.FileSystemObject")
SET CHSshell = CreateObject("WScript.Shell")
SET CHSnetwork = CreateObject("WScript.Network")

PRIVATE FUNCTION isMember( Group )
    SET netCHS = CreateObject("WScript.Network")
    Domain = netCHS.UserDomain
    User = netCHS.UserName
    isMember = false
    SET userCHS = GetObject("WinNT://" & Domain & "/" & User & ",user")
        FOR EACH Group in userCHS.Groups
            IF (Group.Name = GroupName) THEN
                isMember = true
        EXIT FOR
            END IF
    NEXT    
    SET userCHS = NOTHING
    SET netCHS = NOTHING
END FUNCTION

SET CHS = NOTHING

IF ( isMember("Domain Admins") = "True" ) THEN
    CHSnetwork.RemoveNetworkDrive "z:"
    WSript.Echo "CHSnetwork.UserName"
END IF 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:55:38.743

你打电话

```
isMember("Domain Admins") 
```

功能

```
PRIVATE FUNCTION isMember( Group ) 
```

获取 name 中的参数`Group`。但是您（重新/误用`Group`）

```
FOR EACH Group in userCHS.Groups 
```

循环`userCHS.Groups`和在

```
IF (Group.Name = GroupName) THEN 
```

得到`.Name`比较`GroupName`。从哪里来`GroupName`？。尝试将函数的标题更改为

```
PRIVATE FUNCTION isMember( GroupName ) 
```

并考虑使用`Option Explicit`以避免此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T14:08:42.673

此 VBS 脚本将显示用户所属的所有组：

```
Dim fso: Set fso = CreateObject("Scripting.FileSystemObject")
Dim oNetwork: Set oNetwork = CreateObject("WScript.Network")

Dim sUserName: sUserName = oNetwork.UserDomain & "/" & oNetwork.UserName
sUserName = InputBox("Windows User Name","Enter Windows User Name", sUserName)

If sUserName <> "" Then
    GetGroups
End If

Sub GetGroups
    Const ADS_READONLY_SERVER = 4
    Dim oGroup, oUser
    Dim oShell: Set oShell = Wscript.CreateObject("WScript.Shell")
    Dim sFolderPath: sFolderPath = GetFolderPath()
    Dim oNS: Set oNS = GetObject("WinNT:")
    Dim oList: Set oList = CreateObject("System.Collections.ArrayList")

    Dim sFilePath: sFilePath = sFolderPath & "\" & Replace(Replace(sUserName,"\","-"),"/","-") & "_groups.txt"

    Set oUser = oNS.OpenDSObject("WinNT://" & sUserName, "", "", ADS_READONLY_SERVER)
    For Each oGroup In oUser.groups
        oList.Add oGroup.Name
    Next

    oList.Sort()

    Dim oLog: Set oLog = fso.CreateTextFile(sFilePath, True)
    For Each sItem in oList
        oLog.Write sItem & vbCrLf
    Next

    oLog.Close
    oShell.Run sFilePath
End Sub

Function GetFolderPath()
    Dim oFile 'As Scripting.File
    Set oFile = fso.GetFile(WScript.ScriptFullName)
    GetFolderPath = oFile.ParentFolder
End Function 
```

# coronasdk - Corona - 物理在表面上滑动（俯视图）

> ID：15496391
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:02:58.427
> 
> 标签：coronasdk, physics

你如何模拟滑动，在屏幕上画一个圆圈以及它在屏幕背景上的滑动。或者在空气曲棍球比赛中滑冰。

如果您想查看实际示例，此应用程序将准确显示我想要的内容！

[https://itunes.apple.com/gb/app/puck-puck/id463455207?mt=8](https://itunes.apple.com/gb/app/puck-puck/id463455207?mt=8)

该应用程序是免费的，并把它放在那里，以防有人想下载它以准确了解我在说什么。我当前的方法是使用physics.start() 和setLinearVelocity(200, -300)，然后当对象返回“下降”屏幕时，iphysics.pause() 这给出了快速-逐渐停止的外观。想知道是否有另一种方式，这样我就可以使用摩擦来改变事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T11:55:56.740

滑动摩擦力是大小恒定且方向与运动方向相反的力。

幅度是一个自由变量，您可以调整以获得您喜欢的运动。在现实生活中，它与法向力（垂直于表面的力，与重量有关）和动摩擦系数（用于衡量界面的“摩擦”程度——冰或砂纸）成正比。

当运动停止时，动摩擦停止。然后*静*摩擦接管，这类似于动能，但稍强一些，只要物体静止不动，就会应用。一个常见的错误是搞砸了这种过渡，从而使物体最终以低速振荡。

# javascript - 谷歌地图api中可以进行语音导航吗？

> ID：15496392
> 
> 赞同：6
> 
> 时间：2013-03-19T10:02:58.530
> 
> 标签：javascript, google-maps-api-3, navigation, voice, map-directions

如何使用 google map api v3 激活基于语音的方向？我已经实现了从起点到终点给出方向的地图。但现在我想听听我当前所在位置的名称。请帮忙 ？我在 ios UIWebView 中实现了它，所以我从 GPS 获取当前位置。现在我每 2 秒更新一次，但我想添加基于语音的方向。这怎么可能？请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-03T07:54:05.393

如果您使用 Google Directions API 接收路线，您会收到 JSON 格式的路线，其中包括路线点、路线长度、预期的行程持续时间和说明。您可以获取它们，然后在需要时使用文本转语音从特定指令中发出声音。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-29T09:14:26.167

根据[谷歌地图条款](https://developers.google.com/maps/terms#section_10_4)

> 没有导航。您不会将服务或内容用于或与 (a) 实时导航或路线引导相关；(b) 自动或自主车辆控制。

推荐的方法是使用 Intents 将用户重定向到 Android 应用程序或谷歌地图的 Web 应用程序。

如果你真的想这样做，你可以选择其他地图服务，比如[HERE 地图](https://developer.here.com/documentation)。他们确实在您的应用程序内提供了[轮流导航支持](https://developer.here.com/documentation/android-premium/topics/map-guidance.html)。我从来没有使用过它。

# android - Android OutOfMemory 错误和 LruCache

> ID：15496394
> 
> 赞同：5
> 
> 时间：2013-03-19T10:03:00.333
> 
> 标签：android, out-of-memory

首先，我知道有很多相关的帖子，我读过很多，没有一个有帮助，我没有想法:)

所以我正在开发一个使用大量图像（用于按钮、徽标、显示大量图像等）的 android 应用程序（sdk 版本 14+）。平均图像大小为 120kb +- 100kb

正如标题所说，我遇到了 OutOfMemory 错误。起初，我在 xml 中或以编程方式使用 setImageResource 将图像源添加到 ImageViews。由于 OutOfMemory 错误，很快应用程序开始崩溃。所以我已经阅读了这个（[http://developer.android.com/reference/android/util/LruCache.html](http://developer.android.com/reference/android/util/LruCache.html)）教程并按照它所说的那样实现了LruCache。我将位图添加到 lrucache，然后使用 get 方法将位图设置为 imageview。

在活动的 onDestroy 方法中，我在 lrucache 上调用 evictAll 方法并将 lrucache 设置为 null。所以我想，然后内存就被释放了。

但是问题仍然存在，当我进行几个活动时，应用程序崩溃了。

非常感谢帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T08:09:37.000

谢谢你们帮了我很多！

因此，如果有人以同样的问题冲浪到这个问题，这里有一些指导方针：

*   当您不再需要位图时，请在位图上调用 .recycle()。
*   使用 Eclipse Memory Analyzer 找出你的问题
*   （必须）看[这个](http://www.youtube.com/watch?v=_CruQY55HOk)视频
*   [这是](https://stackoverflow.com/questions/12709603/mat-eclipse-memory-analyzer-how-to-view-bitmaps-from-memory-dump/12709604#12709604)从 .hprof 文件中查看位图的方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:23:09.357

根据文档，超过最大可用 VM 内存将引发 OutOfMemory 异常。似乎缓存位图超出了可用的虚拟内存。

不使用时回收位图。

```
 bitmap.recycle(); 
```

[何时应该使用 LRUCache 回收位图？](https://stackoverflow.com/questions/10743381/when-should-i-recycle-a-bitmap-using-lrucache). 查看 commonsware 接受的答案。

我相信当 LRUCache 驱逐一个图像为另一个图像腾出空间时，内存没有被释放。（用户在上面的链接中询问）

在位图被回收或垃圾收集之前，它不会是。（commomsware 的回答）。

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。讨论内存管理、内存泄漏和使用 MAT Analyzer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:07:49.620

您是否将所有图像都存储在堆中？如果是这样，您应该将它们缓存在 sd 卡或内部存储中，并在堆中只保留一堆（一个不错的方法是使用 LRU 缓存）。

如果您已经这样做了……您可以下载内存分析器工具并调试应用程序的内存使用情况。

[http://www.eclipse.org/mat/](http://www.eclipse.org/mat/)

处理 OutOfMemoryError 真的很痛苦。

祝你好运！

# vb.net - 使用循环单击特定按钮时显示特定表单

> ID：15496397
> 
> 赞同：1
> 
> 时间：2013-03-19T10:03:03.163
> 
> 标签：vb.net

我想在单击特定按钮时显示特定表单。我想知道这是否可以通过使用循环来实现。

到目前为止，这是我的代码：

```
 Private Sub ShowTable()
        Me.Hide()
        If btnClicked = 1 Then
            Table1.Show()
        ElseIf btnClicked = 2 Then
            Table2.Show()
        ElseIf btnClicked = 3 Then
            Table2.Show()
        End If 
```

我已经声明了一个设置为 0 的 Integer，它会随着单击某些按钮而改变。

是否可以通过使用循环使其更容易并让它返回值？如果我错了，请纠正我。

# android - 弹出菜单：可从操作栏而不是设备的“菜单按钮”访问的项目

> ID：15496399
> 
> 赞同：0
> 
> 时间：2013-03-19T10:03:06.517
> 
> 标签：android, popup, android-actionbar, actionbarsherlock, android-menu

我的应用程序中有一个名为 ResultListViewActivity 的 ListView 活动，它显示来自数据库的内容。列表视图中显示的内容取决于在前一个活动中单击的按钮。所以如果用户点击Main Activity中的“Button 1”，就会在ResultListViewActivity中显示特定的内容，以此类推。

我想为这个活动添加一个菜单：问题是，这个菜单的项目也应该根据之前点击的按钮而改变。有9个案例，每个案例有不同数量的项目。到目前为止，我有这个代码：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    Bundle bundle = getIntent().getExtras();
    int filterVariable = bundle.getInt("filterVariable");
    switch (filterVariable) 
    {
    case 1:
        getSupportMenuInflater().inflate(R.menu.filter_fastfood, menu);
        break;

    case 2:
        getSupportMenuInflater().inflate(R.menu.filter_restaurants, menu);
        break;

    case 3: 
        getSupportMenuInflater().inflate(R.menu.filter_coffeeshops, menu);
        break;

    case 4:
        getSupportMenuInflater().inflate(R.menu.filter_bars, menu);
        break;

// [... and so on]
    }
    return super.onCreateOptionsMenu(menu);
} 
```

它运作良好，对于每种情况，我确实在菜单中有不同的项目。但我不希望通过我设备的“菜单按钮”访问这些项目（这绝对不是本能的，用户也很难猜到）。这些项目很重要，所以我想在右上角有一个按钮，它会打开这个菜单（下拉菜单/弹出菜单）。

你知道这样的事情是怎么做到的吗？我在一些谷歌应用程序中看到了这一点，但找不到显示用于执行此操作的工具的教程。
谢谢 ！

ps：我在我的应用程序中使用actionbarsherlock。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:25:27.563

如果您使用的是最新版本的 ABS 4.2.0，`.ForceOverflow`则已删除对主题的支持。

**来源：** [版本 4.2.0 变更日志](https://github.com/JakeWharton/ActionBarSherlock/blob/master/CHANGELOG.md#readme)

变更日志摘录：

```
Add SearchView widget for standard search interaction (API 8+ only)
Fix: ShareActionProvider in the split action bar no longer fills the entire screen.
Fix: ShareActionProvider now does file I/O on a background thread.
Fix: Automatically correct ColorDrawable not respecting bounds when used as a stacked background.
Fix: Ensure fragments collection is present before dispatching events.
Fix: XML-defined onClick searches the correct context for the declared method.
Fix: Ensure action mode start/finish callbacks are invoked on the activity for the native action bar.
Fix: Allow tab callbacks to have a fragment transaction instance for any FragmentActivity.
Fix: Ensure CollapsibleActionView callbacks are dispatched in both native and compatbility action bars.
Fix: Remove .ForceOverflow themes. These never should have been included. 
```

要解决此问题，您需要下载可以运行的 ABS 的旧版本（版本 4.1.0）。您可以在此处根据其发布历史获取下载列表：http: [//actionbarsherlock.com/download.html](http://actionbarsherlock.com/download.html)

*这是来自生产应用程序，经过测试和运行。*

您还需要对应用程序的默认主题进行细微更改。例如：

```
<style name="MyTheme" parent="@style/Theme.Sherlock.ForceOverflow">
    <item name="android:windowBackground">@color/background</item>
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="MyTheme.ForceOverflow">
    <item name="absForceOverflow">true</item>
</style> 
```

注意主主题属性中`@style/Theme.Sherlock.ForceOverflow`的使用。`parent`也不是`<style>`名称为`MyTheme.ForceOverflow`. 执行上述操作将使溢出菜单为您工作。

您还需要将此属性添加到您的菜单项：

```
android:showAsAction="ifRoom|withText" 
```

现在，要强制设备认为它有一个*物理*菜单键，请使用以下代码：

*注意：**这是一个 hack**，并且由于明显无法访问多个设备，我个人从未测试过它是否适用于所有存在的 Android 设备。使用风险自负等。仅供参考，我以前使用过它，到目前为止没有任何投诉。*

```
try {
    ViewConfiguration config = ViewConfiguration.get(MainPage.this);
    Field menuKeyField = ViewConfiguration.class.getDeclaredField("sHasPermanentMenuKey");
    if (menuKeyField != null) {
        menuKeyField.setAccessible(true);
        menuKeyField.setBoolean(config, false);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

*强制溢出菜单出现在`ActionBar`而不显示存在更多选项的指示符是个人偏好。我从技术上可行的解决方案的角度来回答这个问题，而不是促进使用这种功能。从用户体验的角度来看它是否可取是另一个主题。*

# sql-server - 如何在sql server中维护换行符

> ID：15496401
> 
> 赞同：4
> 
> 时间：2013-03-19T10:03:10.547
> 
> 标签：sql-server

我有一个带有换行符的 asp.net 文本框，并且在 sql server 2008 中没有维护换行符。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:07:02.693

您可以使用`CHAR(13)`for`line breaks`和`CHAR(10)`for `Line Feed (LF)`。

因此，您可以做的是在将其插入数据库之前，将每个换行符替换为`CHAR(13)`.

干得好：

```
DECLARE @text NVARCHAR(50)
SET @text = 'This is line 1.' + CHAR(13) + 'This is line 2.'
SELECT @text 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:13:32.757

```
replace( queryText, '\r\n', CHAR(13) + CHAR(10) ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T10:17:13.443

我所要做的就是这个

```
string htmlFormattetText = txtShare.Text.Replace("\r\n", "<br />"); 
```

# javascript - 前端视觉 XPath 识别

> ID：15496402
> 
> 赞同：0
> 
> 时间：2013-03-19T10:03:11.803
> 
> 标签：javascript, ruby, xpath, rubygems, frontend

我正在寻找 JS 或 Ruby 库，它允许我在视觉上（用户前端）选择页面元素并识别他们的 XPath 以供进一步使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:35:55.590

如果要计算 JavaScript 中元素的 XPath，请检查：[如何使用 Javascript 计算元素的 XPath 位置？](https://stackoverflow.com/questions/3454526/how-to-calculate-the-xpath-position-of-an-element-using-javascript). 另请检查：[如何使用 Javascript 计算元素的 XPath 位置？](https://stackoverflow.com/questions/14854936/jquery-create-xpath-of-the-current-text-selection).

由于 Ruby 不是“前端语言”，我无法想象它在这里有什么用处。但是，如果您想为特定的 XPath 选择元素，请检查[Nokogiri](http://nokogiri.org/tutorials/searching_a_xml_html_document.html)。

# jqplot - 在 jqplot 线上显示大量数据的好解决方案是什么？

> ID：15496403
> 
> 赞同：0
> 
> 时间：2013-03-19T10:03:12.213
> 
> 标签：jqplot

我正在为我的图表使用 jqplot。如您所见，我附上的图片。图表中使用的数据是 1458 点，看起来我已经用球蓝色完成了图表。

![在此处输入图像描述](../Images/2e16c4f419f97d176e0afbb492a35de6.png)

我正在寻找一种解决方案让它看起来更好，即使我使用超过 100,000 点。那么，你能告诉我一个很好的解决方案来解决这个问题吗？我真的很感激你对它的任何想法

使用 _databound min 和 max 重新绘制后 ![在此处输入图像描述](../Images/f6052fad326b7c7dd017709d88d2336b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:07:51.637

您可以使用以下方法在渲染后获取 dataBounds 值：

```
var minX = plot.axes.xaxis._dataBounds.min;
var maxX = plot.axes.xaxis._dataBounds.max; 
```

（您可以使用 yaxis 类似地获得 minY 和 maxY。）

然后你可以要求 jqplot 使用这个边界来绘制精确的范围：

```
plot.axes.xaxis.min = minX;
plot.axes.xaxis.max = maxX; 
```

（再次对 yaxis 执行类似操作）；

最后，重新绘制图表：`plot.replot();`

您的最终图表根据您的数据值具有界限，因此两侧没有无用的空白。

# open-source - 为 PHP 库选择哪种许可来进行收费的专利工作？

> ID：15496405
> 
> 赞同：1
> 
> 时间：2013-03-19T10:03:15.333
> 
> 标签：open-source, licensing

我开发了一个 PHP 库，它是我们 API 的包装器。

**专利：**通过 API 提供的服务受专利保护，任何使用该库的人都可能需要支付超出某些限制的使用费用。该许可不得授予任何使用该库的任何人任何专利许可。

**有多免费？**尽管该库是免费的，但可以不加修改地以相同名称复制和分发，但使用将根据限制收费。如果不付款，图书馆提供的服务将被中断。

**修改和重新分发：**尽管任何人都可以自由地查看、调试和修改库，但希望对库的修改不要以相同的名称发布或试图代表我们发布的原始和预期库。

**包含**的库：我们提供的库使用 Kenny Millington 的 PHPSecLib 和 SSS（Shamir 的秘密共享）库。PHPSecLib 在 MIT 许可下发布，而 SSS 在 GPLv3 或更高版本下。

鉴于这一切，我应该选择哪个许可证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:37:14.210

**专利：**

**有多免费？**

很多 API 库都是这样的。该库是免费的，但 API 使用的服务不是。例如，请参阅[Google AdWords API PHP Client](https://code.google.com/p/google-api-adwords-php/)。它是 Apache 许可的，它又与[GPL 兼容](http://www.gnu.org/licenses/license-list.html#apache2)。

**修改和重新分发：**

那是个问题。[PHP 许可证](http://www.gnu.org/licenses/license-list.html#PHP-3.01)有类似的限制，因此它不兼容 GPL 。当然，如果您不关心 GPL 兼容性...

**包含的库：**

麻省理工学院的许可证非常自由，您几乎可以做任何事情。然而，GPLv3 不是。如果您使用 GPLv3 代码，您的许可证将需要与 GPL 兼容，并且您想要施加的限制听起来好像不会。我的建议：也许重写 SSS？与 phpseclib 相比，它看起来像一个非常小的代码库。

# python - Python：并非所有参数都在字符串格式化期间转换

> ID：15496408
> 
> 赞同：2
> 
> 时间：2013-03-19T10:03:24.667
> 
> 标签：python, string, format

此代码给出错误

```
print('type a whole number:')
n = input()
if n % 2 == 1:
    print('Odd');
else:
    print('Even'); 
```

我假设我必须对 if 语句中的变量 n 做一些特别的事情？我是 Python 的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:05:17.027

以下是解决方法：

```
n = int(input("type a whole number:")) 
```

由于[input()](http://docs.python.org/3.1/library/functions.html#input)返回一个字符串，因此您需要先使用[int()](http://docs.python.org/3.1/library/functions.html#int)将其转换为 int 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:04:49.237

您需要先转换`n`为整数，在 py 3.x 中[`input()`](http://docs.python.org/3.1/library/functions.html#input)返回一个字符串。：

```
n = int(input()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:12:58.383

首先将用户输入转换`n`为整数。
即简单地改变：

```
n = input() 
```

到 ：

```
n = int(input()) 
```

此外，`input()`可以将字符串作为参数，在输入之前打印。
所以，你可以改变

```
print('type a whole number:')
n = int(input()) 
```

到

```
n = int(input('type a whole number:')) 
```

# iphone - 当用户输入每一行时，如何以编程方式滚动“UITextView”？

> ID：15496412
> 
> 赞同：0
> 
> 时间：2013-03-19T10:03:29.313
> 
> 标签：iphone, ios, uitextview

`UITextView`当用户输入每一行时，如何以编程方式滚动我的。

我的 textView 是必需的，因为键盘会在某些时候隐藏它，如下所示。 ![在此处输入图像描述](../Images/872106351bbfe2bfff2ed374552119ca.png)

我搜索了很多，但没有找到任何合适的解决方案，因为我是 iPhone 开发的新手。我需要你的宝贵帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:05:59.473

当你打开键盘时，你应该调整你的文本视图的框架。在这种情况下，将框架的高度降低键盘的高度。

为这两个委托方法实现正确的代码。

```
- (BOOL)textViewShouldBeginEditing:(UITextView *)textView
{
    CGRect frm = textView.frame;
    frm.height -= KEY_BOARD_HEIGHT;
    textView.frame = frm;
}
- (BOOL)textViewShouldEndEditing:(UITextView *)textView;
{
    CGRect frm = textView.frame;
    frm.height += KEY_BOARD_HEIGHT;
    textView.frame = frm;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:29:47.337

为滚动位置取一个变量::**`int scrollY;`**

**文本视图**代码::

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    if ([text isEqualToString:@"\n"])
    {
        scrollY += 10;
        scrMain.contentOffset = CGPointMake(0, scrollY);
    }
    return YES;
} 
```

然后，当用户从键盘退出时，将其再次设置为 0 并滚动到其原点位置。

```
scrollY = 0;
scrMain.contentOffset = CGPointMake(0, 0); 
```

希望，它可以帮助你。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:14:27.583

`UITextView`输入文本时自动滚动文本，您只需将`UITextView`框架更改为键盘上方，并且当您关闭键盘重置`UITextView`框架时

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
   //set frame for text view here
}
- (void)textViewDidEndEditing:(UITextView *)textView
{
  //set frame for text view here
} 
```

# sql-server-2008 - excel、ms-query 和 datetime 参数查询 ms sql server

> ID：15496416
> 
> 赞同：0
> 
> 时间：2013-03-19T10:03:40.500
> 
> 标签：sql-server-2008, parameter-passing, excel-2010, ms-query

我正在尝试使用 DATETIME 格式的一个参数在 Excel 2010 到 MS SQL-Server 2008 中运行 SQL 查询：

```
SELECT * FROM mytable WHERE myCreateDate > ? 
```

在 MS SQL-Server 中，myCreateDate 列是 DATETIME。该参数来自 Excel 中的一个单元格。

我必须在 Excel 单元格中输入什么？如果我直接在 msquery 中创建查询，它会写

```
myCreateDate > {ts '2013-03-19 10:01:36'} 
```

它有效。但我不能让它与一个参数一起工作。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T10:03:58.977

要更改参数，只需在 Data>connections> 中编辑查询。将日期时间更改为 ? 当您关闭时，系统会提示您选择一个 Excel 单元格。只需以任何格式在单元格中输入日期，它应该可以工作。

# java - 使用 Java 解析 XML 时出错

> ID：15496418
> 
> 赞同：2
> 
> 时间：2013-03-19T10:03:51.270
> 
> 标签：java, xml, parsing

我正在尝试解析从 Google Geocode Api 获得的 xml 文档。

我的 XML 文件。我在同一个文件中有一系列这样的数据。这只是一个节点

```
<?xml version="1.0" encoding="UTF-8"?> 
<GeocodeResponse>
<status>OK</status>
 <result>
  <formatted_address>Petroleum House, Jamshedji Tata Road, Churchgate, Mumbai, Maharashtra 400020, India</formatted_address>
  <address_component>
<long_name>Petroleum House</long_name>
<short_name>Petroleum House</short_name>
</address_component>
<address_component>
<long_name>Jamshedji Tata Road</long_name>
<short_name>Jamshedji Tata Road</short_name>
<type>route</type>
</address_component>
<address_component>
<long_name>Churchgate</long_name>
<short_name>Churchgate</short_name>
<type>sublocality</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Mumbai</long_name>
<short_name>मॿंबई&lt;/short_name>
<type>locality</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Mumbai</long_name>
<short_name>Mumbai</short_name>
<type>administrative_area_level_2</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Maharashtra</long_name>
<short_name>MH</short_name>
<type>administrative_area_level_1</type>
<type>political</type>
</address_component>
<address_component>
<long_name>India</long_name>
<short_name>IN</short_name>
<type>country</type>
<type>political</type>
</address_component>
<address_component>
<long_name>400020</long_name>
<short_name>400020</short_name>
<type>postal_code</type>
</address_component>
<geometry>
<location>
<lat>18.9291061</lat>
<lng>72.8255146</lng>
</location>
<location_type>APPROXIMATE</location_type>
<viewport>
<southwest>
<lat>18.9277189</lat>
<lng>72.8240293</lng>
</southwest>
<northeast>
<lat>18.9304168</lat>
<lng>72.8267272</lng>
</northeast>
</viewport>
<bounds>
<southwest>
<lat>18.9288559</lat>
<lng>72.8251686</lng>
</southwest>
<northeast>
<lat>18.9292798</lat>
<lng>72.8255879</lng>
</northeast>
</bounds>
</geometry>
</result>
</GeocodeResponse> 
```

我正在尝试使用以下代码，但出现了一些错误。这是我第一次尝试解析 XML。

```
import java.io.File;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class parser {

public static void main(String args[]) {
    try {

        File stocks = new File("filename.xml");
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory
                .newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(stocks);
        doc.getDocumentElement().normalize();

        System.out.println("root of xml file"
                + doc.getDocumentElement().getNodeName());
        NodeList nodes = doc.getElementsByTagName("address_component");
        System.out.println("==========================");

        for (int i = 0; i < nodes.getLength(); i++) {
            Node node = nodes.item(i);

            if (node.getNodeType() == Node.ELEMENT_NODE) {
                Element element = (Element) node;
                System.out.println("Name: "
                        + getValue("long_name", element));
                System.out.println("lat: " + getValue("lat", element));
                System.out.println("lon: " + getValue("lon", element));
            }
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

private static String getValue(String tag, Element element) {
    NodeList nodes = element.getElementsByTagName(tag).item(0)
            .getChildNodes();
    Node node = (Node) nodes.item(0);
    return node.getNodeValue();
} 
```

`` }

我得到的错误

```
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 3 of 3-byte UTF-8 sequence.
at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.scanContent(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
at javax.xml.parsers.DocumentBuilder.parse(Unknown Source)
at parser.main(parser.java:17) 
```

来自 Google 的直接输出

```
<?xml version="1.0" encoding="UTF-8"?>
<GeocodeResponse>
<status>OK</status>
<result>
<formatted_address>Petroleum House, Jamshedji Tata Road, Churchgate, Mumbai, Maharashtra 400020, India</formatted_address>
<address_component>
<long_name>Petroleum House</long_name>
<short_name>Petroleum House</short_name>
</address_component>
<address_component>
<long_name>Jamshedji Tata Road</long_name>
<short_name>Jamshedji Tata Road</short_name>
<type>route</type>
</address_component>
<address_component>
<long_name>Churchgate</long_name>
<short_name>Churchgate</short_name>
<type>sublocality</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Mumbai</long_name>
<short_name>à¤®à¥?à¤‚à¤¬à¤ˆ&lt;/short_name>
<type>locality</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Mumbai</long_name>
<short_name>Mumbai</short_name>
<type>administrative_area_level_2</type>
<type>political</type>
</address_component>
<address_component>
<long_name>Maharashtra</long_name>
<short_name>MH</short_name>
<type>administrative_area_level_1</type>
<type>political</type>
</address_component>
<address_component>
<long_name>India</long_name>
<short_name>IN</short_name>
<type>country</type>
<type>political</type>
</address_component>
<address_component>
<long_name>400020</long_name>
<short_name>400020</short_name>
<type>postal_code</type>
</address_component>
<geometry>
<location>
<lat>18.9291061</lat>
<lng>72.8255146</lng>
</location>
<location_type>APPROXIMATE</location_type>
<viewport>
<southwest>
<lat>18.9277189</lat>
<lng>72.8240293</lng>
</southwest>
<northeast>
<lat>18.9304168</lat>
<lng>72.8267272</lng>
</northeast>
</viewport>
<bounds>
<southwest>
<lat>18.9288559</lat>
<lng>72.8251686</lng>
</southwest>
<northeast>
<lat>18.9292798</lat>
<lng>72.8255879</lng>
</northeast>
</bounds>
</geometry>
</result>
</GeocodeResponse> 
```

这是google的直接输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:06:46.917

我怀疑文件在保存时被错误编码。

您的文件在顶部显示 UTF-8，但无论保存什么，*都没有*将其保存为 UTF-8。您应该能够通过另一个支持 XML 的工具来确认这一点，例如浏览器或命令行工具，例如[XMLStarlet](http://xmlstar.sourceforge.net/)。

您可以直接从 Google 服务获得输入吗？即不要将其保存为中间文件。如果只是为了确认这个问题，那将是值得的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:18:29.810

我会说它与文件编码有关。如果您在 windows 机器上，它可以将 xml 文件转换为 windows ISO 格式而不是 UTF-8

我会尝试更换

```
Document doc = dBuilder.parse(stocks); 
```

和：

```
Document doc = dBuilder.parse(new FileInputStream(stocks), "UTF8"))); 
```

确保输入文件被读取为 UTF-8

编辑：如何使用记事本++检查文件编码

![Notepad++ 编码检查](../Images/6217f8a1118569be0a53be43a55c1c7f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:11:12.393

您可以尝试像这样解析您的文件：

```
File file = new File("filename.xml");
InputStream inputStream= new FileInputStream(file);
Reader reader = new InputStreamReader(inputStream,"UTF-8");
InputSource is = new InputSource(reader);
is.setEncoding("UTF-8");
Document doc = dBuilder.parse(is); 
```

这只是一个疯狂的猜测...

# session - Icefaces 1.8.2 没有会话的页面

> ID：15496420
> 
> 赞同：0
> 
> 时间：2013-03-19T10:03:52.993
> 
> 标签：session, scalability, icefaces

我有一个企业应用程序，其中有两种类型的用户： - 客人（只能访问有限的页面） - 会员（登录） 整个应用程序是使用 icefaces 1.8.2 构建的。

由于可扩展性问题，我希望访客页面**不要**创建会话。一种解决方案是使用**just-ice.jar**代替**icefaces.jar**，但在开发方面重新编写 JSP 页面非常昂贵。

是否有任何简单的解决方案可以简单地防止 icefaces 为特定页面创建会话和 D2D 渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:45:12.927

在标准的 icefaces Web 应用程序中是可能的。

[从svn trunk](http://anonsvn.icesoft.org/repo/icefaces/trunk/icefaces)尝试 Icefaces 1.8 。会话管理中的严重内存泄漏已在几个月前得到修复。查看[http://jira.icesoft.org/browse/ICE-8833](http://jira.icesoft.org/browse/ICE-8833)。目前这个与 JSF-RI 一起使用的版本非常稳定。

另外将数据的公共部分移动到应用程序 bean 并将请求页面更改为请求范围。它应该与数百个并行用户一起工作。

最后在高负载下测试它并在 VisualVM 中查看内存泄漏或锁定线程。可能需要一些简单的小调整。

# android - 通过whatsapp分享图片和文字

> ID：15496422
> 
> 赞同：5
> 
> 时间：2013-03-19T10:03:55.203
> 
> 标签：android, android-intent, whatsapp, shareactionprovider

我使用以下代码通过 WhatsApp 共享图像和文本。但是，它仅共享图像，而不共享文本。我在整个互联网上进行了搜索，但没有找到解决方案。

```
 String message = Fname + Mobileno + Homeno + Workmail + Homemail
                + Gtalk + Skype + Address + Company + Title + Website;
      Intent shareIntent = new Intent(Intent.ACTION_SEND); 
      Uri uri = Uri.parse("file://"
                + Environment.getExternalStorageDirectory()
                + "/Talk&Share/Images/profpic.png");

      shareIntent.putExtra(Intent.EXTRA_TEXT, message); 
      shareIntent.putExtra(Intent.EXTRA_SUBJECT, "Contact"); 
      if(uri != null){
       shareIntent.putExtra(Intent.EXTRA_STREAM, uri);
       shareIntent.setType("image/plain");
      }else{
       shareIntent.setType("plain/text");
      }

         return shareIntent; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-17T11:43:27.210

Whatsapp 支持图像与文本共享。

```
Intent shareIntent = new Intent();
shareIntent.setAction(Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_TEXT,title + "\n\nLink : " + link );
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse(imageFilePath));
shareIntent.setType("image/*");
startActivity(Intent.createChooser(shareIntent, "Share image via:")); 
```

这将共享图像，EXTRA_TEXT 将被视为图像标题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-02-25T06:30:03.720

采用：

```
Intent.ACTION_SEND_MULTIPLE 
```

代替：

```
Intent.ACTION_SEND 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-20T14:33:39.997

这是不可能的，因为 WhatsApp 不支持同时包含图片和文字的消息。消息可能由单个图像、文本序列、音频文件、联系人或视频组成。你不能有任何这些的组合。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-19T10:14:38.980

```
Intent i = new Intent(android.content.Intent.ACTION_SEND);
 i.setType("text/plain");
 i.putExtra(Intent.EXTRA_SUBJECT, "Subject");
 i.putExtra(Intent.EXTRA_TEXT, "Message body");
startActivity(Intent.createChooser(i, "Share dialog title")); 
```

# ios - 无法从 Appcelerator iPhone 应用程序以开发模式连接到 GWT 项目

> ID：15496424
> 
> 赞同：1
> 
> 时间：2013-03-19T10:04:04.897
> 
> 标签：ios, gwt, ios-simulator, jetty, appcelerator-mobile

我有一个 GWT 应用程序，其中包含一个 servlet 来处理我的 Appcelerator 移动应用程序请求。我在项目 x-arguments 中使用 -bindAddress 0.0.0.0 将 GWT 应用程序绑定到所有 IP。当我运行 Andriod 版本的移动应用程序时，一切正常。但是当我运行 iOS 版本时，移动应用程序挂起等待连接并最终无法连接（当我使用 iOS 模拟器时也会发生同样的事情）。另一方面，如果我编译 GWT 应用程序并将其部署在 Tomcat 服务器下本地，Android 和 iOS 连接正常并且一切正常。此外，我的 Mac 上的 GWT 码头端口 8888 和 9997 都是打开的。

任何我知道可能是什么问题？

# c++ - 如何在运行时确定数据的大小（分配和释放）

> ID：15496427
> 
> 赞同：1
> 
> 时间：2013-03-19T10:04:08.547
> 
> 标签：c++

我有两个问题：

1.) 我想以功能方式对我的代码进行内存分析。代码可以有任何 STL 容器。有没有办法在linux中做到这一点？

2.）第二个是由于我的幼稚！如果我有一个数据结构

```
template < class T1 > struct somestruct
{
std::set < T1 > v1;
std::vector < T1 > v2;
std::vector < T1 > v3;
}; 
```

并且我知道 v1、v2 和 v3 的大小，那么我可以根据 sizeof(T1) 直接计算结构的大小还是我必须注意填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:19:04.623

我更喜欢在 linux 上使用[valgrind *massif* heap profiler ：](http://valgrind.org/docs/manual/ms-manual.html)

```
valgrind --tool=massif ./testprogram 
```

然后，

```
ms_print ./massif.out.16766 # replace with actual generated name 
```

将为您提供包含样本和峰值堆使用量的图表，以及像这样的细分

```
19.63^                                               ###                      
     |                                               #                        
     |                                               #  ::                    
     |                                               #  : :::                 
     |                                      :::::::::#  : :  ::               
     |                                      :        #  : :  : ::             
     |                                      :        #  : :  : : :::          
     |                                      :        #  : :  : : :  ::        
     |                            :::::::::::        #  : :  : : :  : :::     
     |                            :         :        #  : :  : : :  : :  ::   
     |                        :::::         :        #  : :  : : :  : :  : :: 
     |                     @@@:   :         :        #  : :  : : :  : :  : : @
     |                   ::@  :   :         :        #  : :  : : :  : :  : : @
     |                :::: @  :   :         :        #  : :  : : :  : :  : : @
     |              :::  : @  :   :         :        #  : :  : : :  : :  : : @
     |            ::: :  : @  :   :         :        #  : :  : : :  : :  : : @
     |         :::: : :  : @  :   :         :        #  : :  : : :  : :  : : @
     |       :::  : : :  : @  :   :         :        #  : :  : : :  : :  : : @
     |    :::: :  : : :  : @  :   :         :        #  : :  : : :  : :  : : @
     |  :::  : :  : : :  : @  :   :         :        #  : :  : : :  : :  : : @
   0 +----------------------------------------------------------------------->KB     0                                                                   29.48

Number of snapshots: 25
 Detailed snapshots: [9, 14 (peak), 24] 
```

故障会像

```
--------------------------------------------------------------------------------
  n        time(B)         total(B)   useful-heap(B) extra-heap(B)    stacks(B)
--------------------------------------------------------------------------------
 10         10,080           10,080           10,000            80            0
 11         12,088           12,088           12,000            88            0
 12         16,096           16,096           16,000            96            0
 13         20,104           20,104           20,000           104            0
 14         20,104           20,104           20,000           104            0
99.48% (20,000B) (heap allocation functions) malloc/new/new[], --alloc-fns, etc.
->49.74% (10,000B) 0x804841A: main (example.c:20)
| 
->39.79% (8,000B) 0x80483C2: g (example.c:5)
| ->19.90% (4,000B) 0x80483E2: f (example.c:11)
| | ->19.90% (4,000B) 0x8048431: main (example.c:23)
| |   
| ->19.90% (4,000B) 0x8048436: main (example.c:25)
|   
->09.95% (2,000B) 0x80483DA: f (example.c:10)
  ->09.95% (2,000B) 0x8048431: main (example.c:23) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:26:54.100

直接`sizeof()`的 struct 将返回编译时大小，即它不会考虑容器的实际大小。因此，您可能希望手动遍历每个容器并累加每个元素的大小。

但对您来说更简单的方法可能是使用分析器（例如 gprof (GNU Profiler)）或任何其他

# json - 集合中的骨干（客户端）过滤器性能问题

> ID：15496428
> 
> 赞同：0
> 
> 时间：2013-03-19T10:04:14.297
> 
> 标签：json, backbone.js, filtering, marionette

我正在从骨干集合中的服务器加载一些初始数据。我设置了一个搜索输入，它会触发对服务器的 AJAX 调用，并在每个 keyup 处返回解析的 JSON。

我希望仅在客户端进行搜索。到目前为止，我已经设置了此代码（该功能发生在 #search 输入中的 keyup 上）：

todos 是一个骨干.marionette 集合

```
$('.content-search').on('keyup', '#search', function(e){
    e.preventDefault();
    var search = $('#search').val().toLowerCase();
    todos.update(initialData.todos);
    var json = todos.toJSON();
    var filteredJSON = filterJSON(json, search);
    dcis.update(filteredJSON);
}

function filterJSON(arr, part) {
    return arr.filter(function(obj) {
        return Object.keys(obj)
            .some(function(k) {
                console.log(obj[k]);
                if(typeof(obj[k]) == 'string'){
                    return obj[k].toLowerCase().indexOf(part) !== -1;
                }
            });
    });
}; 
```

它非常缓慢。实际上，使用 AJAX 调用调用服务器比使用过滤客户端更快！

任何想法为什么我的代码这么慢？JSON 相当大（500 多个条目）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T05:41:15.350

即使有 500 个条目，我也保证大部分工作都不是过滤 JSON。它在浏览器的渲染/绘制周期中，除非您手动更新 DOM 而不是使用主干渲染功能。

尝试`console.time('filterMyCollection')`在调用 filterJSON 的行上方进行第一个设置。而`console.timeEnd('filterMyCollection')`在它之后。

然后做同样的事情，但在主干渲染函数的第一行和 timeEnd 作为最后一行。

如果您要销毁和重新创建一个占用大量内存、CPU 和垃圾收集时间的模板。如果你需要帮助显示很多元素，你应该看看它是如何在 PerfView ( [https://github.com/puppybits/BackboneJS-PerfView](https://github.com/puppybits/BackboneJS-PerfView) ) 中完成的。它能够以 120FPS 的速度在 Chrome 中滚动浏览 1,000,000 个模型。

# sql - H2 数据库损坏

> ID：15496433
> 
> 赞同：3
> 
> 时间：2013-03-19T10:04:25.677
> 
> 标签：sql, jdbc, h2

有没有办法在应用程序启动 H2 数据库之前检查数据库损坏？如果我发现数据已损坏，我想在应用程序启动时从备份 zip 文件运行自动恢复。

我不能仅仅通过连接到数据库来检查它，因为如果数据库文件在那里，即使它是空的，我仍然可以连接并生成默认表。

我还想为数据库中的每个表创建一个选择语句以确保其正常工作。我没有在 H2 数据库中找到任何内置的 sql 函数来检查数据损坏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T19:39:53.810

要检查数据库文件是否存在，您可以使用

```
if (new java.io.File(databaseFileName).exists()) { ... } 
```

如果文件存在，但数据库已损坏，那么通常您将无法连接到它（尝试连接将引发异常）。这是我知道的最快的验证方式。

存在数据库文件存在但未完全初始化的小风险。如果是这种情况，则某些表不存在。验证所有表是否存在的标准方法是使用`DatabaseMetaData.getTables`.

但是，除非您使用一些危险的功能（例如禁用事务日志或禁用数据库文件锁定），否则如果您使用 H2 的最新版本，数据库不应该损坏。如果数据库确实损坏了，那么这可能是您如何使用 H2 的问题，或者可能是 H2 本身的错误。向 H2 Google Group 发送包含详细信息的邮件可能是有意义的。

# c - 声明常量指针最清晰的方法是什么？

> ID：15496435
> 
> 赞同：11
> 
> 时间：2013-03-19T10:04:33.863
> 
> 标签：c, pointers, coding-style

我正在使用一对使用指针作为唯一键的函数。我想声明一个常量指针用作键。执行此操作的最安全和最清晰的方法是什么？

这里有 2 种可能的方法，但这两种方法都有缺点。

1.  自引用指针：

    ```
    static const void * const propertyKey = &propertyKey;
    //...
    objc_getAssociatedObject(object, propertyKey); 
    ```

    缺点：声明很长而且看起来很吓人！很容易让不知道它的用途的人感到困惑。好处：一旦你理解了它的作用就很难使用它。

2.  应该引用的静态常量：

    ```
    static const char propertyKey;
    //...
    objc_getAssociatedObject(object, &propertyKey); 
    ```

    缺点：使用时必须引用变量而不是简单地使用，这很容易错过（但编译器应该指出这是类型不匹配）。如果修改声明以便分配一个值，那么它可能会产生灾难性的影响，因为不再能保证指针的唯一性。好处：声明更容易理解。

我认为这些都不是显而易见的。有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T14:31:24.417

我也喜欢你的第一个想法。我会同意的。您的第二个想法存在编译器可能会将多个`static const char`变量合并为一个的风险，因为它们保证始终保持该值`0`，并且从编译器的角度来看，我不肯定它们足够不同。而且我想不出比您的第一个想法更好的解决方案。

（从评论中的讨论中得到答案。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:05:59.193

3：设置为有意义但独特的指针：

```
static const void *const key = "PropertyKey"; 
```

# sed - sed 正则表达式查找监视器分辨率

> ID：15496437
> 
> 赞同：1
> 
> 时间：2013-03-19T10:04:41.227
> 
> 标签：sed, grep

使用`xrandr | grep '*'`我想找到我们网络上所有显示器的 x 分辨率。这是为了帮助在其他脚本中自动放置 xterm。

我们的一些系统正在运行 redhat 6.4，而另一些系统正在运行 redhat 5.8，xrandr 的结果因 redhat 版本而异

对于 redhat 6.4`xrandr | grep '*'`返回

`1680x1050 60.0*+`

对于红帽 5.8

`*0 1680 x 1050 ( 474mm x 303mm ) *50`

我已经尝试过`xrandr | grep '*' | sed 's/\s+\(\d\{4\}\)\s*x\s*\d+/\1/'`，但这会返回与上面突出显示的 5.8 和 6.4 相同的字符串。在这两种情况下，所需的输出都是 1680

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:12:24.407

试试这一行：

```
xrandr|grep -Po '\d+(?=\s*x.*\*.*)' 
```

例子：

```
kent$ echo '1680x1050 60.0*+
*0 8888 x 1050 ( 474mm x 303mm ) *50
without star'|grep -Po '\d+(?=\s*x.*\*.*)'
1680
8888 
```

在上面的示例中，我将一个 X 更改为`8888`并添加了 oneline 而没有`*`显示它适用于这些情况。

您可以尝试的另一种方法，使用**xdpyinfo**

```
 xdpyinfo| grep dimens|grep -oP '(?<=\s)\d+' 
```

# java - 如何从Java字符串中去除大括号？

> ID：15496446
> 
> 赞同：0
> 
> 时间：2013-03-19T10:05:10.577
> 
> 标签：java, regex, string

我的 Java 应用程序将获得以下形式的字符串：

```
How now [[brown cow ]]. The arsonist [[ had oddly shaped ]] feet. The [[human torch was denied]] a bank loan. 
```

并且需要一个正则表达式/方法来去除`[[ ]]`（以及所有包含的文本）的每个实例，从而将上述字符串转换为：

```
How now. The arsonist  feet. The  a bank loan. 
```

注意保留的双空格（在`arsonist`and`feet`之间，和 between `The`and `a`）？这也很重要。

不确定此处的正则表达式是否合适，或者是否有更有效的方法来剔除不需要的`[[ ]]`实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:09:48.650

这是在javascript中。

```
var text = "How now [[brown cow ]]. The arsonist [[ had oddly shaped ]] feet. The [[human torch was denied]] a bank loan."
text.replace(/\[\[[^\]]+\]\]/g, "") 
```

匹配大括号的正则表达式将是

```
/\[\[[^\]]+\]\]/g 
```

所以Java等价物将是

```
text.replaceAll("\[\[[^\]]+\]\]", ""); 
```

并将其替换为空字符串

正则表达式，可以同时删除双括号和三括号

```
text.replaceAll("\[?\[\[[^\]]+\]\]\]?", "") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:14:51.153

这很简单`replaceAll`

```
str = str.replaceAll( "\\[\\[[^\\]]*\\]\\]", "" ); 
```

假设`]`括号内为否。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T10:15:27.410

尝试使用此代码：

```
public class Test{
public static void main(String[] args) {
    String input = "How now [[brown cow ]]. The arsonist [[ had oddly shaped ]] feet. The [[human torch was denied]] a bank loan.";
    // Will replace all data within braces []
    String replaceAll = input.replaceAll("(\\[.+?\\])|(\\])", "");
    System.out.println(replaceAll);
} 
```

}

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T10:17:35.520

```
tring s = "How now [[brown cow ]]. The arsonist [[ had oddly shaped ]] feet. The [[human torch was denied]] a bank loan.";

s=s.replaceAll("\\[.*?\\]","").replace("]",""); 
```

输出：

```
How now . The arsonist  feet. The  a bank loan. 
```

# scala - JMock 和 Scala - 意外调用错误

> ID：15496447
> 
> 赞同：0
> 
> 时间：2013-03-19T10:05:10.693
> 
> 标签：scala, junit, mocking, jmock

我是 JMock 的新手，并试图通过 Scala 进行简单的单元测试。测试是模拟一个接口，然后在模拟接口上执行一个方法之前设置一些期望值。

```
 val context = new Mockery
 val mockObj= context.mock(classOf[SomeClassInterface])

 @Test def sometest = {
 context.checking(
      new Expectations() {
        allowing (mockObj).doFunc1(); 
        will(returnValue(someResponse);
        allowing (mockObj).doFunc2(someResponse); 
        will(returnValue(someResponse));
        allowing (mockObj).doFunc3(someResponse); 
        will(returnValue("Enabled"));
       }
 )
 var status:String = mockObj.doSomething()
 //context.assertIsSatisfied();
 Assert.assertTrue(status.equalsIgnoreCase("Enabled")) 
```

}

这会导致错误；

> 意外调用；mockObj.doSomething() ......在这之前发生了什么；没有！

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:47:46.197

不确定 Scala，但您是否缺少双 '{{' '}}' 语法？我们对此感到非常抱歉，但这是我们在 Java 中所能做的最好的事情。

外部“{}”是一个匿名子类，内部“{}”是一个初始化块。

# firefox - 在 Firefox (api) 中缓冲 Youtube 视频

> ID：15496448
> 
> 赞同：0
> 
> 时间：2013-03-19T10:05:14.510
> 
> 标签：firefox, youtube, youtube-api, html5-video, buffering

我注意到在带有 html5 嵌入视频的 Firefox 中，如果我嵌入 youtube 视频，即使视频暂停，视频缓冲区也会像疯了一样。在 Chrome 中，缓冲是管理的。这是一个已知的错误？是否有可能通过 youtube api 管理缓冲。我看到了几个用于 Firefox 的插件来控制它。（[https://addons.mozilla.org/de/firefox/addon/smartvideo-for-youtube-mytube/](https://addons.mozilla.org/de/firefox/addon/smartvideo-for-youtube-mytube/)Is) ）有没有办法通过网站本身的Javascript来控制缓冲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T19:08:39.640

没有用于控制缓冲的 API，一般来说，它是由播放器中的逻辑控制的。有几个因素起作用，包括一些可能与浏览器相关的因素。从开发人员的角度来看，它故意是一个黑匣子。

# sharepoint-2013 - 如何使用 ImageData 发布到 SharePoint2013 社交源

> ID：15496453
> 
> 赞同：1
> 
> 时间：2013-03-19T10:05:19.977
> 
> 标签：sharepoint-2013, csom

我想将带有图像的消息发布到 SharePoint 2013 社交源。

在浏览器上，我可以发布带有图像的消息。但从 API（CSOM），我不能。我找了API，但找不到。

如何使用 CSOM 将包含图像的消息发布到社交源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:24:42.847

你必须玩 SocialAttachment 类：http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.social.socialattachment_members.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.social.socialattachment_members.aspx)

然后您可以定义附件的类型（图像、视频或文档）：http: [//msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.social.socialattachmentkind.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.social.socialattachmentkind.aspx)

```
SocialPostCreationData postCreationData = new SocialPostCreationData();
postCreationData.ContentText = "My feed content";

SocialAttachment attachment = new SocialAttachment();
attachment.AttachmentKind = SocialAttachmentKind.Image;
attachment.Uri = "Url_To_Image";
postCreationData.Attachment = attachment; 
```

现在，棘手的部分将包括在个人网站上上传当前提要中的图像。

# python - 在 pandas Series 或 DataFrame 中生成组组合

> ID：15496454
> 
> 赞同：1
> 
> 时间：2013-03-19T10:05:21.697
> 
> 标签：python, pandas

我有一个这样的熊猫`DataFrame`：

```
 Type     time
 A        0
 A        1
 A        2
 B        0
 B        1
 B        2 
```

我需要生成一个结构如下的列表（或系列）：

```
["A.1-A.0", "A.2-A.0", "B.1"-"B.0", "B.2"-"B.0"] 
```

`groupby`或类似的功能是否能够生成这样的列表（或系列）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:41:43.813

```
import pandas as pd
from StringIO import StringIO

data =  StringIO("""Type     time
A        0
A        1
A        2
B        10
B        11
B        12""")
df = pd.read_csv(data, delim_whitespace=True, dtype="O")

def set_first(x):
    x["ptime"] = x.time.values[0]
    x = x[1:]
    r = x.Type + "." + x.time + "-" + x.Type + "." + x.ptime
    return r

print df.groupby(df.Type, group_keys=False).apply(set_first) 
```

输出：

```
1      A.1-A.0
2      A.2-A.0
4    B.11-B.10
5    B.12-B.10 
```

# struts2 - 为什么我的自定义拦截器不起作用

> ID：15496455
> 
> 赞同：3
> 
> 时间：2013-03-19T10:05:32.383
> 
> 标签：struts2, interceptor, interceptorstack

我定义了一个用于记录时间的自定义拦截器，但它不起作用。这是我的自定义拦截器代码：

```
public class TimeConsumedInterceptor extends AbstractInterceptor
{

/*
 * {@inheritDoc}
 */
@Override
public String intercept(ActionInvocation invocation) throws Exception
{
    long start = System.currentTimeMillis();
    String result = invocation.invoke();
    long end = System.currentTimeMillis();
    System.out.println("time consumed: " + (end - start));
    return result;
}

} 
```

我定义了一个新的xml文件：ecs-default.xml（它直接在`src`包下）

```
<struts>
<include file="struts-default.xml"></include>
<!-- ecs-default package is abstract -->
<package name="ecs-default" extends="struts-default" abstract="true">
    <interceptors>
        <interceptor name="ecsTimer" class="com.nader.interceptor.TimeConsumedInterceptor"></interceptor>

        <interceptor-stack name="ecsStack">
            <interceptor-ref name="ecsTimer"></interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>
        </interceptor-stack>
    </interceptors>
           <!-- default stack used for ecs-default package -->
    <default-interceptor-ref name="ecsStack"></default-interceptor-ref>

    <global-results>
        <result name="error">error.jsp</result>
    </global-results>

    <global-exception-mappings>
        <exception-mapping exception="java.lang.Exception" result="error" />
    </global-exception-mappings>

</package>
</struts> 
```

和 struts.xml 文件：

```
<struts>
<include file="ecs-default.xml"></include>
  <!-- define two empty package, / and /manager, extends ecs-default package -->
<package name="default" namespace="/" extends="ecs-default">
</package>

<package name="manager" namespace="/manager" extends="ecs-default">
</package>

</struts> 
```

`com.opensymphony.xwork2.DefaultActionInvocation`我在类中调试代码，`List<InterceptorMapping> interceptorList = new ArrayList<InterceptorMapping>(proxy.getConfig().getInterceptors());`返回`proxy.getConfig().getInterceptors()`struts-default.xml中定义的defaultStack的18个拦截器，我的ecsTimer拦截器不在里面。所以为什么？我的配置有问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:20:50.470

`DefaultActionInvocation`正在为每个动作执行创建。您只需要执行使用自定义拦截器配置的操作即可在调试中查看它。

顺便说一句，已经有`timer`拦截器可以满足您的要求。

# mono - Mono 移动配置文件中的 System.Configuration (Xamarin.Android)

> ID：15496465
> 
> 赞同：-2
> 
> 时间：2013-03-19T10:05:50.437
> 
> 标签：mono, xamarin.android

为什么它不见了？您如何存储应用程序设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:07:49.777

看看 Android 中的共享首选项。

# iphone - 在按钮操作上传递参数：通过点击 UIButton 来自 UITableviewCell 的@selector

> ID：15496468
> 
> 赞同：0
> 
> 时间：2013-03-19T10:05:55.910
> 
> 标签：iphone, uitableview, selector, sender

我有个问题。

单击 UITableViewCell 的子视图按钮后，我试图传递参数，这是我的源代码：

```
 - (UITableViewCell *)tableView:(UITableView *)_tableView cellForRowAtIndexPath:(NSIndexPath   *)indexPath
    {

    MSContactCell *cell = (MSContactCell *)[_tableView dequeueReusableCellWithIdentifier: cellWithCheckId];
    MSContact *contact = [self.list objectAtIndex:indexPath.row];

    if (cell == nil)
        {
            cell = [[[NSBundle mainBundle] loadNibNamed:@"MSContactCell"
                                                  owner:self
                                                options:nil] lastObject];

          cell.delegate = self;
        // cell.index = indexPath.row;

            cell.backgroundView.backgroundColor = [UIColor colorWithRed:0.882 green:0.863 blue:0.839 alpha:1.0];
        }
    cell.title.text = [contact contactName];
    cell.jobTitle.text = [contact jobDescription];

    cell.callButton.contactStr = [contact phoneNumber];
      [cell.callButton addTarget:self action:@selector(callPressed:) forControlEvents:UIControlEventTouchUpInside];         
    return cell;
} 
```

和：

```
- (IBAction)callPressed:(id)sender
{
        contactButton *button = (contactButton *)sender;

    UIDevice *device = [UIDevice currentDevice];
    if ([[device model] isEqualToString:@"iPhone"] ) {
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", button.contactStr]]];
    } else {
        UIAlertView *Notpermitted=[[UIAlertView alloc] initWithTitle:@"Alert" message:@"Your device doesn't support this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [Notpermitted show];
        [Notpermitted release];
    }
 } 
```

一切似乎都很好，但是当我调试时出现问题：

```
 (lldb) po button
   $4 = 0x2084d5a0 <MSContactCell: 0x2084d5a0; baseClass = UITableViewCell; frame = (0 0; 320 95);        
   autoresize = W; layer = <CALayer: 0x2085dd70>> 
```

如何将按钮识别为按钮而不是单元格？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:15:19.390

如果发件人是一个`MSContactCell`为什么不使用它来获取`contactButton`？

```
 - (IBAction)callPressed:(id)sender
  {
    contactButton *myCell = (MSContactCell *)sender;
    contactButton *button = myCell. callButton;
    ...

  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:49:21.860

在里面试试这个

```
 - (IBAction)callPressed:(id)sender
{
    for (UIView *parent = [sender superview]; parent != nil; parent = [parent superview]) {
            if ([parent isKindOfClass: [UITableViewCell class]]) {
                UITableViewCell *cell = (UITableViewCell *) parent;
                UIButton * button =  (UIButton *)[cell viewWithTag:yourButtonsTag];
               }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:28:15.143

它在哪条线上给出了这个......

```
 (lldb) po button
      $4 = 0x2084d5a0 <MSContactCell: 0x2084d5a0; baseClass = UITableViewCell; frame  = (0 0; 320 95);        
    autoresize = W; layer = <CALayer: 0x2085dd70>> 
```

我认为在您的 cellForRowAtIndexPath 方法中，您还必须将按钮的标记值设置为 indexpath 行，即。

```
 cell.callButton.tag=[indexPath row] 
```

这样您就可以轻松识别每个按钮。

& 仍然没有，那么您可以将按钮作为自定义视图添加到表格视图单元格，这样会更容易。

# php - 用于物业管理系统的 php 中的电子邮件处理

> ID：15496469
> 
> 赞同：0
> 
> 时间：2013-03-19T10:05:58.860
> 
> 标签：php, html

我要建立物业管理系统。如果客户端将邮件发送到邮件 support@example.com，我的系统和系统将获取信息并为邮件创建一个号码并再次将其发送给管理员。我搜索了很多次，但问题是我不知道关键字。请帮我找到任何关键字并提供建议。

# java - javadoc 工具能识别方法内的注释吗？

> ID：15496472
> 
> 赞同：13
> 
> 时间：2013-03-19T10:06:00.120
> 
> 标签：java, javadoc

我在我的业务逻辑中写了很多这样的评论：

```
/**
 * Do some important stuff.
 * @param pDog
 * @param pAllDogTraining
 * @return
 */
@Overwrite
public Map<DogId, Dog> doEvaluateAllDog(final Dog pDog, final Collection<DogTraining> pAllDogTraining) {
final Map<DogId, Dog> lAllDogBad = new HashMap<DogId, Dog>();
final List<DogTraining> lAllDogTraining = new ArrayList<DogTraining>(pAllDogTraining);

/**
 * Remove deleted entries.
 * Detailed description
 */
removeDeletetTrainings(lAllDogTraining);

/**
 * Set the priority for each training
 *  - bad dogs
 *  - nice dogs
 *  - unknown dogs
 * Detailed description
 */
Collections.sort(lAllDogTraining, new DogTrainingComparator());

// Iterate over training elements and set the conflict state
for(..... 
```

我的问题是，该`javadoc`工具是否也能识别我的方法块中的文档注释？在不久的将来，我们将提供技术文档，我们项目的 JavaDoc 将成为其中的一部分。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T10:06:34.817

> 该`javadoc`工具是否也能识别我的方法块中的文档注释？

不。

JavaDoc 注释是一个多行注释，开头`/**`紧接在类声明或类的方法或属性之前。

# cmake - CMAKE 输出目录取决于生成器架构

> ID：15496473
> 
> 赞同：1
> 
> 时间：2013-03-19T10:06:00.310
> 
> 标签：cmake

假设构建目标的人将使用适当的生成器（请参阅[CMake Multiarchitecture Compilation](https://stackoverflow.com/questions/5334095)），

如何相应地指定输出目录。

就像是：

```
if(WIN32)
    if(64bit)
       set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ./DEBUG/win64)
    elseif(32bit)
       set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_DEBUG ./DEBUG/win32)
    endif()
endif() 
```

依此类推，`if(UNIX)`考虑`if(APPLE)`到 CMake 哲学，可能相同的答案会起作用。

请注意，我不是在谈论交叉编译。并假设生成器是已知的。

# virtualbox - 使用 Puppet 安装 Virtualbox 扩展包

> ID：15496477
> 
> 赞同：1
> 
> 时间：2013-03-19T10:06:09.247
> 
> 标签：virtualbox, puppet

我试着用谷歌搜索这个，但在使用 vagrant 和 virtualbox 的人身上得到了 5000 次点击。

由于我的 virtualbox 有需要 USB 支持的机器，我需要安装扩展包。

我需要让 puppet 安装我的扩展包文件。

我目前有这个用于 VirtualBox：

```
class virtualbox(
  $ubuntu_release
) {
  apt::source { virtualbox:
    location    => 'http://download.virtualbox.org/virtualbox/debian',
    release     => $ubuntu_release,
    repos       => 'contrib',
    key         => '98AB5139',
    key_source  => "http://download.virtualbox.org/virtualbox/debian/oracle_vbox.asc",
    include_src => false,
  }
  package { virtualbox:
    name => 'virtualbox-4.2',
    ensure => present,
    require => Apt::Source['virtualbox']
  }
} 
```

有人有办法安装扩展包吗？恐怕如果我执行 exec，我将无法检查我是否实际安装了该包或它所在的版本，所以它只会继续重新安装。而且由于每次有新的 VirtualBox 版本时扩展包都会更新，所以我也需要能够更新它..

这是安装包的当前命令。

```
wget -nv http://download.virtualbox.org/virtualbox/4.2.10/Oracle_VM_VirtualBox_Extension_Pack-4.2.10-84104.vbox-extpack -P /tmp && VBoxManage extpack install /tmp/Oracle_VM_VirtualBox_Extension_Pack-4.2.10-84104.vbox-extpack --replace 
```

我尝试做一些事情，比如在文件中包含一个扩展包版本：

```
class vbox_extension {
    $packagever = "4210"
    $packagefile = "/var/log/puppet/vbox_extension.ver"
    exec { "vboxinst":
    command => "wget -nv http://download.virtualbox.org/virtualbox/4.2.10/Oracle_VM_VirtualBox_Extension_Pack-4.2.10-84104.vbox-extpack -P /tmp \
                && VBoxManage extpack install /tmp/Oracle_VM_VirtualBox_Extension_Pack-4.2.10-84104.vbox-extpack --replace \
                && echo \"$packagever\" > \"$packagefile\"",",
    unless  => "test \"`cat $packagefile 2>/dev/null`\" = \"$packagever\"",
    require => virtualbox
    }
} 
```

但这真的是最干净的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:18:14.410

我决定创建一个 debian 包，因为无论如何我们都在运行我们自己的 repo。

在 12.04 系统的 Ubuntu 12.10 上运行它。

以下是步骤：

成为根..

```
sudo su 
```

你需要FPM，FPM需要安装rubygems。

```
apt-get install rubygems
gem install fpm 
```

运行这个：

```
mkdir -p /opt/vbext
cd /opt/vbext
wget -nv http://download.virtualbox.org/virtualbox/4.2.10/Oracle_VM_VirtualBox_Extension_Pack-4.2.10-84104.vbox-extpack
cat <<EOF> /opt/vbext/installpack
#/bin/bash
VBoxManage extpack install /opt/vbext/Oracle_VM_VirtualBox_Extension_Pack-4.2.10-84104.vbox-extpack --replace
EOF
cat <<EOF> /opt/vbext/removepack
#/bin/bash
vboxmanage extpack uninstall "Oracle VM VirtualBox Extension Pack"
EOF
chmod +x installpack removepack
fpm -t deb -n extpack -v 4.2.10-84104 -d virtualbox-4.2 --after-install installpack --after-remove removepack -s dir /opt/vbext/ 
```

您现在将拥有一个打包整齐的 debian 软件包。

```
ls /opt/vbext/*.deb
extpack_4.2.10-84104_amd64.deb 
```

FPM 支持模板化脚本，但我现在懒得把它放进去..

# javascript - 使用 getElementsByTagName 时未定义 Textarea 值

> ID：15496480
> 
> 赞同：10
> 
> 时间：2013-03-19T10:06:15.067
> 
> 标签：javascript

我坚持了一件我需要做的非常简单的事情，我无法解释为什么会发生这种情况。我有一个`textarea`没有`id`或`class`或`name`的，所以用js选择它的唯一方法是使用`getElementsByTagName`。它是`textarea`我的 HTML 中唯一的，因此使用以下内容非常明显：

```
var theSrc = document.getElementsByTagName('textarea')[0].value; 
```

但是，当提醒我时，`theSrc`我总是得到`undefined`. 任何想法为什么会发生这种情况？

这是演示：http: [//jsfiddle.net/D3zBU/](http://jsfiddle.net/D3zBU/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T10:08:15.283

那是因为您在第一次读取脚本（位于页面的 HEAD 中）时读取了该值，甚至在 DOM 准备好之前。读取函数中的值：

```
function displayValue() {
    var theSrc = document.getElementsByTagName('textarea')[0].value;
    alert(theSrc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:14:37.527

在正文之后编写您的 js 或使用

```
$().ready(function(){
    //code
}); 
```

因为 head 在 body 之前加载，所以变量“theSrc”不知道文本区域

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:15:47.083

这是您编写 JavaScript 的问题，当您在 body 标记内编写时它可以正常工作。

```
<body>
--------textarea code
<script>
var theSrc = document.getElementsByTagName('textarea')[0].value;
</script>
</body> 
```

现在它将起作用。那是因为文档优先执行。

# c# - Windows-XP 中选定的 ListViewItem 颜色更改，但在 Windows-7 中没有

> ID：15496482
> 
> 赞同：2
> 
> 时间：2013-03-19T10:06:32.267
> 
> 标签：c#, xaml, windows-7

我有一个 ListView，我希望 selectedItem 的背景是红色的。它在 Windows-XP 中运行良好，但在 Windows-7 中没有任何变化。Windows XP 的默认选择是蓝色背景，但在 Windows7 中，我只在 ListViewItem 下看到一条细蓝线，而没有其他颜色作为背景。有什么我不知道的我应该为 Windows-7 添加的内容吗？会非常感谢您的帮助。

这就是我的 xaml 的外观：

```
<Style TargetType="{x:Type ListViewItem}" BasedOn="{StaticResource DefaultControlStyle}">
    <Setter Property="Cursor" Value="Hand" />
    <Setter Property="Height" Value="25" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="Background" Value="{StaticResource RowBackgroundBrush}" />
    <Setter Property="FontWeight" Value="Normal" />
    <Setter Property="ToolTip" Value="{Binding ItemToolTip}" />
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF0000"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="#FF0000"/>
    </Style.Resources>
</Style> 
```

如果您需要更多信息，请告诉我。

/N

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:15:05.383

此 XAML 在 Windows 7 中运行良好，将所选项目显示为红色..

由于我们不知道`DefaultControlStyle`您的基础是什么，我猜这是给您带来问题的地方。

我建议您在没有（仅使用上述 XAML）的情况下创建一个干净的新项目`DefaultControlStyle`并亲自查看。

# c# - 在 AutoFixture 自定义上调用 Dispose 方法

> ID：15496493
> 
> 赞同：7
> 
> 时间：2013-03-19T10:07:10.467
> 
> 标签：c#, integration-testing, autofixture

我正在使用 AutoFixture 自定义来测试访问 SQL Compact DB 的存储库。

测试完成后立即删除此数据库对我很有帮助。因为数据库是在自定义构造函数中创建的，所以我认为删除它的最佳位置是在 dispose 方法中。

我在想的代码是：

```
internal class ProjectRepositoryCustomization : ICustomization
{
    private readonly String _dbLocation;

    public ProjectRepositoryCustomization()
    {
        var tempDbLocation = Path.Combine(Path.GetTempPath(), "TempDbToDelete");
        if (!Directory.Exists(tempDbLocation))
        {
            Directory.CreateDirectory(tempDbLocation);
        }

        _dbLocation = Path.Combine(tempDbLocation, Guid.NewGuid().ToString("N") + ".sdf");
    }

    public void Customize(IFixture fixture)
    {   
        DataContextConfiguration.database = _dbLocation;

        var dataContextFactory = new BaseDataContextFactory();
        var projRepository = new ProjectRepository(dataContextFactory);
        fixture.Register(() => projRepository);
    }

    public void Dispose()
    {
        if (File.Exists(_dbLocation))
        {
            File.Delete(_dbLocation);
        }
    }
} 
```

有可能做类似的事情吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T14:17:31.313

正如@Ruben Bartelink 在评论中指出的那样，这是*可能的*。但是，我会推荐一种不同的方法，这就是原因。

管理对象的生命周期是您通常期望能够使用 IoC 容器执行的操作。然而，AutoFixture，即使它*看起来像*一个 IoC 容器，它实际上[并不是一个](http://blog.ploeh.dk/2010/08/19/AutoFixtureasanauto-mockingcontainer/#comments)：

> AutoFixture 与 DI Containers 有很多相似之处。它支持自动装配，并且可以配置为以许多有趣的方式创建实例。但是，由于关注点不同，它在某些事情上做得更好，而在某些事情上不如 DI Container。

AutoFixture 的主要目标是在一些可配置的范围内轻松创建[匿名测试数据。](http://blogs.msdn.com/b/ploeh/archive/2008/11/17/anonymous-variables.aspx)它的 API 专注于允许程序员自定义*测试*数据的生成方式，而不是*它*的生存时间，因为假设它只[在测试的上下文中使用](http://blog.ploeh.dk/2010/08/19/AutoFixtureasanauto-mockingcontainer/#comments)：

> AutoFixture 在生命周期管理方面较弱。永远不会期望一个 Fixture 存在于一个以上的测试用例中，因此对除了**Transient**和**Singleton**之外的任何其他生活方式进行建模是没有意义的。[...] 没必要，因为它不是 DI 容器。

另一方面，测试框架非常擅长管理测试夹具的生命周期。由于您所描述的通常是管理集成测试*上下文*的一部分，因此我会在执行夹具中的所有测试*之前*和*之后运行它。*

例如：

```
[TestFixture]
public class WithDatabaseContext
{
    private string dbLocation;
    private BaseDataContextFactory dataContextFactory

    protected BaseDataContextFactory DataContextFactory
    {
        get { return this.dataContextFactory; }
    }

    [TestFixtureSetUp]
    public void FixtureInit()
    {
        // Initialize dbLocation
        // Initialize dataContextFactory
    }

    [TestFixtureTearDown]
    public void FixtureDispose()
    {
        // Delete file at dbLocation
    } 
} 
```

然后，您的测试可以继承上下文并使用它来配置 AutoFixture：

```
[TestFixture]
public void SomeTest : WithDatabaseContext
{
    private IFixture fixture;

    [SetUp]
    public void Init()
    {
        this.fixture = new Fixture();
        this.fixture.Register(
            () => new ProjectRepository(base.DataContextFactory));
    }

    [Test]
    public void Doing_something_should_return_something_else()
    {
        // ...
    }
} 
```

在这种情况下，利用测试框架来管理临时数据库的生命周期可以清楚地传达其在测试上下文中的边界。在我看来，将其隐藏在 AutoFixture 自定义项中会使其变得不那么明显，并且可以说更难使用。

# android - 从安卓手机拉取文件

> ID：15496494
> 
> 赞同：0
> 
> 时间：2013-03-19T10:07:25.367
> 
> 标签：android, remote-access

是否可以使用计算机从 Android 设备远程提取文件？

有人对这种行为有任何经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:10:56.560

如果您不希望自动执行任务。最简单的方法是使用 Eclipse DDMS。那里有文件浏览器选项卡，您可以在其中浏览连接的设备和虚拟设备上的文件。

![在此处输入图像描述](../Images/4339ed89d2f9320098fd6161b2132225.png)

假设这就是你的意思。不太确定，因为问题有点不清楚

# java - 包括从一个 apt 到另一个 apt 的文本

> ID：15496497
> 
> 赞同：0
> 
> 时间：2013-03-19T10:07:30.587
> 
> 标签：java, maven, documentation-generation, apt, doxia

想象一下，我有三个 apt 文件：

main.apt

```
Info, details, etc..

    some text

Configuration

    some text 
```

child1.apt

```
Info, details, etc..

    some text

Configuration

    [Same text as MAIN.APT configuration] 
```

child2.apt

```
Info, details, etc..

    some text

Configuration

    [Same text as MAIN.APT configuration] 
```

我想遵循 DRY（不要重复自己）原则并重用 main.apt 中的文本并将其添加到 child1.apt 和 child2.apt。这确实有助于编写文档。

我尝试过使用片段（首先生成带有 id 的站点文档，然后添加对这些 id 的引用）：

```
~~START SNIPPET: id
~~END SNIPPET: id
%{snippet|id=id|url=http://svn.example.com/path/to/main.html} 
```

并使用生成的站点

```
 mvn site:stage 
```

，但这不起作用，因为它插入了未格式化为 html 的 html 文本块。我还尝试了片段中的逐字参数，它没有帮助。

也许有人有这个问题的解决方案和/或面临同样的问题？请告诉我你的故事，建议。解决方案可以节省我的时间:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:04:57.507

使用[速度](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#parse)。将 child1.apt 和 child2.apt 分别重命名为 child1.apt.vm 和 child2.apt.vm。然后更换

> ```
> [Same text as MAIN.APT configuration] 
> ```

和

```
#parse("main.apt") 
```

在*site.xml*中 ，像其他任何页面一样包含子页面：

```
<item name="child 1" href="child1.html"/> 
```

# cocos2d-iphone - 如何使用 cocos2d 用渐变填充多边形？

> ID：15496507
> 
> 赞同：2
> 
> 时间：2013-03-19T10:07:57.750
> 
> 标签：cocos2d-iphone, gradient, polygon

我正在使用 cocos2d 制作一个简单的游戏，我现在需要的是在背景上绘制带有渐变的填充多边形。我有背景层类，CCLayer 的子类，我重写了 draw() 方法并放了这些东西：

```
CGPoint verticesHill [] = { pointHill0, pointHill1, pointHill2, pointHill3, pointHill4, pointHill5 };
ccDrawSolidPoly(verticesHill, 6, ccc4FFromccc3B(ccc3(162,122,87))); 
```

当然，我之前定义了所有 6 点。但是现在我需要用渐变绘制这个多边形，我该怎么做呢？可以用openGL来做吗？可能我应该继承 CCLayerGradient 子类，设置颜色并将图层剪辑到我的多边形上吗？原因层将是矩形

# javascript - 如何在 JavaScript 中迭代对象？

> ID：15496508
> 
> 赞同：96
> 
> 时间：2013-03-19T10:08:02.097
> 
> 标签：javascript, arrays

我有这个对象。我想在 JavaScript 中迭代这个对象。这怎么可能？

```
var dictionary = {
    "data": [
        {"id":"0","name":"ABC"},
        {"id":"1","name":"DEF"}
    ],
    "images": [
        {"id":"0","name":"PQR"},
        {"id":"1","name":"xyz"}
    ]
}; 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-19T10:14:21.623

你可以用下面的代码来做。您首先使用 dictionary.data 获取数据数组并将其分配给数据变量。之后，您可以使用普通的 for 循环对其进行迭代。每行将是数组中的一个行对象。

```
var data = dictionary.data;

for (var i in data)
{
     var id = data[i].id;
     var name = data[i].name;
} 
```

您可以按照类似的方法来迭代图像数组。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-19T10:14:56.763

也有这种方式（EcmaScript5 的新手）：

```
dictionary.data.forEach(function(item){
    console.log(item.name + ' ' + item.id);
}); 
```

图像的相同方法

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-19T10:16:45.977

像这样的东西：

```
var dictionary = {"data":[{"id":"0","name":"ABC"},{"id":"1", "name":"DEF"}], "images": [{"id":"0","name":"PQR"},{"id":"1","name":"xyz"}]};

for (item in dictionary) {
  for (subItem in dictionary[item]) {
     console.log(dictionary[item][subItem].id);
     console.log(dictionary[item][subItem].name);
  }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-19T10:19:19.863

使用点符号和/或括号符号来访问对象属性和[`for`循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)以迭代数组：

```
var d, i;

for (i = 0; i < dictionary.data.length; i++) {
  d = dictionary.data[i];
  alert(d.id + ' ' + d.name);
} 
```

您还可以使用[`for`..`in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)循环迭代数组；但是，添加到的属性`Array.prototype`可能会显示出来，并且您可能不一定会以正确的顺序或什至以任何一致的顺序获取数组元素。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-19T10:13:10.217

使用生成器函数，您可以迭代深层键值。

```
function * deepEntries(obj) { 
    for(let [key, value] of Object.entries(obj)) {
        if (typeof value !== 'object') 
            yield [key, value]
        else 
            for(let entries of deepEntries(value))
                yield [key, ...entries]
    }
}

const dictionary = {
    "data": [
        {"id":"0","name":"ABC"},
        {"id":"1","name":"DEF"}
    ],
    "images": [
        {"id":"0","name":"PQR"},
        {"id":"1","name":"xyz"}
    ]
}

for(let entries of deepEntries(dictionary)) {
    const key = entries.slice(0, -1).join('.')
    const value = entries[entries.length-1]
    console.log(key, value)
}
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T10:14:36.600

```
for(index in dictionary) {
 for(var index in dictionary[]){
    // do something
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-28T13:42:29.770

```
var dictionary = {
        "data":[{"id":"0","name":"ABC"}, {"id":"1","name":"DEF"}],
        "images": [ {"id":"0","name":"PQR"},"id":"1","name":"xyz"}]
};

for (var key in dictionary) {
    var getKey = dictionary[key];
    getKey.forEach(function(item) {
        console.log(item.name + ' ' + item.id);
    });
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-16T12:02:28.570

使用 for 和 foreach 循环

```
var dictionary = {
     data: [{ id: "0", name: "ABC" }, { id: "1", name: "DEF" }],
     images: [{ id: "0", name: "PQR" }, { id: "1", name: "xyz" }]
};
dictionary.data.forEach(item => {
     console.log(item.id + " " + item.name);
});

for (var i = 0; i < dictionary.data.length; i++) {
     console.log(dictionary.data[i].id + " " + dictionary.data[i].name);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-28T13:01:12.857

这是您拥有的所有选项：

## 1\. [`for...of`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of)（ES2015）

```
var dictionary = {
    "data": [
        {"id":"0","name":"ABC"},
        {"id":"1","name":"DEF"}
    ],
    "images": [
        {"id":"0","name":"PQR"},
        {"id":"1","name":"xyz"}
    ]
};

for (const entry of dictionary.data) {
  console.log(JSON.stringify(entry))
}
```

## 2\. [`Array.prototype.forEach`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)(ES5)

```
var dictionary = {
    "data": [
        {"id":"0","name":"ABC"},
        {"id":"1","name":"DEF"}
    ],
    "images": [
        {"id":"0","name":"PQR"},
        {"id":"1","name":"xyz"}
    ]
};

dictionary.data.forEach(function(entry) {
  console.log(JSON.stringify(entry))
})
```

## 3\. [`for()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for)(ES1)

```
var dictionary = {
    "data": [
        {"id":"0","name":"ABC"},
        {"id":"1","name":"DEF"}
    ],
    "images": [
        {"id":"0","name":"PQR"},
        {"id":"1","name":"xyz"}
    ]
};

for (let i = 0; i < dictionary.data.length; i++) {
  console.log(JSON.stringify(dictionary.data[i]))
}
```

# ruby - Ruby 1.9 - 基于正则表达式转换哈希

> ID：15496510
> 
> 赞同：2
> 
> 时间：2013-03-19T10:08:08.727
> 
> 标签：ruby

> 需要转换 {"P1" => "ABC", "R1" => "15", "P2" => "LOP", "R2" => "22"}
> 哈希键可以是任意顺序。
> 
> 例如它们也可以是 {"P1" => "ABC", "R2" => "22", "R1" => "15", "P2" => "LOP"} 或 {"R1" => "15", "R2" => "22", "P1" => "ABC", "P2" => "LOP"}
> 
> 进入这个 {"ABC" => "15", "LOP" => "22 "}
> 
> 键之间的匹配器是数字。
> 我正在寻找 {P1.value => R1.value, P2.value => R2。

我目前这样做的方式是循环初始哈希并创建像 {1 => 'ABC', 2 => 'LOP'} 这样的哈希并创建 {1 => "15", 2 => "22 “}。

然后我循环第一个新哈希并使用密钥匹配第二个哈希并创建最终哈希。{"ABC" => "15", "LOP" => "22"}

我确信有一个更优雅的解决方案，但我就是想不出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:16:00.983

检查[内核#Hash](http://www.ruby-doc.org/core-2.0/Kernel.html#method-i-Hash)。这适用于任意数量的 Pn/Rn：

```
h = {"P1" => "ABC", "R2" => "22", "R1" => "15", "P2" => "LOP"}
Hash[*h.sort_by { |k, v| [k[1..-1].to_i, k[0]] }.map { |k, v| v }]
#=> {"ABC"=>"15", "LOP"=>"22"} 
```

一种更正统的方法，没有键顺序的技巧：

```
groups = h.group_by { |k, v| k[1..-1].to_i }
Hash[groups.map do |id, pairs|
  h2 = Hash[pairs]
  h2.values_at("P#{id}", "R#{id}")
end]
#=> {"ABC"=>"15", "LOP"=>"22"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:53:11.367

另一种选择：

```
Hash[h.keys.grep(/P\d+/).map {|k| [h[k], h[k.tr('P','R')]] }] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:41:21.213

```
h = {"P1" => "ABC", "R2" => "22", "R1" => "15", "P2" => "LOP"}
Hash[*h.sort_by{|k, _| [k[/\d+/].to_i, k[/\D+/]]}.map(&:last)] 
```

# watir - Watir 衡量页面性能

> ID：15496516
> 
> 赞同：0
> 
> 时间：2013-03-19T10:08:34.660
> 
> 标签：watir, watir-webdriver

我找到了这个宝石：[http ://watirwebdriver.com/page-performance/](http://watirwebdriver.com/page-performance/)

但我似乎无法理解这是什么措施

```
browser.performance.summary[:response_time]/1000 
```

它是从我打开浏览器的那一刻开始测量的吗？

```
Watir::Browser.new :chrome 
```

还是从最后一个 Watir-webdriver 命令写的？

我如何设置它何时启动计时器？

** 我已经尝试了几个脚本，但我不断收到`0 seconds` 这就是为什么我不确定。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T13:00:19.847

根据我的阅读（我实际上并没有在项目中使用它），response_time 是从开始导航到页面加载结束的时间 - 请参阅上一个问题中蒂姆（gem 的作者）的[回答](https://stackoverflow.com/questions/13711653/what-is-the-difference-between-response-time-time-to-first-byte-and-time-to)。Tim 博客上的图形图像将有助于理解不同的值 - [http://90kts.com/2011/04/19/watir-webdriver-performance-gem-released/](http://90kts.com/2011/04/19/watir-webdriver-performance-gem-released/)。

gem 用于获取单个响应的性能结果，而不是在脚本期间对浏览器的整体使用。因此无需启动/停止计时器。

如果您得到 0 秒，则可能意味着 response_time 小于 1000 毫秒（即在 Ruby 中，执行 999/1000 会得到 0）。为确保您得到非零值，请尝试执行以下操作：

```
browser.performance.summary[:response_time]/1000.0 
```

除以 1000.0 将确保您得到十进制值（例如 0.013）。

# selenium - 我无法决定 selenium webdriver 的编程语言

> ID：15496521
> 
> 赞同：0
> 
> 时间：2013-03-19T10:08:48.617
> 
> 标签：selenium, selenium-webdriver, selenium-ide, selenium-grid

我正在学习硒概念。在此过程中，我无法决定选择哪种编程语言。

1- JAVA 或 2- PHP

我研究过 PHP 并且对它有很好的了解。所以请告诉我哪个是好的 php 或 JAVA，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:15:04.887

那么这个决定不仅是你的。在我自己的示例中，我选择了 Java 编程语言。

不是因为我有这方面的经验。

不是因为我可能觉得“java 比 PHP 好”

仅仅是因为我公司的*所有*开发人员都使用 Java 工作。而且因为我需要编程方面的帮助，所以最好先在办公室问问，而不是在 StackOverflow 上发布你的问题*:)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:10:02.660

那么决定是你自己的。在 selenium 中选择您有足够知识并且掌握该语言的编程语言。

两种编程语言都很好，并且都有自己的市场范围

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T22:34:37.057

我使用groovy（他只是java），为此我使用Geb framwork。您可以在此处阅读有关此工具的信息：[链接](http://www.gebish.org/)

享受！！！

# php - 让不同的查询在同一页面上工作

> ID：15496532
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:09:15.183
> 
> 标签：php, sql, search

我在让我的表单工作时遇到了一些问题，我试图通过提交按钮来达到一个条件，让我给你一些代码：

```
<form id=\"form1\" name=\"hae_form\" method=\"post\" action=\"\" />
                <input type=\"text\" id=\"state\"  name=\"state\" />
<input type=\"submit\" class=\"input\" name=\"Submit\" value=\"hae\"/>

if(isset($_POST['hae_form'])){
    $hakusana = $_POST['state'];
    $kysely1 = "SELECT * FROM asiakkaat WHERE Sukunimi = $hakusana";
    $result = mysql_query("$kysely1") 
              or die(mysql_error()); 
} else {
   $kysely2 ="SELECT * FROM asiakkaat";
   $result = mysql_query("$kysely2") 
   or die(mysql_error()); 
}

while($row = mysql_fetch_array($result)) {
    i get the results here by query "kysely2"
} 
```

查询“kysely2”效果很好，但我不确定我应该在表单操作上做什么，所以我只需单击提交就可以获得查询“kysely1”结果？

PHP_self 没有作为一个动作起作用，当我使用提交按钮时它会更改 url，这就是它导致不同的 .php 页面的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:11:52.267

改变这个：`if(isset($_POST['hae_form'])){`

到`if(isset($_POST['Submit'])){`

改变这个：`$kysely1 = "SELECT * FROM asiakkaat WHERE Sukunimi = $hakusana";`

到`$kysely1 = "SELECT * FROM asiakkaat WHERE Sukunimi = '".$hakusana."'";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:12:38.287

首先改变

```
if(isset($_POST['hae_form'])) 
```

到

```
if(isset($_POST['Submit'])) 
```

我认为你的专栏`Sukunimi`有 varchar 数据类型在它周围使用单引号

```
 $kysely1 = "SELECT * FROM asiakkaat WHERE Sukunimi = '$hakusana'";
                                                      ^         ^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:18:28.563

使用以下代码仔细检查表单帖子。

```
if(isset($_POST['Submit']) && $_POST['Submit'] == "hae"){ 
```

上面的代码确保发布了`submit`按钮值相等`hae`的表单。

**询问**

```
$kysely1 = "SELECT * FROM asiakkaat WHERE Sukunimi = '".$hakusana."'"; 
```

从现在开始也不要使用`mysql_*`它。

# asp.net-mvc - asp.net mvc 我的网络应用程序是自动注销

> ID：15496540
> 
> 赞同：0
> 
> 时间：2013-03-19T10:09:41.967
> 
> 标签：asp.net-mvc, forms-authentication

我创建了一个 asp.net mvc Web 应用程序，它在 localhost 上运行良好，但是当我上传它时，用户在工作时会自动注销。

我用了：

```
FormsAuthentication.SetAuthCookie(dbuser.FName, false /* createPersistentCookie */); 
```

在 Web.config 中：

```
<authentication mode="Forms">  
    <forms loginUrl="~/home/login" timeout="2880"     />  
</authentication> 
```

我尝试了很多东西，但没有找到解决方案。如何防止发生自动注销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:25:03.607

确保无论您在何处托管它都是将其作为单个实例托管或以独立于实例的方式处理会话状态 - ASP.net 不会自动处理网络花园或农场中的会话传输。当您的客户端访问另一台服务器时，他们将被注销。

例如，如果您在 AppHarbor 上使用两个 Web Worker 托管它，您将需要自己处理状态设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T03:19:45.873

最后我必须改变我的整个编码转换成cookie基本用户模块

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:14:54.080

您是否尝试过设置：

**会话超时值**

```
 <system.web>
    <sessionState mode="InProc" timeout="20"/>
  </system.web> 
```

# java - 相同服务的两个面孔..如何设计？

> ID：15496542
> 
> 赞同：1
> 
> 时间：2013-03-19T10:09:46.160
> 
> 标签：java, web-services, rest, design-patterns, service

我正在实施一个有两个面孔的服务？该服务提供了供用户应用程序使用的各种方法。该服务可以是公共/私人服务。它可能是操作系统服务或网络服务或内存。我想要一张用于一般类型的用户应用程序的面孔和另一张用于特殊类型的用户应用程序的面孔。一般用户应用程序将无法看到为特殊应用程序提供的方法。两者都有一些常用的方法。

例如，如果有一个数据库并且我设计了一个带有 CRUD 方法的服务。但我想要服务的两个不同面，其中一个面隐藏了“D”。

我实现这一点的方法是我创建了两个单独的接口，它们具有不同的常用方法名称，其中一个接口没有某些方法。所以'两张脸'....

但这是正确的方法吗？它在设计中是真实的并且可以接受的吗？或者还有另一种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T10:32:33.763

您在谈论的是代理模式，是的，它是处理这种情况的一种可接受的方式。想想`Collections.unmodifiableList(List)`。此方法为更新方法（例如等）创建代理`List`并抛出s 。现在，问题是您是否要公开这些方法但在调用时抛出未经检查的异常并保持合同相同，或者您是否删除所有方法一起？我倾向于支持后者，否则您最终会遇到大量不兼容的接口，因为您对允许的方法调用有越来越多的排列方式，但这实际上取决于您的需求。根据定义，代理具有与其控制访问的对象相同的接口。`UnsupportedOpperationException``boolean add(T)`

现在，如果您想*构建*不受支持的操作，只需嵌套您的代理：

```
DAO crateReadOnlyProxy(DAO dao) {
  return new NoInsertProxy(new NoDeleteProxy(new NoUpdateProxy(dao)));
} 
```

您只有 1 个接口 ( `DAO`) 和 4 个实现（在本例中）、真正的实现和 3 个代理实现，它们只是将它们的方法调用委托给底层 DAO（或 DAO 代理）。当然，为了让生活更轻松，您可以创建一个`DAOProxyAdapter`类，这样您就不必重新编写所有这些委托方法：

```
public class DAOProxyAdapter implements DAO {
  private DAO target;
  public DAOProxyAdapter(DAO target) { this.target = target; }
  public void insert(Object o) {target.insert(o); }
  public void delete(Object o) {target.delete(o); }
  public void update(Object o) {target.update(o); }
  public Object find(Object key) { return target.find(key); }
}
public class NoDeleteProxy extends DAOProxyAdapter {
  public NoDeleteProxy(DAO target) {super(target);}
  public void delete(Object o) { throw new UnsupportedOperationException(); }
} 
```

# python - Python 数据库查询的实时输出

> ID：15496555
> 
> 赞同：1
> 
> 时间：2013-03-19T10:10:04.883
> 
> 标签：python, database, sybase, output, sap-ase

我有一段看起来像这样的代码：

```
 conn=sybpydb.connect(user=args.u, password=args.p,servername=args.s)
 cur = conn.cursor()
 cur.execute(sql)
 print(cur.connections.messages) 
```

执行可能需要 5 分钟才能运行，然后它会打印我的输出。我想知道是否有任何方法可以在执行运行时打印输出行而不是等到它完成并将其全部作为一个大批量获取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-17T16:35:20.527

filmor 是对的：检索光标上运行的结果。

sybpydb 包是 Sybase 提供的[PEP 249](https://www.python.org/dev/peps/pep-0249/)实现。因此，您检索的 Cursor 对象有一些方法，例如 fetchone 和 fetchall。

您的代码，逐行检索结果并对其进行处理，将是：

```
# Preparation your connection and cursor for fetching results
conn = sybpydb.connect(user=args.u, password=args.p, servername=args.s)
cur = conn.cursor()
cur.execute(sql)

# Reading result one by one
for row in cur.fetchone():
    # Do something with your current results
    print(row)

# Closing cursor and connection
cur.close()
conn.close() 
```

# android - android中的文本动画

> ID：15496557
> 
> 赞同：1
> 
> 时间：2013-03-19T10:10:31.323
> 
> 标签：android, animation, textview

我想在 Android 应用程序中为 textview 的文本而不是整个 textview 设置动画。我目前正在使用`Marquee`Android textview 的属性，但它不是我想要的 100%，所以我想为 textView 中的文本设置动画，这样我也可以处理事件。如果有人解决此问题，请分享您的答案。谢谢

这是我目前使用 Marquee 所做的

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:duplicateParentState="true"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:gravity="bottom"
        android:maxLines="1"
        android:scrollbars="horizontal"
        android:marqueeRepeatLimit="marquee_forever"
        android:scrollHorizontally="true"
        android:singleLine="true"
        android:text="Hello World"
        android:textColor="#FFFFFF"
        android:textSize="24sp"/> 
```

# c# - 远程wmi连接c# - 参数无效错误

> ID：15496561
> 
> 赞同：4
> 
> 时间：2013-03-19T10:10:41.327
> 
> 标签：c#, wmi, remote-access

当我运行以下代码时

```
ConnectionOptions options = new ConnectionOptions();
        options.EnablePrivileges = true;
        options.Impersonation = ImpersonationLevel.Impersonate;
        options.Authentication = AuthenticationLevel.Packet;
        options.Authority = "ntdlmdomain:InsTIL.com";
        options.Username = "instil" + @"\" + "admin";
        options.Password = "Pwd";

        ManagementScope scope= new ManagementScope(string.Format(@"\\172.16.2.171\root\cimv2"),options);
        scope.Connect();
        if (scope.IsConnected == true)
        {
           Console.WriteLine("Connection Succeeded");
        }
        else
        {
            Console.WriteLine("Connection Failed");
        }

        ObjectQuery query = new ObjectQuery("Select * from win32_operatingsystem");
        ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);

        ManagementObjectCollection querycollection = searcher.Get();
        foreach (ManagementObject mobj in querycollection)
        {
            Console.WriteLine("Computer name: {0}", mobj["csname"]);
            Console.WriteLine("Windows Directory : {0}", mobj["WindowsDirectory"]);
            Console.WriteLine("Operating System: {0}", mobj["Caption"]);
            Console.WriteLine("Version: {0}", mobj["Version"]);
            Console.WriteLine("Manufacturer : {0}", mobj["Manufacturer"]);
        } 
```

我收到以下错误

```
 Unhandled Exception: System.Management.ManagementException: Invalid parameter
   at System.Management.ManagementException.ThrowWithExtendedInfo(ManagementStatus errorCode)
    at System.Management.ManagementScope.InitializeGuts(Object o)
   at System.Management.ManagementScope.Initialize()
  at remote_wmi.Program.Main(String[] args) in E:\.net prep\.net examples\remote wmi\remote wmi\Program.cs:line 21 
```

请帮我知道为什么会这样。？这段代码有什么问题？在执行这段代码之前我们需要做任何事情吗？如果是，请说明。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T10:34:47.447

我做了以下更改，然后我得到了答案。

1）我没有用用户名指定域名。 `options.Username = "admin";`代替 `options.Username = "instil" + @"\" + "admin";`

2） `options.Authority = "ntlmdomain:InsTIL.com";`代替`options.Authority = "ntdlmdomain:InsTIL.com";`

# spring-mvc - 使用Spring mvc将表单结果以table的形式重定向到同一个表单页面

> ID：15496568
> 
> 赞同：2
> 
> 时间：2013-03-19T10:10:59.157
> 
> 标签：spring-mvc

我是春天的新手，我被赋予了一项任务。我使用 spring mvc 为员工创建了一个简单的注册表单，它的结果显示在另一个 jsp 页面上，但我希望结果显示在我填写表格的同一个 jsp 页面上，结果也应该是表格形式.

我也尝试了转发和重定向选项，但我没有得到结果。

这是我的文件：

EmployeeFormController.java

```
public class EmployeeFormController extends SimpleFormController {
@Override
protected ModelAndView onSubmit(Object command)
throws ServletException {
Employee employee = (Employee) command;  

ModelAndView modelAndView = new ModelAndView("usersuccess");
modelAndView.addObject("employee", employee);
return modelAndView;  
}  

} 
```

用户.jsp

```
 <%@ taglib prefix="core" uri="http://java.sun.com/jsp/jstl/core" %>
    <%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
    <%@ taglib prefix="spring" uri="/spring"%>
    <%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
    <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"           "http://www.w3.org/TR/html4/loose.dtd">
   <html>
   <head>
   <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Employee Personal Details</title>
   </head>
   <body>
   <center> <h3>Employee Personal Details</h3>
   <br/>
   <form:form commandName="user" method="POST" name="user">
   <table border="0">
   <tr>
   <td>Name:</td>
   <td><form:input path="name"/></td>
   <td><font color="red"><form:errors path="name"/></font></td>
   </tr>
   <tr>
   <td>Email ID:</td>
   <td><form:input path="emailid"/></td>
   <td><font color="red"><form:errors path="emailid"/></font></td>
    </tr>
  <tr>
 <td>Date of birth:</td>
 <td><form:input path="dob"/></td>
<td><font color="red"><form:errors path="dob"/></font></td>
</tr>
<tr>
<td>Qualification:</td>
<td><form:input path="qualification"/></td>
<td><font color="red"><form:errors path="qualification"/></font></td></tr>
<tr>
<td>Contact Number:</td>
<td><form:input path="contact"/></td>
<td><font color="red"><form:errors path="contact"/></font></td>
</tr> 
<tr>
<td>Address:</td>
<td><form:input path="address"/></td>
<td><font color="red"><form:errors path="address"/></font></td>
</tr>
<tr> 
<td colspan="3" align="center"><input type="submit" value="Save"/></td> 
</tr>
</table>
</form:form>
</center> 
</body>
</html> 
```

用户成功.jsp

```
<table border = 2>
<tr>
<td colspan="2" align="center"><font size="5">Employee Information</font></td> 
</tr>
<tr>
<td>Name:</td>
<td><core:out value="${employee.name}"/></td> 
</tr>
<tr>
<td>Email ID:</td>
<td><core:out value="${employee.emailid}"/></td> 
</tr>
<tr>
<td>Date Of Birth:</td>
<td><core:out value="${employee.dob}"/></td> 
</tr>
<tr>
<td>Qualification:</td>
<td><core:out value="${employee.qualification}"/></td> 
</tr>
<tr>
<td>Contact Number:</td>
<td><core:out value="${employee.contact}"/></td> 
</tr>
<tr>
<td>Address:</td>
<td><core:out value="${employee.address}"/></td> 
</tr>
</table> 
```

调度程序-servlet.xml

```
<bean id="viewResolver"
class="org.springframework.web.servlet.view.InternalResourceViewResolver">
<property name="prefix">
<value>/WEB-INF/jsp/</value>
</property>
<property name="suffix">
<value>.jsp</value>
</property>
</bean>
<bean id="userController" class="com.web.EmployeeFormController">
<property name="sessionForm"><value>false</value></property>
<property name="commandName"><value>user</value></property>
<property name="commandClass"><value>com.web.Employee</value></property>
<property name="formView"><value>user</value></property>
<property name="successView"><value>usersuccess</value></property>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:00:50.187

为什么你不能做

```
ModelAndView modelAndView = new ModelAndView("user"); 
```

代替

```
ModelAndView modelAndView = new ModelAndView("usersuccess"); 
```

如果您想在同一页面中显示答案。请注意，如果您想以表格形式显示，您必须将代码从 usersuccess.jsp 复制到 user.jsp 并相应地修改您的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:46:50.037

Spring MVC 本身是一个“往返”交易，这意味着您提交请求（表单 post、url 等），Spring MVC 路由请求并生成响应，浏览器将其解释为页面加载。您所要求的通常称为[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)，与 Spring MVC 直接关系不大。

这是该过程的 50000 英尺视图。在您的表单 JSP 上，您将拥有一些在用户“提交”表单时调用的 JavaScript。例如，您可以有一个带有 jQ​​uery 事件处理程序的按钮类型的输入。从那里，您将收集表单值并使用 AJAX 调用提交它们。一旦响应返回，您将解析返回的数据并操作页面上的[DOM](http://en.wikipedia.org/wiki/Document_Object_Model)，再次使用 JavaScript。

可能有数百万个关于如何使用多种不同技术在 Web 上执行此操作的示例。我个人更喜欢[jQuery](http://jquery.com/)作为我的 JavaScript 库，并且我几乎广泛地使用它的[ajax 功能。](http://api.jquery.com/category/ajax/)不过，这不是唯一的方法。

# internet-explorer - IE 10 的用户代理字符串末尾的 6 个字符是什么？

> ID：15496570
> 
> 赞同：7
> 
> 时间：2013-03-19T10:11:05.957
> 
> 标签：internet-explorer, windows-8, touch, user-agent

IE 10 的用户代理字符串末尾的 6 个字符是什么？以下是一些示例：

```
"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0; Touch; MATPJS)"
"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Win64; x64; Trident/6.0; Touch; ASU2JS)"
"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Win64; x64; Trident/6.0; Touch; MALNJS)"
"Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0; Touch; MDDCJS)" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T10:15:22.420

这是制造商的简码。

请参阅：[https ://developers.whatismybrowser.com/learn/unknown-user-agent-fragments/](https://developers.whatismybrowser.com/learn/unknown-user-agent-fragments/)

# javascript - Google Maps API - 指向路线服务的标记

> ID：15496573
> 
> 赞同：1
> 
> 时间：2013-03-19T10:11:11.280
> 
> 标签：javascript, maps

我正在尝试向我的定向 Google 地图添加其他标记（自定义图标），但我似乎无法在 initialize() 函数之外添加这些标记。

我需要将它们添加到 initialize() 函数之外，因为我想根据路线更改图标。这是我遇到麻烦的添加额外标记测试。脚本的所有其余部分都可以完美运行。

非常感谢您的帮助。

到目前为止的代码：

```
 var directionDisplay;
       var directionsService = new google.maps.DirectionsService();
       var stepDisplay;

        function initialize() {
            var latlng = new google.maps.LatLng( <? echo $lat; ?> , <? echo $lon; ?> );
            var rendererOptions = {draggable: true};
            directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);
            var myOptions = {zoom: 14,center: latlng,mapTypeId: google.maps.MapTypeId.ROADMAP,mapTypeControl: false};
            var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
            directionsDisplay.setMap(map);  
        directionsDisplay.setPanel(document.getElementById("directionsPanel"));
                 } 
```

//计算路由

```
 function calcRoute() {
            var travelMode = 'DRIVING';
            var start = $("#routeStart").val();
            var via = $("#routeVia2").val();
            var end = $("#routeVia").val();
            var waypoints = [];
            if (via != '') {waypoints.push({location: via,stopover: true});
            }
            var request = {
                origin: start,
                destination: end,
                waypoints: waypoints,
                unitSystem: google.maps.UnitSystem.IMPERIAL,
                travelMode: google.maps.DirectionsTravelMode[travelMode]
            }; 
```

//显示路线并将 LATLNG 传递给 PHP 文件以供进一步处理

```
 directionsService.route(request, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {            
    directionsDisplay.setDirections(response);
    var myRoute = response.routes[0];
    var txtDir = '';
    for (var i=0; i<myRoute.legs[0].steps.length; i++) {
    txtDir += myRoute.legs[0].steps[i].path+"";                             
    }
var strLAT = "" + txtDir; 
```

//发送数据到 URL PHP 文件

```
 var xmlHttp = getXMLHttp();
     xmlHttp.onreadystatechange = function() {
     if (xmlHttp.readyState == 4) {
     HandleResponse(xmlHttp.responseText);
     }}                     
     xmlHttp.open("POST",'MYPHPFILE',true);
     xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
     xmlHttp.send("LATLON="+strLAT); 
```

//警报测试以确保 PHP 正确处理数据

```
 function HandleResponse(response) {
            document.getElementById('ResponseDiv').innerHTML = response;
            alert($('#ResponseDiv').text());
        } 
```

添加额外标记测试

```
 var wxlatlng = new google.maps.LatLng( 52 , -1 );
            var marker = new google.maps.Marker({ 
            position: wxlatlng, 
            map: map, 
            icon: "http://nwsgeo.com/demo/images/pins/road-closed.jpg", 
            title: "test icon", 

     }); 
```

//错误信息

```
 }else{
     if (status == 'ZERO_RESULTS') {
     alert('No route could be found between the origin and destination.');
     }else if(status == 'INVALID_REQUEST') {
     alert('The DirectionsRequest provided was invalid.');
     }else{
     alert("There was an unknown error in your request. Requeststatus: nn" + status);
     }}});} 
```

# java - 以零依赖从 Java 字符串中去除 HTML 标记

> ID：15496575
> 
> 赞同：0
> 
> 时间：2013-03-19T10:11:18.180
> 
> 标签：java, html, regex, string

我知道这个问题与[这个](https://stackoverflow.com/questions/4874626/java-escape-html)问题和其他问题*非常*相似。我有同样的问题（**如何从 Java 字符串中去除 HTML 标记？**），并*添加*了我不想在代码中添加任何依赖项（Apache Commons、Spring 等）的约束。

 ***因此，我正在寻找许多其他框架使用的 HTML 标签剥离算法的“纯 Java SE”风格，但不确定从哪里开始。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:35:15.937

在不明确使用 HTMLEditorKit 的情况下：

```
 String html = "<html>...";
    JTextPane pane = new JTextPane();
    pane.setContentType("text/html");
    pane.setText(html);
    StyledDocument doc = pane.getStyledDocument();
    try {
        System.out.println("Text: " + doc.getText(0, doc.getLength()));
    } catch (BadLocationException ex) {
        Logger.getLogger(NewJFrame.class.getName()).log(Level.SEVERE, null, ex);
    } 
```***

# log4net - Log4Net FixFlags 枚举为空？

> ID：15496581
> 
> 赞同：0
> 
> 时间：2013-03-19T10:11:38.440
> 
> 标签：log4net

在 log4net 中实现 BufferingAppenderSkeleton 并希望优化 volatile 默认数据。但是 FixFlags 枚举似乎是空的。我已经对其进行了反编译，这就是我得到的： ![在此处输入图像描述](../Images/5eaef58efb6d8cc004324edc75193209.png)

任何人都知道我们如何控制修复标志，因为它们已重构？(log4net 1.2.11)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:31:21.927

据我所知，FixFlags 仍然是当前源代码库的一部分（您可以下载源代码，无需反编译）：

[源 log4net -> FixFlags](http://svn.apache.org/viewvc/logging/log4net/trunk/src/Core/LoggingEvent.cs?view=markup)

在单元测试中它仍然被测试，那里没有任何改变。

# plsql - PlSQL 触发错误 ORA-0000 ORA-06512:

> ID：15496584
> 
> 赞同：1
> 
> 时间：2013-03-19T10:11:43.243
> 
> 标签：plsql, ora-00001, ora-06512, nextval, database-trigger

```
create or replace 
TRIGGER "SUP" AFTER INSERT ON "EMP_REPORT" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW
DECLARE

  miclaim_supervisor_count number;
  employee_company_code VARCHAR2(10);
  employee_businessunit number;
  projMgrs NUMBER;
  supId NUMBER;

  cursor  projMgrsCursor is select b.BU_MEMBER_ID
  from BU_MEMBER b, EMP_SUB_DIV s
  where s.EMP_NO = :NEW.EMP_NO
  and s.SUB_DIVISION_CODE = '01' and s.DIV_CODE = '2'
  and b.BU_ID IN (select BU_ID from BU_MEMBER where BU_MEMBER_ID = :NEW.EMP_NO);

BEGIN
        delete from MICL_SUPERVISORS where EMP_NO = :NEW.EMP_NO and IS_OVVERRIDDEN = 0;
        select count(*) into miclaim_supervisor_count from MICL_SUPERVISORS where EMP_NO = :NEW.EMP_NO and IS_OVVERRIDDEN = 1;
        select COMPANY_CODE into employee_company_code from  EMPLOYEE_MASTER where EMP_NO = :NEW.EMP_NO;

    projMgrs := 0;

if (employee_company_code ='F')then 

  OPEN  projMgrsCursor;
    LOOP

     select micl_sup_id_seq.nextval into  supId from dual;
    FETCH projMgrsCursor INTO projMgrs;
    EXIT WHEN projMgrsCursor%NOTFOUND;

    insert into SUP VALUES ((supId), (SELECT SYSDATE FROM DUAL), :NEW.ENTRYADDEDBY_EMP_NO, 3000, 0,projMgrs, NULL,:NEW.EMP_NO);
    END LOOP;   

  CLOSE projMgrsCursor;
else
    if(miclaim_supervisor_count IS NULL or miclaim_supervisor_count<1) then
    insert into SUP VALUES ((:NEW.ID), (SELECT SYSDATE FROM DUAL), :NEW.ENTRYADDEDBY_EMP_NO, 3000, 0, :NEW.SUP_EMP_NO, NULL,:NEW.EMP_NO);
    end if;
end if;

END; 
```

我一周创建了这个触发器，但没有编译错误但是当我输入一条记录时，`EMP_REPORT` 它会弹出一条错误消息说

```
 *INSERT INTO"EMP_REPORT" (ID, ADDEDDATE, ENTRYADDEDBY_EMP_NO, SUP_EMP_NO, EMP_NO) VALUES ('71', TO_TIMESTAMP('19-MAR-13 09.55.57.983000000 AM', 'DD-MON-RR HH.MI.SS.FF AM'), '81', '841', '5295')
ORA-00001: unique constraint (SYS_C0023329) violated
ORA-06512: at line 1

One error saving changes to table  "EMP_REPORT":
Row 51: ORA-00001: unique constraint (SYS_C0023329) violated
ORA-06512: at line 1* 
```

我无法弄清楚我哪里出错了。请帮助我 ：（

请注意，我无法删除约束及其主键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T11:34:20.083

您确定错误发生在触发器中吗？在我看来，可能失败的 INSERT 是 EMP_REPORT 中的那个——可能是因为 EMP_REPORT 中已经有一行 ID = '71'。如果您可以确认 SYS_C0023329 位于哪个表上，将会很有帮助。

但是，假设消息是由触发器生成的——我在触发器中只看到两个 INSERT，都插入到 SUP 表中，所以问题一定来自这些 INSERT 之一。任何一个

1.  SUP 中已经有一行具有大于 MICL_SUP_ID_SEQ.NEXTVAL 的当前值的键值（您没有在针对 SUP 的 INSERT 语句中显示列的名称，所以我不知道该字段的名称可能是什么） ， 或者

2.  SUP 中有一行，其键值等于您在第二个 INSERT 中提供的新 EMP_REPORT.ID 字段。

第二个问题，从一个表 (EMP_REPORT) 提供一个键值作为第二个表 (SUP) 的键值对我来说似乎有点可疑，我建议先看看那里。我认为您希望从 MICL_SUP_ID_SEQ 中获取一个值以在 SUP 表中使用。

要验证问题是由插入 SUP 引起的，您可以尝试执行以下操作：

```
SELECT *
  FROM ALL_CONSTRAINTS c
  WHERE c.CONSTRAINT_NAME = 'SYS_C0023329'; 
```

这将告诉您约束在哪个表上。

分享和享受。

# javascript - 有人可以向我解释这个 javascript 内存泄漏场景吗

> ID：15496585
> 
> 赞同：2
> 
> 时间：2013-03-19T10:11:50.313
> 
> 标签：javascript, memory-leaks

[http://www.ibm.com/developerworks/web/library/wa-memleak/](http://www.ibm.com/developerworks/web/library/wa-memleak/)在此链接上，清单 5 描述了 obj 是对 dom 元素的引用，并且 dom 元素具有对 obj 的引用的情况，并且因此会导致内存泄漏。我正在努力查看代码中的什么使 DOM 元素具有对 obj 的引用。有人可以向我解释吗？

***取自页面：***

在清单 5 中，您会看到一个闭包，其中 JavaScript 对象 (obj) 包含对 DOM 对象的引用（由 id "element" 引用）。反过来，DOM 元素具有对 JavaScript obj 的引用。JavaScript 对象和 DOM 对象之间产生的循环引用会导致内存泄漏。

清单 5\. 事件处理内存泄漏模式

```
<html>
<body>
<script type="text/javascript">
document.write("Program to illustrate memory leak via closure");
window.onload=function outerFunction(){
    var obj = document.getElementById("element");
    obj.onclick=function innerFunction(){
    alert("Hi! I will leak");
    };
    obj.bigString=new Array(1000).join(new Array(2000).join("XXXXX"));
    // This is used to make the leak significant
};
</script>
<button id="element">Click Me</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:59:14.470

*由于obj*和*onclick*之间的循环引用而存在内存泄漏。

通常，在执行*onload*之后，其范围内的所有变量都将被垃圾收集和擦除。然而，在 javascript 中，函数范围并不总是在执行后被删除。这称为**闭包**。

例如，如果外部对象引用了此范围内的某些内容。在这种情况下，onclick*引用 outerFunction*并且*outerFunction*被*obj引用*

![闭包导致的内存泄漏的图示](../Images/0ecc99dc427ad0d35d39cebac7e81ca4.png)

如果将 obj 设置为*null*，则不会引用*onload-scope*内的某些内容。

有人可以争辩说，引用仍然是*outerFunction*，这是正确的。但是 outerFunction 不再绑定到*onload-scope*，这使得这个范围可以被垃圾收集器清理。

# c# - 使用 Linq 查找项目的值列表

> ID：15496595
> 
> 赞同：1
> 
> 时间：2013-03-19T10:12:16.643
> 
> 标签：c#, linq

我有一个`list`包含`int`值的值，我想使用 linq 表达式返回一个属性等于列表项值的结果。我怎样才能做到这一点？

```
list<int> x = ...

var o = anotherList.where(s => s.Id == (the list values)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T10:13:39.543

```
var o = anotherList.Where(s => list.Contains(s.ID)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:16:48.867

我将“一个属性等于列表项值”翻译为“另一个列表包含此列表 ID”：

一种[有效](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)的方法是使用`Join`：

```
var o = from al in anotherList
        join tlId in thelist
        on al.Id equals tlId
        select al; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:14:39.343

```
 var o = anotherList.Where(s =>list.Any(a=> a.Id == s.Id)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:23:56.007

您还可以使用匿名方法：

```
 var o = anotherList.Where(delegate(someItem s) { return list != null && list.Contains(s.ID); }); 
```

# mysql - MySql：如何删除 SELECT 和 UPDATE 之间的延迟

> ID：15496597
> 
> 赞同：0
> 
> 时间：2013-03-19T10:12:17.267
> 
> 标签：mysql

我有一个简单的设置，用于在游戏中分配对手。基本上如果 matchID 为零（值来自其他地方），则需要创建一个新的匹配项，并且它将对最后一个 matchID 记录执行 mysql 选择以确定是否有人在等待匹配项。

要查看玩家是否在等待，我们可以查看 teamB 空间是否为零（未占用）。但是，如果 teamB 有值，则没有人在等待，并且必须与该玩家创建一个新的匹配作为“团队 A”。

代码如下：

```
 if ($matchID == 0)
{
  $teamBquery = $conn ->query("SELECT matchID,teamBID,teamAID FROM challengeMatches ORDER BY matchID DESC LIMIT 1 ");
$teamBarray = $teamBquery->fetch(PDO::FETCH_ASSOC);
$teamBID=$teamBarray[teamBID];
$matchID=$teamBarray[matchID];
$teamAID=$teamBarray[teamAID];
    if ($teamBID == 0){
        $newChallenge = $conn ->query ("UPDATE challengeMatches SET managerBID='$managerID', teamBID='$teamID',matchStatus=1 WHERE matchID='$matchID'");

    }else{
       $filler = 0;
        $matchID = $matchID+1;
        $newChallenge = $conn ->query ("INSERT INTO challengeMatches (matchID,managerAID,managerBID,matchStatus,teamAID,teamBID) VALUES ('','$managerID','$filler','$filler','$teamID','$filler')");

    }
} 
```

作为一个非常缺乏经验的人，我担心的是，据我所知，在选择信息和更新信息之间会有延迟，因此从技术上讲，两个 mysql 选择可能会返回要使用的相同 matchID。然后即使使用 matchID+1 作为变量也是有风险的，因为它可能与在数据库中创建的自动增量 matchID 不同步。

我的恐惧是有根据的还是代码如此之快以至于概率不值得担心？

如果我应该担心我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:39:51.207

你首先需要确定你是否真的需要一个解决方案来克服这个问题，除非你运行一个庞大的站点，否则时间间隔应该很小，选择两个 matchId 的可能性很小。

但是，您实际上可以从三个方面进行改进：

1.  锁定 - 查看`SELECT .. FOR UPDATE`或`SELECT ... LOCK IN SHARE MODE`
2.  交易
3.  重构数据库以首先使用限制实际更新，然后选择更新的范围

# email - ms Outlook 收件箱自动转发

> ID：15496600
> 
> 赞同：0
> 
> 时间：2013-03-19T10:12:25.260
> 
> 标签：email, outlook, ms-office, forwarding

有时我需要将一些收件箱消息（一些客户）转发给自己，因为我需要来自字段的消息文本（用于解析），包括主题。是否有选项或更好的方法可以在 Outlook 中选择并自动转发这些消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:18:23.717

[此处](http://www.technipages.com/automatically-forward-email-in-outlook-2010-2007.html)提供了非常全面的图片说明。

在您定义条件的第 3 步中添加您的客户。在图像中，第一个选项（带有复选框）将允许您执行此操作。

# java - 使用 commons.net.ftp 手动 FTP

> ID：15496606
> 
> 赞同：2
> 
> 时间：2013-03-19T10:12:44.693
> 
> 标签：java, ftp, apache-commons-net

我正在尝试使用 apache commons 发送手动 FTP 命令，因为我必须将非标准 FTP 命令发送到特定服务器（接受它们）

在我尝试发送这些非标准命令之前，我想让 FTP 与 commons.net.ftp 一起手动工作。不幸的是，我似乎遗漏了一些东西。

**这很好**用（即它检索文件列表）

```
FTPClient ftp = new FTPClient();
FTPClientConfig config = new FTPClientConfig();
ftp.configure(config);

ftp.connect("ftp.mozilla.org");
ftp.login("anonymous", "");

ftp.enterLocalPassiveMode();
FTPFile[] fileList = ftp.listFiles("/"); 
```

**这不**

```
FTPClient ftp = new FTPClient();
FTPClientConfig config = new FTPClientConfig();
ftp.configure(config);

ftp.connect("ftp.mozilla.org");
ftp.login("anonymous", "");

ftp.sendCommand("PASV");
ftp.sendCommand("NLST"); 
```

我得到了适当的回应，`ftp.sendCommand("PASV");`但它`ftp.sendCommand("NLST");`最终给了我超时

```
425 Failed to establish connection. 
```

我曾尝试研究该主题，但有关此错误的大多数建议是针对设置服务器的人（通常是防火墙问题）。

为什么它在什么时候起作用`net.ftp`，但在我手动发送命令时不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:42:34.777

手动发送`PASV`命令是不够的，客户端必须打开数据连接到服务器指定的端口以响应`PASV`命令。这是通过调用`enterLocalPassiveMode()`方法来执行的。由于`PASV`手动发送不会初始化数据连接，因此您很快就会收到错误消息。

有关 FTP 协议的更多详细信息，请参阅[http://slacksite.com/other/ftp.html#passive](http://slacksite.com/other/ftp.html#passive)。

# c# - SyndicationFeed.item.Content 在 wordpress 提要中为 Null

> ID：15496608
> 
> 赞同：1
> 
> 时间：2013-03-19T10:12:46.113
> 
> 标签：c#, wordpress, xml-parsing

我正在尝试将 wordpress 博客中的帖子添加到我的网站，我正在尝试使用 SyndicationFeed 类和 XmlReader 使用以下代码

```
 var reader = XmlReader.Create("http://nycphotographer.wordpress.com/feed/");
        var feed = SyndicationFeed.Load<SyndicationFeed>(reader);

        lblBlogPost.Text = "Latest posts from " + feed.Title.Text + Environment.NewLine;
        foreach (var item in feed.Items)
        {
            lblBlogPost.Text += item.Title.Text + Environment.NewLine;
            lblBlogPost.Text += item.Content + Environment.NewLine;
        } 
```

然后当我尝试读取提要项目的内容（它是 CDATA 编码的）时，我在内容部分得到 null。

然后我尝试关注[SyndicationItem.Content is Null](https://stackoverflow.com/questions/2444540/syndicationitem-content-is-null)但问题是此 SO 帖子中提供的答案给了我一个错误

`'System.Collections.ObjectModel.Collection<string>' to 'string'`.

请有人指出我正确的方向。

**编辑：**正如@Sapster 所指出的，完整的错误声明如下

`Cannot implicitly convert type 'System.Collections.ObjectModel.Collection<string>' to 'string'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:36:20.147

我不确定这些是“答案”还是只是注意点，但是太多的信息不能作为评论，所以希望这里的东西可以帮助你！

根据[http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Fnycphotographer.wordpress.com%2Ffeed%2F](http://validator.w3.org/feed/check.cgi?url=http%3A%2F%2Fnycphotographer.wordpress.com%2Ffeed%2F)您的提要有效，但警告“...与最广泛的互操作性的提要阅读器可以改进......”并就这些问题提供建议。

WordPress 提要通常存在已知问题 - [http://validator.w3.org/feed/docs/error/WPBlankLine.html](http://validator.w3.org/feed/docs/error/WPBlankLine.html)

我个人看到过 WP 提要的实例（实际上就在昨天！），其中特定的阅读器（在本例中为 FF）*大部分*时间都无法将默认样式应用于（否则未设置样式的）提要，但不是*一直*（例如 20 次刷新中的 5 次正确显示），这表明 WP 正在发出不一致的输出。

所以 - 我建议将您的代码指向“已知良好”的提要，以验证问题不是服务器端的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T14:19:43.127

总结对我有帮助

```
lblBlogPost.Text += item.Summary + Environment.NewLine; 
```

# javascript - 停止 .toFixed 舍入数字

> ID：15496609
> 
> 赞同：1
> 
> 时间：2013-03-19T10:12:48.940
> 
> 标签：javascript

我有以下

```
var dividedResult =  (893/ 200);    

var result = dividedResult.toFixed(decimalPlaces); 
```

分割的结果是

```
4.465 
```

结果是

```
4.5 
```

在这种情况下如何停止舍入？

我希望结果是

```
4.4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:15:05.033

试试这个 4.465 * 10 = 44.65 .. parseInt(44.65) = 44/10 = 4.4

```
result = parseInt(result * 10)/10; 
```

对于任意数量的小数位

```
result = parseInt(result * Math.pow(10,NumberOfDecimalPlaces))/(Math.pow(10,NumberOfDecimalPlaces)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:21:42.477

扩展 Prasath 的答案，如果你想区分向上舍入和向下舍入到小数点后 1 位，你会做

四舍五入 (4.4)

```
result = Math.floor(result * 10)/10; 
```

四舍五入 (4.5)

```
result = Math.ceil(result * 10)/10; 
```

对于您的情况，对于任何小数位数，请使用

```
result = Math.floor(result * Math.pow(10,decimalPlaces))/Math.pow(10,decimalPlaces); 
```

# matlab - 在matlab中找到峰值

> ID：15496612
> 
> 赞同：1
> 
> 时间：2013-03-19T10:12:50.363
> 
> 标签：matlab

假设我们确定向量中的峰值如下：如果 x(1)>x( 2) 然后很明显对于第一个点 peak(1)=x(1)；否则我们将 x(3) 与 x(2) 进行比较，如果 x(3)

```
[ indexes,peaks]=function(x,m);
c=[];
b=[];
if  x(1)>x(2) 
    peaks(1)=x(1);
else

 for i=2:m-1
     if x(i+1)< x(i) & x(i)>x(i-1)
         peak(i)=x(i);
     end;
 end
end
end 
```

峰值也使用下图确定： ![在此处输入图像描述](../Images/2944f0e73de12114a881078718d24b40.png)

抱歉第二张图片，也许它不是三角形，只是 A 和 C 在直线上，但这里的峰值是 B，所以我无法继续编写算法以在我的向量中找到峰值。请帮助我继续

# updated.numercial 给出的例子

x=[2 1 3 5 4 7 6 8 9] 这里因为第一个点比第二个多，所以这意味着峰值（1）=2，然后我们比较 1 和 3，因为 3 大于 1，我们现在想比较5比3，也是比较多，比较5比4，因为5比4多，那么就意味着peak(2)=5，所以如果我们继续下一个峰值是7，那么最终的峰值就是9 如果第一个元素小于第二个，那么我们将第二个元素与第三个元素进行比较，如果第二个元素同时大于第三个和第一个元素，则峰值是第二个，依此类推

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:32:04.030

你可以尝试这样的事情：

```
function [peaks,peak_indices] = find_peaks(row_vector)
    A = [min(row_vector)-1 row_vector min(row_vector)-1];
    j = 1;
    for i=1:length(A)-2
        temp=A(i:i+2);
        if(max(temp)==temp(2))
            peaks(j) = row_vector(i);
            peak_indices(j) = i;
            j = j+1;
        end
    end
end 
```

将其保存为 find_peaks.m

现在，您可以将其用作：

```
>> A = [2 1 3 5 4 7 6 8 9];
>> [peaks, peak_indices] = find_peaks(A)

peaks =

     2     5     7     9

peak_indices =

     1     4     6     9 
```

然而，这也会给你“高原”（相邻且相等的“峰值”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T12:21:33.810

您可以使用`diff`进行比较并在开头和结尾添加两个点以覆盖边界情况：

```
B=[1 diff(A) -1]; 
peak_indices = find(B(1:end-1)>=0 & B(2:end)<=0); 
peaks = A(peak_indices); 
```

它返回

```
peak_indices =
     1     4     6     9
peaks =
     2     5     7     9 
```

以你为例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-03T11:46:54.943

如果您有最新的 matlab 版本，findpeaks 会这样做，但它也有点慢。

由于 for 循环，这个建议的解决方案会非常慢，并且由于您将最大值与中心值进行比较而不是比较最大值的位置，您还存在舍入误差的风险，这对您来说更好目的。

您可以将数据堆叠成三列：第一列是前面的值，第二列是数据，第三列是下一个值，做一个最大值，你的局部最大值是位置的点沿列的最大值为 2。

我已将此编码为我自己的峰值检测功能的子程序，它增加了更高级别的迭代峰值检测 [http://www.mathworks.com/matlabcentral/fileexchange/42927-find-peaks-using-scale-space-方法](http://www.mathworks.com/matlabcentral/fileexchange/42927-find-peaks-using-scale-space-approach)

# javascript - 正则表达式没有按预期工作？

> ID：15496628
> 
> 赞同：3
> 
> 时间：2013-03-19T10:14:02.840
> 
> 标签：javascript, regex

我有这个正则表达式：

```
new RegExp("^[a-z 0-9\"\-\`]+$", "ig") 
```

我正在测试一个不应该工作的字符串：`'#vc'`

但它确实通过了测试：（而且它不应该（`#`））

```
new RegExp("^[a-z 0-9\"\-\`]+$", "ig").test('#vc') //true 
```

但是，如果我删除`\"`or `\-`or `\``，它确实可以工作（并且测试应该失败）。

我究竟做错了什么 ？

我的正则表达式只是搜索 English 、 numbers 、 space 、 ["]、[-][ 和 [`]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:17:52.653

如果使用`RegExp`构造函数，则需要**加倍转义**，因为转义有 2 层：JavaScript 字符串文字中的转义和正则表达式语法中的转义。

但是，在您的情况下，可以编写一个正则表达式而不转义。

在您的情况下，您可以只使用**literal`RegExp`**，其中您只需要关心正则表达式语法中的转义，以及`/`正则表达式中出现的任何内容的转义（因为`/`用作 literal 的分隔符`RegExp`：

```
/^[a-z 0-9"\-`]+$/gi 
```

另一种方法是：

```
/^[a-z 0-9"`-]+$/gi 
```

**`-`如果它是字符类中的最后一个，则不需要转义破折号**。这样，您就不必将自己与所有转义混淆。

或者，如果您仍想使用`RegExp`构造函数，则需要将转义加倍以`\`在字符串中指定：

```
new RegExp('^[a-z 0-9"\\-`]+$', "ig") 
```

或者只使用`-`字符类中最后指定的其他版本：

```
new RegExp('^[a-z 0-9"`-]+$', "ig") 
```

请注意，我将字符串引号从更改`"`为`'`以避免必须`"`在字符串中转义。如果您出于某种原因更喜欢，请在文字字符串级别`"`转义：`"`

```
new RegExp("^[a-z 0-9\"`-]+$", "ig") 
```

* * *

至于您当前的正则表达式

```
new RegExp("^[a-z 0-9\"\-\`]+$", "ig") 
```

相当于

```
/^[a-z 0-9"-`]+$/gi 
```

**如您所见，包含从`"`to```**的字符范围，这意味着包含 ASCII 码从 0x22 到 0x60 的所有字符，并且`#`恰好在该范围内。

要检查模式是否是您想要的，您可以随时调用`source`正则表达式的属性来获取正则表达式的源字符串。

# c++ - 是否可以强制编译器使用“工作”目录的名称来构造包含的所有全名？

> ID：15496629
> 
> 赞同：0
> 
> 时间：2013-03-19T10:14:05.400
> 
> 标签：c++, path, include, environment-variables

让我们假设 in `first.h`we have`#include "aaa/second.h"`和 in the `aaa/second.h`we have `#include "bbb/third.h"`。我认为在“默认设置”中，如果“third.h”不在“aaa/bbb”中，编译器会抱怨。

是否有可能以这样的方式改变这种行为，即使用 所在的目录`first.cpp`来构造所有包含的全名？

例如，如果“first.h”位于“/home/bucky/”中，那么`#include "bbb/third.h"`（来自“aaa/second.h”）应该被解释为`/home/bucky/bbb/third.h`而不是`/home/bucky/aaa/bbb/third.h`。

**编辑**

我无法更改整个源代码。在代码中使用引号代替尖括号。

`g++ -std=c++0x name.cpp -o name`我在命令行中编译使用。我在两个不同的终端上做。看起来在第一个终端中，工作目录用于构造全名，而在第二个终端中并非如此。我几乎可以肯定它是由于环境变量而发生的，但我不知道是哪些。所以，我的问题是，在更大程度上，哪些环境变量可以强制编译器使用工作目录构造全名。

**编辑 2**

在我的 test.cpp 文件中，我包含“first.h”。这种包含不会导致任何问题（编译器参见“first.h”）。“first.h”文件包括“ppp/second.h”。它也不会引起任何问题。但是“ppp/second.h”包含“ppp/third.h”，这就是问题出现的地方。我认为问题的原因是“second.h”试图在second.h所在目录的“ppp”子目录中找到“third.h”。换句话说，second.h 试图在“ppp/ppp”子目录中找到第三个.h（因为 second.h 位于 ppp 子目录中）。

在另一个终端，同样的编译命令，在同一个目录下不会造成任何问题。原因显然在于环境变量的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:16:30.640

您应该为您的项目全局设置包含路径。在您的示例中，您可以将一些选项传递`-I /home/bucky`给您的编译器（如果它是 GCC 或 Clang）。MSVC 有类似的选项。

`<...>`（所有#include 都相对于包含路径进行搜索。和之间的区别在于`"..."`后者也搜索当前目录。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:16:56.227

是的。确切的机制取决于编译器，但总而言之，您需要配置编译器以将项目路径包含在搜索路径中。对于 GCC 和 clang，这是通过`-I`命令行标志 ( `-I path/of/first.cpp`) 完成的。此配置通常在项目设置（如果您使用 IDE）、Makefile 或类似文件中完成。

Since you’re talking about environment variables: the flags that are passed to the `g++` and `c++` compiler are controlled by the `CXXFLAGS` and `CFLAGS` variables.

# java - HTTP 状态 500 - javax.servlet.ServletException：java.lang.NullPointerException

> ID：15496631
> 
> 赞同：0
> 
> 时间：2013-03-19T10:14:08.847
> 
> 标签：java, rest, jersey

我在使用球衣的 REST 服务中遇到问题。以下代码等待我编写用户登录。

**访问用户.java**

```
public String login (Connection con, String login) throws SQLException
{
    String toReturn = "Login not successful";
    String password = "dea6d5362b7750f77c31a7412f0c0acb";

    try {
            pstmt = connection.prepareStatement("SELECT setEventUserLogin(?,?,?)");
            pstmt.setString(1, login);
            pstmt.setString(2, password);
            pstmt.setLong(3, System.currentTimeMillis());
            res  = pstmt.executeQuery();

    if(res.next())
    {
        if (!res.getString(1).equals("0"))
            toReturn = "Login successful!";
    }
    } catch (SQLException ex) {
        System.out.println("SQLException: " + ex);        
    }
    return toReturn;
} 
```

**用户管理器.java**

```
public String login(String login) throws Exception
{
    String response = null;
    Database db = new Database();
    Connection con = db.getDBConnection();
    AccessUser access = new AccessUser();
    response = access.login(con, login);
    return response;
} 
```

**UserFacadeREST.java**

```
@PUT
@Path("login")
@Produces({"application/json", "text/plain"})
@Consumes("application/json")
public String logon(String login) throws Exception
{
    String response = null;
    response = new UserManager().login(login);
    return response;
} 
```

所以，当我写用户登录时，我收到这个错误：

![在此处输入图像描述](../Images/e557ed6268f7a966d6bf05490720a89c.png)

```
 [#|2013-03-19T10:08:44.410+0000|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=111;_ThreadName=Thread-2;|EJB5184:A system exception occurred during an invocation on EJB UserFacadeREST, method: public java.lang.String service.UserFacadeREST.login(java.lang.String) throws java.lang.Exception|#]

[#|2013-03-19T10:08:44.411+0000|WARNING|glassfish3.1.2|javax.enterprise.system.container.ejb.com.sun.ejb.containers|_ThreadID=111;_ThreadName=Thread-2;|javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at sun.proxy.$Proxy472.login(Unknown Source)
    at service.__EJB31_Generated__UserFacadeREST__Intf____Bean__.login(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at entities.AccessUser.login(AccessUser.java:61)
    at others.UserManager.login(UserManager.java:35)
    at service.UserFacadeREST.login(UserFacadeREST.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 47 more
|#]

[#|2013-03-19T10:08:44.413+0000|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=111;_ThreadName=Thread-2;|StandardWrapperValve[ServletAdaptor]: PWC1406: Servlet.service() for servlet ServletAdaptor threw exception
java.lang.NullPointerException
    at entities.AccessUser.login(AccessUser.java:61)
    at others.UserManager.login(UserManager.java:35)
    at service.UserFacadeREST.login(UserFacadeREST.java:71)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at sun.proxy.$Proxy472.login(Unknown Source)
    at service.__EJB31_Generated__UserFacadeREST__Intf____Bean__.login(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

这很奇怪，因为我做了一个非常相似的**注销**方法，并且工作正常......你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:22:06.507

也许你混合`con`和`connection`

```
pstmt = con.prepareStatement("SELECT setEventUserLogin(?,?,?)"); 
```

？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:20:10.847

NPE 的原因可能是连接对象或`res.`[getString()](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getString%28int%29)返回`null`。

# asp.net - 无法识别表达式前缀“App_GlobalResources”。请更正前缀或在

> ID：15496639
> 
> 赞同：0
> 
> 时间：2013-03-19T10:14:31.327
> 
> 标签：asp.net, sharepoint, localization, prefix

我的解决方案中有一个 App_GlobalResources ，其中包含一些 resx 文件。

在我的 ASPX 页面中，当我输入以下内容时收到错误消息：

```
<asp:Label ID="label" runat="server" Text="<% $App_GlobalResources:Portal.Localization.Global, Navigation_Organization%>"></asp:Label> 
```

错误如下：

> 无法识别表达式前缀“App_GlobalResources”。请更正前缀或在配置部分注册前缀。

我不知道为什么我会收到这个错误，有人有类似的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:10:53.427

在您的标签中尝试以下操作：

```
Text="<%$ Resources: Portal.Localization.Global, Navigation_Organization %>" 
```

# wordpress - WordPress重定向问题？

> ID：15496644
> 
> 赞同：0
> 
> 时间：2013-03-19T10:14:44.027
> 
> 标签：wordpress

我在一个域上安装了两个 WP。

根： `http://www.zbodysculpt.com`

子网站： `http://www.zbodysculpt.com/zbodydev/`

问题出在导航链接上`zbodydev`？他们总是重定向到根站点。他们必须导航到子网站的页面`zbodydev`？对解决它有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:53:10.587

在您的仪表板中转到`Settings`->`General`并检查两者`WordPress URL`并`Site URL`指向`http://www.zbodysculpt.com/zbodydev/`.

# asp.net - 如何动态旋转asp.net中的文本？

> ID：15496652
> 
> 赞同：0
> 
> 时间：2013-03-19T10:15:04.860
> 
> 标签：asp.net

如何使用 ASP.NET 动态旋转 HTML 中的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:23:41.250

您可以使用 HTML5 和 javascript 旋转 HTML 中的文本，因为它是客户端编码，请参阅此[链接](https://stackoverflow.com/questions/12312752/how-to-make-the-text-write-in-counterclockwise-direction)，您可以获得一些想法。使用 HTML5 中的画布来旋转文本。

# android - 自定义列表视图编辑值

> ID：15496656
> 
> 赞同：0
> 
> 时间：2013-03-19T10:15:05.693
> 
> 标签：android, listview

![在此处输入图像描述](../Images/9c018ef2483239dbbd5d2fbef35fe4aa.png)![在此处输入图像描述](../Images/f8cbef33616e3dac239feba9f022630f.png)我在第二个活动中有 EditText。因此在此处输入的值将添加到第一个活动中的自定义列表视图中。

我在列表中的第一个活动我有文本视图、复选框和按钮（编辑）。这里的 textview 将来自第二个活动 edittext 数据。所以在这里如果我点击编辑然后它导航到该特定数据的第二个活动。我现在得到所有这些..在第二个活动中我想编辑文本字段值。所以它必须在列表视图中显示编辑后的值和这个数据特定行。

```
public class MyApplication extends Application{

 ArrayList<String> arryList = new ArrayList<String>();  
  String cardNumberData=null;

}

public class Second extends Activity{

    EditText cardNumber;
    String cardNumberReceived;
    MyApplication app;  

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
     requestWindowFeature(Window.FEATURE_NO_TITLE);
     setContentView(R.layout.editcredit);

    cardNumberReceived = getIntent().getStringExtra("cardwithoutstring");

    System.out.println("cardWithOutStringReceived"+cardNumberReceived);

 app = ((MyApplication) getApplicationContext());

 cardNumber =(EditText)findViewById(R.id.cardnumber); 

 cardNumber.setText(cardNumberReceived);     

Button save =(Button)findViewById(R.id.save);
    save.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

                app.cardNumberData =cardNumber.getText().toString();                
                System.out.println("Gotcardname"+app.cardNumberData);           

                 app.arryList.add(app.cardNumberData);

             System.out.println("Array List Size "+app.arryList.size());
             System.out.println("Array List Size "+app.cardTypeList.size());

            Intent saveIntent =new Intent(Second.this,First.class);

            startActivity(saveIntent);  

        }
    });

     }

}

public class First extends Activity{

    protected ListItemsState[] mDeletedItemsStates;
    protected ArrayAdapter<ListItemsState> mListAdapter;
    protected ListView mFoldersListView;
    protected Context mContext; 
    LayoutInflater lay;
    MyApplication app;  

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     

        setContentView(R.layout.newcard);

        app = ((MyApplication) getApplicationContext());

        mDeletedItemsStates = (ListItemsState[])getLastNonConfigurationInstance();

        if (mDeletedItemsStates == null) {
            mDeletedItemsStates = new ListItemsState[app.arryList.size()];
            for (int i = 0; i < app.arryList.size(); i++) {

            mDeletedItemsStates[i] = new ListItemsState(app.arryList.get(i),i);

            }
        }
        ArrayList<ListItemsState> gridItemsList = new ArrayList<ListItemsState>();
        gridItemsList.addAll(Arrays.asList(mDeletedItemsStates));

        mListAdapter = new DeletedItemsStateArrayAdapter(this, gridItemsList);
        mFoldersListView.setAdapter(mListAdapter);
        mFoldersListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        mFoldersListView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getApplicationContext(), "am thelist",
                        Toast.LENGTH_LONG).show();
            }
        });

    }

    private static class ListItemsState {
        private String produ = "";  
        private boolean checked = false;
        private int position;       

        public ListItemsState(String produ, int position) {     
            this.position = position;           

        }

        public String getProdu() {
            return produ;
        }

        public int getPosition() {
            return position;
        }

        public boolean isChecked() {
            return checked;
        }

        public void setChecked(boolean checked) {
            this.checked = checked;
        }

    }

    /** Holds child views for one row. */
    private static class ListItemsStateViewHolder {
        private RadioButton checkBox;
        private TextView produ;
            private Button edit;        

        public TextView getProdu() {
            return produ;
        }               

        public Button getEdit() {
            return edit;
        }

        public RadioButton getCheckBox() {
            return checkBox;
        }

    }

    private class DeletedItemsStateArrayAdapter extends
            ArrayAdapter<ListItemsState> {

        private int mSelectedPosition = -1;
        private RadioButton mSelectedRB;

        private LayoutInflater inflater;
        public DeletedItemsStateArrayAdapter(Context context,
                List<ListItemsState> sentItemsStateList) {
            super(context, R.layout.customlist, R.id.card,
                    sentItemsStateList);

            // Cache the LayoutInflate to avoid asking for a new one each time.
            inflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {

            final ListItemsState deletedItemsState = (ListItemsState) this
                    .getItem(position);

            ListItemsStateViewHolder viewHolder = new ListItemsStateViewHolder();
            // Create a new row view
            if (convertView == null) {
                convertView = inflater.inflate(R.layout.customlist, null);

                convertView.setTag(new ListItemsStateViewHolder());

            }

            else {

                viewHolder = (ListItemsStateViewHolder) convertView.getTag();
                viewHolder.checkBox = viewHolder.getCheckBox();

                viewHolder.produ = viewHolder.getProdu();

                viewHolder.edit = viewHolder.getEdit();

            }

              viewHolder.produ = (TextView) convertView.findViewById(R.id.card);           
                      viewHolder.checkBox = (RadioButton) convertView.findViewById(R.id.radioButton1);                           

               viewHolder.edit=(Button)convertView.findViewById(R.id.editbutton);       

            try {
                viewHolder.checkBox.setTag(deletedItemsState);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }       

                viewHolder.edit.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View arg0) {

                Intent edit =new Intent(getApplicationContext(), Second.class);             

                  edit.putExtra("cardNumberSending",app.arryList.get(position));                    

                edit.putExtra("Indexvalue",mFoldersListView.getItemIdAtPosition(position));

        System.out.println("Index value :::::::::   "+mFoldersListView.getItemIdAtPosition(position));

                            startActivity(edit);                            

                    }
                });

            viewHolder.produ.setText(deletedItemsState.getProdu());     

            return convertView;
        }

    }

    public Object onRetainNonConfigurationInstance() {
        return mDeletedItemsStates;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:44:45.820

您正在将编辑后的数据添加到`ArrayList`再次避免它在`Second` `Activity`

```
app.cardNumberData = cardNumber.getText().toString();
if(arryList.indexOf(cardNumberReceived) != -1)
{
    app.arryList.set(arryList.indexOf(cardNumberReceived), app.cardNumberData);
}else
{
    app.arryList.add(app.cardNumberData);
} 
```

在你的第二次`Activity`做这个`onClick`保存。

# programming-languages - 我可以在 printf() 函数中使用 scanf() 函数来给出定义的输出吗？

> ID：15496658
> 
> 赞同：2
> 
> 时间：2013-03-18T16:52:24.010
> 
> 标签：programming-languages, c, coding-style

我可以在 printf() 函数中使用 scanf() 函数来给出定义的输出吗？如果是，请向我解释以下简单代码的**输出：**

```
#include <stdio.h>
#include <conio.h>
int main()
{
  int a;
  printf("%d",scanf("%d",&a));
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:08:27.103

不完全是。`scanf`返回解析的项目数，但您可以这样做：

```
printf("%d", (scanf("%d", &a), a)); 
```

使用逗号运算符丢弃结果`scanf`并改用 a 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T17:10:14.343

`printf`并且`scanf`只是功能。您可以像上面那样使用一个函数的输出作为另一个函数的参数。

正如@MichaelT 在他的评论中指出的那样，返回值*不是*`scanf`从键盘读取的值。如果您检查[手册页](http://linux.die.net/man/3/scanf)，它会显示：

 *> 这些函数返回成功匹配和分配的输入项的数量，该数量可能少于提供的数量，或者在早期匹配失败的情况下甚至为零。

换句话说，在您的示例中`1`，如果输入了有效整数，或者`0`没有输入有效整数，它将返回 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:10:52.380

`scanf`返回成功进行的转换次数，示例程序将打印 a `1`， a`0`或 a ，具体`-1`取决于提供的输入（`1`如果输入的开头可转换为整数，`0`对于非整数输入，`-1`对于输入错误）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-05T22:02:01.227

**易于理解**

在 C 中，printf() 返回成功写入输出的字符数，scanf() 返回成功读取的项目数。

例如，下面的程序打印 akp 3

```
int main()
{
  printf(" %d", printf("%s", "akp"));
  getchar();
} 
```

无论用户输入什么字符串，下面的程序都会打印 1。

```
int main()
{
  char a[50];  
  printf(" %d", scanf("%s", a));
  getchar();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-16T09:28:25.323

实际上，您可以使用 printf() 来输出函数的返回值。

```
#include <stdio.h>
#include <conio.h>
int main()
{
  int a;
  printf("%d",scanf("%d",&a));
  return 0;
} 
```

如果你输入一个数字。输出1，表示scanf()函数执行成功，返回值为1。

* * *

如果你输入一个字母。它会输出 0。这意味着函数指令的执行失败：这个条件是匹配失败。返回值为 0。*

# c# - 使用 jQuery .load() 加载用户控件

> ID：15496662
> 
> 赞同：4
> 
> 时间：2013-03-19T10:15:16.830
> 
> 标签：c#, jquery, asp.net, user-controls

我正在使用一个干净的测试页面，并加载一个`user control`带有 jQ​​uery 的`.load()`函数。我得到的当前错误是：
`GET http://localhost:27950/OCDB/test.ascx 403 (Forbidden)`

这是我的页面代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test" %>
<%@ Register Src="~/test.ascx" TagPrefix="uc1" TagName="test" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>This is a test.</title>

     <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.0.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#ucPlaceholder').load('test.ascx');
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="ucPlaceholder">
    </div>
    </form>
</body>
</html> 
```

我的用户控制代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="test.ascx.cs" Inherits="test" %>

<input placeholder="test input"/> 
```

如您所见，它超级简单。我的直接猜测是该页面没有拾取`Register`. 谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:20:41.497

我认为您不能使用 jQuery 直接调用用户控件。
但是您可以使用通用 http 处理程序来帮助它。

[http://blog.ovesens.net/2008/12/dynamically-loading-asp-net-user-controls-with-jquery/](http://blog.ovesens.net/2008/12/dynamically-loading-asp-net-user-controls-with-jquery/)
[http://www.codeproject.com/Articles/117475/Load-ASP-Net-用户控制-动态-使用-jQuery](http://www.codeproject.com/Articles/117475/Load-ASP-Net-User-Control-Dynamically-Using-jQuery)

# javascript - jquery函数没有被自动生成的html调用

> ID：15496663
> 
> 赞同：1
> 
> 时间：2013-03-19T10:15:18.343
> 
> 标签：javascript, jquery, html

我面临一个奇怪的问题。我的具体 html 如下所示：

```
<div class="pages">
  <div class="dynamicPages"></div>
  <div class="staticPages">
    <div class="span4">
      <ul class="nav nav-stacked">
        <li>
          <textarea class="newcomment field span12"
            style="width: 350px; height: 20px; resize:none;  font-size: 60%"
            id="newcomment${page.id}"
            name="newcomment${page.id}"
            placeholder="Enter comment here...">
          </textarea>
        </li>
      </ul>
    </div>
  </div>   
</div> 
```

现在有时我会生成与 div 类 span4 中的内容相同的 html，并将其添加到 div 类动态中，如下所示：

```
 $(".dynamicPages").append(page_html); 
```

我在对服务器进行 ajax 调用后生成的这个动态 html。

当用户在文本区域输入回车键时，我有以下 jquery 函数。

```
 $(".pages").on('keydown','.newcomment',function(event) {
    if(event.which == '13'){
      ... do some stuff
    }
  }); 
```

现在一切都很完美。

现在我想为我的文本区域添加以下插件：

> [https://github.com/jaz303/jquery-grab-bag/blob/master/javascripts/jquery.autogrow-textarea.js](https://github.com/jaz303/jquery-grab-bag/blob/master/javascripts/jquery.autogrow-textarea.js)

所以我改变了上面的jquery，如下所示

```
 $('.pages .newcomment').autogrow().keypress(function(event){
   if(event.which == '13'){
     ...
   }
 }); 
```

并且在我之前提到的成功事件中的 ajax 调用中，我再次执行了某些操作，因此 autogrow 将自身附加到动态生成的元素上，如[如何使用 jquery 在动态生成的 textarea 上自动运行方法？](https://stackoverflow.com/questions/5165941/how-do-i-automatically-run-a-method-on-a-dynamically-generated-textarea-with-jqu)

```
$('.pages .newcomment').autogrow(); 
```

但是现在我看到，如果我添加动态 html，jquery 函数根本不会被调用。当我重新加载页面时，即当从服务器端属性填充 html 时，jquery 函数被正确调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:20:34.083

```
$('.pages .newcomment').autogrow().keypress(function(event){ 
```

这一行等价于：

```
$('.pages .newcomment').autogrow();
$('.pages .newcomment').keypress(function(event){ 
```

这不适用于动态添加的元素，因为它们在绑定时不存在。`on`您在代码的前面部分进行事件委托。您需要再次执行此操作，并放弃链接尝试：

```
$('.pages .newcomment').autogrow();
$(".pages").on('keydown','.newcomment',function(event) { 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T10:23:45.377

使用`delegate()`而不是`on()`.

> **。代表（）**
> 
> 根据一组特定的根元素，将处理程序附加到与选择器匹配的所有元素的一个或多个事件，*现在或将来。*

# jquery - 已选择 jQuery 菜单项

> ID：15496668
> 
> 赞同：2
> 
> 时间：2013-03-19T10:15:28.853
> 
> 标签：jquery

我都！

我有这个菜单：

```
 <ul id="navigation">
      <li><a href="index.php">Home</a></li>
      <li><a href="index.php?page=Entidad">Entidad</a></li>
  </ul> 
```

使用 jQuery，我想在单击菜单项时应用 .active 类，如下所示：

```
 $(document).ready(function(){
      $("li a").click(function(){
           $(this).parent().find("li").addClass('active');   
      });
  }); 
```

没用，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:16:37.080

`parent`是`a`它自己，`li`所以你不需要`find`li。

**[现场演示](http://jsfiddle.net/tjk5g/)**

```
$(document).ready(function(){
      $("li a").click(function(){
           $(this).parent().addClass('active');   
      });
}); 
```

**编辑**从以前的元素中删除类并添加到当前

**[现场演示](http://jsfiddle.net/tjk5g/1/)**

```
$(document).ready(function(){
      $("li a").click(function(event){
           $('#navigation li').removeClass();
           $(this).parent().addClass('active');
      });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:16:43.360

处理的点击时`a`，`li`是父项，所以只需：

```
$(this).parent().addClass('active'); 
```

但是，您确定这一点，因为我认为将链接设为活动的东西是明智的吗？只是一个观察。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T11:00:38.297

单击超链接后，您的页面将刷新，因此此代码`$(this).parent().addClass('active')`将不起作用。

试试这个：

```
$(function() {
                var page = getParameterByName('page');
                $("#navigation a:contains('" + page + "')").parent().addClass('active');
            });

            function getParameterByName(name)
            {
              name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
              var regexS = "[\\?&]" + name + "=([^&#]*)";
              var regex = new RegExp(regexS);
              var results = regex.exec(window.location.search);
              if(results == null)
                return "Home";
              else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:18:44.387

只是

```
$(this).parent().addClass('active'); //  $(this).parent() selects list element 
```

无需在那里再次找到 li 元素。

# javascript - Angular 构建无法在服务器上运行

> ID：15496669
> 
> 赞同：5
> 
> 时间：2013-03-19T10:15:31.117
> 
> 标签：javascript, angularjs, yeoman

我正在尝试在服务器上运行我的 AngularJS 前端。我正在使用 Yeoman 构建应用程序。我上传了非常基本的 hello world 应用程序，我得到了没有加载 JavaScript 的纯 HTML 文本。Chrome 中的控制台这样说：

```
Error: Unknown provider: aProvider <- a
    at Error (<anonymous>)
    at http://../scripts/vendor/d10639ae.angular.js:2627:15
    at Object.getService [as get] (http://../scripts/vendor/d10639ae.angular.js:2755:39)
    at http://../scripts/vendor/d10639ae.angular.js:2632:45
    at getService (http://../scripts/vendor/d10639ae.angular.js:2755:39)
    at invoke (http://../scripts/vendor/d10639ae.angular.js:2773:13)
    at Object.instantiate (http://../scripts/vendor/d10639ae.angular.js:2805:23)
    at http://../scripts/vendor/d10639ae.angular.js:4620:24
    at update (http://../scripts/vendor/d10639ae.angular.js:13692:26)
    at http://../scripts/vendor/d10639ae.angular.js:8002:24 d10639ae.angular.js:5526 
```

有没有人遇到同样的情况并知道出路？

**编辑：**

```
'use strict';

yoAngApp.controller('MainCtrl',['$scope', '$window', function($scope, $window) {
    $scope.awesomeThings = [
        'HTML5 Boilerplate',
        'AngularJS',
        'Testacular'
    ];

    $scope.records = [{ title : 'one' }, { title : 'two' }, { title : 'three' }, { title : 'four' }];

    $scope.greet = function() {
        ($window.mockWindow || $window).alert('Hello ' + $scope.name);
    }
}]
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T10:40:17.823

我很确定您已将代码压缩器用于生产服务器，对吗？

无论如何，[来自 Angular Js 的人非常清楚](http://docs.angularjs.org/guide/di)，如果使用不当，使用 minifier 会搞乱依赖注入。为什么会发生这种情况？看一看：

## 依赖注入与代码压缩器

`function MyController($scope, $log) { ... }`

在上面的代码片段中，您正在使用隐式 DI。Angular 看到变量`$scope`并尝试将其与任何托管依赖项匹配。在此示例中，它将与`$scope`对象匹配。

然而，这在代码缩小后将不起作用，因为结果看起来像这样：

`function a(b, c) { ... }`

由于变量和函数名称被缩小，Angular 无法知道“a”到底是什么。

## 解决方案

使用显式依赖注入配置。

```
var MyController = function($scope, $log) { ... }
MyController.$inject = ['$scope', '$log']; 
```

在此代码段中，您正在定义应通过将其名称数组附加到名为`$inject`. 现在 Angular 将知道它应该解析`$scope`并将其作为第一个参数传递给`MyController`. 然后它将解析`$log`并将其作为第二个参数传递。这一切都是可能的，因为缩小器不会修改字符串变量的内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T12:01:22.290

正如@ŁukaszBachman 建议的那样，您可以使用 $inject 注释，或者如果您愿意，可以使用 Inline Annotation：

1.  保持你的依赖注释接近你的函数定义（为了更好的可读性）。
2.  远离污染全局命名空间。

```
app.controller('UsersController',
  [
    '$scope', 'UserService', '$location', '$routeParams',
    function($scope, User, $location, $routeParams) {
      $scope.user = User.get({id: $routeParams.id});
      ...
    }
  ]
); 
```

# youtrack - Youtrack 自定义字段为谁提出了问题？

> ID：15496671
> 
> 赞同：2
> 
> 时间：2013-03-19T10:15:34.417
> 
> 标签：youtrack

我原以为这是一件简单的事情，但我不太确定如何去做。

基本上，在当前项目中，我们正在试用 YouTrack，敏捷板很棒，但他们可以知道是谁提出了某些问题，以防他们需要就该问题进一步质疑他们。但是，我似乎找不到一种简单的方法来显示此信息。

我以为这将是用户类型的自定义字段，但似乎这需要手动填写，并且不仅可以由正在执行任务的用户预先填充。

那么这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T23:39:13.073

目前，您只能在敏捷板的工单上查看分配的用户名。我根据您的要求创建了一个任务 [http://youtrack.jetbrains.com/issue/JT-19118](http://youtrack.jetbrains.com/issue/JT-19118)，欢迎您投票并发表评论。

作为一种粗略的解决方法，您可以配置有关项目中已创建问题的通知。通过这种方式，将通知开发人员所有创建的问题及其报告者。为此，创建一个已保存的搜索（即由：{Testers} 创建），使该搜索对需要的组可见（通过单击已保存搜索上的“编辑”）并在用户的“个人资料”中启用“关于已创建问题”的通知。此外，具有管理员权限的用户可以自己允许所有需要的用户发送此通知（导航到“管理”区域 -> “用户” -> {用户} ->“个人资料”）。

请注意，您可以通过电子邮件和 Jabber 接收通知。

谢谢你。

# python - Lighttpd + Django 配置 - “等待连接”

> ID：15496673
> 
> 赞同：1
> 
> 时间：2013-03-19T10:15:37.830
> 
> 标签：python, django, fastcgi, lighttpd

我想用 Django 配置 Lighttpd 以显示在 localhost:3033 基本的“hello-world”Django 网站（由创建`$ django-admin startproject hellodjango`）。我遵循[了文档](https://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/)，但我无法使我的网站正常工作。转到 localhost:3033 后什么都没有发生，我唯一看到的是消息“等待连接”。

我的**lighttpd.config**

```
server.groupname            = "www-data"

index-file.names            = ( "index.php", "index.html",
                                "index.htm", "default.htm",
                               " index.lighttpd.html" )

url.access-deny             = ( "~", ".inc" )

static-file.exclude-extensions = ( ".php", ".pl", ".fcgi" )

## Use ipv6 if available
#include_shell "/usr/share/lighttpd/use-ipv6.pl"

dir-listing.encoding        = "utf-8"
server.dir-listing          = "enable"

compress.cache-dir          = "/var/cache/lighttpd/compress/"
compress.filetype           = ( "application/x-javascript", "text/css", "text/html", "text/plain" )

include_shell "/usr/share/lighttpd/create-mime.assign.pl"
include_shell "/usr/share/lighttpd/include-conf-enabled.pl"

# My configuration
$HTTP["host"] == "www.hellodjango.com" {

    server.document-root = "/home/krris/programowanie/django/hellodjango"
    server.errorlog = "/home/krris/programowanie/django/hellodjango/logs/error.log"
    accesslog.filename = "/home/krris/programowanie/django/hellodjango/logs/access.log"
    fastcgi.server = (
        "/hellodjango.fcgi" => (
            "main" => (
                # Use host / port instead of socket for TCP fastcgi
                "host" => "127.0.0.1",
                "port" => 3033,
                # "socket" => "/home/krris/hellodjango.sock",
                "check-local" => "disable",
            )
        ),
    )
    alias.url = (
        "/media/" => "/home/krris/programowanie/django/hellodjango/media/",
    )

    url.rewrite-once = (
        "^(/media.*)$" => "$1",
        "^/favicon\.ico$" => "/media/favicon.ico",
        "^(/.*)$" => "/hellodjango.fcgi$1",
    )
} 
```

**hellodjango.fcgi**：

```
#!/usr/bin/python
import sys, os

# Add a custom Python path.
sys.path.insert(0, "..")

# Switch to the directory of your project. (Optional.)
os.chdir("/home/krris/programowanie/django/hellodjango")

# Set the DJANGO_SETTINGS_MODULE environment variable.
os.environ['DJANGO_SETTINGS_MODULE'] = "hellodjango.settings"

from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="prefork", daemonize="true", host="127.0.0.1", port="3033") 
```

我还在**settings.py 中**添加了这一行：

```
FORCE_SCRIPT_NAME = "" 
```

我使用命令运行我的应用程序：

```
$ ./manage.py runfcgi method=prefork host=127.0.0.1 port=3033 
```

**错误日志：**

```
2013-03-19 11:27:10: (log.c.166) server started 
2013-03-19 11:27:16: (server.c.1396) [note] graceful shutdown started 
2013-03-19 11:27:16: (log.c.166) server started 
2013-03-19 11:27:16: (server.c.1512) server stopped by UID = 0 PID = 8093 
```

我正在使用 Ubuntu 12.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:05:21.210

您的服务器由于某种原因停止。一种可能的调试方法是在此处设置 daemonize="false"：

runfastcgi(method="prefork", daemonize="true", host="127.0.0.1", port="3033")

这可以帮助您了解正在发生的事情以及服务器关闭的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T09:01:05.423

我试过做你刚刚做的事情。我发现做这项工作的另一件事（我认为）是确保：

*   .fcgi 文件对每个人都有可执行权限。
*   日志文件夹也必须具有权限。

我看到的只是项目文件夹的文件列表视图。这是你得到的吗？它也不适用于我的 www.helloDjango.com 网址。

如果您得到相同的结果，请告诉我。我还发现要获得一个基本的 hello world 页面真的很困难和令人困惑。

# android - 我在哪里可以找到 Android 中的应用数据

> ID：15496675
> 
> 赞同：5
> 
> 时间：2013-03-19T10:15:42.203
> 
> 标签：android, file

我的目标是将应用程序中的数据保存在文本文件中以供进一步分析。[我使用此处](http://www.mysamplecode.com/2012/06/android-internal-external-storage.html)给出的确切代码来保存数据：

根据应用程序存储和检索数据，但我无法在手机上找到 MySampleFile.txt（即使使用搜索功能）。

`Android -> data -> com.*.*.`我在三星 Galaxy S3中找不到它。这款手机有什么不同吗？

我应该对手机进行任何修改吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-19T10:28:43.450

执行以下操作以查看手机内存中存储的数据。

1.  在手机上打开 USB 调试。
2.  将手机连接到系统。
3.  在**Eclipse**中打开**DDMS**透视图。
***   从左侧的**设备**选项卡中选择您的设备。*   在右侧，最后一个选项卡将是**File Explorer**。打开那个。*   遍历以`data/data/your.app.package`查找您要查看的数据。**

 ****PS：-** *永远不要*root 你的手机，除非你是一个喜欢搞乱`System`应用程序的开发者。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-19T10:21:39.970

要看`data`，你手机一定要`root`。三星 Galaxy S3 不是供应商的 root，您需要 root 手机才能访问内部存储器/存储，您只能访问手机中的外部存储器/存储，即 sdcard

但是，我建议你`Emulator`宁愿使用你的手机。

这里有一些关于什么是生根的链接，你可以通过这些链接：

[http://gizmodo.com/5982287/reasons-to-root-your-android-device](http://gizmodo.com/5982287/reasons-to-root-your-android-device)
[http://lifehacker.com/5789397/the-always-up+to+date-guide-to-rooting-any-android -](http://lifehacker.com/5789397/the-always-up+to+date-guide-to-rooting-any-android-phone)[电话](http://en.wikipedia.org/wiki/Android_rooting)[http://en.wikipedia.org/wiki/Android_rooting](http://lifehacker.com/5789397/the-always-up+to+date-guide-to-rooting-any-android-phone)

但我再次建议使用模拟器，除非您不具备足够的专业知识，无法在您不想让手机 root 时再次 root 和安装固件。

请使用`Emulator`查看`data->com.package`

从 Windows Menu->ShowView->Others->android->fileExplorer 你可以在你的设备中看到文件

在 AndroidManifest.xml 中指定权限：

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`**

# spring-security - Magnolia CMS FilterDecorator

> ID：15496679
> 
> 赞同：1
> 
> 时间：2013-03-19T10:15:49.790
> 
> 标签：spring-security, servlet-filters, magnolia

谁能解释一下`info.magnolia.cms.filters.FilterDecorator` 应该如何使用？我找不到任何例子。我不知道如何设置`decoratedFilter`属性。我问这个是因为我想在过滤器链（`info.magnolia.module.blossom.web.InstallationAwareDelegatingFilterProxy`）中添加 Spring Security 过滤器。如果我直接将它添加到`web.xml`Magnolia 过滤器之前，我将无法访问自定义中的 Magnolia 上下文`AuthenticationProvider`。如果我在 Magnolia 过滤器之后添加，它将无法访问。

或者有没有其他方法可以在自定义中访问 Magnolia 上下文`AuthenticationProvider`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T15:06:03.800

确实，有关更多详细信息，请参阅有关[请求处理的文档](https://documentation.magnolia-cms.com/technical-guide/request-processing-and-filters.html)

和[过滤器](https://documentation.magnolia-cms.com/reference/filters.html)。

# devise - 使用 STI 设计、Omniauth 和多个模型

> ID：15496680
> 
> 赞同：3
> 
> 时间：2013-03-19T10:15:54.523
> 
> 标签：devise, ruby-on-rails-3.2, omniauth

我有一个使用 sti 设计身份验证的应用程序设置（基本用户模型和其他两个模型 - 公司和个人 - 继承自它）。从设计的角度来看，一切正常。我可以为注册表单设置不同的路径，并且一切都按预期工作。现在我想为两个用户（公司和个人）提供使用 facebook 或链接注册/登录的选项。如果我在两个模型上设置 :omniauthable，并在我的 routes.rb 上为每个模型设置 devise_for，我得到一个错误说只有一个模型可以是omniauthable的。如果我不对每个模型使用 devise_for，则不会生成任何路线。如果我只在用户模型上设置omniauthable，我只会得到一个路由和一个回调。

我在某处读到解决方案是单独使用omniauth（与设计分开）。但是，我似乎无法使用与设计分开的omniauth 来实现预期的行为（我可以获得一个单一的授权/回调路由，但是两个，如预期的那样）。

有谁可以帮忙吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-16T16:11:45.010

Devise 的 Omniauthable 模块确实支持多种模型。看

[https://github.com/plataformatec/devise/wiki/OmniAuth-with-multiple-models](https://github.com/plataformatec/devise/wiki/OmniAuth-with-multiple-models)

# html - Css下拉菜单窃听

> ID：15496682
> 
> 赞同：0
> 
> 时间：2013-03-19T10:15:56.567
> 
> 标签：html, css

当您向下滚动页面时，粘性标题会替换原始导航，如果您尝试使用第二级下拉菜单，它们中的大多数会疯狂地出错并尝试在第一个下拉菜单的顶部显示第二个下拉菜单。知道为什么会这样吗？它与正常工作的正常导航代码相同。

[http://brainbuzzmedia.com/themes/expression/blog](http://brainbuzzmedia.com/themes/expression/blog)

# javascript - 用相当于VBA的JS打开窗口并获取内容

> ID：15496683
> 
> 赞同：1
> 
> 时间：2013-03-19T10:15:58.517
> 
> 标签：javascript, html, vba, xss

我在 VBA 中编写了一个工作应用程序，它在后台打开一个浏览器窗口并获取该浏览器窗口的内容以进行进一步处理。为了使体验更加用户友好，我正在尝试将其转换为网页。但是，当我在 Javascript 中打开浏览器窗口时，我找不到获取内容的方法。

我已经使用 iframe 和 window.open(..) 进行了尝试，但在这两种情况下我都遇到了同源策略。

有什么方法可以实现这一点，而无需用户配置 VBA？如果是这样，你能给我任何指示吗？

如果在 JS 中不可能，那么我愿意选择其他任何语言。限制因素是我无权访问其他页面所在的服务器。它在我的 Intranet 上，但我无法对其进行任何修改。

# sql - 如何覆盖数据，然后对该数据进行排序或过滤？

> ID：15496684
> 
> 赞同：4
> 
> 时间：2013-03-19T10:16:00.407
> 
> 标签：sql, variables, sql-order-by

我需要编写一些 SQL，在其中有选择地覆盖表中的一些数据，然后对覆盖的数据进行排序和/或过滤。这是一个非常简化的示例...

我有一张满是宠物名字的桌子，叫做 PET

```
PET_NAME   PET_SPECIES PET_PK
---------- ----------- -----------
Barney     Dog         {PETGUID1}
Fergus     Cat         {PETGUID2}
Meatball   Hamster     {PETGUID3} 
```

我有另一张桌子，它保存着他们的生活状态，叫做 LIFE

```
LIF_PK     LIF_STATUS   LIF_PET_FK
---------- ------------ ------------
{LIFGUID1} Alive        {PETGUID1}
{LIFGUID2} Alive        {PETGUID2}
{LIFGUID3} Dead         {PETGUID3} 
```

我想报告宠物及其生活状况。

```
SELECT          PET_NAME,
                PET_SPECIES,
                LIF_STATUS
FROM            PET
INNER JOIN      LIFE ON LIF_PET_PK=PET_PK 
```

宠物死去的地方，我不想报告名字，而是用“DEADPET”代替。
太多的回忆。然后我想按宠物名称订购。

我以为我可以创建一个代理变量，然后仅在宠物还活着的情况下在 case 语句中将其设置为宠物名，例如

```
DECLARE      @petName nvarchar(18)
SELECT       @petName=(CASE LIF_STATUS='Alive' THEN PET_NAME ELSE 'DEADPET' END),
             PET_SPECIES,
             LIF_STATUS
FROM         PET
INNER JOIN   LIFE ON LIF_PET_PK=PET_PK
ORDER BY     @petName 
```

但我不能这样做，TSQL 不允许。

当然，实际上这与 Pets 无关，都是与金融贷款 {Meatball Lives!} 有关，但原理是一样的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:15:56.447

我相信以下内容应该对您有用（另外，合并您关于变量分配的错误修复）：

```
SELECT       (CASE LIF_STATUS='Alive' THEN PET_NAME ELSE 'DEADPET' END) as `PET_NAME`
             PET_SPECIES,
             LIF_STATUS
FROM         PET
INNER JOIN   LIFE ON LIF_PET_PK=PET_PK
ORDER BY     `PET_NAME` 
```

# visual-studio - Visual Studio 2012 中的解决方案项目参考策略

> ID：15496687
> 
> 赞同：2
> 
> 时间：2013-03-19T10:16:04.307
> 
> 标签：visual-studio, dll, projects-and-solutions

我有 5 个基本项目需要成为多个应用程序的一部分。WinForms、ASP.NET、WPF 取决于我们的需求。

这些项目是：

```
Company.Business - Business Logic DLL
Company.Business.Model - Business Models
Company.Business.DAL - Various DALs
Company.Configuration.Classes - Classes that are used to initialize BOs
Company.Utilities - General Utilities 
```

现在我正在尝试决定在创建新的 UI 解决方案时应该如何进行？

1) 包括项目`Add->Existing project`？

2) 手动将编译后的 .dll 复制到每个解决方案中？

如果是选项 2，我应该对上述所有内容进行基本开发？可能是一个包含所有这些的单独解决方案？在那里我应该开始单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-27T09:08:57.697

我对此的看法是，这取决于您的需求以及“基本”项目的成熟程度。

1.  您的需求

    *   如果您在处理 using-projects 时需要查看“基本”项目的代码，那么我会使用 add-existing project 方法将它们添加到当前解决方案中。在添加了多个现有项目的情况下，我创建了一个名为“引用项目”的解决方案文件夹并将它们添加到此文件夹中。
2.  到期

    *   如果您的“基本”项目仍在与 using-projects 一起开发（可能并排），我也会将它们添加到上述解决方案中。

    *   但是，如果您不需要查看代码，那么您不妨将编译后的 dll 包含在您的客户端项目中。

哈利

# django - Django 电子邮件附件作为“无名”发送

> ID：15496689
> 
> 赞同：5
> 
> 时间：2013-03-19T10:16:18.457
> 
> 标签：django, email, gmail

```
from django.template import loader, Context
from django.core.mail import EmailMultiAlternatives, EmailMessage
from settings import ADBOARD_SETTINGS
import settings

def send_mail(mail_to, subj, message_dict, template_dict=False, mail_from=ADBOARD_SETTINGS['mail_from'], attach=False):

    if not isinstance(mail_to, list):
        mail_to = [mail_to]

    if template_dict:
        txt = loader.get_template(template_dict['txt'])
        html = loader.get_template(template_dict['html'])
        c = Context(message_dict or None)
        message_txt = txt.render(c)
        message_html = html.render(c)
        msg = EmailMultiAlternatives(subj, message_txt, mail_from, mail_to)
        msg.attach_alternative(message_html, "text/html")
    else:
        msg = EmailMessage(subj, message_dict, mail_from, mail_to)
    if attach:
        for one in attach:
            msg.attach(one[0], one[1], one[2])
    msg.send()

def contacts(request):
    from choices import ContactCategoryChoices

    if request.method == 'POST':
        form = ContactForm(request.POST, request.FILES)
        if form.is_valid():
            data = {
                'email': form.cleaned_data.get('email'),
                'subject': form.cleaned_data.get('subject'),
                'message': form.cleaned_data.get('message'),
                'category': int(form.cleaned_data.get('category'))
            }

            recievers = (
                (#recievers)

            emailList = list(dict(recievers)[data.get('category')])

            attaches = [(upload.name, upload.read(), upload.content_type) for upload in
                        [form.cleaned_data[attach] for attach in request.FILES]]
            send_mail(emailList, u'Письмо со страницы контактов', data, {
                'txt': 'home/contacts/txt.html',
                'html': 'home/contacts/html.html',
            }, mail_from=settings.SENDER_EMAIL, attach=attaches)
            messages.add_message(request, messages.SUCCESS, u'Сообщение отправлено')
            form = ContactForm()
    else:
        form = ContactForm()
    return render_to_response('home/contacts/index.html', {'form': form}, context_instance=RequestContext(request)) 
```

如果我添加一些文件 - 它们在附件中显示为“无名”……不仅是 gmail。Django 1.3.1，utf-8 命名文件。有没有机会在不转换为 ascii 的情况下使其工作？只要由于保存原始文件名而无法转换它就非常重要。

![伊姆古尔](../Images/a49a6962d3a080d08a3a41c8a858bb27.png)

**更新：**
同时标题似乎合法：

![标头](../Images/5ff910a76d8ce5dc4afc7aa895597e41.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T11:34:58.180

行。用以下代码弄清楚：

```
import mimetypes
from email import encoders
from email.header import Header
from email.mime.base import MIMEBase
from django.core.mail.message import DEFAULT_ATTACHMENT_MIME_TYPE

class EmailMultiAlternativesWithEncoding(EmailMultiAlternatives):
    def _create_attachment(self, filename, content, mimetype=None):
        """
        Converts the filename, content, mimetype triple into a MIME attachment
        object. Use self.encoding when handling text attachments.
        """
        if mimetype is None:
            mimetype, _ = mimetypes.guess_type(filename)
            if mimetype is None:
                mimetype = DEFAULT_ATTACHMENT_MIME_TYPE
        basetype, subtype = mimetype.split('/', 1)
        if basetype == 'text':
            encoding = self.encoding or settings.DEFAULT_CHARSET
            attachment = SafeMIMEText(smart_str(content,
                settings.DEFAULT_CHARSET), subtype, encoding)
        else:
            # Encode non-text attachments with base64.
            attachment = MIMEBase(basetype, subtype)
            attachment.set_payload(content)
            encoders.encode_base64(attachment)
        if filename:
            try:
                filename = filename.encode('ascii')
            except UnicodeEncodeError:
                filename = Header(filename, 'utf-8').encode()    # This is the important line
            attachment.add_header('Content-Disposition', 'attachment',
                                   filename=filename)
        return attachment 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T11:31:23.690

根据票[14964中的](https://code.djangoproject.com/ticket/14964)[修复](https://github.com/django/django/commit/665ec600a4)：

```
from django.core.mail import EmailMultiAlternatives
import mimetypes
from django.core.mail.message import DEFAULT_ATTACHMENT_MIME_TYPE

class UnicodeEmailMultiAlternatives(EmailMultiAlternatives):

    def _create_attachment(self, filename, content, mimetype=None):
        """
        Overrides EmailMultiAlternatives method to allow UTF8 filenames as attachments.
        """
        if mimetype is None:
            mimetype, _ = mimetypes.guess_type(filename)
            if mimetype is None:
                mimetype = DEFAULT_ATTACHMENT_MIME_TYPE
        attachment = self._create_mime_attachment(content, mimetype)
        if filename:
            try:
                filename = filename.encode('ascii')
            except UnicodeEncodeError:
                filename = ('utf-8', '', filename.encode('utf-8'))
            attachment.add_header('Content-Disposition', 'attachment',
                                  filename=filename)
        return attachment 
```

# jsf-2 - “素数面未定义，预期对象：当手风琴面板具有数据表命令按钮并确认每个选项卡内的对话

> ID：15496691
> 
> 赞同：0
> 
> 时间：2013-03-19T10:16:27.110
> 
> 标签：jsf-2, primefaces

消息：“PrimeFaces”未定义，消息：预期对象：

这个错误出现在IE8上，尤其是当有Accordion面板时。刷新页面后没有错误。当手风琴面板具有数据表命令按钮并在每个选项卡内确认对话时，手风琴面板在初始加载时基本上不适用于 IE。任何机构都可以解决这个问题。我正在使用 Prime faces 3.4、jsf2 和 myfaces

```
 <p:accordionPanel  value="#{testBean.systems}" var="system"  dynamic="true">  

                  <p:tab title="#{system.name}" id="systemId">  
                 <p:commandButton process="@this"  value="edit" icon="ui-icon-pencil" styleClass="btn-primary" style="margin-left:734px;" action="#{testBean.edit}">

                <f:setPropertyActionListener target="#{testBean.formBean}" value="#{system}"></f:setPropertyActionListener>

                </p:commandButton>              
                <p:commandButton value="delete" icon="ui-icon-trash"  styleClass="btn-primary" style="width:70px;" oncomplete="confirmDeleteDialog.show()"/>

                <p:confirmDialog message="message" width="200" 
                                 showEffect="explode" hideEffect="explode" 
                                 header="Confirm" severity="alert" widgetVar="confirmDeleteDialog"> 

                    <p:commandButton  process="@this" value="#{msg.EditSystem_confirmAnswer1}"  action="#{testBean.deleteSystem}" oncomplete="confirmDeleteDialog.hide()">
                        <f:setPropertyActionListener target="#{testBean.formBean}" value="#{system}"></f:setPropertyActionListener>
                    </p:commandButton> 
                    <p:commandButton value="#{msg.EditSystem_confirmAnswer2}" onclick="confirmDeleteDialog.hide()" type="button" /> 

                </p:confirmDialog>  

                     <p:dataTable id="dataTable" var="tester" value="#{system.studs}" rowKey="#{tester.id}">  

                     <p:column id="serName"  sortBy="#{tester.name}"  headerText="#{msg.AddService_serName}"> 

                         <p:commandLink value="#{tester.name}" immediate="true" process="@this" action="#{testBean1.edit}">  
                            <f:setPropertyActionListener   target="#{testBean1.testId}" value="#{tester.id}"/>
                            <f:setPropertyActionListener   target="#{testBean1.testId2}" value="#{tester.desc}"/>
                            <f:setPropertyActionListener   target="#{testBean1.testId3}" value="#{tester.name}"/>
                         </p:commandLink>

                    </p:column> 
```

# jquery - 在父文件中附加敲除并在 iframe 中使用

> ID：15496693
> 
> 赞同：1
> 
> 时间：2013-03-19T10:16:31.990
> 
> 标签：jquery, knockout.js, parent-child

我的申请是基于淘汰赛的，对我来说最大的障碍如下：

1.  我已在主父文件中附加了所需的 JS 文件
2.  我使用了一种方法在 iFrame 中引用这些文件。例如 jQuery 仅在父级中定义，只需从 iframe 中引用它，在 iframe 中定义它的对象。
3.  同样，我能够定义淘汰对象并使用它，但是问题是 - iframe 页面上的绑定不起作用
4.  如果我使用警报来检查淘汰赛的功能是否有效，它正在工作。只有表单字段和数据绑定不起作用

有什么线索吗？

这是代码：父文件（在头下）：

```
 <script type="text/javascript" src="Scripts/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="Scripts/jquery-ui-1.8.20.min.js"></script> 
```

（身体下方）

```
<iframe src="IframePage.html" width="100%" height="100%" id="popUpIframe" marginwidth="0" marginheight="0" frameborder="0" scrolling="auto"></iframe> 
```

框架文件：

```
<script type="text/javascript">   
    var $ = parent.$;
    var ko = parent.ko;    
    $(document).ready(function () { 
        var ViewModel = function (first, last) {
            this.firstName = ko.observable(first);
            this.lastName = ko.observable(last);

            this.fullName = ko.computed(function () {
                alert(this.firstName() + " " + this.lastName());
                return this.firstName() + " " + this.lastName();
            }, this);
        };        
         ko.applyBindings(new ViewModel("Kawal", "Babra"));
    });
</script>
<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:38:45.720

只需将根元素指定为 iframe 文档中的一个元素，例如：

`ko.applyBindings(Model, document.body)`;

这是一个工作示例：http: [//jsfiddle.net/rD8uR/](http://jsfiddle.net/rD8uR/)

这是 iframe 文档： http: [//fiddle.jshell.net/KkPdE/show/light/](http://fiddle.jshell.net/KkPdE/show/light/)

# android - Android 上的 Worklight 应用程序启动画面

> ID：15496704
> 
> 赞同：5
> 
> 时间：2013-03-19T10:17:04.447
> 
> 标签：android, cordova, splash-screen, ibm-mobilefirst

我正在将 Worklight 用于 Android 应用程序，

当我尝试添加启动画面时

```
public class MyApp extends WLDroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       super.setIntegerProperty("splashscreen", R.drawable.splash);
       super.loadUrl(getWebMainFilePath(),2000);
    }       
} 
```

我看到启动画面，但随后出现黑屏，准确地说，应用程序崩溃了，它显示黑屏，当我点击选项按钮时，它崩溃了

当我删除“,2000”

```
public class MyApp extends WLDroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       super.setIntegerProperty("splashscreen", R.drawable.splash);
       super.loadUrl(getWebMainFilePath());
    }       
} 
```

我没有看到启动画面，并且该应用程序正常工作。

我看到有人[在 IBM 论坛上讨论过这个问题](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14938631)

[并且有很多博客文章在此处](http://docs.phonegap.com/en/2.2.0/cordova_splashscreen_splashscreen.md.html)和[此处](http://simonmacdonald.blogspot.com/2012/04/phonegap-android-splashscreen-just-got.html)谈论带有 PhoneGap 的 Android 启动画面 ，但我在这些帖子中没有看到解决我的问题的方法

以下是崩溃后的应用程序日志：

```
I/SurfaceFlinger(   93): [SurfaceFlinger] frames:2, duration:2.262000, fps:0.883908
I/InputDispatcher(  246): channel '426b7be0 NavigationBar (server)' ~ finishDispatchCycle - 4.8ms since event, 3.0ms since dispatch, handled=true
E/AndroidRuntime(15615): FATAL EXCEPTION: main
E/AndroidRuntime(15615): java.lang.NullPointerException
E/AndroidRuntime(15615):    at com.worklight.androidgap.WLDroidGap.onPrepareOptionsMenu(WLDroidGap.java:163)
E/AndroidRuntime(15615):    at com.worklight.androidgap.WLDroidGap.onCreateOptionsMenu(WLDroidGap.java:159)
E/AndroidRuntime(15615):    at android.app.Activity.onCreatePanelMenu(Activity.java:2458)
E/AndroidRuntime(15615):    at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:389)
E/AndroidRuntime(15615):    at com.android.internal.policy.impl.PhoneWindow.onKeyDownPanel(PhoneWindow.java:770)
E/AndroidRuntime(15615):    at com.android.internal.policy.impl.PhoneWindow.onKeyDown(PhoneWindow.java:1435)
E/AndroidRuntime(15615):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1824)
E/AndroidRuntime(15615):    at android.view.ViewRootImpl.deliverKeyEventPostIme(ViewRootImpl.java:3492)
E/AndroidRuntime(15615):    at android.view.ViewRootImpl.handleFinishedEvent(ViewRootImpl.java:3464)
E/AndroidRuntime(15615):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2601)
E/AndroidRuntime(15615):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(15615):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(15615):    at android.app.ActivityThread.main(ActivityThread.java:4524)
E/AndroidRuntime(15615):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(15615):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(15615):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
E/AndroidRuntime(15615):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
E/AndroidRuntime(15615):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T19:27:19.280

如果您使用的是 Worklight 5.0.5.x，请尝试以下操作：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl(getWebMainFilePath());  // yes, this is an extra invocation
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl(getWebMainFilePath(), 5000);
} 
```

如果您使用的是 Worklight 5.0.6.x，请尝试以下操作：

```
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.bindBrowser(appView);
    super.loadUrl(getWebMainFilePath(), 5000);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-18T07:17:47.563

如果您使用的是 6.0+，则不需要编写任何本机代码。只需在 android native dir(android/native/res/drawable) 下放置一个名为“splash.png”的资源并删除默认的。启动应用程序时，Worklight 会自动将该图片显示为启动屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T14:48:46.887

我不知道它是否会有所帮助，但我这样做了我的启动画面。也许你应该试试这个：

```
 setContentView(R.layout.splash_screen);

    Handler handler = new Handler();

    // 3 seconds later splashscreen will open
    handler.postDelayed(new Runnable() {

        public void run() {

            finish();

            // to pass main screen

            Intent intent = new Intent(SplashScreen.this, AnaMenuActivity.class);
            SplashScreen.this.startActivity(intent);

        }

    }, 3000); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-25T12:07:20.607

您还可以编写自己的 JavaScript 闪屏。它们不如原生闪屏好，但在我看来值得一提。他们也可以在 x 平台上工作。这是一个道场示例。

1.  在您的 HTML 中创建 DIV：

    ```
    <div id="splash"></div> 
    ```

2.  为 DIV 元素创建 Styleclass：

    ```
    #splash {
        width:100%;   height:100%;    margin:0;   padding:0;
        background-color: red !important;
        position:absolute;
        z-index:999;
    } 
    ```

3.  在 dojo.ready 事件之后隐藏 DIV：

    ```
    function dojoInit() {
        require([ "dojo", ...modules... ], function(dojo) {
            dojo.ready(function() {
                hideSplash();
            });
        });
    }

    function hideSplash(){
        // Dojo Fade Animation
        dojo.fadeOut({
            node:"splash",
            onEnd: function(){
                dojo.style("splash", "display", "none");
            }
        }).play(); 
    } 
    ```

# html - 使用 display: table 时 colspan 的类比是什么？在 CSS 中？

> ID：15496708
> 
> 赞同：7
> 
> 时间：2013-03-19T10:17:24.490
> 
> 标签：html, css, css-tables

这个任务很奇怪。我必须创建 html 表，**但**我不允许使用传统`<table>`标签。我的表应该是这样的：![在此处输入图像描述](../Images/000c02a5a0dc1ff9404b9ca64d2de335.png)

这样做很容易，如下所示：

```
<table>
     <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
     </tr>
     <tr>
         <td colspan="5"></td>
     </tr>
     ... 
```

但是，正如我所说，我不允许使用传统的表格标签（`table`, `tr`, `td`, `th`）。这是我目前拥有的[JSFIddle 。](http://jsfiddle.net/L7Fp9/)我怎样才能得到与 with 相同的结果，`<td colspan="5"></td>` **但**只使用 div 和 CSS。

**编辑：**
* 表格单元格在一行中的宽度不能固定，它应该是动态的，并且应该可以使它们（单元格）具有不同的宽度（在一行中）。***同一列****不同行**的
表格单元格宽度必须**相等**。就像在传统餐桌上一样。只有“colspanned”单元格的宽度必须不同。

 ******* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T11:04:56.210

如*CSS 2.1*规范[“17.5 表格内容的视觉布局”部分所述](http://www.w3.org/TR/CSS21/tables.html#table-layout)

> 单元格可能跨越多行或多列。（虽然 CSS 2.1 没有定义如何确定跨行或跨列的数量......

所以答案很简单！不要认为 CSS*表格与 HTML**表格*完全相同。由于存在一些差异，例如[“17.2.1 匿名表对象”](http://www.w3.org/TR/CSS21/tables.html#anonymous-boxes)中提到的内容：

> ...必须假设“缺失”元素才能使表格模型正常工作。任何表格元素都会在其自身周围自动生成必要的匿名表格对象，由至少三个嵌套对象组成，分别对应一个 'table'/'inline-table' 元素、一个 'table-row' 元素和一个 'table-cell' 元素. ...

所以你可以这样做（每行作为一个表并删除表行以避免不必要的 div 块），直到他们指定一种定义跨行或列数的方法：

**CSS**

```
.row {
    display: table;
    width: 100%;
}
.cell {
    display: table-cell;
    width: 16.67%;
}
.wideCell {
    display: table-cell;
} 
```

**HTML**

```
<div class="row">
    <div class="cell">One</div>
    <div class="cell">Two</div>
    <div class="cell">Three</div>
    <div class="cell">Four</div>
    <div class="cell">Five</div>
    <div class="wideCell">Six</div>
</div>
<div>One Two Three Four Five Six</div>
<div class="row">
    <div class="cell">One</div>
    <div class="cell">Two</div>
    <div class="cell">Three</div>
    <div class="cell">Four</div>
    <div class="cell">Five</div>
    <div class="wideCell">Six</div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:20:18.127

**编辑**

CSS

```
.table{
        width: 100%;
    }
    .table .row{
        width: 100%;
        height: 25px;
        margin: 0px;
        padding: 0px;
    }
    .table .row .cell{
        width: 150px;
        float: left;
        border: solid 1px #CCC;
        height: 25px;
    }
    .table .clear_float{
        clear: both;
    }
    .table .row .cell.rowspan{
        width: 759px;
        border: solid 1px #CCC;
    } 
```

html

```
<div class="table">
    <div class="row">
        <div class="cell">One</div>
        <div class="cell">Two</div>
        <div class="cell">Three</div>
        <div class="cell">Four</div>
        <div class="cell">Five</div>
    </div>
    <div class="clear_float" />
    <div class="row">
        <div class="cell rowspan">
            One Two Three Four Five
        </div>
    </div>
    <div class="clear_float" />
    <div class="row">
        <div class="cell">One</div>
        <div class="cell">Two</div>
        <div class="cell">Three</div>
        <div class="cell">Four</div>
        <div class="cell">Five</div>
    </div>
    <div class="clear_float" />
    <div class="row">
        <div class="cell rowspan">
            One Two Three Four Five
        </div>
    </div>
    <div class="clear_float" />
    <div class="row">
        <div class="cell">One</div>
        <div class="cell">Two</div>
        <div class="cell">Three</div>
        <div class="cell">Four</div>
        <div class="cell">Five</div>
    </div>
    <div class="clear_float" />
    <div class="row">
        <div class="cell rowspan">
            One Two Three Four Five
        </div>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:24:37.080

您需要使用 CSS[`float`](http://www.w3schools.com/css/css_float.asp)并[`width`](http://www.w3schools.com/cssref/pr_dim_width.asp)获得您正在寻找的类似表格的效果。我基本上在做的是我将 5`divs`全部放置一个固定宽度和类名，并将它们浮动到左边。`wideCell`它们具有相同的特性[`width`](http://www.w3schools.com/cssref/pr_dim_width.asp)，`.wrapper`只是将它们放在一个很好的块中。

**HTML**

```
<div class="wrapper">
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="cell"></div>
    <div class="wideCell"></div>
</div> 
```

**CSS**

```
.wrapper {
    width:510px;
}
.cell {
    width:100px;
    height:50px;
    background-color:#ff0000;
    float:left;
    border:1px #000 solid;
}
.wideCell {
    width:508px;
    height:50px;
    background-color:#ff0000;
    float:left;
    border:1px #000 solid;
} 
```

[**演示**](http://jsfiddle.net/L7Fp9/3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-02T14:24:21.140

我搜索了很多，在 display:table CSS 中没有像 colspan 这样的东西。你可以试试这个：[CSS display:table](http://jsfiddle.net/kedar2a/JCJzt/2/)

```
 <div style="display:table;">
     <div style="display:table-row;">
         <span style="display:table-cell;">Name</span>
         <span style="display:table-cell;"><input type="text"/></span>
     </div>
     <div style="display:table-row;">
         <span style="display:table-cell;">E-Mail</span>
         <span style="display:table-cell;"><input type="text"/></span>
     </div>
     <div style="display:table-row;">
         <span style="display:table-cell;">Password</span>
         <span style="display:table-cell;"><input type="text"/></span>
     </div>
 </div>

 <div style="display:table;">
     <div style="display:table-row; " >
         <span style="display:table-cell;">
             <button>Send Message</button>
         </span>
     </div>                            
  </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-13T23:54:22.207

您可以这样做（其中 data-x 具有适当的 display:xxxx 集）：

```
<!-- TH -->
<div data-tr>
    <div data-th style="width:25%">TH</div>
    <div data-th style="width:50%">

         <div data-table style="width:100%">
             <div data-tr>
                 <div data-th style="width:25%">TH</div>
                 <div data-th style="width:25%">TH</div>
                 <div data-th style="width:25%">TH</div>
                 <div data-th style="width:25%">TH</div>
             </div>
         </div>

    </div>
    <div data-th style="width:25%">TH</div>
</div>

<!-- TD -->
<div data-tr>
    <div data-td style="width:25%">TD</div>
    <div data-th style="width:50%">

         <div data-table style="width:100%">
             <div data-tr>
                 <div data-td style="width:25%">TD</div>
                 <div data-td style="width:25%">TD</div>
                 <div data-td style="width:25%">TD</div>
                 <div data-td style="width:25%">TD</div>
             </div>
             <div data-tr>
                 ...
             </div>
         </div>

    </div>
    <div data-td style="width:25%">TD</div>
</div> 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-03T20:01:47.773

检查这个小提琴我希望这足以满足你需要的 [html 表格](http://jsfiddle.net/xVTkP/)

**CSS**

```
div.table {border: 1px solid black; display: table; }
div.tr {border: 1px solid black; display: table-row; }
div.td {border: 1px solid black; display: table-cell; } 
```

**html**

```
<div class="table">
<div class="tr">
<div class="td">Row 1, Cell 1</div>
<div class="td">Row 1, Cell 2</div>
<div class="td">Row 1, Cell 3</div>
</div>
<div class="tr">
<div class="td">Row 2, Cell 1</div>
<div class="td">Row 2, Cell 2</div>
<div class="td">Row 2, Cell 3</div>
</div> 
```******

# iphone - 如何为 Titanium Appcelerator 创建存根？

> ID：15496709
> 
> 赞同：0
> 
> 时间：2013-03-19T10:17:32.090
> 
> 标签：iphone, ios, titanium

如何在 Titanium 中为 Web 服务的客户端存根生成 WSDL。

我使用为 Objective-C 语言创建存根的 WSDL2Obj 工具为 Objective-C 生成。

Titanium 是否有任何客户端存​​根生成器？还是我需要对 Web 服务调用进行硬编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:06:58.707

我在 Titanium 上做了很多工作，但我**从未听说过 Titanium 的客户端存根生成器**。

由于 Titanium 是“高级”JavaScript，您可以尝试创建一个简单的 JavaScript 存根并修改请求调用。但这可能是一些工作，因为 JavaScript`XMLHttpRequest`和 Titaniums 的结构`Ti.Network.HTTPClient`在创建（构造函数）上确实不同。其他方法（onload、onerror、...）类似但也不相等。

在我们制作的所有应用程序中，尽管我们有自己的 REST 客户端存根生成器，但我们对 Web 服务进行了修复实现。但这不适用于 JavaScript。

# vb.net - VSTO for Outlook 2010 什么都不返回而不是联系？

> ID：15496711
> 
> 赞同：0
> 
> 时间：2013-03-19T10:17:38.600
> 
> 标签：vb.net, vsto, outlook-2010

我正在尝试在 Outlook 2010 联系人视图上创建一个右键菜单，该菜单返回联系人的所有电话号码

我已经输入了以下 XML：

```
<contextMenu idMso="ContextMenuContactItem">
  <button id="MyContextMenuContactItem"
      imageMso="AutoDial"
      label="Click to dial"
      onAction="OnMyButtonClick"/>
</contextMenu> 
```

当我右键单击时，这会正确显示联系人列表上的右键单击项目。到目前为止，我已将以下代码添加到 onAction：

```
Public Sub OnMyButtonClick(ByVal control As Office.IRibbonControl)
    Dim card As Office.IMsoContactCard = TryCast(control.Context, Office.IMsoContactCard)
    If card Is Nothing Then
        MsgBox("Nothing")
    Else
        MsgBox("We have a card")
    End If
End Sub 
```

问题就在这里——我总是一无所获。例如，理想情况下，我需要获得“商务电话”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:06:10.220

下面是一些 C# 代码，用于访问您在联系人文件夹中选择的 ContactItem 对象。我知道你的是 VB，但由于它们都可以访问相同的对象模型，所以应该只是改变语法的问题。

```
public void OnMyButtonClick(Office.IRibbonControl control)
{ 
    if (control.Context is Outlook.Selection)
    {
        Outlook.Selection selected = control.Context as Outlook.Selection;

        var x = selected.GetEnumerator();
        x.MoveNext();
        if (x.Current is Outlook.ContactItem)
        {
            Outlook.ContactItem card = x.Current as Outlook.ContactItem;
            Debug.Print(card.FirstName + "'s phone number: " + card.BusinessTelephoneNumber);
        }
    }
} 
```

# sql - 使用 where 子句连接 SQL 查询

> ID：15496713
> 
> 赞同：3
> 
> 时间：2013-03-19T10:17:41.247
> 
> 标签：sql, join, where

我在 MYSQL 数据库中有 2 个表，如下所示：

克兰特：

```
ID  Naam           Email    Soort  Status
6   test           test     test2   
7   status test    test     test    20
8   soort test     test     test    
9   soort test 2   test2    Museum 
```

邮件：

```
ID  Content                 Datum       Titel 
1   (lots of encoded HTML)  18-03-13    test
2   (lots of encoded HTML)  18-03-13    test2
4   (lots of encoded HTML)  18-03-13    alles weer testen 
```

（是的，我还在测试很多^^）

现在我有一个 SQL 查询，它使用 where 子句从“Klant”中选择所有内容，该子句从前一页获取 ID：

```
$strSQL = "SELECT * FROM Klant WHERE ID =  '".$_GET["ID"]."' "; 
```

我想要的是用以下查询加入这个查询：

```
SELECT ID, Titel FROM Mail; 
```

**编辑：**

从您的所有回答和评论中，我想我开始认为我的问题可能是完全错误的。我会解释我需要它的地方，我什至可能不需要加入？我目前有一个表，其中包含来自“Klant”的数据，如下所示：

![在此处输入图像描述](../Images/3474e069c3d99c98c3ea414270313b3c.png)

意思是我添加了另一个表，其中包括来自“邮件”的所有 ID 和标题。很抱歉我可能给你造成的困惑，因为我对我的问题不是很清楚。我希望这可以清除我想要的东西，你们可以告诉我是否需要加入这个或者我可以做其他事情吗？

我仍然是一名学生，这是我第一次不得不使用 JOIN，但我无法弄清楚这一点。如果有人能告诉我如何做到这一点或将我推向正确的方向，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:21:29.943

```
SELECT * FROM Klant t1
JOIN
SELECT ID, Titel FROM Mail t2
ON t1.ID = t2.ID
WHERE t1.Name  = 'test' 
```

要获得所需的结果，请执行以下操作：

```
SELECT * FROM Klant t1
JOIN
SELECT ID, Titel FROM Mail t2
ON t1.ID = t2.ID 
```

如果你想有一个特定的行，而不仅仅是添加 where 子句：

```
WHERE t1.ID = 6 
```

或者

```
WHERE t1.Naam = 'test' 
```

等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:22:51.167

我猜你想加入表之间常见的 ID 字段。

```
select * from Klant, Mail where Klant.ID = '".$_GET["ID"]."' and Klant.ID = Mail.ID 
```

你也可以做

```
select * from Klant
  join Mail on  Mail.ID = Klant.ID
  where Klant.ID = '".$_GET["ID"]."' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:25:20.317

您可以使用以下查询直接执行此操作：

```
select k.ID,k.Naam, k.Email,k.Soort,k.Status, m.ID,m.Titel from Klant k, Mail m where k.ID = m.ID and k.ID = '".$_GET["ID"]."' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:26:33.030

很难看出 JOIN 在您的问题示例中如何适用。

JOIN 让您可以根据关系从多个表中提取信息。据我所见，除非 SteveP 是正确的并且您的 id 提供了这种关系，否则您的表格没有任何方法可以将一行中的一行与另一行中的一行联系起来。

例如，如果您的 klant 表有一个 mail_id 列，那么您可以这样做

```
SELECT *
FROM klant
JOIN mail ON klant.mail_id = mail.id 
```

这将为两个表中的每对匹配的行返回一行。或者，您可以使用 LEFT OUTER JOIN 从 JOIN 左侧的表中拉回所有行，并可选择从右侧匹配行中拉回数据。

如果没有任何东西加入表，您可以使用 CROSS JOIN 它将返回 table1 中每一行与 table2 中每一行的完整笛卡尔。

人们经常与 JOIN 混淆的东西是 UNION，它允许您编写 2 个 SELECT 语句并返回两个组合/连接在一起的结果集，但这些应该在每个查询中返回相同的列（例如，选择 NULL 代替如果查询没有为该列提取数据，则为查询）

# windows-phone-8 - 在 Application.Resources 中动态添加 Applicationbar

> ID：15496716
> 
> 赞同：0
> 
> 时间：2013-03-19T10:17:50.097
> 
> 标签：windows-phone-8, application-bar, application-resource

谁能告诉我如何动态地执行以下操作。我参考了很多网站。但没有任何帮助。

```
<phone:PhoneApplicationPage.Resources>
    <shell:ApplicationBar x:Key="DefaultAppBar" IsVisible="True">
        <shell:ApplicationBarIconButton x:Name="mnuAdd" IconUri="/icons/appbar.add.rest.png" IsEnabled="True" Text="Add" Click="mnuAdd_Click"/>
    </shell:ApplicationBar>
    <shell:ApplicationBar x:Key="SingleSelectionAppBar" IsVisible="True">
        <shell:ApplicationBarIconButton x:Name="mnuPin" IconUri="/icons/appbar.pushpin.png" IsEnabled="True" Text="Pin" Click="mnuPin_Click" />
        <shell:ApplicationBarIconButton x:Name="mnuDelete" IconUri="/icons/appbar.delete.rest.png" IsEnabled="True" Text="Delete" Click="mnuDelete_Click"/>
        <shell:ApplicationBarIconButton x:Name="mnuEdit" IconUri="/icons/appbar.edit.rest.png" IsEnabled="True" Text="Edit" Click="mnuEdit_Click"/>
    </shell:ApplicationBar>
    <shell:ApplicationBar x:Key="MultiSelectionAppBar" IsVisible="True">
        <shell:ApplicationBarIconButton x:Name="mnuDeleteMulti" IconUri="/icons/appbar.delete.rest.png" IsEnabled="True" Text="Delete" Click="mnuDelete_Click"/>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.Resources> 
```

我们可以`get the resource dynamically`如下。但是**如何在运行时添加**

```
ApplicationBar = (Microsoft.Phone.Shell.ApplicationBar)Resources["SingleSelectionAppBar"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:59:08.077

简单的解决方案，但我没有很好地搜索。无论如何在这里添加解决方案

**句法：**

```
Application.Current.Resources.Add (name, value) 
```

**样本**

```
Application.Current.Resources.Add("DefaultAppBar", AppBar1);

Application.Current.Resources.Add("SingleSelectionAppBar", AppBar2);

Application.Current.Resources.Add("MultiSelectionAppBar", AppBar3); 
```

# php - PHP - 特殊字符（欧元符号）未正确显示（RSS 提要/SimplePie）

> ID：15496719
> 
> 赞同：2
> 
> 时间：2013-03-19T10:17:55.120
> 
> 标签：php, character-encoding, rss, simplepie

我正在使用 SimplePie (v1.3.1) 在网页上显示 RSS 提要。其中一个标题包含一个欧元 (€) 符号，并在页面上显示为 â‚¬。*当我在他们的网站上使用 SimplePie 的演示时，**它显示正确**，所以应该没问题。*但是我无法让它工作。

我已经做了什么：

*   在 SimplePie 的网站和文档上搜索
*   在stackoverflow的网站上搜索
*   在谷歌上搜索
*   在没有任何运气的情况下尝试了数十种给定的“解决方案”

我能找到的是，这可能是一个字符编码问题，据我所知，这应该设置为 UTF-8。下面是我当前的测试代码，基于 SimplePie 演示。我已经添加了 SimplePie 的常见问题解答中给出的 3 个解决方案（请参阅[我看到奇怪的字符](http://simplepie.org/wiki/faq/i_m_seeing_weird_characters)）。

我究竟做错了什么？

```
<?php
header('Content-type:text/html; charset=utf-8');
// Make sure SimplePie is included. You may need to change this to match the location of autoloader.php
// For 1.3+:
require_once('./php/autoloader.php');

// We'll process this feed with all of the default options.
$feed = new SimplePie();

// Set the feed to process.
$feed->set_feed_url(***RSS_FEED_URL_HERE***);

// Run SimplePie.
$feed->init();

// This makes sure that the content is sent to the browser as text/html and the UTF-8 character set (since we didn't change it).
$feed->handle_content_type();

// Let's begin our XHTML webpage code.  The DOCTYPE is supposed to be the very first thing, so we'll keep it on the same line as the closing-PHP tag.
?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head>
    <title>Sample SimplePie Page</title>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
    <style type="text/css">
    /*some css*/
    </style>
</head>
<body>
    <div class="header">
        <h1><a href="<?php echo $feed->get_permalink(); ?>"><?php echo $feed->get_title(); ?></a></h1>
        <p><?php echo $feed->get_description(); ?></p>
    </div>
    <?php
    foreach ($feed->get_items() as $item):
    ?>
        <div class="item">
            <h2><a href="<?php echo $item->get_permalink(); ?>"><?php echo $item->get_title(); ?></a></h2>
            <p><?php echo $item->get_description(); ?></p>
            <p><small>Posted on <?php echo $item->get_date('j F Y | g:i a'); ?></small></p>
        </div>
    <?php endforeach; ?>
</body>
</html> 
```

[编辑] 更多信息：

*   来自 RSS 的 XML 具有 UTF-8 编码 ( `<?xml version="1.0" encoding="UTF-8"?>`)
*   使用`echo str_replace("â‚¬", "&euro;", $item->get_title());`有效，但不是很好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-10T10:10:25.477

我也遇到了欧元符号显示为“â,¬”的问题在摆弄了一段时间没有成功的编码之后，我只是进行了以下字符串替换：

```
str_replace(chr(0xE2).chr(0x82).chr(0xAC), '&euro;', $mystring) 
```

如[http://www.mauserrifle.nl/php/php-and-replacing-euro-signs/](http://www.mauserrifle.nl/php/php-and-replacing-euro-signs/)所示。由于这是一项后端工作，因此我对性能损失没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:45:48.683

据我所知，您的问题是提要发布的内容不是 UTF-8 格式，即使您的页面是 UTF-8 格式。

你所要做的就是使用这个

```
<?php
utf8_encode ($feed )// the rss feed from another page
?> 
```

希望能解决你的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:21:27.380

用特殊字符实体替换符号。

```
&euro; 
```

如果使：€

[http://www.utexas.edu/learn/html/spchar.html](http://www.utexas.edu/learn/html/spchar.html)

# c++ - hash_map<向量 , int> 使用 find 函数时出错

> ID：15496721
> 
> 赞同：0
> 
> 时间：2013-03-19T10:17:58.300
> 
> 标签：c++, vector, find, hashmap

```
struct HASH_CMP {
    bool operator()(vector<int> V, vector<int> W) const {
        for(int i = 0; i < 10; i++)
            if(V[i] != W[i]) return false;
        return true;
    }
};
hash_map< std::vector<int>, int, HASH_CMP > H;

long long inHash(const vector<int> &V) {
    if(H.find(V) == H.end()) return -1; //this line
    return H[V];
} 
```

鉴于上面的比较类，我已经声明了以下哈希，并且在提到的行中收到错误消息：

> 呼叫不匹配 '`(const HASH_CMP) (const std::vector<int, std::allocator<int> >&)`

我需要一些帮助来修复此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:22:45.913

第三个模板参数是散列函子。比较函子是*第四个*模板参数。因此你需要：

```
hash_map<std::vector<int>, int, HASH_HASH, HASH_CMP> 
```

而且您仍然需要编写`HASH_HASH`.

（我建议您查看 Boost 的[`hash_range`](http://www.boost.org/doc/libs/1_53_0/doc/html/hash/reference.html)实现以获得灵感。）还要注意向量的相等性已经定义（并且比您的版本更有效）并且不需要自己编写代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:22:01.277

正如错误告诉您的那样，您需要一个接受 a`const std::vector<int>&`并返回 a的散列函数`size_t`。要将某些内容放入哈希映射中，必须有某种方法对其进行哈希处理。

这将起作用：

```
size_t operator()(const vector<int>& vec)
{
    size_t v = 0;
    for (vector<int>::const_iterator it = vec.begin(); it != vec.end(); ++it)
        v = (v ^ *it) * 0x9e3779b9;
    return v;
} 
```

# android - 将 addTextChangedListtener 用于编辑框时出现强制关闭错误

> ID：15496729
> 
> 赞同：0
> 
> 时间：2013-03-19T10:18:29.403
> 
> 标签：android, validation, android-edittext

我想验证“ `username`”和“ `password`”字段的编辑文本。我不希望用户将用户名和密码留为空白。我在这个站点中发现使用`TextWatcher`n 添加`addTextChangedListener`我们可以处理这个..但是**出现强制关闭错误**..我对android很陌生，这是我的第一个应用程序。请告诉我哪里出错了。我有以下代码：

```
public class MainActivity extends Activity implements android.text.TextWatcher {

 public String userString;
 public EditText edt_Username;
 public EditText edt_pwd;
 @Override
 protected void onCreate(Bundle savedInstanceState)
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // for validating username textbox

          edt_Username=(EditText) findViewById(R.id.username);
    edt_Username.addTextChangedListener(this);

    //for validating pwd textbox
     edt_pwd=(EditText) findViewById(R.id.pwd);
    edt_pwd.addTextChangedListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}   
public void login(View view)
{

            Intent intent=new Intent(this,Leave_form.class);
            setContentView(R.layout.activity_leave_form);
            startActivity(intent);

}

@Override
public void afterTextChanged(Editable s) 
{
    // TODO Auto-generated method stub

    if( edt_Username.getText().toString().equals(null)||edt_pwd.getText().toString().equals(null))
    {
    Toast.makeText(MainActivity.this, "All Fields Required.", 
             Toast.LENGTH_SHORT).show();
    }

} 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:21:44.463

您需要检查文本是否为空：

```
public void afterTextChanged(Editable s) 
{

   if( edt_Username.getText() == null || edt_Username.getText().toString().equals("") || edt_pwd.getText() == null || edt_pwd.getText().toString().equals(""))
   {
       Toast.makeText(MainActivity.this, "All Fields Required.", 
         Toast.LENGTH_SHORT).show();
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:21:55.020

```
Intent intent=new Intent(this,Leave_form.class); 
setContentView(R.layout.activity_leave_form);
startActivity(intent); 
```

您正在调用只能调用一次的 login() 方法 setContentView()！在**onCreate()**方法中。

解决方案是删除此行并开始新`Activity`的

```
Intent intent = new Intent(this, Leave_form.class); 
startActivity(intent); 
```

然后打电话

```
setContentView(R.layout.activity_leave_form); 
```

在onCreate() 方法中的**Leave_form 类中。**

## 更新：

在你的代码中还有更多的东西被破坏了：

```
edt_Username.getText().toString().equals(null) 
```

如果要确定文本框是否为空，只需使用：

```
if (TextUtils.isEmpty(edt_User.getText().toString()) && ...) {
   Toast.makeText(context, "Fields are required!", Toast.LENGTH_SHORT).show();
} 
```

**注意：** `edt_Username.getText()`将始终不为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:26:21.290

首先允许用户输入他们的姓名和密码，并在点击按钮时输入一个登录按钮验证用户名和密码。

# reporting - 从 Excel 文件生成 .rdl 文件

> ID：15496732
> 
> 赞同：2
> 
> 时间：2013-03-19T10:18:32.383
> 
> 标签：reporting, reporting-services, rdl

在当前项目中，我必须生成 Excel 报告。我确实将 Excel 文件作为模板，其中包含一些静态数据以及一些包含参数值的字段。

在 Excel 文件的底部应该有一个表格，其中包含来自 Dataset 的数据。

现在我想知道是否有一种方法/工具可以从 Excel 文件生成 rdl 文件，而不是自己创建它（这将非常麻烦......）

另一方面，有没有办法将静态 Excel 内容链接到 .rdl 文件中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T02:54:44.890

您可以使用 Excel 电子表格作为报表的数据源来提取信息。但是，如果您计划部署报表，则需要从报表管理器服务器访问它。因此，除非电子表格中的信息发生变化，否则我认为这可能会带来更多麻烦而不是值得。

如果没有必要将其部署到报表管理器，那么您也可以尝试将报表嵌入到 excel 文件本身中并使用 SSRS 更新动态内容，您可以将静态内容保留在那里。（当然，根据您正在做的事情的复杂性，您也可以自动化 Excel VBA 代码中的所有动态内容。）我个人从未这样做过，但我发现了一些博客文章详细说明它怎么可能被拉下来。我认为这已经足够漂亮了，如果我有机会的话，我可能不得不尝试一下。您甚至可以使用电子表格中的单元格值并将它们作为参数值传递给报告。

我发现[了一篇关于将报表数据嵌入为](http://blogs.msdn.com/b/robertbruckner/archive/2010/03/20/refreshable-reports-in-word-powerpoint-excel.aspx)从报表服务器刷新的图像的帖子。从好的方面来看，它似乎很容易实现，但缺点是它是一个图像，并且数字不能单独选择，只能查看。所以它最适合图表，但不是您的数据表。

然后是这篇文章，它展示了如何通过以 CSV 格式从 SSRS 中提取值并使用一些 VBA 代码将其放入 excel 文件中，从而[将值实际导入到电子表格中。](http://beyondrelational.com/modules/2/blogs/115/posts/11164/refreshable-ssrs-reports-in-excel.aspx)这是一个更复杂的解决方案，但我认为这是一个非常酷的想法，尽管我不知道它在实践中的效果如何。

否则，我认为您无法从报告中的 excel 文件重新创建静态信息和格式。

# php - 如何知道提交表单中输入标签的数量？

> ID：15496733
> 
> 赞同：1
> 
> 时间：2013-03-19T10:18:36.150
> 
> 标签：php, html

当单击表单外的按钮时，我已经编写了在表单中添加输入元素的代码。

```
<?php
$i=0;
$maxid = isset($_POST['max_id'])?$_POST['max_id']+1:0;
print '<form action="search.php" method="post" ><input type="hidden" name="max_id" value="' . $maxid . '" /><input name="ad_field_button" type="submit" value="Add Field" /></form>';
print '<form action="results1.php" method="post" >';
print '<table border="0">';
for($i=0;$i<=$maxid;$i++)
   {
       // code for adding input elements;
   }
print '</table>';
print '<input name="ad_s_button" type="submit" value="Search" />';
print '</form></p>';
?> 
```

我想知道单击按钮 ad_s_button 时提交的表单中输入元素的数量。或者，当单击 ad_s_button 时，如何将“max_id”值传递到下一页。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:21:26.367

怎么样：

```
print '<input type="hidden" name="Inputelements" value="'.$maxid.'">'; 
```

所以你有一个隐藏的字段，里面有你想要的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:22:18.073

> 或者，当单击 ad_s_button 时，如何将“max_id”值传递到下一页。

您可以在表单中使用隐藏字段并将 max_id 存储在那里。

```
<input type="hidden" name="max_id" value="<?php echo $maxid; ?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:21:39.540

`$_POST`包含所有提交的元素。

在您的情况下， count($_POST)-1 将为您提供输入元素的计数。-1 因为在 $_POST 中也会有一个按钮（提交按钮）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:29:20.540

您也可以发布数组。例如：

```
<input type='text' name='request[name]' />
<input type='text' name='request[surname]' />
<input type='text' name='request[city]' /> 
```

和 php 部分：

```
$request = $_POST['request'];
echo '<pre>'
echo var_dump($request);
echo '</pre>' 
```

会产生

```
array(3){
  'name' => 'abc',
  'surname' => 'bcd',
  'city' => 'Somewhere'
} 
```

然后，您可以轻松地处理表单数据，还可以轻松地计算输入字段，使用`count($request);`

# ruby-on-rails-3 - Rails 休息服务 GET

> ID：15496736
> 
> 赞同：2
> 
> 时间：2013-03-19T10:18:47.413
> 
> 标签：ruby-on-rails-3, rest, activerecord

我已经设置了 Rails REST 服务，但在显示单个记录时遇到问题。这是我要访问的 URL：

```
http://website:3000/users/2/timesheets/21 
```

控制器代码：

```
 def show
    puts "SHOW"
    puts params.inspect
    @timesheets = User.find(params[:user_id]).timesheets(params[:id])

    respond_to do |format|
      format.json { render json: @timesheets }
    end
  end 
```

我知道参数正在到达控制器，但它没有使用`:timesheet_id`. 这是控制台输出以显示我的意思：

```
Started GET "/users/2/timesheets/21" for **.**.***.** at 2013-03-19 06:12:11 -0400
Processing by TimesheetsController#show as */*
  Parameters: {"user_id"=>"2", "id"=>"21"}
  User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "2"]]
  Timesheet Load (0.5ms)  SELECT "timesheets".* FROM "timesheets" WHERE "timesheets"."user_id" = 2
Completed 200 OK in 120ms (Views: 36.5ms | ActiveRecord: 2.9ms) 
```

我在参数哈希中看到了 21 的时间表 ID。然后进行查询以获取用户，但随后会获取该用户的所有时间表。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T14:04:39.507

Prakash 的建议可行，但会执行两个查询：一个是获取用户，另一个是获取时间表。似乎没有任何理由先做`User.find(...)`。不妨只查询 timesheets 表，它只会执行一个查询，因此速度更快：

```
@timesheet = Timesheet.where('user_id = ? and id = ?', params[:user_id], params[:id]).first 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:52:16.693

试试这个：

```
@user = User.find(params[:user_id])
@timesheet = @user.timesheets.find(params[:id]) 
```

这应该运行如下查询：

```
SELECT "timesheets".* FROM "timesheets" WHERE "timesheets"."id" = 21 AND ("timesheets"."user_id" = 2) LIMIT 1 
```

相应的视图应该是指`@timesheet`变量而不是`@timesheets`。

# extjs - 类型错误：b 为空 extjs4

> ID：15496741
> 
> 赞同：0
> 
> 时间：2013-03-19T10:18:58.183
> 
> 标签：extjs, null, grid, store

我的应用程序有一个网格，双击记录会出现一个窗口。在这个窗口中有两个选项卡，在第一个选项卡中，我打印一个包含所选行的所有信息的表格，在第二个选项卡中，我有另一个与另一个商店链接的网格，显示一种“记录器”来查看活动选定的行。我的问题是，当我双击一行时，会出现窗口并且活动商店已完美加载。但是，如果我关闭窗口然后双击另一行，则“活动”选项卡为空并且错误为`TypeError: b is null`.

编辑：已解决，我只创建了一次网格，每次创建窗口时都必须创建网格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T08:55:44.440

这是我的解决方案：

定义活动网格

```
Ext.define('Beautyeco.actGrid', {
                extend: 'Ext.grid.Panel',

                title: '',
                minHeight: 200,
                maxHeight: 300,
                store: actStore,
                id: 'actGrid',

                initComponent: function() {
                    this.columns = [ //columns ]
                    this.callParent(arguments);
                }
            }); 
```

双击监听器

```
itemdblclick: function(tablepanel, record, item, index, e, options){
                        // create here the grid
                        var activitiesGrid = Ext.create('Beautyeco.actGrid');

                        var editWindow = new Ext.Window({
                            title: 'Modifica informazioni',
                            width: 600,
                            minHeight: 400,
                            items: [
                                {
                                    xtype: 'tabpanel',
                                    activeTab: 0,
                                    items: [
                                        {
                                            title: 'Info generali',
                                            id: 'infoTab',
                                            width: 600,
                                            tpl: [ //tpl ]
                                        },
                                        {
                                            title: 'Attivit&agrave;',
                                            width: 600,
                                            id: 'actTab',
                                            items: [activitiesGrid] // add the grid
                                         }
                                      ]
                                  }
                              ]
                          });
} 
```

# c# - asp.net 按钮需要被触发两次

> ID：15496748
> 
> 赞同：0
> 
> 时间：2013-03-19T10:19:23.697
> 
> 标签：c#, asp.net, init

我正在生成动态 html 控件。在用户通过按下按钮导致回发之后，控件正在 Init 上生成。但是，他需要按两次才能生成控件。我怎样才能解决这个问题？代码：

```
 protected override void OnInit(EventArgs e)
    {
        if (Page.IsPostBack)
        {
            if (Session["id"] != null)
            {
                string id= Session["id"].ToString();
                GenerateDynamicControls(id);

            }
        }
    }

 protected void Page_Load(object sender, EventArgs e)
    {
        Session["id"] = null;
    }

protected void Button1_Click(object sender, EventArgs e)
    {
        string id = TextBox1.Text;
        Session["id"] = id;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:27:15.477

`Session["id"]`在页面加载时设置为 null。单击按钮后返回页面时，`OnInit`首先调用该方法并获取`Session["id"]`as的值`null`。之后执行并`Session["id"]`设置按钮单击事件。因此，当您第二次单击该按钮时，该按钮具有除 for`OnInit`以外的值，并且您的代码将在第二次单击时执行。`null``Session["id"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:29:37.113

调用 GenerateDynamicControls(id); 单击按钮时。这样，您将在第一次单击时进行控制。当页面重新加载时，它们将在 OnInit 中重新创建。

```
protected void Button1_Click(object sender, EventArgs e)
{
    string id = TextBox1.Text;
    Session["id"] = id;
    GenerateDynamicControls(id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:32:48.607

不需要为这些目的使用会话。另外，您的代码在后续回发后可能会失败。

```
protected override void LoadViewState(object state)
{
    base.LoadViewState(state);
    var id = this.ViewState["DynamicControlGeneration"] as string;
    if (id != null)
        GenerateDynamicControls(id);
}

protected void Button1_Click(object sender, EventArgs e)
{
    string id = TextBox1.Text;
    this.ViewState["DynamicControlGeneration"] = id;
    GenerateDynamicControls(id);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-19T10:47:57.320

试试这个，

```
protected override void OnInit(EventArgs e)
{
     if (Page.IsPostBack)
     {
         string id = Request.Form[TextBox1.ClientID].ToString();
         GenerateDynamicControls(id);
     }
} 
```

# android - 以编程方式对齐和可点击的线性布局？

> ID：15496751
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:19:34.363
> 
> 标签：android, alignment, android-linearlayout

目前我的代码显示线性布局 ![在此处输入图像描述](../Images/079e634de88fcbf1e4e2b48e7ceb9f30.png)

但我想这样显示 ![在此处输入图像描述](../Images/9a1945a0f8a5a122bd2f0683323edf11.png)

在这里我附上我的代码请尝试帮助

```
public class MainActivity extends Activity 
{
    LinearLayout MainLinearObj;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        MainLinearObj = (LinearLayout) findViewById(R.id.MainLinear);

        for(int i = 0; i < 3; i++) 
        {
            LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(100,100);
            llp.setMargins(10, 10, 10, 10);
            llp.weight = 1;

            LinearLayout ll = new LinearLayout(MainActivity.this); 
            ll.setBackgroundColor(Color.RED);
            ll.setLayoutParams(new LinearLayout.LayoutParams(100,100));
            ll.setId(i);
            MainLinearObj.addView(ll,llp);
        }
    }
} 
```

user1566160 的编辑代码检查它并查看它的输出，如果我在 edittext 中输入 10，那么我需要总共 10 个正方形，因为每行的输出需要 3 个正方形

```
public class MainActivity extends Activity 
{
    LinearLayout MainLinearObj;
    EditText et;
    Button btn;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        MainLinearObj = (LinearLayout) findViewById(R.id.MainLinear);
        et = (EditText) findViewById(R.id.editText1);
        btn = (Button) findViewById(R.id.button1);

//      String str  = et.getText().toString();
//      int no = Integer.parseInt(str);
        btn.setOnClickListener(new OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {
                String str  = et.getText().toString();
                int no = Integer.parseInt(str);

                // TODO Auto-generated method stub
                for(int j=0;j<no;j++) 
                {
                    LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(100,100);
                    llp.setMargins(10, 10, 10, 10);
                    llp.weight = 1;
                    LinearLayout.LayoutParams llp1 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                    LinearLayout newLinearLayout = new LinearLayout(MainActivity.this);
                    newLinearLayout.setOrientation(LinearLayout.HORIZONTAL);
                    newLinearLayout.setLayoutParams(llp1);
                    for(int i = 0; i < 3; i++) 
                    {

                        LinearLayout ll = new LinearLayout(MainActivity.this); 
                        ll.setOrientation(LinearLayout.VERTICAL);
                        ll.setBackgroundColor(Color.RED);
                        ll.setLayoutParams(new LinearLayout.LayoutParams(100,100));
                        ll.setId(i);
                        newLinearLayout.addView(ll,llp);
                    }
                    MainLinearObj.addView(newLinearLayout);
                }
            }
        });
    }
} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:layout_weight="3" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:text="Selected Table "
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView5"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="4"
                android:text=":-"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/lblChkTabDisSelTable"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:text="Cover Require"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView6"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="4"
                android:text=":-"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/lblChkTabDisReqCover"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3" >

            <TextView
                android:id="@+id/textView4"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:text="Selected Cover"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/textView7"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="4"
                android:text=":-"
                android:textAppearance="?android:attr/textAppearanceMedium" />

            <TextView
                android:id="@+id/lblChkTabDisToCover"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="3"
                android:textAppearance="?android:attr/textAppearanceMedium" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1.5"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <Button
            android:id="@+id/btnChkTabAll"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:text="All" />

        <Button
            android:id="@+id/btnChkTabAC"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:text="A/c" />

        <Button
            android:id="@+id/btnChkTabNAC"
            style="?android:attr/buttonStyleSmall"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="3"
            android:text="Non A/c" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="10dp"
        android:orientation="vertical" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        >

        <TextView
            android:id="@+id/lblChkTabDiaName"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Table Name"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/lblChkTabDiaCover"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Table Cover"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/lblChkTabDiaNote"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Table Note"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/fglblDiaState"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Remark"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:layout_weight="1"
      >

          <ScrollView
              android:id="@+id/scrollView1"
              android:layout_width="match_parent"
              android:layout_height="match_parent"
              android:layout_weight="1" >

        <LinearLayout
            android:id="@+id/llChkTabDisp"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"
            android:background="#CCCCCC"
            android:orientation="vertical" >

        </LinearLayout>
    </ScrollView>

          <LinearLayout
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="vertical" >

              <LinearLayout
                  android:layout_width="fill_parent"
                  android:layout_height="match_parent"
                  android:layout_weight="4" >

              </LinearLayout>

              <LinearLayout
                  android:layout_width="fill_parent"
                  android:layout_height="match_parent"
                  android:layout_weight="6" >

              </LinearLayout>

              <LinearLayout
                  android:layout_width="fill_parent"
                  android:layout_height="match_parent"
                  android:layout_weight="4" >

                  <Button
                      android:id="@+id/btnChkTabDiaOk"
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:layout_weight="1"
                      android:enabled="false"
                      android:text="Ok" />

                  <Button
                      android:id="@+id/btnChkTabDiaCancel"
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:layout_weight="1"
                      android:text="Cancel" />

              </LinearLayout>

          </LinearLayout>

    </LinearLayout>
</LinearLayout>
</LinearLayout><LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        tools:context=".MainActivity" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="number" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button" />

    </LinearLayout>

    <LinearLayout
        android:id="@+id/MainLinear"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        tools:context=".MainActivity" >
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:42:09.557

您可以尝试以下方法：

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        LinearLayout MainLinearObj = (LinearLayout) findViewById(R.id.abc);

        for(int j=0;j<3;j++) 
        {
            LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(100,100);
            llp.setMargins(10, 10, 10, 10);
            llp.weight = 1;
            LinearLayout.LayoutParams llp1 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            LinearLayout newLinearLayout = new LinearLayout(this);
            newLinearLayout.setOrientation(LinearLayout.VERTICAL);
            newLinearLayout.setLayoutParams(llp1);
            for(int i = 0; i < 3; i++) 
            {

                LinearLayout ll = new LinearLayout(MainActivity.this); 
                ll.setOrientation(LinearLayout.HORIZONTAL);
                ll.setBackgroundColor(Color.RED);
                ll.setLayoutParams(new LinearLayout.LayoutParams(100,100));
                ll.setId(i);
                newLinearLayout.addView(ll,llp);
            }
            MainLinearObj.addView(newLinearLayout);
        }
} 
```

**编辑：**

在 XML 中将 Main Linear Layout 设置为 Vertical 方向，然后使用以下代码：

```
LinearLayout MainLinearObj = (LinearLayout) findViewById(R.id.abc);

    for(int j=0;j<10;j++) 
        {
            LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(100,100);
            llp.setMargins(10, 10, 10, 10);
            llp.weight = 1;
            LinearLayout.LayoutParams llp1 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            LinearLayout newLinearLayout = new LinearLayout(this);
            newLinearLayout.setOrientation(LinearLayout.HORIZONTAL);
            newLinearLayout.setLayoutParams(llp1);
            for(int i = 0; i < 3; i++) 
            {

                LinearLayout ll = new LinearLayout(MainActivity.this); 
                ll.setOrientation(LinearLayout.VERTICAL);
                ll.setBackgroundColor(Color.RED);
                ll.setLayoutParams(new LinearLayout.LayoutParams(100,100));
                ll.setId(i);
                newLinearLayout.addView(ll,llp);
            }
            MainLinearObj.addView(newLinearLayout);
        } 
```

**编辑2**

```
int no = Integer.parseInt(str);;
        int count = 0;
        int myvar = (no/3) +1;
        for(int j=0;j<myvar;j++) 
        {
            LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(100,100);
            llp.setMargins(10, 10, 10, 10);
            llp.weight = 1;
            LinearLayout.LayoutParams llp1 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
            LinearLayout newLinearLayout = new LinearLayout(this);
            newLinearLayout.setOrientation(LinearLayout.HORIZONTAL);
            newLinearLayout.setLayoutParams(llp1);
            for(int i = 0; i < 3; i++) 
            {

                LinearLayout ll = new LinearLayout(MainActivity.this); 
                ll.setOrientation(LinearLayout.VERTICAL);
                ll.setBackgroundColor(Color.RED);
                ll.setLayoutParams(new LinearLayout.LayoutParams(100,100));
                ll.setId(i);
                count++;
                if(count<=no)
                newLinearLayout.addView(ll,llp);

            }
            MainLinearObj.addView(newLinearLayout);
            if(count==no) {
                break;
            }
        } 
```

# iphone - 如何检测 UIImageView 上的触摸并画线？

> ID：15496753
> 
> 赞同：1
> 
> 时间：2013-03-19T10:19:49.000
> 
> 标签：iphone, ios, objective-c, xcode

我创建了一个 ViewController 并在自定义类上选择了 myView。在 myView 中，我工作过，当用户单击并拖动手指时，它会画一条直线，当再次拖动时，前一行消失并创建新的。

我的代码：

```
@implementation GestureView

{
    CGPoint _originOfTouchPoint; // your fist touch detected in touchesBegan: method
    CGPoint _currentFingerPositionPoint; // the position you have dragged your finger to
    CGFloat _strokeWidth; // the width of the line you wish to draw
    id _touchStartedObject; // the object(UIView) that the first touch was detected on
}

// If you use Interface Builder to design your interface, Objects in a nib file are reconstituted and then initialized using
// their initWithCoder: method
- (id)initWithCoder:(NSCoder *)decoder
{
    self = [super initWithCoder:decoder];
    if (self) {
        // Initialization code
        _originOfTouchPoint = CGPointMake( 0.0, 0.0 );
        _currentFingerPositionPoint = CGPointMake( 100.0, 100.0 );
        _strokeWidth = 2.0;
    }
    return self;
}
/*
 // Use initWithFrame if you are not loding the UIView from a nib file
 - (id)initWithFrame:(CGRect)frame
 {
 self = [super initWithFrame:frame];
 if (self) {
 // Initialization code
 _originOfTouchPoint = CGPointMake( 0.0, 0.0 );
 _currentFingerPositionPoint = CGPointMake( 100.0, 100.0 );
 _strokeWidth = 2.0;
 }
 return self;
 }
 */

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    CGContextRef context    = UIGraphicsGetCurrentContext();
    CGContextSetStrokeColorWithColor( context, [UIColor blueColor].CGColor );
    CGContextSetLineWidth( context, _strokeWidth );
    // fisrt point of line
    CGContextMoveToPoint( context, _originOfTouchPoint.x, _originOfTouchPoint.y );
    // last point of line
    CGContextAddLineToPoint( context, _currentFingerPositionPoint.x, _currentFingerPositionPoint.y );
    // draw the line
    CGContextStrokePath( context );
}

#pragma mark touches

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // get starting point and first view touched (if you need to send that view messages)
    _originOfTouchPoint = [[touches anyObject] locationInView:self];
    _touchStartedObject = [[touches anyObject] view];
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGPoint movedToPoint = [[touches anyObject] locationInView:self];
    // if moved to a new point redraw the line
    if ( CGPointEqualToPoint( movedToPoint, _currentFingerPositionPoint ) == NO )
    {
        _currentFingerPositionPoint = movedToPoint;
        // calls drawRect: method to show updated line
        [self setNeedsDisplay];
    }
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    // reset values
    _originOfTouchPoint = CGPointZero;
    _currentFingerPositionPoint = CGPointZero;
    _touchStartedObject = nil;
}

@end 
```

我在 ViewController 上添加了 3 个 imageView，我想在用户单击任何 imageView 时检测触摸，然后当他拖动手指时，该线开始从该 imageView 绘制。我可以在屏幕上的任何地方画线，但我想限制只在单击 imageView 并在另一个 imageView 上结束时画线

![在此处输入图像描述](../Images/ea9a92f96c71bb170f93844118612118.png)

![在此处输入图像描述](../Images/a962b8139b2620e0593465768d0f169c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:32:51.103

您可以启用触摸，`-[UIView setUserInteractionEnabled:]`默认情况下它是 NO on`UIImageView`

关于绘图...来自文档：

> UIImageView 类经过优化，可以将其图像绘制到显示器上。UIImageView 不会调用 drawRect: 一个子类。如果您的子类需要自定义绘图代码，建议您使用 UIView 作为基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:54:05.950

试试这个：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    //To get tag of touch view
    int viewTag=[touch view].tag;

    if ([[touch view] isKindOfClass:[UIImageView class]])
    {
      //Write your code...
    }
} 
```

并像这样设置您的所有触摸图像 UserInteractionEnabled：

```
[imageName setUserInteractionEnabled:YES]; 
```

# php - 使用 SoapClient over https 在 PHP 中调用 WCF 时出现致命错误

> ID：15496771
> 
> 赞同：0
> 
> 时间：2013-03-19T10:20:43.930
> 
> 标签：php, wcf, wsdl, webservice-client, soap-client

我是服务新手，我目前正在使用 SoapClient 对象在 PHP 中调用 .net WCF 服务。代码如下：

```
 $arr2=array('paymentVendorCode'=>"test1",'transactionNumber'=>123456789,'dataSource'=>'Ghana_QA','customerNumber'=>45678912,'amount'=>10,'invoicePeriod'=>1,'currency'=>'GHC','paymentDescription'=>'CashPayment','methodofPayment'=>'CASH','productCollection'=>'PRCC4');

    $certFile = "certs/Entrust.pem";
    $options = array('soap_version' => SOAP_1_1 , 'local_cert' => $certFile , 'exceptions' => true ,'trace' => true ,'wdsl_local_copy' => true ,'ssl' => array('verify_peer' => false) ,'https' => array('curl_verify_ssl_peer'  => false, 'curl_verify_ssl_host' => false)
           );

try
{
echo "SOAP Client Object Made <br />";
//To Make soap client using WSDL files offline
$client = new SoapClient("RTPP_Web_Service_WSDL_20130306/multichoice.paymentservice.wsdl",$options);    
}
catch(SoapFault $E)
{
    echo "Error:--> ".$E->faultstring;
}

print_r($client->__getFunctions());

try
{
echo $pmt_customer=$client->__call("SubmitPayment", $arr2)."<br /><br />";
}
catch(SoapFault $fault)
{
echo "came here in catch";
trigger_error("SOAP Fault:(faultcode: {$fault->faultcode}\n"."faultstring: {$fault->faultstring})", E_USER_ERROR);  
 } 
```

我浏览了我正在使用的所有 WSDL 文件，并获得了所有元素、消息、操作、参数等。在 WSDL 文件之一中，soap 地址如下：

```
<soap:address location="https://wispqa.multichoice.co.za/PaymentServicePerimeter/Intermediate.svc" /> 
```

这是被调用服务的实际地址，通常在 url 的末尾使用 ?WSDL 调用服务，但即使在上述 url 的末尾添加了这个之后，服务页面的外观仍然保持不变。

服务文档中的一件事是“该服务当前不使用消息契约”。

我正在向通过调用“$client->__getFunction()”获得的列表中调用其方法之一的服务发送请求。但它不是响应而是给出致命错误，可以从[http://i.stack.imgur.com/GvS3d.png](http://i.stack.imgur.com/GvS3d.png)的屏幕截图中看到。

我已经为此工作了将近一个星期，但被困在这里。请如果有人可以让我离开这里。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T10:11:35.480

我得到了答案，我缺少的是要调用的方法的肥皂动作。我通过彻底访问 WSDL 文件给出了肥皂动作，并找到了我调用的方法的肥皂动作：

```
 $submitpayment_action   = "http://MultiChoice.PaymentService/ServiceContracts/PaymentServiceContract/SubmitPayment"; 
```

我还通过使用 xml 格式更改了请求的格式，其摘录如下（我通过使用 SOAPUI 工具获得了这种 xml 格式）：

```
 $submitpay = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\"
xmlns:mes=\"http://MultiChoice.PaymentService/MessageContracts\" 
                                        xmlns:ser=\"http://MultiChoice.PaymentService/ServiceContracts\" 
                                        xmlns:dat=\"http://MultiChoice.PaymentService/DataContracts\" 
                                        xmlns:mcom=\"http://mcomp.scontracts\" xmlns:mcom1=\"http://mcomp.dcontracts\">
                      <soapenv:Header/>
<soapenv:Body>
                        <mes:SubmitPaymentRequest>
                          <ser:PaymentRequest>
<dat:paymentVendorCode>".$vendorcode."</dat:paymentVendorCode> ....... 
```

最后使用这个“__doRequest”SOAP 方法来调用服务方法：

```
 $response = $client->__doRequest($submitpay,$location,$submitpayment_action,SOAP_1_1,$one_way = 0);

print_r($response); 
```

这向我展示了所需的响应。现在可以使用“simplexml_load_string($response);”从响应中提取所需信息 , "registerXPathNamespace()" 和 "xpath('//string');" 方法。

# android - android editText：检测用户何时停止编辑

> ID：15496775
> 
> 赞同：5
> 
> 时间：2013-03-19T10:20:53.850
> 
> 标签：android, event-handling, android-edittext, edit

我有一个 editText 代表搜索条件的输入。我想知道是否有办法检测用户何时停止编辑此editText，以便我可以查询数据库以获取我的列表的数据。例如，如果用户键入“test”，我只想在用户键入单词后收到通知，而不是在用户键入每个字母后，就像 text watcher 那样。你有什么想法？我会避免使用一些计时器来测量按键事件之间经过的毫秒数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T10:56:27.593

不是非常优雅，但这应该可以。

初始化：

```
long idle_min = 4000; // 4 seconds after user stops typing
long last_text_edit = 0;
Handler h = new Handler();
boolean already_queried = false; 
```

设置将从文本观察器调用的可运行文件：

```
private Runnable input_finish_checker = new Runnable() {
    public void run() {
            if (System.currentTimeMillis() > (last_text_edit + idle_min - 500)) {
                 // user hasn't changed the EditText for longer than
                 // the min delay (with half second buffer window)
                 if (!already_queried) { // don't do this stuff twice.
                     already_queried = true;
                     do_stuff();  // your queries
                 }
            }
    }
}; 
```

把它放在你的文本观察器中：

```
last_text_edit = System.currentTimeMillis();
h.postDelayed(input_finish_checker, idle_min); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-05T16:05:36.287

首先创建以下字段：

```
private Date                _lastTypeTime   = null; 
```

然后确保您的 editText 实现“TextWatcher”：

```
_editText.addTextChangedListener(this); 
```

然后，重写接口的方法如下：

```
@Override
public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3)
{
    _lastTypeTime = new Date();
}

@Override
public void afterTextChanged(Editable arg0)
{
}

@Override
public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3)
{
    // dispatch after done typing (1 sec after)
    Timer t = new Timer();
    TimerTask tt = new TimerTask()
    {
        @Override
        public void run()
        {
            Date myRunTime = new Date();

            if ((_lastTypeTime.getTime() + 1000) <= myRunTime.getTime())
            {
                post(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        Log.d("<tag>", "typing finished!!!");
                    }
                });
            }
            else
            {
                Log.d("<tag>", "Canceled");
            }
        }
    };

    t.schedule(tt, 1000);
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-20T09:40:40.523

以下是如何检测您正在寻找的事件。

声明和初始化：

```
private Timer timer = new Timer();
private final long DELAY = 1000; // in ms 
```

例如 onCreate() 中的监听器

```
EditText editText = (EditText) findViewById(R.id.editTextStopId);
    editText.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }
        @Override
        public void onTextChanged(final CharSequence s, int start, int before,
                int count) {
            if(timer != null)
                timer.cancel();
        }
        @Override
        public void afterTextChanged(final Editable s) {
            //avoid triggering event when text is too short
            if (s.length() >= 3) {              

                timer = new Timer();
                timer.schedule(new TimerTask() {
                    @Override
                    public void run() {
                        // TODO: do what you need here (refresh list)
                        // you will probably need to use
                        // runOnUiThread(Runnable action) for some specific
                        // actions
                        queryDB();
                    }

                }, DELAY);
            }
        }
    }); 
```

因此，当文本更改时，计时器开始等待任何下一次更改发生。当它们发生时，计时器被取消，然后再次启动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-22T10:21:41.193

这就是我所做的和为我工作的方式！

```
long delay = 1000; // 1 seconds after user stops typing
long last_text_edit = 0;
Handler handler = new Handler();

private Runnable input_finish_checker = new Runnable() {
    public void run() {
        if (System.currentTimeMillis() > (last_text_edit + delay - 500)) {
            // TODO: do what you need here
            DoStaff();
        }
    }
};

EditText editText = (EditText) findViewById(R.id.editTextStopId);
editText.addTextChangedListener(new TextWatcher() {
    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }
    @Override
    public void onTextChanged(final CharSequence s, int start, int before,
            int count) {
         //You need to remove this to run only once
         handler.removeCallbacks(input_finish_checker);

    }
    @Override
    public void afterTextChanged(final Editable s) {
        //avoid triggering event when text is empty
        if (s.length() > 0) {              
          last_text_edit = System.currentTimeMillis();
          handler.postDelayed(input_finish_checker, delay);
        } else {

        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-01T10:59:48.383

检查是否`editText`有文本的最简单方法（仅一次），请执行以下操作：

```
 private boolean newState;

  protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.somLayout);

    edt.addTextChangedListener(new TextWatcher() {
                @Override
                public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {

                }

                @Override
                public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
                }

                @Override
                public void afterTextChanged(Editable editable) {
                    if (!editable.trim().isEmpty()) {
                        checkIsTyping(true);
                    } else {
                        checkIsTyping(false);
                    }
                }
            });

}
    private void checkIsTyping(boolean typeState) {
            if (newState != typeState) {
                Toast.makeText(appCompatActivity, "typingState  " + newState, 
            Toast.LENGTH_SHORT).show();
            }
            newState = typeState;

        } 
```

# javascript - PhotoSwipe 使用图片打开图库

> ID：15496776
> 
> 赞同：0
> 
> 时间：2013-03-19T10:21:00.183
> 
> 标签：javascript, gallery, photoswipe

我也在寻找解决方案，打开带有 img 链接的 PhotoSwipe 画廊。所以有一个带有画廊图标的IMG。如果用户单击它，我希望画廊打开。

有人知道我该如何处理吗？

我发现了这一点。但这在加载画廊时打开。

```
<script type="text/javascript">
        (function(window, PhotoSwipe){

            document.addEventListener('DOMContentLoaded', function(){

                var
                    options = {
                        preventHide: true
                    },
                    instance = PhotoSwipe.attach( window.document.querySelectorAll('#Gallery a'), options );

                    instance.show(0);

            }, false);

        }(window, window.Code.PhotoSwipe));

</script> 
```

最好的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T23:25:52.453

我刚开始使用 photoSwipe，所以我不肯定这会起作用，但在我看来，您只需要调用`instance.show(0)`点击事件即可。

假设我在页面上有这个元素：`<a id="launch-gallery" href="#">Click to launch gallery</a>`我可以添加这个 jQuery 点击事件来启动画廊：

```
$('#launch-gallery').click(function(evt){
  evt.preventDefault(); // prevent regular click action
  instance.show(0);     // Make sure 'instance' variable is available to this function
}); 
```

如果你不使用 jQuery，你可以在原生 JavaScript 中做同样的事情（但更冗长一些）。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-08T03:28:03.747

请注意，我使用 php (ajax) 来传递图像位置和大小，因此您仍然必须自己定义 json 数据。这就是我使用**Jquery**的方式：

```
$('.element').off(); //in case it's a dynamically changing element
$('.element').on("click tap", function () {
var dataForPhpScript = $(this).parents('.gallery').attr("data-attr"); //data for php script

    $.getJSON('urlToPHPFunction?dataID=' + dataForPhpScript, function (json) {
      openPhotoSwipe(json);
    });
  }); 
```

这是照片滑动打开功能：

```
function openPhotoSwipe(jsonData) {
  var pswpElement = document.querySelectorAll('.pswp')[0];

  // define options (if needed)
  var options = {
    // history & focus options are disabled on CodePen
    history: false,
    focus: false,

    showAnimationDuration: 0,
    hideAnimationDuration: 0

  };

  var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, jsonData, options);
  gallery.init();
} 
```

**请注意， jsonData 应该看起来像这样：**

```
 [
{
    src: 'https://placekitten.com/600/400',
    w: 600,
    h: 400
},
{
    src: 'https://placekitten.com/1200/900',

       w: 1200,
        h: 900
    }
]; 
```

我意识到这个答案已经晚了，但是由于这只是在谷歌搜索完全不同的东西（但与照片相关）时排在首位，我想这可能会有用！

# css - ZURB Foundation：相同大小的表单选择和输入

> ID：15496777
> 
> 赞同：2
> 
> 时间：2013-03-19T10:21:04.023
> 
> 标签：css, html, zurb-foundation

我开始使用 zurb 基础，想知道调整输入和选择的“基础方式”是什么。

基本上我得到了四列的行，每一列都有一个表单元素。默认情况下，每个元素都有不同的高度。

**请参考我拍的这个截图：** ![http://i.imgur.com/dpWZLq1.png](../Images/1bfdb4c5e3cd60dcc7ed496e89b113f7.png)

再说一遍，zurb 基础的方法是如何均匀地调整元素的大小？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T01:34:43.957

看看这个 Foundation 表单 mixin：[form-element](https://github.com/zurb/foundation/blob/master/scss/foundation/components/_forms.scss#L93)

如果您使用的是 SASS，则可以执行以下操作：

**your_styles_file.css.scss**

```
select {
  @include form-element;
} 
```

这样做，您将拥有具有相同外观和感觉的所有表单输入和选择。

注意这个 mixin 设置的 width 属性，它是 100%。

# mongodb - Mongo聚合框架：按年龄分组用户

> ID：15496780
> 
> 赞同：6
> 
> 时间：2013-03-19T10:21:07.850
> 
> 标签：mongodb

我有一个存储在 mongo 中的用户群。用户*可以*记录他们的出生日期。我需要运行一个**按年龄**聚合用户的报告。

我现在有一个按出生年份对用户进行分组的管道。但是，这还不够精确，因为大多数人不是在 1 月 1 日出生的；因此，即使他们出生于 1970 年，也可能还不到 43 岁。

```
db.Users.aggregate([
    { $match : { "DateOfBirth" : { $exists : true} } },
    { $project : {"YearOfBirth" : {$year : "$DateOfBirth"} } }, 
    { $group : { _id : "$YearOfBirth", Total : { $sum : 1} } },
    { $sort : { "Total" : -1 } }
]) 
```

你知道是否可以在聚合框架内执行某种算术来准确计算用户的年龄？还是仅使用 MapReduce 可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-22T16:34:54.810

似乎在刚刚发布的新 Mongo 2.4 版本中，整个事情都是可能的，支持额外的 Date 操作（即“$subtract”）。

我是这样做的：

```
db.Users.aggregate([
    { $match : { "DateOfBirth" : { $exists : true} } },
    { $project : {"ageInMillis" : {$subtract : [new Date(), "$DateOfBirth"] } } }, 
    { $project : {"age" : {$divide : ["$ageInMillis", 31558464000] }}},
    // take the floor of the previous number:
    { $project : {"age" : {$subtract : ["$age", {$mod : ["$age",1]}]}}},
    { $group : { _id : "$age", Total : { $sum : 1} } },
    { $sort : { "Total" : -1 } }
]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T17:45:00.683

没有足够的 dateTime 运算符和数学运算符来预测日期。但是您也许可以通过编写动态查询来创建年龄范围：

将您的日期范围定义为截止日期

dt18 = 今天 - 18 dt25 = 今天 - 25 ... dt65 = 今天 - 65

然后执行嵌套条件，逐步使用截止日期作为年龄组标记，如下所示：

```
db.folks.save({ "_id" : 1, "bd" : ISODate("2000-02-03T00:00:00Z") });
db.folks.save({ "_id" : 2, "bd" : ISODate("2010-06-07T00:00:00Z") });
db.folks.save({ "_id" : 3, "bd" : ISODate("1990-10-20T00:00:00Z") });
db.folks.save({ "_id" : 4, "bd" : ISODate("1964-09-23T00:00:00Z") });

db.folks.aggregate(
    {
    $project: {
        ageGroup: {
            $cond: [{
                $gt: ["$bd",
                ISODate("1995-03-19")]
            },
            "age0_18",
            {
                $cond: [{
                    $gt: ["$bd",
                    ISODate("1988-03-19")]
                },
                "age18_25",
                "age25_plus"]
            }]
        }
    }
},
{
    $group: {
        _id: "$ageGroup",
        count: {
            $sum: 1
        }
    }
}) 
```

# javascript - 从城市名称/地址/邮政编码获取纬度和经度并生成 XML 输出

> ID：15496781
> 
> 赞同：0
> 
> 时间：2013-03-19T10:21:10.173
> 
> 标签：javascript, html, xml, latitude-longitude

我正在尝试开发一个应用程序。
输入城市名称并获取`city, country, country-code, region, latitude and longitude`XML 格式...
我在纬度和经度方面是全新的....
我想要这样的输出：-

如果在文本框中输入任何城市名称：- 像 a:-`Rajkot`
然后返回：- `city name, country, country_code, region, latitude, longitude`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:31:03.230

我猜你正在寻找[谷歌地图地理编码](https://developers.google.com/maps/documentation/geocoding/#XML)

# jquery - UI 小部件禁用

> ID：15496782
> 
> 赞同：2
> 
> 时间：2013-03-19T10:21:12.880
> 
> 标签：jquery, html, css

我正在创建一个小部件，然后单击按钮，我希望禁用该小部件。

```
(function ($) {
    $.widget("df.txt", { })
})(jQuery);

$(document).ready(function () {
    //register input widgets
    $("input").txt({ disabled: true });

    //Register button to disable/enable inputs
    $("button").click(function () {
        //$("input").txt("disable");
        $("input").txt("option", "disabled", true);
    });
}); 
```

我使用这个[链接](http://api.jqueryui.com/jQuery.widget/#method-option)作为参考。

打不开，有救吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:30:11.200

`disabled`基本小部件仅在选项更改时切换某些类。

如果您想真正禁用自定义小部件增强的元素，则必须重写该`_setOption()`方法并显式执行该操作：

```
(function($) {
    $.widget("df.txt", {
        _setOption: function(key, value) {
            this._super(key, value);
            if (key == "disabled") {
                this.element.prop("disabled", !!value);
            }
        }
    });
})(jQuery); 
```

然后你可以写这样的东西：

```
// Register button to disable/enable inputs.
$("button").click(function() {
    var $inputs = $("input");
    $inputs.txt("option", "disabled", !$inputs.txt("option", "disabled"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:24:42.733

尝试这个

```
 $('input').attr("disabled", true);

 or

 $('input').attr("disabled", 'disabled'); 
```

在这里，我们将属性 disabled 设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T12:04:28.857

```
_setOption: function (key, value) {

            if (key === "disabled") {
                if (value) { this._Disable(); }
                else { this._Enable(); }
            }

 _Enable: function () {
            this.element.removeAttr("disabled");
            this.element.addClass("enable");
        },

        _Disable: function () {
            this.element.attr("disabled", "disabled");
            this.element.removeClass("enable");
        } 
```

# ios - 如何访问表格视图单元格

> ID：15496785
> 
> 赞同：3
> 
> 时间：2013-03-19T10:21:22.243
> 
> 标签：ios, button, tableview

我有一个包含 6 个单元格的菜单第一个包含`UIViewController`第二个包含`UITableView`

当我单击第一个单元格时，会出现一个新页面，它包含一个按钮当我单击此按钮时，我想从菜单访问第二个单元格，其中包含一个 tableView

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:37:00.070

// 使用此代码刷新或删除或插入 TableviewCell

```
// reloading cell
NSIndexPath *tmpIndexpath=[NSIndexPath indexPathForRow:0 inSection:0];
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:tmpIndexpath, nil] withRowAnimation:UITableViewRowAnimationTop];

// inserting cell
NSIndexPath *tmpIndexpath=[NSIndexPath indexPathForRow:0 inSection:0];
        [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObjects:tmpIndexpath, nil] withRowAnimation:UITableViewRowAnimationTop];

// deleting cell
 NSIndexPath *tmpIndexpath=[NSIndexPath indexPathForRow:0 inSection:0];
        [self.tableView deleteRowsAtIndexPaths:[NSArray arrayWithObjects:tmpIndexpath, nil] withRowAnimation:UITableViewRowAnimationBottom]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T10:29:44.543

据我所知，您想在单击时从表格视图移动到其他视图的问题。所以，您必须使用与此类似的代码。

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    Detail *img1=[[Detail alloc]initWithNibName:@"Detail" bundle:Nil];
    img1.labelString = [titleArray objectAtIndex:indexPath.row];
    [self presentViewController:img1 animated:YES completion:nil];    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:30:11.930

`UIButton`在你的Tapped Method中写下以下 coed 。

```
-(void) ButtonTapped:(UIButton *) sender
{
        NSIndexPath *indexpathNew = [self.tblView indexPathForCell:(UITableViewCell *)[sender superview]];

      NSLog(@"%@",indexpathNew.row);
} 
```

`indexpathNew`是单元格选定按钮的返回`indextPath`。

试试我的代码，我可能对你有帮助。

# bash - bash中if语句中的多个条件不起作用

> ID：15496793
> 
> 赞同：1
> 
> 时间：2013-03-19T10:21:39.817
> 
> 标签：bash, conditional-statements

我创建了这个小 bash 脚本来为我下载存储库。但是，如果语句没有正确评估它....我尝试了许多不同的变体，但它不起作用。

```
os=$(lsb_release -si)
version=$(lsb_release -sr)
arch = `getconf LONG_BIT`
if [[$os = 'CentOs' && $version >= '6.0' && $arch = '64']]
then
    echo "Works fine"
    echo $version 
    echo $os 
fi 
```

就像信息一样：在if 语句之外，两者都可以正常工作`echo $os`。`echo $version`

更新： bash -x test.sh 的输出

```
++ lsb_release -si
+ os=CentOS
++ lsb_release -sr
+ version=6.4
++ getconf LONG_BIT
+ arch=64
+ [[ CentOS = \C\e\n\t\O\s ]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:23:44.380

这个：

```
arch = `getconf LONG_BIT` 
```

应该：

```
arch=`getconf LONG_BIT` 
```

或更好：

```
arch=$(getconf LONG_BIT) 
```

您不能在`bash`. 您编写的内容执行了一个`arch`使用参数调用的命令`=`以及来自`getconf LONG_BIT`（大概是 32 或 64）的输出。

通常，您还需要将命令名称（例如`[[`）与参数分开。所以，你需要改变这个：

```
if [[$os = 'CentOs' && $version >= '6.0' && $arch = '64']] 
```

所以它在“命令”名称周围有空格（在之后`[[`和之前`]]`）：

```
if [[ $os = 'CentOs' && $version >= '6.0' && $arch = '64' ]] 
```

我可能会将变量括在双引号中，但这不是 100% 必要的。然后是`[[`不支持`<=`or`>=`运算符的问题（有人知道为什么不吗？）。所以，你必须使用否定逻辑：

```
if [[ $os = 'CentOs' && ! ($version < '6.0') && $arch = '64' ]] 
```

当心。附上'event not found' （如果我`!`想要`($version < '6.0')`一个海贝壳，我会去海边；我希望他们将历史 C shell 符号从 中删除`bash`）。

```
os=$(lsb_release -si)
version=$(lsb_release -sr)
arch=$(getconf LONG_BIT)
if [[ $os = 'CentOs' && ! ($version < '6.0') && $arch = '64' ]]
then
    echo "Works fine"
    echo "Version $version; OS $os; Arch $arch"
fi 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T12:32:04.323

要比较 Bash 中的浮点数，请尝试以下操作：

```
- if [[$os = 'CentOs' && $version >= '6.0' && $arch = '64']]
+ if [[ $os = 'CentOs' ]] && [[ "$(echo "if (${version} >= 6.0 1 else 0" | bc)" -eq 1 ]] && [[ $arch = '64' ]] 
```

请参阅：[如何在 bash/awk 中比较两个十进制数字？](https://stackoverflow.com/questions/11237794/how-to-compare-two-decimal-numbers-in-bash-awk/)

# php - RegExp 获取前后 N 个单词

> ID：15496795
> 
> 赞同：5
> 
> 时间：2013-03-19T10:21:40.353
> 
> 标签：php, regex, grep, preg-match

我想获取给定搜索字符串的“上下文”。例如，对于`myself`以下行中的搜索字符串

> 我，我的狗和我自己要去度假。

我想得到`dog and myself are going`N = 2。所以比赛前2个词和比赛后2个词。

* * *

目前我匹配这样的整行：

```
$lines = file($file->getFilename());
$lines = preg_grep('/'.$_POST['query'].'/', $lines); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T11:06:47.950

[preg_grep()](http://www.php.net/manual/en/function.preg-grep.php)应该是这样的，但听起来你需要[preg_match()](http://www.php.net/manual/en/function.preg-match.php)并且如果你可以在文本中有多个搜索词实例并且想要找到所有这些实例[preg_match_all()](http://www.php.net/manual/en/function.preg-match-all.php)

您正在寻找的正则表达式是：`(?:[^ ]+ ){0,2}myself(?: [^ ]+){0,2}` 这里解释的演示：[http ://regex101.com/r/pB3eW0](http://regex101.com/r/pB3eW0)

我将它设计为匹配前后 2 个单词，否则*可以*匹配1 个单词甚至没有。

允许变量*N*的代码可能如下所示：

```
$fileData=file_get_contents($file->getFilename());
$n=2;
$query='myself';
preg_match_all('/(?:[^ ]+ ){0,'.$n.'}'.$query.'(?: [^ ]+){0,'.$n.'}/i',$fileData,$matches);
print_r($matches); 
```

**请记住验证和转义用户输入**，而不仅仅是在给定的函数中使用它！

# matlab - 操纵数据以更好地拟合高斯分布

> ID：15496804
> 
> 赞同：5
> 
> 时间：2013-03-19T10:22:09.980
> 
> 标签：matlab, normal-distribution, statistics

我有一个关于正态分布的问题（使用`mu = 0`and `sigma = 1`）。

假设我首先以这种方式调用 randn 或 normrnd

```
x = normrnd(0,1,[4096,1]); % x = randn(4096,1) 
```

现在，为了评估 x 值与正态分布的拟合程度，我调用

```
[a,b] = normfit(x); 
```

并有图形支持

```
histfit(x) 
```

现在回到问题的核心：如果我对 x 如何拟合给定的正态分布不够满意，我如何优化**x**以更好地拟合具有*0 均值*和*1 标准差***的预期正态分布**？有时由于表示值很少（即在这种情况下为*4096 ），* **x**与预期的高斯分布的拟合非常差，所以我想操纵**x**（**线性与否**，在这个阶段并不重要）以获得更好的适应度.

 *********我想说明我可以访问统计工具箱。

**编辑**

1.  我做了这个例子，`normrnd`并`randn`导致我的数据应该并预期具有正态分布。但是，在问题中，这些功能只会有助于更好地理解我的担忧。

2.  **是否可以应用最小二乘拟合？**

3.  通常我得到的分布类似于以下内容： ![在此处输入图像描述](../Images/e26ae9471e94c3876bcb85f3cf0ac102.png)

我的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T12:51:48.463

也许，您可以尝试将输入数据标准化为均值 = 0 和 sigma = 1。像这样：

```
y=(x-mean(x))/std(x); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:12:53.540

如果您正在寻找使您的分布看起来正常的非线性变换，您可以首先估计累积分布，然后采用标准正态 CDF 的逆函数组合。通过这种方式，您可以通过可逆变换将几乎任何分布转换为正态分布。看看下面的示例代码。

```
x = randn(1000, 1) + 4 * (rand(1000, 1) < 0.5); % some funky bimodal distribution
xr = linspace(-5, 9, 2000);
cdf = cumsum(ksdensity(x, xr, 'width', 0.5)); cdf = cdf / cdf(end); % you many want to use a better smoother
c = interp1(xr, cdf, x); % function composition step 1
y = norminv(c); % function composition step 2
% take a look at the result
figure;
subplot(2,1,1); hist(x, 100);
subplot(2,1,2); hist(y, 100); 
```*********

# api - 致命错误：未捕获的异常“Zend_Gdata_App_HttpException”与

> ID：15496807
> 
> 赞同：2
> 
> 时间：2013-03-19T10:22:26.013
> 
> 标签：api, google-calendar-api, uncaught-exception

一个核心 php 网站与谷歌日历 API 集成。收集并更新到谷歌日历的网络表单数据。尽管所有日期格式都使用**DATE_ATOM,mktime()**我面临这个问题。

**如何修复致命错误：未捕获的异常“Zend_Gdata_App_HttpException”？**

> 致命错误：/home/website/public_html/zend/lib/Zend/Gdata/ 中未捕获的异常 'Zend_Gdata_App_HttpException' 和消息 'Expected response code 200, got 400 [Line 1, Column 659, element gd:when] Badly formatted datetime' App.php:700 堆栈跟踪：#0 /home/website/public_html/zend/lib/Zend/Gdata.php(219): Zend_Gdata_App->performHttpRequest('POST', ' [http://www.goog](http://www.goog) ... ', Array, 'performHttpRequest('POST', ' [http://www.goog](http://www.goog) ...', Array, 'post(Object(Zend_Gdata_Calendar_EventEntry), ' [http://www.goog](http://www.goog) ...', NULL, NULL , 数组) #3 /home/website/public_html/zend/lib/Zend/Gdata/Calendar.php(165): Zend_Gdata_App->insertEntry(Object(Zend_Gdata_Calendar_EventEntry), ' [http://www.goog](http://www.goog)...', 'Zend_Gdata_Cale...') #4 /home/website/public_html/add-session.php(297): Zend_Gdata_Calendar->insertEvent(Object(Zend_Gdata_C in /home/website/public_html/zend/lib/ Zend/Gdata/App.php 在第 700 行

以下链接都没有帮助我 [未捕获的异常'Zend_Gdata_App_HttpException](https://stackoverflow.com/questions/12561307/uncaught-exception-zend-gdata-app-httpexception) [YouTube PHP API - Zend_Gdata_App_HttpException](https://stackoverflow.com/questions/6562083/youtube-php-api-zend-gdata-app-httpexception) [致命错误：未捕获的异常'RuntimeException'](https://stackoverflow.com/questions/1954202/fatal-error-uncaught-exception-runtimeexception) [致命错误：PHPExcel 类中未捕获的异常'异常'](https://stackoverflow.com/questions/2863400/fatal-error-uncaught-exception-exception-in-phpexcel-classes)

[https://groups.google.com/forum/?fromgroups=#!topic/google-contacts-api/IFHANnTWzIM](https://groups.google.com/forum/?fromgroups=#!topic/google-contacts-api/IFHANnTWzIM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:21:58.300

如果您有任何 html 实体或空间、开始时间或结束时间，那么您最终会遇到此问题。确保下面的代码行中没有 html 实体或空格。

> $start = date(DATE_ATOM, mktime($_POST['sdate_hh'], $_POST['sdate_ii'], 0, $_POST['sdate_mm'], $_POST['sdate_dd'], $_POST['sdate_yy'] ));
> 
> $end = date(DATE_ATOM, mktime($_POST['edate_hh'], $_POST['edate_ii'], 0, $_POST['edate_mm'], $_POST['edate_dd'], $_POST['edate_yy'] ));

因此问题解决了。

# java - 使用 GWT 在 FlexTable 中进行分页

> ID：15496808
> 
> 赞同：1
> 
> 时间：2013-03-19T10:22:29.780
> 
> 标签：java, gwt

我需要为我的应用程序的 FlexTable 小部件实现“分页”：

这是我的初始代码，它将产品呈现为 3 列单元格：

```
public void renderProducts(Map<Long, Product> mp) { 
    int i = 0;
    int j = 0;

    Iterator it = mp.entrySet().iterator(); 
    while (it.hasNext()) {
        Map.Entry pairs = (Map.Entry)it.next();

        Product product = (Product) pairs.getValue();
        ProductWidget pw = productInstance.get();
        pw.setTitle(product.getName());
        pw.setImageUrl(product.getImageUrl());
        pw.setContent(product.getInfo());
        pw.setUrl(product.getUrl()); // "More" button anchor
        List<String> feats = product.getFeatures();
        for (String f : feats){
            pw.addFeature(f);
        }

        flextable.setWidget(i, j, pw);
        j++;
        if (j == 3){ 
            i++;
            j = 0;
        }
        it.remove(); // avoids a ConcurrentModificationException
    }
} 
```

为此需要在 N 页中进行分页。我最初的想法是将地图拆分为地图列表...

我的意思是，FlexTable 是否有任何“数据源”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:56:57.623

如果您确实需要使用 FlexTable 并提供分页功能，您最好使用单元格表格[这么老的问题](https://stackoverflow.com/questions/5583861/tables-and-paging)。简单的寻呼机实现了您想要的所有功能。

如果您想使用 FlexTable，您必须提供您自己的寻呼机实现。这可以通过各种方式完成，使用下一个和上一个按钮或标签添加点击处理程序并进行迭代。

地图也不是要走的路，因为物品没有以任何方式订购。我会将所有项目添加到列表中，并将所述列表用作我的数据源。

您还需要一种方法来保存当前页面和项目/页面（如果您希望在页面更改后保存它，则可能是一个静态变量）

# jquery - 如何在 joomla 2.5 中更新 jquery？

> ID：15496810
> 
> 赞同：0
> 
> 时间：2013-03-19T10:22:42.090
> 
> 标签：jquery, joomla

谁能告诉我如何在 Joomla 上更新 jQuery 版本！网站？

有需要修改的模板吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:38:08.133

升级/更新脚本是个好主意，只需先在本地测试一切都像以前一样工作。一些较旧的脚本可能与较新版本的 jQuery 存在兼容性问题。

**基本步骤如下：**

*   查找当前模板的名称（来自管理后端）
*   找到里面的模板文件夹`/templates/YOURTEMPLATENAME`
*   检查 index.php 并确定 jQuery 是否在本地加载（例如从CDN 加载`/templates/YOURTEMPLATENAME/js/jquery.js`或从 CDN加载`ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js`）。
*   如果是本地下载 jQuery 的副本并替换旧的 jQuery 文件
*   如果它是从 CDN 加载的，请更新链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:29:58.533

你怎么知道你的模板正在加载 jQuery？不要求模板加载 jQuery。如果您的模板没有，那么将新代码放在旧文件中根本不会做任何事情。

您最好将您尝试制作的任何代码放入一个模块/插件中，该模块/插件会在您想要使用它时加载您想要使用的 jQuery 版本。如果您不打算使用 jQuery，那么加载它不是一个好主意。它增加了开销并产生了潜在的 jScript 冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-07T20:14:00.287

Joomla 内置了 jQuery，因此在模板中对它的任何引用都可能导致冲突。系统的 jQuery 副本位于 media/jui/js/jquery.js。

# wso2esb - 如何在 wso2 esb(4.6.0) 中向我的代理服务 (get) 添加身份验证请任何人帮助我完成此过程，我找不到更多信息？

> ID：15496814
> 
> 赞同：1
> 
> 时间：2013-03-19T10:22:47.923
> 
> 标签：wso2esb

这些是下面的代理服务和序列...如果我使用空 curl 命令运行，则显示获取服务的数据，以便我想验证该数据

```
 <proxy xmlns="http://ws.apache.org/ns/synapse" name="Get_meter_Mobile" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence onError="fault">
         <property name="CONTENT_TYPE" value="application/json" scope="axis2" type="STRING"/>
         <property name="HTTP_METHOD" value="POST" scope="axis2" type="STRING"/>
         <payloadFactory>
            <format>
               <mmeter xmlns=""/>
            </format>
         </payloadFactory>
         <send receive="Get_meter_Mobile_seq">
            <endpoint>
               <address uri="http://localhost:9764/services/meter_DataService/" format="soap11"/>
            </endpoint>
         </send>
         <property name="ERROR_MESSAGE" expression="get-property('ERROR_MESSAGE')" scope="axis2" type="STRING"/>
         <property name="ERROR_CODE" expression="get-property('ERROR_CODE')" scope="axis2" type="STRING"/>
         <log level="full"/>
         <property name="FORCE_ERROR_ON_SOAP_FAULT" value="true" scope="default" type="STRING"/>
      </inSequence>
      <outSequence>
         <property name="CONTENT_TYPE" value="application/json" scope="axis2"/>
         <log level="full"/>
         <send/>
      </outSequence>
   </target>
   <description></description>
</proxy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T01:03:03.060

您可以通过将 POX 安全性应用于您的代理服务来实现这一点。博客文章 [1] 将向您展示要遵循的步骤。

[1]。[http://evanthika.blogspot.com/2012/12/pox-security-with-wso2-esb-proxy.html](http://evanthika.blogspot.com/2012/12/pox-security-with-wso2-esb-proxy.html)

谢谢你，达沙那。

# css - 如何在动态大小的div的中心放置一个按钮

> ID：15496818
> 
> 赞同：8
> 
> 时间：2013-03-19T10:23:00.013
> 
> 标签：css, html, button, alignment

我有这个代码：

```
<div class="outer">
    <ul class="list">
        <li class="inner">
            <div class="line">information1</div>
            <div class="line">hyperlink1</div>
        </li>
        <li>
            <div class="line">information2</div>
            <div class="line">hyperlink2</div>
        </li>
        <li>
            <div class="line">information3</div>
            <div class="line">hyperlink3</div>
        </li>
        <li>
            <div class="line">information4</div>
            <div class="line">hyperlink4</div>
        </li>
    </ul>
    <input type="submit" id="send" value="send" class="button"/>
</div> 
```

和CSS：

```
.outer
{
    display: table;
    border: 1px solid;
    padding: 5px;
}    
.list
{
    list-style: none;
    padding: 5px;
}    
.inner
{
    display: table-row;
    padding: 5px;
}    
.line
{
    display: table-cell;
    border: 1px solid;
    border-radius: 5px;
}    
.button
{
    top:50%; 
    left:50%;
} 
```

输出是：[这个](http://fiddle.jshell.net/mDHBX/)

现在我想把按钮放在“外部”div的中心，不管宽度是多少。

示例：我希望按钮位于中心甚至：[this](http://fiddle.jshell.net/puM2B/)。无需在每次 div 大小更改时更改 css。即使“外部”div 是动态的，按钮也应该位于中心。

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T10:30:34.407

这以一种简单、简洁的方式实现了您正在寻找的内容：

```
.button {
    display:block;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T10:31:12.870

你需要给按钮一个特定的宽度，然后你可以使用自动边距

```
.button {
  display: block;
  margin: 0 auto;
} 
```

[http://fiddle.jshell.net/CrHyd/](http://fiddle.jshell.net/CrHyd/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T10:30:39.840

有不止一种方法可以做到这一点。我更喜欢使用这样的百分比：

```
input[type="submit"]{
    min-width:20%;
    max-width:20%;
    margin:0% 39% 0% 40%; //margin-right = 39% to stop errors
} 
```

其他人更喜欢一种`margin:auto`方法，但就我个人而言，我从未发现这种方法可行。其他方法包括 using`floats`但我不同意此属性，因为它在某些浏览器中未对齐其他元素。

使用 top 和 left 会导致错误，因为您没有指定除默认（静态）以外的位置类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:31:35.700

这应该工作

```
.outer {
display: inline-block;
text-align: center;
} 
```

[小提琴](http://fiddle.jshell.net/mDHBX/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T10:37:49.480

只需`.button`使用该[`margin`](http://www.w3schools.com/css/css_margin.asp)属性更改为这个。（1 行修复）

```
.button
{
    margin:0 auto;
} 
```

这是一个小提琴，我在其中设置了`.outer`一个固定宽度，`500px`只是为了展示一个例子[`margin`](http://www.w3schools.com/css/css_margin.asp)：

[**演示**](http://fiddle.jshell.net/mDHBX/8/)

# javascript - 正则表达式验证用户 ID

> ID：15496820
> 
> 赞同：1
> 
> 时间：2013-03-19T10:23:02.953
> 
> 标签：javascript, regex

我想要使​​用 javascript 对用户 ID 进行客户端验证。样本输入是

1.  `!abc`
2.  `abc-def , abc`
3.  `abc , abc-def`
4.  `abc`
5.  `abc-def_hjk`

我做了一个正则表达式`([\w]*[-]?[\w]+[\s]?[,]?[\s]?)+`。它`2,3,4,5`根据需要匹配，但也匹配 input `1`，这是无效的。请让我知道这个正则表达式有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:34:08.543

你的问题是`\w`。尝试`a-zA-Z_`改用。这确保只使用字母表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:31:24.690

\d、\w 和 \s 匹配数字、单词字符（字母、数字和下划线）和空格（空格、制表符和换行符）的简写字符类。可以在字符类内部和外部使用。\D、\W 和 \S 以上的否定版本。应该只在字符类之外使用。（可以在内部使用，但这很混乱。）

# python - 我正在搜索 3 个字符串的元组列表

> ID：15496821
> 
> 赞同：0
> 
> 时间：2013-03-19T10:23:04.240
> 
> 标签：python, list, tuples

例如，我有一个元组列表。

```
[('ABC', 'Abcair', 1.50), ('DEF', 'Defir', 5.60), ('GHI', 'Ghiair',3.22), ('ANZ', 'Anzplace', 26.25), ('ARG', 'Argair', 12.22), ('CEN', 'Cenair', 11.22), ('CNU', 'Cununun',3.01)] 
```

我有这样的输入命令

```
code_input = input('Please list portfolio: ').upper() 
```

一个人将输入任意数量的用逗号分隔的 3 个字母代码，然后我将其格式化为

```
no_spaces_codes = code_input.replace(" ", "")
code_list = no_spaces_codes.split(",") 
```

所以，`"Ank , ABc,DEF"`变成`['ANK', 'ABC', 'DEF']`

然后我打印这些标题格式化

```
header="{0:<6}{1:<20}{2:>8}".format("Code","Place","Number")
print(header) 
```

然后，我需要在元组列表中搜索 3 个字母代码并打印标题下的值，格式相同，例如，不在列表中的代码将不会被打印。

```
Code  Name                   Price
ABC   Abcair                  5.30
DEF   Defair                 11.22 
```

我已经走到这一步了。

```
for code in b:
    if code[0] == (code_list[1]):
        print(code[:])
        break 
```

哪个打印

```
Code  Name                   Price
('CEN', 'Contact', 11.22) 
```

但我不能比这更进一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:36:05.563

你可以这样做：

```
place, price = next((c[1:] for c in b if c[0] == code_input), ('Not found', 0)) 
```

但你真的想改用字典：

```
code_dict = {k: (v, p) for k, v, p in b} 
```

之后匹配变成一个简单的查找：

```
place, price = code_dict.get(code_input, ('Not found', 0)) 
```

示范：

```
>>> b = [('ABC', 'Abcair', 1.50), ('DEF', 'Defir', 5.60), ('GHI', 'Ghiair',3.22), ('ANZ', 'Anzplace', 26.25), ('ARG', 'Argair', 12.22), ('CEN', 'Cenair', 11.22), ('CNU', 'Cununun',3.01)]
>>> code_input = 'CEN'
>>> place, price = next((c[1:] for c in b if c[0] == code_input), ('Not found', 0))
>>> print code_input, place, price
CEN Cenair 11.22
>>> code_dict = {k: (v, p) for k, v, p in b}
>>> place, price = code_dict.get(code_input, ('Not found', 0))
>>> print code_input, place, price
CEN Cenair 11.22 
```

使用`code_dict`映射，在进行多次查找时查找会*快得多*，尤其是当列表中不存在条目时。将其与您的其余代码放在一起：

```
code_input = input('Please list portfolio: ').upper()
code_dict = {k: (v, p) for k, v, p in b}

line="{0:<6}{1:<20}{2:>8}"
print line.format("Code", "Place", "Number")

for code in code_input.split(','):
    code = code.strip()
    if code not in code_dict:
        continue  # skip codes not in the mapping
    place, price = code_dict[code]
    print line.format(code, place, price) 
```

您的`"Ank , ABc,DEF"`输入将打印：

```
Code  Place                 Number
ABC   Abcair                   1.5
DEF   Defir                    5.6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:28:13.483

```
result = [v for v in list_of_tuples if v[0] in code_list]
for v in result:
    print(v) # Or format 'v' tuple in any way you want. 
```

# java - 创建正则表达式模式

> ID：15496822
> 
> 赞同：-2
> 
> 时间：2013-03-19T10:23:04.777
> 
> 标签：java, android, regex

如何在 android 中开发手机模式，其中：

1.  它的长度是8位
2.  前两位数字应为 03 或 71 或 72 或 76 或 78

我创建了这个，但它不适用于前两位数，因为我不知道该怎么做：

```
Pattern pattern = Pattern.compile("\\d{2}\\d{6}"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T10:26:33.637

试试这个模式`(03|71|72|76|78)\d{6}`。

# c - 编译器 -march 标志基准？

> ID：15496824
> 
> 赞同：2
> 
> 时间：2013-03-19T10:23:12.103
> 
> 标签：c, optimization, compiler-construction, compiler-optimization

编译器中的 -march 标志（例如：gcc）真的很重要吗？

如果我使用 -march=my_architecture 而不是 -march=i686 编译所有程序和内核会更快吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T19:02:22.033

是的，它确实如此，尽管这些差异有时只是相关的。但是，如果您的代码可以向量化以使用 SSE 或其他扩展指令集，这些指令集在一种架构上可用，但在另一种架构上不可用，它们可能会非常大。当然，32 位和 64 位之间的差异可以（但不必总是）很明显（`-m64`如果您认为它是一种`-march`参数）。

作为一个有趣的证据，几年前我遇到了一个有趣的错误，`gcc`其中在 Pentium 4 上运行的特定代码段在编译时会*比*`-march=pentium4`使用`-march=pentium2`.

所以：通常没有区别，有时有，有时与您预期的相反。与往常一样：在您决定使用超出“安全”范围的任何优化之前进行测量（例如，使用您实际准确的 CPU 模型而不是更通用的模型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T06:29:47.057

无法保证您编译的任何代码`march`都会比其他版本更快/更慢。这实际上取决于代码的“种类”，实际结果可能只能通过测量获得。例如，如果您的代码有很大的矢量化潜力，那么使用和不使用“march”的结果可能会有所不同。另一方面，有时编译器在矢量化过程中表现不佳，这可能会导致在为特定架构编译时代码变慢。

# html - 转换为下拉菜单

> ID：15496826
> 
> 赞同：1
> 
> 时间：2013-03-19T10:23:22.593
> 
> 标签：html, css, drop-down-menu

首先道歉，因为我之前看到过这个问题，但我仍然没有更聪明，所以不得不自己问。我对 html5 和 css3 很陌生，到目前为止，我已经成功了，直到现在。

我想将导航菜单中的一个选项转换为下拉菜单，我已经尝试过多次使用此处和其他站点的信息，但我仍然遇到问题。

这是我的导航菜单的CSS ..

```
 /* Site Nav */

    #site-nav
{
    position: absolute;
    top: 0;
    right: 50px;
    font-family: 'Open Sans Condensed', sans-serif;
    text-align: right;
}

    #site-nav ul
    {
        list-style: none;
        overflow: hidden;
    }

        #site-nav ul li
        {
            display: block;
            float: left;
            text-decoration: none;
            font-size: 1.2em;
            height: 90px;
            line-height: 110px;
            margin: 0 0 0 1.75em;
        }

            #site-nav ul li a
            {
                color: #000;
                text-decoration: none;
                outline: 0;
            }

            #site-nav ul li a:hover
            {
                color: #fff;
            }

        #site-nav ul li.current_page_item
        {
            background: url('images/nav-arrow.png') center 77px no-repeat;
        }

            #site-nav ul li.current_page_item a
            {
                color: #662d91;
            } 
```

这是我的菜单的html...

```
 <ul>
                                <li><a href="index.html">Homepage</a></li>
                                <li><a href="about.html">About Us</a></li>
                                <li><a href="products.html">Products</a></li>
                                <li><a href="bullion.html">Bullion</a></li>
                                <li class="current_page_item"><a href="#.html">Contact Us</a></li>

                            </ul> 
```

如果仅使用 HTML5 和 CSS3 就可以做到这一点，那就太好了，但如果需要的话，我很高兴沿着 JavaScript 路线走下去。

在此先感谢您的帮助，我们将不胜感激。

**编辑 21/03/2013...**

我试图实现下面给我的代码，这个小提琴显示了我已经走了多远，[http://jsfiddle.net/2rgSP/1/](http://jsfiddle.net/2rgSP/1/) 有2个问题，首先，链接被推离网站的边缘，2，下拉菜单位于主包装之后。显然有一些冲突的css正在进行，但我是一个完整的初学者，所以我很害怕。希望有人能看到我哪里出错了。

谢谢

李

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T09:10:17.793

如果 javsscript/jquery 是一个选项，您可以使用以下内容：

```
<ul id="cssdropdown">
    <li class="headLink">Home
        <ul>
            <li><a href="#">Home1</a></li>
            <li><a href="#">Home4</a></li>
            <li><a href="#">Home2</a></li>
            <li><a href="#">Home3</a></li>
            <li><a href="#">Home5</a></li>
        </ul>
    </li>
    <li class="headLink">About
        <ul>
            <li><a href="#">About1</a></li>
            <li><a href="#">About2</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">About3</a></li>
            <li><a href="#">About5</a></li>
        </ul>
    </li>

    <li class="headLink">Contact
        <ul>
            <li><a href="#">Contact1</a></li>
            <li><a href="#">Contact2</a></li>
            <li><a href="#">Contact3</a></li>
            <li><a href="#">Contact4</a></li>
            <li><a href="#">Contact5</a></li>
        </ul>
    </li>
    <li class="headLink">Links
        <ul>
            <li><a href="#">Links1</a></li>
            <li><a href="#">Links2</a></li>
            <li><a href="#">Links3</a></li>
            <li><a href="#">Links4</a></li>
            <li><a href="#">Links5</a></li>
        </ul>
    </li>
</ul> 
```

CSS

```
body{
    padding:0px;
    margin:0px;
}
ul li{
    list-style-type:none;
}
#cssdropdown{
    padding:0px;
    margin:0px;
}
a{
    text-decoration:none;
    padding:0px;
    margin:0px;}
.headLink{ 
    display: inline-block; 
    padding:10px;
    margin:10px;
    text-align:right;
    background-color:#999999;
    cursor:pointer;
}
.headLink ul{
    display:none;
    position: absolute;
    margin:10px 0 0 -13px;
    padding:0 10px;
    text-align:left;
    background-color:#CCC;
    cursor:pointer;
} 
```

JS：

```
$(function() {
    $(".headLink").hover(function() {
        $('ul',this).slideToggle();
    });

    }); 
```

**[演示](http://jsfiddle.net/LcYrT/)**

# c# - 控制哪些项目离开堆栈面板的可见区域

> ID：15496827
> 
> 赞同：4
> 
> 时间：2013-03-19T10:23:26.153
> 
> 标签：c#, wpf, vb.net, wpf-controls

有没有办法在调整大小时控制哪些项目离开堆栈面板的可见区域？
谢谢

更新 1
我在堆栈面板中有固定数量的按钮。调整堆栈面板可见区域的大小时，每个按钮会根据可用空间自动隐藏或显示。我想通过某些事件来控制在堆栈面板调整大小时隐藏或显示哪个按钮。

原因是，我想创建按钮的最小化版本而不是隐藏按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:30:39.750

在过去，我通过`ContentTemplate`根据对象的大小改变对象的大小来完成类似的操作。

通常，我将事件添加到父对象的`Loaded`和`SizeChanged`事件中，并从那里确定控件是否可见。如果没有，我将模板更改为模板的较小版本。

参考[您在此处](https://stackoverflow.com/questions/15496827/controlling-which-items-leave-a-stackpanels-visible-area#comment21946624_15496827)关于`SizeChanged`事件未触发的评论，这可能是因为您的对象位于 a`StackPanel`中，它将增长/缩小以适应其子项的大小，而不是与其父项（`Grid`单元格）的大小相匹配。

您也可以在实际的 UI 对象上使用`DataTrigger`and来执行此操作`Converter`，因此它会自动检查模板是否应在控件`ActualWidth`或更改时`ActualHeight`更改。

我有一个帮助类，用于确定 UI 控件在其父对象中的确切可见性，以确定它是完全或部分可见，还是完全隐藏。代码可以在[这个答案](https://stackoverflow.com/a/9416770/302677)中找到，虽然我也会在这里复制它：

```
public enum ControlVisibility
{
    Hidden,
    Partial,
    Full,
    FullHeightPartialWidth,
    FullWidthPartialHeight
}

/// <summary>
/// Checks to see if an object is rendered visible within a parent container
/// </summary>
/// <param name="child">UI element of child object</param>
/// <param name="parent">UI Element of parent object</param>
/// <returns>ControlVisibility Enum</returns>
public static ControlVisibility IsObjectVisibleInContainer(
    FrameworkElement child, UIElement parent)
{
    GeneralTransform childTransform = child.TransformToAncestor(parent);
    Rect childSize = childTransform.TransformBounds(
        new Rect(new Point(0, 0), new Point(child.Width, child.Height)));

    Rect result = Rect.Intersect(
        new Rect(new Point(0, 0), parent.RenderSize), childSize);

    if (result == Rect.Empty)
    {
        return ControlVisibility.Hidden;
    }
    if (result.Height == childSize.Height && result.Width == childSize.Width)
    {
        return ControlVisibility.Full;
    }
    if (result.Height == childSize.Height)
    {
        return ControlVisibility.FullHeightPartialWidth;
    }
    if (result.Width == childSize.Width)
    {
        return ControlVisibility.FullWidthPartialHeight;
    }
    return ControlVisibility.Partial;
} 
```

您可以像这样获得控件的可见性：

```
ControlVisibility ctrlVisibility = 
    WPFHelpers.IsObjectVisibleInContainer(button, parent);

if (ctrlVisibility == ControlVisibility.Full 
    || isVisible == ControlVisibility.FullWidthPartialHeight)
{
    // Set big template
}
else
{
    // Set little template
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:59:31.073

“SizeChanged”事件没有触发的原因是我将它的高度设置为固定值。将其设置为“自动”后，在调整其父容器大小时触发事件。

# sql - 使用 SQL Server 中的联合联接拆分列

> ID：15496829
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:23:40.110
> 
> 标签：sql, sql-server, split, union

我有一张表，上面有制造商和订单日期，我需要找到 2011 年和 2012 年每个制造商的订单量。我可以获得信息，但我需要三列，制造、2011 年的订单和 2012 年的订单。我被告知我可以使用联合加入来做到这一点，但我无法为我的生活弄清楚。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:28:23.250

您没有提供很多详细信息，但听起来您想*将*数据从行转换为列。如果是这样，那么您可以使用带有`CASE`表达式的聚合函数将数据放入列中：

```
select manufacturer,
  sum(case when datepart(year, orderdate) = 2011 then 1 else 0 end) Orders_2011,
  sum(case when datepart(year, orderdate) = 2012 then 1 else 0 end) Orders_2012
from yourtable
group by manufacturer 
```

这将创建以下格式的数据：

```
Manufacturer | Orders_2011 | Orders_2012
Comp1        | 100         | 78 
```

# c++ - 如何从 Qdialog 更改 QStackedWidget 索引

> ID：15496831
> 
> 赞同：1
> 
> 时间：2013-03-19T10:23:42.937
> 
> 标签：c++, qt4, qdialog

我的应用程序在菜单栏中有一个“actionhelp”，单击它会打开一个 QDialog，其中在主窗口的另一侧包含一个 ok 按钮我有一个 QStackedWidget 所以我的问题是当我按下它时如何更改stackedwidget 的索引QDialog中的确定按钮？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:30:00.783

信号和插槽。将来自确定按钮的信号（或在关闭后检查 QDialog::Accepted 时发出您自己的信号）连接到将更改 QStackedWidget 中的索引的插槽。

示例代码：

在 main 方法中创建并连接 QAction：

```
QAction *displayDialog = new QAction("Display Dialog", this);
connect(popup, SIGNAL(triggered()), this, SLOT(showDialog())); 
```

显示对话框：

```
void showDialog()
{
    YourDialog *dialog = new YourDialog(this);
    int return_code = dialog.exec();
    if (return_code == QDialog::Accepted)
    {
        int index = someValue;
        qStackedWidget.setCurrentIndex(index);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:39:37.993

假设您在对话框中有行编辑，并且您想根据行编辑值（或旋转框）更改堆叠小部件的索引：

```
//your dialog
//the constructor
YourDialog::YourDialog(QWidget*parent)
    :QDialog(parent)
{
    connect(ur_ok_btn, SIGNAL(clicked()), SLOT(accept ()));
}

//access to line edit value
QString YourDialog::getUserEnteredValue(){return ur_line_edit->text();} 
```

在哪里创建 YourDialog 类的实例：

```
 //your main window
    YourDialog dlg;
    if( dlg.exec() == QDialog::Accepted ){
        int i = dlg.getUserEnteredValue().toInt();
        ur_stacked_widget->setCurrentIndex(i);
    } 
```

# c# - 将二维数组传递给 Web API 服务器

> ID：15496834
> 
> 赞同：3
> 
> 时间：2013-03-19T10:23:45.940
> 
> 标签：c#, asp.net-mvc-4, web, asp.net-web-api

我想做一个如下所示的 Web Api 服务器请求：

```
localhost:8080/GetByCoordinates/[[100,90],[180,90],[180,50],[100,50]] 
```

如您所见，有一个坐标数组。每个坐标有两个点，我想提出这样的要求。我无法弄清楚我的 Web Api 路由配置应该是什么样子，以及方法签名应该是什么样子。

你能帮忙吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:28:58.707

最简单的方法可能是使用“catch-all”路由并在控制器操作中解析它。例如

```
config.Routes.MapHttpRoute(
            name: "GetByCoordinatesRoute",
            routeTemplate: "/GetByCoordinatesRoute/{*coords}",
            defaults: new { controller = "MyController", action = "GetByCoordinatesRoute" }

public ActionResult GetByCoordinatesRoute(string coords)
{
    int[][] coordArray = RegEx.Matches("\[(\d+),(\d+)\]")
                              .Cast<Match>()
                              .Select(m => new int[] 
                                      {
                                          Convert.ToInt32(m.Groups[1].Value),
                                          Convert.ToInt32(m.Groups[2].Value)
                                      })
                              .ToArray();
} 
```

*注意*：我的解析代码仅作为示例提供。它比您要求的要宽容得多，您可能需要对其添加更多检查。

但是，更优雅的解决方案是使用自定义[`IModelBinder`](http://msdn.microsoft.com/en-us/library/dd505004%28v=vs.108%29.aspx).

```
public class CoordinateModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        int[][] result;
        // similar parsing code as above
        return result;
    }
}

public ActionResult GetByCoordinatesRoute([ModelBinder(typeof(CoordinateModelBinder))]int[][] coords)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:09:30.573

显而易见的问题是，为什么您希望该信息出现在 URL 中？它看起来像 JSON 更好地处理。

所以你可以做`localhost:8080/GetByCoordinates/?jsonPayload={"coords": [[100,90],[180,90],[180,50],[100,50]]}`

# python - Python Tkinter 子窗口问题

> ID：15496835
> 
> 赞同：1
> 
> 时间：2013-03-19T10:23:46.953
> 
> 标签：python, user-interface, python-2.7, tkinter

**您好**，我正在努力在 python 中使用多个 tkinter 窗口。基本上，我有两个类也与两个不同的窗口有关。主类显示主窗口（parentWindow），另一个类显示第二个窗口（childWindow）。以下代码启动 MainWindow：

```
#START THE APPLICATION
root = Tkinter.Tk()
root.title ("GEMEINDESTECKBRIEF-Menü")
# My main Application
runGUI = MainWorkspaceConfig (root)
root.mainloop () 
```

到目前为止，没有任何问题！

现在我试图打开第二个窗口调用主类中的一个函数（一种 onClickFunction 来打开窗口）

```
def opendirFactsheetHochwasserGebaeude (self) :
    #validates the workspace resp. database directory and
    #print self.checkFactsheet2.get()
    #print self.inputSpace1.get()

    try:
        if self.checkFactsheet2.get()==1 :

            if self.inputSpace1.get() or self.inputSpace2.get() != "":
                 #write workspace environment to __initFile__
                if self.inputSpace1.get() != "":
                    self.writeWorkspEnv(self.inputSpace1.get())
                    #Copy file in seperate thread
                    start_new_thread(self.copyDefaultFactoWorkspace,())
                if self.inputSpace2.get() != "":
                    self.writeWorkspEnv(self.inputSpace2.get())
                # !!!!!!! START SECOND WINDOW !!!!!
                facthwgeb = Tkinter.Tk()
                facthwgeb.title ("Factsheet Hochwasser-Gebäude")
                runGUI = Factsheet_hochwassergebaeude (facthwgeb)
                facthwgeb.mainloop ()
                #facthwgeb.protocol('WM_DELETE_WINDOW', runGUI.closeFactsheetHochwGeb)
            else:
            #self.inputSpace1.get() and self.inputSpace2.get () =="":
                tkMessageBox.showwarning ("Keine Arbeitsumgebung festgelegt", "Bitte entweder einen neuen Workspace anlegen oder eine bestehende Datenbank auswählen!")
                self.selectBox1.deselect() 
```

仍然一切正常！该窗口按预期打开，并且 GUI 小部件也显示并可使用。完成给定任务后，必须关闭窗口，**所有麻烦都开始了！！！** 要退出窗口，我使用了一个带有命令功能的按钮，如下所示：

```
 def closeFactsheetHochwGeb (self):

    try:
        if self.inputSpace1.get() and self.inputSpace2.get() != "":

            with open('%s/__initFile__.txt'%os.path.dirname(os.path.realpath(__file__)), 'r') as file:
                    # read a list of lines into data
                    data = file.readlines()
                    data[13] = self.inputSpace1.get()+"\n"
                    data[14] = self.inputSpace2.get()+"\n"
                    # and write everything back
            with open('%s/__initFile__.txt'%os.path.dirname(os.path.realpath(__file__)), 'w') as file:
                    file.writelines( data )
                    file.close()
            # self.tkinterFrame.destroy()
            self.tkinterFrame.quit() 
```

self.tkinterFrame.quit **()**不仅关闭了 secondWindow（childWindow），它也关闭了 MainWindow（parentWindow）。self.tkinterFrame.destroy **()**函数从窗口中清除所有小部件，但窗口仍然处于活动状态且可见！！

那么，任何想法如何解决这个问题？将感谢任何解决方案！！！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T10:28:04.533

不要进行第二次`Tk()`审查；你可以/应该只有一个根。

改为使用[Toplevel](http://effbot.org/tkinterbook/toplevel.htm)小部件。`facthwgeb`此外，摆脱`facthwgeb.mainloop()`呼叫，同样，应该只有一个呼叫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:37:39.630

**是**的，我终于找到了解决我的问题的方法！！！！

*第一步：*在启动 ChildWindow 的主类中，我将函数中的代码`def opendirFactsheetHochwasserGebaeude (self) :`从=>`Tkinter.Tk()`更改`Tkinter.Toplevel(parent)`为父级引用根窗口。更改 Tkinter 类型后，`facthwgeb.mainloop()`由于它是由 MainWindow（父级）提供的，因此也被清除了

*第二步：*在实现 ChildWindow 的第二类中，该函数`def closeFactsheetHochwGeb (self):`确实拥有`self.tkinterFrame.destroy()`清除框架小部件而不是窗口本身的命令，并`self.tkinterFrame.quit()`关闭 MainWindow 和 ChildWindow => 所以这两个命令都是无用的！

*最后一步：*最终的解决方案是`self.tkinterFrame.destroy ()`将**`self.tkinterFrame.master.destroy()`**!!

有时复杂的事情可以很简单！！:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-30T18:13:46.913

试试这个`self.Frame1.destroy()` 或任何你的框架名称有时你可以有这个 `self.Frame1 = tk.Frame(top)`

# c# - C# 中 Windows 窗体中的连接池

> ID：15496839
> 
> 赞同：-2
> 
> 时间：2013-03-19T10:23:53.730
> 
> 标签：c#, sql-server-2005, connection-string, connection-pooling

实际上我的数据库连接看起来像这样......，现在我想介绍连接池。我可以知道如何写这个...，

```
public static string dbpath()
    {
        try
        {
            string strcon = @"Data Source=local\SQLEXPRESS;Initial Catalog=aniv;Integrated Security=True";
           SqlConnection con = new SqlConnection(strcon);
            if (con.State == ConnectionState.Open)
            {
                con.Close();
            }
            con.Open();
            return strcon;
        }
        catch (SqlException ex)
        {
            MessageBox.Show(ex.Message);
            return "0";
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
            return "0";
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:28:49.810

您不需要做任何特别的事情来获得[连接池](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)机制的优势。
但是，您的代码应稍作更改：

首先，您可以从代码中删除对已打开连接的检查

```
SqlConnection con  = new SqlConnection(strcon);
// Has been created here, it is always closed
//if (con.State == ConnectionState.Open)
//{
//    con.Close();
//} 
```

其次，返回连接对象，而不是连接字符串。（请注意，我还删除了 try/catch 块，我认为最好由比这更顶级的程序处理异常情况）

```
public static SqlConnection dbconnection()
{
   string strcon = @"Data Source=local\SQLEXPRESS;Initial Catalog=aniv;Integrated Security=True";
   SqlConnection con = new SqlConnection(strcon);
   con.Open();
   return con;

} 
```

这将允许您[使用 using 语句](http://msdn.microsoft.com/en-us/library/yh598w02%28v=VS.80%29.aspx)编写连接的创建和打开， 这将确保在出现异常时正确关闭和处置您的连接对象。
所以，假设你需要加载一个客户数据表，你可以写这样的东西

```
using(SqlConnection cn = dbconnection())
{
    string sqlText = "SELECT * FROM Customers ORDER BY CustomerName";
    SqlCommand cmd = new SqlCommand(sqlText, con);
    DataTable dtCustomers = new DataTable();
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    da.Fill(dtCustomers);
    // Do what you want with the datatable (bind to a grid, return to do more processing...
} 
```

这将使池中的连接数保持在限制范围内，并且您的程序将在连接池方面正确运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:28:59.890

更多参考：[ADO.NET 连接池](http://www.codeproject.com/Articles/17768/ADO-NET-Connection-Pooling-at-a-Glance)

每个连接池都与一个不同的连接字符串相关联，而且它也是特定于应用程序的。

首次打开连接时，会根据精确匹配算法创建连接池，该算法将池与连接中的连接字符串相关联。

带有池化相关关键字的示例连接字符串：

```
initial catalog=Northwind; Data Source=localhost; Connection Timeout=30; 
User Id=MYUSER; Password=PASSWORD; Min Pool Size=20; Max Pool Size=200; 
Incr Pool Size=10; Decr Pool Size=5; 
```

这样，新连接会不断添加到池中，直到达到**最大池大小**，之后当 ADO.NET 收到进一步连接的请求时，它会等待**连接超时**时间然后出错。

强烈建议我们在连接达到目的后关闭或处置连接。

只能汇集具有相同配置的连接。

当发生致命错误（例如故障转移）时，池会自动清除。

连接字符串在连接池中起着至关重要的作用。

# c++ - When the instantiation is possible but iheritance is not in C++

> ID：15496840
> 
> 赞同：0
> 
> 时间：2013-03-19T10:23:54.163
> 
> 标签：c++, design-patterns, inheritance, decorator, instantiation

In C++ Decorator Software Design Pattern is appropriate to use when you have a type, which can be instantiated but there is a restriction that don't let you to inherit from that class in order to add some functionality.

My question is: what are the cases in C++ that I can have an instance of a class but cannot inherit from the same class?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:27:43.343

If your C++ compiler is C++11 compatible, you can declare the class to be [`final`](http://en.cppreference.com/w/cpp/language/final) to make a class non-inheritable:

```
class A final
{
}; 
```

* * *

If you don't have access to a compiler supporting the `final` keyword, then you have to make the constructor private and use a static factory method:

```
class A
{
    A() {}

public:
    A createA() { return A(); }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:50:57.400

There's a trick you can use in C++03 to avoid needing a factory:

```
struct Final;

struct FinalHelper {
    friend struct Final;
  private:
    FinalHelper() {}
    ~FinalHelper() {}
};

struct Final : private virtual FinalHelper {
    Final() {}
}; 
```

This doesn't actually prevent someone from using `Final` as a base class, but it does prevent them from constructing or destroying their derived class. The reason is that the most-derived class is responsible for constructing and destroying virtual bases, but the constructor and destructor of `FinalHelper` are not accessible in the most-derived class unless it is `Final`.

Of course this probably has a runtime memory cost (for the virtual base).

Usually such tricks are pointless. C++ relies on programmers reading the documentation, so a built-in `final` mechanism is fine, but you don't want to incur either a runtime cost (for the virtual base) or a usability cost (for the factory function, since the type can only be copy-constructed, which for example affects its use with some container member functions) just to enforce documentation.

So, types should document whether or not they are intended for use as base classes, and users who ignore that documentation only have themselves to blame.

# api - 为 SaaS API 选择什么语言？

> ID：15496841
> 
> 赞同：2
> 
> 时间：2013-03-19T10:23:55.313
> 
> 标签：api, user-interface, programming-languages, saas

我在一个构建了企业 SaaS 解决方案的小型组织中工作。到目前为止，我们的工作流程还没有编程接口。我们正在转向一种模型，该模型允许最终用户以编程方式执行任何可以在 UI 中完成的操作。我正在寻找有关您将用于构建该编程层的语言/框架的建议。

从组织的角度来看，我希望当前的 UI 团队也拥有 API 的所有权。该团队熟悉 PHP、Rails 和 Javascript。我们当前的后端代码是用 Scala 编写的。我倾向于不在 Scala 中开发 API，因为它似乎不是适合这项工作的工具，而且 UI 团队缺乏围绕它的主题专业知识。

从功能的角度来看，大多数 API 将是相当简单的数据库操作 (CRUD)，可能会在顶部应用一些简单的业务逻辑（例如搜索）。

我对使用 Node.js 有点感兴趣，因为团队中的每个人都非常擅长 Javascript。话虽如此，我不只是想跳上半新技术的潮流。因为它是企业软件，所以单元测试框架、可重用性和可扩展性也是重要的考虑因素。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T22:58:10.907

我意识到这个问题是关于技术选项的，但有一个基本问题似乎非常重要：

> 从组织的角度来看，我希望当前的 UI 团队也拥有 API 的所有权。

虽然这听起来是一种合乎逻辑的方法，但除非你的 UI 团队由真正可靠的工程师组成，否则它可能效果不佳。SaaS API 开发可以说是现代软件设计中最具挑战性的方面之一。一个好的 API 会让每个人的生活更轻松，而一个糟糕的 API 会让你的系统崩溃，让你完全不知道为什么。

举个简单的例子，如果你没有以正确的方式解决最终用户的需求，你很可能会在他们身上强加许多[n+1 问题](http://ayende.com/blog/3732/solving-the-select-n-1-problem)（因此，也就是在你身上）。

有很多关于[如何设计优秀 API](https://stackoverflow.com/a/469193/51055)的优秀材料，甚至更多关于设计糟糕 API 的陷阱的资料。一般来说，与我合作过的大多数 UI 开发人员，尤其是那些只熟悉脚本语言的开发人员，都不是我会委托进行 API 设计的人。相反，我会将它们用作客户（在 Scrum 意义上），通过描述最终用户的需求来指导设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T00:49:50.407

我在之前的项目中遇到过类似的情况，我们最终使用了[Esper和我们自己使用](http://esper.codehaus.org/)[ANTLR 3.0](http://www.antlr3.org/)编写的 DSL的组合。我们对使用全功能运行时最大的担忧是对用户代码进行沙箱处理。

也就是说，我认为 Node.JS 将是更容易沙箱的一种，它符合您的需求。也许使用这样的东西：http: [//gf3.github.com/sandbox/](http://gf3.github.com/sandbox/)或查看[Cloud9 的代码](https://github.com/ajaxorg)以了解它们如何保证安全。[我也喜欢 Node.js，您可以使用Ace](https://github.com/ajaxorg/ace)为您的用户提供一个非常漂亮的编辑器。

另请查看这篇文章：[如何在 node.js 沙箱中安全地运行用户提交的脚本？](https://stackoverflow.com/questions/7446729/how-to-run-user-submitted-scripts-securely-in-a-node-js-sandbox)

# icalendar - ICS 文件在收件人原始日历上创建条目，而不是在新订阅的日历上

> ID：15496845
> 
> 赞同：0
> 
> 时间：2013-03-19T10:24:07.213
> 
> 标签：icalendar

我从我的网站上的事件发送自动生成的电子邮件，并希望在电子邮件中创建一个“添加到日历”链接。我创建了一个包含详细信息的 .ics 文件并将其存储在我的服务器上，然后在电子邮件的 html 代码中创建了一个指向它的链接（使用 href）。当您单击电子邮件中的链接时，它会要求收件人订阅日历。我如何创建 ics 文件/代码，以便将其添加到收件人自己的日历而不是新订阅的日历中？我错过了一些明显的东西吗？

这是我做不到的吗？

这是我的 .ics 文件的内容。

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//hacksw/handcal//NONSGML v1.0//EN
BEGIN:VEVENT
DTSTAMP:20130301T191700Z
DTSTART:20130412T190000Z
DTEND:20130412T230000Z
SUMMARY:Beer Festival
END:VEVENT
END:VCALENDAR 
```

任何人都可以帮忙吗？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:22:22.967

这高度依赖于接收方的操作系统和日历客户端。最后你能做的不多。电子邮件中的链接是否以 webcal:// 或 http:// 为前缀？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T09:01:45.883

要将事件添加到用户的日历，您需要使用特制电子邮件“邀请”用户。你不能用 http 做到这一点。您的电子邮件本质上将包含与您当前链接到的相同的 Icalendar，但带有一个 ATTENDEE 元素，指定您要定位其日历的用户。您还需要在 VCALENDAR 和文本/日历电子邮件部分的标题中指定 METHOD:REQUEST。

这一切值得吗？您一次只能邀请一个活动。如果您完美地完成了这一切，您的用户仍需要接受邀请，但在被接受之前，该事件可能会在日历中显示为暂定。需要通过电子邮件将每个更改的事件的修改推送给每个感兴趣的用户。（通过 http 订阅日历可以让您发布事件的“提要”。您只需让日历文件保持最新，所有内容都会自动传播）。

如果您仍然感兴趣，[这个问题](https://stackoverflow.com/questions/24259827/why-are-my-icalendar-invitations-not-processed-by-the-outlook-sniffer)可能会帮助您构建电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:29:34.820

最好使用[iTIP](http://datatracker.ietf.org/doc/rfc5546/) / [iMIP](https://www.rfc-editor.org/rfc/rfc6047)将 .ics 文件附加到电子邮件中，而不是将其托管在您的服务器上。这样，您可以在 iCalendar 对象（PUBLISH 或 REQUEST）中指定 METHOD，并且客户端将知道它应该被导入到收件人日历中。

# javascript - jQuery 错误处理程序抛出未捕获

> ID：15496850
> 
> 赞同：0
> 
> 时间：2013-03-19T10:24:29.533
> 
> 标签：javascript, jquery, exception-handling

所以我有以下失败的ajax查询。ajaxError 被调用并引发异常。但不幸的是，没有捕获到异常。任何想法如何抓住它？

```
try {
  function ajaxError(request, type, message) {
    throw 'ajaxerror ' + type + ' ' + message;
  }

  jQuery.ajax({
      url: 'http://nonexisting-example.com',
      error: ajaxError,
  });
}
catch (error) {
  alert('This: ' + error);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:36:32.200

这是因为 ajax 是异步的，并且当您的 ajaxError 函数实际上被调用时，catch 块已经通过。如果您想捕获在 ajax 调用期间出现的错误，您可以执行以下操作：

```
function ajaxError(request, type, message) {
    try {
      throw 'ajaxerror ' + type + ' ' + message;
    } catch (error) {
      alert('This: ' + error);
    }

  }
  jQuery.ajax({
      url: 'http://nonexisting-example.com',
      error: ajaxError,
  }); 
```

或者您可以应用发布/订阅模式来捕获您的异步错误

# java - 故障安全测试导致声纳

> ID：15496856
> 
> 赞同：15
> 
> 时间：2013-03-19T10:24:49.200
> 
> 标签：java, maven, sonarqube

我刚刚分离了单元测试和集成测试。我想将覆盖结果与 UT 和 IT 分开。

我按照[本教程](https://theholyjava.wordpress.com/2012/02/05/separating-integration-and-unit-tests-with-maven-sonar-failsafe-and-jacoco/)进行操作，并且可以正常工作（感谢[@JohnDobie](https://stackoverflow.com/users/1365383/john-dobie)）。

![声纳覆盖测试结果](../Images/128993d5a3f5d87713fb44b28ba737b8.png)

Sonar 显示单独的代码覆盖率结果和单元测试成功（右上角）。但是我怎样才能在声纳中获得集成测试成功呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-22T10:14:44.900

等待 IT 执行结果的声纳实施（请参阅[@Fabrice](https://stackoverflow.com/users/976155/fabrice-sonar-team) [答案](https://stackoverflow.com/a/15499778/1594933)）。我在[本教程](http://theholyjava.wordpress.com/2012/02/05/separating-integration-and-unit-tests-with-maven-sonar-failsafe-and-jacoco/)中找到了解决方法。这个想法是：

*`... fool Sonar to show test success for both unit and integration tests together by instructing Failsafe to store its test reports to the same directory as Surefire instead of the default failsafe-reports.`*

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <configuration>
        <reportsDirectory>${project.build.directory}/surefire-reports</reportsDirectory>
    </configuration>
</plugin> 
```

结果并不完美，因为所有测试结果都显示在单元测试小部件中。但我真的不想检查 ci 服务器中的 IT 测试结果。我想要一个用于我的项目的一体化仪表板。

![在此处输入图像描述](../Images/59b428e83788e725197d4bb753612040.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T12:39:48.043

IT 执行结果不会在 Sonar 中推送或显示。

这是我们将来可能会添加的内容，但我们首先关注的是覆盖范围，因为这毕竟是最重要的。（执行结果通常通过 CI 服务器上的 CI 软件监控）

# c++ - 尽管有 wakeAll 调用，2 个线程仍然在 QWaitCondition 上等待

> ID：15496857
> 
> 赞同：0
> 
> 时间：2013-03-19T10:24:52.990
> 
> 标签：c++, multithreading, qt, vtk

我已经对一些几何图形进行了迭代生成。我使用VTK进行渲染。每次迭代后，我想显示（渲染）当前进度。我的方法按预期工作，直到最后 2 个线程挂起等待 QWaitCondition。它们被阻止，即使它们在 QWaitCondition 的队列中的状态被唤醒（通过调试器检查）。我怀疑 2 个线程的数量与我的处理器的 4 个内核有某种联系。

简化代码如下。我做错了什么以及如何解决？

```
class Logic
{
    QMutex threadLock, renderLock;
    //SOLUTION: renderLock should be per thread, not global like this!
    QWaitCondition wc;
    bool render;
    ...
}

Logic::Logic()
{
    ...
    renderLock.lock(); //needs to be locked for QWaitCondition
}

void Logic::timerProc()
{
    static int count=0;
    if (render||count>10) //render wanted or not rendered in a while
    {
        threadLock.lock();
        vtkRenderWindow->Render();
        render=false;
        count=0;
        wc.wakeAll();
        threadLock.unlock();
    }
    else
        count++;
}

double Logic::makeMesh(int meshIndex)
{
    while (notFinished)
    {
        ...(calculate g)
        threadLock.lock(); //lock scene
        mesh[meshIndex]->setGeometry(g);
        render=true;
        threadLock.unlock();
        wc.wait(&renderLock); //wait until rendered
    }
    return g.size;
}

void Logic::makeAllMeshes()
{
    vector<QFuture<double>> r;
    for (int i=0; i<meshes.size(); i++)
    {       
        QFuture<double> future = QtConcurrent::run<double>(this, &Logic::makeMesh, i);
        r.push_back(future);
    }

    while(any r is not finished)
        QApplication::processEvents(); //give timer a chance
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T15:02:21.490

您的代码中至少存在一个缺陷。`count`并且`render`属于临界区，这意味着它们需要被保护以防止并发访问。

假设有更多的线程在等待`wc.wait(&renderLock);`。有人在某处执行`wc.wakeAll();`。所有线程都被唤醒。假设至少有一个线程认为`notFinished`是真的（如果您的任何代码有意义，这***一定***是可能的）并返回执行：

```
 threadLock.lock(); //lock scene
    mesh[meshIndex]->setGeometry(g);
    render=true;
    threadLock.unlock();
    wc.wait(&renderLock) <----OOPS... 
```

第二次线程回来时，他没有锁`renderLock`。所以 **Kamil Klimek**是对的：**你在没有持有的 mutex 上调用 wait**。

您应该删除构造函数中的锁定，并在调用条件之前锁定。无论你在哪里锁定`renderlock`，线程都不应该持有`threadlock`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:12:28.687

问题是我每个线程需要一个 QMutex，而不仅仅是一个全局 QMutex。更正后的代码如下。感谢您的帮助 UmNyobe！

```
class Logic
{
    QMutex threadLock;
    QWaitCondition wc;
    bool render;
    ...
}

//nothing in constructor related to threading

void Logic::timerProc()
{
    //count was a debugging workaround and is not needed
    if (render)
    {
        threadLock.lock();
        vtkRenderWindow->Render();
        render=false;
        wc.wakeAll();
        threadLock.unlock();
    }
}

double Logic::makeMesh(int meshIndex)
{
    QMutex renderLock; //fix
    renderLock.lock(); //fix
    while (notFinished)
    {
        ...(calculate g)
        threadLock.lock(); //lock scene
        mesh[meshIndex]->setGeometry(g);
        render=true;
        threadLock.unlock();
        wc.wait(&renderLock); //wait until rendered
    }
    return g.size;
}

void Logic::makeAllMeshes()
{
    vector<QFuture<double>> r;
    for (int i=0; i<meshes.size(); i++)
    {       
        QFuture<double> future = QtConcurrent::run<double>(this, &Logic::makeMesh, i);
        r.push_back(future);
    }

    while(any r is not finished)
        QApplication::processEvents(); //give timer a chance
} 
```

# php - facebook PHP SDK 作为活动发布，而不是发布

> ID：15496861
> 
> 赞同：0
> 
> 时间：2013-03-19T10:25:02.443
> 
> 标签：php, facebook, android-activity, sdk, feed

我希望你能帮助我。

我正在开发一个应用程序，并且我愿意在每次用户使用我的应用程序时发布一个活动（在最近的活动中出现在用户时间轴上）。

虽然，目前，我在下面有这段代码，它只发布了一个正常的链接：

```
if($can_post){ 
$facebook->api('/'.$uid.'/feed', 'post', array(  
'message' => '',  
'name' => 'Name',  
'caption' => 'Caption',
'description' => 'SDesc',
'picture' => 'picture url',
'link' => 'link',
'actions' => array(array('name' => 'catch phrase', 
 'link' => 'http://link'))
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:08:30.967

查看本指南，了解使用 Open Graph API 将“故事”发布到用户的时间线，因此您可能需要[此功能](https://developers.facebook.com/docs/opengraph/getting-started/#setup-app)。他们给出的示例只是一个赞，但可以轻松修改。

请注意，如果您想使用故事，Facebook 将不得不再次批准您的应用程序（请参阅上面链接的页面末尾）。

还值得注意的是，Facebook 还定义了广泛的预定义“[操作](http://developers.facebook.com/docs/opengraph/%20Actions)”来帮助完成此过程，因此最好检查一下您的应用是否属于这些类别之一。

# ios - 在objective-c中延迟方法调用

> ID：15496862
> 
> 赞同：17
> 
> 时间：2013-03-19T10:25:03.653
> 
> 标签：ios, objective-c

我知道这可以通过使用来完成：

```
[self performSelector:@selector(myMethod) withObject:nil afterDelay:3.0] 
```

但是，问题是我只想完成 1 个方法调用。使用此函数，调用将相互堆叠。我想打个电话，如果打另一个电话，第一个电话将被驳回。想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-19T10:40:19.040

一旦方法执行，就无法停止它。

但如果它没有被解雇，你可以取消。你可以做这样的事情

```
//.... your code
[NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(myMethod) object:nil];
[self performSelector:@selector(myMethod) withObject:nil afterDelay:3.0];
//.... your code 
```

这样，只有在`myMethod`没有被触发的情况下，您才能取消先前的执行请求。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-19T10:27:47.687

在 Xcode 的代码片段库中，您可以找到一个名为 GCD：Dispatch After，它看起来像这样：

```
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    <#code to be executed on the main queue after delay#>
}); 
```

很不言自明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-19T10:30:57.393

您应该在其他线程中执行此选择器以避免您要求的堆栈。利用

```
[self performSelector:(SEL) onThread:(NSThread *) withObject:(id) waitUntilDone:(BOOL)]; 
```

在该选择器中，您可以随心所欲地添加延迟。由于此进程将在单独的线程中运行，因此不会因为延迟而停止其他进程

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T10:31:59.500

编辑：现在我知道您只想使用最新的，您可以改用：

```
[self cancelPreviousPerformRequestsWithTarget:self selector:@selector(myMethod) object:nil]; 
```

有关更多信息，请参阅[此链接](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/cancelPreviousPerformRequestsWithTarget%3aselector%3aobject%3a)。

原帖：

您可以只设置一个 BOOL，当它到达该部分时设置为 NO，然后在执行该方法后重置为 YES。

因此，例如，它看起来像：

```
if (boolVal) {
    boolVal = NO;
    [self performSelector:@selector(myMethod) withObject:nil afterDelay:3.0];
} 
```

然后在你的 myMethod 中，有：

```
boolVal = YES; 
```

# activemq - 应用程序级别的 ActiveMQ 重新交付

> ID：15496864
> 
> 赞同：0
> 
> 时间：2013-03-19T10:25:10.300
> 
> 标签：activemq

我使用 ActiveMQ 作为作业调度程序。这意味着一个 master 向 ActiveMQ 发送作业消息，多个 slave 从 ActiveMQ 获取作业消息并处理它们。当 slave 完成一项工作时，它们会将带有 job_id 的消息发送回 ActiveMQ。

然而，奴隶是不可靠的。如果一个slave在一段时间内没有响应，我们可以假设slave宕机，并尝试重新发送发送的job消息。

有没有什么好的想法来实现这种重新交付？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:03:49.960

通常，消费者处理重新传递，以便在消息在代理上显示为飞行中时维护消息顺序。这意味着重新交付仅限于单个消费者，除非该消费者终止。通过这种方式，经纪人不知道重新交付。

在 ActiveMQ v5.7+ 中，您可以选择使用代理端重新传递，可以让代理在延迟后使用重新发送重新传递消息。这是由一个代理插件实现的，该插件通过调度程序重新传递来处理死信处理。当总消息顺序不重要以及消费者之间的吞吐量和负载分布在哪里时，这很有用。通过代理重新传递，未能传递给给定消费者的消息可以立即重新发送。

有关在配置文件中进行设置的示例，请参阅 ActiveMQ[文档。](http://activemq.apache.org/message-redelivery-and-dlq-handling.html)

# linux - 如何配置“少”以显示格式化的降价文件？

> ID：15496865
> 
> 赞同：15
> 
> 时间：2013-03-19T10:25:15.553
> 
> 标签：linux, shell, markdown, gnu, text-processing

我想`less`显示`*.md`带有某种格式的降价文件——就像我知道的那样`less`，用于联机帮助页等。我正在运行 Ubuntu 12.04。

我将*用户定义的过滤器*放入`.lessfilter`：

```
#!/bin/sh
case "$1" in
  *.md)
    fn=/tmp/$1.$$.html
    markdown "$1" | html2txt > $fn  ### LOSES FORMATTING
    cat $fn                         ### TO STDOUT???
    ;;
  *)
  # We don't handle this format
  exit 1
esac
# No further processing by lesspipe necessary
exit 0 
```

所以，主要问题是：

*   我怎样才能传递一些基本的格式信息`less`，而不是丢失它`html2txt`
*   将新内容打印到*stdout*是否正确？或者我可以只写到`*.html`文件磁盘并让`less`处理该 html 在它自己的题外话（看到 html-extension 并对其进行操作？）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T10:59:52.383

看看[潘多克](http://johnmacfarlane.net/pandoc/)。它可以将文件从 markdown 格式转换为 groff 手册页，然后您可以在`man`.

您的`.lessfilter`脚本将是：

```
case "$1" in
  *.md)
    pandoc -s -f markdown -t man "$1" | man -l -
    ;; 
```

或者，使用命令将其转换为 html `markdown`，然后使用`lynx`浏览器查看，但这对我来说效果不太好。

```
case "$1" in
  *.md)
    markdown "$1" | lynx -stdin
    ;; 
```

而且，是的，`lessfilter`脚本必须写入标准输出。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-17T19:05:03.193

Dogbane 的答案很棒，但是如果您使用`groff -T utf8 -man`而不是进行`man -l`格式化，那么粗体、斜体等就会出现。如此处所示：[https](https://stackoverflow.com/a/20197316/2674930) ://stackoverflow.com/a/20197316/2674930 。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-21T02:52:02.960

这不适用于我的 MacOSX 版本（10.10.5 Yosemite）。手册页也没有提到`.lessfilter`。这是我所做的（在阅读 MAN 页面后 - 感谢这个问题的提示和提示）。

我创建了脚本`lessopen.sh`并`lessclose.sh`在我的`~/bin`. 它们分别是：

```
#!/bin/bash

case "$1" in
  *.md)
    pandoc -s -f markdown -t man "$1" | groff -T utf8 -man > /tmp/less.$$
    if [ -s /tmp/less.$$ ]; then
        echo /tmp/less.$$
    else
        rm -f /tmp/less.$$
    fi
    ;;
esac 
```

和

```
#!/bin/sh
rm $2 
```

的返回`lessopen.sh`值是文件名，其内容为`less`en。或者如果没有，则使用原始文件。测试`-s`文件是否不为零大小。`lessclose.sh`清理干净。

然后在我的 ~/.bash_profile 中是：

```
export LESSOPEN="lessopen.sh %s"
export LESSCLOSE="less-close.sh %s %s" 
```

我还必须安装 pandoc - groff 已经存在

```
brew install pandoc 
```

然后简单地说：

```
less README.md 
```

阅读它呈现。

# sql - 在 SQL 中将字符串转换为 DateTime

> ID：15496875
> 
> 赞同：0
> 
> 时间：2013-03-19T10:25:42.337
> 
> 标签：sql, datetime

现在我知道这个问题已经被问过好几次了，我已经回答了几十个答案，但似乎没有什么对我有用。我正在尝试将字符串转换为 SQL 中的日期时间，但出现以下错误：

```
Arithmetic overflow error converting expression to data type datetime. 
```

这是我要运行的查询：

```
SELECT MessageText, 
       CONVERT(datetime,SUBSTRING(MessageText, CHARINDEX('(', MessageText)+1,                   
       CHARINDEX(')', MessageText) - 
       CHARINDEX('(', MessageText)-1)) AS TourTimeStamp, 
       TIMESTAMP
FROM tblMessageLog
WHERE MessageText LIKE 'Tour run timestamp%for tour%has been%'
ORDER BY TIMESTAMP DESC 
```

因此，在 中`MessageText`，有我正在寻找的时间戳（该`TimeStamp`列实际上只是消息日志条目的时间戳......），我可以通过使用子字符串成功获取它。

该子字符串 ( `TourTimeStamp`) 的格式为：`dd/mm/yyy hh:mm:ss`例如`25/02/2012 20:55:13`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:52:40.617

我假设这是 MS SQL Server。

您必须指定格式：试试这个：

```
Select 
  MessageText, 
  CONVERT(
    datetime,
    SUBSTRING(
      MessageText, 
      CHARINDEX('(', MessageText) + 1, 
      CHARINDEX(')', MessageText) - CHARINDEX('(', MessageText) - 1),
    103) 
  AS TourTimeStamp, 
  Timestamp 
FROM 
  tblMessageLog 
WHERE 
  MessageText LIKE 'Tour run timestamp%for tour%has been%' 
ORDER BY TimeStamp DESC 
```

另[请在此处查找支持的格式列表](http://msdn.microsoft.com/pl-pl/library/ms187928%28v=sql.105%29.aspx)。

# sql-server - 将数据从多个源加载到目标

> ID：15496877
> 
> 赞同：1
> 
> 时间：2013-03-19T10:25:44.883
> 
> 标签：sql-server, tsql, ssis

我有一个桌面应用程序，通过它输入数据并在 MS Access DB 中捕获它。该应用程序正被多个用户（在不同位置）使用。这个想法是将特定日期输入的数据下载到 Excel 表中，并将其加载到集中式服务器中，该服务器是一个 MSSQL 服务器实例。即数据（以excel表格的形式）将来自多个位置并保存到服务器中的共享文件夹中，需要将其加载到SQL Server中。MSSQL服务器表中有一个ID列IDENTITY，它是主键列，表中没有其他列包含唯一值。尽管数据来自多个来源，但我们需要维护单个自动更新系列（IDENTITY）。

假设，如果有 2 个来源，Source1：当天输入了 100 条记录。Source2：当天输入了 200 条记录。

当它们被加载到 Destination(SQL Server) 中时，表应该有 300 条记录，ID 列的值从 1 到 300。

此外，第二天，当数据来自源时，Destination 必须从 301 ID 列加载数据。

问题是，可能会有一些更改源数据的请求，这些数据已经加载到中央服务器中。因此，如何将中央服务器中该行的数据更新为 ID 列值在 Source 和 Destination 中将不一样。如前所述，ID 是表中唯一的唯一值列。

请建议一些想法来做到这一点，或者我必须采取不同的方法来完成这项任务。

提前致谢！克里希纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:39:47.540

好的，所以首先我建议.NET 并通过文件流读取器进行操作，将其转储到具有来自不同来源的多个 DataTable 的 DataSet 中的 ADO.NET 的断开连接层。但是......你提到了SSIS，所以我会走那条路。

1.  在 Business Intelligence Development Studio(BIDS) 中创建一个 SSIS 项目。

2.  如果您知道事实上您只是在导入大量 Excel 文件，我会在一个“数据流任务”中创建许多“数据流任务”或许多“源到目标”任务，由您决定。

    一个。就个人而言，我会在数据库中为 excel 文件的每个位置创建表，并将它们的列映射起来。我稍后会解释原因。

    湾。在数据流任务中，选择“Excel Source”作为源文件。通过双击 Excel 源将“新连接”的适当位置

    C。选择一个 ADO 网络目标，将蓝线从 Excel 源拖到此端点。

    d。将您的目标映射为您从 SQL 映射到的表。

    e. 根据需要对每个 Excel 目标重复

3.  将 SSIS 任务设置为通过 SQL Management Studio 从 SQL Server 自动化。请记住，您要连接到集成实例，而不是数据库实例。

4.  好的，现在你有一堆桌子而不是一张大桌子？我这样做是有原因的，因为这些应该是入口点以及确定欺骗和导入时间的逻辑，我会留给另一个表。

5.  我会为逻辑组合和稍后的审计设置另外两个表。

    一个。创建一个类似“Imports”或类似的表，除了添加另外三个列之外，列相同：“ExcelFileLocation”、“DateImported”。创建一个“身份”列作为第一列，并将其作为默认值 (1,1) 的种子，并为其分配主键。

    湾。创建第二个表，如“ImportDupes”或类似表，对列重复上述过程。

    C。在使导入唯一的一个值或一组值的第一个表上创建唯一约束。

    C。在 SQL 中编写一个“程序”，从与 Excel 文件匹配的 MANY 表中插入一个“导入”位置。在许多插入中执行类似于以下的过程：

    ```
    Begin try
       Insert into Imports (datacol1, datacol2, ExcelFileLocation, DateImported) values
       Select datacol1, datacol2, (location of file), getdate()
       From TableExcel1
    End try

    -- if logic breaks unique constraint put it into second table
    Begin Catch
       Insert into ImportDupes (datacol1, datacol2, ExcelFileLocation, DateImported)  values
       Select datacol1, datacol2, (location of file), getdate()
       From TableExcel1
    End Catch

    -- repeat above for EACH excel table

    -- clean up the individual staging tables for the next import cycle for EACH excel table
    truncate TableExcel1 
    ```

    d。自动关闭程序

6.  您现在有两张表，一张用于成功导入，一张用于重复。

我这样做的原因有两个：

1.  很多时候，您需要了解更多细节，而不仅仅是详细信息，例如它来自什么来源，是否重复，如果您对数百万行执行此操作，是否可以轻松对其进行索引？

2.  该模型更易于拆卸和自动化。设置可能需要更多的工作，但如果一个部分中断，您可以通过关闭部分中的代码来查看在哪里并轻松停止一个位置的导入。

# delphi - DBAccess.pas 中的断言失败

> ID：15496878
> 
> 赞同：0
> 
> 时间：2013-03-19T10:25:48.117
> 
> 标签：delphi, delphi-5, devart, odac

我有兴趣将一套软件从 ODAC v5 升级到 v8.2.8。

特别是一个应用程序会导致问题。此应用程序加载一组以 dll 形式实现的辅助应用程序中的一个。

```
LibHandle := LoadLibrary(PChar(dllname));
if LibHandle <> 0 then
begin
  @showForm := GetProcAddress(LibHandle,'ShowMainDllForm');
  if (@showForm <> nil) then
  begin
    try
      ShowForm(Application.Handle, @FGlobalVars, 1); 
```

启动器很好——它有自己的数据库连接，我可以相当愉快地逐步浏览各种 ODAC 单元。

但是，该 dll 在尝试打开游标时立即例外。错误是单元中的断言失败`DBAccess.pas`，从 调用`MemDs.pas`。我已经逐步完成并证明断言失败是正确的； `Assert(FieldDesc is TCRFieldDesc)`正在接收`TFieldDesc`来自`MemDS.CreateFieldDefs()`.

我难住了。一种调用方法（启动器应用程序）工作正常而另一种（dll）总是失败怎么可能？

如果有人在这方面遇到困难，我将不胜感激任何信息，无论听起来多么脆弱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T13:12:47.680

we use the DEVART MySQL, and SQL connectors. I have experienced the exact issue with the MySQL (MyDAC) connection. However, what I found was this: In the DBAccess.pas file, the above code change was already there;

Assert(IsClass(FieldDesc, TCRFieldDesc));

But I was still getting the same Assertion error. I stepped in a little further, and found in the CRFunctions unit, I made the following changes, and now my Server connection works perfectly from a dll file:

```
begin
  if IsLibrary then
    Result := IsClassByName(Obj, AClass)
  else
  //------------------------------------
  // Danny MacNevin : October 3,2013
  // commented out the below line to fix an Assertion Error 
  // using the TMyConnection in a dll file.
  // It was being called from the DBAccess.pas file at line: 7251
  // To put this file back to normal, remove the line I added, and 
  // uncomment the line below...
  //------------------------------------
  //Result := Obj is AClass;
    Result := IsClassByName(Obj, AClass) //Line replaced by Danny
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:27:09.540

我们已经解决了这个问题。您可以下载最新的 ODAC 版本 8.6.12 或修改调用 Assert 的行：

在 TCustomDADataSet.GetFieldType 方法中

```
replace 
  Assert(FieldDesc is TCRFieldDesc);
with
  Assert(IsClass(FieldDesc, TCRFieldDesc)); 
```

# ios - 在 ios 应用程序中构建自定义日历

> ID：15496880
> 
> 赞同：-2
> 
> 时间：2013-03-19T10:25:58.197
> 
> 标签：ios, objective-c, calendar

我必须建立一个像图片中的**日历。**我看到图书馆 eiste`Tapku Library`但与我得到的不同。你有什么建议吗？！

![在此处输入图像描述](../Images/93d8eefd9b4fc32e391eb4b445aaff63.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:38:30.323

使用**`klazuka_Calendar`**：

[https://github.com/klazuka/Kal](https://github.com/klazuka/Kal)

[而且这是所有自定义控件的最佳站点。](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=calendar)

# android - 从实现服务的 UI 显示时，EditText 在横向模式下无法正确显示

> ID：15496881
> 
> 赞同：0
> 
> 时间：2013-03-19T10:26:03.050
> 
> 标签：android, android-edittext, landscape

![在此处输入图像描述](../Images/a5a46880bedff2fdbe8604fde244c673.png)

我有一个锁定手机的应用程序。使用服务实现锁屏用户界面，如果手机被锁定，用户将无法访问手机的其他功能。有一个解锁密码对话框，用于输入密码以解锁手机。

问题在于对话框的编辑文本。在横向模式下，它看起来不正确。edittext 应该变成全屏，底部有软键盘。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:11:59.960

您需要添加 android:imeOptions="flagNoExtractUi" 来防止这种行为。

# soap - Borland C++ Builder 6 中的 SOAP Web 服务客户端

> ID：15496882
> 
> 赞同：1
> 
> 时间：2013-03-19T10:26:03.497
> 
> 标签：soap, c++builder, webservices-client, c++builder-6

下面是在 Borland C++ Builder 6 开发的应用程序中开发 Web 服务客户端的分步尝试。欢迎帮助更正此代码或建议任何其他解决方案（尽管我现在尝试使用开发的 dll C++ 生成器 XE3)。这是我在 Borland 6 C++ Builder 中使用 Soap 的尝试。直到现在我得出的结论是我不能成功，因为 Borland 6 不管理 SOAP 标头（没有 InvokeRegistry.hpp）并且我们发送请求的 SOAP 服务器需要在登录此接口后传递 cookie：

```
 __interface INTERFACE_UUID("{B0F412ED-AC6A-42C3-8730-DD0D9680F16D}") AuthenticationSoap : public IInvokable
    {
    public:
      virtual LoginResult*    Login(const AnsiString username, const AnsiString password) = 0; 
      virtual AuthenticationMode Mode() = 0; 
    };
    typedef DelphiInterface<AuthenticationSoap> _di_AuthenticationSoap; 
```

此登录首先发送一个：

```
 500 Server Internal Error 
```

那么如果我添加这个调用就可以了：

```
 InvRegistry()->RegisterInvokeOptions(__interfaceTypeinfo(AuthenticationSoap), ioDocument); 
```

然后我将用户名传递给 HTTPRIO ：

```
 MyHTTPRIO->HTTPWebNode->UserName = AnsiString("xxx..."); 
```

这个 HTTPRIO 被传递到第二个接口：

```
 __interface INTERFACE_UUID("{1E5B3820-A40E-FD40-326D-95A9F6B7A5F0}") OrganizerWS_1_1Soap : public IInvokable
    {
    public:
    ...
    virtual void            findHorse(const ArrayOfString FEIIDs, const AnsiString Name, const AnsiString SexCode, const bool IsPony, const AnsiString AthleteFEIID, ArrayOfHorseOC& findHorseResult, ArrayOfMessage& Messages) = 0;
    ...
    };
    typedef DelphiInterface<OrganizerWS_1_1Soap> _di_OrganizerWS_1_1Soap;
    _di_OrganizerWS_1_1Soap GetOrganizerWS_1_1Soap(bool useWSDL=false, AnsiString addr="", Soaphttpclient::THTTPRIO* HTTPRIO=0); 
```

但是我们得到一个错误“AuthHeader is missing”，因为我们使用了 Borland 6 的 WSDL 导入器，它不会为标头生成代码，并且标头未在 Invokeregistry.hpp 中定义。所以在我们 HTTPRIO 的“BeforeExecute”中，我们有这个请求：

```
 <?xml version="1.0"?>
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <SOAP-ENV:Body>
        <findHorse xmlns="http://fei.org/">
            <FEIIDs/>
            <Name></Name>
            <SexCode></SexCode>
            <IsPony>false</IsPony>
            <AthleteFEIID>10002254</AthleteFEIID>
            <findHorseResult/>
            <Messages/>
        </findHorse>
    </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

而 Borland XE3 生成的这个请求没问题，并从服务器带来了预期的响应：

```
 <?xml version="1.0"?>
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <SOAP-ENV:Header>
        <NS1:AuthHeader xmlns:NS1="http://fei.org/">
            <UserName xmlns="http://fei.org/">xxx...</UserName>
            <Language xmlns="http://fei.org/">en</Language>
        </NS1:AuthHeader>
    </SOAP-ENV:Header>
    <SOAP-ENV:Body>
        <findHorse xmlns="http://fei.org/">
            <IsPony>false</IsPony>
            <AthleteFEIID>10002254</AthleteFEIID>
        </findHorse>
    </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

所以我先换了

```
 <SOAP-ENV:Body> 
```

经过

```
 <SOAP-ENV:Header><NS1:AuthHeader xmlns:NS1="http://fei.org/"><UserName xmlns="http://fei.org/">xxx...</UserName><Language xmlns="http://fei.org/">en</Language></NS1:AuthHeader></SOAP-ENV:Header><SOAP-ENV:Body> 
```

然后添加选项，例如 "<< xoHolderClass << xoInlineArrays" ：

```
 RemClassRegistry()->RegisterSerializeOptions(__classid(findHorse), (TSerializationOptions() << xoHolderClass << xoInlineArrays)); 
```

在这里，我获得了相同的请求，但服务器的答案是一个 NULL 数组，而用 borland xe3 编写的测试的答案中有三个项目。或者使用其他操作（没有 xo... 选项）我在 delphi 接口析构函数中遇到访问冲突：

```
 __fastcall ~DelphiInterface<T>()
      {
            if (intf != 0) 
            {
              intf->Release();
              intf = 0;
            }
      } 
```

我探索了其他解决方案（例如使用仅在 Delphi 源（无 C++ 源）中可用的 indySOAP，考虑创建 XML 并使用 Indy 组件发送（但预计我会遇到相同的身份验证标头问题？），使用 CAPICOM，或windows SDK？...）但直到现在都没有成功，正如之前所说，我现在尝试使用在 C++ Builder XE3 中开发的 dll： [https ://stackoverflow.com/questions/15485276/embarcadero-c-xe3-dll-imported -in-c-xe3-project-library-loads-but-access-v](https://stackoverflow.com/questions/15485276/embarcadero-c-xe3-dll-imported-in-c-xe3-project-library-loads-but-access-v)

# php - 如何避免使用 include_once

> ID：15496883
> 
> 赞同：0
> 
> 时间：2013-03-19T10:26:03.943
> 
> 标签：php, optimization, include

在 PHP 中，假设我有三个类：

```
database.php
item.php
user.php 
```

类 item 和 user 都有`include("database.php");`连接数据库和执行查询的语句。

说，我有一个页面，我想在其中显示用户信息和项目信息。我必须输入

```
include("item.php");
include("user.php"); 
```

但这当然会给我一个错误，因为我两次包含数据库类。我知道我可以`include_once("database.php");`在 item 和 user 类中使用，但我已经阅读了各种线程，最好不要使用 include 和 require 的 _once 版本。

当您需要在多个位置包含数据库类时，避免在 PHP 代码中使用“_once”的最佳做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:30:14.787

我原以为最好的解决方案是根本不在`include`您的主代码中进行调用。相反，自动加载您的文件，因此仅在需要时才包含它们。

```
spl_autoload_register(function ($class) {
    include 'classes/' . $class . '.php';
}); 
```

现在，如果您的代码得到类似的东西`new database();`并且`database`没有加载该类，则此函数将包含`classes/database.php`. 如果以后再次使用该类，则该类已经被加载，因此不会再次使用自动加载器。

[`spl_autoload_register`](http://www.php.net/manual/en/function.spl-autoload-register.php)有关更多信息，请参阅文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:28:23.137

您可以在主脚本中包含数据库，其中包含其他脚本，但是使用`include_once`和`require_once`是正常的，并且没有任何关键的性能问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T10:30:04.670

我不确定您对 *_once 的基本恐惧，但是...

```
include("database.php");
include("item.php");
include("user.php"); 
```

一种方法是根据需要调用它并从类中删除包含行。

# android - 单击按钮时将屏幕向左移动.. 像 fb

> ID：15496884
> 
> 赞同：0
> 
> 时间：2013-03-19T10:26:05.137
> 
> 标签：android, github

我正在开发一个将屏幕从右向左移动的应用程序。我已经实现了屏幕从左向右的移动，但是我在从右向左移动时遇到了问题。

以下是我的代码，它适用于从左到右

```
ExpandAnimation 

/*  Created by Edward Akoto on 12/31/12.
 *  Email akotoe@aua.ac.ke
 *  Free for modification and distribution
 */

package com.example.hotelmenu;

import android.view.Gravity;
import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.LinearLayout;
import android.widget.FrameLayout.LayoutParams;

public class ExpandAnimation extends TranslateAnimation implements Animation.AnimationListener{

    private LinearLayout slidingLayout;
    int panelWidth;

    public ExpandAnimation(LinearLayout layout, int width, int fromXType, float fromXValue, int toXType,
            float toXValue, int fromYType, float fromYValue, int toYType, float toYValue) {

        super(fromXType, fromXValue, toXType, toXValue, fromYType, fromYValue, toYType, toYValue);

        //Initialize
        slidingLayout = layout;
        panelWidth = width;
        setDuration(400);
        setFillAfter( false );
        setInterpolator(new AccelerateDecelerateInterpolator());
        setAnimationListener(this);
        slidingLayout.startAnimation(this);
    }

    public void onAnimationEnd(Animation arg0) {

        //Create margin and align left
        LayoutParams params = (LayoutParams) slidingLayout.getLayoutParams();
        params.leftMargin = panelWidth;
        params.gravity = Gravity.LEFT;     
        slidingLayout.clearAnimation();
        slidingLayout.setLayoutParams(params);
        slidingLayout.requestLayout();

    }

    public void onAnimationRepeat(Animation arg0) {

    }

    public void onAnimationStart(Animation arg0) {

    }

}

CollapseAnimation 

/*  Created by Edward Akoto on 12/31/12.
 *  Email akotoe@aua.ac.ke
 *  Free for modification and distribution
 */

package com.example.hotelmenu;

import android.view.animation.AccelerateDecelerateInterpolator;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.LinearLayout;
import android.widget.FrameLayout.LayoutParams;

public class CollapseAnimation extends TranslateAnimation implements TranslateAnimation.AnimationListener{

    private LinearLayout slidingLayout;
    int panelWidth;

    public CollapseAnimation(LinearLayout layout, int width, int fromXType, float fromXValue, int toXType,
            float toXValue, int fromYType, float fromYValue, int toYType, float toYValue) {

        super(fromXType, fromXValue, toXType, toXValue, fromYType, fromYValue, toYType, toYValue);

        //Initialize
        slidingLayout = layout;
        panelWidth = width;
        setDuration(400);
        setFillAfter( false );
        setInterpolator(new AccelerateDecelerateInterpolator());
        setAnimationListener(this);

        //Clear left and right margins
        LayoutParams params = (LayoutParams) slidingLayout.getLayoutParams();
        params.rightMargin = 0;
        params.leftMargin = 0;
        slidingLayout.setLayoutParams(params);
        slidingLayout.requestLayout();       
        slidingLayout.startAnimation(this);

    }
    public void onAnimationEnd(Animation animation) {

    }

    public void onAnimationRepeat(Animation animation) {

    }

    public void onAnimationStart(Animation animation) {

    }

}

private LinearLayout slidingPanel;
    private boolean isExpanded;
    private DisplayMetrics metrics; 
    private LinearLayout menuPanel;
    private int panelWidth;
    FrameLayout.LayoutParams menuPanelParameters;
    FrameLayout.LayoutParams slidingPanelParameters;
    LinearLayout.LayoutParams headerPanelParameters ;
    LinearLayout.LayoutParams listViewParameters;
    FrameLayout mainframe;
metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        panelWidth = 200;//(int) ((metrics.widthPixels)*0.5);

menuPanel = (LinearLayout) findViewById(R.id.menuPanel);
        menuPanelParameters = (FrameLayout.LayoutParams) menuPanel.getLayoutParams();
        menuPanelParameters.width = panelWidth;
        menuPanel.setLayoutParams(menuPanelParameters);

        slidingPanel = (LinearLayout) findViewById(R.id.slidingPanel);
        slidingPanelParameters = (FrameLayout.LayoutParams) slidingPanel.getLayoutParams();
        slidingPanelParameters.width = metrics.widthPixels;
        slidingPanel.setLayoutParams(slidingPanelParameters);

        mainframe = (FrameLayout) findViewById(R.id.mainframe);
        listViewParameters = (LinearLayout.LayoutParams) mainframe.getLayoutParams();
        listViewParameters.width = metrics.widthPixels;
        mainframe.setLayoutParams(listViewParameters);

if(!isExpanded){
                isExpanded = true;                                              
                menuPanel.setVisibility(View.VISIBLE);
                //Expand
                new ExpandAnimation(slidingPanel, panelWidth,
                Animation.RELATIVE_TO_SELF, 0.0f,
                Animation.RELATIVE_TO_SELF, 0.0f, 0, 0.0f, 0, 0.0f);                                        
            }else{
                isExpanded = false;
                menuPanel.setVisibility(View.GONE);
                //Collapse
                new CollapseAnimation(slidingPanel,panelWidth,
                TranslateAnimation.RELATIVE_TO_SELF, 0.0f,
                TranslateAnimation.RELATIVE_TO_SELF, 0.0f, 0, 0.0f, 0, 0.0f);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:37:49.360

在 github 上试试这个代码。

[https://github.com/gitgrimbo/android-sliding-menu-demo/](https://github.com/gitgrimbo/android-sliding-menu-demo/)

这是您想要的一个很好的例子

# javascript - 如何在 EL 表达式中使用 js 创建移动文本

> ID：15496887
> 
> 赞同：0
> 
> 时间：2013-03-19T10:26:08.553
> 
> 标签：javascript, jsf

我有一个包含大量文本的表格，我想使用 JavaScript 在 EL 表达式中创建移动文本。

这是表格的一部分：

```
<o:dataTable id="productTable" value="#{produkty.produkty}" var="p">
    <o:column header="Opis" id="opisCol1" style="width: 350px;"
            sortingExpression="#{p.product.opis}">
    <f:facet name="subHeader">
         <o:inputTextFilter />
    </f:facet>
    <h:outputText value="#{p.product.description}"> <- in this place I would use js
    </h:outputText>
</o:datatable> 
```

文本必须水平移动，如证券交易所的报价或新闻屏幕底部的信息栏。

# service - 在没有提升的情况下启动 Windows 服务

> ID：15496893
> 
> 赞同：6
> 
> 时间：2013-03-19T10:26:32.580
> 
> 标签：service, elevated-privileges

我有一个配置为作为“本地服务”登录的 Windows 服务“Service1”。

我构建了一个控制台应用程序以编程方式启动它。

```
 var service = new ServiceController("Service1");
        service.Start(); 
```

我知道，如果我从管理员命令提示符运行 ConsoleApplication1，它会顺利启动。

如果我在没有海拔的情况下运行它，我会得到：

> 发生系统错误 5。
> 
> 访问被拒绝。

但是，**我需要在没有提升的情况下启动它**。

是否有可能，或者我必须改变实现这一目标的方式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-19T17:58:26.867

您可以为服务本身设置 ACL 以允许这样做。SetACL.exe[实用程序](http://helgeklein.com/setacl/documentation/command-line-version-setacl-exe/)使这（有点）简单；例如：

```
SetACL.exe -on "MyService" -ot srv -actn ace -ace "n:S-1-5-32-545;p:start_stop" 
```

这允许用户组 (S-1-5-32-545) 的成员启动和停止 MyService。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T09:39:37.217

我关注了 torak[链接](http://msmvps.com/blogs/erikr/archive/2007/09/26/set-permissions-on-a-specific-service-windows.aspx)，我了解有关服务权利的关键区别：

*   服务拥有与“运行身份”用户相关的权利
*   服务具有不同的权限来控制服务（即启动/停止它）

所以，要启动服务我需要修改服务控制权限。

好吧，我已经完成了一个名为 Service1 的 Windows 服务，并使用 WIX 制作了一个安装程序。在安装过程中，我调用[ServiceInstall](http://wix.sourceforge.net/manual-wix2/wix_xsd_serviceinstall.htm)

```
 <ServiceInstall Id="ServiceInstaller" Type="ownProcess" Vital="yes"
       Name="Service1" DisplayName="Service1"
       Description="Service1 description"Start="demand"
       Account="NT AUTHORITY\LocalService"
       ErrorControl="ignore" Interactive="no" >
      </ServiceInstall> 
```

然后我有一个名为 TestProgram 的客户端程序，我尝试在其中启动服务：

```
var service = new ServiceController("Service1");
service.Start(); 
```

显然它不会在没有提升 TestProgram （在普通用户帐户下运行）的情况下启动服务。

[所以解决方案是使用PermissionEx](http://wix.sourceforge.net/manual-wix3/util_xsd_permissionex.htm)标签指示 WIX 允许用户组的成员（例如）启动/停止服务：

```
<util:PermissionEx User="Users" ServiceStart="yes" ServiceStop="yes">
</util:PermissionEx> 
```

希望这可以帮助。谢谢你们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-02-28T16:20:09.000

如果我可以加 2 美分，这是我的解决方案，不需要任何复杂的 App.Manifest 或 Windows 服务修改。

这个概念只是通过一个提升的过程来调用“ **Net Start ”：**

```
public string StartServiceViaProcess(string param_strServiceName)
    {
        try
        {
            const int ERROR_CANCELLED = 1223; //The operation was canceled by the user.

            Process process = new Process();
            ProcessStartInfo startInfo = new ProcessStartInfo();
            startInfo.WindowStyle = ProcessWindowStyle.Hidden;
            startInfo.FileName = "cmd.exe";
            startInfo.Verb = "runas";
            startInfo.UseShellExecute = true;
            startInfo.Arguments = "/C net start " + param_strServiceName;
            process.StartInfo = startInfo;
            try
            {
                Process.Start(startInfo);
            }
            catch (Win32Exception ex)
            {
                if (ex.NativeErrorCode == ERROR_CANCELLED)
                    return "L'usager a annulé la demande d'exécution avec privilège.";
                else
                    throw;
            }
        }
        catch (Exception ex)
        {
            return ex.SI_ConvertToString();
        }
        return "";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:35:57.780

我认为您做不到 - 我的理解是，这是出于安全原因。允许恶意软件自动提升自身将是有问题的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-06T10:37:53.083

[这](http://woshub.com/set-permissions-on-windows-service/)是我关注并解决了我的问题的链接。

> **如何授予非管理员管理服务的权限**
> 
> 默认情况下，没有系统管理员权限的普通用户无法管理 Windows 服务。这意味着他们无法停止、启动或更改此类服务的设置或权限。在某些情况下，用户必须具有重新启动或管理某些服务的权限。在本文中，我们将考虑一些管理 Windows 服务权限的方法。特别是，我们将展示如何授予没有管理权限的标准用户启动和停止特定服务的权限......
> 
> Windows 中没有简单方便的集成工具来管理服务权限。我们将考虑一些方法来授予用户管理服务的权限......

# php - PHP 中的 MySQL 存储过程及示例

> ID：15496899
> 
> 赞同：-2
> 
> 时间：2013-03-19T10:26:46.353
> 
> 标签：php, mysql, stored-procedures, mysqli

有人可以帮我在 MySQL 中创建存储过程并从 PHP 调用它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:10:38.913

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `sp_user_login` $$
CREATE DEFINER=`root`@`%` PROCEDURE `sp_user_login`(
  IN loc_username VARCHAR(255),
  IN loc_password VARCHAR(255)
)
BEGIN

  SELECT user_id,
         user_name,
         user_emailid,
         user_profileimage,
         last_update
    FROM tbl_user
   WHERE user_name = loc_username
     AND password = loc_password
     AND status = 1;

END $$

DELIMITER ; 
```

并通过 mysql_connection 规范和调用

```
$loginCheck="call sp_user_login('".$username."','".$password."');"; 
```

它将返回过程的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:49:41.447

您可以在 MySQL 中非常轻松地创建过程 -- 语法：-

```
`//add a delimiter; 
Create Procedure <procedure_name>(parameters "IN(for using inside the procedure)" and "OUT(for returning)")
Begin
   // doing some thing.
end;
//end delimiter;`

Call Procedure - `CALL <procedure_name>(parameter1, parameter2, ....)`

Example -

`DELIMITER //  
CREATE PROCEDURE EmployeeName(IN EId INT)  
BEGIN  
    SELECT EmpName FROM Employee WHERE EmpId = EID;  
END//` 
```

打电话-假设我想知道员工ID“10”的姓名，所以-

`CALL EmployeeName(10);`

# javascript - 如何使用 jQuery 替换类

> ID：15496903
> 
> 赞同：3
> 
> 时间：2013-03-19T10:26:53.467
> 
> 标签：javascript, jquery

大家好。我正在使用 jQuery，我想替换`DIV`使用 jQuery 的类。我知道我可以像这样替换类：

```
$('#div').removeClass('first').addClass('second'); 
```

但是，只有当我知道第一个类名时，我才能使用它。就我而言，我不知道第一个类名，因为它是动态的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T10:27:51.030

您可以使用[attr()](http://api.jquery.com/attr/)设置类，它会覆盖以前的类

```
$('#div').attr('class', 'second'); 
```

您可以不带参数调用 removeClass

```
 $('#div').removeClass().addClass('second'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T10:28:07.863

当您调用不带参数的 removeClass 时，这将删除所有类

```
$("#div").removeClass().addClass('second'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:32:53.473

尝试这个：

```
$('#div').removeAttr('class').attr('class', 'second'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T10:39:05.690

toggleClass() 方法在从选定元素中添加和删除一个或多个类名之间切换。

此方法检查指定类名的每个元素。如果缺少类名，则会添加类名，如果已设置则将其删除 - 这会产生切换效果。

```
$("#div").toggleClass(second,function(index,first),TRUE) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T10:28:46.157

尝试这个 ：

```
$("#div").removeAttr('class');
$('#div').attr('class','second'); 
```

第一行将删除 calss 属性，第二行将添加一个名为 second 的类

# php - 自动双倍空格文本区域

> ID：15496911
> 
> 赞同：1
> 
> 时间：2013-03-19T10:27:23.497
> 
> 标签：php, html, nl2br

我有一个文本区域，允许用户输入多行文本。我想强制文本框中的所有内容自动双倍行距。我正在使用 nl2br 输出文本并显示间距。

**假设用户类型：**

红色
蓝色
绿色

**我希望 nl2br 函数输出**

红色的

蓝色的

绿色

我还需要能够处理双倍空格（即，如果用户已经输入了双倍空格，我不想要更多。

关于如何制作这个的任何想法？如果可能，我宁愿在允许用户输入文本的页面中执行此操作。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:29:23.160

使用[str_replace()](http://php.net/manual/en/function.str-replace.php)和[PHP_EOL](http://php.net/manual/en/reserved.constants.php)：

```
$str = 'red
blue
green';

$str = str_replace(PHP_EOL, '<br><br>', $str);
echo $str; 
```

**编辑：** 使用正则表达式：

```
$str = 'red

blue

green
blue';

$str = preg_replace(array('/(\r?\n)+/', '/\r?\n/'),array(PHP_EOL,'<br><br>'), $str);
echo $str; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:30:14.820

```
$str = nl2br(str_replace(PHP_EOL, '<br><br>', $str));
echo $str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:34:09.433

```
$str = str_replace('<br />', '<br /><br />', nl2br($str)); 
```

这将使`<br />`标签脱离所有行尾，然后将它们加倍。

# node.js - 如何使用 node.js 实现安全的 REST API

> ID：15496915
> 
> 赞同：211
> 
> 时间：2013-03-19T10:27:29.483
> 
> 标签：node.js, rest, express, passport.js

我开始用 node.js、express 和 mongodb 计划一个 REST API。API 为网站（公共和私人区域）提供数据，以后可能还会为移动应用程序提供数据。前端将使用 AngularJS 开发。

几天来，我阅读了很多关于保护 REST API 的内容，但我没有找到最终的解决方案。据我了解是使用HTTPS来提供基本的安全性。但是我如何在这些用例中保护 API：

*   仅允许网站/应用程序的访问者/用户获取网站/应用程序公共区域的数据

*   仅允许经过身份验证和授权的用户获取私有区域的数据（并且仅允许用户授予权限的数据）

目前我考虑只允许具有活动会话的用户使用 API。为了授权用户，我将使用护照并获得许可，我需要为自己实现一些东西。一切都在 HTTPS 之上。

有人可以提供一些最佳实践或经验吗？我的“架构”有缺陷吗？

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-03-19T13:25:59.530

我遇到了你描述的同样的问题。我正在构建的网站可以通过手机和浏览器访问，因此我需要一个 api 来允许用户注册、登录和执行某些特定任务。此外，我需要支持可伸缩性，即在不同的进程/机器上运行相同的代码。

因为用户可以创建资源（又名 POST/PUT 操作），所以您需要保护您的 api。您可以使用 oauth，也可以构建自己的解决方案，但请记住，如果密码真的很容易发现，所有解决方案都可能被破解。基本思想是使用用户名、密码和令牌（也称为 apitoken）对用户进行身份验证。这个 apitoken 可以使用[node-uuid](https://github.com/broofa/node-uuid)生成，密码可以使用[pbkdf2散列](http://nodejs.org/api/crypto.html#crypto_crypto_pbkdf2_password_salt_iterations_keylen_callback)

然后，您需要将会话保存在某处。如果您将其保存在内存中的普通对象中，如果您终止服务器并再次重新启动它，则会话将被破坏。此外，这是不可扩展的。如果您使用 haproxy 在机器之间进行负载平衡，或者您只是使用工作人员，则此会话状态将存储在单个进程中，因此如果同一用户被重定向到另一个进程/机器，则需要再次进行身份验证。因此，您需要将会话存储在一个公共位置。这通常使用 redis 完成。

当用户通过身份验证（用户名+密码+apitoken）时，会为会话生成另一个令牌，即 accesstoken。同样，使用 node-uuid。向用户发送访问令牌和用户 ID。userid（key）和accesstoken（value）存储在redis中，有过期时间，比如1h。

现在，每次用户使用 REST API 执行任何操作时，都需要发送用户 ID 和访问令牌。

如果您允许用户使用 rest api 注册，您需要创建一个带有 admin apitoken 的管理员帐户并将其存储在移动应用程序中（加密用户名+密码+apitoken），因为新用户不会有 apitoken他们注册了。

网络也使用这个 api，但你不需要使用 apitokens。您可以将 express 与 redis 存储一起使用，或者使用上述相同的技术，但绕过 apitoken 检查并在 cookie 中向用户返回 userid+accesstoken。

如果您有私人区域，则在进行身份验证时将用户名与允许的用户进行比较。您还可以将角色应用于用户。

概括：

![序列图](../Images/c8285dadb1b96035d6e9f11d1f1d9ce4.png)

没有 apitoken 的替代方法是使用 HTTPS 并在 Authorization 标头中发送用户名和密码，并将用户名缓存在 redis 中。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-05-28T10:38:47.510

根据（我希望如此）接受的答案，我想将此代码作为所提出问题的结构解决方案提供。（您可以非常轻松地自定义它）。

```
// ------------------------------------------------------
// server.js 

// .......................................................
// requires
var fs = require('fs');
var express = require('express'); 
var myBusinessLogic = require('../businessLogic/businessLogic.js');

// .......................................................
// security options

/*
1\. Generate a self-signed certificate-key pair
openssl req -newkey rsa:2048 -new -nodes -x509 -days 3650 -keyout key.pem -out certificate.pem

2\. Import them to a keystore (some programs use a keystore)
keytool -importcert -file certificate.pem -keystore my.keystore
*/

var securityOptions = {
    key: fs.readFileSync('key.pem'),
    cert: fs.readFileSync('certificate.pem'),
    requestCert: true
};

// .......................................................
// create the secure server (HTTPS)

var app = express();
var secureServer = require('https').createServer(securityOptions, app);

// ------------------------------------------------------
// helper functions for auth

// .............................................
// true if req == GET /login 

function isGETLogin (req) {
    if (req.path != "/login") { return false; }
    if ( req.method != "GET" ) { return false; }
    return true;
} // ()

// .............................................
// your auth policy  here:
// true if req does have permissions
// (you may check here permissions and roles 
//  allowed to access the REST action depending
//  on the URI being accessed)

function reqHasPermission (req) {
    // decode req.accessToken, extract 
    // supposed fields there: userId:roleId:expiryTime
    // and check them

    // for the moment we do a very rigorous check
    if (req.headers.accessToken != "you-are-welcome") {
        return false;
    }
    return true;
} // ()

// ------------------------------------------------------
// install a function to transparently perform the auth check
// of incoming request, BEFORE they are actually invoked

app.use (function(req, res, next) {
    if (! isGETLogin (req) ) {
        if (! reqHasPermission (req) ){
            res.writeHead(401);  // unauthorized
            res.end();
            return; // don't call next()
        }
    } else {
        console.log (" * is a login request ");
    }
    next(); // continue processing the request
});

// ------------------------------------------------------
// copy everything in the req body to req.body

app.use (function(req, res, next) {
    var data='';
    req.setEncoding('utf8');
    req.on('data', function(chunk) { 
       data += chunk;
    });
    req.on('end', function() {
        req.body = data;
        next(); 
    });
});

// ------------------------------------------------------
// REST requests
// ------------------------------------------------------

// .......................................................
// authenticating method
// GET /login?user=xxx&password=yyy

app.get('/login', function(req, res){
    var user = req.query.user;
    var password = req.query.password;

    // rigorous auth check of user-passwrod
    if (user != "foobar" || password != "1234") {
        res.writeHead(403);  // forbidden
    } else {
        // OK: create an access token with fields user, role and expiry time, hash it
        // and put it on a response header field
        res.setHeader ('accessToken', "you-are-welcome");
        res.writeHead(200); 
    }
    res.end();
});

// .......................................................
// "regular" methods (just an example)
// newBook()
// PUT /book

app.put('/book', function (req,res){
    var bookData = JSON.parse (req.body);

    myBusinessLogic.newBook(bookData, function (err) {
        if (err) {
            res.writeHead(409);
            res.end();
            return;
        }
        // no error:
        res.writeHead(200);
        res.end();
    });
});

// .......................................................
// "main()"

secureServer.listen (8081); 
```

这个服务器可以用 curl 测试：

```
echo "----   first: do login "
curl -v "https://localhost:8081/login?user=foobar&password=1234" --cacert certificate.pem

# now, in a real case, you should copy the accessToken received before, in the following request

echo "----  new book"
curl -X POST  -d '{"id": "12341324", "author": "Herman Melville", "title": "Moby-Dick"}' "https://localhost:8081/book" --cacert certificate.pem --header "accessToken: you-are-welcome" 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-02T04:25:10.257

我刚刚完成了一个示例应用程序，它以非常基本但清晰的方式执行此操作。它使用 mongoose 和 mongodb 来存储用户和护照以进行身份​​验证管理。

[https://github.com/Khelldar/Angular-Express-Train-Seed](https://github.com/Khelldar/Angular-Express-Train-Seed)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-19T11:34:54.437

在 SO 上有很多关于 REST 身份验证模式的问题。这些与您的问题最相关：

*   [保护我的 Node.js 应用程序的 REST API？](https://stackoverflow.com/questions/9119648/securing-my-node-js-apps-rest-api)
*   [RESTful 身份验证](https://stackoverflow.com/questions/319530/restful-authentication)

基本上，您需要在使用 API 密钥（最不安全，因为密钥可能被未经授权的用户发现）、应用程序密钥和令牌组合（中等）或完整的 OAuth 实现（最安全）之间进行选择。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-10-15T18:05:52.203

如果您想保护您的应用程序，***那么您绝对应该从使用 HTTPS 而不是 HTTP 开始***，这可以确保在您和用户之间创建安全通道，这将防止嗅探来回发送给用户的数据并有助于保留数据交换机密。

**您可以使用 JWTs (JSON Web Tokens) 来保护 RESTful API**，与服务器端会话相比，这有很多好处，好处主要是：

1- 更具可扩展性，因为您的 API 服务器不必为每个用户维护会话（当您有很多会话时，这可能是一个很大的负担）

2- JWT 是自包含的，并且具有定义用户角色的声明，例如，他可以访问和在日期和到期日发布的内容（在此之后 JWT 将无效）

3-更容易跨负载均衡器处理，如果您有多个 API 服务器，因为您不必共享会话数据，也不必配置服务器以将会话路由到同一服务器，只要带有 JWT 的请求命中任何服务器，就可以对其进行身份验证&授权

4-减少对数据库的压力，并且您不必为每个请求不断存储和检索会话 ID 和数据

5-如果您使用强密钥签署 JWT，则 JWT 不会被篡改，因此您可以信任随请求发送的 JWT 中的声明，而无需检查用户会话以及他是否被授权，您只需检查 JWT 就可以知道该用户可以做什么和做什么。

许多库提供了在大多数编程语言中创建和验证 JWT 的简单方法，例如：在 node.js 中，最流行的一种是[jsonwebtoken](https://www.npmjs.com/package/jsonwebtoken)

由于 REST API 通常旨在保持服务器无状态，因此 JWT 与该概念更兼容，因为每个请求都使用自包含的授权令牌**(JWT)**发送，与使服务器是有状态的，因此它可以记住用户及其角色，但是，会话也被广泛使用并具有其优点，您可以根据需要进行搜索。

需要注意的一件重要事情是，您必须使用 HTTPS 将 JWT 安全地交付给客户端并将其保存在安全的地方（例如本地存储中）。

[您可以从此链接](https://jwt.io/)了解有关 JWT的更多信息

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-19T12:57:01.947

如果您想拥有一个完全锁定的 Web 应用程序区域，只能由您公司的管理员访问，那么 SSL 授权可能适合您。它将确保没有人可以连接到服务器实例，除非他们的浏览器中安装了授权证书。上周我写了一篇关于如何设置服务器的文章：[文章](https://gist.github.com/ExxKA/5169211)

这是您会发现的最安全的设置之一，因为不涉及用户名/密码，因此除非您的用户之一将密钥文件交给潜在的黑客，否则任何人都无法获得访问权限。

# jquery - jQuery：关闭子对话框窗口

> ID：15496919
> 
> 赞同：0
> 
> 时间：2013-03-19T10:27:37.000
> 
> 标签：jquery, dialog

我有一个带有一些选项卡、动态数据等的 jquery 对话框窗口。其中有一个按钮，它调用另一个对话框。该对话框有两个用于保存和关闭的按钮...如果我单击关闭，它会执行应该执行的操作。但是如果我点击保存，内容会被保存并关闭对话框，但父对话框也会关闭，这是我不想要的。这通常是如何解决的？子对话框的代码在这里：

```
$('<div id="popis" style="display:none">').dialog({
        title: 'Popis rizika',
        height:300,
        buttons:{
                'Uložit': function(){
                    $("#popisRizika").submit();
                    $(this).remove();
                },

    'Zrušit': function(){
                $( this ).dialog( "close" );
            },                  
    },
    open: function(event, ui){
        $(this).load('rizika_popis.php?stupen='+<?echo $IdStStupen;?>+'&index='+i);
    },
    close: function(ev, ui){
            $(this).remove();
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:33:20.667

那是因为您在`$("#popisRizika").submit();`单击保存时提交表单..这会使整个页面重新加载，从而导致父对话框和子对话框也关闭..您在这里需要的是通过[$.ajax](http://api.jquery.com/jQuery.ajax/)、[$. post](http://api.jquery.com/jQuery.post/)或 $.get.. 这不会重新加载页面，因此您可以在成功回调后手动关闭子对话框

像这样，使用**$.post**：

```
 'Uložit': function(){
                $.post(url,$("#popisRizika").serialize(),function(result){
                   $( this ).dialog( "close" );
                })
            }, 
```

# android - 如何在 BroadCastReceiver 的 onReceive 方法中的 TextView 中设置文本？

> ID：15496926
> 
> 赞同：1
> 
> 时间：2013-03-19T10:27:59.077
> 
> 标签：android

基本上我想在 BroadCaseReceiver 中执行 TextView 类的 setText() 功能。但我无法实现这一点：我不知道

为什么（`context.findviewById()`不起作用），因为`findViewById()`它是 Activity 类的一部分并且`context.toString()`显示了 Activity（基本活动）类的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:58:43.777

以下答案的链接在这里：[与其他片段通信](http://developer.android.com/training/basics/fragments/communicating.html)

要允许 Fragment 与其 Activity 进行通信，您可以在 Fragment 类中定义一个接口并在 Activity 中实现它。Fragment 在其 onAttach() 生命周期方法期间捕获接口实现，然后可以调用接口方法以与 Activity 通信。

以下是 Fragment 到 Activity 通信的示例：

公共类 HeadlinesFragment 扩展 ListFragment { OnHeadlineSelectedListener mCallback;

```
// Container Activity must implement this interface
public interface OnHeadlineSelectedListener {
    public void onArticleSelected(int position);
}

@Override
public void onAttach(Activity activity) {
    super.onAttach(activity);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        mCallback = (OnHeadlineSelectedListener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

... 
```

现在片段可以通过使用 OnHeadlineSelectedListener 接口的 mCallback 实例调用 onArticleSelected() 方法（或接口中的其他方法）将消息传递给 Activity。

例如，当用户单击列表项时，将调用片段中的以下方法。片段使用回调接口将事件传递给父活动。

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // Send the event to the host activity
    mCallback.onArticleSelected(position);
} 
```

实现接口 为了从片段接收​​事件回调，承载它的活动必须实现片段类中定义的接口。

例如，以下活动实现了上述示例中的接口。

公共静态类 MainActivity 扩展 Activity 实现 HeadlinesFragment.OnHeadlineSelectedListener{ ...

```
public void onArticleSelected(int position) {
    // The user selected the headline of an article from the HeadlinesFragment
    // Do something here to display that article
} 
```

向 Fragment 传递消息宿主 Activity 可以通过使用 findFragmentById() 捕获 Fragment 实例来向 Fragment 传递消息，然后直接调用 Fragment 的公共方法。

例如，假设上面显示的活动可能包含另一个片段，用于显示上述回调方法中返回的数据指定的项目。在这种情况下，活动可以将回调方法中接收到的信息传递给将显示该项目的另一个片段：

公共静态类 MainActivity 扩展 Activity 实现 HeadlinesFragment.OnHeadlineSelectedListener{ ...

```
public void onArticleSelected(int position) {
    // The user selected the headline of an article from the HeadlinesFragment
    // Do something here to display that article

    ArticleFragment articleFrag = (ArticleFragment)
            getSupportFragmentManager().findFragmentById(R.id.article_fragment);

    if (articleFrag != null) {
        // If article frag is available, we're in two-pane layout...

        // Call a method in the ArticleFragment to update its content
        articleFrag.updateArticleView(position);
    } else {
        // Otherwise, we're in the one-pane layout and must swap frags...

        // Create fragment and give it an argument for the selected article
        ArticleFragment newFragment = new ArticleFragment();
        Bundle args = new Bundle();
        args.putInt(ArticleFragment.ARG_POSITION, position);
        newFragment.setArguments(args);

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

        // Replace whatever is in the fragment_container view with this fragment,
        // and add the transaction to the back stack so the user can navigate back
        transaction.replace(R.id.fragment_container, newFragment);
        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:32:08.327

除非 BroadcastReceiver 在 Activity 的上下文中以编程方式启动，例如 Activity.onCreate()。对于一个普通的 BroadcastReceiver，从它访问一个像 TextView 这样的 UI 元素是很奇怪的。您只能使用 Activity 中的 UI 内容。也许您应该查看您尝试应用的解决方案。即使你设法做这样的事情，它也会有错误的设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:36:42.627

```
public class MyReceiver extends BroadcastReceiver {

private MyActivity myActivity;

public MyReceiver(MyActivity myActivity) {
    this.myActivity= myActivity;
}

@Override
public void onReceive(Context context, Intent intent) {

    Log.d("", "Onrecieve ready to call");
            if(this.myActivity!=null)
            {
                this.myActivity.update();
            }
            // make update method is in your activity.
            // call function of your activity and change UI.
}
} 
```

# java - 想要创建“带有 2 个单独 web 视图的 2 个选项卡”

> ID：15496927
> 
> 赞同：1
> 
> 时间：2013-03-19T10:27:59.783
> 
> 标签：java, android, webview, tabs, android-webview

我想创建一个由两个选项卡组成的应用程序，每个选项卡都运行自己的 web 视图。我可以创建标签，但不能管理他们的 webviews。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); // Resource object to get Drawables
    TabHost tabHost = getTabHost();  // The activity TabHost
    TabHost.TabSpec spec;  // Resusable TabSpec for each tab
    Intent intent;  // Reusable Intent for each tab

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, fbActivity.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("fb").setIndicator("fb",
                      res.getDrawable(R.drawable.ic_tab_fb))
                  .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, google.class);
    spec = tabHost.newTabSpec("google").setIndicator("google",
                      res.getDrawable(R.drawable.ic_tab_google))
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:39:32.420

首先创建tabactivity类

```
public class tabviews extends TabActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tab);
    TabHost tab = getTabHost();

    TabSpec tab1 = (TabSpec) tab.newTabSpec("tb1");
    TabSpec tab2 = (TabSpec) tab.newTabSpec("tb2");

    tab1.setIndicator("Customer", null).setContent(
            new Intent(this, webview1.class));
    tab2.setIndicator("Item", null).setContent(
            new Intent(this, webview2.class));

    tab.addTab(tab1);
    tab.addTab(tab2);

} 
```

}

然后创建两个活动类说 webview1.class 和 webview2.class

```
public class webview1 extends Activity
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);
   WebView v = (WebView) findViewById(R.id.webView1);
   v.loadUrl("http://www.google.com"); 
```

然后用相同的代码创建另一个类。在 manifest.xml 中输入所有三个类

# c# - 如何在 MVC3 中连接到 Oracle 11g

> ID：15496928
> 
> 赞同：0
> 
> 时间：2013-03-19T10:28:00.733
> 
> 标签：c#, html, asp.net-mvc, oracle11g

我在连接到 oracle 11g 时遇到问题，我已经处理了将近一天。我正在使用 C# 并以 Mvc3 方式编码。我在 web.config 文件中有以下连接字符串

```
<add name = "VIPSoracleContext"
    connectionString = "Data Source=localhost:1521/XE; User Id=SYS; Password=PSWRD;"
    providerName="System.Data.OracleClient"/> 
```

我什至再次尝试了以下连接字符串

```
<add name = "VIPSoracleContext"
    connectionString = "Data Source=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=’wkkdmtk’)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME’vipstest’)));User Id=’myID’;Password=’PSWRD’;"
    providerName="System.Data.OracleClient"/> 
```

使用读/写模板创建控制器时仍然出现以下错误

错误：无法检索“...Models.person”的元数据。在“System.Data.OracleClient.OracleConnection”类型的存储提供程序实例上调用“get_ProviderFactory”方法后返回空值。商店提供程序可能无法正常运行。

如何先使用代码成功连接到 oracle 11g？任何人都可以请帮忙。提前感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:10:09.410

**我终于明白了伙计们！**

遵循本教程： [http](http://www.youtube.com/watch?v=68tlel4iJdM) ://www.youtube.com/watch?v= 68tel4iJdM 但请注意上下文类的默认构造器，因为如果您不控制它，则会出现错误。按照此链接检查使用默认构造器可以解决的 问题：[在 MVC4 中添加控制器不起作用，](https://stackoverflow.com/questions/12172074/add-controller-in-mvc4-not-working) 尤其是**Arnaldo237**的答案。

您将需要**ODP.net**，以便提供程序名称**Oracle.DataAccess.Client**可以工作。

在家享受您的代码....**快乐....**

# c# - 我们可以在编译后在下拉列表中添加一个项目吗

> ID：15496938
> 
> 赞同：0
> 
> 时间：2013-03-19T10:28:28.520
> 
> 标签：c#, asp.net, sql

我在 Gridview 中有下拉列表，其中包含药物名称。我希望当医生打开该页面时，他可以添加列表中不存在的药物，这可能..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:07:39.890

如果您仍想在下拉菜单中执行此操作，请以这种方式进行。

`Add a list item named "New" with the value '-1'` `on dropdown selected event , check if the selected value is -1` `if yes, bring up a popup with a text box or whatever with a submit & cancel button`

那你就可以了。。

**用于添加列表项**

```
ddlcountry.Items.Clear();
ddlcountry.Items.Add("--Please Select country--");
ddlcountry.DataTextField = "Country";
ddlcountry.DataValueField = "CountryId";
ddlcountry.DataBind();

if (ddlrecipient.SelectedItem.Text == "New")
    {
        //Some code here
    } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:49:01.910

看看这是否可以帮助你。

[http://www.devcurry.com/2011/05/jquery-editable-combo-box.html](http://www.devcurry.com/2011/05/jquery-editable-combo-box.html)

当新药添加到列表中时，您需要对服务器进行 jquery 调用以将药物添加到数据库中。这是一个指向 jquery ajax 的链接，在这里可能会有所帮助。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:49:59.183

您需要使用基于 JavaScript 的自定义控件，例如[jQuery AutoComplete](http://jqueryui.com/autocomplete/)。在许多库（jqWidgets、extJS 等）中还有许多其他类似的控件。

# ios - 带有 UIImage 的 UIBarButtonItem 太宽

> ID：15496939
> 
> 赞同：4
> 
> 时间：2013-03-19T10:28:32.377
> 
> 标签：ios, uinavigationbar, uitoolbar

我有一个`UINavigationBar`和一个`UIToolbar`（在单独的视图中），其中包含按钮和灵活的空间。'`UIBarButtonItems`背景设置如下：

```
bgImage = [[UIImage imageNamed:@"MyBackgroundImage.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
[self setBackgroundImage:bgImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

在 中`UINavigationBar`，这些物品看起来很好，尺寸最佳等等。

但是，在 中`UIToolbar`，项目总是被拉伸到至少宽度`bgImage`（在这种情况下为 100 点）：

![在此处输入图像描述](../Images/f04026b14433b268f2685d8ff5c94f95.png) ![在此处输入图像描述](../Images/5313c1a6432a949703f22797d7ad6857.png)

任何想法为什么，或如何解决？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T16:57:35.967

这似乎是 UIToolbar 中的一个错误。我试了一下，唯一对我有用的“修复”是手动设置 UIBarButtonItem 的宽度：

```
barButtonItem.width = 40f; 
```

这适用于带有图像的按钮，但不适用于文本按钮，因为文本的大小可能因本地化而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:01:39.883

您可以根据需要使用以下方法**获取/创建图像大小**。

使用以下具有特定**高度**和**宽度**的方法与**图像**

```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，具有您指定的特定大小。
并使用此图像进行添加`UIBarButtonItem`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:17:17.833

根据您的要求创建自己的带有图像的按钮

```
//  UIBarButtonItem+CutomBackground.h

+ (UIBarButtonItem*)barItemWithImage:(UIImage*)image title:(NSString *)buttonTitle target:(id)target action:(SEL)action;

//  UIBarButtonItem+CutomBackground.m

#define TEXT_MARGIN 8.0f
#define ARROW_MARGIN 12.0f
#define FONT_SIZE 13.0f
#define IMAGE_HEIGHT 31.0f

+ (UIBarButtonItem*)barItemWithImage:(UIImage*)image title:(NSString *)buttonTitle target:(id)target action:(SEL)action
{       
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    UIImage *buttonImage = [image stretchableImageWithLeftCapWidth:15 topCapHeight:0];    
    [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];
    [button setBackgroundImage:buttonImage forState:UIControlStateNormal];
    [button setTitle:buttonTitle forState:UIControlStateNormal];
    [button setContentHorizontalAlignment:UIControlContentHorizontalAlignmentRight];
    [button setContentEdgeInsets:UIEdgeInsetsMake(0.0f,0.0f,0.0f,TEXT_MARGIN)];
    [button.titleLabel setFont:[UIFont fontWithName:@"Helvetica-Bold" size:FONT_SIZE]];
    [button.titleLabel setShadowOffset:CGSizeMake(0.0f,-1.0f)];
    CGRect buttonFrame = [button frame];
    buttonFrame.size.width = [buttonTitle sizeWithFont:[button.titleLabel font]].width+ARROW_MARGIN+TEXT_MARGIN;
    buttonFrame.size.height = IMAGE_HEIGHT;
    [button setFrame:buttonFrame];
    return [[self alloc] initWithCustomView:button];
} 
```

# django - 错误：占位符匹配查询不存在

> ID：15496940
> 
> 赞同：0
> 
> 时间：2013-03-19T10:28:35.003
> 
> 标签：django, django-cms

我正在使用 Django CMS 开发一个项目。现在我在尝试访问我的页面时遇到以下错误：

```
 Exception Type: DoesNotExist
 Exception Value: Placeholder matching query does not exist. 
```

它在以下行给出错误：

```
<div class="practical-info">{% show_placeholder "practical-info" "snippets" %}</div> 
```

我不太确定下一步该做什么。我使用了一个 sqldumb 来获取数据库中的所有数据，使用

```
manage.py syncdb 
```

和

```
manage.py migrate 
```

设置所有内容，并且没有任何错误。

希望有人能给我一些关于这个问题的见解！由于我什至不知道究竟是什么原因造成的，所以我很难找到解决办法！

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T05:38:55.800

我相信您会收到此错误，因为 cms 需要一个名为“snippets”的页面，其中包含一个名为“practical-info”的占位符。这可能是您必须在管理员中创建的东西（或通过夹具加载）。

如果这是以前的工作站点，则可能有一个带有“实用信息”占位符的 cms 模板。使用包含该占位符的 cms 模板创建一个新页面，然后在页面详细信息管理员的“高级设置”表单集下，将“片段”设置为 id 的值。

# hibernate - primefaces jsf hibernate - 在验证阶段：未能延迟初始化集合

> ID：15496943
> 
> 赞同：4
> 
> 时间：2013-03-19T10:28:39.453
> 
> 标签：hibernate, validation, jsf, session, primefaces

我正在努力解决在 JSF 验证阶段发生的问题，不知何故，验证正在做一些休眠不喜欢的事情（未能懒惰地初始化一个集合，没有会话或会话被关闭），我想了解什么.

上下文是这样的：我有一张支票，它以多对多的关系链接到 CheckType。我正在编辑现有检查（在该编辑页面中提供了许多组合框，以便我将其链接到特定检查类型）。

我也在使用 Primefaces。

问题发生在验证过程结束时，但我的转换器工作正常（返回正确的结果）。

此外，我真正不明白的是为什么会有一个 lazily，而所有这些对象都以 EAGER 模式加载。

感谢您的洞察力，我对休眠和将其链接到 JSF 也很陌生：/

## 堆栈跟踪

```
11:15:08,137 INFO  [com.bdls.ids.utils.BDPhaseListener] (http-localhost-127.0.0.1-8080-3) Before PROCESS_VALIDATIONS 3
11:15:11,439 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 
11:15:11,440 INFO  [stdout] (http-localhost-127.0.0.1-8080-3)     select

11:15:11,486 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 
11:15:11,486 INFO  [stdout] (http-localhost-127.0.0.1-8080-3)     select

11:15:11,503 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 
11:15:11,504 INFO  [stdout] (http-localhost-127.0.0.1-8080-3)     select

11:15:12,942 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 
11:15:12,944 INFO  [stdout] (http-localhost-127.0.0.1-8080-3)     select

11:15:13,023 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 
11:15:13,023 INFO  [stdout] (http-localhost-127.0.0.1-8080-3)     select

11:15:13,040 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 

11:15:13,062 INFO  [stdout] (http-localhost-127.0.0.1-8080-3) Hibernate: 

11:15:13,856 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http-localhost-127.0.0.1-8080-3) failed to lazily initialize a collection, no session or session was closed: org.hibernate.LazyInitializationException: failed to lazily initialize a collection, no session or session was closed
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:393) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.collection.internal.AbstractPersistentCollection.throwLazyInitializationExceptionIfNotConnected(AbstractPersistentCollection.java:385) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:378) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.collection.internal.PersistentSet.add(PersistentSet.java:206) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:382) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValue(MenuRenderer.java:129) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:315) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at org.primefaces.component.selectmanycheckbox.SelectManyCheckboxRenderer.getConvertedValue(SelectManyCheckboxRenderer.java:36) [primefaces-3.4.2.jar:]
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIInput.validate(UIInput.java:960) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1233) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIInput.processValidators(UIInput.java:698) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIForm.processValidators(UIForm.java:253) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1214) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at javax.faces.component.UIViewRoot.processValidators(UIViewRoot.java:1172) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:76) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [jsf-impl-2.1.7-jbossorg-2.jar:]
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79) [primefaces-3.4.2.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at com.bdls.ids.controller.login.NoCacheFilter.doFilter(NoCacheFilter.java:39) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at com.bdls.ids.controller.login.AuthenticationFilter.doFilter(AuthenticationFilter.java:48) [classes:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_32]

11:15:13,901 INFO  [com.bdls.ids.utils.BDPhaseListener] (http-localhost-127.0.0.1-8080-3) After PROCESS_VALIDATIONS 3 
```

为了简洁起见，我只放了有趣的部分：

## Xhtml

```
<h:form id="new-items" prependId="false">
    <label for="typechecks">Type of checks :</label>
    <p:selectManyCheckbox id="typechecks" value="#{checksController.itemEdited.checkTypes}" layout="pageDirection" converter="checkTypeConverter">
        <f:selectItems value="#{checkTypeController.allItems}" var="checkType" itemLabel="#{checkType.name}" />
    </p:selectManyCheckbox>
<p:commandButton id="save" value="Save" action="#{checksController.persistItemEdited}" styleClass="btnFooterFormNewItems" icon="ui-icon-check" update="new-items" />

</h:form> 
```

## 转换器

```
@FacesConverter("checkTypeConverter")
public class CheckTypeConverter implements Converter {

    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if (value == null || value.toString().isEmpty()) {
            return ""; 
        }
        return ((UnversionedObject) value).getId().toString();
    }

    public Object getAsObject(FacesContext context, UIComponent arg1, String value) {

        CheckTypeService checkTypeService = FacesContextUtils.getWebApplicationContext(context).getBean("checkTypeService",
                CheckTypeService.class);
        return checkTypeService.getById(Integer.parseInt(value));
    }
} 
```

## 控制器

```
@ManagedBean
@ViewScoped
public class ChecksController implements Serializable {
    private static Logger log = Logger.getLogger(ChecksController.class);

    // -------------------------------------------------
    // properties
    // -------------------------------------------------
    @ManagedProperty(value = "#{checksService}")
    private ChecksService checksService;

    // -------------------------------------------------
    // parameters
    // -------------------------------------------------
    private List<Check> allChecks;
    private Check[] selectedItem;
    private Check itemEdited = new Check();

    // -------------------------------------------------
    // constructor
    // -------------------------------------------------
    public ChecksController() {
        log.info("Creation of checks controller");

        allChecks = new ArrayList<Check>();

    }

    // -------------------------------------------------
    // methods
    // -------------------------------------------------
    @PostConstruct
    private void load() {
        if(FacesContext.getCurrentInstance().isPostback()) return;

        log.info("loading list of checks...");

        allChecks = checksService.getAll();
        log.info(String.format("Loaded %s items", allChecks.size()));
    }

    public void delete(Check c)
    {
        try{
            checksService.delete(c);
        }catch(Exception e){
            log.error("Error when deleting object "+c);
            e.printStackTrace();
        }
    }

    public void prefillFrom(String modelID) {
        log.info("Pre-filling based on model " + modelID);

        if (modelID == null) // new item
            return;

        // in this case, the item must exist (edition)
        itemEdited = checksService.getById(Integer.parseInt(modelID));
        if (itemEdited == null) {
            UINotification.sendAsError("Item does not exist", String.format("The item %s does not exist", modelID));
            log.error(String.format("The item %s does not exist", modelID));
        }
    }

    public void persistItemEdited(){
        log.info("persisting item edited...");

//      CheckType c = new CheckType();
//      c.setName("jolitest");
//      
//      itemEdited.getCheckTypes().add(c);
//      c.getChecks().add(itemEdited);
//      
        try{
            checksService.saveOrUpdate(itemEdited);
        }catch(Exception e){
            log.error("Error when saving object "+itemEdited);
            e.printStackTrace();
        }
        itemEdited = new Check() ;
    }

    public void test()
    {
        CheckType ct = new CheckType();
        ct.setName("toto");

        itemEdited.getCheckTypes().add(ct);

        Set<CheckType> set = new HashSet<CheckType>();
        set.add(ct);
        itemEdited.setCheckTypes(set);
    }

    getters and setters... 
```

## 服务

```
@Service("checksService")
@Transactional(readOnly = true)
public class ChecksServiceImpl implements ChecksService {
    @Autowired
    CheckDAO checkDAO;

    @Autowired
    CheckTypeDAO checkTypeDAO;

    /**
     * retrieves a UnversionedObject based on its id
     */
    public Check getById(Integer id) {
        return checkDAO.getById(id);
    }

    @Transactional(readOnly = false)
    public Check saveOrUpdate(Check c) {
        //for many-to-many relations, re-attach the entities
        if (c.getCheckTypes() != null && c.getCheckTypes().size() > 0)
        {
            List<CheckType> checkTypes = new ArrayList<CheckType>(c.getCheckTypes().size());
            for (CheckType ct : c.getCheckTypes()) {
                checkTypes.add(checkTypeDAO.getById(ct.getId()));
            }
            c.getCheckTypes().clear();
            c.getCheckTypes().addAll(checkTypes);
        }

        return checkDAO.saveOrUpdateDetached(c);
    }

    /**
     * returns a list of all checks
     */
    @Override
    public List<Check> getAll() {
        List<Check> list = checkDAO.getAll();
        return list;
    }

    /**
     * empty the extra relations and deletes the object
     */
    @Override
    @Transactional(readOnly = false)
    public void delete(Check c) {
        // attach object
        c = checkDAO.getById(c.getId());

        // initialize list
        Hibernate.initialize(c.getCheckTypes());

        // first remove relations to checktype
        c.getCheckTypes().clear();

        // update
        checkDAO.saveOrUpdateDetached(c);

        // now delete
        checkDAO.delete(c);
    }

} 
```

## DAO (实现)

```
@Repository
public class CheckDAOImpl extends BaseDAOimpl<Check> implements CheckDAO {

}

public abstract class BaseDAOimpl<T extends UnversionedObject> implements BaseDAO<T> {
    @Override
    public T saveOrUpdateDetached(T object) throws DataModelConsistencyException {
        updateUserAndTime(object);

        if (object.getId() != null) {
            return _entityManager.merge(object);
        } else {
            _entityManager.persist(object);
            return object;
        }
    }

rest omitted
} 
```

## 查看

```
@Entity
@Table(name = "IDS_SV_CHECK")
public class Check extends UnversionedObject {
    public static enum Severity {
        HIGH, MEDIUM, LOW, INFORMATIVE
    };

    @Column(length = 32)
    private String checkName;

    @Column
    private Integer subCheckID;

    @Enumerated(EnumType.STRING)
    private Severity severity;

    @Column(length = 32)
    private String description;

    @Column(length = 32)
    private String errorMsg;

    @Column(length = 32)
    private String DMVersion;

    @Column(length = 32)
    private String therapeuticArea;

    @ManyToMany(cascade = CascadeType.ALL, fetch=FetchType.EAGER)
    @JoinTable(name = "IDS_SV_CHECK_HAS_TYPE",
                joinColumns={@JoinColumn(name="check_id")},
                inverseJoinColumns={@JoinColumn(name="checktype_id")})
    @BatchSize(size = 100)
    private Set<CheckType> checkTypes = new HashSet<CheckType>();
        ... 
```

## 检查类型

```
@Entity
@Table(name = "IDS_SV_CHECKTYPE")
public class CheckType extends UnversionedObject {

    @Column(length=60)
    private String name;

    @ManyToMany(mappedBy="checkTypes",fetch=FetchType.EAGER)
    private Set<Check> checks = new HashSet<Check>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T14:08:24.327

回复已经很晚了，尽管我认为最好在这里留下另一个解决方案。

我遇到了同样的问题，在网上冲浪时我偶然发现了这个：

[http://zenidas.wordpress.com/recipes/avoiding-lazyinitializationexception-on-jsf-selectmanymenu/](http://zenidas.wordpress.com/recipes/avoiding-lazyinitializationexception-on-jsf-selectmanymenu/)

用 ManyToMany 属性为我的实体尝试了这个解决方案，它就像一个魅力。

斯特凡诺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T12:52:41.450

原因是支持 bean 生命周期与 Spring 无关。你可以有办法做到这一点，但下面是一种更清洁的方法。

首先，确保在 Spring Boot Strap 的部署描述符中有侦听器

## web.xml

```
<!-- Spring Bootstrap -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        a.package
        another.package
        some.other.package
    </param-value>
</context-param> 
```

现在有一个辅助 bean 的辅助方法（在基类中更好）来访问上下文。

```
protected WebApplicationContext getContext()
{
    HttpServletRequest request = (HttpServletRequest) (FacesContext.getCurrentInstance().getExternalContext().getRequest());
    return WebApplicationContextUtils.getRequiredWebApplicationContext(request.getSession().getServletContext());
} 
```

现在在 backing bean 中通过以下方式访问 spring bean 实例：

```
ChecksService bean = getContext().getBean(ChecksService.class); 
```

那是 - 你应该很高兴。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T09:53:19.770

您永远不应该将具有活动休眠代理的实体返回到事务范围之外。它根本行不通。Hibernate 正在为集合创建代理，这些代理绑定到休眠会话，它绑定到不再存在的事务。

可能的解决方案：

1) 在返回对象之前，总是从休眠会话中分离对象

2）更激进，总是返回对象的副本，例如用推土机制作的，以删除所有您可能不知道的代理。

3) 更激进，让你的代码更简洁易懂：永远不要使用@OneToMany 或@ManyToMany 注解，如果你需要对1 到n 或n 到n 关系进行操作，为此类操作提供DAO，并始终明确阅读，插入，更新和删除。恕我直言，最好的解决方案，理论上需要更多的方法，在实践中需要更少的方法来解决像你这样的错误。

# sql-server - iif mdx 结果应该是负数

> ID：15496944
> 
> 赞同：2
> 
> 时间：2013-03-19T10:28:39.783
> 
> 标签：sql-server, mdx

我希望这个结果在变化为负时显示为负，但看起来 mdx 正在采用绝对结果并且始终显示正数。当第三个成员的结果为负时，我想将它设为负的第三列：

```
member [Measures].[Change in Reseller Sales Percent] 
```

我想我可以用 iif 声明来做到这一点，但如何做到这一点？

代码：

```
with
member [Measures].[Prev Month Reseller Sales Amount] as
    ([Date].[Calendar].currentmember.prevmember,
    [Measures].[Reseller Sales Amount])
    ,format_string="currency"

member [Measures].[Change in Reseller Sales] as
    ([Measures].[Reseller Sales Amount]-
    [Measures].[Prev Month Reseller Sales Amount])

member [Measures].[Change in Reseller Sales Percent] as
    iif([Date].[Calendar].currentmember.prevmember is null, null,
        ([Measures].[Change in Reseller Sales])/ 
    ([Measures].[Prev Month Reseller Sales Amount]))
    , format_string = "percent"
SELECT
 {([Measures].[Reseller Sales Amount]),
 ([Measures].[Prev Month Reseller Sales Amount]),
 ([Measures].[Change in Reseller Sales]),
 ([Measures].[Change in Reseller Sales Percent])} ON COLUMNS,
 {[Date].[Calendar].[Month].Members} ON ROWS
FROM [Step-by-Step] 
```

结果：

```
September 2001  $1,165,897.08   $1,538,408.31   ($372,511.23)   -24.21%
October 2001    $844,721.00 $1,165,897.08   ($321,176.08)   -27.55%
November 2001   $2,324,135.80   $844,721.00 $1,479,414.80   175.14%
December 2001   $1,702,944.54   $2,324,135.80   ($621,191.25)   -26.73%
January 2002    $713,116.69 $1,702,944.54   ($989,827.85)   -58.12% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T20:49:41.853

您应该为 format_string 中的负数指定格式说明符。例子

```
 format_string "$#,##0;-$#,##0" 
```

# asp.net - 使用信号器定期向所有客户端发送消息

> ID：15496947
> 
> 赞同：3
> 
> 时间：2013-03-19T10:28:47.317
> 
> 标签：asp.net, signalr, signalr-hub

我想在特定时间间隔后使用集线器将一些数据从服务器发送到所有连接的客户端。我怎样才能使用信号集线器来实现这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:57:18.927

启动[System.Threading.Timer](https://stackoverflow.com/a/14569167/55209)，并从它的回调中使用特定集线器广播消息。

全球.asax：

```
private Timer timer;
public class Global : System.Web.HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        RouteTable.Routes.MapHubs("~/signalr2");
        timer = new Timer(TimerCallback(timerCallback), null, Timeout.Infinite, 1000);
    }
} 
```

[检查SignalR wiki 页面](https://github.com/SignalR/SignalR/wiki/Hubs)中的“从集线器外部通过集线器广播”部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T13:55:58.593

使用[ReactiveExtensions](http://msdn.microsoft.com/en-us/library/hh242985%28v=vs.103%29.aspx)然后设置一个[Observable.Interval](http://msdn.microsoft.com/en-us/library/hh228911%28v=vs.103%29.aspx)调用。然后响应式将自动调用可以广播给您的客户的 lambda。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-05T09:07:27.230

我偶然发现了 Jason Roberts 的这篇文章 => [http://dontcodetired.com/blog/post/Using-Server-Side-Timers-and-SignalR-in-ASPNET-MVC-Applications.aspx](http://dontcodetired.com/blog/post/Using-Server-Side-Timers-and-SignalR-in-ASPNET-MVC-Applications.aspx)

他使用 IRegisteredObject 和 HostingEnvironment.RegisterObject 然后在类中使用[System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer%28v=vs.110%29.aspx)来完成这项工作，我自己没有尝试过，但它看起来正是那种东西。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-19T10:43:53.123

只需添加

```
Thread.Sleep(5000); 
```

在您的发送方法中。

前任：

```
 public void Send(string name, string message)
    {
        Thread.Sleep(5000);
        //call the broadcast message to upadate the clients.
        Clients.All.broadcastMessage(name, message); 
    } 
```

希望能帮助到你。

**编辑**

以下代码每 5 秒呈现一次当前时间。

这是它的脚本：

```
<script type="text/javascript">
    $(function () {
        $.connection.hub.logging = true;
        $.connection.hub.start();
        // Declare a proxy to reference the hub.  
        var chat = $.connection.chatHub;

        //Appending the responce from the server to the discussion id
        chat.client.currentTime = function (time) {
            $('#discussion').append("<br/>" + time + "<br/>");
        };

        // Start the connection. 
        $.connection.hub.start().done(function () {

            //Call the server side method for every 5 seconds
            setInterval(function () {
                var date = new Date();
                chat.client.currentTime(date.toString());
            }, 5000);
        });

    }); 
</script>

<div id="discussion"></div> 
```

在 HubClass 上写下以下内容：

```
public class ChatHub: Hub
   {
        public void currentTime(string date)
        {
            Clients.All.broadCastTime(date);
        }
   } 
```

# boost-asio - 使用多个 io_service 对象

> ID：15496950
> 
> 赞同：12
> 
> 时间：2013-03-19T10:28:49.283
> 
> 标签：boost-asio

我有我的应用程序，其中侦听和处理来自 Internet 套接字和 unix 域套接字的消息。现在我需要将 SSL 添加到 Internet 套接字，我对应用程序中的所有套接字使用单个`io_service`对象。现在看来我需要`io_service`为网络套接字和 unix 域套接字添加单独的对象。我的应用程序中没有任何线程，我使用`async_send`and`async_recieve`来`async_accept`处理数据和连接。请指出任何使用`io_service`带有异步处理程序的多个对象的示例。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-19T17:59:47.170

这个问题有一定程度的不确定性，好像`io_service`需要多个对象。[我在参考](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference.html)文档或要求单独对象的[SSL](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/ssl.html)和[UNIX 域套接字](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/posix/local.html)的概述中找不到任何内容。`io_service`无论如何，这里有几个选项：

* * *

### 单人`io_service`：

尝试使用单个`io_service`.

如果您没有`io_service`对象的直接句柄，但您有 Boost.Asio I/O 对象（例如套接字）的句柄，则`io_service`可以通过调用[`socket.get_io_service()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/get_io_service.html).

* * *

### 每使用一个线程`io_service`：

如果需要多个`io_service`对象，则为每个对象分配一个线程`io_service`。这种方法用于 Boost.Asio 的[HTTP Server 2](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/http/server2/)示例。

```
boost::asio::io_service service1;
boost::asio::io_service service2;

boost::thread_group threads;
threads.create_thread(boost::bind(&boost::asio::io_service::run, &service1));
service2.run();
threads.join_all(); 
```

这种方法的一个结果是它可能需要应用程序做出线程安全保证。例如，如果`service1`和`service2`两者都有调用的完成处理程序`message_processor.process()`，则`message_processor.process()`需要是线程安全的或以线程安全的方式调用。

* * *

### 民意调查`io_service`：

[`io_service`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service.html)提供非阻塞替代`run()`. [`io_service::run()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/run/overload1.html)在所有工作完成之前as 将阻塞的位置，[`io_service::poll()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/poll/overload1.html)将运行准备好运行且不会阻塞的处理程序。这允许单个线程在多个`io_service`对象上执行事件循环：

```
while (!service1.stopped() &&
       !service2.stopped())
{
  std::size_t ran = 0;
  ran += service1.poll();
  ran += service2.poll();
  // If no handlers ran, then sleep.
  if (0 == ran)
  {
    boost::this_thread::sleep_for(boost::chrono::seconds(1));
  }
} 
```

为了防止在没有准备好运行的处理程序时出现繁忙的循环，可能值得在睡眠中添加。请注意，这种睡眠可能会在事件的整体处理中引入延迟。

* * *

### 将处理程序转移到单个`io_service`：

一种有趣的方法是使用 a[`strand`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__strand.html)将完成处理程序转移到单个`io_service`. 这允许每个线程`io_service`，同时避免需要让应用程序做出线程安全保证，因为所有完成处理程序都将通过单个服务发布，其事件循环仅由单个线程处理。

```
boost::asio::io_service service1;
boost::asio::io_service service2;

// strand2 will be used by service2 to post handlers to service1.
boost::asio::strand strand2(service1);
boost::asio::io_service::work work2(service2);

socket.async_read_some(buffer, strand2.wrap(read_some_handler));

boost::thread_group threads;
threads.create_thread(boost::bind(&boost::asio::io_service::run, &service1));
service2.run();
threads.join_all(); 
```

这种方法确实有一些后果：

*   它需要打算由 main 运行的处理程序`io_service`通过[`strand::wrap()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__strand/wrap.html).
*   异步链现在通过两个`io_service`s，创建了一个额外的复杂级别。重要的是要考虑辅助`io_service`节点不再有工作导致其`run()`返回的情况。

异步链通常出现在同一个`io_service`. 因此，服务永远不会耗尽工作，因为完成处理程序会将额外的工作发布到`io_service`.

```
 |    .------------------------------------------.
   V    V                                          |
read_some_handler()                                |
{                                                  |
  socket.async_read_some(..., read_some_handler) --'
} 
```

另一方面，当一个 strand 用于将工作转移到另一个 strand 时`io_service`，包装的处理程序在 内部调用`service2`，导致它将完成处理程序发布到`service1`. 如果包装的处理程序是 中唯一的工作`service2`，则`service2`不再有工作，导致`servce2.run()`返回。

```
 service1                      service2
====================================================

        .----------------- wrapped(read_some_handler)
        |                            .
        V                            .
 read_some_handler                NO WORK
        |                            .
        |                            .
        '----------------> wrapped(read_some_handler) 
```

为了解决这个问题，示例代码使用了[`io_service::work`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service__work.html)for ，`service2`因此`run()`在明确告知 to 之前一直处于阻塞状态[`stop()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/stop.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T16:13:10.127

看起来您正在编写服务器而不是客户端。不知道这是否有帮助，但我正在使用 ASIO 从我的客户端与 6 个服务器进行通信。它使用 TCP/IP SSL/TSL。[您可以在此处](https://stackoverflow.com/questions/15434753/boost-asio-multiple-client-connections-to-different-servers/15438408#15438408)找到代码的链接

您应该能够将一个 io_service 对象与多个套接字对象一起使用。但是，如果您决定确实想要拥有多个 io_service 对象，那么这样做应该相当容易。在我的课堂上，io_service 对象是静态的。因此，只需删除 static 关键字以及构造函数中仅创建一个 io_service 对象实例的逻辑。根据您的服务器预期的连接数，您最好使用专用于处理套接字 I/O 的线程池，而不是为每个新的套接字连接创建一个线程。

# magento - 如何在 Magento 的网格中显示商店名称

> ID：15496952
> 
> 赞同：0
> 
> 时间：2013-03-19T10:28:50.810
> 
> 标签：magento

我在管理员中有我的自定义模块。我已经在网格中列出了数据库中的值。这些值是特定于存储的，因此每一行都有 store_id。在列出值的同时，我还想在行中显示商店名称和网站名称。如何在网格中获取 store_name 和网站名称。例如，我在行中插入了 store_id 5。

我想要像这样的输出

位置价值商店

xyz xyz 英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T11:06:09.970

如果您将以下代码放入模块网格文件中，那么您可以在网格中显示商店名称，这是一个代码

```
$this->addColumn(’store_id’, array( 
‘header’ => Mage::helper(’sales’)->__(’Website’), 
‘index’ => ‘store_id’, 
‘type’ => ‘store’, 
‘width’ => ‘100px’, 
‘store_view’=> true, 
‘display_deleted’ => true, 
)); 
```

更多信息，您可以参考此[链接](http://www.magentocommerce.com/boards/viewthread/228845/#)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:06:25.503

所以你有`store_id`并且你想显示商店名称吗？

所以使用下面的代码来获取商店名称

```
$storeId = 5;
$storeName = Mage::getModel('core/store')->load($storeId)->getName(); 
```

# ios - 具有多个循环的 Json 解析

> ID：15496963
> 
> 赞同：1
> 
> 时间：2013-03-19T10:29:33.340
> 
> 标签：ios, objective-c, json

如何`[{first set of values},{data->children->data->body}`在目标 c 中循环这部分 json？

json是

```
 [
      {
        "kind": "Listing"
      },
      {
        "kind": "Listing",
        "data": {
          "children": [
            {
              "data": {
                "body": "body1"
              }
            },

            {
              "data": {
                "body": "body2"
              }
            }
          ]
        }
      }
    ] 
```

我目前的代码是

```
m_ArrList=[[NSMutableArray alloc]init];
    NSDictionary *infomation = [self dictionaryWithContentsOfJSONString:@"surveyquestion.json"];
    NSArray *array=[infomation objectForKey:@"data"];
    int ndx;
    NSLog(@"%@",array);
    for (ndx = 0; ndx < [array count]; ndx++) {
        NSDictionary *stream = (NSDictionary *)[array objectAtIndex:ndx];

        NSArray *string=[stream valueForKey:@"children"];

        //i am stuck here
    } 
```

在“//我被困在这里”时我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:36:11.830

您可能需要 `@"children"`在数组中添加字典的值，然后解析该数组以获取子项中的数据

```
[childrenArray addObject:[stream objectForKey:@"children"]];

   // finally parse childrenArray 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:20:58.303

使用`NSJSONSerialization`try 来实现这一点。在这里，您需要`NSString`作为 jsonStr 传递，您需要从文件中读取它。

```
NSError *jsonError = nil;
id allValues = [NSJSONSerialization JSONObjectWithData:[jsonStr dataUsingEncoding:NSUTF8StringEncoding]
                                               options:0
                                                 error:&jsonError];

if(jsonError!=nil)
    NSLog(@"Json_Err: %@",jsonError);

NSArray *array=allValues;

for (int ndx = 0; ndx < [array count]; ndx++) {
    NSDictionary *stream = (NSDictionary *)[array objectAtIndex:ndx];
    NSLog(@"%@",[stream objectForKey:@"kind"]);

    NSArray *child = [[stream objectForKey:@"data"] objectForKey:@"children"];

    //i am stuck here

    for(int i =0; i <[child count];i++)
    {
        NSDictionary *childData = (NSDictionary *)[child objectAtIndex:i];
        //NSLog(@"%@",[childData objectForKey:@"data"]);
        NSLog(@"%@",[[childData objectForKey:@"data"] objectForKey:@"body"]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:53:26.250

```
// You Just need to Implement following Lines and you will get all the data for Key Body in children array
NSDictionary *infomation = [self dictionaryWithContentsOfJSONString:@"surveyquestion.json"];

NSArray *string= [[infomation objectForKey:@"data"] objectForKey:@"children"];

[string enumerateObjectsUsingBlock:^(id obj, NSUInteger ind, BOOL *stop){
    NSLog(@"Body : %@",[[obj objectForKey:@"data"] objectForKey:@"body"]);
}]; 
```

# jquery - 查找带空格的空段落并将其删除

> ID：15496966
> 
> 赞同：-1
> 
> 时间：2013-03-19T10:29:45.537
> 
> 标签：jquery

再会

我想使用以下代码删除我的元素之一下方的空段落，并且我正在使用以下代码（请参阅 JS 和小提琴）。

我的代码正在运行，但我知道代码写得不是很好，我想使用 (this) 而不是每次都引用 elemtn。我将如何优化这段代码？

```
<div class="wpcol-one-quarter">
   <p><ahref=""><img src="" width="180" height="120" /></a></p>
</div>
<p>&nbsp;</p> <!--I want to remove this-->
<div class="wpcol-one-quarter">
   <p><a href=""><img src="" width="180" height="120" /></a></p>
</div> 
```

JS：

```
$("div.wpcol-one-quarter").next('p:empty').remove();

if($("div.wpcol-one-quarter").next('p').html()=="&nbsp;") {
  $("div.wpcol-one-quarter").next('p').remove();
} 
```

**注意：我只想删除这个空的 p 标签，而不是页面上可能存在的任何其他 p 标签**

[小提琴](http://jsfiddle.net/7L4WZ/126/)

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T10:31:39.513

你可以这样做：

```
$('p').filter(function(){ return $.trim(this.innerHTML)==="&nbsp;" }).remove(); 
```

我建议将修剪作为最佳实践，因为在构建一些 HTML 时很容易插入空格或换行符。

[示范](http://jsbin.com/etukax/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:34:17.707

缓存变量：

```
var p = $("div.wpcol-one-quarter").next('p');
if(p.html()=="&nbsp;") {
  p.remove();
} 
```

[http://jsfiddle.net/7L4WZ/134/](http://jsfiddle.net/7L4WZ/134/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:36:48.543

试试下面的代码：

```
$('p:empty').remove();
$('p').filter(function(){ return $.trim(this.innerHTML)==="&nbsp;" }).remove(); 
```

更多帮助请访问[http://jsfiddle.net/7L4WZ/132/](http://jsfiddle.net/7L4WZ/132/)

# php - 使用递归将普通数组转换为多维数组

> ID：15496970
> 
> 赞同：1
> 
> 时间：2013-03-19T10:29:57.627
> 
> 标签：php, recursion, multidimensional-array

每个人！

我一直在尝试编写递归函数。=( 这是我的函数，正如我所料，它将我的普通数组变成多维数组。

```
function BuildTree($src, $index=0) {
    foreach ($src as $index=>$curentItem) {
        $nextItem = (is_array($src[$index+1]))?$src[$index+1]:false;
        unset($src[$index]);
        if ($nextItem['d']==$curentItem['d']) $brunchArray[] = $curentItem['n'];
        if ($nextItem['d']>$curentItem['d']) $brunchArray['childrens'] = BuildTree($src, $index);
        if (!$nextItem || $nextItem['d']<$curentItem['d']) return $brunchArray;
    }
} 
```

输入数组是这样的：

```
$input = array (
array(
        'n' => 'Articles',
        'd' => 0
    ),
array(
        'n' => 'Article 1',
        'd' => 1
    ),
array(
        'n' => 'Books',
        'd' => 0
    ),
array(
        'n' => 'Book 1',
        'd' => 1
    ),
array(
        'n' => 'Book 2',
        'd' => 1
    ),
array(
        'n' => 'Chapter 1',
        'd' => 2
    ),
array(
        'n' => 'Chapter 2',
        'd' => 2
    )
); 
```

我希望它被转换成这个：

```
array (
    array(
            'n' => 'Articles',
            'd' => 0,
            'childrens' => array (
                array(
                        'n' => 'Article 1',
                        'd' => 1
                    ),
            )
        ),
    array(
            'n' => 'Books',
            'd' => 0,
            'childrens' => array (
                array(
                        'n' => 'Book 1',
                        'd' => 1
                    ),
                array(
                        'n' => 'Book 2',
                        'd' => 1
                        'childrens' => array (
                            array(
                                    'n' => 'Chapter 1',
                                    'd' => 2
                                ),
                            array(
                                    'n' => 'Chapter 2',
                                    'd' => 2
                                )
                        )
                    )
            )
        )
) 
```

我已经花了三个小时试图解决这个问题。=( 任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:00:16.280

这是一个没有递归的解决方案：

```
function convert($arr) {
    $stack = array();
    $output = array();
    $arr[] = array('d' => -1); // Dummy record at the end
    for($i = 0; $i < count($arr); $i++) {
        while(!empty($stack) && $stack[count($stack) - 1]['d'] > $arr[$i]['d']) {
            $current_d = $stack[count($stack) - 1]['d'];
            $children = array();
            while(!empty($stack) && $stack[count($stack) - 1]['d'] >= $current_d) {
                $children[] = array_pop($stack);
            }
            $children = array_reverse($children);
            if(empty($stack)) {
                foreach($children as $child) {
                    $output[] = $child;
                }
            } else {
                $stack[count($stack) - 1]['children'] = $children;
            }
        }
        $stack[] = $arr[$i];
    }
    return $output;
}

$input = array (
array(
        'n' => 'Articles',
        'd' => 0
    ),
array(
        'n' => 'Article 1',
        'd' => 1
    ),
array(
        'n' => 'Books',
        'd' => 0
    ),
array(
        'n' => 'Book 1',
        'd' => 1
    ),
array(
        'n' => 'Book 2',
        'd' => 1
    ),
array(
        'n' => 'Chapter 1',
        'd' => 2
    ),
array(
        'n' => 'Chapter 2',
        'd' => 2
    )
);

var_dump(convert($input)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T10:57:23.660

使用相同的`$input`：

```
$output = array();

function buildTree(&$input, &$output, &$current, $level = 0) {
    if(!$input)
        return;
    $next = array_shift($input);
    if($next['d'] == $level) {
        $current[] = $next;
        return buildTree($input, $output, $current, $level);
    } else if($next['d'] == $level + 1) {
        $current[count($current) - 1]['childrens'] = array($next);
        return buildTree($input, $output, $current[count($current) - 1]['childrens'], $level + 1);
    } else {
        $output[] = $next;
        return buildTree($input, $output, $output, 0);
    }
}

buildTree($input, $output, $output);

var_dump($output); 
```

# c# - 是否可以让 webinator 使用已经创建的 selenium 实例？C＃

> ID：15496971
> 
> 赞同：0
> 
> 时间：2013-03-19T10:29:58.277
> 
> 标签：c#, selenium

我想知道是否可以让 Webinator 使用我已经使用 selenium 打开的浏览器窗口。因为现在我需要创建一个新实例（配置），这只会打开另一个浏览器窗口。

我认为我的代码会做更多的解释。

```
 var wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));
        wait.Until(d => { return d.FindElement(By.Id("mainContentPlaceholder_Wizard1_ButtonCSV")).Displayed; });
        driver.FindElement(By.Id("mainContentPlaceholder_Wizard1_ButtonCSV")).Click();
        var config = new Config
        {
            LogScreenshots = true,
            LogLevel = Config.AvailableLogLevels.Verbose,
            BaseUrl = driver.Url,
            Browser = Config.AvailableBrowsers.FirefoxPlugins,
            Framework = Config.AvailableFrameworks.WebDriver,

        };
        // new instance so new browser window opens 
        var web = WebManagerFactory.CreateInstance(config);
        var fileUpload = LocateBy.Attributes(ByAttribute.Name("ctl00$mainContentPlaceholder$Wizard1$AsyncFileUploadCsv$ctl02"));

        web.Click(fileUpload, WaitUntil.DialogAppears("File Upload"));
        web.Dialog.SelectFiles(Comparison.Contains, "File Upload", @"C:\Users\bram\Desktop", "test2.csv"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:49:47.173

不。

它是针对 Selenium 项目提出的最古老和最常见的问题之一：

[https://code.google.com/p/selenium/issues/detail?id=18](https://code.google.com/p/selenium/issues/detail?id=18)

# asp.net-mvc-3 - 如何使用 miniprofiler 来帮助我们粉碎加载速度？

> ID：15496973
> 
> 赞同：0
> 
> 时间：2013-03-19T10:30:01.647
> 
> 标签：asp.net-mvc-3, performance, azure, mvc-mini-profiler

作为 minipfoler 的开发人员和固定用户，我使用 stakoverflow 作为我的 .NET 站点的基准。那是因为整个堆栈网络的速度非常快。

我知道在 stackexchange 上使用了 miniprofiler。可以在堆栈上使用整个开发人员的东西，但是我们可以启用统计信息来查看它的真实速度吗？

我在这里可能有点过分痴迷 - 但我希望以毫秒为单位提高持久性，唯一可行的基准是像堆栈交换这样的大型复杂站点。

我知道查看实时数据可能是一个安全问题，但我真的想要一个基准（屏幕截图/指南）来了解我可以在多大程度上优化我的 .NET MVC Web 应用程序。

我实际的 IIS 和 MVC 性能非常好，我认为我更关心服务器回复和客户端的东西。那么我可以（而且我应该）付出更多的努力来缩短这个响应时间吗？

该站点托管在 Azure Cloupapp 中并使用 Azure DB - 我知道在我无法控制的连接时间上使用了大约 60~180 毫秒。

如何缩短绘制、加载和完成之间的时间？

![在此处输入图像描述](../Images/4086c22f193cd5b9b897519f16d69388.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:13:19.380

我发现我现在越来越频繁地在 StackExchange 上回答我自己的问题。不确定那是什么意思。但这很有趣我在处理其他问答时发现的（它回答了这个问题）

> 是的，你应该避免字符串连接的明显初学者错误，这是每个程序员在工作的第一年都会学到的东西。但在那之后，您应该更担心代码的可维护性和可读性，而不是其性能。这可能是让自己陷入微优化剧院最可悲的事情——**它分散了你** **真正目标的注意力：编写更好的代码。**
> 
> [杰夫·阿特伍德 (Jeff Atwood) 发表](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

性能或严重延迟没有真正的问题。它只是一种不会带来太多满足感的痴迷。

“伙计们”说得有道理。只要我的代码可读且运行速度快——我还想要什么？

完美！- 浪费时间，lol@me！

# php - Mod Rewrite - 有没有更快的方法？

> ID：15496979
> 
> 赞同：1
> 
> 时间：2013-03-19T10:30:11.620
> 
> 标签：php, url, mod-rewrite

我正在建立一个有很多参数的网站。目前我在我的 .htaccess 文件中使用这个代码：

```
Options +FollowSymLinks
RewriteEngine on
RewriteBase /epo

RewriteRule (.*)/(.*)/(.*)/(.*)/(.*)/$ index.php?section=$1&content=$2&site=$3&param=$4&param2=$5 [QSA]
RewriteRule (.*)/(.*)/(.*)/(.*)/$ index.php?section=$1&content=$2&site=$3&subsite=$4 [QSA]
RewriteRule (.*)/(.*)/(.*)/$ index.php?section=$1&content=$2&site=$3 [QSA]
RewriteRule (.*)/(.*)/$ index.php?section=$1&content=$2 [QSA]
RewriteRule (.*)/$ index.php?section=$1 [QSA]

RewriteCond %{REQUEST_URI} ^/[^\.]+[^/]$
RewriteRule ^(.*)$ http://%{HTTP_HOST}%{REQUEST_URI}/ [R=301,L] 
```

我是 mod_rewrite 的新手，这就是为什么这段代码一团糟。有没有更好的方法来处理所有这些参数？最后两行只是在最后添加一个“/”以防万一。如果有人可以解释他们的代码也会很棒，所以我可以理解我做错了什么:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:37:13.163

我个人将所有请求重定向到一个文件，然后从那里处理它。

```
RewriteRule ^(.*)$ index.php?path=$1 [QSA] 
```

然后在 index.php 中使用类似的东西

```
$params = explode('/', $_GET['path'];

$section = $params[0];
$content = $params[1];
$site    = $params[2];
$subsite = $params[3];
//etc. 
```

请记住，您确实需要对所有参数进行一些额外的验证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:54:52.663

它类似于 Hugo 的示例，但没有`GET`参数：

```
<IfModule mod_rewrite.c>
    SetEnv HTTP_MOD_REWRITE On
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^.*$ index.php [NC,L]
</IfModule> 
```

在`PHP`您可以执行以下操作：

```
$pathInfo = pathinfo($_SERVER['SCRIPT_NAME']);
$baseUrl = $pathInfo['dirname'];
$baseFile = $pathInfo['basename'];
$url = rtrim(str_replace([$baseUrl, '/'.$baseFile], '', $_SERVER['REQUEST_URI']), '/');
$method = strtolower($_SERVER['REQUEST_METHOD']);
$isModRewrite = array_key_exists('HTTP_MOD_REWRITE', $_SERVER); 
```

您的网址现在看起来像：

```
http://www.yourserver.com/param1/param2 
```

或（如果未启用 mod 重写）

```
http://www.yourserver.com/index.php/param1/param2 
```

在这两种方式中，`$url`变量看起来像`/param1/param2`

你可以`explode`在这个字符串上做，或者用这个字符串提供一个 PHP 路由库来提取你的参数。

PHP 路由示例库：

[https://github.com/robap/php-router](https://github.com/robap/php-router)

[https://github.com/deceze/Kunststube-Router](https://github.com/deceze/Kunststube-Router)

# c# - 在特定日期发送电子邮件

> ID：15496989
> 
> 赞同：-3
> 
> 时间：2013-03-19T10:30:38.807
> 
> 标签：c#, asp.net, database, oracle

我正在开发一个网页（asp.net，C#），用户每个月都会在其中输入一些数据并保存。我使用oracle数据库。

如果一个月没有输入数据，我希望将邮件发送到某个电子邮件 ID，即。*myid@abc.com*。

任何人都可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:34:43.647

鉴于您的问题有多模糊，这里有一个匹配使用[Oracle Alerts](http://docs.oracle.com/cd/E18727_01/doc.121/e12951/T338646T338655.htm)的答案。

这篇[博客文章](http://oraclemaniac.com/2012/03/24/send-emails-with-oracle-alerts/)应该让您朝着正确的方向前进。

# .net - 如何更改 DataGrid 视图中的行颜色

> ID：15496991
> 
> 赞同：0
> 
> 时间：2013-03-19T10:30:41.560
> 
> 标签：.net

我有一个添加了表单的控制台应用程序。

此表单中有一个数据网格视图，所有属性都保留为默认值。

在 Program.cs 我在 Main 方法中有这段代码：

```
CompanyActions objCompanyActions = new CompanyActions();

List<Company> analyzedData = new List<Company>();

List<Company> CompaniesFromExternalSource = objCompanyActions.GetExternalCompanyData(@"company.csv");

analyzedData =  objCompanyActions.Compare(CompaniesFromExternalSource);
AnalysisForm objAnalysisForm = new AnalysisForm();

objAnalysisForm.ShowAnalysisData(analyzedData);
Application.Run(objAnalysisForm); 
```

在表格中，我有以下代码：

```
public void ShowAnalysisData(List<Company> analysisData)
{
     analysisGridView.DataSource = analysisData;

     UpdateGridStyle();

} 
```

和

```
 private void UpdateGridStyle()
    {
        foreach (DataGridViewRow row in analysisGridView.Rows)
        {
            string RowType = row.Cells[0].Value.ToString();

            if (RowType == "Insert")
            {
                row.DefaultCellStyle.BackColor = Color.Green;
              //  row.DefaultCellStyle.ForeColor = Color.Black;
            }
            else if (RowType == "Update")
            {
                row.DefaultCellStyle.BackColor = Color.Yellow;
               // row.DefaultCellStyle.ForeColor = Color.Black;
            }
            else
            {
                row.DefaultCellStyle.BackColor = Color.Gray;
              //  row.DefaultCellStyle.ForeColor = Color.Black;
            }
        } 
```

这行不通。网格仍然为每一行保留默认的白色背景？我在这里做错了什么？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:36:53.437

我认为您在错误的时间调用了更改背景颜色的方法。尝试将它放在 CellFormatting 中，如下所示：

```
private void analysisGridView_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    DataGridViewRow row = analysisGridView.Rows[e.RowIndex];
    string RowType = row.Cells[0].Value.ToString();

    if (RowType == "Insert")
    {
        row.DefaultCellStyle.BackColor = Color.Green;
        //  row.DefaultCellStyle.ForeColor = Color.Black;
    }
    else if (RowType == "Update")
    {
        row.DefaultCellStyle.BackColor = Color.Yellow;
        // row.DefaultCellStyle.ForeColor = Color.Black;
    }
        else
    {
        row.DefaultCellStyle.BackColor = Color.Gray;
        //  row.DefaultCellStyle.ForeColor = Color.Black;
    }
} 
```

# c# - Linq将DataTable与动态添加的主键合并

> ID：15496992
> 
> 赞同：0
> 
> 时间：2013-03-19T10:30:42.880
> 
> 标签：c#, linq, datatable

我被这个难住了。

我正在尝试将两个`DataTable`s 合并为一个。最好我会用它`linq`来执行这个任务，但问题是我需要动态地为连接添加条件。每个表的数据来自对存储过程的两个不同调用，并且可以切换使用哪些调用。因此，结果可以在列数和可用的主键上有所不同。
目标是用可以包含 unicode 的第二个数据库替换第一个结果集中的常规字符串（但前提是它包含该特定主键组合的值）。

我的 linq 查询如下所示：

```
var joined = (from DataRow reg in dt1.Rows
                 join DataRow uni in dt2.Rows
                     on new { prim1 = reg.ItemArray[0], prim2 = reg.ItemArray[1] }
                     equals new { prim1 = uni.ItemArray[0], prim2 = uni.ItemArray[1] }
                 select new
                     {
                         prim1 = reg.ItemArray[0],
                         prim2 = reg.ItemArray[1],
                         value1 = reg.ItemArray[4],
                         value2 = uni.ItemArray[3] ?? reg.ItemArray[3]
                     }
                ); 
```

这非常适合我想要的，但正如我所说，我需要能够定义每个表中的哪些列是主键，所以这个：

```
join DataRow uni in dt2.Rows
                     on new { prim1 = reg.ItemArray[0], prim2 = reg.ItemArray[1] }
                     equals new { prim1 = uni.ItemArray[0], prim2 = uni.ItemArray[1] } 
```

需要替换为`DataRelation`在表之间或在执行`linq`动态添加主键之前创建 a 之类的东西。

**另外**，我需要使选择类似于 SQL `*`，而不是指定每一列，因为我不知道第一个结果集中的列数。

我还尝试通过添加主键并进行合并来加入表，但是我如何选择 dt2 中的哪一列来覆盖 dt1 中的哪一列？

```
DataTable join = new DataTable("joined");
join = dt1.Copy();
join.Merge(dt2, false, MissingSchemaAction.Add);
join.AcceptChanges(); 
```

我正在使用VS2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:38:41.000

我最终使用了一种非常简单的方法，它根本不涉及创建主键关系或连接。我确信有更优雅或性能有效的方法来解决问题。

基本上我已经在[Linq 中调整了解决方案，动态添加 where 条件](https://stackoverflow.com/questions/12919504/linq-dynamically-adding-where-conditions)，而不是加入我动态添加`.Where`-clauses。

这样我就可以遍历行并比较每个动态添加的主键：

```
foreach (DataRow regRow in dt1.Rows)
{
    //Select all rows in second result set
    var uniRows = (from DataRow uniRow in dt2.Rows select uniRow);
    //Add where clauses as needed
    if (firstCondition) { uniRows = uniRows.Where(x => x["SalesChannel"] == "001"); }
    else if (secondCondition) { uniRows = uniRows.Where(x => x["Language"] == "SV"); }
    else (thirdCondition) { uniRows = uniRows.Where(x => x["ArticleNo"] == "242356"); }
    // etc...
} 
```

每一行都与第二个结果集中的递减行列表进行比较。

# playframework - 我无法证明 playframework 平面和静态架构的合理性

> ID：15496994
> 
> 赞同：0
> 
> 时间：2013-03-19T10:30:47.617
> 
> 标签：playframework

我正在开始一个新项目，并且在一定程度上无法争论平面架构（控制器和模型 - 没有服务层和没有 daos）以及在控制器中大量使用静态。

在某种程度上，它远离了 DDD 和 fowler 提出/采用的标准企业模式。在欣赏对高质量架构的需求的同时，我发现缺乏“层”令人耳目一新。

我已经看到 Guillaume 对使用“静态”的回答 - [http://stackoverflow.com/a/5193721/501769] 但他没有解决使用 DI 来实现简单的单元测试。我很想在这里听到一些意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:49:22.747

我在 play 2 应用程序中使用服务层和 daos。您可以使用 Guice 或任何其他 DIC 将这些依赖项注入您的控制器。同样困扰我的是数据库或缓存组件的静态使用。当然，您可以在测试期间覆盖这些组件，或者您可以将组件包装到单独的层中，但这始终是样板代码。

你能给我一个链接到纪尧姆对使用“静态”的回答吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T11:08:45.420

Play 2.1 添加了使用注入控制器的能力。对于示例 Spring + Play 应用程序，请查看： [https ://github.com/jamesward/play2bars/tree/java-spring](https://github.com/jamesward/play2bars/tree/java-spring)

# node.js - node-mysql 按时间戳选择记录

> ID：15496998
> 
> 赞同：0
> 
> 时间：2013-03-19T10:31:05.917
> 
> 标签：node.js, node-mysql

我正在尝试使用 NodeJS 和 node-mysql 根据时间戳选择一系列记录。我的代码如下所示：

```
sql = "SELECT pressure, temp1, temp2, UNIX_TIMESTAMP(timestamp)*1000 
AS unix_timestamp
FROM observations WHERE timestamp >= STR_TO_DATE( ? ,'%Y-%m-%d') 
ORDER BY unix_timestamp DESC LIMIT ?;"

var current_temp = db.query(sql,
start_date, num_records,
  function(err, rows, fields){
     if (err){ 
```

变量 start_date 包含 2013-03-01。如果我手动替换“？” 在带有 '2013-03-01' 的 STR_TO_DATE 表达式中，我的查询有效。但是，如果我尝试进行变量替换，我会收到以下错误：

```
TypeError: Object 500 has no method 'apply'
at Query.Sequence.end     (/home/ian/Documents/emacs/org/org_files/computer/nodejs/node_modules/mysql/lib/protocol/sequences/Sequence.js:66:24)
at Query.ErrorPacket     (/home/ian/Documents/emacs/org/org_files/computer/nodejs/node_modules/mysql/lib/protocol/sequences/Query.js:89:8)
at Protocol._parsePacket     (/home/ian/Documents/emacs/org/org_files/computer/nodejs/node_modules/mysql/lib/protocol/Protocol.js:169:24)
at Parser.write     (/home/ian/Documents/emacs/org/org_files/computer/nodejs/node_modules/mysql/lib/protocol/Parser.js:62:12)
at Protocol.write     (/home/ian/Documents/emacs/org/org_files/computer/nodejs/node_modules/mysql/lib/protocol/Protocol.js:36:16)
at write (_stream_readable.js:547:24)
at flow (_stream_readable.js:556:7)
at Socket.pipeOnReadable (_stream_readable.js:588:5)
at Socket.EventEmitter.emit (events.js:92:17)
at emitReadable_ (_stream_readable.js:382:10) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:06:34.417

您的变量应该在一个数组中，根据它们在 SQL 语句中出现的顺序定位，如下所示：

```
 db.query(sql,[start_date, num_records],  function(err, rows, fields){ logic ;}) 
```