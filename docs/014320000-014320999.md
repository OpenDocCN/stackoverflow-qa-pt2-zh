# StackOverflow 问答 14320000-14320999

# magento - 是否有用于打包 Magento Connect 扩展的脚本？

> ID：14320005
> 
> 赞同：2
> 
> 时间：2013-01-14T14:08:02.190
> 
> 标签：magento

我了解如何从商店管理员（系统--> Magento Connect--> 包扩展）创建一个 Magento Connect 包。

是否有某个脚本可以完成此操作？我想将重复输入的相同信息保存到字段中，并使过程更加自动化（用于发布同一插件的多个版本）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:34:06.280

（自我链接，但这是我所知道的唯一类似的）

没有任何官方支持——也就是说我创建了一个脚本，它可以采用标准的、平面的、unix tar 存档并从中创建一个 Magento Connect 包。[请参阅MagentoTarToConnect GitHub](https://github.com/astorm/MagentoTarToConnect)上的构建示例。

该脚本是[magento-tar-to-connect.php](https://github.com/astorm/MagentoTarToConnect/blob/master/magento-tar-to-connect.php)，您可以向它提供一个配置文件，[例如 example-config.php](https://github.com/astorm/MagentoTarToConnect/blob/master/example-config.php)。配置文件包含创建 Magento Connect 包所需的最少信息，并且应该指向 unix tar 存档（您需要单独创建）。

如果缺少功能，我愿意接受拉取请求。

# ruby-on-rails - Rails jquery native vs rails gem

> ID：14320006
> 
> 赞同：0
> 
> 时间：2013-01-14T14:08:03.537
> 
> 标签：ruby-on-rails

我越来越多地使用jquery。但是，有一件事让我很困惑。

使用实现 jquery 模块的 rails gem 比只安装没有 gem 的部分有什么好处？

例如用于 x-editable 的 bootstrap-editable-rails。或用于 Bootstrap 的 twitter-bootstrap-rails。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:17:08.953

*   我不需要手动下载它们，它们可以立即与资产管道无缝协作。
*   由于它只是一个 gem，我可以使用 Bundler 来处理更新、检查新版本、解决依赖关系。
*   它们通常提供与 Rails 的某种集成。看看`twitter-bootstrap-rails`宝石。它为布局、脚手架、使用面包屑的助手等提供生成器。

# android - android地图自动旋转

> ID：14320015
> 
> 赞同：22
> 
> 时间：2013-01-14T14:08:41.880
> 
> 标签：android, google-maps, autorotate

如果您打开 Google 地图应用程序，屏幕右上角有一个按钮，您可以按下该按钮将地图置于您当前位置的中心。然后按钮的图标会发生变化。如果您再次按下相同的按钮，地图会根据您的指南针方向自动旋转。换句话说，地图变得以自我为中心（与以自我为中心的 AKA 始终向上相反）。

Google 最近推出了适用于 Android 的地图 API V2，我当然比旧版本更喜欢它。默认情况下，android maps V2 将包含“center on location”按钮。但是，多次按下它不会启用自动旋转；它只是尝试将地图再次以您的位置为中心。

有谁知道我如何像谷歌地图应用程序一样使用地图 API v2 自动旋转地图？我必须自己实现这个功能，还是在 API 中，我只是没有看到它？我感谢所有帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-01-31T05:45:24.157

好的，这就是我认为应该在一年后完成的方式。如果您发现任何问题，请纠正我。

以下大部分代码处理坐标系之间的差异。我正在使用旋转矢量传感器。来自文档：`Y is tangential to the ground at the device's current location and points towards magnetic north.`另一方面，谷歌地图中的方位似乎指向真北。[此页面显示了转换是如何完成的](https://stackoverflow.com/questions/4308262/calculate-compass-bearing-heading-to-location-in-android)

1) 从您当前的 GPS 位置获取当前的磁偏角

```
@Override
public void onLocationChanged(Location location) {
    GeomagneticField field = new GeomagneticField(
            (float)location.getLatitude(),
            (float)location.getLongitude(),
            (float)location.getAltitude(),
            System.currentTimeMillis()
        );

    // getDeclination returns degrees
    mDeclination = field.getDeclination();
} 
```

2）从偏角和磁北计算方位

```
 @Override
public void onSensorChanged(SensorEvent event) {
    if(event.sensor.getType() == Sensor.TYPE_ROTATION_VECTOR) {
        SensorManager.getRotationMatrixFromVector(
                mRotationMatrix , event.values);
        float[] orientation = new float[3];
        SensorManager.getOrientation(mRotationMatrix, orientation);
        float bearing = Math.toDegrees(orientation[0]) + mDeclination;
        updateCamera(bearing);  
    }
} 
```

3) 更新地图

```
private void updateCamera(float bearing) {
    CameraPosition oldPos = mMap.getCameraPosition();

    CameraPosition pos = CameraPosition.builder(oldPos).bearing(bearing).build();
            mMap.moveCamera(CameraUpdateFactory.newCameraPosition(pos));
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-26T17:05:20.973

我已经成功实现了 aleph_null 解决方案，在这里我将添加一些已接受的解决方案中未提及的细节：

要使上述解决方案起作用，您需要实现 android.hardware.SensorEventListener 接口。

您还需要在 onResume 和 onPause 方法中注册到 SensorEventListener，如下所示：

```
@Override
    protected void onResume() {
     super.onResume();
     mSensorManager.registerListener(this,
             mRotVectSensor,
             SensorManager.SENSOR_STATUS_ACCURACY_LOW);
    }

@Override
protected void onPause() {
    // unregister listener
    super.onPause();
    mSensorManager.unregisterListener(this);
} 
```

“@Bytecode”注意事项：为避免闪烁，请为采样周期使用低值，例如 SensorManager.SENSOR_STATUS_ACCURACY_LOW。

我还注意到传感器发送的数据有时比设备可以处理的多，因此，地图相机开始以一种奇怪的方式移动！

为了控制 onSensorChanged 处理的数据量，我建议以下实现：

```
@Override
public void onSensorChanged(SensorEvent event) {
    if(event.sensor.getType() == Sensor.TYPE_ROTATION_VECTOR) {
        SensorManager.getRotationMatrixFromVector(
                mRotationMatrix, event.values);
        float[] orientation = new float[3];
        SensorManager.getOrientation(mRotationMatrix, orientation);
        if (Math.abs(Math.toDegrees(orientation[0]) - angle) > 0.8) {
            float bearing = (float) Math.toDegrees(orientation[0]) + mDeclination;
            updateCamera(bearing);
        }
        angle = Math.toDegrees(orientation[0]);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-14T08:07:16.797

可以通过向 Sensor Listener for Orientation 注册您的应用程序并在 onSensorChanged 中获取相对于真北的角度并相应地更新相机。角钢可用于承重。可以使用以下代码：

```
Instead of using Sensor.TYPE_ORIENTATION try using getOrinetation api. Sensor.TYPE_ORIENTATION
has been deprecated.

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    if (sensorManager != null)
        sensorManager.registerListener(this,
                sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION),
                SensorManager.SENSOR_DELAY_GAME);
}

public void onSensorChanged(SensorEvent event) {

    float degree = Math.round(event.values[0]);

    Log.d(TAG, "Degree ---------- " + degree);

    updateCamera(degree);

}

private void updateCamera(float bearing) {
    CameraPosition oldPos = googleMap.getCameraPosition();

    CameraPosition pos = CameraPosition.builder(oldPos).bearing(bearing)
            .build();

    googleMap.moveCamera(CameraUpdateFactory.newCameraPosition(pos));

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:06:26.607

抱歉，您必须自己使用[传感器管理器](https://developer.android.com/reference/android/hardware/SensorManager.html)和[相机来实现它](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/CameraUpdateFactory)

如果这些功能可用于地图 api V2，它们肯定会在[GoogleMap](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap)或[UiSettings 上](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/UiSettings)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-23T23:34:25.753

新的**Location**类已经自动为您提供方位，为什么不使用它呢？

示例代码：

```
private void updateCameraBearing(GoogleMap googleMap, Location myLoc) {
    if ( googleMap == null) return;
    CameraPosition camPos = CameraPosition
            .builder(googleMap.getCameraPosition())
            .bearing(myLoc.getBearing())
             // if you want to stay centered - then add the line below
            .target(new LatLng(myLoc.getLatitude(), myLoc.getLongitude()))
            .build();
    googleMap.animateCamera(CameraUpdateFactory.newCameraPosition(camPos));
} 
```

# excel - 如何根据日期过滤数据 - 查找日常开支

> ID：14320017
> 
> 赞同：1
> 
> 时间：2013-01-14T14:08:55.423
> 
> 标签：excel, filter, excel-2007, excel-formula

我在 excel 中有数据，并试图制作如下报告。

## [下面是 Google Drive 中的数据](https://docs.google.com/spreadsheet/ccc?key=0ArQa-CwC41L1dHVscU9TQm1FVUlfemVVLWpEWGp4Y3c)

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Col A  +  Col B      +  Col C  +  Col D  +  Col E  + ..... + Col AQ  +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ Price  + Quantity    + Total   +  Jan 1  +  Jan 2  + ..... + Jan 31  +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+        +=sum(D3:AQ3) +=B3*A3   +         +         + ..... + Jan 31  +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+  1     +  7          +   7     +    2    +     5   +.................+
+ 0.568  +  7          + 3.976   +    3    +     4   +.................+
+ 0.345  +  20         +   6.9   +    12   +     8   +.................+
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+                      + =SUM(C3:C5) +                                 +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+                      + 17.876  +    ??   +    ??   +.................+
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

在`Col A`，我有产品的价格。

在`Col D`, 中`Col E`，我有该月的日期，并且对于每个日期，我都会输入购买的该产品的数量。

`Col B`是相应产品该月的总和。所以我用公式作为`SUM(....)`

`Col C`持有在该产品上花费的金额。

`Col C`最后，我有该月的总费用。

现在我想要的是，从那`Col D`以后，我只想要那天的总费用。

我知道我可以通过编写公式来做到这一点`=(D3*A3)+(D4*A4)+(D5*A5)`，但这会非常难看，因为我的数据中有 235 行。

还有其他选择吗？

任何想法/建议将不胜感激。

**注意** ***我不想为此编写 MACRO 并完成它。任何预定义的 Excel 函数都会有所帮助。***

## [以上数据在 Google Drive](https://docs.google.com/spreadsheet/ccc?key=0ArQa-CwC41L1dHVscU9TQm1FVUlfemVVLWpEWGp4Y3c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:04:23.153

该`Sumproduct`功能将完全满足您的需求。在您的示例电子表格中，输入`D7`公式`=sumproduct($A4:$A6,D4:D6)`，然后复制到以下列。

# c++ - 如果我想在构建时将 HLSL 编译为头文件，如何编写头文件，

> ID：14320019
> 
> 赞同：3
> 
> 时间：2013-01-14T14:08:56.867
> 
> 标签：c++, c, hlsl, directx-11

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/bb509633%28v=vs.85%29.aspx#compiling_at_build_time_to_header_files)说您可以将 .hlsl 文件编译成在头文件中定义的字节数组。这是他们给出的代码。

```
 #include "PixelShader.h"
    ComPtr<ID3D11PixelShader> m_pPixelShader;
    hr = pDevice->CreatePixelShader(g_psshader, 
         sizeof(g_psshader), nullptr, &m_pPixelShader); 
```

`g_psshader`字节数组也是如此。**但是如何定义 g_psshader**呢？我无处可谈。我尝试了串行方式，但都失败了。MSDN 提供了一个[媒体扩展示例](http://go.microsoft.com/fwlink/p/?linkid=241427)。但是该示例中没有 PixelShader.h。

如果您错过了这个问题：如何在上面的代码中定义 g_psshader（我的意思是在标题 PixelShader.h 中）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-20T02:43:11.633

此解决方案适用于 Visual Studio 2012。

要设置与 .fx 或 .hlsl 文件关联的头文件和变量名称：

1.  右键单击解决方案资源管理器中的 .fx 或 .hlsl 文件，然后选择属性。
2.  左侧应该有一棵名为“HLSL 编译器”的树。展开此树并选择“输出文件”。
3.  在右侧的属性表中有几个用于管理 HLSL 编译的属性。

“Header Variable Name” -> 将包含着色器字节码的变量的名称。

"Header File Name" -> 放置着色器字节码的头文件的名称。

我的理解是，如果您将此文件包含到您的代码中，那么您应该可以访问编译到此文件中的变量。在主项目的构建过程开始之前，应将 FX 和 HLSL 代码编译到这些文件中。

注意：您可能还必须更改 General 下的“Entrypoint Name”以反映您希望编译的技术的名称（假设您使用的是 .fx）。您必须为特定着色器文件指定的“着色器类型”和“着色器模型”也可能存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:17:08.090

`g_`前缀暗示它可能是一个全局变量，阅读文档`CreatePixelShader`告诉我它是一个指向已编译字节码的指针。这意味着您首先必须实际加载和编译着色器源代码，然后将指向此编译代码的指针传递给`CreatePixelShader`函数。着色器源的加载/编译有什么功能我不知道，因为我对D3D一无所知，我只是使用一些常识（关于变量名）和快速互联网搜索功能文档。

# c# - .net MVC - 模型构建器循环性能开销

> ID：14320021
> 
> 赞同：0
> 
> 时间：2013-01-14T14:09:03.320
> 
> 标签：c#, asp.net-mvc, performance

我对 MVC 相当陌生，但我了解原理。

我担心虔诚地坚持这一原则会导致性能问题。

例如，为了只发送视图需要显示的数据，我需要：

*   从数据库中检索数据
*   在模型构建器中逐行遍历数据集，格式化字段并将它们放置在视图模型中
*   将此发送到视图，然后需要逐行遍历数据集以显示它。

在大多数情况下，数据中的行数并不多，但我关心的是循环遍历数据集两次的要求。循环操作天生就很慢吗？重复两次似乎很疯狂？

我宁愿通过在视图中放置格式而不是重复循环来妥协。

这是最佳实践吗？在现代系统中，这种循环重复是否微不足道，可以忽略不计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:11:18.157

> 在现代系统中，这种循环重复是如此微不足道，以至于可以忽略不计

很可能是这种情况。

没有循环迭代以 O(n) 运行。它们本质上并不慢（假设你没有很多，我的意思是很多记录）。我会用双循环编写代码并测试它有多慢。这很可能是一个微优化，你的代码在其他地方效率更低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:13:19.927

对于第一点，您可以发出一个 LINQ 查询来获取您的数据。这是最简单的一个。

对于第二点，您可以使用[AutoMapper](http://automapper.org/)。它会自动将您返回的行从数据库映射到您的`ViewModel`类的实例。它可以映射集合/枚举，如[Lists 和 Arrays](https://github.com/AutoMapper/AutoMapper/wiki/Lists-and-arrays)。

对于第三点，您可以将`List<ViewModel>`AutoMapper 返回的值传递给类似网格的[WebGrid](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid%28v=vs.111%29.aspx)。它将负责在视图上显示数据，同时允许您对数据进行分页（仅返回该页面所需的数量，而不是从数据库中获取所有行），对数据进行排序等等。

如果您使用此工作流程，您将不必在不同位置循环访问您的数据。当使用 AutoMapper 和 WebGrid 处理传递给它的行时，循环操作仍然存在。他们只是对你隐藏。这会让你跌得更好。:) 循环是这种工作流程所固有的，但如果您只返回必要的数据（分页数据），它不会对用户体验造成不利影响。

# vb.net - HtmlAgilityPack 获取页面标题和 H1 标签

> ID：14320026
> 
> 赞同：4
> 
> 时间：2013-01-14T14:09:22.230
> 
> 标签：vb.net, tags, browser, webbrowser-control, html-agility-pack

嘿，我正在尝试通过执行以下操作从网页中获取页面标题和 H1 标签

```
 doc.LoadHtml(htmlSourceCode)

    txtTitle.Text = doc.GetElementsByTagName("title").InnerText()

    txtH1.Text = doc.GetElementsByTagName("H1").InnerText()

    For Each channel In doc.DocumentNode.SelectNodes(".//meta[@name='description']")
        txtDescription.Text = channel.Attributes("content").Value
    Next 
```

上面唯一有效的代码是 txtDescription 部分。标题和 H1 都没有。为了获得这两个标签，我需要使用什么类型的语法？

html 代码如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="content-type" content="text/html;charset=utf-8" /><title>
    The title text is here!
</title><link rel="icon" type="image/x-icon" href="http://www.zzzz.com/favicon.ico" />
....
<div class="main-content">
    <div class="block-info">
        <div class="container">
            <div class="article">
                <h1>
                    This is the H1 tag with the text!</h1>

<p>As the 2nd held tru 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T14:38:07.367

您可以使用`doc.DocumentNode.SelectSingleNode("//head/title")`和`doc.DocumentNode.SelectNodes("//body//h1")`。

或`doc.DocumentNode.Descendants("title").SingleOrDefault()`和`doc.DocumentNode.Descendants("h1")`。

# maven - Maven 目标目录为什么这么叫？

> ID：14320029
> 
> 赞同：0
> 
> 时间：2013-01-14T14:09:30.423
> 
> 标签：maven, build, naming-conventions

在 Maven 中，目标目录是保存构建的所有输出的地方。许多其他构建系统（如 sbt、scala 构建工具）也遵循此约定。

出现的问题是“为什么要这样称呼目标目录？”。是因为这个目录是构建过程的“目标”还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:12:18.630

我的猜测是目标目录中会发生很多不同的事情，而不仅仅是构建。例如，如果您执行 mvn jetty:run，它将使用 target 中的类和 maven 项目中的文件运行一个 jetty Web 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:55:57.060

我认为 target 已经被用作计算机科学中各种创造性行为的目标文件夹已经有一段时间了。许多 linux 命令的文档都使用了该术语。由于大多数构建都是在复制文件或创建文件夹，因此它的命名法类似于这些命令是有道理的。

从 mv 信息页面：

```
The mv command is used to rename and move files and directories. Its general syntax is:

mv [options] argument(s)

The arguments are names of files and directories. If two file names are provided as arguments, mv renames the first as the second. If a list of arguments is provided and the final argument in the sequence is the name of an existing directory, mv moves all of the other items into that directory. If the final argument is not an existing directory and more than two arguments are provided, an error message is returned.

mv's syntax can also be expressed in a less general form as:

mv [options] source target

If the target file is located in the same directory as the source file, then the source file can only be renamed. If both are in different directories, then the source file is moved to the directory named in the target argument, in which it can keep its original name or be assigned a new name. If the target is a directory, then the source file or directory is moved into that directory and retains its original name. 
```

# symfony - 来自自定义位置的 Symfony 渲染模板

> ID：14320031
> 
> 赞同：2
> 
> 时间：2013-01-14T14:09:32.530
> 
> 标签：symfony, twig, absolute-path

我正在尝试不使用 Symfony2 所需格式“Bundle:Controller:file_name”来呈现模板，但想从某个自定义位置呈现模板。

控制器中的代码抛出异常

> 可捕获的致命错误：类 __TwigTemplate_509979806d1e38b0f3f78d743b547a88 的对象无法转换为 Symfony/vendor/symfony/symfony/src/Symfony/Bundle/TwigBundle/Debug/TimedTwigEngine.php 第 50 行中的字符串

我的代码：

```
$loader = new \Twig_Loader_Filesystem('/path/to/templates/');
$twig = new \Twig_Environment($loader, array(
    'cache' => __DIR__.'/../../../../app/cache/custom',
));
$tmpl = $twig->loadTemplate('index.twig.html');
return $this->render($tmpl); 
```

甚至可以在 Symfony 中做这样的事情，还是我们必须只使用逻辑名称格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T14:59:50.203

**解决方案**

您可以执行以下操作，替换最后一行`return $this->render($tmpl);`：

```
$response = new Response();
$response->setContent($tmpl);
return $response; 
```

不过不要忘记`use Symfony\Component\HttpFoundation\Response;`在控制器的顶部放一个！

**理论**

好吧，让我们从你现在的位置开始。您在控制器内部，正在调用该`render`方法。该方法定义如下：

```
/**
 * Renders a view.
 *
 * @param string   $view       The view name
 * @param array    $parameters An array of parameters to pass to the view
 * @param Response $response   A response instance
 *
 * @return Response A Response instance
 */
public function render($view, array $parameters = array(), Response $response = null)
{
    return $this->container->get('templating')->renderResponse($view, $parameters, $response);
} 
```

docblock 告诉您它需要一个作为视图名称的字符串，而不是实际的模板。如您所见，它使用`templating`服务并简单地来回传递参数和返回值。

运行`php app/console container:debug`会显示所有已注册服务的列表。您可以看到它`templating`实际上是`Symfony\Bundle\TwigBundle\TwigEngine`. 该方法`renderResponse`具有以下实现：

```
/**
 * Renders a view and returns a Response.
 *
 * @param string   $view       The view name
 * @param array    $parameters An array of parameters to pass to the view
 * @param Response $response   A Response instance
 *
 * @return Response A Response instance
 */
public function renderResponse($view, array $parameters = array(), Response $response = null)
{
    if (null === $response) {
        $response = new Response();
    }

    $response->setContent($this->render($view, $parameters));

    return $response;
} 
```

您现在知道，当您调用该`render`方法时，会传回一个 Response 对象，该对象本质上是一个普通`Response`对象，在该对象上执行了 setContent，使用表示模板的字符串。

我希望你不介意我描述得更详细一点。我这样做是为了向您展示如何自己找到这样的解决方案。

# ios - 将从 xib 加载的视图添加到 UIScrollview

> ID：14320038
> 
> 赞同：2
> 
> 时间：2013-01-14T14:10:13.440
> 
> 标签：ios, uiscrollview, xib

我正在尝试将通过 xib 文件创建的视图添加到 UIScrollview 中。

视图看起来像这样： ![在 Interface Builder 中查看设置](../Images/f4c26db19f956dff807529572723e7b4.png)

我得到的是： ![在代码中添加到 UIScrollview 的视图](../Images/a5b721e652677f2677cecf2febcb70d5.png)

我用来将视图添加到 UIScrollview（在 Storyboard 中设置）的代码是：

初始化代码：

```
NSArray *subviewArray = [[NSBundle mainBundle] loadNibNamed:@"SpuelungProtokollView" owner:self options:nil];
HPSpuelungProtokollView * spuelungProtokollView = [subviewArray objectAtIndex:0];
HPSpuelung * vInfo = pInfo;

// setup Infos
// ... this part is not related to the problem ...

[self setContentView:spuelungProtokollView]; 
```

然后我在中执行以下操作`viewDidLoad:`：

```
[[self scrollView] setContentSize:[[self contentView] frame].size];
[[self scrollView] addSubview:[self contentView]];
[[self contentView] layoutIfNeeded]; 
```

有没有人遇到过类似的问题 - 知道如何正确地将（正确约束）UIView 添加到 UIScrollview？

提前感谢您的回答！

**编辑**

一个奇怪的副作用是：如果我把创建层次结构的视图放在其中，则视图会正确加载`viewDidAppear:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:20:11.970

您应该实施`awakeFromNib:`以初始化视图。如果你不是，那么它可能没有正确设置。

> **NSNibAwaking 协议参考：**这个非正式协议包含一个方法，awakeFromNib。在从 Interface Builder 存档（nib 文件）加载对象后，类可以实现此方法来初始化状态信息。

所以，我想你会想要你的 impl 类似下面的东西：

```
- (void)awakeFromNib {
    [[self scrollView] setContentSize:[[self contentView] frame].size];
    [[self scrollView] addSubview:[self contentView]];
    [[self contentView] layoutIfNeeded];
    return;
} 
```

`awakeFromNib`实际上它的特殊之处在于它是 NSNibAwaking***非正式***协议的一部分（基本上意味着您的对象不必遵守它）。当从 nib 文件 (.xib) 加载对象时会发生这种情况，只要它实现了 awakeFromNib 方法，就会在所有出口连接后发送此消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:46:07.800

我已经能够解决问题 - 我必须`initWithCoder:`像这样设置自定义视图的自动调整掩码：

```
- (id) initWithCoder:(NSCoder *)aDecoder {
    if (self = [super initWithCoder:aDecoder]) {
        [self setAutoresizingMask:UIViewAutoresizingFlexibleHeight];
    }

    return self;
} 
```

希望这对其他人有帮助....

# ocean - 如何在单元测试中以编程方式将窗口设置为 ActiveWindow？

> ID：14320040
> 
> 赞同：1
> 
> 时间：2013-01-14T14:10:17.423
> 
> 标签：ocean

我正在为需要活动 Window3D 的插件编写测试。

我添加它并尝试将其设置为活动

```
var window = PetrelProject.ToggleWindows.Add(WellKnownWindows.Window3D);
PetrelProject.ToggleWindows.Active = window; 
```

但`PetrelProject.ToggleWindows.Active`仍然为空。在新窗口实际处于活动状态之前是否需要进行一些后台处理？如何测试需要活动窗口的代码？

我正在使用海燕 2012.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T20:09:42.560

如果您使用的`PetrelEngine`是 Window 系统，您将无法获得 Window 系统，因此`ActiveWindow`将始终是`null`.

只有启动真正的 Petrel，您的测试才会起作用。

如果这是一个重要的用例，请给您的投资组合联系人写一封电子邮件。

# c - PTHREAD_MUTEX_INITIALIZER 与 pthread_mutex_init ( &mutex, param)

> ID：14320041
> 
> 赞同：101
> 
> 时间：2013-01-14T14:10:17.740
> 
> 标签：c, ubuntu, pthreads, mutex

有没有区别

```
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER; 
```

**或者**

```
pthread_mutex_t lock;
pthread_mutex_init ( &lock, NULL); 
```

如果我只使用第一种方法，我足够安全吗？

**注意：**我的问题主要是指非常小的程序，我最多只能将多个客户端连接到服务器并使用工作线程解决它们的查询。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-14T14:44:02.377

在旧版本的 POSIX 标准中，第一个带有初始化器的方法只能保证使用静态分配的变量，而不是当变量是`auto`在函数体中定义的变量时。尽管我从未见过不允许这样做的平台，即使对于`auto`变量也是如此，并且此限制已在最新版本的 POSIX 标准中删除。

`static`如果可以的话，该变体确实更可取，因为它可以更轻松地编写引导代码。每当您在运行时输入使用这种互斥锁的代码时，您都可以确保互斥锁已被初始化。这是多线程上下文中的宝贵信息。

当您需要互斥体的特殊属性时，使用 init 函数的方法更可取，例如递归或进程之间可共享，而不仅仅是线程之间。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-04-08T19:35:24.933

我想从这[本书](http://pages.cs.wisc.edu/~remzi/OSTEP/)中引用这个：

> 对于`POSIX`线程，有两种方法可以初始化锁。一种方法是使用`PTHREAD_MUTEX_INITIALIZER`，如下所示： `pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;`
> 
> 这样做会将锁设置为默认值，从而使锁可用。`pthread_mutex_init()`执行此操作的动态方法（即在运行时）是如下 调用：`int rc = pthread_mutex_init(&lock, NULL); assert(rc == 0); // always check success!`
> 
> 该例程的第一个参数是锁本身的地址，而第二个参数是一组可选的属性。自己阅读有关属性的更多信息；传入 NULL 只是使用默认值。**无论哪种方式都有效**，但我们通常使用动态（后者）方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-14T14:16:37.080

您可以通过动态初始化设置互斥锁的更多属性，此外，如果您在运行时添加一堆互斥锁，则只能使用动态方法。

如果符合您的需要，静态方法没有任何问题。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-29T06:29:46.763

在默认互斥体属性合适的情况下，宏 PTHREAD_MUTEX_INITIALIZER 可用于初始化互斥体。

如果要为互斥锁指定属性，请使用动态初始化......

效果应等同于通过调用 pthread_mutex_init() 进行动态初始化，参数 attr 指定为 NULL，但不执行错误检查。

# reporting-services - 如何在 mvc 4 的报告查看器报告中隐藏组列显示

> ID：14320044
> 
> 赞同：0
> 
> 时间：2013-01-14T14:10:27.213
> 
> 标签：reporting-services, asp.net-mvc-4

我在 MVC 4 应用程序中使用报表查看器显示 SSRS 报表。在 SSRS 报告中，当我在报告服务器上执行该报告时，它会在报告的左侧显示组列，这意味着在报告的左侧添加了额外的列，显示为该报告创建了哪个字段组。所以同样的报告显示在报告查看器上。请告诉我如何从报告中隐藏该组列或显示报告而不显示该组列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:57:37.917

您可以设置列可见性属性。这可以基于一个表达式，该表达式可以引用一个参数值。

# linux - shell脚本中的计数值

> ID：14320045
> 
> 赞同：1
> 
> 时间：2013-01-14T14:10:30.427
> 
> 标签：linux, shell, unix, grep

我需要帮助，我有一个文件`output.txt`

```
ttl 128
ttl 128
ttl 128
ttl 128
ttl 1
ttl 128
ttl 255
ttl 1
ttl 64
ttl 128
ttl 128
ttl 1 
```

我需要计算文件行中出现相同值的次数。最终结果必须是这样的：

```
ttl 128 - 7 times
ttl 64 - 1 time
ttl 255 - 1 time
ttl 1 - 3 times 
```

我希望你能帮助我。我正在尝试使用 grep 命令。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:14:59.377

你可以用`uniq`and做到这一点`sort`：

```
<output.txt sort -V | uniq -c 
```

输出：

```
3 ttl 1
1 ttl 64
7 ttl 128
1 ttl 255 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:52:31.420

sort, uniq 足以胜任这项工作。但是要获得与所描述的相同的输出格式，请尝试此 awk 行

```
awk '{a[$0]++}END{for(x in a){t=a[x]>1?"times":"time";print x " - "a[x],t}} file 
```

例如

*   连接器“-”
*   如果 count >1 show `times`，否则`time`没有 s。

输出是：

```
ttl 1 - 3  times
ttl 64 - 1 time
ttl 128 - 7  times
ttl 255 - 1 time 
```

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:15:42.307

您可以使用该[`sort`](http://unixhelp.ed.ac.uk/CGI/man-cgi?sort)命令对文件进行排序并[`uniq`](http://unixhelp.ed.ac.uk/CGI/man-cgi?uniq)使其唯一并计算出现次数：

```
 sort output.txt | uniq -c 
```

注意：唯一的“问题”是计数在每次出现之前，在你的例子中在它之后。

# javascript - 询问网页的滚动实现

> ID：14320048
> 
> 赞同：-3
> 
> 时间：2013-01-14T14:10:39.403
> 
> 标签：javascript, jquery

他们如何在[这个网站](http://megastar.vn/mema)上实现滚动功能？我试图阅读文件的来源，但老实说，我一次抓住太多了。能否请您为我分解或提出另一个具有相同功能但更易于理解的站点？

感谢你并致以真诚的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:14:23.780

您可以使用**jQuery 滚动路径**，它会通过定义浏览器在滚动时遵循的自定义路径来实现这样的效果。

[您可以在此处](https://github.com/JoelBesada/scrollpath)找到有关它的更多信息。

[在这里](http://joelb.me/scrollpath/)观看演示。

# c# - LINQ 是否可以动态添加 where 子句

> ID：14320049
> 
> 赞同：10
> 
> 时间：2013-01-14T14:10:40.413
> 
> 标签：c#, linq, entity-framework, where-clause

我想用不同的键搜索我的数据库。根据输入，可能有 1 个键到 10 个键。有没有办法动态地将 OR/AND 子句添加到我的 Linq 查询中？

```
 keys[k] // I have my keys in this array 
 var feedList = (from feed in ctx.Feed
                 where feed.content.contains(keys[0]) 
                       && feed.content.contains(keys[1])
                       && ... // continues with the keys.length
                 select new {
                    FeedId = feed.DuyuruId,
                    FeedTitle = feed.FeedTitle,
                    FeedContent = feed.FeedContents,
                    FeedAuthor = user.UserName + " " +User.UserSurname
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T14:17:44.100

您可以尝试一个[**`.All`**](http://msdn.microsoft.com/en-us/library/bb548541.aspx)子句来检查所有键：

```
where keys.All(key => feed.content.contains(key)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T14:21:42.793

对于 AND 子句，它很简单：

```
var feedList = from feed in ctx.Feed;
foreach(var key in keys){
    feedList = feedList.Where(x=> content.contains(key));
}
var resultQuery = feedList.Select(x=> new {....}); 
```

对于 OR，您将需要使用`Expressions`或尝试[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)及其谓词：

```
var predicate = PredicateBuilder.False<TypeOfYourEntity>();
foreach(var key in keys){
    predicate = predicate.Or(x=> content.contains(key));
}
var resultQuery = ctx.Feed.Where(predicate).Select(x=> new {....}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T14:14:17.493

您可以使用 LINQ 的扩展方法

```
ctx.Feed.Where(f => {  
//Your logic here
if(something != null){
      return f.Property == something
  } 
}).Select( new { FeedId = feed.DuyuruId,
                    FeedTitle = feed.FeedTitle,
                    FeedContent = feed.FeedContents,
                    FeedAuthor = user.UserName + " " +User.UserSurname }) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T14:19:31.273

你可以做这样的事情。请记住，它可能会导致一些开销

```
 var students = ctx.Students;

 if (!String.IsNullOrWhiteSpace(SearchParams.Name))
      students = from s in students where s.Name.StartsWith(SearchParams.Name)

 if (!String.IsNullOrWhiteSpace(SearchParams.Surname))
      students = from s in students where s.Surname.StartsWith(SearchParams.Surname) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-29T18:56:43.607

我想提供一个示例，说明@mellamokb 的答案如何适用于我的场景，以帮助任何需要相当动态`linq`查询的人。

在我的示例中，我只是对`datatable`类进行了扩展，因此我可以检查数据库中是否存在一行数据，因此不会`SQL`引发主键异常。

```
/// <summary>
/// 
/// </summary>
/// <param name="DT"></param>
/// <param name="ColumnNames">Columns to check in affected table.</param>
/// <param name="ItemtoChecks">Values to check in affected column.</param>
/// <returns></returns>
public static bool TableContains(this DataTable DT, string[] ColumnNames, object[] ItemtoChecks)
{
  var result = from row in DT.AsEnumerable()
               where ColumnNames.All(
               r => row.Field<object>(r).ToString() == Convert.ToString(
                 ItemtoChecks[ColumnNames.ToList()
                 .FindIndex(p => p.Equals(r, StringComparison.OrdinalIgnoreCase))]))
               select row;                   
  return (result.Count() > 0);
} 
```

此方法允许您根据需要向 a 添加任意数量的列名`string[]`以及相应的值以签入单独的`object[]`. 查询对 进行检查`datatable`，如果找到匹配项，则方法返回`true`，否则返回`false`。

# javascript - 这行代码是如何工作的？D3.js 不透明度函数

> ID：14320053
> 
> 赞同：1
> 
> 时间：2013-01-14T14:10:45.737
> 
> 标签：javascript, d3.js, opacity

谁能解释这行代码是如何工作的？它是流图的一部分，当我将鼠标悬停在一个流上时，其余部分的不透明度变为 0.2。它真的是？在中间，我不是 100% 的。

```
 .attr("opacity", function(d, j) {
                    return j != i ? 0.2 : 1;
                }); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:15:05.543

它是一个三元运算符、条件运算符、简写 if、内联 if 等。

> ?: 运算符可用作 if...else 语句的快捷方式。它通常用作较大表达式的一部分，其中 if...else 语句会很尴尬。例如：
> 
> ```
>  var now = new Date();
>    var greeting = "Good" + ((now.getHours() > 17) ? " evening." : " day."); 
> ```
> 
> [http://msdn.microsoft.com/en-us/library/ie/be21c7hw(v=vs.94).aspx](http://msdn.microsoft.com/en-us/library/ie/be21c7hw(v=vs.94).aspx)

基本上，如果`j`不等于`i`，返回`0.2`，否则返回`1`。

# sql - 使用 SQL 和 DB2 for i 进行日期算术

> ID：14320057
> 
> 赞同：2
> 
> 时间：2013-01-14T14:10:56.360
> 
> 标签：sql, db2, ibm-midrange

我正在尝试运行将更新特定表中的信息的 SQL 查询。我遇到的问题是我需要查询来提取今天的日期，无论查询运行的日期是什么，然后只提取可以追溯到几年的记录。`AVG`然后我希望它在这两年的时间段内返回一个CUR_CASH_UNITS。我已经尝试过 DATEDIFF 和 DATEADD ，但它们似乎不适用于我拥有的系统，因为它返回 *libl 错误。这是我所拥有的：

```
Select  Month,
    SSSALESNAM,
    CAT,
    Sum(Units) as Units     
From    DW****.******EG
Inner Join  (Select CAT,
                STORE,
                MONTH(DATE) As Month,
                Sum(CUR_CASH_UNITS) As Units
         From   DW*******.****AT        
         Inner Join (Select CAT,
                            CATNUM
                     From   DW****.*****ST) As Category_List             
        On         DW*******.****AT.CATEGORY_NUMBER=Category_List.CATNUM
        --Where  (((CUR_CASH_UNITS.MONTH(DATE)) Between MONTH(DATE) And (MONTH(DATE)-24MONTH))
        Group by Cat,
                 Store,
                 MONTH(DATE)) As Cash_Units

On          DW****.******EG.SSSTR=Cash_Units.STORE           
Group By    Month,
        SSSALESNAM,
        CAT
Order By    Month,
        SSSALESNAM 
```

上面被注释掉的部分只是我试图让日期算术工作的尝试之一。随着`Where`语句注释掉查询正确执行。我表中的日期列标记为 DATE，格式为 YYYY-MM-DD。对 SQL 来说有点新，所以如果我忽略了一些简单的事情，我提前道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:47:22.253

我想你想要一个`where`像下面这样的子句：

```
where "date" between current date - 2 years and current date 
```

您需要双引号，因为`date`它是保留字。剩下的只是为了在过去两年里约会。

# java - java中的javascript逗号运算符

> ID：14320062
> 
> 赞同：0
> 
> 时间：2013-01-14T14:11:06.970
> 
> 标签：java, javascript, math

我正在尝试将以下 javascript 转换为 java

```
var lat2 = Math.asin( Math.sin(lat1)*Math.cos(d/R) + 
          Math.cos(lat1)*Math.sin(d/R)*Math.cos(brng) );
var lon2 = lon1 + Math.atan2(Math.sin(brng)*Math.sin(d/R)*Math.cos(lat1), 
                 Math.cos(d/R)-Math.sin(lat1)*Math.sin(lat2)); 
```

这一切都相当简单，除了我不确定 cos(lat1) 之后的逗号是做什么的？我读到在 javascript 中，它用于将逗号后的值分配给变量，同时仍在评估第一个表达式，尽管在上面的代码中，逗号之前的表达式没有存储？

将其转换为 java 或了解逗号的作用有什么帮助吗？

原来的数学公式也有逗号

```
φ2 = asin( sin(φ1)*cos(d/R) + cos(φ1)*sin(d/R)*cos(θ) )
 λ2 = λ1 + atan2( sin(θ)*sin(d/R)*cos(φ1), cos(d/R)−sin(φ1)*sin(φ2) ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T14:12:06.057

它不是一个运算符，它只是将两个参数分开`atan2`。在 Java 中是[完全一样的。](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#atan2%28double,%20double%29)

（回想一下，`atan2`将`x`和`y`组件分开，以解决旋转歧义。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T14:13:00.313

`Math.atan2`方法接受两个参数。逗号只是将它分开。

> **Math.atan2(y, x)**
> 
> 返回其参数的商的反正切。

**参考：**

*   [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/atan2](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/atan2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:14:48.590

唯一需要的改变是给变量一个类型。

```
double lat2 = Math.asin(Math.sin(lat1) * Math.cos(d / R) +
        Math.cos(lat1) * Math.sin(d / R) * Math.cos(brng));
double lon2 = lon1 + Math.atan2(Math.sin(brng) * Math.sin(d / R) * Math.cos(lat1),
        Math.cos(d / R) - Math.sin(lat1) * Math.sin(lat2)); 
```

# javascript - 如何在 jquery 的另一个函数中嵌入函数调用？

> ID：14320065
> 
> 赞同：0
> 
> 时间：2013-01-14T14:11:31.700
> 
> 标签：javascript, jquery, callback

我有以下代码：我想打电话

# 预加载函数（）

```
 (function ($) {
 $.fn.waterwheelCarousel = function (options) {
 options = $.extend({}, $.fn.waterwheelCarousel.defaults, options || {});

    return $(this).each(function () {
 var data = {
        itemsContainer:         $(this).find(".carousel-images"),
        totalItems:             $(this).find(".carousel-images img").length,
        containerWidth:         $(this).width(),
        containerHeight:        $(this).height(),
        currentCenterItem:      null,
        items:                  [],
        itemDistances:          [],
        waveDistances:          [],
        itemWidths:             [],
        itemHeights:            [],
        itemOpacities:          [],
        carouselRotationsLeft:  0,
        currentlyMoving:        false,
        itemsAnimating:         0,
        currentSpeed:           options.speed,
        intervalTimer:          null
      };

      // Setup the carousel
      beforeLoaded();
      // Preload the images. Once they are preloaded, the passed in function
      // will be called and the carousel will be setup
      preload(function () {
        setupDistanceArrays();
        setupCarousel();
        setupStarterRotation();
      }); 
```

我努力了 ：

`waterwheelCarousel().preloadfunction()`它给了我未定义的方法

我也试过：

```
var t = $("#waterwheelcarouseldefault").waterwheelCarousel(); 
t.preloadfunction(); 
```

没有运气，有人知道如何调用这个函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:16:12.337

该函数不是称为“preload”，而不是“preloadfunction”吗？

你有没有尝试过

```
waterwheelCarousel().preload(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:21:09.630

您还可以通过这种方式创建结构的对象，代码将变得更具可读性。例如：

```
var app = 
{
      // Setup the carousel
      beforeLoaded : beforeLoaded(),
      preload: function () {
        setupDistanceArrays();
        setupCarousel();
        setupStarterRotation();
      }

 }; 
```

这样您就可以通过键入来访问您的功能`app.preload();`

# apache - Apache Web 服务器版本 2.2.17 的问题

> ID：14320066
> 
> 赞同：1
> 
> 时间：2013-01-14T14:11:31.760
> 
> 标签：apache

我们在 Oracle linux 5 主机上的 apache Web 服务器上托管了一些静态内容。最近，主机的IP地址和DNS发生了变化。我们确实对 Web 服务器的配置文件进行了这些更改。现在，可以通过 SSL 端口访问静态内容。但是，我们无法通过常规端口访问它。关于发生了什么的任何想法？

谢谢。

# ms-access - 提交表单时VBA访问新记录

> ID：14320067
> 
> 赞同：0
> 
> 时间：2013-01-14T14:11:41.420
> 
> 标签：ms-access, vba, form-submit, ms-access-2003

我正在处理一个包含 6 个字段的表单，并且必须在提交表单并创建新记录之前填写所有字段。我没有加载每个字段硬编码以显示为空白的表单，而是使用：

```
Private Sub Form_Load()

DoCmd.GoToRecord , , acNewRec
Me.Username = CreateObject("WScript.Network").Username

End Sub 
```

这会开始新记录，但是当用户在未完成表单的情况下关闭时，它会创建不完整的记录并抛出。

如果用户以不完整的形式关闭，我如何删除该行？或者我应该只在用户提交并且所有字段都符合条件时才创建新记录？这里的最佳做法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:21:00.213

最简单和最有效的选项是正确设置基础表中的字段属性：
- 将`Required`属性设置为 True，
- 将 `Allow zero length`属性设置为 False。
无需编程，也将应用于您稍后构建的其他接口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:46:03.877

在表单加载时，将默认值设置为相关的用户名，而不是设置文本框的内容。

您可以首先打开要添加的表单：

```
DoCmd.OpenForm "MyForm",,,,acFormAdd 
```

请参阅：http: [//msdn.microsoft.com/en-us/library/office/ff820845.aspx](http://msdn.microsoft.com/en-us/library/office/ff820845.aspx)

然后，您可以为您知道内容的任何控件设置默认值，如下所示：

```
Private Sub Form_Load()
    Me.Username.DefaultValue = _
        """" & CreateObject("WScript.Network").Username & """"
End Sub 
```

不要忘记像 Date Created 这样的东西可以在表格设计中设置为默认值，并且您可能为某些适用于所有用户的控件设置了默认值，因此可以在表单设计中设置这些控件。

# python - pyral 模块有一个意外的关键字参数“验证”

> ID：14320068
> 
> 赞同：0
> 
> 时间：2013-01-14T14:11:44.633
> 
> 标签：python, rally, pyral

我是该`pyral`模块的新手。我尝试了演示代码，但我无法通过对 Rally 的调用。

```
rally = Rally(server, user, password, workspace=workspace, project=project) 
```

我也试过。

```
rally = Rally(server, user, password, workspace=workspace, project=project, verify_ssl_cert=False) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T21:10:24.623

如果您的站点使用代理服务器进行 Internet 访问，您可能希望查看此答案：[Rally Python API](https://stackoverflow.com/questions/11770283/rally-python-api/)

# android - Android ICS 主屏幕末端的这个 3D 功能叫什么？

> ID：14320069
> 
> 赞同：0
> 
> 时间：2013-01-14T14:11:52.107
> 
> 标签：android, android-layout, 3d, android-4.0-ice-cream-sandwich

Android ICS 4.0.3 主屏幕左/右端的这个 3D 平面功能叫什么？

请参考截图：[左 3D 平面](http://i.imgur.com/2VHWe.png)和[右 3D 平面](http://i.imgur.com/rKe4q.png)

屏幕截图是关于主屏幕的左右端，上面有一个小部件。当在主屏幕的最左侧时，如果我们再往左尝试...屏幕倾斜，如屏幕截图所示。

android 应用程序可以使用这个 3D 功能吗？这个功能叫什么，我们如何使用它？

我有一个想法，这将涉及移动应用程序的 3D 平面，如屏幕截图所示，我不是 android 程序员，所以我很想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:14:23.507

我相信这被称为“过度滚动”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:29:20.763

这种特定效果（过度滚动，如 Booger 所述）是专门为主屏幕实现的，您无法访问它。有些人已经编写了自己的视图寻呼机实现。[ViewPager3D](https://github.com/inovex/ViewPager3D)就是这样一种实现，它使用 3D 透视图并实现超滚动效果。我没有尝试过 ViewPager3D，您需要一些 Android 经验才能将其集成到您的应用程序中。

# ios - sqlite 数据库仅更新 1 条记录

> ID：14320071
> 
> 赞同：0
> 
> 时间：2013-01-14T14:12:04.697
> 
> 标签：ios, sqlite, ios6, sql-update, xcode4.5

我的应用程序使用 SQLite 数据库来存储联系人的某些数据。例如（record_ID、时间戳等）我正在尝试使用此方法使用某些值更新 SQLITE 记录。

初始化数据库后，我曾经调用过这个方法。仅更新了 1 条记录。即使我每次都调用这个方法来更新。

```
- (void) updateRecord:(int)recordID:(NSString *)sapCustId:(NSString *)sapContactId: (NSString *)timestamp {

static sqlite3_stmt *updateStmt = nil;

    if(updateStmt == nil) {
        NSString *sql = [NSString stringWithFormat:@"update contactList set sapCustId = \"%@\", sapContactId = \"%@\", timestamp = \"%@\" Where record_ID = \"%d\"", sapCustId, sapContactId, timestamp, recordID];

        const char *sql_stmt = [sql UTF8String];

        if(sqlite3_prepare_v2(databaseHandle, sql_stmt, -1, &updateStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(databaseHandle));
    }

//        sqlite3_bind_text(updateStmt, 0, [sapCustId UTF8String], -1, SQLITE_TRANSIENT);
//        sqlite3_bind_text(updateStmt, 1, [sapContactId UTF8String], -1, SQLITE_TRANSIENT);
//        sqlite3_bind_int(updateStmt, 2, recordID);
//        sqlite3_bind_text(updateStmt, 3, [timestamp UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(updateStmt))
        NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(databaseHandle));

sqlite3_reset(updateStmt);
sqlite3_close(databaseHandle);

//Reclaim all memory here.
[sapContactId release];
[sapCustId release];

} 
```

告诉我。，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:50:09.653

关键问题是您的代码只构建`updateStmt`一次，因为那是 a`static`并且您正在检查它是否不是`nil`. 因此，第一个 SQL 语句正在构建，但其余的都没有。最简单的解决方法是去掉`static`预选赛和`if(updateStmt == nil) ...`逻辑，你应该去参加比赛。另外，请确保将 替换`sqlite3_reset`为`sqlite3_finalize`。

如果您使用完全相同的 SQL 语句，但每个都只是绑定新值`static`，那么这段代码显然习惯使用的模式（通过每次迭代重用 SQL 中的`sqlite3_stmt`,​​ 绑定`?`占位符和新值，在每次后续迭代之前执行）是有意义的迭代。但看起来您已经注释掉了那部分代码并从 SQL 中删除了占位符，而是使用.`sqlite3_bind_xxx``sqlite3_reset``?``stringWithFormat`

最简单的解决方案是退出`static`模式（摆脱`static`关键字，消除检查以查看它是否为`nil`，并使用`sqlite3_finalize`代替`sqlite3_reset`），你应该没问题。

* * *

额外的想法：

1.  每次更新单行时，您似乎都在关闭数据库。如果您要更新一堆记录，您可能需要考虑保持数据库打开。即使您决定打开和关闭数据库，在代码中的相同逻辑级别执行这些操作也可能有意义（无论是在`updateRecord`方法内部，还是在方法外部`updateRecord`）。它只是使代码更直观。

2.  假设您决定不想费心重复使用以前准备好的 SQL 语句来执行多个`UPDATE`语句，这*需要*使用 SQLite`bind`函数调用，但这并不意味着您不应该考虑使用这些`bind`函数调用反正。虽然通过 构建 SQL 看起来更方便`stringWithFormat`，但通常最好使用`sqlite3_bind_xxx`调用，因为 (a) 可以保护您免受注入攻击；(b) 您不必担心转义参数值，例如，其中包含引号等。

    不要养成用 SQL 构建 SQL 的习惯，`stringWithFormat`因为一般来说，它很脆弱，而且在某些情况下很危险。

3.  在您的 SQL 中，您通常不会在数字字段值周围使用引号。

4.  如果您决定尝试使`static sqlite3_stmt`/`sqlite3_reset`逻辑工作，有两个小观察：

    *   我不会`sqlite3_stmt`在数据会话中使用相同的方法（即不要关闭数据库然后重新打开它）。也许它有效，但鉴于数据库是 的参数`sqlite3_prepare_v2`，我不会做出任何这样的假设。

    *   当您最终关闭数据库时，您真的应该调用`sqlite3_finalize`并`sqlite3_stmt`重新设置它`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:26:58.413

您没有打开数据库：-

```
- (void) updateRecord:(int)recordID:(NSString *)sapCustId:(NSString *)sapContactId: (NSString *)timestamp {

//OPEN DATABASE HERE
[gss initDatabase]; 
static sqlite3_stmt *updateStmt = nil;

    if(updateStmt == nil) {
        NSString *sql = [NSString stringWithFormat:@"update contactList set sapCustId = \"%@\", sapContactId = \"%@\", timestamp = \"%@\" Where record_ID = \"%d\"", sapCustId, sapContactId, timestamp, recordID];

        const char *sql_stmt = [sql UTF8String];

        if(sqlite3_prepare_v2(databaseHandle, sql_stmt, -1, &updateStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(databaseHandle));
    }

//        sqlite3_bind_text(updateStmt, 0, [sapCustId UTF8String], -1, SQLITE_TRANSIENT);
//        sqlite3_bind_text(updateStmt, 1, [sapContactId UTF8String], -1, SQLITE_TRANSIENT);
//        sqlite3_bind_int(updateStmt, 2, recordID);
//        sqlite3_bind_text(updateStmt, 3, [timestamp UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(updateStmt))
        NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(databaseHandle));

sqlite3_reset(updateStmt);
sqlite3_finalize(updateStmt);
sqlite3_close(databaseHandle);

//Reclaim all memory here.
[sapContactId release];
[sapCustId release];

} 
```

添加我在评论中写过的开放数据库的代码。

希望对你有帮助。。

# ruby - ruby 使用正则表达式拆分文本文件

> ID：14320073
> 
> 赞同：0
> 
> 时间：2013-01-14T14:12:10.597
> 
> 标签：ruby, regex

是否可以将此文本文件拆分为带有制表符分隔符的字段？该文件有超过 5,000 行，最后 3 个数据字段可能不存在。Asco 也可能只有 2 或 3 位数字。

```
qualification_code name level_of_education field_of_education asco anzsco
ACM10110 Certificate I in Animal Studies      524 0611 6399-15 361199
ACM20110 Certificate II in Animal Studies     521 0611 6399-15 361199
ACM30110 Certificate III in Animal Studies    514 0611 6399-15 361199
ACM30210 Certificate III in Animal Technology 514 0611 6399-15 361199
ACM30310 Certificate III in Captive Animals   514 0611 6399-15 361199
CHC41012 Certificate IV in Community Services Advocacy 511 0905 2512-13 411711 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:37:44.073

```
require "csv"

CSV.foreach("test.dat", :col_sep => "\t", :headers => true) do |row| 
  puts row[0]
  # or puts row
  # or whatever processing you want here
end 
```

`pgadmin`因为 OP 在评论（免费/OSS）中提出了 Postgres 作为导入目标，[所以从 pgadmin 版本 1.16 开始包含一个导入工具](http://www.pgadmin.org/visualtour16.php)。这仅适用于没有理由以编程方式执行任务（即包括新数据作为其更新）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:32:35.177

下载页面确认数据是制表符分隔的：

> *文件以制表符分隔的文本格式文件形式提供，应在打开前保存到您的计算机中。*

您可以使用[FasterCSV](http://fastercsv.rubyforge.org/)之类的工具为您完成任务。

您可以在示例文件夹中查看有关如何使用它的一些示例代码：
[https ://github.com/JEG2/faster_csv/tree/master/examples](https://github.com/JEG2/faster_csv/tree/master/examples)

# android - 缺少 Android 地图

> ID：14320074
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:12:14.213
> 
> 标签：android, maps

我正在尝试在 Android 中使用 Android 地图。我在[这里遵循了本教程](https://developers.google.com/maps/documentation/android/start#getting_the_google_maps_android_api_v2)：，并完成了以下操作：

*   下载了 Android SDK 中的所有包
*   添加`<uses-library android:name="com.google.android.maps"/>`到 android 清单中。

我还没有钥匙，但我觉得我至少应该能够编译代码。我收到以下导入错误。这些导入不存在：

```
 import com.google.android.maps.GeoPoint;
 import com.google.android.maps.ItemizedOverlay;
 import com.google.android.maps.MapActivity;
 import com.google.android.maps.MapView;
 import com.google.android.maps.OverlayItem; 
```

有谁知道为什么谷歌地图没有添加到我的项目中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:12:14.213

找到了答案：我正在为一个 android 项目而不是 google sdk 目标进行编译。这么奇怪。

# c# - 插入到网格视图中的 Ajax CalendarExtender 填充在同一行中

> ID：14320077
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:12:17.220
> 
> 标签：c#, asp.net, gridview, calendarextender

我对 CalendarExtender ajax 有疑问。我在模板字段中有一个带有日历的网格视图，但是当我运行应用程序时，例如我有 5 个数据行，我的日历都在第一行。有人可以解释我为什么吗？有我的代码：

```
 <asp:GridView ID="gvFeatureCustomer" runat="server" DataKeyNames="Id" AutoGenerateColumns="False"
            ClientIDRowSuffix="Id" OnRowDataBound="dtgdResult_RowDataBound" ClientIDMode="Static"
            ShowHeader="false" CssClass="datagrid" Style="width: 100%;" OnRowCommand="gvFeatureCustomer_RowCommand"
            OnRowDeleting="gvFeatureCustomer_RowDeleting">
            <Columns>
                <asp:TemplateField HeaderText="Nome" FooterText="Nome" SortExpression="Name">
                    <ItemTemplate>
                        <asp:DropDownList ID="ddlName" ClientIDMode="Predictable" runat="server" DataValueField="id"
                            DataTextField="Name" Style="width: 100%;">
                        </asp:DropDownList>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Valore" FooterText="Valore" SortExpression="Value">
                    <ItemTemplate>
                        <asp:TextBox ID="txtValue" AutoPostBack="true" runat="server" CssClass="auto-feature"
                            OnTextChanged="txtValue_TextChanged" Style="width: 100%"></asp:TextBox>
                        <ajaxToolkit:CalendarExtender ID="CalendarExtender99" ClientIDMode="AutoID" Format="dd/MM/yyyy" TargetControlID="txtValue" runat="server">
                        </ajaxToolkit:CalendarExtender>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:CommandField HeaderText="Delete" FooterText="Delete" Visible="true" HeaderStyle-Width="25"
                    ItemStyle-HorizontalAlign="Center" DeleteImageUrl="~/images/delete2.png" ButtonType="Image"
                    ShowDeleteButton="true" />

            </Columns>
        </asp:GridView> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:27:44.393

你应该删除

```
ClientIDMode="Static" 
```

您定义的属性`GridView`，因为如果您使用它，所有`TextBox`控件都将具有相同的 ID，“txtValue”。控件将`CalendarExtender`找到第一个值（位于第一行）并将全部映射到它。

如果您想改进控件 ID 分配的模式，[这里](http://www.west-wind.com/weblog/posts/2010/May/04/Whats-New-in-ASPNET-40-Part-Two-WebForms-and-Visual-Studio-Enhancements)有更多关于该主题的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:42:08.690

添加 `ClientIDMode="AutoID"`到文本框。Asp.net 将弄清楚该怎么做。

# jquery - jquery将图像的属性拖放到textarea中

> ID：14320081
> 
> 赞同：0
> 
> 时间：2013-01-14T14:12:28.613
> 
> 标签：jquery, jquery-ui, drag-and-drop

我在测试拖放功能时遇到了问题。我需要将图像拖放到文本区域中，并且在放置时，文本将附加一个 twitter 用户名，该用户名存储在“data-twname”自定义 html 属性中。

当我在 textarea 中键入文本时出现问题 - 任何后续拖放操作都不会将 twitter 名称附加到文本中，即使它在 start 中有效。这是我使用的 jQuery 代码：

```
$(".draggie").draggable({
    containment: "parent",
    cursor: "move",
    revert: true,
    revertDuration: 100
});
var targetName;
$(".draggie").mousedown(function(){
    targetName = $(this).attr("data-twimage");
});
$("#textCompose").droppable({
    accept: ".draggie",
    drop: function(event) {
        $("#textCompose").append(targetName);
    }
}); 
```

我在这里做了一个演示，澄清一下：[drop demo link](http://blazevic.com.hr/dropdemo/test.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:32:46.633

我认为您的意思是如果您已经插入了一些文本，则不能附加该值。我在这里为您的示例创建了一个小提琴：http: [//jsfiddle.net/QQWHg/](http://jsfiddle.net/QQWHg/)

代替：

```
$("#textCompose").append(targetName); 
```

和：

```
$('#textCompose').val($('#textCompose').val() + targetName); 
```

# ruby-on-rails - RailsAdmin 以嵌套形式隐藏字段

> ID：14320082
> 
> 赞同：4
> 
> 时间：2013-01-14T14:12:29.190
> 
> 标签：ruby-on-rails, nested-forms, rails-admin

我有`User`模型的自定义配置：

```
rails_admin do
  list do
    field :name
    field :email
    field :company
  end

  edit do
    field :first_name
    field :last_name
    field :email
    field :password
    field :company
  end
end 
```

`has_many`使用嵌套表单时有没有办法隐藏公司字段（即关系）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-14T08:57:17.357

```
edit do
  configure :companies do
    hide
  end
end 
```

这**隐藏**了公司字段`create`，同时在上市`update`时仍然**显示它**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T12:19:59.013

```
list do
    field :name
    field :email
    field :company do
      visible do
         false
      end
    end
end 
```

那是你想要的吗？我在一个只有管理员才能使用字段的项目中做了这样的事情。而不是“false”，而是“bindings[:view]._current_user.admin?”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:54:12.020

像这样的东西，也许？

```
list do
  ....
  configure :company do
    hide
  end
end 
```

# virtualbox - 无法从外部访问 8000 上的 OpenStack 的 Horizo n 仪表板

> ID：14320083
> 
> 赞同：2
> 
> 时间：2013-01-14T14:12:32.560
> 
> 标签：virtualbox, nat, openstack

我正在使用 `python manage.py runserver`命令在端口 8000 上使用仪表板，因为问题显示[在这里](https://stackoverflow.com/questions/14276235/open-new-page-from-horizon-login-works-only-if-the-service-is-started-manually)

在本地主机上它可以工作，但是如果我尝试从外部访问它，它就不起作用。为什么？

这是我的情况：

*   带有 ubuntu 和 OpenStack 的客户机，地址为 10.0.2.15，带有 NAT 网络
*   带有 Windows 和 VirtualBox 的主机
*   在 virtualbox 上完成的端口转发到 10.0.2.15:8000（它适用于其他端口，但不适用于 8000）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:52:53.857

Horizo​​n 是一个 Django 应用程序，django runserver 命令默认只绑定到 localhost。如果您希望它可以从外部访问，请执行以下操作：

```
python manage.py runserver 0.0.0.0:8000 
```

# java - 如何检查值是否是手动设置的，而不是使用 setValue（JSlider，JSpinner）？

> ID：14320087
> 
> 赞同：7
> 
> 时间：2013-01-14T14:12:44.373
> 
> 标签：java, swing, jslider, jspinner, setvalue

如何检查 JSlider 或 JSpinner 的值是否是通过图形界面而不是通过方法设置的`setValue( int n)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:23:04.000

每当您以编程方式调用 setValue 时（在调用它之前）将布尔值设置为 true，并在完成事件处理后将其重置为 false。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:17:47.637

在内部，“setValue”被调用。当用户移动滑块的旋钮时，您可以尝试通过实现[ChangeListener](http://docs.oracle.com/javase/tutorial/uiswing/events/changelistener.html)来捕获该事件来捕获该事件。另外，请记住，移动旋钮会触发许多更改事件，因此如果您对滑块的最终值感兴趣，请使用`getValueIsAdjusting`当它评估为 时`false`。

* * *

如果问题出在 a`ChangeListener`上，请尝试扩展 JSlider 组件并添加一个新方法来接收新值和发布它的人（例如，使用 int 代码或枚举），在您进行自定义后派生值的设置真正的 setValue 方法的逻辑。

`setValue`在你的情况下，如果我没记错的话，你会想要阻止调用某个组件是否调用它。

# asp.net-mvc - 如何让 MVC4 向用户呈现一个不会被浏览器缓存的页面？

> ID：14320095
> 
> 赞同：2
> 
> 时间：2013-01-14T14:13:04.297
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在使用使用 @Html.AntiForgeryToken() 创建的 MVC4 防伪令牌。我有一个问题如下：

1.  应用程序打开并首次生成登录表单，其中包含用户名“”的防伪令牌。
2.  登录表单缓存在浏览器中
3.  用户转到另一个页面
4.  用户单击后退按钮并返回登录页面。
5.  登录页面从缓存中显示，并且仍然具有用户名“”的令牌。

在 MVC 中有没有一种方法可以做到，所以当用户单击后退按钮并转到登录页面时，他不会看到缓存版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:22:32.747

尝试这个..

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]
public ActionResult MyAction()
{
    // do something
} 
```

# html - Mozilla firefox中的usemap属性

> ID：14320097
> 
> 赞同：1
> 
> 时间：2013-01-14T14:13:11.033
> 
> 标签：html, google-chrome, firefox, imagemap

我有这个片段：

```

`<body>
<map name="planetmap">
  <area shape="poly" coords="39,195,70,180,33,117,7,77" href="result.php?usa=california" alt="ca">
  <area shape="poly" coords="64,199,81,153,122,160,113,221" href="result.php?usa=arizona" alt="az">
   <area shape="poly" coords="113,221,169,219,175,165,121,159" href="result.php?usa=new mexico" alt="nm">
   <area shape="poly" coords="70,175,89,98,42,88,35,119" href="result.php?usa=nevada" alt="nv">
  <area shape="poly" coords="80,152,123,159,130,116,89,98" href="result.php?usa=utah" alt="ut">
   <area shape="poly" coords="122,159,184,164,186,120,128,114" href="result.php?usa=colorado" alt="co">

   <area shape="poly" coords="31,6,81,17,76,49,23,32" href="result.php?usa=washington" alt="wa">
   <area shape="poly" coords="76,49,23,32,65,91,7,77" href="result.php?usa=oregon" alt="or">
   <area shape="poly" coords="66,92,83,17,118,74,113,101" href="result.php?usa=idaho" alt="id">
  <area shape="poly" coords="104,72,90,18,174,75,177,31" href="result.php?usa=montana" alt="mt">
   <area shape="poly" coords="119,69,112,113,170,118,173,75" href="result.php?usa=wyoming" alt="wy">

   <area shape="poly" coords="178,30,228,34,233,60,175,65" href="result.php?usa=north dakota" alt="nd">
  <area shape="poly" coords="175,65,233,60,231,103,172,98" href="result.php?usa=south dakota" alt="sd">
   <area shape="poly" coords="231,103,172,98,185,131,141,134" href="result.php?usa=nebraska" alt="ne">
   <area shape="poly" coords="185,131,141,134,184,164,249,167" href="result.php?usa=kansas" alt="ks">
  <area shape="poly" coords="201,165,249,167,207,197,250,204" href="result.php?usa=oklahoma" alt="ok">
   <area shape="poly" coords="176,170,259,233,152,245,223,287" href="result.php?usa=texas" alt="tx">

   <area shape="poly" coords="230,36,233,95,275,94,268,41" href="result.php?usa=minnesota" alt="mn">
   <area shape="poly" coords="234,94,275,94,239,127,278,127" href="result.php?usa=iowa" alt="ia">
   <area shape="poly" coords="239,127,278,127,295,170,250,173" href="result.php?usa=missouri" alt="mo">
  <area shape="poly" coords="250,173,251,204,292,177,282,209" href="result.php?usa=arkansas" alt="ar">
   <area shape="poly" coords="255,209,281,210,261,246,298,240" href="result.php?usa=louisiana" alt="la">

   <area shape="poly" coords="269,54,301,72,280,104,302,103" href="result.php?usa=wisconsin" alt="wi">
   <area shape="poly" coords="324,63,346,92,342,107,313,109" href="result.php?usa=michigan" alt="mi">
   <area shape="poly" coords="280,104,302,103,282,143,307,152" href="result.php?usa=illinois" alt="il">
  <area shape="poly" coords="313,109,307,153,329,109,332,139" href="result.php?usa=indiana" alt="in">
   <area shape="poly" coords="329,109,332,139,358,134,362,101" href="result.php?usa=ohio" alt="oh">

    <area shape="poly" coords="332,137,358,153,348,164,302,163" href="result.php?usa=kentucky" alt="ky">
  <area shape="poly" coords="295,171,364,164,343,182,288,188" href="result.php?usa=tennessee" alt="tn">
   <area shape="poly" coords="288,188,308,186,279,234,308,286" href="result.php?usa=mississippi" alt="ms">
   <area shape="poly" coords="309,185,310,235,330,134,340,230" href="result.php?usa=alabama" alt="al">
  <area shape="poly" coords="329,184,352,183,343,230,380,225" href="result.php?usa=georgia" alt="ga">
   <area shape="poly" coords="319,131,374,227,403,279,387,286" href="result.php?usa=florida" alt="fl">

    <area shape="poly" coords="365,126,358,127,372,151,353,144" href="result.php?usa=west virginia" alt="wv">
  <area shape="poly" coords="376,210,395,188,354,184,370,176" href="result.php?usa=south carolina" alt="sc">
   <area shape="poly" coords="405,179,345,179,411,159,364,162" href="result.php?usa=north carolina" alt="nc">
   <area shape="poly" coords="389,125,413,159,372,150,361,163" href="result.php?usa=virginia" alt="va">
  <area shape="poly" coords="367,124,366,100,406,94,410,116" href="result.php?usa=pennsylvania" alt="pa">
   <area shape="poly" coords="438,73,430,38,459,44,440,17" href="result.php?usa=maine" alt="me">
    <area shape="poly" coords="414,56,419,100,405,92,373,90" href="result.php?usa=new york" alt="ny">

     <area shape="poly" coords="426,56,415,55,425,79,418,78" href="result.php?usa=vermont" alt="vt">
  <area shape="poly" coords="429,49,439,73,425,78,428,59" href="result.php?usa=new hampshire" alt="nh">
   <area shape="poly" coords="422,97,419,90,433,86,436,92" href="result.php?usa=connecticut" alt="ct">
   <area shape="poly" coords="418,81,420,89,438,77,441,85" href="result.php?usa=massachusetts" alt="ma">
  <area shape="poly" coords="431,96,412,100,410,117,416,125" href="result.php?usa=new jersey" alt="nj">
   <area shape="poly" coords="406,118,390,124,416,131,412,164" href="result.php?usa=maryland" alt="md">

</map>
<form name="search" method="post"  style="position:relative;left:300px;height:800px; width: 600px;" >
                                                           <div name="map" style="width:1200px; height: 150px;">
                                                           <a name="map"><img src="../images/usa.gif"/ usemap="planetmap"></a>
                                                            </div>` 

这段代码在我使用浏览器时有效，`google chrome` 
但是当我使用`mozilla firefox`图像的某些部分时，
我不知道代码 html 是否取决于浏览器的类型和版本，因为它是一个简单的 html 代码来划分图像的各个部分并根据点击的部分重定向到其他页面
：

*   这个错误的原因是什么？
*   我该如何解决？

            回答 #1

赞同：2

时间：2013-01-14T14:16:04.857

你的`usemap`属性后面有一个斜线。修复它。

改变

```
<img src="../images/usa.gif"/ usemap="planetmap"> 
```

到

```
<img src="../images/usa.gif" usemap="#planetmap" /> 
```

编辑：还尝试将 id 属性添加到地图。

```
<map name="planetmap" id="planetmap"> 
```

```

# javascript - 插入排序对象数组

> ID：14320101
> 
> 赞同：0
> 
> 时间：2013-01-14T14:13:20.180
> 
> 标签：javascript, sorting, complexity-theory

我有一个几乎排序的〜1000个对象的数组，例如`{val: N}`并通过内置对它们进行排序`Array.prototype.sort`：

```
arr.sort(function(a, b) { return a.val - b.val }); 
```

我偶然发现了[http://jsperf.com/javascript-sort/16](http://jsperf.com/javascript-sort/16)并尝试使用插入排序：

```
for (i = 1; i < arr.length; i++) {
    var tmp = arr[i],
    j = i;
    while (arr[j-1].val > tmp.val) {
        arr[j] = arr[j-1];
        --j;
    }
    arr[j] = tmp;
} 
```

但它总是抛出一个错误：`TypeError: Cannot read property 'kills' of undefined`.

在哪里挖？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:21:15.237

您在循环中缺少对 j 的边界检查：

```
while (j > 0 && arr[j-1].val > tmp.val) {
    arr[j] = arr[j-1];
    --j;
} 
```

# c++ - 在 opt 但不是在调试中编译时指向对象的空指针

> ID：14320103
> 
> 赞同：2
> 
> 时间：2013-01-14T14:13:22.080
> 
> 标签：c++, debugging, compilation

我正在编写 C++ 代码并使用 gcc 4.7.1 对其进行编译。我正在使用表达式模板编写代码来组装矩阵和向量，其类型为`MatrixEpetra`或`VectorEpetra`来自`Trilinos`.

我的问题如下：代码应该使用我定义的表达式组装一个向量（对于有限元问题），并将值放在我给他的向量中。向量被赋予使用 a 的组装方法`boost::shared_ptr`。当我在调试模式下编译代码时，代码工作得很好，但是当我使用 opt 模式编译时，向量根本没有填充。可能是什么问题呢？

我知道我没有发布代码片段，但这只是因为我不知道我应该在这里使用哪个级别的详细信息......我的意思是我要发布的行很多而且可能不合适。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:23:04.327

没有更多代码可以继续，我的心理调试技能告诉我，你没有`resize`或`push_back`增加向量的大小，而只是用于`operator[]`将项目添加到保留的内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:16:25.503

代码如下：

```
 integrate( integrationOverSelectedVolumes( this->M_FESpace->mesh(), this->M_markerFunctorPtr ) ,
                 this->M_FESpace->qr(),
                 this->M_ETFESpace,
                 value(bulk / 2.0) * ( pow( J ,2.0) - J + log(J)) * dot(  F_T, grad(phi_i) )
                ) >> M_stiff; 
```

其中 M_stiff 是指向 VectorEpetra 的 boost::shared 指针，第四行是我需要评估和整合的表达式。函数集成的第一个参数（它是一个名为 IntegrateVectorVolumeID 的类的构造函数）解释了必须在哪里集成表达式。请注意，我已将 integrationOverSelectedVolumes() 替换为另一种类型的集成策略（我无法使用），并且我得到了相同的行为，因此问题不存在购买那个。M_stiff 是我所说的指针。我不认为（但我可能错了）我忘记了初始化，因为在类的 setup 方法中，我重置了指向类型对象的所有指针。只要我'

谢谢，波尔

# jquery - 避免jquery冲突

> ID：14320104
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:13:22.897
> 
> 标签：jquery, jquery-plugins

我正在使用 jquery 来缩放图像，它在测试[html上运行良好](http://techchef.co/devTest/test/ "测试页")

但是它显示错误，当我尝试在实时网站中实现它时看起来像冲突错误，因为其他 js 也调用它，它显示以下错误

> `Uncaught TypeError: Object #<HTMLDocument> has no method 'ready'`* 在第 1 行`base.js`

我尝试了下面的代码以避免冲突，但它不起作用看起来我错过了一些东西

```
jquery.noconflict();
$(document).ready(on_ready);
function on_ready() {
$('#search').defaultVal('search here...');
$('#comment').defaultVal('your comment here...');
$('#message').defaultVal('your message here...');
..... 
```

`base.js`文件可以在下面提到的链接上看到

[http://techchef.co/devTest/test/base.js](http://techchef.co/devTest/test/base.js)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:16:02.870

```
jQuery.noConflict();
// cannot use '$' because of .noConflict()
// now the '$'-sign is free for other libraries e.b. MooTools...
// ...that's what noConflict does

// try using 'jQuery' instead of '$' here
jQuery(document).ready(function() {
    jQuery('.selector').click(function() {
        // and so on
    });
});

// or an other solution looks like this

(function($) {
    $(function() {
        // more code using $ as alias to jQuery
    });
})(jQuery)

// in your case try

jQuery(document).ready(function() {
    // the code you have in your on_ready-function
});

// or

jQuery(document).ready(function() {
    on_ready();
});
function on_ready() {
    // your on_ready-function
} 
```

[更多信息](http://api.jquery.com/jQuery.noConflict)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:16:26.000

```
var j = jQuery.noConflict();
// Do something with jQuery
j("div p").hide();
// Do something with another library's $()
$("content").style.display = 'none'; 
```

[有关详细信息，请参阅此文档。](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:52:53.087

当我尝试像下面那样执行此操作时，它显示错误，并且在我调用它的页面上没有检测到函数调用

```
jQuery.noConflict() 
jQuery(document).ready(function($)
{ 
function on_ready() { $('#search').defaultVal('search here...');     
$('#comment').defaultVal('your comment here...'); 
$('#message').defaultVal('your message here...'); }); 
```

})

实际上，base.js 默认调用 on_ready 函数，如下所示

```
$(document).ready(on_ready); 
function on_ready() {
 $('#search').defaultVal('search here...');
 $('#comment').defaultVal('your comment here...');
 $('#message').defaultVal('your message here...'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T06:14:08.390

我刚刚通过替换 in 解决了`$`这个`jQuery`问题`base.js`

它对我有用。希望能帮助到你。

# command-line - Window 的 CMD 简单程序重命名文件不适用于空格

> ID：14320115
> 
> 赞同：1
> 
> 时间：2013-01-14T14:14:28.050
> 
> 标签：command-line, command, command-prompt, cmd

大家好，感谢您的帮助！

我目前有这个程序将单个文件重命名为小写：

这个文件是小写.bat

```
set LC1=%~nx1
set LC1=%LC1:"=%
set LC1=%LC1:A=a%
set LC1=%LC1:B=b%
set LC1=%LC1:C=c%
set LC1=%LC1:D=d%
set LC1=%LC1:E=e%
set LC1=%LC1:F=f%
set LC1=%LC1:G=g%
set LC1=%LC1:H=h%
set LC1=%LC1:I=i%
set LC1=%LC1:J=j%
set LC1=%LC1:K=k%
set LC1=%LC1:L=l%
set LC1=%LC1:M=m%
set LC1=%LC1:N=n%
set LC1=%LC1:O=o%
set LC1=%LC1:P=p%
set LC1=%LC1:Q=q%
set LC1=%LC1:R=r%
set LC1=%LC1:S=s%
set LC1=%LC1:T=t%
set LC1=%LC1:U=u%
set LC1=%LC1:V=v%
set LC1=%LC1:W=w%
set LC1=%LC1:X=x%
set LC1=%LC1:Y=y%
set LC1=%LC1:Z=z%
ren "%1" "%LC1%" 
```

我有这个文件可以重命名（假设）每个子文件夹中的每个文件和文件夹。它通过多次调用上述批处理来完成

这称为 LowerCaseRecursive.bat

```
pushd %1
dir *.* /b /a-d /s > lwrcase.log
for /f %%i in ('type lwrcase.log') do call LowerCase "%%i"
del /q lwrcase.log
popd 
```

您可以使用命令行调用程序并说 LowerCaseRecursive.bat "C:\Test\"。一切正常，但它不会重命名包含 a 的文件所以一切正常，但它似乎无法重命名带有空格的文件，即使它在 lwrcase.log 中有全名。for 只解析到第一个空格。

我对Windows批处理编程知之甚少，有什么想法吗？

非常感谢大家！如果您对此有任何疑问，请问我。

编辑：问题很可能出在对 lowercase.bat 的个人调用上。调试我可以看到对 lowercase.bat 的调用在空间裁剪后已经具有整个文件名。这意味着如果文件是 C:\Hello\My File.txt 它将调用：

```
call Lowercase "C:\Hello\My" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:18:07.460

尝试

```
set LC1=%LC1:' '=''% 
```

小技巧应该适合你，只需按照转换模式，并`space ' '`为你添加行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:12:39.863

您应该仔细阅读 FOR 帮助，通过键入`HELP FOR`或`FOR /?`从命令提示符访问。您将看到 FOR /F 将每一行解析为标记，并且默认标记分隔符是空格和制表符。

您只需将 DELIMS 设置为空即可禁用令牌解析。从技术上讲，您还应该将 EOL 设置为一些永远无法开始路径的字符。默认的 EOL 字符是`;`. 任何以开头的行都`;`将被忽略，并且`;`在文件夹和文件名中有效（尽管非常不寻常）。路径不能以 开头`:`，所以这是一个不错的选择。

```
for /f "eol=: delims=" %%i in ('type lwrcase.log') do call LowerCase "%%i" 
```

**编辑**

以下是对您的代码的一些主动改进:-)

您的 Lowercase.bat 可以做得更小。这是因为搜索和替换的搜索部分不区分大小写。

```
setlocal enableDelayedExpansion
set "LC1=%~nx1"
for %%C in (a b c d e f g h i j k l m n o p q r s t u v w x y z) do (
  set "LC1=!LC1:%%C=%%C!"
)
ren %1 "!LC1!"
exit /b 
```

而且您的 LowerCaseRecursive.bat 也可以大大简化为一行。

```
for /r %1 %%F in (*) do call LowerCase "%%F" 
```

# django - 升级 django-celery 和 celery - 任务会被丢弃吗？

> ID：14320124
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:15:08.727
> 
> 标签：django, celery, django-celery

我正在我的 django 项目中对 celery 进行以下升级。

django-celery==3.0.11 FROM 2.1.2

芹菜 == 3.0.13 来自芹菜 ==2.1.4

我的问题是我的所有任务会继续排队并继续，还是有些任务会被丢弃在流程中？我想确保在升级过程中没有任何内容被跳过或查看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:31:11.870

我在升级 celery 和 django-celery 方面没有任何经验，尽管我将两者都用于生产中的应用程序。但是根据我的理解，只要消息代理（在我的例子中是rabbitmq）正在运行，任务就会排队并在他们再次启动时交给工作人员。

因此，只需停止 celery 工人，升级 celery 和 django-celery 并重新启动工人。

虽然在继续之前，您可能想了解在从 celery 2.x 升级到 3.x 期间是否存在任何已知问题，以避免任何实质性停机。如果可能的话，可以先在开发或登台机器上尝试吗？

# android - 如何取消从 AsyncTask 调用的 HTTP GET 请求？

> ID：14320127
> 
> 赞同：2
> 
> 时间：2013-01-14T14:15:28.787
> 
> 标签：android, http, android-asynctask

我正在使用静态 Web 服务类来调用 HTTP GET 请求，并希望能够在用户按下后退按钮时取消请求/AsyncTask。

我在 doInBackground 中定期检查 isCancelled()，它适用于所有其他操作，但如果 HTTP 请求在用户回击时发生，则在收到结果或超时之前不会取消任务。

由于对 WebServices.getDeviceId() 的静态调用，我在 HTTP 客户端上没有句柄，所以我不能使用 httpclient.getConnectionManager().shutdown(); 停止连接。有人对我如何解决这个问题有任何想法吗？

```
@Override
    protected Void doInBackground(Void... params) {
        if((mInstance.getDeviceId() == null) && !isCancelled()) {
            String deviceId = WebServices.getDeviceId();
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T14:26:43.537

如果要中断http请求，需要引用它并调用`yourHttpRequest.abort()`

在WebServices类中，你不能添加一个类似的方法`abortHttpRequest()`并添加对当前HttpRequest的引用吗？

您可能需要管理一个 http 请求队列并中止正确的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:21:14.637

这是来自 SDK：

```
 Cancelling a task

A task can be cancelled at any time by invoking cancel(boolean). 
Invoking this method will cause subsequent calls to isCancelled() 
to return true. 
After invoking this method, onCancelled(Object), instead of 
onPostExecute(Object) will be invoked after doInBackground(Object[]) returns. 
To ensure that a task is cancelled as quickly as possible, 
you should always check the return value of isCancelled() periodically from 
doInBackground(Object[]), if possible (inside a loop for instance.) 
```

进而

```
if (isCancelled()) 
     break;
else
{
   // do your work here
} 
```

[这](https://stackoverflow.com/a/6053943/1352426)就是答案

# audio - Mlt Melt 为视频添加音轨

> ID：14320129
> 
> 赞同：5
> 
> 时间：2013-01-14T14:15:41.293
> 
> 标签：audio, video, command-line, video-editing, mlt

我有几个不同长度的视频剪辑。还有我想在这些剪辑上混合的音轨。

我用这个：

```
melt original.mp4 -audio-track preview.mp3 -transition mix 
```

如果`preview.mp3`比`original.mp4` 视频结束时的时间长，则混合仍然会播放 mp3 直到结束。

**问题**是如何将音频混合到不长于音轨的剪辑中，以便在视频剪辑结束时剪切音轨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:18:18.923

请试试这个：- 融化 original.mp4 in = clipin out=clipout -track preview.mp3 in=clipin out=clipout

它运行视频与音频并行。

谢谢，

# maven - QTP 到 Jenkins 的集成帮助需要 CI

> ID：14320146
> 
> 赞同：2
> 
> 时间：2013-01-14T14:16:38.213
> 
> 标签：maven, testing, jenkins, qtp, jenkins-plugins

作为 CI 的一部分，我们必须运行来自 Jenkins 的 QTP VB 脚本 谁能建议我最好的集成方式是什么？

进阶谢谢谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:07:47.087

Jenkins 可以运行任何你可以从命令行运行的东西，你可以创建 QTP[自动化对象](http://www.qtpworld.com/index.php?cid=77)：

```
Dim Application
Set Application = CreateObject("QuickTest.Application")
Application.Launch 
Application.Visible = True 
Application.Open "testfile", True 

Dim Test
Set Test = Application.Test
Test.Run 
```

如果你搜索`quicktest.application`你会发现很多例子。

您可以在 Jenkins 中使用带有[cscript](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/cscript_overview.mspx?mfr=true)解释器的*Windows 批处理命令*构建步骤来启动此过程。

# c++ - 处理多个功能文件时 Cucumber-cpp 上的链接器错误

> ID：14320148
> 
> 赞同：0
> 
> 时间：2013-01-14T14:16:57.500
> 
> 标签：c++, cucumber, bdd, linker-errors, cucumber-cpp

我已经使用 BDD 框架*Cucumber-cpp*一段时间了，没有太多问题，但是扩展模块的功能集被证明会引发一些链接器错误。

设置：

*   Linux
*   黄瓜-cpp
*   生成文件

如果我从以下内容开始：

```
# ./test1.feature
Feature: test with a single cpp file

Scenario:
    Given I'm a test
    When a trig happens
    Then light should be ON 
```

和

```
// ./step_definitions/f1.cpp
#include <boost/test/unit_test.hpp>
#include <cucumber-cpp/defs.hpp>

#include <iostream>

using namespace std;

GIVEN("I'm a test")
{
    cerr << "Given..." << endl;
}

WHEN("a trig happens")
{
    cerr << "Trig!" << endl;
}

THEN("light should be on")
{
    cerr << "light ON..." << endl;
} 
```

当我用 make 构建它时，它生成测试二进制文件没有问题，并且通过 cucumber 执行按预期工作。

但是如果我添加另一个功能文件（描述另一个要测试的功能）

```
# ./test2.feature
Feature: another set of feature to impl.

Scenario: extra code
    Given I'm another test code
    When a trig happens
    Then light should be OFF 
```

与相关的测试文件，

```
// ./step_definitions/f2.cpp
#include <boost/test/unit_test.hpp>
#include <cucumber-cpp/defs.hpp>

#include <iostream>

using namespace std;

GIVEN("I'm another test")
{
    cerr << "Given ANOTHER..." << endl;
} 
```

编译这两个文件现在给出以下链接器错误：

```
$  make build
mkdir -p ./objs
mkdir -p ./build
compiling step_definitions/f1.cpp
gcc -c -g -O0 -DDEBUG -Wall -Werror  -DBOOST_ALL_DYN_LINK  -I/usr/local/include -o objs/f1.o -c step_definitions/f1.cpp
compiling step_definitions/f2.cpp
gcc -c -g -O0 -DDEBUG -Wall -Werror  -DBOOST_ALL_DYN_LINK  -I/usr/local/include -o objs/f2.o -c step_definitions/f2.cpp
building feature-test...
gcc  -DBOOST_ALL_DYN_LINK  -I/usr/local/include  -L/usr/local/lib -o feature-test objs/f1.o objs/f2.o -lcucumber-cpp -lboost_regex -lboost_system -lboost_thread -lboost_unit_test_framework -lboost_date_time   
objs/f2.o: In function `toSourceString':
/usr/local/include/cucumber-cpp/internal/step/StepManager.hpp:161: multiple definition of `CukeObject0::cukeRegId'
objs/f1.o:/usr/local/include/cucumber-cpp/internal/step/StepManager.hpp:161: first defined here
objs/f2.o: In function `CukeObject0::body()':
/home/fred/dev/cuketest/step_definitions/f2.cpp:16: multiple definition of `CukeObject0::body()'
objs/f1.o:/home/fred/dev/cuketest/step_definitions/f1.cpp:15: first defined here
collect2: ld returned 1 exit status
make: *** [build] Error 1 
```

查看生成的 obj 文件，给出：

```
$  nm objs/f2.o | grep "cukeRegId"
0000000000000395 t _GLOBAL__sub_I__ZN11CukeObject09cukeRegIdE
0000000000000000 B _ZN11CukeObject09cukeRegIdE
$  nm objs/f1.o | grep "cukeRegId"
000000000000069e t _GLOBAL__sub_I__ZN11CukeObject09cukeRegIdE
0000000000000000 B _ZN11CukeObject09cukeRegIdE
0000000000000004 B _ZN11CukeObject19cukeRegIdE
0000000000000008 B _ZN11CukeObject29cukeRegIdE 
```

问题看起来像 cukeRegId 函数在 2 个 obj 文件中具有完全相同的修饰名称，从而导致链接器错误。现在，我对如何防止这种情况感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T19:21:29.537

在这方面挖掘互联网，我发现了一个与该特定问题相关的[错误条目。](https://github.com/cucumber/cucumber-cpp/issues/36)事实证明，在每个 cpp 文件中，我们必须为**CUKE_OBJECT_PREFIX**声明一个唯一的定义值，以避免在链接器时发生对象命名冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T08:46:27.557

我知道这是旧线程。但我只是想强调一下这个[页面](https://github.com/cucumber/cucumber-cpp/issues/36)上提到的最简单的解决方案，那就是将 cuke 步骤定义放在匿名命名空间中。

# .net - 将 Amersfoort RD New (epsg:28992) 的经纬度转换为 xy

> ID：14320149
> 
> 赞同：0
> 
> 时间：2013-01-14T14:16:57.997
> 
> 标签：.net, gps, coordinates, gis, coordinate-transformation

谁能帮我将 GPS 经纬度转换为 Amersfoort RD New (epsg:28992) 投影系统的 xy 坐标。

我的起点（来自 GPS 设备的数据）是这样的："$GPGGA,071132.784, 5157.3883,N,00434.4648,E,1,03,4.5,-5.1,M,47.1,M,,0000*73"

或 51°57'23,1600"N;004°34'27,5760"E

在另一个没有 GPS 的 GIS 软件中，我使用上述投影系统在同一位置获得以下 x 和 y 值。X: 99128,7851960541 Y: 441194,717554809

我已经尝试过不同的方法，但仍然没有成功。目标是在 GIS 软件中实时可视化当前 GPS 位置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:01:37.693

最好的答案是使用第三方库为您进行转换。例如[ArcGIS 的 GeometryService.Project web 方法](http://resources.arcgis.com/en/help/rest/apiref/project.html)或[PROJ.4 的 API](http://trac.osgeo.org/proj/wiki/ProjAPI)。

如果您想自己进行数学运算，则必须查看[空间参考](http://spatialreference.org/ref/epsg/28992/)并自己进行数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:47:31.660

如果您使用`PROJ.4`Api，您可以从此链接获取 Proj4 转换定义字符串：http: [//spatialreference.org/ref/epsg/28992/proj4/](http://spatialreference.org/ref/epsg/28992/proj4/)

如果您想自己实现该转换：

它是一个`Oblique Stereographic projection`要使用的确切参数：[epsg/28992](http://spatialreference.org/ref/epsg/28992/html/)

这些公式在第 62 页的[http://www.epsg.org/guides/docs/g7-2.pdf](http://www.epsg.org/guides/docs/g7-2.pdf)中进行了描述 ，Amersfoort RD 还有一个示例。

# console - Google Play 开发者控制台：缺少一些统计信息

> ID：14320150
> 
> 赞同：2
> 
> 时间：2013-01-14T14:17:00.263
> 
> 标签：console, google-play

我是 Google 开发者帐户的所有者。有了它，我可以连接到 Google Play 的开发者控制台，它可以让我获得关于我的不同应用程序的统计信息。

有两种可用的统计数据：每天显示的设备/用户的活动安装总数（应用程序的整体活动安装的演变），以及其他统计数据，例如每日安装、每日卸载、应用程序的每日更新。哪个更精确，也很有趣。

开发者控制台为此数据提供了一些排序选项。您可以按 Android 版本、运营商、国家/地区...等显示它。

我对活动安装的总数没有任何问题，在排序的图表和列表中，它每天显示每个版本/运营商/任何内容。

事实上，我对“每日”类型的统计数据有疑问。例如，我知道我的应用程序 wonderful_app 在过去 2 个月内被下载了 400 次，在 4 个 Android 版本上。谷歌可以向我显示每个版本的活动安装，所以我知道（在这段时间间隔内每个版本的数量都增加了）。

但是当我查看同一时期的每日安装量时，我只能看到两个 Android 版本。这怎么可能？

对于其他排序选项（国家、应用程序版本......），我有类似的结果，每日统计数据总是只显示列表中的几个元素，所以有些数据我错过了，并且非常需要用于分析目的。

任何人都知道这是一个错误，还是我无法理解的“功能”？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:26:17.047

我终于从谷歌得到了答案，即使它不是真正的解决方案，我也会关闭这个问题，因为我将不得不处理它。

他们回答说统计数据不能太精确，因为经常缺少信息并且系列之间缺乏连贯性。这是因为该服务的 v2 是最新的，并且有一天它可能会变得更好。

# jquery - 使用 jQuery 应用批量 CSS

> ID：14320155
> 
> 赞同：-3
> 
> 时间：2013-01-14T14:17:20.077
> 
> 标签：jquery, html, css

我不想手动执行 $("#element").css('attr','val'); 因为我有很多元素。以下说明了我正在尝试做但无法正常工作的内容。这是一个 PHP 文件，但 PHP 无关紧要：

```
<?

     $css1 = "
              #ele1 { border: 1 px solid blue; }
              #ele2 { border: 1 px solid blue; }
            "; 

     $css2 = "
              #ele1 { border: 1 px solid black; }
              #ele2 { border: 1 px solid black; }
            "; 

?>

<html>
  <head>
    <style id="appliedCss"></style>
  </head>
  <body>
    ....... PAGE HERE .....
    <script>
       $("#btn1").click(function (e) {
             $("#appliedCss").html(<?=$css1?>);
       });

       $("#btn2").click(function (e) {
             $("#appliedCss").html(<?=$css2?>);
       });
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:41:20.937

试试这个

```
$('.more-than-one-element').css('name', 'value'); 
```

或者

```
$('#element').css({
    'name1': 'value1',
    'name2': 'value2',
    ...
}); 
```

或（但要小心这种方式，它将整个样式附加到 HTML 中的样式属性）

```
var cssText = $('#element').css('cssText');
cssText += 'name1: value1, name2, value2, ...';
$('#element').css('cssText', cssText); 
```

# url - Scrapy：遵循特定规则的 URL

> ID：14320156
> 
> 赞同：2
> 
> 时间：2013-01-14T14:17:28.380
> 
> 标签：url, sitemap, scrapy, rule, web-crawler

我是 Scrapy 的新手，我在任何地方都找不到我需要做的事情。

我需要抓取一组非常相似的 URL，但我无法从一个到另一个访问。例如，我需要抓取以下 URL：

```
www.example.com/1.html
www.example.com/2.html
(...)
www.example.com/1000.html 
```

但在第一页上没有链接到其他页面，即是独立的。

我怎样才能做到这一点？（对不起我的英语不好）

像这样的东西：

```
class MySpider(BaseSpider):
   name = 'example.com'
   allowed_domains = ['example.com']
   Start_urls = [
      'http://www.example.com/1.html',
      'http://www.example.com/2.html',
      'http://www.example.com/3.html',
   ] 
```

但是对于超过 3 个不同的页面

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:49:52.180

如果页面都是这种形式（www.example.com/x.html），那么您可以执行以下操作：

start_urls = ['http://www.example.com/%s.html' % page for page in xrange(1, 1000)]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T07:10:40.177

您应该覆盖 start_requests 而不是 Start_urls 例如：

```
def start_requests(self):
    base_url = 'http://www.example.com/
    for i in xrange(1, 10000):
        url = base_url + str(i) + '.html'
        yield Request(url, dont_filter=False, callback='parse_method') 
```

此外，您可以从队列中提供您的 URL 列表：

```
def start_requests(self):
    while True:
        url = queue.get()
        yield Request(url, dont_filter=False, callback='parse_method') 
```

请注意，scrapy 的调度程序可能会因同时调度大量 URL 而超载，所以要小心。

# python - Matplotlib imshow：数据旋转？

> ID：14320159
> 
> 赞同：22
> 
> 时间：2013-01-14T14:17:37.173
> 
> 标签：python, matplotlib

我试图用散点图绘制一些数据。我的代码是

```
import matplotlib.pyplot as plt
import matplotlib as mpl
import numpy as np
from scipy.interpolate import griddata
data = np.loadtxt('file1.txt')
x = data[:,0]
y = data[:,1]
z = data[:,2]
plt.scatter(x, y, c=z, s=100, cmap=mpl.cm.spectral)
cbar=plt.colorbar()
s=18
plt.ylabel(r"$a_v$", size=s)
plt.xlabel(r"$a_{\rm min}$", size=s)
plt.xlim([x.min(),x.max()])
plt.ylim([y.min(),y.max()])
plt.show() 
```

结果是 ![在此处输入图像描述](../Images/839923ad7003b08ded5bc5afe75d213c.png)

现在我有了用一些数据尝试 imshow 的想法，因为我不喜欢分散的圆圈。所以我尝试了这个

```
from matplotlib.mlab import griddata
import matplotlib.pyplot as plt
data = np.loadtxt('file1.txt')
x = data[:,0]
y = data[:,1]
z = data[:,2]

N = 30j
extent = (min(x), max(x), min(y), max(y))

xs,ys = np.mgrid[extent[0]:extent[1]:N, extent[2]:extent[3]:N]

resampled = griddata(x, y, z, xs, ys)

plt.imshow(resampled.T, extent=extent)
s=18
plt.ylabel(r"$a_v$", size=s)
plt.xlabel(r"$a_{\rm min}$", size=s)
plt.xlim([x.min(),x.max()])
plt.ylim([y.min(),y.max()])
cbar=plt.colorbar()
plt.show() 
```

有了这个结果： ![在此处输入图像描述](../Images/b76d1d0244497edb8eebf3ffdb1a9caa.png)

我的问题显然是为什么要`imshow()`反转数据？这里到底发生了什么？

PS：这是[数据](https://dl.dropbox.com/u/8189209/file1.txt)，以防有人想和他们一起玩

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-14T14:22:25.277

查看 的关键字参数`imshow`。有`origin`。默认值为“上”，但您想要“下”。

默认值对于绘制图像很有意义，通常从左上角开始。对于大多数矩阵绘图，您需要`origin="lower"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T14:22:07.227

不是倒置，只是翻转。默认的原点`imshow`在左上角而不是左下角。`imshow`有一个参数来指定原点，它被命名为原点。或者，您可以在`matplotlib.conf`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-18T13:14:22.060

考虑使用[`pcolormesh`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.pcolormesh)或者[`contourf`](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.contourf)如果你想绘制表单的数据`f(X, Y) = Z`。`imshow`简单地绘制数据`Z`，缩放和重新采样确实是手动完成的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-09T19:03:43.583

顺便说一句，您可以使用 marker='s' 在散点图中绘制正方形而不是圆形，然后保留原始代码。

# ios - Facebook SDK 3.1 登录错误

> ID：14320163
> 
> 赞同：0
> 
> 时间：2013-01-14T14:18:01.030
> 
> 标签：ios, facebook, facebook-ios-sdk

当我登录FB出现错误信息！！错误日志：FBConditionalLog：FBSession：读取权限的权限请求包含意外的发布或管理权限

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
    NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", @"user_photos", @"email", nil];
    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self sessionStateChanged:session
                                                                 state:state
                                                                 error:error];
                                         }]; 
```

如何添加@“publish_actions”权限而不是错误消息？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T15:49:05.330

使用 openActiveSessionWithPublishPermissions 而不是 openActiveSessionWithReadPermissions。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:59:48.723

像这样的东西

```
NSArray *permissions = [NSArray arrayWithObjects:@"publish_actions", nil];

[[FBSession activeSession] reauthorizeWithPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceFriends completionHandler:^(FBSession *session, NSError *error) { /* handle success + failure in block */ }]; 
```

见[https://developers.facebook.com/docs/howtos/ios-6/](https://developers.facebook.com/docs/howtos/ios-6/)

# windows-runtime - 临时应用数据存储多久会被删除一次？

> ID：14320164
> 
> 赞同：1
> 
> 时间：2013-01-14T14:18:05.693
> 
> 标签：windows-runtime

我已阅读有关应用程序数据的文档（[http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx)），但我对临时数据存储有疑问：

我知道如果用户开始磁盘清理或磁盘已满，它的内容可能会经常被删除（可能是每次启动应用程序时）。

但是如果硬盘有足够的可用空间，内容是否会被删除？维护任务是否不断删除文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:50:15.840

在文档中指定这是*系统可以随时删除的数据。*所以我会假设我的文件如果有一个活动的打开句柄就不会被删除，但除此之外，我认为假设任何特定的未记录行为是不安全的。例如，我希望在平板设备或手机上更频繁地删除临时文件。

# c# - 添加 * 或更改背景（组框）颜色时脏标志为更改的文本框

> ID：14320167
> 
> 赞同：0
> 
> 时间：2013-01-14T14:18:14.120
> 
> 标签：c#, .net, winforms, properties, event-handling

我有一个带有某种颜色背景的组框，其中包含一个文本框。我在想办法帮助用户看到文本框很脏，并认为改变背景组框颜色和/或在组框和/或表单文本的名称中添加“*”会很好。但是我什至无法更改_isDirty 的属性。更不用说实现这个想法了。我确信有人做过类似的事情，希望你能帮助我。我正在使用 C# .Net framework 2.0（它也应该在 4.0 中工作，但我相信这是向后兼容的）。IDE 是 Visual Studios 10。

这个想法是当文本框改变时，_isDirty "flag"/"property" 将被改变，以及它何时被保存：

_isDirty = true 当文本框被改变时

_isDirty = false 保存文本框时

这就是我目前所拥有的......虽然我尝试了不同的东西，包括 INotify 这根本不适合我......

```
 public static bool _isDirty = false;

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        string newtext = textBox1.Text;
        if (currentText != newtext)
        {
            // This solves the problem of initial text being tagged as changed text
            if (currentText == "")
            {
                _isDirty = false;
            }
            else
            {
                //OnIsDirtyChanged();
                _isDirty = true; //might have to change with the dirty marker
            }
            currentText = newtext;
        }
    }

     public bool IsDirty
    {
        get { return _isDirty; }
        set
        {
            if (_isDirty != value)
            {
                _isDirty = value;
                OnIsDirtyChanged(_isDirty);
            }
        }
    }

    protected void OnIsDirtyChanged(bool _isDirty)
    {
        if (_isDirty == true)
        {
            this.Text += "*";
        }
    } 
```

如果有人对我的处理方式有不同的建议，或者有更好的用户友好方式，我愿意接受建议。谢谢！

编辑：答案实际上分为两部分！BRAM 给出了使属性更改事件有效的更正。如果您想知道如何更改背景颜色，请查看 ZARATHOS 的答案。不幸的是，我只能标记一个答案，因此要标记使主要部分起作用的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:22:08.977

我更愿意将文本框背景更改为浅红色（并最终更改文本以保持可读性）而不触及只是一个容器元素的组框，并且应保留其完整性以避免混淆用户。如果问题出在文本框中，请突出显示文本框。

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    string newtext = textBox1.Text;

    if (currentText != newtext)
    {
        if (currentText == "")
        {
            textBox1.BackColor = SystemColors.Window;
            textBox1.Font = new Font(textBox1.Font, FontStyle.Regular);
        }
        else
        {
            textBox1.BackColor = Color.LightCoral;
            textBox1.Font = new Font(textBox1.Font, FontStyle.Bold);
        }

        currentText = newtext;
    }
} 
```

你不需要其他任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:35:00.320

您正在设置 _isDirty 所以事件不会触发。
您需要设置 IsDirty。

```
 if (currentText != newtext)
    {
        // This solves the problem of initial text being tagged as changed text
        if (currentText == "")
        {
            IsDirty = false;
        }
        else
        {
            //OnIsDirtyChanged();
            IsDirty = true; //might have to change with the dirty marker
        }
        currentText = newtext;
    } 
```

这条线是错误的

```
OnIsDirtyChanged(_isDirty); 
```

需要是

```
OnIsDirtyChanged(IsDirty); 
```

假设这是通知事件。

# c# - ASP.NET Web API - 如何更改 XML 对象图中的最大项目数量

> ID：14320170
> 
> 赞同：4
> 
> 时间：2013-01-14T14:18:19.437
> 
> 标签：c#, xml-serialization, asp.net-web-api

当通过 ASP.NET Web API 服务返回大量 XML 数据时，`HTTP Error 500 (Internal Server Error)`会产生错误：。当模型中存在循环依赖时，通常会发现此错误，但此处并非如此，因为当数据量较少时，数据会完美返回。

当节点数超过60,000时似乎会产生错误，经过研究我发现有一个WCF参数限制对象图中的项目数量，该参数的默认值为：65,536 is this what is导致我的问题？如果是这样，我可以在 ASP.NET Web API 中更改该值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T14:12:40.013

您真的需要返回那么多节点吗？也许您应该考虑在查询中使用 $top={pageSize}&$skip={pageNumber} 对其进行分页。但是我假设您在 API 控制器中使用 [Queryable] 属性。如果是这样，您可以尝试使用 MaxNodeCount 属性。

# jquery - jQuery Localscroll ie8

> ID：14320173
> 
> 赞同：0
> 
> 时间：2013-01-14T14:18:35.627
> 
> 标签：jquery, html, internet-explorer-8

我的 jquery localscroll 插件有问题，它似乎在除 IE8 之外的所有浏览器上都可以正常工作。

在 IE8 中，它向下滚动并工作，但它不会滚动到正确的 id。

```
$(document).ready(function(){

        $('#nav').localScroll({ duration: 2000, easing: "swing"});
        //.parallax(xPosition, speedFactor, outerHeight) options:
        //xPosition - Horizontal position of the element
        //inertia - speed to move relative to vertical scroll. Example: 0.1 is one tenth the speed of scrolling, 2 is twice the speed of scrolling
        //outerHeight (true/false) - Whether or not jQuery should use it's outerHeight option to determine when a section is in the viewport
        $('.parallax__one').parallax("50%", 0.3);
        $('.parallax__two').parallax("50%", 0.4);
        $('.slideleft').parallax("50%", 0.4);
        $('.parallax__four').parallax("50%", 0.3);
        $('.parallax__five').parallax("50%", 0.6);
        $('.return8').parallax("65%", 2);
    });

<header class="header">
<div class="container">
    <ul class="menu" id="nav">
    <p class="ir header__logo"><span><a href="#one" class="js-action" date-action="one">Logo</a></span></p>
        <li class="menu__list"><a href="#two" class="js-action" date-action="two">01<b>about</b></a></li>
        <li class="menu__list"><a href="#three" class="js-action" date-action="three">02<b>the product</b></a></li>
        <li class="menu__list"><a href="#four" class="js-action" date-action="four">03<b>the future</b></a></li>
        <li class="menu__list"><a href="#five" class="js-action" date-action="five">04<b>contact</b></a></li>

    </ul>

</div> 
```

# jquery - 带有 jQ uery 的背景大小的 IE8

> ID：14320181
> 
> 赞同：0
> 
> 时间：2013-01-14T14:19:15.973
> 
> 标签：jquery, joomla, internet-explorer-8, css, cover

我正在一个具有完整浏览器大小背景的网站上工作。我用 CSS 和 CSS background-size 属性做到了这一点。

但是在 IE8 中这行不通。所以我搜索了一个解决方案，我想我找到了 1\. 一个添加背景大小“封面”属性的 jQuery 插件。

无论如何，我不是这方面的专家......而且它不会起作用。背景加载了一个 php 脚本（joomla 的插件），程序员制作该脚本来加载背景图像，如果有一个与文章别名同名的图像，则该图像被加载为背景图像。

可以做一些 IE css 修复，但如果这个 jQuery 可以工作。我想知道怎么做。我做错了什么。

插件来源：[http](http://louisremi.github.com/jquery.backgroundSize.js/demo/)
://louisremi.github.com/jquery.backgroundSize.js/demo/ 插件Github：github.com/louisremi/jquery.backgroundSize.js

我正在开发的网站：http: [//u-spa.netserver11.net/](http://u-spa.netserver11.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:31:26.747

如果您下载`jquery.backgroundSize.js`并将其放在您的服务器上。`<script src="jquery.backgroundSize.js" type="text/javascript"></script>`在你的 joomla 页面和 jQuery的头部链接到它`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>`（这是插件页面上使用的那个）。

然后，您应该只需要添加：

```
$(function() {
    $(document.body).css({backgroundSize: "cover"});
}); 
```

到页面的标题，插件应该被调用并应用于页面的正文。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:51:21.537

而不是body标签，我在html标签上加载了我的bg，并将jQuery添加css更改为html。现在它适用于所有浏览器！

# php - 在模态（ajax）中加载新页面，同时使用 pushState 更改 URI

> ID：14320184
> 
> 赞同：1
> 
> 时间：2013-01-14T14:19:26.320
> 
> 标签：php, jquery, ajax, codeigniter

我正在尝试在弹出窗口/模式中加载新内容（登录/线程创建/线程视图/快速搜索），但也使用 pushState 更改 URI。

现在，我已经了解了一般概念，但对确切的机制有点困惑。

我在浏览网站时发现了 www.usatoday.com/news。我做了一些研究，似乎他们使用 pushState 来更改 URI 并通过 AJAX 在模态窗口中加载内容。

我的问题具体涉及如何在模式窗口中拉出和显示“新页面”。很明显，您需要一个新的控制器来显示正确的 URI 并使其可共享/可抓取。但是是否可以获取该页面并直接以模式显示？还是您必须在全新的 ajax 驱动模型/视图中处理信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:23:11.273

你用的是什么模态？例如，如果您使用的是 fancybox。你只需给你的页面的锚链接一个额外的fancybox类，页面就会以模式打开，所有的ajax都会为你处理。然后，您可以在 fancybox 的 aftershow 回调函数中添加您的 pushstate 代码。

还有一个关闭后回调，您可以在其中弹出状态或推送新状态以将 uri 恢复为原始状态。

如何处理从外部进入 uri 的人取决于您。但是如果您已经将该页面构建为独立链接，那么它应该不是问题。如果您希望它在fancybox 中打开，尽管您必须在doc 上为该页面准备fancybox。

您还说，很明显您必须为此配备一个新控制器。这根本不是真的，事实上我根本不会有一个单独的控制器，如果我是你，我会在 constants.php 中定义一个常量，如下所示：

```
define('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest'); 
```

然后，您可以进行如下检查：

```
if (!IS_AJAX){
    //here is code for non ajax page load, e.g load headers, footers etc that you dont need in ajax requests etc.
}else{
    //often dont need this but if you have code specifically for ajax call put it here
} 
```

}

# qt - 背景类型和颜色在 Qt 中不起作用

> ID：14320185
> 
> 赞同：1
> 
> 时间：2013-01-14T14:19:28.550
> 
> 标签：qt, background, background-color, qtstylesheets

我有一个小部件，它的背景不是透明的，而是灰色的，正如您在这张图片中看到的那样：

![灰色地带。 它设置为白色，但仍显示为灰色](../Images/56d575477db9efb9deb42cad6a8775bd.png)

我有一个带有布局的自定义小部件，`ScrollArea`里面有这种风格：

```
background-color: white;
margin: 5px;  /*so it appears with 5 px around. the scroll bar is separated then*/
padding: 0px; 
```

在一个通用`QWidget`的视口中看到（setWidget）这种风格：

```
background: transparent;  // <---- HERE IS THE PROBLEM
margin: 0px;
padding: 0px; 
```

如果我尝试一种颜色而不是透明的，它就不起作用。总是灰色的。我也试过 setAutoFillBackground(true) 但没用。（不管用样式，都不起作用）。

这两个容器的代码是这样的：

```
cameraModeParametersPanel_ = new QScrollArea();
(...)
cameraModeParametersPanel_->setHorizontalScrollBarPolicy(Qt::ScrollBarAlwaysOff);
cameraModeParametersPanel_->setVerticalScrollBarPolicy(Qt::ScrollBarAsNeeded);
cameraModeParametersPanel_->setWidgetResizable(true);

mainParametersLayout->addWidget( cameraModeParametersPanel_ );  // the panel

QWidget* paramPanelViewportWidget = new QWidget();
(...)

QVBoxLayout* mainCameraLayout = new QVBoxLayout(paramPanelViewportWidget);
(...)
// and then i add QGroupBoxes with titles. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:12:20.093

这个问题的答案是添加这行代码。

```
paramPanelViewportWidget->setAttribute(Qt::WA_TranslucentBackground, true); 
```

它仍然存在一些问题。现在它完美地响应透明背景和彩色背景。但是透明显示包含它的白色面板后面的内容（灰色、蓝色背景）。

但是这个属性在 WindowsXP 上不起作用。至少，这是我正在使用的版本 QT 4.7 的已知错误。

当我解决最后一个问题（这是原始问题的附加问题）时，我会将其发布为答案。

希望能帮助到你。

# asp.net - 基于多个（但不是全部）条件的 IIS 重定向规则

> ID：14320187
> 
> 赞同：4
> 
> 时间：2013-01-14T14:19:35.237
> 
> 标签：asp.net, url, iis, redirect, iis-7.5

我有一个重写设置来处理多个不同的用户代理，我希望能够在其中任何一个上匹配我的规则。但是，任何匹配其中之一的 url 也必须匹配另一个规则（IP 地址）。但是，我找不到任何有关如何执行此操作的文档。谁能对我如何做到这一点提出任何建议？

下面是我想要实现的一个例子。我知道这将失败，因为该`conditions`节点已被多次声明。

因此，本质上它是当任何`{HTTP_USER_AGENT}`规则**和**任何`{REMOTE_ADDR}`规则匹配时的重定向。

```
<rule name="Mobile UA redirect" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAny">
    <!-- Any of these can be matched -->
    <add input="{HTTP_USER_AGENT}" pattern="Android" />
    <add input="{HTTP_USER_AGENT}" pattern="BlackBerry" />
    <!-- ... more user agents... -->
  </conditions>
  <!-- Here, similarly, any one of these rules can be matched, but one of the rules above must also match one of the rules below. -->
  <conditions logicalGrouping="MatchAny">
    <add input="{REMOTE_ADDR}" pattern="127.0.0.1" />
    <add input="{REMOTE_ADDR}" pattern="192.168.0.1" />
  </conditions>
  <action type="Redirect" url="http://mob.mydomain.com/{R:0}" appendQueryString="true" />
</rule> 
```

任何有关我如何做到这一点的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T01:11:24.393

像下面这样的东西呢，放在底部：

```
<rule name="MobileRestricted" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAll">
    <add input="{REMOTE_ADDR}" pattern="127.0.0.1" negate="true" />
    <add input="{REMOTE_ADDR}" pattern="192.168.0.1" negate="true" />        
  </conditions>
  <action type="None"/>
</rule>
<rule name="Mobile UA redirect" stopProcessing="true">
  <match url="(.*)" />
  <conditions logicalGrouping="MatchAny">
    <!-- Any of these can be matched -->
    <add input="{HTTP_USER_AGENT}" pattern="Android" />
    <add input="{HTTP_USER_AGENT}" pattern="BlackBerry" />
    <!-- ... more user agents... -->
  </conditions>
  <action type="Redirect" url="http://mob.mydomain.com/{R:0}" appendQueryString="true" />
</rule> 
```

不是一条规则，但不超过两条）

# 64-bit - 许多文件的垃圾箱标头

> ID：14320188
> 
> 赞同：1
> 
> 时间：2013-01-14T14:19:35.690
> 
> 标签：64-bit, dumpbin

我想检查项目中的所有 dll 和库是否都是为 x64 构建的

```
dumpbin /headers *.obj | findstr machine 
```

输出例如的列表`8664 machine (x64)`。如何打印每个列出的文件的文件名？或者我必须在使用 for 循环之前将文件名提取到单独的文本文件中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:42:26.153

`dumpbin /headers *.obj | findstr "machine Dump"`将打印“Dump of file ....”行和机器类型行。

从`findstr`帮助

> 除非参数以 /C 为前缀，否则使用空格分隔多个搜索字符串。例如，'FINDSTR "hello there" xy' 在文件 xy 中搜索 "hello" 或 "there" 'FINDSTR /C:"hello there" xy' 在文件 xy 中搜索 "hello there"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:28:08.290

经过长时间的查找，我找到了解决问题的方法

```
FOR /F %i IN ('DIR /B 2^>nul *.obj') DO (
    echo | set /P=%i:
    dumpbin /headers %i | findstr machine
) 
```

# sql - 根据Where条件用子表的PK更新父表的FK列

> ID：14320191
> 
> 赞同：0
> 
> 时间：2013-01-14T14:19:44.540
> 
> 标签：sql, sql-server, sql-server-2005

```
select t1.columnFK from table1 t1, table2 t2 where t1.columnFK=t1.columnpk AND t2.somecolumn='value1'

select t2.columnPK from table2 t2 where t2.somecolumn='value2' 
```

所以我必须用第二个的值更新第一个选择语句中的所有值。我尝试像这样编写更新查询：

```
UPDATE table1
SET table1.columnFK = table2.columnPK
From tabel1 t1, table2 t2
Where t1.columnfk=t2.columnpk AND somevalue='value2' 
```

这里的关系 table2.columnpk 被引用为 table1.coulmnfk。
表1.hbm.xml

```
<many-to-one
            name="table2"
            column="&quot;coulmnfk&quot;"
            class="table2class"
            cascade="none"/> 
```

表 2 的关系是这样的：

```
<set name="table1" table="&quot;table1&quot;" inverse="true"  cascade="none">
                <key column="&quot;coulmnFK&quot;"/>
                <one-to-many class="table1"/>
            </set> 
```

不知道我将如何包括第一个条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:44:27.257

我仍然觉得您的参照完整性有点难以接受。通常子表 fk 用父 pk 更新。

这是您可能需要使用的逻辑，假设您在子表中将父 pk 作为 fk 并且您正在尝试将子 pk 作为 fk 添加到父表中...使用`join`

```
UPDATE parent
SET parent.childPK = child.PK    
FROM
    Parent
    JOIN
    child ON parent.PK = child.ParentPK
WHERE parent.somecolumn in ('value1','value2')
; 
```

# linux - Linux 向服务器发送消息

> ID：14320196
> 
> 赞同：1
> 
> 时间：2013-01-14T14:20:13.027
> 
> 标签：linux, post, lwp

我很难将一些数据发布到指定链接上的网络服务器。我有一个任务，我必须发布一个代码 - 125 - 我的用户名指定为我的昵称到 localhost/zad.php

我尝试了各种各样的东西。POST 来自 lwp-request，我正在尝试使用它但没有成功。

> lwp-request post -c 125 -C mzajac localhost/zad.php

编辑：

现在我做了一些我认为非常正确的事情。

```
lwp-request -m POST -C mzajac localhost
Please enter content (application/x-www-form-urlencoded) to be POSTed:
125
^C 
```

我输入 125 但没有发生任何事情，就像它在等待更多。那么我怎样才能确定发送了 125 呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-05T16:04:02.867

使用 ^D (UNIX) 或 ^Z (DOS) 结束参数。

[http://en.wikipedia.org/wiki/End-of-transmission_character](http://en.wikipedia.org/wiki/End-of-transmission_character)

例子：

```
lwp-request -m POST -C mzajac:password http://localhost/zad.php
Please enter content (application/x-www-form-urlencoded) to be POSTed:
code=125
^D 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:30:32.923

如果你不介意使用`wget`

```
wget --post-data "code=125&username=mzajac " localhost/zad.php 
```

改变`code`并`username`根据预期`zad.php`

# php - 使用 ajax 的一步或两步邮件验证？

> ID：14320201
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:20:50.160
> 
> 标签：php, ajax

请澄清一下：
到目前为止，我对某些用户输入使用了两步验证（客户端/服务器），例如 - 电子邮件（经典表单提交 - 通过重新加载页面）。

如果我使用 php-jquery ajax 方法 - 在服务器上执行所有验证是否聪明（因为应用程序已经与服务器通信），或者也可能在客户端保留一些验证。

其次，是否有比以下更好的 php 邮件验证方法：

```
If(!filter_var($mail, FILTER_VALIDATE_EMAIL))... 
```

最后，是否有任何语言、任何框架、任何……任何（用于 Web 开发），所有变量一旦声明，就会在项目内的每个页面、每个文件的任何地方自动可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:27:05.023

记住：

> 始终让最终验证到服务器

如果您使用 Php/Ajax 表单处理程序，您应该在用户第一次提交时验证输入，然后根据验证成功发送响应（202 或 0）。

对于电子邮件验证，在用户发送所有数据并完成表单后，您可以向他发送一个令牌（通过电子邮件），让他“激活”帐户 类似[http://www.myFakesite.com/ activate.php?tkref=2423fuhr334hu](http://www.myFakesite.com/activate.php?tkref=2423fuhr334hu)（当然每个用户都是唯一的）

最后，`FILTER_VALIDATE_EMAIL`它是一个很棒的验证器，但它不检查 DNS 记录

# mahout - Mahout 聚类和离散值

> ID：14320204
> 
> 赞同：0
> 
> 时间：2013-01-14T14:20:51.280
> 
> 标签：mahout

我的数据有一些离散字段，或者换句话说，枚举值。例如，在我的数据中，我有一个像“deviceType”这样的字段，它可以采用“Handheld”和“Desktop”这样的值。其他字符串属性可能是 url。然而，它们本质上缺乏距离的概念，因此不能被“矢量化”。此外，其中一些非常重要和有意义。如何将它们合并到聚类过程中？

我想到的一种解决方案是将它们拆分为新的布尔字段（维度）。有没有办法在 Mahout 中表示这一点？

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T03:47:41.340

其他选项可能是让您自己的程序生成稀疏向量，可以将其作为输入给 mahout 进行聚类。例如，输入：

```
www.domain1.com/page1
www.domain1.com/page2
www.domain2.com/page1 
```

我们可以像这样将上面的 url 拆分成主机、路径、参数

```
www.domain1.com page1
www.domain1.com page2
www.domain2.com page1 
```

我们可以有字符串字典，整数键值对，如下所示

```
(www.domain1.com,  1)
(page1, 2)
(page2, 3)
(www.domain2.com, 4) 
```

和像下面这样的稀疏向量

```
{1:1.0, 2:1.0}
{1:1.0, 3:1.0}
{4:1.0, 2:1.0} 
```

以上可以作为输入给 mahout 进行聚类。

# java - MongoTemplate 标准查询翻译似乎不正确

> ID：14320205
> 
> 赞同：1
> 
> 时间：2013-01-14T14:20:52.387
> 
> 标签：java, mongodb, spring-data, spring-data-mongodb

我正在查询具有嵌套对象的集合。域模型如下所示：

```
@Document(collection="a")
public class A {

   protected Map<String, B> fields;
   protected String uuid;
   protected Date updatedTs;

   //Getters and setters and other fields omitted
}

public class B{

   protected String c;
   protected String d;

} 
```

我正在使用如下所示的条件进行查询：

```
{ "uuid" : "9DA291A4-1BAB-4B9C-844D-681C3F1ABF6E"} 
```

我使用创建的

```
Criteria.where("uuid").is(uuid); 
```

我可以看到条件对象不包含其他内容，因为我可以像这样打印出来：

```
log.debug("Criteria: " + SerializationUtils.serializeToJsonSafely(c.getCriteriaObject())); 
```

如果我打开包 org.springframework.data.mongodb.core 的调试日志记录，我可以看到实际发送到服务器的查询是：

```
{ "uuid" : "9DA291A4-1BAB-4B9C-844D-681C3F1ABF6E"} fields: null 
```

编辑：我的文档包含一个名为“字段”的字段，似乎我的代码或 mongoTemplate / spring-data 中的某些内容实际上正在搜索字段：null。MongoTemplate 的日志行让我感到困惑，因为 fields: null 实际上是指要返回的一组字段名称。

那么，如何在没有 spring-data 的情况下搜索与该 uuid 匹配的文档，只返回属性“fields”为空的文档？

同时，仍在研究如何解决这个问题，因为我无法更改文档结构......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:44:11.153

您在日志输出中看到的`fields`与您的域对象无关。这通过它被放置在 JSON 字符串*之外来表示。*`fields`在这种情况下，指的是应为找到的每个文档返回的字段，这本质上是一种[投影机制。](http://docs.mongodb.org/manual/core/read-operations/#projection)

# css - 添加覆盖以覆盖网页的全部内容

> ID：14320215
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:21:24.340
> 
> 标签：css

我想知道是否有办法创建一个黑色透明覆盖层来基本上覆盖网页的全部内容？

```
<body>
  <div class="main-container">
    <!--many more divs here to create webpage-->
  </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:24:54.357

在 div 上使用这个 css 来创建一个黑色透明覆盖：

```
#overlay {
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.6);
    position: fixed;
    top:0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:34:36.930

可以使用绝对位置进行非常基本的覆盖：

```
.overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: .6;
    background-color: #000;
} 
```

[http://jsfiddle.net/dfsq/4Mn7Q/](http://jsfiddle.net/dfsq/4Mn7Q/)

UPD。正如 GSP 在评论中指出的那样，当窗口高度大于视口时，这不是最佳解决方案。在这种情况下`{position: relative;}`，也应该使用 body。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:27:28.007

这可能是您正在寻找的：http: [//malsup.com/jquery/block/](http://malsup.com/jquery/block/)

# python - 测试 Python C 库 - 获取构建路径

> ID：14320220
> 
> 赞同：15
> 
> 时间：2013-01-14T14:21:49.830
> 
> 标签：python, setuptools, distutils

在 Python 中使用 setuptools/distutils 构建 C 库时

```
$ python setup.py build 
```

`*.so/*.pyd`文件被放置在（`build/lib.win32-2.7`或等效）中。

我想在我的测试套件中测试这些文件，但我不想硬编码`build/lib*`路径。有谁知道如何从 distutils 中提取此路径，以便我可以`sys.path.append(build_path)`- 或者是否有更好的方法来获取这些文件？（没有先安装它们）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T23:47:35.873

您必须获取您正在运行的平台和您正在运行的 python 版本，然后自己组装名称。

要获取当前平台，请使用`sysconfig.get_platform()`. 要获取 python 版本，请使用`sys.version_info`（特别是返回元组的前三个元素）。在我的系统（带有 python 2.7.2 的 64 位 linux）上，我得到：

```
>>> import sysconfig
>>> import sys
>>> sysconfig.get_platform()
linux-x86_64
>>> sys.version_info[:3]
(2, 7, 2) 
```

lib目录的格式为“lib.platform-versionmajor.versionminor”（即只有2.7，不是2.7.2）。您可以使用 python 的字符串格式化方法构造此字符串：

```
def distutils_dir_name(dname):
    """Returns the name of a distutils build directory"""
    f = "{dirname}.{platform}-{version[0]}.{version[1]}"
    return f.format(dirname=dname,
                    platform=sysconfig.get_platform(),
                    version=sys.version_info) 
```

您可以使用它来生成任何 distutils 构建目录的名称：

```
>>> import os
>>> os.path.join('build', distutils_dir_name('lib'))
build/lib.linux-x86_64-2.7 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-17T17:12:45.063

我发现就地编译模块最适合测试目的。为此，只需使用

```
python setup.py build_ext --inplace 
```

这将像往常一样编译 temp 目录中的所有辅助文件，但最终的 .so 文件将放在当前目录中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-07T17:50:27.257

这可作为命令类的`build_lib`成员使用，并且与位置相关。在你没有真正跑步的时候开始使用它是相当讨厌的：`build``setup.py``setup`

```
import distutils.dist
import distutils.command.build
b = distutils.command.build.build(distutils.dist.Distribution())
b.finalize_options()
print(b.build_lib) 
```

就我个人而言，我会选择 SethMMorton 的解决方案，因为虽然如果更改构建目录位置可能会很脆弱，但我怀疑如果结构发生变化`distutils`，玩这些技巧会更加脆弱。`distutils`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-25T22:30:52.487

@SethMMorton 的方法是要走的路。`get_platform()`然而，使用from`distutils.util`而不是 from可能更安全（即使我不知道他的版本不适用的平台）`sysconfig`。

这是它在[distutils-library](https://github.com/python/cpython/blob/e42b705188271da108de42b55d9344642170aa2b/Doc/includes/test.py#L190-L194)中的使用方式：

```
import os
import sys
from distutils.util import get_platform
def get_distutils_lib_path():
    PLAT_SPEC = "%s-%d.%d" % (get_platform(), *sys.version_info[:2])
    return os.path.join("build", "lib.%s" % PLAT_SPEC) 
```

# jsp - 使用 authToken 连接到 GTalk 服务器（XMPP、Smack）

> ID：14320222
> 
> 赞同：5
> 
> 时间：2013-01-14T14:21:58.017
> 
> 标签：jsp, xmpp, oauth-2.0, chat, smack

我正在编写一个连接到 XMPP 服务器的聊天应用程序，如果用户选择，我想让他们选择连接到他们的 google 聊天帐户，而无需输入凭据......我使用了 google 的 javascript api弹出谷歌登录表单，成功登录后将生成访问令牌。现在使用该访问令牌和用户电子邮件 ID，我想与 xmpp 服务器通信，以便用户可以与他们的 gtalk 朋友聊天。

我搜索了很多，但没有找到解决方案。无论我找到所需的用户密码，但我想使用访问令牌。

```
SASLAuthentication.registerSASLMechanism("X-OAUTH2", GoogleConnectSASLMechanism.class);
SASLAuthentication.supportSASLMechanism("X-OAUTH2", 0);
config = new ConnectionConfiguration(server, 5222, 'gmail.com');
config.setSASLAuthenticationEnabled(true);
config.setSecurityMode(SecurityMode.enabled);
config.setReconnectionAllowed(true);

connection = new XMPPConnection(config);
connection.connect();

 connection.login(username, session_key, "Chat");
 setServer(SERVER_TYPE.GTALK); 
```

GoogleConnectSASLMechanism.java 代码如下：-

```
 package org.jivesoftware.smack;

    import java.io.IOException;
    import java.net.URLEncoder;
    import java.io.UnsupportedEncodingException;
    import java.security.MessageDigest;
    import java.security.NoSuchAlgorithmException;
    import java.util.GregorianCalendar;
    import java.util.HashMap;
    import java.util.Map;

    import javax.security.auth.callback.CallbackHandler;
    import javax.security.sasl.Sasl;

    import org.jivesoftware.smack.SASLAuthentication;
    import org.jivesoftware.smack.XMPPException;
    import org.jivesoftware.smack.packet.Packet;
    import org.jivesoftware.smack.sasl.SASLMechanism;
    import org.jivesoftware.smack.util.Base64;

    public class GoogleConnectSASLMechanism extends SASLMechanism {
    public static final String NAME="X-OAUTH2";

    public GoogleConnectSASLMechanism(SASLAuthentication saslAuthentication) {
        super(saslAuthentication);
    }

    @Override
    protected String getName() {
        return NAME;
    }

    static void enable() { }

    @Override
    protected void authenticate() throws IOException, XMPPException
    {
        String authCode = password;
        String jidAndToken = "\0" + URLEncoder.encode( authenticationId, "utf-8" ) + "\0" + authCode;

        StringBuilder stanza = new StringBuilder();
        //stanza.append( "<auth mechanism=\"" ).append( getName() );
        //stanza.append( "\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">" );
       // stanza.append( new String(Base64.encode( jidAndToken.getBytes( "UTF-8" ), Base64.DEFAULT ) ) );
        stanza.append( "<auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"" ).append( getName() );
        stanza.append( "\" auth:service=\"oauth2\"" );
        stanza.append( "\" xmlns:auth=\"http://www.google.com/talk/protocol/auth\">" );
        stanza.append( "\" base64(\"\\0"+user_name+"\\0" + authCode+")" );

        stanza.append( "</auth>" );

        //Log.v("BlueTalk", "Authentication text is "+stanza);
        // Send the authentication to the server
        getSASLAuthentication().send( new Auth2Mechanism(stanza.toString()) );
    }

    public class Auth2Mechanism extends Packet {
        String stanza;
        public Auth2Mechanism(String txt) {
            stanza = txt;
        }
        public String toXML() {
            return stanza;
        }
    }

    /**
     * Initiating SASL authentication by select a mechanism.
     */
    public class AuthMechanism extends Packet {
        final private String name;
        final private String authenticationText;

        public AuthMechanism(String name, String authenticationText) {
            if (name == null) {
                throw new NullPointerException("SASL mechanism name shouldn't be null.");
            }
            this.name = name;
            this.authenticationText = authenticationText;
        }

        public String toXML() {
            StringBuilder stanza = new StringBuilder();
            stanza.append("<auth mechanism=\"").append(name);
            stanza.append("\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">");
            if (authenticationText != null &&
                    authenticationText.trim().length() > 0) {
                stanza.append(authenticationText);
            }
            stanza.append("</auth>");
            return stanza.toString();
        }
        }
    } 
```

但我从 connection.login() 得到一个异常，即“用户名或密码不正确”

为此，我将获得使用 google 帐户的权限，获取令牌并使用令牌对 google talk（XMPP 服务器，使用 Smack）进行身份验证。

问题是..我该怎么做？我的意思是，如果我知道登录名和令牌，如何向 GTalk 服务器进行身份验证？

任何帮助将不胜感激... :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T09:15:08.550

维杰，

更改您的身份验证功能如下：

```
protected void authenticate() throws IOException, XMPPException {
    final StringBuilder stanza = new StringBuilder();
    byte response[] = null;

    stanza.append("<auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"" +
            "mechanism=\"X-OAUTH2\"" +
            "auth:service=\"oauth2\"" +
            "xmlns:auth= \"http://www.google.com/talk/protocol/auth\">");

    String composedResponse =  "\0" + username + "\0" + sessionKey;
    response = composedResponse.getBytes("UTF-8");
    String authenticationText = "";
    if (response != null) {
        authenticationText = Base64.encodeBytes(response, Base64.DONT_BREAK_LINES);
    }

    stanza.append(authenticationText);
    stanza.append("</auth>");

    // Send the authentication to the server
    Packet p=new Packet() {
        @Override
        public String toXML() {
            return stanza.toString();
        }
    };
    getSASLAuthentication().send(p);
} 
```

它与您原来的身份验证功能相同。我刚刚改变了节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T14:00:34.850

您的问题似乎与该行有关：

```
stanza.append( "\" base64(\"\\0"+user_name+"\\0" + authCode+")" ); 
```

所以我认为这就是你的`authenticate`函数应该是这样的：

```
protected void authenticate() throws IOException, XMPPException
{
    String authCode = password;
    String jidAndToken = "\0" + authenticationId + "\0" + authCode;

    StringBuilder stanza = new StringBuilder();
    stanza.append("<auth mechanism=\"").append( getName());
    stanza.append("\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">");
    stanza.append(new String(Base64.encode(jidAndToken.getBytes("UTF-8"), Base64.DEFAULT)));
    stanza.append("</auth>");

    //Log.v("BlueTalk", "Authentication text is "+stanza);
    // Send the authentication to the server
    getSASLAuthentication().send( new Auth2Mechanism(stanza.toString()) );
} 
```

因此，它更像是您的注释代码。`base64(..)`根本不应该出现在`<auth>`内容中。那里应该只有一个base64编码的字符串。

在您对我关于同一主题的线程的帮助下，我能够成功登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-31T19:55:15.370

我非常感谢 Ketan 的回答，它拯救了我的整个项目。我已经和这个问题斗争了好几天......无论如何，我希望更多的人可以从这篇文章中找到他们的解决方案。

我使用 Smack 3.4，但我认为这个答案也适用于更高版本。

我只是在详细解释 Ketan 的答案，这对我有用（刚刚注册了 Stack Overflow，无法评论原始答案）。

只需重写 GoogleConnectSASLMechanism 类的 authenticate() 方法，例如在本地创建一个 GoogleConnectSASLMechanism 类，而不是使用 Smack 提供的类。

Google 有自己的 OAUth2 机制，它具有自定义属性。这就是 Smack 中“X-OAUTH2 是实验性的”的原因。[您可以在此处](https://www.igniterealtime.org/builds/smack/docs/4.1.3/javadoc/org/jivesoftware/smack/sasl/core/SASLXOauth2Mechanism.html)的 Smack 文档中找到此声明。“自定义属性”是一段 xml: `<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="X-OAUTH2" auth:service="oauth2" xmlns:auth="http://www.google.com/talk/protocol/auth"> base64("\0" + user_name + "\0" + oauth_token) </auth>`。

这可以在[谷歌的指令](https://developers.google.com/talk/jep_extensions/oauth?hl=en)中找到。Smack 不适用于 X-OAUth2 的原因是它的节中不包含这段 XML。所以，解决方案就是添加它。

# gwt - 在不同的 Grails 插件之间共享 GWT 模块

> ID：14320223
> 
> 赞同：0
> 
> 时间：2013-01-14T14:22:03.373
> 
> 标签：gwt, grails, plugins, module, share

我在不同的帖子中看到了如何在不同的项目之间共享 GWT 模块。

例如 [，如何将一个 gwt 应用程序的源代码用于另一个应用程序](https://stackoverflow.com/questions/12564362/how-to-use-source-code-of-one-gwt-application-in-to-another-application)

我的案例更具体一点，因为我有**两个 Grails+GWT 插件**：**projectA**和**projectB**。

**projectA**包含 src/java 中的 java beans，它们都用于 Grails 服务以及 src/gwt 代码中。我定义了一个 module.gwt.xml，其中包含我的主模块 (EntryPoint.gwt.xml) 继承的我的 java bean 的路径。这适用于**projectA**。

我已经创建了**projectB**，我想在**projectB 的**Grails 服务和 src/gwt 代码中使用在**projectA中声明的 java bean。**我设法通过在 projectB 的 BuildConfig.groovy 中添加 grails.plugin.location.'projectA' = 来共享服务的 java bean。**但是，当我在projectB**的主模块 (EntryPoint.gwt.xml) 中添加 a 时，在**projectB**中编译 GWT 模块时出现以下错误。

 ******```
Loading inherited module '<qualified module name>'
  |    [ERROR] Unable to find '<qualified module name>' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
  | [ERROR] Line 16: Unexpected exception while processing element 'inherits' 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:40:34.670

在 BuildConfig.groovy 中添加以下属性解决了我的问题。

gwt.plugins = [“/**插件名称**/”]******

# cakephp-2.1 - cakephp 2.1 xls 标头内容类型在 mac safari 中不起作用

> ID：14320226
> 
> 赞同：0
> 
> 时间：2013-01-14T14:22:18.103
> 
> 标签：cakephp-2.1

在我的项目 excel 布局中我添加

 `````
 <?php

      header ("Last-Modified: " . gmdate("D,d M YH:i:s") . " GMT");
      header ("Cache-Control: no-cache, must-revalidate");
      header ("Pragma: no-cache");
      header ("Content-type: application/vnd.ms-excel");/*.pdf,.xls*/
      header ("Content-Disposition: attachment; filename=Report.xls" );
      header ("Content-Description: Generated Report" );
     ?>
     <?php echo $content_for_layout ?> 
````  `在我的控制器中

 `````
 function export_xls($id=null) { 
        $this->render('export_xls', 'export_xls');
  } 
```` 

`并将 export_xls.ctp 保留为空白。`

 `在 Windows 中，它创建 report.xls 文件，但 mac os safari 浏览器下载为 report.xls.html 我不明白该怎么做。我使用的是 cakephp 2.1

请帮我解决这个问题.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T03:47:49.263

.ctp 或 export_xls 函数中需要有内容。您实际上并没有为文件工作输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T14:58:50.437

您的标题看起来不错（尽管我认为`Content-type`应该是`Content-Type`），但请尝试使用 Cake 内置的响应类。适用于 XLS 文件。在您的控制器中：

```
$this->response->file($path,array('download' => true, 'name' => 'Report.xls'));
return $this->response; 
```````

# php - 在另一个类的方法中包含一个类

> ID：14320228
> 
> 赞同：0
> 
> 时间：2013-01-14T14:22:25.383
> 
> 标签：php, wordpress

我正在写一个 WordPress 插件，OOP 风格。以本机方式在管理界面中创建表需要扩展另一个类。

`myPlugin.php:`

```
class My_Plugin {

    public function myMethod(){
        return $somedata;
    }

    public function anotherMethod(){
        require_once('anotherClass.php');
        $table = new AnotherClass;
        $table->yetAnotherMethod();
    }

} 
```

`anotherClass.php:`

```
class AnotherClass extends WP_List_Table {

    public function yetAnotherMethod(){
        // how do I get the returned data $somedata here from the method above?
        // is there a way?

        // ... more code here ...
        // table is printed to the output buffer
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:25:23.397

由于`myMethod()`不是静态的，您需要一个（？）实例`My_Plugin`来获取该信息：

```
 $myplugin = new My_Plugin();

 ....

 $data = $myplugin->myMethod(); 
```

或者，您将该信息提供给`yetAnotherMothod`呼叫：

```
 $data = $this->myMethod();
 require_once('anotherClass.php');
 $table = new AnotherClass;
 $table->yetAnotherMethod($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:26:28.793

你应该传入`$somedata`你的函数调用。例如

```
$table->yetAnotherMethod($this->myMethod());

public function yetAnotherMethod($somedata){
    // do something ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:32:04.793

您`myMethod()`的方法是公开的，因此可以在任何地方访问。确保包含所有必要的文件，如下所示：

```
require_once('myPlugin.php')
require_once('anotherClass.php') 
```

然后简单地写这样的东西：

```
// Initiate the plugin
$plugin = new My_Plugin;

// Get some data
$data = $plugin->myMethod();

// Initiate the table object
$table = new AnotherClass;

// Call the method with the data passed in as a parameter
$table->yetAnotherMethod($data); 
```

# java - 有没有一种安全的方法来判断 JDBC 连接是否仍然正常？

> ID：14320231
> 
> 赞同：12
> 
> 时间：2013-01-14T14:22:33.527
> 
> 标签：java, jdbc, connection, connection-pooling

我们有一个网络服务器处理来自客户的请求。此 Web 服务器的一个组件拥有与数据库的连接。

在我开始使用连接之前，我需要能够识别连接是否已关闭或以某种方式不再起作用。目前我做类似的事情：

```
// Decide connection details on alias.
private String alias = null;
// I must have my own because I prepare statements.
private Connection connection = null;

public Connection getConnection() {
  try {
    if ( connection.isClosed() ) {
      // Start afresh.
      connection = null;
    }
    // ** More tests here to check connection is ok.
    if (connection == null) {
      // Make a new connection.
      connection = Connections.getConnection(alias);
    }
  } catch (SQLException ex) {
    // Cause a NPE further down the line.
    connection = null;
  }
  return connection;
} 
```

可悲的是，这有时会返回如此陈旧的连接，以至于我得到了各种错误之一。一种看起来像：

> java.sql.SQLException：Io异常：软件导致连接中止：套接字写入错误

请注意，这只是记录的错误之一，此错误发生在大约 72 小时空闲后。

我正在寻找的是一个最小的数据库通用连接测试器，它应该始终如一地判断连接是否启动、运行和稳定。这可能吗？

我不介意对它运行一个非常小的查询，但它必须与数据库无关，并且几乎不需要时间/资源。

顺便说一句：我在 Java 5 下运行，所以`Connection.isValid`对我来说不是解决方案。

* * *

**添加**

对于那些稍后访问这个问题的人 - 我最终接受了提供的建议并转移到一个真正的连接池，不仅非常容易做到，而且我的**所有**问题都消失了。

唯一奇怪的部分是意识到使用连接池`close`时，您必须在完成连接后进行连接 - 池拦截关闭并将其返回到幕后的池中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T14:24:03.047

`SELECT 1`最好的方法是`SELECT 1 FROM DUAL`为 Oracle 做一个简单的 SQL 语句。（有关特定于供应商的语法，请参阅您的数据库。）

如果失败，请刷新连接。这就是像 WebLogic 这样的 Java EE 应用服务器所做的测试，如果您将它们配置为这样做的话。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T14:25:09.440

尝试

```
java.sql.Connection.isValid(int timeout) 
```

如果连接尚未关闭并且仍然有效，则返回 true。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T14:25:40.863

每个数据库都有一个不依赖于现有表的查询。对于 Oracle，请尝试

```
select 1 from dual 
```

对于许多其他数据库（MySQL、H2），请尝试

```
select 1 
```

DB2 有它自己独特的语法：

```
values 1 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-10T10:50:31.050

我的情况，我使用 java.sql.Connection.isValid(int timeout) ：

我有一个方法 getConnection （或在这个例子中 getInstance no poll）：

```
try {
    if (connect == null) || ! connect.isValid() ) {
        connect.DriverManager.getConnection(...);
} catch (SQLException e) {
    logger.error(...);
    connect = null;
}
return connect; 
```

# java-native-interface - 如何使用 JNI 将 java 字符串转换为宽字符串

> ID：14320235
> 
> 赞同：0
> 
> 时间：2013-01-14T14:22:43.320
> 
> 标签：java-native-interface, unicode-string, widechar

几个月前，我编写了一个使用 JNI 封装 C API 的 Java API。C API 使用 char 字符串，我使用 GetStringUTFChars 从 Java 字符串创建 C 字符串。

我忽略了思考非 ASCII 字符可能出现的问题。

从那时起，C API 的创建者为他的每个需要或返回 wchar_t 字符串的 C 函数创建了宽字符等效项。我想更新我的 Java API 以使用这些宽字符函数并克服我在使用非 ASCII 字符时遇到的问题。

研究了 JNI 文档后，我对使用 GetStringChars 或 GetStringRegion 方法的相对优点感到有些困惑。

我知道 wchar_t 字符的大小在 Windows 和 Linux 之间有所不同，并且不确定创建 C 字符串的最有效方法（然后将它们转换回 Java 字符串）。

这是我目前拥有的代码，我认为它创建了一个每个字符两个字节的字符串：

```
int len;
jchar *Src;

len = (*env)->GetStringLength(env, jSrc);
printf("Length of jSrc is %d\n", len);

Src = (jchar *)malloc((len + 1)*sizeof(jchar));
(*env)->GetStringRegion(env, jSrc, 0, len, Src);
Src[len] = '\0'; 
```

但是，当 wchar_t 的大小与 jchar 不同时，这将需要修改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T12:03:03.803

C API 创建者是否愿意退后一步并使用**UTF-8**重新实现？:) 你的工作基本上会消失，只需要`GetStringUTFChars`/ `NewStringUTF`。

`jchar`类型定义为`unsigned short`并等效于**UTF-16**`char`的JVM 。所以在 Windows 上也是 2 字节**UTF-16**，你可以取消你提供的代码。只需复制原始字节，并相应地分配。完成 C API 调用后不要忘记释放。补充用于转换回 jstring。**`wchar_t`**`NewString`****

 ****`wchar_t`我知道的唯一其他大小是 4 字节（最突出的是 Linux）是**UTF-32**。问题来了：*UTF-32 不仅仅是 UTF-16 以某种方式填充到 4 个字节。*分配双倍的内存只是一个开始。有一个实质性的转换要做，[就像这个似乎足够自由](http://gears.googlecode.com/svn/trunk/third_party/convert_utf/ConvertUTF.c)的转换。

But if you are not after performance that much and are willing to give up the plain memory copying on Windows, i suggest going `jstring` to UTF-8 (which is what JNI provides natively with documented functionality) and then UTF-8 to UTF-16 or UTF-32 depending on `sizeof(wchar_t)`. There won't be any assumptions about what byte order and UTF encoding each platform gives. You seem to care about it, i see that you are checking `sizeof(jchar)` which is 2 for the most of the visible universe :)****

# asp.net-mvc-3 - ASP.NET MVC3：如何在自定义 AjaxHelper 中启用不显眼的验证

> ID：14320236
> 
> 赞同：1
> 
> 时间：2013-01-14T14:22:46.167
> 
> 标签：asp.net-mvc-3, unobtrusive-validation, ajaxhelper

我有一个自定义 AjaxHelper 呈现启用 ajax 的下拉列表。代码如下。帮助程序运行良好，但是当验证失败时它不会添加 input-validation-error 类，因此它不会以我想要的方式与其他表单元素一起突出显示。在 Html 助手中，我可以合并 HtmlHelper.GetUnobtrusiveValidationAttributes() 给出的属性。但是我如何在 AjaxHelper 中做到这一点？

```
 public static MvcHtmlString DropDownList(this AjaxHelper ajaxHelper, string name,
        IEnumerable<SelectListItem> list, string optionLabel,
        AjaxOptions ajaxOptions, object htmlAttributes)
    {
        var tag = new TagBuilder("select");
        StringBuilder options = new StringBuilder();
        tag.MergeAttribute("name", name);
        tag.MergeAttribute("id", name);
        TagBuilder option;

        if (optionLabel != null)
        {
            option = new TagBuilder("option");
            option.MergeAttribute("value", string.Empty);
            option.SetInnerText(optionLabel);
            options.Append(option.ToString());
        }

        foreach (SelectListItem item in list)
        {
            option = new TagBuilder("option");
            option.MergeAttribute("value", item.Value);
            if (item.Selected)
            {
                option.MergeAttribute("selected", "selected");
            }
            option.SetInnerText(item.Text);
            options.Append(option.ToString());
        }
        tag.InnerHtml = options.ToString();

        tag.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));
        tag.MergeAttributes((ajaxOptions ?? new AjaxOptions()).ToUnobtrusiveHtmlAttributes());
        return MvcHtmlString.Create(tag.ToString(TagRenderMode.Normal));
    } 
```

# android - 使用 Timer 和 Handler 处理 UI 线程

> ID：14320237
> 
> 赞同：0
> 
> 时间：2013-01-14T14:22:46.003
> 
> 标签：android, handler, runnable, timertask

我在处理程序和 timertask 上遇到问题当我完成处理程序以检查连接并在两个单独的线程上更新 UI 时，它可以工作。但我想定期更新网络连接。也许每 5 秒执行一次。我使用 Timer.schedule 来执行此操作。但是申请失败了。我不知道计时器是否无法进入 UI 线程。

另外，我不知道是否有更好的方法来完成这样的多任务。我很想看看是否有另一种方法可以做到这一点，比如 AsyncTask、Looper。谢谢

公共类 ViewPostTest 扩展 Activity { private String connection_status = null;

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    final TextView timer_view = (TextView) findViewById(R.id.result);
    final Runnable runnable = new Runnable(){

        public void run() {
            // TODO Auto-generated method stub
            ConnectivityManager manager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
            NetworkInfo networkinfo = manager.getActiveNetworkInfo();

            if(networkinfo.isConnected())
            {
                connection_status = "Connected";
            }
            else
            {
                connection_status = "Disconnected";
            }
            timer_view.post(new Runnable(){

                public void run() {
                    // TODO Auto-generated method stub
                    timer_view.setText(connection_status);
                }});

        }};
    TimerTask task1 = new TimerTask(){

        @Override
        public void run() {
            // TODO Auto-generated method stub
            Handler handler = new Handler();
            handler.post(runnable);
        }};
    Timer timer1 = new Timer();
    timer1.schedule(task1, 0,5000);

}

} 
```

# iphone - 在 OpenGL ES 2.0 中包含 Cocos2d 粒子系统

> ID：14320242
> 
> 赞同：1
> 
> 时间：2013-01-14T14:23:01.337
> 
> 标签：iphone, cocos2d-iphone, opengl-es-2.0

我开始用香草 OpenGL ES 2.0 编写我的游戏。现在我正在考虑添加某种粒子系统以获得良好的效果。

有没有办法将一个可以在 Cocos2d 中轻松创建的粒子系统包含到我的 OpenGL 应用程序中？这样可以省去我自己创建粒子系统的所有麻烦（并且可能更高效）。

如果没有，是否有其他框架可用于在 OpenGL 中创建简单的粒子系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:33:46.710

Cocos2d 为自己的框架包含了一个粒子系统。当您离开框架并开始使用 OpenGL（用作 Cocos2d 后端的语言）编写时，您将失去框架。您必须编写自己的粒子系统。

这是一个很棒的基础教程。 [http://www.71squared.com/en/article/806/iphone-game-programming-tutorial-8-particle-emitter](http://www.71squared.com/en/article/806/iphone-game-programming-tutorial-8-particle-emitter)

同一家公司还制作了一款出色的应用程序，可以轻松创建粒子。它还包括一些步骤，以便在不使用 Cocos2d 的项目中开始使用它。 [http://www.71squared.com/en/particledesigner](http://www.71squared.com/en/particledesigner)

# ruby-on-rails-3 - Rails 3.2 - 不允许范围“开放”

> ID：14320251
> 
> 赞同：0
> 
> 时间：2013-01-14T14:23:37.980
> 
> 标签：ruby-on-rails-3, activerecord

访问 tasks#index 时，我得到：

```
wrong number of arguments (0 for 1)

# tasks_controller.rb
@open_tasks = @company.tasks.open.incomplete.includes...

# task.rb
scope :open, lambda { 
    where("tasks.owner_id IS NULL")
} 
```

通过反复试验，我已将问题与`:open`上面显示的查询隔离开来。上面的代码有什么问题，为什么我错过了一个论点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:41:21.540

尝试重命名范围，似乎 Rails 不适用于范围`open`。[http://rudygems.com/post/420138339/rails-3-doesnt-allow-open-as-a-named-scope](http://rudygems.com/post/420138339/rails-3-doesnt-allow-open-as-a-named-scope)

# umbraco - Umbraco 重复内容区

> ID：14320252
> 
> 赞同：0
> 
> 时间：2013-01-14T14:23:41.633
> 
> 标签：umbraco

我想用它在umbraco宽度tinymce中创建一个转发器字段，但是当我尝试使用嵌入式内容包时，我得到的只是一个普通的textarea，当我使用选项卡顶部的tinyMCE时，光标会跳转到主要内容区。我究竟做错了什么？是否有另一个包可以做到这一点，或者是否可以制作一个可以重复的数据类型？

希望大家能帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:45:02.880

通常，当我有一个像您在上面的评论中描述的内容“块”时，我会创建内容作为数据来帮助解决这个问题。

脚步：

*   创建名为“Block”的新 DocTypes 和一个“Block Folder”。在“阻止文件夹”下允许“阻止”
*   为内容、链接和图像添加属性到“块”（标题是节点名称）
*   在内容树中创建文件夹和示例块。一般在 Home 树之外，但肯定可以在 Home 之下。
*   创建一个多节点树选择器数据类型，在内容树中选择“块文件夹”中的内容
*   将新属性添加到您希望在其上选择“块”的页面并在内容中选择它们

那有意义吗？你的项目矫枉过正？我发现它总体上是一个很好的模式。

# iphone - 解析 Twitter JSON

> ID：14320255
> 
> 赞同：2
> 
> 时间：2013-01-14T14:23:53.247
> 
> 标签：iphone, xcode

我编写了一些代码来从 Twitter 搜索中获取数据并将其推送到 中`UITableView`，但是我收到一个语法错误说明`No visible @interface for 'NSArray' declares the selector 'objectForKey:`

这是我用来获取`JSON`数据的代码：

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];

    NSArray *feed = [allDataDictionary objectForKey:@"results"];

    NSString *text = [feed objectForKey:@"text"];

    [array addObject:text];

    [[self myTableView] reloadData];    
} 
```

[这是 JSON 数据本身](http://jsonviewer.stack.hu/#http://search.twitter.com/search.json?q=hatlive)（按左上角的“查看器”）

有什么帮助吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:28:07.023

这是因为您正在调用：

```
 NSString *text = [feed objectForKey:@"text"]; 
```

仔细看：

```
[feed objectForKey:@"text"]; 
```

对象`feed`是`NSArray`：

```
 NSArray *feed = [allDataDictionary objectForKey:@"results"]; 
```

而且显然`NSArray`没有方法`objectForKey:`，那是字典。

因此，无论是错字、混淆还是对 Objective-C 的误解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:29:08.307

```
NSDictionary *allDataDictionary = [NSJSONSerialization JSONObjectWithData:webData options:0 error:nil];

NSArray *feed = [allDataDictionary objectForKey:@"results"];

for (NSDictionary *item in feed) {
    NSString *text = [item objectForKey:@"text"];
    [array addObject:text]; <- I assume this is NSMutableArray
}

[[self myTableView]reloadData]; 
```

# actionscript-3 - 如何在 flex 中返回 HTTP 服务响应？

> ID：14320256
> 
> 赞同：2
> 
> 时间：2013-01-14T14:23:55.807
> 
> 标签：actionscript-3, apache-flex, flex4.5, httpservice

我很清楚如何在 flex 中使用 HTTP 服务，但我想将调用服务的功能和在不同的 ActionScript 类中获取服务的响应分开。那么有谁知道我如何在 flex 中返回 HTTP 服务的响应？

例如

在 UTILITY 类中，我想要一种方法，我会给它一个 URL，它会给我从那个位置获得的数据。就是这样。考虑以下代码片段。取自的参考代码[无法在 flex 中以编程方式创建 http 服务](https://stackoverflow.com/questions/12586484/could-not-be-able-to-create-http-service-programmitically-in-flex)

```
 private function callService():void
        {
            var requestObj:Object = {};
            requestObj.q = cityName.text.toString();
            requestObj.format = FORMAT;
            requestObj.num_of_days = cNUMBER_OF_DAYS;
            requestObj.key = API_KEY;

            var weatherService:HTTPService = new HTTPService();
            weatherService.url = BASE_URL;
            weatherService.resultFormat = "object";
            weatherService.showBusyCursor = true;
            weatherService.request = requestObj;
            weatherService.addEventListener(ResultEvent.RESULT , weatherService_resultHandler);
            weatherService.addEventListener(FaultEvent.FAULT, weatherService_faultHandler);
            weatherService.send();
        }

        protected function weatherService_resultHandler(event:ResultEvent):void
        {
            trace("got result");
            **//WANT TO GIVE THIS RESULT BACK TO THE CALLER. SINCE RETURN TYPE OF 
            //METHOD IS VOID I CANNOT RETURN ANYTHING FROM HERE. HOW TO MAKE THIS
            //METHOD TO RETURN DATA?**
        }

        protected function weatherService_faultHandler(event:FaultEvent):void
        {
            trace("got fault");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:40:20.327

根据项目的架构，有几种解决方案。主要思想是在服务收到响应并在调用者中处理它时触发事件（或调用回调）。您的示例中最简单的方法是在方法中返回`weatherService`对象`callService`并在调用者（`ResultEvent.RESULT`和`FaultEvent.FAULT`）中添加相同的侦听器。该解决方案的缺点是您必须在调用者中解析原始服务器响应，而不是使用一些解析的值对象，但正如我注意到的那样，这一切都取决于您的项目数据流。

UPD：回调用法示例：

```
//map for storing the {service:callback} linkage
private var callbacks:Dictionary = new Dictionary(true);
/*
callback is a function like: function(success:Boolean, data:Object):void
*/
private function callService(callback:Function):void
{
    var requestObj:Object = {};
    requestObj.q = cityName.text.toString();
    requestObj.format = FORMAT;
    requestObj.num_of_days = cNUMBER_OF_DAYS;
    requestObj.key = API_KEY;

    var weatherService:HTTPService = new HTTPService();
    weatherService.resultFormat = "object";
    weatherService.showBusyCursor = true;
    weatherService.request = requestObj;
    weatherService.addEventListener(ResultEvent.RESULT, weatherService_handler);
    weatherService.addEventListener(FaultEvent.FAULT, weatherService_handler);
    var token:AsyncToken = weatherService.send();

    var obj:Object = {callback:callback, service:weatherService};
    callbacks[token.message.messageId] = obj;
}

protected function weatherService_handler(event:Event):void
{
    var success:Boolean = event.type == ResultEvent.RESULT;
    var token:AsyncToken = success ? ResultEvent(event).token : FaultEvent(event).token;

    var obj:Object = callbacks[token.message.messageId]
    var service:HTTPService = obj.service;
    service.removeEventListener(ResultEvent.RESULT , weatherService_handler);
    service.removeEventListener(FaultEvent.FAULT, weatherService_handler);

    var data:Object = success ? ResultEvent(event).result : FaultEvent(event).fault;
    var callback:Function = obj.callback;
    delete callbacks[event.target];

    callback(success, data);
} 
```

# python - 有序双向链表

> ID：14320257
> 
> 赞同：3
> 
> 时间：2013-01-14T14:23:57.293
> 
> 标签：python, doubly-linked-list

好的，作业中的一个问题说要创建一个有序的双向链表......这样每个具有字典顺序较小名称的对象都在另一个“之前”......就像字典中的名字......也可以排列具有相同名称的对象以任何顺序...

链接我拥有的两个对象`setBefore()`和`setAfter()`方法......我已经做了很多......但仍然不知道我做错了什么......可能是你们的一些指导可以帮助我......

`atMe`是一个已经存在于双向链表中的对象，并且`newFrob`是一个要插入的对象...

```
def insert(atMe, newFrob):
    if newFrob.myName() < atMe.myName():
        if atMe.getBefore() == None:
            atMe.setBefore(newFrob)
            newFrob.setAfter(atMe)
        elif atMe.getBefore().myName()<newFrob.myName():
            atMe.getBefore().setAfter(newFrob)
            newFrob.setBefore(atMe.getBefore)
            atMe.setBefore(newFrob)
            newFrob.setAfter(atMe)
        else:
            insert(atMe.getBefore(),newFrob)

    elif newFrob.myName() > atMe.myName():
        if atMe.getAfter() == None:
            atMe.setAfter(newFrob)
            newFrob.setBefore(atMe)
        elif atMe.getAfter().myName()>newFrob.myName():
            atMe.getAfter().setBefore(newFrob)
            newFrob.setAfter(atMe.getAfter)
            atMe.setAfter(newFrob)
            newFrob.setBefore(atMe)
        else:
            insert(atMe.getAfter(),newFrob)

    elif newFrob.myName()==atMe.myName():
        if atMe.getAfter() != None:
            newFrob.setAfter(atMe.getAfter())
        newFrob.setBefore(atMe)
        if atMe.getAfter() != None:
            atMe.getAfter().setBefore(newFrob)
        atMe.setAfter(newFrob) 
```

这是要使用的Frob类......

```
class Frob(object):
    def __init__(self, name):
        self.name = name
        self.before = None
        self.after = None
    def setBefore(self, before):
        self.before = before
    def setAfter(self, after):
        self.after = after
    def getBefore(self):
        return self.before
    def getAfter(self):
        return self.after
    def myName(self):
        return self.name 
```

其中 Before 和 After 是指向双链表中左右对象的链接...来自此类的对象将被插入到双链表中...

例子：

```
a=Frob('foo')
b=Frob('bar')
c=Frob('frob')
d=Frob('code')

code                             output
insert(a,b)                   bar->foo
insert(a,c)                   bar->foo->frob
insert(b,d)                   bar->code->foo->frob 
```

现在假设

```
code                             output
insert(b,Frob('code'))        bar->code->code->foo->frob 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:43:13.043

问题出在这一行（以及当您向另一个方向移动时的等效问题）：

```
newFrob.setBefore(atMe.getBefore) 
```

您在 之后缺少一组括号`atMe.getBefore`，因此您最终将绑定方法本身传递给`newFrob.setBefore`而不是该方法将返回的值。这是一个容易犯的错字，所以我不会因为在你的作业中错过它而感到难过。

我通过尝试以下插入序列并检查值发现了错误（我已经总结了那些可以通过注释正常工作的值）：

```
>>> a = Frob("a")
>>> b = Frob("b")
>>> c = Frob("c")
>>> d = Frob("d")
>>> insert(a, b) # list is a<->b
>>> insert(a, d) # list is a<->b<->d
>>> insert(a, c) # list is a<->b<->c->?
>>> c.getAfter()
<bound method Frob.getAfter of <__main__.Frob object at 0x000000000318EBA8>> 
```

最后提到的那个对象是`b`，这导致我在代码中找到错误。

# c# - 无法将 $push/$pushAll 修饰符应用于非数组

> ID：14320259
> 
> 赞同：0
> 
> 时间：2013-01-14T14:24:14.137
> 
> 标签：c#, mongodb, mongodb-.net-driver

我在以下位置收到此错误`SafeModeResult result = _test.Update(query, update);`：

```
ExceptionMessage=Safemode detected an error 'Cannot apply $push/$pushAll modifier to non-array'. (Response was { "err" : "Cannot apply $push/$pushAll modifier to non-array", "code" : 10141, "n" : 0, "lastOp" : { "$timestamp" : NumberLong(0) }, "connectionId" : 513625, "ok" : 1.0 }). 
```

模型：

```
 public class Test
        {
          [BsonId]
          public string Id { get; set; }
          public string Name { get; set; }
          public string Address { get; set; }
          public IList<Comment> Comments { get; set; }
          public int TotalComments { get; set; }
          public DateTime LastModified { get; set; }
        }

        public class Comment
        {
          [BsonId]
          public string Id { get; set; }
          public string Detail { get; set; }
          public DateTime LastModified { get; set; }
        } 
```

更新代码：

```
IMongoQuery query = Query.EQ("_id", id);
comment.Id = ObjectId.GenerateNewId().ToString();
comment.LastModified = DateTime.UtcNow;
IMongoUpdate update = Update
    .PushWrapped("Comments", comment)
    .Inc("TotalComments", 1);
SafeModeResult result = _test.Update(query, update);

        return result.UpdatedExisting; 
```

提琴手放置：

```
http://localhost:49432/api/test/50f3f8365029d61bbc307f52

User-Agent: Fiddler
Content-Length: 37
Content-Type: application/json
Host: localhost:49432

{"Detail" : "This is great"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:17:21.407

我想这是因为当我插入一个新文档时，我没有将 Comments 设置为空数组。

# c# - 如何将 blob 数据转换为字符串？

> ID：14320270
> 
> 赞同：3
> 
> 时间：2013-01-14T14:24:56.250
> 
> 标签：c#, asp.net

我正在使用以下函数将二进制数据转换为文本：

```
public string BinaryToText(byte[] data)
{
     MemoryStream stream = new MemoryStream(data);
     StreamReader reader = new StreamReader(stream, encoding.UTF8);
     string text = reader.ReadTod();
     return text;
} 
```

但我得到一个`OutOfMemoryException`30Mb 的数据。

如何解决此问题并使用此方法或任何更好的方法转换大于 100Mb 的数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T15:05:23.137

试试这个：

```
public string BinaryToText(byte[] data)
{
    return Encoding.UTF8.GetString(data);
} 
```

它将消耗更少的内存。如果它*仍然*内存不足，您需要分块读取它 - 但是您如何使用数据将决定这是否可能。你对返回的字符串做了什么？

我还要重申我之前的问题：输入数据*真的是*UTF8 数据吗？

如果您*可以*处理作为多个字符串返回的数据，则可以执行以下操作：

```
public IEnumerable<string> BinaryToStrings(byte[] data, int maxStringLength)
{
    var buffer = new char[maxStringLength];

    using (MemoryStream stream = new MemoryStream(data))
    using (StreamReader reader = new StreamReader(stream, Encoding.UTF8))
    {
        while (true)
        {
            int count = reader.Read(buffer, 0, maxStringLength);

            if (count == 0)
            {
                break;
            }

            yield return new string(buffer, 0, count);
        }
    }
} 
```

然后你可以像这样在 foreach 循环中调用它：

```
foreach (string chunk in BinaryToStrings(data, 1024))
{
    // Do something with 'chunk'...
} 
```

# node.js - 带有猫鼬子文档的 HTTP PATCH 语义

> ID：14320276
> 
> 赞同：2
> 
> 时间：2013-01-14T14:25:19.740
> 
> 标签：node.js, mongodb, express, mongoose

我有一个包含多个图层子文档的地图文档，并且想要实现 HTTP PATCH，因此只有给定的 JSON 属性才能更新图层子文档。以下代码有效，但我必须指定每个可以更改的属性。有更好的方法吗？

```
var update = {};
if (req.body.name !== undefined)
    update['layers.$.name'] = req.body.name;
if (req.body.isDefault !== undefined)
    update['layers.$.isDefault'] = req.body.isDefault;
if (req.body.isPublic !== undefined)
    update['layers.$.isPublic'] = req.body.isPublic;

Map.model.findOneAndUpdate({_id: req.params.mapId, 'layers._id': req.params.layerId}, update, callback); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:11:57.337

您可以制作这样的功能：

```
function updateParams(reqParams,additionalInfo)
{
    var update = {};
    for(var paramName in reqParams)
    {
        if(reqParams.hasOwnProperty(paramName))
        {
            if(reqParams[paramName]!==undefined)
            {
                update[additionalInfo+paramName] = reqParams[paramName];
            }
        }
    }
    return update;

}

updateParams(req.body,'layers.$.'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T23:01:35.453

我有你考虑过 JsonPatch 这个项目将 json 补丁转换为 mongo 原子更新：jsonpatch-to-mongodb

# javascript - Twitter Bootstrap + Google Maps 仍然无法修复错误

> ID：14320277
> 
> 赞同：3
> 
> 时间：2013-01-14T14:25:22.990
> 
> 标签：javascript, css, google-maps, twitter-bootstrap

我的 html 页面中有一个谷歌地图：

```
<div class="row">
        <div class="span6">
          <div id="map_canvas"></div>
        </div>
        <div class="span6">
          <h3>Heading</h3>
          <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
          <p><a class="btn" href="#">View details &raquo;</a></p>
       </div> 
```

我的 javascript 地图设置：

```
 var settingsItemsMap = {
    zoom: 11,
    center: new google.maps.LatLng(51.056703, 3.719999),
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.LARGE
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById('map_canvas'), settingsItemsMap ); 
```

我知道我必须将其添加到我的 css 文件中：

```
#map_canvas img{
  max-width: none;
} 
```

但是我还是什么都没显示！我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:45:29.717

```
$(window).resize(function () {
    var h = $(window).height(),
        offsetTop = 190; // Calculate the top offset

    $('#map_canvas').css('height', (h - offsetTop));
}).resize(); 
```

这对我有用！

# javascript - 如果选项卡是关闭事件，则打开新的弹出窗口

> ID：14320279
> 
> 赞同：0
> 
> 时间：2013-01-14T14:25:32.297
> 
> 标签：javascript, html, popup

如果浏览器窗口关闭，我只想打开一个新的弹出窗口。我有以下代码，但它似乎不起作用

```
<script type="text/javascript">
    window.onbeforeunload = function () {
         window.open("http://www.w3schools.com"); 
    }
</script> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:38:11.407

您设置为 window.onbeforeunload 的函数必须返回一个字符串，该字符串将在消息框中显示给用户。

```
window.onbeforeunload = function () {
     window.open("http://www.w3schools.com"); 
return "something";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:35:05.463

您正在寻找`onUnload`事件，而不是`onBeforeUnload`.

`onBeforeUnload`预计会返回一个用于自动确认窗口的字符串。警告的话，大多数弹出窗口阻止程序将忽略从事件中`window.open`执行的调用。`onUnload`

请参阅[此处的 mdc 文档`onUnload`](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)和[此处的`onBeforeUnload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload).

# javascript - 比较 JS 中的日期不起作用

> ID：14320284
> 
> 赞同：0
> 
> 时间：2013-01-14T14:25:55.347
> 
> 标签：javascript, date, compare

我在 JS 中有这个函数，它很奇怪，因为它可以与许多日期一起工作，但不能与一个..

我有两个输入，如果第二个是次要的或为空，则使用 jquery 在第二个中复制第一个，然后如果我在第一个中放置另一个更大的日期，则第二个日期在第一个时更改为相同的日期。

但我有一个案例，第一个输入有 01/05/2013，第二个输入有 31/05/2013，如果我将第一个更改为 01/06/2013，第二个应该在同一日期更改，但不要这样做它..

如果我用萤火虫测试它和这个功能

```
 obtenerFecha(fIni) > obtenerFecha(fFin) // obtenerFecha(01/06/2013) > obtenerFecha(31/05/2013) 
```

返回假，它是真的！

如果有人可以帮助我，这是我的代码..

```
 function copiarFecha(inicio,fin) {
        var fIni = $("#" + inicio).val();
        var fFin = $("#" + fin).val();
        if ((fFin == "") || obtenerFecha(fIni) > obtenerFecha(fFin)) {
            $("#" + fin).attr('value', fIni);
        }
        return true;
    }

    function obtenerFecha(strFecha) {
        var df = strFecha.split("/");
        if (isNaN(df[0]) || isNaN(df[1]) || isNaN(df[2]) || (df[0] > 31) || (df[1] > 12)) {
            cargaMensaje("KO", "La fecha no es correcta,revísela.");
            return false;
        }
        return new Date(df[2], df[1], df[0]); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:34:13.153

Javascript Date 中的月份范围是 0-11 而不是 1-12，因此您的新 Date(2013, 5 ,31) 转换为 2013,06,01，即 2013 年 5 月 1 日。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:34:50.707

您需要从月份中减去 1。[http://jsbin.com/eqozic/2/](http://jsbin.com/eqozic/2/)

**月**

表示月份的整数值，从 0 开始表示一月到 11 表示十二月。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

# javascript - JavaScript 中文档的用途是什么？

> ID：14320287
> 
> 赞同：5
> 
> 时间：2013-01-14T14:26:10.157
> 
> 标签：javascript, document

我是 JavaScript 的初学者，我想理解这句话：

```
document.slider.src=img[number].src; 
```

我还需要知道有什么`document`用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T14:30:28.107

[全局对象“document”](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html)表示当前浏览器窗口中显示的 HTML 文档。

document.slider 指的是带有属性的 HTML 标记`id="slider"`。请注意，这种引用文档节点的方式已被弃用，因为可能与文档对象的其他属性和功能发生命名冲突。一个更好的方法是使用`document.getElementById("slider")`.

`.src`访问该 HTML 标记的 src 属性（当它是图像时，它是图像文件的 URL）。

`img`似乎是之前创建或检索的图像数组。大概是通过调用返回一个包含页面上所有 HTML 标记 `document.images()`的数组。指的是该数组的一个元素。是一个很可能包含数字的变量。它说明访问了数组的哪个元素。例如，当 number=3 时，访问数组的第 4 个元素，因为数组从 0 开始计数。 然后检索该图像节点的属性并将其分配给滑块。`<img>``img[number]``number``.src``.src`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T14:32:44.963

`document`是一个对象。您粘贴的代码行应该在网络浏览器中运行。Web 浏览器将具有 JavaScript 引擎。该引擎将为开发人员提供一些运行时对象，例如`document`并`window`与之交互。该环境称为浏览器对象模型（或 BOM）。您可以[在 Mozilla Developer Network 上](https://developer.mozilla.org/en-US/docs/DOM/document)阅读更多相关信息。

# android - 横向模式下 AutoCompleteTextView.onItemClick 的意外行为

> ID：14320288
> 
> 赞同：2
> 
> 时间：2013-01-14T14:26:12.087
> 
> 标签：android

我有一个适配器，其中包含连接到 AutoCompleteTextView 的 100 个字符串。在纵向模式下，这可以按我的预期工作，如果我输入“11”，所有 100 个元素都显示为下拉列表，并且正确的索引作为 onItemClick 中的索引参数传递。

我不明白在横向模式下会发生什么，如果我输入“11”，只有前 20 个元素显示在列表中，当我在 onItemClick 中单击它们时，只有列表中的前 4 个元素通过正确的索引方法。当我单击其他列表元素时，索引为-1？我还可以看到横向模式下的计数是 100，那么为什么只显示前 20 个？

有谁知道这是为什么？

MainActivity.java

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;

public class MainActivity extends Activity {

public static final String TAG = "MainActivity";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item);

    for(int i = 0; i < 100; i++) {
        adapter.add(new String("11" + i));
    }

    AutoCompleteTextView ac = (AutoCompleteTextView) findViewById(R.id.search_auto_complete);

    ac.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> adapterView, View view, int index, long id) {

            Log.d(TAG, "Index: " + index);
            Log.d(TAG, "Elements in adapter: " + adapterView.getCount());               

            if(index == -1) {
                Log.e(TAG, "Index not found, aborting AutoCompleteTextView.onItemClick!");
                return;
            }
        }
    });

    ac.setAdapter(adapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <AutoCompleteTextView
        android:id="@+id/search_auto_complete"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:dropDownWidth="fill_parent"
        android:gravity="center_vertical|left"
        android:inputType="textAutoComplete" />

</RelativeLayout> 
```

# java - 错误：AcceptedFriendAction 类中的构造函数 AcceptedFriendAction 不能应用于给定类型；

> ID：14320304
> 
> 赞同：0
> 
> 时间：2013-01-14T14:26:58.823
> 
> 标签：java

编译代码时，出现以下错误消息：“错误：AcceptedFriendAction 类中的构造函数 AcceptedFriendAction 不能应用于给定类型；” 在第 23 行（ AcceptedFriendAction 动作 [...] ）

我读到那是因为我的构造函数中有一个字符串，但我真的不明白如何安排它。如果有人可以帮助我？感谢您的时间和理解。

```
public class AcceptedFriendAction extends SocialAction {

    private static final long serialVersionUID = -692737;

    @ManyToOne
    private User newFriend;

    public AcceptedFriendAction(final SocialInterest socialInterest,
            final DateTime date, final String suggestComment, final User newFriend) {
    super(socialInterest, date, suggestComment);
    this.newFriend = newFriend;
    }

    public User getNewFriend() {
        return newFriend;
    }

    public static AcceptedFriendAction add(final SocialInterest socialInterest, 
            final String suggestComment, final User newFriend) {

        AcceptedFriendAction action = new AcceptedFriendAction(socialInterest, new DateTime(), newFriend, suggestComment);
        action.save();
        return action;
    }
} 
```

再次感谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:30:37.867

你放错了第三个和第四个参数

代码应如下所示：

```
AcceptedFriendAction action = new AcceptedFriendAction(socialInterest, new DateTime(), suggestComment, newFriend); 
```

# lua - 电晕故事板按钮未从下一个场景中正确移除

> ID：14320307
> 
> 赞同：0
> 
> 时间：2013-01-14T14:27:05.400
> 
> 标签：lua, coronasdk, corona-storyboard

好的，这个问题有很多答案，但我似乎无法让它发挥作用。我的按钮是在函数 scene:createScene( event ) 中创建的，当我进入下一个场景时，我正在尝试 scenePurge 并单独删除按钮，但它似乎不起作用。在下一个场景中，该按钮不可见，但如果我按下前一个场景中按钮所在的位置，它仍然处于活动状态。删除这些对象的最佳方法是什么？

```
 local storyboard = require( "storyboard" )
        local scene = storyboard.newScene()

        --storyboard.removeScene( "login" )

---------------------------------------------------------------------------------
-- BEGINNING OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------

local image, image2

-- Called when the scene's view does not exist:
function scene:createScene( event )
    local widget = require( "widget" )

    local p1ButtonRelease = function( event )
    storyboard.gotoScene( "maths_dif", "slideLeft", 1000  )
        print("touch")
        return true 
    end

    local p2ButtonRelease = function( event )
    storyboard.gotoScene( "words", "slideLeft", 1000  )
        print("touch")
        return true

end

    local screenGroup = self.view

    image = display.newImage( "images/Background(640x480).png", -20 ,0 )
    image2 = display.newImage( "Logo_small.png", 170,0)
    --screenGroup:insert( image )

    print( "\n2: createScene event" )

    local p1Button = widget.newButton{
    default = "images/SinglePlayer_button.png",
    over = "images/SinglePlayer_button.png",
    --onPress = button1Press,
    onRelease = p1ButtonRelease,
    -- fontSize = 20,
    -- labelColor = { default={ 255, 250, 250}, over={ 0, 0, 0,} },
    -- label = "+",
    -- emboss = true
    }

    local p2Button = widget.newButton{
    default = "images/2Player_button.png",
    over = "images/2Player_button.png",
    --onPress = button1Press,
    onRelease = p2ButtonRelease,
    -- fontSize = 20,
    -- labelColor = { default={ 255, 250, 250}, over={ 0, 0, 0,} },
    -- label = "+",
    -- emboss = true
    }

    p1Button.x = 240; p1Button.y = 180
    p2Button.x = 240; p2Button.y = 260
end

-- Called immediately after scene has moved onscreen:
function scene:enterScene( event )

    print( "2: enterScene event" )

    -- remove previous scene's view
    storyboard.purgeScene( "login" )
    display.remove(p1Button)
    -- -- Update Lua memory text display
    -- local showMem = function()
        image:addEventListener( "touch", image )
        -- text3.isVisible = true
        -- text2.text = text2.text .. collectgarbage("count")/1000 .. "MB"
        -- text2.x = display.contentWidth * 0.5
    -- end
    -- memTimer = timer.performWithDelay( 1000, showMem, 1 )
end

-- Called when scene is about to move offscreen:
function scene:exitScene()

    print( "2: exitScene event" )
    storyboard.removeScene("login")
    storyboard.removeScene("words")
    storyboard.removeScene("guess_word")
    storyboard.removeScene("maths_dif")
    storyboard.removeScene("scene1")
    display.remove(p1Button)
    p1Button = nil
    display.remove(p2Button)
    p2Button = nil
    -- remove touch listener for image
    image:removeEventListener( "touch", image )

end

-- Called prior to the removal of scene's "view" (display group)
function scene:destroyScene( event )

    print( "((destroying scene 2's view))" )
end

---------------------------------------------------------------------------------
-- END OF YOUR IMPLEMENTATION
---------------------------------------------------------------------------------

-- "createScene" event is dispatched if scene's view does not exist
scene:addEventListener( "createScene", scene )

-- "enterScene" event is dispatched whenever scene transition has finished
scene:addEventListener( "enterScene", scene )

-- "exitScene" event is dispatched before next scene's transition begins
scene:addEventListener( "exitScene", scene )

-- "destroyScene" event is dispatched before view is unloaded, which can be
-- automatically unloaded in low memory situations, or explicitly via a call to
-- storyboard.purgeScene() or storyboard.removeScene().
scene:addEventListener( "destroyScene", scene )

---------------------------------------------------------------------------------

return scene 
```

我正在尝试删除对象，以免影响下一个场景，但似乎无法做到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:02:43.630

有人建议在每个场景开始时使用storyboard.removeAll()，但我个人发现的解决方案不是使用小部件按钮释放功能来改变场景，而是创建一个图像对象并给它一个EventListener，例如

```
 p1Button = display.newImage("images/SinglePlayer_button.png", 90, 140)
    p1Button.touch = onSceneTouch
p1Button:addEventListener("touch", p1Button)

    local function onSceneTouch( self, event )
    if event.phase == "began" then
        storyboard.gotoScene( "words", "slideLeft", 1000  )
        return true 
    end
end 
```

然后我在 exitScene() 函数中删除对象事件侦听器。在我的下一个场景中，这些先前的按钮无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T22:00:00.750

您需要将按钮插入场景的视图（组）中。在您的 createScene() 函数中，创建按钮后，请执行以下操作：

```
group:insert(p1Button) 
```

然后您不必担心删除它们，情节提要会为您完成。

# pdf - wkhtmltopdf，从数据库加载的图像未显示

> ID：14320309
> 
> 赞同：1
> 
> 时间：2013-01-14T14:27:17.963
> 
> 标签：pdf, blob, image, wkhtmltopdf

我正在使用 wkhtmltopdf 将 html 转换为 pdf。所有图像均正确显示，但控制器返回的图像（存储在 db 中，作为 mediumblob 类型）未显示。首先我认为这可能是时间问题，所以我增加了延迟：

```
--javascript-delay 5000 
```

没有成功。

图片来源：

```
<img src="/app-name/company/logo"/> 
```

图像在具有相同链接的 html 上正确显示。

我试图将源更改为直接路径：

```
<img src="http://localhost:8080/app-name/company/logo"/> 
```

但这没有帮助。可能是什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T14:34:15.403

你有什么版本的 wkhtmltopdf？

我已经安装了最新的[http://wkhtmltopdf.org](http://wkhtmltopdf.org)版本 0.11.0 并且这个版本有一些问题，我得到了版本 0.9.9 可以正常工作。

还要检查您是否在控制器/视图中使用例如会话，从数据库加载可能取决于它（例如一些登录信息），当使用 wkhtmltopdf 时，您没有存储会话数据。

# java - 如何在java中生成20%的数组？

> ID：14320310
> 
> 赞同：-2
> 
> 时间：2013-01-14T14:27:20.097
> 
> 标签：java

我目前正在研究一个应该代表竞技场/剧院座位系统的二维阵列。我需要产生 20% 的座位来填补。它是一个 5 x 5 阵列。我需要为要填充的阵列生成 5 个随机座位/行组合。（我正在使用随机数生成器）所有帮助将不胜感激。

到目前为止，这是我的代码：

```
public class Project5b 
{
  static int NUMBER_OF_ROWS = 5;
  static int NUMBER_OF_SEATS = 5;
  static boolean DEBUG = true;
  public int RandomInt(int i1, int i2) {
    int result = (int) (Math.random() * (i1 - i2 + i1)); // check formula
    return result;
  }
  public static void main(String[] args) {
    int seat = 1;
    int row = 2;
    boolean[][] a_theater;
    a_theater = new boolean[NUMBER_OF_ROWS][NUMBER_OF_SEATS];
    for (row = 1; row <= NUMBER_OF_ROWS; row++) {
      for (seat = 1; seat <= NUMBER_OF_SEATS; seat++) {
        a_theater[row - 1][seat - 1] = false;
      }
    }
    if (DEBUG) {
      for (row = 1; row <= NUMBER_OF_ROWS; row++) {
        for (seat = 1; seat <= NUMBER_OF_SEATS; seat++) {
          System.out.println("row" + " " + row + " " + "seat" + " " + seat + " "
              + a_theater[row - 1][seat - 1]);
        }
      }
    }
  }
} 
```

* * *

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:32:26.403

替换这个你的循环：

```
for (row = 1; row <= NUMBER_OF_ROWS; row++) {
  for (seat = 1; seat <= NUMBER_OF_SEATS; seat++) {
    a_theater[row - 1][seat - 1] = false;
  }
} 
```

通过这个代码块：

```
 int filledNumber = 0;
  Random r = new Random();
  int maxFilled = (int)(NUMBER_OF_ROWS*NUMBER_OF_SEATS * 0.2);
  for(row = 1; row <=NUMBER_OF_ROWS;  row++){
      for(seat = 1; seat <=NUMBER_OF_SEATS; seat++){
        boolean filled = filledNumber <= maxFilled && r.nextBoolean();
        a_theater[row -1][seat -1] = filled;
        if (filled) filledNumber++;             
      }
  } 
```

**升级版：**

1）固定铸造从`double`到`int`

2) 显示必须将哪个代码块替换为建议的代码块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:33:56.637

我建议以下代码段，您可以根据需要进行调整

确保所有值最初都设置为 0，`Arrays.fill()`会这样做。

```
Random rand = new Random(); //instead of Math.random()
int count = 0;
while (count < 5) {
    int randI = rand.nextInt(5); //generate random index
    int randJ = rand.nextInt(5); //generate random index
    boolean randVal = rand.nextBoolean(); //generate random value
    if (!array[randI][randJ]) { // check whether assigned earlier
        array[randI][randJ] = randVal;
        count++;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:33:42.437

您将要为该行和该行中的座位生成随机值，因此一对随机值 5 次。

使用`for`循环构造并查看 java 的[Random](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html)类来生成数字。您还需要检查以确保您设置了 5 个不同的随机座位，并且不会意外地将同一个座位设置为 true 两次。

# java - mapreduce，排序值

> ID：14320313
> 
> 赞同：1
> 
> 时间：2013-01-14T14:27:34.607
> 
> 标签：java, sorting, hadoop, mapreduce, cloudera

我的映射器有一个输出：

```
Mapper: KEY, VALUE(Timestamp, someOtherAttrbibutes) 
```

我的减速机确实收到：

```
Reducer: KEY, Iterable<VALUE(Timestamp, someOtherAttrbibutes)> 
```

我想`Iterable<VALUE(Timestamp, someOtherAttrbibutes)>`按**Timestamp**属性排序。有没有可能实现它？

我想避免在 Reducer 代码中进行手动排序。[http://cornercases.wordpress.com/2011/08/18/hadoop-object-reuse-pitfall-all-my-reducer-values-are-the-same/](http://cornercases.wordpress.com/2011/08/18/hadoop-object-reuse-pitfall-all-my-reducer-values-are-the-same/)

我必须从 Iterable 中“深度复制”所有对象，这会导致巨大的内存开销。:(((

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T14:31:04.713

这相对容易，您需要为您的课程编写比较器`VALUE`类。

在这里仔细看看：http: [//vangjee.wordpress.com/2012/03/20/secondary-sorting-aka-sorting-values-in-hadoops-mapreduce-programming-paradigm/](http://vangjee.wordpress.com/2012/03/20/secondary-sorting-aka-sorting-values-in-hadoops-mapreduce-programming-paradigm/)特别是在**A solution for secondary sort** part .

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-09T12:07:40.137

您需要为您的 VALUE 类编写比较器类。

```
@Override
protected void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
    final SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
    List<String> list = new ArrayList<String>();
    for (Text val : values) {
        list.add(val.toString());

    }
    Collections.sort(list, new Comparator<String>() {
       public int compare(String s1, String s2) {
           String str1[] = s1.split(",");
           String str2[] = s2.split(",");
          int time1 = 0;
           int time2 = 0;
           try {
               time1 = (int)(sdf.parse(str1[0]).getTime());
               time2 = (int) (sdf.parse(str2[0]).getTime());

           } catch (ParseException e) {
               e.printStackTrace();
           } finally {
               return time1 - time2;
           }
       }
    });
    for(int i = 0; i < list.size(); ++i)
    context.write(key, new Text(list.get(i)));
} 
```

# android - 通用 Android Intent 数据库/库

> ID：14320317
> 
> 赞同：4
> 
> 时间：2013-01-14T14:27:46.277
> 
> 标签：android, android-intent

我曾经查看[openintents.org](http://openintents.org)以查找有关 Intents 的一般信息。我在这里还注意到，关于如何发送电子邮件、如何拍照……的问题经常被问到。

我还发现了这个问题：[Android Intent Database](https://stackoverflow.com/questions/5290443/android-intent-database)，它还没有答案。

因此，我将我当前的实用程序函数编译到一个库中并将其放在 Git 上：[Android Intents](https://github.com/marvinlabs/android-intents)

您一次又一次地使用哪些 Intent？人们可以期望在这样的库中找到哪些通用意图？

我开始回答我自己的问题，列出到目前为止我在各种项目中需要使用的内容（我已经在库中提供了）：

*   发送电子邮件
*   发简讯
*   拨打/拨打电话号码
*   在浏览器中打开网址
*   播放视频
*   拍照
*   从图库中挑选照片
*   打开选择器以共享文本
*   在地图应用程序中显示地址

PS：也许这个问题以后可以/应该变成社区维基？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-21T08:46:14.567

Intent 是要执行的抽象操作，即使您可以[定义自己的意图](http://thinkandroid.wordpress.com/2010/02/02/custom-intents-and-broadcasting-with-receivers/)并在其他应用程序中制作一些意图过滤器。

在其他应用程序中定义意图过滤器告诉如果用户调用此意图，您的应用程序可以处理它。例如，您写了“在 Google 地图中显示地址”——它并不完全准确，目的是在**地图**上显示给定的坐标——而不仅仅是**谷歌地图**，如果你有其他地图提供商（例如 yandex {in Russia} ) - 在调用“地图”后，意图系统会询问您要在哪里显示您的坐标 - google 或 yandex。

[我认为您可以在此处找到](http://developer.android.com/reference/android/content/Intent.html)所有基本意图的定义。此外，即使默认意图也可以具有参数 - 例如，当您从相机\图库拍摄照片时，您可以要求您的系统以给定的大小\比率裁剪这张照片。

正如我所见，分享这种经验的最佳方式是像 wiki 一样带有示例（即使创建您自己的自定义意图）。人们经常寻找如何执行某些操作的手册 - 我认为一些带有解释的文本会比图书馆更好。

# node.js - 如何访问 Mongoose/nodejs 回调函数中的值？

> ID：14320319
> 
> 赞同：1
> 
> 时间：2013-01-14T14:27:53.430
> 
> 标签：node.js, callback, mongoose

我编写了一个使用 Mongoose 从 mongoDB 读取项目的函数，我希望将结果返回给调用者：

```
ecommerceSchema.methods.GetItemBySku = function (req, res) {
    var InventoryItemModel = EntityCache.InventoryItem;

    var myItem;
    InventoryItemModel.findOne({'Sku' : req.query.sku}, function (err, item) {
        // the result is in item
        myItem = item;
        //return item doesn't work here!!!!
    });

    //the value of "myItem" is undefined because nodejs's non-blocking feature
    return myItem;
}; 
```

但是如您所见，结果仅在“findOne”的回调函数中有效。我只需要将“item”的值返回给调用者函数，而不是在回调函数中进行任何处理。有没有办法做到这一点？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:51:28.477

因为您在函数中进行异步调用，所以您需要向*GetItemBySku方法添加一个**回调*参数，而不是直接返回该项目。

 *```
ecommerceSchema.methods.GetItemBySku = function (req, res, callback) {
    var InventoryItemModel = EntityCache.InventoryItem;

    InventoryItemModel.findOne({'Sku' : req.query.sku}, function (err, item) {
        if (err) {
            return callback(err);
        }
        callback(null, item)
    });
}; 
```

然后，当您在代码中调用*GetItemBySku*时，该值将在回调函数中返回。例如：

```
eCommerceObject.GetItemBySku(req, res, function (err, item) {
    if (err) {
        console.log('An error occurred!');
    }
    else {
        console.log('Look, an item!')
        console.log(item)
    }
}); 
```*

# javascript - 增加对 JavaScript 增量运算符的理解

> ID：14320320
> 
> 赞同：0
> 
> 时间：2013-01-14T14:28:00.660
> 
> 标签：javascript

> **可能重复：**
> [++someVariable Vs。Javascript 中的 someVariable++](https://stackoverflow.com/questions/3469885/somevariable-vs-somevariable-in-javascript)

我正在努力理解增量运算符。此运算符将其操作数递增（加一）并返回一个值。我在操作数（x++）之后使用了带有运算符的后缀，因此它在递增之前返回值。

因此，如果 x 为 3，则语句 y = x++ 将 y 设置为 3 并将 x 递增为 4

```
var x = 3; 
var y = x++; 

console.log(x); // 4
console.log(y); // 3 
```

我不明白为什么`y`不保持值 4 而是设置为 3，以及为什么`x`在分配值为 3 时保持值 4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:30:23.917

*post* -increment 运算符在取值*后*递增。这就是它与预增量运算符的不同之处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:31:52.890

**[通过遵循Alex](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)**的评论，这个问题得到了改进。

假设有一个变量`x`sa `var x=3`。

**案例1** 当你写：

```
var y = x++; 
```

然后，完成以下步骤：

1.  `x`评估变量（`x`为 3）；
2.  变量`x`递增（`x`为 4）；
3.  评估的结果（*发生在步骤（1）中*）被分配给`y`（因此将结果`y=3`）；

**案例 2** 当你写： var y = ++x;

然后，完成以下步骤：

1.  变量`x`递增（`x`为 4）；
2.  `x`评估变量（`x`为 4）；
3.  评估的结果（*发生在步骤（2）中*）被分配给`y`（因此将结果`y=4`）；

在这种情况下，遵循 Javascript 的运算符优先级很重要（例如，[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence)查看更多信息）。

**CASE 3** 为了完整起见，正如**Alex**所观察到的，同样重要的是要认识到，如果*CASE1*中提供的步骤对同一个变量重复，那么变量将递增然后恢复到初始值，即当你写：

```
x = x++; 
```

然后，完成以下步骤：

1.  `x`评估变量（`x`为 3）；
2.  变量`x`递增（`x`为 4）；
3.  评估的结果（*发生在步骤（1）中*）被分配给`x`（因此将结果`x=3`）；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T14:33:17.657

```
var y = x++; 
```

是这两个语句的简写（按顺序）：

```
var y = x;
x = x + 1; 
```

如果您希望 y 等于 4，您将执行以下操作：

```
var y = ++x; 
```

这是以下的简写：

```
x = x + 1;
var y = x; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:31:48.257

来自[MDN 文档 - 算术运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators)

> **++（增量）**
> 
> 增量运算符的使用如下：
> 
> var++ 或 ++var
> 
> 此运算符将其操作数递增（加一）并返回一个值。如果使用后缀，操作数后面有运算符（例如，x++），则返回递增前的值。如果在操作数之前使用带运算符的前缀（例如 ++x），则返回递增后的值。
> 
> 例如，如果 x 为 3，则语句 y = x++ 将 y 设置为 3 并将 x 递增至 4。如果 x 为 3，则语句 y = ++x 将 x 递增至 4 并将 y 设置为 4。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T14:30:24.017

`++`after 变量是一个后自增运算符，表示在读取变量后执行自增。

见：[http ://en.wikipedia.org/wiki/Increment_and_decrement_operators](http://en.wikipedia.org/wiki/Increment_and_decrement_operators)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T14:30:43.727

`x++`在制作 x 的值的临时副本并返回临时副本之后发生增量。相反的是 ++x ，它是一个增量并返回新值：

```
var x = 3;
var y = ++x; // y === 4 
```

[来自ECMA 5.1](http://www.ecma-international.org/ecma-262/5.1/)的引用：

> PostfixExpression : LeftHandSideExpression LeftHandSideExpression [此处无 LineTerminator] ++ LeftHandSideExpression [此处无 LineTerminator] -- 70 © Ecma International 2011
> 11.3.1 后缀增量运算符 产生式 PostfixExpression : LeftHandSideExpression [此处没有 LineTerminator] ++ 的计算方法如下： 1\. 令 lhs 为计算 LeftHandSideExpression 的结果。2\. 如果以下条件全部为真，则抛出 SyntaxError 异常：  Type(lhs) is Reference is true  IsStrictReference(lhs) is true  Type(GetBase(lhs)) is Environment Record  GetReferencedName(lhs) is "eval " 或 "参数" 3\. 让 oldValue 为 ToNumber(GetValue(lhs))。4\. 使用与 + 运算符相同的规则（参见 11.6.3），让 newValue 为将值 1 与 oldValue 相加的结果。5\. 调用 PutValue(lhs, newValue)。6\. 返回旧值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T14:31:13.397

`x++`是 * *post* *increment 运算符。它相当于：

```
 var tmp = x;
 x = x + 1;
 return tmp; 
```

这是旧 C 时代的遗留物，人们喜欢编写如下代码：

```
 while(*dest++ = *src++); 
```

（翻译：将内存范围复制到第一个 0 字节）。还有一个 * *pre* *increment 运算符`++ x`，它先递增，然后返回递增的结果。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-14T14:31:13.690

有两种增加方式

```
var y = x++; // first make the allocation then the increasing
// and
var y = ++x; // first make the increasing then the allocation 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-14T14:31:35.257

```
var y = x++; 
```

表示`x`是递增的，并被`y`赋予 的递增值`x`。

```
var y = ++x; 
```

表示它`x`被递增，并被`y`分配了 的预递增值`x`。

# c# - 在 C# 可执行文件中运行表单

> ID：14320321
> 
> 赞同：0
> 
> 时间：2013-01-14T14:28:03.923
> 
> 标签：c#, express

我正在尝试运行这样的代码：

```
while (true)
{ 
   counter++;
   Form f = new Form1();

   Application.Run(f);
} 
```

一个无限循环，它配置一个`Form1`基于类并使用命令`Form`运行它的类。`Form``Application.Run`

问题是我第一次可以获得`Form`可见的，但是在循环的下一次迭代中，表单是不可见的。

任何人？

但是，第一次进入Form出现的循环和下一次有什么区别呢？为什么第一次没有变量范围问题？此外，在循环的每次新迭代中，我都会创建一个新的 Form1 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:51:37.337

为什么不喜欢：

```
private void Form1_Load(object sender, EventArgs e)
{
    Thread p = new Thread(showform);
    p.Start();
}

private void showform()
{
    Form1 f = new Form1();
    f.Show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:45:38.610

你为什么要创建相同形式的无限实例？

无论如何，这是你想要得到的吗？检查此代码

```
while(true){
       new Form1().show();
       System.Threading.Thread.Sleep(1000); 
} 
```

我将应用程序设置为休眠 1 秒，以向您显示它正在打开一个新表单。

编辑：我检查了你的代码，当我试图关闭应用程序时，它正在打开一个新表单。正如汉斯所说，当有一个表单实例时，窗口会将焦点设置在它上面。当你关闭它时，它会创建一个新的。

# oracle - 奇怪的 Oracle SQLPlus 主机回显错误

> ID：14320324
> 
> 赞同：2
> 
> 时间：2013-01-14T14:28:15.090
> 
> 标签：oracle, environment-variables, sqlplus

我正在尝试运行脚本。我们的大多数机器上都安装了 11.2.0.1。我被要求在其中一些上升级到 11.2.0.3。我在我的 Windows 7 机器上本地升级了我的 Windows 环境。一切正常。然后我得到了一个虚拟的 Windows Server 2008（不是 R2）32 位。所以，我下载了32位客户端。

当我尝试运行我们的脚本时，我遇到了一些奇怪的错误。我查了一下，原来 SQL*Plus 不会传递环境变量

所以，如果我这样做，`host echo %COMPUTERNAME%`我会得到回应`%COMPUTERNAME%`

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:57:42.967

我想这是因为 Oracle 在`%`. 不过，不需要使用 HOST 命令来执行此操作。您可以使用命名空间的`TERMINAL`参数来代替：`USERENV`[`SYS_CONTEXT`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions184.htm#SQLRF06117)

```
SQL> select SYS_CONTEXT('USERENV', 'TERMINAL') from dual;

SYS_CONTEXT('USERENV','TERMINAL')
---------------------------------------------------------

ELZAR 
```

该文档描述`TERMINAL`为：

> 当前会话的客户端的操作系统标识符。在分布式 SQL 语句中，此属性返回本地会话的标识符。在分布式环境中，这仅支持远程 SELECT 语句，不支持远程 INSERT、UPDATE 或 DELETE 操作。（此参数的返回长度可能因操作系统而异。）

如果您必须使用 HOST 命令，我可以通过用反引号括起来来解决问题

```
SQL> host `echo %computername`
ELZAR 
```

# extjs - 在 extjs 中将动态项添加到容器中

> ID：14320330
> 
> 赞同：1
> 
> 时间：2013-01-14T14:28:40.533
> 
> 标签：extjs

我有一个带有 hbox 布局的容器。使用一个按钮，我正在添加另一个容器，里面有一个按钮，问题是内容永远不会进入第二行，只停留在第一行。主容器具有固定宽度，并且位于窗口内。我怎样才能使这项工作？我希望它像 CSS 中的“break-word”一样工作。谢谢你的帮助。

截图： http: [//www.ohecollegeplanner.com/cp/img.png](http://www.ohecollegeplanner.com/cp/img.png)

```
getSelectedItemsCmp: function () {
    var items = [];

    var container = Ext.create("Ext.container.Container", {
        layout: "hbox",
        align: 'stretch',
        id: "tagContainer",
        height: 70,
        //flex:2,![enter image description here][1]
        overflowY: "auto",
        width: "400px",
        padding: 5
    });

    for (var i = 0; i < this.selectedItems.length; i++) {
        var tag = this.createSelectedItemsTag(this.selectedItems[i]);
        container.add(tag);

    }

    //container.doLayout();

    return container;
},
createSelectedItemsTag: function (obj) {
    var tag = {
        xtype: "container",
        id: "tag_" + obj.value,
        cls: "tagCompContainer",
        layout: {
            type: "hbox"
        },
        items: [{
            xtype: "label",
            text: obj.label,
            cls: "labelSelectedComps"
        }, {
            xtype: "button",
            text: "x",
            id: "tagbutton_" + obj.value,
            listeners: {
                click: {
                    fn: this.onDeleteSelectedCmpClick,
                    scope: this
                }
            }
        }

        ]
    };
    return tag;
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:58:40.420

你得到的正是 hbox 所做的......它水平分布容器的项目。也许尝试使用表格布局？

# linux - 如何让 Raspberry Pi 直接启动到浏览器中？

> ID：14320332
> 
> 赞同：2
> 
> 时间：2013-01-14T14:28:57.063
> 
> 标签：linux, bash, raspberry-pi

我在我的`/etc/bash.bashrc`文件中放入了以下行：

```
 chromium--kiosk www.bbc.co.uk 
```

但是，我在启动时遇到错误：

```
"(chromium:2100): Gtk-WARNING **: cannot open display:" 
```

如果我将 Pi 设置为在启动时引导至操作系统，则铬永远不会出现，但如果我启动终端窗口，它会突然以信息亭模式和指定的网页打开铬！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:31:21.790

尝试`startx`在`chromium--kiosk www.bbc.co.uk`您的`~/.bashrc`. `.bashrc`每次启动时都会读取您的文件`bash`，例如当 pi 没有将您直接带到桌面时，您在`bash`shell 中但您没有`xserver`运行，因此无法显示 chrome 窗口。`.bashrc`所以在你启动`startx`之前启动你的窗口环境`chrome`。

# jquery - 使用 HTML5 History API 使用 AJAX 重新加载页面时多次包含 Google Maps API

> ID：14320334
> 
> 赞同：2
> 
> 时间：2013-01-14T14:29:07.263
> 
> 标签：jquery, html, google-maps, html5-history

我有一个使用 HTML5 历史 API 导航和重新加载页面信息的站点。这会发送一个检索相关页面信息的 AJAX 调用。在我的“联系人”页面上，我有 google maps api 脚本。如果通过访问 URL 加载页面，它工作正常。谷歌加载地图 API 并将其包含在我的结束正文标记之前。

如果我离开页面（使用历史 API 删除和添加内容），然后返回到联系人页面（再次通过历史 API），则会对（已包含的）地图 API 进行第二次调用，并将其加倍. 这会导致控制台中出现警告消息。

我已尝试在加载新内容之前删除在结束正文标记之前添加的 Google 地图脚本，但由于脚本已被解析，地图的所有相关功能仍保留在浏览器内存中。

所以我想我的问题是，“当我对页面内容发出 AJAX 请求时，有什么方法可以卸载所有的谷歌地图 JS？”。

控制台消息如下：

> 警告：您已在此页面上多次包含 Google Maps API。这可能会导致意外错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-10T16:34:37.563

我也收到此错误，我有一个使用谷歌地图的页面，如果我使用 ajax 重新加载带有谷歌地图代码的页面部分，则会出现错误。

请注意，我的 HTML 没有重复，但一个 html 块被具有谷歌地图 HTML 的相同数据覆盖，并且它被视为两个块而不是一个看起来。我什至在插入 html 块之前尝试使用 jquery .empty() 但没有变化，仍然是多个错误。该页面在加载时不会抛出错误，所以我唯一的结论是这个。

编辑：当我想到它时，我认为原因是我的 HTML 块包含一个脚本包含行，即使这只是 HTML 中的一次，这一行的重点是将一堆代码加载到 DOM 中，所以简单地说...解决方案只加载一次脚本 - 正如谷歌所说！*哦！*只需要考虑一下那些 < script src=" 行基本上对 DOM 有什么作用 :) 所以添加一个 JS 块检查是否加载了 maps api 并且仅在未加载时才加载。想想 include() 和 include_once() 的 PHP 区别

# ruby-on-rails - Rails 3 发送和接收电子邮件

> ID：14320338
> 
> 赞同：2
> 
> 时间：2013-01-14T14:29:15.463
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email

在我的 Rails 3 应用程序中，我有一个活动模型，其中包含与参与者模型的 has_many 关联。我想实现评论功能，以便在创建评论时向所有参与者发送电子邮件，并且当参与者回复电子邮件时，该回复将作为进一步评论添加到活动中。发送电子邮件时，我想使用可用于识别源活动的动态回复地址（例如，activity-345@mydomain.com）。

我发现了一篇有用的[博客文章](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)，其中涵盖了在 Rails 3 中接收电子邮件的各种选项，尽管这已经有几年历史了。似乎最可行的解决方案是使用像[Postfix](http://www.postfix.org/)这样的邮件服务器，然后执行 ruby​​ 脚本通过 HTTP POST 将电子邮件发送到我的应用程序，或者使用[mailman](https://github.com/titanous/mailman) gem 轮询电子邮件；或使用[CloudMailin](http://www.cloudmailin.com/)或[Mailgun](http://www.mailgun.com/)等第三方通过 HTTP POST 向我的应用程序发送电子邮件。

我只是想知道是否有人可以根据他们用于发送/接收电子邮件的解决方案提供任何建议或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T18:43:41.583

Check out [Pony](https://github.com/benprew/pony "Pony") - it's a really simple to use e-mail gem that can be set up to use an external SMTP (like Gmail). I've used it on a couple of my sites and it's pretty solid.

# android - Mono for android 使用本机库

> ID：14320340
> 
> 赞同：0
> 
> 时间：2013-01-14T14:29:17.480
> 
> 标签：android, mono, xamarin.android

我是 Mono for Android 项目的新手，我需要在我当前的项目中使用它。我想问一下，如何在Java for Android 上制作一些本机库并将其附加到C# 上的Mono for Android 项目中？我阅读了一些关于 stackoverflow 的文章，但没有找到适合我的答案。我还读到：

[http://docs.xamarin.com/Android/Guides/Advanced_Topics/Using_Native_Libraries](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Using_Native_Libraries)

我无法理解“libfoo.so”的含义以及如何创建它？*.so 扩展名是什么意思？我会感谢一些真实的经验分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:49:50.180

在这种情况下，“本机”库是指用 C/C++ 编写的库（您可以将 .so 文件视为 C/C++ 的 DLL）。也就是说，听起来您实际上想要绑定 Java 库，而不是 C 库。Xamarin 提供了一些工具，允许您为 Java 库创建绑定，并在此处提供指南：[绑定 Java 库 (.jar)](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_%28.jar%29)

# xml - 使用transformNode（）在带有xsl文件的ie10中xml显示不正确

> ID：14320341
> 
> 赞同：0
> 
> 时间：2013-01-14T14:29:23.527
> 
> 标签：xml, xslt, msxml, internet-explorer-10

执行以下操作时，我在 IE10 中以中文类型语言显示我的数据：

```
 ICVID = Request.QueryString("ICVID")
      strXML = GetXML(ICVID) 'Gets data in xml format

Dim oDOM, xSS
Set oDOM = Server.CreateObject("MSXML2.DOMDocument")
oDOM.async = False
Set xSS = Server.CreateObject("MSXML2.DOMDocument")
xSS.async = False
oDOM.loadXML strXML
...
xSS.load Server.MapPath("GMTInboundCharges.xsl")
If xSS.parseError.errorCode <> 0 Then
    Response.Write xSS.parseError
End If
Response.Write oDOM.transformNode(xSS) 
```

在以前版本的 IE10 中运行良好。我已经看到其他关于 IE10 中带有 xml 响应的更改的帖子，但我没有使用 AJAX。想知道我需要进行哪些更改才能使我的数据正确显示。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:07:34.663

IE 10 打破了 transformnode 和 reponseXML 的集成。

[http://blogs.msdn.com/b/ie/archive/2012/07/19/xmlhttprequest-responsexml-in-ie10-release-preview.aspx#comments](http://blogs.msdn.com/b/ie/archive/2012/07/19/xmlhttprequest-responsexml-in-ie10-release-preview.aspx#comments)

（responseXML 不再是您可以在 .transformNode 上使用的 MSXML 元素）

我还没有找到任何解决方案。

# php - 将照片填充到 html div 的 php 脚本

> ID：14320343
> 
> 赞同：2
> 
> 时间：2013-01-14T14:29:35.193
> 
> 标签：php

我目前有一个大约 250 jpeg 的图片页面。图像，我目前有一个网页，我在其中手动将图片分配给页面上的一个部分，但是这非常耗时，并且希望创建一个脚本来运行并将图像分配给 div。虽然这通常很容易，但我的问题是他们归档图像的方式。在网页上，我有一个四边形绘图，四边形的每个部分都需要分配给它的图像。图像文件名各不相同，这让我很头疼：

文件格式 Ex 如下。所以每个四边形将有 4 个图像，下划线之前的第一组数字是图片 ID，下划线之间的数字是图片所在的四边形的哪个部分。但是 pict id 的长度各不相同，我不知道该怎么做。任何想法或建议表示赞赏。

*   1234_1_01.jpeg
*   1234_2_03.jpeg
*   1234_3_02.jpeg
*   1234_4_01.jpeg
*   345422_1_01.jpeg
*   345422_2_02.jpeg 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:44:25.940

最好的办法是浏览整个文件夹并相应地过滤图片，如下所示：

```
$myPicFolder = "path/to/pictures/";
$thePics = array();
if (is_dir($myPicFolder)) {
    if ($dh = opendir($myPicFolder)) {
        while (($file = readdir($dh)) !== false)) {
            if(!is_dir($myPicFolder . $file){
                list($intersectionID,$section,$imgID) = explode('_'.$file);//Seperates the parts of the name for easier access
                //check if the ID is already a key in $thePics
                if(!array_key_exists($intersectionID,$thePics)){
                    //Add the new ID if it does not exist with an empty array.
                    $thePics[$intersectionID]=array();
                }
                if(!array_key_exists($section,$thePics[$intersectionID])){
                    //Add the new ID if it does not exist with an empty array.
                    $thePics[$intersectionID][$section]=array();
                }
                // Add a new part to the ID since each picture ID has 4 pictures.
                $thePics[$intersectionID][$section][] = $file;
            }
        }
        closedir($dh);
    }
}

//$thePics will then look like:
// array('1234'=>array(
//        '1'=>'1234_1_01.jpeg',
//        '2'=>'1234_2_03.jpeg',
//        '3'=>'1234_3_02.jpeg',
//        '4'=>'1234_4_01.jpeg'),
//    '345422'=>array(
//        '1'=>'345422_1_01.jpeg',
//        '2'=>'345422_2_02.jpeg')
//    );

//Cycle through the pictures...
foreach($thePics as $pictureID=>$quad){
    echo '<div class="intersection">';
    foreach($quad as $quadPart=>$pictures){
        echo '<div class=”s1”&gt;';
        foreach($pictures as $pictureSRC){
            echo '<img src="'.$pictureSRC.'"/>';
        }
        echo '</div>';
    }
    echo '</div>';
} 
```

请记住对文件性质进行更多验证，以确保您只发送图片......也许测试文件扩展名和 mime 类型......

编辑：添加了一些注释并使用 list() 为我正在使用的变量提供明确的名称，以便更好地理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:55:58.793

```
<?php

$test = '1234_1_01.jpeg';
list($pict_id, $quad_id) = explode('_', $test);
echo "Pict ID: $pict_id<br />
      Quad ID: $quad_id"; 
```

# bash - Bash - 未设置标志以查找文件证据

> ID：14320350
> 
> 赞同：1
> 
> 时间：2013-01-14T14:29:54.740
> 
> 标签：bash, shell, grep

我知道这一定很简单，但我只是没有看到它。我们有一个文件 ，`SpeakerList.txt`其中包含我们数据库中的一系列单行扬声器。`new.trs`保存以空格分隔的数据库版本。我需要验证我们是否在数据库中找到了发言者，因此我正在运行以`grep`发言者名称开头的 for 行。以下代码始终会导致`if`每个发言者最后触发的语句。我有一段类似的代码可以检查文件是否存在，它工作得很好。我错过了什么？我知道我的循环正在运行——我已经用调试线`grep`试过了。`echo`我还尝试打印出该`$speakerFound`字段并验证它最后确实是空白的，即使我有一个声明显示它被标记为“找到”

```
for i in `cat SpeakerList.txt`
do 
  speakerFound="" 
  echo "Speaker: $i"
  grep "^$i" ~/work/new.trs | while read line
  do 
    fileName=`echo $line | cut -d' ' -f 2`
    speakerFound="found"
    break
  done

  if [ "$speakerFound" == "" ]; then
    echo "$i not found in database."
  fi
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:36:00.303

您正在`speakerFound`子外壳中设置变量。阅读[此链接](http://www.vidarholen.net/contents/blog/?p=178)以获取更多详细信息，但总的来说：

*   当您`stdin`在 bash 中重定向循环时，循环将在子 shell 中执行。
*   因为循环是一个子shell，循环内的变量赋值在循环外是不可见的。

一种解决方案是使用磁盘上的文件来包含结果（将其写入内部循环，并在需要结果时将其读回）。

# magento - Magento > 目录产品列表 > 想要通过计算添加 orderBy

> ID：14320361
> 
> 赞同：0
> 
> 时间：2013-01-14T14:30:31.830
> 
> 标签：magento

我有这个：

> $this->_productCollection = $layer->getProductCollection() ->addAttributeToSort('special_price', 'desc');

我想做类似的事情：

> $this->_productCollection = $layer->getProductCollection() ->addAttributeToSort('special_price*100/price', 'desc');

实际上，我的促销/销售百分比没有保存在我的数据库中。但我想按这个百分比排序（使用 Mage Core 或 SQL）。我可以这样做还是必须使用 php ？

我尝试自定义 Select 但没有用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T09:17:48.527

我终于找到了办法。

```
->addExpressionAttributeToSelect("pourcentage", "((100-({{special_price}}/price)*100))","special_price")
            ->addAttributeToSort("pourcentage","desc"); 
```

查询后我不需要对集合进行排序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:09:16.820

您可以在数据库中创建附加列并将其命名为“my_special_price”。但更好的方法是使用 PHP。

# git - 将当前分支推送到 Gerrit

> ID：14320363
> 
> 赞同：8
> 
> 时间：2013-01-14T14:30:33.883
> 
> 标签：git, gerrit

我喜欢简单地使用`git push`（仅）将当前分支推送到配置的上游。为此，我设置`git config push.default upstream`了完全正确的方法。

现在我尝试为 Gerrit 设置一个合适的遥控器，它会自动推送到`refs/for/*`.

这个想法是这样做的：

```
[remote "gerrit"]
        url = ssh://host:port/repo
        push = refs/heads/*:refs/for/* 
```

我想输入`git push gerrit`并期望 git 仅将当前分支推送到正确的引用。

不幸的是，现在 git 试图将*所有*本地分支推送到 Gerrit。- 有没有办法告诉 git 像`push.default`上面一样只推送当前分支？

更新：

*   Git push 只能使用一个 refspec。
*   如果在命令行上给出了明确的 refspec，则使用这个。
*   如果在命令行上没有给出，则使用远程定义的那个。
*   如果遥控器也没有给出，那么只有 push.default 被考虑。

对于 Gerrit，我需要一个像 'branch:refs/for/branch' 这样的 refspec，其中分支是当前分支。

问题：

*   是否有与 push.default=upstream 正在执行的操作等效的显式 refspec？
*   有没有办法配置 git 以使普通文本`git push`自动推送到正确的 refs/for ref？

目前，我发现的最好方法是将所有内容包装在一个单独的脚本中，就像[这里](https://stackoverflow.com/questions/7101145/how-to-configure-specific-upstream-push-refspec-for-git-when-used-with-gerrit)建议的那样。但我仍然不相信只有一个合适的 refspec 是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T21:36:22.910

根据[消息来源](https://github.com/git/git/blob/master/builtin/push.c#L146)，Git 目前`push.default = upstream`通过生成包含显式名称的显式 refspec 来实现。

似乎目前没有办法通过单个通用 refspec 来指定该行为，并且一些构建显式 refspec 的脚本（如建议的[此处）是目前唯一的方法。](https://stackoverflow.com/questions/7101145/how-to-configure-specific-upstream-push-refspec-for-git-when-used-with-gerrit/7141743#7141743)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-20T14:26:48.727

作为一种解决方法，我截获了 git 函数并让它执行默认推送：

.bashrc

```
git ()
{
    if [ $1 = "push" -a -z $2 ]
    then
        /usr/bin/git push origin HEAD:refs/for/master
    else
        /usr/bin/git $@
    fi
} 
```

I guess its a hack, but it works for me.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T20:27:06.560

您可以使用命令将 git 配置为仅将当前分支发送到远程存储库`git config --global push.default current`。

您可以传递给 push.default 的其他选项是：

```
nothing - do not push anything.
matching - push all matching branches. All branches having the same name in both ends are considered to be matching. This is the default.
upstream - push the current branch to its upstream branch.
tracking - deprecated synonym for upstream.
current - push the current branch to a branch of the same name. 
```

这些配置可以在`git help config`命令中看到。

更新：但是，更仔细地阅读手册页，`push.default`“定义了 git push 应该采取的行动，如果在命令行上没有给出 refspec，没有在远程配置 refspec，并且任何给出的选项都没有暗示 refspec命令行”。因此，我认为您在指定 refspec 时需要使用脚本仅发送当前分支。

# android - MediaPlayer 信息/警告 (1, 0)

> ID：14320368
> 
> 赞同：4
> 
> 时间：2013-01-14T14:30:42.773
> 
> 标签：android, google-tv

MediaPlayer 开始播放音乐，但在日志中我发现警告消息；

```
MediaPlayer mp = MediaPlayer.create(this, R.raw.test);
mp.start(); 
```

警告和信息日志消息：

> 01-14 16:21:41.708: W/MediaPlayer(12434): 信息/警告 (1, 0)
> 
> 01-14 16:21:41.708: I/MediaPlayer(12434): 信息 (1,0)

我没有找到这些警告的确切描述，有人知道这是什么意思吗？任何想法都会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:08:25.857

```
info/warning (1, 0) 
```

据此 - [https://developer.android.com/reference/android/media/MediaPlayer.OnInfoListener.html](https://developer.android.com/reference/android/media/MediaPlayer.OnInfoListener.html)

> (int what, int extra)
> 
> what - 信息或警告的类型。extra - 一个额外的代码，特定于信息。通常依赖于实现。

就我而言：

> public static final int MEDIA_INFO_UNKNOWN 常量值：1 (0x00000001) 未指定的媒体播放器信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:43:26.690

它与媒体信息有关 - 播放器假设可能存在与媒体相关的定时文本信息。检查与您尝试播放的内容相关的元数据。您可能可以放心地忽略您的问题。

# c# - MVVM Windows 8 appBar mvvm 事件

> ID：14320377
> 
> 赞同：1
> 
> 时间：2013-01-14T14:31:10.860
> 
> 标签：c#, windows-8, mvvm-light, appbar

我的问题是事件。在 AppBar 中，我发明的所有事件都没有起作用。（MessageDialog 或其他事件），当 AppBar 显示时，我无法隐藏，并且在 AppBar 中没有点击按钮。

```
<Page.BottomAppBar>
<AppBar x:Name="AppBar" Background="#FF1DB05F">         
    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">                  
        <Button x:Name="SaveButton" Style="{StaticResource AppBarButtonStyle}"
         Content="&#xE105;"

         AutomationProperties.Name="Save" >                       
           <WinRtBehaviors:Interaction.Behaviors>        
                <Win8nl_Behavior:EventToCommandBehavior Event="Tapped"

                                          Command="NewFileXml"

                                          />     
            </WinRtBehaviors:Interaction.Behaviors>

        </Button> 
```

在 MainViewModel.cs

```
public async void NewFileXml()
        {

            XmlDocument dom = new XmlDocument();
            XmlComment comment = dom.CreateComment("This is Goal a Year");
            XmlElement x;
            dom.AppendChild(comment);
            x = dom.CreateElement("Goal of a Year");
            dom.AppendChild(x);

            XmlElement stepXml = dom.CreateElement("Goalyear");
            XmlElement goalYearXml = dom.CreateElement("GoalStep");
            stepXml.InnerText = GoalYear;
            goalYearXml.AppendChild(stepXml);

            Windows.Storage.StorageFolder sf = await Windows.ApplicationModel.Package.Current.InstalledLocation.CreateFolderAsync("GoalPlan");
            StorageFile st = await sf.CreateFileAsync("GoalYear.xml");
            await dom.SaveToFileAsync(st);
        }
        public  ICommand NewFile
        {
            get
            {
                return new RelayCommand(() =>
                    {

                        NewFileXml();

                    });
            }
        } 
```

我在波兰微软的帮助下做到了。也许有人要添加。

```
 private RelayCommand exampleContent;
            public RelayCommand ItIsBind
            {
                get
                {
                    return exampleContent ?? (exampleContent = new RelayCommand(ContentLoad));
                }
            }
**Method example**
public void ContentLoad()
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:03:30.977

我不确定这是否适合你，但就我而言，我必须将我的 appbar 放在主网格内。所以你复制这个

```
<AppBar x:Name="AppBar" Background="#FF1DB05F">         
<StackPanel Orientation="Horizontal" HorizontalAlignment="Right">                  
    <Button x:Name="SaveButton" Style="{StaticResource AppBarButtonStyle}"
     Content="&#xE105;"

     AutomationProperties.Name="Save" >                       
       <WinRtBehaviors:Interaction.Behaviors>        
            <Win8nl_Behavior:EventToCommand etc... 
```

没有

```
<Page.BottomAppBar> 
```

标签并将其粘贴到您的主网格标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:37:10.253

这里有几个可能的问题......

1）您的命令不是名为“NewFileXml”，而是“NewFile”
2）您似乎没有设置 DataContext - 您是否在其他地方执行此操作（如果是，您还没有显示）

# linux-device-driver - 如何在执行模块的 insmod 后创建 /dev/entry

> ID：14320382
> 
> 赞同：1
> 
> 时间：2013-01-14T14:31:17.713
> 
> 标签：linux-device-driver, insmod

我得到了一个带有这些指令的 Linux 内核模块： insmod 。然后确定主编号并创建一个 /dev 条目。从 dmesg 文件可以看出，我能够成功安装。但是，我不知道如何确定设备号。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:57:46.060

我假设您知道您正在谈论的设备的名称。您可以从中检索主号码`/proc/devices`。以下是该文件的摘录：

> 字符设备：
> 1 mem
> <...>
> 216 rfcomm
> 226 drm
> 252 hidraw
> 253 bsg
> 254 rtc
> 
> 块设备：
> 259 blkext
> 8 sd
> 9 md
> <...>

在那里查找您的设备名称。主号码在同一行，就在名称之前。

旁注。我还建议查看“Linux 驱动程序开发”一书（[http://lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)），尤其是。第 1-3 章。那里解释了设备编号和许多其他有用的东西。虽然这本书的某些部分现在有点过时了，但它仍然非常有用。旁注结束。

# iphone - UITableViewCell 背景视图上的 UIButton

> ID：14320384
> 
> 赞同：1
> 
> 时间：2013-01-14T14:31:24.560
> 
> 标签：iphone, ios, objective-c, uitableview

我正在使用两个框架来滑动 TableView 的 UITableViewCells。它们是：**DMSlidingCell**和**LRSlidingTableViewCell**。我试图在 UITableViewCell 的背景视图中放置一个按钮（当 Cell 消失时显示的视图）并且我成功地这样做了 - 按钮出现了。但是这个按钮要么处于非活动状态，要么禁用单元格的滑动行为。我想知道它是如何完成的。我基本上是在自定义单元类中执行此操作：

```
-(void) addButtonToCell
{
    UIButton* btn = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    btn.frame = CGRectMake(95, 25, 60, 44);
    btn.tag = 1234;
    [btn setTitle:@"Hi" forState:UIControlStateNormal];
    [btn addTarget:self
            action:@selector(tryOut)
  forControlEvents:UIControlEventTouchDown];
    [self.backgroundView addSubview:btn];
} 
```

我将按钮添加到视图中，如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *identifier = @"CELL_IDENTIFIER";

  LRSlidingTableViewCell *cell = (LRSlidingTableViewCell *)[tableView dequeueReusableCellWithIdentifier:identifier];

  if (cell == nil) {
    cell = [[[LRSlidingTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];
  }

  cell.selectionStyle = UITableViewCellSelectionStyleNone;
  cell.contentView.backgroundColor = [UIColor whiteColor];
  cell.textLabel.text = [NSString stringWithFormat:@"Cell %d", indexPath.row];
  cell.delegate = self;
  [cell addButtonToCell];

  return cell;
} 
```

关于什么可能是错误的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:30:41.040

尝试

```
[self.tableView.backgroundView addSubview:btn]; 
```

再见！

# css - IE7和奇怪的造型？

> ID：14320385
> 
> 赞同：0
> 
> 时间：2013-01-14T14:31:29.237
> 
> 标签：css, button, input, internet-explorer-7, border

IE 快把我逼疯了。

请参阅以下页面：http: [//goo.gl/uRGsh](http://goo.gl/uRGsh)

在 IE8+ 中，内容中的按钮看起来和表现都还不错，但由于某种原因，当在 IE7 中聚焦时，按钮会被赋予白色边框和粗黑轮廓。我试过用 删除轮廓`outline: none;`，这对我完全没有任何作用。

另一个令人不安的事情是按钮中的文本有点跳下焦点。我不确定是什么原因造成的；它不能是填充，可以吗？因为那样按钮会变大。我错过了什么吗？按钮为我跳转到所有 IE 中。我有带有背景的自定义悬停/焦点状态，所以我不想要跳动。

任何想法如何摆脱边界/轮廓和跳跃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:51:13.183

尝试这个

从图像链接中删除轮廓

```
 a img {outline : none;} 
```

从图像链接中删除边框

```
 img {border : 0;} 
```

祝你好运..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T14:42:28.990

另外 - 对于此类问题，请考虑使用 html5 shiv

```
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

# php - 在循环中访问多个 id 错误

> ID：14320387
> 
> 赞同：0
> 
> 时间：2013-01-14T14:31:29.593
> 
> 标签：php, javascript

我的错误框有一个小问题/错误。我将首先向您展示代码，然后再进行解释：我调用函数的位置：

```
$jsid = 0;
    foreach ($errors as &$value) {
        $jsid++;
        echo $jsid;
        error('', $value, $jsid);
    } 
```

...这是功能：

```
function error($title, $error, $id)
{
    echo "<div id='warning".$id."' class='errorbox' style='border-style:solid; border-width: 1px; border-color:#FFF;'>
            <a style='float: left;' onClick='document.getElementById('warning".$id."').style.display = 'none';' aria-label='Exit View As...'  class='_7fy'></a>";
            if($title !== '') {
               echo "<h3>$title</h3>";
            }
            echo "<p>$error</p></div>";
} 
```

我所做的是因为我知道我会有多个具有相同 ID 的元素，所以我添加了 foreach 以便它们不同，然后在函数中，我会将我传入的 id 添加到“警告”中。我看到它的方式是，它将确保 JS onclick 工作。有人可以解释什么是错的。一个修复将不胜感激，并在键盘上节省大量的头撞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:55:10.487

你有一个基本的引用问题。混合**三种**不同的语言，并试图让它发挥作用。您处于 PHP 模式，转储出包含 javascript 的 html，并且都对同一事物使用相同的引号。而不是这样丑陋的垃圾，使用[HEREDOC](http://php.net/heredoc)，或者至少从组合中删除 PHP，所以你只需要 html+js，例如：

```
echo <<<EOL
<div id="warning{$id}" class="errorbox" style="border-style:solid; border-width: px; border-color:#FFF;">
    <a style="float: left;" onClick="document.getElementById('warning{$id}').style.display = 'none';" aria-label="Exit View As..."  class="_7fy"></a>

EOL 
```

- 或者 -

```
?>
<div id="warning<?php echo $id ?>" class="errorbox" style="border-style:solid; border-width: px; border-color:#FFF;">
    <a style="float: left;" onClick="document.getElementById('warning<?php echo $id ?>}').style.display = 'none';" aria-label="Exit View As..."  class="_7fy"></a>

<?php 
```

请注意引号是如何“自然地”工作的，而不需要任何转义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:41:43.137

```
onClick="this.style.display = 'none'; return false;" 
```

这更容易，不是吗？

编辑：我同意 FAngel 更准确地说：

```
onClick="this.parentNode.style.display = 'none'; return false;" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:41:15.243

这就是问题：

```
onClick='document.getElementById('warning".$id."').style.display = 'none';'
        ^                        ^ - the string ends here 
```

您有单引号 ( `'`) 嵌套在单引号内，这是一个错误，并导致`onClick`字符串提前终止。您需要将其中一个更改为双引号。

```
onClick=\"document.getElementById('warning".$id."').style.display = 'none';\"
        ^^ change to double-quotes, and escape for being inside PHP quote. ^^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:44:25.807

尝试格式化您的 onclick 部分，如下所示：

```
onClick=\"document.getElementById('warning".$id."').style.display = 'none';\" 
```

所以，结束引号不会乱七八糟

此外，您可以使用 parentNode 而不是使用 ID（根本不需要分配 ID，**但是**`a`如果您使用其他元素包装您的标签 - 这部分将被破坏）：

```
onClick=\"this.parentNode.style.display = 'none';\" 
```

如果是您的标记，则 parentNode 将指向您需要关闭的 div。事件处理程序中的 this 指向发生事件的元素。

[https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)

# android - 如何以编程方式下拉状态栏android

> ID：14320390
> 
> 赞同：2
> 
> 时间：2013-01-14T14:31:36.357
> 
> 标签：android

> **可能重复：**
> [如何以编程方式在 Android 中打开/关闭通知？](https://stackoverflow.com/questions/5029354/how-can-i-programmatically-open-close-notifications-in-android)

我需要一个代码，它会以编程方式在 android 中下拉状态栏。有没有办法把它放下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T15:01:34.157

在任何地方使用此代码。

```
Object sbservice = getSystemService( "statusbar" );
Class<?> statusbarManager = Class.forName( "android.app.StatusBarManager" );
Method expandMethod;
        if (Build.VERSION.SDK_INT >= 17) {
            expandMethod = statusBarManager.getMethod("expandNotificationsPanel");
        } else {
            expandMethod = statusBarManager.getMethod("expand");
        }
expandMethod .invoke( sbservice ); 
```

或者让它更短使用这个：

```
StatusBarManager statusBar = (StatusBarManager) getSystemService(STATUS_BAR_SERVICE);
statusBar.expand(); 
```

清单中需要许可。

```
<uses-permission android:name="android.permission.EXPAND_STATUS_BAR" /> 
```

# adobe - 验证和突出显示表单字段

> ID：14320391
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:31:39.850
> 
> 标签：adobe, pdf-form, livecycle-designer

我有一个表格，有很多字段，不能为空。并且不得突出显示它们。所以，一方面：我必须将这些字段设为必填，因为不要让用户打印带有空白字段的表单。但如果我使用标准设置进行操作，这些字段将以红色突出显示（acrobat 阅读器的默认设置）。是的，这些设置可以在 Acrobat Reader 中更改，但由于该表单将被很多用户使用 - 我不能强制他们全部更改设置。另一方面：如果表单字段设置为可选，则验证脚本不适用于空字段。那么，有没有办法解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:35:58.870

这是一个曲线球要求。通常，客户实际上希望在表单字段中出现某种可见的指示器，以将他们的注意力吸引到特定的字段上。我建议审查这些要求，因为它违反了可用性指南和行业最佳实践。

话虽如此，实现您想要实现的目标还有很长的路要走。

1.  打开您正在处理的表单并导航到：文件 > 表单属性 > 表单验证 > 颜色必填字段
2.  选中复选框：“未填写的颜色必填字段”并从颜色选择器“边框颜色”和“背景颜色”属性中选择白色。

请让我知道，如果你有任何问题。

谢谢，阿玛汉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:25:45.193

关于可用性和最佳实践，我同意 Armaghan。如果高亮字段不是一个选项，那么您可以通过循环遍历每个必填字段来将焦点设置到该字段，当它遇到不完整的字段时，停止并给予该字段焦点。这远非理想，因为如果用户错过了许多字段，他们将不得不对每个字段都经历相同的过程，直到完成。这也意味着添加一个检查我的表单按钮来发起验证检查。

# c++ - 在所有节点为 struct C++ 的排序列表中进行二进制搜索

> ID：14320395
> 
> 赞同：1
> 
> 时间：2013-01-14T14:31:56.683
> 
> 标签：c++, list, stl, binary-search

我有一个列表，其中包含所有元素作为形式的结构

```
typedef struct person_node{
    string name;
    string country;
}person;

std::list<person> list; 
```

该列表已**按人名排序**。

如何在此使用内置的**binary_search()**函数？

我已经知道如何在只有数字作为数据的列表上使用这个**binary_search()**，但我想知道如何将它用于这样的列表。

我将此二进制函数用作：

```
binary_search (list.begin(), list.end(), value, compare_function); 
```

唯一我不知道的是，“如果我需要在列表中查找特定名称，我应该输入什么来代替**value ？”**

如果找到，我还希望**迭代器**指向该节点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T14:37:24.853

您输入一个`person`包含`name`您要查找的内容。

另请注意，`binary_search`它很少有用（它只告诉您该项目是否存在，而不是它在集合中的位置。它在 a 上双重无用`std::list`，因为它需要随机访问迭代器才能正常工作（这`std::list`并不提供）。

因此，您可能想要的是`std::vector<person>`or `std::deque<person>`，您可能想要使用`std::lower_bound`or进行搜索`std::upper_bound`。`std::lower_bound`并将`std::upper_bound`每个返回一个迭代器到他们找到的项目，让您访问该对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:36:06.963

第三项以您可以调用的方式描述了您正在搜索的内容

`compare_function(*iter, value )`

或者

`compare_function( value, *iter )`

where`iter`是您的集合中的有效迭代器。如果必须出现在您的列表中以保持排序，这应该`true`在第一种情况下返回，在第二种情况下反之亦然。`*iter``value`

因此请注意，如果您支持这两个重载，您实际上可以将 a`string`作为第三个参数传入。`compare_function`原型是：

```
template <class ForwardIterator, class T, class Compare>
   bool binary_search ( ForwardIterator first, ForwardIterator last,
                   const T& value, Compare comp ); 
```

并且 T 不一定是迭代器的值类型。

顺便说一句，虽然您可以将它用于 a `std::list`，但对于不是随机访问的迭代器来说效率极低，因为每个`std::advance`语句都是`O(N)`因此整个操作是`O(N log N)`. 即使是普通人`std::find`也会更快。

使用`vector`or`multiset`如果你可以有重复，或者`set`如果你不允许重复。

`binary_search`它本身也会返回该项目是否存在并且`true/false`没有找到你的项目（所以你不会知道他们的国家）。如果您有重复项，您可以使用它`std::equal_range`来获取所有此类值的列表。如果不这样做，您可以使用`std::lower_bound`which 将为您提供一个迭代器，指向名称等于或大于您的名称的第一个项目，然后检查它是否相等，而不是更大。

# python - Pygame 与 EPD 的 Python 版本

> ID：14320396
> 
> 赞同：1
> 
> 时间：2013-01-14T14:31:57.237
> 
> 标签：python, pygame

我不知道如何在[OS X 10.6](http://en.wikipedia.org/wiki/Mac_OS_X_Snow_Leopard) (Snow Leopard)上安装[Pygame 。](http://en.wikipedia.org/wiki/Pygame)我安装了[Enthought Python Distribution](http://www.enthought.com/products/epd.php) [(](http://en.wikipedia.org/wiki/Python_%28programming_language%29) EPD)提供的Python 版本——按照 MIT 课程讲师的要求——然后安装了 Pygame for Snow Leopard 和 Python 2.7 版本。不幸的是，当我尝试这样做时，我得到一个 ImportError（没有名为 pygame 的模块）。我该如何解决这个问题？`import pygame`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T23:18:19.103

一开始我也遇到了困难，但在阅读 [了这个网站后发现它很容易](http://www.scidav.org/installs/visionegg)

*   第 1 步：cd /Library/Frameworks/Python.framework/Versions
*   Step2: sudo ln -s 7.3 2.7 【7.3是epd版本，2.7是python版本，明显改成你有的python和epd版本】
*   第 3 步：从 pygame 网站获取安装程序。下载并安装。

瞧！pygame 正在工作

# r - 使用 apply 或循环输出预定长度的向量

> ID：14320400
> 
> 赞同：0
> 
> 时间：2013-01-14T14:32:08.483
> 
> 标签：r, loops, apply

我需要重复以下这样的过程 10 次：

```
> random=rnorm(5)  
> total=sum(random) 
```

然后将每次的总数放入一个称为final的向量中。

对于一个循环，我想我会写：

```
> final <- c(total[[i]])
> for(i in 1:10){  
  random=rnorm(5)  
  total=sum(random)
  ...
} 
```

...不知道如何将我的总数放入我的最终向量中？同样从网上环顾四周，大多数地方都说我应该使用应用代码。我应该使用哪个以及如何将总数放入最终结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:35:30.327

R 提供了一个专门`replicate`为这个用例调用的函数，它会按照你指定的次数重复操作，并将结果存储在一个向量中：

```
> replicate(10, sum(rnorm(5)))
[1] -0.2286870  1.5123902 -5.8179539  1.2119908 -2.8749987  5.5817021
[7]  2.5427969  2.1833426  0.4884455 -3.6787912 
```

如果产生数据的函数比较复杂，那么你可以使用replication来调用一个函数，或者直接使用sapply。所以

```
> genRandomData <- function() {
    random <- rnorm(100)
    c(sum(random), var(random))
}
> replicate(10, genRandomData())
         [,1]     [,2]      [,3]      [,4]      [,5]      [,6]       [,7]
[1,] 6.612235 6.895032 -4.004501 -8.250871 2.3098680 2.0388161 23.5202949
[2,] 1.082576 0.769107  1.119480  1.206932 0.9930102 0.9078762  0.9544335
            [,8]      [,9]     [,10]
[1,] -12.2080648 9.0074524 0.2358715
[2,]   0.8256081 0.8669045 0.9017415 
```

或者，使用 sapply 产生相同的输出（这很好，因为它不回复替换），

```
> sapply(integer(10), function(x) {
    random <- rnorm(100)
    c(sum(random),var(random))
}) 
```

如果你想从这个结尾得到一个数据框，你必须转置；所以

```
> data.frame(t(sapply(integer(10), function(x) {
    random <- rnorm(100)
    list(s=sum(random),v=var(random))
})))
            s         v
1   -6.343845    1.0397
2    12.94773 0.9480807
3    5.811322 0.9670198
4   -1.941444   1.04547
5  -0.9094589  0.862759
6   -2.852641 0.5504582
7   -8.471266  1.080554
8    -17.2341  1.201679
9    11.60805  1.150254
10  -7.138314  1.080731 
```

# spring - ExtJS 4 文件上传和 Spring 错误

> ID：14320403
> 
> 赞同：0
> 
> 时间：2013-01-14T14:32:12.063
> 
> 标签：spring, extjs

我正在尝试使用 extjs 4 和 Spring 3.1 上传文件。文件正确上传，但我不断收到响应错误。最初的错误是：

Ext.Error：您正在尝试解码无效的 JSON 字符串：

```
{"success":true,"msg":"上传成功"}
```

因此，经过研究，我看到它说响应内容类型应该是 text/html。我将控制器更改为使用 @RequestMapping 注释中的生产标记来发送文本/html。现在我得到一个 Http 错误 406。但是查看 Accept 标头，浏览器应该能够接受 text/html。

```
http://localhost:9081/gppRenewalQuestionnaire/uploadExpenditure.htm

POST /gppRenewalQuestionnaire/uploadExpenditure.htm HTTP/1.1
Host: localhost:9081
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20100101 Firefox/17.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost:9081/gppRenewalQuestionnaire/index.htm?nanda=C37843
Cookie: JSESSIONID=0000a7q2lUHepKNFfO__YaUIAZ-:-1
Content-Type: multipart/form-data; boundary=---------------------------23281168279961
Content-Length: 16056
-----------------------------23281168279961
Content-Disposition: form-data; name="owner"

772
-----------------------------23281168279961
Content-Disposition: form-data; name="rq"

439
-----------------------------23281168279961
Content-Disposition: form-data; name="fileData"; filename="GIGNotes.docx"
Content-Type: application/vnd.openxmlformats-officedocument.wordprocessingml.document

PK
HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Language: en-US
Transfer-Encoding: chunked
Date: Mon, 14 Jan 2013 14:26:46 GMT
Server: WebSphere Application Server/6.1
---------------------------------------------------------- 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:45:15.343

对不起各位。一个同事看了这个问题大约20分钟，解决了。他说我在处理上传的控制器方法上没有 @ResponseBody 注释。我相信我做到了，但我无法证明这一点。哦，好吧，它正在工作，这才是最重要的。:-)

# sql - 查询 Access 数据库中的每个表？

> ID：14320412
> 
> 赞同：0
> 
> 时间：2013-01-14T14:32:28.927
> 
> 标签：sql, ms-access

某个数据库中的所有表都有确切的列，所以我想知道是否有一种方法可以一次查询所有表，以获得我知道每个表都会有的特定几列。我想这样做的原因是数据库中的表数量会不断增长，我不想每天都去更改我的查询以适应新表的名称。

一如既往地感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:14:42.873

在这种情况下，请尝试 ADO：

```
Function ListTablesContainingField(SelectFieldName) As String
   'Tables returned will include linked tables
   'I have added a little error coding. I don't normally do that
   'for examples, so don't read anything into it :) 
   Dim cn As New ADODB.Connection
   Dim rs As ADODB.Recordset
   Dim strTempList As String

       On Error GoTo Error_Trap

       Set cn = CurrentProject.Connection

       'Get names of all tables that have a column called <SelectFieldName>
       Set rs = cn.OpenSchema(adSchemaColumns, _
       Array(Empty, Empty, Empty, SelectFieldName))

       'List the tables that have been selected
       While Not rs.EOF
           'Exclude MS system tables
           If Left(rs!Table_Name, 4) <> "MSys" Then
               strTempList = strTempList & "," & rs!Table_Name
           End If
           rs.MoveNext
       Wend

       ListTablesContainingField = Mid(strTempList, 2)

   Exit_Here:

       rs.Close
       Set cn = Nothing
       Exit Function

   Error_Trap:

       MsgBox Err.Description
       Resume Exit_Here
   End Function 
```

来自：[http ://wiki.lessthandot.com/index.php/ADO_Schemas](http://wiki.lessthandot.com/index.php/ADO_Schemas)

您可能想考虑一张表格，如果您还没有表格，列出链接的 Excel 表格并保存存档日期等详细信息，因为您会在某个阶段遇到限制。

# virtuemart - hp 中的 measuremart 1.x 编号产品

> ID：14320417
> 
> 赞同：0
> 
> 时间：2013-01-14T14:32:38.170
> 
> 标签：virtuemart

我搜索了那个常见问题，但几乎没有找到任何东西......我想只显示我在 HP 中获得的产品数量（只有 2 个类别，但我只需要一个）。我在哪里可以找到该变量，我必须在哪里“打印”才能在主页上看到它？joomla 1.5.22，VM 1.1.5 非常感谢

# python - 如何在人员列表中找到不同国家的数量？

> ID：14320422
> 
> 赞同：1
> 
> 时间：2013-01-14T14:33:05.620
> 
> 标签：python, python-2.x

如何在人员列表中找到不同国家的数量？我有简单的类人

```
class Person(object):
    def __init__(self, nation, name):
        self.nation = nation
        self.name = name
        ... 
```

我可以遍历列表并增加字典（如果存在键国家，否则将值为 1）并获取国家的关键 si 数量和国家的成员数量，但我想知道是否有更多的 Pythonic 方式，如 c# 中的 linq

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:50:35.743

如果你想要不同国家的数量，你可以简单地取`len`a `set`。例如：

```
class Person(object):
    def __init__(self, nation, name):
        self.nation = nation
        self.name = name

People = [Person("Canada", "Dave"), Person("Scotland", "Alex"), Person("Canada", "Fred"), Person("Japan", "Kenta")] 
```

进而

```
>>> set(p.nation for p in People)
set(['Canada', 'Japan', 'Scotland'])
>>> {p.nation for p in People} # python 2.7
set(['Canada', 'Japan', 'Scotland'])
>>> len({p.nation for p in People})
3 
```

`(x for x in y)`是“生成器表达式”，而是`{x for x in y}`“集合推导”（仅在 2.7+ 中可用——它类似于列表推导，但用于集合。）

如果你想要更具体的信息，你可以使用一个`Counter`对象：

```
>>> from collections import Counter
>>> c = Counter(p.nation for p in People)
>>> c
Counter({'Canada': 2, 'Japan': 1, 'Scotland': 1})
>>> len(c)
3
>>> sum(c.values())
4 
```

# c# - 检查事件是否已注册

> ID：14320428
> 
> 赞同：6
> 
> 时间：2013-01-14T14:33:32.017
> 
> 标签：c#, events

如果我有注册和注销事件的经典方法（+= -=），是否还有一种方法可以查看现在是否已注册某些内容？

假设我有 2 种方法可以在一个 Timer 上注册。如果某些东西已经在 注册`.Elapsed`，我不希望其他任何东西注册（并且不希望某些东西注册多次）。

有什么方法可以查看当前注册到特定事件的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:41:53.913

如果你真的想要这样的行为，我认为最好的选择是使用重载事件的 add{} 和 remove{} 功能。

```
public class Foo
{

   private EventHandler<ElapsedEventArgs> _elapsed;

   public EventHandler<ElapsedEventArgs> Elapsed
   {
       add
       {
           if( _elapsed == null )
               _elapsed += value;
           else
               throw new InvalidOperationException ("There is already an eventhandler attached to the Elapsed event.");
       }
       remove
       {
           _elapsed -= value;
       }
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:40:04.060

您可以使用 GetInvocationList() 并依次获取计数

# tomcat - 是否可以在 Apache tomcat 的 1 个端口上托管一个 webapp，在另一个端口上托管另一个 webapp？

> ID：14320429
> 
> 赞同：0
> 
> 时间：2013-01-14T14:33:38.277
> 
> 标签：tomcat

我在jsp中有2个webapp，其中一个供公共使用，另一个供本地使用。

是否可以在 Apache tomcat 的 1 个端口上托管一个 webapp，在另一个端口上托管另一个 webapp？我在 server.xml 文件的连接器中看到了 appBase，它有什么作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:39:29.997

您应该更多地查看stackoverflow。

我找到了这个，它可能对你有帮助

[如何在不同端口后面的单个 Tomcat 实例上运行不同的应用程序？](https://stackoverflow.com/questions/8823290/how-to-run-different-apps-on-single-tomcat-instance-behind-different-ports)

# java - 如何管理安卓手机的硬件

> ID：14320437
> 
> 赞同：0
> 
> 时间：2013-01-14T14:34:00.783
> 
> 标签：java, android

我正在使用 Android 模拟器和开发平台。

我创建了一个新应用程序，想知道如何关闭或打开 Android 手机摄像头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:40:51.867

如果您正在谈论从您的应用程序中打开它，您应该为此使用相机 Intent。

```
Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
intent.putExtra("android.intent.extras.CAMERA_FACING", 1);
startActivityForResult(intent, 1); 
```

编辑：

1 - 用于前置摄像头

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:37:00.157

当您为模拟器创建 AVD 时，有启用前置和后置摄像头的选项。如果您为您的模拟器启用了此选项，您将能够像在普通手机上一样访问相机（使用相机应用程序或通过系统）。

如果您没有看到它，您可能没有在您的模拟器图像上启用相机选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:52:00.440

我将假设您已在模拟器上启用了相机，并希望自己访问它的功能，而不是打开现有的相机应用程序。您需要使用 Android 中的功能来实际访问此硬件，并且您还需要授予应用程序使用它的权限。

```
    私人无效startCamera（）{
        //首先检查相机是否可用
            if(getPackageManager().hasSystemFeature(PackageManager.FEATURE_CAMERA)){
                Log.d("CameraApp", "它有一个摄像头");
                摄像头 cam = Camera.open(); //开始使用相机。从这里开始，您应该能够访问它的功能。     
                cam.unlock();
                cam.startPreview();
            } 别的 {
                Log.d("CameraApp", "它没有摄像头");
                Toast.makeText(this, "没有可用的相机",
                        Toast.LENGTH_SHORT).show();
            }
        }

```

完成后请务必关闭它。

```
    私人无效停止相机（）{
        cam.stopPreview();
        cam.release();
    }

```

将此添加到您的 AndroidManifest.xml 以授予您的应用权限：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" /> 
```

每个功能（缩放、自动对焦等）都需要添加自己的权限。

另请参阅此以获取更多信息：http: [//developer.android.com/reference/android/hardware/Camera.html](http://developer.android.com/reference/android/hardware/Camera.html)

# cassandra - Cassandra 内存配置

> ID：14320438
> 
> 赞同：5
> 
> 时间：2013-01-14T14:34:01.897
> 
> 标签：cassandra

我们目前评估使用 Apache Cassandra 1.2 作为大规模数据处理解决方案。由于我们的应用程序是读取密集型的，并且为了为用户提供尽可能快的响应时间，我们希望配置 Apache Cassandra 以将所有数据保存在内存中。

在所有列族上将存储选项缓存设置为 rows_only 并为每个 Cassandra 节点提供足够的内存来保存其数据部分是否足够？或者 Cassandra 还有其他可能性吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T08:35:29.393

读取性能调整比写入复杂得多。根据我的经验，您可以考虑一些因素。有些观点与内存无关，但它们也有助于提高读取性能。

1.**行缓存**：避免磁盘命中，但只有在行不经常更新时才启用它。您还可以启用堆外行缓存以减少 JVM 堆使用量。

2\. **Key Cache**：默认开启，无需关闭。当没有命中行缓存时，它避免了磁盘搜索。

3.**降低memtable flush的频率**：调整memtable_total_space_in_mb、commitlog_total_space_in_mb、flush_largest_memtables_at

4.**使用 LeveledCompactionStrategy**：避免一行分布在多个 SSTables 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T05:19:46.073

DataStax 在其最新版本的基于 Apache Cassandra 的 NoSQL 数据库中添加了内存计算功能，作为提高在线应用程序性能的一部分。

**参考 ：**

[http://www.datastax.com/2014/02/welcome-to-datastax-enterprise-4-0-and-opscenter-4-1](http://www.datastax.com/2014/02/welcome-to-datastax-enterprise-4-0-and-opscenter-4-1)

# android - Android：允许使用 adjustPan 滚动表单

> ID：14320439
> 
> 赞同：0
> 
> 时间：2013-01-14T14:34:09.207
> 
> 标签：android, layout, scroll

我正在开发一个布局稍微复杂的 Android 应用程序，并且我正在做噩梦以使其按我想要的方式工作。我的主要布局是这样定义的：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#000000"
tools:context=".MainLayout" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:scrollbars="none" />

    <LinearLayout
        android:id="@+id/menudown"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        ... buttons ...

    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:id="@+id/header"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerInParent="true" >

    ... header content ...
</LinearLayout>    

</RelativeLayout> 
```

布局的想法是有一个内容框架（*content*），一个页脚菜单（*menudown*）和一个悬停在内容上的标题（ *header ），与屏幕顶部对齐。*- 对不起，没有图像，机密项目。

根据用户所在的部分，*内容*会与其他布局一起膨胀，其中一些是要填写的表格。所以，我只是使用了adjustPan，一切正常。

**这里的问题是：**客户要求我在显示软键盘时使*内容*可滚动，以便用户可以查看他在其他字段上写的任何内容。

**这很痛苦，因为：**表单适合屏幕，所以使用*内容*作为滚动视图无济于事，除非它被调整大小。

**并且简单地更改为 adjustResize 不起作用，因为：** menudown 与软键盘一起上升，这不应该发生。此外，视觉效果很糟糕。

该应用程序已经为 iPad 制作（由其他人），并且发生了什么：menudown 保持与屏幕底部对齐，位于软键盘下方，仅向上推动*内容*视图。然后，*内容*变为可滚动的，以便用户能够完整地看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:50:03.850

我也有同样的问题，使键盘的行为与 iOS 上的行为相同。我可以从所有其他帖子中得到的最好的东西是手动检测软键盘并将视图向上移动。

这似乎是最好的：[如何检查 Android 中软件键盘的可见性？](https://stackoverflow.com/questions/2150078/how-to-check-visibility-of-software-keyboard-in-android)

# ios - 防止 CALayer renderInContext 的抗锯齿

> ID：14320451
> 
> 赞同：7
> 
> 时间：2013-01-14T14:35:06.197
> 
> 标签：ios, calayer

我有一个非常简单`UIView`的包含几个黑白`UIImageView`的s。如果我通过设备上的物理按钮截取屏幕截图，生成的图像看起来与我看到的完全一样（如预期的那样） - 如果我在像素级别检查图像，它只是黑白的。

但是，如果我使用以下代码片段以编程方式执行相同的操作，则生成的图像似乎应用了抗锯齿 - 所有黑色像素都被微弱的灰色光晕包围。我的原始场景中没有灰色——它是纯黑白的，“屏幕截图”图像的尺寸与我以编程方式生成的图像相同，但我似乎无法弄清楚灰色光晕的来源。

```
UIView *printView = fullView;

UIGraphicsBeginImageContextWithOptions(printView.bounds.size, NO, 0.0);

CGContextRef ctx = UIGraphicsGetCurrentContext();
[printView.layer renderInContext:ctx];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
UIGraphicsEndImageContext(); 
```

我尝试在调用之前添加以下内容`renderInContext`以防止抗锯齿，但它没有明显的效果：

```
CGContextSetShouldAntialias(ctx, NO);
CGContextSetAllowsAntialiasing(ctx, NO);
CGContextSetInterpolationQuality(ctx, kCGInterpolationHigh); 
```

这是两个不同输出的示例 - 左侧是我的代码生成的，右侧是正常的 iOS 屏幕截图：

![在此处输入图像描述](../Images/9b99ede60bfcbde57204b62f0c6b3d47.png)

由于我试图将我的输出发送`renderInContext`到单色打印机，因此由于打印机的抖动算法，灰色像素会导致一些难看的伪影。

那么，我怎样才能`renderInContext`产生与真实设备屏幕截图相同的像素级输出 - 即，与原始场景中的一样只是黑白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:18:18.673

事实证明，问题`UIImage`与`UIImageView`. `UIImage`是`CGImage`使用数据提供者创建的。`CGImage`尺寸以与父级相同的单位指定，但是`UIImageView`我使用的是带有视网膜显示屏的 iOS 设备。

因为`CGImage`尺寸是在非视网膜尺寸中指定的，`renderInContext`所以放大了 CGImage 并且显然这种放大的行为与实际屏幕渲染所做的不同。（由于某种原因，真实的屏幕渲染在没有添加任何灰色像素的情况下进行了放大。）

为了解决这个问题，我`CGImage`用两倍的尺寸创建了我`UIImageView`，然后我的调用`renderInContext`产生了一个更好的黑白图像。一些白色区域仍然有一些灰色像素，但它比原始问题有了很大的改进。

我终于通过更改调用来解决这个问题，`UIGraphicsBeginImageContextWithOptions()`以强制它进行 1.0 的缩放，并注意到`UIImageView`黑色像素渲染不再有灰色光环。当我强制`UIGraphicsBeginImageContextWithOptions()`使用 2.0 的比例因子（这是由于视网膜显示而默认设置的）时，出现了灰色光晕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:53:46.363

我会尝试设置

```
 printView.layer.magnificationFilter 
```

和

```
 printView.layer.minificationFilter 
```

到

```
 kCAFilterNearest 
```

图像是否在`UIImageView`实例中显示？是`printView`他们的superview吗？

# c# - ViewModel 更新 - 保存前更改属性

> ID：14320457
> 
> 赞同：2
> 
> 时间：2013-01-14T14:35:16.410
> 
> 标签：c#, asp.net-mvc-3, entity-framework, razor

在尝试了一整天的模型绑定后，没有结果，我决定在这里问。

我有一个 asp.net razor 视图，用户（又名卖家）可以在其中编辑他的用户详细信息。此外，用户应该能够更改他的密码。

我做了一个视图模型：

```
public class EditSellerViewModel
{
    public Seller Seller { get; set; }
    public ChangePasswordModel ChangePasswordModel { get; set; }
} 
```

我的视图有两种形式，导致两个“提交”按钮。在我的操作中，我检查单击了哪个按钮。如果已提交“密码”表单，我想在卖方实体（实际有效）和 SaveChanges() 中设置新密码，这不会更改数据库中的任何内容（并且不会引发任何异常）。它根本什么都不做。

此外，如果提交了“卖家详细信息”表格，我想保存卖家数据。但 TryUpdateModel 始终为假，即使我使用启用 ViewModel 前缀的第二个参数。

```
 [HttpPost]
    public ActionResult EditUser(string btnSubmit, FormCollection formValues, EditSellerViewModel editSellerViewModel)
    {
        int uid = baseFunc.GetIdForUsername(User.Identity.Name);
        var seller = bmDBCont.SellerSet.Single(s => s.Id == uid);

        if (btnSubmit == "saveSellerPassword")
        {
            seller.Password = editSellerViewModel.ChangePasswordModel.NewPassword;
            bmDBCont.ObjectStateManager.ChangeObjectState(seller, System.Data.EntityState.Modified);
            bmDBCont.SaveChanges(); //<-- does nothing
        }

        if (TryUpdateModel(seller, "Seller")) //<-- never true
        {
            bmDBCont.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.Titles = CommonListsProvider.GetTitles();
        ViewBag.Countries = CommonListsProvider.GetCountries();

        return View(editSellerViewModel);
    } 
```

这里有一些调试信息截图：

*   [formcollection 已提交卖家表单](http://i.stack.imgur.com/oKINW.jpg)
*   [提交密码表单的表单集合](http://i.stack.imgur.com/W59AR.jpg)

请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:35:45.253

请参阅有关 TryUpdateModel 的文档，它说“使用来自控制器的当前值提供程序和前缀的值更新指定的模型实例。”

在值提供者中查找值时使用的前缀。

尝试使用不带“prefix”参数的 TryUpdateModel(seller) 简单方法。

```
if(TryUpdateModel(seller)) 
```

[http://msdn.microsoft.com/en-us/library/dd493137(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/dd493137(v=vs.108).aspx)

# tomcat7 - Tomcat 7，无法禁用 Web 应用程序自动部署

> ID：14320458
> 
> 赞同：1
> 
> 时间：2013-01-14T14:35:20.793
> 
> 标签：tomcat7, web-deployment

部署 Web 应用程序后，我的 Tomcat 7 服务器不再启动，在启动过程中发出异常信号。

所以我尝试配置Tomcat以避免在启动时部署webapps。
为此，我修改了我的并向节点`${CATALINA_BASE}/conf/server.xml`添加了一个`autoDeploy="false"`属性。`Host`（我还验证了没有`liveDeploy`属性）：

```
<Host appBase="webapps" autoDeploy="false" name="localhost" unpackWARs="true">
... 
```

然后我阅读了具有稍微不同行为的 liveDeploy 属性，并确保我也禁用了它：

```
<Host appBase="webapps" autoDeploy="false" liveDeploy = "false" name="localhost" unpackWARs="true">
... 
```

问题是它似乎什么也没做，在输出中我仍然看到“部署配置描述符”行，直到导致 Tomcat 崩溃的那一行。

这是服务器输出；我已经包含了启动、正确部署的第一个应用程序 (MyFirstApplication) 以及使服务器崩溃的最后一个应用程序。

```
使用 CATALINA_BASE：“C:\Users\Jack\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.11.0_base”
使用 CATALINA_HOME：“C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.11”
使用 CATALINA_TMPDIR：“C:\Users\Jack\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.11.0_base\temp”
使用 JRE_HOME：“C:\Program Files (x86)\Java\jdk1.7.0”
使用 CLASSPATH：“C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.11\bin\bootstrap.jar;C:\Program Files\Apache Software Foundation\Apache Tomcat 7.0.11\bin\tomcat-juli.jar”
2013 年 14 月 14 日下午 3:08:28 org.apache.catalina.core.AprLifecycleListener init
信息：在 java.library.path：C:\Program Files (x86)\Java\jdk1.7.0\bin;C:\Windows\Sun \Java\bin;C:\Windows\system32;C:\Windows;C:\Perl64\site\bin;C:\Perl64\bin;C:\Program Files (x86)\CollabNet\Subversion Client;C:\ Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem ;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\WiFi\bin\;C:\Program Files\Common Files\Intel\WirelessCommon\;C:\Program Files (x86) \Windows Live\Shared;C:\Program Files (x86)\Common Files\Roxio Shared\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\DLLShared\;C:\Program Files (x86)\Common Files\Roxio Shared\OEM\12.0\DLLShared\;C:\Program Files (x86)\Roxio \OEM\AudioCore\;C:\Program Files\Java\jdk1.6.0_23\bin;C:\Program Files (x86)\GnuWin32\bin;C:\Program Files (x86)\spring-roo-1.1.4 .RELEASE\bin;C:\Program Files\NetBeans 6.9.1\java\ant\bin;C:\Program Files (x86)\GNU\GnuPG\pub;C:\Program Files (x86)\QuickTime\QTSystem\ ;c:\Program Files\NetBeans 7.2\java\maven\bin;C:\Program Files (x86)\Nmap;C:\cmdutilities;.\Program Files (x86)\QuickTime\QTSystem\;c:\Program Files\NetBeans 7.2\java\maven\bin;C:\Program Files (x86)\Nmap;C:\cmdutilities;.\Program Files (x86)\QuickTime\QTSystem\;c:\Program Files\NetBeans 7.2\java\maven\bin;C:\Program Files (x86)\Nmap;C:\cmdutilities;.
2013 年 1 月 14 日下午 3:08:28 org.apache.coyote.AbstractProtocolHandler 初始化
信息：初始化 ProtocolHandler ["http-bio-8084"]
2013 年 1 月 14 日下午 3:08:28 org.apache.coyote.AbstractProtocolHandler 初始化
信息：初始化 ProtocolHandler ["ajp-bio-8009"]
2013 年 1 月 14 日下午 3:08:28 org.apache.catalina.startup.Catalina 加载
信息：初始化处理时间为 411 毫秒
2013 年 1 月 14 日下午 3:08:28 org.apache.catalina.core.StandardService startInternal
信息：启动服务 Catalina
2013 年 1 月 14 日下午 3:08:28 org.apache.catalina.core.StandardEngine startInternal
信息：启动 Servlet 引擎：Apache Tomcat/7.0.11
2013 年 1 月 14 日下午 3:08:28 org.apache.catalina.startup.HostConfig deployDescriptor
信息：从 C:\Users\Jack\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.11.0_base\conf\Catalina\localhost 部署配置描述符 MyFirstWebApp.xml
2013 年 14 月 14 日下午 3:08:38 org.springframework.web.context.ContextLoader initWebApplicationContext
信息：Root WebApplicationContext：初始化开始
[...]
信息：从 C:\Users\Jack\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.11.0_base\conf\Catalina\localhost 部署配置描述符 manager.xml
2013 年 14 月 14 日下午 3:08:40 org.apache.catalina.startup.HostConfig deployDescriptor
信息：从 C:\Users\Jack\AppData\Roaming\NetBeans\7.2\apache-tomcat-7.0.11.0_base\conf\Catalina\localhost 部署配置描述符 MavenSpringHibernate.xml
线程“main”中的异常 线程“Thread-1”中的异常

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:59:09.570

您想要设置 deployOnStartup，而不是 autoDeploy（或两者都可能）。liveDeploy没有这样的设置。

来自 Host [1] 的 Tomcat 7 文档

> **自动部署**
> 
> 此标志值指示 Tomcat 是否应在 Tomcat 运行时定期检查新的或更新的 Web 应用程序。如果为 true，Tomcat 会定期检查 appBase 和 xmlBase 目录并部署任何新的 Web 应用程序或找到的上下文 XML 描述符。更新的 Web 应用程序或上下文 XML 描述符将触发 Web 应用程序的重新加载。该标志的值默认为 true。有关详细信息，请参阅自动应用程序部署。
> 
> **部署启动**
> 
> 此标志值指示是否应在 Tomcat 启动时自动部署来自该主机的 Web 应用程序。该标志的值默认为 true。有关详细信息，请参阅自动应用程序部署。

[1] [http://tomcat.apache.org/tomcat-7.0-doc/config/host.html](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html)

# html - Google CSE - 跳转到特定关键字

> ID：14320462
> 
> 赞同：0
> 
> 时间：2013-01-14T14:35:41.707
> 
> 标签：html, google-custom-search

我目前正在使用 google cse，我想知道是否可以跳转到特定的搜索词。例如，如果我在我的页面上搜索“出版物”一词，并且页面上有一个出版物部分，是否可以使用实施的谷歌搜索直接跳转到该部分？

在我每次搜索时，都会将我带到放置关键字的页面的开头。

问候马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:15:59.927

这是可能的，是的，但是您必须进行一些编码。如果您考虑一下 Google 搜索的工作原理，它只会生成一个链接列表。一旦你到达另一个页面，它就无法控制发生的事情。因此，您希望在目标页面上发生的任何事情都必须自己编写代码。如果你真的想这样做，你可以这样设置：

首先，您将需要使用 V1 CSE，因为它提供了在搜索完成时设置回调函数的能力，而新的简化 V2 则没有。在此处查看 V1 文档：[https ://developers.google.com/custom-search/docs/js/cselement-devguide](https://developers.google.com/custom-search/docs/js/cselement-devguide)

这是该页面中的示例代码，经过修改以添加回调函数：

```
<!--
  copyright (c) 2012 Google inc.

  You are free to copy and use this sample.
-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Google Custom Search Element API Example</title>
    <script src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load('search', '1');
        google.setOnLoadCallback(function(){
          customSearchControl = new google.search.CustomSearchControl().draw('cse');
        }, true);
          customSearchControl.setSearchCompleteCallback(this, searchCompleteFn);
    </script>
  </head>
  <body style="font-family: Arial;border: 0 none;">
    <div id="cse" style="width:100%;">Loading...</div>
  </body>
</html> 
```

然后你可以像这样创建回调函数：

```
function searchCompleteFn(control, searcher) {
    //your code
} 
```

在您的代码中，您可能希望获取 cse div 中的所有 a.gs-title 元素并修改它们的 href 属性以添加用户的查询。这样，您的目标页面就可以看到用户搜索的内容并采取适当的行动（滚动到适当的部分，突出显示关键字，无论您想要什么）。例如，如果现有的 href 是[http://www.yoursite.com/somepath/somepage.html](http://www.yoursite.com/somepath/somepage.html)，您可以将其更改为 http://www.yoursite.com/somepath/somepage.html#query=[user_query] .

[user_query] 由 control.getInputQuery() 给出

最后，在您的目标页面上，您将使用 javascript 检查 location.hash 中的查询参数，并采取适当的行动。

我猜这比你有兴趣做的工作要多得多，但也许它会对某人有所帮助。

# validation - 如何覆盖和本地化 ASP.NET MVC 4 的客户端验证消息？

> ID：14320464
> 
> 赞同：1
> 
> 时间：2013-01-14T14:35:53.310
> 
> 标签：validation, localization, asp.net-mvc-4, client-side, messages

我创建了带有本地化字符串的自定义验证器，这些字符串从我的附属资源程序集中加载。现在我想覆盖默认的 MVC 消息，例如“{0} 必须是数字”。

在这篇文章中： [http](http://martinnormark.com/asp-net-mvc-localize-numeric-data-val-number-validation) ://martinnormark.com/asp-net-mvc-localize-numeric-data-val-number-validation 作者说

> 我正在浏览 ASP.NET MVC 4 的源代码，发现一个看起来可以解决这个问题的变更集。简而言之，可以定义自己的 ResourceClassKey，MVC 框架会在使用默认错误消息之前使用它。好的！

所以我开始寻找如何使用新功能，但大多数解决方案似乎已经过时并且不起作用，或者我做错了什么。

如何使用资源 dll 文件覆盖 MVC 4 中的客户端错误消息？MVC 本身是否总是决定选择哪个资源程序集，或者我可以以某种方式强制它选择特定语言所需的资源程序集？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:35:56.300

不知何故，这篇文章 [http://www.codeproject.com/Articles/42168/Localizing-ASP-NET-MVC](http://www.codeproject.com/Articles/42168/Localizing-ASP-NET-MVC) 没有出现在我之前的搜索中。

关键是手动添加 App_GlobalResources 文件夹并将资源程序集移到那里，然后它才会拾取我们的自定义消息。

由于某种原因，在 Visual Studio 2012 中创建 MVC 4 应用程序时缺少 App_GlobalResources 文件夹，因此我们认为不再需要它。但是在挖掘 MVC 源代码时，我们发现 MVC 使用的是在 App_GlobalResources 中查找的 HttpContext.GetGlobalResourceObject。哦，微软，来吧，你为什么要这样做......我们花了三天时间寻找各种复杂的解决方案，只是因为你从最新的 MVC 版本中扔掉了那个文件夹。

# c - 打开 ssl 未知协议

> ID：14320465
> 
> 赞同：0
> 
> 时间：2013-01-14T14:35:56.893
> 
> 标签：c, ssl, get, openssl, routines

我写了一个对我有用的代码，我不记得修改它了。我今天编译它并尝试运行它，但我收到了这个错误：错误：140770FC：SSL 例程：SSL23_GET_SERVER_HELLO：未知协议

我也尝试使用 openssl 客户端连接到主机名，但我得到了错误消息：Linked closed ping timeout..

我也尝试再次安装openssl，甚至安装旧版本但它没有工作..

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:38:33.137

> 我也尝试使用 openssl 客户端连接到主机名，但我得到了错误消息：Linked closed..

听起来远程主机不可用。如果您无法使用命令行工具连接到远程主机，那么您无法使用您的代码来使其正常工作。首先验证远程主机是否正确响应。

# php - 数据库：得到空结果

> ID：14320474
> 
> 赞同：0
> 
> 时间：2013-01-14T14:36:29.200
> 
> 标签：php, mysql, json

我创建 php 文件以从数据库中获取所有任务，但是当我在浏览器中输入 url“localhost/evisiting/get_all_task.php”时，它会获取所有任务详细信息，但每行中都有空数据。但是我填充了我的数据库表。请指导我如何从数据库中获取这些值而不是空值..

它是我的 php 文件：

```
 get_all_task.php
<?php

/*
 * Following code will list all the tasks
 */

// array for JSON response
$response = array();

// include db connect class
require_once __DIR__ . '/db_connect.php';

// connecting to db
$db = new DB_CONNECT();

// get all task from my_task table
$result = mysql_query("SELECT *FROM my_task") or die(mysql_error());

// check for empty result
if (mysql_num_rows($result) > 0) {
    // looping through all results
    // task node
    $response["my_task"] = array();

    while ($row = mysql_fetch_array($result)) {
        // temp user array
            $my_task = array();
            $my_task["cid"] = $result["cid"];
            $my_task["cus_name"] = $result["cus_name"];
            $my_task["contact_number"] = $result["contact_number"];
            $my_task["ticket_no"] = $result["ticket_no"];
            $my_task["task_detail"] = $result["task_detail"];

        // push single task into final response array
        array_push($response["my_task"], $my_task);
    }
    // success
    $response["success"] = 1;

    // echoing JSON response
    echo json_encode($response);
} else {
    // no task found
    $response["success"] = 0;
    $response["message"] = "No task found";

    // echo no users JSON
    echo json_encode($response);
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:39:02.593

您在 while() 循环中使用了错误的变量。`$result`是您的查询结果句柄，而不是您获取的行：

```
 $my_task["cid"] = $result["cid"];
                          ^^^^^^^--- should be $row 
```

同样，当您可以简单地拥有以下内容时，您会吐出大量代码来获取各个字段：

```
$result = mysql_query("SELECT cid, cus_name, contact_number, .... FROM my_task") or die(mysql_error());
$response['my_task'] = array();
while($row = mysql_fetch_assoc($result)) {
   $response['my_task'][] = $row;
} 
```

完全相同的最终结果，但所有这些字段名称的重复要少得多 - 如果您想在此结果中添加一个新字段，您只需将其添加到 SELECT 语句中，其余代码会自动处理它。如果您需要更改 $response 数组中的字段名称，只需在查询中为其设置别名即可。

# iphone - 如何在 NSMutable 数组中的指定索引处添加对象？

> ID：14320482
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:37:12.293
> 
> 标签：iphone, objective-c, cocoa

**如何在指定索引处添加对象？** 在我的问题中

`NSMutableArray *substring` 交替包含索引和对象，我需要`str`根据从该数组获得的索引将其添加到另一个数组中。

```
NSMutableArray *str=[NSMutableArray new];

if ([substrings containsObject:@"Category-Sequence:"]) 
{

    NSString *index=[substrings objectAtIndex:5];
    //[substrings objectAtIndex:5] 
gives me integer position at which I need to add object in `str` array,
gives 5,4,8,2,7,1 etc

    NSString *object=[substrings objectAtIndex:1];

    //[substrings objectAtIndex:1] gives object,gives NSString type of object

    [str insertObject:object atIndex:(index.intValue)];

} 
```

请提出一些方法来实现它。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:38:36.007

首先分配数组，然后尝试在其中添加对象。

```
NSMutableArray *str = [[NSMutableArray alloc]init];
if ([substrings containsObject:@"Category-Sequence:"]) 
{
    NSString *index=[substrings objectAtIndex:5];
    NSString *object=[substrings objectAtIndex:1];

    [str insertObject:object atIndex:(index.intValue)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:45:51.550

`NSMutableArray`在将对象插入其中之前分配：

```
NSMutableArray *strMutableArray = [[NSMutableArray alloc] init]; 
```

（如果你不使用 ARC，你还需要在完成后释放它。）

或者，如果您不需要保留，也可以使用临时对象`strMutableArray`：

```
NSMutableArray *strMutableArray = [NSMutableArray array]; 
```

然后您可以将对象插入到`NSMutableArray`.

但是，在使用不同数组的索引时要小心。可能有更好的方法来做你想做的事。

# ruby-on-rails - 点符号中的大数/整数

> ID：14320483
> 
> 赞同：0
> 
> 时间：2013-01-14T14:37:17.350
> 
> 标签：ruby-on-rails, integer, notation

有什么方便的方法可以让例如数字 1000000 变成 1.000.000 和 10000 变成 10.000 等等？我正在处理整数，所以逗号不是必须包含的（但会很方便，比如 10.000,53）。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:43:16.697

查看`number_with_delimiter` [助手](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_delimiter)。

这是假设您使用的是 Ruby on Rails，而不仅仅是 Ruby。`number_with_delimiter`是 Ruby 中不可用的 Rails 辅助方法，除非您自己编写代码。

# php - 浏览器缓存控制和自适应图像

> ID：14320485
> 
> 赞同：0
> 
> 时间：2013-01-14T14:37:22.527
> 
> 标签：php, http-headers, browser-cache

我正在开发一个网站，其主要内容是图像，我将其作为`<img>`标签放在背景中（将它们作为由媒体查询管理的 CSS 背景属性不是一种选择）。

我已经导出了每个图像的 6 个尺寸版本，从 Javascript 中设置了一个 cookie，指示用户屏幕尺寸属性，我可以通过 PHP 提供与客户端相关的图像：对于大屏幕，宽度***= 1680px ，******宽度= 800px***用于中型屏幕等。我有一个特殊的小屏幕布局***<=560px***完全隐藏幻灯片，只打印有用的文本内容，在这种情况下 PHP 输出 1x1px 透明图像以节省带宽。

根据该架构的定义，自适应图像的 URL 是恒定的，我无法通过向 URL 添加参数来控制浏览器缓存。但我的问题是，在某些情况下，主要是方向的变化（假设移动设备的宽度为 800 CSS 像素，高度为 480 CSS 像素）从浏览器缓存中检索到“错误”的图像版本，并且不是来自服务器。

我确实想缓存图像，但是对于完全相同的 URL，比如说[http://www.mysite.com/media/image/s1/id38/images/image1-318970.jpg](http://www.mysite.com/media/image/s1/id38/images/image1-318970.jpg)，我希望能够控制- 来自 PHP 和发送的标头 - 文件的不同缓存版本（相对于磁盘上的每个实际文件版本）。我已经查看了`ETag`标题，但我不确定从那里去哪里，也不知道如何生成`ETag`值。

有人已经解决了这个问题或类似问题吗？

# android - 阻止主要活动，直到其他活动完成

> ID：14320486
> 
> 赞同：0
> 
> 时间：2013-01-14T14:37:22.537
> 
> 标签：android, user-interface, android-activity

在我的应用程序的最开始，我想从网络下载一些初始化数据（在 AsynchTask 中）。因此，我想阻止我的主要活动并开始一个新的活动以显示 ProgressDialog 以监视下载过程。不幸的是，主要活动没有在后台被阻止并试图显示 GUI……这是不可能的，因为它依赖于从网上下载的初始数据。

我怎样才能阻止主要活动，直到其他活动完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:44:41.640

我会确保您所称的主要活动（主要 gui）仅在加载所有数据时才开始。

为此，您可以创建一个简单的 gui，其中带有一个进度条，指示用户在应用程序启动之前的剩余时间。这可能成为您的启动 UI，一旦加载数据并且进度条已满，您就可以加载主 GUI。

# oracle - oracle weblogic - 创建新的 jdbc 数据源 - 连接测试失败

> ID：14320491
> 
> 赞同：0
> 
> 时间：2013-01-14T14:38:04.980
> 
> 标签：oracle, jdbc, weblogic12c

我刚刚安装了 oracle webligic 12.1.1，并按照此视频的说明进行操作： [youtube video](http://www.youtube.com/watch?v=ER5Digq4Woc)

我写的一切都和视频中的一样，当我想测试它时，我得到了这个例外：

```
Connection test failed.
IO exception: The Network Adapter could not establish the connection<br/>oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:458)
    oracle.jdbc.driver.PhysicalConnection.<init>(PhysicalConnection.java:546)
    oracle.jdbc.driver.T4CConnection.<init>(T4CConnection.java:236)
    oracle.jdbc.driver.T4CDriverExtension.getConnection(T4CDriverExtension.java:32)
    oracle.jdbc.driver.OracleDriver.connect(OracleDriver.java:521)
    weblogic.jdbc.common.internal.DataSourceUtil.testConnection(DataSourceUtil.java:298)
    com.bea.console.utils.jdbc.JDBCUtils.testConnection(JDBCUtils.java:746)
    com.bea.console.actions.jdbc.datasources.createjdbcdatasource.CreateJDBCDataSource.testConnectionConfiguration(CreateJDBCDataSource.java:474)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    org.apache.beehive.netui.pageflow.FlowController.invokeActionMethod(FlowController.java:870)
    org.apache.beehive.netui.pageflow.FlowController.getActionMethodForward(FlowController.java:809)
    org.apache.beehive.netui.pageflow.FlowController.internalExecute(FlowController.java:478)
    org.apache.beehive.netui.pageflow.PageFlowController.internalExecute(PageFlowController.java:306)
    org.apache.beehive.netui.pageflow.FlowController.execute(FlowController.java:336)
    org.apache.beehive.netui.pageflow.internal.FlowControllerAction.execute(FlowControllerAction.java:52)
    org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    org.apache.beehive.netui.pageflow.PageFlowRequestProcessor.access$201(PageFlowRequestProcessor.java:97)
... 
```

> ...

可能是什么错误，我该如何解决？请帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:33:15.147

1.  首先，您必须使用 MySQL 或 Oracle 数据库 ( SQLplus ) 创建一个数据库，但您已经完成了。
2.  然后您必须进入您的 IDE（Eclipse 或 NetBeans）并选择选项以查看数据库和服务器等服务。
3.  在数据库中右键单击（在 Netbeans 中），您可以看到**“新数据库连接”**选项，输入您已经创建的数据库的凭据，如果您使用的是 NebBeans，这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T15:11:55.047

错误：网络适配器无法建立连接

上述问题的主要原因是数据库已关闭或无法 ping 或无法访问...检查您的数据库服务...确保它运行正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T14:21:49.433

weblogic 为我们提供了许多可供选择的数据库选项。在尝试连接之前，您必须确保您的数据库已启动并运行。只需尝试创建一个小型数据库表并通过“SELECT”选项查询它，然后检查您的数据库是否完美运行。连接正确地提供您的数据库详细信息，例如数据库的名称和类型。DERBY 数据库是 weblogic 中提供的内置数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-14T07:35:10.780

就我而言，错误出现在 Weblogic 12.2.1.3.0 中。我正在使用在 WL 12.1.3 中完美运行的 tnsnames 创建一个新的数据源连接。修复是在 tnsnames 中定义的连接中添加更多 TRANSPORT_CONNECT_TIMEOUT（从 3 到 10），因为显然这不足以建立连接。之后，错误是：

> Blockquote 由于 java.lang.IllegalArgumentException 无法建立连接：ONS 配置失败

我通过将其放入 setDomainEnv 解决了这个问题：

```
-Doracle.jdbc.fanEnabled=false 
```

# java - Tomcat - 请求的资源 () 不可用。什么会导致 .war 文件不显示/加载？

> ID：14320494
> 
> 赞同：2
> 
> 时间：2013-01-14T14:38:15.630
> 
> 标签：java, tomcat, vaadin

我已将 .war 文件上传到 /webapps。

我可以在路径中看到它，但是如果我到达 //localhost:8080/vdma-vaadin-0.1-SNAPSHOT.war 它不会拉起...

有什么要寻找的提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:40:43.420

您不想直接访问 WAR。WAR 只是 Web 应用程序存档。要访问 Web 应用程序，请尝试以下操作：

```
http://localhost:8080/vdma-vaadin-0.1-SNAPSHOT 
```

这是假设没有错误阻止您的应用程序启动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:39:42.747

你应该去

```
http://localhost:8080/vdma-vaadin-0.1-SNAPSHOT 
```

代替

```
http://localhost:8080/vdma-vaadin-0.1-SNAPSHOT.war 
```

而已。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T13:28:50.480

你应该去 localhost:8080/folder_name_in_webapps_folder

您的代码也可能存在一些问题，您可以检查 tomcat/logs。

# r - 在 Matlab/R 中的许多列上进行测试

> ID：14320501
> 
> 赞同：0
> 
> 时间：2013-01-14T14:38:39.313
> 
> 标签：r, matlab, sas

有谁知道如何在 Matlab/R/SAS 或 Python/Java 中以所有组合或循环中选定的各个列在许多列（我有 1139 个变量）上运行配对测试的示例。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:00:18.273

### MATLAB解决方案：

如果我理解正确，您只是在寻找一种[`ttest`](http://www.mathworks.com/help/stats/ttest.html)每次都从输入矩阵中输入两个不同列的方法。您可以使用以下方法获得所有可能的列对组合[`nchoosek`](http://www.mathworks.com/help/matlab/ref/nchoosek.html)：

```
pairs = nchoosek(1:size(X, 2), 2); 
```

现在您可以迭代这些索引，每次调用[`ttest`](http://www.mathworks.com/help/stats/ttest.html)不同的对：

```
for idx = transpose(pairs)
    h = ttest(X(:, idx(1)), X(:, idx(2)));

    %// Do something with the result...
end 
```

# c# - 为什么这段代码不能在 .NET 4.0 的 VS2010 中编译？

> ID：14320510
> 
> 赞同：9
> 
> 时间：2013-01-14T14:39:38.390
> 
> 标签：c#, .net, visual-studio-2010, linq, visual-studio-2012

不知何故，以下代码不会在 VS2010 中编译，而是在 VS2012 中编译而无需更改。VS2010 中的问题线是

```
names.Select(foo.GetName) 
```

> 错误 CS1928：“string[]”不包含“Select”的定义和最佳扩展方法重载“System.Linq.Enumerable.Select<TSource,TResult>(System.Collections.Generic.IEnumerable<TSource>, System. Func<TSource,TResult>)' 有一些无效参数。

```
using System;
using System.Linq;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            var foo = new Foo();
            var names = new[] {"Hello"};
            Console.WriteLine(string.Join(", ", names.Select(foo.GetName)));
        }
    }

    public class Foo
    {
    }

    static class Extensions
    {
        public static string GetName(this Foo foo, string name)
        {
            return name;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:41:46.920

**更新的答案**

我检查了代码片段`names.Select(foo.GetName)`在 VS 2012 中编译，并且在 VS2010 上没有编译。

我不知道使之成为可能的原因（确切地说是 C# 5.0 或 .NET 4.5 或新 API 中的新功能）。

但是跟随错误

```
The type arguments for method 'System.Linq.Enumerable.Select<TSource,TResult>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,TResult>)' cannot be inferred from the usage. Try specifying the type arguments explicitly. 
```

似乎`Enumerable.Select`无法推断`foo.GetName`.

指定类型，代码将编译。

以下是3个选项

1\. 投射到`Func<string,string>`

```
string.Join(", ", names.Select<string,string>(foo.GetName).ToArray()) 
```

2\. `Select`在子句 中将类型指定为泛型参数

```
string.Join(", ", names.Select((Func<string,string>)foo.GetName).ToArray()) 
```

3\. 在匿名委托中显式调用函数。

```
 Console.WriteLine(string.Join(", ", names.Select( name => foo.GetName(name)))) 
```

但是正如 Jon Skeet 在评论中指出的那样，上面将通过创建一个新方法来添加另一个函数调用。

**原始答案**

> 为什么这段代码不能在 .NET 4.0 的 VS2010 中编译？

您没有将 Parameter 传递给名称。您正在传递方法名称，而不是`Func<T1,T2>`.

* * *

以下将被编译

```
Console.WriteLine(string.Join(", ", names.Select( name => foo.GetName(name)))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T23:07:21.953

我在 VSS 2010 中遇到了同样的问题。我通过将目标框架更改为 3.5 来解决它。然后尝试构建。正如预期的那样，您的构建将失败，但此启动或重置 VSS 2010 中的一些内部标志。现在，切换回 .NET 4.0，VSS 将开始正确构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T00:46:45.783

看起来这是 c# 4 编译器中的一个错误，已在 c# 5 编译器中修复。

```
Console.WriteLine(string.Join(", ", names.Select(foo.GetName))); 
```

是语法糖

```
Console.WriteLine(string.Join(", ", names.Select(new Func<string, string>(foo.GetName)))); 
```

即使 foo.GetName 是一种扩展方法。后者在 VS2010 中工作，前者不工作。

C# 语言规范的第 6.6 节在讨论方法的隐式转换时描述了转换如何发生的过程，然后说：

> 请注意，如果第 7.6.5.1 节的算法未能找到实例方法但成功地将 E(A) 的调用处理为扩展方法调用（第 7.6 节），此过程可能导致创建扩展方法的委托.5.2)。因此创建的委托捕获扩展方法及其第一个参数。

基于此，我完全希望这条线在 VS2010 和 VS2012 中都可以工作（因为规范中的措辞没有改变），但事实并非如此。所以我推断这是一个错误。

这是在 VS 2012 中编译时 IL 的样子（评论是我的）：

```
// pushes comma
L_0017: ldstr ", "

// pushes names variable 
L_001c: ldloc.1 

// pushes foo variable
L_001d: ldloc.0 

// pushes pointer to the extension method
L_001e: ldftn string ConsoleApplication3.Extensions::GetName(class ConsoleApplication3.Foo, string)

// pops the instance of foo and the extension method pointer and pushes delegate
L_0024: newobj instance void [mscorlib]System.Func`2<string, string>::.ctor(object, native int)

// pops the delegate and the names variable 
// calls Linq.Enumerable.Select extension method
// pops the result (IEnumerable<string>)
L_0029: call class [mscorlib]System.Collections.Generic.IEnumerable`1<!!1> [System.Core]System.Linq.Enumerable::Select<string, string>(class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0>, class [mscorlib]System.Func`2<!!0, !!1>)

// pops comma, the IEnumerable<string>
// pushes joined string
L_002e: call string [mscorlib]System.String::Join(string, class [mscorlib]System.Collections.Generic.IEnumerable`1<string>)

// pops joined string and displays it
L_0033: call void [mscorlib]System.Console::WriteLine(string)

// method finishes
L_0038: ret 
```

如您所见，委托是由对象实例（foo）和方法指针创建的，这也正是 VS2010 中应该发生的。如果您明确指定委托创建，它`new Func<string, string>(foo.GetName)`会这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T14:53:46.887

```
using System;
using System.Linq;

namespace ConsoleApplication1
{
    public static class Program
    {
        public static void Main()
        {
            Foo foo = new Foo();
            String[] names = new String[] { "Hello" };

            Console.WriteLine(String.Join(", ", names.Select(name => foo.GetName(name))));
        }
    }

    public class Foo { }

    public static class Extensions
    {
        public static String GetName(this Foo foo, String name)
        {
            return name;
        }
    }
} 
```

# php - PHP 会话的安全性

> ID：14320515
> 
> 赞同：9
> 
> 时间：2013-01-14T14:39:57.117
> 
> 标签：php, security, session, suhosin

我知道这已经被问了数十亿次，但我对我的编码的安全性非常偏执/强迫症。我正在做一个小项目。会话数据将仅包含：

> **user_id** 1
> **user_name** MyUsername
> **logged_in** true
> **csrf_token** 87cc51ee94178df79cccce2aebc45d53

这是我的代码。在小型 CMS 上使用是否足够安全**？**

```
session_start();

ini_set('session.cookie_httponly', 'On');
ini_set('session.cookie_secure', 'On');
ini_set('session.use_cookies', 'On');
ini_set('session.use_only_cookies', 'On');

$rand = rand(1, 10);

if ($rand != 1 || $rand != 3 || $rand != 5)
    session_regenerate_id();

$user_ip = md5($_SERVER['REMOTE_ADDR']);
$user_agent = md5($_SERVER['HTTP_USER_AGENT']);

if (isset($_SESSION['user_ip'], $_SESSION['user_agent'])) {
    $session_user_ip = $_SESSION['user_ip'];
    $session_user_agent = $_SESSION['user_agent'];

    if ($session_user_ip != $user_ip || $session_user_agent != $user_agent) {
        unset($_SESSION);
        session_destroy();

        die('Error');
    }
} else {
    $_SESSION['user_ip'] = $user_ip;
    $_SESSION['user_agent'] = $user_agent;
} 
```

然后调用会话：

```
$_SESSION['user_id'] = 1;
$_SESSION['user_name'] = 'MyUsername'; // etc. 
```

*额外信息*
我将使用会话数据来检查用户是否有权做某事。例子：`if ( user_has_perm( $_SESSION['user_id'] ) )`

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T14:59:30.673

会话安全风险来自三种不同的可能性：

*   预言
*   捕获
*   固定

预测意味着不是为其创建会话的用户的某个人猜测了他们的会话 ID。发生这种情况的可能性几乎为 0，尽管随着更多用户同时使用该网站，这种可能性确实会增加。

使用您的代码，您将降低风险，因为只有在攻击者共享用户代理和预测会话的 ip 时它才会起作用。但在这种情况下，差异是微不足道的。

固定意味着攻击者可以创建一个会话，然后强制另一个用户使用他们的会话。在这种情况下，这取决于：如果攻击者知道您正在这样做并且他们伪造了用户代理和客户端的 IP，他们可以固定会话。或者，如果他们共享 IP 和用户代理。

最后是会话劫持，这可能是三者中最常见的方法。在这种情况下，攻击者会以某种方式获得对有效登录用户的会话 ID 的访问权，然后使用它登录到他们的帐户。与之前的方法一样，只有当他们知道您正在检查 ip 和用户代理并伪造与用户相同的时，这才对他们有效。您使用的技术不是唯一的，一些攻击者可能会伪造它们以防万一。

* * *

话虽如此，它安全吗？**是**与否

如果你痴迷于安全，答案总是一样的：**使用 SSL**

除非您的代码是开源的，否则您所做的几乎任何改变 php 会话行为的操作都足够安全。

唯一的例外是会吸引黑客注意力的非常受欢迎的网站。

有一些关于这个主题的非常好的文档可用：

*   [http://phpsec.org/projects/guide/4.html](http://phpsec.org/projects/guide/4.html)
*   [PHP 会话安全](https://stackoverflow.com/questions/328/php-session-security)
*   [http://www.squarefree.com/securitytips/web-developers.html#CSRF](http://www.squarefree.com/securitytips/web-developers.html#CSRF)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T14:57:52.857

我不是安全专家。但是，我怀疑您的安全执法是否会带来*实质性的*好处。

如果有人可以窃取您用户的会话 ID，例如通过窃听未加密的无线网络，我敢打赌他也可以窃取您的用户在验证时发送到您的服务器的用户名和密码。一旦他获得了访问凭证，攻击者就可以在第二天或一周后登录，并可以使用他的“安全” - 并且 100% 有效 - 会话。

我相信没有通道安全就没有会话安全。如果您**使用 SSL**，请确保会话 ID 仅通过 cookie 发送（您已经在这样做）并且您的会话很快就会过期，我相信您是相当安全的，并且比在不安全的通道上执行这些强制更安全。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T15:09:47.557

首先，您在会话重新生成代码中有一个错误。以下 if 将始终评估为 true：

```
if ($rand != 1 || $rand != 3 || $rand != 5) 
```

如果`$rand`不是1 *，*则返回 true。如果`$rand` *是*1，那么它不是 3，它返回 true。您可能打算在`and`这里使用。

其次，您不需要 MD5`user_ip`或`user_agent`字符串。如果有人可以直接访问您服务器上的会话数据，那么您已经深陷其中，散列该数据不会拯救您。

**澄清：**正如 SDC 和美眉在评论中指出的那样，*如果您使用 salt*对密码进行哈希处理，MD5 非常适合对密码进行哈希处理。这意味着您的用户密码通常仍然是安全的，即使 SQL 注入攻击成功并且您的数据库向外界公开。*但是，*如果您的服务器遭到入侵，并且 salt 遭到入侵，则可以生成一组已知的哈希值，并尝试反向查找特定密码。底线？用盐对您的用户密码进行哈希处理。

第三，大多数安全漏洞并非来自欺骗会话。它们来自糟糕的输入检查。像[Essential PHP Security](http://amzn.com/059600656X)这样的书应该很好地介绍了您应该在 PHP 项目中进行的那种输入检查。如果做不到这一点，至少阅读[PHP 手册的安全部分](http://php.net/manual/en/security.php)。注意 SQL 注入位。这个很酷！

最后，我完全同意另一位发帖人的观点，即您应该使用 SSL 来保护与您网站的通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:17:06.350

老实说，我认为您过于谨慎，但不是很有用。

如果您真的担心会话安全性，请不要尝试自己做。使用像[Suhosin](http://www.hardened-php.net/suhosin/a_feature_list.html#session_protection)这样的 PHP 安全补丁。让它为您完成所有艰苦的工作。Suhosin 是一个成熟的 PHP 补丁。它包括处理 PHP 会话可以被黑客入侵的所有方式的东西。如果你已经安装了它，那么你不需要做任何额外的事情来保护你的会话。如果您没有安装它，那么您绝对不能声称对安全性超级偏执！

所以简而言之，安装 Suhosin（如果你还没有安装的话），然后忘记它。

但为了完整起见，我将对您的实际代码做一些评论，只是为了指出几点：

我不确定您为什么认为 MD5 散列会有所不同。MD5 哈希可以在几秒钟内破解，因此将它们用于任何类型的安全功能都是完全任意的。它也可以是纯文本。就是说，无论如何，我真的不认为它们需要成为纯文本以外的任何东西——如果黑客设法获取会话数据以能够读取其中包含的 IP 地址，那么你就是已经不用担心他们是否知道 IP 地址。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-01T14:27:43.103

它们只是两个主要的会话攻击

**1.) 会话固定攻击。**

这可以通过使用来防止 `session_regenerate_id()`

**2.) 会话劫持：**

这可以通过使用 SSL 证书的数据加密来防止。您的网站现在将在**https**而不是**http**上运行。

3.) 如果您在未实施 CloudFare 或 JailRoot 的共享服务器上。您可以显示将会话存储在数据库中，而不是默认文件系统存储。

通过这三个实现，让我看看那个声称​​要破解用户会话的黑客......

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-05T05:56:50.427

while($row_post=mysql_fetch_array($res_post)) { $post_id = $row_post ['post_info_id']; $post_desc = $row_post ['post_info_desc']; $id = $row_post ['id']; $FirstName = $row_post ['FirstName']; $page.="

### $名

$post_desc

* * *

"; } $page.=" "; include('include/main_file.php'); ?>

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-02-05T05:50:51.243

```
<?php

session_start();
$con=mysql_connect("localhost","root","");
$seldb=mysql_select_db('myfreind', $con);
$email=$_POST['txtEmail'];
$password=$_POST['txtPass'];
$res=mysql_query("SELECT `id`, `FirstName`, `LastName`, `Address`, `Password`, `Repassword`, `Birthday`, `Gender` FROM `registration` WHERE 
`Password`='$password' and  `FirstName`='$email'");
$num=mysql_num_rows($res);

if($num==1)
{
$row=mysql_fetch_array($res);
$id=$row['id'];
$firstname=$row['FirstName'];
$_SESSION['id']=$id;
$_SESSION['FirstName']=$firstname;
//echo $_SESSION['id'];
header('Location:main.php');
}else

{

header('Location:index.php?error');
}

?> 
```

# php - 在 txt 文件中搜索字符串

> ID：14320519
> 
> 赞同：0
> 
> 时间：2013-01-14T14:40:24.193
> 
> 标签：php, arrays

对于一个项目，我创建了一个 bash 脚本，该脚本将 VNC 端口与相应的 VM 写入文本文件中。我正在尝试使用相应的 VM 输出正确的 VNC 端口。bash 脚本的输出类似于：

```
 Port: 5903    VM : i-2-3-VM
 Port: 5904    VM : i-4-6-VM
 Port: 5902    VM : r-4-VM
 Port: 5901    VM : s-1-VM
 Port: 5900    VM : v-2-VM 
```

每行中的数字对应于 VNC 端口。

不，我在可以使用的变量中获得了 VM 名称，尽管我使用了一个静态值来查看我的脚本是否真的有效。该脚本首先输出条目 $data 变量作为检查。该脚本应该输出“r-4-VM”，我想我可以获取以前的数组以稍后获取实际端口。但是脚本并没有输出我首先要寻找的值。我知道该值存在，因为我之前打印了 $data 作为参考。

```
<?php
session_start();

$file = file_get_contents('/var/www/html/webpanel/text.txt');

$data = explode(' ', $file);
$array = array($data);

$count = count($array);

print_r($data);

for ($i=0; $i <= $count; $i++) { 

        if (strstr($data[$i] , 'r-4-VM')) {

            print_r($data[$i]);
    }

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:52:44.003

```
<?php
session_start();

$array = file($file);

$count = count($array);

print_r($array);

for ($i=0; $i <= $count; $i++) { 

    if (strstr($array[$i] , 'r-4-VM')) {

        print_r($array[$i]);
}

}
?> 
```

试试看。

# c - 将数据从 int 复制到 2 个无符号字符

> ID：14320520
> 
> 赞同：1
> 
> 时间：2013-01-14T14:40:29.607
> 
> 标签：c, int, unsigned-char

如何将数据从 int (int port1 = 52010) 复制到一对无符号字符 ( `unsigned char port2[2]`？我不知道如何处理除法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:44:10.333

您通常使用遮罩和移位。

```
const unsigned short port = 52010;
uint8_t port2[2]; 
```

大端：

```
port2[0] = port >> 8;
port2[1] = port & 255; 
```

小端：

```
port2[0] = port & 255;
port2[1] = port >> 8; 
```

对于 IP 网络中使用的端口号之类的东西，您通常总是使用所谓的“网络字节顺序”（又名“big-endian”），并且有一个特殊的宏来执行此操作：

```
const unsigned short port_n = ntohs(port); 
```

请注意，这会将端口号保持为`unsigned short`，同时在必要时交换字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:44:22.903

```
 port2[0] = port1 >> 8;
    port2[1] = port1 & 0x00FF; 
```

或以相反的顺序取决于字节顺序

# php - CakePHP 和 AWS SES 刚刚停止工作

> ID：14320524
> 
> 赞同：1
> 
> 时间：2013-01-14T14:40:47.107
> 
> 标签：php, cakephp, amazon-web-services, cakephp-2.0, amazon-ses

我已经将 AWS SES 与 CakePHP 应用程序一起使用了几个月，一切正常，但我们遇到了服务器问题，这意味着我已经关闭了站点并恢复了服务器。一旦我把网站重新打开，我注意到电子邮件不会发送并导致 CakePHP 出错。

**错误**

```
2013-01-14 14:50:02 Error: [SocketException] SMTP Error: 535 Incorrect authentication data
#0 /public_html/lib/Cake/Network/Email/SmtpTransport.php(132): SmtpTransport->_smtpSend('QWhRZ2F0azQyTnh...', '235')
#1 /public_html/lib/Cake/Network/Email/SmtpTransport.php(61): SmtpTransport->_auth()
#2 /public_html/lib/Cake/Network/Email/CakeEmail.php(1059): SmtpTransport->send(Object(CakeEmail))
#3 /public_html/app/Controller/UsersController.php(1945): CakeEmail->send() 
```

**到目前为止我所做的**

1.  我已经检查了域和电子邮件都已验证。

2.  我重新生成了新的 SMTP 详细信息，以防它们出错。

3.  使用 NTP 确保我的服务器时间正确

4.  与此同时，我使用谷歌商业应用程序设置了 SMTP。

**我的配置（为安全起见更改了一些细节）**

```
public $smtp = array(
'transport' => 'Smtp',
'from' => array('no.reply@company.com' => 'Company'),
'host' => 'ssl://email-smtp.us-east-1.amazonaws.com',
'port' => 465,
'timeout' => 10,
'username' => 'AKIAICH5321NNDR2CMA',
'password' => 'AhQgat12Nx21c5e78S9Ufku0+4fw9LnRpuMTGZwjXT',
'client' => null,
'log' => false,
); 
```

**我的 Google Business Apps 配置（有效）**

```
public $smtp = array(
    'transport' => 'Smtp',
    'from' => array('no.reply@company.com' => 'Company'),
    'host' => 'ssl://smtp.gmail.com',
    'port' => 465,
    'timeout' => 10,
    'username' => 'all@company.com',
    'password' => 'b1t306b',
    'client' => null,
    'log' => false
); 
```

我是否会丢失服务器的某些模块，或者 AWS 是否更改了与我的服务器更改同时发生的事情？我真的很感激任何帮助或建议。谢谢杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:15:57.297

我发现了这个问题。在 WHM 下有一个选项 SMTP Restrictions，我禁用了它。 ![在此处输入图像描述](../Images/4f69d34c31e29cf43d307db64fe8cd33.png)

# android - Android：我应该使用 MimeTypeMap.getFileExtensionFromUrl() 吗？[错误]

> ID：14320527
> 
> 赞同：11
> 
> 时间：2013-01-14T14:40:53.920
> 
> 标签：android

例如，我想使用以下函数从文件 URL 中获取文件扩展名：

文件名：

```
Greatest Hits - Lenny Kravitz (Booklet 01) [2000].jpg 
```

文件网址：

```
String url = "/mnt/sdcard/mydev/Greatest Hits - Lenny Kravitz (Booklet 01) [2000].jpg"; 
```

函数调用：

```
String extension = MimeTypeMap.getFileExtensionFromUrl(url); 
```

但是我在函数调用中遇到了异常。这是错误还是功能？

它适用于不包含那么多外来字符（例如括号）的文件名。

功能有问题吗？我错过了什么吗？我应该如何区分错误和功能？我已经阅读了功能描述，它应该可以正常工作。

你个人在你的项目中使用它吗？这似乎不[可靠](http://code.google.com/p/android/issues/detail?id=5510)。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-14T15:32:46.940

当我测试您的代码时，不会为我抛出异常。虽然没有返回正确的文件扩展名“jpg”。我不建议使用`MimeTypeMap`. 获取文件扩展名的简单方法如下：

```
String file = "/mnt/sdcard/mydev/Greatest Hits - Lenny Kravitz (Booklet 01) [2000].jpg";
String exten = "";

int i = file.lastIndexOf('.');
if (i > 0) {
    exten = file.substring(i+1);
} 
```

至于为什么会`MimeTypeMap.getFileExtensionFromUrl(url)`失败？它需要一个格式正确的 URL 字符串，而你的不是。您应该首先使用`URLEncoder`. 例如：

```
String url = "/mnt/sdcard/mydev/Greatest Hits - Lenny Kravitz (Booklet 01) [2000].jpg";
url = URLEncoder.encode(url, "UTF-8"); 
```

这*应该*允许`MimeTypeMap.getFileExtensionFromUrl(url)`正常工作，但不幸的是它仍然没有。为什么？`URLEncoder`会将所有空格更改为“+”号，并`getFileExtensionFromUrl`认为这是一个无效字符。这部分，恕我直言，是一个错误。

根据我的经验，大多数人不使用这种方法。实际上，在您发布此问题之前，我从未听说过。可能是因为查找文件扩展名相当简单，而且大多数人编写的代码类似于我上面发布的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-29T06:19:44.233

```
private String getMimeTypeFromPath(String path) { 
    String extension = path; 
    int lastDot = extension.lastIndexOf('.'); 
    if (lastDot != -1) { 
        extension = extension.substring(lastDot + 1); 
    } 
    // Convert the URI string to lower case to ensure compatibility with MimeTypeMap (see CB-2185). 
    extension = extension.toLowerCase(Locale.getDefault()); 
    if (extension.equals("3ga")) { 
        return "audio/3gpp"; 
    } else if (extension.equals("js")) { 
        // Missing from the map :(. 
        return "text/javascript"; 
    } 
    return MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-30T08:21:34.523

我在我的项目中使用它，除非文件名中有某些字符，否则它可以工作，

我决定不走自己分裂字符串的路线。

我解决了这个问题：

```
String ext = MimeTypeMap.getFileExtensionFromUrl(sanitizeFileName(Uri.encode(name))); 
```

我用这种方法来清理文件名：

```
public static String sanitizeFileName(String name)
{
    byte[] invalidChars = new byte[]{34, 60, 62, 124, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 58, 42, 63, 92, 47};
    for(byte i : invalidChars)
    {
        name = name.replace((char)i,'_');
    }
    return name;
} 
```

sanitize 方法对其他事情也很有用。

# eclipse - 在 Eclipse 中为非源文件使用包名而不是嵌套文件夹

> ID：14320529
> 
> 赞同：1
> 
> 时间：2013-01-14T14:40:57.440
> 
> 标签：eclipse, packages

在 Eclipse 的 Java 项目中，源文件夹可以用包名表示：

*   com.example.foo.bar

非源文件夹显示为文件夹层次结构：

*   com
    *   例子
        *   富
            *   酒吧

是否可以对非源文件夹使用“包”名称表示而不将它们添加到类路径中？

# javascript - 使用jQuery时我可以调用实例函数吗

> ID：14320532
> 
> 赞同：0
> 
> 时间：2013-01-14T14:41:05.380
> 
> 标签：javascript, jquery

我有 2 种方法，一种是内部方法，另一种是实例方法，当我调用内部函数 ( `onkeydown="javascript:return checkChatBoxInputKey();"`) 时效果很好，
但是当我尝试激活`onclick`事件 ( `onclick="this.CloseChatBox();`) 时出现以下错误：

> 0x800a01b6 - Microsoft JScript 运行时错误：对象不支持属性或方法“CloseChatBox”

这是我的代码：

```
function ChatBox(){
    // Methods
    this.CloseChatBox = ChatBox.CloseChatBox;

    // Adding new chat box to page
    $(" <div />").attr("id", "chatbox")
    .html('<div class="chatboxhead">' +                                                    
          '<a href="javascript:void(0)" title="Close chat box" onclick="this.CloseChatBox();">X</a>' + // This line fails to work
                    '</div>' +
                    '<div class="chatboxbody">' +
                            '<textarea onkeydown="javascript:return checkChatBoxInputKey();"></textarea>' +
                    '</div>')
    .appendTo($("body"));

    $("#chatbox_" + this.CallId).show();

    return true;}

function checkChatBoxInputKey(){
    alert("checkChatBoxInputKey");}

ChatBox.CloseChatBox = function (){
    alert("CloseChatBox");} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:46:10.237

在`onclick`,`this`中是`<a>`标签本身*而不是*`ChatBox`函数中的任何内容。

因此，您收到错误是因为`<a>`标签没有`CloseChatBox`方法。

我*强烈*建议*不要*使用属性进行事件绑定。使用实际的事件处理程序。向`<a>`标签添加一个类，然后使用 jQuery 将一个事件绑定到它。

HTML：

```
<a href="javascript:void(0)" title="Close chat box" class="closeChatBox">X</a> 
```

JavaScript（放置在`ChatBox`函数之外，在 a 内`$(document).ready`）：

```
$('a.closeChatBox').click(function(){
    ChatBox.CloseChatBox();
}); 
```

# ios5 - iOS：仪器的计时器配置文件符号名称

> ID：14320534
> 
> 赞同：1
> 
> 时间：2013-01-14T14:41:08.147
> 
> 标签：ios5, profiling, instruments, symbols

有人可以告诉我在字符串中获取符号名称而不是附加图像中的十六进制代码的设置是什么。

![在此处输入图像描述](../Images/b9fd8b4758f989d85e9ac7c81fa4e17f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:49:56.953

这解决了。我必须设置`Scheme`为`Profile`来`Debug`查看符号名称。以前是这样设置的`Release`！

# javascript - 如何制作相互依赖的html结构？

> ID：14320535
> 
> 赞同：0
> 
> 时间：2013-01-14T14:41:09.347
> 
> 标签：javascript, jquery, html

希望使用 jquery 移动（滑动）侧边栏时导航菜单向上移动和内容向左移动？我正在为我的网页制作一个结构并使用 jquery 来滑动导航和侧边栏，但内容和页脚仍然在原处，并且删除的部分是空的，那么如何使其相互依赖？

```
<html>
<head>
<script  src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>

<script>
$(document).ready(function(){
 $("#slidesidebar").click(function(){
    $("#sidebar").slideToggle("slow");
    }); 
}); 
</script>

<style type="text/css">
nav {
    position: fixed;
    left:15%;
    top: 0;
    width: 100%;
    height: 6%;
    background: #555;
  }

  #content {
    position: relative; 
    top:auto;
    width:85%;
    top:6%;
    margin: 0 0 auto auto;
    background:black;
  }

  #main {
  }

  #sidebar{
    position: fixed;
    left:0;
    width:15%;
    color: white;
    background:green;
  }

  footer {
    width: 100%; 
    position: fixed;
    opacity:0.8;
    bottom: 0;
    height:5%;
    left:0;
    background:red;
  } 
 </style>
</head>

<body>

<div id="sidebar">
Sidebar Content
Sidebar Content
</div>

<nav>
Navigation Menu
</nav>

    <div id="content">
        <div id="main" align="center">
Content
</div>

        <footer>
<button style="font-size: .8em;" id="slidesidebar">Flip Side-Search</button>
       Footer
        </footer>

</div>    
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:59:50.287

您可以将函数传递给 slideToggle 以在动画完成时调用。在那里，您可以随心所欲地操纵内容。

```
$("#sidebar").slideToggle("slow", function(){
 $("#content").css({width:"100%", float:"left"});
 }); 
```

或者您可以让内容同时增长：

```
$(document).ready(function(){
 $("#slidesidebar").click(function(){
   $("#sidebar").slideToggle("slow");
    $("#content").animate({width:"100%"});
   }); 
}); 
```

如果这不起作用，请尝试使用内容的“float”参数。

# iis-7 - 如何在 IIS7 中允许访问内部网站

> ID：14320537
> 
> 赞同：0
> 
> 时间：2013-01-14T14:41:15.260
> 
> 标签：iis-7

我在 Windows 2008 Server R2 机器上使用 Webmatrix 为一个简单的内部应用程序开发了我的第一个网站。我可以在运行站点的同一台机器上使用浏览器打开该站点，但无法从网络中的任何其他机器上打开它。我也无法打开默认的 IIS7 网站。

错误是**401 - Unauthorized: Access is denied due to invalid credentials**。

这是我到目前为止所做的，结果没有任何变化：

*   将我网站的端口改为80，默认为8080
*   它列出了所有站点（到目前为止只是默认站点和我的站点），右键单击我的站点，选择`Edit Permissions`，选择`Security`选项卡，并验证是否`Everyone`具有`Allow`所有权限
*   它列出了所有站点（到目前为止只是默认站点和我的站点），右键单击我的站点，选择`Edit Permissions`，选择选项卡，`Security`然后添加`Domain Users`,和权限。`Read & execute``List folder contents``Read`

BTW，这位老兄好像也有同样的问题，没有答案：[如何让其他电脑的用户连接到我的IIS7网站？](https://stackoverflow.com/questions/9589759/how-to-allow-users-from-other-computers-to-connect-to-my-iis7-website)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T18:49:27.580

[我在启用对 WebMatrix 的非本地主机访问中](http://blog.alirobertson.com/post/11139712138/enabling-non-localhost-access-to-webmatrix)找到了答案

# android - 在子活动完成时防止屏幕锁定

> ID：14320543
> 
> 赞同：0
> 
> 时间：2013-01-14T14:41:26.283
> 
> 标签：android

我有一项活动 (a) 启动了另一项活动 (b)。当“b”活动完成一个定时事件时，它会关闭。一切都很好 - 问题是两者都设置为始终保持屏幕开启，但是当“b”关闭并且屏幕锁定时间已经过去时，屏幕锁定，即“a”永远不会重新声明其“屏幕开启”命令的机会。我也尝试在清单中设置 android:keepScreenOn="true" 但也不起作用......

也许在调试和屏幕“b”（“子”活动）中相关，如果我从调试器中终止应用程序，只有屏幕“b”关闭......它不应该杀死整个应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:33:13.390

想通了...... WakeLock 在屏幕“a”关闭时取消注册 - 如果整个应用程序当然正在卸载，它需要这样做。所以我在屏幕“a”中放置了一个布尔标志，然后在 onclick 中打开子“b”将标志设置为 true。然后在 onActivityResult 中将标志设置回 false。最后，如果标志设置为 false，“a”中的任何关闭都只会取消注册唤醒锁......

# excel - Vlookup 变量引用问题

> ID：14320553
> 
> 赞同：1
> 
> 时间：2013-01-14T14:42:02.750
> 
> 标签：excel, excel-2007, excel-formula, vba

我在 vlookup 公式中遇到了变量工作表的问题。我相信这与我引用工作表的方式有关。我查看了许多其他关于此的博客并使用了不同的技术，但我仍然收到“运行时错误 1004”。以下是相关代码的摘要 - 任何帮助将不胜感激。

```
Sub PopulateDynamicReport()

    Dim getcolumnPDR As Range
    Dim getConfigPosition As Range
    Dim getFieldDescriptionPDR As String
    Dim getFormulaPDR As Variant
    Dim columnletter As String
    Dim myrange As String
    Dim getColumnLetter As String
    Dim counter As Long
    Dim lLastrow As Long
    Dim ws As Worksheet

    lLastrow = FindLastRow("Pricing Analysis")

    Sheets("Pricing Analysis").Cells.Clear

    counter = 1

    Set getConfigPosition = Sheets("Config").Cells.Find(What:="Field Description", After:=ActiveCell, LookIn:= _
            xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
            xlNext, MatchCase:=False, SearchFormat:=False).Offset(counter, 0)

            columnletter = getConfigPosition.Offset(0, -1)
            Set ws = Sheets(getConfigPosition.Offset(0, 2).Value)

            Sheets("Pricing Analysis").Cells(1, columnletter).FormulaR1C1 = "=VLOOKUP(RC[-4],ws.range(!C[-4]:C[-2]),3,FALSE)"

            counter = counter + 1

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:56:03.923

试试这个：

```
"=VLOOKUP(RC[-4]," & ws.Name & "!RC[-4]:RC[-2],3,FALSE)" 
```

您不能将 vba 对象混合到您在工作表上编写的公式中，但您可以使用 vba 对象来帮助构建编写公式所需的字符串，就像我在上面所做的那样。

# php - 在 PHP SDK 和 Graph API Explorer 之间获得不同的结果

> ID：14320554
> 
> 赞同：1
> 
> 时间：2013-01-14T14:42:02.360
> 
> 标签：php, facebook, facebook-graph-api

我面临以下问题：

当我试图通过 Facebook php sdk（Graph API）从我在 Facebook 上的帖子中阅读所有评论时，我无法获得所有评论，而当我使用 Facebook Graph API 资源管理器时，它们都出现了.

My App 的权限与 Graph API explorer 的权限相同。

有任何想法吗？谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:35:27.567

您是否在您的 PHP 应用程序中以用户身份进行身份验证？在 Graph API 资源管理器中，默认情况下您有一个用户访问令牌。如果您的应用程序仅使用应用程序 ID 和密码，您将不会看到任何隐私标记低于“所有人”的帖子。

您可以通过[获取应用程序 access_token](https://developers.facebook.com/docs/howtos/login/login-as-app/)并将其粘贴到图形资源管理器的访问令牌框中来在资源管理器中对此进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:57:26.880

在 Graph API Explorer 中，尝试使用您的 App 更改 Application（默认为 Graph API Explorer）。

如果仍然无法获得所有评论，只需删除您的应用程序，然后重新创建。

# facebook - 我可以在不复制粘贴帖子的情况下复制我的 Facebook 粉丝页面吗？

> ID：14320555
> 
> 赞同：1
> 
> 时间：2013-01-14T14:42:03.940
> 
> 标签：facebook, facebook-graph-api

我有一个来自 graph.facebook.com 的 json 文件，其中包含我们从 11 月 1 日到 12 月 31 日在[https://facebook.com/greenpeace.international](https://facebook.com/greenpeace.international)上发布的所有帖子，对于一个研究项目，我需要在没有喜欢和评论——只是我们发布的帖子，以相同的顺序。

我们发布消息、照片、视频和链接。发帖子看起来很简单，但是我不知道如何处理照片（我应该下载它们然后上传吗？），当我尝试发布链接时，它们被发布为“其他人最近发布的帖子” ...”，而不是页面本身（尽管我使用了 page_token）。

对于 PHP、Javascript 或 Python 或只是简单的 curl 的建议将不胜感激。

# ruby - Rails 3.2.9\. 使用 RSpec 测试观察者（should_receive 出现问题）

> ID：14320562
> 
> 赞同：0
> 
> 时间：2013-01-14T14:42:28.680
> 
> 标签：ruby, ruby-on-rails-3, rspec

我有这样的问题。我的测试检查 Observer 是否调用，但不执行它。我的文件：

todo_observer.rb:

```
class TodoObserver < ActiveRecord::Observer     
  def after_create(todo)
   todo.add_log('creating')
  end    
 end 
```

todo.rb:

```
class Todo < ActiveRecord::Base
  attr_accessible :content, :done, :order

  validates :content, :presence => true,
            :length => {:minimum => 2}

  def add_log(event)
    Logdata.start_logging(self.content, event)
  end
end 
```

日志数据.rb

```
class Logdata < ActiveRecord::Base
  attr_accessible :modification, :event

  def self.start_logging(content, event)
    Logdata.create!(:modification => content, :event => event)
  end
end 
```

todo_observer_spec.rb:

```
require 'spec_helper'

describe TodoObserver do

  before(:each) do
    @attr = { :modification => "Example", :event => 'Event' }
    @attr_todo = { :content => "Example", :done => :false }
  end

  describe 'after_create' do
    it "should create log about creating task" do
      count_log = Logdata.all.size
      todo = Todo.new(@attr_todo)
      todo.should_receive(:add_log).with('creating')
      todo.save!
      (Logdata.all.size).should eq(count_log + 1)
    end
  end

end 
```

当我运行测试时，我得到这样的错误

> 失败/错误：(Logdata.all.size).should eq(count_log + 1)
> 
> ```
>  expected: 1
>         got: 0 
> ```

它的意思是，那个观察者调用了，但没有创建*Logdata*的实例。当我评论字符串时（检查电话）

> todo.should_receive(:add_log).with('creating')

我的测试是成功的。因此，当我评论字符串`(Logdata.all.size).should eq(count_log + 1)`并取消评论前一个字符串时它的成功。函数**should_receive**如何创建 Logdata 类的*实例*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:55:01.177

`should_receive`防止调用实际方法。

您应该创建两个单独的测试。一个检查日志是否已添加到待办事项中，另一个检查日志是否已创建。

```
describe 'after_create' do
  it "should add a log to the todo" do
    todo = Todo.new(@attr_todo)
    todo.should_receive(:add_log).with('creating')
    todo.save!
  end

  it "should create a new logdata" do
    todo = Todo.new(@attr_todo)
    expect {
      todo.save!
    }.to change {Logdata.count}.by(1)
  end
end 
```

# javascript - 如何在 HTML5 Canvas 上下文中一一执行不同的动画

> ID：14320563
> 
> 赞同：0
> 
> 时间：2013-01-14T14:42:36.200
> 
> 标签：javascript, html5-canvas, settimeout

我正在努力创建一个动画，它可以绘制像“O - O”形状的画布。动画应该首先动画绘制左边的圆圈，然后是右边的圆圈，最后是中间的连接。

我可以画一个圆圈，但我想知道如何将三个元素一个一个地画出来，而不是把三个元素画在一起。

伪代码：

```
window.onload = draw;

function draw(){
drawcircle();
}

function drawcircle(){
draw part of circle
if( finish drawing){
clearTimeout
}
else{
setTimeout(drawcircle());
} 
```

但是，如果我在 draw() 函数中首先运行另一个 drawcircle 函数。两个圆圈是同时绘制的，而不是一个一个地画。有什么方法可以一一绘制每个元素吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:01:00.470

您可能真正想要使用的是 requestAnimationFrame。然后，您可以完全忽略 setTimeout。[http://paulirish.com/2011/requestanimationframe-for-smart-animating/](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)是一篇很棒的博客文章，可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:42:26.440

你想要的是*回调*：

```
Circle(ctx, 50, 50, 25, 1000, function () {       // animate drawing a circle
  Circle(ctx, 150, 50, 25, 1000, function () {    // then animate drawing a circle
    Line(ctx, 75, 50, 125, 50, 1000, function(){  // then animate drawing a line
      alert('done');
    });
  });
}); 
```

下面是圆和线的动画绘图的简单实现：

```
function Circle(context, x, y, radius, dur, callback) {
  var start = new Date().getTime(),
      end = start + dur,
      cur = 0;

  (function draw() {
    var now = new Date().getTime(),
        next = 2 * Math.PI * (now-start)/dur;

    ctx.beginPath();
    ctx.arc(x, y, radius, cur, next);
    cur = Math.floor(next*100)/100; // helps to prevent gaps
    ctx.stroke();

    if (cur < 2 * Math.PI) requestAnimationFrame(draw);  // use a shim where applicable
    else if (typeof callback === "function") callback();
  })();
}

function Line(context, x1, y1, x2, y2, dur, callback) {
  var start = new Date().getTime(),
      end = start + dur,
      dis = Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2)),
      ang = Math.atan2(y2-y1, x2-x1),
      cur = 0;

  (function draw() {
    var now = new Date().getTime(),
        next = Math.min(dis * (now-start)/dur, dis);

    ctx.beginPath();
    ctx.moveTo(x1 + Math.cos(ang) * cur, y1 + Math.sin(ang) * cur);
    ctx.lineTo(x1 + Math.cos(ang) * next, y1 + Math.sin(ang) * next);
    cur = next;
    ctx.closePath();
    ctx.stroke();

    if (cur < dis) requestAnimationFrame(draw);  // use a shim where applicable.
    else if (typeof callback === "function") callback();
  })();
} 
```

这是一个工作（仅限 webkit）演示：http: [//jsfiddle.net/QSAyw/3/](http://jsfiddle.net/QSAyw/3/)

# c# - 允许gridview分页

> ID：14320564
> 
> 赞同：0
> 
> 时间：2013-01-14T14:42:42.923
> 
> 标签：c#, visual-studio-2008

我有以下 gridview 并希望启用分页。

```
<asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" AutoGenerateColumns="False" Height="168px" BorderStyle="Solid" 
         Width="120%" PageSize="5" AllowPaging="true" 
         >
        <RowStyle BackColor="#EFF3FB" />
        <Columns>
            <asp:BoundField DataField="ActionDate" HeaderText="Action Date" />
            <asp:BoundField DataField="CustomerFirstName" HeaderText="Name" />
            <asp:BoundField DataField="CustomerLastName" HeaderText="Last Name" />
            <asp:BoundField DataField="CustomerCompany" HeaderText="Company/Organisation" />
            <asp:BoundField DataField="CustomerPosition" HeaderText="Position" />
            <asp:BoundField DataField="CustomerCountry" HeaderText="Country" />
            <asp:BoundField DataField="CustomerProvince" HeaderText="Province" />
            <asp:BoundField DataField="CustomerContact" HeaderText="Contact" />
            <asp:BoundField DataField="CustomerEmail" HeaderText="Email Address" />
            <asp:BoundField DataField="ProductCode" HeaderText="Product code" />
        </Columns>
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <EditRowStyle BackColor="#2461BF" />
        <AlternatingRowStyle BackColor="White" />
    </asp:GridView> 
```

我收到以下错误。

```
'GridView1' fired event PageIndexChanging which wasn't handled. 
```

我如何处理这个网格视图的分页事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:53:38.710

请阅读这篇文章：

[http://www.c-sharpcorner.com/UploadFile/rohatash/gridview-paging-sample-in-Asp-Net/](http://www.c-sharpcorner.com/UploadFile/rohatash/gridview-paging-sample-in-Asp-Net/)

在本文中，您可以逐步解释如何在 ASP.NET 中实现分页

特别是请查看您是否有这种事件处理程序的代码隐藏：

```
protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e) 
```

# design-patterns - 客户端服务器应用程序设计模式和协议

> ID：14320566
> 
> 赞同：6
> 
> 时间：2013-01-14T14:42:52.060
> 
> 标签：design-patterns, client-server, network-protocols

我试图找到设计客户端/服务器应用程序的“良好实践”。

如果有人可以推荐一些好的材料来阅读？

具体来说，您如何设计应用层协议并使其健壮，同时避免陷阱？

在某些客户端/服务器实例（如游戏）中，服务器是要执行的操作的解释器，您能否设计一个协议以优雅地与这种设计模式配合？

是否有为客户端/服务器应用程序设计的设计模式。我也在想也许是修改后的生产者消费者模式？

编辑：哎呀，我意识到这个问题没有明确的答案，所以我会给深入的答案提供正确的答案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-08T08:18:05.230

检查一下，可能对您有帮助：[使用简单 TCP/IP 消息传递的多客户端服务器设计模式](http://www.ni.com/white-paper/3055/en/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:56:44.663

我从这本书中学到了很多：

企业应用架构模式

[http://www.pearsonhighered.com/eductor/product/Patterns-of-Enterprise-Application-Architecture/9780321127426.page](http://www.pearsonhighered.com/educator/product/Patterns-of-Enterprise-Application-Architecture/9780321127426.page)

客户端/服务器应用程序有很多模式，您应该选择适合您需求的模式。

如果你不想要这本书，网上也有免费资源：

[http://martinfowler.com/eaaCatalog/](http://martinfowler.com/eaaCatalog/)

我希望它有所帮助。

# html - 根据 div 的内容调整 div 的高度和宽度

> ID：14320569
> 
> 赞同：0
> 
> 时间：2013-01-14T14:43:03.890
> 
> 标签：html, css

我正在寻找一种纯 CSS 方式，让容器 div 根据其中的内容自动调整其宽度和高度，以便将上述内容集中在另一个 div 中。

我尝试将高度和宽度设置为自动，但这无济于事。

您可以提供的任何帮助将不胜感激。

提前致谢。

CSS：

```
.imageThumbnails {

    position: relative;
    margin: auto;
    height: auto;
    width: auto;
}

.imageThumbnailOne {

    position: relative;
    float: left;
    height: 78px;
    width: 91px;
    background-image: url("thumbnail1.png");

}

.imageThumbnailTwo {

    position: relative;
    float: left;
    height: 80px;
    width: 76px;
    background-image: url("thumbnail2.png");
    margin-left: 29px;
}

.imageThumbnailThree {

    position: relative;
    float: left;
    height: 76px;
    width: 89px;
    background-image: url("thumbnail3.png");
    margin-left: 29px;
} 
```

的HTML：

```
<div class="imageThumbnailsContainer">

    <div class="imageThumbnails">
        <div class="thumbnailOne"><a></a></div>
        <div class="thumbnailTwo"><a></a></div>
        <div class="thumbnailThree"><a></a></div>
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:46:52.173

您需要清除`.imageThumbnails`div。你可以做到这一点`.imageThumbnails { overflow: hidden; }`你也可以`position: relative`从所有东西中删除。

# jquery - jquery追加在历史回浏览器后丢失

> ID：14320570
> 
> 赞同：3
> 
> 时间：2013-01-14T14:43:08.563
> 
> 标签：jquery, browser, append

我有一个表单，当单击按钮时，会附加新的输入。提交时一切正常，但是如果我点击后面的浏览器，所有附加的字段都会丢失..

有没有办法在点击这个浏览器的按钮时维护它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:57:42.533

您附加的元素仅存在于不被任何浏览器缓存的 DOM 中。

我建议你使用 cookie 来解决这个问题，查看[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

将某些内容附加到此类 cookie

```
$.cookie("row", "a new row or whatever");

// or preferably a json
var myJsonRow = {
   row: 1,
   value: "Test"
}
$.cookie("row", JSON.stringify(myJsonRow)); 
```

要阅读这个非常简单的 cookie，只需使用

```
$.cookie("row"); 
```

现在显然你需要比这更高级的东西，但这可以在 json 对象中处理。

首先创建一个你觉得舒服的 json 模式，像这样

```
// Basic row-pattern
var cookieRows = {
   rows: [
      {
         value: "row 1",
         type: "radio"
      },
      {
         value: "row 2",
         type: "text"
      },
      {
         value: "row 3",
         type: "password"
      },
   ]
} 
```

并实施

```
$(document).ready(function(){
   // Test if the cookie is set
   if(!$.cookie("rows")) {

      var cookieRows = {
         rows: []
      }

      // Register the pattern
      $.cookie("rows", JSON.stringify(cookieRows));
   }

   // Adding rows

   // Register your event handler
   $("#control").click(function(){

      // Get the control element
      var controlElement = $(this);

      // Fetch the needed information and create a row
      var cookieRow = {
         value: controlElement.val(),
         type: controlElement.attr('type')
      }

      // Get the cookie
      var cookieRows = JSON.parse($.cookie("rows"));

      // Add the value to the cookie
      cookieRows.rows.push(cookieRow);

      // And save the cookie
      $.cookie("rows", JSON.stringify(cookieRows));
   });
}); 
```

嗯，你明白了！

# objective-c - 将图像从文件夹加载到 ikimagebrowser？

> ID：14320580
> 
> 赞同：0
> 
> 时间：2013-01-14T14:43:32.277
> 
> 标签：objective-c, macos, cocoa, ikimagebrowserview, imagekit

我是可可新手，我有一个 IKImageBrowserView ，这就是我将图像加载到它的方式：

```
- (IBAction)loadImages:(id)sender
{
NSMutableArray *urls = [[NSMutableArray alloc]init];
int i = 1;
for (i=1; i<55; i++) {
    NSString *photoNumber = [NSString stringWithFormat:@"%i", i];
    NSMutableString *urlString = [[NSMutableString alloc] initWithString:@"Australia"];
    [urlString appendString:photoNumber];
    NSURL* url = [[NSBundle mainBundle] URLForImageResource:urlString];
    [urls addObject:url];
}
[self addImagesWithPaths:urls];
}

    - (void)addAnImageWithPath:(NSString *)path
{
    myImageObject *p;

/* add a path to our temporary array */
p = [[myImageObject alloc] init];
[p setPath:path];
[_importedImages addObject:p];
}

- (void)addImagesWithPath:(NSString *)path recursive:(BOOL)recursive
{
NSInteger i, n;
BOOL dir;

[[NSFileManager defaultManager] fileExistsAtPath:path isDirectory:&dir];

if (dir)
{
    NSArray *content = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:nil];

    n = [content count];

    // parse the directory content
    for (i=0; i<n; i++)
    {
        if (recursive)
            [self addImagesWithPath:[path stringByAppendingPathComponent:[content objectAtIndex:i]] recursive:YES];
        else
            [self addAnImageWithPath:[path stringByAppendingPathComponent:[content objectAtIndex:i]]];
    }
}
else
{
    [self addAnImageWithPath:path];
}
}

/* performed in an independant thread, parse all paths in "paths" and add these paths in our    temporary array */
- (void)addImagesWithPaths:(NSArray *)urls
{
    NSInteger i, n;

n = [urls count];
for ( i= 0; i < n; i++)
{
    NSURL *url = [urls objectAtIndex:i];
    [self addImagesWithPath:[url path] recursive:NO];
}

/* update the datasource in the main thread */
[self performSelectorOnMainThread:@selector(updateDatasource) withObject:nil waitUntilDone:YES];
} 
```

现在我的图像按名称加载 - @“Australia”。这有点不方便，因为您的图像需要具有相同的名称和编号。如何从已导入 xcode 的文件夹中加载具有不同名称的图像？

所以目前我正在加载名为 Australia1、Australia2、Australia3、Australia4 的图像……等等。如何从捆绑文件夹中加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:56:23.693

您的数据源需要将符合`IKImageBrowserItem`协议的项目返回到图像浏览器视图。您的 myImageObject 类是一个很好的起点。

在该协议中，需要三种方法：

*   `imageUID`：返回唯一标识此项目（图像）的字符串。
*   `imageRepresentationType`: 返回[一个常量字符串，用于标识`imageRepresentation`图像的表示](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/IKImageBrowserItem_Protocol/IKImageBrowserItem_Reference.html#//apple_ref/doc/constant_group/Image_Representation_Types)方式。
*   `imageRepresentation`：返回一个表示图像的对象。

首先，我将使用您已经为每个 myImageObject 提供的路径。您可以将其用作标识符字符串和图像表示。

根据您在此应用程序中执行的其他操作，您可能会发现以后出于内存和/或速度原因自行加载每个图像是有利的。如果在分析之后，您确实得出了这个结论，您可以自己将图像加载为 NSImage 或 CGImage，适当地更改表示类型，然后将图像作为表示返回。

作为数据源，您将返回数组中[的项目数，并且当](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/IKImageBrowserDataSource_Protocol/IKImageBrowserDataSource_Reference.html#//apple_ref/occ/instm/NSObject/numberOfItemsInImageBrowser%3a)[在索引处](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/IKImageBrowserDataSource_Protocol/IKImageBrowserDataSource_Reference.html#//apple_ref/occ/instm/NSObject/imageBrowser%3aitemAtIndex%3a)`_importedImages`询问项目时，通过.`objectAtIndex:`

更多信息：

*   [`IKImageBrowserDataSource`协议参考](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/IKImageBrowserDataSource_Protocol/IKImageBrowserDataSource_Reference.html)
*   [`IKImageBrowserItem`协议参考](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/IKImageBrowserItem_Protocol/IKImageBrowserItem_Reference.html)

# jquery - 如何使用jQuery获取单选按钮的文本而不是值？

> ID：14320585
> 
> 赞同：0
> 
> 时间：2013-01-14T14:43:50.013
> 
> 标签：jquery

这是软件生成的代码

```
<div id="cred_form_3584_1_wpcf-ticket-month-or-course-radios" class="myzebra-radios">
  <div class="myzebra-radios-single">
    <label class="myzebra-style-label">
      <input id="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2" class="myzebra-control myzebra-radio myzebra-prime-name-wpcf-ticket-month-or-course" type="radio" checked="checked" value="wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2" name="wpcf-ticket-month-or-course">
      <span class="myzebra-radio-replace"></span>
    </label>
    <label id="cred_form_3584_1_label_wpcf-ticket-month-or-course_wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2" for="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-a6da15467aeb84f539c0dc1cd766ccd6-2">per month</label>
  </div>
<div class="myzebra-radios-single">
  <label class="myzebra-style-label">
    <input id="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" class="myzebra-control myzebra-radio myzebra-prime-name-wpcf-ticket-month-or-course" type="radio" value="wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" name="wpcf-ticket-month-or-course">
    <span class="myzebra-radio-replace"></span>
  </label>
  <label id="cred_form_3584_1_label_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" for="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1">per course</label>
</div> 
```

使用此代码：

```
alert($('input[@name="myzebra-radios-single"]:checked').text()); 
```

我得到了价值，但没有得到文字。我如何获取文本（例如每月）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:47:30.787

要获取 的内容`label`，您需要使用它的`for=`属性：

```
var $input = $('input[name=something]:checked');
var text = $('label[for='+$input.attr('id')+']').text(); 
```

[http://jsfiddle.net/mblase75/RDPP7/](http://jsfiddle.net/mblase75/RDPP7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:47:01.480

首先，单选元素没有任何文本值，如果有的话。

```
alert($('input[@name="myzebra-radios-single"]:checked').text());
// Should be
alert($('input[@name="wpcf-ticket-month-or-course"]:checked').text()); 
```

当我分解您的输入时，它们看起来像这样

```
<input 
    id="cred_form_3584_1_wpcf-ticket-month-or-course_wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" 
    class="myzebra-control myzebra-radio myzebra-prime-name-wpcf-ticket-month-or-course" 
    type="radio" 
    value="wpcf-fields-radio-option-f63eb739e2a6499a882c8e82aa35b028-1" 
    name="wpcf-ticket-month-or-course"> 
```

如果您想从上面选择某个属性，请使用 .val() .text() 或 .attr()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T14:48:11.203

尝试 ：

`alert($('input[@name="myzebra-radios-single"]:checked').attr('name'));`

# .net - 使用 Office 互操作通过虚拟目录运行时出错

> ID：14320589
> 
> 赞同：4
> 
> 时间：2013-01-14T14:44:06.650
> 
> 标签：.net, iis-7.5, office-interop, asp.net-4.5

我使用 Office Inter op 库将办公文档转换为 PDF。如果我通过 Visual Studio 运行，我可以很好地获取 PDF，但是通过虚拟目录运行时出现以下错误。

**由于以下错误，检索具有 CLSID {000209FF-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）**

如果有人有解决方案，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T19:56:32.783

您引用的 Office 互操作库不在您的服务器上。你需要：

1) 确保服务器有 Office，因为它是互操作所必需的。

2）将您引用的库复制到服务器上的正确位置。

# jquery - Localstorage 不会“保存”+ 以 HTML 格式显示。

> ID：14320594
> 
> 赞同：1
> 
> 时间：2013-01-14T14:44:24.047
> 
> 标签：jquery, html, local-storage

所以我有这个脚本，它把东西放在一个数组中，然后把它串起来放到本地存储中。但是由于某种原因，它忘记了字符串，并且当我重新访问该网站时本地存储被重置。

这是脚本：

```
var favorites = [];
$(document).on('click', '#favoriteadd', function() {
favorites.push($('h5').text());
localStorage.setItem('favorites', JSON.stringify(favorites));
}); 
```

我也找不到办法让它回到我的 HTML 中。有小费吗？干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:03:48.970

也许首先测试可用的存储，因为很多浏览器不允许它。

```
function supports_html5_storage() {
  try {
    return 'localStorage' in window && window['localStorage'] !== null;
  } catch (e) {
    return false;
  }
} 
```

并在书中查找浏览器兼容性，例如 [这里](http://diveintohtml5.info/storage.html)

并尝试与[这里的会话和 cookie 混合](http://www.w3schools.com/html/html5_webstorage.asp)

# ios - iOS：从服务器接收的数据中无法识别换行符

> ID：14320598
> 
> 赞同：0
> 
> 时间：2013-01-14T14:44:27.540
> 
> 标签：ios, nsstring

我正在从服务器下载字符串数据。数据包含换行符`"\n"`，当我将字符串分配给`Label`的 text 属性时，新行字符打印为`"\n"`而不是在行之间换行。如果我在本地存储了相同的字符串，它工作正常！我正在获取 UTF8 字符串。那是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:54:53.733

将此行添加到您的 UILabel 创建

```
label.numberOfLines = 0; 
```

希望这可以帮助你..

# c# - 将 C# 转换为 VB.Net WebBrowser 事件

> ID：14320599
> 
> 赞同：-5
> 
> 时间：2013-01-14T14:44:27.220
> 
> 标签：c#, vb.net, converter, manual

我知道 C#，我想将此代码转换为 VB.NET。

```
lol.Navigated += new WebBrowserNavigatedEventHandler(Form1_Navigated); 
```

我使用了所有在线转换器，但没有工作。

但我想知道如何手动转换此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:49:16.773

```
AddHandler lol.Navigated, AddressOf Form1_Navigated 
```

然后确保有一个事件'Form1_Navigated'：

```
Private Sub Form1_Navigated(sender as Object, e as WebBrowserNavigatedEventArgs)
    //Do stuff
End Sub 
```

希望这可以帮助。

# wix - Windows Server 2008/Vista - 检查安装了哪些服务器角色

> ID：14320601
> 
> 赞同：0
> 
> 时间：2013-01-14T14:44:38.087
> 
> 标签：wix, windows-server-2008, wix3.5, wix3, windows-administration

我知道这`serverManagerCmd.exe -query <foo.xml>`将以 xml 格式输出所有角色 + 功能的列表。但是，在编写 WiX 代码时，我无法轻松解析它。

那么是否有一个命令会根据您指定的服务器角色是否安装而返回不同的代码？

**背景：** 我正在尝试编写一个 WiX 安装程序，它检查是否安装了服务器角色，如果尚未安装，则只运行安装命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:58:27.997

我相信 Win32_ServerFeature Windows Management Instrumentation (WMI) 类可能对您有用。另请参阅[http://msdn.microsoft.com/en-us/library/cc280268(VS.85).aspx](http://msdn.microsoft.com/en-us/library/cc280268(VS.85).aspx)。

我从未使用过 WiX，但我假设它支持 WMI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:06:47.217

AFAIK，没有内置的 WiX 元素可以让您执行此操作。

最好的办法可能是编写一个自定义操作，它允许您使用所有正常的 .NET 功能在 C# 或 VB 中编写逻辑。然后，您可以从安装程序调用该自定义操作以处理角色。

# .net - 测试自己的 cmdlet

> ID：14320606
> 
> 赞同：0
> 
> 时间：2013-01-14T14:44:57.443
> 
> 标签：.net, powershell

是否有测试用 C# 编写的 cmdlet 的常见做法？我对这样的事情很感兴趣：

```
[Test]
public void Test1()
{
    var cmdlet = new MyCmdlet();
    cmdlet.Property1 = "something 1";
    cmdlet.Property2 = "something 2";

    var actualOutput = Execute(cmdlet);

    AssertCmdLetOut(expectedOutput, actualOutput);  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:57:57.710

不是很优雅。但仍然比什么都重要：[这里](http://weblogs.asp.net/cazzu/archive/2006/10/26/PowerShellUnitTestCmdlet.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-10T20:35:34.480

假设这个 Cmdlet：

```
[Cmdlet(VerbsCommon.Get, "Lorem")]
public class LoremCmdlet : Cmdlet
{
    protected override void ProcessRecord()
    {
        WriteObject ("Lorem Ipsum");
    }
} 
```

一个样本 xunit 测试可能是：

```
public class LoremCmdletTests
{
    [Fact]
    public void Should_Return_a_Canoncial_String()
    {
        // arrange
        LoremCmdlet cmdlet = new LoremCmdlet();
        string actual = null;

        // act
        IEnumerator result = cmdlet.Invoke().GetEnumerator();
        result.MoveNext();
        actual = result.Current.ToString();

        // assert
        Assert.Equal("Lorem Ipsum", actual);
    }

} 
```

# web-services - jax-ws 关于端点接口

> ID：14320609
> 
> 赞同：12
> 
> 时间：2013-01-14T14:45:19.347
> 
> 标签：web-services, jax-ws

已经定义了带有注释**@WebService**的Java 接口 编译了运行良好的代码

例子：

```
@WebService
public interface HelloWorldIfc{ 
```

现在我尝试将端点接口定义为

```
 @WebService (endpointInterface = "com.ws.HelloWorldIfc")
    public interface HelloWorldIfc{ 
```

这也编译得很好

那么-我应该在接口上还是在实现类上定义端点接口？
这个属性有什么用吗？它的目的是什么？
如果我不定义它会发生什么 - 我会失去什么？
谢谢，
萨蒂什

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T15:15:58.577

[JAX-WS 规范](http://jcp.org/aboutJava/communityprocess/final/jsr224/index.html)在第 3.3 节，第 30 页中明确了这一点：

您可以使用`endpointInterface`属性将实现类和接口分开。基本上，这决定了`wsdl:portType`在您部署服务并`wsdl:definition`生成服务时将映射到您的内容。

如果您*没有*定义带`endpointInterface`注释的类的所有公共方法，则将被映射到`wsdl:operation`（只要您不使用`@WebMethod`注释影响此行为）。

如果您*确实*定义了`endpointInterface`，它必须指向带注释的类实现的某种类型（或者，如您的问题所示，它本身）。然后，这种类型的公共方法用于映射`wsdl:portType`，而不是注解类的方法。

总结一下：只有在实现类上使用 并且希望基于它实现的接口生成 WSDL 时，的定义`endpointInterface`才有意义。`@WebService`在您在界面上使用注释的当前设置中`com.ws.HelloWorldIfc`，确实没有任何区别。因此，您只需跳过它就不会失去任何东西。如果您希望实现类提供不应进入生成的 WSDL 的公共方法，则该注释很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-05T23:04:44.913

定义 endpointInterface 很有用，因为接口方法的 @WebParam 注释正在工作，而无需在实现类中再次定义它们。

# javascript - 如何使用流星进行 API 调用

> ID：14320610
> 
> 赞同：44
> 
> 时间：2013-01-14T14:45:19.983
> 
> 标签：javascript, json, api, twitter, meteor

好的，这里是推特 API，

```
http://search.twitter.com/search.atom?q=perkytweets 
```

谁能给我任何关于如何使用[Meteor调用此 API 或链接的提示](http://meteor.com)

***更新：：***

这是我尝试过的代码，但没有显示任何响应

```
if (Meteor.isClient) {
    Template.hello.greeting = function () {
        return "Welcome to HelloWorld";
    };

    Template.hello.events({
        'click input' : function () {
            checkTwitter();
        }
    });

    Meteor.methods({checkTwitter: function () {
        this.unblock();
        var result = Meteor.http.call("GET", "http://search.twitter.com/search.atom?q=perkytweets");
        alert(result.statusCode);
    }});
}

if (Meteor.isServer) {
    Meteor.startup(function () {
    });
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-14T17:39:44.677

您正在客户端范围的块中定义您的**checkTwitter** [Meteor.method 。](http://docs.meteor.com/#meteor_methods) 因为你不能从客户端调用跨域（除非使用jsonp），你必须把这个块放在一个块中。**`Meteor.isServer`**

 **[顺便说一句，根据文档](http://docs.meteor.com/#meteor_methods)，您的 checkTwitter 函数的客户端`Meteor.method`只是服务器端方法的一个**存根。**您需要查看文档以获取有关服务器端和客户端如何协同工作的完整说明`Meteor.methods`。

这是 http 调用的一个工作示例：

```
if (Meteor.isServer) {
    Meteor.methods({
        checkTwitter: function () {
            this.unblock();
            return Meteor.http.call("GET", "http://search.twitter.com/search.json?q=perkytweets");
        }
    });
}

//invoke the server method
if (Meteor.isClient) {
    Meteor.call("checkTwitter", function(error, results) {
        console.log(results.content); //results.data should be a JSON object
    });
} 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-09-20T12:45:01.897

这可能看起来很初级 - 但 HTTP 包默认情况下不会出现在您的 Meteor 项目中，并且要求您按点菜方式安装它。

在命令行上：

1.  只是流星：
    流星添加http

2.  陨石：
    mrt加http

[Meteor HTTP 文档](http://docs.meteor.com/#http)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-14T16:17:43.183

客户端上的 Meteor.http.get 是异步的，所以你需要提供一个回调函数：

```
Meteor.http.call("GET",url,function(error,result){
     console.log(result.statusCode);
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-14T15:02:35.853

使用`Meteor.http.get`. 根据[文档](http://docs.meteor.com/#meteor_http_get)：

> ```
> Meteor.http.get(url, [options], [asyncCallback]) Anywhere
> Send an HTTP GET request. Equivalent to Meteor.http.call("GET", ...). 
> ```

这些文档实际上包含了一些使用 Twitter 的示例，因此您应该能够开始使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-28T21:21:23.817

在服务器端，如果您提供对 http.get 的回调，它将是异步调用，因此我对客户端未定义返回的解决方案是

var 结果 = HTTP.get(iurl); 返回结果.data.response;

因为我没有将调用传回给 HTTP.get，所以它一直等到我得到响应。希望能帮助到你**

# objective-c - Core Data 实体中的可转换属性可以是指向 c 结构的指针吗？我的变压器没有被调用

> ID：14320611
> 
> 赞同：0
> 
> 时间：2013-01-14T14:45:21.353
> 
> 标签：objective-c, core-data, pointers, struct, nsvaluetransformer

我正在尝试创建一个 CoreData 持久实体。该实体有一些属性，其中之一是非标准属性 state。state 属性是一个指向包含一些属性的 C 结构的指针。这是我的数据模型的样子：

实体：

**MDInstance**

属性：

*   持续时间：整数 16
*   移动：整数 16
*   名称：字符串
*   状态：可变形。我将 Transformer 设置为 MDStateTransformer。

我生成了我的类并编辑了 state 属性。这是界面的样子：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>
#import "MDState.h" // this is where the State structure is defined

@interface MDInstance : NSManagedObject

@property (nonatomic, retain) NSNumber * duration;
@property (nonatomic, retain) NSNumber * moves;
@property (nonatomic, retain) NSString * name;
@property (nonatomic) State *state; // note that this is a pointer to a struct

@end 
```

这是实现的样子：

```
#import "MDInstance.h"

@implementation MDGameInstance

@dynamic duration;
@dynamic moves;
@dynamic name;

@synthesize state;

@end 
```

我创建了一个名为 MDStateTransformer 的值转换器。实现这一点（可能）并不重要。可以说我已经`allowsReverseTransformation`返回`YES`，`transformedValueClass`返回`[NSValue class]`，并且我已经实施`transformedValue:`并且`reverseTransformedValue:`

最后，我在我的 AppDelegate 中注册了 MDStateTransformer，`application:didFinishLaunchingWithOptions:`如下所示：

```
MDStateTransformer *transformer = [[MDStateTransformer alloc] init];
[NSValueTransformer setValueTransformer:transformer forName:@"MDStateTransformer"]; 
```

如果我创建我的 MDInstance 的新实例，设置它的属性 - 包括状态属性 - 然后尝试保存实体，我的转换器永远不会被调用。

我在转换器的 init 方法中设置了一个停止点，它正在被实例化。我放了另一个，`transformedValue:`它的功能没有被调用。

但是，如果我更新我的 MDInstance 以使状态属性不是指针，而只是一个状态结构，并且我更新转换器以使用结构而不是指针，`transformedValue:`则调用 。

是否可以在作为 ac 结构指针的对象上具有自定义属性？如果是这样，任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:04:59.990

您的可转换属性也需要指定为`@dynamic`而不是`@synthesize`在您的实现文件中。通过综合该属性，您可以在核心数据之外提供 getter 和 setter，因此不会使用 Core Data 提供的访问器。

# c++ - 使用 PostgreSQL 时 SOCI 库中的高精度时间戳

> ID：14320612
> 
> 赞同：1
> 
> 时间：2013-01-14T14:45:32.590
> 
> 标签：c++, sql, postgresql, soci

SOCI 库描述了 std::tm 的绑定以使用时间戳。std::tm 结构精度次之，但 PostgreSQL 时间戳提供更好的精度。您能否建议以小于秒的精度访问时间戳的最佳方法？

我尝试了 unsigned long 和 long long 数据类型来访问时间戳，但没有成功。我成功的唯一方法是字符串，但这需要解析它（我希望有一些常规值可以使用 - 比如，以毫秒为单位的长，甚至更好的 c++11 time_point），这远非最佳。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:03:01.457

如果您通过 与 PostgreSQL 通信`libpq`，请使用`libpqtypes`. 它将有助于管理 PostgreSQL 数据类型。

如果您不使用`libpq`，请详细说明。

# javascript - 使用 node.js 将我的 3D 应用程序变成服务器......可能吗？

> ID：14320614
> 
> 赞同：0
> 
> 时间：2013-01-14T14:45:46.193
> 
> 标签：javascript, node.js, scripting

我有一个允许通过 Javascript 文件编写脚本的 3d 应用程序。有没有办法从该文件启动 node.js 并创建各种服务器以与 3D 应用程序通信？

非常感谢您的想法和替代方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:51:25.153

可能不是。nodejs 有一个特定于操作系统的二进制部分（即它不是纯 JavaScript）。此外，3D JavaScript 解释器会与来自 nodejs 的解释器发生冲突，结果不会很漂亮。

如果您的 3D 应用程序的 JavaScript 方言允许打开套接字（也许是 AJAX？），那么您可以使用它与独立运行的 nodejs 实例通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:59:59.277

您不能从普通的 javascript 文件启动 nodejs。您可以单独创建一个 nodejs 服务器并将 3d 应用程序 javascript 文件中的请求发送到 tcp/http 服务器并开始处理您想要的数据。

最简单的例子：你的 3d 中的 Javascript：

从 url 获取数据：192.168.1.1:3000

```
$.get("http://192.168.1.1:3000/myrequest",function(data){
  console.log(data)
}); 
```

nodejs 服务器开始于：192.168.1.1:3000 请求/处理数据

```
 var http = require('http');
    http.createServer(function(req,res){
       if(req.url=="myrequest")
       {
           process data..
       }

    }).listen(3000); 
```

# php - 控制一个php类加载某些参数的次数

> ID：14320616
> 
> 赞同：1
> 
> 时间：2013-01-14T14:20:41.423
> 
> 标签：php

我有一个通过 ssh 连接到某些设备的 php 类。我想添加逻辑来控制每个设备的连接数。这是我的类构造函数的样子：

```
public function __construct($hostname, $password, $username = "", $timeout = 10) 
    {
        set_include_path(get_include_path() . PATH_SEPARATOR . '/var/www/phpseclib');
        include_once('Net/SSH2.php');
        $this->_hostname = $hostname;
        $this->_password = $password;
        $this->_username = $username;

    } // __construct 
```

我读过其他一些帖子，例如：[如何在 php 中保存应用程序级别的变量？](https://stackoverflow.com/questions/4302495/how-to-save-a-variable-at-application-level-in-php)

我想我只是想确认以下内容：

1.  我认为数据库会比文件更好，因为在多个会话尝试写入/更新类计数器的情况下。
2.  类构造函数和析构函数是添加此类逻辑的最佳/唯一位置。

唯一的问题是，目前，我没有与我的应用程序关联的数据库 - 所以我讨厌添加这种“依赖项”，但这似乎是最好的方法。如果您有任何意见/建议，请告诉我。

谢谢。

**编辑1：**

在我的构造函数中添加逻辑时出现的另一个问题如下......假设我有以下逻辑（伪代码）

```
 public function __construct($hostname) 
  {
     if (!  ok_to_connect($hostname)  )
     {
         exit;
     }
  }

  public function ok_to_connect($hostname)
  {
    $filelist = glob($counterslocation.$hostname.'*.tmp');

    if ( count($filelist)  < 4) {
        $handle = fopen($counterslocation.$hostname.rand(1,4).".tmp", "r");
        return true;
    }       
    else {
        return false;
    }
   } 
```

在我已经有 4 个活动连接的情况下，在我的构造函数中调用 exit() 是否仍会调用析构函数？这意味着析构函数将尝试删除其中一个临时文件，即使 ok_to_connect() 函数实际上并未创建文件。我想我可以让 ok_to_connect() 方法在类中设置一个公共变量，并让析构函数在删除任何文件之前检查它。这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:45:59.843

我在这里看到 2 个解决方案。

1- 使用像 APC 这样的内存缓存。当然，如果您的服务器重新启动，您将失去计数器，但您也可能会失去 ssh 连接。要处理 APC 的并发问题，您可以查看[这个问题](https://stackoverflow.com/questions/5288722/php-stats-object-stored-in-memory-concurrent-updates-data-loss)

```
if(!apc_exists($this->_hostname)) {
    apc_store($this->_hostname,1);
} else {
    apc_inc($this->_hostname);
} 
```

2- 使用数据库：一个非常轻量级的数据库，如 php 中包含的 sqlite 将提供对计数器的持久性，这与内存解决方案相反。

数据库解决方案更健壮但速度较慢。在重新启动的情况下，由于持久性，您还需要清理所有计数器。

你只需要知道你的数据是如何批评的，就可以选择好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:57:09.177

您可以，而不是将计数保存在单个文件中，

*   在`__construct`公共目录中创建文件，
*   并`__destruct`删除该文件。

这样您就不会遇到同时写入操作的问题。文件总数将显示打开的连接数。

# sockets - 实时操作系统上的 UDP 非阻塞套接字：sendto() 和 recvfrom() 可以返回部分消息吗？

> ID：14320622
> 
> 赞同：2
> 
> 时间：2013-01-14T14:46:39.153
> 
> 标签：sockets, udp, real-time, recv, sendto

这是我在这里的第一条信息。我正在实时操作系统（OnTime 和 VxWorks）上使用非阻塞 UDP 套接字。我已经阅读了文档和一些论坛，但我对 sendto() 和 recvfrom() 函数的“原子性”有一些疑问：

*   sendto() 返回排队或错误的字节数。它是否可能小于输入缓冲区长度？也许输出缓冲区没有足够的可用空间，只有几个字节排队......

*   recvfrom() 返回接收到的字节数或错误。它是否可能小于源发送的消息的大小？我的意思是部分消息阅读...

我希望读写函数是原子的（完整的消息或没有消息读/写）。

谢谢。伊曼纽尔。

* * *

我询问了 OnTime 支持，他们告诉我，如果输出缓冲区没有足够的可用空间，sendto() 可能会将部分消息排入队列。我不知道 recvfrom() 在某些情况下是否也可以返回部分消息。我想不同操作系统之间的套接字实现没有标准行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:04:26.843

> sendto() 返回排队或错误的字节数。它是否可能小于输入缓冲区长度？

不，它是完全发送的，或者根本不发送 UDP。

> recvfrom() 返回接收到的字节数或错误。它是否可能小于源发送的消息的大小？我的意思是部分消息阅读...

如果操作系统堆栈的缓冲区不能容纳整个 UDP 数据包，则将其丢弃。如果您的应用程序缓冲区无法容纳整个数据包，您将获得数据包的初始内容。

即，您只能在一种情况下读取部分消息，即如果数据不适合您传递给 sendto() 的缓冲区。在这种情况下，数据包的其余部分将被丢弃。使用 recvmsg() 您可以检测数据包是否被截断，但这通常可以通过使用最大大小的缓冲区（UDP 必须适合 MTU 为 2^16-1 的 IP 数据包）或通过设计您使用的协议来解决在 UDP 内部，您可以在其中设置自己的合理最大大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:06:42.763

我对这些系统并不是很熟悉，但是如果它们破坏了正常的 UDP 套接字语义，我会感到非常惊讶，这总是在“发送”时将完整的数据报入队并在“接收”时将完整的单个数据报出队。

# python - 查找变量（读取或写入）

> ID：14320630
> 
> 赞同：1
> 
> 时间：2013-01-14T14:47:04.823
> 
> 标签：python

我想为python程序开发一个小型调试工具。在动态切片中如何找到语句中访问的变量？并找到这些变量的访问类型（读取或写入）（在 Python 中）。### 写入：语句可以更改程序状态 读取：语句可以读取程序状态。*** *例如，在这 4 行中，我们有： (1) x = a+b => write{x} & reads{a,b} (2)y=6 => write{y}&reads{} (3) while(n>1) => 写{} &reads{n} (4) n=n-1 写{n} & 读{n}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:49:58.487

不确定你的目标是什么。也许[`dis`](http://docs.python.org/2/library/dis.html)是你正在寻找的？

```
>>> import dis
>>> dis.dis("x=a+b")
  1           0 LOAD_NAME                0 (a)
              3 LOAD_NAME                1 (b)
              6 BINARY_ADD
              7 STORE_NAME               2 (x)
             10 LOAD_CONST               0 (None)
             13 RETURN_VALUE 
```

# android - 来自服务的持久 android 通知

> ID：14320631
> 
> 赞同：1
> 
> 时间：2013-01-14T14:47:07.500
> 
> 标签：android, service, notifications, persistent

如何制作持久通知，每次用户看到它时都会更新？形成服务

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T15:25:36.977

要在运行时显示通知`Service`，请调用：

```
 startForeground(R.string.notification_id, myNotification); 
```

为该方法提供您的服务的 ID，以及`Notification`您创建的 ID。

* * *

在任何时候，您都可以通过使用相同的内容并发布新`Service`的内容来更新用户所看到的内容：`R.string.notification_id``Notification`

```
 NotificationManager notificationManager = 
        (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    notificationManager.notify(R.string.notification_id, myNotification); 
```

* * *

要创建一个`Notification`，您需要阅读`Notification.Builder`（[此处的 android 文档](http://developer.android.com/reference/android/app/Notification.Builder.html)）。

一个相关问题也有一个很好的答案：[如何准确地使用 Notification.Builder？](https://stackoverflow.com/a/8869647/383414)很抱歉没有重新发布他的答案，但它包含很多代码，会帮你解决。

# jquery - 按键后正文停止滚动，使用 jQuery 按键

> ID：14320634
> 
> 赞同：3
> 
> 时间：2013-01-14T14:47:17.150
> 
> 标签：jquery, scroll, keypress

按下按键后，我有一些滚动动作，按键按下。所以这就是它的样子：

```
$(document).keydown(function(e) {
    e.stopPropagation();

    if (e.keyCode === 40) {
        // some scrolling actions in specifie div
    } else if (e.keyCode === 38) {
        // some scrolling actions in specifie div
    }
}); 
```

一切工作正常，但是当我滚动时，用我的 div 按下按键也会滚动整个页面。是否有任何选项可以停止此正文滚动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:51:51.733

你需要`.preventDefault()`在里面...

```
$(document).keydown(function(e) {
    e.stopPropagation();
    if (e.keyCode === 40) {
        e.preventDefault();
        console.log(40);
    } else if (e.keyCode === 38) {
        e.preventDefault();
        console.log(38);
    }
}); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-14T14:48:48.223

如果你的身体是当前有滚动动画的，那么使用`stop()`. [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

```
$('body').stop(); 
```

# android - ProgressBar 和整个应用程序冻结

> ID：14320639
> 
> 赞同：2
> 
> 时间：2013-01-14T14:47:30.627
> 
> 标签：android, android-progressbar, ui-thread

我有一个应用程序，当我`ProgressBar`在屏幕上显示 a 时它会冻结。当我增加 a 的大小`ProgressBar`或使用 a`View`而不是它时，`ProgressBar`它不会冻结。

当它冻结 LogCat 日志时：

```
D/OpenGLRenderer(13909): GL Error after OpenGLRenderer::setupDrawMesh-   glVertexAttribPointer OpenGLRenderer: 1285
D/OpenGLRenderer(13909): GL Error after OpenGLRenderer::setupDrawMesh-   glVertexAttribPointer OpenGLRenderer: 1285
D/OpenGLRenderer(13909): GL Error after OpenGLRenderer::drawTextureMesh()-   glDrawArrays OpenGLRenderer: 1285
D/OpenGLRenderer(13909): GL Error after OpenGLRenderer::setupDrawMesh- glDisableVertexAttribArray OpenGLRenderer: 1285 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:58:13.890

您可以并且应该使用 AsyncTask 来完成您希望在 UI 线程之外完成的事情。您将看到许多在 AsyncTask 的各种不同生命周期方法中显示和隐藏 ProgressDialog 的示例。

这是一个很好的例子（有很多）：[Android AsyncTask Progress bar](https://stackoverflow.com/questions/9157515/android-asynctask-progress-bar)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T14:55:53.060

您应该使用另一个线程进行计算，您需要在 ui 线程中更新进度条。您需要引擎和 ui 线程之间的共享变量，该变量将由引擎线程刷新，并且 ui 线程应定期检查更改。

或者，您可以将进度条的对象传递给引擎线程，该线程可以调用方法来更新进度条的状态。

# mysql - 内部多次加入一个表

> ID：14320646
> 
> 赞同：0
> 
> 时间：2013-01-14T14:47:50.957
> 
> 标签：mysql, inner-join

我正在尝试从几个不同的表创建一个派生表，如果我执行单个内部联接，一切正常，但是当我添加更多联接时，我无法获得所需的结果。这是我现在得到的：

表结构：

第一张表：

```
+------------+------------+------+-----+---------+-------+
| Field      | Type       | Null | Key | Default | Extra |
+------------+------------+------+-----+---------+-------+
| TAG_ID     | int(11)    | NO   | PRI | NULL    |       |
| STATUS     | int(11)    | YES  |     | NULL    |       |
| ENABLE     | int(11)    | YES  |     | NULL    |       |
| TIME_STAMP | bigint(20) | YES  |     | NULL    |       |
| VALUE      | float      | YES  |     | NULL    |       |
+------------+------------+------+-----+---------+-------+ 
```

第二张表：

```
+--------------------+---------------------+------+-----+------------+----------------+
| Field              | Type                | Null | Key | Default    | Extra          |
+--------------------+---------------------+------+-----+------------+----------------+
| TAG_ID             | int(11)             | NO   | PRI | NULL       | auto_increment |
| TAG_DEV_ID         | int(11)             | NO   |     | NULL       |                |
| TAG_NAME           | varchar(256)        | NO   |     | NA         |                |

.....................

| TAG_TIME_STAMP     | bigint(20) unsigned | NO   |     | 0          |                |
+--------------------+---------------------+------+-----+------------+----------------+ 
```

这是我现在要做的——首先，我在将两个表加入一个大表后创建一个视图：

```
CREATE VIEW U1_TEMP_TEST AS (SELECT TAG_ID AS TID, VALUE FROM table_1);
CREATE VIEW U1_TEST AS (SELECT * FROM table_2 AS T2 INNER JOIN U1_TEMP_TEST AS T1 ON T2.TAG_ID = T1.TID); 
```

现在我需要将表连接到自身，这样我就可以从不同列中的“值”中获取行，我这样做：

```
SELECT U1.TAG_DEV_ID, U1.TAG_ID, U1.VALUE, U2.VALUE 
FROM U1_TEST AS U1 
INNER JOIN ((SELECT * FROM U1_TEST 
        WHERE (TAG_ID = 1 OR TAG_ID = 12 OR TAG_ID = 21)) AS U2) 
        ON U1.TAG_DEV_ID = U2.TAG_DEV_ID 
WHERE (U1.TAG_ID = 4 OR U1.TAG_ID = 20 OR U1.TAG_ID = 14) 
GROUP BY U1.TAG_DEV_ID; 
```

我得到了这样的好结果：

```
+------------+--------+--------+-------+
| TAG_DEV_ID | TAG_ID |  VALUE | VALUE |
+------------+--------+--------+-------+
|          1 |      4 |   -0.5 |   2.1 |
|          2 |     14 |  -12.7 |   0.4 |
|          3 |     20 |   -5.7 |   9.5 |
+------------+--------+--------+-------+ 
```

但是，如果我尝试再添加一个这样的连接：

```
SELECT U1.TAG_DEV_ID, U1.TAG_ID, U1.VALUE, U2.VALUE, U3.VALUE 
FROM U1_TEST AS U1 
INNER JOIN ((SELECT * FROM U1_TEST 
    WHERE (TAG_ID = 1 OR TAG_ID = 12 OR TAG_ID = 21)) AS U2) 
    ON U1.TAG_DEV_ID = U2.TAG_DEV_ID 
INNER JOIN ((SELECT * FROM U1_TEST 
    WHERE (TAG_ID = 3 OR TAG_ID = 13 OR TAG_ID = 22)) AS U3) 
    ON U1.TAG_DEV_ID = U3.TAG_DEV_ID 
WHERE U1.TAG_ID = 4 OR U1.TAG_ID = 14 OR U1.TAG_ID = 24 
GROUP BY U1.TAG_DEV_ID; 
```

返回的数据不是我所期望的，并非所有值都被选中。也许第二个内部连接有问题，我被这个问题困扰了几个小时，无法理解为什么单个连接查询工作正常而最后一个没有。

谢谢你的帮助 ！

**编辑**结果数据：

```
+------------+--------+-------+-------+-------+
| TAG_DEV_ID | TAG_ID | VALUE | VALUE | VALUE |
+------------+--------+-------+-------+-------+
|          1 |      4 |  -0.5 |     3 |     0 |
|          2 |     14 | -12.7 |   0.5 |   1.6 |
+------------+--------+-------+-------+-------+ 
```

我希望它是这样的：

```
+------------+--------+-------+-------+-------+
| TAG_DEV_ID | TAG_ID | VALUE | VALUE | VALUE |
+------------+--------+-------+-------+-------+
|          1 |      4 |  -0.5 |     3 |     0 |
|          2 |     14 | -12.7 |   0.5 |   1.6 |
|          3 |     21 |     x |     x |     x |
+------------+--------+-------+-------+-------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:00:15.463

`LEFT JOIN`像这样使用：

```
SELECT 
  U1.TAG_DEV_ID, 
  U1.TAG_ID, 
  U1.VALUE, 
  U2.VALUE, 
  U3.VALUE 
FROM U1_TEST AS U1 
LEFT JOIN U1_TEST AS U2  ON U1.TAG_DEV_ID = U2.TAG_DEV_ID 
                        AND U3.TAG_ID IN(1, 12, 21) 
LEFT JOIN U1_TEST AS U3  ON U1.TAG_DEV_ID = U3.TAG_DEV_ID 
                        AND U3.TAG_ID IN(3, 13, 22) 
WHERE U1.TAG_ID IN(4, 14, 24)
GROUP BY U1.TAG_DEV_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:19:31.100

您以错误的方式使用连接。您的`where`子句仅过滤 3 个表之一。您的查询如下所示：

```
SELECT U1.TAG_DEV_ID, U1.TAG_ID, U1.VALUE, U2.VALUE, U3.VALUE 
FROM U1_TEST AS U1 
INNER JOIN ((SELECT * FROM U1_TEST 
    WHERE (TAG_ID = 1 OR TAG_ID = 12 OR TAG_ID = 21)) AS U2) 
    ON U1.TAG_DEV_ID = U2.TAG_DEV_ID 
INNER JOIN ((SELECT * FROM U1_TEST 
    WHERE (TAG_ID = 3 OR TAG_ID = 13 OR TAG_ID = 22)) AS U3) 
    ON U1.TAG_DEV_ID = U3.TAG_DEV_ID 
WHERE U1.TAG_ID = 4 OR U1.TAG_ID = 14 OR U1.TAG_ID = 24 
GROUP BY U1.TAG_DEV_ID; 
```

问题：

1.)`WHERE (TAG_ID = 1 OR TAG_ID = 12 OR TAG_ID = 21)) AS U2)`仅适用于 U2

2.)`WHERE (TAG_ID = 3 OR TAG_ID = 13 OR TAG_ID = 22)) AS U3)`仅适用于 U3

因此，根据定义，您期望 Tag_ID = 21 的行不能出现在您的结果中，因为它是 U1 和 U2 的一部分，但是您在 U3 的过滤器排除了该记录，并且 U3 中没有任何内容可以加入 Tag_ID = 21。

相反，我会使用如下查询：

```
SELECT U1.TAG_DEV_ID, U1.TAG_ID, U1.VALUE, U2.VALUE, U3.VALUE 
FROM U1_TEST AS U1 
INNER JOIN TEST AS U2 
ON U1.TAG_DEV_ID = U2.TAG_DEV_ID 
INNER JOIN U3
    ON U1.TAG_DEV_ID = U3.TAG_DEV_ID 
    WHERE (TAG_ID = 1 OR TAG_ID = 12 OR TAG_ID = 21)) AND 
    (TAG_ID = 3 OR TAG_ID = 13 OR TAG_ID = 22)) AND
    U1.TAG_ID = 4 OR U1.TAG_ID = 14 OR U1.TAG_ID = 24 
GROUP BY U1.TAG_DEV_ID; 
```

我没有测试这段代码，但你明白了。

# spring - Jenkins 可以在我的项目上发布“maven jboss-as:deploy”吗？

> ID：14320649
> 
> 赞同：0
> 
> 时间：2013-01-14T14:48:15.087
> 
> 标签：spring, maven, jboss, jenkins

我正在尝试将 Jenkins 和 Selenium 用于我将在 AS7 中运行的 Spring 项目的 CI。

我想知道是否可以让 Jenkins 在我的项目上发出“maven jboss-as:deploy”命令行以将其部署到我的 AS7 服务器。

有人可以让我知道这是否可以完成..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T14:59:20.247

这里不需要让詹金斯参与。只需将`jboss-as:deploy`插件添加到您的 pom.xml，绑定到`pre-integration-test`您的构建阶段。然后，当您运行`mvn install`（本地或在 Jenkins 上）时，您的战争将部署到 AS7 服务器。

# redis - redis是如何实现进程间通信的？

> ID：14320651
> 
> 赞同：1
> 
> 时间：2013-01-14T14:48:36.643
> 
> 标签：redis

我们可以简单地使用redis来实现远程通信如：

```
redis.StrictRedis(host=REDIS_IP,port=PORT) 
```

我不知道redis是否以相同的模式实现远程和本地？

也许我只是想知道redis如何以不同的方式实现网络通信和进程间通信？

如有不妥，请指出。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T15:01:30.627

Redis 可以处理经典的 TCP 套接字，也可以处理面向流的[unix 域套接字](http://en.wikipedia.org/wiki/Unix_domain_socket)。

TCP 套接字可用于执行网络和本地进程间通信。Unix 域套接字只能支持本地进程间通信。

这两种套接字都由文件描述符实现。Redis 基于在文件描述符级别工作的事件循环，因此它以完全相同的方式处理 TCP 和 unix 域套接字（使用标准网络 API）。[您将在ae.c](https://github.com/antirez/redis/blob/unstable/src/ae.c)（事件循环）和[anet.c](https://github.com/antirez/redis/blob/unstable/src/anet.c)（网络）中找到大部分相关的源代码。

当客户端和服务器托管在同一个机器上时，您可以使用 unix 域套接字来提高 Redis 往返的性能。这取决于您的工作负载，但 unix 域套接字相对于 TCP 套接字的性能优势（在吞吐量方面）通常约为 1.5（即，使用 unix 域套接字时，您可以多处理 50% 的操作）。

# sublimetext2 - 来自 github 的 Git 克隆

> ID：14320652
> 
> 赞同：2
> 
> 时间：2013-01-14T14:48:37.670
> 
> 标签：sublimetext2

如果我想在 Sublime Text 2 中安装一个包，我可以使用 Package Control 插件。但是假设我想安装一个无法通过这种方式获得的包。

我被告知从 github 'git clone' 并且命令行被有用地包括在内，例如：

git clone [https://github.com/mpmont/ci-snippets.git](https://github.com/mpmont/ci-snippets.git) ci-snippets

但我找不到如何使用它的解释。我尝试将其粘贴到控制台中，但只是得到“语法错误”

我正在使用 Windows 7。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:53:53.247

你必须先[安装 git](http://code.google.com/p/msysgit/)。

安装 (msys)git 后，打开 Windows 资源管理器，右键单击目标文件夹并选择“Git Bash”。在这个外壳中，您可以使用

```
git clone https://github.com/mpmont/ci-snippets.git ci-snippets 
```

克隆存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:09:53.020

意识到您可能只是在克隆，但您也可以将存储库添加到包控制，然后通过它安装它。

要通过包控制添加存储库，请打开命令面板并输入`Package Control: Add Repository`. 然后输入网址。请注意，此 URL 不应包含`.git`扩展名。然后，您可以像安装任何其他包一样通过包控制安装包。当然，克隆也可以，但只是想如果你不想担心做所有 git 的事情，我会把它扔在那里。

# scala - 私有类的伴生对象：为什么它无效？

> ID：14320653
> 
> 赞同：20
> 
> 时间：2013-01-14T14:48:38.370
> 
> 标签：scala, types, companion-object

我需要两个可以访问彼此私人的实例。我自然想到了一个伴生对象，它允许访问它的伴生类的唯一实例。我将类本身设为私有，因此用户不能只使用`new`.

```
object A {
    def apply = dual
    lazy val dual = new A
}

private class A {
    //some irrelevant logic...
} 
```

此代码无法编译。我明白了：**A 类作为 A 类**错误的一部分逃脱了它的定义范围，我不太明白。我目前的解决方法是在类应该具有的每个方法声明中定义一个特征，并`class A`扩展该特征，而*dual*是特征类型，而不是`class A`类型。

我在这里缺少什么理论问题？为什么这是禁止的？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-14T15:11:45.883

Paolo 的解决方案很好 (+1)，但他没有解释错误信息，所以让我试试。问题源于每个方法都需要返回类型这一事实。您的原始定义`apply`并`dual`返回了一个对象`class A`，因此两者的隐式返回类型都是`A`。这意味着`A`必须对客户可见——他们还能如何调用函数或访问`val`? 此外，由于两者——以及它们的父对象——都是公共的，它们是全局可见的。但是，您声明`A private`这意味着它不能在其包外可见。因此存在编译器无法解决的冲突。

一般规则是函数/成员的所有参数和返回类型必须（至少）与引用成员本身具有相同的可见性范围*。因此，解决此问题的一种简单方法是降低 和 的可见`apply`性。这会满足编译器，但不是你:-)`dual``private`

您的解决方案通过将静态返回类型更改为`public`特征来解决问题，因此与引用它的成员具有相同的可见性。返回对象的动态类型仍然是`class A`，但是，这不需要对客户端可见。[这是“程序到接口，而不是实现”](https://stackoverflow.com/questions/2697783/what-does-program-to-interfaces-not-implementations-mean)原则的经典示例。

请注意，要完全应用此原则，可以`class A`变成 的`private`内部类`object A`，从而使其即使对于同一包中的其他类也无法访问：

```
trait A {
    //...
}

object A {
    def apply: A = dual
    lazy val dual: A = new AImpl

    private class AImpl extends A {
        //some irrelevant logic...
    }

} 
```

*[为了迂腐，封闭的类/对象可能会降低其成员的可见性，如下所示：]

```
private class Holder {
  def member = new Hidden
}

private class Hidden 
```

[where `member`is`public`但它的封闭类 is `private`，有效地将其成员隐藏在外部世界之外。所以编译器在这里不会发出任何抱怨。]

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-14T14:51:30.330

我认为您不想要一个私有类，而是一个具有私有构造函数的类。

```
class A private() 
object A {
    def apply = dual
    lazy val dual = new A
} 
```

现在你的类对外部代码是“可见的”，但只有你的伴生对象可以创建它的实例。

# macos - Perl：如何使用 UTF8 可靠地 shell_quote 文件名

> ID：14320655
> 
> 赞同：1
> 
> 时间：2013-01-14T14:48:42.497
> 
> 标签：macos, perl

我需要检查一些可能存在的文件

*   名称中包含空格
*   在其名称中包含非 ASCII（例如，元音变音符号）

由于我使用的空格`String::ShellQuote`。但是，在 OSX 上执行时，这似乎不适用于 Umlauts（尚不了解其他操作系统）：

```
 # vim: ft=perl fenc=utf8
    # perl 5, version 12, subversion 4 (v5.12.4) built for darwin-thread-multi-2level

    use strict;
    use warnings;
    use String::ShellQuote;

    my @files = map {$_, shell_quote($_)} ("AOU.tmp", "ÄÖÜ.tmp", "A OU.tmp", "Ä ÖU.tmp");
    foreach my $file ( @files, ) {
        print "$file:\t";
        `touch $file`;
        print "created, " if( !$? ) ;
        print "EXISTS (says Perl), " if( -e $file );
        `ls -1 $file >/dev/null`;
        print "EXISTS (says ls), " if( !$? );
        print "\n";
    } 
```

输出：

```
 OU.tmp:     created, EXISTS (says Perl), EXISTS (says ls), 
    AOU.tmp:    created, EXISTS (says Perl), EXISTS (says ls), 
    ÄÖÜ.tmp:    created, EXISTS (says Perl), EXISTS (says ls), 
    'ÄÖÜ.tmp':  created, EXISTS (says ls), 
    A OU.tmp:   created, EXISTS (says Perl), EXISTS (says ls), 
    'A OU.tmp': created, EXISTS (says ls), 
    Ä ÖU.tmp:   created, EXISTS (says Perl), EXISTS (says ls), 
    'Ä ÖU.tmp': created, EXISTS (says ls), 
```

**问题：如何可靠地 shell_quote 可能包含扩展字符的文件名？**

*旁注：我认为这是非常好的 OS-X 典型 UTF8 规范化问题之一（变音符号的预组合与分解编码）。尽管如此，我认为`String::ShellQuote`应该能够处理它。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T15:23:26.840

据我所知，这些错误都是你的。

让我们运行一下 for 的两个循环`A OU.tmp`：

首先，不带引号的形式。

1.  你打印`A OU.tmp`
2.  你跑`touch A OU.tmp`。这会创建（或更新）两个文件`A`和`OU.tmp`
3.  触摸运行成功，所以你打印“created”，
4.  你检查`-e "A OU.tmp"`。没有这样的文件（我相信你错误地转录了你的输出，因为当我粘贴为 darwin-thread 构建的运行 perl 5、版本 12、subversion 4 (v5.12.4) 的代码时，这不是我得到的 -多2级）
5.  你跑`ls A OU.tmp`。这大致相当于运行`ls A && ls OU.tmp`。这两个文件都存在，因此命令成功。
6.  由于它有效，您打印“EXISTS (says ls),”

下一次循环时，Shell_Quote 使`$file`等于`'A OU.tmp'`

1.  你打印`'A OU.tmp'`
2.  你跑`touch 'A OU.tmp'`。这将创建（或更新）单个文件，命名为`A OU.tmp`（因为引用了空格）
3.  触摸运行成功，所以你打印“created”，
4.  你检查`-e "'A OU.tmp'"` 没有这样的文件。有一个名为 的文件`A OU.tmp`，但没有名为 的文件`'A OU.tmp'`是您要求 Perl 查找的文件。（Perl 不是你的 shell，所以如果你给 Perl shell 引用的东西，它不会像 shell 那样解释它们。
5.  你跑`ls 'A OU.tmp'`。这将检查名称中有空格的单个文件，该文件存在，因此命令成功。
6.  由于它有效，您打印“EXISTS (says ls),”

中心问题似乎是您将 Perl 视为外壳上的薄层。您通常应该选择在 Perl*或*shell 中*处理文件。*

在 Perl 中：

```
# do not use Shell_Quote
foreach my $file ( @files, ) {
    open my $FH, ">>$file" or die;
    close $FH;
    print "yep!" if (-e $file);
} 
```

在 shell 中（通过 Perl）：

```
# use only Shell_Quote
foreach my $file ( @files, ) {
    `touch $file`;
    print "yes!" if (`ls $file`);
} 
```

# ios - 将自定义 UIView 中的 UITextField/UITableView 的委托设置为管理 ViewController

> ID：14320661
> 
> 赞同：1
> 
> 时间：2013-01-14T14:48:52.203
> 
> 标签：ios, uiview, delegates

我有一个`CustomView` `UIView`代表我的类，我`screenUI`在其中以编程方式创建和定位 UI 元素，其中有多个 UITextField 和一个 UITableView。我还有一个`UIViewController`在它的 loadView 中，我将我的 CustomView 分配给 self.view。

我这样做是为了最好地保持视图和控制器的凝聚力。

我的问题是如何将 CustomView 内的 and 的委托设置为管理`UITextFields`的？`UITableView``UIViewController`

我的理解是`UITextFieldDelegate`所有其他协议方法应该在控制器而不是视图中实现，但我想避免在视图控制器中设置项目的委托（例如`textField1.delegate = self`，在`UIViewController`类中而不是`textField1.delegate = <value`将 UIViewController 设置为委托> 在我的`CustomView`课堂上）以保持我的代码更干净。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:07:23.790

您可以`delegate`在自定义视图上有一个属性：

```
customView.delegate = self;
self.view = customView; 
```

在委托设置器中，您可以转发职责：

```
-(void) setDelegate:(id<*the protocols you need*>) del
{
     _textField.delegate = del;
     ...
} 
```

您的自定义视图上可以有超过一种类型的委托，这取决于您的需要，但实现所有协议的一种通常就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T14:53:20.270

我可能只会转发它们。在自定义视图上创建代表代表的属性。然后在 loadView 中将它们设置为 self.

```
// CustomView.h
@property (nonatomic, weak) id <UITextFieldDelegate> textFieldDelegate;
@property (nonatomic, weak) id <UITableViewDatasource> tableViewDataSource;
@property (nonatomic, weak) id <UITableViewDelegate> tableViewDelegate;

// Create textField
textField.delegate = self.textFieldDelegate;

// in ViewController
- (void)loadView
{
    CustomView *view = //...
    view.textFieldDelegate = self;
} 
```

# android - ANDROID - 活动更改时连接不保留

> ID：14320662
> 
> 赞同：0
> 
> 时间：2013-01-14T14:48:53.620
> 
> 标签：android, url, http-get

我正在开发一个登录到 tomcat 服务器的应用程序。我正在使用 HTTP GET 请求来执行此操作，并且在成功连接后，消息将通过缓冲流显示。

以下代码，用于连接。

```
public String getInternetData() throws Exception {

BufferedReader in = null;
String data = null;

try {
    HttpClient client = new DefaultHttpClient();
    client.getConnectionManager().getSchemeRegistry().register(getMockedScheme());
    URI website = new URI("https://ts.rks.com:8443/kss/login?username=hydm&password=pw1234"); 
    HttpGet request = new HttpGet();
    request.setURI(website);
    HttpResponse response = client.execute(request);
    response.getStatusLine().getStatusCode();

    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    StringBuffer sb = new StringBuffer("");
    String l = "";
    String nl = System.getProperty("line.separator");
    while ((l = in.readLine()) != null) {
        sb.append(l + nl);
    }
    in.close();
    data = sb.toString();
    return data;
} finally {
    if (in != null) {
        try {
            in.close();
            return data;
        } catch (Exception e) {
            Log.e("GetMethodLogin", e.getMessage());
        }
    }
} 
```

这是用户通过登录活动登录时激活的代码。当我返回菜单屏幕并尝试运行另一个需要用户登录的活动时，它说用户未登录。

当用户离开活动时连接是否断开，或者我没有正确建立连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:38:49.060

The connection will not persist when the activity is moved to the background. I cannot tell from your posted code, but I believe you should be using an AsyncTask for this connection. This is coming from my experience pulling HTML source from a link.

This question may answer yours: [What to do with AsyncTask in onPause()?](https://stackoverflow.com/questions/1875670/what-to-do-with-asynctask-in-onpause)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:54:20.993

实际上，您需要更改两件事，而不仅仅是一件事。

任何需要在活动之间保持持久性的事情都应该在服务中完成，而不是在活动的代码中。

其次，在最近的 Android 版本中，所有联网都必须从后台线程完成，而不是 UI 线程（一直建议不要使用 UI 线程联网，但现在它会触发异常）。只是将代码放在服务中并不意味着它在另一个线程中。

所以答案是您应该使用其中一种后台线程机制来执行此操作，并在服务中执行此操作。

# c++ - 在 MFC 计算器应用程序中连接 CString 时遇到问题

> ID：14320663
> 
> 赞同：1
> 
> 时间：2013-01-14T14:48:53.833
> 
> 标签：c++, mfc, concatenation, cstring, editcontrol

```
void CcalculatorDlg::OnBnClickedButton1()
{
    CString grabData = _T("");
    m_display.GetLine(0,grabData.GetBuffer(10),10);
    grabData += _T("1");
    m_display.SetWindowTextW(grabData.GetBuffer());
    grabData.ReleaseBuffer();

} 
```

我正在尝试使用 MFC 制作一个基本的计算器应用程序，但在输入数字时遇到了一些问题。

以上是按下“1”按钮时的代码。我希望它读取显示控件中已经显示的内容，然后像真正的计算器一样在其末尾添加一个 1。但是我就是无法让它工作。

基本上第一个按钮按下它可以工作并将空白显示（编辑控件）更改为 1。但随后连续按下不会继续添加 1，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:28:08.567

我认为您的代码中的问题是您在调用*之后*但*在*调用之前尝试修改字符串（连接`_T("1")`）。此外，你有不平衡的/电话。*`GetBuffer()`*`ReleaseBuffer()``GetBuffer()``ReleaseBuffer()`**

 **假设这`m_display`是一个`CEdit`实例，您可以尝试这样的代码（对我有用）：

```
void CcalculatorDlg::OnBnClickedButton1()
{
    // Get current text from edit control
    // (assume a single-line edit control)
    CString grabData;
    m_display.GetWindowText(grabData);

    // Concatenate "1"
    grabData += L'1';

    // Update edit control text
    m_display.SetWindowText(grabData);
} 
```

如果您有一个多行编辑控件并且您想使用 获取第一（最上面的）行`CEdit::GetLine()`，您可以使用这样的代码（请注意，[根据 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761584%28v=vs.85%29.aspx)，`EM_GETLINE`不会-`NUL`终止复制的行，所以您有将行长显式指定为`ReleaseBuffer()`）：

```
//
// Read first line from edit control
//

CString grabData;
static const int kMaxBufferLength = 80;
wchar_t* buffer = grabData.GetBuffer(kMaxBufferLength + 1);
//   Note '+ 1' for NUL string terminator (it seems that EM_GETLINE, which is
//   wrapped by CEdit::GetLine(), doesn't NUL-terminate the returned string).

const int grabDataLength = m_display.GetLine(0, buffer, kMaxBufferLength);
grabData.ReleaseBuffer(grabDataLength);

// *After* calling ReleaseBuffer(), you can modify the string, e.g.:
grabData += L'1'; // concatenate "1" 
```**

# vb.net - 使用定时器对应用程序有负面影响吗？

> ID：14320666
> 
> 赞同：11
> 
> 时间：2013-01-14T14:49:16.383
> 
> 标签：vb.net

我想知道该[`Timer`](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)组件以及由于它的使用或其使用的多个实例而产生的负面影响（如果有的话）。在实践中，一次应该在一个项目中使用多少个计时器是否应该有限制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-14T15:41:50.573

好吧，一切都是相对的，但 System.Windows.Forms.Timer 是一个非常昂贵的对象。它通过创建一个隐藏窗口来工作，这是使底层 winapi SetTimer() 函数工作所需的。这个窗口不是共享的，每个定时器对象都有自己的窗口。窗口通常是更昂贵的操作系统对象之一。

所以一个非常硬的上限是你不能拥有超过 10,000 个启用的计时器。Windows 拒绝允许应用程序创建那么多窗口。考虑到在一个桌面会话中运行的所有进程的所有窗口都需要共享一个公共堆，您应该远离该限制。或者换句话说，创建很多窗口但保持在 10,000 个配额以下会对其他进程产生负面影响，当堆用完时可能会使它们失败。

我想说一个合理的上限徘徊在 100 左右。假设所有这些计时器都有不同的 Tick 事件处理程序，那么通常需要跟踪大量移动部件。如果他们不这样做，那么您应该以不同的方式解决这个问题，您只需要*一个*计时器来测量*任意*数量的间隔。与您在手腕上佩戴一块手表进行约会的方式大致相同。为此，您可以将到期时间存储在 SortedList 中，并仅为第一个到期时间启动计时器。当它滴答作响时，处理列表中到期时间已过的条目并重复。添加或删除到期时间时，请停止计时器并在有新的第一个到期时间时重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:41:14.967

我假设你的意思是winforms计时器对象所以，

从文档：

> Timer 用于以用户定义的时间间隔引发事件。此 Windows 计时器专为使用 UI 线程执行处理的单线程环境而设计。它要求用户代码具有可用的 UI 消息泵，并且始终从同一个线程操作，或者将调用编组到另一个线程。
> 
> 使用此计时器时，使用 Tick 事件执行轮询操作或在指定时间段内显示启动画面。只要 Enabled 属性设置为 true 并且 Interval 属性大于零，就会根据 Interval 属性设置每隔一段时间引发 Tick 事件。

因此，如果您开始使用计时器打包您的应用程序，那么逐行阅读该代码，您很快就会为 UI 渲染时间竞速间隔事件。

例如：您有一个时钟应用程序，它使用计时器来运行时钟。每隔 1 秒，您就会让应用程序渲染双手。

在这个应用程序中，您还可以让用户根据需要定义任意数量的“警报”。每个人都会创建一个新的计时器，该计时器将在设定的时间触发。这些警报也可以是循环的。也就是说，您允许用户设置每 x 秒响一次的“警报”。

现在假设用户有一个长时间运行的任务（访问数据库、网络资源、将 PI 计算到 1500 个字符等），该任务发生在周期性警报上。现在假设用户有 10 个长时间运行的任务需要按顺序执行，并且需要以 3 4 和 5 秒的间隔发生。

这些计时器的行为不适用于此应用程序，因为会发生以下情况：

*   时钟将在“警报”执行期间停止渲染
*   警报可能会相互重叠，因此它们会排队但不会在它们应该发生的时候发生，因为 UI 线程正在同步处理所有消息。
*   您最终会得到一个无响应的 UI，它不能满足您的需求。

因此，尽我所能回答您的实际问题；不一定需要限制计时器的数量，只需考虑它们触发的时间间隔以及处理事件处理程序所需的时间。

如果您使用计时器来触发单独的处理线程，这些线程最终将返回到 UI 线程并进行更改，那么在您遇到目标性能的上限之前，没有可行的限制机器。也就是说，在某些时候，定时器的数量可能会很大，以至于您正在调用更多的定时器事件并将消息队列阻塞到表单呈现受到影响的程度。

简而言之：

负面影响：

*   计时器在 UI 线程中运行，因此它们处于阻塞状态
*   如果您的时间间隔短于处理事件处理程序所需的时间，它们可能会出现意外行为。

在实践中，您唯一需要限制计时器的使用，就像用户无法控制的任何组件一样，是它们是否开始影响用户体验。

我希望这比我写它时的感觉要少得多。

# python - 自动打印下载的文件

> ID：14320668
> 
> 赞同：2
> 
> 时间：2013-01-14T14:49:21.843
> 
> 标签：python, web, printing, openerp

我有一个小难题；我正在开发一种使用 python 作为控制器的网络销售点应用程序。我需要一种将浏览器生成并下载的一系列 PDF 文件自动打印到默认物理打印机的方法。我假设我的大多数 POS 终端都可以在 Windows 上运行，但我的应用程序服务器是在 Ubuntu Server 平台上设计的。有任何想法吗？

PS：这是一个作为 OPENERP 应用程序开发的模块

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:11:30.523

您可以将 JavaScript 嵌入到可以打印的 PDF 中。我不确定您是否可以在下载文件后打印文件，或者只有在浏览器中打开 PDF 时才能打印。

[在这里](https://stackoverflow.com/questions/7074070/how-to-send-a-pdf-file-directly-to-the-printer-using-javascript)和[这里](https://stackoverflow.com/questions/7074070/how-to-send-a-pdf-file-directly-to-the-printer-using-javascript)您可以找到更多信息。它还取决于您使用的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:01:49.220

另一种解决方案可能是将浏览器配置为将文件下载到某个位置。python 脚本可以监视该目录并在文件出现时打印它们。

有关使用 Python 从 Windows 打印 PDF 的信息，请参阅此问题：[在 Python 中静默打印 PDF](https://stackoverflow.com/questions/4498099/silent-printing-of-a-pdf-in-python)

# elasticsearch - Elasticsearch 分析器仅在我指定搜索字段时使用

> ID：14320669
> 
> 赞同：0
> 
> 时间：2013-01-14T14:49:24.880
> 
> 标签：elasticsearch, analyzer

我有一个名为`autocomplete_analyser`defined on a field的分析器`name`。当我运行查询

```
http://localhost:9200/courses/course/_search?q=name:dav&pretty=true 
```

它运行分析器并返回正确的结果。当我跑

```
http://localhost:9200/courses/course/_search?q=dav&pretty=true 
```

它不是。

如何让 ES 在不指定要搜索的字段的情况下运行分析器？我需要在多个字段中使用此分析器，因此我可以搜索所有字段很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:09:42.237

默认情况下，queryString 查询应用于具有自己分析器的 _all 字段。

您可以使用 Put Mapping API 为 _all 字段定义您的特定分析器。

它有帮助吗？

# shell - 重定向输出到文件

> ID：14320671
> 
> 赞同：0
> 
> 时间：2013-01-14T14:49:34.977
> 
> 标签：shell, awk

cat sun.csv 如下“文件列表| 这里是|ls -l” 我能够获得输出但无法将其重定向到文件（ieasd.csv） 如何重定向完整的输出？这是代码 a.sh（文件名）

```
#/usr/bin/ksh
awk ' BEGIN{FS="|"} {printf "\033[4m%s:\n\033[0m", $1;print $2;system($3);} ' sun.csv >> asd.csv

$./a.sh 
```

cat asd.csv 一直有正确的输出`printf "\033[4m%s:\n\033[0m", $1;print $2;`，之后什么也没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:06:54.993

你需要这样做：

```
$3 | getline var; print var; close($3) 
```

代替

```
system($3) 
```

但我不建议做任何一个。如果您告诉我们您要做什么，我们可能会提供帮助。

# jquery - 使用 jQuery 选择单选按钮时显示文本块

> ID：14320682
> 
> 赞同：1
> 
> 时间：2013-01-14T14:50:33.450
> 
> 标签：jquery, radio-button, onchange

我对 jQuery 和两个单选按钮有一个小挑战。我喜欢在选择单选按钮时显示一个文本块，并在选择另一个单选按钮时隐藏相同的文本块。初始状态是不显示文本块。

我有以下 HTML 代码：

```
<span class="radiogroupline"><input type="radio" name="feedback" id="Ja" value="Ja">
<label for="Ja">Ja</label></span>
<span class="radiogroupline"><input type="radio" name="feedback" id="Nee"   class="feedback" value="Nee">
<label for="Nee">Nee</label></span>
<div class="text-feedback hidden">Dynamisch textblok</div> 
```

我写了以下 jQuery：

```
$('input[name="feedback"]').on("change", function() {
    $('.text-feedback').removeClass('hidden');
}); 
```

现在的挑战是完成如何在选择第二个单选按钮时仅显示文本块并在选择第一个单选按钮时隐藏...希望有人可以帮助我吗？

干杯，凯西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:54:47.573

尝试这个：

```
$('input[name="feedback"]').on("change", function() {
    if ($(this).val() == 'Nee') {
        $('.text-feedback').removeClass('hidden');
    }
    else {
        $('.text-feedback').addClass('hidden');
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/nKYw9/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:55:58.147

由于您有两个元素的单个事件处理程序，因此您需要识别它们并将条件设置为在一个元素单击时显示并在其他元素单击时隐藏。

**[现场演示](http://jsfiddle.net/CtYR5/)**

```
$('input[name="feedback"]').on("change", function(event) {
    if(event.target.id == 'Ja')      
    $('.text-feedback').removeClass('hidden');
    else
    $('.text-feedback').addClass('hidden');

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T14:59:49.473

看到这个：http: [//jsfiddle.net/223PN/1/](http://jsfiddle.net/223PN/1/)

```
<span class="radiogroupline"><input type="radio" name="feedback"   id="Ja" value="Ja" >
<label for="Ja" >Ja</label></span>
<span class="radiogroupline"><input type="radio" name="feedback" id="Nee"   class="feedback" value="Nee" checked>
<label for="Nee">Nee</label></span>
<div class="text-feedback hidden">Dynamisch textblok</div> 
```

jQuery：

```
$('input[name="feedback"]').on("change", function() {
  $('.text-feedback').fadeToggle();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T14:55:11.323

```
$('input[name="feedback"]').on("change", function() {
  if $('input[name="feedback"]').val()=='Ja'
  {
    $('.text-feedback').css('display','block');
  } else {
    $('.text-feedback').css('display','none');
  }
}); 
```

作为记录，如果隐藏的类除了将显示设置为无并且不仅在这种情况下使用之外，其他答案在上下文中也是有意义的。如果它没有从 CSS 中丢失，并且按照我的布局控制显示。

# android - 跨多个设备的不同加速度计值

> ID：14320685
> 
> 赞同：4
> 
> 时间：2013-01-14T14:50:38.580
> 
> 标签：android, accelerometer

我正在制作一个使用设备的加速度计填充进度条的游戏。在我的 Note 2 上，上下晃动手机大约需要 20 秒才能填满条形图，但我在 ZTE Blade 上试了一下，花了 4 秒。

有没有办法在我的代码中校准加速度计？这就是我正在做的事情：

```
@Override
public void onSensorChanged(SensorEvent event) {

        float x = event.values[0];
        float y = event.values[1];
        float z = event.values[2];
        if (!mInitialized) {
            mLastX = x;
            mLastY = y;
            mLastZ = z;
            mInitialized = true;
        } else {
            float deltaX = Math.abs(mLastX - x);
            float deltaY = Math.abs(mLastY - y);
            float deltaZ = Math.abs(mLastZ - z);
            if (deltaX < NOISE) deltaX = (float)0.0;
            if (deltaY < NOISE) deltaY = (float)0.0;
            if (deltaZ < NOISE) deltaZ = (float)0.0;
            mLastX = x;
            mLastY = y;
            mLastZ = z;

            if(deltaY == 0){
                return;
            }

            sProgress += deltaY;
            pb.setProgress(sProgress);

        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:15:59.913

问题可能与加速度计的频率有关。注册时不要使用以下 android 常量。

```
mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL); 
```

这些值对于不同的设备是不同的。

```
int SENSOR_DELAY_FASTEST    get sensor data as fast as possible
int SENSOR_DELAY_GAME   rate suitable for games
int SENSOR_DELAY_NORMAL rate (default) suitable for screen orientation changes
int SENSOR_DELAY_UI rate suitable for the user interface 
```

使用以微秒为单位的硬编码值，例如频率 1 Hz

```
mSensorManager.registerListener(this, mAccelerometer,1000000); 
```

希望它解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T20:03:27.520

使频率相等的另一种解决方案类似于以下解决方案。

```
@Override
public void onSensorChanged(SensorEvent sensorEvent) {
  if(sensorEventTooQuick(sensorEvent.timestamp)) {
    return;
  }

  mLastSensorEventTime = sensorEvent.timestamp;

  // process sensor
}

private boolean sensorEventTooQuick(long sensorTime) {
  long diff = sensorTime - mLastSensorEventTime;
  return diff < MINIMUM_SENSOR_EVENT_GAP;
} 
```

需要考虑的事项：

*   您要确保选择的 MINIMUM_SENSOR_EVENT_GAP 足够小，不会丢失信息。加速度计非常快，因此这通常不是问题，但根据应用程序的不同，其他传感器可能会出现问题。
*   确保在不同设备上测试不同的值。

我这样做是因为它保证您接收事件的速度不会超过您的限制。

# vb.net - 如何在 VB.Net 中控制 DateTimePicker 的 ShowUpDown

> ID：14320687
> 
> 赞同：0
> 
> 时间：2013-01-14T14:50:47.163
> 
> 标签：vb.net, datetimepicker

我的表单中有两个 DateTimePicker 对象，

“hh : mm tt”的自定义格式

ShowUpDown = 真

前任。

```
Time : 12:00 
```

当我按向上键时，我想将分钟值增加到 +30

```
Time : 12:30 PM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:20:26.560

使用事件

```
DataTimePicket.KeyDown 
```

样品用法：

**VB.NET**

```
Private Sub Form1_Load(sender As Object, e As EventArgs)

    dateTimePicker1.KeyDown += DateTimePicker1OnKeyUp

End Sub

Private Sub DateTimePicker1OnKeyUp(sender As Object, e As KeyEventArgs)
    If e.KeyValue = 38 Then
        ' up
        dateTimePicker1.Value = dateTimePicker1.Value.AddSeconds(30)
        e.SuppressKeyPress = True
    ElseIf e.KeyValue = 40 Then
        'down
        dateTimePicker1.Value = dateTimePicker1.Value.AddSeconds(-30)
        e.SuppressKeyPress = True
    End If
End Sub 
```

**C＃**

```
 private void Form1_Load(object sender, EventArgs e)
    {

        dateTimePicker1.KeyDown += DateTimePicker1OnKeyUp;

    }

    private void DateTimePicker1OnKeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyValue == 38) // up
        {
            dateTimePicker1.Value = dateTimePicker1.Value.AddSeconds(30);
            e.SuppressKeyPress = true;
        }
        else if (e.KeyValue == 40) //down
        {
            dateTimePicker1.Value = dateTimePicker1.Value.AddSeconds(-30);
            e.SuppressKeyPress = true;
        }
    } 
```

# asp.net-mvc - ASP.NET MVC 代码优先

> ID：14320689
> 
> 赞同：0
> 
> 时间：2013-01-14T14:50:48.803
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

在没有预先存在的数据库的情况下从头开始构建 MVC 应用程序时，使用代码优先方法是最好的方法吗？虽然大多数应用程序都是以数据库为中心的，但可能是模式而不是数据库本身决定了应用程序是如何围绕它构建的。因此，我认为代码优先的方法还不错。晚了（发生在数据库优先和模型优先之后），但我认为代码优先的方法很快就会成为常态。你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:04:10.040

首先，我认为此[链接](https://stackoverflow.com/questions/5797312/ef-model-first-or-code-first-approach)可以为您提供更多信息

在我看来，这两种方法都是有用的。在某些情况下，开发人员/公司需要决定该系统的最佳方法是什么。

我认为一个很好的区别是大而复杂的应用程序与小而简单的应用程序

我认为开发人员或公司在构建复杂的应用程序时会更喜欢“数据库优先”的方法。在大多数情况下，此类项目将需要 DBA。在这些情况下，该项目将包括存储过程/触发器，可能还包括一个数据仓库

另一方面，当您与一小群开发人员一起构建小型应用程序时，您可能更喜欢使用“代码优先”方法

这又是我的看法……

# c#-4.0 - System.Timers.Timer Elapsed 事件在 Windows 服务中多次触发

> ID：14320691
> 
> 赞同：2
> 
> 时间：2013-01-14T14:50:49.677
> 
> 标签：c#-4.0, timer, windows-services

我正在使用带有计时器的 Windows 服务来安排每个时间间隔的作业。似乎 timer elapsed 事件被触发了不止一次。

这是一个代码示例：

```
private static System.Timers.Timer _timer = new System.Timers.Timer();

protected override void OnStart(string[] args)
{
      _timer.Elapsed += new System.Timers.ElapsedEventHandler(OnTimedEvent);
      _timer.Interval = 1000;
      _timer.Enabled = true;
      _timer.Start();
}

private void OnTimedEvent(object source, System.Timers.ElapsedEventArgs e)
{
      _timer.Enabled = false;
      _timer.Stop();

      //Do the job

      _timer.Enabled = true;
      _timer.Start();
} 
```

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T14:55:02.230

> 引发 Elapsed 事件的信号总是排队等待在 ThreadPool 线程上执行，因此事件处理方法可能在一个线程上运行，同时对 Stop 方法的调用在另一个线程上运行。这可能会导致在调用 Stop 方法后引发 Elapsed 事件。下一节中的代码示例显示了一种解决这种竞争条件的方法。

引用自：[Timer.Stop 方法](http://msdn.microsoft.com/en-us/library/system.timers.timer.stop.aspx)。请参阅页面上的代码示例。

# ios - ios 音频队列 - 如何测量缓冲区中的音频电平？

> ID：14320698
> 
> 赞同：0
> 
> 时间：2013-01-14T14:51:16.433
> 
> 标签：ios, objective-c, buffer, audioqueueservices, metering

我正在开发一个应该进行一些音频信号处理的应用程序。我需要测量我获得的每个缓冲区中的音频电平（通过回调函数）。我在网上搜索了一段时间，发现有一个内置的属性叫做电流电平表：

```
AudioQueueGetProperty(recordState->queue,kAudioQueueProperty_CurrentLevelMeter,meters,&dlen); 
```

这个属性让我得到平均或峰值音频电平，但它不同步到当前缓冲区。我发现我需要自己从缓冲区数据中计算音频电平，所以我有这个：

```
double calcAudioRMS (SInt16 * audioData, int numOfSamples)
{
double RMS, adPercent;
RMS = 0;

for (int i=0; i<numOfSamples; i++)
{
    adPercent=audioData[i]/32768.0f;
    RMS += adPercent*adPercent;
}
RMS = sqrt(RMS / numOfSamples);
return RMS;
} 
```

此函数获取音频数据（转换为 Sint16）和当前缓冲区中的样本数。我得到的数字确实介于 0 和 1 之间，但与我从内置音频电平表中得到的数字相比，它们似乎相当随机且低。

录制音频格式为：

```
format->mSampleRate = 8000.0;
format->mFormatID = kAudioFormatLinearPCM; 
format->mFramesPerPacket = 1;
format->mChannelsPerFrame = 1;
format->mBytesPerFrame = 2;
format->mBytesPerPacket = 2;
format->mBitsPerChannel = 16;
format->mReserved = 0;
format->mFormatFlags = kLinearPCMFormatFlagIsSignedInteger |kLinearPCMFormatFlagIsPacked; 
```

我的问题是如何从缓冲区中获取正确的值？是否有为此的内置函数 \ 属性？或者我应该自己计算音频电平，以及如何计算？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:51:41.140

您对 RMS 功率的计算是正确的。我倾向于说你的样本数量比苹果少，或者类似的东西，这可以解释差异。您可以通过输入一个响亮的正弦波来检查，并检查 Apple（和您）是否以 1/sqrt(2) 计算 RMS 功率。

除非有充分的理由，否则我会使用 Apple 的功率计算。我用过它们，它们对我来说似乎很好。此外，通常您不需要 RMS 功率，您希望 RMS 功率为分贝，或使用`kAudioQueueProperty_CurrentLevelMeterDB`常数。（这取决于您是尝试构建音频表，还是真正显示音频功率）

# java - 包含对象到 JSON 的映射的对象的编组列表

> ID：14320699
> 
> 赞同：0
> 
> 时间：2013-01-14T14:51:18.090
> 
> 标签：java, json, jackson

我有这个对象结构，我试图用 Jackson 注释它以编组/解组到 JSON 文件。

```
public class A {
    List<B> bList;
}

public class B {
    String attr;
    Map<String, C> map;
}

public class C {
    @JsonIgnore
    String name;
    String value;
} 
```

`A`有一个 's 的列表`B`和`B`一个 's 的映射，`C`其中映射的键是 的`name`属性`C`。如果可能的话，我希望 JSON 看起来像这样：

```
{
    "bList" : [
               {
                   "attr":"itsValue"
                   "KEY_IN_MAP":"VALUE_IN_C",
                   "KEY_2_IN_MAP":"VALUE_2_IN_C"
               }
               ]
} 
```

where是's map中作为 key`KEY_IN_MAP`的 name，是 map中 value 对象的值。我尝试为地图注释 put 方法：`C``B``VALUE_IN_C`

```
@JsonAnySetter
private void put(String name, C value) {
    map.put(name, c);
} 
```

但是编组这给了我：

```
{
    "bList" : [
               {
                   "attr":"itsValue"
                   "KEY_IN_MAP": {
                       "value":"VALUE_IN_C",
                   },
                   "KEY_2_IN_MAP": {
                       "value":"VALUE_2_IN_C"
                   }
               }
               ]
} 
```

有没有办法用杰克逊或任何其他 JSON 序列化库获得上述映射？我的目标是摆脱`"value"`每次写入的冗余，尽可能压缩文件。

中的地图`B`可以变成一个列表，`C`但我仍然需要映射

```
{"name" : "value"} for each object C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:23:14.903

以下是我的一些建议：

1.  让你`Map<String,C>`成为一个`Map<String,String>`.
2.  你也可以让你`Map<String,C>`成为`List<C>`。

请查看讨论相同内容的[其他线程。](https://stackoverflow.com/questions/1900132/jax-rs-mapstring-string-to-json-without-the-overhead)

# dynamics-crm-2011 - 如何使用 QueryExpression 对象获取营销列表的成员？

> ID：14320701
> 
> 赞同：1
> 
> 时间：2013-01-14T14:51:26.850
> 
> 标签：dynamics-crm-2011, query-expressions

我经常使用*QueryExpression*，但到目前为止，它是一个直接的 get-this-from-that 或 put-this-in-that。最近，我了解到有一个叫做*LinkedEntity*的东西，我开始寻找它。作为一个例子，我受到 SO 上的一个相关问题的启发，我开始创建一个表达式来获取列表中的所有成员，因为它是 guid。

不过，我发现的所有示例都遵循相同的模式 - 正如[本示例](http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2009/05/04/retrieve-marketing-list-members.aspx)所示。从[这个问题](https://stackoverflow.com/questions/14315073/what-should-be-used-instead-of-the-deprecated-entityname-account-tostring)中，我了解到这是一种过时的方法（CRM 4.0）。我未能找到更新的示例，我不确定如何设计链接。

有人愿意提供示例代码吗？

```
Guid guid = ...;
QueryExpression request = new QueryExpression
{
  EntityName = "account",
  ColumnSet = new ColumnSet(true),
  LinkEntities= ???,                        // How to link the entities correctly?
  Criteria = new FilterExpression { ??? }   // How to filter for *guid* only?
}; 
```

我创建了一个链接两个实体的 fetch-XML，但我不清楚如何将其转换为*QueryExpression*实体。我有这样的东西。有什么建议么？

```
LinkEntity linkListToMember = new LinkEntity(
  "list", "listmember", "listid", "listid", JoinOperator.Natural);
LinkEntity linkMemberToContact = new LinkEntity(
  "listmember", "account", "entityid", "accountid", JoinOperator.Natural); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:25:47.960

链接实体用作您的 SQL 连接。使用带有 from 和 to 实体和属性名称的构造函数

```
public LinkEntity(
    string linkFromEntityName, // This is the Entity Logical Name of your Query Expression, or parent LinkEntity
    string linkToEntityName, // This is the Entity Logical Name of the entity you'd like to link to
    string linkFromAttributeName, // This is the attribute name on your from entity, containing your join key
    string linkToAttributeName, // This is the attribute name on your to entity, containing your join key
    JoinOperator joinOperator) // This is the type of Join you'd like to perform 
```

使用链接实体，您可以添加链接条件来过滤返回的结果。您还可以添加列并从相关实体返回数据。

## 编辑，康拉德答案的补充

如果 Konrad 列出的 52 行代码看起来过于冗长，这将使用[此处](https://stackoverflow.com/questions/10722307/why-does-linkentity-addlink-initialize-the-linkfromentityname-with-its-own-lin)定义的扩展方法在 15 行中完成相同的操作。

```
Guid guid = ...;
IOrganizationService service;

QueryExpression request = new QueryExpression("account")
{
  ColumnSet = new ColumnSet("name", "region"),
};
request.Criteria.AddCondition("name", ConditionOperator.NotNull);
request.Criteria.AddCondition("region", ConditionOperator.NotNull);

var listLink = request.AddLink("listmember", "accountid", "entityid").
  AddChildLink("list", "listid");

listLink.Columns.AddColumn("listname");
listLink.LinkCriteria.AddCondition("listid", ConditionOperator.Equal, guid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:20:42.630

这是获取营销列表所有成员的方法，前提是您有它的 guid 和服务器连接。您对条件所做的事情是正确的，**但**您需要将一个插入另一个。星期六我会在我的博客上放一个更大的描述。

```
Guid guid = ...;
IOrganizationService service;

QueryExpression request = new QueryExpression
{
  EntityName = "account",
  ColumnSet = new ColumnSet("name", "region"),
  LinkEntities =
  {
    new LinkEntity 
    { 
      JoinOperator = JoinOperator.Inner, 
      LinkFromEntityName = "account", 
      LinkFromAttributeName = "accountid", 
      LinkToEntityName = "listmember", 
      LinkToAttributeName = "entityid",
      LinkCriteria = { },
      LinkEntities =
      {
        new LinkEntity
        {
          JoinOperator = JoinOperator.Inner,
          Columns = new ColumnSet("listname"),
          EntityAlias = "MarketingList",
          LinkFromEntityName = "listmember",
          LinkFromAttributeName = "listid",
          LinkToEntityName = "list",
          LinkToAttributeName = "listid",
          LinkCriteria = { Conditions = 
          {
            new ConditionExpression("listid", ConditionOperator.Equal, guid) 
          } }
        }
      }
    } 
  },
  Criteria = new FilterExpression
  {
    Filters =
    {
      new FilterExpression
      {
        FilterOperator = LogicalOperator.And,
        Conditions =
        {
          new ConditionExpression("name", ConditionOperator.NotNull),
          new ConditionExpression("region", ConditionOperator.NotNull)
        }
      }
    }
  }
}; 
```

然后，当然你需要执行调用。

```
EntityCollection result = service.RetrieveMultiple(request); 
```

最后，您可能想要订购和构建您从服务器获得的任何内容。我正在使用以下 LINQ-to-Data 表达式。

```
IEnumerable<Member> output = result.Entities.Where(element 
  => Member.IsWellFormed(element)).Select(element
    => new Member(element)); 
```

有关该主题的更多信息，请参阅博客。

# java - 如何知道执行该类的用户有权更改系统时间？

> ID：14320706
> 
> 赞同：1
> 
> 时间：2013-01-14T14:51:35.823
> 
> 标签：java

如果执行 Java 类的用户具有更改系统时间所需的权限，我需要知道使用 Java。

我只需要一个布尔返回方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:04:17.187

这不是微不足道的。

在基于 Unix 的系统上，您可以检查当前用户是否具有该能力`CAP_SYS_TIME`，但没有标准方法可以从 Java 中检查这一点。

在 Windows 上，他们需要管理员权限，但我不知道确切的权限。与 Unix 一样，没有可用于检查的 Java API。

也许外部脚本/二进制文件可以进行检查。然后，您可以使用`ProcessBuilder`来执行此工具。

# cordova - Phonegap/Jquery 相机 API - 捕获图像

> ID：14320710
> 
> 赞同：0
> 
> 时间：2013-01-14T14:51:52.180
> 
> 标签：cordova, jquery-mobile, android-camera, data-url

这是我的第一个 phonegap 或 jquery 移动应用程序。我正在尝试制作一个简单的网络应用程序，它将使用本机功能来访问相机/捕获 api。

我找不到一段很好的示例代码来告诉我如何说出 DATA_URL 是什么 - 我只是保留此代码并生成 Data url，还是需要指向 SD 或 localStorage例子？

请注意，我正在将此应用程序构建为 Web 应用程序，使用 Dreamweaver cs6 中的 phonegap 构建。

phonegap 网站上的示例函数是：

```
function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
        destinationType: destinationType.DATA_URL });
    } 
```

该网站是 mobli-fi.co.uk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:10:12.143

**destinationType.DATA_URL**仅表示该文件将作为 base64 编码字符串返回。这将作为参数转发给成功的回调函数。

由于较新的手机可以生成较大的文件，因此建议使用 FILE_URI 选项。

```
Camera.DestinationType = {
    DATA_URL : 0,                // Return image as base64 encoded string
    FILE_URI : 1                 // Return image file URI
}; 
```

在这里您可以找到更多信息： http: [//docs.phonegap.com/en/1.2.0/phonegap_camera_camera.md.html#Camera](http://docs.phonegap.com/en/1.2.0/phonegap_camera_camera.md.html#Camera)。搜索相机选项。

例子：

```
navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 25, destinationType: 
    Camera.DestinationType.FILE_URI });

}

function onPhotoURISuccess(imageURI) {

} 
```

因为使用了**Camera.DestinationType.FILE_URI**，所以回调函数会收到一个 imageURI。**或者在DestinationType.DATA_URL**的情况下拍摄的图片的 BASE64 编码字符串表示。

# php - Graph API Feed 不返回任何内容（停止工作而无需更改代码）

> ID：14320715
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:52:00.493
> 
> 标签：php, facebook-graph-api

伙计们，我在查询 Graph API 以获取提要时遇到问题

我有以下查询：

```
me/feed?fields=message,comments.fields(comments,likes,from,id,message,user_likes,created_time,like_count),from,link,id,to,likes.fields(id),created_time,actions,feed_targeting&limit=40 
```

直到上周都运行良好......

今天它不起作用..也尝试过`me/feed/`，但仍然不起作用..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:04:33.467

1.  [使用Facebook 调试器](https://developers.facebook.com/tools/debug)检查您的访问令牌，确保它没有过期。
2.  [使用Facebook Graph Explorer](https://developers.facebook.com/tools/explorer)检查查询以确认查询本身是正确的并返回预期的结果。

# c# - 最佳实践：创建方法，不同的重载

> ID：14320717
> 
> 赞同：1
> 
> 时间：2013-01-14T14:52:09.580
> 
> 标签：c#, methods

例如，假设我们有一个方法，为了论证，我们将其称为 MethodOne；

```
public void MethodOne()
    {
      //do stuff. 
    } 
```

现在假设我们要创建一个可选的 peramater，并且我们可能决定创建另一个具有相同名称的方法，例如，它采用不同的重载；

```
public void MethodOne()
    {
       //do stuff.
    }

public void MethodOne(bool checkVar)
    {
       if(checkVar)
        {
           //do stuff
        }
       else
        {
          //do other stuff
        }
    } 
```

所以现在我们有了一个方法，它有两种不同的重载组合（？）。在实践中，这是否比使用一种方法更好，例如仅检查可选重载是否为空或包含信息；

```
 public void MethodOne(int? testVar)
     {
        if(testVar != null)
         { 
           //do stuff
         }
     } 
```

这可能看起来微不足道，只有一个重载，但想象一下我有 5 个要传递的变量，我会创建 5 个方法，不同重载的同名方法，还是只有一个方法并检查传递的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:58:23.883

有一些解决方法。例如，您可以使用一个枚举器和一个 Object 数组作为包含实际参数值的第二个参数，这样您就可以通过切换枚举器来知道如何处理数据……或者您可以只声明 5 个 Object 参数，然后检查它们的输入一个开关，将它们相应地装箱并继续。但这两种选择都是非常糟糕的做法。

我建议你坚持不同的重载：

```
public void MethodOne(Boolean value)
{
    // Process the value...
}

public void MethodOne(Int32 value)
{
    // Process the value...
}

public void MethodOne(Int32 value, String text)
{
    // Process the value and the text...
}

// And so on... 
```

或参数声明中的默认数据：

```
public void MethodOne(Int32 integer = 1, String text = "hello", ...)
{
    // Process everything inside the method...
} 
```

或参数化方法（如果每个对象类型都有共同的处理）：

```
public void MethodOne(params Object[] parameters)
{
    for (int i = 0; i < parameters.Length; ++i)
        // Check type of parameter and process the value...
} 
```

或者，如果您的设计允许，方法会冒泡（这是我最喜欢的方法，因为第一个方法只会产生大量代码冗余，而第二个方法有时可能会让您或与您一起工作的其他开发人员感到困惑）：

```
public void MethodOne(Int32 value)
{
    MethodOne(value, "hello");
}

public void MethodOne(Int32 value, String text)
{
    // Process everything inside the method...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T14:57:53.493

您可以做的是使用[可选参数](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：

```
 public void MethodOne(int testVar = 0)
 {
     if(testVar != 0)
     { 
       //do stuff
     }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T14:59:23.860

您通常会在这样的重载上冒泡：

```
public void MethodOne()
{
    MethodOne(1)
}
public void MethodOne(int testVar)
{
    MethodOne(testVar, "test")
}
public void MethodOne(int testVar, string testString)
{
    MethodOne(testVar, testString, null)
}
public void MethodOne(int testVar, string testString, object testObject)
{
    // Do your actual code here
} 
```

这相当于

```
public void MethodOne(int testVar = 1, string testString = "test", object testObject = null)
{
    // Do your actual code here
} 
```

但通常你应该避免重载默认参数。此外，通过像我的示例中那样“冒泡”，您可以避免冗余代码或冗余“默认参数”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T15:04:31.517

随着参数数量的增加，我不想查看方法的嵌套 if/else 逻辑来确定正在使用哪些参数。它很难阅读、理解、维护并且可能导致错误。使用重载并保持你的方法简洁、精益和可维护。

# windows-8 - 无法开始调试 - Visual Studio 2012

> ID：14320720
> 
> 赞同：10
> 
> 时间：2013-01-14T14:52:28.473
> 
> 标签：windows-8, visual-studio-2012, visual-studio-debugging

“无法开始调试 'C:\Windows\System32\WWAHost.exe'。Microsoft Visual Studio 远程调试监视器 (MSVSMON.EXE) 似乎没有在远程计算机上运行。这可能是因为防火墙阻止了通信到远程计算机。有关配置远程调试的帮助，请参阅帮助。

搜索了类似的帖子，但没有找到。如果重复只是通知。我没有尝试连接到任何远程机器。只是在我的本地机器上测试。有什么办法可以解决这个问题。（我使用的是 Windows 8 Enterprise 64 位，只是一个 javascript 项目）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T07:04:56.090

问题解决了。[从这里](http://www.microsoft.com/en-my/download/details.aspx?id=38184)安装的远程工具更新并且工作正常。感谢您的回复。结束话题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-21T03:19:48.233

我有同样的问题。**我通过将properties/compile/target platform**更改为**x86**而不是**Any CPU**来修复它。它解决了我的问题。希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-14T06:18:36.360

刚才我在IIS中为mydomain.com设置了一个网站时发生这种情况，并将我的项目的启动url（本地IIS）设置为mydomain.com，然后启动项目之前记得在主机中添加记录域的文件：

127.0.0.1 mydomain.com

在我记得我从未创造过记录之前，这让我度过了一个好小时。添加记录立即修复它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-04T15:50:59.970

视窗 7 x64，VS 2012

就我而言，远程调试监视器组件已安装，并且应用程序已明确配置为在设置中进行本地调试。这是一个从 VS 2008、.NET 3.5 升级的 WinForms 应用程序。

原来是Windows防火墙。通过直接运行：

```
C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Remote Debugger\x64\msvsmon.exe 
```

出现一个防火墙对话框，我可以在其中允许 msvsmon.exe 运行。重新启动 VS 2012 后，调试（本地）很好！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T15:11:28.480

确保您在此下拉菜单中选择了**本地计算机：**

![在此处输入图像描述](../Images/117405e654eee4c2c0be780e548768ec.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-16T11:24:01.297

Windows 7 x64，VS 2012，VB.NET

我这样修复它： -

1.  在桌面上创建一个指向“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\Remote Debugger\x64\msvsmon.exe”的快捷方式。

2.  右键单击快捷方式并从下拉菜单中选择“属性”。选择“兼容性”选项卡，勾选“以管理员身份运行此程序”，然后单击“确定”

3.  在桌面上创建一个指向“C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe”的快捷方式。

4.  右键单击快捷方式并从下拉菜单中选择“属性”。选择“兼容性”选项卡，勾选“以管理员身份运行此程序”，然后单击“确定”。

要启动 VS2012：-

1.  双击 msvsmon 快捷方式图标（您在上面创建的用于启动 msvsmon）。等待“Visual Studio 远程调试监视器（管理员）”窗口显示，然后再继续...

2.  双击“Visual Studio 2012 Professional”快捷方式图标（您在上面创建的，用于启动 VS2012）

3.  在 VS2012 中，确保标准工具栏可见。

4.  在 VS2012 中，确保“解决方案平台”下拉菜单（在标准工具栏上）可见并设置为“x86”。

并且调试现在可以工作了（无论如何对我来说）......

但是大约 15 分钟后，调试可能会停止工作，您可能会再次收到 msvsmon 错误。如果发生这种情况，只需关闭 VS2012 和 msvsmon，然后重新启动（从上面的“启动 VS2012：-”）...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-17T17:22:37.953

我自己和其他几个开发人员一直在尝试寻找这个问题的解决方案大约 3/4 小时，因为 Visual Studio 崩溃然后会发生这个错误（2 天内两次）。然后我突然（经过大量调试并尝试了其他建议和headbanging）我不知何故意识到突出显示的文件已更改，当我尝试调试时不是MVC应用程序项目，一旦我将其更改为我的项目的一个它然后工作。

希望这能帮助人们摆脱数小时的痛苦！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-02-02T12:36:05.477

我也遇到了这个错误，我通常在一个命名用户（也是一个数据库用户）下运行站点并且忘记设置应用程序池。（议会的回答也帮助了我）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-14T12:23:17.723

对我来说，这在 VS2013 中有效：保存你的工作，关闭 Visual Studio 然后重新打开你的项目

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-13T04:08:41.303

我也遇到了这个错误。

我的原因是我不小心清空了以下财产

> 属性->调试->工作目录

将其更改为：

> 从父级或项目默认值继承

解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-02T05:13:27.640

如果您使用的是 Microsoft 的 Azure，请尝试手动附加调试器：

我在以下答案中概述了步骤：

[https://stackoverflow.com/a/35738995/1057052](https://stackoverflow.com/a/35738995/1057052)

# java - 如何记住先前保存的表单数据以供后续请求

> ID：14320724
> 
> 赞同：1
> 
> 时间：2013-01-14T14:52:33.827
> 
> 标签：java, forms, servlets

我在一个 servlet (page1) 中有下面的代码，我想在按 Save 后转到第二个 servlet (page2)，读取以 page1 形式编写的内容并将它们附加到一个无线电组中，如下所示：

```
Question [i]: question  (i increases every time a question is added in page2)
radiobutton1 (radio1)
radiobutton2 (radio2)
radiobutton3 (radio3) 
```

重点是每次我填写下面的表格时，都要在之前保存的数据下面添加数据。

您能为 servlet page2 推荐一些示例代码吗？

非常感谢。

```
out.println("<form  id=\"form1\" action = \"page2\" method = \"POST\" >");            
        out.println("<input type=\"text\" name=\"question\"><br />");
        out.println("<input type=\"text\" name=\"radio1\"><br />");
        out.println("<input type=\"text\" name=\"radio2\"><br />");
        out.println("<input type=\"text\" name=\"radio3\"><br />");
        out.println("<input type = \"submit\" value = \"Save\">"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:17:41.807

您可以使用其中一个`<input type="hidden">`或会话范围来记住以前保存的数据。例如

```
<input type="hidden" name="question1answer" value="42" /> 
```

或者

```
request.getSession().setAttribute("question1answer", 42); 
```

传递的数据是可用的后续请求

```
String question1answer = request.getParameter("question1answer"); 
```

或者

```
Integer question1answer = (Integer) request.getSession().getAttribute("question1answer"); 
```

隐藏输入的缺点是它会产生相当多的样板代码，并且最终用户可以轻松猜测/操纵它。会话范围的缺点是它在同一会话中的所有请求之间共享（因此当最终用户在多个浏览器窗口/选项卡中打开同一页面时可能会干扰）。为了结合两全其美，您可以在第一次请求时生成一个长且唯一的密钥，您可以将其用作将所有关联数据存储在会话范围内的密钥，并将该密钥作为隐藏的请求参数传递。

例如在第一个请求中

```
String key = UUID.randomUUID().toString();
request.setAttribute("key", key);
List<Answer> answers = new ArrayList<Answer>();
request.getSession().setAttribute(key, answers);
// ...
answer.add(question1answer); 
```

并在 HTML

```
<input type="hidden" name="key" value="${key}" /> 
```

并在所有后续请求中

```
String key = request.getParameter("key");
request.setAttribute("key", key);
List<Answer> answers = (List<Answer>) request.getSession().getAttribute(key);
// ...
answers.add(question2answer); // question3answer, question4answer, etc. 
```

# php - PHP：Mail.php 的替代品

> ID：14320731
> 
> 赞同：1
> 
> 时间：2013-01-14T14:52:52.017
> 
> 标签：php, pear, mailer

> **可能重复：**
> [PHP 邮件的替代方案](https://stackoverflow.com/questions/2949891/alternative-for-php-mail)

嗨，我的托管服务提供商不允许我使用 pear 安装任何东西，所以有没有其他替代方法来获得 php pear 的功能。

我需要一个经过全面测试且易于使用的邮件程序。任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:57:02.583

您可以使用[SwiftMailer](http://swiftmailer.org/)。这是一个非常强大的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:58:46.947

[使用PHPMailer](https://code.google.com/a/apache-extras.org/p/phpmailer/)或[swiftmailer](http://swiftmailer.org/)让您的生活更轻松。我个人更喜欢 PHPMailer。

# c# - 将列表绑定到包含按钮的 gridview

> ID：14320734
> 
> 赞同：1
> 
> 时间：2013-01-14T14:53:10.020
> 
> 标签：c#, asp.net, gridview

我想将对象列表绑定到gridview。该对象需要包含一列按钮。根据列表中的数据，需要禁用其中一些按钮。

是否可以生成包含启用或禁用按钮的对象列表并简单地绑定到`gridview`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:03:16.443

您可以像这样添加按钮`gridview` `itemtemplate`：

```
<asp:TemplateField>
  <ItemTemplate>
    <asp:Button ID="btn" runat="server" 
     Text="click" Enabled="<%# Eval('IsButtonEnabled') %>"/>
  </ItemTemplate> 
</asp:TemplateField> 
```

然后你可以在你的数据源中添加`Flag`变量`bool` 并设置你想要的值，`true`启用，`false`禁用

**编辑**，例如你有这样的数据源：

```
class YourDataSource {

public string prop1 {get;set;}
public string prop2 {get;set;}
public bool IsButtonEnabled {get;set;}
} 
```

如果`IsButtonEnabled`为真，那么按钮将被启用，否则它将被禁用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:53:36.417

拥有一个标志是一种好方法，但请记住，您需要以某种方式实际存储标志的状态并在每次数据更改时重新绑定它。我选择`ViewState`了这个演示，这是完整的例子：

**ASPX：**

```
<asp:GridView ID="gvEmployees" runat="server" AutoGenerateColumns="false">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:Button runat="server" Text="Update" Enabled='<%# Eval("AllowUpdate") %>' OnClick="Update" CommandArgument='<%# Eval("Name") %>' />
                <asp:Label runat="server" Text='<%# Eval("Name") %>' />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

**后面的代码：**

```
public partial class Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
            BindData();
    }

    private void BindData()
    {
        if (ViewState["Employees"] == null)
        {
            List<Employee> employees = new List<Employee>
        {
            new Employee{Name="Employee 1", AllowUpdate = true},
            new Employee{Name="Employee 2", AllowUpdate = true}
        };

            gvEmployees.DataSource = employees;
            ViewState["Employees"] = employees;
        }

        else
        {
            List<Employee> employees  = ViewState["Employees"] as List<Employee>;
            gvEmployees.DataSource = employees;
        }

        gvEmployees.DataBind();
    }

    protected void Update(object sender, EventArgs e)
    {
        Button update = sender as Button;
        if (update != null & !String.IsNullOrEmpty(update.CommandArgument))
        {
            string employeeName = update.CommandArgument;

            List<Employee> employees = ViewState["Employees"] as List<Employee>;
            Employee emp = employees.Where(em => em.Name == employeeName).FirstOrDefault();
            emp.Name = "some new value...";
            emp.AllowUpdate = false;

            //Rebind the grid with the new values
            ViewState["Employees"] = employees;
            BindData();
        }
    }
}

[Serializable]
public class Employee
{
    public string Name { get; set; }
    public bool AllowUpdate { get; set; }
} 
```

# java - Java Swing 组件在添加到 JPanel 时没有正确的大小

> ID：14320735
> 
> 赞同：5
> 
> 时间：2013-01-14T14:53:17.207
> 
> 标签：java, swing, size, jpanel, jcomponent

这是我在这里的第一篇文章，如果我做错了什么，请原谅我。

我的问题是：

我正在尝试将组件添加到具有大小等定义值的 JPanel。但是当我将它们添加到面板时，它们绝对没有它们应该具有的大小和位置。例如：

```
public class Console extends JFrame {
    private JPanel mainPanel = new JPanel();
    private JTextArea textField = new JTextArea();
    private JTextArea textField2 = new JTextArea();

    public Console() {
        this.setSize(500,300);

        this.mainPanel.setSize(this.getWidth(),this.getHeight());

        this.textField.setEditable(false);
        this.textField.setSize(this.mainPanel.getWidth(), 100);
        this.textField.setPreferredSize(new Dimension(this.mainPanel.getWidth(),this.mainPanel.getHeight()));
        this.textField.setLocation(0, 0);
        this.textField.setText("some text");
        this.textField.setVisible(true);

        this.textField2.setSize(this.mainPanel.getWidth(),200);
        this.textField2.setPreferredSize(new Dimension(this.getWidth(),this.getHeight()));
        this.textField2.setLocation(0,this.mainPanel.getHeight()-this.textField.getHeight());
        this.textField2.setText("blabla");
        this.textField2.setVisible(true);

        this.mainPanel.add(textField);
        this.mainPanel.add(textField2);
        this.mainPanel.setVisible(true);

        this.add(this.mainPanel);
        // I know you should not call setVisible() in the Constructor, just for making Code more simple here.
        this.setVisible(true);
    }
} 
```

当我启动应用程序时，两个 JTextArea 都非常小并且在中间某个位置（不是上面设置的），而 mainPanel 是正确的。我尝试在代码中的不同位置调用 setSize() 和 setPreferredSize()，但它没有不工作。据我所知，我知道最好使用 LayoutManager 来执行此操作，但老实说，我不知道如何正确使用它。我在 Oracle Doc 上检查了它，但如果有人可以为此发布一个干净的解决方案，我将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T15:12:12.550

您需要`Layout`为您的`Container`. 你`setLayout`为一个 Container 之类`JFrame`的，`JPanel`等等。您不会将其他组件添加到布局中，而是添加到容器中。然后它会相应地布局它们。它就是这样工作的。

使用适当的布局，您无需调用`setLocation()`. 也`setVisible(true)`太过分了，因为 true 是代码中这些组件的默认值。

最好不要扩展`JFrame`，`JPanel`而是扩展并将其添加到 JFrame。

请了解 EDT，`SwingUtilities.invoketLater()`您需要使用它。

你也可以节省一些字节，而不是`this.`一直打字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T15:01:47.457

这都是关于布局的[Swing 布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T15:11:41.337

对于您的`JTextArea`问题，请使用：

```
 JTextArea j=new JTextArea();
       j.setColumns(20);
       j.setRows(5); 
```

更改 和 的值`setColumns()`以`setRows()`改变大小；+ 给出的建议`Layout Managers`。

希望这有效；）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-14T16:42:50.600

尝试使用 jpanel 的绝对布局。

# cocoa - 在 Cocoa SplitView 中嵌入外部应用程序

> ID：14320740
> 
> 赞同：1
> 
> 时间：2013-01-14T14:53:31.823
> 
> 标签：cocoa, sublimetext2

我想在 Mac OS X 下有一个应用程序，使我能够在同一个全屏窗口中拥有 Sublime Text 2 和终端（用于显示测试结果、运行 grunt 任务等）。我找不到具有这种行为的应用程序，我想用可可拆分视图自己复制它。我想知道它是否可能，如果是，我该如何开始实施它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:30:11.197

您不能从其他 2 个应用程序创建新应用程序。它行不通。但是，您可以使用 applescript 使您可以轻松地根据需要定位这些窗口。

作为示例，我将使用 Safari 和终端作为我的 2 个应用程序。打开它们并将它们放置在您希望它们出现的屏幕上。我把每个窗户都开大了，并排放置。然后我运行这个applescript来获取它们的窗口大小和位置属性......

```
tell application "System Events"
    tell process "Safari"
        set safariSize to size of window 1
        set safariPosition to position of window 1
    end tell
    tell process "Terminal"
        set terminalSize to size of window 1
        set terminalPosition to position of window 1
    end tell
end tell
return {safariSize, safariPosition, terminalSize, terminalPosition} 
```

然后我将该脚本的结果复制/粘贴到该脚本中的“theValues”变量中。现在，只要我想，我就可以运行这个脚本来重新创建那些窗口位置。

```
set theValues to {{1001, 1025}, {0, 22}, {613, 1024}, {1003, 22}}

tell application "Safari" to activate
tell application "Terminal" to activate

tell application "System Events"
    tell process "Safari"
        set size of window 1 to item 1 of theValues
        set position of window 1 to item 2 of theValues
    end tell
    tell process "Terminal"
        set size of window 1 to item 3 of theValues
        set position of window 1 to item 4 of theValues
    end tell
end tell 
```

我希望这会有所帮助。祝你好运。

# android - 如何从驱动器上的父文件夹中获取所有文件和文件夹（带有名称）？

> ID：14320741
> 
> 赞同：1
> 
> 时间：2013-01-14T14:53:37.113
> 
> 标签：android, google-drive-api

我想读取驱动器上文件夹中的所有文件和文件夹。FileList 具有称为 getItems() 的方法，该方法返回文件列表，但它具有获取其 id 的方法但没有获取其名称的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:42:06.900

用于`getTitle`返回文件的标题（文件名）。请记住，列表会返回已丢弃的物品。如果您想阻止这种情况，请传递查询：

```
q='trashed = false' 
```

# linux - 进程何时处理信号

> ID：14320748
> 
> 赞同：2
> 
> 时间：2013-01-14T14:54:03.573
> 
> 标签：linux, signals

我想知道 linux 进程何时处理信号。假设进程已经为某个信号安装了信号处理程序，我想知道该进程的正常执行流程何时会被中断并调用信号处理程序。

根据[http://www.tldp.org/LDP/tlk/ipc/ipc.html](http://www.tldp.org/LDP/tlk/ipc/ipc.html)，该进程将在退出系统调用时处理信号。这意味着像 a = b+c （或其等效的机器代码）这样​​的普通指令不会因为信号而被中断。

此外，有些系统调用会在接收到信号时被中断（并因 EINTR 失败或重新启动）。这意味着甚至在系统调用完成之前就已经处理了信号。这种行为似乎与我在上一段中提到的相冲突。

因此，我不清楚何时处理信号以及该进程将在哪些进程状态下处理信号。可以中断吗

1.  任何时候它从内核空间进入用户空间，或者
2.  任何时候它在用户空间中，或者
3.  任何时候进程被调度程序调度执行

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T16:06:25.810

> 根据[http://www.tldp.org/LDP/tlk/ipc/ipc.html](http://www.tldp.org/LDP/tlk/ipc/ipc.html)，该进程将在退出系统调用时处理信号。这意味着像 a = b+c （或其等效的机器代码）这样​​的普通指令不会因为信号而被中断。

好吧，如果是这种情况，CPU 密集型进程将不会服从进程调度程序。事实上，调度程序可以在其时间片过去的任何时间点中断进程。除非它是一个先进先出的实时进程。

更正确的定义：将信号传递给进程的一个时间点是控制流离开内核模式以恢复执行用户模式代码的时间。这不一定涉及系统调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:32:58.003

在第 7 节手册页中记录了许多信号处理的语义（对于 Linux，无论如何 - 其他操作系统可能有类似的，但不一定在同一位置）`signal`，如果安装在您的系统上，可以像这样访问：

```
man 7 signal 
```

如果未安装手册页，则很容易找到在线副本。

# web-applications - Glassfish 服务器会话无效

> ID：14320749
> 
> 赞同：0
> 
> 时间：2013-01-14T14:54:07.183
> 
> 标签：web-applications, jsf-2, java-ee-6, glassfish-3, viewexpiredexception

我已经在 Glashfish 3.2.1 上部署了我的 Web 应用程序。我在 web.xml 中将会话超时设置为 30 分钟。我的应用程序有一个登录页面，一旦此用户通过身份验证（检查密码），登录就会继续加载网页。尽管用户通过了身份验证，但单击登录按钮只会导致 sessiona 无效 :( 我可以看到会话详细信息丢失了。为什么会这样？我应该在我的 firefox 浏览器中设置一些东西吗？如果没有，我该如何防止这种情况发生？

提前致谢

请在此处查看我提到代码的帖子： [Server page redirected to Filer before Login](https://stackoverflow.com/questions/14315994/server-page-redirected-to-filer-before-login)

# android - EditText 没有在 Android 4.1.2 中删除 BACKSPACE 上的文本

> ID：14320752
> 
> 赞同：2
> 
> 时间：2013-01-14T14:54:14.667
> 
> 标签：android, android-edittext

我有一个扩展 EditText 的 UI 组件。它使用 TextWatcher 监视用户对文本内容的更改。

我有一个仅在 Android 4.1.2 中显示的问题：我的组件（以前）选择以编程方式选择的文本范围，使用 setSelection() 设置选择开始并使用 extendSelection() 扩展它。

选择文本时，键入退格键时不会调用 beforeTextChanged() 和 afterTextChanged(0。

在键盘上输入字符会导致选定的文本范围被正确地替换为类型字符，因此看起来选择正在工作。

这在我尝试过的 Android 4.0.2 和其他版本中运行良好。

任何解决方法的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:17:10.607

我有同样的问题，我找到的解决方法是在清单中，设置 targetSdk = 15 或更低。

# c# - 如何将表单的实例传递给另一个表单

> ID：14320753
> 
> 赞同：2
> 
> 时间：2013-01-14T14:54:20.280
> 
> 标签：c#, forms

我有一个`form1`在运行时创建的带有控件的表单。

当我按下表单上的按钮时，另一个表单加载`combat`并被`form1`隐藏，因此只有一个表单 ( `combat`) 可见。

当我按下按钮时，`combat`我希望`form1`显示我的表单。但是我无法访问它。

这是我尝试过的：

```
 private void combatBtn_Click(object sender, EventArgs e)
    {
        Form combat = new Combat(this);
        this.Hide();
        combat.Show();

    }

public partial class Combat : Form
 {

    public Combat(Form form)
    {
        InitializeComponent();
        form.Show();

    }

    private void button1_Click(object sender, EventArgs e)
    {
        form.Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T14:55:18.143

您需要将父表单存储在一个字段中，以便您可以在构造函数之外访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:58:17.637

```
public partial class Combat : Form
{

    private form1 form;    // Or whatever class you form1 is supposed to be

    public Combat(Form form)
    {
        InitializeComponent();
        this.form = form;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        form.Show();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T15:25:40.960

通常不建议将父窗体的实例传递给子窗体。在这种情况下（通常是这样），当您不这样做时，代码实际上更简单：

```
private void combatBtn_Click(object sender, EventArgs e)
{
    Form combat = new Combat();
    this.Hide();
    combat.ShowDialog();
    this.Show();
} 
```

如果您需要在子表单关闭之前显示父表单，那么您可以通过事件来实现：

补充`Combat`：

```
public event Action MyEvent; //TODO rename to a meaningful name 
```

在按钮单击处理程序中触发事件：

```
private void button1_Click(object sender, EventArgs e)
{
    MyEvent();
} 
```

然后让你的主窗体为事件添加一个处理程序：

```
private void combatBtn_Click(object sender, EventArgs e)
{
    Combat combat = new Combat();
    this.Hide();
    combat.MyEvent += () => this.Show();
    combat.Show();
} 
```

# mysql - mysql - 按最完整的行排序

> ID：14320754
> 
> 赞同：3
> 
> 时间：2013-01-14T14:54:24.330
> 
> 标签：mysql, sorting

我正在使用 mysql db 的排序语法，我想通过完成列对行进行排序。我希望示例将描述该问题：

```
id |t1 | t2 | t3 | t4
----------------------
 1 | a |  b |  c | d
 2 |   |  e |    |
 3 | f |  g |    |
 4 | h |  i | j  | 
```

这是我的行/列结构。如您所见，有些字段是空的。我想对表格进行排序，以便输入看起来像这样

```
id |t1 | t2 | t3 | t4
----------------------
 1 | a |  b |  c | d
 4 | h |  i | j  |
 3 | f |  g |    |
 2 |   |  e |    | 
```

它已按填充（非空）字段的数量排序。最简单的方法是使用这样的查询进行排序：

```
SELECT id, t1, t2, t3, t4 FROM table ORDER BY t1 DESC, t2 DESC, t3 DESC, t4 DESC 
```

它在大多数情况下都很好用，但是如果我的表如下所示，看看会发生什么：

```
id |t1 | t2 | t3 | t4
----------------------
 1 |   |  b |  c | d
 2 |   |  z |    | 
```

排序后：

```
id |t1 | t2 | t3 | t4
----------------------
 2 |   |  z |    |
 1 |   |  b |  c | d 
```

为什么？因为排序顺序是降序的，并且 t1 列是空的（所以它被忽略了），下一列是 t2。它也按降序排序，忽略其余列（如果它们为空）。

[我发现在这里](https://stackoverflow.com/questions/12107081/mysql-query-order-by-most-completed-fields)解决了类似的问题（我猜 - 尚未检查） ，但解决方案看起来很讨厌。您是否有其他想法按非空列数对表进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T14:57:15.430

您实际上需要为每条记录创建一个分数并对其进行排序。我建议测试每个字段是否为“空”并取总和，然后按升序排序（以便最低分数，即具有最少空字段的记录排在第一位）。

您可以滥用 MySQL 缺乏真正的布尔类型来创建这样的分数，如下所示：

```
ORDER BY (t1 IS NULL) + (t2 IS NULL) + (t3 IS NULL) + (t4 IS NULL) 
```

或者，如果您的“空”字段实际上是空字符串`''`而不是`NULL`：

```
ORDER BY (t1 = '') + (t2 = '') + (t3 = '') + (t4 = '') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T15:02:32.170

您应该对所有相关列的结果`IS NULL`或`IS NOT NULL`所有相关列的结果求和，并将其用作主要排序来解决您的基本问题，然后施加您想要的任何次要排序。

我不清楚你想如何对具有相同数量的非空列值的两行进行排序，但我猜你想对它们进行从左到右的升序排序，在这种情况下这应该适合你：

（更新：正如 eggyal 所指出的，“空”是指空字符串，而不是 NULL。请参阅下面的更新查询）：

```
SELECT id, t1, t2, t3, t4 
FROM table 
ORDER BY ((t1 = '') + (t2 = '') + (t3 = '') + (t4 = '')) ASC, 
t1 DESC, t2 DESC, t3 DESC, t4 DESC 
```

# python - Python中的线程启动钩子

> ID：14320758
> 
> 赞同：1
> 
> 时间：2013-01-14T14:54:36.027
> 
> 标签：python, multithreading

有没有办法在 Python（2.7）中启动新线程时运行任意方法？我的目标是使用[setproctitle](http://pypi.python.org/pypi/setproctitle)为每个生成的线程设置适当的标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:58:48.863

只需从 threading.Thread 继承并使用此类而不是 Thread - 只要您可以控制线程。

```
import threading

class MyThread(threading.Thread):
    def __init__(self, callable, *args, **kwargs):
        super(MyThread, self).__init__(*args, **kwargs)
        self._call_on_start = callable
    def start(self):
        self._call_on_start()
        super(MyThread, self).start() 
```

就像一个粗略的草图。

**编辑** 根据评论，需要将新行为“注入”到现有应用程序中。假设您有一个脚本，它本身可以导入其他库。这些库使用`threading`模块：

在导入任何其他模块之前，首先执行此；

```
import threading 
import time

class MyThread(threading.Thread):
    _call_on_start = None

    def __init__(self, callable_ = None, *args, **kwargs):
        super(MyThread, self).__init__(*args, **kwargs)
        if callable_ is not None:
            self._call_on_start = callable_

    def start(self):
        if self._call_on_start is not None:
            self._call_on_start
        super(MyThread, self).start()

def set_thread_title():
    print "Set thread title"

MyThread._call_on_start = set_thread_title()        
threading.Thread = MyThread

def calculate_something():
    time.sleep(5)
    print sum(range(1000))

t = threading.Thread(target = calculate_something)
t.start()
time.sleep(2)
t.join() 
```

由于后续导入仅在 中进行查找`sys.modules`，因此所有其他使用它的库现在应该使用我们的新类。我认为这是一种 hack，它可能会产生奇怪的副作用。但至少值得一试。

请注意：`threading.Thread`不是在 python 中实现并发的唯一方法，还有其他选项，如`multiprocessing`etc.. 这些在这里不受影响。

**编辑 2** 我刚刚看了你引用的库，它都是关于进程的，而不是线程！所以，只要做一个`:%s/threading/multiprocessing/g`and`:%s/Thread/Process/g`就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-13T18:11:16.733

使用`threading.setprofile`. 你给它你的回调，Python 会在每次新线程启动时调用它。

文档[在这里](https://docs.python.org/2/library/threading.html)。

# c# - 在自定义绑定上启用 HTTP 和 HTTPS

> ID：14320763
> 
> 赞同：1
> 
> 时间：2013-01-14T14:54:53.243
> 
> 标签：c#, http, binding, https, custom-binding

是否可以向这样的自定义绑定添加 HTTPS 和 HTTP 支持？

```
 <customBinding>
    <binding name="RS2010Soap12">
      <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
          messageVersion="Soap12" writeEncoding="utf-8">
        <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      </textMessageEncoding>
      <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
          maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Ntlm"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
          realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
          useDefaultWebProxy="true" />
    </binding>
  </customBinding> 
```

端点：

```
 <endpoint address="https://Server1/ReportServer/ReportService2010.asmx"
  binding="customBinding" bindingConfiguration="RS2010Soap12"
  contract="Program.ReportingService2010Soap"
  name="RS2010Soap12" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:17:47.133

不，您必须创建两个绑定并为您的服务公开两个端点。

# c# - 点字模式匹配

> ID：14320765
> 
> 赞同：2
> 
> 时间：2013-01-14T14:54:54.413
> 
> 标签：c#, regex

我想创建一个正则表达式来匹配以句点开头的单词。单词可以在一个字符串中存在 N 次。我想确保单词出现在行首、行尾或中间某处。后一部分是我遇到的困难。

这是我到目前为止的位置。

```
const string pattern = @"(^|(.* ))(?<slickText>\.[a-zA-Z0-9]*)( .*|$)";

public static MatchCollection Find(string input)
{
    Regex regex = new Regex(pattern,RegexOptions.IgnoreCase | RegexOptions.Multiline);
    MatchCollection collection = regex.Matches(input);
    return collection;
} 
```

我的测试模式发现`.lee`和`.good`. 我的测试模式找不到`.bruce`：

```
static void Main()
{
    MatchCollection results = ClassName.Find("a short stump .bruce\r\nand .lee a small tree\r\n.good roots");

    foreach (Match item in results)
    {
        GroupCollection groups = item.Groups;
        Console.WriteLine("{0} ", groups["slickText"].Value);

    }
    System.Diagnostics.Debug.Assert(results.Count > 0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:22:34.303

也许你只是在寻找`\.\w+`？

**测试：**

```
var s = "a short stump .bruce\r\nand .lee a small tree\r\n.good roots";
Regex.Matches(s, @"\.\w+").Dump(); 
```

**结果：**

![在此处输入图像描述](../Images/9a13294912b236a37ed72dad633696da.png)

笔记：

如果您不想`foo`在 in中查找（因为and`some.foo`之间没有空格），您可以改用。`some``.foo``(?<=\W|^)\.\w+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:10:31.883

奇怪的是，似乎 with `RegexOptions.Multiline`，`^`并且`$`只会额外匹配`\n`， not `\r\n`。

因此你得到`.good`是因为它前面`\n`是匹配的`^`，但你*没有*得到`.bruce`是因为它`\r`后面是不匹配的`$`。

您可以`.Replace("\r", "")`对输入执行 a，或重写您的表达式以获取单独的输入行。

编辑：或在您的模式中替换`$`为`\r?$`明确包含`\r`; 感谢[`SvenS`](https://stackoverflow.com/users/887962/svens)您的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T15:03:20.360

在您的 RegEx 中，单词必须以空格结尾，但 bruce 以 \r 结尾。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-14T15:24:56.737

我会试试这个正则表达式：

```
(?:.*?(\.[A-Za-z]+(?:\b|.\s)).*?)+ 
```

并将 RegexOptions 从 Multiline 更改为 Singleline - 在这种模式下，点匹配所有字符，包括换行符。

# mysql - 如何更新这个？

> ID：14320772
> 
> 赞同：1
> 
> 时间：2013-01-14T14:55:19.213
> 
> 标签：mysql, sql

我有这个 ：

```
 ID      ROW_A    ROW_B

'62919' | '9430' | '40754' 
```

多亏了这个查询，我明白了：

```
SELECT * FROM myTable 
WHERE ROW_A != 0 
```

我想更新它，将 ROW_A 的值放入 ROW_B

那么，是否可以通过一个查询进行以下处理？

现在，我正在使用这个（但它是错误的）：

```
UPDATE myTable SET ROW_B = ROW_A
WHERE ID IN(
SELECT * FROM myTable
WHERE ROW_A != 0) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:56:38.240

我认为不需要子查询：

```
UPDATE  myTable 
SET     ROW_B = ROW_A
WHERE   ROW_A != 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T14:58:23.860

```
UPDATE myTable 
SET ROW_B = ROW_A
WHERE ROW_A != 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T15:03:06.850

这可能有效：

```
UPDATE myTable SET ROW_B = A
WHERE ID IN(
SELECT ROW_A as A FROM myTable
WHERE ROW_A !=0) 
```

# c# - 基于Web的MP3播放器.net c#在代码中而不是在HTML中设置URL

> ID：14320773
> 
> 赞同：0
> 
> 时间：2013-01-14T14:55:19.793
> 
> 标签：c#, .net, mp3

我正在寻找可以在.net 中工作的基于Web 的mp3 播放器。该网站是用 C# 编写的。它需要播放、停止和暂停 MP3。它应该从 web 项目中的文件夹播放 mp3，我需要在代码中设置 mp3 的位置，以便用户无法从 html 中找到 mp3 位置。

它还需要记录用户播放了 mp3，所以我需要访问一个事件来执行此操作

我已经尝试过`WMPLib.WindowsMediaPlayer`，但无法暂停并恢复工作。

这是代码，但 mpthree 实例不断重置

WMPLib.WindowsMediaPlayer mpthree；

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (mpthree == null)
        {
            mpthree = new WMPLib.WindowsMediaPlayer();
        }
    }

    protected void Play_Click(object sender, EventArgs e)
    {
        mpthree.URL = Server.MapPath("/MP3s/20130101003811_442071839757_anonymous-all.mp3");
        mpthree.controls.currentPosition = Convert.ToDouble(Session["currentPos"]);

        mpthree.controls.play();      
    }

    protected void Stop_Click(object sender, EventArgs e)
    {
        mpthree.controls.stop();
        Session["currentPos"] = 0;
    }

    protected void Pause_Click(object sender, EventArgs e)
    {
        mpthree.controls.pause();
        Session["currentPos"] = mpthree.controls.currentPosition;

    }
} 
```

# constraints - 为现有的 Constraint 注册自定义 ConstraintValidator

> ID：14320779
> 
> 赞同：6
> 
> 时间：2013-01-14T14:55:47.487
> 
> 标签：constraints, bean-validation, custom-validators

我在我的项目中使用 bean-validation，我想为现有的约束注释编写一个自定义验证器。

例如，我有一个代表日期/时间的类，名为`CustomDateTime`. 在使用此类作为例如出生日期的类中，我想用以下方式注释该字段`@Past`：

```
public class Person
{
    @Past
    private CustomDateTime dateOfBirth;
} 
```

然后我通过实现来创建一个自定义验证器`ConstraintValidator<Past, CustomDateTime>`。然而这不起作用，因为验证实现不知道自定义验证器。然后它抛出：`javax.validation.UnexpectedTypeException: No validator could be found for type: com.example.CustomDateTime`。

我知道您通常会像这样创建一个单独的注释：

```
@Target({ElementType.FIELD})
@Retention(RetentionPolicy.RUNTIME)
@Constraint(validatedBy = {CustomDateTimePastValidator.class})
public @interface Past
{
    ....
} 
```

但这对我来说似乎是双重代码；-)

如何注册要使用的自定义验证器`@Past`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:27:55.283

# javascript - IE 中的 tinyMCE 错误，但 Chrome 和 Firefox 中没有

> ID：14320785
> 
> 赞同：1
> 
> 时间：2013-01-14T14:56:09.437
> 
> 标签：javascript, tinymce

我正在编写一个 htm+javascript 页面，我想在其中使用 tinyMCE 文本编辑器。
当我加载页面时，我收到错误：

```
Agente utente: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; .NET CLR 3.5.30729)  
Timestamp: Sun, 13 Jan 2013 16:44:35 UTC  
Message: 'tinyMCE.get(...)' is null or is not an object 
```

我只在 IE 上看到错误，当我使用 Chrome 或 FireFox (??) 时没有错误。
代码行是：

```
if(msgNatale!=undefined) tinyMCE.get("edit1").setContent(msgNatale); 
```

对象“edit1”是一个文本区域：

```
<textarea name="edit1" id="edit1" rows=15 cols=70></textarea> 
```

任何想法？？

# android - Android - 将参数从 AlertDialog 传递到 AlertDialog'host

> ID：14320787
> 
> 赞同：2
> 
> 时间：2013-01-14T14:56:13.233
> 
> 标签：android, dialog, params, main-activity

在我的`MainActivity`中，我在里面生成了一个`DialogAlert`2`EditText`秒。当我单击. `EditText`_ *_*`MainActivity`*`DialogAlert`*

 ***这是我的`DialogAlert`课：**

```
public class ShareDialog extends DialogFragment{

    public interface ShareDialogListener {
        public void onDialogPositiveClick(DialogFragment dialog);
        public void onDialogNegativeClick(DialogFragment dialog);
    }

    ShareDialogListener mListener;
    private Handler mResponseHandler;

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
           mListener = (ShareDialogListener) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement ShareDialogListener");
        }
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

        LayoutInflater inflater = getActivity().getLayoutInflater();

        View v = inflater.inflate(R.layout.dialog_share, null); 
        final EditText name_place =    (EditText)v.findViewById(R.id.sharePlaceName);
        final EditText description_place = (EditText)v.findViewById(R.id.shareDescription);
        builder.setView(v)
                .setTitle(R.string.shareTitle)
               .setPositiveButton(R.string.share, new DialogInterface.OnClickListener() {
                   @Override
                   public void onClick(DialogInterface dialog, int id) {
                       String name = name_place.getText().toString();
                       String description = description_place.getText().toString();
                       mListener.onDialogPositiveClick(ShareDialog.this);

                   }
               })
               .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int id) {
                       mListener.onDialogNegativeClick(ShareDialog.this);
                       ShareDialog.this.getDialog().cancel();
                   }
               });      
        return builder.create();
} 
```

}

我的`MainActivity`工具`ShareDialog.ShareDialogListener`

**在我的`MainActivity`我有：**

```
 public void onClickShare(View v) {
         // Create an instance of the dialog fragment and show it
        DialogFragment dialog = new ShareDialog();
        dialog.show(getSupportFragmentManager(), "ShareDialog");
    }

    public void onDialogPositiveClick(DialogFragment dialog) {
        Toast.makeText(this, "Position Shared", Toast.LENGTH_SHORT).show();

    }

    public void onDialogNegativeClick(DialogFragment dialog) {
        Toast.makeText(this, "Cancel Share", Toast.LENGTH_SHORT).show();

    } 
```

当我单击 中的*肯定按钮*时`DialogAlert`，我有一个`Toast`“共享位置”。

我想`onDialogPositiveClick()`从`MainActivity`我在我的参数**名称**和**描述**中创建的方法中恢复`DialogAlert`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T15:07:25.887

只需修改`onDialogPositiveClick`方法以提供参数：

```
public interface ShareDialogListener {
    public void onDialogPositiveClick(DialogFragment dialog, String name, String description);
    public void onDialogNegativeClick(DialogFragment dialog);
} 
```

在您的警报中：

```
mListener.onDialogPositiveClick(ShareDialog.this, name_place.getText(), description_place.getText()); 
```

在您的活动中：

```
public void onDialogPositiveClick(DialogFragment dialog, String name, String description) {
    Toast.makeText(this, "Position Shared: " + name + ", " + description, Toast.LENGTH_SHORT).show();

} 
```*

# ios - IOS：每 2 秒轮询一次

> ID：14320788
> 
> 赞同：1
> 
> 时间：2013-01-14T14:56:19.790
> 
> 标签：ios, polling

我的应用程序的一项功能是每 2 秒检索一次实时数据（JSON 对象）并显示它（仅当应用程序处于前台时）。由于服务器限制，我无法使用推送通知服务。你能告诉我在IOS中进行轮询的有效方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T15:02:50.877

轮询网络会浪费电池，但一种选择可能是循环计时器：

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:2.0 target:self 
   selector:@selector(checkServer:) userInfo:nil repeats:YES]; 
```

您在`checkServer:`功能中访问网络的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T14:58:42.080

您可以使用计时器。

```
 poolingTimer = [NSTimer timerWithTimeInterval:pollingPeriod target:self selector:@selector(timerRanOut:) userInfo:nil repeats:YES]; 
```

然后在你的 timerRanOut 方法中，你可以请求新的 json，解析它，然后重新加载视图。

# android - 如何在 Android 上翻页和预览录音

> ID：14320789
> 
> 赞同：1
> 
> 时间：2013-01-14T14:56:20.623
> 
> 标签：android, android-viewpager, android-mediaplayer

我有一个 Recording ( `List<Recording>`) 对象的列表：

```
Recording:
String title;
String length;
String long_text_about_the_recording;
String filepath; // /path/to/amr/file.amr
String other_meta_data; 
```

为了允许用户浏览这些集合，我使用`PagedView`. 正在分页的视图是显示元数据（标题、长度等）的盒式磁带的图片。

![伊姆古尔](../Images/a692ee85d2a0af9cdab33697bfe60ac8.png)

这样，用户就可以浏览他们的收藏。为了更容易找到特定的录音，我想实现一个预览/自动播放模式，通过`Button`. 这样当用户按下该按钮时，当前录音开始播放，但当他们滑动到下一个录音时，当前录音停止播放，下一个录音开始播放，延迟尽可能短。在不遇到内存/文件加载问题的情况下实现这一点的最佳策略是什么，还要记住用户可能会非常快速地浏览他们的集合（即跳过记录）——需要某种阈值？

# .net - 如何并排运行 linqpad 2.x 和 4.x？

> ID：14320795
> 
> 赞同：2
> 
> 时间：2013-01-14T14:56:46.977
> 
> 标签：.net, linq, .net-4.0, .net-3.5, linqpad

我使用[LinqPad](http://www.linqpad.net/)运行代码片段。

我需要运行一些针对 3.5 的代码，这些代码有单独的旧版本。

我的问题是如何并排运行 linqpad？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:36:38.467

LINQPad 2.x 和 LINQPad 4.x 是完全独立的，可以愉快地并行运行。无论您使用的是已安装的版本还是独立的可执行文件，这都是正确的。关于更新，这些也是独立的：LINQPad 2.x 将更新存储在 %programdata%\updates 中，而 LINQPad 4.x 将更新存储在 %programdata%\updates40 中。

运行 LINQPad 2.x 时究竟会发生什么？它说在帮助中运行的是什么版本 | 关于？

我认为您的机器上安装了 .NET Framework 3.5？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:29:23.677

如果您在同时运行两个版本时遇到问题，请尝试下载该应用程序的便携式版本。

**编辑**
似乎没有可供下载的便携式版本的 LINQPad 2。您可以尝试安装 v2，然后下载 v4 的便携式版本。

# android - 如何知道安卓设备是否支持多用户？

> ID：14320796
> 
> 赞同：3
> 
> 时间：2013-01-14T14:56:49.487
> 
> 标签：android, android-multiple-users

Android 4.2 支持“在平板电脑等可共享设备上”的多个用户空间 ( [http://developer.android.com/about/versions/android-4.2.html#MultipleUsers](http://developer.android.com/about/versions/android-4.2.html#MultipleUsers) )。我如何知道特定设备是否为“可共享设备”？

我可以以编程方式检查设备是否支持多个用户吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-04T08:48:58.617

UserManager.supportsMultipleUsers() 中有一个隐藏的 API。您可以使用以下使用反射的方法访问它，但通常不建议使用此技术，因为 API 可能会在以后的版本中更改。

```
public static boolean supportsMultipleUsers() {
  try {
  if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
     // return UserManager.supportsMultipleUsers();
     return (Boolean(UserManager.class.getDeclaredMethod("supportsMultipleUsers").invoke(null));
  }
  catch (Exception e) {}
  return false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T16:43:40.227

如果您检查设备上是否创建了多个用户帐户就足够了，您可以使用`UserManager.getUserCount()`（在确保SDK版本> 16之后）。

我不知道是否可以区分理论上是否可以使用多个用户，但到目前为止只使用了一个，而根本没有多用户支持。

**编辑：**这个解决方案实际上不起作用，它似乎需要系统级权限。有关详细信息，请参见此处[UserManager getUserCount()（果冻豆）](https://stackoverflow.com/q/13508258/1966616)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T15:01:15.537

您可以使用以下代码检查 Android 版本：

```
int oSversion = Integer.valueOf(android.os.Build.VERSION.SDK_INT);

if (osVersion > 16) {
   // This phone supports multi-user   
} 
```

# c# - 如何通过选择列表框中的项目来更新数据库 - windows phoene 7？

> ID：14320797
> 
> 赞同：0
> 
> 时间：2013-01-14T14:56:49.270
> 
> 标签：c#, windows-phone-7, linq-to-sql, windows-phone-7.1

我正在开发一个需要更新操作的 windows phone 7 应用程序。我有下表类。

```
[Table]
public class StudentTable
{

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int StudentID
    {
        get;
        set;
    }

    [Column (CanBeNull = false)]
    public string StudentName
    {
        get;
        set;
    }
    [Column(CanBeNull = false)]
    public string StudentClass
    {
        get;
        set;
    }
    [Column(CanBeNull = false)]
    public DateTime regDate
    {
        get;
        set;
    }
} 
```

我通过以下方法为每个学生获取价值..

```
 using (StudentDataContext context = new StudentDataContext(strConnectionString))
        {

            StudentTable newStudent = new StudentTable
            {

                StudentName = textBox1.Text.ToString(),
                StudentClass = textBox2.Text.ToString(), 
                regDate = ((DateTime) datePicker.Value).Date.Add(((DateTime)timePicker.Value).TimeOfDay) 

            };

            context.StudentInfo.InsertOnSubmit(newStudent);
            context.SubmitChanges();

        } 
```

并在列表框中显示学生......

```
 <ListBox HorizontalAlignment="Left"  Name="StudentlistBox1" ItemsSource="{Binding}"  Loaded="StudentlistBox1_Loaded">
                 <ListBox.ItemTemplate>
                     <DataTemplate>
                         <StackPanel>
                               <TextBlock Text="{Binding StudentName}" FontSize="{StaticResource PhoneFontSizeLarge}"></TextBlock>
                               <TextBlock Text="{Binding StudentClass}" FontSize="{StaticResource PhoneFontSizeLarge}"></TextBlock>
                               <TextBlock Text="{Binding regDate}" FontSize="{StaticResource PhoneFontSizeSmall}"></TextBlock>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

我试图编写代码，以便列表框中的每个选定项目都会导致我可以更新选定记录的页面。如果我得到所选项目的主键，我相信我可以做到...如何在列表框中选择学生并传递该学生 ID？任何想法......我是 Windows Phone 7 的新手......请帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:30:49.913

*方法 1 :- 通过导航传递详细信息*

```
String uri = "/Page2.xaml?param1="+value;
NavigationService.Navigate(new Uri(uri, UriKind.Relative)); 
```

并在第 2 页中访问导航到方法：-

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e) 
```

像这样：-`QueryString this.NavigationContext.QueryString["param"];`

*方法 2：- 将 id 存储在 IsolatedStorage 设置中*

```
private IsolatedStorageSettings appSettings = IsolatedStorageSettings.ApplicationSettings;
appSettings["paramFromPage1"]=paramValue; 
```

并通过在第 2 页中正确解析它来使用 appSettings["paramFromPage1"] 检索它

**方法 3：- [可能在 Application LifeTimeObjects 中！！]*

# php - PayPal 按钮的类型

> ID：14320798
> 
> 赞同：1
> 
> 时间：2013-01-14T14:56:51.827
> 
> 标签：php, button, paypal

我正在开发带有信用系统的 Web 应用程序。这意味着用户可以用货币兑换积分。我只是想问问有经验的人，哪种类型的 PayPal 按钮是这种应用程序的最佳解决方案。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:41:24.457

使用常规的*“立即购买”*按钮。您正在销售一种预付费服务。

# android - 如何选择图像？

> ID：14320799
> 
> 赞同：0
> 
> 时间：2013-01-14T14:56:51.983
> 
> 标签：android, android-intent

我刚开始学习 andriod，就我刚刚访问画廊而言，我想从画廊中选择一张图片并打开该图片，这是我的代码。

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    Button obj= (Button)findViewById(R.id.button1);

    obj.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            Intent intent = new Intent(Intent.ACTION_PICK,
                    android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                  startActivityForResult(intent, 0); 

        }
    });

} 
```

# sass - 捕获已解析的 SASS 父选择器

> ID：14320802
> 
> 赞同：0
> 
> 时间：2013-01-14T14:56:58.520
> 
> 标签：sass

我正在尝试找到一种方法来`&`在 SASS（*运行 3.2.3*）中捕获已解析的父选择器 ( )，可能在 mixin 中。

不幸的是（*我在 github 上找到了对此的讨论*）以下首选解决方案不起作用：

```
@mixin append-to-captured-parent($append) {
    $selector: "&-#{$append}";
    #{$selector} { @content; }
}

.foo {
    @include append-to-captured-parent("bar") {
        color: blue;
    }
} 
```

所需的输出是：

```
.foo .foo-bar { color: blue; } 
```

是否有任何技巧或变通方法可以产生所需的输出？据我了解，这可能是不可能的，因为在 SASS 解析器构建整个节点树之前，父选择器不会被解析，此时它会遇到`&-bar { ... }`，它会在其上死亡：

```
Syntax error: Invalid CSS after "&": expected "{", was "-bar" 
```

我们可以欺骗 SASS 抢先解决这个问题吗？

**注意：**我对可以完成此任务的 SASS 扩展（ *Ruby 库）持开放态度；*不幸的是，此时我还不够精通 Ruby，无法自己动手（*不过我正在努力*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T17:05:46.330

好吧，我想出了一个变通办法。

这种方法只是隔离了预期的功能，并独立于实际层次结构对其进行管理。

首先，一些快速实用程序：

```
@function slice($list, $from, $into) {
    $result: ();
    @for $index from $from through $into {
        $result: append($result, nth($list, $index));
    }
    @return $result;
}

@function implode($list, $separator) {
    $result: nth($list, 1);
    @for $index from 2 through length($list) {
        $result: #{$result}#{$separator}#{nth($list, $index)};
    }
    @return $result;
} 
```

然后是胆子：

```
$-class: ();
@function get-class() {
    $top: if(length($-class) - 2 < 1, 1, length($-class) - 2);
    @return implode(slice($-class, $top, length($-class)), "-");
}

@mixin class($name) {
    $-class: append($-class, $name);
    .#{get-class()} {
        @content;
    }
    $-class: slice($-class, 1, length($-class) - 1);
} 
```

这里发生的是，“全局”变量`$-class`在每次调用 mixin 时维护一个嵌套堆栈`class`。它通过内爆堆栈上的前三个名称来创建 CSS 类声明（*如果需要，可以将其修改为完整堆栈*）

所以复制问题的例子：

```
@include class (foo) {
    color: red;
    @include class (bar) {
        color: blue;
    }
} 
```

将产生：

```
.foo { color: red; }
.foo .foo-bar { color: blue; } 
```

一个不那么简单的例子是：

```
@include class(list) {
    test: "list";
    @include class(item) {
        test: "item";
        @include class(heading) {
            test: "heading";
        }
        @include class(content) {
            test: "content";
            @include class(graphic) {
                test: "graphic";
            }
            @include class(summary) {
                test: "summary";
            }
            @include class(details) {
                test: "details";
            }
        }
        @include class(footing) {
            test: "footing";
        }
    }
} 
```

生产：

```
.list { test: "list"; }
.list .list-item { test: "item"; }
.list .list-item .list-item-heading { test: "heading"; }
.list .list-item .list-item-content { test: "content"; }
.list .list-item .list-item-content .item-content-graphic { test: "graphic"; }
.list .list-item .list-item-content .item-content-summary { test: "summary"; }
.list .list-item .list-item-content .item-content-details { test: "details"; }
.list .list-item .list-item-footing { test: "footing"; } 
```

# html - HTML 或 CSS，这是如何完成的？

> ID：14320807
> 
> 赞同：1
> 
> 时间：2013-01-14T14:57:08.243
> 
> 标签：html, css

我发现有人只使用 css 和 html 来制作 Windows 7 开始菜单的网站。我还注意到搜索栏中有一个放大镜。

我的问题是这个人是如何在那里得到字符/符号的，因为我在网上找不到任何放大镜，我认为他没有为这个菜单提供任何图像。

这是该[网站的链接](http://cssdeck.com/labs/pure-css3-windows-7-start-menu)

如果有人太懒，这里是该网站的图片，但如果没有来源，您可能无法找到它是什么，所以请访问该 [网站](http://cssdeck.com/labs/pure-css3-windows-7-start-menu)。

![在此处输入图像描述](../Images/6a147b0411329e1d9a9ae6b0efee459b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T15:00:13.343

他用`::before`和画`::after`了`<form>`一个圆和一条旋转的线。

您可以在 Chrome 的检查器中看到它：

```
#menu .left-menu form#search::before {
    content: "";
    width: 3px;
    height: 0px;
    border: 1px solid #666;
    position: absolute;
    z-index: 3;
    left: 100%;
    margin-left: -41px;
    top: 23px;
    -webkit-transform: rotate(-41deg);
    -moz-transform: rotate(-41deg);
    -ms-transform: rotate(-41deg);
    -o-transform: rotate(-41deg);
    transform: rotate(-41deg);

}

#menu .left-menu form#search::after {
    content: "";
    width: 5px;
    height: 5px;
    border: 1px solid #666;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    position: absolute;
    left: 100%;
    margin-left: -37px;
    top: 16px;

} 
```

# http - 如何通过http将更改推送到gerrit服务器？

> ID：14320817
> 
> 赞同：1
> 
> 时间：2013-01-14T14:57:50.897
> 
> 标签：http, push, gerrit

我安装并配置了我自己的 Gerrit 服务器。

现在，我想通过 http 将更改推送到 gerrit 服务器。但我不知道如何配置 apache & gerrit。

该网址说“已经支持通过http进行gerrite推送。”

[http://code.google.com/p/gerrit/issues/detail?id=1355](http://code.google.com/p/gerrit/issues/detail?id=1355)

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T05:56:42.760

好的，我找到了答案。

登录 gerrit-server-host -> 设置 -> http 密码 -> 生成密码。

通过 http 使用密码推送更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T03:54:29.673

**生成密码**按钮仅用于推/拉源代码，不适用于登录 Gerrit WebUI。

Gerrit 没有客户经理系统。

*   [repo-discuss - Re: gerrit 密码和网络问题 - msg#00267 - 最近的讨论 OSDir.com](http://osdir.com/ml/repo-discuss/2012-04/msg00267.html)

# drupal-7 - Drupal Commerce 和 SAP Business One

> ID：14320822
> 
> 赞同：3
> 
> 时间：2013-01-14T14:57:58.660
> 
> 标签：drupal-7, e-commerce, ubercart, sapb1

是否有可能将 Drupal Commerce（或 Ubercart）与 SAP Business One 连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:51:30.517

披露——我在一家提供 SAP 插件解决方案的公司工作，我们有一个名为 B1Integration 的产品，它是一个基于 SOAP 的系统，您可以使用它来提取数据并将其导入 SAP Business One。访问[www.beabetterbusiness.com](http://scn.sap.com/docs/DOC-7699)了解更多信息。不确定是否通过 SO T&C 允许这样做，但你去吧。--

像我们这样的其他几个 SAP 合作伙伴也有自己的集成平台。如果您想自己解决它，那么我建议您查看 SAP DI Server，而不是 SAP DI API，因为 DI Server 更适合外部数据交换（我们的产品基于 DI 服务器），因为它使用基于 XML 的导入格式。SAP 本身还有一个免费工具，称为 B1Webservice，它通过 Web 服务公开 SBO 对象，尽管它不受官方支持并且有点笨拙。查看 www.scn.com 并转到 Business One 部分。

[http://scn.sap.com/docs/DOC-7699](http://scn.sap.com/docs/DOC-7699)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T12:56:23.223

有几种方法可以做到这一点，主要是您可以使用 SAP Business One **DI Server**或**DI API**。您可以搜索有关如何在 SAP 中使用它们的文档。

在谈论 web (Drupal) SAP Business One 时推荐**DI Server**，但您可以毫无问题地使用**DI API**

# bash - 批量 Museclick 和 mousemove 事件

> ID：14320823
> 
> 赞同：2
> 
> 时间：2013-01-14T14:57:59.787
> 
> 标签：bash, batch-file, mouseevent

我想知道如何批量获取 mousemove 和 mouseclick 事件。有谁能够帮助我？谢谢你的建议！

...或者也许在bash中...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:11:14.553

简单的答案是否定的，你不能。

要为您指明正确的方向，请查看 C/C++/C# 的全局键盘和鼠标挂钩。

网络上有很多关于这些的[讨论。](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/d3e60bb8-aa67-46b6-a6a6-3f1ad6611f50)

# solr - 核心管理中是否有关于损坏的 Solr 核心的警告？

> ID：14320825
> 
> 赞同：1
> 
> 时间：2013-01-14T14:58:08.773
> 
> 标签：solr

核心管理员`http://0.0.0.0:8983/solr/admin/cores`提供以下输出。我可以在此信息中获取**有关损坏数据或其他不良迹象**的信息吗？

例如，我可以`result['status']['collection1']['uptime']`作为收集健康的证据吗？

```
{
  "responseHeader":{
    "status":0,
    "QTime":1},
  "defaultCoreName":"collection1",
  "initFailures":{},
  "status":{
    "collection1":{
      "name":"collection1",
      "isDefaultCore":true,
      "instanceDir":"solr/collection1/",
      "dataDir":"solr/collection1/data/",
      "config":"solrconfig.xml",
      "schema":"schema.xml",
      "startTime":"2013-01-14T13:20:38.775Z",
      "uptime":142141,
      "index":{
        "numDocs":0,
        "maxDoc":0,
        "version":1,
        "segmentCount":0,
        "current":true,
        "hasDeletions":false,
        "directory":"org.apache.lucene.store.NRTCachingDirectory:NRTCachingDirectory(org.apache.lucene.store.NIOFSDirectory@/home/jesvin/dev/apache-solr-4.0.0/example/solr/collection1/data/index lockFactory=org.apache.lucene.store.NativeFSLockFactory@f2bf5b; maxCacheMB=48.0 maxMergeSizeMB=4.0)",
        "userData":{},
        "sizeInBytes":65,
        "size":"65 bytes"}}}} 
```

# iphone - 从其他 viewController 访问 UIScrollView

> ID：14320826
> 
> 赞同：0
> 
> 时间：2013-01-14T14:58:11.877
> 
> 标签：iphone, ios, uiscrollview

我有两个viewController：AController（UIScrollView 是子视图）和BController

*   从 AController 我使用 presentModalViewController 到 BController 。从BController 我使用dismissModalViewControllerAnimated 回到AController。但是，我想从 BController 为 UIScrollView 设置隐藏。

请帮我 ！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:09:04.033

我认为最干净的方法是使用委托协议。AController 将成为 BController 的代表。并且在 BController 被解除之前，它可以调用协议的一个方法来提醒 AController，并在隐藏 scrollView 的同时提醒 AController 本身。

或者，您可以`-viewWillAppear`在 AController 实现文件中覆盖，以测试“self.presentedController”是否是 BController 的子类。如果是，您可以隐藏scrollView。

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    if ([self.presentedViewController isKindOfClass:[BController class]]) {
        //hide the scroll view
    }
} 
```

另外，我建议您不要使用`-dismissModalViewControllerAnimated:`，除非您想支持 iOS 4 及更早版本：此方法已在 iOS 6 中弃用，您最好`- dismissViewControllerAnimated:completion:`立即使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:11:45.447

使用委托，如果您在 AView viewWillAppear 通知中没有太多的经验使用：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(hideScrollView) name:@"hideScrollView" object:nil]; 
```

并在您的 BView 中使用：

```
[[NSNotificationCenter defaultCenter]
     postNotificationName:@"hideScrollView" object:nil]; 
```

结果，当您可以隐藏滚动视图时，我将在 AView 中触发 hideScrollView 方法。

# php - PHP Preg_Match 从字符串中提取逗号分隔值

> ID：14320834
> 
> 赞同：-2
> 
> 时间：2013-01-14T14:58:29.267
> 
> 标签：php, regex, string

> **可能重复：**
> [PHP preg_match_all：提取逗号分隔列表](https://stackoverflow.com/questions/10193176/php-preg-match-all-extract-comma-seperated-list)

我有一个看起来像这样的字符串：`[something ="1,2,3"]` 我需要将引号之间的所有内容都放入一个字符串中。我确定 preg_match 是这样做的方法，但我不确定要使用的表达式。

```
$content = [something = "1,2,3"];
$new_string = preg_match('?regex?','$content'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:00:53.347

试试这个：

```
$content = '[something = "1,2,3"]';

if (preg_match('/"([^"]+)"/', $content, $matches)) {
    $matchedContent = $matches[1];
} 
```

# javascript - 括号在javascript中的作用

> ID：14320835
> 
> 赞同：5
> 
> 时间：2013-01-14T14:58:36.493
> 
> 标签：javascript

我想知道以下和括号的作用之间的区别：

```
foo.bar.replace(a,b) 
```

和

```
(foo.bar).replace(a,b) 
```

括号是否要求在继续使用替换方法之前先评估包含的表达式？我在我正在维护的代码中看到了这一点，并且很好奇为什么它是必要的？例如

```
location.hash.replace(a,b) 
```

和

```
(location.hash).replace(a,b) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T15:02:40.790

您的示例中不需要它。

这个想法确实是在继续之前必须评估括号内的块。

在以下情况下需要它

```
(new Date()).getMilliseconds() 
```

（*正如@Teemu 所指出的那样，在这种情况下并不需要*）

* * *

通常使用这种语法来避免使用临时变量。

```
var result = 5.3 + 2.9;
console.log( result.toFixed(1) ); 
```

可以变成

```
console.log( (5.3 +2.9).toFixed(1) ); 
```

如果您要使用`5.3 + 2.9.toFixed(1)`将`toFixed(1)`仅应用于 2.9，则返回一个字符串，然后将其与 5.3 连接，结果将是***5.32.9***

# python - 在线程中使用 while True 循环时出现 wxPython Pango 错误

> ID：14320836
> 
> 赞同：4
> 
> 时间：2013-01-14T14:58:38.070
> 
> 标签：python, multithreading, wxpython

在这个程序中，当我在线程中使用 while True 循环时出现错误。没有循环，我不会出错。当然，在实际程序中，我不会连续更新标签。知道我做错了什么吗？

这是程序：

```
import wx
import thread

class Example(wx.Frame):

    def __init__(self, parent): 
        wx.Frame.__init__(self,parent)
        self.InitUI()

    def InitUI(self):
        self.SetSize((250, 200))
        self.Show(True)

        self.text = wx.StaticText(self, label='',pos=(20,30))

        thread.start_new_thread(self.watch,(self,None))

    def watch(self,dummy,e):
        while True:
            self.text.SetLabel('Closed')

def main():
    ex = wx.App()
    Example(None)
    ex.MainLoop()    

if __name__ == '__main__':
    main() 
```

这是错误：

```
Pango:ERROR:/build/pango1.0-LVHqeM/pango1.0-1.30.0/./pango/pango-            layout.c:3801:pango_layout_check_lines: assertion failed: (!layout->log_attrs) Aborted 
```

关于我做错了什么的任何建议？我（显然）是线程新手。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T15:27:48.993

我不确定这是否是导致您出现问题的原因，但是...您不应该从另一个线程与 GUI 交互。你应该使用**[`wx.CallAfter()`](http://wiki.wxpython.org/CallAfter)**. 我也会考虑在循环中添加睡眠。

**[wx.CallAfter()](http://www.wxpython.org/docs/api/wx-module.html#CallAfter)**文档说：

> 在当前和待处理的事件处理程序完成后调用指定的函数。这对于从非 GUI 线程进行 GUI 方法调用也很有用。任何额外的位置或关键字参数都会在调用时传递给可调用对象。

更新后的代码将是：

```
import wx
import thread
import time

class Example(wx.Frame):
    def __init__(self, parent): 
        wx.Frame.__init__(self,parent)
        self.InitUI()

    def InitUI(self):
        self.SetSize((250, 200))
        self.Show(True)

        self.text = wx.StaticText(self, label='',pos=(20,30))

        thread.start_new_thread(self.watch,(self,None))

    def watch(self,dummy,e):
        while True:
            time.sleep(0.1)
            wx.CallAfter(self.text.SetLabel, 'Closed')

def main():
    ex = wx.App()
    Example(None)
    ex.MainLoop()    

if __name__ == '__main__':
    main() 
```

也许您也可以考虑使用**[wx.Timer](http://www.wxpython.org/docs/api/wx.Timer-class.html)**。

顺便说一句：您的代码在我的装有 Windows 7 和 wxPython 2.8 的 PC 上运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T19:05:40.923

除了后台线程不更新规则之外，我发现在类似情况下（UI 对象的高频更新），仅在值与已显示的值发生变化时才更新值确实有帮助。这可以大大减少应用程序的负载，因为如果值没有改变，那么就不需要发送和处理绘制事件、将像素移动到屏幕等。所以在这个例子中，我将添加一个名为的新方法通过 CallAfter 将小部件中的当前值与请求的值进行比较，并且仅在它们不同时才调用 SetLabel。

# javascript - JS正则表达式

> ID：14320841
> 
> 赞同：-1
> 
> 时间：2013-01-14T14:58:47.450
> 
> 标签：javascript, regex

我正在尝试将这些表达式合二为一

```
string.match(/<%[a-z]+%>/g, 'value')

string.match(/&lt;%[a-z]+%&gt;/g, 'value') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:01:57.937

如果要检索两个表达式的匹配项，可以这样做：

```
 /(<%[a-z]+%>|&lt;%[a-z]+%&gt;)/g 
```

# java - 将 bean 类型的事务返回到队列

> ID：14320843
> 
> 赞同：1
> 
> 时间：2013-01-14T14:58:55.260
> 
> 标签：java, glassfish, jms, java-ee-6

我们有一个应用程序部署到带有 MDB 的 glassfish 服务器，由于其他原因，它必须使用 Bean 类型的事务 (TransactionManagementType.BEAN)。

在某些情况下，在 onMessage() 方法中，我们希望能够查看消息并拒绝它。“拒绝”是指将消息放回队列并稍后重新发送。

我搜索了一下，但我发现的所有内容似乎都说我应该将事务类型更改为容器并调用 setRollbackOnly()。但是，正如我上面所说，由于其他限制，这不是一个选择。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:27:21.813

尽管 MDB 可能会抛出异常并回滚当前事务，从而强制调用者重新发送消息，但 bean 管理的事务方法无法加入现有事务。我认为要实现这种行为，您应该在发送方和接收方 MDB 之间实现通信协议，使用数据存储来建模消息队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T16:58:55.953

看这个：

[http://www.datadisk.co.uk/html_docs/ejb/ejb3_mdb.htm](http://www.datadisk.co.uk/html_docs/ejb/ejb3_mdb.htm)

它说`Client-acknowledge`MDB不支持in模式。

# jquery - jquery modal 在 div 中加载 php

> ID：14320844
> 
> 赞同：0
> 
> 时间：2013-01-14T14:58:55.900
> 
> 标签：jquery, load, modal-dialog

这是在一个 php 循环中；

```
echo "<td><a id='gbdetail' href='#gbdetay' data-toggle='modal' onClick='getGBdetay()' class='btn btn-small' data-original-title=' click to see detail ' data-placement='left' rel='tooltip' href2='lookgb.php?gbid=".$wrgb['id']."'>"."<i class='gicon-edit'></i></a></td>"; 
```

这是jquery部分；

```
function getGBdetay()  { 
    $('#gbdetail').click(function(){
        var url = $(this).attr('href2'); 
        $("#gbbody").load(url); 
    }); 
}; 
```

它仅适用于第一行，内容不会加载到其他行中。什么会导致这个？

**编辑：**

它适用于更改选择器。但现在它在第一次点击时不起作用。在第一次点击内容不加载。第一次单击后，它可以正常工作。为什么它在第一次点击时不起作用？

```
 function getGBdetay()  { 
  $('.btn.btn-small.gbdetayl').click(function(){
   var url = $(this).attr('href2');
   $("#gbbody").load(url);
});

 echo "<td><a target='_blank' href='#gbdetay' data-toggle='modal'  onClick='getGBdetay()' class='btn btn-small gbdetayl' data-original-title=' click to see detail ' data-placement='left' rel='tooltip' href2='lookgb.php?gbid=".$wrgb['id']."'>"."<i class='gicon-edit'></i></a></td>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:04:45.517

因为您只能在页面中创建一次 ID。

您可以给`<a>`s 相同的类而不是相同的 ID，然后您可以使用它来选择所有元素。你已经用作`btn`类，所以你可以做

```
function getGBdetay()  { 
    $('.btn').click(function(){
        var url = $(this).attr('href2'); 
        $("#gbbody").load(url); 
    }); 
}; 
```

然后每个按钮都将具有此 onclick 功能。可能需要添加另一个类或另一种方式来选择所有链接。

# javascript - 插入对象 ONTO 标签

> ID：14320848
> 
> 赞同：1
> 
> 时间：2013-01-14T14:59:04.400
> 
> 标签：javascript, html

是否可以在视频标签中的视频演示文稿上“放置”一个对象？我有一个外部对象（视频的倒数计时器），我想把它放在视频上（比如广告 ie）。

![例子](../Images/51936c92887be2c70ee570c3a3c57b5a.png)

我已经尝试过使用此代码，但计时器只是在视频之后，而不是在。

```
 <video id="video1" controls autoplay ><div id="time"></div></video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:02:23.947

是的，只需使用 CSS 定位即可。例如，您可以使标签使用相对定位，然后绝对定位，然后您可以将其放置在视频框中您希望的任何位置。

不过，我可能会将计时器放在视频之外，作为兄弟元素，并将它们都包含在具有相对位置的其他内容中：

```
<div style="position: relative;">
    <video></vide>
    <div id="timer" style="position: absolute;"></div>
</div> 
```

# c# - WCF - StreamedResponse - 最小延迟

> ID：14320849
> 
> 赞同：0
> 
> 时间：2013-01-14T14:59:04.677
> 
> 标签：c#, .net, wcf, silverlight, streaming

我正在尝试使用 SilverLight 5 应用程序和 .NET 4 服务器之间的 WCF 流式传输实时数据。我需要的是服务器和客户端之间的最小延迟。但是，看起来 WCF 在发送数据之前正在缓冲数据。我正在关注此站点中的示例：http: [//blogs.msdn.com/b/carlosfigueira/archive/2010/07/08/using-transfermode-streamedresponse-to-download-files-in-silverlight-4。 .aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2010/07/08/using-transfermode-streamedresponse-to-download-files-in-silverlight-4.aspx) _ 我已经实现了自定义流，我看到我在一秒钟内获得了例如 10 次小块（小于 400 字节）的读取，但是在网络上服务器每 10 秒返回一次数据（它返回 32776 字节 - 这是我从中得到的数字线鲨）。我希望服务器在准备好后立即返回数据，或者至少将缓冲区设置为非常小的值，例如 512 字节。

我试图更改客户端和服务器配置，但没有运气。我的配置如下所示：

客户

```
<client>
    <endpoint address=""
          binding="customBinding" bindingConfiguration="CustomBinding_IWcfDownloadService_StreamedResponse"
          contract="IWcfDownloadService" name="CustomBinding_IWcfDownloadService_StreamedResponse" />
</client>

<bindings>
  <customBinding>
    <binding name="CustomBinding_IWcfDownloadService_StreamedResponse">
      <binaryMessageEncoding />
      <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" transferMode="StreamedResponse" />
    </binding>
  </customBinding>
</bindings> 
```

服务器

```
<services>
  <service name="WcfDownloadService">
    <endpoint address="" binding="customBinding" bindingConfiguration="customBinding0" contract="IWcfDownloadService" />        
  </service>
</service>

<bindings>
  <customBinding>
    <binding name="customBinding0">
      <binaryMessageEncoding />
      <httpTransport transferMode="StreamedResponse" />          
    </binding>
  </customBinding>
</bindings> 
```

# java - 在编译时编织时，类路径上是否需要 AspectJ？

> ID：14320861
> 
> 赞同：4
> 
> 时间：2013-01-14T14:59:35.510
> 
> 标签：java, aop, aspectj

几天前我问了[这个问题，并设法使用编译时编织使其工作。](https://stackoverflow.com/questions/14285591/weaving-in-tostring-implementation-with-aspectj)

但是，当应用程序运行并调用我通过 AOP 混合到 DTO 中的 toString() 方法时，我得到以下异常。

我没想到运行时类路径中需要 AspectJ。毕竟，我使用了编译时编织，所以字节码应该已经处于最终状态，对吧？为什么预计 AspectJ 会在运行时出现？

```
java.lang.ClassNotFoundException: org.aspectj.lang.NoAspectBoundException
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:506)[osgi-3.6.2.R36x_v20110210.jar:]
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)[osgi-3.6.2.R36x_v20110210.jar:]
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)[osgi-3.6.2.R36x_v20110210.jar:]
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)[osgi-3.6.2.R36x_v20110210.jar:]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)[:1.6.0_35]
    ... 51 more 
```

有没有办法指示 AspectJ 在生成的字节码中删除对自身的所有引用？

注意：我在 OSGi 环境中运行 - 但这绝对无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T01:43:43.223

无论您使用编译时、编译后时间还是加载时编织，编织的字节码都将依赖于少数类型 - 将它们放入 jar 中被认为比将它们生成到每个已编译的应用程序中更容易。这些类型被封装在小 jar 'aspectjrt.jar' 中。您不需要类路径上的 weaver jar 或编译器 jar，只需要小的运行时 jar。它包含一些不同的东西：

*   可能已用于编写方面的运行时可见注释的定义（@Before，@Aspect）
*   出现问题时的异常类型 (NoAspectBoundException) 或实现语言功能 (SoftException)
*   用于实现某些语言功能的实用程序代码，例如 cflow 线程本地堆栈管理。
*   thisJoinPoint 的所有支持类。当您在 thisJoinPoint 上访问 getSignature() 之类的内容时，您可能会得到一个 MemberSignature。

如果您不使用这些语言功能，如果可以避免很多这些，但 NoAspectBoundException 可能仍然是一个问题——即使是最简单的方面也取决于此。现在没有办法编译可以完全避免 jar 依赖。

可以修改 AspectJ*以*生成额外的代码来完全避免依赖，但这不是一个常见的请求，因此没有对其进行任何工作。

（有些构建的 aspectjrt.jar 包含正确的 OSGi 清单信息，可在该环境中使用 - 标准发行版中包含的 jar 现在无法正确获取该清单）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:09:59.453

我相信无论编织何时发生，您仍然需要 AspectJ 运行时库。

# c# - 来自后端服务的 OAuth2 访问和刷新令牌

> ID：14320863
> 
> 赞同：0
> 
> 时间：2013-01-14T14:59:45.327
> 
> 标签：c#, google-api, google-play

我是 Android 应用程序的后端 Web 服务开发人员。我们正在以订阅形式为应用提供服务，并正在考虑使用 Google Play 进行订阅购买。我们有一个后端许可证服务器来跟踪应用程序中可供用户使用的服务。

出于某些原因，我们希望从后端获取购买的订阅状态。但是我遇到了从 Google 的 OAuth2 网络服务获取访问和刷新令牌的问题。

我已按照以下页面的说明进行操作：[Google Play Android Developer API](https://developers.google.com/android-publisher/authorization)

我没有直接访问用于设置客户端 ID 的 Google 帐户的权限，并且我让经理有权执行网络呼叫以获取初始代码，然后将其提供给我。然后我使用它通过 HTTP POST 调用授权身份验证，但使用 Json 获取 HTTP 400，只包含“invalid_grant”错误。以下是 POST 代码的示例：

```
 string postData = String.Format("code={0}&client_id={1}&client_secret={2}&redirect_uri={3}&grant_type=authorization_code",
        oauthCode,
        clientId,
        clientSecret,
        redirectURL
        );
    byte[] data = Encoding.UTF8.GetBytes(postData);

    try
    {

        HttpWebRequest wreq = (HttpWebRequest)WebRequest.Create("https://accounts.google.com/o/oauth2/token");
        wreq.Method = "POST";
        wreq.ContentType = "application/x-www-form-urlencoded";
        wreq.ContentLength = data.Length;
        wreq.Accept = "application/json";

        using (Stream wstream = wreq.GetRequestStream())
        {
            wstream.Write(data, 0, data.Length);
        }

        HttpWebResponse wresp = (HttpWebResponse)wreq.GetResponse();
        if (wresp.StatusCode == HttpStatusCode.OK)
        {
            using (Stream rstream = wresp.GetResponseStream())
            {
                StringBuilder jresp = new StringBuilder();
                byte[] buffer = new byte[512];
                int read = 0;

                while ((read = rstream.Read(buffer, 0, buffer.Length)) > 0)
                    jresp.Append(Encoding.UTF8.GetString(buffer, 0, read));

                Console.WriteLine(jresp.ToString());
            }
        }
        else
            Console.WriteLine("damn...");

    }
    catch (WebException wex)
    {
        Console.WriteLine(wex.ToString());
        Console.WriteLine("================================");

        if (wex.Response != null)
        {
            StringBuilder inner = new StringBuilder();
            byte[] buffer = new byte[512];
            int read = 0;

            using (Stream xstream = wex.Response.GetResponseStream())
            {
                while ((read = xstream.Read(buffer, 0, buffer.Length)) > 0)
                    inner.Append(Encoding.UTF8.GetString(buffer, 0, read));
            }

            Console.WriteLine(inner.ToString());
        }

    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.ToString());
    } 
```

我担心我将无法从与初始代码身份验证 Web 浏览器调用不同的位置执行此操作，并且无法从 Web 浏览器体验的后端执行访问/刷新令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:25:30.560

我写这个作为答案，以防其他人需要它。这是我得出的结论：

最初的“grant_type=authorization_code”调用似乎必须在与 OAuth 代码请求相同的会话中完成。

我能够访问 Google 帐户凭据，并让重定向代码执行初始访问令牌请求，该请求也返回刷新令牌。它能够做到这一点。这似乎意味着初始访问和刷新令牌请求无法在后端进程中完成，而必须在会话环境（例如 Web 浏览器）中完成。

然后我转身从 C# 发出一个标准的发布请求，用接收到的刷新令牌刷新访问令牌，并且能够获得一个新的访问令牌。

编辑：作为提醒。如果您已经为特定的客户端 ID 和密码完成了初始授权代码调用。任何重试调用它，都不会在结果 JSON 中返回 refresh_token。只有当前的 access_token。因此，请确保将其存放在某个地方！

# ruby-on-rails-3 - PHPBB 身份验证 + Rails

> ID：14320865
> 
> 赞同：3
> 
> 时间：2013-01-14T14:59:48.943
> 
> 标签：ruby-on-rails-3, phpbb3

我有一个 phpbb 论坛，我正在开发一个用于移动友好应用程序的 rails 应用程序。我需要一种在 phpbb 和 rails 之间执行 SSO 的方法。

我在 github 上找到了一个名为 phpbb-auth 的 ruby​​ gem，但它已经超过 3 年没有更新了。

我最初的想法是在 rails 中模仿 phpass（我相信这是最新的 phpbb 使用的），然后在使用 Devise/Warden 进行身份验证时让 rails 引用 phpbb_users 表。

然而，这项任务变得令人生畏，并且将成为另一个需要管理的库。

我的下一个想法是为 Warden 编写一个插件来检查 phpbb_session，如果它在那里，然后继续。否则将它们重定向到 phpbb 登录页面。

有没有人遇到过这样做，如果有，你使用的方法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T15:36:23.037

我现在正在做同样的事情（实际上已经成功了）。

因此，您基本上有几个选项，具体取决于您的设置/部署。考虑以下：

*   你会在同一个域或不同域上部署你的 Rails 应用程序和 phpbb 吗？
*   让两个站点相互访问数据库。
*   您希望使用哪种身份验证系统？因此，您希望 rails（即设计、authlogic 或其他）验证和处理用户或 phpbb db auth（即在 phpbb 用户表中存储登录名和密码）。

到目前为止，我已经通过 phpbb db auth + single domain 与我的应用程序实现了身份验证（phpbb：forum.example.com，我的 rails 应用程序在：example.com 用于 cookie 共享）。在这种情况下，您可以使用您提到的 gem 中的代码（phpbb-auth）。这不是很难。代码仍然可以正常工作（可能进行了一些调整）。

**但**

我不喜欢这种方式:) 我认为我的网站是一个主要应用程序，不希望论坛处理我的用户......

因此，据我了解，从 phpbb 3 开始，您可以为 phpbb 的外部身份验证编写插件（[API 文档](https://wiki.phpbb.com/Authentication_plugins)）。

网上有几个 Python 和 Django 的例子。看起来像[这个](http://code.google.com/p/django-login-for-phpbb/)用于相同的域 + db 访问。看起来像[这个](http://code.google.com/p/phpbb-json-auth/)用 JavaScript 远程做事。那些是在 Python 中的，但里面没有太多的 Python，只有一些例子:)，所以你可以很容易地将它们用于 rails，我认为。

[这个问题](https://stackoverflow.com/questions/279655/how-can-i-integrate-users-logins-from-my-site-into-phpbb)讨论相同的东西，但以更通用的方式。

# django - 如何在 Selenium/Django 单元测试中创建会话变量？

> ID：14320873
> 
> 赞同：5
> 
> 时间：2013-01-14T15:00:02.323
> 
> 标签：django, django-views, selenium-webdriver

我正在尝试编写一个使用 Selenium 来测试 Django 视图的功能测试。当用户来到一个页面（“page2”）时，呈现该页面的视图期望找到一个会话变量“uid”（用户 ID）。我已经阅读了六篇关于应该如何完成的文章，但没有一篇对我有用。下面的代码显示了 Django[文档](https://docs.djangoproject.com/en/dev/topics/testing/overview/#django.test.client.Client.session)说明它应该如何完成，但它对我也不起作用。当我运行测试时，视图永远不会完成执行，并且我收到“发生服务器错误”消息。有人可以告诉我我做错了什么吗？谢谢你。

视图.py：

```
from django.shortcuts import render_to_response

def page2(request):
    uid = request.session['uid']
    return render_to_response('session_tests/page2.html', {'uid': uid}) 
```

测试.py：

```
from django.test import LiveServerTestCase
from selenium import webdriver
from django.test.client import Client

class SessionTest(LiveServerTestCase):

    def setUp(self):
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(3)
        self.client = Client()
        self.session = self.client.session
        self.session['uid'] = 1

    def tearDown(self):
        self.browser.implicitly_wait(3)
        self.browser.quit()

    def test_session(self):
        self.browser.get(self.live_server_url + '/session_tests/page2/')
        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Page 2', body.text) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:35:42.310

以下是解决此问题的方法。James Aylett 在上面提到会话 ID 时暗示了解决方案。jscn 展示了如何设置会话，但他没有提到会话密钥对解决方案的重要性，也没有讨论如何将会话状态链接到 Selenium 的浏览器对象。

首先，您必须了解，当您创建会话键/值对（例如 'uid'=1）时，Django 的中间件将在您选择的后端（数据库、文件等）中创建会话键/数据/到期日期记录。 ）。然后，响应对象将在 cookie 中将该会话密钥发送回客户端的浏览器。当浏览器发送后续请求时，它将返回一个包含该密钥的 cookie，然后中间件使用该密钥来查找用户的会话项。

因此，解决方案需要 1.) 找到一种方法来获取创建会话项时生成的会话密钥，然后；2.) 找到一种方法通过 Selenium 的 Firefox webdriver 浏览器对象将该密钥传递回 cookie。这是执行此操作的代码：

```
selenium_test.py:
-----------------

from django.conf import settings
from django.test import LiveServerTestCase
from selenium import webdriver
from django.test.client import Client
import pdb

def create_session_store():
    """ Creates a session storage object. """

    from django.utils.importlib import import_module
    engine = import_module(settings.SESSION_ENGINE)
    # Implement a database session store object that will contain the session key.
    store = engine.SessionStore()
    store.save()
    return store

class SeleniumTestCase(LiveServerTestCase):

    def setUp(self):
        self.browser = webdriver.Firefox()
        self.browser.implicitly_wait(3)
        self.client = Client()

    def tearDown(self):
        self.browser.implicitly_wait(3)
        self.browser.quit()

    def test_welcome_page(self):
        #pdb.set_trace()
        # Create a session storage object.
        session_store = create_session_store()
        # In pdb, you can do 'session_store.session_key' to view the session key just created.

        # Create a session object from the session store object.
        session_items = session_store

        # Add a session key/value pair.
        session_items['uid'] = 1
        session_items.save()

        # Go to the correct domain.
        self.browser.get(self.live_server_url)

        # Add the session key to the cookie that will be sent back to the server.
        self.browser.add_cookie({'name': settings.SESSION_COOKIE_NAME, 'value': session_store.session_key})
        # In pdb, do 'self.browser.get_cookies() to verify that it's there.'

        # The client sends a request to the view that's expecting the session item.
        self.browser.get(self.live_server_url + '/signup/')
        body = self.browser.find_element_by_tag_name('body')
        self.assertIn('Welcome', body.text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T00:03:06.500

在 Django 的 bug 跟踪器中有几张关于这类问题的票，主要的一张似乎是：[https](https://code.djangoproject.com/ticket/10899) ://code.djangoproject.com/ticket/10899几个月没有任何动静。基本上，您需要做一些额外的设置才能使会话正常工作。这对我有用（可能不适用于您的特定设置，因为我没有使用 Selenium）：

```
def setUp(self):
    from django.conf import settings
    engine = import_module(settings.SESSION_ENGINE)
    store = engine.SessionStore()
    store.save()
    self.client.cookies[settings.SESSION_COOKIE_NAME] = store.session_key 
```

现在您应该能够访问`self.client.session`并且它应该记住您对其所做的任何更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-19T13:13:53.797

这是我对 django==2.2 的解决方案。

```
 from importlib import import_module
    from django.conf import settings
    from django.contrib.auth import get_user_model

    # create the session database instance
    engine = import_module(settings.SESSION_ENGINE)
    session = engine.SessionStore() 

    # create the user and instantly login
    User = get_user_model()
    temp_user = User.objects.create(username='admin')
    temp_user.set_password('password')
    self.client.login(username='admin', password='password')

    # get session object and insert data
    session = self.client.session
    session[key] = value
    session.save()
    # update selenium instance with sessionID
    selenium.add_cookie({'name': 'sessionid', 'value': session._SessionBase__session_key,
                              'secure': False, 'path': '/'}) 
```

# c# - 随机对象在后续调用中变得非随机？

> ID：14320874
> 
> 赞同：1
> 
> 时间：2013-01-14T15:00:03.780
> 
> 标签：c#, memory, optimization

> **可能重复：**
> [随机数生成器仅生成一个随机数](https://stackoverflow.com/questions/767999/random-number-generator-only-generating-one-random-number)

我的工作中有一种方法，它通过在一组单词之间随机选择来生成一个句子，如下所示：

```
private string generateTest(string test)
{
    test = test.ToLower();
    string sentence = "";
    for (int c = 0; c < 30; c++)
    {
        Random r = new Random();
        int len = r.Next(3, 7);
        string word = "";
        for (int i = 0; i < len; i++)
        {
            word += test[r.Next(0, test.Length)];
        }
        sentence += word + ' ';
    }
    return sentence;
} 
```

但是，问题是前6个词随机生成后，后面的所有词都是完全一样的东西。例如

> aqaaaz, qqzaq, aqqza, azqq, aazzq, aqqa, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq, azzzq。 ...

然后，即使我重新启动程序，同样的事情也适用。我在想这是 .NET 运行时做一些自动优化。谁能解释得更好？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T15:01:00.213

您正在为循环的每个周期生成实例。将您的代码更改为：

```
Random r = new Random();
for (int c = 0; c < 30; c++)
{
... 
```

此外，您可能希望为其分配一个有意义的种子。现在，您没有将任何内容传递给构造函数，如果您重新创建相同的实例，这可能会产生并非真正随机的结果。

**编辑**：正如影子向导正确指出的那样，给它相同的种子会产生相同的结果。当我说“*有意义的种子*”时，我暗示了一些具有随机或伪随机属性的东西。有[很多](http://csharpindepth.com/Articles/Chapter12/Random.aspx)方法可以产生更多不可预测的结果，但要解决您的问题，将实例移出循环 - 或者将其实例化为包含类的成员 - 就​​足够了。您对种子或 RNG 的选择应取决于您的要求。

# arrays - Qt 整数数组模型

> ID：14320881
> 
> 赞同：0
> 
> 时间：2013-01-14T15:00:15.503
> 
> 标签：arrays, qt, user-interface, integer

例如，要表示一个`QStringList`int GUI 列表视图，我们只需创建一个`QStringListModel`并将其绑定到 GUI。[这里的例子](http://www.youtube.com/watch?v=EJf-vZ6FQfc)。

在我的情况下，我有一个充满整数的文件，我要做的是将文件解析到我的内存中，例如整数数组，这样我就可以处理数据。现在，我如何将这些数据绑定到我的 gui，如果整数数组不合适，我应该选择什么样的数据结构？

```
int array[3] = {1,3,2};
model = new Q***Model(this);
model->set***(array); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:24:46.250

您可以简单地将整数转换为字符串，使用从整数中获得的字符串创建标准项目模型的 Qlist。为每个标准项分配其整数数据；比将标准项目附加到 qlist。检查[http://doc.qt.digia.com/qt/qstandarditem.html#setdata](http://doc.qt.digia.com/qt/qstandarditem.html#setdata)

转换为字符串的几种方法[http://www.qtforum.org/article/24878/convert-int-to-qstring.html](http://www.qtforum.org/article/24878/convert-int-to-qstring.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:15:11.603

要将自定义数据绑定到视图，您需要沿着 QStandardItem 使用 QStandardItemModel，使用该组合还应该消除使用数组来存储文件输入的需要。
[QStandardModelItem](http://doc.qt.digia.com/qt/qstandarditemmodel.html#details)

# c# - 如何配置本地数据库，使其适用于所有计算机

> ID：14320884
> 
> 赞同：-1
> 
> 时间：2013-01-14T15:00:31.623
> 
> 标签：c#, sql-server, visual-studio, app-config, publish

这是我的 app.config 文件。我正在使用带有 c# 的 vs 2012。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<configSections>
</configSections>
<startup> 
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
</startup>
<connectionStrings>

<add name="Small_Business_Management.Properties.Settings.businessdataConnectionString1"
    connectionString="Data Source=(LocalDB)\v11.0;AttachDbFilename=|DataDirectory|\businessdata.mdf;Integrated Security=True"
    providerName="System.Data.SqlClient" />

 </connectionStrings>
 </configuration> 
```

现在我在解决方案中包含了数据库文件 businessdat.mdf。现在当我发布应用程序时，它在其他计算机上不起作用。它在我的工作正常。在其他计算机上，它要求我安装 sql server。如何使用本地数据库发布，以便它可以在其他计算机上安装 sql server 的情况下工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:37:44.830

如果要使用 SQL Server 2012 的 LocalDB 功能，则需要在部署到的每台设备上**安装 LocalDB 功能。**您可以在[此处](http://www.microsoft.com/betaexperience/pd/SQLEXPCTAV2/enus/default.aspx)找到安装程序。
可以进行静默安装，因此您可以将其包含在应用程序安装程序中（如果您有的话）：

```
msiexec /i SqlLocalDB2012.msi /qn IACCEPTSQLLOCALDBLICENSETERMS=YES 
```

更多信息[在这里](http://msdn.microsoft.com/en-us/library/hh510202.aspx)和[这里](http://www.sqlcoffee.com/SQLServer2012_0004.htm)

如果您真的不想（或不能）在您部署到的设备上安装任何东西，您可以随时查看[sqlite](http://www.sqlite.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:38:00.000

你基本上有两个选择：

1.  在其他计算机上安装 LocalDB - 您可以将其集成到应用程序的安装/部署过程中。
2.  使用嵌入式数据库

为了扩展上述内容，为了避免安装，您必须使用嵌入式数据库，以便将必要的库与您的应用程序一起部署。在上下文中，显而易见的选择是 SQL Server Compact，它应该与您已经拥有的代码和 SQL 一起使用，即您很有可能只需要添加文件/引用并更改连接字符串。

# javascript - 创建一个javascript对象并调用它的方法

> ID：14320885
> 
> 赞同：4
> 
> 时间：2013-01-14T15:00:33.967
> 
> 标签：javascript, class, methods

我在一个文件中有以下代码，但它似乎不起作用。

我基本上是在尝试创建一个对象并尝试简单地调用对象的函数并显示它，它没有这样做，我不知道为什么。

```
var mice = new Mice(10, 10);
function Mice(posX, posY)
{
    this.x = posX;
    this.y = posY;
    this.moveLeft = function ()
    {
        this.x = x - 1;
    }

    this.moveRight = function ()
    {
        this.x = x + 1;
    }

    this.getXPos = function ()
    {
        return this.x;
    }
}

document.onkeydown = function(e)
{
    //document.getElementById("mainBody").innerHTML = e.keyCode;

    switch(e.keyCode)
    {
    case 37:
        //document.getElementById("mainBody").innerHTML = "you have pressed left";
        mice.moveLeft();
        document.getElementById("mainBody").innerHTML = mice.getXPos();
        break;
        default:
    //do nothing
    break;
    }
} 
```

任何试图让这项工作的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T15:03:33.780

在您的“移动”功能中，您必须**始终**参考`this.x`：

```
 this.x = this.x - 1; 
```

同样，“getXPos”函数还必须：

```
 return this.x; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T15:02:34.307

```
return x; 
```

您从未在`x`任何地方创建变量。

你的意思是`return this.x;`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T15:05:01.177

您的 getXPos() 方法的范围内没有 x 变量。我想你的意思是`return this.x`

# sql-server - 如何省略系统数据库并允许 SQL Server 2008 代理作业超过 ERROR_NUMBER 208？

> ID：14320886
> 
> 赞同：0
> 
> 时间：2013-01-14T15:00:37.783
> 
> 标签：sql-server, sql-server-2008, sp-msforeachdb

我创建了一个针对服务器上所有数据库运行的 SQL Server 2008 代理作业。我正在使用未记录的 MS 程序，`sp_MSforEachDB`. 我只指定要处理的某些数据库，当找到这些数据库时，如果`ERROR_NUMBER = 208`，我想创建一个表并处理以继续到下一个数据库。我还想省略系统数据库，这样表格就不会在系统数据库中创建。我虽然通过指定要处理的数据库的名称，但可以创建一个不存在的表。如果在特定数据库上设置了“焦点”，我在下面显示的代码有效。此外，当我运行它时，我在主数据库中创建了一个表，我不想这样做。我试图用我创建的代码做的是： 1\. 选择 SQL 服务器上名称为“xyz_%”的所有数据库 2\. 如果表“SESSIONS”存在，则删除所有早于 5 分钟的记录 3\. 如果表“SESSIONS”不存在，然后创建它并继续处理 - 这就是我得到的地方`208 error - invalid object because this table does not exist` 当作业发现没有 Sessions 表时，作业停止并且不处理其他数据库。我需要处理 1 中的所有命名数据库。如果 SESSIONS 表不存在，我会收到一个 208 错误，提示“无效的对象名称'master.SchemaName.sessions'。如果我将'焦点'设置为没有会话表的数据库，我的代码将运行并创建表但我仍然收到错误 208 - Invalid object name 'master.SchemaName.sessions'。没有显示其他错误。

如果有人可以查看我的代码以了解我的问题出在哪里，那就太好了。

我已通过使用下面的 Try Catch 验证我收到了 208 错误。我在第二次尝试 Catch 时也收到错误 2760，表示指定的架构不存在或我无权访问。我是这台服务器的管理员。

我已经使用 SQL 几年了，我不认为自己是专家。我已经在 Google 上对此进行了研究，以得出下面的代码。任何帮助，将不胜感激。

```
declare @ERROR INT

BEGIN TRY

exec sp_MSforeachdb 'IF "[?]" NOT IN ("master", "model","msdb", "tempdb")
BEGIN
 DELETE FROM [?].schema.sessions WHERE name like ''xyz_%''
 AND sessionStart <DATEADD(mi, -5,GETDATE())
END'                  

END TRY

BEGIN CATCH
SELECT  ERROR_NUMBER() AS error_number,  ERROR_MESSAGE() AS error_message
    SELECT @ERROR = ERROR_NUMBER()
    If @ERROR = 208
    BEGIN TRY
     /* create the Sessions table */
     BEGIN
     CREATE TABLE  [SCHEMA].[SESSIONS](
       [authuser] [varchar](30) NULL,
       [sessionID] [char](36) NULL,
       [sessionStart] [datetime] NULL)

grant select,delete on reviewadmin.sessions to public;
     END
    END TRY  
 BEGIN CATCH 
  SELECT  ERROR_NUMBER() AS error_number,  ERROR_MESSAGE() AS error_message
 END CATCH 
 END CATCH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T16:01:43.830

您可以尝试使用`DB_ID()`，我相信`DB_ID()`始终是 1-4 （除非您有[分发数据库](http://msdn.microsoft.com/en-us/library/ms183524.aspx)）。理论上，只要检查 DB_ID() 是否大于 4：

```
exec sp_MSforeachdb 'IF DB_ID(''?'')) > 4
BEGIN
 DELETE FROM [?].schema.sessions WHERE name like ''xyz_%''
 AND sessionStart <DATEADD(mi, -5,GETDATE())
END' 
```

此外，您在错误处理程序中似乎没有使用正确的数据库 - 当然您创建表的 try catch 也应该在调用中`sp_MSforeachdb`？

我的意思是在你的文本中你正在为每个数据库运行，包括在 try catch 中：

```
CREATE TABLE [?].[SCHEMA].[SESSIONS]
(
   [authuser]     [VARCHAR](30) NULL,
   [sessionID]    [CHAR](36) NULL,
   [sessionStart] [DATETIME] NULL
) 
```

还有一件事——目前你似乎已经`reviewadmin.sessions`在你的权限授予代码中硬编码了值——我假设你的意思是成为你的新`[?].[Schema].[Sessions]`表——再次应该在调用中，`sp_MSforeachdb`这样它就知道要在哪个数据库上运行。

我希望我已经给了你足够的继续，我不在一台我可以编写和测试整个事情的机器上，我害怕！

* * *

如果您只想要名称为的数据库`xyz_%`：

```
exec sp_MSforeachdb 'IF DB_NAME() LIKE ''xyz_%''
BEGIN
 DELETE FROM [?].schema.sessions WHERE name like ''xyz_%''
 AND sessionStart <DATEADD(mi, -5,GETDATE())
END' 
```

请注意，我们现在可以跳过对 DB_ID > 4 的检查，因为无论如何都没有系统数据库符合您的命名约定。

* * *

好的，我重新考虑了这一点。与其尝试然后在失败时捕获错误，不如这个新计划如何：

1.  检查数据库是否符合您想要的命名约定。
2.  检查表是否存在。
3.  如果没有创建表，请像以前一样授予权限。
4.  做插入。

这应该有望做到：

```
EXEC Sp_msforeachdb 'IF ''?'' LIKE ''xyz_%''
                    BEGIN
                        IF OBJECT_ID(''?.REVIEWADMIN.Sessions'', ''U'') IS NULL
                        BEGIN
                            CREATE TABLE [?].ReviewAdmin.Sessions
                            (
                                [authuser]     [VARCHAR](30) NULL,
                                [sessionID]    [CHAR](36) NULL,
                                [sessionStart] [DATETIME] NULL
                            )

                            grant select,delete on reviewadmin.sessions to public;

                        END

                        DELETE FROM [?].ReviewAdmin.Sessions
                        WHERE sessionStart < DATEADD(mi, -5,GETDATE())

                    END' 
```

# c# - 将百分比转换为最接近的分数

> ID：14320891
> 
> 赞同：7
> 
> 时间：2013-01-14T15:01:02.250
> 
> 标签：c#, percentage, fractions

我们有一个非常数据密集的系统。它存储原始数据，然后根据正确响应的数量/总试验计算百分比。

最近我们有客户想要将旧数据导入我们的系统。

我需要一种将百分比转换为最接近的分数的方法。

例子。

1.  33% 需要给我 2/6。即使 1/3 是 .33333333
2.  67% 需要给我 4/6。即使 4/6 是 .6666667

我意识到我可以将其计算为 67/100，但这意味着当 6 就足够时，我必须向系统添加 100 个数据点。

有没有人有任何想法？

**编辑** 分母可以是任何东西。他们给了我一个原始的、四舍五入的百分比，我试图用原始数据尽可能接近它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T15:25:34.250

您的要求是矛盾的：一方面，您想要“将百分比转换为**最接近的**分数”（*），但另一方面，您想要具有小（est）数字的分数。您需要在何时/如何降低精度以支持较小的数字时找到一些折衷方案。你目前的问题是无法解决的。

(*) 任何给定（整数）百分比 n 的最接近分数 f 是 n/100。根据定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T16:44:26.443

我试图通过使用连分数来满足您的要求。通过将深度限制为三个，我得到了一个合理的近似值。

我未能在合理的时间内提出迭代（或递归）方法。不过，我已经清理了一点。（我知道 3 个字母的变量名*不好*，但我想不出好名字：-/）

该代码为您提供了它可以找到的指定容差内的最佳有理近似值。得到的分数被减少并且是具有相同或更低分母的所有分数中的**最佳近似值。**

```
public partial class Form1 : Form
{
    Random rand = new Random();

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < 10; i++)
        {
            double value = rand.NextDouble();
            var fraction = getFraction(value);
            var numerator = fraction.Key;
            var denominator = fraction.Value;

            System.Console.WriteLine(string.Format("Value {0:0.0000} approximated by {1}/{2} = {3:0.0000}", value, numerator, denominator, (double)numerator / denominator));
        }
        /*
            Output:
            Value 0,4691 approximated by 8/17 = 0,4706
            Value 0,0740 approximated by 1/14 = 0,0714
            Value 0,7690 approximated by 3/4 = 0,7500
            Value 0,7450 approximated by 3/4 = 0,7500
            Value 0,3748 approximated by 3/8 = 0,3750
            Value 0,7324 approximated by 3/4 = 0,7500
            Value 0,5975 approximated by 3/5 = 0,6000
            Value 0,7544 approximated by 3/4 = 0,7500
            Value 0,7212 approximated by 5/7 = 0,7143
            Value 0,0469 approximated by 1/21 = 0,0476
            Value 0,2755 approximated by 2/7 = 0,2857
            Value 0,8763 approximated by 7/8 = 0,8750
            Value 0,8255 approximated by 5/6 = 0,8333
            Value 0,6170 approximated by 3/5 = 0,6000
            Value 0,3692 approximated by 3/8 = 0,3750
            Value 0,8057 approximated by 4/5 = 0,8000
            Value 0,3928 approximated by 2/5 = 0,4000
            Value 0,0235 approximated by 1/43 = 0,0233
            Value 0,8528 approximated by 6/7 = 0,8571
            Value 0,4536 approximated by 5/11 = 0,4545
         */
    }

    private KeyValuePair<int, int> getFraction(double value, double tolerance = 0.02)
    {
        double f0 = 1 / value;
        double f1 = 1 / (f0 - Math.Truncate(f0));

        int a_t = (int)Math.Truncate(f0);
        int a_r = (int)Math.Round(f0);
        int b_t = (int)Math.Truncate(f1);
        int b_r = (int) Math.Round(f1);
        int c = (int)Math.Round(1 / (f1 - Math.Truncate(f1)));

        if (Math.Abs(1.0 / a_r - value) <= tolerance)
            return new KeyValuePair<int, int>(1, a_r);
        else if (Math.Abs(b_r / (a_t * b_r + 1.0) - value) <= tolerance)
            return new KeyValuePair<int, int>(b_r, a_t * b_r + 1);
        else
            return new KeyValuePair<int, int>(c * b_t + 1, c * a_t * b_t + a_t + c);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T15:14:53.440

在这里回答我自己的问题。这行得通吗？

```
 public static Fraction Convert(decimal value) {
    for (decimal numerator = 1; numerator <= 10; numerator++) {
        for (decimal denomenator = 1; denomenator < 10; denomenator++) {
            var result = numerator / denomenator;
            if (Math.Abs(value - result) < .01m)
                return new Fraction() { Numerator = numerator, Denomenator = denomenator };
        }
    }

    throw new Exception();
} 
```

这将使我的分母保持在 10 以下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:06:03.737

它是否必须返回 2/6 而不是 1/3？如果它总是在六分之二，那么

```
Math.Round((33 * 6)/100) = 2 
```

# c# - 管理员和 ClickOnce C# Visual Studio 2008/2012

> ID：14320892
> 
> 赞同：0
> 
> 时间：2013-01-14T15:01:06.820
> 
> 标签：c#

我的 C# 应用程序需要以管理员权限运行，但是由于 ClickOnce 的限制，我无法发布它。

我一直在寻找解决方案，但是，我还没有找到一个有效的解决方案。

最常见的建议是将安装程序添加到项目中，但是，我的 Visual Studio 2008 或 Visual Studio 2012 版本似乎都没有。

任何人都可以向我提供有关如何以管理员权限发布 C# 项目的任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:02:56.370

以下文章描述了如何让 ClickOnce 应用程序以管理员权限自行启动 - 也许这有帮助？[http://antscode.blogspot.de/2011/02/running-clickonce-application-as.html](http://antscode.blogspot.de/2011/02/running-clickonce-application-as.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:25:11.163

[WiX](http://wixtoolset.org/)是用于创建安装包的（免费）工具。我自己没有任何经验，但似乎您可以在运行安装时使用 WiX 进行[UAC](http://en.wikipedia.org/wiki/User_Account_Control)提升。

我[搜索](https://www.google.dk/search?q=wix%20uac%20elevation&aq=1&oq=wix%20uac&aqs=chrome.2.57j0l3.4451&sourceid=chrome&ie=UTF-8)了 WiX 和 UAC，似乎很多人在需要 UAC 时都在使用 WiX - 例如这篇文章：http: [//blogs.msdn.com/b/astebner/archive/2006/12/13/some -useful-things-i-have-learned-about-windows-installer-and-uac.aspx](http://blogs.msdn.com/b/astebner/archive/2006/12/13/some-useful-things-i-have-learned-about-windows-installer-and-uac.aspx)。

# c# - 如何暂停工作流程

> ID：14320893
> 
> 赞同：1
> 
> 时间：2013-01-14T15:01:08.267
> 
> 标签：c#, workflow, flowchart

所以我试图通过使用流程图制作计算器来学习 Workflow 4.0。这是我的模型：

![](../Images/399ea26e64d3886ed35c89e164ea5cd2.png)

到目前为止它有效。现在我想将最后一个分配连接到交换机，因此它会倒退并在下一次计算时再次执行所有操作，而不是创建工作流的新实例并一遍又一遍地运行它。这个想法是长期存在的工作流流程图。

知道如何让它在最后一个 Assign 之后暂停，以便在通过 switch 之前等待 In 参数发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:03:34.200

您可以使用*[`DelayActivity`](http://msdn.microsoft.com/en-us/library/vstudio/ms734721%28v=vs.90%29.aspx)*活动。设置*[`Duration`](http://msdn.microsoft.com/en-us/library/system.activities.statements.delay.duration.aspx)*属性。

> Delay 活动创建的计时器的持续时间。如果持续时间设置为 MaxValue，则延迟是无限的。

喜欢;

```
new Delay()
{
   Duration = TimeSpan.FromSeconds(1)
} 
```

# jquery - 使用 jQuery 模拟链接的点击 - 在 iframe 之外，哪个链接到另一个域？

> ID：14320895
> 
> 赞同：1
> 
> 时间：2013-01-14T15:01:22.350
> 
> 标签：jquery, parent, target

在我的脑海里这应该是直截了当的，但经过测试我发现它并不像我想象的那么容易！

我想要做的是单击 iFrame 外部的链接，即使在父站点（位于不同域中）内也会触发动态“快速查看”灯箱。

例如：

```
<a class="quickViewLink" href="#"> VIEW TO PURCHASE </a>

<iFrame src="http://www.google.com/">
  <a class="quickViewLink" href="#"> Clicking this will simulate the click of the link outside of this iframe </a>
</iFrame> 
```

我已经尝试过 target="_parent" 并且还尝试使用 jQuery 来定位特定链接，但没有成功。

任何帮助将不胜感激！

**编辑：我无法访问 iFrame 之外的网站！**（这是我卡住的地方）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:07:14.697

```
<a class="quickViewLink" href="#"> VIEW TO PURCHASE </a>
<script type="text/javascript">
    function clickLink() {
        $('.quickViewLink').trigger('click');
    }
</script>
<iFrame src="http://www.google.com/">
  <a href="javascript: window.parent.clickLink()" class="quickViewLink"> Clicking this will simulate the click of the link outside of this iframe </a>
</iFrame> 
```

与 jQuery 一起使用。

# .net - 安装程序要求安装 .NET 4.0，而 VS2010 仅使用 3.5

> ID：14320896
> 
> 赞同：6
> 
> 时间：2013-01-14T14:59:53.457
> 
> 标签：.net, visual-studio-2010, installation

我正在为我的应用程序构建一个安装程序，它完全使用 .NET 3.5 客户端配置文件构建。在我的安装程序中，我选择“.NET 3.5 Framework SP1 Client Profile”作为先决条件。

但是，当我尝试在 Windows 7 Professional 的新副本上安装它时，它想同时安装 3.5 和 4.0。还有其他我可以/必须设置目标/所需平台的地方吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T16:10:26.357

找到了。

安装程序本身需要该框架：

```
LeftMouseButton on the installer project --> View --> Launch Conditions 
```

`Version`还需要设置一个值。

# ruby - 为什么在我的规范中从 ObjectSpace 收集的连续数组不相等？

> ID：14320907
> 
> 赞同：0
> 
> 时间：2013-01-14T15:02:00.480
> 
> 标签：ruby, unit-testing, garbage-collection, rspec2, objectspace

我有一个带有两个与 ObjectSpace 相关的方法的 Project 类：

```
def self.all
  ObjectSpace.each_object(self).to_a
end

def self.count
  ObjectSpace.each_object(self).count
end 
```

此规范失败：

```
it "can print all projects" do
  Project.all.should eq([@project1, @project2])
end 
```

出现以下错误：

```
Failure/Error: Project.all.should eq([@project1, @project2])

       expected: [#<Project:0x007fd76a815508 @name="Building house", @tasks=[]>, #<Project:0x007fd76a815198 @name="Getting a loan from the Bank", @tasks=[]>]
            got: [#<Project:0x007fd7688336b8 @name="Building house", @tasks=[]>, #<Project:0x007fd7688dae40 @name="Building house", @tasks=[]>, #<Project:0x007fd768af4de8 @name="Getting a loan from the Bank", @tasks=[]>, #<Project:0x007fd768af5090 @name="Building house", @tasks=[]>, #<Project:0x007fd76a815198 @name="Getting a loan from the Bank", @tasks=[]>, #<Project:0x007fd76a815508 @name="Building house", @tasks=[]>] 
```

如您所见，这使我的数组中的对象翻了一番，但代码本身工作正常。那么为什么我的测试失败了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:07:15.540

因为先前存在`Project`的 s 仍然作为对象存在。

这意味着它们仍会在 中找到`ObjectSpace`，并且您将拥有比预期更多的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:45:26.173

### ObjectSpace 可能包含坚果的痕迹

嗯，不是真的。但是 ObjectSpace 通常包含属于其他范围的对象，已标记为垃圾回收但尚未删除的对象，或者（特别是在 RSpec 测试的情况下）来自 before 块的多次调用的对象副本。

Ruby 2.0 可能有所不同，但早期的 MRI 解释器不保证垃圾回收，因此即使手动运行[GC.start](http://www.ruby-doc.org/core-1.9.3/GC.html#method-c-start)也不能​​真正指望 ObjectSpace 的内容对相等性测试有效。

### 重构你的代码

与其在规范中寻找平等，不如考虑：

1.  寻找包含在[Array#include 中？](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-include-3F)
2.  在 ObjectSpace 中查找特定的对象 ID。
3.  重构被测类以及测试本身。**具体来说，使用某种聚合模式而不是依赖 ObjectSpace 来保存对您关心的 Project 对象的引用。**

你可以在这里混搭，但修复你的测试实际上只是问题的一部分。底层应用程序逻辑似乎需要重构。

不及格的测试很好，因为它突出了需要手术的课程。不要只是修复测试；听听规范试图告诉你关于被测类的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T16:37:04.200

**project_spec.rb**

```
describe Project do

 let(:p1) { Project.new }
 let(:p2) { Project.new }

 describe ".all" do

  it "should keep track of all pr" do
   Project.all.should == [p1, p2]  
  end

 end

 describe ".count" do

  it "should count all the projects" do
   Project.count.should == 2
  end

 end

end 
```

**项目.rb**

```
class Project

  @@all_projects = []

  def initialize(options=nil)
    @@all_projects << self
  end

  def self.all
    @@all_projects
  end

  def self.count
    @@all_projects.count
  end

end

Finished in 0.00079 seconds
2 examples, 0 failures 
```

我会留给你来制定可能对你的项目来说具体和复杂的其他细节。希望这对你有用。

# python - 有效地检查字符串是否由 Python 中的一个字符组成

> ID：14320909
> 
> 赞同：76
> 
> 时间：2013-01-14T15:02:08.317
> 
> 标签：python, string

`s`检查Python中的字符串是否仅包含一个字符的有效方法是什么`'A'`？类似这样`all_equal(s, 'A')`的行为：

```
all_equal("AAAAA", "A") = True

all_equal("AAAAAAAAAAA", "A") = True

all_equal("AAAAAfAAAAA", "A") = False 
```

两种看似低效的方法是：首先将字符串转换为列表并检查每个元素，或者使用正则表达式。有没有更有效的方法，或者这些方法是 Python 中最好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-01-14T15:46:49.850

这是迄今为止最快的，甚至比甚至快几倍`count()`，只需使用出色[的 mgilson 计时套件进行计时](https://stackoverflow.com/a/14320949/866022)：

```
s == len(s) * s[0] 
```

这里所有的检查都是在 Python C 代码中完成的，它只是：

*   分配 len(s) 个字符；
*   用第一个字符填充空间；
*   比较两个字符串。

字符串越长，时间奖励就越大。但是，正如 mgilson 所写，它会创建字符串的副本，因此如果您的字符串长度是数百万个符号，则可能会成为问题。

从计时结果中我们可以看出，通常最快的解决任务的方法不会为每个符号执行任何 Python 代码。但是，该`set()`解决方案在 Python 库的 C 代码中也完成了所有工作，但仍然很慢，可能是因为通过 Python 对象接口操作字符串。

**UPD：**关于空字符串的情况。如何处理它很大程度上取决于任务。如果任务是“检查字符串中的所有符号是否相同”，`s == len(s) * s[0]`则为有效答案（无符号表示错误，异常正常）。如果任务是“检查是否只有一个唯一符号”，空字符串应该给我们 False，答案是`s and s == len(s) * s[0]`，或者`bool(s) and s == len(s) * s[0]`如果您更喜欢接收布尔值。最后，如果我们将任务理解为“检查是否有不同的符号”，空字符串的结果为 True，答案为`not s or s == len(s) * s[0]`。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2013-01-14T15:04:01.807

```
>>> s = 'AAAAAAAAAAAAAAAAAAA'
>>> s.count(s[0]) == len(s)
True 
```

这不会短路。短路的版本是：

```
>>> all(x == s[0] for x in s)
True 
```

但是，我有一种感觉，由于优化的 C 实现，非短路版本可能会在某些字符串上表现更好（取决于大小等）

* * *

这是一个简单的`timeit`脚本，用于测试发布的其他一些选项：

```
import timeit
import re

def test_regex(s,regex=re.compile(r'^(.)\1*$')):
    return bool(regex.match(s))

def test_all(s):
    return all(x == s[0] for x in s)

def test_count(s):
    return s.count(s[0]) == len(s)

def test_set(s):
    return len(set(s)) == 1

def test_replace(s):
    return not s.replace(s[0],'')

def test_translate(s):
    return not s.translate(None,s[0])

def test_strmul(s):
    return s == s[0]*len(s)

tests = ('test_all','test_count','test_set','test_replace','test_translate','test_strmul','test_regex')

print "WITH ALL EQUAL"
for test in tests:
    print test, timeit.timeit('%s(s)'%test,'from __main__ import %s; s="AAAAAAAAAAAAAAAAA"'%test)
    if globals()[test]("AAAAAAAAAAAAAAAAA") != True:
        print globals()[test]("AAAAAAAAAAAAAAAAA")
        raise AssertionError

print
print "WITH FIRST NON-EQUAL"
for test in tests:
    print test, timeit.timeit('%s(s)'%test,'from __main__ import %s; s="FAAAAAAAAAAAAAAAA"'%test)
    if globals()[test]("FAAAAAAAAAAAAAAAA") != False:
        print globals()[test]("FAAAAAAAAAAAAAAAA")
        raise AssertionError 
```

在我的机器（OS-X 10.5.8，core2duo，python2.7.3）上，带有这些人为的（短）字符串，`str.count`冒烟`set`和`all`，并且节拍`str.replace`一点，但被淘汰`str.translate`并且`strmul`目前处于领先地位：

```
WITH ALL EQUAL
test_all 5.83863711357
test_count 0.947771072388
test_set 2.01028490067
test_replace 1.24682998657
test_translate 0.941282987595
test_strmul 0.629556179047
test_regex 2.52913498878

WITH FIRST NON-EQUAL
test_all 2.41147494316
test_count 0.942595005035
test_set 2.00480484962
test_replace 0.960338115692
test_translate 0.924381017685
test_strmul 0.622269153595
test_regex 1.36632800102 
```

不同系统和不同字符串的时间可能略有不同（甚至显着？），因此值得研究您计划传递的实际字符串。

最终，如果你足够多地达到最佳情况`all`，并且你的琴弦足够长，你可能想要考虑那个。这是一个更好的算法......我会避免`set`解决方案，因为我没有看到任何可能击败`count`解决方案的情况。

如果内存可能是一个问题，您将需要避免`str.translate`，`str.replace`并且`strmul`因为它们会创建第二个字符串，但这些天这通常不是问题。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-14T15:03:25.333

您可以转换为一组并检查只有一个成员：

```
len(set("AAAAAAAA")) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-14T15:03:00.223

尝试使用内置函数[`all`](http://docs.python.org/2/library/functions.html#all)：

```
all(c == 'A' for c in s) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-14T15:26:33.063

为这个问题添加另一个解决方案

```
>>> not "AAAAAA".translate(None,"A")
True 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-14T15:03:46.693

如果您需要检查字符串中的所有字符是否相同并且等于给定字符，则需要删除所有重复项并检查最终结果是否等于单个字符。

```
>>> set("AAAAA") == set("A")
True 
```

如果您想查找是否有任何重复，只需检查长度

```
>>> len(set("AAAAA")) == 1
True 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-01-14T15:14:04.087

到目前为止有趣的答案。这是另一个：

```
flag = True
for c in 'AAAAAAAfAAAA':
    if not c == 'A': 
        flag = False
        break 
```

我能想到的唯一优点是，如果发现不一致的字符，它不需要遍历整个字符串。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-01-14T15:15:17.117

```
not len("AAAAAAAAA".replace('A', '')) 
```

# gcc - Cygwin 上的 GCC-4.7.2 安装失败

> ID：14320912
> 
> 赞同：2
> 
> 时间：2013-01-14T15:02:14.450
> 
> 标签：gcc, g++, makefile, cygwin, gcc4.7

因为 Cygwin 中默认的 GCC 是 4.5.3，所以我尝试安装 GCC 4.7.2。[我从这里](http://ftp.gnu.org/gnu/gcc/gcc-4.7.2/gcc-4.7.2.tar.bz2)下载了tar.bz 存档，将其放入`cygwin\usr\gcc-4.7.2`并执行以下顺序：

```
tar xvf gcc-4.7.2.tar.bz2
cd gcc-4.7.2
./contrib/download_prerequisites
mkdir build
cd build
../configure --build=x86_64-linux-gnu --prefix=/usr/gcc-4.7.2 --enable-checking=release --enable-languages=c,c++ --disable-multilib --program-suffix=-4.7
make
sudo ln -s /usr/lib/x86_64-linux-gnu /usr/lib64
sudo make install 
```

我坚持`make`以下错误：（一个多小时后）

```
make[3]: Leaving directory `/usr/gcc-4.7.2/build/gcc'
mkdir -p -- x86_64-linux-gnu/libgcc
Checking multilib configuration for libgcc...
Configuring stage 1 in x86_64-linux-gnu/libgcc
configure: creating cache ./config.cache
checking build system type... x86_64-pc-linux-gnu
checking host system type... x86_64-pc-linux-gnu
checking for --enable-version-specific-runtime-libs... no
checking for a BSD-compatible install... /usr/bin/install -c
checking for gawk... gawk
checking for x86_64-linux-gnu-ar... ar
checking for x86_64-linux-gnu-lipo... lipo
checking for x86_64-linux-gnu-nm... /usr/gcc-4.7.2/build/./gcc/nm
checking for x86_64-linux-gnu-ranlib... ranlib
checking for x86_64-linux-gnu-strip... strip
checking whether ln -s works... yes
checking for x86_64-linux-gnu-gcc... /usr/gcc-4.7.2/build/./gcc/xgcc -B/usr/gcc-4.7.2/build/./gcc/ -B/usr/gcc-4.7.2/x86_64-linux-gnu/bin/ -B/usr/gcc-4.7.2/x86_64-linux-gnu/lib/ -isystem /usr/gcc-4.7.2/x86_64-linux-gnu/include -isystem /usr/gcc-4.7.2/x86_64-linux-gnu/sys-include
checking for suffix of object files... configure: error: in `/usr/gcc-4.7.2/build/x86_64-linux-gnu/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
Makefile:15654: recipe for target `configure-stage1-target-libgcc' failed
make[2]: *** [configure-stage1-target-libgcc] Error 1
make[2]: Leaving directory `/usr/gcc-4.7.2/build'
Makefile:19334: recipe for target `stage1-bubble' failed
make[1]: *** [stage1-bubble] Error 2
make[1]: Leaving directory `/usr/gcc-4.7.2/build'
Makefile:903: recipe for target `all' failed
make: *** [all] Error 2 
```

此日志是否包含信息，说明出了什么问题？

完整的日志要大得多，所以我允许自己只放他的一部分。我在 Pastebin 上找到的说明：http: [//pastebin.com/1MBaAikB](http://pastebin.com/1MBaAikB)

谁能给我一个提示，我该如何解决这个问题？

编辑 1：我试图以另一种方式实现它。[我在http://matpack.de/cygwin/index.html](http://matpack.de/cygwin/index.html)上找到了安装说明

```
tar -xf gcc-4.7.2.tar.bz2
mkdir gcc-build
cd gcc-build
../gcc-4.7.2/configure --enable-languages=c,c++
make -j 4
make install
make clean          (OPTIONAL)
cd .. 
```

我得到的错误现在与“权限被拒绝”有关。错误日志： http: [//pastebin.com/0stdpFKf](http://pastebin.com/0stdpFKf)

这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-08T08:19:08.950

我遇到了同样的问题。只是我已经将mpc、mpfr和gmp库的库路径导出到LD_LIBRARY_PATH环境变量中，然后就可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T22:33:09.130

GCC 4.7.2 现在作为测试版本提供。在`setup.exe`中，切换所有`gcc4-*`包的版本号，以及`libgcc1`、`libstdc++6`等，直到显示 4.7 版本。请记住，您将不得不`Keep`在后续运行期间再次选择其中的每一个`setup.exe`，直到它们被宣布为稳定为止。

# windows-7 - 来自数字键盘的 Windows 键绑定

> ID：14320916
> 
> 赞同：0
> 
> 时间：2013-01-14T15:02:26.010
> 
> 标签：windows-7, keyboard-shortcuts

我刚刚在 Windows 7 上安装了 Dexpot 以启用多个桌面，就像我在 Linux Mint 上一样。直接切换到桌面 2 的键盘快捷键是 Alt + 2。如果我按下数字键盘上的数字 2，这将不起作用。为什么这与普通键盘上的 Alt + 2 不同的键绑定？

有没有办法让 Alt + 2 从两个字符触发命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:11:39.687

转到“Dexpot 设置 > 控件 > 热键”并将“切换桌面”热键的键绑定更改为其他内容。如果它与新的热键一起使用，Chrome、Chrome 插件或其他一些应用程序会拦截原始的 Alt 键组合。

# jquery-mobile - jquery 移动弹出窗口不等待点击

> ID：14320919
> 
> 赞同：0
> 
> 时间：2013-01-14T15:02:33.333
> 
> 标签：jquery-mobile, popup

使用 jquery mobile 1.2，我有一个弹出菜单（确定/取消），在切换到新页面之前应该回答它。但是在点击之前页面会发生变化（并且弹出窗口消失）：

```
if (rider.time.valueOf() > 0) {
    $('#popupMsg').text("Rider has already finished; update the time?");
    $('#alreadyFinished').popup("open");
}
alert("rf");
// other code.......
$.mobile.changePage("#finishLine");
// other code....... 
```

我输入“警报”只是为了证明弹出窗口确实出现了 - 它在警报后面，但是一旦单击警报，弹出窗口就会关闭（并且页面会更改）。还尝试删除“其他代码”，但仍然是同样的问题。

这是html：

```
 <div data-role="popup" id="alreadyFinished" class="ui-content">
         <p id="popupMsg"></p>
         <a data-role="button" data-theme="b" id="OKBtn">OK</a>
         <a href="#finishLine" data-role="button" data-theme="c"  id="cancelBtn">Cancel</a>
     </div> 
```

即使弹出窗口中没有按钮，弹出窗口也不会持续存在。那么有什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:27:23.030

jQuery Mobile 弹出窗口是页面的一部分。更改页面将关闭任何当前弹出窗口，因此您不应在打开弹出窗口后直接调用它。以下代码将打开您的弹出窗口而不是关闭它。

```
if (rider.time.valueOf() > 0) {
    $('#popupMsg').text("Rider has already finished; update the time?");
    $('#alreadyFinished').popup("open");
} else {
    alert("rf");
    // other code.......
    $.mobile.changePage("#finishLine");
// other code.......
} 
```

如果您希望您的弹出窗口是模态的，最简单的方法是将其余代码的执行绑定到弹出窗口的关闭。例如，如果您希望该`restOfCode`函数在弹出窗口关闭后运行：

```
$('#alreadyFinished').popup("open");
$( "#alreadyFinished" ).on({
   popupafterclose: function(event, ui) {restOfCode()}
}); 
```

# javascript - 如何使嵌入的 hasMany 关系与 ember 数据一起使用

> ID：14320925
> 
> 赞同：17
> 
> 时间：2013-01-14T15:02:48.533
> 
> 标签：javascript, ember.js, ember-data

我无法`embedded` `hasMany`正确使用 ember 数据。

我有这样的东西

```
App.Post = DS.Model.extend({
  comments: DS.hasMany('App.Comment')
});

App.Comment = DS.Model.extend({
  post: DS.hasMany('App.Post'),
  name: attr('string')
}); 
```

我的 API 返回以下内容`GET /post`：

```
[
  {
   id: 1
   comments: [{name: 'test'}, {name: 'test2'}]
  },
  ...
] 
```

我需要发送这个`POST /post`：

```
[
  {
    comments: [{name: 'test'}, {name: 'test2'}]
  },
  ...
] 
```

我想使用 Ember 模型并让他们提出适当的请求：

```
var post = App.store.createRecord(App.Post, hash_post_without_comments);
post.get('comments').createRecord(hash_comment);

App.store.commit(); // This should call the POST api 
```

和

```
var posts = App.store.find(App.Post); // This should call the GET api 
```

当我尝试类似的东西`post: DS.hasMany('App.Post', {embedded: true})`时，GET 正在工作，但 POST 正在尝试为这两条记录创建一个 POST，而不仅仅是父记录。

编辑：我的真实用例

1-我刚刚从 master 构建了 ember 数据

2-我的适配器：RESTAdapter

3- 序列化器：JSONSerializer

4-我添加了

```
App.MyAdapter.map('App.Join', {
    columns: { embedded: 'always' }
}); 
```

5- 我的模型是：

```
App.Join = DS.Model.extend({
    rowCount: DS.attr('number'),
    columns: DS.hasMany('App.JoinColumn'),
});

App.JoinColumn = DS.Model.extend({
    join: DS.belongsTo('App.Join')
}); 
```

6- 何时：

```
var a = App.Join.find(1);
a.get('columns').createRecord({});
App.store.commit(); 
```

joincolumn 的 POST 已发送且父级不脏

我错过了什么？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-14T18:42:11.833

在 master 上，正确的 API 是：

```
App.Adapter.map('App.Post', {
  comments: { embedded: 'always' }
}); 
```

的两个可能值`embedded`是：

*   `load`：加载时嵌入子记录，但应保存为独立记录。为了使它起作用，子记录必须有一个 ID。
*   `always`：加载时嵌入子记录，并保存嵌入在同一记录中。当然，这会影响记录的脏度（如果子记录发生更改，适配器会将父记录标记为脏）。

如果您没有自定义适配器，则可以`map`直接调用`DS.RESTAdapter`：

```
DS.RESTAdapter.map('App.Post', {
  comments: { embedded: 'always' }
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T16:05:10.683

我有完全一样的问题。

此错误已在 ember 数据问题跟踪器上报告。以下 PR 添加了 2 个显示问题的失败测试：[https ://github.com/emberjs/data/pull/578](https://github.com/emberjs/data/pull/578)

现在似乎没有解决方法。

**编辑：**

*sebastianseilund* 2 天前打开了一个 PR，它解决了您的问题。看看：[https ://github.com/emberjs/data/pull/629/files](https://github.com/emberjs/data/pull/629/files)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-04T20:47:39.510

对此添加更新，以防其他人遇到此帖子，并且很难弄清楚当前版本的 ember-data 的工作原理。

从 Ember Data 1.0.0.beta.7 开始，您需要覆盖序列化程序上的适当方法。这是一个例子：

1）重新打开序列化器（归功于[这篇文章](http://mozmonkey.com/2013/12/serializing-embedded-relationships-ember-data-beta/)）：

```
DS.RESTSerializer.reopen({
  serializeHasMany: function(record, json, relationship) {
    var hasManyRecords, key;
    key = relationship.key;
    hasManyRecords = Ember.get(record, key);
    if (hasManyRecords && relationship.options.embedded === "always") {
      json[key] = [];
      hasManyRecords.forEach(function(item, index) {
        // use includeId: true if you want the id of each model on the hasMany relationship
        json[key].push(item.serialize({ includeId: true }));
      });
    } else {
      this._super(record, json, relationship);
    }
  }
}); 
```

2）`embedded: 'always'`在模型上的关系中添加选项：

```
App.Post = DS.Model.extend({
  comments: DS.hasMany('comment', {
    embedded: 'always'
  })
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-05-13T20:42:50.370

这对我有用（Ember 1.5.1+pre.5349ffcb，Ember Data 1.0.0-beta.7.f87cba88）：

```
App.Post = DS.Model.extend({
  comments: DS.hasMany('comment', { embedded: 'always' })
});

App.PostSerializer = DS.ActiveModelSerializer.extend(DS.EmbeddedRecordsMixin, {
  attrs: {
    comments: { embedded: 'always' }
  }
}); 
```

# jquery - 根据上面的div改变select的宽度

> ID：14320928
> 
> 赞同：0
> 
> 时间：2013-01-14T15:02:58.540
> 
> 标签：jquery, javascript

我有一个消息框，它应该显示在一个选择中。它应该表现得好像它是选择的选项。而且它应该有选择的右箭头

```
 <!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>DivSelectWrapper</title>
    <style>
        #messageBox{
            position: absolute;
            white-space: nowrap;
            width: 50px;
        }
        .fancyListBox{
            position:relative;
        }
    </style>
    </head>

<body>
    <div class="fancyListBox">  
        <div id="messageBox">This is my message</div>
        <select id="select">
            <option>DD</option>
            <option>DAD</option>
            <option>DSD</option>
            <option>DWD</option>
            <option>DAD</option>
            <option>DRD</option>
        </select>
    </div>
    <input type="submit" onClick="fChangeData()" text="testDivWrap"/>
</body> 
```

# mysql - mysql 按周分组的费用帮助

> ID：14320940
> 
> 赞同：1
> 
> 时间：2013-01-14T15:03:34.957
> 
> 标签：mysql, sql, date

我在mysql中有以下表格：

**钱：**

用户名，日期，金额

**花费：**

用户名，日期，金额

我需要一个 sql 语句（报告），每周总计（存款 - 用户使用的金额），并按用户、周分组

这是我到目前为止所拥有的：

```
SELECT   expenses.userid      AS user,
         MONTH(expenses.date) AS month,
         SUM(money.amount)    AS amount_money,
         SUM(expenses.amount) AS expenses_amount
FROM     expenses INNER JOIN money ON money.userid = expenses.userid
GROUP BY 1,2 WITH ROLLUP 
```

（星期一是一周的第一天）

**样本数据：**

**钱：**

> 2012-11-05 abustos 70000
> 
> 2012-11-05 psepulveda 35000
> 
> 2012-10-07 fmonsalves 45000
> 
> 2012-09-07 阿布斯托斯 55000
> 
> 2012-09-07 abustos 50000
> 
> 2012-08-09 abustos 100000
> 
> 2012-08-21 csuarez 130000
> 
> 2012-08-09 fmonsalves 100000

**花费：**

> ```
> 2012-05-24    csuarez     30000
> 
> 2012-08-29    csuarez     30000
> 
> 2012-08-22    csuarez     7990
> 
> 2012-08-22    csuarez     21220
> 
> 2012-08-23    csuarez     45577 
> ```

**我想要这样的东西：**

用户： csuarez

周：2012 年 8 月 19 日 2012 年 8 月 25 日

金钱：130000

费用：115898

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:09:00.170

请试试这个：

```
SELECT money.userid as user, 
yearweek(expenses.date) as `week`, 
sum(money.amount) as amount_money, 
sum(expenses.amount) as expenses_amount,
sum(money.amount - expenses.amount) as deposit 
FROM money
LEFT JOIN expense
ON money.userid = expenses.userid 
group by `week`, money.userid; 
```

根据 eggyal 的评论，您可以`mode`在`week`函数内使用来获得一周的第一个星期一。 [参考](http://w3resource.com/mysql/date-and-time-functions/mysql-week-function.php)。

```
SELECT money.userid as user, 
week(expenses.date, 1) as `week`, 
sum(distinct money.amount) as amount_money, 
sum(distinct expenses.amount) as expenses_amount,
sum(money.amount - expenses.amount) as deposit 
FROM money 
LEFT JOIN expense
ON money.userid = expenses.userid 
group by `week`, money.userid; 
```

在 op 给出样本数据后的后期更新：

*   [SQLFIDDLE 演示](http://sqlfiddle.com/#!2/dfd6c/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:19:50.940

要导出星期一“开始”一周的日期（从星期一到星期日的星期），您可以使用如下表达式：

```
mydate + INTERVAL IF(DAYOFWEEK(mydate)-1,2-DAYOFWEEK(mydate),-6) DAY 
  AS starting_monday 
```

同样，要导出一周中“结束”星期日的日期值：

```
mydate + INTERVAL IF(DAYOFWEEK(mydate)-1,8-DAYOFWEEK(mydate),0) DAY 
  AS ending_sunday 
```

* * *

但这并不是查询的真正问题，假设您的表`money`代表对帐户的存款（而不是余额），并且您的`expenses`表代表从帐户中提款。

用户可能会有一周的取款但没有存款，或者一周有存款但没有取款。对两个表使用 JOIN 操作的查询可能会排除行。而 OUTER JOIN 只解决了一半的问题。

根据您的描述，听起来您确实想要一个包含本周所有提款和所有存款的查询。

一种方法是使用 UNION ALL 操作组合来自两个单独表的行：

```
SELECT 'm' AS m_or_e
     , m.userid
     , m.date
     , m.amount
  FROM money
 UNION ALL
SELECT 'e'
     , e.userid
     , e.date
     , -1.00*e.amount AS amount
  FROM expenses 
```

然后，您可以将该查询作为内联视图引用；但是对于大型集合，由于创建了中间（派生）表，这将表现出有问题的性能。

这不太理想：

```
SELECT t.userid
     , t.week_
     , SUM(t.amount) AS total
     , SUM(IF(t.source='m',t.amount,0)) AS amount_money
     , SUM(IF(t.source='e',t.amount,0)) AS expenses_amount
  FROM (
         SELECT 'm' AS source
              , m.userid
              , YEARWEEK(m.date,1) AS week_
              , SUM(m.amount) AS amount
           FROM money m
          GROUP BY m.userid, week_
          UNION ALL
         SELECT 'e' AS source
              , e.userid
              , YEARWEEK(e.date,1) AS week_
              , -1.00*SUM(e.amount)
           FROM expenses e
          GROUP BY e.userid, week_
        ) t
 GROUP BY t.userid, t.week_ 
```

* * *

对于这样的查询，理想情况下，“存款”和“取款”将记录在同一个表中，存款和取款存储为正数和负数，或区分“金钱”和“费用”的标识符。

我也没有在任何一个表上看到主键或唯一键，但添加唯一约束`userid,date`甚至`userid,date,amount`可能是有问题的。

# javascript - 右键单击用于过滤的文本框不会触发

> ID：14320941
> 
> 赞同：0
> 
> 时间：2013-01-14T15:03:39.753
> 
> 标签：javascript, jquery, dhtmlx

通常触发的事件：

```
<td style="cursor: default;">
<div class="hdrcell filter">
    <input type="text" style="width:90%; font-size:8pt; font-family:Tahoma; -moz-user-select:text; ">
</div> 
```

```
$('div.filter').find('input[type=text]').mousedown(function(event) {
    debugger;
    switch (event.which) {
        case 3:
            alert('Right mouse button pressed');
            break;
    }
}); 
```

我有一个带过滤器的 dhtmlx 网格。我想捕捉右键单击用于过滤网格中结果的文本框时发生的事件。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:13:23.957

嗯，阅读调试器。它试图找到 null 的属性。把整个东西放在文件里准备好。

```
$(document).ready(function(){
  $('div.filter').find('input[type=text]').mousedown(function(event) {
    debugger;
    switch (event.which) {
      case 3:
        alert('Right mouse button pressed');
        break;
    }
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:06:55.873

尝试：

```
$('div.filter').find('input[type=text]').bind('contextmenu', function(e) {
    #code
    return false;
}); 
```

# sql-server - 无法连接到 SQL 数据库，获取网络 Error26

> ID：14320948
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:01.167
> 
> 标签：sql-server, connection-string

我有一个本地数据库“模型”，我需要通过我的 2 个应用程序连接到它。一个应用程序仅基于我的数据库“模型”中定义的表的子集。我的连接字符串是

```
<add name="Model"
     connectionString="Data Source=localhost;Initial Catalog=Model;Integrated Security=True;Trusted_Connection=true;"
     providerName="System.Data.SqlClient" /> 
```

我对两个应用程序使用相同的连接字符串。应用程序 1（更少的表）可以很好地连接和加载数据。问题是应用程序 2 向我抛出错误：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: SQL Network Interfaces, error: 26 - Error Locating Server/Instance Specified) 
```

网上的所有解决方案都是基于检查我是否有正确的连接字符串以及是否启用了远程会话，这一切都有效，因为我的应用程序 1 有效。应用程序 2 可能出了什么问题？我应该从哪里开始寻找问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:56:37.123

尝试将数据源更改为， `(local)`或者如果您正在运行 SQL Express，请尝试`(local)\SQLEXPRESS`

失败了，你不能看看“应用程序 1”正在使用的连接字符串吗？

# internet-explorer-7 - cloneNode 在 IE7 中不起作用

> ID：14320950
> 
> 赞同：1
> 
> 时间：2013-01-14T15:04:09.450
> 
> 标签：internet-explorer-7, clonenode

我有一个包含多行输入字段的表。我想复制第二行或第三行我的代码在这里：但是 cloneNode 在 IE7 中不起作用，请帮助。此代码在其他主要浏览器中有效，但在 IE7 中无效 function deleteRow(row) { var x=document.getElementById('rowcontainer');

```
 var len = parseInt(x.rows.length);
    if(len>4)
    {
        var i=row.parentNode.parentNode.rowIndex;
        document.getElementById('rowcontainer').deleteRow(i);
    }
    else
    {
        alert('Minimum 3 rows are required');
    }
}

function insRow()
{
    var x=document.getElementById('rowcontainer');

    var len = parseInt(x.rows.length);

    if(len % 2 == 0)
    {
        var new_row = x.rows[1].cloneNode(true);
    }
    else
    {
        var new_row = x.rows[2].cloneNode(true);
    }

    x.appendChild( new_row );

    $('#rowcontainer tr:last :input').val('');

}
</script>
</head>

<body>

<table width="100%" border="0" style="border:solid 1px #d1d1d1; line-height:21px;" cellpadding="0" cellspacing="0" id="rowcontainer">
  <tr style="background:#e0e0e0; line-height:33px;">
    <td class="tblborder" style="width:23px; text-align:center; padding:0px; cursor:pointer;"><div id="addrow" onclick="insRow()">+</div></td>
    <td class="tblborder">Item</td>
    <td class="tblborder">Description</td>
    <td class="tblborder">Quantity</td>
    <td class="tblborder">Unit Price</td>
    <td class="tblborder">Discount</td>
    <td class="tblborder_b" style="text-align:left;">Sub-Total</td>
  </tr>
  <tr style="background:#f5f5f5;">
    <td class="tblborder" style="background:#e0e0e0; padding:0px; text-align:center; cursor:pointer;"><div id="delrow" onclick="deleteRow(this)">-</div></td>
    <td class="tblborder"><input type="text" class="rowinpt desc_item" onclick="openitemdialob();" /></td>
    <td class="tblborder"><input type="text" class="rowinpt desc_item" /></td>
    <td class="tblborder"><input type="text" class="rowinpt subtotal" /></td>
    <td class="tblborder"><input type="text" class="rowinpt subtotal" /></td>
    <td class="tblborder"><input type="text" class="rowinpt subtotal" /></td>
    <td class="tblborder_b"><input type="text" class="rowinpt subtotal" id="subtotalinput" /></td>
  </tr>
  <tr>
    <td class="tblborder" style="background:#e0e0e0; padding:0px; text-align:center; cursor:pointer;"><div id="delrow" onclick="deleteRow(this)">-</div></td>
    <td class="tblborder"><input type="text" class="rowinpt desc_item" onclick="openitemdialob();" /></td>
    <td class="tblborder"><input type="text" class="rowinpt desc_item" /></td>
    <td class="tblborder"><input type="text" class="rowinpt subtotal" /></td>
    <td class="tblborder"><input type="text" class="rowinpt subtotal" /></td>
    <td class="tblborder"><input type="text" class="rowinpt subtotal" /></td>
    <td class="tblborder_b"><input type="text" class="rowinpt subtotal" id="subtotalinput" /></td>
  </tr>

</table>

</body>
</html> 
```

# c# - 使用 C# 对象类型的动态转换

> ID：14320952
> 
> 赞同：6
> 
> 时间：2013-01-14T15:04:15.853
> 
> 标签：c#, reflection, casting, dynamic-cast

我有一个名为 A 的抽象类，以及其他实现 A 的类（B、C、D、E、...）

我还有一个 A 对象列表。
我希望能够将该列表中的每个对象动态地转换为它们的“基本”类型（即 B、C、D、...），以便能够以其他方法调用它们的构造函数。

这是我现在所做的：

```
abstract class A { }
class B : A { }
class C : A { }
class D : A { }
class E : A { }
// ... 

class Program
{
    static void Main(string[] args)
    {
        List<A> list = new List<A> { new B(), new C(), new D(), new E() };
        // ...

        foreach (A item in list)
        {
            A obj  = foo(item);
        }
    }

    public static A foo(A obj)
    {
        if (obj.GetType() == typeof(B))
        {
            return bar((B)obj);
        }
        else if (obj.GetType() == typeof(C))
        {
            return bar((C)obj);
        }
        // ... same for D, E, ...
        return null;
    }

    public static T bar<T>(T obj) where T : class, new()
    {
        // To use the constructor, I can't have here an abstract class.
        T newObj = new T();
        return newObj;
    } 
```

它有效，但我想找到另一种方法，但要测试每个实现 A 的类，如果它们的类型等于我的对象的类型，然后再进行转换。

我有近 15 个班级，例如 B、C、D ......而且我可能还有更多。为了有一些简单、清晰和可维护的东西，我想避免这种方法，以及 15+“if(...) else(...)”。

你有办法这样做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T15:06:31.350

这样修改`bar`：

```
public static T bar<T>(T obj) where T : class
{
    var type = obj.GetType();
    return Activator.CreateInstance(type) as T;
} 
```

然后修改`foo`：

```
public static A foo(A obj)
{
    return bar(obj);
} 
```

请注意，我必须删除`new()`约束。必须这样做以避免将您的`obj`内部投射到`foo`. 不过，您可以在运行时检查该类型是否具有无参数构造函数。

# api - 具有 3rd 方 API 调用的异步 asp.net C# 4.0 MVC 2 应用程序

> ID：14320955
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:19.520
> 
> 标签：api, c#-4.0, asp.net-mvc-2, asynchronous

我有一个包含 3 页/步骤的申请表。在第 2 步中，可能会调用多达 2 个外部第三方 API，这些调用的结果存储在我们的本地数据库中，然后再转到第 3 步。我并不真正关心这些 API 的响应，直到第 3 步结束，然后我在数据库中检查结果以确定在第 3 步处理后应该发生什么。

目前，API 调用阻止用户进入第 3 步。如果请求需要一段时间，它会导致应用程序无响应，并且用户可能会厌倦等待。我想通过使 web 调用异步来使应用程序过程更具响应性，以便用户可以开始完成第 3 步，此时应该已经返回第 2 步的结果。

我可以看到 ASP.NET 4.5 有 async 和 await 方法，我认为这可能会有所帮助，但想知道我的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:59:59.843

如果您不关心异步方法的返回值，那么您可以将阻塞调用委托给线程池，并继续对代码进行进一步更改。

看看 System.Threading.ThreadPool.QueueUserWorkItem [http://msdn.microsoft.com/en-us/library/4yd16hza.aspx](http://msdn.microsoft.com/en-us/library/4yd16hza.aspx)

# c# - 安装 VS2012 后，Common Language Runtime 在 VS2005 中检测到无效程序

> ID：14320958
> 
> 赞同：1
> 
> 时间：2013-01-14T15:04:24.013
> 
> 标签：c#, asp.net, .net-2.0

我目前有一个客户需要在 Visual Studio 2005 中处理一个项目，其中包括几个班级项目和两个网站。安装 VS 2012 RC 后，我现在在任何 asp.net 项目、现有或新创建的默认网站模板上都收到以下错误。只有 VS 2005 受到影响，2010 仍然可以正常工作。

我已卸载 VS 2012，然后卸载然后重新安装以下内容，但无济于事：.NET 2.0 Framework，VS 2005

```
Server Error in '/WebSite1' Application.
--------------------------------------------------------------------------------

Common Language Runtime detected an invalid program. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidProgramException: Common Language Runtime detected an invalid program.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[InvalidProgramException: Common Language Runtime detected an invalid program.]
   System.ServiceModel.HostingManager..ctor() +0
   System.ServiceModel.ServiceHostingEnvironment.EnsureInitialized() +236
   System.ServiceModel.ServiceHostingEnvironment.OnEnsureInitialized(Object state) +4
   System.ServiceModel.PartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state) +52
   System.ServiceModel.ServiceHostingEnvironment.SafeEnsureInitialized() +73
   System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +220
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +68
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +348

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5466; ASP.NET Version:2.0.50727.5459 
```

# android - 无法更改 ViewPager 中的片段

> ID：14320962
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:31.913
> 
> 标签：android

我正在尝试更改 ViewPager 中的片段：

```
public void change() {
    android.support.v4.app.FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
    ft.replace(R.id.pager, mapa);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.commit();
    mSectionsPagerAdapter.notifyDataSetChanged();
} 
```

R.id.pager 是我的 ViewPager id。mapa 是一个膨胀的片段。如果我调用 change()，我要替换的片段将消失，但不会加载新片段。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T15:19:35.980

视图分页器使用适配器来更改它显示的片段。就像 ListView 使用它的适配器来获取视图以填充列表一样。

您必须扩展[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)，创建它的新实例并使用以下行将其设置为寻呼机：

```
mViewPager.setAdapter(fragPagerAdapter); 
```

# c++ - 如何在 C++ 的静态方法中使用非静态实例？

> ID：14320966
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:36.897
> 
> 标签：c++

我有一个 lasse1 的实例，我想在 lasse2 的方法中使用它，这个方法是静态方法，这不起作用：

```
 class Lasse2{
 ......
public :
static void function(void);
Lasse1* obj;
........
}; 
```

现在我想像这样使用它：

```
void Lasse2::function(void){
obj->dosmt(); // this doesn't work 
......... 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T15:11:52.530

如果要访问类的实例成员，则*必须*具有该类的实例。没有办法解决这个问题。您的选择是：

1.  使 obj 成为静态成员。如果您打算为此类的所有实例使用一个 obj，请执行此操作。
2.  从 function() 中删除静态，使其成为实例方法。

如果您不能执行其中任何一项，那么您需要找到一种方法将实例指针传递给您的函数。例如，需要函数指针的 API 通常具有在最终调用该函数时将指针大小的数据传递给该函数的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T15:10:53.280

更改静态方法以显式传递对象指针：

```
static void function(Lasse1* obj)
{
    obj->dosmt(); 
} 
```

但在你这样做之前，考虑一下你真正想要做什么（如果你愿意，甚至可以写另一个问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T15:11:04.710

你需要一个你的类的实例来实现它。

创建一个或通过其他方式接收它（函数参数、全局变量、类静态变量等）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T15:12:39.130

SLaks 说得最好：“你不能”

原因如下：

当你声明一个成员变量（不是静态的，见`obj`上文）时，你是在告诉编译器每个类型的对象都`Lassie2`包含一个指向 a 的指针`Lassie1`。

当您声明一个静态方法时，这意味着它独立于该类的所有实例（实际对象）。它不对对象进行操作。

所以在里面`Lasse2::function`，没有`this`，没有`Lassie2`对象可以让你从中获取`obj`指针。

# c - 无法弄清楚如何在我的客户端-服务器模型中实现线程

> ID：14320968
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:40.337
> 
> 标签：c, multithreading, client-server, named-pipes

我有一个小型服务器-客户端应用程序，它做的不多（客户端连接到服务器，通过管道发送一个数字并接收另一个数字）。

但它一次只能使用一个连接（连接客户端时，没有其他客户端可以访问服务器）

我想让多个客户端一次连接到服务器成为可能，我打算用工作线程来做到这一点。

观察：

```
#define CONNECT_NAMEDPIPE "\\\\.\\pipe\\ClientToServer" 
```

服务器：

```
HANDLE namedPipe = CreateNamedPipe (CONNECT_NAMEDPIPE, 
                                    PIPE_ACCESS_DUPLEX,
                                    PIPE_TYPE_BYTE | PIPE_READMODE_BYTE | PIPE_WAIT,
                                    2,
                                    sizeof(MinMax),
                                    sizeof(NumberList),
                                    0,                  // timeout
                                    NULL);

if (namedPipe == INVALID_HANDLE_VALUE) {
    printf("Unable to create named pipe\r\nServer closing\r\n");
    printf("CreateNamedPipe failed, GLE=%d.\r\n", GetLastError());
} // Error unable create pipe
else {
    printf("Server created\r\n");
    printf("Awaiting connection\r\n");

    ConnectNamedPipe(namedPipe, NULL);
    etc ...
} 
```

因此，服务器在 ConnectNamedPipe 上等待，直到客户端连接，然后对于任何其他连接都不可用。

如果我想启用多个连接，我应该如何创建工作线程？

如果每次连接尝试都创建一个新管道（使用新的管道名称/路径 - CONNECT_NAMEDPIPE 不能用于所有）

我如何知道其他人何时尝试连接？我的线程应该在哪里？我被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:18:26.393

我认为伯克利插座更适合这个。如果您必须使用管道，则可以使用以下方法：

1.  客户端通过主命名管道向控制线程发送连接请求。
2.  服务器创建（或从池中获取）侦听另一个唯一管道的工作线程。
3.  控制线程用这个新管道的名称来回答。
4.  客户端关闭控制管道并将真实的请求数据发送到新管道。
5.  工作线程读取请求，对其进行处理，然后发回响应。
6.  同时，控制线程准备好从另一个客户端读取另一个连接请求。

# javascript - 调整画布大小时的平移和缩放画布问题

> ID：14320970
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:46.390
> 
> 标签：javascript, html, canvas, zooming, pan

我已使用在此[stackoverflow 答案](https://stackoverflow.com/questions/5189968/zoom-to-cursor-calculations/5526721#5526721)（[此处为现场演示](http://phrogz.net/tmp/canvas_zoom_to_cursor.html)）上找到的代码在我的画布上实现平移和缩放。这很好用，但我有一个问题。

我的整个页面都是画布，所以当浏览器调整大小时，画布也会调整大小。没有任何代码，这只会使画布拉伸，看起来很糟糕。如果我在调整浏览器大小时设置一些 jQuery 来调整画布大小，那么稍后我会遇到非常奇怪的平移问题。

我不确定要更新哪些变量或如何正确更新它们以允许在调整画布大小后平移和缩放继续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-28T18:33:37.187

嘿@Chris这个问题有点老了，但我自己也有同样的问题，这就是我所做的：

```
window.addEventListener('resize', function() { 
    var transform = context.getTransform();
    context.setTranslate( transform.e, transform.f);
    context.setScale( transform.d, transform.d );
} , false); 
```

在 @Phrogz 的函数 trackTransforms(ctx) 我添加了两个附加函数：

```
ctx.setTranslate = function( dx, dy ) {
    translate.call( ctx, dx, dy );
};
ctx.setScale = function(sx,sy) {
    scale.call( ctx, sx, sy );
}; 
```

Canvas 会自行重置，丢失所有上下文更改，这是一个不错的平移缩放系统。这只是试图根据转换重做这些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T12:24:25.760

在您的情况下，您需要在缩放后执行以下操作：

```
canvas.width = canvas.offsetWidth
canvas.height = canvas.offsetHeight 
```

我还根据您提到的问题制作了一个[库](https://bitbucket.org/vogdb/canvas-manipulation)。它使平移和缩放功能更易于使用。

# knockout.js - 在淘汰赛中更新数组子值的最佳方法

> ID：14320972
> 
> 赞同：0
> 
> 时间：2013-01-14T15:04:55.400
> 
> 标签：knockout.js

我有一个具有 IsRecent (bool) 项的淘汰 observableArray。IsRecent 表示更新的记录是否在一分钟前完成。当 IsRecent 为真时，我使用带有 css 的淘汰赛的 attr 突出显示该行。当我从数据库加载淘汰赛 observableArray 时，我通过 MVC ViewModel 进行计算。奇迹般有效。

现在，我不是一直加载整个表，而是只更新使用 ko.util.push/ko.util.replace 更改的记录/整行。这很好用...

当我推送/替换一条记录时，我想遍历整个表并更新一个微不足道的字段——IsRecent。问题是……如何？

我在下面做的似乎不起作用：

```
 function setIsRecentHighlight() {
       var now = new Date();
       ko.utils.arrayForEach(taskViewModel.tasks(), function(task) {
           var stamp = new Date(task.LastActivityStampUtc);
           var ms = Math.abs(stamp - now);
           if (ms > 60000 && task.IsRecent) {
              var index = taskViewModel.tasks.indexOf(task);
              task.IsRecent = false;
              taskViewModel.tasks.replace(taskViewModel.tasks()[index], task);
          }
       });
    } 
```

视图模型：

```
var taskViewModel = {
    tasks: ko.observableArray()
} 
```

任务有：

```
{"tasks":[
{"$id":"1","Name":"Report1","LastActivityStampUtc":"2013-01-14T12:52:14.420Z","IsRecent":true",
{"$id":"2","Name":"Report2","LastActivityStampUtc":"2013-01-14T12:47:32.700Z","IsRecent":false"}]
} 
```

# objective-c - 可可绑定与非合成属性

> ID：14320975
> 
> 赞同：0
> 
> 时间：2013-01-14T15:05:06.420
> 
> 标签：objective-c, properties, cocoa-bindings

在我的模型类中有属性：

```
@property (readwrite, nonatomic) NSString* prop; 
```

...

```
-(NSString*) prop
{ return someExternalObject.stringProp;}
-(void) setProp: (NSString*) str
{ someExternalObject.stringProp = str;} 
```

有时`someExternalObject.stringProp`会发生变化，我需要调用绑定到`prop`. 怎么做？

PS：我绝对不能将 Cocoa 元素直接绑定到`someExternalObject`.

# jquery - 使用 JQuery 获取 Grid 中隐藏字段的值

> ID：14320976
> 
> 赞同：0
> 
> 时间：2013-01-14T15:05:12.707
> 
> 标签：jquery, asp.net, radgrid, hidden-field

我有一个 RadGrid，它产生以下 html（每行隐藏 ID 更改）：

```
<input id="hiddenID" type="hidden" value="c6be9aaf-fc2b-441b-886e-120cfd6a73ee5" name="gvClaimDtSentDate$ctl00$ctl18$Detail50$ctl04$hiddenID">
<a id="c6be9aaf-fc2b-441b-886e-120cfd6a73ee" class="viewBtn" href="#">View</a>
<a class="orderBtn" id="lnkOrder" href="#">My Order</a> 
```

我想在单击 lnkOrder 时获取原始的隐藏 ID。所以我在下面做了，但它不起作用，因为它给了我每行的静态/相同的 id：

```
$('.orderBtn').click(function() {

            var tr = $("#<%=gvDtSentDate.ClientID%> tr");
            var id = tr.find("input[name$=hiddenID]").val(); 
```

有人可以帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:06:42.137

试试这个：

```
$('.orderBtn').click(function() {
    var $tr = $(this).closest('tr'); // gets closest parent tr element to the a
    var id = $tr.find("input[name$=hiddenID]").val();
    // if hidden input is the only one in the row you could simplify this to:
    // var id = $tr.find("input").val();
}); 
```

# savon - 使用 Savon 对 Polarion Web 服务执行身份验证

> ID：14320978
> 
> 赞同：2
> 
> 时间：2013-01-14T15:05:23.190
> 
> 标签：savon

我正在尝试使用 Ruby 和 Savon来关注[这里的讨论。](http://forums.polarion.com/viewtopic.php?f=5&t=19274)我能够检索会话 ID，但每当我从需要身份验证（跟踪器）的客户端执行请求时，我都会收到授权失败错误。

```
require 'Savon'

tracker_url = 'http://myserver/polarion/ws/services/TrackerWebService?wsdl'
session_url = 'http://myserver/polarion/ws/services/SessionWebService?wsdl'

# todo handle bad login credentials gracefully
session_client = Savon.client(wsdl: session_url)
response = session_client.call(:log_in, message: {user_name: 'lsimons', password: 'mypassword'})
session_id = response.header[:session_id]

puts "Session ID: #{session_id}"

tracker_client = Savon.client(wsdl: tracker_url, soap_header: {"session" => session_id},     headers: {"sessionID" => session_id})

puts "Requesting Workitem"
begin
    tracker_client.call(:get_work_item_by_id, message: {project_id: 'myProject', workitem_id: 'myWorkitem'})
rescue
    puts "Client call failed"
end 
```

此代码为 tracker_client 创建以下 SOAP 请求：

```
<?xml version="1.0" encoding="UTF-8"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ins0="http://ws.polarion.com/TrackerWebService-impl" xmlns:ins1="http://ws.polarion.com/types" xmlns:ins2="http://ws.polarion.com/TrackerWebService-types" xmlns:ins3="http://ws.polarion.com/ProjectWebService-types" xmlns:tns1="http://ws.polarion.com/TrackerWebService" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <env:Header>
        <session>2164640482421325916</session>
    </env:Header>
    <env:Body>
        <tns1:getWorkItemById>
            <ins0:projectId>myProject</ins0:projectId>
            <ins0:workitemId>myWorkitem</ins0:workitemId>
        </tns1:getWorkItemById>
    </env:Body>
</env:Envelope> 
```

但是，在论坛讨论中，sessionID 元素出现在标题之前。我认为标准 SOAP 不可能做到这一点？有没有办法通过 Savon 实现这一目标，还是我误解了论坛讨论？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T07:42:34.270

我在同一个线程之后遇到了同样的问题。这就是我使它工作的方式（通过复制 log_in 请求的响应标头）：

```
tracker_client = Savon.client(
  wsdl: tracker_url,
  soap_header: {
    "ns1:sessionID" => session_id,
    :attributes! => {
      "ns1:sessionID" => {
        "env:actor"           => "http://schemas.xmlsoap.org/soap/actor/next",
        "env:mustUnderstand"  => "0",
        "xmlns:ns1"           => "http://ws.polarion.com/session"
      }
    }
  }
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T10:34:09.000

老问题，但我想我可以添加一些信息以希望对某人有所帮助。

我`lolsoap`用来和polarion说话。在上面生成的文档中，该`sessionID`元素已从任何名称空间和属性中删除。评估也是正确的，`actor`属性`mustUnderstand`似乎无关紧要。

要正确添加标题，尽管有所有绒毛，需要获取它，`Nokogiri::XML::Node`然后`dup`将其添加到文档的标题中。这是`nokogiri`/`libxml2`中的一个错误，添加子元素通常会破坏命名空间，除非在添加 [1] 之前克隆 Node。

在`lolsoap`其中完成了类似的操作：

```
auth_header = login_response.nokogiri_doc.xpath("//*[local-name()='sessionID']")[0].dup
other_request.header.__node__ << auth_header 
```

请注意`dup`操作。`header.__node__`只是`Nokogiri::XML::Element`随机 SOAP 请求的标头。

该`dup`操作将所需元素添加到另一个元素中，并正确定义了所有必要的命名空间和属性。

我不知道是否`savon`允许直接触摸请求 XML，但我想确实如此。因此 HTH

[1] [https://github.com/sparklemotion/nokogiri/issues/1200](https://github.com/sparklemotion/nokogiri/issues/1200)

# android - Android相机图像随机旋转

> ID：14320979
> 
> 赞同：0
> 
> 时间：2013-01-14T15:05:28.200
> 
> 标签：android, random, camera, image-rotation

我发现了一个非常有趣的问题。拍完相机照片后（我将设备保持在纵向模式，而不是旋转），给定的照片有时会旋转，但并非总是如此。我知道，有些设备总是给出旋转的照片，但它可以用 exif 或 mediastore 信息旋转。但在这种情况下，exif 和 mediastore 说方向是 0，但图像是旋转的。最令人沮丧的事情是完全随机的。代码非常简单：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, currentFileUri);
startActivityForResult(intent, RequestCodeCollection.CAMERA_IMAGE_CAPTURE);

@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        try {
            oldImageExifInterface = new ExifInterface(currentFileUri.getPath());
        }
} 
```

有人见过这个问题吗？操作系统更新后我在 Galaxy Nexus 上体验过 (4.1.1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T08:51:02.120

尝试这个。

```
try {
        File f = new File(imagePath);
        ExifInterface exif = new ExifInterface(f.getPath());
        int orientation = exif.getAttributeInt(
                ExifInterface.TAG_ORIENTATION,
                ExifInterface.ORIENTATION_NORMAL);

        int angle = 0;

        if (orientation == ExifInterface.ORIENTATION_ROTATE_90) {
            angle = 90;
        } else if (orientation == ExifInterface.ORIENTATION_ROTATE_180) {
            angle = 180;
        } else if (orientation == ExifInterface.ORIENTATION_ROTATE_270) {
            angle = 270;
        }

        Matrix mat = new Matrix();
        mat.postRotate(angle);
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 2;

        Bitmap bmp = BitmapFactory.decodeStream(new FileInputStream(f),
                null, options);
        bitmap = Bitmap.createBitmap(bmp, 0, 0, bmp.getWidth(),
                bmp.getHeight(), mat, true);
        ByteArrayOutputStream outstudentstreamOutputStream = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100,
                outstudentstreamOutputStream);
        imageView.setImageBitmap(correctBmp);

    } catch (IOException e) {
        Log.w("TAG", "-- Error in setting image");
    } catch (OutOfMemoryError oom) {
        Log.w("TAG", "-- OOM Error in setting image");
    } 
```

# node.js - 按日期对 mongoose 模式数组进行分类

> ID：14320983
> 
> 赞同：1
> 
> 时间：2013-01-14T15:05:46.193
> 
> 标签：node.js, mongodb, express, mongoose

这是架构：

```
var userschema = new mongoose.Schema({

  user: String,
  messages: [{ 

              title: String,
              author: String,
              message: String,
              date: { type: Date, default: Date.now },

           }],

}); 
```

我试图在按日期排序的单个页面中显示所有用户的消息。例如，我知道如何显示特定用户的所有消息，但如果我有多个用户，我不知道如何使用 mongoose 按日期对他们的消息进行分类。有没有办法做到这一点...？

谢谢提前！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:23:56.993

使用聚合框架和数组`$unwind`，`messages`以便您可以通过以下方式`$sort`全部使用它们`date`：

```
Users.aggregate([
    {$unwind: '$messages'},
    {$sort: {'messages.date': 1}}
], function (err, result) {
    console.log(result);
} 
```

# r - 列出 MS Windows 任务

> ID：14320987
> 
> 赞同：1
> 
> 时间：2013-01-14T15:05:51.897
> 
> 标签：r, windows-7, task

是否有“内置”方式列出当前正在运行的所有 MS Windows 任务？

我用谷歌搜索了一下，并通过 找到了一种解决方法`shell("tasklist")`，但我不太喜欢生成的 R 对象的结构，因为它非常“仅捕获输出”（即生成的对象是一个包含诸如 line 之类的东西的字符向量数字等），我将不得不对其触发一些正则表达式以将其转换为数据框之类的东西：

```
value <- shell("tasklist", intern=TRUE)

> value
 [1] ""                                                                               
 [2] "Abbildname                     PID Sitzungsname       Sitz.-Nr. Speichernutzung"
 [3] "========================= ======== ================ =========== ==============="
 [4] "System Idle Process              0 Services                   0            24 K"
 [5] "System                           4 Services                   0         9.404 K"

 [...]

[96] "tasklist.exe                  6876 Console                    1         6.040 K" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T15:18:01.297

这将在数​​据框中返回信息：

```
> value <- read.csv(text = shell("tasklist /fo csv", intern = TRUE))
> head(value)
           Image.Name PID Session.Name Session. Mem.Usage
1 System Idle Process   0     Services        0      20 K
2              System   4     Services        0   1,652 K
3            smss.exe 328     Services        0     292 K
4           csrss.exe 468     Services        0   2,140 K
5         wininit.exe 548     Services        0     244 K
6           csrss.exe 564      Console        1  22,416 K 
```

也试试：

```
View(value) 
```

# ajax - Grails Spring Security - 会话超时后重新登录时重新加载会话变量

> ID：14320988
> 
> 赞同：1
> 
> 时间：2013-01-14T15:05:56.587
> 
> 标签：ajax, grails, spring-security, session-variables

我在我的 grails 应用程序中使用 spring 安全核心。我的应用程序有很多调用控制器的 ajax 调用。反过来，控制器依赖于一些会话变量来满足请求。我目前能够在会话超时时正确显示 ajax 登录表单。但是，它只使用新创建的用户对象创建一个新会话。存储在会话中的所有其他对象都将丢失。

有没有办法在会话超时后用户重新登录后重新加载会话变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:50:51.557

会话范围的目的是在会话结束时将其擦除。如果您需要在会话之间共享数据，您应该重新考虑您的架构并将数据保存在数据库（服务器端）或 cookie（客户端）中

*（从评论移到答案）*

# java - Android - 应用程序内的输入文本不起作用

> ID：14320990
> 
> 赞同：0
> 
> 时间：2013-01-14T15:06:02.177
> 
> 标签：java, android, shell, adb

我正在尝试使用 adb input text 方法将文本输入到当前正在运行的应用程序（不是我自己的）中，如果我从命令提示符运行它，例如'adb input text "Android"，并且如果我运行它从终端模拟器。然而，下面的代码运行成功，但在屏幕上没有输出。我还尝试了各种其他方法来运行 shell 命令，这些命令也没有失败，但没有输出任何文本。有人知道我做错了什么吗？

```
try {
            //Runtime.getRuntime().exec("su");
            Runtime.getRuntime().exec("input text \":\"");
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:03:31.173

要将文本注入到 android 应用程序中，注入器必须具有

```
 android.permission.INJECT_EVENTS 
```

权限，所以它必须是系统应用程序。

您的 Runtime.getRuntime().exec 没有此权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-13T11:36:11.523

如果您从本机可执行文件运行命令，它工作正常。构建 NDK 二进制文件并执行：

```
char * command = "input text hello%sworld\0";
system( command );//fork and exec input text ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T23:05:22.117

也许你需要使用： `Runtime.getRuntime().exec("shell input text");`

# c - 为什么这个 C 程序可以工作？

> ID：14320993
> 
> 赞同：-1
> 
> 时间：2013-01-14T15:06:05.323
> 
> 标签：c

当我执行以下代码时

```
#include<stdio.h>
#include<unistd.h>

int main(void)
{
    int i; 
    for(i=0;i<=100;i++)
    {
        printf("Percentage complete: %d %%",i);
        sleep(1);
    }
    printf("\n");
} 
```

但是，当我执行以下代码时，该代码不起作用，

```
#include<stdio.h>
#include<unistd.h>

int main(void)
{
    int i; 
    for(i=0;i<=100;i++)
    {
        printf("\nPercentage complete: %d %%",i); //There is a newline here
        sleep(1);
    }
    printf("\n");
} 
```

该代码似乎有效。我不确定为什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T15:09:14.550

我假设您的意思是，当您说它“不起作用”时，您不会每秒看到一行新的输出。

这是因为终端通常是行缓冲的，这意味着它们在收到整行之前不会执行显示传入文本的工作。

您可以通过“刷新”输出流来解决此问题，强制终端显示它：

```
fflush(stdout); 
```

此外，您的代码`return`在`main()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T15:09:55.477

文本被`printf()`发送到`stdout`缓冲区。此缓冲区在换行符上自动刷新。因此，如果您不打印换行符，则缓冲区不会自动刷新。

要手动刷新缓冲区，请使用`fflush(stdout)`，如下所示：

```
for(i=0;i<=100;i++)
{
  printf("Percentage complete: %d %%",i);
  fflush(stdout);
  sleep(1);
} 
```

假设您想一遍又一遍地更新同一行（具有一种百分比增加的动画），您可能希望`\r`在打印的文本前面：

```
printf("\rPercentage complete: %d %%",i); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T15:09:57.097

`printf`是缓冲输出。在缓冲区已满或遇到换行符之前，数据不会打印到控制台。

`fflush`您可以通过调用来强制打印数据`stdout`。

# eclipse - 使用 Eclipse Runtime Configuration 启动 jar 文件

> ID：14320994
> 
> 赞同：1
> 
> 时间：2013-01-14T15:06:10.447
> 
> 标签：eclipse, eclipse-plugin

我需要使用 Eclipse 运行时配置 ( `ILaunchConfiguration`) 启动 Java 程序。但是，我想提供程序作为`.jar`文件（作为插件的一部分）运行，而不是作为 Eclipse 项目。

似乎为了从 Eclipse 运行时配置启动 Java 程序，我需要指定一个项目（和主类）。

如何使用配置框架启动任意`.jar`文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:17:51.593

这篇文章有帮助：

[http://eclipse.org/articles/Article-Java-launch/launching-java.html](http://eclipse.org/articles/Article-Java-launch/launching-java.html)

我使用以下代码运行`.jar`插件`lib`目录中的文件：

```
IPath path = new Path("lib" + File.separator + "some.jar");
Bundle bundle = Platform.getBundle(IDs.PLUGIN_ID);
URL url = FileLocator.find(bundle, path, null);
URI uri = FileLocator.resolve(url).toURI();
File file = URIUtil.toFile(uri);
IPath resolvedPath = new Path(file.toString());
IRuntimeClasspathEntry jar = JavaRuntime.newArchiveRuntimeClasspathEntry(resolvedPath);

IPath systemLibsPath = new Path(JavaRuntime.JRE_CONTAINER);
IRuntimeClasspathEntry systemLibsEntry =
JavaRuntime.newRuntimeContainerClasspathEntry(systemLibsPath, IRuntimeClasspathEntry.STANDARD_CLASSES);

List<String> classpath = new LinkedList<>();
classpath.add(aproveJar.getMemento());
classpath.add(systemLibsEntry.getMemento());

configuration.setAttribute(IJavaLaunchConfigurationConstants.ATTR_CLASSPATH, classpath);
configuration.setAttribute(IJavaLaunchConfigurationConstants.ATTR_DEFAULT_CLASSPATH, false); 
```