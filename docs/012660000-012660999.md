# StackOverflow 问答 12660000-12660999

# mysql - 非常多记录的数据库架构（例如社交网络中的消息）

> ID：12660003
> 
> 赞同：2
> 
> 时间：2012-09-30T08:56:39.830
> 
> 标签：mysql, database, database-design, social-networking

我想了解如何为聊天消息构建大型站点数据库架构。（例如 facebook.com 或 gmail.com）

我认为消息被重新分配到不同的表中，因为将所有消息都放在一个表中是不可能的，原因是它们的数量很大，对吗？（我认为这里不能分区）

那么，使用什么逻辑在不同的表中重新分配消息呢？我有几个变体，但我认为它们都不是最佳变体。所以一般来说，我对你对此的看法很感兴趣？另外，如果您知道一些关于此的好文章，请发布链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:03:57.283

目前的答案是[hadoop](http://hadoop.apache.org)

他们有一个分布式文件系统和一个可以使用该[http://hbase.apache.org的数据库](http://hbase.apache.org)

> [http://en.wikipedia.org/wiki/HBase](http://en.wikipedia.org/wiki/HBase)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:00:13.510

前段时间有一篇文章reddit是如何从小到大的。他们没有用户消息系统，但我想这将适用于具有大量数据的场景 [http://highscalability.com/blog/2010/5/17/7-lessons-learned-while-building -reddit-to-270-million-page.html](http://highscalability.com/blog/2010/5/17/7-lessons-learned-while-building-reddit-to-270-million-page.html)

编辑：关于数据库的“有趣”部分是#3 - 不要担心模式.. 他们使用 2 个表来处理所有事情。事物和数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T09:09:37.637

好的，问题是如何对数据集进行分区。考虑这一点的最简单（通常也是最好的）方法是考虑访问模式。哪些消息需要快速，哪些消息可能很慢，以及如何管理每个消息。

通常较旧的消息可以保存在低网络速度/低内存/非常大的存储节点（多 TB）上。

新消息应该在高带宽网络/高内存/低存储节点上（千兆字节就足够了）。

随着流量的增长，您需要将存储添加到慢速节点，并将节点添加到快速节点（水平扩展）。

每天晚上（或更频繁），您可以将旧消息复制到历史数据库，并从当前数据库中删除消息。查询可能需要处理两个数据库，但这并不太麻烦。

当您向外扩展时，可能需要对数据进行分片，即按某个数据值拆分。用户 ID 拆分是有意义的。为了让生活更轻松，每个用户都可以存储对话的所有方面。我建议为此使用时间分段文本（磁盘访问通常在 4k 边界上），尽管最初这对您来说可能太复杂了。

查询现在需要用户感知，以便查询正确的数据库。一个简单的查找表将对此有所帮助。

另一件事是在传入的过程中压缩消息，并在传出的过程中解压缩。文本很容易压缩，并且可以使您的吞吐量增加一倍，以增加少量的 cpu。

许多 NoSQL 数据库为您完成了许多艰苦的工作，但在您当前系统的容量用完之前，您可能希望坚持使用您所知道的技术。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T09:01:00.593

Facebook 将[Apache Cassandra](http://en.wikipedia.org/wiki/Apache_Cassandra)用于他们的一些存储（文档数据库），并大量使用[memcached](http://en.wikipedia.org/wiki/Memcached)以使其具有良好的扩展性。

这里有更多关于[FB 的具体细节](http://www.makeuseof.com/tag/facebook-work-nuts-bolts-technology-explained/)。您还可以在[FB 开发者新闻](http://www.facebook.com/notes.php?id=9445547199)中找到一些珍品。

# highcharts - Highcharts 在一个 div 中附加两种类型的图表

> ID：12660004
> 
> 赞同：0
> 
> 时间：2012-09-30T08:56:51.677
> 
> 标签：highcharts

我正在使用以下代码通过 highcharts 创建图表。两个 div 没问题，但我希望这两种类型的图表在一个 div 中，虽然我在这里使用了不同的数据，但我将使用相同的数据......代码是

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Csv Chart</title>
<script src="js/jquery-1.7.1.min.js" type="text/javascript"></script>
<script src="js/highcharts.js" type="text/javascript"></script>
<script src="js/highcharts-more.js" type="text/javascript"></script>
<script src="js/modules/exporting.js" type="text/javascript"></script>
</head>
<body>
<script>
var csvChart;
var chartArea;
$(document).ready(function(){
    var options = {
    chart: {
        renderTo: 'csv-chart',
        type: 'line'
    },
    title: {
        text: 'Fruit Consumption Line Chart'
    },
    xAxis: {
        categories: []
    },
    yAxis: {
        title: {
            text: 'Units'
        }
    },
    series: []
  };
  $.get('data.csv', function(data) {
    // Split the lines
    var lines = data.split('\n');
    console.log(data);

    // Iterate over the lines and add categories or series
    $.each(lines, function(lineNo, line) {
        var items = line.split(',');

        // header line containes categories
        if (lineNo == 0) {
            $.each(items, function(itemNo, item) {
                if (itemNo > 0) options.xAxis.categories.push(item);
            });
        }

        // the rest of the lines contain data with their name in the first position
        else {
            var series = {
                data: []
            };
            $.each(items, function(itemNo, item) {
                if (itemNo == 0) {
                    series.name = item;
                } else {
                    series.data.push(parseFloat(item));
                }
            });

            options.series.push(series);

        }

    });

    // Create the chart
    csvChart = new Highcharts.Chart(options);
});

chartArea = new Highcharts.Chart({

            chart: {
                renderTo: 'area-chart',
                type: 'arearange'
            },

            title: {
                text: 'Temperature variation by day'
            },

            xAxis: {
                type: 'datetime'
            },

            yAxis: {
                title: {
                    text: null
                }
            },

            tooltip: {
                crosshairs: true,
                shared: true,
                valueSuffix: '°C'
            },

            legend: {
                enabled: false
            },

            series: [{
                name: 'Temperatures',
                data: [
/* 2009-01-01 */
[1230771600000, -5.8, 0.1],
[1230858000000, -4.1, 1.4],
[1230944400000, -0.5, 4.1],
[1231030800000, -8.9, -0.7],
[1231117200000, -9.7, -3.7],
[1231203600000, -3.4, 3.2],
[1231290000000, -3.9, -0.2],
[1231376400000, -2.4, 6.7],
[1231462800000, 3.8, 6.9],
[1231549200000, 3.1, 6.8],
[1231635600000, 0.0, 7.6],
[1231722000000, 5.6, 9.4],
[1231808400000, 3.6, 6.5],
[1231894800000, -3.6, 3.8],
[1231981200000, -6.0, -1.5],
[1232067600000, -3.8, 2.4],
[1232154000000, 1.5, 4.2],
[1232240400000, 0.0, 4.5],
[1232326800000, -1.1, 3.6],
[1232413200000, 0.5, 5.1],
[1232499600000, 0.0, 2.5],
[1232586000000, -0.6, 2.1],
[1232672400000, 0.8, 4.7],
[1232758800000, 0.6, 4.4],
[1232845200000, -3.9, 1.4],
[1232931600000, -4.3, 2.0],
[1233018000000, -6.1, -0.4],
[1233104400000, -0.3, 1.9],
[1233190800000, -2.9, 2.7],
[1233277200000, -4.0, -1.0],
[1233363600000, -4.4, -1.9],
/* 2009-12-01 */
[1259629200000, -3.3, 1.7],
[1259715600000, -2.8, -0.7],
[1259802000000, -2.7, 3.8],
[1259888400000, -0.7, 4.2],
[1259974800000, 0.3, 6.1],
[1260061200000, 2.9, 9.8],
[1260147600000, 0.0, 6.8],
[1260234000000, 0.6, 2.8],
[1260320400000, 0.1, 5.1],
[1260406800000, 2.8, 3.9],
[1260493200000, -1.2, 2.2],
[1260579600000, -4.0, -0.4],
[1260666000000, -0.7, 0.7],
[1260752400000, 0.5, 1.6],
[1260838800000, -1.0, 1.5],
[1260925200000, -7.8, -1.0],
[1261011600000, -11.9, -7.9],
[1261098000000, -13.5, -7.9],
[1261184400000, -7.8, -1.7],
[1261270800000, -11.2, -0.6],
[1261357200000, -13.1, -7.2],
[1261443600000, -13.2, -5.2],
[1261530000000, -10.9, -7.7],
[1261616400000, -8.4, -1.5],
[1261702800000, -6.1, -1.2],
[1261789200000, -2.6, -1.2],
[1261875600000, -2.9, 0.7],
[1261962000000, -2.7, 0.7],
[1262048400000, -10.8, -1.3],
[1262134800000, -11.1, -8.0],
[1262221200000, -12.2, -6.5]
]
            }]

        });
});

</script>
<div id="csv-chart"></div>
<div id="area-chart"></div>
</body>
</html> 
```

现在我希望将上面的两个图表放在一个 div 中，使其看起来像下图。是否可以？ ![在此处输入图像描述](../Images/d0c4217e2a14482d277c7968eb9b9111.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T13:01:55.880

你在这里：http: [//jsfiddle.net/VHTqa/](http://jsfiddle.net/VHTqa/)

您需要将不同类型的各种系列添加到一个图表中。

# raphael - Raphael.js onmouseover onmouseout 事件

> ID：12660009
> 
> 赞同：0
> 
> 时间：2012-09-30T08:57:57.503
> 
> 标签：raphael, mouseevent, onmouseover, onmouseout

我使用**for 循环**在 raphael.js 中制作了 4 个矩形。当我应用诸如 onmouseover 或 onmouseout 之类的事件时，它仅适用于创建的最后一个矩形。我知道我的代码有问题。请提供解决方案，有没有办法简化代码？

JS小提琴[链接](http://jsfiddle.net/TL78u/3/)

```
window.onload = function(){
    var paper = Raphael(0,0,640,540);

    for (i=0;i<2;i++){
        for (j=0;j<2;j++){
            var boxes = paper.rect(0+(j*320),0+(i*270),320,270).attr({fill:'#303030',stroke:'white'});
            boxes.node.onmouseover = function () {
                boxes.attr("fill", "blue");
            };
            boxes.node.onmouseout = function () {
                boxes.attr("fill", "#303030");
            };
        }
    }    
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T14:03:27.543

这是 javascript 中一个极其常见的错误。您重用该`boxes`变量，因此当执行任何处理程序时，它指向它拥有的最后一个值。

克服这个问题的常用方法是将代码包装在函数调用中的循环内：

```
window.onload = function() {
var paper = Raphael(0, 0, 640, 540);

for (i = 0; i < 2; i++) {
    for (j = 0; j < 2; j++) {
        (function(i, j) {
            var boxes = paper.rect(0 + (j * 320), 0 + (i * 270), 320, 270).attr({
                fill: '#303030',
                stroke: 'white'
            });
            boxes.node.onmouseover = function() {
                boxes.attr("fill", "blue");
            };
            boxes.node.onmouseout = function() {
                boxes.attr("fill", "#303030");
            };
        })(i, j);
    }
}
} 
```

​​​

# php - PayPal 支持迪拉姆吗？

> ID：12660013
> 
> 赞同：2
> 
> 时间：2012-09-30T08:58:46.083
> 
> 标签：php, paypal, currency, paypal-sandbox

我正在设置我的 PayPal，但我需要的货币不在下拉列表中。

我住在迪拜，货币是阿拉伯联合酋长国迪拉姆 (AED)。是否有我需要的附加组件或可用的“其他”选项？任何人都知道如何将 AED 添加到 Paypal。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:01:58.847

根据[他们的网站](https://www.paypal.com/worldwide/) ，他们不支持您的货币。可能，您需要以美元进行交易

官方报价：

> 在这些国家/地区发送和接收付款。从您的 PayPal 账户提款到美国银行账户。此外，在标有 (+) 的国家/地区提取信用卡或借记卡。

注意：阿联酋标记为+

# xamarin.ios - Monotouch 是否有 FindName 等价物

> ID：12660014
> 
> 赞同：3
> 
> 时间：2012-09-30T08:59:12.357
> 
> 标签：xamarin.ios

逐渐学会喜欢单触

是否有与 FindName 函数等效的函数，以便我可以从其“字符串”名称操作控件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:11:23.687

UIKit 控件（视图）没有名称，但它们有标签，它们是整数值

您可以通过调用 ViewWithTag() 找到控件/子视图：

```
UIView subview = new UIView(..);
subview.Tag = 100;

parentView.AddSubview(subView); 
```

在另一种方法中：

```
UIView subView = parentView.ViewWithTag(100); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T00:41:50.777

除了 Philippe 建议的标记之外，您还可以在类中创建一个引用该控件的“Outlet”，这相当于按名称引用它。

# c# - 当 XPathEvalute 可以是 XElement 或 XAttribute 时，如何转换它？

> ID：12660015
> 
> 赞同：11
> 
> 时间：2012-09-30T08:59:24.867
> 
> 标签：c#, .net, xml, xpath

所以我有这个代码：

```
List<PriceDetail> prices =
                (from item in xmlDoc.Descendants(shop.DescendantXName)
                 select new PriceDetail
                 {
                     Price = GetPrice(item.Element(shop.PriceXPath).Value),
                     GameVersion = GetGameVersion(((IEnumerable)item.XPathEvaluate(shop.TitleXPath)).Cast<XAttribute>().First<XAttribute>().Value, item.Element(shop.PlatformXPath).Value),
                     Shop = shop,
                     Link = item.Element(shop.LinkXPath).Value,
                     InStock = InStock(item.Element(shop.InStockXPath).Value)
                 }).ToList<PriceDetail>(); 
```

我遇到的问题是这段代码：

```
((IEnumerable)item.XPathEvaluate(shop.TitleXPath)).Cast<XAttribute>().First<XAttribute>().Value 
```

有时来自 XPathEvaluate 的对象可能是 XElement，然后强制转换不起作用。所以我需要的是一个适用于 XAttribute 和 XElement 的 Cast。

有什么建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T14:04:01.967

**`shop.TitleXPath`将您的 XPath 表达式 ( )更改**为：

```
 someXPathExpression 
```

**至**：

```
 string(someXPathExpression) 
```

**然后您可以将代码简化为**：

```
string result = item.XPathEvaluate(shop.TitleXPath) as string; 
```

* * *

**完整的工作示例**：

```
using System;
using System.IO;
using System.Xml.Linq;
using System.Xml.XPath;

class TestXPath
{
    static void Main(string[] args)
    {

        string xml1 =
@"<t>
 <a b='attribute value'/> 
 <c>
   <b>element value</b>
 </c>
 <e b='attribute value'/>
</t>";

        string xml2 =
@"<t>
 <c>
   <b>element value</b>
 </c>
 <e b='attribute value'/>
</t>";

        TextReader sr = new StringReader(xml1);
        XDocument xdoc = XDocument.Load(sr, LoadOptions.None);

        string result1 = xdoc.XPathEvaluate("string(/*/*/@b | /*/*/b)") as string;

        TextReader sr2 = new StringReader(xml2);
        XDocument xdoc2 = XDocument.Load(sr2, LoadOptions.None);

        string result2 = xdoc2.XPathEvaluate("string(/*/*/@b | /*/*/b)") as string;

        Console.WriteLine(result1);
        Console.WriteLine(result2);

    }
} 
```

当这个程序被执行时，相同的 XPath 表达式被应用到两个不同的 XML 文档上，不管`string()`第一次是一个属性，第二次是一个元素，我们都会得到正确的结果——写入控制台：

```
attribute value
element value 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-21T13:00:29.587

如果未找到该元素，Dimitre 的解决方案将返回空字符串；我们无法将它与实际的空值区分开来。所以我不得不制作这个扩展方法，通过 XPath 查询处理多个结果，如果没有找到则返回空枚举：

```
public static IEnumerable<string> GetXPathValues(this XNode node, string xpath)
{
    foreach (XObject xObject in (IEnumerable)node.XPathEvaluate(xpath))
    {
        if (xObject is XElement)
            yield return ((XElement)xObject).Value;
        else if (xObject is XAttribute)
            yield return ((XAttribute)xObject).Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-27T18:41:20.973

`XElement`和`XAttribute`都是 的形式`XObject`，因此如果类型的通用实例`XObject`足以满足您的需求，请将您的 Cast 更改`<XAttribute>`为 Cast `<XObject>`。

如果这不适用于您的特定情况，您可以使用 OfType`<XAttribute>`或 OfType`<XElement>`过滤其中一个，但这需要两次通过输入，一次过滤，`XElement`第二次过滤`XAttribute`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T09:05:11.960

在进行强制转换之前，您可以使用如下代码检查类型：

```
XElement e = item as XElement;
XAttribute a = item as XAttribute;

if(e != null)
   //item is of type XElement
else
  //item is of type XAttribute 
```

# c# - Dll 导入：无法在 DLL“ImportDLL”中找到入口点“fnMultiply”

> ID：12660016
> 
> 赞同：2
> 
> 时间：2012-09-30T08:59:44.623
> 
> 标签：c#, c++, dllimport

我正在尝试使用 DLLImport 在 C# 中使用 Win32 dll 方法。

Win32 dll C++ // .h 文件

```
#ifdef IMPORTDLL_EXPORTS
#define IMPORTDLL_API __declspec(dllexport)
#else
#define IMPORTDLL_API __declspec(dllimport)
#endif

// This class is exported from the ImportDLL.dll
class IMPORTDLL_API CImportDLL {
public:
    CImportDLL(void);
    // TODO: add your methods here.
    int Add(int a , int b);
};

extern IMPORTDLL_API int nImportDLL;

IMPORTDLL_API int fnImportDLL(void);
IMPORTDLL_API int fnMultiply(int a,int b); 
```

// .cpp 文件

// ImportDLL.cpp : 定义 DLL 应用程序的导出函数。//

```
#include "stdafx.h"
#include "ImportDLL.h"

// This is an example of an exported variable
IMPORTDLL_API int nImportDLL=0;

// This is an example of an exported function.
IMPORTDLL_API int fnImportDLL(void)
{
    return 42;
}

IMPORTDLL_API int fnMultiply(int a , int b)
{
    return (a*b);
} 
```

一旦我建立了这个，我得到 ImportDLL.dll

现在我创建 Windows 应用程序并将此 dll 添加到调试文件夹中并尝试使用 DLLImport 使用此方法

```
[DllImport("ImportDLL.dll")]
 public static extern int fnMultiply(int a, int b); 
```

我尝试在 C# 中调用它 `int a = fnMultiply(5, 6);`// 这行给出错误 Unable to find an entry point

任何人都可以告诉我我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:47:23.047

如果您要从本机 DLL 导出 C 函数，您可能希望使用[`__stdcall`调用约定](http://msdn.microsoft.com/en-us/library/zxk0tw93%28v=vs.80%29.aspx)（相当于`WINAPI`，即大多数 Win32 API C 接口函数使用的调用约定，并且是 .NET P/ 的默认值）调用）：

```
extern "C" MYDLL_API int __stdcall fnMultiply(int a, int b)
{
    return a*b;
}

// Note: update also the .h DLL public header file with __stdcall. 
```

此外，如果您想避免*名称混淆*，您可能需要使用[**.DEF 文件**](http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.80%29.aspx)[导出](http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.80%29.aspx)**。例如，将 .DEF 文件添加到您的本地 DLL 项目中，并编辑其内容，如下所示：**

 **```
LIBRARY MYDLL
EXPORTS
  fnMultiply @1
  ... 
```

（您可以使用命令行工具或**[Dependency Walker](http://www.dependencywalker.com/)**等 GUI 工具来检查函数从 DLL 导出时使用的实际名称。）**`DUMPBIN`**`/EXPORTS`

然后你可以在 C# 中像这样使用 P/Invoke：

```
[DllImport("MyDLL.dll")]
public static extern int fnMultiply(int a, int b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:14:30.103

为您导出的函数关闭名称修改。应该大有帮助。或者，您可以加载名称 mangled （有一种方法可以配置 DllImport 属性来执行此操作，所以我听说，但我不是 C# 工程师，所以我把它留给您查找它是否存在）。

```
extern "C" IMPORTDLL_API int fnMultiply(int a , int b)
{
    return (a*b);
} 
```**

# c++ - Xcode c++ 无法通过代码访问文件

> ID：12660017
> 
> 赞同：1
> 
> 时间：2012-09-30T08:59:54.637
> 
> 标签：c++, xcode, debugging, build, filepath

我已将图像“padimage.png”添加到我的资源文件夹并设置`add to target`和`make copy if needed`检查。然后在我的 c++ 代码中，我有以下代码来检查它是否可以到达文件

```
std::ifstream my_file("padimage.png");
if (my_file.good())
{
    std::cout << "could read file \n";
} else {
    std::cout << "could not read file \n";
} 
```

这失败意味着我无法访问该文件。我已经检查了调试构建文件夹，并且图像在资源文件夹下，我还尝试了文件的替代路径，如`"resources/padimage.png"`|| `Resources/padimage.png`|| `../Resources/padimage.png`等等等等

我对 c++ 还是很陌生，所以我不太明白它是如何查找文件或它搜索相对于什么路径的。此外，我确信这是一个非常简单的问题，但我无法解决它。

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:06:25.053

只是为了您自己的理智，请先执行以下操作。

```
char wd[1024];
std::cout << getcwd(wd, sizeof(wd)) << std::endl; 
```

您可能会惊讶于您所在的位置，以及您无法打开文件的原因。从 IDE 运行时，您可以在 Xcode 的 Product/Edit Schemes... 区域（以及其他地方）下指定工作目录的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:55:00.433

感谢 WhozCraig 的建议，我设法通过使用项目的根目录，然后在应用程序旁边创建一个独立文件，如下所示：

```
./padimage.png 
```

然而这并不理想。这意味着我将拥有项目之外的资源。

但是经过一些试验和错误后，我设法通过使用 .app 到程序包名称来导航到程序包内容；

```
./ProjectName.app/Contents/Resources/padimage.png 
```

# ruby-on-rails - 导轨自连接

> ID：12660025
> 
> 赞同：1
> 
> 时间：2012-09-30T09:02:07.990
> 
> 标签：ruby-on-rails, routing, controllers, self-join

我希望用户能够创建挑战 (challenges_created)，而其他用户能够提供支持以实现挑战 (challenges_supported)。我尝试使用自连接挑战模型来做到这一点，其资源嵌套在用户资源下方。我目前有模型：

```
class User < ActiveRecord::Base
  attr_accessible :name, :supporter_id, :challenger_id

  has_many :challenges_created, :class_name => 'Challenge', :foreign_key => :challenger_id
  has_many :challenges_supported, :class_name => 'Challenge', :foreign_key => :supporter_id
end 
```

和

```
class Challenge < ActiveRecord::Base
  attr_accessible :challenger, :completion_date, :description, :duration, :status,      :supporter, :title

  belongs_to :challenger, :class_name => 'User'
  has_many :supporters, :class_name => 'User'
end 
```

我认为我需要完整的 CRUD 和相应的视图，无论是用户创造挑战还是支持挑战。因此，我创建了 2 个控制器，分别命名为 challenge_created_controller 和 challenge_supported_controller。

我的 routes.rb 文件是：

```
resources :users do
  resources :challenges_created
  resources :challenges_supported
end 
```

我在使用此设置时遇到的问题是，当我尝试在

```
http://localhost:3000/users/3/challenges_created/new 
```

我收到消息

```
Showing /home/james/Code/Rails/test_models/app/views/challenges_created/_form.html.erb where line #1 raised:

undefined method `user_challenges_path' for #<#    <Class:0x007fb154de09d8>:0x007fb1500c0f90>
Extracted source (around line #1):

1: <%= form_for [@user, @challenge] do |f| %>
2:   <% if @challenge.errors.any? %> 
```

编辑操作的结果也是一样的。我尝试了很多东西，但如果我要在 form_for 中引用 @challenge_created，那么它与 Challenge 模型不匹配。

谁能告诉我我做错了什么。先感谢您。我的架构是：

```
 create_table "users", :force => true do |t|
    t.string   "name"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
    t.integer  "challenger_id"
    t.integer  "supporter_id"
  end

  create_table "challenges", :force => true do |t|
    t.string   "title"
    t.text     "description"
    t.integer  "duration"
    t.date     "completion_date"
    t.string   "status"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
    t.integer  "challenger_id"
    t.integer  "supporter_id"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:20:09.030

我认为问题在于你有一个`challenge_created`控制器，但你没有它的模型。在您的表单中，您指定了一个用户和一个挑战，因此 rails 会尝试为挑战找到一个控制器，而不是`challenge_created`. Rails 认为对于模型，您有一个根据约定命名的控制器。

我建议您不要为挑战创建两个不同的控制器。仅使用一种并区分操作。例如，您可以在挑战中创建`list_created`并采取行动。`list_supported`

# c++ - 计算 FLOPS（每秒浮点运算）

> ID：12660027
> 
> 赞同：8
> 
> 时间：2012-09-30T09:02:12.217
> 
> 标签：c++, c, cuda, gdb, gpu

如何计算我的应用程序的 FLOPS？如果我有执行指令的总数，我可以将它除以执行时间。但是，如何计算执行指令的数量？

我的问题是一般性的，任何语言的答案都受到高度赞赏。但我希望为我的应用程序找到一个由 C/C++ 和 CUDA 开发的解决方案。

我不知道标签是否正确，如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T10:09:53.507

您应该对您的数据所做的事情进行数学建模。隔离一个循环迭代。然后统计所有简单的浮点加法、乘法、除法等。例如 `y = x * 2 * (y + z*w)`是4次浮点运算。将结果数乘以迭代次数。结果将是您正在搜索的指令的数量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T23:59:57.980

如果浮点运算的数量不容易建模，我要做的是生成两个可执行文件：一个是生产版本，给我执行时间，另一个是在执行浮点运算时计算所有浮点运算（肯定会慢一点，但这对我们的目的无关紧要）。然后我可以通过将第二个可执行文件的浮点操作数除以第一个可执行文件的时间来计算 FLOP/s 值。

这甚至可能是自动化的，但到目前为止我还没有这个需求。

# python - 读取内存映射的 bzip2 压缩文件

> ID：12660028
> 
> 赞同：6
> 
> 时间：2012-09-30T09:02:16.820
> 
> 标签：python, mmap, bzip2

所以我在玩维基百科转储文件。这是一个经过 bzip 压缩的 XML 文件。我可以将所有文件写入目录，但是当我想进行分析时，我必须重新读取磁盘上的所有文件。这给了我随机访问，但它很慢。我有 ram 将整个 bzip 压缩文件放入 ram。

我可以很好地加载转储文件并读取所有行，但我无法在其中查找，因为它很大。从表面上看，bz2 库必须先读取并捕获偏移量，然后才能将我带到那里（并将其全部解压缩，因为偏移量以解压缩字节为单位）。

无论如何，我正在尝试映射转储文件（~9.5 gigs）并将其加载到 bzip 中。我显然想在以前的 bzip 文件上对此进行测试。

我想将 mmap 文件映射到 BZ2File 以便我可以通过它寻找（以获取特定的、未压缩的字节偏移量），但从看起来，如果不解压缩整个 mmap 文件这是不可能的（这将超过 30千兆字节）。

我有什么选择吗？

这是我为测试而编写的一些代码。

```
import bz2
import mmap

lines = '''This is my first line
This is the second
And the third
'''

with open("bz2TestFile", "wb") as f:
    f.write(bz2.compress(lines))

with open("bz2TestFile", "rb") as f:
    mapped = mmap.mmap(f.fileno(), 0, prot=mmap.PROT_READ)

    print "Part of MMAPPED"
    # This does not work until I hit a minimum length
    # due to (I believe) the checksums in the bz2 algorithm
    #
    for x in range(len(mapped)+2):
        line = mapped[0:x]
        try:
            print x
            print bz2.decompress(line)
        except:
            pass

# I can decompress the entire mmapped file
print ":entire mmap file:"
print bz2.decompress(mapped)

# I can create a bz2File object from the file path
# Is there a way to map the mmap object to this function?
print ":BZ2 File readline:"
bzF = bz2.BZ2File("bz2TestFile")

# Seek to specific offset
bzF.seek(22)
# Read the data
print bzF.readline() 
```

这一切都让我想知道，bz2 文件对象有什么特别之处，它允许它在查找后读取一行？它是否必须先读取每一行才能从算法中获取校验和才能正确计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:27:34.703

我找到了答案！James Taylor 编写了几个用于在 BZ2 文件中查找的脚本，他的脚本位于 biopython 模块中。

[https://bitbucket.org/james_taylor/bx-python/overview](https://bitbucket.org/james_taylor/bx-python/overview)

这些工作非常好，尽管它们不允许在 BZ2 文件中寻找任意字节偏移量，但他的脚本会读取 BZ2 数据块并允许基于块进行寻找。

具体见[bx-python/wiki/IO/SeekingInBzip2Files](https://bitbucket.org/james_taylor/bx-python/wiki/IO/SeekingInBzip2Files)

# mysql - 设置时区mysql

> ID：12660029
> 
> 赞同：4
> 
> 时间：2012-09-30T09:02:34.373
> 
> 标签：mysql, timezone

我想在 mysql 中设置时区，从默认时区（'los angle'）到我自己的时区（'asia/jakart'）。我一直在使用查询更改时区->

```
SET GLOBAL TIME_ZONE = 'ASIA/JAKARTA' 
```

如果我使用上面的查询，时区会发生变化。但如果我重新启动 mysql，时区将返回默认时区（洛杉矶）。

如何使时区永久更改为亚洲/雅加达？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:07:01.293

将以下内容放入您的 mysql 服务器配置中（例如 my.cnf）

```
default-time-zone=Asia/Jakarta 
```

请在[此处查看文档](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-17T19:13:04.427

**在 /etc/mysql/my.cnf**

```
[mysqld_safe]
socket=/var/run/mysqld/mysqld.sock
default_time_zone=Asia/Jakarta 
```

记得使用下划线_

# c# - 字符串未被识别为有效的 DateTime

> ID：12660033
> 
> 赞同：0
> 
> 时间：2012-09-30T09:03:18.843
> 
> 标签：c#, asp.net

请帮我解决这个问题。我尝试了很多解决方案，但它们不起作用。

```
rd["DOB"].ToString() = "9/19/1946";

 DateTime dt1 = DateTime.ParseExact(rd["DOB"].ToString(), "MM/dd/yyyy", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:08:31.460

您应该使用“M/d/yyyy”作为格式字符串。

MM/dd/yyyy 将匹配 09/19/1946，但不匹配 9/19/1946

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T14:32:12.293

您可以参考下面的 URL 以进一步了解日期时间格式 [http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:06:05.953

您是否尝试过使用 Convert 类？

```
Convert.ToDateTime(rd["DOB"]); 
```

如果您使用 System.Data.DataRow 并且“DOB”列的类型为 SqlDateTime，那么应该可以。

# facebook-graph-api - 在 Heroku 上存储大型加密文件

> ID：12660042
> 
> 赞同：0
> 
> 时间：2012-09-30T09:04:31.273
> 
> 标签：facebook-graph-api, heroku, amazon-s3, storage

我们开发了一个在 Heroku 上运行的 Facebook 应用程序。该应用程序生成需要快速存储的加密文本。目前，文本只是简单地写入 Heroku 服务器上的文本文件，这不是一个可扩展的解决方案。

数据最终会下载到我们的本地机器上，但由于我们端无法快速下载，因此在应用程序和本地机器之间有一个可靠的中间存储是必不可少的。

您会为此目的推荐 S3 吗？有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:08:58.170

+1 到 S3。这是因为 Heroku 是一个只读文件系统，所以您可能需要寻找一些第三方解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:23:00.740

是的，我会推荐s3。非常可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:00:54.630

值得注意的是 S3 提供服务器端加密。事实上，aws-s3 SDK ruby​​ gem 也内置了对客户端加密的支持。

# android - arm-linux-androideabi-gcc 无法创建可执行文件 - 为 android armeabi 设备编译 ffmpeg

> ID：12660043
> 
> 赞同：14
> 
> 时间：2012-09-30T09:04:31.313
> 
> 标签：android, gcc, ffmpeg, arm, ubuntu-11.10

我正在尝试为 android armeabi 设备编译 ffmpeg。
我正在关注[roman10.net](http://www.roman10.net/how-to-build-ffmpeg-for-android/)
的教程 他给定的构建脚本为 armv7-a 设备构建 ffmpeg。我想为 armeabi 构建它。

**我的最终目标是在 android armeabi 和 armv7-a 设备上运行 ffmpeg 命令。**

所以我将脚本的 CPU 部分从

```
#arm v7vfpv3
CPU=armv7-a
OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
PREFIX=./android/$CPU
ADDITIONAL_CONFIGURE_FLAG=
build_one 
```

到

```
#arm v6
CPU=armv6
OPTIMIZE_CFLAGS="-marm -march=$CPU"
PREFIX=./android/$CPU 
ADDITIONAL_CONFIGURE_FLAG=
build_one 
```

（我认为将其更改为 armv6 会构建与 armeabi 设备兼容的 ffmpeg。我错了吗？）

**疑问1：**
我是否也必须更改工具链？
即从**arm-linux-androideabi-4.4.3**到**arm-eabi-4.4.0** ?????

**疑点二：**

当我尝试运行 ./build.sh （不更改工具链）时，它给了我以下错误：

```
/home/chaitanya/android/android-ndk-r5b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc is unable to create an executable file.
C compiler test failed.

If you think configure made a mistake,.. blaah blahh blaah 
```

之后我收到很多警告说：
'sub_id' 已弃用，许多其他功能已弃用警告。

**平台**：ubuntu 11.10
**ffmpeg 版本**：0.11.2
**NDK**：android-ndk-r5b

这是我的构建脚本：

```
#!/bin/bash
######################################################
# Usage:
# put this script in top of FFmpeg source tree
# ./build_android
# It generates binary for following architectures:
# ARMv6 
# ARMv6+VFP 
# ARMv7+VFPv3-d16 (Tegra2) 
# ARMv7+Neon (Cortex-A8)
# Customizing:
# 1\. Feel free to change ./configure parameters for more features
# 2\. To adapt other ARM variants
# set $CPU and $OPTIMIZE_CFLAGS 
# call build_one
######################################################
NDK=~/android/android-ndk-r5b
PLATFORM=$NDK/platforms/android-8/arch-arm/
PREBUILT=$NDK/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86
function build_one
{
./configure --target-os=linux \
    --prefix=$PREFIX \
    --enable-cross-compile \
    --extra-libs="-lgcc" \
    --arch=arm \
    #--cc=$PREBUILT/bin/arm-linux-androideabi-gcc \
    --cross-prefix=$PREBUILT/bin/arm-linux-androideabi- \
    #--nm=$PREBUILT/bin/arm-linux-androideabi-nm \
    --sysroot=$PLATFORM \
    --extra-cflags=" -O3 -fpic -DANDROID -DHAVE_SYS_UIO_H=1 -Dipv6mr_interface=ipv6mr_ifindex -fasm -Wno-psabi -fno-short-enums -fno-strict-aliasing -finline-limit=300 $OPTIMIZE_CFLAGS " \
    --disable-shared \
    --enable-static \
    --extra-ldflags="-Wl,-rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -nostdlib -lc -lm -ldl -llog" \
    --disable-everything \
    --enable-demuxer=mov \
    --enable-demuxer=h264 \
    --disable-ffplay \
    --enable-protocol=file \
    --enable-avformat \
    --enable-avcodec \
    --enable-decoder=rawvideo \
    --enable-decoder=mjpeg \
    --enable-decoder=h263 \
    --enable-decoder=mpeg4 \
    --enable-decoder=h264 \
    --enable-parser=h264 \
    --disable-network \
    --enable-zlib \
    --disable-avfilter \
    --disable-avdevice \
    $ADDITIONAL_CONFIGURE_FLAG

make clean
make  -j4 install
$PREBUILT/bin/arm-linux-androideabi-ar d libavcodec/libavcodec.a inverse.o
$PREBUILT/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib  -soname libffmpeg.so -shared -nostdlib  -z,noexecstack -Bsymbolic --whole-archive --no-undefined -o $PREFIX/libffmpeg.so libavcodec/libavcodec.a libavformat/libavformat.a libavutil/libavutil.a libswscale/libswscale.a -lc -lm -lz -ldl -llog  --warn-once  --dynamic-linker=/system/bin/linker $PREBUILT/lib/gcc/arm-linux-androideabi/4.4.3/libgcc.a
}

#arm v6
CPU=armv6
OPTIMIZE_CFLAGS="-marm -march=$CPU"
PREFIX=./android/$CPU 
ADDITIONAL_CONFIGURE_FLAG=
build_one

#arm v7vfpv3
#CPU=armv7-a
#OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfpv3-d16 -marm -march=$CPU "
#PREFIX=./android/$CPU
#ADDITIONAL_CONFIGURE_FLAG=
#build_one

#arm v7vfp
#CPU=armv7-a
#OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=vfp -marm -march=$CPU "
#PREFIX=./android/$CPU-vfp
#ADDITIONAL_CONFIGURE_FLAG=
#build_one

#arm v7n
#CPU=armv7-a
#OPTIMIZE_CFLAGS="-mfloat-abi=softfp -mfpu=neon -marm -march=$CPU -mtune=cortex-a8"
#PREFIX=./android/$CPU 
#ADDITIONAL_CONFIGURE_FLAG=--enable-neon
#build_one

#arm v6+vfp
#CPU=armv6
#OPTIMIZE_CFLAGS="-DCMP_HAVE_VFP -mfloat-abi=softfp -mfpu=vfp -marm -march=$CPU"
#PREFIX=./android/${CPU}_vfp 
#ADDITIONAL_CONFIGURE_FLAG=
#build_one 
```

我该如何解决这个问题？出了什么问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-25T17:20:37.583

面对同样的问题时，我终于发现了我的设置问题...查看 arm-build.sh 脚本，我开始关注该脚本。注意“TOOLCHAIN=...”路径。

最初的路径是：TOOLCHAIN=`echo $NDK/toolchains/arm-linux-androideabi-4.6/prebuilt/*-x86`

当我去验证这条路径是否存在时，我注意到它不存在。我认为原因是我有一个**64 位**版本。

我的路径实际上是： .../toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86_64

我最终做的是复制文件夹，并将其重命名为“linux-x86”，现在一切都在编译。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-06T04:46:25.110

我不确定这是否是您正在寻找的，但我创建了一个脚本来为 Android 构建 FFmpeg 0.11.1。我修改了较旧的 Bambuser FFmpeg 版本提供的脚本，以使它们与 0.11.1 一起使用。我目前正在使用这个脚本在我自己的应用程序中构建 FFmpeg，所以我知道构建工作。该脚本位于[http://servestream.sourceforge.net/build-ffmpeg.sh](http://servestream.sourceforge.net/build-ffmpeg.sh)。我正在使用 android-ndk-r8b 和 Ubuntu 12.04 (x64) 进行构建。为了使用脚本，请执行以下操作：

1.) 下载脚本
2.) 打开脚本并修改 PACKAGE 变量以匹配应用程序的包
3.) 使其可执行：chmod +x build-ffmpeg.sh
4.) 设置脚本使用的 NDK 变量，例如: export NDK=/home/user/android-ndk-r8b
5.) 运行脚本：./build-ffmpeg.sh

编译后的二进制文件将位于当前工作目录中新创建的“final-builds”文件夹中。（注意：脚本为 armeabi、armeabi-v7a 和 x86 架构构建二进制文件）

我希望这回答了你的问题。

**更新：**

如果找不到脚本，[http://sourceforge.net/p/servestream/code/HEAD/tree/ffmpeg/scripts/arm-build.sh](http://sourceforge.net/p/servestream/code/HEAD/tree/ffmpeg/scripts/arm-build.sh)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-14T02:23:49.090

就我而言，我试图构建 exoplayer 的 ffmpeg 扩展。它无法使用当前版本的 NDK 构建（在 NDK 18b 中删除了 gcc），因此您必须恢复到 NDK 15c。

见这里：[https ://github.com/google/ExoPlayer/issues/4940](https://github.com/google/ExoPlayer/issues/4940)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T18:19:34.663

我在尝试使用 r8d ndk 版本和 r8b 构建 ffmpeg 时遇到了类似的错误（C 编译器测试失败）。

我后来发现的问题是最新的 ubuntu 上的“在此处提取”选项似乎有一些错误。它不会提取所有内容。因此，使用“tar -jxf”正确解压，您将在 bin 文件夹中看到更多可执行文件。

你可以看看这个以供参考。 [http://code.google.com/p/android/issues/detail?id=41187](http://code.google.com/p/android/issues/detail?id=41187)

# dll - url 映射并转换为 ASHX 文件中的 dll

> ID：12660049
> 
> 赞同：1
> 
> 时间：2012-09-30T09:05:12.747
> 
> 标签：dll, ashx, url-mapping

1）我有一个 ashx 文件，将我的参数传递给这个文件，例如：

```
<a href="UseCaseHandler.ashx?UC=EditProfile&Method=init">Edit</a> 
```

现在，我想按如下方式使用它：

```
<a href="Handler/UC=EditProfile&Method=init">Edit</a> 
```

2）如何将ASHX文件转换为dll文件以及如何使用？？！！

坦克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:13:26.217

iis7 重写规则应该适合你

[http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)

```
<rewrite>
<rules>
<rule name="Rewrite">
<match url="^handler/uc=(.*)&amp;Method=(.*)" />
<action type="Rewrite" url="usecasehandler.ashx?uc={R:1}&amp;method={R:2}" />
</rule>
</rules>
</rewrite> 
```

# performance - scipy.linalg.solve（LAPACK gesv）在大型矩阵上的时间复杂度？

> ID：12660052
> 
> 赞同：8
> 
> 时间：2012-09-30T09:05:47.190
> 
> 标签：performance, amazon-ec2, scipy, time-complexity, lapack

如果我[`scipy.linalg.solve`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.linalg.solve.html)在我的工作站上使用（我相信它称为 LAPACK 的 gesv 函数）来解决 ~12000 个未知问题（使用 ~12000 方、密集、非对称矩阵），我会在**10-15 分钟内**得到一个很好的答案。

只是为了探索可能的极限（注意我没有说“有用”），我将潜在问题的分辨率提高了一倍，这导致需要解决约 50000 个未知数。虽然从技术上讲，一旦我添加了更多 10 GB 的交换空间，这将在我的工作站上运行，但使用一些具有足够 RAM 的硬件似乎更谨慎，因此我在 AWS EC2 高内存 Quadruple Extra Large 上启动了它。 .. 它在过去**14 小时内**一直在磨损（嘿，现场实例很便宜），并且无法判断它有多远。

不幸的是，我不知道所涉及的求解器的时间复杂度是多少（我的 google-fu 在这方面失败了）。如果是 O(N^2) 那么我预计它会在大约 4 小时后完成；如果是 O(N^3) 那么可能会在 16 小时内完成。当然，这将 N 解释为未知数的数量——它翻了两番——矩阵中的元素数量增加了 16 倍！

以及帮助我​​确定这是否有机会在我的（项目）生命周期内完成的建议，或者没有得到感激的建议！

其他信息：

稀疏矩阵在这里不感兴趣（我的矩阵是密集的，在任何情况下，即使在 64 位上，scipy 也不能处理超过`2**31`非零的元素）。

我在工作站上使用 Debian/Squeeze 的 scipy，在 EC2 上使用 Ubuntu 12.04。显然都是64位。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T21:57:58.430

NxN 矩阵的 DGESV 时间复杂度为 O(N^3)。请参阅此处的表 3.13：http: [//www.netlib.org/lapack/lug/node71.html](http://www.netlib.org/lapack/lug/node71.html)

# c# - 在 C# 中将列添加到列表视图

> ID：12660053
> 
> 赞同：0
> 
> 时间：2012-09-30T09:05:58.347
> 
> 标签：c#, listview, arraylist

我在 SearchFlyClass 中有一个 Arraylist GetFly()

```
 ...
        public ArrayList GetFly(int tip, string country)
        {
            ...
                    var list = new ArrayList();
                    var reader = command.ExecuteReader();
                    if (reader.HasRows)
                    {
                        ...
                        while (reader.Read())
                        {
                            decimal nr_zbor = reader.GetDecimal(cod_zbor);
                            string aeroport = reader.GetString(nume_aeroport);
                            string companie = reader.GetString(nume_companie);
                            list.Add(nr_zbor);
                            list.Add(companie);
                            list.Add(aeroport);
                        }
                    }
            ... 
```

我希望通过列 [zbor(colZbor),airport(colAirport),company(colCompany)] 将 Listview 中的列表放入 Form1.cs，但我现在不知道如何

```
private SearchFlyClass searchFly = new SearchFlyClass();
private ArrayList fly = new ArrayList();
...
private void ShowResultFlySearch(int direction, string country)
        {
                fly = searchFly.GetFly(direction, country);
                for (int count = 0; count &lt; fly.Count; count++)
                {
                    string zbor = fly[0].ToString();
                    string companie = fly[1].ToString();
                    string aeroport = fly[2].ToString();
                    ListViewItem searchlist = new ListViewItem();
                    searchlist.Items.Add(new ListViewItem(elem));

                }
        } 
```

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:29:31.387

首先，您必须将 ListView 放入查看模式详细信息，您可以使用以下代码执行此操作（也可以在设计器中设置 View 属性）：

```
ListView listView = new ListView();
listView.View = View.Details; 
```

然后您必须将列分配给 listView（也可以在设计器中完成）：

```
listView.Columns.Add("zbor");
listView.Columns.Add("airport");
listView.Columns.Add("company"); 
```

在此之后，您必须通过修改函数将其他列分配给 ListViewItem 子项：

```
private void ShowResultFlySearch(int direction, string country)
{
    fly = searchFly.GetFly(direction, country);

    for (int count = 0; count &lt; fly.Count; count++)
    {
        string zbor = fly[0].ToString();
        string companie = fly[1].ToString();
        string aeroport = fly[2].ToString();

        ListViewItem listViewItem = new ListViewItem(zbor);
        listViewItem.SubItems.Add(airport);
        listViewItem.SubItems.Add(companie);

        listView.Items.Add (listViewItem);
    }
} 
```

该函数假定它位于 Form1.cs 中，并且您已将 listView 变量实例化为 ListView 类型的类变量。C# 和面向对象编程的基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:29:51.497

这段代码有很多问题。首先，您是否有任何理由使用`ArrayList`而不是通用集合类型？例如`List<T>`

其次，我将创建一种类型来存储实体的一个实例的所有相关数据，而不是将实体的列值放入无类型的集合中。

第三，您没有`count`在`for`循环中引用任何地方 - 大概是因为查询返回单个实体，因此`for`循环是多余的，因为您知道为单个实体返回的项目数。您还使用了一个`elem`似乎尚未定义的变量。

**更新**

定义一个描述您的实体的类型：

```
public class Flight
{
   public decimal Code { get; set; }
   public string Company { get; set; }
   public string Airport { get; set; }       
} 
```

更改您的方法以返回您的实体的实例：

```
public Flight GetFlight(int tip, string country) 
```

创建一个新实例以从该方法返回并从您的数据库查询结果中填充它：

```
var flight = new Flight();
flight.Code = reader.GetDecimal(cod_zbor);
flight.Airport = reader.GetString(nume_aeroport);
flight.Company = reader.GetString(nume_companie);
return flight; 
```

现在您的其他方法可以使用更新的方法：

```
var flight = searchFly.GetFlight(...);
// access flight properties here 
```

这假定您的查询返回单个实体。如果它返回一个集合，那么您可以根据需要使用`List<Flight>`或`IEnumerable<Flight>`作为您的返回类型。

# java - 错误：“找不到符号”

> ID：12660054
> 
> 赞同：0
> 
> 时间：2012-09-30T09:05:58.357
> 
> 标签：java

这里有一个类似的答案： [How to pass a function as a parameter in Java?](https://stackoverflow.com/questions/4685563/how-to-pass-a-function-as-a-parameter-in-java)

但提供的正确答案不起作用。我有一堂课：

```
public class randomClass {
  2 
  3         public String name;
  4         private int x;
  5         private boolean y;
  6 
  7         public randomClass(String name){
  8                 this.name = name;
  9                 setAttributes(1,true, "test");
 10                 System.out.println(x + "," + y);
 11         } 
...
 21 
 22         public int xMethod(){
 23                 return 1;
 24         }
 25 
 26         public void passMethod(){
 27                 testMethod(new Callable<Integer>() {
 28                                 public Integer call(){
 29                                         return xMethod();
 30                                 }
 31                 });
 32         }
 33 
 34         public void testMethod(Callable<Integer> myFunc){
 35 
 36         } 
```

`passMethod`我试图传入`xMethod`的内部函数`testMethod`，但我得到的错误是：

> 找不到符号
> 符号：可调用类

我不知道为什么。

另外，我尝试对 xMethod 使用返回类型 String，你能传递一个返回类型不同的函数然后 Integer 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:15:42.847

我认为您需要先导入`Callable`as`import java.util.concurrent.Callable;`然后在您的类中实现它，然后再使用它。

在这里检查：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Callable.html)

[http://kamleshkr.wordpress.com/2009/10/02/java-threads-callable-and-future/](http://kamleshkr.wordpress.com/2009/10/02/java-threads-callable-and-future/)

# cuda - CUDA，怎么选<< >?

> ID：12660060
> 
> 赞同：9
> 
> 时间：2012-09-30T09:06:50.747
> 
> 标签：cuda

在一个库中，我使用对几个 CUDA 内核的调用。我当然想得到最好的表现。用户使用库的方式可能会有所不同。

块/线程的数量会显着影响这一点。

关于如何选择块/线程以获得最佳性能是否有一些规则？

例如（只是一个问题），最好选择高块，低线程？还是反过来？还是最好使用 GetDeviceProperties() 中的一些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:15:27.753

最好您希望在一个块中至少有一个完整的线程，否则您只会对可用的处理能力进行不良使用。此外，您通常希望一个块中的线程数可以被扭曲大小的数量整除。

块中使用的线程总数取决于您的资源使用情况。原则上，您希望以大入住率为目标。这些限制由可用的共享内存和寄存器设置。如果您使用大量共享内存和/或寄存器，则可实现的最大占用率下降。然后，对每个块的线程数进行分析和微调是有意义的，直到找到一个最佳点，在该点，实现的占用率和理论占用率的比率最大化，当然总占用率本身也尽可能接近 100%。

根据经验，您希望在保持良好占用率的同时最大化每个块的线程数。在分析步骤中自动迭代一组可能的块/线程数组合以找到极值组合是完全有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:56:39.203

您可以使用 NVIDIA 提供的依赖计算器.xls 来选择[您必须尝试更改 xls 中线程和块的值] 最佳配置，在此配置上您可以获得最佳占用率，从而为您提供最佳性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T04:50:59.333

我认为这完全是经验。

块和网格大小取决于很多事情，例如算法、每个线程的工作量、资源、延迟。

在正常情况下，我会先制作为 256*256。并经常调整以选择更好的。

总之，他们会选择像 257 这样的块大小来避免银行冲突。

有很多资源可以帮助您选择。比如：延迟和块大小（[http://www.lsr.nectec.or.th/images/e/e6/Cuda_Optimization2.pdf](http://www.lsr.nectec.or.th/images/e/e6/Cuda_Optimization2.pdf)）

**无论如何，只需尝试更新它。**

# wpf - wpf按钮样式中鼠标向上操作的setter属性是什么？

> ID：12660064
> 
> 赞同：0
> 
> 时间：2012-09-30T09:07:49.633
> 
> 标签：wpf, button, triggers, mouse

我正在尝试更改按钮查看每个状态，现在我有了`IsEnabled` `IsPressed` `IsMouseOver`，但是`Tigger Property`释放鼠标左键是什么？

```
<Style x:Key="GoogleGreyButton" TargetType="{x:Type Button}">
                <ControlTemplate.Triggers>
                   <Trigger Property="IsMouseOver" Value="True">
                        <!--Some setters here-->

                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <!--Some setters here-->

                    </Trigger>
                    <Trigger Property="IsEnabled" Value="True">
                        <!--Some setters here-->

                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:50:18.250

您可以为此使用[EventTrigger](http://msdn.microsoft.com/en-us/library/system.windows.eventtrigger%28v=vs.100%29.aspx)：

```
<EventTrigger RoutedEvent="PreviewMouseLeftButtonUp">
    <BeginStoryboard>
        <Storyboard>
            ...
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:45:37.903

你需要更多的风格来展示任何东西，但在活动中试试这个：

```
<Style x:Key="GoogleGreyButton" TargetType="{x:Type Button}">
    <EventSetter Event="MouseLeftButtonUp" Handler="Button_MouseLeftButtonUp"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <!--Some setters here-->

                    </Trigger>
                    <Trigger Property="IsPressed" Value="True">
                        <!--Some setters here-->

                    </Trigger>
                    <Trigger Property="IsEnabled" Value="True">
                        <!--Some setters here-->

                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# java - 在 Eclipse 4 (RCP/SWT/OSGi) 应用程序中包含 log4j 的正确方法

> ID：12660074
> 
> 赞同：0
> 
> 时间：2012-09-30T09:09:21.277
> 
> 标签：java, eclipse, plugins, eclipse-plugin, osgi

这是一个后续（不知何故我[的第三方依赖于一个 OSGi 应用程序](https://stackoverflow.com/questions/12569474/how-to-include-a-dependency-to-a-jar-file-from-an-eclipse-osgi-application)），其中建议某些库（例如 log4j）*已经*作为捆绑包提供。
在 Eclipse Indigo 中，我在安装过程中找不到可用的 log4j 捆绑包`Import Package`，因此我创建了一个`Plugin Project from JAR archive`用于捆绑 log4j 以及一个`Feature Project`用于捆绑此[帖子之后](https://stackoverflow.com/questions/5150415/log4j-under-osgi-eclipse-rcp)`log4j.xml`的配置。

老实说，我不明白为什么需要片段项目，但这个过程有效。
所以我现在的问题是：
由于`log4j.xml`作为功能 jar 的一部分在导出中交付，因此需要一些“努力”才能找到它并更新调试级别，所以我想知道这确实是正确的过程吗？
我记得最终导出的产品会在一个容易找到的位置提供 log4j 配置，但现在（尽管日志记录有效）我担心我所做的是否确实正确。

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:19:51.560

如果你真的需要公开文件，你可以把它放在你想要的任何地方，然后确保你的程序在启动时调用这些方法之一：

*   org.apache.log4j.xml.DOMConfigurator。[配置](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PropertyConfigurator.html#configure%28java.lang.String%29)（字符串文件名）
*   org.apache.log4j.PropertyConfigurator。[配置](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/xml/DOMConfigurator.html#configure%28java.lang.String%29)（字符串配置文件名）

或者，如果您想在不重新启动应用程序的情况下更改配置，请使用“configureAndWatch”-变体。

**编辑**：我写“如果你真的需要”，因为我体验过部署后我永远不需要打开调试日志，因为它总是打开的！这对于我对响应时间和吞吐量有正常（但不是极端）要求的应用程序来说是可以的。记录到 UDP-appender 很快（并且不会填满磁盘）。或者使用滚动文件附加程序是非常安全的，并且足够快以供我使用。在确定那些难以重现的错误时，始终拥有可用的调试日志是一种救命稻草。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:26:14.567

我建议看一下[Pax-Logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)，这将为您提供各种日志框架，供您在 OSGi 环境中使用。而且您可以使用外部配置文件（无需扩展器）来配置您的日志记录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T17:07:13.240

该片段是扩展 log4j 捆绑类路径以包含所需配置文件的一种选择。这可能是配置应用程序范围属性的最简单方法。

这并不意味着在部署后进行更改，因为它将嵌入到 jar 文件中。如果您希望在部署后使其可配置，您将不得不提出一种不同的方法。

**注意：** 恐怕您误解了关于已经作为捆绑包提供的罐子的答案。这并不意味着它们是您选择的 OSGi 平台 (Indigo) 的一部分，只是它们已准备好按原样部署到 OSGi 平台。您不需要创建插件项目，您只需将 jar 添加到目标平台即可解决丢失的导入问题。

# c# - 在 Windows 8 Metro C# 中显示 StorageFile

> ID：12660077
> 
> 赞同：4
> 
> 时间：2012-09-30T09:09:55.350
> 
> 标签：c#, windows-8, microsoft-metro

我想在资产的 UI 上显示一个图像文件。我设法将项目存储为`StorageFile`. 我怎样才能显示它？我试图在 XAML`<Image>`标记的源中显示它。可以隐瞒`StorageFile`吗`Image`？

```
string path = @"Assets\mypicture.png";
StorageFile file = await InstallationFolder.GetFileAsync(path); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T21:40:43.233

试试这个功能

```
public async Task<Image> GetImageAsync(StorageFile storageFile)
{
        BitmapImage bitmapImage = new BitmapImage();
        FileRandomAccessStream stream = (FileRandomAccessStream)await storageFile.OpenAsync(FileAccessMode.Read);
        bitmapImage.SetSource(stream);
        Image image = new Image();
        image.Source = bitmapImage;
        return image;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:19:50.310

尝试以下操作：

```
public async Task<BitmapImage> GetBitmapAsync(StorageFile storageFile)
{
    BitmapImage bitmap = new BitmapImage();
    IAsyncOperation<IRandomAccessStream> read = storageFile.OpenReadAsync();
    IRandomAccessStream stream = await read;
    bitmap.SetSource(stream);

    return bitmap;
} 
```

以这种方式调用函数：

```
Image image = new Image();
image.Source = await GetBitmapAsync (file); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:07:01.190

> image.Source = new BitmapImage(new Uri("file://"+ storageFile.Path))

# windows-phone-7 - XAP 文件提交

> ID：12660078
> 
> 赞同：0
> 
> 时间：2012-09-30T09:10:09.580
> 
> 标签：windows-phone-7, windows-phone-7.1.1

> **可能重复：**
> [尝试在 windowsphone 开发中心更新 XAP 时出错](https://stackoverflow.com/questions/12638950/error-when-trying-to-update-xap-in-the-windowsphone-dev-center)

当我提交我的 .xap 文件时，我收到了这个错误。请查看这个。

```
[ScriptObject_InvokeFailed] Arguments: Debugging resource strings are unavailable. Often 
the key and arguments provide sufficient information to diagnose the problem. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:57:56.123

这几乎可以肯定是浏览器/javascript中出现问题的问题

试试IE9，它是唯一官方支持的浏览器...

另请参阅[尝试在 windowsphone 开发中心更新 XAP 时出错](https://stackoverflow.com/questions/12638950/error-when-trying-to-update-xap-in-the-windowsphone-dev-center)

# django - 无法让 Apache 为 django 管理静态文件提供服务

> ID：12660079
> 
> 赞同：4
> 
> 时间：2012-09-30T09:10:41.503
> 
> 标签：django, apache

我正在尝试将 Django 部署到 apache，但无法让它为我的静态管理文件提供服务。它似乎在 /var/www/static 下寻找它们，我似乎无法改变它。

除了样式之外，管理站点似乎正在工作。我得到一个标题和一个登录表格。我的 django 应用程序也在工作。这是未提供给管理员的静态文件。

使用 Django 1.4.1。

这些文件位于 /usr/local/lib/python2.7/dist-packages/django/contrib/admin/static 下，并从 /home/dutt/vaccapp/backend/static/admin 链接到。

apache错误日志说这个

```
[Sun Sep 30 10:57:20 2012] [error] [client 192.168.1.10] File does not exist: /var/www/home, referer: http://dathui.example.com/vaccapp/admin/
[Sun Sep 30 10:57:20 2012] [error] [client 192.168.1.10] File does not exist: /var/www/home, referer: http://dathui.example.com/vaccapp/admin/ 
```

但我不知道如何改变它。

在我的 django 站点配置中，我有

```
<VirtualHost *:80>
ServerAdmin me@host.com

    ServerRoot "/home/dutt/vaccapp"
    DocumentRoot "/home/dutt/vaccapp"
<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /home/dutt/vaccapp/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

Alias /static/ "/home/dutt/vaccapp/backend/static/"
<Directory "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static">
    Order allow,deny
    Options Indexes
    Allow from all
    IndexOptions FancyIndexing
</Directory> 
```

ServerRoot 未在 apache2.conf 中设置。

从我的 settings.py

```
STATIC_ROOT = '/home/dutt/vaccapp/backend/'
STATIC_URL = '/static/' 
```

没有添加到 STATICFILES_DIRS。

这被添加到我的 apache2.conf

```
WSGIScriptAlias /vaccapp /home/dutt/vaccapp/backend/wsgi.py
WSGIPythonPath /home/dutt/vaccapp

<Directory /home/dutt/vaccapp>
<Files wsgi.py>
Order deny,allow
Allow from all
</Files>
</Directory> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T09:20:47.047

`ADMIN_MEDIA_PREFIX`默认设置为`/static/admin/`# Deprecated in Django 1.4 (现在使用`STATIC_URL + 'admin/'`. 结果是一样的。

以下是对 apache 配置的修复：

```
Alias /static/admin "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static"
Alias /static "/home/dutt/vaccapp/backend/static"
<Directory "/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static">
    Order allow,deny
    Options Indexes
    Allow from all
    IndexOptions FancyIndexing
</Directory> 
```

并且 WsgiScriptAlias 必须从主 apache 配置移动到 VirtualHost。

经过长时间的讨论，我们发现问题是 Django 没有正确安装 admin static ...它们彼此符号链接（非常奇怪）。Django 重新安装修复了它，现在它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:07:34.000

我的低声誉迫使我写一个完整的答案来为伊戈尔的答案添加一个小细节。

我只是将 apache 配置部分添加到我的配置中，但这还不够。我不得不改变：

```
"/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static" 
```

到

```
"/usr/local/lib/python2.7/dist-packages/django/contrib/admin/static/admin" 
```

在第一个`Alias`和`<Directory>`指令中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T21:46:49.360

就像 Blazor 一样，我不得不使用原始版本的一个小版本。我的设置包括使用 django admin 的graphite-web。我只是发布它以供参考。

我的 apache 的虚拟主机：

```
<VirtualHost *:80>
    ServerName graphite.myhost.com
    Redirect permanent / https://graphite.myhost.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName graphite.myhost.com

    SSLEngine on
    SSLCertificateFile /etc/apache2/ssl/graphite.cert
    SSLCertificateKeyFile /etc/apache2/ssl/ssl_graphite.key
    SSLStrictSNIVHostCheck on

    WSGIDaemonProcess _graphite processes=5 threads=5 display-name='%{GROUP}' inactivity-timeout=120 user=_graphite group=_graphite
    WSGIProcessGroup _graphite
    WSGIImportScript /usr/share/graphite-web/graphite.wsgi process-group=_graphite application-group=%{GLOBAL}
    WSGIScriptAlias / /usr/share/graphite-web/graphite.wsgi

    AliasMatch ^/admin/(.*)static/admin(.*)$ /usr/lib/python2.7/dist-packages/django/contrib/admin/static/admin/$2
    <Directory "/usr/lib/python2.7/dist-packages/django/contrib/admin/static/admin/">
            Order allow,deny
            Allow from all
    </Directory>

    Alias /content/ /usr/share/graphite-web/static/
    <Location "/content/">
            SetHandler None
    </Location>

    <Location "/">
            Order allow,deny
            allow from all
            AuthType Basic
            AuthName "Restricted Zone"
            AuthBasicProvider wsgi
            WSGIAuthUserScript /var/www/django_auth.wsgi
            Require valid-user
    </Location>

    ErrorLog ${APACHE_LOG_DIR}/graphite-web_error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/graphite-web_access.log combined

</VirtualHost> 
```

我还添加`STATIC_URL = 'static/'`只是为了确保我对正则表达式没有任何问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-16T01:12:25.940

尝试使用下一个

```
python manage.py collectstatic 
```

[staticfiles 应用程序 - Django 文档](https://www.google.com.ar/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDcQFjAB&url=https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/&ei=yMNDUdzuCOvU0gG-uICwBg&usg=AFQjCNGVO9S3PQJXD_ebvNGLKOfJFZytrA&bvm=bv.43828540,d.dmQ)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-03T02:27:32.073

我在运行 Django + Apache 时遇到了类似的问题，Django 管理站点缺少所有样式。这就是我解决它的方法：

*apache conf：httpd-app.conf*

```
Alias /static "/...path/to/your/django.../site-packages/django/contrib/admin/static"
<Directory "/...path/to/your/django.../site-packages/django/contrib/admin/static">
    Require all granted
</Directory> 
```

以上，您可以通过以下`/...path/to/your/django.../`方式找到它`pip show django`

# python - Python md5 哈希比较

> ID：12660081
> 
> 赞同：5
> 
> 时间：2012-09-30T09:11:13.703
> 
> 标签：python, hash, md5

我正在尝试使用 Python 比较哈希，但我遇到了这个问题：

```
print ('-- '+hashesFile[h])
print ('-> ' +hashlib.md5(wordsFile[j]).hexdigest())   

-- 5d21e42d34fc1563bb2c73b3e1811357
-> 5d21e42d34fc1563bb2c73b3e1811357 
```

但这种比较从来都不是真的：

```
if (hashesFile[h] == hashlib.md5(wordsFile[j]).hexdigest()):
 print ('ok') 
```

我搜索了一个解决方案并尝试在比较它们之前对字符串进行编码，但无论如何都不起作用。

干杯！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:21:18.740

尝试将两者都打印为：

```
print '-- %r' % hashesFile[h]
print '-> %r' % hashlib.md5(wordsFile[j]).hexdigest()) 
```

然后你会看到里面真正的东西。

我想这对你有用：

```
if (hashesFile[h].strip() == hashlib.md5(wordsFile[j]).hexdigest()):
    print ('ok') 
```

# javascript - 如何从javascript中的字符串中删除值？

> ID：12660084
> 
> 赞同：0
> 
> 时间：2012-09-30T09:11:27.083
> 
> 标签：javascript, string, replace

我需要帮助：我想从字符串中删除一个特定的值。例如我有这个代码：

```
document.getElementById("sub_subject_temp"+id1).value = old_sub_subject_string.replace(/theVal/,""); 
```

如果我的字符串是：

```
6-7,6-3,6-1, 
```

我想删除：

```
6-3, 
```

它看起来像这样：6-7,6-1，我试过了

```
str.replace(/val/, ""); 
```

但它返回 6，有什么想法做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:13:25.617

```
"6-7,6-3,6-1".replace(/6-3,/, '');

//"6-7,6-1" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:18:47.363

如果您的意思是使用一个`val`值为 like的变量，则`6-3;`需要使用它`new RegExp()`来构造正则表达式。

```
var str = '6-7,6-3,6-1,';
var val = '6-3,';
str = str.replace(new RegExp(val), ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T09:15:20.177

如何替换您要删除的字符串，而不是`"val"`？尝试

```
str.replace(/6-3,/, ""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-12T18:29:07.720

有一种方法可以在没有`.replace`. 尽管它更复杂，但它确实有效。

```
var rstring = "6-7,6-3,6-1";
var nstring = rstring.split("6-3,");
var finishedstr = nstring[0] + nstring[1]; 
```

因此，在上面的代码中，原始字符串在从字符串中删除时被分成两`"6-3,"`部分。两个新的子字符串在没有 的情况下重新组合`"6-3,"`，允许完成的字符串`"6-7,6-1"`，或者在这种情况下，变量`finishedstr`。

# javascript - window.localStorage 和 localStorage 之间有什么区别吗？

> ID：12660088
> 
> 赞同：33
> 
> 时间：2012-09-30T09:12:27.553
> 
> 标签：javascript, local-storage

我一直在做以下事情：

```
var store = window.localStorage;
store.setItem() 
```

但现在我看到这样做的代码：

```
localStorage.setItem() 
```

两者都做同样的事情吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-30T09:15:09.403

除非您声明了`localStorage`在自定义范围内命名的变量，否则它们是相同的。`localStorage`指`window.localStorage`. 事实上，全局命名空间中的每个变量都可以作为`window.<variableName>`

例如：

```
<script>
function foo() {
    // here window.localStorage == localStorage
}
function foo2() {
    var localStorage = 10;
    // here window.localStorage != localStorage 
    // since you have a local variable named localStorage
}
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T09:15:10.547

"window" 是 Javascript 中的全局对象，所以如果没有发生冲突的机会，你可以省略它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:15:35.083

window.localStorage 和 localStorage 没有区别，`Window` 都是全局对象

窗口是默认前缀

但正确的是`window.localStorage`因为 localStorage 属性是窗口对象的一部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-30T03:38:09.493

这是旧的，但今天我可能发现了不同之处。

我有一个 React 应用程序，当我在没有 WI DOW 的情况下使用 SSL 在服务器上运行它时“忘记”了 localstorage 值。没有 SSL，它工作正常。

我回去并将WINDOW添加到对localstorage的所有引用中，问题就消失了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-24T19:27:37.970

据称，window.localStorage 使查找 localStorage 比编写 localStorage 更快。

将对它的引用存储在变量上可以使其更快。

无论如何，这些改进在现代浏览器上可以忽略不计。只有在性能成为问题时它才会变得有用。
无论如何，您可能会了解为什么要这样做。

# mysql - 我可以在 MySQL 数据库字段表达式中运行 MySQL 查询吗？

> ID：12660089
> 
> 赞同：2
> 
> 时间：2012-09-30T09:12:35.853
> 
> 标签：mysql, sql, expression

我想知道如何在 MySQL 数据库中使用表达式（运行`MySQL 5.0.88`）。我记得在我黑暗的 MSAccess 时代，那些表达式非常方便，但我从未尝试在表达式中使用查询。所以：

假设我有一个包含字段的表格：

```
 dyn_usage  (True/False)
 actual_useage 
```

第一个字段指示项目是否按实际使用（或固定费用）计费。

然后我可以向`actual_usage`包含 MySQL 查询的字段添加一个表达式（查询 current_user 的使用情况，如下所示：

```
 <!--- if dyn_usage = 1 --->
 SELECT COUNT( a.id ) AS no_of_instances
    FROM agents AS a
    WHERE a.verkaeufer = <cfqueryparam value = "#Session.loginId#" cfsqltype="cf_sql_varchar" maxlength="13">
    AND a.status = "active" 
```

如果我可以存储 SQL 表达式，这是否包括参数（我正在运行 Coldfusion，因此是 cfqueryparam）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T12:15:54.223

您可以通过将一个包含常规表的常规表和一个从常规表中选择的视图作为第一列并作为第二列进行计算来使用[MySql 视图](http://dev.mysql.com/doc/refman/5.0/en/views.html)。`dyn_usage``dyn_usage``actual_useage`

# c - 在 vim 中为 gtk+-2.0 设置 clang_complete

> ID：12660090
> 
> 赞同：2
> 
> 时间：2012-09-30T09:12:49.107
> 
> 标签：c, vim, autocomplete, gtk, clang-complete

我在设置 clang_complete 以使用 gtk+-2.0 时遇到了一些问题。对于标准库 clang_complete 工作得很好，但我想将它与 gtk+ 等外部库一起使用。

在我正在编程的目录中，我添加了一个带有输出的 .clang_complete 文件`pkg-config --cflags gtk+-2.0`，但它似乎不起作用：

```
-I/usr/local/include/gtk-2.0
-I/usr/local/include/gio-unix-2.0/
-I/usr/local/include/atk-1.0
... 
```

`vimrc`看起来像这样：

```
" clang_autocomplete configuration
let g:SuperTabDefaultCompletionType="context"
set completeopt=menuone,menu,longest
set pumheight=15

let g:clang_use_library=1
let g:clang_library_path="/usr/local/lib"
let g:clang_snippets=1
let g:clang_snippets_engine='ultisnips'
let g:clang_conceal_snippets=1
let g:clang_periodic_quickfix=1
let g:clang_hl_errors=1
let g:clang_complete_auto = 0
let g:clang_complete_copen=1 
```

有谁知道如何让这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:09:58.450

我对 clang 和 glib-2.0 有同样的问题。Clang_complete 找不到 glib.h 所以我添加了一个像这样的 .clang_complete 文件

```
`pkg-config --cflags glib-2.0` 
```

它位于项目基础文件夹中，我从该文件夹运行 vim。似乎 clang_complete 现在可以找到头文件，但是例如 glib 方法的代码完成仍然不起作用。

# python - GLPK Integer Optimizer 打印“PROBLEX HAS NO INTEGER FEASIBLE SOLUTION”，但仍返回最佳状态

> ID：12660093
> 
> 赞同：1
> 
> 时间：2012-09-30T09:13:26.177
> 
> 标签：python, linear-programming, convex-optimization

GLPK 的输出需要帮助。某些约束无法（故意）得到满足，GLPK 打印“PROBLEM HAS NO INTEGER FEASIBLE SOLUTION”，但仍返回“最佳”作为解决方案的状态。

我已将所有公差级别设置为 0

```
glpk.options['feastol']=0
solvers.options['feastol']=0
glpk.options['abstol']=0
solvers.options['abstol']=0        
glpk.options['reltol']=0
solvers.options['reltol']=0 
```

这是输出

```
 GLPK Integer Optimizer, v4.43
   10 rows, 5 columns, 19 non-zeros
   5 integer variables, none of which are binary
   Preprocessing...
   1 hidden covering inequaliti(es) were detected
   5 rows, 5 columns, 14 non-zeros
   5 integer variables, all of which are binary
   Scaling...
    A: min|aij| =  1.000e+00  max|aij| =  1.000e+00  ratio =  1.000e+00
   Problem data seem to be well scaled
   Constructing initial basis...
   Size of triangular part = 4
   Solving LP relaxation...
   GLPK Simplex Optimizer, v4.43
   5 rows, 5 columns, 14 non-zeros
         0: obj =   2.000000000e+00  infeas =  1.000e+00 (1)
   *     2: obj =  -2.500000000e+00  infeas =  0.000e+00 (0)
   *     3: obj =  -4.000000000e+00  infeas =  0.000e+00 (0)
   OPTIMAL SOLUTION FOUND
   Integer optimization begins...
   +     3: mip =     not found yet >=              -inf        (1; 0)
   +     3: mip =     not found yet >=     tree is empty        (0; 1)
   PROBLEM HAS NO INTEGER FEASIBLE SOLUTION 
```

想要的行为是在“问题没有整数可行的解决方案”时指示失败

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:12:38.360

我只知道 C API，但我想你可以很容易地找出 Python 的等价物。

在您使用的 C API中`glp_mip_status()`，您会遇到`GLP_NOFEAS`您的情况，这意味着“问题没有整数可行解”。请参阅文档中*确定 MIP 解决方案的状态。*

我不会弄乱公差。

# jsf - setPropertyActionListener 没有传递正确的值

> ID：12660099
> 
> 赞同：0
> 
> 时间：2012-09-30T09:14:33.260
> 
> 标签：jsf

我有一个编辑器组件，显示选定的家庭（来自树）描述

所以在编辑它之后，用户点击那里的保存按钮我想使用它

```
 <f:setPropertyActionListener  target="#
            {projectTestManagementMB.selectedNodeDescription}" 
             value="projectTestManagementMB.selectedFamily.description" /> 
```

将描述的新值传递给该变量 selectedNodeDescription 。但是当我检查它时，我发现它包含旧值`projectTestManagementMB.selectedFamily.description`而不是新值。

这是代码：

```
<p:editor id="familyDescriptionEditor" value="#
     {projectTestManagementMB.selectedFamily.description}" width="600"/>  

      <p:commandButton id="submitButton" value="Save"   icon="ui-icon-disk"  
       actionListener="#{projectTestManagementMB.saveDescription}">
          <f:setPropertyActionListener  target="#
            {projectTestManagementMB.selectedNodeDescription}" 
             value="projectTestManagementMB.selectedFamily.description" />

      </p:commandButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:43:33.637

> 此标签创建和安装的 ActionListener 实例具有以下行为和约定。仅在第一次创建此标记的组件时创建和注册 ActionListener 实例。

所以尝试使用 action 属性而不是 actionListener ：

```
 <p:commandButton id="submitButton" value="Save"   icon="ui-icon-disk"  action="#   
        {projectTestManagementMB.saveDescription}" >
          <f:setPropertyActionListener  target="#
         {projectTestManagementMB.selectedNodeDescription}" value="#
          {projectTestManagementMB.selectedFamily.description}" />
    </p:commandButton> 
```

# java - Cloudfoundry Spring Java 7

> ID：12660100
> 
> 赞同：0
> 
> 时间：2012-09-30T09:14:52.400
> 
> 标签：java, spring, cloud-foundry

Cloudfoundry 是否支持 Java 7？我可以部署使用 Java 7 编译的 Spring 应用程序吗？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:36:05.110

**是的。**新的 Cloud Foundry eclipse 集成版本支持 java7 应用程序。Grails、Java Web 和 Spring 应用程序现在也支持 Java 7。访问[此链接](http://blog.cloudfoundry.com/2012/09/13/cloud-foundry-integration-for-eclipse-now-supports-standalone-java-applications-and-java-7/)以了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T09:24:44.053

是的，您可以使用 vmc push --runtime=java7 部署 Java 应用程序并指定 Java 7 运行时

有一个用于部署 Tomcat 7 应用程序的模板[https://github.com/ericbottard/cloudfoundry-tomcat-7](https://github.com/ericbottard/cloudfoundry-tomcat-7)但我不确定您目前是否可以在 STS 中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T21:08:15.267

1.  按照此链接[https://github.com/ericbottard/cloudfoundry-tomcat-7](https://github.com/ericbottard/cloudfoundry-tomcat-7)中给出的说明进行操作，它将进行部署。尽管如此，您有时可能会收到由 tomcat 引起的错误，提示“打开的文件太多”。
2.  还要记住，您需要添加到您的 POM.xml el-2.2.jar 以及 web.xml 中的表达式工厂以使其正常工作（显然，如果您使用 el-2.2 的功能），因为它仍然使用来自不支持 el-2.2 的 tomcat 6

# django - 在 django 中处理和检查用户 URL

> ID：12660101
> 
> 赞同：0
> 
> 时间：2012-09-30T09:14:57.313
> 
> 标签：django, url, facebook-opengraph, fetch

我正在建立一个用户发布内容和 URL 的网站，非常类似于 facebook 墙/新闻提要。

我在想我可以从用户那里获取 URL，然后从 django 后端的服务器打开它并检查内容（就像 facebook 一样）。

我认为应该有一个 django-opengraph 应用程序可以帮助我打开 URL 并检查元标记以确定什么样的内容等。但似乎 Open Graph 是 Facebook 的发明？

我的问题是如何使用 django 打开 URL 并获取内容（视频、音频、图像、文本）并确定可以将哪些内容正确嵌入到我的网站中？任何应用程序？

而且，我对来自用户发送的服务器的开放 URL 的安全方面感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:14:14.357

[djangoembed](https://github.com/worldcompany/djangoembed)不再维护。但是您可能想看看[micawber](https://github.com/coleifer/micawber)。它似乎很适合您的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T16:51:26.497

[Open Graph Protocol](http://ogp.me/)确实是由 Facebook 发明的，它基本上是一组元数据，您可以添加这些元数据来详细描述页面的内容：9GAG 将描述正在显示的图像；YouTube 会描述视频等。大多数能够在 Facebook 上共享内容的页面都是 OGP 友好的，但这仍然不能涵盖网络上可用的全部内容。

在任何一种情况下，如果您按照其他人的建议让应用程序本身从 URL 检索和解析内容，请务必小心。我更愿意开发一个 JavaScript 应用程序，该应用程序将利用客户端的资源来解析内容本身，因为有人可以通过多种方式向您提供恶意 URL，如果您不小心，它们会故意耗尽您的应用程序的可用资源，更不用说该过程本身一开始就非常昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T10:47:26.647

您可以使用 urllib2 模块请求 url。但我建议使用 BeutifulSoup 来检查 urls 内容。[http://pypi.python.org/pypi/BeautifulSoup](http://pypi.python.org/pypi/BeautifulSoup)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T14:26:31.983

扩展现有响应：使用[requests](http://docs.python-requests.org/en/latest/)下载页面，然后使用[beautifulsoup4](http://www.crummy.com/software/BeautifulSoup/)处理它。

### 例子

```
import requests
from bs4 import BeautifulSoup

r = requests.get('http://www.facebook.com')
soup = BeautifulSoup(r.text)
print soup.title.string 
```

哪个会返回

`Welcome to Facebook - Log In, Sign Up or Learn More`

请参阅 beautifulsoup 文档，了解如何从 html 中提取其他元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T05:40:45.690

对此没有简单的答案。仅使用 requests 或 urllib2，您可以对结构进行一些猜测并获取标题或猜测新闻文章/视频的内容可能是什么。我知道有两种解决方案可以让您起步，而不是重新发明轮子。

1.  [Embed.ly](http://embed.ly "嵌入")，这是一项付费服务​​，并且有一个非常好的 API。
2.  [djangoembed](https://github.com/worldcompany/djangoembed) . 使用 oEmbed 协议的免费解决方案。虽然我没有使用过它，但它似乎正是您所需要的。

# c# - 无效的强制转换异常 C# ASP.Net

> ID：12660117
> 
> 赞同：3
> 
> 时间：2012-09-30T09:18:29.527
> 
> 标签：c#, asp.net, casting

```
foreach(Label l in Controls)    // setting all labels' s visbility  on page to true
     l.Visible =true; 
```

但是在运行时，我收到以下错误

`Unable to cast object of type 'ASP.admin_master' to type 'System.Web.UI.WebControls.Label'.`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T09:20:55.950

如果其中一个控件不是类型标签，您将收到该错误。

你可以试试：

```
foreach(Label l in Controls.OfType<Label>())
{
    l.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T09:32:00.937

如果您希望将页面上的**所有**标签设置为可见，则需要一个递归函数。

```
private void SetVisibility<T>(Control parent, bool isVisible)
{
    foreach (Control ctrl in parent.Controls)
    {
        if(ctrl is T)
            ctrl.Visible = isVisible;
        SetVisibility<T>(ctrl, isVisible);
    }
} 
```

用法：

```
SetVisibility<Label>(Page, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T09:22:46.703

检查当前“l”是否具有所需的目标类型：

```
foreach(control l in Controls) {
    if(l is System.Web.UI.WebControls.Label)
        l.Visible = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T09:23:10.667

```
foreach(Control l in Controls)    
        if (l is Label)    l.Visible =true; 
```

如果你想在所有层次结构中：

```
 public static void SetAllControls( Type t, Control parent /* can be Page */)
    {
        foreach (Control c in parent.Controls)
        {
            if (c.GetType() == t) c.Visible=true;
            if (c.HasControls())  GetAllControls( t, c);
        }

    }

 SetAllControls( typeof(Label), this); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T09:49:31.343

```
public void Search(Control control)
    {
        foreach (Control c in control.Controls)
        {
            if (c.Controls.Count > 0)
                Search(c);
            if (c is Label)
                c.Visible = false;
        }
    } 
```

和

```
Search(this.Page); 
```

# java - 在 JPanel 或 JLabel 中调整图像大小和显示而不损失质量

> ID：12660122
> 
> 赞同：5
> 
> 时间：2012-09-30T09:19:51.090
> 
> 标签：java, swing, jpanel, jpeg, jlabel

我正在开发一个 java 程序，用于在注册时使用网络摄像头捕获员工图像。我可以毫无问题地获得图片，并将其保存在我的 C: 驱动器中，但在检索图像时，标签上仅显示图像的一部分。有没有办法在保存之前调整 JPEG 的大小？还是在显示之前？就像在没有质量损失的情况下缩小它......

非常感谢Cheerz！:)！

好吧，伙计们......这里是：-我已经以我使用它们的方式评论了代码。

```
//This method will capture the image from the interface and save it under the unique employee ID
public String captureImage(int picId){

    FrameGrabbingControl ControlFG = (FrameGrabbingControl)

    broadcast.getControl("javax.media.control.FrameGrabbingControl");

    Buffer buffer = ControlFG.grabFrame();

    BufferToImage image = new BufferToImage((VideoFormat)buffer.getFormat());

    img = image.createImage(buffer);

    path="c:\\employee"+picId+".jpg";

    saveJPG(img,path);//method will save the image

    return path;

}

 public void saveJPG(Image img, String s){***//method will save the image***

    System.out.println(s);

    BufferedImage bi = new BufferedImage(img.getWidth(null), img.getHeight(null),

    BufferedImage.TYPE_INT_RGB);

    Graphics2D g2 = bi.createGraphics();

    g2.drawImage(img,null,null);

    FileOutputStream out = null;
    try{

    out = new FileOutputStream(s);

    }
    catch (java.io.FileNotFoundException io){

    System.out.println("File Not Found");
    }

    JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(out);

    JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(bi);

    param.setQuality(0.5f,false);

    encoder.setJPEGEncodeParam(param);

    try
    {
    encoder.encode(bi);
    out.close();
    }

    catch (java.io.IOException io)
    {
    System.out.println("IOException");
    }
    } 
```

也许我可以在保存时缩放图像.. 这样我就可以检索缩放后的图像..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T09:23:28.497

当然你可以调整图片的大小有很多不同的方法[`Image#getScaledInstance(int width,int height,int hints)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Image.html#getScaledInstance%28int,%20int,%20int%29)，但是[这有它的危险。](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)。

主要问题是：

> Image.getScaledInstance() 不返回完成的缩放图像。当使用图像像素时，它会将大部分缩放工作留给以后使用。

我不建议使用它，但[在这里](http://www.java2s.com/Code/JavaAPI/java.awt/ImagegetScaledInstanceintwidthintheightinthints.htm)一个很好的例子。

或者，您可以使用此方法：

```
import javax.swing.ImageIcon;
import java.awt.image.BufferedImage;
import java.awt.Image;
import java.awt.Color;
import java.awt.Graphics2D;
import java.io.File;
import javax.imageio.ImageIO;
import java.awt.RenderingHints;

public class ImgUtils {

public BufferedImage scaleImage(int WIDTH, int HEIGHT, String filename) {
    BufferedImage bi = null;
    try {
        ImageIcon ii = new ImageIcon(filename);//path to image
        bi = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(ii.getImage(), 0, 0, WIDTH, HEIGHT, null);
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
    return bi;
}

} 
```

你会像这样使用它：

```
final BufferedImage img=new ImgUtils().scaleImage(200,200,"c:/test.jpg");
//create label with image as background
JLabel label=new JLabel(new ImageIcon((Image)img)); 
```

**更新：**

这是我做的一个小例子：

![在此处输入图像描述](../Images/c9adf638fee5668a7be108cbd61427aa.png)

```
import java.awt.BorderLayout;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

public class JavaApplication117 {

    //change this to your own
    static String filename="c:/test.jpg";

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaApplication117().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(JFrame frame) {
        final BufferedImage img = new ImgUtils().scaleImage(200, 200, filename);
        //create label with image as background
        JLabel label = new JLabel(new ImageIcon((Image) img));

        frame.getContentPane().add(label, BorderLayout.CENTER);
    }
}

class ImgUtils {

    public BufferedImage scaleImage(int WIDTH, int HEIGHT, String filename) {
        BufferedImage bi = null;
        try {
            ImageIcon ii = new ImageIcon(filename);//path to image
            bi = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
            Graphics2D g2d = (Graphics2D) bi.createGraphics();
            g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
            g2d.drawImage(ii.getImage(), 0, 0, WIDTH, HEIGHT, null);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
        return bi;
    }
} 
```

**参考：**

*   [调整图像大小 java getScaledInstance](https://stackoverflow.com/questions/7252983/resizing-image-java-getscaledinstance)

# javascript - 上传前的javascript jquery预览图像

> ID：12660124
> 
> 赞同：1
> 
> 时间：2012-09-30T09:20:05.507
> 
> 标签：javascript, jquery, file-upload

参考：

[如何在使用 JavaScript 或 jquery 上传之前预览图像？](https://stackoverflow.com/questions/6870943/how-to-preview-a-image-before-upload-using-javascript-or-jquery) [javascript - 上传前的图像预览](https://stackoverflow.com/questions/5594099/javascript-image-preview-before-upload) [如何通过 JavaScript 在上传前上传预览图像](https://stackoverflow.com/questions/4094012/how-to-upload-preview-image-before-upload-through-javascript)

对我不起作用...从上面的参考文献中，有些仅在 ff 中有效，有些则先上传，然后仅显示预览。

我找到了确切的解决方案： http: [//blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

它适用于我测试过的所有内容。

我发现它工作，但我的代码不工作。那么 blueimp 的关键点是什么，而我在上传之前缺少启用图像预览的功能。

我试过：

> ```
>  $('.hidFileBtn').live('change', function(e){
>             $childImg = $(this).closest('.parent').find('img.previewImg');
>             var FileName = $(this).val();
>             console.log(FileName + "-" + $(this)[0].value);
>             $childImg[0].src = $(this).val();
>         }); 
> ```

但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-15T06:21:55.740

这个链接有一个很好的答案：[在上传之前预览图像](https://stackoverflow.com/questions/4459379/preview-an-image-before-it-is-uploaded)

```
<input type = "file" name = "fileFind" onchange = "readURL(this)" id = "fileFind" />
<img id = "imagePreview" src = "" alt = "" />

function readURL(input) {
if (input.files && input.files[0]) {
    var reader = new FileReader();

    reader.onload = function (e) {
        $('#imagePreview').attr('src', e.target.result);
    }

    reader.readAsDataURL(input.files[0]);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T07:23:07.410

你可以试试 HTML5 的 FileReader。如果你想支持 IE，用这个：

```
div.css({'filter':'progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale,src="' + input.val() + '")'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-09T07:08:39.913

在您的 javascript 中编写此代码并创建一个文件按钮附加 onchange 事件，例如来自此[Display Image Before Upload](http://talkerscode.com/webtricks/preview-image-before-upload-using-javascript.php)教程的 onchange="preview_image(event)" 代码

```
function preview_image(event) 
{
  var reader = new FileReader();
  reader.onload = function()
  {
    var output = document.getElementById('output_image');
    output.src = reader.result;
  }
  reader.readAsDataURL(event.target.files[0]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T12:37:28.543

```
<html>
<head>
<script type='text/javascript'>
function preview_image(event) 
{
 var reader = new FileReader();
 reader.onload = function()
 {
  var output = document.getElementById('output_image');
  output.src = reader.result;
 }
 reader.readAsDataURL(event.target.files[0]);
}
</script>
<style>
body
{
 width:100%;
 margin:0 auto;
 padding:0px;
 font-family:helvetica;
 background-color:#0B3861;
}
#wrapper
{
 text-align:center;
 margin:0 auto;
 padding:0px;
 width:995px;
}
#output_image
{
 max-width:300px;
}
</style>
</head>
<body>
<div id="wrapper">
 <input type="file" accept="image/*" onchange="preview_image(event)">
 <img id="output_image"/>
</div>
</body>
</html>
```

# wordpress - Wordpress 规范 URL Facebook 喜欢按钮

> ID：12660129
> 
> 赞同：0
> 
> 时间：2012-09-30T09:20:30.657
> 
> 标签：wordpress

我正在尝试在类似于[http://domain.com/blog/competition-entries/?pid=6的页面上使用 iFrame 添加 Facebook Like 按钮](http://domain.com/blog/competition-entries/?pid=6)

有许多页面，即 ?pid=7、?pid=8 等，但是当我添加 Facebook 代码时，它总是喜欢[http://domain.com/blog/competition-entries](http://domain.com/blog/competition-entries)

我安装了 Yoast 插件的 SEO，但不知道如何将当前 URL 作为 og:url 标签。

任何指点感激不尽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:46:57.743

Facebook 可能会忽略 $_GET 参数（之后的任何内容？），所以我认为唯一的解决方案是使用永久链接 - 你应该首先使用它。你有什么理由不这样做？作为额外的奖励，它也为您的 SEO 增加了一点 ;)

要启用它们，只需`Settings->Permalinks`选择一个 - 我的建议是`Day and name`，如果你发了很多帖子或者`Month and name`你不是那么频繁的作家。

# java - 计算字符串中的单词 - 跳过双倍空格

> ID：12660131
> 
> 赞同：4
> 
> 时间：2012-09-30T09:20:42.400
> 
> 标签：java, string, split, words, counting

我正在开发一个程序，该程序将计算在文本区域中键入或粘贴的单词。如果没有双空格，它会正确计算单词。我为此使用 split 方法，并使用对象的 for 循环来计算单词。

这是出现问题的代码部分的最简单形式...

* * *

```
 public static void main(String[] args) {
    String string = "Java  C++ C#";
    String[] str;
    int c=0;
    str = string.split(" ");
    for(String s:str){
        if(s.equals(" "))
            System.out.println("skipped space");
        else{
            System.out.println("--"+s);
            c++;
        }
    }
    System.out.println("words; " + c);
} 
```

* * *

我试图检查对象 s 中包含的字符串是否为空格，但我的操作方式不起作用。

## 我希望它像这样输出

```
--Java
skipped space
--C++
--C# 
```

## 字; 3

## 但结果是

```
--Java
--
--C++
--C#
words; 4 
```

* * *

关于如何解决这个问题的任何建议？或者我哪部分有问题？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T09:25:00.960

`split`需要一个正则表达式。使用它的力量。

```
str = string.split(" +");

//more sophisticated
str = string.split("\\s+"); 
```

*   `\s`匹配任何空格（不仅仅是空格，还有制表符、换行符等）
*   `+`意思是“其中一个或多个”
*   需要第一个反斜杠来转义第二个以删除字符串中的特殊含义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:25:36.293

您需要将行更改`if(s.equals(" "))`为 `if(s.equals(""))`（没有空格）。原因是它`split`为您提供了一个数组，其中包含空格之间的内容，并且两个空格之间没有任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:25:13.077

当您从 得到一个空字符串时`String.split`，您可以`String.equals`用来检查返回数组中的字符串内容：

```
if (s.equals("")) {
... 
```

输出：

```
--Java
skipped space
--C++
--C# 
```

# asp.net - 为什么这个 Label.Text 不起作用？

> ID：12660137
> 
> 赞同：-1
> 
> 时间：2012-09-30T09:21:21.250
> 
> 标签：asp.net, vb.net, sqldatasource

我有一个内容 VB 页面，我尝试在其中以编程方式更改 SqlDataSource 中的 Select。

我的代码：

```
<asp:Content ID="Content6" ContentPlaceHolderID="MainContent" Runat = "server"> 
<table width="630">
<tr> <td>
Dim Label2 As New Label()
Label2.Text = "Bro"
</td>

<td>

<asp:SqlDataSource ID="SqlDataSource2" runat="server" 
 ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
 SelectCommand="SELECT * FROM [Docs1] WHERE ([Type] = @Type)">
 <SelectParameters>
 <asp:ControlParameter Name="Type" 
 ControlID="Label2"
 PropertyName="Text" 
  />

 </SelectParameters>

 </asp:SqlDataSource>
 </td>
 <td>
 <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
 DataSourceID="SqlDataSource2" CellPadding="4" ForeColor="#333333" 
 GridLines="None"  Font-Names="Arial" 
 >

 <AlternatingRowStyle BackColor="White" Font-Size="XX-Small"  Font-Bold="False" 
 ForeColor="#284775" Font-Names="Times New Roman" Font-Underline="False" />

 <Columns>
  .......
 </asp:GridView> 
```

SqlDataSource 没有得到 Label2.Text。我做错了什么？我必须在页面上多次更改选择参数（从“BLah1”到“Blah2”等），而无需用户进行任何操作，因此除了 page_Load 之外，没有按钮等，基本上没有事件。我想使用隐形标签并更改它们的文本，并以这种方式 - 更改选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:41:52.233

您还应该将标签添加到表单并设置其 ID 属性。IE

```
Dim Label2 As New Label()
Label2.ID = "Label2" 
Form.Controls.Add(Label2)
Label2.Text = "Bro" 
```

# php - PHP 试图使 JavaScript 友好的时间戳，失败，返回 1.34899651119E+12

> ID：12660141
> 
> 赞同：2
> 
> 时间：2012-09-30T09:22:16.080
> 
> 标签：php, javascript, timestamp

嗯，不知道发生了什么。我一直在尝试遵循我在堆栈、谷歌上找到的示例，甚至是一周前有人给我的答案，不幸的是我直到今天才能够测试。

无论如何，我正在尝试通过 php 生成一个 javascript 友好的时间戳，以便我可以同步我的时间。总的来说，我能找到的最好的逻辑是处理微时间的东西。然而，这似乎并没有按预期工作，甚至一点也没有。

现在我正在使用`microtime(true)*1000;`并且正在获得`1.34899651119E+12`结果。我是否设法弄乱了那一小行代码，我不确定。

我应该提到我也尝试过`round(microtime(true) * 1000);`，结果非常相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:16:59.937

您的代码正在返回`1349000021801.4`给我（Linux 3.4.6 x86_64 上的 PHP 5.3.15）。

为了安全起见，我会咬紧牙关并以不同的方式操纵微时间：

```
 list($a, $b) = explode(' ', microtime());
    $a = round($a*1000.0);
    $c = "$b$a\n"; 
```

当您将此*字符串*输出到 Javascript 时，它将*包含*一个“干净的”整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:36:39.203

在 javascript 中，您可以使用`Math.round(new Date().getTime() / 1000)`以秒为单位获取当前时间。

在 PHP 中，您可以使用`time`函数。

# objective-c - PhoneGap 如何从命令行进行发布构建

> ID：12660144
> 
> 赞同：9
> 
> 时间：2012-09-30T09:23:12.487
> 
> 标签：objective-c, xcode, cordova, xcodebuild

我通过调用进行发布构建：

```
xcodebuild -project HelloWorld -sdk iphoneos5.1 -configuration Release install 
```

但对于 PhoneGap 应用程序，我收到此错误：

> ** 构建失败 **
> 
> 以下构建命令失败：CompileC build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/AppDelegate.o Phonefinch/Classes/AppDelegate.m normal armv6 Objective-c com.apple.compilers.llvm。 clang.1_0.compiler (1 失败)

当我尝试：

```
xcodebuild -project HelloWorld -sdk iphoneos5.1 -configuration Release clean build 
```

我得到：

> 2012-10-04 22:51:52.776 xcodebuild[20016:4107] DVTAssertions：警告在 /SourceCache/IDEXcode3ProjectSupport/IDEXcode3ProjectSupport-1559/Xcode3Sources/XcodeIDE/Frameworks/DevToolsBase/pbxcore/SpecificationTypes/XCGccMakefileDependencies.m:87 详细信息：失败从“/Users/camobap-mac/Projects/Phonefinch/build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/AppDelegate.d”加载依赖项输出内容。错误：错误域=NSCocoaErrorDomain 代码=260“无法打开文件“AppDelegate.d”，因为没有这样的文件。” UserInfo=0x400eabf40 {NSFilePath=/Users/camobap-mac/Projects/Phonefinch/build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/AppDelegate.d, NSUnderlyingError=0x40079c140 “操作无法完成。没有这样的文件或目录"}。用户信息：{ NSFilePath = "/Users/camobap-mac/Projects/Phonefinch/build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/AppDelegate.d"; NSUnderlyingError = "错误域=NSPOSIXErrorDomain Code=2 \"操作无法\U2019t 完成。没有相应的文件和目录\””; }。函数：void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^)(NSString *)) 线程：{name = (null), num = 7} 请在[http://bugreport.apple.com](http://bugreport.apple.com)带有此警告消息以及您可以提供的任何有用信息。** 构建失败 **
> 
> 构建/发布-iphoneos/Phonefinch.build/Objects-normal/armv6/MainViewController.d''。错误：错误域=NSCocoaErrorDomain 代码=260“无法打开文件“MainViewController.d”，因为没有这样的文件。” UserInfo=0x400ef6e40 {NSFilePath=/Users/camobap-mac/Projects/Phonefinch/build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/MainViewController.d, NSUnderlyingError=0x400ef24a0 "操作失败完成。没有这样的文件或目录"}。用户信息：{ NSFilePath = "/Users/camobap-mac/Projects/Phonefinch/build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/MainViewController.d"; NSUnderlyingError = "错误域=NSPOSIXErrorDomain Code=2 \"操作无法\U2019t 完成。没有相应的文件和目录\””; }。函数：void XCGccMakefileDependenciesParsePathsFromRuleFile(NSString *, void (^)(NSString *)) 线程：{name = (null), num = 10} 请在[http://bugreport.apple.com](http://bugreport.apple.com)带有此警告消息以及您可以提供的任何有用信息。** 构建失败 **
> 
> 以下构建命令失败：CompileC build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/AppDelegate.o Phonefinch/Classes/AppDelegate.m normal armv6 objective-c com.apple.compilers.llvm。 clang.1_0.compiler CompileC build/Phonefinch.build/Release-iphoneos/Phonefinch.build/Objects-normal/armv6/MainViewController.o Phonefinch/Classes/MainViewController.m normal armv6 Objective-c com.apple.compilers.llvm.clang .1_0.compiler（2次失败）

如果我调用`cordova/debug`-> `** BUILD SUCCESS **`，但我`.app`是在调试模式下编译的。如何在命令行上进行发布构建？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T16:47:43.883

我有完全相同的问题。我不知道我的解决方案是否适用于您的问题。但是，这是我解决它的方法：我想您正在使用 Xcode 项目中的 cordova 子项目。检查您是否有与 cordova 项目相同的配置名称。

例如：当您的主项目的发布配置称为“ReleaseAdHoc”时，请确保您的 Cordova 子项目也具有使用此名称的配置。此外，请确保为主项目和子项目的“归档”过程选择这些配置。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-02T12:28:52.600

我找到了解决方案 -`cordova`实用程序是关键。但是我们需要做一些步骤来准备它：

1.  将脚本添加到`hooks/after_build/010_sign_ios.js`

    ```
    #!/usr/bin/env node

    var app_name = "HelloWorld";
    var sign_crt_name = "iPhone Distribution: My company Group BV";
    var provision_path = "$PWD/Ad_Hock_Distribution_Helloworld.mobileprovision";

    var output_ipa_path = "$PWD/platforms/ios/build/device/" + app_name + ".ipa";
    var sys = require('sys');
    var exec = require('child_process').exec;

    var cliCommand = process.env.CORDOVA_CMDLINE;
    var isRelease = (cliCommand.indexOf('--release') > -1);
    var isDevice = (cliCommand.indexOf('--device') > -1);
    var platform = process.env.CORDOVA_PLATFORMS;

    if (platform === 'ios' && isDevice && isRelease) {
        function puts(error, stdout, stderr) {
            sys.puts(stdout)
        }

        exec("xcrun -sdk iphoneos PackageApplication " + 
             "-v \"$PWD/platforms/ios/build/device/" + app_name + ".app\" " +
             "-o \"" + output_ipa_path + "\" " + 
             "--sign \"" + sign_crt_name + "\" " + 
             "--embed \"" + provision_path + "\"", puts);
    } 
    ```

    但是根据您的需要修复`app_name`和变量`sign_crt_name``provision_path`

2.  跑`cordova build ios --release --device`

3.  使用`$PWD/platforms/ios/build/device/HelloWorld.ipa`好[`ideviceinstaller`](https://github.com/libimobiledevice/ideviceinstaller)工具通过cmd交付或安装

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-27T16:56:53.350

似乎很少有资源可以指导如何自动化 ios 的 phonegap 构建过程。在尝试了很多试验和错误和研究之后，我决定采用这种方法。首先在根文件夹中创建一个文件 json 文件，如[cordova docs](https://cordova.apache.org/docs/en/latest/guide/platforms/ios/#using-buildjson)中所述。文件名可以是任何东西。如果文件名为 build.json，则在构建应用程序时无需传递任何参数。为方便起见，推荐的用于自动签名的 build.json 如下所示：

```
{
    "ios": {
        "debug": {
            "codeSignIdentity": "iPhone Developer",
            "developmentTeam": "FG35JLLMXX4A",
            "packageType": "development",
            "automaticProvisioning": true,
            "buildFlag": [
                "EMBEDDED_CONTENT_CONTAINS_SWIFT = YES",
                "ALWAYS_EMBED_SWIFT_STANDARD_LIBRARIES=NO",
                "LD_RUNPATH_SEARCH_PATHS = \"@executable_path/Frameworks\""
            ]
        },
        "release": {
            "codeSignIdentity": "iPhone Developer",
            "developmentTeam": "FG35JLLMXX4A",
            "packageType": "app-store",
            "automaticProvisioning": true,
            "buildFlag": [
                "EMBEDDED_CONTENT_CONTAINS_SWIFT = YES",
                "ALWAYS_EMBED_SWIFT_STANDARD_LIBRARIES=NO",
                "LD_RUNPATH_SEARCH_PATHS = \"@executable_path/Frameworks\""
            ]
        }
    }
} 
```

您可以在上面提到的链接中阅读更多内容。

您现在可以使用以下方式构建您的应用程序：

```
phonegap build ios (if filename is build.json)
phonegap build ios --buildConfig path/xyz.json (if filename is other than build.json)

cd platforms/ios
xcodebuild archive -workspace app.xcworkspace -scheme scheme-name -configuration Release -archivePath IPA-name.xcarchive
xcodebuild -exportArchive -archivePath IPA-name.xcarchive -exportPath IPA-name.ipa -exportOptionsPlist exportOptions.plist 
```

# qt - Qt 试图包含 openCV 库文件

> ID：12660145
> 
> 赞同：1
> 
> 时间：2012-09-30T09:23:18.710
> 
> 标签：qt, opencv

我是否正确包含目录中的所有库文件？

`LIBS += "C:\openCV24\opencv_bin\lib\*.dll"`

因为这条线一直在给我

`C:\openCV24\opencv_bin\install\lib*.dll: Invalid argument`

我试过找几个地方，并多次改变这条线，但似乎无法让它发挥作用。如果我错过了一步，有人可以告诉我吗？

我已经包含了包含路径并且工作正常`INCLUDEPATH += "C:\openCV24\opencv_bin\install\include"`，但是它的附加库文件会引发错误

Thx 真的很生气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:26:29.180

pro 文件中的 Libs 选项不适用于 Dll 文件，它适用于 lib 文件。尝试 LIBS += "C:\openCV24\opencv_bin\lib\*.lib"。由于链接顺序，“*.lib”的使用也可能会导致问题。

**此处更新** 是我的 OPENCV 专业文件模板。此外，您应该将 opencv bin 文件夹添加到您的路径中。

```
#begin{opencv}
INCLUDEPATH += "C:\opencv\opencv\build\include"
INCLUDEPATH += "C:\opencv\opencv\build\include\opencv"

LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_calib3d231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_contrib231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_core231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_features2d231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_flann231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_gpu231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_haartraining_engine.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_highgui231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_imgproc231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_legacy231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_ml231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_objdetect231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_ts231.lib
LIBS += C:\opencv\opencv\build\x86\vc9\lib\opencv_video231.lib
#end{opencv} 
```

# php - PHP 会话仅在某些页面中不起作用

> ID：12660150
> 
> 赞同：0
> 
> 时间：2012-09-30T09:24:15.737
> 
> 标签：php, session

我在网站上有一些页面。所有页面都有一个栏，我把它放在下面：

```
session_start();
include('bar.php');
echo $bar; 
```

bar.php 的内容或多或少是这样的：

```
session_start();
$username=$_SESSION['username'];
if empty($username) {
    $bar='You are not logged in.';
} else {
    $bar='You are logged in.';
} 
```

问题是有时该栏可以工作（即，当我实际登录时它显示“已登录”），但有时它不会（它显示未登录用户的内容）。例如，浏览索引我看到未登录用户的栏，但在登录页面上显示登录用户的栏。

另外，我尝试删除我的 PHPSESSID cookie，然后登录：它有效，它没有显示这个错误。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:13:26.300

第二个 session_start(); 只是被忽略了，所以我认为这不是问题。您可以检查 session_start() 是否返回 false：[http ://es.php.net/manual/en/function.session-start.php](http://es.php.net/manual/en/function.session-start.php)

# jquery - jQuery Slider - 全宽 - 从中 间打开自身

> ID：12660151
> 
> 赞同：0
> 
> 时间：2012-09-30T09:24:19.507
> 
> 标签：jquery, animation, slider, width

我必须这样做：

![在此处输入图像描述](../Images/9a8c02d3f7b9c54010725c6e94a90d90.png)

你会怎么做？你会使用 jQuery 插件吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:48:35.067

快乐的，

最棘手的方面是让 HTML 和 CSS 正确。jQuery 使 javascript 变得相当简单。

可以通过邻接同一图像的两个剪辑实例来实现图像的分割。这样做的逻辑可以完全在样式表中，但由于剪裁算法很难解决，所以在 javascript 中更简单。因此，可以通过更改*一个*值来调整拆分；如果此值将分割置于图像边界之外，则图像将完全位于上半部分或下半部分，并且将保持不变。

这是一个示例页面 - 它并不能满足您的所有需求，但可以帮助您入门。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style>
#outerWrapper {
    width: 900px;
}
.half {
    position: relative;
    border: 0px solid #000;
}
#topHalf {
    height: 250px;
}
#bottomHalf {
    height: 150px;
}
.leftColumn {
    width: 190px;
    float: left;
}
.content {
    width: 698px;
    padding: 0 5px;
    height: 100%;
    float: left;
    background-color: #e0e0e0;
    border: 1px solid #909090;
    -moz-border-radius: 10px;
    border-radius: 10px;
}
#openers {
    font-family: monospace;
    position: absolute;
    bottom: 5px;
}
.opener {
    font-family: monospace;
    width: 90px;
    color: #111;
}
.opener.selected {
    font-weight: bold;
}
.splitImg {
    position: absolute;
    display: none;
}
#centerWrapper {
    clear: both;
    display: none;
    width: 900px;
}
#hiddenMenus {
    display: none;
}
.centerSection {
    position: relative;
    width: auto;
    padding: 10px;
    background-image: url("http://www.teacherfiles.com/clipart/xbackgrounds/graph_paper.jpg");
    height: 100px;
}
.centerSection h3 {
    width: 810px;
    margin: 0;
    padding: 1px 12px;
    background-color: #e0e0e0;
    border: 4px double #99C;
    -moz-border-radius: 15px;
    border-radius: 15px;
    font-family: verdana,helvetica,arial,sans-serif;
    font-size: 14px;
    color: #006;
    letter-spacing: 0.3em;
}
.centerSection .close {
    position: absolute;
    right: 10px;
    top: 13px;
    font-family: verdana,helvetica,arial,sans-serif;
}
</style>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(function() {
    //The image is "split" by abutting two clipped instances of same image.
    //Splitting can be achieved in the stylesheet but the arithmetic is tricky 
    //so we do it in javascript. Just set `dims` to be compatible with the 
    //image (and width & height set in the HTML) and the rest will look after itself. 
    // *****
    var dims = {w:180, h:120, v:60};//image width(px), image height(px), vertical_split from top (px)
    // *****
    var rect_top    = [0,      dims.w, dims.v, 0];
    var rect_bottom = [dims.v, dims.w, dims.h, 0];
    var $t = $("#topImg").css({
        bottom: (dims.v - dims.h) + 'px',//this will be negative
        clip: 'rect(' + rect_top.join('px,') +'px)'
    }).show();
    var $b = $("#bottomImg").css({
        top: '-' + dims.v + 'px',//this will be negative
        clip: 'rect(' + rect_bottom.join('px,') +'px)'
    }).show();
    $b.attr({ src:$t.attr('src'), width:$t.width(), height:$t.height() });
});

$(function() {
    //Set button widths to allow dynamic bold style without jog
    var $openers = $(".opener").each(function(){
        var $o = $(this);
        $o.width((7 * (1 + $o.text().length)) + 'px');
    });
});

$(function() {
    //add close buttons to the menu sections
    $(".centerSection h3").each(function() {
        $('<button class="close">X</button>').insertBefore($(this));
    });
});

$(function() {
    //Open and close the centre menus section
    var $$ = {//jQuery object cache
        centerWrapper: $("#centerWrapper"),
        hiddenMenus: $("#hiddenMenus"),
        defaultMenu: $("#defaultMenu")
    };
    var $openers = $(".opener").on('click', function(e) {
        e.stopPropagation();
        e.preventDefault();
        var $link = $(this),
            $old = $$.centerWrapper.find(".centerSection"),
            $new = $($link.attr('rel')),
            speed = 1000,//'slow',
            open = function() {
                unload();
                $$.centerWrapper.append($new).slideDown(speed);
                $link.addClass('selected');
            },
            unload = function(){
                $old.appendTo($$.hiddenMenus);//unload
                $openers.removeClass('selected');
            };
        $new = (!$new.length) ? $$.defaultMenu : $new;
        $$.centerWrapper.stop();
        if( $old.length ) { //if a centerSection is currently loaded
            var fn = ( $new.get(0) == $old.get(0) ) ? unload : open;
            $$.centerWrapper.slideUp(speed, fn);//close then either unload or reopen 
        }
        else { open(); } //open from closed
    });
    function close(e) {
        $openers.filter(".selected").trigger('click');
    }
    $(".centerSection").on('click', function(e) {
        e.stopPropagation();
    }).on('click', '.close', close);
    $(document).on('click', close);
});
</script>
</head>

<body>

<div id="outerWrapper">
    <div class="half" id="topHalf">
        <div class="leftColumn">
            <span>&nbsp;</span>
            <img class="splitImg" id="topImg" src="http://www.childrenshealthyfood.com/healthy-food-schools/pics/healthy-foods/fresh-fruit-and-vegetables.jpg" width="180" height="120" />
        </div>
        <div class="content">
            <h2>Top Half</h2>
            <div id="openers">
                <!--a class="opener" href="#" rel="#cocktail">Cocktail Menu</a>
                <a class="opener" href="#" rel="#buffet">Buffet Menu</a-->
                <span>Menus:</span>
                <button class="opener" rel="#cocktailMenu">Cocktails</button>
                <button class="opener" rel="#buffetMenu">Buffet</button>
                <button class="opener" rel="#luncheonMenu">Luncheon</button>
            </div>
        </div>
    </div>

    <div id="centerWrapper"></div>

    <div class="half" id="bottomHalf">
        <div class="leftColumn">
            <span>&nbsp;</span>
            <img class="splitImg" id="bottomImg" /><!-- src, width and height are set dynamically -->
        </div>
        <div class="content">
            <h2>Bottom Half</h2>
        </div>
    </div>
</div>

<div id="hiddenMenus">
    <div class="centerSection" id="cocktailMenu">
        <h3>Cocktail Menu</h3>
    </div>
    <div class="centerSection" id="buffetMenu">
        <h3>Buffet Menu</h3>
    </div>
    <div class="centerSection" id="defaultMenu">
        <h3>Menu not found</h3>
    </div>
</div>

</body>
</html> 
```

**[演示](http://jsfiddle.net/f4JTf/1/show/)**

在 Opera 12.02 和 IE9 中测试。

少了什么东西：

*   “翻盖”开口；将需要更多的努力来实现
*   关闭菜单；链接上有一个切换操作；单击打开菜单外的任意位置；单击每个打开的菜单右上角的动态插入的 [x] 按钮。
*   图像分割逻辑适用于左列中的单个图像；正如代码所示，没有其他图像会分裂。

**Doctype**：我在本地使用 XHTML doctype 进行了测试（如上），但在 jsFiddle 中一切正常，无需修改，因此在 HTML5 下似乎没问题。

**jQuery** : 1.7.1+

# php - 我无法在 url 字符串中获取 ID

> ID：12660154
> 
> 赞同：-3
> 
> 时间：2012-09-30T09:24:54.583
> 
> 标签：php, jquery

我在 onclick 函数中传递了 ID，但是当我在页面中获取 id 时，它显示“未定义的索引 ID”。

这是将 ID 传递给 url 的 php 代码

```
<tr>
    <td>
        <a href="#" class="ok">
            <img style='width: 200px' src="images/<?php echo $pics; ?>" alt="name" onclick="location.href='#img?ID=<?php echo $imgid ?>' ;img('<?php echo $pics ?>','<?php echo $imgid ?>')"  > 
        </a>
    </td>
</tr> 
```

这是 url 中的 onclick 结果

```
http://localhost/2/2/mvc/view/main.php#img?ID=50 
```

这是我如何调用 URL ID

```
<?php  $gid=$_GET['ID']; echo $gid;  ?> 
```

这是显示的错误

> 注意：未定义索引：第 126 行 C:\xampp\htdocs\2\2\mvc\view\main.php 中的 ID

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T09:27:04.717

网址应为：

```
http://localhost/2/2/mvc/view/main.php?ID=50#img 
```

即该`hash`部分应该在*之后*所有`GET`参数之后

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:27:15.147

这是错误`echo $imgid`应该是`echo $imgid;`

它应该像

```
onclick="location.href='?ID=<?php   echo $imgid ;?>'#img 
```

显示图像的也`#img`应该在 url 的末尾

# windows - 如何在 Windows 上生成 octopress？

> ID：12660159
> 
> 赞同：1
> 
> 时间：2012-09-30T09:25:35.960
> 
> 标签：windows, octopress

现在我正在尝试在 Windows 系统上使用[Octopress](http://octopress.org)。当我写博客并运行时

```
bundle exec rake generate 
```

我得到了这些错误：

```
user@USER-PC /c/Sites/my_project (master)
$ bundle exec rake generate
## Generating Site with Jekyll
unchanged sass/screen.scss
Configuration from c:/Sites/my_project/_config.yml
Building site: source -> public
c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/lib/jekyll/convertible.rb:29:i
n `read_yaml': invalid byte sequence in GBK (ArgumentError)
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/lib/jekyll/post.r
b:39:in `initialize'
        from c:/Sites/my_project/plugins/preview_unpublished.rb:23:in `new'
        from c:/Sites/my_project/plugins/preview_unpublished.rb:23:in `block
 in read_posts'
        from c:/Sites/my_project/plugins/preview_unpublished.rb:21:in `each'

        from c:/Sites/my_project/plugins/preview_unpublished.rb:21:in `read_
posts'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/lib/jekyll/site.r
b:128:in `read_directories'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/lib/jekyll/site.r
b:98:in `read'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/lib/jekyll/site.r
b:38:in `process'
        from c:/Ruby193/lib/ruby/gems/1.9.1/gems/jekyll-0.11.0/bin/jekyll:250:in
 `<top (required)>'
        from c:/Ruby193/bin/jekyll:19:in `load'
        from c:/Ruby193/bin/jekyll:19:in `<main>'

user@USER-PC /c/Sites/my_project (master)
$ 
```

好像**编码**不对，怎么改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:09:46.740

请设置**LC_ALL**和**LANG**。

```
set LC_ALL=en_US.UTF-8
set LANG=en_US.UTF-8 
```

# python - 在python中按日期范围过滤日志的最佳方法

> ID：12660164
> 
> 赞同：4
> 
> 时间：2012-09-30T09:27:10.247
> 
> 标签：python, parsing, logging

打印与日期时间范围匹配的日志行的最佳方法是什么。例如：

我只想打印日期从：2012/09/30-00:00:10 到：2012/09/30-00:00:13 的行

```
2012/09/30-00:00:08.773 log error
2012/09/30-00:00:09.034 log warning
2012/09/30-00:00:09.352 log info
2012/09/30-00:00:10.526 log info
2012/09/30-00:00:10.995 log warning
2012/09/30-00:00:12.014 log warning
2012/09/30-00:00:18.035 log error
2012/09/30-00:00:21.733 log fatal
2012/09/30-00:00:21.981 log info 
```

它应该打印：

```
2012/09/30-00:00:10.526 log line
2012/09/30-00:00:10.995 log line
2012/09/30-00:00:12.014 log line 
```

由于我正在使用生产服务器，因此我想以一种具有成本效益的方式来做到这一点。请只使用Python。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T10:33:21.510

Actullay，日志格式允许比较日期字符串而无需将其转换为`datetime`.

```
with open('mylog.log','r') as f:
    for line in f:
        d = line.split(" ",1)[0] 
        if d >= '2012/09/30-00:00:10' and d <= '2012/09/30-00:00:13':
            print line 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T09:50:13.617

我不确定性能影响（我怀疑蒂姆的回答可能更快），但这种方法适用于任何日期范围：

```
>>> def dates(start,end):
...     for i in range(int((end-start).seconds)):
...         yield start + datetime.timedelta(seconds=i)
...
>>> fmt = '%Y/%m/%d-%H:%M:%S'
>>> from_date = datetime.datetime.strptime('2012/09/30-00:00:10',fmt)
>>> till_date = datetime.datetime.strptime('2012/09/30-00:00:13',fmt)
>>> with open('file.log') as f:
...     for line in f:
...         if datetime.datetime.strptime(line.split()[0][:-4],fmt) in dates(fro
m_date,till_date):
...              print line
...
2012/09/30-00:00:10.526 log info
2012/09/30-00:00:10.995 log warning
2012/09/30-00:00:12.014 log warning 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T09:41:51.200

假设您正在逐行阅读日志：

```
import re
for line in log:
    if re.match("2012/09/30-00:00:1[0-3]", line):
        print line 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T12:20:17.677

根据 Tim 的假设，您正在逐行读取日志文件，然后使用`itertools`.

```
from itertools import dropwhile, takewhile

from_dt, to_td = '2012/09/30-00:00:10', '2012/09/30-00:00:13'
with open('logfile') as fin:
    of_interest = takewhile(lambda L: L <= to_td, dropwhile(lambda L: L < from_dt, fin))
    for line in of_interest:
        print line 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T11:53:47.753

[`.startswith()`示例](http://ideone.com/A4yBZ)：

```
prefixes = tuple("2012/09/30-00:00:1%d" % i for i in range(3))
with open('mylog.log', 'rb') as file:
    print ''.join(line for line in file if line.startswith(prefixes)), 
```

您可以通过使用单个静态前缀来优化它，然后稍后使用正则表达式或日期时间对象测试预选的行。

如果行在输入中按日期排序；您可以在不阅读整个文件的情况下提前中断。

# android - 尽管 android-11 安装在 pc 中，但无法在 Eclipse 中解析目标“android-11”

> ID：12660166
> 
> 赞同：0
> 
> 时间：2012-09-30T09:27:41.233
> 
> 标签：android

我已经在我的电脑中安装了 Android 3.0（API 11）- SDK 平台和谷歌 API。

当我在 Eclipse 中打开一个针对 Android-11 的现有 android 项目时，我得到 Unable to resolve target 'android-11' 错误

我尝试在系统路径环境变量中添加 android-sdk 工具文件夹路径。

问题仍然存在我猜eclipse无法获取已安装的android adk路径。还是因为其他问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:54:13.890

转到文件 project.properties 并将目标从 android 11(3.0 HC) 更改为 15(4.0.3 ICS) 或任何其他可用的 android SDK 平台版本。见下文。

```
# Project target.
target=android-11 to target=android-15. 
```

当您通过 SDK 管理器更新 android 并删除之前创建的项目正在使用的包时，就会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:50:40.663

尝试在清单文件中添加 min sdk 和 target sdk 版本

```
 <uses-sdk android:minSdkVersion="8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:03:45.263

有时这会有所帮助：

项目的上下文菜单 >> Android 工具 >> 修复项目属性。

# mysql - 显示表中的数据，这些数据可以在同一个表的列中具有相同的数据

> ID：12660167
> 
> 赞同：2
> 
> 时间：2012-09-30T09:27:40.520
> 
> 标签：mysql, sql, group-by, group-concat

我从网上抓取了一些数据，然后直接将它们保存在数据库中，所以我得到了`$title`,`$url`和`$author`. 但是，一个的数量`$author`可以`title`多于1个数据。所以，我和分开`$author`了。一切都是自动增量。`$title``$url``id`

```
tb_wrapper            tb_author
=================     ==================
|id| title | url|    |id|author|$title|
=================     ==================
|1 |titleA |urlA|    | 1| A    |titleA|
=================     | 2| B   |titleA|
                    =================== 
```

在另一个过程中（从我得到它们的文件名与 $title 相同的文档文件），我有一个表也包含`$title`：`tb_doc`

```
======================
|id | content | title|
======================
|1  | contentA|titleA|
====================== 
```

我需要从这 3 个表中获取数据，所以我可以得到如下结果： `titleA has URLA contentA and author A and B`

这是代码：

```
$query = mysql_query("SELECT
                            tb_wrapper.url,
                            tb_wrapper.title,
                            tb_author.title,
                            tb_author.author,
                            tb_doc.content,
                            tb_doc.title
                       FROM
                            tb_doc
                       INNER JOIN tb_wrapper ON tb_doc.title = tb_wrapper.title
                       INNER JOIN tb_author ON tb_wrapper.title = tb_author.title "); 
```

但是，从那，我得到了重复的结果，作者 A 和 B 是分开的。请帮帮我，我必须做什么？非常感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:50:53.943

[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)像这样使用：

```
SELECT w.url, w.title, a.title, a.authors, 
  d.content, d.title
FROM tb_doc d
INNER JOIN tb_wrapper w  ON d.title = w.title
INNER JOIN
(
   SELECT title, GROUP_CONCAT(author SEPARATOR ', ') AS authors
   FROM  tb_author
   GROUP BY title
 ) a ON w.title = a.title 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/0f622d/1)

# c# - 如何在开始屏幕上设置用于表示我的应用程序的图标以进行语义缩放

> ID：12660171
> 
> 赞同：-1
> 
> 时间：2012-09-30T09:28:32.883
> 
> 标签：c#, xaml, windows-8, .net-4.5, winrt-xaml

Metro 桌面在 Semantic Zoom 中时，在哪里为任何应用程序配置图标，如下所示： ![在此处输入图像描述](../Images/a9d57282a735d9c755a49cd363b2b895.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:17:27.783

您需要为您的项目设置“小标志”，这是一个 30x30 像素的图像。

在 Visual Studio 中，打开 Package.appxmanifest，它是 Tile 部分中需要设置的第三个选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:42:40.700

实际上，在清单文件中，Tile 子标题下有一个属性背景，默认设置为灰色，因此当启动屏幕处于语义视图放大时，我们会看到灰色边框。只需根据应用程序图标更改颜色

# mapreduce - riak mapreduce“未找到”输出

> ID：12660172
> 
> 赞同：0
> 
> 时间：2012-09-30T09:28:48.547
> 
> 标签：mapreduce, riak

我正在尝试 map reduce 中的一个函数，它对数据进行排序并返回它。当输入查询中的所有桶键对都存在于 riak 集群中时，它运行良好。当存储桶/密钥对不存在时，它会给出如下所示的输出。

`[{"not_found":{"bucket":"newspaper-issue","key":"56276","keydata":"undefined"}}]`

我无法从映射阶段删除此输出，即使我只是`return []`在映射阶段，它也会返回这个单个对象。

我的问题是如何避免此输出，因为输入中可能缺少一些存储桶/密钥。

地图功能是这样的：

```
"language" => "javascript",
"source" => "function(value,keyData,arg){
   return []
 },
"keep"=>true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T16:54:21.607

I see this was already answered on our mailing list for you but wanted to have the answer available here on SO as well:

There is a builtin JS function to use in your reduce phase to fix this; `filterNotFound()`

```
return  Riak.filterNotFound(your_object_passed_from_map_phase); 
```

# php - int = 0上的php switch语句错误

> ID：12660175
> 
> 赞同：4
> 
> 时间：2012-09-30T09:29:17.103
> 
> 标签：php, switch-statement

我在 php 开关盒中遇到问题。

当我设置**$number=0**它应该运行第一种**情况**，但这里代码返回**10-20K**，即第二种情况。

我检查了比较运算符，在其他情况下测试它们返回正确的值但这里第一种情况不在**$number=0上运行**

为什么会这样？php 将 0 视为错误或代码中有问题？

链接到键盘粘贴[http://codepad.org/2glDh39K](http://codepad.org/2glDh39K)

这里也是代码

```
<?php

$number = 0;

    switch ($number) {
     case ($number <= 10000):
            echo "0-10K";
           break;
        case ($number > 10000 && $number <= 20000):
            echo "10-20K";
            break;
        case ($number > 20000 && $number <= 30000):
            echo "20-30K";
            break;
        case ($number > 30000 && $number <= 40000):
            echo "30-40K";
            break;
        case ($number > 40000 && $number <= 50000):
            echo "40-50K";
            break;
        case ($number > 50000 && $number <= 60000):
            echo "50-60K";
            break;
        case ($number > 60000 && $number <= 70000):
            echo "60-70K";
            break;
        case ($number > 70000 && $number <= 80000):
            echo "70-80K";
            break;
        case ($number > 80000 && $number <= 90000):
            echo "80-90K";
            break;
        case ($number > 90000):
            echo "90K+";
            break;

        default: //default
            echo "N/A";
            break;
}

?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T09:38:18.843

您*几乎*是`switch`在反向使用，但不完全是。您需要通过以下方式完全反转`switch(true)`：

```
switch (true) { // IMPORTANT CHANGE HERE!
    case ($number <= 10000):
        echo "0-10K";
       break;
    case ($number > 10000 && $number <= 20000):
        echo "10-20K";
        break;
    // etc
} 
```

或以其他方式将整个内容更改为`if`/ `else`：

```
if ($number <= 10000) {
    echo "0-10K";
else if ($number > 10000 && $number <= 20000) {
    echo "10-20K";
}
// etc 
```

两个重要说明：

1.  反向`switch`通常在您第一次看到它时看起来非常违反直觉。如果您觉得不舒服，请不要使用它。
2.  您的条件可以被简化——假设它们按顺序出现，每个`$number > X`部分都是多余的，因为前一个条件 ( `$number <= X`) 中的检查已经失败。但是，可以说保持检查使代码在面对修改时更加健壮。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T09:38:48.030

```
switch ($number) {
 case ($number <= 10000):   // check $number == ($number <= 10000)
       echo "0-10K";
       break;
 // you hit the below because `0 == false` is true in php
 case ($number > 10000 && $number <= 20000): // check $number == ($number > 10000 && $number <= 20000)
        echo "10-20K";
        break;
 // ... 
```

但是你可以用更少的代码来做到这一点：

```
function showRange($number) {
    if ($number > 90000) {
       echo "90K+";
       return;
    }
    echo sprintf("%s-%sK", (int) ($number / 10000) * 10, ((int) ($number / 10000) +1) * 10 );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T09:35:55.680

当您执行 switch case 方法时，您无法匹配这样的布尔值。您只需要比较结果值。

我认为您应该重写代码以使用`if...then...elseif`语句。

```
if ($number <= 10000){
  echo "0-10K";
}elseif($number <= 20000){
  echo "10-20K";
}elseif($number <= 30000){
  echo "20-30K";
}elseif($number <= 40000){
  ...
} 
```

通过使用这种方法，您不需要每次都进行两次检查，因为前面的`if`语句也会检查这些条件。IE：如果您到达第二个`if`语句，您已经知道该值**不**小于（或等于）`1000`因此它*必须*大于`10000`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-30T09:45:55.180

```
$number = 0;
var_dump($number); // int(0) 
```

如果将语句修改为`case ($number > 0 && $number <= 10000):`，它会奇怪地起作用。但它适用于输入的任意查找 ( `$number > 9091 && $number <= 10000`)。

即使下面是完整的废话：

```
$number = 0;
$jonskeet = false;

switch ($number)
{
    case ($jonskeet === true && $number <= 10000):
        echo "0-10K";
        // ... 
```

`0-10K`即使`if`语句中的相同条件不起作用，它也会输出。

问题是`select`不能与长条件一起使用。**如果变量的值等于**关键字后面的`select`值，则可以用来做某事。看：**`case`**

 **```
select ($user_rank)
{
    case 0:
        return "guest";
        break;
    case 1:
        return "user";
        break;
    // ...
    default:
        return "unknown";
        break;
} 
```

但是你`case`的代码中有很长的条件。

```
case ($number <= 10000):
    echo "0-10K";
    break;
case ($number > 10000 && $number <= 20000):
    echo "10-20K";
    break; 
```

首先运行它会转换`$number <= 10000`为*TRUE*和*FALSE*，就像两个语句一样。在此之后，您的代码将以下列方式执行：`$number > 10000 && $number <= 20000`

 *```
case TRUE:
    echo "0-10K";
    break;
case FALSE:
    echo "10-20K";
    break; 
```

`$number`是`0`，但它也可以评估`FALSE`，这就是为什么你得到不想要的输出。

作为一种解决方案，您应该将您的代码翻译为具有`if`- `elseif`-`else`设置：

```
 if ( $number < 10000 ) {
     echo "0-10K";
 } else if ( $number > 10000 && $number <= 20000 ) {
     echo "10-20K";
 // ...
 } else {
     echo "N/A";
 } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T09:39:52.057

在这里，如果 $i 等于 0，PHP 将执行所有的 echo 语句！

所以它执行下一个案例的语句，在这种情况下，它会中断

所以使用 if-else-if 而不是 switch case

```
if ($number <= 10000){
  echo "0-10K";
}elseif(  $number <= 20000){
  echo "10-20K";
}elseif(  $number <= 30000){
  echo "20-30K";
}elseif(  $number <= 40000){
  echo "90K+";
}

 ...

elseif(  $number <= 90000)
     echo "80-90K";

}elseif($number > 90000){
echo "90K+";
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-30T09:41:01.743

是的，对于 PHP`0`来说是`FALSE`（除非你使用`===`）。是的，您的代码不正确 -`switch`不是用于比较范围 - 它是用于比较值（至少在 PHP、Ruby 或 Perl 6 中是另一回事），就像那里一样。

```
switch ($letter) {
case 'a':
    echo "A?";
    break;
default:
    echo "Unknown letter";
    break;
} 
```

在您的情况下，您将数字与条件进行比较——返回`true`或`false`. 照原样`0`，`false`第二个条件成立。`switch`不是为这样的代码而设计的，我会`if` `else`改用或重写你的逻辑 - 重复不是好主意。

```
$range_number = floor($number / 1000);
echo $range_number, $range_number ? "K" : "", "-", $range_number + 1, "K"; 
```

（顺便说一句，我知道这`switch (true)`有效，但不要使用它 - 这是丑陋的黑客）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-30T09:42:52.900

你不能真正为一个数字范围做 switch case。为此目的使用 if(){} else{}。***

# javascript - 从外部源动态更改 javascript 变量

> ID：12660178
> 
> 赞同：1
> 
> 时间：2012-09-30T09:29:43.173
> 
> 标签：javascript

我有两个文件 data1.js 和 data2.js data1.js 有一个变量，如

```
var rows = ['g1', 'g2']; 
```

data2.js 有一个变量，如

```
var rows = ['g1', 'g2', 'g3', 'g4']; 
```

最初，我正在使用加载 data1.js

```
<script id="datascript" type="text/javascript" src="data1.js"></script> 
```

但是，在单击按钮时，我正在加载 data2.js，希望它能够加载其内容（即更新变量行）：

```
onclick="datascript.src='data2.js';alert(rows);" 
```

但是，我的 rows 变量不会更新。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T09:30:50.253

问题是您试图在浏览器下载和执行第二个 JS 文件*之前*`rows`读取变量的值。要解决这个问题：

 *使用`jQuery.getScript()`- [http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/) -在脚本下载并执行*后*提供回调。

**代码**：

```
$('#datascript').remove();
$.getScript("data2.js", function(data, textStatus, jqxhr) {
   alert(rows);
}); 
```

或者，如果你想坚持使用纯 JS，你可以这样做：

参考：[http ://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS](http://www.hunlock.com/blogs/Howto_Dynamically_Insert_Javascript_And_CSS)

```
// remove previous script element
var sElem = document.getElementById('datascript')
sElem.parentNode.removeChild(sElem);

// insert new script
var newScript = document.createElement('script');
newScript.type = 'text/javascript';
newScript.id = 'datascript';
newScript.onload= function() {
   alert(rows);
};
newScript.src = 'data2.js';
document.getElementsByTagName("head")[0].appendChild(newScript); 
```*

# java - 在 JSF 中使用 IOUtils 下载 zip 文件时出现“空响应，从服务器收到空响应”错误

> ID：12660179
> 
> 赞同：3
> 
> 时间：2012-09-30T09:29:44.897
> 
> 标签：java, jsf, io, download, zip

我正在使用我的 jsf bean 中的 Java 从 Web 服务器下载 zip 文件。我的代码适用于 JPEG，但不适用于 ZIP。这是我的代码。

```
private void createDownloadFile(final URL downloadUrl, final String mimeType) {
    final FacesContext fc = FacesContext.getCurrentInstance();
    final ExternalContext context = fc.getExternalContext();
    final HttpServletResponse response = (HttpServletResponse) context.getResponse();
    response.setContentType(mimeType);
    response.addHeader("Content-Disposition", "attachment; filename=\"" + downloadUrl + "\"");

    try{
        final OutputStream out = response.getOutputStream();
        IOUtils.copy(downloadUrl.openStream(), out);
        fc.responseComplete();
    }catch (final IOException exc){
      exc.printStackTrace();
    }

} 
```

这就是错误：空响应，从服务器收到空响应。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:59:10.400

> *空响应，从服务器收到空响应。*

此消息可识别为 Chrome 中的 XML 解析错误；XML 解析器找不到请求的 XML 根元素。结合您尝试执行的任何操作，这表明您正在尝试通过 JavaScript/Ajax 下载文件。您**不能**这样做，因为由于明显的安全原因，JavaScript 没有工具来强制使用保存在变量中的文件内容的“另存为”对话框*。*

此错误消息是因为 JSF ajax 响应被定义为返回特定的 XML 格式`<partial-response><update>`等而引起的。但是如果`<partial-response>`JSF ajax 响应中缺少根元素，则特定于浏览器的 XML 解析器将/可能会显示这种错误。

您需要改为通过同步请求下载文件。删除`<f:ajax>`或将 3rd 方组件的任何 ajax-toggling 属性设置为`false`，例如`<p:commandButton ajax="false">`.

您无需担心浏览器中的页面更改，因为您已设置`Content-Disposition: attachment`响应标头，当前页面将保持不变。顺便说一下，这个问题绝不是 Commons IO 特有的。

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)

# permissions - Plone 4.2 permissions.zcml 被忽略或失败

> ID：12660180
> 
> 赞同：0
> 
> 时间：2012-09-30T09:29:49.380
> 
> 标签：permissions, plone, genericsetup

当我尝试在我的项目中包含一个 permissions.zcml 时，configure.zcml 上有这一行

```
 <include package="Products.CMFCore" file="permissions.zcml"
       xmlns:zcml="http://namespaces.zope.org/zcml"
       zcml:condition="have plone-41" /> 
```

或者只是这一行

```
 <include package="Products.CMFCore"/ > 
```

在处理 rolemap.xml 时，它无法加载并引发错误。

当我尝试包含文件时

```
<include file="permissions.zcml"> 
```

我明白了

```
ConfigurationError: ('Unknown directive', u'http://namespace.zope.org/zope', u'permission') 
```

但是当我在 configure.zcml 中编写权限声明时，它会得到正确处理。我尝试了几个包含包语句。敏捷手册指出，使用 zope 2.12（使用 2.13）collective.autopermission 不再需要这项工作。

我能错过什么？

**编辑我**

我的[权限.zcml](http://pastebin.com/KA645ajR)

@Martijn Pieters：Zope 版本是：2.13.16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:35:30.907

我确实缺少命名空间和 AccessControl 的包含。这个 permissions.zcml 完成了这项工作。

```
<configure
xmlns="http://namespaces.zope.org/zope"
xmlns:meta="http://namespaces.zope.org/meta"
xmlns:browser="http://namespaces.zope.org/browser"
xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
i18n_domain="dotted.name">

<includeDependencies package="." />
<include package="AccessControl" file="meta.zcml" />
<include package="Products.CMFCore" file="permissions.zcml"/>    

 </configure> 
```

# joomla - 在 k2 类别页面上显示模块，但不在项目页面中

> ID：12660182
> 
> 赞同：0
> 
> 时间：2012-09-30T09:30:24.110
> 
> 标签：joomla, joomla-k2

我正在尝试从 k2 项目页面隐藏一个模块。我有一个链接到 k2 类别的菜单，并且在 k2 类别页面上分配了模块。但我不想在链接的 k2 类别项目中显示模块。

如果你有任何想法，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T13:36:37.470

添加在您的 index.php 之上

```
<?php $view = $_REQUEST['view']; ?>
<?php $option = $_REQUEST['option']; ?> 
```

找到您的模块并添加选项并查看

```
<?php if ($this->countModules( 'your_mod_position' ) && $option=='com_k2' && $view=='itemlist') : ?>
        <jdoc:include type="modules" name="your_mod_position" />
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T12:16:48.283

以 Joomla 管理员身份登录并转到模块管理器。找到模块并查看屏幕的左下角，您可以在其中指定您希望模块出现的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:35:20.843

如果 Edward 的解决方案不适用于您的方案，请尝试[Advanced Module Manager](http://extensions.joomla.org/extensions/style-a-design/modules-management/10307)。它将允许您从特定页面和/或其子页面分配或删除模块。它非常灵活。

# tomcat - 禁用 Restlet 日志记录

> ID：12660184
> 
> 赞同：0
> 
> 时间：2012-09-30T09:30:28.367
> 
> 标签：tomcat, restlet, restlet-2.0, catalina.out

如何禁用对 catalina.out 的 Restlet 日志记录，我尝试在 RestletApplication 中将 Logger“org.restlet”级别设置为 SEVERE，但没有成功。

```
static {
    // Install logging bridge (JUL -> LOG4J)
    SLF4JBridgeHandler.install();

    Logger logger = Logger.getLogger("org.restlet");
    for (Handler handler : logger.getParent().getHandlers()) {
        // Find the console handler
        if (handler.getClass().equals(java.util.logging.ConsoleHandler.class)) {
            handler.setLevel(Level.SEVERE);
        }
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:41:28.553

这可以通过在 JDK 级别、tomcat 级别甚至 webapp 级别配置 logging.properties 文件来完成。

将 logging.properties 中的 ConsoleHandler 级别增加到默认 INFO 级别以外的级别将禁用 restlet 日志。

问候。

# mysql - 尝试添加约束时出现mysql错误＃1452

> ID：12660189
> 
> 赞同：0
> 
> 时间：2012-09-30T09:31:18.137
> 
> 标签：mysql, sql, database

> **可能重复：**
> [尝试添加多个外键时出现在 sql 中的错误](https://stackoverflow.com/questions/12657166/error-appears-in-sql-when-trying-to-add-multiple-foreign-keys)

我正在尝试更改表，以便可以在 mysql 数据库中添加外键约束：

```
ALTER TABLE  `Question` ADD CONSTRAINT `FK_question` FOREIGN KEY (`QuestionId`)
REFERENCES `Image_Question` (`QuestionId`) ON DELETE CASCADE ; 
```

问题是它给了我这个错误：

> 1452 - 无法添加或更新子行：外键约束失败（`mobile_app`.
> 
> '#sql-4517_15241'>，约束外`FK_question`键（`QuestionId`）引用`Image_Question`（`QuestionId`）删除级联）

这个错误实际上是什么意思，为了解决这个问题，我可能需要采取哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:35:16.993

恐怕`Image_Question.QuestionId`不是唯一的。而且看起来 FK 应该反过来，从`Image_Question`到`Question`

# android - 在 Andengine 中旋转图像

> ID：12660190
> 
> 赞同：4
> 
> 时间：2012-09-30T09:31:45.943
> 
> 标签：android, andengine

假设有错误从外部进入屏幕。为此，我们需要有 4 个坐标（StartX、StartY、TargetX、TargetY）。如何将错误旋转到适当的方向？我已经搞砸了几个小时，一直无法弄清楚这部分。所以错误进入屏幕但它没有面向正确的方向。（四个坐标是随机数）。

我正在计算我在学校学到的线的梯度：

```
int deltaY = TargetY - StartY;
int deltaX = TargetX - StartX;
float gradient = (float)deltaY / (float)deltaX; 
```

然后是旋转 bug 的角度：

```
float angle = (float) (Math.atan(gradient) * 180 / PI); 
```

然后是旋转和移动修改器：

```
registerEntityModifier(new RotationModifier(0.3f, 0, angle) {
    @Override
    protected void onModifierFinished(IEntity pItem) {
        super.onModifierFinished(pItem);

        registerEntityModifier(new MoveModifier(0.8f, StartX, TargetX, StartY, TargetY) {
            @Override
            protected void onModifierFinished(IEntity pItem) {
                super.onModifierFinished(pItem);
            }
        });
    }
}); 
```

解决方案更复杂，因为在一定梯度的线上，错误可以来自两个方向，因此它可以面向两个方向。我知道 1/2 的梯度意味着 26.56 度，在 AndEngine 坐标系中它意味着 -26.56 或 -206.56 度，具体取决于错误来自哪一侧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T09:04:07.880

尝试这样的事情：

```
float bugAngle = 180 + (float) Math.toDegrees(Math.atan2((targetY - bugSprite.getRotationCenterY() - startY), (targetX - bugSprite.getRotationCenterX() - startX)));
bugSprite.setRotation(bugAngle); 
```

请原谅长长的死亡线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T17:36:59.397

尝试更简单的：

```
float angle = getAngle(StartX, TargetX , StartY, TargetY );
YourSprite.setRotation((int) angle); 
```

布罗卡普：D

# java - 2个正数相乘得出负数

> ID：12660200
> 
> 赞同：0
> 
> 时间：2012-09-30T09:33:18.147
> 
> 标签：java, int, bloom-filter

> **可能重复：**
> [Java 如何处理整数下溢和上溢以及如何检查？](https://stackoverflow.com/questions/3001836/how-does-java-handle-integer-underflows-and-overflows-and-how-would-you-check-fo)
> [两个 int 的乘法得到否定](https://stackoverflow.com/questions/6050796/multiplication-of-two-ints-gets-negativ)

我的程序是布隆过滤器的实现。但是，当我将哈希函数结果存储在位数组中时，该函数（`form f(i) = (a*i + b) % m`其中 a、b、i、m 都是正整数）给了我一个否定的结果。问题似乎在于 a*i 的计算结果为负。

忽略代码中的打印语句；那些是用于调试的。基本上，这段代码中 temp 的值是负数，所以我得到一个`ArrayOutOfBoundsException`.

`m`是位数组长度，`z`是正在使用的散列函数的数量，`S`是作为布隆过滤器成员的值的集合，并`H`存储散列函数 f1、f2、...、fz 的 a 和 b 的值。

```
public static int[] makeBitArray(int m, int z, ArrayList<Integer> S, int[] H)
{
    int[] C = new int[m];
    for (int i = 0; i < z; i++)
    {
        for (int q = 0; q < S.size() ; q++)
        {
            System.out.println(H[2*i]);
            int temp = S.get(q)*(H[2*i]);
            System.out.println(temp);
            System.out.println(S.get(q));
            System.out.println(H[2*i + 1]);
            System.out.println(m);
            int t = ((H[2*i]*S.get(q)) + H[2*i + 1])%m;
            System.out.println(t);
            C[t] = 1;
        }
    }
    return C;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:36:51.853

取决于数字有多大`m`，`z`使用[`long`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html). 如果您需要更大的数字，请考虑诸如[`BigInteger`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:36:29.313

使用`long`. （[http://en.wikipedia.org/wiki/Integer_overflow](http://en.wikipedia.org/wiki/Integer_overflow)）

# php - Laravel - 每个功能都不需要公共布局

> ID：12660201
> 
> 赞同：0
> 
> 时间：2012-09-30T09:33:36.053
> 
> 标签：php, laravel

我最近才开始使用 Laravel。到目前为止很棒的框架！不过我有一个问题。

我正在使用这样的布局模板： `public $layout = 'layouts.private';`

这是在我的 Base_Controller 中设置的：

```
public function __construct(){

    //Styles
    Asset::add('reset', 'css/reset.css');
    Asset::add('main', 'css/main.css');

    //Scripts
    Asset::add('jQuery', 'http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js');

    //Switch layout template according to the users auth credentials.
    if (Auth::check()) {
        $this -> layout = 'layouts.private';
    } else {
        $this -> layout = 'layouts.public';
    }

    parent::__construct();

} 
```

但是，当我尝试访问不应该调用任何视图的不同控制器中的函数时，我现在得到一个错误异常，即当用户要登录时：

```
class Login_Controller extends Base_Controller {

public $restful = true;

public function post_index()
{

    $user = new User();
    $credentials = array('username' => Input::get('email'), 'password' => Input::get('password'));

    if (Auth::attempt($credentials))
    {

    } else {

    }

} 
```

}

我得到的错误是我没有在我的公共 $layout 中设置不同变量的内容。但是由于这个函数不需要视图，我如何告诉 Laravel 不要在这个函数中包含布局？

我自己的最佳解决方案（不知道这是否是一个坏方法？）是`unset($this -> layout);`从函数`post_index()`...

总结一下我的问题：我如何告诉 Laravel 不要包含`public $layout`在不需要视图的某些功能中？

预先感谢，菲舍尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:53:36.007

您需要设置`$this->layout = null`不想呈现视图的任何功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:58:03.937

如果不需要视图，那么它应该是重定向。您的登录方法还发生了什么？

您应该做的是在 GET 登录页面上显示登录表单。此页面发布到您进行验证和身份验证的 POST 登录页面。无论在身份验证级别发生什么，用户都应该被重定向回 GET 请求，在该请求中将显示另一个视图。如果他们失败或他们的控制面板/主页，这将再次成为登录表单。

这是一种称为[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)的 Web 开发模式，应该在大多数情况下应用。我想不出你会应用它的情况。

在您的这种方法中，不需要视图，但您仍应照此进行重定向。

```
return Redirect::to('wherever'); 
```

请记住，您必须**返回**重定向，否则 Laravel 会假定您想使用您的布局作为响应。

# javascript - ActiveX 不会从服务器运行

> ID：12660203
> 
> 赞同：1
> 
> 时间：2012-09-30T09:34:10.203
> 
> 标签：javascript, activex

我有一个 MFC activeX 可以从磁盘正常运行，但是当我将它放在服务器上时出现错误。客户端：WIN7机器服务器：运行apache的Ubunto

HTML和错误如下，请指教。10xs，那鸿

HTML：

```
<html>
<HEAD>
<TITLE>myFirstOCX.CAB</TITLE>
<script type="text/javascript" FOR="window">
function fn()
{
     try{
    document.all('Ctrl1').AboutBox();//error: object doesn't support propert
                                                  //or method AboutBox() 
        //OR
        var obj = new ActiveXObject ("activex.activexCtrl");
        obj.AboutBox ();//error: Automation server can't create object
       }

     catch (ex) { alert("Error: "  + ex.message); }

}
</script>
</HEAD>
<body bgcolor=lightblue >
<TABLE BORDER>
<TR>
<TD><OBJECT
 CLASSID="CLSID:E228C560-FA68-48E6-850F-B1167515C920"
 CODEBASE="./nsip.CAB#version=1,0,0,1"
 ID="Ctrl1"
 name="Ctrl1">
 </OBJECT>
 </TD>
 </TR>
 <TR>
 <TD ALIGN="CENTER">
  <INPUT TYPE=BUTTON VALUE="Click Me" onclick="fn()" >
 </TD>     </TR>      </TABLE> 
 <INPUT TYPE=TEXT ID="ConnectionString" VALUE="" >
 </body>
  </html> 
```

* * *

inf 文件 [版本] ; 版本签名（NT 和 Win95 相同）不删除 signature="$CHICAGO$" AdvancedINF=2.0

```
[Add.Code]
nsip_ax_10.ocx=nsip_ax_10.ocx
nsip_ax_10.inf=nsip_ax_10.inf

[nsip_ax_10.ocx]
file=thiscab
clsid={E228C560-FA68-48E6-850F-B1167515C920}
RegisterServer=yes
FileVersion=1,0,0,1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:48:52.813

URI 使用`/`字符，而本地 Windows 文件系统使用`\`字符。

检查 Web 服务器的错误和访问日志通常是个好主意。您应该已经看到那里报告的 404 错误。

（您可能会遇到与不同安全区域相关的其他问题，但这是您会偶然发现的第一个问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:11:09.710

您可能需要在您的服务器（apache？）上为 .cab 文件设置 mime 类型，检查以下内容以设置正确的 mime 类型：

[http://en.wikipedia.org/wiki/Cabinet_(file_format](http://en.wikipedia.org/wiki/Cabinet_(file_format) )

# objective-c - requestAccessToEntity iOS6- 向后兼容性 - EKEventStore

> ID：12660206
> 
> 赞同：3
> 
> 时间：2012-09-30T09:34:43.377
> 
> 标签：objective-c, ios, ios5, ios6

遵循 iOS6 eventKit 和新的隐私设置，我正在使用以下代码 - 在 iOS6 设备上运行良好。

不过，我希望相同的代码也适用于 iOS 5.x 的设备，并且我不希望两次编写“相同的代码” - 似乎是错误的。

任何人都可以提供**优雅的解决方案**吗？

```
 EKEventStore *eventStore = [[EKEventStore alloc] init];
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

// some code 

}]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T11:00:49.193

我正在使用这个：

```
void (^addEventBlock)();

addEventBlock = ^
{
    NSLog(@"Hi!");
};

EKEventStore *eventStore = [[UpdateManager sharedUpdateManager] eventStore];

if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if (granted)
         {   
             addEventBlock();
         }
         else
         {
             NSLog(@"Not granted");
         }
     }];
}
else
{
    addEventBlock();
} 
```

我认为这应该减少代码重复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T12:05:14.353

如果您在带有 EKEventEditViewController 的 modalviewcontroller 中显示事件，iOS 会自动向您显示一个视图，说明如果权限被拒绝该怎么办。所以，我这样做：

在 viewDidLoad 中：

```
eventStore = [[EKEventStore alloc] init]; 
```

在用于添加事件的方法中：

```
if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    __block typeof (self) weakSelf = self; // replace __block with __weak if you are using ARC
    [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if (granted)
         {   
             [weakSelf performSelectorOnMainThread:@selector(addEventToCalendar) withObject:nil waitUntilDone:YES];
         }
         else
         {
             NSLog(@"Not granted");
         }
     }];
}
else
{
    [self addEventToCalendar];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T09:59:47.153

我有一个 EventUtil.m 文件

```
+(void)proxyForIOS6EventKitToCallFunction:(SEL)function WithViewController:(UIViewController*)viewController {
    #pragma clang diagnostic push
    #pragma clang diagnostic ignored "-Warc-performSelector-leaks"
    AppDelegate *app = (AppDelegate*)[[UIApplication sharedApplication] delegate];
    if([app.eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
        // For iOS 6
        MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:viewController.view animated:YES];
        hud.labelText = @"";
        //invoke requestAccessToEntityType...
        [app.eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
            //Handle the response here…
            //Note: If you prompt the user, make sure to call the main thread
            if (granted == YES) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    [viewController performSelector:function];
                });
            }
        }];
    }
    else {
        [viewController performSelector:function];
    }
    #pragma clang diagnostic pop
} 
```

在要访问日历的视图控制器中，我导入 EventUtil.h 文件并调用此函数：

```
[EventUtil proxyForIOS6EventKitToCallFunction:@selector(displayModifyCalendarAlertView) WithViewController:self]; 
```

displayModifyCalendarAlertView 是我要在授予日历权限时调用的函数（iOS6 或 iOS < 6）。

# java - 尝试减少 Java 游戏中的内存分配 - 用于迭代器

> ID：12660208
> 
> 赞同：2
> 
> 时间：2012-09-30T09:35:05.727
> 
> 标签：java, android, proguard

由于垃圾收集，我的游戏有时会出现打嗝/丢帧。所以我试图通过删除不必要的分配来减少这种情况。

在 Eclipse 中使用分配跟踪器，我看到我的代码如下：

```
for (IGameObject obj : mObjects) {
  //stuff
} 
```

正在分配一个迭代器：

```
java.util.ArrayList$ArrayListIterator   24 bytes    java.util.ArrayList iterator 
```

我可以轻松更改所有发生这种情况的地方，因为 mObjects 是`ArrayList`.

只是出于兴趣，proguard 或 jit 会以某种方式将其优化为基本`for`循环吗？看起来很遗憾，我必须让我的代码更冗长以避免这种分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:19:49.880

好吧，正如人们所说，除非确实存在问题，否则不要优化，但总有：

```
int sz = mObjects.size();
IGameObject gameObject = null;
for (int i=0;i<sz;i++) {
    gameObject = mObjects.get(i);
} 
```

在这种情况下，您只是按索引循环。对于 ArrayList 这非常有效（从速度的角度来看，可能与迭代器一样有效）。但是，如果您在某个时候放入 LinkedList，那么对于大型列表来说，它会变得很糟糕，因为 .get(index) 对于 LinkedList 来说是非常无能的。

除非你真的有内存问题，否则我不会担心额外的 24 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:14:05.233

控制内存消耗的最佳方法是自己和在基本结构中进行分配。

例如，您可以将 ArrayList mObjects 转换为一个简单的数组`IGameObject[] mObjects = new IGameObject[MAX_GAME_OBJECTS];`（您应该知道/计算您的游戏可以处理的最大对象数是多少）。此外，您应该重新使用这些对象。您可以保留一个数组`boolean[] isObjAlive = new boolean[MAX_GAME_OBJECTS];`（与 mObjects 相同的维度），这将有助于首先了解您不再显示哪些对象，其次，如果该对象可重用：

```
 for(i=0;i<MAX_GAME_OBJECTS;i++){
    if(isObjAlive[i]){
        // draw the object or anything else...
    }
 } 
```

重用：

```
 for(i=0;i<MAX_GAME_OBJECTS;i++){
    if( ! isObjAlive[i]){
        // use the setters to customize your object for the new role...
    }
 } 
```

# r - 对于除当前级别之外的所有级别的每个级别的因子汇总值

> ID：12660211
> 
> 赞同：3
> 
> 时间：2012-09-30T09:35:18.780
> 
> 标签：r, aggregate, data.table, plyr

对于每个级别的因素，我需要提取除当前数据之外的所有 data.frame 子集的聚合值。例如，有几个受试者在几天内执行反应时间任务，我需要计算所有受试者和所有天的平均反应时间，但不包括计算平均值的受试者。目前，我这样做：

```
 library(lme4)
 ddply(sleepstudy, .(Subject, Days), summarise, 
       avg_rt = mean(sleepstudy[sleepstudy$Subject != Subject &
                   sleepstudy$Days == Days,"Reaction"]), .progress="text") 
```

它适用于小型数据集，但对于大型数据集可能会非常慢。有没有办法更快地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T12:12:08.213

```
#create big dataset
n <- 1e4
set.seed(1)
sleepstudy <- data.frame(Reaction=rnorm(n),Subject=1:4,Days=sort(rep((1:(n/4)),4)))

library(plyr)
system.time(
  res <- ddply(sleepstudy, .(Subject, Days), summarise, 
               avg_rt = mean(sleepstudy[sleepstudy$Subject != Subject &
                 sleepstudy$Days == Days,"Reaction"]))
)
#User      System      elapsed 
#6.532       0.013       6.556  

#use data.table for big datasets
library(data.table)

dt<- as.data.table(sleepstudy)
system.time(
 {dt[,avg_rt:=mean(Reaction),by=Days];
  dt[,n:=.N,by=Days];
  dt[,avg_rt:=(avg_rt*n-Reaction)/(n-1)]}
)
#User      System      elapsed 
#0.005       0.001       0.005 

#test if results are equal
dt2 <- as.data.table(res)
setkey(dt2,Subject,Days)
setkey(dt,Subject,Days)
all.equal(dt[,avg_rt],dt2[,avg_rt])
#[1] TRUE 
```

对于非常大的数据集，速度增益应该更加明显。我只是无法与更大的数据集进行比较，因为`ddply`它太慢了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:58:00.650

`lapply`使用and可能更快`aggregate`：

```
do.call("rbind", (lapply(unique(sleepstudy$Subject),
                         function(x)
                           cbind(Subject = x,
                                 aggregate(Reaction ~ Days,
                                           subset(sleepstudy, Subject != x),
                                           mean))))) 
```

**更新：**

我比较了这两个命令，`system.time`看起来原来的速度较慢。

```
library(lme4)
library(plyr)

system.time(
ddply(sleepstudy, .(Subject, Days), summarise, 
      avg_rt = mean(sleepstudy[sleepstudy$Subject != Subject &
                    sleepstudy$Days == Days,"Reaction"]))
)

   # user  system elapsed 
   # 0.17    0.00    0.22 

system.time(
do.call("rbind", (lapply(unique(sleepstudy$Subject),
                         function(x) 
                           cbind(Subject = x,
                                 aggregate(Reaction ~ Days,
                                           subset(sleepstudy, Subject != x),
                                           mean)))))
)

   # user  system elapsed 
   # 0.12    0.00    0.12 
```

# python - Python .app 不会像应有的那样读取 .txt 文件

> ID：12660213
> 
> 赞同：0
> 
> 时间：2012-09-30T09:36:03.983
> 
> 标签：python, file, .app

这个问题与这个问题有关：[Python app which reads and writes into its current working directory as a .app/exe](https://stackoverflow.com/questions/12519610/python-app-which-reads-and-writes-into-its-current-working-directory-as-a-app-e)

我得到了 .txt 文件的路径，但是现在当我尝试打开它并读取内容时，它似乎没有正确提取数据。

以下是相关代码：

```
def getLines( filename ):
    path = Cocoa.NSBundle.mainBundle().bundlePath()

    real_path = path[0: len(path) - 8]

    print real_path

    f = open(real_path + filename, 'r') # open the file as an object

    if len(f.read()) <= 0:
        lines = {}                  # list to hold lines in the file
        for line in f.readlines():  # loop through the lines
            line = line.replace( "\r", "    " )
            line = line.replace( "\t", "    " )
            lines = line.split("    ")      # segment the columns using tabs as a base
        f.close()                   # close the file object

        return lines

lines = getLines( "raw.txt" )
for index, item in enumerate( lines ):        # iterate through lines
    # ... 
```

这些是我得到的错误：

*   30/09/2012 10:28:49.103 [0x0-0x4e04e].org.pythonmac.unspecified.main: for index, item in enumerate(lines): # 遍历行
*   30/09/2012 10:28:49.103 [0x0-0x4e04e].org.pythonmac.unspecified.main: TypeError: 'NoneType' 对象不可迭代

我有点理解这些错误的含义，但是我不确定为什么要标记它们，因为如果我使用它而不是以 .app 形式运行我的脚本，它就不会出现这些错误并且可以很好地提取数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T09:43:30.910

如果不重置读取指针，您将无法读取文件两次。此外，您的代码会主动*阻止*您的文件被正确读取。

您的代码当前执行此操作：

```
f= open(real_path + filename, 'r')  # open the file as an object

if len(f.read()) <= 0:
    lines = {}                  # list to hold lines in the file
    for line in f.readlines():  # loop through the lines 
```

该`.read()`语句可以一次将整个文件读入内存，从而导致读指针移动到末尾。循环`.readlines()`不会返回任何内容。

但是，如果您的`.read()`调用*没有读取任何内容*，您也只能运行该代码。您基本上是在说：如果文件为空，请阅读这些行，否则不要阅读任何内容。

最后，这意味着您的`getlines()`函数总是返回`None`，后来导致您看到的错误。

完全松开`if len(f.read()) <= 0:`：

```
f= open(real_path + filename, 'r')  # open the file as an object

lines = {}                  # list to hold lines in the file
for line in f.readlines():  # loop through the lines 
```

然后，您无需做任何事情，`lines = {}`因为对于文件中的每一行，您都*替换*了`lines`变量：`lines = line.split(" ")`。您可能打算改为创建一个列表，然后附加：

```
f= open(real_path + filename, 'r')  # open the file as an object

lines = []              # list to hold lines in the file
for line in f.readlines():  # loop through the lines
    # process line
    lines.append(line.split("    ")) 
```

另一个提示：`real_path = path[0: len(path) - 8]`可以重写为`real_path = path[:-8]`. 不过，您可能想查看[`os.path`模块](http://docs.python.org/library/os.path.html)来操纵您的路径；我怀疑`os.path.split()`那里的电话会更好，更可靠地为您服务。

# gwt - 使用 Objectify 的 GWT 应用程序出现“AutoBean 已冻结”异常

> ID：12660219
> 
> 赞同：0
> 
> 时间：2012-09-30T09:36:59.940
> 
> 标签：gwt, google-cloud-datastore, requestfactory, objectify

我的 GWT 应用程序包括通过 RequestFactory + Objectify (GAE Datastore) 的持久性。下面的代码有效（数据已成功存储在 GAE 中），但出现以下异常。有任何想法吗？谢谢

```
10:22:56.772 [ERROR] [dialective] Uncaught exception escaped

java.lang.IllegalStateException: The AutoBean has been frozen
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.checkFrozen(AbstractAutoBean.java:195)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.setProperty(AbstractAutoBean.java:270)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)
    at com.google.web.bindery.autobean.gwt.client.impl.ClientPropertyContext$Setter$.call$(ClientPropertyContext.java)
    at com.google.web.bindery.autobean.gwt.client.impl.ClientPropertyContext.set(ClientPropertyContext.java:137)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$3.visitValueProperty(AbstractRequestContext.java:910)
    at com.gw.dialective.shared.model.DiagramProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.traverseProperties(DiagramProxyAutoBean_com_google_web_bindery_requestfactory_shared_impl_EntityProxyCategory_com_google_web_bindery_requestfactory_shared_impl_ValueProxyCategory_com_google_web_bindery_requestfactory_shared_impl_BaseProxyCategory.java:222)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.traverse(AbstractAutoBean.java:166)
    at com.google.web.bindery.autobean.shared.impl.AbstractAutoBean.accept(AbstractAutoBean.java:101)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.processReturnOperation(AbstractRequestContext.java:879)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.processReturnOperations(AbstractRequestContext.java:1215)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext.access$7(AbstractRequestContext.java:1185)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$StandardPayloadDialect.processPayload(AbstractRequestContext.java:347)
    at com.google.web.bindery.requestfactory.shared.impl.AbstractRequestContext$5.onTransportSuccess(AbstractRequestContext.java:1108)
    at com.google.web.bindery.requestfactory.gwt.client.DefaultRequestTransport$1.onResponseReceived(DefaultRequestTransport.java:136)
    at com.google.gwt.http.client.Request.fireOnResponseReceived(Request.java:287)
    at com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:337)
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:218)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:269)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91)
    at com.google.gwt.core.client.impl.Impl.apply(Impl.java)
    at com.google.gwt.core.client.impl.Impl.entry0(Impl.java:213)
    at sun.reflect.GeneratedMethodAccessor34.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor.java:103)
    at com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71)
    at com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172)
    at com.google.gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:292)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:546)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:363)
    at java.lang.Thread.run(Unknown Source) 
```

**MyApp.java**

```
public void update(int index, DiagramBox object, String value) {                            
            object.setDescription(value);
            sendUpdateDiagramBoxEvent(index, BasicConstants.editableTableFields.DESCRIPTION, value); // send event to the View
            DiagramRequest diagramRequest = requestFactory.diagramRequest();
            DiagramProxy newDiagramProxy = diagramRequest.create(DiagramProxy.class); // Create new diagram entity
            Date date = new Date();
            newDiagramProxy.set_id("DUEN39AS89AS");
            newDiagramProxy.setDateCreated(date);
            newDiagramProxy.setDateEdited(date);
            diagramRequest.saveAndReturn(newDiagramProxy).fire(); 
          }
        }); 
```

**DiagramRequest.java**

```
@Service(value=DiagramDao.class, locator=DaoServiceLocator.class)
public interface DiagramRequest extends RequestContext {
    Request<DiagramProxy> saveAndReturn(DiagramProxy diagram);
} 
```

**DiagramDao.java**

```
public class DiagramDao extends ObjectifyDao<Diagram>{

    public Diagram saveAndReturn(Diagram diagram)
    {
        Key<Diagram> key = this.put(diagram);
        try
        {
            return this.get(key);
        }
        catch (Exception e)
        {
            throw new RuntimeException(e);
        }
    }
} 
```

**DaoServiceLocator.java**

```
public class DaoServiceLocator implements ServiceLocator {
    public Object getInstance(Class<?> clazz) {
        try {
            return clazz.newInstance();
        } catch (InstantiationException e) {
            throw new RuntimeException(e);
        } catch (IllegalAccessException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:44:28.567

如果服务器返回与已接收（由客户端发送）但作为不同实例相同的实体，则可能发生这种情况。

在您的情况下，`saveAndReturn`如果`this.get(key)`返回与作为参数接收的对象不同的对象，那么您将遇到该问题。你最好`return diagram`在这里。

请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=7341](http://code.google.com/p/google-web-toolkit/issues/detail?id=7341)

# c - 是什么导致了这个 strcpy 段错误？

> ID：12660221
> 
> 赞同：2
> 
> 时间：2012-09-30T09:37:20.143
> 
> 标签：c, malloc, strcpy

这是我的代码，它在这里出错了`strcpy(pSrcString,"muppet");`事实上，每当我使用 strcpy 时它都会出现。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
int main(void)
{

char *pSrcString = NULL;
char *pDstString = NULL;

/* muppet == 6, so +1 for '\0' */
if ((pSrcString = malloc(7) == NULL))
{
    printf("pSrcString malloc error\n");
    return EXIT_FAILURE;
}

if ((pDstString = malloc(7) == NULL))
{
    printf("pDstString malloc error\n");
    return EXIT_FAILURE;
}

strcpy(pSrcString,"muppet");

strcpy(pDstString,pSrcString);

printf("pSrcString= %s\n",pSrcString);
printf("pDstString = %s\n",pDstString);
free(pSrcString);
free(pDstString);

return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T09:38:58.950

你把括号放错了`(pSrcString = malloc(7) == NULL)`。这样，您首先检查`malloc(7)`against的结果`NULL`（结果是 false 或`0`），然后将其分配给`pSrcString`. 基本上：

```
pSrcString = 0; 
```

当然，这不会给你一个有效的记忆来让你`strcpy`写东西。试试这个：

```
(pSrcString = malloc(7)) == NULL 
```

同样对于`pDstString`.

另外，如果您只想拥有字符串的副本，则可以使用该[`strdup`](http://linux.die.net/man/3/strdup)函数。这会为您分配内存并负责计算长度本身：

```
pSrcString = strdup("muppet"); 
```

# model-view-controller - MVC 模式：使用最佳实践

> ID：12660224
> 
> 赞同：0
> 
> 时间：2012-09-30T09:37:52.650
> 
> 标签：model-view-controller

我正在努力尊重 MVC 模式。它大大简化了开发人员（或开发人员）的生活。我想知道的是如何一次加载多个部分。

为了清楚起见，我将以待办事项列表为例（这几天很常用）。假设有项目 -> 里程碑 -> 任务。

我们需要的：

*   全部获取 - 具有所有里程碑的所有项目以及嵌套 json 编码数组中的所有任务。
*   只得到项目
*   只获得里程碑
*   只得到任务

对于最后三个，我们可以有单独的控制器来为我们提供相应的数据。当我们尝试在嵌套的 json 编码数组中“全部获取”时，问题就出现了。

处理这个问题的最佳方法可能是什么？

我想到了一些可能性：
- 将项目、里程碑和任务生成器移动到辅助类中 - 这意味着我们从各个控制器调用它们，并在需要全部获取它们时调用它们
- 从项目的角度来看，调用（每个项目的）里程碑的控制器/视图[依次调用（每个里程碑的）任务的控制器/视图]。这可能看起来像是 1 中 3 个请求的模拟。

动机来自这样一个事实：虽然我可以获取所有项目，然后是每个里程碑的里程碑，然后是每个里程碑的任务，但这需要很多请求。如果我们可以一次完成所有调用，那么获取数据所需的时间就会大大减少，更不用说在一次请求中数据更有条理了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:50:30.353

您肯定需要将数据访问问题分离到可以从不同控制器访问的逻辑层中。

如果您愿意走 DDD 路径，那么识别您的域对象（项目、任务等）、聚合根然后为数据访问构建存储库是有意义的。您可以在不同的控制器中重用存储库（例如 ProjectRepository、TaskRepository），并且存储库本身将成为重用单元，允许您使用相同的接口从多个控制器获取数据。如果您需要有效地从同一个控制器的多个存储库中获取数据，您还可以利用一个工作单元。

如果您不走 DDD 路径，您可以使用 ActiveRecord 模式（如在 Ruby on Rails 中），它将是数据库记录的内存表示。如果您使用的是关系 SQL 数据库，这可能很容易实现。

我认为您的项目是聚合根，这意味着您将只有一个存储库（ProjectRepository）。该存储库将具有获取所有项目并获取所有相关数据（里程碑等）的操作，这将是一个尽可能接近数据源（存储过程？）优化的快速操作。在控制器本身上，您将使用检索到的对象并将其序列化/编码为 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T00:30:09.883

从浏览器发出 3 个独立的 JSON 请求。不用担心。如果您打开 Firebug，然后打开 mail.google.com - 您会看到超过 40 个请求。

# android - 使用 facebook android sso 时出现白色空白屏幕

> ID：12660230
> 
> 赞同：1
> 
> 时间：2012-09-30T09:38:55.783
> 
> 标签：android, facebook-android-sdk

我正在我的应用程序中实现 facebook Android SSO。它适用于未安装 facebook 应用程序的设备。但是，对于安装了 fb 应用程序的设备，进度对话框后会出现空白屏幕。 ![facebook sso 白屏](../Images/9ca5dbe53c2fd168ee4d7978ed5e4754.png)

应用程序登录永远不会出现在 facebook android 指南上。（[https://developers.facebook.com/attachment/AndroidSSO_basicperm.png](https://stackoverflow.com/questions/4388992/key-hash-for-android-facebook-app)）我使用来自 fb 指南的相同代码作为演示。我已经生成了如图所示的密钥哈希。请帮忙。

* * *

编辑：我在使用 eclipse 用新的密钥库签名后生成了一个新的密钥哈希。使用该 keyhash 它工作正常，这意味着从 android 调试生成的 keyhash 存在问题。我正在生成此处回答的调试[密钥哈希（Android-Facebook 应用程序的密钥哈希](https://stackoverflow.com/questions/4388992/key-hash-for-android-facebook-app)）。但是 sso 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:50:10.360

据我了解，在已安装 Facebook 应用程序的手机上使用 SSO 存在错误。尽管它声称已修复，但我也遇到了一些问题。对我来说，强制登录对话框有效：

```
fb.authorize(*YourActivity*.this, new String[] {"publish_stream"}, Facebook.FORCE_DIALOG_AUTH, new DialogListener() { 
```

此外，您可以将访问令牌和过期令牌保存在 sharedPreferences 中，以防止用户每次都必须登录。

如果这不起作用，请发布您正在使用的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T09:20:21.527

创建哈希时需要使用密码“android”

# c - printf 参数不足

> ID：12660232
> 
> 赞同：1
> 
> 时间：2012-09-30T09:39:04.927
> 
> 标签：c, printf

我的问题是关于缺少参数的 printf 之后的行为：

```
printf("%s blah blah %d", int); // integer was given as argument (and not int written) 
```

我已经知道，如果格式的参数不足，则行为未定义。

问题是它是否为 printf 结果或整个程序未定义？

*   当 %s 尝试从未经授权的内存地址读取时，可能会发生崩溃。（发生在我身上）
*   printf 完成后 [long] 会发生崩溃吗？（打印一些垃圾字符串和一个整数）

* * *

**编辑：**

为了澄清，我不是在询问编译错误或警告，也不是在执行此行时程序崩溃。问题是这一行是否可以在该行已经执行后使程序随机崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:43:45.800

对于整个程序，它是未定义的。

事实上，在程序存在之前它是未定义的：编译器本身在存在文本时所做的事情是未定义的`printf("%s blah blah %d", int);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:46:47.957

基本上适用于整个程序。Printf 开始从堆栈中取出参数，在这种情况下，它会占用`int`太多的值。这通常类似于退货地址。因此，当 printf 返回时，它会返回堆栈中的下一个随机数。通常的结果——如果你幸运的话——是分段错误。

因为它将参数压入堆栈，所以它会弹出它们，所以它会尝试获取第`int`一个。

如果你*不*走运，它会找到一段可寻址的代码。这导致您的第二种情况，其中地址成为该随机字符散列的地址。现在它将尝试打印一个字符串，直到找到一个随机的 NUL 字符。

**更新**

正如 Joachim 所指出的，其细节由调用约定决定，所以让我们做一个明确的例子。当调用 printf 函数时，返回地址要么被先推送，要么最后被推送。我们假设它首先被推送（在通常的架构上更常见），所以这个调用将需要 PUSH 返回地址、格式字符串的 PUSH 地址、一个 int 值——比如说 42。这给了我们这个堆栈：

```
RTN ADDR
ADDR OF STRING
42 
```

并使堆栈指针 SP 指向堆栈上的下一个位置。

现在 printf 开始解释字符串。它查找`int`参数的地址，并确定它是 SP-1。所以字符串参数的地址必须是 SP-2 ... 但这是格式字符串的地址，因为没有字符串参数。然后它在寻找格式字符串的地址时，它想找到SP-3，但那是返回地址，一个可执行代码的地址。在大多数机器上，这应该会导致分段错误。

如果您查看调用约定的其他选项，您会发现它们中的每一个都在看*一些*错误的东西，因为无论如何，printf 认为它需要引用堆栈外的三个东西，而不是它拥有的两个。

# android - ListView 解析波斯语、希腊语、阿拉伯语或 UTF-8 xml

> ID：12660235
> 
> 赞同：1
> 
> 时间：2012-09-30T09:39:46.897
> 
> 标签：android, listview, xml-parsing

我使用了一个关于 listview 从互联网解析 xm 并使用 LasyAdapter 显示列表视图中的项目的[教程。](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)当我在 xml 中添加波斯字符（到子节点之一中）时，结果是列表视图中的一些框（在列表视图中显示文本之后）。xml 的格式也是 UTF-8。我也使用了字体（但没有用）。此外，当我在应用程序中输入 Pwesian 时，它显示正常，但无法显示从 xml 解析的 Persiann 内容。提前致谢。我用原始的 XMLparser 更新了帖子（这是问题所在）。

```
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

public Document getDomElement(String xml) {
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setCharacterStream(new StringReader(xml));
        doc = db.parse(is);

    } catch (ParserConfigurationException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (SAXException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    } catch (IOException e) {
        Log.e("Error: ", e.getMessage());
        return null;
    }

    return doc;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T21:55:22.217

我能找到答案。感谢@Serdak。他让我想起了读者。在 getXMLFromUrl 部分我应该更改：
`xml = EntityUtils.toString(httpEntity);`to`xml = EntityUtils.toString(httpEntity, "UTF-8");`
和 getDomElement 部分我应该更改：
`InputSource is = new InputSource(); is.setCharacterStream(new StringReader(xml));`to`InputSource is = new InputSource(new ByteArrayInputStream(xml.getBytes("UTF-8")));`
请注意，“url”和“xml”都是由主要活动调用并在 XMLparser.jave 中使用的字符串（其中包含 getXmlFromUrl( ) 和 getDomElement() )。
这些命令在主要活动中：
`XMLParser parser = new XMLParser(); String xml = parser.getXmlFromUrl(URL) ;Document doc = parser.getDomElement(xml);`
最好的问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T08:49:01.197

当XML 字符串包含**Unicode**字符（例如**波斯**字母）时， **StringReader**对象会产生异常。所以请直接将**InputStream**对象传递给**Document**对象 谢谢

 ******* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T09:45:13.600

您用来读取 Xml 值的阅读器可能未设置为 UTF-8，这就是导致编码问题的原因。

尝试将您的阅读器与这样的编码选项一起使用。

```
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream(), "UTF-8")); 
```******

# ffmpeg - 从 RTSP 流中抓取一系列帧

> ID：12660240
> 
> 赞同：0
> 
> 时间：2012-09-30T09:40:45.803
> 
> 标签：ffmpeg, rtsp

我正在寻找一种从 RTSP 流中连续抓取帧（如 jpg 格式）的方法。我偶然发现了 ffmpeg，但似乎从启动它到抓取第一帧之间的时间相当长。有没有什么好的工具可以做到这一点？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T09:58:33.287

我过去使用[gstreamer](http://gstreamer.freedesktop.org/)库从移动视频中提取帧

# ruby-on-rails-3 - 带有 Omniauth-Facebook 的 Rails 3.2 - 权限范围问题

> ID：12660247
> 
> 赞同：2
> 
> 时间：2012-09-30T09:42:15.567
> 
> 标签：ruby-on-rails-3, facebook-graph-api, authentication, ruby-on-rails-3.2, omniauth

我已经按照[Railscast 360](http://railscasts.com/episodes/360-facebook-authentication?view=asciicast)为我的 Rails 应用程序设置了 Omniauth-Facebook 身份验证。身份验证效果很好，但我让自己发疯，试图通过范围请求以获得额外的权限。我知道它们是可用的，因为我可以手动将范围请求输入 url。我已经尝试了一切并用尽了所有谷歌搜索。

正如 Railscast 评论中所建议的那样，我已将 Omniauth-Facebook gem 降级到 1.4.0，据我了解，这意味着范围不能作为 Omniauth 初始化程序的哈希传递，而是通过 javascript 传递。两者都不适合我，但与我根据 Railscast 运行咖啡脚本的评论不同，我已经尝试了各种位置的范围，但要么得到错误或不完整的结果......即只有电子邮件，没有 user_events 等。

我意识到这里没有代码，但它与 railscast 完全一样。

也遵循相同 Railscast 的任何人都可以就使用 1.4.1 解决问题提供任何建议，以便我可以从初始化程序传递范围哈希，或者在运行 1.4.0 时如何正确传递它。

提前致谢！

更新：我有点到了某个地方！但这并不完全正确。任何指针将不胜感激。

在我的 Omniauth 初始化程序中，我有：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'app_id', 'secret_id', {:scope => 'user_birthday,user_events,email'}
end 
```

（插入真实身份！）

然后，我似乎可以通过将单词范围放入咖啡脚本中的 FB.Init 来提出正确的请求：

```
jQuery ->
  $('body').prepend('<div id="fb-root"></div>')

  $.ajax
    url: "#{window.location.protocol}//connect.facebook.net/en_US/all.js"
    dataType: 'script'
    cache: true

window.fbAsyncInit = ->
  FB.init(appId: 'app_id', cookie: true, scope)

  $('#sign_in').click (e) ->
    e.preventDefault()
    FB.login (response) ->
       window.location = "/auth/facebook/callback"  if response.authResponse    

  $('#sign_out').click (e) ->
    FB.getLoginStatus (response) ->
      FB.logout() if response.authResponse
    true 
```

（再次在上面插入了真正的 appid）

但是，这会停止弹出窗口的工作，所以我很确定我错误地放置了范围。我看到的其他示例将它放在 FB.login 中，但我尝试放置在那里的尝试要么抛出错误，要么根本不起作用。

帮助！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T17:59:26.513

设法解决了这个问题。是咖啡脚本把我扔了。[http://coffeescript.org/](http://coffeescript.org/)上的 try coffeescript 工具非常有帮助。

范围的正确放置如下：

```
 $('#sign_in').click (e) ->
    e.preventDefault()
    FB.login ((response) ->
      window.location = '/auth/facebook/callback' if response.authResponse), scope: "email,user_events,user_location,user_birthday" 
```

希望这对其他人有所帮助。

# actionscript-3 - 如何在Flash相册中按下下一个按钮时重置计时器

> ID：12660252
> 
> 赞同：0
> 
> 时间：2012-09-30T09:43:05.307
> 
> 标签：actionscript-3, flash, photo-gallery

我正在使用 Flash Professional CS5 和高级相册模板（新建/模板/媒体播放/高级相册）。

我的专辑正在工作，但每当按下下一个或上一个按钮时，计时器都不会重置。计时器设置为 5 秒，如果我在计时器上还剩 2.5 秒时按下下一个按钮，则下一个图像仅显示 2.5 秒。

我是 Flash 和 Actionscript 3 的新手，但我找不到任何可以解决这个问题的东西，只有关于如何使用计时器类重置的一般信息。任何有关如何在不破坏整个代码的情况下重置该死的计时器的帮助将不胜感激。

```
import fl.data.DataProvider;
import fl.events.ListEvent;
import fl.transitions.*;
import fl.controls.*;

// USER CONFIG SETTINGS =====
var secondsDelay:Number = 20;
var autoStart:Boolean = true;
var transitionOn:Boolean = true; // true, false
var transitionType:String = "Fade"; // Blinds, Fade, Fly, Iris, Photo, PixelDissolve, Rotate, Squeeze, Wipe, Zoom, Random
var hardcodedXML:String="<photos><image title='Rank Badges'>image1.png</image><image title='How It Works'>image2.png</image><image title='First Steps'>image3.png</image><image title='Brain Crank'>image4.png</image><image title='Natural Friendship'>image5.png</image><image title='Fire Hazard'>image6.png</image><image title='I Got This'>image7.png</image><image title='Magic Act'>image8.png</image><image title='Replay'>image9.png</image><image title='Samaritan'>image10.png</image><image title='No Tag Backs'>image11.png</image></photos>";
// END USER CONFIG SETTINGS

// DECLARE VARIABLES AND OBJECTS =====
var imageList:XML = new XML();
var currentImageID:Number = 0;
var imageDP:DataProvider = new DataProvider();
var slideshowTimer:Timer = new Timer((secondsDelay*1000), 0);
// END DECLARATIONS

// CODE FOR HARDCODED XML =====
imageList = XML(hardcodedXML);
fl_parseImageXML(imageList);
// END CODE FOR HARDCODED XML

// EVENTS =====
imageTiles.addEventListener(ListEvent.ITEM_CLICK, fl_tileClickHandler);
function fl_tileClickHandler(evt:ListEvent):void
{
    imageHolder.imageLoader.source = evt.item.source;
    currentImageID = evt.item.imgID;
}
playPauseToggle_mc.addEventListener(MouseEvent.CLICK, fl_togglePlayPause);
function fl_togglePlayPause(evt:MouseEvent):void
{
    if(playPauseToggle_mc.currentLabel == "play")
    {
        fl_startSlideShow();
        playPauseToggle_mc.gotoAndStop("pause");
    }
    else if(playPauseToggle_mc.currentLabel == "pause")
    {
        fl_pauseSlideShow();
        playPauseToggle_mc.gotoAndStop("play");
    }
}
next_btn.addEventListener(MouseEvent.CLICK, fl_nextButtonClick);
prev_btn.addEventListener(MouseEvent.CLICK, fl_prevButtonClick);
function fl_nextButtonClick(evt:MouseEvent):void
{
    fl_nextSlide();
}
function fl_prevButtonClick(evt:MouseEvent):void
{
    fl_prevSlide();
}
slideshowTimer.addEventListener(TimerEvent.TIMER, fl_slideShowNext);
function fl_slideShowNext(evt:TimerEvent):void
{
    fl_nextSlide();
}
// END EVENTS

// FUNCTIONS AND LOGIC =====
function fl_parseImageXML(imageXML:XML):void
{
    var imagesNodes:XMLList = imageXML.children();
    for(var i in imagesNodes)
    {
        var imgURL:String = imagesNodes[i];
        var imgTitle:String = imagesNodes[i].attribute("title");
        imageDP.addItem({label:imgTitle, source:imgURL, imgID:i});
    }
    imageTiles.dataProvider = imageDP;
    imageHolder.imageLoader.source = imageDP.getItemAt(currentImageID).source;
    title_txt.text = imageDP.getItemAt(currentImageID).label;
}
function fl_startSlideShow():void
{
    slideshowTimer.start();
}
function fl_pauseSlideShow():void
{
    slideshowTimer.stop();
}
function fl_nextSlide():void
{
    currentImageID++;
    if(currentImageID >= imageDP.length)
    {
        currentImageID = 0;
    }
    if(transitionOn == true)
    {
        fl_doTransition();
    }
    imageHolder.imageLoader.source = imageDP.getItemAt(currentImageID).source;
    title_txt.text = imageDP.getItemAt(currentImageID).label;
}
function fl_prevSlide():void
{
    currentImageID--;
    if(currentImageID < 0)
    {
        currentImageID = imageDP.length-1;
    }
    if(transitionOn == true)
    {
        fl_doTransition();
    }
    imageHolder.imageLoader.source = imageDP.getItemAt(currentImageID).source;
    title_txt.text = imageDP.getItemAt(currentImageID).label;
}
function fl_doTransition():void
{
    if(transitionType == "Blinds")
    {
        TransitionManager.start(imageHolder, {type:Blinds, direction:Transition.IN, duration:1});
    } else if (transitionType == "Fade")
    {
        TransitionManager.start(imageHolder, {type:Fade, direction:Transition.IN, duration:1});
    } else if (transitionType == "Fly")
    {
        TransitionManager.start(imageHolder, {type:Fly, direction:Transition.IN, duration:1});
    } else if (transitionType == "Iris")
    {
        TransitionManager.start(imageHolder, {type:Iris, direction:Transition.IN, duration:1});
    } else if (transitionType == "Photo")
    {
        TransitionManager.start(imageHolder, {type:Photo, direction:Transition.IN, duration:1});
    } else if (transitionType == "PixelDissolve")
    {
        TransitionManager.start(imageHolder, {type:PixelDissolve, direction:Transition.IN, duration:1});
    } else if (transitionType == "Rotate")
    {
        TransitionManager.start(imageHolder, {type:Rotate, direction:Transition.IN, duration:1});
    } else if (transitionType == "Squeeze")
    {
        TransitionManager.start(imageHolder, {type:Squeeze, direction:Transition.IN, duration:1});
    } else if (transitionType == "Wipe")
    {
        TransitionManager.start(imageHolder, {type:Wipe, direction:Transition.IN, duration:1});
    } else if (transitionType == "Zoom")
    {
        TransitionManager.start(imageHolder, {type:Zoom, direction:Transition.IN, duration:1});
    } else if (transitionType == "Random")
    {
        var randomNumber:Number = Math.round(Math.random()*9) + 1;
        switch (randomNumber) {
            case 1:
                TransitionManager.start(imageHolder, {type:Blinds, direction:Transition.IN, duration:0.25});
                break;
            case 2:
                TransitionManager.start(imageHolder, {type:Fade, direction:Transition.IN, duration:1});
                break;
            case 3:
                TransitionManager.start(imageHolder, {type:Fly, direction:Transition.IN, duration:0.25});
                break;
            case 4:
                TransitionManager.start(imageHolder, {type:Iris, direction:Transition.IN, duration:0.25});
                break;
            case 5:
                TransitionManager.start(imageHolder, {type:Photo, direction:Transition.IN, duration:0.25});
                break;
            case 6:
                TransitionManager.start(imageHolder, {type:PixelDissolve, direction:Transition.IN, duration:0.25});
                break;
            case 7:
                TransitionManager.start(imageHolder, {type:Rotate, direction:Transition.IN, duration:0.25});
                break;
            case 8:
                TransitionManager.start(imageHolder, {type:Squeeze, direction:Transition.IN, duration:0.25});
                break;
            case 9:
                TransitionManager.start(imageHolder, {type:Wipe, direction:Transition.IN, duration:0.25});
                break;
            case 10:
                TransitionManager.start(imageHolder, {type:Zoom, direction:Transition.IN, duration:0.25});
                break;
        }
    } else
    {
        trace("error - transitionType not recognized");
    }
}
if(autoStart == true)
{
   fl_startSlideShow();
   playPauseToggle_mc.gotoAndStop("pause");
}
// END FUNCTIONS AND LOGIC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:53:11.187

当`fl_nextSlide()`被调用时，您不会重置计时器。在`fl_nextSlide()`调用`slideshowTimer.reset()`中重置它，然后`slideshowTimer.start()`立即调用以重新启动它。

# cakephp - cakephp url 附加哈希键和随机字符

> ID：12660253
> 
> 赞同：0
> 
> 时间：2012-09-30T09:43:08.923
> 
> 标签：cakephp

在 CakePHP 中，我面临一个问题，即通过分页，任何随机键组合都将附加在哈希键之后。

例如 [http://stellenangebote25.de](http://stellenangebote25.de)

如果我点击分页链接，Hash Key + Key Combination 将被附加到链接

# entity-framework - Add-Migration 出错 - 错误的约束列名？

> ID：12660259
> 
> 赞同：0
> 
> 时间：2012-09-30T09:43:38.970
> 
> 标签：entity-framework, data-migration

我正在尝试通过

```
PM> Add-Migration
...
PM> Update-Database
... 
```

但我得到的只是一条错误消息，告诉我引用了无效的列。当您查看包含以下 Up() 方法的生成迁移时，就会清楚：

```
 public override void Up()
    {
        RenameColumn(table: "dbo.Bestelllistes", name: "Ersteller_Id", newName: "PodioUser_Id");
        AddColumn("dbo.Bestelllistes", "ErstelltDatum", c => c.DateTime(nullable: false));
        AddColumn("dbo.Bestelllistes", "ZuletztModifiziertDatum", c => c.DateTime(nullable: false));
        AddColumn("dbo.Bestelllistes", "ZuletztModifiziertDurch_Id", c => c.Int());
        AddForeignKey("dbo.Bestelllistes", "Ersteller_Id", "dbo.PodioUsers", "Id");
        AddForeignKey("dbo.Bestelllistes", "ZuletztModifiziertDurch_Id", "dbo.PodioUsers", "Id");
        CreateIndex("dbo.Bestelllistes", "Ersteller_Id");
        CreateIndex("dbo.Bestelllistes", "ZuletztModifiziertDurch_Id");
    } 
```

RenameColumn 与仍使用旧约束列名称的 AddForeignKey 相矛盾。我可以手动更改它，但恐怕这不是它应该工作的方式。

这是通常的行为还是错误？在我看来像一个。

//编辑：啊，只是为了解释我之前所做的：我将引用 dbo.PodioUsers 表的另一个~~列属性添加到“Bestellliste”模型。~~所以现在“Bestellliste”有两个引用“PodioUser”模型的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:25:27.593

这也发生在我身上。`[Required]`当我将属性添加到以前没有它的字段时，似乎会发生这种情况。

要解决我使用的问题`update-database -force -script`，请编辑 SQL 并针对数据库运行它。就我而言，这是 MSSQL，我为此使用了 Management Studio。

# java - Spring MVC + Hibernate：数据验证策略

> ID：12660262
> 
> 赞同：24
> 
> 时间：2012-09-30T09:43:53.450
> 
> 标签：java, validation, spring-mvc, hibernate-validator

我们都知道，Spring MVC 与 Hibernate Validator 和 JSR-303 集成得很好。但是，正如有人所说，Hibernate Validator 只是 Bean Validation 的东西，这意味着应该将更复杂的验证推到数据层。此类验证的示例：业务密钥唯一性、记录内依赖性（这通常指向数据库设计问题，但我们都生活在一个不完美的世界中）。甚至像字符串字段长度这样的简单验证也可能由一些 DB 值驱动，这使得 Hibernate Validator 无法使用。

所以我的问题是，Spring、Hibernate 或 JSR 是否提供了一些东西来执行如此复杂的验证？是否有一些*既定*的模式或技术可以在基于 Spring 和 Hibernate 的标准 Controller-Service-Repository 设置中执行此类验证？

**更新：**让我更具体一点。例如，有一个表单向控制器的`save`方法发送 AJAX 保存请求。如果出现一些验证错误——无论是简单的还是“复杂的”——我们应该用一些 json 指示有问题的字段和相关错误返回浏览器。对于简单的错误，我可以从中提取字段（如果有）和错误消息`BindingResult`。对于“复杂”错误，您会建议什么基础设施（可能是特定的，而不是临时例外？）？使用异常处理程序对我来说似乎不是一个好主意，因为在`save`方法之间分离单个验证过程`@ExceptionHandler`会使事情变得复杂。目前我使用一些临时异常（如，`ValidationException`）：

```
public @ResponseBody Result save(@Valid Entity entity, BindingResult errors) {
    Result r = new Result();
    if (errors.hasErrors()) {
        r.setStatus(Result.VALIDATION_ERROR);     
        // ...   
    } else {
        try {
            dao.save(entity);
            r.setStatus(Result.SUCCESS);
        } except (ValidationException e) {
            r.setStatus(Result.VALIDATION_ERROR);
            r.setText(e.getMessage());
        }
    }
    return r;
} 
```

你能提供一些更优化的方法吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-30T12:38:38.183

是的，有一个很好的老式 Java 模式**抛出异常**。
Spring MVC 很好地集成了它（代码示例可以直接跳到我回答的第二部分）。

您所谓的“复杂验证”实际上是例外：业务密钥唯一性错误、低层或数据库错误等。

* * *

### 提醒：Spring MVC 中的验证是什么？

验证应该发生在表示层上。它基本上是关于验证提交的表单字段。

我们可以将它们分为两类：

**1）轻度验证**（使用 JSR-303/Hibernate 验证）：检查提交的字段是否具有给定的`@Size`/ `@Length`，它是`@NotNull`或`@NotEmpty`/ `@NotBlank`，检查它是否具有`@Email`格式等。

**2）重度验证，或者复杂验证**更多的是关于字段验证的特殊情况，比如跨字段验证：

*   示例 1：表格有`fieldA`,`fieldB`和`fieldC`。单独地，每个字段都可以为空，但至少其中一个不能为空。
*   示例 2：如果`userAge`field 的值小于 18，则`responsibleUser`field 不能为 null，并且`responsibleUser`年龄必须大于 21。

这些验证可以使用[Spring Validator implementations](https://stackoverflow.com/a/12149331/400545)或[自定义 annotations/constraints](https://stackoverflow.com/questions/1972933/cross-field-validation-with-hibernate-validator-jsr-303)来实现。

现在我明白了，有了所有这些验证工具，再加上 Spring 根本没有侵入性并且让你做任何你想做的事情（无论好坏），人们可能会想用“验证锤”来处理任何模糊相关的事情到错误处理。
它会起作用：仅通过验证，您可以检查验证器/注释中的所有可能问题（并且几乎不会在较低层抛出任何异常）。这很糟糕，因为你祈祷你考虑过所有的情况。您不会利用 Java 异常来简化逻辑并通过忘记检查是否有错误来减少出错的机会。

所以在 Spring MVC 世界中，不应该将验证（即**UI 验证**）误认为是低层**异常**，例如 Service 异常或 DB 异常（key unicity 等）。

* * *

### 如何方便地处理 Spring MVC 中的异常？

有些人认为“哦，天哪，所以在我的控制器中，我必须一个一个地检查所有可能的检查异常，并为每个异常考虑一个消息错误？没办法！”。我是那些人的其中一个。:-)

在大多数情况下，只需使用一些通用的检查异常类，所有异常都会扩展。然后只需在 Spring MVC 控制器中使用[@ExceptionHandler](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-exceptionhandlers)和通用错误消息处理它。

代码示例：

```
public class MyAppTechnicalException extends Exception { ... } 
```

和

```
@Controller
public class MyController {

    ...

    @RequestMapping(...)
    public void createMyObject(...) throws MyAppTechnicalException {
        ...
        someServiceThanCanThrowMyAppTechnicalException.create(...);
        ...
    }

    ...

    @ExceptionHandler(MyAppTechnicalException.class)
    public String handleMyAppTechnicalException(MyAppTechnicalException e, Model model) {

        // Compute your generic error message/code with e.
        // Or just use a generic error/code, in which case you can remove e from the parameters
        String genericErrorMessage = "Some technical exception has occured blah blah blah" ;

        // There are many other ways to pass an error to the view, but you get the idea
        model.addAttribute("myErrors", genericErrorMessage);

        return "myView";
    }

} 
```

简单、快速、简单、干净！

当您需要为某些特定异常显示错误消息时，或者由于设计不佳的遗留系统无法修改而无法拥有通用顶级异常时，只需添加 other `@ExceptionHandler`s。
另一个技巧：对于不太混乱的代码，您可以使用以下方法处理多个异常

```
@ExceptionHandler({MyException1.class, MyException2.class, ...})
public String yourMethod(Exception e, Model model) {
    ...
} 
```

* * *

### 底线：何时使用验证？什么时候使用异常？

*   来自 UI 的错误 = 验证 = 验证工具（JSR-303 注释、自定义注释、Spring 验证器）
*   来自较低层的错误 = 异常

当我说“来自 UI 的错误”时，我的意思是“用户在他的表单中输入了错误的内容”。

参考 ：

*   [将错误从服务层传回视图](https://stackoverflow.com/questions/3224749/passing-errors-back-to-the-view-from-the-service-layer)
*   [关于 bean 验证的非常有用的博客文章](http://blog.orange11.nl/2009/08/04/bean-validation-integrating-jsr-303-with-spring/)

# php - 弹出窗口的多个实例

> ID：12660275
> 
> 赞同：0
> 
> 时间：2012-09-30T09:45:49.533
> 
> 标签：php, jquery

我有多个表单并使用弹出窗口来修改记录，即我从搜索条件中遍历数据库记录以生成结果页面。用户可以通过 PHP 修改这些记录`$_POST`。我对每条记录都有一个提交按钮。

表单`onsubmit`运行 jQuery 代码以打开一个弹出窗口

```
$('#myform').submit(function() {
    window.open('', 'formpopup', 'width=575,height=500,resizeable,scrollbars');
    this.target = 'formpopup';
}); 
```

这仅适用于第一个实例，`#myform`但所有其他实例都在新选项卡中打开。我希望它们都显示在新窗口中。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:01:55.857

我认为你需要有不同的窗口名称才能工作。您只使用一个名为“formpopup”的窗口，因此如果您想打开一个新窗口，则需要一个不同的名称，否则它将使用名为“formpopup”的当前窗口并在该窗口中打开一个新选项卡。

# delphi - 我可以在 Delphi 中创建特定接口的通用列表吗？

> ID：12660279
> 
> 赞同：6
> 
> 时间：2012-09-30T09:46:55.210
> 
> 标签：delphi, generics, interface, delphi-xe3

在 C# 中，我可以创建一个包含特定接口的通用列表，例如：

```
myList = List<IMyInterface>; 
```

我可以在 Delphi XE3 中做同样的事情吗？如果可以，怎么做？

我知道我可以创建一个 TInterfaceList 来存储接口列表，但它不是强类型的，所以在使用列表中的对象时我仍然需要强制转换。

有没有一种强类型的方法来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-30T14:29:38.853

Delphi 支持通用 List 类`TList<T>`，可以与特定接口一起使用，例如：

```
var
  List: TList<IMyInterface>;

begin
  List := TList<IMyInterface>.Create;
  {..Do something with list..}
  List.Free;
end; 
```

# reverse-engineering - Live IL 查看输入代码

> ID：12660287
> 
> 赞同：0
> 
> 时间：2012-09-30T09:48:29.863
> 
> 标签：reverse-engineering, il

是否有任何工具可以在我们编写 CS 代码（.Net 代码）时向我们展示它的等效 IL 版本，需要这样的工具作为学习目的。

* * *

一方面，我们编写示例代码：例如：（仅作为示例）我们编写：

```
 if (base.ActiveMdiChild != null)
   {... 
```

另一方面，它显示：

```
4        L_0009:    brtrue.s    9 -> ret 
5        L_000b:    ldarg.0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T09:53:41.823

您也许可以使用 Roslyn 编写一个与此类似的 Web 工具：http: [//msdn.microsoft.com/en-us/vstudio/roslyn.aspx](http://msdn.microsoft.com/en-us/vstudio/roslyn.aspx)，其方式与[https://compilify.net/](https://compilify.net/)类似，您显然需要在显示 il 之前编译。

也许你可以要求它作为编译人员的一个选项。

# codeigniter - 我可以在 Code Igniter 的包中扩展核心助手吗？

> ID：12660291
> 
> 赞同：0
> 
> 时间：2012-09-30T09:48:54.817
> 
> 标签：codeigniter, packages, helpers, hmvc, extending

我正在建立自己的基地，以便在我将要建立的多个网站上使用。我已经为此做了一个包。但我想扩展该包中的 CI 助手（而不是在应用程序中） - 助手`url_helper`等`html_helper`。

我在包文件夹中放了一个配置文件夹（虽然我不太了解它的作用），并在其中放了一个配置文件（所以结构是`packages/app_package/config/config.php`）。

我已经放置了`$config['subclass_prefix'] = 'app_';`（最好与应用程序不同），但仍然没有加载助手`app_url_helper`等

有人这样做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-30T17:38:05.863

看看[CodeIgniter Helpers](http://codeigniter.com/user_guide/general/helpers.html)。特别是标有**“扩展”助手**的部分。

我不太清楚你的意思是：

> 我在包文件夹中放置了一个配置文件夹（虽然我不太了解它的作用），并在其中放置了一个配置文件（所以结构是 packages/app_package/config/config.php）。

您根本不需要“创建”任何配置文件夹或文件。配置文件已经存在并且位于`application/config/config.php`您的 CodeIgniter 项目中。类扩展前缀位于 ~ 第 110 行（取决于版本）。将其设置为`_app`

现在创建`app_url_helper.php`和`app_html_helper.php`进出`application/helpers`你去。

# java - 在运行时将组件添加到 jpanel

> ID：12660293
> 
> 赞同：4
> 
> 时间：2012-09-30T09:49:02.523
> 
> 标签：java, swing, jpanel

我有一个`JPanel`和`JButton`。 在运行时添加到单击时。`JFrame`
`JLabel``JPanel``JButton`

我使用以下代码：

```
 panel.setLayout(null);

 jLabel _lbl=new jLabel();
 _lbl.setText("Label");
 panel.add(_lbl);
 panel.validate(); 
```

但`JLabel`在`JPanel`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T09:52:27.443

我看到您创建了一个`JLabel`名为`_lbl`：

```
 JLabel _lbl=new JLabel(); 
```

但是您永远不会将其添加到面板中。相反，您`JLabel`在面板中添加了一个没有文本的新内容：

```
 panel.add(new JLabel()); 
```

这当然会构造一个不可见的空标签。

在添加类似之后，还可以尝试在您的实例上调用`revalidate()`和：`repaint()``JPanel``JLabel`

```
JLabel _lbl=new JLabel("Label");//make label and assign text in 1 line

panel.add(_lbl);//add label we made

panel.revalidate();
panel.repaint(); 
```

有了这个，您可能还需要调用`pack()`您的框架实例以调整其大小`JFrame`以适应新组件。

另外请不要使用`null`/`Absolute`布局，这是非常糟糕的做法（除非做动画），并且可能会出现问题并且很难使用。

而是使用`LayoutManager`：

*   [布局管理器的视觉指南](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

`JPanel`或者如果您在简单调用中只有一个组件，`add(label);`因为它会拉伸到`JPanel`大小。

**更新：**

这是一个小样本。只需将`JLabel`s 添加到`JPanel`每次`JButton`按下：

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class JavaApplication116 {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaApplication116().createAndShowUI();
            }
        });
    }

    private void createAndShowUI() {
        JFrame frame = new JFrame("Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        initComponents(frame);

        frame.setResizable(false);
        frame.pack();
        frame.setVisible(true);
    }

    private void initComponents(final JFrame frame) {
        final JPanel panel = new JPanel(new FlowLayout());
        JButton button = new JButton("Add label");
        button.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JLabel _lbl = new JLabel("Label");//make label and assign text in 1 line

                panel.add(_lbl);//add label we made

                panel.revalidate();
                panel.repaint();

                frame.pack();//so our frame resizes to compensate for new components
            }
        });
        frame.getContentPane().add(panel, BorderLayout.CENTER);
        frame.getContentPane().add(button, BorderLayout.SOUTH);
    }
} 
```

# php - 填充数组中的空白

> ID：12660297
> 
> 赞同：0
> 
> 时间：2012-09-30T09:49:43.840
> 
> 标签：php

我有一个数组，我想显示一周中的所有日子或一年中的每个月，即使数据为 0，是否可以查看数组内部并填写不存在的内容？

我从 mysql 表返回的数据不显示 0 - 详情如下

[即使为空也显示值](https://stackoverflow.com/questions/12659970/show-values-even-if-empty)

所以，下面显示了一年中的月份和计数，我想用 'Feb' => '0' .. 'Sep' => '0' .. '十二月' => '0'

数组示例：

```
$data = array(
    'Jan' => 12,
    'Mar' => 10,
    'Apr' => 7,
    'May' => 80,
    'Jun' => 67,
    'Jul' => 45,
    'Aug' => 66,
    'Oct' => 23,
    'Nov' => 78,
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T09:51:24.667

用于[`array_fill_keys`](http://php.net/manual/en/function.array-fill-keys.php)创建“已知的良好起点”，然后`array_merge`或数组添加以合并您的数据。

例子：

```
$data = array_fill_keys(array('Jan', 'Feb', 'etc'), 0);
$data = array('Feb' => 40) + $data; 
```

警告：结果不会按月排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T09:55:35.967

首先创建一个默认值为 0 的空白数组，然后将此数组合并到原始数组。

```
$data = array(
    'Jan' => 0,  
    'Feb' => 0,
    'Mar' => 0,
    'Apr' => 0,
    'May' => 0,
    'Jun' => 0,
    'Jul' => 0,
    'Aug' => 0,
    'Sep' => 0,
    'Oct' => 0,
    'Nov' => 0,
    'Dec' => 0;
);

$data2 = array(
    'Jan' => 12,
    'Mar' => 10,
    'Apr' => 7,
    'May' => 80,
    'Jun' => 67,
    'Jul' => 45,
    'Aug' => 66,
    'Oct' => 23,
    'Nov' => 78,
);

$newarray=array_merge($data, $data2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:14:42.457

[正如在上一个问题](https://stackoverflow.com/questions/12659970/show-values-even-if-empty)中已经指出的那样，您需要为月份名称创建某种“查找表”。如果您不在数据库中执行此操作，则需要在 PHP 中执行此操作。这样的“表”可以是月份名称的数组：

```
$months = array(
    'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 
    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'
); 
```

然后，您可以遍历月份名称并选择结果中存在的数字，*或者*您采用默认值：

```
$default = 0;
foreach ($months as $month) {
    $value = isset($data[$month]) ? $data[$month] : $default;
    # $value now contains the month value
    ...
} 
```

这应该只是工作。

请注意，数据库返回的月份名称必须与您在`$months`数组中使用的月份名称相同。

# time - NTP 和 GPS 源之间的时间精度

> ID：12660300
> 
> 赞同：4
> 
> 时间：2012-09-30T09:50:06.473
> 
> 标签：time, gps, ntp, gps-time

我有 NTP 客户端实现（在 Linux 上）向（Stratum 1 或 2）NTP 服务器发送/接收数据包并获取板上的服务器时间。另外，我在 Linux 上运行了另一个应用程序，它给了我 GPS 时间。在我从 NTP 和 GPS 源获取时间信息之前，我将在板上手动设置时间（使用日期）接近当前 GPS 时间（此信息取自[http://leapsecond.com/java/gpsclock.htm](http://leapsecond.com/java/gpsclock.htm)）。

保持板上的系统时间作为参考，我将使用这个参考时间与 NTP（比如 X）和 GPS（Y）的差异。X 和 Y 之间的差异将达到 500+ 毫秒。我很想知道 NTP 和 GPS 之间的时间精度。500 毫秒是预期值吗？

我尝试在 NTP 客户端上启用硬件时间戳，但没有任何区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-24T12:09:54.623

使用 GPS 作为参考时钟归结为一件事：PPS（每秒脉冲）。其他一切都非常紧张（不稳定/不可预测）。

PPS 输出非常准确（纳秒级）。

PPS 不包含任何信息，除非第二个开始。这意味着我们必须从另一个来源为我们的时钟提供日期和时间。NMEA（来自 GPS 的实际数据）很好，只要它足以确定时间到一秒的精度。

我的猜测是您的“GPS 时间”是来自 GPS“数据出口”的时间（和日期）。这个时间可能会减少 500 毫秒（甚至更糟），这是正常的。这就是为什么我们不将该时间用作准确的参考时钟。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T10:13:30.150

您可能想阅读有关时间参考的信息。我认为 GPS 时间系统与那些时间服务器返回的 UTC 时间并不完全相同。原子钟测量的时间会定期添加闰秒，以使 UTC 时间在不稳定的天文时间 +/1 秒内。

您的 NTP 实施是否能够纠正网络延迟？尝试使用对您来说具有低延迟的 NTP 服务器...

这些因素可以解释您看到的差异。

# wpf - WPF 可编辑 XAMDataGrid 组合框 ElementName 绑定在 .net 4.0 中有效，但在 3.5 中无效

> ID：12660310
> 
> 赞同：1
> 
> 时间：2012-09-30T09:51:22.103
> 
> 标签：wpf, binding, xamdatagrid

我有一个将 xamdatagrid 添加到网格的用户控件，如下所示：

```
<Grid Name="grid1">
    <Grid.Resources>

        <Style TargetType="{x:Type igEditors:XamComboEditor}">
            <Setter Property="ItemsSource" Value="{Binding ElementName=grid1, Path=DataContext.Test}"/>
            <Setter Property="DisplayMemberPath" Value="Key"/>
        </Style>
    </Grid.Resources>
    <igDP:XamDataGrid DataSource="{Binding}" Name="xamDataGrid1" VerticalAlignment="Top" >
        <igDP:XamDataGrid.FieldLayouts>
            <igDP:FieldLayout>
                <igDP:Field Name="Name" >
                    <igDP:Field.Settings>
                        <igDP:FieldSettings EditorType="{x:Type igEditors:XamComboEditor}"/>
                    </igDP:Field.Settings>
                </igDP:Field>
            </igDP:FieldLayout>
        </igDP:XamDataGrid.FieldLayouts>
    </igDP:XamDataGrid>
</Grid> 
```

我在构造函数的代码隐藏中为 grid1 设置 DataContext。这适用于 WPF 4.0，但不适用于 3.5。在 3.5 中，我得到“找不到与引用'ElementName = grid1'的绑定源”错误。为了使绑定与 3.5 一起工作，我必须使用 ObjectDataProvider 作为：

```
<Grid Name="grid1">
    <Grid.Resources>
        <ObjectDataProvider x:Key="myData" ObjectType="{x:Type local:ViewModel}"></ObjectDataProvider>
        <Style TargetType="{x:Type igEditors:XamComboEditor}">
            <Setter Property="ItemsSource" Value="{Binding Source={StaticResource myData}, Path=Test}"/>
            <Setter Property="DisplayMemberPath" Value="Key"/>
        </Style>
    </Grid.Resources>
    <igDP:XamDataGrid DataSource="{Binding}" Name="xamDataGrid1" VerticalAlignment="Top" >
        <igDP:XamDataGrid.FieldLayouts>
            <igDP:FieldLayout>
                <igDP:Field Name="Name" >
                    <igDP:Field.Settings>
                        <igDP:FieldSettings EditorType="{x:Type igEditors:XamComboEditor}"/>
                    </igDP:Field.Settings>
                </igDP:Field>
            </igDP:FieldLayout>
        </igDP:XamDataGrid.FieldLayouts>
    </igDP:XamDataGrid>
</Grid> 
```

为什么第一个代码片段中的 ElementName 绑定不适用于 WPF 3.5，或者我在那里做错了什么，是否有任何已知的原因？谢谢你的建议。

# python - Python：循环类？

> ID：12660312
> 
> 赞同：3
> 
> 时间：2012-09-30T09:51:33.470
> 
> 标签：python

如何在python中将以下内容组合成一个循环？

```
 try:
        [fb.delete() for fb in FacebookProfile.objects.filter(user_id=user.id)]
    except FacebookProfile.DoesNotExist:
        pass

    try:
        [fb.delete() for fb in FacebookUser.objects.filter(user_id=user.id)]
    except FacebookUser.DoesNotExist:
        pass

    try:
        [fb.delete() for fb in FacebookLike.objects.filter(user_id=user.id)]
    except FacebookLike.DoesNotExist:
        pass

    try:
        [fb.delete() for fb in FacebookInvite.objects.filter(user_id=user.id)]
    except FacebookInvite.DoesNotExist:
        pass 
```

正如我们所看到的，它是相同的代码块，只是每个类中的类名都发生了变化，所以我希望遍历一个类名数组，并通过一个与上面相同语义的生成函数来运行每个类名。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T09:54:56.517

```
for klass in [FacebookProfile, FacebookUser, FacebookLike, FacebookInvite]:
    try:
        for fb in klass.objects.filter(user_id=user.id):
            fb.delete()
    except klass.DoesNotExist:
        pass 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T09:55:53.630

您可以迭代元组：

```
for klass in FacebookProfile, FacebookUser, FacebookLike, FacebookInvite:
    try:
        for ob in klass.objects.filter(user_id=user.id):
            ob.delete()
    except klass.DoesNotExist:
        pass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:29:16.140

（我猜那些是 django 模型。）

如果这些模型彼此之间存在外键关系，则只需删除顶级模型即可删除其余模型。因此，如果 FacebookUser 是您的顶级模型，则后续调用应删除其余模型。（猜测 user 和 FaceBookUser 是一对一的关系）

```
FaceBookUser.objects.get(user_id=user.id).delete() 
```

但这是很多猜测。如果这些猜测中的一部分或全部是错误的，您应该使用 Querysets 删除方法[https://docs.djangoproject.com/en/dev/ref/models/querysets/#delete](https://docs.djangoproject.com/en/dev/ref/models/querysets/#delete)

```
FaceBookUser.objects.filter(user_id=user.id).delete()
FaceBookProfile.objects.filter(user_id=user.id).delete()
FaceBookLike.objects.filter(user_id=user.id).delete()
FaceBookInvite.objects.filter(user_id=user.id).delete() 
```

这将运行 4 个查询并在每个查询中删除多行。你应该避免在 orm 模型中使用 for 循环。

# javascript - 如何在 SignalR 上获取已连接客户端的列表

> ID：12660313
> 
> 赞同：8
> 
> 时间：2012-09-30T09:51:44.987
> 
> 标签：javascript, c#, .net, asp.net-mvc, signalr

我对 SignalR 很陌生。我的第一个任务是制作简单的聊天应用程序。

我一直在浏览和阅读，最后制作了一个页面，您可以在这里聊天，并且效果很好。

现在我需要显示已连接客户端的列表。为此，我编写了以下代码。这是我的集线器。

```
public class ChatHub: Hub
{

    chatEntities dc = new chatEntities();
    public void Send(string message,string clientName)
    {
        Clients.addMessage(message,clientName);

    }

    // I want to save the user into my database, when they join 
    public void Joined(string userId,string userName)
    {

        CurrentChattingUsers cu = new CurrentChattingUsers();
        cu.ConnectionId = userId;
        cu.UserName = userName;

        dc.CurrentChattingUsers.AddObject(cu);
        dc.SaveChanges();

       Clients.joins(userId, userName);
    }

    // This will return a list of connected user from my db table.
    public List<ClientModel> GetConnectedUsers()
    {
        var query = (from k in dc.CurrentChattingUsers
                     select new ClientModel()
                     {
                         FullName = k.UserName,
                         UserId = k.ConnectionId
                     }).ToList();
        return query;
    }   

} 
```

就是这样......现在呢？我会朝着正确的方向前进吗？如果，我那么如何从视图中调用这个方法呢？一些好的建议真的会帮助我。干杯

**编辑：**

集线器启动时我添加了以下脚本

```
$.connection.hub.start(function () {
            chat.getConnectedUsers();

        }); 
```

这是在我的集线器中返回客户端名称的方法

```
 public List<ClientModel> GetConnectedUsers()
    {
        var data = (from k in dc.Users
                     select new ClientModel()
                     {
                         FullName = k.UserName

                     }).ToList();

         Clients.loadUsers(data);
        return data;
    } 
```

在萤火虫中，我可以看到它返回如下内容；

```
{"State":{},"Result":[{"FullName":"mokarom","UserId":null},  {"FullName":"aka8000","UserId":null},{"FullName":"johnnyno5","UserId":null},{"FullName":"reza","UserId":null},{"FullName":"amyo","UserId":null},{"FullName":"rezatech","UserId":null}],"Id":"0","Error":null,"StackTrace":null} 
```

但是，我将如何在我的视图中显示它？

**编辑：**

这是到目前为止的完整视图

```
<script type="text/javascript">
    var chat;
    var myClientName
    $(document).ready(function(){

      myClientName = '@Request.Cookies["ChatterName"].Value';

        // Created proxy
        chat = $.connection.chatHub;
        // Assign a function to be called by the server
        chat.addMessage = onAddMessage;

        // Register a function with the button click
        $("#broadcast").click(onBroadcast);

        $('#message').keydown(function (e) {
            if (e.which == 13) { //Enter
                e.preventDefault();

                onBroadcast();

            }
        });

        // Start the connection
        $.connection.hub.start(function () {
           chat.getConnectedUsers();

        });

        chat.loadUsers = function (data) {
            loadUsers(data); 

         };
    });

    function onAddMessage(message,clientName) {
        // Add the message to the list
        $('#messages').append('<div class="chatterName">' + clientName + ' </div><div class="chatterMessage"> ' + message + '</div><div class="clear">');

    }
    function onBroadcast() {
        // Call the chat method on the server
        chat.send($('#message').val(), myClientName);
        $('#message').val('');
    }
    function loadUsers(data) {
        $('#clientList').html(data.Result[0].FullName);

    }
</script> 
```

问题：这里什么也没看到： $('#clientList').html(data.Result[0].FullName); 萤火虫说“未定义数据”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T12:25:44.380

**JavaScript**

```
var chats = $.connection.chatHub;
chats.loadUsers = function (data) { loadUsers(data); };
var connectedUserCount = 0;

$.connection.hub.start(function () 
         { chats.getConnectedUsers(); });

function loadUsers =  = function (data) {
  console.log(data); //so you can see your data in firebug.etc
            //which signal r will have converted to json so you could try
  var numberOfUsers = data.length;  
} 
```

集线器启动后，聊天将拥有集线器的所有公共功能，可用作 javascript 函数。这是信号器/集线器使用客户端和服务器之间的最佳可用连接方法创建的。

相反，您的 C# 集线器将可以访问您设置的任何 javascripts 函数，例如

```
Clients.loadUsers(query);  
//add this to you server side just before you return query 
```

ps - 你也可以考虑使用[OnConnectedAsync](https://github.com/SignalR/SignalR/issues/178)，当然你可能仍然坚持这些。我也在等待对使用 sql 的 web 农场支持的全面支持，这正在[管道](https://github.com/SignalR/SignalR/issues/232#issuecomment-8564220)中。

# android - getPressure 和 getSize 总是返回相同的值

> ID：12660315
> 
> 赞同：0
> 
> 时间：2012-09-30T09:51:54.300
> 
> 标签：android, touch

有谁知道为什么 getPressure() 总是返回 0.4 而 getSize() 返回 0.12 ...？

代码片段：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    super.onTouchEvent(event);

    System.out.println(event.getPressure());
    System.out.println(event.getSize())
    return true;

} 
```

我认为 getPressure 可能不起作用，因为没有任何物理功能。但我不明白为什么 getSize 不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T09:32:50.133

TF300TG是android4.0，在设置->开发者选项中，勾选“**指针位置**”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T08:19:43.273

难道这些只是在运动事件的第一部分产生的值吗？尝试在 touch MOVE 上输出值，因为这是形状通常发生变化的地方。这应该会给你一些变化。

```
@Override
public boolean onTouchEvent(MotionEvent event) {

switch(event.getAction())
{
   case MotionEvent.ACTION_MOVE:
   System.out.println(event.getPressure());
   System.out.println(event.getSize());
   break;
}

return true; 
```

}

# shell - ls -l 命令和 unix 中的密码文件

> ID：12660319
> 
> 赞同：1
> 
> 时间：2012-09-30T09:52:15.467
> 
> 标签：shell, unix, filesystems

当我们执行`ls -l`命令列出目录中的文件时，`/etc/passwd`文件是否被访问。请解释 ？？如果是，我该如何验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T09:56:17.060

是的。`/etc/passwd`用于将用户 ID 映射到用户名。我们可以使用 关闭`-n`它，它将显示数字用户 ID 和组 ID（uids、gids）：

```
$ ls -l
total 0
-rw-rw-r-- 1 thomas thomas 0 Sep 30 10:54 bar

$ ls -n
total 0
-rw-rw-r-- 1 1000 1000 0 Sep 30 10:54 bar 
```

终极证明：

```
$ strace ls -l 2>&1 | grep /etc/passwd
open("/etc/passwd", O_RDONLY|O_CLOEXEC) = 4

$ strace ls -n 2>&1 | grep /etc/passwd
# no output 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T10:15:33.523

我向 Thomas 添加了 +1，但我想指出该文件可能会被访问​​，也可能不会。这取决于“/etc/nsswitch.conf”的内容。

在这种情况下

```
$ grep passwd /etc/nsswitch.conf
passwd:         compat 
```

该文件将被访问，在这种情况下

```
$ grep passwd /etc/nsswitch.conf
passwd:         ldap 
```

它不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T10:05:26.257

"ls -l" 打印有关文件和目录（元数据）的信息，例如：访问权限、大小等。它不读取任何文件或目录的内容。即使您对文件没有任何访问权限，您仍然可以读取其元数据（例如：访问权限、大小）。这同样适用于目录（例外：如果您无法读取目录，则无法列出其内容，如果无法“执行”目录，则无法将其用作路径的组件来访问其中的内容）。

大多数现代 Linux 系统都配置为使用“影子密码”，这意味着**/etc/passwd**不包含密码哈希（读取：敏感数据）。密码哈希存储在**/etc/shadow**中。这就是为什么**/etc/passwd**对所有人都可读（仅包含有关用户的元数据：他们的姓名、ID、shell、组等），但**/etc/shadow**只能由 root 读取的原因。

# c# - 如何将 Datagridview 添加到 Scatterviewitem 中？

> ID：12660320
> 
> 赞同：0
> 
> 时间：2012-09-30T09:52:20.183
> 
> 标签：c#, datagrid, scatterview

我正在尝试使用 scatterview 动态显示不同表格的内容，有没有一种简单的方法可以做到这一点。现在我在 DatagridView 中有一个查询的结果，我想将它添加到 ScatterViewItem。我尝试直接分配，但是我在这里一定做错了什么。我需要将它绑定到 xaml 代码吗？

```
dgv = QueryResult();
svi.Content = dgv.DataSource; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T11:03:05.430

这个问题的答案已经有了，我的错误我没有很好地搜索。中的最后一篇文章： [我可以以编程方式将一行添加到 WPF 数据网格吗？](https://stackoverflow.com/questions/3880959/can-i-programmatically-add-a-row-to-a-wpf-datagrid?lq=1)

请版主适当地标记。

谢谢

# c - 有哪些替代方法可以返回包含来自 Haskell 共享库的空值的字符串以在 C 中使用？

> ID：12660323
> 
> 赞同：2
> 
> 时间：2012-09-30T09:52:38.267
> 
> 标签：c, haskell, shared-libraries, binary-data, ffi

> **可能重复：**
> [FFI 可以处理数组吗？如果是这样，怎么做？](https://stackoverflow.com/questions/9854782/can-the-ffi-deal-with-arrays-if-so-how)

我有一个用 Haskell 编写的小型汇编程序，它接受一个带有汇编代码的字符串并返回一串二进制机器代码。我希望能够通过将此 Haskell 库构建为共享库来在 C 中使用此函数。二进制机器代码可以包含空值，因此我不能`CString`用作返回类型，因为这是一个常规的以空值结尾的字符串。而且由于我不能`CStringLen`在 FFI 中使用 a 作为返回值。

**我应该使用什么类型来实现这一点？**

内部汇编函数的类型签名：

```
assembly :: String -> ByteString 
```

这是此函数的输入和输出示例：

输入：

```
decl r0 0x02
decl r1 0x10
add r0 r1 
mov rr rs 
```

输出（二进制数据表示为十六进制，每行 3 个字节）：

```
01 00 02
01 01 10
03 00 01
02 05 04 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:26:48.043

如果我用 C 语言编写它，我可能会给它一个这样的原型：

```
void assemble(char **out, size_t *outlen, const char *in); 
```

这转化为这样的东西（未经测试）：

```
import qualified Assemble -- your module with the "assemble" function

import Foreign.Ptr (Ptr)
import Foreign.Storable (poke)
import Foreign.Marshal.Utils (copyBytes)
import Foreign.Marshal.Alloc (mallocBytes)
import Foreign.C.Types (CSize, CChar)
import Foreign.C.String (CString, peekCString)
import Data.ByteString.Unsafe (unsafeUseAsCStringLen)

foreign export ccall assemble :: Ptr (Ptr CChar) -> Ptr CSize -> CString -> IO ()

assemble :: Ptr (Ptr CChar) -> Ptr CSize -> String -> IO ()
assemble out outlen instrptr = do
  instr <- peekCString instrptr
  unsafeUseAsCStringLen (Assemble.assemble instr) $ \(p, n) -> do
    outval <- mallocBytes n
    copyBytes outval p n
    poke out outval
    poke outlen (fromIntegral n) 
```

这会将数据复制到一个`malloc`区域，这很好，因为它是“安全的”，并且 C 代码不需要做任何特殊的事情来释放它（除了`free()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:24:04.580

你能用原始指针和手动内存分配做点什么吗？（请参阅`Foreign.Marshal.Alloc`。）听起来你可以只`malloc`用一块内存并在那里写你的二进制数据......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T09:57:27.640

我对 Haskell 的了解不够确定，但是您不能将额外的 out 参数长度传递给 haskell 函数吗？从函数返回时，长度会告诉 c 程序返回的字符串的大小。我相信我在 c 和 python 之间做过类似的事情。

或者，您不能返回一个自定义对象，例如具有长度字段的 c++ 字符串。即使您使用纯 c，如果它们是在 c 和 haskell 之间共享类型的一种方式（我相信应该存在），您也可以编写一个带有 char 数组和长度字段的小字符串结构，并从 haskell 返回该对象。

# android - 如何向 Eclipse 添加框架？

> ID：12660324
> 
> 赞同：0
> 
> 时间：2012-09-30T09:52:48.667
> 
> 标签：android, eclipse, frameworks

我的项目需要简单的 xml 解析器。我阅读了它的网站，但找不到我应该如何将它添加到我的项目中才能正确使用它。

我使用eclipse在android中编程。

[这是简单的网站。](http://simple.sourceforge.net/home.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:05:02.390

您必须执行以下操作：

1.  [在此处](http://simple.sourceforge.net/download.php)下载简单解析器的 jar 或 zip
2.  将其复制到项目库所在的目录中。
3.  通过将库添加到类路径中让 Eclipse 知道它

为了使 jar 在运行时可用，您需要：

*   将 jar 放在您的资产文件夹下
*   在构建路径中包含此 jar 副本
*   转到同一弹出窗口上的导出选项卡
*   选中新添加的 jar 框

最后一部分来自[这里](https://stackoverflow.com/questions/2247998/noclassdeffounderror-eclipse-and-android)

# ios - 在 iOS 和网站之间共享 Facebook 访问令牌

> ID：12660329
> 
> 赞同：2
> 
> 时间：2012-09-30T09:53:34.830
> 
> 标签：ios, facebook, access-token, facebook-oauth, facebook-access-token

我开发了一个 PHP 网站，用户通过 Facebook 进行身份验证，我获取并存储他们的 auth_token。

另一方面，我已经开始开发一个 iOS 应用程序，用户也可以通过 Facebook 进行身份验证。如您所知，auth_token 将与我在网站身份验证过程中获得的不同（与网站中的 Facebook 应用程序相同）

**我的问题是：我可以使用我在 iOS 应用程序中获得的 auth_token 从网站发出请求吗？（同一用户，同一应用）**

原因是有时我希望从移动设备执行某些操作（即更新状态），而从 Web 服务器执行其他操作（即检查当前用户的哪些朋友已在我的网站中注册）

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T10:02:50.790

本质上，只要您`access_token`对特定用户有效，您就可以在任何您想要的地方使用它。只要您可以`http`向 Facebook 执行请求并提供正确的参数，您就可以代表用户进行 API 调用。

```
https://graph.facebook.com/USER_ID?access_token=XXX 
```

无论您从何处执行此调用，该调用都应该有效。

# node.js - requireJs 构建脚本

> ID：12660334
> 
> 赞同：2
> 
> 时间：2012-09-30T09:54:54.407
> 
> 标签：node.js, build, requirejs, r.js

我有如下代码

```
define("ModuleA", ["InitialDependency"], function (initDep){
   return {};
});

define("ModuleB", ["ModuleA", "OtherDependency"], function (moduleA, otherDep){
   return {};
}); 
```

这些模块中的每一个都在单独的文件“ModuleA.js”、“Moduleb.js”、“InitialDependency.js”和“OtherDependency.js”中定义。

这些模块在我的应用程序中按顺序加载。ModuleB 总是在 ModuleA 之后加载。这意味着在优化阶段，我不希望将 ModuleA 的脚本合并到为 ModuleB 构建的脚本中。我想要以下

ModuleA.built.js 包括

*   初始依赖
*   模块A

ModuleB.built.js 包括

*   其他依赖
*   模块B

我不希望它们都在同一个文件中，但是因为 ModuleB 可能永远不会被加载。

我可以为这两个模块编写一个构建脚本，但这会很耗时，因为我的项目中有很多模块，并且想要一个构建脚本来一次构建很多模块。

我需要知道什么来创建构建脚本来构建这两个模块（以及更多遵循相同依赖模式的模块）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:08:50.673

为此，您必须使用`modules`配置选项。

它可能看起来像这样：

```
{
    modules: [
        {
            name: "ModuleA",
            include: [],
            exclude: []
        },
        {
            name: "ModuleB",
            exclude: [
                "moduleA"
            ]
        }
    ]
} 
```

詹姆斯在这里有一个类似的示例设置：[https ://github.com/requirejs/example-multipage](https://github.com/requirejs/example-multipage)

当然，通过单独构建这些模块，您最终可能需要更新路径。如果是这样，那么最好的方法是创建一个文件，其中包含`require.config`为您构建的应用程序具有特殊设置的调用，并包含此配置而不是您通常的配置。但是如果你以一种很好的分离方式设置依赖关系，那么你可能会没事的。通过“良好分离”的方式，我的意思是如果`moduleA`是基本脚本，那么它不应该包含依赖项`moduleB`- 但我想这是常识！

**关于 shimmed 模块的注意事项**：由于 shimmed 配置仅在加载文件时起作用，并且通过 r.js 来订购插件，如果您不是 100% 确定这些将在之前加载，请确保您不包含没有依赖关系的 shim 模块。更多信息：[https ://github.com/requirejs/example-multipage-shim](https://github.com/requirejs/example-multipage-shim)

希望这有帮助！

# c# - 将子类项添加到需要基类的字典中

> ID：12660338
> 
> 赞同：0
> 
> 时间：2012-09-30T09:55:00.900
> 
> 标签：c#, asp.net, events, inheritance, dictionary

```
public event EventHandler<SubEventArgs> MyEvent;

dictionary<string,EventHandler<BaseEventArgs>> Foo =new dictionary<string,EventHandler<BaseEventArgs>>();

Foo.Add("Item1" , MyEvent); 
```

SubEventArgs 继承自 BaseEventArgs。

但这不起作用？如何处理？

更新：错误是

```
cannot convert from 'EventHandler<SubEventArgs>' to 'EventHandler<BaseEventArgs>'

The best overloaded method match for 'System.Collections.Generic.Dictionary<string,EventHandler<BaseEventArgs>>.Add(string, EventHandler<BaseEventArgs>)' has some invalid arguments 
```

更新：基类和子类

```
 public class BaseEventArgs : EventArgs
        {
            object[] data;

            public BaseEventArgs(object[] data)
            {
                this.data = data;
            }

            public BaseEventArgs(List<object> data)
            {
                this.data = data.ToArray();
            }

            public object[] Data
            {
                get
                {
                    return this.data;
                }
            }

            public bool HasData()
            {
                return this.data.Count() > 0;
            }
        }

    public class SubEventArgs : BaseEventArgs
    {

        public enum ErrorType {
            Validation = 1
            Logic = 2,
            System = 3
        };

        private ErrorType typeOfError;

        public SubEventArgs( ErrorType errorType, object[] data)
            : base(data)
        {
            this.typeOfError = errorType;
        }

        public SubEventArgs(ErrorType errorType, List<object> data)
            : base(data)
        {
            this.typeOfError = errorType;
        }

        public ErrorType TypeOfError
        {
            get
            {
                return this.typeOfError;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:06:25.723

这两个——`EventHandler<SubEventArgs>`并且`EventHandler<BaseEventArgs>`——是*完全不同的*类型，没有任何继承关系。不管那`SubEventArgs`继承`BaseEventArgs`。因此，您不能期望 的实例`EventHandler<SubEventArgs>`与 type 的参数兼容`EventHandler<BaseEventArgs>`。因此，在字典中，您不能将它们混合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:04:36.990

添加时只需将项目转换为基类即可；

（基类）新子类（）

然后，当您再次将其从收藏夹中取出时，您可以将其放回原处。

希望有帮助。

# java - 将带有参数的文件传递给 mapreduce 作业

> ID：12660339
> 
> 赞同：1
> 
> 时间：2012-09-30T09:55:22.227
> 
> 标签：java, configuration, hadoop, mapreduce

我有一个 mapreduce 映射器。这个 Mapper 应该使用一些只读参数。假设我想计算输入行中某些子字符串（某物的标题）的出现次数。我确实有一个配对列表：“某个标题”=>“从输入行中提取此标题的正则表达式”。这些对存储在通常的文本文件中。

将此文件传递给 Mapper 的最佳方法是什么？我只有这个想法：

1.  将文件成对上传到 hdfs。
2.  使用 -Dpath.to.file.with.properties 将路径传递给文件
3.  在映射器读取文件的静态{}部分并填充映射对“某些标题”=>“标题的常规表达式”。

是好还是坏？请建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T17:12:48.883

你走上了正轨，但我建议使用[分布式缓存。](http://hadoop.apache.org/docs/mapreduce/r0.21.0/api/org/apache/hadoop/filecache/DistributedCache.html)它的目的正是为了这个——将只读文件传递给任务节点。

1.  将文件放入 HDFS
2.  在应用程序的 main 方法中将该文件添加到分布式缓存中。
3.  在 Mapper 类中，根据您使用的 API 版本覆盖`configure`或方法。`setup`在该方法中，它可以从分布式缓存中读取并将所有内容存储在内存中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T12:13:10.690

这是我的代码的一部分。查看将文件复制到 HDFS 并启动 mr-job 的脚本。我确实在 maven 集成测试阶段使用 ant: scp, ssh 目标将此脚本上传到 hadoop 节点。

```
#dummy script for running mr-job
hadoop fs -rm -r /HttpSample/output
hadoop fs -rm -r /HttpSample/metadata.csv
hadoop fs -rm -r /var/log/hadoop-yarn/apps/cloudera/logs
#hadoop hadoop dfs -put /home/cloudera/uploaded_jars/metadata.csv /HttpSample/metadata.csv
hadoop fs -copyFromLocal  /home/cloudera/uploaded_jars/metadata.csv /HttpSample/metadata.csv
hadoop fs -copyFromLocal  /home/cloudera/uploaded_jars/opencsv.jar /HttpSample/opencsv.jar
hadoop fs -copyFromLocal  /home/cloudera/uploaded_jars/gson.jar /HttpSample/gson.jar
#Run mr job
cd /home/cloudera/uploaded_jars
#hadoop jar scoring-job.jar ru.megalabs.mapreduce.scoringcounter.Main -libjars gson.jar -files hdfs://0.0.0.0:8020/HttpSample/metadata.csv -libjars hdfs://0.0.0.0:8020/HttpSample/opencsv.jar, hdfs://0.0.0.0:8020/HttpSample/gson.jar /HttpSample/raw_traffic.json /HttpSample/output/scoring_result
hadoop jar scoring-job.jar ru.megalabs.mapreduce.scoringcounter.Main -files hdfs://0.0.0.0:8020/HttpSample/metadata.csv -libjars hdfs://0.0.0.0:8020/HttpSample/opencsv.jar,hdfs://0.0.0.0:8020/HttpSample/gson.jar /HttpSample/raw_traffic.json /HttpSample/output/scoring_result 
```

Mapper里面的代码：

```
public class ScoringCounterMapper extends Mapper<LongWritable, Text, GetReq, IntWritable> {

    private static final Log LOG = LogFactory.getLog(ScoringCounterMapper.class);

    private static final String METADATA_CSV = "metadata.csv";

    private List<RegexMetadata> regexMetadatas = null;

    private final static IntWritable one = new IntWritable(1);

    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
//bal-bla-lba
}

    @Override
    protected void setup(Context context) throws IOException, InterruptedException {
    MetadataCsvReader metadataCsvReader = new MetadataCsvReader(new File(METADATA_CSV));
    regexMetadatas = metadataCsvReader.getMetadata();
    for(RegexMetadata rm : regexMetadatas){
        LOG.info(rm);   
    }

    }
} 
```

看到： 1\. 我确实将我的元数据文件上传到节点 2\. 我确实把它放到了 HDFS 3\. 我确实使用 -Files 参数提供了文件路径 4\. 我确实指定这个文件在 HDFS 内 (hdfs://0.0 .0.0:8020/HttpSample/metadata.csv)

# asp.net-mvc-3 - 我需要简单的方法来制作依赖的 DropDownLists

> ID：12660343
> 
> 赞同：0
> 
> 时间：2012-09-30T09:55:57.840
> 
> 标签：asp.net-mvc-3

我有一个汽车品牌的下拉列表：

```
@Html.DropDownListFor(
           model => model.Brand, 
       new SelectList(
              new List<Object>{ 
                   new { value = "Opel" , text = "Opel" },
                   new { value = "Lada" , text = "Lada" },
                   new { value = "BMW" , text = "BMW"}
                },

              "value",
              "text" 
```

如您所见，我懒得在 View 上编写任何类和代码。

我如何制作第二个下拉列表：使用汽车模型？我的意思是用户选择“欧宝”，然后可以选择“Corsa”或“Vectra”，但不能选择“X6”或“2110”？

寻找最简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:08:03.237

您想制作一个级联下拉菜单，可能使用 ajax。

本教程几乎是为您制作的（汽车主题） [http://stephenwalther.com/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax。 aspx](http://stephenwalther.com/archive/2008/09/07/asp-net-mvc-tip-41-creating-cascading-dropdown-lists-with-ajax.aspx)

# java - java中的字符串引用

> ID：12660345
> 
> 赞同：13
> 
> 时间：2012-09-30T09:56:10.913
> 
> 标签：java

> **可能的重复：**
> [Java 中的字符串比较和字符串实习](https://stackoverflow.com/questions/3885753/string-comparison-and-string-interning-in-java)

我尝试在java中运行以下代码：

```
if("hello".trim() == "hello".trim())
   System.out.println("Equal");
else
   System.out.println("Not Equal"); 
```

它打印相等。我明白在这种情况下，两个字符串都有相同的引用。但是当我通过在两个字符串中添加一个空格来尝试相同的操作时，它会打印“不等于”。

```
if("hello ".trim() == "hello ".trim())
   System.out.println("Equal");
else
  System.out.println("Not Equal"); 
```

谁能解释为什么我得到“不平等”......？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-30T10:00:31.660

只需检查执行情况`trim`，您就会清楚。如果`trim`确定字符串没有前导/尾随空格，则返回相同的字符串——这是您的第一种情况。在第二种情况下，创建了一个新字符串，因此您有两个相等的 String 实例，每个实例都有自己的标识。而且，我认为您知道，运算符 == 比较引用而不是对象，因此它不关心两个实例是否表示相等的字符串。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T10:04:28.230

这种行为在（bold mine）的[JavaDoc 中有描述：`trim()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim())

> 删除了前导和尾随空格的此字符串的副本，**或者此字符串（如果它没有前导或尾随空格**）。

从实现中也很清楚：

```
public String trim() {
    //...
    return ((st > 0) || (len < count)) ? substring(st, len) : this;
} 
```

如果发现一些前导或尾随空格，`substring()`则称为返回 new `String`。`this`否则返回。

有趣的事实：在这两种情况下（如果`this`返回和何时`substring()`调用）返回的对象都指向相同的原始`char[]`数组。只有包装`String`对象发生变化，并且数组索引选择该数组的子集。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T10:01:28.180

```
if("hello".trim() == "hello".trim()) 
```

在这里，您的字符串实际上并未被修改..而在第二种情况下：-

```
if("hello ".trim() == "hello ".trim()) 
```

您正在修改字符串..两个字符串都创建不同的对象..

虽然，如果您尝试使用`equals()`方法比较它们，您将获得所需的结果.. As`equals()`方法比较两个字符串的内容，而`==`比较参考..

因此，当使用 比较具有相同内容的两个不同字符串对象时`==`，您实际上是在比较`reference`那些不同的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T10:06:51.827

从文档 -[修剪：](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29)

> “如果此 String 对象表示一个空字符序列，或者此 String 对象表示的字符序列的第一个和最后一个字符的代码都大于 '\u0020'（空格字符），则返回对该 String 对象的引用。 "

（在您的第一个示例中，您会得到相同的参考）

> "否则，设k为字符串中编码大于'\u0020'的第一个字符的索引，设m为字符串中编码大于'\u0020'的最后一个字符的索引。一个新的String 对象被创建，表示这个字符串的子字符串，它以索引 k 处的字符开始，以索引 m 处的字符结束——即 this.substring(k, m+1) 的结果。"

（因此，创建了两个新字符串，由于内存中的两个对象不同，因此决定返回 false）

为了将来参考，您可以这样做：`if ("hello ".trim().equals("hello ".trim()))`检查两个字符串的内容是否相等。

# javascript - jQuery 加载在 IE 9 上不起作用（在 FF、Chrome 和 Safari 上运行良好）

> ID：12660348
> 
> 赞同：0
> 
> 时间：2012-09-30T09:56:17.000
> 
> 标签：javascript, jquery, ajax, load

这是我的网站[http://www.eboard.jp](http://www.eboard.jp/)，使用 Django。
在首页上，我页面上的 jQuery“加载”在 IE9 上不起作用，
但在其他浏览器上运行良好。

关于这个问题有什么建议吗？

这是相关的 JS 文件和基本的 html。
[http://www.eboard.jp/static/js/main.js](http://www.eboard.jp/static/js/main.js)

```
<table>
 <tr>
  <td id="center">
   <table class="course_filter">
   <tr>
  <td class="search_mes">
   <ul class="intro_list">
    <li>eboard[いーぼーど]は、&lt;br>小学生～高校生の無料学習サイト。&lt;/li>
    <li>動画が集まった「コース」を使って、&lt;br>自分のペースで学習を進められます。&lt;/li>
   </ul>
   <ul class="link_list">
    <li class=""><img alt="" class="i_18" src="/static/icons/video.png"/>
     <a href="/courses/{{ beginner.id }}/1">動画で学ぼう！ eboardの使い方</a></li>
    <li><img alt="" class="i_18" src="/static/icons/key.png"/>
     <a href="/accounts/signup/">ユーザー登録</a></li>
   </ul>
  </td>

  <td class="filters">
   <ul class="ages">
    <li><a id="ele" class="ele" href="/age=ele/sub=all/"></a></li>
    <li><a id="jun" class="jun" href="/age=jun/sub=all/"></a></li>
    <li><a id="hig" class="hig" href="/age=hig/sub=all/"></a></li>
   </ul>
   <ul class="subjects">
    <li><a id="mat" class="mat" href="/age=all/sub=mat/"></a>算数・数学&lt;/li>
    <li><a id="soc" class="soc" href="/age=all/sub=soc/"></a>社会</li>
    <li><a id="sci" class="sci" href="/age=all/sub=sci/"></a>理科</li>
    <li><a id="eng" class="eng" href="/age=all/sub=eng/"></a>英語</li>
   </ul>
  </td>
 </tr>
</table>

<div id="course_tb">
 <p class="loading"><img alt="" src="/static/images/loading2.gif">
</div> 
```

这个是加载的html。

```
<div id="course_tb">
{% paginate 12 popnote_courses %}
{% for course in popnote_courses %}
{% score_for_object course as score %}
 <table class="course c_desc" title="{{ course.title }}|{{ course.description|linebreaksbr }}">
  <tr>
   <td class="thumb">
    <a href="/courses/{{ course.id }}/1"><img alt="{{ course.title }}" class="l_thumb" src="{{ course.thumb }}" /></a>
   </td>
  </tr>
  <tr>
   <td class="course_info">
    <ul>
     <li class="course_title"><a href="/courses/{{ course.id }}/1">{{ course.title }}</a></li>
     <li class="course_li">{% for age in course.target_age.all|slice:":2" %}{{ age.layer }} {% endfor %}</li>
     <li class="course_li"><img alt="みんなの評価" class="i_20" src="/static/icons/like.png"> {{ score.score }}
    　<img alt="コース登録者数" class="i_20" src="/static/icons/user.png"> {{ course.reg_count }}人&lt;/li>
    </ul>
   </td>
  </tr>
 </table>
{% endfor %}
{% show_more "<img alt="" class="i_24" src="/static/images/loading.gif" > 次のコースを読みこむ" "<div class="loading" ><img alt="" src="/static/images/loading2.gif" ></div>"%}
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:06:27.590

检查 IE 中的网络选项卡，但您可能会发现它正在尝试加载最后没有哈希的 url。IE 通常不会将#tags 发送到服务器，因为它们用于客户端。

# php - 它没有将数据插入表中

> ID：12660350
> 
> 赞同：0
> 
> 时间：2012-09-30T09:56:34.847
> 
> 标签：php, mysql, sql, database

我在下面有一些 php 代码将数据添加到 2 个表中，一个称为“Image Table”，另一个称为“Image_Question”表。我面临的问题是当它插入“图像”表时，它不会将任何数据插入“图像问题”表中。

现在我知道 PHP 代码很好，因为它曾经能够毫无问题地将数据插入到两个表中。

只有在我向表中添加索引和外键之后，这个问题才开始发生。

下面是将数据插入两个表的 PHP 代码：

```
move_uploaded_file($_FILES["fileImage"]["tmp_name"],"ImageFiles/" . $_FILES["fileImage"]["name"]);

$imagesql = "INSERT INTO Image (ImageFile) VALUES (?)";

if (!$insert = $mysqli->prepare($imagesql)) {
      // Handle errors with prepare operation here
}

//Don't pass data directly to bind_param store it in a variable
$insert->bind_param("s",$img);

//Assign the variable
$img = 'ImageFiles/'.$_FILES['fileImage']['name'];

$insert->execute();

if ($insert->errno) {
   // Handle query error here
}

$insert->close();

$lastID = $mysqli->insert_id;         

$imagequestionsql = "INSERT INTO Image_Question (ImageId, SessionId, QuestionId)  VALUES (?, ?, ?)"; 

if (!$insertimagequestion = $mysqli->prepare($imagequestionsql)) { 
   // Handle errors with prepare operation here 
   echo "Prepare statement err imagequestion"; 
} 

$qnum = (int)$_POST['numimage'];

$insertimagequestion->bind_param("isi",$lastID, $sessid, $qnum); 

$sessid =  $_SESSION['id'] . ($_SESSION['initial_count'] > 1 ? $_SESSION['sessionCount'] : ''); 

    $insertimagequestion->execute(); 

                if ($insertimagequestion->errno) { 
          // Handle query error here 
        } 

        $insertimagequestion->close(); 
```

这是`SHOW CREATE TABLE`Image Table、Image_Question Table 和 Question Table 的输出，因为 Image_Question Table 与该表相关：

图像表：

```
CREATE TABLE `Image` (
 `ImageId` int(10) NOT NULL AUTO_INCREMENT,
 `ImageFile` varchar(250) NOT NULL,
 PRIMARY KEY (`ImageId`)
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 
```

Image_Question 表：

```
CREATE TABLE `Image_Question` (
 `ImageQuestionId` int(10) NOT NULL AUTO_INCREMENT,
 `ImageId` int(10) NOT NULL,
 `SessionId` varchar(10) NOT NULL,
 `QuestionId` int(5) NOT NULL,
 PRIMARY KEY (`ImageQuestionId`),
 KEY `FK_QuestionImage` (`ImageId`),
 KEY `questionId` (`QuestionId`),
 KEY `sessionId` (`SessionId`),
 CONSTRAINT `FK_Image_Question` FOREIGN KEY (`SessionId`) REFERENCES `Question` (`SessionId`) ON DELETE CASCADE,
 CONSTRAINT `FK_question` FOREIGN KEY (`QuestionId`) REFERENCES `Question` (`QuestionId`) ON DELETE CASCADE,
 CONSTRAINT `FK_QuestionImage` FOREIGN KEY (`ImageId`) REFERENCES `Image` (`ImageId`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8 
```

问题表：

```
CREATE TABLE `Question` (
 `SessionId` varchar(10) NOT NULL DEFAULT '',
 `QuestionId` int(5) NOT NULL,
 `QuestionContent` varchar(5000) NOT NULL,
 `NoofAnswers` int(2) NOT NULL,
 `AnswerId` int(10) NOT NULL AUTO_INCREMENT,
 `ReplyId` varchar(2) NOT NULL,
 `QuestionMarks` int(4) NOT NULL,
 `OptionId` varchar(3) NOT NULL,
 PRIMARY KEY (`SessionId`,`QuestionId`),
 KEY `FK_Option_Table` (`OptionId`),
 KEY `FK_IndividualQuestion` (`QuestionId`),
 KEY `FK_Reply` (`ReplyId`),
 KEY `FK_AnswerId` (`AnswerId`)
) ENGINE=InnoDB AUTO_INCREMENT=76 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:05:20.440

```
$img = 'ImageFiles/'.$_FILES['fileImage']['name'];

$insert->bind_param("s",$img); 
```

用这个代替

```
$insert->bind_param("s",$img);

//Assign the variable
$img = 'ImageFiles/'.$_FILES['fileImage']['name']; 
```

# android - 从 Android 服务创建意图选择器

> ID：12660357
> 
> 赞同：1
> 
> 时间：2012-09-30T09:57:25.530
> 
> 标签：android, android-intent, android-service

我有一个 GCM 服务，我想创建一个 Intent 选择器（使用`Intent.createChooser()`），但是尽管我一直在尝试各种事情，但我总是得到`Calling startActivity() from outside of an Activity context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?`我做错了什么或者你只是没有从服务中做到这一点？

该服务的代码如下（我尝试过的各种事情中有一些评论）；

```
public class GCMIntentService extends GCMBaseIntentService 
{
    // ...

    protected void onMessage(Context context, Intent intent)
    {
        Log.i(TAG, "Received message");
        String message = "Push received";
        displayMessage(context, message);
        fireIntent(context, message);
    }

    private void fireIntent(Context context, String url)
    {
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setType("text/plain");
        intent.putExtra(Intent.EXTRA_TEXT, url);
        //intent.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(Intent.createChooser(intent, "Share URL"));
        //context.startActivity(Intent.createChooser(intent, "Share URL"));
        //sendBroadcast(intent);
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:41:41.607

事实上，`Activity`从 a开始`Service`并不是一个好主意，因为`Service`它在后台运行，而其他一些应用程序可以在前台。`Intent`在其他应用程序运行时弹出选择器将完全破坏用户体验。一个好的决定是使用可点击`Notifications`让用户在需要`Activity`时自己启动。希望这可以帮助。

# javascript - jQuery div 可点击并跟随子 URL

> ID：12660361
> 
> 赞同：0
> 
> 时间：2012-09-30T09:57:35.110
> 
> 标签：javascript, jquery, html

有人可以向我解释为什么这不起作用吗？

对不起，我是 javascript + jQuery 的初学者。

这是代码：

**Javascript / jQuery：**

```
<script type="text/javascript"> 
    $('.clickk').click(function(e){
        window.location.href = $(this).find('a').attr('href');
    });
</script> 
```

**HTML：**

```
 <div  class="clickk" >
    <a href="google.com">link</a>
    blah blah blah.
 </div> 
```

请帮我找到我所缺少的。

提前致谢。希望问题很清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T10:04:45.110

两个可能的问题：

1.  您可能在 DOM 中存在具有该类的任何元素之前执行该脚本（更多内容见下文）。

2.  `href`应该以、`http://`例如`href="http://www.google.com"`或开头`href="http://google.com"`。只是`href="google.com"`使它成为一个*相对*链接，它不会可靠地工作。

假设你修复了#2，这里有一些关于#1的细节：

不会工作：

```
<!-- ... -->
<head>
<!-- ... -->
<script type="text/javascript"> 
  $('.clickk').click(function(e){
     window.location.href = $(this).find('a').attr('href');
  });
</script>
</head>
<body>
<!-- ... -->
<div  class="clickk" >
   <a href="http://google.com">link</a>
   blah blah blah.
</div> 
```

有两种方法可以解决此问题：

## 将脚本放在页面末尾

这通常是首选方式，将脚本放在页面*末尾*，而不是开头。

作品：

```
<body>
<!-- ... -->
<div  class="clickk" >
   <a href="http://google.com">link</a>
   blah blah blah.
</div>
<!-- ... -->
<script src="jquery.js"></script>
<script type="text/javascript"> 
  $('.clickk').click(function(e){
     window.location.href = $(this).find('a').attr('href');
  });
</script>
</body> 
```

这还通过在等待脚本下载时不暂停渲染来减少明显的页面加载时间。请参阅[YUI 的指南](http://developer.yahoo.com/performance/rules.html)（或其他任何指南）。该脚本可以访问在脚本上方定义的*DOM*元素。*脚本下方*定义的 DOM 元素不是（除非您执行以下类似操作来延迟事情）。

## 使用`ready`事件

如果由于某种原因将脚本放在最后不适合，您可以使用该[`ready`](http://api.jquery.com/ready)事件：

作品：

```
<!-- ... -->
<head>
<!-- ... -->
<script type="text/javascript"> 
  jQuery(function($) {
      $('.clickk').click(function(e){
         window.location.href = $(this).find('a').attr('href');
      });
  });
</script>
</head>
<body>
<!-- ... -->
<div  class="clickk" >
   <a href="http://google.com">link</a>
   blah blah blah.
</div> 
```

请注意，将函数传递给`jQuery`（或 into ，除非您使用，否则`$`它只是一个别名）与将函数传递给;是相同的。详情：[http ://api.jquery.com/jQuery/#jQuery3](http://api.jquery.com/jQuery/#jQuery3)`jQuery``noConflict``$(document).ready(...)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T09:59:16.980

用这个

```
$(document).ready(function(){    
    $('.clickk').click(function(e){
        window.location.href = $(this).find('a').attr('href');}
    });
)}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T09:59:25.250

代替

```
 href="google.com" // This is a relative url 
```

尝试

```
href="http://www.google.com/"  // Instead 
```

也将它封装在 DOM 就绪事件中。也许脚本甚至在元素在 DOM 中之前就已经执行了。这可以确保在元素在 DOM 中可用之后附加事件。

```
<script type="text/javascript"> 
 $(function() {
    $('.clickk').click(function(e){
       window.location.href = $(this).find('a').attr('href');
    });
  });
</script> 
```

[演示](http://jsfiddle.net/sushanth009/CAxBr/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T10:01:33.240

试试这个

**使用就绪事件**

```
<script> 
 $(document).ready(function() {
    $('.clickk').click(function(e){
       window.location.href = $(this).find('a').attr('href');
    });
  });
</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-30T10:29:10.203

只需添加我的两个位。您可以使用以下代码。虽然其他人给出的答案也应该对你有用（我个人不喜欢使用 window.location.href 的想法:)）

```
<script type="text/javascript"> 
$(document).ready(function(){
  $('.clickk').click(function(e){
     $(this).find('a')[0].click();
  });
  });
</script>

<div  class="clickk" style="cursor:pointer">
   <a href="http://google.com">link</a>
   blah blah blah.
 </div>? 
```

# android - 如何检测应用程序是否可卸载？

> ID：12660365
> 
> 赞同：4
> 
> 时间：2012-09-30T09:58:23.643
> 
> 标签：android, uninstallation

当用户单击按钮时，我将卸载应用程序。使用此代码：

```
Uri packageURI = Uri.parse("package:"
        + pkNames[position]);
Intent uninstallIntent = new Intent(
Intent.ACTION_DELETE, packageURI);
context.startActivity(uninstallIntent); 
```

但某些应用程序无法卸载。像设置或音乐或...当我要卸载这些应用程序时，我看到：卸载不成功。

我使用以下代码获取我的包裹：

```
 Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        packages = pm.queryIntentActivities(mainIntent, 0); 
```

如何检测应用程序是否可卸载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:23:24.113

您应该检查您尝试卸载的应用程序是否是“系统”，方法是查看`ApplicationInfo.flags`. 系统应用程序已`ApplicationInfo.FLAG_SYSTEM`设置位。这是一小段代码：

```
boolean isSystem(ApplicationInfo info) {
   return (info.flags & ApplicationInfo.FLAG_SYSTEM) != 0;
} 
```

检查[ApplicationInfo 类的文档以](http://developer.android.com/reference/android/content/pm/ApplicationInfo.html)获取其他有用的标志。

# cordova - 如何正确设置phonegap插件回调

> ID：12660369
> 
> 赞同：0
> 
> 时间：2012-09-30T09:58:47.950
> 
> 标签：cordova, jquery-mobile, phonegap-plugins

您好我开发了一个电话间隙插件来查看目录是否为空。

我使用下面的代码

```
 public PluginResult execute(String arg0, final JSONArray arg1, String arg2) {

        if ( arg0.equals(SHOW6) )
        {

            PluginResult result = null;

                    File file = new File("/mnt/sdcard/koinoxrista/todesktop/");

                    if(file.isDirectory()){

                        if(file.list().length>0){

                        /*  Builder dialog = new AlertDialog.Builder(ctx);
                            dialog.setNegativeButton("Ok", null);
                            AlertDialog alert = dialog.create();
                            alert.setTitle("Failure");
                            alert.setMessage("Directory is not empty!");
                            alert.show();
                        */
                            return new PluginResult(Status.ERROR, "Directory is not empty!");
                        //  System.out.println("Directory is not empty!");

                        }else{

                        /*                      
                            Builder dialog = new AlertDialog.Builder(ctx);
                            dialog.setNegativeButton("Ok", null);
                            AlertDialog alert = dialog.create();
                            alert.setTitle("Failure");
                            alert.setMessage("Directory is empty!");
                            alert.show();
                        */       
                            return new PluginResult(Status.OK, "Directory is empty!");
                    //      System.out.println("Directory is empty!");

                        }

                    }else{

                //      System.out.println("This is not a directory");

                    }

        } 
```

这就是我从 js 中调用它的方式

```
var msgbox = function() {
};

msgbox.prototype.show6 = function(success, fail) {
    return PhoneGap.exec(success, fail, "msgbox", "show6", []);
    };  

function success(e){globalcreate = 0; alert(e);}
function fail(r){globalcreate = 1; alert(r);}

msgbox = new msgbox(); 
```

我想提醒目录是否为空。

如何设置回调？

如果我在我的 .java 中取消注释警报对话框，我会收到正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:53:12.677

看起来像一个范围问题。将成功和失败方法声明为全局变量是一个坏主意。你想做这样的事情：

```
var msgbox = function() { 
};

msgbox.prototype.show6 = function(success, fail) {
    return PhoneGap.exec(success, fail, "msgbox", "show6", []);
};  

function showSuccess(e){globalcreate = 0; alert(e);}
function showFail(r){globalcreate = 1; alert(r);}

msgbox = new msgbox(); 
```

并称之为：

```
msgbox.show6(showSuccess, showFail); 
```

或者，您总是想做同样的事情，您可以将它们拉入您的方法中，例如：

```
msgbox.prototype.show6 = function() {
    var win = function(e){globalcreate = 0; alert(e);}
    var fail = function(r){globalcreate = 1; alert(r);}
    return PhoneGap.exec(win, fail, "msgbox", "show6", []);
}; 
```

并称之为：

```
msgbox.show6(); 
```

您注释掉的 Java 代码应该始终[在 UI 线程上运行，](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)如果不这样做会导致问题。

# xml - 当 record_type=VALID 时需要通过 XSLT 获取记录数

> ID：12660381
> 
> 赞同：0
> 
> 时间：2012-09-30T10:01:51.563
> 
> 标签：xml, xslt, xpath, tibco

我有以下 xml 数据，需要通过 XSLT在**record_type=VALID时获取记录数。**location_name 和 file_type 是 xslt 的输入。当它们作为输入提供时，我必须获取每个 location_name 和 file_type 的记录数。**Location_Name**和**File_Type**是 XSLT 中的变量。

```
<root>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>1</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>6</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>7</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>9</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>10</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>5</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>9</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>11</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>14</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>1</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>7</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>10</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
</root> 
```

对于 location_name=XYZ el 和 File_type=STOSO 的预期输出为 Rec_count=2 Rec_count=3 对于 location_name=XYZ XYZ 和 File_type=STOSO

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:34:36.640

**想要的 XPath 表达式是**：

```
count(/*/*
         [RECORD_TYPE='VALID' and LOCATION_NAME=$pLoc1 and FILE_TYPE=$pFType]) 
```

**和**：

```
count(/*/*
         [RECORD_TYPE='VALID' and LOCATION_NAME=$pLoc2 and FILE_TYPE=$pFType]) 
```

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:param name="pLoc1" select="'XYZ el'"/>
 <xsl:param name="pLoc2" select="'XYZ XYZ'"/>
 <xsl:param name="pFType" select="'STOSO'"/>

 <xsl:variable name="vCount1" select=
  "count(/*/*
         [RECORD_TYPE='VALID' and LOCATION_NAME=$pLoc1 and FILE_TYPE=$pFType])"/>

 <xsl:variable name="vCount2" select=
  "count(/*/*
         [RECORD_TYPE='VALID' and LOCATION_NAME=$pLoc2 and FILE_TYPE=$pFType])"/>

 <xsl:template match="node()|@*">
     <xsl:copy-of select="concat($vCount1, ', ', $vCount2)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<root>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>4</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>6</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>7</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>8</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>9</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SellOutRecord>
    <SellOutRecord>
        <FILE_TYPE>STOSO</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>10</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SellOutRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </InventoryRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>4</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </InventoryRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>5</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </InventoryRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>8</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </InventoryRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>9</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </InventoryRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>11</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </InventoryRecord>
    <InventoryRecord>
        <FILE_TYPE>STOIV</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>14</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </InventoryRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>4</RECORD_NO>
        <LOCATION_NAME>XYZ el</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>7</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>VALID</RECORD_TYPE>
        <RECORD_NO>8</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <RECORD_NO>8</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SalesInRecord>
    <SalesInRecord>
        <FILE_TYPE>STOSI</FILE_TYPE>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>10</RECORD_NO>
        <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
    </SalesInRecord>
</root> 
```

**计算两个 XPath 表达式并将计算结果复制到输出：**

```
2, 3 
```

# c++ - 有没有办法以毫秒为单位计算程序的时间复杂度？

> ID：12660383
> 
> 赞同：0
> 
> 时间：2012-09-30T10:01:57.713
> 
> 标签：c++, time, complexity-theory, milliseconds

好吧，我想比较两个程序的时间效率，它们的目的是做同样的事情。我想要一些函数/脚本/方法，以便在执行程序后，它给了我执行该过程所需的时间。喜欢 - `"The program took 0.3ms to complete"`。我已经搜索过类似主题的主题，但我对我读到的内容并不满意。因此，感谢您对这个主题的任何了解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:04:40.493

如果您想测量执行时间，您可以：

1.  使用[加速计时器](http://www.boost.org/doc/libs/1_51_0/libs/timer/doc/index.html)

2.  检索执行前后的系统时间并进行比较

# c++ - 如何在 C++ 中求解五次多项式

> ID：12660384
> 
> 赞同：6
> 
> 时间：2012-09-30T10:02:22.833
> 
> 标签：c++, polynomial-math

我有一个五次函数（5 次多项式），我想用 C++ 解决它。有没有我可以使用的实现或数学库来继续？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T12:16:53.683

> 我有一个五次函数（5 次多项式），我想用 C++ 解决它。

这里有一个问题，一个相当有名的问题。二次方程有一个简单的解。三次方程更难一些。分析解决它们的一种方法是通过卡尔达诺的方法。四次方程更难，但仍然可以解析求解。

这就是它结束的地方。*五次多项式方程（或更高）的根没有公式可以用多项式的系数来写，并且只能使用标准代数运算。*一个完整的数学分支，伽罗瓦理论，源于一个证明，即不存在五次元的通用解析解。

这意味着您将不得不求助于数字求根技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T10:29:32.207

Boost有这个。看看这里：

[http://www.boost.org/doc/libs/1_51_0/libs/math/doc/sf_and_dist/html/math_toolkit/toolkit/internals1/roots2.html](http://www.boost.org/doc/libs/1_51_0/libs/math/doc/sf_and_dist/html/math_toolkit/toolkit/internals1/roots2.html) http://www.boost.org/doc/libs/1_51_0 /libs/math/doc/sf_and_dist/html/math_toolkit/toolkit/internals2/polynomials.html

> 描述
> 
> 这些函数求解某些函数 f(x) 的根，而不需要 f(x) 的导数。这里使用 TOMS 算法 748 的函数是渐近已知的最有效的函数，并且已被证明对于某些类别的平滑函数是最优的。
> 
> 或者，有一个简单的二分例程，在某些情况下它本身就很有用，或者在调用更高级的算法之前缩小包含根的范围。

不幸的是，这些库对初学者不友好，我还没有找到如何使用它们的示例。*现在按原样*提供答案。现在，看看这里 [http://programmingexamples.net/wiki/CPP/Boost/Math/Tools/TOMS748](http://programmingexamples.net/wiki/CPP/Boost/Math/Tools/TOMS748)

您应该能够插入升压多项式而不是 t。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T10:32:06.207

也许这可以解决您的问题：[http ://www.gnu.org/software/gsl/manual/html_node/General-Polynomial-Equations.html](http://www.gnu.org/software/gsl/manual/html_node/General-Polynomial-Equations.html)

# fonts - 字体文件的正确 MIME 类型是什么？

> ID：12660389
> 
> 赞同：7
> 
> 时间：2012-09-30T10:03:30.907
> 
> 标签：fonts, mime-types, mime, truetype, iana

我一直无法找到一个规范的来源，它表明任何和/或每种文件格式的正确 MIME 类型。我发现的所有来源似乎相互矛盾和/或[IANA MIME 类型 RFC 及其相关列表](http://www.iana.org/assignments/media-types/index.html)。

虽然**我对`.otf`(OpenType) 和`.ttf`(TrueType) 文件类型**特别感兴趣，但理想的答案将提供一个规范资源，用于确定各种字体文件格式的 MIME 类型，例如维基百科[**字体文件**](http://en.wikipedia.org/wiki/List_of_file_formats#Font_file)[部分中列出](http://en.wikipedia.org/wiki/List_of_file_formats#Font_file)[的那些页面：**文件格式列表**](http://en.wikipedia.org/wiki/List_of_file_formats#Font_file)****。但是，鉴于我找不到这样的资源，似乎完全有可能不存在这样的规范参考。****

 ****我想进一步澄清一下，我不是在寻找*有效的 MIME 类型*，而是寻找*规范的 MIME 类型*。对可用于文件的字体状态的[正确 MIME 类型](https://stackoverflow.com/questions/2871655/proper-mime-type-for-fonts)的选定答案 。但是，正如投票率最高的答案（@djsadinoff）所解释的那样，它不是有效的 IANA 内容类型，也不是*正确*的MIME 类型。`font/opentype``.otf``font`

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T12:36:46.063

对于您的问题，您可能不知道有关字体类型的事实。使用此链接[Font MIME Types](http://annevankesteren.nl/2008/08/font-mime-types)。

**roc** [报告了 Web 字体](http://robert.ocallahan.org/2008/08/coming-battle-over-web-fonts_14.html)之战，其中简短的版本是非 IE 浏览器是否应该支持字体的 DRM 格式。（也许他们是否可以开箱即用地支持 TrueType 和 OpenType。）我真的不认为我们应该支持字体的 DRM 格式。似乎它会在网络上开创一个不好的先例，如果供应商没有正确执行事情，可能会让他们承担责任，并使作者的事情变得复杂。

W3C[为 EOT 工作组制定了章程草案](http://lists.w3.org/Archives/Public/www-archive/2008Aug/att-0010/EOT-charter-draft-1.html)；EOT（嵌入式 OpenType）是微软提倡的 DRM 格式。我不知道 EOT 是如何引导 Web 发挥其全部潜力的，但我们会看到它的结果。

除了格式问题，可能值得考虑为字体引入 MIME 类型。（如果这对于此时的实现来说为时已晚，则可能为时已晚。）好处是任意文件（例如，文本/html 文件）不会被解释为字体。不利的一面是，这使作者的工作变得更加困难，因为他们必须确保正确标记它。（在 Web 图像（SVG 除外）和 JavaScript 上，不会检查资源是否具有正确的 MIME 类型。对于图像，浏览器会嗅探图像签名并简单地执行从脚本元素加载的内容（确实不太好） .)

鉴于支持 @font-face 将很快在 Opera、Safari 和 Firefox 中发布，因此需要尽快做出决定。可能在相关 MIME 类型通过 IETF 标准化之前。另一个复杂之处是 OpenType 和 TrueType 可以携带 otf 和 ttf 作为扩展名，操作系统可以很好地处理它。不过，两者都使用单一的 MIME 类型可能会起作用，就像 XHTML 和 SVG 都可以使用 text/xml 一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T00:37:04.940

您的答案在[规格](http://www.rfc-editor.org/rfc/rfc2046.txt)中。

> 4.5.1。八位流子类型
> 
> “八位字节流”子类型用于指示主体包含任意二进制数据。

也在同一文件的第 4 页

> ```
> (5)   application -- some other kind of data, typically
>       either uninterpreted binary data or information to be
>       processed by an application.  The subtype "octet-
>       stream" is to be used in the case of uninterpreted
>       binary data, in which case the simplest recommended
>       action 
> ```

我仍然不确定这个**文件**是否是二进制数据，所以我使用 linux file() 命令检查了 mime 类型。

```
 $ file --mime-type 
    Days-webfont.ttf: application/octet-stream 
```

## 你去吧，它是一个非常清晰的八位字节流！

不过，我仍然有些怀疑，所以我想要更多资源。浏览器将如何解释这一点？[这是Mozilla不得不说的……](https://developer.mozilla.org/en-US/docs/CSS/@font-face)

> **注意：**由于没有为 TrueType、OpenType 和 Web 开放文件格式 (WOFF) 字体定义 MIME 类型，因此不考虑指定文件的 MIME 类型。

*有趣的 Mozilla 说没有为 .ttf .otf 或 .woff**定义 MIME 类型。***

## Mozilla 也有一些资源可以帮助您

[确定内容的正确 MIME 类型](https://developer.mozilla.org/en-US/docs/Properly_Configuring_Server_MIME_Types)

> **如何为您的内容确定正确的 MIME 类型**
> 
> 您可以采取几个步骤来确定要用于您的内容的正确 MIME 类型值。
> 
> 如果您的内容是使用供应商的软件应用程序创建的，请阅读供应商的 > 文档以查看应针对不同媒体类型报告哪些 MIME 类型。
> 
> 查看 IANA | MIME 媒体类型注册表，其中包含所有已注册的 MIME 类型。
> 
> 如果使用 Netscape Gecko 中的插件显示媒体类型，请安装插件并 > 然后查看“帮助”->“关于插件”菜单以查看哪些 MIME 类型与 >媒体类型相关联。
> 
> 在 FILExt 或文件扩展名参考中搜索文件扩展名，以查看哪些 MIME > 类型与该扩展名相关联。

我不建议你去 FILExt 页面或文件扩展名引用，它们不会做 file() 在 bash 中不能做的任何事情。

通过搜索文档，我发现了*几乎*符合要求的各种应用程序子类型；vnd.ms-fontobject，但这仅适用于`.eot`文件，font-tdpfr，但仅适用于`.pfr`文件。

## **所以看起来规格没有指定**

我相信。 **所以我猜你的规范资源会将 file() 的输出与规范中的内容进行比较。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-10T11:33:51.200

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T21:40:40.167

正如其中一条评论所说：

> 更好的 mime 类型是“application/x-font-opentype”或“application/octet-stream”。第一个基本上是“具有此名称的未注册 mimetype”，第二个只是“二进制数据”

其中任何一个在技术上都是*正确*的，因为第一个是非官方类型的公认 MIME 类型格式，第二个是二进制数据的通用 MIME 类型，没有更具体的官方 MIME 类型。我根据[RFC2046](http://www.rfc-editor.org/rfc/rfc2046.txt)验证了这个声明，它似乎成立了。在正式成为官方之前，最正确的方法是对非官方类型使用公认的格式，或者使用泛型类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T19:52:01.260

目前，OpenType 和 TrueType 似乎没有任何特别“正确”的 MIME 类型。

但是，Web 开放字体格式（可用作两者的包装器）具有`application/font-woff`（由[W3C](http://w3c.org/)注册）。Embedded OpenType 格式（OpenType 的紧凑版本）使用`application/vnd.ms-fontobject`（由 Microsoft 注册）。

如果你想回到过去，你可以使用`application/font-tdpfr`TrueDoc Portable Font Resource。Netscape Navigator 4 原生支持此功能。☺</p>*****

# opencv - cv::Mat::zeros 初始化问题

> ID：12660390
> 
> 赞同：1
> 
> 时间：2012-09-30T10:03:36.280
> 
> 标签：opencv

我的问题令人惊讶。这是代码

```
 #define NCHANNEL 3
 #define NFRAME 100
 Mat RR = Mat::zeros(NCHANNEL, NFRAME-1, CV_64FC1);

double *p_0 = RR.ptr<double>(0);
double *p_1 = RR.ptr<double>(1);
double *p_2 = RR.ptr<double>(2); 
cout<< p_0[NFRAME-1] << endl << p_1[NFRAME-1] << endl << p_2[NFRAME-1] << endl; 
```

输出为： 0 0 -6.27744e+066 。
那个可怕的数字是从哪里来的？
看来我正在打印一个指针或内存中的一些粗糙的东西。
（嗯，0 是所有其他元素的值，当然）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:13:55.277

您在 Mat 的最后一个元素之后访问。如果您`NFRAME-1`用于初始化，则最后一个元素具有`NFRAME-2`索引。

# java - apple.eawt.Application 创建了一个虚假菜单？

> ID：12660391
> 
> 赞同：0
> 
> 时间：2012-09-30T10:03:37.850
> 
> 标签：java, macos, swt, finder

如果我`com.apple.eawt.Application;`像这样实例化它，甚至最低限度地使用它：

```
 Application app = Application.getApplication () 
```

默认的 Mac 应用程序菜单行为异常。

下面的最小可运行测试代码显示，当它启动时，“Hello World”外壳和只有默认的应用程序菜单，如预期的那样标记为“SWT”。

如果没有应用程序，选择“退出”（或按 Command-Q 键）会正常退出程序。

对于应用程序，选择“退出”（或按 Command-Q 键）似乎会正常退出程序（例如 shell 消失），但标有“SWT”的菜单仍然可见。它不设防，也不可选择。根据IDE（Idea），我的测试程序仍在运行，必须通过IDE终止。

在我的环境中，使用下面的测试代码可以 100% 重现。

```
import com.apple.eawt.Application;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Label;
import org.eclipse.swt.widgets.Shell;

public class AboutTester
{

    public static void main ( String[] args )
        {
            Display display = new Display ();
            Shell shell = new Shell ( display );
            shell.setSize ( 300, 200 );
            shell.setLayout ( new FillLayout () );

                            // Comment out the following line - problem goes away.
                Application app = Application.getApplication ();

            Label label = new Label ( shell, SWT.BORDER_SOLID );
            label.setText ( "Hello World" );
            shell.open ();
            while ( !shell.isDisposed () )
                {
                    if ( !display.readAndDispatch () )
                        display.sleep ();
                }
            display.dispose ();
        }
} 
```

当然，`com.apple.eawt.Application;`在 Mac 上无法访问 a 是一个很大的障碍。

有谁知道这个问题的解决方案？

全面披露：我认为可能发生的事情（从其他观察）是应用程序正在生成一个菜单，然后 SWT 用 SWT 生成的菜单覆盖该菜单。附加 AboutHandler() 附加到应用程序生成的菜单 - 因此在使用最顶部的 SWT 生成的菜单时似乎不起作用。当 SWT 菜单退出时，它将应用程序生成的菜单作为孤儿留下。我的测试应用程序不知道如何清理此应用程序生成的菜单，因此挂起。但那是猜测。

Mac OS X 10.6.8 (10K549)
org.eclipse.swt.cocoa.macosx.x86_64_3.7.0.v3735b.jar
org.eclipse.swt_3.7.1.v3738a.jar

（忍者编辑错别字）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:16:09.793

我看到完全相同的问题，我认为这可能是线程问题。如果您想在 mac 上使用自定义菜单，请考虑使用此文件来处理来自 Eclipse SWT 端的内容[https://github.com/ajdaniel/tvrenamer/blob/devel/src/main/com/google/code /tvrenamer/view/CocoaUIEnhancer.java](https://github.com/ajdaniel/tvrenamer/blob/devel/src/main/com/google/code/tvrenamer/view/CocoaUIEnhancer.java)。

# jquery - jQuery 不会将带有 ID 的元素作为有效的电子邮件地址

> ID：12660393
> 
> 赞同：0
> 
> 时间：2012-09-30T10:03:58.693
> 
> 标签：jquery

> **可能重复：**
> [html标签的id中的特殊字符](https://stackoverflow.com/questions/6675454/special-characters-in-id-of-html-tags)

我有一个 ID 为电子邮件的 DIV：

```
<div id="example@example.com">This is blah blah text</div> 
```

现在使用 jQuery，我想选择该 DIV 并将其隐藏：

```
$('#example@example.com').hide(); 
```

那是行不通的！

由于我正在动态生成这些 DIV，并且我不想再次查询数据库以获取真实的行 ID，因此我将使用电子邮件地址作为 ID，但我做不到......

有什么解决办法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:09:06.473

请注意，像这样的 ID 仅在 HTML5 中是合法的。

要在 jQuery 中使用这些 ID 作为选择器，您必须转义特殊字符：

```
$('#example\\@example.com').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:08:10.273

> 如果您希望使用任何元字符（例如`!"#$%&'()*+,./:;<=>?@[\]^`{|}~` ）作为名称的文字部分，则必须使用两个反斜杠转义该字符：\

您的 id 在 html4.1 下无效，它必须遵循以下规则

1.  必须包含至少一个字符
2.  不得包含任何空格字符
3.  在 HTML 中，所有值都不区分大小写

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

以上来自[http://www.w3.org/TR/html4/types.html#type-id](http://www.w3.org/TR/html4/types.html#type-id)

但如果您使用的是 heml5，则以下内容有效

```
<div id="#">Foo.
<div id="##">Bar.
<div id="♥">Baz.
<div id="©">Inga.
<div id="{}">Lorem.
<div id="“‘’”">Ipsum.
<div id="⌘⌥">Dolor.
<div id="{}">Sit.
<div id="[attr=value]">Amet.
<div id="++++++++++[>+++++++>++++++++++>+++>+<<<<-]>++.>+.+++++++..+++.>++.<<+++++++++++++++.>.+++.------.--------.>+.>.">Hello world! 
```

要使用它，您需要通过`\\`like来逃避这些东西`$('#example\\@example.com')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:40:12.233

您不能使用“example@example.com”作为 html 元素的 id，而是使用这样的 data 属性

```
<div data-id="example@example.com">
</div> 
```

然后使用jQuery像这样选择它

```
$('div[data-id="example@example.com"]').hide(); 
```

# asp.net-mvc - 将值从 EditorFor 传递给控制器

> ID：12660394
> 
> 赞同：2
> 
> 时间：2012-09-30T10:04:02.843
> 
> 标签：asp.net-mvc, asp.net-mvc-3

这是我的观点，教育是模型中的列表。

```
 @using chpayroll.Models.CustInformations
 @model CustInfoExtract

 @Html.HiddenFor(x => x.flag, new { @id = "flag" })
      @Html.HiddenFor(x => x.StaffId)
        <table style=" width:730px">    
            <tr>
                <th>Country</th>
                <th>Board</th>
                <th>Level</th>
                <th>PassedYear</th>
                <th>Division</th>
            </tr>     
            <tr> 
               @Html.EditorFor(x => x.education)
            </tr>
            <tr>
               <td><input type="submit" value="Add Another" id="addedu"/> </td> 
            </tr>
        </table> 
```

我有如下编辑器模板

```
@using staffInfoDetails.Models
@model staffInfo.education

@Html.HiddenFor(x=>x.staffId)

<tr>
    <td >@Html.DropDownListFor(x => x.country, Model.countryList, "--select--", new { @id="country"})</td>
    <td>@Html.TextBoxFor(x => x.board, new { @id="board"})</td>
    <td>@Html.TextBoxFor(x => x.level, new { @id="level"})</td>
    <td>@Html.TextBoxFor(x => x.passedYr, new { @id="passedYr"})</td>
    <td>@Html.DropDownListFor(x => x.passedDiv, Model.passedDivList, "--select--", new { @id="division"})</td>
</tr> 
```

我正在尝试将模型从控制器传递到视图，然后从视图传递回控制器。当我将模型传递给视图时，教育列表通过了，但是，当我尝试将模型从视图传递到控制器时，除了教育列表之外的所有其他内容都通过了。我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:53:09.187

只有从下拉列表中选择的值将被发回，因此如果验证失败（即，如果必须重新显示视图），您将需要重新填充下拉列表。

您的 POST 操作可能类似于以下内容：

```
[HttpPost]
public ActionResult Home(CustInformations viewModel)
{
    if (!ModelState.IsValid)
    {
        // Re-populate drop-down list and redisplay form
        viewModel.DropdownListOptions = _repository.getEductionList();
        return View(viewModel);
    }

    // Validation passed
    // Save, update, etc and redirect to new page
} 
```

# javascript - arbor js - 保存和加载图表

> ID：12660402
> 
> 赞同：1
> 
> 时间：2012-09-30T10:05:02.880
> 
> 标签：javascript, diagram, arbor.js, force-based-algorithm

我正在使用 arbor js 使用其基于力的算法创建图表。

我希望能够在总能量低于某个点后保存节点的 x,y 系统坐标，以便在访问图表时可以将它们重新加载，以避免重新处理所有从零开始的能量。

我这样做有两个问题：

1.  `sys.energy().sum`总是返回`NaN`

    *   作为替代方案，我决定`setTimeout`在给定的时间段过后保存图形节点位置
2.  虽然我已经能够将节点 x,y 系统坐标保存到 DB，但当我尝试使用保存的 xy 坐标将数据加载到图形中（使用`sys.merge`或`sys.addNode`）时，图形无法显示，并且出现“内存不足”消息出现在控制台日志中。

这是一个保存节点 x,y 系统坐标的数据示例，这会导致 arbor js 在加载时崩溃：

```
{"nodes":{"0":{"edgeCount":0,"x":13.11901,"y":14.89151,"id":0,"name":"Global"},"23":

{"edgeCount":1,"x":18.08981,"y":-0.8355745,"id":23,"name":"Aristotle"},"26":  
{"edgeCount":1,"x":5.688836,"y":14.86863,"id":26,"name":"Socrates"},"27":
{"edgeCount":1,"x":14.84461,"y":-1.687457,"id":27,"name":"Christianity"},"34":
{"edgeCount":1,"x":-2.265221,"y":13.59168,"id":34,"name":"Maths"},"91":
{"edgeCount":11,"x":5.868572,"y":-1.315289,"id":91,"name":"Plato"},"92":
{"edgeCount":4,"x":-3.14131,"y":8.81194,"id":92,"name":"Virtue"},"127": 
{"edgeCount":1,"x":-3.308347,"y":8.463552,"id":127,"name":"Poetry"},"131":
{"edgeCount":1,"x":7.605158,"y":-3.951363,"id":131,"name":"Wisdom"},"147":
{"edgeCount":1,"x":6.195698,"y":-4.572639,"id":147,"name":"Person"},"149":
{"edgeCount":1,"x":2.10395,"y":-2.390886,"id":149,"name":"Republic"},"171":
{"edgeCount":1,"x":3.359434,"y":-3.996424,"id":171,"name":"Justice"},"172":
{"edgeCount":1,"x":-0.2544371,"y":-4.218832,"id":172,"name":"Temperance"},"173":
{"edgeCount":1,"x":-8.773163,"y":2.587845,"id":173,"name":"Courage"},"178":
{"edgeCount":1,"x":-2.380451,"y":-5.787674,"id":178,"name":"Schopenhauer"},"194":
{"edgeCount":2,"x":-7.747643,"y":-1.653015,"id":194,"name":"Beauty"},"195":
{"edgeCount":1,"x":-10.45985,"y":-2.670299,"id":195,"name":"Objective"},"196":
{"edgeCount":1,"x":-10.64573,"y":-6.874766,"id":196,"name":"Truth"},"219":
{"edgeCount":1,"x":-6.22574,"y":-7.565969,"id":219,"name":"Theory of forms"},"221":
{"edgeCount":1,"x":-8.314561,"y":-7.570002,"id":221,"name":"Platinus"},"245":
{"edgeCount":0,"x":-13.20351,"y":-8.421284,"id":245,"name":"Diagram"},"254":
{"edgeCount":1,"x":-13.54734,"y":-7.7437,"id":254,"name":"Green"}},
    "edges":{"23":{"91":{"context":{"id":0,"name":"Global"},"source":
{"id":23,"name":"Aristotle"},"predicate":{"id":21,"name":"studied with"},"target":
{"id":91,"name":"Plato"}}},"26":{"91":{"context":{"id":0,"name":"Global"},"source":
{"id":26,"name":"Socrates"},"predicate":{"id":2,"name":"inspires"},"target":
{"id":91,"name":"Plato"}}},"91":{"149":{"context":{"id":0,"name":"Global"},"source":
{"id":91,"name":"Plato"},"predicate":{"id":1,"name":"writes"},"target":
{"id":149,"name":"Republic"}},"219":{"context":{"id":0,"name":"Global"},"source":
{"id":91,"name":"Plato"},"predicate":{"id":1,"name":"writes"},"target":{"id":219,"name":"Theory of forms"}},"27":{"context":{"id":0,"name":"Global"},"source":{"id":91,"name":"Plato"},"predicate":
{"id":3,"name":"influences"},"target":{"id":27,"name":"Christianity"}},"178":{"context":
{"id":0,"name":"Global"},"source":{"id":91,"name":"Plato"},"predicate":
{"id":3,"name":"influences"},"target":{"id":178,"name":"Schopenhauer"}},"221":{"context":
{"id":0,"name":"Global"},"source":{"id":91,"name":"Plato"},"predicate":
{"id":3,"name":"influences"},"target":{"id":221,"name":"Platinus"}},"254":{"context":
{"id":245,"name":"Diagram"},"source":{"id":91,"name":"Plato"},"predicate":
{"id":28,"name":"is"},"target":{"id":254,"name":"Green"}},"34":{"context":
{"id":0,"name":"Global"},"source":{"id":91,"name":"Plato"},"predicate":{"id":33,"name":"is associated with"},"target":{"id":34,"name":"Maths"}},"127":{"context":
{"id":0,"name":"Global"},"source":{"id":91,"name":"Plato"},"predicate":{"id":47,"name":"is obsessed with"},"target":{"id":127,"name":"Poetry"}},"147":{"context":
{"id":0,"name":"Global"},"source":{"id":91,"name":"Plato"},"predicate":{"id":56,"name":"is type of"},"target":{"id":147,"name":"Person"}}},"92":{"131":{"context":{"id":91,"name":"Plato"},"source":
{"id":92,"name":"Virtue"},"predicate":{"id":28,"name":"is"},"target":
{"id":131,"name":"Wisdom"}},"171":{"context":{"id":91,"name":"Plato"},"source":
{"id":92,"name":"Virtue"},"predicate":{"id":28,"name":"is"},"target":
{"id":171,"name":"Justice"}},"172":{"context":{"id":91,"name":"Plato"},"source":
{"id":92,"name":"Virtue"},"predicate":{"id":28,"name":"is"},"target":
{"id":172,"name":"Temperance"}},"173":{"context":{"id":91,"name":"Plato"},"source":
{"id":92,"name":"Virtue"},"predicate":{"id":28,"name":"is"},"target":
{"id":173,"name":"Courage"}}},"194":{"195":{"context":{"id":91,"name":"Plato"},"source":
{"id":194,"name":"Beauty"},"predicate":{"id":28,"name":"is"},"target":
{"id":195,"name":"Objective"}},"196":{"context":{"id":91,"name":"Plato"},"source":
{"id":194,"name":"Beauty"},"predicate":{"id":33,"name":"is associated with"},"target":
{"id":196,"name":"Truth"}}}}} 
```

我找不到节点 x,y 坐标位于输入数据中的图形示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:32:20.413

查看[https://github.com/samizdatco/arbor/blob/master/src/physics/system.js#L83](https://github.com/samizdatco/arbor/blob/master/src/physics/system.js#L83)似乎在数据字典中包含 x 和 y 值应该没问题。从您的示例中，我不确定您如何将数据传递给方法。也许尝试只添加一些节点并查看它们的放置位置。我对 NaN 的能量有同样的问题。可能使用调试器会有所帮助。

# javascript - 使用 jQuery 反转箭头键按下

> ID：12660403
> 
> 赞同：3
> 
> 时间：2012-09-30T10:05:13.747
> 
> 标签：javascript, jquery

我正在使用以下 css 来反转 textarea：

```
.reverse
{
  /* reverse the text */
  transform: scale(-1, 1);
  -webkit-transform: scale(-1, 1);
  -moz-transform: scale(-1, 1); 
  -o-transform: scale(-1, 1); 
  transform: scale(-1, 1);
} 
```

这很好用，除了一件事：使用箭头键浏览文本现在是向后的。我想反转箭头键的方向，以便它们按预期工作。这是我尝试过的：

```
$(document).ready(function() {

  // flag which indicates when the key event has been overridden
  var keyEventOverridden = false;

  // reverse the arrow keys for the reverse textbox
  $(".reverse").bind("keydown keyup", function(event) {

    // allow the default behavior if the key has already been overridden
    if (keyEventOverridden)
      return true;

    // get the keyCode
    var keyCode = event.keyCode || event.which;

    // create the replacement event
    var replacementEvent = $.Event(event.type);

    // trigger the right key if the left key was pressed down
    if (keyCode === 37)
    {
      replacementEvent.keyCode = 39;
      replacementEvent.which = 39;
    }
    // trigger the left key if the right key was pressed down
    else if (keyCode === 39)
    {
      replacementEvent.keyCode = 37;
      replacementEvent.which = 37;
    }
    else
    {
      // allow the default behavior
      return true;
    }

    // prevent the key event from being overridden again
    keyEventOverridden = true;

    // trigger the replacement event
    $(this).trigger(replacementEvent);

    // allow the key event to be overridden again
    keyEventOverridden = false;

    // prevent the default behavior
    return false;
  });
}); 
```

这个脚本不起作用。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:34:14.763

好吧，无法让它按照您最初设计的方式工作（即通过触发伪事件），浏览器只是不允许操纵事件。

我已经做了一个可能对你有用的解决方法。

检查**演示**：http: [//jsfiddle.net/pL3Yj/6/](http://jsfiddle.net/pL3Yj/6/)

解决方案涉及覆盖左/右箭头并自己移动插入符号。

# c++ - 通过 QT C++ 连接到 SQL Server 2005

> ID：12660406
> 
> 赞同：1
> 
> 时间：2012-09-30T10:05:28.820
> 
> 标签：c++, sql, linux, qt, qt4

我有一台 windows server 2003 的服务器，它在我的本地网络上的 IP 是 192.168.1.220 这个服务器安装了 SOL server 2005 express edition。此 SQL 服务器有一个名为 amir 的数据库。

我想从同一网络上的 Linux 客户端连接到它。SQL 服务器服务在我的服务器上使用端口 1617，我使用此端口使用 java 连接到服务器。

哇，我想使用 QT C++，但我的代码不起作用。

这是我的代码：

```
#include <QtCore/QCoreApplication>
#include <iostream>
#include <QSqldatabase>
#include <QSqldriver>
int main(int argc, char *argv[])
{
   QCoreApplication a(argc, argv);
   QSqlDatabase db = QSqlDatabase::addDatabase("QODBC");
   bool test=db.isValid();//true
   test=db.isDriverAvailable("QODBC");//true
   db.setHostName("192.168.1.220\\SQLEXPRESS");
   db.setDatabaseName("DRIVER={SQL Server};SERVER=192.168.1.220\\SQLEXPRESS:1617;DATABASE=amir");
   db.setUserName("sa");
   db.setPassword("amir");
   db.setPort(1617);
   test=db.isValid();//true
   if(!db.open())
   {
      cout<<endl<<"not connected"<<endl;
      QString error=db.lastError().text();
      cout<<error.toLocal8Bit().data();
      return false;
   }
   else
      cout<<endl<<"connected"<<endl;
      return true;
 } 
```

每次我尝试它“未连接”并且错误是

> [unixODBC][Driver Manager]未找到数据源名称，并且未指定默认驱动程序 QODBC3：无法连接

使用这些参数，我可以使用 java 进行连接

那么这里有什么问题呢？如果有另一种使用 qt c++ 连接到 SQL 服务器的快速方法，而不是 ODBC 驱动程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:57:35.647

您需要在服务器上设置数据源名称才能通过 ODBC 连接。这是我用来设置 DSN 的一些代码：

```
QString SQLServerProvider::buildDSN(QString server, QString database, QString username, QString password)
{
#ifdef Q_WS_MACX
    QString dsn = QString("DRIVER=/usr/local/lib/libtdsodbc.so;SERVER=%1;TDS_VERSION=8pClient;DATABASE=%2;PORT=1433;UID=%3;PWD=%4;").arg(server).arg(database).arg(username).arg(password);
#endif

#ifdef Q_WS_X11
    QString dsn = QString("DRIVER={FreeTDS};SERVER=%1;TDS_VERSION=8.0;PORT=1433;DATABASE=%2;UID=%3;PWD=%4;").arg(server).arg(database).arg(username).arg(password);
#endif

#ifdef Q_WS_WIN
    QString dsn = QString("DRIVER={SQL SERVER};SERVER=%1;DATABASE=%2;UID=%3;PWD=%4;").arg(server).arg(database).arg(username).arg(password);
#endif
    return dsn;
}
QSqlDatabase db = QSqlDatabase::addDatabase("QODBC", databaseName);
db.setDatabaseName(buildDSN(server, database, username, password)); 
```

这是我忘记放在初始帖子中的一些代码：

```
 #ifdef Q_WS_X11
    QString dir = QDir::homePath();
    QDir d;
    QString libdir = d.absolutePath();

    QFile odbcinst(dir + "/.odbcinst.ini");
    if(!odbcinst.exists())
    {
        odbcinst.open(QIODevice::WriteOnly | QIODevice::Text);
        QTextStream out(&odbcinst);
        out << "[FreeTDS]\n";
        out << "Description = v0.91 with protocol v8.0\n";
        out << "Driver = " + libdir + "/libtdsodbc.so\n";
        out << "Setup = " + libdir + "/libtdsodbc.so\n";
        out << "FileUsage = 1";
        odbcinst.close();
    }
    else
    {
        QList<QString> lines;

        odbcinst.open(QIODevice::ReadOnly | QIODevice::Text);
        QTextStream readfile(&odbcinst);

        int i = 0, lnbr = 0;
        bool found = false;
        while(!readfile.atEnd())
        {
            QString line = readfile.readLine();
            if(line.contains("[FreeTDS]"))
            {
                lnbr = i;
                found = true;
            }
            lines.append(line);
            i++;
        }
        odbcinst.close();

        // append to end
        if(!found)
        {
            // append to the end
            odbcinst.open(QIODevice::Append | QIODevice::Text);
            QTextStream file(&odbcinst);

            file << "\n[FreeTDS]\n";
            file << "Description = v0.91 with protocol v8.0\n";
            file << "Driver = " + libdir + "/libtdsodbc.so\n";
            file << "Setup = " + libdir + "/libtdsodbc.so\n";
            file << "FileUsage = 1";
            odbcinst.close();
        }
        else // update existing entry
        {
            qDebug() << "Found an entry for FreeTDS. Updating driver to " + libdir + "/libtdsodbc.so.";
            qDebug() << lines[lnbr+2];
            qDebug() << lines[lnbr+3];

            lines.replace(lnbr + 2, "Driver = " + libdir + "/libtdsodbc.so");
            lines.replace(lnbr + 3, "Setup = " + libdir + "/libtdsodbc.so");

            QString text;
            for(int j = 0; j < lines.count(); j++)
            {
                text.append(lines[j] + "\n");
            }

            odbcinst.open(QIODevice::WriteOnly | QIODevice::Text);
            QTextStream updatefile(&odbcinst);
            updatefile << text;
            odbcinst.close();
        }

    }
#endif 
```

此代码在您的主目录中创建 .odbcinst.ini 文件（如果该文件不存在）并为 FreeTDS 添加一个条目。如果确实存在，它将附加到文件的末尾。如果文件中已经存在 FreeTDS 条目，它将更新现有文件。如果您还没有，这里是设置 FreeTDS 的指南：http: [//pzuk.wordpress.com/2012/02/03/how-to-make-freetds-unixodbc-and-qt-working-together/](http://pzuk.wordpress.com/2012/02/03/how-to-make-freetds-unixodbc-and-qt-working-together/)

请注意，我发布的用于配置 FreeTDS 的代码仅在您想将 FreeTDS 与您的应用程序捆绑在一起并且从您启动的位置正确设置库路径时才需要。它以标准用户而不是 root 用户身份运行，因此一切都在本地用户帐户中完成。

# vb.net - 在 Visual Basic 中创建以用户文本命名的目录

> ID：12660408
> 
> 赞同：1
> 
> 时间：2012-09-30T10:05:46.557
> 
> 标签：vb.net, visual-studio

一般来说，我对编程很陌生。我正在开发一个简单的应用程序，它可以结合几个功能来自动化或简化我在工作中所做的一些事情。我正在尝试构建的功能之一是能够创建一个文件夹。现在，我在 Microsoft 的 msdn 资源上找到了一篇关于此的文章，这简直是小菜一碟。但是那里的说明只显示了如何在代码中创建一个具有预定义名称的文件夹。我想要的是有一个文本框，我可以在其中输入文件夹的名称，并使用该输入命名目录。msdn 代码如下所示：

```
My.Computer.FileSystem.CreateDirectory _
("C:\vb\") 
```

我知道我现在应该添加：

```
Dim txt As String
txt = TextBox1.Text 
```

但接下来呢？如何告诉 VB 使用输入“txt”作为目录名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:09:41.623

试试这个：

```
Dim txt As String
txt = TextBox1.Text
My.Computer.FileSystem.CreateDirectory("C:\" & txt & "\") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T02:30:57.953

使用`&`对于大多数目的来说很简单并且通常很好，但是对于您的两个（包括您作为评论添加的内容）连接示例，还有其他方法：

对于路径名操作，请查看`System.IO.Path`：

```
My.Computer.FileSystem.CreateDirectory(Path.Combine("C:\", txt)) 
```

对于（复杂）字符串“格式化”，请考虑`String.Format`：

```
Dim menu As String = String.Format("Today's main dish is {0}.", TextBox2.Text) 
```

# opencl - ATI Radeon HD 6750M 和 6970M 有多少个 OpenCL 寄存器？

> ID：12660410
> 
> 赞同：2
> 
> 时间：2012-09-30T10:06:16.870
> 
> 标签：opencl, gpu

我找不到有关 ATI Radeon HD 6750M 和 6970M GPU 中寄存器数量的任何信息。我想优化我的 OpenCL 内核以利用尽可能多的处理单元，所以我需要估计每个线程的最大寄存器数。我在哪里可以找到 ATI GPU 的完整规格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:08:11.563

我想你错过了 AMD/ATI 最好的 OpenCL 编程指南。[AMD APP OpenCL](http://developer.amd.com/tools/hc/AMDAPPSDK/assets/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide.pdf)提供了支持 OpenCL 的 ATI/AMD GPU 的详细规范，以优化 OpenCL 计算的代码。根据本文档（表 D.3 和表 D.2），这两个 GPU 的每个 CU（计算单元）有 16384 个寄存器 (256 KB)。

# php - 使用 jQuery ajax 将 JavaScript 数组发送到 php 服务器

> ID：12660414
> 
> 赞同：1
> 
> 时间：2012-09-30T10:06:44.577
> 
> 标签：php, json, jquery

这是我的 jQuery 代码。我在正确格式化 JSON 中的数据时遇到问题，并且请求失败。我需要做什么才能正确发送它并能够在服务器上对其进行解码？

```
$(".comment_button").click(function() {

    var chkarray = [];
    $('.webInput:checked').each(function(){
        chkarray.push($(this).val());
    });

    var dataString = "content="+ chkarray;

    if(test=='')
    {
        alert("Please check checked");
    }

    $.ajax({
        type: "POST",
        url: "chkoutput.php",
        dataType:'json',
        data: dataString,
        cache: false,
        success:
            function(html)
            {
                $("#test_area").after(html);
                document.getElementById('content').value='';
                $("#flash").hide();
            }
    }); 
```

这是服务器端代码：

```
$chk_out = $_POST["content"];
echo json_encode($chk_array); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:14:02.620

```
var dataString=JSON.stringify(chkarray)   ;
  $.ajax({
        type: "POST",
        url: "chkoutput.php",
        dataType:'json',
        data: {"dataString":dataString},
        cache: false,
        success:
            function(html)
            {
                $("#test_area").after(html.data);
                document.getElementById('content').value='';
                $("#flash").hide();
            } 
```

在服务器端

```
$chk_out = json_decode(dataString);
$data=$chk_out->data;//$data is data which you added to array or we can say
 // $chk_out["data"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:21:06.840

尝试这个

```
$.ajax({
   type: "POST",
   url: "BACKEND.php",
   timeout: 8000,
   data: "var1=" + myVar,
   dataType: "json",
   error: function(){
     $("#DIVID").html("<div class='error'>Error!</div>");
   },  
   success: function(jsonObj){
     $("#DIVID").html(jsonObj.mydata);
   }
 });

PHP Array:
$data['mydata'] = $myData; 
```

或按照以下步骤

1.  使用 var st = JSON.stringify(your_object); 字符串化您的 javascript 对象 (json);

2.  将您的 POST 数据作为“字符串”传递（可能使用 jQuery：$.post('foo.php',{data:st},function(data){... }）；

3.  在服务器端处理解码您的数据： $data = json_decode($_POST['data']);

或简单的一个

```
var array = [1,2,3,4,5,6];
$.ajax({
  url: "mydomain.com/url",
  type: "POST",
  dataType: "json",
  data: {arrayName: array},
  complete: function() {
    //called when complete
  },
  success: function() {
    //called when successful
  },
  error: function() {
    //called when there is an error
  },
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T10:21:19.133

如果你想传递数组和 post 方法，你可以试试这个，使用 $.post 来简化我已经更新了你的代码。

```
$(".comment_button").click(function() {

        var chkarray = [];
        $('.webInput:checked').each(function(){
        chkarray.push($(this).val());
        });
       // var dataString = "content="+ chkarray;      
    if(test=='')
    {
    alert("Please check checked");

    }
        $.post('chkoutput.php',{dataString:chkarray },function(data){

                     $("#test_area").after(html);
                     document.getElementById('content').value='';
                     $("#flash").hide();
                        });
} 
```

正如你提到的，你不知道 jquery 首先检查 javascript 错误，在任何调试工具（如 mozila firebug 或任何方便的东西）中并发布它们以便更好地提供帮助。

**为我亲爱的评论员编辑**

我应该向大家道歉，让大家感到困惑，我在 var dataString 上添加了一条评论，但即使没有评论，代码也可以工作。因为 $.post 参数中的 dataString 不代表 var dataString。它是传递给 $.post 方法的全新对象的属性名称，所有其他内容都由 $.post 函数管理。我真的很惊讶没有人在责备之前尝试或检查过。

如果您不同意，这肯定会起作用，只需将以下代码复制并粘贴到 php（命名为 index.php）文件中并点击它，然后单击按钮，看看会发生什么，然后问我它是如何工作的

```
<?php 
if(!empty($_POST))
{
  var_dump($_POST);exit;
}
?>
<!DOCTYPE html>
<html>
<body>

<h1>Please GET It</h1>

<script src="http://code.jquery.com/jquery-latest.min.js "></script>
<script>
function doSomething()
{   var test = ['I','am','an','array','wrong?', 'and posted as it was said on click']
    $.post('index.php',{test : test},function(data) {alert(data);})
}
</script>

<button onclick="doSomething()">Click me </button>

</body>

    </html> 
```

# xslt - xslt 设计模式

> ID：12660417
> 
> 赞同：1
> 
> 时间：2012-09-30T10:07:10.160
> 
> 标签：xslt

我的 xslt 引擎有一些设计问题。很快，我将 XML 文档转换为其他 XML 文档（第一个是元模型，第二个是 OpenDocument XML）。

有一次，我想根据某些条件输出元素的内容文本节点。让我们使用一个虚拟示例：

```
<father haircolor='blond'>
    <son>
        some text
    </son>
    <sister>
        some stupid text
    </sister>
</father> 
```

我想输出`<son>`元素的文本节点，如果它的父节点是“金发父亲”并且它有一个妹妹跟随

我对此有不同的解决方案：

首先是使用精确的模式：

```
<xsl:template match="father[haircolor='blond']>...</xsl:template>

<xsl:template match="son[following-sibling::sister]>...</xsl:template> 
```

其次是在模板中使用模式属性：

```
<xsl:template match="father[haircolor='blond' and son and sister]">
    <xsl:apply-template select='*' mode='ConditionsAreOk'/>
</xsl:template> 
```

第三是在叶子模板中使用 xsl:if ：

```
<xsl:template match="son">
    <xsl:if test="parent::father/@haircolor = 'blond' and following-sibling::sister>
         {.}
    </xsl:if>
</xsl:template> 
```

由于我关心我的 xslt 代码的可读性和可维护性，我想选择最好的方法。需要明确的是，我不寻求“如何”的帮助，而是“哪种方式最好”。

我的实际想法：我认为第一种方式是最纯粹的 XSLT，但当条件复杂且涉及多个元素时，它可能会非常硬核。我将不得不创建几个特定的​​模板。我更喜欢最后一个，因为在 xsl:if 测试条件下，我只有一个带有硬核 XPath 的模板，而不是几个具有特定匹配的模板。它的代码和文档更少（但是，您必须记录 XPath，否则您将在 5 分钟内忘记它……）。

有什么意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:21:20.160

**我强烈建议尽可能避免显式条件指令，而改用模板匹配模式**。

在这种特殊情况下，我会使用：

```
<xsl:template match="father[haircolor='blond']/son[following-sibling::sister]>
  <!-- your code here -->
</xsl:template> 
```

所以，它只是一个单一的模板——而不是两个——模板主体内的代码已经摆脱了难以阅读、理解和维护的条件指令。

**我自己的原则是**：

如果代码包含明确的条件指令，那么它肯定需要改进。

# android - Android - 如何删除扩展文件？

> ID：12660418
> 
> 赞同：1
> 
> 时间：2012-09-30T10:07:15.150
> 
> 标签：android, uninstallation, apk-expansion-files

我按照[本指南](http://developer.android.com/guide/google/play/expansion-files.html)下载扩展文件。当我检查它时，下载工作正常，但是当我想从手机上卸载应用程序时，文件仍然存在。
如何使用应用程序删除文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T23:14:01.597

下载的扩展文件将存储在您的共享存储文件夹中（通常这是您的 sd 卡）。卸载应用程序时没有可以触发的代码。不幸的是，这意味着您在卸载应用程序时**无法从代码中删除扩展文件。**

但是我确实发现在我的 Nexus 4 以及三星 Galaxy S 上，卸载应用程序时，扩展文件会自动从共享存储文件夹中**删除。**我使用 Play 商店中的应用程序对此进行了测试。

如果未自动删除扩展文件，那么在卸载后摆脱扩展文件的唯一方法是**手动**从共享存储文件夹中删除文件。可以指示最终用户手动删除扩展文件，方法是让他/她将设备连接到计算机并导航到：

```
<shared-storage>/Android/obb 
```

在此文件夹中，您应该会看到一个或多个带有包名称的文件夹。选择将包含您的扩展文件的文件夹，然后根据您希望删除的内容删除包文件夹或扩展文件。请注意，删除错误的包可能会影响不同的应用程序。**所以谨慎**使用手动删除！

**最终用户无法删除扩展的一些原因：**

*   最终用户没有设备的驱动程序，因此无法查看共享存储上的内容
*   最终用户卸载了应用程序并且扩展文件已经消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:22:59.867

将您的应用程序文件存储在 Applications 私有目录中。

这可以通过[`getFilesDir()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)

卸载应用程序后，此目录中的所有文件都会被删除。

# facebook - 由我们的应用程序发布的链接和粘贴在粉丝页面上的链接的安全警报

> ID：12660425
> 
> 赞同：0
> 
> 时间：2012-09-30T10:08:15.277
> 
> 标签：facebook, security, facebook-apps

我看到带有以下消息的安全警报：

“您尝试访问的链接已被 Facebook 合作伙伴归类为可能滥用。要了解有关在互联网上保持安全的更多信息，请访问 Facebook 的安全页面”

在siteadvisor上，它说：

“我们已经测试了数百万个网站，但我们还没有测试过这个。成为第一个提交反馈的人！”

我有一个 facebook 应用程序，我什至无法通过我的应用程序的粉丝页面访问该应用程序。这真的很烦人，我不知道如何解决这个问题。我也尝试过联系 Facebook，但我不确定他们是否会回复。

# java - Html 特殊字符和 Javascript

> ID：12660427
> 
> 赞同：0
> 
> 时间：2012-09-30T10:08:36.147
> 
> 标签：java, javascript, html, encoding, special-characters

我在客户端使用 javascript 和 ajax 框架，在服务器端使用 Java glassfish。

我正在尝试使用以下文本发送邮件：

```
"àèìòù !"£$%&/()=?^" 
```

但是当我阅读我的帖子请求（进入java服务器端）时，我得到了这个结果：

```
"Ã Ã¨Ã¬Ã²Ã¹ !"Â£$%&/()=?^" 
```

我需要将所有 html 特殊字符转换为相应的 html 代码，例如：

```
& -> &amp;
à -> &agrave; 
```

我能怎么做？有一些执行此操作的 javascript 库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T10:14:02.437

欢迎来到有史以来最愚蠢的决定之一。servlet 规范定义默认编码应该是 ISO-8859-1（而不是 UTF-8）。

因此，为了让您的 Java 应用程序在 POST 后正确读取这些字符，您需要设置一个 Servlet 过滤器，将字符集强制为 UTF-8。发生这种情况是因为大多数（如果不是全部）浏览器使用 UTF-8 作为默认字符集**并且**不设置 Accept-Charset 标头。

这是很常见的事情，tomcat 捆绑了其中一个过滤器（[如何更改 POST 参数的解释方式？](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q3)）。如果您打算部署到不同的 servlet 容器，我建议您编写自己的过滤器（只需从 tomcat 复制粘贴）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T10:13:34.600

是的！有可用的方法，一个例子是 replace(); 方法。更多信息[在这里](http://www.w3schools.com/jsref/jsref_replace.asp)

# emacs - Emacs 自动完成：不要在内联建议中触发 RET

> ID：12660428
> 
> 赞同：7
> 
> 时间：2012-09-30T10:08:52.977
> 
> 标签：emacs, autocomplete

我对自动完成非常满意，但有一件事让我很烦恼：

我设置为立即显示内联建议，但菜单延迟 0.9 秒。我输入前几个字母，例如“del”，它们会立即自动完成内联以“删除”。如果我想输入“删除”，我会点击`TAB`，这没关系。但是，如果我想实际键入“del”和换行符怎么办 - 这里`RET`再次点击自动完成以“删除”。

`RET`如果只显示内联建议，我如何强制换行？显示自动完成菜单后，我希望它像往常一样再次成为触发键。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T12:17:14.293

通过在模式的其他设置之后添加以下行`auto-complete`，您可以`RET`仅在显示完成菜单时启用完成：

```
(define-key ac-completing-map "\C-m" nil)
(setq ac-use-menu-map t)
(define-key ac-menu-map "\C-m" 'ac-complete) 
```

`ac-completing-map`是一个`RET`默认绑定到的键映射`ac-complete`，并且`ac-menu-map`是用于完成菜单的键映射。当变量为`ac-menu-map`时，键盘映射被启用。`ac-use-menu-map``t`

仅供参考，可以随时按停止完成`C-g`。因此，您还可以点击`C-g`并`RET`输入具有`RET`完整绑定的换行符。此外，您可以使用`C-j`而不是`RET`在您想输入换行符时使用。`C-j`默认情况下不绑定到`ac-complete`。

# ios6 - iOS6 TurnBasedMatch 问题

> ID：12660429
> 
> 赞同：5
> 
> 时间：2012-09-30T10:08:58.107
> 
> 标签：ios6, gamekit

在使用 iOS6 实现回合制游戏时，我偶然发现了一些奇怪的东西。

我创建了一堆比赛，游戏的图标显示“29”。但是当运行这个时：

```
[GKTurnBasedMatch loadMatchesWithCompletionHandler:^(NSArray *matches, NSError *error) {
}]; 
```

我得到零匹配，如果我尝试创建一个新匹配，我会收到此错误：

```
Error Domain=GKErrorDomain Code=21 
```

这指向新的`GKErrorTurnBasedTooManySessions`

但我找不到那些“会话”并结束它们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:31:07.920

我一直在与苹果技术人员讨论这个问题。这是他们的描述和建议的解决方案：

**明显原因**

Game Center 沙盒会尝试将应用程序的不同版本相互划分，因此如果您在 Game Center 沙盒测试期间更改应用程序的版本号，正在进行的匹配可能会成为孤立的，从而导致幽灵徽章计数。

**修复幽灵比赛的建议**

在 iTunes 连接中禁用应用程序的 Game Center。给它几个小时（过夜会很完美），然后再次打开它。如果你幸运的话，这足以重置一些东西，但如果它不起作用，你需要让 iTunes Connect 从它们的一端重置它。您可以使用此页面底部的“联系我们”按钮直接联系他们：[iTunes Connect Support](https://developer.apple.com/support/resources/itunes-connect.html)。

**避免此问题的建议**

在 Game Center 比赛测试期间很少更改应用程序的新版本。

**我的沙盒结果**

我已为我的应用禁用了 Game Center，并且会在几个小时后看到我的徽章计数是否已重置。我将 Game Center 禁用了 14 小时，但徽章计数仍未重置。因此，我联系了 iTunes Connect 支持并要求他们重置我的应用程序。他们不得不升级问题。苹果刚刚给我回了电话：他们的支持正在继续解决这个问题，他们认识到其他开发人员也遇到了类似的问题。

我最终放弃了在这方面寻求苹果的帮助，因为他们一直在几个部门之间兜圈子。有趣的是，就在我提交我的应用程序以供审核后，所有旧比赛开始出现在沙盒游戏中心。他们不再是鬼火柴了。

PS：前一天晚上我还要求重置我的沙盒排行榜。也许排行榜重置发布了幽灵比赛，或者也许是应用程序提交。这是我第一次提交应用程序，我将应用程序的版本指定为与多​​人游戏的所有版本兼容。

**我的生产成果**

同样的问题开始慢慢发生在我的一些用户身上。我的一小部分用户遇到图标徽章计数过高的问题。

# wpf - 在窗口标题栏上绘图 - 添加按钮和进度条

> ID：12660433
> 
> 赞同：1
> 
> 时间：2012-09-30T10:09:27.207
> 
> 标签：wpf

我想使用 WPF 在窗口标题栏上的关闭/最小化/最大化按钮旁边添加一个按钮。那可能吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-30T12:06:39.503

看看这里有样本可能有帮助

[http://social.msdn.microsoft.com/Forums/en-SG/wpf/thread/a248244c-3361-4316-bb70-745b2000431d](http://social.msdn.microsoft.com/Forums/en-SG/wpf/thread/a248244c-3361-4316-bb70-745b2000431d)

# opengl - setOpenGlDrawCallback 如何调整 OpenCV 窗口的大小

> ID：12660437
> 
> 赞同：0
> 
> 时间：2012-09-30T10:10:28.193
> 
> 标签：opengl, opencv, glut

我正在使用

```
 namedWindow("windowName",CV_WINDOW_OPENGL);
    setOpenGlDrawCallback("windowName",glCallback); 
```

窗口显示但尺寸错误，我不知道如何调整/设置正确的大小

更新：我已经修改了代码，就像 samples/cpp/ 中的示例**point_cloud.cpp**一样，但我无法设置窗口大小

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:22:47.557

你可以试试：

```
namedWindow("windowName", CV_WINDOW_OPENGL | CV_WINDOW_AUTOSIZE);
setOpenGlDrawCallback("windowName", glCallback); 
```

或者：

```
namedWindow("windowName", CV_WINDOW_OPENGL);
resizeWindow("windowName", 400, 300);
setOpenGlDrawCallback("windowName", glCallback); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:07:38.143

研究（更好）提供的示例，我找出了我的错误，这是正确的代码：

```
namedWindow(windowName,CV_WINDOW_OPENGL | CV_WINDOW_AUTOSIZE);
resizeWindow(windowName, 640, 480);
setOpenGlDrawCallback(windowName, glutDisplay);
for( ; ; )
{
 updateWindow(windowName);
 //etc etc
} 
```

# sql - 如何从视图中删除列

> ID：12660444
> 
> 赞同：11
> 
> 时间：2012-09-30T10:11:22.750
> 
> 标签：sql, oracle, oracle11g

我正在尝试从视图中删除一列，但似乎无法执行此操作，因为显然缺少关键字。有人可以告诉我我错过了什么吗？

```
ALTER VIEW REORDERINFO DROP COLUMN name; 
```

再次尝试后，我得到以下信息：

```
SQL> ALTER VIEW REORDERINFO
AS SELECT isbn,title, phone
FROM books JOIN publisher USING (pubid); 
```

> 第 2 行出现错误：ORA-00922：缺少或无效选项

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T10:52:18.030

您不能`ALTER VIEW`用于删除列。要重新创建没有列的视图，请使用`CREATE OR REPLACE VIEW`.

从[Oracle 文档](https://docs.oracle.com/cd/E11882_01/server.112/e41084/statements_4004.htm#SQLRF01104)：

> 使用该`ALTER VIEW`语句显式重新编译无效的视图或修改视图约束。
> 
> ![在此处输入图像描述](../Images/43ce3ea2ce525f6170a4129f8537ef0a.png)

来源：Oracle® 数据库
SQL 语言参考
11g 第 2 版 (11.2)
E26088-01

# google-chrome-extension - chrome ext中更新完成后如何打开选项页面

> ID：12660446
> 
> 赞同：0
> 
> 时间：2012-09-30T10:12:08.163
> 
> 标签：google-chrome-extension

每次下载新更新，我的扩展程序都会在客户计算机中打开选项页面。选项页面包括版本日志等。

我的算法是

1.  获取当前版本并与保存的变量进行比较`background.js`
2.  `If (currentVersion!=savedVersion){ openOptionPage();savedVersion=currentVersion;}`

如何获得`currentVersion`？

首次运行检查器是否有任何可用的事件或属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T06:42:02.783

这是我使用[lscache](https://github.com/pamelafox/lscache "lscache")将扩展程序的版本存储在 localStorage 中的操作：

```
function openOptionsPage() {
    var options_url = chrome.extension.getURL('options.html');
    chrome.tabs.query({
        url: options_url,
    }, function(tabs) {
        if (tabs.length)
            chrome.tabs.update(tabs[0].id, {active:true});
        else
            chrome.tabs.create({url:options_url});
    });
}   
var savedVersion = lscache.get('version');
var currentVersion = chrome.app.getDetails().version;
if (currentVersion !== savedVersion) {
    lscache.set('version', currentVersion);
    openOptionsPage();
} 
```

这仅适用于扩展的 background.js 页面。

# c# - 如何动态附加到 WinRT 事件？

> ID：12660447
> 
> 赞同：6
> 
> 时间：2012-09-30T10:12:17.910
> 
> 标签：c#, windows-runtime, .net-4.5

我想在 WinRT (Windows 8) 应用程序中使用 MVVM，我的要求之一是能够将事件与命令 ( `ICommand`) 挂钩。这意味着我必须动态地将处理程序添加到 WinRT 事件。这里有一个很好的[解释如何做到这一点](http://www.camronbute.com/2012/06/binding-to-event-at-runtime-in-windows.html)，但我的问题是处理程序类型在编译时是未知的（即它并不总是`RoutedEventHandler`像那个例子中那样）。

我开始编写该代码的通用实现，在其中使用表达式树构建委托。那部分有效。我的问题是`WindowsRuntimeMarshal.AddEventHandler`动态调用失败：

```
var rtMarshalType = typeof (WindowsRuntimeMarshal);
var eventHandlerMethod = rtMarshalType.GetRuntimeMethods().Single(x => x.IsStatic && x.Name == "AddEventHandler");
MethodInfo closedAddMethod = eventHandlerMethod.MakeGenericMethod(handlerType);
closedAddMethod.Invoke(null, new object[] {add, remove, handler}); 
```

这在`Invoke`调用中失败并引发 InvalidOperationException 并显示以下消息：

> API 'System.Runtime.InteropServices.WindowsRuntime.WindowsRuntimeMarshal.AddEventHandler[ItemClickEventHandler](System.Func `2[Windows.UI.Xaml.Controls.ItemClickEventHandler,System.Runtime.InteropServices.WindowsRuntime.EventRegistrationToken], System.Action`1[System.Runtime.InteropServices.WindowsRuntime.EventRegistrationToken], Windows.UI.Xaml.Controls.ItemClickEventHandler)'当前平台。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=248273](http://go.microsoft.com/fwlink/?LinkId=248273) 。

我知道我有正确的类型，因为当我用这个替换上面的 4 行代码时（硬编码事件处理程序类型，这不是我想要的），然后代码工作并且事件按预期附加：

```
WindowsRuntimeMarshal.AddEventHandler<ItemClickEventHandler>(add, remove, handler); 
```

作为参考，三个参数定义如下（可以肯定的是，这不是我的表达式树构建代码的问题，我目前正在使用这些委托的显式定义，即使尝试动态调用`AddEventHandler`，仍然失败）：

```
Func<ItemClickEventHandler, EventRegistrationToken> add =
    a => (EventRegistrationToken) eventInfo.AddMethod.Invoke(instance, new object[] {a});
Action<EventRegistrationToken> remove = a => eventInfo.RemoveMethod.Invoke(instance, new object[] {a});
ItemClickEventHandler handler = (s, args) => command.Execute(args); 
```

为什么通过反射调用而不是直接调用时调用失败？

当编译时事件处理程序的类型未知时，是否有用于动态附加 WinRT 事件的替代解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T02:31:58.253

> 为什么通过反射调用而不是直接调用时调用失败？

答：`WindowsRuntimeMarshal.AddEventHandler`是用`[SecurityCritical]`属性标记的

来自*反射的安全注意事项*：http : [//msdn.microsoft.com/en-us/library/stfy7tfc.aspx](http://msdn.microsoft.com/en-us/library/stfy7tfc.aspx)

> 根据必要的权限，代码可以使用反射来执行以下类型的访问： *访问**非安全关键的****公共**成员***。**

 **`AddEventHandler`因此，即使它们是公开的，您也不能使用对安全至关重要的反射方法。您可以在不使用反射的情况下自由调用此类方法，并且可以自由地反射自己的方法。这就是您的解决方案有效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:04:48.513

经过一些修补后，我找到了一种方法：

首先，我声明了这个方法：

```
 private static void AddEventHandler<T>(Func<T,EventRegistrationToken> add, Action<EventRegistrationToken> remove, T handler)
    {
        WindowsRuntimeMarshal.AddEventHandler(add, remove, handler);            
    } 
```

然后我可以通过反射调用它：

```
 var closedAddMethod = GetAddEventHandlerMethodInfo(handlerType);
    closedAddMethod.Invoke(null, new[] {add, remove, actualDelegate}); 
```

在哪里`GetAddEventHandlerMethodInfo`：

```
 private static MethodInfo GetAddEventHandlerMethodInfo(Type handlerType)
    {
        var rtMarshalType = typeof (AttachedCommand);
        var eventHandlerMethod = rtMarshalType.GetRuntimeMethods().Single(x => x.IsStatic && x.Name == "AddEventHandler");
        MethodInfo closedAddMethod = eventHandlerMethod.MakeGenericMethod(handlerType);
        return closedAddMethod;
    } 
```

这行得通。正如问题中提到的，如果没有我自己的类的中间方法（即 WindowsRunTimeMarshal.AddEventHandler 作为 的直接目标），这*将不起作用*`MethodInfo`。我无法解释为什么会这样，但这是一个可行的解决方法，所以如果其他人有同样的问题，我会把它留在这里。

我不知道这是否会发生，因为微软试图防止一些意外使用或其他事情 - 如果有人真的知道为什么原始问题中描述的前一种方法不起作用；**请**留下答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T15:14:51.653

编辑：由于平台安全性，反射方法不起作用，就像 Silverlight 是为了确保应用程序在沙箱中运行并且不影响 .net 核心框架或利用该框架来克服已实施的安全措施。不幸的是，这会影响其他事情，例如功能的真正使用。Microsoft 不会让您反映可能被利用的平台类和方法。

不幸的是，像 Silverlight 一样，WinRT 的某些部分被锁定以将应用程序保留在沙盒中，但这并不是全部原因，但仍有一些 API 尚未开发。

Driis 你是对的，你最好的选择是创建一个封装 AddEventHandler 的包装器方法。

您可以在下面看到一个工作示例，创建对 AssignEvent 的写入反射调用会很简单。此示例假设您在屏幕上有一个名为“hellow”的文本块和一个名为“button”的按钮。

```
public MainPage()
{
    this.InitializeComponent();

    RoutedEventHandler handler = (a, b) => this.Hellow.Text = "MUAHAHAH";
    // you can quite easily reflect the method below.
    this.AssignEvent<RoutedEventHandler>(this.button, "Click", handler);
}

private void AssignEvent<T1>(object instance, string eventName, T1 handler)
{
    var runtimeEvent = instance.GetType().GetRuntimeEvent(eventName);
    var handlerType = runtimeEvent.EventHandlerType;
    Func<T1, EventRegistrationToken> add = (a) => { return (EventRegistrationToken)runtimeEvent.AddMethod.Invoke(instance, new object[] { a }); };
    Action<EventRegistrationToken> remove = (a) => { runtimeEvent.RemoveMethod.Invoke(runtimeEvent, new object[] { a }); };

    WindowsRuntimeMarshal.AddEventHandler<T1>(add, remove, handler);
} 
```

方舟君的回答是正确的，因为该方法带有[Security Critical Attribute](http://msdn.microsoft.com/en-us/library/system.security.securitycriticalattribute.aspx)修饰，它无法通过正常方式反映。这又是为了保护平台。

正如他所说[，反射的安全考虑](http://msdn.microsoft.com/en-us/library/stfy7tfc.aspx)解释了一切。**

# input - CSS：边框半径3D直线效果而不是弯曲效果

> ID：12660450
> 
> 赞同：1
> 
> 时间：2012-09-30T10:12:47.203
> 
> 标签：input, border, css

我试图在我的联系表单上获得这种效果，我正在操作输入字段。正如您在这张图片中看到的，我创建了一个带有边框的 3D 效果。

**设计：**

![在此处输入图像描述](../Images/03561056570203aa28873b8f425c35bf.png)

我已经阅读了互联网等等，现在我正在使用边界半径。问题是它变得很接近，但如果我添加更多像素，它会使我的曲线过于圆润，如下图所示。如果我添加更高的数字，我不仅会获得弯曲的效果，而且边框也会以其曲线侵入输入字段。

**现实：**

![在此处输入图像描述](../Images/04ca9059f53716dc6d1e3bf49edaf397.png)

有什么建议可以用 CSS 来实现这个效果吗？如果可能跨浏览器友好。请告诉我...

编辑 //////////////////////////////// 编辑

我进行了调查，现在正在调查使用`box-shadow`. 我仔细看了看，但不完全是我需要的。正如您在右上角看到的那样，您可以看到一些不完美之处。如果我移动这个位置阴影，那么它看起来真的不太好。这是输出。

![在此处输入图像描述](../Images/f23b2293879c9813e4b3d600a0fdaf1b.png)

我正在将边框与阴影结合起来。这是我到目前为止使用的代码：

```
#teleCom li input{
    height: 12.12%; /*60px  */
    width: 48.95%; /*235px*/
    margin-bottom: 2.42%;/*12px*/
    background-color: #bdd4de;
    color: #aac1cc;
    font-family: light;
    font-size: 1.2em;
    padding-left: 2.5%;

    border-width: 5px;
    border-style: solid;
    border-color: #a7bdc7;
    border-radius: 7px;

    box-shadow: 5px 4px 0px 2px #a7bdc7;
} 
```

我可以使用任何建议或其他 CSS 属性吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T11:14:48.677

试试这个：

```
box-shadow: 
    1px 1px 0px 0px #a7bdc7,
    2px 2px 0px 0px #a7bdc7,
    3px 3px 0px 0px #a7bdc7,
    4px 4px 0px 0px #a7bdc7,
    5px 5px 0px 0px #a7bdc7,
    6px 6px 0px 0px #a7bdc7,
    7px 7px 0px 0px #a7bdc7,
    8px 8px 0px 0px #a7bdc7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:18:16.767

应该有这样做的方法，最简单的方法是使用“边框图像”，但它可能不会完美，但我建议你在这里查看：http: [//www.w3schools.com/cssref/ css3_pr_border-image.asp](http://www.w3schools.com/cssref/css3_pr_border-image.asp)

如果它没有解决，可能会导致一些错误，您可能想在这里查看 css 3d grapchis：http: [//www.adobe.com/devnet/html5/articles/css3-2d-and-3d-graphics-和动画效果.html](http://www.adobe.com/devnet/html5/articles/css3-2d-and-3d-graphics-and-animation-effects.html)

# json - 传递带有 json 数据的对象

> ID：12660461
> 
> 赞同：0
> 
> 时间：2012-09-30T10:13:43.413
> 
> 标签：json, asp.net-mvc-3, view, controller

我`jsonData`用来绑定到 a`jqgrid`但我也想`model.total amount`在字段中使用。

那么我怎样才能返回它以在其中`jsonData`使用它`<td>`呢？

**看法**

```
<table>
<tr>

<td>@Model.TotalAmount</td>

</tr>
</table> 
```

**控制器**

```
 public ActionResult GetDocPendingDetails(string strPA, string strEmpCode, string StrModeOfPayment) // Sends PA to bind the gridview
        {
            string StrEmpcode = ""; // to be changed
            cmn_top objCmn_top = new cmn_top();
            DataTable dtData = new DataTable();
            Items objitem = new Items();
            if (StrModeOfPayment == "All")
            {
                StrModeOfPayment = "";
            }
            dtData = objCmn_top.Reports_GetData__DocPendingPayment(strPA, StrEmpcode, StrModeOfPayment);
            ViewBag.TotalAmount = dtData.AsEnumerable().Sum(x => x.Field<double>("fl_approvedamt")).ToString();           // to be changed later
            int totalRecords = dtData.Rows.Count;
            var jsonData = new
            {
                totalamount = ViewBag.TotalAmount,
                total = totalRecords,
                rows =
                (
                from dtRow in dtData.AsEnumerable()
                select new
                {
                    cell = new string[]
                    {                       
                       dtRow.Field<string>("ch_docno"),dtRow.Field<string>("ch_empcode"),dtRow.Field<string>("ch_sapvoucherno"), dtRow.Field<string>("CH_PSA_CODE"),dtRow.Field<double>("fl_approvedamt").ToString()
                    }
                }
                )
            };
            return Json(jsonData, JsonRequestBehavior.AllowGet);

        } 
```

**这是我的 jqgrid**

```
 $("#list").GridUnload();
    $("#list").jqGrid({
        url: '/Reports/GetDocPendingDetails',
        datatype: 'json',
        mtype: 'GET',
        colNames: ['Document No.', 'Document Owner', 'SAP Document No', 'PSA', 'Approved Amount'],
        colModel: [
              { name: 'ch_docno', index: 'ch_docno', width: 100, align: 'center' },
              { name: 'ch_empcode', index: 'ch_empcode', width: 250, align: 'left' },
              { name: 'ch_sapvoucherno', index: 'ch_sapvoucherno', width: 100, align: 'center' },
              { name: 'CH_PSA_CODE', index: 'CH_PSA_CODE', width: 200, align: 'left' },
                 { name: 'fl_approvedamt', index: 'fl_approvedamt', width: 100, align: 'center' }

            ],
        emptyrecords: "Empty records",
        height: 'auto',
        loadtext: 'Loading.....',
        sortorder: 'asc',
        caption: " Documents Pending For Payment ",
        shrinkToFit: true,
        rownumbers: true,
        rowNum: -1,
        postData: { strPA: selectedPA, StrModeOfPayment: modeOfPayment },
        viewrecords: true,
        gridComplete: function () {
            var recs = parseInt($("#list").getGridParam("records"));
            if (isNaN(recs) || recs == 0) {
                $("#gridWrapper").hide();
                $("#DivEmptyRecords").show();

            }
            else {
                $('#gridWrapper').show();
                $("#DivEmptyRecords").hide();

            }
        }
    });
//document.getElementById("tdTotalAmount").innerHTML = jsonData.TotalAmount;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:51:38.330

您要返回 JsonData 对吗？`@Model.TotalAmount`在这种情况下您不能使用。

如果您想使用`@Model.TotalAmount`让您的操作返回一个具有 TotalAmount 作为属性的模型。

但是由于您需要使用 Jqgrid，我建议您坚持返回`Json`数据。

我还可以看到您`totalamount`作为 Json 结果的一部分传递。

使用 firefox 的 firebug 并调查发布 json 数据的方式和内容，然后将这些值与 jquery 和 jqgrid 一起使用。

如果您也可以发布一些 Jqgrid 代码，那就更好了。

# ruby - 让 Ruby 与 Node.js 交互

> ID：12660468
> 
> 赞同：1
> 
> 时间：2012-09-30T10:14:54.043
> 
> 标签：ruby, node.js, pipe

我正在使用 Ruby EventMachine 构建一个实时 Web 应用程序，到目前为止一切正常，但我想添加一个 Node.js 有一个包而 Ruby 没有的特性（[node-canvas](https://github.com/LearnBoost/node-canvas)）。

我想用 Node.js 替换整个应用程序，但我更喜欢编写 Ruby 代码而不是 JavaScript。此外，我对 Node.js 完全陌生，虽然 Web 应用程序代码不是非常复杂，但使用 Node 从头开始​​完全重写它需要时间。

有没有一种简单的方法可以让我的 Ruby 代码与我将专门为此功能构建的 Node.js 模块进行交互，可能是通过管道或其他方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:45:22.450

最终回答了我自己的问题，将使用 Redis pub-sub 功能来完成。

谢谢！

# fonts - TrueType 和 OpenType 字体是否应该转换为 WOFF 以便在 Web 上使用？

> ID：12660471
> 
> 赞同：1
> 
> 时间：2012-09-30T10:15:25.773
> 
> 标签：fonts, w3c, truetype, opentype, woff

我知道有多种方法可以直接在 Web 上使用 TrueType 字体和 OpenType 字体。但是，我一直无法找到一个规范的参考来说明这些文件应该如何被提供。我在确定它们正确的 MIME 类型时遇到了特别的麻烦，我问[过字体文件的正确 MIME 类型是什么？](https://stackoverflow.com/questions/12660389/what-is-the-correct-mime-type-for-a-font-file)帮助确定这一点。

我偶然发现了 W3C 规范[WOFF 文件格式 1.0](http://www.w3.org/TR/WOFF/)，其中包括[媒体类型注册](http://www.w3.org/TR/WOFF/#appendix-b)。该规范声明“任何获得适当许可的 TrueType/OpenType/Open Font Format 文件都可以打包为 WOFF 格式以供 Web 使用。”

因为我一直无法找到关于如何处理 TrueType 和 OpenType 字体文件的规范来源，所以我假设将文件转换为 WOFF 格式可能是最佳实践。是这样吗？

如果不是，什么时候应该使用 WOFF 文件，什么时候使用相应的`.otf`文件更好`.ttf`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T19:54:49.473

WOFF 格式很好，因为它本质上是一种 gzip 压缩的原始字体（从而减少了带宽）。我们已经在此处编写了我们认为关于如何服务器 webfonts 的规范 CSS 参考：http: [//www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

底线：是的，使用 WOFF。除非您需要支持不理解 WOFF 的旧浏览器，否则使用原始字体文件没有任何优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T00:58:39.070

浏览器对 woff（和其他字体格式）的支持差异很大。大多数人将提供各种字体资源以涵盖所有基础，包括：

*   woff
*   “原始”（裸 TTF 或 OTF）
*   svg
*   EOT

# javascript - 即使成功接收到网页，XMLHttpRequest 也不包含网页

> ID：12660475
> 
> 赞同：0
> 
> 时间：2012-09-30T10:16:19.180
> 
> 标签：javascript, xmlhttprequest

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

我正在制作一个个人网页，用于提取彩票强力球号码并显示它们。除了这个链接之外，我在所有方面都取得了成功：

```
var xmlHttp = null;
xmlHttp = new XMLHttpRequest();
xmlHttp.open( "get", "http://www.powerball.com/powerball/pb_numbers.asp", false );
xmlHttp.send(null);

document.body.innerHTML = xmlHttp.responseText; 
```

我检查了 xmlHTTP.status，它是 0。但是，使用 Live HTTP 标头应用程序，我看到请求已发送，并且我确实获得了成功的 HTTP/1.0 200 OK，其中页面是在我端接收的。但是，xmlHTTP 对象中没有收到任何内容。没有 responseText，只有状态 0 表示未初始化。

编辑：我在返回标头中没有看到`Access-Control-Allow-Origin:`指令。如果我因为来自不同的域而受到限制，为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:17:30.657

跨域 ajax 的替代方案是：

1.  编写代理，它将使用 CURL 请求远程服务器
2.  从 ajax 调用中调用该代理文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:18:31.760

您不能使用 XHR[读取来自不同来源的数据](http://en.wikipedia.org/wiki/Same_origin_policy)。由于请求是作为浏览器的用户发出的，因此它完成了所有可能对用户进行身份验证的操作，因此可能会检索机密信息（然后您可以使用 XHR 将其复制到您自己的服务器）。

有关解决方法，请参阅[此 stackoverflow 问题](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:23:32.240

我不确定它是如何工作的，也不确定它的能力，但你似乎在上面有一个关于它为什么不起作用的答案。我建议您改用 ajax，它很简单，而且效果很好。

这是我使用它的示例：

```
var site =  $.ajax({
    url:        "http://google.com",
    type:       "GET",
    dataType:   "html",
    async:      false
}).responseText;
document.body.innerHTML = site; 
```

祝你好运，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T11:59:00.293

您的问题是[相同的原产地政策](http://en.wikipedia.org/wiki/Same_origin_policy)。您将无法使用 AJAX 从该网站获取任何数据，除非该网站提供[JSONP](http://en.wikipedia.org/wiki/JSONP) API（即便如此，它在技术上也不是 AJAX）。

[您可以使用iframe](http://www.w3.org/TR/html-markup/iframe.html)在某种程度上实现您正在做的事情，但您必须包含整个页面，而不仅仅是它的相关部分。

如果您需要做的是[Web 抓取](http://en.wikipedia.org/wiki/Web_scraping)，那么您将有一些服务器端代理来完成它。

一些可能对您有所帮助的工具：

*   [YQL](http://developer.yahoo.com/yql/)
*   [雅虎管道](http://pipes.yahoo.com/)
*   [维基百科上著名的网络抓取工具](http://en.wikipedia.org/wiki/Web_scraping#Notable_tools)

# objective-c - 如果 iAds 失败，如何整合 iAds 和 AdMob

> ID：12660477
> 
> 赞同：7
> 
> 时间：2012-09-30T10:17:03.070
> 
> 标签：objective-c, xcode, admob, iad

如果 iAds 失败，我一直在寻找有关如何将 iAds 与 AdMobs 集成的完整指南，

我问这个问题的唯一原因是我有 iAd，并且我注意到 iAd 的填充率非常低，并且希望 AdMobs 填充这些空间。我已经阅读了下面的相关帖子，觉得这有点过时了（从 2010 年开始）

有没有更好的解决方案完整教程，里面有你知道的详细代码。

[使用 iAd 作为默认广告网络，如果 iAd 失败则使用 AdMob](https://stackoverflow.com/questions/3632032/using-iad-as-default-ad-network-and-admob-if-iad-fails)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T16:58:43.490

您应该使用中介解决方案。一个例子是[AdMob 中介](https://developers.google.com/mobile-ads-sdk/docs/admob/mediation)。您需要做的就是针对 AdMob API 编写代码，插入 iAd 适配器库（可[在此处](https://developers.google.com/mobile-ads-sdk/ad-network-mediation)获得），并配置中介展示位置以请求 iAd 和回填 AdMob。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T07:28:25.367

您可以使用这些控件来显示 iAd 和 adMob

```
https://github.com/pjcook/iAdPlusAdMob
https://github.com/chrisjp/CJPAdController 
```

或者这里是一步一步解释的好图

[http://mobile.tutsplus.com/tutorials/iphone/supplementing-iad-placement-with-admob/](http://mobile.tutsplus.com/tutorials/iphone/supplementing-iad-placement-with-admob/)

# delphi - 在 Delphi XE2 中调用“IAudioSessionManager2.GetSessionEnumerator()”的异常

> ID：12660480
> 
> 赞同：3
> 
> 时间：2012-09-30T10:17:18.683
> 
> 标签：delphi, windows-7, delphi-xe2, core-audio

下面的代码在 Delphi XE2 Win32 下编译并在 Win 7 64 位下运行，执行“AudioSessionManager2.GetSessionEnumerator”行时产生以下异常：

*“Project22.exe 引发异常类 $C0000005 并带有消息‘在 0x7027edb2 处的访问冲突：写入地址 0x0051ced6’”*

我对异常类或它们的含义缺乏了解，因此我不知道异常的含义或如何修复它。

这是引发异常的代码（用于调试代码的断言）：

```
var
  HRES: HRESULT;
  DeviceEnumerator: IMMDeviceEnumerator;
  DefaultDevice: IMMDevice;
  AudioSessionManager2: IAudioSessionManager2;
  Enumerator: IAudioSessionEnumerator;
begin

  CoInitialize( nil );

  HRES := CoCreateInstance( CLSID_MMDeviceEnumerator, nil, CLSCTX_ALL, IID_IMMDeviceEnumerator, DeviceEnumerator );
  Assert( Succeeded( HRES ) );

  HRES := DeviceEnumerator.GetDefaultAudioEndpoint( eRender, eMultimedia, DefaultDevice );
  Assert( Succeeded( HRES ) );

  HRES := DefaultDevice.Activate( IID_IAudioSessionManager2, CLSCTX_ALL, nil, IUnknown( AudioSessionManager2 ) );
  Assert( Succeeded( HRES ) );

  HRES := AudioSessionManager2.GetSessionEnumerator( Enumerator );  // <- EXCEPTION HERE
  Assert( Succeeded( HRES ) );

  [snip] 
```

我[在 Google Code 上使用来自 MFPack](http://code.google.com/p/mfpack-media-foundation/source/browse/trunk#trunk/MFPACK/CoreAudio)的核心音频定义，IAudioSessionManager2 和 IAudioSessionEnumerator 接口如下所示：

```
IAudioSessionManager2 = interface(IUnknown)
['{77AA99A0-1BD6-484F-8BC7-2C654C9A9B6F}']
  function GetSessionEnumerator(out SessionEnum: IAudioSessionEnumerator): HResult; stdcall;
  function RegisterSessionNotification(SessionNotification: IAudioSessionNotification): HResult; stdcall;
  function UnregisterSessionNotification(SessionNotification: IAudioSessionNotification): HResult; stdcall;
  function RegisterDuckNotification(const sessionID: LPCWSTR; const duckNotification: IAudioVolumeDuckNotification): HResult; stdcall;
  function UnregisterDuckNotification(const duckNotification: IAudioVolumeDuckNotification): HResult; stdcall;
end;

IAudioSessionEnumerator = interface(IUnknown)
['{E2F5BB11-0570-40CA-ACDD-3AA01277DEE8}']
  function GetCount(out SessionCount: integer): HResult; stdcall;
  function GetSession(const SessionCount: integer; out Session: IAudioSessionControl): HResult; stdcall;
end; 
```

我相信接口定义正确，我还仔细检查了 GUID。

由于在 Visual Studio 2012（Win32 项目）下按预期执行相同的指令序列，我怀疑问题出在我的代码（这里有点疑问）、Core Audio 接口定义或 Delphi 上。在 VS 中运行的 C++ 代码如下：

```
IMMDeviceEnumerator *DeviceEnumerator = NULL;
IMMDevice* DefaultDevice = NULL;
IAudioSessionManager2* AudioSessionManager = NULL;
IAudioSessionEnumerator* Enumerator = NULL;
HRESULT HR;

HR = CoCreateInstance( __uuidof(MMDeviceEnumerator), NULL, CLSCTX_ALL, __uuidof(IMMDeviceEnumerator), (void**)&DeviceEnumerator );
HR = DeviceEnumerator->GetDefaultAudioEndpoint( eRender, eMultimedia, &DefaultDevice );
HR = DefaultDevice->Activate( __uuidof(IAudioSessionManager2), CLSCTX_ALL, NULL,(void**)&AudioSessionManager );
HR = AudioSessionManager->GetSessionEnumerator( &Enumerator ); 
```

使用 C++ 代码，我可以正确检索会话枚举器并使用 GetCount 等。

我花了无数个小时试图找出我的代码出了什么问题，但我仍然一无所知，所以*任何*帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T09:22:20.290

根据 MSDN，[IAudioSessionManager2](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370950%28v=vs.85%29.aspx)应该继承自[IAudioSessionManager](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370948%28v=vs.85%29.aspx)：

```
type
  IAudioSessionManager2 = interface(IAudioSessionManager)
  ... 
```

# iphone - iOS 模拟器选项更改

> ID：12660488
> 
> 赞同：1
> 
> 时间：2012-09-30T10:18:54.537
> 
> 标签：iphone, objective-c, ios

当我通过 iPhone 或 iPad 的模拟器打开任何歌曲网站时，请说 mp3skull.com 。当我单击选项时`download`，它为我提供了 Alertview 选项`COPY`和`OPEN`. 有什么办法可以让我在这个 .say 中提供更多选择`open copy download`。为了更清楚地显示在页面中：

![在此处输入图像描述](../Images/d7642e8ca6b89b83e9d6610cbbb0223a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:55:20.853

第一关：我不认为添加特定项目是可能的。

现在假设你真的想添加一个“下载”按钮，考虑一下：

1.  默认打开文件意味着您必须先下载文件
2.  PC / Mac上的“下载”只是将文件放入“已知”文件夹中，您可以稍后使用任何程序打开它，而“打开”将其放入（可能）随机临时文件夹，然后运行默认程序
3.  由于 iOS 中 Safari 的性质，“下载”按钮更像是“存储在 Safari 中供以后使用”
4.  在 safari 中打开是 -> 下载、商店、询问用户他想使用什么应用程序来打开文件类型。

因此，考虑到上述几点，我看不到“下载”按钮的功能。如果您有更多详细信息，您希望您的按钮做什么，也许有一个替代方案适合您。

# actionscript-3 - 在动作脚本 3 下禁用 Nagle 算法

> ID：12660489
> 
> 赞同：1
> 
> 时间：2012-09-30T10:19:00.663
> 
> 标签：actionscript-3, sockets

我一直在使用 AS3 套接字，我注意到小数据包在发送时是“Nagled”的。我试图找到一种为套接字设置 NoDelay 的方法，但即使在文档中我也没有找到线索。是否有另一种方法可以在 AS3 TCP 套接字中关闭 Nagle'a 算法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:32:58.020

您可以使用套接字对象上的[Flush](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/Socket.html#flush%28%29)方法告诉 Flash 通过套接字发送数据。

> 刷新套接字输出缓冲区中的所有累积数据。

也就是说，flash 会做它认为更好的事情，并且可能不想太频繁地发送您的数据。不过，这不应该超过几毫秒。

# sass - 罗盘中的 rgba 函数不会将十六进制值转换为 rgba

> ID：12660490
> 
> 赞同：0
> 
> 时间：2012-09-30T10:19:18.830
> 
> 标签：sass, compass-sass

我写了以下两个mixin：

```
@mixin textcolor($hexvaltxt, $opacitytxt: 1.0){
    color: $hexvaltxt;
    color: rgba($hexvaltxt, $opacitytxt);
}
@mixin boxcolor($hexvalbox, $opacitybox: 1.0){
    background-color: $hexvalbox;
    background-color: rgba($hexvalbox, $opacitybox);
} 
```

基本上我输入一个十六进制值，作为回报，我得到一个后备颜色作为十六进制值以及一个 rgba 值。基本上基于我读过的指南针的 rgba 功能应该将十六进制值和不透明度转换为 rgba 值。但是当我调用我的 mixin 时：

```
.maintitle {
    @include textcolor($sectionhead);
} 
```

$sectionhead 具有 #3f3e3e 作为值。然后我得到以下输出：

```
.maintitle {
  color: #3f3e3e;
  color: #3f3e3e; } 
```

而不是显示一个十六进制和一个 rgba 值，我只得到相同的十六进制值两次。:/ 不再提供转换，还是我做错了什么？作为旁注，我正在运行最新的指南针（0.12.2）和 sass（3.2.1）。最好的问候拉尔夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:58:11.263

`1.0`是完全不透明的，所以我猜 Sass 只是让它保持原样，因为这对于向后兼容来说是最佳的。如果我将第二个参数更改为`.8`，我会得到以下输出：

```
.maintitle {
  color: #3f3e3e;
  color: rgba(63, 62, 62, 0.8);
} 
```

# android - 如何将arraylist上的所有元素显示到listview？

> ID：12660494
> 
> 赞同：0
> 
> 时间：2012-09-30T10:19:58.517
> 
> 标签：android, listview, arraylist

我有这个arraylist代码：

```
public List<String> column = new ArrayList<String>();
public List<String> price = new ArrayList<String>(); 
```

你能教我如何将arraylist的所有元素显示到两列listview吗？我也想通过一个新的意图来展示它。

```
 else if(v.getId()==R.id.btnFinal){
        Intent intent = new Intent(main.this, Finalize.class);
        startActivity(intent);
        } 
```

我希望我的列表视图显示在 Finalize 类上。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:22:14.410

试试这个让arraylist项目到listview。这用于单列listview

```
 ArrayAdapter aa = new ArrayAdapter(this,
android.R.layout.simple_list_item_1, column);
 listViewobj.setAdapter(aa); 
```

如果您需要将其显示到 2 列列表视图，您可以使用自定义适配器，您可以在[此处](http://codinglookseasy.blogspot.in/2012/07/custom-list-view.html)有一个示例，甚至链接包含如何知道单击了哪个项目

# ruby-on-rails - Rails 3：绝望 - 无法使用 Authlogic 登录成功创建的帐户

> ID：12660496
> 
> 赞同：0
> 
> 时间：2012-09-30T10:20:16.953
> 
> 标签：ruby-on-rails, ruby, session, authentication, authlogic

我安装了 Authlogic gem，设置了控制器和模型。当我使用 Authlogic 注册新帐户时，数据库表中的所有内容都已成功创建（如**crypted_pa​​ssword**、**password_salt**等）。组件：**UserSessionsController**：

```
# encoding: utf-8
class UserSessionsController < ApplicationController
  def new
    @user_session = UserSession.new
  end

  def create
    @user_session = UserSession.new(params[:user_session])

    respond_to do |format|
      if @user_session.save
        format.html { redirect_to(root_url, :flash => { success: 'Successfully logged in.'}) }
        format.xml  { render :xml => @user_session, :status => :created, :location => @user_session }
      else
        format.html { #render :action => :new
                      redirect_to :back
                      flash[:warning] = 'Wrong credentials.' 
                    }
        format.xml  { render :xml => @user_session.errors, :status => :unprocessable_entity }         
      end
    end
  end 

  def signin
    @user_session = UserSession.new
  end

  def destroy
    @user_session = UserSession.find
    @user_session.destroy

    respond_to do |format|
      format.html { redirect_to(root_url, :notice => 'Logged out.') }
      format.xml  { head :ok }
    end
  end
end 
```

**用户控制器**

```
class UsersController < ApplicationController
  filter_access_to :all

  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  def signup
    @user = User.new
    @categories = Category.order('name')
  end

  def new
    @user = User.new
    @categories = Category.order('name')

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  def edit
    @user = User.find(params[:id])
    @categories = Category.order('name')
    redirect_to root_url unless current_user.id == @user.id
  end

  def create
    params[:user][:id_code] = User.random_numbers
    params[:user][:url_name] = params[:user][:name].parameterize
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        Assignment.create(:user_id => @user.id, :role_id => MEMBER)
        format.html { redirect_to root_url, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @user = User.find(params[:id])

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end

end 
```

**application_controller.rb**

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :mailer_set_url_options
  before_filter :set_current_user
  helper_method :current_user_session, :current_user

  def mailer_set_url_options
    ActionMailer::Base.default_url_options[:host] = request.host_with_port
  end

  protected
     def set_current_user
       Authorization.current_user = current_user
     end

   private
     def current_user_session
       logger.debug "ApplicationController::current_user_session"
       return @current_user_session if defined?(@current_user_session)
       @current_user_session = UserSession.find
     end

     def current_user
       logger.debug "ApplicationController::current_user"
       return @current_user if defined?(@current_user)
       @current_user = current_user_session && current_user_session.user
     end

     def authentication
       logger.debug "ApplicationController::authentication"
       unless current_user
         #store_location
         flash[:warning] = "You must be logged out to access this page"
         redirect_to root_url
         return false
       end
     end
end 
```

**用户会话.rb**

```
class UserSession < Authlogic::Session::Base
#  attr_accessible :data, :sessions_id
  generalize_credentials_error_messages "Login info is invalid!"  

  def to_key
     new_record? ? nil : [ self.send(self.class.primary_key) ]
  end

  self.logout_on_timeout = true  

  def persisted?
    false
  end
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  attr_accessible #list of all columns

  acts_as_authentic do |c|
    c.login_field = 'email'
    c.logged_in_timeout(15.minutes)
  end

  has_many :assignments
  has_many :roles, :through => :assignments

  #validates...

  # declarative_authentications
  def role_symbols
    roles.map do |role|
      role.name.underscore.to_sym
    end
  end
end 
```

我已经在第二天尝试解决此问题，但我仍然找不到问题...在数据库表中创建了 Authlogic 所需的所有数据，但是当我尝试登录时，我总是收到错误消息**错误的凭据。**.

有人可以帮我解决这个问题吗？我已经不知道如何解决它：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:47:29.253

好的，问题似乎已经解决了——我出于我的目的使用了列名**active**，它也使用了 Authlogic。重命名为**活动**，一切正常。

# c# - 如何使用 MySqlCommand 插入多行并准备语句？(#C)

> ID：12660497
> 
> 赞同：4
> 
> 时间：2012-09-30T10:20:31.480
> 
> 标签：c#, mysql, sqlcommand, connector-net

Mysql 举例说明如何使用prepare 语句和.NET 插入行：http: [//dev.mysql.com/doc/refman/5.5/en/connector-net-programming-prepared.html](http://dev.mysql.com/doc/refman/5.5/en/connector-net-programming-prepared.html)

它看起来像那样工作，因为在每次迭代结束时调用`cmd.ExecuteNonQuery()`：：

```
INSERT INTO VALUES()...;INSERT INTO VALUES()...;INSERT INTO VALUES()...; 
```

可以使用这样的准备语句来完成吗：

```
INSERT INTO all values... 
```

**更多解释::**

* * *

**mysql 示例中的代码（每次迭代中的 cmd.ExecuteNonQuery() ）：**

```
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

conn.ConnectionString = strConnection;

try
{
    conn.Open();
    cmd.Connection = conn;

    cmd.CommandText = "INSERT INTO myTable VALUES(NULL, @number, @text)";
    cmd.Prepare();

    cmd.Parameters.AddWithValue("@number", 1);
    cmd.Parameters.AddWithValue("@text", "One");

    for (int i=1; i <= 1000; i++)
    {
        cmd.Parameters["@number"].Value = i;
        cmd.Parameters["@text"].Value = "A string value";

        cmd.ExecuteNonQuery();
    }
} 
```

**我想要的代码（`cmd.ExecuteNonQuery();`在所有迭代之后）：**

```
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

conn.ConnectionString = strConnection;

try
{
    conn.Open();
    cmd.Connection = conn;

    cmd.CommandText = "INSERT INTO myTable VALUES(NULL, @number, @text)";
    cmd.Prepare();

    cmd.Parameters.AddWithValue("@number", 1);
    cmd.Parameters.AddWithValue("@text", "One");

    for (int i=1; i <= 1000; i++)
    {
        cmd.Parameters["@number"].Value = i;
        cmd.Parameters["@text"].Value = "A string value";

    }
    cmd.ExecuteNonQuery();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T13:09:14.320

试试这个：

```
using (var connection = new MySqlConnection("your connection string"))
{
    connection.Open();
    // first we'll build our query string. Something like this :
    // INSERT INTO myTable VALUES (NULL, @number0, @text0), (NULL, @number1, @text1)...; 
    StringBuilder queryBuilder = new StringBuilder("INSERT INTO myTable VALUES ");
    for (int i = 0; i < 10; i++)
    {
        queryBuilder.AppendFormat("(NULL,@number{0},@text{0}),", i);
        //once we're done looping we remove the last ',' and replace it with a ';'
        if (i == 9)
        {
            queryBuilder.Replace(',', ';', queryBuilder.Length - 1, 1);
        }
    }

    MySqlCommand command = new MySqlCommand(queryBuilder.ToString(), connection);
    //assign each parameter its value
    for (int i = 0; i < 10; i++)
    {
        command.Parameters.AddWithValue("@number" + i, i);
        command.Parameters.AddWithValue("@text" + i, "textValue");
    }

    command.ExecuteNonQuery();
} 
```

# c# - 使用分配的 ControlTemplate 设置 UserControl 的填充？

> ID：12660501
> 
> 赞同：1
> 
> 时间：2012-09-30T10:21:07.160
> 
> 标签：c#, wpf, controltemplate

我最近创建了一个`UserControl`用于`WrapPanel`可视化一些数据的工具。我对其应用了 a`Padding`以便在每个元素之间留出一些空间。

第一个版本看起来像这样：

```
<UserControl x:Class="IFCS.EntityOverviewPanel"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:l="clr-namespace:IFCS"
         mc:Ignorable="d"
         Padding="5, 5, 5, 5"
         d:DesignHeight="300" d:DesignWidth="300">
    <!-- Code -->
</UserControl> 
```

现在我只是应用了一个`ControlTemplate`覆盖我的`Padding`设置的它。

当前版本如下所示：

```
<UserControl x:Class="IFCS.EntityOverviewPanel"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:l="clr-namespace:IFCS"
         mc:Ignorable="d"
         d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Template>
        <ControlTemplate TargetType="UserControl">
            <!-- Code -->
        </ControlTemplate>
    </UserControl.Template>
</UserControl> 
```

我想再次申请`Padding`我的`UserControl`，但我尝试的一切都没有奏效。我试图应用一个`Style`using

```
<UserControl.Style>
    <Style TargetType="{x:Type UserControl}">
        <Setter Property="Padding" Value="5, 5, 5, 5"/>
    </Style>
</UserControl.Style> 
```

但这没有用。在“标题”中设置`Padding`也不起作用。

`Padding`为了获得与第一个版本相同的结果，我必须在哪里设置值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T17:03:28.360

```
<UserControl Padding="5,5,5,5">
    <UserControl.Template>
        <ControlTemplate TargetType="UserControl">
            <ContentPresenter Margin="{TemplateBinding Padding}" />
            <!-- Code -->
        </ControlTemplate>
    </UserControl.Template>

    <!-- Content -->
</UserControl> 
```

# c# - 在C#中更改图片框中的图片

> ID：12660505
> 
> 赞同：1
> 
> 时间：2012-09-30T10:21:41.070
> 
> 标签：c#, image, picturebox

我不确定我的错误是什么，但我告诉你它以前有效。我想根据用户的选择更改图片框中的图片。

我放的第一张图片在图片控制框中。我只是放了图片而不做代码。然后，当系统收到用户选择的值时，图片将变为第二张图片。

代码：

```
if (fheadValue == 101)
{                            
    Bitmap abc = (Bitmap)System.Drawing.Bitmap.FromFile
        ("C:\\Users\\HDAdmin\\Pictures\\humanbody\\MALE123\\images\\malebothandroid_01");
    pictureBox1.Image = abc;
} 
```

在此之前，我只使用此代码，它确实更改为第二张图片。但现在，它不起作用。我不知道我的代码有什么问题。

然后我尝试使用此代码。

```
pictureBox1.Image = Image.FromFile("C:\\Users\\HDAdmin\\Pictures\\humanbody\\MALE123\\images\\malebothandroid_01"); 
```

但是，它仍然不起作用。伙计们，请帮我解决这个问题。它确实适用于以前的项目，但是当我将相同的方法应用于新项目时，它不会起作用。有没有我在没有注意到的情况下犯了任何粗心的错误..？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:24:39.103

刚刚注意到，您还没有设置图像的文件扩展名。你应该添加一个扩展。无论是 bmp,png,jpg..

**编辑：**也调用 pictureBox1.Invalidate()

**Edit2：**至于评论，没有必要调用 Invalidate()。

# c# - 如何使用 GZipStream 压缩/解压缩目录？

> ID：12660514
> 
> 赞同：-1
> 
> 时间：2012-09-30T10:24:08.320
> 
> 标签：c#, .net

我想要压缩/解压缩没有任何 dll 的目录。

我使用此代码使用 GzipStream 压缩文件。

```
 public static void Compress(FileInfo fileToCompress)
    {
        using (FileStream originalFileStream = fileToCompress.OpenRead())
        {
            if ((File.GetAttributes(fileToCompress.FullName) & FileAttributes.Hidden) != FileAttributes.Hidden & fileToCompress.Extension != ".gz")
            {
                using (FileStream compressedFileStream = File.Create(fileToCompress.FullName + ".gz"))
                {
                    using (GZipStream compressionStream = new GZipStream(compressedFileStream, CompressionMode.Compress))
                    {
                        originalFileStream.CopyTo(compressionStream);
                        Console.WriteLine("Compressed {0} from {1} to {2} bytes.",
                            fileToCompress.Name, fileToCompress.Length.ToString(), compressedFileStream.Length.ToString());
                    }
                }
            }
        }
    } 
```

我将此[链接](http://www.codeproject.com/Tips/319438/How-to-Compress-Decompress-directories)用于压缩目录。但不要为我工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-10T21:43:54.537

据我所知，您不能将整个目录压缩为单个 gz 文件。您最终会得到多个 gz 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-12T01:46:39.337

您可以将目录打包为 .Tar 文件，然后在 tar 文件上使用 gZip。这需要使用诸如 SharpZipLib 之类的库。您可以从“管理 NuGet 包”菜单安装该库。

```
DirectoryInfo directoryOfFilesToBeTarred = new DirectoryInfo(@"c:\tar\start");
FileInfo[] filesInDirectory = directoryOfFilesToBeTarred.GetFiles();
String tarArchiveName = @"c:\tar\mytararchive.tar.gz";
using (Stream targetStream = new GZipOutputStream(File.Create(tarArchiveName)))
{
    using (TarArchive tarArchive = TarArchive.CreateOutputTarArchive(targetStream, TarBuffer.DefaultBlockFactor))
    {
        foreach (FileInfo fileToBeTarred in filesInDirectory)
        {
            TarEntry entry = TarEntry.CreateEntryFromFile(fileToBeTarred.FullName);
            tarArchive.WriteEntry(entry, true);
        }
    }
} 
```

来源： [https ://dotnetcodr.com/2015/02/04/packing-and-unpacking-files-using-tar-archives-in-net/](https://dotnetcodr.com/2015/02/04/packing-and-unpacking-files-using-tar-archives-in-net/)

或者

您可以在纯 .NET 3.0 中压缩目录。由于修改了 GPL 许可证，可能不希望使用 SharpZipLib。

首先，您需要对 WindowsBase.dll 的引用。

此代码将打开或创建一个 zip 文件，在其中创建一个目录，并将文件放在该目录中。如果你想压缩一个文件夹，可能包含子目录，你可以遍历目录中的文件并为每个文件调用这个方法。然后，您可以深度优先搜索文件的子目录，为每个文件调用方法并传入路径以在 zip 文件中创建该层次结构。

```
public void AddFileToZip(string zipFilename, string fileToAdd, string destDir)
{
    using (Package zip = System.IO.Packaging.Package.Open(zipFilename, FileMode.OpenOrCreate))
    {
        string destFilename = "." + destDir + "\\" + Path.GetFileName(fileToAdd);
        Uri uri = PackUriHelper.CreatePartUri(new Uri(destFilename, UriKind.Relative));
        if (zip.PartExists(uri))
        {
            zip.DeletePart(uri);
        }
        PackagePart part = zip.CreatePart(uri, "", CompressionOption.Normal);

        using (FileStream fileStream = new FileStream(fileToAdd, FileMode.Open, FileAccess.Read))
        {
            using (Stream dest = part.GetStream())
            {
                CopyStream(fileStream, dest);
            }
        }
    }
} 
```

destDir 可以是一个空字符串，它将文件直接放在 zip 中。

资料来源： [https ://weblogs.asp.net/jongalloway/creating-zip-archives-in-net-without-an-external-library-like-sharpziplib](https://weblogs.asp.net/jongalloway/creating-zip-archives-in-net-without-an-external-library-like-sharpziplib)

[https://weblogs.asp.net/albertpascual/creating-a-folder-inside-the-zip-file-with-system-io-packaging](https://weblogs.asp.net/albertpascual/creating-a-folder-inside-the-zip-file-with-system-io-packaging)

# c# - 为什么这个类属性不序列化？

> ID：12660515
> 
> 赞同：1
> 
> 时间：2012-09-30T10:24:11.140
> 
> 标签：c#, .net, wpf, xml-serialization

```
[Serializable]
public class ProfilesCollection : ObservableCollection<Profile>
{  
    public ProfilesCollection()
    {            
    }
}

[Serializable]
public class Profile : ObservableCollection<SomeData>
{
    private string _name;        
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Name"));
        }
    }

    public Profile()
    {
    }
}

[Serializable]
public class SomeData : INotifyPropertyChanged
{
    // some properties

    public SomeData()
    { ... }

    [field: NonSerialized]
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(property));
    }
} 
```

我正在尝试使用 XmlSerializer 序列化 ProfilesCollection（或 Profile）对象：

```
using (var writer = new StreamWriter("1.xml"))
{
    var xs = new XmlSerializer(typeof(ProfilesCollection));
    xs.Serialize(writer, _profiles);
} 
```

但 .xml 不包含 Profile 类中的 Name 属性。除此之外的一切都很好。我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:22:27.180

序列化集合时`XmlSerializer`，它只查看集合中的项目，而不查看集合类的其他属性。如果您需要序列化名称，则需要执行以下操作：

```
public class Profile
{
    private string _name;        
    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            OnPropertyChanged(new PropertyChangedEventArgs("Name"));
        }
    }

    private readonly ObservableCollection<SomeData> _data = new ObservableCollection<SomeData>();
    public ObservableCollection<SomeData> Data
    {
        get { return _data; }
    }

    public Profile()
    {
    }
} 
```

顺便说一句，`Serializable`and`NonSerialized`属性不被 使用`XmlSerializer`，所以你不需要它们（并且事件不会被序列化`XmlSerializer`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:08:13.693

我认为您的 1.xml 文件应该具有与 Profile 类相同的结构。（它应该有一个名称节点？）

# pyramid - Pyramid 应用程序未在视图之间释放内存

> ID：12660516
> 
> 赞同：3
> 
> 时间：2012-09-30T10:24:15.680
> 
> 标签：pyramid, pickle, python-3.2

我有一个以有趣的方式行为不端的金字塔视图。视图所做的是从文件中获取一个非常复杂的对象层次结构（使用 pickle），进行一些处理，然后呈现一个 html 表单。很好很简单。

**设置**：

我正在运行 Ubuntu 12.04 64 位、Python3.2、Pyramid 1.3.3、SQLAlchemy 0.7.8 并使用标准的女服务员服务器。

**症状**

我遇到了一些效率问题，所以使用系统监视器来尝试查看发生了什么，并发现当金字塔进行处理时，对于我描述的我的 ram 使用率稳步上升的视图。由于 html 表单显示在我的浏览器中，内存使用量趋于平稳，但没有下降。重新加载视图导致 ram 使用量从它停止的地方稳定增长。如果我继续这样做，我所有的内存都用完了，一切都会停止。

如果我杀死服务器，那么内存使用量会立即下降。

**问题**

这是怎么回事？很明显，视图渲染之间没有释放内存，但是为什么会发生这种情况呢？我怎样才能让它停止？我什至尝试在从视图返回之前调用 del 东西，但没有任何改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:33:35.023

Pyramid 的调试工具栏使对象保持活动状态。停用它可以解决大多数内存泄漏问题。导致我在 Pyramid 中搜索错误的泄漏似乎根本不是 Pyramid 的问题

# .htaccess - 我的 url 重写重定向到 mydomain.com/var/www/clients/client3/web25/

> ID：12660519
> 
> 赞同：4
> 
> 时间：2012-09-30T10:24:21.963
> 
> 标签：.htaccess, url-rewriting

我正在尝试重写我的 joomla 网站上的网址。我有一个额外的页面，上面有一些其他的东西。

我有：

```
RewriteRule ^company/([^/]+) company?alias=$1 [NC] 
```

我希望 company/somecompany 在哪里显示 url company?alias=somecompany 将提供什么（不转发）。

我得到的是重定向到：

[http://www.mydomain.dk/var/www/clients/client2/web5/web/company?alias=somecompany](http://www.mydomain.dk/var/www/clients/client2/web5/web/company?alias=somecompany)

此外，如果我包含一个“-”，如“公司/某些公司”，它会跳过我的重写，只是转到 joomla 重写规则（并且找不到文章）

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T19:41:08.980

您需要添加一个`RewriteBase`. 当您的重写规则的目标不是以斜杠开头（使其成为绝对 URI）时，apache 需要猜测它是 URI 路径还是文件路径，并且它错误地猜测它是文件路径。添加一个 base 告诉 apache 它是一个 URI 路径。

```
RewriteBase / 
```

或在目标中添加前导斜杠：`/company/?alias=$1`

您还想在 company 添加一个斜杠并使用`[L]`标志：

```
RewriteRule ^company/([^/]+) company/?alias=$1 [L,NC] 
```

缺少的斜杠可能是导致 mod_dir 和`DirectorySlash`重定向的罪魁祸首。`L`标志可能是 joomla 规则最终被应用的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-11T15:26:16.723

这是工作示例：

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteBase /
  RewriteRule ^/?old-folder/(.*)$ /new-folder/$1 [R=301,L]
</IfModule> 
```

有关更多示例，请检查：

*   [学习 Apache mod_rewrite：13 个真实示例](https://www.sitepoint.com/apache-mod_rewrite-examples-2/)
*   [用于 VS 代码的 Apache Conf 片段](https://github.com/hrdtbs/vscode-apacheconf-snippets/blob/master/snippets/apacheconf.json)

# awk - awk - 如何改进正则表达式？

> ID：12660521
> 
> 赞同：2
> 
> 时间：2012-09-30T10:25:24.497
> 
> 标签：awk

我有一个文件：

```
@Book{gjn2011ske, 
  author =   {Grzegorz J. Nalepa},
  title =    {Semantic Knowledge Engineering. A Rule-Based Approach},
  publisher =    {Wydawnictwa AGH},
  year =     2011,
  address =  {Krak\'ow}
}

@article{gjn2010jucs,
  Author =   {Grzegorz J. Nalepa},
  Journal =  {Journal of Universal Computer Science},
  Number =   7,
  Pages =    {1006-1023},
  Title =    {Collective Knowledge Engineering with Semantic Wikis},
  Volume =   16,
  Year =     2010
} 
```

我想改进只删除第一行的正则表达式。**注意：**记录分隔符`RS="}\n"`不能更改。

我试过：

```
awk 'BEGIN{ RS="}\n" } {gsub(/@.*,/,"") ; print }' file 
```

我想打印结果：

```
 author =   {Grzegorz J. Nalepa},
  title =    {Semantic Knowledge Engineering. A Rule-Based Approach},
  publisher =    {Wydawnictwa AGH},
  year =     2011,
  address =  {Krak\'ow}

  Author =   {Grzegorz J. Nalepa},
  Journal =  {Journal of Universal Computer Science},
  Number =   7,
  Pages =    {1006-1023},
  Title =    {Collective Knowledge Engineering with Semantic Wikis},
  Volume =   16,
  Year =     2010 
```

感谢您的帮助。

**编辑：**

我提出的解决方案：

```
awk 'BEGIN{ RS="}\n" }{sub(",","@"); sub(/@.*@/,""); print }' file 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:09:53.453

使用指定的设置很难完成你想要的`RS`（因为`address = {Krak\'ow}`有一个额外的记录结尾）。我宁愿选择：

```
awk '$0 !~ "^@" && $0 !~ "^} *$" { print }' FILE 
```

[在这里](http://ideone.com/rfOQN)查看它的实际应用。

*编辑*我不知道为什么它必须使用正则表达式解决方案，你能解释一下吗？

无论如何，还有另一个（[工作，见这里](http://ideone.com/dVEpq)）解决方案，它使用正则表达式，但不是你所期望的。：

```
awk 'BEGIN{ RS="}\n" }
{
  split($0,a,"\n")
  for (e=1;e<=length(a);e++) {
      if (a[e] ~ "{" && a[e] !~ "}") {
          sub("$","}",a[e])
      }
      if (a[e] ~ "=") { print a[e] }
  }
  printf("\n")
}' INPUTFILE 
```

还有一个，用一个更简单的正则表达式，但它失败了，`address`最后一个 "" 行将`}`被你的 删除`RS`，它会打印一个 final `}`...

```
awk 'BEGIN{ RS="}\n" }
{
  sub("@[^,]\+,","")
  print $0
}' INPUTFILE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:58:28.733

一种不使用正则表达式的方法。将*字段分隔符*设置为换行符，现在寄存器的每个键都是一个字段。有了它，遍历每个字段并打印那些不以开头的`@`：

```
awk '
    BEGIN { 
        RS="}\n"; 
        FS=OFS="\n"; 
    } 
    { 
        for (i=1; i<=NF; i++) { 
            if ( substr($i, 1, 1) != "@" ) { 
                printf "%s%s", $i, (i == NF) ? RS : OFS; 
            } 
        } 
    }
' file 
```

输出：

```
author =   {Grzegorz J. Nalepa},
title =    {Semantic Knowledge Engineering. A Rule-Based Approach},
publisher =    {Wydawnictwa AGH},
year =     2011,
address =  {Krak\'ow}

Author =   {Grzegorz J. Nalepa},
Journal =  {Journal of Universal Computer Science},
Number =   7,
Pages =    {1006-1023},
Title =    {Collective Knowledge Engineering with Semantic Wikis},
Volume =   16,
Year =     2010 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T12:32:08.723

我`GNU sed`会这样做：

```
sed '/^@/,/^}$/ { //d }' file.txt 
```

结果：

```
 author =   {Grzegorz J. Nalepa},
  title =    {Semantic Knowledge Engineering. A Rule-Based Approach},
  publisher =    {Wydawnictwa AGH},
  year =     2011,
  address =  {Krak\'ow}

  Author =   {Grzegorz J. Nalepa},
  Journal =  {Journal of Universal Computer Science},
  Number =   7,
  Pages =    {1006-1023},
  Title =    {Collective Knowledge Engineering with Semantic Wikis},
  Volume =   16,
  Year =     2010 
```

请注意，您可以使用该`-i`标志就地进行更改（即覆盖文件内容），您可以使用该`-s`标志对多个文件进行更改。例如：

```
sed -s -i '/^@/,/^}$/ { //d }' *.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T06:46:10.150

```
awk '{if($0!~/@/&&$0!~/^}/)print}' temp 
```

测试如下：

```
> awk '{if($0!~/@/&&$0!~/^}/)print}' temp
  author =       {Grzegorz J. Nalepa},
  title =        {Semantic Knowledge Engineering. A Rule-Based Approach},
  publisher =    {Wydawnictwa AGH},
  year =         2011,
  address =      {Krak\'ow}

  Author =       {Grzegorz J. Nalepa},
  Journal =      {Journal of Universal Computer Science},
  Number =       7,
  Pages =        {1006-1023},
  Title =        {Collective Knowledge Engineering with Semantic Wikis},
  Volume =       16,
  Year =         2010
> 
```

# c - C 语言是否强加了全局链接？

> ID：12660528
> 
> 赞同：0
> 
> 时间：2012-09-30T10:26:51.990
> 
> 标签：c, compiler-construction, linker, standards

如果我们有一组模块（翻译单元）符号可以通过两种方式链接：

1.  “本地”链接 - 给定的导出符号“a”可以链接到适当的模块 m1，而来自不同模块的其他给定符号“a”可以链接到其他适当的模块 m2。使用这种链接方式，即使两个模块使用相同的符号名称也不会发生冲突——它们只是不能链接到同一个模块

2.  “全局”链接 - 所有符号名称在链接时都放在一个包中。它会造成符号空间污染并且没有必要（我认为它是 c 链接系统中的“设计错误”）

C 语言可能不会强加“全局”链接，但链接器会执行 AFAIK

希望这个问题是适当的。它是关于 c 语言的，很明显，“ *C 语言是否强制采用全局链接方式？* ”

//编辑

下面有人说C99强加了这一点。TNX 来回答。

第一个c标准也强加了这个吗？我对这里的原始 c 创建者的意图很好奇。（正如我所说，我认为全局链接在 c 语言中是一个糟糕的选择）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T10:33:28.880

来自 C99 §6.2.2*标识符的链接*

> 在构成整个程序的一组翻译单元和库中，具有*外部链接的特定标识符的每个声明都* **表示相同的对象或函数**。*在一个翻译单元中，具有内部链接*的标识符的每个声明都表示相同的对象或函数。没有链接的标识符的每个声明都表示一个唯一的实体。

您正在谈论具有外部链接的符号，所以不，您在整个程序中不能有多个这样的东西。

至于您提出的“本地链接”，如果有多个名称完全相同的事物，编译器或链接器如何知道要绑定哪个符号？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:51:59.513

C 中的标识符具有以下三种关联的*链接类型之一：*

1.  **internal**，当用 声明时`static`。只能在同一个翻译单元中引用。
2.  **external**，当声明时`extern`（这也是默认值）。可以在包含程序的任何翻译单元中引用
3.  **none**，当它们不是链接的一部分时（宏、自动变量、类型名称，..）

而已。这在某种程度上不是你所说的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:24:22.090

C 标准没有说明模块/动态库。这些由其他标准涵盖，例如：ELF。因此，只要您使用多个模块/动态库，您就超出了 ISO C 的范围。用于微型嵌入式系统的 C 编译器不应该被要求关心模块。

# c# - 绑定 DataTemplate 内容

> ID：12660534
> 
> 赞同：2
> 
> 时间：2012-09-30T10:27:46.743
> 
> 标签：c#, wpf, gridview, binding, datatemplate

我有以下内容`DataTemplate`：

```
<DataTemplate x:Key="ButtonTemplate">
    <Button Click="Cell_Click">
        <Button.Template>
            <ControlTemplate TargetType="{x:Type Button}">
                <TextBlock x:Name="TBlock" />
            </ControlTemplate>
        </Button.Template>
    </Button>
</DataTemplate> 
```

我将其`DataTemplate`用作，但是当我添加新列时`GridViewColumn.CellTemplate`，我必须动态绑定 的`Text`属性：`TextBlock`

```
GridViewColumn column = new GridViewColumn();
column.CellTemplate = Resources["ButtonTemplate"] as DataTemplate;
// How to get the TBlock (TextBlock) of CellTemplate and bind its property here?
MyGridView.Columns.Add(column); 
```

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:52:22.410

您可以为 TextBlock 的 Loaded-Event 附加一个 EventHandler 并在那里创建绑定（基于 TextBlock 的 DataContext，如果有足够的信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T13:13:26.253

忘记修改模板，您最好在代码中从头开始创建它（或者您可以使用[`XamlReader.Parse`](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlreader.parse.aspx)动态插入绑定代码的 XAML 字符串）。

# javascript - CSS/Javascript 动态渐变或阴影

> ID：12660536
> 
> 赞同：0
> 
> 时间：2012-09-30T10:28:21.753
> 
> 标签：javascript, jquery, css, gradient, shadow

我正在使用这些规则：

```
.log-widget-alexa{ background: #001C48;}
.log-widget-altervista{ background: #FFE852;}
.log-widget-amazon{ background: #000000;}
.log-widget-aol{ background: #0060A3;}
etc .. 
```

我只想再使用 1 个类来添加一个嵌入的变暗阴影或渐变颜色来压印具有相同变暗背景的小部件。

是否有可能使用一些 CSS/JavaScript/jQuery 技巧？

我的意思是如果我有背景：#666; 例如，我想在 #555 中添加一个简单的渐变/阴影（在这种情况下，从起始背景颜色变暗 = #666）

我想设置一些 CSS 技巧，而不是手动使用 box-shadow 或 background-image 渐变：/ 因为我的 CSS 中有数千条这样的规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:54:52.707

纯 CSS 是不可能的。为此，您需要 Javascript。选择所有元素，使用 获取背景颜色`.css()`，计算秒颜色，然后相应地`.css()`应用渐变。

# r - R：动态给定模型作为函数的参数？

> ID：12660543
> 
> 赞同：0
> 
> 时间：2012-09-30T10:29:29.387
> 
> 标签：r, function, testing, arguments

> **可能重复：**
> [将变量向量传递给 lm() 公式](https://stackoverflow.com/questions/9238038/passing-a-vector-of-variables-into-lm-formula)

我显然是 R 的新手，所以很抱歉；）

我正在尝试实现一个交互式 QLR 类型测试，但是因为我的代码将成为纸质文件的一部分，所以我真的想将它作为一个函数放在一个单独的文件中。

目标是对模型的所有观察结果进行迭代 F 检验，以发现结构中断，直到找到（假设）五个左右的结构中断并将其作为二元虚拟变量在模型中实施。交互将被测试并手动添加。

很抱歉还没有代码，因为我还没有真正编写函数。但这是我想象它的工作方式：

1.  有一个包装函数接收模型和变量（我也可以只访问我猜的全局对象？）作为参数。

2.  然后它调用 QLR 函数。它返回具有最高 F 值的索引，以及第一个具有 QLR 显着性的索引之后的日期索引。）

    *原因是如果我在先前找到的虚拟变量已经为 1 的区间内测试一个虚拟变量为 1，则 F 检验会给我一个多重共线性错误。因此，如果我的初始虚拟变量的索引非常低，之后我不会找到任何休息时间。如果它是 500 并且我在之后的所有日期将它设置为 1，那么下一次迭代只能找到索引小于 500 的显着 F 值。*

3.  然后包装器调用一个函数来创建一个虚拟时间序列，该时间序列在第一个索引之前为 0，然后是 1，然后在达到第二个索引时再次为 0。

    *假设最显着的 F 值在索引 500 处，而另一个显着值在 1000、1500 和 2000 等处。然后虚拟函数将在 500-999 的区间内将虚拟值设置为 1。*

4.  具有虚拟变量 D1 的新模型将返回给 QLR 函数，该函数对新变量 D2 重复该过程，依此类推。

现在我意识到这有点令人费解，它会给我提供开关类型的假人，让我在日期对模型产生总体影响，而不是效果的影响。但这在上下文中很好，我真的不知道如何解决 LHT 函数中的多重共线性问题。

无论如何，我需要实现的是能够生成模型并将其动态传递给 QLR 函数，并将新的虚拟变量动态添加到模型中。

我希望它不限于一定数量的假人，因为我事先不知道有多少人可能会显着测试 QLR。因此，我还需要能够添加具有动态名称的变量。我想我可以把它作为一个向量来做，必须有一个 add-row 函数，对吧？

您将如何将模型+变量动态传递给函数？

# c - 欧拉计划 #179

> ID：12660546
> 
> 赞同：1
> 
> 时间：2012-09-30T10:30:20.827
> 
> 标签：c

问题：求整数个数 1 < n < 10^7，其中 n 和 n + 1 具有相同数量的正因数。例如，14 具有正因数 1、2、7、14，而 15 具有 1、3、5、15。

我无法达到 10^7，因为它对 C 和我来说太大了。我如何在 C 中解决这个问题？

```
#include<stdio.h>
#include<conio.h>

int divisorcount(int);

int main()
{
    int number,divisornumber1,divisornumber2,j=0;

    for(number=1;number<=100;number++){
        divisornumber1=divisorcount(number);
        divisornumber2=divisorcount(number-1);
        if(divisornumber1==divisornumber2){
            printf("%d and %d\n",number-1,number);
            j++;
        }
    }
    printf("\nThere is %d integers.",j);

    getch();
}

int divisorcount(int num)
{
    int i,divi=0;
    for(i=1;i<=(num)/2;i++)
        if(num%i==0)
            divi++;
    return divi;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:58:15.797

作为如何在一分钟内解决问题的提示，您可以遍历从 2 到 10^7 的每个数字，循环遍历这些数字的所有倍数并递增 1（1 被忽略，因为所有数字都是 1 的倍数）。最后，您将获得数组中每个数字的除数（检查您的编译器是否支持 32 位索引）。只需使用最终的线性扫描来计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T10:34:51.053

试过`long long num = 100000000LL;`吗？C 不够聪明，无法从左侧总结右侧的类型，`long long`因此您必须添加`LL`. 使用这种方法，您应该能够处理比普通整数更大的数字，只需以合适的方式更改您的函数和变量。

A的大小`long long`始终至少为`2^64`一点，您可以在[Wikipedia](http://en.wikipedia.org/wiki/C_data_types#Basic_types)上查看。

*提示：*正如评论中提到的那样，Project Euler 不是暴力破解。这是一种蹩脚的方法。考虑一些更好的策略。您可能想在[math.stackexchange](https://math.stackexchange.com/)获得帮助？

**编辑：**我不知道为什么我认为 a`uint32_t`还不够`10^7`- 对不起那个错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-19T13:55:13.743

To expand on nhahtdh's idea, to make it even faster (at cost of making it more complicated), make a prime number sieve calculating the prime numbers up to sqrt(10^7) = about 3170\. Then the exponents of prime factors determine the number of multiples so that the product of (exp+1) is the number of integers dividing the number. So you can set an array to ones, then loop over each prime, multiplying with that primes exponent contribution (plus one) for each position it multiplies.

# erlang - Ejabber 结构和名册

> ID：12660547
> 
> 赞同：1
> 
> 时间：2012-09-30T10:30:26.340
> 
> 标签：erlang, xmpp, ejabberd

我是 ejabberd 的新手，但我注意到的第一件事是完全没有文档和代码注释。

我有很多疑问，但主要是：记录jid里面user和luser，server和lserver，...和...有什么区别？

```
-record(jid, {user, server, resource,
      luser, lserver, lresource}). 
```

记录智商有什么用？

```
-record(iq, {id = "",
         type,
         xmlns = "",
         lang = "",
         sub_el}). 
```

ejabber 中的订阅是什么？两个用户之间的关系？

名册内的jid是什么？

我知道这些问题也可能很愚蠢，但我真的不知道不问怎么理解，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T17:03:57.137

> 用户和 luser 有什么区别？

luser、lserver 和 lresource 是使用适当的 stringprep 配置文件处理后的 jid 的对应部分。请参阅[https://www.rfc-editor.org/rfc/rfc3920#section-3](https://www.rfc-editor.org/rfc/rfc3920#section-3)。简而言之，在 ejabberd 中，您很可能总是使用处理后的版本，而只有在将 JID 序列化回网络时才使用原始版本。

> 记录智商有什么用？

它使得在 IQ 命名空间、id 或类型 (get|set|error) 上进行匹配比每次都从下级 xml 中检索该信息更容易。

> ejabber 中的订阅是什么？两个用户之间的关系？

基本上，是的。用户 A 订阅用户 B 意味着 A 对 B 的存在感兴趣。但是订阅可以处于不同的状态（因为其他用户必须接受它，等等）。请参阅[http://xmpp.org/rfcs/rfc3921.html#sub](http://xmpp.org/rfcs/rfc3921.html#sub)。

> 名册内的jid是什么？

抱歉，没听懂你的意思，你想知道什么？

# c# - 关于 UDP 服务器的问题

> ID：12660553
> 
> 赞同：0
> 
> 时间：2012-09-30T10:31:12.687
> 
> 标签：c#, udp, multicast

我正在用 C# 开发客户端/服务器应用程序。它经常将相同的数据包发送到许多端点。将相同的数据复制到操作系统缓冲区并导致其他一些问题显然很糟糕。就我而言，我只是想不出一个有效的方法来完成这项工作。我考虑过多播，可以在 Internet 上使用吗？如果是这样，我该如何使用它？或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:38:24.767

`Unicast`对于每个连接的客户端，他们的会话可能在自己的线程上运行。并验证这`UDP`确实是您想要/需要的。

# java - 在preparedStatement中使用可变数量的参数

> ID：12660555
> 
> 赞同：5
> 
> 时间：2012-09-30T10:31:45.740
> 
> 标签：java, jdbc, prepared-statement

我正在为我的应用程序创建一个搜索表单。
在其中，用户选择应该用于过滤数据的字段。数字字段是可变的，所以我不知道SQL 查询的 where 子句中应该有
多少。 如何在 where 子句中使用可变数量的条件？ `?`
`preparedStatement`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T10:55:22.883

如果您想在 where 子句中添加可变数量的条件，请使用 StringBuilder（如果是多线程环境，则为 StringBuffer），并且运行时间取决于您的条件连接/附加到您的字符串。

像

```
StringBuilder query = new StringBuilder("Select id, name from Student ");

if(args >0)
{
    query.append(" where "); //and add more args. 
```

然后通过将其转换为字符串来使用此查询创建准备好的语句

```
PrepareStatement(query.toString()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T10:47:23.573

PrepardStatements 不支持可变数量的条件。一些框架所做的是，它们将每个 PreparedStatement 缓存在一个 Map 中，其中键是查询。

所以每次你想运行一个查询时，你需要构建字符串来创建 PreparedStatement，检查你是否在地图中有它（并重用它）或者创建一个新的，然后将它添加到地图中。

# python - Python，瓶子，现在要调试

> ID：12660568
> 
> 赞同：1
> 
> 时间：2012-09-30T10:33:55.673
> 
> 标签：python, bottle

这是来自文档......

```
if __name__ == "__main__":
    # Interactive mode
    run(host='localhost', port=8049, debug=True) 
```

这是我得到的错误。我错过了什么？

```
Bottle server starting up (using WSGIRefServer(debug=True))...
Listening on http://localhost:8049/
Hit Ctrl-C to quit.
Shutdown...
Traceback (most recent call last):
  File "/home/ubuntu/workspace/rtbopsConfig/rtbServers/rtbUwsgiBidderServer/uwsgiBidderServer.py", line 1239, in <module>
    run(host='localhost', port=8049, debug=True)
  File "/usr/local/lib/python2.7/dist-packages/bottle-0.10.11-py2.7.egg/bottle.py", line 2426, in run
    server.run(app)
  File "/usr/local/lib/python2.7/dist-packages/bottle-0.10.11-py2.7.egg/bottle.py", line 2123, in run
    srv = make_server(self.host, self.port, handler, **self.options)
TypeError: make_server() got an unexpected keyword argument 'debug' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T10:57:45.250

对于 0.11 之前的版本，您可以通过执行以下操作启用调试模式：

```
bottle.debug(True)
bottle.run(host='localhost', port=8049) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T10:40:49.040

要运行的`debug=`参数仅从瓶版本 0.11[开始可用。](https://github.com/defnull/bottle/commit/f1a216cec765c77f4c5e7b66bfdfce9494c6a51b)更新瓶子（例如，只需[下载最新版本](https://raw.github.com/defnull/bottle/master/bottle.py)，并将其放在应用程序的目录中），或者`debug=True`通过替换删除

```
run(host='localhost', port=8049, debug=True) 
```

和

```
run(host='localhost', port=8049) 
```

# java - 使用 RED5 服务器应用程序为客户端请求创建 RTMP 流

> ID：12660569
> 
> 赞同：1
> 
> 时间：2012-09-30T10:33:55.903
> 
> 标签：java, red5, rtmp, rtmps

我正在处理要使用 RED5 服务器应用程序创建 RED5 rtmp 流的代码片段。自 5 天以来，我一直在寻找相同的好教程。

stackoverflow 上的所有教程或问题都讨论了 RTMP 客户端代码或使用 oflademo 进行流式处理的问题。

我取得了什么成就？

1.  我已经在我的 ubuntu 机器上成功安装并运行了 RED5。
2.  我已经安装了 RED5 Eclipse IDE 插件并创建了一个带有 RED5 运行时代码生成的示例项目
3.  我可以在 rtmp 上看到 oflademo 应用流媒体视频

我想达到什么目的？

1.  有一个服务器端 jsp 页面显示我收到的连接数。

    *   为此，我做了一个小测试，就像我在 web.xml 中定义了欢迎文件以及我使用插件生成的项目一样。但是我无法访问该文件，但同时如果我使用简单的 Eclipse 向导为 tomcat 创建一个项目，我的欢迎文件就可以工作。
2.  收到每个请求后，我想为该客户端启动一个 rtmp 流。

    *   我尝试阅读 oflademo 的代码，但真的无法理解代码。大多数东西都被注释了，或者可能是我在阅读该代码时遗漏的东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:30:28.797

我找到的一种解决方案是回到 0.9 版本，1.0 RC 有一些问题。我切换回 0.9，一切似乎都正常。

# java - 如何在服务器端管理大量用户？

> ID：12660570
> 
> 赞同：0
> 
> 时间：2012-09-30T10:34:03.007
> 
> 标签：java

我构建了一个社交 android 应用程序，用户可以在其中通过 gps 位置查看周围的其他用户。一开始一切顺利，因为我的用户数量很少，但是现在我的用户数量越来越多（每天大约 1500 +100），我发现了我的设计中的一个主要问题。

在我的 Google App Engine servlet 中，我有一个静态 HashMap，它保存了所有用户配置文件对象，当前为 1500，并且随着更多用户注册，这个数字会增加。

**为什么我这样做**

每个请求他周围用户的用户都会将他的 gps 与其他用户进行比较，并检查他们是否在他的 10 公里半径范围内，平均每 5 分钟发生一次。这就是为什么我每次都无法从 db 获取用户的原因，因为 GAE 读/写操作配额会让我分崩离析。

**这个设计的问题是**

随着用户数量的增加，Hashmap 每隔 4-6 小时就会变为 null，我认为这个时间会越来越短，但我不确定。每次我检测到它变为空时，我都会通过从数据库重新加载用户来解决这个问题，但这会导致我的用户出现 DOS 30 秒，所以我正在寻找更好的解决方案。
我猜这是因为哈希图的大小，对吗？

我想知道如何管理**所有**具有最大可用性的用户配置文件。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:40:29.487

我不会将这些数据存储在 HashMap 中，因为如果您在多个实例上运行它并不能真正扩展，而且您会使用大量内存。

你为什么不使用一些不同的存储，比如也可以在“云”中使用的 MongoDB？（例如 www.mongohq.com）。

如果您想扩展，则需要将数据与处理器分开。例如，让 x 个服务器运行您的 servlet（或让 Google AppEngine 自行扩展）并将数据放在不同的位置（例如，在 MongoDB 或 PostgreSQL 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:44:14.950

你需要重新考虑你的整个设计。将所有用户存储在一个巨大的空间`HashMap`中不会扩展（迟早你将不得不集群你的应用程序）。此外，您的算法的复杂性非常高 - 您需要为每个用户遍历整个地图。

一个更具可扩展性的解决方案是使用[空间数据库](http://en.wikipedia.org/wiki/Spatial_database)。所有主要的关系数据库和一些 NoSQL 产品都提供地理空间索引。基本上，数据库查询引擎针对以下查询进行了优化：*给我这个给定点附近的所有记录*。

如果您的应用程序真的成功，那么即使是内存中的地图也会比企业级地理空间索引慢。

# workflow - 工作流基础中的访问类属性

> ID：12660574
> 
> 赞同：0
> 
> 时间：2012-09-30T10:34:31.600
> 
> 标签：workflow, workflow-foundation-4, workflow-foundation

所以我已经在调用一个工作流活动，其中“dataSet”包含我的 Employee 类的一个实例......

```
WorkflowInvoker.Invoke(wfManager.Activity, dataSet); 
```

我的员工有一个名为 Department 的属性。我想要的是在我的工作流 xaml 中编辑一个条件，但我将使它像这样：

```
Employee.Department == "RND" 
```

我在 VS2012 中执行此操作，当我在条件编辑器中键入 Employee 时，我无法访问其属性。我只是将我的活动 xaml 文件与我的 Employee 类放在同一个项目中。我应该怎么做才能访问活动 xaml 中的类属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:27:00.313

基本上，您需要定义一个 InArgument 并使用 Dictionary 将外部数据映射到参数。有了它，对象就可以通过参数名称获得。

请参阅[此博客文章](http://msmvps.com/blogs/theproblemsolver/archive/2009/10/23/workflow-parameters-in-window-workflow-foundation-4.aspx)，了解如何将数据传递到工作流。

# php - 从爆炸字符串访问密钥

> ID：12660587
> 
> 赞同：0
> 
> 时间：2012-09-30T10:40:14.267
> 
> 标签：php, arrays, explode

我很难从爆炸的琴弦上拔出钥匙。我可以得到分解的字符串来打印所有的值和键，但是如何将键存储为变量？这是我的例子：

```
<?php
$str = 'one,two,three,four';
print_r(explode(',', $str));
?> 
```

上面的代码会打印出来：

```
Array
(
[0] => one
[1] => two
[2] => three
) 
```

有人知道如何访问这些密钥吗？如果我只想回显 [1] 键，我会怎么做？任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:42:52.060

将分解后的值存储在数组中...

```
$str = 'one,two,three,four';
$temparray=explode(',', $str);

echo $temparray[1];  // two
echo $temparray[0];  // one.... 
```

# javascript - jQuery 不适用于 cakephp 2.0

> ID：12660588
> 
> 赞同：0
> 
> 时间：2012-09-30T10:40:14.967
> 
> 标签：javascript, jquery, cakephp, cakephp-2.0

我目前正在做一个项目，我想将 jQuery 实现到 cakephp 2.0。

我遵循了以下指南： [http ://book.cakephp.org/2.0/en/core-libraries/helpers/js.html](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html)

即我已经下载了 jquery-1.8.1.js（也尝试了 .min.js 文件）并将其放在 app/webroot/js 中。在我添加的默认布局文件中

```
echo $this->Html->script('jquery'); 
```

就在我添加的body标签结束之前

```
echo $this->Js->writeBuffer(); 
```

在我的控制器中，我添加了

```
public $helpers = array('Js' => array('Jquery')); 
```

当我重新加载页面并检查源代码时，我看到 jQuery 文件的链接正常工作。但是当我尝试添加一个像这样的简单脚本（只是添加一个警报）时（在视图文件中）：

```
$alert = $this->Js->alert('Hey there'); 
```

什么都没发生...

那里有任何善良的人可能对我做错了什么有任何建议吗？我花了几个小时查看互联网并遵循不同的指南，但仍然可以得到一个简单的东西作为警报工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T03:26:00.197

根据 CakePHP 2.0 文档：“默认情况下，警报不缓冲，并返回脚本片段。”

所以默认情况下：

```
echo $this->Js->alert('Hey there'); // outputs alert("Hey there"); 
```

要覆盖此行为并将脚本添加到缓冲区：

```
echo $this->Js->alert('Hey there', true); 
```

要写入缓冲区（通常在之前`</body>`）：

```
echo $this->Js->writeBuffer(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:05:04.783

作为替代方案，您可以使用 scriptBlock：

```
$jscript = "alert('Hey there!');";
echo $this->Html->scriptBlock($jscript, array('inline'=>false)); 
```

# image - 水平居中图像

> ID：12660593
> 
> 赞同：-1
> 
> 时间：2012-09-30T10:40:44.670
> 
> 标签：image, extjs, sencha-touch-2, alignment

这是我的图形用户界面： ![在此处输入图像描述](../Images/9e4048d25b5110d216e186bedf20faa7.png)

我会将图像水平居中....你能帮帮我吗？我不明白该怎么做。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:29:49.367

为组件“yourCls”提供 cls

```
.yourCls{
  background-image:url('resources/images/startup.png');
  background-position:center;
  background-repeat:no-repeat;
  height:100%;
  width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:46:32.497

尝试这个

```
margin : '30px 0px 0px 0px' 
```

# php - Codeigniter 2.1 - 结合来自 __construct 和被调用函数的 $data

> ID：12660595
> 
> 赞同：0
> 
> 时间：2012-09-30T10:40:51.067
> 
> 标签：php, codeigniter, codeigniter-2

我有几个**$data**几乎在控制器的所有函数中都被调用。有没有办法在**__construct函数中创建这个****$data**并将它们与被调用函数中的**$data**结合起来？例子：

 ****```
function __construct() {
        parent::__construct();

        $this->load->model('ad_model', 'mgl');
        $this->load->model('global_info_model', 'gi');
        $this->load->model('user_model', 'um');        
        $this->load->library('global_functions');
        $this->css = "<link rel=\"stylesheet\" href=\" " . CSS . "mali_oglasi.css\">";
        $this->gi_cat = $this->gi->gi_get_category();
        $this->gi_loc = $this->gi->gi_get_location();        
        $this->gi_type = $this->gi->gi_get_type();       
        }

    function index() {     
        $count = $this->db->count_all('ad');        
        $data['pagination_links'] = $this->global_functions->global_pagination('mali_oglasi', $count, 2);

        $data['title'] = "Mali Oglasi | 010";
        $data['oglasi'] =  $this->mgl->mgl_get_all_home(10);
        $data['loc'] = $this->gi_loc;
        $data['cat'] = $this->gi_cat;
        $data['stylesheet'] = $this->css;
        $data['main_content'] = 'mali_oglasi';

    $this->load->view('template',$data);
    } 
```

如果我想把**$data['loc']**，**$data['cat']**和**$data['stylesheet']**放在**__construct**我将不得不在**$** **this->load->view( '模板'，$数据）；**

有没有办法将这两者结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T10:44:54.310

将私有成员添加到您的控制器并根据需要在构造函数中设置它：

```
private $data;

function __construct() {
    ...
    $this->data = array(...);
    ...
} 
```

然后，您可以在同一控制器类中的所有控制器操作中访问此私有成员。

[您可以使用数组联合运算符 ( `+`)](http://php.net/manual/en/language.operators.array.php)*合并两个[^(*数组*)](http://php.net/manual/en/language.operators.array.php)：*

 *```
$data = $this->data + $data; 
```

另见：[Properties ^(*Docs*)](http://www.php.net/manual/en/language.oop5.properties.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T10:45:43.997

当然，你可以这样做，

```
class ControllerName extends CI_Controller {

    private $_data = array();

    function __construct()
    {
        $this->_data['loc'] = this->gi_loc;
        $this->_data['cat'] = this->gi_cat;
        $this->_data['stylesheet'] = this->css;
    }

    function index()
    {
        // Your data

        // Merge them before the $this->load->view();
        $data = array_merge($this->_data, $data);
    }
} 
```*****

# javascript - 从ajax返回数据会导致奇怪的对象

> ID：12660596
> 
> 赞同：0
> 
> 时间：2012-09-30T10:40:52.123
> 
> 标签：javascript, jquery, ajax, json

我知道这个问题可能已经被问了一千次了，但我似乎找不到答案。我想`result`成为ajax-request返回的数据，它应该是一个json-data数组（的结果`console.log(data)`）。

```
 var result = $.ajax({
    type: 'GET',
    url: dataPath,
    dataType: 'json',
    success: function(data) {
      console.log(data)
      },
    error: function(){
      //alert("damn");  
      },
    data: {},
    aync: false
  });

  console.log(result); 
```

但是，`console.log(result);`会返回一些奇怪的对象，我不知道如何处理。为什么不是`result`= `data`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:58:02.147

错字。

改变这个：

```
aync: false 
```

至：

```
async: false 
```

并且该`ajax`方法仍然返回执行请求的 jqXHR 对象，而不是结果。在调用中使用`data`参数`success`并将其存储在某处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:59:56.737

首先`aync: false`从你的代码中删除。它应该是拼写`async: false`的，但您不需要它来实现您的目标，它实际上所做的是阻止整个浏览器的用户界面，从而导致糟糕的用户体验。请记住，AJAX 中的“A”表示**异步**。

`$.ajax()`调用的结果是一个与您的数据不同的**承诺**，但它仍然可以用于获取您的数据。你只需要以某种方式使用它。

尝试改变：

```
 console.log(result); 
```

至：

```
result.done(function (data) { 
    console.log(data);
}); 
```

或者：

```
result.done(function (data) { 
    console.dir(data);
}); 
```

甚至这可能有效 - 未经测试：

```
result.done(console.dir); 
```

请参阅[**此答案**](https://stackoverflow.com/questions/5316697/jquery-return-data-after-ajax-call-success/5316805#5316805)以获得更好的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:02:42.953

初始化`result`内部`success`函数。

```
 var result;
  $.ajax({
        type: 'GET',
        url: dataPath,
        dataType: 'json',
        success: function(data) {
          result = data;
          console.log(data)
          },
        error: function(){
          //alert("damn");  
          },
        data: {},
        async: false
      });

      console.log(result); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T11:15:44.243

你提到`console.log(result)`的返回一个奇怪的对象，实际上这个奇怪的对象被称为`xhr (XMLHttpRequest)`对象。

由于调用是`syncronous`因为`async: false`所以很容易得到`returned data`like

```
var result = $.ajax({...}); // get the xhr object in to result
console.log(result.responseText); // xhr object has a "responseText" property 
```

因为`result.responseText`只有在请求完成后才可用，并且没有机会在完成之前执行此操作，因为ajax`console.log(result.responseText);`请求在完成请求之前挂在所有内容上。`async:false``request``syncronous`

在您的`success`回调`data`中将是一个对象，因为`dataType: 'json'`但在`success`回调之外，即`console.log(result.responseText);`仅是文本，因此要将其用作对象，您必须使用`$.parseJSON(result.responseText)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T11:33:45.390

有一个小的拼写错误 aync: false 应该读作 async: false 当然假设您要求请求同步运行，即您的代码的其余部分等待此结果。

我认为这里的主要问题是您尝试输出到控制台的结果没有被 ajax 请求引用。

如何引用 ajax 请求返回的数据完全是您的选择，您选择了 data 这个词，这很容易是 result 或 json_Data 或 return_Data 或 ...。

因此，我建议将 ajax 请求的结果发送到控制台：

```
var result = $.ajax({
    type: 'GET',
    url: dataPath,
    dataType: 'json',
    success: function(result) {
      console.log(result)
      },
    error: function(){
      //alert("damn");  
      },
    data: {},
    async: false
  }); 
```

# sql-server - 具有多个节点的递归 CTE 层次结构中每一行的唯一 ID

> ID：12660597
> 
> 赞同：1
> 
> 时间：2012-09-30T10:41:01.373
> 
> 标签：sql-server, recursive-query

我有一个表，其中包含一组形成层次结构的链接。最大的问题是每个链接可能会被多次使用（在不同的位置）。我需要能够区分每个节点的每个“实例”。

例如在下面的数据中，链接“DG”会出现多次：

```
╔════════════╦════════╗
║     SOURCE ║ TARGET ║
╠════════════╬════════╣
║     A      ║ B      ║
║     A      ║ C      ║
║     B      ║ D      ║
║     B      ║ E      ║
║     B      ║ F      ║
║     C      ║ D      ║
║     C      ║ E      ║
║     C      ║ F      ║
║     D      ║ G      ║
║     E      ║ D      ║
║     F      ║ D      ║
╚════════════╩════════╝ 
```

我可以毫无问题地使用递归 CTE 构建层次结构，但我想为结果中的每一行提供一个唯一 ID，并将其链接到父节点的唯一 ID。

我最初的想法是使用到目前为止为每一行分配一个唯一的 ID，`Row_Number() + Max(ID)`并让该行继承它的父 ID，但进一步阅读和反复试验表明这不起作用:-(

有没有人知道如何解决这个问题（或者至少给我一个线索）？

结果应该是这样的：

```
╔═════════════╦═════════════╦═══════════╦═══════════╗
║ SOURCE_DESC ║ TARGET_DESC ║ Source_ID ║ Target_ID ║
╠═════════════╬═════════════╬═══════════╬═══════════╣
║     A       ║ B           ║         0 ║         1 ║
║     A       ║ C           ║         0 ║         2 ║
║     B       ║ D           ║         1 ║         6 ║
║     B       ║ E           ║         1 ║         7 ║
║     B       ║ F           ║         1 ║         8 ║
║     C       ║ D           ║         2 ║         3 ║
║     C       ║ E           ║         2 ║         4 ║
║     C       ║ F           ║         2 ║         5 ║
║     D       ║ G           ║         3 ║        13 ║
║     E       ║ D           ║         4 ║        11 ║
║     F       ║ D           ║         5 ║        10 ║
║     D       ║ G           ║         6 ║        14 ║
║     E       ║ D           ║         7 ║        12 ║
║     F       ║ D           ║         8 ║         9 ║
║     D       ║ G           ║         9 ║        18 ║
║     D       ║ G           ║        10 ║        17 ║
║     D       ║ G           ║        11 ║        16 ║
║     D       ║ G           ║        12 ║        15 ║
╚═════════════╩═════════════╩═══════════╩═══════════╝ 
```

此处“DG”链接多次出现，但在每个实例中都有不同的 ID 和不同的父 ID！

我设法做到了，但我对自己的做法不满意。它似乎不是很有效（对于这个例子并不重要，但对于更大的集合非常重要！）

```
WITH JUNK_DATA 
     AS (SELECT *, 
                ROW_NUMBER() 
                  OVER ( 
                    ORDER BY SOURCE) RN 
         FROM   LINKS), 
     RECUR 
     AS (SELECT T1.SOURCE, 
                T1.TARGET, 
                CAST('ROOT' AS VARCHAR(MAX))      NAME, 
                1                                 AS RAMA, 
                CAST(T1.RN AS VARCHAR(MAX)) + ',' AS FULL_RAMA 
         FROM   JUNK_DATA T1 
                LEFT JOIN JUNK_DATA T2 
                       ON T1.SOURCE = T2.TARGET 
         WHERE  T2.TARGET IS NULL 
         UNION ALL 
         SELECT JUNK_DATA.SOURCE, 
                JUNK_DATA.TARGET, 
                CASE 
                  WHEN RAMA = 1 THEN (SELECT [DESC] 
                                      FROM   NAMES 
                                      WHERE  ID = JUNK_DATA.SOURCE) 
                  ELSE NAME 
                END      NAME, 
                RAMA + 1 AS RAMA, 
                FULL_RAMA 
                + CAST(JUNK_DATA.RN AS VARCHAR(MAX)) + ',' 
         FROM   (SELECT * 
                 FROM   JUNK_DATA)JUNK_DATA 
                INNER JOIN (SELECT * 
                            FROM   RECUR) RECUR 
                        ON JUNK_DATA.SOURCE = RECUR.TARGET), 
     FINAL_DATA 
     AS (SELECT T2.[DESC]          SOURCE_DESC, 
                T3.[DESC]          TARGET_DESC, 
                RECUR.*, 
                ROW_NUMBER() 
                  OVER ( 
                    ORDER BY RAMA) ID 
         FROM   RECUR 
                INNER JOIN NAMES T2 
                        ON RECUR.SOURCE = T2.ID 
                INNER JOIN NAMES T3 
                        ON RECUR.TARGET = T3.ID) 
SELECT T1.SOURCE_DESC, 
       T1.TARGET_DESC, 
       ISNULL(T2.ID, 0) AS SOURCE_ID, 
       T1.ID            TARGET_ID 
FROM   FINAL_DATA T1 
       LEFT JOIN (SELECT ID, 
                         FULL_RAMA 
                  FROM   FINAL_DATA)T2 
              ON LEFT(T1.FULL_RAMA, LEN(T1.FULL_RAMA) - CHARINDEX(',', 
                 REVERSE(T1.FULL_RAMA), 2)) 
                 + ',' = T2.FULL_RAMA 
ORDER  BY SOURCE_ID, 
          TARGET_ID 
```

[在SQL fiddle](http://sqlfiddle.com/#!3/8d8a5/4)上查看。

# java-me - 我无法在 Midlet 中设置背景

> ID：12660599
> 
> 赞同：0
> 
> 时间：2012-09-30T10:42:05.323
> 
> 标签：java-me, midp, lcdui

有人说不能在 Midlet 中设置背景并使用画布。我使用画布模式并搜索添加 TextFiled 我不能这样做，因为画布是低级 UI 和绘图文本字段

可以帮我在没有 Canvas 的情况下在 Midlet 中设置背景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:35:35.530

您不能在 Midlet 中设置背景。这个 Midlet 背后的原因不是 Compoment 本身。Midlet 是一个允许为 J2ME/Java ME 应用程序编写代码的框架。一个 Midlet 它自己包含项目组件，如 Forms、Canvas TextBox 等。

您不能在 Midlet 中设置背景，但您可以为其分配画布或表单并设置其背景。

Canvas 来自低级 UI，而 TextFied 是高级 UI，需要像 Form 这样的组件来保存它。所以你不能在 Canvas 上绘制/放置 TextField。

# php - 无法将 PHP 应用程序推送到 heroku

> ID：12660603
> 
> 赞同：1
> 
> 时间：2012-09-30T10:43:15.840
> 
> 标签：php, git, heroku

我无法将我的 PHP 项目推送到 Heroku。每次我尝试推送时，都会出现此错误：

```
----> Heroku receiving push
 !    Heroku push rejected, no Cedar-supported app detected.

To git@heroku.com:intense-hamlet-7552.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:intense-hamlet-7552.git' 
```

这是我第一次使用 Heroku，所以这就是我所做的（试图遵循[这个](https://devcenter.heroku.com/articles/git)）：

1.  我在 Eclipse 工作区中创建了一个新文件夹。
2.  在这个文件夹中，我运行了`git init`.
3.  我在这个文件夹中创建了一个新的 PHP 项目（在 Eclipse 中）。
4.  我跑`heroku create`。
5.  我使用 TortoiseGit 提交我的文件（我也尝试过使用命令行，没有区别）。
6.  我推送存储库`git push heroku master`
7.  然后我得到上述错误。

我已经尝试过多次使用新文件夹、新存储库，但每次都会发生这种情况。

我究竟做错了什么？

**编辑：**对于建议重复帖子的人：

我看到帖子[Heroku push denied, no Cedar-supported app detected](https://stackoverflow.com/questions/8361475/heroku-push-rejected-no-cedar-supported-app-detected)描述了 Ruby 应用程序的问题，其中 a`Gemfile`拼写错误。我的应用程序是 PHP 应用程序，并且没有`Gemfile`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T12:06:49.467

我想，Heroku 并没有将我的应用程序重新定位为 PHP 应用程序。我创建了一个`index.php`带有 hello world 脚本的脚本，并且砰！一切正常。

# php - 从今天开始对月份数组反词进行排序

> ID：12660606
> 
> 赞同：1
> 
> 时间：2012-09-30T10:43:45.847
> 
> 标签：php

我有以下数组，需要从当前月份向后排序 - 我得到的是 NULL

这是我正在尝试的：

```
$months = array(
'January' => 0,
'February' => 0,
'March' => 0,
'April' => 0,
'May' => 0,
'June' => 0,
'July ' => 0,
'August' => 0,
'September' => 0,
'October' => 0,
'November' => 0,
'December' => 0,
);

$current = date('F');
$start = array_search($current, $months);

$toshow = array();
$total = 0;
for($i = $start; $total < 12; $i--)
{
if($i == 0)
{
    $i = 12;
}

$toshow[] = $months[$i];
$total++;
}

var_dump($toshow); 
```

我得到的结果是：

```
array(12) { [0]=> NULL [1]=> NULL [2]=> NULL [3]=> NULL [4]=> NULL [5]=> NULL [6]=> NULL [7]=> NULL [8]=> NULL [9]=> NULL [10]=> NULL [11]=> NULL } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:57:46.783

我认为这可以满足您的要求：

```
$months = array(
'January' => 0,
'February' => 0,
'March' => 0,
'April' => 0,
'May' => 0,
'June' => 0,
'July ' => 0,
'August' => 0,
'September' => 0,
'October' => 0,
'November' => 0,
'December' => 0,
);

$current = date('F');
$keys = array_keys($months);
$start = array_search($current, $keys);
$toshow = array();

for($i=$start+12; $i>$start; $i--) {
  $key = $i % 12;
  $toshow[$keys[$key]] = $months[$keys[$key]];
}

var_dump( $toshow ); 
```

输出：

```
array(12) { 
  ["September"]=> int(0) 
  ["August"]=> int(0) 
  ["July "]=> int(0) 
  ["June"]=> int(0) 
  ["May"]=> int(0) 
  ["April"]=> int(0) 
  ["March"]=> int(0) 
  ["February"]=> int(0) 
  ["January"]=> int(0) 
  ["December"]=> int(0) 
  ["November"]=> int(0) 
  ["October"]=> int(0) 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:03:20.130

**为什么需要使用静态值的数组，然后将其向后排序。你可以让你的数组本身向后退，如下所示**

没必要拿这个数组

```
$months = array(
'January' => 0,
'February' => 0,
'March' => 0,
'April' => 0,
'May' => 0,
'June' => 0,
'July ' => 0,
'August' => 0,
'September' => 0,
'October' => 0,
'November' => 0,
'December' => 0,
); 
```

您可以直接向后制作 $months 数组。

```
$months = array();
$currentMonth = (int)date('m');

for($x = $currentMonth; $x >=$currentMonth-12; $x--) {
    $months[date('F', mktime(0, 0, 0, $x, 1))] = 0;
}

echo "<pre>";
print_r ($months); 
```

现在您的阵列本身看起来像您预期的那样

```
Array
(
    [September] => 0
    [August] => 0
    [July] => 0
    [June] => 0
    [May] => 0
    [April] => 0
    [March] => 0
    [February] => 0
    [January] => 0
    [December] => 0
    [November] => 0
    [October] => 0
) 
```

见输出：[http ://codepad.org/WuBBYeUh](http://codepad.org/WuBBYeUh)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:49:07.783

使用`krsort()`：此函数按键以相反的顺序对数组进行排序，保持与值的相关性，此函数对于关联数组很有用。

```
krsort($months );

print_r($months ); 
```

[活例](http://codepad.org/VZacZlZl)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T10:49:59.967

krsort($toshow = cal_info(CAL_GREGORIAN));` 会给你一个反向排序的月份数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T10:55:54.273

尝试

```
$current = date('F');
$arr = array_combine(range(1,12), array_keys($months));
$start = array_search($current, $arr);
//$start = date('n');
for ($i=$start;$i<=12;$i++) {
  $arr_sorted[$arr[$i]] = $months[$arr[$i]];
}
for ($i=1;$i<$start;$i++) {
  $arr_sorted[$arr[$i]] = $months[$arr[$i]];
}
print_r($arr_sorted); 
```

# regex - Perl中的字符串替换

> ID：12660607
> 
> 赞同：0
> 
> 时间：2012-09-30T10:43:51.700
> 
> 标签：regex, string, perl, replace

我正在尝试对代码进行去混淆处理。这段代码使用了很多长变量名，在运行代码时这些变量名被替换为有意义的名称。

如何在搜索和替换时保留状态？

例如，使用这样的混淆线：

```
${${"GLOBALS"}["ttxdbvdj"]}=_hash(${$urqboemtmd}.substr(${${"GLOBALS"}["wkcjeuhsnr"]},${${"GLOBALS"}["gjbhisruvsjg"]}-${$rrwbtbxgijs},${${"GLOBALS"}["ibmtmqedn"]})); 
```

*mappings.txt*中有多个映射匹配上面的混淆行，例如：

```
$rrwbtbxgijs = hash_length;
$urqboemtmd = out; 
```

在第一次运行时，它将在上面的混淆行中用**hash_length替换****$rrwbtbxgijs 。**现在，当它在外部 while 循环的下一次迭代中遇到第二个映射时，它将在混淆的行中用**out替换****$urqboemtmd 。**

 ******## 问题是：

当遇到第一个映射时，它会进行替换。但是，当在同一行中遇到不同匹配字符串的下一个映射时，先前的搜索/替换结果不存在。

它应该保留以前的替换。我怎么做？

我编写了一个 Perl 脚本，它会从*mapping.txt*中选择一个映射，并在整个混淆代码中搜索该映射的所有出现，并将其替换为有意义的文本。

这是我写的代码：

```
#! /usr/bin/perl

use warnings;

($mapping, $input) = @ARGV;

open MAPPING, '<', $mapping
    or die "couldn't read from the file, $mapping with error: $!\n";

while (<MAPPING>) {

    chomp;
    $line = $_;
    ($key, $value) = split("=", $line);
    open INPUT, '<', $input;

    while (<INPUT>) {

        chomp;
        if (/$key/) {

            $_=~s/\Q$key/$value/g;
            print $_,"\n";
        }
    }
    close INPUT;
}
close MAPPING; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:05:48.277

要匹配字符串中的文字元字符，您可以使用`quotemeta`或：

```
s/\Q$key\E/$replace/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:00:49.620

告诉 Perl 不要解释 $key 中的字符：

```
s/\Q$key/$value/g 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T12:33:03.423

考虑使用[B::Deobfuscate](http://p3rl.org/B%3a%3aDeobfuscate)并逐渐将变量名称输入到其配置文件中，因为您弄清楚它们的作用。

我对您保存状态的请求有点困惑。你到底在做什么/你打算对输出做什么？这是一次完成所有替换的（未经测试的）示例，如果有帮助吗？

```
my %map;
while ( my $line = <MAPPING> ) {
    chomp $line;
    my ($key, $value) = split("=", $line);
    $map{$key} = $value;
}
close MAPPING;

my $search = qr/(@{[ join '|', map quotemeta, sort { length $b <=> length $a } keys %map ]})/;
while ( my $line = <INPUT> ) {
    $line =~ s/$search/$map{$1}/g;
    print OUTPUT $line;
} 
```******

# php - 在 cakephp 中延长每个用户的会话超时

> ID：12660608
> 
> 赞同：0
> 
> 时间：2012-09-30T10:44:01.297
> 
> 标签：php, cakephp, session-timeout

我想更改每个客户的会话超时。我想在登录窗口中提供“记住我”选项。点击它的用户的会话不应该过期，而对于其他人来说，会话​​超时应该是直到浏览器关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:51:57.733

试试 [http://www.dereuromark.de/2012/02/02/more-persistent-sessions-in-cake2-x/](http://www.dereuromark.de/2012/02/02/more-persistent-sessions-in-cake2-x/)

使用

```
 echo $this->Form->input('auto_login', array('type'=>'checkbox', 'label'=>__('Remember on this computer'))); 
```

# c++ - 如何更改 Microsoft Visual C++ 中的默认语言

> ID：12660618
> 
> 赞同：0
> 
> 时间：2012-09-30T10:45:23.153
> 
> 标签：c++, visual-c++

我刚刚从 Internet 上下载了 Visual C++，该应用程序是法语的。有什么办法可以切换语言？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T10:48:46.833

如果您下载了 Express 版本，不，不是没有下载您想要的任何其他语言的 Express 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:50:19.227

`Tools -> Options -> Environment -> International Settings -> Language`

# c++ - 循环依赖头痛

> ID：12660619
> 
> 赞同：0
> 
> 时间：2012-09-30T10:45:39.217
> 
> 标签：c++, header, linker, circular-dependency

**最初的问题是** 我有三个班级`A`，`B`并且`C`。`A`有一个链接和调用到`B`，它有一个链接和调用到`C`。但是`C`调用了`A`静态方法。我就是无法让这个静态调用起作用。

**但是人们对我截断代码的一些不准确之处嗤之以鼻，所以类的真实名称是** `GameRenderer`,`GameView`和`FieldView`. `GameRenderer`有一个链接和调用到`GameView`，它有一个链接和调用到`FieldView`。但是`FieldView`调用了`GameRenderer`静态方法`createGlTextureFromResource`。我就是无法让这个静态调用起作用。

这是完整和真实的标题 GameRenderer.h

```
// GameRenderer.h
#ifndef GAME_RENDERER
#define GAME_RENDERER

#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>

#include <GLES2/gl2.h>
#include <GLES2/gl2ext.h>

namespace game{
    class GameModel;
    class GameView;

    class GameRenderer {
            jobject*    context;
            jobject*    gameOverHandler;
            static JNIEnv*     env;
            static jobject*    jparent;

            GameModel*  gameModel;
            GameView*   gameView;

            glm::mat4 mProjMatrix;
            glm::mat4 mVMatrix;

        public:
            GameRenderer(jobject* context, jobject* gameOverHandler, JNIEnv* env, jobject* jparent);

            void onSurfaceCreated();
            void onDrawFrame();
            void onSurfaceChanged(int width, int height);
            void setMotionDirection();

            static int* getImagePixels (int imageId, int width, int height);
            static void createGlTextureFromResource (int resourceId, int textureId);
    };
}

#endif 
```

游戏视图.h

```
// GameView.h
#ifndef GAME_VIEW
#define GAME_VIEW

#include <glm/glm.hpp>

namespace game{
    class GameModel;
    class FieldView;

    class GameView {
        GameModel* gameModel;

        FieldView* fieldView;
        public:
        GameView(GameModel* gameModel);
        void draw(glm::mat4 mProjMatrix, glm::mat4 mVMatrix);
    };
}

#endif 
```

FieldView.h

```
// FieldView.h
#ifndef FIELD_VIEW
#define FIELD_VIEW

#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp>

#include <GLES2/gl2.h>
#include <GLES2/gl2ext.h>

#include "GLESUtils.h"

namespace game{
    class GameRenderer;

    class FieldView {
        static const int FLOAT_SIZE_BYTES = 4;
        static const int TRIANGLE_VERTICES_DATA_STRIDE_BYTES = 5 * FLOAT_SIZE_BYTES;
        static const int TRIANGLE_VERTICES_DATA_POS_OFFSET = 0;
        static const int TRIANGLE_VERTICES_DATA_UV_OFFSET = 3;

        glm::mat4 mMMatrix;
        glm::mat4 mMVPMatrix;

        int mProgram;
        int mTextureID;
        int muMVPMatrixHandle;
        int maPositionHandle;
        int maTextureHandle;

        public:
        FieldView();
        void draw(glm::mat4 mProjMatrix, glm::mat4 mVMatrix);
    };
}

#endif 
```

这是 FieldView.cpp 的剪辑版

```
// FieldView.cpp
#include <jni.h>  
#include <string.h>  
#include <android/log.h>  

#include "FieldView.h"
#include "GameRenderer.h"

#define  LOG_TAG    "NDK_FieldView"
#define  LOGI(...)  __android_log_print(ANDROID_LOG_INFO,LOG_TAG,__VA_ARGS__)

namespace game{
    static GLfloat mTriangleVerticesData[] = {...};

    static const char mVertexShader[] = "...\n";

    static const char mFragmentShader[] = "...\n";

    FieldView::FieldView() {
        mProgram            = -1;
        mTextureID          = -1;
        muMVPMatrixHandle   = -1;
        maPositionHandle    = -1;
        maTextureHandle     = -1;

        mProgram = GLESUtils::createProgram(mVertexShader, mFragmentShader);
        GLESUtils::checkGlError("createProgram mProgram");
        if (mProgram == 0) {
            LOGI("program not created exiting");
            return;
        }
        maPositionHandle = glGetAttribLocation(mProgram, "aPosition");
        GLESUtils::checkGlError("glGetAttribLocation aPosition");
        if (maPositionHandle == -1) {
            return;
        }
        maTextureHandle = glGetAttribLocation(mProgram, "aTextureCoord");
        GLESUtils::checkGlError("glGetAttribLocation aTextureCoord");
        if (maTextureHandle == -1) {
            return;
        }

        muMVPMatrixHandle = glGetUniformLocation(mProgram, "uMVPMatrix");
        GLESUtils::checkGlError("glGetUniformLocation uMVPMatrix");
        if (muMVPMatrixHandle == -1) {
            return;
        }

        /*
         * Create our texture. This has to be done each time the
         * surface is created.
         */

        GLuint textures[] = {0};
        glGenTextures(1, &textures[0]);

        mTextureID = textures[0];
        glBindTexture(GL_TEXTURE_2D, mTextureID);

        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
        glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

        // here is the actual problem, I get the following error on this line
        // FieldView.cpp: In constructor 'game::FieldView::FieldView()':
        // FieldView.cpp:89:9: error: incomplete type 'game::GameRenderer' used in nested name specifier

        GameRenderer::createGlTextureFromResource(0x7f040004, mTextureID);
    }

    void FieldView::draw(glm::mat4 mProjMatrix, glm::mat4 mVMatrix) {
        //... doesn't matter
    }
} 
```

如果我理解正确，我必须使用前向声明并且至少在一个地方不要使用包含标题来阻止循环，但我不能这样做，因为我在对象之间进行了调用，并且没有标题编译器拒绝这样做调用方法。**编译器错误**在 中，请参阅调用`FieldView.cpp`附近代码中的注释。`GameRenderer::createGlTextureFromResource(0x7f040004, mTextureID);`

**在所有这些编辑**问题实际上保持不变之后：我在这里做错了什么？我想我在某处使用了非常糟糕的设计实践。

请原谅我最初的不准确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T10:51:54.467

我认为这应该有效：

*   停止包含来自其他标题的标题。您不需要它们，这从它仅包含在最后一行这一事实中可以清楚地看出。作为一般规则，在标题中包含尽可能少的内容，并尽可能避免使用简单的声明（例如`class B;`）。

*   包括`A.h`和`C.h`from `C.cpp`。这两个类都直接从 中使用`C.cpp`，因此您需要包含两个标题是有意义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T10:50:42.147

至少在您发布的代码中，没有理由包含`B.h`在底部`A.h`等等。您应该将这些包含在实现文件中。

```
// A.cpp
#include "A.h"
#include "B.h"
namespace game
{
 ....
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T10:52:08.700

据我所知，#include "Ah" 在 Ch 头文件中没有给你买任何东西。您的 C.cpp 标头应该包括 Ah 和 Ch 同样，Bh 也包括 Ch 在尾部，就像以前一样，什么也不买。

```
A.h - include no other headers, forward decl class C;
B.h - include no other headers, forward decl class C;
C.h - include no other headers, forward decl class A

A.cpp - include A.h, C.h
B.cpp - include A.h, B.h, C.h
C.cpp - include A.h, C.h 
```

看来您的口头禅是只包含一个 .cpp 文件的自定义标头。多类/多头层次结构几乎不会出现这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T10:53:40.543

你的代码为我编译。尽管通过将 C 中的构造函数更改为默认构造函数（因此 C.cpp 中的代码具有声明）。

# android - 在 ScrollView Android 中处理触摸事件

> ID：12660624
> 
> 赞同：11
> 
> 时间：2012-09-30T10:46:15.970
> 
> 标签：android, controls, scrollview

我想为 Android 2.2 实现拖放功能。我为每个控件覆盖 onTouchListener。但我所有的控件都在 ScrollView 中。当我的所有控件在 ScrollView 中可见时，dra-n-drop 就可以正常工作。但是，当屏幕上并非所有控件都可见并且出现滚动时，我无法使用 dra-n-drop。所有事件都到 ScrollView 并且只有 scrollview 继续它们。Contols 没有获得触摸事件，因此我无法拖动控件。有谁知道如何解决这个问题？我想，该滚动视图应该进行自触摸事件，但随后它应该将此触摸事件传递给子控件。我该怎么做？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-30T15:47:51.553

用于`mScrollView.requestDisallowInterceptTouchEvent(true);`避免 ScrollView 处理 touchEvents。同样正如 Ridcully 指出的那样，在`onInterceptTouchEvent()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:00:56.560

看看[onInterceptTouchEvent()](http://developer.android.com/reference/android/widget/ScrollView.html#onInterceptTouchEvent%28android.view.MotionEvent%29)方法。您必须继承 ScrollView 并覆盖和调整此方法。

# python - Python Splinter (SeleniumHQ) 如何截取多个网页的截图？[连接被拒绝]

> ID：12660625
> 
> 赞同：3
> 
> 时间：2012-09-30T10:46:40.320
> 
> 标签：python, urllib2, selenium-webdriver

我想截取许多网页的截图，我写了这个：

```
from splinter.browser import Browser
import urllib2
from urllib2 import URLError

urls = ['http://ubuntu.com/', 'http://xubuntu.org/']

try :
    browser = Browser('firefox')
    for i in range(0, len(urls)) :
        browser.visit(urls[i])
        if browser.status_code.is_success() :
            browser.driver.save_screenshot('your_screenshot' + str(i) + '.png')
        browser.quit()
except SystemError :
    print('install firefox!')
except urllib2.URLError, e:
    print(e)
    print('theres no such website')
except Exception, e :
    print(e)
    browser.quit() 
```

我得到了这个错误：

```
<urlopen error [Errno 111] Connection refused> 
```

如何解决？：）

**编辑**

当我在 txt 文件中有链接时，下面的代码不起作用：

```
from splinter import Browser
import socket

urls = []
numbers = []

with open("urls.txt", 'r') as filename :
    for line in filename :
        line = line.strip()
        words = line.split("\t")
        numbers.append(str(words[0]))
        urls.append(str(words[1].rstrip()))

print(urls)

browser = None    
try:
    browser = Browser('firefox')
    for i, url in enumerate(urls, start=1):
        try:
            browser.visit(url)
            if browser.status_code.is_success():
                browser.driver.save_screenshot('your_screenshot_%03d.png' % i)
        except socket.gaierror, e:
            print "URL not found: %s" % url
finally:
    if browser is not None:
        browser.quit() 
```

我的 txt 文件如下所示：

```
1   http//ubuntu.com/
2   http//xubuntu.org/
3   http//kubuntu.org/ 
```

当我运行它时，我得到了错误：

```
$ python test.py 
['http//ubuntu.com/', 'http//xubuntu.org/', 'http//kubuntu.org/']
Traceback (most recent call last):
  File "test.py", line 21, in <module>
    browser.visit(url)
  File "/usr/local/lib/python2.7/dist-packages/splinter/driver/webdriver/__init__.py", line 79, in visit
    self.driver.get(url)
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 168, in get
    self.execute(Command.GET, {'url': url})
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/webdriver.py", line 156, in execute
    self.error_handler.check_response(response)
  File "/usr/local/lib/python2.7/dist-packages/selenium/webdriver/remote/errorhandler.py", line 147, in check_response
    raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.WebDriverException: Message: u'Component returned failure code: 0x804b000a (NS_ERROR_MALFORMED_URI) [nsIIOService.newURI]' 
```

这次怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T02:41:02.153

您的问题是您`browser.quit()`在循环中通过 URL 进行操作，因此第二个 URL 不再打开。

这是您的代码的更新版本：

```
from splinter import Browser
import socket

urls = ['http://ubuntu.com/', 'http://xubuntu.org/']

browser = None    
try:
    browser = Browser('firefox')
    for i, url in enumerate(urls, start=1):
        try:
            browser.visit(url)
            if browser.status_code.is_success():
                browser.driver.save_screenshot('your_screenshot_%03d.png' % i)
        except socket.gaierror, e:
            print "URL not found: %s" % url
finally:
    if browser is not None:
        browser.quit() 
```

主要的变化是将`browser.quit()`代码移动到您的主要异常处理程序中`finally`，这样无论出现什么问题都会发生。还要注意使用`enumerate`来提供迭代器值和它的索引；这是 Python 中推荐的方法，而不是维护自己的索引指针。

我不确定它是否与您的代码相关，但我发现`splinter`引发了`socket.gaierror`异常`urllib2.URLError`，所以我展示了如何捕获它们。我将这个异常处理程序移到循环内；即使一个或多个 URL 不存在，这将继续抓取剩余的屏幕截图。

# android - 不允许加载本地资源：file:///android_res/raw/styles.css at :0

> ID：12660633
> 
> 赞同：1
> 
> 时间：2012-09-30T10:47:49.007
> 
> 标签：android, css, permissions, android-resources

我正在尝试通过 gmail 在 HTC、android ver 2.2 设备上安装我的应用程序。该应用程序已签名。安装完成后，我收到一条关于“等待调试器”的消息，应用程序失败。在 LogCat 我收到以下消息：

```
09-30 11:29:33.512 I/ActivityManager(161): Starting activity: Intent { act=android.intent.action.MAIN flg=0x10000000 cmp=com.zezebra/.ui.SplashScreenActivity }
09-30 11:29:33.542 I/ActivityManager(161): Start proc com.zezebra for activity com.zezebra/.ui.SplashScreenActivity: pid=2695 uid=10072 gids={3003, 1015}
09-30 11:29:33.602 D/Sensors (161): close_akm, fd=141
09-30 11:29:33.612 D/dalvikvm(129): GC_EXPLICIT freed 296 objects / 11264 bytes in 76ms
09-30 11:29:33.642 W/ActivityThread(2695): Application com.zezebra is waiting for the debugger on port 8100...
09-30 11:29:33.652 I/System.out(2695): Sending WAIT chunk
09-30 11:29:33.722 D/dalvikvm(129): GC_EXPLICIT freed 52 objects / 2288 bytes in 114ms
09-30 11:29:33.792 E/Web Console(1056): Not allowed to load local resource: file:///android_res/raw/styles.css at :0
09-30 11:29:33.832 D/dalvikvm(129): GC_EXPLICIT freed 2 objects / 64 bytes in 112ms
09-30 11:29:34.062 D/AK8973  (136): Compass CLOSE 
09-30 11:29:35.732 I/Process (161): Sending signal. PID: 2695 SIG: 9
09-30 11:29:35.732 W/ActivityManager(161):   Force finishing activity com.zezebra/.ui.SplashScreenActivity
09-30 11:29:35.732 I/ActivityManager(161): Killing com.zezebra (pid=2695): user's request 
```

如何解决？

清单是：

```
<uses-sdk android:minSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.BATTERY_STATS" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<application
    android:name=".util.ApplicationContext"
    android:icon="@drawable/icon_app"
    android:label="@string/app_name" android:debuggable="false">
    <activity
        android:name=".ui.MainTabsActivity"
        android:clearTaskOnLaunch="true"
        android:label="@string/app_name"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.zezebra.START_DOWNLOAD" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>
        <intent-filter>
            <data
                android:host="www.zezebra.com"
                android:pathPrefix="/mobile/"
                android:scheme="http" />

            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <action android:name="android.intent.action.SEND_MULTIPLE" />

            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="image/*" />
            <data android:mimeType="audio/*"/>
            <data android:mimeType="video/*"/>
            <!-- data android:mimeType="text/*"/ -->
            <data android:mimeType="application/*"/>
            <data android:mimeType="model/*"/>
            <data android:mimeType="drawing/*"/>
    </intent-filter> 
    </activity>
    <activity
        android:name=".ui.ProfileSetupActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".ui.FileBrowserActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".ui.ChooseContactsActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait"
        android:windowSoftInputMode="stateAlwaysVisible" >
    </activity>

    <service android:name=".transfer.TransferService" >
    </service>

    <activity
        android:name=".ui.SettingsActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
    </activity>

    <receiver android:name=".transfer.BootBroadcastReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

    <activity
        android:name=".ui.HistoryActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait" >
    </activity>
    <activity
        android:name=".ui.SplashScreenActivity"
        android:launchMode="singleTop"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Translucent.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:04:11.313

这是必需的 javascript.......

```
<script src="http://code.jquery.com/jquery-latest.js" type="text/javasript"></script> 
```

# java - 当 2 个对象共享一个属性时触发的 Drools 规则

> ID：12660635
> 
> 赞同：0
> 
> 时间：2012-09-30T10:48:16.290
> 
> 标签：java, drools, rule

所以我刚刚开始修补 Drools 并且很享受它，艰难的文档（至少我找到的部分）有点深奥。

我正在尝试创建一个规则，当两个对象共享一个属性但似乎无法获得正确的条件时将触发该规则。如果我正确阅读了文档，这应该可以：（是的，我正在使用 Magic:The Gathering 规则作为玩耍的基础，因为我很了解它们）

```
规则“704.5j。如果战场上有两个或更多具有相同鹏洛客类别的鹏洛客，则所有这些都被放入其拥有者的坟墓场。这称为‘鹏洛客唯一性规则’。”
    什么时候
        $c1 : 卡片 (CurrentZone == ZoneType.Battlefield , Types.contains("Planeswalker") , $subtype : Types.get(1) , $c1ID : ID );
        $c2 : Card (CurrentZone == ZoneType.Battlefield , Types.contains("Planeswalker") , Types.contains($subtype) , ID != $c1ID);
    然后
        System.out.println("密码唯一性：" + $c1.getName() + " | " + $c2.getName());
        $c1.setCurrentZone(ZoneType.Graveyard);
        $c2.setCurrentZone(ZoneType.Graveyard);
结尾

```

我必须在Java方面这样做吗？

编辑：此外，非常欢迎 Drools 的教程/指南建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:54:02.690

如果你还没有得到这个工作，也许将一个部分移动到 Then 部分中的一个 IF 以避免在 when 中声明内容然后在同一部分中调用它，

```
rule "704.5j. If two or more planeswalkers that share a planeswalker type are on the battlefield, all are put into their owners' graveyards. This is called the 'planeswalker uniqueness rule'."
when
    $c1 : Card (CurrentZone == ZoneType.Battlefield , Types.contains("Planeswalker") ,($subtype : Types.get(1)));
    $c2 : Card (CurrentZone == ZoneType.Battlefield , Types.contains("Planeswalker") ,($subtype2 : Types.get(1)) );
then
    if (($subtype == $subtype2) && ($c1.getID() == $c2.getID()))
    {
       System.out.println("PW Uniqueness: " + $c1.getName() + " | " + $c2.getName());
       $c1.setCurrentZone(ZoneType.Graveyard);
       $c2.setCurrentZone(ZoneType.Graveyard);
    }
end 
```

这有点啰嗦。但我通常避免在 When 中声明和检查相同的变量，我声明了我需要的所有内容（大多数时候使用数组和 eval），然后检查 Then 中的 IF 语句。

同样正如@Marko 所说，获取第一个属性，检查它的工作情况，一次只添加一个检查。有时我会使用愚蠢数量的 IF 等建立大规则，一旦它起作用。我开始缩小尺寸。减少一个工作的东西，比修理一个小破碎的东西更容易:)

# .net - Oracle命令超时

> ID：12660636
> 
> 赞同：1
> 
> 时间：2012-09-30T10:48:38.877
> 
> 标签：.net, oracle, odp.net, oraclecommand

[OracleCommand.CommandTimeout 的](http://docs.oracle.com/cd/B19306_01/win.102/b14307/OracleCommandClass.htm#DAFBGECA)ODP.NET文档说

> 默认值为 0 秒，表示没有时间限制。
> 
> 当指定的超时值在命令执行完成之前到期时，命令会尝试取消。如果取消成功，则抛出异常并显示 ORA-01013 消息：用户请求取消当前操作。如果命令及时执行且没有任何错误，则不会抛出异常。
> 
> 在多个 OracleCommand 对象使用同一连接的情况下，其中一个 OracleCommand 对象的超时到期可能会终止单个连接上的任何执行。要使 OracleCommand 的超时到期仅取消其自己的命令执行，只需在 OracleCommand 将 CommandTimeout 属性设置为大于 0 的值时为每个连接使用一个 OracleCommand。

但是这样的代码有效：

```
static void Main(string[] args)
{
    OracleConnection conn = null;
    try
    {
        string connString =
            "Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=myOracleHost)(PORT=1521)))(CONNECT_DATA=(SERVICE_NAME=myServiceName)));User Id=system;Password=admin;Pooling = False;";
        string cmdString1 = "UPDATE employee SET empname = 'temp1' where id = 1";
        string cmdString2 = "Update employee set empname = 'temp2' where id = 2";
        conn = new OracleConnection(connString);
        var cmd1 = new OracleCommand(cmdString1, conn);
        cmd1.CommandTimeout = 30;
        var cmd2 = new OracleCommand(cmdString2, conn);
        cmd2.CommandTimeout = 30;
        conn.Open();
        try
        {
            //Locked the row with ID 1 with an uncommitted update operation outside this code
            cmd1.ExecuteNonQuery();
        }
        catch (Exception exception)
        {
            //Exception ORA-01013 Thrown as expected
        }
        try
        {
            //As per the documentation, this should not also work since this command object also uses the same connection as above and it timed out in the query above
            cmd2.ExecuteNonQuery();
            //But this still works fine. 
        }
        catch (Exception)
        {
            //no exception
        }
    }
    finally
    {
        conn.Close();
    }
} 
```

我`OracleConnection`对两个命令对象使用相同的对象 -`cmd1`和`cmd2`, 并且`cmd1`已经超时（如预期的那样）。但是，根据文档，`cmd2`也不应该运行。但它仍然毫无例外地运行并正确更新另一行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T15:12:32.910

您没有在连接上运行多个命令，您有两个命令依次运行，一个接一个。当第一个命令超时时，连接上没有其他命令挂起。在第一个命令成功或引发异常之前，您的代码不会提交第二个命令以供执行。

您引用的文档的最后一段应为：*在多个 OracleCommand 对象**同时**使用同一连接的情况下，...*

```
static void Main(string[] args)
{
    using (var conn = new OracleConnection("Pooling=False;...")) // why?
    using (var cmd1 = conn.CreateCommand())
    using (var cmd2 = conn.CreateCommand())
    {
        cmd1.CommandText = "UPDATE employee SET empname = 'temp1' WHERE id = 1";
        cmd2.CommandText = "UPDATE employee SET empname = 'temp2' WHERE id = 2";
        cmd1.CommandTimeout = 30;
        cmd2.CommandTimeout = 30;

        conn.Open();

        // there are no commands on conn yet

        try { cmd1.ExecuteNonQuery(); } // cmd1 is the only command on conn
        catch (OracleException) { } // if timeout, no other command affected

        // cmd1 is no longer on conn

        try { cmd2.ExecuteNonQuery(); } // cmd2 is the only command on conn
        catch (OracleException) { } // if timeout, no other command affected

        // cmd2 is no longer on conn
    }
} 
```

# javascript - JQuery 自动提交下拉菜单

> ID：12660638
> 
> 赞同：0
> 
> 时间：2012-09-30T10:48:57.813
> 
> 标签：javascript, jquery

> **可能重复：**
> [JQuery/Javascript 如何使用 Get 解析 HTML](https://stackoverflow.com/questions/12655229/jquery-javascript-how-to-parse-html-using-a-get)

我有以下正在运行的代码：

```
$.getJSON('json/shares.json', function(data) {
var items = [];

$.each(data.Shares, function(key, val) {
items.push('<option id="' + val.shareName+ '">' + val.shareName+ '</option>');
});

  $('<select/>', {
    'id': 'shares_select',
    html: items.join('')
  }).appendTo('#shares');
});

$.get('lon_shares.html', function(data){     
$(data).appendTo('#shares');  
}); 
```

这将使用 JSON 文件创建一个下拉列表。我需要它在进行选择时自动提交，然后获取相关的 html 文件，所以如果他们从下拉列表中选择“lon”，则文件为“lon_shares.html”，如果他们选择“par”，则为“par_shares.html”并且很快。

我是 JQuery 和 Javascript 的新手，所以请举例说明它的外观，包括我的代码，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:02:04.797

```
//Suppose this is the html
<select id="share-list">
</select>

<div id="shares">
</div>

//this should be in script tag
$.getJSON('json/shares.json', function(data) {
    //This clears previous items in the dropdown
    $("select#share-list").html('')

    $.each(data.Shares, function(key, val) {
        $("select#share-list").append('<option value="' + val.shareName+ '">' + val.shareName+ '</option>');
    });

});

//Binding a change event to the dropdown
$("select#share-list").change(function(e) {
    var el = $(e.currentTarget);
    var share_name = el.attr('value');
    var page = share_name+'.html';

    $.get(page, function(data){     
        $(data).appendTo('#shares');  
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T10:55:34.107

您可以在选择框更改时触发表单提交。

```
 $.getJSON('json/shares.json', function(data) {
        var items = [];
        $.each(data.Shares, function(key, val) {
               items.push('<option id="' + val.shareName+ '">' + val.shareName+ '</option>');
          });
        $('<select/>', {
          'id': 'shares_select',
          html: items.join('')
         }).appendTo('#shares')
         .change(function(){    
              $('form').trigger('submit');         
               $.get( this.value +'_shares.html', function(data){     
                     $(data).appendTo('#shares');  
               });
         });
}); 
```

# c# - 为所有文本框设置只读 C# ASP.NET

> ID：12660642
> 
> 赞同：1
> 
> 时间：2012-09-30T10:49:57.870
> 
> 标签：c#, asp.net

谁能建议一种将所有文本框设置为只读的方法。我尝试使用 aa 递归函数，但它会说**ReadOnly**`System.Web.UI.Control`没有这样的定义

 **```
 private void SetReadOnly<T>(Control parent, bool isReadOnly)
{
    foreach (Control ctrl in parent.Controls)
    {
        if (ctrl is T)
            ctrl.ReadOnly = isReadOnly;   // this line here wont work .
        SetReadOnly<T>(ctrl, isReadOnly);
    }
} 
```

请任何替代品！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:29:04.420

您的代码的问题是它`T`可以是*任何*类型，但并非所有类型都具有该属性`ReadOnly`。因此编译器会窒息。

您不需要使用泛型来执行此操作：

```
private void SetReadOnly(Control parent, bool readOnly)
{
  // Get all TextBoxes and set the value of the ReadOnly property.
  foreach (var tb in parent.Controls.OfType<TextBox>())
    tb.ReadOnly = readOnly;

  // Recurse through all Controls
  foreach(Control c in parent.Controls)
    SetReadOnly(c, readOnly);
} 
```

但是，如果您想使用泛型，可以这样做：

```
private void SetReadOnly<T>(Control parent, bool readOnly) where T : TextBox
{
  // Get all TextBoxes and set the value of the ReadOnly property.
  foreach (var tb in parent.Controls.OfType<T>())
    tb.ReadOnly = readOnly;

  // Recurse through all Controls
  foreach(Control c in parent.Controls)
    SetReadOnly<T>(c, readOnly);
} 
```

这将限制泛型类型`TextBox`或*任何从它派生的类*。这确保了该`ReadOnly`属性将始终存在并且编译器知道这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T10:57:41.973

您可以使用 jQuery 在客户端进行设置：

```
 $(document).ready(function() {
   $('input[type=text]').attr('readonly', true);
 }); 
```**

# android - 如何使用 LayerDrawable 解决 OutOfMemoryError

> ID：12660647
> 
> 赞同：5
> 
> 时间：2012-09-30T10:50:18.930
> 
> 标签：android, bitmap, drawable, out-of-memory

**错误：**

```
java.lang.OutOfMemoryError
at android.graphics.Bitmap.nativeCreate(Native Method)
at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:775)
at android.content.res.Resources.loadDrawable(Resources.java:1968)
at android.content.res.Resources.getDrawable(Resources.java:677)
at android.widget.ImageView.resolveUri(ImageView.java:542)
at android.widget.ImageView.setImageResource(ImageView.java:315)
at app.Main.GridActivity.initaliseLevel(GridActivity.java:245)
at app.Main.GridActivity.load_player_settings(GridActivity.java:180)
at app.Main.GridActivity.onResume(GridActivity.java:79)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1158)
at android.app.Activity.performResume(Activity.java:4607)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2448)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2486)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2000)
at android.app.ActivityThread.access$600(ActivityThread.java:128)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4517)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
at dalvik.system.NativeStart.main(Native Method) 
```

图像由以下人员设置：

```
ImageButton b0 = (ImageButton) findViewById(R.id.ImageButton00);
Resources r = getResources();
Drawable[] layers = new Drawable[2];
layers[0] = r.getDrawable(R.drawable.image);
layers[1] = r.getDrawable(R.drawable.imagetwo);
LayerDrawable layerDrawable = new LayerDrawable(layers);
b0.setImageDrawable(layerDrawable); 
```

通过阅读其他答案，我了解到图像在使用后需要回收。这是最好的选择吗？如果是这样，如何将 LayerDrawable 转换为位图，以便可以回收？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:12:39.020

在您的清单 > 应用程序属性部分有一个“大堆”设置，在应用程序节点中选择您的活动，然后在堆设置中选择“真”，这对我有帮助，直到我解决了泄漏。

而且我的活动中有这个：

```
private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
        ((ViewGroup) view).removeAllViews();
    }
}

    @Override
protected void onDestroy() {
    super.onDestroy();

    unbindDrawables(findViewById(R.id.nameslayout));
    System.gc();
} 
```

有帮助的跳

# android - Viewpageindicator 错误，TitlePageIndicator 为 emty

> ID：12660649
> 
> 赞同：0
> 
> 时间：2012-09-30T10:50:33.530
> 
> 标签：android, android-fragments, pageviews

嗨，我正在使用 viewpageindicator 并设置了一个 viewpager 和像魅力一样工作的片段！问题是我似乎没有让 TitlePageIndicator 工作。它只是空的，并没有显示任何内容。

```
<android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/indicator"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView2" >

    </android.support.v4.view.ViewPager>

   <com.viewpagerindicator.TitlePageIndicator
        android:id="@+id/indicator"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:padding="10dip"
        android:visibility="visible"
        app:linePosition="top" 
        android:theme="@style/CustomUnderlinePageIndicator"/> 
```

怀疑样式有问题。我使用 viewpageindicator 示例中的样式文件。

当我执行此代码时，我收到以下 logcat 错误：

```
mPager = (ViewPager)findViewById(R.id.pager);

    mPager.setAdapter(mAdapter);

    mIndicator = (TabPageIndicator)findViewById(R.id.indicator);
    mIndicator.setViewPager(mPager); 
```

错误：java.lang.ClassCastException：com.viewpagerindicator.TitlePageIndicator 无法转换为 com.viewpagerindicator.TabPageIndicator

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:59:33.847

使用此代码

mPager = (ViewPager) findViewById(R.id.view_pager); mPager.setAdapter(mAdapter);

```
 mIndicator = (TitlePageIndicator) findViewById(R.id.title_indicator);
    mIndicator.setViewPager(mPager); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T20:51:35.550

在您的 XML 更改**TabPageIndicator**的**TitlePageIndicator**或在您的文件中更改 **mIndicator = (TabPageIndicator)findViewById(R.id.indicator);** 对于 **mIndicator = (TitlePageIndicator)findViewById(R.id.indicator);** 为什么不一样

# spring - Struts2 和 Spring 3 集成+AOP 无法创建 Action 代理

> ID：12660667
> 
> 赞同：0
> 
> 时间：2012-09-30T10:53:34.893
> 
> 标签：spring, spring-aop, struts2

我已经将 Struts 2 与 Spring 3 集成在一起，运行良好。我已经使用我的自定义 ObjectFactory 从 Spring 上下文中获取 Action 实例。现在我已经实现了 AOP，例如，

```
@Pointcut("target(com.motherframework.frontendplugin.struts2.action.BaseAction)") 
```

BaseAction 是抽象类。我还为服务层定义了一些其他切入点。但是在服务器启动时，我遇到了一个错误，例如，

```
DEBUG JdkDynamicAopProxy:113 - Creating JDK dynamic proxy: target source is    SingletonTargetSource for target object [com.motherframework.application.school.action.security.CustomAction@c11557]
DEBUG DefaultListableBeanFactory:452 - Finished creating instance of bean 'customAction'
Sep 30, 2012 4:20:11 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter struts2
Unable to load configuration. - action - file:<file-path>/EPMS/WEB-INF/classes/struts-security.xml:6:80

...
Caused by: Action class [customAction] does not have a public no-arg constructor 
```

下面是我的 strts.xml

```
<action name="restrictUser" class="customAction" method="restrictUser" /> 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T09:11:15.397

使用 JDK Proxy 实现 AOP 时，代理类必须没有 args 构造函数。将以下代码添加到 CustomAction

```
public CustomAction(){} 
```

# .htaccess - .htaccess 帮助缩短网址

> ID：12660668
> 
> 赞同：0
> 
> 时间：2012-09-30T10:53:36.687
> 
> 标签：.htaccess, url-shortener

我一直在努力使用 codeigniter 设置一个 url 缩短器，我的一切工作都很好，现在它可以使用如下所示的缩短 url。

[http://example.com/shorten/i/znAS](http://example.com/shorten/i/znAS)

好的，我要做的就是用我的 .htaccess 访问将它缩短到 i 我是一个完整的新手，使用 .htaccess 并且不知道如何做到这一点，一直在关注这个例子。[http://briancray.com/posts/free-php-url-shortener-script/](http://briancray.com/posts/free-php-url-shortener-script/)

哪个使用

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^shorten/(.*)$ shorten.php?longurl=$1 [L]
RewriteRule ^([0-9a-zA-Z]{1,6})$ redirect.php?url=$1 [L]
</IfModule> 
```

以上与我的代码无关，因为它基于代码点火器。好的，所以缩短是我的控制器，我有一个名为 i 的函数，

我尝试了各种组合，但对我没有任何效果，但下面是我的 .htaccess。

```
Options         +FollowSymLinks
Options         -Indexes 
DirectoryIndex  index.php
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^shorten/(.*)$ shorten/i/=$1 [L]
#RewriteRule ^(.*)$ index.php/$1 [L]
RewriteRule ^(.*)$ index.php?/$1 [L]  

<Files "index.php">
AcceptPathInfo On
</Files> 
```

目前有什么正在破坏该网站，只是在 mo 上查看和谷歌，但我想我也会在这里添加一个帖子，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:38:08.670

使用 CI（或与此相关的任何框架）`.htaccess`，除非您**确实**需要，否则最好不要触摸文件。查看有关使用目录中`routes.php`文件的文档`application/config`。

**在数组中尝试此路由设置：**

```
'shorten/(.+)' => 'shorten/i/$1' 
```

如果您对此有任何问题，请告诉我。

# java - Java - 在不同类型的对象上实现等于

> ID：12660671
> 
> 赞同：1
> 
> 时间：2012-09-30T10:53:55.490
> 
> 标签：java, comparison, equals

假设我有一个名为 Customer 的实体和一个名为 CustomerMapper 的帮助器类，它从表单中获取值。然后我将这个 CustomerMapper 发送到服务层，在那里我从 getter 中提取值并将新客户添加到数据库中。

但是现在我需要遍历 a`List<Customer>`并检查 customerID 是否包含在另一个`ArrayList<CustomerMapper>`. 我读到 .contains() 方法在元素上调用 .equals() 。所以我想知道在 Customer 上实现 equals() 是否正确，我将发送一个 CustomeMapper 类型的对象，我会将 customer.getId() 与 customerMapper.customerId() 进行比较。

如果答案是否定的，请详细说明为什么会这样。

编辑：

这就是我想出的。我已经遍历了两个 arralists 并创建了`Map<Long, Customer>`and `Map<Long, CustomerMapper>`. 基本上我需要删除所有 ID 不包含在`Map<Long, CustomerMapper`> 中的客户。现在我迭代`Map<Long, Customer>`并调用`Map<Long, CustomerMapp>.contaisKey(currentElement).`这是一个很好的解决方案，因为这样我就有了三个 for 循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T10:57:50.667

通过实现一个方法来做到这一点是没有意义的`equals()`，因为这两个对象不相等。

只需提取`id`并检查是否`CustomerMapper`有相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T10:57:49.573

不，您应该只实现`equals`返回`true`相等的对象。研究 Javadoc `equals`，特别是它强加的关系必须具备哪些属性，例如对称性、传递性和反射性。我认为您的预期实施至少会在前两个上失败，也许也是最后一个。您只需要编写一个显式循环来测试您的标准的所有成员。

### 关于您当前的解决方案：

使用地图是不是有点矫枉过正？我建议简单地将`id`s 从`CustomerMapper`s 收集到 a`HashSet`中，并在 s 上的过滤循环中使用该集合`Customer`。顺便说一句，您使用的想法`equals` **不会降低时间复杂度**；循环只会隐藏在`contains`方法调用后面，导致总复杂度为 O(n ^(2 )。)由于 O(1) 哈希查找，使用 Set/Map 的解决方案实际上**不太复杂**：整体复杂度仅为 O(n)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T10:58:58.560

我不会这样做的。想想集合的任何其他用途，例如`java.util.Set`. 您可以运行以下代码：

```
Set<Object> customerLikeObjects = new HashSet<Object>();
customer.add(new CustomerMapper(13));

if (customer.contains(new Customer(13))) {
    // Run some code
} 
```

该条件应检查 ID 为 13 的客户是否已在集合中，然后运行一些代码。但实际上，Set 并不包含客户，而是一些“相似”的对象。事实上，您甚至可能不会将这两种对象类型混合在一个集合中，对吗？

虽然这个“聪明”的解决方案似乎可以解决您的问题，但最终会非常令人困惑。事实上，任何“聪明”但不知何故感觉不对的东西总是一个非常糟糕的主意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T10:59:31.237

由于“等于”方法签名看起来像`public boolean equals(Object that)`您可以实现任何类型的对象之间的比较。可能你必须添加类似的东西

```
if (that instanceof CustomerMapper){
//do your comparison here
} 
```

在您的方法实现中。

`instanceof`不过，这是一个相当缓慢的过程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T11:09:20.190

以这种方式覆盖 equals 是“错误”的原因是它会破坏[equals 的一般合同，](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)并可能导致奇怪的、微妙的（或奇怪的、明显的）错误

如果您查看[ArrayList](http://www.docjar.com/html/api/java/util/ArrayList.java.html) contains() 的源代码，则会调用 indexOf() 来迭代列表。因此，您自己编写比较方法不会对性能造成影响（并且可以说它更具可读性）。

假设 Customer 和 CustomerMapper 都有一个`getId()`方法

```
public Boolean containsCustomer(List<CustomerMapper> customerMappers, Customer customer) {
  if (customer == null  || customerMappers == null || customerMappers.size() == 0) {
    return false;
  } 
  for (int i = 0; i < customerMappers.size(); i++) {
    if (customer.getId().equals(customerMappers[i].getId())) {
     return true;
    }
  }
  return false;
} 
```

# c# - 连接到 Com5：未处理 System.NullReferenceException

> ID：12660672
> 
> 赞同：1
> 
> 时间：2012-09-30T10:54:05.090
> 
> 标签：c#, python, exception, serial-port, device

我正在尝试使用以下 c# 代码以每秒 250000 位的波特率访问我的 COM5 端口，但在下面的行中收到异常消息`selectedbaudrate = Convert.ToInt32 (cmbBaudRate.SelectedItem.ToString());`。使用[pronterface.py](https://github.com/kliment/Printrun)程序，我可以以这种速度访问我的设备。为什么我`0`在`selectedbaudrate`写的时候会得到变量`250000`？

```
private void buttonOpenPort_Click(object sender, EventArgs e)                                   
{
    string selectedportname;                                                                    
    int selectedbaudrate;
    selectedportname = combportnumber.SelectedItem.ToString();                                  
    selectedbaudrate = Convert.ToInt32 (cmbBaudRate.SelectedItem.ToString());                  
    port = new SerialPort(selectedportname, selectedbaudrate, Parity.None, 8, StopBits.One);    
    port.DtrEnable = true;
    port.Open();                                                                               
    port.DataReceived += serialPort1_DataReceived;    
} 
```

例外：

```
System.NullReferenceException was unhandled
      Message=Object reference not set to an instance of an object.
      Source=PC Host
      StackTrace:
           at WindowsFormsApplication1.Form1.buttonOpenPort_Click(Object sender, EventArgs e) in D:\Catia V5 Projects\HF08 Hexapod\Version 05\Host PC Software\PC Host 13\PC Host\Form1.cs:line 106
           at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
           at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
           at System.Windows.Forms.Control.WndProc(Message& m)
           at System.Windows.Forms.ButtonBase.WndProc(Message& m)
           at System.Windows.Forms.Button.WndProc(Message& m)
           at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
           at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
           at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
           at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
           at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
           at WindowsFormsApplication1.Program.Main() in D:\Catia V5 Projects\HF08 Hexapod\Version 05\Host PC Software\PC Host 13\PC Host\Program.cs:line 18
           at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
           at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
           at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
           at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
           at System.Threading.ThreadHelper.ThreadStart()
      InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:00:57.077

cmbBaudRate 或 cmbBaudRate.SelectedItem 为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:40:45.767

对不起，简单的解决方案：我已将值 250000 添加到表单中的下拉值中，并且它有效。

# delphi - 从 Delphi IDE 运行批处理文件

> ID：12660674
> 
> 赞同：9
> 
> 时间：2012-09-30T10:54:25.300
> 
> 标签：delphi, batch-file, delphi-xe

有人知道，有没有办法（默认或第三方）通过按键或按钮启动在 Delphi IDE 编辑器中打开的批处理文件？

我的意思是简单地按，比如说，F9，然后从编辑器中获取带有我的批处理文件的 cmd.exe 窗口，在这个窗口中运行。

在一些较旧的 Delphi 版本中，可能是 Delphi 5，批处理文件可以创建为项目，所以它真的是 F9。但是，在 Delphi XE 中，我看不到这样的项目“类型”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T13:49:42.003

您可以在工具菜单中添加`CMD.EXE`（或您自己提到的）作为参数。此外，您可以在使用宏运行外部工具之前告诉 IDE 保存文件`$(ComSpec)``/c$EDNAME``$SAVE`

# java - 对正确使用 java 泛型感到困惑

> ID：12660675
> 
> 赞同：1
> 
> 时间：2012-09-30T10:54:41.900
> 
> 标签：java

我有一次不知道如何继续前进。我有一个带有以下代码的课程

```
public class MyClass{

  private Class<? extends ValidationProvider> providerClass;
  //getter ans setter

} 
```

Provider 类是在运行时传递的，并且可以有不同的实现，它只需要遵循上述合同`? extends ValidationProvider`。

在我的实现中，我提供了一个属性，用户可以在其中传递提供者名称类，并基于此我需要继续前进。为了继续前进，我需要使用内置的依赖注入机制来获取提供者类的实例，例如

```
 public class MyClass{

      private Class<? extends ValidationProvider> providerClass;
      //getter ans setter

      public void setProvider(){
         providerClass=container.getInstance("type","name");
      }
    } 
```

的签名`container.getInstance("type","name");`是

```
 <T> T getInstance(Class<T> type, String name); 
```

我不确定如何将类型传递给容器并获取提供者类的实例（因为提供者类具有签名`<? extends ValidationProvider>`）。

对于简单的用例，我可以这样做

```
container.getInstance(String.class,"my constant"); 
```

但不确定如何为我的用例做这件事在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:29:41.273

让我们退后一步......您的要求是`MyClass`应该可以通过不同的实现进行配置`ValidationProvider`，我从您的语法中假设它是一个超类。我认为您不需要泛型`MyClass`来实现这一目标：

```
public class MyClass{

    private ValidationProvider provider;

    public void setProvider(ValidationProvider _provider){
        this.provider = _provider;
    }
} 
```

然后，如果（例如）通过在配置文件中具有确切提供程序实现的完全限定名称来实现配置，则可以`MyClass`如下设置您的实例：

```
...
String validatorClassName;
...
// Assign validatorClassName a value from a config file
...
ValidationProvider v = container.getInstance(Class.forName(validatorClassName), "blah");
myClass.setProvider(v); 
```

# kde - 使用 tcsh 脚本打开多个 shell

> ID：12660679
> 
> 赞同：0
> 
> 时间：2012-09-30T10:55:22.333
> 
> 标签：kde, tcsh, konsole

目前正在使用 kde3.5

以下是我最终想做的事情来帮助我的工作流程：

有一个脚本：

*   打开多个 konsole shell
*   重命名每个外壳

这是我到目前为止所拥有的：

```
#!/bin/tcsh -fv
set KPID =ps -ef | grep konsole | grep -v grep | awk '{print $2}'| tr "\n" " " 
dcop konsole-$KPID konsole newSession 
```

该`dcop`命令在命令行中工作得很好（用变量代替实际的 pid）但是当我通过脚本运行它时，它给出了“对象不可访问”错误。不存在其他错误。

我确保权限没问题（777），甚至添加了 sudo ，但没有运气。

再次按照第二部分，我让它在命令行上工作：

```
dcop $KONSOLE_DCOP_SESSION renameSession "name" 
```

然而，这仅适用于活动（工作）shell，并且不知道如何让它为其他人做这件事。我还没有将这部分放入脚本中，因为我仍在处理第一部分。任何建议都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T16:27:48.153

如果是脚本，则不需要是 tcsh。见[http://www.grymoire.com/Unix/CshTop10.txt](http://www.grymoire.com/Unix/CshTop10.txt)

但是，如果您想将 $KPID 传递到您的脚本中，请在您的脚本参数 #1 中使用 $1)，然后使用

脚本 $KPID

# c# - 如何为 SQL Server CE 使用动态连接字符串？

> ID：12660683
> 
> 赞同：6
> 
> 时间：2012-09-30T10:56:24.190
> 
> 标签：c#, entity-framework, connection-string, sql-server-ce-4

我在我的 Windows 应用程序中使用了 SQL Server CE 4.0，并使用实体框架来创建它的模型。

它工作正常，但我的问题是它没有更改连接字符串的构造函数，默认情况下它从`app.config`文件中读取连接字符串。

```
 using (var Context = new MyEntitiesModel(//has no constructor))
 {
        ...
 } 
```

我创建了一个动态连接字符串并

```
 using (var Context = new MyEntitiesModel())
   {
         Context.Database.Connection.ConnectionString = entityConnection.ConnectionString;
   } 
```

通过这种方式可以正常工作，但是如果我在`app.config`文件中删除另一个连接字符串，它会给我这个。

> *错误 = 无效的元源 ....*

因为默认构造函数使用它

我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:58:02.367

创建自己的构造函数。`MyEntitiesModel`是部分类，您可以添加自己的部分类并添加接受连接字符串的构造函数。

```
public partial class MyEntitiesModel {
    public MyEntitiesModel(string connectionString) : base(connectionString) { }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:49:30.043

我正在使用 DbContext。有几个重载构造函数，例如： ObjectContext 也有一组类似的构造函数重载。

System.Data.Entity DbContext 示例

```
Context = new BosMasterEntities(nameOrConnectionString: nameOrConnectionString); 
```

您可以同时连接到多个数据库。

# linux - 如何使用shell在linux中一一打印包含完整信息的所有用户列表

> ID：12660688
> 
> 赞同：3
> 
> 时间：2012-09-30T10:57:16.563
> 
> 标签：linux, bash, shell, loops

我已经开始编写一小段代码来打印 linux 框中可用的所有用户列表。但是我想将一个一个用户传递到我的命令中，以一起显示每个用户的详细信息。

### 列出所有用户

```
root@bt# getent passwd | grep /home/ | cut -d ':' -f 1

root
san
postgres 
```

现在我想将一个用户传递给下面的命令，以一起显示每个用户的详细信息。

```
root@bt# chage -l ${user1} ; chage -l ${user2} etcc. 
```

我应该在这里使用 for 循环还是 while 循环？任何人都可以帮助我建议如何写相同的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:07:39.587

您可以使用`while`循环：

```
getent passwd | grep /home/ | cut -d ':' -f 1 | \
  while read user ; do
    chage -l "$user"
  done 
```

或`for`循环：

```
for user in $(getent passwd | grep /home/ | cut -d ':' -f 1) ; do
    chage -l "$user"
done 
```

或`xargs`：

```
getent passwd | grep /home/ | cut -d ':' -f 1 | \
  xargs -n1 chage -l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:08:00.170

我会使用`xargs`，它在前一个管道的每个输出项上运行一个命令：

```
getent passwd | grep /home/ | cut -d ':' -f 1 | sudo xargs -I % sh -c '{ echo "User: %"; chage -l %; echo;}' 
```

*   `sudo`用于获取有关所有用户的信息，如果您无权访问此信息，则可以删除`sudo`
*   `-I %` is used to specify that `%` is a placeholder for the input item (in your case a user)
*   `sh -c '{ command1; command2; ...;}'` is the command executed by `xargs` on every `%` item; in turn, the command `sh -c` allows multiple shell commands to be executed
*   '{ echo "User: %"; chage -l %; echo;}' echoes the current user in `%`, then runs `chage -l` on this user and finished with a final empty `echo` to format the ouput

# api - 如何为城市城镇标签设置谷歌静态地图字体

> ID：12660689
> 
> 赞同：0
> 
> 时间：2012-09-30T10:57:23.237
> 
> 标签：api, google-maps, google-maps-api-3, fonts

我需要设置谷歌静态地图的小字体大小。那么，实现相同目标所需的参数是什么。因为，我使用下面的 url 来获取静态地图

```
 http://maps.googleapis.com/maps/api/staticmap?center={$randAppPhoto['latitude']},{$randAppPhoto['longitude']}&scale=2&size=700x400&maptype=terrain&markers={$randAppPhoto['latitude']},{$randAppPhoto['longitude']}&zoom=7&format=jpg&sensor=false 
```

其中， $randAppPhoto 是 php 中的一个数组，它具有动态 lat ， long

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T13:17:06.440

我认为无法更改地图上文本的字体。[您可以在此处](https://developers.google.com/maps/documentation/staticmaps/#StyledMaps)查看设置地图样式的参数列表。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-06-10T03:42:25.483

在 URL 中更改`scale=2`为`scale=1`将使街道名称字体更小，如果这是您想要做的。

# java - 合并两张图片（一张没有脸，第二张只有脸）

> ID：12660701
> 
> 赞同：0
> 
> 时间：2012-09-30T10:58:16.563
> 
> 标签：java, android, image, image-processing, face-detection

我有两张图片，一张包含没有脸的身体，一张包含只有脸的图片...

现在我想合并这两个图像......第一个只包含没有脸的身体的图像是因为脸是透明的......

那么**我怎样才能检测到透明区域并将脸放在透明区域中**

我正在将两个图像与下面的代码组合在一起。**但是将脸放在透明区域上不是正确的方法**

下面是我的代码

```
 public Bitmap combineImages(Bitmap c, Bitmap s) {
    Bitmap cs = null;

    int width, height = 0;

    if (c.getWidth() > s.getWidth()) {
        width = c.getWidth() + s.getWidth();
        height = c.getHeight();
    } else {
        width = s.getWidth() + s.getWidth();
        height = c.getHeight();
    }

    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

    Canvas comboImage = new Canvas(cs);

    comboImage.drawBitmap(c, 0f, 0f, null);
    comboImage.drawBitmap(s, 0f, 0f, null);

    return cs;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T06:12:51.483

你的意思是身体图像的面部区域是透明的吗？即身体图像某些部分的 alpha 值低？

# cocoa - [NSOperation 取消所有操作]; 不停止操作

> ID：12660706
> 
> 赞同：15
> 
> 时间：2012-09-30T10:58:58.450
> 
> 标签：cocoa, nsoperationqueue

xCode 4.4.1 OSX 10.8.2，看起来像 [操作 cancelAllOperations]；不工作

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSOperationQueue *operation = [[NSOperationQueue alloc] init];
    [operation setMaxConcurrentOperationCount: 1];
    [operation addOperationWithBlock: ^{
        for (unsigned i=0; i < 10000000; i++) {
            printf("%i\n",i);
           }
    }];
    sleep(1);
    if ([operation operationCount] > 0) {
        [operation cancelAllOperations];
    }
} 
```

结果 9999999

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-30T11:04:56.997

在你的块内，特别是在循环内，调用`-isCancelled`操作。如果是真的，那么返回。

```
NSOperationQueue *operationQueue = [[NSOperationQueue alloc] init];
[operationQueue setMaxConcurrentOperationCount: 1];

NSBlockOperation *operation = [[NSBlockOperation alloc] init];
__weak NSBlockOperation *weakOperation = operation;
[operation addExecutionBlock: ^ {
    for (unsigned i=0; i < 10000000; i++) {
        if ([weakOperation isCancelled]) return;
        printf("%i\n",i);
    }
}];
[operationQueue addOperation:operation];

sleep(1);

if ([operationQueue operationCount] > 0) {
    [operationQueue cancelAllOperations];
} 
```

队列不能随意停止操作的执行——如果某些共享资源被从未被清理过的操作所使用怎么办？您有责任在已知操作被取消时有序地结束操作。来自[Apple 的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)：

> 操作对象负责定期调用 isCancelled 并在方法返回 YES 时自行停止。

# android - android录音 - 有背景噪音问题的声音

> ID：12660719
> 
> 赞同：0
> 
> 时间：2012-09-30T11:01:13.157
> 
> 标签：android, audio-recording

我正在开发一个录音安卓应用程序。为此，我使用以下代码。当我录制和播放它时，我正在录制带有背景噪音的声音。我怎样才能只得到录音。谁能帮我？

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import android.app.Activity;
import android.media.AudioFormat;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.Button;

public class RecorderActivity extends Activity {
        private static final int RECORDER_BPP = 16;
        private static final String AUDIO_RECORDER_FILE_EXT_WAV = ".wav";
        private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
        private static final String AUDIO_RECORDER_TEMP_FILE = "record_temp.raw";
        private static final int RECORDER_SAMPLERATE = 44100;
        private static final int RECORDER_CHANNELS = AudioFormat.CHANNEL_IN_STEREO;
        private static final int RECORDER_AUDIO_ENCODING = AudioFormat.ENCODING_PCM_16BIT;

        private AudioRecord recorder = null;
        private int bufferSize = 0;
        private Thread recordingThread = null;
        private boolean isRecording = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setButtonHandlers();
        enableButtons(false);

        bufferSize = AudioRecord.getMinBufferSize(RECORDER_SAMPLERATE,RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING);
    }

        private void setButtonHandlers() {
                ((Button)findViewById(R.id.btnStart)).setOnClickListener(btnClick);
        ((Button)findViewById(R.id.btnStop)).setOnClickListener(btnClick);
        }

        private void enableButton(int id,boolean isEnable){
                ((Button)findViewById(id)).setEnabled(isEnable);
        }

        private void enableButtons(boolean isRecording) {
                enableButton(R.id.btnStart,!isRecording);
                enableButton(R.id.btnStop,isRecording);
        }

        private String getFilename(){
                String filepath = Environment.getExternalStorageDirectory().getPath();
                File file = new File(filepath,AUDIO_RECORDER_FOLDER);

                if(!file.exists()){
                        file.mkdirs();
                }

                return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + AUDIO_RECORDER_FILE_EXT_WAV);
        }

        private String getTempFilename(){
                String filepath = Environment.getExternalStorageDirectory().getPath();
                File file = new File(filepath,AUDIO_RECORDER_FOLDER);

                if(!file.exists()){
                        file.mkdirs();
                }

                File tempFile = new File(filepath,AUDIO_RECORDER_TEMP_FILE);

                if(tempFile.exists())
                        tempFile.delete();

                return (file.getAbsolutePath() + "/" + AUDIO_RECORDER_TEMP_FILE);
        }

        private void startRecording(){
                recorder = new AudioRecord(MediaRecorder.AudioSource.MIC,
                                                RECORDER_SAMPLERATE, RECORDER_CHANNELS,RECORDER_AUDIO_ENCODING, bufferSize);

                recorder.startRecording();

                isRecording = true;

                recordingThread = new Thread(new Runnable() {

                        @Override
                        public void run() {
                                writeAudioDataToFile();
                        }
                },"AudioRecorder Thread");

                recordingThread.start();
        }

        private void writeAudioDataToFile(){
                byte data[] = new byte[bufferSize];
                String filename = getTempFilename();
                FileOutputStream os = null;

                try {
                        os = new FileOutputStream(filename);
                } catch (FileNotFoundException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }

                int read = 0;

                if(null != os){
                        while(isRecording){
                                read = recorder.read(data, 0, bufferSize);

                                if(AudioRecord.ERROR_INVALID_OPERATION != read){
                                        try {
                                                os.write(data);
                                        } catch (IOException e) {
                                                e.printStackTrace();
                                        }
                                }
                        }

                        try {
                                os.close();
                        } catch (IOException e) {
                                e.printStackTrace();
                        }
                }
        }

        private void stopRecording(){
                if(null != recorder){
                        isRecording = false;

                        recorder.stop();
                        recorder.release();

                        recorder = null;
                        recordingThread = null;
                }

                copyWaveFile(getTempFilename(),getFilename());
                deleteTempFile();
        }

        private void deleteTempFile() {
                File file = new File(getTempFilename());

                file.delete();
        }

        private void copyWaveFile(String inFilename,String outFilename){
                FileInputStream in = null;
                FileOutputStream out = null;
                long totalAudioLen = 0;
                long totalDataLen = totalAudioLen + 36;
                long longSampleRate = RECORDER_SAMPLERATE;
                int channels = 2;
                long byteRate = RECORDER_BPP * RECORDER_SAMPLERATE * channels/8;

                byte[] data = new byte[bufferSize];

                try {
                        in = new FileInputStream(inFilename);
                        out = new FileOutputStream(outFilename);
                        totalAudioLen = in.getChannel().size();
                        totalDataLen = totalAudioLen + 36;

                        AppLog.logString("File size: " + totalDataLen);

                        WriteWaveFileHeader(out, totalAudioLen, totalDataLen,
                                        longSampleRate, channels, byteRate);

                        while(in.read(data) != -1){
                                out.write(data);
                        }

                        in.close();
                        out.close();
                } catch (FileNotFoundException e) {
                        e.printStackTrace();
                } catch (IOException e) {
                        e.printStackTrace();
                }
        }

        private void WriteWaveFileHeader(
                        FileOutputStream out, long totalAudioLen,
                        long totalDataLen, long longSampleRate, int channels,
                        long byteRate) throws IOException {

                byte[] header = new byte[44];

                header[0] = 'R';  // RIFF/WAVE header
                header[1] = 'I';
                header[2] = 'F';
                header[3] = 'F';
                header[4] = (byte) (totalDataLen & 0xff);
                header[5] = (byte) ((totalDataLen >> 8) & 0xff);
                header[6] = (byte) ((totalDataLen >> 16) & 0xff);
                header[7] = (byte) ((totalDataLen >> 24) & 0xff);
                header[8] = 'W';
                header[9] = 'A';
                header[10] = 'V';
                header[11] = 'E';
                header[12] = 'f';  // 'fmt ' chunk
                header[13] = 'm';
                header[14] = 't';
                header[15] = ' ';
                header[16] = 16;  // 4 bytes: size of 'fmt ' chunk
                header[17] = 0;
                header[18] = 0;
                header[19] = 0;
                header[20] = 1;  // format = 1
                header[21] = 0;
                header[22] = (byte) channels;
                header[23] = 0;
                header[24] = (byte) (longSampleRate & 0xff);
                header[25] = (byte) ((longSampleRate >> 8) & 0xff);
                header[26] = (byte) ((longSampleRate >> 16) & 0xff);
                header[27] = (byte) ((longSampleRate >> 24) & 0xff);
                header[28] = (byte) (byteRate & 0xff);
                header[29] = (byte) ((byteRate >> 8) & 0xff);
                header[30] = (byte) ((byteRate >> 16) & 0xff);
                header[31] = (byte) ((byteRate >> 24) & 0xff);
                header[32] = (byte) (2 * 16 / 8);  // block align
                header[33] = 0;
                header[34] = RECORDER_BPP;  // bits per sample
                header[35] = 0;
                header[36] = 'd';
                header[37] = 'a';
                header[38] = 't';
                header[39] = 'a';
                header[40] = (byte) (totalAudioLen & 0xff);
                header[41] = (byte) ((totalAudioLen >> 8) & 0xff);
                header[42] = (byte) ((totalAudioLen >> 16) & 0xff);
                header[43] = (byte) ((totalAudioLen >> 24) & 0xff);

                out.write(header, 0, 44);
        }

        private View.OnClickListener btnClick = new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                        switch(v.getId()){
                                case R.id.btnStart:{
                                        AppLog.logString("Start Recording");

                                        enableButtons(true);
                                        startRecording();

                                        break;
                                }
                                case R.id.btnStop:{
                                        AppLog.logString("Start Recording");

                                        enableButtons(false);
                                        stopRecording();

                                        break;
                                }
                        }
                }
        }; 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T12:45:49.417

您是在使用模拟器还是在实际设备上进行测试（如果是，是哪个设备）？声学调谐（包括增益控制、降噪等）将特定于给定的平台和产品，不是您可以更改的。

Jellybean 包含 API，可让应用程序在录音上应用某些声学滤波器，[噪声抑制器](http://developer.android.com/reference/android/media/audiofx/NoiseSuppressor.html)就是其中之一。但是，通过使用该 API，您将您的应用程序限制为只能在运行 Jellybean 或更高版本的设备上正常运行（甚至并非所有这些设备都可能真正实现此功能）。

另一种可能性是在您的应用程序中包含噪声抑制器。我认为例如 Speex 包括噪声抑制功能，但它面向低比特率语音编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-18T05:37:04.963

如果你想要 NoiseSuppressor 那么你可以使用这个：

// 以下仅对 Jelly Bean 及更高版本生效。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
        Log.i("Trying to clean up audio because running on SDK " + Build.VERSION.SDK_INT);

    if (noise && NoiseSuppressor.create(getAudioSessionId()) == null) {
        Log.i("NoiseSuppressor not present :(");
    } else {
        Log.i("NoiseSuppressor enabled!");
    }

    if (gain && AutomaticGainControl.create(getAudioSessionId()) == null) {
        Log.i("AutomaticGainControl not present :(");
    } else {
        Log.i("AutomaticGainControl enabled!");
    }

    if (echo && AcousticEchoCanceler.create(getAudioSessionId()) == null) {
        Log.i("AcousticEchoCanceler not present :(");
    } else {
        Log.i("AcousticEchoCanceler enabled!");
    }
} 
```

此代码可以去除背景噪声、回声和增益。

# apache-flex - 视频组件的简单视图

> ID：12660721
> 
> 赞同：0
> 
> 时间：2012-09-30T11:01:28.397
> 
> 标签：apache-flex, video, stream, red5, custom-component

我必须使用 flash.media.Video 组件来播放远程视频文件，因为我在 Red5 中有一个不允许使用 VideoPlayer 的自定义身份验证机制 (CRAM-MD5)。我试图使用 OpenVideoPlayer，但它在服务器端失败（执行调用时出错：服务：null 方法：play Num Params：3 0：test/avatar.flv 1：NaN 2：NaN）。

我只需要将控制器放在 Video 组件的顶部：播放、暂停、停止、倒带、进度条。请问有人可以推荐我一个简单的观点吗？或者任何解决方案都可以！

**更新：** 示例代码，togglePause 无法正常工作：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="640" minHeight="480"
           initialize="init();">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import flash.globalization.Collator;

        import mx.utils.ObjectUtil;
        import mx.controls.Alert;

        private var nc:NetConnection;
        private var ns:NetStream;
        private var video:Video;
        private var meta:Object;
        private var videoURL:String = "test/avatar.flv";

        private function init():void {

            var params:Object = {
                user: "user",
                video_id: 2
            };

            nc = new NetConnection();
            nc.connect("rtmp://localhost/myapp", params);
            nc.client = this;
            nc.addEventListener(NetStatusEvent.NET_STATUS,onConnectionStatus);
            nc.addEventListener(AsyncErrorEvent.ASYNC_ERROR,onErrorHandler);
            nc.addEventListener(SecurityErrorEvent.SECURITY_ERROR, onSecurityError);
        }

        private function onConnectionStatus(event:NetStatusEvent):void {

            var nsClient:Object = {};
            nsClient.onMetaData = ns_onMetaData;
            nsClient.onCuePoint = ns_onCuePoint;

            ns = new NetStream(nc);
            ns.play(videoURL);
            ns.client = nsClient;

            video = new Video();
            video.attachNetStream(ns);
            uic.addChild(video);
        }

        private function onErrorHandler(event:AsyncErrorEvent):void{
        }

        private function onSecurityError(event:SecurityErrorEvent):void{
        }

        private function ns_onMetaData(item:Object):void {
        }

        private function ns_onCuePoint(item:Object):void {
        }

        public function onBWDone():void {
        }

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:SpriteVisualElement id="uic" x="0" y="0" width="320" height="240" /> 
<mx:ControlBar x="10" y="330">
    <mx:Button label="Play/Pause" click="ns.togglePause();" />
    <mx:Button label="Rewind" click="ns.seek(0); ns.pause();" />
</mx:ControlBar> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:21:31.900

我猜你正在使用 NetStream 类，它与 NetConnection 一起负责从 Red5 检索媒体。

查看 NetStream 的文档：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html)

应该有足够的方法和事件来构建所需的控件（如 play()、pause() 等）

另外，考虑研究开源媒体框架。它为构建媒体播放器提供了很好的抽象，并允许为附加功能创建插件（例如 Red5 身份验证机制）。

此外，VideoPlayer 组件是基于 OSMF 的，因此您可以开发一个自定义插件来与您的 Red5 服务器通信并与 Flex 的 VideoPlayer 一起使用。

# jquery - 按下 controlkey 并按下选项卡时的事件

> ID：12660722
> 
> 赞同：1
> 
> 时间：2012-09-30T11:01:29.180
> 
> 标签：jquery, events, keydown

当控制键按下时，我无法让选项卡在 keydown 上工作。我怎样才能做到这一点。

```
 $(document).keydown(function (e) {
        if (e.ctrlKey && e.which === 9){
            alert('tab pressed when controlkey is down');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:16:21.750

这是一个可行的解决方案。但如果我是你，我不会抓住 CTRL+Tab。可以捕获大多数快捷键（如 CTRL+S），然后您可以调用 event.preventDefault() 来防止默认行为。例如，在许多浏览器中，这将停止显示保存网页的对话框。但是使用 CTRL+Tab 会被捕获，但是 event.preventDefault() 没有达到预期的效果，在 Firefox 中 CTRL+Tab 会更改选项卡。您可以使用下面的代码看到两者的作用。[你可以拿它来试驾](http://dl.dropbox.com/u/25840964/key_shortcuts.html)。

```
<html><body>
<script>

function shortcutHandler(event) {
    if ((event.charCode == 115) && (event.ctrlKey)) {
        document.getElementById("debug").innerHTML += 'CTRL+S<br/>'
        event.preventDefault()
    }
    if ((event.keyCode == 9) && (event.ctrlKey)) {
        document.getElementById("debug").innerHTML += 'CTRL+Tab<br/>'
        event.preventDefault()
    }
}

document.addEventListener("keypress", shortcutHandler, true);
</script>
<div id=debug style="border: 1px solid red"></div>
</body></html> 
```

这是一个jquery版本，[试驾](http://dl.dropbox.com/u/25840964/key_shortcuts_jquery.html)

```
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>

$(window).keypress(function(event){
    if ((event.charCode == 115) && (event.ctrlKey)) {
        document.getElementById("debug").innerHTML += 'CTRL+S<br/>'
        event.preventDefault()
    }
    if ((event.keyCode == 9) && (event.ctrlKey)) {
        document.getElementById("debug").innerHTML += 'CTRL+Tab<br/>'
        event.preventDefault()
    }
});

</script>
</head>
<body>
Press CTRL+S or CTRL+Tab
<div id=debug style="border: 1px solid red"></div>
</body></html> 
```

# java - Oracle 连接池类

> ID：12660724
> 
> 赞同：2
> 
> 时间：2012-09-30T11:01:50.333
> 
> 标签：java, oracle, jdbc, connection-pooling

我想在 Helper 类中为 Oracle DB 设置连接池。

```
public class DbConnection {

// Data source for the pooled connection
private static OracleDataSource dataSource;

// Host
private static final String dbHost = "bla";

// Port
private static final String dbPort = "1521";

// DBname
private static final String database = "orcl";

// DBuser
private static final String dbUser = "bla";

// DBpassword
private static final String dbPassword = "bla";

static {
    OracleConnectionPoolDataSource opds;
    try {
        opds = new OracleConnectionPoolDataSource();
        opds.setURL("jdbc:oracle:thin:@" + dbHost + ":" + dbPort + ":"
                + database);
        opds.setUser(dbUser);
        opds.setPassword(dbPassword);
        dataSource = opds;
    } catch (SQLException e1) {
        System.err.println("Connection failed!");
    }
    try {
        // Load driver
        Class.forName("oracle.jdbc.driver.OracleDriver");

    } catch (ClassNotFoundException e) {
        System.out.println("Driver not found!");
    }
}

public static Connection getConnection() throws SQLException {
    return dataSource.getConnection();
}
} 
```

这是有效的，但它不是非常快，所以我认为我缺少一些东西来让池工作。有什么建议么？

所以我的外部类只是调用 getConnection() 方法......

```
Connection conn = DbConnection.getConnection();
...
conn.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:05:06.260

您不应该`ConnectionPoolDataSource`直接使用 a 。它旨在供应用程序服务器中的连接池使用。它本身不提供连接池。另请参阅[https://stackoverflow.com/a/12651163/466862](https://stackoverflow.com/a/12651163/466862)

换句话说：您需要使用实际的连接池，如 DBCP、c3p0 或 BoneCP，或 UCP（通用连接池）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T13:52:45.597

您需要使用 OracleDataSource（不是 OracleConnectionPoolDataSource）并设置 setConnectionCachingEnabled(true)。

```
 private  static OracleDataSource ods = null;
     ...
     static {
        System.out.println("OracleDataSource Initialization");
        try {
            ods = new OracleDataSource();
            ods.setConnectionCachingEnabled(true);
            ods.setConnectionCacheName("mycache");
            ods.setURL("jdbc:oracle:thin:@//server.local:1521/prod");
            ods.setUser("scott");
            ods.setPassword("tiger");
            Properties cacheProps = new Properties();
            cacheProps.setProperty("MinLimit", "1");
            cacheProps.setProperty("MaxLimit", "4");
            cacheProps.setProperty("InitialLimit", "1");
            cacheProps.setProperty("ConnectionWaitTimeout", "5");
            cacheProps.setProperty("ValidateConnection", "true");
            ods.setConnectionCacheProperties(cacheProps);

        }
        catch (SQLException e) {
            e.printStackTrace();
        }
    }
...
    public static Connection getConnection()
       throws SQLException {
      return ods.getConnection();
    } 
```

完整的例子[在这里](http://www.rgagnon.com/javadetails/java-0545.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-28T15:02:21.177

`oracle.jdbc.pool.OracleDataSource.setConnectionCachingEnabled`文件说明如下：

> 已弃用。请改用 Oracle 通用连接池。

您可以下载[Oracle 数据库 UCP](http://www.oracle.com/technetwork/database/enterprise-edition/downloads/ucp-112010-099129.html)`DataSource`并按如下方式创建：

```
import oracle.jdbc.pool.OracleDataSource;
import oracle.ucp.jdbc.PoolDataSource;
import oracle.ucp.jdbc.PoolDataSourceFactory;

PoolDataSource poolDataSource = PoolDataSourceFactory.getPoolDataSource();
poolDataSource.setConnectionFactoryClassName(OracleDataSource.class.getName());
poolDataSource.setURL("jdbc:oracle:thin:@localhost:1521:XE");
poolDataSource.setUser("SYSTEM");
poolDataSource.setPassword("****"); 
```

# android - Android SMS 发送到多个destinationAdress 抛出NullPointerException

> ID：12660726
> 
> 赞同：2
> 
> 时间：2012-09-30T11:02:15.003
> 
> 标签：android

嗨，我的主要问题是向选定的目的地地址发送短信。大多不止一个。选择工作正常，但发送短信的方法总是显示 NullPointerException，我无法找到主要错误。emerNames 是一个简单的字符串数组，emerNumbers 也是如此！在我看来要发送的文本不是问题，但可能是在 for 循环中使用数组的发送操作！

有什么建议么？

```
 AlertDialog.Builder settingMessage = new AlertDialog.Builder(c);

    settingMessage.setTitle("SOS- Empfänger wählen");
    settingMessage.setMultiChoiceItems(emerNames, checkItem, new DialogInterface.OnMultiChoiceClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which, boolean isChecked) 
        {

            if (isChecked == true)
            {

                Log.i("AlertChoice", "SelectedItem: "+emerNames[which]);
                ischecked[which] = true;
                //emerNumbers[which]=emerNames[which];

            }

            else
            {
                ischecked[which]=false;
                //emerNumbers[which]= "";
                Log.i("AlertChoice", "Deseclected Item "+emerNames[which]);
            }

        }
    } );

    settingMessage.setNeutralButton("SOS senden", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) 
        {

            for (int i = 0; i<ischecked.length;i++)
            {
                if (ischecked[i]== true)
                {
                    Log.i("Selection", "SelectedItems:"+ emerNumbers[i]);
                    String text;
                    text = "HILFE, ich befinde mich in einer Notlage\n"
                            +"Meine persönlichen Daten:\n"
                            +"Vorname: "+empersData[0]+"\n"
                            +"Zuname: "+empersData[1]+"\n"
                            +"Alter: "+empersData[2]+"\n"
                            +"Blutgruppe: "+empersData[3]+empersData[4]+"\n";
                            /*+"Versicherungsnr: "+empersData[5]+"\n"
                            +"Geschlecht: "+empersData[6]+"\n";*/
                    SmsManager sms = SmsManager.getDefault();
                    Log.i("nr","Telefonnr 1: "+ emerNumbers[i]);
                    Log.i("text",text);
                    sms.sendTextMessage(emerNumbers[i], null, text, null, null);
                    //Toast.makeText(this, "SOS versendet", Toast.LENGTH_LONG).show();
                        Log.i("onClickTest", "Überprüfung Index: "+ischecked[i]); 
```

方法“sms.sendTextMessage”抛出 NullPointerException！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:21:02.140

好的，我自己解决了这个问题！问题是消息的文本。因为消息的限制设置在 160 个字符的范围内。所以，我通过使用“SMSManger”和Methode“sendMultipartTextMessage！！在添加的源代码下方调整了代码以使其工作：

```
 SmsManager sms = SmsManager.getDefault();
                    // Aufteilung des SMS Textes da mehr als 160 character --> sonst zu groß
                    //Splits the text in parts | divide Message (text)--> The Text to split
                    ArrayList<String> parts =sms.divideMessage(text);

                    int numParts = parts.size();

                    ArrayList<PendingIntent> sentIntents = new ArrayList<PendingIntent>();
                    ArrayList<PendingIntent> deliveryIntents = new ArrayList<PendingIntent>();

                    for (int j = 0; j < numParts; j++) 
                    {
                    sentIntents.add(PendingIntent.getBroadcast( c, 0, new Intent (), 0));
                    deliveryIntents.add(PendingIntent.getBroadcast(c, 0, new Intent (), 0));
                    }
                    sms.sendMultipartTextMessage(emerNumbers[i], null, parts, sentIntents, deliveryIntents); 
```

不管怎样，谢谢你帮助我！！

# python - 脱胶瓶不起作用

> ID：12660732
> 
> 赞同：0
> 
> 时间：2012-09-30T11:03:06.023
> 
> 标签：python, bottle

我无法调试瓶子。我在开发中有 500 个错误。我正在使用最新的带有`debug=True`标志的瓶子。

```
if __name__ == "__main__":
    # Interactive mode
    run(host='localhost', port=8049,debug=True) 
```

这就是我得到的......

```
Bottle v0.11.rc1 server starting up (using WSGIRefServer())...
Listening on http://localhost:8049/
Hit Ctrl-C to quit.

localhost - - [30/Sep/2012 18:59:13] "POST /bidder/ HTTP/1.1" 500 1407
localhost - - [30/Sep/2012 18:59:14] "POST /bidder/ HTTP/1.1" 500 1407
localhost - - [30/Sep/2012 18:59:14] "POST /bidder/ HTTP/1.1" 500 1407
localhost - - [30/Sep/2012 18:59:15] "POST /bidder/ HTTP/1.1" 500 1407
localhost - - [30/Sep/2012 18:59:15] "POST /bidder/ HTTP/1.1" 500 1407 
```

只要我能找出原因，我不介意500？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:09:14.193

函数中的`debug=False`关键字参数`run()`仅在当前开发版本中可用；当前的 0.10.x 代码本身*忽略*还不支持它。

相反，请改用该[`debug()`函数](http://bottlepy.org/docs/dev/api.html#bottle.debug)：

```
if __name__ == "__main__":
    # Interactive mode
    run(host='localhost', port=8049)
    debug(True) 
```

或使用`--debug`命令行标志运行。

如果您还没有这样做，您可能必须从中导入`debug`函数。`bottle`本教程[更详细地解释了调试模式](http://bottlepy.org/docs/dev/tutorial.html#tutorial-debugging)。

# debugging - 使用带有 FSCTL_LOCK_VOLUME 的 DeviceIoControl 来锁定卷。调试器问题

> ID：12660740
> 
> 赞同：0
> 
> 时间：2012-09-30T11:04:49.003
> 
> 标签：debugging, deviceiocontrol

我正在使用带有 FSCTL_LOCK_VOLUME 的 DeviceIoControl 在直接磁盘读/写之前锁定 USB 笔式驱动器。该程序有效 - 有时。我遇到了锁定调用本身的问题。当我在 Visual Studio 2008 中执行命令时，结果是正确的并且锁定成功 - 每次！，当运行代码（调试或不调试）时，调用偶尔会失败，句柄无效。唯一显着的区别是，当步进时有半秒的暂停——我很满意，但是在运行/调试时调用会立即失败。

请你给我一个提示，告诉我这是在哪里掉下来的。

我认为这是真正的技术人员！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:36:19.897

听起来像一个计时错误。是否有其他线程可以访问句柄？如果是这样，其中一个可能会在您调用 DeviceIoControl 之前将其关闭。

# c# - 图片框中的图像在不同的 PC 上无法正确显示 - Windows Forms C#

> ID：12660742
> 
> 赞同：0
> 
> 时间：2012-09-30T11:04:56.960
> 
> 标签：c#, winforms, picturebox

我在图片框中创建了一个带有图像的表单。

当我尝试在另一台电脑上运行我的应用程序时，图像在其右侧和底部被剪切。它发生在几个不同的图像和几个不同的电脑中。

这是它在我的电脑上的外观： ![我的电脑](../Images/98533be3d16d1018fae4f25f1a7e639b.png)

在我朋友的电脑上：

![我朋友的电脑](../Images/272b7286101bec4f70e52ecbc1bbf151.png)

我如何解决它？

编辑：

这是设计中定义图片框的代码：

```
this.playPictureBox.Image = global::WorkTimer.Properties.Resources.play;
this.playPictureBox.Location = new System.Drawing.Point(86, 40);
this.playPictureBox.Name = "playPictureBox";
this.playPictureBox.Size = new System.Drawing.Size(96, 95);
this.playPictureBox.TabIndex = 24;
this.playPictureBox.TabStop = false;
this.playPictureBox.Click += new System.EventHandler(this.playPictureBox_Click); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:11:47.373

设置`PictureBox.SizeMode`为`AutoSize`

# sql-server - SQL Server Management Studio 中用于 JOIN 的 Intellisense

> ID：12660746
> 
> 赞同：9
> 
> 时间：2012-09-30T11:05:23.147
> 
> 标签：sql-server, intellisense, ssms, sql-server-2012

在 SQL Server Management Studio (SSMS) 中，是否有一个选项可以为 JOIN 启用智能感知自动完成功能？

例如，如果我输入：

```
SELECT * FROM Employee INNER JOIN _ 
```

在这一点上，我希望智能感知给我与 Employee 相关的表，当我根据外键关系选择一个来填写适当的连接条件时。

LinqPad 为 LINQ 查询执行此操作，这很棒。我想在 SSMS 中也一样。我正在使用 SqlServer 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:57:25.740

微软在智能感知的实现上要赶上 Red-Gate SQLPrompt，还有很长的路要走。即使在 SQL 2012 中，它也是最低限度的。

Red-Gate SQL Prompt 已与 Red-Gate SQL Refactor 合并，这意味着除了智能感知之外，您还可以获得许多功能来帮助代码布局/格式、查找未使用的变量、总结脚本等。

当您考虑将代码片段附加到首字母缩略词的能力时，对我来说它是一个杀手级应用程序。

如果你有钱购买 SQLPrompt，我当然会推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:48:48.647

我使用 devart 的 SQL Complete。在撰写本文时，它的价格是 Red Gate 的 SQL Prompt 的一半，并且具有类似的功能集。他们在这里演示了他们的自动 JOIN 完成：http: [//www.devart.com/dbforge/sql/sqlcomplete/images/join-clause-auto-generation.gif](http://www.devart.com/dbforge/sql/sqlcomplete/images/join-clause-auto-generation.gif) 。

他们提供的免费版本比 SSMS 2008 的 Intellisense 稍好，但不包括付费版本的自动 JOIN 建议。

不幸的是，我还没有遇到提供您所寻求的免费工具。

# javascript - 大字符串的可读流实现

> ID：12660748
> 
> 赞同：1
> 
> 时间：2012-09-30T11:05:50.380
> 
> 标签：javascript, node.js, stream

我想为大小为 1MB+ 的字符串实现一个可读流，它们也是通过处理一些大文件来创建的。这些字符串将通过 HTTP 协议发送到多个客户端，并且需要异步发送它们的内容。问题是：我应该如何组织字符串拆分/读取以及分块数据应该使用什么大小？在文件系统模块中，正如我所观察到的，它在流式传输文件时使用了 64KB 的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:06:10.017

查看[MongoDB 中的 GridFS。](http://www.mongodb.org/display/DOCS/GridFS+Specification)

您可以使用`GridFS`.

这很简单。

以文件类型保存并以适当的文件类型下载。

# c++ - Opengl 创建一个 3d 盒子而不是一个简单的三角形

> ID：12660752
> 
> 赞同：0
> 
> 时间：2012-09-30T11:06:49.223
> 
> 标签：c++, opengl

我使用 Opengl 库在 C++ 中编写了下面的代码，它在屏幕上给了我一个简单的三角形 (2d)

如何更改渲染函数中的代码以编写 3d 框或原始对象？

代码如下：

```
#include <iostream>
#include <GLUT/GLUT.h>
#include <OpenGL/OpenGL.h>

void render(void);
int main(int argc, char ** argv)

{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGBA | GLUT_DEPTH);
    glutInitWindowPosition(100,100);
    glutInitWindowSize(800,600);
    glutCreateWindow("Welcome");

    glutDisplayFunc(render);
    glutMainLoop();

    return 0;
}

void render(void)

{

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glBegin(GL_POLYGON);
    glColor3f(0.0,1.0,0.0);
    glVertex2f(-0.5, -0.5);
    glColor3f(1.0,0.0,0.0);
    glVertex2f(0.5,0.0);
    glColor3f(0.0,0.0,1.0);
    glVertex2f(0.0,0.5);

    glEnd();
    glutSwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T15:45:20.720

As a follow-up to Denis's answer...

If you are willing to learn a bit more OpenGL (perhaps a tall order if you just want to draw a cube...) here is the code that I reuse when doing small demos. It uses vertex array+buffer objects and creates a textured rectangular prism centered at (0, 0, 0). You'll need to provide your own texture.

The code to generate the rectangular prism is:

```
void GLmakeRect(GLuint vao, GLuint vbo[2], float w, float h, float d, GLuint storageHint) {
  /*
         8|---|9
         0|BAC|1
    10|---|---|---|12
      |LEF|TOP|RIG|
    11|---|---|---|13
         3|FRO|2
         4|---|5
          |BOT|
         6|---|7
  */
  float verts[] = {
    -0.5*w, 0.5*h, -0.5*d,   1.0/3.0, 0.25,
    0.5*w, 0.5*h, -0.5*d,    2.0/3.0, 0.25,
    0.5*w, 0.5*h, 0.5*d,     2.0/3.0, 0.5,
    -0.5*w, 0.5*h, 0.5*d,    1.0/3.0, 0.5,
    -0.5*w, -0.5*h, 0.5*d,   1.0/3.0, 0.75,
    0.5*w, -0.5*h, 0.5*d,    2.0/3.0, 0.75,
    -0.5*w, -0.5*h, -0.5*d,  1.0/3.0, 1.0,
    0.5*w, -0.5*h, -0.5*d,   2.0/3.0, 1.0,
    -0.5*w, -0.5*h, -0.5*d,  1.0/3.0, 0.0,
    0.5*w, -0.5*h, -0.5*d,   2.0/3.0, 0.0,
    -0.5*w, -0.5*h, -0.5*d,  0.0, 0.25,
    -0.5*w, -0.5*h, 0.5*d,   0.0, 0.5,
    0.5*w, -0.5*h, -0.5*d,   1.0, 0.25,
    0.5*w, -0.5*h, 0.5*d,    1.0, 0.5
  };
  int polys[] = {
    0, 3, 1, 1, 3, 2,    // TOP
    3, 4, 2, 2, 4, 5,    // FRONT
    4, 6, 5, 5, 6, 7,    // BOTTOM
    8, 0, 9, 9, 0, 1,    // BACK
    10, 11, 0, 0, 11, 3, // LEFT
    1, 2, 12, 12, 2, 13  // RIGHT
  };
  glBindVertexArray(vao);
  glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);
  glBufferData(GL_ARRAY_BUFFER, sizeof(verts), &verts[0], storageHint);
  glEnableVertexAttribArray(0);
  glEnableVertexAttribArray(1);
  glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5*sizeof(float), 0);
  glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5*sizeof(float), (void*)(3*sizeof(float)));
  glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vbo[1]);
  glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(polys), &polys[0], storageHint);
} 
```

You can call the function like this during initialization:

```
GLuint vao, vbo[2]
glGenVertexArrays(1, &vao);
glGenBuffers(2, &vbo[0]);
GLmakeRect(vao, vbo, 1, 1, 1, GL_STATIC_DRAW); 
```

To draw the cube in your render loop, do:

```
glBindTexture(GL_TEXTURE_2D, yourTextureHandleHere);
glBindVertexArray(vao);
glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_INT, 0); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T12:44:47.040

如果您只想显示一个简单的立方体，请查看“glutSolidCube”（也许还有其他“glutSolidABC”函数）：[glutSolidCube](http://pyopengl.sourceforge.net/documentation/manual/glutSolidCube.3GLUT.html)

但是，当显示 3d 对象时，您必须设置一个投影矩阵、一个世界矩阵（“查看器”或“相机”的转换），如果您想转换您的对象，还需要为每个对象设置一个模型矩阵。

可以在[lighthouse3d.com](http://www.lighthouse3d.com/tutorials/glut-tutorial/)的“tutorials -> glut”部分找到一些不错的 kickstart 课程。

如果您想创建自己的网格（立方体、球体等），您必须编写包含顶点和索引的网格或表面类。当一个渲染调用出现时，这个类必须绘制它的所有顶点和三角形——你的立方体/球体/等等。

# java - Java点对点线程模型，大家都在等Job

> ID：12660754
> 
> 赞同：2
> 
> 时间：2012-09-30T11:07:33.320
> 
> 标签：java, multithreading, runnable, blockingqueue

这是一门功课。我正在尝试创建点对点线程模型：

[http://www.informit.com/articles/article.aspx?p=169479&seqNum=5](http://www.informit.com/articles/article.aspx?p=169479&seqNum=5)

> 在委托模型有一个将任务委托给工作线程的老板线程的情况下，**在对等模型中，所有线程都具有相同的工作状态**。尽管有一个线程最初创建执行所有任务所需的所有线程，但该线程被视为工作线程并且不进行委托。在这个模型中，没有集中式线程。

因此，我的主线程将创建 5 个线程，它们开始监听我的队列并使用主线程创建作业 10 秒。而且由于所有线程都必须执行任务，因此该线程还必须等待作业。我怎样才能做到这一点？

```
BlockingQueue<Job> queue = new ArrayBlockingQueue<Job>(1000);

    Collection<Thread> workers = new ArrayList<Thread>();
    for(int i = 0; i < 5; i++) {
        Thread thread = new Thread(new Worker(queue));
        workers.add(thread);
        thread.start();
    }

    long endTime = System.currentTimeMillis() + 10000;
    Random r = new Random();
    while(System.currentTimeMillis() < endTime) {
        try {
            CalculateJob job = new CalculateJob(r.nextInt(50), r.nextInt(50), r.nextInt(50));
            queue.put(job);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } 
```

所以我的主线程将与创建线程一起工作，而工作人员只是坐在`queue.take()`.

**我是否正确理解在点对点模型中，每个线程都必须`queue.take()`或等待作业。如果是这样，我该怎么做？有什么建议么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:31:01.830

您链接到的文章没有说明如何创造就业机会。它们可能意味着它们是从其他地方创建的。查看各个模型的数据，我们看到：

*   在“委托模型”中，主线程决定由哪个工作线程执行 Job
*   在“点对点模型”中，对等线程从一个公共队列中获取工作（并且恰好哪个线程首先获得下一个作业），因此对等线程相互协调。

通过使用 ConcurrentQueue，您实际上实现了对等模型。

总而言之，它们的区别在于线程如何协调工作，而不是如何创建工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:31:16.343

正如您提供的文章所建议的那样

> 在对等模型中，所有线程都具有相同的工作状态。尽管有一个线程最初创建执行所有任务所需的所有线程，但该线程被视为工作线程并且不进行委托

您的 Boss 线程恰好也是工作者，它将创建放入队列中的作业，并且`take()`一旦完成放置作业，就可以通过调用来充当工作者。

现在，如果您想阻塞所有线程，直到 Boss 线程完成创建作业，那么您可以使用`CountDownLatch`单个计数。

我真的不知道这种模式是否对我们的生产者/消费者模式有任何优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-31T11:06:16.413

虽然这个问题是用[java](/questions/tagged/java "显示标记为“java”的问题")标记的，并且因为*workcrew 模型*听起来好像是并发的一般概念，但我在 C 中添加了伪代码。

> 在对等模型（也称为工作组模型）中，一个线程必须在程序启动时创建所有其他对等线程。该线程随后充当处理请求的另一个对等线程，或暂停自身等待其他对等点完成。对等模型使每个线程负责自己的输入。对等点提前知道自己的输入，有自己的私人获取输入的方式，或与其他对等点共享单点输入。

[![在此处输入图像描述](../Images/00f4d43df4f9f912f6c4a4df2d358b83.png)](https://i.stack.imgur.com/kfGkf.jpg)

```
main()
{
   pthread_create( ... thread1 ... task1 )
   pthread_create( ... thread2 ... task2 )
   .
   .
   .
   signal all workers to start
   wait for all workers to finish
   do any clean up
}

task1()
{
   wait for start
   perform task, synchronize as needed if accessing shared resources
   done
}

task2()
{
   wait for start
   perform task, synchronize as needed if accessing shared resources
   done
} 
```

所有来源均引用自[PThreads Programming - A POSIX Standard for Better Multiprocessing, Buttlar, Farrell, Nichols](http://shop.oreilly.com/product/9781565921153.do)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-19T07:27:53.433

**我认为老板**和*点对点*之间的唯一区别是请求的类型（***输入***）。如果请求是不同的类型，那么程序需要确定要调用哪个线程，这是一个**老板**模型，如果请求是相同的，比如乘法矩阵，那么它不需要老板，我们有*对等*模型。

# php - 处理 PHP 和 MySQL 中的“布尔”值

> ID：12660756
> 
> 赞同：12
> 
> 时间：2012-09-30T11:07:55.147
> 
> 标签：php, mysql, boolean

目前我正在使用在我的 MySQL 数据库`Tinyint(1)`中指示`Boolean`值，我真的不喜欢这样。那么，我如何在我的数据库中存储和检索`Boolean`值呢？`MySQL``PHP`

如何在`WHERE`子句中使用它以及如何在`INSERT, UPDATE`查询中正确分配值？

当我在 PHP 上恢复它时，它是`TRUE`, `true`，或者简单地说`1`，如果我要检查它`===`？

`Tinyint(1)`当您从 迁移到时，您是否也遇到过任何问题`BOOLEAN`？

提前致谢。:)

**更新：**

我知道这`Tinyint(1)`与 相同`Boolean`，但是我想处理`Boolean`数据类型而不是`Tinyint(1)`. 这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-30T11:27:24.243

MySQL 没有布尔数据类型。Tinyint(1) 非常接近。在 PHP 中使用它很简单。

```
If (1) echo 'true'; // is the same as if (true)
// Just as
if (0) echo 'false'; // is the same as if (false) 
```

如果你真的想要一个布尔值，你可以这样做

```
// $mysql_data is tinyint value from db
$boolean = $mysql_data ? true : false;
// Now you have your boolean as $boolean 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T11:22:26.820

使用布尔值，不要使用`=== FALSE`- 该值已经是布尔值（除非函数要求您使用`===`，如`strpos()`）。该值是布尔值 - 从技术上讲，它是一个整数，但 PHP 是一种动态语言，所以它不是问题。

考虑`preg_match()`函数 - 它返回匹配数（整数）。

你愿意这样写吗？

```
if (preg_match('/\bregexp?\b/', $variable) === 1) 
```

或者那个？

```
if (preg_match('/\bregexp?\b/', $variable)) 
```

显然，没有显式的方式`=== 1`更好。你问它是否匹配，而不是它是否有 0 个匹配。另外，如果您认为这样`=== 1`更安全，为什么不这样做`=== 1 === TRUE`呢？

当然，可以使用`(bool)`or将值转换为布尔值`!!`。

此外，在某些语言（例如 C 或 Perl）中，布尔值和数字之间没有区别。它只是工作。

# php - 如何从父子（邻接）表中计算出 PHP 中的层次目录

> ID：12660761
> 
> 赞同：1
> 
> 时间：2012-09-30T11:08:19.550
> 
> 标签：php, mysql, hierarchical

我正在尝试从邻接树模型（id，parent_id）中的 MySQL 数据库中计算/创建或生成 PHP 中的目录。到目前为止，这是我在回显输出时所取得的成就。

```
1\. Category 1
   1 Subcategory 1
   2 Subcategory 2
   3 Subcategory 3
2\.  Category 2
   1\. Subcategory 1
      1\. Subcategory Subcategory 1
      2\. Subcategory Subcategory 2
   2 Subcategory 2
      1 Subcategory 1
      2 Subcategory 2 
```

我非常接近，但我想要的输出是：

```
1\. Category 1
    1.1 Subcategory 1
    1.2 Subcategory 2
    1.3 Subcategory 3
2\.  Category 2
   2.1\. Subcategory 1
      2.1.1\. Subcategory Subcategory 1
      2.1.2\. Subcategory Subcategory 2
   2.2 Subcategory 2
      2.2.1 Subcategory 1
      2.2.2 Subcategory 2 
```

换句话说，我想在多级层次结构中使用目录格式，如下所示：Chapter.Subchapter.Subchapter.Subchapter TITLE。

我尝试过使用一个递归数组来保留当前索引并连接到前一个索引，但它最终会在每个项目之前添加一个奇怪的长数字，例如，

0.11。**2** ..11.2.3.4.5.6。**7** ..11..11.2.3.4.5。**6**台电脑，

相反，它应该只是：

2.7.6 计算机。

（其他数字为其他项目的编号）

这是我一直在处理的代码

```
renumber(0,0,1,0);

function renumber($parent_id,$level=0,$counter=1) {

    // Counter level keeps track of the current index number
    $counterlevel[$level]=$counter;

    $query = "SELECT defaultTitle, id, pid FROM defaultChapters  WHERE  pid=".$parent_id;

    $res = mysql_query($query) or die(mysql_error());

    // Exit if there are no tree leafs
    if(mysql_num_rows($res) == 0) {return;}

        while (list ($title, $id) = mysql_fetch_row($res))
    {   

        $leveltext[$level][$counterlevel[$level]] = $section.".".$counterlevel[$level];

        echo str_repeat("......",$level)." ".$counterlevel[$level]." ".$section." ".$title."<BR>";
        // Increase the counter of the current level    
        $counterlevel[$level]++;

        // Initialize the level counter                     
        if(!$counterlevel[$level+1]) {

        $counterlevel[$level+1] = 1;
         }

        // Start the function again to find children
        renumber($id,$level+1,$counterlevel[$level+1]);

    } // End While

} 
```

我浏览了所有技术支持论坛，包括这个论坛，似乎没有人为此发布过算法，只是在任何地方都找不到此示例代码。有数百个教程和代码可以从 mysql 数据库中获取 php 中的层次结构树，而无需编号，但没有关于在 php 中计算层次目录的内容。

是否也可以使用 SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:01:44.067

我会稍微重构它并将编号传递给当前调用：

```
function renumber($parent_id = 0, $level = 0, $prefix = '')
{
    // we don't need pid in the results
    $query = "SELECT defaultTitle, id
        FROM defaultChapters 
        WHERE pid=$parent_id";

    $res = mysql_query($query) or die(mysql_error());

    // Exit if there are no tree leafs
    if (mysql_num_rows($res) == 0) {
        return;
    }

    // start numbering at 1
    $nr = 1;
    while (list($title, $id) = mysql_fetch_row($res)) {
        // dropped section, not sure where it was used
        echo str_repeat("......", $level) . " $prefix.$nr $title<BR>";

        // Start the function again to find children
        renumber($id, $level + 1, strlen($prefix) ? "$prefix.$nr." : "$nr.");
        // advance list numbering
        ++$nr;
    }
}

renumber(); 
```

# ruby-on-rails - 乘客 RVM 错误：无法加载此类文件 -- 捆绑器/设置

> ID：12660763
> 
> 赞同：5
> 
> 时间：2012-09-30T11:08:39.520
> 
> 标签：ruby-on-rails, rvm, bundler, passenger

我有一个 Debian 服务器，当我尝试运行Passenger 并导航到我的应用程序的根目录时：

### 错误：

```
cannot load such file -- bundler/setup 
```

### 环境

```
deployment@currienet:/$ which ruby
/home/deployment/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
deployment@currienet:/$ ruby --version
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux]
deployment@currienet:/$ which rails
/home/deployment/.rvm/gems/ruby-1.9.3-p194/bin/rails
deployment@currienet:/$ rails --version
Rails 3.2.8
deployment@currienet:/$ which bundle
/home/deployment/.rvm/gems/ruby-1.9.3-p194/bin/bundle
deployment@currienet:/$ gem list bundle
bundler (1.2.1)
deployment@currienet:/$ gem list passenger
passenger (3.0.17)
deployment@currienet:/$ which rvm
/home/deployment/.rvm/bin/rvm
deployment@currienet:/$ rvm --version
rvm 1.16.6 (master) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/] 
```

### Apache的passenger.load文件

```
LoadModule passenger_module /home/deployment/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /home/deployment/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17
PassengerRuby /usr/local/bin/ruby 
```

### Apache 的 httpd.conf

```
<VirtualHost *:80>
      ServerName http://currienet
      # !!! Be sure to point DocumentRoot to 'public'!
      DocumentRoot /var/www/currienet/marketplace/current/public
      <Directory /var/www/currienet/marketplace/current/public >
         # This relaxes Apache security settings.
         Allow from all
        Options -MultiViews
      </Directory>
</VirtualHost> 
```

### 捆

```
deployment@currienet:/var/www/currienet/marketplace/current$ bundle show
Gems included by the bundle:
  * actionmailer (3.2.8)
  * actionpack (3.2.8)
  * activemodel (3.2.8)
  * activerecord (3.2.8)
  * activeresource (3.2.8)
  * activesupport (3.2.8)
  * arel (3.0.2)
  * bcrypt-ruby (3.0.1)
  * builder (3.0.0)
  * bundler (1.2.1)
  * cocaine (0.2.1)
  * coffee-rails (3.2.2)
  * coffee-script (2.2.0)
  * coffee-script-source (1.3.3)
  * daemon_controller (1.0.0)
  * devise (2.1.2)
  * erubis (2.7.0)
  * execjs (1.4.0)
  * fastthread (1.0.7)
  * haml (3.1.7)
  * haml-rails (0.3.4)
  * hike (1.2.1)
  * i18n (0.6.1)
  * journey (1.0.4)
  * jquery-rails (2.1.1)
  * json (1.7.5)
  * mail (2.4.4)
  * mime-types (1.19)
  * multi_json (1.3.6)
  * orm_adapter (0.4.0)
  * paperclip (3.1.2)
  * passenger (3.0.17)
  * pg (0.14.0)
  * polyglot (0.3.3)
  * rack (1.4.1)
  * rack-cache (1.2)
  * rack-ssl (1.3.2)
  * rack-test (0.6.1)
  * rails (3.2.8)
  * railties (3.2.8)
  * rake (0.9.2.2)
  * rdoc (3.12)
  * sass (3.2.1)
  * sass-rails (3.2.5)
  * sprockets (2.1.3)
  * thor (0.16.0)
  * tilt (1.3.3)
  * treetop (1.4.10)
  * tzinfo (0.3.33)
  * uglifier (1.2.7)
  * warden (1.2.1)
  * will_paginate (3.0.3) 
```

## 账户

我在服务器上有两个帐户：root 和部署。

我的应用程序和 rvm 安装在部署下，但 Apache 安装在 root 下（以便能够绑定到端口 80）通过运行`ps -fe`乘客的进程列表判断正在由 apache 调用并在 root 下运行：

```
root     16159 16155  0 02:08 ?        00:00:00 PassengerWatchdog
root     16165 16159  0 02:08 ?        00:00:00 PassengerHelperAgent
root     16167 16165  0 02:08 ?        00:00:00 Passenger spawn server
nobody   16172 16159  0 02:08 ?        00:00:00 PassengerLoggingAgent
www-data 16179 16155  0 02:08 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 16180 16155  0 02:08 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 16181 16155  0 02:08 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 16182 16155  0 02:08 ?        00:00:00 /usr/sbin/apache2 -k start
www-data 16183 16155  0 02:08 ?        00:00:00 /usr/sbin/apache2 -k start 
```

root 帐户无权访问 root 路径中的 rails 或 bundle。

# .rvmrc & config/setup_load_paths.rb

我已经尝试按照[The Path to Better RVM & Passenger Integration Blog](http://blog.ninjahideout.com/posts/the-path-to-better-rvm-and-passenger-integration)和[Using RVM rubies with Passenger](https://rvm.io/integration/passenger/)上的说明进行操作：

使用以下命令在我的应用程序的根目录中创建一个 .rvmrc 文件：

```
rvm use 1.9.3 --rvmrc --create 
```

生成文件.rvmrc：

```
if [[ -d "${rvm_path:-$HOME/.rvm}/environments"
  && -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]]
then
  \. "${rvm_path:-$HOME/.rvm}/environments/$environment_id"
  [[ -s "${rvm_path:-$HOME/.rvm}/hooks/after_use" ]] &&
    \. "${rvm_path:-$HOME/.rvm}/hooks/after_use" || true
  if [[ $- == *i* ]] # check for interactive shells
  then echo "Using: $(tput setaf 2)$GEM_HOME$(tput sgr0)" # show the user the ruby and gemset they are using in green
  else echo "Using: $GEM_HOME" # don't use colors in non-interactive shells
  fi
else
  # If the environment file has not yet been created, use the RVM CLI to select.
  rvm --create use  "$environment_id" || {
    echo "Failed to create RVM environment '${environment_id}'."
    return 1
  }
fi

# If you use bundler, this might be useful to you:
 if [[ -s Gemfile ]] && {
   ! builtin command -v bundle >/dev/null ||
   builtin command -v bundle | GREP_OPTIONS= \grep $rvm_path/bin/bundle >/dev/null
 }
 then
   printf "%b" "The rubygem 'bundler' is not installed. Installing it now.\n"
   gem install bundler
 fi
 if [[ -s Gemfile ]] && builtin command -v bundle >/dev/null
 then
   bundle install | GREP_OPTIONS= \grep -vE '^Using|Your bundle is complete'
 fi 
```

并将以下内容添加到 config/setup_load_paths.rb

```
if ENV['MY_RUBY_HOME'] && ENV['MY_RUBY_HOME'].include?('rvm')
  begin
    rvm_path     = File.dirname(File.dirname(ENV['MY_RUBY_HOME']))
    rvm_lib_path = File.join(rvm_path, 'lib')
    $LOAD_PATH.unshift rvm_lib_path
    require 'rvm'
    RVM.use_from_path! File.dirname(File.dirname(__FILE__))
  rescue LoadError
    # RVM is unavailable at this point.
    raise "RVM ruby lib is currently unavailable."
  end
end

# Select the correct item for which you use below.
# If you're not using bundler, remove it completely.

# If we're using a Bundler 1.0 beta
ENV['BUNDLE_GEMFILE'] = File.expand_path('../Gemfile', File.dirname(__FILE__))
require 'bundler/setup' 
```

并通过运行启动 apache

```
sudo /etc/init.d/apache2 restart 
```

我仍然得到同样的错误。

## 无用

我发现以下相关问题没有帮助（但可能对其他人有用）：

[RVM 和乘客：没有这样的文件要加载 - 捆绑器](https://stackoverflow.com/questions/6195772/rvm-and-passenger-no-such-file-to-load-bundler)- 解析是 Apache 配置文件中旧虚拟主机的剩余配置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T11:25:27.850

你有

```
deployment@currienet:/$ which ruby
/home/deployment/.rvm/rubies/ruby-1.9.3-p194/bin/ruby 
```

和

```
PassengerRuby /usr/local/bin/ruby 
```

这不是你想要的。`rvm`可以选择设置解释器以用作乘客的默认解释器。[https://rvm.io/integration/passenger/](https://rvm.io/integration/passenger/)

另外（查看您的最后一次编辑）也许您需要在系统范围内安装 rvm，因为乘客将以 root 身份运行。

# regex - 用于删除百分比的正则表达式

> ID：12660764
> 
> 赞同：4
> 
> 时间：2012-09-30T11:08:49.390
> 
> 标签：regex, perl

嗨，我真的很感激在形成一个从字符串末尾删除百分比的正则表达式方面的帮助：

```
Film name (2009) 58%  ->  Film name (2009)
Film name (2010) 59%  ->  Film name (2010) 
```

该字符串可能有也可能没有括号中的年份。在括号中的年份之前，电影名称可能是字母数字并且有多个单词。

我正在使用“批量重命名实用程序”，因此希望填写“匹配”和“替换”字段。

我能想到的最好的办法是：

```
([A-Z][a-z]*) \((\d*)\) (\d*\%) -->  \1 (\2) 
```

虽然这似乎只适用于单个电影名称，并且丢失了括号，所以我不得不重新添加！

我用谷歌搜索，每次尝试可能的表达方式时，它都无法在我认为基于 pcre （[批量重命名实用程序](http://www.bulkrenameutility.co.uk/Download.php)）的“批量重命名实用程序”中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T12:56:24.950

这很简单

```
s/\s*\d+%$// 
```

它删除尾随的数字字符串，后跟百分号，以及任何前面的空格字符

```
use strict;
use warnings;

while (<DATA>) {
  s/\s*\d+%$//;
  print;
}

__DATA__
Film name (2009) 58%
Film name (2010) 59% 
```

**输出**

```
Film name (2009)
Film name (2010) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:17:41.430

我不熟悉该实用程序，但作为替代，通常只是用`[0-9]+%`任何东西替换应该可以工作。但要小心，如果有任何电影名称中有百分比！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T11:26:06.627

为避免更换错误的东西，请执行此操作

```
\b(100|\d{1,2})%\b 
```

并用任何东西代替它。

它在单词边界处停止（即 30% 可以，但 w30% 不行）并且只获得 100 或 0-99 个数字。

**编辑：**

如果 % 是字符串的最后一个字符，则可以达到更好的效果

```
\b(100|\d{1,2})%$ 
```

这样，您只能`%`在行尾获得 %，从而避免从电影标题中删除带有 % 的数字。

如果字符串是一个文件名并且您需要替换它并且您不能只删除该图块的一部分，您可以这样做

```
(.+?)(100|[0-9]{1,2})%$ #I think using 0-9 is accepted by more languages 
```

并替换为

```
$1 
```

`\1`并且`\2`不应在替换表达式中使用。它们是匹配第一个和第二个捕获匹配的正则表达式模式。`$1`并且`$2`是包含第一次和第二次捕获匹配的变量，因此您应该使用它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T04:39:51.340

您很幸运，百分比（如果存在）始终是最后一件事。只需将其用作关键事实，不要*尝试*匹配其他任何内容。（作为 RE 的一般规则，匹配您不会更改的内容只会增加出错的机会，而不会提供任何好处 -*只有*在您*必须*确定您关注的部分的位置时才这样做和。）

我的猜测是之前的一些答案或多或少是正确的，但一个没有奏效，因为你在所有那些 '}' 和 ')' '|' 中都有错字 和 '\' （正则表达式必须*准确*，反斜杠不是正斜杠，方括号不是大括号不是括号，加号不是星号，小写不是大写，不能加任何白色任何地方的空格，等等）并且大多数都不起作用，因为有时您的字符串末尾有尾随空格。因此，当您的“匹配”字段使用
`\s+(100|\d\d?)%\s*$`
并让您的“替换”字段完全为空时。

（另一个想法：您的某些数据是否可能在数字和百分号之间有空格[像这样：foo bar (2012) 83 %)？如果是这样，请修改“匹配”字段以允许这种可能性
\s+(100|\d\d?)\s*%\s*$

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-22T12:01:35.590

这是我的建议：

```
^([1-9]([0-9])*?|0)(\.[0-9]+)?%?$ 
```

匹配“12”、“0.123”、“12.44”、“102.12345”以及末尾的%“11.22%”、“11%”......

匹配小数点前后任意位数的百分比，并在末尾带有“%”字符（点和 % 当然是可选的）。

希望能帮助到你 ;）

# c# - 如何获取 midi 设备的当前状态？

> ID：12660770
> 
> 赞同：2
> 
> 时间：2012-09-30T11:09:31.613
> 
> 标签：c#, java, c++, midi, synthesizer

如何查询 midi 设备以获取程序、音量等的当前状态？我试图在 Midi 规格中找到它，但没有任何运气。我基本上需要从通过 USB MIDI 连接的数码钢琴中获取当前乐器（钢琴等）。

Java似乎能够做到这一点：

[http://docs.oracle.com/javame/config/cldc/opt-pkgs/api/mm/jsr135/index.html?javax/microedition/media/control/MIDIControl.html](http://docs.oracle.com/javame/config/cldc/opt-pkgs/api/mm/jsr135/index.html?javax/microedition/media/control/MIDIControl.html)

他们是如何做到的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T23:17:27.107

你不能。没有用于转储当前补丁、CC 值等的标准消息。

一些合成器具有可用于此目的的 sysex 消息，但不是全部，并且该消息因设备、制造商而异。

您能做的最好的事情是发送新的 CC 值、设置补丁等，然后存储它的内容。如果它在合成器端发生变化，并且您设置了返回路径，您可以接收它并更新您存储的内容。

# apache - htaccess 重写到站点不同文件夹中的同名文件

> ID：12660774
> 
> 赞同：2
> 
> 时间：2012-09-30T11:10:21.173
> 
> 标签：apache, .htaccess, mod-rewrite, rewrite

我试图搜索很多但没有成功。我希望有人能真正帮助我解决这个问题。

好的，所以我的网站是这样的：

```
/rewrite.php
/folder1/rewrite.php
/folder2/rewrite.php
/folder1/subfolder1/rewrite.php
/folder1/subfolder2/rewrite.php 
```

等等...

简而言之，每个文件夹中都存在一个**rewrite.php （管理员访问文件夹除外）。**

所以基本上，我想重写到对应目录下的rewrite.php文件，但是我做不到。

那是

如果我要求

```
/News 
```

那么它应该将其重写为：

```
/rewrite.php 
```

如果我要求：

```
/folder1/News 
```

那么它应该将其重写为：

```
/folder1/rewrite.php 
```

等等其他文件夹。

目前，这是我的 htaccess 中的内容：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule . rewrite.php [L,NC] 
```

在某处，我读到如果我删除 RewriteBase，那么它将使用当前目录作为 RewriteBase。但它失败了，也没有奏效。

另外，我想将一些文件夹保留在异常中（应该禁用重写），例如：

```
/administration
/config 
```

我希望有一个可行的解决方案，如果有人可以帮助我...... :)

最好的祝福，

安库尔·塔库尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:50:20.760

尝试：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^/(administration|config|rewrite.php)
RewriteRule ^(.*?)(/?[^/]+)$ $1/rewrite.php [L] 
```

# sql - 是否可以在sql查询期间设置标志

> ID：12660775
> 
> 赞同：3
> 
> 时间：2012-09-30T11:10:21.353
> 
> 标签：sql, select, union

我正在尝试执行这样的 SQL 查询

```
(SELECT ID, Name FROM Book)
UNION
(SELECT ID, Name FROM Author) 
```

我想在决赛桌中知道哪些 id 来自书本，哪些来自作者设置标志或类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:12:02.110

你可以这样做：

```
SELECT ID, Name, 'From Book' AS FromWhome 
FROM Book
UNION
SELECT ID, Name, 'From Author'
FROM Author 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:12:24.887

只需选择一个静态文本，例如

```
(SELECT ID, Name, "Book" FROM Book) UNION (SELECT ID, Name, "Author" FROM Author) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:12:43.587

选择值允许列和表达式，您也可以用这种方式命名新列结果：

```
SELECT ID, Name, 'book' as tag FROM Book
UNION 
SELECT ID, Name, 'author' as tag FROM Author 
```

# sql - SQL 检查组是否包含 NULL

> ID：12660782
> 
> 赞同：16
> 
> 时间：2012-09-30T11:11:51.283
> 
> 标签：sql, postgresql

是否有任何功能可以检查组中的列是否包含NULL，或者我将如何解决这个问题？数据结构示例如下。

```
id | value
----------
1  | NULL
1  | 56
2  | 98
2  | 14 
```

结果：

```
id | value
----------
1  | 1
2  | 0 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-30T11:13:32.967

尝试

```
select id, 
       count(*) - count(value) as null_value_count
from your_table
group by id 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!1/4a482/2)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-30T11:35:09.053

另一种不使用`count(value)`忽略`NULL`值的事实的可能性：

```
select id, 
       sum(case when value is null then 1 else 0 end) as null_count
from your_table
group by id; 
```

# jquery - jQuery - 以十六进制获取元素背景颜色

> ID：12660784
> 
> 赞同：1
> 
> 时间：2012-09-30T11:12:09.080
> 
> 标签：jquery, css, styles, background-color

我正在尝试获取元素背景颜色

```
$(document).ready(function(){
    $.each('.log-widget',function(){
    console.log($(this).css('backgroundColor'));
    //$(this).css({'box-shadow':'1px 1px 20px'+});
   });
  }); 
```

它不起作用它把我送回去`:TypeError: invalid 'in' operand a`

我想获取每个元素的背景颜色并将其返回为十六进制颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:17:35.850

您正在迭代一个不是您所追求的字符串。你想要`.each`：

```
$(".log-widget").each(function() { ... }); 
```

或者，您可以使用`$.each`, 但使用 jQuery 集：

```
$.each($(".log-widget"), function() { ... }); 
```

在任何情况下，您*都*必须从选择器字符串中创建一个集合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:22:25.990

正如[@pimvdb](https://stackoverflow.com/users/514749/pimvdb)指出的那样，您的`.each`语法错误。但是，要返回十六进制颜色，没有本地方法。您必须自己进行转换。看看这个对类似问题的回答：[little link](https://stackoverflow.com/a/6177502/364869)。

# python - Python中的执行权限

> ID：12660787
> 
> 赞同：0
> 
> 时间：2012-09-30T11:12:30.617
> 
> 标签：python, security, permissions, execute

我需要将代码发送到远程客户端以在其中执行，但安全性是我现在关心的问题。我不想在那里执行不安全的代码，所以我想控制程序在做什么。我的意思是，例如，知道是否正在建立连接、连接到哪里、是否正在读取本地文件等。这可以用 Python 实现吗？

编辑：我正在考虑类似于 Android 权限系统的东西。我想知道代码会做什么，如果它做了不同的事情，请停止它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:19:11.873

Python 中曾经有一个名为 的模块`bastian`，但由于它不*那么*安全而被弃用。还有一个我相信的东西叫做`RPython`，但我不太了解。

在这种情况下，我会使用[Pyro](http://pypi.python.org/pypi/Pyro4)并在目标服务器上编写代码。这样你就知道客户端只能执行编写和测试过的代码。

**编辑**- 值得注意的是，Pyro 还支持[http://en.wikipedia.org/wiki/Privilege_separation](http://en.wikipedia.org/wiki/Privilege_separation) - 尽管我不必为此使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:49:14.133

我认为您正在寻找沙盒 python。过去曾努力实施这一点，但几年前已被废除。

[python wiki 中的沙盒 python](http://wiki.python.org/moin/SandboxedPython "沙盒蟒蛇")很好地概述了您的用例的可能选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T12:15:29.187

最严格（但可能是最慢）的方法是在模拟器中的裸操作系统上运行 Python。

根据您使用的操作系统，有几种方法可以运行有限制的程序，但没有模拟器的开销：

*   [FreeBSD 以jails](http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/jails-intro.html)的形式提供了一个很好的集成解决方案。这些来自[`chroot`](http://en.wikipedia.org/wiki/Chroot)系统调用。
*   [Linux-VServer](http://linux-vserver.org/Welcome_to_Linux-VServer.org)旨在在 Linux 上或多或少地做同样的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T12:34:05.457

您可以使用不同的 Python 运行时：

*   如果您使用[Jython](http://www.jython.org/)运行脚本；你可以利用Java的权限系统
*   使用[Pypy 的沙盒版本](http://doc.pypy.org/en/latest/sandbox.html)，您可以选择允许在控制器脚本中运行的内容

# c# - Json 到 C# 对象在 Windows Phone 的 ListBox 中显示

> ID：12660792
> 
> 赞同：1
> 
> 时间：2012-09-30T11:13:36.957
> 
> 标签：c#, windows-phone-7, json.net

我使用[http://json2csharp.com](http://json2csharp.com)从下面的 JSON 字符串生成 C# 类。

```
{
    "stationArr":[
        {
            "id":"9",
            "name":"name9",
        "sidebar":{
                "original":"http://myurl.com/station_images/5/5_s.png",
                "m":"http://myurl.com/station_images/5/m/5_s_m.png",
                "s":"http://myurl.com/station_images/5/s/5_s_s.png"
            }
        },
    {
            "id":"3",
            "name":"name3",
        "sidebar":{
                "original":"http://myurl.com/station_images/5/5_s.png",
                "m":"http://myurl.com/station_images/5/m/5_s_m.png",
                "s":"http://myurl.com/station_images/5/s/5_s_s.png"
            }
    ]
    "stationUrlMap":{
        "9":"http://myurl.com/9_64",
        "3":"http://myurl.com/3_64",
    }
} 
```

生成的类是（我为每个类创建了不同的 .cs。

```
public class Sidebar
{
    public string original { get; set; }
    public string m { get; set; }
    public string s { get; set; }
}

public class StationArr
{
    public string id { get; set; }
    public string name { get; set; }
    public Sidebar sidebar { get; set; }
}

/*public class StationUrlMap
{
    public string __invalid_name__9 { get; set; }
    public string __invalid_name__3 { get; set; }
}
*/
public class StationList
{
    public List<StationArr> stationArr { get; set; }
//    public StationUrlMap stationUrlMap { get; set; } Dicarded it
} 
```

我已经丢弃了 StationUrlMap，因为我不需要它。

我正在使用以下代码来创建对象

```
string resultString = sd.ReadToEnd();
StationList stations = JsonConvert.DeserializeObject<StationList>(resultString);
Debug.Writeline(stations.stationArr.Count); // gives Output 9 Which is correct. 
```

我只是不知道如何在 UI 中显示电台列表（使用 ListBox）。请指导我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:53:02.077

在 XAML 中创建一个列表框

```
<ListBox x:Name="ListBoxStations" Height="500" >
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal" Width="450">
                 <Image Source="{Binding Path=sidebar.original}"/>
                 <TextBlock Text="{Binding Path=name}"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

然后在您的cs文件中，在json转换后执行以下操作

```
StationList stations = JsonConvert.DeserializeObject<StationList>(resultString);
ListBoxStations.ItemsSource = stations.stationArr; 
```

上面的 XAML 代码只是一个示例，可以根据您的要求进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:40:13.720

有两种方法。

首先，您可以将列表框的*ItemSource*属性设置为您刚刚创建的列表。

其次，您可以在列表中创建事物的*ObservableCollection*，并将可观察集合绑定到列表框的 ItemSource 属性。在 Observable Collection 中添加项目，这些项目将显示在您的列表框中。

第二种方法使您可以更好地控制 lisbox 中的项目。您可以在可观察集合中删除或添加元素，这将反映在列表框内容中。第一种方法将使列表的内容成为只读的，您将无法从中添加或删除项目。

[http://msdn.microsoft.com/en-us/library/ms668604.aspx](http://msdn.microsoft.com/en-us/library/ms668604.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.listbox%28v=vs.95%29.aspx)

# c# - 从 TextBox 获取输入时，Linq 查询未返回值

> ID：12660794
> 
> 赞同：0
> 
> 时间：2012-09-30T11:13:40.337
> 
> 标签：c#, asp.net, linq, oracle10g, entity-framework-4.1

这是模型的图像。您可以看到我正在搜索的列是类型字符串。

![](../Images/bb20f946f79ea8b548edc821f3c02c42.png)

现在我只想从文本框中获取输入并将其与所需的列匹配。

```
protected void Button1_Click(object sender, EventArgs e)
{
    String val = Convert.ToString(TextBox1.Text.Trim());
    Entities query = new Entities();

    var txn = (from p in query.MAINs
               where p.PAN.Equals(val, StringComparison.OrdinalIgnoreCase)
              select p).ToList();
    GridView1.DataSource = txn.ToList();
    GridView1.DataBind();
} 
```

但查询返回 null(rowcount=0)。我检查了 val 变量。它发送确切的参数。当我直接给出值时，它的返回结果。

```
protected void Button1_Click(object sender, EventArgs e)
{
    String val = Convert.ToString(TextBox1.Text.Trim());
    Entities query = new Entities();

    var txn = (from p in query.MAINs
               where p.PAN.Equals("1010170000000030", StringComparison.OrdinalIgnoreCase)
              select p).ToList();
    GridView1.DataSource = txn.ToList();
    GridView1.DataBind();
} 
```

我是 Linq 和实体框架的新手。这件事让我抓狂。不知道为什么从文本框中获取输入不起作用。任何形式的帮助都将不胜感激，因为我被困在这 3 天。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:01:43.887

尝试

```
var txn = (from p in query.MAINs
           where p.PAN.Trim().Equals("1010170000000030", 
               StringComparison.OrdinalIgnoreCase)
          select p).ToList(); 
```

我感觉 Oracle 表中的字段 PAN 是`char`/`nchar`而不是`varchar`。

# android - 如何将 SensorSimulator 与 AndEngine 一起使用

> ID：12660796
> 
> 赞同：1
> 
> 时间：2012-09-30T11:14:25.230
> 
> 标签：android, andengine

在[http://code.google.com/p/openintents/wiki/SensorSimulator](http://code.google.com/p/openintents/wiki/SensorSimulator)上，它说将代码放在 onCreate() 和 onResume() 中，但是，在 AndEngine 框架 (GLES2.0) 中没有这样的方法。

我知道我做错了，让 SensorSimulator 与 AndEngine 一起工作的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:36:06.923

您仍然可以在 AndEngine 中覆盖标准的 android 活动生命周期回调方法。正如 SVS 所说，AndEngine 中的 BseGameActivity 已经为您实现了这些回调方法。您可以覆盖它们，但请务必记住调用超级构造函数。
除了 SensorSimulator 之外，如果你有一个真实的设备，还有另一种方式（Android 官方支持）来模拟传感器。有关详细信息，请参阅[http://tools.android.com/tips/hardware-emulation](http://tools.android.com/tips/hardware-emulation)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:44:42.740

BaseGameActivity（或其他 AndEngine 活动）是 Activity 的扩展。这就是在 AndEngine 中使用 onCreate 和 onResume 以及使用 Activity 的原因。他们在那里。

# php - 按键搜索多维php数组

> ID：12660797
> 
> 赞同：0
> 
> 时间：2012-09-30T11:14:26.320
> 
> 标签：php, arrays

我有一个像这样的多维php数组

```
Array
(
    [0] => Array
        (
            [size] => M
            [colour] => black
            [quantity] => 10
        )

    [1] => Array
        (
            [size] => S
            [colour] => blue
            [quantity] => 10
        )

) 
```

我有另一个这样的数组

```
Array
(
    [size] => M
    [colour] => black
) 
```

我如何横向到第一个数组以找到与第二个匹配的数组？我完全不知道如何去做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:42:09.910

采取不同的方法：

```
$multiArray = array(array('size'     => 'M', 
                          'color'    => 'black',
                          'quantity' => '10'), 
                    array('size'     => 'S', 
                          'color'    => 'blue',
                          'quantity' => 10));

$otherArray = array('size'     => 'S', 
                    'color'    => 'blue',
                    'quantity' => 10)

$message = "Match not found!";

foreach($multiArray as $array) {
    $result = array_diff($array, $otherArray);

    if(isset($result['size']) or isset($result['color'))
        continue;
    else
        $message = "Found a match!\n Size: {$array['size']}\n Color: {$array['color']}\n Quantity: {$array['quantity']}"; 
}
echo $message; 
```

这个解决方案对我来说似乎是正确的，因为从您的示例中我猜您正在尝试查找数量。因此，array_diff 无论如何都会返回结果中的数量，导致需要检查大小和颜色是否匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:20:59.530

考虑第一个数组是“mainarray”，第二个是“comparearray”

```
$result = array();
    foreach($mainarray as $marray)
    {
      if($marray['size'] == $comparearray['size'] && $marray['colour'] == $comparearray['colour'])
    {
       $result = $marray;
    //echo "match found";
    }
    } 
```

注意：如果比较数组是单个数组，则适用。如果那也是多维数组，您也应该为该数组放置 foreach 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T11:27:48.207

试试这个

```
<?php
$arr1 = array(array("size"=>"M","colour" => "black"),array("size"=>"S","colour" => "blue"));
$arr2 = array("size"=>"M","colour" => "black");
print_r($arr1);
print_r($arr2);

foreach($arr1 as $array)
{
  if($array['size'] == $arr2['size'] && $array['colour'] == $arr2['colour'])
  {
      echo "matches";
  }
}
?> 
```

工作示例[http://codepad.org/iQPxSHKd](http://codepad.org/iQPxSHKd)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T11:21:01.793

尝试

```
$result = array();
foreach ($multi_array as $arr) {
  if ($arr['size'] == $one_dimen_arr['size'] && $arr['colour'] == $one_dimen_arr['colour']) {
    $result = $arr;
    break;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T11:38:05.103

例如：

$array1 是您的第一个数组， $array2 是您的第二个数组。然后 ：

```
$result = array();
foreach ($array1 as $subarray)
{
    $check = array_diff($subarray, $array2);
    if (empty($check)) {
        $result = $subarray;
    }
} 
```

# matlab - 在 Matlab 中读取文本文件并形成二维等高线图

> ID：12660800
> 
> 赞同：-2
> 
> 时间：2012-09-30T11:14:50.007
> 
> 标签：matlab, text, plot, contour

我有三列数据，文本文件中有 n 行，我想读取要绘制等高线图的数据。

```
x   y  z   
1  2  3
2  3  4
5  5  5
4  4  5 
```

如上所示，我有三列数据`x, y, z`。现在我想读取每个`x`, `y`,`z`数据并绘制在等高线图中。

我设法做的是

```
[gnd, x, y] = textread('abc.txt', '%n,%n,%n');
contourf(x,y,gnd) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:00:11.487

对于阅读这应该有效：

```
fid = fopen('abc.txt');
fgets(fid); % to get rid of the first line of characters ("x y z")
A = textscan(fid, '%f %f %f');
x = A{1};
y = A{2};
z = A{3}; 
```

但是数据似乎不是很结构化。所以也许`scatter(x,y,5,z)`可能是更好的绘图选项？

# android - 在 Android 设备上启动应用程序时出现黑屏

> ID：12660801
> 
> 赞同：2
> 
> 时间：2012-09-30T11:14:54.530
> 
> 标签：android, flashdevelop

我正在为 MS.NET 2.0（R2337）使用 Flashdevelop 4.0.4 RTM。我已经为设备安装了所有适当的驱动程序（我认为），设备上的 Adob​​e AIR，运行 .BAT 文件以创建证书，所以基本上我需要做的一切都是为了在设备上运行应用程序。但是，当我在设备上运行它时，会出现黑屏。它在模拟器上运行没有任何问题，这让我认为这是一个驱动程序问题，但我已经安装了正确的驱动程序并且启动确实有效（它只是没有显示任何内容）这让我认为这是另外一回事。有没有人知道这可能是什么，或者自己有类似的情况？

PS我不知道告诉设备没有SD卡是否重要。

问候，全科医生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T12:58:25.997

你在调试模式下运行它吗？

```
:target
goto android-debug 
```

如果是这样，我有完全相同的问题。发布为 android-test 很好，但是每当我想让调试器工作时，我都会卡在黑屏上（可能是应用程序等待调试器连接）

原来我需要在 SetupApplication.bat 中指定我的 PC 的 IP 地址。

所以，假设你的手机和你的电脑在同一个 WIFI 上，打开 SetupApplication.bat，向下滚动并更改

```
:: Debugging using a custom IP
set DEBUG_IP= 
```

到

```
:: Debugging using a custom IP
set DEBUG_IP=192.168.1.5 
```

例如。192.168.1.5 是我电脑的 IP。

请记住，如果您的路由器动态分配 IP，这可能并不总是有效，因为您的 PC 的 IP 可能会在每次连接到路由器时发生变化。为了解决这个问题，我建议你给你的电脑一个固定的IP（在你的网络范围内）。

之后，调试器应连接并在输出选项卡中显示跟踪。

:-)

# c++ - 在哪里下载适用于 Windows XP 的 Visual C++

> ID：12660808
> 
> 赞同：0
> 
> 时间：2012-09-30T11:16:11.707
> 
> 标签：c++, visual-c++

标题中的所有问题。在过去的一个小时里，我一直在努力得到它。第一次，它以法语出现（[如何在 Microsoft Visual C++ 中更改默认语言](https://stackoverflow.com/questions/12660618/how-to-change-default-language-in-microsoft-visual-c)）。我似乎找不到一个没有免费工具栏和太多病毒的工具，我的电脑会爆炸。*任何人都*可以帮忙吗？

编辑：@log0 得到了答案，并在评论中正确地指出这种问题适合常见问题解答中定义的 SO。我们可以重新打开它（并可能删除反对票）吗？如果您投了反对票，请您在评论中解释原因，以便我纠正这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:18:50.797

Microsoft Visual Studio 2008 Express Editions with SP1，来自 Microsoft 下载中心：

[http://www.microsoft.com/en-us/download/details.aspx?id=14597](http://www.microsoft.com/en-us/download/details.aspx?id=14597)

# php - 在我的 Apache 服务器中，由于某种原因，我似乎无法让 mod_rewrite 工作

> ID：12660812
> 
> 赞同：0
> 
> 时间：2012-09-30T11:17:15.413
> 
> 标签：php, mod-rewrite, apache2

更新 - 更清楚地了解我遇到的 mod_rewrite 失败。在 Apache 中，我在配置文件中有以下设置：

```
 LoadModule rewrite_module modules/mod_rewrite.so

  DocumentRoot "C:/mywebdev/apache/www"
  RewriteEngine On
  Include conf/extra/httpd-vhosts.conf

  <Directory "C:/mywebdev/apache/www">
  Options Indexes FollowSymLinks
  AllowOverride None
  Order allow,deny
  Allow from All
  </Directory> 
```

我的虚拟主机配置中有以下内容

```
 <Directory "C:/mywebdev/apache/www/test">
  Options Indexes FollowSymLinks
  AllowOverride None
  Order allow,deny
  Allow from All
  </Directory>

 <Directory "C:/mywebdev/apache/www/test/.htaccess">
  Options Indexes FollowSymLinks
  AllowOverride None
  Order allow,deny
  Allow from All
  </Directory>

  NameVirtualHost *:80

  <VirtualHost *:80>
  DocumentRoot C:/mywebdev/apache/www/test
  ServerName www.test.me
  ServerAlias test.me *.test.me
  LoadModule rewrite_module modules/mod_rewrite.so
  <IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_URI} !^/library/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
  </IfModule>
  </VirtualHost> 
```

在 .htaccess 文件中我有这个：

```
 <IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_URI} !^/library/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L]
  </IfModule> 
```

我知道这是矫枉过正，但这只是为了表明无论我做什么它都不起作用。我检查了 mod_rewrite.so 是否在模块文件夹中并且它在那里。该模块不适用于此规则或我尝试使用的任何其他 mod_rewrite 规则。从我读过的内容来看，这应该可以工作。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:38:46.593

我不确定，但是，内容：

```
 RewriteEngine On
  RewriteCond %{REQUEST_URI} !^/library/
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.php [L] 
```

应该进入该`.htaccess`文件夹中的文件。如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:42:47.993

在此之间插入您的重写代码

```
<IfModule mod_rewrite.c>CODE</IfModule> 
```

# c# - 将less和css文件捆绑在一起

> ID：12660813
> 
> 赞同：5
> 
> 时间：2012-09-30T11:17:26.800
> 
> 标签：c#, asp.net-mvc-4, less, bundling-and-minification

我觉得捆绑应该用于将您一起使用的一堆文件组合成一个单一的交付给浏览器。这意味着例如对于我的根风格，我想做如下的事情：

```
var bundle = new StyleBundle("~/Content/style").Include(
    "~/Content/mystyle.less",
    "~/Content/bootstrap.css",
    "~/Content/bootstrap-responsive.css");
bundle.Transforms.Add(new LessTransform());
bundle.Transforms.Add(new CssMinify());
bundles.Add(bundle); 
```

但这似乎不适[用于捆绑较少文件的自定义转换技术，](http://codebetter.com/howarddierking/2012/06/04/web-optimization-in-visual-studio-2012-rc/)因为它看起来像是在将所有文件传递给 LessTransform 之前将所有文件预先捆绑到单个 css 文件中。据我所知，此方法仅在您将所有较少的文件捆绑在一起时才有效。

有没有办法让包允许在同一个包中同时使用 less 和 css 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:35:35.210

是的，你是对的，转换器在将所有 CSS/LESS 内容传递给转换器之前将其连接起来。也就是说，转换器不应该同时存在 LESS 和 CSS，因为您始终可以在 LESS 样式表中包含标准 CSS。

问题似乎是您正在使用一个`StyleBundle`已经关联了变压器的对象。`Bundle`尝试像我在配置中那样使用泛型，如下所示：

```
var customStyles = new Bundle("~/bundle/style/css")
                       .Include("~/Content/normalize.css","~/Content/*.less");
bootstrapStyles.Transforms.Add(new LessTransform());
bootstrapStyles.Transforms.Add(new CssMinify());
bundles.Add(customStyles); 
```

至于您自己在下面的答案，bootstrap.css 文件的问题不是 LESS 转换器不喜欢它，而可能是 @imports 的路径问题，请确保您的 LESS 转换器使用某些东西来确保它解析正确的路径到任何依赖样式表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T13:31:12.247

我相信所有的 CSS 都是有效的 LESS（但并非所有的 LESS 都是有效的 CSS）

因此，将其`LessTransform`应用于您的引导 css 文件应该没有任何区别。

它仍然会将所有文件捆绑到一个 css 文件中以传递给浏览器。

**在设计时**可能只存在*性能*问题。

 **仍然会产生正确的输出，并且缓存将防止任何**运行时**性能问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-15T09:58:45.727

我知道这是一个有点旧的帖子，但我注意到一些奇怪的东西可能对某人有用......

当还包含较少的文件时，我发现该`Bundle`对象不喜欢 css 文件名称中的连字符。IE：

```
var frontendStyles = new Bundle("~/bundles/frontend.main.css")
            .IncludeDirectory("~/Content/less", "*.less")
            .Include(
                "~/Content/ladda.css",
                "~/Content/jquery.mobile.custom.structure.min.css",
                "~/Content/jquery-ui.1.9.2.custom.css"
            ); 
```

对我不起作用，但以下操作（更改为 jqueryui 文件名）：

```
var frontendStyles = new Bundle("~/bundles/frontend.main.css")
            .IncludeDirectory("~/Content/less", "*.less")
            .Include(
                "~/Content/ladda.css",
                "~/Content/jquery.mobile.custom.structure.min.css",
                "~/Content/jqueryui.1.9.2.custom.css"
            ); 
```

因此，将文件名从 更改`"~/Content/bootstrap-responsive.css"`为`"~/Content/bootstrapresponsive.css"`可以很好地为您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T01:32:37.920

我对此进行了更多研究，并尝试使用 Bundle 而不是 StyleBundle，但仍然存在问题。我认为这个问题特别与 bootstrap.css 文件有关，它有一些不太喜欢的语法。**

# file-upload - yii 无法上传文件（未设置多部分/表单数据）

> ID：12660820
> 
> 赞同：1
> 
> 时间：2012-09-30T11:18:21.457
> 
> 标签：file-upload, yii, multipartform-data

我无法上传图片，因为表单的 enctype 是`application/x-www-form-urlencoded`. 我使用这段代码：

```
$form=$this->beginWidget('CActiveForm', array(
    'htmlOptions' => array('enctype' => 'multipart/form-data'),
)); 
```

对于少数文件输入：

```
$i = 0;
foreach ($model->scans as $scan) { ?>
    <fieldset>
    ...
    <dd><?php echo $form->fileField($scan,'file_name', array('size'=>'10', 'name'=>get_class($scan).'['.$i.'][file_name]')); ?></dd>
    ...
    </fieldset>
    <?php       $i++;
} ?> 
```

选择一个文件并提交后，我在 Firebug 中看到了 Post 数据：

```
enctype - "application/x-www-form-urlencoded" 
```

和空的 file_name 参数。

```
$_FILES 
```

是空的，所以我无法获取文件。

那么，为什么不`'htmlOptions' => array('enctype' => 'multipart/form-data')`工作？

**更新：** 生成表单的 Html 源是正确的：

```
<form id="yw0" method="post" action="/office/index.php?r=project/profileCreate" enctype="multipart/form-data">
<fieldset>
...
<dd>
<input id="ytProfileScan_0_file_name" type="hidden" name="ProfileScan[0][file_name]" value="">
<input id="ProfileScan_0_file_name" type="file" name="ProfileScan[0][file_name]" size="10">
</dd>
...
</fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:39:57.450

我发现这是 EUpdateDialog 问题（我用来呈现我的表单）。我需要组织ajax上传

# java - 同名嵌套锁

> ID：12660821
> 
> 赞同：0
> 
> 时间：2012-09-30T11:18:25.680
> 
> 标签：java, multithreading, synchronization, mutex

如果我有两个嵌套的锁说（我在这里关注java）</p>

```
synchronized (clientInfMutex) {
...
    synchronized (clientInfMutex) {
        //Will this part executable?

  }

} 
```

内部部分可以执行吗？担心的是当外锁获得锁时，内锁可能无法再次锁定锁。如果内部无法执行，是否有一种机制，如果我已经持有外部锁中的锁，我将能够毫无问题地访问内部锁？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T11:19:39.817

是的。因为线程已经拥有了锁。在 Java 中，本机锁是**可重入的**

每次 JVM 遇到一个同步块时，它都会检查它是否有该锁，如果没有，则等待该锁，否则它会为该锁增加一个内部计数器，并执行封闭的块

请注意，这是假设`clientInfMutex`在两个语句中都指向相同的对象。例如，如果您`clientInfMutex = new Object()`在两个同步块之间执行了 a，那么您的线程将等待新对象的锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:22:52.920

这将工作得很好。如果线程已经通过`synchronized`块获得了锁，它可以多次重新获得。此功能称为[可重入同步](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)。

请注意，如果`this`隐式用作同步器，这也有效：

```
public synchronized void foo() {
    bar();  //will NEVER block
}

public synchronized void bar() {
} 
```

顺便说一句，您的示例中的两个代码块在同一个*object*上同步，而不是与您所称的*名称相同。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:23:11.200

Java 中的每个 Object 实例都拥有一个锁引用。这意味着您使用的双锁实际上只锁定对象一次。这也意味着当您处于被对象锁定的块中时，再次锁定没有任何效果。

# c++ - C++如何在内存中存储函数和对象？

> ID：12660829
> 
> 赞同：9
> 
> 时间：2012-09-30T11:19:43.603
> 
> 标签：c++, function, turbo-c

假设我们有一堂课

```
class A
{
    int x;
public:
    void sayHi()
    {
        cout<<"Hi";
    }
};

int main()
{
    A *a=NULL;
    a->sayHi();
} 
```

上面的代码将在 Turbo C（我测试过的地方）上编译并`Hi`作为输出打印。

我期待崩溃，因为`a`is `NULL`。更重要的是，如果我将`sayHi()`功能设为虚拟，它会说

```
Abnormal temination(Segmentation fault in gcc) 
```

我知道其中很多是依赖于实现的，但是如果有人可以对任何实现有所了解或者只是给出一个概述，那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T11:26:22.510

显然，代码具有未定义的行为，即，无论您得到什么都是偶然的。也就是说，系统在调用非虚拟成员函数时不需要知道对象：它可以根据签名来调用。此外，如果成员函数不需要访问成员，则它根本不需要对象并且可以运行。这是您在代码打印一些输出时观察到的。然而，没有定义这是否是系统实施的方式，即，没有什么说它有效。

当调用虚函数类型系统开始查看与对象关联的类型信息记录。在调用虚拟函数时`NULL`指针上调用虚函数时，不存在此类信息，尝试访问它可能会导致某种崩溃。不过，它不是必须的，但它适用于大多数系统。

顺便说一句，`main()` **总是**返回`int`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T11:25:54.450

在 C++ 中，类的方法不存储在该类的实例中。它们只是一些“特殊”函数，`this`除了程序员指定的参数之外，还透明地接受指针。

在您的情况下，该`sayHi()`方法不引用任何类字段，因此，永远不会遵循`this`指针（即）。`NULL`

毫无疑问，这仍然是未定义的行为。当您调用它时，您的程序可能会选择向您的联系人列表发送讨厌的电子邮件。在这种特殊情况下，它做了最糟糕的事情，并且似乎有效。

自从`virtual`我回答了这个问题后，已经添加了方法案例，但我不会细化我的答案，因为它包含在其他人的答案中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-30T11:42:16.383

作为概括，从没有超类和虚函数的类实例化的对象的布局如下：

```
* - v_ptr  ---> *  pTypeInfo
|               |- pVirtualFuncA
|               |- pVirtualFuncB
|- MemberVariableA
|- MemberVariableB 
```

`v_ptr`是指向 v-table 的指针 - 其中包含对象的虚函数地址和 RTTI 数据。没有虚函数的类没有 v-tables。

在上面的示例中，`class A`没有虚拟方法，因此没有 v-table。这意味着`sayHi()`to call 的实现可以在编译时确定并且是不变的。

编译器生成将隐式`this`指针设置为的代码，`a`然后跳转到`sayHi()`. 由于实现不需要对象的内容，因此它在指针为时工作的事实`NULL`是一个幸运的巧合。

如果要进行`sayHi()`虚拟化，编译器无法确定要在编译时调用的实现，因此会生成在 v-table 中查找函数地址并调用它的代码。在您的示例 where `a`is`NULL`中，编译器读取 address 的内容`0`，导致中止。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T11:26:48.900

如果您调用类的非虚拟方法，对于编译器来说，知道该函数属于哪个类就足够了，并且通过取消引用（尽管是 NULL）指向调用该方法的类的指针，编译器会获取该信息。**sayHi()**方法几乎只是一个将指向类实例的指针作为隐藏参数的函数。此指针为 NULL，但如果您不引用该方法中的任何属性，则无关紧要。

当你把这个方法变成虚拟的时候，情况就发生了变化。编译器在编译时不再知道与该方法关联的代码是什么，必须在运行时弄清楚。它的作用是查看一个表，该表基本上包含所有虚拟方法的函数指针；该表与类实例相关联，因此它查看相对于 NULL 指针的内存片段，因此在这种情况下崩溃。

# .net - .net 基于程序集的数据库

> ID：12660831
> 
> 赞同：0
> 
> 时间：2012-09-30T11:19:56.647
> 
> 标签：.net, database, c#-4.0, orm

服务器应用程序开发中的一项常见任务是从数据库中检索数据并将它们映射到 OO 语言对象。为什么我们不应该将数据存储在表示中，以便于运行时环境？我们可以创建、更新、加载和卸载 .net 程序集。只有我们需要 - 创建程序集管理器来控制所有带有数据的程序集（在一台机器上或集群中）。我知道，反射的工作非常缓慢，但这个想法的灵感来自 prolog 语言集成数据库。描述的数据库架构是否适合实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T12:03:42.567

程序集仅包含结构（类型信息）和代码，但不包含您实际实例化的对象。

如果加载程序集，从其中定义的类型创建对象，程序集本身不会被修改 - 对象存在于进程的内存中，而不是程序集中。

# jquery - 删除之前的ajax调用结果？

> ID：12660836
> 
> 赞同：2
> 
> 时间：2012-09-30T11:20:42.467
> 
> 标签：jquery, ajax

我正在使用 jquery，并且我有 2 个 ajax 调用函数。当我调用第一个 ajax 请求时，结果将显示在 div id="result" 处。然后我调用第二个 ajax，我希望它也显示在 div id="result" 并替换从第一个 ajax 返回的先前结果。从我的测试来看，我仍然能够在浏览器开发者工具下看到之前的结果。

第二个问题是，如果重复点击是否会导致内存泄漏？

```
$.ajax({
  url: "ajax/func1",
  type: "post"
});

$.ajax({
  url: "ajax/func2",
  type: "post"
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:28:17.570

Javascript 本质上是单线程的，因此您的调用永远不会发生冲突或导致内存泄漏。但是，时间尚未确定。第一个完成的调用将首先执行。

换句话说，所有异步回调都将在同一个线程上按顺序发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:29:48.507

### 然后我调用第二个 ajax，我希望它也显示在 div id="result" 并替换从第一个 ajax 返回的先前结果。

使用该`html()`方法应该每次都将内容替换为返回的结果。`done`例如，您可以在回调中将结果分配给您的 div 。

```
$.ajax({
  url: "ajax/func1",
  type: "post"
}).done(function(result) { 
  $("#result").html(result);
});

$.ajax({
  url: "ajax/func2",
  type: "post"
}).done(function(result) { 
  $("#result").html(result);
}); 
```

`done`基本相同，但如果我正确理解[**文档**](http://api.jquery.com/jQuery.ajax/)`success`中的注释，可能很快就会被弃用。[](http://api.jquery.com/jQuery.ajax/)

 **> **弃用通知**：jqXHR.success()、jqXHR.error() 和 jqXHR.complete() 回调将在 jQuery 1.8 中弃用。要为最终删除准备代码，请改用 jqXHR.done()、jqXHR.fail() 和 jqXHR.always()。

### 如果重复点击是否会导致内存泄漏？

不，它不应该导致内存泄漏。所有请求都应该一个接一个地执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T11:31:10.400

如果有两个 ajax 异步请求，第二个请求可以在您的第一个请求之前完成。在这种情况下，您最终会看到第一个结果。您应该在第一个请求的成功回调中调用第二个 ajax 请求。例如：

```
 $.ajax({
  url:'someurl',
  type:'post'
  success: function(){
  // Insert smth in result div
  // call second ajax request
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-13T04:57:05.117

您可以在第二个结果之前使用 .html(' ') - 带有空字符串的 html 函数，它将第一个结果替换为空，然后将替换第二个 ajax 调用的结果。

以下是代码：

$.ajax({

网址：'someurl'，

类型：'发布'

成功：函数（）{

$("#result").html(结果);

}

});

$.ajax({

网址：“ajax/func2”，

类型：“帖子”

成功：函数（）{

$("#result").html(' ');

$("#result").html(结果);

}

});**

# git - 仅针对某些文件/提交的拉取请求

> ID：12660839
> 
> 赞同：70
> 
> 时间：2012-09-30T11:20:59.987
> 
> 标签：git, github, git-commit, pull-request

[我有一个从GitHub](http://www.github.com/)派生的存储库，对它进行了一些修改。但是，在某个提交中，我想要提交拉取请求的一些文件被更改，而其他修改的文件不在请求中。

拉取请求会合并*所有*提交，还是我需要做一些特殊的事情来隔离这个提交？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-30T11:29:30.057

由整个提交组成的拉取请求，您需要将此提交拆分为两个单独的提交，一个包含要放入拉取请求的更改，另一个包含其他更改。为此，您需要`git rebase -i`，例如查看[如何拆分隐藏在历史中的 Git 提交？](https://stackoverflow.com/q/4307095/11343)关于如何做的一个很好的解释。

拆分提交后，将要包含的提交移动到主题分支中，例如参见[如何将某些提交移动到 git 中的另一个分支？](https://stackoverflow.com/q/2369426/11343)，但这取决于发出拉取请求的提交是否是顺序的。

最后，您可以推送到 Github 并从您的主题分支创建拉取请求。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-30T11:23:43.700

拉取请求合并分支。因此，如果您想为拉取请求隔离某些内容，最好将这些更改放在单独的分支中。

优点是您可以通过将新更改推送到该分支来更改拉取请求（如果您需要更改已推送的提交，甚至可以 push -f）。

# vb.net - 制作我的 POS：DataGridview 上的错误

> ID：12660841
> 
> 赞同：0
> 
> 时间：2012-09-30T11:21:01.953
> 
> 标签：vb.net, datagridview, odbc

我正在尝试用VB.NET 制作一个简单的POS 系统，但是由于我不知道如何开始，所以我要求我的朋友给我示例源代码。我计划在我的数据库中使用 MySQL 而不是 Microsoft Access，因为我们学校使用它。以下是源代码的示例代码：

```
Public Sub FillDGVWithReceiptInfo(ByVal DGV As DataGridView)
        DGV.Rows.Clear()
        Dim TA As New POSDSTableAdapters.ItemsTableAdapter

        For i = 0 To Me.ReceiptDetailsList.Count - 1
            Dim T1 = Me.ReceiptDetailsList(i).Barcode
            Dim T2 = Me.ReceiptDetailsList(i).ItemBuyPrice
            Dim T3 = Me.ReceiptDetailsList(i).ItemCount
            Dim T4 = Me.ReceiptDetailsList(i).ItemSellPrice
            Dim T5 = T3 * T4
            Dim T6 = TA.GetDataByBarcode(T1).Rows(0).Item("ItemName")

            DGV.Rows.Add(T1, T6, T2, T4, T3, T5)

        Next
    End Sub 
```

我正在尝试将其转换为“OdBC”类型的格式。所以我想出了这个（也是，这是我得到一些错误的部分）：

```
 Public Sub FillDGVWithReceiptInfo(ByVal DGV As DataGridView)
        DGV.Rows.Clear()

        For i = 0 To Me.ReceiptDetailsList.Count - 1
            Dim T1 = Me.ReceiptDetailsList(i).ganoProdID
            Dim T3 = Me.ReceiptDetailsList(i).ItemCount
            Dim T4 = Me.ReceiptDetailsList(i).ganoItemPrice
            Dim T5 = T3 * T4

            Dim TA As New OdbcDataAdapter("SELECT * FROM gano_inventory WHERE gano_proID = " & T1 & ";", conn)
            Dim R As New DataTable
            TA.Fill(R)

            Dim T6 = R.Rows(0).Item("gano_item")

            DGV.Rows.Add(T1, T6, T4, T3, T5)

        Next
    End Sub 
```

这是代码的错误： *不能将行添加到没有列的 DataGridView 控件。必须先添加列。*在这一行： **DGV.Rows.Add(T1, T6, T4, T3, T5)**

有人可以帮我吗？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T21:27:31.370

您需要在添加行之前创建列。

```
DGV.Columns.Add("ProdId")
DGV.Columns.Add("Item")
DGV.Columns.Add("ItemPrice")
DGV.Columns.Add("ItemCount")
DGV.Columns.Add("Total") 
```

...

```
For i = 0 ...
  DGV.Rows.Add(... 
```

# java - 带有 ScrolledComposite 的 Jface 对话框

> ID：12660842
> 
> 赞同：1
> 
> 时间：2012-09-30T11:21:17.663
> 
> 标签：java, eclipse, swt, jface

我正在尝试在我的对话窗口中显示可滚动的合成。

但它没有滚动条。我也没有得到“确定”“取消”按钮。

如何解决？

```
public class MyDialog extends Dialog {

  public MyDialog (Shell parentShell) {
    super(parentShell);     
  }

   protected void configureShell(Shell newShell) {
    super.configureShell(newShell);
    newShell.setText("test");
    newShell.setSize(200, 100);
  }

  protected Control createDialogArea(Composite parent) {
         ScrolledComposite sc = new ScrolledComposite(parent, SWT.H_SCROLL |    SWT.V_SCROLL | SWT.BORDER);

    Composite composite = new Composite(sc, SWT.NONE);
    composite.setLayout(new FillLayout(SWT.VERTICAL));

    new Label(composite, SWT.NONE).setText("1111");
    new Label(composite, SWT.NONE).setText("2222");
    new Label(composite, SWT.NONE).setText("3333");
    new Label(composite, SWT.NONE).setText("4444");
    new Label(composite, SWT.NONE).setText("5555");
    new Label(composite, SWT.NONE).setText("6666");
    new Label(composite, SWT.NONE).setText("7777");

    sc.setContent(composite);
    sc.setExpandHorizontal(true);
    sc.setExpandVertical(true);

    return parent;  

  } 
```

![在此处输入图像描述](../Images/a6d6a544e998316c877f26ec35132b8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:42:59.280

好的，所以我几乎让它工作了。但是，在底部有一些空白区域，对话框按钮所在的位置。如果这不打扰您，或者您要添加按钮，下面的代码将满足您的需求。如果没有，我不知道如何帮助你。

```
public class MyDialog extends Dialog
{

    protected MyDialog(Shell parentShell) {
        super(parentShell);
    }

    protected void configureShell(Shell newShell) {
        super.configureShell(newShell);
        newShell.setText("test");
        newShell.setSize(200, 100);
    }

    protected void createButtonsForButtonBar(Composite parent) {
    }

    protected Control createDialogArea(Composite parent) {
        Composite content = (Composite) super.createDialogArea(parent);
        content.setLayout(new FillLayout());

        ScrolledComposite sc = new ScrolledComposite(content, SWT.H_SCROLL
                | SWT.V_SCROLL | SWT.BORDER);

        Composite composite = new Composite(sc, SWT.NONE);
        composite.setLayout(new FillLayout(SWT.VERTICAL));

        new Label(composite, SWT.NONE).setText("1111");
        new Label(composite, SWT.NONE).setText("2222");
        new Label(composite, SWT.NONE).setText("3333");
        new Label(composite, SWT.NONE).setText("4444");
        new Label(composite, SWT.NONE).setText("5555");
        new Label(composite, SWT.NONE).setText("6666");
        new Label(composite, SWT.NONE).setText("7777");

        sc.setContent(composite);
        sc.setExpandHorizontal(true);
        sc.setExpandVertical(true);
        sc.setMinSize(composite.computeSize(SWT.DEFAULT, SWT.DEFAULT));

        return parent; 
      }
} 
```

![在此处输入图像描述](../Images/2dbac7f65fe5137e8b6d566f14b63c90.png)

但是，我假设您将使用对话框按钮。否则，您可以简单地使用带有复合材料的外壳，如我之前发布的示例中所示...

# c++ - T 和 T const 上的模板函数实例化的地址

> ID：12660845
> 
> 赞同：2
> 
> 时间：2012-09-30T11:21:35.633
> 
> 标签：c++, function-pointers, instantiation, function-templates

在以下设置中是否有可能

```
template <typename T>
inline void id() {
    //...
}

template <typename T>
bool check() {
    return &id<T> == &id<T const>;
} 
```

`check`会回来`true`一些`T`吗？这是否取决于内部正在做什么`id`？标准对此有何规定？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T11:29:03.463

当然。尝试`const int`或`int&`或`void()`。

* * *

如果您通过一个或一个模板参数获得多个顶级`const`限定符，则有一条规则会*崩溃*`typedef`，这意味着`check<int const>()`将返回`true`。

[规范性文本待定]

`const`然后有一条规则会忽略它不起作用的事物的顶层，例如引用或函数类型。这意味着`check<int&>`并将`check<int()>`返回`true`。

`§8.3.2 [dcl.ref] p1`

> cv 限定引用格式错误，除非通过使用 typedef (7.1.3) 或模板类型参数 (14.3) 引入 cv 限定符，**在这种情况下忽略 cv 限定符**。

和

`§4.4 [conv.qual] p3`

> [*注意：*函数类型（包括那些在指向成员函数类型的指针中使用的）永远不是 cv 限定的（8.3.5）。*——尾注*]

`§8.5.3 [dcl.fct] p6`

> *函数声明器中cv-qualifier-seq*的效果与在函数类型之上添加 cv-qualification 不同。**在后一种情况下，将忽略 cv 限定符。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T11:32:05.843

我希望这些功能是不相等的。该标准绝对不**要求**它们相同，尽管我怀疑它允许它们相同（我不太知道在哪里寻找相应的子句）。

# ios - 在文件 xcode ios 中保存变量的值

> ID：12660846
> 
> 赞同：0
> 
> 时间：2012-09-30T11:21:39.580
> 
> 标签：ios, xcode, saving-data

我有一个保存taxtfield日期的例子

```
- (NSString *) getFilePath {
    NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[pathArray objectAtIndex:0] stringByAppendingPathComponent:@"saved.plist"];
}

 -(void) saveData {
    NSArray *value = [[NSArray alloc] initWithObjects:[myTextField text],nil];
    [value writeToFile:[self getFilePath] atomically:YES];
} 
```

但是如何将变量的值保存在文件中？

```
NSInteger = record1, record2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:19:43.400

此外，如果您不想写入特定文件，请`NSUserDefaults`使用方法检查类`– setInteger:forKey:`并`– integerForKey:`存储和检索整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:28:31.340

`NSInteger`不是 Objective-C 类型，但您可以将其转换为`NSNumber`以将其存储在数组（或字典）中：

```
NSInteger record1 = 17, record2 = 23;
NSNumber *number1 = [NSNumber numberWithInteger:record1];
NSNumber *number2 = [NSNumber numberWithInteger:record2]; 
```

从 Xcode 4.4 开始，您还可以使用“盒装表达式”语法：

```
NSNumber *number1 = @(record1); 
```

现在您可以将数字放入数组中：

```
NSArray *arrayToSave = [[NSArray alloc] initWithObjects:number1, number2, nil];
[arrayToSave writeToFile:[self getFilePath] atomically:YES]; 
```

您还应该考虑使用字典而不是数组来存储各种值，例如（再次使用装箱表达式）：

```
NSDictionary *dictToSave = @{
    @"value1" : number1,
    @"value2" : number2,
    @"textField" : [myTextField text]
};
[dictToSave writeToFile:[self getFilePath] atomically:YES]; 
```

# java - 订阅没有内联实现的按钮点击

> ID：12660847
> 
> 赞同：0
> 
> 时间：2012-09-30T11:21:40.357
> 
> 标签：java, android, event-handling

```
public void onCreate(Bundle savedInstanceState) {
    ...
    btn_client_connect.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View v) {
            // inline implementation goes here ...
        }
} 
```

我想将内联实现移动到单独的函数，保持 onCreate 函数简短易读：

```
    私人无效OnBtnConnectClick（查看v）{
        // 执行...
    }

```

现在我需要使用以下方式订阅按钮单击：

```
btn_client_connect.setOnClickListener(this.OnBtnConnectClick);

```

但这不是编译的。我只有这个丑陋的解决方案：

```
btn_client_connect.setOnClickListener(new Button.OnClickListener()
{
    public void onClick(查看 v)
    {
        OnBtnConnectClick(v);
    }
});

```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:36:45.200

```
protected void onCreate(Bundle bundle){
   btn = findview....
   btn.setOnClickListener(buttonClcikListener);
}

private View.OnClickListener buttonClcikListener = new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // your code here 
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:33:31.097

方法不是 Java 中的对象，因此您不能这样做。

您可以做的是创建一个私有内部类（或单独的类，由您决定）：

```
private class MyListener implements OnClickListener {
    public void onClick(View v) 
    {
        OnBtnConnectClick(v);
    }
} 
```

然后做

```
this.onBtnConnectClick = new MyListener();
btn_client_connect.setOnClickListener(this.onBtnConnectClick); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T11:34:57.573

如果您在 XML 中创建布局，则可以`android:onClick`使用`Button`. 您需要定义一个方法的名称：

```
android:onClick="onClick" 
```

并在您的内部实现此方法`Activity`：

```
public void onClick(View v) {
  switch(v.getId()) {
    ...
  }
} 
```

无需额外的代码。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T11:35:12.247

有几种方法可以做到这一点：

```
btn_client_connect.setOnClickListener(getButtonListener()); 
```

然后该方法看起来像：

```
public OnClickListener getButtonListener(){
    return new OnClickListener() {
        public void onClick(View v) {
            // inline implementation goes here ...
            OnBtnConnectClick(v);
        }
} 
```

或者另一种方法：

```
btn_client_connect.setOnClickListener(new SomeButtonListener()); 
```

然后那个类看起来像：

```
public (or private) class SomeButtonListener implements OnClickListener {
     public void onClick(View v) {
            // inline implementation goes here ...
            OnBtnConnectClick(v);
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T11:35:24.967

还有其他方法可以设置`Click Listeners`为一种

您只需输入 xml

`android:onClick="OnBtnConnectClick"`

和其他`Keppil`建议

```
myButton.setOnClickListener(new myClickListener());

public class myClickListener implements OnClickListener {

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-30T11:41:44.760

您可以定义`Method`在您的 XML 中单击时执行的按钮（或视图），

阅读更多[http://smartcloudblog.blogspot.com/2011/09/android-onclicklisteners-vs.html](http://smartcloudblog.blogspot.com/2011/09/android-onclicklisteners-vs.html)

# google-apps-script - Google Sies API-如何通过 2-legged oAuth 获取用户的站点名称

> ID：12660848
> 
> 赞同：1
> 
> 时间：2012-09-30T11:21:43.027
> 
> 标签：google-apps-script, google-apps

我是管理员用户。我想知道在谷歌应用程序中使用 2-legged oAuth 的所有用户的站点名称。我能够获取域中的所有站点名称，但未指定哪个站点由哪个用户创建。

```
var url='https://sites.google.com/feeds/site/domain.com/?include-all-sites=true'
  var urlFetch = UrlFetchApp.fetch(url,fetchArgs) 
```

此代码用于获取域中的所有站点。有什么方法可以找到特定用户的网站名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:11:34.047

不幸的是，Apps 脚本不支持 2-legged OAuth 模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:41:56.893

您可以留在原生 Apps 脚本中并使用 getAllSites 方法。

```
SitesApp.getAllSites(domain, start, max) 
```

它没有记录，但[您可以找到对它的引用，](http://www.google.com/search?q=%22sitesapp.getallsites%22)而且我有每天使用它的生产脚本。

然后，您可以使用`Site#getOwners`来获取站点的所有者。我的网站 UI 使用此信息向用户显示网站。

# java - 如何限制 Nexus 中部署的快照工件的数量？

> ID：12660850
> 
> 赞同：32
> 
> 时间：2012-09-30T11:22:06.837
> 
> 标签：java, maven, nexus

我们正在使用 Nexus 来部署我们的快照工件。我们的构建服务器在每次构建期间使用以下命令部署它们：mvn deploy。结果，在每次构建时，都会部署较新版本的工件。已经将大约几十个工件部署到存储库的问题当然我们只需要最后一个工件。有什么方法可以限制 Nexus 中部署的快照工件的数量吗？谢谢你的帮助，迈克尔

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-30T14:16:25.243

创建计划任务以清除旧快照。

以下链接描述了该功能：

*   [Nexus 计划任务](http://www.sonatype.com/people/2009/09/nexus-scheduled-tasks/)
*   [管理计划任务 - Repository Manager 2](https://help.sonatype.com/repomanager2/configuration/managing-scheduled-tasks)
*   [任务类型和何时使用它们 - Repository Manager 3](https://help.sonatype.com/repomanager3/system-configuration/tasks#Tasks-TypesofTasksandWhentoUseThem)（任务“Maven - 删除 SNAPSHOT”）

您可以将任务配置为始终保留最少数量的工件。它非常灵活。

Repository Manager 版本 2 中唯一的“陷阱”是，您还需要运行第二个任务*Empty Trash*才能收回磁盘空间。对于版本 3，您将需要运行*紧凑 blob 存储*以确保删除将返回磁盘空间。请参阅上面的文档。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-04-07T09:44:21.720

如果您在 Nexus 中具有管理员访问权限，那么，

1.  登录到 Nexus。

2.  浏览到管理。

3.  转到计划任务。

4.  您可以添加任务：删除旧快照。

5.  选择任务类型作为从存储库中删除快照。

6.  您可以根据需要定义最小快照计数或快照保留。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T11:38:38.883

我怀疑不是。[http://weblogs.java.net/blog/johnsmart/archive/2010/01/03/tale-two-repository-managers-nexus-and-artifactory-compared-and-co](http://weblogs.java.net/blog/johnsmart/archive/2010/01/03/tale-two-repository-managers-nexus-and-artifactory-compared-and-co)

> Artifactory [...] 还允许您限制每个存储库的每个工件的快照数量。

这与 Nexus 相矛盾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-17T22:54:55.540

使用 Nexus OSS 3.x 有：

*   *删除未使用的 SNAPSHOT 任务*- 没有人访问 SNAPSHOT X 天
*   *删除 SNAPSHOT 任务*- 只留下最后 N 个 SNAPSHOTS

每个任务都有：

*   克朗
*   要应用的存储库列表

# c - /etc/shadow 上使用的加密方法是什么？

> ID：12660851
> 
> 赞同：19
> 
> 时间：2012-09-30T11:22:07.833
> 
> 标签：c, linux, encryption

在 GNU/Linux 系统上的 /etc/shadow 上使用哪种加密方法？我想为个人目的编写一个使用相同 API 的小程序，但目前我不知道从哪里开始。

提前致谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-30T11:35:46.947

使用该[`crypt(3)`](http://man7.org/linux/man-pages/man3/crypt.3.html)功能。在 glibc 上，使用的方法取决于盐，如果它以：

*   $1$：它使用 MD5。
*   5 美元：它使用 SHA-256。
*   6 美元：它使用 SHA-512。
*   $2a$：它使用河豚，并非所有地方都支持。
*   否则它使用 DES。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T11:38:38.120

glibc 中提供了多种加密方法，请参阅 man 3 crypt，Glibc 注释部分： http: [//manpages.courier-mta.org/htmlman3/crypt.3.html](http://manpages.courier-mta.org/htmlman3/crypt.3.html)

验证现有密码时，只需将加密形式作为盐传递；只会使用最初的 $id$salt 部分。创建新密码时，使用您需要的任何内容初始化 id 并将一些随机字符放入 salt 中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-30T13:03:02.847

crypt() 的基本示例

```
#include <stdio.h>
#include <stdlib.h>

#define MAX_STR 256
#define MAX_SALT 12

int main(int argc, char *argv[]) {
    char password[MAX_STR];
    char salt[MAX_SALT];

    printf("salt: ");
    scanf("%s", salt);

    printf("password: ");
    scanf("%s", password);

    printf("Encrypt '%s' : '%s'\n", password, crypt(password, salt));

    return(EXIT_SUCCESS);
} 
```

编译程序：

```
$ gcc -lcrypt test.c 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-03-27T08:43:56.800

我收到

> 对“crypt”的未定义引用

所以我认为你应该编译

`$ gcc test.c -lcrypt`

# scala - 为什么 Scala 中的柯里化需要多个参数列表？

> ID：12660852
> 
> 赞同：10
> 
> 时间：2012-09-30T11:22:08.690
> 
> 标签：scala

假设我有一个需要部分应用的 2 个参数的函数，我需要将其定义为：

```
def f(a: Int)(b: Int) = { /* some code */ } 
```

然后我可以部分应用它`def fWithA = f(a) _`

我的问题是：为了 curry 一个函数，为什么 Scala 要求使用多个参数列表声明参数？最好能够根据需要 curry 任何函数。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-30T11:26:56.277

实际上，您可以部分应用您想要的任何方法。只需调用该方法并省略参数：

```
scala> def foo(a: Int, b: Int) = a*b
foo: (a: Int, b: Int)Int

scala> val x = foo(1,_: Int)
x: Int => Int = <function1>

scala> def bar(x: Int, y: Int, z: Int) = x*y+z
bar: (x: Int, y: Int, z: Int)Int

scala> bar(2,_:Int,6)
res0: Int => Int = <function1> 
```

唯一的区别是，您必须告诉编译器缺少参数的类型，否则它无法在重载方法之间做出决定。

另一种方法，如果你有一个真正的函数而不是一个方法，那就是调用`curried`这个函数：

```
scala> val f = {(x:Int, y:Int) => x*y}
f: (Int, Int) => Int = <function2>

scala> f.curried
res2: Int => (Int => Int) = <function1> 
```

您还可以使用以下方法从方法创建函数`_`：

```
scala> bar _
res6: (Int, Int, Int) => Int = <function3> 
```

然后调用`curried`它：

```
scala> (bar _).curried
res5: Int => (Int => (Int => Int)) = <function1> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-30T11:56:41.970

“真正的”柯里化需要 Scala 中的多个参数列表的几个原因：

*   超载。与纯函数式语言不同，在 Scala 中，您可以重载方法。如果您部分应用一个函数，编译器可能无法区分您的意思是哪个重载。该规范将重载分辨率限制为第一个参数列表。

*   错误信息。“方法调用的参数不足”是一个非常有用（且易于理解）的错误消息。如果允许对任何方法进行柯里化，则错误消息将是“必需的：但“具有许多箭头的某些函数类型”类型。

*   表现。在 JVM 上运行使得调用方法非常高效，而函数（通过接口调用）速度较慢。

# iphone - UIWebView 电影播放器 被解雇 iOS 6 错误

> ID：12660857
> 
> 赞同：4
> 
> 时间：2012-09-30T11:22:29.530
> 
> 标签：iphone, ios, uiwebview, mpmovieplayercontroller, ios6

当我尝试在 a 中启动要播放的视频（通过 YouTube）时`UIWebView`，视频会打开，然后调试器会说：

```
[MPAVController] Autoplay: Enabling autoplay
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1) 
```

这是一个类似的问题：[MPMoviePlayerController 几秒钟后停止播放](https://stackoverflow.com/questions/12556764/mpmovieplayercontroller-stops-playing-after-a-few-seconds-this-is-the-code-im-u)

我唯一的问题是使用 a `UIWebView`，我无法设置`MPMoviePlayerController`to `prepareToPlay`。至少据我所知不是。如果有人可以帮助解决这个问题，那就太棒了！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T06:08:10.430

我在 iOS 6 中也遇到过类似的问题。这背后的原因是，当在 iOS6 版本以外的版本中播放 YouTube 视频时，没有调用**viewWillDisappear**方法。但在 iOS6 中，每次播放 YouTube 视频时都会调用此方法。这可能是操作系统级别的错误，但我不确定。

但是，我已经修复了它，步骤如下。

添加全屏进入和退出通知，使用布尔属性，并相应地更新它。

```
// Notification when the player moves to full screen

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(youTubeVideofullScreen:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];

// Notification when the player exit from full screen.

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(youTubeVideoExit:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil]; 
```

```
 - (void)youTubeVideofullScreen:(id)sender {
      //Update flag.
      isFullscreen = TRUE;
 }

 - (void)youTubeVideoExit:(id)sender {
        //Update flag.
        isFullscreen = FALSE;
  }

 - (void)viewWillDisappear:(BOOL)animated {
    //Now you can use that flag and avoid the code execution which is interrupting the video

      if(!isFullscreen) {
       [super viewWillDisappear:animated]; 

       }
  } 
```

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T18:42:21.040

我刚刚在我们的一个应用程序中遇到了同样的问题。原来我们将 .html 中`UIWebView`的 HTML 设置为空字符串`-(void)viewWillDisappear`。显然，现在在 iOS 6 中显示来自 的全屏视频时会调用此方法`UIWebView`，因此这可能就是您的问题所在。

# php - 如何在ajax成功时调用外部javascript函数

> ID：12660860
> 
> 赞同：0
> 
> 时间：2012-09-30T11:22:53.823
> 
> 标签：php, jquery

我在 php 文件和 onUploadComplete 中使用以下 jquery/ajax 代码我想调用位于外部 js 文件中的函数 totalprice()（js 文件已加载）。

现在控制台抛出错误：Uncaught ReferenceError: totalprice is not defined

在这种情况下，如何定义函数 totalprice()？

PHP 文件：

```
<script type="text/javascript">
<?php $timestamp = time();?>
$(function() {
    $('#file_upload').uploadifive({
        'auto'              : true,
        'height'            : 30,
        'width'             : 180,
        'multi'             : false,
        'removeCompleted'   : true,
        'fileSizeLimit'     : 6000,
        'buttonText'        : 'Choose your image',
        'formData'          : {
            'timestamp'     : '<?php echo $timestamp;?>',
            'token'         : '<?php echo md5('unique_salt' . $timestamp);?>'
        },
        'queueID'          : 'queue',
        'uploadScript'     : '/inc/conf_user_uploader/uploader.php',
        'onUploadComplete' : function(file, data) {
             console.log(data);
            $('.pane').load('/conf_upload_image.php');
            $('.label-bodyprintImage').html('Custom image');
            $('.price-bodyprintImage').html( $('input:[name=customImagePrice]').val() );
            totalprice();
        }
    });

});

</script> 
```

JS文件：

```
function totalprice() {

var sum = 0;

sum =   Number($('.price-bodyImage').text()) 
        + Number($('.price-waistbandImage').text())
        + Number($('.price-collarImage').text())   
        + Number($('.price-standupcollarImage').text())  
        + Number($('.price-leftsleeveImage').text())  
        + Number($('.price-leftsleevecuffImage').text()) 
        + Number($('.price-rightsleeveImage').text())   
        + Number($('.price-rightsleevecuffImage').text())  
        + Number($('.price-hoodImage').text())  
        + Number($('.price-bodyprintImage').text())  
        + Number($('.price-leftsleeveprintImage').text())  
        + Number($('.price-rightsleeveprintImag').text())                   
        ;

$('.price-totalprice').html(sum);

} 
```

# iphone - 使用 avaudioplayer 从 iPod 音乐库播放 .m4a 文件

> ID：12660863
> 
> 赞同：1
> 
> 时间：2012-09-30T11:23:16.803
> 
> 标签：iphone, ios, export, avaudioplayer, m4a

有谁知道如何使用 AVAudioPlayer 从 iPhone 的 iPod 音乐库中播放选定的 .m4a 文件？是否可以将文件导出或复制到 iPhone 的本地 Documents 目录？任何人都可以分享任何示例代码来成功处理这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T12:43:08.623

无法使用 avaudioplayer 播放音乐库中的音乐。也没有办法将文件从音乐库复制到应用程序的本地路径。如果您使用 avplayer，您可以访问音乐库。

# python - Python中“in”的关联性？

> ID：12660870
> 
> 赞同：109
> 
> 时间：2012-09-30T11:24:52.733
> 
> 标签：python, syntax

我正在制作一个 Python 解析器，这*真的*让我很困惑：

```
>>> 1 in [] in 'a'
False

>>> (1 in []) in 'a'
TypeError: 'in <string>' requires string as left operand, not bool

>>> 1 in ([] in 'a')
TypeError: 'in <string>' requires string as left operand, not list 
```

`in`在关联性等方面，Python究竟是如何工作的？

为什么这些表达式中没有两个表现相同？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-09-30T11:35:18.787

`1 in [] in 'a'`被评估为`(1 in []) and ([] in 'a')`.¹

由于第一个条件 ( `1 in []`) 是`False`，因此整个条件被评估为`False`; `([] in 'a')`从未实际评估过，因此不会引发错误。

我们可以看到 Python 如何使用[`dis`模块](https://docs.python.org/3/library/dis.html)执行每条语句：

```
>>> from dis import dis
>>> dis("1 in [] in 'a'")
  1           0 LOAD_CONST               0 (1)
              2 BUILD_LIST               0
              4 DUP_TOP
              6 ROT_THREE
              8 CONTAINS_OP              0        # `in` is the contains operator
             10 JUMP_IF_FALSE_OR_POP    18        # skip to 18 if the first 
                                                  # comparison is false
             12 LOAD_CONST               1 ('a')  # 12-16 are never executed
             14 CONTAINS_OP              0        # so no error here (14)
             16 RETURN_VALUE
        >>   18 ROT_TWO
             20 POP_TOP
             22 RETURN_VALUE
>>> dis("(1 in []) in 'a'")
  1           0 LOAD_CONST               0 (1)
              2 LOAD_CONST               1 (())
              4 CONTAINS_OP              0        # perform 1 in []
              6 LOAD_CONST               2 ('a')  # now load 'a'
              8 CONTAINS_OP              0        # check if result of (1 in []) is in 'a'
                                                  # throws Error because (False in 'a')
                                                  # is a TypeError
             10 RETURN_VALUE
>>> dis("1 in ([] in 'a')")
  1           0 LOAD_CONST               0 (1)
              2 BUILD_LIST               0
              4 LOAD_CONST               1 ('a')
              6 CONTAINS_OP              0        # perform ([] in 'a'), which is 
                                                  # incorrect, so it throws a TypeError
              8 CONTAINS_OP              0        # if no Error then this would 
                                                  # check if 1 is in the result of ([] in 'a')
             10 RETURN_VALUE 
```

* * *

1.  除了`[]`只评估一次。在此示例中这无关紧要，但如果您（例如）替换`[]`为返回列表的函数，则该函数只会被调用一次（最多）。[该文档](https://docs.python.org/3/reference/expressions.html#comparisons)也解释了这一点。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-09-30T11:41:59.630

Python 通过链式比较做了一些特殊的事情。

以下是不同的评估：

```
x > y > z   # in this case, if x > y evaluates to true, then
            # the value of y is used, again, and compared with z

(x > y) > z # the parenthesized form, on the other hand, will first
            # evaluate x > y. And, compare the evaluated result
            # with z, which can be "True > z" or "False > z" 
```

但是，在这两种情况下，如果第一个比较是`False`，则不会查看语句的其余部分。

对于您的特定情况，

```
1 in [] in 'a'   # this is false because 1 is not in []

(1 in []) in a   # this gives an error because we are
                 # essentially doing this: False in 'a'

1 in ([] in 'a') # this fails because you cannot do
                 # [] in 'a' 
```

同样为了演示上面的第一条规则，这些是评估为 True 的语句。

```
1 in [1,2] in [4,[1,2]] # But "1 in [4,[1,2]]" is False

2 < 4 > 1               # and note "2 < 1" is also not true 
```

Python 运算符的优先级：[https ://docs.python.org/3/reference/expressions.html#comparisons](https://docs.python.org/3/reference/expressions.html#comparisons)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-30T12:06:45.287

[从文档中：](http://docs.python.org/reference/expressions.html#not-in)

> 比较可以任意链接，例如，x < y <= z 等价于 x < y 和 y <= z，除了 y 只计算一次（但在这两种情况下，当找到 x < y 时根本不计算 z是假的）。

这意味着，没有关联性`x in y in z`！

以下是等价的：

```
1 in  []  in 'a'
# <=>
middle = []
#            False          not evaluated
result = (1 in middle) and (middle in 'a')

(1 in  []) in 'a'
# <=>
lhs = (1 in []) # False
result = lhs in 'a' # False in 'a' - TypeError

1 in  ([] in 'a')
# <=>
rhs = ([] in 'a') # TypeError
result = 1 in rhs 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-30T19:16:38.417

简短的回答，因为 long 已经在这里多次给出并且以极好的方式给出，是 boolean 表达式是 **short-circuited**，当进一步评估不能发生 true 到 false 的变化或反之亦然时，这已经停止评估。

（见[http://en.wikipedia.org/wiki/Short-circuit_evaluation](http://en.wikipedia.org/wiki/Short-circuit_evaluation)）

作为答案，它可能有点短（没有双关语），但如前所述，所有其他解释在这里都做得很好，但我认为这个词值得一提。

# python - python __get__ 方法

> ID：12660871
> 
> 赞同：5
> 
> 时间：2012-09-30T11:25:02.857
> 
> 标签：python, descriptor, getattribute

我正在阅读来自链接的描述符如何工作的解释：http: [//users.rcn.com/python/download/Descriptor.htm#properties](http://users.rcn.com/python/download/Descriptor.htm#properties)。

但是，在这里，在 class`Property`的`__get__`方法下，我对方法签名有疑问。方法签名是：

`def __get__(self, obj, objtype=None):`

在这里，我知道什么时候以及如何`obj`可以是 None 或实际对象。

但是，我无法理解：在什么情况下`objtype`可以`None`？并且，它在实际示例中如何有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T11:56:26.407

签名

```
def __get__(self, obj, objtype=None): 
```

是说这`objtype`是一个可选参数。如果`__get__`仅使用一个参数调用，`objtype`则将设置为`None`.

* * *

例如，Foo 可以通过以下方式从 Bar 窃取一个方法`foo.baz`：

```
class Foo(object):
    pass
class Bar(object):
    def baz(self):
        print('Hi')        

foo = Foo()
foo.baz = Bar.baz.__get__(foo)
print(foo.__dict__)
# {'baz': <bound method ?.baz of <__main__.Foo object at 0xb787006c>>}
foo.baz()
# Hi 
```

相反，如果使用了 2 参数形式`__get__`，

```
foo.baz = Bar.baz.__get__(foo, foo.__class__) 
```

然后`foo.baz`是**未绑定**的方法`Bar.baz`并`foo.baz()`引发

```
TypeError: unbound method baz() must be called with Bar instance as first argument (got nothing instead) 
```

* * *

请注意，在 Python3 中， 的概念`unbound method`已被删除。不再检查调用 obj 的类是否是正确的类型。因此，在 Python3 中，用于定义的 1 参数和 2 参数形式都`foo.baz`有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T02:03:39.010

也许我正在改写上述答案，但对我来说，上述想法的这种呈现似乎更容易理解。

考虑@cached_property 的这个实现

```
class cached_property(object):
    """Like @property, but caches the value."""

    def __init__(self, func):
        self._func = func

    def __get__(self, obj, cls):
        if obj is None:
            return self
        value = self._func(obj)
        obj.__dict__[self.__name__] = value
        return value 
```

`obj`我对“为什么要检查`None`？”有同样的问题。和“为什么要回归自我？”

这是两种情况如何出现的示例

典型用法：

```
class Foo(object):
    @cached_property
    def foo(self):
        # Would usually have significant computation here
        return 9001

foo_instance = Foo()
foo_foo = foo_instance.foo # Behind the scenes invokes Foo.foo.__get__(foo_instance, Foo) 
```

等等，是的，这就是我所期望的，那么什么时候`obj`是`None`？

不那么典型的用法（获取对属性的未绑定版本的访问）

（取`Foo`同上）

```
>> Foo.foo
<__main__.cached_property at 0x178bed0> 
```

在这种情况下，调用看起来像`Foo.foo.__get__(None, Foo)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T11:45:54.840

python 文档在[Implementation Descriptors](http://docs.python.org/reference/datamodel.html#implementing-descriptors)下对此进行了很好的讨论。签名实际上是下面提供的。正如你提到的实例可能没有，但所有者永远不应该是无。也许您阅读的方法有误。

```
object.__get__(self, instance, owner) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T11:48:18.067

objtype 表示 obj 的“所有者”类，这意味着您将实例传递给 obj 并将其基类传递给 objtype。但是，这意味着 obj 可以是 None，因为可能没有给定类的实例，但 objtype 不能，因为这会引发 AttributeError 异常。正如Marwan所说，你确定你没有把什么混在一起吗？;)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-10T06:00:43.763

[从https://github.com/youngsterxyf/mpdp-code/blob/master/chapter9/lazy.py](https://github.com/youngsterxyf/mpdp-code/blob/master/chapter9/lazy.py)重新编辑

```
 # lazy.py
    class LazyProperty:

        def __init__(self, method):
            self.method = method
            self.method_name = method.__name__
            #print('function overriden: {}'.format(self.method))
            #print("function's name: {}".format(self.method_name))

        def __get__(self, obj, cls):
            if not obj:
               return None
            value = self.method(obj)
            #print('value {}'.format(value))
            setattr(obj, self.method_name, value)
            return value

    class Test:

        def __init__(self):
            self.x = 'foo'
            self.y = 'bar'
            self._resource = None

        @LazyProperty
        def resource(self):
            print('initializing self._resource which is: {}'.format(self._resource))
            self._resource = tuple(range(5))
            return self._resource

    def main_Py27():
        # python 2.7.12
        t = Test()
        print(t.x)
        #>>> foo
        print(t.y)
        #>>> bar
        print(t.resource)
        #>>> <__main__.LazyProperty instance at 0x02C2E058>
        print(t.resource.__get__(t,Test))
        #>>> initializing self._resource which is: None
        #>>> (0, 1, 2, 3, 4)
        print(t.resource)
        #>>> (0, 1, 2, 3, 4)

    def main_Py3():
        # python 3.x
        t = Test()
        print(t.x)
        #>>> foo
        print(t.y)
        #>>> bar
        print(t.resource)
        #>>> initializing self._resource which is: None
        #>>> (0, 1, 2, 3, 4)
        print(t.resource)
        #>>> (0, 1, 2, 3, 4)

    def main():
        import sys
        if sys.version_info < (3,0):
            main_Py27()
        else:
            main_Py3()

    if __name__ == '__main__':
        main() 
```

# objective-c - NSXMLParser 在 iOS5 中工作正常，但在 iOS6 中不工作

> ID：12660876
> 
> 赞同：0
> 
> 时间：2012-09-30T11:25:45.183
> 
> 标签：objective-c, ios6, nsxmlparser, nsxml

在我的 iOS 应用程序中，我尝试使用 NSXMLParser 解析以下 xml。我可以在 iOS5 中成功解析这个 xml，但在 iOS6 中解析器没有进入 parserdidStartElement 。在iOS6 parserDidStartDocument 被成功调用但没有进入任何其他解析器委托方法.. xml 格式有什么问题吗？我怎样才能解决这个问题..

```
 <RESULTS>
    <ROW>
    <COLUMN NAME="NAME">Test1</COLUMN>
    <COLUMN NAME="ANAME">testing xml1</COLUMN>
    <COLUMN NAME="PHONE">4470111</COLUMN>
    <COLUMN NAME="REMARKS"/>
    <COLUMN NAME="XCOORD_DMS">227901.58873387</COLUMN>
    <COLUMN NAME="YCOORD_DMS">391872.68493206</COLUMN>
    <COLUMN NAME="XCOORD_WGS">51.49367618</COLUMN>
    <COLUMN NAME="YCOORD_WGS">25.27912682</COLUMN>
    </ROW>
    <ROW>
    <COLUMN NAME="NAME">Test2</COLUMN>
    <COLUMN NAME="ANAME">testing xml2</COLUMN>
    <COLUMN NAME="PHONE">4258444</COLUMN>
    <COLUMN NAME="REMARKS"/>
    <COLUMN NAME="XCOORD_DMS">229608.71442946</COLUMN>
    <COLUMN NAME="YCOORD_DMS">386848.18818915</COLUMN>
    <COLUMN NAME="XCOORD_WGS">51.51051535</COLUMN>
    <COLUMN NAME="YCOORD_WGS">25.23373805</COLUMN>
    </ROW>
    </RESULTS> 
```

这是代码..

```
- (void) initView:(JsonObject *) pageMenu{

    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    NSURL* url = [NSURL URLWithString:@"http://www.test.in/test.xml"];

    NSXMLParser* parser = [[NSXMLParser alloc] initWithContentsOfURL:url];

    [parser setDelegate:self];
    [parser parse];

    [parser release];

}
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName
    attributes:(NSDictionary *)attributeDict{
    NSLog (@"I have started");

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
  namespaceURI:(NSString *)namespaceURI
 qualifiedName:(NSString *)qName{
NSLog (@"I have started");

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

NSLog (@"I have started");
}

-(void) parserDidStartDocument:(NSXMLParser *)parser {

NSLog (@"I have started");
}

-(void) parserDidEndDocument: (NSXMLParser *)parser {

NSLog (@"I have started");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:57:32.197

我发现 XML 的问题是什么......创建 XML 时，它应该保存为没有 BOM 的 UTF-8 ......这就是问题所在。做完这个问题就解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:50:58.383

试试这个方法（委托方法的一部分）

```
- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError
{
    NSLog(@"Error = %@", parseError);
} 
```

我在 iOS 6 上遇到了一个错误，但在 iOS 5 上没有，但收到了一条错误消息，它说解析有问题。（错误域 = NSXMLParserErrorDomain 代码 = 9“操作无法完成。（NSXMLParserErrorDomain 错误 9。）”）。

您可以在这里检查错误代码：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)

我仍在试图找出我自己的问题，但这条线可能会帮助你朝着正确的方向前进。

希望你解决！

# c# - 使用类属性而不是 const 构造函数参数

> ID：12660878
> 
> 赞同：0
> 
> 时间：2012-09-30T11:26:03.870
> 
> 标签：c#, attributes, custom-attributes

我制作了一个支持插件的应用程序。目前，插件的基类实现了一个抽象类，并为它提供了插件的名称（省略了内容）：

```
public class AppExecutePlugin : APlugin
{
    public AppExecutePlugin() : base("Application Execute")
    {

    }
    ... (other stuff here)
} 
```

现在，我正在考虑使用自定义属性来命名插件（不要关心语法错误）：

```
[PluginName("Application Execute")]
public class AppExecutePlugin : APlugin
{
    public AppExecutePlugin()
    {

    }
} 
```

由于我很少为自己的应用程序使用属性，所以我想知道第二种方法是否会导致更抽象的实现，或者总的来说，与我的第一种方法相比，它是否具有优势。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:41:10.507

它不会导致更抽象的实现（因为很难评估这如何影响“抽象性”），但它有一些好处：

*   您无需实例化插件即可读取元数据 - 您只需使用反射读取属性信息
*   插件实例不需要仅仅为了拥有元数据而添加状态（即成员）
*   您可以轻松添加其他属性，或扩展此属性，而不会污染插件界面

例如我的插件看起来像这样：

```
[Plugin("FriendlyName", Description = "..", Version = "1.0")]
[RequiresLicense("LicKey.XYZ")]
class MyPlugin : PluginBase {...} 
```

如果没有属性，我需要将所有这些信息添加到基类构造函数中。当然，您总是可以通过在插件界面中使用如下方法来避免它：

```
public static PluginInfo GetPluginInfo()
{
   return new PluginInfo() { Name = "FriendlyName",
                             Description = "..", 
                             Version = "1.0",
                             License = "lickey.XYZ" };
} 
```

您可以使用反射执行它而无需实例化插件，从而实现与使用属性相同的效果。我更喜欢这种方法的属性，因为它感觉更具声明性，但这很可能只是个人品味。

# nosql - 是否可以使用 phpcassa 在复合列的第二个组件中搜索 cassandra

> ID：12660886
> 
> 赞同：0
> 
> 时间：2012-09-30T11:27:22.763
> 
> 标签：nosql, cassandra, phpcassa

所以我有：

```
$sys->create_column_family($keyspace, 'MYCF', array(
    "column_type" => "Super",
    "comparator_type" => "CompositeType(TimeUUIDType, UTF8Type)",
    "key_validation_class" => "UTF8Type"
)); 
```

插入了几条记录，它们可以正确检索（按 timeuuid 自动排序，这是我想要的）。例如，要获得最后一个，这是按预期工作的：

```
$slice = new ColumnSlice('', '', $count=1, $reversed=true); 
```

是否有可能获得例如带有特定第二个组件的最后一个（例如“TWITTER”）？

像这样尝试但没有运气（NotFoundException）：

```
$slice = new ColumnSlice(array(array(null, array("TWITTER", true))), '', $count=1, $reversed=true); 
```

尝试使用 '' 而不是 null，但没有运气。

有任何想法吗？

谢谢

# c# - 在 Metro 应用程序中从 FileSystem 设置 ImageSource

> ID：12660894
> 
> 赞同：0
> 
> 时间：2012-09-30T11:28:49.677
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

在 ApplicationData.Current.RomanigFolder 中，我保存了一个 jpg 文件。是否可以在流或 MemoryStream 中读取此文件的内容并将其设置为 ImageSource？

我在带有 .NET 4.0 的 WPF 应用程序中使用它，并带有以下代码：（img 是 XAML-Image-Control

```
BitmapImage bi = new BitmapImage();
bi.BeginInit();
bi.CacheOption = BitmapCacheOption.OnLoad;
StreamReader sr = new StreamReader(data.message.imageUrl);
bi.StreamSource = sr.BaseStream;
bi.EndInit();
img.Source = bi;
sr.Close(); 
```

对于 Metro 应用程序，我看不到将 StreamSource 设置为 BitmapImage 的方法。如何将图像文件设置为图像控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:43:56.100

用于编写“Metro Style Apps”或为 Windows 8 构建的应用程序，以在 WPF 项目中设置图像的来源。

这是代码：

```
// Usage
myImage.Source = ImageFromRelativePath(this, "relative_path_to_file_make_sure_build_set_to_content");

public static BitmapImage ImageFromRelativePath(FrameworkElement parent, string path)
{
    var uri = new Uri(parent.BaseUri, path);
    BitmapImage result = new BitmapImage();
    result.UriSource = uri;
    return result;
} 
```

参考： http: [//www.codingbeta.com/programatically-setting-image-source-in-metro-style-apps-with-wpf/](http://www.codingbeta.com/programatically-setting-image-source-in-metro-style-apps-with-wpf/)

# ruby - 批量更新帖子的标签，大写它们

> ID：12660913
> 
> 赞同：0
> 
> 时间：2012-09-30T11:31:31.140
> 
> 标签：ruby, jekyll

我正在运行一个包含大量导入帖子（大约 900 个）的 jekyll 站点。标签是一团糟，我想清理它。显然其中一些可以编写脚本，但在 Jekyll 中我看不到如何编写。

首先，我想将所有标签大写。把“红宝石”变成“红宝石”。并将“PHP”保留为“PHP”。

1.  如何在 FrontMatter 文件的上下文之外循环浏览我的所有帖子？例如在 IRB 或任何其他 Ruby 文件中。
2.  如何修改和保存已解析的帖子？

我想这可以通过一些 awk 和 sed 魔法来完成，但由于 jekyll 已经*是*一个解析器并且对标签、帖子等具有复杂的知识，所以 awk-sed-grepping 似乎很尴尬且效率低下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:33:46.763

如果您的帖子顶部的 YAML 块中已经有标签，我会使用 vimninjas 的这个提示：http: [//www.vimninjas.com/2012/09/19/replace-multiple/](http://www.vimninjas.com/2012/09/19/replace-multiple/)

```
:args _posts/*.md
:argdo :%s/*tag_old*/*tag_new*/ge | update 
```

# java - 从布局中捕获按钮时意外停止错误

> ID：12660916
> 
> 赞同：1
> 
> 时间：2012-09-30T11:32:24.243
> 
> 标签：java, android

我想在 java 中捕获一个 ImageButton 并为其定义一个 onClick 事件侦听器。但在捕获线应用程序意外停止。我使用 API 8 级。

这是我的java代码：

```
import android.os.Bundle;
import android.app.Activity;
import android.graphics.PixelFormat;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.animation.Animation;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.ImageButton;

public class Login extends Activity {
    ImageButton buttonTest =(ImageButton)findViewById(R.id.imageButton1);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
        buttonTest.setOnClickListener(strLogoAnim);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_login, menu);

        return true;
    }

    private OnClickListener strLogoAnim = new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
                    // Do something
        }
    };

    @Override
    public void onAttachedToWindow() {
        super.onAttachedToWindow();
        Window window = getWindow();
        window.setFormat(PixelFormat.RGBA_8888);
    }

} 
```

即使我创建了一个新项目并对其进行测试。但是这个问题也存在。问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:37:32.513

```
public class Login extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
        ImageButton buttonTest =(ImageButton)findViewById(R.id.imageButton1);
        buttonTest.setOnClickListener(strLogoAnim);
    } 
```

尝试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:39:21.640

你需要在onCreate中引用按钮：

```
public class Login extends Activity {
    ImageButton buttonTest; // remove this: =(ImageButton)findViewById(R.id.imageButton1);
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
        buttonTest =(ImageButton)findViewById(R.id.imageButton1); // add this
        buttonTest.setOnClickListener(strLogoAnim);
    } 
```

# javascript - JAVASCRIPT亮度功能-降低

> ID：12660919
> 
> 赞同：1
> 
> 时间：2012-09-30T11:32:46.827
> 
> 标签：javascript, jquery, hex, brightness

我在堆栈上创建了这段代码：

```
function increase_brightness(hex, percent){
    var r = parseInt(hex.substr(1, 2), 16),
        g = parseInt(hex.substr(3, 2), 16),
        b = parseInt(hex.substr(5, 2), 16);

    return '#' +
       ((0|(1<<8) + r + (256 - r) * percent / 100).toString(16)).substr(1) +
       ((0|(1<<8) + g + (256 - g) * percent / 100).toString(16)).substr(1) +
       ((0|(1<<8) + b + (256 - b) * percent / 100).toString(16)).substr(1);
} 
```

有谁知道如何制作完全相反的？

`decreas_brightness(){}`我的意思是功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T12:14:45.137

您的代码来自[JavaScript 计算较亮的颜色](https://stackoverflow.com/questions/6443990/javascript-calculate-brighter-colour)。根据评论，以下更改应使其降低亮度：

```
function decrease_brightness(hex, percent){
    var r = parseInt(hex.substr(1, 2), 16),
        g = parseInt(hex.substr(3, 2), 16),
        b = parseInt(hex.substr(5, 2), 16);

   return '#' +
       ((0|(1<<8) + r * (100 - percent) / 100).toString(16)).substr(1) +
       ((0|(1<<8) + g * (100 - percent) / 100).toString(16)).substr(1) +
       ((0|(1<<8) + b * (100 - percent) / 100).toString(16)).substr(1);
} 
```

# fork - 为什么要在父级中 fork() 然后 wait() ？

> ID：12660920
> 
> 赞同：2
> 
> 时间：2012-09-30T11:33:10.050
> 
> 标签：fork, multiprocessing, wait, zombie-process, waitpid

我知道 fork()、wait()、waitpid()、僵尸进程……我通过阅读 W. Richard Stevens 这本非常好的书来理解它们。

如果我们不在父母中调用 wait() ，孩子在终止后会变成僵尸......这很糟糕！

如果我们在 parent 中调用 wait()，则 parent 等待 child 终止，接收终止状态然后继续。写？

我已经经历了许多调用 fork() 一次然后在父级中调用 wait() 的示例。

但是，如果父母要等待孩子并在孩子终止后继续，那么就没有实际的多任务处理（技术上是的，有两个进程。但逻辑上没有用）那我们为什么在这里调用 fork() 呢？

我们可以先编写子代码，然后编写父代码，而不是 fork() 和 wait() 作为单个进程...不是更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:43:37.193

有时，即使父级立即阻塞， **fork()**也很有用。最常见的情况是当您执行类似于**system()**调用的操作时，执行外部命令并等待它完成：您将执行**fork()** + **execve()**。（不过，在现代代码中，您应该考虑使用**posix_spawn()**来代替。）

不过，**wait()**不需要阻塞。您可以使用带有**WNOHANG**标志的**waitpid()**来收集任何已完成进程的退出代码，或者如果它仍在运行则立即继续。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T12:10:42.910

您编写的代码与子叉一起同时运行`fork()`。`waitpid()`

父级等到子级完成，通常只是为了获取从子级传递的数据并将其公开给父级。假设您运行一个主循环，其中任务作为“后台”运行。例如：

```
// a simple scheduler
while(1) {
   if(done_task_1) {
      // if done_task_1 is ever to change in the parent memory scope,
      // parent must know the exit status of its child fork.
      // otherwise there is no way to enter this if sentance, ever
      collect_data_1();
      run_task_1 = 0;
   }
   else if(run_task_1 == 1) {
      // iterate instructions for a sec
      posix_kill(pid_task_1, SIGCONT);
      sleep(1);
      posix_kill(pid_task_1, SIGSTOP);

   } 

   if(done_task_2) {
      collect_data_2();
      run_task_2 = 0;
   }
   else if(run_task_2 == 1) {
      // iterate instructions for a sec
      posix_kill(pid_task_2, SIGCONT);
      sleep(1);
      posix_kill(pid_task_2, SIGSTOP);

   } 
   if(run_task_1 == 0 && run_task_2 == 0) {
       break;
   }
} 
```**

# objective-c - UISlider 损坏

> ID：12660925
> 
> 赞同：1
> 
> 时间：2012-09-30T11:33:51.423
> 
> 标签：objective-c, cocoa-touch, interface, uislider, corrupt

我以编程方式在每个 UITableViewCell 中嵌入了一个 UISlider，但我注意到这些 UISlider 中的前 2 个总是损坏，如下图所示。

![在此处输入图像描述](../Images/f82a16f43fdfe801f6ef96d71d35a709.png)

当我第一次滑动 UISlider 按钮时，它的一部分会落在后面。有没有其他人遇到过同样的问题？如果您需要查看我的代码，请告诉我。

除了这个问题，连接到它旁边的 UISlider 的 UIlabel 效果很好。

更多细节：我的 cellForRowAtIndexPath 函数如下。请查找我添加 UISlider 的部分的最后第二段。我还怀疑我可能会在单元格中添加超过 1 个滑块。我通过检查该行的 NSLog 输出来检查每个滑块是否只添加一次：

```
NSLog(@"initiating slider at section %d row %d", indexPath.section, indexPath.row); 
```

部分和行的每个组合都是独一无二的！

我也觉得很奇怪，只有前 2 行中的 UISliders 会受此影响，而不管我的表中有多少 tableViewCell-rows。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
//creating a basic valid cell object
static NSString *cellIdentifier = @"ActivitiesTVCcell";
UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (!cell){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}

if(indexPath.section == 0){
    NSArray *rowNames = [self.phpReply_ActivitiesTVC componentsSeparatedByString:@"\n"];
    cell.textLabel.text = [rowNames objectAtIndex:indexPath.row+2];
}
else if (indexPath.section == 1){
    if (indexPath.row == 0) {
        cell.textLabel.text = @"Seated";
    }
    else if (indexPath.row == 1){
        cell.textLabel.text = @"Standing";
    }
}

cell.selectionStyle = UITableViewCellSelectionStyleNone;

//start code addition of graph button stuff
UIButton *graphButton = [UIButton buttonWithType:UIButtonTypeCustom];
[graphButton setFrame:CGRectMake(224, 0, 43, 37)];
[graphButton setBackgroundImage:[[UIImage imageNamed:@"graph icon.png"] stretchableImageWithLeftCapWidth:1.0 topCapHeight:1.0] forState:UIControlStateNormal];
[graphButton setBackgroundImage:[[UIImage imageNamed:@"graph icon.png"] stretchableImageWithLeftCapWidth:1.0 topCapHeight:1.0] forState:UIControlStateSelected];

[graphButton addTarget:self
                action:@selector(graphButtonPressed:)
      forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:graphButton];
//end code addition of graph button stuff

//start code addition of video button stuff
UIButton *videoButton = [UIButton buttonWithType:UIButtonTypeCustom];
[videoButton setFrame:CGRectMake(300, 0, 43, 37)];
[videoButton setBackgroundImage:[[UIImage imageNamed:@"videoicon.png"] stretchableImageWithLeftCapWidth:1.0 topCapHeight:1.0] forState:UIControlStateNormal];
[videoButton setBackgroundImage:[[UIImage imageNamed:@"videoicon.png"] stretchableImageWithLeftCapWidth:1.0 topCapHeight:1.0] forState:UIControlStateSelected];

[videoButton addTarget:self action:@selector(videoButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
[cell addSubview:videoButton];
//end code addition of video button stuff

//start code for addition of enable switch
UISwitch *activityEnableSwitch = [[UISwitch alloc] initWithFrame:CGRectMake(376, 7, 0, 0)]; //size components of CGRect are ignored
[activityEnableSwitch setOn:NO animated:YES];
[activityEnableSwitch addTarget:self
                         action:@selector(enableSwitchStateChanged:)
               forControlEvents:UIControlEventValueChanged];
[cell addSubview:activityEnableSwitch];
//end code for addition of enable switch

//start code for addition of target angle text field
UITextField *targetAngleTextField = [[UITextField alloc] initWithFrame:CGRectMake(476, 7, 50, 25)];
targetAngleTextField.borderStyle = UITextBorderStyleRoundedRect;
targetAngleTextField.font = [UIFont systemFontOfSize:15];
targetAngleTextField.textColor = [UIColor blackColor];
targetAngleTextField.placeholder = @"30";
targetAngleTextField.autocorrectionType = UITextAutocorrectionTypeNo;
targetAngleTextField.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
targetAngleTextField.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
targetAngleTextField.keyboardType = UIKeyboardTypeNumberPad; //no num pad on ipad :(
//[targetAngleTextField becomeFirstResponder];
targetAngleTextField.delegate = self;

[cell addSubview:targetAngleTextField];
//end code for addition of target angle text field

//start code for addition of degree text label
UILabel *degreeLabel = [[UILabel alloc] initWithFrame:CGRectMake(532, 6, 10, 10)];
degreeLabel.text = @"o";
degreeLabel.font = [UIFont systemFontOfSize:10];
[cell addSubview:degreeLabel];
//end code for addition of degree text label

//start code for addition of progression level UISlider
NSLog(@"initiating slider at section %d row %d", indexPath.section, indexPath.row);
UISlider *progressionLevelSlider = [[UISlider alloc] initWithFrame:CGRectMake(576, 7, 150, 25)];
progressionLevelSlider.minimumValue = 0;
progressionLevelSlider.maximumValue = 9;
progressionLevelSlider.continuous = YES;
progressionLevelSlider.value = 3;

[progressionLevelSlider addTarget:self
           action:@selector(progressionSliderValueChanged:)
 forControlEvents:UIControlEventValueChanged];

[cell addSubview:progressionLevelSlider];
//end code for addition of progression level UISlider

//start code for addition of level ? text label
UILabel *progressionLevelLabel = [[UILabel alloc] initWithFrame:CGRectMake(782, 13, 10, 20)];
progressionLevelLabel.text = [NSString stringWithFormat:@"%d", 2];
progressionLevelLabel.font = [UIFont systemFontOfSize:17];
progressionLevelLabel.tag = 121; //tag represents this particular UIlabel, so that we can set it from outside this function.
[cell addSubview:progressionLevelLabel];
//end code for addition of level ? text label

[cell setTag:(indexPath.section)*100+indexPath.row];

return cell;
} 
```

这是我的 sliderValueChanged 函数。我将这段代码放在这里，因为只有在拖动滑块（以更改其值）后才能看到“损坏”。

```
-(void)progressionSliderValueChanged: (UISlider *)sender {
int section = ([sender superview].tag)/100;
int row = [sender superview].tag%100;

int value = sender.value;

NSLog(@"slider value at section %d row %d was slided to %d",section, row, value);

UITableViewCell *superViewOfSlider = (UITableViewCell *)[sender superview];
UILabel *progressionLevelLabel = (UILabel *)[superViewOfSlider viewWithTag:121];
progressionLevelLabel.text = [NSString stringWithFormat:@"%d", value];
[superViewOfSlider addSubview:progressionLevelLabel]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:01:01.893

每次重用一个单元格时，您都会向该单元格添加一组全新的子视图。讲述创建这些子视图的所有代码并将其移动到您创建单元格的块内。*在*该块之后，您只需要找到您需要的子视图（例如使用标签）并设置这些子视图的值。

# asp.net - 根据 SQL 查询在 Grid 视图中添加 Column

> ID：12660926
> 
> 赞同：1
> 
> 时间：2012-09-30T11:33:56.023
> 
> 标签：asp.net, sql-server-2008, sql-server-2005, asp.net-4.0, asp.net-3.5

我正在使用这个查询：

```
select EmployeeId, receptionist_name, date_of_sale,
  count(date_of_sale) 
from FrontOffice 
group By EmployeeId, receptionist_name, date_of_sale 
order by date_of_sale 
```

用于填充网格视图。但我可以绑定`EmployeeId`, `receptionist_name`, `date_of_sale`, 所以你能告诉我如何在网格视图中绑定第 4 列以及如何填充网格视图。

**更新：**这是我正在使用的代码：

```
<Columns> 
    <asp:BoundField HeaderText="Date" DataField="date_of_sale" /> 
    <asp:BoundField HeaderText="Employe Id" DataField="EmployeeId" /> 
    <asp:BoundField HeaderText="Receiptist Name" DataField="receptionist_name" /> 
    <asp:TemplateField HeaderText="No. of Prospectus Sale"> 
    <ItemTemplate> 
        <asp:Label ID="salecount" runat="server" 
          Text='<%# Eval("SaleCount") %>'></asp:Label> 
    </ItemTemplate> 
    </asp:TemplateField> 
</Columns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:28:57.843

执行以下操作：

1.  将您的查询更改为：

    `select EmployeeId, receptionist_name, date_of_sale, count(date_of_sale) as Total from FrontOffice group By EmployeeId, receptionist_name, date_of_sale order by date_of_sale`

2.  将您的 Gridview 代码更改为：

    `Replace Eval("SaleCount") to Eval("Total")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T12:17:08.193

而不是更改整个代码只需将列命名为`count(date_of_sale) As SaleCount`

```
<Colums>
    <asp:BoundField HeaderText="Date" DataField="date_of_sale" />
    <asp:BoundField HeaderText="Employe Id" DataField="EmployeeId" /> 
    <asp:BoundField HeaderText="Receiptist Name" DataField="receptionist_name" /> 
    <asp:BoundField HeaderText="No. of Prospectus Sale" DataField="SaleCount" />
</Columns> 
```

# ember.js - 在数据更改时重新渲染#each 块的内容

> ID：12660928
> 
> 赞同：1
> 
> 时间：2012-09-30T11:34:17.990
> 
> 标签：ember.js

我有一个`content`绑定到对象的控制器，该对象从不同来源异步加载数据。我希望在加载完成后呈现数据。这工作得很好，但是当我想更改数据时，#each 块不会重新呈现它。

```
App.PopularTracks = Ember.Object.create({
    tracks: [],
    load: function() {
        var self = this;
        var tracks = [];

        LFM.get("chart.getHypedTracks", {limit: 5}, function(data) {
            // push each track to tracks in a loop, then
            self.set("tracks", tracks);
        });

        // This method has also other asynchronous calls that work similar,
        // but #each block doesn't rerender on `tracks` change.
    }
});

App.PopularTracksController = Ember.ArrayController.extend({
    contentBinding: "App.PopularTracks.tracks"
});

App.PopularTracksView = Ember.View.extend({
    templateName: "popularTracks"
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T22:04:34.777

在您的示例中，“self.set”应该是“this.set”吗？

同样使用 arrayController，而不是像使用常规控制器的属性那样定位它的内容，您只需定位 content 参数：

```
{{#each controller}}
    print this for every item in the "content" array!
{{/each}} 
```

如果你这样做：

```
{{#each controller.content}} 
```

某些属性和绑定不会正确重新呈现

# java - Java replaceAll / 用美元符号实例替换字符串

> ID：12660930
> 
> 赞同：3
> 
> 时间：2012-09-30T11:34:40.003
> 
> 标签：java, regex, string, replace, dollar-sign

```
public static String template = "$A$B"

public static void somemethod() {
         template.replaceAll(Matcher.quoteReplacement("$")+"A", "A");
         template.replaceAll(Matcher.quoteReplacement("$")+"B", "B");
             //throws java.lang.ArrayIndexOutOfBoundsException: Array index out of range: 3
         template.replaceAll("\\$A", "A");
         template.replaceAll("\\$B", "B");
             //the same behavior

         template.replace("$A", "A");
         template.replace("$B", "B");
             //template is still "$A$B"

} 
```

我不明白。我使用了所有可以在互联网上找到的替换方法，包括我能找到的所有堆栈溢出。我什至试过\u0024！怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T11:36:44.540

替换不是就地完成的（A`String`不能在 Java 中修改，它们是*不可变*的），而是保存在`String`方法返回的 new 中。您需要保存返回的`String`引用以防万一发生，例如：

```
template = template.replace("$B", "B"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T11:39:59.173

字符串是不可变的。所以你需要将replaceAll的返回值赋给一个新的String：

```
String s = template.replaceAll("\\$A", "A");
System.out.println(s); 
```

# ios - 仅使用生产证书时无法注册推送通知

> ID：12660931
> 
> 赞同：3
> 
> 时间：2012-09-30T11:34:52.240
> 
> 标签：ios, apple-push-notifications

使用开发证书时推送通知工作正常。当我在我的临时分发中切换到生产证书时，应用程序无法注册推送通知。在 UIApplicationDelegate 中，既不`didRegisterForRemoteNotificationsWithDeviceToken`也不`didFailToRegisterForRemoteNotificationsWithError`被调用。此外，当我查看设备日志时，我发现了这一点：

```
Sep 30 12:47:09 Heshams-iPad amfid[483] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
Sep 30 12:47:09 Heshams-iPad amfid[483] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile
Sep 30 12:47:09 Heshams-iPad amfid[483] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
Sep 30 12:47:09 Heshams-iPad amfid[483] <Error>: entitlement 'aps-environment' has value not permitted by a provisioning profile
Sep 30 12:47:09 Heshams-iPad amfid[483] <Error>: entitlement 'application-identifier' has value not permitted by a provisioning profile 
```

我在配置文件中的权利密钥如下所示：

```
<key>Entitlements</key>
<dict>
    <key>application-identifier</key>
    <string>KUK8W9TW2G.com.startappz.ConversableDemo</string>
    <key>aps-environment</key>
    <string>production</string>
    <key>get-task-allow</key>
    <false/>
    <key>keychain-access-groups</key>
    <array>
        <string>KUK8W9TW2G.*</string>
    </array>
</dict> 
```

我尝试从 Xcode 和门户中删除配置文件并重新创建它们，我还尝试撤销证书并重新创建它们。我什至更改了应用程序 ID，并从头开始做所有事情。

我也尝试过使用和不使用单独的权利文件进行构建。

**更新**

我现在正在使用分发配置文件在设备上进行调试。该应用程序现在在生产服务器上成功注册并接收推送通知，但仍然归档应用程序会中断推送通知。

所以现在我几乎可以肯定 Xcode 在归档应用程序时搞砸了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T12:16:41.527

您是否更改了服务器中的 APNS 脚本？

ssl://gateway.sandbox.push.apple.com:2195 需要；ssl://gateway.push.aple.com:2195 和

development_certificate.pem 应该是；生产证书.pem

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:15:01.650

我猜对了，Xcode 在归档应用程序时确实搞砸了一些事情。选择“为企业或临时部署保存”后，代码签名身份下拉菜单显示我的团队名称为“（空）”。

![在此处输入图像描述](../Images/e59b1fccb1282d10051bc85361cdaa2a.png)

刷新代码签名身份后，它现在可以正确显示，并且临时 ipa 现在可以在我的设备上正常注册并接收推送通知。

# javascript - 每 10 个 javascript i++

> ID：12660946
> 
> 赞同：-4
> 
> 时间：2012-09-30T11:36:44.573
> 
> 标签：javascript

javascript `i++`，如何`add 10`每次都做一些代码？

我需要 1,11,21,31,41,51,61,71,81,91。

```
for(i = 1; i < 100; i++) {
   //I need 1,11,21,31,41,51,61,71,81,91
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:37:52.350

采用：

```
for(i = 1; i < 100; i+=10) {
   //I need 1,11,21,31,41,51,61,71,81,91
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T11:37:52.777

在每个循环中添加 10 个。

```
for(i = 1; i < 100; i +=10) {
   //I need 1,11,21,31,41,51,61,71,81,91
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T11:39:54.640

像这样->

```
for(var i=1; i< 100; i=i+10) {
   console.log(i);
}​ 
```

# java - jsf 2.0 + springwebflow 2.0 中不支持的异常

> ID：12660953
> 
> 赞同：3
> 
> 时间：2012-09-30T11:38:05.297
> 
> 标签：java, spring, jsf-2, jboss7.x, spring-webflow

我开始使用以下技术创建一个项目

```
JSF 2.0 
Springwebflow 2.0
Primefaces 2.2.1
Richfaces 3.3
Appserver : JBOSS-AS-7.1.1 Final 
```

我的应用程序已成功部署，但是当我尝试运行它时.. 我收到以下异常，

> 例外
> 
> org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 org.springframework.webflow.execution.FlowExecutionException：在流 'main' org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:583) org.springframework.web.servlet 的状态 'startPage' 中抛出异常.FrameworkServlet.doGet(FrameworkServlet.java:501) javax.servlet.http.HttpServlet.service(HttpServlet.java:734) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.ajax4jsf.webapp.BaseXMLFilter .doXmlFilter(BaseXMLFilter.java:178) org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter (BaseFilter.java:515) 组织。
> 
> 根本原因
> 
> org.springframework.webflow.execution.FlowExecutionException：在流'main'的状态'startPage'中抛出异常org.springframework.webflow.engine.impl.FlowExecutionImpl.wrap（FlowExecutionImpl.java:569）org.springframework.webflow.engine。 impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:263) org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:163) org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183) org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174) org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48) org.springframework.web.servlet.DispatcherServlet。 doDispatch(DispatcherServlet.java:875) org.springframework。web.servlet.DispatcherServlet.doService(DispatcherServlet.java:807) org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501) javax.servlet.http.HttpServlet.service(HttpServlet.java:734) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178) org. ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) org.springframework。 web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96) org.springframework.web.filter.OncePerRequestFilter。doFilter(OncePerRequestFilter.java:76)
> 
> 根本原因
> 
> java.lang.UnsupportedOperationException javax.faces.context.ExternalContext.getResponseOutputWriter(ExternalContext.java:1228) com.sun.faces.application.view.JspViewHandlingStrategy.renderView(JspViewHandlingStrategy.java:206) com.sun.faces.application.view .MultiViewHandler.renderView(MultiViewHandler.java:125) org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:91) org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100) org.ajax4jsf.application .AjaxViewHandler.renderView(AjaxViewHandler.java:176) org.springframework.faces.webflow.JsfView.render(JsfView.java:88) org.springframework.webflow.engine.ViewState.render(ViewState.java:282) org.springframework .webflow.engine.ViewState.refresh(ViewState.java:241) org.springframework.webflow.engine.ViewState。resume(ViewState.java:219) org.springframework.webflow.engine.Flow.resume(Flow.java:545) org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:259) org.springframework。 webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:163) org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183) org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController. java:174) org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48) org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875) org.springframework.web.servlet。 DispatcherServlet.doService(DispatcherServlet.java:807) org.springframework.web.servlet.FrameworkServlet。processRequest(FrameworkServlet.java:571) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:501) javax.servlet.http.HttpServlet.service(HttpServlet.java:734) javax.servlet.http.HttpServlet。服务(HttpServlet.java:847) org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:178) org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest( BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96) org.springframework.web.filter.OncePerRequestFilter。 doFilter(OncePerRequestFilter.java:76)java:501) javax.servlet.http.HttpServlet.service(HttpServlet.java:734) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java: 178) org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)java:501) javax.servlet.http.HttpServlet.service(HttpServlet.java:734) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java: 178) org.ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) org.springframework。 web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)ajax4jsf.webapp.BaseFilter.handleRequest(BaseFilter.java:290) org.ajax4jsf.webapp.BaseFilter.processUploadsAndHandleRequest(BaseFilter.java:388) org.ajax4jsf.webapp.BaseFilter.doFilter(BaseFilter.java:515) org.springframework。 web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:96) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

任何想法是什么原因？

```
my faces-config.xml

<?xml version="1.0"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

</faces-config>

my web.xml

<?xml version="1.0" encoding="ISO-8859-1"?>
<web-app xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd"
    version="2.5">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/config/web-application-config.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <!-- 
        JSF 2 IMPLEMENTATION
    -->
    <!-- Use JSF view templates saved as *.xhtml, for use with Facelets -->
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>

    <!-- Enables special Facelets debug output during development -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <context-param>
        <param-name>facelets.DEVELOPMENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <!-- Causes Facelets to refresh templates during development -->
    <context-param>
        <param-name>facelets.REFRESH_PERIOD</param-name>
        <param-value>1</param-value>
    </context-param>
    <!-- Just here so the JSF implementation can initialize, *not* used at runtime -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <!-- Just here so the JSF implementation can initialize -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>

    <context-param>
     <param-name>javax.faces.DISABLE_FACELET_JSF_VIEWHANDLER</param-name>
     <param-value>true</param-value>
    </context-param>

    <filter>
        <filter-name>charEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>charEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <servlet>
        <servlet-name>Resources Servlet</servlet-name>
        <servlet-class>org.springframework.js.resource.ResourceServlet</servlet-class>
        <load-on-startup>0</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Resources Servlet</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>

    <!-- 
        SPRING MVC
    -->
    <servlet>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value></param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
        <url-pattern>/spring/*</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>
            javax.servlet.jsp.jstl.fmt.localizationContext
        </param-name>
        <param-value>resources.application</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

</web-app>

my webflow-config.xml

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:webflow="http://www.springframework.org/schema/webflow-config"
       xmlns:faces="http://www.springframework.org/schema/faces"
       xsi:schemaLocation="
           http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/webflow-config
           http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.3.xsd
           http://www.springframework.org/schema/faces
           http://www.springframework.org/schema/faces/spring-faces-2.0.xsd">

    <!-- Executes flows: the central entry point into the Spring Web Flow system -->
    <webflow:flow-executor id="flowExecutor">
        <webflow:flow-execution-repository max-executions="1" />
        <webflow:flow-execution-attributes>
            <webflow:always-redirect-on-pause value="true"/>
        </webflow:flow-execution-attributes>
        <webflow:flow-execution-listeners>
            <webflow:listener ref="securityFlowExecutionListener" />

        </webflow:flow-execution-listeners>
    </webflow:flow-executor>

    <!-- The registry of executable flow definitions -->
    <webflow:flow-registry id="flowRegistry" flow-builder-services="facesFlowBuilderServices" base-path="/WEB-INF/flows">
        <webflow:flow-location-pattern value="/**/*-flow.xml" />
    </webflow:flow-registry>

    <!-- Configures the Spring Web Flow JSF integration -->
    <faces:flow-builder-services id="facesFlowBuilderServices" development="true" />

    <!-- Installs a listener to apply Spring Security authorities -->
    <bean id="securityFlowExecutionListener" class="org.springframework.webflow.security.SecurityFlowExecutionListener" />

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-03T04:09:08.623

将你的 jsf 升级到 2.2.15，我在我的项目中遇到了同样的问题！

# php - Yii : 如何在 $criteria 中添加“OR”运算符？

> ID：12660958
> 
> 赞同：0
> 
> 时间：2012-09-30T11:38:44.280
> 
> 标签：php, yii

问：如何添加“OR”运算符`$criteria`？

从[这里参考](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addSearchCondition-detail)

这是我的 $criteria 条件之一。

```
$criteria->addSearchCondition('t.status','Reviewing',true,"OR","LIKE");
$criteria->addSearchCondition("status",'On Hold'); 
```

这是来自 $criteria 的 sql

```
SELECT COUNT(*)
FROM `request` `t`
JOIN users u ON (t.creator = u.id)
WHERE ((t.status LIKE :ycp0) AND (status LIKE :ycp1)) AND (reviewers LIKE :ycp2) 
```

这个条件**((t.status LIKE :ycp0) AND (status LIKE :ycp1))** 应该是**((t.status LIKE :ycp0) OR (status LIKE :ycp1))**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:49:28.357

我认为您需要进行如下更改

```
$criteria->addSearchCondition('t.status','Reviewing',true,"AND","LIKE");
$criteria->addSearchCondition("status",'On Hold','true','OR'); 
```

> addSearchCondition 函数将运算符附加到先前的条件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:49:44.650

我对 YII 不是很流利，但是您的第二个标准：

```
 $criteria->addSearchCondition("status",'On Hold'); 
```

> 将搜索条件附加到现有条件。搜索条件和现有条件将通过默认为“AND”的指定运算符连接。搜索条件是使用带有给定列名和搜索关键字的 SQL LIKE 运算符生成的。

没有指定它应该是`OR`'ed，但默认情况下是`AND`'ed。它可能已经为您指定`OR`了：

```
$criteria->addSearchCondition("status",'On Hold', true, 'OR'); 
```

此外，您不需要在这里使用搜索条件，您只是想比较。条件相同`t.status`。因此，您可能更容易使用更直接的标准，例如[`addColumnCondition`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#addColumnCondition-detail)：

```
$criteria->addColumnCondition(
    array('t.status' => 'Reviewing', "status" => 'On Hold'), 'OR'
); 
```

我认为这可以取代你的两条线。

# android - 向后滚动的 Listview 显示错误的 imageview

> ID：12660964
> 
> 赞同：1
> 
> 时间：2012-09-30T11:40:03.153
> 
> 标签：android, android-listview, android-imageview, android-view

我想创建一个列表视图，其中每个元素都有几个图像视图，但它们永远不会一起显示；他们将根据他们想要描述的数据显示。这是元素布局的一部分

```
<ImageView
    style="@style/release_item_resolution_pic"
    android:id="@+id/release_res_standard"
    android:layout_alignLeft="@+id/release_label_title"
    android:src="@drawable/format_standard" />

<ImageView
    style="@style/release_item_resolution_pic"
    android:id="@+id/release_res_720p"
    android:layout_toRightOf="@+id/release_res_standard"
    android:src="@drawable/format_720p" />

<ImageView
    style="@style/release_item_resolution_pic"
    android:id="@+id/release_res_webdl"
    android:layout_toRightOf="@+id/release_res_720p"
    android:src="@drawable/format_webdl" />

<ImageView
    style="@style/release_item_resolution_pic"
    android:id="@+id/release_res_dvdrip"
    android:layout_toRightOf="@+id/release_res_webdl"
    android:src="@drawable/format_dvdrip" /> 
```

请记住，每个元素的可见性都设置为“消失”。要设置我使用这个循环的图片显示，进入 getView() 方法：

```
 for(VideoFormat format:selectedRel.getResolutions()){
            ImageView resolutionPic=getResolutionImageView(format, contentView);
            resolutionPic.setVisibility(View.VISIBLE);
        } 
```

它工作正常，除非我滚动列表然后回到第一个元素。看起来列表加载了其他图片，即使它不应该这样做；一段时间后，不必要的图片消失了，但这需要太多时间。我能做些什么来避免这一切，并始终看到正确的图片？
编辑：这是 getResolutionImageView 方法：

```
private ImageView getResolutionImageView(VideoFormat format, View contentView){
        switch(format){
        case BDRIP:
            return (ImageView)contentView.findViewById(R.id.release_res_bdrip);

        case BLURAY:
            return (ImageView)contentView.findViewById(R.id.release_res_bd);

        case DVDRIP:
            return (ImageView)contentView.findViewById(R.id.release_res_dvdrip);

        case HD_1080i:
            return (ImageView)contentView.findViewById(R.id.release_res_1080i);

        case HD_1080p:
            return (ImageView)contentView.findViewById(R.id.release_res_1080p);

        case HD_720p:
            return (ImageView)contentView.findViewById(R.id.release_res_720p);

        default:
            return (ImageView)contentView.findViewById(R.id.release_res_standard);

        case WEB_DL:
            return (ImageView)contentView.findViewById(R.id.release_res_webdl);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:59:13.040

当列表视图滚动时，它的`getView`方法被调用。但`convertView`它得到的可能包含旧数据。（其他列表行的数据）。

所以这是解决方案

在`getView`设置`Visibility`一个图像的方法中，设置`Invisible`所有其他 ImageView。

# winforms - 应在 Windows 窗体 C# 中重复添加相同的控件集（文本框、组合框等）

> ID：12660965
> 
> 赞同：0
> 
> 时间：2012-09-30T11:40:09.117
> 
> 标签：winforms, c#-4.0, user-controls

> **可能重复：**
> [Visual 2010 中的 C# windows 窗体中是否有中继器控件？还是替代方案？](https://stackoverflow.com/questions/7442576/is-there-a-repeater-control-in-c-sharp-windows-form-in-visual-2010-or-an-alter)

我创建了一个简单的 Windows 窗体应用程序，它在给定的一组输入上执行一些功能。现在我希望以表单形式提供多组输入，然后为所有输入集调用相同的方法

简而言之：应该通过一个简单的添加按钮重复添加相同的控件集（文本框、组合框等）。

我在网上试过但没有成功。

# .htaccess - 从主页重写规则

> ID：12660966
> 
> 赞同：0
> 
> 时间：2012-09-30T11:40:10.897
> 
> 标签：.htaccess, url-rewriting, mediawiki

请帮助设置/配置 .htaccess 文件。

如何从地址[http://domain.com/main_page](http://domain.com/main_page)重写为[http://domain.com](http://domain.com)？

我做什么或我的 .htaccess 文件：

```
RewriteEngine on
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
```

我试过`RewriteRule ^$ /Main_Page`了，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:51:59.150

我看到三个错误：

首先：您尝试重定向**回 front**。

```
RewriteRule ^$ /Main_Page 
```

会将[http://example.com/](http://example.com/)重定向到[http://example.com/Main_Page](http://example.com/Main_Page)。

第二：对于您的简单情况，`RewriteCond`指令是**多余**的。他们检查请求文件名是否不作为文件或目录存在。但您只想重定向`/main_page`到`/`.

第三：**URL 区分大小写**。在 Windows Web 服务器上，这无关紧要。但是您的设置似乎无法在 Windows Web 服务器上运行。如果您真的需要不区分大小写的重定向，这是另一个问题。请参阅[带有 mod_rewrite 的不区分大小写的 URL](https://stackoverflow.com/q/1998156/220060)。

# tsql - 解析文件夹路径并返回表的函数

> ID：12660970
> 
> 赞同：0
> 
> 时间：2012-09-30T11:40:26.497
> 
> 标签：tsql

如何创建解析文件夹路径并返回表的函数？

分隔符将是反斜杠`\`。输入将是一个文件夹路径 `FolderA\FolderB`。

输出将是一个按顺序包含文件夹的表格：

```
FolderName: FolderA  FolderB    
Level:      0      1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T12:48:15.323

这个问题可以推广到字符串拆分问题。T-SQL 中的字符串操作是可能的，但难以理解，因为复杂表达式的语法笨拙。

[Itzik Ben-Gan 在他对sqlservercode](http://sqlservercode.blogspot.co.uk/2007/04/interview-with-itzik-ben-gan-author-of.html)博客的采访中提供了解决此问题所需的所有技巧。

### 字符串分割函数

Itzik 提供了一个用于拆分字符串的内联表值函数，通过一些修改，它将解决您的问题：

```
CREATE FUNCTION dbo.fn_split(@arr AS VARCHAR(MAX)) RETURNS TABLE
AS
RETURN
  SELECT
    n - LEN(REPLACE(LEFT(@arr, n), ',', '')) + 1 AS pos,
    SUBSTRING(@arr, n,
      CHARINDEX(',', @arr + ',', n) - n) AS element
  FROM dbo.Nums
  WHERE n <= LEN(@arr) AND SUBSTRING(',' + @arr, n, 1) = ','; 
```

此功能允许您将逗号分隔的元素字符串拆分为位置索引表。像这样的查询：

```
SELECT * FROM dbo.fn_split('10248,10249,10250'); 
```

生成如下结果集：

```
pos element
---- --------
1 10248
2 10249
3 10250 
```

### 一个辅助数字表

字符串拆分功能依赖于辅助数字表。您的数据库中可能已经有其中之一，因为它们对于解决各种问题很有用。

如果您没有，您可以调整 Itzik 推荐的另一个内联表值函数，以提高效率，如果不是清晰的话：

```
CREATE FUNCTION dbo.fn_nums(@n AS BIGINT) RETURNS TABLE
AS
RETURN
  WITH
  L0   AS(SELECT 1 AS c UNION ALL SELECT 1),
  L1   AS(SELECT 1 AS c FROM L0 AS A, L0 AS B),
  L2   AS(SELECT 1 AS c FROM L1 AS A, L1 AS B),
  L3   AS(SELECT 1 AS c FROM L2 AS A, L2 AS B),
  L4   AS(SELECT 1 AS c FROM L3 AS A, L3 AS B),
  L5   AS(SELECT 1 AS c FROM L4 AS A, L4 AS B),
  Nums AS(SELECT ROW_NUMBER() OVER(ORDER BY c) AS n FROM L5)
  SELECT n FROM Nums 
  WHERE n <= @n; 
```

此函数允许您生成具有指定行数的表。像这样的查询：

```
SELECT * FROM dbo.fn_nums(10); 
```

生成如下结果集：

```
n
---
1
2
3
4
5
6
7
8
9
10 
```

### 一个通用的自包含字符串拆分函数

通过组合字符串拆分器和行生成器，您可以使函数自包含，我的意思是它独立于数据库中的其他对象工作。

通过添加一个指定分隔符的额外参数，您可以使字符串拆分器通用，因为它将拆分由任何字符分隔的字符串，而不仅仅是逗号。

您可以将 Itzik 的 string'splitter 替换为修改后的版本，如下所示：

```
CREATE FUNCTION dbo.fn_split(@arr AS VARCHAR(MAX), @delim AS CHAR(1)) RETURNS TABLE
AS
RETURN
  WITH
  L0   AS(SELECT 1 AS c UNION ALL SELECT 1),
  L1   AS(SELECT 1 AS c FROM L0 AS A, L0 AS B),
  L2   AS(SELECT 1 AS c FROM L1 AS A, L1 AS B),
  L3   AS(SELECT 1 AS c FROM L2 AS A, L2 AS B),
  L4   AS(SELECT 1 AS c FROM L3 AS A, L3 AS B),
  L5   AS(SELECT 1 AS c FROM L4 AS A, L4 AS B),
  Nums AS(SELECT ROW_NUMBER() OVER(ORDER BY c) AS n FROM L5)
  SELECT
    n - LEN(REPLACE(LEFT(@arr, n), @delim, '')) + 1 AS pos,
    SUBSTRING(@arr, n,
      CHARINDEX(@delim, @arr + @delim, n) - n) AS element
  FROM Nums
  WHERE n <= LEN(@arr) AND SUBSTRING(@delim + @arr, n, 1) = @delim; 
```

您可以通过传递与以前相同的参数并传递逗号作为分隔符来复制原始函数的输出：

```
SELECT * FROM dbo.fn_split('10248,10249,10250', ','); 
```

它产生如下结果集：

```
POS ELEMENT
1   10248
2   10249
3   10250 
```

### 解决您的问题

现在我们有了一个可以为任何分隔的元素字符串生成表格的函数，我们可以解决您的问题。

使用通用的自包含字符串拆分器，您可以使用以下查询：

```
SELECT
  Element AS FolderName,
  Pos - 1 AS Level
FROM dbo.fn_split('FolderA\FolderB', '\'); 
```

它产生如下结果集：

```
FOLDERNAME  LEVEL
FolderA 0
FolderB 1 
```

SQL Server 对字符串操作和由 ROW_NUMBER 函数生成的序列等序列使用从 1 开始的索引，因此通用字符串拆分器应遵循此约定是有意义的。

因为您希望路径中的第一个文件夹为 0 级，所以查询从元素位置减去 1 以获得从 0 开始的索引。

您可以在[SQL Fiddle](http://sqlfiddle.com/#!6/56f98/2)上使用此解决方案进行实验。

# javascript - 带参数的 Javascript 构造函数

> ID：12660971
> 
> 赞同：0
> 
> 时间：2012-09-30T11:40:30.423
> 
> 标签：javascript, inheritance, constructor, prototypal-inheritance

在尝试理解 javascript 构造函数时，我一直在研究[这个问题](https://stackoverflow.com/questions/892595/javascript-prototypal-inheritance)。

在我看来，我理解它是合理的，但具有讽刺意味的是，当我尝试运行类似的代码时，它根本不适合我。

这是我的代码

```
function Car(name) {
    this.Name = name;
    this.Year = 1999;
}

Car.prototype.Drive = function() {
    document.write("My name is '" + this.Name + "' and my year is '" + this.Year + "'. <br />");
};

SuperCar = function () { };
SuperCar.prototype = new Car();

function SuperCar(name) {
    Car.call(this, name);
}

var MyCar = new Car("mycar");
var MySuperCar = new SuperCar("my super car");

MyCar.Drive();
MySuperCar.Drive(); 
```

首先，这条线

```
SuperCar = function () { }; 
```

是它运行所必需的。如果我忽略它，我会在这一行出现错误“SuperCar 未定义”。

```
SuperCar.prototype = new Car(); 
```

我真的不明白为什么将 SuperCar 声明为空函数是必要的。

其次，当我运行代码时，我得到了这个结果

```
My name is 'mycar' and my year is '1999'. 
My name is 'undefined' and my year is '1999'. 
```

显然，对于 MySuperCar，从不调用 SuperCar(name) 函数，但 Car() 是。

添加此行无济于事

```
SuperCar.prototype.constructor = SuperCar; 
```

这也不

```
SuperCar.prototype.constructor = function(name) {
    Car.call(this, name);
}; 
```

（我一直在 IE 9 和 Chrome 22 上的脚本标签内运行代码）

我应该如何正确定义采用名称参数的 SuperCar 构造函数？或者，换一种说法，我怎样才能使新的 SuperCar("my super car") 调用按我预期的方式运行（将名称设置为“my super car”）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T11:54:10.010

您不应该真正创建一个实例`Car`作为原型，而只创建一个继承自`Car.prototype`. 有关详细信息，请参阅[在 Derived.prototype = new Base 中使用“new”关键字的原因是什么](https://stackoverflow.com/q/12592913/1048572)。相反，使用

```
SuperCar.prototype = Object.create(Car.prototype); 
```

* * *

您的问题是您`SuperCar`的 s 是由空函数创建的 - 它返回一个没有任何属性的对象。然而，它们继承自`new Car()`, who `name`is `undefined`。这发生在您的小提琴中，因为*函数声明*（以关键字开头`function`，请查看[此说明](http://kangax.github.com/nfe/#expr-vs-decl)）被提升（在范围内的任何地方都可用）并被该行覆盖

```
SuperCar = function () { }; 
```

这样您的`SuperCar`构造函数就不会再调用`Car`构造函数了。[固定小提琴](http://jsfiddle.net/Gs4qu/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T11:44:06.367

您不需要空函数。你创建了一个空`SuperCar`函数，然后设置了它的原型，然后用*新*的定义重写了它`SuperCar`。

```
function SuperCar() {}
SuperCar.prototype = new Car();

function SuperCar() {} // original SuperCar overwritten 
```

# android - Android Facebook 单点登录错误

> ID：12660974
> 
> 赞同：0
> 
> 时间：2012-09-30T11:41:05.853
> 
> 标签：android, facebook-graph-api, single-sign-on, android-facebook

我正在尝试在我的 android 应用程序中实现 Facebook SSO。它打开本机 Facebook 应用程序，登录过程完成后显示“500：内部服务器错误”。我做错了什么？

任何建议将不胜感激。这是我的代码

```
public class FacebookUtil {

    public static Facebook facebook = new Facebook(AppConstants.FACEBOOK_APP_ID);
    String FILENAME = "AndroidSSO_data";
    private static SharedPreferences mPrefs;
    private static Context mContext;
    private static  boolean isSucess;
    private static FacebookSucessListener mFacebookSucessListener;
     public static final String FB_APP_SIGNATURE ="xxxxxxxxxxxxxxxxxxx"; 
    public interface FacebookSucessListener {
        public void onSucess(boolean isSucess);
    }
    public static void postToWall(){
        facebook.dialog(mContext, "feed" , new DialogListener(){
            public void onCancel() {

            }
            public void onComplete(Bundle arg0) {

            }

            public void onError(DialogError arg0) {

            }

            public void onFacebookError(FacebookError arg0) {

            }});
    }

    /*
     * Function to update status
     * @param facebook acesstoken acess token
     * @param  String message to post
     */
    public static void updateStatus(String accessToken, final String aMsgToShare){
        try {
            Bundle bundle = new Bundle();
            bundle.putString("message", aMsgToShare);
            bundle.putString(Facebook.TOKEN, accessToken);
            String response = facebook.request("me/feed",bundle,"POST");
            if(response.contains("Duplicate status message"))
                Toast.makeText(mContext, "Duplicate message can not post", Toast.LENGTH_SHORT).show();
            else if (response.contains("The user hasn't authorized the application to perform this action"))
                Toast.makeText(mContext, "The user hasn't authorized the application to perform this action",Toast.LENGTH_SHORT).show();
            else
                Toast.makeText(mContext,"Posted Successfuly", Toast.LENGTH_SHORT).show();
        } catch (MalformedURLException e) {
            Log.e("MALFORMED URL",""+e.getMessage());

        } catch (IOException e) {

        }
    }
    /*
     * To logout from facebook
     * @param Activity activity
     * return response
     */
    public static String logoutFacebook(Activity aActivity){
        String resonse = "";
        try {
            String response = facebook.logout(aActivity.getApplicationContext());
        } catch (Exception e) {
            Log.e("LogoutException",""+e.getMessage());
        }
        return resonse;
    }

    /*
     * TO start the  facebook login process
     * @param Activity activity
     * @param SharedPreferences pref
     * return true in case of sucess false otherwise
     */
    public static void startLoginProcess(final Activity aActivity,final SharedPreferences mPrefs,FacebookSucessListener facebookSucessListener)
    {
        try{
            mFacebookSucessListener = facebookSucessListener;
        }catch(Exception e){}

        /*
         * Get existing access_token if any
         */
        mContext=aActivity;
        String access_token = mPrefs.getString("fb_access_token", null);
        long expires = mPrefs.getLong("fb_expire_time", 0);
        if(access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if(expires != 0) {
            facebook.setAccessExpires(expires);
        }
        boolean isSessionValid  = facebook.isSessionValid();
        if(!isSessionValid)
        {
            //Facebook.FORCE_DIALOG_AUTH
            facebook.authorize( aActivity, AppConstants.permissions, 1, new DialogListener() {
                public void onComplete(Bundle values) {
                    String token = values.getString(Facebook.TOKEN);
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("fb_access_token", facebook.getAccessToken());
                    editor.putLong("fb_expire_time", facebook.getAccessExpires());
                    editor.putBoolean("is_fb_logged_in", true);
                    editor.commit();
                    mFacebookSucessListener.onSucess(true);
                }

                public void onFacebookError(FacebookError error) {
                    mFacebookSucessListener.onSucess(false);
                    Log.e("Facebook-onFacebookError", error.getMessage());
                    Toast.makeText(aActivity, "Error: "+ error.getMessage(), 600).show();
                }
                public void onError(DialogError e) {
                    mFacebookSucessListener.onSucess(false);
                    Log.e("Facebook-onError", e.getMessage());
                    Toast.makeText(aActivity, "Error: "+ e.getMessage(), 600).show();

                }

                public void onCancel() {

                }
            });
        }
        else {
            mFacebookSucessListener.onSucess(true);
        }

    }
    final class PostDialogListener implements DialogListener {
        public void onComplete(Bundle values) {

        }

        public void onFacebookError(FacebookError error) {
            Log.e("Facebook-onFacebookError", error.getMessage());
        }

        public void onError(DialogError error) {
            Log.e("Facebook-onFacebookError", error.getMessage());
        }

        public void onCancel() {

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T05:01:11.820

最后我解决了我的问题。我在窗口 7 中通过 CMD 生成的 Has 键是错误的。所以我以编程方式生成了这个。

```
private void getHashKey()
{
        PackageInfo info;
        try {
        info = getPackageManager().getPackageInfo("your app package name", PackageManager.GET_SIGNATURES);
        for (Signature signature : info.signatures) {
                   MessageDigest md;
        md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
                   //String something = new String(Base64.encode(md.digest(), 0));
                     String something = new String(Base64.encode(md.digest(),0));
                   Log.e("**** Hash Key", something);
        } 
        }
        catch (NameNotFoundException e1) {
        Log.e("name not found", e1.toString());
        }

        catch (NoSuchAlgorithmException e) {
        Log.e("no such an algorithm", e.toString());
        }
        catch (Exception e){
        Log.e("exception", e.toString());
        }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T12:06:25.817

请参考这个

[Android 单点登录](https://stackoverflow.com/questions/7712361/android-single-sign-on)

也试试这个...

**`"Enhanced Auth Dialog"`**应该是`disabled in application settings`为了解决你的问题。

# c# - 如何增加“滑块”控件的厚度

> ID：12660983
> 
> 赞同：2
> 
> 时间：2012-09-30T11:42:49.483
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我的网格中有一个滑块控件：

```
<Slider x:Name="MainSlider"
        Margin="659,145,417,146"
        Grid.Row="1"
        Orientation="Vertical"
        SmallChange="1"
        RenderTransformOrigin="0.0799999982118607,0.5"/> 
```

不过，我希望它更宽一些，这样整个酒吧就会被拉长。

我已经浏览了这些属性，`Width`实际上并没有改变滑块本身的厚度，只是改变了框架。

我怎样才能使实际`Slider`更厚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T11:55:39.550

您可能需要定义自己的风格。您可以复制默认样式（例如使用 Expression Blend）并调整各个组件的值。

使用“编辑样式”选项获取模板的副本，然后进行处理。

[MSDN](http://msdn.microsoft.com/en-us/library/cc295021%28v=expression.40%29.aspx)上有更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T12:01:16.067

您可以根据需要自定义 Slider 的样式模板：

[http://codingsense.wordpress.com/2010/02/01/customize-a-slider-in-wpf-step-by-step-tutorial/](http://codingsense.wordpress.com/2010/02/01/customize-a-slider-in-wpf-step-by-step-tutorial/)

[http://msdn.microsoft.com/en-us/library/vstudio/ms753256%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ms753256%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T13:27:49.797

如果您从滑块模板的副本制作模板：

右键单击滑块->“编辑模板”->“编辑副本”

然后，您可以将 TrackBackground 和 PART_SelectionRange WIDTH 更改为您想要的任何内容。在我的情况下，它们默认为“4.0”：

```
<Border x:Name="TrackBackground"
        Grid.Column="1"
        Width="XX.X"
        Margin="0,5"
        HorizontalAlignment="center"
        Background="{StaticResource HorizontalSliderTrackNormalBackground}"
        BorderBrush="{StaticResource VerticalSliderTrackNormalBorder}"
        BorderThickness="1"
        CornerRadius="1">
    <Canvas Margin="-1,-6">
        <Rectangle x:Name="PART_SelectionRange"
                   Width="XX.X"
                   Fill="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"
                   Stroke="{DynamicResource {x:Static SystemColors.ControlDarkDarkBrushKey}}"
                   StrokeThickness="1.0"
                   Visibility="Hidden" />
    </Canvas>
</Border> 
```

# forms - Symfony2 entityaudit：在修订表上添加字段

> ID：12660984
> 
> 赞同：2
> 
> 时间：2012-09-30T11:42:54.307
> 
> 标签：forms, symfony

我的捆绑包中有 2 个实体，它们通过[simplethings/entity-audit 进行审计](https://github.com/simplethings/EntityAudit)。我想在 REVISIONS 表中添加一个字段，称为“原因”。每次用户更新或删除实体时，他/她都需要通过表单指定这样做的原因（为什么更新/删除），并且该原因应与实体修订相关联。

你们会怎么做呢？我在 OOP 方面没有太多经验。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T11:08:18.843

要添加字段，您需要在数据库中添加字段，例如“ip”，然后在文件“logRevisionsListener.php”中更改捆绑包

```
 private function getRevisionId()
    {
        if ($this->revisionId === null) {
            $this->conn->insert($this->config->getRevisionTableName(), array(
                'timestamp'     => date_create('now'),
                'username'      => $this->config->getCurrentUsername(),
                'ip'      => $this->config->getCurrentUsername(),(not correct just for test it give me the user name)
            ), array(
                Type::DATETIME,
                Type::STRING,
                Type::STRING
            ));
.
.
} 
```

我在这里添加了 ip 字段并通过使用 getter 方法添加您的字段来更改您的 Revision.php 文件

# ruby-on-rails - 创建具有许多 belongs_to 的记录

> ID：12660987
> 
> 赞同：0
> 
> 时间：2012-09-30T11:43:23.420
> 
> 标签：ruby-on-rails, ruby, json

在rails中，我只是：

```
render json: user 
```

但我想在基于其他字段计算的用户 json 输出中添加一个附加字段（例如：全名，按名字 + 姓氏计算）

我怎样才能做到这一点而不必求助于自定义 json 视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T11:47:58.357

要向 json 添加方法，您可以使用`:methods`param。因此，如果您`fullname`的用户模型中有方法，您可以调用如下内容：

```
render json: user.to_json(methods: :full_name) 
```

# ruby-on-rails - 按 user_id 的 Rails 范围模型数据

> ID：12660989
> 
> 赞同：0
> 
> 时间：2012-09-30T11:43:37.740
> 
> 标签：ruby-on-rails

我有一个用户渴望的 Rails 应用程序，并且我在会话中有 user_id。下一步是为向用户显示的所有模型数据创建一个范围`data.user_id = session[:user_id]`。

我知道我可以在每个控制器中执行以下操作

```
Controller.find_all_by_user_id(session[:user_id]) 
```

然而对我来说，似乎有更好的解决方案。我发现了向模型添加范围的可能性，但是这里不知道会话，并且从 MVC 模式的角度来看，将它放在那里可能不是一个好主意。有没有一种解决方案可以对来自模型的所有数据应用这样的 user_id 限制，或者我应该只`find_all_by_user_id`对每个包含 userdata 的控制器函数使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T12:02:12.977

如果我对您的理解正确，您希望通过`user_id`. 这意味着您可以将用户模型中的关系定义为`has_many :this_and_that`或类似的东西。没错，那么您可以`before_filter`在您的应用程序控制器中创建一个甚至更好的函数，您可以在其中获取您当前的用户实例。通过此实例，您可以访问该用户的所有可用数据。您甚至可以使该函数成为辅助函数，并且可以在视图中使用它。

```
#User.erb
has_many :other_data

#ApplicationConroller.erb
def current_user
  @current_user ||= User.find_by_id(session[:user_id])
end

#OtherControllers
def index
  @other_datas = current_user.other_datas
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T12:08:00.357

你可以有`before_filter :load_user_data, :if => current_user`或类似的东西。方法将如下所示：

```
def load_user_data  
 @data = ModelName.where(user_id: session[:user_id]) 
end 
```

`@data`将是`ActiveRecord::Relation`并且将是可链接的。`find_all_by_user_id`如果您真的需要它，也可以在每个控制器中使用它。

# python - 如果它的子任务给出异常，如何使链失败

> ID：12660994
> 
> 赞同：6
> 
> 时间：2012-09-30T11:43:59.643
> 
> 标签：python, django, rabbitmq, celery

我遇到了一个非常奇怪的芹菜问题：

有一系列任务，其中一个给出异常并重试几次

```
chain = (err.si(1) | err.si(2))
result = chain.apply_async()
result.state
result.get() 
```

这是任务的代码：

```
@celery.task(base=MyTask)
def err(x):
try:
    if x < 3:
        raise Exception
    else:
        return x+1

except Exception as exp:
    print "retrying"
    raise err.retry(args=[x],exc=exp,countdown=5,max_retries=3) 
```

问题是，虽然链中的任务给出了一个异常，但是 result.state 一直是“PENDING”并且 .get() 只是冻结了。

如果它达到最大重试值，我试图使任务失败：

```
class MyTask(celery.Task):
abstract = True
def after_return(self, status, retval, task_id, args, kwargs, einfo):
    if self.max_retries == self.request.retries:
        self.state = states.FAILURE 
```

但是，尽管单独执行的任务被标记为 FAILED，但在链中执行会给出相同的结果 - PENDING & Freezed get。

我预计一旦它的任何任务失败并且 .get 结果应该产生从任务抛出的异常，该链将失败。

_ ***UPDATE* _** apply_async 给出的堆栈跟踪，其中 ALWAYS_EAGER=True

```
result = chain.apply_async()

Exception                                 
Traceback (most recent call last)
<ipython-input-4-81202b369b5f> in <module>()
----> 1 result = chain.apply_async()

lib/python2.7/site-packages/celery/canvas.pyc in apply_async(self, args, kwargs,     **options)
    147         # For callbacks: extra args are prepended to the stored args.
    148         args, kwargs, options = self._merge(args, kwargs, options)
--> 149         return self.type.apply_async(args, kwargs, **options)
    150 
    151     def append_to_list_option(self, key, value):

/lib/python2.7/site-packages/celery/app/builtins.pyc in apply_async(self, args, kwargs, group_id, chord, task_id, **options)
    232                 task_id=None, **options):
    233             if self.app.conf.CELERY_ALWAYS_EAGER:
--> 234                 return self.apply(args, kwargs, **options)
    235             options.pop('publisher', None)
    236             tasks, results = self.prepare_steps(args, kwargs['tasks'])

lib/python2.7/site-packages/celery/app/builtins.pyc in apply(self, args, kwargs, subtask, **options)
    249             last, fargs = None, args  # fargs passed to first task only
    250             for task in kwargs['tasks']:
--> 251                 res = subtask(task).clone(fargs).apply(last and (last.get(), ))
    252                 res.parent, last, fargs = last, res, None
    253             return last

lib/python2.7/site-packages/celery/result.pyc in get(self, timeout, propagate, **kwargs)
    677         elif self.state in states.PROPAGATE_STATES:
    678             if propagate:
--> 679                 raise self.result
    680             return self.result
    681     wait = get

Exception: 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-01T11:48:59.713

当你有链时：

```
>>> c = a.s() | b.s() | c.s()
>>> res = c()
>>> res.get() 
```

调用链将为链中的所有任务生成唯一的 id，发送消息并返回*链中的最后一个结果*。

因此，当您这样做时，`res.get()`您很容易尝试检索链中最后一个任务的结果。

它还将用`parent`属性装饰结果，您可以遍历这些属性以获取链的进度：

```
>>> res                # result of c.s()
>>> res.parent         # result of b.s()
>>> res.parent.parent  # result of a.s() 
```

如果您想在此过程中检查错误，您可以执行以下操作：

```
def nodes(node):
    while node.parent:
        yield node
        node = node.parent
    yield node

values = [node.get(timeout=1) for node in reversed(list(nodes(res)))]
value = values[-1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T10:39:09.203

其实我认为你不应该`raise`在这里使用。

你抛出一个异常，当[文档说你不应该](http://ask.github.com/celery/cookbook/task-retries.html)时，你可能只想使用`err.retry`而不是`raise err.retry`。

# image-processing - Monotouch中的CGBitmapContextGetData

> ID：12660996
> 
> 赞同：2
> 
> 时间：2012-09-30T11:44:06.993
> 
> 标签：image-processing, xamarin.ios

您好，我正在尝试在 monotouch 中操作位图数据。

**Monotouch**中CGBitmapContextGetData的等价物是什么 。

还有其他方法可以更改图像位图数据吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:39:51.697

> Monotouch中CGBitmapContextGetData的等价物是什么。

该[`CGBitmapContextGetData`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CGBitmapContext/Reference/reference.html#//apple_ref/c/func/CGBitmapContextGetData)函数映射到[`CGBitmapContext.Data`](http://iosapi.xamarin.com/?link=P%3aMonoTouch.CoreGraphics.CGBitmapContext.Data)MonoTouch 中的属性。

> 还有其他方法可以更改图像位图数据吗？

*几乎*所有 CoreGraphics 函数都映射到 C# 方法/属性（如果没有，请填写[错误报告](http://bugzilla.xamarin.com)）。使用前面的链接查看可用的内容，或者（作为最后的手段）您可以使用指针来修改数据本身。

# mysql - 如何解决 VB.net 中的 MySQL Select 语句错误？

> ID：12660997
> 
> 赞同：1
> 
> 时间：2012-09-30T11:44:23.673
> 
> 标签：mysql, vb.net

我正在使用以下代码尝试从两个表中检索数据并使用该信息填充 ComboBox。然后，当用户从 ComboBox 中选择一个值时，我想使用从 DB 中检索到的与 ComboBox 的值匹配的数据填充表单上的所有控件（仍然没有弄清楚如何做到这一点）。

**注意：** 错误中显示的 1090 是我从 InputBox 控件接收的帐号，然后将 TextboxAccount.Text 值设置为它。所以我不确定这是否是我的问题所在。

**这是抛出的VB异常：**

> “您的 SQL 语法有错误；请查看与您的 MySQL 版本相对应的手册，以在第 1 行的 'customer.accountNumber = '1090” 附近使用正确的语法”

**这是我的代码：**

```
 Private Sub RetrieveMySQLdata()

    Try
        'FOR MySQL DATABASE USE
        Dim dbConn As New MySqlConnection
        Dim dbQuery As String = ""
        Dim dbCmd As New MySqlCommand
        'Dim dbData As MySqlDataReader
        Dim dbAdapter As New MySqlDataAdapter
        Dim dbTable As New DataTable
        If dbConn.State = ConnectionState.Closed Then
            'dbConn = New MySqlConnection
            dbConn.ConnectionString = String.Format("Server={0};Port={1};Uid={2};Password={3};Database=accounting", FormLogin.ComboBoxServerIP.SelectedItem, My.Settings.DB_Port, My.Settings.DB_UserID, My.Settings.DB_Password)
            dbConn.Open()
        End If

        dbQuery = "SELECT *" & _
                   "FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber" & _
                   "WHERE customer.accountNumber = '" & TextBoxAccount.Text & "'"
        With dbCmd
            .CommandText = dbQuery
            .Connection = dbConn
        End With
        With dbAdapter
            .SelectCommand = dbCmd
            .Fill(dbtable)
        End With
        Dim i As Integer
        For i = 0 To dbTable.Rows.Count - 1
            ComboBoxCard.ValueMember = "cc_Number"

        Next
    Catch ex As Exception
        MessageBox.Show("A DATABASE ERROR HAS OCCURED" & vbCrLf & vbCrLf & ex.Message & vbCrLf & _
                    vbCrLf + "Please report this to the IT/Systems Helpdesk at Ext 131.")
    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:53:28.220

在本声明中：

```
dbQuery = "SELECT *" & _
          "FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumber" & _
          "WHERE customer.accountNumber = '" & TextBoxAccount.Text & "'" 
```

某些子句之间没有空格，例如`cc_master.customer_accountNumber`and `WHERE`。结果字符串将如下所示：

```
SELECT *FROM cc_master INNER JOIN customer ON customer.accountNumber = cc_master.customer_accountNumberWHERE customer.accountNumber = 'SOME SQL INJECTABLE STRING' 
```

作为 MySQL 语法错误消息的一般提示，当您看到如下消息时：

> “您的 SQL 语法有错误；请查看与您的 MySQL 版本相对应的手册，以在第 1 行的 'customer.accountNumber = '1090” 附近使用正确的语法”

您应该在“接近”的部分之前查找语法错误*。*查询解析器从头到尾读取，并在发现无法解释的内容时抛出错误。通常它无法解释的第一件事是它在错字/错误之后看到的第一件事。

**另请注意**，使用字符串连接对于构建 SQL 查询是一个*非常糟糕的主意。*[它让您对SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)敞开大门。 如果您使用的是普通的旧 ADO.NET，那么至少您应该使用[参数化查询](http://msdn.microsoft.com/en-us/library/bbw6zyha.aspx)。作为更进一步的步骤，您可能想要研究 LINQ to SQL 或实体框架之类的东西，它们在自动生成的代码背后抽象了数据库访问，这些代码在幕后为您进行了参数化。